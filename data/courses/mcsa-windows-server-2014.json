{
  "description": "Over 80% of computers run Microsoft Operating systems. As a result, the Microsoft Certified Solutions Associate is one of the first steps for those seeking to start a technical career. The MCSA: Windows Server 2012 is designed to be a mid-tier certification for someone who has been working in the field for several years and has had exposure to large and enterprise size deployments of Microsoft Windows and covers topics that are a “must know” for anyone responsible for deploying, maintaining and supporting Windows Server 2012 servers in a corporate or enterprise environment. Server systems often form a critical piece of the day-to-day operations for any business. The MCSA 70-412 Configuring Advanced Windows Server 2012 Services exam covers advanced configurations, Active Directory Federated Services and other areas that will help in your pursuit of the MCSA and also help in an after pursuit of the MCSE certification.",
  "descriptionMD": "",
  "length": "72852",
  "name": "MCSA Windows Server 2012 - 70-412",
  "practiceExam": true,
  "subtitle": "Configuring Advanced Windows Server 2012 Services",
  "tagUrl": "legacy",
  "topics": [
    {
      "episodes": [
        {
          "description": "MCSA Windows Server 2012 (70-412) Over 80% of computers run Microsoft Operating systems. As a result, the Microsoft Certified Solutions Associate is one of the first steps for those seeking to start a technical career. The MCSA: Windows Server 2012 covers topics that are “must know” for anyone responsible for deploying, maintaining and supporting Windows Server 2012 servers in a corporate or enterprise environment. Server systems often form a critical piece of the day-to-day operations for any business. The MCSA covers topics that will help the learner ensure their computing environment is functional and stable.",
          "length": "533",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70410/microsoftserver2012-0-0-overview-112414.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70410/microsoftserver2012-0-0-overview-112414-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70410/microsoftserver2012-0-0-overview-112414-sm.jpg",
          "title": "Overview of Windows Server 2012 R2",
          "transcript": "1\n00:00:00,000 --> 00:00:08,758\n[MUSIC]\n\n2\n00:00:08,758 --> 00:00:12,563\nThe MCSA or Microsoft Certified\nSolutions Associate is one of\n\n3\n00:00:12,563 --> 00:00:16,210\nthe more popular\ncertifications from Microsoft.\n\n4\n00:00:16,210 --> 00:00:19,160\nIt's designed to be\na mid-tier certification.\n\n5\n00:00:20,200 --> 00:00:23,530\nGreater knowledge than somebody who's\njust getting started in IT, but\n\n6\n00:00:23,530 --> 00:00:25,450\nnot expert lever, level knowledge.\n\n7\n00:00:25,450 --> 00:00:28,330\nThis is somebody who's been working\nin the field for several years and\n\n8\n00:00:28,330 --> 00:00:33,700\nhas had exposure to large and enterprise\nsize deployments of Microsoft Windows.\n\n9\n00:00:33,700 --> 00:00:37,860\nThe MCSA for\nWindows Server 2012 is probably the most\n\n10\n00:00:37,860 --> 00:00:40,900\ncommonly sought-after\ncertification with Microsoft.\n\n11\n00:00:40,900 --> 00:00:44,190\nThese are for technicians who are not\ngoing to be just working with desktops,\n\n12\n00:00:44,190 --> 00:00:46,450\nbut deploying Windows servers.\n\n13\n00:00:46,450 --> 00:00:50,130\nThese might be email servers,\nfile servers, print servers.\n\n14\n00:00:50,130 --> 00:00:52,040\nThey might be authentication servers.\n\n15\n00:00:52,040 --> 00:00:55,210\nThere's all sorts of different types\nof servers you might deploy, and\n\n16\n00:00:55,210 --> 00:00:58,640\nthe MCSA for Windows Server 2012\ncovers the majority of them.\n\n17\n00:00:58,640 --> 00:01:01,780\nIt shows typical deployment scenarios for\na server.\n\n18\n00:01:01,780 --> 00:01:05,290\nHow to deploy the software successfully,\nhow to secure the software and\n\n19\n00:01:05,290 --> 00:01:09,000\nensure things are working nice and\nsmooth, and how to troubleshoot and\n\n20\n00:01:09,000 --> 00:01:11,680\nisolate and correct issues when they\naren't running nice and smooth,\n\n21\n00:01:11,680 --> 00:01:14,080\nand that makes this really valuable.\n\n22\n00:01:14,080 --> 00:01:18,570\nIf you're working in IT and you're sitting\nat a help desk right now, or you're doing\n\n23\n00:01:18,570 --> 00:01:22,060\nfield repairs on computers and you're\nlooking to move to that next step in your\n\n24\n00:01:22,060 --> 00:01:26,560\ncareer, the MCSA for Windows Server\n2012 is normally that next step, right.\n\n25\n00:01:26,560 --> 00:01:30,090\nThis is what gets you out of the field and\nback at the data center.\n\n26\n00:01:30,090 --> 00:01:32,470\nGets you into the server room,\nworking in equipment there.\n\n27\n00:01:32,470 --> 00:01:35,360\nWhich is usually a little more\nexciting than supporting a desktop.\n\n28\n00:01:35,360 --> 00:01:37,850\nWhich can,\ncan over time become a bit monotonous.\n\n29\n00:01:37,850 --> 00:01:39,360\nI think we've all been there.\n\n30\n00:01:39,360 --> 00:01:41,210\nSo, let's take a look at\nthis certification and\n\n31\n00:01:41,210 --> 00:01:42,720\nget a better idea of what it entails.\n\n32\n00:01:42,720 --> 00:01:46,226\nAll right, the MCSA has been around for\nquite a while now.\n\n33\n00:01:46,226 --> 00:01:49,227\nI don't think it's actually\nreached ten years yet but it's,\n\n34\n00:01:49,227 --> 00:01:51,090\nit's a good seven years at least.\n\n35\n00:01:51,090 --> 00:01:54,410\nAnd it's designed to be the,\nwell that mid-tier certification.\n\n36\n00:01:54,410 --> 00:01:56,500\nThe name has changed a little\nbit over the years, but\n\n37\n00:01:56,500 --> 00:01:59,560\nnow it's just the Microsoft\nCertified Solutions Associate.\n\n38\n00:01:59,560 --> 00:02:02,500\nAnd Microsoft actually has\nseveral different ones.\n\n39\n00:02:02,500 --> 00:02:05,570\nThe one we're about to cover is\nthe one for Windows Server 2012.\n\n40\n00:02:05,570 --> 00:02:10,130\nIf your position within the company is\none that allows you to work on servers,\n\n41\n00:02:10,130 --> 00:02:11,900\nthat's what this is designed for.\n\n42\n00:02:11,900 --> 00:02:15,940\nIf you're still at the desktop level but\nyou want to move into the server world,\n\n43\n00:02:15,940 --> 00:02:18,390\nagain, this is the place\nthat you wanna go.\n\n44\n00:02:18,390 --> 00:02:21,600\nBut, if you're looking to\ndo desktop support, well,\n\n45\n00:02:21,600 --> 00:02:23,840\nthe server technologies,\nthey can be helpful.\n\n46\n00:02:23,840 --> 00:02:26,230\nThey help you to understand what's\ngoing on on the server side.\n\n47\n00:02:26,230 --> 00:02:28,440\nBut it's not necessarily\nthe right place for you to start.\n\n48\n00:02:28,440 --> 00:02:32,840\nYou typically want to go to the MCSA for\nWindows 8 or MCSA for Windows 7.\n\n49\n00:02:32,840 --> 00:02:35,250\nNow, if you're just\ngetting started in IT so\n\n50\n00:02:35,250 --> 00:02:40,250\nyou've got a resume full of other jobs and\nyou're looking to launch an IT career.\n\n51\n00:02:40,250 --> 00:02:44,460\nWell again the MCSA for Windows servers\nis not really a great starting point.\n\n52\n00:02:44,460 --> 00:02:46,120\nIn order to set up a server,\n\n53\n00:02:46,120 --> 00:02:49,590\nthere's a lot of foundational\nknowledge that you need to have.\n\n54\n00:02:49,590 --> 00:02:52,750\nSo if you're just starting out,\nI recommend you jump over to\n\n55\n00:02:52,750 --> 00:02:56,440\nlike the CompTIA A+ and\nCompTIA Network Plus certifications.\n\n56\n00:02:56,440 --> 00:02:59,940\nThose are great starting points for\nlaunching an IT career.\n\n57\n00:02:59,940 --> 00:03:02,470\nIf you're just getting started\nin technology altogether you\n\n58\n00:03:02,470 --> 00:03:07,440\nprobably wanna go to either\nthe CompTIA IT Fundamentals or the MTA,\n\n59\n00:03:07,440 --> 00:03:09,570\nthe Microsoft Technology Associate.\n\n60\n00:03:09,570 --> 00:03:13,410\nThat's designed for people that are just\ngetting their feet wet in the IT world.\n\n61\n00:03:13,410 --> 00:03:15,270\nYou'll learn about basic\noperating systems.\n\n62\n00:03:15,270 --> 00:03:18,740\nNow, that's foundational knowledge\nthat you're expected to already\n\n63\n00:03:18,740 --> 00:03:21,050\nhave by the time you get\nto the server level.\n\n64\n00:03:21,050 --> 00:03:22,400\nSo if you don't possess it,\n\n65\n00:03:22,400 --> 00:03:25,360\nthere's things that we'll cover in there\nthat might be a little over your head.\n\n66\n00:03:25,360 --> 00:03:26,940\nThat if you've missed\nthe foundational knowledge,\n\n67\n00:03:26,940 --> 00:03:28,600\nyou won't be able to build on top of it.\n\n68\n00:03:28,600 --> 00:03:31,120\nSo, definitely check out those\nother certifications if you\n\n69\n00:03:31,120 --> 00:03:32,560\nhaven't done those yet.\n\n70\n00:03:32,560 --> 00:03:33,770\nBut, if you're ready for\n\n71\n00:03:33,770 --> 00:03:37,650\nWindows Server, then the MCSA\n2012 is where you want to go.\n\n72\n00:03:37,650 --> 00:03:42,620\nNow, the MCSA 2012 is actually\nbuilt on three different exams,\n\n73\n00:03:42,620 --> 00:03:46,080\nand each one kind of divides\nthe topic up a little bit.\n\n74\n00:03:46,080 --> 00:03:48,350\nSo, here we can see the three\ndifferent exams, and\n\n75\n00:03:48,350 --> 00:03:51,410\nwe divide it here on ITPROTV\ninto three separate shows.\n\n76\n00:03:51,410 --> 00:03:53,840\nThere's the 70-410, 411 and 412 shows.\n\n77\n00:03:55,830 --> 00:03:58,940\nThe first one is installing and\nconfiguring Windows Server 2012.\n\n78\n00:03:58,940 --> 00:04:01,010\nIf this is the first time you've used it,\n\n79\n00:04:01,010 --> 00:04:03,140\nwe'll cover how to install\nWindows Server 2012.\n\n80\n00:04:03,140 --> 00:04:06,920\nHow to get it in place, and\nhow to add roles to it so\n\n81\n00:04:06,920 --> 00:04:09,670\nyour server can actually\nperform customized functions.\n\n82\n00:04:09,670 --> 00:04:11,540\nWe'll talk about\nthe Microsoft Active Directory,\n\n83\n00:04:11,540 --> 00:04:14,970\nwhich is a critical technology\nthroughout your server infrastructure.\n\n84\n00:04:14,970 --> 00:04:18,840\nWe'll talk about other security concepts,\nand just some of the neat bells and\n\n85\n00:04:18,840 --> 00:04:23,020\nwhistles that are included\nin Windows server.\n\n86\n00:04:23,020 --> 00:04:25,680\nThen, in 411, we go into\nAdministering Windows Server 2012.\n\n87\n00:04:25,680 --> 00:04:30,440\nOnce you've brought up these services,\nnow you need to administer them,\n\n88\n00:04:30,440 --> 00:04:31,280\nyou need to run them.\n\n89\n00:04:31,280 --> 00:04:35,100\nYou need to allow it to scale up\nto thousands, tens of thousands,\n\n90\n00:04:35,100 --> 00:04:36,680\nhundreds of thousands of users.\n\n91\n00:04:36,680 --> 00:04:41,000\nYou need to keep it operational and you\nneed to do some advanced functionality.\n\n92\n00:04:41,000 --> 00:04:44,540\nAnd what, that's what we cover in the\nAdministering Windows Server 2012 show.\n\n93\n00:04:45,780 --> 00:04:48,830\nAnd then the end of it is the 70-412\n\n94\n00:04:48,830 --> 00:04:52,930\nwhich is Configuring Advanced\nWindows Server 2012 Services.\n\n95\n00:04:52,930 --> 00:04:56,890\nWe actually revisit some of the services\nfrom the first two shows, and\n\n96\n00:04:56,890 --> 00:05:00,310\ngo more in depth,\nshowing some advanced configurations, and\n\n97\n00:05:00,310 --> 00:05:04,550\nthen we phase in some new technologies\nlike Active Directory Federated Services\n\n98\n00:05:04,550 --> 00:05:08,040\nthat are extremely complex and\nchallenging.\n\n99\n00:05:08,040 --> 00:05:10,780\nNot useful at all for\nsmall and medium businesses.\n\n100\n00:05:10,780 --> 00:05:13,990\nBut for large and\nenterprise businesses can revolutionize\n\n101\n00:05:13,990 --> 00:05:15,630\nthe way that you offer\nservices on the web.\n\n102\n00:05:15,630 --> 00:05:19,740\nSo, definitely stuff that you want\nto be aware of, and get exposed to.\n\n103\n00:05:19,740 --> 00:05:25,580\nNow these exams are designed to be taken\nin order, so you should start with 70 410.\n\n104\n00:05:25,580 --> 00:05:28,420\nAnd then go on to 411 and\nthen wrap it up with 412.\n\n105\n00:05:28,420 --> 00:05:31,170\nIf you take them out of order,\n\n106\n00:05:31,170 --> 00:05:35,270\neach exam assumes you already have\nthe knowledge from the prior exams.\n\n107\n00:05:35,270 --> 00:05:37,490\nSo for example if you start out on 412,\n\n108\n00:05:37,490 --> 00:05:40,680\nit assumes you already\nhave a passing knowledge.\n\n109\n00:05:40,680 --> 00:05:43,720\nLike you passed the exam,\nnot just in passing.\n\n110\n00:05:43,720 --> 00:05:46,540\nOf 410 and 411.\nIf you don't do that, you'll,\n\n111\n00:05:46,540 --> 00:05:49,340\nyou'll get over your head pretty quick and\nthen you get frustrated and\n\n112\n00:05:49,340 --> 00:05:51,470\nit's hard to be successful\nwhen you're frustrated.\n\n113\n00:05:51,470 --> 00:05:54,470\nSo you do wanna pursue those in order.\n\n114\n00:05:54,470 --> 00:05:59,220\nNow for me, I always recommend that\npeople go ahead and do all three.\n\n115\n00:05:59,220 --> 00:06:01,310\nJust watch all three in order.\n\n116\n00:06:01,310 --> 00:06:04,030\nEven before taking that 410 exam.\n\n117\n00:06:04,030 --> 00:06:08,890\nAnd the reason I say that is, each one\nbuilds on the one from before it so\n\n118\n00:06:08,890 --> 00:06:10,200\nthere's some overlap.\n\n119\n00:06:10,200 --> 00:06:13,560\nAnd that means you're seeing the same\ntechnologies multiple times and\n\n120\n00:06:13,560 --> 00:06:15,030\nyou learn more about it.\n\n121\n00:06:15,030 --> 00:06:18,860\nIf you were to watch all three of\nthese shows, 410, 411, and 412,\n\n122\n00:06:18,860 --> 00:06:23,690\nyou'll be much more likely to pass that\n410 exam the first time you go in there\n\n123\n00:06:23,690 --> 00:06:25,990\ncuz you've seen the technology so\nmany times.\n\n124\n00:06:25,990 --> 00:06:26,620\nAll right?\n\n125\n00:06:26,620 --> 00:06:29,120\nSo how you choose to watch\nthem is ultimately up to you,\n\n126\n00:06:29,120 --> 00:06:32,360\nbut at a minimum,\nyou do want to watch them in order.\n\n127\n00:06:32,360 --> 00:06:35,550\nStart with 410, and\nthen move through each.\n\n128\n00:06:35,550 --> 00:06:38,800\nWhen you're ready to take the exam,\nthe exams are administered through\n\n129\n00:06:38,800 --> 00:06:42,540\nPearson VUE, so\nyou'll just jump over to their website.\n\n130\n00:06:42,540 --> 00:06:45,930\nYou can go straight to it at\nwww.pearsonvue.com/Microsoft.\n\n131\n00:06:45,930 --> 00:06:48,770\nThat'll take you to Microsoft's page.\n\n132\n00:06:48,770 --> 00:06:53,957\nAnd remember VUE is spelled V U E and\nso it's pearsonvue.com/microsoft.\n\n133\n00:06:53,957 --> 00:06:59,200\nThe exams are $150 a piece and\nyou gotta take three of them so\n\n134\n00:06:59,200 --> 00:07:02,510\nunfortunately there is a little bit\nof a shock to the wallet on this one.\n\n135\n00:07:02,510 --> 00:07:07,500\nAssuming you pass on the first time it'll\nbe about $450 to take the three exams.\n\n136\n00:07:07,500 --> 00:07:11,420\nOnce you pass,\nyou get your MCSA Window's Server 2012.\n\n137\n00:07:11,420 --> 00:07:17,830\nNow the MCSA Windows Server 2012 is also\nthe first step in obtaining the MCSE.\n\n138\n00:07:17,830 --> 00:07:21,120\nSo once you've completed this\ncertification the next step is that\n\n139\n00:07:21,120 --> 00:07:22,840\nMCSE that you hear a lot\nof people talk about.\n\n140\n00:07:22,840 --> 00:07:26,310\nRight, that's the, the certification\nMicrosoft has that's the most famous.\n\n141\n00:07:26,310 --> 00:07:28,720\nEverybody's heard of the MCSE.\n\n142\n00:07:28,720 --> 00:07:30,500\nAnd that's a lot of people's goal.\n\n143\n00:07:30,500 --> 00:07:34,490\nBut, the MCSE is not designed for\nsomebody getting started.\n\n144\n00:07:34,490 --> 00:07:38,140\nIt's for somebody who's already\ngot a wealth of experience.\n\n145\n00:07:38,140 --> 00:07:40,430\nAlready has their MCSA, and\n\n146\n00:07:40,430 --> 00:07:45,450\nis moving into that larger\nconsultant type design environment.\n\n147\n00:07:45,450 --> 00:07:49,380\nAnd that's a lot different than the person\nwho's doing the day to day work.\n\n148\n00:07:49,380 --> 00:07:51,710\nThe MCSA is for the doer.\n\n149\n00:07:51,710 --> 00:07:52,810\nThe person who's in the field.\n\n150\n00:07:52,810 --> 00:07:54,600\nThe grunt who's actually\nmaking things happen.\n\n151\n00:07:54,600 --> 00:07:56,750\nRight?\nYou're the one bringing up servers and\n\n152\n00:07:56,750 --> 00:07:57,310\ntroubleshooting.\n\n153\n00:07:57,310 --> 00:07:58,160\nReplacing hard drives.\n\n154\n00:07:58,160 --> 00:08:00,260\nYou're the one who's\nactually making things work.\n\n155\n00:08:00,260 --> 00:08:04,220\nSo in a lot of ways, the knowledge we\ncover in the MCSA certification is more\n\n156\n00:08:04,220 --> 00:08:09,140\nvaluable than what we learn in the MCSE\nand the MCSA is a lot more entertaining in\n\n157\n00:08:09,140 --> 00:08:12,770\nmy opinion because you know, you get\nto use a lot of these technologies.\n\n158\n00:08:12,770 --> 00:08:14,280\nSo keep that in mind as you go through and\n\n159\n00:08:14,280 --> 00:08:18,570\nstudy that the MCSA is a great place to\nstart if you're already somebody who has\n\n160\n00:08:18,570 --> 00:08:22,110\nthat experience and you're looking to get\nthat documented, get it on your resume and\n\n161\n00:08:22,110 --> 00:08:26,200\nlearn all the different things\nthat Windows Server 2012 can do.\n\n162\n00:08:26,200 --> 00:08:29,070\nAll right, well, if that's what you're\nlooking for, you're in the right place.\n\n163\n00:08:29,070 --> 00:08:31,200\nStay tuned, our episodes are coming up.\n\n164\n00:08:31,200 --> 00:08:34,510\nIf not, keep in mind all the other\ncertifications that I mentioned.\n\n165\n00:08:34,510 --> 00:08:36,590\nThere's an appropriate one for\nyou in there somewhere.\n\n166\n00:08:36,590 --> 00:08:39,720\nYou just gotta look to find it and\nthen pursue your goal.\n\n167\n00:08:39,720 --> 00:08:42,890\nRegardless of which route you go,\nI wish you the best of luck on your exam.\n\n168\n00:08:42,890 --> 00:08:44,320\nAnd for those of you sticking with me,\n\n169\n00:08:44,320 --> 00:08:46,272\nI'll see you in the episodes\nhere in just a moment.\n\n170\n00:08:46,272 --> 00:08:53,079\n[SOUND]\n\n",
          "vimeoId": "112924633"
        }
      ],
      "title": "Overview of MCSA Windows Server 2012 R2 (70-412)"
    },
    {
      "episodes": [
        {
          "description": "In this episode Mike and Don introduce us to the concept of High Availability. They discuss installing and configuring Network Load Balancing (NLB). They also demonstrate configuring NLB for a web server.",
          "length": "5058",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/001-Network-Load-Balancing.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/001-Network-Load-Balancing-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/001-Network-Load-Balancing-sm.jpg",
          "title": "Network Load Balancing",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,332 --> 00:00:34,102\nAll right, good morning,\ngood afternoon and good evening, and\n\n3\n00:00:34,102 --> 00:00:34,637\nwelcome back to another\nepisode of IT ProTV.\n\n4\n00:00:34,637 --> 00:00:41,961\nI'm your host Don Pezet today with Mr.\nMike Rodrick.\n\n5\n00:00:41,961 --> 00:00:42,591\nHow's it going, Mike?\n\n6\n00:00:42,591 --> 00:00:43,271\n>> Fantastic.\n\n7\n00:00:43,271 --> 00:00:43,971\nHow's it going Don?\n\n8\n00:00:43,971 --> 00:00:45,831\n>> You know it's funny,\nit's Monday morning.\n\n9\n00:00:45,831 --> 00:00:46,370\n>> Right.\n\n10\n00:00:46,370 --> 00:00:50,640\n>> And I took the week off last week while\nwe were doing some upgrades and stuff and\n\n11\n00:00:50,640 --> 00:00:53,630\nas I'm doing my intro I\nalmost forgot my name.\n\n12\n00:00:53,630 --> 00:00:55,807\nThat would be the awkward\nname pause there.\n\n13\n00:00:55,807 --> 00:00:56,729\n[LAUGH] Who am I again?\n\n14\n00:00:56,729 --> 00:00:58,020\n[LAUGH]\n>> [LAUGH] But\n\n15\n00:00:58,020 --> 00:01:03,090\nI am really excited about today because\nwe are filming a show this week,\n\n16\n00:01:03,090 --> 00:01:07,640\nwhich we have been putting off,\nreally for months it seems like.\n\n17\n00:01:07,640 --> 00:01:08,530\n>> Yes.\n\n18\n00:01:08,530 --> 00:01:12,560\nYep.\n>> So we are jumping into the 70-412 show,\n\n19\n00:01:12,560 --> 00:01:18,264\nwhich if you're not familiar with that,\nI have it pulled up in my web browser,\n\n20\n00:01:18,264 --> 00:01:19,910\nahead of time, thank goodness.\n\n21\n00:01:19,910 --> 00:01:23,880\n70-412, it is the configuring\nadvanced Windows server,\n\n22\n00:01:23,880 --> 00:01:28,110\n2012 services, and you might ask yourself,\nDon, why are you so excited,\n\n23\n00:01:28,110 --> 00:01:29,660\nwe've filmed Windows server shows before.\n\n24\n00:01:29,660 --> 00:01:35,210\nI'm excited because this is the last one\nthat's necessary to get your MCSE for\n\n25\n00:01:35,210 --> 00:01:37,080\nWindows Server, or sorry, MCSA.\n\n26\n00:01:37,080 --> 00:01:37,820\n>> MCSA.\n\n27\n00:01:37,820 --> 00:01:38,770\n>> For Windows Server 2012 R2.\n\n28\n00:01:38,770 --> 00:01:42,115\nI'm getting the cart in front\nof the horse or whatever.\n\n29\n00:01:42,115 --> 00:01:43,900\n>> [LAUGH]\n>> Well,\n\n30\n00:01:43,900 --> 00:01:44,940\nthere's two more to go after that.\n\n31\n00:01:44,940 --> 00:01:45,820\nThen you get your MCSE.\n\n32\n00:01:45,820 --> 00:01:46,540\n>> That's right.\n\n33\n00:01:46,540 --> 00:01:47,300\nBut this is the big one.\n\n34\n00:01:47,300 --> 00:01:49,470\nThis is the final of the three\nyou need for your MCSAs.\n\n35\n00:01:49,470 --> 00:01:50,220\n>> Yeah, it is.\n>> I'm excited.\n\n36\n00:01:50,220 --> 00:01:52,300\nThe other reason I'm excited?\n\n37\n00:01:52,300 --> 00:01:53,500\nThere 's a lot of cool stuff.\n\n38\n00:01:53,500 --> 00:01:55,585\n>> I was gonna say, yes, it's one\nof the more fun courses, isn't it?\n\n39\n00:01:55,585 --> 00:01:59,370\nOr episodes that we're gonna do because\nit goes over all the advanced stuff.\n\n40\n00:01:59,370 --> 00:02:02,870\nWe're past the whole, this is how you\ninstall server and stuff like that,\n\n41\n00:02:02,870 --> 00:02:05,750\ngood information but yeah,\nthis is where it gets fun.\n\n42\n00:02:05,750 --> 00:02:08,990\n>> Yeah, the identity and access solution\nis not necessarily my cup of tea but\n\n43\n00:02:08,990 --> 00:02:11,870\nthe whole rest of this one,\ntons of cool stuff.\n\n44\n00:02:11,870 --> 00:02:13,920\nSo we'll get to see some fun things and\n\n45\n00:02:13,920 --> 00:02:17,070\neven the topics that I don't like,\nthey are useful now.\n\n46\n00:02:17,070 --> 00:02:18,250\nWe'll get a chance to see those.\n\n47\n00:02:18,250 --> 00:02:19,510\nSo identity and access.\n\n48\n00:02:19,510 --> 00:02:23,350\nSo, definitely looking forward\nto jumping into this one.\n\n49\n00:02:23,350 --> 00:02:28,270\nWe're just going to start off right here\nat the top, which is configuring and\n\n50\n00:02:28,270 --> 00:02:29,830\nmanaging high availability.\n\n51\n00:02:29,830 --> 00:02:32,580\nSo, that is the ability for\n\n52\n00:02:32,580 --> 00:02:37,260\nus to make our servers stay online\neven during failure, right?\n\n53\n00:02:37,260 --> 00:02:39,360\nAnd that's a pretty cool\nthing when we can do it.\n\n54\n00:02:39,360 --> 00:02:41,100\n>> It is important thing for\na lot of these businesses.\n\n55\n00:02:41,100 --> 00:02:44,690\nWhen you're making big bucks per hour,\nper 15 minutes of that e-commerce\n\n56\n00:02:44,690 --> 00:02:48,440\nsite being up, if it goes down,\nyou're losing money.\n\n57\n00:02:48,440 --> 00:02:50,660\nSo we wanna be able to provide\nthat high availability.\n\n58\n00:02:50,660 --> 00:02:53,960\n>> Yeah, I read an article a few months\nago talking about Amazon.com, and\n\n59\n00:02:53,960 --> 00:02:59,120\nhow Amazon generates over $1\nmillion per hour on their website.\n\n60\n00:02:59,120 --> 00:03:00,040\n>> Wow.\n>> Yeah, it is pretty\n\n61\n00:03:00,040 --> 00:03:00,855\nimpressive, isn't it?\n\n62\n00:03:00,855 --> 00:03:02,320\n>> [LAUGH]\n>> So, now the article\n\n63\n00:03:02,320 --> 00:03:03,240\ndidn't say that was profit.\n\n64\n00:03:03,240 --> 00:03:05,421\n>> Right, yeah.\n>> So I guess it's like total sales or\n\n65\n00:03:05,421 --> 00:03:07,810\nwhatever of $1 million per hour.\n\n66\n00:03:07,810 --> 00:03:11,130\nSo if their website goes down,\nthey don't have a store front.\n\n67\n00:03:11,130 --> 00:03:14,380\nYou can't walk into the Amazon store\nin your neighborhood and buy things.\n\n68\n00:03:14,380 --> 00:03:15,020\n>> Right.\n>> So when they're down,\n\n69\n00:03:15,020 --> 00:03:18,460\nthey are literally losing\n$1 million per hour.\n\n70\n00:03:18,460 --> 00:03:19,740\n>> Yeah.\n>> That's a big deal.\n\n71\n00:03:19,740 --> 00:03:20,890\n>> That is huge.\n>> Right.\n\n72\n00:03:20,890 --> 00:03:25,510\nSo what are some of the things we can do\nto help make sure that even if a system\n\n73\n00:03:25,510 --> 00:03:27,520\nfails we stay online and\n\n74\n00:03:27,520 --> 00:03:31,240\neven better, how can we make it where\nthe end users don't even notice, right?\n\n75\n00:03:31,240 --> 00:03:34,180\n>> Yeah.\n>> And it might be unexpected failure,\n\n76\n00:03:34,180 --> 00:03:37,370\nwhich is what I normally think of but\nit might even be planned failure.\n\n77\n00:03:37,370 --> 00:03:37,980\n>> Right.\n>> Right?\n\n78\n00:03:37,980 --> 00:03:40,540\n>> Yeah.\n>> So, Windows Server 2012,\n\n79\n00:03:40,540 --> 00:03:42,260\nR2 Service Pack One.\n\n80\n00:03:42,260 --> 00:03:43,500\nService Pack One's not out yet, right?\n\n81\n00:03:43,500 --> 00:03:44,000\n>> Not yet.\n>> [LAUGH]\n\n82\n00:03:44,000 --> 00:03:47,310\n>> So, Service Pack One comes out.\n\n83\n00:03:47,310 --> 00:03:48,550\nYou want to apply it to the server.\n\n84\n00:03:48,550 --> 00:03:50,200\nRight.\nBut it requires a reboot.\n\n85\n00:03:50,200 --> 00:03:51,830\nRight.\nA reboot means downtime.\n\n86\n00:03:51,830 --> 00:03:54,020\n>> That means I'm losing\n$250,000 every 15 minutes.\n\n87\n00:03:55,130 --> 00:03:58,101\n>> Yeah, if you're Amazon,\nif you're us, it's not.\n\n88\n00:03:58,101 --> 00:04:00,020\n[CROSSTALK]\n>> [LAUGH]\n\n89\n00:04:00,020 --> 00:04:01,884\n>> [LAUGH] So how do we make our service\n\n90\n00:04:01,884 --> 00:04:04,420\nstay up just while we do that reboot,\nright?\n\n91\n00:04:04,420 --> 00:04:06,940\nAnd it goes back to the definition\nof high availability.\n\n92\n00:04:06,940 --> 00:04:10,430\nI'm gonna do something I\nhate to do on this show.\n\n93\n00:04:10,430 --> 00:04:11,950\n>> You're gonna pull up Wiki, aren't you?\n\n94\n00:04:11,950 --> 00:04:13,260\n>> I'm gonna pull up stinking Wikipedia.\n\n95\n00:04:13,260 --> 00:04:18,560\nSo high availability, don't pay attention\nto anything here on the Wikipedia page,\n\n96\n00:04:18,560 --> 00:04:20,010\nother than this little table.\n\n97\n00:04:20,010 --> 00:04:21,202\n>> They got a good chart.\n[CROSSTALK] >> Yep.\n\n98\n00:04:21,202 --> 00:04:24,750\nSo, their math is factually sound.\n\n99\n00:04:24,750 --> 00:04:28,250\nI can vouch for\nthe math that is done on this page and\n\n100\n00:04:28,250 --> 00:04:33,150\nwhat you see here is where they're\ndefining availability in terms of nines.\n\n101\n00:04:33,150 --> 00:04:35,330\n>> The nines.\n>> Yep, and I just.\n\n102\n00:04:35,330 --> 00:04:36,362\n>> Not German no.\n\n103\n00:04:36,362 --> 00:04:38,520\n[LAUGH]\n>> [LAUGH] Not German's declining us.\n\n104\n00:04:38,520 --> 00:04:43,080\nIt's just a simple definition that says,\nif your website, or service, or\n\n105\n00:04:43,080 --> 00:04:46,375\nwhatever it is up and\nfunctional then you're available.\n\n106\n00:04:46,375 --> 00:04:46,895\n>> Right.\n\n107\n00:04:46,895 --> 00:04:48,405\n>> If your site is down and\n\n108\n00:04:48,405 --> 00:04:53,605\ninaccessible, then it's unavailable and\nif you wanna be highly available,\n\n109\n00:04:53,605 --> 00:04:57,005\nyou gauge it by the amount of nines\nin the percentage that it's up.\n\n110\n00:04:57,005 --> 00:05:00,590\nSo if you have a 99% up time,\n\n111\n00:05:00,590 --> 00:05:06,150\nthat is two nines and if you work\nthat out over the course of a year,\n\n112\n00:05:06,150 --> 00:05:10,870\n99% up time means that you were\nup almost a whole year but\n\n113\n00:05:10,870 --> 00:05:17,065\nyou had the equivalent of 3.65 days\nthat you were unavailable, right?\n\n114\n00:05:17,065 --> 00:05:21,250\n7.2 hours per month or\n1.68 hours per week.\n\n115\n00:05:21,250 --> 00:05:25,680\nYou can actually be down an hour and\n\n116\n00:05:25,680 --> 00:05:29,039\na half per week and\nstill have a 99% up time.\n\n117\n00:05:29,039 --> 00:05:30,540\n>> I might be able to do\nthat with one server.\n\n118\n00:05:31,600 --> 00:05:32,250\nClose.\n>> Yeah,\n\n119\n00:05:32,250 --> 00:05:35,780\nif you think about routine reboots and\nstuff, if you didn't have anything crazy,\n\n120\n00:05:35,780 --> 00:05:41,450\nan hour and a half of downtime per week is\nvery achievable with one server, right?\n\n121\n00:05:41,450 --> 00:05:46,030\nIt may be a little tough if you have a\nsystem board failure or something, right?\n\n122\n00:05:46,030 --> 00:05:50,240\nTo get a new board in an hour and a half\nwould be pretty tough but 99% is pretty\n\n123\n00:05:50,240 --> 00:05:55,160\neasy to achieve and generally,\nthat is not considered high availability.\n\n124\n00:05:55,160 --> 00:05:55,800\n>> No.\n\n125\n00:05:55,800 --> 00:06:00,939\n>> High availability is generally\ndefined as five nines of up time, and\n\n126\n00:06:00,939 --> 00:06:05,901\nif we look down here and\nfind five nines that's 99.999% and\n\n127\n00:06:05,901 --> 00:06:10,328\nwe run that out for a year,\nthat is, look at that downtime,\n\n128\n00:06:10,328 --> 00:06:15,560\n5.5 minutes, or\nactually it's 5.25 minutes, right?\n\n129\n00:06:15,560 --> 00:06:18,320\n>> Yep.\n>> Let's just say five minutes of downtime\n\n130\n00:06:18,320 --> 00:06:20,270\nper year.\n\n131\n00:06:20,270 --> 00:06:21,010\n>> Yeah.\n\n132\n00:06:21,010 --> 00:06:22,240\nCan't do that with one server.\n\n133\n00:06:22,240 --> 00:06:22,780\nThere's no way.\n\n134\n00:06:22,780 --> 00:06:25,620\n>> Most servers, if you have a RAID\ncontroller with like 14 drives in it,\n\n135\n00:06:25,620 --> 00:06:26,844\nyou can't reboot in five minutes.\n\n136\n00:06:26,844 --> 00:06:29,090\n>> [LAUGH] Right.\n>> It's totally impossible, right?\n\n137\n00:06:29,090 --> 00:06:32,594\nIf you have all SSD and\na highly tuned system, then yeah,\n\n138\n00:06:32,594 --> 00:06:37,631\nyou could reboot a couple of times in five\nminutes but with your typical servers out\n\n139\n00:06:37,631 --> 00:06:42,910\nthere with copper attached scuzzy drives,\nthey can't reboot that in five minutes.\n\n140\n00:06:42,910 --> 00:06:43,985\n>> Yeah.\nThere's no way.\n\n141\n00:06:43,985 --> 00:06:46,780\nThey start looking at their week in\nthe month or six seconds a week.\n\n142\n00:06:46,780 --> 00:06:48,110\nSix seconds a week.\n\n143\n00:06:48,110 --> 00:06:52,280\n>> Even with SSD, you'd have a hard\ntime rebooting in six seconds.\n\n144\n00:06:52,280 --> 00:06:54,590\nOh, my face is coming that up.\n\n145\n00:06:54,590 --> 00:06:55,350\nSo six seconds.\n\n146\n00:06:55,350 --> 00:06:57,000\nThat's a tough-ee.\n\n147\n00:06:57,000 --> 00:07:02,560\nSo how do we achieve that if we can't even\nrun normal maintenance in that window,\n\n148\n00:07:02,560 --> 00:07:07,510\nhow can we possibly achieve\nfive nines of service, right?\n\n149\n00:07:07,510 --> 00:07:09,590\nYou know, 99.999%.\n\n150\n00:07:09,590 --> 00:07:11,690\nNow I've in five nine environments,\n\n151\n00:07:11,690 --> 00:07:15,951\nI've never worked in six or seven, I'm\nmean you look at these ridiculous numbers.\n\n152\n00:07:15,951 --> 00:07:18,210\n>> Yeah, 31 seconds a year.\n>> Yeah, it's impressive.\n\n153\n00:07:18,210 --> 00:07:20,020\nSo there are people who strive there,\n\n154\n00:07:20,020 --> 00:07:22,710\nthere's people who strive for\n100% up time.\n\n155\n00:07:22,710 --> 00:07:24,630\nIt sounds like it's impossible but\nit can be done.\n\n156\n00:07:24,630 --> 00:07:28,170\nThere are sites that have done it but\nmost organizations that are looking for\n\n157\n00:07:28,170 --> 00:07:30,110\nhigh availability are looking for this.\n\n158\n00:07:30,110 --> 00:07:33,020\nIf you tell your customers\nyou're gonna be down for\n\n159\n00:07:33,020 --> 00:07:36,710\nfive minutes, most of your customers\nare gonna be okay with that, right?\n\n160\n00:07:36,710 --> 00:07:41,020\nAnd if Amazon were down for five minutes\na year, that's not that big of a deal,\n\n161\n00:07:41,020 --> 00:07:44,730\nit's just five minutes but\nif they were down for three days,\n\n162\n00:07:44,730 --> 00:07:48,590\nI say they lost $1 million an hour,\nthat's almost $75 million.\n\n163\n00:07:48,590 --> 00:07:50,000\nThat's a lot of money.\n\n164\n00:07:50,000 --> 00:07:53,539\n>> So all this gets defined in your\nSLA with whoever that provider is, or\n\n165\n00:07:53,539 --> 00:07:56,163\nmaybe between your IT department and\nthe company,\n\n166\n00:07:56,163 --> 00:08:00,210\nand I have seen that some places will\nactually allow for maintenance Windows.\n\n167\n00:08:00,210 --> 00:08:03,050\nLike they won't include the menus\nwindow in your down time.\n\n168\n00:08:03,050 --> 00:08:06,250\nThey'll give you a little\nbit of slack there.\n\n169\n00:08:06,250 --> 00:08:07,740\n>> I worked at a bank.\n\n170\n00:08:07,740 --> 00:08:11,090\nAnd at the bank,\nwe had all sorts of regulations or\n\n171\n00:08:11,090 --> 00:08:13,370\nrequirements about how we\nhad to secure our data.\n\n172\n00:08:13,370 --> 00:08:15,510\nAnd so, I would talk to other\npeople in the IT field,\n\n173\n00:08:15,510 --> 00:08:18,230\nand they'd say man, it must be really\nfrustrating working at a bank cuz of all\n\n174\n00:08:18,230 --> 00:08:19,630\nthat stuff you had to deal with.\n\n175\n00:08:19,630 --> 00:08:21,590\n>> And I said, well, that stuff is tough.\n\n176\n00:08:21,590 --> 00:08:23,730\nIt doesn't make you have to\nthink about other things.\n\n177\n00:08:23,730 --> 00:08:29,190\nBut the trade off is we didn't handle\nfinancial transactions after 4 PM.\n\n178\n00:08:29,190 --> 00:08:32,060\nAnd banks are closed on Saturdays and\nSundays.\n\n179\n00:08:32,060 --> 00:08:35,230\nI said I've got built in\ndown time every single week.\n\n180\n00:08:35,230 --> 00:08:39,580\nIf I want to reboot a server, every Sunday\nof the year, I can reboot the servers.\n\n181\n00:08:39,580 --> 00:08:43,290\nAnd if I take a financial\ntransaction processing offline,\n\n182\n00:08:43,290 --> 00:08:46,940\nas long as it's after 4 PM,\nthat's when all the finance is posted.\n\n183\n00:08:46,940 --> 00:08:49,950\nWe were fine until 8 AM when\nthe markets opened again.\n\n184\n00:08:49,950 --> 00:08:52,070\nSo you had this built in\ndown time every single day.\n\n185\n00:08:52,070 --> 00:08:57,180\nI said I'll take all that regulation any\nday, because I get this planned downtime.\n\n186\n00:08:57,180 --> 00:08:58,070\n>> Yes, absolutely.\n\n187\n00:08:58,070 --> 00:09:01,950\n>> But I've worked for other companies\nwhere we didn't have that benefit.\n\n188\n00:09:01,950 --> 00:09:04,390\nEspecially in military contracts.\n\n189\n00:09:04,390 --> 00:09:08,420\nThere's always somebody\nworking in the military.\n\n190\n00:09:08,420 --> 00:09:11,370\nSo, your environment may be different.\n\n191\n00:09:11,370 --> 00:09:17,160\nNow, how can we possibly achieve these\nup times when they seem impossible?\n\n192\n00:09:17,160 --> 00:09:17,830\n>> Seems crazy.\n\n193\n00:09:17,830 --> 00:09:21,450\nI don't see how we can do it.\n\n194\n00:09:21,450 --> 00:09:21,950\n>> Yep.\n>> [LAUGH]\n\n195\n00:09:21,950 --> 00:09:22,840\n>> Now we're doing the telemarketing,\n\n196\n00:09:22,840 --> 00:09:23,424\nnot the telemarketing,\n\n197\n00:09:23,424 --> 00:09:24,150\nthe infomercial setup.\n>> Yeah,\n\n198\n00:09:24,150 --> 00:09:24,920\nthat's right.\n>> Mike,\n\n199\n00:09:24,920 --> 00:09:26,690\nhow can be possibly set this up?\n>> [LAUGH]\n\n200\n00:09:26,690 --> 00:09:27,411\n>> Then why not.\n\n201\n00:09:27,411 --> 00:09:31,420\nThen we offer a solution, but\nif you order today, you get two of them.\n\n202\n00:09:31,420 --> 00:09:34,117\n>> But wait, there's more,\nbecause if you hear.\n\n203\n00:09:34,117 --> 00:09:35,980\n>> [LAUGH] Operators are standing by.\n\n204\n00:09:35,980 --> 00:09:37,430\n>> We do have a couple of\nsolutions we can do, right?\n\n205\n00:09:37,430 --> 00:09:42,030\nWe can do network load balancing is\na relatively inexpensive way to go, and\n\n206\n00:09:42,030 --> 00:09:43,950\nprovide some good up time with that.\n\n207\n00:09:43,950 --> 00:09:46,500\nWhich I think is probably where we'll\nstart, and we'll get into another one\n\n208\n00:09:46,500 --> 00:09:52,540\ncalled failover clustering, where we can\ndo some really nice fall times with that.\n\n209\n00:09:52,540 --> 00:09:55,460\n>> So on the exam objectives,\nthey actually call out three solutions.\n\n210\n00:09:55,460 --> 00:09:57,050\nAnd we're gonna start with\nnetwork load balancing,\n\n211\n00:09:57,050 --> 00:09:58,800\nwe'll do that one in this episode.\n\n212\n00:09:58,800 --> 00:10:01,990\nWe'll do failover clustering\nin our next episode, and\n\n213\n00:10:01,990 --> 00:10:05,080\nwe may or may not get to VM movement.\n\n214\n00:10:05,080 --> 00:10:09,740\nI almost said VMotion, which is\nthe VMware name, which is a copyright.\n\n215\n00:10:09,740 --> 00:10:13,600\nBut VM Movement,\nas Microsoft calls it, which makes me\n\n216\n00:10:13,600 --> 00:10:16,980\nthink of intestinal movement, but that's\na different story altogether, but anyhow-\n\n217\n00:10:16,980 --> 00:10:18,940\n>> We are talking about load balancing.\n\n218\n00:10:18,940 --> 00:10:19,890\n[LAUGH]\n>> [LAUGH] There you go.\n\n219\n00:10:20,930 --> 00:10:22,670\nYou're in your movements.\n\n220\n00:10:22,670 --> 00:10:24,800\nSo anyhow, so\nwe've got these other solutions.\n\n221\n00:10:24,800 --> 00:10:32,730\nI'll tell you NLB is the easiest, fastest\nand least expensive of the solutions.\n\n222\n00:10:32,730 --> 00:10:34,070\nAnybody can do NLB.\n\n223\n00:10:34,070 --> 00:10:35,530\nIt's really cool.\n\n224\n00:10:35,530 --> 00:10:38,610\nIt's a great solution, and a lot of\npeople don't even know it's there and\n\n225\n00:10:38,610 --> 00:10:41,080\nthey overlook it, but it's a part\nof the Windows operating system.\n\n226\n00:10:41,080 --> 00:10:41,580\n>> Built right in.\n\n227\n00:10:41,580 --> 00:10:44,370\n>> So we're gonna tackle\nthat one in this episode.\n\n228\n00:10:44,370 --> 00:10:47,520\nFailover clustering is the one\nthat most people think of.\n\n229\n00:10:47,520 --> 00:10:51,350\nWhen they think of how do I get high\navailability, clusters are how you do it.\n\n230\n00:10:51,350 --> 00:10:54,570\nClusters are complex, they're a little\ndifficult and tricky to set up.\n\n231\n00:10:54,570 --> 00:10:56,290\nYou'll see the wizards are pretty easy but\n\n232\n00:10:56,290 --> 00:10:58,860\nthe amount of thought that\ngoes into them is hard.\n\n233\n00:10:58,860 --> 00:11:02,040\nAnd they're expensive, because there's\ncertain hardware requirements that we have\n\n234\n00:11:02,040 --> 00:11:03,700\nto meet to be able to run them.\n\n235\n00:11:03,700 --> 00:11:06,660\nSo clustering is not a great solution for\neveryone.\n\n236\n00:11:06,660 --> 00:11:09,820\nThere's times where NLB is appropriate,\nthere's times where clustering is\n\n237\n00:11:09,820 --> 00:11:12,370\nappropriate, and\nwe need to know the difference.\n\n238\n00:11:12,370 --> 00:11:16,500\nAnd then, we can do virtual\nmachines on top of a cluster.\n\n239\n00:11:16,500 --> 00:11:17,730\nThat's when things get really cool.\n\n240\n00:11:17,730 --> 00:11:18,420\n>> I know, right?\n\n241\n00:11:18,420 --> 00:11:21,360\n>> Cuz then you can move your virtual\nmachines from physical box to physical\n\n242\n00:11:21,360 --> 00:11:26,280\nbox, and if a physical box fails the VM\njust jumps over to another host.\n\n243\n00:11:26,280 --> 00:11:28,860\nSo you get some real flexibility there.\n\n244\n00:11:28,860 --> 00:11:32,460\nSo it's really building\non top of clustering.\n\n245\n00:11:32,460 --> 00:11:34,310\nSo those are the three options.\n\n246\n00:11:34,310 --> 00:11:37,720\nWe're gonna start with\nnetwork load balancing, NLB.\n\n247\n00:11:37,720 --> 00:11:40,190\nSo what is NLB?\n\n248\n00:11:40,190 --> 00:11:42,150\nWell, first off, it's not a new feature.\n\n249\n00:11:42,150 --> 00:11:46,180\nNLB was introduced by Microsoft in Windows\n2000, so it's actually been around for\n\n250\n00:11:46,180 --> 00:11:47,450\n14 years now.\n\n251\n00:11:47,450 --> 00:11:50,000\nAnd it works on a really simple idea,\n\n252\n00:11:50,000 --> 00:11:54,490\nwhich is, why have one server doing\nyour work when you can have two?\n\n253\n00:11:54,490 --> 00:11:55,050\n>> Right.\n\n254\n00:11:55,050 --> 00:11:55,610\n>> Or ten?\n\n255\n00:11:55,610 --> 00:11:57,110\n>> Or ten?\n>> Or twenty, right?\n\n256\n00:11:57,110 --> 00:11:59,340\nThere is a maximum, isn't there?\n\n257\n00:11:59,340 --> 00:12:00,420\n>> 32 now, with 2012 R2, yep.\n\n258\n00:12:00,420 --> 00:12:02,880\n>> So there is a maximum amount\nof servers we can get involved.\n\n259\n00:12:02,880 --> 00:12:05,650\nBut, what it does is,\ninstead of having one server do it,\n\n260\n00:12:05,650 --> 00:12:07,590\nlet's get all these guys doing it.\n\n261\n00:12:07,590 --> 00:12:11,330\nAnd that way if one server fails,\neither unexpected, or if we fail it on\n\n262\n00:12:11,330 --> 00:12:14,660\npurpose and want to reboot it for\nWindows updates, that we can do that.\n\n263\n00:12:14,660 --> 00:12:17,740\nWe can take it offline and\nthe other servers pick up the slack.\n\n264\n00:12:17,740 --> 00:12:18,310\n>> Right.\n\n265\n00:12:18,310 --> 00:12:21,430\n>> Right.\nLets talk about how a normal\n\n266\n00:12:21,430 --> 00:12:22,745\nsmall website might work.\n\n267\n00:12:22,745 --> 00:12:28,300\nLets say I have a website,\nwww.superwebsite.com.\n\n268\n00:12:28,300 --> 00:12:30,500\nI'm sure that is an actual website.\n\n269\n00:12:30,500 --> 00:12:31,440\n>> It probably is.\n\n270\n00:12:31,440 --> 00:12:33,710\n>> I've never been to it and\nI'm tempted to pull it up now but\n\n271\n00:12:33,710 --> 00:12:34,730\nit'll end up being porn.\n\n272\n00:12:34,730 --> 00:12:35,270\n>> Yeah.\n\n273\n00:12:35,270 --> 00:12:35,880\nNot on screen.\n\n274\n00:12:35,880 --> 00:12:36,902\nHere, I'll do it off to the side.\n\n275\n00:12:36,902 --> 00:12:40,138\n[LAUGH]\n>> So lets say that we have this website,\n\n276\n00:12:40,138 --> 00:12:41,641\nsuperwebsite.com.\n\n277\n00:12:41,641 --> 00:12:45,560\nAnd normally what we do\nis we create a DNS entry.\n\n278\n00:12:45,560 --> 00:12:50,930\nAnd the DNS entry says, this domain\nname resolves to this IP address.\n\n279\n00:12:50,930 --> 00:12:52,180\nSo for me 10.1.230.238.\n\n280\n00:12:52,180 --> 00:12:56,610\nSo our laptops out here,\n\n281\n00:12:56,610 --> 00:13:01,070\nour users out on the Internet, they do\na DNS look up, they get this IP, and\n\n282\n00:13:01,070 --> 00:13:04,950\nthey go and they connect to that server.\n\n283\n00:13:04,950 --> 00:13:09,700\nSo, basically, they'd all be\nreaching out to this guy right here.\n\n284\n00:13:09,700 --> 00:13:12,946\nAll browsing to that website,\nand seeing the content.\n\n285\n00:13:12,946 --> 00:13:18,710\nNow, that's fine and good on a normal day,\nserver's running great, life is good.\n\n286\n00:13:18,710 --> 00:13:19,810\n>> Yep, everybody's happy.\n\n287\n00:13:19,810 --> 00:13:24,150\n>> Okay, but\nthere's really two scenarios here.\n\n288\n00:13:24,150 --> 00:13:27,300\nWhat happens if server one fails?\n\n289\n00:13:27,300 --> 00:13:28,060\nIf it goes offline.\n\n290\n00:13:28,060 --> 00:13:31,180\nIf I just need to reboot\nit to apply a service pack.\n\n291\n00:13:32,370 --> 00:13:33,940\n>> Website is unavailable.\n\n292\n00:13:33,940 --> 00:13:34,710\n>> During that time, yeah.\n\n293\n00:13:34,710 --> 00:13:36,070\nNobody's getting to that website.\n\n294\n00:13:36,070 --> 00:13:38,360\nEverybody is considered offline.\n\n295\n00:13:38,360 --> 00:13:40,760\nThey don't even get a 404,\n\n296\n00:13:40,760 --> 00:13:43,700\nthey get a server unreachable\nerror which is not very good.\n\n297\n00:13:43,700 --> 00:13:44,530\n>> Nope.\n\n298\n00:13:44,530 --> 00:13:46,850\n>> So, what's our solution?\n\n299\n00:13:46,850 --> 00:13:48,290\nWell the old solution was,\n\n300\n00:13:48,290 --> 00:13:52,490\nif you know you're gonna be rebooting that\nserver, you can build up a second server.\n\n301\n00:13:52,490 --> 00:13:56,570\nHave an entire copy of\nyour website on there.\n\n302\n00:13:56,570 --> 00:14:00,770\nAnd then, when you know you need\nto reboot one, you could go and\n\n303\n00:14:00,770 --> 00:14:04,970\njust modify the IP address\nof that DNS entry.\n\n304\n00:14:04,970 --> 00:14:08,800\nAnd now when people start to do lookups\nagainst DNS, instead of going to this\n\n305\n00:14:08,800 --> 00:14:11,149\nfirst server, they'll start going\nover here to this other server.\n\n306\n00:14:12,240 --> 00:14:15,610\n>> Mm, sounds like a very manual,\ntedious process.\n\n307\n00:14:15,610 --> 00:14:18,200\nI'm thinking about caching\nthat's going on in there.\n\n308\n00:14:18,200 --> 00:14:21,520\n>> Great point right, and that's,\ncaching is probably you're biggest enemy.\n\n309\n00:14:21,520 --> 00:14:23,670\n>> Yeah.\n>> Because when people do DNS lookups,\n\n310\n00:14:23,670 --> 00:14:26,180\nthey don't just do a lookup and forget it.\n\n311\n00:14:26,180 --> 00:14:27,490\nThey do a lookup and they hold it.\n\n312\n00:14:27,490 --> 00:14:31,040\nAnd the servers can hold it 60 minutes,\neight hours.\n\n313\n00:14:31,040 --> 00:14:34,530\nWhen you make a change on a DNS server,\nlike a public-facing DNS server,\n\n314\n00:14:34,530 --> 00:14:37,780\nyou'll normally see a message saying,\nplease allow 24 to 48 hours for\n\n315\n00:14:37,780 --> 00:14:40,010\nthis change to take effect.\n\n316\n00:14:40,010 --> 00:14:43,920\nIt could take two days for\nmachines to update their cache.\n\n317\n00:14:43,920 --> 00:14:46,530\n>> I think that first server is gonna\nreboot by then before the cache ever\n\n318\n00:14:46,530 --> 00:14:47,600\ngets finished.\n\n319\n00:14:47,600 --> 00:14:51,120\n>> So using this model, if I wanted to\nbe safe, I'd say, okay, you know what?\n\n320\n00:14:51,120 --> 00:14:54,210\nI wanna apply Service Pack 2 to this\nmachine and I want to do it on Saturday.\n\n321\n00:14:54,210 --> 00:14:59,300\nSo on Wednesday, I'll go ahead and\nput my DNS change in.\n\n322\n00:14:59,300 --> 00:15:02,150\nAnd then, Thursday and\nFriday people's cache clear.\n\n323\n00:15:02,150 --> 00:15:03,970\nBy the time Saturday rolls around,\n\n324\n00:15:03,970 --> 00:15:07,840\neverybody should now be\nconnecting to the other server.\n\n325\n00:15:07,840 --> 00:15:09,770\nThey should all be\nconnecting over here and\n\n326\n00:15:09,770 --> 00:15:12,544\ngetting, well that's not\nquite what I wanted.\n\n327\n00:15:12,544 --> 00:15:13,540\n[LAUGH] Anyhow,\n\n328\n00:15:13,540 --> 00:15:17,810\ngetting connected to this other server,\nand things are running great.\n\n329\n00:15:17,810 --> 00:15:21,780\nSo then I install Service Pack 2, and\nI reboot the server cuz nobody's on it.\n\n330\n00:15:21,780 --> 00:15:24,460\nAnd when I'm done I wanna put people back,\nso I go and\n\n331\n00:15:24,460 --> 00:15:28,340\nI modify DNS to point back to 238,\nand what happens there?\n\n332\n00:15:28,340 --> 00:15:32,660\nNow I gotta wait 24 to 48 hours for\npeople to move back to server one.\n\n333\n00:15:32,660 --> 00:15:40,340\nThat might be okay if it was a planned\noutage, but what if it was unexpected?\n\n334\n00:15:40,340 --> 00:15:44,170\nIf it was unexpected and I go and\nchange DNS, it could take awhile.\n\n335\n00:15:44,170 --> 00:15:46,210\nPeople could be getting the site's\ndown for up to two days,\n\n336\n00:15:46,210 --> 00:15:48,130\nthat would be a problem.\n\n337\n00:15:48,130 --> 00:15:52,710\nI could take this IP address and\nattach the IP address here.\n\n338\n00:15:52,710 --> 00:15:57,170\nAnd so now this server becomes 238,\nbut that gives me a problem.\n\n339\n00:15:57,170 --> 00:16:00,500\nBecause I now I can't bring this server\nonline, cuz it had duplicate IPs.\n\n340\n00:16:00,500 --> 00:16:03,960\nSo that would only work in a failure\nscenario where this one was actually off-\n\n341\n00:16:03,960 --> 00:16:05,300\n>> It wasn't coming back, yeah.\n\n342\n00:16:05,300 --> 00:16:05,960\n>> All right.\n\n343\n00:16:05,960 --> 00:16:07,910\nAnd it does lead to the secondary problem.\n\n344\n00:16:07,910 --> 00:16:09,300\nCache is an issue.\n\n345\n00:16:09,300 --> 00:16:12,610\nBut the other thing is, what about users\nthat are currently logged into the system?\n\n346\n00:16:12,610 --> 00:16:15,570\n>> Right.\n>> What if I'm already logged in to 238?\n\n347\n00:16:15,570 --> 00:16:17,430\nAnd now,\nDNS changes over to the other one.\n\n348\n00:16:17,430 --> 00:16:20,140\nWell, I still have my active session here.\n\n349\n00:16:20,140 --> 00:16:23,190\nWhen we flip to the other server,\nit's an all new session.\n\n350\n00:16:23,190 --> 00:16:23,800\nI lose what I was doing.\n\n351\n00:16:23,800 --> 00:16:25,100\nYou know.\n>> Anything you might have had in your\n\n352\n00:16:25,100 --> 00:16:27,510\ncart or file you're working on,\nanything like that.\n\n353\n00:16:27,510 --> 00:16:29,770\n>> Yup.\nSo either of those scenarios,\n\n354\n00:16:29,770 --> 00:16:33,760\nreally it's not very smooth and\nit's not a very reliable solution.\n\n355\n00:16:33,760 --> 00:16:35,780\nAnd it really only works\nwith up to two servers.\n\n356\n00:16:35,780 --> 00:16:36,930\nWhat if you need more?\n\n357\n00:16:36,930 --> 00:16:37,530\n>> Right.\n\n358\n00:16:37,530 --> 00:16:38,832\n>> What if, we're not talking about\n\n359\n00:16:38,832 --> 00:16:39,870\nfailures now\n>> Now.\n\n360\n00:16:39,870 --> 00:16:42,360\nWhat if we're just talking about\none server getting overwhelmed.\n\n361\n00:16:42,360 --> 00:16:44,585\n>> Just can't handle all the clients\nthat are connecting to it?\n\n362\n00:16:44,585 --> 00:16:50,173\n>> In the server world we have what's\ncalled scaling-up and scaling-out.\n\n363\n00:16:50,173 --> 00:16:52,710\nOkay?\nScaling-up is what most people think of\n\n364\n00:16:52,710 --> 00:16:54,560\nwhen we talk about upgrading your system.\n\n365\n00:16:54,560 --> 00:16:58,110\nIf I have a server, and\nit's running slow, what can I do?\n\n366\n00:16:58,110 --> 00:16:59,840\nI can-\n>> Go buy some more processors,\n\n367\n00:16:59,840 --> 00:17:00,580\nsome more RAM.\n\n368\n00:17:00,580 --> 00:17:01,940\nTry to make it faster.\n\n369\n00:17:01,940 --> 00:17:04,230\n>> But\nthere's a ceiling you hit eventually.\n\n370\n00:17:04,230 --> 00:17:05,833\nIf you go on New Egg or\n\n371\n00:17:05,833 --> 00:17:11,310\nwhatever companies you buy electronics\nfrom and you go and spec out a server.\n\n372\n00:17:11,310 --> 00:17:12,990\nYou'll find that there's a ceiling,\n\n373\n00:17:12,990 --> 00:17:17,690\na maximum amount of CPUs you can get,\na maximum around of RAM that you can get,\n\n374\n00:17:17,690 --> 00:17:21,500\na maximum amount of Hard Drive space\nthat you can get in that one box.\n\n375\n00:17:21,500 --> 00:17:26,390\nYou're scaling up, and\nthere's always a limit when you scale up.\n\n376\n00:17:26,390 --> 00:17:28,390\nAll right,\nI don't know what that limit is right now,\n\n377\n00:17:28,390 --> 00:17:30,930\nI think\n>> Oh gosh.\n\n378\n00:17:30,930 --> 00:17:33,660\n>> for regular consumer stuff\nit's probably like 16 CPUs and\n\n379\n00:17:33,660 --> 00:17:34,990\n>> Yeah, something like that.\n\n380\n00:17:36,060 --> 00:17:39,570\n>> probably somewhere in the neighborhood\nof like 256 gigs of RAM.\n\n381\n00:17:41,100 --> 00:17:45,330\nYou guys will see a lot of times where\nWindows says supports up to 256 CPUs and\n\n382\n00:17:45,330 --> 00:17:49,450\nsupports up to four exabytes of memory or\nwhatever.\n\n383\n00:17:49,450 --> 00:17:51,070\nYou'll see notes like that, right?\n\n384\n00:17:51,070 --> 00:17:52,910\nAnd that means that yes, it is possible,\n\n385\n00:17:52,910 --> 00:17:55,480\nWindows is set up to be able\nto address that much memory.\n\n386\n00:17:55,480 --> 00:17:58,920\nBut when you go to the store you'll find\nthat nobody sells that much memory yet.\n\n387\n00:17:58,920 --> 00:18:00,940\n>> Right.\n>> Microsoft does build support in for\n\n388\n00:18:00,940 --> 00:18:03,020\nhardware that doesn't exist yet.\n\n389\n00:18:03,020 --> 00:18:06,631\nSo when you actually go to the store\nit's a different world out there.\n\n390\n00:18:06,631 --> 00:18:07,920\nRight?\nSo let's go to Dell.\n\n391\n00:18:07,920 --> 00:18:12,340\nI'm going to spec out a Dell server and\njust ratchet it up as high as I can.\n\n392\n00:18:12,340 --> 00:18:15,880\nAnd we'll see the limit for scaling up.\n\n393\n00:18:15,880 --> 00:18:17,330\nSo as my server gets bigger.\n\n394\n00:18:17,330 --> 00:18:20,760\nBusier and busier and\nbusier as people keep hitting.\n\n395\n00:18:20,760 --> 00:18:24,280\nMaybe I launch a website and\nsomebody posts a link on Reddit and\n\n396\n00:18:24,280 --> 00:18:27,840\nit just goes through the roof and\nmy server is getting slammed.\n\n397\n00:18:27,840 --> 00:18:29,670\nSo I say all right I\nneed to buy a new server.\n\n398\n00:18:29,670 --> 00:18:31,250\nI need to get the best one that I can get.\n\n399\n00:18:31,250 --> 00:18:35,244\nLet's just go in here and\nwe'll pick out a server, and\n\n400\n00:18:35,244 --> 00:18:39,940\nrack server, we should do a tower server.\n\n401\n00:18:39,940 --> 00:18:41,570\nEntry level is not good enough for me.\n\n402\n00:18:41,570 --> 00:18:43,010\nAdvanced Premium.\n\n403\n00:18:43,010 --> 00:18:44,760\nThis is the problem with\nhaving a confusing website,\n\n404\n00:18:44,760 --> 00:18:46,020\nyou don't know which one you want.\n\n405\n00:18:46,020 --> 00:18:46,550\n>> I know right.\n\n406\n00:18:46,550 --> 00:18:47,930\n>> Let's just go advanced.\n\n407\n00:18:47,930 --> 00:18:48,700\nI'm an advanced user.\n\n408\n00:18:50,010 --> 00:18:51,480\nAll right, so here's my advanced one.\n\n409\n00:18:51,480 --> 00:18:53,270\nI got a couple of starting points here.\n\n410\n00:18:53,270 --> 00:18:55,460\nLet's just go with a more expensive one,\n4000.\n\n411\n00:18:55,460 --> 00:18:56,981\n>> More money's got to be better.\n\n412\n00:18:56,981 --> 00:18:58,276\n>> [LAUGH] It's got to be, right?\n\n413\n00:18:58,276 --> 00:18:58,874\n>> It's got to be.\n\n414\n00:18:58,874 --> 00:19:01,015\n>> Probably just has flashing faceplate or\nsomething.\n\n415\n00:19:01,015 --> 00:19:03,430\n>> [LAUGH]\n>> All right, so if I go in here.\n\n416\n00:19:03,430 --> 00:19:08,330\n>> That's already got me capped right\nhere with, well that's pretty lame.\n\n417\n00:19:08,330 --> 00:19:09,760\n>> And then you have 16 gigs of RAM.\n\n418\n00:19:09,760 --> 00:19:10,760\nWait, go down a little further.\n\n419\n00:19:10,760 --> 00:19:12,380\nI see another processor.\n\n420\n00:19:12,380 --> 00:19:13,490\n>> Oh there we go, okay.\n\n421\n00:19:13,490 --> 00:19:14,700\nAll right, so we can bump up.\n\n422\n00:19:14,700 --> 00:19:18,615\nIt looks our processor right\nnow is A 4 dash 6 core.\n\n423\n00:19:18,615 --> 00:19:20,305\nWhat does that even mean?\n\n424\n00:19:20,305 --> 00:19:21,245\n>> I don't know.\n\n425\n00:19:21,245 --> 00:19:22,185\n>> Is it 4 or is it 6?\n\n426\n00:19:22,185 --> 00:19:23,345\n>> 4 to 6, maybe?\n\n427\n00:19:23,345 --> 00:19:24,325\n>> Oh, I see, there's both.\n\n428\n00:19:24,325 --> 00:19:26,105\nThis is a 6 core,\nthis is a 4, this is a 6.\n\n429\n00:19:26,105 --> 00:19:27,755\n>> Okay, I gotcha.\n>> I'm going to go way down here.\n\n430\n00:19:27,755 --> 00:19:28,805\nWe want a 12 core.\n\n431\n00:19:28,805 --> 00:19:30,380\n>> 12, here we go.\n>> So here's a 12 core.\n\n432\n00:19:30,380 --> 00:19:34,890\nWe'll just with the best one,\nthis guy right here.\n\n433\n00:19:34,890 --> 00:19:36,670\nHe's mad, oh,\nI'm exceeding my power requirements.\n\n434\n00:19:36,670 --> 00:19:37,610\n>> Yeah, we have to up that too.\n\n435\n00:19:37,610 --> 00:19:39,640\n>> So here is my additional processor.\n\n436\n00:19:39,640 --> 00:19:42,150\nSo I'll have two twelve core processors,\ntwenty four cores.\n\n437\n00:19:42,150 --> 00:19:44,850\nThat's pretty much where I'm\ntapping out on this one.\n\n438\n00:19:44,850 --> 00:19:46,150\nOn the RAM side,\n\n439\n00:19:46,150 --> 00:19:51,820\nlooks like they've got where I can\npick the speeds but not the quantity?\n\n440\n00:19:51,820 --> 00:19:53,695\nBoy, Dell's website is,\nor there it is okay.\n\n441\n00:19:53,695 --> 00:19:55,700\n>> [LAUGH]\n>> Not the easiest to use is it?\n\n442\n00:19:55,700 --> 00:19:56,602\n>> No it's not.\n\n443\n00:19:56,602 --> 00:19:58,650\n>> All right, so we'll come down here and\n\n444\n00:19:58,650 --> 00:20:01,500\nI'm going to I guess we'll go\nperformance optimize for now.\n\n445\n00:20:01,500 --> 00:20:03,160\nI'm not really worried about redundancy.\n\n446\n00:20:03,160 --> 00:20:06,580\nAnd, what's the highest amount of\nmemory it's going to let me go here?\n\n447\n00:20:06,580 --> 00:20:10,390\nSo, we'll switch to 8 gig sticks\n\n448\n00:20:13,250 --> 00:20:18,680\nand let's see,\nit's says; the maximum dim count is 24.\n\n449\n00:20:18,680 --> 00:20:24,860\nSo if I go with 24 eight gig sticks,\nit's happy with that.\n\n450\n00:20:24,860 --> 00:20:26,750\nSo what is 24 times eight, Mike?\n\n451\n00:20:26,750 --> 00:20:29,470\nThis is beyond my simple\nmathematical abilities.\n\n452\n00:20:29,470 --> 00:20:30,230\n>> What's that.\n\n453\n00:20:30,230 --> 00:20:33,600\n96 and 96, so it's 180, 192?\n\n454\n00:20:33,600 --> 00:20:34,480\n>> That sounds good.\n\n455\n00:20:34,480 --> 00:20:38,590\n>> Close\n>> All right, you failed me Mike.\n\n456\n00:20:38,590 --> 00:20:39,350\nSo 8 times 24.\n\n457\n00:20:39,350 --> 00:20:43,130\nSee this is why you get me using a Mac.\n\n458\n00:20:45,460 --> 00:20:46,890\nThere we go.\nHey you were right,\n\n459\n00:20:46,890 --> 00:20:49,090\ncongratulations, you have basic education.\n\n460\n00:20:49,090 --> 00:20:54,650\n>> Florida education has paid off again\n>> So 192 gigabytes of RAM.\n\n461\n00:20:54,650 --> 00:20:56,460\nI know that Windows supports more.\n\n462\n00:20:56,460 --> 00:20:58,660\nI know that Windows can go into\nthe petabyte range, right,\n\n463\n00:20:58,660 --> 00:21:03,270\nfor RAM, but that doesn't help me\nif the stores wont sell it to me.\n\n464\n00:21:03,270 --> 00:21:05,390\n>> Exactly.\n>> If the hardware isn't there, and\n\n465\n00:21:05,390 --> 00:21:08,120\nit's all ready really getting expensive,\nright?\n\n466\n00:21:08,120 --> 00:21:11,340\nSo 24 of these eight gig sticks,\nthey're running me 169 a piece.\n\n467\n00:21:11,340 --> 00:21:16,670\nThat doesn't seem so bad, but\nI'm getting a lot of them, right?\n\n468\n00:21:16,670 --> 00:21:17,300\nYeah.\n>> And then,\n\n469\n00:21:17,300 --> 00:21:20,140\nI guess we need to resolve this power\nissue here to find out where we're gonna\n\n470\n00:21:20,140 --> 00:21:20,660\ncap that at.\n\n471\n00:21:20,660 --> 00:21:25,990\nBut at this point,\nwe do understand what we're dealing with,\n\n472\n00:21:25,990 --> 00:21:29,160\nas far as maximum memory and processor.\n\n473\n00:21:29,160 --> 00:21:34,630\nSo, 24, we got two 12 core processors,\nso 24 cores.\n\n474\n00:21:34,630 --> 00:21:36,660\nAnd what was it?\n\n475\n00:21:36,660 --> 00:21:37,840\n192 gigs of RAM.\n\n476\n00:21:37,840 --> 00:21:38,500\n>> 192 Gigs.\nYup.\n\n477\n00:21:38,500 --> 00:21:41,370\n>> So if I scale up,\nthat's my upper ceiling.\n\n478\n00:21:41,370 --> 00:21:42,720\nAt least for this server, right?\n\n479\n00:21:42,720 --> 00:21:46,450\nIf I go to HP or Lenovo or wherever,\nI might be able to get a different server.\n\n480\n00:21:46,450 --> 00:21:48,990\nBut for this off the shelf server\nright here that's kind of where I'm\n\n481\n00:21:48,990 --> 00:21:49,780\ncapping out at.\n\n482\n00:21:49,780 --> 00:21:54,105\nAnd 11,000 there's definitely\nsomething better out there.\n\n483\n00:21:54,105 --> 00:21:58,100\n[LAUGH] Anyhow, because you can get\nreally expensive on servers if you want.\n\n484\n00:21:58,100 --> 00:22:00,690\nSo anyhow that's the limit\nwith scaling up.\n\n485\n00:22:00,690 --> 00:22:02,860\nYou can only take a server so far, right?\n\n486\n00:22:02,860 --> 00:22:06,890\nbefore you reach the limits of what\nyou can do, as far as upgrading it.\n\n487\n00:22:06,890 --> 00:22:08,210\nThat's scaling up.\n\n488\n00:22:08,210 --> 00:22:10,440\nThe alternative is to scale out.\n\n489\n00:22:10,440 --> 00:22:11,440\n>> Right.\n>> Instead of\n\n490\n00:22:11,440 --> 00:22:15,360\nbumping a ton of money into one machine,\nadd a second machine.\n\n491\n00:22:15,360 --> 00:22:16,080\nAdd a third machine.\n\n492\n00:22:16,080 --> 00:22:17,530\nAdd a forth machine.\n\n493\n00:22:17,530 --> 00:22:18,835\nYou don't have a limit here.\n\n494\n00:22:18,835 --> 00:22:21,910\nRight?\nI might only be able to get 192 gig\n\n495\n00:22:21,910 --> 00:22:24,590\nof ram into one machine but\nif I get five of them.\n\n496\n00:22:24,590 --> 00:22:26,020\n>> Right.\n>> You know, now,\n\n497\n00:22:26,020 --> 00:22:29,040\nI'm over a terabyte of ram,\nspread across the five machines.\n\n498\n00:22:29,040 --> 00:22:32,440\nSo, you can really start to\nbenefit there by scaling out.\n\n499\n00:22:32,440 --> 00:22:35,470\n>> And if there was just some way we\ncan spread the work load across all\n\n500\n00:22:35,470 --> 00:22:36,850\nfive of those at the same time.\n\n501\n00:22:36,850 --> 00:22:37,670\n>> There we go.\n\n502\n00:22:37,670 --> 00:22:38,200\n>> What?\n\n503\n00:22:38,200 --> 00:22:39,940\n>> And that's our problem, right?\n\n504\n00:22:39,940 --> 00:22:43,090\nThe problem is when somebody does\na DNS lookup, they get one IP address.\n\n505\n00:22:43,090 --> 00:22:47,670\nAnd the IP address points to one\nserver and they connect to that one.\n\n506\n00:22:47,670 --> 00:22:52,400\nNow in, was it the 7410 show that\nwe talked about DNS round robin?\n\n507\n00:22:52,400 --> 00:22:53,710\n>> Yes.\n>> Okay.\n\n508\n00:22:53,710 --> 00:22:58,770\nSo in DNS you can put more than one\nIP address on a domain name and\n\n509\n00:22:58,770 --> 00:23:03,830\nIt will round robin them, so every other\nuser will get a different IP address.\n\n510\n00:23:03,830 --> 00:23:06,730\nIt kind of cycles through them,\nbut it doesn't account for\n\n511\n00:23:06,730 --> 00:23:07,950\nthings like server failures.\n\n512\n00:23:07,950 --> 00:23:11,380\nIf one server fails,\n50% of your users get a bad IP.\n\n513\n00:23:11,380 --> 00:23:12,560\nSo it's not a good solution.\n\n514\n00:23:12,560 --> 00:23:14,265\nYou should never really\nuse DNS round robin.\n\n515\n00:23:14,265 --> 00:23:16,210\n>> [LAUGH]\n>> I should clarify that.\n\n516\n00:23:16,210 --> 00:23:18,360\nYou should never use DNS\nround robin by itself.\n\n517\n00:23:18,360 --> 00:23:19,250\n>> There you go.\n>> By itself,\n\n518\n00:23:19,250 --> 00:23:21,100\nit's not enough to protect your network.\n\n519\n00:23:21,100 --> 00:23:23,340\nSo it should be combined\nwith something else.\n\n520\n00:23:23,340 --> 00:23:28,520\nSo what we really need Is a way to\nhave our users come in looking for\n\n521\n00:23:28,520 --> 00:23:34,870\none IP, and have that traffic spread\nacross however many machines we have.\n\n522\n00:23:34,870 --> 00:23:40,400\nSo that instead of everybody jumping over\nto one box, instead of everybody coming\n\n523\n00:23:40,400 --> 00:23:45,609\nright here, some of our users can be sent\nto this box and other users can be sent\n\n524\n00:23:45,609 --> 00:23:50,920\nto this other one that they get spread\nout, and that is called load balancing.\n\n525\n00:23:50,920 --> 00:23:57,081\nLoad balancing is where we basically\ntake our users that are coming in and\n\n526\n00:23:57,081 --> 00:24:02,232\nwe basically connect them to\nwhatever server is available,\n\n527\n00:24:02,232 --> 00:24:06,590\ngot free processor,\nyou know, is up and running.\n\n528\n00:24:06,590 --> 00:24:07,500\nAll right.\n\n529\n00:24:07,500 --> 00:24:11,567\nAnd the way we achieved this in the past\nwas to use a device called a load\n\n530\n00:24:11,567 --> 00:24:12,450\nbalancer.\n\n531\n00:24:12,450 --> 00:24:15,330\n>> Right.\nPhysical device that sat in-line, yeah.\n\n532\n00:24:15,330 --> 00:24:18,550\nAn appliance incredibly expensive\nbecause they know small companies\n\n533\n00:24:18,550 --> 00:24:19,241\ndon't need load balancers.\n\n534\n00:24:19,241 --> 00:24:20,620\n>> [LAUGH] Right.\n>> They know you're a big company if\n\n535\n00:24:20,620 --> 00:24:22,110\nyou're looking for this.\n\n536\n00:24:22,110 --> 00:24:25,880\nAnd, basically, it would be a box that\nthese people would pass through and\n\n537\n00:24:25,880 --> 00:24:28,050\nit would balance the traffic.\n\n538\n00:24:28,050 --> 00:24:29,350\nThey call it load distribution, so\n\n539\n00:24:29,350 --> 00:24:32,380\nit would distribute the load\nacross your various servers.\n\n540\n00:24:32,380 --> 00:24:36,430\nAnd if it saw one server went offline,\nit would stop sending traffic there.\n\n541\n00:24:36,430 --> 00:24:38,230\nAnd it would start sending\ntraffic to the other servers.\n\n542\n00:24:38,230 --> 00:24:40,830\nSo-\n>> So if one was extremely busy it\n\n543\n00:24:40,830 --> 00:24:41,590\nmight balance that or\n\n544\n00:24:41,590 --> 00:24:44,140\nsend them a little more to the other node\n>> Yeah, absolutely.\n\n545\n00:24:44,140 --> 00:24:46,300\nSo that's what they did.\n\n546\n00:24:46,300 --> 00:24:47,480\nAnd I've used them.\n\n547\n00:24:47,480 --> 00:24:48,040\nThey're really cool.\n\n548\n00:24:48,040 --> 00:24:49,280\nThey're really reliable.\n\n549\n00:24:49,280 --> 00:24:53,470\nOne of the biggest ones that are out\nthere is the F5 BIG-IP boxes.\n\n550\n00:24:53,470 --> 00:24:57,290\nYou'll see these out and\nabout in the real world.\n\n551\n00:24:57,290 --> 00:25:02,340\nAnd F5 Network, big name in networking,\nand they make the Big IP box which\n\n552\n00:25:02,340 --> 00:25:03,820\n>> Big IP, I like the name.\n\n553\n00:25:03,820 --> 00:25:05,920\n>> And it has a giant red F5 button on it.\n\n554\n00:25:05,920 --> 00:25:08,700\nIt does really cool stuff because it\nwill distribute loads not just across\n\n555\n00:25:08,700 --> 00:25:11,960\nservers in one data center but\nacross servers multiple data centers.\n\n556\n00:25:11,960 --> 00:25:15,140\n>> Oh, wow, nice.\n>> So you can lose an entire building, and\n\n557\n00:25:15,140 --> 00:25:16,380\nthis stuff would survive.\n\n558\n00:25:16,380 --> 00:25:19,780\nIt's really, really cool stuff,\nworth the money if you have the money.\n\n559\n00:25:19,780 --> 00:25:22,410\nCuz these things, they start at,\nI don't know, something like $30,000.\n\n560\n00:25:22,410 --> 00:25:22,990\n>> Wow.\n\n561\n00:25:22,990 --> 00:25:24,745\n>> So they're not inexpensive.\n\n562\n00:25:26,235 --> 00:25:27,745\n>> Wow.\nGood for us.\n\n563\n00:25:27,745 --> 00:25:29,035\nYeah.\n>> Yeah, Microsoft looked at this and\n\n564\n00:25:29,035 --> 00:25:30,830\nsaid that's not a viable solution for\nmost people.\n\n565\n00:25:30,830 --> 00:25:31,875\n>> [LAUGH]\n>> So\n\n566\n00:25:31,875 --> 00:25:37,145\nthey actually built in a load balancer\ninto the Windows operating system.\n\n567\n00:25:37,145 --> 00:25:37,900\n>> Very sweet.\n\n568\n00:25:37,900 --> 00:25:40,690\nAnd that is NLB.\n\n569\n00:25:40,690 --> 00:25:43,500\nNLB, the network load balancing,\nis that function.\n\n570\n00:25:43,500 --> 00:25:47,320\nIt's a part of the OS that allows us to\ndistribute load between the machines and\n\n571\n00:25:47,320 --> 00:25:49,840\ncreate the same type\nenvironment as a Big IP box but\n\n572\n00:25:49,840 --> 00:25:51,810\nwithout having that dedicated appliance.\n\n573\n00:25:51,810 --> 00:25:55,240\n>> And pretty easy to work with,\nI mean some straight up wizards.\n\n574\n00:25:55,240 --> 00:25:56,790\nYou install it,\nit's a feature like Don said,\n\n575\n00:25:56,790 --> 00:25:59,820\njust built right into the operating\nsystem so very easy to work with.\n\n576\n00:25:59,820 --> 00:26:02,290\nSupports up to 32 nodes so\nyou can do quite a bit.\n\n577\n00:26:02,290 --> 00:26:03,110\n>> Yeah, yep.\n\n578\n00:26:03,110 --> 00:26:06,310\nNow, if you want more than 32 nodes,\nif you want multiple geographic locations,\n\n579\n00:26:06,310 --> 00:26:09,700\nthat's where the Big IP, the hardware\nboxes, that's where they come in.\n\n580\n00:26:09,700 --> 00:26:13,680\nBut if you're just looking to build\na less than 32 node system and\n\n581\n00:26:13,680 --> 00:26:17,080\nget access on your\nmachines NLB works great.\n\n582\n00:26:17,080 --> 00:26:19,153\nRight?\n>> So, Mike, looking at the clock,\n\n583\n00:26:19,153 --> 00:26:21,370\nwe're pretty close to the time for\na break.\n\n584\n00:26:21,370 --> 00:26:22,200\n>> Oh yeah.\n>> So why don't we do this,\n\n585\n00:26:22,200 --> 00:26:23,240\nwhy don't we stop?\n\n586\n00:26:23,240 --> 00:26:27,850\nWhen we get back I wanna talk a little\nmore about the ins and outs of NLB itself.\n\n587\n00:26:27,850 --> 00:26:28,490\n>> Okay.\n>> And then we're\n\n588\n00:26:28,490 --> 00:26:31,300\ngonna see how to set it up and\nhow we can get it working on our system.\n\n589\n00:26:31,300 --> 00:26:32,170\n>> Yeah, I like it.\n\n590\n00:26:32,170 --> 00:26:34,053\n>> All right.\nSo ladies and gentlemen, stay tuned.\n\n591\n00:26:34,053 --> 00:26:34,971\nWe'll be back after this.\n\n592\n00:26:34,971 --> 00:26:43,280\n[SOUND]\n>> [LAUGH]\n\n593\n00:26:43,280 --> 00:26:44,840\n>> All right welcome back, everybody.\n\n594\n00:26:44,840 --> 00:26:49,830\nSo I kinda set us up for NLB,\nthe excitement that is NLB.\n\n595\n00:26:49,830 --> 00:26:52,420\n>> I been sitting on the edge\nof my seat the whole time.\n\n596\n00:26:52,420 --> 00:26:54,590\n>> I know.\nI'll tell you, though, I do like NLB.\n\n597\n00:26:54,590 --> 00:26:56,390\nI've used it in a number of environments.\n\n598\n00:26:56,390 --> 00:27:00,480\nIt is super cool when you're doing things\nlike setting up a terminal server.\n\n599\n00:27:00,480 --> 00:27:01,710\nAnd that's why I normally use it.\n\n600\n00:27:01,710 --> 00:27:03,320\nCitrix Servers terminal, Citrix XenApp.\n\n601\n00:27:03,320 --> 00:27:05,150\n>> XenApp.\n\n602\n00:27:05,150 --> 00:27:08,940\n>> And internal servers where you\ngot a bunch of these servers set up.\n\n603\n00:27:08,940 --> 00:27:12,110\nYou want users to connect but\nyou want as many of them as you can get.\n\n604\n00:27:12,110 --> 00:27:16,800\nYou fire up multiple servers,\nyou turn on NLB and you're in business.\n\n605\n00:27:16,800 --> 00:27:20,110\nSo let's talk a little bit\nabout how NLB works and\n\n606\n00:27:20,110 --> 00:27:22,530\nwhat it's basic components are, all right.\n\n607\n00:27:22,530 --> 00:27:26,820\nFirst off, NLB is a feature\nof Windows Server 2012 R2.\n\n608\n00:27:26,820 --> 00:27:30,120\nIt's been a feature in Windows,\nsince Windows 2000, so\n\n609\n00:27:30,120 --> 00:27:31,630\nit's been there a long time.\n\n610\n00:27:31,630 --> 00:27:34,250\nAnd basically we just need to turn it on.\n\n611\n00:27:34,250 --> 00:27:35,520\nIt's not on by default.\n\n612\n00:27:35,520 --> 00:27:37,080\nSo we just need to turn it on.\n\n613\n00:27:37,080 --> 00:27:42,570\nOnce it's on the way NLB works is\nit creates a virtual IP address.\n\n614\n00:27:42,570 --> 00:27:45,860\nInstead of having an IP address\ndirectly attached to a machine.\n\n615\n00:27:45,860 --> 00:27:47,487\nYou have this floating,\n\n616\n00:27:47,487 --> 00:27:51,912\nethereal IP address that technically\nbelongs to all the machines.\n\n617\n00:27:51,912 --> 00:27:52,995\n>> Right, yes.\n>> So like a ghost, right?\n\n618\n00:27:52,995 --> 00:27:57,359\n>> [LAUGH]\n>> So going back to my diagram here we If\n\n619\n00:27:57,359 --> 00:28:01,321\nwe went on this,\nwhat I can do, is I can say,\n\n620\n00:28:01,321 --> 00:28:07,537\nthis server is 10.1.230.238,\nand this guy is 239,\n\n621\n00:28:07,537 --> 00:28:12,488\nmaybe I'll set my super\nwebsite to .point to 237.\n\n622\n00:28:12,488 --> 00:28:15,750\nNow, 237, that's not either of these guys.\n\n623\n00:28:16,760 --> 00:28:20,742\nBut what I'm doing is, that IP,\n\n624\n00:28:20,742 --> 00:28:28,854\n10.1.230.237 becomes a floating\nIP that is really a,\n\n625\n00:28:28,854 --> 00:28:34,420\na virtual IP that both\nmachines can work with.\n\n626\n00:28:34,420 --> 00:28:40,850\nRight so it kinda goes either way,\nand let me, there we go.\n\n627\n00:28:40,850 --> 00:28:41,710\nPretty arrows.\n\n628\n00:28:41,710 --> 00:28:47,330\nSo it really goes either way,\nand both machines answer to it.\n\n629\n00:28:47,330 --> 00:28:51,260\nWhen a laptop looks up superwebsite.com,\nthey get 10.1.230.237.\n\n630\n00:28:51,260 --> 00:28:56,940\nThey go to access it, and\neither one of these machines can respond.\n\n631\n00:28:56,940 --> 00:29:00,155\n>> Right, that IP address is basically\nassigned to the NLP cluster itself.\n\n632\n00:29:00,155 --> 00:29:01,230\n>> Mm-hm.\n\n633\n00:29:01,230 --> 00:29:04,210\nAnd if one server fails,\nif SERVER01 fails right?\n\n634\n00:29:04,210 --> 00:29:07,320\nWell, SERVER02 is still there\nanswering to that IP address.\n\n635\n00:29:07,320 --> 00:29:12,520\nAnd if I decide I wanna grow the cluster,\nI wanna add a third node to it, right?\n\n636\n00:29:12,520 --> 00:29:13,990\nSo I bring up a third machine and\n\n637\n00:29:13,990 --> 00:29:16,460\njoin it in,\nit now starts answering to 10.1.230.237.\n\n638\n00:29:16,460 --> 00:29:20,920\nNow I've got three machines\nall answering to this one IP.\n\n639\n00:29:20,920 --> 00:29:23,200\nSo I can make the cluster bigger or\n\n640\n00:29:23,200 --> 00:29:28,520\nsmaller based on whatever my needs are and\nit doesn't impact the end users.\n\n641\n00:29:28,520 --> 00:29:31,460\nThey just see one IP that's\nalways up as long as least\n\n642\n00:29:31,460 --> 00:29:35,060\none node is still functional.\n\n643\n00:29:35,060 --> 00:29:36,720\nHere's the problem though.\n\n644\n00:29:36,720 --> 00:29:38,570\nLet's say I'm in an email client, right?\n\n645\n00:29:38,570 --> 00:29:41,980\nSo this is like a Microsoft Exchange\nfront end server or\n\n646\n00:29:41,980 --> 00:29:42,930\nsomething,\n>> Right.\n\n647\n00:29:42,930 --> 00:29:47,250\n>> and I connect to one node and\nI log in and I start to write an email,\n\n648\n00:29:47,250 --> 00:29:50,350\nbut it takes me ten minutes\nto write the email, and\n\n649\n00:29:50,350 --> 00:29:54,790\nby the time I hit submit\n>> Now I connect to the other server.\n\n650\n00:29:54,790 --> 00:29:55,600\nRight?\n>> Oops.\n\n651\n00:29:55,600 --> 00:29:57,000\n>> The server doesn't know who I am.\n\n652\n00:29:57,000 --> 00:29:59,750\nAnd I'm coming out of nowhere with\nan email and it's gonna reject it.\n\n653\n00:29:59,750 --> 00:30:01,000\nMy sessions gonna drop.\n\n654\n00:30:01,000 --> 00:30:01,720\nRight?\n\n655\n00:30:01,720 --> 00:30:05,140\nSo we have to make sure\nthat when clients connect\n\n656\n00:30:05,140 --> 00:30:09,160\nthat they stay connected to that one\nserver that they were working on.\n\n657\n00:30:09,160 --> 00:30:12,080\nAnd so\nthe server's actually talk to each other.\n\n658\n00:30:12,080 --> 00:30:14,300\nServer one and server two,\nthey're not just sharing an IP,\n\n659\n00:30:14,300 --> 00:30:17,060\nthey know about each other and\nthey exchange information.\n\n660\n00:30:17,060 --> 00:30:19,590\nSo that they can say,\nhey I'm managing that session,\n\n661\n00:30:19,590 --> 00:30:23,340\nor you've got that session and so on to\nkeep people tied to the right server.\n\n662\n00:30:23,340 --> 00:30:26,290\n>> Yeah, a lot of it depends on how we\nset up the affinity when we set this\n\n663\n00:30:26,290 --> 00:30:28,340\nup because if we're doing stateless\nthen it really doesn't matter.\n\n664\n00:30:28,340 --> 00:30:32,220\nLIke if it's a website it doesn't\nmatter which machine you connect to.\n\n665\n00:30:32,220 --> 00:30:36,980\nYou go to do the second HTTP Get packet,\nyou can connect to a different server and\n\n666\n00:30:36,980 --> 00:30:38,470\nit's not gonna change what you're doing.\n\n667\n00:30:38,470 --> 00:30:41,415\nBut if you're talking shopping carts or\nyou like said exchange or\n\n668\n00:30:41,415 --> 00:30:44,500\n[COUGH] something like that then,\nyeah, we can set the affinity.\n\n669\n00:30:44,500 --> 00:30:46,789\nWe'll talk about the different none,\nsingle and\n\n670\n00:30:46,789 --> 00:30:48,541\nthe class c affinity modes we can use.\n\n671\n00:30:48,541 --> 00:30:49,353\n>> It's classy.\n\n672\n00:30:49,353 --> 00:30:51,034\n>> It is classy.\n\n673\n00:30:51,034 --> 00:30:54,946\n>> Yeah, so, and one might say if it's\na static set of content, if it doesn't\n\n674\n00:30:54,946 --> 00:30:59,497\nchange, and it doesn't matter which server\nyou connect to and you don't worry about.\n\n675\n00:30:59,497 --> 00:31:01,360\nBut a lot of times today, Web 2.0, right?\n\n676\n00:31:01,360 --> 00:31:03,010\n>> Yeah, right.\n>> We're getting dynamic content.\n\n677\n00:31:03,010 --> 00:31:03,620\nThings change.\n\n678\n00:31:03,620 --> 00:31:05,700\nWe need people to stay stuck to a server.\n\n679\n00:31:05,700 --> 00:31:08,000\nSo when we set up network load balancing,\n\n680\n00:31:08,000 --> 00:31:11,380\none of the first questions it's gonna\nask us is what mode do we wanna run in.\n\n681\n00:31:11,380 --> 00:31:15,420\n>> Then we'll see Unicast,\nMulticast and IGMP?\n\n682\n00:31:15,420 --> 00:31:16,071\nIs that it, IGMP [CROSSTALK]?\n\n683\n00:31:16,071 --> 00:31:17,003\n>> And IGMP and Multicast, yep.\n\n684\n00:31:17,003 --> 00:31:18,170\n>> Ha-ha.\nI remembered all three.\n\n685\n00:31:18,170 --> 00:31:20,750\n>> Nice.\n>> And what's it really talking about is,\n\n686\n00:31:20,750 --> 00:31:23,510\nhow do you want these servers\nto talk together, right?\n\n687\n00:31:23,510 --> 00:31:25,050\nUnicast is one method.\n\n688\n00:31:25,050 --> 00:31:29,747\nWith Unicast, server one will talk to\nserver two using their internal IPs\n\n689\n00:31:29,747 --> 00:31:34,229\n10.1.230.238 talking to 10.1.230.239.\n\n690\n00:31:34,229 --> 00:31:34,868\nRight.\n\n691\n00:31:34,868 --> 00:31:37,690\nUnicast is great if you just\nhave two servers it works fine.\n\n692\n00:31:37,690 --> 00:31:39,880\nRight.\nAlmost every environment supports it,\n\n693\n00:31:39,880 --> 00:31:42,570\nit's a very stable, compatible method.\n\n694\n00:31:42,570 --> 00:31:46,620\nThe problem with Unicast\nis the more nodes you have,\n\n695\n00:31:46,620 --> 00:31:48,700\nthe more Unicast sessions you have.\n\n696\n00:31:48,700 --> 00:31:54,940\nSo if I have 32 nodes, every single node\nhas to talk to all of the other ones.\n\n697\n00:31:54,940 --> 00:31:59,178\nSo node number one would have 31\nconnections because it's connecting to\n\n698\n00:31:59,178 --> 00:32:01,880\nnode two all the way through node 32,\nright?\n\n699\n00:32:01,880 --> 00:32:04,120\nAnd each of the others will do the same,\nso\n\n700\n00:32:04,120 --> 00:32:08,090\nthe Unicast method results in a lot\nof cross chatter between the systems.\n\n701\n00:32:08,090 --> 00:32:12,646\nAnd so if you're just doing two, maybe\nthree, the unicast mode works fine But\n\n702\n00:32:12,646 --> 00:32:15,630\nperformance wise it really\nstarts to hurt things.\n\n703\n00:32:15,630 --> 00:32:18,820\nSo we have two other modes we can go with.\n\n704\n00:32:18,820 --> 00:32:22,390\nThe next one is multicast mode,\nand it's the one I normally use.\n\n705\n00:32:22,390 --> 00:32:27,010\nWith multicast mode, when node one\nwants to talk to the other nodes,\n\n706\n00:32:27,010 --> 00:32:28,902\nthe other 31 nodes, if there's 32.\n\n707\n00:32:28,902 --> 00:32:29,402\n>> Right.\n\n708\n00:32:29,402 --> 00:32:32,320\n>> It just sends out\none multicast message.\n\n709\n00:32:32,320 --> 00:32:35,970\nAnd the other nodes will pick that up and,\nand handle it, and so\n\n710\n00:32:35,970 --> 00:32:37,558\nit's much less communication.\n\n711\n00:32:37,558 --> 00:32:38,390\nA lot more efficient.\n\n712\n00:32:38,390 --> 00:32:40,639\n>> A lot of it depends too,\nlike with the Unicast your,\n\n713\n00:32:40,639 --> 00:32:43,809\nyour network adapter has to support\nbeing able to chance the MAC address,\n\n714\n00:32:43,809 --> 00:32:46,590\nbecause it's going to be assigned\na physical address, right?\n\n715\n00:32:46,590 --> 00:32:50,133\nIt's got its own TCP/IP address, its own\nMAC address, but we're also assigning\n\n716\n00:32:50,133 --> 00:32:53,430\nan IP address and a MAC address to\nthe network load balancing cluster itself.\n\n717\n00:32:53,430 --> 00:32:55,380\nThat's where all that traffic\nis coming from the clients,\n\n718\n00:32:55,380 --> 00:32:56,670\nthat's where it's going to.\n\n719\n00:32:56,670 --> 00:33:00,600\nSo it has to be able to\nchange its MAC address and\n\n720\n00:33:00,600 --> 00:33:02,620\nsome network adapters\naren't gonna support that.\n\n721\n00:33:02,620 --> 00:33:04,760\nWhereas if you've got more\nthan one network adapter,\n\n722\n00:33:04,760 --> 00:33:08,840\nwe can assign that multicast address\nto one of those second adapters and\n\n723\n00:33:08,840 --> 00:33:09,740\nit does work out a lot better.\n\n724\n00:33:09,740 --> 00:33:10,380\n>> Yeah, absolutely.\n\n725\n00:33:10,380 --> 00:33:14,690\nMostly just separate out some of the\ntraffic which we'll talk about as well.\n\n726\n00:33:14,690 --> 00:33:17,680\n>> And so we've got those modes Unicast,\nMulticast.\n\n727\n00:33:17,680 --> 00:33:19,600\nMulticast is what I normally go with.\n\n728\n00:33:19,600 --> 00:33:23,283\nSo the third mode is IGMP,\nthe Internet Group Management Protocol.\n\n729\n00:33:23,283 --> 00:33:24,365\nAnd it's useful for\n\n730\n00:33:24,365 --> 00:33:28,766\nsituations where you have switches that\nmight not be very happy about multicast.\n\n731\n00:33:28,766 --> 00:33:30,716\n>> Right.\n>> There's a lot of switches out there\n\n732\n00:33:30,716 --> 00:33:34,397\nthat can block multicast communications\nfrom connecting together very well.\n\n733\n00:33:34,397 --> 00:33:36,680\nIGMP helps with that.\n\n734\n00:33:36,680 --> 00:33:40,170\nYou can designate a IGMP address and\n\n735\n00:33:40,170 --> 00:33:43,170\nyour machines effectively have\nto join that communication.\n\n736\n00:33:44,210 --> 00:33:49,178\nAnd they do it very consistently and\nstably, which is the important.\n\n737\n00:33:49,178 --> 00:33:50,070\n[CROSSTALK].\n\n738\n00:33:50,070 --> 00:33:53,701\n>> All that traffic only goes out\nthe ports that are part of your network\n\n739\n00:33:53,701 --> 00:33:55,080\ncluster.\n\n740\n00:33:55,080 --> 00:33:58,054\n>> Yup, and so that's a good method to\ngo to if you're switch is demanding.\n\n741\n00:33:58,054 --> 00:33:58,870\nRight.\n\n742\n00:33:58,870 --> 00:34:01,871\nFor me, I generally try Multicast\nfirst unless it is blocked,\n\n743\n00:34:01,871 --> 00:34:04,590\nif it's a small environment\nI might go Unicast.\n\n744\n00:34:04,590 --> 00:34:07,155\nBut Multicast,\nit's normally the one we're gonna go for.\n\n745\n00:34:07,155 --> 00:34:08,100\n>> Mm-hm.\nFor sure.\n\n746\n00:34:08,100 --> 00:34:11,516\n>> Either way, it's a way all these nodes\ncan talk to each other and exchange\n\n747\n00:34:11,516 --> 00:34:15,210\ninformation, exchanging information\nabout the sessions that are coming in,\n\n748\n00:34:15,210 --> 00:34:16,540\nabout how busy they are.\n\n749\n00:34:16,540 --> 00:34:20,870\nAnd about how they're balancing\nthe traffic across the network.\n\n750\n00:34:20,870 --> 00:34:22,860\n>> Which nodes are even available.\n\n751\n00:34:22,860 --> 00:34:24,640\nRight.\nCuz basically they'll use their network to\n\n752\n00:34:24,640 --> 00:34:28,190\nsend a heartbeat back and forth so\nthey can figure out who's up and running.\n\n753\n00:34:28,190 --> 00:34:29,430\nEvery second they'll send one.\n\n754\n00:34:29,430 --> 00:34:33,270\nIf they miss more than five in a row,\nthey're considered out of the cluster.\n\n755\n00:34:33,270 --> 00:34:34,280\nAnd it won't send traffic that way.\n\n756\n00:34:34,280 --> 00:34:38,140\n>> One of the other nice things\nabout this is, there is no master.\n\n757\n00:34:38,140 --> 00:34:40,560\nAnd when you set up\nnetwork load balancing,\n\n758\n00:34:40,560 --> 00:34:43,700\nevery node member is\neffectively equal by default.\n\n759\n00:34:43,700 --> 00:34:44,570\n>> Right.\n>> So there's no\n\n760\n00:34:44,570 --> 00:34:46,230\none person running the show.\n\n761\n00:34:46,230 --> 00:34:48,360\nYou could lose any one of your nodes and\nyou'd be fine.\n\n762\n00:34:48,360 --> 00:34:50,980\nRemember that hardware appliance I brought\nup at the beginning of the show and\n\n763\n00:34:50,980 --> 00:34:52,000\nI said, it cost 30 grand?\n\n764\n00:34:52,000 --> 00:34:53,787\n>> Right, for that fiber.\n\n765\n00:34:53,787 --> 00:34:55,890\n>> Yeah, it's the brains for\nthat load balancing.\n\n766\n00:34:55,890 --> 00:34:59,236\nSo, the nodes attached to it don't\neven know they're load balancing.\n\n767\n00:34:59,236 --> 00:35:01,676\nThat fiber is doing it all for\nthem, the big IP.\n\n768\n00:35:01,676 --> 00:35:04,010\nWhat happens if that big IP box is down,\nright?\n\n769\n00:35:04,010 --> 00:35:06,900\nSo you've gotta have redundant ones.\n\n770\n00:35:06,900 --> 00:35:09,403\nSo when I say, it's expensive,\nyou never just buy one [CROSSTALK].\n\n771\n00:35:09,403 --> 00:35:10,611\n>> Now it's twice as expensive.\n\n772\n00:35:10,611 --> 00:35:14,653\n>> It's like Lays potato chips,\nyou can't eat just one.\n\n773\n00:35:14,653 --> 00:35:19,150\n[INAUDIBLE] But yeah, that's one of\nthe things with those appliances.\n\n774\n00:35:19,150 --> 00:35:23,790\nWith this, not only do we not have to\nbuy the appliance, but the availability,\n\n775\n00:35:23,790 --> 00:35:25,540\nthe redundancy is built into it.\n\n776\n00:35:25,540 --> 00:35:26,680\nThere is no master.\n\n777\n00:35:26,680 --> 00:35:30,010\nSo any of the nodes can go down,\nthe other ones will be perfectly happy\n\n778\n00:35:30,010 --> 00:35:31,490\npicking up the slack on\nthat an off they go.\n\n779\n00:35:31,490 --> 00:35:32,170\nAll right.\n\n780\n00:35:32,170 --> 00:35:35,614\nAnd when a client goes to\nconnect to this cluster,\n\n781\n00:35:35,614 --> 00:35:39,480\nthere they resolve the IP address or\nthe name to an IP.\n\n782\n00:35:39,480 --> 00:35:40,990\n>> Right.\n>> They go to connect, and\n\n783\n00:35:40,990 --> 00:35:42,845\nthey just hit one of the nodes,\nany of the nodes.\n\n784\n00:35:42,845 --> 00:35:46,871\nIf that node happens to be busy, it's\ntalking to the other guys, it knows who's\n\n785\n00:35:46,871 --> 00:35:50,974\nnot busy and it just shifts that person\noff by changing the ARP responses, right.\n\n786\n00:35:50,974 --> 00:35:54,320\nThe MAC address that comes back to them\nand they move off to another node.\n\n787\n00:35:54,320 --> 00:35:55,310\n>> It's a beautiful thing.\n\n788\n00:35:55,310 --> 00:35:58,700\n>> Yeah, it is really slick,\nvery, very cool.\n\n789\n00:35:58,700 --> 00:36:01,000\nAll right, Mike, system requirements.\n\n790\n00:36:01,000 --> 00:36:01,730\nWe want to do NLB.\n\n791\n00:36:01,730 --> 00:36:02,670\nIt doesn't have a lot.\n\n792\n00:36:02,670 --> 00:36:03,650\n>> They really aren't.\n\n793\n00:36:03,650 --> 00:36:06,290\nI mean you've gotta have,\nI was trying to think of anything that's\n\n794\n00:36:07,690 --> 00:36:10,543\nreally necessary for\nit other than installing the feature.\n\n795\n00:36:12,490 --> 00:36:16,351\n>> I know it's one of the few features\nthat's available in the web server version\n\n796\n00:36:16,351 --> 00:36:17,357\nof Windows Server.\n\n797\n00:36:17,357 --> 00:36:20,438\nCuz you have the different\neditions like the storage\n\n798\n00:36:20,438 --> 00:36:24,900\nserver which I don't think has NLB,\nbut the web server version does.\n\n799\n00:36:24,900 --> 00:36:26,755\nStandard and Enterprise both do it, right?\n\n800\n00:36:26,755 --> 00:36:28,200\nPretty certain.\n\n801\n00:36:28,200 --> 00:36:28,960\n>> I'm pretty sure, yeah.\n\n802\n00:36:28,960 --> 00:36:31,500\nThey all run the same rolls, so, and does.\n\n803\n00:36:31,500 --> 00:36:33,398\nThe only thing I can think\noff the top of my head,\n\n804\n00:36:33,398 --> 00:36:35,888\nis it's gotta have a static IP address and\na network adapter.\n\n805\n00:36:35,888 --> 00:36:36,423\n>> Mm-hm.\n\n806\n00:36:36,423 --> 00:36:40,010\n>> It's gotta use TCP for all the\napplications that you're running on it.\n\n807\n00:36:40,010 --> 00:36:41,740\nBut as far as the system\nyou're installing it on?\n\n808\n00:36:42,740 --> 00:36:43,330\n>> Yeah.\nNow,\n\n809\n00:36:43,330 --> 00:36:47,380\nMicrosoft does recommend that you have\ntwo network adaptors in the machine.\n\n810\n00:36:47,380 --> 00:36:49,120\nI'll tell you, you don't have to.\n\n811\n00:36:49,120 --> 00:36:51,960\nYou can do this all off\nof one network adaptor.\n\n812\n00:36:51,960 --> 00:36:55,100\nBut the reason they tell you\nthey recommend you have two,\n\n813\n00:36:55,100 --> 00:36:57,880\nis if you're messing with your\nload balancing configuration,\n\n814\n00:36:57,880 --> 00:36:59,500\nyou can get disconnected from the machine.\n\n815\n00:36:59,500 --> 00:37:01,340\nIf you're remote, you're out of luck.\n\n816\n00:37:01,340 --> 00:37:05,150\nSo what Microsoft's recommendation is that\nyou have one network adapter you use for\n\n817\n00:37:05,150 --> 00:37:08,760\nmanaging the machine, managing that,\nthat host or the node.\n\n818\n00:37:08,760 --> 00:37:10,190\n>> Right.\n>> And then a second network adapter,\n\n819\n00:37:10,190 --> 00:37:12,550\nthat's the one you are actually\ndoing the load balancing on.\n\n820\n00:37:12,550 --> 00:37:13,100\nAll right.\n\n821\n00:37:13,100 --> 00:37:14,200\nSo, it's useful to have that.\n\n822\n00:37:14,200 --> 00:37:16,106\nThat way if you're\nmanipulating load balancing,\n\n823\n00:37:16,106 --> 00:37:18,070\nyou still have your physical connection.\n\n824\n00:37:18,070 --> 00:37:19,877\n>> And they can use that for\nthe heartbeat and\n\n825\n00:37:19,877 --> 00:37:22,767\nthat way the normal client traffic\nisn't gonna, the latency from\n\n826\n00:37:22,767 --> 00:37:26,290\nthat isn't gonna affect the heartbeat so\nthey can communicate with each other.\n\n827\n00:37:26,290 --> 00:37:29,636\nAs Don said,\nyour maintenance information or\n\n828\n00:37:29,636 --> 00:37:33,258\nstuff is not gonna affect\nyour clients' access.\n\n829\n00:37:33,258 --> 00:37:34,320\n>> All right.\n\n830\n00:37:34,320 --> 00:37:37,160\nSo Mike, enough talking about it.\n\n831\n00:37:37,160 --> 00:37:37,890\nAnd let's-\n>> Let's do it.\n\n832\n00:37:37,890 --> 00:37:38,650\n>> Let's see some action.\n\n833\n00:37:38,650 --> 00:37:41,244\n>> Let's just dive in and, and\ninstall it and see what happens.\n\n834\n00:37:41,244 --> 00:37:45,430\n>> All right, so somewhere around here,\nthere we go, I've got some machines and\n\n835\n00:37:45,430 --> 00:37:47,410\nwe gotta a little simple\nnetwork built up here.\n\n836\n00:37:47,410 --> 00:37:49,810\nSo, I've got a domain\ncontroller ITPROTVD2.\n\n837\n00:37:49,810 --> 00:37:54,264\nI've got two servers,\nITPROTV server one and server two.\n\n838\n00:37:54,264 --> 00:37:57,153\nAnd they're just Windows Server 2012 R2.\n\n839\n00:37:57,153 --> 00:38:00,680\nThey are joined to the domain,\nand that's it, right?\n\n840\n00:38:00,680 --> 00:38:01,603\nI don't think we've installed\nanything [CROSSTALK].\n\n841\n00:38:01,603 --> 00:38:02,986\n>> No.\n[CROSSTALK] I don't think.\n\n842\n00:38:02,986 --> 00:38:05,250\n>> So those are the nodes that I've got.\n\n843\n00:38:05,250 --> 00:38:07,361\nI'm gonna start here\non server one in here.\n\n844\n00:38:07,361 --> 00:38:09,540\nI'll start from scratch just\nright from the desktop.\n\n845\n00:38:09,540 --> 00:38:10,590\nOkay.\n\n846\n00:38:10,590 --> 00:38:14,070\nSo I wanna get network load\nbalancing configure it up and\n\n847\n00:38:14,070 --> 00:38:18,100\nrunning in this machine and\nyou can get it happy and see what goes on.\n\n848\n00:38:18,100 --> 00:38:20,046\nSo we start by just adding the feature.\n\n849\n00:38:21,130 --> 00:38:25,590\nThere was a brief time where Microsoft\nhad NLB installed by default.\n\n850\n00:38:25,590 --> 00:38:27,150\nI think it was Windows Server 2003 R2.\n\n851\n00:38:27,150 --> 00:38:28,090\n>> I think so.\n\n852\n00:38:28,090 --> 00:38:31,540\n>> But it's not there anymore by default,\nwe just have to add it.\n\n853\n00:38:31,540 --> 00:38:35,530\nWe'll jump into our trusty dusty\nserver manager and add that feature.\n\n854\n00:38:36,770 --> 00:38:37,380\n>> Easy enough.\n\n855\n00:38:39,140 --> 00:38:42,940\n>> The key thing to take away here,\nis that because it is a feature\n\n856\n00:38:42,940 --> 00:38:47,000\nwe can easily add it to multiple\nservers at once if we want.\n\n857\n00:38:47,000 --> 00:38:50,770\nIt also means that we can use\nthis with core services installs.\n\n858\n00:38:50,770 --> 00:38:54,100\nSo you can have very,\nvery secured servers that are doing this.\n\n859\n00:38:54,100 --> 00:38:59,000\nAnd the other thing to remember is,\nwe usually load balancing something.\n\n860\n00:38:59,000 --> 00:39:02,870\nSo it's usually a web server,\na file server, something like that.\n\n861\n00:39:02,870 --> 00:39:04,788\nYou know,\nfile servers you probably use DFS.\n\n862\n00:39:04,788 --> 00:39:05,530\n>> Right.\n\n863\n00:39:05,530 --> 00:39:10,690\n>> And so, network load balancing or NLB\nis not always the perfect solution for us.\n\n864\n00:39:10,690 --> 00:39:11,500\nOkay?\n\n865\n00:39:11,500 --> 00:39:13,160\nWhen a user connects,\n\n866\n00:39:13,160 --> 00:39:16,292\nthey can't pick what server they're\ngonna hit in the NLB cluster.\n\n867\n00:39:16,292 --> 00:39:17,790\nWe're gonna direct them somewhere and\n\n868\n00:39:17,790 --> 00:39:19,740\nwe'll see some of the different\nways we manipulate that.\n\n869\n00:39:19,740 --> 00:39:22,570\nOn a web server, that's great, right?\n\n870\n00:39:22,570 --> 00:39:23,110\n>> Right.\n>> But\n\n871\n00:39:23,110 --> 00:39:24,960\non something like a database server.\n\n872\n00:39:24,960 --> 00:39:26,482\nThat can be disastrous.\n\n873\n00:39:26,482 --> 00:39:27,520\n>> Yeah [LAUGH].\n>> And so, you know,\n\n874\n00:39:27,520 --> 00:39:32,905\nyou need to make sure that whatever\nyou're balancing is a good fit for NLB.\n\n875\n00:39:32,905 --> 00:39:34,975\nI mentioned,\nI do it on terminal servers a lot.\n\n876\n00:39:34,975 --> 00:39:36,530\n>> Right.\n>> And web servers.\n\n877\n00:39:36,530 --> 00:39:38,028\nThose are my [CROSSTALK].\n\n878\n00:39:38,028 --> 00:39:41,842\n>> Especially for the web,, when you got\na multi tiered environment and you got all\n\n879\n00:39:41,842 --> 00:39:45,431\nof your front tiers, the web servers and\nyou can NLB between all those guys,\n\n880\n00:39:45,431 --> 00:39:49,270\nand then you've got a main database server\nthat all five of those NLB will be hit.\n\n881\n00:39:50,880 --> 00:39:53,839\n>> All right, so we're gonna be doing this\ninstall here and I'm just gonna, say,\n\n882\n00:39:53,839 --> 00:39:54,980\nI'm adding a roller feature.\n\n883\n00:39:54,980 --> 00:39:55,987\n>> Next four times, right?\n\n884\n00:39:55,987 --> 00:39:56,736\n>> Yep, now.\n\n885\n00:39:56,736 --> 00:39:57,690\n>> Are you gonna do it on both at once?\n\n886\n00:39:57,690 --> 00:39:58,410\n>> Yeah, might as well.\n\n887\n00:39:58,410 --> 00:39:59,200\nWe've got the chance.\n\n888\n00:39:59,200 --> 00:40:00,540\n>> Oh,\nwe haven't added him to our pool yet.\n\n889\n00:40:00,540 --> 00:40:01,530\n>> Oh, shoot!\n\n890\n00:40:01,530 --> 00:40:03,004\nI'd have to.\nOh, all right, we'll do it separate then.\n\n891\n00:40:03,004 --> 00:40:05,290\n>> Yeah.\n>> All right, so I've got my server,\n\n892\n00:40:05,290 --> 00:40:06,500\nITPROTV-SERV01.\n\n893\n00:40:06,500 --> 00:40:08,090\nI'm not adding any roles.\n\n894\n00:40:08,090 --> 00:40:09,250\nWell, maybe I should, right?\n\n895\n00:40:09,250 --> 00:40:10,790\nCuz we need something to load balance.\n\n896\n00:40:10,790 --> 00:40:12,800\n>> Yeah, go ahead and\ndo, I don't know, IIS.\n\n897\n00:40:12,800 --> 00:40:14,250\n>> Actually it looks\nlike we already have IIS.\n\n898\n00:40:14,250 --> 00:40:15,460\nNice.\n\n899\n00:40:15,460 --> 00:40:16,210\nThat'll work.\n\n900\n00:40:16,210 --> 00:40:16,750\n>> Yeah, works for me.\n\n901\n00:40:16,750 --> 00:40:17,420\n>> This is good.\n\n902\n00:40:17,420 --> 00:40:18,420\n>> So we've got a web server.\n\n903\n00:40:18,420 --> 00:40:19,670\nThat's what we'll load balance.\n\n904\n00:40:19,670 --> 00:40:21,300\nThat'll work out great.\n\n905\n00:40:21,300 --> 00:40:24,860\nAnd then on features,\nhere's where I'm gonna go in and\n\n906\n00:40:24,860 --> 00:40:27,280\nI'm gonna hunt down old\nnetwork load balancing.\n\n907\n00:40:27,280 --> 00:40:29,570\nIt's just a feature right here,\nnetwork load balancing.\n\n908\n00:40:29,570 --> 00:40:31,740\n>> Mm-hm.\n>> And I'll check that off.\n\n909\n00:40:31,740 --> 00:40:35,680\nYou'll see it's gonna install the network\nload balancing tools, but that's about it.\n\n910\n00:40:37,690 --> 00:40:39,490\nAnd we can finish that up.\n\n911\n00:40:39,490 --> 00:40:43,530\nAll right, now when you do this install,\nnetwork load balancing is actually\n\n912\n00:40:43,530 --> 00:40:48,320\na service that taps Into your network\nadapter, it gets in between your network\n\n913\n00:40:48,320 --> 00:40:51,430\nadapter's driver and\nthe hardware abstraction layer of Windows.\n\n914\n00:40:51,430 --> 00:40:55,720\nThat means that, during the install,\nit will reset your network connection.\n\n915\n00:40:55,720 --> 00:40:59,210\nWhat I'm hinting at here is\n[LAUGH] don't do this on your live\n\n916\n00:40:59,210 --> 00:41:00,910\nproduction server that's in use right now.\n\n917\n00:41:00,910 --> 00:41:01,790\n>> Right, yeah.\n\n918\n00:41:01,790 --> 00:41:03,640\n>> It will create a very small,\n\n919\n00:41:03,640 --> 00:41:06,565\nabout two second,\ndowntime when you install the feature.\n\n920\n00:41:06,565 --> 00:41:07,780\n>> Mm-hm.\n>> So,\n\n921\n00:41:07,780 --> 00:41:10,690\nif you're in a critical high\navailability environment,\n\n922\n00:41:10,690 --> 00:41:13,790\nyou should do this after hours or\nduring an acceptable downtime window.\n\n923\n00:41:13,790 --> 00:41:14,750\nIt's a very short window,\n\n924\n00:41:14,750 --> 00:41:17,590\nit's a just a couple of seconds\nwhile it resets the network adapter.\n\n925\n00:41:17,590 --> 00:41:19,330\nBut, it does create that outage.\n\n926\n00:41:19,330 --> 00:41:19,830\n>> Yeah.\n\n927\n00:41:20,900 --> 00:41:22,430\nWouldn't be too happy about that would I?\n\n928\n00:41:22,430 --> 00:41:24,880\n>> Yeah, a lot of people get\ninto this habit of saying,\n\n929\n00:41:24,880 --> 00:41:27,940\nI don't have to reboot to do this,\nI can do it live in the middle of the day!\n\n930\n00:41:27,940 --> 00:41:30,630\n>> And they don't realize that it\nresets the network adapter, or\n\n931\n00:41:30,630 --> 00:41:31,790\nsomething little like that.\n\n932\n00:41:31,790 --> 00:41:35,000\nSo this one does it and in fact,\n\n933\n00:41:35,000 --> 00:41:39,973\nbecause I'm remote desktop in, it's hard\nto tell if I'm seeing a frozen screen.\n\n934\n00:41:39,973 --> 00:41:41,646\n>> [LAUGH] Right\n>> Or it's actually moved forward It's-\n\n935\n00:41:41,646 --> 00:41:42,327\n>> That's one of my,\n\n936\n00:41:42,327 --> 00:41:45,522\nthere's not too many things that I don't\nlike about eight and 2012, but that little\n\n937\n00:41:45,522 --> 00:41:48,461\nprogress bar in server manager and the\nfact that it doesn't, like right now it's\n\n938\n00:41:48,461 --> 00:41:51,296\nfinished but if you weren't paying\nclose attention, you wouldn't notice.\n\n939\n00:41:51,296 --> 00:41:52,249\n>> Yeah, [LAUGH] am I finished?\n\n940\n00:41:52,249 --> 00:41:53,293\n[LAUGH]\n>> Yeah.\n\n941\n00:41:53,293 --> 00:41:54,860\n>> Are you installing it\non the second server?\n\n942\n00:41:54,860 --> 00:41:57,078\n>> I am gonna go ahead and\nnail it on the second one real quick here.\n\n943\n00:41:57,078 --> 00:42:01,580\n>> Alright, when it's done my\nserver's not much different.\n\n944\n00:42:01,580 --> 00:42:04,550\nIt's not much different because\nI didn't install a role so\n\n945\n00:42:04,550 --> 00:42:05,975\nI don't have any new roles over here.\n\n946\n00:42:05,975 --> 00:42:08,490\n>> Mm.\n>> It's a feature so\n\n947\n00:42:08,490 --> 00:42:10,350\nthere's really two differences.\n\n948\n00:42:10,350 --> 00:42:12,885\nWe'll see one change on\nthe network adapter itself.\n\n949\n00:42:12,885 --> 00:42:13,440\n>> Mm.\n>> And\n\n950\n00:42:13,440 --> 00:42:17,376\nwe'll see another change in\nthe administrative tools.\n\n951\n00:42:17,376 --> 00:42:18,800\n>> Alright.\nWe have a new administrative tool,\n\n952\n00:42:18,800 --> 00:42:19,620\nwhich I just [INAUDIBLE].\n\n953\n00:42:19,620 --> 00:42:21,770\n>> Yeah, cuz we didn't really\ncreate the cluster itself.\n\n954\n00:42:21,770 --> 00:42:23,480\nAll we did was install the feature.\n\n955\n00:42:23,480 --> 00:42:24,650\nNow we've gotta go back and\n\n956\n00:42:24,650 --> 00:42:28,730\ncreate the cluster, add the nodes that\nwe want to be a part of that cluster.\n\n957\n00:42:28,730 --> 00:42:30,990\nAnd to some of our advanced options.\n\n958\n00:42:30,990 --> 00:42:31,910\n>> Yup.\n\n959\n00:42:31,910 --> 00:42:35,520\nSo going back into my server manager here,\nif I go to tools,\n\n960\n00:42:35,520 --> 00:42:39,990\nI'll now have buried in here somewhere,\nmy network load balancing manager.\n\n961\n00:42:39,990 --> 00:42:40,490\n>> And I'm sorry.\n\n962\n00:42:40,490 --> 00:42:42,245\nThis console does make\nme laugh a little bit.\n\n963\n00:42:42,245 --> 00:42:44,470\n[LAUGH]\n>> It's very dated.\n\n964\n00:42:44,470 --> 00:42:46,220\n>> It's like hyperterminal, is it not?\n\n965\n00:42:46,220 --> 00:42:49,370\nI mean the icons and- [LAUGH]\n>> Yeah, it's bad.\n\n966\n00:42:49,370 --> 00:42:52,185\nI mentioned network load balancing\nwas introduced in like Windows 2000.\n\n967\n00:42:52,185 --> 00:42:54,559\n>> Mm.\n>> And the console has not changed much at\n\n968\n00:42:54,559 --> 00:42:56,189\nall since then [CROSSTALK].\n\n969\n00:42:56,189 --> 00:42:58,941\nThey haven't given it a facelift,\nor at least, not that I've seen.\n\n970\n00:42:58,941 --> 00:43:02,481\nBut the network load balancing manager,\n\n971\n00:43:02,481 --> 00:43:06,840\nit's what we use to set up our cluster and\nall that.\n\n972\n00:43:06,840 --> 00:43:08,865\nAnd if you fire it up\nright after an install.\n\n973\n00:43:08,865 --> 00:43:09,420\n>> Mm.\n\n974\n00:43:09,420 --> 00:43:11,348\n>> There's not anything in there, right?\n\n975\n00:43:11,348 --> 00:43:12,399\n>> Yeah.\nNothing.\n\n976\n00:43:12,399 --> 00:43:16,270\n>> And we can't even really do much\nwith it right now, because we haven't.\n\n977\n00:43:16,270 --> 00:43:18,115\nActually turned on NLB.\n\n978\n00:43:18,115 --> 00:43:19,380\n>> Mm.\n\n979\n00:43:19,380 --> 00:43:20,040\n>> Alright.\n\n980\n00:43:20,040 --> 00:43:22,200\nSo the other place where we see a change,\n\n981\n00:43:22,200 --> 00:43:25,560\nin addition to this tool,\nis on the Network Adapter itself.\n\n982\n00:43:25,560 --> 00:43:29,020\nAnd that's where we need to make sure\nthe network load balancing is turned on.\n\n983\n00:43:29,020 --> 00:43:33,397\nSo I'm gonna go into my network and\nsharing center and\n\n984\n00:43:33,397 --> 00:43:38,495\neventually I'm gonna go into\nmy network and sharing center.\n\n985\n00:43:38,495 --> 00:43:41,720\n[LAUGH]\n>> We're taxing it right now.\n\n986\n00:43:41,720 --> 00:43:42,680\nInstalling on one.\n\n987\n00:43:42,680 --> 00:43:44,330\n>> Apparently it's thinking really hard.\n\n988\n00:43:44,330 --> 00:43:45,980\nSo I'm gonna go into my network and\nsharing center,\n\n989\n00:43:45,980 --> 00:43:49,330\nI'm gonna pull up the properties\nof the network adapter that I want\n\n990\n00:43:49,330 --> 00:43:50,500\nto do balancing on.\n\n991\n00:43:50,500 --> 00:43:54,620\nNow remember you might have multiple\nadapters, and so you have to do this based\n\n992\n00:43:54,620 --> 00:44:01,107\non what it's shoot, there, okay,\nwhat it is that we wanna turn it on for.\n\n993\n00:44:01,107 --> 00:44:02,610\n>> [COUGH]\n>> So, I've only got one network adapter,\n\n994\n00:44:02,610 --> 00:44:03,735\nso I'm gonna turn it on for that one.\n\n995\n00:44:03,735 --> 00:44:04,970\n>> Mm.\n>> And basically,\n\n996\n00:44:04,970 --> 00:44:06,948\nwe'll pull up the properties for\nthe adapter, and\n\n997\n00:44:06,948 --> 00:44:09,790\nwe'll see a list of the various\nservices that are turned on for it.\n\n998\n00:44:09,790 --> 00:44:10,460\nThe protocols.\n\n999\n00:44:10,460 --> 00:44:13,620\nWe'll see IPv4, IPv6, right?\n\n1000\n00:44:13,620 --> 00:44:17,080\nAnd we'll see network load\nbalancing as an option.\n\n1001\n00:44:17,080 --> 00:44:20,740\nAnd we've gotta get that turned\non if we plan on using it.\n\n1002\n00:44:20,740 --> 00:44:21,860\n>> If we want to use it, I suppose.\n\n1003\n00:44:21,860 --> 00:44:24,070\nAnd all of this can be\ndone through PowerShell.\n\n1004\n00:44:24,070 --> 00:44:28,140\nOne of the new things for 2012 R2, is\nthey've added all the PowerShell commands\n\n1005\n00:44:28,140 --> 00:44:30,740\nwe need to manage our NLB clusters.\n\n1006\n00:44:30,740 --> 00:44:34,620\nThere's two nouns that you can deal with,\nthere's the NLB cluster noun,\n\n1007\n00:44:34,620 --> 00:44:38,250\nif you guys remember your power\ntrail command was verb dash noun.\n\n1008\n00:44:38,250 --> 00:44:41,410\nSo NLB cluster let's you work with\nthe properties of the cluster itself,\n\n1009\n00:44:41,410 --> 00:44:42,830\nthe virtual part.\n\n1010\n00:44:42,830 --> 00:44:44,280\nNLB cluster node.\n\n1011\n00:44:44,280 --> 00:44:47,800\nIf you want to work with the properties or\nget or set any of the properties on\n\n1012\n00:44:47,800 --> 00:44:52,586\nan individual note within the cluster or\nadd a new note or something like that.\n\n1013\n00:44:52,586 --> 00:44:54,609\n>> Yap.\nAnd prior to having the power shelf we had\n\n1014\n00:44:54,609 --> 00:44:58,079\nother command line utilizes to use and\nit was a little confusing because N-L-B,\n\n1015\n00:44:58,079 --> 00:45:01,117\nnetwork load balancing,\nthat's what we're talking about, right?\n\n1016\n00:45:01,117 --> 00:45:01,739\n>> Mm hm.\n>> But\n\n1017\n00:45:01,739 --> 00:45:04,300\nthe command line was\nactually using the old name.\n\n1018\n00:45:04,300 --> 00:45:06,218\nWhen the service was initially introduced,\n\n1019\n00:45:06,218 --> 00:45:08,901\nit was called Windows Load\nBalancing Services or W-L-B-S.\n\n1020\n00:45:08,901 --> 00:45:09,723\n>> [INAUDIBLE]\n>> And so\n\n1021\n00:45:09,723 --> 00:45:13,135\nthe old command line [INAUDIBLE] I\ndon't even know if they're still there.\n\n1022\n00:45:13,135 --> 00:45:14,172\n[CROSSTALK] We'll see\nif they're still there.\n\n1023\n00:45:14,172 --> 00:45:18,752\n>> We'll see.\n>> They used to be WLBS and you could run\n\n1024\n00:45:18,752 --> 00:45:23,674\nWLBS status and all that access denied.\n\n1025\n00:45:23,674 --> 00:45:24,655\nI need to be an administrator.\n\n1026\n00:45:27,281 --> 00:45:28,645\nLet me bump that up.\n\n1027\n00:45:28,645 --> 00:45:32,911\nGood old UAC.\n\n1028\n00:45:32,911 --> 00:45:36,880\n[LAUGH] Yeah, there we go.\n\n1029\n00:45:36,880 --> 00:45:37,520\nWLBS.\n\n1030\n00:45:37,520 --> 00:45:39,390\nSo it's kinda weird,\n\n1031\n00:45:39,390 --> 00:45:44,090\nit's a hard one to remember cuz the name\ndoesn't match the service anymore.\n\n1032\n00:45:44,090 --> 00:45:44,660\n>> Right, yeah.\n\n1033\n00:45:44,660 --> 00:45:49,010\n>> But, WLBS or Windows Load Balancing\nServices, that's the old name for NLB or\n\n1034\n00:45:49,010 --> 00:45:49,965\nNetwork Load Balancing.\n\n1035\n00:45:49,965 --> 00:45:51,640\n>> Mm-hm,\n>> And, so, you could come in here and\n\n1036\n00:45:51,640 --> 00:45:54,770\njust do a quick query or\ndisplay or whatever.\n\n1037\n00:45:54,770 --> 00:45:57,850\nSo I could run WLBS display,\nand it would show it me,\n\n1038\n00:45:57,850 --> 00:46:01,420\nright now I don't have [CROSSTALK]\nNLB turned on and all that.\n\n1039\n00:46:01,420 --> 00:46:04,950\nSo Powershell is the way to go now,\nbut this is the old way.\n\n1040\n00:46:04,950 --> 00:46:07,420\nSo if you're working on\nWindows Server 2012, not R2.\n\n1041\n00:46:07,420 --> 00:46:09,093\n>> Right.\n>> Or 2008, or whatever.\n\n1042\n00:46:09,093 --> 00:46:11,571\n>> Yes, Mm.\n>> WLBS, that's the command you'll need.\n\n1043\n00:46:11,571 --> 00:46:12,216\n>> Yap.\n\n1044\n00:46:12,216 --> 00:46:15,292\nAnd the PowerShell\ncommands are not that bad.\n\n1045\n00:46:15,292 --> 00:46:17,214\nThey're not really all\nthat complex to work with.\n\n1046\n00:46:17,214 --> 00:46:18,700\n>> Sometimes.\n\n1047\n00:46:18,700 --> 00:46:20,700\nIt does get out of hand.\n\n1048\n00:46:20,700 --> 00:46:21,540\nYou know, I lied earlier.\n\n1049\n00:46:21,540 --> 00:46:23,300\nI have two network adapters.\n\n1050\n00:46:23,300 --> 00:46:24,690\n>> Just use Ethernet.\n\n1051\n00:46:24,690 --> 00:46:27,160\n>> Which one do we want\nto load balance on, Mike?\n\n1052\n00:46:27,160 --> 00:46:32,410\nI've gotta figure which one\nhas the 10.1.230 adress.\n\n1053\n00:46:32,410 --> 00:46:34,350\nI guess that one but you never know.\n\n1054\n00:46:35,460 --> 00:46:36,900\nYou just never know.\n\n1055\n00:46:36,900 --> 00:46:38,255\nAll right this one, okay.\n\n1056\n00:46:38,255 --> 00:46:39,970\n>> Yes.\n\n1057\n00:46:39,970 --> 00:46:42,670\n>> So this adapter here on the left,\n\n1058\n00:46:42,670 --> 00:46:46,970\nthis is the one that I've got my\n10.1.230.238 or 239 or whatever attached\n\n1059\n00:46:46,970 --> 00:46:51,710\nto and I want to turn network load\nbalancing on for this adapter.\n\n1060\n00:46:51,710 --> 00:46:55,660\nAnd so\nif we just go into the properties, and\n\n1061\n00:46:55,660 --> 00:46:58,115\ntake a look at our services, there's NLB.\n\n1062\n00:46:58,115 --> 00:46:58,870\n>> Mm.\n\n1063\n00:46:58,870 --> 00:47:01,485\n>> And notice how it's there but\nit's not checked.\n\n1064\n00:47:01,485 --> 00:47:02,080\n>> Mm.\n\n1065\n00:47:02,080 --> 00:47:02,730\n>> Okay?\n\n1066\n00:47:02,730 --> 00:47:05,590\nThat's the first step we\nneed to do to configure NLB.\n\n1067\n00:47:05,590 --> 00:47:09,230\nYou will not be able to configure NLB for\nthis server until you turn that on.\n\n1068\n00:47:09,230 --> 00:47:10,260\n>> Right.\n>> Okay.\n\n1069\n00:47:10,260 --> 00:47:14,220\nSo I'm gonna check it, and I'll say, okay,\n\n1070\n00:47:14,220 --> 00:47:19,040\nand now, I'm running NLB, but\nthe thing is I don't have a shared IP,\n\n1071\n00:47:19,040 --> 00:47:22,415\nI'm not talking to other servers,\nI'm not actually configured.\n\n1072\n00:47:22,415 --> 00:47:24,728\n>> Mm.\n>> I've really just turned out NLB\n\n1073\n00:47:24,728 --> 00:47:25,376\nsupport.\n\n1074\n00:47:25,376 --> 00:47:26,009\n>> Alright.\n\n1075\n00:47:26,009 --> 00:47:28,005\n>> And\nthere's not much more I can do from here.\n\n1076\n00:47:28,005 --> 00:47:28,545\n>> Mm.\n>> So\n\n1077\n00:47:28,545 --> 00:47:30,933\nif I go in here,\nit's actually turned it off.\n\n1078\n00:47:30,933 --> 00:47:32,099\nThat's fun.\n\n1079\n00:47:34,601 --> 00:47:35,373\nLet me try that again.\n\n1080\n00:47:35,373 --> 00:47:37,062\nIt's alright.\n\n1081\n00:47:37,062 --> 00:47:38,049\n>> It's because you\ndidn't use power shell.\n\n1082\n00:47:38,049 --> 00:47:38,618\n>> Alright.\n\n1083\n00:47:38,618 --> 00:47:41,630\n>> [LAUGH]\n>> Probably just broke everything.\n\n1084\n00:47:41,630 --> 00:47:43,882\n>> [LAUGH]\n>> Let me give it a second here.\n\n1085\n00:47:43,882 --> 00:47:47,696\nBut basically, we just turn it on and\nthen we're in business and from there,\n\n1086\n00:47:47,696 --> 00:47:48,715\nnow it's.\n\n1087\n00:47:48,715 --> 00:47:51,100\n>> Nice.\n>> So once it's turned on,\n\n1088\n00:47:51,100 --> 00:47:52,540\nyou can't do configuration from here.\n\n1089\n00:47:52,540 --> 00:47:53,595\nYou see we don't have properties.\n\n1090\n00:47:53,595 --> 00:47:56,554\n>> Mm.\n>> That's where we jump over and\n\n1091\n00:47:56,554 --> 00:48:02,706\nnow we start to get that setup in\nthe actual NLB manager, all right?\n\n1092\n00:48:02,706 --> 00:48:04,917\nSo Mike, why don't you go ahead and\nturn on NLB for\n\n1093\n00:48:04,917 --> 00:48:06,453\nthe adapter of the second server.\n\n1094\n00:48:06,453 --> 00:48:08,133\n>> If I can get logged in to this guy.\n\n1095\n00:48:08,133 --> 00:48:08,963\n>> You forgot your password again?\n\n1096\n00:48:08,963 --> 00:48:10,213\n>> It does not know the.\n\n1097\n00:48:10,213 --> 00:48:11,633\n[MUSIC]\n\n1098\n00:48:11,633 --> 00:48:13,043\n[LAUGH] All right.\n\n1099\n00:48:13,043 --> 00:48:13,713\nWell, you know what?\n\n1100\n00:48:13,713 --> 00:48:15,728\nActually Mike, it is about time for\nus to stop and\n\n1101\n00:48:15,728 --> 00:48:19,010\ntake a break anyway, so lets do this-\n>> I'll learn my password while we're on\n\n1102\n00:48:19,010 --> 00:48:20,372\nbreak and we'll go from there.\n\n1103\n00:48:20,372 --> 00:48:21,583\n[LAUGH]\n>> [LAUGH] During the break,\n\n1104\n00:48:21,583 --> 00:48:23,871\nwe'll get Mike to turn on\nNLB on that second server,\n\n1105\n00:48:23,871 --> 00:48:25,854\njust you're checking\nit off on the adaptor.\n\n1106\n00:48:25,854 --> 00:48:29,894\nAnd when that's done, we'll fire up\nthe Network Load Balancing Manager and\n\n1107\n00:48:29,894 --> 00:48:31,335\nwe'll get it configured.\n\n1108\n00:48:31,335 --> 00:48:32,239\nWe'll get a chance to see how that works.\n\n1109\n00:48:32,239 --> 00:48:32,988\nIt's really cool stuff.\n\n1110\n00:48:32,988 --> 00:48:34,045\nStay tuned.\n\n1111\n00:48:34,045 --> 00:48:35,484\nWe'll get to it right after this.\n\n1112\n00:48:35,484 --> 00:48:42,508\n[MUSIC]\n\n1113\n00:48:42,508 --> 00:48:44,731\n>> [SOUND] All right,\nwelcome back everybody.\n\n1114\n00:48:44,731 --> 00:48:48,446\n>> So, enough talking about NLB,\nlet's jump in and see it work.\n\n1115\n00:48:48,446 --> 00:48:50,430\n>> Let's do it.\n>> Right so, before the break,\n\n1116\n00:48:50,430 --> 00:48:52,445\nwe installed the NLB feature.\n\n1117\n00:48:52,445 --> 00:48:53,440\n>> Mm-hm.\n>> And we turned it on for\n\n1118\n00:48:53,440 --> 00:48:55,590\nour network adapters, now it's time\nto actually get it configured.\n\n1119\n00:48:55,590 --> 00:48:58,135\nSo, let's go over our game plan real\nquick so we know where we're gonna be.\n\n1120\n00:48:58,135 --> 00:49:02,826\nRight now we've got Server01 and\nServer02, 10.1.230.238 and 239.\n\n1121\n00:49:02,826 --> 00:49:05,531\n>> Those are assigned to\ntheir physical adapters.\n\n1122\n00:49:05,531 --> 00:49:06,060\n>> Yep.\n\n1123\n00:49:06,060 --> 00:49:13,370\nAnd we're gonna be adding 237 as\na shared IP between the two hosts.\n\n1124\n00:49:13,370 --> 00:49:16,800\nSo that's what we're gonna be bringing\nup there and getting ready to rock, so\n\n1125\n00:49:16,800 --> 00:49:18,850\nnow we just need to do it.\n\n1126\n00:49:18,850 --> 00:49:22,286\nWhoops, and if I can remember\nmy shortcuts, there we go.\n\n1127\n00:49:22,286 --> 00:49:24,300\n>> [LAUGH]\n>> So I'm gonna take old Server01 here and\n\n1128\n00:49:24,300 --> 00:49:28,170\nI'm just gonna get back into my\nNetwork Load Balancing Manager.\n\n1129\n00:49:28,170 --> 00:49:31,260\nI'll fire that up, and I'm not gonna\nsee anything too terribly exciting in\n\n1130\n00:49:31,260 --> 00:49:34,270\nhere right now,\nbecause we haven't set it up.\n\n1131\n00:49:34,270 --> 00:49:35,450\n>> We have no cluster-\n>> [LAUGH]\n\n1132\n00:49:35,450 --> 00:49:36,760\n>> Which is usually a good thing, right?\n\n1133\n00:49:36,760 --> 00:49:37,990\nNo cluster, but-\n>> Yeah.\n\n1134\n00:49:37,990 --> 00:49:38,600\n[LAUGH]\n>> Not in this case.\n\n1135\n00:49:38,600 --> 00:49:39,190\nWe want a cluster.\n\n1136\n00:49:39,190 --> 00:49:40,970\n>> Different kind of cluster.\n\n1137\n00:49:40,970 --> 00:49:42,490\n>> Yeah.\n>> So, we're gonna go ahead and\n\n1138\n00:49:42,490 --> 00:49:45,370\ndo a new cluster,\nan all new level of cluster.\n\n1139\n00:49:45,370 --> 00:49:46,890\nAnd so we'll punch it in.\n\n1140\n00:49:46,890 --> 00:49:49,690\nWe need to punch in the IP address of\none of the hosts we're configuring.\n\n1141\n00:49:49,690 --> 00:49:51,920\nNow the IP address we put in\nhere doesn't really matter,\n\n1142\n00:49:51,920 --> 00:49:52,880\nif you've got more than one IP.\n\n1143\n00:49:52,880 --> 00:49:55,920\nIf you've got two network adapters,\nyou could put either one.\n\n1144\n00:49:55,920 --> 00:49:59,590\nCuz what it's gonna do, is it's gonna pull\na list of the network adapters on that\n\n1145\n00:49:59,590 --> 00:50:04,740\nserver and ask which one you're\ngoing to be configuring NLB for.\n\n1146\n00:50:04,740 --> 00:50:08,440\nSo if you have more that one adapter,\nyou pick the right one here.\n\n1147\n00:50:08,440 --> 00:50:10,440\nIt doesn't matter which one\nof the IPs you put here,\n\n1148\n00:50:10,440 --> 00:50:12,430\nyou pick the adapter down at the bottom.\n\n1149\n00:50:12,430 --> 00:50:13,880\nI've just got the one.\n\n1150\n00:50:13,880 --> 00:50:15,510\nSo I'm going pick it, and\nI'm going to move forward now.\n\n1151\n00:50:15,510 --> 00:50:17,190\nIt's not gonna be happy about that.\n\n1152\n00:50:17,190 --> 00:50:19,190\nBecause Microsoft is gonna say, boy,\n\n1153\n00:50:19,190 --> 00:50:22,370\nit'd be a really good idea to have\na second adapter for management.\n\n1154\n00:50:22,370 --> 00:50:24,920\nSo I'll probably get a warning screen,\nbut it will let you do it.\n\n1155\n00:50:26,755 --> 00:50:30,570\nThen It's going to let me set a priority.\n\n1156\n00:50:31,880 --> 00:50:32,750\nWhat's a priority?\n\n1157\n00:50:32,750 --> 00:50:36,340\nI mentioned earlier that in NLB,\nnobody's the boss.\n\n1158\n00:50:36,340 --> 00:50:37,120\n>> They're all the same.\n\n1159\n00:50:37,120 --> 00:50:37,630\nThey're all equal.\n\n1160\n00:50:37,630 --> 00:50:42,445\n>> They're all the same, but there always\nhas to be somebody who's really in charge.\n\n1161\n00:50:42,445 --> 00:50:45,645\nBy default all the hosts are equal so\nit's just whoever cam up first.\n\n1162\n00:50:45,645 --> 00:50:47,545\nWhoever came up first,\nthey're the one that's in charge, but\n\n1163\n00:50:47,545 --> 00:50:50,375\nif they fail anybody else can take over.\n\n1164\n00:50:50,375 --> 00:50:54,185\nIf you have one server that you prefer\nover all the others, you can give them\n\n1165\n00:50:54,185 --> 00:50:58,295\na better priority and it will ensure\nthat they're the one who's in charge.\n\n1166\n00:50:58,295 --> 00:51:01,600\nThe first one you put in is\ngoing to have a priority of one.\n\n1167\n00:51:01,600 --> 00:51:03,410\nAnd you'll see,\nyou can go all way up to 32,\n\n1168\n00:51:03,410 --> 00:51:06,390\nwhich is the maximum\nnumber of nodes we have.\n\n1169\n00:51:06,390 --> 00:51:09,440\nAnd it just increments\nthem as you add nodes in.\n\n1170\n00:51:09,440 --> 00:51:12,260\nSo if you have no preference,\nyou just ignore this.\n\n1171\n00:51:12,260 --> 00:51:14,650\nBut if you have a server\nyou prefer over the others,\n\n1172\n00:51:14,650 --> 00:51:16,850\nyou'll wanna make it priority number one.\n\n1173\n00:51:16,850 --> 00:51:17,650\n>> Mm hm.\n\n1174\n00:51:17,650 --> 00:51:20,235\nIn typical Microsoft fashion,\nlower number, higher priority.\n\n1175\n00:51:20,235 --> 00:51:22,880\n>> Mm-hm.\n>> Down here at the bottom we can see\n\n1176\n00:51:22,880 --> 00:51:24,800\nthe initial host state.\n\n1177\n00:51:24,800 --> 00:51:27,630\nWhen the host comes up in the cluster,\nwhat does it do?\n\n1178\n00:51:27,630 --> 00:51:30,380\nDoes it come up as started,\nrunning and happy, or\n\n1179\n00:51:30,380 --> 00:51:33,320\ndoes it come up as stopped or suspended?\n\n1180\n00:51:33,320 --> 00:51:36,210\nStopped means it comes up,\nit's part of the cluster, but\n\n1181\n00:51:36,210 --> 00:51:38,380\nit is not accepting any connections.\n\n1182\n00:51:39,480 --> 00:51:44,175\nSuspended means it comes up and\nif it has existing connections,\n\n1183\n00:51:44,175 --> 00:51:47,790\nit'll finish them, but otherwise it won't\nlet new ones, those two are very similar.\n\n1184\n00:51:47,790 --> 00:51:50,335\nI'm gonna leave it at started.\n\n1185\n00:51:50,335 --> 00:51:52,010\nAnd you have the option here to say,\n\n1186\n00:51:52,010 --> 00:51:55,380\nretain suspended state\nafter a computer restarts.\n\n1187\n00:51:55,380 --> 00:51:58,620\nIf we're doing an update,\nwhen the machine reboots,\n\n1188\n00:51:58,620 --> 00:52:01,600\nwe might not want it to go\nlive right after the reboot.\n\n1189\n00:52:01,600 --> 00:52:05,000\n>> Right, so if I can change it to stop\nand then did my update when it reboots,\n\n1190\n00:52:05,000 --> 00:52:06,100\nI want it to remain stopped.\n\n1191\n00:52:06,100 --> 00:52:07,310\n>> Exactly.\n>> Until then I'm done.\n\n1192\n00:52:07,310 --> 00:52:10,470\n>> Yeah and that gives you a chance to\nmake sure your update was complete and\n\n1193\n00:52:10,470 --> 00:52:11,640\nall that before bringing it life.\n\n1194\n00:52:11,640 --> 00:52:13,090\nI'm gonna leave that one off.\n\n1195\n00:52:13,090 --> 00:52:16,900\nBut you may need that in your environment.\n\n1196\n00:52:16,900 --> 00:52:20,200\nNext, it's gonna ask for\nthe cluster IP address.\n\n1197\n00:52:20,200 --> 00:52:21,540\nThis is the shared IP.\n\n1198\n00:52:21,540 --> 00:52:23,850\nThis guy right here that\nI was talking about?\n\n1199\n00:52:23,850 --> 00:52:25,820\nThe one that's not really\ntied to one machine.\n\n1200\n00:52:25,820 --> 00:52:29,328\nI need it to be here so that this is what\nour end users will actually attach to.\n\n1201\n00:52:29,328 --> 00:52:31,232\nSo I'm gonna add that in here.\n\n1202\n00:52:31,232 --> 00:52:35,997\nThe IP address we're going\nto use is 10.1.230.237.\n\n1203\n00:52:35,997 --> 00:52:42,355\nAnd we're just doing\na Class C subnet mask.\n\n1204\n00:52:42,355 --> 00:52:44,855\nYou can do IPv6 also if you want,\nand it can even generate.\n\n1205\n00:52:44,855 --> 00:52:45,795\n>> It'll support it.\n\n1206\n00:52:45,795 --> 00:52:46,735\n>> Whatever it is that you need.\n\n1207\n00:52:46,735 --> 00:52:47,505\nI'm just gonna do IPv4.\n\n1208\n00:52:49,255 --> 00:52:52,865\nAnd you can have more than one shared IP,\nnot the greatest idea, but you can do it.\n\n1209\n00:52:54,620 --> 00:52:56,764\nAnd I'll move forward and\nthen it's just gonna ask for\n\n1210\n00:52:56,764 --> 00:52:58,966\na few other things like what's\nthe full Internet name.\n\n1211\n00:52:58,966 --> 00:53:04,289\nWe did, what was it, www.superwebsite.com,\nis that what it was?\n\n1212\n00:53:04,289 --> 00:53:05,177\n>> Is that what we're gonna use?\n\n1213\n00:53:05,177 --> 00:53:05,786\n>> I dunno.\n\n1214\n00:53:05,786 --> 00:53:08,184\n>> For the cluster name or\nis that for the, yeah, okay.\n\n1215\n00:53:08,184 --> 00:53:10,800\n>> This is the full Internet\nname that resolves to that IP.\n\n1216\n00:53:10,800 --> 00:53:13,110\nYou can leave it blank it,\nit can be whatever you want, but\n\n1217\n00:53:13,110 --> 00:53:14,600\nI think in, what did I say?\n\n1218\n00:53:14,600 --> 00:53:18,060\nI said superwebsite.com, so\nI'll just punch that in there.\n\n1219\n00:53:18,060 --> 00:53:20,730\nAnd then here's that\ncluster mode of operation.\n\n1220\n00:53:20,730 --> 00:53:24,530\nYou can change this later on, so\nit's not like you're stuck in one mode.\n\n1221\n00:53:24,530 --> 00:53:26,680\nIt defaults to unicast,\nwhich would probably be fine for\n\n1222\n00:53:26,680 --> 00:53:28,160\nus with just two nodes.\n\n1223\n00:53:28,160 --> 00:53:31,660\nBut if we were going more,\nmulticast is normally where you wanna be.\n\n1224\n00:53:31,660 --> 00:53:34,210\nAnd if we have really sensitive switches,\nthen we might have to go to IGMP.\n\n1225\n00:53:35,340 --> 00:53:38,710\nAnd notice, IGMP, it's warning me\nhere about the network implications.\n\n1226\n00:53:38,710 --> 00:53:40,295\nMy switches have to be ready for this.\n\n1227\n00:53:40,295 --> 00:53:44,020\n>> Yes, your switch doesn't support it,\nit's not going to do a lot of good.\n\n1228\n00:53:44,020 --> 00:53:47,900\n>> So I'll stick it in unicast mode,\nand that'll be fine.\n\n1229\n00:53:47,900 --> 00:53:49,140\nNotice as I move around here,\n\n1230\n00:53:49,140 --> 00:53:52,110\nthat MAC address is kind of changing\nup there based on the mode.\n\n1231\n00:53:52,110 --> 00:53:53,258\nBut we'll go Unicast.\n\n1232\n00:53:53,258 --> 00:53:59,440\nNow, port rules.\n\n1233\n00:53:59,440 --> 00:54:02,660\nPort rules are one of the more\nimportant things that we set up.\n\n1234\n00:54:02,660 --> 00:54:07,130\nBy default, it is going to\nnetwork load balance 100% of\n\n1235\n00:54:07,130 --> 00:54:11,690\nthe traffic to these nodes.\n\n1236\n00:54:11,690 --> 00:54:15,810\nAny connection to 10.1.230.237 will be\nload balanced across all these nodes.\n\n1237\n00:54:15,810 --> 00:54:17,690\nYou may not want that.\n\n1238\n00:54:17,690 --> 00:54:21,600\nIf you have a web server, you don't need\nto load balance all those other ports.\n\n1239\n00:54:21,600 --> 00:54:23,880\nYou just need to load\nbalance the web traffic.\n\n1240\n00:54:23,880 --> 00:54:25,390\n>> You don't want them to connect nodes.\n\n1241\n00:54:25,390 --> 00:54:28,310\nIf that's all that server's doing, then\nyou wanna limit what they're connected.\n\n1242\n00:54:28,310 --> 00:54:29,780\nIt's just good hardening practice.\n\n1243\n00:54:29,780 --> 00:54:30,990\nClose your unused ports.\n\n1244\n00:54:30,990 --> 00:54:33,360\nWhy forward all those ports over there?\n\n1245\n00:54:33,360 --> 00:54:35,760\nSomebody could use that for\nmalicious purposes, and\n\n1246\n00:54:35,760 --> 00:54:37,190\nwe really gotta kinda do it in two places.\n\n1247\n00:54:37,190 --> 00:54:39,470\nWe're gonna do it here with our port rule.\n\n1248\n00:54:39,470 --> 00:54:43,250\nSo this is controlling what traffic's\nallowed to come through that virtual IP\n\n1249\n00:54:43,250 --> 00:54:46,670\naddress to be redirected to\nthat node in that cluster.\n\n1250\n00:54:46,670 --> 00:54:49,600\n>> Yep, and so\nthe default is port zero through 65535,\n\n1251\n00:54:49,600 --> 00:54:51,125\nthat's the whole port range.\n\n1252\n00:54:51,125 --> 00:54:53,210\n>> Mm-hm, in both protocols.\n\n1253\n00:54:53,210 --> 00:54:54,090\n>> I'm just gonna remove that.\n\n1254\n00:54:55,540 --> 00:55:00,970\nAnd I'm gonna add in a new rule, and\nwe need to think about our services.\n\n1255\n00:55:00,970 --> 00:55:04,170\nSo, we're doing a web server,\nso I might have port 80.\n\n1256\n00:55:06,740 --> 00:55:10,690\nAnd TCP, it's not UDP,\nit's just TCP Port 80.\n\n1257\n00:55:10,690 --> 00:55:15,680\nAnd we can say whether we're sending\nit to a single host in particular.\n\n1258\n00:55:15,680 --> 00:55:18,300\nIf this is something very\nspecific I wanna send.\n\n1259\n00:55:18,300 --> 00:55:23,720\nIf I wanna do other things,\nlike set my affinity, I can do that.\n\n1260\n00:55:23,720 --> 00:55:26,280\nNow, affinity, you'll see here,\nNone, Single, Network.\n\n1261\n00:55:27,430 --> 00:55:31,430\n>> Multiple hosts is gonna redirect\nit to any one of those nodes within\n\n1262\n00:55:31,430 --> 00:55:32,490\nthat NLB cluster.\n\n1263\n00:55:32,490 --> 00:55:36,630\nIf you do single host, that cluster\nmight be doing other things, but there\n\n1264\n00:55:36,630 --> 00:55:40,240\nmight be one thing that's just running\non one particular host in that cluster.\n\n1265\n00:55:40,240 --> 00:55:41,800\nNot a very common thing,\nI don't think, to do.\n\n1266\n00:55:41,800 --> 00:55:44,770\nBut if you had a situation like that,\nwhen you do multiple hosts,\n\n1267\n00:55:44,770 --> 00:55:47,240\nnow you have got to decide what\nkind of affinity you want.\n\n1268\n00:55:47,240 --> 00:55:49,920\nAnd that just means how does\nthat client remembering\n\n1269\n00:55:49,920 --> 00:55:51,740\nwhat node within that\ncluster he's connecting to?\n\n1270\n00:55:51,740 --> 00:55:54,310\nIf we do none that means he doesn't care.\n\n1271\n00:55:54,310 --> 00:55:57,630\nWhen he comes in, the NLB cluster will\nsend him to any one of those nodes.\n\n1272\n00:55:57,630 --> 00:55:59,839\nIf we setup single,\nwhen you first come in,\n\n1273\n00:55:59,839 --> 00:56:02,840\nit could go to any of one of\nthose nodes within that cluster.\n\n1274\n00:56:02,840 --> 00:56:06,473\nBut then once you've established\nthe session, for the remainder of that\n\n1275\n00:56:06,473 --> 00:56:10,573\nparticular session, you will be sticking\nwith the same host within that cluster If\n\n1276\n00:56:10,573 --> 00:56:14,750\nyou break that session, establish a new\nsession, you might go to a different host.\n\n1277\n00:56:14,750 --> 00:56:19,070\nAnd then,\nnetwork is typically used with proxies.\n\n1278\n00:56:19,070 --> 00:56:23,750\nWhen you're coming through a proxy server,\nit'll just look at the class C address and\n\n1279\n00:56:23,750 --> 00:56:26,570\nit'll send it to any one of\nthe clusters on that address.\n\n1280\n00:56:26,570 --> 00:56:31,170\nYeah, singly it's remembering you\nspecifically by IP Network, you and\n\n1281\n00:56:31,170 --> 00:56:34,770\nanyone else on the same subnet as\nyou will get sent to that same host.\n\n1282\n00:56:34,770 --> 00:56:36,109\nI actually [CROSSTALK] never\nused that in production.\n\n1283\n00:56:36,109 --> 00:56:36,888\n>> I never used it either.\n\n1284\n00:56:36,888 --> 00:56:41,750\n>> But I normally use single,\neverybody's kind of tracked individually.\n\n1285\n00:56:41,750 --> 00:56:42,330\nAll right.\n\n1286\n00:56:42,330 --> 00:56:43,460\n>> Yeah.\nSo you do single.\n\n1287\n00:56:43,460 --> 00:56:44,670\nYou done a lot, like you were saying,\n\n1288\n00:56:44,670 --> 00:56:47,110\nwith terminal servers is\na little more stateful.\n\n1289\n00:56:47,110 --> 00:56:50,220\nI typically use none when I'm doing like\nwith web and things like that where I\n\n1290\n00:56:50,220 --> 00:56:52,210\ndon't care, and I want it to be-\n>> Yeah.\n\n1291\n00:56:52,210 --> 00:56:53,630\n>> Fully balanced as much as I can.\n\n1292\n00:56:54,650 --> 00:56:58,040\n>> You can actually, even with a terminal\nserver you can use none here, and\n\n1293\n00:56:58,040 --> 00:57:00,620\ncombine it with the terminal\nservices session broker.\n\n1294\n00:57:00,620 --> 00:57:02,800\nThat's another service that Microsoft has.\n\n1295\n00:57:02,800 --> 00:57:04,920\nAnd so you can let the session\nbroker keep track of it,\n\n1296\n00:57:04,920 --> 00:57:06,733\nand that even works better in some cases.\n\n1297\n00:57:06,733 --> 00:57:08,426\n>> Not that you don't\nhave to worry about it.\n\n1298\n00:57:08,426 --> 00:57:09,930\n>> Yeah, so\nwe can flip it to none here and\n\n1299\n00:57:09,930 --> 00:57:11,900\njust say connect to\nwhichever one you feel like.\n\n1300\n00:57:11,900 --> 00:57:12,640\nAll right.\n\n1301\n00:57:12,640 --> 00:57:14,130\nSo I'll go ahead and set that.\n\n1302\n00:57:14,130 --> 00:57:19,760\nIf it's a web server, I probably also have\nTCP port 443 if I'm doing SSL, right?\n\n1303\n00:57:19,760 --> 00:57:20,420\n>> Right.\n\n1304\n00:57:20,420 --> 00:57:22,690\n>> So\nI'm basically just coming through here and\n\n1305\n00:57:22,690 --> 00:57:26,010\nlisting each of the ports\nthat I might have.\n\n1306\n00:57:26,010 --> 00:57:27,540\nAnd maybe for SSL, I'd go ahead and do.\n\n1307\n00:57:27,540 --> 00:57:30,760\nAnd do affinity because now I\nhave sessions to worry about.\n\n1308\n00:57:30,760 --> 00:57:33,990\nAnd I'll just set it with\nlike a 60 minute time out.\n\n1309\n00:57:33,990 --> 00:57:36,566\nI'm not going to track anybody for\nmore than an hour if they're not active.\n\n1310\n00:57:36,566 --> 00:57:37,066\nAll right.\n\n1311\n00:57:38,140 --> 00:57:42,820\nSo, I'm punching that in here, and\nnow I'm load balancing for 443 and 80.\n\n1312\n00:57:42,820 --> 00:57:44,680\nI'm not load balancing for\nanything else, all right?\n\n1313\n00:57:44,680 --> 00:57:46,160\nJust those guys.\n\n1314\n00:57:46,160 --> 00:57:46,940\nAnd taken care of.\n\n1315\n00:57:46,940 --> 00:57:50,140\nAll right so I'll go ahead and finish.\n\n1316\n00:57:51,200 --> 00:57:54,330\nSo there we go now it's\nbuilding the cluster.\n\n1317\n00:57:54,330 --> 00:57:57,768\nIt takes a second, notice the little\nhourglass that's on the computer.\n\n1318\n00:57:57,768 --> 00:58:01,640\nYou've got to wait, and you'll get\nwhat Mike describes them as the boxes.\n\n1319\n00:58:01,640 --> 00:58:02,600\n>> Yeah, right.\n\n1320\n00:58:02,600 --> 00:58:06,110\nGreen, yellow and red boxes that\nindicate the health of the server.\n\n1321\n00:58:06,110 --> 00:58:07,020\nThis one is pending.\n\n1322\n00:58:07,020 --> 00:58:08,560\nSee, I've got waiting for\npending operation.\n\n1323\n00:58:08,560 --> 00:58:10,450\n>> I like the little status\nit gives you on the bottom,\n\n1324\n00:58:10,450 --> 00:58:12,380\nkind of keeps you posted\non what's going on.\n\n1325\n00:58:12,380 --> 00:58:13,440\n>> There it goes.\nIt just finished.\n\n1326\n00:58:13,440 --> 00:58:16,260\nI've got a little green box\naround IT pro tb server 1.\n\n1327\n00:58:16,260 --> 00:58:18,820\nIt's up and running, it's happy.\n\n1328\n00:58:18,820 --> 00:58:22,220\nA slight problem It's a pretty\nsmall little cluster.\n\n1329\n00:58:22,220 --> 00:58:22,830\n>> It's a small cluster.\n\n1330\n00:58:22,830 --> 00:58:25,420\nIt's only got one node, so\nI'm not going to get a lot of action here.\n\n1331\n00:58:25,420 --> 00:58:28,140\nIf this server fails I'm in a bad spot.\n\n1332\n00:58:28,140 --> 00:58:28,940\n>> You're pretty SOL, yeah.\n\n1333\n00:58:28,940 --> 00:58:32,170\nSo we need to add another\nnode to that cluster then.\n\n1334\n00:58:32,170 --> 00:58:34,500\nSo we can get that high\navailability we're looking for.\n\n1335\n00:58:34,500 --> 00:58:35,990\n>> And we've got that other node.\n\n1336\n00:58:35,990 --> 00:58:38,550\nServer 2 just sitting there so\nI'm going to come in here and\n\n1337\n00:58:38,550 --> 00:58:42,940\njust right click Click on this cluster,\nand I'll choose add host to cluster.\n\n1338\n00:58:42,940 --> 00:58:43,970\nAnd I'm going to go and\n\n1339\n00:58:43,970 --> 00:58:47,690\nfind our other server which was\n.239 if I remember correct.\n\n1340\n00:58:48,920 --> 00:58:49,450\n>> I think so.\n\n1341\n00:58:49,450 --> 00:58:52,790\n>> And [LAUGH] host unreachable.\n\n1342\n00:58:52,790 --> 00:58:54,150\nLet me make sure I didn't botch it's IP.\n\n1343\n00:58:54,150 --> 00:58:56,610\nThat was the problem we\nhad a little earlier,\n\n1344\n00:58:56,610 --> 00:58:58,340\nwhere I messed up the IP on the server.\n\n1345\n00:58:58,340 --> 00:59:00,770\nSo let me just jump over to server two.\n\n1346\n00:59:00,770 --> 00:59:05,960\n>> It turned itself back off.\n\n1347\n00:59:05,960 --> 00:59:07,590\n>> If I take a look at the IP.\n\n1348\n00:59:07,590 --> 00:59:13,540\nIt is 10.1.2.30.239, and\nwe'll go check that adapter.\n\n1349\n00:59:13,540 --> 00:59:17,770\nThis is the one you were going to do,\nMike, and I said, \"Oh I'll do it.\"\n\n1350\n00:59:17,770 --> 00:59:19,490\n>> So you did know my password.\n\n1351\n00:59:21,640 --> 00:59:22,490\nNope.\nWhere did my?\n\n1352\n00:59:25,140 --> 00:59:27,970\nWell somewhere my, okay, all right.\n\n1353\n00:59:27,970 --> 00:59:29,230\nSo NLB is indeed turned off.\n\n1354\n00:59:29,230 --> 00:59:30,299\nSo let's turn that on.\n\n1355\n00:59:32,852 --> 00:59:36,540\nI'm just turning on the net adapter, just\nlike I did on the other server and so-\n\n1356\n00:59:36,540 --> 00:59:38,950\n>> Just binding that protocol with\n\n1357\n00:59:38,950 --> 00:59:39,660\nthat adapter.\n\n1358\n00:59:39,660 --> 00:59:42,300\n>> And then I'm going to\njust make sure it stayed on,\n\n1359\n00:59:42,300 --> 00:59:44,110\nbecause that can sometimes\ncan be a little quirky.\n\n1360\n00:59:44,110 --> 00:59:44,824\nAnd the IP address is 239.\n\n1361\n00:59:45,830 --> 00:59:48,540\nAll right.\nso now let's jump back to\n\n1362\n00:59:48,540 --> 00:59:52,470\nour other server if I could get my\nassorted toolbars to play nice.\n\n1363\n00:59:53,640 --> 00:59:55,930\nToo many different machines going here.\n\n1364\n00:59:55,930 --> 00:59:57,960\n>> You're doing pretty good with that Mac,\nthough.\n\n1365\n00:59:57,960 --> 00:59:58,965\nYou seem to be used to it.\n\n1366\n00:59:58,965 --> 01:00:01,690\n>> [INAUDIBLE] What's unreachable?\n\n1367\n01:00:01,690 --> 01:00:02,650\nWhat is going on here?\n\n1368\n01:00:05,378 --> 01:00:08,025\n>> Let me just make sure\nI can ping it from here.\n\n1369\n01:00:10,301 --> 01:00:10,820\n>> It was 230?\n\n1370\n01:00:10,820 --> 01:00:12,640\nI can't even ping that host.\n\n1371\n01:00:12,640 --> 01:00:21,077\nOkay, that's a problem And\nwhile I troubleshoot this,\n\n1372\n01:00:21,077 --> 01:00:26,535\nnotice I did an IP configure on my system\nand see how I now show two IP addresses.\n\n1373\n01:00:26,535 --> 01:00:28,070\n>> [CROSSTALK]\n>> Yeah, let me make that a little bigger.\n\n1374\n01:00:28,070 --> 01:00:29,400\n>> Absolutely.\n>> And that's expected.\n\n1375\n01:00:29,400 --> 01:00:31,900\nThat's not a problem,\nbecause I am now in a cluster, right?\n\n1376\n01:00:31,900 --> 01:00:36,410\nSo I have my own IP address,\nthe one that's attached to my host.\n\n1377\n01:00:36,410 --> 01:00:39,340\n>> Right.\n>> And I've got the shared IP address.\n\n1378\n01:00:39,340 --> 01:00:41,680\nSo on everybody who's in this\ncluster you should see that.\n\n1379\n01:00:41,680 --> 01:00:46,030\nYou should see your own IP and\nthe cluster IP that should be right there.\n\n1380\n01:00:46,030 --> 01:00:46,640\nOkay.\n\n1381\n01:00:46,640 --> 01:00:47,150\nSo.\n\n1382\n01:00:47,150 --> 01:00:49,430\n>> Okay, so\nhe's getting that straightened out,\n\n1383\n01:00:49,430 --> 01:00:51,530\nI was trying to think if there's\nanything else we need to mention.\n\n1384\n01:00:51,530 --> 01:00:55,750\nWe talked about let's see,\nwhat about upgrading clusters?\n\n1385\n01:00:55,750 --> 01:00:58,440\nThat's something else they\nmight get you with on the exam.\n\n1386\n01:00:58,440 --> 01:01:04,120\nNLB clusters actually support having a mix\nof operating systems within the cluster,\n\n1387\n01:01:04,120 --> 01:01:05,530\nbelieve it or not.\n\n1388\n01:01:05,530 --> 01:01:06,410\nYou can do 2003, 2008, or\n\n1389\n01:01:06,410 --> 01:01:09,420\n2012 in that cluster,\nnot recommended though, all right?\n\n1390\n01:01:09,420 --> 01:01:11,990\nSo that's not something\nMicrosoft wants you to do.\n\n1391\n01:01:11,990 --> 01:01:14,970\nBut it is handy for the upgrade process,\nbecause let's say you're running 2008 R2\n\n1392\n01:01:14,970 --> 01:01:18,610\nor 2012 and you want to go to 2012 R2,\nwell now you can upgrade those.\n\n1393\n01:01:18,610 --> 01:01:21,151\nYou can do it one or two ways.\n\n1394\n01:01:21,151 --> 01:01:23,786\nYou can do what we call\na piece meal upgrade, or\n\n1395\n01:01:23,786 --> 01:01:27,707\nyou can do what we call it rolling\nupgrade, but it's not going to hurt\n\n1396\n01:01:27,707 --> 01:01:31,245\nanything as we do it little by\nlittle because it does support.\n\n1397\n01:01:31,245 --> 01:01:33,375\nIt's not going to bring\nyour entire cluster down,\n\n1398\n01:01:33,375 --> 01:01:35,585\nwhen you have mixed versions like that.\n\n1399\n01:01:35,585 --> 01:01:37,165\nThey do want you running the same edition.\n\n1400\n01:01:37,165 --> 01:01:39,305\nIf you're doing Standard,\nit should be Standard across all.\n\n1401\n01:01:39,305 --> 01:01:43,005\nIf you're doing Data Center,\nit should be Data Center across all.\n\n1402\n01:01:43,005 --> 01:01:45,005\nIf you do a piece meal upgrade,\n\n1403\n01:01:45,005 --> 01:01:47,805\nwhat we're going to do is we're going\nto add a new node to our cluster.\n\n1404\n01:01:47,805 --> 01:01:51,220\nWe'll take, if we have new physical\nhardware, we could be doing this for,\n\n1405\n01:01:51,220 --> 01:01:55,360\nif we do a new physical hardware we're\ngoing to install 2012 R2 on that new\n\n1406\n01:01:55,360 --> 01:01:58,960\nhardware and then bring that in\nas a new node to our cluster.\n\n1407\n01:01:58,960 --> 01:02:01,590\nAnd then we can take one of\nthe older nodes from the cluster,\n\n1408\n01:02:01,590 --> 01:02:03,350\ndrop it out of the cluster.\n\n1409\n01:02:03,350 --> 01:02:08,380\nAnd then we can blow it away, upgrade it,\nadd it to the cluster, bring the next\n\n1410\n01:02:08,380 --> 01:02:12,690\nnode out [COUGH] do its upgrade on there\nand then bring it back into the node.\n\n1411\n01:02:12,690 --> 01:02:16,160\nOr you can do a rolling upgrade, where\nyou just take one of the nodes offline.\n\n1412\n01:02:16,160 --> 01:02:18,140\nYou don't actually remove\nit from the cluster.\n\n1413\n01:02:18,140 --> 01:02:21,620\nYou can take one of them offline,\ndo an upgrade on it and\n\n1414\n01:02:21,620 --> 01:02:23,140\nthen bring it right back into the cluster.\n\n1415\n01:02:23,140 --> 01:02:25,530\nAgain, because it doesn't matter\nwhat version we're running,\n\n1416\n01:02:25,530 --> 01:02:27,380\nit's not going to cause a problem.\n\n1417\n01:02:27,380 --> 01:02:30,090\nBut either way,\nwe can get our cluster up to.\n\n1418\n01:02:30,090 --> 01:02:33,860\nIn the end though, you really do want\nthem all running the same Version and\n\n1419\n01:02:33,860 --> 01:02:35,530\nthey need to be running the same edition.\n\n1420\n01:02:37,800 --> 01:02:41,140\nWhat else?\nWe talked about our affinity and\n\n1421\n01:02:41,140 --> 01:02:41,870\nour port rules.\n\n1422\n01:02:41,870 --> 01:02:45,300\nSome other things we want to consider\nsecurity wise with clusters,\n\n1423\n01:02:45,300 --> 01:02:50,310\nyou saw Don set up that port rule for our\ncluster itself, so when people are coming\n\n1424\n01:02:50,310 --> 01:02:54,870\nthrough that virtual IP address,\nthat 237 that we set to that virtual part,\n\n1425\n01:02:54,870 --> 01:02:58,560\nthe cluster itself that those port\nrules are going to control that.\n\n1426\n01:02:58,560 --> 01:03:02,990\nBut your machines still have physical\nadapters with their statically mapped IP\n\n1427\n01:03:02,990 --> 01:03:04,210\naddress, right?\n\n1428\n01:03:04,210 --> 01:03:08,100\nSo I could technically connect to 238 or\n239 via port 80.\n\n1429\n01:03:08,100 --> 01:03:11,040\nAnd I really don't want that.\n\n1430\n01:03:11,040 --> 01:03:14,050\nI want them coming through the cluster so\nthat I can do that and\n\n1431\n01:03:14,050 --> 01:03:14,885\nthey're load balancing.\n\n1432\n01:03:14,885 --> 01:03:18,680\nBecause if everybody still has one of\nthose particular IP addresses mapped or\n\n1433\n01:03:18,680 --> 01:03:21,950\nmemorized or whatever, that server\ncould end up getting really busy and\n\n1434\n01:03:21,950 --> 01:03:23,240\nthe other guy is not doing anything.\n\n1435\n01:03:23,240 --> 01:03:27,350\nSo we'll set our firewall rules\nwhere you can't connect to that guy\n\n1436\n01:03:27,350 --> 01:03:29,385\ndirectly by their physical IP address.\n\n1437\n01:03:29,385 --> 01:03:31,705\nYou have to go through\nthe cluster to get it.\n\n1438\n01:03:31,705 --> 01:03:35,345\nJust understand that's two separate\nplaces to do the virtual IP address,\n\n1439\n01:03:35,345 --> 01:03:38,495\nthe port rules control what\ntraffics going to cluster.\n\n1440\n01:03:38,495 --> 01:03:40,395\nWe didn't disable the other ports.\n\n1441\n01:03:40,395 --> 01:03:44,070\nI don't know if you ever go back and\ndo that.\n\n1442\n01:03:44,070 --> 01:03:47,990\nIf you set up the forwarding rules so\nthat they just forward certain ports,\n\n1443\n01:03:47,990 --> 01:03:50,430\nyou shouldn't have to worry about\nthe other ports being forwarded.\n\n1444\n01:03:50,430 --> 01:03:52,560\n>> Yeah.\n>> But you can go back in and say, okay,\n\n1445\n01:03:52,560 --> 01:03:58,980\n0 through 79 is disabled and\nthen 81 through 442 is disabled.\n\n1446\n01:03:58,980 --> 01:04:01,550\nJust ensure that those\nports can get forwarded.\n\n1447\n01:04:01,550 --> 01:04:06,424\nBut then you go to your physical host and\nuse its firewall to block those ports\n\n1448\n01:04:06,424 --> 01:04:10,090\nas well so they have to go\nthrough the virtual IP address.\n\n1449\n01:04:10,090 --> 01:04:12,046\nWe also need to make a DNS record for\n\n1450\n01:04:12,046 --> 01:04:15,160\nour cluster itself which\nmight be part of the problem.\n\n1451\n01:04:15,160 --> 01:04:17,330\nWe haven't made a DNS record for\nthe cluster itself.\n\n1452\n01:04:17,330 --> 01:04:20,718\n>> No, I did say that it was\nwww.superwebsite.com, but\n\n1453\n01:04:20,718 --> 01:04:23,540\nwe don't even have that\nzone in DNS right now.\n\n1454\n01:04:23,540 --> 01:04:24,470\nSo that is not gonna work.\n\n1455\n01:04:24,470 --> 01:04:28,470\nSo it could be resolving that off\nthe actual internet or whatever, so yeah,\n\n1456\n01:04:28,470 --> 01:04:29,860\nwe might need to plug that in.\n\n1457\n01:04:29,860 --> 01:04:32,500\n>> But that wouldn't affect\nconnecting to the network adaptors.\n\n1458\n01:04:32,500 --> 01:04:33,420\n>> You would think.\n\n1459\n01:04:33,420 --> 01:04:35,599\n[LAUGH]\n>> But good to mention, you know,\n\n1460\n01:04:35,599 --> 01:04:38,896\none of the things you're gonna do, once\nyou create that name for your cluster and\n\n1461\n01:04:38,896 --> 01:04:40,840\nyou assign that virtual IP address.\n\n1462\n01:04:40,840 --> 01:04:44,200\nWell now you've gotta go to DNS and\nyou've gotta create a record in there for\n\n1463\n01:04:44,200 --> 01:04:45,530\nthat NLB cluster.\n\n1464\n01:04:45,530 --> 01:04:50,500\nSo that when they type in, a lot of times,\nif I'm doing a website I'll do iis-nlb.\n\n1465\n01:04:50,500 --> 01:04:55,920\nIt's just the name of it, so\nthey go and type in http://iis-nlb.\n\n1466\n01:04:55,920 --> 01:04:58,190\nIf it's an internal website,\nsomething like that,\n\n1467\n01:04:58,190 --> 01:05:00,820\nwe can get away with doing that.\n\n1468\n01:05:00,820 --> 01:05:03,620\nOtherwise, we would have to\nupdate our public DNS records,\n\n1469\n01:05:03,620 --> 01:05:04,440\nwhich could take some time.\n\n1470\n01:05:06,280 --> 01:05:08,060\n>> All right.\nWell, speaking of taking some time,\n\n1471\n01:05:08,060 --> 01:05:09,820\nMike\n>> Still no go?\n\n1472\n01:05:09,820 --> 01:05:12,470\n>> When we configure an advance service,\nlike network load balancing,\n\n1473\n01:05:12,470 --> 01:05:15,990\nit's important to make sure that your\nbase stuff functions first of all.\n\n1474\n01:05:15,990 --> 01:05:18,780\nI can not ping between these two\nservers even with the firewall off.\n\n1475\n01:05:18,780 --> 01:05:20,210\nSo, there is definitely some kindaissue.\n\n1476\n01:05:20,210 --> 01:05:20,940\nOh.\nDid it just?\n\n1477\n01:05:20,940 --> 01:05:22,080\nNo.\nNo.\n\n1478\n01:05:22,080 --> 01:05:22,630\nYep.\n\n1479\n01:05:22,630 --> 01:05:24,650\nSo, I only have basic connectivity.\n\n1480\n01:05:24,650 --> 01:05:27,340\nSo without basic network\nconnectivity we're not gonna have\n\n1481\n01:05:27,340 --> 01:05:28,120\ngood functionality here.\n\n1482\n01:05:28,120 --> 01:05:29,020\nSo, let's do this.\n\n1483\n01:05:29,020 --> 01:05:29,960\nLet's stop and take a break.\n\n1484\n01:05:29,960 --> 01:05:31,750\nI'm gonna find out what's going on here.\n\n1485\n01:05:31,750 --> 01:05:34,420\nIt's probably like a Hyper-V\nmisconfiguration, so\n\n1486\n01:05:34,420 --> 01:05:36,850\nI'll double check that and\nfind out what's going on.\n\n1487\n01:05:36,850 --> 01:05:40,230\nOnce I've got that sorted out, then we'll\nfinish the configuration of our cluster.\n\n1488\n01:05:40,230 --> 01:05:43,000\nSo we've built the cluster with one node.\n\n1489\n01:05:43,000 --> 01:05:44,930\nNow we just need to get\nthat second node added in,\n\n1490\n01:05:44,930 --> 01:05:46,320\nand then we'll be able to test it out.\n\n1491\n01:05:46,320 --> 01:05:50,070\nSo sorry about that interruption on\nthis one, but we'll just take a break,\n\n1492\n01:05:50,070 --> 01:05:51,690\nget it sorted out and\nthen we'll be right back.\n\n1493\n01:05:51,690 --> 01:05:52,660\nSo stay tuned.\n\n1494\n01:05:52,660 --> 01:05:53,710\nWe'll be back in a few.\n\n1495\n01:05:53,710 --> 01:06:00,750\n[MUSIC]\n\n1496\n01:06:00,750 --> 01:06:02,050\n>> All right, welcome back everybody.\n\n1497\n01:06:02,050 --> 01:06:04,920\nSo it didn't take very\nlong to find that problem.\n\n1498\n01:06:04,920 --> 01:06:08,630\nTurns out I'm running these\ntwo machines on Hyper-V.\n\n1499\n01:06:08,630 --> 01:06:12,380\nAnd it looks like Hyper-V doesn't support\ndynamically changing the MAC address.\n\n1500\n01:06:12,380 --> 01:06:13,930\nIt got ticked off at me.\n\n1501\n01:06:13,930 --> 01:06:18,660\nSo the problem was, I'd set up my\ncluster and I set it up in Unicast mode.\n\n1502\n01:06:18,660 --> 01:06:19,250\n>> Unicast mode, yep.\n\n1503\n01:06:19,250 --> 01:06:22,019\n>> I said earlier, I was like,\nwell you know, we've only got two nodes,\n\n1504\n01:06:22,019 --> 01:06:24,830\nwe'll go in Unicast mode, but\nnormally, I'd use Multicast.\n\n1505\n01:06:24,830 --> 01:06:27,910\nWell, turns out Hyper-V wasn't\nvery happy with that, so\n\n1506\n01:06:27,910 --> 01:06:30,580\nI've flipped over to Multicast mode.\n\n1507\n01:06:30,580 --> 01:06:31,495\nEverything's working great now.\n\n1508\n01:06:31,495 --> 01:06:32,360\n>> Bada-bing?\n>> So yeah,\n\n1509\n01:06:32,360 --> 01:06:33,620\nnow I'm able to ping and communicate.\n\n1510\n01:06:33,620 --> 01:06:35,340\nSo let me show you guys how to do that.\n\n1511\n01:06:35,340 --> 01:06:37,670\nAnd it does come down to your\nnetworking equipment, or in my case,\n\n1512\n01:06:37,670 --> 01:06:39,040\nmy virtual environment.\n\n1513\n01:06:39,040 --> 01:06:40,870\nDifferent solutions work\nin different areas.\n\n1514\n01:06:40,870 --> 01:06:43,790\nYou might have to try each of them\nbefore you find the one that works based\n\n1515\n01:06:43,790 --> 01:06:44,950\non your equipment.\n\n1516\n01:06:44,950 --> 01:06:48,660\nTo change the mode, you just pull\nup the property of your cluster.\n\n1517\n01:06:48,660 --> 01:06:53,580\nAnd as you'll see Cluster Properties, and\nunder Cluster Parameters, you can switch.\n\n1518\n01:06:53,580 --> 01:06:56,410\nSo I just switched from\nUnicast over to Multicast,\n\n1519\n01:06:56,410 --> 01:07:00,170\nthen all my pings started going\nthrough and everything was happy.\n\n1520\n01:07:00,170 --> 01:07:03,150\nSo that's why we have those multiple\nmodes to be able to try it out.\n\n1521\n01:07:03,150 --> 01:07:05,010\nI wanted to be in multicast anyways,\n\n1522\n01:07:05,010 --> 01:07:07,110\nbecause if you're gonna grow,\nyou want that.\n\n1523\n01:07:07,110 --> 01:07:10,680\nAll right, so let's go and add that second\nnode in again, so I'll come in here and\n\n1524\n01:07:10,680 --> 01:07:11,840\nadd a host to the cluster.\n\n1525\n01:07:11,840 --> 01:07:12,585\n>> Drum roll, please.\n\n1526\n01:07:12,585 --> 01:07:14,266\n[SOUND]\n>> I know, watch, now it's gonna fail,\n\n1527\n01:07:14,266 --> 01:07:15,115\nI'll be really angry.\n\n1528\n01:07:15,115 --> 01:07:20,665\nAnd so we'll connect up to the other node\nand hey, we're connected, all right.\n\n1529\n01:07:20,665 --> 01:07:23,995\nSo 10.1.230.239, that is my other host.\n\n1530\n01:07:23,995 --> 01:07:25,545\nAnd I'll hit Next.\n\n1531\n01:07:25,545 --> 01:07:26,640\nIt's gonna ask for its IP.\n\n1532\n01:07:26,640 --> 01:07:29,460\nNotice the priority is\nauto-incremented to number two.\n\n1533\n01:07:29,460 --> 01:07:32,200\n>> And if I drop that down I don't\neven have number one because it's\n\n1534\n01:07:32,200 --> 01:07:32,730\nalready taken.\n\n1535\n01:07:32,730 --> 01:07:34,360\n>> One's in use, yep.\n\n1536\n01:07:34,360 --> 01:07:37,050\n>> And so I can set it to default\nstate to start it, that's what I want.\n\n1537\n01:07:38,410 --> 01:07:39,150\nAll right.\n\n1538\n01:07:39,150 --> 01:07:42,310\nNotice the port rules,\nit learned them from the other host.\n\n1539\n01:07:42,310 --> 01:07:44,240\nIt assumes you want the same port rules.\n\n1540\n01:07:44,240 --> 01:07:47,350\nYou don't have to, you can have different\nport rules for different hosts.\n\n1541\n01:07:47,350 --> 01:07:49,600\nIt makes things really complex,\nbut you can do it.\n\n1542\n01:07:49,600 --> 01:07:54,600\n>> Yeah, I've seen one time where somebody\nhad a NLB cluster, but there was one host\n\n1543\n01:07:54,600 --> 01:07:58,530\nthat was running this one little webpage\nthat they didn't want and it'll be on.\n\n1544\n01:07:58,530 --> 01:08:00,090\nThey didn't need it or\nsomething like that.\n\n1545\n01:08:00,090 --> 01:08:04,460\nSo they had one of the web servers was\nhosting this little internal site and\n\n1546\n01:08:04,460 --> 01:08:06,040\nthey made a rule specifically so\n\n1547\n01:08:06,040 --> 01:08:09,030\nthat that port wouldn't get\nforwarded to any of the other nodes.\n\n1548\n01:08:09,030 --> 01:08:10,472\nIt was only going to that one node.\n\n1549\n01:08:10,472 --> 01:08:14,070\n>> All right, so we are good there so\nI'm going to go ahead and\n\n1550\n01:08:14,070 --> 01:08:16,000\nmove past that screen.\n\n1551\n01:08:16,000 --> 01:08:17,830\nAnd I'll just finish that up.\n\n1552\n01:08:17,830 --> 01:08:20,470\nAnd now, it's reaching out to\nserver two and configuring,\n\n1553\n01:08:20,470 --> 01:08:25,310\nnow server two is not healthy until\nI get a little green box right there.\n\n1554\n01:08:25,310 --> 01:08:26,820\n>> It is converging.\n\n1555\n01:08:26,820 --> 01:08:30,260\n>> Oh yeah, yeah, that's the official\nterm you'll see in the exam, convergence.\n\n1556\n01:08:30,260 --> 01:08:31,210\n>> Exactly.\n\n1557\n01:08:31,210 --> 01:08:32,951\nNotice that we have convergence,\n\n1558\n01:08:32,951 --> 01:08:36,500\nthat means all nodes in the cluster\nare aware of the cluster settings.\n\n1559\n01:08:36,500 --> 01:08:41,920\n>> And when they're both healthy,\nthey're sharing that .237 address.\n\n1560\n01:08:41,920 --> 01:08:43,490\n>> It doesn't like to refresh.\n\n1561\n01:08:43,490 --> 01:08:45,590\n>> Oh it doesn't?\nSo I have to refresh it myself?\n\n1562\n01:08:45,590 --> 01:08:48,290\n>> You might have to.\n\n1563\n01:08:48,290 --> 01:08:49,210\n>> Well, it's thinking.\n\n1564\n01:08:49,210 --> 01:08:52,282\nWhile it's waiting on that though,\nlet's take care of a few little odds and\n\n1565\n01:08:52,282 --> 01:08:52,910\nends, right.\n\n1566\n01:08:52,910 --> 01:08:54,770\nWe never did create a DNS entry.\n\n1567\n01:08:54,770 --> 01:08:56,230\nSo I can whip that up real quick.\n\n1568\n01:08:56,230 --> 01:09:00,040\nI'll jump over to our domain control\ncontroller that's doing DNS for us.\n\n1569\n01:09:00,040 --> 01:09:02,200\nAnd so what we'll get that set up.\n\n1570\n01:09:02,200 --> 01:09:04,922\nAnd then the other thing\nis we've got a web server,\n\n1571\n01:09:04,922 --> 01:09:07,210\nhow do we know we're being load balanced?\n\n1572\n01:09:07,210 --> 01:09:07,750\n>> Right.\n\n1573\n01:09:07,750 --> 01:09:08,670\n>> How do we know which\nserver we end up on?\n\n1574\n01:09:08,670 --> 01:09:09,600\nWe really don't.\n\n1575\n01:09:09,600 --> 01:09:12,830\nSo maybe I'll whip up a quick\ncustom little web page\n\n1576\n01:09:12,830 --> 01:09:16,730\nto just show us which\nserver we happen to be on.\n\n1577\n01:09:16,730 --> 01:09:18,260\nAnd, let me get my DNS manager.\n\n1578\n01:09:18,260 --> 01:09:20,135\nI ran the command line by accident.\n\n1579\n01:09:20,135 --> 01:09:23,915\n>> [LAUGH]\n>> All right, so we created a domain.\n\n1580\n01:09:23,915 --> 01:09:26,380\nIt was SuperWebsite.com, right?\n\n1581\n01:09:26,380 --> 01:09:32,995\nSo, let me do a new zone\ncalled SuperWebsite.com.\n\n1582\n01:09:32,995 --> 01:09:34,760\nAll right.\n\n1583\n01:09:34,760 --> 01:09:38,920\nAnd in that zone,\nI will create a host called www.\n\n1584\n01:09:42,020 --> 01:09:47,710\nAnd it's gonna point to 10.1.230.237,\nthat's that shared IP.\n\n1585\n01:09:47,710 --> 01:09:48,540\nI'll create a pointer.\n\n1586\n01:09:48,540 --> 01:09:52,040\nI don't know that's gonna exist or\nnot but there we go.\n\n1587\n01:09:52,040 --> 01:09:57,025\nAll right, so now, www.superwebsite.com is\npointing to the shared IP for the cluster.\n\n1588\n01:09:57,025 --> 01:10:00,670\nAnd then I'll jump back\nover to server one.\n\n1589\n01:10:01,740 --> 01:10:03,810\nAnd still pending on that configuration,\n\n1590\n01:10:03,810 --> 01:10:07,140\nso we'll have to see\nwhat's going on there.\n\n1591\n01:10:07,140 --> 01:10:10,100\nBut I'm just gonna make a quick file here,\n\n1592\n01:10:10,100 --> 01:10:12,810\nwhich I wonder if it will let\nme do this since I'm not admin.\n\n1593\n01:10:12,810 --> 01:10:15,765\nWill it let me save in to\nthe The Inet pub folder.\n\n1594\n01:10:15,765 --> 01:10:18,835\n>> I was gonna say you could just\ntake the, can you get in there?\n\n1595\n01:10:18,835 --> 01:10:20,370\nYeah, ww root,\n\n1596\n01:10:20,370 --> 01:10:25,415\nI always open up that IANS95 with Paint,\n>> [LAUGH]\n\n1597\n01:10:25,415 --> 01:10:27,715\n>> And just make the red circles on it.\n\n1598\n01:10:27,715 --> 01:10:31,150\n[LAUGH]\n>> The lazy man's way to go.\n\n1599\n01:10:31,150 --> 01:10:31,710\n>> Let's do this.\n\n1600\n01:10:31,710 --> 01:10:33,160\n>> I was gonna scratch\nout some HTML first.\n\n1601\n01:10:33,160 --> 01:10:36,002\n>> I know, I get to use my 1995 knowledge.\n\n1602\n01:10:36,002 --> 01:10:38,820\n>> [LAUGH]\n>> So, sometimes.\n\n1603\n01:10:41,750 --> 01:10:44,800\nI'm just gonna create\na quick HTML file here.\n\n1604\n01:10:44,800 --> 01:10:50,000\nAnd so we'll do some basic stuff.\n\n1605\n01:10:50,000 --> 01:10:50,960\n>> Hello world?\n\n1606\n01:10:50,960 --> 01:10:54,914\n[LAUGH] Isn't that the command you always,\nall those tutorials, you go online,\n\n1607\n01:10:54,914 --> 01:10:56,968\nit's the first thing you learn how to do.\n\n1608\n01:10:56,968 --> 01:10:57,610\n>> Hello world.\n\n1609\n01:10:58,790 --> 01:11:07,190\nAll right, so\nThis is the extent of my HTML knowledge.\n\n1610\n01:11:07,190 --> 01:11:08,760\nI'm just doing a little header tag.\n\n1611\n01:11:08,760 --> 01:11:14,190\nSo we go to this page in big bold black,\nwe should see this is ITProTV server one.\n\n1612\n01:11:14,190 --> 01:11:14,814\n>> Right.\n>> And\n\n1613\n01:11:14,814 --> 01:11:18,080\nthat way I'll know which\nserver I just hit.\n\n1614\n01:11:18,080 --> 01:11:19,960\nSo I'll just save that.\n\n1615\n01:11:19,960 --> 01:11:23,990\nAnd then, what I'll do is.\n\n1616\n01:11:23,990 --> 01:11:25,540\nI want to.\n\n1617\n01:11:25,540 --> 01:11:30,620\n>> If you rename that what,\ndefault, it should hit it, find it.\n\n1618\n01:11:30,620 --> 01:11:31,450\n>> Yeah, that's right, I'll try it.\n\n1619\n01:11:31,450 --> 01:11:34,434\nIf we-\n>> You can call it default or index and\n\n1620\n01:11:34,434 --> 01:11:35,710\nI think it'll hit at either one.\n\n1621\n01:11:35,710 --> 01:11:38,830\n>> To default.htm is what it wants right?\n\n1622\n01:11:38,830 --> 01:11:39,630\n>> I think so.\n\n1623\n01:11:39,630 --> 01:11:40,880\nI think either one will work.\n\n1624\n01:11:40,880 --> 01:11:43,210\n>> So, then I will modify that.\n\n1625\n01:11:43,210 --> 01:11:45,460\n>> My experience with,\nIAS is probably less than yours, though.\n\n1626\n01:11:45,460 --> 01:11:48,014\n[LAUGH]\n>> I'm gonna change this to say,\n\n1627\n01:11:48,014 --> 01:11:53,060\nserver two and I will save that as, and\nI'm gonna save it to the other server.\n\n1628\n01:11:54,810 --> 01:11:57,112\n>> What is that other\n>> SVR2?\n\n1629\n01:11:57,112 --> 01:11:59,252\n>> I don't remember the actual host name.\n\n1630\n01:11:59,252 --> 01:12:01,340\n>> 239\n>> I'm gonna go the lazy way.\n\n1631\n01:12:01,340 --> 01:12:04,090\n>> There we go.\n\n1632\n01:12:04,090 --> 01:12:05,420\nAnd so, I'm gonna save it over there.\n\n1633\n01:12:05,420 --> 01:12:10,049\nNow on the other server,\nI want it to actually say That it is\n\n1634\n01:12:10,049 --> 01:12:15,480\nthe other server, so\nI'll be able to recognize that there.\n\n1635\n01:12:15,480 --> 01:12:16,360\nOkay.\n\n1636\n01:12:16,360 --> 01:12:19,950\nSo now that we've got that stuff in place,\nit's still converging,\n\n1637\n01:12:19,950 --> 01:12:24,650\nif I fire up my web browser,\nI can browse to one server or\n\n1638\n01:12:24,650 --> 01:12:27,910\nthe other, and it'll tell me that so\nI'll know which one I'm looking at.\n\n1639\n01:12:27,910 --> 01:12:30,810\nSo if I browse by the individual IP,\n\n1640\n01:12:30,810 --> 01:12:35,275\nif it would stop loading MSN for\na second and let me.\n\n1641\n01:12:35,275 --> 01:12:38,120\n>> [LAUGH]\n>> Cuz I care about the latest in\n\n1642\n01:12:38,120 --> 01:12:40,220\ncelebrity news on my server.\n\n1643\n01:12:40,220 --> 01:12:43,015\nI still don't know why Microsoft sets\nthe homepage to MSN on your server.\n\n1644\n01:12:43,015 --> 01:12:47,660\nAll right, so I'm gonna browse\nstraight to the individual servers.\n\n1645\n01:12:47,660 --> 01:12:50,480\nSo just browsing to 238, that's server 1.\n\n1646\n01:12:50,480 --> 01:12:55,340\nIt still has it's own individual IP\naddress, and so when I browse to it I\n\n1647\n01:12:55,340 --> 01:12:59,630\nshould be presented with that webpage that\nI made, which was not anything special.\n\n1648\n01:12:59,630 --> 01:13:03,585\nJust in bold, it should say the sever\nname and it is taking too long.\n\n1649\n01:13:09,859 --> 01:13:12,410\nI did start IIS, didn't I?\n\n1650\n01:13:12,410 --> 01:13:15,437\n>> Mm, we installed it and\nit was running, yes.\n\n1651\n01:13:18,212 --> 01:13:19,152\n>> Huh.\n\n1652\n01:13:19,152 --> 01:13:21,720\nWell, goodness.\n\n1653\n01:13:21,720 --> 01:13:23,500\nThat might explain why\nwe're not refreshing.\n\n1654\n01:13:23,500 --> 01:13:26,990\nI wonder if our network adapter issue\nwas only solved for a brief moment.\n\n1655\n01:13:26,990 --> 01:13:28,330\n>> Yeah.\nI don't know what it is with those\n\n1656\n01:13:28,330 --> 01:13:28,860\nguys today.\n\n1657\n01:13:28,860 --> 01:13:31,348\nThey are undoing our settings,\nwhich is not a normal thing.\n\n1658\n01:13:31,348 --> 01:13:35,530\n>> It's always a good time,\njust make sure I can.\n\n1659\n01:13:35,530 --> 01:13:39,985\nWell, I'm still getting out,\nand I am still .238.\n\n1660\n01:13:39,985 --> 01:13:45,030\nAll right, for\nsome reason IIS is not answering me.\n\n1661\n01:13:45,030 --> 01:13:49,610\nNow, the other thing is, if I browse to,\nI did 238, that's my individual machine.\n\n1662\n01:13:49,610 --> 01:13:54,480\nIf I browse to the cluster address, right\nof 237, I should be hitting whatever note\n\n1663\n01:13:54,480 --> 01:13:57,670\nis active and I only showed one\nnote as active at this moment.\n\n1664\n01:13:57,670 --> 01:14:00,380\nSo we'll give that a second and\nyeah, it's just not-\n\n1665\n01:14:00,380 --> 01:14:01,360\n>> Should I just do On Local Host,\n\n1666\n01:14:01,360 --> 01:14:02,427\njust make sure you can get to the.\n\n1667\n01:14:07,459 --> 01:14:10,550\n>> IIS isn't, nope, there it was.\n\n1668\n01:14:10,550 --> 01:14:12,440\nSo I have some kind of name problem?\n\n1669\n01:14:12,440 --> 01:14:14,190\nSo that's what I expect to see, right?\n\n1670\n01:14:14,190 --> 01:14:16,620\nThat little webpage letting\nme know this is the server.\n\n1671\n01:14:16,620 --> 01:14:17,435\n>> Right.\n>> And\n\n1672\n01:14:17,435 --> 01:14:22,615\nif I browse to www.superwebsite.com,\nright?\n\n1673\n01:14:22,615 --> 01:14:24,035\nThat should resolve and\n\n1674\n01:14:24,035 --> 01:14:28,245\nI should get this IP where I get\nthe real internet site that is Windows.\n\n1675\n01:14:28,245 --> 01:14:30,576\n>> [LAUGH].\n>> So we'll get on or the other.\n\n1676\n01:14:34,546 --> 01:14:37,920\n>> I have trouble sometimes testing this\nout like you do the two different webpages\n\n1677\n01:14:37,920 --> 01:14:41,392\nand stuff, but because neither one of the\nservers really has a big workload on it,\n\n1678\n01:14:41,392 --> 01:14:43,530\nsometimes it doesn't switch you back and\nforth.\n\n1679\n01:14:43,530 --> 01:14:45,209\nIt's not like every other one.\n\n1680\n01:14:46,660 --> 01:14:48,070\n>> DNS didn't resolve for it.\n\n1681\n01:14:48,070 --> 01:14:52,145\nSee how it got no response\nfrom the web server?\n\n1682\n01:14:52,145 --> 01:14:53,700\nwww.superwebsite.com.\n\n1683\n01:14:53,700 --> 01:14:55,740\nBut I know I put it in there.\n\n1684\n01:14:55,740 --> 01:14:56,540\n>> It's actually showing.\n\n1685\n01:14:56,540 --> 01:14:57,170\nYou see there?\n\n1686\n01:14:57,170 --> 01:14:58,060\nNon authoritative.\n\n1687\n01:14:58,060 --> 01:14:59,320\nIt went out.\n\n1688\n01:14:59,320 --> 01:15:01,360\n>> Yeah, well, the old internet.\n\n1689\n01:15:01,360 --> 01:15:04,380\nSo, apparently I messed up DNS.\n\n1690\n01:15:04,380 --> 01:15:06,950\n>> All right, well I'll have to\nfigure out what I did wrong here,\n\n1691\n01:15:06,950 --> 01:15:08,750\ncuz this is just pleasant.\n\n1692\n01:15:08,750 --> 01:15:11,585\nAll right, so\nthrough the magic of television, right?\n\n1693\n01:15:11,585 --> 01:15:14,350\n>> [LAUGH]\n>> For some reason the cluster just was\n\n1694\n01:15:14,350 --> 01:15:15,620\nnot converging for us.\n\n1695\n01:15:16,810 --> 01:15:19,020\nVirtual network adapters,\nthings can get a little weird.\n\n1696\n01:15:19,020 --> 01:15:22,325\nSo what I did is, I did,\nI call it the last resort of IT.\n\n1697\n01:15:22,325 --> 01:15:23,420\n>> [LAUGH]\n>> I rebooted.\n\n1698\n01:15:23,420 --> 01:15:26,130\n>> It should be the first resort\nin most situations I think.\n\n1699\n01:15:26,130 --> 01:15:28,810\n>> Yeah.\n[LAUGH] So I rebooted the two VMs, and\n\n1700\n01:15:28,810 --> 01:15:30,940\nthey just sorted themselves\nout real quick like.\n\n1701\n01:15:30,940 --> 01:15:34,400\nSo when they came back up, they\nsynchronized and they're happy, right?\n\n1702\n01:15:34,400 --> 01:15:38,910\nSo I can see itpro.tv server 1 and\nserver 2 both have green boxes now,\n\n1703\n01:15:38,910 --> 01:15:41,440\nthey're happy, they're up and running.\n\n1704\n01:15:41,440 --> 01:15:43,740\nThings should be working, right?\n\n1705\n01:15:43,740 --> 01:15:51,198\nSo now that they're converged, both of\nthem are answering on 10.1.230.237 so\n\n1706\n01:15:51,198 --> 01:15:55,470\nif somebody tries to go to the IP, they're\ngoing to get one of these two guys.\n\n1707\n01:15:55,470 --> 01:15:56,200\nRight?\n\n1708\n01:15:56,200 --> 01:15:57,310\nAnd we can test that out.\n\n1709\n01:15:57,310 --> 01:15:58,760\nI'm gonna jump over to another machine.\n\n1710\n01:16:00,290 --> 01:16:02,406\nAnd this is the one I was testing from-\n>> [LAUGH]\n\n1711\n01:16:02,406 --> 01:16:04,318\n>> So I've got my various pings running.\n\n1712\n01:16:04,318 --> 01:16:06,770\nBut let me just fire up Internet Explorer.\n\n1713\n01:16:06,770 --> 01:16:09,325\nAnd I'm gonna start by browsing\nto the individual machines.\n\n1714\n01:16:09,325 --> 01:16:15,547\nIf I browse to http://10.1.230.238,\n\n1715\n01:16:15,547 --> 01:16:18,731\nthat's server number one.\n\n1716\n01:16:18,731 --> 01:16:21,971\nAnd I can see that server number\none gives me a webpage that says,\n\n1717\n01:16:21,971 --> 01:16:23,360\nthis is server number one.\n\n1718\n01:16:23,360 --> 01:16:23,978\n>> Right.\n\n1719\n01:16:23,978 --> 01:16:27,928\n>> And if I browse to server number two,\nright?\n\n1720\n01:16:27,928 --> 01:16:31,770\nI should get a web page that\nsays I'm on server number two.\n\n1721\n01:16:31,770 --> 01:16:35,590\nBut if I browse to 237,\nI don't know who I'm gonna get.\n\n1722\n01:16:35,590 --> 01:16:36,470\n>> It's a mystery.\n\n1723\n01:16:36,470 --> 01:16:37,520\nIt's a surprise.\n\n1724\n01:16:37,520 --> 01:16:41,100\n>> I'm gonna hit the cluster,\nand it's gonna load balance me.\n\n1725\n01:16:41,100 --> 01:16:43,830\nAnd I can see I ended up\non server number one.\n\n1726\n01:16:43,830 --> 01:16:45,469\n>> Nice.\n>> Okay, this time.\n\n1727\n01:16:45,469 --> 01:16:48,369\nNow over time, I might connect to\nserver number two or whatever, and\n\n1728\n01:16:48,369 --> 01:16:51,430\nin fact I tested during the break,\nand did connect to server number two.\n\n1729\n01:16:51,430 --> 01:16:53,620\n>> And you should be able to\nhit refresh a few times and\n\n1730\n01:16:53,620 --> 01:16:56,750\nyou might be able to see it flip back and\nforth now and again.\n\n1731\n01:16:56,750 --> 01:16:58,230\nAnd I've gone through\nsome Microsoft demos.\n\n1732\n01:16:58,230 --> 01:16:59,410\nThey're like hit refresh 20 times.\n\n1733\n01:16:59,410 --> 01:17:01,660\nAnd you'll see it flip back and forth.\n\n1734\n01:17:01,660 --> 01:17:04,820\nI will tell you that it never\nworks as neatly as they say.\n\n1735\n01:17:04,820 --> 01:17:07,740\n>> Well, I do know a way that we\ncan force it to happen, rIght?\n\n1736\n01:17:07,740 --> 01:17:10,260\nWhat we can do is we could do what's\ncalled draining a server, all right?\n\n1737\n01:17:10,260 --> 01:17:11,870\n>> And\nwe need to see those options anyway.\n\n1738\n01:17:11,870 --> 01:17:12,660\n>> Yeah.\n\n1739\n01:17:12,660 --> 01:17:17,310\nIf I want to do some maintenance on server\none, I can take it out of the cluster,\n\n1740\n01:17:17,310 --> 01:17:18,870\nnot completely out, right?\n\n1741\n01:17:18,870 --> 01:17:20,370\nWe do what's called draining it.\n\n1742\n01:17:20,370 --> 01:17:22,540\nDraining it is where you tell it hey,\n\n1743\n01:17:22,540 --> 01:17:27,510\nfinish any sessions that you got right\nnow, but don't accept any new sessions.\n\n1744\n01:17:27,510 --> 01:17:30,580\nSo if somebody tries to open up a new one,\ndon't take it,\n\n1745\n01:17:30,580 --> 01:17:32,740\nlet somebody else handle it, all right.\n\n1746\n01:17:32,740 --> 01:17:35,820\nSo what you do is back on your server,\nyou say,\n\n1747\n01:17:35,820 --> 01:17:38,830\nall right I'm gonna do some\nmaintenance on server number one.\n\n1748\n01:17:38,830 --> 01:17:43,880\nAnd, so you right click on it and you'll\nsee Control Host and you can stop it.\n\n1749\n01:17:43,880 --> 01:17:47,115\nThat'll stop it right now,\nforget who's connected to it, right?\n\n1750\n01:17:47,115 --> 01:17:48,060\n>> [LAUGH] So, sorry.\n\n1751\n01:17:48,060 --> 01:17:49,070\nYou lose.\n[LAUGH]\n\n1752\n01:17:49,070 --> 01:17:51,440\n>> Or, you can do a drainstop.\n\n1753\n01:17:51,440 --> 01:17:55,040\nAnd drainstop says, go ahead and\nlet people finish what they were doing,\n\n1754\n01:17:55,040 --> 01:17:57,060\nif they have an existing session.\n\n1755\n01:17:57,060 --> 01:17:59,080\nBut once they're done,\ndon't accept any new ones.\n\n1756\n01:17:59,080 --> 01:18:01,740\nSo I'm going to go ahead and\ndrainstop number one.\n\n1757\n01:18:01,740 --> 01:18:03,480\nSee how number one turned yellow?\n\n1758\n01:18:03,480 --> 01:18:06,028\nAnd so\nright now it's in a drainstop status and\n\n1759\n01:18:06,028 --> 01:18:10,870\ndown here I can see the operation result\nin a new convergence is happening, okay?\n\n1760\n01:18:10,870 --> 01:18:12,390\nSo it's gotta reconverge, and\n\n1761\n01:18:12,390 --> 01:18:16,130\nI can see my status is pending while\nit goes to drainstop, all right?\n\n1762\n01:18:16,130 --> 01:18:18,670\nSo now my other host, if they try and\n\n1763\n01:18:18,670 --> 01:18:21,500\nconnect, should start being\nredirected to the other side.\n\n1764\n01:18:21,500 --> 01:18:23,950\n>> You should still be connected to him.\n\n1765\n01:18:23,950 --> 01:18:26,100\n>> Yeah, I am gonna have\nan existing connection, aren't I?\n\n1766\n01:18:26,100 --> 01:18:27,600\nSo let me, that's good to close that.\n\n1767\n01:18:27,600 --> 01:18:28,930\nAnd then-\n>> And\n\n1768\n01:18:28,930 --> 01:18:30,740\nthen once that person\nloses that connection,\n\n1769\n01:18:30,740 --> 01:18:35,050\nonce they end that connection, now we\nwon't let any new connections back to it.\n\n1770\n01:18:35,050 --> 01:18:38,115\n>> Yep, so when I go here and\nit's still drainstopping, shoot.\n\n1771\n01:18:38,115 --> 01:18:39,600\n>> [LAUGH]\n>> So, you know what I should have\n\n1772\n01:18:39,600 --> 01:18:40,460\ndone instead of a drainstop?\n\n1773\n01:18:40,460 --> 01:18:41,930\nI should have just outright stopped it.\n\n1774\n01:18:41,930 --> 01:18:42,890\n>> You just stop it, yeah.\n\n1775\n01:18:42,890 --> 01:18:43,730\n>> Cuz now we have to wait.\n\n1776\n01:18:43,730 --> 01:18:44,810\n>> Right.\n>> We have to wait for\n\n1777\n01:18:44,810 --> 01:18:46,170\nmy session to time out.\n\n1778\n01:18:46,170 --> 01:18:49,690\nTCP sessions can take five minutes\nif you're doing absolutely nothing,\n\n1779\n01:18:49,690 --> 01:18:51,475\nbut here I've triggered it,\nso I've reset it.\n\n1780\n01:18:51,475 --> 01:18:54,480\n>> [LAUGH]\n>> So yeah, so it could stay for a while.\n\n1781\n01:18:54,480 --> 01:18:56,790\nIf I just stopped it that\nwould've forced it along.\n\n1782\n01:18:56,790 --> 01:18:58,500\nAnd you know, my status is still pending.\n\n1783\n01:18:58,500 --> 01:19:01,550\n>> Try refreshing that thing, it's gotta\nbe done, unless we're hung up again.\n\n1784\n01:19:01,550 --> 01:19:02,300\n>> Oh, there it is.\n\n1785\n01:19:02,300 --> 01:19:02,800\n>> Oh, there we go.\n\n1786\n01:19:02,800 --> 01:19:08,950\n>> So it says that it stopped and since\nit says that it stopped, it's stopping.\n\n1787\n01:19:08,950 --> 01:19:10,890\nIt's actually stopped.\n\n1788\n01:19:10,890 --> 01:19:11,530\nSo it's done.\n\n1789\n01:19:11,530 --> 01:19:12,840\nIt's dead in the water.\n\n1790\n01:19:12,840 --> 01:19:14,880\nIt shouldn't be handling\nany more sessions.\n\n1791\n01:19:15,940 --> 01:19:17,850\n>> Right.\n>> And so at that point assuming that-\n\n1792\n01:19:17,850 --> 01:19:18,470\n>> I still see one might be\n\n1793\n01:19:18,470 --> 01:19:19,300\ncaching something so.\n\n1794\n01:19:19,300 --> 01:19:21,310\n>> Oh, wouldn't that be pleasant?\n\n1795\n01:19:21,310 --> 01:19:22,760\n>> Yeah.\n>> It's never easy is it?\n\n1796\n01:19:22,760 --> 01:19:23,740\n>> I know.\n>> So, all right, let me-\n\n1797\n01:19:23,740 --> 01:19:24,730\n>> I mean, all these things that make\n\n1798\n01:19:24,730 --> 01:19:26,570\nit easier and\nmore convenient for users and\n\n1799\n01:19:26,570 --> 01:19:30,085\nstuff like that really make it difficult\nsometime to show you what's going on.\n\n1800\n01:19:30,085 --> 01:19:31,437\n>> [LAUGH] I wanna show you failure.\n\n1801\n01:19:31,437 --> 01:19:33,180\n>> [LAUGH]\n>> Why are you not letting me fail?\n\n1802\n01:19:33,180 --> 01:19:35,410\nAll right, so I'm go into internet\noptions, just clear my cache and\n\n1803\n01:19:35,410 --> 01:19:39,540\nmake sure I'm getting a nice-\n>> Oops.\n\n1804\n01:19:39,540 --> 01:19:41,310\n>> It doesn't help that I can't type.\n\n1805\n01:19:41,310 --> 01:19:41,835\nBut-\n>> [LAUGH]\n\n1806\n01:19:41,835 --> 01:19:42,920\n>> All right, so I'm gonna go into\n\n1807\n01:19:42,920 --> 01:19:45,550\ninternet options here and just kinda\nclear out my temporary internet files and\n\n1808\n01:19:45,550 --> 01:19:48,320\nstuff and that way I make sure\nI get a good clean connection.\n\n1809\n01:19:48,320 --> 01:19:49,898\nWhere is that content?\n\n1810\n01:19:49,898 --> 01:19:50,450\nNope.\n\n1811\n01:19:50,450 --> 01:19:52,827\nSecurity?\nPrivacy.\n\n1812\n01:19:52,827 --> 01:19:54,746\n>> Privacy.\n\n1813\n01:19:54,746 --> 01:19:55,300\n>> No.\n\n1814\n01:19:55,300 --> 01:19:57,945\nWhere the heck do you delete junk from?\n\n1815\n01:19:57,945 --> 01:19:59,955\nOh, it was on the very first screen,\nI just moved away.\n\n1816\n01:19:59,955 --> 01:20:00,901\n>> [LAUGH]\n>> All right, so\n\n1817\n01:20:00,901 --> 01:20:03,027\nlet me just wipe all that out and\nthen we'll start again.\n\n1818\n01:20:05,977 --> 01:20:07,665\nHow many cookies did this thing have?\n\n1819\n01:20:07,665 --> 01:20:08,275\n[LAUGH]\n>> Oh, I was up for\n\n1820\n01:20:08,275 --> 01:20:09,258\nthis weekend doing a little surfing.\n\n1821\n01:20:09,258 --> 01:20:10,298\n>> [LAUGH] Nice.\n\n1822\n01:20:10,298 --> 01:20:11,008\nAll right, there we go.\n\n1823\n01:20:11,008 --> 01:20:11,838\nSo it's nice and clear.\n\n1824\n01:20:11,838 --> 01:20:18,945\nSo now I'm just gonna fire this up and\nI'm gonna browse To 10.1.230.237, and\n\n1825\n01:20:18,945 --> 01:20:25,237\nwhen I browse to that site, sorry, I used\na Mac shortcut instead of the real one.\n\n1826\n01:20:25,237 --> 01:20:26,430\n[LAUGH].\n\n1827\n01:20:26,430 --> 01:20:30,280\nThere we go, now I can see,\nI was getting server one before.\n\n1828\n01:20:30,280 --> 01:20:31,940\nNow I'm getting server number two.\n\n1829\n01:20:31,940 --> 01:20:35,110\nAs an end user, I see the same IP or\nthe same host name,\n\n1830\n01:20:35,110 --> 01:20:37,780\nI don't really there is something\ndifferent going on in the back end.\n\n1831\n01:20:37,780 --> 01:20:39,860\nBut NLB side takes care of it.\n\n1832\n01:20:39,860 --> 01:20:42,310\nServer one wasn't available,\nserver two answered the call.\n\n1833\n01:20:42,310 --> 01:20:45,090\n>> And obviously goes without saying,\nright, but we changed\n\n1834\n01:20:45,090 --> 01:20:48,270\nthe content of the two web servers so\nthat we could see the difference.\n\n1835\n01:20:48,270 --> 01:20:51,750\nIn the real world we want the same\ncontent on all the nodes that are part of\n\n1836\n01:20:51,750 --> 01:20:52,380\nthat cluster, right?\n\n1837\n01:20:52,380 --> 01:20:55,023\nSo, to do again, you couldn't tell\nwhich node you're connected to.\n\n1838\n01:20:55,023 --> 01:20:55,596\n>> Right.\nAnd\n\n1839\n01:20:55,596 --> 01:20:58,430\nthat is the biggest shortcoming of NLB.\n\n1840\n01:20:58,430 --> 01:21:02,040\nIs it does not do any data\nsynchronization for you.\n\n1841\n01:21:02,040 --> 01:21:05,220\nSo, you need to find some way to\nsynchronize the content between\n\n1842\n01:21:05,220 --> 01:21:06,240\nthe two servers.\n\n1843\n01:21:06,240 --> 01:21:08,930\nIf it's a website,\nany time you make a change to one,\n\n1844\n01:21:08,930 --> 01:21:11,100\nyou need to make it to\nthe other nodes also.\n\n1845\n01:21:11,100 --> 01:21:14,110\n>> iOS does have a shared\nconfiguration that you can do.\n\n1846\n01:21:14,110 --> 01:21:17,570\nBut, again, that's something\ncompletely outside of the NLB stuff.\n\n1847\n01:21:17,570 --> 01:21:19,912\nSo if it was some other type,\nyou've gotta be responsible for\n\n1848\n01:21:19,912 --> 01:21:21,092\nsynchronizing that content.\n\n1849\n01:21:21,092 --> 01:21:22,240\n>> Yep.\n\n1850\n01:21:22,240 --> 01:21:25,235\nSo here I've taken server one offline so\nI do my maintenance, right?\n\n1851\n01:21:25,235 --> 01:21:28,398\nI do my Windows updates,\nI reboot it whatever, and\n\n1852\n01:21:28,398 --> 01:21:31,486\nwhen I'm done I can just\ngot right back into here,\n\n1853\n01:21:31,486 --> 01:21:35,480\nI can start that host back up and\nit's gonna rejoin the cluster.\n\n1854\n01:21:35,480 --> 01:21:38,963\nAnd as soon as it's determined it's\nhealthy, it will become active again and\n\n1855\n01:21:38,963 --> 01:21:40,408\nstart accepting connections.\n\n1856\n01:21:40,408 --> 01:21:42,700\nSo pretty cool.\n\n1857\n01:21:42,700 --> 01:21:45,940\nNot very difficult, we had two different\nproblems during the setup here,\n\n1858\n01:21:45,940 --> 01:21:48,610\nboth of them related to\nHyper V's network adapters.\n\n1859\n01:21:48,610 --> 01:21:51,260\n>> You're not normally gonna load\nbalance across VMs anyway, so\n\n1860\n01:21:51,260 --> 01:21:53,540\nthat's not something you\nreally see in real life.\n\n1861\n01:21:53,540 --> 01:21:56,640\nAnd a hardware solution,\nit's considerably easier.\n\n1862\n01:21:56,640 --> 01:21:57,389\nCouple of words of advice.\n\n1863\n01:21:57,389 --> 01:21:59,172\nNumber one, make sure well,\n\n1864\n01:21:59,172 --> 01:22:02,561\nthe recommended configuration\nis to have two network adapters.\n\n1865\n01:22:02,561 --> 01:22:04,890\nSo make sure you have\ntwo network adapters.\n\n1866\n01:22:04,890 --> 01:22:06,380\nIf you only have one, it works.\n\n1867\n01:22:06,380 --> 01:22:07,800\nI did it with one right here.\n\n1868\n01:22:07,800 --> 01:22:09,770\nBut Microsoft recommends two on the exam.\n\n1869\n01:22:09,770 --> 01:22:11,230\nYou'll see two.\n\n1870\n01:22:11,230 --> 01:22:15,140\nOne for management, one for\nactually load balancing.\n\n1871\n01:22:15,140 --> 01:22:16,020\nAll right?\nOtherwise,\n\n1872\n01:22:16,020 --> 01:22:17,380\nthe other thing is just monitor it.\n\n1873\n01:22:17,380 --> 01:22:18,300\nRight?\nKeep an eye on it,\n\n1874\n01:22:18,300 --> 01:22:20,950\nbecause you can have servers drop out and\nyou don't even notice.\n\n1875\n01:22:20,950 --> 01:22:21,450\nRight.\n\n1876\n01:22:21,450 --> 01:22:22,050\nCuz the website's still up.\n\n1877\n01:22:22,050 --> 01:22:24,372\n>> Cuz they're still able\nto access the webpage.\n\n1878\n01:22:24,372 --> 01:22:27,549\n>> So that's why I was telling Mike\na story before this show how I, whenever I\n\n1879\n01:22:27,549 --> 01:22:31,050\nworked in the company that had this, this\nwas one of the first tools I'd fire up.\n\n1880\n01:22:31,050 --> 01:22:33,460\nI'd fire it up, move it off to\none of my extra monitors, and\n\n1881\n01:22:33,460 --> 01:22:37,600\nI'd keep it up throughout the day just so\nI could keep tabs on the environment,\n\n1882\n01:22:37,600 --> 01:22:38,630\nand Sure enough, Mike.\n\n1883\n01:22:38,630 --> 01:22:42,020\nIt didn't refresh on its own there,\nI had to refresh it.\n\n1884\n01:22:42,020 --> 01:22:44,580\nSo now my cluster's up and happy.\n\n1885\n01:22:44,580 --> 01:22:45,510\nCool things here.\n\n1886\n01:22:45,510 --> 01:22:46,850\nIt was built into Windows.\n\n1887\n01:22:46,850 --> 01:22:48,860\nI didn't have to install anything crazy.\n\n1888\n01:22:48,860 --> 01:22:52,670\nNo special hardware requirements,\nI didn't have to have a [INAUDIBLE] or\n\n1889\n01:22:52,670 --> 01:22:56,080\nshared storage, it's all just\nkind of built in and off it goes.\n\n1890\n01:22:56,080 --> 01:22:57,962\nIt's really, really cool stuff.\n\n1891\n01:22:57,962 --> 01:23:00,226\nAll right, Mike, can you think of\nanything else we should mention on NLB?\n\n1892\n01:23:00,226 --> 01:23:01,770\n>> No,\nwe're gonna throw the notes up there.\n\n1893\n01:23:01,770 --> 01:23:05,609\nWe gonna include some powerstroke commands\nbecause everything is important that you\n\n1894\n01:23:05,609 --> 01:23:09,950\nknow that you're familiar with a list of\ncouple of creating the new cluster itself.\n\n1895\n01:23:09,950 --> 01:23:11,330\nNew-N will be cluster.\n\n1896\n01:23:11,330 --> 01:23:13,810\nAnd then add-N will be cluster node.\n\n1897\n01:23:13,810 --> 01:23:17,116\nTake a look at those and take a look\nat the switches that go with them,\n\n1898\n01:23:17,116 --> 01:23:20,654\nlike dash operation mode to set your\nmulti-cast, or your uni-cast and\n\n1899\n01:23:20,654 --> 01:23:23,847\nthings like that, and\nwe'll put those in the next one, I guess.\n\n1900\n01:23:23,847 --> 01:23:25,400\n>> Cool.\n\n1901\n01:23:25,400 --> 01:23:26,760\nAll right, well,\nI hope you guys enjoyed the show.\n\n1902\n01:23:26,760 --> 01:23:30,001\nLet me just remind you,\nif you have any questions on this stuff,\n\n1903\n01:23:30,001 --> 01:23:32,776\nlive during the show,\nyou can go to Itpro.tv/live.\n\n1904\n01:23:32,776 --> 01:23:34,690\nYou'll see our chat room\nright beneath the video.\n\n1905\n01:23:34,690 --> 01:23:36,320\nYou can post your questions there.\n\n1906\n01:23:36,320 --> 01:23:38,250\nWe monitor and answer during the show.\n\n1907\n01:23:38,250 --> 01:23:39,910\nAlso if you have questions afterwards,\n\n1908\n01:23:39,910 --> 01:23:43,690\nif you're watching this recorded, you\ncan go to the Q&A forums on our website.\n\n1909\n01:23:43,690 --> 01:23:47,420\nAt the top of every page on itpro.tv\nyou will see a link that says, Q&A,\n\n1910\n01:23:47,420 --> 01:23:49,930\nit will take you to\nthe question answer area.\n\n1911\n01:23:49,930 --> 01:23:50,928\nPost your questions there.\n\n1912\n01:23:50,928 --> 01:23:52,461\nAgain, we monitor and answer.\n\n1913\n01:23:52,461 --> 01:23:53,367\n>> We do.\n\n1914\n01:23:53,367 --> 01:23:55,783\n>> All right.\nWell, I hope you guys enjoyed the show.\n\n1915\n01:23:55,783 --> 01:23:58,000\nSigning off from ITProTV, I'm Don Pezet.\n\n1916\n01:23:58,000 --> 01:23:58,823\n>> And I'm Mike Rodrick.\n\n1917\n01:23:58,823 --> 01:24:00,681\n>> And we will see you next time.\n\n1918\n01:24:00,681 --> 01:24:10,681\n[MUSIC]\n\n1919\n01:24:12,301 --> 01:24:18,630\n[SOUND]\n\n",
          "vimeoId": "97820136"
        },
        {
          "description": "In this episode Mike and Don continue their discussion on high availability. They dive into the world of failover clustering. They install and configure failover clustering and create a highly available file server. They also discuss the different quorum options that are available in 2012 R2 as well as Cluster-Aware Updating.",
          "length": "4481",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/002-Failover-Services.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/002-Failover-Services-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/002-Failover-Services-sm.jpg",
          "title": "Failover Services",
          "transcript": "1\n00:00:00,311 --> 00:00:06,975\n[SOUND]\n\n2\n00:00:06,975 --> 00:00:11,404\n[MUSIC]\n\n3\n00:00:11,404 --> 00:00:13,821\n[SOUND]\n\n4\n00:00:13,821 --> 00:00:23,821\n[MUSIC]\n\n5\n00:00:33,591 --> 00:00:37,617\nAll right, good morning, good afternoon,\nand good evening, and welcome back to\n\n6\n00:00:37,617 --> 00:00:41,370\nanother episode of IT Pro TV, I'm your\nhost Don Pezet and Mr. Mike Rodrick.\n\n7\n00:00:41,370 --> 00:00:41,940\nHow's it going Mike?\n\n8\n00:00:41,940 --> 00:00:43,100\n>> Fantastic, you doing?\n\n9\n00:00:43,100 --> 00:00:44,560\n>> I'm doing swell.\n\n10\n00:00:44,560 --> 00:00:46,240\n>> Yeah.\n>> We've got a fun episode ahead of us.\n\n11\n00:00:46,240 --> 00:00:49,570\n>> We do, or high availability.\n\n12\n00:00:49,570 --> 00:00:53,860\n>> Absolutely, we started high\navailability talking about network\n\n13\n00:00:53,860 --> 00:00:58,550\nload balancing, which was cool, but\nthere were some little shortcomings to it.\n\n14\n00:00:58,550 --> 00:01:00,180\n>> Yeah.\n>> Like the fact that it didnt synchronise\n\n15\n00:01:00,180 --> 00:01:02,590\ndata between nodes and-\n>> Right.\n\n16\n00:01:02,590 --> 00:01:04,805\n>> But easy, cheap, fast to get it set up.\n\n17\n00:01:04,805 --> 00:01:06,200\n>> Mm-hm.\n>> And it does what we need it to do for\n\n18\n00:01:06,200 --> 00:01:07,110\ncertain situations.\n\n19\n00:01:07,110 --> 00:01:08,520\n>> But\ntoday we're gonna break out the big guns.\n\n20\n00:01:08,520 --> 00:01:09,310\n>> Yeah, we are.\n>> Right?\n\n21\n00:01:09,310 --> 00:01:13,210\nWe're gonna take a look at what's called\nfailover clustering, and failover\n\n22\n00:01:13,210 --> 00:01:17,655\nclustering is a function of Windows that's\ndesigned to have more than one server, and\n\n23\n00:01:17,655 --> 00:01:21,435\nif a server fails,\nall of your functions, your services,\n\n24\n00:01:21,435 --> 00:01:24,825\nwhatever, can jump over to\nanother set of hardware, and\n\n25\n00:01:24,825 --> 00:01:29,775\nhopefully do it live while people are in\nthe system and have them not even notice.\n\n26\n00:01:29,775 --> 00:01:30,975\n>> That's the impressive part.\n\n27\n00:01:30,975 --> 00:01:34,025\nLose a ping or two and just,\nthey don't even know what's going on.\n\n28\n00:01:34,025 --> 00:01:35,475\n>> Yeah, and\nusually it's just like that, right?\n\n29\n00:01:35,475 --> 00:01:38,110\nJust maybe one or\ntwo pings A couple of seconds.\n\n30\n00:01:38,110 --> 00:01:38,890\n>> Yup.\n\n31\n00:01:38,890 --> 00:01:39,900\n>> So very, very fast.\n\n32\n00:01:39,900 --> 00:01:40,725\nVery, very cool.\n\n33\n00:01:40,725 --> 00:01:41,670\n>> Mm-hm.\n\n34\n00:01:41,670 --> 00:01:43,460\n>> Little bit on\nthe expensive side though.\n\n35\n00:01:43,460 --> 00:01:46,270\n>> Yeah.\n>> Because to do true failover clustering,\n\n36\n00:01:46,270 --> 00:01:47,495\nthere's some hardware requirements.\n\n37\n00:01:47,495 --> 00:01:48,520\n>> Mm-hm\n>> We have to meet,\n\n38\n00:01:48,520 --> 00:01:49,715\nit's specific requirements, too.\n\n39\n00:01:49,715 --> 00:01:50,890\n>> Mm-hm.\n\n40\n00:01:50,890 --> 00:01:52,860\nSo before we jump in to configuring it,\n\n41\n00:01:52,860 --> 00:01:56,000\nI do want to take a look at\nMicrosoft's configuration page.\n\n42\n00:01:56,000 --> 00:01:57,465\nThey have it on the, the tech nav site.\n\n43\n00:01:57,465 --> 00:01:58,210\n>> Mm-hm.\n\n44\n00:01:58,210 --> 00:02:01,630\n>> Because there, there's a few little\ncaveats I want to point out, alright.\n\n45\n00:02:01,630 --> 00:02:05,220\nI guess before we jump too far, you know,\nwhat, what is clustering, right.\n\n46\n00:02:05,220 --> 00:02:06,950\n>> Yeah, you have one of\nthose pretty diagrams for us?\n\n47\n00:02:06,950 --> 00:02:08,090\n>> Yeah, well, you know what I'm gonna do,\n\n48\n00:02:08,090 --> 00:02:11,320\nI'm gonna take the,\n>> The one that we did for network\n\n49\n00:02:11,320 --> 00:02:14,210\nload balancing, and I'm just gonna modify\nit a bit to kinda show our clusterings.\n\n50\n00:02:14,210 --> 00:02:16,490\nSo let's, oh, I probably need\nto share my screen, though.\n\n51\n00:02:16,490 --> 00:02:18,540\nWe're not gonna get too far without that,\nwill we?\n\n52\n00:02:18,540 --> 00:02:19,715\n>> I can see it if I peek over here.\n\n53\n00:02:19,715 --> 00:02:21,310\n>> [LAUGH]\n>> It looks really nice guys.\n\n54\n00:02:21,310 --> 00:02:24,980\n>> Well, as long as you can see it,\nMike, yeah then everybody else.\n\n55\n00:02:24,980 --> 00:02:26,250\nThere we go.\n\n56\n00:02:26,250 --> 00:02:31,380\n>> All right, so\nthis is going to be fail over clustering.\n\n57\n00:02:31,380 --> 00:02:34,100\nAll right, so in our last episode\nwe talked about network load\n\n58\n00:02:34,100 --> 00:02:34,730\nbalancing\n>> Mm-hm.\n\n59\n00:02:34,730 --> 00:02:38,770\n>> And we talked about how we have a\nvirtual IP that's shared between machines\n\n60\n00:02:38,770 --> 00:02:40,590\nand, and traffic is balanced across them.\n\n61\n00:02:40,590 --> 00:02:43,100\n>> Right.\n>> All right, well\n\n62\n00:02:43,100 --> 00:02:45,200\nthe nice thing about this\nwas users could connect,\n\n63\n00:02:45,200 --> 00:02:48,925\nthey could connect to anybody in that\n>> In that node, or cluster.\n\n64\n00:02:48,925 --> 00:02:49,440\n>> Hm-hm.\n\n65\n00:02:49,440 --> 00:02:51,490\n>> So there, it,\nit could be up to 32 nodes.\n\n66\n00:02:51,490 --> 00:02:53,860\n>> Right.\n>> All of them were active\n\n67\n00:02:53,860 --> 00:02:56,320\nin servicing there.\n\n68\n00:02:56,320 --> 00:02:56,980\n>> Right.\n\n69\n00:02:56,980 --> 00:02:59,460\n>> But,\nif a user was connected to one server and\n\n70\n00:02:59,460 --> 00:03:01,275\nthey were in the middle\nof doing something.\n\n71\n00:03:01,275 --> 00:03:01,820\n>> Hm-hm.\n\n72\n00:03:01,820 --> 00:03:05,880\n>> And that server failed, they would\nget shifted over to a new server.\n\n73\n00:03:05,880 --> 00:03:08,010\n>> Well, whatever is in ram would be lost.\n\n74\n00:03:09,020 --> 00:03:10,160\nWindows load balancing or\n\n75\n00:03:10,160 --> 00:03:13,620\nnetwork load balancing does not\nsynchronize memory between the nodes.\n\n76\n00:03:13,620 --> 00:03:16,460\nIt doesn't even synchronize the files,\nit's up to us to do that.\n\n77\n00:03:16,460 --> 00:03:20,890\nSo, it gives us basic load balancing but\nnot a lot of functionality.\n\n78\n00:03:21,920 --> 00:03:24,160\n>> If we do clustering on the other hand.\n\n79\n00:03:24,160 --> 00:03:24,760\n>> Right.\n\n80\n00:03:24,760 --> 00:03:27,710\n>> Clustering synchronizes\nall sorts of things.\n\n81\n00:03:27,710 --> 00:03:29,370\n>> Yeah,\ncuz you're really using shared storage.\n\n82\n00:03:29,370 --> 00:03:31,510\nSo, when you write from, it doesn't\nmatter which node you're writing from,\n\n83\n00:03:31,510 --> 00:03:32,660\nyou're writing to the same location.\n\n84\n00:03:32,660 --> 00:03:35,455\n>> Yeah, so no more having to\nsynchronize data between nodes.\n\n85\n00:03:35,455 --> 00:03:36,000\n>> Mm-hm.\n\n86\n00:03:36,000 --> 00:03:39,380\nAnd if a user is half way through\nsomething on one server, and\n\n87\n00:03:39,380 --> 00:03:42,830\na fail over happens, well, now their\nhalf way through it on the other server.\n\n88\n00:03:42,830 --> 00:03:44,120\nIt resumes the session and\n\n89\n00:03:44,120 --> 00:03:47,680\nit's designed to be completely\ninvisible to the end user.\n\n90\n00:03:48,750 --> 00:03:52,220\nNetwork load balancing,\nit's invisible to most users, right.\n\n91\n00:03:52,220 --> 00:03:53,695\nClustering is invisible to all of them.\n\n92\n00:03:53,695 --> 00:03:55,000\n[INAUDIBLE]\n>> I guess the only thing we don't\n\n93\n00:03:55,000 --> 00:03:56,450\nget with the cluster,\nwe don't get the scalability,\n\n94\n00:03:56,450 --> 00:03:59,900\nbecause you still just have the one\nnode actually performing the job.\n\n95\n00:03:59,900 --> 00:04:04,330\nSo you get that high availability but not\nthe scalability, whereas NOB gives us both\n\n96\n00:04:04,330 --> 00:04:07,880\nscalability and availability,\nand it's a big trade off, right?\n\n97\n00:04:07,880 --> 00:04:13,080\nIn a cluster, even with multiple nodes,\nyou really have one node that's active.\n\n98\n00:04:13,080 --> 00:04:15,970\nAnd I'll talk a little bit\nlater about how to kind of work\n\n99\n00:04:15,970 --> 00:04:18,160\naround that to get more\nfunctionality out of it.\n\n100\n00:04:18,160 --> 00:04:22,251\nBut just at the basics,\nif you have a two node cluster,\n\n101\n00:04:22,251 --> 00:04:26,620\none node is doing work, the other node\nis sitting there waiting For failure.\n\n102\n00:04:26,620 --> 00:04:27,140\n>> Right.\n\n103\n00:04:27,140 --> 00:04:30,660\n>> That way when failure does happen,\nit can jump right in and get to work.\n\n104\n00:04:30,660 --> 00:04:33,310\nNow, we could have up to\neight nodes in a cluster.\n\n105\n00:04:33,310 --> 00:04:34,170\nDid they bump that up?\n\n106\n00:04:34,170 --> 00:04:36,250\n>> Gosh, I hope, I say, 64?\n\n107\n00:04:36,250 --> 00:04:37,360\n>> Okay, then they've gone up.\n\n108\n00:04:37,360 --> 00:04:38,750\n>> Yeah,\nthey have definitely changed that.\n\n109\n00:04:38,750 --> 00:04:42,010\n>> So we, we can have quite a few\nnodes inside of the cluster.\n\n110\n00:04:42,010 --> 00:04:44,245\nIf only one's active,\nwhy do we need all those other nodes?\n\n111\n00:04:44,245 --> 00:04:46,340\n>> Hm-hm.\n>> Well, we can make different nodes\n\n112\n00:04:46,340 --> 00:04:47,190\n>> Active for\n\n113\n00:04:47,190 --> 00:04:48,850\ndifferent elements of the cluster.\n\n114\n00:04:48,850 --> 00:04:50,640\n>> Right.\n>> So we can get them doing more\n\n115\n00:04:50,640 --> 00:04:51,220\nthan one thing.\n\n116\n00:04:51,220 --> 00:04:54,260\nMike's looking up the maximum\nnumber of those right now.\n\n117\n00:04:54,260 --> 00:04:59,450\nSo, the way that clustering works is we\nhave two servers just like before and\n\n118\n00:04:59,450 --> 00:05:05,200\nwe have a shared IP just like before,\nthe difference being the shared IP\n\n119\n00:05:05,200 --> 00:05:09,060\nwill only be attached to one host.\n\n120\n00:05:09,060 --> 00:05:11,840\nIt won't actually be\nattached to two of them.\n\n121\n00:05:11,840 --> 00:05:16,410\nIt's just attached to one, and that's\nthe one that's answering to that IP.\n\n122\n00:05:16,410 --> 00:05:20,820\nThe other server is aware of that IP, so\n\n123\n00:05:20,820 --> 00:05:25,440\nserver two would know that that IP existed\nBut it's not going to answer to it.\n\n124\n00:05:25,440 --> 00:05:28,710\nJust the active node answers to it.\n\n125\n00:05:28,710 --> 00:05:30,420\nAnd if there's a failure,\n\n126\n00:05:30,420 --> 00:05:32,470\nthen server two will take over that IP\n>> Mm-hm\n\n127\n00:05:32,470 --> 00:05:34,430\n>> And start to respond to it.\n\n128\n00:05:34,430 --> 00:05:38,295\nOn the back end Let me move\nall this down a bit here.\n\n129\n00:05:38,295 --> 00:05:39,235\n>> Yeah.\n\n130\n00:05:39,235 --> 00:05:43,715\n>> On the back end, we have shared\nstorage, and that shared storage normally\n\n131\n00:05:43,715 --> 00:05:47,280\ntakes the form of like a SAN,\na storage area network.\n\n132\n00:05:47,280 --> 00:05:47,875\n>> Mm-hm.\n\n133\n00:05:47,875 --> 00:05:50,250\n>> And that SAN\n>> That's sitting back there.\n\n134\n00:05:50,250 --> 00:05:54,100\nYou know it might be piles of disks,\nright?\n\n135\n00:05:54,100 --> 00:05:56,230\nYou just never known with a SAN.\n\n136\n00:05:56,230 --> 00:05:59,590\nSo, this is all running inside of\nsome kind of storage network and\n\n137\n00:05:59,590 --> 00:06:04,670\nit's sitting back there all happy and\ngo lucky and the servers connect to it.\n\n138\n00:06:04,670 --> 00:06:07,930\nWell, both servers are going\nto connect to that SAN, so\n\n139\n00:06:07,930 --> 00:06:12,240\nwe're gonna have a connection\nConnection from, we'll go orange.\n\n140\n00:06:12,240 --> 00:06:16,239\nSo we're gonna have a connection\nfrom this server to there, and\n\n141\n00:06:16,239 --> 00:06:19,510\nwe'll have a connection\nfrom this server to there.\n\n142\n00:06:19,510 --> 00:06:22,090\nThey're both connected to\nthe same set of storage.\n\n143\n00:06:22,090 --> 00:06:23,895\nThat's the shared storage\nMike was talking about.\n\n144\n00:06:23,895 --> 00:06:24,700\n>> Mm-hm.\n\n145\n00:06:24,700 --> 00:06:28,490\n>> So if I have a resource\nlike a file server, right?\n\n146\n00:06:28,490 --> 00:06:30,850\nAnd I've got files stored on the SAN, and\n\n147\n00:06:30,850 --> 00:06:33,570\nthis server is serving them\nup to all of our clients.\n\n148\n00:06:33,570 --> 00:06:34,760\nOur clients connect to one IP.\n\n149\n00:06:34,760 --> 00:06:35,340\n>> Right.\n\n150\n00:06:35,340 --> 00:06:37,370\n>> The IP is connected to this server.\n\n151\n00:06:37,370 --> 00:06:39,560\nThis server can access the SAN.\n\n152\n00:06:39,560 --> 00:06:45,084\nIf a failure happens or\nif I initiate fail over, the IP will\n\n153\n00:06:45,084 --> 00:06:49,460\nmove to this other server,\nif I can click on it, there we go.\n\n154\n00:06:50,610 --> 00:06:54,630\nIt will move over to the other server,\nthe clients will connect to it, and\n\n155\n00:06:54,630 --> 00:06:56,990\nthat server is now connected\nto the SAN and has access.\n\n156\n00:06:56,990 --> 00:07:00,470\nJust the same resources so it's.\n\n157\n00:07:00,470 --> 00:07:04,520\nIf this server just had a failure that\nwas something simple like one drive going\n\n158\n00:07:04,520 --> 00:07:07,320\nbad or something then memory\nwould synchronize over and\n\n159\n00:07:07,320 --> 00:07:09,690\nthere'd be absolutely no loss of session.\n\n160\n00:07:09,690 --> 00:07:13,940\nIf this computer completely powered off\nthough, pretty hard to get the ram out of\n\n161\n00:07:13,940 --> 00:07:17,530\na machine that's off and so then you do\nlose session, so that does happen, and\n\n162\n00:07:17,530 --> 00:07:19,698\nto rewind it is,\nit went from 16 in 2008 to 64 in 2012.\n\n163\n00:07:19,698 --> 00:07:23,977\n[CROSSTALK] increased the number\nof virtual machines you can run,\n\n164\n00:07:23,977 --> 00:07:27,643\nfrom 1,00 0 in 2008 to what was it 8,000.\n\n165\n00:07:27,643 --> 00:07:28,215\n>> Well, that might be enough.\n\n166\n00:07:28,215 --> 00:07:29,722\n>> Yeah, it should be.\n\n167\n00:07:29,722 --> 00:07:31,530\n>> [LAUGH]\n>> 1,024 per knot.\n\n168\n00:07:31,530 --> 00:07:34,800\n>> Yeah.\n>> Up to 8,000 max.\n\n169\n00:07:34,800 --> 00:07:39,250\n>> Now, I've taught Microsoft classes for\nyears and so has Mike, and in the old days\n\n170\n00:07:39,250 --> 00:07:42,750\nwhen we taught this, we usually taught\nit talking about file services.\n\n171\n00:07:42,750 --> 00:07:45,540\nSetting up a file server\nwith a cluster and stuff.\n\n172\n00:07:45,540 --> 00:07:48,133\nThanks to services like DFS,\nthat distribute to file system.\n\n173\n00:07:48,133 --> 00:07:50,376\nYou don't really need clustering for that.\n\n174\n00:07:50,376 --> 00:07:53,503\n>> A lot less expensive, easier to\nconfigure- Same thing with, like,\n\n175\n00:07:53,503 --> 00:07:54,567\nweb servers and stuff.\n\n176\n00:07:54,567 --> 00:07:56,861\nYou don't necessarily need clustering for\nthem any more either.\n\n177\n00:07:56,861 --> 00:08:01,426\nSo the number one use we see for\nclusters like these today\n\n178\n00:08:01,426 --> 00:08:06,260\nare SQL database servers and\nvirtual machine hosts.\n\n179\n00:08:06,260 --> 00:08:11,100\nAnd when you do Hyper-V on a clustered\nenvironment, it's awesome.\n\n180\n00:08:11,100 --> 00:08:11,843\n>> [LAUGH] Yeah, it is.\n\n181\n00:08:11,843 --> 00:08:14,834\n>> You can have a virtual machine\nrunning on this host right here,\n\n182\n00:08:14,834 --> 00:08:17,656\nyou could fail the virtual\nmachine over to this other host,\n\n183\n00:08:17,656 --> 00:08:20,120\nmoving it to a complete\ndifferent set of hardware.\n\n184\n00:08:20,120 --> 00:08:21,380\n>> Mm-hm.\n\n185\n00:08:21,380 --> 00:08:22,650\n>> And the end users don't even notice.\n\n186\n00:08:22,650 --> 00:08:25,224\nYou know, they lose one or\ntwo pings, the transition happens,\n\n187\n00:08:25,224 --> 00:08:27,955\nand the virtual machine is now live\non this other piece of hardware.\n\n188\n00:08:27,955 --> 00:08:28,935\n>> That is impressive stuff.\n\n189\n00:08:28,935 --> 00:08:30,027\n>> It's really cool.\n\n190\n00:08:30,027 --> 00:08:33,600\nSo that's what we're going to show you\nin this episode is, we're going to set\n\n191\n00:08:33,600 --> 00:08:37,300\nup clustering between two servers and\nthen we're going to add on Hyper-V to it.\n\n192\n00:08:37,300 --> 00:08:38,665\nAnd we'll create a virtual machine and\n\n193\n00:08:38,665 --> 00:08:41,281\nwe'll show failing that virtual machine\nover from hardware to hardware.\n\n194\n00:08:41,281 --> 00:08:41,983\n>> Nice.\n\n195\n00:08:41,983 --> 00:08:45,120\n>> I've done this in a number of\nenvironments, and I've done it with\n\n196\n00:08:45,120 --> 00:08:49,510\nHyper-V as well as VMWare and Sun Server,\nthey all kind of support the same stuff.\n\n197\n00:08:49,510 --> 00:08:50,580\nIt's really neat.\n\n198\n00:08:50,580 --> 00:08:52,518\nIt does create a little challenge, though.\n\n199\n00:08:52,518 --> 00:08:57,469\nI used to work in a data center where we\nhad about 200 servers, physical servers.\n\n200\n00:08:57,469 --> 00:09:01,503\nAnd you'd come in in the morning, and when\nyou were looking for a virtual machine,\n\n201\n00:09:01,503 --> 00:09:05,262\nyou never really knew what physical\nhardware it was gonna be on that morning.\n\n202\n00:09:05,262 --> 00:09:06,319\nYou'd come in and-\n>> Right, who's hosting that day?\n\n203\n00:09:06,319 --> 00:09:08,230\n>> Yeah,\nit could be on any of the hosts, and\n\n204\n00:09:08,230 --> 00:09:10,755\nit's because it's not tied\nto the hardware anymore.\n\n205\n00:09:10,755 --> 00:09:13,940\nYou can bounce around thanks\nto the cluster services.\n\n206\n00:09:13,940 --> 00:09:18,650\nAnd that's a great way to get all of\nthe servers in cluster working together.\n\n207\n00:09:18,650 --> 00:09:23,110\nYou could have 64 nodes in\nthat cluster all running,\n\n208\n00:09:23,110 --> 00:09:24,880\nsay, eight virtual machines each.\n\n209\n00:09:24,880 --> 00:09:25,610\nRight?\nSo\n\n210\n00:09:25,610 --> 00:09:27,420\nI'm just picking a number\nout of my hat there.\n\n211\n00:09:27,420 --> 00:09:29,770\nIt's however many virtual machines\nyour memory will support.\n\n212\n00:09:29,770 --> 00:09:32,706\nAnd so you have these VMs spread out\nacross all the physical hardware.\n\n213\n00:09:32,706 --> 00:09:35,300\nAnd if one device fails, one server fails,\n\n214\n00:09:35,300 --> 00:09:39,868\nthose VMs just jump ship over to some\nof the other servers, and you're fine.\n\n215\n00:09:39,868 --> 00:09:44,129\nYou can set your environment up to be\nable to lose one server, five servers,\n\n216\n00:09:44,129 --> 00:09:44,937\nten servers.\n\n217\n00:09:44,937 --> 00:09:47,550\nAnd I'm talking about\nlosing the entire server.\n\n218\n00:09:47,550 --> 00:09:49,100\nYou just take it off line, right?\n\n219\n00:09:49,100 --> 00:09:50,490\nYou can do your maintenance\nin the middle of the day.\n\n220\n00:09:50,490 --> 00:09:51,790\nIt's really, really-\n>> It's just fantastic.\n\n221\n00:09:51,790 --> 00:09:52,702\n>> Cool stuff.\n\n222\n00:09:52,702 --> 00:09:57,070\n>> All right, so if it's so cool,\nwhy isn't everybody doing it?\n\n223\n00:09:57,070 --> 00:09:58,610\nThe main reason is cost.\n\n224\n00:09:58,610 --> 00:09:59,590\n>> Mucho dinero.\n\n225\n00:09:59,590 --> 00:10:00,305\n>> That's right.\n\n226\n00:10:00,305 --> 00:10:02,700\n>> [LAUGH]\n>> If you want to do clustering,\n\n227\n00:10:02,700 --> 00:10:04,100\nthe number one requirement?\n\n228\n00:10:04,100 --> 00:10:05,300\nShared storage.\n\n229\n00:10:05,300 --> 00:10:07,220\nWe've got to have shared storage,\n\n230\n00:10:07,220 --> 00:10:09,860\nhard drives that are available\nto all of our machines.\n\n231\n00:10:09,860 --> 00:10:13,590\nAnd that normally takes the form\nof a storage area network, a SAN.\n\n232\n00:10:13,590 --> 00:10:17,112\nNow, on the cheap,\nyou can get an iSCSI SAN.\n\n233\n00:10:17,112 --> 00:10:21,970\nAn iSCSI SAN is where it does the storage\nnetwork over a regular TCP/IP network.\n\n234\n00:10:21,970 --> 00:10:24,390\nThe entry point for that,\nit's like $1000 now.\n\n235\n00:10:24,390 --> 00:10:26,380\nIt's gotten really, really low.\n\n236\n00:10:26,380 --> 00:10:28,720\nBut, you know, in a commercial-grade\nenvironment, it's probably closer to,\n\n237\n00:10:28,720 --> 00:10:30,140\nlike, ten grand.\n\n238\n00:10:30,140 --> 00:10:33,400\nAnd you can deploy it pretty easily,\nbut it's on a regular gigabit network,\n\n239\n00:10:33,400 --> 00:10:34,566\nmaybe a ten-gig network.\n\n240\n00:10:34,566 --> 00:10:37,270\n>> So your performance isn't\nreally what you're hoping for.\n\n241\n00:10:37,270 --> 00:10:38,630\n>> It's slow, yeah.\n\n242\n00:10:38,630 --> 00:10:39,894\n>> That's why you've got-\n>> In a lab-\n\n243\n00:10:39,894 --> 00:10:41,090\n>> If you've got ten Hyper-V hosts\n\n244\n00:10:41,090 --> 00:10:43,960\nthat are clustered together, they're\nall hitting that same shared storage,\n\n245\n00:10:43,960 --> 00:10:45,780\nyou need all the speed you can get.\n\n246\n00:10:45,780 --> 00:10:47,796\n>> Not to mention the TCP/IP overhead.\n\n247\n00:10:47,796 --> 00:10:51,460\nCuz iSCSI is going over a TCP/IP network,\nand so you've got header packets and\n\n248\n00:10:51,460 --> 00:10:53,530\nstuff, and it's not the most efficient.\n\n249\n00:10:53,530 --> 00:10:56,360\nSo in a test and lab environment,\na small company,\n\n250\n00:10:56,360 --> 00:10:59,460\nmaybe even a medium size company,\niSCSI is fine.\n\n251\n00:10:59,460 --> 00:11:02,168\nIn a corporate environment,\nthough, a large enterprise,\n\n252\n00:11:02,168 --> 00:11:03,503\ndon't even consider iSCSI.\n\n253\n00:11:03,503 --> 00:11:06,881\nJust know that it exists,\nbut don't implement it.\n\n254\n00:11:06,881 --> 00:11:11,604\nIn an enterprise environment,\nyou need reliable, fast storage, and\n\n255\n00:11:11,604 --> 00:11:14,930\nto get that, you need a fiber channel SAN.\n\n256\n00:11:14,930 --> 00:11:16,960\n>> And what's a low-end fiber channel SAN?\n\n257\n00:11:16,960 --> 00:11:18,081\n>> It's usually about 40 grand.\n\n258\n00:11:18,081 --> 00:11:19,697\n>> Yeah.\n>> Usually about 40 grand to get\n\n259\n00:11:19,697 --> 00:11:20,439\nstarted on that.\n\n260\n00:11:20,439 --> 00:11:22,441\nBut, by the end of the day,\nyou're usually over a hundred.\n\n261\n00:11:22,441 --> 00:11:22,982\n>> Yeah.\n[LAUGH]\n\n262\n00:11:22,982 --> 00:11:24,543\n>> You know, $100,000.\n\n263\n00:11:24,543 --> 00:11:26,040\nThey can be very expensive.\n\n264\n00:11:26,040 --> 00:11:27,140\nBut they're worth it.\n\n265\n00:11:27,140 --> 00:11:29,263\n>> They are.\n>> Fiber channel SANs at a minimum will be\n\n266\n00:11:29,263 --> 00:11:31,000\neight gigabits per second.\n\n267\n00:11:31,000 --> 00:11:35,104\nAnd that's over fiber-optic networks\nwithout the TCP/IP overhead,\n\n268\n00:11:35,104 --> 00:11:38,748\nbecause a storage area network\ndoesn't actually use TCP/IP.\n\n269\n00:11:38,748 --> 00:11:41,769\nSo you get extremely efficient\ncommunications over the fiber\n\n270\n00:11:41,769 --> 00:11:43,000\noptic network.\n\n271\n00:11:43,000 --> 00:11:44,530\nIt’s the way to go.\n\n272\n00:11:44,530 --> 00:11:47,570\nIt’s expensive, but\nit gets you the best opportunity.\n\n273\n00:11:47,570 --> 00:11:52,050\nYou can then have 64 servers all running\nthe fiber optic switches that all run to\n\n274\n00:11:52,050 --> 00:11:54,870\nyour your SAN and\nget your connectivity that way, and\n\n275\n00:11:54,870 --> 00:11:58,272\nyou could have nice good failover, quick\nfailover between your different systems.\n\n276\n00:11:58,272 --> 00:11:59,290\nAll right?\n\n277\n00:11:59,290 --> 00:12:02,060\nNow, if you're sitting here at\nhome watching this video and\n\n278\n00:12:02,060 --> 00:12:04,110\ngoing, good God,\nhow am I supposed to learn that?\n\n279\n00:12:04,110 --> 00:12:06,910\nAm I gonna go on eBay and\ntry and get a fiber channel SAN?\n\n280\n00:12:06,910 --> 00:12:07,680\nYou could.\n\n281\n00:12:08,760 --> 00:12:10,400\nDon't do that, though.\n\n282\n00:12:10,400 --> 00:12:11,400\nGo ahead and do iSCSI.\n\n283\n00:12:11,400 --> 00:12:13,170\nDo iSCSI in your practice environment.\n\n284\n00:12:13,170 --> 00:12:15,870\nYou can bring up a virtual\nmachine that is an iSCSI target,\n\n285\n00:12:15,870 --> 00:12:17,810\nthat actually emulates an iSCSI SAN.\n\n286\n00:12:17,810 --> 00:12:18,972\nSo you don't even have to buy one.\n\n287\n00:12:18,972 --> 00:12:22,800\n>> Yeah, 2012R2 has the iSCSI target\nbuilt into it that you can install.\n\n288\n00:12:22,800 --> 00:12:24,572\n>> And several Linux distros do.\n\n289\n00:12:24,572 --> 00:12:26,011\nIt's just whatever works.\n\n290\n00:12:26,011 --> 00:12:27,475\n>> Because you're not looking for\nperformance,\n\n291\n00:12:27,475 --> 00:12:29,870\nyou're looking to practice the technology.\n\n292\n00:12:29,870 --> 00:12:31,240\n>> So you'll be able to do it.\n\n293\n00:12:31,240 --> 00:12:31,950\nIt'll just be slow.\n\n294\n00:12:31,950 --> 00:12:33,690\nAnd in fact,\nthat's what we're going to do here is,\n\n295\n00:12:33,690 --> 00:12:37,390\nwe've got a couple of servers set up\nwhich are physical, real servers.\n\n296\n00:12:37,390 --> 00:12:40,474\nAnd I've got an iSCSI SAN,\nwhich is a physical, real SAN,\n\n297\n00:12:40,474 --> 00:12:42,140\nit's just an iSCSI one.\n\n298\n00:12:42,140 --> 00:12:46,216\nSo, we're going to be limited to one\ngigabit, and it's over a TCP/IP network,\n\n299\n00:12:46,216 --> 00:12:49,122\nso we'll be lucky if we get\n400 to 450 megabit on it.\n\n300\n00:12:49,122 --> 00:12:51,572\nSo it's not going to be the fastest\nthing in the world, but\n\n301\n00:12:51,572 --> 00:12:54,973\nwe're going to spin up one or two VM's and\ndo a little failover, it'll be okay.\n\n302\n00:12:54,973 --> 00:12:57,615\nJust know, on a fiber channel SAN,\nmuch, much faster.\n\n303\n00:12:57,615 --> 00:12:58,526\n>> Right, yep.\n\n304\n00:12:58,526 --> 00:12:59,187\n>> All right.\n\n305\n00:12:59,187 --> 00:13:03,390\nSo that's reason number one why a lot of\npeople don't do the failover clustering,\n\n306\n00:13:03,390 --> 00:13:04,490\ncuz of the expense.\n\n307\n00:13:04,490 --> 00:13:05,360\nAll right?\n\n308\n00:13:05,360 --> 00:13:10,580\nReason number two is,\nyour hardware has to be compatible.\n\n309\n00:13:10,580 --> 00:13:11,891\nAnd I don't mean compatible with Windows,\n\n310\n00:13:11,891 --> 00:13:16,390\nI mean it needs to meet the cluster\nrequirements from Microsoft.\n\n311\n00:13:16,390 --> 00:13:19,592\nIf it doesn't,\nthey will not support you on the phone.\n\n312\n00:13:19,592 --> 00:13:20,159\nThey'll hang up on you.\n\n313\n00:13:20,159 --> 00:13:22,007\n>> Yeah,\nthey're not saying you can't do it, but\n\n314\n00:13:22,007 --> 00:13:23,458\nthey're not gonna talk to you at all.\n\n315\n00:13:23,458 --> 00:13:26,395\nIt has to be the on the, what is it,\nthe certified for Windows 2012.\n\n316\n00:13:26,395 --> 00:13:28,019\nIt has to have that logo on it.\n\n317\n00:13:28,019 --> 00:13:30,363\nAnd Microsoft has a list on their\nwebsite where you can go to, and\n\n318\n00:13:30,363 --> 00:13:33,371\nthere's a wizard we're gonna run through\nthat will check your hardware for you.\n\n319\n00:13:33,371 --> 00:13:34,543\n>> Yep, absolutely.\n\n320\n00:13:34,543 --> 00:13:36,810\nAnd let me,\nI'm just gonna bring this up here.\n\n321\n00:13:36,810 --> 00:13:39,640\nI've got the failover cluster\nconfiguration guide from\n\n322\n00:13:39,640 --> 00:13:41,120\nMicrosoft pulled up.\n\n323\n00:13:41,120 --> 00:13:45,357\nAnd you'll see that this is the one\nthat applies to 2012 and 2012R2.\n\n324\n00:13:45,357 --> 00:13:45,979\nBe careful,\n\n325\n00:13:45,979 --> 00:13:49,720\ncuz you'll find a lot of documentation\ntied to the older versions of servers.\n\n326\n00:13:49,720 --> 00:13:51,040\nSo this is the latest one.\n\n327\n00:13:51,040 --> 00:13:53,500\nAnd we'll post this URL\nwith the show notes.\n\n328\n00:13:53,500 --> 00:13:56,570\nBut basically,\nthey give us a checklist of what to do.\n\n329\n00:13:56,570 --> 00:14:00,740\nAnd you'll see Install Failover\nClustering, that's step two,\n\n330\n00:14:00,740 --> 00:14:03,560\nbecause Verify Prerequisites comes first.\n\n331\n00:14:03,560 --> 00:14:06,280\nAnd that's where we need to check our\nhardware compatibility before we get\n\n332\n00:14:06,280 --> 00:14:07,670\nanywhere crazy.\n\n333\n00:14:07,670 --> 00:14:12,040\nSo you'll see here we've got the Failover\nClustering Hardware Requirements and\n\n334\n00:14:12,040 --> 00:14:13,122\nStorage Options.\n\n335\n00:14:13,122 --> 00:14:15,310\nThey've got a whole page dedicated to it.\n\n336\n00:14:16,620 --> 00:14:18,870\nAnd basically,\nthey break down what you need to have.\n\n337\n00:14:18,870 --> 00:14:22,740\nSupported disk operating systems, the\nhardware requirements if you want to be\n\n338\n00:14:22,740 --> 00:14:28,130\nable to do Hyper-V, storage area networks,\nSAN information, and so on.\n\n339\n00:14:28,130 --> 00:14:31,550\nSo information about what you've\ngot to have in order to do it.\n\n340\n00:14:31,550 --> 00:14:33,740\nAnd after we do the install,\n\n341\n00:14:33,740 --> 00:14:36,320\nwe'll see there's the validation\nwizard that Mike mentioned.\n\n342\n00:14:36,320 --> 00:14:37,490\nAnd it'll go through and check it.\n\n343\n00:14:37,490 --> 00:14:40,330\nSo even when you see, like, doing\nthe install here, here they go through and\n\n344\n00:14:40,330 --> 00:14:44,520\ndo the install and\nthen validate configuration.\n\n345\n00:14:44,520 --> 00:14:48,589\nThis is where they find out whether\nthe hardware truly matches.\n\n346\n00:14:48,589 --> 00:14:50,250\nSo they go through and do that.\n\n347\n00:14:50,250 --> 00:14:51,840\nAnd we'll get a chance to see that today.\n\n348\n00:14:51,840 --> 00:14:53,670\nSo I'm pretty sure the,\n\n349\n00:14:53,670 --> 00:14:57,110\nthe machines that we're using as\nservers will pass the validation.\n\n350\n00:14:57,110 --> 00:14:57,790\n>> I think so.\n\n351\n00:14:57,790 --> 00:14:59,400\n>> I think our iSCSI SAN might fail.\n\n352\n00:14:59,400 --> 00:15:01,714\n>> A lot of times when I do it,\nI'll uncheck a couple of them,\n\n353\n00:15:01,714 --> 00:15:04,505\ncuz they can take a little while, and\nI know it's gonna work anyway and\n\n354\n00:15:04,505 --> 00:15:07,225\nI'm not looking for support from\nMicrosoft in a test environment.\n\n355\n00:15:07,225 --> 00:15:09,553\nBut it's a good idea to run through\nit once to see what it tells you,\n\n356\n00:15:09,553 --> 00:15:10,740\nwhat's wrong with your stuff.\n\n357\n00:15:10,740 --> 00:15:12,930\nLike, it'll look at your network adapters,\nand I mean,\n\n358\n00:15:12,930 --> 00:15:14,700\nevery bit of hardware along the way.\n\n359\n00:15:14,700 --> 00:15:15,620\n>> Yeah.\n\n360\n00:15:15,620 --> 00:15:18,143\nAnd like you said, even if it fails,\nyou can still do clustering.\n\n361\n00:15:18,143 --> 00:15:18,666\n>> Mm-hm.\n\n362\n00:15:18,666 --> 00:15:21,060\n>> It's just if you call Microsoft,\nthey won't help you on the phone.\n\n363\n00:15:21,060 --> 00:15:22,759\n>> Well, you could argue that\nwhen you call Microsoft,\n\n364\n00:15:22,759 --> 00:15:24,284\nthey're not very helpful\non the phone anyway.\n\n365\n00:15:24,284 --> 00:15:29,701\n>> [LAUGH] This is true, so\nwhat's the difference, right?\n\n366\n00:15:29,701 --> 00:15:31,476\n>> I like to have that safety net though,\n\n367\n00:15:31,476 --> 00:15:34,300\nto know that I could call\nthem if it came down to it.\n\n368\n00:15:34,300 --> 00:15:37,803\nBut anyhow, so what we'll do is we'll\ngo ahead and get this implemented, and\n\n369\n00:15:37,803 --> 00:15:38,662\nsee what happens.\n\n370\n00:15:38,662 --> 00:15:45,130\nNow, we do have an iSCSI SAN here, and\nI sliced off some storage on the SAN.\n\n371\n00:15:45,130 --> 00:15:49,962\nI sliced off a 2 terabyte partition or\nvolume to be able to use for\n\n372\n00:15:49,962 --> 00:15:52,122\nstoring virtual machines.\n\n373\n00:15:52,122 --> 00:15:55,600\nAnd I also sliced off another\n1 terabyte partition or,\n\n374\n00:15:55,600 --> 00:15:58,857\nI keep saying partition,\na volume, and I did that.\n\n375\n00:15:58,857 --> 00:16:01,682\nBecause I needed one extra little volume,\nand\n\n376\n00:16:01,682 --> 00:16:05,022\nthat was the smallest ISCSI\nbutton would let me slice.\n\n377\n00:16:05,022 --> 00:16:09,056\nWhen you build a cluster,\nthere has to be a way for\n\n378\n00:16:09,056 --> 00:16:12,994\nthe nodes to talk to each\nother to know whether or\n\n379\n00:16:12,994 --> 00:16:17,150\nnot one of them should go active or\nthe other.\n\n380\n00:16:17,150 --> 00:16:21,621\nRemember, in my diagram, here I\nshowed these two servers, right, and\n\n381\n00:16:21,621 --> 00:16:22,731\nlet's say that.\n\n382\n00:16:22,731 --> 00:16:24,990\nOh sorry hang on, did I, there, all right.\n\n383\n00:16:26,750 --> 00:16:28,280\nSo you've got these two servers.\n\n384\n00:16:28,280 --> 00:16:32,010\nSo let's say this server is active,\nand this other server is passive.\n\n385\n00:16:32,010 --> 00:16:33,200\nIt's waiting, it's in standby.\n\n386\n00:16:34,400 --> 00:16:36,875\nWell, if server one were to fail.\n\n387\n00:16:36,875 --> 00:16:37,480\n>> Mm-hm.\n\n388\n00:16:37,480 --> 00:16:41,570\n>> Server number 2 need to know that it's\nokay to come up and take over the show.\n\n389\n00:16:41,570 --> 00:16:43,040\nHow does it know?\n\n390\n00:16:43,040 --> 00:16:44,340\nAll right.\n\n391\n00:16:44,340 --> 00:16:46,740\nWell, at the most simple level,\n\n392\n00:16:46,740 --> 00:16:50,680\nI could run what's called the heartbeat\ncable between these two servers.\n\n393\n00:16:50,680 --> 00:16:51,850\n>> Separate network.\n\n394\n00:16:51,850 --> 00:16:54,750\n>> Yeah, you stick an extra network\nadapter in them and you get a cros\n\n395\n00:16:54,750 --> 00:16:58,160\nover cable and you run between the two and\nthey send a little heartbeat across it.\n\n396\n00:16:58,160 --> 00:17:00,260\nYou know, a heartbeat that says,\nhey I'm here, are you?\n\n397\n00:17:00,260 --> 00:17:02,180\nThe other side says, yep,\nI'm here, how about you?\n\n398\n00:17:02,180 --> 00:17:03,955\nAnd they do that every two seconds.\n\n399\n00:17:03,955 --> 00:17:05,340\n>> Mm-hm.\n>> Every two seconds they send that\n\n400\n00:17:05,340 --> 00:17:08,620\nmessage and as long as they get\na response everything's good.\n\n401\n00:17:08,620 --> 00:17:09,300\n>> Right.\n\n402\n00:17:09,300 --> 00:17:09,940\n>> Right.\n\n403\n00:17:09,940 --> 00:17:10,515\nThat's one way.\n\n404\n00:17:10,515 --> 00:17:13,330\nAnd if you have two servers then,\nthen fine.\n\n405\n00:17:13,330 --> 00:17:15,119\nBut what if you're gonna\nbuild a 64-node cluster?\n\n406\n00:17:15,119 --> 00:17:17,280\n>> [LAUGH] That's a lot\nof heartbeat cables.\n\n407\n00:17:17,280 --> 00:17:18,496\n>> Heartbeat cables out of the idea.\n\n408\n00:17:18,496 --> 00:17:22,652\nWell, you could have an extra network\ncard and run them into a switch.\n\n409\n00:17:22,652 --> 00:17:23,164\n>> Mm-hm.\n>> And\n\n410\n00:17:23,164 --> 00:17:25,290\nthey could all talk to\neach other that way.\n\n411\n00:17:25,290 --> 00:17:26,250\nAll right, and that's fine.\n\n412\n00:17:26,250 --> 00:17:27,030\nThat's an option.\n\n413\n00:17:27,030 --> 00:17:28,090\nWe can choose that.\n\n414\n00:17:28,090 --> 00:17:28,930\nAnd off you go.\n\n415\n00:17:28,930 --> 00:17:31,940\nYou can even send your heartbeats\nover the regular network if you want.\n\n416\n00:17:31,940 --> 00:17:32,440\n>> Right.\n\n417\n00:17:32,440 --> 00:17:33,450\n>> Right.\n\n418\n00:17:33,450 --> 00:17:35,040\nAnd that works too,\n\n419\n00:17:35,040 --> 00:17:39,990\nbut there's two scenarios where that's\nnot the greatest for us, all right?\n\n420\n00:17:39,990 --> 00:17:42,770\nScenario one is what if\nyour network adaptor fails.\n\n421\n00:17:42,770 --> 00:17:44,530\n>> Right.\n>> If your network adaptor fails you can't\n\n422\n00:17:44,530 --> 00:17:47,600\nhear any heartbeats, so\nyou don't know what's going on anymore.\n\n423\n00:17:47,600 --> 00:17:50,400\nAs far as you know, since you just\nlost your network connection,\n\n424\n00:17:50,400 --> 00:17:51,890\nyou might be the last man standing.\n\n425\n00:17:51,890 --> 00:17:53,390\n>> Exactly.\n>> You might need to come active,\n\n426\n00:17:53,390 --> 00:17:54,860\nbecause everybody else is down.\n\n427\n00:17:54,860 --> 00:17:56,770\nBut you don't know, all right?\n\n428\n00:17:56,770 --> 00:18:00,470\nAnd then number two,\nwhat if there's a tie?\n\n429\n00:18:00,470 --> 00:18:04,490\nAnd by a tie, I mean,\neach server is making its\n\n430\n00:18:04,490 --> 00:18:09,400\nown decision as to whether\na server is up or down, okay?\n\n431\n00:18:09,400 --> 00:18:13,920\nSo for example,\nlet me show you guys what I mean.\n\n432\n00:18:13,920 --> 00:18:16,810\nA situation that would result\nin having a tie, all right.\n\n433\n00:18:16,810 --> 00:18:21,270\nSo let's say that I actually\nhad three servers, okay.\n\n434\n00:18:21,270 --> 00:18:25,430\nSo I had server one, server two,\nand now I'll have server three.\n\n435\n00:18:25,430 --> 00:18:27,400\nOkay.\n\n436\n00:18:27,400 --> 00:18:32,983\nAnd all three of these guys\nare connected up to the network.\n\n437\n00:18:35,691 --> 00:18:39,760\nAnd this is just going to be\nan interesting little line there, okay.\n\n438\n00:18:39,760 --> 00:18:41,345\n>> So\nthey're all connected up to the sand.\n\n439\n00:18:41,345 --> 00:18:42,020\n>> Mm-hm.\n>> And\n\n440\n00:18:42,020 --> 00:18:45,980\nI have heartbeat cables that are running\nthrough just my regular network, right?\n\n441\n00:18:45,980 --> 00:18:46,710\nRight.\nSo you know,\n\n442\n00:18:46,710 --> 00:18:48,875\neach of these servers is gonna be\nplugged into the network anyway.\n\n443\n00:18:48,875 --> 00:18:49,660\n>> Mm-hm.\n>> So\n\n444\n00:18:49,660 --> 00:18:51,960\nmaybe I just do my heartbeat from there.\n\n445\n00:18:51,960 --> 00:18:52,640\nAll right?\n\n446\n00:18:52,640 --> 00:18:57,561\nAnd right now this guy is active, and\nso he's holding 10.1.230.237, okay.\n\n447\n00:18:59,190 --> 00:19:06,350\nWell, if he's the active server, and I'll\njust stick like a giant A on that guy.\n\n448\n00:19:09,880 --> 00:19:12,866\nAll right, so\nhe's going to be the active server.\n\n449\n00:19:15,025 --> 00:19:19,150\nOkay, meanwhile, back in Gotham.\n\n450\n00:19:20,520 --> 00:19:23,000\nThis guy is, passive or standby.\n\n451\n00:19:23,000 --> 00:19:27,660\nAnd we'll say this other guy is passive or\nstandby.\n\n452\n00:19:27,660 --> 00:19:28,218\nOkay, like that.\n\n453\n00:19:28,218 --> 00:19:29,210\nAll right?\n\n454\n00:19:29,210 --> 00:19:29,950\n>> Mm-hm.\n\n455\n00:19:29,950 --> 00:19:34,630\n>> Now, let's say that server\nnumber one were to fail, okay.\n\n456\n00:19:34,630 --> 00:19:39,737\nSo if it fails, if something happens and\nthat server just goes off-line,\n\n457\n00:19:39,737 --> 00:19:44,130\nyou know, it dies for some reason,\nand, so it's gone, okay.\n\n458\n00:19:45,150 --> 00:19:49,240\nWhat is going to happen is server\ntwo is going to see that it's gone,\n\n459\n00:19:49,240 --> 00:19:50,615\nserver three is going\nto see that it's gone,\n\n460\n00:19:50,615 --> 00:19:53,090\nthey're going to talk to each other and\nthey are both going to say,\n\n461\n00:19:53,090 --> 00:19:56,460\nyeah he's gone, let's go ahead and\nsomebody come active.\n\n462\n00:19:56,460 --> 00:19:59,110\nAnd between the two of them\nthey will make decisions and\n\n463\n00:19:59,110 --> 00:20:01,773\none of them will go active and\nwe are back in business.\n\n464\n00:20:01,773 --> 00:20:09,610\nBut what if it was a little bit different?\n\n465\n00:20:09,610 --> 00:20:12,690\nWhat if server one was perfectly happy?\n\n466\n00:20:12,690 --> 00:20:16,150\nAnd server two was perfectly happy and\npassive.\n\n467\n00:20:16,150 --> 00:20:19,620\nAnd server three has some kind\nof network adapter failure.\n\n468\n00:20:19,620 --> 00:20:20,611\n>> Right.\n>> Okay,\n\n469\n00:20:20,611 --> 00:20:24,880\nwell, server three can no\nlonger see server one.\n\n470\n00:20:24,880 --> 00:20:28,560\nSo, server three thinks\nthat server one is down.\n\n471\n00:20:28,560 --> 00:20:32,870\nBut, server two, can see server one and\nserver two says it's happy.\n\n472\n00:20:32,870 --> 00:20:34,550\nIt's fine, it's not down.\n\n473\n00:20:34,550 --> 00:20:38,135\nSo now, we've got server two\nsaying everything's good.\n\n474\n00:20:38,135 --> 00:20:40,190\n>> Mm-hm.\n>> Server three saying things are bad.\n\n475\n00:20:40,190 --> 00:20:40,830\n>> Right.\n\n476\n00:20:40,830 --> 00:20:42,280\n>> That's a tie.\n\n477\n00:20:42,280 --> 00:20:44,310\nThey looked at each other,\nthey take a vote.\n\n478\n00:20:44,310 --> 00:20:45,440\nHow are things?\n\n479\n00:20:45,440 --> 00:20:47,260\nThey say two different things,\nthat's a tie.\n\n480\n00:20:47,260 --> 00:20:49,040\nWe need a tiebreaker.\n\n481\n00:20:49,040 --> 00:20:53,050\nWhenever you have an even\nnumber of servers in a cluster,\n\n482\n00:20:53,050 --> 00:20:55,660\nyou need a tiebreaker, okay.\n\n483\n00:20:55,660 --> 00:20:58,390\nIf you have an odd number,\nyou've already got your tiebreaker, right.\n\n484\n00:20:58,390 --> 00:21:00,120\nIt's an odd number, you won't have a tie.\n\n485\n00:21:00,120 --> 00:21:03,300\nBut with an even number,\na tie is very possible.\n\n486\n00:21:03,300 --> 00:21:06,700\nAnd so somebody has to make that decision,\nthat tiebreaker.\n\n487\n00:21:06,700 --> 00:21:12,240\nAnd so what we'll often do is used\nwhat's called cluster quorum storage.\n\n488\n00:21:12,240 --> 00:21:13,080\nAll right?\n\n489\n00:21:13,080 --> 00:21:16,010\nA quorum is referring to\nthe vote that happens.\n\n490\n00:21:16,010 --> 00:21:16,850\nRight?\n\n491\n00:21:16,850 --> 00:21:19,490\nAnd in a quorum somebody has to win.\n\n492\n00:21:19,490 --> 00:21:21,870\nSomebody has to get more\nvotes than somebody else.\n\n493\n00:21:21,870 --> 00:21:25,461\nSo either the server's down or isn't,\nlet's come up with a consensus.\n\n494\n00:21:25,461 --> 00:21:27,357\n>> Cuz the quorum is the majority.\n\n495\n00:21:27,357 --> 00:21:29,250\nIt's more than half, if not half.\n\n496\n00:21:29,250 --> 00:21:32,393\n>> Yep,\nit's exactly half then you're screwed.\n\n497\n00:21:32,393 --> 00:21:37,150\n[LAUGH]\nSo if we're using our network to\n\n498\n00:21:37,150 --> 00:21:40,730\nconnect and we have an odd\nnumber of servers, we're fine.\n\n499\n00:21:40,730 --> 00:21:45,580\nBut if we're using an even number of\nservers, then we've got an issue.\n\n500\n00:21:45,580 --> 00:21:51,710\nAnd so we can use storage, shared storage,\nto be our clustered quorum.\n\n501\n00:21:51,710 --> 00:21:55,900\nAnd when we do that now\nthe storage can be the tiebreaker.\n\n502\n00:21:55,900 --> 00:22:00,780\nThe way the storage works is you send your\nheartbeat over your network like normal\n\n503\n00:22:00,780 --> 00:22:05,650\nbut you're also reaching out to\na little file stored on the SAN and\n\n504\n00:22:05,650 --> 00:22:07,300\nupdating its timestamp.\n\n505\n00:22:07,300 --> 00:22:10,770\nEvery two seconds you update\nthe timestamp on that file.\n\n506\n00:22:10,770 --> 00:22:14,479\nAnd so server three might not\nbe able to PNG server one.\n\n507\n00:22:14,479 --> 00:22:18,477\nIt might think that server one is down,\nbut then when it looks to the storage,\n\n508\n00:22:18,477 --> 00:22:21,780\nit sees oh, server one is\nstill updating its timestamp.\n\n509\n00:22:21,780 --> 00:22:24,990\nSo, the problem must be with me.\n\n510\n00:22:24,990 --> 00:22:25,930\nI'm not gonna take action.\n\n511\n00:22:25,930 --> 00:22:26,710\n>> Right.\n>> Right?\n\n512\n00:22:26,710 --> 00:22:27,535\n>> It's a tiebreaker.\n\n513\n00:22:27,535 --> 00:22:28,550\n>> Mm-hm.\n\n514\n00:22:28,550 --> 00:22:29,800\n>> It's a good idea to have it.\n\n515\n00:22:29,800 --> 00:22:33,340\nIf you have an even number of nodes,\nwhich most people do.\n\n516\n00:22:33,340 --> 00:22:34,790\n>> Yeah.\n>> Then it's a great way to get\n\n517\n00:22:34,790 --> 00:22:35,490\naround that.\n\n518\n00:22:35,490 --> 00:22:36,920\nMake sure you've got the tiebreaker.\n\n519\n00:22:36,920 --> 00:22:38,870\nSo I wanted to put a little extra space.\n\n520\n00:22:38,870 --> 00:22:42,826\nAnd normally, in real life, in production\nI do a 100 megabyte hard drive, right.\n\n521\n00:22:42,826 --> 00:22:44,405\n>> Cuz it doesn't have to hold any data.\n\n522\n00:22:44,405 --> 00:22:46,841\n>> No, it just,\nthey're just files of timestamps, a very,\n\n523\n00:22:46,841 --> 00:22:47,980\nvery small amount of data.\n\n524\n00:22:47,980 --> 00:22:51,540\nSo 100 megabytes is more than enough,\nbut in this case.\n\n525\n00:22:51,540 --> 00:22:52,660\n>> Right?\n>> ICE couldn't stand,\n\n526\n00:22:52,660 --> 00:22:54,490\nit wouldn't let me do\nless than a terabyte,\n\n527\n00:22:54,490 --> 00:22:56,970\nso we're gonna waste\na lot of storage today.\n\n528\n00:22:56,970 --> 00:22:59,690\n>> That's actually known as\nthe node with disk majority.\n\n529\n00:22:59,690 --> 00:23:03,440\nThere's four modes, 2012 and\nprior there's four modes.\n\n530\n00:23:03,440 --> 00:23:07,800\nThat was a node majority only which\nis when just the nodes themselves.\n\n531\n00:23:07,800 --> 00:23:11,610\nWhich is ideal when you, as Don say,\nwhen you've got an odd number of servers.\n\n532\n00:23:11,610 --> 00:23:14,350\nYou've got the node with disk\nmajority when you got an even number.\n\n533\n00:23:14,350 --> 00:23:17,330\nYou can also do a node with fileshare,\nwhich is the same thing.\n\n534\n00:23:17,330 --> 00:23:18,300\n>> Oh, yeah, I forgot about that one.\n\n535\n00:23:18,300 --> 00:23:20,390\n>> Instead of using\na slice off of our LAN,\n\n536\n00:23:20,390 --> 00:23:22,450\nwe can make a shared folder somewhere.\n\n537\n00:23:22,450 --> 00:23:24,360\nSame thing.\nThey're gonna check in with that.\n\n538\n00:23:24,360 --> 00:23:27,090\nThen there's a fourth one that's\nknown as the, what is it,\n\n539\n00:23:27,090 --> 00:23:31,360\nno majority disk only where you take that\nlittle slice and it gets the only vote.\n\n540\n00:23:31,360 --> 00:23:33,870\nSo none of your nodes get to vote.\n\n541\n00:23:33,870 --> 00:23:36,560\nThe problem with it's not recommended,\nand the problem is,\n\n542\n00:23:36,560 --> 00:23:39,030\nyou can probably already tell, it's\na single point of failure at that point.\n\n543\n00:23:39,030 --> 00:23:42,120\nSo now all of sudden even if all of this,\nso you had four nodes and\n\n544\n00:23:42,120 --> 00:23:46,240\nyou're doing a disk only vote if all four\nof your nodes are up at that one little\n\n545\n00:23:46,240 --> 00:23:49,520\nslice of disk was not available,\nyour cluster no longer has form.\n\n546\n00:23:49,520 --> 00:23:51,570\n>> Yeah.\n>> So it's not recommended.\n\n547\n00:23:51,570 --> 00:23:52,350\n>> Yep.\n\n548\n00:23:52,350 --> 00:23:53,417\nSo good times there.\n\n549\n00:23:53,417 --> 00:23:56,308\nAnd you know, we'll see all these\nagain when we go to do the setup.\n\n550\n00:23:56,308 --> 00:24:01,579\nBut that's what we really did before\nthe show, is we got an ISCSI stand setup.\n\n551\n00:24:01,579 --> 00:24:03,902\nAnd we created those two partitions\non it just to be able to use.\n\n552\n00:24:03,902 --> 00:24:05,751\nNow I keep saying.\n>> Well then 2012 r2 is gonna change\n\n553\n00:24:05,751 --> 00:24:09,490\nit all up, it's gonna want to do dynamic\nand we're not gonna see any of that so.\n\n554\n00:24:09,490 --> 00:24:11,760\n>> Yeah it,\nit kind of picks what's best for us.\n\n555\n00:24:11,760 --> 00:24:13,355\n>> Yep.\n>> And you know why they do that.\n\n556\n00:24:13,355 --> 00:24:14,882\n>> Mm-hm.\n>> 'Cause so many people made mistakes.\n\n557\n00:24:14,882 --> 00:24:15,400\n>> Yeah.\n\n558\n00:24:15,400 --> 00:24:18,890\nSo many people configured the wrong\ntype and ended up with ties.\n\n559\n00:24:18,890 --> 00:24:22,410\nAnd ended up with 2 servers trying\nto go active at the same time.\n\n560\n00:24:22,410 --> 00:24:26,430\nNow, if you've never done this, I want\nyou to think of that movie Ghostbusters.\n\n561\n00:24:26,430 --> 00:24:27,260\nAll right.\n\n562\n00:24:27,260 --> 00:24:30,571\nAnd at the end they've got standing\nat the gate and they're like,\n\n563\n00:24:30,571 --> 00:24:34,160\ndon't cross the streams [INAUDIBLE]\nit would be total platonic reversal.\n\n564\n00:24:34,160 --> 00:24:36,600\nI've seen this movie too many times.\n\n565\n00:24:36,600 --> 00:24:37,670\nThat's what happens in the sand.\n\n566\n00:24:37,670 --> 00:24:39,810\nYou have 2 servers.\n\n567\n00:24:39,810 --> 00:24:40,750\nTry to write.\n\n568\n00:24:40,750 --> 00:24:46,400\nIt's okay to read, but if they try and\nwrite to the same drive at the same time,\n\n569\n00:24:46,400 --> 00:24:47,730\ntotal platonic reversal, right?\n\n570\n00:24:47,730 --> 00:24:50,390\n>> Right.\n>> It's almost guaranteed drive\n\n571\n00:24:50,390 --> 00:24:51,040\ncorruption.\n\n572\n00:24:51,040 --> 00:24:53,280\nI mean, it is bad, okay?\n\n573\n00:24:53,280 --> 00:24:55,020\nSo, you will lose your data.\n\n574\n00:24:55,020 --> 00:24:56,710\nYou will need to restore from backup.\n\n575\n00:24:56,710 --> 00:24:58,250\nIt is not what you wanna get involved in.\n\n576\n00:24:58,250 --> 00:25:01,690\nSo as we set up shared storage\nthat's usually the trickiest part.\n\n577\n00:25:01,690 --> 00:25:05,150\nMaking sure that the servers don't\nwrite to the data at the same time.\n\n578\n00:25:05,150 --> 00:25:09,700\nSo before the show we created\nthis space on the iscazysan and\n\n579\n00:25:09,700 --> 00:25:12,425\nwe connected two servers to it.\n\n580\n00:25:12,425 --> 00:25:12,980\nMm-hm.\n\n581\n00:25:12,980 --> 00:25:15,740\n>> But I told Mike, I said alright\nwe're going to connect to these things.\n\n582\n00:25:15,740 --> 00:25:19,040\nDon't initialize them,\ndon't bring them online yet.\n\n583\n00:25:19,040 --> 00:25:23,990\nWe'll bring them online as a part of\ngetting connected up to the cluster.\n\n584\n00:25:23,990 --> 00:25:28,000\nAlright, so going back to what I said\nearlier, when we decided to go ahead and\n\n585\n00:25:28,000 --> 00:25:29,880\nbuild that A cluster.\n\n586\n00:25:29,880 --> 00:25:31,420\nOur hardware should be compatible.\n\n587\n00:25:31,420 --> 00:25:33,750\nIt should be hardware that\nMicrosoft has approved, and\n\n588\n00:25:33,750 --> 00:25:37,280\nthey have a wizard we can run through\nthat will look at our configuration and\n\n589\n00:25:37,280 --> 00:25:39,070\nmake sure we haven't messed that up.\n\n590\n00:25:39,070 --> 00:25:40,750\nIf there's problems it will\ntell us how to fix it.\n\n591\n00:25:40,750 --> 00:25:43,810\nIf there's hardware that's not\ncompatible it will warn us and\n\n592\n00:25:43,810 --> 00:25:45,490\nwe can take action from there.\n\n593\n00:25:45,490 --> 00:25:46,860\nBut if everything's on the up and\n\n594\n00:25:46,860 --> 00:25:50,410\nup It will be happy and we'll be able to\nmove through and do our configuration.\n\n595\n00:25:51,820 --> 00:25:53,470\nHopefully.\nAll right.\n\n596\n00:25:53,470 --> 00:25:57,130\nLike I said, even if you fail\nthe validation you can still do it.\n\n597\n00:25:57,130 --> 00:25:58,240\nYou can still build the cluster.\n\n598\n00:25:58,240 --> 00:26:01,210\nAnd that's great for practice,\nhome environment, learning, or whatever.\n\n599\n00:26:01,210 --> 00:26:05,990\nBut you don't want to push\nthat into production.\n\n600\n00:26:05,990 --> 00:26:07,530\nAll right.\nWe're also going to use physical\n\n601\n00:26:07,530 --> 00:26:08,232\nmachines for this.\n\n602\n00:26:08,232 --> 00:26:09,765\n[CROSSTALK] Mm-hm.\n>> Cuz it's a cluster, you should.\n\n603\n00:26:09,765 --> 00:26:10,540\n[CROSSTALK]\n>> Right.\n\n604\n00:26:10,540 --> 00:26:12,121\n>> But we could use virtual machines.\n\n605\n00:26:12,121 --> 00:26:12,943\n[CROSSTALK]\n>> Right.\n\n606\n00:26:12,943 --> 00:26:14,912\n>> You could take like two Hyper-V VMs and\ncluster them together.\n\n607\n00:26:14,912 --> 00:26:15,425\n[CROSSTALK]\n>> Mm-hm.\n\n608\n00:26:15,425 --> 00:26:16,650\n>> Again, great for learning,\n\n609\n00:26:16,650 --> 00:26:18,269\nin production, there's really\nnot any point in doing that.\n\n610\n00:26:20,030 --> 00:26:20,890\nAll right.\n\n611\n00:26:20,890 --> 00:26:23,290\nWell, I think, Mike,\nwe're probably ready to jump in and\n\n612\n00:26:23,290 --> 00:26:25,550\nactually take a look at\ngetting this set up.\n\n613\n00:26:25,550 --> 00:26:28,790\n>> You wanna start that before we\ngo to break or you wanna wait til-\n\n614\n00:26:28,790 --> 00:26:30,300\n>> Let's come back from break and do it.\n\n615\n00:26:30,300 --> 00:26:31,110\n>> Okay.\n>> Yeah, I don't wanna get\n\n616\n00:26:31,110 --> 00:26:31,890\ninterrupted in the beginning.\n\n617\n00:26:31,890 --> 00:26:32,630\n>> It'll break it up.\n\n618\n00:26:32,630 --> 00:26:34,990\n>> You'll see it's pretty\nstraightforward guys.\n\n619\n00:26:34,990 --> 00:26:38,300\nFirst we need to install the feature,\nand then from there we can go in and\n\n620\n00:26:38,300 --> 00:26:40,280\ninstall set up the rest.\n\n621\n00:26:40,280 --> 00:26:42,690\nI guess we could go head and\nadd the feature before the break.\n\n622\n00:26:42,690 --> 00:26:43,890\n>> We could.\n>> Does that system\n\n623\n00:26:43,890 --> 00:26:44,880\nstill require a reboot?\n\n624\n00:26:44,880 --> 00:26:46,030\nI don't think it does.\n\n625\n00:26:46,030 --> 00:26:47,010\n>> Not that I'm aware of.\n\n626\n00:26:47,010 --> 00:26:48,490\nNo, I don't think it does.\n\n627\n00:26:48,490 --> 00:26:49,630\n>> Okay.\nSo what I'm gonna do is.\n\n628\n00:26:49,630 --> 00:26:52,949\nWe'll go ahead and get it installed\nbefore we drive our director crazy.\n\n629\n00:26:52,949 --> 00:26:54,089\n>> Okay.\n[LAUGH]\n\n630\n00:26:54,089 --> 00:26:55,470\n>> [LAUGH] Pull things up.\n\n631\n00:26:55,470 --> 00:26:56,250\nPull them back down.\n\n632\n00:26:56,250 --> 00:26:56,990\nWell, God dangit.\n\n633\n00:26:56,990 --> 00:26:58,470\n>> Blowing a raspberry at me over there.\n\n634\n00:26:58,470 --> 00:26:59,031\nAll right, so.\n>> [LAUGH]\n\n635\n00:26:59,031 --> 00:27:00,700\n>> So what we'll do is I'll go ahead and\n\n636\n00:27:00,700 --> 00:27:02,230\ntake this server here.\n\n637\n00:27:02,230 --> 00:27:04,660\nSo I've got, what server am I on?\n\n638\n00:27:04,660 --> 00:27:05,280\nI'm on server.\n\n639\n00:27:05,280 --> 00:27:05,830\n>> We're on Server 1.\n\n640\n00:27:05,830 --> 00:27:06,870\n>> I'm on DC, let me switch there.\n\n641\n00:27:06,870 --> 00:27:07,940\nOh yeah, I'm on Server 2.\n\n642\n00:27:07,940 --> 00:27:08,740\nWhich one are you on?\n\n643\n00:27:08,740 --> 00:27:09,650\n>> I must be on Server 1.\n\n644\n00:27:09,650 --> 00:27:10,255\nLet's double check.\n\n645\n00:27:10,255 --> 00:27:12,330\n>> [LAUGH] We don't wanna be\nconfiguring the same server.\n\n646\n00:27:12,330 --> 00:27:13,100\n>> Yeah, it's Server 1, yep.\n\n647\n00:27:13,100 --> 00:27:14,090\n>> Perfect okay.\n\n648\n00:27:14,090 --> 00:27:15,960\nSo, here I am on Server 2.\n\n649\n00:27:15,960 --> 00:27:20,460\nAnd really you just need to install the\ncluster service on one of the servers and\n\n650\n00:27:20,460 --> 00:27:22,280\nit can push it to the other side.\n\n651\n00:27:22,280 --> 00:27:25,000\nBut if you wanna save time,\nyou can go ahead and install it on both.\n\n652\n00:27:25,000 --> 00:27:28,430\nSo Mike is adding the fail over\ncluster roll to his server.\n\n653\n00:27:28,430 --> 00:27:30,680\nI'm gonna add it to this one on the air.\n\n654\n00:27:30,680 --> 00:27:32,540\nOne thing I forgot to mention earlier.\n\n655\n00:27:32,540 --> 00:27:37,570\nFail over clustering is only present in\nWindows server 2012 R2, oh wait a minute.\n\n656\n00:27:37,570 --> 00:27:39,970\nShoot, it used to only be\nin Enterprise Edition.\n\n657\n00:27:39,970 --> 00:27:41,250\nNow it's in standard.\n\n658\n00:27:41,250 --> 00:27:41,950\n>> Now it's in both.\n\n659\n00:27:41,950 --> 00:27:43,360\n>> It is in standard, okay.\n\n660\n00:27:43,360 --> 00:27:47,130\nIn earlier versions of Windows,\nstandard edition didn't have it, and\n\n661\n00:27:47,130 --> 00:27:48,600\nyou had to go Enterprise.\n\n662\n00:27:48,600 --> 00:27:49,570\nBut they changed that now.\n\n663\n00:27:49,570 --> 00:27:52,780\nBecause in 2012, we only have standard and\ndata center, and\n\n664\n00:27:52,780 --> 00:27:54,740\nthey didn't want you to have to go\nto data center to get clustering.\n\n665\n00:27:54,740 --> 00:27:55,830\nSo yep.\n\n666\n00:27:55,830 --> 00:27:56,890\nSo we should be good here.\n\n667\n00:27:56,890 --> 00:27:58,310\nWhat edition are we running?\n\n668\n00:27:58,310 --> 00:27:59,810\n>> This is 2012 R2.\n\n669\n00:27:59,810 --> 00:28:04,390\n>> Is it Datacenter or-\n>> I believe Nate said it was Datacenter,\n\n670\n00:28:04,390 --> 00:28:05,690\nbut I could be wrong.\n\n671\n00:28:05,690 --> 00:28:08,300\n>> Let's find out.\nI just wanna find out which\n\n672\n00:28:08,300 --> 00:28:09,250\nversion I am running.\n\n673\n00:28:11,030 --> 00:28:12,670\nWe are running Datacenter, look at that.\n\n674\n00:28:12,670 --> 00:28:13,990\nSo, we got all sorts of stuff.\n\n675\n00:28:13,990 --> 00:28:14,690\nAll right.\nSo, I'm just\n\n676\n00:28:14,690 --> 00:28:19,670\ngoing to go in here on my server and\nI'm going to add that role in feature.\n\n677\n00:28:19,670 --> 00:28:21,100\nIt's actually a feature.\n\n678\n00:28:21,100 --> 00:28:22,280\n>> A feature, yes.\n\n679\n00:28:22,280 --> 00:28:23,400\n>> I'll just go here and add it.\n\n680\n00:28:26,300 --> 00:28:30,620\nAnd so I'm picking I.T.ProTV2-Server2.\n\n681\n00:28:30,620 --> 00:28:33,000\nand, you won't see it as a role,\nbecause it's not.\n\n682\n00:28:33,000 --> 00:28:34,910\nWe, you, were effectively making the roles\n\n683\n00:28:34,910 --> 00:28:35,900\nredundant with this-\n>> Right.\n\n684\n00:28:35,900 --> 00:28:36,930\n>> So, it is a feature.\n\n685\n00:28:38,250 --> 00:28:40,080\nAnd, so, afterwards,\nI can look at my feature, and\n\n686\n00:28:40,080 --> 00:28:41,930\nthere it is, fail over clustering.\n\n687\n00:28:41,930 --> 00:28:46,780\nNow, just like with NLB, installing\nthis does not turn the clustering on.\n\n688\n00:28:46,780 --> 00:28:50,360\nIt's just like- tools there to\nallow us to build the cluster so\n\n689\n00:28:50,360 --> 00:28:51,460\nwe'll go ahead and add that.\n\n690\n00:28:52,550 --> 00:28:54,710\nAnd let it install.\n\n691\n00:28:54,710 --> 00:28:56,730\nSo we'll leave that running during\nthe break, it doesn't take long.\n\n692\n00:28:56,730 --> 00:28:57,370\n>> Yea.\n>> And\n\n693\n00:28:57,370 --> 00:29:00,690\nwhen it's done, we'll come back and\nset up our cluster.\n\n694\n00:29:00,690 --> 00:29:01,580\n>> Sounds like a plan.\n\n695\n00:29:01,580 --> 00:29:03,860\n>> All right, so ladies and\ngentlemen stay tuned.\n\n696\n00:29:03,860 --> 00:29:04,532\nWhen we get back.\n\n697\n00:29:04,532 --> 00:29:10,755\nMore clustering after this.\n\n698\n00:29:10,755 --> 00:29:15,971\n[SOUND] All right and\nwelcome back, everybody.\n\n699\n00:29:15,971 --> 00:29:20,359\nSo, in the last segment we had just\ninstalled all the faiiover clustering\n\n700\n00:29:20,359 --> 00:29:21,175\nfeature.\n\n701\n00:29:21,175 --> 00:29:21,885\nYep.\n\n702\n00:29:21,885 --> 00:29:23,265\n>> Now ready to do something with it.\n\n703\n00:29:23,265 --> 00:29:23,775\n>> We're ready.\n\n704\n00:29:23,775 --> 00:29:26,425\n>> I think it was the last comment I\nmade was how when we installed this,\n\n705\n00:29:26,425 --> 00:29:28,680\nwe were just installing the tools for\nclustering.\n\n706\n00:29:28,680 --> 00:29:29,195\n>> Mm-hm.\n\n707\n00:29:29,195 --> 00:29:30,085\n>> Now we've got a set of them.\n\n708\n00:29:30,085 --> 00:29:31,955\nAll right, so\nlet's take a look at that machine.\n\n709\n00:29:31,955 --> 00:29:35,830\nI've got it finished up here so I'll just\nhit close on that feature install, and\n\n710\n00:29:35,830 --> 00:29:37,810\nnow we're ready to get to work.\n\n711\n00:29:37,810 --> 00:29:42,320\nWhen you install fail over clustering,\nif you go up to tools, you'll see that you\n\n712\n00:29:42,320 --> 00:29:46,310\nhave a new tool installed which is\ncalled the fail over cluster manager.\n\n713\n00:29:46,310 --> 00:29:48,520\nAnd that's where we can\ndo all of our work.\n\n714\n00:29:48,520 --> 00:29:49,960\nNow this is the point where Mike say,\n\n715\n00:29:49,960 --> 00:29:54,045\nwait a minute, you can do this in power\nshell also, and I say I hate you Mike.\n\n716\n00:29:54,045 --> 00:29:58,400\n[LAUGH] [LAUGH]\n>> But yes, you can do this in PowerShell.\n\n717\n00:29:58,400 --> 00:30:01,840\n>> And that article that I\nmentioned I'd post with the notes,\n\n718\n00:30:01,840 --> 00:30:06,330\nit's got way down at the bottom of it\nthe PowerShell commands you can issue.\n\n719\n00:30:06,330 --> 00:30:08,920\nBecause, just because you're running\na cluster doesn't mean you need the GUI.\n\n720\n00:30:08,920 --> 00:30:11,990\nYou might do a core services install or\nwhatever.\n\n721\n00:30:11,990 --> 00:30:13,110\n>> Or a ScriptThis kinda thing.\n\n722\n00:30:13,110 --> 00:30:14,704\n>> Absolutely, especially if\nyou're making a lot of notes.\n\n723\n00:30:14,704 --> 00:30:16,329\n>> [CROSSTALK] and things like that, yep.\n\n724\n00:30:16,329 --> 00:30:17,350\nSo i'll fire that up now.\n\n725\n00:30:17,350 --> 00:30:18,690\nI think I'm skipping a step here, Mike.\n\n726\n00:30:18,690 --> 00:30:25,540\nSo I mentioned before the show\nI attached some some storage.\n\n727\n00:30:25,540 --> 00:30:27,660\nBut I haven't messed with them at all.\n\n728\n00:30:27,660 --> 00:30:29,960\nAnd that might be a little\nbit of a problem.\n\n729\n00:30:29,960 --> 00:30:34,370\nSo what I'm going to do is just,\nwe'll you know, we'll find out.\n\n730\n00:30:34,370 --> 00:30:37,745\nWhen you attach a brand new\nempty disk to a server.\n\n731\n00:30:37,745 --> 00:30:38,470\n>> Mm-hm.\n\n732\n00:30:38,470 --> 00:30:42,440\n>> It shows sometimes as being offline,\nand you have to initialize it.\n\n733\n00:30:42,440 --> 00:30:43,440\n>> Right.\n>> And if that's the case,\n\n734\n00:30:43,440 --> 00:30:44,540\nif that's where my drives are,\n\n735\n00:30:44,540 --> 00:30:47,170\nthen the cluster manager is\nnot gonna be able to see them.\n\n736\n00:30:47,170 --> 00:30:48,180\n>> Right.\n>> So.\n\n737\n00:30:48,180 --> 00:30:49,750\n>> I might have to go in and\ninitialize the drives,\n\n738\n00:30:49,750 --> 00:30:51,000\nthis is something that\nhappens in real life,\n\n739\n00:30:51,000 --> 00:30:55,570\nso we'll just play it by ear a, otherwise\nif the drives are in a happy enough state.\n\n740\n00:30:55,570 --> 00:30:57,480\n>> Right.\n>> Then the cluster manager will see that\n\n741\n00:30:57,480 --> 00:31:00,430\nand seize them and\nhave them ready for you.\n\n742\n00:31:00,430 --> 00:31:02,745\nSo, we'll find out which\nway we go here in a minute.\n\n743\n00:31:02,745 --> 00:31:05,500\n[LAUGH]\n>> All right now the cluster manager you\n\n744\n00:31:05,500 --> 00:31:07,540\ncan install it on your laptop,\ndesktop whatever.\n\n745\n00:31:07,540 --> 00:31:10,570\nIt's part of the, the rsat,\nthe remote server administrator tools, so\n\n746\n00:31:10,570 --> 00:31:11,990\nyou can install it.\n\n747\n00:31:11,990 --> 00:31:14,270\nI'm running it on the server,\nwhich is fine too whichever,\n\n748\n00:31:14,270 --> 00:31:15,360\nwhichever one works for you.\n\n749\n00:31:16,600 --> 00:31:20,080\nAnd basically once you're in here,\nyou can create a cluster.\n\n750\n00:31:20,080 --> 00:31:23,030\nNow if you've already created a cluster,\nand you just want to validate\n\n751\n00:31:23,030 --> 00:31:26,900\nyour hardware, you'll see the validate\nconfiguration option right down here.\n\n752\n00:31:26,900 --> 00:31:27,410\n>> Right.\n\n753\n00:31:27,410 --> 00:31:29,150\n>> And that's where it will\nrun through your config and\n\n754\n00:31:29,150 --> 00:31:31,990\nmake sure you're on the up and\nup with Microsoft.\n\n755\n00:31:31,990 --> 00:31:34,540\nIf you fail, it still lets you continue.\n\n756\n00:31:34,540 --> 00:31:35,710\nJust Microsoft won't help you.\n\n757\n00:31:35,710 --> 00:31:37,300\nAll right.\nSo, we are going to go ahead and\n\n758\n00:31:37,300 --> 00:31:38,230\ncreate a cluster.\n\n759\n00:31:38,230 --> 00:31:38,996\nIs what we're going to do.\n\n760\n00:31:38,996 --> 00:31:40,055\n[CROSSTALK]\n>> We're going to create it before you\n\n761\n00:31:40,055 --> 00:31:40,700\ncan validate it.\n\n762\n00:31:40,700 --> 00:31:41,720\nYep.\n\n763\n00:31:41,720 --> 00:31:42,740\n>> All right.\n\n764\n00:31:42,740 --> 00:31:45,590\nSo I get a nice little wizard, and you\nwill see what it walks us through here.\n\n765\n00:31:45,590 --> 00:31:48,430\nWe get some choices as we\nget the configuration going.\n\n766\n00:31:48,430 --> 00:31:52,490\nIt wants us to add the names of\nthe servers we want in the cluster.\n\n767\n00:31:52,490 --> 00:31:57,214\nAnd so all you have to do is punch in\ntheir names, see if I can remember them.\n\n768\n00:31:57,214 --> 00:32:00,154\nNow, I'll you guys a funny story,\n\n769\n00:32:00,154 --> 00:32:05,647\nyou can build a cluster with one\nnode You shouldn't, but you can.\n\n770\n00:32:05,647 --> 00:32:06,831\n>> I don't know you could do that.\n\n771\n00:32:06,831 --> 00:32:09,890\n>> When you do, if you create a cluster\nwith one node, it gets angry at you.\n\n772\n00:32:09,890 --> 00:32:10,430\n>> Right.\n>> And\n\n773\n00:32:10,430 --> 00:32:15,080\nit takes like half an hour because it sits\nthere and does some crazy quorum thing or\n\n774\n00:32:15,080 --> 00:32:20,510\nwhatever, so it is rarely worth it to\ntry and create a cluster with one node.\n\n775\n00:32:20,510 --> 00:32:23,470\nSo you normally want to have two, and\nyou're gonna have two in a cluster anyway,\n\n776\n00:32:23,470 --> 00:32:24,286\nso it's best to set-\n>> Yeah,\n\n777\n00:32:24,286 --> 00:32:25,620\nit kinda defeats the purpose, doesn't it?\n\n778\n00:32:25,620 --> 00:32:26,715\n>> Yeah, yeah, it really does.\n\n779\n00:32:26,715 --> 00:32:28,220\n>> [LAUGH]\n>> So, but for me,\n\n780\n00:32:28,220 --> 00:32:31,580\nwhen I configure things, I'm usually like,\nwell, let me start on one and\n\n781\n00:32:31,580 --> 00:32:34,580\nmake sure it's working and then do\nthe other one, and if you do that here,\n\n782\n00:32:34,580 --> 00:32:36,230\nyou're gonna have to be super patient.\n\n783\n00:32:36,230 --> 00:32:38,150\nIt's best to set them\nboth up at the same time.\n\n784\n00:32:38,150 --> 00:32:42,430\nSo it may seem like an aggressive process,\nbut it's for a reason.\n\n785\n00:32:42,430 --> 00:32:43,175\nAll right.\n\n786\n00:32:43,175 --> 00:32:47,075\nAnd so I am ITProTV2-server1 or\nsomething, aren't I?\n\n787\n00:32:47,075 --> 00:32:47,950\n>> Mm-hm.\n>> What-\n\n788\n00:32:47,950 --> 00:32:50,967\n>> Yup, and then ITproTV2-server2.\n\n789\n00:32:50,967 --> 00:32:51,781\n>> There we go.\n\n790\n00:32:57,783 --> 00:32:58,660\n>> Why did he put a two in the name?\n\n791\n00:32:59,735 --> 00:33:04,330\n>> Because we have our normal ITProTV\ndomain, and this is a second domain that-\n\n792\n00:33:04,330 --> 00:33:05,617\n>> Yeah, well that's why we got lab two,\n\n793\n00:33:05,617 --> 00:33:07,491\nwe don't need a two in the name\nof the computer, though.\n\n794\n00:33:07,491 --> 00:33:08,362\n>> Well that's just Nate.\n\n795\n00:33:08,362 --> 00:33:09,236\n>> That's just Nate.\n\n796\n00:33:09,236 --> 00:33:12,110\nAll right.\n>> [LAUGH]\n\n797\n00:33:12,110 --> 00:33:12,610\n>> So\n\n798\n00:33:12,610 --> 00:33:16,140\nthere's my two servers that\nare gonna be in this cluster.\n\n799\n00:33:16,140 --> 00:33:18,850\nBoth of them have the cluster\nfeature installed, and that's it.\n\n800\n00:33:18,850 --> 00:33:21,190\nWe haven't done any other\nfeature configuration on them,\n\n801\n00:33:21,190 --> 00:33:22,470\njust installed the feature.\n\n802\n00:33:24,480 --> 00:33:28,310\nOn the next screen, it's gonna ask\nus about our validation, right?\n\n803\n00:33:28,310 --> 00:33:32,120\nAnd it's saying, do you want to run\nthe configuration validation test before\n\n804\n00:33:32,120 --> 00:33:36,408\ncontinuing to make sure we're\non the up and up, right?\n\n805\n00:33:36,408 --> 00:33:37,080\n>> Right.\nAnd if we want support-\n\n806\n00:33:37,080 --> 00:33:38,490\n>> If you say no,\n\n807\n00:33:38,490 --> 00:33:40,925\nit's like a big red flag for\nMicrosoft, saying don't help me.\n\n808\n00:33:40,925 --> 00:33:42,190\n>> [LAUGH] That's right.\n\n809\n00:33:42,190 --> 00:33:45,720\n>> If you're not gonna get help from\nMicrosoft anyway, then that's fine, but\n\n810\n00:33:45,720 --> 00:33:48,410\nif you want to be supported,\nyou want to go ahead and say yes.\n\n811\n00:33:48,410 --> 00:33:49,530\nWe'll go ahead and do it.\n\n812\n00:33:51,310 --> 00:33:53,730\nAll right, so\nnow it's gonna switch us over.\n\n813\n00:33:53,730 --> 00:33:57,740\nThe other wizard is still going on,\nwe just don't really see it anymore.\n\n814\n00:33:57,740 --> 00:33:59,500\n>> No, I think it kind of hides it and\ndrops behind this one?\n\n815\n00:33:59,500 --> 00:34:01,140\n>> Yeah, see, so it's still back there.\n\n816\n00:34:01,140 --> 00:34:02,630\nSo we're in a new wizard here, and\n\n817\n00:34:02,630 --> 00:34:05,360\nit's basically going to run\nthrough the validation tests.\n\n818\n00:34:05,360 --> 00:34:07,080\nWe'll see some of the testing options.\n\n819\n00:34:07,080 --> 00:34:09,155\nRun all is chosen by default.\n\n820\n00:34:09,155 --> 00:34:10,810\nBut we can pick and choose if we want.\n\n821\n00:34:10,810 --> 00:34:12,721\n>> Yep.\nThere's like five of them I think,\n\n822\n00:34:12,721 --> 00:34:13,740\nfour of them, yeah.\n\n823\n00:34:13,740 --> 00:34:15,064\n>> Four categories-\n>> Four categories, yeah.\n\n824\n00:34:15,064 --> 00:34:16,330\n>> And\nthen various things underneath them.\n\n825\n00:34:16,330 --> 00:34:20,850\nIf we take a look, like system\nconfiguration, there's a bunch in here.\n\n826\n00:34:20,850 --> 00:34:23,320\nValidated operating system addition,\nversion,\n\n827\n00:34:23,320 --> 00:34:26,630\nrequired services, service packs, right?\n\n828\n00:34:26,630 --> 00:34:27,998\n>> Yep.\n>> On the storage side,\n\n829\n00:34:27,998 --> 00:34:29,420\nwhat do you have there?\n\n830\n00:34:29,420 --> 00:34:33,080\nDoes your storage support CSVs,\nwhich we'll talk about later.\n\n831\n00:34:33,080 --> 00:34:36,510\nDisk fail over, disk arbitration,\nall that kind of crazy stuff.\n\n832\n00:34:36,510 --> 00:34:37,630\nAnd what else do we have?\n\n833\n00:34:37,630 --> 00:34:38,730\n>> The network.\n\n834\n00:34:38,730 --> 00:34:41,350\n>> Yep, do you have enough network\nadapters, is the binding order right?\n\n835\n00:34:41,350 --> 00:34:45,250\nSo it does check a lot of different thing,\nand it can take a while to run.\n\n836\n00:34:46,260 --> 00:34:50,430\nMaybe we'll just-\n>> I've unchecked Network and Storage, and\n\n837\n00:34:50,430 --> 00:34:51,700\nit kinda sped the process up.\n\n838\n00:34:51,700 --> 00:34:54,430\nThose seem to be the ones that take\nthe longest, but I mean they're important\n\n839\n00:34:54,430 --> 00:34:56,139\ntests to run if you're doing this\nin the real world, obviously.\n\n840\n00:34:57,310 --> 00:34:59,531\n>> We're on VMs, oh no,\nactually these are physical service-\n\n841\n00:34:59,531 --> 00:35:00,126\n>> Yeah, these are.\n\n842\n00:35:00,126 --> 00:35:02,071\n>> We, we might actually pass\nif we ran the whole thing.\n\n843\n00:35:02,071 --> 00:35:05,300\n[LAUGH] I think most of\nour hardware is supported.\n\n844\n00:35:05,300 --> 00:35:07,190\nBut all right, so it's gonna run the scan.\n\n845\n00:35:07,190 --> 00:35:09,810\nNow it's just giving me a summary\nof all what it's gonna check.\n\n846\n00:35:09,810 --> 00:35:11,062\nAnd [INAUDIBLE] Oh, you know what?\n\n847\n00:35:11,062 --> 00:35:13,810\nWe are probably gonna fail because\nwe don't have fiber channel HBAs.\n\n848\n00:35:13,810 --> 00:35:15,929\n>> And I think they're single\nnetwork adapters, too.\n\n849\n00:35:15,929 --> 00:35:16,750\nIt's gonna warn us about that.\n\n850\n00:35:16,750 --> 00:35:17,550\n>> You [INAUDIBLE] there.\n\n851\n00:35:17,550 --> 00:35:18,640\n[CROSSTALK]\n>> Just a warning, though.\n\n852\n00:35:18,640 --> 00:35:20,797\nNot a life-ending,\nnot a cluster-ending, type error.\n\n853\n00:35:20,797 --> 00:35:21,311\n>> Yeah.\n>> [LAUGH]\n\n854\n00:35:21,311 --> 00:35:22,583\n>> Remember I mentioned\n\n855\n00:35:22,583 --> 00:35:25,995\nat the beginning of the show how you\nreally want to have a fiber channel SAN.\n\n856\n00:35:25,995 --> 00:35:27,790\n>> Mm-hm.\n>> To connect to a fiber channel SAN,\n\n857\n00:35:27,790 --> 00:35:30,570\nyou need what's called a host bus adapter,\nan HBA.\n\n858\n00:35:30,570 --> 00:35:32,625\nIt looks just like a network card.\n\n859\n00:35:32,625 --> 00:35:35,890\nIt looks like a fiber optic\nnetwork card except the computer,\n\n860\n00:35:35,890 --> 00:35:39,590\nthe server sees it as a hard\ndrive controller, all right?\n\n861\n00:35:39,590 --> 00:35:41,570\nEven though it looks\nlike a network adaptor.\n\n862\n00:35:41,570 --> 00:35:45,520\nAnd so it's gonna look and see that\nwe don't have any fiber HBAs, and so\n\n863\n00:35:45,520 --> 00:35:46,540\nit'll probably complain.\n\n864\n00:35:46,540 --> 00:35:48,270\nLet's see what else we have in here.\n\n865\n00:35:48,270 --> 00:35:48,985\nSo we've got mostly success.\n\n866\n00:35:48,985 --> 00:35:52,450\nYou know what, actually I've got\na success under list fiber HBAs.\n\n867\n00:35:52,450 --> 00:35:53,163\nI wonder how that happened.\n\n868\n00:35:53,163 --> 00:35:54,670\n>> [LAUGH]\n>> All right, so\n\n869\n00:35:54,670 --> 00:35:57,840\njust kind of looking at\nour system configuration.\n\n870\n00:35:57,840 --> 00:36:00,820\nIt looks like everything is good.\n\n871\n00:36:00,820 --> 00:36:02,430\n>> Yeah, we skipped network and storage.\n\n872\n00:36:02,430 --> 00:36:04,110\nWe should\n>> I guess the storage\n\n873\n00:36:04,110 --> 00:36:04,740\nwould've-\n>> Yeah.\n\n874\n00:36:04,740 --> 00:36:05,550\n>> Sent up the red flag there.\n\n875\n00:36:05,550 --> 00:36:06,430\n>> Red flag was there a little bit.\n\n876\n00:36:06,430 --> 00:36:07,290\n>> All right.\n\n877\n00:36:07,290 --> 00:36:08,150\nWell, so we passed.\n\n878\n00:36:08,150 --> 00:36:09,360\nWe're okay.\nWe're happy.\n\n879\n00:36:09,360 --> 00:36:11,770\nAnd so we'll finish and\nit's good enough, right?\n\n880\n00:36:11,770 --> 00:36:13,610\nNow, if we get Microsoft on the phone,\n\n881\n00:36:13,610 --> 00:36:15,420\nthey're gonna notice that you\ndidn't run the full test.\n\n882\n00:36:15,420 --> 00:36:16,690\n>> Right.\n>> They're gonna make you rerun the test.\n\n883\n00:36:16,690 --> 00:36:18,930\nSo it is a good idea to\nrun the whole thing.\n\n884\n00:36:18,930 --> 00:36:21,820\nIf you run the whole thing, it puts a flag\nin there that says yes, you are valid.\n\n885\n00:36:21,820 --> 00:36:26,850\nAll right, so we'll go ahead and hit Next,\nand, oh, and apparently I'm rerunning it,\n\n886\n00:36:26,850 --> 00:36:32,710\nso let me just cancel out of that,\nand I'll say I don't require support.\n\n887\n00:36:32,710 --> 00:36:35,700\nOkay, now I need to create a cluster name,\nall right?\n\n888\n00:36:35,700 --> 00:36:38,480\nYou might have more than one\ncluster in your environment, so\n\n889\n00:36:38,480 --> 00:36:40,150\nyou can use a name to reference it.\n\n890\n00:36:40,150 --> 00:36:42,150\nThis is just a name for\nyour own recognition.\n\n891\n00:36:42,150 --> 00:36:45,530\nMost people don’t use this for\nDNS or whatever, but you could.\n\n892\n00:36:45,530 --> 00:36:49,670\nI’ll call this the IT Pro Cluster.\n\n893\n00:36:50,990 --> 00:36:52,550\nWill it let you do hyphens?\n\n894\n00:36:52,550 --> 00:36:53,880\n>> Yes, I believe so.\n\n895\n00:36:53,880 --> 00:36:57,275\n>> Okay, it follows the net BIOS rule,\nso it doesn't want you to use more than\n\n896\n00:36:57,275 --> 00:36:58,995\nfifteen characters, and\nI think hyphens are okay.\n\n897\n00:36:58,995 --> 00:37:03,000\nAll right, so it's gonna show\nthe network that it's attaching to and\n\n898\n00:37:03,000 --> 00:37:07,990\nit wants to create a shared IP\nbetween the two hosts, okay.\n\n899\n00:37:07,990 --> 00:37:11,755\nNow, right now we are,\nwhat are our IPs, Mike?\n\n900\n00:37:11,755 --> 00:37:16,140\n10.1.-\n>> 100.241 and 242 for the two servers.\n\n901\n00:37:16,140 --> 00:37:17,910\n>> So lets see if 243 is available.\n\n902\n00:37:17,910 --> 00:37:19,210\n>> 240 is the DC.\n\n903\n00:37:19,210 --> 00:37:22,604\n>> A smarter me would have\nlooked before the show.\n\n904\n00:37:22,604 --> 00:37:25,090\n[LAUGH] It looks like 243 is available,\nor it's got a firewall and\n\n905\n00:37:25,090 --> 00:37:26,400\nis not responding to pings.\n\n906\n00:37:26,400 --> 00:37:27,395\nWe'll take that chance.\n\n907\n00:37:27,395 --> 00:37:29,270\n>> [LAUGH]\n>> We'll live on the edge.\n\n908\n00:37:29,270 --> 00:37:30,390\n>> So, we're gonna be 243.\n\n909\n00:37:30,390 --> 00:37:33,425\nI bet 256 is available.\n\n910\n00:37:33,425 --> 00:37:35,517\n>> [LAUGH]\n>> I'm gonna use that one.\n\n911\n00:37:35,517 --> 00:37:38,120\n>> [LAUGH]\nOh.\n\n912\n00:37:38,120 --> 00:37:39,440\n>> Oh, subnet jokes, right?\n\n913\n00:37:39,440 --> 00:37:40,930\nThat's what we've been reduced to.\n\n914\n00:37:40,930 --> 00:37:41,590\n>> Right.\n\n915\n00:37:41,590 --> 00:37:45,480\nAll right, so here it gives me my cluster\nname, the nodes that are gonna be in it,\n\n916\n00:37:45,480 --> 00:37:48,880\nthe shared IP address that's\ngonna be configured for me, and\n\n917\n00:37:48,880 --> 00:37:50,740\nwe can, we can change all this later-\n>> Right.\n\n918\n00:37:50,740 --> 00:37:53,849\n>> We can add more shared IPs if we want,\nbecause you might, and so\n\n919\n00:37:53,849 --> 00:37:55,780\nwe can really revisit all this stuff.\n\n920\n00:37:55,780 --> 00:37:57,000\n>> It's got a little check mark there.\n\n921\n00:37:57,000 --> 00:38:00,060\nIt's gonna grab any storage\nthat it sees that's available.\n\n922\n00:38:00,060 --> 00:38:01,330\n>> And that's the part I don't know about.\n\n923\n00:38:01,330 --> 00:38:01,890\n>> Right.\n>> Right.\n\n924\n00:38:01,890 --> 00:38:05,380\nSo, I didn't initialize these drives,\nand so, depending on their status,\n\n925\n00:38:05,380 --> 00:38:08,895\nI've got this check that says,\nadd all eligible storage to the cluster.\n\n926\n00:38:08,895 --> 00:38:09,890\n>> Mm-hm.\n>> When this is done,\n\n927\n00:38:09,890 --> 00:38:11,830\nif there's no storage in the cluster?\n\n928\n00:38:11,830 --> 00:38:12,830\n>> Right.\n>> I'll know I need to go\n\n929\n00:38:12,830 --> 00:38:13,679\ninitialize-\n>> [LAUGH]\n\n930\n00:38:13,679 --> 00:38:14,505\n>> Those disks, and then we'll\n\n931\n00:38:14,505 --> 00:38:15,180\nadd them manually.\n\n932\n00:38:15,180 --> 00:38:16,980\n>> Yep.\n>> But it may find them.\n\n933\n00:38:16,980 --> 00:38:19,258\nYou know,\nif your disks already have data on them.\n\n934\n00:38:19,258 --> 00:38:21,291\nIf you've been working with them,\nthey might not be imported.\n\n935\n00:38:21,291 --> 00:38:23,330\nSo that is something that happens.\n>> Right.\n\n936\n00:38:23,330 --> 00:38:25,810\n>> I'll go ahead and hit Next,\nand let's see what happens.\n\n937\n00:38:25,810 --> 00:38:29,170\nNow, not only is it configuring\nthe server that I'm on,\n\n938\n00:38:29,170 --> 00:38:32,760\nit's configuring Mike's server also,\nbecause we added both nodes.\n\n939\n00:38:32,760 --> 00:38:37,140\nIf I hadn't installed the fail\nover cluster feature on Mike's.\n\n940\n00:38:37,140 --> 00:38:38,756\nIt would actually install it right now.\n\n941\n00:38:38,756 --> 00:38:41,612\n>> [INAUDIBLE]\n>> So it's kinda cool that it does that.\n\n942\n00:38:41,612 --> 00:38:44,340\nAll right, it says that we\nsucceeded with a warning somewhere.\n\n943\n00:38:44,340 --> 00:38:45,370\nLet's see.\n\n944\n00:38:45,370 --> 00:38:47,860\nNo appropriate disk could be found for\nthe quorum disk, all right, so\n\n945\n00:38:47,860 --> 00:38:49,810\nit didn't find my disks.\n\n946\n00:38:49,810 --> 00:38:51,540\nAnd so I'll have to deal with that.\n\n947\n00:38:51,540 --> 00:38:52,250\n>> [INAUDIBLE] as well.\n\n948\n00:38:52,250 --> 00:38:54,580\n>> All right, so\nwe'll go ahead and finish that.\n\n949\n00:38:54,580 --> 00:38:57,900\nAll right, now we have a cluster.\n\n950\n00:38:57,900 --> 00:38:59,949\nAlthough you could argue that we've had\na cluster here for quite some time.\n\n951\n00:38:59,949 --> 00:39:01,860\n>> [LAUGH]\n>> Now we have one that we\n\n952\n00:39:01,860 --> 00:39:02,600\ncreated on purpose.\n\n953\n00:39:02,600 --> 00:39:04,045\n>> Yeah, this one's intentional.\n\n954\n00:39:04,045 --> 00:39:05,710\n[LAUGH]\n>> All right,\n\n955\n00:39:05,710 --> 00:39:08,600\nso when we take a look at the cluster,\nwhat do we see?\n\n956\n00:39:08,600 --> 00:39:12,371\nWell, you get a couple of options in here,\nthe most important one is nodes.\n\n957\n00:39:12,371 --> 00:39:14,940\n>> Right.\n>> Because that's where we can see\n\n958\n00:39:14,940 --> 00:39:18,220\neach of the servers added to our\ncluster and their current health.\n\n959\n00:39:18,220 --> 00:39:20,960\nSo I can see server one and\nserver two are both up.\n\n960\n00:39:20,960 --> 00:39:21,990\n>> Right.\n>> And they're happy, okay?\n\n961\n00:39:23,170 --> 00:39:24,070\nSo, so there we go.\n\n962\n00:39:24,070 --> 00:39:27,050\nThat's good, but\nthey're not really running anything.\n\n963\n00:39:27,050 --> 00:39:30,520\nWe haven't added any services or\nanything, so when we go into roles,\n\n964\n00:39:30,520 --> 00:39:33,800\nyou're not gonna see much in here because\nI don't have any cluster services yet.\n\n965\n00:39:33,800 --> 00:39:35,097\n>> Right.\n>> So we've got a lot more work to do.\n\n966\n00:39:36,430 --> 00:39:39,650\nIf I go under storage though, which is\nprobably the next thing I need to deal\n\n967\n00:39:39,650 --> 00:39:42,883\nwith, I'll see that there's nothing here-\n>> We have nothing.\n\n968\n00:39:42,883 --> 00:39:43,590\n>> And that's a problem.\n\n969\n00:39:43,590 --> 00:39:45,110\n>> Yep.\n>> Okay, so\n\n970\n00:39:45,110 --> 00:39:46,870\nwe do need to get some disks in there.\n\n971\n00:39:46,870 --> 00:39:51,090\nIn order to get ready for that,\nI'm gonna go into computer management.\n\n972\n00:39:51,090 --> 00:39:57,280\nNow, we're using shared storage,\nstorage that both servers can see.\n\n973\n00:39:57,280 --> 00:40:01,483\nSo it's important that you set\nthis up on one server first.\n\n974\n00:40:01,483 --> 00:40:04,677\nAnd when you set it up on the one server,\nthrough the cluster,\n\n975\n00:40:04,677 --> 00:40:07,330\nit will automatically add\nit to the second server.\n\n976\n00:40:07,330 --> 00:40:09,224\nSo it's gonna do it for you automatically.\n\n977\n00:40:09,224 --> 00:40:13,969\nYou never want to configure your storage\nfrom two systems at the same time,\n\n978\n00:40:13,969 --> 00:40:16,620\nyou run the risk of crossing the streams.\n\n979\n00:40:16,620 --> 00:40:18,328\n>> You don't want to do that.\n\n980\n00:40:18,328 --> 00:40:21,500\n>> All right ,so I'm just going\nto go into disk management, and\n\n981\n00:40:21,500 --> 00:40:25,930\nI expect I will see my disks off line or\njust flagged as foreign.\n\n982\n00:40:25,930 --> 00:40:27,510\nYou know, it will say like foreign disk.\n\n983\n00:40:31,610 --> 00:40:33,427\nThere they are just an unknown state.\n\n984\n00:40:33,427 --> 00:40:35,126\n>> Mm-hm.\n>> So, there in an unknown state, so\n\n985\n00:40:35,126 --> 00:40:36,866\nI'm just gonna go in here and\nbring them online.\n\n986\n00:40:40,145 --> 00:40:43,654\nAll right,\nI'll bring this other one online also,\n\n987\n00:40:43,654 --> 00:40:45,735\nand now I can initialize them.\n\n988\n00:40:45,735 --> 00:40:48,910\nNow initialized or, wait a second.\n\n989\n00:40:48,910 --> 00:40:49,435\nDo I?\n>> Mm-hm.\n\n990\n00:40:49,435 --> 00:40:50,265\n>> Yeah, I initialize them.\n\n991\n00:40:50,265 --> 00:40:50,921\n>> Yeah, okay. All right,\n\n992\n00:40:50,921 --> 00:40:53,550\nso- >> You haven't format it yet, but-\n>> I'll go ahead initialize.\n\n993\n00:40:53,550 --> 00:40:54,660\nThere we go.\n\n994\n00:40:54,660 --> 00:40:55,950\nSo now, I've got the two disks.\n\n995\n00:40:55,950 --> 00:41:00,768\nNow one of them is two terabytes in size,\nwhich is where we're gonna store our VMs.\n\n996\n00:41:00,768 --> 00:41:02,020\nThe other's one terabyte, like I said,\n\n997\n00:41:02,020 --> 00:41:06,615\nI would have much rather had 100 meg,\nbut a terabyte will work.\n\n998\n00:41:06,615 --> 00:41:07,900\n[LAUGH] Just a little over kill.\n\n999\n00:41:07,900 --> 00:41:12,270\nAll right, that's not quite what I wanted.\n\n1000\n00:41:12,270 --> 00:41:17,090\nSo, let me go back into\nour cluster manager.\n\n1001\n00:41:17,090 --> 00:41:21,200\nAnd I'm just going to add those discs in,\nso I'll go to add disc, and\n\n1002\n00:41:21,200 --> 00:41:24,330\nnow it finds those discs right there,\nthe two cluster discs.\n\n1003\n00:41:24,330 --> 00:41:24,870\n>> I see.\n\n1004\n00:41:24,870 --> 00:41:28,620\n>> So, it's got them, I'll go ahead and\nsay okay, and bring those in.\n\n1005\n00:41:30,160 --> 00:41:33,200\nAll right, now I'm going to give it\na second It says some errors were found.\n\n1006\n00:41:33,200 --> 00:41:34,070\nThat's not good.\n\n1007\n00:41:35,370 --> 00:41:39,880\nIncorrect function,\nlet's see what's up with that.\n\n1008\n00:41:39,880 --> 00:41:42,050\nYou always it's good [INAUDIBLE]\nwhen it shows you the error.\n\n1009\n00:41:42,050 --> 00:41:44,660\nThere was an error configuring or\ncreating or bringing online.\n\n1010\n00:41:44,660 --> 00:41:45,620\nThe following errors.\n\n1011\n00:41:46,790 --> 00:41:51,360\nThe cluster resource could not be\nbrought online by the resource [COUGH]\n\n1012\n00:41:51,360 --> 00:41:52,880\nSlow Computer Management is.\n\n1013\n00:41:52,880 --> 00:41:55,660\nWe might have gone a little too fast for\nDisk Management.\n\n1014\n00:41:55,660 --> 00:41:56,750\n>> You know, that is probably true.\n\n1015\n00:41:56,750 --> 00:41:57,540\n>> Possibly.\n\n1016\n00:41:57,540 --> 00:42:01,199\n>> Let's see if it will let me bring it\nonline now, if I just give it a moment.\n\n1017\n00:42:03,958 --> 00:42:05,142\nNo, it is dying out.\n\n1018\n00:42:05,142 --> 00:42:12,033\nLet me see what happened here.\n\n1019\n00:42:12,033 --> 00:42:14,594\nReserve, and it brought them down.\n\n1020\n00:42:15,920 --> 00:42:18,275\nWhat should happen and\nI'm seeing part of what I expect.\n\n1021\n00:42:18,275 --> 00:42:20,160\n>> Mm-hm.\n>> See how these discs are showing as\n\n1022\n00:42:20,160 --> 00:42:22,170\nreserved\n>> All right.\n\n1023\n00:42:22,170 --> 00:42:25,600\nWhat'll happen is the cluster will\nflag them as reserve which means\n\n1024\n00:42:25,600 --> 00:42:27,420\ndon't write to this disk.\n\n1025\n00:42:27,420 --> 00:42:27,960\n>> Right.\n\n1026\n00:42:27,960 --> 00:42:32,760\n>> And only when you have control\nof that disk through the cluster\n\n1027\n00:42:32,760 --> 00:42:35,390\nwill you actually bring online and\nwork with it.\n\n1028\n00:42:35,390 --> 00:42:39,500\nSo, if you have ten nodes\n>> Nine of the nodes\n\n1029\n00:42:39,500 --> 00:42:43,210\nare gonna show the discs as offline and\nreserved, and\n\n1030\n00:42:43,210 --> 00:42:46,550\none of them is gonna show\nthe disc as online and running.\n\n1031\n00:42:46,550 --> 00:42:49,250\nSo, when it added it to the cluster,\nit flagged it as reserved for\n\n1032\n00:42:49,250 --> 00:42:51,220\na moment to make sure that\nwe didn't mess with it.\n\n1033\n00:42:51,220 --> 00:42:52,670\nThen it tried to bring it online.\n\n1034\n00:42:52,670 --> 00:42:54,500\nFor some reason,\nit didn't bring it online.\n\n1035\n00:42:54,500 --> 00:42:59,520\nIt says it's offline because of a policy\nset by an administrator, which was not me.\n\n1036\n00:42:59,520 --> 00:43:02,600\nOh, oh no, it says it's managed\nby fail over clustering.\n\n1037\n00:43:02,600 --> 00:43:07,690\nI will bet, we've got a situation where\nthe cluster manager is just not happy.\n\n1038\n00:43:07,690 --> 00:43:10,140\nSo, I'm going to exit out of that.\n\n1039\n00:43:12,950 --> 00:43:14,810\nCluster management actually has a service.\n\n1040\n00:43:14,810 --> 00:43:16,330\nWe go in here and find it.\n\n1041\n00:43:16,330 --> 00:43:20,460\nIt's just called Windows Failure\nClustering, or something like that, and\n\n1042\n00:43:20,460 --> 00:43:21,232\njust find it.\n\n1043\n00:43:25,565 --> 00:43:26,156\nWell, shoot.\n\n1044\n00:43:26,156 --> 00:43:28,386\n[CROSSTALK]\n>> I think it might start with a C.\n\n1045\n00:43:28,386 --> 00:43:29,470\nIs it Cluster now?\n\n1046\n00:43:29,470 --> 00:43:31,160\n>> There it is, Cluster Service.\n\n1047\n00:43:31,160 --> 00:43:33,180\nAll right, so\nI'm going to restart the cluster service.\n\n1048\n00:43:33,180 --> 00:43:35,550\nNow, obviously,\nif you are hosting any cluster services,\n\n1049\n00:43:35,550 --> 00:43:37,380\nthat'll generate a failure.\n\n1050\n00:43:37,380 --> 00:43:40,760\nWe're in setup, so\nI'm not too worried about that.\n\n1051\n00:43:40,760 --> 00:43:43,055\nSo, let me get back into\nthe failover cluster manager.\n\n1052\n00:43:46,605 --> 00:43:48,649\nAnd looks like we're still\nthrowing an error, aren't we?\n\n1053\n00:43:55,900 --> 00:43:57,073\nAnd incorrect function.\n\n1054\n00:43:57,073 --> 00:43:59,150\n>> That's a helpful error too.\n\n1055\n00:43:59,150 --> 00:44:01,500\n>> It's terribly helpful.\n\n1056\n00:44:01,500 --> 00:44:02,970\nIt won't bring it online, will it?\n\n1057\n00:44:02,970 --> 00:44:04,400\nYup, incorrect function.\n\n1058\n00:44:04,400 --> 00:44:06,670\nAll right, well, I may have to take\na look and see what's going on there.\n\n1059\n00:44:06,670 --> 00:44:08,360\nIt's a straight up iSCSI drive, so\n\n1060\n00:44:08,360 --> 00:44:10,120\nit should just Connected to it and\nbrought it up.\n\n1061\n00:44:10,120 --> 00:44:11,180\n>> Yeah.\n>> You know what?\n\n1062\n00:44:11,180 --> 00:44:11,960\nLets do this.\n\n1063\n00:44:11,960 --> 00:44:13,310\nLet me remove the disk.\n\n1064\n00:44:13,310 --> 00:44:14,190\nLets get that out of there.\n\n1065\n00:44:14,190 --> 00:44:19,280\nAnd I am just going to make\nsure outside of clustering.\n\n1066\n00:44:19,280 --> 00:44:20,970\nThat we can actually get to it.\n\n1067\n00:44:20,970 --> 00:44:21,893\nSo, if I remove those.\n\n1068\n00:44:24,722 --> 00:44:28,647\nCuz I need to eliminate that it's\nan issue with the disk its self.\n\n1069\n00:44:28,647 --> 00:44:30,047\nCuz we might just have\na problem with the [CROSSTALK]\n\n1070\n00:44:30,047 --> 00:44:31,229\njust because of the [INAUDIBLE] scan or\nwhatever.\n\n1071\n00:44:31,229 --> 00:44:33,702\n>> Right.\nSo, I'm gonna go in here and\n\n1072\n00:44:33,702 --> 00:44:39,105\nI'll take the 2 terabyte disk and\nwe should be able to bring it online now.\n\n1073\n00:44:39,105 --> 00:44:44,340\nYup, and I'm just gonna experimental\ncreate a new volume here.\n\n1074\n00:44:44,340 --> 00:44:45,099\nLet's see if it'll let me do that.\n\n1075\n00:44:48,689 --> 00:44:51,605\nAnd I'll make sure that I can access it,\nbecause if I can't even access it as\n\n1076\n00:44:51,605 --> 00:44:54,266\na normal disk And it certainly isn't\ngonna work as a clustered disk.\n\n1077\n00:44:54,266 --> 00:44:58,220\nAnd it looks like it is-\n>> Seems to be working.\n\n1078\n00:44:58,220 --> 00:45:00,660\n>> Coming along, yeah.\n\n1079\n00:45:00,660 --> 00:45:03,320\nWell, apparently I'm not going to be\nable to get it to do two things at once.\n\n1080\n00:45:03,320 --> 00:45:05,690\nSo-\n>> God forbid you multitask.\n\n1081\n00:45:05,690 --> 00:45:07,310\n>> I know.\nThat would be crazy talk.\n\n1082\n00:45:07,310 --> 00:45:09,400\n>> Disk management,\nit annoys me sometimes.\n\n1083\n00:45:09,400 --> 00:45:10,730\nIt's a little slow.\n\n1084\n00:45:10,730 --> 00:45:14,290\nWell, I know that has a lot to do with it.\n\n1085\n00:45:14,290 --> 00:45:15,520\n>> Yes.\n>> Well, in a VM environment,\n\n1086\n00:45:15,520 --> 00:45:16,350\nit's really slow.\n\n1087\n00:45:16,350 --> 00:45:19,080\nBut here,\nit's probably slow because it is SCSI.\n\n1088\n00:45:19,080 --> 00:45:19,580\n>> Right.\n\n1089\n00:45:19,580 --> 00:45:21,420\n>> So it's like formatting a drive, but\n\n1090\n00:45:21,420 --> 00:45:24,920\ninstead of having a six gigabit SATA\nconnection or something like that,\n\n1091\n00:45:24,920 --> 00:45:29,870\nit's got a one gigabit network connection\n>> Which with TCPIP overhead is more like\n\n1092\n00:45:29,870 --> 00:45:33,800\na 450 megabit connection, so\nit really doesn't have a lot of bandwidth.\n\n1093\n00:45:33,800 --> 00:45:35,420\nBut yeah, I was able to format it.\n\n1094\n00:45:35,420 --> 00:45:37,880\nSo, the disk itself is working just fine.\n\n1095\n00:45:37,880 --> 00:45:40,220\n>> See if it likes it better formatted.\n\n1096\n00:45:40,220 --> 00:45:41,680\n>> I think it gets angry\nat you if it's formatted.\n\n1097\n00:45:41,680 --> 00:45:44,540\n>> That's what I was thinking,\nbut at least we can find out.\n\n1098\n00:45:44,540 --> 00:45:49,612\nAll right, whoops, oh, you know what,\ngreat, now I'm going to launch iTunes.\n\n1099\n00:45:49,612 --> 00:45:52,440\n>> [LAUGH]\n>> Thank you Steve Jobs.\n\n1100\n00:45:52,440 --> 00:45:55,350\nAll right, so here we go,\nso let's go in here.\n\n1101\n00:45:55,350 --> 00:45:58,600\nI'm pretty sure it won't\nLet's see if it will do it.\n\n1102\n00:45:58,600 --> 00:46:00,490\nNo, it'll bring it in formatted.\n\n1103\n00:46:00,490 --> 00:46:04,240\nLet's try to bring that one in formatted,\nsee if it gets happy there.\n\n1104\n00:46:06,450 --> 00:46:07,475\nWell, same thing.\n\n1105\n00:46:07,475 --> 00:46:11,130\n>> [INAUDIBLE]\n>> I'm gonna\n\n1106\n00:46:11,130 --> 00:46:12,970\nhave to look this error number up.\n\n1107\n00:46:12,970 --> 00:46:14,230\nYou know, it gives us one of those.\n\n1108\n00:46:14,230 --> 00:46:18,235\nYou can see the error number over\nhere 1 of those nice little.\n\n1109\n00:46:18,235 --> 00:46:19,790\n[COUGH]\n>> Make the error come again,\n\n1110\n00:46:19,790 --> 00:46:25,400\nI think there was a more\ninformation button or something.\n\n1111\n00:46:25,400 --> 00:46:28,680\nIt gave that error number.\n\n1112\n00:46:32,220 --> 00:46:35,075\nOr it's information details when you\nright click on it, maybe that's it.\n\n1113\n00:46:35,075 --> 00:46:37,650\n[LAUGH] There it is.\n\n1114\n00:46:37,650 --> 00:46:38,380\n>> There we go.\n\n1115\n00:46:38,380 --> 00:46:39,960\nSo it gives us one of\nthose hexidecimal numbers.\n\n1116\n00:46:39,960 --> 00:46:44,080\nI'll have to look that one up and\nsee what our actual problem is there.\n\n1117\n00:46:45,170 --> 00:46:46,420\n>> Let's do this, let's stop and\n\n1118\n00:46:46,420 --> 00:46:48,820\ntake a break while I look that up and\nwe'll find out what it is.\n\n1119\n00:46:48,820 --> 00:46:51,060\nI may be using an iSCSI\nSAN that's not compatible.\n\n1120\n00:46:51,060 --> 00:46:51,600\n>> Yeah, could be.\n>> Right,\n\n1121\n00:46:51,600 --> 00:46:53,350\nI mean that is one of the issues.\n\n1122\n00:46:53,350 --> 00:46:55,190\n>> And we did not run our validation test\n\n1123\n00:46:55,190 --> 00:46:56,780\non our storage so [LAUGH]\n>> We didn't.\n\n1124\n00:46:56,780 --> 00:46:59,030\nThey should run the full validation test,\nbut-\n\n1125\n00:46:59,030 --> 00:47:01,025\n>> Then shoot yourself in the foot.\n\n1126\n00:47:01,025 --> 00:47:01,980\n[LAUGH]\n>> Maybe, lesson learned, right?\n\n1127\n00:47:01,980 --> 00:47:06,130\nSo, all right, let's do this, let's stop\nhere and take a break, when we get back\n\n1128\n00:47:06,130 --> 00:47:09,620\nthe exciting reveal as to what the heck\nis causing this drive not to come online.\n\n1129\n00:47:09,620 --> 00:47:11,120\n>> Absolutely.\n>> [LAUGH] All right, stay tuned,\n\n1130\n00:47:11,120 --> 00:47:12,385\nwe'll be back in a minute.\n\n1131\n00:47:12,385 --> 00:47:19,206\n[SOUND] [SOUND] Alright\nwelcome back everybody.\n\n1132\n00:47:19,206 --> 00:47:22,759\nSo kind of a excellent case in point here.\n\n1133\n00:47:22,759 --> 00:47:27,196\nIt turns out that our is not compatible\nwith Microsoft cluster services so\n\n1134\n00:47:27,196 --> 00:47:30,810\nthat's why we weren't able\nto bring those discs online.\n\n1135\n00:47:30,810 --> 00:47:34,265\nIt kind of reinforces why that\nhardware validation part is there.\n\n1136\n00:47:34,265 --> 00:47:36,860\n[LAUGH]\n>> It is useful isn't it?\n\n1137\n00:47:36,860 --> 00:47:38,980\n>> So just-\n>> In case you're curious,\n\n1138\n00:47:38,980 --> 00:47:44,510\nthe iSCSI box we were using was\nthe Drobo D800i which is their iSCSI SAN.\n\n1139\n00:47:44,510 --> 00:47:48,590\nAnd it's a good box, but\nnot very expensive and now we see why.\n\n1140\n00:47:48,590 --> 00:47:49,820\n>> Yeah. [LAUGH] >> So,\nit's not compatible.\n\n1141\n00:47:49,820 --> 00:47:53,550\nSo what we did is, during the break\nwe whipped up a Windows server.\n\n1142\n00:47:53,550 --> 00:47:55,950\nThat's running the ISCSI target on it.\n\n1143\n00:47:55,950 --> 00:47:59,550\nSo it's actually basically\ncreating it's own ISCSI SAN.\n\n1144\n00:47:59,550 --> 00:48:02,040\nAnd that is compatible, that works.\n\n1145\n00:48:02,040 --> 00:48:03,980\nIt's not the fastest thing in\nthe world but it does work so\n\n1146\n00:48:03,980 --> 00:48:04,810\nwe'll use that instead.\n\n1147\n00:48:04,810 --> 00:48:06,670\n>> For that purposes,\nI think it's acceptable.\n\n1148\n00:48:06,670 --> 00:48:07,320\n>> Yeah.\n\n1149\n00:48:07,320 --> 00:48:10,079\nIt just reinforces though in real life and\nin production, you do wanna\n\n1150\n00:48:10,079 --> 00:48:13,380\nuse commercial grade SANs and not just\nThings that we kinda whip together, right?\n\n1151\n00:48:13,380 --> 00:48:16,729\n>> [LAUGH]\n>> So now what I'm gonna do is I'm gonna\n\n1152\n00:48:16,729 --> 00:48:19,694\ngo through and\nadd the new disks from our new target, and\n\n1153\n00:48:19,694 --> 00:48:22,110\nthe new target was\nthe Windows iSCSI target.\n\n1154\n00:48:22,110 --> 00:48:23,773\n>> Right.\n>> Which gives us a lot more control, so\n\n1155\n00:48:23,773 --> 00:48:25,440\nI was able to create\nthe drives the size I wanted.\n\n1156\n00:48:25,440 --> 00:48:26,890\n>> Yeah.\n>> Instead of the drives it was\n\n1157\n00:48:26,890 --> 00:48:27,530\nforcing me to do.\n\n1158\n00:48:28,760 --> 00:48:31,320\nSo I'm gonna go over here into Disks and\nAdd Disk and\n\n1159\n00:48:31,320 --> 00:48:32,600\nI'll see the disks that show up.\n\n1160\n00:48:32,600 --> 00:48:34,180\nI've created a 100 gig disk,\n\n1161\n00:48:34,180 --> 00:48:37,060\nwhich is where we'll do our\nvirtual machine storage.\n\n1162\n00:48:37,060 --> 00:48:40,530\nAnd I created a 300 meg disk for quorum.\n\n1163\n00:48:40,530 --> 00:48:41,222\nAll right,\n\n1164\n00:48:41,222 --> 00:48:45,730\nnow in earlier versions of Windows we\nwere able to static based on our quorum.\n\n1165\n00:48:45,730 --> 00:48:48,020\n>> Right.\n>> We are gonna see a little feature later\n\n1166\n00:48:48,020 --> 00:48:52,310\non where Windows Server 2012 R2 will\ndynamically grab a disk for quorum.\n\n1167\n00:48:52,310 --> 00:48:52,887\n>> Yep.\n>> And so\n\n1168\n00:48:52,887 --> 00:48:54,780\nit may choose this one gig disk instead.\n\n1169\n00:48:54,780 --> 00:48:57,780\nWe'll see what happens, so\nwe've got that one added in too.\n\n1170\n00:48:57,780 --> 00:49:00,400\nSo I'm going to go ahead and\nsay OK to add those three in.\n\n1171\n00:49:00,400 --> 00:49:03,180\nIt's going to add them, and now we see\nwhat we should have seen a moment ago,\n\n1172\n00:49:03,180 --> 00:49:04,320\nwhich is they all come online.\n\n1173\n00:49:04,320 --> 00:49:05,230\nAll right?\n>> I like it.\n\n1174\n00:49:05,230 --> 00:49:07,150\n>> So compatible hardware is the key.\n\n1175\n00:49:07,150 --> 00:49:08,745\n>> [LAUGH]\n>> That's why that validation\n\n1176\n00:49:08,745 --> 00:49:09,410\nwas, is there.\n\n1177\n00:49:10,800 --> 00:49:13,750\nAll right, so\nnow I've got a real cluster right?\n\n1178\n00:49:13,750 --> 00:49:14,250\n>> Yeah.\n\n1179\n00:49:14,250 --> 00:49:15,795\nYes you do.\n[LAUGH] >> It's kind of funny to say that.\n\n1180\n00:49:15,795 --> 00:49:17,960\nThe cluster was before the break.\n\n1181\n00:49:17,960 --> 00:49:21,970\nSo anyhow,\nnow I've got two servers that are up, and\n\n1182\n00:49:21,970 --> 00:49:24,420\nthey have shared storage between them.\n\n1183\n00:49:24,420 --> 00:49:28,630\nNow Mike's server, he's on server one.\n\n1184\n00:49:28,630 --> 00:49:33,030\nWhen I look at my nodes,\nI can see that server one is up.\n\n1185\n00:49:33,030 --> 00:49:36,280\nIt got a vote, right,\nthat's that quorum, the server's vote.\n\n1186\n00:49:36,280 --> 00:49:37,320\n>> Yep.\n\n1187\n00:49:37,320 --> 00:49:41,440\n>> And its current vote is a 1 which\nmeans it's the active happy server.\n\n1188\n00:49:41,440 --> 00:49:44,875\nMy server got a vote also,\nbut its current vote is a 0,\n\n1189\n00:49:44,875 --> 00:49:47,280\nwhich means that it's just standby.\n\n1190\n00:49:47,280 --> 00:49:47,860\n>> Right.\n\n1191\n00:49:47,860 --> 00:49:49,940\n>> It's just waiting, and not doing much.\n\n1192\n00:49:49,940 --> 00:49:51,070\n>> Just in case I fail, he's ready.\n\n1193\n00:49:51,070 --> 00:49:52,150\n>> Yeah.\n\n1194\n00:49:52,150 --> 00:49:54,452\nBut the cool thing is,\nwhen you have a cluster,\n\n1195\n00:49:54,452 --> 00:49:58,657\nyou don't necessarily care who the master\nis, because you're going through here and\n\n1196\n00:49:58,657 --> 00:50:02,650\nworking with stuff, information, and\nit's handling it all in the background.\n\n1197\n00:50:02,650 --> 00:50:06,850\nAnd things like quorum,\nthat tie-breaker vote, well, Mike and\n\n1198\n00:50:06,850 --> 00:50:09,140\nI only have two servers, right?\n\n1199\n00:50:09,140 --> 00:50:12,480\nThere's two nodes in this cluster,\nan even number, and so\n\n1200\n00:50:12,480 --> 00:50:14,700\nwe could have a tie right now,\nwhich could be a problem.\n\n1201\n00:50:14,700 --> 00:50:19,250\nSo even though it doesn't really show it\nhere It's actually taking away my vote,\n\n1202\n00:50:19,250 --> 00:50:21,960\nwhich I guess it sort of does\nby saying my vote's a 0.\n\n1203\n00:50:21,960 --> 00:50:25,480\nIt's stealing my vote away to make\nsure that I've got an odd number,\n\n1204\n00:50:25,480 --> 00:50:27,520\nthat's part of the automatic\nquorum system.\n\n1205\n00:50:27,520 --> 00:50:29,569\n>> Yeah, that's new to 2012 R2.\n\n1206\n00:50:29,569 --> 00:50:30,180\nExactly.\n\n1207\n00:50:30,180 --> 00:50:30,840\n>> Yeah.\n\n1208\n00:50:30,840 --> 00:50:32,120\nIn every version prior, so\n\n1209\n00:50:32,120 --> 00:50:35,320\nin 2012 and earlier,\nyou had to manually define quorum.\n\n1210\n00:50:35,320 --> 00:50:37,660\nHere, I could just ignore it,\nand let the system handle it.\n\n1211\n00:50:37,660 --> 00:50:40,050\nIn fact, Mike, do they even let\nyou see the quorum options?\n\n1212\n00:50:40,050 --> 00:50:41,360\n>> If you go into\nthe properties of the cluster,\n\n1213\n00:50:41,360 --> 00:50:43,550\nI believe you can go back to one of them.\n\n1214\n00:50:43,550 --> 00:50:45,830\nIt just defaults to the dynamic now.\n\n1215\n00:50:45,830 --> 00:50:46,970\n>> Let's go in here and see.\n\n1216\n00:50:46,970 --> 00:50:48,080\n>> If I'm not mistaken.\n\n1217\n00:50:48,080 --> 00:50:51,410\n>> See if we can find that option in here.\n\n1218\n00:50:51,410 --> 00:50:54,576\nSo we've got File Share Quorum Witness\nif we wanted to set that up, but\n\n1219\n00:50:54,576 --> 00:50:55,770\nthat's not what we want.\n\n1220\n00:50:55,770 --> 00:50:58,150\nOh no, that's our resources anyway, so.\n\n1221\n00:50:58,150 --> 00:51:02,511\n>> So, if you-\n>> Just kinda skimming over it here not\n\n1222\n00:51:02,511 --> 00:51:03,900\nseeing the option offhand.\n\n1223\n00:51:03,900 --> 00:51:06,760\n>> I wonder if it is under the Properties,\nmaybe not.\n\n1224\n00:51:08,220 --> 00:51:09,840\n>> There it is,\nis configure clustom quorum, wow.\n\n1225\n00:51:09,840 --> 00:51:10,350\n>> There it is.\n\n1226\n00:51:10,350 --> 00:51:11,650\n>> Wow, it's hard to say.\n\n1227\n00:51:11,650 --> 00:51:14,173\nSo, I just right-clicked\non the cluster name and\n\n1228\n00:51:14,173 --> 00:51:17,700\nunder More Actions I've got\nConfigure Cluster Quorum Settings.\n\n1229\n00:51:17,700 --> 00:51:21,730\nNow, this used to be a very important\nstep of setting up a cluster.\n\n1230\n00:51:21,730 --> 00:51:24,958\nIt was one of the first things we did,\nbecause if you didn't have your quorum\n\n1231\n00:51:24,958 --> 00:51:27,191\nright you'd get failover\nall sorts of weird times.\n\n1232\n00:51:27,191 --> 00:51:29,651\nOr a failure would happen and it wouldn't\nfailover, which is the worst, right.\n\n1233\n00:51:29,651 --> 00:51:31,521\n>> Exactly, yeah.\n\n1234\n00:51:31,521 --> 00:51:35,721\n>> But now you could ignore this\nbecause the dynamic quorum calculations\n\n1235\n00:51:35,721 --> 00:51:36,930\nare happening, but\n\n1236\n00:51:36,930 --> 00:51:41,650\nif we go in here you'll see where we can\nkind of specify how we want quorum to go.\n\n1237\n00:51:41,650 --> 00:51:46,750\nSo we've got the default here which\nis let Windows figure it out for us.\n\n1238\n00:51:46,750 --> 00:51:48,308\n>> Yeah, let the cluster,\ncuz as the node drops out,\n\n1239\n00:51:48,308 --> 00:51:50,020\nor you add new nodes,\nit could rearrange who has votes.\n\n1240\n00:51:50,020 --> 00:51:53,180\nIf a node drops, and now all of a sudden\nyou've got an even number of nodes.\n\n1241\n00:51:53,180 --> 00:51:54,400\nIt'll grab a disk witness and\n\n1242\n00:51:54,400 --> 00:51:56,750\nthrow it in there just to make\nsure you've got an odd number.\n\n1243\n00:51:56,750 --> 00:51:57,610\n>> Yeah.\n>> It does pretty good.\n\n1244\n00:51:57,610 --> 00:51:58,560\nIt'll do tie breakers.\n\n1245\n00:51:58,560 --> 00:51:59,600\n>> That's really cool.\n\n1246\n00:51:59,600 --> 00:52:02,100\nCuz it used to be every time you added\na new node, you'd have to go and\n\n1247\n00:52:02,100 --> 00:52:05,030\nreconfigure quorum,\nbecause unless you're adding two nodes at\n\n1248\n00:52:05,030 --> 00:52:08,110\nonce you were either changing\nfrom odd to even or even to odd.\n\n1249\n00:52:08,110 --> 00:52:09,760\nAnd so you'd have to go and update it.\n\n1250\n00:52:09,760 --> 00:52:14,150\nBut now it just figures it out so\nreally you shouldn't have to come in here.\n\n1251\n00:52:14,150 --> 00:52:17,060\nBut the reason they have it\nis backwards compatibility,\n\n1252\n00:52:17,060 --> 00:52:20,100\nsome people prefer a certain method so\nyou can come in and do that.\n\n1253\n00:52:20,100 --> 00:52:23,480\nYou'll see, select the quorum witness.\n\n1254\n00:52:23,480 --> 00:52:27,050\n>> Yeah, where if you want to let it\nstill dynamically control the quorum, but\n\n1255\n00:52:27,050 --> 00:52:29,730\nyou want to specify what it's using for\nthe witness,\n\n1256\n00:52:29,730 --> 00:52:32,580\nand not let it grab one of\nyour drives on its own.\n\n1257\n00:52:32,580 --> 00:52:35,700\nYou can choose that option, and then\nthe last one, I think, lets me go back,\n\n1258\n00:52:35,700 --> 00:52:37,860\nI want to say that lets me go\nback into the old options.\n\n1259\n00:52:37,860 --> 00:52:39,530\n[CROSSTALK]\n>> And make up whatever you want, yeah.\n\n1260\n00:52:39,530 --> 00:52:43,134\nYeah, now, that witness we refer\nto it as the tie breaker, and\n\n1261\n00:52:43,134 --> 00:52:45,110\nthe official name is the witness.\n\n1262\n00:52:45,110 --> 00:52:48,515\nAnd it can be on your shared\nstorage like I talked about, or\n\n1263\n00:52:48,515 --> 00:52:51,030\non a network share like Mike talked about.\n\n1264\n00:52:51,030 --> 00:52:53,200\nAnd if you say select\na quorum witness here,\n\n1265\n00:52:53,200 --> 00:52:55,830\nthat's your kind of\nchance to hard set that.\n\n1266\n00:52:55,830 --> 00:52:57,460\nBut you can go under Advanced and\n\n1267\n00:52:57,460 --> 00:53:00,180\nsee how my wizard list is just\ngetting bigger and bigger.\n\n1268\n00:53:00,180 --> 00:53:03,260\nBut let's go through the Advanced\njust to see the options.\n\n1269\n00:53:03,260 --> 00:53:04,230\nAnd so we'll see here,\n\n1270\n00:53:04,230 --> 00:53:08,570\nselect your voting configuration,\nwhich servers are allowed to vote.\n\n1271\n00:53:08,570 --> 00:53:11,000\n>> Right.\n>> And all nodes is chosen by default, but\n\n1272\n00:53:11,000 --> 00:53:13,650\nyou can pick and choose who you\nwant to allow to get a vote.\n\n1273\n00:53:13,650 --> 00:53:17,180\nSo you might have an even number of\nservers and you just exclude one person.\n\n1274\n00:53:17,180 --> 00:53:18,600\n>> Yeah.\n>> Now you've got an odd number.\n\n1275\n00:53:18,600 --> 00:53:22,070\nDoesn't mean that one person can never\nbecome active, they just don't get a vote.\n\n1276\n00:53:22,070 --> 00:53:23,730\n>> Right.\n>> Other people have to tell it to become\n\n1277\n00:53:23,730 --> 00:53:26,800\nactive, all right?\n\n1278\n00:53:26,800 --> 00:53:29,965\nWe'll see oh, and you know, there's a neat\noption down here which is no nodes.\n\n1279\n00:53:29,965 --> 00:53:30,930\n>> Uh-huh.\n>> And you mentioned that\n\n1280\n00:53:30,930 --> 00:53:31,760\nearlier, right Mike?\n\n1281\n00:53:31,760 --> 00:53:32,510\n>> Yeah, yeah.\n>> And\n\n1282\n00:53:32,510 --> 00:53:34,568\nthat's where we rely on\nthe witness exclusively.\n\n1283\n00:53:34,568 --> 00:53:38,310\n>> And I really, like I said, it's not\nrecommended, and I don't know about you,\n\n1284\n00:53:38,310 --> 00:53:42,010\nI've never really seen a place where\nthat was the option I wanted to go with.\n\n1285\n00:53:42,010 --> 00:53:43,110\n>> And.\n>> Cuz you are making,\n\n1286\n00:53:43,110 --> 00:53:45,680\nnow that witness is a single point\nof failure for your entire cluster.\n\n1287\n00:53:45,680 --> 00:53:48,430\nYou could have 20 nodes, 21 nodes,\nthat are all up and running,\n\n1288\n00:53:48,430 --> 00:53:50,305\nthe disc fails and you're done.\n\n1289\n00:53:50,305 --> 00:53:55,140\n>> Well, where that would be handy is if\nyou didn't have a heartbeat network and\n\n1290\n00:53:55,140 --> 00:53:56,380\nyou had shared storage.\n\n1291\n00:53:56,380 --> 00:53:59,010\nIf the shared storage goes down,\nyou're down anyway.\n\n1292\n00:53:59,010 --> 00:54:00,618\n>> Yeah, I can see that's where, yeah.\n\n1293\n00:54:00,618 --> 00:54:01,720\n>> So, maybe that scenario.\n\n1294\n00:54:01,720 --> 00:54:04,170\n>> If you had a required resource,\nthat if they can't get to it,\n\n1295\n00:54:04,170 --> 00:54:06,460\nthere's no point in running\nthe quorum clustering up.\n\n1296\n00:54:06,460 --> 00:54:09,490\n>> But the cost of that second\nnetwork card is next to nothing, and\n\n1297\n00:54:09,490 --> 00:54:12,030\nmost servers have two or\nfour network cards in them anyway, so\n\n1298\n00:54:12,030 --> 00:54:15,100\nit's just kind of a ridiculous option.\n\n1299\n00:54:15,100 --> 00:54:18,980\nThen if we chose to pick a quorum witness,\nright, I've got configure a disk witness.\n\n1300\n00:54:18,980 --> 00:54:23,320\nThat's where we use the shared storage,\nor use a share, a file share.\n\n1301\n00:54:23,320 --> 00:54:26,430\nAnd the file share can be on a server\nthat's not even a part of the cluster.\n\n1302\n00:54:26,430 --> 00:54:30,130\nI mean it needs to be on the domain,\nbut they can use a file share wherever.\n\n1303\n00:54:30,130 --> 00:54:33,540\nOr you can tell it not to use a witness at\nall, so you've got that kind of choice.\n\n1304\n00:54:33,540 --> 00:54:38,490\nI'm going to choose Disk Witness, and\nthen it'll ask which disk you want to use.\n\n1305\n00:54:38,490 --> 00:54:40,390\nSo now I can tell it,\nhey, that 300 meg disk,\n\n1306\n00:54:40,390 --> 00:54:41,520\nwhich I don't remember which one it is.\n\n1307\n00:54:41,520 --> 00:54:42,750\n>> That little tiny one.\n\n1308\n00:54:42,750 --> 00:54:43,890\n>> Which one is 300 megs?\n\n1309\n00:54:43,890 --> 00:54:44,900\nOh this guy.\n\n1310\n00:54:44,900 --> 00:54:48,860\nI'll pick that tiny one and\nsay let's use that as the quorum disk.\n\n1311\n00:54:48,860 --> 00:54:50,610\nI want to use that one specifically.\n\n1312\n00:54:50,610 --> 00:54:53,320\nRight, which is probably what\nit would have done on it's own.\n\n1313\n00:54:53,320 --> 00:54:58,244\n>> I would assume, yeah, you wouldn't, but\nyou know what that spells so, [LAUGH].\n\n1314\n00:54:58,244 --> 00:55:01,299\n>> All right, so yeah, we'll hard set it\njust so we can prove that it works, and\n\n1315\n00:55:01,299 --> 00:55:03,760\nthen we just get our confirmation here and\nwe can finish it up.\n\n1316\n00:55:03,760 --> 00:55:08,430\nNow the next thing it's got a little\nbit of a stuff there actually makes\n\n1317\n00:55:08,430 --> 00:55:10,700\nthe changes and then it reports back.\n\n1318\n00:55:10,700 --> 00:55:13,685\nNow the reason I want to do\nthis is I wanted to show how,\n\n1319\n00:55:13,685 --> 00:55:15,560\nnoticed what happened to Disk 2.\n\n1320\n00:55:15,560 --> 00:55:18,170\nIt's now not available for storage but\n\n1321\n00:55:18,170 --> 00:55:21,760\nit's been flagged as\ndisk witness in a quorum.\n\n1322\n00:55:21,760 --> 00:55:25,790\nAs we started setting up our cluster,\nit probably would have grabbed this disk\n\n1323\n00:55:25,790 --> 00:55:29,745\nanyway, but now I forced it to grab that\none, so I’ve kind of assigned it, right.\n\n1324\n00:55:29,745 --> 00:55:32,590\nNow that disk is pretty small,\nat only 300 megs,\n\n1325\n00:55:32,590 --> 00:55:36,150\nnotice down here it’s showing me that\nkind of utilization or whatever.\n\n1326\n00:55:36,150 --> 00:55:40,530\nTo use it for quorum,\nit's using hardly any of it,\n\n1327\n00:55:40,530 --> 00:55:43,330\nlooks like about 30 megs of\nit is actually being used.\n\n1328\n00:55:43,330 --> 00:55:45,440\nSo you don't need a ton of space here.\n\n1329\n00:55:45,440 --> 00:55:46,857\nIt really is just timestamps and\n\n1330\n00:55:46,857 --> 00:55:48,790\na little bit of other binary\ndata that's stored there.\n\n1331\n00:55:48,790 --> 00:55:50,582\nNot much needed.\n\n1332\n00:55:50,582 --> 00:55:52,890\nAll right, but these other\ndisks are available for me now.\n\n1333\n00:55:52,890 --> 00:55:56,106\nI can use them for whatever the heck I\nwant, and if I rerun that wizard, and\n\n1334\n00:55:56,106 --> 00:55:59,840\njust put it back to the default, it would\ngo back to dynamic quorum and use that.\n\n1335\n00:55:59,840 --> 00:56:01,350\nAnd it may, I guess we could do that.\n\n1336\n00:56:01,350 --> 00:56:02,730\nIt might release that disk.\n\n1337\n00:56:02,730 --> 00:56:04,090\nLet's see, I'm curious,\n\n1338\n00:56:04,090 --> 00:56:06,654\na little experiment, so-\n>> You would think it will get\n\n1339\n00:56:06,654 --> 00:56:07,570\nthe smallest one.\n\n1340\n00:56:07,570 --> 00:56:09,730\nI mean, maybe, I hope it\nwouldn't grab the terabyte drive-\n\n1341\n00:56:09,730 --> 00:56:10,320\n>> Who knows.\n\n1342\n00:56:10,320 --> 00:56:11,131\n[LAUGH] All right.\n\n1343\n00:56:11,131 --> 00:56:12,198\n>> To use as a disk witness.\n\n1344\n00:56:12,198 --> 00:56:13,521\n>> So I'm just going to go\nthrough the wizard again.\n\n1345\n00:56:13,521 --> 00:56:16,585\nThis time I'll tell it to go back to\nthe default quorum configuration.\n\n1346\n00:56:16,585 --> 00:56:18,799\nI notice it's not really\ngiving me any options.\n\n1347\n00:56:18,799 --> 00:56:20,483\n>> With this type it's disk witness.\n\n1348\n00:56:20,483 --> 00:56:23,978\n>> Yeah, and it said disk one, which I\ndon't remember which one is disk one.\n\n1349\n00:56:23,978 --> 00:56:24,479\n>> I don't either.\n>> So\n\n1350\n00:56:24,479 --> 00:56:25,129\nwe'll see, watch it'll be the big one.\n\n1351\n00:56:25,129 --> 00:56:27,509\nWe'll find out, yeah [LAUGH].\n\n1352\n00:56:27,509 --> 00:56:31,734\n>> [LAUGH] And, so I'll go in here,\nand we'll see which one is disk one.\n\n1353\n00:56:31,734 --> 00:56:33,115\nIt is the big one, isn't it.\n\n1354\n00:56:33,115 --> 00:56:33,893\nIt's the 1 GB.\n\n1355\n00:56:33,893 --> 00:56:34,563\n>> Oh, 1 GB.\n\n1356\n00:56:34,563 --> 00:56:35,620\nAll right, so it went bigger.\n\n1357\n00:56:35,620 --> 00:56:37,870\nSo it, and it must have just picked\nthat one because it was first.\n\n1358\n00:56:37,870 --> 00:56:39,082\n>> Probably first in line, yeah.\n\n1359\n00:56:39,082 --> 00:56:42,050\nBut this is why it's handy for\nyou to be able to set which one it is.\n\n1360\n00:56:42,050 --> 00:56:44,280\n>> Yeah, if you want to for\nit to be one in particular.\n\n1361\n00:56:44,280 --> 00:56:48,260\nThe other thing is,\nit can move if it deems necessary.\n\n1362\n00:56:48,260 --> 00:56:51,140\nIf you've added enough nodes, and\nit runs out of space, it can move on you.\n\n1363\n00:56:51,140 --> 00:56:54,290\nIf you've manually set it,\nit wont move, but all right.\n\n1364\n00:56:54,290 --> 00:56:55,140\nSo we're back in business.\n\n1365\n00:56:55,140 --> 00:56:56,000\nThat's our tie breaker.\n\n1366\n00:56:56,000 --> 00:56:57,725\nYou'll see it's taking\nthe same amount of space.\n\n1367\n00:56:57,725 --> 00:56:58,540\n>> Mm-hm.\n\n1368\n00:56:58,540 --> 00:56:59,440\n>> But it's a much bigger drive.\n\n1369\n00:56:59,440 --> 00:57:01,460\n>> Yeah, got plenty of room to drive.\n\n1370\n00:57:01,460 --> 00:57:02,815\n>> All right, so\nnow we're running the cluster.\n\n1371\n00:57:02,815 --> 00:57:03,710\n>> Mm-hm.\n>> These two servers\n\n1372\n00:57:03,710 --> 00:57:04,520\nare clustered together.\n\n1373\n00:57:04,520 --> 00:57:09,995\nThey're up, they've got a shared IP\nbetween them and we're done, right?\n\n1374\n00:57:09,995 --> 00:57:10,795\n>> Not really.\n\n1375\n00:57:10,795 --> 00:57:11,405\n>> Not really.\n\n1376\n00:57:11,405 --> 00:57:14,025\n>> Yeah cuz really,\nwe've got this cluster but\n\n1377\n00:57:14,025 --> 00:57:16,705\nit's not providing any services\nto the network at this point.\n\n1378\n00:57:16,705 --> 00:57:21,225\n>> Remember in Network Load Balancing,\nin NLB, how we had to do port filters?\n\n1379\n00:57:21,225 --> 00:57:24,545\nWe had to specify what ports would get\nload balanced between the systems, and\n\n1380\n00:57:24,545 --> 00:57:26,595\nby default it did everything.\n\n1381\n00:57:26,595 --> 00:57:30,660\nWell with failover clusters,\nby default it does nothing.\n\n1382\n00:57:30,660 --> 00:57:31,400\n>> Right.\n>> And\n\n1383\n00:57:31,400 --> 00:57:35,480\nif we want something to failover,\nwe have to create what are called cluster\n\n1384\n00:57:35,480 --> 00:57:38,090\nresources\n>> The resources are what we're going to\n\n1385\n00:57:38,090 --> 00:57:39,160\nmake redundant, and\n\n1386\n00:57:39,160 --> 00:57:44,220\nyou can only make things redundant if\nthey're designed to support clustering.\n\n1387\n00:57:44,220 --> 00:57:45,745\n>> Not everything is.\n\n1388\n00:57:45,745 --> 00:57:50,565\nSo Microsoft Exchange mailbox\nservers don't support clustering.\n\n1389\n00:57:50,565 --> 00:57:52,135\nAnd so they won't let you do it.\n\n1390\n00:57:52,135 --> 00:57:54,555\nThey support their, they have their\nown little replication they do, so\n\n1391\n00:57:54,555 --> 00:57:55,645\nthey don't need it.\n\n1392\n00:57:55,645 --> 00:57:57,929\nSo you have a lot of software\nout there that's like that.\n\n1393\n00:57:57,929 --> 00:57:59,868\nThat just doesn't support clustering.\n\n1394\n00:57:59,868 --> 00:58:03,837\nBut if you up here to Roles, we'll see\nin here where we can configure some\n\n1395\n00:58:03,837 --> 00:58:08,020\nof the roles and the various resources\nthat are available for us to cluster.\n\n1396\n00:58:08,020 --> 00:58:11,790\nAnd we saw it briefly when I pulled\nup the properties for the cluster.\n\n1397\n00:58:11,790 --> 00:58:14,080\n>> Right.\n>> You've got your Resource Types, and\n\n1398\n00:58:14,080 --> 00:58:16,340\nhere's all the different\nthings that we can cluster.\n\n1399\n00:58:16,340 --> 00:58:18,450\nSo DFS replicated folders.\n\n1400\n00:58:18,450 --> 00:58:19,507\n>> Right.\n>> A DHCP server,\n\n1401\n00:58:19,507 --> 00:58:21,862\nI've never done that in my experience.\n\n1402\n00:58:21,862 --> 00:58:23,256\n>> No.\n\n1403\n00:58:23,256 --> 00:58:23,756\n>> You've got-\n>> And\n\n1404\n00:58:23,756 --> 00:58:28,256\nlater on in the show we're going to learn\nabout something called DHCP failover,\n\n1405\n00:58:28,256 --> 00:58:31,709\nwhich eliminates any need to try\nto cluster your DHCP server.\n\n1406\n00:58:31,709 --> 00:58:34,809\n>> Clusters really are kind of a dying\ntechnology, but they're very cool.\n\n1407\n00:58:34,809 --> 00:58:37,411\n>> Mm-hm, they are.\n>> You'll see other things in here like\n\n1408\n00:58:37,411 --> 00:58:41,124\nFile Servers, what else do we\nhave that's in here that's fun?\n\n1409\n00:58:41,124 --> 00:58:45,040\nGeneric Application, if you've got a third\nparty application that is cluster aware.\n\n1410\n00:58:45,040 --> 00:58:46,510\n>> Right.\n>> iSCSI Target, so\n\n1411\n00:58:46,510 --> 00:58:49,610\nthat iSCSI Target we set\nup a few minutes ago.\n\n1412\n00:58:49,610 --> 00:58:51,300\nWhat else do we have in\nhere that can be done?\n\n1413\n00:58:51,300 --> 00:58:52,802\nPhysical disks in general.\n\n1414\n00:58:52,802 --> 00:58:56,670\nHyper-V, that's really what we're\ngonna mess with and virtual machine.\n\n1415\n00:58:56,670 --> 00:58:59,202\nSo making a virtual machine\nredundant across the systems.\n\n1416\n00:58:59,202 --> 00:59:01,830\n>> Yeah,\nmaking that highly available, sweet.\n\n1417\n00:59:01,830 --> 00:59:04,020\n>> Yep, so\nthose are a couple of different things.\n\n1418\n00:59:04,020 --> 00:59:06,485\nWINS, you definitely have to have\na clustered WINS service, right?\n\n1419\n00:59:06,485 --> 00:59:07,290\n>> [LAUGH] Absolutely.\n\n1420\n00:59:07,290 --> 00:59:09,170\n>> How can we get by without one of those.\n\n1421\n00:59:09,170 --> 00:59:12,140\nSo these are all different examples of\nsome of the things that we can make\n\n1422\n00:59:12,140 --> 00:59:13,920\nredundant, right?\n\n1423\n00:59:13,920 --> 00:59:16,380\nAnd so, if I go back here into Roles and\nright click,\n\n1424\n00:59:16,380 --> 00:59:18,810\nyou'll see where I can Configure Roll.\n\n1425\n00:59:18,810 --> 00:59:22,980\nAnd I can start to specify something\nthat is going to be highly available.\n\n1426\n00:59:22,980 --> 00:59:27,180\nSo we'll see the High Availability Wizard,\nand I can pick what it is that I'm doing.\n\n1427\n00:59:27,180 --> 00:59:30,170\nSo here's my list and I can pick.\n\n1428\n00:59:30,170 --> 00:59:33,814\nLet's do, gee, what should we do that\nwouldn't mess everything up too much?\n\n1429\n00:59:33,814 --> 00:59:35,040\n>> Hyper-V, oh, we wanna save that, so.\n\n1430\n00:59:35,040 --> 00:59:35,770\n>> We can do DHCP, well,\n\n1431\n00:59:35,770 --> 00:59:38,850\nyeah, what we're gonna do is we're\ngonna do Hyper-V in the next episode.\n\n1432\n00:59:38,850 --> 00:59:39,920\n>> Right.\n>> So we,\n\n1433\n00:59:39,920 --> 00:59:43,070\ncuz it ties into something called\nCluster Shared Volumes and\n\n1434\n00:59:43,070 --> 00:59:45,890\nsome things there that we wanna see so\nwe'll hold off on that one.\n\n1435\n00:59:45,890 --> 00:59:49,590\nThis one is mad because we haven't\ninstalled the role on any of the servers.\n\n1436\n00:59:49,590 --> 00:59:51,530\n>> Oh, that's right,\nwe haven't installed our roles yet.\n\n1437\n00:59:51,530 --> 00:59:55,190\nYou do have to install the roles on all\nthe nodes before you can cluster it.\n\n1438\n00:59:55,190 --> 00:59:57,080\n>> So let's pick a role\nthat I know is installed.\n\n1439\n00:59:57,080 --> 00:59:58,090\nFile Server.\n\n1440\n00:59:58,090 --> 00:59:58,941\n>> Right, there you go.\n\n1441\n00:59:58,941 --> 01:00:01,792\n>> So, these guys all have the File\nServices Role for a shared folder or\n\n1442\n01:00:01,792 --> 01:00:02,300\nwhatever.\n\n1443\n01:00:02,300 --> 01:00:04,900\nNow, DFS largely killed the need for this.\n\n1444\n01:00:04,900 --> 01:00:06,160\n>> Pretty much, yeah.\n>> But in the old days,\n\n1445\n01:00:06,160 --> 01:00:09,290\nclustering File Service was the way to go,\nso we'll go ahead and do that.\n\n1446\n01:00:09,290 --> 01:00:10,120\nAll right.\n\n1447\n01:00:10,120 --> 01:00:12,430\nAnd so, it's gonna ask what\nkind of file server this is,\n\n1448\n01:00:12,430 --> 01:00:17,160\nis it a file server for just general use,\nlike an SMB share, like normal.\n\n1449\n01:00:17,160 --> 01:00:19,200\n>> Files get opened and closed frequently.\n\n1450\n01:00:19,200 --> 01:00:20,220\n>> Yep.\n\n1451\n01:00:20,220 --> 01:00:21,970\n>> Versus something that maintains.\n\n1452\n01:00:21,970 --> 01:00:23,460\n>> Oh, yeah, absolutely.\n\n1453\n01:00:23,460 --> 01:00:25,200\nOr are we scaling out?\n\n1454\n01:00:25,200 --> 01:00:27,520\nWe have some kind of application\ndata that's all ready one place, and\n\n1455\n01:00:27,520 --> 01:00:28,535\nwe're trying to make it bigger.\n\n1456\n01:00:28,535 --> 01:00:30,910\n>> So what is it that we're\ntrying to achieve here?\n\n1457\n01:00:30,910 --> 01:00:32,520\nWell, we'll just go with the general use.\n\n1458\n01:00:32,520 --> 01:00:34,750\n>> Yeah.\nYeah, that's really good for, like I said,\n\n1459\n01:00:34,750 --> 01:00:37,480\nfor shares that users access,\nthat are opening and closing files.\n\n1460\n01:00:37,480 --> 01:00:38,450\nThe other one's real good for,\n\n1461\n01:00:38,450 --> 01:00:41,310\nlike an application that maintains that\nconnection, and needs to hold that open.\n\n1462\n01:00:42,610 --> 01:00:44,070\n>> All right,\nthey want us to give it a name,\n\n1463\n01:00:44,070 --> 01:00:45,960\nlike a NetBIOS name that\npeople will connect to.\n\n1464\n01:00:45,960 --> 01:00:49,042\nI'm just gonna call this one Storage,\nand down here,\n\n1465\n01:00:49,042 --> 01:00:52,997\nit's asking the IP address,\nthat we're gonna use for this Storage.\n\n1466\n01:00:52,997 --> 01:00:55,403\n>> If I have a dedicated IP for it.\n\n1467\n01:00:55,403 --> 01:01:00,022\nI guess we could assign a dedicated IP-\n>> Lets see, we went 39, 38, 37, oh no,\n\n1468\n01:01:00,022 --> 01:01:01,705\nthat was on the-\n>> In the other show, yeah.\n\n1469\n01:01:01,705 --> 01:01:05,016\nI think this one we're going up,\nso we had 241, 242, 243.\n\n1470\n01:01:05,016 --> 01:01:06,996\n>> So we could do 243, 244?\n\n1471\n01:01:06,996 --> 01:01:08,401\n>> Let's go 244.\n\n1472\n01:01:08,401 --> 01:01:10,160\n>> See, it's probably in use.\n\n1473\n01:01:10,160 --> 01:01:11,460\nYeah, we'll probably regret that one.\n\n1474\n01:01:11,460 --> 01:01:13,522\nLets just verify that,\nthat ones not in use.\n\n1475\n01:01:13,522 --> 01:01:17,282\n>> [LAUGH]\n>> 10.1.100.244 is not coming back,\n\n1476\n01:01:17,282 --> 01:01:17,880\nall right.\n\n1477\n01:01:19,040 --> 01:01:21,950\nSo we will go with that one, all right?\n\n1478\n01:01:21,950 --> 01:01:22,960\nAnd so we'll finish that up now.\n\n1479\n01:01:22,960 --> 01:01:27,320\nThat's gonna create a shared IP that's now\ngonna be shared between these two hosts.\n\n1480\n01:01:27,320 --> 01:01:28,130\n>> Right.\n>> And\n\n1481\n01:01:28,130 --> 01:01:30,620\nit can failover between them,\nthe two nodes.\n\n1482\n01:01:30,620 --> 01:01:33,310\n>> Now it's asking where I want the\nstorage to be, and I can come in here and\n\n1483\n01:01:33,310 --> 01:01:35,040\nI can pick where I want it to go.\n\n1484\n01:01:35,040 --> 01:01:36,020\nAll right?\n\n1485\n01:01:36,020 --> 01:01:38,615\n>> Yep.\n>> Let's go ahead and do the larger disk,\n\n1486\n01:01:38,615 --> 01:01:39,663\nthis 100 GB.\n\n1487\n01:01:39,663 --> 01:01:40,415\nI'll pick that one.\n\n1488\n01:01:42,435 --> 01:01:45,750\nAll right?\nAnd I'll finish it up.\n\n1489\n01:01:45,750 --> 01:01:48,570\nNow it's creating a clustered resource.\n\n1490\n01:01:48,570 --> 01:01:52,070\n>> That shared folder is going to\nbe available, and it's going to be,\n\n1491\n01:01:52,070 --> 01:01:53,710\nor that storage is gonna be available.\n\n1492\n01:01:53,710 --> 01:01:56,260\n>> And\nit's gonna be available on the cluster.\n\n1493\n01:01:56,260 --> 01:02:00,120\n>> So one node is gonna take it over from\nthe beginning, more than likely Mike's.\n\n1494\n01:02:00,120 --> 01:02:00,720\n>> Right.\n>> And\n\n1495\n01:02:00,720 --> 01:02:05,580\nif it fails, then it'll come over to\nmy node and be available, all right?\n\n1496\n01:02:05,580 --> 01:02:08,710\nSo now I can see there's\nmy Storage resource.\n\n1497\n01:02:08,710 --> 01:02:13,213\nIt's currently running, and\nit's currently running on ITPROTVSVR1,\n\n1498\n01:02:13,213 --> 01:02:14,796\nwhich is Mike's server.\n\n1499\n01:02:14,796 --> 01:02:16,500\nHis has control of it.\n\n1500\n01:02:16,500 --> 01:02:19,280\nI know the storage is there,\nbut I don't have control of it.\n\n1501\n01:02:19,280 --> 01:02:22,840\nIn fact if I pull up my,\nlet me pull up my Server Manager,\n\n1502\n01:02:23,910 --> 01:02:28,260\nI'm gonna go to disk management and I'll\nshow you guys what it looks like on mine.\n\n1503\n01:02:28,260 --> 01:02:30,650\nSo that was the 100 GB drive.\n\n1504\n01:02:30,650 --> 01:02:32,110\nSo if I go into disk management and\n\n1505\n01:02:32,110 --> 01:02:37,340\nI find that 100 GB drive, what I should\nsee is that it's offline on my computer.\n\n1506\n01:02:37,340 --> 01:02:41,240\nSo when I come in here and\nfind it, here it is, 100 GB.\n\n1507\n01:02:41,240 --> 01:02:43,075\nSee how it's got a red down arrow on it?\n\n1508\n01:02:43,075 --> 01:02:44,860\n>> Mm-hm.\n>> And it says reserved.\n\n1509\n01:02:44,860 --> 01:02:48,800\nI know it's there, but I don't wanna touch\nit, because if I do, it'll mess it up.\n\n1510\n01:02:48,800 --> 01:02:49,920\n>> Yep.\n>> All right?\n\n1511\n01:02:49,920 --> 01:02:51,720\nBut on Mike's machine, it's online.\n\n1512\n01:02:51,720 --> 01:02:52,568\nHe's got it mounted.\n\n1513\n01:02:52,568 --> 01:02:56,580\nAnd that's because he's accessing it,\nhe's got the resource.\n\n1514\n01:02:56,580 --> 01:03:01,090\nIf people browse to that,\nit's going to hit his machine.\n\n1515\n01:03:01,090 --> 01:03:06,387\nNow, if his machine fails, my machine will\nsee it and take over that role, right?\n\n1516\n01:03:06,387 --> 01:03:08,181\n>> Right.\n>> But what if I don't want to wait for\n\n1517\n01:03:08,181 --> 01:03:08,826\nyour failure.\n\n1518\n01:03:08,826 --> 01:03:11,306\nI know I need to reboot your\nmachine to apply a Windows update.\n\n1519\n01:03:11,306 --> 01:03:12,664\n>> Server's coming down, yep.\n\n1520\n01:03:12,664 --> 01:03:15,902\n>> Yeah, then in that case I\ncan manually fail it over.\n\n1521\n01:03:15,902 --> 01:03:18,167\nWe'll take it over and\nthen it will be there.\n\n1522\n01:03:18,167 --> 01:03:21,609\nSo if I come in here and\ngo back to my cluster management,\n\n1523\n01:03:21,609 --> 01:03:24,924\nI can right click on that and\nyou'll see I can stop it.\n\n1524\n01:03:24,924 --> 01:03:26,862\nOh, we should probably add a file share\nto show if it's actually working.\n\n1525\n01:03:26,862 --> 01:03:28,279\n>> Yeah, we should.\n\n1526\n01:03:28,279 --> 01:03:31,439\n>> But the other thing is,\nwe can move it to another node,\n\n1527\n01:03:31,439 --> 01:03:33,520\nthat's how you simulate failure.\n\n1528\n01:03:33,520 --> 01:03:35,390\nYou can move it to do something planned.\n\n1529\n01:03:35,390 --> 01:03:36,897\n>> Right.\n>> It'll happen automatically\n\n1530\n01:03:36,897 --> 01:03:38,110\nif his machine goes off-line.\n\n1531\n01:03:38,110 --> 01:03:38,620\n>> Right.\n\n1532\n01:03:38,620 --> 01:03:42,243\n>> But we want to manually do it,\nso let's add a file share in here.\n\n1533\n01:03:42,243 --> 01:03:43,369\nWe'll go ahead and do that.\n\n1534\n01:03:46,085 --> 01:03:46,990\nHere we go.\n\n1535\n01:03:46,990 --> 01:03:48,640\nAnd you know, you've got some choices.\n\n1536\n01:03:48,640 --> 01:03:51,698\nYou can do a quick share for\ngeneral stuff, but you can go advanced and\n\n1537\n01:03:51,698 --> 01:03:52,980\nspecify different things.\n\n1538\n01:03:52,980 --> 01:03:55,064\nSo it's just giving you\ndifferent criteria.\n\n1539\n01:03:55,064 --> 01:03:58,291\nWe'll just do a quick share.\n\n1540\n01:03:58,291 --> 01:03:59,267\nAll right.\n\n1541\n01:03:59,267 --> 01:04:03,370\nAnd we'll just share that whole drive,\nI'm not too worried about it.\n\n1542\n01:04:03,370 --> 01:04:06,320\nI'll call it my StorageShare.\n\n1543\n01:04:07,840 --> 01:04:11,040\nSo, notice the remote path here,\n//storage.\n\n1544\n01:04:11,040 --> 01:04:16,681\nThat's that fake virtual machine\nname that we gave it, /StorageShare.\n\n1545\n01:04:16,681 --> 01:04:18,677\nSo, I'll just hit Next.\n\n1546\n01:04:18,677 --> 01:04:20,883\nAnd we can do access-based enumeration.\n\n1547\n01:04:20,883 --> 01:04:22,636\nThese are the normal settings\nwe'd have on our share.\n\n1548\n01:04:22,636 --> 01:04:23,401\nShared folder.\n\n1549\n01:04:23,401 --> 01:04:24,805\nWe'll leave it be.\n\n1550\n01:04:24,805 --> 01:04:29,120\nThis option's important though,\nenable continuous availability.\n\n1551\n01:04:29,120 --> 01:04:33,150\nIf we don't check that and something\nhappens like one of the servers goes down,\n\n1552\n01:04:33,150 --> 01:04:35,580\nit will not automatically fail over.\n\n1553\n01:04:35,580 --> 01:04:38,800\nTurning that off means that you\nhave to manually fail it over.\n\n1554\n01:04:38,800 --> 01:04:39,660\nSome people want that.\n\n1555\n01:04:39,660 --> 01:04:41,580\nThere's a couple of use scenarios for it.\n\n1556\n01:04:41,580 --> 01:04:43,360\n>> Right.\n>> Most of the time you want automatic.\n\n1557\n01:04:43,360 --> 01:04:46,960\nSo, that is turned on.\n\n1558\n01:04:46,960 --> 01:04:48,460\nAll right.\nThe default permissions are here.\n\n1559\n01:04:48,460 --> 01:04:50,315\nI'm not gonna change those.\n\n1560\n01:04:50,315 --> 01:04:51,040\nAnd, we'll just finish it up.\n\n1561\n01:04:52,410 --> 01:04:57,470\nSo, it's gonna create a share\ninside of that folder, all right?\n\n1562\n01:04:57,470 --> 01:04:59,180\nAnd I just wanna make sure\nI can actually get to it.\n\n1563\n01:04:59,180 --> 01:05:02,580\nLet me jump over to our\ndomain controller here.\n\n1564\n01:05:04,800 --> 01:05:05,520\nAll right.\n\n1565\n01:05:05,520 --> 01:05:07,420\nSo this is our domain controller.\n\n1566\n01:05:07,420 --> 01:05:11,310\nAnd if I just bring up like\na command prompt here.\n\n1567\n01:05:11,310 --> 01:05:15,780\nAnd, let me just make sure I'm\nactually on the domain controller.\n\n1568\n01:05:15,780 --> 01:05:17,160\nI am, all right.\n\n1569\n01:05:17,160 --> 01:05:19,045\nLet me bump my font size up so\nyou guys can see this.\n\n1570\n01:05:25,678 --> 01:05:28,580\nNice and big.\nAll right.\n\n1571\n01:05:28,580 --> 01:05:31,950\nSo I'm going to start just by making\nsure I can resolve that name.\n\n1572\n01:05:31,950 --> 01:05:35,000\nThe shared resource we\ncreated we called storage.\n\n1573\n01:05:35,000 --> 01:05:42,084\nAnd so, it's basically a fake server, and\nthere it is, 10.1.100.244, all right?\n\n1574\n01:05:42,084 --> 01:05:45,132\nNow, I don't know whether\nI'm hitting Mike's server or\n\n1575\n01:05:45,132 --> 01:05:48,066\nmy server [SOUND] cuz I'm\nhitting the cluster resource.\n\n1576\n01:05:48,066 --> 01:05:51,904\n>> Right.\n>> And if I map to that drive,\n\n1577\n01:05:51,904 --> 01:05:59,438\nif I say net use x:\n\\\\storage\\storageshare, okay?\n\n1578\n01:05:59,438 --> 01:06:03,110\nSo, I just mapped my X\ndrive to that share.\n\n1579\n01:06:03,110 --> 01:06:07,560\nSo if I were to go in here and\nbrowse to my X drive, here it is.\n\n1580\n01:06:07,560 --> 01:06:10,880\nThis is the share that's\non Mike's computer, right?\n\n1581\n01:06:10,880 --> 01:06:13,340\nSo this is my secret file.\n\n1582\n01:06:13,340 --> 01:06:13,870\n>> Woo hoo!\n\n1583\n01:06:13,870 --> 01:06:14,690\n>> All right there it is.\n\n1584\n01:06:14,690 --> 01:06:16,600\nI've got a secret file, okay?\n\n1585\n01:06:16,600 --> 01:06:19,100\nSo I'm able to get to it, things are good.\n\n1586\n01:06:19,100 --> 01:06:24,100\nI'm going to start a ping to storage,\nand I'm just going to let it run.\n\n1587\n01:06:24,100 --> 01:06:26,810\n>> All right.\n>> So here's a continuous ping to that\n\n1588\n01:06:26,810 --> 01:06:27,470\nvirtual IP.\n\n1589\n01:06:28,980 --> 01:06:32,200\nWhen I go back here,\nI can see storage is running.\n\n1590\n01:06:32,200 --> 01:06:34,600\n>> Right.\n>> And it's running on Mike's machine.\n\n1591\n01:06:34,600 --> 01:06:38,850\nIf Mike's machine were to fail,\nmy machine would take over and\n\n1592\n01:06:38,850 --> 01:06:40,830\nrun with that role, all right?\n\n1593\n01:06:40,830 --> 01:06:41,950\nBut I'm gonna manually do it.\n\n1594\n01:06:41,950 --> 01:06:47,770\nSo we'll just go in here and say Move,\nand I could say Best Possible Node.\n\n1595\n01:06:47,770 --> 01:06:50,440\nIt'll look at the load and\nresources and pick the winner.\n\n1596\n01:06:50,440 --> 01:06:52,550\nWe only have one other node, so\nit's gonna go to the same place.\n\n1597\n01:06:52,550 --> 01:06:53,532\nBut I'll say select node.\n\n1598\n01:06:53,532 --> 01:06:56,930\nAnd I'm gonna move it to my machine,\nto server two.\n\n1599\n01:06:56,930 --> 01:06:57,720\nOkay?\n\n1600\n01:06:57,720 --> 01:07:00,634\nSo, it's gonna take a second,\nthere it goes pending, and\n\n1601\n01:07:00,634 --> 01:07:02,750\nit's gonna flip it over to the other side.\n\n1602\n01:07:02,750 --> 01:07:05,136\nNow while it's flipping,\nlet me jump over here.\n\n1603\n01:07:05,136 --> 01:07:06,210\nLook what happened.\n\n1604\n01:07:06,210 --> 01:07:06,730\n>> Wow!\n\n1605\n01:07:06,730 --> 01:07:08,020\n>> We lost one ping.\n\n1606\n01:07:08,020 --> 01:07:08,830\n>> That is impressive, isn't it?\n\n1607\n01:07:08,830 --> 01:07:10,900\n>> Right, so it's already failed\nover to the other system.\n\n1608\n01:07:10,900 --> 01:07:12,330\nNow as the end user, I don't know that.\n\n1609\n01:07:12,330 --> 01:07:16,890\nI still see the 244, and I don't know\nthat actually it's on a different system.\n\n1610\n01:07:16,890 --> 01:07:22,220\nAnd when I browse to my X drive,\nthere it is, there's my secret file.\n\n1611\n01:07:22,220 --> 01:07:24,178\nNow I'm accessing it on server two.\n\n1612\n01:07:24,178 --> 01:07:27,550\nNow, how do we know\nthat actually happened?\n\n1613\n01:07:27,550 --> 01:07:31,645\nWell, I can jump back over to server two,\nand remember in, whoops.\n\n1614\n01:07:31,645 --> 01:07:36,000\n[LAUGH] In server two remember in disk\nmanagement how the drive was offline for\n\n1615\n01:07:36,000 --> 01:07:37,500\nme a few moments ago?\n\n1616\n01:07:37,500 --> 01:07:41,780\nWell now when I come in here,\nthat 1 gig drive, or\n\n1617\n01:07:41,780 --> 01:07:43,290\nno it was a 100 gig drive wasn't it?\n\n1618\n01:07:43,290 --> 01:07:44,350\n>> Yeah it was the one terabyte drive.\n\n1619\n01:07:46,400 --> 01:07:47,680\n>> There, 100 gigs.\n\n1620\n01:07:47,680 --> 01:07:48,310\nThere it is.\n\n1621\n01:07:48,310 --> 01:07:52,600\nInstead of showing that red down arrow,\nnow it's up and healthy.\n\n1622\n01:07:52,600 --> 01:07:55,380\nI have control of the drive,\nI've got it, right?\n\n1623\n01:07:55,380 --> 01:07:58,240\nSo it's on my machine, and\nI can bounce it right back again.\n\n1624\n01:07:58,240 --> 01:07:59,960\nSo we can move it right\nback over to Mike's.\n\n1625\n01:08:02,690 --> 01:08:04,410\nAll right, so server one.\n\n1626\n01:08:04,410 --> 01:08:05,740\nSending it back over.\n\n1627\n01:08:05,740 --> 01:08:08,980\nIt'll pend,\nit's processing as it moves it back over.\n\n1628\n01:08:08,980 --> 01:08:10,190\n>> Yes, it takes longer for\n\n1629\n01:08:10,190 --> 01:08:13,005\nthe console to refresh than it\ndoes to update and fail over.\n\n1630\n01:08:13,005 --> 01:08:15,040\n>> Yeah, it's already failed over.\n\n1631\n01:08:15,040 --> 01:08:21,000\nAnd so there I am, and as the end user, I\ngo back in here and I start to do my work.\n\n1632\n01:08:23,170 --> 01:08:24,590\nThere we go.\n\n1633\n01:08:24,590 --> 01:08:26,710\nAnd I'm working with that.\n\n1634\n01:08:26,710 --> 01:08:29,630\n>> No idea that it's bounced back and\nforth between the server twice now.\n\n1635\n01:08:29,630 --> 01:08:31,480\n>> Yep, and it's perfectly happy.\n\n1636\n01:08:31,480 --> 01:08:34,840\nAnd you can do this, well I guess it kind\nof depends on what you're doing, but\n\n1637\n01:08:34,840 --> 01:08:38,910\nyou can do it in the middle of the day and\na lot of times it just doesn't.\n\n1638\n01:08:38,910 --> 01:08:40,700\n>> Right.\n>> Doesn't bother people at all.\n\n1639\n01:08:42,150 --> 01:08:48,290\nMy copy and paste skills are apparently\nnot really working out here.\n\n1640\n01:08:48,290 --> 01:08:51,890\nBut yeah, so you can really have some\nfun with this, it's really cool.\n\n1641\n01:08:51,890 --> 01:08:56,920\nIt does require that whatever you're\ndoing is cluster aware, right?\n\n1642\n01:08:56,920 --> 01:09:00,440\nSo I'm using Microsoft file services,\nthey're cluster aware.\n\n1643\n01:09:00,440 --> 01:09:05,460\nMicrosoft DNS and Microsoft DHCP,\nthey're cluster aware, they can do that.\n\n1644\n01:09:05,460 --> 01:09:07,280\nBut if you're running third\nparty software, it may or\n\n1645\n01:09:07,280 --> 01:09:11,532\nmay not be cluster aware, so\nyou need to check that out.\n\n1646\n01:09:11,532 --> 01:09:14,725\nAll right, let's see what else\ndo we want to talk about.\n\n1647\n01:09:14,725 --> 01:09:16,510\nThe really cool stuff is virtual machines,\nright?\n\n1648\n01:09:16,510 --> 01:09:17,710\n>> Yeah, no.\nThat's where I really want to get to.\n\n1649\n01:09:17,710 --> 01:09:19,410\nIt's like, woo hoo, here we go.\n\n1650\n01:09:19,410 --> 01:09:22,900\n>> Failing over a shared folder\nis not terribly exciting, and\n\n1651\n01:09:22,900 --> 01:09:24,420\nyou're probably saying to yourself, shoot,\n\n1652\n01:09:24,420 --> 01:09:27,570\nwe could have just done DFS and\nsaved the money on the shared storage.\n\n1653\n01:09:27,570 --> 01:09:29,950\nAnd that's absolutely true and\nI agree with you.\n\n1654\n01:09:29,950 --> 01:09:32,900\nBut we need to understand\nhow the cluster works first.\n\n1655\n01:09:32,900 --> 01:09:35,950\nBefore we add on the Hyper-V piece,\nwhich we're gonna do in the next episode.\n\n1656\n01:09:35,950 --> 01:09:36,795\n>> Yep, that's cool.\n\n1657\n01:09:36,795 --> 01:09:39,050\n>> So,\nlet me go back to the cluster screen.\n\n1658\n01:09:39,050 --> 01:09:40,510\n>> We could talk about,\nwe got a couple minutes left.\n\n1659\n01:09:40,510 --> 01:09:42,870\nWe could talk about that cluster aware\nupdating that they've added now.\n\n1660\n01:09:42,870 --> 01:09:44,060\n>> Oh yeah.\n>> Which is pretty darn cool.\n\n1661\n01:09:45,180 --> 01:09:50,670\nIn fact, that's on,\nif you wanna pull up your cluster again.\n\n1662\n01:09:50,670 --> 01:09:51,220\n>> Okay.\nI am.\n\n1663\n01:09:51,220 --> 01:09:54,700\n>> The cluster console, or go to your\nserver manager on the guy that's running.\n\n1664\n01:09:54,700 --> 01:09:55,300\n>> Okay.\n>> Yeah,\n\n1665\n01:09:55,300 --> 01:09:56,510\ngo to server manager, over to that.\n\n1666\n01:09:56,510 --> 01:09:57,360\n>> Find my server.\nHere we go.\n\n1667\n01:09:57,360 --> 01:10:00,070\n>> What it is, cluster aware, you know,\nupdating a cluster is a challenge.\n\n1668\n01:10:00,070 --> 01:10:03,610\nThe problem is, it is a very manual,\ntedious process.\n\n1669\n01:10:03,610 --> 01:10:05,070\nI've got to take one of those nodes.\n\n1670\n01:10:05,070 --> 01:10:08,580\nIf i'm gonna have to do a Windows update,\ndo a reboot on the server, i've got to\n\n1671\n01:10:08,580 --> 01:10:12,430\npull it out of that cluster, do my updates\non it, put it back in that cluster.\n\n1672\n01:10:12,430 --> 01:10:15,140\nGo to the next machine,\npull that node out of that cluster,\n\n1673\n01:10:15,140 --> 01:10:16,940\ndo my updates, put it back.\n\n1674\n01:10:16,940 --> 01:10:20,220\nAnd if I've got, this is going to take me\na while, it's a very long tedious process.\n\n1675\n01:10:20,220 --> 01:10:23,470\nAnd now we have this thing called\ncluster aware updating that we can do.\n\n1676\n01:10:23,470 --> 01:10:25,590\nAnd there's two ways we can do it.\n\n1677\n01:10:25,590 --> 01:10:30,070\nWe can run what's called an orchestrate,\nwhere I install these cluster tools\n\n1678\n01:10:30,070 --> 01:10:33,490\non another server that's maybe not part of\nthat, that's not part of the cluster, or\n\n1679\n01:10:33,490 --> 01:10:35,060\nmy own Windows 8 machine.\n\n1680\n01:10:35,060 --> 01:10:38,790\nAnd I run this cluster we're updating and\nwhat it's gonna do is it's gonna scan\n\n1681\n01:10:38,790 --> 01:10:41,860\nthe nodes in the cluster,\nit's gonna see what updates it needs.\n\n1682\n01:10:41,860 --> 01:10:45,120\nAnd it will handle, pulling one of\nthe nodes out, doing the updates,\n\n1683\n01:10:45,120 --> 01:10:48,330\ndoing any reboots, if necessary,\nputting it back into the cluster, and\n\n1684\n01:10:48,330 --> 01:10:49,730\nmoving on to the next one.\n\n1685\n01:10:49,730 --> 01:10:52,376\nThe orchestrator just allows\nme to watch the process, and\n\n1686\n01:10:52,376 --> 01:10:56,000\nI can see which server's it's on, and\nI kind of keep track of what's going on.\n\n1687\n01:10:56,000 --> 01:10:56,980\nBut, I can sit back and watch.\n\n1688\n01:10:56,980 --> 01:10:58,480\nI don't have to touch it.\n\n1689\n01:10:58,480 --> 01:11:01,890\nYou can also do it with the,\nI'm going to forget the term they use, but\n\n1690\n01:11:01,890 --> 01:11:05,360\nit's a self updating where\ninstead of using an orchestrator,\n\n1691\n01:11:05,360 --> 01:11:08,510\nyou can just do it off one of\nthe nodes as part of the cluster.\n\n1692\n01:11:08,510 --> 01:11:10,318\nAnd it will again,\nstill do it all by itself, but\n\n1693\n01:11:10,318 --> 01:11:13,334\nyou don't really get to see which node\nit's on and watch them pulling in and out.\n\n1694\n01:11:13,334 --> 01:11:14,170\n>> [LAUGH] It's a mystery!\n\n1695\n01:11:14,170 --> 01:11:15,435\n>> Or anything like that, yeah.\n\n1696\n01:11:15,435 --> 01:11:19,080\n[LAUGH] I think you still\ncan see it in the console.\n\n1697\n01:11:19,080 --> 01:11:20,670\nBut, yeah, it's fantastic,\n\n1698\n01:11:20,670 --> 01:11:23,280\nit makes updating these\nclusters a whole lot easier.\n\n1699\n01:11:23,280 --> 01:11:27,640\nWhat was I going to say,\nnormally we'd be hitting our WSUS server.\n\n1700\n01:11:27,640 --> 01:11:28,960\nSo we've already approved the updates,\n\n1701\n01:11:28,960 --> 01:11:32,160\nwe're not worried about it getting updates\nthat haven't been tested thoroughly\n\n1702\n01:11:32,160 --> 01:11:35,080\nfirst before we throw them out there,\nso that's a nice feature.\n\n1703\n01:11:35,080 --> 01:11:36,638\n>> Now if we wanted to turn that on,\nwhere's that?\n\n1704\n01:11:36,638 --> 01:11:37,180\nWhere's that gateway?\n\n1705\n01:11:37,180 --> 01:11:42,980\n>> If you go to Server Manager >\nTools > Cluster Aware Updating.\n\n1706\n01:11:42,980 --> 01:11:44,320\nAnd you can schedule it as well.\n\n1707\n01:11:44,320 --> 01:11:46,500\nYep, that should launch it.\n\n1708\n01:11:46,500 --> 01:11:50,770\nAnd there we can connect to our cluster,\nit should show up in your dropdown list.\n\n1709\n01:11:50,770 --> 01:11:51,430\n>> There it is.\n\n1710\n01:11:51,430 --> 01:11:53,370\n>> Nice.\nAnd then there's an option somewhere\n\n1711\n01:11:53,370 --> 01:11:55,600\nto scan or preview updates for\nthis cluster.\n\n1712\n01:11:55,600 --> 01:11:58,610\nNow I don't know if they've actually\ngone out and checked yet for\n\n1713\n01:11:58,610 --> 01:11:59,530\ntheir Windows updates.\n\n1714\n01:11:59,530 --> 01:12:01,360\n>> Do our machines have Internet access?\n\n1715\n01:12:01,360 --> 01:12:01,970\n>> They might not.\n\n1716\n01:12:01,970 --> 01:12:03,440\n>> I guess we'll find out.\n\n1717\n01:12:03,440 --> 01:12:04,650\nSo, we'll do.\n\n1718\n01:12:04,650 --> 01:12:06,760\n>> Down at the bottom,\nthere's a generate update preview.\n\n1719\n01:12:06,760 --> 01:12:09,206\n>> Let's do the hotfix plugin, all right?\n\n1720\n01:12:09,206 --> 01:12:10,254\n>> Save and go out.\n\n1721\n01:12:10,254 --> 01:12:12,940\nSo, what it should do is it\nwould go hit our WSUS Server.\n\n1722\n01:12:12,940 --> 01:12:14,260\n>> Oh, no Internet access.\n\n1723\n01:12:14,260 --> 01:12:15,780\n>> If we had set it up or\n\n1724\n01:12:15,780 --> 01:12:19,180\nif we had Internet access it'd\ngo out to Windows Update.\n\n1725\n01:12:19,180 --> 01:12:21,119\nShow you the updates here in this list.\n\n1726\n01:12:23,630 --> 01:12:26,430\n>> I don't think it's\ngoing to get up there.\n\n1727\n01:12:26,430 --> 01:12:30,870\n>> Then you can also see over there on\nthe right of that wizard behind there.\n\n1728\n01:12:30,870 --> 01:12:36,270\nApply updates to this cluster, as well as\ncreate or modify update running profile,\n\n1729\n01:12:36,270 --> 01:12:39,370\nwhere I can change some of the options\nlike how many times it tries.\n\n1730\n01:12:39,370 --> 01:12:42,150\nIt retries if it has a failure\non installing an update,\n\n1731\n01:12:42,150 --> 01:12:44,870\nhow many times it'll attempt to reboot.\n\n1732\n01:12:44,870 --> 01:12:48,140\nAnd then we can do it with that last or\nnext to last option,\n\n1733\n01:12:48,140 --> 01:12:51,290\nconfigure cluster self updating options.\n\n1734\n01:12:51,290 --> 01:12:53,550\nWhere I can actually set a schedule,\nlike you said,\n\n1735\n01:12:53,550 --> 01:12:56,150\ninstead of using an orchestrator or\nseparate machine\n\n1736\n01:12:56,150 --> 01:13:00,490\nI can schedule all this to occur every\nnight or once a week or what have you.\n\n1737\n01:13:02,060 --> 01:13:03,010\n>> So very cool stuff.\n\n1738\n01:13:03,010 --> 01:13:07,630\nYeah doing updates, having a cluster\na well built cluster means you can do\n\n1739\n01:13:07,630 --> 01:13:10,350\nupdates in the middle of the day\nas long as they've been tested and\n\n1740\n01:13:10,350 --> 01:13:11,800\nthey're ready to roll out.\n\n1741\n01:13:11,800 --> 01:13:14,250\nSo that's kind of a neat feature,\nbeing able to have it automated,\n\n1742\n01:13:14,250 --> 01:13:15,260\nthat's even better.\n\n1743\n01:13:15,260 --> 01:13:15,980\n>> Absolutely, absolutely.\n\n1744\n01:13:15,980 --> 01:13:17,350\n>> Yeah, I've spent many Sundays,\n>> [LAUGH]\n\n1745\n01:13:17,350 --> 01:13:18,650\n>> At the office with servers down\n\n1746\n01:13:18,650 --> 01:13:19,410\ndoing updates.\n\n1747\n01:13:19,410 --> 01:13:20,040\n>> Updating, yep.\n\n1748\n01:13:20,040 --> 01:13:21,140\nYeah.\n>> So, nice to, to not have to do that.\n\n1749\n01:13:23,090 --> 01:13:26,535\nSo, all right, well, Mike, as far as\nour introductory primer to clusters,\n\n1750\n01:13:26,535 --> 01:13:28,055\nthat's a pretty good start.\n\n1751\n01:13:28,055 --> 01:13:28,765\n>> I think so.\n\n1752\n01:13:28,765 --> 01:13:31,275\n>> The real fun, like I said,\nis with virtual machines.\n\n1753\n01:13:31,275 --> 01:13:33,565\nAnd so what we're gonna do is,\nif you're watching live,\n\n1754\n01:13:33,565 --> 01:13:36,065\nthen tomorrow,\nwe're gonna start with the show.\n\n1755\n01:13:36,065 --> 01:13:38,475\nAnd what we'll do is we'll\nset up a Hyper-V server.\n\n1756\n01:13:38,475 --> 01:13:40,003\n>> Right.\n>> Where the virtual machines\n\n1757\n01:13:40,003 --> 01:13:41,965\nare the resource in this clusters, and\n\n1758\n01:13:41,965 --> 01:13:45,330\nthe virtual machines can bounce\nfrom hardware to hardware.\n\n1759\n01:13:45,330 --> 01:13:48,040\nIt's really cool, it's a lot of fun,\nso definitely stay tuned for that.\n\n1760\n01:13:48,040 --> 01:13:49,332\n>> Absolutely.\n\n1761\n01:13:49,332 --> 01:13:51,070\n>> All right well let me\njust remind everybody,\n\n1762\n01:13:51,070 --> 01:13:54,940\nif you have any questions live during\nthe show you can go to itpro.tv/live,\n\n1763\n01:13:54,940 --> 01:13:57,420\nyou'll see the chat room\nright beneath our video.\n\n1764\n01:13:57,420 --> 01:14:01,860\nYou can post your questions live during\nthe show and we monitor and answer.\n\n1765\n01:14:01,860 --> 01:14:05,245\nIf you have questions after the show,\nmake sure you use our Q and A forums.\n\n1766\n01:14:05,245 --> 01:14:06,350\n>> Mm-hm.\n>> At the top of\n\n1767\n01:14:06,350 --> 01:14:10,330\nevery page at the www.itpro.tv website\nyou'll see Q and A up at the top.\n\n1768\n01:14:10,330 --> 01:14:12,135\nClick on it, takes you to the forums.\n\n1769\n01:14:12,135 --> 01:14:13,440\n>> Love to hear from you.\n>> Post your questions there,\n\n1770\n01:14:13,440 --> 01:14:15,130\nwe monitor and answer.\n\n1771\n01:14:15,130 --> 01:14:16,240\nAbsolutely.\n\n1772\n01:14:16,240 --> 01:14:19,160\nAll right, so ladies and gentlemen,\nI hope you guys enjoyed the show.\n\n1773\n01:14:19,160 --> 01:14:21,400\nSigning off for ITProTV, I'm Don Pezet.\n\n1774\n01:14:21,400 --> 01:14:22,230\n>> And I'm Mike Rodrick.\n\n1775\n01:14:22,230 --> 01:14:23,061\n>> And we will see you next time.\n\n1776\n01:14:23,061 --> 01:14:26,449\n[MUSIC]\n\n",
          "vimeoId": "97820137"
        },
        {
          "description": "In this episode Mike and Don continue the discussion on high availability. They configure a highly available Hyper-V server. They also configure a Cluster Shared Volume (CSV) and demonstrate live migration of a virtual machine.",
          "length": "3040",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/003-Clustering-With-Hyper-V.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/003-Clustering-With-Hyper-V-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/003-Clustering-With-Hyper-V-sm.jpg",
          "title": "Clustering With Hyper-V",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,378 --> 00:00:36,900\nAll right, good morning, good afternoon,\nand good evening, and welcome back.\n\n3\n00:00:36,900 --> 00:00:39,850\nTo another episode of IT Pro TV,\nI'm your host, Don.\n\n4\n00:00:39,850 --> 00:00:41,860\nBack again with Mr.\nMike Rodrick, how's it going, Mike?\n\n5\n00:00:41,860 --> 00:00:44,180\nFantastic, another day in paradise.\n\n6\n00:00:44,180 --> 00:00:45,422\nHow are you doing?\n\n7\n00:00:45,422 --> 00:00:49,544\n[LAUGH] Well, we are, we're continuing\non our high availability adventure.\n\n8\n00:00:49,544 --> 00:00:53,430\nAmen If you are just tuning in,\nit's actually episode number three, for\n\n9\n00:00:53,430 --> 00:00:54,650\nhigh availability.\n\n10\n00:00:54,650 --> 00:00:56,905\nWe started out with network load balance.\n\n11\n00:00:56,905 --> 00:00:57,740\nMm-hm.\nWhich is pretty cool.\n\n12\n00:00:57,740 --> 00:00:59,180\nYap.\nAnd, you know,\n\n13\n00:00:59,180 --> 00:01:03,530\nwe jokingly call it the poor man's\ncluster, but it's very functional, Mm-hm.\n\n14\n00:01:03,530 --> 00:01:06,980\nVery inexpensive and it doesn't\nrequire a lot of crazy infrastructure.\n\n15\n00:01:06,980 --> 00:01:07,770\nAbsolutely.\n\n16\n00:01:07,770 --> 00:01:08,950\nIn our last episode though,\n\n17\n00:01:08,950 --> 00:01:12,651\nwe moved into fail over-clustering,\nwhich is kinda the opposite It's complex.\n\n18\n00:01:12,651 --> 00:01:16,275\n[LAUGH] It's incredibly expensive\nbecause you have to have shared storage.\n\n19\n00:01:16,275 --> 00:01:17,060\n[LAUGH] Right.\nAnd so\n\n20\n00:01:17,060 --> 00:01:19,985\nit's used in,\nin much more critical environments.\n\n21\n00:01:19,985 --> 00:01:22,230\nMm-hm.\nWe got to see a basic cluster.\n\n22\n00:01:22,230 --> 00:01:23,550\nAnd we, we built what did we build?\n\n23\n00:01:23,550 --> 00:01:24,650\nA file server?\nA file server yeah.\n\n24\n00:01:24,650 --> 00:01:28,585\nAnd so we had that file server set\nup where was running on one node.\n\n25\n00:01:28,585 --> 00:01:29,640\nMm-hm.\nIf that node failed,\n\n26\n00:01:29,640 --> 00:01:31,150\nthe other node took it over.\n\n27\n00:01:31,150 --> 00:01:31,670\nRight.\n\n28\n00:01:31,670 --> 00:01:35,270\nBut if you're clustering file servers\nthese days, it's, kinda, silly.\n\n29\n00:01:35,270 --> 00:01:37,878\nYeah, cuz we talked about DFS being a,\na viable solution- Mm-hm.\n\n30\n00:01:37,878 --> 00:01:40,253\nThat, that don't have to\nhave that same expense.\n\n31\n00:01:40,253 --> 00:01:41,211\nThey're not really worth it.\n\n32\n00:01:41,211 --> 00:01:43,401\nSo what we are going to\ndo now in this episode,\n\n33\n00:01:43,401 --> 00:01:46,586\nis we gonna move to cluster example\nthat you are really gonna use.\n\n34\n00:01:46,586 --> 00:01:48,508\nYeah.\nAnd that's a Hyper-V cluster.\n\n35\n00:01:48,508 --> 00:01:51,590\nHyper-V clusters are awesome.\n\n36\n00:01:51,590 --> 00:01:54,570\nWhat you have is your virtual machines\n\n37\n00:01:54,570 --> 00:01:58,710\nbecome the shared resource inside of\nthe cluster, the fail over of the cluster.\n\n38\n00:01:58,710 --> 00:02:02,170\nAnd if you have a virtual machine running\non one piece of hardware and that hardware\n\n39\n00:02:02,170 --> 00:02:05,540\nfails, the virtual machine can bail,\nyou know, you can just jump ship.\n\n40\n00:02:05,540 --> 00:02:06,050\nRight.\nAnd\n\n41\n00:02:06,050 --> 00:02:08,525\njump over to another set of hardware and\ncome up over there,\n\n42\n00:02:08,525 --> 00:02:13,440\nyo-your entire virtual machine can\njump from hardware to hardware And\n\n43\n00:02:13,440 --> 00:02:14,950\nmaintaining that session that whole time.\n\n44\n00:02:14,950 --> 00:02:17,010\nOh yeah, super cool.\n\n45\n00:02:17,010 --> 00:02:19,950\nIf you do it manually,\nyou lose absolutely nothing.\n\n46\n00:02:19,950 --> 00:02:22,080\nDuring a failure you might\nlost a little bit, but\n\n47\n00:02:22,080 --> 00:02:24,850\nmost of the session preserved it's,\nit's really slick stuff.\n\n48\n00:02:24,850 --> 00:02:26,680\nYeah.\nThis is how you're gonna use clustering.\n\n49\n00:02:26,680 --> 00:02:27,370\nYep.\nAll right.\n\n50\n00:02:27,370 --> 00:02:30,270\nSo we did a file server in the last\nepisode just to make sure you could\n\n51\n00:02:30,270 --> 00:02:32,500\nsee the cluster process.\n\n52\n00:02:32,500 --> 00:02:34,115\nNow we're gonna lay Hyper-V on top of it.\n\n53\n00:02:34,115 --> 00:02:34,670\nMm-hm.\n\n54\n00:02:34,670 --> 00:02:35,410\nNice.\n\n55\n00:02:35,410 --> 00:02:37,800\nSo so let's just jump right into it.\n\n56\n00:02:37,800 --> 00:02:38,770\nYeah let's get to it.\n\n57\n00:02:38,770 --> 00:02:41,820\nShoot.\nSo I'm gonna fire up our cluster manager,\n\n58\n00:02:41,820 --> 00:02:42,860\nor at least I say I am.\n\n59\n00:02:42,860 --> 00:02:47,050\nYou know I don't even know\nwhat server I'm on these days.\n\n60\n00:02:47,050 --> 00:02:49,120\nWe need that little BG\ninfo on our machines.\n\n61\n00:02:49,120 --> 00:02:52,010\nSo we can see which machine we're on and\nwhat we're logged on as.\n\n62\n00:02:52,010 --> 00:02:55,820\nIf you've never used that, it's a little\nfree utility from Microsoft called BG info\n\n63\n00:02:55,820 --> 00:02:57,940\nthat puts the server\nname on the wallpaper.\n\n64\n00:02:57,940 --> 00:02:58,940\nIncredibly handy.\n\n65\n00:02:58,940 --> 00:02:59,970\nIt really is.\n\n66\n00:02:59,970 --> 00:03:01,240\nYou can put your IP address and\n\n67\n00:03:01,240 --> 00:03:03,824\nthen all that pertinent information\nout there it really helps.\n\n68\n00:03:03,824 --> 00:03:06,470\nAll right so, I'm gonna fire\nup our cluster manager here,\n\n69\n00:03:06,470 --> 00:03:08,945\nhere's our cluster from,\nfrom yesterday's episode.\n\n70\n00:03:08,945 --> 00:03:11,580\nMm-hm.\nAnd you'll see that file server role in\n\n71\n00:03:11,580 --> 00:03:13,290\nhere that we call the storage.\n\n72\n00:03:13,290 --> 00:03:14,400\nRight.\nSo it's still up and\n\n73\n00:03:14,400 --> 00:03:18,082\nrunning and it's up and running on\nserver one and, and there it is.\n\n74\n00:03:18,082 --> 00:03:21,010\nAll right, now when we add roles,\n\n75\n00:03:21,010 --> 00:03:25,220\none of the roles that we had\nto add is a virtual machine,\n\n76\n00:03:25,220 --> 00:03:29,310\nsee how I've got virtual machines right\nhere, new virtual machine, new hard disk.\n\n77\n00:03:29,310 --> 00:03:33,570\nThat's a special entry that\nshows up when you have Hyper-V\n\n78\n00:03:33,570 --> 00:03:35,630\nas a part of your cluster.\n\n79\n00:03:35,630 --> 00:03:38,740\nThat little bit doesn't even\nshow up if you don't but\n\n80\n00:03:38,740 --> 00:03:41,710\nwhere you do see it regardless\nof whether Hyper-V is installed.\n\n81\n00:03:41,710 --> 00:03:47,420\nIf you pull up the properties of your\ncluster and you go to resource types.\n\n82\n00:03:47,420 --> 00:03:52,210\nEven if you don't have Hyper-V installed\nyou'll see the Hyper-V role in here.\n\n83\n00:03:52,210 --> 00:03:54,640\nWhich I say it,\nthere it is Virtual Machine.\n\n84\n00:03:54,640 --> 00:03:56,330\nSo you got virtual machines right there.\n\n85\n00:03:56,330 --> 00:03:59,730\nSo Hyper-V is cluster aware.\n\n86\n00:03:59,730 --> 00:04:01,580\nIt shows up as a role.\n\n87\n00:04:01,580 --> 00:04:04,240\nBut it's not until you actually install\nHyper-V that some of these additional\n\n88\n00:04:04,240 --> 00:04:05,380\nthings show up.\n\n89\n00:04:05,380 --> 00:04:07,690\nAnother example of that\nis like Microsoft Sequel.\n\n90\n00:04:07,690 --> 00:04:10,930\nThe Microsoft Sequel database server,\nit's cluster aware but\n\n91\n00:04:10,930 --> 00:04:11,880\nit doesn't show up in here.\n\n92\n00:04:11,880 --> 00:04:16,000\nLike, I, I don't see sequel database or\nanything like that in this list.\n\n93\n00:04:16,000 --> 00:04:19,430\nBut if I install\nMicrosoft Sequel on this server,\n\n94\n00:04:19,430 --> 00:04:21,160\nit would recognize\nthe cluster was there and\n\n95\n00:04:21,160 --> 00:04:24,815\nit would add itself to the resource types,\nand you'd see database in here.\n\n96\n00:04:24,815 --> 00:04:25,850\nMm-hm.\nAnd we'd be able to make\n\n97\n00:04:25,850 --> 00:04:26,890\na clustered database.\n\n98\n00:04:28,840 --> 00:04:33,212\nAll right so\nI install hyper v and that's all,\n\n99\n00:04:33,212 --> 00:04:36,586\nthat's all we did [CROSSTALK] role.\n\n100\n00:04:36,586 --> 00:04:38,405\nYep.\nSo So we haven't actually configured\n\n101\n00:04:38,405 --> 00:04:39,925\nHyper-V on this machine at all.\n\n102\n00:04:39,925 --> 00:04:42,450\nMm-hm.\nIt is just a completely-\n\n103\n00:04:42,450 --> 00:04:44,420\nNo networks, no nothing.\n\n104\n00:04:44,420 --> 00:04:45,340\nSo completely stocked.\n\n105\n00:04:45,340 --> 00:04:46,410\nLet me just make sure.\n\n106\n00:04:46,410 --> 00:04:50,750\nI'm gonna fire up our Hyper-V manager, and\nsure enough, we got no virtual machines,\n\n107\n00:04:50,750 --> 00:04:52,290\nnothing is, is really added.\n\n108\n00:04:52,290 --> 00:04:53,640\nOkay.\n\n109\n00:04:53,640 --> 00:04:55,150\nHyper-V installs.\n\n110\n00:04:55,150 --> 00:04:59,890\nIt automatically sees that we are,\nare in a clustered environment, and\n\n111\n00:04:59,890 --> 00:05:02,080\nit adds that entry to the cluster manager.\n\n112\n00:05:02,080 --> 00:05:04,240\nSo now we can go in and\nwe can create virtual machines, and\n\n113\n00:05:04,240 --> 00:05:07,210\nwe can make them cluster aware, all right.\n\n114\n00:05:07,210 --> 00:05:10,340\nNow, cluster aware just means they\nrecognize they are on a Cluster and\n\n115\n00:05:10,340 --> 00:05:14,650\nthey're ready to jump to another\nmachine if a failure occurs.\n\n116\n00:05:14,650 --> 00:05:18,060\nTo do that you've got two parts or\nactually really you\n\n117\n00:05:18,060 --> 00:05:20,310\nhave three parts of the virtual\nmachine that needs to jump over.\n\n118\n00:05:20,310 --> 00:05:20,840\nRight.\n\n119\n00:05:20,840 --> 00:05:25,640\nYou've got the virtual machine\nconfiguration, Right all the settings.\n\n120\n00:05:25,640 --> 00:05:28,005\nAnd that's just stored in,\nlike, one little XML file.\n\n121\n00:05:28,005 --> 00:05:28,711\nMm-hm. Not very big. Yeah.\n\n122\n00:05:28,711 --> 00:05:29,336\nIt's tiny.\n\n123\n00:05:29,336 --> 00:05:30,670\n60K or something like that.\n\n124\n00:05:30,670 --> 00:05:32,120\nMm-hm.\nIt's really small.\n\n125\n00:05:32,120 --> 00:05:34,070\nSo a little text file\nof the configuration.\n\n126\n00:05:34,070 --> 00:05:38,110\nAnd the configuration says, like, how\nmany processors the virtual machine has.\n\n127\n00:05:38,110 --> 00:05:39,315\nHow much memory it has.\n\n128\n00:05:39,315 --> 00:05:40,340\nMm-hm.\nWhat virtual hard drives it\n\n129\n00:05:40,340 --> 00:05:41,200\nhas and so on, right.\n\n130\n00:05:41,200 --> 00:05:44,970\nThat, that kind if leads me to the second\nthing, which are the virtual hard drives.\n\n131\n00:05:44,970 --> 00:05:47,080\nRight.\nThe virtual hard drives are the data for\n\n132\n00:05:47,080 --> 00:05:48,086\nthat virtual machine.\n\n133\n00:05:48,086 --> 00:05:50,614\nAnd if it's going to jump\nfrom hardware to hardware,\n\n134\n00:05:50,614 --> 00:05:52,420\nthose drives need to be ready to move.\n\n135\n00:05:52,420 --> 00:05:53,152\nMm-hm.\nNow,\n\n136\n00:05:53,152 --> 00:05:58,560\nyesterday we showed you in a file server,\nwhere we did a failover.\n\n137\n00:05:58,560 --> 00:05:59,970\nAnd how many PNGs did we lose?\n\n138\n00:05:59,970 --> 00:06:00,610\nOne.\n\n139\n00:06:00,610 --> 00:06:01,450\nOne.\nYeah.\n\n140\n00:06:01,450 --> 00:06:02,860\nSuper fast fail over.\n\n141\n00:06:02,860 --> 00:06:03,550\nRight.\n\n142\n00:06:03,550 --> 00:06:08,435\nWith a virtual machine if the virtual\nhard drives are a terabyte in size.\n\n143\n00:06:08,435 --> 00:06:09,940\nMm-hm.\nHow long would it take to\n\n144\n00:06:09,940 --> 00:06:11,740\ncopy that terabyte from\none machine to another?\n\n145\n00:06:11,740 --> 00:06:13,230\nWay too long.\nIncredibly long right?\n\n146\n00:06:13,230 --> 00:06:15,135\nI mean that machine would be down for\nawhile.\n\n147\n00:06:15,135 --> 00:06:16,100\nMm-hm.\nSo\n\n148\n00:06:16,100 --> 00:06:19,670\nusing a cluster,\nwe can have shared storage.\n\n149\n00:06:19,670 --> 00:06:20,190\nRight.\nWhere\n\n150\n00:06:20,190 --> 00:06:23,770\nmultiple pieces of hardware can see that\nvirtual hard drive at the same time,\n\n151\n00:06:23,770 --> 00:06:27,310\nit's just somebody needs to take control\nover it and that's what the cluster does.\n\n152\n00:06:27,310 --> 00:06:28,990\nYes, now we don't have to\nmove that entire hard drive.\n\n153\n00:06:28,990 --> 00:06:30,290\nYup.\nJust that config file.\n\n154\n00:06:30,290 --> 00:06:32,815\nSo the config file is one\nthat has to be synchronized.\n\n155\n00:06:32,815 --> 00:06:34,440\nMm-hm The virtual hard drives,\n\n156\n00:06:34,440 --> 00:06:38,230\nthey don't have to be synchronized\ncuz they're already on shared storage\n\n157\n00:06:38,230 --> 00:06:40,400\nIf they are not in shared storage,\nthen you can't cluster it.\n\n158\n00:06:40,400 --> 00:06:42,950\nIt's got to be shared storage.\n\n159\n00:06:42,950 --> 00:06:45,300\nAnd the third piece, is the RAM.\n\n160\n00:06:45,300 --> 00:06:46,810\nWhat's running in RAM?\n\n161\n00:06:46,810 --> 00:06:49,350\nIf that machine is live right now,\nwhat's it doing?\n\n162\n00:06:49,350 --> 00:06:50,753\nWhat's in RAM?\n\n163\n00:06:50,753 --> 00:06:55,128\nNow, you can't copy over RAM ahead of\ntime, because it's constantly changing.\n\n164\n00:06:55,128 --> 00:06:55,712\nMm-hm.\n\n165\n00:06:55,712 --> 00:06:59,758\nSo in a clustered environment, we have\nto sync the RAM for a virtual machine,\n\n166\n00:06:59,758 --> 00:07:02,430\nbetween one set of hardware and another.\n\n167\n00:07:02,430 --> 00:07:06,970\nWhen we do a manual failover it\nwill synchronize that RAM and\n\n168\n00:07:06,970 --> 00:07:11,380\nthe virtual machine will jump to the other\nhardware, with no session loss what so\n\n169\n00:07:11,380 --> 00:07:13,080\never visible to the end users.\n\n170\n00:07:13,080 --> 00:07:17,050\nIt's really awesome,\nin a crisis environment though [LAUGH],\n\n171\n00:07:17,050 --> 00:07:18,730\nif we have a physical server go down,\n\n172\n00:07:18,730 --> 00:07:22,850\nyou can't synchronize the RAM\nafter the servers down.\n\n173\n00:07:22,850 --> 00:07:24,930\nSo you loose those sessions.\n\n174\n00:07:24,930 --> 00:07:26,795\nThe hard drives there though so\nit just boots back up.\n\n175\n00:07:26,795 --> 00:07:28,770\nMm-hm.\nSo your fail over is whatever amount of\n\n176\n00:07:28,770 --> 00:07:30,990\ntime it takes for\nyour virtual machine to boot up,- Right.\n\n177\n00:07:30,990 --> 00:07:31,940\nAnd then you're back in business.\n\n178\n00:07:33,140 --> 00:07:37,330\nSo really cool stuff there,\nnow before I dive into the Hyper-V side,\n\n179\n00:07:37,330 --> 00:07:38,970\nI do want to talk about\none important thing.\n\n180\n00:07:40,240 --> 00:07:42,990\nYesterday not yesterday I need to stop\nsaying yesterday because who knows when\n\n181\n00:07:42,990 --> 00:07:44,329\nyou guys are watching these episodes.\n\n182\n00:07:45,380 --> 00:07:47,890\nIn the previous episode, There you go.\n\n183\n00:07:47,890 --> 00:07:50,124\nI talked about storage.\n\n184\n00:07:50,124 --> 00:07:54,826\nAnd how if we have shared storage,\nyou have to be really careful to\n\n185\n00:07:54,826 --> 00:07:59,968\nensure that two servers don't write\nto the same drive at the same time.\n\n186\n00:07:59,968 --> 00:08:00,967\nMm-hm.\n\n187\n00:08:00,967 --> 00:08:02,018\nBecause if they do that,\n\n188\n00:08:02,018 --> 00:08:04,531\nit's like crossing the streams\nin Ghostbusters, right?\n\n189\n00:08:04,531 --> 00:08:05,065\nRight.\n\n190\n00:08:05,065 --> 00:08:06,530\nYou get drive corruption- Yep.\n\n191\n00:08:06,530 --> 00:08:08,120\nAnd it's, and it's a mess.\n\n192\n00:08:08,120 --> 00:08:11,340\nSo by default, in Hyper-V,\n\n193\n00:08:11,340 --> 00:08:15,965\nif I create a drive, only one\nserver has access to it at a time.\n\n194\n00:08:15,965 --> 00:08:17,110\nMm-hm.\nAnd we saw it with\n\n195\n00:08:17,110 --> 00:08:18,240\nthe storage stuff, right?\n\n196\n00:08:18,240 --> 00:08:20,496\nSee, if I go into storage.\n\n197\n00:08:20,496 --> 00:08:21,625\nAnd into my disks.\n\n198\n00:08:21,625 --> 00:08:25,270\nMm-hm.\nYesterday we created a, a file share.\n\n199\n00:08:25,270 --> 00:08:26,540\nRight.\n\n200\n00:08:26,540 --> 00:08:27,985\nWhich is up here called Storage.\n\n201\n00:08:27,985 --> 00:08:29,060\nMm-hm.\n\n202\n00:08:29,060 --> 00:08:31,960\nAnd it has,\nif I go done into my Resources.\n\n203\n00:08:31,960 --> 00:08:33,695\nIt's attached to Cluster Disk 3, okay?\n\n204\n00:08:33,695 --> 00:08:35,210\nMm-hm.\n\n205\n00:08:35,210 --> 00:08:37,060\nAnd if I look at my disks.\n\n206\n00:08:37,060 --> 00:08:39,270\nCluster Disk 3 is this guy.\n\n207\n00:08:39,270 --> 00:08:41,200\nIt's a 100 gig disk.\n\n208\n00:08:41,200 --> 00:08:43,055\nAnd that's where my file share is.\n\n209\n00:08:43,055 --> 00:08:43,555\nMm-hm.\nAllright?\n\n210\n00:08:44,800 --> 00:08:48,490\nOnly 1 server can have\naccess to this at a time, so\n\n211\n00:08:48,490 --> 00:08:52,018\nnotice how it says cluster\nDisk 3 owner node,\n\n212\n00:08:52,018 --> 00:08:57,570\nIT Pro TV-SVR 1, so\nserver 1 is the owner of it right now.\n\n213\n00:08:57,570 --> 00:08:59,040\nI am on, what server am I on?\n\n214\n00:09:02,610 --> 00:09:04,520\nI am on server 1.\n\n215\n00:09:04,520 --> 00:09:09,890\nAnd so if I go into my disk management and\n\n216\n00:09:09,890 --> 00:09:12,530\nI take a look at that disk,\nthat, that cluster Disk 3.\n\n217\n00:09:13,800 --> 00:09:17,200\nIf I find it in here,\nI should show that it's online.\n\n218\n00:09:17,200 --> 00:09:18,470\nMm-hm.\nSo, I'm gonna go in here and find it.\n\n219\n00:09:20,573 --> 00:09:24,188\nThat's it right there.\n\n220\n00:09:24,188 --> 00:09:25,890\nThis one, no, this one.\n\n221\n00:09:25,890 --> 00:09:26,790\nThere we go.\n\n222\n00:09:26,790 --> 00:09:28,930\nMm-hm.\nSo Disk 1 near a 100 gigs.\n\n223\n00:09:28,930 --> 00:09:31,840\nIt's basic, it's reserved,\nit's online, it's healthy,\n\n224\n00:09:31,840 --> 00:09:36,086\nit's my d drive, I can actually browse\nto it and, and see it on my d drive.\n\n225\n00:09:36,086 --> 00:09:39,390\nRight.\nRight there and there's my shares,\n\n226\n00:09:39,390 --> 00:09:42,160\nthe word share, secret file,\nthat was the file.\n\n227\n00:09:42,160 --> 00:09:43,170\nIt's still there.\n\n228\n00:09:43,170 --> 00:09:46,290\nSo, I've got access to that file,\nthat, that drive.\n\n229\n00:09:46,290 --> 00:09:49,940\nIf I jump over to server 2.\n\n230\n00:09:49,940 --> 00:09:51,790\nWe just make sure I'm\nactually on server 2.\n\n231\n00:09:51,790 --> 00:09:56,390\nAllright, now, I am on server 2.\n\n232\n00:09:57,410 --> 00:09:59,040\nAnd I go into its disk manager.\n\n233\n00:10:00,040 --> 00:10:01,280\nI'll see something different.\n\n234\n00:10:01,280 --> 00:10:02,350\nUh-huh.\nOkay.\n\n235\n00:10:02,350 --> 00:10:06,291\nSince only one server can have access to\nthat drive at a time, on this server,\n\n236\n00:10:06,291 --> 00:10:07,930\nit's gonna be held down.\n\n237\n00:10:07,930 --> 00:10:10,250\nIt's gonna be flagged as reserve.\n\n238\n00:10:10,250 --> 00:10:12,300\nIt's gonna see the drive,\nbut it can't write to it.\n\n239\n00:10:12,300 --> 00:10:12,900\nMm-hm.\n\n240\n00:10:12,900 --> 00:10:16,770\nAnd it's because windows knows if it does\nwrite to it could really damage the disks.\n\n241\n00:10:16,770 --> 00:10:22,020\nSo, there it is, right there,\nI can see that 100 gig disk,\n\n242\n00:10:22,020 --> 00:10:25,530\nbasic reserved, it's got a red\narrow on it pointing down- Mm-hm.\n\n243\n00:10:25,530 --> 00:10:27,930\nSo I know it's there,\nbut I can't get to it.\n\n244\n00:10:27,930 --> 00:10:29,160\nRight.\nRight.\n\n245\n00:10:29,160 --> 00:10:31,970\nIf server 1 failed,\nserver 2 would take over that drive and\n\n246\n00:10:31,970 --> 00:10:33,910\nhave access to everything that's on it.\n\n247\n00:10:33,910 --> 00:10:35,460\nThat's what we want, okay?\n\n248\n00:10:35,460 --> 00:10:38,095\nSo, why am I bringing all this up now?\n\n249\n00:10:38,095 --> 00:10:41,130\n[LAUGH] The reason is when we\ncreate out virtual machines,\n\n250\n00:10:42,290 --> 00:10:44,970\nby default we got to store those\nVHDs the virtual hard drives.\n\n251\n00:10:44,970 --> 00:10:46,110\nThey've got to be stored somewhere.\n\n252\n00:10:46,110 --> 00:10:46,980\nRight.\nRight.\n\n253\n00:10:46,980 --> 00:10:49,490\nAnd if I store them all\non one drive like this.\n\n254\n00:10:49,490 --> 00:10:51,740\nIf I put them all right\nhere on this drive.\n\n255\n00:10:51,740 --> 00:10:55,095\nThen only one server at\na time can have access to it.\n\n256\n00:10:55,095 --> 00:10:57,990\nUm-hm.\nSo, if I have five virtual machines and\n\n257\n00:10:57,990 --> 00:11:01,808\nfive different VHDs and they're all\nright here on this drive, okay,\n\n258\n00:11:01,808 --> 00:11:07,910\nif server 1 fails, server 2 will\ngrab access to this drive and\n\n259\n00:11:07,910 --> 00:11:11,160\nit'll have access to all\nfive virtual machines.\n\n260\n00:11:11,160 --> 00:11:15,540\nBut, it also means that those five virtual\nmachines are kind of tied together.\n\n261\n00:11:15,540 --> 00:11:16,480\nRight.\n\n262\n00:11:16,480 --> 00:11:17,290\nI can't just move one.\n\n263\n00:11:17,290 --> 00:11:20,330\nYou can't split them up across multiple\nmachines for performance reasons or\n\n264\n00:11:20,330 --> 00:11:20,882\nanything like that.\n\n265\n00:11:20,882 --> 00:11:22,290\nYeah, absolutely.\n\n266\n00:11:22,290 --> 00:11:26,410\nIf I had, if I had five machines, and\nI had two running on one server and\n\n267\n00:11:26,410 --> 00:11:28,030\nthree running on the other- Mm-hm.\n\n268\n00:11:28,030 --> 00:11:31,720\nThan those two physical servers would both\nneed to be writing to that same disk,\n\n269\n00:11:31,720 --> 00:11:33,080\nwhich they can't do.\n\n270\n00:11:33,080 --> 00:11:33,980\nOkay.\n\n271\n00:11:33,980 --> 00:11:36,271\nAnd so in the early versions of Hyper-V,\n\n272\n00:11:36,271 --> 00:11:38,765\nwhen Hyper-V came out\nwith Windows Server 2008.\n\n273\n00:11:38,765 --> 00:11:40,705\nMm-hm.\nThat was a big limitation.\n\n274\n00:11:40,705 --> 00:11:43,620\nYep.\nThat you had to fail over multiple VMs\n\n275\n00:11:43,620 --> 00:11:45,200\nat the same time.\n\n276\n00:11:45,200 --> 00:11:47,600\nAnd, and it made it really hard to\nsynchronize memory, because there was so\n\n277\n00:11:47,600 --> 00:11:48,805\nmuch more memory involved.\n\n278\n00:11:48,805 --> 00:11:50,230\nMm-hm.\nAnd it was really bad.\n\n279\n00:11:50,230 --> 00:11:53,140\nAnd so\na Hyper-V under Windows server 2008,\n\n280\n00:11:53,140 --> 00:11:55,270\nI would, I didn't recommend it to people.\n\n281\n00:11:55,270 --> 00:11:56,908\nRight.\nYou know, I, I, I would say don't,\n\n282\n00:11:56,908 --> 00:11:57,915\ndon't run it in production.\n\n283\n00:11:57,915 --> 00:12:00,700\nMm-hm.\nYou can do it in test and eval whatever.\n\n284\n00:12:00,700 --> 00:12:03,440\nIt's not production ready, allright?\n\n285\n00:12:03,440 --> 00:12:06,308\nIn Windows Server 2012 though,\nthey gave us a new feature,\n\n286\n00:12:06,308 --> 00:12:08,820\na new feature that breaks the rules.\n\n287\n00:12:08,820 --> 00:12:09,340\nMm-hm.\n\n288\n00:12:09,340 --> 00:12:16,460\nIt's a feature called a CSV, which is a a,\na cluster shared volume, right, a CSV.\n\n289\n00:12:16,460 --> 00:12:17,400\nMm-hm.\n\n290\n00:12:17,400 --> 00:12:19,790\nAnd this is a special volume.\n\n291\n00:12:19,790 --> 00:12:25,082\nWhere more than one server is allowed\nto write to it at the same time.\n\n292\n00:12:25,082 --> 00:12:25,929\nMm-hm.\nRight?\n\n293\n00:12:25,929 --> 00:12:28,344\nNow, I said in the last\nepisode that's bad.\n\n294\n00:12:28,344 --> 00:12:30,283\nRight.\n[LAUGH] Now, it's all of a sudden not bad?\n\n295\n00:12:30,283 --> 00:12:31,037\nWell, what it does [CROSSTALK].\n\n296\n00:12:31,037 --> 00:12:31,827\nHe was just teasing you earlier.\n\n297\n00:12:31,827 --> 00:12:32,766\nNo.\n\n298\n00:12:32,766 --> 00:12:35,484\nIt's, it's designed specifically for\nHyper-V.\n\n299\n00:12:35,484 --> 00:12:36,122\nYeah.\n\n300\n00:12:36,122 --> 00:12:37,360\nIt, it's not designed for anything else.\n\n301\n00:12:37,360 --> 00:12:40,190\nIt's designed just for\nHyper-V, and basically,\n\n302\n00:12:40,190 --> 00:12:44,610\nthe servers track access not to the drive,\nbut to the VHDs themselves.\n\n303\n00:12:44,610 --> 00:12:46,750\nSo, you're not locking that\nentire drive to one server,\n\n304\n00:12:46,750 --> 00:12:49,570\nyou're locking that one\nVHD file to that server.\n\n305\n00:12:49,570 --> 00:12:50,420\nYep.\n\n306\n00:12:50,420 --> 00:12:55,400\nSo, really cool because now I can have it\nwhere some VMs are running on one server,\n\n307\n00:12:55,400 --> 00:12:57,005\nother VMs are running on another server.\n\n308\n00:12:57,005 --> 00:12:59,720\nMm-hm.\nSo now, I have a cluster environment where\n\n309\n00:12:59,720 --> 00:13:02,075\nit's not like I have an active node and\na passive node.\n\n310\n00:13:02,075 --> 00:13:03,700\nMm-hm.\nI have double active.\n\n311\n00:13:03,700 --> 00:13:04,756\nI can have both of my nodes up and\ndoing work,\n\n312\n00:13:04,756 --> 00:13:05,965\ncarrying some of the workload\nof my environment.\n\n313\n00:13:05,965 --> 00:13:08,009\nMm-hm.\n\n314\n00:13:08,009 --> 00:13:08,821\nSuper cool.\n\n315\n00:13:08,821 --> 00:13:09,332\nAbsolutely, absolutely.\n\n316\n00:13:09,332 --> 00:13:09,913\nRight?\n\n317\n00:13:09,913 --> 00:13:10,528\nAbsolutely.\n\n318\n00:13:10,528 --> 00:13:14,255\nSo the reason I highlight this\nnow is first it's a cool feature.\n\n319\n00:13:14,255 --> 00:13:14,916\nRight.\n\n320\n00:13:14,916 --> 00:13:16,217\nSecond, it's on the exam.\n\n321\n00:13:16,217 --> 00:13:17,029\nIt's gonna be on the exam, yeah.\n\n322\n00:13:17,029 --> 00:13:18,922\n[LAUGH] So, you better know what a CSV is.\n\n323\n00:13:18,922 --> 00:13:22,690\n[LAUGH] And third it's an extra step,\nI'm gonna have to go through.\n\n324\n00:13:22,690 --> 00:13:24,755\nSo, while I could add VMs right now.\n\n325\n00:13:24,755 --> 00:13:27,552\nUm-hm.\nIf I do it I'm doing it the old way.\n\n326\n00:13:27,552 --> 00:13:28,213\nRight.\n\n327\n00:13:28,213 --> 00:13:29,920\nAnd all the VMs are going\nto be tied together.\n\n328\n00:13:29,920 --> 00:13:31,708\nI'll have to fail them all\nover at the same time.\n\n329\n00:13:31,708 --> 00:13:32,590\nYep.\n\n330\n00:13:32,590 --> 00:13:33,635\nI want to do it the new way.\n\n331\n00:13:33,635 --> 00:13:35,063\nI want to do it with the CSVs.\n\n332\n00:13:35,063 --> 00:13:35,701\nAbsolutely.\n\n333\n00:13:35,701 --> 00:13:37,942\nSo, extra step involved here.\n\n334\n00:13:37,942 --> 00:13:40,160\nIt's not a tough step or anything.\n\n335\n00:13:40,160 --> 00:13:41,140\nNo, no we just have to know it, right.\n\n336\n00:13:41,140 --> 00:13:42,255\nRight.\nCuz it's not a default.\n\n337\n00:13:42,255 --> 00:13:43,985\nRight.\nSo we do have to be aware.\n\n338\n00:13:43,985 --> 00:13:48,764\nAllright, so what I did,\nthis this disk here.\n\n339\n00:13:48,764 --> 00:13:54,550\nThis 100 gig disk, it's already being used\nby my file, cluster resource or whatever.\n\n340\n00:13:54,550 --> 00:13:57,330\nYep.\nSo, I can't use that for Hyper-V also.\n\n341\n00:13:57,330 --> 00:13:59,160\nOtherwise it's gonna be\nbound to the old way.\n\n342\n00:13:59,160 --> 00:14:00,596\nI can't convert that to a CSV.\n\n343\n00:14:00,596 --> 00:14:02,330\nMm-hm.\nCSVs are Hyper-V only.\n\n344\n00:14:02,330 --> 00:14:04,360\nRight.\nSo, if I want to do a CSV,\n\n345\n00:14:04,360 --> 00:14:06,935\nI'm either gonna have to\nget rid of that file share.\n\n346\n00:14:06,935 --> 00:14:07,500\nMm-hm.\n\n347\n00:14:07,500 --> 00:14:08,700\nOr I'm gonna add another data.\n\n348\n00:14:08,700 --> 00:14:09,766\nAdd another one.\n\n349\n00:14:09,766 --> 00:14:11,660\nSo, I wanna keep that file share there,\n\n350\n00:14:11,660 --> 00:14:14,061\ncuz I wanna show you guys that\nwe can mix and match resources.\n\n351\n00:14:14,061 --> 00:14:15,034\nMm-hm.\n\n352\n00:14:15,034 --> 00:14:15,660\nSo I'm gonna leave it.\n\n353\n00:14:15,660 --> 00:14:16,760\nI am gonna add another disk.\n\n354\n00:14:17,830 --> 00:14:19,798\nYeah, one thing that could\nget you on the exam too.\n\n355\n00:14:19,798 --> 00:14:22,620\nIf you wanna make a CSV it does\nhave to be added to the cluster.\n\n356\n00:14:22,620 --> 00:14:26,263\nLike we can't just go make the LAN or\ntake a slice of our SAN and\n\n357\n00:14:26,263 --> 00:14:28,347\nthen create CSV straight from it.\n\n358\n00:14:28,347 --> 00:14:30,564\nYou've got to add it as storage first, and\n\n359\n00:14:30,564 --> 00:14:34,330\nthen once it shows up as storage\nin your fail over cluster manager.\n\n360\n00:14:34,330 --> 00:14:36,020\nThen you can create the CSV out of it.\n\n361\n00:14:36,020 --> 00:14:36,730\nYep.\n\n362\n00:14:36,730 --> 00:14:39,040\nAnd that, that's exactly what I'm\ndoing here, is I just added it.\n\n363\n00:14:39,040 --> 00:14:41,575\nSo, it shows up as available storage,\njust like before.\n\n364\n00:14:41,575 --> 00:14:42,350\nMm-hm.\nAllright.\n\n365\n00:14:42,350 --> 00:14:43,330\nAnd it says available.\n\n366\n00:14:43,330 --> 00:14:45,630\nThat means it's not tied\nto any resource yet.\n\n367\n00:14:45,630 --> 00:14:46,150\nRight.\n\n368\n00:14:46,150 --> 00:14:50,640\nAnd since it's not tied, on the right\nside of my screen I can see this option.\n\n369\n00:14:50,640 --> 00:14:52,605\nAdd to Cluster Shared Volume.\n\n370\n00:14:52,605 --> 00:14:54,950\nMm-hm.\nIf I pick storage,\n\n371\n00:14:54,950 --> 00:14:57,330\nsee how Add to Cluster Shared Volume\njust disappears.\n\n372\n00:14:57,330 --> 00:14:58,460\nRight.\nIt's already in use.\n\n373\n00:14:58,460 --> 00:14:59,160\nYou can't do it.\n\n374\n00:14:59,160 --> 00:14:59,820\nRight?\n\n375\n00:14:59,820 --> 00:15:01,150\nBut this guy, he's available.\n\n376\n00:15:01,150 --> 00:15:01,990\nI can do it.\nI'm gonna\n\n377\n00:15:01,990 --> 00:15:03,610\nadd that one to the cluster shared volume.\n\n378\n00:15:04,690 --> 00:15:07,290\nAnd and hopefully it will do it,\nlooks like we got an error.\n\n379\n00:15:07,290 --> 00:15:11,240\nThis disk cannot be added to\ncluster share volumes because,\n\n380\n00:15:11,240 --> 00:15:12,755\nof a reason that is off my screen.\n\n381\n00:15:12,755 --> 00:15:14,118\n[LAUGH] Let's find out why it's there.\n\n382\n00:15:14,118 --> 00:15:15,260\nGo on and tell us.\n\n383\n00:15:15,260 --> 00:15:19,052\nBecause it does not have any suitable\npartitions, oh I forgot to partition it.\n\n384\n00:15:19,052 --> 00:15:20,470\nOkay.\n[LAUGH] So.\n\n385\n00:15:20,470 --> 00:15:21,030\nEasy enough.\n\n386\n00:15:21,030 --> 00:15:22,155\nLet me, yeah, let me fix that.\n\n387\n00:15:22,155 --> 00:15:24,200\n[LAUGH] So, you know what I'm gonna do?\n\n388\n00:15:24,200 --> 00:15:27,620\nI'm going to take it offline and\nremove it.\n\n389\n00:15:27,620 --> 00:15:31,010\nYou don't technically have to\nremove it to add the partition, but\n\n390\n00:15:31,010 --> 00:15:32,630\nI kind of make a habit of it.\n\n391\n00:15:32,630 --> 00:15:34,710\nYeah.\nWhen you're working with clusters,\n\n392\n00:15:34,710 --> 00:15:36,340\nthese are usually\nmission-critical systems.\n\n393\n00:15:36,340 --> 00:15:37,855\nThat's why you're clustering them, right?\n\n394\n00:15:37,855 --> 00:15:38,550\nMm-hm.\nAnd so\n\n395\n00:15:38,550 --> 00:15:42,250\nI always prefer to,\nto act in the safest way possible.\n\n396\n00:15:42,250 --> 00:15:43,880\nRight.\nDo it the right way, and not the easy way.\n\n397\n00:15:43,880 --> 00:15:44,581\nYep.\n\n398\n00:15:44,581 --> 00:15:46,578\nSo, I'm going to just\nremove it real quick, and\n\n399\n00:15:46,578 --> 00:15:48,168\nI'm gonna add a partition to it.\n\n400\n00:15:48,168 --> 00:15:51,813\nAnd by partition, you know, we just need\nto make sure it has an NTFS partition.\n\n401\n00:15:51,813 --> 00:15:52,462\nPartition on it.\n\n402\n00:15:52,462 --> 00:15:52,974\nMm-hm.\n\n403\n00:15:52,974 --> 00:15:57,135\nHyper-V, when it does snapshot stuff makes\nuse of the volume shadow copy service.\n\n404\n00:15:57,135 --> 00:15:58,780\nYep.\nSo we do need to have NTFS.\n\n405\n00:15:58,780 --> 00:16:01,800\nSo I am going to go here\ninto disk management and\n\n406\n00:16:01,800 --> 00:16:06,760\nI'll find that drive,\nthe drive that I neglected to partition.\n\n407\n00:16:06,760 --> 00:16:10,240\nThere it is, nice big fat,\nempty drive that is offline, so\n\n408\n00:16:10,240 --> 00:16:14,270\nlet me just bring it online and\nI'll throw a partition on there.\n\n409\n00:16:14,270 --> 00:16:18,580\nAll right.\n\n410\n00:16:18,580 --> 00:16:20,675\nAnd you know, we'll make my H drive, sure.\n\n411\n00:16:20,675 --> 00:16:21,470\nMm-hm.\n\n412\n00:16:21,470 --> 00:16:22,640\nI'll call it VM Storage.\n\n413\n00:16:22,640 --> 00:16:26,720\nAnd we'll finish that up.\n\n414\n00:16:26,720 --> 00:16:28,395\nAll right, so\nwe'll throw a partition on it.\n\n415\n00:16:28,395 --> 00:16:29,719\nMm-hm.\nAnd then we'll be able to, to bring it in.\n\n416\n00:16:31,700 --> 00:16:35,590\nAll right so as soon as that is done,\nthis is where I get to wait impatiently.\n\n417\n00:16:35,590 --> 00:16:37,551\nI know.\nImpatience is not my thing either.\n\n418\n00:16:37,551 --> 00:16:39,159\n[LAUGH] It's like come\non you're not done yet?\n\n419\n00:16:39,159 --> 00:16:40,300\nYou said quick format, didn't you?\n\n420\n00:16:40,300 --> 00:16:42,670\nQuick format used to be quick, remember?\n\n421\n00:16:42,670 --> 00:16:43,180\nRight, yeah.\n\n422\n00:16:43,180 --> 00:16:45,985\nYeah now it's [CROSSTALK] Now that\nthey're talking about gigs and terabytes,\n\n423\n00:16:45,985 --> 00:16:47,470\nit's not so fast anymore.\n\n424\n00:16:47,470 --> 00:16:48,210\nThere we go.\n\n425\n00:16:48,210 --> 00:16:49,060\nAll right.\n\n426\n00:16:49,060 --> 00:16:52,111\nSo now I'm just gonna go back to my\ncluster and I'll add that disk in.\n\n427\n00:16:52,111 --> 00:16:56,460\nAll right, it looks the same here.\n\n428\n00:16:56,460 --> 00:16:59,200\nNotice I didn't take it\noffline before doing this.\n\n429\n00:16:59,200 --> 00:17:01,310\nI'm the only server that has\naccess to it so that's fine I I-.\n\n430\n00:17:01,310 --> 00:17:03,090\nRight.\nCould have taken it offline but\n\n431\n00:17:03,090 --> 00:17:04,010\nbut there it is.\n\n432\n00:17:04,010 --> 00:17:06,080\nSo now it's online,\nit's available storage.\n\n433\n00:17:06,080 --> 00:17:07,885\nIt shows down here as being my H drive.\n\n434\n00:17:07,885 --> 00:17:08,480\nMm-hm.\nAnd\n\n435\n00:17:08,480 --> 00:17:10,930\nnow I'll add it to my\ncluster shared volumes.\n\n436\n00:17:12,940 --> 00:17:14,170\nThere we go.\n\n437\n00:17:14,170 --> 00:17:18,000\nAnd now it shows up and\nit shows as a cluster shared volume.\n\n438\n00:17:18,000 --> 00:17:18,980\nAll right.\n\n439\n00:17:18,980 --> 00:17:23,760\nNow for right now,\nCSVs are designed for Hyper-V.\n\n440\n00:17:23,760 --> 00:17:24,920\nIn the future that might change.\n\n441\n00:17:24,920 --> 00:17:26,310\nOther software might support it.\n\n442\n00:17:26,310 --> 00:17:28,790\nTo my knowledge Hyper-V is the only\nthing that is supported on it.\n\n443\n00:17:28,790 --> 00:17:30,766\nSo, when it says cluster shared volume,\nto me,\n\n444\n00:17:30,766 --> 00:17:33,705\nthat basically says you can use this for\nHyper-V and that's about it.\n\n445\n00:17:33,705 --> 00:17:36,960\nRight.\nSo, so it's ready, it's there.\n\n446\n00:17:36,960 --> 00:17:39,360\nNow if I create a virtual machine and\n\n447\n00:17:39,360 --> 00:17:42,800\nI put in storage, there,\nin the clustered shared volume.\n\n448\n00:17:42,800 --> 00:17:44,730\nMm-hm.\nI'll be able to make this cluster\n\n449\n00:17:44,730 --> 00:17:45,850\nware VM that can move around.\n\n450\n00:17:47,470 --> 00:17:48,010\nAll right?\n\n451\n00:17:48,010 --> 00:17:50,810\nNow, you might already\nhave virtual machines.\n\n452\n00:17:50,810 --> 00:17:52,760\nVirtual machines have\nbeen in place in Hyper-V.\n\n453\n00:17:52,760 --> 00:17:56,460\nSo, the nice thing here is all you have to\ndo is move their storage here into cluster\n\n454\n00:17:56,460 --> 00:17:59,250\nshared volumes,\nyou know you copy the VHD's or whatever.\n\n455\n00:17:59,250 --> 00:18:02,515\nAnd then modify their configuration\nto point to this new location.\n\n456\n00:18:02,515 --> 00:18:03,530\nRight.\nAnd pow,\n\n457\n00:18:03,530 --> 00:18:07,400\nyou just made it and it's it's now\npart of the CSV so it's awesome.\n\n458\n00:18:07,400 --> 00:18:09,840\nYou can move existing\nVM's in there all right?\n\n459\n00:18:09,840 --> 00:18:13,640\nBut I I don't have any because we just\ninstalled Hyper-V this morning, so what we\n\n460\n00:18:13,640 --> 00:18:16,700\nare going to do next is we are going to\ncreate a virtual machine and we will stick\n\n461\n00:18:16,700 --> 00:18:21,815\nit there in the CSV okay, so let's do that\nAnd cause failures cuz that's always fun.\n\n462\n00:18:21,815 --> 00:18:23,120\n[LAUGH] That's right.\n\n463\n00:18:23,120 --> 00:18:25,220\nSadly, with our track record,\nwe don't cause the failure,\n\n464\n00:18:25,220 --> 00:18:26,910\nwe just have to wait for them to happen.\n\n465\n00:18:26,910 --> 00:18:27,680\nAs it's true.\n\n466\n00:18:27,680 --> 00:18:31,515\n[LAUGH] All right, so so\nI'm gonna go here under Roles.\n\n467\n00:18:31,515 --> 00:18:32,157\nMm-hm.\n\n468\n00:18:32,157 --> 00:18:33,470\nAnd, you know,\n\n469\n00:18:33,470 --> 00:18:37,270\nwe did configure role before to add\nsomething like we were adding DHCP.\n\n470\n00:18:37,270 --> 00:18:38,970\nDHCP or DNS or something like that.\n\n471\n00:18:38,970 --> 00:18:40,690\nAny of that good stuff.\n\n472\n00:18:40,690 --> 00:18:43,180\nBut for now I'm gonna do virtual machines.\n\n473\n00:18:43,180 --> 00:18:46,470\nAnd you'll see where you can start\nby doing a new virtual hard disk or\n\n474\n00:18:46,470 --> 00:18:47,925\nyou can do a new virtual machine.\n\n475\n00:18:47,925 --> 00:18:48,760\nMm-hm.\nRight.\n\n476\n00:18:48,760 --> 00:18:51,100\nSome people ask why would I wanna\nset up a hard disk ahead of time?\n\n477\n00:18:51,100 --> 00:18:55,340\nAnd the reason is if you're doing a fixed\nsize disk it can take awhile to partition\n\n478\n00:18:55,340 --> 00:18:56,474\nit out and set all that up.\n\n479\n00:18:56,474 --> 00:18:57,100\nMm-hm.\nSo\n\n480\n00:18:57,100 --> 00:18:59,990\ndoing a a new hard disk can\nkind of speed things along.\n\n481\n00:18:59,990 --> 00:19:00,550\nRight.\n\n482\n00:19:00,550 --> 00:19:02,385\nYou can set it, like,\nbefore you go home from work.\n\n483\n00:19:02,385 --> 00:19:03,750\nMm-hm.\nAnd let it run overnight,\n\n484\n00:19:03,750 --> 00:19:05,230\nwhen you come in in the morning,\nit's ready.\n\n485\n00:19:05,230 --> 00:19:08,310\nOr adding a second or third drive\nto an existing virtual machine, or\n\n486\n00:19:08,310 --> 00:19:09,770\nsomething like that.\n\n487\n00:19:09,770 --> 00:19:10,330\nYeah.\nYeah, and you know,\n\n488\n00:19:10,330 --> 00:19:11,375\nI'm glad you mentioned that, Mike.\n\n489\n00:19:11,375 --> 00:19:13,430\nMm-hm.\nIf you have more than one virtual\n\n490\n00:19:13,430 --> 00:19:14,645\nhard drive attached to a VM.\n\n491\n00:19:14,645 --> 00:19:17,252\nMm-hm.\nAll of them need to be in the CSV.\n\n492\n00:19:17,252 --> 00:19:18,140\nYeah.\n[LAUGH] In that,\n\n493\n00:19:18,140 --> 00:19:20,925\nthat cluster shared volume so\nthat it will be supported for fail.\n\n494\n00:19:20,925 --> 00:19:22,000\nAbsolutely.\nAll right,\n\n495\n00:19:22,000 --> 00:19:25,420\nall good just do a straight up new\nvirtual machine and it's gonna ask for\n\n496\n00:19:25,420 --> 00:19:27,540\nthe target cluster node.\n\n497\n00:19:27,540 --> 00:19:29,810\nI've gotta pick somebody to start this on.\n\n498\n00:19:29,810 --> 00:19:32,310\nJust because I'm picking one\nserver doesn't mean it's\n\n499\n00:19:32,310 --> 00:19:34,520\nbound to that one server forever.\n\n500\n00:19:34,520 --> 00:19:37,350\nIt just means this is where we are going\nto be starting it's like our preferential\n\n501\n00:19:37,350 --> 00:19:39,000\none for creating the virtual machine.\n\n502\n00:19:39,000 --> 00:19:42,090\nSo I'm going to start with server\none since that is the server I'm on.\n\n503\n00:19:42,090 --> 00:19:44,970\nNice.\nAll right and then I'm going to use this\n\n504\n00:19:44,970 --> 00:19:48,320\nwizard that should look really\nfamiliar it's the Hyper-V wizard.\n\n505\n00:19:48,320 --> 00:19:50,680\nSame one you see when you go\nstraight to the Hyper-V console.\n\n506\n00:19:50,680 --> 00:19:54,880\nYep, so I will just move forward\nhere will create a virtual machine.\n\n507\n00:19:54,880 --> 00:19:58,790\nI will call this one maybe\nthis will be like web 01.\n\n508\n00:19:58,790 --> 00:20:00,490\nThis is gonna be a web server perhaps.\n\n509\n00:20:00,490 --> 00:20:01,961\nAll right.\n\n510\n00:20:01,961 --> 00:20:02,650\nAll right.\n\n511\n00:20:02,650 --> 00:20:06,565\nAnd then for\nthe virtual machine storage right?\n\n512\n00:20:06,565 --> 00:20:08,430\nMm-hm.\nIt wants to store\n\n513\n00:20:08,430 --> 00:20:10,810\nin c:/programdata/microsoft whatever.\n\n514\n00:20:10,810 --> 00:20:12,322\nThat's a horrible default is it not?\n\n515\n00:20:12,322 --> 00:20:13,570\nYeah.\n[LAUGH] You can leave it there\n\n516\n00:20:13,570 --> 00:20:14,260\nif you want.\n\n517\n00:20:14,260 --> 00:20:16,080\nI'm gonna move it and stick it in the CSV.\n\n518\n00:20:16,080 --> 00:20:21,158\nSo let's let's browse to that was my\n\n519\n00:20:21,158 --> 00:20:24,821\noh shoot no actually [CROSSTALK].\n\n520\n00:20:24,821 --> 00:20:27,294\nIt it's just gonna synchronize it,\nnope I just need to leave it be,\n\n521\n00:20:27,294 --> 00:20:28,980\nI need to leave it right where it is.\n\n522\n00:20:28,980 --> 00:20:32,617\nSo the configuration file will actually be\nsynchronized and it synchronized ahead of\n\n523\n00:20:32,617 --> 00:20:35,405\ntime across all the Machines so\nI don't have to worry about that.\n\n524\n00:20:35,405 --> 00:20:36,780\nI'll just leave it in the default.\n\n525\n00:20:36,780 --> 00:20:37,697\nHm.\n\n526\n00:20:37,697 --> 00:20:38,571\nAll right.\n\n527\n00:20:38,571 --> 00:20:41,480\nThen I can pick between a Gen 1 and\na Gen 2 VM.\n\n528\n00:20:41,480 --> 00:20:43,610\nRight.\nThis doesn't really impact the cluster\n\n529\n00:20:43,610 --> 00:20:44,280\nside of things.\n\n530\n00:20:44,280 --> 00:20:49,170\nIt just impacts our ability to do\nthings like higher amounts of memory.\n\n531\n00:20:49,170 --> 00:20:51,550\nRight.\nAnd, and stuff so you know,\n\n532\n00:20:51,550 --> 00:20:53,427\njust depends on what you're trying to do.\n\n533\n00:20:53,427 --> 00:20:54,067\nBHDX's.\n\n534\n00:20:54,067 --> 00:20:56,030\nWe'll go ahead and do a gen two, why not?\n\n535\n00:20:56,030 --> 00:20:58,778\nWho knows, I might want to add three\nterabytes of RAM to this thing.\n\n536\n00:20:58,778 --> 00:20:59,958\n[LAUGH] So.\n\n537\n00:20:59,958 --> 00:21:02,420\n[LAUGH] All right,\nhow much memory I'm gonna assign,\n\n538\n00:21:02,420 --> 00:21:03,870\nI'm gonna keep this somewhat low.\n\n539\n00:21:03,870 --> 00:21:04,810\nI'll just do one gig.\n\n540\n00:21:04,810 --> 00:21:08,250\nAll right.\n\n541\n00:21:08,250 --> 00:21:09,840\nOh I forgot to set up networks.\n\n542\n00:21:09,840 --> 00:21:11,370\nPhe, we don't need any networks.\n\n543\n00:21:11,370 --> 00:21:12,090\nRight now.\n\n544\n00:21:12,090 --> 00:21:14,910\nNow a little note there, Hyper-V,\n\n545\n00:21:14,910 --> 00:21:18,550\nif you're setting up multiple\nnetworks in it, you've got to go and\n\n546\n00:21:18,550 --> 00:21:22,860\nset those networks up on both machines,\nthat doesn't synchronize between the two,\n\n547\n00:21:22,860 --> 00:21:27,780\nunfortunately, so if you've got\nan isolated network and a physical LAN.\n\n548\n00:21:27,780 --> 00:21:31,800\nYou need to define that on each of\nyour host and give them the same name.\n\n549\n00:21:31,800 --> 00:21:34,140\nWhen they have the same name,\nthe VM fails over and\n\n550\n00:21:34,140 --> 00:21:36,170\nit will grab that network\nof the same name.\n\n551\n00:21:36,170 --> 00:21:36,670\nYep.\n\n552\n00:21:37,964 --> 00:21:41,220\nAll right, now for the virtual hard disk,\nnow for the virtual hard disk,\n\n553\n00:21:41,220 --> 00:21:46,510\nI am going to need to browse on this one\nand it does need to go in the CSV and\n\n554\n00:21:46,510 --> 00:21:49,030\nyou know what actually is\nit going to show up for me?\n\n555\n00:21:49,030 --> 00:21:54,310\nShould be your Gen no it was H wasn't\nit I you know I don't know the drive\n\n556\n00:21:54,310 --> 00:21:58,304\nletter shoot and now I can't get back here\nto see it I thought it was H but, It was,\n\n557\n00:21:58,304 --> 00:22:03,850\nyeah cause that is only one Gig\npoint nine nine gigs, it is H,\n\n558\n00:22:03,850 --> 00:22:10,363\nI think I need to add the hard drive\nahead of time No if you if you browse.\n\n559\n00:22:12,238 --> 00:22:13,120\nOh that's right.\n\n560\n00:22:13,120 --> 00:22:13,630\nUp here.\nI'm sorry.\n\n561\n00:22:13,630 --> 00:22:15,870\nI forget it puts it in that\nfolder on the C drive.\n\n562\n00:22:15,870 --> 00:22:16,520\nYeah, exactly.\n\n563\n00:22:16,520 --> 00:22:17,720\nShoot.\nI forgot all about that.\n\n564\n00:22:17,720 --> 00:22:18,620\nThere's a cluster store.\n\n565\n00:22:18,620 --> 00:22:19,120\nThere we go.\n\n566\n00:22:19,120 --> 00:22:20,020\nWell, thank you, Mike, Mm-hm.\n\n567\n00:22:20,020 --> 00:22:21,265\nThat, that's why we keep you around.\n\n568\n00:22:21,265 --> 00:22:25,129\n[LAUGH] The CSVs, I,\nI completely forgot about that.\n\n569\n00:22:26,170 --> 00:22:29,790\nWhen you turn it into a CSV,\nit doesn't give it a drive letter anymore.\n\n570\n00:22:29,790 --> 00:22:32,710\nRight.\nIt moves it into a folder on the hard\n\n571\n00:22:32,710 --> 00:22:33,875\ndrive, on your C drive.\n\n572\n00:22:33,875 --> 00:22:36,460\nMm-hm.\nSo when I look at C colon, there it is,\n\n573\n00:22:36,460 --> 00:22:38,908\nthere's this folder,\nC colon, cluster storage.\n\n574\n00:22:38,908 --> 00:22:39,540\nMm-hm.\nAnd\n\n575\n00:22:39,540 --> 00:22:41,930\nwhen I browse into that I see volume one.\n\n576\n00:22:41,930 --> 00:22:44,680\nThat's the cluster shared\nvolume that I added before.\n\n577\n00:22:44,680 --> 00:22:47,520\nRight.\nIt's adding it in here as like a pointer\n\n578\n00:22:47,520 --> 00:22:49,950\nso that I can reference and\nsee it and access it.\n\n579\n00:22:49,950 --> 00:22:51,500\nIt's like a mount point basically.\n\n580\n00:22:51,500 --> 00:22:55,500\nYeah I [CROSSTALK] Cuz if you go out if\nyou go back up one level no don't cancel.\n\n581\n00:22:55,500 --> 00:22:56,585\nWhile you're browsing it.\n\n582\n00:22:56,585 --> 00:22:59,820\nOh, [LAUGH] If you hover over the,\nthe cluster share volume folder,\n\n583\n00:22:59,820 --> 00:23:01,160\nI think it's gonna tell you\nthat it's 100 gigabytes.\n\n584\n00:23:01,160 --> 00:23:04,940\nYeah.\nOr it's gonna tell me nothing.\n\n585\n00:23:04,940 --> 00:23:06,245\nOr it's gonna tell you nothing, yeah.\n\n586\n00:23:06,245 --> 00:23:10,110\n[LAUGH] Typically when you hover, when you\nget that little tool, too- If I browse,\n\n587\n00:23:10,110 --> 00:23:12,040\nI bet if I browse the file explorer,\nit'll tell me.\n\n588\n00:23:12,040 --> 00:23:15,040\nSo, if we go to cluster storage and float.\n\n589\n00:23:15,040 --> 00:23:15,810\nHm.\n\n590\n00:23:15,810 --> 00:23:17,256\nYeah.\nUsually your tool does pop up, but\n\n591\n00:23:17,256 --> 00:23:19,155\nyeah, it's gonna see it\nas that 100 gigabyte.\n\n592\n00:23:19,155 --> 00:23:20,071\nSo it's just like a mouth point.\n\n593\n00:23:20,071 --> 00:23:22,238\nYeah, if we browse this way.\n\n594\n00:23:22,238 --> 00:23:27,375\nSo my C drive right now, on here,\nsee how it shows 300, lets see,\n\n595\n00:23:27,375 --> 00:23:32,510\nwe have bytes, K, megs,\ngigs 300 gigs free, and if I change into\n\n596\n00:23:32,510 --> 00:23:38,580\nthe cluster shared storage and\nlook here, well, they all show the same.\n\n597\n00:23:38,580 --> 00:23:39,360\nHm.\nOh, it's cuz I'm\n\n598\n00:23:39,360 --> 00:23:41,110\nnot actually in the volume yet.\n\n599\n00:23:41,110 --> 00:23:45,535\nOh, okay.\nIf I get in the volume, and\n\n600\n00:23:45,535 --> 00:23:49,797\nthere's nothing here.\n\n601\n00:23:49,797 --> 00:23:51,173\nRight.\n\n602\n00:23:51,173 --> 00:23:51,759\nGreat.\n\n603\n00:23:51,759 --> 00:23:54,336\nNow I'm [CROSSTALK] But anyway,\nyeah, it does show up like a.\n\n604\n00:23:54,336 --> 00:23:56,553\nSo [LAUGH].\n\n605\n00:23:56,553 --> 00:24:00,272\nDid I just close all of that?\n\n606\n00:24:00,272 --> 00:24:07,901\nYou have to have at least one file in\nthere before it'll show up [CROSSTALK].\n\n607\n00:24:07,901 --> 00:24:09,205\nDirectory command.\n[CROSSTALK] So\n\n608\n00:24:09,205 --> 00:24:11,370\nI was just gonna stick a file in there.\n\n609\n00:24:11,370 --> 00:24:16,500\nAnd then we'll be able to see\nthat number being different, so\n\n610\n00:24:16,500 --> 00:24:21,330\nwe'll just call it test.txt,\nand I'm not an administrator,\n\n611\n00:24:21,330 --> 00:24:23,450\nall right you know what this is\nturning out to be more burden.\n\n612\n00:24:23,450 --> 00:24:24,540\nYeah, too much trouble.\n\n613\n00:24:24,540 --> 00:24:25,980\nYou know what, let me,\n\n614\n00:24:25,980 --> 00:24:30,026\nlet me do this, [CROSSTALK] We can\ngo back into our cluster manager.\n\n615\n00:24:30,026 --> 00:24:31,240\nAnd let me go back.\n\n616\n00:24:31,240 --> 00:24:32,590\nAnd I'll put that configuration.\n\n617\n00:24:32,590 --> 00:24:35,140\nThe configuration's gonna sync between\nthe machines anyway, but I'll go ahead and\n\n618\n00:24:35,140 --> 00:24:36,045\nstuff it in that folder.\n\n619\n00:24:36,045 --> 00:24:36,660\nUm-hm.\n\n620\n00:24:36,660 --> 00:24:38,020\nJust to do it.\n\n621\n00:24:38,020 --> 00:24:39,770\nSo that'll create a file in there.\n\n622\n00:24:39,770 --> 00:24:42,026\nAnd then we'll be able\nto see that storage.\n\n623\n00:24:46,651 --> 00:24:47,151\n[SOUND] All right.\n\n624\n00:24:47,151 --> 00:24:48,510\nSo I'm gonna create a folder in here.\n\n625\n00:24:48,510 --> 00:24:54,000\nSo I'm calling this ITProTV2- Web 01,\nthat's the server that I'm making.\n\n626\n00:24:54,000 --> 00:24:56,850\nSo I'm going to stuff my config in there,\nand I'm going to stuff my VHD.\n\n627\n00:24:56,850 --> 00:24:59,400\nSo just anything having to do with\nthis VM is going to be right there.\n\n628\n00:24:59,400 --> 00:25:01,550\nRight.\nIn that location.\n\n629\n00:25:01,550 --> 00:25:05,697\nAnd so, now when I create this\nvirtual hard drive, oh it's already,\n\n630\n00:25:05,697 --> 00:25:07,470\nalready got that path for me.\n\n631\n00:25:07,470 --> 00:25:08,100\nperfect. Nice. So,\n\n632\n00:25:08,100 --> 00:25:10,790\nalthough it's doing that thing where\nit does that double server name.\n\n633\n00:25:10,790 --> 00:25:11,510\nWhich I hate.\nSo\n\n634\n00:25:11,510 --> 00:25:12,880\nI'm going to edit that just a little bit.\n\n635\n00:25:12,880 --> 00:25:15,720\nYeah, that's been my problem with\nHyper-V every since it's come out.\n\n636\n00:25:15,720 --> 00:25:17,120\nYeah.\nJust drives me crazy.\n\n637\n00:25:17,120 --> 00:25:18,350\nA little pet peeve of mine.\n\n638\n00:25:18,350 --> 00:25:24,525\nSo I'm just going to get that extra\npart of the path out of there.\n\n639\n00:25:24,525 --> 00:25:27,110\nAlright, so it's going to create a 127gb,\ndynamically expanding disk.\n\n640\n00:25:27,110 --> 00:25:28,060\nWhich I'm happy with.\n\n641\n00:25:28,060 --> 00:25:28,760\nMhm.\n\n642\n00:25:28,760 --> 00:25:32,770\nSo we'll go with that,\nand we'll just hit next.\n\n643\n00:25:32,770 --> 00:25:34,980\nWe'll install an operating\nsystem from an ISO file.\n\n644\n00:25:34,980 --> 00:25:35,900\nWe've got one sitting around here.\n\n645\n00:25:35,900 --> 00:25:40,320\nIn there somewhere.\n\n646\n00:25:40,320 --> 00:25:44,950\nWe will do Server 2012, R2 eval,\nand we will finish it up.\n\n647\n00:25:44,950 --> 00:25:47,210\nAlright, so\nits creating the virtual machine.\n\n648\n00:25:47,210 --> 00:25:48,350\nIt's actually doing two things here.\n\n649\n00:25:48,350 --> 00:25:49,010\nRight.\n\n650\n00:25:49,010 --> 00:25:54,280\nIt's creating the VM in that cluster\nshared volume, in that CSV location, and\n\n651\n00:25:54,280 --> 00:25:58,412\ntwo, it's adding it as a resource\nin the cluster manager.\n\n652\n00:25:58,412 --> 00:26:03,740\nSo the cluster manager knows this virtual\nmachine exists, and it's cluster, aware.\n\n653\n00:26:03,740 --> 00:26:06,290\nAnd so my final confirmation\nscreen is actually going to come\n\n654\n00:26:06,290 --> 00:26:07,310\nfrom the cluster manager.\n\n655\n00:26:07,310 --> 00:26:08,575\nAnd it looks. Mm-hm. Like I got a warning.\n\n656\n00:26:08,575 --> 00:26:10,568\nLet's see what my warning is.\n\n657\n00:26:18,985 --> 00:26:23,760\nIt says, the ISO is not a path\nto storage in the cluster.\n\n658\n00:26:23,760 --> 00:26:25,780\nAlright, great point there.\n\n659\n00:26:25,780 --> 00:26:29,790\nI pointed to an ISO that's\non itpro.tv server one.\n\n660\n00:26:29,790 --> 00:26:34,800\nIf I boot that virtual machine up\non server one it'll see the ISO.\n\n661\n00:26:34,800 --> 00:26:37,510\nBut what happens if it\nfails over to server two?\n\n662\n00:26:37,510 --> 00:26:41,770\nIt won't be able to get to that ISO\nanymore so it's given me a warning about\n\n663\n00:26:41,770 --> 00:26:44,920\nthat now since it's just for\nthe install I can ignore it.\n\n664\n00:26:44,920 --> 00:26:45,680\nRight.\nDo my install and\n\n665\n00:26:45,680 --> 00:26:47,210\nnever worry about it again.\n\n666\n00:26:47,210 --> 00:26:50,580\nBut if I'm going to be frequently\naccessing ISO's like this,\n\n667\n00:26:50,580 --> 00:26:53,750\nthe better thing to do is to put\nthem in a network share somewhere.\n\n668\n00:26:53,750 --> 00:26:56,340\nRight.\nI think you mentioned that earlier Mike.\n\n669\n00:26:56,340 --> 00:26:58,060\n[COUGH] I had to wait\ntill you start coughing.\n\n670\n00:26:58,060 --> 00:27:01,090\nExactly, to make sure they're always\navailable to all the machines.\n\n671\n00:27:01,090 --> 00:27:02,470\nAnd we do that here at itpro.tv.\n\n672\n00:27:02,470 --> 00:27:05,430\nWe actually have a file server,\nwhere we have all of our ISO's in\n\n673\n00:27:05,430 --> 00:27:08,960\na network share that we can kind of mount\nto, and then they're just always there.\n\n674\n00:27:08,960 --> 00:27:12,295\nAnd regardless of what machine you fail\nover to, you've got access to that share.\n\n675\n00:27:12,295 --> 00:27:14,520\nMm-hm, exactly.\nIt's a little bit slower to go over\n\n676\n00:27:14,520 --> 00:27:15,930\na network share though.\n\n677\n00:27:15,930 --> 00:27:17,580\nYeah.\nSo, you know, but that's.\n\n678\n00:27:17,580 --> 00:27:19,140\nAnd like you said, I mean,\nthis is the install disk,\n\n679\n00:27:19,140 --> 00:27:20,480\nwe're only gonna need it this first time,\nand\n\n680\n00:27:20,480 --> 00:27:23,040\nthen we don't care if it's not\navailable when it fails over, so.\n\n681\n00:27:23,040 --> 00:27:28,190\nYep, so I'm going to ignore that error and\nwe should be in business.\n\n682\n00:27:28,190 --> 00:27:31,270\nSo, back here in my Hyper-V Manager,\n\n683\n00:27:31,270 --> 00:27:33,800\nI can see I now have a virtual\nmachine ITPROTV2-WEB01.\n\n684\n00:27:33,800 --> 00:27:35,480\nIt's sitting there.\n\n685\n00:27:35,480 --> 00:27:38,020\nIt's turned off right now,\nand I'm, I'm okay with that.\n\n686\n00:27:38,020 --> 00:27:43,400\nRight And if I go back to my cluster\nmanager, I can finish the wizard and\n\n687\n00:27:43,400 --> 00:27:46,820\nI've got that virtual machine\nas a cluster resource.\n\n688\n00:27:46,820 --> 00:27:48,130\nNice.\nThat's beautiful.\n\n689\n00:27:48,130 --> 00:27:49,590\nNow, this is important.\n\n690\n00:27:49,590 --> 00:27:54,365\nFrom here on out, whenever I start or\nstop the virtual machine.\n\n691\n00:27:54,365 --> 00:27:56,950\nMm-hm.\nI need to do it from the cluster\n\n692\n00:27:56,950 --> 00:27:58,080\nmanager, right?\n\n693\n00:27:58,080 --> 00:28:00,980\nNow to connect to its screen,\nto look at the operating system or\n\n694\n00:28:00,980 --> 00:28:02,870\nsomething like that,\nI can do that from the Hyper-V manager.\n\n695\n00:28:02,870 --> 00:28:04,540\nRight.\nBut to actually turn it on and\n\n696\n00:28:04,540 --> 00:28:07,290\noff and so on I need to do\nit from the cluster manager\n\n697\n00:28:07,290 --> 00:28:09,670\nbecause that's a cluster managed resource.\n\n698\n00:28:09,670 --> 00:28:11,000\nRight.\nI need to make sure the cluster's\n\n699\n00:28:11,000 --> 00:28:12,520\naware of itself.\n\n700\n00:28:12,520 --> 00:28:15,330\nAnd so what I'm gonna do is\nI'm gonna start this one up.\n\n701\n00:28:15,330 --> 00:28:19,900\nAnd when I start,\nit's gonna fire up here, and\n\n702\n00:28:19,900 --> 00:28:24,150\nit's gonna boot it up on ITProTV server 1\nbecause that's the one that I picked, and\n\n703\n00:28:24,150 --> 00:28:26,290\nwe'll do it's install and, and so on.\n\n704\n00:28:26,290 --> 00:28:27,630\nSo there it is, it's starting to run.\n\n705\n00:28:27,630 --> 00:28:28,990\nI'm gonna connect to it.\n\n706\n00:28:31,580 --> 00:28:33,680\nAnd here we go, now just for\nyour own reference,\n\n707\n00:28:33,680 --> 00:28:37,620\nfor this stuff to work, oh shoot, I\nforgot to press any key to boot from DVD.\n\n708\n00:28:39,270 --> 00:28:45,780\nAnd so, let's restart that one.\n\n709\n00:28:45,780 --> 00:28:47,250\nThere we go.\nOkay.\n\n710\n00:28:47,250 --> 00:28:50,520\nSo, if you wanna manage this\nfrom your laptop or desktop or\n\n711\n00:28:50,520 --> 00:28:53,015\nwhatever, you have to install the R-Sat.\n\n712\n00:28:53,015 --> 00:28:54,935\nThe remote server administration tools.\n\n713\n00:28:54,935 --> 00:28:57,790\nMm-hm.\nAnd you've got to install the Hyper-V and\n\n714\n00:28:57,790 --> 00:28:58,960\ncluster management tools.\n\n715\n00:28:58,960 --> 00:29:01,160\nYou got to have both in\norder to properly manage it.\n\n716\n00:29:01,160 --> 00:29:03,410\nYeah.\nSo just, just be aware of that.\n\n717\n00:29:03,410 --> 00:29:06,320\nAlright, so so what I'm gonna do is I'm\ngonna start this install running and\n\n718\n00:29:06,320 --> 00:29:07,990\nmaybe we'll stop and take a break.\n\n719\n00:29:07,990 --> 00:29:09,530\nAnd let the.\nYou don't think the folks out there want\n\n720\n00:29:09,530 --> 00:29:14,155\nto watch this install process [LAUGH] Well\nyou know maybe the first time you see it,\n\n721\n00:29:14,155 --> 00:29:18,477\nit's fine but by the time you set up your\nthousandth server it starts to get just\n\n722\n00:29:18,477 --> 00:29:19,560\na tad bit boring.\n\n723\n00:29:19,560 --> 00:29:20,560\nJust a wee bit.\n\n724\n00:29:20,560 --> 00:29:23,000\nSo which should I use standard,\ndata center?\n\n725\n00:29:23,000 --> 00:29:24,510\nLets do standard.\n\n726\n00:29:24,510 --> 00:29:25,400\nStandard with a.\n\n727\n00:29:25,400 --> 00:29:26,800\nWe will do a graphic install.\n\n728\n00:29:26,800 --> 00:29:32,160\nI am just going to\n\n729\n00:29:32,160 --> 00:29:35,760\ndo a normal install here, I am not picking\nanything special, it's a clean install,\n\n730\n00:29:35,760 --> 00:29:38,720\nYou guys have seen this in other episodes,\ntwo or three times.\n\n731\n00:29:38,720 --> 00:29:42,410\nLet it take the whole drive,\nI think I clicked next, didn't I?\n\n732\n00:29:42,410 --> 00:29:43,840\nIs it thinking, oh, it's thinking.\n\n733\n00:29:43,840 --> 00:29:47,143\nAl right the spinning donut of doom,\nor whatever it's called.\n\n734\n00:29:47,143 --> 00:29:49,377\n[LAUGH] That the donut of delay.\n\n735\n00:29:49,377 --> 00:29:51,650\nIt's expanding out that drive, maybe.\n\n736\n00:29:51,650 --> 00:29:52,240\nAll right.\n\n737\n00:29:52,240 --> 00:29:54,960\nWell, what we're gonna do is we're\ngonna let this thing go and, and\n\n738\n00:29:54,960 --> 00:29:55,885\ninstall, there it goes.\n\n739\n00:29:55,885 --> 00:29:56,400\nMm-hm.\n\n740\n00:29:56,400 --> 00:29:57,740\nAnd we'll let it install during the break.\n\n741\n00:29:57,740 --> 00:29:59,860\nWhen we get back,\nthe virtual machine will be done.\n\n742\n00:29:59,860 --> 00:30:00,970\nIt'll be booted up.\n\n743\n00:30:00,970 --> 00:30:02,630\nRight.\nAnd we'll show you guys how\n\n744\n00:30:02,630 --> 00:30:04,580\nwe could fail it over\nto the other machine.\n\n745\n00:30:04,580 --> 00:30:08,450\nHow it can move back and forth and how we\nkinda see some of the action going on.\n\n746\n00:30:08,450 --> 00:30:11,517\nAnd and depending on how long this\ntakes I might spin up a second machine.\n\n747\n00:30:11,517 --> 00:30:12,502\nWe'll, we'll see.\nWe'll play it by ear.\n\n748\n00:30:12,502 --> 00:30:13,320\nWe'll- Start one up.\n\n749\n00:30:13,320 --> 00:30:17,370\nBut yes so we'll let that run and Mike,\nanything else to throw in before we break?\n\n750\n00:30:17,370 --> 00:30:18,250\nI think we're good.\n\n751\n00:30:18,250 --> 00:30:18,800\nAll right.\n\n752\n00:30:18,800 --> 00:30:19,940\nWell I'll stop here than.\n\n753\n00:30:19,940 --> 00:30:24,573\nStay tuned, when we get back we'll get\na chance to see this virtual machine in\n\n754\n00:30:24,573 --> 00:30:25,830\naction.\n\n755\n00:30:25,830 --> 00:30:33,568\n[SOUND] [SOUND] Alright\nwelcome back everybody.\n\n756\n00:30:33,568 --> 00:30:37,377\nOkay, so during the break which if you're\nwatching live was quite a long one but\n\n757\n00:30:37,377 --> 00:30:40,160\nif you're watching recorded\nit happened just like that.\n\n758\n00:30:40,160 --> 00:30:41,406\nIt was one minute.\n\n759\n00:30:41,406 --> 00:30:45,140\n[LAUGH] [LAUGH] I finished installing the,\nthe first web server and I went ahead and\n\n760\n00:30:45,140 --> 00:30:48,910\ndid a second one so we've actually got two\nweb servers that are up in our cluster.\n\n761\n00:30:48,910 --> 00:30:54,220\nAnd I brought them both up on ITPROTV\nserver one or whatever it was.\n\n762\n00:30:54,220 --> 00:30:55,710\nSo let's take a look at that.\n\n763\n00:30:55,710 --> 00:31:00,000\nI am here in my cluster fail over manager,\nand\n\n764\n00:31:00,000 --> 00:31:03,910\nor fail over close manager, and\nI can see the web over one and\n\n765\n00:31:03,910 --> 00:31:07,780\nweb over two there is those two virtual\nmachines that are up and running.\n\n766\n00:31:07,780 --> 00:31:10,240\nThey're both running on\nserver one right now.\n\n767\n00:31:10,240 --> 00:31:11,650\nThat's just where I started them.\n\n768\n00:31:11,650 --> 00:31:12,772\nRight.\nMostly because\n\n769\n00:31:12,772 --> 00:31:14,443\nthe ISO is [CROSSTALK] on that server.\n\n770\n00:31:14,443 --> 00:31:16,860\n[LAUGH] So so there they go,\nthey're happy.\n\n771\n00:31:16,860 --> 00:31:17,500\nI didn't do much.\n\n772\n00:31:17,500 --> 00:31:20,540\nI, I just installed it and logged in once.\n\n773\n00:31:20,540 --> 00:31:22,940\nI did configure the network\nadapters because I.\n\n774\n00:31:22,940 --> 00:31:23,490\nOkay.\n\n775\n00:31:23,490 --> 00:31:25,780\nI mentioned we're doing the set up but\nI hadn't done it.\n\n776\n00:31:25,780 --> 00:31:30,160\nAnd so\nall I did was in the hyper V manager.\n\n777\n00:31:30,160 --> 00:31:33,910\nI chose server one and I went into\nthe virtual switch manager, and\n\n778\n00:31:33,910 --> 00:31:37,750\nI added in a network called\nthe ITProTV LAN, and\n\n779\n00:31:37,750 --> 00:31:43,280\nI did the same thing on server two,\nmaking sure to give it the same name.\n\n780\n00:31:43,280 --> 00:31:45,928\nSo ITProTV LAN on both servers.\n\n781\n00:31:45,928 --> 00:31:49,052\nThat, that's important because if you fail\nover from one to the other it's going to\n\n782\n00:31:49,052 --> 00:31:50,729\nlook for\na virtual switch with the same name.\n\n783\n00:31:50,729 --> 00:31:51,600\nMm-hm.\n\n784\n00:31:51,600 --> 00:31:54,131\nAnd so you've got to make sure\nyou've got that in place,\n\n785\n00:31:54,131 --> 00:31:55,725\notherwise you'll have problems.\n\n786\n00:31:55,725 --> 00:32:00,249\nNow, you can see here in Hyper V Manager,\nI see both virtual machines\n\n787\n00:32:00,249 --> 00:32:04,230\nrunning on server 1,\nI don't see any running on server 2.\n\n788\n00:32:04,230 --> 00:32:06,660\nDoesn't mean that server 2 isn't working,\n\n789\n00:32:06,660 --> 00:32:09,555\nit's just It does not have\naccess to the drives yet.\n\n790\n00:32:09,555 --> 00:32:11,380\nMm-hm.\nWhen we fail over,\n\n791\n00:32:11,380 --> 00:32:14,440\nthat machine will magically appear here,\nbut for right now, it's,\n\n792\n00:32:14,440 --> 00:32:15,740\nit's not there, right.\n\n793\n00:32:15,740 --> 00:32:20,190\nAnd that's why you don't wanna rely on the\nHyper-V manager to connect your servers.\n\n794\n00:32:20,190 --> 00:32:23,825\nIf I'm having a problem with Web 01,\nand I've got 10 Hyper-V servers.\n\n795\n00:32:23,825 --> 00:32:25,735\nMm-hm.\nI might have to browse through all ten.\n\n796\n00:32:25,735 --> 00:32:28,050\n[LAUGH] Before I finally\nfigure out where it is, right?\n\n797\n00:32:28,050 --> 00:32:29,770\nWhich one has this machine, dag nab it.\n\n798\n00:32:29,770 --> 00:32:33,110\nYeah, cuz they jump around based\non unfailures and other events.\n\n799\n00:32:33,110 --> 00:32:33,660\nYep.\nBut,\n\n800\n00:32:33,660 --> 00:32:36,397\nif I go to my Hyper-V manage,\nI mean my [LAUGH].\n\n801\n00:32:36,397 --> 00:32:39,920\n[LAUGH] If I go to my fail\nover cluster manager.\n\n802\n00:32:39,920 --> 00:32:43,270\nI can come in here and\nI just see all the virtual machines\n\n803\n00:32:43,270 --> 00:32:45,530\nregardless of what server\nthey're posted on.\n\n804\n00:32:45,530 --> 00:32:46,530\nRight.\nIf they're on server one\n\n805\n00:32:46,530 --> 00:32:47,450\nserver two whatever.\n\n806\n00:32:47,450 --> 00:32:48,940\nNice.\nAll right.\n\n807\n00:32:48,940 --> 00:32:51,795\nBut right now, we've got what's\ncalled an active passive cluster.\n\n808\n00:32:51,795 --> 00:32:53,510\nMm-hm.\nServer 1 is active.\n\n809\n00:32:53,510 --> 00:32:54,890\nIt's got my file storage.\n\n810\n00:32:54,890 --> 00:32:56,240\nIt's got my two VMs.\n\n811\n00:32:56,240 --> 00:32:58,130\nIt's doing all the work.\n\n812\n00:32:58,130 --> 00:33:00,160\nServer 2 is doing nothing.\n\n813\n00:33:00,160 --> 00:33:02,810\nHe's kicking back with a mai-tai and\njust chilling there.\n\n814\n00:33:02,810 --> 00:33:03,580\nHe's got it easy.\n\n815\n00:33:03,580 --> 00:33:04,320\nYeah.\nSo,\n\n816\n00:33:04,320 --> 00:33:09,135\nwhat I really wanna show you guys is\nthe excitement of doing a live migration.\n\n817\n00:33:09,135 --> 00:33:09,750\nMm-hm.\n\n818\n00:33:09,750 --> 00:33:14,500\nWhen you have a cluster like this, both\nservers have access to the shared storage.\n\n819\n00:33:14,500 --> 00:33:18,310\nSo both of my physical servers, can see\nthe virtual hard drives for Web 01 and\n\n820\n00:33:18,310 --> 00:33:18,860\nWeb 02.\n\n821\n00:33:18,860 --> 00:33:22,375\nBut server 2 is keeping its hands off,\ncuz it knows that there's trouble.\n\n822\n00:33:22,375 --> 00:33:23,340\nMm-hm.\n\n823\n00:33:23,340 --> 00:33:26,050\nIf it tries to access it at the same time,\nthere'd be a mess.\n\n824\n00:33:26,050 --> 00:33:28,530\nSo fortunately,\nwe have a cluster shared volume.\n\n825\n00:33:28,530 --> 00:33:29,390\nRight.\nAnd so we are,\n\n826\n00:33:29,390 --> 00:33:30,760\nwe're ready to actually see- Right.\n\n827\n00:33:30,760 --> 00:33:33,250\nThat fail over and kinda jump it across.\n\n828\n00:33:33,250 --> 00:33:35,100\nSo what I'll do is I'll take Web 01.\n\n829\n00:33:35,100 --> 00:33:39,210\nAnd you know, before I jump into that,\nlet me do something real quick.\n\n830\n00:33:39,210 --> 00:33:41,520\nI'm gonna start up a Ping.\n\n831\n00:33:41,520 --> 00:33:42,950\nTo that server.\n\n832\n00:33:42,950 --> 00:33:43,880\nTo Web 01.\n\n833\n00:33:43,880 --> 00:33:46,295\nSo that is Web 01, all right?\n\n834\n00:33:46,295 --> 00:33:47,247\nMm-hm.\nRight, and so\n\n835\n00:33:47,247 --> 00:33:48,440\nI'm just sending pings to it.\n\n836\n00:33:48,440 --> 00:33:53,870\nAnd, you know, while I'm at it, I'll go\nahead and open up a second ping to Web 02.\n\n837\n00:33:57,411 --> 00:33:58,220\nWhich is 170.\n\n838\n00:33:58,220 --> 00:33:59,260\nThere, okay.\n\n839\n00:33:59,260 --> 00:34:00,830\nSo, I've got my two little pings running.\n\n840\n00:34:00,830 --> 00:34:03,256\nThe top left one here, that's Web 01.\n\n841\n00:34:03,256 --> 00:34:03,834\nMm-hm.\n\n842\n00:34:03,834 --> 00:34:05,390\nAnd, I didn't register the DNS name.\n\n843\n00:34:05,390 --> 00:34:06,040\nSo I had to do it by IP.\n\n844\n00:34:06,040 --> 00:34:06,720\nOkay.\n\n845\n00:34:06,720 --> 00:34:09,020\nAnd this bottom one here, that's Web 02.\n\n846\n00:34:09,020 --> 00:34:11,925\nI'll stick it there, all right.\n\n847\n00:34:11,925 --> 00:34:12,580\nMm-hm.\n\n848\n00:34:12,580 --> 00:34:15,170\nSo, now what I'm gonna do is,\nI'm gonna initiate fail over.\n\n849\n00:34:15,170 --> 00:34:20,645\nNow, when I do that,\nif I didn't do a cluster shared volume.\n\n850\n00:34:20,645 --> 00:34:21,150\nMm-hm.\n\n851\n00:34:21,150 --> 00:34:23,710\nWhen I fail one over They all have to go.\n\n852\n00:34:23,710 --> 00:34:24,902\nRight.\nSo, server or Web 01 or\n\n853\n00:34:24,902 --> 00:34:26,300\nWeb 02 would both go together.\n\n854\n00:34:26,300 --> 00:34:29,990\nAnd since we did a cluster share volume,\nit's ok for\n\n855\n00:34:29,990 --> 00:34:33,780\nthe two different servers to be\naccessing that storage at the same time.\n\n856\n00:34:33,780 --> 00:34:35,810\nSo I can fail over just one of them.\n\n857\n00:34:35,810 --> 00:34:38,510\nAnd I'm going to fail over Web 1.01.\n\n858\n00:34:38,510 --> 00:34:40,650\nSo, I'm just gonna right click on it and\nI'll choose move.\n\n859\n00:34:41,930 --> 00:34:44,345\nAnd you'll see where I can do a live or\na quick migration.\n\n860\n00:34:44,345 --> 00:34:44,950\nMm-hm.\n\n861\n00:34:44,950 --> 00:34:48,400\nA live migration it's\ngonna actually try and\n\n862\n00:34:48,400 --> 00:34:52,305\nmove the server as it is right\nnow including all of its memory.\n\n863\n00:34:52,305 --> 00:34:53,700\nMm-hm.\nIt's really awesome.\n\n864\n00:34:53,700 --> 00:34:56,520\nRight.\nIt's gonna take what's in RAM on server 1.\n\n865\n00:34:56,520 --> 00:34:58,300\nAnd synchronize it with server 2.\n\n866\n00:34:58,300 --> 00:35:03,380\nAnd when the two are in sync then it'll\nflip over almost instantaneously.\n\n867\n00:35:03,380 --> 00:35:05,100\nVery awesome, all right?\n\n868\n00:35:05,100 --> 00:35:09,650\nA quick migration is similar,\nbut it doesn't do the RAM piece.\n\n869\n00:35:09,650 --> 00:35:12,930\nInstead it just says I'm gonna turn over\nthe hard drives to the other server and\n\n870\n00:35:12,930 --> 00:35:13,495\nit's gonna boot up.\n\n871\n00:35:13,495 --> 00:35:15,730\nMm-hm.\nReally quick and, and get switched over.\n\n872\n00:35:15,730 --> 00:35:20,530\nNow, when it does that it loses what's in\nRAM and that means it's like rebooting.\n\n873\n00:35:20,530 --> 00:35:21,630\nUser sessions get reset.\n\n874\n00:35:21,630 --> 00:35:22,170\nYeah.\n\n875\n00:35:22,170 --> 00:35:24,070\nSo why would I want to do that?\n\n876\n00:35:24,070 --> 00:35:25,190\nAll right.\n\n877\n00:35:25,190 --> 00:35:28,392\nIf I need to failover and\nit needs to be now, right?\n\n878\n00:35:28,392 --> 00:35:29,120\nMm-hm.\n\n879\n00:35:29,120 --> 00:35:33,280\nImmediate an example would be I was doing\nwork in a server room once and there were\n\n880\n00:35:33,280 --> 00:35:38,400\ncontractors working in the ceiling, and\nthey busted the fire extinguishing system.\n\n881\n00:35:38,400 --> 00:35:41,840\nAnd water on the second\nfloor was pouring down.\n\n882\n00:35:41,840 --> 00:35:43,620\nAnd we didn't have sprinklers\nin the server room.\n\n883\n00:35:43,620 --> 00:35:47,120\nWe had Halon system, but\nwater was pouring down.\n\n884\n00:35:47,120 --> 00:35:48,510\nIt came through the ceiling.\n\n885\n00:35:48,510 --> 00:35:51,910\nAnd water was pouring\nonto one of our racks.\n\n886\n00:35:51,910 --> 00:35:53,940\nThe servers hadn't shut off yet, but\n\n887\n00:35:53,940 --> 00:35:58,520\nWater was actively pouring on the servers,\nif we needed a fail over now, okay?\n\n888\n00:35:58,520 --> 00:36:01,600\nYou do a quick migration,\nyou abandon your ramp, right?\n\n889\n00:36:01,600 --> 00:36:04,720\nSorry, just got to do it,\nwe jump over to the other server and\n\n890\n00:36:04,720 --> 00:36:08,080\nthe VM's boot back up and\nyou're back in business, okay?\n\n891\n00:36:08,080 --> 00:36:11,640\nIf we had chosen to do a live\nmigration It would say, okay?\n\n892\n00:36:11,640 --> 00:36:13,117\nLet me start synchronizing RAM.\n\n893\n00:36:13,117 --> 00:36:13,940\n[LAUGH] Right.\nOkay.\n\n894\n00:36:13,940 --> 00:36:16,555\nWell, if you've got a lot of\nRAM on these virtual machines.\n\n895\n00:36:16,555 --> 00:36:18,170\nMm-hm.\nIt can take a while to synchronize.\n\n896\n00:36:18,170 --> 00:36:19,680\nIt could take 20 minutes to synchronize.\n\n897\n00:36:19,680 --> 00:36:20,990\nWow.\nTo get the two\n\n898\n00:36:20,990 --> 00:36:23,125\nin lockstep before\nthe flipover can happen.\n\n899\n00:36:23,125 --> 00:36:24,730\nMm-hm.\nYou might not have that time, okay?\n\n900\n00:36:24,730 --> 00:36:25,590\nRight.\n\n901\n00:36:25,590 --> 00:36:29,990\nBut, if you're trying to do a seamless\nfail over that the end users don't\n\n902\n00:36:29,990 --> 00:36:30,935\neven notice?\n\n903\n00:36:30,935 --> 00:36:33,040\nMm-hm.\nYou wanna do the live migration.\n\n904\n00:36:33,040 --> 00:36:36,510\nSo, I'm gonna choose to do a live\nmigration and I'm gonna select node.\n\n905\n00:36:36,510 --> 00:36:37,470\n[LAUGH] I've only got one of them here.\n\n906\n00:36:37,470 --> 00:36:39,090\nYeah.\nBut I'll pick server 2.\n\n907\n00:36:39,090 --> 00:36:42,590\nSo, what it's gonna do is it's\ngonna start synchronizing the RAM?\n\n908\n00:36:42,590 --> 00:36:44,240\nAnd I only gave that\nmachine 1 giga of RAM.\n\n909\n00:36:44,240 --> 00:36:45,720\nRight.\nSo it's not a ton.\n\n910\n00:36:45,720 --> 00:36:47,050\nBut, it's doing it over the network.\n\n911\n00:36:47,050 --> 00:36:48,875\nAnd you know how fast ram changes.\n\n912\n00:36:48,875 --> 00:36:51,820\nMm-hm.\nOr slowly get down to network speed.\n\n913\n00:36:51,820 --> 00:36:55,310\nSo performance will dip while this is\nhappening, it's going to synchronize\n\n914\n00:36:55,310 --> 00:36:58,660\nbetween the two nodes, and only when\nthey're identical will it flip over.\n\n915\n00:37:00,110 --> 00:37:03,930\nSo we'll say okay, and while that's\nrunning I\"m gonna jump back to my,\n\n916\n00:37:03,930 --> 00:37:04,945\nmy pings here.\n\n917\n00:37:04,945 --> 00:37:05,530\nMm-hm.\n\n918\n00:37:05,530 --> 00:37:09,490\nRemember the bottom right that's Web 02,\nI'm not messing with that server.\n\n919\n00:37:09,490 --> 00:37:12,070\nBut, the bottom left here that's Web 01.\n\n920\n00:37:12,070 --> 00:37:16,360\nI can see it's live migrating 55%,\nthat's at synchronizing memory.\n\n921\n00:37:16,360 --> 00:37:17,075\nIt's half way there.\n\n922\n00:37:17,075 --> 00:37:18,070\nMm-hm.\nRight.\n\n923\n00:37:18,070 --> 00:37:19,400\nAnd I'm just gonna wait.\n\n924\n00:37:19,400 --> 00:37:24,155\nThe servers still available, users can\nstill be in the server working, doing.\n\n925\n00:37:24,155 --> 00:37:26,915\nDoing whatever, it's kind of hard to\nsee but it is actually scrolling up.\n\n926\n00:37:26,915 --> 00:37:28,140\nThose are new pings.\n\n927\n00:37:28,140 --> 00:37:31,885\nOps I just saw it jump up to\n42 milliseconds for a second.\n\n928\n00:37:31,885 --> 00:37:34,105\nIt didn't even draft it though,\nit just delayed it a little bit.\n\n929\n00:37:34,105 --> 00:37:36,375\nWell it's still still not quite over,\nright?\n\n930\n00:37:36,375 --> 00:37:41,035\nThere we go, so it just made the jump and\nnow we're losing a little bit so\n\n931\n00:37:41,035 --> 00:37:45,105\nperformance dipped while it was doing\nthe memory sync and now it's jumped over.\n\n932\n00:37:45,105 --> 00:37:49,350\nAnd oh shoot you know what, I'm, I'm\ndoing this ping from the server itself.\n\n933\n00:37:49,350 --> 00:37:50,130\nAnd there we go, all right?\n\n934\n00:37:50,130 --> 00:37:50,870\nThere it goes again.\n\n935\n00:37:50,870 --> 00:37:52,760\nIt has a little bit of art\npoisoning that happened.\n\n936\n00:37:52,760 --> 00:37:55,190\nRight.\nSo we lost three pings in this case.\n\n937\n00:37:55,190 --> 00:37:58,990\nBut, the server came up and you know, I've\ndone this before where you lose one ping.\n\n938\n00:37:58,990 --> 00:38:00,370\nYeah.\nOr you don't even lose a ping.\n\n939\n00:38:00,370 --> 00:38:03,651\nYeah. That's how quick it goes.\nHere my cache got in the way.\n\n940\n00:38:03,651 --> 00:38:08,315\nBut, basically you know, it fails over now\nwe're up and running on the other server.\n\n941\n00:38:08,315 --> 00:38:11,820\nAny sessions that were\nactive are still active.\n\n942\n00:38:11,820 --> 00:38:13,655\nAnything that was in ram is still in RAM.\n\n943\n00:38:13,655 --> 00:38:15,920\nMm-hm.\nThat server is still running, but\n\n944\n00:38:15,920 --> 00:38:16,862\nnow I'm on server 2.\n\n945\n00:38:16,862 --> 00:38:17,612\nRight [CROSSTALK].\n\n946\n00:38:17,612 --> 00:38:20,313\nThat is amazing and\nthe user didn't even know what happened.\n\n947\n00:38:20,313 --> 00:38:24,248\nYeah, you know, maybe their server\nhad to do like a little retry if\n\n948\n00:38:24,248 --> 00:38:27,060\nthey were in a client or whatever.\n\n949\n00:38:27,060 --> 00:38:29,430\nBut, otherwise their session was live,\nthey're connected, and\n\n950\n00:38:29,430 --> 00:38:30,070\nthey're in business.\n\n951\n00:38:30,070 --> 00:38:32,045\nAnd like, this Windows,\nthat's nothing unusual.\n\n952\n00:38:32,045 --> 00:38:36,125\n[LAUGH] And in the Hyper-V manager,\nif I look at server one, there's Web 02.\n\n953\n00:38:36,125 --> 00:38:36,980\nMm-hm.\n\n954\n00:38:36,980 --> 00:38:38,510\nIf I look at server two, there's Web 01.\n\n955\n00:38:38,510 --> 00:38:40,010\nIt was empty before.\n\n956\n00:38:40,010 --> 00:38:40,550\nRight.\nNow, I've got\n\n957\n00:38:40,550 --> 00:38:41,530\nour servers right there, all right?\n\n958\n00:38:41,530 --> 00:38:43,002\nYes, nice.\n\n959\n00:38:43,002 --> 00:38:46,790\nAnd so again we don't want to trust the\nHyper-V manager to find these because we\n\n960\n00:38:46,790 --> 00:38:48,010\njust don't know where they're going to be.\n\n961\n00:38:48,010 --> 00:38:49,801\nMm-hm.\nThe fail over cluster manager will tell\n\n962\n00:38:49,801 --> 00:38:50,840\nus, all right?\n\n963\n00:38:50,840 --> 00:38:52,900\nNow, it jumped over to that other system.\n\n964\n00:38:52,900 --> 00:38:56,510\nIt looked for a virtual network with the\nsame name as the one that was on our main,\n\n965\n00:38:56,510 --> 00:38:59,450\non our server 1, and\nfound it connected to the network,\n\n966\n00:38:59,450 --> 00:39:01,690\nit's MAC address moved over and\noff it went.\n\n967\n00:39:01,690 --> 00:39:03,900\nThat ARP poisoning I was talking about.\n\n968\n00:39:03,900 --> 00:39:06,710\nI'm pinging from server 1.\n\n969\n00:39:06,710 --> 00:39:09,340\nSo, I'm on server one, and\nI just moved the VM off of it.\n\n970\n00:39:09,340 --> 00:39:12,440\nAnd it's hard for\nthe server to understand that itself.\n\n971\n00:39:12,440 --> 00:39:14,210\nThat it's no longer in charge of that.\n\n972\n00:39:14,210 --> 00:39:16,320\nIf I had been pinging from\nthe domain controller, or somewhere.\n\n973\n00:39:16,320 --> 00:39:19,440\nIt would have happened in less\nLess dropped pings like that.\n\n974\n00:39:20,600 --> 00:39:26,300\nBut yeah, so that's what we get right\nthere, and now, server 1 and server 2\n\n975\n00:39:26,300 --> 00:39:31,795\nare both accessing the cluster shared\nvolumes, server 1 is managing Web 02.\n\n976\n00:39:31,795 --> 00:39:35,085\nHard drive, and server 2 is\nmanaging web 01s hard drive, but\n\n977\n00:39:35,085 --> 00:39:37,935\nthey're both in the same storage,\nso you have an active connection.\n\n978\n00:39:37,935 --> 00:39:39,892\nAnd that's something we\nuse to not be able to do.\n\n979\n00:39:39,892 --> 00:39:40,449\nMm-hm.\n\n980\n00:39:40,449 --> 00:39:42,925\nIt's a beautiful thing,\ncuz they're like, at again,\n\n981\n00:39:42,925 --> 00:39:44,895\nat that file level instead\nof at the CSV leve.\n\n982\n00:39:44,895 --> 00:39:45,963\nOr the one level.\n\n983\n00:39:45,963 --> 00:39:47,181\nYep.\n\n984\n00:39:47,181 --> 00:39:50,820\nNow the failure that we just\ndid wasn't really a failure.\n\n985\n00:39:50,820 --> 00:39:51,960\nThat was me moving it.\n\n986\n00:39:51,960 --> 00:39:52,790\nOkay.\n\n987\n00:39:52,790 --> 00:39:54,950\nI moved Web 01 over to server 2.\n\n988\n00:39:54,950 --> 00:39:59,080\nMaybe I'm getting ready to take this\nserver offline to do some upgrades or\n\n989\n00:39:59,080 --> 00:40:01,120\nwhatever, so I, I moved it off.\n\n990\n00:40:01,120 --> 00:40:03,110\nWhen we do them like that it's planned.\n\n991\n00:40:03,110 --> 00:40:03,830\nIt happens.\n\n992\n00:40:03,830 --> 00:40:04,970\nIt, it's nice and easy.\n\n993\n00:40:04,970 --> 00:40:06,270\nRight.\nYou just send it along.\n\n994\n00:40:06,270 --> 00:40:07,010\nRight?\n\n995\n00:40:07,010 --> 00:40:08,980\nBut if it's an unplanned failure.\n\n996\n00:40:08,980 --> 00:40:10,885\nWhat if server two just outright fails?\n\n997\n00:40:10,885 --> 00:40:11,390\nMm-hm.\n\n998\n00:40:11,390 --> 00:40:13,550\nWell, server one will figure that out and\ntake action.\n\n999\n00:40:13,550 --> 00:40:15,580\nRight.\nAnd there's a few ways that we can kinda\n\n1000\n00:40:15,580 --> 00:40:16,310\nautomate this.\n\n1001\n00:40:16,310 --> 00:40:17,290\nMike you were telling me\n\n1002\n00:40:17,290 --> 00:40:19,370\nduring the break one of the things\nyou do about network health.\n\n1003\n00:40:19,370 --> 00:40:20,210\nRight? Mm-hm. Yeah.\n\n1004\n00:40:20,210 --> 00:40:21,120\nYeah, it is a nice.\n\n1005\n00:40:21,120 --> 00:40:24,510\nSo there's a new feature in\n2012 R2 that lets you to do I\n\n1006\n00:40:24,510 --> 00:40:28,521\nforget the term that they call it,\nit's gosh can't think of it.\n\n1007\n00:40:28,521 --> 00:40:32,200\n[LAUGH] We'll see it when\nwe get into settings there.\n\n1008\n00:40:32,200 --> 00:40:34,590\nOh it's a, detecting network health\nI think that they call it or\n\n1009\n00:40:34,590 --> 00:40:35,210\nsomething like this.\n\n1010\n00:40:35,210 --> 00:40:38,430\nBut anyway, you know what would happen in\nthe past with our virtual machines is if\n\n1011\n00:40:38,430 --> 00:40:42,220\nthere was a failure of the host,\nyou know, the guy who was hosting that.\n\n1012\n00:40:42,220 --> 00:40:44,990\nIt would move that virtual\nmachine over to another node.\n\n1013\n00:40:44,990 --> 00:40:47,100\nSo that was good but\nwhat if the network failed?\n\n1014\n00:40:47,100 --> 00:40:49,930\nWhat if that machine that was\nhosting that virtual machine\n\n1015\n00:40:49,930 --> 00:40:53,550\ncould no longer connect to the network\nthat the virtual machine needed?\n\n1016\n00:40:53,550 --> 00:40:54,460\nIt wouldn't fail over.\n\n1017\n00:40:54,460 --> 00:40:58,030\nThe virtual machine would still be running\nbut it wouldn't be accessible to any end\n\n1018\n00:40:58,030 --> 00:41:00,680\nusers or applications because\nit's network was down.\n\n1019\n00:41:00,680 --> 00:41:02,060\nNow we can tell it, hey look,\n\n1020\n00:41:02,060 --> 00:41:05,110\nif the network is unavailable,\nmove that to another node.\n\n1021\n00:41:05,110 --> 00:41:06,605\nMove it over to another\nnode in the cluster.\n\n1022\n00:41:06,605 --> 00:41:07,180\nMm-hm.\n\n1023\n00:41:07,180 --> 00:41:09,390\nAnd it's done on a per-network basis so\n\n1024\n00:41:09,390 --> 00:41:11,780\nyou might have it connected\nto more than one network.\n\n1025\n00:41:11,780 --> 00:41:14,580\nMaybe the virtual machine's connected to\na production network as well as a test\n\n1026\n00:41:14,580 --> 00:41:18,620\nnetwork and if the test network fails,\nI don't care about failing it over, but\n\n1027\n00:41:18,620 --> 00:41:21,640\nif the production network fails,\nthen absolutely,\n\n1028\n00:41:21,640 --> 00:41:23,240\nmove that virtual machine to another one.\n\n1029\n00:41:23,240 --> 00:41:26,210\nSo it was done on the properties\nof the virtual machine itself and\n\n1030\n00:41:26,210 --> 00:41:29,620\nyou can do it on a per network adapter\nbasis and it's just a check mark.\n\n1031\n00:41:29,620 --> 00:41:31,680\nSo if we want to see that setting,\nyou can just pull it up here,\n\n1032\n00:41:31,680 --> 00:41:33,140\nyou'll see a couple of things.\n\n1033\n00:41:33,140 --> 00:41:37,800\nI'll pull up web 01, and\nI am just going into it's settings,\n\n1034\n00:41:40,200 --> 00:41:42,720\nand so here's our, our Hyper-V settings,\nlike what we are used to, and\n\n1035\n00:41:42,720 --> 00:41:44,880\nas you kind of look around, you will\nsee the various things that you've got,\n\n1036\n00:41:44,880 --> 00:41:46,560\nincluding like,\nthe network adapter, right?\n\n1037\n00:41:46,560 --> 00:41:47,260\nRight.\n\n1038\n00:41:47,260 --> 00:41:49,710\nWhere we've got bandwidth management and\nall that good stuff,\n\n1039\n00:41:49,710 --> 00:41:50,870\nand, oh is it not going to show me.\n\n1040\n00:41:50,870 --> 00:41:53,330\nExpand that out,\nwe should have some advanced features.\n\n1041\n00:41:54,520 --> 00:41:57,412\nAnd one of those little checkmarks down\nthere towards the bottom which is enabled\n\n1042\n00:41:57,412 --> 00:41:58,231\nby default by the way.\n\n1043\n00:41:58,231 --> 00:42:00,320\nI din't mention that it\nis turned on by default.\n\n1044\n00:42:00,320 --> 00:42:03,770\nSo if you didn't want it to fail over on a\nparticular network you'd have to go in and\n\n1045\n00:42:03,770 --> 00:42:04,480\nuncheck that.\n\n1046\n00:42:04,480 --> 00:42:05,480\nOh, okay.\nI'm looking right over it.\n\n1047\n00:42:05,480 --> 00:42:06,390\nSo yeah there it is.\n\n1048\n00:42:06,390 --> 00:42:09,009\nMove this virtual machine to\nanother cluster if a network\n\n1049\n00:42:09,009 --> 00:42:09,998\ndisconnection is detected.\n\n1050\n00:42:09,998 --> 00:42:11,820\nMm-hm.\nSee it's got it right there.\n\n1051\n00:42:11,820 --> 00:42:14,590\nYou know, the physical servers\nthat we're working on they're\n\n1052\n00:42:14,590 --> 00:42:15,340\nactually in another room.\n\n1053\n00:42:15,340 --> 00:42:17,663\nI was about to say we could run\nover there and yank a cable out.\n\n1054\n00:42:17,663 --> 00:42:19,554\n[LAUGH] But you know,\n\n1055\n00:42:19,554 --> 00:42:25,060\nlet's let's see how could I simulate\na total failure of that machine?\n\n1056\n00:42:25,060 --> 00:42:28,280\nI guess I could diable it's What if\nyou took the network adapter 'cuz\n\n1057\n00:42:28,280 --> 00:42:30,795\nthat those networks are done\non per hyper b server.\n\n1058\n00:42:30,795 --> 00:42:31,300\nMm-hm.\n\n1059\n00:42:31,300 --> 00:42:34,800\nRight what if you went to the console and\nyanked that network deleted that network?\n\n1060\n00:42:34,800 --> 00:42:36,790\nWould it flip over to the other\nmachine that still had it?\n\n1061\n00:42:39,210 --> 00:42:40,290\nOr if I disabled the network card?\n\n1062\n00:42:40,290 --> 00:42:41,210\nWould that work?\n\n1063\n00:42:42,480 --> 00:42:43,100\nMm.\n\n1064\n00:42:43,100 --> 00:42:44,885\nIf I went to that host Right?\n\n1065\n00:42:44,885 --> 00:42:45,510\nMm-hm.\n\n1066\n00:42:45,510 --> 00:42:46,640\nSo, if I went ITPROTV server two.\n\n1067\n00:42:46,640 --> 00:42:48,090\nOh yes, yes.\nAnd disable assembly like that.\n\n1068\n00:42:48,090 --> 00:42:49,650\nAnd disable the assembly code,\nthat would do it.\n\n1069\n00:42:49,650 --> 00:42:50,850\nAll right.\nYeah, yep.\n\n1070\n00:42:50,850 --> 00:42:51,710\nBefore I do that, though.\n\n1071\n00:42:51,710 --> 00:42:52,300\nYeah, cuz that's gonna.\n\n1072\n00:42:52,300 --> 00:42:53,821\n[LAUGH] Before I commit an actual failure,\nI,\n\n1073\n00:42:53,821 --> 00:42:55,722\nI do wanna show you guys one more\nthing just in case we hose it up.\n\n1074\n00:42:55,722 --> 00:42:56,459\nRight.\nAnd, and whatever.\n\n1075\n00:42:57,910 --> 00:43:02,130\nWhat I've got right now,\nthe way this is set up, before the break,\n\n1076\n00:43:02,130 --> 00:43:04,775\nwe had an active passive cluster.\n\n1077\n00:43:04,775 --> 00:43:05,430\nRight.\n\n1078\n00:43:05,430 --> 00:43:07,150\nOne server was active,\nit was doing all the work.\n\n1079\n00:43:07,150 --> 00:43:09,470\nThe other server was sitting\nthere doing nothing.\n\n1080\n00:43:09,470 --> 00:43:11,820\nNow, we've got an active active cluster.\n\n1081\n00:43:11,820 --> 00:43:13,810\nBoth nodes are, are doing work.\n\n1082\n00:43:13,810 --> 00:43:17,495\nAnd so we can see,\nServer 2 is running one of the VMs.\n\n1083\n00:43:17,495 --> 00:43:18,810\nMm-hm.\nServer 1 is running a VM and\n\n1084\n00:43:18,810 --> 00:43:20,990\nthe file server, which again,\nI could failover if I wanted.\n\n1085\n00:43:20,990 --> 00:43:23,760\nRight.\nThis is why in the first episode,\n\n1086\n00:43:23,760 --> 00:43:26,400\nwe said you could have\nlike 64 nodes- Mm-hm.\n\n1087\n00:43:26,400 --> 00:43:27,090\nIn a cluster.\n\n1088\n00:43:28,240 --> 00:43:30,852\nIf you just have one active, what's the,\nthe point of having all the other ones.\n\n1089\n00:43:30,852 --> 00:43:32,910\n[LAUGH] Yeah, it's a lot of\nwasted resources there, right?\n\n1090\n00:43:32,910 --> 00:43:38,420\nBut if you think about it, if you have 20\nHyper V servers physical servers you might\n\n1091\n00:43:38,420 --> 00:43:43,520\nhave a 100 virtual machines and they are\nspread across these 20 Hyper V servers and\n\n1092\n00:43:43,520 --> 00:43:46,510\nif one fails the others just take\nover the VM's it's all nice and\n\n1093\n00:43:46,510 --> 00:43:52,490\nsmooth all dynamic is really really cool,\nif you combine it with the system center\n\n1094\n00:43:52,490 --> 00:43:56,440\nvirtual machine manager and the system\ncenter operations manager the SCOM and\n\n1095\n00:43:56,440 --> 00:43:59,790\nSCVMM, they're additional products\nfrom Microsoft that are not free.\n\n1096\n00:43:59,790 --> 00:44:00,430\nNot free, yeah.\n\n1097\n00:44:00,430 --> 00:44:01,400\nYou have to buy them.\n\n1098\n00:44:01,400 --> 00:44:05,285\nBut if you combine it with those, they'll\nmonitor the performance of your server.\n\n1099\n00:44:05,285 --> 00:44:05,840\nMm-hm.\n\n1100\n00:44:05,840 --> 00:44:09,040\nAnd they'll say hey, this server's\nrunning a little high on CPU,\n\n1101\n00:44:09,040 --> 00:44:11,800\nlet me move some of those VMs\nto another host that's not busy.\n\n1102\n00:44:11,800 --> 00:44:13,750\nAnd it'll actually do\nperformance balancing.\n\n1103\n00:44:13,750 --> 00:44:16,370\nThat is sweet.\nAnd that's what we did at the bank that I\n\n1104\n00:44:16,370 --> 00:44:19,820\nwork for, and that's where I I would say,\nI would come in in the morning And\n\n1105\n00:44:19,820 --> 00:44:22,815\nI'd want to work on a server, but\nI had no idea where it would be.\n\n1106\n00:44:22,815 --> 00:44:24,260\n[LAUGH].\nI couldn't find the VM,\n\n1107\n00:44:24,260 --> 00:44:27,470\nit could be on 20 different servers\nbased on performance over night.\n\n1108\n00:44:27,470 --> 00:44:28,040\nRight yeah.\n\n1109\n00:44:28,040 --> 00:44:31,584\nAnd so I'd have to go into the management\nconsole, [CROSSTALK] or whatever and\n\n1110\n00:44:31,584 --> 00:44:35,308\nthere you'd see all of your machines\nregardless of what server they resided on.\n\n1111\n00:44:35,308 --> 00:44:35,820\nNice.\n\n1112\n00:44:35,820 --> 00:44:39,753\nSo a really, really cool functionality,\nit's neat that it can dynamically respond\n\n1113\n00:44:39,753 --> 00:44:42,554\nlike that and you get your moneys\nworth out of your hardware.\n\n1114\n00:44:42,554 --> 00:44:43,225\nExcactly.\n\n1115\n00:44:43,225 --> 00:44:46,808\nInstead of having some hard work pulling\ntext and other hard work doing nothing,\n\n1116\n00:44:46,808 --> 00:44:49,495\nhere we distribute the load and\nwe get better performances,\n\n1117\n00:44:49,495 --> 00:44:50,821\nit's really a great in line.\n\n1118\n00:44:50,821 --> 00:44:53,983\nThe only thing you have to worry about\nI guess, if one of your nodes fails,\n\n1119\n00:44:53,983 --> 00:44:55,972\nyour local network float\noff to your others and\n\n1120\n00:44:55,972 --> 00:44:59,593\nif you're maxing out the work load on each\none, you've got no room if something else\n\n1121\n00:44:59,593 --> 00:45:03,990\nhas to move over to it All right, so\nI'm gonna create a failure of server two.\n\n1122\n00:45:03,990 --> 00:45:04,690\nAll right.\nAnd I'm gonna\n\n1123\n00:45:04,690 --> 00:45:06,860\ndo it by just shutting\noff its network adapter.\n\n1124\n00:45:06,860 --> 00:45:08,765\nAnd let me make sure I'm\nactually on server two.\n\n1125\n00:45:08,765 --> 00:45:15,280\n[LAUGH] And so what I'm gonna do is I'm\ngonna go down in here, oh, come on, there.\n\n1126\n00:45:15,280 --> 00:45:17,990\nAnd I'm gonna go in here and I'm just\ngonna shut off its network adapter.\n\n1127\n00:45:17,990 --> 00:45:19,060\nSo we'll take.\n\n1128\n00:45:19,060 --> 00:45:21,050\nOh, it's got two network adapters?\n\n1129\n00:45:21,050 --> 00:45:21,800\nOh, the, the virtual one.\n\n1130\n00:45:21,800 --> 00:45:22,305\nThat's the, yeah.\n\n1131\n00:45:22,305 --> 00:45:24,120\nMm-hm.\nI'm gonna show off the physical one.\n\n1132\n00:45:24,120 --> 00:45:26,149\nThat should take it off nice and\n[CROSSTALK] Yeah.\n\n1133\n00:45:26,149 --> 00:45:26,737\nYou know what?\n\n1134\n00:45:26,737 --> 00:45:27,370\nYou're gonna lose your connection.\n\n1135\n00:45:27,370 --> 00:45:30,703\nIt would probably be better if I do it\nthrough the Device Manager wouldn't it?\n\n1136\n00:45:30,703 --> 00:45:32,640\n[CROSSTALK] It probably doesn't matter.\n\n1137\n00:45:32,640 --> 00:45:33,671\nYeah.\nSo I'll just do it here.\n\n1138\n00:45:33,671 --> 00:45:34,323\nAll right.\n\n1139\n00:45:34,323 --> 00:45:36,880\nSo I'm gonna just say, well, yeah, I'll,\nI'll lose my connection to this server.\n\n1140\n00:45:36,880 --> 00:45:38,460\nIn fact, I should have already lost it.\n\n1141\n00:45:38,460 --> 00:45:39,160\nYeah.\nYeah.\n\n1142\n00:45:39,160 --> 00:45:41,935\nSo I've lost the network connection.\n\n1143\n00:45:41,935 --> 00:45:43,400\nMm-hm.\nNow we are using an iSCSI connection.\n\n1144\n00:45:43,400 --> 00:45:44,540\nRight.\nRight.\n\n1145\n00:45:44,540 --> 00:45:47,295\nSo server two just lost\nits network connection.\n\n1146\n00:45:47,295 --> 00:45:47,800\nMm-hm.\n\n1147\n00:45:47,800 --> 00:45:49,760\nSo we're not gonna get\na heartbeat off of it.\n\n1148\n00:45:49,760 --> 00:45:52,290\nRight.\nWe just lost our iSCSI connections to it.\n\n1149\n00:45:52,290 --> 00:45:54,115\nIt just dropped the connection to storage,\ntoo.\n\n1150\n00:45:54,115 --> 00:45:55,160\nMm-hm.\nServer two,\n\n1151\n00:45:55,160 --> 00:45:56,670\neven though it's still on- Right.\n\n1152\n00:45:56,670 --> 00:45:58,160\nIs now off our network.\n\n1153\n00:45:58,160 --> 00:45:59,250\nIt's gone.\n\n1154\n00:45:59,250 --> 00:46:00,690\nIf we had two network adapters,\n\n1155\n00:46:00,690 --> 00:46:03,180\nour heartbeat might still be\ngoing over the other adapter.\n\n1156\n00:46:03,180 --> 00:46:05,540\nRight.\nBut in this case we built a cluster off of\n\n1157\n00:46:05,540 --> 00:46:06,540\njust one.\n\n1158\n00:46:06,540 --> 00:46:08,080\nSo it's now gone.\n\n1159\n00:46:08,080 --> 00:46:10,070\nThat server is dead in the water.\n\n1160\n00:46:10,070 --> 00:46:10,790\nAlright?\n\n1161\n00:46:10,790 --> 00:46:13,430\nNow meanwhile back in Gotham.\n\n1162\n00:46:13,430 --> 00:46:14,490\nRight.\nYeah.\n\n1163\n00:46:14,490 --> 00:46:17,770\nOur server one should have\npicked up what happened.\n\n1164\n00:46:17,770 --> 00:46:18,770\nOh in fact it already did look.\n\n1165\n00:46:18,770 --> 00:46:19,600\nIt already has yeah.\n\n1166\n00:46:19,600 --> 00:46:20,385\nYeah, web01 is.\n\n1167\n00:46:20,385 --> 00:46:22,325\nWas right there running on server one.\n\n1168\n00:46:22,325 --> 00:46:24,345\nIt all ready figured it out,\nand brought it up.\n\n1169\n00:46:24,345 --> 00:46:26,870\nJust in the time that I was gabbing\nabout the other server being off.\n\n1170\n00:46:26,870 --> 00:46:28,265\n[LAUGH] That is impressive.\n\n1171\n00:46:28,265 --> 00:46:30,430\nNow, because I failed it\nimmediately like that.\n\n1172\n00:46:30,430 --> 00:46:31,065\nHm-hm.\n\n1173\n00:46:31,065 --> 00:46:32,905\nIt didn't have time to synchronize memory.\n\n1174\n00:46:32,905 --> 00:46:35,225\nRight.\nSo what it did is it said, oh, shoot,\n\n1175\n00:46:35,225 --> 00:46:36,130\nserver two is gone?\n\n1176\n00:46:36,130 --> 00:46:36,735\nHm-hm.\n\n1177\n00:46:36,735 --> 00:46:40,315\nLet me seize control of the virtual\nhard drive for web01, and boot it up.\n\n1178\n00:46:40,315 --> 00:46:40,955\nRight.\n\n1179\n00:46:40,955 --> 00:46:42,540\nSo it did reboot.\n\n1180\n00:46:42,540 --> 00:46:43,820\nBut it's already online.\n\n1181\n00:46:43,820 --> 00:46:46,010\nThat, and yeah,\nI just saw the login screen here.\n\n1182\n00:46:46,010 --> 00:46:46,530\nIt's just here.\nUh-huh.\n\n1183\n00:46:46,530 --> 00:46:48,840\nSo, you know, my downtime,\nthere was downtime.\n\n1184\n00:46:48,840 --> 00:46:52,540\nThere was downtime there of, you know,\n30 seconds, 60 seconds, whatever, Yeah.\n\n1185\n00:46:52,540 --> 00:46:53,780\nWhile it rebooted.\n\n1186\n00:46:53,780 --> 00:46:55,450\nBut I didn't have to do it.\n\n1187\n00:46:55,450 --> 00:46:58,290\nServer two failed and\nthe cluster fixed itself.\n\n1188\n00:46:58,290 --> 00:46:58,960\nYes.\n\n1189\n00:46:58,960 --> 00:46:59,610\nRight?\n\n1190\n00:46:59,610 --> 00:47:02,940\nAnd if got down here to nodes,\nI should see that server two is offline.\n\n1191\n00:47:02,940 --> 00:47:03,960\nSure enough, there it is.\n\n1192\n00:47:03,960 --> 00:47:04,940\nOffline.\n\n1193\n00:47:04,940 --> 00:47:06,860\nSo it's not accepting anybody.\n\n1194\n00:47:06,860 --> 00:47:07,943\nIf I were to bring it back online,\n\n1195\n00:47:07,943 --> 00:47:10,780\nwhich unfortunately I can't\ndo [CROSSTALK] [LAUGH] But\n\n1196\n00:47:10,780 --> 00:47:13,501\nif I were to bring it back online,\nit would rejoin the cluster, and\n\n1197\n00:47:13,501 --> 00:47:15,990\nit would be ready to\nreceive resources again.\n\n1198\n00:47:15,990 --> 00:47:20,840\nAll right, so really cool stuff you know,\nthe clustering, it's neat.\n\n1199\n00:47:20,840 --> 00:47:24,610\nThe expense of it is what stops\npeople from doing this in small and\n\n1200\n00:47:24,610 --> 00:47:28,580\nmedium networks, but in enterprise\nnetworks where you have mission critical\n\n1201\n00:47:28,580 --> 00:47:31,210\napps that need to be up,\nclustering is the way that we do it.\n\n1202\n00:47:31,210 --> 00:47:31,790\nAnd that's what it's all about.\n\n1203\n00:47:31,790 --> 00:47:34,948\nIt's just deciding if it really\nwarrants that much money investment.\n\n1204\n00:47:34,948 --> 00:47:39,239\nAnd then just keep in mind that there\nare many applications out there that don't\n\n1205\n00:47:39,239 --> 00:47:40,276\nneed Clustering.\n\n1206\n00:47:40,276 --> 00:47:40,971\nMm-hm.\n\n1207\n00:47:40,971 --> 00:47:41,762\nActive directory?\n\n1208\n00:47:41,762 --> 00:47:45,400\nYou don't need clusters because you\nhave a multi-master replication\n\n1209\n00:47:45,400 --> 00:47:46,190\nmodel, Right, right.\n\n1210\n00:47:46,190 --> 00:47:48,000\nright?\nYou have multiple domain controllers.\n\n1211\n00:47:48,000 --> 00:47:51,680\nDNS, you don't need clustering because you\ncan have more than one DNS server Yeah.\n\n1212\n00:47:51,680 --> 00:47:53,578\nAnd they replicate\nthrough their own means.\n\n1213\n00:47:53,578 --> 00:47:55,029\nRight.\n\n1214\n00:47:55,029 --> 00:47:56,770\nSo clustering is not necessary.\n\n1215\n00:47:56,770 --> 00:48:00,320\nWhere clustering is necessary are things\nthat you can't replicate like an entire\n\n1216\n00:48:00,320 --> 00:48:01,125\nvirtual machine.\n\n1217\n00:48:01,125 --> 00:48:02,680\nMm-hm.\n\n1218\n00:48:02,680 --> 00:48:07,205\nOn, I think it was in episode one,\nI mentioned DNS round robining.\n\n1219\n00:48:07,205 --> 00:48:09,605\nRight And\nnow I aid DNS round robining works, but\n\n1220\n00:48:09,605 --> 00:48:14,595\ndon't use it by yourself, because it'll\nkind of balance the load between servers,\n\n1221\n00:48:14,595 --> 00:48:18,605\nbut if one server fails,\nit still sends traffic there.\n\n1222\n00:48:18,605 --> 00:48:21,462\nIf you combine DNS round\nrobining with clustering.\n\n1223\n00:48:21,462 --> 00:48:22,247\nMm-hm.\nRight?\n\n1224\n00:48:22,247 --> 00:48:25,257\nSo, I'm gonna have two VMs for\nmy web servers, web 01, and web 02, and\n\n1225\n00:48:25,257 --> 00:48:29,572\nI use DNS round robining to balance\nbetween web 01 and web 02, right?\n\n1226\n00:48:29,572 --> 00:48:30,547\nMm-hm.\n\n1227\n00:48:30,547 --> 00:48:35,120\nWell, if a physical server fails web\n01 just jumps over to another server so\n\n1228\n00:48:35,120 --> 00:48:38,460\nboth numbers still valid\nIP's even under failure and\n\n1229\n00:48:38,460 --> 00:48:41,040\nthat's were DNS route\nrouting comes in handy.\n\n1230\n00:48:41,040 --> 00:48:42,110\nSo, I might use it for\n\n1231\n00:48:42,110 --> 00:48:45,560\ndoing load balancing instead of\nNLB instead of using network\n\n1232\n00:48:45,560 --> 00:48:49,730\nbalancing although honestly I'll probably\nuse NLB But [LAUGH] For a web yeah.\n\n1233\n00:48:49,730 --> 00:48:53,280\nBut that's what i meant when i said\ndon't use DNS round robining by itself,\n\n1234\n00:48:53,280 --> 00:48:55,900\ncombine it with something else\nlike clustering like this, and\n\n1235\n00:48:55,900 --> 00:48:59,340\nyou can really start to get some\nbenefits out of the device.\n\n1236\n00:48:59,340 --> 00:49:00,450\nIt's a beautiful thing.\n\n1237\n00:49:00,450 --> 00:49:02,890\nAlright well Mike that's about\nall I'll got on clustering.\n\n1238\n00:49:02,890 --> 00:49:03,750\nYou think of anything else?\n\n1239\n00:49:03,750 --> 00:49:04,440\nI can't think of anything.\n\n1240\n00:49:04,440 --> 00:49:05,980\nWe showed all the really cool parts of it.\n\n1241\n00:49:05,980 --> 00:49:07,580\nAnd went through it from top to bottom.\n\n1242\n00:49:07,580 --> 00:49:08,690\nSo It's a good time.\n\n1243\n00:49:08,690 --> 00:49:10,160\nDefinitely mess around with it.\n\n1244\n00:49:10,160 --> 00:49:11,020\nExperiment around.\n\n1245\n00:49:11,020 --> 00:49:13,590\nYou can build a cluster\nin a virtual environment.\n\n1246\n00:49:13,590 --> 00:49:15,480\nYou can bring up three VM's.\n\n1247\n00:49:15,480 --> 00:49:19,930\nHave one VM act as a target, and have to\nother VM's that are the cluster nodes.\n\n1248\n00:49:19,930 --> 00:49:22,320\nSo you can do this without\nbuying expensive hardware,\n\n1249\n00:49:22,320 --> 00:49:23,075\nit's just the performance.\n\n1250\n00:49:23,075 --> 00:49:24,800\nMm-hm.\nIt's just gonna be really slow.\n\n1251\n00:49:24,800 --> 00:49:27,752\nThere's actually a good TechNet lab too,\nthat goes- Oh, is there?\n\n1252\n00:49:27,752 --> 00:49:29,231\n[CROSSTALK] Yup, of what to do migration.\n\n1253\n00:49:29,231 --> 00:49:31,820\nThe TechNet vLabs are awesome,\nif you haven't checked 'em out,\n\n1254\n00:49:31,820 --> 00:49:34,570\njust do a Google search for\nTechNet vLab and you'll find 'em.\n\n1255\n00:49:34,570 --> 00:49:36,260\nBut, yeah, it, it, really cool stuff.\n\n1256\n00:49:36,260 --> 00:49:39,410\nDefinitely mess around with it, when you\nmove into the corporate environment, and\n\n1257\n00:49:39,410 --> 00:49:41,720\nthe enterprise environment,\nyou will see clusters.\n\n1258\n00:49:41,720 --> 00:49:43,530\nYeah.\nIt is something that you'll bump into.\n\n1259\n00:49:43,530 --> 00:49:44,930\nAnd it's intimidating- Yes it is.\n\n1260\n00:49:44,930 --> 00:49:46,630\nCause a lot of people haven't\nworked with them before.\n\n1261\n00:49:47,830 --> 00:49:48,550\nAbsolutely.\nAll right.\n\n1262\n00:49:48,550 --> 00:49:49,800\nWell, let me just remind you guys,\n\n1263\n00:49:49,800 --> 00:49:54,496\nif you have any questions on this, you can\nalways go, live during the show Mm-hm.\n\n1264\n00:49:54,496 --> 00:49:55,870\nto http://itprov.tv/live.\n\n1265\n00:49:55,870 --> 00:49:57,590\nYou'll see the chat box beneath the video.\n\n1266\n00:49:57,590 --> 00:49:59,170\nYou can post your questions there.\n\n1267\n00:49:59,170 --> 00:50:00,980\nWe monitor and answer during the show.\n\n1268\n00:50:00,980 --> 00:50:03,610\nIf you have questions afterwards,\nwhen the show's you know,\n\n1269\n00:50:03,610 --> 00:50:06,680\nbeing replayed in recordings,\nyou can use the Q and\n\n1270\n00:50:06,680 --> 00:50:10,620\nA forms at the top of every ITProTV\npage you will see the Q and\n\n1271\n00:50:10,620 --> 00:50:14,330\nA link, taking the forms post them\nthere we will monitor and answer.\n\n1272\n00:50:14,330 --> 00:50:18,006\nAll right well ladies and gentlemen I hope\nyou guys enjoyed the show signing of for\n\n1273\n00:50:18,006 --> 00:50:22,273\nITProTV I'm Don Pozet And I'm Mike\nRodrick And we will see you next time\n\n1274\n00:50:22,273 --> 00:50:32,273\n[MUSIC]\n\n1275\n00:50:33,773 --> 00:50:40,065\n[SOUND]\n\n",
          "vimeoId": "97971457"
        },
        {
          "description": "In this episode Mike and Don take a look at configuring failover clustering roles. They demonstrate how to configure role-specific cluster settings as well as continuously available shares to maintaining availability in the event of failure. They also take a look at migrating VM storage, importing and exporting VMs as well as configuring drain on shutdown.",
          "length": "3837",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/011-Managing-Cluster-Roles.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/011-Managing-Cluster-Roles-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/011-Managing-Cluster-Roles-sm.jpg",
          "title": "Managing Cluster Roles",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,587 --> 00:00:19,646\n[SOUND]\n\n3\n00:00:19,646 --> 00:00:29,747\n[MUSIC]\n\n4\n00:00:29,747 --> 00:00:33,340\nAlright, good morning, good afternoon and\ngood evening and welcome back.\n\n5\n00:00:33,340 --> 00:00:37,100\nTo another episode of IT Pro TV I'm\nyour host Don Pezet, back again with Mr.\n\n6\n00:00:37,100 --> 00:00:38,440\nMike Rodrick how's it going Mike?\n\n7\n00:00:38,440 --> 00:00:40,000\n>> Another great day, how you doing Don?\n\n8\n00:00:40,000 --> 00:00:41,520\n>> I am doing just well.\n\n9\n00:00:41,520 --> 00:00:43,460\n>> Yeah?\n>> [LAUGH] So you know,\n\n10\n00:00:43,460 --> 00:00:46,830\ni, i got my sporty new IT Pro TV vest\n>> I'm liking that I'm\n\n11\n00:00:46,830 --> 00:00:48,040\nfeeling pretty jealous over here.\n\n12\n00:00:48,040 --> 00:00:50,370\n>> But i, i didn't think about it and\ni wore brown pants so\n\n13\n00:00:50,370 --> 00:00:52,607\nnow i feel like I'm a zoo employee\n>> [LAUGH]\n\n14\n00:00:52,607 --> 00:00:53,765\n>> And [LAUGH] so\n\n15\n00:00:53,765 --> 00:00:54,430\n>> [LAUGH]\n\n16\n00:00:54,430 --> 00:00:55,880\n>> But but anyhow, we,\n\n17\n00:00:55,880 --> 00:00:57,430\nwe don't have any wild animals today.\n\n18\n00:00:57,430 --> 00:01:00,920\nBut we do have cluster\nservices once again, right?\n\n19\n00:01:00,920 --> 00:01:02,391\n>> Which could be a wild animal,\nsometimes.\n\n20\n00:01:02,391 --> 00:01:03,550\n[LAUGH]\n>> [LAUGH] Yeah.\n\n21\n00:01:03,550 --> 00:01:05,978\nSo this is, is kind of part\nthree of our clustering series.\n\n22\n00:01:05,978 --> 00:01:07,527\n>> Hm-hm.\n>> And of our total cluster.\n\n23\n00:01:07,527 --> 00:01:08,429\n>> [LAUGH]\n>> And [LAUGH] and so\n\n24\n00:01:08,429 --> 00:01:10,504\nwhat we're gonna do is,\nwe're gonna jump back in, and\n\n25\n00:01:10,504 --> 00:01:13,492\nwe're gonna hit some of the\n>> The odds and ends, just the little bits\n\n26\n00:01:13,492 --> 00:01:16,650\nand pieces that didn't quite fit\ninto the other two episodes.\n\n27\n00:01:16,650 --> 00:01:17,172\n>> Right.\n\n28\n00:01:17,172 --> 00:01:18,879\n>> We did, our, our first part,\n\n29\n00:01:18,879 --> 00:01:22,580\nwas really just covering how to\nset up clustering in, in general.\n\n30\n00:01:22,580 --> 00:01:23,640\n>> Yeah, did it already.\n\n31\n00:01:23,640 --> 00:01:27,250\n>> And the second part was focused on\nHyper V, how to get a Hyper V running and\n\n32\n00:01:27,250 --> 00:01:29,800\nin your virtual machines in\nthat cluster environment.\n\n33\n00:01:29,800 --> 00:01:33,247\nSo for our third part, we're gonna cover\njust some, some more generalized concepts,\n\n34\n00:01:33,247 --> 00:01:36,507\nsome little neat features that can be used\non the back end that can be used, really,\n\n35\n00:01:36,507 --> 00:01:37,641\nwith all of the, the roles.\n\n36\n00:01:37,641 --> 00:01:38,325\n>> Nice, nice.\n\n37\n00:01:38,325 --> 00:01:39,139\nI'm excited.\n\n38\n00:01:39,139 --> 00:01:39,800\n>> Yep.\n\n39\n00:01:39,800 --> 00:01:43,710\nAnd unfortunately, for those of you\nwatching this recorded, you don't know.\n\n40\n00:01:43,710 --> 00:01:45,660\nBut, for those of you watching this live,\nit's actually been,\n\n41\n00:01:45,660 --> 00:01:47,120\nwhat, 2 weeks since we filmed the other-\n>> Yeah.\n\n42\n00:01:47,120 --> 00:01:48,145\n>> The other cluster episodes.\n\n43\n00:01:48,145 --> 00:01:49,136\n>> Mm-hm.\n>> So fortunately,\n\n44\n00:01:49,136 --> 00:01:51,751\nwe still had all our servers running in\nthe background, so, so they're there.\n\n45\n00:01:51,751 --> 00:01:54,574\nSo we're gonna be working with those same\nservers we did on the other episodes.\n\n46\n00:01:54,574 --> 00:01:55,228\n>> Mm-hm.\n\n47\n00:01:55,228 --> 00:01:57,245\n>> We are just going to kinda\ntweak that configuration.\n\n48\n00:01:57,245 --> 00:01:58,116\n>> Nice.\n\n49\n00:01:58,116 --> 00:01:58,827\n>> All right,\n\n50\n00:01:58,827 --> 00:02:03,733\nthe first thing I wanna talk about is when\nwe set up a fail over cluster originally,\n\n51\n00:02:03,733 --> 00:02:07,997\nwhich was just a plain Jane cluster,\nand then we did hyper V on top of it so\n\n52\n00:02:07,997 --> 00:02:12,476\nwe really focused on hyper V a lot as our\ncluster rule I wanna take a moment and\n\n53\n00:02:12,476 --> 00:02:16,040\nlook at a few of the other\nroles that we can cluster.\n\n54\n00:02:16,040 --> 00:02:18,700\nAnd the reason I wanna do that\nis as you set up these roles,\n\n55\n00:02:18,700 --> 00:02:19,990\neach one is a little bit different.\n\n56\n00:02:19,990 --> 00:02:21,114\nEach on has different needs.\n>> Mm-hm.\n\n57\n00:02:21,114 --> 00:02:23,227\n>> Alright.\nSo, let me show you what I mean, alright.\n\n58\n00:02:23,227 --> 00:02:24,007\nI'm gonna jump over here.\n\n59\n00:02:24,007 --> 00:02:25,703\nHere's our, our cluster that we set up.\n\n60\n00:02:25,703 --> 00:02:28,382\nSo, we've got ITproTV server one and\nserver two,\n\n61\n00:02:28,382 --> 00:02:30,951\nthose are the ones that\nare clustered together.\n\n62\n00:02:30,951 --> 00:02:35,166\nAnd, I, I deleted some of the roles\njust to make things a little bit easier.\n\n63\n00:02:35,166 --> 00:02:37,499\nWe had whipped up two web servers-\n>> Oh, that's right, yea.\n\n64\n00:02:37,499 --> 00:02:38,023\n>> Before.\n\n65\n00:02:38,023 --> 00:02:40,647\nWe had also whipped up like,\na file server and a few other things.\n\n66\n00:02:40,647 --> 00:02:41,168\n>> Mm-hm.\n\n67\n00:02:41,168 --> 00:02:42,329\n>> I just deleted them to\nget them out of there.\n\n68\n00:02:42,329 --> 00:02:43,002\n>> Okay.\n\n69\n00:02:43,002 --> 00:02:47,310\n>> Alright, when you have a cluster,\nyour two main elements are the nodes.\n\n70\n00:02:47,310 --> 00:02:48,360\nAnd the roles, right?\n\n71\n00:02:48,360 --> 00:02:50,868\nThe nodes, that's the physical machines\nthat are a part of that cluster.\n\n72\n00:02:50,868 --> 00:02:52,146\n>> Right.\n>> So you've gotta have those.\n\n73\n00:02:52,146 --> 00:02:52,890\n>> Mm-hm.\n\n74\n00:02:52,890 --> 00:02:53,795\n>> You should have at least two.\n\n75\n00:02:53,795 --> 00:02:55,316\n>> Otherwise you don't have\nmuch of a cluster, do you?\n\n76\n00:02:55,316 --> 00:02:55,874\n>> Yeah.\n\n77\n00:02:55,874 --> 00:02:58,233\n[LAUGH] Well,\nyou could argue that that is a-\n\n78\n00:02:58,233 --> 00:02:58,790\n>> [LAUGH]\n\n79\n00:02:58,790 --> 00:03:00,009\n>> Well anyway.\n\n80\n00:03:00,009 --> 00:03:01,553\nSo, so [COUGH].\n\n81\n00:03:01,553 --> 00:03:02,911\nSo you should have at least two nodes.\n\n82\n00:03:02,911 --> 00:03:09,067\nRight, but then on top of that you run the\nroles, really like the virtual services.\n\n83\n00:03:09,067 --> 00:03:09,578\n>> Mm-hm.\n\n84\n00:03:09,578 --> 00:03:12,266\n>> These are the things that fail\nover between the hardware nodes\n\n85\n00:03:12,266 --> 00:03:13,201\nwhen issues happen.\n\n86\n00:03:13,201 --> 00:03:13,735\n>> Right.\n\n87\n00:03:13,735 --> 00:03:16,034\n>> We did virtual machines\nthat's what I see right there.\n\n88\n00:03:16,034 --> 00:03:16,557\n>> Mm-hm.\n\n89\n00:03:16,557 --> 00:03:18,694\n>> But you can cluster all sorts of stuff.\n\n90\n00:03:18,694 --> 00:03:21,967\nThere is some cluster aware software,\nlike Microsoft Exchange.\n\n91\n00:03:21,967 --> 00:03:23,443\n>> Mm-hm.\n>> Where you can deploy it, and\n\n92\n00:03:23,443 --> 00:03:25,040\nit was layer out on top of there.\n\n93\n00:03:25,040 --> 00:03:27,250\nAnd there are others that built in.\n\n94\n00:03:27,250 --> 00:03:32,854\nIf I come in here and right-click on my\nroles, I can choose to configure a role.\n\n95\n00:03:32,854 --> 00:03:33,503\n>> Right.\n\n96\n00:03:33,503 --> 00:03:36,060\n>> And, it'll launch me into my wizard.\n\n97\n00:03:36,060 --> 00:03:40,620\nAnd, here's where I can specify something\nnew that I want to cluster, all right?\n\n98\n00:03:40,620 --> 00:03:43,289\nAnd, you'll see,\nMicrosoft has built-in entities for\n\n99\n00:03:43,289 --> 00:03:46,841\nall the roles that are supported\nnatively by Windows Server 20, 12 R 2,\n\n100\n00:03:46,841 --> 00:03:47,375\n>> Right.\n\n101\n00:03:47,375 --> 00:03:52,189\n>> But they also have a few other ones\nlike, generic application, generic script,\n\n102\n00:03:52,189 --> 00:03:55,210\ngeneric service, what, what are those?\n\n103\n00:03:55,210 --> 00:03:59,300\n>> Well, you might have third party\nsoftware that is cluster aware,\n\n104\n00:03:59,300 --> 00:04:02,105\nthat is able to be run inside\na Microsoft fail over cluster.\n\n105\n00:04:02,105 --> 00:04:03,640\n>> Mm-hm.\n>> In which case you can chose like\n\n106\n00:04:03,640 --> 00:04:04,720\ngeneric service.\n\n107\n00:04:04,720 --> 00:04:08,580\nAnd you'll be able to apply the particular\ninformation that relates to that service,\n\n108\n00:04:08,580 --> 00:04:10,670\nso that it can handle\nthe clustering of it.\n\n109\n00:04:10,670 --> 00:04:13,750\nYou can't just take any old software and\ndo that, right?\n\n110\n00:04:13,750 --> 00:04:16,450\nThe software has to be cluster aware.\n\n111\n00:04:16,450 --> 00:04:19,552\nThat means whoever wrote that software\nHad to write it with Microsoft\n\n112\n00:04:19,552 --> 00:04:20,952\nfailover clustering in mind.\n\n113\n00:04:20,952 --> 00:04:21,880\n>> Mm-hm.\n\n114\n00:04:21,880 --> 00:04:22,972\n>> So keep that in mind.\n\n115\n00:04:22,972 --> 00:04:24,902\n>> But you can't do that for\nour game servers or anything.\n\n116\n00:04:24,902 --> 00:04:26,322\n>> Yeah, yeah.\n\n117\n00:04:26,322 --> 00:04:26,834\n[LAUGH]\n>> [LAUGH]\n\n118\n00:04:26,834 --> 00:04:28,774\n>> And, you know, like, a lot of those\n\n119\n00:04:28,774 --> 00:04:32,712\nyeah, we, we, we joke about it [LAUGH] but\nthere's a rather large [COUGH] financial,\n\n120\n00:04:32,712 --> 00:04:33,535\nlike-\n>> Right.\n\n121\n00:04:33,535 --> 00:04:34,589\n>> Community built around online\n\n122\n00:04:34,589 --> 00:04:35,864\nvideo games.\n>> Uh-huh.\n\n123\n00:04:35,864 --> 00:04:37,175\n>> You know, a lot of those servers have\n\n124\n00:04:37,175 --> 00:04:39,435\nredundancy built into em, so\nthey don't, actually, need-\n\n125\n00:04:39,435 --> 00:04:40,039\n>> [CROSSTALK]\n\n126\n00:04:40,039 --> 00:04:40,875\n>> The fail over clustering.\n\n127\n00:04:40,875 --> 00:04:41,572\n[LAUGH]\n\n128\n00:04:41,572 --> 00:04:42,535\n>> But lets look at some of\n\n129\n00:04:42,535 --> 00:04:43,678\nthe ones that are built in.\n\n130\n00:04:43,678 --> 00:04:45,464\nBecause those are some of\nthe ones we'll see on the exam.\n\n131\n00:04:45,464 --> 00:04:45,977\nRight.\n\n132\n00:04:45,977 --> 00:04:46,487\n>> Mhm.\n\n133\n00:04:46,487 --> 00:04:49,042\n>> So lets say that I wanna do DHCP.\n\n134\n00:04:49,042 --> 00:04:49,844\n>> Right.\n>> Now,\n\n135\n00:04:49,844 --> 00:04:52,805\nin our DHCP episode which\nwe filmed forever ago.\n\n136\n00:04:52,805 --> 00:04:53,992\n>> Yeah.\n>> I can't remember.\n\n137\n00:04:53,992 --> 00:04:57,490\nWe talked about, what's it called Mike,\nwhere you split your scope?\n\n138\n00:04:57,490 --> 00:04:58,490\n>> DHCP failover.\n\n139\n00:04:58,490 --> 00:05:00,250\nOh, well you've got\nthe old way of doing it,\n\n140\n00:05:00,250 --> 00:05:02,980\nwhich was to to do the eighty\ntwenty split that they would do,\n\n141\n00:05:02,980 --> 00:05:06,220\nwhere you run two servers and you'd\nhave to be very careful about splitting\n\n142\n00:05:06,220 --> 00:05:08,620\nthat scope because there can't be\nany overlap or anything like that.\n\n143\n00:05:08,620 --> 00:05:10,479\nAnd now they've got that\nDH to be fail over,\n\n144\n00:05:10,479 --> 00:05:13,059\nwhich is where the servers\nare actually aware of each other.\n\n145\n00:05:13,059 --> 00:05:13,670\n>> Mm-hm.\n>> And\n\n146\n00:05:13,670 --> 00:05:16,520\nthey can share responsibility\nof the scopes which is cool.\n\n147\n00:05:16,520 --> 00:05:20,723\n>> So the, the issue with the old method,\nlike when doing the 80/20,\n\n148\n00:05:20,723 --> 00:05:21,455\n>> Mm-hm.\n\n149\n00:05:21,455 --> 00:05:24,839\n>> Where you took your scope and you split\nthe addresses across two servers is, they\n\n150\n00:05:24,839 --> 00:05:28,152\nwere maintaining their leases separately,\nthey were two separate servers.\n\n151\n00:05:28,152 --> 00:05:29,452\n>> Right.\nThey were unaware of each other.\n\n152\n00:05:29,452 --> 00:05:33,210\n>> And if one server failed, all of your\nother clients would then need to basically\n\n153\n00:05:33,210 --> 00:05:37,210\nrenew their leases on the new server,\nor the, you know, server that stayed on.\n\n154\n00:05:37,210 --> 00:05:37,810\nSo.\n>> Yeah.\n\n155\n00:05:37,810 --> 00:05:38,603\n>> So do that.\n\n156\n00:05:38,603 --> 00:05:42,202\nWell, we could do a DHCP server\non our fail over cluster.\n\n157\n00:05:42,202 --> 00:05:42,724\n>> Mm-hm.\n\n158\n00:05:42,724 --> 00:05:47,190\n>> In which case,\nwe don't have to configure fail over DHCP.\n\n159\n00:05:47,190 --> 00:05:49,960\nWe don't have to configure 80/20 splits or\nwhatever.\n\n160\n00:05:49,960 --> 00:05:52,260\nYou just have 1 DHCP server.\n\n161\n00:05:52,260 --> 00:05:55,480\nAnd it can fail over from physical\nnode to physical node as needed.\n\n162\n00:05:55,480 --> 00:05:57,720\nSo we've got that\nfunctionality right there.\n\n163\n00:05:57,720 --> 00:05:59,270\nWhen you choose to create that.\n\n164\n00:05:59,270 --> 00:06:00,834\nSo if I create that DHTP server.\n\n165\n00:06:00,834 --> 00:06:01,414\n>> Mm-hm.\n\n166\n00:06:01,414 --> 00:06:03,390\n>> It's going to ask me to give it a name.\n\n167\n00:06:03,390 --> 00:06:06,677\nI'll call mine ITproTV dash DHTP and\n\n168\n00:06:06,677 --> 00:06:12,096\nI need to give the server an IP\naddress which I will do 246.\n\n169\n00:06:12,096 --> 00:06:14,920\n>> Mm-hm.\n\n170\n00:06:14,920 --> 00:06:18,043\n>> Right.\nAnd it's gonna create this virtual DHTP\n\n171\n00:06:18,043 --> 00:06:22,140\nserver and it's going to give it\nthat IP address and that name.\n\n172\n00:06:22,140 --> 00:06:23,360\nSo my clients on the network,\n\n173\n00:06:23,360 --> 00:06:24,420\nthey'll see that as a host,\n>> Right.\n\n174\n00:06:24,420 --> 00:06:27,140\n>> They'll think that that's a real\nmachine, when in actuality it's,\n\n175\n00:06:27,140 --> 00:06:28,370\nit's just virtual.\n\n176\n00:06:28,370 --> 00:06:30,350\nIt's gonna ask where I\nwanna store my stuff and\n\n177\n00:06:30,350 --> 00:06:33,775\nI can see I've got a cluster disk here\nthat I can use, that's fine with me.\n\n178\n00:06:33,775 --> 00:06:34,339\n>> Mm-hm.\n>> You know,\n\n179\n00:06:34,339 --> 00:06:37,762\nit doesn't need a whole lot of space\nto store the [INAUDIBLE] database.\n\n180\n00:06:37,762 --> 00:06:39,876\n>> Right, just our scopes\n>> It's in our lease information,\n\n181\n00:06:39,876 --> 00:06:40,436\nso not too big.\n\n182\n00:06:40,436 --> 00:06:42,230\n>> And the we'll go ahead and finish.\n\n183\n00:06:42,230 --> 00:06:44,944\nThat's not, not really all that\nmuch to configure on this one.\n\n184\n00:06:44,944 --> 00:06:46,013\n>> Mm-hm.\n\n185\n00:06:46,013 --> 00:06:47,070\n>> Just to get it up and going.\n\n186\n00:06:47,070 --> 00:06:52,010\nNow, once it's done, once it is up and\nrunning, is that it?\n\n187\n00:06:52,010 --> 00:06:53,330\nDo we have a DHCP server?\n\n188\n00:06:53,330 --> 00:06:57,477\nWell, it never asked me what,\nwhat my scope was gonna be.\n\n189\n00:06:57,477 --> 00:06:58,058\n>> Right.\n\n190\n00:06:58,058 --> 00:07:00,705\n>> Want my DNS servers,\nwant my deep ball gateway.\n\n191\n00:07:00,705 --> 00:07:03,550\n[CROSSTALK] Yeah, so you're not done.\n\n192\n00:07:03,550 --> 00:07:06,150\nAs far as the fail over piece\nis concerned, you are done.\n\n193\n00:07:06,150 --> 00:07:08,440\nI just created ITProTV2/dhcp.\n\n194\n00:07:08,440 --> 00:07:10,190\nIt's running.\n\n195\n00:07:10,190 --> 00:07:12,334\nIt's a dhcp server and\nit's a part of my cluster.\n\n196\n00:07:12,334 --> 00:07:13,982\n>> It's on server one right now.\n\n197\n00:07:13,982 --> 00:07:16,294\n>> Yes, right now it's on server one and\n\n198\n00:07:16,294 --> 00:07:19,340\nthat's just because I,\ni started on server one.\n\n199\n00:07:19,340 --> 00:07:20,346\nWe could fail it over if we wanted.\n\n200\n00:07:20,346 --> 00:07:20,950\n>> Mm-hm.\n\n201\n00:07:20,950 --> 00:07:25,410\n>> But what I need to do now is go and\nfinish that roll, right?\n\n202\n00:07:25,410 --> 00:07:28,490\nNow I just treat it like\na normal DHCP server, and\n\n203\n00:07:28,490 --> 00:07:33,520\nif I have my, server administration\ntools installed here.\n\n204\n00:07:33,520 --> 00:07:36,260\n>> Mmhm.\n>> We can come in [COUGH] and\n\n205\n00:07:36,260 --> 00:07:37,660\nwe can connect to that server.\n\n206\n00:07:37,660 --> 00:07:39,473\nSo I'm just gonna add a new server here.\n\n207\n00:07:39,473 --> 00:07:43,030\nAnd [CROSSTALK] Virtual IP address, or\nare you gonna resolve the name of it?\n\n208\n00:07:43,030 --> 00:07:44,291\n>> We'll see, the name should resolve.\n\n209\n00:07:48,409 --> 00:07:49,164\nLet's see.\n\n210\n00:07:49,164 --> 00:07:51,800\nI just created it, so\nthe name might not resolve right away.\n\n211\n00:07:51,800 --> 00:07:52,485\nOh, there we go.\n\n212\n00:07:52,485 --> 00:07:53,019\n>> Nice.\n\n213\n00:07:53,019 --> 00:07:53,867\nSo there it is.\n\n214\n00:07:53,867 --> 00:07:56,053\nSo it shows up its a server.\n\n215\n00:07:56,053 --> 00:08:00,666\nI can go in and I need to activate\nit just like a normal DHCP\n\n216\n00:08:00,666 --> 00:08:05,390\nserver I treat it like a normal\nDHCP server at this point.\n\n217\n00:08:05,390 --> 00:08:06,860\nIt's no difference than a physical--\n>> So\n\n218\n00:08:06,860 --> 00:08:09,720\nat this point if you were gonna delegate\nadministrative control over that\n\n219\n00:08:09,720 --> 00:08:14,350\nDHCP server to your DHCP [INAUDIBLE] then\nyou really wouldn't need to know, per se,\n\n220\n00:08:14,350 --> 00:08:15,470\nthat it was on a cluster.\n\n221\n00:08:15,470 --> 00:08:16,250\n>> No.\n>> He's just going to man\n\n222\n00:08:16,250 --> 00:08:17,740\nit like it was any other DHCP server.\n\n223\n00:08:17,740 --> 00:08:19,188\n>> Doesn't need to know it's clustered,\n\n224\n00:08:19,188 --> 00:08:21,326\ndoesn't need to know what\nphysical machine it resides on.\n\n225\n00:08:21,326 --> 00:08:22,538\n>> All right.\n>> He just needs to know,\n\n226\n00:08:22,538 --> 00:08:23,730\nhey there's now a DHCP server.\n\n227\n00:08:23,730 --> 00:08:25,032\nIt's ITprotv2-dhcp.\n\n228\n00:08:25,032 --> 00:08:27,660\n>> Mm-hm.\n>> It's IP address is 10.1.100.246.\n\n229\n00:08:27,660 --> 00:08:33,159\nGot to look at my cheat sheet here 246\nIt's up, it's running, get to work.\n\n230\n00:08:33,159 --> 00:08:36,435\n>> Right.\n>> That's all they need to know and so\n\n231\n00:08:36,435 --> 00:08:37,840\nthat's cool.\n\n232\n00:08:37,840 --> 00:08:40,000\nWe do need to activate it and\nall that stuff.\n\n233\n00:08:40,000 --> 00:08:41,220\n>> Authorize that bad boy.\n\n234\n00:08:41,220 --> 00:08:46,820\n>> Which, for some reason,I'm\nremoted several levels deeps here.\n\n235\n00:08:46,820 --> 00:08:47,715\n>> [LAUGH]\n>> And to my right-click\n\n236\n00:08:47,715 --> 00:08:48,775\nis somewhat spotty.\n\n237\n00:08:48,775 --> 00:08:49,925\n>> Right.\n>> But I come over here and\n\n238\n00:08:49,925 --> 00:08:51,660\nauthorize it and I'll use the action bar.\n\n239\n00:08:51,660 --> 00:08:53,135\n>> [LAUGH].\n>> The thing we're suppose to use anyway,\n\n240\n00:08:53,135 --> 00:08:54,125\nbut I'm a right-clicker.\n\n241\n00:08:54,125 --> 00:08:55,195\n>> I am a right-clicker all the way.\n\n242\n00:08:55,195 --> 00:08:56,445\nThe heck with that action bar.\n\n243\n00:08:56,445 --> 00:08:58,430\nClose it, give me more room.\n\n244\n00:08:58,430 --> 00:09:00,910\n>> [LAUGH]\n>> So, so now we just go and\n\n245\n00:09:00,910 --> 00:09:01,685\nconfigure it, right?\n\n246\n00:09:01,685 --> 00:09:02,630\n>> Mm-hm.\n>> So\n\n247\n00:09:02,630 --> 00:09:05,640\non the cluster side was that very hard?\n\n248\n00:09:05,640 --> 00:09:06,210\n>> No.\n\n249\n00:09:06,210 --> 00:09:06,790\n>> No right?\n\n250\n00:09:06,790 --> 00:09:08,460\nWe just provided a name and IP and\n\n251\n00:09:08,460 --> 00:09:12,150\nyou'll find that's the way with most\nof the cluster services that you setup.\n\n252\n00:09:12,150 --> 00:09:15,000\nWhen you add that role,\nyou're really setting a name and\n\n253\n00:09:15,000 --> 00:09:17,580\nan IP and then you go and\nconfigure the role\n\n254\n00:09:17,580 --> 00:09:19,600\nusing whatever tools you're used to\n>> Yes.\n\n255\n00:09:19,600 --> 00:09:22,330\n>> But that's not always the case,\nall right.\n\n256\n00:09:22,330 --> 00:09:25,330\nLet me show you another example\nthat's a little bit different.\n\n257\n00:09:25,330 --> 00:09:28,095\nLet's say I want to set up a file share.\n\n258\n00:09:28,095 --> 00:09:28,600\n>> Mm-hm.\n\n259\n00:09:28,600 --> 00:09:30,790\n>> I want to have shared folder, and\n\n260\n00:09:30,790 --> 00:09:33,526\nthis shared folder is going to\ncontain my corporate documents.\n\n261\n00:09:33,526 --> 00:09:35,470\n>> Mm-hm.\n>> So I want to have a file server, and\n\n262\n00:09:35,470 --> 00:09:36,150\nI want to do a cluster.\n\n263\n00:09:36,150 --> 00:09:37,499\nNow, I could do DFS\n>> All right.\n\n264\n00:09:37,499 --> 00:09:40,090\nMm-hm.\n>> The distributed file system, but\n\n265\n00:09:40,090 --> 00:09:41,630\nDFS has some limitations,\n\n266\n00:09:41,630 --> 00:09:44,220\nhas some complexities,\nI may not want to go that route.\n\n267\n00:09:44,220 --> 00:09:45,060\n>> Right.\n>> Right?\n\n268\n00:09:45,060 --> 00:09:48,280\nSo I may just want to have a regular\nrun of the mill file share and\n\n269\n00:09:48,280 --> 00:09:51,190\nI want my end user to be\nable to connect to it.\n\n270\n00:09:51,190 --> 00:09:54,400\n>> Mm-hm.\n>> So I could come in here to my roles,\n\n271\n00:09:54,400 --> 00:09:57,950\nand, you know I was right-clicking so\nwell for a while there and now-\n\n272\n00:09:57,950 --> 00:09:59,920\n>> [LAUGH] All of a sudden it's gone?\n\n273\n00:09:59,920 --> 00:10:01,530\n>> Yeah, it's this dadgum touchpad.\n\n274\n00:10:01,530 --> 00:10:03,670\nWhatever, I'll just go\nover here to the right.\n\n275\n00:10:03,670 --> 00:10:04,922\nSo I'm going to configure role.\n\n276\n00:10:04,922 --> 00:10:06,650\n[LAUGH] You know what it is?\n\n277\n00:10:06,650 --> 00:10:08,510\nIt's Microsoft forcing me\nto use that action bar.\n\n278\n00:10:08,510 --> 00:10:09,500\n>> I know, I know.\n\n279\n00:10:09,500 --> 00:10:11,750\n>> But I can go in here and\nI can add another one.\n\n280\n00:10:11,750 --> 00:10:13,190\nAnd this time I'm going\nto add file server.\n\n281\n00:10:13,190 --> 00:10:17,110\nNow, you might say to yourself,\nwell Don, a DHCP server,\n\n282\n00:10:17,110 --> 00:10:18,380\nthat's got a ton of options.\n\n283\n00:10:18,380 --> 00:10:19,010\nThat's pretty.\n\n284\n00:10:19,010 --> 00:10:20,660\n>> It's a lot more complex\nthan a file server.\n\n285\n00:10:20,660 --> 00:10:21,984\n>> Right.\nSo this one shouldn't have much.\n\n286\n00:10:21,984 --> 00:10:22,700\n>> Yeah.\n\n287\n00:10:22,700 --> 00:10:25,530\n>> But we actually do have some\ninteresting choices when we go to\n\n288\n00:10:25,530 --> 00:10:28,745\nconfigure a file server, and this first\nscreen is the most important, all right.\n\n289\n00:10:28,745 --> 00:10:29,380\n>> Mm-hm.\n\n290\n00:10:29,380 --> 00:10:33,345\n>> The default mode is what's\ncalled file server for general use.\n\n291\n00:10:33,345 --> 00:10:33,850\n>> Mm-hm.\n\n292\n00:10:33,850 --> 00:10:38,230\n>> That's the clustered file server that's\nbeen around since, I used it under NT4,\n\n293\n00:10:38,230 --> 00:10:39,570\nI don't know if it was around before then.\n\n294\n00:10:39,570 --> 00:10:43,205\nBut it was definitely and NT4 enterprise\nso its been around a long time.\n\n295\n00:10:43,205 --> 00:10:44,710\n>> Mm-hm.\n>> And what it does is it creates\n\n296\n00:10:44,710 --> 00:10:48,890\na shared folder and it attaches\nit to one of the cluster nodes.\n\n297\n00:10:48,890 --> 00:10:50,460\n>> Right.\n>> And when people browse through that\n\n298\n00:10:50,460 --> 00:10:52,125\nshared folder,\nthey access it on that cluster node.\n\n299\n00:10:52,125 --> 00:10:52,870\n>> Mm-hm.\n\n300\n00:10:52,870 --> 00:10:55,525\n>> If it goes offline, if it fails, right?\n\n301\n00:10:55,525 --> 00:10:58,090\n>> Mm-hm.\n>> Then the shared folder jumps over\n\n302\n00:10:58,090 --> 00:11:00,215\nto the other node and\npeople can access it there.\n\n303\n00:11:00,215 --> 00:11:00,800\n>> Mm-hm.\n\n304\n00:11:00,800 --> 00:11:03,950\n>> But if anybody who's in mid-stream,\nwho's like writing data and so\n\n305\n00:11:03,950 --> 00:11:05,468\non, that got lost.\n\n306\n00:11:05,468 --> 00:11:06,090\n>> Mm-hm.\n\n307\n00:11:06,090 --> 00:11:06,740\n>> Right?\n\n308\n00:11:06,740 --> 00:11:10,260\nAnd so, while you do get good fail over,\nyou do have the potential for\n\n309\n00:11:10,260 --> 00:11:12,890\nlost data rights, and\nyou have the potential for\n\n310\n00:11:12,890 --> 00:11:16,584\na little bit of downtime while\nit fails from node to node.\n\n311\n00:11:16,584 --> 00:11:17,260\n>> Right.\n\n312\n00:11:17,260 --> 00:11:18,895\n>> In 2012 R2, we got a new one.\n\n313\n00:11:18,895 --> 00:11:22,645\nWhich says scale out file server for\napplication hit.\n\n314\n00:11:22,645 --> 00:11:23,315\nAlright.\n>> Mm-hmm.\n\n315\n00:11:23,315 --> 00:11:25,155\n>> This is a special mode.\n\n316\n00:11:25,155 --> 00:11:26,585\nAnd there's a few different names.\n\n317\n00:11:26,585 --> 00:11:31,475\nIn the objectives, they actually call\nit continuously available file shares.\n\n318\n00:11:31,475 --> 00:11:32,265\nAll right.\n\n319\n00:11:32,265 --> 00:11:37,265\nAnd what this is, is a much higher\nlevel of file availability.\n\n320\n00:11:37,265 --> 00:11:39,995\nIt's designed to be able to\nfail over between the nodes and\n\n321\n00:11:39,995 --> 00:11:41,265\nnot even lose data rights.\n\n322\n00:11:41,265 --> 00:11:43,670\n>> All right.\n>> But it can be extremely efficient.\n\n323\n00:11:43,670 --> 00:11:45,020\n>> Hm.\n>> These are really useful for\n\n324\n00:11:45,020 --> 00:11:48,060\napplications that are going to\nholding files open for a long time.\n\n325\n00:11:48,060 --> 00:11:49,080\n>> Mm.\n>> It isn't end users,\n\n326\n00:11:49,080 --> 00:11:51,910\nthey might read a file, open it,\nsave it, close it, whatever.\n\n327\n00:11:51,910 --> 00:11:53,170\n>> All right.\n>> But an application might hold\n\n328\n00:11:53,170 --> 00:11:54,830\na file open for hours or even days.\n\n329\n00:11:54,830 --> 00:11:57,050\n>> Like a virtual hard drive or\nmachine hold a drive open.\n\n330\n00:11:57,050 --> 00:11:57,940\n>> Oh yeah.\n\n331\n00:11:57,940 --> 00:12:00,830\nSo, what this does is it leverages and\nI'm, I'm glad you mentioned virtual\n\n332\n00:12:00,830 --> 00:12:03,699\nR drives it leverages the same\ntechnology as a cluster share volume.\n\n333\n00:12:03,699 --> 00:12:06,870\n>> Mm-hmm\n>> To allow more then one node\n\n334\n00:12:06,870 --> 00:12:11,240\nto be hosting up this file share at the\nsame time and to allow where when there's\n\n335\n00:12:11,240 --> 00:12:13,380\na fail over people can just jump\nright over to the other one and\n\n336\n00:12:13,380 --> 00:12:17,925\ncontinue their right operation without\nlosing data, so it's really cool\n\n337\n00:12:17,925 --> 00:12:18,770\n>> Mm-hm.\n\n338\n00:12:18,770 --> 00:12:20,710\n>> But it comes at a price, right?\n\n339\n00:12:20,710 --> 00:12:21,450\n>> Of course.\n\n340\n00:12:21,450 --> 00:12:23,735\n>> With great power comes\ngreat responsibility, right?\n\n341\n00:12:23,735 --> 00:12:25,850\n>> [LAUGH]\n>> So notice in the little notes here,\n\n342\n00:12:25,850 --> 00:12:28,230\nif we do the file server for general use-\n>> Uh-huh.\n\n343\n00:12:28,230 --> 00:12:30,260\n>> It uses SMB,\nserver message block, right?\n\n344\n00:12:30,260 --> 00:12:32,520\n>> Right.\n>> That what we use for Windows shares.\n\n345\n00:12:32,520 --> 00:12:36,630\nBut it supports MFS also,\ndatadedupe, FSRM,\n\n346\n00:12:36,630 --> 00:12:41,410\nthe file server resource manager,\nDFS worked all this crazy stuff, alright.\n\n347\n00:12:41,410 --> 00:12:45,780\nIf we do the scale out,\nnotice 'does not support NFS,\n\n348\n00:12:45,780 --> 00:12:49,085\nDFS,FSRM' it only supports SMB.\n\n349\n00:12:49,085 --> 00:12:49,780\n>> Right.\n\n350\n00:12:49,780 --> 00:12:54,470\n>> So if your doing a traditional\nfile share this is a super resilient,\n\n351\n00:12:54,470 --> 00:12:56,240\nhighly available option for us.\n\n352\n00:12:56,240 --> 00:12:56,930\nAlright?\n\n353\n00:12:56,930 --> 00:12:59,530\nBut if you're using NFS, DFS,\nall these other bells and\n\n354\n00:12:59,530 --> 00:13:00,510\nwhistles\n>> Mm-hm\n\n355\n00:13:00,510 --> 00:13:01,430\n>> You really can't use this.\n\n356\n00:13:01,430 --> 00:13:03,680\nAnd if you're using DFS,\nyou shouldn't need this anyways.\n\n357\n00:13:03,680 --> 00:13:04,180\n>> Right.\n>> Right?\n\n358\n00:13:04,180 --> 00:13:05,610\nCuz DFS >> You're talking\nabout user shares and\n\n359\n00:13:05,610 --> 00:13:06,145\nthings like that.\nSo.\n\n360\n00:13:06,145 --> 00:13:07,920\n>> Mm-hm.\n\n361\n00:13:07,920 --> 00:13:09,540\nSo, so we do have two options there, and\n\n362\n00:13:09,540 --> 00:13:11,509\nwe'll see different responses\nbased on that, right?\n\n363\n00:13:11,509 --> 00:13:12,550\n>> Mm-hm.\n>> So if I just choose the new\n\n364\n00:13:12,550 --> 00:13:15,750\nfile server for general use and\nmove forward It's gonna ask for\n\n365\n00:13:15,750 --> 00:13:21,290\na name and an IP, it'll ask for\nstorage, and that's really about it.\n\n366\n00:13:21,290 --> 00:13:25,490\nIf I go the other option, if I choose to\nscale out, notice on the left side here,\n\n367\n00:13:25,490 --> 00:13:27,837\nlike here,\nwe've got configure availability.\n\n368\n00:13:27,837 --> 00:13:30,100\n>> Mm-hm.\n>> When I choose scale out,actually which\n\n369\n00:13:30,100 --> 00:13:30,710\none is disappearing.\n\n370\n00:13:30,710 --> 00:13:31,890\nOh, select storage is what's disappearing.\n\n371\n00:13:31,890 --> 00:13:32,440\n>> Select storage.\n\n372\n00:13:32,440 --> 00:13:33,510\nYeah.\n>> So\n\n373\n00:13:33,510 --> 00:13:37,825\nwhen I do that it's basically going to be\npicking a, a cluster share for our CSV.\n\n374\n00:13:37,825 --> 00:13:39,560\n>> Mm-hm.\n>> To be able to store that data.\n\n375\n00:13:39,560 --> 00:13:40,850\nAnd it's not truly a CSV.\n\n376\n00:13:40,850 --> 00:13:43,340\nIt's kind of hard to describe.\n\n377\n00:13:43,340 --> 00:13:44,770\n>> Right.\n>> It's just a share that's being\n\n378\n00:13:44,770 --> 00:13:45,380\nhandled by both.\n\n379\n00:13:45,380 --> 00:13:46,730\nIt uses the same technologies.\n\n380\n00:13:46,730 --> 00:13:47,280\nDSP.\n\n381\n00:13:47,280 --> 00:13:47,980\n>> And that way we're, so\n\n382\n00:13:47,980 --> 00:13:50,975\nwe're gaining that advantage cuz\nwe're not doing a traditional share.\n\n383\n00:13:50,975 --> 00:13:52,220\n>> Mm-hm.\n>> Now I've got to move it from one server\n\n384\n00:13:52,220 --> 00:13:52,720\nto the other and\n\n385\n00:13:52,720 --> 00:13:56,100\nfailure since they both have access to\nit we can get that quick switch over.\n\n386\n00:13:56,100 --> 00:13:56,680\n>> Yeah.\n\n387\n00:13:56,680 --> 00:13:57,660\nYeah.\n\n388\n00:13:57,660 --> 00:14:01,300\nSo this is just an example of some of the\ndifferences we might see as we go to set\n\n389\n00:14:01,300 --> 00:14:01,810\nup these rolls.\n\n390\n00:14:01,810 --> 00:14:04,684\nSo just be aware that each\none may have specific needs.\n\n391\n00:14:04,684 --> 00:14:06,280\n>> Mm-hm.\n>> And we all see this with DHCP cause it\n\n392\n00:14:06,280 --> 00:14:07,690\ndoesn't apply to DHCP.\n\n393\n00:14:07,690 --> 00:14:08,300\n>> Right.\n>> Right?\n\n394\n00:14:08,300 --> 00:14:11,090\nI'll go ahead and do a scale out\ncause it is in the objectives.\n\n395\n00:14:11,090 --> 00:14:12,740\nThey specifically call out a\n>> Mm-hm.\n\n396\n00:14:12,740 --> 00:14:14,440\n>> continuously available file share.\n\n397\n00:14:14,440 --> 00:14:16,780\nSo I'll go ahead and do a scale out.\n\n398\n00:14:16,780 --> 00:14:18,405\nAnd it's gonna ask for a name.\n\n399\n00:14:18,405 --> 00:14:19,830\n>> Mm-hm.\n>> And this is basically\n\n400\n00:14:19,830 --> 00:14:23,873\ngoing to be the share name that people\nare gonna be browsing through and asking.\n\n401\n00:14:23,873 --> 00:14:25,040\n>> Okay.\n\n402\n00:14:25,040 --> 00:14:29,235\nSo I'll call it\n>> Path for it then.\n\n403\n00:14:29,235 --> 00:14:32,030\n>> ITProTV2-File is what I'll call it.\n\n404\n00:14:34,330 --> 00:14:37,705\nAnd it's gonna create it, notice what it's\ndoing is basically creating a computer.\n\n405\n00:14:37,705 --> 00:14:38,260\n>> Mm-hm.\n\n406\n00:14:38,260 --> 00:14:40,800\n>> So there'll be a fake computer,\nor a host,\n\n407\n00:14:40,800 --> 00:14:42,720\ncalled ITProTV2-File\n>> Right.\n\n408\n00:14:42,720 --> 00:14:46,130\n>> And it's gonna put it in\nthe computer's OU, in my active\n\n409\n00:14:46,130 --> 00:14:46,870\n>> Active directory-\n\n410\n00:14:46,870 --> 00:14:47,820\n>> So it created an object.\n\n411\n00:14:47,820 --> 00:14:49,645\n>> So it's going to look for.\n\n412\n00:14:49,645 --> 00:14:50,250\nMm-hm.\nAnd I, forgot.\n\n413\n00:14:50,250 --> 00:14:51,790\nOh, no I never did ask for an IP address.\n\n414\n00:14:51,790 --> 00:14:52,680\n>> No, that's what I was gonna say.\n\n415\n00:14:52,680 --> 00:14:53,500\nIt doesn't really ask.\n\n416\n00:14:53,500 --> 00:14:55,620\nIt just puts that subnet\naddress down there.\n\n417\n00:14:55,620 --> 00:14:57,640\n>> Yeah, we'll see that in a moment.\n\n418\n00:14:57,640 --> 00:15:00,360\nSo I'll specify that name,\nand we'll hit next, and\n\n419\n00:15:00,360 --> 00:15:03,210\nhere under configure high availability,\nit's actually reaching out to\n\n420\n00:15:03,210 --> 00:15:06,145\nthe servers making sure that it can\nsupport this in getting that attached.\n\n421\n00:15:06,145 --> 00:15:06,834\n>> Mm-hm.\n\n422\n00:15:08,220 --> 00:15:08,950\n>> All right.\n\n423\n00:15:08,950 --> 00:15:12,840\nSo now I can see right there\nI've got IT Pro Tv2-file, and\n\n424\n00:15:12,840 --> 00:15:15,271\nit's a scale out file server.\n\n425\n00:15:15,271 --> 00:15:16,660\n>> Mm-hm.\n>> So there it is,\n\n426\n00:15:16,660 --> 00:15:18,230\nit's running in that highly available,\n\n427\n00:15:18,230 --> 00:15:20,415\nthat continuously available\nfile storage mode.\n\n428\n00:15:20,415 --> 00:15:21,070\n>> Right.\n\n429\n00:15:21,070 --> 00:15:25,149\n>> So we've got that in place and if I\npoke around in my active directory which,\n\n430\n00:15:25,149 --> 00:15:27,721\nI don't know if i installed\nit on this machine.\n\n431\n00:15:27,721 --> 00:15:32,277\nApparently not, all right so\n\n432\n00:15:32,277 --> 00:15:35,744\n[LAUGH] we, let me see.\n\n433\n00:15:35,744 --> 00:15:43,725\nDid I, It'll be on my DC.\n\n434\n00:15:43,725 --> 00:15:46,858\nI'm just gonna jump over to my DC real\nquick, my domain controller, so that I can\n\n435\n00:15:46,858 --> 00:15:50,100\nlook at the active directory and show you\nthe record that was created in there.\n\n436\n00:15:50,100 --> 00:15:51,372\n>> Mm hm.\n\n437\n00:15:51,372 --> 00:15:53,324\nSaid it went in as\nthe computer's container?\n\n438\n00:15:53,324 --> 00:15:54,311\n>> Hopefully.\n\n439\n00:15:54,311 --> 00:15:55,170\n>> Hopefully.\n\n440\n00:15:55,170 --> 00:15:57,527\n>> [LAUGH]\n>> That's what it said it did.\n\n441\n00:15:57,527 --> 00:16:00,011\nAll right, so if I go in here I can see.\n\n442\n00:16:00,011 --> 00:16:04,551\nRight here, and\nactually see itprotv2-dhcp also.\n\n443\n00:16:04,551 --> 00:16:05,654\nThey show up as computers.\n\n444\n00:16:05,654 --> 00:16:08,940\nThey are not real computers, but\nthey have to have entities here.\n\n445\n00:16:08,940 --> 00:16:10,510\nCuz that's how people\nare doing their look ups.\n\n446\n00:16:10,510 --> 00:16:12,260\nThat's how they are finding these systems.\n\n447\n00:16:12,260 --> 00:16:15,400\nTo be able to see that they're there,\nto see that they as this.\n\n448\n00:16:15,400 --> 00:16:17,320\nAnd, and to able to access them.\n\n449\n00:16:17,320 --> 00:16:18,310\n>> Nice.\n>> So, yeah.\n\n450\n00:16:18,310 --> 00:16:22,040\nAnd, you know, that was just a little\nbit more special because it is that\n\n451\n00:16:22,040 --> 00:16:23,235\nhighly available file share.\n\n452\n00:16:23,235 --> 00:16:24,190\n>> Mm-hm.\n>> So we can browse to that,\n\n453\n00:16:24,190 --> 00:16:26,460\nand we'll see the shares that\nare available on that server.\n\n454\n00:16:26,460 --> 00:16:26,960\n>> Very nice.\n\n455\n00:16:28,450 --> 00:16:30,480\n>> All right.\nSome of the other things that we've got,\n\n456\n00:16:30,480 --> 00:16:32,879\nlet's see, that was continuously,\nhighly available.\n\n457\n00:16:34,050 --> 00:16:36,860\nSome of the other things that we\nmight need to tweak with our roles\n\n458\n00:16:36,860 --> 00:16:40,010\nare special little bells,\nand, and, and whistles.\n\n459\n00:16:40,010 --> 00:16:40,590\n>> Mm-hm.\n\n460\n00:16:40,590 --> 00:16:43,670\n>> For example, are virtual machines.\n\n461\n00:16:43,670 --> 00:16:44,520\nRight?\n>> Right.\n\n462\n00:16:44,520 --> 00:16:45,970\n>> We created those virtual machines.\n\n463\n00:16:45,970 --> 00:16:49,390\nAnd, and, I, I made the comment with\nDHCP is once you've got it created here,\n\n464\n00:16:49,390 --> 00:16:53,030\nyou don't really mess with it anymore, now\nyou just go and use your DHCP admin tools.\n\n465\n00:16:53,030 --> 00:16:53,920\nRight?\n\n466\n00:16:53,920 --> 00:16:57,360\nWell, with the virtual machines,\nit's a little bit different.\n\n467\n00:16:57,360 --> 00:17:00,560\nWe, we create them here, and then yeah,\nwe go over and we do a lot of stuff\n\n468\n00:17:00,560 --> 00:17:04,360\nwith the Hyper-V manager, right, you know,\nI can, I can fire up my Hyper-V manager.\n\n469\n00:17:05,480 --> 00:17:07,290\nWhich is buried in here somewhere.\n\n470\n00:17:09,210 --> 00:17:10,200\nThere we go.\n\n471\n00:17:10,200 --> 00:17:13,370\nI can fire up my Hyper-V manager and\nI can connect to my two nodes, and\n\n472\n00:17:13,370 --> 00:17:16,060\nI can find the VMs and, and\nstart to work with them.\n\n473\n00:17:16,060 --> 00:17:20,340\nThe problem is that it's difficult to keep\ntrack of which node the VMs reside on.\n\n474\n00:17:20,340 --> 00:17:22,460\nAnd so, we actually have whoa.\n\n475\n00:17:23,940 --> 00:17:27,170\nIf I can get rid of my,\ncrazy notification center.\n\n476\n00:17:27,170 --> 00:17:28,510\nThere we go.\n\n477\n00:17:28,510 --> 00:17:33,030\nWe actually have in here, we get support\nfor a lot of virtual machine action, so\n\n478\n00:17:33,030 --> 00:17:33,640\nyou'll see over here,\n\n479\n00:17:33,640 --> 00:17:36,555\nI can connect directly to that\nvirtual machine's console.\n\n480\n00:17:36,555 --> 00:17:37,740\n>> Mmm-hmm.\n>> We can turn it off, and\n\n481\n00:17:37,740 --> 00:17:40,965\nwe saw a lot of that during the,\nduring the Hyper V show.\n\n482\n00:17:40,965 --> 00:17:42,848\n>> Right.\n>> But there was one feature we didn't\n\n483\n00:17:42,848 --> 00:17:46,697\ncover that I did want to show off which\nis a real tight interaction between,\n\n484\n00:17:46,697 --> 00:17:49,585\nthe fail over cluster and\nthe Hyper V virtual machines.\n\n485\n00:17:49,585 --> 00:17:50,361\n>> Mm-hm.\n\n486\n00:17:50,361 --> 00:17:52,960\n>> When we have something\nlike this web server.\n\n487\n00:17:52,960 --> 00:17:53,680\nRight?\n>> Right.\n\n488\n00:17:53,680 --> 00:17:54,400\n>> It's a web server.\n\n489\n00:17:54,400 --> 00:17:55,600\nIt's running IIS.\n\n490\n00:17:55,600 --> 00:17:58,680\nSo it is running the Internet Information\nService or at least I assume it is.\n\n491\n00:17:58,680 --> 00:18:00,160\n>> [LAUGH]\n>> Let me, let me verify.\n\n492\n00:18:00,160 --> 00:18:01,040\nSometimes it's a good idea.\n\n493\n00:18:01,040 --> 00:18:02,850\n>> We named it web so surely it is.\n\n494\n00:18:02,850 --> 00:18:05,210\n>> It does, it does have the name.\n\n495\n00:18:05,210 --> 00:18:06,730\nAll right, so let's see,\n\n496\n00:18:06,730 --> 00:18:11,790\nthat was IT Pro TV 2 dash Web 01\n>> There we go.\n\n497\n00:18:11,790 --> 00:18:13,380\nSo I get the IIS splash screen.\n\n498\n00:18:13,380 --> 00:18:16,490\nThat let's me know it is running IIS,\nand it, it's not configured.\n\n499\n00:18:16,490 --> 00:18:17,430\nIt's just running the default.\n\n500\n00:18:17,430 --> 00:18:18,230\n>> Right.\n>> Cuz we added the role,\n\n501\n00:18:18,230 --> 00:18:19,370\nwe never did anything to it.\n\n502\n00:18:19,370 --> 00:18:19,970\n>> Huh.\n\n503\n00:18:19,970 --> 00:18:21,590\n>> So it's running and it's happy.\n\n504\n00:18:21,590 --> 00:18:25,560\nSo, we may need to configure that,\nthat web service inside of the VM, right?\n\n505\n00:18:25,560 --> 00:18:26,555\nThat's normally what we do.\n\n506\n00:18:26,555 --> 00:18:27,410\n>> Mmm-hmm.\n\n507\n00:18:27,410 --> 00:18:29,510\n>> Because this is a web server,\n\n508\n00:18:29,510 --> 00:18:33,462\nthe IIS service is the most\nimportant thing that it does.\n\n509\n00:18:33,462 --> 00:18:34,120\n>> Mmm-hmm.\n>> And so,\n\n510\n00:18:34,120 --> 00:18:37,390\na lot of times we'll set up\nrecovery options on that service.\n\n511\n00:18:37,390 --> 00:18:43,940\nSo if I pull up that virtual machine,\nand get logged in to it,\n\n512\n00:18:46,520 --> 00:18:50,290\nif I can remember my password,\n>> That super secret one, there we go.\n\n513\n00:18:50,290 --> 00:18:51,560\n>> There we go.\n\n514\n00:18:51,560 --> 00:18:53,808\nAll right, so if I go into\nthe services on this virtual machine,\n\n515\n00:18:58,605 --> 00:19:01,269\nI can find the IIS service,\nand this is annoying,\n\n516\n00:19:01,269 --> 00:19:03,965\ncuz the service name\ndoesn't match the service.\n\n517\n00:19:03,965 --> 00:19:04,631\n>> [LAUGH]\n>> So for\n\n518\n00:19:04,631 --> 00:19:06,589\n>> World wide webs, server type,\n\n519\n00:19:06,589 --> 00:19:07,390\nwhat do you.\n\n520\n00:19:07,390 --> 00:19:11,220\n>> Worldwide publishing service,\nsomething like that, we'll find it.\n\n521\n00:19:11,220 --> 00:19:13,710\nThere it is.\nWorldwide web publishing service.\n\n522\n00:19:13,710 --> 00:19:17,310\nSo, I asked the internet information\nservice, that's the web server in, in\n\n523\n00:19:17,310 --> 00:19:21,564\nWindows, and the servers that power it is\nthis world wide web publishing In service.\n\n524\n00:19:21,564 --> 00:19:23,080\n>> Mm-hm.\n>> So if you're going to be running a web\n\n525\n00:19:23,080 --> 00:19:26,780\nserver, what happens if your web server\ncrashes, what happens if IIS crashed?\n\n526\n00:19:26,780 --> 00:19:27,310\n>> Right.\n\n527\n00:19:27,310 --> 00:19:30,990\n>> Well, the cluster, the fail-over\ncluster, may look at that VM and\n\n528\n00:19:30,990 --> 00:19:34,500\nsay, it's got memory, it's got CPU,\noperating system's running, it's happy.\n\n529\n00:19:34,500 --> 00:19:35,025\nRight?\n>> Mm-hm.\n\n530\n00:19:35,025 --> 00:19:36,300\n>> It, it doesn't\n\n531\n00:19:36,300 --> 00:19:37,590\nknow IIS specifically crashed.\n\n532\n00:19:37,590 --> 00:19:39,960\n>> No, what it's really worried about\nis that the virtual machine itself is\n\n533\n00:19:39,960 --> 00:19:40,630\nup and running.\n\n534\n00:19:40,630 --> 00:19:41,310\nAccessible.\n\n535\n00:19:41,310 --> 00:19:45,220\n>> Right, and, and just by default, there\nis no way that it knows that individual\n\n536\n00:19:45,220 --> 00:19:49,120\nservice crashed, and this goes for\nother things, too, but\n\n537\n00:19:49,120 --> 00:19:52,610\nI'm using web here as an example, so\nthis might be an FTP server, DHCP, DNS,\n\n538\n00:19:52,610 --> 00:19:55,800\nwho knows cuz the virtual machine,\nit can do whatever, right?\n\n539\n00:19:55,800 --> 00:19:56,550\n>> Right.\n>> So,\n\n540\n00:19:56,550 --> 00:20:00,790\nhyper V doesn't know which services\nare important, to this machine.\n\n541\n00:20:00,790 --> 00:20:04,130\nWell in this machine, we can pull up\nWorld Wide Web Publishing Service.\n\n542\n00:20:04,130 --> 00:20:06,950\n>> Right.\n>> And we can go to this recovery tab, and\n\n543\n00:20:06,950 --> 00:20:10,550\nyou can set what to do when\na failure happens, right?\n\n544\n00:20:10,550 --> 00:20:12,090\nAnd the default is to do nothing.\n\n545\n00:20:12,090 --> 00:20:14,480\nIf IIS crashes that's just it, right?\n\n546\n00:20:14,480 --> 00:20:16,380\nBut a lot of people come in here and\nsay well,\n\n547\n00:20:16,380 --> 00:20:18,330\nif it crashes once just\nJust restart the service.\n\n548\n00:20:18,330 --> 00:20:19,280\n>> Try to restart it.\n\n549\n00:20:19,280 --> 00:20:21,200\n>> And if it crashes again,\nwe'll restart the service again.\n\n550\n00:20:21,200 --> 00:20:23,520\nAnd if it crashes a third time,\nmaybe restart the whole thing too.\n\n551\n00:20:23,520 --> 00:20:24,390\n>> Restart the entire computer, yeah.\n\n552\n00:20:24,390 --> 00:20:25,210\n>> Right?\n\n553\n00:20:25,210 --> 00:20:27,090\nWell, these are good options, right?\n\n554\n00:20:27,090 --> 00:20:28,855\nGood options if you want to\nget that service up and going.\n\n555\n00:20:28,855 --> 00:20:29,600\n>> Uh-huh.\n\n556\n00:20:29,600 --> 00:20:32,955\n>> But, it's completely unaware of\nthe fact that it's running on a cluster.\n\n557\n00:20:32,955 --> 00:20:35,330\n>> Hm-hm.\n>> There's no option here that says,\n\n558\n00:20:35,330 --> 00:20:36,580\nfail over to the other node.\n\n559\n00:20:36,580 --> 00:20:37,530\n>> Right.\n>> Right?\n\n560\n00:20:37,530 --> 00:20:40,985\nLike maybe my problem is I can't access\nmy storage, and that's why I'm crashing.\n\n561\n00:20:40,985 --> 00:20:42,260\n>> Hm-hm.\n>> Restarting the servers,\n\n562\n00:20:42,260 --> 00:20:43,640\nrebooting the machine,\nthat's not gonna help.\n\n563\n00:20:43,640 --> 00:20:45,445\nI really need to fail over to\nthe other node, all right?\n\n564\n00:20:45,445 --> 00:20:46,180\n>> Hm-hm.\n\n565\n00:20:46,180 --> 00:20:48,240\n>> But it doesn't know about that.\n\n566\n00:20:48,240 --> 00:20:51,030\nSo what we can do is,\nwe can put these back to take no action.\n\n567\n00:20:51,030 --> 00:20:52,729\nSo I'm just gonna stick them\nall into take no action.\n\n568\n00:20:54,360 --> 00:20:55,580\nAll right.\n\n569\n00:20:55,580 --> 00:20:59,790\nAnd we can go back to our hyper V manager,\nand\n\n570\n00:20:59,790 --> 00:21:03,290\nin our hyper V manager we can\nconfigure virtual machine monitoring.\n\n571\n00:21:03,290 --> 00:21:05,790\nAnd with virtual machine\nmonitoring we can tell it,\n\n572\n00:21:05,790 --> 00:21:08,690\nwhich services inside of\nthat VM are important.\n\n573\n00:21:08,690 --> 00:21:11,970\nAnd then the cluster,\ncan take action to correct for\n\n574\n00:21:11,970 --> 00:21:15,180\nthat, can take action to get\nthe system back up and healthy.\n\n575\n00:21:15,180 --> 00:21:20,510\nSo, all we have to do is [LAUGH]\nnormally we just.\n\n576\n00:21:20,510 --> 00:21:23,190\nDuring the break we'll have to figure it,\nthere we go.\n\n577\n00:21:23,190 --> 00:21:24,956\nMaybe I just have to do it vigorously.\n\n578\n00:21:24,956 --> 00:21:29,760\nWe can right click on the roll,\nand we can go to more actions.\n\n579\n00:21:29,760 --> 00:21:30,775\nThis one's kind of buried away.\n\n580\n00:21:30,775 --> 00:21:32,990\nMm-hm.\n>> We can go to more actions, and\n\n581\n00:21:32,990 --> 00:21:35,602\nyou'll see in here, configure monitoring.\n\n582\n00:21:35,602 --> 00:21:36,650\n> Mm-hm.\n>> All right?\n\n583\n00:21:36,650 --> 00:21:39,560\nAnd so, I'm gonna configure monitoring,\nand what it's gonna do is it's gonna look\n\n584\n00:21:39,560 --> 00:21:42,310\nat that virtual machine, and\nit's gonna say, all right,\n\n585\n00:21:42,310 --> 00:21:47,000\nwhat services do you have, and we can\ncheck off the services that are important.\n\n586\n00:21:47,000 --> 00:21:48,090\nAll right?\n\n587\n00:21:48,090 --> 00:21:50,900\nAny service that we pick,\nif that service stops for\n\n588\n00:21:50,900 --> 00:21:54,910\nany reason, the,\nthe fail over,cluster will do two things.\n\n589\n00:21:54,910 --> 00:21:57,510\nFirst, it will just try and\nrestart the service, right?\n\n590\n00:21:57,510 --> 00:22:00,140\nSo, it'll go ahead and give a shot,\nat starting that service up,\n\n591\n00:22:00,140 --> 00:22:01,800\njust like we saw in\nthe options a moment ago.\n\n592\n00:22:01,800 --> 00:22:02,970\nAll right\n>> Maybe the machine rebooted and\n\n593\n00:22:02,970 --> 00:22:04,330\nthe service didn't start up properly.\n\n594\n00:22:04,330 --> 00:22:05,310\n>> Yeah.\n>> It just needs to be\n\n595\n00:22:05,310 --> 00:22:06,610\nbooted, or restarted.\n\n596\n00:22:06,610 --> 00:22:09,060\n>> If it doesn't work, though,\nif it tries to restart it and\n\n597\n00:22:09,060 --> 00:22:10,020\nit fails-\n>> Mm-hm.\n\n598\n00:22:10,020 --> 00:22:14,200\n>> Then, the second thing it does is fails\nit over to another node in the cluster.\n\n599\n00:22:14,200 --> 00:22:14,840\n>> Nice.\n>> All right?\n\n600\n00:22:14,840 --> 00:22:17,570\nThat's something you can't do\nfrom within the node itself, or\n\n601\n00:22:17,570 --> 00:22:22,430\nfrom within the the guest VM, but here, we\ncan, so it'll fail over to the other node.\n\n602\n00:22:22,430 --> 00:22:23,430\nWell.\nOh, shoot.\n\n603\n00:22:23,430 --> 00:22:24,300\nI forgot.\n\n604\n00:22:24,300 --> 00:22:26,490\nYou know, before the show,\nMike, I told you.\n\n605\n00:22:26,490 --> 00:22:29,176\nI said, I'm gonna forget this,\nand then sure enough, I forgot.\n\n606\n00:22:29,176 --> 00:22:29,874\n>> [INAUDIBLE] firewall.\n\n607\n00:22:29,874 --> 00:22:30,382\n>> Yes.\n>> [LAUGH]\n\n608\n00:22:30,382 --> 00:22:31,122\n>> So I got\n\n609\n00:22:31,122 --> 00:22:33,140\nunable to retrieve a list of the services.\n\n610\n00:22:33,140 --> 00:22:35,910\nThere's a firewall rule that\nallows you to pull this list up,\n\n611\n00:22:35,910 --> 00:22:39,040\nand it's not turned on by default for\nwhatever reason.\n\n612\n00:22:39,040 --> 00:22:42,794\nSo let me, let me go and\npull up WEB01 here.\n\n613\n00:22:42,794 --> 00:22:47,550\nAnd we'll just have to go in and\nturn that on in the firewall.\n\n614\n00:22:47,550 --> 00:22:51,116\nSo let me pull up my firewall settings.\n\n615\n00:22:51,116 --> 00:22:54,950\n>> Nice little pre-built rule.\n\n616\n00:22:54,950 --> 00:22:58,360\n>> Yeah, you just go in and you choose\nallow an application through the firewall.\n\n617\n00:22:58,360 --> 00:22:59,380\nRight here.\n\n618\n00:22:59,380 --> 00:23:00,730\nAllow an app through the firewall.\n\n619\n00:23:00,730 --> 00:23:01,980\nAnd it's already got the rule.\n\n620\n00:23:01,980 --> 00:23:02,800\nIt's just not turned on.\n\n621\n00:23:02,800 --> 00:23:03,550\n>> Right.\n\n622\n00:23:03,550 --> 00:23:07,830\n>> So I can come down here and I can find\nvirtual machine monitoring right there,\n\n623\n00:23:07,830 --> 00:23:11,860\nand we just need to turn it on and we\nneed to choose where we want to allow it.\n\n624\n00:23:11,860 --> 00:23:15,010\nOh I guess I need to get my\nadministrator privileges.\n\n625\n00:23:15,010 --> 00:23:18,210\nThere, so I'm going to turn it on, and\nthen I need to choose, you know, domain,\n\n626\n00:23:18,210 --> 00:23:19,052\nprivate, or public.\n\n627\n00:23:19,052 --> 00:23:19,593\n>> Hm-hm.\n\n628\n00:23:19,593 --> 00:23:22,290\n>> [LAUGH] I'm assuming we\nchose domain on this one.\n\n629\n00:23:22,290 --> 00:23:23,180\nYou know, I, I.\n>> We don't remember.\n\n630\n00:23:23,180 --> 00:23:24,250\nI would do all three just to be safe.\n\n631\n00:23:24,250 --> 00:23:25,840\n>> There we go.\n>> Not a best practice for\n\n632\n00:23:25,840 --> 00:23:26,442\nthe real world, right?\n\n633\n00:23:26,442 --> 00:23:27,599\n>> [LAUGH]\n>> We're not telling you to do that.\n\n634\n00:23:27,599 --> 00:23:29,290\n[LAUGH]\n>> We, we set this server up so long ago,\n\n635\n00:23:29,290 --> 00:23:30,810\nI don't remember which network we chose,\n\n636\n00:23:30,810 --> 00:23:32,480\nI guess I could just go\ninto my network and share.\n\n637\n00:23:32,480 --> 00:23:33,720\nWe.\nWe'll do it right, Mike.\n\n638\n00:23:33,720 --> 00:23:36,660\n>> Yeah.\n>> We, we'll conform to, proper,\n\n639\n00:23:36,660 --> 00:23:38,030\npractices here.\n\n640\n00:23:38,030 --> 00:23:40,890\nAnd,\n>> Let's see if it,\n\n641\n00:23:40,890 --> 00:23:42,780\n>> Well, you know it's my-\n\n642\n00:23:42,780 --> 00:23:44,060\n>> Right click on your,\n\n643\n00:23:44,060 --> 00:23:45,163\n>> Well see there's my problem is I'm\n\n644\n00:23:45,163 --> 00:23:46,060\ntrying to right click.\n\n645\n00:23:46,060 --> 00:23:47,299\n>> You can't right click on that thing.\n\n646\n00:23:47,299 --> 00:23:49,622\n>> I guess I can go into my,\nnetworks and sharing.\n\n647\n00:23:49,622 --> 00:23:51,667\n>> Yeah, there you go.\n\n648\n00:23:51,667 --> 00:23:54,536\nI used to know the name of that console.\n\n649\n00:23:54,536 --> 00:23:55,081\n>> Here we go.\n\n650\n00:23:55,081 --> 00:23:57,630\nThis'll tell me what network it,\nit's a domain network, good.\n\n651\n00:23:57,630 --> 00:23:59,810\nPerfect.\nOkay so I really need to just turn on for\n\n652\n00:23:59,810 --> 00:24:01,270\nthe domain network, I'll turn that on.\n\n653\n00:24:01,270 --> 00:24:03,022\nLet me turn these other ones off.\n\n654\n00:24:03,022 --> 00:24:05,570\nAll right so I'll be on for the domain.\n\n655\n00:24:05,570 --> 00:24:08,240\n>> Obviously that was a lot of emails.\n\n656\n00:24:08,240 --> 00:24:09,380\n>> Yeah [LAUGH]\n>> You guys aren't following proper\n\n657\n00:24:09,380 --> 00:24:10,390\nsecurity preferences!\n\n658\n00:24:10,390 --> 00:24:15,050\n>> Well, yeah.\nAll right, so now that I've got that set,\n\n659\n00:24:15,050 --> 00:24:19,631\nI can go back in there and now we should\nbe able to configure that monitoring and\n\n660\n00:24:19,631 --> 00:24:23,563\n[LAUGH]\nand, yeah.\n\n661\n00:24:23,563 --> 00:24:26,520\n>> All right, so, let me just\n>> Connect to that guy again.\n\n662\n00:24:26,520 --> 00:24:28,280\n>> I tell you, it's killing me.\n\n663\n00:24:28,280 --> 00:24:29,930\nAll right, so\nI'm going to configure my monitoring.\n\n664\n00:24:29,930 --> 00:24:31,051\nAnd this time, there we go.\n\n665\n00:24:31,051 --> 00:24:31,551\n[CROSSTALK]\n>> Nice.\n\n666\n00:24:31,551 --> 00:24:33,094\n>> We get a nice big list of our services,\n\n667\n00:24:33,094 --> 00:24:33,902\nall right.\n>> Nice.\n\n668\n00:24:33,902 --> 00:24:34,622\n>> So we can go in here and\n\n669\n00:24:34,622 --> 00:24:36,162\nfind the services important to us.\nFor\n\n670\n00:24:36,162 --> 00:24:38,062\nme it's the world wide publishing service,\nso\n\n671\n00:24:38,062 --> 00:24:39,472\nI'm just going to check it off.\n>> Mm-hm.\n\n672\n00:24:39,472 --> 00:24:41,272\n>> And now the fail over cluster is\n\n673\n00:24:41,272 --> 00:24:43,560\ngoing to start watching for that service.\n\n674\n00:24:43,560 --> 00:24:47,170\nAnd it's gonna say alright, if I ever see\nthat service, crash, if it has an error,\n\n675\n00:24:47,170 --> 00:24:49,490\nif it fails, I'm gonna restart it.\n\n676\n00:24:49,490 --> 00:24:51,590\nAll right?\nAnd if it's happy again, great.\n\n677\n00:24:51,590 --> 00:24:53,490\nThat's it, we walk away, all right.\n\n678\n00:24:53,490 --> 00:24:54,790\nBut if I try to restart it and\n\n679\n00:24:54,790 --> 00:24:56,300\nit fails again,\n>> Right.\n\n680\n00:24:56,300 --> 00:24:57,560\n>> You know, I, I mean immediately, right\n>> Yeah.\n\n681\n00:24:57,560 --> 00:24:59,080\n>> If it immediately fails again,\n\n682\n00:24:59,080 --> 00:25:02,380\nthen will fail the whole\nguest over to another node.\n\n683\n00:25:02,380 --> 00:25:03,250\n>> Nice.\n\n684\n00:25:03,250 --> 00:25:03,870\n>> All right.\n\n685\n00:25:03,870 --> 00:25:05,850\nSo I'll just check it off and say okay.\n\n686\n00:25:05,850 --> 00:25:07,290\nAnd now, I'm monitoring that.\n\n687\n00:25:07,290 --> 00:25:08,130\n>> Beautiful.\n\n688\n00:25:08,130 --> 00:25:11,620\n>> So, you may want to turn on that on for\nyour virtual machines, for your VMs.\n\n689\n00:25:11,620 --> 00:25:13,975\nNow, with like DHCP,\nhere it's different right?\n\n690\n00:25:13,975 --> 00:25:14,740\n>> Mm-hm.\n>> That's not a VM,\n\n691\n00:25:14,740 --> 00:25:16,060\nthat's not a virtual machine.\n\n692\n00:25:16,060 --> 00:25:17,140\n>> Right.\n>> It knows that\n\n693\n00:25:17,140 --> 00:25:21,970\nDHCP is the most important thing\nin the world of this role, right?\n\n694\n00:25:21,970 --> 00:25:26,300\nBut with a VM, the fail over cluster\ndoesn't know what that VM's doing.\n\n695\n00:25:26,300 --> 00:25:27,490\nIt has no idea.\n\n696\n00:25:27,490 --> 00:25:28,610\nAnd so this is that extra step.\n\n697\n00:25:28,610 --> 00:25:29,240\nSorry Mike.\n>> And\n\n698\n00:25:29,240 --> 00:25:31,850\nwe would need to do\nthis to both VMs right?\n\n699\n00:25:31,850 --> 00:25:32,540\n>> Oh yeah, yeah.\n\n700\n00:25:32,540 --> 00:25:35,870\n>> Because if it fails over then you\nwant that one to be monitored and\n\n701\n00:25:35,870 --> 00:25:37,590\nmaking sure that it's\nlooking at that service.\n\n702\n00:25:37,590 --> 00:25:40,860\nSo it's not a global setting for\nall the VMs in the network.\n\n703\n00:25:40,860 --> 00:25:44,330\n>> Right so I would need to go\nto Web02 and do the same thing.\n\n704\n00:25:44,330 --> 00:25:47,330\n>> Turn off firewall and [INAUDIBLE]\n>> Yeah, and if had an FTP server, or\n\n705\n00:25:47,330 --> 00:25:49,600\ndatabase server or\nwhatever I need to go use them and\n\n706\n00:25:49,600 --> 00:25:53,040\npick the appropriate services.\n\n707\n00:25:53,040 --> 00:25:54,740\nAnd I'd need to convey\nthe firewall which I.\n\n708\n00:25:54,740 --> 00:25:57,928\n>> Yes. Yes. >> Again, I forgot that fast\nso [LAUGH], yeah, I always forget that.\n\n709\n00:25:57,928 --> 00:25:59,910\n>> [LAUGH]\n>> So, all right.\n\n710\n00:25:59,910 --> 00:26:01,020\n>> I like it.\n\n711\n00:26:01,020 --> 00:26:03,520\n>> So, those are some of\nthe things to keep an eye out for\n\n712\n00:26:03,520 --> 00:26:05,900\nwhen you're configuring individual roles,\nyou know?\n\n713\n00:26:05,900 --> 00:26:08,690\nJust some kind of uniqueness\nthat you see in some of these.\n\n714\n00:26:08,690 --> 00:26:10,015\nSome of the things you\nneed to watch out for.\n\n715\n00:26:10,015 --> 00:26:11,050\n>> Mm-hm, right, right.\n\n716\n00:26:11,050 --> 00:26:12,770\n>> Now we've got a lot more to\ntalk about in this episode, but\n\n717\n00:26:12,770 --> 00:26:14,530\nwe're running short on\ntime on this segment.\n\n718\n00:26:14,530 --> 00:26:16,300\nSo let's stop here and take a break.\n\n719\n00:26:16,300 --> 00:26:21,265\nAnd when we get back, we're gonna see some\nmore clustering excitement after this.\n\n720\n00:26:21,265 --> 00:26:28,117\n[MUSIC]\n\n721\n00:26:28,117 --> 00:26:29,777\n[SOUND] All right, welcome back everybody.\n\n722\n00:26:29,777 --> 00:26:33,329\nSo, couple other little points that\nwe wanna hit on as far as, well,\n\n723\n00:26:33,329 --> 00:26:35,672\nstuff we can do with failover clustering,.\n\n724\n00:26:35,672 --> 00:26:36,680\n>> Right.\n\n725\n00:26:36,680 --> 00:26:38,715\n>> Our,\nour grab bag of magic tricks, right?\n\n726\n00:26:38,715 --> 00:26:43,490\nSo a few other things that we,\nwe didn't touch on in other episodes.\n\n727\n00:26:43,490 --> 00:26:46,124\nEvery role that we create\nin the failover cluster,\n\n728\n00:26:46,124 --> 00:26:49,800\nso every entity that can be failed over\nhas some preferences as far as how\n\n729\n00:26:49,800 --> 00:26:53,496\nthat failover happens, and\nhow their startup happens, and all that.\n\n730\n00:26:53,496 --> 00:26:55,238\nSo let's take a look at that.\n\n731\n00:26:55,238 --> 00:26:57,508\nGoing back into my failover\ncluster manager here,\n\n732\n00:26:57,508 --> 00:26:59,100\nI'm just taking a look at my roles.\n\n733\n00:26:59,100 --> 00:27:03,920\nAnd basically if you take a look\nat them in their properties,\n\n734\n00:27:03,920 --> 00:27:08,990\nso I'm just gonna right-click and\ngo to properties.\n\n735\n00:27:08,990 --> 00:27:12,410\nYou'll see their preferences and\nthere's not a whole lot in here but\n\n736\n00:27:12,410 --> 00:27:14,590\nthese are pretty important options.\n\n737\n00:27:14,590 --> 00:27:18,595\nThe main one here under the general tab,\nwe'll see the preferred owner.\n\n738\n00:27:18,595 --> 00:27:19,390\n>> Right.\n>> And\n\n739\n00:27:19,390 --> 00:27:22,910\nthe preferred owner means when we\nstart this role the first time,\n\n740\n00:27:22,910 --> 00:27:24,820\nWhat node do we start it on, right?\n\n741\n00:27:24,820 --> 00:27:25,700\nWe may not care, alright.\n\n742\n00:27:25,700 --> 00:27:26,650\nA lot of times we don't.\n\n743\n00:27:26,650 --> 00:27:28,870\nAnd that's what I'm saying here\nby not having anything checked.\n\n744\n00:27:28,870 --> 00:27:31,310\nThat means I don't care\nwhat node it starts on.\n\n745\n00:27:31,310 --> 00:27:34,990\nBut for one reason or another,\nyou might have a preference and say, like,\n\n746\n00:27:34,990 --> 00:27:38,290\nhey when this VM starts, I really want\nit to start on node number seven.\n\n747\n00:27:38,290 --> 00:27:39,160\n>> Right.\n\n748\n00:27:39,160 --> 00:27:41,805\n>> And that way you have some reasonable\nexpectation of where it should be.\n\n749\n00:27:41,805 --> 00:27:44,080\n>> Mm-hm.\n>> And if you ever see it on another node,\n\n750\n00:27:44,080 --> 00:27:45,860\nyou can say,\nwell that means a problem happened.\n\n751\n00:27:45,860 --> 00:27:46,430\nRight?\n>> Yep.\n\n752\n00:27:46,430 --> 00:27:47,765\n>> Cuz it should have\nstarted on node seven.\n\n753\n00:27:47,765 --> 00:27:48,670\n>> Mm-hm.\n\n754\n00:27:48,670 --> 00:27:50,660\n>> So you can influence that.\n\n755\n00:27:50,660 --> 00:27:52,575\nAnd you can check off more than one?\n\n756\n00:27:52,575 --> 00:27:53,767\n>> Yeah, it's an ordered list, right?\n\n757\n00:27:53,767 --> 00:27:57,945\nSo, if it'll fail to the first preferred\nin there, and if it fails again,\n\n758\n00:27:57,945 --> 00:28:00,225\nit'll go to the next one on the list,\nand so on and so forth.\n\n759\n00:28:00,225 --> 00:28:01,725\n>> Yep.\nAnd that's why you've got the up\n\n760\n00:28:01,725 --> 00:28:02,625\ndown buttons over here.\n\n761\n00:28:02,625 --> 00:28:05,124\nSo you can re-arrange them to\nmatch whatever order you want.\n\n762\n00:28:05,124 --> 00:28:06,990\nRight.\n\n763\n00:28:06,990 --> 00:28:09,230\nWe'll also see things like the priority.\n\n764\n00:28:09,230 --> 00:28:13,610\nAnd the priority is just saying,\nwhen this server starts up, so\n\n765\n00:28:13,610 --> 00:28:16,800\nlet, let's say node one and\nso server one here.\n\n766\n00:28:16,800 --> 00:28:21,750\nMaybe I've got ten different rolls\nthat are all set to start on node one.\n\n767\n00:28:21,750 --> 00:28:25,534\nWell, when node one boots up, it's going\nto be kind of busy [CROSSTALK] trying to\n\n768\n00:28:25,534 --> 00:28:27,123\nstart ten roles at the same time.\n\n769\n00:28:27,123 --> 00:28:29,712\nSo we can set up priority for\ntheir boot order.\n\n770\n00:28:29,712 --> 00:28:32,890\nYou can say no autostart,\nwhich is don't start at all,\n\n771\n00:28:32,890 --> 00:28:37,160\nwhere you have to manually start them,\nor low, medium, and high.\n\n772\n00:28:37,160 --> 00:28:39,450\nThe high priority ones will start first.\n\n773\n00:28:39,450 --> 00:28:41,280\nWhen they're done,\nthe medium ones will start, and\n\n774\n00:28:41,280 --> 00:28:43,090\nthen when they're done the low will start.\n\n775\n00:28:44,830 --> 00:28:45,700\nAll right.\n\n776\n00:28:45,700 --> 00:28:48,190\nUsually I don't worry about these\nsettings too terribly much.\n\n777\n00:28:48,190 --> 00:28:49,835\nThe default just, kinda, sorts it out.\n\n778\n00:28:49,835 --> 00:28:51,330\n>> Mm-hm.\n>> But, if you've got mission-critical\n\n779\n00:28:51,330 --> 00:28:54,380\nservers, you do wanna flag them as\nhigh-priority so they start first.\n\n780\n00:28:54,380 --> 00:28:55,170\n>> Right.\n\n781\n00:28:55,170 --> 00:28:58,510\n>> If you have domain controllers,\nthen you usually wan them to start first.\n\n782\n00:28:58,510 --> 00:28:59,850\n>> Right.\n>> Because the other services\n\n783\n00:28:59,850 --> 00:29:00,400\ndepend on them.\n\n784\n00:29:00,400 --> 00:29:01,480\n>> They rely on that, yep.\n\n785\n00:29:01,480 --> 00:29:03,290\n>> Yep.\nAnd the other thing is if you have IScuzzy\n\n786\n00:29:03,290 --> 00:29:03,875\nstorage.\n\n787\n00:29:03,875 --> 00:29:08,930\nYour performance is going to be so\npoor you know, that you pretty much\n\n788\n00:29:08,930 --> 00:29:11,780\nneed to use priorities because if you try\nand start of all the VM's at the same\n\n789\n00:29:11,780 --> 00:29:15,152\ntime it will take half an hour for\nVM to start yeah it can be really bad.\n\n790\n00:29:15,152 --> 00:29:18,500\n>> [LAUGH]\n>> All right the other tab we have here is\n\n791\n00:29:18,500 --> 00:29:23,630\nfail over and\nthis is how we dictate when a virtual role\n\n792\n00:29:23,630 --> 00:29:26,660\nfails over from one\nphysical node to another.\n\n793\n00:29:26,660 --> 00:29:30,860\nAnd so you'll see here like,\nmaximum failures in a specified period.\n\n794\n00:29:30,860 --> 00:29:34,540\nIf we have a failure, the default\nis after one failure, flip over.\n\n795\n00:29:34,540 --> 00:29:35,490\nFlip over to the other network.\n\n796\n00:29:36,730 --> 00:29:40,790\nAnd that's one failure,\nwithin, six hours, okay.\n\n797\n00:29:40,790 --> 00:29:43,670\nWe can bump this up to say like,\nthree failures.\n\n798\n00:29:43,670 --> 00:29:44,660\nIf we say three failures,\n\n799\n00:29:44,660 --> 00:29:48,165\nthen what it's gonna do is, the first time\nit fails it tries to restart the servers.\n\n800\n00:29:48,165 --> 00:29:49,680\n>> Mh-hm\n>> The second time it fails it tries to\n\n801\n00:29:49,680 --> 00:29:50,895\nrestart the servers again.\n\n802\n00:29:50,895 --> 00:29:52,470\n>> Mh-hm\n>> The third time it fails it tries to\n\n803\n00:29:52,470 --> 00:29:55,720\nrestart the servers again, and then it\ninitiates a failover to another node,\n\n804\n00:29:55,720 --> 00:29:59,490\nso we can kind of tweak\nthat on a per role basis.\n\n805\n00:29:59,490 --> 00:30:00,620\nIt's not a global setting, right?\n\n806\n00:30:00,620 --> 00:30:01,640\nIt's on each role.\n\n807\n00:30:03,320 --> 00:30:06,760\nAnd you can also set whether\nyou want fallback, all right?\n\n808\n00:30:06,760 --> 00:30:08,030\nOur failback.\n>> Failback yeah,\n\n809\n00:30:08,030 --> 00:30:09,155\nback to that preferred owner.\n\n810\n00:30:09,155 --> 00:30:11,050\n>> Mm-hm.\n>> Yeah, if you, if you choose to.\n\n811\n00:30:11,050 --> 00:30:13,470\n>> Yeah.\nIf we chose it to start on node one, and\n\n812\n00:30:13,470 --> 00:30:16,330\nwe boot up on node one, and\nnode one is happy and healthy, and\n\n813\n00:30:16,330 --> 00:30:17,490\nthen node one fails.\n\n814\n00:30:17,490 --> 00:30:20,320\nSo our roll jumps over to node two.\n\n815\n00:30:20,320 --> 00:30:24,790\nWell the default is, when node one\ncomes back up, we stay on node two.\n\n816\n00:30:24,790 --> 00:30:26,020\n>> Right.\n>> We're happy over there\n\n817\n00:30:26,020 --> 00:30:26,664\nwhy, why come back?\n\n818\n00:30:26,664 --> 00:30:28,010\n>> [INAUDIBLE]\n>> Yeah.\n\n819\n00:30:28,010 --> 00:30:30,960\nSo, it's up to us to fail back if we want,\nbut\n\n820\n00:30:30,960 --> 00:30:34,660\nyou can set it to allow fail back and\nyou can specify when.\n\n821\n00:30:34,660 --> 00:30:38,680\nDo we automatically fail back just as soon\nas node wants to help me again, go in and\n\n822\n00:30:38,680 --> 00:30:41,450\nstart moving nodes back or\nmoving roles back to it?\n\n823\n00:30:41,450 --> 00:30:45,820\nOr do we say, fall back between,\na certain you know,\n\n824\n00:30:45,820 --> 00:30:51,410\ntime that we can put in here so you know,\nbetween three and four hours or whatever.\n\n825\n00:30:51,410 --> 00:30:53,090\nTo specify how long we wanna wait for\n\n826\n00:30:53,090 --> 00:30:56,130\nthat node to become healthy again\nto fail back and, and get to it.\n\n827\n00:30:56,130 --> 00:30:58,510\n>> Right.\n>> So you do have some flexibility there.\n\n828\n00:30:58,510 --> 00:31:00,555\nNotice that the default\nis to prevent fail back.\n\n829\n00:31:00,555 --> 00:31:01,070\n>> Mm-hm.\n\n830\n00:31:01,070 --> 00:31:05,820\n>> That means if a node fails, and you\nbring that node healthy again, no roles\n\n831\n00:31:05,820 --> 00:31:09,010\nare going to jump to it, unless you\nhave some other failure on your network.\n\n832\n00:31:09,010 --> 00:31:11,900\nSo you have to manually move\nroles back to it by default.\n\n833\n00:31:12,980 --> 00:31:14,300\nYou can overwrite that right here.\n\n834\n00:31:14,300 --> 00:31:14,800\n>> Nice.\n\n835\n00:31:15,860 --> 00:31:18,349\n>> Alright, so those are some of\nthe other bells and whistles there.\n\n836\n00:31:19,420 --> 00:31:22,700\nAnother one that is called on\nthe objectives is not one that we\n\n837\n00:31:22,700 --> 00:31:25,250\nhave to configure but\none that we need to be aware of.\n\n838\n00:31:25,250 --> 00:31:31,060\nIn Windows server 2012 R2,\nwe have what's called guest clustering.\n\n839\n00:31:31,060 --> 00:31:31,830\nAll right?\n>> Mm-hm.\n\n840\n00:31:31,830 --> 00:31:34,060\n>> What we're seeing\nhere is host clustering.\n\n841\n00:31:34,060 --> 00:31:36,665\nUnder our nodes, here's two hosts.\n\n842\n00:31:36,665 --> 00:31:39,090\nITProTV Server 1 and Server 2.\n\n843\n00:31:39,090 --> 00:31:40,314\nThese are physical machines,\n\n844\n00:31:40,314 --> 00:31:43,286\nphysical servers that are running in\nanother room in the building with us.\n\n845\n00:31:43,286 --> 00:31:44,990\nActually, where are those?\n\n846\n00:31:44,990 --> 00:31:46,654\n>> Behind the wall over there, I think.\n\n847\n00:31:46,654 --> 00:31:47,291\n>> They might be over there.\n\n848\n00:31:47,291 --> 00:31:48,349\nThey might not actually be in this room.\n\n849\n00:31:48,349 --> 00:31:49,230\nI don't know where they.\n\n850\n00:31:49,230 --> 00:31:51,273\n>> [LAUGH] So, but\nthey are two physical boxes, right?\n\n851\n00:31:51,273 --> 00:31:52,225\nNate set them up.\n\n852\n00:31:52,225 --> 00:31:56,197\n[LAUGH] [CROSSTALK] They're\ndefinitely done wrong.\n\n853\n00:31:56,197 --> 00:32:00,240\n[LAUGH] So, there's two servers,\nand they're physical boxes, and\n\n854\n00:32:00,240 --> 00:32:03,739\nwe're doing a fail over,\ncuz that's what we normally do.\n\n855\n00:32:03,739 --> 00:32:05,340\n>> Mm-hm.\n>> All right.\n\n856\n00:32:05,340 --> 00:32:09,620\nSo normally fail over clusters are limited\nto the world of physical servers and\n\n857\n00:32:09,620 --> 00:32:11,335\nthen we run these virtual\nrolls on top of them.\n\n858\n00:32:11,335 --> 00:32:12,010\n>> Mm-hm.\n\n859\n00:32:12,010 --> 00:32:15,580\n>> But in Windows Server 2012 R2,\nyou could do it in 2012 also.\n\n860\n00:32:15,580 --> 00:32:17,500\n>> Right.\n>> But they specifically taught out for\n\n861\n00:32:17,500 --> 00:32:20,600\nR2 we can do guest clustering.\n\n862\n00:32:20,600 --> 00:32:22,920\nAnd what that means is if I really wanted\n>> Mm-hm.\n\n863\n00:32:22,920 --> 00:32:28,290\n>> I could do Web 01 and Web 02, and I can\nset up a fail over cluster between them.\n\n864\n00:32:28,290 --> 00:32:30,760\n>> Right.\n>> And then they could host\n\n865\n00:32:30,760 --> 00:32:32,995\nfail over cluster roles on top of that.\n\n866\n00:32:32,995 --> 00:32:35,234\n>> Mm-hm.\n>> So I'm starting to nest deep, right?\n\n867\n00:32:35,234 --> 00:32:37,400\n>> [LAUGH] So\nnow we got a virtual cluster.\n\n868\n00:32:37,400 --> 00:32:38,250\nNice.\n>> Now\n\n869\n00:32:38,250 --> 00:32:39,965\nyou might ask yourself why\nyou'd want to do that.\n\n870\n00:32:39,965 --> 00:32:41,100\n>> Mm-hm.\n\n871\n00:32:41,100 --> 00:32:42,310\n>> There's two real scenarios, right?\n\n872\n00:32:42,310 --> 00:32:45,710\nThere's the scenario I use,\nwhich is testing in practice, right?\n\n873\n00:32:45,710 --> 00:32:47,610\n>> Right.\n>> Maybe you want to learn clustering, but\n\n874\n00:32:47,610 --> 00:32:49,570\nyou don't have two servers laying around.\n\n875\n00:32:49,570 --> 00:32:50,440\n>> Right.\n>> Or you don't want to go and\n\n876\n00:32:50,440 --> 00:32:52,070\nbuy two machines and tie them up for this.\n\n877\n00:32:52,070 --> 00:32:53,765\nYou don't want to run server\nas your host OS, right?\n\n878\n00:32:53,765 --> 00:32:54,750\n>> Mm-hm.\n\n879\n00:32:54,750 --> 00:32:57,300\n>> So\nyou could fire up Hyper-V on Windows 8.\n\n880\n00:32:57,300 --> 00:32:58,180\nIf we wanted.\n\n881\n00:32:58,180 --> 00:33:02,560\nAnd create two VMs, and\nadd the fail over cluster role to them, or\n\n882\n00:33:02,560 --> 00:33:04,970\nthe cl, fail over cluster role to them.\n\n883\n00:33:04,970 --> 00:33:07,380\n>> Right.\n>> And, I don't know, feature, fea?\n\n884\n00:33:07,380 --> 00:33:08,120\n>> Feature.\n>> Fea, right.\n\n885\n00:33:08,120 --> 00:33:09,353\nSo, a failover cluster feature.\n\n886\n00:33:09,353 --> 00:33:10,930\n>> [LAUGH]\n>> I'll get it right soon.\n\n887\n00:33:10,930 --> 00:33:13,590\nAnd have them build a failover\ncluster in your virtual environment.\n\n888\n00:33:13,590 --> 00:33:14,350\nIt's great for learning.\n\n889\n00:33:14,350 --> 00:33:17,445\nYou can practice, experiment with it,\nand get a real chance to learn it.\n\n890\n00:33:17,445 --> 00:33:18,110\n>> Mh-hm.\n\n891\n00:33:18,110 --> 00:33:19,140\n>> That's one reason.\n\n892\n00:33:19,140 --> 00:33:19,840\nAlright.\n\n893\n00:33:19,840 --> 00:33:21,800\nBut there is another reason.\n\n894\n00:33:21,800 --> 00:33:27,485\nWhen we have a node fail, alright,\nso let's say node one fails.\n\n895\n00:33:27,485 --> 00:33:28,220\n>> Mh-hm.\n\n896\n00:33:28,220 --> 00:33:32,080\n>> If it was hosting a virtual machine,\nthe virtual machine actually,\n\n897\n00:33:32,080 --> 00:33:33,110\nturns off, right?\n\n898\n00:33:33,110 --> 00:33:33,900\n>> Right.\n\n899\n00:33:33,900 --> 00:33:37,935\n>> And then what happens is, node two says\nour outtake over that virtual machine.\n\n900\n00:33:37,935 --> 00:33:39,740\n>> Mm-hm.\n>> And what it's gotta do is it's gotta\n\n901\n00:33:39,740 --> 00:33:41,420\nboot up that VM.\n\n902\n00:33:41,420 --> 00:33:43,385\nSo the fail over time between the two.\n\n903\n00:33:43,385 --> 00:33:45,170\n>> Mm-hm.\n>> It's actually gonna take a moment.\n\n904\n00:33:45,170 --> 00:33:49,400\nIt's gonna take some time because it's\ngot to basically boot that VM up.\n\n905\n00:33:49,400 --> 00:33:51,854\nSo whatever the boot time for\nthe VM is that's what your downtime.\n\n906\n00:33:51,854 --> 00:33:52,710\n>> Mm-hm.\n\n907\n00:33:52,710 --> 00:33:54,930\n>> When we talk about high availability.\n\n908\n00:33:54,930 --> 00:33:55,960\n>> Right\n>> Well\n\n909\n00:33:55,960 --> 00:33:58,320\nit's hard to say you're high available,\nor highly available,\n\n910\n00:33:58,320 --> 00:34:00,800\nwhen you've got like a three minute\nreboot time when a VM fails.\n\n911\n00:34:00,800 --> 00:34:03,605\n>> Yeah that's bringing you down to\nfive ems or less already, just for one.\n\n912\n00:34:03,605 --> 00:34:04,300\n>> Mm-hm.\n\n913\n00:34:04,300 --> 00:34:09,740\nSo what we can do is we can have Web\n01 running on one physical node, and\n\n914\n00:34:09,740 --> 00:34:13,100\nWeb 02 running on the other physical node,\nwhich actually we already have, right?\n\n915\n00:34:13,100 --> 00:34:14,920\nSo we have one on server one and\none on server two.\n\n916\n00:34:14,920 --> 00:34:15,550\n>> Right.\n\n917\n00:34:15,550 --> 00:34:19,270\n>> And then they could run failover\nclustering between each other and\n\n918\n00:34:19,270 --> 00:34:22,690\nhave a service that was being\nprovided in their cluster.\n\n919\n00:34:22,690 --> 00:34:26,350\nAnd now if one node fails and\nwe lose ITPROTVWEB01,\n\n920\n00:34:27,500 --> 00:34:30,700\nwell ITPROTVWEB02 is still running,\n\n921\n00:34:30,700 --> 00:34:32,950\nit's in that virtual failover cluster\n>> Mm-hm.\n\n922\n00:34:32,950 --> 00:34:35,190\n>> And it's up and\nnow there's zero down time.\n\n923\n00:34:35,190 --> 00:34:37,400\n>> Nice.\n>> We have immediate failover\n\n924\n00:34:37,400 --> 00:34:38,095\nwithout a boot up.\n\n925\n00:34:38,095 --> 00:34:41,010\n>> Mm-hm.\n>> Right, so if we wanna be like super\n\n926\n00:34:41,010 --> 00:34:44,730\nhighly available, then we end up nesting\nthat failover cluster like this.\n\n927\n00:34:44,730 --> 00:34:48,940\nNow, you don't need that for\nDHEP and FileServe or whatever,\n\n928\n00:34:48,940 --> 00:34:50,160\nit's already handling that.\n\n929\n00:34:50,160 --> 00:34:52,520\nIt's really just virtual\nmachines that need it.\n\n930\n00:34:52,520 --> 00:34:53,604\nWhen you've got VMs.\n\n931\n00:34:53,604 --> 00:34:54,240\n>> Mm-hm.\n\n932\n00:34:54,240 --> 00:34:57,490\n>> The VMs themselves require\na reboot when they fail over,when\n\n933\n00:34:57,490 --> 00:34:58,554\nit's not a live migration, right?\n\n934\n00:34:58,554 --> 00:34:59,815\n>> [CROSSTALK] Yeah.\n>> When it's because of an error.\n\n935\n00:34:59,815 --> 00:35:00,510\n>> Yap.\n>> And so\n\n936\n00:35:00,510 --> 00:35:03,400\ndoing a virtual machine cluster,\nkinda, gets us around that.\n\n937\n00:35:03,400 --> 00:35:03,900\n>> Nice.\n\n938\n00:35:04,990 --> 00:35:05,740\n>> That being said-\n>> Mm-hm.\n\n939\n00:35:05,740 --> 00:35:07,842\n>> Now that I've talked about it,\nI would never do that.\n\n940\n00:35:07,842 --> 00:35:10,370\n[LAUGH]\n>> [CROSSTALK] Would you ever use this, or\n\n941\n00:35:10,370 --> 00:35:11,280\nwould you take, I mean,\n\n942\n00:35:11,280 --> 00:35:15,440\nI, I'm imagining, taking, say, five nodes,\nrunning virtual machines I could have,\n\n943\n00:35:15,440 --> 00:35:19,345\nsay, ten of each, ten virtual\nmachines on each one of those nodes.\n\n944\n00:35:19,345 --> 00:35:20,830\n>> Mm-hm.\n>> So I got fifty virtual machines that I\n\n945\n00:35:20,830 --> 00:35:24,710\ncould set up in a cluster, but\ndo I really gain anything by doing that?\n\n946\n00:35:24,710 --> 00:35:27,260\nBecause one node goes down,\nI lose ten of 'em, right.\n\n947\n00:35:27,260 --> 00:35:30,655\n>> Yeah, what I would do, especially in\na scenario like this with web servers.\n\n948\n00:35:30,655 --> 00:35:32,080\n>> Mm-hm.\n>> Is, you go ahead and\n\n949\n00:35:32,080 --> 00:35:33,400\ncreate more than one web server.\n\n950\n00:35:33,400 --> 00:35:36,200\nSo you got more than one\nvirtual web server running.\n\n951\n00:35:36,200 --> 00:35:37,500\n>> Right.\n>> And then you're just like network load\n\n952\n00:35:37,500 --> 00:35:38,840\nbalancing across them, right?\n\n953\n00:35:38,840 --> 00:35:42,320\nOr a hardware, like a F5 big IP box or\n\n954\n00:35:42,320 --> 00:35:44,510\nsomething like that to\ndo the load balancing.\n\n955\n00:35:44,510 --> 00:35:47,294\nAnd they're intelligent load balancers,\nthey'll know if a node goes down.\n\n956\n00:35:47,294 --> 00:35:48,320\n>> Right.\n>> And if a node,\n\n957\n00:35:48,320 --> 00:35:51,445\nthen just direct people to another one so\nthere's no cluster piece needed.\n\n958\n00:35:51,445 --> 00:35:51,950\n>> Mm-hm.\n>> So\n\n959\n00:35:51,950 --> 00:35:54,762\nyou're not doing a fail over cluster\non top of a fail over cluster.\n\n960\n00:35:54,762 --> 00:35:56,940\n>> All right.\n>> You're doing a fail over cluster and\n\n961\n00:35:56,940 --> 00:35:58,585\nusing a load balancer\nto direct the traffic.\n\n962\n00:35:58,585 --> 00:36:00,625\n>> Right.\n>> In a production,\n\n963\n00:36:00,625 --> 00:36:03,375\nreal-world high traffic environment,\nthat's what you're going to do.\n\n964\n00:36:03,375 --> 00:36:04,010\n>> Right.\n\n965\n00:36:04,010 --> 00:36:06,510\n>> But if you're a small business,\nthose load balancers are expensive.\n\n966\n00:36:06,510 --> 00:36:07,134\nThey're complex.\n\n967\n00:36:07,134 --> 00:36:08,280\n>> Mm-hm.\n>> Running a fail over\n\n968\n00:36:08,280 --> 00:36:13,820\ncluster on top of a fail over cluster\nkind of solves that, that problem.\n\n969\n00:36:13,820 --> 00:36:15,750\n>> Very nice.\nGood to have the option.\n\n970\n00:36:15,750 --> 00:36:17,240\n>> Yeah.\n\n971\n00:36:17,240 --> 00:36:20,084\nThere are some open source, shouldn't\ntalk about it on a Microsoft show.\n\n972\n00:36:20,084 --> 00:36:22,060\n[LAUGH] Microsoft's gonna hunt me down.\n\n973\n00:36:22,060 --> 00:36:24,820\nThere are like, open source load\nbalancers out there that work great, and\n\n974\n00:36:24,820 --> 00:36:27,840\nthere's CARP, and there's other\nsolutions like that that are out there.\n\n975\n00:36:27,840 --> 00:36:29,845\n>> Right.\n>> That, that make this not so attractive.\n\n976\n00:36:29,845 --> 00:36:32,120\n>> Mm-hm.\n>> But, they caught on in the objectives.\n\n977\n00:36:32,120 --> 00:36:33,760\n>> Yep.\n>> So be aware that you can do it.\n\n978\n00:36:33,760 --> 00:36:38,070\nYou can run a fail over cluster\nbetween your VMs Even if those VMs\n\n979\n00:36:38,070 --> 00:36:41,320\nare hosted on top of a fail over\ncluster themselves so you can nest it.\n\n980\n00:36:41,320 --> 00:36:42,170\n>> Right.\n\n981\n00:36:42,170 --> 00:36:43,050\nNice.\n\n982\n00:36:43,050 --> 00:36:43,550\n>> So.\nAll right.\n\n983\n00:36:45,060 --> 00:36:46,545\nSpeaking of virtual machines.\n\n984\n00:36:46,545 --> 00:36:47,430\n>> Uh-huh.\n>> Right?\n\n985\n00:36:47,430 --> 00:36:48,980\nThere were a lot of little bells and\n\n986\n00:36:48,980 --> 00:36:51,440\nwhistles that we really didn't\ncover with virtual machines.\n\n987\n00:36:51,440 --> 00:36:53,620\nWe created some VMS and\nwe showed how that worked.\n\n988\n00:36:53,620 --> 00:36:56,330\n>> Set it up. Mm-hm. >> But there's some\nneat advanced functions that we can make\n\n989\n00:36:56,330 --> 00:36:57,640\nuse of.\n\n990\n00:36:57,640 --> 00:36:58,180\n>> All right.\n\n991\n00:36:58,180 --> 00:37:02,860\n>> One that I like, I know in the show, we\ntalked about how we could take a server,\n\n992\n00:37:02,860 --> 00:37:04,910\na virtual machine like this one,\n>> Right.\n\n993\n00:37:04,910 --> 00:37:07,070\n>> And we could do a live migration,\nright?\n\n994\n00:37:07,070 --> 00:37:08,755\n>> Yeah.\n>> Then we could right click on it, and\n\n995\n00:37:08,755 --> 00:37:09,375\ngo to Move.\n\n996\n00:37:10,575 --> 00:37:13,630\nAnd do a live or a quick migration\nto jump it over to another node.\n\n997\n00:37:13,630 --> 00:37:15,395\n>> Mm-hm.\n>> And we did that during this show,\n\n998\n00:37:15,395 --> 00:37:16,450\nyou know, we pinged it.\n\n999\n00:37:16,450 --> 00:37:17,085\n>> Mm-hm.\n\n1000\n00:37:17,085 --> 00:37:18,795\n>> And I don't know [CROSSTALK]\n>> lost one ping maybe, yeah.\n\n1001\n00:37:18,795 --> 00:37:20,505\n>> we lost one,\nmaybe two pings something so, so\n\n1002\n00:37:20,505 --> 00:37:22,182\nyou know really good availability there.\n\n1003\n00:37:22,182 --> 00:37:24,730\n>> Mm-hm.\n>> What we didn't show was this\n\n1004\n00:37:24,730 --> 00:37:25,685\nthird option right here.\n\n1005\n00:37:25,685 --> 00:37:26,260\n>> Mm-hm.\n\n1006\n00:37:26,260 --> 00:37:29,455\n>> Which is you can move\nthe virtual machine storage.\n\n1007\n00:37:29,455 --> 00:37:30,530\n>> Mm-hm.\n>> All right,\n\n1008\n00:37:30,530 --> 00:37:32,550\nnow why would I want to move the storage?\n\n1009\n00:37:32,550 --> 00:37:35,050\nIf I've got shared storage\nalready why would I ever need.\n\n1010\n00:37:35,050 --> 00:37:35,760\nNeed to move it.\n\n1011\n00:37:35,760 --> 00:37:37,220\n>> Right.\n>> And, for most people,\n\n1012\n00:37:37,220 --> 00:37:38,780\nyou really wouldn't, right?\n\n1013\n00:37:38,780 --> 00:37:42,870\nThat virtual machine's storage,\nif it's a cluster-stored volume,\n\n1014\n00:37:42,870 --> 00:37:43,825\nall your nodes see it.\n\n1015\n00:37:43,825 --> 00:37:45,250\n>> Mm-hm.\n>> So when you have fail over the VM,\n\n1016\n00:37:45,250 --> 00:37:47,870\nthe other nodes see it, so\nthere's not really a reason to move it.\n\n1017\n00:37:47,870 --> 00:37:48,460\n>> Right.\n\n1018\n00:37:48,460 --> 00:37:51,730\n>> Well, there's really two\nscenarios where we would move it.\n\n1019\n00:37:51,730 --> 00:37:55,065\nScenario number one is\nWhat if you buy a new SAN?\n\n1020\n00:37:55,065 --> 00:37:56,190\n>> Mm-hm.\n\n1021\n00:37:56,190 --> 00:37:58,460\n>> Your Storage Area Network\nis getting old.\n\n1022\n00:37:58,460 --> 00:38:01,130\n>> Right.\n>> And so it's reaching that point where\n\n1023\n00:38:01,130 --> 00:38:03,805\nyou can't trust the hard drives anymore,\nso you buy a new SAN.\n\n1024\n00:38:03,805 --> 00:38:05,510\n>> Mm-hm.\n>> And you install it and\n\n1025\n00:38:05,510 --> 00:38:06,880\nyou get it up and going.\n\n1026\n00:38:06,880 --> 00:38:09,490\nNow you need to move your virtual\nmachine storage over to the new SAN.\n\n1027\n00:38:09,490 --> 00:38:10,260\n>> Right.\n>> Right?\n\n1028\n00:38:10,260 --> 00:38:11,340\nSo that's one scenario.\n\n1029\n00:38:11,340 --> 00:38:14,190\nNot so much talking about high\navailability or whatever,\n\n1030\n00:38:14,190 --> 00:38:15,625\njust moving that storage.\n\n1031\n00:38:15,625 --> 00:38:16,620\n>> Mm-hm.\n>> Right?\n\n1032\n00:38:16,620 --> 00:38:22,020\nThe other scenario is,\nthis might be a stand alone VM that\n\n1033\n00:38:22,020 --> 00:38:25,322\nwe're importing into a high available\nHighly available VM, right?\n\n1034\n00:38:25,322 --> 00:38:25,990\n>> Mm-hm.\n\n1035\n00:38:25,990 --> 00:38:28,830\n>> We haven't seen that scenario yet and\nI want to push that off until a little bit\n\n1036\n00:38:28,830 --> 00:38:30,620\nlater in the episode so\nit doesn't get too confusing.\n\n1037\n00:38:30,620 --> 00:38:31,220\n>> Right.\n\n1038\n00:38:31,220 --> 00:38:34,855\n>> Well, let's just focus on the idea\nof moving the storage for a new SAN.\n\n1039\n00:38:34,855 --> 00:38:35,430\n>> Mm-hm.\n\n1040\n00:38:35,430 --> 00:38:36,170\nOkay.\n>> Okay?\n\n1041\n00:38:36,170 --> 00:38:37,755\nSo I go out and I buy a new SAN.\n\n1042\n00:38:37,755 --> 00:38:38,360\n>> Mm-hm.\n\n1043\n00:38:38,360 --> 00:38:41,420\n>> And I get it hooked up to my server and\nI get my server mapped to it and\n\n1044\n00:38:41,420 --> 00:38:42,860\nI've kind of already done some of this.\n\n1045\n00:38:42,860 --> 00:38:46,300\nBy going to my discs, right now\nI've got a cluster shared volume,\n\n1046\n00:38:46,300 --> 00:38:46,975\nthis guy right here.\n\n1047\n00:38:46,975 --> 00:38:47,740\n>> Mm-hm.\n\n1048\n00:38:47,740 --> 00:38:53,810\n>> And this is the one that is hosting the\nvirtual machines, the IT Pro TV 2 Web01,\n\n1049\n00:38:53,810 --> 00:38:56,305\nit's actually run right here off\nof this cluster share volume.\n\n1050\n00:38:56,305 --> 00:38:56,840\n>> Mm-hm.\n\n1051\n00:38:56,840 --> 00:38:57,400\n>> Right?\n\n1052\n00:38:57,400 --> 00:39:00,380\nWell I bought my new San,\nand I got it hooked up, and\n\n1053\n00:39:00,380 --> 00:39:02,225\nI created a cluster shared volume for it.\n\n1054\n00:39:02,225 --> 00:39:03,160\n>> Mm-hm.\n>> Right?\n\n1055\n00:39:03,160 --> 00:39:04,080\nOh, do I have 'em backwards?\n\n1056\n00:39:04,080 --> 00:39:04,799\nOh, I do, I have 'em backwards.\n\n1057\n00:39:06,030 --> 00:39:09,370\nI know because when I click on Disc 4,\nI see how I can see the space he used?\n\n1058\n00:39:09,370 --> 00:39:13,280\nBut when I click on Disc 3 it's empty,\nso, Disc 3 is the new one.\n\n1059\n00:39:13,280 --> 00:39:14,620\n>> Huh.\n\n1060\n00:39:14,620 --> 00:39:19,100\n>> So I've got these discs in place and\nthey're there.\n\n1061\n00:39:19,100 --> 00:39:19,930\nI see it.\n\n1062\n00:39:19,930 --> 00:39:23,209\nI can create some new VMs and\nstick 'em in there and it would be great.\n\n1063\n00:39:23,209 --> 00:39:23,763\n>> Mm-hm.\n>> Right?\n\n1064\n00:39:23,763 --> 00:39:25,470\nBut what about my existing VMs?\n\n1065\n00:39:25,470 --> 00:39:28,370\nI wanna move all my existing VMs\nover tot this new location so\n\n1066\n00:39:28,370 --> 00:39:29,762\nI can get rid of the old sand.\n\n1067\n00:39:29,762 --> 00:39:31,878\n>> Mm-hm.\n>> Once everybody's moved over I can shut\n\n1068\n00:39:31,878 --> 00:39:33,770\nthe old sand down and get rid of it.\n\n1069\n00:39:33,770 --> 00:39:34,820\n>> Right.\n>> All right.\n\n1070\n00:39:34,820 --> 00:39:38,950\nWell, the cool part here is, cuz,\nyou might be asking yourself Don,\n\n1071\n00:39:38,950 --> 00:39:39,890\n>> Just copy the darn thing.\n\n1072\n00:39:39,890 --> 00:39:41,400\n>> Yeah,\ncan't you just shut the VM down and\n\n1073\n00:39:41,400 --> 00:39:43,325\ndo it, and\nyou can certainly do it that way.\n\n1074\n00:39:43,325 --> 00:39:43,850\n>> Mm-hm.\n\n1075\n00:39:43,850 --> 00:39:45,250\n>> But you need to shut the VM down.\n\n1076\n00:39:45,250 --> 00:39:46,712\n>> Right.\n>> Well, what if you're in production?\n\n1077\n00:39:46,712 --> 00:39:47,260\n>> All right.\n\n1078\n00:39:47,260 --> 00:39:48,610\n>> What if this is a production system?\n\n1079\n00:39:48,610 --> 00:39:49,325\nYou don't wanna turn that VM off.\n\n1080\n00:39:49,325 --> 00:39:50,243\n>> Mm-hm.\n>> Well,\n\n1081\n00:39:50,243 --> 00:39:54,526\nthe storage migration tool lets you\ndo it while the server is online.\n\n1082\n00:39:54,526 --> 00:39:55,118\nSweet.\n\n1083\n00:39:55,118 --> 00:39:58,905\n>> It's cloning that hard drive, and\ncloning the changes while it's online.\n\n1084\n00:39:58,905 --> 00:39:59,485\nIt's pretty cool.\n\n1085\n00:39:59,485 --> 00:40:00,367\n>> Mm-hm.\n\n1086\n00:40:00,367 --> 00:40:04,969\n>> So, if I go up here to my roles,\nI'll take a,I guess I can do Web01,\n\n1087\n00:40:04,969 --> 00:40:06,485\nit's up and running.\n\n1088\n00:40:06,485 --> 00:40:07,100\n>> Mm-hm.\n\n1089\n00:40:07,100 --> 00:40:12,365\n>> And I can take this guy and I can\ngo to Move > Virtual Machine Storage.\n\n1090\n00:40:12,365 --> 00:40:13,640\n>> Mm-hm.\n\n1091\n00:40:13,640 --> 00:40:16,670\n>> And I'll see an interesting little\nscreen that's gonna pop up here.\n\n1092\n00:40:16,670 --> 00:40:18,990\nIt's gonna show my virtual machine.\n\n1093\n00:40:18,990 --> 00:40:22,780\nAnd I can expand it to see all the files,\nthat make up that machine.\n\n1094\n00:40:22,780 --> 00:40:24,383\n>> Mm-hm.\n>> And I can see that I've got\n\n1095\n00:40:24,383 --> 00:40:28,188\na few things here, I've got some\ncheckpoints, smart paging is turned on,\n\n1096\n00:40:28,188 --> 00:40:31,490\nmy configuration file and\nthe VHDX that makes up the machine.\n\n1097\n00:40:31,490 --> 00:40:35,550\n>> Right\n>> All of these files are present\n\n1098\n00:40:35,550 --> 00:40:38,265\non volume one, that first clustered\nshared volume that I've created.\n\n1099\n00:40:38,265 --> 00:40:39,100\n>> Mm-hm.\n\n1100\n00:40:39,100 --> 00:40:43,075\n>> But, I created a new one, volume two,\nand volume two is sitting here.\n\n1101\n00:40:43,075 --> 00:40:43,600\n>> Mm-hm.\n\n1102\n00:40:43,600 --> 00:40:45,380\n>> Not doing anything, right?\n\n1103\n00:40:45,380 --> 00:40:46,990\nSo, I wanna move those.\n\n1104\n00:40:46,990 --> 00:40:51,330\nWell notice in volume one here, I have a\nsubdirectory called ITProTV 2 dash Web01,\n\n1105\n00:40:51,330 --> 00:40:55,630\nso I probably need to create that,\nin fact in volume two, I don't have that,\n\n1106\n00:40:55,630 --> 00:40:57,205\nI just have the generic shares folder.\n\n1107\n00:40:57,205 --> 00:40:58,050\n>> Mm-hm.\n\n1108\n00:40:58,050 --> 00:41:00,440\n>> So, I need to go and\ncreate a subfolder for it first.\n\n1109\n00:41:00,440 --> 00:41:04,360\nIt's kind of annoying that it wont let\nyou, it wont let you create a folder here.\n\n1110\n00:41:04,360 --> 00:41:05,350\n>> Oh.\n>> It's got add shares, but\n\n1111\n00:41:05,350 --> 00:41:07,060\nthat's talking about connecting a UNC.\n\n1112\n00:41:07,060 --> 00:41:07,885\n>> Right.\n\n1113\n00:41:07,885 --> 00:41:09,650\n>> But, I need to add a folder.\n\n1114\n00:41:09,650 --> 00:41:10,865\nSo, let me cancel out of this.\n\n1115\n00:41:10,865 --> 00:41:12,050\n>> Mm-hm.\n\n1116\n00:41:12,050 --> 00:41:16,200\n>> And, oh, you know what, actually\nwhich node is connected to that one?\n\n1117\n00:41:16,200 --> 00:41:18,250\nI just, I should be able to get in to it,\nlet's see.\n\n1118\n00:41:18,250 --> 00:41:19,382\nThere we go.\n\n1119\n00:41:19,382 --> 00:41:22,035\nAll right, so I'm gonna go in here and\nI'm just gonna create a new folder.\n\n1120\n00:41:22,035 --> 00:41:23,410\n>> Mm-hm.\n\n1121\n00:41:23,410 --> 00:41:26,830\n>> Which will be ITProTV 2-Web01.\n\n1122\n00:41:26,830 --> 00:41:27,850\n>> Right.\n\n1123\n00:41:27,850 --> 00:41:32,450\n>> All right, and you know, eventually I'd\nwanna move that other web server in here\n\n1124\n00:41:32,450 --> 00:41:34,660\nalso, I'll do ITProTV 2-Web02.\n\n1125\n00:41:34,660 --> 00:41:37,410\nCuz I wanna move all my VMs so\nI can get rid of the old VM.\n\n1126\n00:41:37,410 --> 00:41:38,180\n>> And tear down, yeah.\n\n1127\n00:41:38,180 --> 00:41:38,680\n>> Yeah.\n\n1128\n00:41:39,800 --> 00:41:44,270\n>> So, now I can go back here and\nwe can do the move option.\n\n1129\n00:41:44,270 --> 00:41:47,400\nWhich is under Move.\n\n1130\n00:41:49,722 --> 00:41:52,320\nAll right, and so\nnow I can take this Virtual Machine and\n\n1131\n00:41:52,320 --> 00:41:54,225\nyou can take individual files if you want.\n\n1132\n00:41:54,225 --> 00:41:55,300\n>> Mm-hm.\n\n1133\n00:41:55,300 --> 00:41:56,710\n>> I've never had a need for that.\n\n1134\n00:41:56,710 --> 00:41:57,730\n>> So, normally I do the whole thing.\n\n1135\n00:41:57,730 --> 00:41:59,755\nSo, I just choose the machine and\nI hit Copy.\n\n1136\n00:41:59,755 --> 00:42:00,950\n>> Uh-huh.\n\n1137\n00:42:00,950 --> 00:42:04,020\n>> And then down here,\nI choose the volume where I want it to go.\n\n1138\n00:42:04,020 --> 00:42:08,500\nI want it to go here, and\nI hit paste, all right?\n\n1139\n00:42:08,500 --> 00:42:10,725\nAnd so it tells me it's gonna\nbe doing 7.75 gigs of data.\n\n1140\n00:42:10,725 --> 00:42:12,550\n>> Mm-hm.\n>> And it shows the source and\n\n1141\n00:42:12,550 --> 00:42:13,230\nthe destination.\n\n1142\n00:42:13,230 --> 00:42:15,540\nSo, I see it's going from\nvolume one to volume two.\n\n1143\n00:42:15,540 --> 00:42:18,200\nIt's moving between\nthe cluster shared volumes.\n\n1144\n00:42:18,200 --> 00:42:18,820\n>> Right.\n\n1145\n00:42:18,820 --> 00:42:21,500\n>> And then we can just hit start and\noff it goes.\n\n1146\n00:42:21,500 --> 00:42:24,840\n>> Mm-hm.\n>> Now, the virtual machine is still on.\n\n1147\n00:42:24,840 --> 00:42:26,255\nIt's running right now.\n\n1148\n00:42:26,255 --> 00:42:27,450\n>> Mm-hm.\n\n1149\n00:42:27,450 --> 00:42:32,300\n>> It's cloning the hard drive, and only\nwhen the clones are identical, will it\n\n1150\n00:42:32,300 --> 00:42:35,320\nactually switch over to the other side,\nand now we're running off of the new CSV.\n\n1151\n00:42:35,320 --> 00:42:36,380\n>> Wow.\n>> Okay,\n\n1152\n00:42:36,380 --> 00:42:38,673\nnow we are using iSCSI storage here.\n\n1153\n00:42:38,673 --> 00:42:40,230\n>> [LAUGH]\n>> And it is gonna be slow.\n\n1154\n00:42:40,230 --> 00:42:42,605\n>> So, I don't know how long\nit's gonna take for us.\n\n1155\n00:42:42,605 --> 00:42:44,230\nBut, we'll let it run.\n\n1156\n00:42:44,230 --> 00:42:45,710\nIt's seven and a half gigs or whatever.\n\n1157\n00:42:45,710 --> 00:42:46,675\nThat's not too bad.\n\n1158\n00:42:46,675 --> 00:42:49,120\n>> Yeah.\n>> But, iSCSI network,\n\n1159\n00:42:49,120 --> 00:42:51,100\nwhere it's sending receiving\non the same NIC, yeah.\n\n1160\n00:42:51,100 --> 00:42:52,180\nIt's probably not so good.\n\n1161\n00:42:52,180 --> 00:42:55,042\n>> 15, 20, 30, [LAUGH]\n>> But, so it's gonna move and\n\n1162\n00:42:55,042 --> 00:42:59,095\nthe idea is that you could\nrun down without downtime.\n\n1163\n00:42:59,095 --> 00:43:03,440\nOne-by-one, moving your virtual machines\nuntil they're all over on this new sand,\n\n1164\n00:43:03,440 --> 00:43:06,140\nand when they're done,\nthe other one is empty,\n\n1165\n00:43:06,140 --> 00:43:09,170\nyou can remove that cluster share\nvolume and decommission the sand.\n\n1166\n00:43:09,170 --> 00:43:10,378\n[CROSSTALK] So a great utility for\nupgrading your sand.\n\n1167\n00:43:10,378 --> 00:43:12,056\n>> That is, it makes it pretty darn easy.\n\n1168\n00:43:12,056 --> 00:43:12,940\n>> Mm-hm.\n\n1169\n00:43:12,940 --> 00:43:14,610\nYeah, it's not bad.\n\n1170\n00:43:14,610 --> 00:43:17,875\nI always get confused with\nthe copy paste terminology.\n\n1171\n00:43:17,875 --> 00:43:18,530\n>> Uh-huh.\n>> Cuz, you know,\n\n1172\n00:43:18,530 --> 00:43:20,000\nI think of it in terms of moving.\n\n1173\n00:43:20,000 --> 00:43:22,160\n>> Right.\n>> But it does do a copy paste, and\n\n1174\n00:43:22,160 --> 00:43:24,630\nit leaves the old files just\nin case something goes wrong.\n\n1175\n00:43:24,630 --> 00:43:25,635\n>> Mm-hm.\n>> And so that's why it is\n\n1176\n00:43:25,635 --> 00:43:26,870\ncopy/paste like that.\n\n1177\n00:43:26,870 --> 00:43:27,875\nIt's a weird utility.\n\n1178\n00:43:27,875 --> 00:43:29,870\n>> Yes.\n\n1179\n00:43:29,870 --> 00:43:32,410\n>> So, to me it's seems like they make\nit a little easier with the wizard but\n\n1180\n00:43:32,410 --> 00:43:33,390\nthat's tool works fine.\n\n1181\n00:43:33,390 --> 00:43:33,890\n>> Yeah.\n>> [LAUGH]\n\n1182\n00:43:33,890 --> 00:43:34,598\n>> All right, and\n\n1183\n00:43:34,598 --> 00:43:38,360\nwe're gonna see that tool again, cuz there\nare other scenarios that we might need\n\n1184\n00:43:38,360 --> 00:43:40,168\nto use this for, all right?\n>> Mm-hm.\n\n1185\n00:43:40,168 --> 00:43:42,709\n>> Let's say, imagine if you will,\n\n1186\n00:43:42,709 --> 00:43:44,462\nthat you're running,\n\n1187\n00:43:44,462 --> 00:43:47,273\n[LAUGH] it's like Twilight Zone.\n>> [LAUGH]\n\n1188\n00:43:47,273 --> 00:43:48,989\n>> That you're running Hyper-V, right?\n\n1189\n00:43:48,989 --> 00:43:50,595\n>> Mm-hm.\n>> And you're a small business.\n\n1190\n00:43:50,595 --> 00:43:52,050\n>> Right.\n>> So you started out as a small business,\n\n1191\n00:43:52,050 --> 00:43:55,600\nyou bought one server, you threw Hyper-V\non it and you created four VMs, all right?\n\n1192\n00:43:55,600 --> 00:43:57,405\nOkay, and\nthen your business started to grow.\n\n1193\n00:43:57,405 --> 00:43:58,265\n>> Mm-hm.\n>> And really took off.\n\n1194\n00:43:58,265 --> 00:43:58,840\n>> Mm-hm.\n\n1195\n00:43:58,840 --> 00:44:01,440\n>> And your system started getting\nbusier and busier, and you said,\n\n1196\n00:44:01,440 --> 00:44:05,010\nman, I've outgrown this one server,\nI'm gonna need to go to two servers.\n\n1197\n00:44:05,010 --> 00:44:06,890\n>> Right.\n>> Three servers or whatever?\n\n1198\n00:44:06,890 --> 00:44:09,540\nI need to get bigger and\nI want high availability, so\n\n1199\n00:44:09,540 --> 00:44:11,665\nI'm gonna implement a failover cluster.\n\n1200\n00:44:11,665 --> 00:44:12,640\n>> Mm-hm.\n>> All right.\n\n1201\n00:44:12,640 --> 00:44:14,960\nWell, we showed you guys how to,\n\n1202\n00:44:14,960 --> 00:44:18,875\nto build a failover cluster, and\ninstall Hyper-V on the hosts.\n\n1203\n00:44:18,875 --> 00:44:20,460\n>> Mm-hm.\n>> And then under rolls,\n\n1204\n00:44:20,460 --> 00:44:24,570\nwe can go in here and\nwe can create Virtual Machines.\n\n1205\n00:44:24,570 --> 00:44:26,290\n>> Right.\n>> We can do a new virtual machine, or\n\n1206\n00:44:26,290 --> 00:44:26,870\na new hard disk.\n\n1207\n00:44:26,870 --> 00:44:29,310\n>> That's how we set up level one and\nlevel two.\n\n1208\n00:44:29,310 --> 00:44:30,390\n>> Absolutely.\n>> Mm-hm.\n\n1209\n00:44:30,390 --> 00:44:31,860\n>> But what if we all ready\nhave a virtual machine?\n\n1210\n00:44:31,860 --> 00:44:36,030\n>> Right.\n>> What if I had all ready made a VM, and\n\n1211\n00:44:36,030 --> 00:44:39,756\nit's just a regular, old, run of\nthe mill VM running on a single node?\n\n1212\n00:44:39,756 --> 00:44:40,270\n>> Mm-hm.\n\n1213\n00:44:40,270 --> 00:44:42,800\n>> Okay, how do I get it in here?\n\n1214\n00:44:42,800 --> 00:44:44,980\nAnd so Microsoft in the objectives,\n\n1215\n00:44:44,980 --> 00:44:48,575\nthey call out importing and\nexporting and copying virtual machines.\n\n1216\n00:44:48,575 --> 00:44:50,040\n>> Mm-hm.\n>> But, there's a little more to it than\n\n1217\n00:44:50,040 --> 00:44:51,410\njust import and export.\n\n1218\n00:44:51,410 --> 00:44:52,760\nWhat if I've gotten this virtual machine,\nand\n\n1219\n00:44:52,760 --> 00:44:55,110\nI just need to make it highly available?\n\n1220\n00:44:55,110 --> 00:44:56,260\n>> Right.\n>> All right.\n\n1221\n00:44:56,260 --> 00:45:00,670\n>> Well, if it's already on one of our\nnodes, it's a pretty straightforward\n\n1222\n00:45:00,670 --> 00:45:03,855\nprocess, but let's assume that maybe our\nold server, we're just replacing it.\n\n1223\n00:45:03,855 --> 00:45:05,400\n>> Mm-hm.\n>> So we've got this old server, and\n\n1224\n00:45:05,400 --> 00:45:08,060\nnow we've got two new servers,\nand a nice fail over plush mount.\n\n1225\n00:45:08,060 --> 00:45:08,920\nI wanna bring it over that way.\n\n1226\n00:45:08,920 --> 00:45:11,570\n>> Right.\n>> Right, well we start by doing\n\n1227\n00:45:11,570 --> 00:45:13,685\nthe import export piece that\nMicrosoft's calling out.\n\n1228\n00:45:13,685 --> 00:45:14,510\n>> Mm-hm.\n>> And\n\n1229\n00:45:14,510 --> 00:45:18,040\nthat's just done through the regular,\nold Hyper-V Manager.\n\n1230\n00:45:18,040 --> 00:45:22,125\nIn the Hyper-V Manager You can come in and\nyou can find a Virtual Machine.\n\n1231\n00:45:22,125 --> 00:45:23,340\n>> Mm-hm.\n\n1232\n00:45:23,340 --> 00:45:25,780\n>> And when you right-click on it,\nyou'll see export.\n\n1233\n00:45:25,780 --> 00:45:28,410\n>> Right.\n>> You can export it to a file that you\n\n1234\n00:45:28,410 --> 00:45:30,005\ncan then copy wherever you want.\n\n1235\n00:45:30,005 --> 00:45:32,650\n>> Mm-hm.\n>> And import it back in, okay?\n\n1236\n00:45:32,650 --> 00:45:35,210\nAnd so that's how you can easily\ntake a virtual machine and\n\n1237\n00:45:35,210 --> 00:45:40,177\nmove it from a non-clustered host machine,\nto another non-clustered host machine.\n\n1238\n00:45:40,177 --> 00:45:41,540\n>> Mm-hm.\n>> This works on stand-alones.\n\n1239\n00:45:41,540 --> 00:45:42,080\nReal easy to do.\n\n1240\n00:45:42,080 --> 00:45:44,270\nJust export, and\nthen go to the other side and import.\n\n1241\n00:45:44,270 --> 00:45:47,000\nNow notice there is no import option here,\nand that's because,\n\n1242\n00:45:47,000 --> 00:45:48,845\nwell you wouldn't have\na machine to right-click on.\n\n1243\n00:45:48,845 --> 00:45:50,110\n>> [LAUGH]\n>> You've got import virtual\n\n1244\n00:45:50,110 --> 00:45:50,810\nmachine up here.\n\n1245\n00:45:50,810 --> 00:45:51,503\nThat's were we import.\n\n1246\n00:45:51,503 --> 00:45:52,219\n>> [LAUGH].\n\n1247\n00:45:52,219 --> 00:45:54,620\nThat was a trick question, wasn't it?\n\n1248\n00:45:54,620 --> 00:45:57,340\n>> Now, in the failover cluster manager.\n\n1249\n00:45:57,340 --> 00:45:58,310\n>> Here.\n>> Mm-hm.\n\n1250\n00:45:58,310 --> 00:46:01,420\n>> There is no import and\nexport for virtual machines.\n\n1251\n00:46:01,420 --> 00:46:02,500\n>> Right.\n>> It's just new.\n\n1252\n00:46:02,500 --> 00:46:03,520\nThere is no import, export.\n\n1253\n00:46:04,630 --> 00:46:07,590\nSo, it has to be done\nthrough the Hyper-V manager.\n\n1254\n00:46:07,590 --> 00:46:11,286\nSo, if you're going to be moving this\nvirtual machine from another node, and\n\n1255\n00:46:11,286 --> 00:46:13,190\nbringing it in your cluster, you know,\n\n1256\n00:46:13,190 --> 00:46:15,436\nyou're from a standard\nnode to a cluster node.\n\n1257\n00:46:15,436 --> 00:46:15,976\n>> Right.\n\n1258\n00:46:15,976 --> 00:46:20,851\n>> You would go to that stand alone node\nand you would export that virtual machine,\n\n1259\n00:46:20,851 --> 00:46:21,372\nright?\n\n1260\n00:46:21,372 --> 00:46:23,538\n>> Mm-hm.\n>> And once it was exported and\n\n1261\n00:46:23,538 --> 00:46:28,426\nit takes a while and the virtual machine\ndoes have to shut down to do it you know,\n\n1262\n00:46:28,426 --> 00:46:32,001\n[CROSSTALK] right-clicking is\ngoing to be my pain today.\n\n1263\n00:46:32,001 --> 00:46:33,428\n>> So export that out and\n\n1264\n00:46:33,428 --> 00:46:38,677\nthen you will take it to Hyper-V Servers\nthat's part of our cluster already.\n\n1265\n00:46:38,677 --> 00:46:39,800\n>> Yes.\n\n1266\n00:46:39,800 --> 00:46:41,300\n>> And turn around and\nimport it on to that.\n\n1267\n00:46:41,300 --> 00:46:42,910\n>> Yeah, and\nyou just pick any node you want, right?\n\n1268\n00:46:42,910 --> 00:46:44,080\n>> Mm-hm.\n>> Doesn't really matter which node.\n\n1269\n00:46:44,080 --> 00:46:46,645\nSo, I could do server one or\nserver two, for that matter.\n\n1270\n00:46:46,645 --> 00:46:48,100\n>> Mm-hm.\n>> I could go to one of these guys and\n\n1271\n00:46:48,100 --> 00:46:49,100\nimport the virtual machine.\n\n1272\n00:46:49,100 --> 00:46:49,965\nNow, when I do that.\n\n1273\n00:46:49,965 --> 00:46:50,640\n>> Mm-hm.\n\n1274\n00:46:50,640 --> 00:46:55,140\n>> It's gonna import the VM\nas a non-cluster resource.\n\n1275\n00:46:55,140 --> 00:46:55,910\nIt's not a cluster resource.\n\n1276\n00:46:55,910 --> 00:46:56,584\n>> [CROSSTALK] The VHD is\ngonna be right there on that.\n\n1277\n00:46:56,584 --> 00:46:57,130\nYeah.\n\n1278\n00:46:57,130 --> 00:46:57,660\n>> It's not a cluster role.\n\n1279\n00:46:57,660 --> 00:46:58,230\nYeah.\n>> And so\n\n1280\n00:46:58,230 --> 00:47:01,640\nit is literally going to run right\nfrom that one node and that's it.\n\n1281\n00:47:01,640 --> 00:47:02,970\nIt's not cluster aware.\n\n1282\n00:47:02,970 --> 00:47:03,715\nIt's stand alone.\n\n1283\n00:47:03,715 --> 00:47:05,150\n>> Mm-hm.\n>> It's not gonna fail over.\n\n1284\n00:47:05,150 --> 00:47:07,220\nIt's just a regular old VM.\n\n1285\n00:47:07,220 --> 00:47:09,885\nSo, we then need to make\nit highly available.\n\n1286\n00:47:09,885 --> 00:47:10,756\n>> Mm-hm.\n\n1287\n00:47:10,756 --> 00:47:12,510\n>> All right.\n\n1288\n00:47:12,510 --> 00:47:13,555\nSo, let's do this, Mike.\n\n1289\n00:47:13,555 --> 00:47:15,340\n>> Mm-hm.\n>> Cuz I don't have an extra VM\n\n1290\n00:47:15,340 --> 00:47:16,310\nto do it with.\n\n1291\n00:47:16,310 --> 00:47:17,490\n>> Okay.\n\n1292\n00:47:17,490 --> 00:47:18,490\n>> I'm gonna whip up a VM.\n\n1293\n00:47:18,490 --> 00:47:19,980\nThen maybe we'll stop and take a break.\n\n1294\n00:47:19,980 --> 00:47:21,960\n>> Okay.\n>> And I'll whip up a VM that's just\n\n1295\n00:47:21,960 --> 00:47:23,645\nright here on server two.\n\n1296\n00:47:23,645 --> 00:47:25,540\n>> Mm-hm.\n>> That's just a stand alone virtual\n\n1297\n00:47:25,540 --> 00:47:26,840\nmachine that's not a part of the cluster.\n\n1298\n00:47:26,840 --> 00:47:27,400\n>> Right.\n\n1299\n00:47:27,400 --> 00:47:31,560\n>> And then, we'll take that and we'll\ndraw it in and make it highly available.\n\n1300\n00:47:31,560 --> 00:47:33,440\n>> Sweet.\n>> So, yeah, let's do that.\n\n1301\n00:47:33,440 --> 00:47:34,280\nAll right.\n>> Let's do it.\n\n1302\n00:47:34,280 --> 00:47:35,280\n>> So, we'll stop here and take a break.\n\n1303\n00:47:35,280 --> 00:47:37,387\nWhen we get back,\nwe'll have a stand alone VM, and\n\n1304\n00:47:37,387 --> 00:47:39,846\nwe'll get to see some highly\navailable action after this.\n\n1305\n00:47:39,846 --> 00:47:47,225\n[MUSIC]\n\n1306\n00:47:47,225 --> 00:47:50,815\nAll right, welcome back everybody so\nI couple of things I wanna touch on a real\n\n1307\n00:47:50,815 --> 00:47:54,753\nquick, before the break I did mention how\niskas gives you really poor performance.\n\n1308\n00:47:54,753 --> 00:47:55,254\n>> You did.\n\n1309\n00:47:55,254 --> 00:48:00,265\n>> And [CROSSTALK] just to show\nyou heavy disk aisle operations\n\n1310\n00:48:00,265 --> 00:48:04,263\ndo not do well under iskas so\nit's been a good.\n\n1311\n00:48:04,263 --> 00:48:09,092\n15 minutes and were only 13% of the way\nthrough moving that 7.5 gig hard drive,\n\n1312\n00:48:09,092 --> 00:48:10,560\nreally bad performance.\n\n1313\n00:48:11,610 --> 00:48:15,832\nYou know the, this is on a normal network,\ni don't have an isolated storage network.\n\n1314\n00:48:15,832 --> 00:48:17,090\n>> Alright.\n>> This things we can do to make that\n\n1315\n00:48:17,090 --> 00:48:18,220\nperform better.\n\n1316\n00:48:18,220 --> 00:48:21,250\nBut just be aware that it can be a life\nline when you have fibre channels,\n\n1317\n00:48:21,250 --> 00:48:25,230\nfuzzy storage it is the, just the one-\n>> Light years ahead.\n\n1318\n00:48:25,230 --> 00:48:27,200\n>> Yeah, i don't wanna say light\nyears ahead, cuz it's not.\n\n1319\n00:48:27,200 --> 00:48:28,700\n>> Yeah.\n>> But, anyhow, but it is really fast.\n\n1320\n00:48:28,700 --> 00:48:30,742\nSo so just keep that in mind.\n\n1321\n00:48:30,742 --> 00:48:33,650\n>> [CROSSTALK] [LAUGH]\n>> All right, now, what i did during\n\n1322\n00:48:33,650 --> 00:48:37,690\nthe break is i just whipped up a quick VM\nhere called IT Pro TV dash sequel two.\n\n1323\n00:48:37,690 --> 00:48:40,645\nActually, you know, I wanted to call\nit IT Pro TV two dash sequel two.\n\n1324\n00:48:40,645 --> 00:48:41,200\n>> Mm-hm.\n\n1325\n00:48:41,200 --> 00:48:42,370\n>> Now, I've screwed it all up.\n\n1326\n00:48:42,370 --> 00:48:43,220\nThere we go.\n>> [LAUGH]\n\n1327\n00:48:43,220 --> 00:48:45,029\n>> So so I've created this, this,\n\n1328\n00:48:45,029 --> 00:48:46,683\nbasically a, a Database server.\n\n1329\n00:48:46,683 --> 00:48:47,300\n>> Mm-hm.\n>> Alright.\n\n1330\n00:48:47,300 --> 00:48:51,881\nAnd, that database server was\ncreated here on Itprotv2-server2.\n\n1331\n00:48:51,881 --> 00:48:55,500\n>> Yeah.\n>> Created locally, its not\n\n1332\n00:48:55,500 --> 00:48:59,180\na part of the cluster in fact the cluster-\n>> Is in the hyper via console right now\n\n1333\n00:48:59,180 --> 00:49:01,090\nnot in the the fail over cluster console.\n\n1334\n00:49:01,090 --> 00:49:03,740\n>> Yeah, if i jump over to\nthe fail over cluster console\n\n1335\n00:49:03,740 --> 00:49:04,641\n>> And i, you know,\n\n1336\n00:49:04,641 --> 00:49:06,090\njust refresh my roles here.\n\n1337\n00:49:06,090 --> 00:49:07,300\n>> Mm-hm.\n\n1338\n00:49:07,300 --> 00:49:10,858\n>> I don't see that virtual machine\nbecause it's not a highly available\n\n1339\n00:49:10,858 --> 00:49:11,830\nvirtual machine.\n\n1340\n00:49:11,830 --> 00:49:13,117\n>> Right.\nIt doesn't show up, right?\n\n1341\n00:49:13,117 --> 00:49:13,740\n>> Mm-hm.\n\n1342\n00:49:13,740 --> 00:49:17,170\n>> And that's what we expect to see\nwhen we're importing a VM like this.\n\n1343\n00:49:17,170 --> 00:49:20,790\nYou can use the import export\nfunction in the Hyper-V Manager, but\n\n1344\n00:49:20,790 --> 00:49:24,701\nit's dealing with local VMs,\nnot cluster aware VMs, alright?\n\n1345\n00:49:24,701 --> 00:49:28,775\n[SOUND] So once they're there,\nwe need to basically bring them in,\n\n1346\n00:49:28,775 --> 00:49:33,647\nbring them into our into our cluster,\nso that we have them available so\n\n1347\n00:49:33,647 --> 00:49:37,827\nthat we can work with them and\nit actually uses a couple neat things.\n\n1348\n00:49:37,827 --> 00:49:39,347\nThere's two things i have to worry about.\n\n1349\n00:49:39,347 --> 00:49:43,100\nFirst off, I've got to make the virtual\nmachine itself cluster-aware.\n\n1350\n00:49:43,100 --> 00:49:43,630\n>> Right.\n>> Alright, so\n\n1351\n00:49:43,630 --> 00:49:44,835\nit's got to know that\nit's highly available.\n\n1352\n00:49:44,835 --> 00:49:45,690\n>> Mm-hm.\n>> And\n\n1353\n00:49:45,690 --> 00:49:48,627\nthen the second thing is it's storage.\n\n1354\n00:49:48,627 --> 00:49:50,523\n>> Yeah.\n>> The, the VHDs or the VHD access for\n\n1355\n00:49:50,523 --> 00:49:53,931\nthat virtual machine are normally\n>> They're just right there on the hard\n\n1356\n00:49:53,931 --> 00:49:57,789\ndrive right, [CROSSTALK]\n>> Whichever one you did that on, right?\n\n1357\n00:49:57,789 --> 00:49:58,600\nServe two?\n\n1358\n00:49:58,600 --> 00:50:00,380\n>> Yeah.\n>> So serve two node went down,\n\n1359\n00:50:01,390 --> 00:50:03,440\nthe other nodes would not\nhave access to that storage.\n\n1360\n00:50:03,440 --> 00:50:06,700\n>> Yeah, and it's just gonna be a,\na local path or whatever right?\n\n1361\n00:50:06,700 --> 00:50:08,150\nSo if i go into my storage and\n\n1362\n00:50:08,150 --> 00:50:09,630\npull up my hard drive\n>> Mm-hm.\n\n1363\n00:50:09,630 --> 00:50:11,760\n>> Which i, i will get there eventually.\n\n1364\n00:50:11,760 --> 00:50:15,145\nI'll see that it's like C:/ Whatever.\n\n1365\n00:50:15,145 --> 00:50:17,508\nI didn't really pay attention.\n\n1366\n00:50:17,508 --> 00:50:22,390\n[LAUGH] So so yeah so\nanyhow it'll show up as being there.\n\n1367\n00:50:22,390 --> 00:50:23,830\nWow.\n>> It's in your my documents file.\n\n1368\n00:50:23,830 --> 00:50:24,870\nBut isn't that where it defaults.\n\n1369\n00:50:24,870 --> 00:50:25,520\nThat's very storage.\n\n1370\n00:50:25,520 --> 00:50:26,710\n>> I don't know why it's taking so long.\n\n1371\n00:50:26,710 --> 00:50:28,460\nI guess it's maybe that storage migration.\n\n1372\n00:50:28,460 --> 00:50:29,650\nLet me cancel that storage migration.\n\n1373\n00:50:31,762 --> 00:50:34,310\nActually would, will it let me\ncancel the storage migration?\n\n1374\n00:50:34,310 --> 00:50:36,868\nThat's a good.\nQuestion, who is positive?\n\n1375\n00:50:36,868 --> 00:50:42,140\n>> Who knows, [LAUGH] but\nyeah cancel moving storage area.\n\n1376\n00:50:42,140 --> 00:50:44,510\nLet me cancel that because it,\nit slowing system down.\n\n1377\n00:50:44,510 --> 00:50:47,440\nSo so basically that,\nthat local storage though, it,\n\n1378\n00:50:47,440 --> 00:50:49,100\nit's just right here on this system.\n\n1379\n00:50:49,100 --> 00:50:53,850\nIt's not shared storage so there it is,\nc:/user/public/document/ whatever.\n\n1380\n00:50:55,000 --> 00:50:56,380\nThat's not shared storage.\n\n1381\n00:50:56,380 --> 00:50:59,440\nSo even if i made this virtual\nmachine cluster aware,\n\n1382\n00:50:59,440 --> 00:51:01,420\nif i made it highly available,\n>> Mm-hm.\n\n1383\n00:51:01,420 --> 00:51:03,400\n>> Not having shared storage\nmeans that if a failure happens,\n\n1384\n00:51:03,400 --> 00:51:06,720\nit can't move to another node because it,\nit's stuck here.\n\n1385\n00:51:06,720 --> 00:51:08,280\nSo I've gotta make two things.\n\n1386\n00:51:08,280 --> 00:51:12,396\nOne, I've got to make the virtual machine\npresent in the, the fail over clusters.\n\n1387\n00:51:12,396 --> 00:51:13,812\n>> Mm-hm.\n>> So it needs to be a, a role.\n\n1388\n00:51:13,812 --> 00:51:14,531\nRight?\n\n1389\n00:51:14,531 --> 00:51:19,720\nAnd then two, i need to move its storage\nto be in one of my cluster shared volumes.\n\n1390\n00:51:19,720 --> 00:51:21,260\n>> Yeah.\n>> Really doesn't matter which one.\n\n1391\n00:51:21,260 --> 00:51:24,025\nBut i do need to get it in to\nclustered shared volumes so\n\n1392\n00:51:24,025 --> 00:51:26,190\nthat i can have that fail over, alright?\n\n1393\n00:51:26,190 --> 00:51:30,680\nSo those are some of the things that\ni need to do to get this to get this\n\n1394\n00:51:30,680 --> 00:51:31,465\nin place, right?\n\n1395\n00:51:31,465 --> 00:51:32,250\n>> Mm-mm.\n>> So\n\n1396\n00:51:32,250 --> 00:51:36,655\nwhat I'm gonna do is I'm gonna go back\nover into my cluster manager here,\n\n1397\n00:51:36,655 --> 00:51:39,290\nalright, and\nI'll just right click on roles.\n\n1398\n00:51:40,580 --> 00:51:42,825\nI will attempt to right click on roles,\nthere we go.\n\n1399\n00:51:42,825 --> 00:51:44,930\n>> [LAUGH]\n>> And under virtual machines,\n\n1400\n00:51:44,930 --> 00:51:46,940\nI've got my new virtual machine and\nnew hard disk, right?\n\n1401\n00:51:46,940 --> 00:51:48,255\nThat's for creating new ones.\n\n1402\n00:51:48,255 --> 00:51:50,750\n>> Mm-hm.\n>> But I've got one that already exists.\n\n1403\n00:51:50,750 --> 00:51:51,660\n>> Right.\n>> Right?\n\n1404\n00:51:51,660 --> 00:51:54,945\nSo what we do is we go up\nto Configure Role instead.\n\n1405\n00:51:54,945 --> 00:51:55,780\n>> Mm-hm.\n\n1406\n00:51:55,780 --> 00:51:59,600\n>> And under Configure Role, this is that\nwizard i was in earlier where we added\n\n1407\n00:51:59,600 --> 00:52:00,880\nDHCP and-\n>> Great\n\n1408\n00:52:00,880 --> 00:52:02,280\n>> File share whatever.\n\n1409\n00:52:02,280 --> 00:52:05,820\nYou'll notice in here,\nthere's a virtual machine option also.\n\n1410\n00:52:05,820 --> 00:52:09,630\nNow, why have an option here if I've\ngot the option out on the main menu.\n\n1411\n00:52:09,630 --> 00:52:14,210\nAnd the reason is, this is the one we use\nfor existing virtual machines, ones that\n\n1412\n00:52:14,210 --> 00:52:18,150\nare already present on a node in the\ncluster that just aren't highly available.\n\n1413\n00:52:18,150 --> 00:52:19,360\n>> Alright.\n>> Alright.\n\n1414\n00:52:19,360 --> 00:52:22,220\nSo, I'm gonna choose virtual\nmachine here and hit next, and\n\n1415\n00:52:22,220 --> 00:52:28,040\nit will give me a list of any\nVMs that are on any of my nodes,\n\n1416\n00:52:28,040 --> 00:52:30,850\nyou know, that, that are just\nnot flagged as highly available.\n\n1417\n00:52:30,850 --> 00:52:33,012\nAnd it found my sequel server right there.\n\n1418\n00:52:33,012 --> 00:52:33,926\n>> Mm-hm.\n>> Alright?\n\n1419\n00:52:33,926 --> 00:52:34,960\nSo I'm gonna check that one off.\n\n1420\n00:52:34,960 --> 00:52:36,260\nYou know,\nyou might have several on this list.\n\n1421\n00:52:36,260 --> 00:52:38,515\nYou just pick off the one that you\nwant to make highly available.\n\n1422\n00:52:38,515 --> 00:52:40,220\n>> Mm-hm.\n\n1423\n00:52:40,220 --> 00:52:42,820\n>> Then, it's gonna confirm that.\n\n1424\n00:52:42,820 --> 00:52:46,550\nAnd we'll finish up and\nmake it high, highly available, so\n\n1425\n00:52:46,550 --> 00:52:48,811\nwe're done right we get to walk away\n>> [LAUGH]\n\n1426\n00:52:48,811 --> 00:52:49,544\n>> not quite\n\n1427\n00:52:49,544 --> 00:52:51,010\n>> almost, almost.\n\n1428\n00:52:51,010 --> 00:52:55,676\n>> It is highly available now, so\ni do see IT ProTV2 sequel 2 it\n\n1429\n00:52:55,676 --> 00:52:58,798\nis now a part of the fail over cluster\n>> Mm hm\n\n1430\n00:52:58,798 --> 00:53:01,435\n>> it's on IT ProTV2 dash server 2\n\n1431\n00:53:01,435 --> 00:53:02,370\n>> Mm-hm.\n\n1432\n00:53:02,370 --> 00:53:06,120\n>> If server two fails it\ncan't jump over to server one,\n\n1433\n00:53:06,120 --> 00:53:09,130\nbecause it's storage is\nstill native to server one.\n\n1434\n00:53:09,130 --> 00:53:12,690\nAnd do now what I need to do is i need\nto follow this up with an extra step and\n\n1435\n00:53:12,690 --> 00:53:16,915\nmove it's storage to into a csv,\nand do a cluster shared volume.\n\n1436\n00:53:16,915 --> 00:53:17,540\n>> Mm-hm.\n\n1437\n00:53:17,540 --> 00:53:21,266\n>> So I'm gonna create a folder for\nit on that cluster shared volume.\n\n1438\n00:53:24,888 --> 00:53:26,746\nNow I'm right clicking like a champ,\nlook at that.\n\n1439\n00:53:26,746 --> 00:53:27,610\n>> [LAUGH]\n>> Alright.\n\n1440\n00:53:27,610 --> 00:53:31,380\nSo I'm gonna create IT Pro TV 2-SQL 2,\njust creating a folder for\n\n1441\n00:53:31,380 --> 00:53:33,375\nit there in the Cluster shared volume.\n\n1442\n00:53:33,375 --> 00:53:34,610\n>> Mm-hm.\n\n1443\n00:53:34,610 --> 00:53:38,290\n>> And\nthen I'll use that same move operation\n\n1444\n00:53:38,290 --> 00:53:40,890\nto move the virtual machine storage.\n\n1445\n00:53:40,890 --> 00:53:45,285\nAnd I'm gonna move all of the files that\nhave to do with this virtual machine.\n\n1446\n00:53:45,285 --> 00:53:46,240\n>> Mm-hm.\n>> So I'm just gonna hit copy,\n\n1447\n00:53:46,240 --> 00:53:50,820\nand I'm gonna move them into\nvolume 2I-T Protv2-sequal2, and\n\n1448\n00:53:50,820 --> 00:53:54,280\nI will paste all right.\n\n1449\n00:53:54,280 --> 00:53:56,580\nNow Mike had the the,\nthe excellent idea during the break of,\n\n1450\n00:53:56,580 --> 00:53:59,800\nof giving this thing a blank hard drive so\nit will copy really fast.\n\n1451\n00:53:59,800 --> 00:54:03,080\nSo this [LAUGH] shouldn't take very long,\nso it's gonna start right there,\n\n1452\n00:54:03,080 --> 00:54:08,740\nit's gonna move that storage over and\nnow the virtual machine is in the cluster.\n\n1453\n00:54:08,740 --> 00:54:09,444\n>> So it's highly available.\n\n1454\n00:54:09,444 --> 00:54:10,001\n>> Right.\n\n1455\n00:54:10,001 --> 00:54:14,565\n>> And the storage is on a cluster share\nvolume so now it's a part of our cluster.\n\n1456\n00:54:14,565 --> 00:54:15,841\n>> Nice, nice.\n\n1457\n00:54:15,841 --> 00:54:18,100\n>> So that's how we can bring\na virtual machine over.\n\n1458\n00:54:18,100 --> 00:54:22,440\nA stand alone virtual machine brought\ninto our cluster, up, happy, and\n\n1459\n00:54:22,440 --> 00:54:23,230\nhighly available.\n\n1460\n00:54:24,320 --> 00:54:27,140\nAnd extremely ticked off if i start it\nup because the hard drive is blank.\n\n1461\n00:54:27,140 --> 00:54:28,127\nBut.\n>> But but we can do that.\n\n1462\n00:54:28,127 --> 00:54:29,706\n>> Right.\nYeah, we can start it up.\n\n1463\n00:54:29,706 --> 00:54:31,400\n>> So.\n\n1464\n00:54:31,400 --> 00:54:32,701\n>> We can see the old O media.\n\n1465\n00:54:32,701 --> 00:54:34,987\n>> We can, we can start it up\nif i can find were to click.\n\n1466\n00:54:34,987 --> 00:54:37,590\n>> [LAUGH]\n>> Yeah, we'll just let it start.\n\n1467\n00:54:37,590 --> 00:54:41,504\n>> We can, we can even migrate\nthe thing at this point.\n\n1468\n00:54:41,504 --> 00:54:44,156\n>> Yeah, yeah [LAUGH] [CROSSTALK] not,\nnot much to migrate it but could, yeah.\n\n1469\n00:54:44,156 --> 00:54:46,154\n>> I mean it would still fail over and\nit's.\n\n1470\n00:54:46,154 --> 00:54:49,520\n>> If we pull up it's properties or sorry.\n\n1471\n00:54:49,520 --> 00:54:51,430\nI, i need to pull up its setting\nin the hyper view manager.\n\n1472\n00:54:51,430 --> 00:54:53,500\nWe'll see that it's storage and\nits configuration files,\n\n1473\n00:54:53,500 --> 00:54:55,160\nall that stuff has been\nmoved into the CSV.\n\n1474\n00:54:55,160 --> 00:54:56,680\nI, I guess i could just\nbrowse in there and\n\n1475\n00:54:56,680 --> 00:55:02,110\nsee it If i go into my cluster storage,\ninto volume two and into that sequel two.\n\n1476\n00:55:02,110 --> 00:55:05,220\nSo there it is,\nthere's the virtual hard drive and\n\n1477\n00:55:05,220 --> 00:55:08,415\nthe virtual machine config files,\nso they're all in the CSV now.\n\n1478\n00:55:08,415 --> 00:55:09,370\n>> Mm-hm.\n\n1479\n00:55:09,370 --> 00:55:13,511\n>> So now i can take it and\nwe can do we'll do a live migration.\n\n1480\n00:55:13,511 --> 00:55:14,335\n>> Mm-hm.\n\n1481\n00:55:14,335 --> 00:55:17,714\n>> And i should have just done best node,\nthere's only one other one.\n\n1482\n00:55:17,714 --> 00:55:19,247\n>> Right [LAUGH]\n>> So now i can fail it over, so\n\n1483\n00:55:19,247 --> 00:55:22,400\nit's live migrating and it's\n>> it's gonna jump from server two\n\n1484\n00:55:22,400 --> 00:55:23,840\nto server one.\n\n1485\n00:55:23,840 --> 00:55:25,960\n>> It's still running down there-\n>> There it goes so\n\n1486\n00:55:25,960 --> 00:55:30,050\nnow it's over on server one, so\nthat's how we make one highly available\n\n1487\n00:55:30,050 --> 00:55:34,300\nit's just a couple of steps right so so\nstep one was getting the VM here right so\n\n1488\n00:55:34,300 --> 00:55:38,180\nwe import it into hyper V manager if\nthat's what we need or if it's already\n\n1489\n00:55:38,180 --> 00:55:42,300\nthere we can skip that step and then two\n>> We added as a role here\n\n1490\n00:55:42,300 --> 00:55:46,970\nnot by doing the you know,\nVirtual Machine New option.\n\n1491\n00:55:46,970 --> 00:55:48,480\n>> Right.\n>> So not by going this way, but\n\n1492\n00:55:48,480 --> 00:55:52,649\nby going to Configure Role, and in there,\nchoosing the Virtual Machine Role,\n\n1493\n00:55:52,649 --> 00:55:55,967\nand that's what allows to add\nit in as being highly available.\n\n1494\n00:55:55,967 --> 00:55:56,548\n>> Mm-hm.\n\n1495\n00:55:56,548 --> 00:56:01,287\n>> And then step three,\nmove it's storage into shared storage.\n\n1496\n00:56:01,287 --> 00:56:01,845\nAll right.\n\n1497\n00:56:01,845 --> 00:56:04,364\nSo that's basically what we do\nto get those highly available.\n\n1498\n00:56:04,364 --> 00:56:05,026\n>> All right.\n\n1499\n00:56:05,026 --> 00:56:08,960\n>> All right, what else do we have\non our little hit list of topics.\n\n1500\n00:56:08,960 --> 00:56:11,920\n>> We've got the drain on shut down\noption we haven't talked about yet.\n\n1501\n00:56:11,920 --> 00:56:12,520\n>> Oh yeah, yep, yep.\n\n1502\n00:56:12,520 --> 00:56:13,820\n>> You could get that.\n\n1503\n00:56:13,820 --> 00:56:16,596\n>> All right, so, assuming that\neverything is running and happy, right.\n\n1504\n00:56:16,596 --> 00:56:18,110\n>> Mm-hm.\n>> Things are going great.\n\n1505\n00:56:18,110 --> 00:56:20,150\nWell.\n>> People are connected, doing work.\n\n1506\n00:56:20,150 --> 00:56:22,425\n>> Their,\nthey are Microsoft operating systems.\n\n1507\n00:56:22,425 --> 00:56:23,560\n>> [LAUGH]\n>> You say it and\n\n1508\n00:56:23,560 --> 00:56:25,200\nyou immediately start\nthinking negative things.\n\n1509\n00:56:25,200 --> 00:56:27,550\nThey are Microsoft operating systems, so\n\n1510\n00:56:27,550 --> 00:56:33,342\nat a minimum you're going to get a batch\nof critical security updates once a month.\n\n1511\n00:56:33,342 --> 00:56:34,520\n>> All right.\n>> What is it the second Tuesday?\n\n1512\n00:56:34,520 --> 00:56:35,050\n>> The second Tuesday.\n\n1513\n00:56:35,050 --> 00:56:36,260\n>> Next Tuesday.\n\n1514\n00:56:36,260 --> 00:56:38,530\n>> So, we know that from time to time,\n\n1515\n00:56:38,530 --> 00:56:41,805\nwe're gonna have to reboot our hosts\nto be able to maintain integrity.\n\n1516\n00:56:41,805 --> 00:56:42,910\n>> Mm-hm\n>> Like to do our updates and\n\n1517\n00:56:42,910 --> 00:56:43,640\nkeep things healthy.\n\n1518\n00:56:43,640 --> 00:56:44,220\n>> Right.\n\n1519\n00:56:44,220 --> 00:56:48,670\n>> So, when it comes time to do\nmaintenance on a host, what do I do?\n\n1520\n00:56:48,670 --> 00:56:50,790\nWell, you can come through and\n\n1521\n00:56:50,790 --> 00:56:54,650\nyou can manually move each of\nthe roles over to other servers.\n\n1522\n00:56:54,650 --> 00:56:55,960\n>> Huh.\n>> So if I want to do maintenance on\n\n1523\n00:56:55,960 --> 00:56:57,290\nserver two, for example.\n\n1524\n00:56:57,290 --> 00:57:00,620\n>> Right.\n>> I can move all these roles off to,\n\n1525\n00:57:00,620 --> 00:57:02,075\noff to server one.\n\n1526\n00:57:02,075 --> 00:57:02,610\n>> Mm-hm.\n>> So\n\n1527\n00:57:02,610 --> 00:57:04,780\nright now I've got three\nthings on server two so\n\n1528\n00:57:04,780 --> 00:57:06,340\nI can shift them over and go that route.\n\n1529\n00:57:06,340 --> 00:57:08,665\nOr vice versa, if I wanted to do\nthe maintenance on server one.\n\n1530\n00:57:08,665 --> 00:57:10,460\n>> Mm-hm.\n>> I can move the stuff over to server\n\n1531\n00:57:10,460 --> 00:57:11,600\ntwo, right?\n\n1532\n00:57:11,600 --> 00:57:14,990\nWell if you just have a handful\nof VMs like this and other roles,\n\n1533\n00:57:14,990 --> 00:57:16,375\nthen sure you can just do it by hand.\n\n1534\n00:57:16,375 --> 00:57:18,790\n>> Mm-hm.\n>> But if you have a lot,\n\n1535\n00:57:18,790 --> 00:57:22,335\nthen you may wanna get in here and\nuse what's called the drain feature.\n\n1536\n00:57:22,335 --> 00:57:22,960\n>> Mm-hm.\n\n1537\n00:57:22,960 --> 00:57:25,450\n>> The drain feature is where\nyou basically tell the node,\n\n1538\n00:57:25,450 --> 00:57:26,810\nhey dump all your roles.\n\n1539\n00:57:26,810 --> 00:57:28,710\nMove the roles off to other people.\n\n1540\n00:57:28,710 --> 00:57:33,750\nAnd then, once they're all moved off,\nsuspend yourself from the cluster.\n\n1541\n00:57:33,750 --> 00:57:34,290\n>> Mm.\n>> You don't actually\n\n1542\n00:57:34,290 --> 00:57:36,280\ntake yourself out of the cluster\nbecause that would be bad.\n\n1543\n00:57:36,280 --> 00:57:37,560\n>> Right.\n>> But you suspend yourself so\n\n1544\n00:57:37,560 --> 00:57:38,950\nyou won't take new roles.\n\n1545\n00:57:38,950 --> 00:57:41,680\nAnd that way we can do maintenance,\nwe can install our updates,\n\n1546\n00:57:41,680 --> 00:57:42,825\nwe can reboot the nodes.\n\n1547\n00:57:42,825 --> 00:57:45,160\n>> Mm-hm.\n>> And it doesn't affect any of our VMs.\n\n1548\n00:57:45,160 --> 00:57:47,680\nAnd when it comes back up,\nwe can move nodes back over to it.\n\n1549\n00:57:47,680 --> 00:57:49,720\n>> Right.\n>> It's called draining, alright?\n\n1550\n00:57:49,720 --> 00:57:52,030\nThere's two ways that draining happens,\nand\n\n1551\n00:57:52,030 --> 00:57:55,425\nthe one way is manually and\nwe can tell a node to drain.\n\n1552\n00:57:55,425 --> 00:57:56,420\n>> Mm-hm.\n\n1553\n00:57:56,420 --> 00:57:59,960\n>> All you do is, you go into\nyour Nodes and you pick the node.\n\n1554\n00:57:59,960 --> 00:58:01,325\nI think, I was gonna do server one, right?\n\n1555\n00:58:01,325 --> 00:58:01,910\n>> Mm-hm.\n\n1556\n00:58:01,910 --> 00:58:04,970\n>> So, you pick the node and\nyou right-click on it.\n\n1557\n00:58:04,970 --> 00:58:07,777\nAnd, you'll see an option on here for\nPause.\n\n1558\n00:58:07,777 --> 00:58:08,720\n>> Mm-hm.\n\n1559\n00:58:08,720 --> 00:58:10,040\n>> Remember, I said,\nwe're gonna suspend our self.\n\n1560\n00:58:10,040 --> 00:58:11,760\nWe're not gonna come out of the cluster.\n\n1561\n00:58:11,760 --> 00:58:13,450\n>> Right.\n>> We're just gonna temporarily,\n\n1562\n00:58:13,450 --> 00:58:14,705\nstop participating, right?\n\n1563\n00:58:14,705 --> 00:58:15,340\n>> Mm-hm.\n\n1564\n00:58:15,340 --> 00:58:17,560\n>> So we can choose Pause and\nthen Drain Roles.\n\n1565\n00:58:17,560 --> 00:58:18,930\n>> All right.\n>> All right,\n\n1566\n00:58:18,930 --> 00:58:22,910\nif you do choose Do Not Drain Roles,\nthe roles are just gonna stop,right?\n\n1567\n00:58:22,910 --> 00:58:24,368\n>> Yep.\n>> And that's probably bad, right?\n\n1568\n00:58:24,368 --> 00:58:25,920\n>> [LAUGH]\n>> If it's a virtual machine,\n\n1569\n00:58:25,920 --> 00:58:28,945\nthey're gonna suspend, they're gonna\nsave their state, and tun off.\n\n1570\n00:58:28,945 --> 00:58:29,590\n>> Mm-hm.\n\n1571\n00:58:29,590 --> 00:58:32,990\n>> But if we choose drain rolls,\nwhat it's going to do,\n\n1572\n00:58:32,990 --> 00:58:35,700\nis it's going to start shifting\nthose rolls off to other servers.\n\n1573\n00:58:35,700 --> 00:58:36,552\nSee how it says draining?\n\n1574\n00:58:36,552 --> 00:58:38,270\n>> Yeah.\n>> And so now just wait.\n\n1575\n00:58:38,270 --> 00:58:42,336\nJust wait, twiddle my thumbs, and\neventually it will switch from drain.\n\n1576\n00:58:42,336 --> 00:58:43,724\n[INAUDIBLE] [CROSSTALK].\n\n1577\n00:58:43,724 --> 00:58:45,810\nYeah.\nNow that it's paused,\n\n1578\n00:58:45,810 --> 00:58:48,640\nthere shouldn't be anything\nrunning on server one.\n\n1579\n00:58:48,640 --> 00:58:49,930\nNow I can start doing maintenance.\n\n1580\n00:58:49,930 --> 00:58:53,815\nDo my updates, do my reboots, and I'm\njust going to double check under roles.\n\n1581\n00:58:53,815 --> 00:58:54,850\n>> Mm-hm.\n>> Sure enough\n\n1582\n00:58:54,850 --> 00:58:56,580\neverything is under server two now.\n\n1583\n00:58:56,580 --> 00:58:57,300\n>> Nice.\n\n1584\n00:58:57,300 --> 00:58:58,400\n>> All right.\n\n1585\n00:58:58,400 --> 00:59:03,490\nAnd when I'm done I can just come back\nhere, and my maintenance is done.\n\n1586\n00:59:03,490 --> 00:59:04,755\nNow I can just go to resume.\n\n1587\n00:59:04,755 --> 00:59:05,430\n>> Mm-hm.\n\n1588\n00:59:05,430 --> 00:59:09,190\n>> And see when I resume, it kept track\nof the roles that we shifted off.\n\n1589\n00:59:09,190 --> 00:59:09,870\n>> Right.\n>> And so\n\n1590\n00:59:09,870 --> 00:59:13,320\nwe can fail the roles back again,\nor we can do it manually.\n\n1591\n00:59:13,320 --> 00:59:14,615\nSo I'll go ahead and say fail them back.\n\n1592\n00:59:14,615 --> 00:59:16,410\n>> Mm-hm.\n>> And so it's gonna come up, and\n\n1593\n00:59:16,410 --> 00:59:18,402\nit's gonna start drawing\nthose roles back over.\n\n1594\n00:59:18,402 --> 00:59:19,120\n>> Right.\n>> And\n\n1595\n00:59:19,120 --> 00:59:21,680\nactually I don't remember how we have our\nindividual fallback set, so that may or\n\n1596\n00:59:21,680 --> 00:59:22,360\nmay not happen.\n\n1597\n00:59:22,360 --> 00:59:24,040\n>> It's probably\n>> Probably left on the default.\n\n1598\n00:59:24,040 --> 00:59:24,810\n>> Oh, it did.\n>> It did, nice.\n\n1599\n00:59:24,810 --> 00:59:25,450\n>> Yeah, it did.\n\n1600\n00:59:25,450 --> 00:59:28,355\nSo I can see where that SQL Server\nis back on server one again.\n\n1601\n00:59:28,355 --> 00:59:30,130\n>> Hm-hm.\n>> And web02 is back on server one.\n\n1602\n00:59:30,130 --> 00:59:32,600\nSo it's back up and in business, right?\n\n1603\n00:59:32,600 --> 00:59:33,605\nThat's the drain system.\n\n1604\n00:59:33,605 --> 00:59:34,130\n>> Hm-hm.\n\n1605\n00:59:34,130 --> 00:59:36,190\n>> And it's really cool for\ndoing maintenance.\n\n1606\n00:59:36,190 --> 00:59:38,490\nBut, what happens if you forget to drain?\n\n1607\n00:59:38,490 --> 00:59:39,750\n>> [LAUGH].\n>> All right.\n\n1608\n00:59:39,750 --> 00:59:42,150\nWhat happens if you go to that server and\n\n1609\n00:59:42,150 --> 00:59:44,010\nmaybe you have it set for\nautomatic reboots?\n\n1610\n00:59:44,010 --> 00:59:45,500\nRight.\nSo it does a Windows update and\n\n1611\n00:59:45,500 --> 00:59:47,630\nautomatically reboots and\nyou didn't think about it.\n\n1612\n00:59:47,630 --> 00:59:48,690\nAll right?\n>> Right.\n\n1613\n00:59:48,690 --> 00:59:51,290\n>> Well, in Windows 2012 server and\n\n1614\n00:59:51,290 --> 00:59:55,030\nearlier, if you had Virtual Machines,\n>> Mm.\n\n1615\n00:59:55,030 --> 00:59:57,500\n>> Or if you had rolls,\nthe rolls would stop, and\n\n1616\n00:59:57,500 --> 01:00:00,345\nthe virtual machines would save\ntheir state, and turn off, right?\n\n1617\n01:00:00,345 --> 01:00:01,720\n>> Mm-hm.\n>> Again, that's bad,\n\n1618\n01:00:01,720 --> 01:00:04,750\nwe have an outage while it reboots,\nall right.\n\n1619\n01:00:04,750 --> 01:00:10,670\nIn Windows server 2012 R2 though,\nthe default function now is to drain.\n\n1620\n01:00:10,670 --> 01:00:13,050\n>> Right.\n>> That if I forget to drain,\n\n1621\n01:00:13,050 --> 01:00:14,840\nif I just don't do it\n>> Mm-hm.\n\n1622\n01:00:14,840 --> 01:00:18,162\n>> And I shut that node down which\nI'm logged in to server one.\n\n1623\n01:00:18,162 --> 01:00:21,730\nLet me,well I guess I could\ntake server two right?\n\n1624\n01:00:21,730 --> 01:00:25,780\n>> Mm-hm.\n>> So, we'll do an administrative one.\n\n1625\n01:00:25,780 --> 01:00:28,000\nSo I'm gonna do a shutdown.\n\n1626\n01:00:28,000 --> 01:00:29,770\nslash f slash s.\n\n1627\n01:00:29,770 --> 01:00:31,000\nAm I done with?\n\n1628\n01:00:31,000 --> 01:00:32,189\nYea this will be the last thing to do.\n\n1629\n01:00:32,189 --> 01:00:33,870\n>> Mm-hm.\n>> I'm gonna go ahead and shut it down.\n\n1630\n01:00:33,870 --> 01:00:38,130\nSo, I'm doing a shutdown command, and\nI'm telling it, actually I probably wanna,\n\n1631\n01:00:38,130 --> 01:00:39,440\nno that'll work.\n\n1632\n01:00:39,440 --> 01:00:43,020\nI'm telling it that I want to force a\nshutdown, and it is a shutdown, I'm gonna\n\n1633\n01:00:43,020 --> 01:00:46,860\nshut this machine off, at a time of zero,\nI want it to do it now, if it can.\n\n1634\n01:00:46,860 --> 01:00:48,450\n>> No, we don't need a timer.\n\n1635\n01:00:48,450 --> 01:00:53,535\n>> And, it is itprotv2_ SVR 2, all right.\n\n1636\n01:00:53,535 --> 01:00:54,610\n>> Mm-hm.\n\n1637\n01:00:54,610 --> 01:00:57,330\n>> So I'm gonna shut that machine down,\nall right?\n\n1638\n01:00:57,330 --> 01:00:59,710\nNow I didn't tell it to drain the roles.\n\n1639\n01:00:59,710 --> 01:01:01,620\n>> Right.\n>> And what I should see is as it starts\n\n1640\n01:01:01,620 --> 01:01:04,595\nto shut down, there, see that live\nmigration that's happening right there?\n\n1641\n01:01:04,595 --> 01:01:06,530\n>> Mm-hm.\n>> I didn't tell it to live migrate.\n\n1642\n01:01:06,530 --> 01:01:09,480\n>> Right.\n>> Well, Windows Server 2012R2\n\n1643\n01:01:09,480 --> 01:01:11,050\ndoes it for me.\n\n1644\n01:01:11,050 --> 01:01:13,950\nIt says, oh, that note is going down?\n\n1645\n01:01:13,950 --> 01:01:15,615\nWell, I'm gonna drain it.\n\n1646\n01:01:15,615 --> 01:01:16,390\n>> Mm-hm.\n>> Alright?\n\n1647\n01:01:16,390 --> 01:01:20,440\nSo it automatically drains on shutdown,\nand that's super cool.\n\n1648\n01:01:20,440 --> 01:01:23,870\nWe don't have to turn that on, it's not a,\na switch that we have to flip, in fact,\n\n1649\n01:01:23,870 --> 01:01:25,600\nI'm not even sure that we can flip it.\n\n1650\n01:01:25,600 --> 01:01:26,120\n>> I don't think we can.\n\n1651\n01:01:26,120 --> 01:01:26,980\nI don't think so.\n\n1652\n01:01:26,980 --> 01:01:29,485\n>> So it's just on,\nit's in the default function.\n\n1653\n01:01:29,485 --> 01:01:30,190\n>> Mm-hm.\n>> So, if you forget,\n\n1654\n01:01:30,190 --> 01:01:31,730\nit's like a protection mechanism.\n\n1655\n01:01:31,730 --> 01:01:34,280\nBut, if you're running\nWindows Server 20 12,\n\n1656\n01:01:34,280 --> 01:01:38,930\nor if you're running\nWindows Server 2008 or\n\n1657\n01:01:38,930 --> 01:01:42,550\nR2, those don't drain by default,\nso you've got to remember to drain.\n\n1658\n01:01:42,550 --> 01:01:45,020\nThere's a lot of people like me,\nit's just ingrained,\n\n1659\n01:01:45,020 --> 01:01:47,274\nI just know to drain\nthe system before I reboot it.\n\n1660\n01:01:47,274 --> 01:01:48,780\n>> Mm-hm.\n>> But if you forget,\n\n1661\n01:01:48,780 --> 01:01:49,370\n2012 R2 has got your back.\n\n1662\n01:01:49,370 --> 01:01:50,390\n>> It takes care of us.\n\n1663\n01:01:50,390 --> 01:01:51,100\n>> So.\n>> I like it.\n\n1664\n01:01:51,100 --> 01:01:53,040\nAnd a lot of this we seen in,\n\n1665\n01:01:53,040 --> 01:01:56,370\nwe've said in our other episode we talked\nabout that cluster we're updating,\n\n1666\n01:01:56,370 --> 01:01:58,780\nwhere we can automate the update\nprocess on those clusters.\n\n1667\n01:01:58,780 --> 01:02:00,850\nAnd that's exactly what it's\ndoing in the background,\n\n1668\n01:02:00,850 --> 01:02:05,350\nit's draining those roles off one node at\na time, bringing them out of the cluster,\n\n1669\n01:02:05,350 --> 01:02:09,030\ndoing those updates, rebooting, bringing\nit back, drain, putting the rolls back,\n\n1670\n01:02:09,030 --> 01:02:11,500\nand then draining the next one, just going\nthrough them, it's doing it forward.\n\n1671\n01:02:11,500 --> 01:02:15,540\nSo we're seeing if we can, let it kind of\ndo it on it's own, or if we need to, for\n\n1672\n01:02:15,540 --> 01:02:18,840\nsome emergency maintenance or something\nlike that we can drain them off and\n\n1673\n01:02:18,840 --> 01:02:21,430\nnot just shut it down and\nkill all the processors.\n\n1674\n01:02:21,430 --> 01:02:23,390\n>> Yep, that is basically it.\n\n1675\n01:02:23,390 --> 01:02:25,880\nSo that's pretty all I've got.\n\n1676\n01:02:25,880 --> 01:02:26,630\nIt's.\n\n1677\n01:02:26,630 --> 01:02:28,670\nThis episode was kind of\na grab bag of features.\n\n1678\n01:02:28,670 --> 01:02:30,670\n>> Right.\n>> Inside of the failover cluster,\n\n1679\n01:02:30,670 --> 01:02:32,160\nand in hyperview to some extent.\n\n1680\n01:02:32,160 --> 01:02:33,955\n>> Mm hm.\n>> There's a lot of neat stuff in there.\n\n1681\n01:02:33,955 --> 01:02:35,020\n>> Right.\n>> It's a lot of really cool\n\n1682\n01:02:35,020 --> 01:02:36,170\npowerful things.\n\n1683\n01:02:36,170 --> 01:02:40,080\nIf you make use of it all you can have\nan extremely resilient environment.\n\n1684\n01:02:40,080 --> 01:02:43,370\nThat'll keep you up and\nrunning for a long time.\n\n1685\n01:02:43,370 --> 01:02:45,365\n>> Absolutely.\n>> Go for those six nines.\n\n1686\n01:02:45,365 --> 01:02:47,660\n[LAUGH]\n>> Six nines of high availability.\n\n1687\n01:02:47,660 --> 01:02:49,892\nThat takes some money.\n\n1688\n01:02:49,892 --> 01:02:51,730\n>> [LAUGH]\n>> All right.\n\n1689\n01:02:51,730 --> 01:02:53,130\nWell, let me just remind you guys,\n\n1690\n01:02:53,130 --> 01:02:57,490\nif you have questions on any of this you\ncan always jump over to our web site.\n\n1691\n01:02:57,490 --> 01:03:00,420\nIf it's live during the show you\ncan go to ITPRO.TV/live you'll\n\n1692\n01:03:00,420 --> 01:03:01,850\nsee the chat box right beneath the video.\n\n1693\n01:03:01,850 --> 01:03:05,540\nYou can post your questions there,\nwe monitor and answer every single show.\n\n1694\n01:03:05,540 --> 01:03:06,430\n>> Right down there.\n\n1695\n01:03:06,430 --> 01:03:09,165\n>> Yeah, yeah, so what we,\nI guess it's probably not on this screen.\n\n1696\n01:03:09,165 --> 01:03:10,660\n>> [LAUGH]\n>> Like yeah, we'll be done there.\n\n1697\n01:03:10,660 --> 01:03:13,430\nBut any how if you're\nwatching this Is recorded.\n\n1698\n01:03:13,430 --> 01:03:15,470\nThe live chatrooms not\ngonna help you that much.\n\n1699\n01:03:15,470 --> 01:03:18,120\nSo, what you can use instead are q and\na forums.\n\n1700\n01:03:18,120 --> 01:03:20,630\nAt the top of every page at ITpro.tv,\n\n1701\n01:03:20,630 --> 01:03:22,748\nyou will see the q and\na link at the top of the screen.\n\n1702\n01:03:22,748 --> 01:03:23,257\n>> Mm-hm.\n>> Hit it.\n\n1703\n01:03:23,257 --> 01:03:24,100\nIt'll take you to\n\n1704\n01:03:24,100 --> 01:03:25,500\nthe question and answer form.\n\n1705\n01:03:25,500 --> 01:03:26,410\nPost your questions there.\n\n1706\n01:03:26,410 --> 01:03:27,950\nWe monitor and answer them.\n\n1707\n01:03:27,950 --> 01:03:31,050\nWe wanna make sure you guys have\nthe answers you need to be successful.\n\n1708\n01:03:32,350 --> 01:03:33,090\n>> All right.\nWell ladies and\n\n1709\n01:03:33,090 --> 01:03:34,559\ngentlemen I hope you\nguys enjoyed the show.\n\n1710\n01:03:39,490 --> 01:03:43,824\nSigning off for ITPro TV,\n\n1711\n01:03:43,824 --> 01:03:50,268\nI'm Don Pezet.\n\n1712\n01:03:50,268 --> 01:03:52,890\n>> And I'm Mike Robert.\n\n1713\n01:03:52,890 --> 01:03:55,957\n>> And we will see you next time.\n\n1714\n01:03:55,957 --> 01:03:57,860\n[MUSIC]\n\n",
          "vimeoId": "100435997"
        }
      ],
      "title": "Configure and manage high availability"
    },
    {
      "episodes": [
        {
          "description": "In this episode Mike and Don configure advanced file services. They create a Network File System (NFS) share on a Windows server. They discuss BranchCache and different deployment options and demonstrate configuring BranchCache in Hosted Cache mode as well as file classification infrastructure using File Server Resource Manager (FSRM).",
          "length": "4242",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/004-Advanced-File-Services.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/004-Advanced-File-Services-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/004-Advanced-File-Services-sm.jpg",
          "title": "Advanced File Services",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,451 --> 00:00:35,693\nAll right, good morning,\ngood afternoon and good evening.\n\n3\n00:00:35,693 --> 00:00:37,951\nWelcome back to another\nepisode of ITProTV.\n\n4\n00:00:37,951 --> 00:00:41,100\nI'm your host, Don Pezet back\nagain with Mister Mike Rodrick.\n\n5\n00:00:41,100 --> 00:00:41,690\nHow's it going, Mike?\n\n6\n00:00:41,690 --> 00:00:42,370\n>> Fantastic.\n\n7\n00:00:42,370 --> 00:00:42,880\nGood to be back.\n\n8\n00:00:42,880 --> 00:00:43,680\nHow you doing, Don?\n\n9\n00:00:43,680 --> 00:00:44,510\n>> I'm doing swell.\n\n10\n00:00:44,510 --> 00:00:47,000\nI did the ZZ top wind up there.\n\n11\n00:00:47,000 --> 00:00:47,840\n>> I saw that.\nI'm waiting for\n\n12\n00:00:47,840 --> 00:00:50,180\nyour spin with your guitar.\n\n13\n00:00:50,180 --> 00:00:52,520\n>> We need some giant fake beards.\n\n14\n00:00:52,520 --> 00:00:56,560\nThese are the things we need\nto make ITProTV successful.\n\n15\n00:00:56,560 --> 00:01:01,730\nAll right, well if you've been\nwatching along we have moved through\n\n16\n00:01:01,730 --> 00:01:05,520\nhigh availability at this point and now\nwe're ready to move into an all new area.\n\n17\n00:01:05,520 --> 00:01:06,280\n>> We are?\n\n18\n00:01:06,280 --> 00:01:12,220\n>> I say all new, all new from a server's\nperspective of advanced file services.\n\n19\n00:01:12,220 --> 00:01:15,420\n>> So if you've already watched our\n7410 show and if you've already watched\n\n20\n00:01:15,420 --> 00:01:18,990\nour Windows 8 shows, then you know there's\na lot of file services in Windows.\n\n21\n00:01:18,990 --> 00:01:21,460\n>> Right.\n>> Share folders and stuff happens.\n\n22\n00:01:21,460 --> 00:01:24,080\nSo what we're gonna do today is\nwe're gonna take a look at some of\n\n23\n00:01:24,080 --> 00:01:26,730\nthe advanced functionality that's\na part of file services and\n\n24\n00:01:26,730 --> 00:01:30,440\nyou might be saying to yourself oh great,\nthis is gonna be a boring episode\n\n25\n00:01:30,440 --> 00:01:32,430\nbecause how many different\nways can you share a folder?\n\n26\n00:01:32,430 --> 00:01:34,900\nWell, it turns out there's\nsurprisingly large amount\n\n27\n00:01:34,900 --> 00:01:38,470\nof ways that you can share a folder and\nwe need to be familiar with them so\n\n28\n00:01:38,470 --> 00:01:40,406\nthat we're ready for what's on the exam.\n\n29\n00:01:40,406 --> 00:01:45,550\n>> We do and there's some exciting ones,\nI mean they're relatively exciting, so.\n\n30\n00:01:45,550 --> 00:01:49,180\n>> The first one that we're gonna\ntalk about is what's called the NFS.\n\n31\n00:01:49,180 --> 00:01:51,330\n>> Right.\n>> The Network File System and\n\n32\n00:01:51,330 --> 00:01:56,200\nNFS is one of those funny technologies,\nbecause when I first started getting\n\n33\n00:01:56,200 --> 00:01:59,182\nstarted in computers-\n>> 1972?\n\n34\n00:01:59,182 --> 00:02:01,310\n>> [LAUGH]\n>> Not that long ago,\n\n35\n00:02:01,310 --> 00:02:06,310\nbut when I first got started I\nhad gotten a connection to an ISP\n\n36\n00:02:06,310 --> 00:02:10,942\nthat basically I would get\nan rlogin shell to a Solaris box.\n\n37\n00:02:10,942 --> 00:02:13,520\n>> Nice [LAUGH]\n>> That's how I connected to the Internet.\n\n38\n00:02:13,520 --> 00:02:16,440\nAnd so\nI kinda started with UNIX based systems.\n\n39\n00:02:16,440 --> 00:02:21,130\nAnd NFS was how we shared files\nbetween those UNIX systems.\n\n40\n00:02:21,130 --> 00:02:21,780\n>> Right.\n>> And, so\n\n41\n00:02:21,780 --> 00:02:25,010\nI used NFS a lot in the early 90s.\n\n42\n00:02:25,010 --> 00:02:29,640\nAnd then in the late 90s we had a lot\nmore NetWare and Windows shares and\n\n43\n00:02:29,640 --> 00:02:33,590\nstuff like that and\nin the early 2000s was all Windows shares.\n\n44\n00:02:33,590 --> 00:02:34,560\n>> Right.\n>> And\n\n45\n00:02:34,560 --> 00:02:38,732\nnow we find ourselves kinda going back and\nNFS is becoming more popular again.\n\n46\n00:02:38,732 --> 00:02:41,320\nSo, it''s one of those technologies\nthat kinda went away for a while and\n\n47\n00:02:41,320 --> 00:02:43,290\nis now coming back again.\n\n48\n00:02:43,290 --> 00:02:46,570\n>> Get a lot of mixed environments and\nstuff, and we've got the UNIX devices,\n\n49\n00:02:46,570 --> 00:02:50,130\nthey can access NTFS but\nthey have to use a Samba, I think?\n\n50\n00:02:51,590 --> 00:02:55,470\n>> Yeah, Samba is what Linux uses to\nconnect to the regular Windows shares.\n\n51\n00:02:55,470 --> 00:02:57,880\n>> Right.\n>> And it's a reverse engineered protocol,\n\n52\n00:02:57,880 --> 00:02:58,770\nso it's not very reliable.\n\n53\n00:02:58,770 --> 00:02:59,760\n>> Right, yeah.\n>> Right,\n\n54\n00:02:59,760 --> 00:03:01,415\nthe Samba guys hate it when you say that.\n\n55\n00:03:01,415 --> 00:03:02,900\n>> [LAUGH]\n>> The reality is there,\n\n56\n00:03:02,900 --> 00:03:06,850\nthey reverse engineered SMB,\nthe Server Message Block protocol.\n\n57\n00:03:06,850 --> 00:03:09,970\nAnd, anything that's reverse\nengineered is not perfect and\n\n58\n00:03:09,970 --> 00:03:12,000\ncan be broken by Microsoft\nwhenever they want.\n\n59\n00:03:12,000 --> 00:03:13,630\n>> Right, yeah.\n\n60\n00:03:13,630 --> 00:03:15,550\n>> So, what is NFS?\n\n61\n00:03:15,550 --> 00:03:20,050\nWell, NFS,\nthe Network File System is a free and\n\n62\n00:03:20,050 --> 00:03:24,960\nopen source standard protocol whatever,\nthat can be used by any system,\n\n63\n00:03:24,960 --> 00:03:28,130\nbut it's typically used in\nUNIX-based operating systems.\n\n64\n00:03:28,130 --> 00:03:29,320\n>> Right.\n>> So UNIX, Linux,\n\n65\n00:03:29,320 --> 00:03:31,970\nBSD NFS support is there.\n\n66\n00:03:31,970 --> 00:03:37,910\nAnd when they wanna share out a folder, on\nserver they create a published NFS point.\n\n67\n00:03:37,910 --> 00:03:42,810\nAnd then on their clients they mount\nthat publish point to some directory on\n\n68\n00:03:42,810 --> 00:03:46,190\ntheir system and they're able to access it\njust like in Windows we share a folder,\n\n69\n00:03:46,190 --> 00:03:52,470\nwhich is an SMB share, and then we map it\nusually a drive or whatever on a client.\n\n70\n00:03:52,470 --> 00:03:55,200\nNow on the Windows side we use SMB or\n\n71\n00:03:55,200 --> 00:03:59,730\nServer Message Block, that's actually\nthe protocol, CIFS is what we\n\n72\n00:03:59,730 --> 00:04:03,830\ntypically call the actual share which\nis Common Internet Folder File Sharing.\n\n73\n00:04:03,830 --> 00:04:05,450\n>> Yeah.\n>> Something like that.\n\n74\n00:04:05,450 --> 00:04:09,845\nThey're just generic terms that refer\nto the Windows file share, right?\n\n75\n00:04:09,845 --> 00:04:11,900\n>> Yep.\n>> But if you've got a mixed environment.\n\n76\n00:04:11,900 --> 00:04:15,550\nIf you've got Windows machines,\nand Linux machines, and\n\n77\n00:04:15,550 --> 00:04:20,950\nUNIX machines not many people have true\nUNIX machines anymore or OSX, right?\n\n78\n00:04:20,950 --> 00:04:23,950\nYou got Macs in your environment,\nyou can try and\n\n79\n00:04:23,950 --> 00:04:26,530\nget them to work with the Windows\nshares and a lot of times they will.\n\n80\n00:04:26,530 --> 00:04:28,000\n>> Right.\n>> And you know that way,\n\n81\n00:04:28,000 --> 00:04:30,802\ngreat but\nthere may come a time when you need NFS.\n\n82\n00:04:30,802 --> 00:04:34,640\nAll right, it gives you a guaranteed\nway you can communicate,\n\n83\n00:04:34,640 --> 00:04:37,250\nshare information between systems and\nit is pretty reliable.\n\n84\n00:04:37,250 --> 00:04:37,880\n>> Right.\n\n85\n00:04:37,880 --> 00:04:41,870\n>> So Microsoft recognizes this and\nthey used to have a third,\n\n86\n00:04:41,870 --> 00:04:45,250\nnot a third party but a separate set\nof utilities you could just install.\n\n87\n00:04:45,250 --> 00:04:49,700\nThey used to have the UNIX what\nwas it called, the UNIX tools for\n\n88\n00:04:49,700 --> 00:04:50,965\nWindows do you remember, Mike?\n\n89\n00:04:50,965 --> 00:04:51,680\n>> No, I never use that.\n\n90\n00:04:51,680 --> 00:04:54,580\n>> UNIX Services that's what it was,\nUNIX Services for Windows.\n\n91\n00:04:54,580 --> 00:04:57,699\nIn fact you can probably still get that,\nlet me see if I can find it here.\n\n92\n00:04:57,699 --> 00:05:00,750\nSo, UNIX Services for Windows.\n\n93\n00:05:00,750 --> 00:05:02,975\nAnd what it was is a collection.\n\n94\n00:05:02,975 --> 00:05:06,786\n>> [LAUGH]\n>> Windows services for UNIX.\n\n95\n00:05:06,786 --> 00:05:07,340\n>> There you go.\n\n96\n00:05:07,340 --> 00:05:09,270\n>> Yeah, you can see it's dated 2006.\n\n97\n00:05:09,270 --> 00:05:09,980\n>> Yeah.\n\n98\n00:05:09,980 --> 00:05:12,670\n>> So back then they used\nto have this add on and\n\n99\n00:05:12,670 --> 00:05:14,750\nyou would run this on\nyour Windows server and\n\n100\n00:05:14,750 --> 00:05:21,050\nit would add functionality like an SSH\nclient, rlogin it would add NFS support.\n\n101\n00:05:21,050 --> 00:05:23,730\n>> Got you.\n>> But since NFS has gained popularity\n\n102\n00:05:23,730 --> 00:05:28,240\nagain, Microsoft has decided to go\nahead and build it into Windows.\n\n103\n00:05:28,240 --> 00:05:30,180\nNow, it's not installed by default, but\n\n104\n00:05:30,180 --> 00:05:32,850\nif you have to support NFS\nin your environment, you can\n\n105\n00:05:32,850 --> 00:05:37,850\neasily add the support to Windows server\n2012 and all your problems are solved.\n\n106\n00:05:37,850 --> 00:05:38,510\n>> Good to go.\n\n107\n00:05:38,510 --> 00:05:40,060\n>> The world is a better place.\n\n108\n00:05:40,060 --> 00:05:41,052\n>> Absolutely.\n\n109\n00:05:41,052 --> 00:05:42,390\n>> [LAUGH]\n>> So Mike, let's dive into that.\n\n110\n00:05:42,390 --> 00:05:43,240\n>> Let's do it.\n\n111\n00:05:43,240 --> 00:05:45,230\n>> Let's see adding NSF\nto one of our servers.\n\n112\n00:05:45,230 --> 00:05:46,600\n>> Let me drive for this one.\n\n113\n00:05:46,600 --> 00:05:47,120\n>> Sure.\n\n114\n00:05:47,120 --> 00:05:47,950\n>> Let's see what we've got here.\n\n115\n00:05:47,950 --> 00:05:50,135\n>> You can do one of these,\nwhatever you want, I'm flexible.\n\n116\n00:05:51,505 --> 00:05:52,565\n>> Let's see what I got pulled up here.\n\n117\n00:05:52,565 --> 00:05:55,135\nThis is actually the one we\nwere using earlier, I believe.\n\n118\n00:05:55,135 --> 00:05:59,355\nSo anyways, it doesn't really matter\nwhich one we use, we want to connect.\n\n119\n00:05:59,355 --> 00:06:02,480\n>> This server got a bunch of errors on it\nbecause this is the server we use in our\n\n120\n00:06:02,480 --> 00:06:05,420\ncluster episode and we have one\nof the nodes down right now, so\n\n121\n00:06:05,420 --> 00:06:07,030\nit's pretty angry,\nthat's what all that red is.\n\n122\n00:06:07,030 --> 00:06:08,650\n>> Let's make it look\na little bit prettier.\n\n123\n00:06:08,650 --> 00:06:10,530\nLet's go up here to one\nof these guys here.\n\n124\n00:06:10,530 --> 00:06:12,250\n>> We don't want to look at all of that,\nyeah.\n\n125\n00:06:12,250 --> 00:06:15,340\n>> All right, so all you've gonna do is\none of our, it's actually a role service.\n\n126\n00:06:15,340 --> 00:06:19,050\nSo, if I go to manage add role, like we're\nadding any other role launch our handy\n\n127\n00:06:19,050 --> 00:06:24,590\ndandy wizard, move it up so we can see\nthat whole thing next a few times,\n\n128\n00:06:24,590 --> 00:06:28,340\ndoes roll base and we'll pick our\nserver we're installing it on.\n\n129\n00:06:28,340 --> 00:06:31,756\nAnd then I wanna get to my roles,\nagain it's a role service.\n\n130\n00:06:31,756 --> 00:06:34,830\nIt's a sub-component of the file and\nstorage services.\n\n131\n00:06:34,830 --> 00:06:40,530\nI'm gonna expand that out and\n\n132\n00:06:40,530 --> 00:06:43,496\nI should find.\n\n133\n00:06:43,496 --> 00:06:47,230\n>> It is server for NFS,\nI always have a hard time finding it.\n\n134\n00:06:47,230 --> 00:06:49,213\nSecond from the bottom.\n\n135\n00:06:49,213 --> 00:06:51,313\nCuz you're looking for NFS but\nit's not what they call it,\n\n136\n00:06:51,313 --> 00:06:52,322\nthey call it server for NFS.\n\n137\n00:06:52,322 --> 00:06:53,923\n>> [LAUGH]\n>> All right, so when I select that,\n\n138\n00:06:53,923 --> 00:06:56,826\nI get the additional tools that we need\nto manage and I click add features.\n\n139\n00:06:56,826 --> 00:07:00,092\nAnd then just next all the way through,\nthere's really nothing to configure or\n\n140\n00:07:00,092 --> 00:07:02,610\nanything like that, and I click install.\n\n141\n00:07:02,610 --> 00:07:05,000\n>> And it's actually installing\nnot just the server piece but\n\n142\n00:07:05,000 --> 00:07:10,350\nthe client piece also, that out of the box\nWindows Server 2012 cannot connect to\n\n143\n00:07:10,350 --> 00:07:12,930\nNFS shares on its own,\nit doesn't have the support.\n\n144\n00:07:12,930 --> 00:07:16,792\nWhen we install this, it's installing\nthe server so that we can create\n\n145\n00:07:16,792 --> 00:07:21,780\nNFS shares and it's also installing a\ncommand line utility called NFS Admin and\n\n146\n00:07:21,780 --> 00:07:25,875\nthat will allow you to map drives to\nNFS shares also so you can be a client.\n\n147\n00:07:25,875 --> 00:07:26,840\n>> Nice.\n\n148\n00:07:26,840 --> 00:07:29,450\n>> In Windows 7 and\nWindows 8 it's the same thing,\n\n149\n00:07:29,450 --> 00:07:32,770\nyou go to add remove features and\nyou'll see the NFS client on those.\n\n150\n00:07:32,770 --> 00:07:34,710\nSo it's part of the OS just\nnot installed by default,\n\n151\n00:07:34,710 --> 00:07:36,830\nyou can add it, and then you just\ngo to your command prompt and\n\n152\n00:07:36,830 --> 00:07:40,270\nuse NFS Admin to be able to\nconnect with those shares.\n\n153\n00:07:40,270 --> 00:07:41,900\n>> Let's add it real quick.\n\n154\n00:07:41,900 --> 00:07:43,530\nShould we?\n>> We can yeah, it's easy enough.\n\n155\n00:07:45,080 --> 00:07:47,320\n>> Did that finish or\ndid I do that on the DC.\n\n156\n00:07:47,320 --> 00:07:49,590\n>> I think you did that on the DC\n>> There we go, so\n\n157\n00:07:49,590 --> 00:07:52,060\nonce that's finish, we can close it.\n\n158\n00:07:52,060 --> 00:07:54,620\nAnd then once you've got it installed,\nit's just a matter of going back and\n\n159\n00:07:54,620 --> 00:07:55,910\ncreating your NFS shares if you want.\n\n160\n00:07:55,910 --> 00:07:59,909\nSo we can come over here to our file and\n\n161\n00:07:59,909 --> 00:08:04,050\nstorage services and go into shares.\n\n162\n00:08:04,050 --> 00:08:07,070\nWe don't have a whole lot going on,\nso we'll create a new share.\n\n163\n00:08:07,070 --> 00:08:11,590\nAnd in this wizard,\n\n164\n00:08:11,590 --> 00:08:14,710\nthat's where I'm gonna get to\nchoose to create my NFS shares.\n\n165\n00:08:14,710 --> 00:08:16,670\nAnd I got two options,\nlike we talked about in our other episode,\n\n166\n00:08:16,670 --> 00:08:18,420\nwhere we were doing the SMV shares.\n\n167\n00:08:18,420 --> 00:08:21,330\nDepending on what you're trying to use or,\nwhat you need the share for,\n\n168\n00:08:21,330 --> 00:08:24,420\nyou've got your quick share for\ngeneral files, sharing.\n\n169\n00:08:24,420 --> 00:08:27,720\nAnd then you got your advanced one, where\nI can do some of the advanced options,\n\n170\n00:08:27,720 --> 00:08:30,520\nlike an access based enumeration and\ndisk quotas.\n\n171\n00:08:30,520 --> 00:08:32,940\n>> And if you choose the quick one,\nit's not like you're locked in,\n\n172\n00:08:32,940 --> 00:08:35,120\nyou can always go and\nadd the advanced stuff later on.\n\n173\n00:08:35,120 --> 00:08:36,960\n>> Right.\n>> So I, I usually go with the quick one.\n\n174\n00:08:36,960 --> 00:08:38,230\n>> Exactly, so I'll just click Next.\n\n175\n00:08:40,060 --> 00:08:42,050\nWe'll put it on our C drive there,\nwhat the heck.\n\n176\n00:08:42,050 --> 00:08:42,745\nWe'll click next.\n\n177\n00:08:42,745 --> 00:08:44,993\n>> [LAUGH]\n>> Give it a name,\n\n178\n00:08:44,993 --> 00:08:47,660\nsomething like NFS Test.\n\n179\n00:08:49,670 --> 00:08:50,820\nAnd take out spaces.\n\n180\n00:08:50,820 --> 00:08:52,340\n>> Yeah,\nNFS doesn't allow you to have spaces.\n\n181\n00:08:52,340 --> 00:08:53,200\n>> Doesn't like those guys.\n\n182\n00:08:53,200 --> 00:08:54,820\nNow there's my remote path for my share.\n\n183\n00:08:57,540 --> 00:09:01,000\nAnd then, whether or not we wanna, what\nauthentication method we wanna use, and\n\n184\n00:09:01,000 --> 00:09:04,040\nwe'll just stick with\nKerberos 4 authentication.\n\n185\n00:09:04,040 --> 00:09:04,540\n>> Yeah.\n\n186\n00:09:04,540 --> 00:09:07,180\nRemember that it might not be\na Windows machine connecting.\n\n187\n00:09:07,180 --> 00:09:09,180\nIt's usually gonna be a UNIX based OS.\n\n188\n00:09:09,180 --> 00:09:11,750\nSo it might be free BSD, open BSD.\n\n189\n00:09:11,750 --> 00:09:14,180\nIt might be any of the Linux distros or\nwhatever.\n\n190\n00:09:14,180 --> 00:09:16,340\nAnd so they're gonna have\nto authenticate somehow.\n\n191\n00:09:16,340 --> 00:09:20,040\nWell, Active Directory uses\nKerberos to do it's authentication.\n\n192\n00:09:20,040 --> 00:09:20,900\n>> Right.\n>> And that\n\n193\n00:09:20,900 --> 00:09:22,400\noriginally came form the Unix world.\n\n194\n00:09:22,400 --> 00:09:23,231\nNow Microsoft bastardized it.\n\n195\n00:09:23,231 --> 00:09:24,600\n>> [LAUGH]\n>> A little bit,\n\n196\n00:09:24,600 --> 00:09:26,690\nso it's not quite according to standard.\n\n197\n00:09:26,690 --> 00:09:28,220\nAnd that's why when you\nlook at that list there,\n\n198\n00:09:28,220 --> 00:09:32,520\nyou see a couple of different options\nthere, to figure out what you want.\n\n199\n00:09:32,520 --> 00:09:34,420\n>> Right.\n>> The first one is just doing straight up\n\n200\n00:09:34,420 --> 00:09:37,940\nusername password authentication\nwith a little certificate system.\n\n201\n00:09:37,940 --> 00:09:42,100\nBut the second two, you'll notice,\none does integrity and one does privacy.\n\n202\n00:09:42,100 --> 00:09:44,320\nThis is adding on that extra security.\n\n203\n00:09:44,320 --> 00:09:46,880\nIntegrity does packet signing, so\n\n204\n00:09:46,880 --> 00:09:48,920\nyou can ensure the packets\naren't tampered with in transit.\n\n205\n00:09:48,920 --> 00:09:51,170\nThat's something that SNB does by default.\n\n206\n00:09:51,170 --> 00:09:55,450\nAnd then privacy, it'll actually\nencrypt the NFS communications.\n\n207\n00:09:55,450 --> 00:09:56,290\n>> Nice.\n>> And I'll tell you,\n\n208\n00:09:56,290 --> 00:09:58,440\na lot of Linux distributions\ndon't support that,\n\n209\n00:09:58,440 --> 00:10:00,270\nbecause they haven't kept NFS up to date.\n\n210\n00:10:00,270 --> 00:10:03,380\nI don't know why, but the bigger\nones like Red Hat, they support it,\n\n211\n00:10:03,380 --> 00:10:04,740\nit works just fine.\n\n212\n00:10:04,740 --> 00:10:06,233\nBut some of the smaller ones don't.\n\n213\n00:10:06,233 --> 00:10:08,718\n>> And we can also go with\nno server authentication.\n\n214\n00:10:08,718 --> 00:10:10,780\n>> Yeah, you can do that.\n\n215\n00:10:10,780 --> 00:10:11,510\n>> Not a good idea.\n\n216\n00:10:11,510 --> 00:10:14,140\n>> Well, you know,\nif this were on a private network, and\n\n217\n00:10:14,140 --> 00:10:17,410\nI was just using it to like, rsync data or\nsomething, we might choose no\n\n218\n00:10:17,410 --> 00:10:20,430\nauthentication just to let people\nconnect up and not have to sweat it.\n\n219\n00:10:21,880 --> 00:10:23,730\nYeah, you wouldn't do that in\nthe production environment.\n\n220\n00:10:25,420 --> 00:10:26,260\n>> And we'll click Next.\n\n221\n00:10:27,860 --> 00:10:29,139\nAnd up there it says some permissions.\n\n222\n00:10:31,450 --> 00:10:34,770\nLet's see, I don't think we have\nany real groups created on here.\n\n223\n00:10:36,135 --> 00:10:40,910\n>> Yeah, normally with NFS,\nif we do authentication,\n\n224\n00:10:40,910 --> 00:10:43,180\nyou can authenticate based\non the user account.\n\n225\n00:10:43,180 --> 00:10:46,010\nOr you can authenticate\nbased on a machine account.\n\n226\n00:10:46,010 --> 00:10:48,094\nAnd so you'll see what it's\nasking Mike right here is,\n\n227\n00:10:48,094 --> 00:10:51,110\nso we have a particular\nhost we want to allow?\n\n228\n00:10:51,110 --> 00:10:52,670\nAnd he's typing in Client One.\n\n229\n00:10:52,670 --> 00:10:55,560\n>> Right.\n>> Or do we have a network group, or\n\n230\n00:10:55,560 --> 00:10:56,190\nclient group?\n\n231\n00:10:56,190 --> 00:10:59,070\nIf we've defined these\ngroups in the sharing\n\n232\n00:10:59,070 --> 00:10:59,780\nsettings,\n>> Right.\n\n233\n00:10:59,780 --> 00:11:01,360\n>> We could specify those.\n\n234\n00:11:01,360 --> 00:11:04,550\nOr we could just say all machines,\nI want everybody to be able to connect.\n\n235\n00:11:04,550 --> 00:11:07,810\nSo like back on that authentication\nscreen, we could set no authentication\n\n236\n00:11:07,810 --> 00:11:12,670\nthere, and then here,\nlimit it down to a particular machine.\n\n237\n00:11:12,670 --> 00:11:15,933\nThat makes it a little easier to\nsetup the connectivity without having\n\n238\n00:11:15,933 --> 00:11:17,656\nto mess about with authentication.\n\n239\n00:11:17,656 --> 00:11:21,257\nBut if I want it to just meet people\nwho have a user account that's valid,\n\n240\n00:11:21,257 --> 00:11:23,677\nthen I would need to set\nthis to all machines, and\n\n241\n00:11:23,677 --> 00:11:26,707\non the other one make sure I set\nsome type of authentication.\n\n242\n00:11:26,707 --> 00:11:30,166\n>> We'll click Add, and Next.\n\n243\n00:11:30,166 --> 00:11:32,449\nAnd my permissions,\nwe just use the default permissions there,\n\n244\n00:11:32,449 --> 00:11:34,733\nyou're going to see administrators\nare gonna get full control,\n\n245\n00:11:34,733 --> 00:11:36,200\nkind of like we'd share Windows folder.\n\n246\n00:11:37,260 --> 00:11:39,323\nNext and Create.\n\n247\n00:11:39,323 --> 00:11:41,204\n>> And there you go.\n\n248\n00:11:41,204 --> 00:11:44,362\n>> And there we go,\nwe now have our share NFS Test\n\n249\n00:11:44,362 --> 00:11:45,013\n>> Yeah, and so\n\n250\n00:11:45,013 --> 00:11:47,566\nnow we've got that share right there,\nit's NFS.\n\n251\n00:11:47,566 --> 00:11:51,074\nIf we have a Unix system or a Linux\nsystem or whatever, they can come and\n\n252\n00:11:51,074 --> 00:11:53,513\nconnect to this and\njust communicate using NFS,\n\n253\n00:11:53,513 --> 00:11:56,390\nwhich is really nice\n>> We could also turn around and\n\n254\n00:11:56,390 --> 00:12:01,280\nshare that same folder with the same\nname using SMB if we wanted.\n\n255\n00:12:01,280 --> 00:12:02,820\n>> And then you could have Windows and\n\n256\n00:12:02,820 --> 00:12:07,270\nUnix clients connecting to the same\nshare but using native protocol, right?\n\n257\n00:12:07,270 --> 00:12:07,990\n>> Right.\n\n258\n00:12:07,990 --> 00:12:10,520\n>> Even though Windows 8\nhas a NFS client in it,\n\n259\n00:12:10,520 --> 00:12:12,890\nwe don't necessarily want to use\nit if we don't have to, right?\n\n260\n00:12:12,890 --> 00:12:14,740\nBecause Windows has\ncertain optimizations and\n\n261\n00:12:14,740 --> 00:12:18,550\nimprovements under SMB that we wanna\ntake advantage of whenever we can.\n\n262\n00:12:18,550 --> 00:12:23,510\nSo it is not an uncommon thing to have\nboth of those put in there, all right.\n\n263\n00:12:23,510 --> 00:12:24,740\nBut yeah, they just mix together.\n\n264\n00:12:24,740 --> 00:12:25,730\nReally straightforward.\n\n265\n00:12:25,730 --> 00:12:28,980\nThe only hard part is kind of figuring\nout what authentication you want to use.\n\n266\n00:12:28,980 --> 00:12:30,510\n>> Right.\n>> And Mike, just to show them,\n\n267\n00:12:30,510 --> 00:12:33,010\nfire up a command prompt there real quick.\n\n268\n00:12:33,010 --> 00:12:36,050\nAnd and another tool that I\nmentioned that was installed\n\n269\n00:12:36,050 --> 00:12:39,245\nis a command line utility called nsfadmin.\n\n270\n00:12:39,245 --> 00:12:42,275\nAnd if you just run nfsadmin,\nthere you go,\n\n271\n00:12:42,275 --> 00:12:45,815\nyou'll see it's got the server piece for\ncreating server drives.\n\n272\n00:12:45,815 --> 00:12:49,645\nIt's got the, or server shares, it's\ngot the client piece for connecting to.\n\n273\n00:12:49,645 --> 00:12:50,595\n>> For mapping those.\n\n274\n00:12:50,595 --> 00:12:51,315\n>> Yeah.\nAnd so\n\n275\n00:12:51,315 --> 00:12:55,940\nif you do nfsadminclient/?, there we go.\n\n276\n00:12:55,940 --> 00:12:57,650\nWe'll see where you can\nspecify the username and\n\n277\n00:12:57,650 --> 00:13:00,990\npassword to authenticate with,\nas well as other options for\n\n278\n00:13:00,990 --> 00:13:05,180\nhow you want to link it, and what folder\nor drive letter you want to map it to.\n\n279\n00:13:05,180 --> 00:13:09,280\nThat client was installed as a part\nof this in Windows 7, in Windows 8,\n\n280\n00:13:09,280 --> 00:13:11,320\nit's just a feature you enable.\n\n281\n00:13:11,320 --> 00:13:12,900\n>> Right.\n>> And you'll have that.\n\n282\n00:13:12,900 --> 00:13:14,150\n>> So really cool.\n\n283\n00:13:14,150 --> 00:13:17,280\nGreat for cross-compatibility,\nand you don't have to go out and\n\n284\n00:13:17,280 --> 00:13:19,456\nget the Windows Services for Unix anymore.\n\n285\n00:13:19,456 --> 00:13:22,110\n>> [LAUGH]\n>> It's just built-in and off you go, so.\n\n286\n00:13:22,110 --> 00:13:23,816\n>> Unless you're feeling nostalgic or\nsomething.\n\n287\n00:13:23,816 --> 00:13:28,098\n>> Yeah, originally Microsoft\nintroduced this as a way to migrate\n\n288\n00:13:28,098 --> 00:13:29,931\naway from these other OSs.\n\n289\n00:13:29,931 --> 00:13:33,531\nThey said, you might be running Red Hat on\nyour file servers now, wouldn't it be nice\n\n290\n00:13:33,531 --> 00:13:37,080\nif it was easy to migrate away, so\nlets give you the Unix services to do it.\n\n291\n00:13:37,080 --> 00:13:39,280\nAnd so as that kind of petered out,\n\n292\n00:13:39,280 --> 00:13:41,053\nthey killed that off and\nnow they just built it in.\n\n293\n00:13:41,053 --> 00:13:44,370\nAnd said, well, maybe you'll legitimately\nuse this to have people connect to you.\n\n294\n00:13:44,370 --> 00:13:47,201\nSo that's why they have that support.\n\n295\n00:13:47,201 --> 00:13:48,353\n>> Good deal.\n\n296\n00:13:48,353 --> 00:13:51,620\n>> All right, so that's probably about\nall we need to know in NFS, right?\n\n297\n00:13:51,620 --> 00:13:53,790\n>> I think so.\nThe main thing really on the exam,\n\n298\n00:13:53,790 --> 00:13:56,430\nit's going to be the fact that it\nis supported by Windows Server,\n\n299\n00:13:56,430 --> 00:13:58,800\nthat you can install it,\nthere's nothing else I have to download,\n\n300\n00:13:58,800 --> 00:14:00,650\nthat the client and\nthe server part are both there.\n\n301\n00:14:00,650 --> 00:14:02,880\nAnd that you create them right\nthrough Server Manager and\n\n302\n00:14:02,880 --> 00:14:07,000\nyou go in your file and\nstorage services there.\n\n303\n00:14:07,000 --> 00:14:09,070\nPerfect.\n>> All right so that's pretty much NFS.\n\n304\n00:14:09,070 --> 00:14:12,290\nSome of the other advanced file\nservices we're gonna take a look at,\n\n305\n00:14:12,290 --> 00:14:13,610\nlet's see what is next on our agenda.\n\n306\n00:14:13,610 --> 00:14:15,720\n>> I think we're gonna\nhit BranchCache maybe.\n\n307\n00:14:15,720 --> 00:14:17,480\n>> You wanna do that one next?\n\n308\n00:14:17,480 --> 00:14:18,088\n>> Or, what else do we have?\n\n309\n00:14:18,088 --> 00:14:22,046\n>> We've got FCI, FSRM, and Auditing.\n\n310\n00:14:22,046 --> 00:14:23,219\n>> Either way you want to go.\n\n311\n00:14:23,219 --> 00:14:24,810\n>> Let's talk about BranchCache.\n\n312\n00:14:24,810 --> 00:14:25,590\n>> All right, let's do it.\n\n313\n00:14:25,590 --> 00:14:26,260\n>> All right.\n\n314\n00:14:26,260 --> 00:14:29,850\nSo BranchCache is a pretty\nneat thing in what it does.\n\n315\n00:14:29,850 --> 00:14:31,974\nAnd I know,\nif you watched our Windows 8 show,\n\n316\n00:14:31,974 --> 00:14:34,590\nI know we talked about it there\nfrom a client perspective.\n\n317\n00:14:34,590 --> 00:14:36,510\nBut now we're going to take a look\nat it from the server perspective.\n\n318\n00:14:36,510 --> 00:14:40,210\nBut let's pretend for a moment that is is\nthe very first episode you've ever watched\n\n319\n00:14:40,210 --> 00:14:41,890\nand you have no idea what BranchCache is.\n\n320\n00:14:41,890 --> 00:14:43,165\nSo what the heck is it?\n\n321\n00:14:43,165 --> 00:14:50,690\nWell, let me draw a network here and\nlet me try and draw a network here.\n\n322\n00:14:50,690 --> 00:14:53,110\nAll right.\n\n323\n00:14:53,110 --> 00:14:56,870\nSo if we have a home office somewhere, and\n\n324\n00:14:56,870 --> 00:15:01,500\nin our home office we have a server and\nit's got a bunch of data in it.\n\n325\n00:15:01,500 --> 00:15:04,670\nIf this is our,\nour file server at our home office, and\n\n326\n00:15:04,670 --> 00:15:07,650\nits got a bunch of data, right, so\nI'll just throw some hard drives out here.\n\n327\n00:15:07,650 --> 00:15:12,090\nSo this is all of our corporate\ndata that we want access to, okay?\n\n328\n00:15:12,090 --> 00:15:17,100\nNow if anybody is at the home office, they\ncan connect right into this server and\n\n329\n00:15:17,100 --> 00:15:18,530\nthey can get access to that data,\n\n330\n00:15:18,530 --> 00:15:19,800\nit's all right there\n>> Right.\n\n331\n00:15:19,800 --> 00:15:20,770\n>> And they're happy, right?\n\n332\n00:15:20,770 --> 00:15:24,850\nSo, everybody who's at the home office,\nthey fire up their laptops or whatever,\n\n333\n00:15:24,850 --> 00:15:27,550\nand they connect right in and\nget at that data.\n\n334\n00:15:27,550 --> 00:15:29,090\nSo life is good for them.\n\n335\n00:15:29,090 --> 00:15:29,880\nOkay.\n\n336\n00:15:29,880 --> 00:15:33,490\nNow, when we talk about a connection from\n\n337\n00:15:33,490 --> 00:15:37,780\nthe home office to a home office machine\nlike this, well that makes a lot of sense.\n\n338\n00:15:37,780 --> 00:15:41,270\nThey're on a local area network,\nit's no big deal there.\n\n339\n00:15:41,270 --> 00:15:42,860\n>> Good, fast speed, reliable.\n\n340\n00:15:44,230 --> 00:15:47,930\nAnd this what we typically have,\nbut as your network grows,\n\n341\n00:15:47,930 --> 00:15:53,210\nas you get more computers and so on,\nyour needs start to change, right?\n\n342\n00:15:53,210 --> 00:15:59,370\nSo maybe having our entire company in one\nbuilding is not very realistic any more.\n\n343\n00:15:59,370 --> 00:16:02,140\nMaybe I decide that I need to start\nopening up some branch offices.\n\n344\n00:16:02,140 --> 00:16:05,022\n>> Right.\n>> So I have a user that is a salesperson,\n\n345\n00:16:05,022 --> 00:16:08,670\nand they're just selling\na ton in another State.\n\n346\n00:16:08,670 --> 00:16:09,250\n>> Right.\n\n347\n00:16:09,250 --> 00:16:12,916\n>> And so, we decided to hire some\nemployees and set up a branch office out\n\n348\n00:16:12,916 --> 00:16:17,205\nhere, or maybe this is our school board\nheadquarters, but we've got schools all\n\n349\n00:16:17,205 --> 00:16:20,930\nover the county, and they need access\nto this file share also, okay.\n\n350\n00:16:20,930 --> 00:16:25,630\nSo, they're out at some\nremote branch somewhere, and\n\n351\n00:16:25,630 --> 00:16:29,420\nat that remote branch\nthey have their machines,\n\n352\n00:16:29,420 --> 00:16:33,950\nyou know a couple of laptops or desktops\nor whatever they're using out there.\n\n353\n00:16:33,950 --> 00:16:37,140\nAnd when they wanna connect\nto that file share,\n\n354\n00:16:37,140 --> 00:16:41,190\nthey have to go across\nthe wide area network.\n\n355\n00:16:41,190 --> 00:16:45,670\nThey're going to have to cross\nfrom their local network over\n\n356\n00:16:45,670 --> 00:16:50,530\nto the home office network every time\nthey want to access a share, okay?\n\n357\n00:16:50,530 --> 00:16:54,680\nAnd that means that, you know, that\nthey're going over a wide area network\n\n358\n00:16:54,680 --> 00:17:00,700\nlink like this, which might be a dial up,\nmight be T1, might be cable modem or DSL.\n\n359\n00:17:00,700 --> 00:17:03,180\nBut it's not going to be anywhere\nnear the speed that we're getting\n\n360\n00:17:03,180 --> 00:17:05,020\nhere in the home office.\n\n361\n00:17:05,020 --> 00:17:08,630\nWhen you're in the home office, you're\ngetting these nice fast connections.\n\n362\n00:17:08,630 --> 00:17:11,700\nWhen you're in this remote site and\ngoing out like this.\n\n363\n00:17:11,700 --> 00:17:14,450\nThese guys, you know, it's a,\nit's a different world for them.\n\n364\n00:17:15,580 --> 00:17:17,020\nThey're having to cross\nthe wide area networks.\n\n365\n00:17:17,020 --> 00:17:19,910\nSo they've got slightly different\nneeds than what we have.\n\n366\n00:17:19,910 --> 00:17:23,180\n>> It's at the mercy of the ISP,\nif the ISP goes down, if it's unreliable,\n\n367\n00:17:23,180 --> 00:17:25,480\nyou know, they can't get to those\nshares they can't do their job.\n\n368\n00:17:25,480 --> 00:17:26,340\n>> Yeah.\n\n369\n00:17:26,340 --> 00:17:31,070\nSo, branch cache is a really cool\nservice and it's got two functions, and\n\n370\n00:17:31,070 --> 00:17:33,270\nlet's talk about the most generic one.\n\n371\n00:17:33,270 --> 00:17:36,730\nWhat we do is we basically place\na server out at the branch office, and\n\n372\n00:17:36,730 --> 00:17:39,200\nwe might already have one,\nyou might have a domain controller or\n\n373\n00:17:39,200 --> 00:17:41,510\nsomething that's out there to\nhelp speed up authentication.\n\n374\n00:17:41,510 --> 00:17:42,170\n>> Right.\n\n375\n00:17:42,170 --> 00:17:47,500\n>> And what you do is you say as people\ngo out to access stuff back at the home\n\n376\n00:17:47,500 --> 00:17:52,170\noffice, so as people are going out and\ndoing this kind of communication Watch for\n\n377\n00:17:52,170 --> 00:17:55,930\nit and, and see them go out there and\nconnect, and\n\n378\n00:17:55,930 --> 00:18:00,140\nwhen they do,\nmake a cache of the file the accessed.\n\n379\n00:18:00,140 --> 00:18:02,910\nBasically make like a, a copy of it, okay?\n\n380\n00:18:02,910 --> 00:18:08,980\nAnd that way When this person is done, if\nthis other person requests the same file?\n\n381\n00:18:08,980 --> 00:18:11,490\nInstead of having to go all\nthe way to the home office for\n\n382\n00:18:11,490 --> 00:18:16,450\nit, we'll have a cached copy\nright here on this server.\n\n383\n00:18:16,450 --> 00:18:18,630\nI really wish that line\nwould save it's color.\n\n384\n00:18:18,630 --> 00:18:20,580\nThere we go.\n\n385\n00:18:20,580 --> 00:18:24,390\nSo, the server right here will have\na copy, so the first person, sure,\n\n386\n00:18:24,390 --> 00:18:27,370\nthey had to go to the headquarters and\nget that copy of the file, but\n\n387\n00:18:27,370 --> 00:18:30,380\nthe second person can get\nit right from here, and\n\n388\n00:18:30,380 --> 00:18:32,270\nthey're in business, or the third,\nfourth, fifth person and so on.\n\n389\n00:18:32,270 --> 00:18:34,880\n>> Absolutely, just stay in a,\nstay in that local area network,\n\n390\n00:18:34,880 --> 00:18:36,325\nget that nice fast speed.\n\n391\n00:18:36,325 --> 00:18:37,700\n>> Mm-hm.\n>> It works well.\n\n392\n00:18:37,700 --> 00:18:38,480\n>> So.\n\n393\n00:18:38,480 --> 00:18:40,295\nThat's what BranchCache does.\n\n394\n00:18:40,295 --> 00:18:43,000\n>> Mm-hm.\n>> Now in it's most pure form,\n\n395\n00:18:43,000 --> 00:18:45,630\nit does require a server\nat the branch office.\n\n396\n00:18:45,630 --> 00:18:48,380\n>> Right.\n>> To serve as the holder of that cache.\n\n397\n00:18:48,380 --> 00:18:50,680\n>> That's known as the hosted cache mode.\n\n398\n00:18:50,680 --> 00:18:54,450\nHosted cache mode, and\nthere's another mode that we have,\n\n399\n00:18:54,450 --> 00:18:59,240\nwhere instead of using a server we use\nthe clients themselves to have the cache,\n\n400\n00:18:59,240 --> 00:19:01,300\nand\n>> If it's a really small office and\n\n401\n00:19:01,300 --> 00:19:04,520\nyou don't have a server out there you\nstill want to do this to support, you\n\n402\n00:19:04,520 --> 00:19:07,560\nknow, that ease of access, we can do it\nwith what we call distributed cache mode.\n\n403\n00:19:07,560 --> 00:19:10,500\nIf we just borrow a little piece of\neach one of those clients' hard drives,\n\n404\n00:19:10,500 --> 00:19:14,010\nby default it's gonna be 5%, but\nthat's an adjustable number, but\n\n405\n00:19:14,010 --> 00:19:15,080\nit does the exact same thing.\n\n406\n00:19:15,080 --> 00:19:18,080\nIt's just gonna cache it across\nthose machines that are on that\n\n407\n00:19:18,080 --> 00:19:19,550\nsubnet over there.\n\n408\n00:19:19,550 --> 00:19:21,210\nYou have to set up a couple\nextra firewall rules.\n\n409\n00:19:21,210 --> 00:19:23,470\nWe'll talk about some of\nthe requirements to set this up.\n\n410\n00:19:23,470 --> 00:19:27,090\nBut, you instead of\ncaching it on the server,\n\n411\n00:19:27,090 --> 00:19:28,560\nthey cache it on the client's machines.\n\n412\n00:19:28,560 --> 00:19:30,790\nAnd then when another client\ngoes to get that file,\n\n413\n00:19:30,790 --> 00:19:33,390\nthey're just gonna pull it from the other,\nfrom their neighbors hard drives.\n\n414\n00:19:34,400 --> 00:19:36,900\nSo, that works out,\nin the end it works out the same way.\n\n415\n00:19:36,900 --> 00:19:38,550\nYou know,\none of the things about BranchCache that,\n\n416\n00:19:38,550 --> 00:19:41,830\nthat we want to mention is it\ndoesn't eliminate all WAN traffic.\n\n417\n00:19:41,830 --> 00:19:44,490\nBecause when they go to\nget that cached copy,\n\n418\n00:19:44,490 --> 00:19:46,530\nI've got to know if that copy\nis still current, right.\n\n419\n00:19:46,530 --> 00:19:50,450\nWhat if that first person accessed that\nfile at eight o'clock this morning, and\n\n420\n00:19:50,450 --> 00:19:52,810\nthen it's ten o'clock, and\nI'm going to get a copy of that file,\n\n421\n00:19:52,810 --> 00:19:57,060\nhow do I know if that cached copy Is\nthe same as the original back there at\n\n422\n00:19:57,060 --> 00:20:00,710\nthe corporate office and so what's gonna\nhappen is your request goes across and\n\n423\n00:20:00,710 --> 00:20:03,330\ninstead of retrieving the entire file,\nif it's cached.\n\n424\n00:20:03,330 --> 00:20:05,190\nIt'll return just the hash value,\n\n425\n00:20:05,190 --> 00:20:09,750\nwe we're gonna turn something on\nhash publication for branch cache.\n\n426\n00:20:09,750 --> 00:20:13,320\nAnd that allows that file server\nback at the corporate office to\n\n427\n00:20:13,320 --> 00:20:16,100\ncreate a hash value for\nthose files and send that across.\n\n428\n00:20:16,100 --> 00:20:19,480\nAnd then if you guys, we we've talked\nabout hashes in other programs.\n\n429\n00:20:19,480 --> 00:20:24,010\nIt compares the hash of the cache content\nTo the hash of the original document.\n\n430\n00:20:24,010 --> 00:20:27,810\nAnd if those match, then it knows that\nthat cache content is current, and\n\n431\n00:20:27,810 --> 00:20:31,440\nit can go ahead and give you that cache\ncopy from your local area network.\n\n432\n00:20:31,440 --> 00:20:35,210\nIf they don't match, well now it knows\nthat the original has changed, and so\n\n433\n00:20:35,210 --> 00:20:38,400\nyou're going to have retrieve that\nfile across the WAN link, and\n\n434\n00:20:38,400 --> 00:20:41,540\nthen you'll update the cache With\nthat new version of that file, so\n\n435\n00:20:41,540 --> 00:20:44,520\nthat the next person goes\ncan get that later version.\n\n436\n00:20:44,520 --> 00:20:47,740\n>> Yeah, so its pretty slick and the nice\nthing about this one is that its one of\n\n437\n00:20:47,740 --> 00:20:51,200\nthose technologies you turn it on,\nand then you just forget about it.\n\n438\n00:20:51,200 --> 00:20:51,750\n>> Right.\n>> Set it and\n\n439\n00:20:51,750 --> 00:20:54,550\nforget it like the rotisserie\nchicken commercials.\n\n440\n00:20:54,550 --> 00:20:55,140\n>> Exactly.\n\n441\n00:20:55,140 --> 00:20:58,260\n>> So, once you get it configured and\nturned on, you just walk away, and\n\n442\n00:20:58,260 --> 00:21:01,650\nit manages it\n>> Itself as you access files it's\n\n443\n00:21:01,650 --> 00:21:05,530\ncaching them, so the first time you access\na file you're not really saving any time.\n\n444\n00:21:05,530 --> 00:21:06,490\n>> Right.\n>> Right, but\n\n445\n00:21:06,490 --> 00:21:09,215\nthe followup times that you access\nyou can really save some time.\n\n446\n00:21:09,215 --> 00:21:10,480\n>> Mm-hm.\n>> Assuming that the files haven't\n\n447\n00:21:10,480 --> 00:21:10,990\nchanged, right?\n\n448\n00:21:10,990 --> 00:21:11,990\n>> Right.\n>> If the file's changed,\n\n449\n00:21:11,990 --> 00:21:14,205\nyou gotta download the new copy,\notherwise you're out of date.\n\n450\n00:21:14,205 --> 00:21:16,130\n>> Mm-hm.\n>> So it's kind of a cool one.\n\n451\n00:21:16,130 --> 00:21:19,070\n>> We could do DFS,\nthe distributive file system.\n\n452\n00:21:19,070 --> 00:21:19,620\n>> Right.\n\n453\n00:21:19,620 --> 00:21:21,880\n>> Where you've got a file\nshare at the headquarters and\n\n454\n00:21:21,880 --> 00:21:23,675\nyou synchronize it down to the branch.\n\n455\n00:21:23,675 --> 00:21:24,360\n>> Mm-hm.\n\n456\n00:21:24,360 --> 00:21:25,780\n>> And that's effective also, right?\n\n457\n00:21:25,780 --> 00:21:27,680\n>> Yeah.\n>> And then people work locally.\n\n458\n00:21:27,680 --> 00:21:33,570\nThe problem with DFS, it's gonna\nsynchronize the entire store of data.\n\n459\n00:21:33,570 --> 00:21:36,910\n>> Even if these people\naren't accessing this data.\n\n460\n00:21:36,910 --> 00:21:41,330\nWith branch cache it's only storing\nthe data they actually use so\n\n461\n00:21:41,330 --> 00:21:42,930\nit's much more efficient.\n\n462\n00:21:42,930 --> 00:21:44,260\nSo if I deploy, oh go ahead.\n\n463\n00:21:44,260 --> 00:21:47,400\n>> And we're doing it, the reason we're\ninstalling this or configuring this is\n\n464\n00:21:47,400 --> 00:21:50,670\nbecause I've got limited WAN\n>> Bandwidth out there right?\n\n465\n00:21:50,670 --> 00:21:52,050\nSo putting DFS out there, yeah.\n\n466\n00:21:52,050 --> 00:21:54,160\nYou're replicating all\nthose files over and\n\n467\n00:21:54,160 --> 00:21:56,230\nyou're just soaking up\nthat bandwidth again.\n\n468\n00:21:56,230 --> 00:21:57,110\n>> Yeah.\nLet's, let's say that\n\n469\n00:21:57,110 --> 00:21:59,545\nour central store was\n12 terabytes in size.\n\n470\n00:21:59,545 --> 00:22:01,090\n>> Mm-hm.\n>> So maybe we got 12 terabytes of\n\n471\n00:22:01,090 --> 00:22:02,340\ncorporate storage.\n\n472\n00:22:02,340 --> 00:22:06,270\nIf I wanna do DFS The very first\nreplication is gonna replicate all 12\n\n473\n00:22:06,270 --> 00:22:06,810\nterabytes.\n\n474\n00:22:06,810 --> 00:22:08,950\n>> Right.\n>> That may overwhelm this line, so\n\n475\n00:22:08,950 --> 00:22:11,210\nnow I'm gotta talk about doing a back up.\n\n476\n00:22:11,210 --> 00:22:13,970\nAnd transporting the back up and\nrestoring it to the system, or\n\n477\n00:22:13,970 --> 00:22:17,210\nat least seeding the machines ahead\nof time before sending it out there.\n\n478\n00:22:17,210 --> 00:22:18,250\nThere's a lot of concerns\n>> Right.\n\n479\n00:22:18,250 --> 00:22:20,760\n>> We have to go through to get that\nmachine populated with that data.\n\n480\n00:22:20,760 --> 00:22:22,550\n>> Exactly.\nAnd if those files change a lot.\n\n481\n00:22:22,550 --> 00:22:23,430\nI mean, every time you start\n\n482\n00:22:23,430 --> 00:22:24,300\nchanging files\n>> Mm-hm.\n\n483\n00:22:24,300 --> 00:22:25,980\n>> It's gotta replicate those changes out.\n\n484\n00:22:25,980 --> 00:22:29,070\nSo, again, you're just, if it's\na small office where you've got that\n\n485\n00:22:29,070 --> 00:22:31,040\nlimited bandwidth,\nprobably not the best solution.\n\n486\n00:22:31,040 --> 00:22:33,805\nYeah, versus branch cache that we can\nturn on in the middle of the day.\n\n487\n00:22:33,805 --> 00:22:34,380\n>> Mm-hm.\n\n488\n00:22:34,380 --> 00:22:36,770\n>> And just from that point\non when people access file,\n\n489\n00:22:36,770 --> 00:22:38,040\nit'll cache them at that time.\n\n490\n00:22:38,040 --> 00:22:39,530\nPeople are gonna access the files anyway.\n\n491\n00:22:39,530 --> 00:22:41,390\nSo it creates zero performance impact.\n\n492\n00:22:41,390 --> 00:22:42,010\n>> Exactly.\n\n493\n00:22:42,010 --> 00:22:43,500\n>> And then it starts to cache them.\n\n494\n00:22:43,500 --> 00:22:45,285\nNow there are some concerns.\n\n495\n00:22:45,285 --> 00:22:46,050\n>> Mm-hm.\n\n496\n00:22:46,050 --> 00:22:49,450\n>> If you're doing branch cache onto\na physical server like this, and\n\n497\n00:22:49,450 --> 00:22:52,170\nsomebody steals the server\nthat cache is there, right.\n\n498\n00:22:52,170 --> 00:22:55,720\nSo we normally combine this\nwith things like bit locker and\n\n499\n00:22:55,720 --> 00:22:58,205\nstuff to to ensure the data is safe.\n\n500\n00:22:58,205 --> 00:23:01,065\nWhen that becomes a challenge is\nif you're doing distributed cache.\n\n501\n00:23:01,065 --> 00:23:04,345\nBecause little pieces of that cache\nrun each of these machines, and\n\n502\n00:23:04,345 --> 00:23:08,940\nit is possible that a file could\nbe cached on somebody's laptop.\n\n503\n00:23:08,940 --> 00:23:11,170\nThat they wouldn't\nnormally have access to.\n\n504\n00:23:11,170 --> 00:23:12,250\n>> Right.\n>> You know somebody\n\n505\n00:23:12,250 --> 00:23:14,500\nelse in the office had permission\nto access that file and\n\n506\n00:23:14,500 --> 00:23:16,940\na guy cached his other\nlaptop that can't happen.\n\n507\n00:23:16,940 --> 00:23:20,580\nSo again we want to make sure we couple\nthis with something like bitlock\n\n508\n00:23:20,580 --> 00:23:23,000\nto ensure that the data is protected and\nsafe.\n\n509\n00:23:23,000 --> 00:23:25,010\nYou don't want somebody\nstealing a laptop and\n\n510\n00:23:25,010 --> 00:23:26,860\ngetting part of this file cache on there.\n\n511\n00:23:26,860 --> 00:23:28,240\nRight that would be, that would be.\n\n512\n00:23:28,240 --> 00:23:30,800\nYeah, permissions are still checked,\nI mean, that's still maintained, so\n\n513\n00:23:30,800 --> 00:23:33,330\nif you don't have access to the file,\nyou won't get it through the cache, but\n\n514\n00:23:33,330 --> 00:23:36,820\nas Don's saying, we could do it\nmaliciously and that's definitely possible\n\n515\n00:23:36,820 --> 00:23:39,120\ncuz it doesn't encrypt,\nneither one of the modes are encrypted.\n\n516\n00:23:39,120 --> 00:23:39,730\n>> Yep.\n>> And\n\n517\n00:23:39,730 --> 00:23:43,290\ndon't have anything built in to encrypt it\nwith, so you gotta bring in Bitlocker or\n\n518\n00:23:43,290 --> 00:23:44,300\nsomething else.\n\n519\n00:23:44,300 --> 00:23:48,170\n>> Yeah, Bitlocker and this, this WAN\nlink should either be a VPN tunnel or\n\n520\n00:23:48,170 --> 00:23:49,910\nyou run IP\n>> Psec over to whatever, so\n\n521\n00:23:49,910 --> 00:23:52,090\nthat's kind of the way this\nis all suppose to work.\n\n522\n00:23:52,090 --> 00:23:55,390\nNow, I know in the Windows 8 show and\nin the Windows 7 show,\n\n523\n00:23:55,390 --> 00:23:56,630\nwe did them both, I think.\n\n524\n00:23:56,630 --> 00:24:00,170\nWe showed how to setup branch\ncache from the client side.\n\n525\n00:24:00,170 --> 00:24:02,700\n>> Right.\n>> How to see whether it was working and\n\n526\n00:24:02,700 --> 00:24:03,430\nevaluate that stuff.\n\n527\n00:24:03,430 --> 00:24:06,620\nBut we really didn't dive\ninto the server side.\n\n528\n00:24:06,620 --> 00:24:08,970\nSo what we wanna do is show\nyou how to set that up.\n\n529\n00:24:08,970 --> 00:24:11,920\nHow to get branch cache enabled on\na server and get it put into action.\n\n530\n00:24:11,920 --> 00:24:14,500\nAll right so Mike, you've got,\nyou've got a lot of machine.\n\n531\n00:24:14,500 --> 00:24:18,410\n>> I do,\nI've got the online live laughs, or the.\n\n532\n00:24:18,410 --> 00:24:19,000\nVLabs.\n\n533\n00:24:19,000 --> 00:24:21,590\n>> VLabs, there we go, that we can use.\n\n534\n00:24:21,590 --> 00:24:23,340\nWe want to get started on that.\n\n535\n00:24:23,340 --> 00:24:25,910\n>> You know, we do only have about\nfive minutes left on the segment.\n\n536\n00:24:25,910 --> 00:24:26,960\n>> It's up to you.\n\n537\n00:24:26,960 --> 00:24:28,850\nWe can start installing the roles.\n\n538\n00:24:28,850 --> 00:24:29,900\n>> Okay, let's do that.\n\n539\n00:24:29,900 --> 00:24:31,040\n>> And then we'll get[?] them installed.\n\n540\n00:24:31,040 --> 00:24:32,110\nIt's not like they take that long.\n\n541\n00:24:32,110 --> 00:24:32,850\n>> Perfect.\n>> Okay.\n\n542\n00:24:32,850 --> 00:24:33,780\nAll right, so\n\n543\n00:24:33,780 --> 00:24:36,650\na couple of things we're going to do is,\nwhen we go to configure branch caches,\n\n544\n00:24:36,650 --> 00:24:41,360\nis we've got to install the roles on\nthe server back at the corporate office,\n\n545\n00:24:41,360 --> 00:24:45,130\nthe one that's hosting the content that\nyou want cached out of the branch office.\n\n546\n00:24:45,130 --> 00:24:47,690\nAnd then depending if we're\ndoing distributive cache mode,\n\n547\n00:24:47,690 --> 00:24:48,860\nwe're gonna configure our clients.\n\n548\n00:24:48,860 --> 00:24:49,720\nWe're doing hosted cache,\n\n549\n00:24:49,720 --> 00:24:53,230\nI also have to install a feature\non that machine out there.\n\n550\n00:24:53,230 --> 00:24:55,270\nThere's two of them, I'll go ahead and\npull up this wizard here.\n\n551\n00:24:55,270 --> 00:24:58,170\nSo, I'm on DC, I've got a limited\nnumber of computers here.\n\n552\n00:24:58,170 --> 00:25:01,455\nWe're gonna use our domain controller\nas the file share server as well.\n\n553\n00:25:01,455 --> 00:25:04,640\n>> [LAUGH] Maybe not\nthe best idea in the world.\n\n554\n00:25:04,640 --> 00:25:07,770\nAnd I'm gonna pull up our add rules and\nfeatures wizard.\n\n555\n00:25:09,340 --> 00:25:10,570\nClick next a few times.\n\n556\n00:25:12,280 --> 00:25:14,210\nWe get to our good stuff.\n\n557\n00:25:14,210 --> 00:25:17,630\nAnd then here, if this is the server\nthat's hosting the content\n\n558\n00:25:17,630 --> 00:25:22,320\nthen you're gonna be installing the branch\ncache for network files roll service.\n\n559\n00:25:22,320 --> 00:25:24,680\nWhich is another one of those\nsub-components of the file and\n\n560\n00:25:24,680 --> 00:25:25,510\nstorage services.\n\n561\n00:25:25,510 --> 00:25:27,390\nSo that one's right here,\n\n562\n00:25:27,390 --> 00:25:30,140\none thing we didn't mention you\ncan also cache web content.\n\n563\n00:25:30,140 --> 00:25:34,790\nSo if you had a corporate intranet server\nthat had it on a company calendar for\n\n564\n00:25:34,790 --> 00:25:36,680\nmeetings or something like that.\n\n565\n00:25:36,680 --> 00:25:38,970\nWell, if the people out at\nthe branch office can't get to that,\n\n566\n00:25:38,970 --> 00:25:40,730\nthey can't see when the meetings are,\nthings like that.\n\n567\n00:25:40,730 --> 00:25:44,690\nSo I could choose to cache\nweb content out there as well\n\n568\n00:25:44,690 --> 00:25:48,520\nin which case you install the BranchCache\nfeature on the web server.\n\n569\n00:25:48,520 --> 00:25:52,240\nSo, if it's a file server, we're going to\ninstall BranchCache for network files.\n\n570\n00:25:52,240 --> 00:25:57,020\nif it is a web server, we're going to\nbe installing the branch cache feature.\n\n571\n00:25:57,020 --> 00:25:58,670\nSo I\"m just clicking next,\nI went through that fast.\n\n572\n00:25:58,670 --> 00:26:01,030\nThere's no additional features or\nanything that we need so\n\n573\n00:26:01,030 --> 00:26:03,240\nI'm going to get that installed, and\nthen I'm going to go to the server and\n\n574\n00:26:03,240 --> 00:26:04,390\nthen I'm going to go\nover to the server and\n\n575\n00:26:04,390 --> 00:26:06,880\nwe're going to pretend the server\nis out at the branch office and\n\n576\n00:26:06,880 --> 00:26:10,350\nso we're going to do hosted cache mode and\nthen same thing,\n\n577\n00:26:10,350 --> 00:26:15,260\nadd roles and features and\nin this wizard we'll click next a few time\n\n578\n00:26:16,570 --> 00:26:20,170\nLike I was gonna say,\nI always just click Next three times.\n\n579\n00:26:20,170 --> 00:26:22,095\nThat always gets you to the roles screen.\n\n580\n00:26:22,095 --> 00:26:23,790\n>> [LAUGH] But this is a feature.\n\n581\n00:26:23,790 --> 00:26:28,010\nSo out in the, in the branch\noffice on the hosted cache server,\n\n582\n00:26:28,010 --> 00:26:29,970\nwe're gonna be installing branch cache.\n\n583\n00:26:31,690 --> 00:26:35,670\nAnd I'll click next,\nconfirm it and install so\n\n584\n00:26:35,670 --> 00:26:38,320\nthose are the two whether\nit's three roles or\n\n585\n00:26:38,320 --> 00:26:42,190\nfeatures that we can use as branch cache\nfor network files if it's a file server.\n\n586\n00:26:42,190 --> 00:26:45,930\nIt's branch cache feature if if it's a web\nserver and on the hosted cache out there\n\n587\n00:26:45,930 --> 00:26:49,580\nyou're going to be doing\nthe branch cache feature as well.\n\n588\n00:26:49,580 --> 00:26:51,920\n>> Awesome, so\nonce those are installed we're ready to\n\n589\n00:26:51,920 --> 00:26:52,960\n>> Kick it in, in gear and\n\n590\n00:26:52,960 --> 00:26:55,320\nactually see it in action,\nbut let's do this.\n\n591\n00:26:55,320 --> 00:26:59,780\nLet's stop here and take a break, and when\nwe get back we'll see the results of what\n\n592\n00:26:59,780 --> 00:27:04,320\nhappens when those roles get put in and\nsome of the little configuration options.\n\n593\n00:27:04,320 --> 00:27:05,150\n>> Smoking.\n>> [LAUGH] It's exciting.\n\n594\n00:27:05,150 --> 00:27:07,690\nAll right, well, stay tuned,\nand we'll be back in a few.\n\n595\n00:27:07,690 --> 00:27:15,271\n[MUSIC]\n\n596\n00:27:15,271 --> 00:27:16,950\nHi, and welcome back, everybody.\n\n597\n00:27:16,950 --> 00:27:19,360\nSo, before the break, we just installed.\n\n598\n00:27:19,360 --> 00:27:22,195\nWe installed the branch cache for\nfile services.\n\n599\n00:27:22,195 --> 00:27:24,100\n>> Mm-hm.\n>> On the content server.\n\n600\n00:27:24,100 --> 00:27:24,850\n>> Right.\n>> Or, you know,\n\n601\n00:27:24,850 --> 00:27:25,940\nour server with the file share.\n\n602\n00:27:25,940 --> 00:27:26,500\n>> Yep.\n\n603\n00:27:26,500 --> 00:27:30,040\n>> And we installed branch cache on\nthe server that's gonna be out at\n\n604\n00:27:30,040 --> 00:27:30,960\nthe remote office.\n\n605\n00:27:30,960 --> 00:27:32,040\nBut we didn't configure anything, right?\n\n606\n00:27:32,040 --> 00:27:33,560\n>> Correct.\n>> We just installed those two little\n\n607\n00:27:33,560 --> 00:27:34,975\nthings and things.\n\n608\n00:27:34,975 --> 00:27:36,700\n>> Mm-hm.\n>> And we saw the role on one and\n\n609\n00:27:36,700 --> 00:27:37,850\nthe feature on the other.\n\n610\n00:27:37,850 --> 00:27:39,830\n>> Yep, exactly.\nNow we need to get it actually working.\n\n611\n00:27:39,830 --> 00:27:41,330\n>> We do. We do.\nSo we got a couple things we gotta do.\n\n612\n00:27:41,330 --> 00:27:44,625\nYou know, once you install back on your\ncontent server at the corporate office.\n\n613\n00:27:44,625 --> 00:27:47,535\nWhere we've installed that\nbranch cache for network files.\n\n614\n00:27:47,535 --> 00:27:49,385\nI can see it's,\nthe wizard's finished up here.\n\n615\n00:27:49,385 --> 00:27:51,765\nSo the, the role is installed.\n\n616\n00:27:51,765 --> 00:27:54,535\nThere's nothing really to configure\nas far as going into a console or\n\n617\n00:27:54,535 --> 00:27:57,215\nanything like that, but there's a couple\ngroup policies that we need to configure.\n\n618\n00:27:58,510 --> 00:27:59,620\nFor my domain again.\n\n619\n00:27:59,620 --> 00:28:02,410\nWe wouldn't normally do this\non the domain controller.\n\n620\n00:28:02,410 --> 00:28:06,620\nSo what I'm gonna do is instead of using\nour, our group policy I'm actually just\n\n621\n00:28:06,620 --> 00:28:11,370\ngonna use the local policy to work\non this domain controller here.\n\n622\n00:28:11,370 --> 00:28:12,720\nBecause I don't want to have to move him.\n\n623\n00:28:12,720 --> 00:28:13,510\nI'd want to, I could,\n\n624\n00:28:13,510 --> 00:28:15,150\nI guess I could attach a GPO to the\n>> Nah.\n\n625\n00:28:15,150 --> 00:28:17,490\n>> Main controller's OU but\nit's just as easy here.\n\n626\n00:28:17,490 --> 00:28:19,300\n>> Yeah.\nThe idea is if you have like ten file\n\n627\n00:28:19,300 --> 00:28:20,930\nservers at the home office,\n>> Mm-hm.\n\n628\n00:28:20,930 --> 00:28:24,420\n>> You can create one GPO that applied to\nall ten of them for enabling branch cache.\n\n629\n00:28:24,420 --> 00:28:25,230\n>> Exactly.\n\n630\n00:28:25,230 --> 00:28:25,790\nExactly.\n\n631\n00:28:25,790 --> 00:28:28,680\nSo the setting we're looking for and\nI got to double check on that is our,\n\n632\n00:28:28,680 --> 00:28:31,230\nremember where [INAUDIBLE]\nComputer configuration.\n\n633\n00:28:31,230 --> 00:28:35,280\nAs a couple we're gonna do Windows\nsettings and then we'll wait.\n\n634\n00:28:35,280 --> 00:28:37,850\nSometimes it takes a minute\nto expand that part out.\n\n635\n00:28:37,850 --> 00:28:39,530\nActually I take that back.\n\n636\n00:28:39,530 --> 00:28:41,140\nLet's go under administrative\ntemplates first.\n\n637\n00:28:41,140 --> 00:28:42,630\nAnd we're gonna go\nadministrative templates and\n\n638\n00:28:42,630 --> 00:28:46,440\nthen into the network then I've got a\ncouple places here that we're gonna look.\n\n639\n00:28:46,440 --> 00:28:48,830\nOne is under this landman server,\n\n640\n00:28:48,830 --> 00:28:53,050\nunder landman server is where I'm gonna\nsee my hash publication for branch cache.\n\n641\n00:28:53,050 --> 00:28:54,370\nNow I've got a couple options here.\n\n642\n00:28:55,440 --> 00:28:57,705\nFirst off, I'm gonna turn on hash\npublication for branch cache.\n\n643\n00:28:57,705 --> 00:29:02,110\nTalked about that in that previous\nsegment, this is where when they go to\n\n644\n00:29:02,110 --> 00:29:05,670\nget a file from the cached\ncontent out at the branch office,\n\n645\n00:29:05,670 --> 00:29:08,340\nthey've gotta make sure that\nit's still the current version.\n\n646\n00:29:08,340 --> 00:29:12,010\nSo I'm gonna enable branch, or\nenable hash publication or branch cache.\n\n647\n00:29:12,010 --> 00:29:13,900\nWhen you do that,\nyou've got a couple options here.\n\n648\n00:29:13,900 --> 00:29:17,960\nI can do that for all shares, whether\nthey're part of my branch cache or not.\n\n649\n00:29:17,960 --> 00:29:22,000\nOr I can just allow hash publication for\nshared folders in\n\n650\n00:29:22,000 --> 00:29:25,100\nwhich the branch cache is enabled,\nand that;s the one I'm going to use.\n\n651\n00:29:25,100 --> 00:29:28,510\nSo we'll turn that on and\nwe'll click okay there.\n\n652\n00:29:30,350 --> 00:29:31,650\nThe other one we don't really mess with.\n\n653\n00:29:31,650 --> 00:29:34,890\nHash version for support if you\nwant to change the different,\n\n654\n00:29:34,890 --> 00:29:37,500\nif you had an issue with the different\nversions of hashing that they were\n\n655\n00:29:37,500 --> 00:29:39,830\nusing [INAUDIBLE] In our case,\nthat one's gonna be fine.\n\n656\n00:29:40,920 --> 00:29:45,325\nThe next thing I'm gonna do,\nus, is, close this.\n\n657\n00:29:45,325 --> 00:29:48,680\n[LAUGH] And I've gotta create a share.\n\n658\n00:29:48,680 --> 00:29:51,370\nAnd I'm gonna have to enable\nbranch cache on that.\n\n659\n00:29:51,370 --> 00:29:54,890\nSo I'm gonna come into, I'll just make\nit over here on the c drive, for now.\n\n660\n00:29:56,080 --> 00:29:58,460\nLooks like we've got a folder\ncalled shares, how about that?\n\n661\n00:29:58,460 --> 00:29:59,160\nWe'll put it in there.\n\n662\n00:30:00,580 --> 00:30:01,080\nGood place.\n\n663\n00:30:02,460 --> 00:30:05,250\nSo I make a new folder and I'll call it\nsomething like, I don't know, CorpDocs.\n\n664\n00:30:06,550 --> 00:30:08,580\nSomething like that and\nI'm gonna share it, and\n\n665\n00:30:08,580 --> 00:30:11,940\nwe're not all too worried\nabout security at this point.\n\n666\n00:30:11,940 --> 00:30:14,200\nSo, to speed things up,\nI'm gonna do my share and\n\n667\n00:30:14,200 --> 00:30:18,330\nNTFS permissions at the same time,\nwith everyone.\n\n668\n00:30:20,560 --> 00:30:22,260\nObviously, not a best practice.\n\n669\n00:30:26,100 --> 00:30:27,325\nBut I just need a quick share.\n\n670\n00:30:27,325 --> 00:30:28,740\nCuz one of the next thing you've gotta do.\n\n671\n00:30:28,740 --> 00:30:30,510\nYou've gotta enable the hash publication.\n\n672\n00:30:30,510 --> 00:30:32,840\nAnd then you've gotta enable\nbranch cache on the share.\n\n673\n00:30:32,840 --> 00:30:33,880\nWhen you turn on branch cache,\n\n674\n00:30:33,880 --> 00:30:36,200\nit doesn't automatically cache\nany share they connect to.\n\n675\n00:30:36,200 --> 00:30:38,220\nOnly the ones that you enable it on.\n\n676\n00:30:38,220 --> 00:30:40,290\nYou might have some shares that,\nas Don was saying, you know,\n\n677\n00:30:40,290 --> 00:30:41,740\nwe gotta worry about security.\n\n678\n00:30:41,740 --> 00:30:45,810\nIt's not encrypted over there so, there\nmight be some shares that I do want to be\n\n679\n00:30:45,810 --> 00:30:47,900\ncached out there at the branch office.\n\n680\n00:30:47,900 --> 00:30:49,650\nWhich is why it's not done automatically.\n\n681\n00:30:49,650 --> 00:30:51,010\nYou have to do it on each one.\n\n682\n00:30:51,010 --> 00:30:52,870\nAnd you come in to your\nadvanced sharing options.\n\n683\n00:30:52,870 --> 00:30:55,890\nOff the sharing tab, so I pulled up\nthe properties for the folder or for\n\n684\n00:30:55,890 --> 00:30:59,700\nthe share, gone to the sharing tab,\nclick advanced sharing.\n\n685\n00:30:59,700 --> 00:31:03,330\nAnd then go into my caching options and\nthis is where I'm gonna see a little check\n\n686\n00:31:03,330 --> 00:31:06,640\nmark for enable branch cache for\nnetwork files or enable branch cache.\n\n687\n00:31:06,640 --> 00:31:07,220\nTurn that on.\n\n688\n00:31:08,220 --> 00:31:09,450\nAnd that's all you have to do.\n\n689\n00:31:09,450 --> 00:31:11,190\nClick okay all the way back out and close.\n\n690\n00:31:12,190 --> 00:31:13,200\nAnd the share is set up.\n\n691\n00:31:14,280 --> 00:31:16,490\nPut a little dial over,\nactually gonna see anything, but\n\n692\n00:31:16,490 --> 00:31:19,240\nwe'll make a new document in there.\n\n693\n00:31:20,990 --> 00:31:25,430\nWe'll call it the touch pad from,\nyou know what I was going to say.\n\n694\n00:31:25,430 --> 00:31:26,790\nYeah.\n\n695\n00:31:26,790 --> 00:31:28,090\nWhere did it go?\n\n696\n00:31:28,090 --> 00:31:29,930\n>> It jumped out of your BM.\n\n697\n00:31:29,930 --> 00:31:30,442\n>> There we go.\n\n698\n00:31:30,442 --> 00:31:33,360\nAll right, so let's see, and\n\n699\n00:31:33,360 --> 00:31:37,238\nmy file explorer closed as well and\nas new document.\n\n700\n00:31:37,238 --> 00:31:40,194\nGood enough.\n\n701\n00:31:40,194 --> 00:31:44,150\n[NOISE] We'll call it PhoneList,\nwe'll make it look good.\n\n702\n00:31:44,150 --> 00:31:45,565\nAll right, so we've.\n\n703\n00:31:45,565 --> 00:31:49,815\nWe've installed the roll, we have\nenabled brand to cache publication.\n\n704\n00:31:49,815 --> 00:31:52,285\nAnd we've enabled BranchCache\non that particular share.\n\n705\n00:31:52,285 --> 00:31:56,055\nSo at this point the content\nserver is pretty much good to go.\n\n706\n00:31:56,055 --> 00:31:57,605\nSo the next thing we're gonna\ndo is we're gonna go out and\n\n707\n00:31:57,605 --> 00:32:01,130\nconfigure our server at the branch office.\n\n708\n00:32:01,130 --> 00:32:03,420\nWhere we installed that\nBranchCache feature.\n\n709\n00:32:03,420 --> 00:32:07,250\nAnd that has finished so\nwe can close that one.\n\n710\n00:32:07,250 --> 00:32:10,460\nAnd then we're going to,\nlet's see what we need to do.\n\n711\n00:32:10,460 --> 00:32:12,340\nWe need To go back.\n\n712\n00:32:12,340 --> 00:32:14,920\nI'm trying to think if I should\nuse the group policy for this one.\n\n713\n00:32:18,828 --> 00:32:20,270\nEh, no,\nI think we'll leave that one there.\n\n714\n00:32:20,270 --> 00:32:21,580\nSo we've installed that feature.\n\n715\n00:32:21,580 --> 00:32:22,630\nSo here's what we're gonna do next.\n\n716\n00:32:22,630 --> 00:32:27,270\nWe're gonna go back over the DC and\nwe'll take a look at our group policy.\n\n717\n00:32:27,270 --> 00:32:30,129\nSo the next thing I wanna do,\nthen, is configure the clients.\n\n718\n00:32:30,129 --> 00:32:32,570\nAnd to set up the clients,\nwe've seen this in, I believe,\n\n719\n00:32:32,570 --> 00:32:35,720\nsome other episodes we'll go\ntake a quick peek at it here.\n\n720\n00:32:35,720 --> 00:32:37,800\nI'm gonna open up my\nGroup Policy Management Console,\n\n721\n00:32:37,800 --> 00:32:38,970\nif my mouse will play along.\n\n722\n00:32:41,660 --> 00:32:48,580\nAnd what I did was I created an OU, and I\nmoved my two clients in there, all right?\n\n723\n00:32:48,580 --> 00:32:51,750\nSo I'm gonna create a new GPO.\n\n724\n00:32:51,750 --> 00:32:53,809\nAnd I'll just call it.\n\n725\n00:32:56,708 --> 00:32:58,280\nBranchCache for simplicity.\n\n726\n00:32:58,280 --> 00:33:02,490\nAnd then I'll go back in and\nedit this policy.\n\n727\n00:33:02,490 --> 00:33:05,570\n>> And it's important you do this\none with a GPO because, you know,\n\n728\n00:33:05,570 --> 00:33:08,987\nwhat happens when you add a new client\nout of that branch office, right?\n\n729\n00:33:08,987 --> 00:33:10,472\n>> Hm-mm.\n>> You want these settings\n\n730\n00:33:10,472 --> 00:33:12,759\nto automatically apply\nto new machines too.\n\n731\n00:33:12,759 --> 00:33:13,782\nIf we did this manually,\n\n732\n00:33:13,782 --> 00:33:17,030\nwe'd have to remember to do it every\ntime we added a new computer out there.\n\n733\n00:33:17,030 --> 00:33:17,980\n>> That's a very good point.\n\n734\n00:33:17,980 --> 00:33:19,228\nAnd you can do it manually,\n\n735\n00:33:19,228 --> 00:33:22,771\nI mean there's PowerShell commands that\nyou can configure all of this with.\n\n736\n00:33:22,771 --> 00:33:24,270\nBut as Don said, not a very good way.\n\n737\n00:33:24,270 --> 00:33:25,856\nIt's not a, you know,\nwe always want to look for\n\n738\n00:33:25,856 --> 00:33:27,189\nthat centralized management, right.\n\n739\n00:33:28,670 --> 00:33:30,460\nSo let's see.\nFor my client ends of things,\n\n740\n00:33:30,460 --> 00:33:33,070\nI'm gonna head first into,\ninto the same place here.\n\n741\n00:33:33,070 --> 00:33:38,100\nWell, actually, let's go into our\nadministrative templates, and\n\n742\n00:33:38,100 --> 00:33:39,690\nthen network this time.\n\n743\n00:33:39,690 --> 00:33:41,945\nAnd I'm gonna click on BranchCache.\n\n744\n00:33:42,970 --> 00:33:43,570\nAnd so what I'm going to,\n\n745\n00:33:43,570 --> 00:33:45,750\nthe first one you gotta do is\nyou gotta turn on BranchCache.\n\n746\n00:33:45,750 --> 00:33:48,880\nYou gotta let them know that\nthey are supposed to use that.\n\n747\n00:33:48,880 --> 00:33:51,070\nSo we're going to turn this on.\n\n748\n00:33:51,070 --> 00:33:53,555\nAnd it's pretty simple when it's\njust enabled or disabled, and\n\n749\n00:33:53,555 --> 00:33:56,900\nthat's going to enable BranchCache\non those client machines.\n\n750\n00:33:56,900 --> 00:33:59,054\nSo we'll click okay to that one.\n\n751\n00:33:59,054 --> 00:34:00,989\nAnd then I've got a couple\nof different policies here,\n\n752\n00:34:00,989 --> 00:34:02,274\ndepending on what I'm trying to do.\n\n753\n00:34:02,274 --> 00:34:07,471\nI've got the, the back in 2008 r2,\nyou've got the setBranchCache for\n\n754\n00:34:07,471 --> 00:34:11,480\ndistributed cache mode,\nsetBranchCache hosted cache mode.\n\n755\n00:34:11,480 --> 00:34:14,630\nSo you're telling the client machines,\nam I supposed to look for\n\n756\n00:34:14,630 --> 00:34:17,935\na hosted cache serve on my subnet\nhere in the branch office?\n\n757\n00:34:17,935 --> 00:34:21,469\nOr am I going to be checking my neighbors\nand see if they've got that content cache,\n\n758\n00:34:21,469 --> 00:34:23,005\nyou know,\nif we're doing distributed cache mode.\n\n759\n00:34:23,005 --> 00:34:26,069\nAnd then what you would do after that,\nonce you've picked one,\n\n760\n00:34:26,069 --> 00:34:27,735\nyou turn one of those on.\n\n761\n00:34:27,735 --> 00:34:31,084\nAnd then you would configure\nthe hosted cache server, and\n\n762\n00:34:31,084 --> 00:34:34,545\nyou would tell it who their\nhosted cache server was.\n\n763\n00:34:34,545 --> 00:34:38,440\nThe problem with that, or the,\nthe limitation was the fact that for\n\n764\n00:34:38,440 --> 00:34:41,880\neach branch, I would have to create\na separate policy telling them who\n\n765\n00:34:41,880 --> 00:34:45,670\nthat particular branch was supposed\nto use for the hosted cache.\n\n766\n00:34:45,670 --> 00:34:50,310\nNow we can actually create what is\ncalled a service connection point, and\n\n767\n00:34:50,310 --> 00:34:51,900\nthy can browse Active Directory and\n\n768\n00:34:51,900 --> 00:34:55,310\nthey can discover this hosted\ncache server on their own.\n\n769\n00:34:55,310 --> 00:34:58,480\nIn fact lets, before I implement that\npolicy, let me show you that command.\n\n770\n00:34:58,480 --> 00:35:00,955\nI knew I went to server one for\na reason earlier.\n\n771\n00:35:00,955 --> 00:35:03,330\n>> [LAUGH]\n>> I'm going to open up PowerShell\n\n772\n00:35:04,540 --> 00:35:06,050\non this guy.\n\n773\n00:35:06,050 --> 00:35:12,430\nAnd I'm going to run this command,\nit's Enable_BCHostedServer.\n\n774\n00:35:12,430 --> 00:35:17,530\nBc, Enable_BCHostedServer,\nand then a -RegisterSCP.\n\n775\n00:35:20,970 --> 00:35:25,930\nRegisterSCP, and assuming that I'm logged\non with an account that has administrative\n\n776\n00:35:25,930 --> 00:35:31,220\naccess I should get I should create\nthat object in Active Directory.\n\n777\n00:35:31,220 --> 00:35:35,240\nAnd that's what's going to allow the\nclients to find it without me having to\n\n778\n00:35:35,240 --> 00:35:37,440\nspecify who their hosted cache server is.\n\n779\n00:35:39,445 --> 00:35:41,365\nI'm gonna switch back over the DC and\nfinish this up.\n\n780\n00:35:41,365 --> 00:35:42,257\nSo, as I was saying,\n\n781\n00:35:42,257 --> 00:35:45,565\nyou know, these were primarily used\nbefore we had that capability.\n\n782\n00:35:45,565 --> 00:35:49,243\nNow, I can just come to here,\nenable automatic hosted cache discovery by\n\n783\n00:35:49,243 --> 00:35:52,115\nservice connection point and\nI can enable that.\n\n784\n00:35:53,260 --> 00:35:54,120\nAnd that's all I have to do.\n\n785\n00:35:55,300 --> 00:35:56,420\nMakes it a lot easier.\n\n786\n00:35:56,420 --> 00:35:57,210\nAnd I, so I can really,\n\n787\n00:35:57,210 --> 00:36:00,703\nI can create a policy up at the domain\nlevel, you know, if I wanted to.\n\n788\n00:36:00,703 --> 00:36:02,535\n>> Hm-mm.\n>> And apply this to all my different\n\n789\n00:36:02,535 --> 00:36:04,710\nbranches,and instead of having to have a,\n\n790\n00:36:04,710 --> 00:36:06,959\nseparate policy for\neach one of my branches.\n\n791\n00:36:08,440 --> 00:36:11,260\nOther ones that you might if you're\ngonna be doing distributed cache\n\n792\n00:36:11,260 --> 00:36:14,290\nmode there's a set percentage of disk\nspace used on client computer cache.\n\n793\n00:36:14,290 --> 00:36:17,520\nTrying to just think of\nanything else important there.\n\n794\n00:36:17,520 --> 00:36:20,520\nThat's think that's all\nwe need to change there.\n\n795\n00:36:22,700 --> 00:36:25,520\nThe other thing we've gotta do to our\nclients is we gotta configure their\n\n796\n00:36:25,520 --> 00:36:26,570\nfirewall rules.\n\n797\n00:36:26,570 --> 00:36:28,650\nThere's a couple of rules\nthat we're gonna want to set,\n\n798\n00:36:28,650 --> 00:36:32,300\nso I'm jump back over to my Windows\nsetting, still the same policy.\n\n799\n00:36:33,550 --> 00:36:39,149\nAnd then into my security settings and\nthen Windows Firewall a couple of times.\n\n800\n00:36:40,800 --> 00:36:41,405\nAlways love that.\n\n801\n00:36:41,405 --> 00:36:43,310\n>> Mm-hm.\n>> Windows Firewall Advanced Security,\n\n802\n00:36:43,310 --> 00:36:46,280\nWindows Firewall Advanced Security,\nWindows Firewall Advanced Security.\n\n803\n00:36:46,280 --> 00:36:48,500\nYou know, one's kind of general,\nthe other is this domain specific.\n\n804\n00:36:48,500 --> 00:36:50,480\nAnd then I'm gonna head\ndown to in-bound rules.\n\n805\n00:36:50,480 --> 00:36:53,150\nNow luckily for us, there are some\npre-created rules that we can use.\n\n806\n00:36:53,150 --> 00:36:58,330\nI'm just gonna right click New Rule And\nwait for my wizard.\n\n807\n00:36:58,330 --> 00:37:01,950\nAnd it's the same wizard you'd see\nif you were firing up your firewall\n\n808\n00:37:01,950 --> 00:37:04,320\non your client machine or\nanything like that.\n\n809\n00:37:04,320 --> 00:37:06,830\nSo I can choose what type\nof rule I want to create.\n\n810\n00:37:06,830 --> 00:37:08,080\nAnd I'm gonna do predefined.\n\n811\n00:37:08,080 --> 00:37:12,716\nAnd there's a few of them in here\nthat we're gonna take a peek at.\n\n812\n00:37:12,716 --> 00:37:17,480\nThere's BranchCache content retrieval\nuses HTTP as well as BranchCache\n\n813\n00:37:17,480 --> 00:37:21,030\ncontent retrieval or\nhosted cache server uses HTTPS.\n\n814\n00:37:22,480 --> 00:37:23,560\nSo if you were securing this,\n\n815\n00:37:23,560 --> 00:37:27,240\nif you had signed a certificate to your\nbranch cash server and were using as\n\n816\n00:37:27,240 --> 00:37:31,170\na cell to connect to that branch cash\nserver, so you would use that one.\n\n817\n00:37:31,170 --> 00:37:36,930\nThe peer discovery is really more about\nif you were doing distributed cache mode.\n\n818\n00:37:36,930 --> 00:37:40,090\nSo you've got to open up firewall so that\nother clients on your subnet are going to\n\n819\n00:37:40,090 --> 00:37:43,640\nbe able to browse to your hard drive and\nretrieve that content.\n\n820\n00:37:43,640 --> 00:37:44,840\nBut it does do something else.\n\n821\n00:37:44,840 --> 00:37:49,400\nIt allows them to retrieve cached\ncontent as well as open it up so\n\n822\n00:37:49,400 --> 00:37:51,370\npeople can send cached content.\n\n823\n00:37:51,370 --> 00:37:53,380\nI'm gonna turn it on anyway,\nand we're gonna do both.\n\n824\n00:37:53,380 --> 00:37:54,800\nSo, we're using HTTP here.\n\n825\n00:37:56,900 --> 00:37:59,229\nNot doing any SSL, so\nI'm gonna enable that rule.\n\n826\n00:38:00,510 --> 00:38:01,120\nAllow the connection.\n\n827\n00:38:01,120 --> 00:38:06,542\nAnd then I'm gonna go right back and go\nahead and enable that other one as well.\n\n828\n00:38:09,578 --> 00:38:11,000\nFor the peer discovery.\n\n829\n00:38:12,770 --> 00:38:15,570\nAnd same thing,\nwe'll just make sure it's checked.\n\n830\n00:38:15,570 --> 00:38:17,420\nMake sure it says allow.\n\n831\n00:38:17,420 --> 00:38:18,490\nFinish.\n\n832\n00:38:18,490 --> 00:38:20,270\nAnd those two firewalls\nshould be enough for\n\n833\n00:38:20,270 --> 00:38:22,770\nme if I'm doing the,\nthe hosted cache mode.\n\n834\n00:38:23,870 --> 00:38:25,900\nSo that pretty much sets up the clients.\n\n835\n00:38:26,942 --> 00:38:28,920\nWhat else do we wanna do?\n\n836\n00:38:28,920 --> 00:38:29,850\nI think I've got them all.\n\n837\n00:38:29,850 --> 00:38:32,580\nSo we'll go ahead and close my editor.\n\n838\n00:38:34,880 --> 00:38:36,700\nAnd we'll close our group\npolicy management console.\n\n839\n00:38:37,830 --> 00:38:40,220\nAnd then I need to do a little\nGP update on my clients, and\n\n840\n00:38:40,220 --> 00:38:44,290\nwe'll go test it out and\nsee if they are configured properly.\n\n841\n00:38:44,290 --> 00:38:50,578\nSo I head over to client one,\nand open up command prompt,\n\n842\n00:38:50,578 --> 00:38:54,912\nand do a little GPUpdate switch force.\n\n843\n00:38:58,322 --> 00:38:59,800\nThat'll retrieve that policy.\n\n844\n00:38:59,800 --> 00:39:03,190\nAnd, and then there's just a couple of\ncommands we can run to, to verify and\n\n845\n00:39:03,190 --> 00:39:06,930\nsee whether or not these client's\nmachines are, are configured properly.\n\n846\n00:39:09,610 --> 00:39:12,470\nI had, there's a couple commands that I\nwas saying I, I like the Netsh command.\n\n847\n00:39:12,470 --> 00:39:14,500\nI, I think the output's\na little bit easier to look at.\n\n848\n00:39:14,500 --> 00:39:23,635\nThere's a Netsh BranchCache\n\n849\n00:39:23,635 --> 00:39:28,370\nshow status all.\n\n850\n00:39:28,370 --> 00:39:32,934\nAnd what we're looking for here, couple\nthings, up here when I scroll back up\n\n851\n00:39:32,934 --> 00:39:36,890\nhere to the top, I can see that my,\nmy policy hasn't kicked in yet.\n\n852\n00:39:36,890 --> 00:39:41,024\nI probably got here a little fast so\nI see local caching,\n\n853\n00:39:41,024 --> 00:39:44,520\ncurrent status stopped\nservice type manual.\n\n854\n00:39:44,520 --> 00:39:47,310\nSo that's telling me that says\nthe machine is not configured as a hosted\n\n855\n00:39:47,310 --> 00:39:48,820\ncache client.\n\n856\n00:39:48,820 --> 00:39:52,830\nI'm gonna run the command just one\nmore time and see if it kicked in.\n\n857\n00:39:52,830 --> 00:39:54,150\nAnd it has not.\n\n858\n00:39:54,150 --> 00:39:55,860\n>> Oh, now it says current status running.\n\n859\n00:39:55,860 --> 00:39:58,439\nIf you scroll up,\na minute ago it was stopped, right.\n\n860\n00:39:58,439 --> 00:40:00,270\n>> Hm-mm.\n>> So now it is actually running.\n\n861\n00:40:00,270 --> 00:40:00,830\n>> Maybe one more time?\n\n862\n00:40:00,830 --> 00:40:04,090\nSee if he's figured out who he is yet.\n\n863\n00:40:04,090 --> 00:40:05,550\nStill doesn't know who he is.\n\n864\n00:40:05,550 --> 00:40:07,104\nInteresting.\nI might have had an issue with\n\n865\n00:40:07,104 --> 00:40:08,392\nthat service connection point,\n\n866\n00:40:08,392 --> 00:40:11,715\nI don't know the administrator accounts on\nhere if he's an enterprise admin or not.\n\n867\n00:40:11,715 --> 00:40:12,727\n>> Mm-hm.\n\n868\n00:40:12,727 --> 00:40:17,045\n>> I kind of assumed he was,\nlet's see if my firewall rules Kicked in.\n\n869\n00:40:17,045 --> 00:40:19,965\nThose guys client firewall rules.\n\n870\n00:40:19,965 --> 00:40:25,780\nYeah, because he doesn't know what mode\nhe's in yet, it's not actually showing up.\n\n871\n00:40:25,780 --> 00:40:26,723\nLet's do this real quick.\n\n872\n00:40:31,135 --> 00:40:35,551\nJust make sure that policy's kicking in.\n\n873\n00:40:35,551 --> 00:40:37,838\nAll right so BranchCache is there.\n\n874\n00:40:46,512 --> 00:40:49,710\nYeah, it still won't do in this thing.\n\n875\n00:40:49,710 --> 00:40:50,550\nLet's do this.\n\n876\n00:40:50,550 --> 00:40:52,390\nLet's go back, and\nwe'll do it the old school.\n\n877\n00:40:52,390 --> 00:40:56,740\nIt might be having trouble finding that\nservice connection point, so just to\n\n878\n00:40:56,740 --> 00:41:01,190\nspeed this up a little bit, I'm gonna\ntell him who his hosted cache server is.\n\n879\n00:41:01,190 --> 00:41:04,020\n>> I think we're about to do one\nof the things that I'm bad about,\n\n880\n00:41:04,020 --> 00:41:05,030\nwhich is-\n>> What's that?\n\n881\n00:41:05,030 --> 00:41:06,130\n>> I get so impatient sometimes.\n\n882\n00:41:06,130 --> 00:41:06,710\n>> Not being patient.\n>> This\n\n883\n00:41:06,710 --> 00:41:07,272\nshould-\n>> It can happen.\n\n884\n00:41:07,272 --> 00:41:09,130\n>> Right.\n>> And a lot of times if you just sit and\n\n885\n00:41:09,130 --> 00:41:11,080\nwait, eventually\n>> Exactly.\n\n886\n00:41:11,080 --> 00:41:11,970\n>> It kicks in.\n\n887\n00:41:11,970 --> 00:41:13,660\nRemember that a work station,\n\n888\n00:41:13,660 --> 00:41:17,420\nit will automatically refresh it's\npolicy every 90 minutes, every hour and\n\n889\n00:41:17,420 --> 00:41:21,520\na half and so Mike was doing a gpupdate\n/force to make it happen now.\n\n890\n00:41:21,520 --> 00:41:22,056\n>> That's right.\n\n891\n00:41:22,056 --> 00:41:23,780\n[LAUGH]\n>> And that's a little,\n\n892\n00:41:23,780 --> 00:41:26,735\nit's a behavior outside of what we\nnormally get on the workstation.\n\n893\n00:41:26,735 --> 00:41:27,975\nSo what we might wanna do, Mike.\n\n894\n00:41:27,975 --> 00:41:29,655\n>> Mm-hm.\n>> Instead of trying to force feed it?\n\n895\n00:41:29,655 --> 00:41:31,800\n>> Mm-hm.\n>> Is to stop and take a break and\n\n896\n00:41:31,800 --> 00:41:32,480\ngive it a minute to.\n\n897\n00:41:32,480 --> 00:41:33,710\n>> Okay.\n>> To see if it catches up.\n\n898\n00:41:33,710 --> 00:41:34,650\nYou wanna do that?\n>> We can do that, yeah.\n\n899\n00:41:34,650 --> 00:41:36,620\nAbsolutely, cuz it really should kick in.\n\n900\n00:41:36,620 --> 00:41:39,610\nI've seen a couple times where I go and\ncreate that policy, and then I go back and\n\n901\n00:41:39,610 --> 00:41:43,110\ncheck the status and it doesn't kick\nin right away and like as Don said,\n\n902\n00:41:43,110 --> 00:41:45,230\nyou give it a minute and it's there, so.\n\n903\n00:41:45,230 --> 00:41:46,700\n>> Let's do that.\nLet's just give it a few minutes.\n\n904\n00:41:46,700 --> 00:41:47,760\nWe'll stop and take a break.\n\n905\n00:41:47,760 --> 00:41:49,730\nIt's about time for us to stop and\ntake a break anyway.\n\n906\n00:41:49,730 --> 00:41:50,930\n>> Huh.\n>> So we'll take a pause here.\n\n907\n00:41:50,930 --> 00:41:54,150\nWhen we get back we'll check on the status\nof our machine and see how it's going.\n\n908\n00:41:54,150 --> 00:41:54,750\n>> Sounds like a plan.\n\n909\n00:41:54,750 --> 00:41:55,510\n>> Stay tuned.\n\n910\n00:41:55,510 --> 00:41:57,080\nWe'll be back in a few.\n\n911\n00:41:59,765 --> 00:42:05,318\n[SOUND] All right, welcome back everybody.\n\n912\n00:42:05,318 --> 00:42:08,405\nSo we took a little break,\ngave BranchCache a chance to settle in and\n\n913\n00:42:08,405 --> 00:42:10,040\nlet's see where we're at, Mike.\n\n914\n00:42:10,040 --> 00:42:11,070\n>> Let's take a look and see.\n\n915\n00:42:11,070 --> 00:42:12,930\nSo we're back on client one.\n\n916\n00:42:12,930 --> 00:42:14,680\nI'll open up that good\nold command prompt again.\n\n917\n00:42:16,550 --> 00:42:19,955\nSame command nsh branch.\n\n918\n00:42:19,955 --> 00:42:25,167\nCache show status all.\n\n919\n00:42:25,167 --> 00:42:26,870\nAnd then we'll take a peek.\n\n920\n00:42:26,870 --> 00:42:30,790\nKeep your fingers crossed,\nand look at there.\n\n921\n00:42:30,790 --> 00:42:32,410\nPatience not my strong suit.\n\n922\n00:42:32,410 --> 00:42:33,110\nSo, yeah.\n\n923\n00:42:33,110 --> 00:42:35,840\nWhat we're looking for, a couple thing you\nwant to check when you're coming in here.\n\n924\n00:42:35,840 --> 00:42:39,100\nOne, you can see service\nmode is hosted cache client\n\n925\n00:42:39,100 --> 00:42:41,750\nset by group policy that\nthe service is running.\n\n926\n00:42:41,750 --> 00:42:45,760\nNow the service type is manual, so you\nreally want to probably configure another\n\n927\n00:42:45,760 --> 00:42:48,600\nGPO, or\nthat same GPO to make that automatic.\n\n928\n00:42:48,600 --> 00:42:50,520\nThat way if it reboots it comes back on.\n\n929\n00:42:50,520 --> 00:42:54,445\nAnd then another It knows, it already\nknows by that service connection point.\n\n930\n00:42:54,445 --> 00:42:56,435\nIt isn't found,\nit's hosted cache server and\n\n931\n00:42:56,435 --> 00:42:59,355\nit's telling me right there\nthat it sees Server 1.\n\n932\n00:42:59,355 --> 00:43:02,255\nThe other thing, now these here,\nif we were doing distributed cache,\n\n933\n00:43:02,255 --> 00:43:05,045\nit's showing me where\nthat cache is located.\n\n934\n00:43:05,045 --> 00:43:10,112\nAs well as how much what percentage of my\ndisk is being utilized for that cache.\n\n935\n00:43:10,112 --> 00:43:15,050\nDown below, other important stuff that we\ngotta check, it is going to be anything\n\n936\n00:43:15,050 --> 00:43:20,110\nthat says require content retrieval URL,\nconfigured, that is required.\n\n937\n00:43:20,110 --> 00:43:22,960\nMy content retrieval filewall\nrules has been enabled,\n\n938\n00:43:22,960 --> 00:43:24,530\nthat is another required one.\n\n939\n00:43:24,530 --> 00:43:26,970\nAnd then,\nthe host of cache client 5-R rules.\n\n940\n00:43:26,970 --> 00:43:30,990\nIf we're doing distributed or\nyou would need this peer discovery.\n\n941\n00:43:30,990 --> 00:43:35,320\nIt was turned on, that was that WDS one\nthat I did, but it's not required for\n\n942\n00:43:35,320 --> 00:43:37,010\nthis particular scenario.\n\n943\n00:43:37,010 --> 00:43:37,670\nSo, that's it.\nSo,\n\n944\n00:43:37,670 --> 00:43:39,910\nnow what's gonna happen is when\nthat first client goes across,\n\n945\n00:43:39,910 --> 00:43:42,770\nthey're going to have to go across\nthe whaling to get that file.\n\n946\n00:43:42,770 --> 00:43:44,610\nThe next one that wants that same file,\n\n947\n00:43:44,610 --> 00:43:47,520\nthey're going to get it from that cache\nserver assuming things haven't changed.\n\n948\n00:43:48,930 --> 00:43:49,490\n>> Yeah.\n>> There\n\n949\n00:43:49,490 --> 00:43:50,780\nwas one other thing that\nI was going to show you.\n\n950\n00:43:50,780 --> 00:43:52,430\nOh, there was a power show command.\n\n951\n00:43:53,430 --> 00:43:55,455\nLet's do that real quick.\n\n952\n00:43:59,872 --> 00:44:01,533\nMm.\n\n953\n00:44:01,533 --> 00:44:04,068\nIt's going to be get-bcst Status,\n\n954\n00:44:04,068 --> 00:44:08,150\nshould give me about the same information,\nlike I said.\n\n955\n00:44:08,150 --> 00:44:10,800\nI kind of just used to\nusing the command prompt.\n\n956\n00:44:10,800 --> 00:44:12,650\nI like that layout a little better.\n\n957\n00:44:12,650 --> 00:44:14,031\n>> Is it incredibly slow?\n\n958\n00:44:14,031 --> 00:44:16,670\n[LAUGH]\n>> Evidently, it is really slow.\n\n959\n00:44:16,670 --> 00:44:19,390\nSo there's the same thing,\nlike let me see, my firewall rules, so\n\n960\n00:44:19,390 --> 00:44:20,810\nI can make sure they're turned on.\n\n961\n00:44:22,820 --> 00:44:25,320\nGo back here.\nI can see it's in hosted cache mode, and\n\n962\n00:44:25,320 --> 00:44:26,880\nit knows who it's hosted cache server is.\n\n963\n00:44:26,880 --> 00:44:28,900\nSame information just from power shell.\n\n964\n00:44:28,900 --> 00:44:31,160\nYou could also run this on the server.\n\n965\n00:44:32,360 --> 00:44:33,530\nWe might as well while we're here.\n\n966\n00:44:35,230 --> 00:44:39,109\nJust to make sure he is good,\nlittle BC status.\n\n967\n00:44:40,180 --> 00:44:44,100\nOr you could do the netsh branch cache\nshow status all on this one as well, and\n\n968\n00:44:44,100 --> 00:44:46,300\nit would tell you that he's\nnot a hosted cache client.\n\n969\n00:44:46,300 --> 00:44:49,910\nNow that it's turned on, and\nsomewhere down here, I've got my\n\n970\n00:44:49,910 --> 00:44:54,520\nhosted cache server configuration, and\nit is enabled, so we're good to go.\n\n971\n00:44:54,520 --> 00:44:56,980\n>> Sweet.\n>> At that point, we're caching files.\n\n972\n00:44:56,980 --> 00:44:59,750\n>> All right, so pretty straightforward\nto set up on the server really straight\n\n973\n00:44:59,750 --> 00:45:01,240\nforward to set up on\nthe client cause we're.\n\n974\n00:45:01,240 --> 00:45:02,710\n>> Hmm\n>> Really just doing some GPOs.\n\n975\n00:45:02,710 --> 00:45:04,780\nIt's good technology,\nsomething we should take advantage of but\n\n976\n00:45:04,780 --> 00:45:06,170\nif you have branch offices.\n\n977\n00:45:06,170 --> 00:45:08,080\nIf you don't have remotes,\nyou don't have branch offices,\n\n978\n00:45:08,080 --> 00:45:10,790\nthere's not really any point in doing it.\n\n979\n00:45:10,790 --> 00:45:12,880\nalso if you just have like one machine,\nout of a remote,\n\n980\n00:45:12,880 --> 00:45:14,390\nthere's not really any point in doing it.\n\n981\n00:45:14,390 --> 00:45:15,090\n>> Right.\n>> So\n\n982\n00:45:15,090 --> 00:45:16,667\n>> So just keep that in mind.\n\n983\n00:45:16,667 --> 00:45:17,350\n>> Mm-hm.\n\n984\n00:45:17,350 --> 00:45:20,140\n>> All right, we got a couple of\nother things in our objective list.\n\n985\n00:45:20,140 --> 00:45:26,070\nThe next one is FCI which is\nFile Classification infrastructure.\n\n986\n00:45:26,070 --> 00:45:29,220\nWhich is kind of a neat\ntechnology that was introduced,\n\n987\n00:45:29,220 --> 00:45:30,710\nit was new to Windows 2012, right?\n\n988\n00:45:30,710 --> 00:45:32,030\n>> Right.\nYup.\n\n989\n00:45:32,030 --> 00:45:36,015\n>> Let's see the, yes, because with that\nfile services resource manager was 2008.\n\n990\n00:45:36,015 --> 00:45:37,730\n>> Mm-hm.\n>> And then the file classification was\n\n991\n00:45:37,730 --> 00:45:40,460\nadded in 2012 to that console exactly.\n\n992\n00:45:40,460 --> 00:45:42,220\n>> So the, the FSRM that Mike mentioned.\n\n993\n00:45:42,220 --> 00:45:47,050\nThe file services resource manager, it is\nthe little management interface we have\n\n994\n00:45:47,050 --> 00:45:49,680\nfor creating file shares and\nso forth on our server.\n\n995\n00:45:49,680 --> 00:45:51,380\nIn face we've already seen it.\n\n996\n00:45:51,380 --> 00:45:52,130\n>> Right.\n\n997\n00:45:52,130 --> 00:45:54,690\n>> I know we covered it in the 74-10 show.\n\n998\n00:45:54,690 --> 00:45:58,600\n>> Yeah.\nWe did disk quotas and File screening.\n\n999\n00:45:58,600 --> 00:46:00,110\n>> Yep, yep.\nAnd so all of that is,\n\n1000\n00:46:00,110 --> 00:46:04,370\nis important stuff that we should\nalready know, but on the 7412 exam,\n\n1001\n00:46:04,370 --> 00:46:08,200\nthey specifically call out FCI,\nFile Classification.\n\n1002\n00:46:08,200 --> 00:46:10,640\nSo, I remember when we did that show-\n>> Mm-hm.\n\n1003\n00:46:10,640 --> 00:46:14,120\n>> For 7410, that we went ahead and\ndid FCI back then.\n\n1004\n00:46:14,120 --> 00:46:14,880\n>> Okay.\n>> But we're gonna\n\n1005\n00:46:14,880 --> 00:46:17,060\ntake a look at it again because if\nyou didn't watch that other show\n\n1006\n00:46:17,060 --> 00:46:18,590\n>> Then you need to know it.\n\n1007\n00:46:18,590 --> 00:46:23,580\nSo, FCI file classification,\nit's a neat way that Windows can\n\n1008\n00:46:23,580 --> 00:46:28,245\nautomatically identify files based on some\nkind of a characteristic that we define.\n\n1009\n00:46:28,245 --> 00:46:29,630\n>> Uh-huh.\n>> So that we can then\n\n1010\n00:46:29,630 --> 00:46:32,080\nhandle them a particular way.\n\n1011\n00:46:32,080 --> 00:46:36,300\nAnd they call it classification\nbecause companies, enterprises,\n\n1012\n00:46:36,300 --> 00:46:39,540\ngovernment, military,\nthey usually use classification systems\n\n1013\n00:46:40,630 --> 00:46:44,930\nto define different levels of documents,\nand so on.\n\n1014\n00:46:44,930 --> 00:46:46,650\nThe best example is like with our,\n\n1015\n00:46:46,650 --> 00:46:50,490\nthe US military,\nwhere you have unclassified data.\n\n1016\n00:46:50,490 --> 00:46:52,370\nYou have classified data.\n\n1017\n00:46:52,370 --> 00:46:55,131\nYou have secret data and\ntop secret data, right?\n\n1018\n00:46:55,131 --> 00:46:56,770\n>> Mm-hm\n>> So you have these different levels.\n\n1019\n00:46:56,770 --> 00:47:01,220\nThere's one more, SBU,\nsensitive but unclassified.\n\n1020\n00:47:01,220 --> 00:47:04,750\nSo those are our different classification\ntiers that the military uses.\n\n1021\n00:47:04,750 --> 00:47:10,410\nSo, how do we know if a file is\ngoing to be secret, or top secret?\n\n1022\n00:47:10,410 --> 00:47:13,775\nHow do we know if it's going\nto be unclassified, right?\n\n1023\n00:47:13,775 --> 00:47:16,000\n>> Mm-hm.\n>> Well, Windows doesn't.\n\n1024\n00:47:16,000 --> 00:47:17,460\nWindows doesn't know your\nclassification system.\n\n1025\n00:47:17,460 --> 00:47:18,920\n>> Right.\n>> Normally, right?\n\n1026\n00:47:18,920 --> 00:47:22,050\nBut with FCI, with the file\nclassification infrastructure,\n\n1027\n00:47:22,050 --> 00:47:25,955\nwe can actually teach Windows to\nrecognize some of our classifications.\n\n1028\n00:47:25,955 --> 00:47:27,270\n>> Mm-hm.\n>> So that we can use that for\n\n1029\n00:47:27,270 --> 00:47:28,800\nour own benefit, all right?\n\n1030\n00:47:28,800 --> 00:47:32,150\nAnd that was new in Windows Server 2012,\nand you know how Microsoft is,\n\n1031\n00:47:32,150 --> 00:47:34,650\nif it's a new feature, they love\nto put it on the exam, so you can-\n\n1032\n00:47:34,650 --> 00:47:35,230\n>> They're gonna quiz you.\n\n1033\n00:47:35,230 --> 00:47:36,450\n>> Pretty much expect it to be there.\n\n1034\n00:47:36,450 --> 00:47:37,190\n>> Absolutely.\n\n1035\n00:47:37,190 --> 00:47:38,090\nAbsolutely.\n\n1036\n00:47:38,090 --> 00:47:40,470\n>> Fortunately, it's not a hard\nthing to get set up, right Mac?\n\n1037\n00:47:40,470 --> 00:47:41,640\n>> No, it's really not, I mean, if you,\n\n1038\n00:47:41,640 --> 00:47:43,750\nwhat we gotta do is you first\nyou create your property, so\n\n1039\n00:47:43,750 --> 00:47:47,300\nyou get your team together and you decide\nwhat properties you need to add to\n\n1040\n00:47:47,300 --> 00:47:49,700\ndocuments, like the classifications\nDom was talking about.\n\n1041\n00:47:49,700 --> 00:47:53,880\nIt could be, do you want to market his\npersonally identifiable information or\n\n1042\n00:47:53,880 --> 00:47:54,730\nsomething like that.\n\n1043\n00:47:55,760 --> 00:47:57,850\nWe can create these properties.\n\n1044\n00:47:57,850 --> 00:48:00,440\nAnd there's a few different\nproperty types we can create.\n\n1045\n00:48:00,440 --> 00:48:02,590\nYou start off with a couple by default.\n\n1046\n00:48:02,590 --> 00:48:05,500\n>> And so Mike is just,\nhe's in the FSR ram.\n\n1047\n00:48:05,500 --> 00:48:07,540\nAnd again,\nif you didn't watch that other episode.\n\n1048\n00:48:07,540 --> 00:48:09,099\nYou just go into server manager and\n\n1049\n00:48:09,099 --> 00:48:11,750\nyou see the file services right\nthere to get into the fsrm.\n\n1050\n00:48:11,750 --> 00:48:14,120\n>> Let's take a peak\nreal quick behind there.\n\n1051\n00:48:14,120 --> 00:48:16,235\nI just went to tools yeah and then fsrm.\n\n1052\n00:48:16,235 --> 00:48:19,190\n>> Yep and you'll see the other\nthings we covered in the other show.\n\n1053\n00:48:19,190 --> 00:48:19,930\nQuota management,\n\n1054\n00:48:19,930 --> 00:48:23,210\nfile screening, classification is\nreally just another entry right there.\n\n1055\n00:48:23,210 --> 00:48:24,190\n>> It is.\n\n1056\n00:48:24,190 --> 00:48:25,490\n>> And so\nwe're gonna create our properties.\n\n1057\n00:48:25,490 --> 00:48:29,940\nWe're gonna create a local property and\nwe'll give it the name of, I don't know,\n\n1058\n00:48:29,940 --> 00:48:32,790\nsomething like,\nwe'll go at Don's little top secret.\n\n1059\n00:48:35,050 --> 00:48:38,120\nAll right, and then you got several\ndifferent types you can choose from.\n\n1060\n00:48:38,120 --> 00:48:43,650\nFrom a simple yes, no, to a multiscreen\nto a date time, to a number.\n\n1061\n00:48:43,650 --> 00:48:46,850\nFor this case if it's top,\nit's either top secret or it's not, right?\n\n1062\n00:48:46,850 --> 00:48:48,309\nSo yes, no seems to make sense.\n\n1063\n00:48:49,410 --> 00:48:51,372\nI don't think we need a description for\nyes or no,\n\n1064\n00:48:51,372 --> 00:48:54,340\nmost of my other Admin's should\nunderstand what that is.\n\n1065\n00:48:54,340 --> 00:48:55,670\nAnd I click OK.\n\n1066\n00:48:55,670 --> 00:48:59,170\nSo now I've got this new property but\nthat's not really gonna do anything and\n\n1067\n00:48:59,170 --> 00:49:02,180\nyou would create all the properties\nthat you had planned to assign.\n\n1068\n00:49:02,180 --> 00:49:04,660\nI like to think of it as really, you know,\ndocument all ready has properties,\n\n1069\n00:49:04,660 --> 00:49:07,240\nfile size, last accessed,\nthings like that.\n\n1070\n00:49:07,240 --> 00:49:09,530\nYou're just adding additional\nproperties to this.\n\n1071\n00:49:10,820 --> 00:49:12,900\nAnd once we've got your properties made,\n\n1072\n00:49:12,900 --> 00:49:16,690\nthen you've gotta decide how you want\nto assign those properties, you know?\n\n1073\n00:49:16,690 --> 00:49:18,590\nHow do you, what do you wanna look for\nin that document?\n\n1074\n00:49:18,590 --> 00:49:22,891\nYou can us either a content classifier,\nor actually looking inside\n\n1075\n00:49:22,891 --> 00:49:27,796\nthe document of the content itself,\nfor a particular word, like secret, or\n\n1076\n00:49:27,796 --> 00:49:32,870\nyou can look for patterns, like three\ndigits dash two digits dash four digits.\n\n1077\n00:49:32,870 --> 00:49:35,350\nPretty much guarantee that's gonna\nbe a social security number, so\n\n1078\n00:49:35,350 --> 00:49:39,890\nI can flag that as personally identifiable\ninformation or something like that, or\n\n1079\n00:49:39,890 --> 00:49:42,890\nyou can do a folder classifier,\nwhich is done by location.\n\n1080\n00:49:42,890 --> 00:49:45,410\nI've told my users anything that\ngoes in this folder, you know,\n\n1081\n00:49:45,410 --> 00:49:47,380\nthis is our top secret folder, so\n\n1082\n00:49:47,380 --> 00:49:51,600\nas soon as they put that file in there, it\nimmediately gives it that classification.\n\n1083\n00:49:51,600 --> 00:49:54,380\nI shouldn't say media, we're going\nto run some file management tasks,\n\n1084\n00:49:54,380 --> 00:49:55,940\nwhich we'll talk about.\n\n1085\n00:49:55,940 --> 00:50:00,566\nOr you can do, let's see, I think those\nare the only two they've actually added,\n\n1086\n00:50:00,566 --> 00:50:02,812\nI believe, well we'll just work from,\n\n1087\n00:50:02,812 --> 00:50:06,864\nyou can really skip to some of these\nother tabs until you fill things out.\n\n1088\n00:50:06,864 --> 00:50:09,710\nSo we'll call this one something\nlike our top secret rule.\n\n1089\n00:50:12,410 --> 00:50:14,320\nYou want to make sure it's enabled.\n\n1090\n00:50:14,320 --> 00:50:16,440\nThen you got to go to the scope tab and\n\n1091\n00:50:16,440 --> 00:50:19,040\nthis is where we're going to decide\nwhere do we want to run this.\n\n1092\n00:50:19,040 --> 00:50:22,280\nYou know, what shared folder out on our\nnetwork or something like that we're\n\n1093\n00:50:22,280 --> 00:50:24,920\ngoing to run this on I'm sorry,\nin this case it's going to be local.\n\n1094\n00:50:24,920 --> 00:50:25,540\nI'm going to click Add.\n\n1095\n00:50:25,540 --> 00:50:30,020\nAnd I'm trying to think,\nis this the one we made those shares?\n\n1096\n00:50:30,020 --> 00:50:32,030\nI'm on server 1.\n\n1097\n00:50:32,030 --> 00:50:33,290\n>> I think we did that on the DC.\n\n1098\n00:50:33,290 --> 00:50:38,230\n>> And we'll just do a,\nmake a new folder here.\n\n1099\n00:50:40,540 --> 00:50:44,180\nAnd we'll call it something like ports or\nsomething.\n\n1100\n00:50:44,180 --> 00:50:50,270\nAll right, and you can use this\nsame rule over several locations so\n\n1101\n00:50:50,270 --> 00:50:53,990\nI can add as many locations as I need to.\n\n1102\n00:50:53,990 --> 00:50:57,100\nThey've got some built in up here which\nwould search through all your folders and\n\n1103\n00:50:57,100 --> 00:51:00,230\njust look for\nspecific things like user files or\n\n1104\n00:51:00,230 --> 00:51:03,500\napplication files,\nthen we got to go to the classification.\n\n1105\n00:51:03,500 --> 00:51:08,543\nThis is how we're gonna decide is that\ndocument warrants that property and\n\n1106\n00:51:08,543 --> 00:51:10,320\nthen what to set it to.\n\n1107\n00:51:10,320 --> 00:51:14,247\nSo we can do a content classifier,\nwe can do the folder classifier.\n\n1108\n00:51:14,247 --> 00:51:18,120\nThe one that's new to 2012 r2 is\nthat Windows PowerShell classifier.\n\n1109\n00:51:18,120 --> 00:51:21,930\nSo now, if I've got my PowerShell skills\nup to date, I could write some scripts and\n\n1110\n00:51:21,930 --> 00:51:24,445\ndo just about anything I wanted to.\n\n1111\n00:51:24,445 --> 00:51:26,870\nSo, we'll do a content classifier.\n\n1112\n00:51:26,870 --> 00:51:30,620\nWell, actually, we'll do a folder\nclassifier just to keep it simple for\n\n1113\n00:51:30,620 --> 00:51:31,170\nthis one.\n\n1114\n00:51:31,170 --> 00:51:34,080\nAlthough I'd really like to show you the\ncontent, we'll do a content classifier.\n\n1115\n00:51:34,080 --> 00:51:34,680\nLet's go crazy.\n\n1116\n00:51:34,680 --> 00:51:35,438\n>> Let's go crazy.\n\n1117\n00:51:35,438 --> 00:51:36,620\n[LAUGH]\n>> All right, so content,\n\n1118\n00:51:36,620 --> 00:51:38,510\nthe folder classifier is pretty\nstraight forward, it's just,\n\n1119\n00:51:38,510 --> 00:51:39,650\nis it in this folder, right?\n\n1120\n00:51:39,650 --> 00:51:41,110\nSo not too exciting.\n\n1121\n00:51:41,110 --> 00:51:44,230\nAnd then all the properties that\nit created will show up here.\n\n1122\n00:51:44,230 --> 00:51:47,215\nWe've got our top secret,\nit has no values, so I'm going to\n\n1123\n00:51:47,215 --> 00:51:52,815\nsay if it matches this rule, I'm going\nto say yes, flag it as top secret.\n\n1124\n00:51:52,815 --> 00:51:55,455\nAnd then with the content classifier,\nyou need to come down here and\n\n1125\n00:51:55,455 --> 00:51:56,085\nclick configure.\n\n1126\n00:51:56,085 --> 00:51:58,405\nYou've got to tell it what to look for\nwithin that document.\n\n1127\n00:51:58,405 --> 00:52:02,125\nSo you can do a few different things,\nregular expression,\n\n1128\n00:52:02,125 --> 00:52:05,725\nstring that's case sensitive or\njust a straight up string.\n\n1129\n00:52:05,725 --> 00:52:09,155\nI'll do a string to keep\nthis one quick and easy, and\n\n1130\n00:52:09,155 --> 00:52:11,790\nwe'll say it's going to have\nthe words secret in it.\n\n1131\n00:52:11,790 --> 00:52:16,820\n>> Is this the file name or\ninside of the file.\n\n1132\n00:52:16,820 --> 00:52:18,620\nThis is actually inside the file.\n\n1133\n00:52:18,620 --> 00:52:20,440\nI'm going to actually scan the content.\n\n1134\n00:52:20,440 --> 00:52:22,970\nAnd you can do file name\npatterns if you want to.\n\n1135\n00:52:22,970 --> 00:52:24,340\nWe'll just stick with that.\n\n1136\n00:52:24,340 --> 00:52:25,350\nWe'll click OK.\n\n1137\n00:52:25,350 --> 00:52:28,800\nBut I could create several, you know,\nI could insert additional expressions.\n\n1138\n00:52:28,800 --> 00:52:30,230\nThere are other things\nI wanted to look for.\n\n1139\n00:52:30,230 --> 00:52:33,080\nMaybe just the word secret was not enough,\nyou know?\n\n1140\n00:52:33,080 --> 00:52:34,600\nIt had to something else in the document.\n\n1141\n00:52:34,600 --> 00:52:38,276\n>> Cuz maybe somebody was talking\nabout secret antiperspirant, right?\n\n1142\n00:52:38,276 --> 00:52:39,172\n[LAUGH]\n>> Exactly.\n\n1143\n00:52:39,172 --> 00:52:40,620\nExactly.\n[LAUGH] So,\n\n1144\n00:52:40,620 --> 00:52:43,100\nwe'll click OK on\nthe classification parameters.\n\n1145\n00:52:43,100 --> 00:52:46,750\nAnd them I'm gonna go to my\nevaluation type and here, whether or\n\n1146\n00:52:46,750 --> 00:52:48,890\nnot we wanna re-evaluate\nexisting properties.\n\n1147\n00:52:48,890 --> 00:52:50,960\nCuz what we'll end up\ndoing is creating a task.\n\n1148\n00:52:50,960 --> 00:52:54,170\nWe're gonna, we're gonna schedule\nthis classification rule to run,\n\n1149\n00:52:54,170 --> 00:52:58,260\nsay every hour maybe, I want it to\nscan this storage location looking for\n\n1150\n00:52:58,260 --> 00:53:00,500\nanything that's got the word secret in it.\n\n1151\n00:53:00,500 --> 00:53:02,780\nAnd if new documents\nare added I can grab those.\n\n1152\n00:53:02,780 --> 00:53:05,850\nBut what if somebody's taking a document,\nthat was marked as secret, but\n\n1153\n00:53:05,850 --> 00:53:09,440\nthen they've removed those secret\ninformation, the top secret stuff, and\n\n1154\n00:53:09,440 --> 00:53:10,870\nthey've taken the word secret out.\n\n1155\n00:53:10,870 --> 00:53:14,250\nWell is will re-evaluate it and\nchange that value.\n\n1156\n00:53:14,250 --> 00:53:16,760\nYou can have it overwrite\nthe existing value.\n\n1157\n00:53:16,760 --> 00:53:18,490\nYou can have it aggregate the values.\n\n1158\n00:53:18,490 --> 00:53:19,740\nAnd with the yes, no,\n\n1159\n00:53:19,740 --> 00:53:24,590\nit's gonna be the higher of the two,\nwhich is always gonna be yes.\n\n1160\n00:53:24,590 --> 00:53:27,550\nFor that for multi-choice\nmulti-string it's gonna combine them.\n\n1161\n00:53:27,550 --> 00:53:29,240\nFor the others it throws in error.\n\n1162\n00:53:29,240 --> 00:53:31,730\nIt won't fail the process but\nit log an error.\n\n1163\n00:53:31,730 --> 00:53:33,960\nAnd I'll just say overwrite\nthe existing values.\n\n1164\n00:53:35,000 --> 00:53:36,670\nAnd I think that's all\nI really need to do.\n\n1165\n00:53:36,670 --> 00:53:38,580\nAnd I'll click OK.\n\n1166\n00:53:40,150 --> 00:53:42,950\nAnd so\nnow I've got this new classification rule.\n\n1167\n00:53:42,950 --> 00:53:45,740\nIn the real world we would\nwant to schedule that.\n\n1168\n00:53:45,740 --> 00:53:49,360\nSo we're gonna right click on that, I'm\na right clicker, you can always use your\n\n1169\n00:53:49,360 --> 00:53:53,320\nactions pane over there, and\nconfigure classification schedule.\n\n1170\n00:53:54,330 --> 00:53:59,030\nAnd this is where I could go in and\npick how often I wanted this to run and\n\n1171\n00:53:59,030 --> 00:53:59,780\nthings like that.\n\n1172\n00:53:59,780 --> 00:54:04,250\nWe'll leave it off for now,\ncuz I don't actually have anything,\n\n1173\n00:54:04,250 --> 00:54:05,900\nlet's go make a file real quick.\n\n1174\n00:54:05,900 --> 00:54:08,030\nYou need a secret document.\n\n1175\n00:54:08,030 --> 00:54:09,150\n>> Make two files in there, right?\n\n1176\n00:54:09,150 --> 00:54:10,750\n>> Yeah.\n>> So one with secret and one without and\n\n1177\n00:54:10,750 --> 00:54:11,590\nwe'll see what happens.\n\n1178\n00:54:11,590 --> 00:54:12,500\n>> Sounds like a plan.\n\n1179\n00:54:12,500 --> 00:54:18,670\nSo we come in here to reports,\nmake a couple new documents.\n\n1180\n00:54:21,480 --> 00:54:26,567\nAnd we won't reuse\nthe word secret in there\n\n1181\n00:54:26,567 --> 00:54:32,370\ncause that'll,\nI'll just call it report one.\n\n1182\n00:54:32,370 --> 00:54:37,180\nAnd report two.\n\n1183\n00:54:37,180 --> 00:54:40,050\nAnd on report two I'm\ngonna open that up and\n\n1184\n00:54:40,050 --> 00:54:41,900\nI'm gonna put the word secret in there.\n\n1185\n00:54:44,640 --> 00:54:46,630\nAnd we'll save it and we'll close it.\n\n1186\n00:54:48,730 --> 00:54:49,660\nAll right.\n\n1187\n00:54:49,660 --> 00:54:52,420\nSo then what we would want to do, since\nwe don't want to wait for a schedule or\n\n1188\n00:54:52,420 --> 00:54:54,050\nanything like that for our lab purposes,\n\n1189\n00:54:54,050 --> 00:54:57,500\nI can actually run these\nclassification rules now.\n\n1190\n00:54:57,500 --> 00:55:01,610\nSo I'm gonna run classification with\nall rules now, and in the real world,\n\n1191\n00:55:01,610 --> 00:55:03,010\nyou might wanna run\nthis in the background,\n\n1192\n00:55:03,010 --> 00:55:05,540\nbecause if you've got a large\nstorage device or it's a large,\n\n1193\n00:55:05,540 --> 00:55:09,930\nit's shared with a lot of files in there,\nthis could take a little while to perform.\n\n1194\n00:55:09,930 --> 00:55:12,940\nI'm gonna go ahead and just use wait for\nclassification to complete because it's\n\n1195\n00:55:12,940 --> 00:55:17,760\na very nice report that gets generated\nat the end of this class vacation task.\n\n1196\n00:55:17,760 --> 00:55:23,090\nSo we'll let that run, shouldn't take too\nlong with our whopping two files in there.\n\n1197\n00:55:23,090 --> 00:55:27,720\n>> [LAUGH]\n>> Just make me a nice HTML report.\n\n1198\n00:55:29,630 --> 00:55:30,570\nAnd interesting stuff,\n\n1199\n00:55:30,570 --> 00:55:34,290\nthere's some other things that I know\nwe've talked about in the other episodes.\n\n1200\n00:55:34,290 --> 00:55:36,810\nWe're going to scroll down to\nthe bottom here where I can see,\n\n1201\n00:55:38,180 --> 00:55:40,360\nwe can kind of see it, I'll zoom in\na little bit for you guys, there.\n\n1202\n00:55:41,980 --> 00:55:46,390\nWhere I've got two files in that folder,\nbut only one of them is showing up in this\n\n1203\n00:55:46,390 --> 00:55:49,630\nreport because only one of them\nhad the word secret in it.\n\n1204\n00:55:49,630 --> 00:55:53,506\nSo report number two,\nit found the word secret and\n\n1205\n00:55:53,506 --> 00:55:56,750\nit set that top secret to yes, all right.\n\n1206\n00:55:56,750 --> 00:56:02,130\nSo that's the report it generates,\nif we go take a peak at the file itself.\n\n1207\n00:56:02,130 --> 00:56:05,160\nSee if we can see anything here.\n\n1208\n00:56:05,160 --> 00:56:10,066\nWe're gonna come into reports, and pull\nup the properties there for report two,\n\n1209\n00:56:10,066 --> 00:56:13,350\nand you'll see that we have\nthis classification tab.\n\n1210\n00:56:13,350 --> 00:56:17,250\nNow this was added in 2012.\n\n1211\n00:56:17,250 --> 00:56:18,070\nIt was in 2012, but\n\n1212\n00:56:18,070 --> 00:56:22,090\nthey've actually given us the ability\nin 2012 R2 to do manual classification.\n\n1213\n00:56:22,090 --> 00:56:25,940\nIt used to be when 2012, when it first\ncame out, we didn't have this down here.\n\n1214\n00:56:25,940 --> 00:56:28,810\nSo, I wasn't able to set this manually.\n\n1215\n00:56:28,810 --> 00:56:31,730\nI had to create a classification\nrule that would apply this after\n\n1216\n00:56:31,730 --> 00:56:32,570\nscanning the documents.\n\n1217\n00:56:32,570 --> 00:56:35,930\nNow I can actually do it myself, so\nif the user creates a document and\n\n1218\n00:56:35,930 --> 00:56:37,800\nthey wanna classify it\nthey definitely can.\n\n1219\n00:56:37,800 --> 00:56:40,020\nBut you can see it set the value to yes.\n\n1220\n00:56:40,020 --> 00:56:45,420\nOn the other one,\nit does not have the word secret in it,\n\n1221\n00:56:45,420 --> 00:56:47,742\nwe'll see it's set to none, all right.\n\n1222\n00:56:48,930 --> 00:56:51,200\nSo that's the first part and\nthat's the classification.\n\n1223\n00:56:51,200 --> 00:56:55,610\nSo we run that maybe every hour or once\nan afternoon, whatever is appropriate for\n\n1224\n00:56:55,610 --> 00:56:58,320\nyour particular organization.\n\n1225\n00:56:58,320 --> 00:57:03,080\nSomething else we should probably talk\nabout with those guys, where is that\n\n1226\n00:57:03,080 --> 00:57:07,050\ninformation stored that the classification\nproperty that you're adding there?\n\n1227\n00:57:07,050 --> 00:57:10,879\nAnd for most documents, it's actually\nin something known as the ADS, or\n\n1228\n00:57:10,879 --> 00:57:12,380\nthe alternate data stream.\n\n1229\n00:57:12,380 --> 00:57:18,686\nAnd that's a property of the NTSF file\nsystem, it's a hidden data stream.\n\n1230\n00:57:18,686 --> 00:57:21,883\nYou know the word metadata is\nstored about the object itself and\n\n1231\n00:57:21,883 --> 00:57:26,380\nthat's something that we can't see\ndirectly or access without special tools.\n\n1232\n00:57:26,380 --> 00:57:30,730\nAnd the reason that's important is\nbecause if you move that document to\n\n1233\n00:57:30,730 --> 00:57:35,780\na non-NTSF partition, you're gonna\nlose that NTFS alternate data stream,\n\n1234\n00:57:35,780 --> 00:57:38,640\nwhich means you're then going\nto lose that classification.\n\n1235\n00:57:38,640 --> 00:57:43,064\nIf it's an office document, it's actually\nstored as a value of the document itself,\n\n1236\n00:57:43,064 --> 00:57:45,912\nso if you move that around\nto say non-NTFS partitions,\n\n1237\n00:57:45,912 --> 00:57:47,924\nthe classification would still stay.\n\n1238\n00:57:47,924 --> 00:57:51,832\nFor everything, else you're\ngonna lose your classification.\n\n1239\n00:57:51,832 --> 00:57:54,583\nSo that's our classification management.\n\n1240\n00:57:54,583 --> 00:57:59,070\nThen what we can do is we can create\ntasks based on those classifications.\n\n1241\n00:57:59,070 --> 00:58:03,500\nSo let's say I want to archive something\noff or if I wanted to delete it,\n\n1242\n00:58:03,500 --> 00:58:07,490\nmove it to another location, rename it,\nwe can do several different things.\n\n1243\n00:58:07,490 --> 00:58:10,742\nI'm gonna create a file\nmanagement task by right click,\n\n1244\n00:58:10,742 --> 00:58:15,077\nCreate File Management Task, go to\nMy Wizard and we'll call this, just for\n\n1245\n00:58:15,077 --> 00:58:17,672\ngiggles, we'll do one that's like archive\n\n1246\n00:58:20,872 --> 00:58:25,210\nThere's actually a couple\nof pre-built tasks.\n\n1247\n00:58:25,210 --> 00:58:26,380\nIf I can type.\n\n1248\n00:58:26,380 --> 00:58:27,120\nWe'll enable it.\n\n1249\n00:58:27,120 --> 00:58:30,719\nWe'll go to the scope, tell it where\nwe want to run this particular task.\n\n1250\n00:58:33,330 --> 00:58:36,120\nI'll get on our good old reports location.\n\n1251\n00:58:36,120 --> 00:58:37,090\nAnd then the action,\n\n1252\n00:58:37,090 --> 00:58:42,470\nthis is where I decide what I want it\nto do if it finds a particular setting.\n\n1253\n00:58:42,470 --> 00:58:44,240\nWe're gonna show you that in a second.\n\n1254\n00:58:44,240 --> 00:58:47,510\nSo you can see a pre-built one\nis going to be file exploration.\n\n1255\n00:58:47,510 --> 00:58:51,100\nCustom would mean I'm gonna be\nwriting my own commands here.\n\n1256\n00:58:51,100 --> 00:58:54,258\nOr I can do an RMS encryption,\nwhich is a new one to 2012 R2.\n\n1257\n00:58:54,258 --> 00:58:59,664\nI'm just gonna do a file expiration\ncuz I don't want to write a script,\n\n1258\n00:58:59,664 --> 00:59:04,167\nand so I'm gonna find where I\nwant to move these guys to, and\n\n1259\n00:59:04,167 --> 00:59:09,053\njust real quick, I'm gonna make\na new folder called Archives.\n\n1260\n00:59:09,053 --> 00:59:11,652\nNormally that might be on another server,\nsomething like that,\n\n1261\n00:59:11,652 --> 00:59:12,891\nwhere I'm only gonna move-.\n\n1262\n00:59:12,891 --> 00:59:14,682\n>> Slower storage, less expensive storage.\n\n1263\n00:59:14,682 --> 00:59:17,830\n>> Yeah, and\nwe use that a lot with that last access.\n\n1264\n00:59:17,830 --> 00:59:20,150\nIf it hasn't been accessed in six months,\nwe archive it off.\n\n1265\n00:59:21,310 --> 00:59:22,558\nNotification.\n\n1266\n00:59:22,558 --> 00:59:27,800\nDo I wanna get something logged into\nthe event log, or get an email sent?\n\n1267\n00:59:27,800 --> 00:59:30,690\nWe click add here,\nwe don't have an email server set up, so\n\n1268\n00:59:30,690 --> 00:59:33,360\nI'm not gonna click on that one,\nbut I can go to the event log,\n\n1269\n00:59:33,360 --> 00:59:37,120\nhave it send a warning, and we've shown\nyou this in our previous episodes.\n\n1270\n00:59:37,120 --> 00:59:41,300\nVery cool, customizable, messages that\nyou can have sent where you can insert\n\n1271\n00:59:41,300 --> 00:59:43,000\nany of these variables into there.\n\n1272\n00:59:43,000 --> 00:59:44,760\nNow, by default,\nit's gonna throw it up for 15 days.\n\n1273\n00:59:44,760 --> 00:59:46,881\nYou could also have it run a script.\n\n1274\n00:59:46,881 --> 00:59:48,761\nWe'll just stick with the event log.\n\n1275\n00:59:48,761 --> 00:59:50,805\nIf I can click OK down there.\n\n1276\n00:59:50,805 --> 00:59:54,761\n[COUGH] Then, on the report,\nif I wanted to generate a report,\n\n1277\n00:59:54,761 --> 00:59:58,190\ndifferent formats that I can do there.\n\n1278\n00:59:58,190 --> 01:00:01,450\nThen the condition, this is the important\none, what is it that we're looking for\n\n1279\n01:00:01,450 --> 01:00:05,780\nin that document that's going\nto trigger this archive process?\n\n1280\n01:00:05,780 --> 01:00:12,250\nAs we'll click Add, and\nI can say top secret equals yes.\n\n1281\n01:00:12,250 --> 01:00:12,950\nOr let's say, no.\n\n1282\n01:00:12,950 --> 01:00:16,770\nWhat if this is my secret folder and we\nwanna move it out of there if it's no or.\n\n1283\n01:00:16,770 --> 01:00:18,810\n>> You can actually do two\ndifferent policies here, right.\n\n1284\n01:00:18,810 --> 01:00:23,460\nYou can do one, that says if top secret is\nyes, and the files over seven years old,\n\n1285\n01:00:23,460 --> 01:00:24,290\narchive it.\n\n1286\n01:00:24,290 --> 01:00:26,300\n>> Right?\n>> If top secret is no and\n\n1287\n01:00:26,300 --> 01:00:28,540\nthe file's over two years, archive it.\n\n1288\n01:00:28,540 --> 01:00:30,530\n>> Exactly.\n>> So, maybe top secret stuff you retained\n\n1289\n01:00:30,530 --> 01:00:33,120\nfor longer and you used\nthe property to make that decision.\n\n1290\n01:00:33,120 --> 01:00:33,680\n>> Absolutely.\n\n1291\n01:00:33,680 --> 01:00:35,770\nAbsolutely.\nSo, we'll just say yes for that.\n\n1292\n01:00:35,770 --> 01:00:38,600\nThere's also some pre-built ones down\nhere that are pretty easy to use.\n\n1293\n01:00:38,600 --> 01:00:40,490\nDays since files last accessed.\n\n1294\n01:00:40,490 --> 01:00:44,530\nDays since file was last modified or\ncreated, so those are nice as well.\n\n1295\n01:00:44,530 --> 01:00:46,730\nAnd then the schedule,\nhow often do you want to run this?\n\n1296\n01:00:46,730 --> 01:00:51,260\nYou might run your classification task\nevery hour, and then every afternoon\n\n1297\n01:00:51,260 --> 01:00:55,240\nyou have this go through, find anything\nthat needs to be archived and remove it.\n\n1298\n01:00:56,310 --> 01:00:57,110\nWe'll click OK.\n\n1299\n01:00:59,590 --> 01:01:03,260\nOops, I actually should select one\nday that we're gonna run that on.\n\n1300\n01:01:03,260 --> 01:01:06,018\nYeah, we'll do it on Sunday just for\nthe lab group.\n\n1301\n01:01:06,018 --> 01:01:10,452\nAnd now we're gonna wait around until\nSunday, so grab yourself a cup of coffee.\n\n1302\n01:01:10,452 --> 01:01:12,180\nLet's run that now [LAUGH]\n>> And\n\n1303\n01:01:12,180 --> 01:01:13,920\nyou can do some really cool stuff here.\n\n1304\n01:01:13,920 --> 01:01:18,600\nI know one use I've seen for it is where\nsomething might be flagged as top secret\n\n1305\n01:01:18,600 --> 01:01:23,285\ntoday, but after a certain period of time,\nit's no longer top secret, right?\n\n1306\n01:01:23,285 --> 01:01:27,045\nSo, you may have something that is super\nsecret today, but five years from now,\n\n1307\n01:01:27,045 --> 01:01:27,888\nit's no longer.\n\n1308\n01:01:27,888 --> 01:01:31,953\nSo you could have the process\nwhere it runs and says, all right,\n\n1309\n01:01:31,953 --> 01:01:36,770\nwell if it has been five years since this\nfile was modified, then take it from\n\n1310\n01:01:36,770 --> 01:01:41,930\nsecret down to unclassified, or\ntop secret down to secret, or whatever.\n\n1311\n01:01:41,930 --> 01:01:43,910\nAnd so it can modify those\nproperties based on time, and\n\n1312\n01:01:43,910 --> 01:01:45,560\nit's all automated, right?\n\n1313\n01:01:45,560 --> 01:01:47,045\nThat's what FCI is all about.\n\n1314\n01:01:47,045 --> 01:01:50,460\nAnd we're doing it here with\nsecurity clearance, right?\n\n1315\n01:01:50,460 --> 01:01:52,220\nBut it could be anything.\n\n1316\n01:01:52,220 --> 01:01:54,260\nIt could just be generic file storage.\n\n1317\n01:01:54,260 --> 01:01:57,460\nIt could be whatever properties\nit is that you wanted to track.\n\n1318\n01:01:57,460 --> 01:02:00,560\nYou might have a property that\nties it to a particular account.\n\n1319\n01:02:00,560 --> 01:02:02,230\nAnd by account,\nI don't mean like your user account.\n\n1320\n01:02:02,230 --> 01:02:06,320\nI mean, if you're an attorney,\nthen each of your clients that you get,\n\n1321\n01:02:06,320 --> 01:02:10,747\neach of the people you defend or whatever,\nthey might have a billing code and so\n\n1322\n01:02:10,747 --> 01:02:14,820\nyou can tie a billing code to those\nfiles so it's all tied together.\n\n1323\n01:02:14,820 --> 01:02:15,756\n>> Absolutely.\n>> You can use it for\n\n1324\n01:02:15,756 --> 01:02:16,602\nreally whatever you want.\n\n1325\n01:02:16,602 --> 01:02:18,880\n>> Yeah, It's incredibly flexible.\n\n1326\n01:02:18,880 --> 01:02:22,200\nIt's one of those things that doesn't seem\nlike a lot until you start thinking about\n\n1327\n01:02:22,200 --> 01:02:25,190\nwhat you can really do with it, and the\nfact that you can write your own scripts\n\n1328\n01:02:25,190 --> 01:02:28,810\nmeans you're really limited by your\nown script writing capabilities.\n\n1329\n01:02:28,810 --> 01:02:30,750\nI'm just gonna go ahead and\nrun that test now.\n\n1330\n01:02:32,460 --> 01:02:34,130\nAnd again I'll wait for it to complete.\n\n1331\n01:02:35,850 --> 01:02:36,540\nAnd we'll see what happens.\n\n1332\n01:02:36,540 --> 01:02:38,123\n>> It can take hours or days.\n\n1333\n01:02:38,123 --> 01:02:38,876\nI like that.\n\n1334\n01:02:38,876 --> 01:02:42,072\n>> [LAUGH] Yeah, they're just like,\nyeah we don't know.\n\n1335\n01:02:42,072 --> 01:02:43,320\nIt does.\n\n1336\n01:02:43,320 --> 01:02:46,740\nIt depends on how much content\nobviously that you're going through.\n\n1337\n01:02:46,740 --> 01:02:48,790\nAnd so what we see down here.\n\n1338\n01:02:48,790 --> 01:02:51,370\nLet's see, so report to.\n\n1339\n01:02:51,370 --> 01:02:54,125\nLooks like it got,\nhopefully we'll see if it got moved.\n\n1340\n01:02:54,125 --> 01:02:56,030\nI'll see if it's still in there.\n\n1341\n01:02:57,660 --> 01:03:01,480\nOh, that's right, cuz we told it\nwe would get a 15 day warning.\n\n1342\n01:03:01,480 --> 01:03:02,520\nSo what we really should do,\n\n1343\n01:03:02,520 --> 01:03:08,080\nwe can see one was tagged by this\nparticular task as going to be archived.\n\n1344\n01:03:08,080 --> 01:03:11,181\nAnd then if we take a peek\nat our event viewer\n\n1345\n01:03:16,248 --> 01:03:18,480\nHm, I remember which log this goes under.\n\n1346\n01:03:18,480 --> 01:03:22,958\nLet's see, application and\nI'm trying to remember that event ID.\n\n1347\n01:03:26,476 --> 01:03:28,740\nLet's see, so\nthat's where it finished the job.\n\n1348\n01:03:28,740 --> 01:03:29,810\nI think, that's the one.\n\n1349\n01:03:29,810 --> 01:03:30,920\nThere we go.\n\n1350\n01:03:30,920 --> 01:03:32,715\nSo one file will expire on or\n\n1351\n01:03:32,715 --> 01:03:37,111\nafter 6/25 which is 15 days\nfrom whatever my computer says.\n\n1352\n01:03:37,111 --> 01:03:39,110\n>> [LAUGH] Whatever your computer says.\n\n1353\n01:03:39,110 --> 01:03:40,280\n>> You never know with\nsome of these virtuals.\n\n1354\n01:03:40,280 --> 01:03:42,080\nThey pull wrong dates,\nwrong times all the time.\n\n1355\n01:03:43,540 --> 01:03:45,392\n>> All right, so that is FCI.\n\n1356\n01:03:45,392 --> 01:03:48,640\nIt's pretty cool, it really is\ncompletely customizable to you,\n\n1357\n01:03:48,640 --> 01:03:50,096\nwhatever your situation is.\n\n1358\n01:03:50,096 --> 01:03:52,940\nIt's great for identifying old files kind\nof getting them out of there and stuff.\n\n1359\n01:03:52,940 --> 01:03:54,240\nReally, really cool stuff.\n\n1360\n01:03:54,240 --> 01:03:56,491\n>> So\nit's definitely something that's neat and\n\n1361\n01:03:56,491 --> 01:03:58,130\nvery likely to show up on the exam.\n\n1362\n01:03:58,130 --> 01:04:00,380\n>> Yes, yep, absolutely.\n\n1363\n01:04:00,380 --> 01:04:03,686\n>> The very last thing that we have to\ntalk about is another topic that we\n\n1364\n01:04:03,686 --> 01:04:06,880\nalready hit in some other shows,\nwhich is File access auditing.\n\n1365\n01:04:06,880 --> 01:04:10,633\nWe covered in, I know we covered\nit in the Windows 8 show and\n\n1366\n01:04:10,633 --> 01:04:13,490\nin the 74 10 Server show.\n\n1367\n01:04:13,490 --> 01:04:17,720\nWith file auditing,\nwe can track who's accessing files.\n\n1368\n01:04:17,720 --> 01:04:20,975\nWho's working with them, create,\ndelete, modify, whatever.\n\n1369\n01:04:20,975 --> 01:04:23,865\nAnd we got a chance to see that\nin an earlier episode where\n\n1370\n01:04:23,865 --> 01:04:26,835\nwe turned that on and\nwe tracked the access to that file.\n\n1371\n01:04:26,835 --> 01:04:28,445\nAnd it was fine.\n\n1372\n01:04:28,445 --> 01:04:31,600\nSo now, here we are on the 7412 exam and\nwe see it\n\n1373\n01:04:31,600 --> 01:04:36,150\ncreep back up into our exam objectives,\nconfigure file access auditing.\n\n1374\n01:04:36,150 --> 01:04:38,790\nWell, if we're going to do that,\nwhat's it talking about?\n\n1375\n01:04:38,790 --> 01:04:43,230\nWell it's talking about a new feature\nin Windows Server 2012 R2 where\n\n1376\n01:04:43,230 --> 01:04:46,370\nwe can actually create\na centralized group policy\n\n1377\n01:04:46,370 --> 01:04:49,190\nobject to enable file\nauditing on our systems.\n\n1378\n01:04:49,190 --> 01:04:52,790\n>> Without having to go and\nconfigure auditing on the files and\n\n1379\n01:04:52,790 --> 01:04:56,210\nfolders themselves,\nthat's a big time savings.\n\n1380\n01:04:56,210 --> 01:04:57,010\n>> It really is.\n\n1381\n01:04:57,010 --> 01:05:00,170\n>> So, this is another one of those new\nfeatures that Microsoft is pretty proud\n\n1382\n01:05:00,170 --> 01:05:01,630\nof, and it is pretty handy.\n\n1383\n01:05:01,630 --> 01:05:03,280\nEspecially on servers.\n\n1384\n01:05:03,280 --> 01:05:04,540\nNot so handy on work stations.\n\n1385\n01:05:04,540 --> 01:05:06,710\nBut a lot more handy on servers.\n\n1386\n01:05:06,710 --> 01:05:10,500\n>> Yeah, it is, cuz I'll open up a GPO\nwhile were talking about it here.\n\n1387\n01:05:10,500 --> 01:05:13,350\nAs Don was saying,\nit used to be we had to go in and\n\n1388\n01:05:13,350 --> 01:05:14,680\nit was a two part process, right,\n\n1389\n01:05:14,680 --> 01:05:19,010\nyou had to go an increase your group\npolicy object that enabled the auditing.\n\n1390\n01:05:19,010 --> 01:05:20,930\nAnd then you had to go to\neach individual object and\n\n1391\n01:05:20,930 --> 01:05:23,460\nmodify the system access control list.\n\n1392\n01:05:23,460 --> 01:05:27,450\nYou can use inheritance to help with\nsome of that but it was tedious.\n\n1393\n01:05:27,450 --> 01:05:29,760\nAnd you really, we used to say,\nwe don't want to audit everything.\n\n1394\n01:05:29,760 --> 01:05:32,000\nBecause it would generate\nthese big log files.\n\n1395\n01:05:32,000 --> 01:05:34,660\nAnd now we, you know, there's serve,\nsome servers that have nothing but\n\n1396\n01:05:34,660 --> 01:05:36,210\nsensitive data on there.\n\n1397\n01:05:36,210 --> 01:05:38,270\nOr because of industry or\ngovernmental regulations,\n\n1398\n01:05:38,270 --> 01:05:41,990\nyou need to keep track of object\naccessing on every single object.\n\n1399\n01:05:41,990 --> 01:05:43,960\nSo this makes it a lot easier.\n\n1400\n01:05:43,960 --> 01:05:48,399\nAnd I'll just pull up it doesn't really\nmatter what policy I shouldn't do that\n\n1401\n01:05:48,399 --> 01:05:49,392\n>> Maybe not the default.\n\n1402\n01:05:49,392 --> 01:05:51,680\n>> I know, I feel very bad doing that.\n\n1403\n01:05:51,680 --> 01:05:53,160\nWe don't really have\nvery many choices here.\n\n1404\n01:05:53,160 --> 01:05:57,460\nI'll do the branch cache which\nthere are no servers in this OU.\n\n1405\n01:05:57,460 --> 01:05:59,710\nBut just to show you the setting\nmore than anything or\n\n1406\n01:05:59,710 --> 01:06:02,635\nI can move a server in there,\njust seeing it at this point.\n\n1407\n01:06:02,635 --> 01:06:05,440\n>> Cuz we've already\nseen the actual auditing.\n\n1408\n01:06:05,440 --> 01:06:08,800\n>> And the key here is just\nremembering where the settings are and\n\n1409\n01:06:08,800 --> 01:06:10,020\nlearning what some of them do.\n\n1410\n01:06:10,020 --> 01:06:14,010\nWe started out with like, what,\n12 categories and now and\n\n1411\n01:06:14,010 --> 01:06:17,380\nI'm in the wrong place as I talk and\ntry to click at the same time.\n\n1412\n01:06:17,380 --> 01:06:21,400\nYou know underneath my security settings\nyou've got your local policies and\n\n1413\n01:06:21,400 --> 01:06:24,540\nyour auto policy, these are the original\nnine categories that have\n\n1414\n01:06:24,540 --> 01:06:26,840\nbeen with us since what, Windows 2000?\n\n1415\n01:06:26,840 --> 01:06:30,380\nAnd now if we scroll down,\nwe got this advanced\n\n1416\n01:06:30,380 --> 01:06:34,440\naudit policy configuration node\nwhere if go and expand that out, and\n\n1417\n01:06:34,440 --> 01:06:38,750\nexpand out my audit policies I'll see\nthat there's several new categories and\n\n1418\n01:06:38,750 --> 01:06:44,620\neach one of these has categories\nunderneath, or policies underneath that.\n\n1419\n01:06:44,620 --> 01:06:49,210\nSo object access is where I'm looking,\nhere I've got this audit file share and\n\n1420\n01:06:49,210 --> 01:06:51,230\naudit detailed file share.\n\n1421\n01:06:51,230 --> 01:06:54,650\nThere's another one I\nwanted to show you guys.\n\n1422\n01:06:54,650 --> 01:06:58,090\nOh, Global Object Access Auditing for\nFile Systems, and\n\n1423\n01:06:58,090 --> 01:07:02,610\nthis is the one where we start turning\nthese on and we'll be able to audit.\n\n1424\n01:07:02,610 --> 01:07:06,240\nLet me take you over to\nthe display tab here where again,\n\n1425\n01:07:06,240 --> 01:07:09,730\nwe don't have to set it on\nthe individual resources.\n\n1426\n01:07:09,730 --> 01:07:13,860\nWe can enable it here to every file.\n\n1427\n01:07:13,860 --> 01:07:14,960\nYou see where it says that?\n\n1428\n01:07:14,960 --> 01:07:17,230\nEvery file and folder.\n\n1429\n01:07:17,230 --> 01:07:22,100\nBoth file and folder, it's gonna do\nthem both, so easier to do especially on\n\n1430\n01:07:22,100 --> 01:07:26,980\nthat server where I have multiple objects.\n\n1431\n01:07:26,980 --> 01:07:29,140\nAnd then I can still control\nwho I want to audit.\n\n1432\n01:07:29,140 --> 01:07:31,470\nNow I might not want to audit everybody,\n\n1433\n01:07:31,470 --> 01:07:33,360\nagain we are worried about that log size,\nright?\n\n1434\n01:07:33,360 --> 01:07:35,370\nIt can generate a lot of events.\n\n1435\n01:07:35,370 --> 01:07:38,450\n>> And this global setting is really bad\nabout that because we're really we're,\n\n1436\n01:07:38,450 --> 01:07:39,600\nwe're popping the stops off, right?\n\n1437\n01:07:39,600 --> 01:07:43,110\nWe're saying we want to audit\nglobally this, this whole system.\n\n1438\n01:07:43,110 --> 01:07:45,760\nIt can generate a ton of events.\n\n1439\n01:07:45,760 --> 01:07:48,420\nSo on a high security server,\nthat's a good thing.\n\n1440\n01:07:48,420 --> 01:07:49,000\nYou want that.\n\n1441\n01:07:49,000 --> 01:07:51,720\nBut for most of us, this is not\nreally gonna be a viable option.\n\n1442\n01:07:51,720 --> 01:07:54,660\nMost of us are still going\nto use the old manual method\n\n1443\n01:07:54,660 --> 01:07:55,920\ncuz it lets us be really granular.\n\n1444\n01:07:55,920 --> 01:07:56,530\n>> Yeah.\n\n1445\n01:07:56,530 --> 01:07:59,910\nCuz if your log files are too big, you're\nnot gonna be able to find the important\n\n1446\n01:07:59,910 --> 01:08:03,510\ninformation in there unless you're using,\nthere's a lot of third party tools that\n\n1447\n01:08:03,510 --> 01:08:08,870\ncan help us crunch those logs, but you end\nup missing important info if it's too big.\n\n1448\n01:08:08,870 --> 01:08:11,980\nSo we might pick out, I don't think we\nhave any security principles on here,\n\n1449\n01:08:13,150 --> 01:08:14,140\non these particular machines.\n\n1450\n01:08:14,140 --> 01:08:15,710\n>> Yeah, just like administrator.\n\n1451\n01:08:15,710 --> 01:08:17,250\n>> Yeah.\n\n1452\n01:08:17,250 --> 01:08:19,350\nMaybe I want to make sure that\nthe counter operators aren't\n\n1453\n01:08:20,590 --> 01:08:22,000\nmessing with these files on the server.\n\n1454\n01:08:22,000 --> 01:08:24,460\nOr something like that, and\nI might not care if they read right?\n\n1455\n01:08:24,460 --> 01:08:28,160\nI might just wanna see if they are making\nchanges, or something like that.\n\n1456\n01:08:28,160 --> 01:08:30,531\n>> Yeah, the less you have\nin here the better, right?\n\n1457\n01:08:30,531 --> 01:08:33,591\nSo if you're just trying to\ntrack deletes for example, so\n\n1458\n01:08:33,591 --> 01:08:35,940\nyou could really reduce it quite a bit.\n\n1459\n01:08:35,940 --> 01:08:37,040\n>> Absolutely.\n\n1460\n01:08:37,040 --> 01:08:39,850\nAnd then we get down here to conditions,\nbut we'll talk to\n\n1461\n01:08:39,850 --> 01:08:42,314\nyou about that in the next episode, so-\n>> [LAUGH]\n\n1462\n01:08:42,314 --> 01:08:43,755\n>> So stay tuned for that one.\n\n1463\n01:08:43,755 --> 01:08:46,450\n[LAUGH]\n>> All right, so cool options there really\n\n1464\n01:08:46,450 --> 01:08:48,980\njust an extension of what we've\nalready seen in file auditing.\n\n1465\n01:08:48,980 --> 01:08:52,560\nIf you haven't worked with file auditing\nI do encourage you to jump over to\n\n1466\n01:08:52,560 --> 01:08:55,570\nthe 7410 show and we got a whole\nepisode where we dive into that stuff.\n\n1467\n01:08:55,570 --> 01:08:57,270\nSo definitely check that out.\n\n1468\n01:08:57,270 --> 01:09:00,780\nBut that global option in the GPO there,\nthat was the important one.\n\n1469\n01:09:00,780 --> 01:09:02,070\nAnd Mike, you still have it pulled up?\n\n1470\n01:09:02,070 --> 01:09:02,870\n>> Yep.\n>> Let's just give you\n\n1471\n01:09:02,870 --> 01:09:05,510\nguys a quick refresher, how do we get to\nthat in the GPO, what's the full path?\n\n1472\n01:09:05,510 --> 01:09:08,720\n>> That is actually underneath\nthe computer half you're going to go into\n\n1473\n01:09:08,720 --> 01:09:12,150\nPolicies and then Windows Settings and\nthen and Security Settings.\n\n1474\n01:09:12,150 --> 01:09:15,640\nYour standard audit your local policy,\nthen audit policy.\n\n1475\n01:09:15,640 --> 01:09:18,540\nAnd then they've added to the bottom\nof my security settings, so\n\n1476\n01:09:18,540 --> 01:09:23,110\nComputer Policies > Window Settings\n> Scurity settings, and then down to\n\n1477\n01:09:23,110 --> 01:09:26,878\nAdvanced Audit Policy Configuration,\nand then Audit Policies underneath.\n\n1478\n01:09:26,878 --> 01:09:28,620\n>> Perfect.\n\n1479\n01:09:28,620 --> 01:09:29,300\n>> Perfect.\n\n1480\n01:09:29,300 --> 01:09:32,042\n>> All right, well, like you said,\nwe do have some more things coming up.\n\n1481\n01:09:32,042 --> 01:09:35,540\nLike the discretionary access list and\nall that good stuff.\n\n1482\n01:09:35,540 --> 01:09:36,557\nOr no, dynamic access control.\n\n1483\n01:09:36,557 --> 01:09:37,196\n>> Dynamic access control.\n\n1484\n01:09:37,196 --> 01:09:38,855\nAnd, yeah, some really cool stuff.\n\n1485\n01:09:38,855 --> 01:09:40,430\n>> So, definitely stay tuned for that.\n\n1486\n01:09:40,430 --> 01:09:43,280\nBut I think this is pretty much all\nwe're gonna hit for this episode.\n\n1487\n01:09:43,280 --> 01:09:45,550\nSo it's a good spot for us to wrap up.\n\n1488\n01:09:45,550 --> 01:09:46,770\nSo let me just remind you guys,\n\n1489\n01:09:46,770 --> 01:09:50,820\nif you have any questions on this,\nbe sure to jump on over to the website.\n\n1490\n01:09:50,820 --> 01:09:52,090\nIf it's live during the show,\n\n1491\n01:09:52,090 --> 01:09:56,340\ngot to itpro.tv/live, you'll see\nthe chat box right beneath the video.\n\n1492\n01:09:56,340 --> 01:09:59,280\nPost your questions, we monitor and\nanswer during the show.\n\n1493\n01:09:59,280 --> 01:10:01,710\nIf you're watching this recorded,\nyou're not out of luck.\n\n1494\n01:10:01,710 --> 01:10:03,367\nJust use the Q and A forums.\n\n1495\n01:10:03,367 --> 01:10:06,795\nOn every single IT Pro TV webpage\nyou'll see a link that says Q and\n\n1496\n01:10:06,795 --> 01:10:08,060\nA up at the top.\n\n1497\n01:10:08,060 --> 01:10:09,820\nIt'll take you to the Q and A forums.\n\n1498\n01:10:09,820 --> 01:10:12,870\nYou can post your questions there,\nand again, we monitor, and answer.\n\n1499\n01:10:12,870 --> 01:10:15,412\nWe wanna make sure you\nguys get the you need so\n\n1500\n01:10:15,412 --> 01:10:17,481\nyou can be successful on that exam.\n\n1501\n01:10:17,481 --> 01:10:19,143\nAll right,\nwell I hope you guys enjoyed the show.\n\n1502\n01:10:19,143 --> 01:10:21,976\nSigning off for ITvPro TV, I'm Don Pezet.\n\n1503\n01:10:21,976 --> 01:10:23,008\n>> And I'm Mike Rodrick.\n\n1504\n01:10:23,008 --> 01:10:24,772\n>> And we will see you next time.\n\n1505\n01:10:24,772 --> 01:10:34,772\n[MUSIC].\n\n1506\n01:10:36,972 --> 01:10:42,330\n[SOUND].\n\n",
          "vimeoId": "97971458"
        },
        {
          "description": "In this episode Mike and Don take a look at configuring Dynamic Access Controls through the Active Directory Administrative Center. They discuss creating file classification rules and demonstrate adding properties to resources. They also demonstrate modifying Central Access Rules to audit permissions in a staging environment.",
          "length": "5138",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/005-Dynamic-Access-and-Storage.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/005-Dynamic-Access-and-Storage-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/005-Dynamic-Access-and-Storage-sm.jpg",
          "title": "Dynamic Access and Storage",
          "transcript": "1\n00:00:00,293 --> 00:00:10,293\n[MUSIC]\n\n2\n00:00:33,587 --> 00:00:36,495\nAll right good morning,\ngood afternoon and good evening and\n\n3\n00:00:36,495 --> 00:00:40,210\nwelcome back to another episode of\nITProTV, I'm your host Tom Bizet.\n\n4\n00:00:40,210 --> 00:00:42,060\nBack once again with Mr. Mike Roderick.\n\n5\n00:00:42,060 --> 00:00:42,730\nHow's it going Mike?\n\n6\n00:00:42,730 --> 00:00:44,745\n>> Fantastic, another day, another dollar.\n\n7\n00:00:44,745 --> 00:00:46,130\n[LAUGH]\n>> Yep.\n\n8\n00:00:46,130 --> 00:00:47,810\nSadly in my mind,\n>> Mm-hm\n\n9\n00:00:47,810 --> 00:00:48,370\n>> I was saying, Don.\n\n10\n00:00:48,370 --> 00:00:49,040\n>> Right.\n\n11\n00:00:49,040 --> 00:00:52,448\n>> When you introduce Mike,\ndon't do the ZZ Top windup.\n\n12\n00:00:52,448 --> 00:00:53,028\n>> [LAUGH]\n>> And it\n\n13\n00:00:53,028 --> 00:00:53,808\n>> Did, I did it\n\n14\n00:00:53,808 --> 00:00:54,558\nanyway.\nI gotta.\n\n15\n00:00:54,558 --> 00:00:55,518\n>> It becomes routine, right?\n\n16\n00:00:55,518 --> 00:00:57,115\nSo I think I'm fantastic every day.\n\n17\n00:00:57,115 --> 00:00:58,380\n>> [LAUGH]\n>> Every time we do this,\n\n18\n00:00:58,380 --> 00:00:59,625\nI am always fantastic.\n\n19\n00:00:59,625 --> 00:01:00,340\n[LAUGH]\n>> Mr.\n\n20\n00:01:00,340 --> 00:01:01,420\nFantastic.\n\n21\n00:01:01,420 --> 00:01:05,920\nAll right, well today we\nare gonna be continuing on with.\n\n22\n00:01:05,920 --> 00:01:07,930\nWell, the same objective we left off with.\n\n23\n00:01:07,930 --> 00:01:09,700\n>> Yeah.\n>> We were talking about\n\n24\n00:01:09,700 --> 00:01:10,680\nstorage technologies.\n\n25\n00:01:10,680 --> 00:01:11,730\n>> Mm-hm.\n>> And Windows server 2012, and\n\n26\n00:01:11,730 --> 00:01:15,290\nwe had a great episode that we just shot,\n\n27\n00:01:15,290 --> 00:01:18,730\nwhich was where we tackled things\nlike clustering and all that.\n\n28\n00:01:18,730 --> 00:01:21,530\n>> Yeah.\n>> And then we followed that up with.\n\n29\n00:01:21,530 --> 00:01:24,060\nOh, we just did NFS,\nsome file classification.\n\n30\n00:01:24,060 --> 00:01:25,130\n>> Branch cache.\n\n31\n00:01:25,130 --> 00:01:26,660\n>> And I could tell you were itching\n>> [LAUGH]\n\n32\n00:01:26,660 --> 00:01:29,090\n>> When we were doing file classification,\n\n33\n00:01:29,090 --> 00:01:31,700\nyou wanted to jump into our next topic but\n\n34\n00:01:31,700 --> 00:01:35,510\nwe were pushed off because\nthey're very inter-related.\n\n35\n00:01:35,510 --> 00:01:39,450\nToday, we're gonna jump into\nDynamic Access Control.\n\n36\n00:01:39,450 --> 00:01:43,680\nand dynamic access control is actually\nan extension of file class, well,\n\n37\n00:01:43,680 --> 00:01:48,800\nI always use it with file classification\n>> it is it really is you know its\n\n38\n00:01:48,800 --> 00:01:52,550\nall combined into the same thing it\njust extends what we can do with NTFS.\n\n39\n00:01:53,660 --> 00:01:57,290\nSome of the abilities or the ways that we\ncan control access to these resources,\n\n40\n00:01:57,290 --> 00:01:59,870\nhence the name Dynamic Access Control.\n\n41\n00:01:59,870 --> 00:02:01,970\nWe, we're limited with NTFS.\n\n42\n00:02:01,970 --> 00:02:05,000\nNTFS worked for a long time, it's\nfantastic, still does and it's still used.\n\n43\n00:02:05,000 --> 00:02:07,080\nThis doesn't replace it at all.\n\n44\n00:02:07,080 --> 00:02:11,500\nBut you're limited with NTFS\nyou're limited to users.\n\n45\n00:02:11,500 --> 00:02:14,090\nYou know what I mean,\nthe SID of your user account.\n\n46\n00:02:14,090 --> 00:02:17,150\nAnd your group membership and\nthe SID of you're group members, and\n\n47\n00:02:17,150 --> 00:02:19,230\nthat's all we can base it on.\n\n48\n00:02:19,230 --> 00:02:21,580\nWe bring in dynamic access control,\nand all of a sudden,\n\n49\n00:02:21,580 --> 00:02:25,315\nwe can base access on things in\nthe attribute and active directory.\n\n50\n00:02:25,315 --> 00:02:25,820\n>> Mm-hm\n>> Right?\n\n51\n00:02:25,820 --> 00:02:28,250\nAnything, think of all\nthe properties you can set.\n\n52\n00:02:28,250 --> 00:02:29,970\nOn a user account in active directory.\n\n53\n00:02:29,970 --> 00:02:35,350\nDepartment, country, city, managed by,\nany of that stuff we can use it.\n\n54\n00:02:35,350 --> 00:02:40,190\nWe can create our own properties and\nwe can assign properties to resources and\n\n55\n00:02:40,190 --> 00:02:44,440\nthen we can compare the two and determine\nwhether or not they need to have access.\n\n56\n00:02:44,440 --> 00:02:45,860\nSo it's a really cool concept.\n\n57\n00:02:45,860 --> 00:02:49,950\nYeah and if you think about our last\nepisode which you haven't watched,\n\n58\n00:02:49,950 --> 00:02:53,260\ndefinitely check it out,\nwe set a file classification, and\n\n59\n00:02:53,260 --> 00:02:57,440\nwe created a way to flag files\nas being top secret, right?\n\n60\n00:02:57,440 --> 00:02:59,280\nSo we created basically\nthe clearance level, and\n\n61\n00:02:59,280 --> 00:03:01,340\nwe just did top secret yes or no, right?\n\n62\n00:03:01,340 --> 00:03:03,070\n>> Yep.\n>> We could have done a multiple choice\n\n63\n00:03:03,070 --> 00:03:07,620\noption where you set difference clearance\nlevel to say this one's top secret, or\n\n64\n00:03:07,620 --> 00:03:11,170\nsecret, or unclassified,\nor whatever, right.\n\n65\n00:03:11,170 --> 00:03:15,497\nAnd so we set that on the file, And\nthen we didn't really act upon that.\n\n66\n00:03:15,497 --> 00:03:16,781\n>> Right\n>> We just set the value.\n\n67\n00:03:16,781 --> 00:03:18,835\n>> Mm-hm\n>> We showed how you could act upon that.\n\n68\n00:03:18,835 --> 00:03:20,522\n>> We did one in file management task.\n\n69\n00:03:20,522 --> 00:03:22,250\n>> We did archiving or whatever.\n\n70\n00:03:22,250 --> 00:03:25,480\nBut the cool stuff is\nDynamic Access Control.\n\n71\n00:03:25,480 --> 00:03:28,940\nBecause what I could do is\ntake Mikes user account and\n\n72\n00:03:28,940 --> 00:03:31,645\nI could add a property to his account\nthat says classification level.\n\n73\n00:03:31,645 --> 00:03:32,280\n>> Mm-hm\n>> And\n\n74\n00:03:32,280 --> 00:03:34,570\nI could set his classification\nlevel to top secret.\n\n75\n00:03:34,570 --> 00:03:36,375\nMike has top secret clearance.\n\n76\n00:03:36,375 --> 00:03:40,200\n>> Mm-hm\n>> And now when he goes to access a file,\n\n77\n00:03:40,200 --> 00:03:42,520\na file that's flagged as top secret,\n>> [COUGH]\n\n78\n00:03:42,520 --> 00:03:44,040\n>> We can use Dynamic Access Control\n\n79\n00:03:44,040 --> 00:03:46,940\nto say, if Mike has top secret clearance\n\n80\n00:03:46,940 --> 00:03:50,400\nhe is allowed to access a file that\nhas top secret classification.\n\n81\n00:03:51,450 --> 00:03:53,560\nBut if Mike only has secret.\n\n82\n00:03:53,560 --> 00:03:55,110\n>> Right.\n>> Or, you know, unclassified.\n\n83\n00:03:55,110 --> 00:03:59,250\nIf he has a lower level of clearance when\nhe goes to access that file that requires\n\n84\n00:03:59,250 --> 00:04:01,720\ntop secret it won't\nallow him to access it.\n\n85\n00:04:01,720 --> 00:04:02,620\n>> It's gonna deny me.\n\n86\n00:04:02,620 --> 00:04:05,890\n>> And it's independent of the,\nthe access control list we normally write.\n\n87\n00:04:05,890 --> 00:04:06,760\n>> Yeah.\n>> That just say\n\n88\n00:04:06,760 --> 00:04:07,620\n>> This user or\n\n89\n00:04:07,620 --> 00:04:09,840\nthese groups have access to that file,\n\n90\n00:04:09,840 --> 00:04:14,300\nnow it's based on some kind\nof criteria that we define.\n\n91\n00:04:14,300 --> 00:04:17,830\n>> It's almost like implementing\nmandatory access control,\n\n92\n00:04:17,830 --> 00:04:18,600\nreally when you think about it.\n\n93\n00:04:18,600 --> 00:04:20,692\nCan we talk about different\nauthentication methods.\n\n94\n00:04:20,692 --> 00:04:22,910\n>> Mm-hm.\n>> Rule-based, mandatory, discretionary.\n\n95\n00:04:22,910 --> 00:04:24,322\nIn Windows we use discretionary.\n\n96\n00:04:24,322 --> 00:04:28,040\nAnd role-based with our groups and things\nlike that, but now we're talking about\n\n97\n00:04:28,040 --> 00:04:33,310\nlabeling user account,\nlabeling a resource, and following it out.\n\n98\n00:04:33,310 --> 00:04:34,830\n>> Yeah, so really cool, and\n\n99\n00:04:34,830 --> 00:04:37,790\nyou can see why these two technologies\nare kind of interrelated.\n\n100\n00:04:37,790 --> 00:04:41,530\nSo, when we did file classification\nin the last episode.\n\n101\n00:04:41,530 --> 00:04:44,620\nWe just did a simple archive thing.\n\n102\n00:04:44,620 --> 00:04:47,410\nLike oh yeah archive the data\nmove it off to other hard drives.\n\n103\n00:04:47,410 --> 00:04:48,350\nIt's pretty lame.\n\n104\n00:04:48,350 --> 00:04:51,500\nAnd I can tell Mike wanted to go in and\ndo that dynamic access control.\n\n105\n00:04:51,500 --> 00:04:53,485\nCuz that's were you get\njust sky is the limits.\n\n106\n00:04:53,485 --> 00:04:54,380\n>> Yeah\n>> So\n\n107\n00:04:54,380 --> 00:04:57,570\nyou can do this based on\nall sorts of criteria.\n\n108\n00:04:57,570 --> 00:05:00,900\nThe Clearance levels,\nthat's probably the most useful of them.\n\n109\n00:05:00,900 --> 00:05:03,620\nThat's the one I always think of but\nyou might have other\n\n110\n00:05:03,620 --> 00:05:08,430\nthings that you classify people based\non job rules or geography or whatever.\n\n111\n00:05:08,430 --> 00:05:12,920\nMike you mentioned we've got all these\nproperties on a user account already so\n\n112\n00:05:12,920 --> 00:05:15,850\nif you have the city listed of\nwhere that user works from.\n\n113\n00:05:15,850 --> 00:05:16,590\n>> Right.\n\n114\n00:05:16,590 --> 00:05:20,570\n>> Then you might have a file share\nthat only people that are in that\n\n115\n00:05:20,570 --> 00:05:21,550\ncity have access to.\n\n116\n00:05:21,550 --> 00:05:22,150\n>> Exactly.\n\n117\n00:05:22,150 --> 00:05:23,620\n>> Regardless of what group their in,\n\n118\n00:05:23,620 --> 00:05:26,480\nas long as that city is flagged their\nable to log in and get at it, so.\n\n119\n00:05:26,480 --> 00:05:29,390\n>> And we can even dump in, we're\nlike say it's not limited just users,\n\n120\n00:05:29,390 --> 00:05:30,760\nit's computers as well.\n\n121\n00:05:30,760 --> 00:05:33,095\nAnd we can look at group\nmembership along with the.\n\n122\n00:05:33,095 --> 00:05:34,910\nThe attributes and stuff.\n\n123\n00:05:34,910 --> 00:05:37,430\nlike in the, I'm gonna do\na little demo in a little bit.\n\n124\n00:05:37,430 --> 00:05:39,920\nWhat about this, I want this person,\nlet's say this guy's an admin and\n\n125\n00:05:39,920 --> 00:05:41,860\nhe has access to sensitive data.\n\n126\n00:05:41,860 --> 00:05:45,870\nAnd so when he's at his workstation at\nwork, I'm okay with him accessing that\n\n127\n00:05:45,870 --> 00:05:50,490\ndata but when he's at home or he's at the\nhotel and he's VPN in from some laptop or\n\n128\n00:05:50,490 --> 00:05:53,270\nsomething like that,\n,I don't want him accessing that data.\n\n129\n00:05:53,270 --> 00:05:55,860\nThere's no way I can do\nthat with NTFS permissions.\n\n130\n00:05:55,860 --> 00:05:58,210\nWith dynamic access control, it's easy.\n\n131\n00:05:58,210 --> 00:05:59,700\nIt's easy.\n>> The other thing is,\n\n132\n00:05:59,700 --> 00:06:01,552\nwhat happens when they're denied.\n\n133\n00:06:01,552 --> 00:06:02,120\n>> Mm-hm, yeah.\n\n134\n00:06:02,120 --> 00:06:04,480\n>> With NTFS, if you're denied,\nyou get a message.\n\n135\n00:06:04,480 --> 00:06:05,350\nIt says access denied.\n\n136\n00:06:05,350 --> 00:06:06,030\nThat's it, right?\n\n137\n00:06:06,030 --> 00:06:08,940\nI think it says, please contact your\nadministrator which was annoying.\n\n138\n00:06:08,940 --> 00:06:11,710\nSo then you call the administrator and\nyou're like well.\n\n139\n00:06:11,710 --> 00:06:12,980\nYour access was denied.\n\n140\n00:06:12,980 --> 00:06:13,955\nDid you read the message.\n\n141\n00:06:13,955 --> 00:06:14,600\n>> [LAUGH]\n>> And,\n\n142\n00:06:14,600 --> 00:06:17,360\nthen they say it did say to contact you.\n\n143\n00:06:17,360 --> 00:06:18,220\nAnd it, it's annoying.\n\n144\n00:06:18,220 --> 00:06:19,880\n>> Uh-huh. Yep. >> But\nthat's really all you can do.\n\n145\n00:06:19,880 --> 00:06:22,020\nMaybe you're doing auditing so\nyou'll have a record that it happened.\n\n146\n00:06:22,020 --> 00:06:22,610\nThat's about it.\n\n147\n00:06:22,610 --> 00:06:25,220\n>> Mm-hm\n>> But with dynamic access control.\n\n148\n00:06:25,220 --> 00:06:29,270\nYou can do access denied\nremediation where you can take\n\n149\n00:06:29,270 --> 00:06:33,330\nall sorts of various actions based on,\nwhat you want.\n\n150\n00:06:33,330 --> 00:06:35,730\n>> Yeah.\n>> Do you want it to kick off an email or\n\n151\n00:06:35,730 --> 00:06:37,695\nrun the script or\nperform some other activity?\n\n152\n00:06:37,695 --> 00:06:39,680\n>> Mm-hm\n>> I actually saw an example.\n\n153\n00:06:39,680 --> 00:06:44,310\nI haven't done it myself, but I saw a\nvideo that was a guy that was showing how.\n\n154\n00:06:44,310 --> 00:06:46,270\nHe set up an access request form.\n\n155\n00:06:46,270 --> 00:06:48,080\n>> Mm-hm\n>> Where if you were denied he\n\n156\n00:06:48,080 --> 00:06:51,230\nwould give you a link and you could go and\nyou'd fill out a form that said,\n\n157\n00:06:51,230 --> 00:06:53,475\nhey, I'm requesting\naccess to this resource.\n\n158\n00:06:53,475 --> 00:06:55,450\n>> Mm-hm\n>> So now you're actually empowering\n\n159\n00:06:55,450 --> 00:06:57,895\nthe user to do something about\nthat access being denied.\n\n160\n00:06:57,895 --> 00:06:59,510\n>> Absolutely\n>> And they'd submit the form and\n\n161\n00:06:59,510 --> 00:07:01,520\nif it was approved they'd\nget access to it and\n\n162\n00:07:01,520 --> 00:07:02,926\nif it was denied then that was just that.\n\n163\n00:07:02,926 --> 00:07:03,470\n>> Mm-hm\n>> So\n\n164\n00:07:03,470 --> 00:07:07,290\nyou can really do some\npowerful stuff here, but\n\n165\n00:07:07,290 --> 00:07:09,100\nit's up to you to figure\nout what you wanna do.\n\n166\n00:07:09,100 --> 00:07:11,290\nThis is not as easy as NTFS.\n\n167\n00:07:11,290 --> 00:07:13,860\nRight?\nNTFS, we just set some properties.\n\n168\n00:07:13,860 --> 00:07:15,570\n>> Yeah.\nIt's all built in to the operating system,\n\n169\n00:07:15,570 --> 00:07:16,710\nor file system really.\n\n170\n00:07:16,710 --> 00:07:18,750\nAnd with this,\nthere' s a lot more configuration.\n\n171\n00:07:18,750 --> 00:07:22,150\nYou've gotta set up your policies and\nthings like that but.\n\n172\n00:07:22,150 --> 00:07:25,390\nOnce you get it set up, they've got a\ngreat administrative console to deal with.\n\n173\n00:07:25,390 --> 00:07:27,220\nIt makes it pretty straightforward.\n\n174\n00:07:27,220 --> 00:07:30,990\nAnd once you get it set up,\nit's not too difficult to maintain.\n\n175\n00:07:30,990 --> 00:07:33,840\nAnd the other cool thing,\nwe wanna talk about layers of security,\n\n176\n00:07:33,840 --> 00:07:36,370\nbasically it, make sure we understand,\nit's not replacing NTFS,\n\n177\n00:07:36,370 --> 00:07:38,780\nit's another layer on top of that.\n\n178\n00:07:38,780 --> 00:07:41,840\nAnother really cool thing\nabout it is it's centralized.\n\n179\n00:07:41,840 --> 00:07:44,860\nSo we're not talking about where as NTFS,\nI've gotta go to each folder, right?\n\n180\n00:07:44,860 --> 00:07:46,461\nI can use inheritance to help me, but\n\n181\n00:07:46,461 --> 00:07:49,625\nyou've gotta go to the different\nresources and set those permissions.\n\n182\n00:07:49,625 --> 00:07:53,693\nWith this, I deploy policies out to my\nfile servers, all of my file servers or\n\n183\n00:07:53,693 --> 00:07:55,584\nwhichever ones I wanna use this on.\n\n184\n00:07:55,584 --> 00:07:59,550\nAnd I can implement these policies at\nany time on any one of these servers\n\n185\n00:07:59,550 --> 00:08:01,000\nout there.\n\n186\n00:08:01,000 --> 00:08:04,750\nSo I don't have to do it individually\non every single file server or\n\n187\n00:08:04,750 --> 00:08:05,390\nanything like that.\n\n188\n00:08:05,390 --> 00:08:06,730\nIt's a beautiful thing.\n\n189\n00:08:06,730 --> 00:08:08,080\nYou can make a change, and\n\n190\n00:08:08,080 --> 00:08:10,520\nyou can have that pushed out\nacross all your file servers.\n\n191\n00:08:10,520 --> 00:08:12,820\nGreat auditing capabilities\nbuilt in there.\n\n192\n00:08:12,820 --> 00:08:15,610\nWe're gonna talk about\nthe ability to stage permissions.\n\n193\n00:08:15,610 --> 00:08:17,760\nYou know, with NTFS,\nyou make a permission change,\n\n194\n00:08:17,760 --> 00:08:20,720\nand you gotta hope it works, and\nwait for the people to call you and say,\n\n195\n00:08:20,720 --> 00:08:22,910\nhey, all of a sudden\nI've lost access to this.\n\n196\n00:08:22,910 --> 00:08:25,720\nWith dynamic access control,\nI can make changes,\n\n197\n00:08:25,720 --> 00:08:29,620\nI can make proposed permissions,\nand I can have it audit those.\n\n198\n00:08:29,620 --> 00:08:31,868\nAnd it will still give the person access,\nand\n\n199\n00:08:31,868 --> 00:08:35,570\nthen send me an entry\nin my event log saying,\n\n200\n00:08:35,570 --> 00:08:39,240\nif you had implemented these permissions,\nthis is what would have happened.\n\n201\n00:08:39,240 --> 00:08:43,210\nSo it gives me a chance to test it\nbecause, as I was just saying, advantage,\n\n202\n00:08:43,210 --> 00:08:47,340\ncentralized administration, I can\nemploy this across all my file servers.\n\n203\n00:08:47,340 --> 00:08:51,860\nDisadvantage, you goof up,\nyou're not blocking access to one folder,\n\n204\n00:08:51,860 --> 00:08:55,240\nyou're blocking access to quite\na few resources anyplace that you've\n\n205\n00:08:55,240 --> 00:08:56,120\nimplemented that policy.\n\n206\n00:08:56,120 --> 00:08:59,290\nSo it's nice that they give us\nthe ability to stage it, and test it,\n\n207\n00:08:59,290 --> 00:09:00,510\nbefore we implement it.\n\n208\n00:09:00,510 --> 00:09:01,810\n>> Yep, it's pretty neat.\n\n209\n00:09:01,810 --> 00:09:05,351\nAnd while you were talking there, Mike,\nI was just trying to find the video that I\n\n210\n00:09:05,351 --> 00:09:08,496\nhad watched showing the guy [CROSSTALK]\ncreate that access denied form.\n\n211\n00:09:08,496 --> 00:09:14,310\nI couldn't find the video, but I did find\na scenario that Microsoft had written up.\n\n212\n00:09:14,310 --> 00:09:15,820\n>> Oh, okay.\n>> That shows how to do it.\n\n213\n00:09:15,820 --> 00:09:17,850\nSo, I'm gonna add these to our show notes.\n\n214\n00:09:17,850 --> 00:09:20,200\nSo, if you're watching this live,\nyou don't have it, but\n\n215\n00:09:20,200 --> 00:09:23,750\nif you're watching this recorded, beneath\nthe video, we'll post some show-notes.\n\n216\n00:09:23,750 --> 00:09:27,403\nI'm gonna include a bunch of links to some\nof the different ways we can do dynamic\n\n217\n00:09:27,403 --> 00:09:28,228\naccess control.\n\n218\n00:09:28,228 --> 00:09:29,548\nMike's gonna give us a guided tour.\n\n219\n00:09:29,548 --> 00:09:32,509\nHe's gonna show us how to implement it,\nbut there's so\n\n220\n00:09:32,509 --> 00:09:34,340\nmany different things you can do.\n\n221\n00:09:34,340 --> 00:09:39,990\nAnd Microsoft has this great page\nthat shows several examples they do,\n\n222\n00:09:39,990 --> 00:09:44,465\nlike using dynamic access for file\naccess auditing, which is pretty simple.\n\n223\n00:09:44,465 --> 00:09:49,930\nClassification-based encryption for Office\ndocuments, they show how to do that.\n\n224\n00:09:49,930 --> 00:09:53,440\nIf you classify it at a certain level,\nit'll make sure it gets encrypted.\n\n225\n00:09:53,440 --> 00:09:54,400\nIf you don't, it won't.\n\n226\n00:09:55,930 --> 00:09:58,970\nGetting insight into your data,\ndata retention.\n\n227\n00:09:58,970 --> 00:10:02,280\nSo they've got several, not cookie cutter,\n\n228\n00:10:02,280 --> 00:10:05,560\nrecipes, so recipes for\nhow to implement this right on the site.\n\n229\n00:10:05,560 --> 00:10:06,910\nIt's very valuable resource.\n\n230\n00:10:06,910 --> 00:10:09,250\nSo look for\nthat link underneath the episode,\n\n231\n00:10:09,250 --> 00:10:10,950\nif you're watching this recording.\n\n232\n00:10:10,950 --> 00:10:12,810\n>> Absolutely, absolutely.\n\n233\n00:10:12,810 --> 00:10:15,540\nAll right, well you want to get\nstarted with the guided tour then?\n\n234\n00:10:15,540 --> 00:10:16,875\n>> Let's go, let's see this in action.\n\n235\n00:10:16,875 --> 00:10:20,413\n>> [SOUND] Everybody please keep your arms\nand feet inside the cab at all times, and\n\n236\n00:10:20,413 --> 00:10:21,868\nto your left you're gonna see.\n\n237\n00:10:21,868 --> 00:10:24,640\n>> Well now I expect coffee service.\n\n238\n00:10:24,640 --> 00:10:26,820\n>> [LAUGH]\n>> Is there a beverage cart?\n\n239\n00:10:26,820 --> 00:10:28,630\n>> All right, let's see what we got here.\n\n240\n00:10:28,630 --> 00:10:32,780\nSo I guess first thing we gotta do,\nif we're gonna use dynamic access control,\n\n241\n00:10:32,780 --> 00:10:34,430\nthere's a couple things we need to set up.\n\n242\n00:10:34,430 --> 00:10:39,470\nOne of them is making sure that Kerberos,\nour identification protocol,\n\n243\n00:10:39,470 --> 00:10:43,000\nis configured to support\nthese new claim types.\n\n244\n00:10:43,000 --> 00:10:47,150\nOne of the underlying factors here,\nwhat's going on, you guys have studied us,\n\n245\n00:10:47,150 --> 00:10:49,910\nyou've watched our episodes,\nwe've talked about authentication.\n\n246\n00:10:49,910 --> 00:10:54,770\nWhen you log in, you send your\nauthentication credentials over to your\n\n247\n00:10:54,770 --> 00:11:00,000\nKDC or your Kerberos or your key\ndistribution center, and you authenticate.\n\n248\n00:11:00,000 --> 00:11:01,930\nAnd it's gonna give you back\nthat ticket granting ticket.\n\n249\n00:11:01,930 --> 00:11:05,320\nAnd that ticket granting ticket's gonna\nhave the SID of your user account and\n\n250\n00:11:05,320 --> 00:11:06,460\nthe groups you belong to.\n\n251\n00:11:06,460 --> 00:11:09,400\nAnd that's all that's in that token,\nwhich is why that's the only thing that we\n\n252\n00:11:09,400 --> 00:11:12,770\ncan use to authenticate,\nor to control access.\n\n253\n00:11:12,770 --> 00:11:15,590\nWhen we turn on,\nwe're going to enable claims support.\n\n254\n00:11:15,590 --> 00:11:19,200\nAnd what's going to happen is\nKerberos is now going to include\n\n255\n00:11:19,200 --> 00:11:21,990\nall these claims in your\nticket granting ticket.\n\n256\n00:11:21,990 --> 00:11:25,920\nSo now those are going to have the SID of\nyour user account, it's gonna have your,\n\n257\n00:11:25,920 --> 00:11:28,240\nany claims we choose to publish.\n\n258\n00:11:28,240 --> 00:11:29,500\nAnd I'll show you what I\nmean here in a minute.\n\n259\n00:11:29,500 --> 00:11:33,627\nSo first thing we're gonna do, is we're\ngonna go into group policy here, and\n\n260\n00:11:33,627 --> 00:11:36,703\nI'm gonna open up my,\nI'll make sure, let me go to DC 1.\n\n261\n00:11:36,703 --> 00:11:39,339\nBecause it would be really hard to get\nto group policy on that file server.\n\n262\n00:11:39,339 --> 00:11:41,127\n>> [LAUGH]\n>> So we'll go in here and\n\n263\n00:11:41,127 --> 00:11:43,645\nwe'll take a look at our group\npolicy management console.\n\n264\n00:11:46,119 --> 00:11:48,130\nDuh duh duh, that's that shy console.\n\n265\n00:11:48,130 --> 00:11:50,960\nSometimes it likes to hide\nbehind everything else there.\n\n266\n00:11:50,960 --> 00:11:53,570\nAnd I'm just gonna modify, for\nthis one I am gonna modify the default,\n\n267\n00:11:53,570 --> 00:11:58,910\nthe main policy, could really do\nthe domain controller's policy,\n\n268\n00:11:58,910 --> 00:12:01,190\nas well, that one would work.\n\n269\n00:12:01,190 --> 00:12:02,790\nAs long as it's scoped there.\n\n270\n00:12:02,790 --> 00:12:06,110\nSo where I'm going, I'm heading\ninto computer, and then policies.\n\n271\n00:12:06,110 --> 00:12:07,920\nAnd then where, I gotta make\nsure I get into the right place,\n\n272\n00:12:07,920 --> 00:12:11,090\nadministrative templates, and then system.\n\n273\n00:12:11,090 --> 00:12:14,370\nAnd there's a couple of settings\nwe're going to look at in here.\n\n274\n00:12:14,370 --> 00:12:16,660\nLet me make this a little bigger so\nwe can see where I'm going.\n\n275\n00:12:18,080 --> 00:12:19,690\nIt's looking awfully.\n\n276\n00:12:19,690 --> 00:12:20,510\n>> Pixelated today.\n\n277\n00:12:20,510 --> 00:12:23,010\n>> Yeah,\nI'll fix that here on our first break.\n\n278\n00:12:23,010 --> 00:12:24,870\nOr I can do it really quick, in a minute.\n\n279\n00:12:24,870 --> 00:12:26,990\nSo what we're looking for\nhere is, there's a couple things.\n\n280\n00:12:26,990 --> 00:12:29,660\nOne is KDC, so my key distribution center.\n\n281\n00:12:29,660 --> 00:12:33,926\nAnd here's a setting, KDC support,\nKDC support for claims, compound and\n\n282\n00:12:33,926 --> 00:12:36,630\nauthenication, and Kerberos Armory.\n\n283\n00:12:36,630 --> 00:12:39,390\nAnd it's just a matter of coming in here,\nand then turning it on.\n\n284\n00:12:39,390 --> 00:12:41,550\nAnd then I've got a choice.\n\n285\n00:12:41,550 --> 00:12:45,670\nI can do supported, not supported,\nalways provide, or fail.\n\n286\n00:12:45,670 --> 00:12:48,080\nAnd I'm gonna do always provide claims.\n\n287\n00:12:48,080 --> 00:12:52,330\nIt depends on your domain controller,\nwhat level he's at.\n\n288\n00:12:52,330 --> 00:12:56,870\nPrior to 2008 I don't think they\nsupport the Kerberos armoring.\n\n289\n00:12:56,870 --> 00:12:59,430\nI am going to tell it to always provide,\nthat all our main controllers are current.\n\n290\n00:12:59,430 --> 00:13:01,010\nSo we're going to click okay on that one.\n\n291\n00:13:01,010 --> 00:13:03,810\n>> And you know a lot of features\nwe were talking about were actually\n\n292\n00:13:03,810 --> 00:13:05,230\nintroduced in Windows server 2008.\n\n293\n00:13:05,230 --> 00:13:06,940\nAnd, Mike,\ndid you ever use this under 2008?\n\n294\n00:13:06,940 --> 00:13:07,680\n>> I did not.\n\n295\n00:13:07,680 --> 00:13:09,290\n>> It was a nightmare.\n\n296\n00:13:09,290 --> 00:13:12,670\nIn typical Microsoft fashion, they didn't\nreally give you the GUI for a lot of it.\n\n297\n00:13:12,670 --> 00:13:16,660\nAnd so a lot of it was done from the\nPowerShell and, and it was really complex.\n\n298\n00:13:16,660 --> 00:13:18,200\nSo we're gonna see it's not that bad.\n\n299\n00:13:18,200 --> 00:13:21,000\nIt's a lot of steps, but\nit's a lot easier to configure now.\n\n300\n00:13:21,000 --> 00:13:23,980\nSo you'll see the warnings in\nthere as you're configuring it.\n\n301\n00:13:23,980 --> 00:13:28,120\nIt'll say like not supported\non OS's below 2008, and so on.\n\n302\n00:13:28,120 --> 00:13:28,960\n>> And I take that back.\n\n303\n00:13:28,960 --> 00:13:30,990\nI did play around with some of\nthat because I remember having to\n\n304\n00:13:30,990 --> 00:13:34,170\nset the access denied assistance\nmessage from Power Shell.\n\n305\n00:13:34,170 --> 00:13:35,780\n>> Yeah, that's a good time.\n\n306\n00:13:35,780 --> 00:13:40,120\n>> And yeah, same thing here, I'm gonna\ncome into my Kerberos and this is Kerberos\n\n307\n00:13:40,120 --> 00:13:43,530\nclient support for claims, compound\nauthentication, and Kerberos armory.\n\n308\n00:13:43,530 --> 00:13:48,390\nAnd this is gonna allow the client\nmachines to request claims,\n\n309\n00:13:48,390 --> 00:13:52,540\nas well So it should be good to go, there.\n\n310\n00:13:52,540 --> 00:13:54,910\nSo those are the two things\nwe're gonna start with.\n\n311\n00:13:54,910 --> 00:13:57,310\nAgain, that's gonna give\nus the support we need,\n\n312\n00:13:57,310 --> 00:14:01,050\nas far as the purpose authentication\nprotocol goes, to support claims.\n\n313\n00:14:01,050 --> 00:14:05,450\nSo we'll go ahead and close that one, and\nwe'll get out of there, and, as always,\n\n314\n00:14:05,450 --> 00:14:08,140\nwe make that change to group policy.\n\n315\n00:14:08,140 --> 00:14:12,510\nWe could wait our 90 minutes,\nwe could reboot the computer since it was\n\n316\n00:14:12,510 --> 00:14:15,410\na computer setting, or\nwe can force it to go right now.\n\n317\n00:14:17,420 --> 00:14:22,060\nI still use the old command line command,\neven though I'm in Power Shell.\n\n318\n00:14:22,060 --> 00:14:24,955\n>> Yeah, well, you know, that's kind of\na good for people to get their feet wet.\n\n319\n00:14:24,955 --> 00:14:28,385\nA lot of people still go to the command\nline where you can't use Power Shell.\n\n320\n00:14:28,385 --> 00:14:33,535\nIf you just go to the Power Shell all\nthe time, you start to get used to-\n\n321\n00:14:33,535 --> 00:14:34,785\n>> There's a few of you guys out there,\n\n322\n00:14:34,785 --> 00:14:38,445\nthat the invoke gp update, is the actual\nPower Shell command, it's the same thing.\n\n323\n00:14:39,675 --> 00:14:42,525\nAlright, so we updated our policy.\n\n324\n00:14:42,525 --> 00:14:44,995\nNext thing we're gonna do,\nis we're gonna go take a look at...\n\n325\n00:14:48,080 --> 00:14:49,370\nWhat are we gonna do?\nWe're gonna take a good look at\n\n326\n00:14:49,370 --> 00:14:50,110\nthe claims, next.\n\n327\n00:14:50,110 --> 00:14:51,285\nI guess would be a good place to start.\n\n328\n00:14:51,285 --> 00:14:52,220\n>> Mm-hm.\n>> So for this,\n\n329\n00:14:52,220 --> 00:14:55,970\nwe're gonna actually work in the active\ndirectory administrative center.\n\n330\n00:14:55,970 --> 00:14:56,940\nAll right?\n\n331\n00:14:56,940 --> 00:15:00,290\nNew conole, we've talked about that\nin a couple other episodes, but\n\n332\n00:15:00,290 --> 00:15:03,820\nyou, I still fall back to active\ndirectory use as the computers if I can,\n\n333\n00:15:03,820 --> 00:15:06,073\nthere's some things you can't do there.\n\n334\n00:15:06,073 --> 00:15:08,890\nThis is, it's good.\n\n335\n00:15:08,890 --> 00:15:10,380\nYou learn to navigate around,\n\n336\n00:15:10,380 --> 00:15:13,248\nand then it's all Power Shell based,\nand unfortunately,\n\n337\n00:15:13,248 --> 00:15:17,450\nI always tell people it's probably gonna\nreplace users' computers completely.\n\n338\n00:15:17,450 --> 00:15:18,060\n>> It will.\nYeah,\n\n339\n00:15:18,060 --> 00:15:22,250\nMicrosoft wants you to us the Active\nDirectory Administration Center.\n\n340\n00:15:22,250 --> 00:15:24,840\nThey haven't implemented all the features\nyet, but with each version of Windows,\n\n341\n00:15:24,840 --> 00:15:25,370\nthey put more and\n\n342\n00:15:25,370 --> 00:15:28,360\nmore in there, and eventually\nit will phase out the old tools.\n\n343\n00:15:28,360 --> 00:15:33,140\nThe old tools are still making\nAPI calls and RPC calls,\n\n344\n00:15:33,140 --> 00:15:35,610\nand stuff, directly into active directory.\n\n345\n00:15:35,610 --> 00:15:37,310\nIt does a little bit of LDAP and all,\n\n346\n00:15:37,310 --> 00:15:39,924\nversus the active directory\nadministration center,\n\n347\n00:15:39,924 --> 00:15:43,750\nwhich is doing all Powe rShell commands,\nwhich then interact with the system.\n\n348\n00:15:43,750 --> 00:15:47,850\nSo that's what Microsoft wants\ngoing forward, all PowerShell.\n\n349\n00:15:47,850 --> 00:15:49,417\nSo they are gonna push you this way.\n\n350\n00:15:49,417 --> 00:15:51,900\n>> And in the end,\nit's nice if you're learning Power Shell.\n\n351\n00:15:51,900 --> 00:15:53,472\nSo, anything you do in here, as Don said,\n\n352\n00:15:53,472 --> 00:15:56,167\nis actually getting converted into\na power shell command and executed.\n\n353\n00:15:56,167 --> 00:15:59,290\nAnd you can always come down here and\nlook at your power shell history.\n\n354\n00:15:59,290 --> 00:16:02,740\nSo you can see what the computer did in\nthe background, so you can start learning\n\n355\n00:16:02,740 --> 00:16:06,780\nthe commands, or copy it out and script\nit if it's something you do all the time.\n\n356\n00:16:06,780 --> 00:16:08,250\nAlright, now I changed\nit to the tree view,\n\n357\n00:16:08,250 --> 00:16:10,560\njust because I find it a little\nbit easier to navigate.\n\n358\n00:16:10,560 --> 00:16:14,910\nWith the other view, it's like it\nremembers what you clicked on last time,\n\n359\n00:16:14,910 --> 00:16:17,300\nso if I click on say, claim types,\n\n360\n00:16:17,300 --> 00:16:22,520\nin a second you'll see it pop up over\nhere like a favorites type thing.\n\n361\n00:16:22,520 --> 00:16:24,722\nBut if you change to Tree view and\nthere it goes.\n\n362\n00:16:24,722 --> 00:16:26,352\nSo then you could always go back to that.\n\n363\n00:16:26,352 --> 00:16:28,560\nTree view shows everything\nyou need at one time.\n\n364\n00:16:28,560 --> 00:16:29,790\nAnd we're gonna start with claim time.\n\n365\n00:16:29,790 --> 00:16:33,400\nAnd so there's one claim built in there,\nit's authentication silo.\n\n366\n00:16:33,400 --> 00:16:34,880\nWe don't use that one.\n\n367\n00:16:34,880 --> 00:16:38,710\nWe're going to create our own claim\njust by doing new claim type.\n\n368\n00:16:38,710 --> 00:16:43,460\nAnd in this new claim type\nthere's a whole list of claims,\n\n369\n00:16:43,460 --> 00:16:48,040\nor what they call source attributes here,\nthat we can either use straight up as they\n\n370\n00:16:48,040 --> 00:16:53,640\nare or we can make our own based on these\nor we can create our own all together.\n\n371\n00:16:53,640 --> 00:16:57,600\nI'm just going to use a couple of\nthe pre-built ones for this demonstration.\n\n372\n00:16:57,600 --> 00:17:00,090\nI'm gonna do country, and\n\n373\n00:17:00,090 --> 00:17:03,860\nI'm gonna change that display\nname from Microsoft C to country.\n\n374\n00:17:03,860 --> 00:17:08,870\nI'm gonna say that's\ngonna be a user claim.\n\n375\n00:17:10,090 --> 00:17:14,460\nThen I can also add\nsuggested values down here.\n\n376\n00:17:14,460 --> 00:17:15,825\nSo I can add to the list.\n\n377\n00:17:15,825 --> 00:17:18,480\n[COUGH] We'll do a little say US.\n\n378\n00:17:21,900 --> 00:17:26,980\nAnd give it a display name and a value.\n\n379\n00:17:26,980 --> 00:17:31,690\nAnd I'll add one more, JP.\n\n380\n00:17:36,610 --> 00:17:40,314\nGuess for the display name I could fill\nit out all the way but too much typing.\n\n381\n00:17:40,314 --> 00:17:42,101\n[LAUGH]\n>> [LAUGH]\n\n382\n00:17:42,101 --> 00:17:43,090\n>> Lazy typer.\n\n383\n00:17:43,090 --> 00:17:45,680\n>> All right, so there I've got\nthis new claim, and I'll click OK.\n\n384\n00:17:45,680 --> 00:17:51,900\nAnd now I've got country,\nand let's do one more.\n\n385\n00:17:51,900 --> 00:17:53,815\nWe'll do another claim type.\n\n386\n00:17:53,815 --> 00:17:56,550\nAnd for\nthis one we're gonna do department.\n\n387\n00:17:59,860 --> 00:18:02,390\nAnd I always just want to\nchange that display name.\n\n388\n00:18:04,480 --> 00:18:04,980\nMake it pretty.\n\n389\n00:18:06,220 --> 00:18:07,140\nAnd we'll click okay.\n\n390\n00:18:07,140 --> 00:18:13,260\nFor that one I'm not going to use\nsuggested values on that one.\n\n391\n00:18:13,260 --> 00:18:19,280\nIt will pull the department\nattribute from Active Directory.\n\n392\n00:18:19,280 --> 00:18:22,000\nI mean I could, but\nyou can always type one in later.\n\n393\n00:18:22,000 --> 00:18:24,200\nAlright so we got a couple of\nclaims that we're gonna use.\n\n394\n00:18:24,200 --> 00:18:27,040\nAnd let's see where we're\nheaded next with that then.\n\n395\n00:18:27,040 --> 00:18:28,840\nSo we got the claims.\n\n396\n00:18:28,840 --> 00:18:30,180\nLet's do one for computer.\n\n397\n00:18:30,180 --> 00:18:33,770\nI didn't really create one I don't think\nI'm gonna use this one in here, but\n\n398\n00:18:33,770 --> 00:18:39,160\njust to show you guys, I can also\ncreate claims for computers as well and\n\n399\n00:18:39,160 --> 00:18:42,630\nI'll do like description as one of the\nattributes that a computer account has.\n\n400\n00:18:43,980 --> 00:18:48,480\nI'll take it away from user and I'll\nadd it to computer and I'll click okay.\n\n401\n00:18:48,480 --> 00:18:49,610\nBasically what we're doing here, so\n\n402\n00:18:49,610 --> 00:18:52,890\nwe understand what these are,\nclaims are going to be included.\n\n403\n00:18:52,890 --> 00:18:57,750\nThink of a claim as a statement about\nan identity is really all it is.\n\n404\n00:18:57,750 --> 00:19:00,700\nSo I can pull any one of those\nattributes from Active Directory and\n\n405\n00:19:00,700 --> 00:19:04,810\nwhen you authenticate in your token\nI'm going to put not only your SID but\n\n406\n00:19:04,810 --> 00:19:07,300\nthe fact that you are in\nthe research department\n\n407\n00:19:07,300 --> 00:19:10,340\nwhich also means you gotta\nfill this information out.\n\n408\n00:19:10,340 --> 00:19:12,240\nRight?\nIn Active Directory how many of us\n\n409\n00:19:12,240 --> 00:19:16,560\nlazy admins are out there and never fill\nin the department and the manager and\n\n410\n00:19:16,560 --> 00:19:18,460\nthe city and the state and\nthings like that?\n\n411\n00:19:18,460 --> 00:19:19,010\nIf you don't do that,\n\n412\n00:19:19,010 --> 00:19:25,590\nyou can't very well use this\ninformation to do your access control.\n\n413\n00:19:25,590 --> 00:19:28,250\n>> Yeah and the other thing to\nremember here is it's stored in\n\n414\n00:19:28,250 --> 00:19:29,370\nthe Active Directory.\n\n415\n00:19:29,370 --> 00:19:32,410\nWhen somebody logs in and their ticket\ngranting ticket is generated, right,\n\n416\n00:19:32,410 --> 00:19:36,090\ntheir authentication token is generated,\nthis stuff is put in that token.\n\n417\n00:19:36,090 --> 00:19:38,570\nSo it's not like we have to query the\nActive Directory every time they access\n\n418\n00:19:38,570 --> 00:19:39,510\nsomething to figure it out.\n\n419\n00:19:39,510 --> 00:19:40,870\nIt's already there.\n\n420\n00:19:40,870 --> 00:19:44,170\nSo when Dynamic Access Control is looking\nat their claim to find out whether or\n\n421\n00:19:44,170 --> 00:19:46,920\nnot they should have access,\nit just has to look in the TGT and\n\n422\n00:19:46,920 --> 00:19:52,380\nas long as it's a valid ticket, then it's\nhappy with that and they can run with it.\n\n423\n00:19:52,380 --> 00:19:54,990\nAnd it'll know that they're\nin the sales department or\n\n424\n00:19:54,990 --> 00:19:56,645\nthat they're in Japan or whatever.\n\n425\n00:19:56,645 --> 00:19:58,230\n>> Exactly.\n>> It's right there in the token.\n\n426\n00:19:58,230 --> 00:19:59,410\n>> Perfect.\n\n427\n00:19:59,410 --> 00:20:02,060\nAlright so now we've got our claim,\nso we've got that set up.\n\n428\n00:20:02,060 --> 00:20:03,190\nAnd really you just stop and\n\n429\n00:20:03,190 --> 00:20:06,020\nthink about what are the things that\nI want to use to control access?\n\n430\n00:20:06,020 --> 00:20:07,080\nDo I want to use department?\n\n431\n00:20:07,080 --> 00:20:08,100\nDo I want to use country?\n\n432\n00:20:08,100 --> 00:20:09,390\nThings like that.\n\n433\n00:20:09,390 --> 00:20:11,160\n>> Then we're create\nsome resource properties.\n\n434\n00:20:11,160 --> 00:20:14,290\nNow resource properties are gonna\nbe assigned to the resource itself,\n\n435\n00:20:14,290 --> 00:20:18,320\nlike the file or the folder that we're\ncontrolling access to, and as you can see,\n\n436\n00:20:18,320 --> 00:20:20,500\nthere are several in\nhere that are prebuilt.\n\n437\n00:20:20,500 --> 00:20:22,630\nBy default they are all disabled.\n\n438\n00:20:22,630 --> 00:20:25,560\nSo you can come in here enable them or\nI can create new ones.\n\n439\n00:20:25,560 --> 00:20:30,940\nAnd so I'm gonna grab the, let's do\nthe same, we're gonna do department.\n\n440\n00:20:30,940 --> 00:20:32,859\nI'm just gonna right click and\nchoose enabled.\n\n441\n00:20:33,910 --> 00:20:40,140\nAnd I'm also going to do,\nwhat else do we want to do here?\n\n442\n00:20:40,140 --> 00:20:44,540\nThere's no country, so I'm gonna go ahead\nand add a resource property for country.\n\n443\n00:20:44,540 --> 00:20:48,580\nSo I don't like the ones I've got or I\ncan't find one that I wanna use, so I can\n\n444\n00:20:48,580 --> 00:20:54,900\ngo New > Resource Property and just fill\nin the information, I'll call it country.\n\n445\n00:20:57,000 --> 00:21:00,780\nAnd it's going to be a single value and\nI'll put some suggested values down here.\n\n446\n00:21:00,780 --> 00:21:04,070\nI'll put same thing [INAUDIBLE] US.\n\n447\n00:21:12,280 --> 00:21:16,530\nAnd we'll do a little of Japan.\n\n448\n00:21:16,530 --> 00:21:17,730\nI always wanted to go to Japan so.\n\n449\n00:21:20,730 --> 00:21:22,030\nWill that go in.\n\n450\n00:21:23,820 --> 00:21:26,280\nOh, I got a filter going on here I think.\n\n451\n00:21:26,280 --> 00:21:26,780\nThere it is.\n\n452\n00:21:28,290 --> 00:21:29,540\nI dont' know why I was typing\nit in the filter earlier.\n\n453\n00:21:29,540 --> 00:21:31,050\nAll right, so same thing.\n\n454\n00:21:31,050 --> 00:21:34,790\nSo we're creating a resource\nproperty called country.\n\n455\n00:21:34,790 --> 00:21:36,990\nAnd so when you create one,\nit's gonna be enabled,\n\n456\n00:21:36,990 --> 00:21:38,870\nyou can see the icon's a little different.\n\n457\n00:21:38,870 --> 00:21:40,690\nSo now I've got my resource properties.\n\n458\n00:21:40,690 --> 00:21:44,390\nThese are gonna be things that I can\nassign to the resource itself, and\n\n459\n00:21:44,390 --> 00:21:45,840\nthen you're gonna see\nwhere the power comes in.\n\n460\n00:21:45,840 --> 00:21:49,230\nWhere we can start matching these,\nand looking for matches.\n\n461\n00:21:49,230 --> 00:21:56,030\nSo the next thing I need to do is I\nneed to create a resource property list.\n\n462\n00:21:56,030 --> 00:21:58,642\nWhen we go to resource property list,\nthere's one in there already.\n\n463\n00:21:58,642 --> 00:22:02,160\nThere's the global resource properties\nlist and I can just use this.\n\n464\n00:22:02,160 --> 00:22:06,720\nThe global resource property list\nis downloaded by all servers\n\n465\n00:22:06,720 --> 00:22:08,160\nthat this policy applies to, or\n\n466\n00:22:08,160 --> 00:22:11,220\nall your different servers will download\nthe global resource property list.\n\n467\n00:22:11,220 --> 00:22:16,200\nYou can however, make your own policy,\nor resource property lists for\n\n468\n00:22:16,200 --> 00:22:17,040\nspecific servers.\n\n469\n00:22:17,040 --> 00:22:19,310\nSo if I have a group of\nservers in one location,\n\n470\n00:22:19,310 --> 00:22:22,850\nI wanna use these properties, I can\ncreate a separate resource property list.\n\n471\n00:22:22,850 --> 00:22:25,480\nAnd then those properties wouldn't\nbe available to servers in\n\n472\n00:22:25,480 --> 00:22:26,240\ndifferent locations.\n\n473\n00:22:26,240 --> 00:22:29,880\nSo you might have something that\nis specific to that location, and\n\n474\n00:22:29,880 --> 00:22:31,310\nyou don't want the other ones to use.\n\n475\n00:22:31,310 --> 00:22:33,670\nWe could just use the global\nresource property list.\n\n476\n00:22:33,670 --> 00:22:36,390\nBut, for example,\nwe'll go ahead and make one.\n\n477\n00:22:36,390 --> 00:22:37,530\nYeah.\n>> And have some fun with it.\n\n478\n00:22:37,530 --> 00:22:40,990\n>> I think most people will use\nthe global resource property list.\n\n479\n00:22:40,990 --> 00:22:45,300\nWhere you want to move away from it is\nwhen you have like a lot of properties and\n\n480\n00:22:45,300 --> 00:22:46,830\nyou're trying to optimize performance.\n\n481\n00:22:46,830 --> 00:22:50,610\nBecause it does have to look at the stuff\nevery time someone accesses the data.\n\n482\n00:22:50,610 --> 00:22:51,290\n>> It's a good long list.\n\n483\n00:22:51,290 --> 00:22:56,000\n>> The less ones that you're pulling from\nthe more optimized that's going to be.\n\n484\n00:22:56,000 --> 00:22:58,145\nNow, if you're just setting\nup a classification service,\n\n485\n00:22:58,145 --> 00:23:01,290\ntop-secret, secret, whatever,\nthen it's not that big of a deal to have\n\n486\n00:23:01,290 --> 00:23:04,525\nthat across all of your systems, but\nif you you've got 50 different attributes\n\n487\n00:23:04,525 --> 00:23:07,055\nthat you're pulling from,\nit can create a bit of a burden.\n\n488\n00:23:07,055 --> 00:23:08,925\nSo you can create different lists for\ndifferent servers so\n\n489\n00:23:08,925 --> 00:23:11,945\nthat only the servers that need to do\nwith it are actually dealing with it.\n\n490\n00:23:11,945 --> 00:23:13,145\n>> Exactly.\n\n491\n00:23:13,145 --> 00:23:14,025\nSo I just, as you saw,\n\n492\n00:23:14,025 --> 00:23:17,865\nI just right-clicked New resource\nproperty list, and I'll call it my,\n\n493\n00:23:17,865 --> 00:23:21,525\nI don't know, file server,\nwe'll say branch servers or something.\n\n494\n00:23:26,860 --> 00:23:30,153\nAnd then we're going to add the properties\nthat I'm going to plan on using and\n\n495\n00:23:30,153 --> 00:23:33,820\nthat's going to be Company,\nactually I didn't use Company.\n\n496\n00:23:33,820 --> 00:23:38,484\nLet's do Country and Apartment.\n\n497\n00:23:38,484 --> 00:23:43,750\nI'll take Company out of there.\n\n498\n00:23:43,750 --> 00:23:44,960\nAnd that should be it.\n\n499\n00:23:44,960 --> 00:23:45,730\nSo we'll click okay.\n\n500\n00:23:45,730 --> 00:23:49,167\nAnd then we'll click okay.\n\n501\n00:23:49,167 --> 00:23:50,084\n>> Yeah, so much,\n\n502\n00:23:50,084 --> 00:23:54,220\nmuch smaller list than that default one\nwhich had quite a few entries in it.\n\n503\n00:23:54,220 --> 00:23:55,251\n>> Exactly.\n\n504\n00:23:55,251 --> 00:23:58,143\nNow I need to get that out\nTo the servers themselves,\n\n505\n00:23:58,143 --> 00:24:02,746\nas I said the global they already have, so\ntechnically all those properties I set up\n\n506\n00:24:02,746 --> 00:24:06,370\nare already on that global list,\nso it already has access to it.\n\n507\n00:24:06,370 --> 00:24:09,160\nBut we can use a group policy, which for\n\n508\n00:24:09,160 --> 00:24:14,240\nsome reason I closed, to deploy that\nlist out to the different servers.\n\n509\n00:24:14,240 --> 00:24:16,160\nSo I am gonna open up\nGroup Policy Management.\n\n510\n00:24:17,710 --> 00:24:20,970\nAnd I made an OU and let me make\nsure that that server is in there.\n\n511\n00:24:20,970 --> 00:24:22,780\nI should check that.\n\n512\n00:24:22,780 --> 00:24:24,270\nI'll double check in a minute.\n\n513\n00:24:24,270 --> 00:24:25,990\nI'm just going to create a GPO and\nlink it here.\n\n514\n00:24:27,520 --> 00:24:32,910\nAnd I'll call it the DAC Policy for\ndynamic access control.\n\n515\n00:24:34,350 --> 00:24:39,790\nAnd I'll go back in and edit that\npolicy and the setting I'm looking for\n\n516\n00:24:39,790 --> 00:24:45,443\nis actually going to be under Policies\n> Administrative Templates > System.\n\n517\n00:24:48,480 --> 00:24:54,800\nAnd then, double check that,\nFile Classification Infrastructure.\n\n518\n00:24:54,800 --> 00:24:57,890\nAnd I've got two settings here,\nfirst one is for\n\n519\n00:24:57,890 --> 00:25:02,020\nmy file classification,\nspecifying classification property list.\n\n520\n00:25:02,020 --> 00:25:08,932\nSo once I enable this and I specify\nthat last that I forgot what I named it.\n\n521\n00:25:08,932 --> 00:25:12,181\n>> [LAUGH]\n>> Let's go back over there and\n\n522\n00:25:12,181 --> 00:25:14,632\njust double check that\nbranch file servers.\n\n523\n00:25:14,632 --> 00:25:16,315\n[CROSSTALK] What a crazy name,\nwho would do that?\n\n524\n00:25:20,030 --> 00:25:27,145\nSo I'm going to specify here,\nbranch file servers, and I'll click OK.\n\n525\n00:25:28,370 --> 00:25:31,270\nSo now that I've told it and I've\nlinked it to that OU where that server\n\n526\n00:25:31,270 --> 00:25:33,550\naccount is,\nit'll no longer get the global.\n\n527\n00:25:33,550 --> 00:25:38,380\nIt'll get just that one, and\nthen I also wanna turn on\n\n528\n00:25:38,380 --> 00:25:42,450\nmy display classification tab in\nfile explorer, which lets us do\n\n529\n00:25:42,450 --> 00:25:46,200\nthat manual classification that we saw\nyesterday, or in our other episode.\n\n530\n00:25:48,540 --> 00:25:49,990\nAll right.\nNow, I can close that.\n\n531\n00:25:49,990 --> 00:25:50,670\nAnd I'll have to go and\n\n532\n00:25:50,670 --> 00:25:53,090\nupdate group policy on that\nfile server here in a second.\n\n533\n00:25:54,160 --> 00:25:55,400\nIn fact, let's go ahead and do it now.\n\n534\n00:25:55,400 --> 00:25:59,509\nLet's switch over and see what kind of\ngood things we've got going on here.\n\n535\n00:25:59,509 --> 00:26:03,423\n>> Yeah, so, with any GPO,\nwhen you put it in place,\n\n536\n00:26:03,423 --> 00:26:06,510\nit does take a little time to apply.\n\n537\n00:26:06,510 --> 00:26:09,610\nRemember that member servers and\nworkstations refresh their policy when\n\n538\n00:26:09,610 --> 00:26:12,830\nthey reboot and\nevery 90 minutes when they are booted.\n\n539\n00:26:12,830 --> 00:26:15,400\nIt can take up to an hour and\na half to take effect.\n\n540\n00:26:15,400 --> 00:26:17,480\nA domain control is refreshing\nevery five minutes,\n\n541\n00:26:17,480 --> 00:26:20,050\nmuch, much faster on that because\nthe policies are kind of local.\n\n542\n00:26:20,050 --> 00:26:23,320\nSo, we can either force it along or\nwe can wait.\n\n543\n00:26:23,320 --> 00:26:25,410\nAnd actually, Mike,\nthis might be a pretty spot for\n\n544\n00:26:25,410 --> 00:26:26,930\nus to stop and take a break, right Or.\n\n545\n00:26:26,930 --> 00:26:28,910\n>> I'll tell you what,\nlet's do one more thing.\n\n546\n00:26:28,910 --> 00:26:29,951\nLet's just take a peek.\n\n547\n00:26:29,951 --> 00:26:33,002\nOnce this finishes here I'll show you,\nwe'll make sure that list and\n\n548\n00:26:33,002 --> 00:26:34,760\nthen we'll take our break.\n\n549\n00:26:34,760 --> 00:26:40,153\nSo if I go back into, I think I set\nup some folders ahead of Corp data,\n\n550\n00:26:40,153 --> 00:26:43,290\nand then if I go into, say, Research.\n\n551\n00:26:43,290 --> 00:26:45,530\nI'm gonna do it, I think I'll\ndo it at the folder level today.\n\n552\n00:26:45,530 --> 00:26:48,375\nYou could do this at the file level,\nyou can do it at the folder level.\n\n553\n00:26:48,375 --> 00:26:50,919\nIt would make a lot more sense to do it\nat the folder level cuz you're gonna have\n\n554\n00:26:50,919 --> 00:26:51,869\nlots of resources in there.\n\n555\n00:26:51,869 --> 00:26:56,652\nAnd so, although I don't see my\nclassification tab for that.\n\n556\n00:27:01,655 --> 00:27:03,176\nHm.\n\n557\n00:27:03,176 --> 00:27:05,722\n>> Policy isn't-\n>> Yeah, I don't think it's kicked in yet,\n\n558\n00:27:05,722 --> 00:27:06,427\nso we'll do that.\n\n559\n00:27:06,427 --> 00:27:08,389\nWe'll go ahead and take a break-\n>> [LAUGH]\n\n560\n00:27:08,389 --> 00:27:10,117\n>> And give it a second to catch up\n\n561\n00:27:10,117 --> 00:27:10,676\nwith me.\n\n562\n00:27:10,676 --> 00:27:13,056\nAnd we'll come back and\nshow you some more of that.\n\n563\n00:27:13,056 --> 00:27:14,368\n>> Yeah.\nI know we've made that joke before.\n\n564\n00:27:14,368 --> 00:27:15,773\nPatience is not our strong suite.\n\n565\n00:27:15,773 --> 00:27:17,050\n[CROSSTALK] I know, right.\n\n566\n00:27:17,050 --> 00:27:18,308\n>> But sometimes with these changes,\nyou've got to make them,\n\n567\n00:27:18,308 --> 00:27:19,848\nthen you just got to sit back for a minute\nand give it a chance to take effect.\n\n568\n00:27:19,848 --> 00:27:21,148\n>> Yep.\n\n569\n00:27:21,148 --> 00:27:22,575\nRight.\n\n570\n00:27:22,575 --> 00:27:23,208\n>> So.\nSo we'll give this just\n\n571\n00:27:23,208 --> 00:27:23,714\na minute, we'll take a break, stay tuned.\n\n572\n00:27:23,714 --> 00:27:26,663\nWhen we get back, we've kind of set\nthe groundwork for it, but now we actually\n\n573\n00:27:26,663 --> 00:27:29,676\nneed to implement it, we need to set up\nthe restrictions and see that they work.\n\n574\n00:27:29,676 --> 00:27:31,894\nSo stay tuned, we'll be back after this.\n\n575\n00:27:31,894 --> 00:27:40,020\n[MUSIC]\n\n576\n00:27:40,020 --> 00:27:40,900\nAll right, welcome back everybody.\n\n577\n00:27:40,900 --> 00:27:43,220\nSo we've given our active directory and\n\n578\n00:27:43,220 --> 00:27:47,470\nour group policy a few moments to settle\nin, and now we're ready to move forward.\n\n579\n00:27:47,470 --> 00:27:48,590\nWe've got a, what are we doing next?\n\n580\n00:27:48,590 --> 00:27:49,480\nCentral access?\n\n581\n00:27:49,480 --> 00:27:51,630\n>> We're going to create some,\nyeah, some central access rules and\n\n582\n00:27:51,630 --> 00:27:52,990\nsome central access policies so\n\n583\n00:27:52,990 --> 00:27:55,850\nwe can implement those resource lists\nout there on those file servers.\n\n584\n00:27:56,900 --> 00:27:59,980\n>> So for\nthat we are going to go back into\n\n585\n00:27:59,980 --> 00:28:02,327\nour active directory\nadministrative center.\n\n586\n00:28:06,170 --> 00:28:06,796\nEventually.\n\n587\n00:28:06,796 --> 00:28:10,220\n[LAUGH] I have no patience.\n\n588\n00:28:10,220 --> 00:28:11,960\nAll right, and let's take a look at,\n\n589\n00:28:11,960 --> 00:28:16,120\nI'm gonna change that back to our treeview\nthere, and under dynamic access control,\n\n590\n00:28:16,120 --> 00:28:20,280\nwe're gonna have central access rules and\nthen central access policies.\n\n591\n00:28:20,280 --> 00:28:24,605\nAnd the rules are what we're gonna use\nto decide what we're trying to do,\n\n592\n00:28:24,605 --> 00:28:27,985\nwhat we're trying to control or\nhow we want to control access.\n\n593\n00:28:27,985 --> 00:28:29,605\nSo we'll start by creating a new rule.\n\n594\n00:28:31,755 --> 00:28:40,030\nAnd I'll give it a name, I'm just gonna\ncall it something like Department Match.\n\n595\n00:28:40,030 --> 00:28:40,726\nAll right.\n\n596\n00:28:40,726 --> 00:28:45,630\nAnd then for my target resource I'm\nactually gonna go in here and edit this.\n\n597\n00:28:45,630 --> 00:28:48,690\nYou could apply it to everything, but\n\n598\n00:28:48,690 --> 00:28:53,530\ngood practice here is just\nto say resource department.\n\n599\n00:28:53,530 --> 00:28:58,370\nYou can see our two, after our resource\nproperties that we created earlier.\n\n600\n00:28:58,370 --> 00:29:00,840\nAnd I wanna make sure that it exists.\n\n601\n00:29:00,840 --> 00:29:06,150\nAnd the reason I'm doing this is if\nthe resource itself doesn't have\n\n602\n00:29:06,150 --> 00:29:10,120\nthe property configured on it,\nI might not wanna block access to it.\n\n603\n00:29:10,120 --> 00:29:14,105\nSo it's kind of what you want to, you got\nto decide what you're going to do, but\n\n604\n00:29:14,105 --> 00:29:17,625\nyou do have to be careful if you think\nabout all the other system files and\n\n605\n00:29:17,625 --> 00:29:19,885\nthings like that,\nthat might not have these properties and\n\n606\n00:29:19,885 --> 00:29:22,535\nmight end up blocking access to somebody.\n\n607\n00:29:22,535 --> 00:29:26,860\nSo this is just checking to see if\nthe resource has a department or and\n\n608\n00:29:26,860 --> 00:29:29,310\na company, I mean a country attribute.\n\n609\n00:29:29,310 --> 00:29:33,590\n>> And we're talking about the file or\nthe folder here, not the user account.\n\n610\n00:29:33,590 --> 00:29:36,455\nSo, if the file or folder doesn't\nhave a department configured on it,\n\n611\n00:29:36,455 --> 00:29:37,861\nthen anybody can still access it.\n\n612\n00:29:37,861 --> 00:29:40,345\n>> Yep, using your normal\nNTFS permissions control,\n\n613\n00:29:40,345 --> 00:29:42,720\nwe're just not gonna do\ndynamic access control.\n\n614\n00:29:42,720 --> 00:29:44,430\n>> But if a user doesn't a department,\n\n615\n00:29:44,430 --> 00:29:46,400\nthey won't be able to access\na file that has a set?\n\n616\n00:29:46,400 --> 00:29:47,420\n>> Correct, correct.\n\n617\n00:29:47,420 --> 00:29:48,200\nYep.\n\n618\n00:29:48,200 --> 00:29:50,350\nAll right, and then we're gonna\ncome down to our permissions.\n\n619\n00:29:50,350 --> 00:29:53,220\nAnd important when you're first setting\nthis up is you pay attention to the radio\n\n620\n00:29:53,220 --> 00:29:54,170\nbuttons here.\n\n621\n00:29:54,170 --> 00:29:56,600\nOne of them says use the following\npermissions as proposed permissions, and\n\n622\n00:29:56,600 --> 00:29:58,430\nnotice that's the default.\n\n623\n00:29:58,430 --> 00:30:03,093\nI wanna select, cuz I wanna go ahead and\nset my permissions,\n\n624\n00:30:03,093 --> 00:30:08,592\nI'm gonna say use the following\npermissions as current permissions.\n\n625\n00:30:08,592 --> 00:30:10,050\nAnd then I'm gonna click edit and\nthen I'm gonna click add.\n\n626\n00:30:10,050 --> 00:30:12,740\nThis is where it gets fun so what were\ngoing to do is we're going to come up here\n\n627\n00:30:12,740 --> 00:30:15,800\nand the first thing I did was\njust click select a principal.\n\n628\n00:30:15,800 --> 00:30:19,250\nIt's kinda like your normal NTSF,\nyou're deciding you gotta add the ace and\n\n629\n00:30:19,250 --> 00:30:23,110\nthe access control entry and I'm actually\ngoing to do authenticated users.\n\n630\n00:30:23,110 --> 00:30:26,070\nYou want to say authenticated users and\n\n631\n00:30:26,070 --> 00:30:30,140\nI'm going to allow full control, and\nyou might think, well, that's odd.\n\n632\n00:30:30,140 --> 00:30:30,640\n>> That's everybody.\n>> Yeah, that's everybody.\n\n633\n00:30:30,640 --> 00:30:32,520\nHow is that controlling access?\n\n634\n00:30:32,520 --> 00:30:34,854\nBecause now we come down here add\n\n635\n00:30:34,854 --> 00:30:38,638\na condition to limit the access.\nSo this is where it gets fun.\n\n636\n00:30:38,638 --> 00:30:39,856\nWe are going to come in and\n\n637\n00:30:39,856 --> 00:30:43,394\nsay add a condition and what I'm going\nto do is I'm going to say something\n\n638\n00:30:43,394 --> 00:30:48,170\nlike which one was this one department.\nSo I'm going to\n\n639\n00:30:48,170 --> 00:30:52,693\nsay resource department\n\n640\n00:30:52,693 --> 00:30:57,646\nequals user department and\n\n641\n00:30:57,646 --> 00:31:03,029\nI want the resource country to\n\n642\n00:31:03,029 --> 00:31:08,895\nequal the user country.\nSo you're saying that\n\n643\n00:31:08,895 --> 00:31:13,777\nauthenticated users have full control,\nbut only if their department attribute on\n\n644\n00:31:13,777 --> 00:31:18,309\nyour user account matches the departure\nattribute on the resource itself and\n\n645\n00:31:18,309 --> 00:31:23,417\nthe user's country attribute matches the\nresource attribute or country attribute.\n\n646\n00:31:23,417 --> 00:31:24,579\nAnd\n\n647\n00:31:24,579 --> 00:31:30,582\nif I can get to my.\n>> Oh,\n\n648\n00:31:30,582 --> 00:31:32,319\nit's off the bottom of the screen.\n>> Here we go.\n\n649\n00:31:32,319 --> 00:31:33,222\n>> Yeah, if I maximize maybe we can\n\n650\n00:31:33,222 --> 00:31:33,811\nget there.\nHere we go.\n\n651\n00:31:33,811 --> 00:31:36,090\nAnd we'll click OK.\n\n652\n00:31:36,090 --> 00:31:37,950\nAnd then we'll click OK.\n\n653\n00:31:37,950 --> 00:31:40,200\nAnd then that's my rule,\nand we'll click OK.\n\n654\n00:31:40,200 --> 00:31:43,875\nAnd so\nnow I have my first rule department match.\n\n655\n00:31:43,875 --> 00:31:47,115\nAnd then we could do another one,\nwe could say,\n\n656\n00:31:47,115 --> 00:31:50,900\nactually that's probably good for\nthat, I think.\n\n657\n00:31:50,900 --> 00:31:54,173\n>> Yeah, cuz you did department and\ncountry, so that's cool And\n\n658\n00:31:54,173 --> 00:31:55,917\nyou can set up individual rules.\n\n659\n00:31:55,917 --> 00:31:57,603\nYou can have several rules, but\n\n660\n00:31:57,603 --> 00:32:00,610\nthe rule is just sitting there\nuntil you create a policy.\n\n661\n00:32:00,610 --> 00:32:04,620\nThe policy is what we're going to end\nup deploying out to my file servers.\n\n662\n00:32:04,620 --> 00:32:09,580\nAnd so a policy allows you to group\nup a set of rules that you wanna use.\n\n663\n00:32:09,580 --> 00:32:11,260\nYou can have several policies.\n\n664\n00:32:11,260 --> 00:32:14,160\nAnd a policy can contain several rules.\n\n665\n00:32:14,160 --> 00:32:18,280\nBut when you do a policy, it is going to\nimplement all the rules that it contains.\n\n666\n00:32:18,280 --> 00:32:20,220\nSo if you had separate rules\nthat you wanted to implement,\n\n667\n00:32:20,220 --> 00:32:21,620\nthis rule on this resource, but\n\n668\n00:32:21,620 --> 00:32:25,070\na different rule on another resource,\nyou'd have to have different policies.\n\n669\n00:32:25,070 --> 00:32:26,300\nBecause when you implement that policy,\n\n670\n00:32:26,300 --> 00:32:28,390\nit's gonna implement all\nthe rules inside it.\n\n671\n00:32:28,390 --> 00:32:31,150\n>> Yeah, everything else we've done so\nfar is kinda like building blocks, right?\n\n672\n00:32:31,150 --> 00:32:33,040\nWe put all these building\nblocks together and\n\n673\n00:32:33,040 --> 00:32:36,850\nit's the policy that really ties all\nof it together and makes it work.\n\n674\n00:32:36,850 --> 00:32:38,231\n>> Yep, exactly.\nAnd I'll call this,\n\n675\n00:32:38,231 --> 00:32:40,154\nI'm gonna call it department match again.\n\n676\n00:32:45,448 --> 00:32:46,215\nIf you can spell it.\n\n677\n00:32:46,215 --> 00:32:47,120\n>> If I can spell it.\n\n678\n00:32:47,120 --> 00:32:47,689\n>> [LAUGH].\n\n679\n00:32:47,689 --> 00:32:48,653\n>> I can't spell anything today.\n\n680\n00:32:52,048 --> 00:32:57,180\nAll right, and then I choose which rules I\nwanna include in this particular policy.\n\n681\n00:32:57,180 --> 00:32:59,410\nSo I click add and\nit should show me the only one I have.\n\n682\n00:32:59,410 --> 00:33:02,050\nWe'll click OK, and okay.\n\n683\n00:33:03,270 --> 00:33:07,340\nAnd now I've got my central access\npolicy that I can then deploy out\n\n684\n00:33:07,340 --> 00:33:10,370\nto these servers,\nwhich is what we're gonna do next.\n\n685\n00:33:10,370 --> 00:33:12,438\nSo, for that,\nwe're gonna use our group policy and\n\n686\n00:33:12,438 --> 00:33:15,450\nI just have to remember what\nnode that's under there.\n\n687\n00:33:15,450 --> 00:33:18,074\nSo, we're gonna go back\ninto Server Manager and\n\n688\n00:33:18,074 --> 00:33:20,068\nTools and Group Policy Management.\n\n689\n00:33:24,001 --> 00:33:26,630\nAnd again I'm gonna use that same policy.\n\n690\n00:33:26,630 --> 00:33:29,460\nI've already got one linked\nto my file servers OU that we\n\n691\n00:33:29,460 --> 00:33:31,980\nused to deploy the resource list.\n\n692\n00:33:31,980 --> 00:33:33,350\nI'm gonna right-click and edit that one.\n\n693\n00:33:34,730 --> 00:33:42,007\nAnd this one's gonna be under Policies\n> Administrative Templates > System.\n\n694\n00:33:42,007 --> 00:33:47,465\nAnd then there's the,\nlet me find it here, it should be.\n\n695\n00:33:47,465 --> 00:33:51,820\n[INAUDIBLE] I lied to you guys.\n\n696\n00:33:51,820 --> 00:33:55,440\nI was thinking of the resource\nproperty list is under there.\n\n697\n00:33:55,440 --> 00:33:58,342\nThe central access policy is\nactually a security setting.\n\n698\n00:33:58,342 --> 00:34:02,120\nSo it's gonna be Windows settings,\nand then security settings,\n\n699\n00:34:03,830 --> 00:34:08,830\nand then under here we should\nhave have our, where is it,\n\n700\n00:34:08,830 --> 00:34:11,270\nthe file system and\nthen central access policy.\n\n701\n00:34:12,288 --> 00:34:15,870\nSo I'm gonna add a new\ncentral access policy\n\n702\n00:34:15,870 --> 00:34:17,920\nby choosing manage\ncentral access policies.\n\n703\n00:34:17,920 --> 00:34:19,180\nIt's a little different from other ones,\nright.\n\n704\n00:34:19,180 --> 00:34:20,898\n>> Huh.\n>> You usually choose Edit or\n\n705\n00:34:20,898 --> 00:34:22,460\nProperties there.\n\n706\n00:34:22,460 --> 00:34:25,440\nAnd the only one I have to choose from,\nDepartment match.\n\n707\n00:34:25,440 --> 00:34:28,438\nSo we'll add that one and\nwe'll click Okay.\n\n708\n00:34:28,438 --> 00:34:30,250\nAnd I can close my editor.\n\n709\n00:34:31,563 --> 00:34:36,920\nSo now I've told, basically we have\ndeployed that policy out to server one so\n\n710\n00:34:36,920 --> 00:34:43,460\nI should be able to come over to server\none, do a little GP update, switch force,\n\n711\n00:34:45,700 --> 00:34:49,995\nand hopefully we'll see\nthat policy in action here.\n\n712\n00:34:49,995 --> 00:34:51,515\n>> [LAUGH] This is the moment of truth,\nright?\n\n713\n00:34:51,515 --> 00:34:52,090\n>> I know, right?\n\n714\n00:34:52,090 --> 00:34:55,018\n>> Well, maybe it'll download,\nwe'll see what happens.\n\n715\n00:34:55,018 --> 00:34:55,879\n>> You never know.\n\n716\n00:34:55,879 --> 00:35:00,290\n>> So once it's applied, all of our\nbuilding blocks are in place, right?\n\n717\n00:35:00,290 --> 00:35:02,470\nSo all that's left is to\nactually implement this.\n\n718\n00:35:02,470 --> 00:35:06,420\nSo we kind of just built the tool for\ndynamic access control.\n\n719\n00:35:06,420 --> 00:35:10,150\nNow we need to take our resources and\nprotect them, the files and folders right?\n\n720\n00:35:10,150 --> 00:35:12,470\nAnd we need to take our users and\ngive them access.\n\n721\n00:35:12,470 --> 00:35:14,129\nSo our users, do we have\n>> [CROSSTALK]\n\n722\n00:35:14,129 --> 00:35:15,755\n>> I did, I made a couple users and\n\n723\n00:35:15,755 --> 00:35:17,890\nI filled out their department for that.\n\n724\n00:35:19,300 --> 00:35:20,490\nSo let's double check.\n\n725\n00:35:20,490 --> 00:35:21,700\nWe're gonna come in here to corp data.\n\n726\n00:35:21,700 --> 00:35:26,280\nI'm trying to think of which one I put\nin which, that'll be the question.\n\n727\n00:35:27,290 --> 00:35:29,821\nI'm gonna pull up the Properties.\n\n728\n00:35:29,821 --> 00:35:31,643\nAnd I still don't have\na classification set.\n\n729\n00:35:31,643 --> 00:35:33,571\nThat's interesting.\n\n730\n00:35:33,571 --> 00:35:35,614\n>> Oh, your manual\nclassification isn't showing up.\n\n731\n00:35:35,614 --> 00:35:37,170\n>> Yeah, which is odd.\n\n732\n00:35:37,170 --> 00:35:39,525\nLet me do this.\n\n733\n00:35:39,525 --> 00:35:40,800\nLet me do a PowerShell command.\n\n734\n00:35:43,750 --> 00:35:44,655\nIt's\n\n735\n00:35:44,655 --> 00:35:49,180\nupdate-fsrmclassificationpolicydefiniti-\nons.\n\n736\n00:35:49,180 --> 00:35:50,166\nIt's a long one.\n\n737\n00:35:53,393 --> 00:35:58,770\nYou know what?\n\n738\n00:35:58,770 --> 00:35:59,900\nLet's check something here.\n\n739\n00:36:02,010 --> 00:36:03,700\nOh, we don't have the role installed.\n\n740\n00:36:03,700 --> 00:36:06,350\n>> I don't think the darn role's\ninstalled on this machine.\n\n741\n00:36:06,350 --> 00:36:08,481\n>> We set up file classification\nin the last episode.\n\n742\n00:36:08,481 --> 00:36:09,190\n>> [LAUGH]\n>> But\n\n743\n00:36:09,190 --> 00:36:10,910\nthe servers have been reset since then.\n\n744\n00:36:10,910 --> 00:36:13,220\n>> Yep.\n>> So these are basically clean servers.\n\n745\n00:36:13,220 --> 00:36:15,280\nSo we might be missing that piece.\n\n746\n00:36:15,280 --> 00:36:17,400\n>> Might be missing some.\n\n747\n00:36:17,400 --> 00:36:19,720\nFile server resource manager, there we go.\n\n748\n00:36:20,800 --> 00:36:22,714\nI think we're gonna need that.\n\n749\n00:36:35,135 --> 00:36:39,780\nYep, so we'll get that installed and\ngive this guy a quick update.\n\n750\n00:36:39,780 --> 00:36:41,130\nLet's see what happens here.\n\n751\n00:36:41,130 --> 00:36:43,630\n>> Yeah, and, if it still doesn't show up,\nthe other thing to double check,\n\n752\n00:36:43,630 --> 00:36:44,690\nI know I saw you do it.\n\n753\n00:36:44,690 --> 00:36:47,328\nI was you in the group policy\nset that option to enable.\n\n754\n00:36:47,328 --> 00:36:49,260\n>> Right.\n>> But I've had it before where you\n\n755\n00:36:49,260 --> 00:36:51,940\nchoose enable and hit okay or whatever,\nand, for some reason, it doesn't save.\n\n756\n00:36:51,940 --> 00:36:53,820\nSo, If it still doesn't\nshow up after this,\n\n757\n00:36:53,820 --> 00:36:55,200\nthen we'll just need to go\ndouble check that policy.\n\n758\n00:36:55,200 --> 00:36:58,650\n>> Go back and make sure it's there,\nmake sure it's length and all are normal.\n\n759\n00:36:58,650 --> 00:36:59,930\nSo we're shooting stuff.\n\n760\n00:36:59,930 --> 00:37:03,600\n>> Yep, and we're gonna do manual\nclassification which why we need that tab.\n\n761\n00:37:03,600 --> 00:37:06,550\nIn real life, LAN, you'd probably\ndo the automatic classification.\n\n762\n00:37:06,550 --> 00:37:08,975\nSo you'd set up the classification rules,\nlike we did in our last episode.\n\n763\n00:37:10,707 --> 00:37:12,360\n>> Let's do a couple of things here.\n\n764\n00:37:12,360 --> 00:37:15,746\nWe'll pull up PowerShell and\nwe will again update policy.\n\n765\n00:37:20,143 --> 00:37:21,675\nAnd then we'll verify.\n\n766\n00:37:26,658 --> 00:37:29,980\nOnce it updates then I'm going to do\na little GP result just to make sure that\n\n767\n00:37:29,980 --> 00:37:31,050\npolicy's kicking in.\n\n768\n00:37:31,050 --> 00:37:35,990\nCuz one other thing you've gotta make sure\nthat I scope the policy to the right OU.\n\n769\n00:37:38,060 --> 00:37:39,100\nAnd everything is good.\n\n770\n00:37:39,100 --> 00:37:40,570\nSo there's my DAC policy.\n\n771\n00:37:40,570 --> 00:37:42,960\nI can see that is being implemented there.\n\n772\n00:37:42,960 --> 00:37:48,950\nAnd then, the other one you want to do,\nis you want to do an update-fsrm,\n\n773\n00:37:48,950 --> 00:37:51,080\nwhich is why it wasn't showing up.\n\n774\n00:37:51,080 --> 00:37:52,330\nThat was my first indication.\n\n775\n00:37:52,330 --> 00:37:53,710\nWhen it wasn't tab autofilling.\n\n776\n00:37:55,220 --> 00:37:58,925\nNow tab autofill is my\n\n777\n00:37:58,925 --> 00:38:03,840\nFSRM classification property definitions,\nso we should be much better off.\n\n778\n00:38:03,840 --> 00:38:04,980\nAnd that's something you've gotta do.\n\n779\n00:38:04,980 --> 00:38:06,960\nWhen you make changes to\nthose resource lists and\n\n780\n00:38:06,960 --> 00:38:10,500\nthings like that, updating group\npolicy doesn't seem to kick it in.\n\n781\n00:38:10,500 --> 00:38:12,285\nSo that's a good command to know,\n\n782\n00:38:12,285 --> 00:38:16,790\nupdate-FSRM classification\nproperty definitions.\n\n783\n00:38:16,790 --> 00:38:17,970\nNow we'll take a peek.\n\n784\n00:38:24,210 --> 00:38:26,730\nAnd I've got my Classification tab there.\n\n785\n00:38:26,730 --> 00:38:29,320\nAnd there's the two that we\ndeployed with our list and\n\n786\n00:38:29,320 --> 00:38:33,330\nI can see country has Japan and U.S.\nas suggested values.\n\n787\n00:38:33,330 --> 00:38:38,580\nDepartment has a pre-built list of\nsuggested values from Microsoft.\n\n788\n00:38:38,580 --> 00:38:39,700\nYou can definitely go in and\n\n789\n00:38:39,700 --> 00:38:45,630\nchange that if your department names\ndon't match up with what they use.\n\n790\n00:38:45,630 --> 00:38:47,787\nWhich they actually might not in my case.\n\n791\n00:38:47,787 --> 00:38:50,323\n[CROSSTALK]\n>> Oh for this one you want what,\n\n792\n00:38:50,323 --> 00:38:51,600\ninformation technology?\n\n793\n00:38:51,600 --> 00:38:52,380\n>> Yeah.\n\n794\n00:38:52,380 --> 00:38:55,720\nI'll go change it on the user\naccount here in just a second and\n\n795\n00:38:55,720 --> 00:38:58,960\nwe'll do finance is an easy\none cuz it's already in there.\n\n796\n00:38:58,960 --> 00:39:02,900\nSo let's do this at the folder level.\n\n797\n00:39:02,900 --> 00:39:04,660\nWhat I've done is I've created a folder.\n\n798\n00:39:04,660 --> 00:39:07,092\nSo I've got this court data folder and\nthen I've got a folder for\n\n799\n00:39:07,092 --> 00:39:08,690\nIT and a folder for research.\n\n800\n00:39:08,690 --> 00:39:13,390\nAnd what I'd like to do is change\nthat to where, or set it up to where\n\n801\n00:39:13,390 --> 00:39:16,670\nonly if you're in that department\ndo you get access to that folder.\n\n802\n00:39:16,670 --> 00:39:22,095\nSo we'll call this information technology.\n\n803\n00:39:22,095 --> 00:39:27,312\nAnd then we're gonna change this\nother one to, I'll say finance.\n\n804\n00:39:27,312 --> 00:39:28,185\n>> Sure.\n\n805\n00:39:28,185 --> 00:39:29,713\n>> Is in there, it's already in our list.\n\n806\n00:39:29,713 --> 00:39:32,807\n>> And the full name doesn't have to\nmatch the role, Mike's doing it here\n\n807\n00:39:32,807 --> 00:39:35,917\njust to keep it straight, but\nthe folder name can be whatever you want.\n\n808\n00:39:35,917 --> 00:39:40,324\nExactly, and then I\"m gonna flip back\nover here real quick to users and\n\n809\n00:39:40,324 --> 00:39:44,890\ncomputers, and update those user\naccounts with matching departments.\n\n810\n00:39:46,170 --> 00:39:49,833\nWhat did I make those guys, employees?\n\n811\n00:39:49,833 --> 00:39:52,750\nYou can see what I was watching when\nI was setting this lab up last night.\n\n812\n00:39:52,750 --> 00:39:57,743\n[LAUGH] Let me go to\nthe organization tab and\n\n813\n00:39:57,743 --> 00:40:05,028\nI'm gonna put Peter here in finance,\nand I'll put Stewie,\n\n814\n00:40:14,059 --> 00:40:17,850\nYeah, you gotta be careful, you can typo\nhere, it's not a drop down box, right.\n\n815\n00:40:17,850 --> 00:40:19,000\n>> Exactly.\n\n816\n00:40:19,000 --> 00:40:21,560\n>> Mike made that comment earlier\nabout how we populate this.\n\n817\n00:40:21,560 --> 00:40:25,260\nA lot of times your human resources\ndepartment can generate CSVs,\n\n818\n00:40:25,260 --> 00:40:28,250\ncommon separated value spreadsheets,\nthat have your users.\n\n819\n00:40:28,250 --> 00:40:31,840\nYou can just import them in with LDIFDE or\nLDEFDE.\n\n820\n00:40:31,840 --> 00:40:32,960\n>> Yeah.\nMm-hm.\n\n821\n00:40:32,960 --> 00:40:34,270\n>> I'm sorry, not LDEF, duh.\n\n822\n00:40:34,270 --> 00:40:35,240\n>> LDIFDE and CSVDE.\n\n823\n00:40:35,240 --> 00:40:36,650\n>> That's it, CSVDE.\n\n824\n00:40:36,650 --> 00:40:40,625\nSo we bring them in that way, and\nwe don't have to worry about typos.\n\n825\n00:40:40,625 --> 00:40:42,225\nDo we need to set the countries\non those guys also?\n\n826\n00:40:42,225 --> 00:40:43,445\nDo we need to do the countries?\n\n827\n00:40:43,445 --> 00:40:45,885\n>> I did do the countries, although I\nthink we need to change one of them.\n\n828\n00:40:45,885 --> 00:40:47,825\nI think they're both in U.S.\nat this point.\n\n829\n00:40:47,825 --> 00:40:48,835\nWe'll double check on that.\n\n830\n00:40:48,835 --> 00:40:51,650\n>> Well, that's fine, cuz we'll see\nthe department restrictions anyway.\n\n831\n00:40:51,650 --> 00:40:53,600\nAll right, so\nnow I'm gonna go over to classification.\n\n832\n00:40:53,600 --> 00:40:54,840\nI'm gonna set the country.\n\n833\n00:40:54,840 --> 00:40:58,490\nLet's say I only want them if\nthey're coming from a U.S. office.\n\n834\n00:40:58,490 --> 00:41:01,660\nAnd for the department, this is finance,\nso I'm gonna choose finance.\n\n835\n00:41:01,660 --> 00:41:07,160\nSo now, again, we're just setting\nresource properties there.\n\n836\n00:41:07,160 --> 00:41:10,370\nSo this resource now has\na property of U.S. and finance.\n\n837\n00:41:10,370 --> 00:41:16,470\nAnd then well go into\nthe information technology and\n\n838\n00:41:16,470 --> 00:41:22,080\nclassification, and I'll set that one\nas U.S. as well, and then department.\n\n839\n00:41:22,080 --> 00:41:29,653\nIt is going to be information technology.\n\n840\n00:41:29,653 --> 00:41:37,055\nAll right, so now, Let's go back and\njust double check before we go.\n\n841\n00:41:37,055 --> 00:41:39,748\n>> [LAUGH]\n>> And test that out.\n\n842\n00:41:39,748 --> 00:41:42,698\nSo, Peter.\n\n843\n00:41:42,698 --> 00:41:48,438\n[SOUND] That is not set.\n\n844\n00:41:48,438 --> 00:41:49,190\nGood call.\n\n845\n00:41:50,870 --> 00:41:52,710\n>> Oh, and is it written out,\nnot abbreviated?\n\n846\n00:41:52,710 --> 00:41:55,446\n>> Yeah, but it'll still map,\n>> to the U.S.,\n\n847\n00:41:55,446 --> 00:41:59,080\nIt'll actually use\nthe abbreviation in there.\n\n848\n00:41:59,080 --> 00:41:59,640\nIt should work.\nYep.\n\n849\n00:41:59,640 --> 00:42:01,950\nBecause you can't just type in there.\n\n850\n00:42:01,950 --> 00:42:04,680\nYou can't just type an abbreviation.\n\n851\n00:42:07,230 --> 00:42:13,090\nAnd then let's put Stewie in,\nlet's say he's traveling out to our\n\n852\n00:42:13,090 --> 00:42:18,920\nJapanese office for\nnow ,and we'll see what happens to him.\n\n853\n00:42:18,920 --> 00:42:21,160\nWe can change it and see what happens.\n\n854\n00:42:21,160 --> 00:42:22,980\nNow, we got our user setup.\n\n855\n00:42:22,980 --> 00:42:25,370\nMake sure that I'm not\nforgetting anything.\n\n856\n00:42:25,370 --> 00:42:26,130\nI think, we're good to go.\n\n857\n00:42:26,130 --> 00:42:28,770\nLet's go test it out and see what happens.\n\n858\n00:42:28,770 --> 00:42:29,940\nThen I'm gonna head over to client one.\n\n859\n00:42:31,560 --> 00:42:33,120\nAnd I'll sign out as the admin here.\n\n860\n00:42:33,120 --> 00:42:37,750\n>> Now do we need to refresh the policy\non the client, or is the client good?\n\n861\n00:42:37,750 --> 00:42:39,680\nCuz it's the server doing\nthe authentication.\n\n862\n00:42:39,680 --> 00:42:40,250\n>> Correct.\n\n863\n00:42:40,250 --> 00:42:41,900\nSo I would have to log out.\n\n864\n00:42:41,900 --> 00:42:44,710\nLike if I made a change\nto their country or\n\n865\n00:42:44,710 --> 00:42:48,380\ntheir department ,or something like that,\nI'd have to get a new access token.\n\n866\n00:42:48,380 --> 00:42:49,790\nLog out and log back in.\n\n867\n00:42:49,790 --> 00:42:51,370\nBut we did deploy that policy though, and\n\n868\n00:42:51,370 --> 00:42:53,450\nI might not have rebooted\nthat server since.\n\n869\n00:42:54,730 --> 00:42:55,930\nI think I just did, but.\n\n870\n00:42:55,930 --> 00:42:58,640\nYeah, let's do it again.\n\n871\n00:42:58,640 --> 00:42:59,470\nDoesn't hurt.\n\n872\n00:43:04,613 --> 00:43:05,790\nDoesn't hurt anything.\n\n873\n00:43:07,220 --> 00:43:10,910\nAnd so\nnow we'll go in as one of these users.\n\n874\n00:43:10,910 --> 00:43:12,036\nAnd see what we've got.\n\n875\n00:43:15,618 --> 00:43:22,330\nI'll switch over to client one,\nlog in as Peter who is in finance.\n\n876\n00:43:22,330 --> 00:43:28,074\nAnd then we'll learn how to use Windows 8.\n\n877\n00:43:31,132 --> 00:43:34,086\nI get really frustrated\nwith the Windows 8.1, and\n\n878\n00:43:34,086 --> 00:43:37,180\nthey make you do that tutorial\nthe first time you log in.\n\n879\n00:43:37,180 --> 00:43:38,700\n>> Slide your cursor up to the corner.\n\n880\n00:43:38,700 --> 00:43:41,130\n>> And if you're on a machine without\na touch screen it still shows up.\n\n881\n00:43:41,130 --> 00:43:44,170\nWhich just really frustrates me, cuz you\ncan't get out of that stupid tutorial.\n\n882\n00:43:44,170 --> 00:43:45,578\n>> I know.\nIt is so annoying.\n\n883\n00:43:45,578 --> 00:43:47,890\nWe'll get that admin to log in.\n\n884\n00:43:49,240 --> 00:43:53,100\nWhile you're doing that, you want to log\nin on Client Two as the other account.\n\n885\n00:43:53,100 --> 00:43:56,020\nThat way they can both get set up.\n\n886\n00:43:56,020 --> 00:43:59,300\nWindows 8.1, it does take a while to get\na user profile set up the first time,\n\n887\n00:43:59,300 --> 00:44:02,950\nsomebody logs in,\nI don't know why, it just does.\n\n888\n00:44:02,950 --> 00:44:05,436\n>> It is annoying, and\nI know we can't really change that.\n\n889\n00:44:05,436 --> 00:44:08,865\nMicrosoft, help us out.\n\n890\n00:44:08,865 --> 00:44:14,470\n[LAUGH] Its because they needed the 20\nscreens to pester you to sign up for\n\n891\n00:44:14,470 --> 00:44:16,610\ntheir Office 365 Live account.\n\n892\n00:44:16,610 --> 00:44:20,860\n>> Yeah, it's still getting my\napps from the app store, nice.\n\n893\n00:44:23,875 --> 00:44:25,435\nYeah.\nAnd then what we can do is we can go back,\n\n894\n00:44:25,435 --> 00:44:26,835\nand we'll add another one in here.\n\n895\n00:44:26,835 --> 00:44:31,335\nAnd we might think about adding a,\nnot a device claim, but we can add.\n\n896\n00:44:31,335 --> 00:44:33,855\nWell, I'll show you how we can\nchange the policies around.\n\n897\n00:44:33,855 --> 00:44:37,490\nIn fact, one of our later topics is,\nyou know, making changes to policies and\n\n898\n00:44:37,490 --> 00:44:38,900\nthings like that, and\nhow we can implement that.\n\n899\n00:44:38,900 --> 00:44:41,357\nSo we'll try to include\nsome computer information,\n\n900\n00:44:41,357 --> 00:44:44,150\nlike from this workstation yes,\nfrom this workstation no.\n\n901\n00:44:47,055 --> 00:44:48,680\n>> Well, gee, this is exciting.\n\n902\n00:44:48,680 --> 00:44:50,250\nSo.\n>> Yes it is.\n\n903\n00:44:50,250 --> 00:44:50,780\nTell you what.\n\n904\n00:44:50,780 --> 00:44:51,300\nOh, here we go.\n\n905\n00:44:51,300 --> 00:44:51,890\nThere we go.\n\n906\n00:44:51,890 --> 00:44:53,840\nI was going to say we can go ahead and\n\n907\n00:44:53,840 --> 00:44:57,480\ncreate our access denied message,\nbut we'll wait.\n\n908\n00:44:57,480 --> 00:44:58,390\nAll right, so what I'm going to do,\n\n909\n00:44:58,390 --> 00:45:00,680\nI'm going to flip back\nover here to the desktop.\n\n910\n00:45:00,680 --> 00:45:04,200\nAnd before I take a peek,\nlet's show you a command,\n\n911\n00:45:04,200 --> 00:45:09,210\none of these things you can\ndo is from power shell.\n\n912\n00:45:11,380 --> 00:45:19,510\nMy mouse is just not real smooth today.\n\n913\n00:45:19,510 --> 00:45:28,380\nIs I can do a who am I, switch claims and\nI'll see that, in my token,\n\n914\n00:45:28,380 --> 00:45:33,500\nit's including a claim for country, and\nthe value is currently set to U.S..\n\n915\n00:45:33,500 --> 00:45:36,310\nAnd I'm also including\na claim called department.\n\n916\n00:45:36,310 --> 00:45:38,370\nAnd it's concluding the value of finance.\n\n917\n00:45:38,370 --> 00:45:41,280\nIt's pulling that information\nfrom active directory.\n\n918\n00:45:41,280 --> 00:45:42,000\n>> And just like you said,\n\n919\n00:45:42,000 --> 00:45:45,140\neven though the drop-down box in\nactive directory uses a computer tab\n\n920\n00:45:45,140 --> 00:45:48,080\nUnited States written out, it did drop\nit to the two-letter country code.\n\n921\n00:45:48,080 --> 00:45:48,580\n>> Yeah, exactly.\n\n922\n00:45:49,820 --> 00:45:51,930\nAll right so now we should be able to see.\n\n923\n00:45:51,930 --> 00:45:53,000\nLet's go test this out.\n\n924\n00:45:53,000 --> 00:45:57,280\nIf we flip in here and I navigate to,\n\n925\n00:45:57,280 --> 00:46:01,716\nwhat is it, server 1 slash corpdata\n\n926\n00:46:08,793 --> 00:46:09,890\nAnd he's in what?\n\n927\n00:46:09,890 --> 00:46:10,390\nFinance?\n\n928\n00:46:12,390 --> 00:46:14,630\nAnd there we go he can\naccess it just fine.\n\n929\n00:46:14,630 --> 00:46:15,370\nHe can save it.\n\n930\n00:46:17,590 --> 00:46:21,140\nBut if we try to go over\nto Information Technology.\n\n931\n00:46:23,850 --> 00:46:27,620\n>> He gets in there just fine too [LAUGH].\n\n932\n00:46:27,620 --> 00:46:29,020\n>> Wow, interesting.\n\n933\n00:46:29,020 --> 00:46:30,840\nWe'll have to double check on that.\n\n934\n00:46:30,840 --> 00:46:34,720\nWhy is it letting him access that?\n\n935\n00:46:34,720 --> 00:46:35,960\nLet's take a look at the properties here.\n\n936\n00:46:35,960 --> 00:46:38,210\nOne of the ways you can test this out,\n\n937\n00:46:38,210 --> 00:46:42,899\nis I can come take a look at my\nthis resource doesn't even have a.\n\n938\n00:46:46,885 --> 00:46:48,758\n>> I think if you look from\nthe servers side don't you,\n\n939\n00:46:48,758 --> 00:46:52,160\nif you want to see the\n>> Classification settings.\n\n940\n00:46:52,160 --> 00:46:53,230\n>> And we did set that right?\n\n941\n00:46:53,230 --> 00:46:54,152\nI remember setting that.\n\n942\n00:46:54,152 --> 00:46:56,300\nAll right, well we can do this,\nwe can go back over to the server, and\n\n943\n00:46:56,300 --> 00:46:58,480\nwe can check this out.\n\n944\n00:46:59,740 --> 00:47:01,960\nLet's go in here and see what's going on.\n\n945\n00:47:01,960 --> 00:47:03,390\nGood to troubleshoot.\n\n946\n00:47:03,390 --> 00:47:06,320\nSo what I'm gonna do to troubleshoot this,\nI'm gonna go over to the security tab and\n\n947\n00:47:06,320 --> 00:47:08,370\nI can see in my classification\ntab I set it to U..S.\n\n948\n00:47:08,370 --> 00:47:09,870\nand information technology.\n\n949\n00:47:09,870 --> 00:47:11,350\nSo it shouldn't be giving Peter access,\n\n950\n00:47:11,350 --> 00:47:14,640\nbecause he's not submitting\nthat particular claim.\n\n951\n00:47:14,640 --> 00:47:17,960\nSo if I go over to security,\nI can click advanced, and\n\n952\n00:47:17,960 --> 00:47:20,160\nthey've added a couple tabs\nto this advanced here.\n\n953\n00:47:20,160 --> 00:47:23,870\nI can look at one central\naccess policy and I can see.\n\n954\n00:47:23,870 --> 00:47:26,200\n>> Oh, and\nthere's no central access policy.\n\n955\n00:47:26,200 --> 00:47:27,910\n>> That it is not applied.\n\n956\n00:47:27,910 --> 00:47:30,330\nNice.\nThat could be part of my problem.\n\n957\n00:47:30,330 --> 00:47:31,080\nAll right, so let's do that.\n\n958\n00:47:31,080 --> 00:47:33,627\nDon't do that to the file folder,\nlet's do it here.\n\n959\n00:47:35,926 --> 00:47:37,030\nAll right, so we'll do it to both of them.\n\n960\n00:47:37,030 --> 00:47:38,896\n[CROSSTALK]\n>> Yeah,\n\n961\n00:47:38,896 --> 00:47:41,333\nremember that policy is what\nties everything together.\n\n962\n00:47:41,333 --> 00:47:43,372\nSo if the policy didn't\napply to the folder,\n\n963\n00:47:43,372 --> 00:47:46,877\nthen it doesn't know to link all the stuff\ntogether and actually act upon it.\n\n964\n00:47:46,877 --> 00:47:47,708\n>> Exactly.\n\n965\n00:47:47,708 --> 00:47:49,375\nYeah.\nNeither one of them has it set.\n\n966\n00:47:49,375 --> 00:47:51,542\n>> So\nwe'll choose that department MASH policy.\n\n967\n00:47:51,542 --> 00:47:53,740\nApply to all folders and\nfiles underneath it.\n\n968\n00:47:54,780 --> 00:47:57,350\nAnd then we'll do the same\nthing to that other folder.\n\n969\n00:47:57,350 --> 00:48:02,111\nAnd I could have done this at\nthe top level to share as well, and\n\n970\n00:48:02,111 --> 00:48:06,700\nnot had to do it to each individual\nfile folder inside here.\n\n971\n00:48:12,609 --> 00:48:14,188\nAll right.\n\n972\n00:48:14,188 --> 00:48:16,568\nNow let's check it out.\n\n973\n00:48:19,254 --> 00:48:21,262\nLet's just get a new little\nsession going there.\n\n974\n00:48:21,262 --> 00:48:28,620\n[LAUGH] And\n\n975\n00:48:28,620 --> 00:48:32,190\nnotice that information\ntechnology doesn't even show up,\n\n976\n00:48:32,190 --> 00:48:35,620\nbecause there's my,\nI didn't think it'd turn that on.\n\n977\n00:48:35,620 --> 00:48:39,010\nBut we've talked about that in other\nepisodes, that's that access based\n\n978\n00:48:39,010 --> 00:48:43,320\nenumeration, so it's not even showing\nme the one that I don't have access to.\n\n979\n00:48:45,370 --> 00:48:47,400\nWhich really I'd rather see it but, anyway\n>> [LAUGH]\n\n980\n00:48:47,400 --> 00:48:49,230\n>> At least we know it's working there.\n\n981\n00:48:49,230 --> 00:48:54,220\nAnd as I was getting ready to\nshow you guys with on the server.\n\n982\n00:48:54,220 --> 00:48:56,690\nI can come back and\npull up Properties here.\n\n983\n00:48:56,690 --> 00:49:00,080\nAnd you can go under Security and\nAdvanced, and\n\n984\n00:49:00,080 --> 00:49:01,870\nwe can check our effective access.\n\n985\n00:49:01,870 --> 00:49:05,240\nThey've included claim information\nnow in the Effective Access tab.\n\n986\n00:49:05,240 --> 00:49:10,590\nSo I can come in here and\nI can save, Peter If I could type.\n\n987\n00:49:19,450 --> 00:49:22,370\nAnd I can choose to include,\nin fact, let's take a peek here.\n\n988\n00:49:22,370 --> 00:49:24,140\nIf I choose affective access now,\n\n989\n00:49:24,140 --> 00:49:26,990\nif it's just Peter Griffin,\nlook at his affective access.\n\n990\n00:49:28,190 --> 00:49:29,440\nHas no access at all.\n\n991\n00:49:29,440 --> 00:49:32,340\nIf I tell it to include a claim and\n\n992\n00:49:32,340 --> 00:49:36,880\nthat he's going to submit\na department claim of U.S.,\n\n993\n00:49:36,880 --> 00:49:42,090\nas well as a,\nI'm sorry a country claim of U.S.\n\n994\n00:49:42,090 --> 00:49:47,280\nand a department claim of,\nlet's say, finance.\n\n995\n00:49:47,280 --> 00:49:48,397\n>> I know he's set to finance right now.\n\n996\n00:49:50,998 --> 00:49:52,391\nAnd then view effective access.\n\n997\n00:49:56,106 --> 00:49:59,080\n>> Well that's because you're on\nthe information technology folder, right?\n\n998\n00:49:59,080 --> 00:49:59,890\n>> Oh, am I?\n\n999\n00:49:59,890 --> 00:50:00,760\nOops.\n>> That's fine right,\n\n1000\n00:50:00,760 --> 00:50:01,610\ncuz it kind of shows that.\n\n1001\n00:50:01,610 --> 00:50:05,350\nSo if his department was finance,\nsure, he's not gonna have access.\n\n1002\n00:50:05,350 --> 00:50:08,600\nIf we were to change his department\nto information technology though.\n\n1003\n00:50:08,600 --> 00:50:10,350\nRight?\nNow that's not what his is.\n\n1004\n00:50:10,350 --> 00:50:12,670\nEffective access lets you do\nwhat-if scenarios, right?\n\n1005\n00:50:12,670 --> 00:50:16,150\nSo what if we changed his department\nto Information Technology?\n\n1006\n00:50:16,150 --> 00:50:18,081\nAnd now we view the effective\naccess [CROSSTALK].\n\n1007\n00:50:18,081 --> 00:50:19,195\n>> Full control.\n\n1008\n00:50:19,195 --> 00:50:20,840\nIt's a beautiful thing.\n\n1009\n00:50:20,840 --> 00:50:24,145\nSo a quick way to test and see whether or\nnot this stuff is actually working.\n\n1010\n00:50:24,145 --> 00:50:26,070\n>> Mm-hm.\n>> I can see right there that it is.\n\n1011\n00:50:26,070 --> 00:50:28,500\nIf we put him in that department,\nhe would have that access.\n\n1012\n00:50:28,500 --> 00:50:29,380\n>> Exactly.\n\n1013\n00:50:29,380 --> 00:50:29,900\nExactly right.\n\n1014\n00:50:31,150 --> 00:50:33,380\n>> All right,\nlet's see what else we want to do.\n\n1015\n00:50:33,380 --> 00:50:34,621\nSo we covered the, you know,\n\n1016\n00:50:34,621 --> 00:50:36,840\nwe deployed our policy out there,\n>> Mm-hm.\n\n1017\n00:50:36,840 --> 00:50:38,800\n>> We had to make sure that\nI didn't do that first time,\n\n1018\n00:50:38,800 --> 00:50:43,490\nmake sure you go to the resource itself,\nand actually implement the policy.\n\n1019\n00:50:43,490 --> 00:50:50,600\nSo using group policy gives that server\nthe ability to implement that policy.\n\n1020\n00:50:50,600 --> 00:50:53,400\nBut you still have to go to the resource\nitself and turn that policy on.\n\n1021\n00:50:55,190 --> 00:50:57,220\n>> Yeah.\n>> All right.\n\n1022\n00:50:57,220 --> 00:50:58,710\n>> So that right there,\n\n1023\n00:50:58,710 --> 00:51:03,440\nif we were to stop right there,\nthat is basic dynamic access control.\n\n1024\n00:51:03,440 --> 00:51:05,000\nWe've created some resource properties.\n\n1025\n00:51:05,000 --> 00:51:07,270\nWe've protected some content\nwith that properties.\n\n1026\n00:51:07,270 --> 00:51:09,780\nAnd then we use the policy\nto tie it together.\n\n1027\n00:51:09,780 --> 00:51:14,790\nNow we're going beyond just what's your\nusername, SID, and what group are you in.\n\n1028\n00:51:14,790 --> 00:51:16,430\nRight, now we're going into\nall sorts of other things.\n\n1029\n00:51:16,430 --> 00:51:20,780\nI'm gonna see if I can turn off access\nbased enumeration real quick on that.\n\n1030\n00:51:20,780 --> 00:51:21,810\n>> I see, you see the other folder.\n\n1031\n00:51:21,810 --> 00:51:24,760\n>> Yeah, cuz I wanna show you guys,\nwe're gonna get through some access\n\n1032\n00:51:24,760 --> 00:51:27,790\ndenied assistance, and I really\ngotta have something to click on so\n\n1033\n00:51:27,790 --> 00:51:32,003\nthat I can\n>> Actually get the access denied.\n\n1034\n00:51:32,003 --> 00:51:32,506\n[LAUGH]\n>> Yeah.\n\n1035\n00:51:32,506 --> 00:51:33,131\nActually get my access\n\n1036\n00:51:33,131 --> 00:51:33,636\n>> [LAUGH]\n\n1037\n00:51:33,636 --> 00:51:34,306\n>> denied message.\n\n1038\n00:51:34,306 --> 00:51:35,136\nSo let's do this.\n\n1039\n00:51:35,136 --> 00:51:36,799\nLet's go into tools and, what,\n\n1040\n00:51:36,799 --> 00:51:39,881\ncomputer management\n>> [CROSSTALK] cuz I think even if you\n\n1041\n00:51:39,881 --> 00:51:44,643\ntype in the name, it doesn't give you\nan access denied, does it, when access\n\n1042\n00:51:44,643 --> 00:51:46,951\nbased enumeration is turned on.\nSo\n\n1043\n00:51:46,951 --> 00:51:52,820\nI'm just going to pull up the properties\nI share, and take a look at my\n\n1044\n00:51:58,927 --> 00:52:01,109\nIt's not on their either.\n\n1045\n00:52:07,425 --> 00:52:11,478\n>> I think you have to go into the,\nwhat is it, the share and\n\n1046\n00:52:11,478 --> 00:52:13,650\npublish screen or whatever?\n\n1047\n00:52:13,650 --> 00:52:17,180\n>> Oh, you gotta use your shares console,\nyou're right, you're right.\n\n1048\n00:52:17,180 --> 00:52:18,780\n>> Which is kind of annoying but.\n\n1049\n00:52:18,780 --> 00:52:19,280\n>> Yes.\n\n1050\n00:52:22,450 --> 00:52:25,070\nYeah, you know we used to joke around\nabout how there were ten different ways to\n\n1051\n00:52:25,070 --> 00:52:28,550\ndo things, and unfortunately with some\nof these different consoles, there's ten\n\n1052\n00:52:28,550 --> 00:52:32,120\ndifferent ways to see it, but there\nonly be one particular way to modify it.\n\n1053\n00:52:32,120 --> 00:52:35,720\nSo the setting that Mike is looking for\nis not under the normal share console.\n\n1054\n00:52:35,720 --> 00:52:37,780\n>> That we have to go into.\n\n1055\n00:52:37,780 --> 00:52:39,380\n>> I'm trying to remember where that was.\n\n1056\n00:52:39,380 --> 00:52:42,400\n>> Don't you on the left side,\ndon't you go to File and Storage Services.\n\n1057\n00:52:42,400 --> 00:52:43,270\n>> And then Share.\nOh you're right.\n\n1058\n00:52:43,270 --> 00:52:44,180\n>> And then Shares.\n\n1059\n00:52:44,180 --> 00:52:46,740\nAnd you do it from in here,\nif I remember right.\n\n1060\n00:52:46,740 --> 00:52:47,325\nI could be wrong.\n\n1061\n00:52:47,325 --> 00:52:51,219\n>> [CROSSTALK]\n>> Let's see what we got here.\n\n1062\n00:52:51,219 --> 00:52:52,235\nThere it is.\n\n1063\n00:52:52,235 --> 00:52:52,805\n>> Yep.\n>> Good man.\n\n1064\n00:52:53,937 --> 00:52:55,655\nAll right, and\nthen we'll click okay on that.\n\n1065\n00:52:55,655 --> 00:52:58,215\nAnd so hopefully here it is.\n\n1066\n00:52:58,215 --> 00:53:01,555\nI want to make sure that we\ncan see that resource, so\n\n1067\n00:53:01,555 --> 00:53:02,950\nwe can get that access denied.\n\n1068\n00:53:02,950 --> 00:53:07,090\nAnd in real life land, you really probably\nwant access based enumeration turned on.\n\n1069\n00:53:07,090 --> 00:53:08,310\nIf somebody doesn't have\naccess to the folder,\n\n1070\n00:53:08,310 --> 00:53:09,590\nwhy even bother showing it to them?\n\n1071\n00:53:09,590 --> 00:53:11,080\nWhy even let them know that it's there.\n\n1072\n00:53:11,080 --> 00:53:12,590\nJust hide it from them, right.\n\n1073\n00:53:12,590 --> 00:53:16,541\nBut we want to simulate the access denied\nmessage so we need [CROSSTALK] and\n\n1074\n00:53:16,541 --> 00:53:18,373\nnow it shows up, and there we go.\n\n1075\n00:53:18,373 --> 00:53:22,188\n>> And there's my, because you were\nsaying, contact your system administrator.\n\n1076\n00:53:22,188 --> 00:53:23,010\nWhich is frustrating.\n\n1077\n00:53:23,010 --> 00:53:24,840\nYeah, it is.\n>> So the default,\n\n1078\n00:53:24,840 --> 00:53:27,860\naccess denied message is not\nvery informative to an end user.\n\n1079\n00:53:27,860 --> 00:53:29,120\nBecause it basically just tells you,\n\n1080\n00:53:29,120 --> 00:53:32,090\nyou don't have access,\ntalk to your system admin and that's it.\n\n1081\n00:53:32,090 --> 00:53:35,800\nIt doesn't tell you why you don't have\naccess, it doesn't say, oh by the way,\n\n1082\n00:53:35,800 --> 00:53:38,420\nyou're not in the U.S .,that's\nwhy you don't have access, right?\n\n1083\n00:53:38,420 --> 00:53:40,220\n>> Right.\n>> Because then a user might read that and\n\n1084\n00:53:40,220 --> 00:53:41,710\nsay, oh that makes sense and\n\n1085\n00:53:41,710 --> 00:53:42,820\nthen that's the\n>> The end of it.\n\n1086\n00:53:42,820 --> 00:53:44,740\nBut instead it just says\ncontact the system admin.\n\n1087\n00:53:44,740 --> 00:53:48,780\nSo they open up a support ticket, and\nthen you go through that routine.\n\n1088\n00:53:48,780 --> 00:53:53,290\nSo wouldn't it be nice Mike,\nif we could do something different, right?\n\n1089\n00:53:53,290 --> 00:53:54,390\n>> Yep.\nI think so.\n\n1090\n00:53:54,390 --> 00:53:57,030\n>> And with dynamic access control we can.\n\n1091\n00:53:57,030 --> 00:53:59,500\nBut we can't do it this segment,\ncuz we're out of time.\n\n1092\n00:53:59,500 --> 00:54:01,580\nSo let's do this, let's stop and\ntake a break, and\n\n1093\n00:54:01,580 --> 00:54:04,260\nwhen we get back we'll\nget a chance to see that.\n\n1094\n00:54:04,260 --> 00:54:08,880\nHow to make that access denied activity\njust go a little bit differently for us.\n\n1095\n00:54:08,880 --> 00:54:10,380\nAll right so stay tuned.\n\n1096\n00:54:10,380 --> 00:54:11,440\nWe'll be back in a few.\n\n1097\n00:54:11,440 --> 00:54:14,650\n[MUSIC]\n\n1098\n00:54:14,650 --> 00:54:20,621\n[NOISE] All right, welcome back everybody.\n\n1099\n00:54:20,621 --> 00:54:21,991\nSo, what we're gonna do now,\n\n1100\n00:54:21,991 --> 00:54:25,430\nis we're gonna take a look at some of\nthe little advanced bells and whistles.\n\n1101\n00:54:25,430 --> 00:54:27,540\nYou might be saying, hey wait a minute,\nthis whole thing is advanced.\n\n1102\n00:54:27,540 --> 00:54:31,310\nIt is, but we've wrapped up\nthe basic dynamic access control,\n\n1103\n00:54:31,310 --> 00:54:33,310\nnow we're gonna tweak it a little bit,\nright?\n\n1104\n00:54:33,310 --> 00:54:37,540\nYeah, we're going to get into our,\nthe access denied assistance.\n\n1105\n00:54:37,540 --> 00:54:39,930\nAs well as changing a policy,\n\n1106\n00:54:39,930 --> 00:54:42,690\nwhat if I decide I want to\nchange what we just implemented.\n\n1107\n00:54:42,690 --> 00:54:45,720\nAnd being able to stage, as I was\nsaying in the beginning of the episode.\n\n1108\n00:54:45,720 --> 00:54:48,350\nStage those permissions and audit that.\n\n1109\n00:54:48,350 --> 00:54:50,490\nSo we'll start, the first thing if\nwe're going to do access denied,\n\n1110\n00:54:50,490 --> 00:54:54,380\nwe saw that message that we got when\nPeter tried to access that other folder.\n\n1111\n00:54:54,380 --> 00:54:55,560\nHe was unable to get access.\n\n1112\n00:54:55,560 --> 00:54:57,900\nBut it was a pretty lame message, right?\n\n1113\n00:54:57,900 --> 00:55:00,540\nI think I'm still logged in over here.\n\n1114\n00:55:00,540 --> 00:55:02,630\nLet me take a peek.\n\n1115\n00:55:03,910 --> 00:55:06,814\nI shouldn't say lame, but it was.\n\n1116\n00:55:06,814 --> 00:55:09,370\n[LAUGH]\n>> Yeah.\n\n1117\n00:55:09,370 --> 00:55:11,880\nIt was that one that basically says\nyou need to contact your network\n\n1118\n00:55:11,880 --> 00:55:15,670\nadministrator, which, as a network\nadmin Is really no point in contacting.\n\n1119\n00:55:15,670 --> 00:55:16,300\n>> Yeah, very generic.\n\n1120\n00:55:16,300 --> 00:55:19,920\nAs an end user, as I think Don pointed\nout a few minutes ago, as an end user,\n\n1121\n00:55:19,920 --> 00:55:22,610\nit says I don't have\npermission to access this.\n\n1122\n00:55:22,610 --> 00:55:25,050\nBut there's nothing I can do about it.\n\n1123\n00:55:25,050 --> 00:55:27,580\nIt says contact system admin,\nand the system admin\n\n1124\n00:55:27,580 --> 00:55:31,630\nmight not be the one that's in charge of\nthis particular resource and deciding who.\n\n1125\n00:55:31,630 --> 00:55:32,850\nSo lots of phone calls to me.\n\n1126\n00:55:32,850 --> 00:55:34,267\n>> It also doesn't tell\n'em who the system admin.\n\n1127\n00:55:34,267 --> 00:55:35,460\n>> [LAUGH]\n>> It's\n\n1128\n00:55:35,460 --> 00:55:37,780\nnot like it even gives 'em\nan email address to shoot to, so.\n\n1129\n00:55:37,780 --> 00:55:38,650\n>> Exactly.\n\n1130\n00:55:38,650 --> 00:55:40,625\nSo what we're gonna do, and\nit's pretty easy to implement.\n\n1131\n00:55:40,625 --> 00:55:44,042\nWe're gonna open up a group\npolicy management here.\n\n1132\n00:55:44,042 --> 00:55:48,507\nAnd I'm gonna head over to that\ngood old DACA policy again And so\n\n1133\n00:55:48,507 --> 00:55:50,708\nI just scope to the right, OU.\n\n1134\n00:55:50,708 --> 00:55:56,211\nAnd this particular setting is gonna be\nunder Policies > Administrative Templates\n\n1135\n00:55:56,211 --> 00:56:01,870\n> System, and then up here at the top\nI've got my access denied assistance.\n\n1136\n00:56:01,870 --> 00:56:02,490\nAll right.\n\n1137\n00:56:02,490 --> 00:56:05,370\nAnd there's two settings in\nhere I'm gonna take a peek at.\n\n1138\n00:56:05,370 --> 00:56:08,200\nOne is the customized message for\naccess denied errors.\n\n1139\n00:56:08,200 --> 00:56:13,188\nSo this is the first cool thing you can\ndo is I can choose what I want that\n\n1140\n00:56:13,188 --> 00:56:14,395\nmessage to say.\n\n1141\n00:56:14,395 --> 00:56:16,702\nNo soup for you.\n\n1142\n00:56:16,702 --> 00:56:18,514\n>> [LAUGH]\n>> Or\n\n1143\n00:56:18,514 --> 00:56:20,038\nwhatever you want to put in there, right.\n\n1144\n00:56:20,038 --> 00:56:22,035\nShould we make it a little\nbit more professional?\n\n1145\n00:56:22,035 --> 00:56:22,807\n>> It doesn't matter.\n\n1146\n00:56:22,807 --> 00:56:27,162\n>> [LAUGH] We'll just leave it.\n\n1147\n00:56:27,162 --> 00:56:31,549\nObviously in the real world you\nmight want to be a little more\n\n1148\n00:56:31,549 --> 00:56:34,150\nprofessional than that.\n\n1149\n00:56:34,150 --> 00:56:36,970\nSo you could stop right there, and that's\ngonna change the message that's going\n\n1150\n00:56:36,970 --> 00:56:38,740\nto pop up when they get denied access.\n\n1151\n00:56:38,740 --> 00:56:44,120\nYou might put something like this resource\nis only available to a certain department,\n\n1152\n00:56:44,120 --> 00:56:45,570\nor something like that.\n\n1153\n00:56:45,570 --> 00:56:50,520\nAnd then where it starts to get\npowerful is I can choose enable users\n\n1154\n00:56:50,520 --> 00:56:52,400\nto request assistance.\n\n1155\n00:56:52,400 --> 00:56:54,142\nSo instead of just giving\nthem an OK button,\n\n1156\n00:56:54,142 --> 00:56:57,480\nthey're gonna be able\nto request assistance.\n\n1157\n00:56:57,480 --> 00:56:58,820\nWhy am I getting denied?\n\n1158\n00:56:58,820 --> 00:57:00,550\nCan I get access to this resource?\n\n1159\n00:57:01,640 --> 00:57:04,710\nAnd then below there,\nit's going to generate an email.\n\n1160\n00:57:04,710 --> 00:57:06,470\nAnd I could add the following text, so\n\n1161\n00:57:06,470 --> 00:57:09,165\nif I wanted to put some custom thing\nin there that I wanted to see.\n\n1162\n00:57:09,165 --> 00:57:11,200\nAgain, I'm gonna be either the admin or\n\n1163\n00:57:11,200 --> 00:57:12,880\nthe folder owner or something like\nthat's gonna get the email so\n\n1164\n00:57:12,880 --> 00:57:15,920\nsomething like that's gonna get that\nemail so this would be extra information.\n\n1165\n00:57:15,920 --> 00:57:18,660\nBut really, it includes just\nabout everything I need already.\n\n1166\n00:57:18,660 --> 00:57:22,480\nAs I can scroll down here,\nit's gonna email the folder owner.\n\n1167\n00:57:22,480 --> 00:57:25,730\nIt's also gonna email the file\nserver administrator.\n\n1168\n00:57:25,730 --> 00:57:29,948\nAnd then I can add another\nsemicolon separated list here\n\n1169\n00:57:29,948 --> 00:57:32,740\nof additional emails if I wanted to.\n\n1170\n00:57:32,740 --> 00:57:35,830\nAnd it's going to include the device\nclaims and the user claims.\n\n1171\n00:57:35,830 --> 00:57:40,052\nSo I'm going to be able to see oh well no\nwonder Peter couldn't get access, he's not\n\n1172\n00:57:40,052 --> 00:57:44,580\nsubmitting an information technology\nuser claim or whatever the case may be.\n\n1173\n00:57:44,580 --> 00:57:47,061\nAnd it's also,\ncan log something in the application log,\n\n1174\n00:57:47,061 --> 00:57:50,280\nbecause when I'm done with the email,\nprobably gonna delete it.\n\n1175\n00:57:50,280 --> 00:57:54,000\nIt's nice to have a permanent record\nmaybe of that kind of access request.\n\n1176\n00:57:56,080 --> 00:57:57,670\nSo should be good to go there.\n\n1177\n00:57:57,670 --> 00:57:59,540\nI'm going to click OK on that one.\n\n1178\n00:57:59,540 --> 00:58:02,150\nAnd then I've got to do this second one.\n\n1179\n00:58:02,150 --> 00:58:05,500\nEnabled access denied assistance\non client for all file types.\n\n1180\n00:58:05,500 --> 00:58:07,311\nAnd you know what I just did?\n\n1181\n00:58:07,311 --> 00:58:09,354\nI do this every time.\n\n1182\n00:58:09,354 --> 00:58:13,354\nThis has to be scoped to\nthe client not the server.\n\n1183\n00:58:13,354 --> 00:58:15,379\n[CROSSTALK]\n>> Oh we're doing this to server policy\n\n1184\n00:58:15,379 --> 00:58:18,173\n[CROSSTALK]\n>> And I was on the wrong policy there, so\n\n1185\n00:58:18,173 --> 00:58:21,934\nlet me flip over to where\nthat client computer's at and\n\n1186\n00:58:21,934 --> 00:58:24,740\nwe'll create a new GPO here real quick.\n\n1187\n00:58:24,740 --> 00:58:29,180\nI'm just going to call it the Access.\n\n1188\n00:58:34,568 --> 00:58:37,937\n>> Yeah because it's not the server\nthat generates this error message,\n\n1189\n00:58:37,937 --> 00:58:42,140\nit's actually the client that does it and\nso that's why it's gotta apply there.\n\n1190\n00:58:42,140 --> 00:58:44,000\nThe server is managing the permissions,\nbut\n\n1191\n00:58:44,000 --> 00:58:46,810\nthe actual error message\nis displayed by the client.\n\n1192\n00:58:46,810 --> 00:58:47,580\n>> Exactly.\n\n1193\n00:58:47,580 --> 00:58:51,110\nSo that would have been pretty sad\ncause it wouldn't have done anything.\n\n1194\n00:58:51,110 --> 00:58:55,205\nSo we'll change that back,\nno soup for you.\n\n1195\n00:58:55,205 --> 00:58:58,350\nAnd I'm going to enable their access, and\n\n1196\n00:58:58,350 --> 00:58:59,870\nthat was the only thing we're\ngoing to change in there.\n\n1197\n00:58:59,870 --> 00:59:02,408\nWe're going to leave again\nall those defaults down here.\n\n1198\n00:59:02,408 --> 00:59:03,970\nWe'll click OK, and\n\n1199\n00:59:03,970 --> 00:59:09,240\nthen I'm going to turn it on by just\nchoosing Enabled and clicking OK.\n\n1200\n00:59:10,870 --> 00:59:14,210\nAnd that should be all I need, now that\nI've got it scoped to the right OU,\n\n1201\n00:59:14,210 --> 00:59:17,650\nthat should work out pretty good,\nso let's go test it out.\n\n1202\n00:59:17,650 --> 00:59:18,869\nWe're going to flip over to the client.\n\n1203\n00:59:20,270 --> 00:59:24,780\nAnd we just made a change to a group\npolicy, so we could either reboot or\n\n1204\n00:59:24,780 --> 00:59:28,090\noops, refresh that real quick.\n\n1205\n00:59:30,570 --> 00:59:33,730\nI apologize, I thought I changed\nmy font on all these guys.\n\n1206\n00:59:33,730 --> 00:59:36,620\nSo I'm going to do a little GP update,\nswitch force.\n\n1207\n00:59:39,950 --> 00:59:41,130\nRefresh that policy.\n\n1208\n00:59:43,470 --> 00:59:45,530\nWhich you can now do\nthrough Active Directory,\n\n1209\n00:59:45,530 --> 00:59:49,360\nthat's a pretty sweet concept too.\n\n1210\n00:59:49,360 --> 00:59:52,051\nI used to hate, when you changed a policy,\nyou'd have to call the user up and\n\n1211\n00:59:52,051 --> 00:59:54,828\ntell them to reboot their machine, or\nremotely reboot it, or kick them off and\n\n1212\n00:59:54,828 --> 00:59:55,483\nlog 'em back on.\n\n1213\n00:59:55,483 --> 00:59:56,510\nNow you can actually push it out.\n\n1214\n00:59:56,510 --> 01:00:01,409\nSo we will check and see back into C:.\n\n1215\n01:00:01,409 --> 01:00:04,010\nI mean, sorry not C: it's in that share.\n\n1216\n01:00:04,010 --> 01:00:06,361\nServer one, corp data.\n\n1217\n01:00:06,361 --> 01:00:11,020\nAnd if I go to information technology,\n\n1218\n01:00:11,020 --> 01:00:17,666\nI just updated my policy, and\nI get my special message.\n\n1219\n01:00:17,666 --> 01:00:20,300\n>> A special message for you.\n\n1220\n01:00:20,300 --> 01:00:22,040\n>> I know right, no soup for me at all.\n\n1221\n01:00:22,040 --> 01:00:23,880\nThat's all right.\n\n1222\n01:00:23,880 --> 01:00:26,830\nLet's just check and\nsee here if their policy is kicking in.\n\n1223\n01:00:28,270 --> 01:00:31,120\n>> Yeah, it might be that this\nclient computer isn't in the OU or\n\n1224\n01:00:31,120 --> 01:00:32,930\nthat policy was created.\n\n1225\n01:00:32,930 --> 01:00:34,880\nOr it might be that we\njust haven't received it.\n\n1226\n01:00:34,880 --> 01:00:37,470\nRemember when you modify a GPO if you\nhave more than one domain controller it's\n\n1227\n01:00:37,470 --> 01:00:38,080\ngotta replicate out.\n\n1228\n01:00:38,080 --> 01:00:39,804\nSo there's all sorts of things\nthat can affect that policy\n\n1229\n01:00:39,804 --> 01:00:41,441\n>> And I've seen this thing take ESE.\n\n1230\n01:00:41,441 --> 01:00:42,729\nThat's user settings.\n\n1231\n01:00:42,729 --> 01:00:46,200\nI'm logged on as Peter.\n\n1232\n01:00:46,200 --> 01:00:47,130\nLet's just reboot the computer.\n\n1233\n01:00:47,130 --> 01:00:49,940\nThat'll make sure that kicks in\nbecause Peter's not an admin.\n\n1234\n01:00:49,940 --> 01:00:51,698\n>> And we were refreshing policy and\n\n1235\n01:00:51,698 --> 01:00:54,220\nit might not have have\nhit the computer policy.\n\n1236\n01:00:54,220 --> 01:00:57,250\nSo we'll refresh that real quick.\n\n1237\n01:00:57,250 --> 01:00:59,620\nAnd while that's doing that,\nI'm gonna flip back over to the DC and\n\n1238\n01:00:59,620 --> 01:01:00,590\njust double check.\n\n1239\n01:01:00,590 --> 01:01:05,021\nI've got that link to\nthe client computer's OU, and\n\n1240\n01:01:05,021 --> 01:01:08,967\nif I take a peek over here,\nand look at Contoso,\n\n1241\n01:01:11,706 --> 01:01:16,856\nClient computers,\nI do not see it in there.\n\n1242\n01:01:16,856 --> 01:01:17,807\n>> You've got a filter on.\n\n1243\n01:01:17,807 --> 01:01:18,620\n>> Oh, do I?\n\n1244\n01:01:18,620 --> 01:01:20,838\n>> A filter called main or\nman or something\n\n1245\n01:01:20,838 --> 01:01:23,210\n>> There we go.\n\n1246\n01:01:23,210 --> 01:01:25,250\nSo client one is in there,\nso we're good to go there,\n\n1247\n01:01:25,250 --> 01:01:28,410\nshould be linked just fine, reboot it.\n\n1248\n01:01:28,410 --> 01:01:28,940\nGet back in here.\n\n1249\n01:01:28,940 --> 01:01:36,300\n>> There's that tutorial.\n\n1250\n01:01:36,300 --> 01:01:39,100\nGood luck getting rid of that.\n\n1251\n01:01:39,100 --> 01:01:40,145\nAnd it actually went away for you.\n\n1252\n01:01:40,145 --> 01:01:40,760\nHow did you do that?\n\n1253\n01:01:40,760 --> 01:01:43,590\n>> You gotta get way up\nin that corner up there.\n\n1254\n01:01:43,590 --> 01:01:44,090\nI don't know.\n\n1255\n01:01:46,920 --> 01:01:48,827\nAll right.\nLet's see, this time it should work.\n\n1256\n01:01:53,974 --> 01:01:59,483\n[SOUND] Get my mouse to play along.\n\n1257\n01:02:02,624 --> 01:02:03,152\nHm.\n>> It's thinking.\n\n1258\n01:02:03,152 --> 01:02:04,052\n>> Yeah.\n\n1259\n01:02:04,052 --> 01:02:04,650\n>> That's different.\n\n1260\n01:02:04,650 --> 01:02:07,482\n>> Now it's locked up completely.\n\n1261\n01:02:07,482 --> 01:02:08,319\nI can't double-click.\n\n1262\n01:02:08,319 --> 01:02:10,298\nWhy is it not giving me my message?\n\n1263\n01:02:10,298 --> 01:02:11,970\nInteresting.\n\n1264\n01:02:11,970 --> 01:02:15,290\n[SOUND] All right.\n\n1265\n01:02:15,290 --> 01:02:16,857\nWell, I'll have to take a peek.\n\n1266\n01:02:16,857 --> 01:02:19,858\nTell you what,\nI'll take a look at that here in a second,\n\n1267\n01:02:19,858 --> 01:02:22,190\nwe're going to be heading back over there.\n\n1268\n01:02:22,190 --> 01:02:26,802\nI can think of why that\nmight not be working.\n\n1269\n01:02:29,698 --> 01:02:34,831\nLet's do this, let's double check my\npolicy real quick, we'll troubleshoot it,\n\n1270\n01:02:34,831 --> 01:02:44,048\nand if it doesn't work we'll move on into,\nThe next one, but my policy is set.\n\n1271\n01:02:44,048 --> 01:02:49,017\nAdministrative Templates > System\n> Access Denied Assistance,\n\n1272\n01:02:49,017 --> 01:02:51,906\nand both of those are enabled, right.\n\n1273\n01:02:51,906 --> 01:02:56,078\nCustomize message.\n\n1274\n01:02:56,078 --> 01:02:57,904\nEnabled.\n\n1275\n01:02:57,904 --> 01:03:01,272\nAnd that is turned on as well.\n\n1276\n01:03:05,294 --> 01:03:06,281\nAll right, so that looks good.\n\n1277\n01:03:06,281 --> 01:03:11,848\nThere's nothing else I need to turn on\nthat I can think of to enable that,\n\n1278\n01:03:11,848 --> 01:03:17,070\nso we'll give it a minute and\nwe'll see what happens here.\n\n1279\n01:03:17,070 --> 01:03:20,370\nIt might just be a little\nslow in kicking in.\n\n1280\n01:03:20,370 --> 01:03:23,900\nThe policy is being applied.\n\n1281\n01:03:23,900 --> 01:03:27,770\nLet me log on as\nan administrator real quick and\n\n1282\n01:03:27,770 --> 01:03:29,890\njust double check that\nthat policy is kicking in.\n\n1283\n01:03:29,890 --> 01:03:32,882\nIf I have a connectivity issue\nwith the domain controller and\n\n1284\n01:03:32,882 --> 01:03:37,179\nit's not downloading the policy that would\nprevent everything from working as well.\n\n1285\n01:03:48,292 --> 01:03:51,371\n>> While he's setting that,\none thing worth mentioned, we checked out\n\n1286\n01:03:51,371 --> 01:03:54,570\nthese options that said send an email\nto this This person or that person.\n\n1287\n01:03:54,570 --> 01:03:56,000\nHow does that email get generated?\n\n1288\n01:03:56,000 --> 01:03:59,761\nWell, email addresses have to be stored\nin the Active Directory in order for\n\n1289\n01:03:59,761 --> 01:04:02,130\nit to work,\notherwise it's not going to work.\n\n1290\n01:04:02,130 --> 01:04:04,620\nIf you're using Microsoft Exchange,\nthen you're fine.\n\n1291\n01:04:04,620 --> 01:04:05,722\nAll your email credentials and\n\n1292\n01:04:05,722 --> 01:04:09,050\nall that information is stored in the\nActive Airectory, and you're in business.\n\n1293\n01:04:09,050 --> 01:04:11,830\nSo, it's just looking at the user account\nthat's the owner of that folder, or\n\n1294\n01:04:11,830 --> 01:04:13,890\nuser account that's in\nthe administrator's group, and\n\n1295\n01:04:13,890 --> 01:04:16,040\nit's pulling the email address from them.\n\n1296\n01:04:16,040 --> 01:04:19,510\nIf you have a third party mail\nserver that's not integrated with\n\n1297\n01:04:19,510 --> 01:04:23,360\nthe Active Directory, then that email\nfunctionality is not going to work.\n\n1298\n01:04:23,360 --> 01:04:24,620\nIt's gonna try and generate or\npull that address,\n\n1299\n01:04:24,620 --> 01:04:27,770\nbut the address is not gonna\nbe correct in the system.\n\n1300\n01:04:27,770 --> 01:04:29,510\nSo be aware of that.\n\n1301\n01:04:29,510 --> 01:04:32,643\nThe on-screen notification,\nthat's pretty much a guarantee to work.\n\n1302\n01:04:32,643 --> 01:04:33,681\nAlthough it's not working here.\n\n1303\n01:04:33,681 --> 01:04:34,342\n>> Yeah, right.\n\n1304\n01:04:34,342 --> 01:04:36,453\n>> [LAUGH] The email one,\non the other hand,\n\n1305\n01:04:36,453 --> 01:04:39,010\ndoes require some\nadditional infrastructure.\n\n1306\n01:04:39,010 --> 01:04:42,901\nReally they want you to have Microsoft\nExchange for that to truly function.\n\n1307\n01:04:42,901 --> 01:04:44,910\n>> That is strange.\n\n1308\n01:04:44,910 --> 01:04:48,410\n>> And then the event log, when you\napply that, that one always works so.\n\n1309\n01:04:48,410 --> 01:04:50,082\n>> All right, well I'll have to take a,\nI don't know,\n\n1310\n01:04:50,082 --> 01:04:52,100\nI'll have to do a little more\ndigging on our break or something.\n\n1311\n01:04:52,100 --> 01:04:54,630\nI don't know why that's not,\nit's really not that difficult to setup,\n\n1312\n01:04:54,630 --> 01:04:56,190\nalthough I'm having a little difficulty.\n\n1313\n01:04:56,190 --> 01:04:59,180\nNow there's those two settings\nyou have to configure.\n\n1314\n01:04:59,180 --> 01:05:02,500\nAnd that's pretty much it,\nand refresh your policy.\n\n1315\n01:05:03,730 --> 01:05:07,650\nSo, I'll try to figure that out.\n\n1316\n01:05:07,650 --> 01:05:10,620\n>> Can you check one thing for me, Mike?\n\n1317\n01:05:10,620 --> 01:05:13,170\nOn server one,\nthat's where the FileShare is?\n\n1318\n01:05:13,170 --> 01:05:14,300\n>> Correct.\n\n1319\n01:05:14,300 --> 01:05:18,376\n>> Go into, here in your, let's see,\n\n1320\n01:05:18,376 --> 01:05:22,060\nin your FSRM, go into your FSRM.\n\n1321\n01:05:28,422 --> 01:05:31,951\nAnd, let's see, buried in here,\nthere's another little setting in here,\n\n1322\n01:05:31,951 --> 01:05:33,879\nwhere you can see the access denied stuff.\n\n1323\n01:05:33,879 --> 01:05:36,702\nAnd it is, let's see where is it?\n\n1324\n01:05:36,702 --> 01:05:39,628\nRight-click where it says FSRM and\nchoose Configure Options.\n\n1325\n01:05:39,628 --> 01:05:45,430\nAnd go to the Access Denied Assistance\ntab up there and,\n\n1326\n01:05:45,430 --> 01:05:48,649\nsee how it's disabled there?\n\n1327\n01:05:48,649 --> 01:05:50,360\n>> Not turned on, interesting.\n\n1328\n01:05:50,360 --> 01:05:53,910\n>> I've seen this before, it's weird cuz\nyou turned it on in the policy, but for\n\n1329\n01:05:53,910 --> 01:05:56,620\nsome reason the Server\ndoesn't know to enable it.\n\n1330\n01:05:56,620 --> 01:05:59,060\nAnd so, you'll also see in\nyour configure email request,\n\n1331\n01:05:59,060 --> 01:06:01,820\nthat's what made me think about this,\ncuz I was talking about the email side.\n\n1332\n01:06:01,820 --> 01:06:04,640\n>> And here's where you can come in and\nenable that request assistance,\n\n1333\n01:06:04,640 --> 01:06:07,890\nand it's really some of the same\ninformation we saw in the policy.\n\n1334\n01:06:07,890 --> 01:06:11,195\nSo, this kind of shows that\nmaybe the policy here on Server\n\n1335\n01:06:11,195 --> 01:06:12,730\n1 just hasn't updated.\n\n1336\n01:06:12,730 --> 01:06:15,330\nSo, go ahead and just manually set it,\nsince we're in here now.\n\n1337\n01:06:15,330 --> 01:06:16,785\nIf you can get to the OK button.\n\n1338\n01:06:16,785 --> 01:06:20,340\n[LAUGH]\n>> If I can get to the OK button.\n\n1339\n01:06:20,340 --> 01:06:21,880\n>> It's just off the bottom main screen.\n\n1340\n01:06:21,880 --> 01:06:22,630\n>> All right.\n\n1341\n01:06:22,630 --> 01:06:24,710\nThis is one of the battles that we have.\n\n1342\n01:06:24,710 --> 01:06:28,430\nIs, to make the text readable on the\nscreen, we have to increase our font size.\n\n1343\n01:06:28,430 --> 01:06:30,970\nAnd sometimes when we do that,\nwe can't see the OK button.\n\n1344\n01:06:30,970 --> 01:06:32,830\n>> I can't get to it at all, that's nice.\n\n1345\n01:06:32,830 --> 01:06:35,480\n>> You could just try and Tab to it.\n\n1346\n01:06:37,929 --> 01:06:39,811\nOr not [LAUGH].\n\n1347\n01:06:39,811 --> 01:06:42,528\n>> Oh, I'm in the, sorry [LAUGH].\n\n1348\n01:06:42,528 --> 01:06:48,309\nLet's click here and\nsee if I can Tab out, Good Golly.\n\n1349\n01:06:48,309 --> 01:06:48,983\nThere we go.\n\n1350\n01:06:53,347 --> 01:06:54,160\n>> Or not.\n\n1351\n01:06:54,160 --> 01:06:55,285\nThat's too funny.\n\n1352\n01:06:55,285 --> 01:06:56,541\nYeah, it's just tabbing on the message.\n\n1353\n01:06:56,541 --> 01:06:57,318\n>> All right, well.\n\n1354\n01:06:57,318 --> 01:07:01,382\nLet's see,\nI can change my resolution real quick.\n\n1355\n01:07:01,382 --> 01:07:03,471\nGood golly.\n\n1356\n01:07:03,471 --> 01:07:04,608\nThe fun we have, right?\n\n1357\n01:07:04,608 --> 01:07:08,029\n>> So, you know, eventually the policy\nwill apply to this machine and\n\n1358\n01:07:08,029 --> 01:07:09,359\nthe setting will turn on.\n\n1359\n01:07:09,359 --> 01:07:11,812\nWe're just gonna manually set it,\nso that it'll be on.\n\n1360\n01:07:14,042 --> 01:07:16,062\n>> This is gonna make it a little\nbit tight for you guys to see.\n\n1361\n01:07:23,854 --> 01:07:26,415\nAll right, now,\nwe'll try to go back in, and\n\n1362\n01:07:26,415 --> 01:07:30,372\nthen we get to scroll to get to our\ntask bar, so, oh, always love that.\n\n1363\n01:07:31,570 --> 01:07:33,333\n>> It's auto hiding.\n\n1364\n01:07:33,333 --> 01:07:34,907\n>> And it's locked up on me.\n\n1365\n01:07:37,764 --> 01:07:38,901\nAll right, so we'll try that again.\n\n1366\n01:07:41,362 --> 01:07:44,059\nRight-click and Configure Options.\n\n1367\n01:07:45,570 --> 01:07:49,667\nAnd Access Denied Assistance, and\nwe'll turn that bad boy on, and click OK.\n\n1368\n01:07:52,571 --> 01:07:55,745\nAnd we'll,\nlet's update policy on this guy as well,\n\n1369\n01:07:55,745 --> 01:07:57,890\nwhile we're here just for giggles.\n\n1370\n01:08:09,489 --> 01:08:10,731\nAnd we'll give it a whirl.\n\n1371\n01:08:10,731 --> 01:08:11,671\nLet's see what happens.\n\n1372\n01:08:15,648 --> 01:08:16,739\n>> Yeah, hopefully that will knock it out.\n\n1373\n01:08:16,739 --> 01:08:19,470\nAgain, we shouldn't\nhave to have done that.\n\n1374\n01:08:19,470 --> 01:08:21,840\nAnd probably just our impatience,\nif we'd waited long enough,\n\n1375\n01:08:21,840 --> 01:08:22,910\nthe policy would have applied.\n\n1376\n01:08:22,910 --> 01:08:24,856\nBut we'll see if the client picks that up,\n\n1377\n01:08:24,856 --> 01:08:26,974\nI don't think you have to log out for\nthis one.\n\n1378\n01:08:26,974 --> 01:08:28,413\nI guess we'll find out right here,\nwon't we?\n\n1379\n01:08:28,413 --> 01:08:31,235\n>> Should not, yeah.\n\n1380\n01:08:31,235 --> 01:08:33,128\nI know, I do that every time,\nI never get to the C drive.\n\n1381\n01:08:33,128 --> 01:08:34,591\nI'm like, it's not there, Mike.\n\n1382\n01:08:34,591 --> 01:08:38,075\n>> Maybe the files have\nmagically appeared local now.\n\n1383\n01:08:38,075 --> 01:08:40,283\n>> There it is.\nThere we go.\n\n1384\n01:08:40,283 --> 01:08:42,890\nHad we waited long enough,\nthat would have been there.\n\n1385\n01:08:42,890 --> 01:08:44,432\nBut notice how this error message,\n\n1386\n01:08:44,432 --> 01:08:46,850\nand I know it's a little hard to read\ncuz we just bumped the font size,\n\n1387\n01:08:46,850 --> 01:08:51,090\nbut it says right there, the message that\nMike typed in, no soup for you, right?\n\n1388\n01:08:51,090 --> 01:08:55,570\nSo now, it's whatever message we want to\nappear, which can include the phone number\n\n1389\n01:08:55,570 --> 01:08:59,480\nfor your help desk, or whatever,\nsomething considerably more useful.\n\n1390\n01:08:59,480 --> 01:09:01,490\nThere's that Request Assistance button,\n\n1391\n01:09:01,490 --> 01:09:04,500\nbecause Mike enabled\nthe ability to do email.\n\n1392\n01:09:04,500 --> 01:09:06,310\nThey don't know, necessarily,\nthat this is an email.\n\n1393\n01:09:06,310 --> 01:09:08,760\nThey just see they type in a message and\nhit Send Message, right?\n\n1394\n01:09:08,760 --> 01:09:10,300\n>> Right.\n>> But it's generating an email\n\n1395\n01:09:10,300 --> 01:09:12,910\nto those contacts as they're\nstored in the Active Directory.\n\n1396\n01:09:12,910 --> 01:09:15,360\nSo they can say, hey, my name is Bob.\n\n1397\n01:09:15,360 --> 01:09:17,077\nI was trying to access this folder.\n\n1398\n01:09:17,077 --> 01:09:17,835\nWhat's up?\n\n1399\n01:09:17,835 --> 01:09:18,715\nAnd they can send it.\n\n1400\n01:09:18,715 --> 01:09:19,885\n>> I know you guys can't see this.\n\n1401\n01:09:19,885 --> 01:09:21,325\nI'll say, this is Mike.\n\n1402\n01:09:23,015 --> 01:09:23,895\n>> Give me access.\n\n1403\n01:09:23,895 --> 01:09:25,137\n>> I like soup.\n\n1404\n01:09:25,137 --> 01:09:28,985\n[LAUGH]\nAll right, so whatever they wanna put.\n\n1405\n01:09:28,985 --> 01:09:31,440\nYeah, and we can't send it, cuz we\ndon't have an exchange server setup or\n\n1406\n01:09:31,440 --> 01:09:32,080\nanything like that.\n\n1407\n01:09:32,080 --> 01:09:34,740\nSo, yep, very, very cool stuff.\n\n1408\n01:09:34,740 --> 01:09:39,760\nAnd it gives, at least it gives the user a\nchance to say, well should I have access?\n\n1409\n01:09:39,760 --> 01:09:42,700\nAnd it's a way we can delegate\nsome of that out, right?\n\n1410\n01:09:42,700 --> 01:09:44,800\nCuz we're deciding who that email goes to.\n\n1411\n01:09:44,800 --> 01:09:49,780\nSo, if I delegate to Bob down in\ninformation technology, permissions\n\n1412\n01:09:49,780 --> 01:09:53,410\nover that folder, so he's full control,\nhe can change the access control list.\n\n1413\n01:09:53,410 --> 01:09:55,110\nThen I can send him the email.\n\n1414\n01:09:55,110 --> 01:09:57,700\nLet him decide whether or\nnot that user should have access, and\n\n1415\n01:09:57,700 --> 01:09:59,520\nhe can go modify the access control list.\n\n1416\n01:09:59,520 --> 01:10:00,020\n>> Yeah.\n\n1417\n01:10:00,020 --> 01:10:03,600\n>> Or I could delegate him control if\nit's a dynamic access control issue,\n\n1418\n01:10:03,600 --> 01:10:05,200\nhe could go in there and change that.\n\n1419\n01:10:05,200 --> 01:10:06,950\nYep, definitely cool stuff.\n\n1420\n01:10:06,950 --> 01:10:11,320\nSo, that's the access denied assistance,\npretty cool, nice to use.\n\n1421\n01:10:11,320 --> 01:10:12,621\nWe doing one other thing to cover,\nright Mike?\n\n1422\n01:10:12,621 --> 01:10:13,701\nWhat was the last thing on our list?\n\n1423\n01:10:13,701 --> 01:10:15,292\n>> We're gonna make some\nchanges to a policy.\n\n1424\n01:10:15,292 --> 01:10:20,390\nAnd then we are going to\nstage some permissions.\n\n1425\n01:10:20,390 --> 01:10:21,120\nSo what have we got?\n\n1426\n01:10:21,120 --> 01:10:22,680\nWe have a few minutes here.\n\n1427\n01:10:22,680 --> 01:10:26,890\nSo let's do this, let's go over to,\nback into the Administrative Center.\n\n1428\n01:10:26,890 --> 01:10:28,937\nAnd I'm gonna come take a look\nat that rule that we've got.\n\n1429\n01:10:28,937 --> 01:10:32,663\nBecause over time, your policies, your\nneeds are gonna change, things like that,\n\n1430\n01:10:32,663 --> 01:10:34,591\nso you need to be able\nto update these rules.\n\n1431\n01:10:34,591 --> 01:10:37,731\nWhich is just a matter of going in,\npulling up the rules properties,\n\n1432\n01:10:37,731 --> 01:10:39,908\nhere's the one we set up for\nDepartment Match.\n\n1433\n01:10:39,908 --> 01:10:46,862\nAnd I'm gonna go down to my Permissions,\nand click Edit.\n\n1434\n01:10:46,862 --> 01:10:48,500\nAnd I'm going to find that,\n\n1435\n01:10:48,500 --> 01:10:53,185\nthe one we used earlier where we had to\nmake the department and the country match.\n\n1436\n01:10:53,185 --> 01:10:56,552\nAnd I'm gonna click Edit.\n\n1437\n01:10:56,552 --> 01:10:57,876\nI'll click edit one more time.\n\n1438\n01:10:57,876 --> 01:11:00,141\n>> [LAUGH] One of these days it works.\n\n1439\n01:11:00,141 --> 01:11:01,777\n>> One of them, yeah,\nit will actually kick in.\n\n1440\n01:11:01,777 --> 01:11:03,356\nAnd I'm gonna add a condition.\n\n1441\n01:11:03,356 --> 01:11:10,602\nAnd I'm gonna say,\nAnd>Device>Group>Member of each>Value.\n\n1442\n01:11:10,602 --> 01:11:13,899\nAnd there's nothing going to be in this\nlist at first, so you click, Add Items.\n\n1443\n01:11:13,899 --> 01:11:18,391\nAnd I can find, in this case I'm looking\nfor just a normal security group out of\n\n1444\n01:11:18,391 --> 01:11:22,699\nActive Directory, and I've got one\ncalled the Manager's Workstation.\n\n1445\n01:11:22,699 --> 01:11:25,905\nAnd I've added Client 1 to\nthe Manager's Workstation, but\n\n1446\n01:11:25,905 --> 01:11:29,510\nI did not add Client 2 to\nthe Manager's Workstation group.\n\n1447\n01:11:29,510 --> 01:11:34,165\nSo now in addition to your country and\ndepartment having to match the resource,\n\n1448\n01:11:34,165 --> 01:11:38,000\nyou're gonna have to be coming\nfrom a specific set of computers.\n\n1449\n01:11:38,000 --> 01:11:41,689\nLike I was saying at the beginning of the\nshow, I don't want my manager going down\n\n1450\n01:11:41,689 --> 01:11:43,913\nto Fred's workstation\ndown on the sales floor,\n\n1451\n01:11:43,913 --> 01:11:47,603\naccessing these sensitive resources,\nand maybe leaving that open, or letting\n\n1452\n01:11:47,603 --> 01:11:51,700\nsomeone down there see it or anything\nlike that, or when they're remote.\n\n1453\n01:11:51,700 --> 01:11:55,333\nSo, I'll go ahead and\nimplement this if I can.\n\n1454\n01:11:55,333 --> 01:11:58,875\nI'm going to click OK and okay.\n\n1455\n01:11:58,875 --> 01:12:04,250\nAll right, so\nnow I've just made a change to my rule.\n\n1456\n01:12:04,250 --> 01:12:06,758\nAll right,\nwhich is being deployed by group policy.\n\n1457\n01:12:06,758 --> 01:12:09,895\nSo what I'm gonna do is I'm gonna\nto go back over to Server 1 and\n\n1458\n01:12:09,895 --> 01:12:11,505\nI'm gonna update that policy.\n\n1459\n01:12:15,202 --> 01:12:20,403\nSo it pulls that policy down and sees\nthose changes we've made to that policy.\n\n1460\n01:12:20,403 --> 01:12:21,877\nAnd then we'll try it out.\n\n1461\n01:12:24,605 --> 01:12:26,144\nSee if one of these\nworks on the first try.\n\n1462\n01:12:26,144 --> 01:12:30,240\n>> [LAUGH]\n>> All right, so\n\n1463\n01:12:30,240 --> 01:12:34,010\nthere's my policy's been refreshed,\nso I'm gonna go over to Client 1.\n\n1464\n01:12:34,010 --> 01:12:37,450\nI don't need really to refresh anything\nhere, I didn't change anything.\n\n1465\n01:12:37,450 --> 01:12:40,990\nThe computer was already in that group\nthis morning before we started the episode\n\n1466\n01:12:40,990 --> 01:12:44,300\nso its access token should include that.\n\n1467\n01:12:44,300 --> 01:12:45,887\n>> Yeah,\nnow if we had just done it though,\n\n1468\n01:12:45,887 --> 01:12:48,925\nif we had just added this client to that\ngroup, you would have to reboot before\n\n1469\n01:12:48,925 --> 01:12:51,721\nthe client sees that it's in that\nnew group, so just be aware of that.\n\n1470\n01:12:51,721 --> 01:12:55,222\n>> So now if I go into Finance.\n\n1471\n01:13:00,533 --> 01:13:02,530\nAnd now I'm getting denied\naccess on everything.\n\n1472\n01:13:02,530 --> 01:13:06,408\n>> And you are, you're Peter, so you're-\n>> I'm Peter and Peter's in Finance.\n\n1473\n01:13:06,408 --> 01:13:08,010\n>> You're in the US, you're in Finance.\n\n1474\n01:13:08,010 --> 01:13:08,759\n>> Spellcheck.\n\n1475\n01:13:08,759 --> 01:13:10,692\n>> So, it thinks that your\ncomputer is not in that group.\n\n1476\n01:13:10,692 --> 01:13:13,320\n>> Yeah,\nlet's reboot this machine one more time.\n\n1477\n01:13:13,320 --> 01:13:15,100\nI know I've just rebooted him.\n\n1478\n01:13:15,100 --> 01:13:18,220\n>> And while you're rebooting it, we can\njump back over to the other server and\n\n1479\n01:13:18,220 --> 01:13:20,590\nlook at the effective\npermissions to see whether or\n\n1480\n01:13:20,590 --> 01:13:22,270\nnot he should have been granted access.\n\n1481\n01:13:22,270 --> 01:13:24,180\nAnd that's a quick way to\nfind out whether or not,\n\n1482\n01:13:24,180 --> 01:13:27,459\nmaybe we didn't add it to that group\nwhen we think we did or whatever.\n\n1483\n01:13:34,460 --> 01:13:36,730\nAll right.\nIt just-\n\n1484\n01:13:36,730 --> 01:13:37,250\n>> Oh it still.\n\n1485\n01:13:37,250 --> 01:13:37,990\n>> I can't even see that.\n\n1486\n01:13:37,990 --> 01:13:41,560\n>> You change the resolution so\nnow the start menu is off the bottom and\n\n1487\n01:13:41,560 --> 01:13:42,250\nall that good stuff.\n\n1488\n01:13:42,250 --> 01:13:44,840\nI think you have the start menu\nauto hiding too, don't you?\n\n1489\n01:13:44,840 --> 01:13:47,520\n>> I do.\nI'm gonna close this thing.\n\n1490\n01:13:47,520 --> 01:13:48,020\nIf I can.\n\n1491\n01:13:49,240 --> 01:13:51,370\nOh man.\n\n1492\n01:13:51,370 --> 01:13:55,580\n>> You should probably just put the screen\nresolution back to what it was-\n\n1493\n01:13:55,580 --> 01:13:56,184\n>> Yeah, for sure.\n\n1494\n01:13:56,184 --> 01:13:57,955\n>> That way you don't have to fight\nthat the rest of the episode.\n\n1495\n01:13:57,955 --> 01:14:01,681\n>> What did we have that on 14 by 9.\n\n1496\n01:14:01,681 --> 01:14:03,336\n>> I think it was 13 66.\n\n1497\n01:14:03,336 --> 01:14:05,059\nOh, was it 1440 by 900.\n\n1498\n01:14:05,059 --> 01:14:07,196\n>> Hm, I'll try that one.\n\n1499\n01:14:07,196 --> 01:14:08,112\nI think that's what I had it on.\n\n1500\n01:14:12,882 --> 01:14:13,991\nCome on, little guy.\n\n1501\n01:14:13,991 --> 01:14:16,780\n>> [LAUGH]\n>> There we go, all right, so\n\n1502\n01:14:16,780 --> 01:14:20,840\nlet's see what we've got here, we'll go\ntake a look at our effective access and\n\n1503\n01:14:20,840 --> 01:14:23,160\nsee if that policy is kicking\nin like it's supposed to.\n\n1504\n01:14:23,160 --> 01:14:26,760\nSo I'm gonna go to Finance and\npull up Properties.\n\n1505\n01:14:26,760 --> 01:14:30,150\nHead over to that Security tab and\nclick Advance.\n\n1506\n01:14:30,150 --> 01:14:32,460\nAnd then go to the effective access.\n\n1507\n01:14:32,460 --> 01:14:34,160\nMake sure that's still,\nthat's still in effect.\n\n1508\n01:14:34,160 --> 01:14:34,990\nAll right.\n\n1509\n01:14:34,990 --> 01:14:35,900\nSo I'm gonna say Peter.\n\n1510\n01:14:38,470 --> 01:14:43,270\nAnd device is going to be, what was it?\n\n1511\n01:14:43,270 --> 01:14:43,847\nClient 1.\n\n1512\n01:14:43,847 --> 01:14:44,347\n>> Mm-hm.\n\n1513\n01:14:47,077 --> 01:14:49,280\n>> And I'm gonna add him to a group,\n\n1514\n01:14:49,280 --> 01:14:53,549\nI'm gonna say he's a member of\nthe manager workstation group.\n\n1515\n01:14:53,549 --> 01:14:57,762\nMake sure that's in there, and\n\n1516\n01:14:57,762 --> 01:15:02,756\nwe'll say, give a claim of country,\n\n1517\n01:15:02,756 --> 01:15:08,230\nUS, and department is gonna be Finance.\n\n1518\n01:15:09,760 --> 01:15:12,370\n>> So these are the things\nthat we're hitting off of.\n\n1519\n01:15:12,370 --> 01:15:15,140\nThe user name we're actually really not\neven hitting off of that because we said\n\n1520\n01:15:15,140 --> 01:15:19,240\nall authenticated users have full\ncontrol but, he's on client 1,\n\n1521\n01:15:19,240 --> 01:15:23,820\nwhich is in the manager workstation\ngroup and he's in the US and Finance.\n\n1522\n01:15:23,820 --> 01:15:25,160\nAnd, sure enough we get success.\n\n1523\n01:15:25,160 --> 01:15:26,460\nHe should be getting full control.\n\n1524\n01:15:26,460 --> 01:15:29,040\n>> Now, if I change computers.\n\n1525\n01:15:29,040 --> 01:15:30,654\nLet's say he moves to client 2.\n\n1526\n01:15:37,663 --> 01:15:39,201\nAnd view as effective access.\n\n1527\n01:15:39,201 --> 01:15:40,930\n>> Now, he still has it and\n\n1528\n01:15:40,930 --> 01:15:46,440\nthe reason is you've got Client\n2 is including group membership.\n\n1529\n01:15:46,440 --> 01:15:50,570\nSo we're saying what if Client 2 was in\nthe Manager Workstation group right, so\n\n1530\n01:15:50,570 --> 01:15:53,780\nyeah, so we need to remove that piece\ncuz Client 2 is not in that group.\n\n1531\n01:15:53,780 --> 01:15:56,040\nSo if you were to move\nover to Client 2 though\n\n1532\n01:15:57,250 --> 01:16:00,180\nnow it's not in the Manager Workstation\ngroup, and he's been denied access.\n\n1533\n01:16:00,180 --> 01:16:05,080\nSo this way we can verify we know our\nsettings are right, so the fact that it\n\n1534\n01:16:05,080 --> 01:16:08,270\ndidn't work just lets us know the policy\nhasn't updated on that machine yet.\n\n1535\n01:16:08,270 --> 01:16:10,590\nIt goes back to the whole patience thing.\n\n1536\n01:16:10,590 --> 01:16:15,110\nIn real life land, you have days,\nweeks to apply this stuff, implement it,\n\n1537\n01:16:15,110 --> 01:16:17,540\nlet it sit overnight, and\nso this isn't an issue.\n\n1538\n01:16:17,540 --> 01:16:20,140\nBut when you're working in a lab\nenvironment, when you're practicing,\n\n1539\n01:16:20,140 --> 01:16:21,530\nwhen you're hosting an IT show.\n\n1540\n01:16:21,530 --> 01:16:23,220\n>> Yeah.\n>> Then it's easy to try to\n\n1541\n01:16:23,220 --> 01:16:27,220\nimplement rapid change and it just takes\ntime for the system to get caught up.\n\n1542\n01:16:27,220 --> 01:16:28,280\n>> I wanted it to hit right now.\n\n1543\n01:16:28,280 --> 01:16:28,925\nI don't understand.\n\n1544\n01:16:28,925 --> 01:16:32,250\n>> [LAUGH] Well our client rebooted,\nso he should have access now.\n\n1545\n01:16:32,250 --> 01:16:33,810\n>> Let's see what happens here.\n\n1546\n01:16:36,160 --> 01:16:40,240\nAnd so we expect to have that access\nbecause Client 1 is in that group,\n\n1547\n01:16:40,240 --> 01:16:42,830\nits token should be updated so\nthey can login.\n\n1548\n01:16:42,830 --> 01:16:46,320\nNow we're restricting by\nwhat country they're in,\n\n1549\n01:16:46,320 --> 01:16:50,130\nwhat department they're on,\nand what client.\n\n1550\n01:16:50,130 --> 01:16:50,910\nWhat work station,\n\n1551\n01:16:50,910 --> 01:16:54,550\nthey're actually sitting at to\ncontrol that access to this folder.\n\n1552\n01:16:54,550 --> 01:16:55,270\nAnd there we go.\n\n1553\n01:16:55,270 --> 01:16:57,580\n>> Now he's got access, exactly.\n\n1554\n01:16:57,580 --> 01:16:59,930\nAnd if I was to go to log him\nin we might as well try it, huh?\n\n1555\n01:16:59,930 --> 01:17:01,800\n>> Well it could take forever for\nhis profile to load up.\n\n1556\n01:17:01,800 --> 01:17:02,940\n>> I already logged him in.\n\n1557\n01:17:02,940 --> 01:17:03,470\n>> Oh good, okay.\n\n1558\n01:17:03,470 --> 01:17:07,180\n>> Yeah, I was like,\nlet me get that out of the way.\n\n1559\n01:17:07,180 --> 01:17:09,760\nBut I haven't rebooted him since\nwe implemented that new policy.\n\n1560\n01:17:09,760 --> 01:17:11,160\nAnd we'll see, there we go again.\n\n1561\n01:17:11,160 --> 01:17:11,660\nThe C drive.\n\n1562\n01:17:13,100 --> 01:17:15,650\n>> Maybe one of these days your network\nshields will be under the C drive.\n\n1563\n01:17:15,650 --> 01:17:18,076\n>> Yeah, that's where I'm going\nto tell Microsoft to put them.\n\n1564\n01:17:18,076 --> 01:17:20,750\n>> [LAUGH] You know, it's because\nthey ask for our feedback so often.\n\n1565\n01:17:20,750 --> 01:17:23,150\n>> Yes, they definitely listen, right.\n\n1566\n01:17:23,150 --> 01:17:24,550\nAnd there's my access denied.\n\n1567\n01:17:24,550 --> 01:17:27,100\nSo now it finally kicked in and\neverything's working right.\n\n1568\n01:17:27,100 --> 01:17:28,340\n>> Perfect.\n\n1569\n01:17:28,340 --> 01:17:30,160\n>> So yeah,\nvery cool stuff that we can do.\n\n1570\n01:17:30,160 --> 01:17:34,920\nAll right, last thing we've got to do\nbefore we call it is we need to take\n\n1571\n01:17:34,920 --> 01:17:38,760\na look at staging permissions, because\nthey'll get you on this one as well.\n\n1572\n01:17:38,760 --> 01:17:42,450\nSo what we're gonna do, like I said\nat the beginning of the episode,\n\n1573\n01:17:42,450 --> 01:17:44,820\nyou wanna be careful cuz if you\ngoof up one of these policies,\n\n1574\n01:17:44,820 --> 01:17:48,730\nthis policy could be implemented across\nseveral file servers in your organization\n\n1575\n01:17:48,730 --> 01:17:52,350\nand be controlling access to lots and\nlots of resources.\n\n1576\n01:17:52,350 --> 01:17:56,380\nSo if you goof this up, you could\nhave the entire company calling you,\n\n1577\n01:17:56,380 --> 01:17:57,610\ngoing what is going on, you know?\n\n1578\n01:17:57,610 --> 01:18:01,000\nOr shut something down and\ncost your company business.\n\n1579\n01:18:01,000 --> 01:18:03,390\nSo what I'm gonna do is I'm\ngonna go back into my rule here,\n\n1580\n01:18:03,390 --> 01:18:05,290\nthat department match rule.\n\n1581\n01:18:05,290 --> 01:18:09,430\nAnd we set it up to where\nit gave them full control.\n\n1582\n01:18:09,430 --> 01:18:13,080\nSo if we take a look at my\npermissions here, click, click, edit.\n\n1583\n01:18:13,080 --> 01:18:16,630\nAnd we take a look at those\nauthenticated users, right,\n\n1584\n01:18:16,630 --> 01:18:21,550\nwe gave him full control as long as\nall three of these conditions are met.\n\n1585\n01:18:21,550 --> 01:18:26,680\nSo what I wanna do is I wanna see\nwhat would happen if I change that.\n\n1586\n01:18:26,680 --> 01:18:28,770\nAnd just for the example,\nI'm gonna choose, so what you do,\n\n1587\n01:18:28,770 --> 01:18:31,560\nthere's a propose permission section,\nand you come in here and\n\n1588\n01:18:31,560 --> 01:18:37,110\nyou turn it on, right, and\nnow I can edit these permissions.\n\n1589\n01:18:37,110 --> 01:18:40,480\nAnd these are not going to be enforced,\nbut they will be audited.\n\n1590\n01:18:41,850 --> 01:18:44,460\nSo I'm going to grab that line and\nclick Edit.\n\n1591\n01:18:44,460 --> 01:18:49,220\nAnd I'm going to change this\nto Just Read Only basically.\n\n1592\n01:18:49,220 --> 01:18:52,600\nAnd there we will leave read next, too.\n\n1593\n01:18:52,600 --> 01:18:53,971\nSame conditions, everything else.\n\n1594\n01:18:56,467 --> 01:18:57,919\nAnd we'll click OK.\n\n1595\n01:18:57,919 --> 01:19:01,400\nAnd OK.\n\n1596\n01:19:01,400 --> 01:19:02,960\nSo that's going to turn that again.\n\n1597\n01:19:02,960 --> 01:19:06,750\nThat's going to set up my proposed\npermissions then what we're going to do is\n\n1598\n01:19:06,750 --> 01:19:10,570\nwe've got to implement auditing so\nI'm going to go back into my group policy\n\n1599\n01:19:10,570 --> 01:19:14,540\nmanagement console and there's a couple\nof things we've got to turn on here.\n\n1600\n01:19:18,260 --> 01:19:21,630\nAnd since I've already got that dynamic\naccess control linked to that server,\n\n1601\n01:19:21,630 --> 01:19:23,200\nthat file server is OU.\n\n1602\n01:19:23,200 --> 01:19:24,010\nI'm going to use that one.\n\n1603\n01:19:26,200 --> 01:19:30,435\nAnd this one is going to be under where\nall my auditing settings are, policies,\n\n1604\n01:19:30,435 --> 01:19:32,260\nWindow settings.\n\n1605\n01:19:32,260 --> 01:19:33,240\nSecurity settings.\n\n1606\n01:19:33,240 --> 01:19:35,940\nAnd this is one of my\nadvanced audit policies, so\n\n1607\n01:19:35,940 --> 01:19:37,120\nit's gonna be down here at the bottom.\n\n1608\n01:19:39,330 --> 01:19:42,400\nSo Advanced Audit Policy Configuration,\nand\n\n1609\n01:19:42,400 --> 01:19:46,470\nthen we've got our Audit policies, and\nthis one's gonna be under Object Access.\n\n1610\n01:19:46,470 --> 01:19:47,900\nAll right?\n\n1611\n01:19:47,900 --> 01:19:52,950\nAnd there's two I need to turn on, there's\nthe Audit Central Access Policy Staging.\n\n1612\n01:19:54,710 --> 01:19:55,668\nAnd that's just a simple one.\n\n1613\n01:19:55,668 --> 01:19:59,191\nYou turn it on, decide if you\nwanna do success, failure or both,\n\n1614\n01:19:59,191 --> 01:20:03,625\ndepending on what you're trying to audit\nand how big you want your log files to be.\n\n1615\n01:20:03,625 --> 01:20:07,727\nAnd then audit file system which just\nturns the servers ability to audit in\n\n1616\n01:20:07,727 --> 01:20:08,860\nthe first place on.\n\n1617\n01:20:08,860 --> 01:20:09,760\nSo you gotta do both of those.\n\n1618\n01:20:09,760 --> 01:20:12,540\nYou're turning the ability to\naudit on with this one, and\n\n1619\n01:20:12,540 --> 01:20:15,680\nthen you're specifically saying\naudit proposed permissions for\n\n1620\n01:20:15,680 --> 01:20:18,310\ncentral access policies with\nthat first one that I did.\n\n1621\n01:20:19,718 --> 01:20:24,930\nSo now that both of those are turned on\nwe should be able to close the editor.\n\n1622\n01:20:24,930 --> 01:20:26,290\nFlip back over to server one.\n\n1623\n01:20:27,300 --> 01:20:29,113\nDo a little GP update.\n\n1624\n01:20:34,315 --> 01:20:39,290\n/force, let that kick in and\n\n1625\n01:20:39,290 --> 01:20:43,275\nthen we can test it out.\n\n1626\n01:20:43,275 --> 01:20:45,335\n>> So\nnow we've got two sets of permissions.\n\n1627\n01:20:45,335 --> 01:20:48,791\nSo there's the actual permissions\nwhich we didn't mess with,\n\n1628\n01:20:48,791 --> 01:20:53,590\nwe left those at full control, and the\nproposed permissions, we modified those.\n\n1629\n01:20:53,590 --> 01:20:56,380\nAnd when Mike turned on auditing,\nwhat's gonna happen is the proposed\n\n1630\n01:20:56,380 --> 01:20:59,285\npermissions are not gonna take effect,\nusers will still have full control.\n\n1631\n01:20:59,285 --> 01:21:01,830\n>> Mm-hm.\n>> But it's going to do audit logging.\n\n1632\n01:21:01,830 --> 01:21:03,340\nSo it's gonna log to the event Log,\n\n1633\n01:21:03,340 --> 01:21:08,530\nshowing us what would have happened had\nthose proposed permissions been in place.\n\n1634\n01:21:08,530 --> 01:21:11,130\nAnd that gives us a chance\nto basically kick the tires.\n\n1635\n01:21:11,130 --> 01:21:12,200\n>> Yes.\n>> To try it out,\n\n1636\n01:21:12,200 --> 01:21:13,880\ngive it a test drive, right?\n\n1637\n01:21:13,880 --> 01:21:17,171\nAnd if we see that a lot of people\nare getting denied, then we might say ooh,\n\n1638\n01:21:17,171 --> 01:21:18,590\nwait, this might be a bad idea.\n\n1639\n01:21:18,590 --> 01:21:21,430\nThey're actually using these files\nwe didn't know about, right.\n\n1640\n01:21:21,430 --> 01:21:23,277\nCuz we gave 'em read,\nand read and execute.\n\n1641\n01:21:23,277 --> 01:21:24,380\nRight?\n>> Right.\n\n1642\n01:21:24,380 --> 01:21:27,570\n>> Maybe we left off read and execute and\nso we see where they're trying to run\n\n1643\n01:21:27,570 --> 01:21:30,450\napplications from that folder and\nit's getting denied.\n\n1644\n01:21:30,450 --> 01:21:31,940\nSo we go oh shoot!\n\n1645\n01:21:31,940 --> 01:21:33,380\nWe must have missed read and execute.\n\n1646\n01:21:33,380 --> 01:21:34,610\nNow we can go and fix it.\n\n1647\n01:21:34,610 --> 01:21:38,730\nAnd we were able to fix it before\na support call was generated.\n\n1648\n01:21:38,730 --> 01:21:40,320\nBefore our users were even aware of it.\n\n1649\n01:21:40,320 --> 01:21:41,290\n>> Exactly.\n\n1650\n01:21:41,290 --> 01:21:44,320\nSo what I tried to do here is I just went\nin and made some changes to the file\n\n1651\n01:21:44,320 --> 01:21:48,280\nbecause we said proposed mission read,\nread and execute, so no write permissions.\n\n1652\n01:21:48,280 --> 01:21:50,520\nAnd yet I can still write to it and\nsave it and\n\n1653\n01:21:50,520 --> 01:21:53,040\nclose it because we\ndidn't implement those.\n\n1654\n01:21:53,040 --> 01:21:56,160\nSo now we're gonna go back\nover to server one and\n\n1655\n01:21:56,160 --> 01:21:58,820\ntake a look at our good old event log.\n\n1656\n01:22:00,170 --> 01:22:02,500\nLet's see what happens.\n\n1657\n01:22:02,500 --> 01:22:06,128\nI want to say it was,\nif I can remember that number, 4818,\n\n1658\n01:22:06,128 --> 01:22:10,447\nall of my auditing goes into my security\nlog, as we've talked a few times.\n\n1659\n01:22:10,447 --> 01:22:13,187\nAnd there is my 4818.\n\n1660\n01:22:13,187 --> 01:22:16,485\nAnd so, what I can see here,\nif you guys can read that, hopefully.\n\n1661\n01:22:16,485 --> 01:22:20,480\nI hate windows that will\nnot let you maximize it.\n\n1662\n01:22:20,480 --> 01:22:22,900\nBut will let you resize it.\n\n1663\n01:22:22,900 --> 01:22:24,790\nThat's really odd.\n\n1664\n01:22:24,790 --> 01:22:28,110\nSo what I'm looking at if I scroll\ndown through here is I can see\n\n1665\n01:22:28,110 --> 01:22:30,700\ncurrent central access policy results.\n\n1666\n01:22:30,700 --> 01:22:35,380\nRead was granted, write was granted,\nappend data et cetera, et cetera.\n\n1667\n01:22:35,380 --> 01:22:40,470\nBut as I scroll down, this is where I\nget to see my proposed central access\n\n1668\n01:22:40,470 --> 01:22:45,878\npolicy results, and I can see read\nwould not be granted, interesting,\n\n1669\n01:22:45,878 --> 01:22:51,650\nwrite was not be granted, not sure why,\nit says the department rules match.\n\n1670\n01:22:53,270 --> 01:22:57,430\nBut anyway, we get to see that the\nproposed permissions are indeed different\n\n1671\n01:22:57,430 --> 01:22:59,360\nfrom the actual permissions.\n\n1672\n01:22:59,360 --> 01:23:00,690\nSo this is where we could troubleshoot.\n\n1673\n01:23:00,690 --> 01:23:02,675\nAnd like this,\nif I had implemented this policy,\n\n1674\n01:23:02,675 --> 01:23:04,527\nPeter wouldn't have been\nable to get access.\n\n1675\n01:23:04,527 --> 01:23:06,467\nAnd yet\nhe's supposed to have access to this.\n\n1676\n01:23:06,467 --> 01:23:12,100\nSo I found out about it before I\nactually implemented those permissions.\n\n1677\n01:23:12,100 --> 01:23:15,100\nAnd then the last thing is just being\nable to, or do you have something.\n\n1678\n01:23:15,100 --> 01:23:15,790\n>> Nope.\nI'm done.\n\n1679\n01:23:15,790 --> 01:23:18,470\n>> The last thing you wanna do,\nif you had tested it and they had worked\n\n1680\n01:23:18,470 --> 01:23:22,500\nthe way you wanted it, then you gotta\nactually okay, let's turn 'em on.\n\n1681\n01:23:22,500 --> 01:23:23,420\nAnd it's easy.\n\n1682\n01:23:23,420 --> 01:23:26,500\nYou do not have to go in and\nreconfigure anything.\n\n1683\n01:23:26,500 --> 01:23:32,399\nAll we have to do is go back over to\nour rule and pull up its properties.\n\n1684\n01:23:34,400 --> 01:23:37,010\nAnd when we get down to\nthe proposed permissions I can say\n\n1685\n01:23:37,010 --> 01:23:39,270\nApply proposed permissions.\n\n1686\n01:23:39,270 --> 01:23:43,280\nSo by clicking that, that's gonna\ntake those proposed permissions and\n\n1687\n01:23:43,280 --> 01:23:46,974\nmove 'em up into my applied permissions or\ncurrent permissions.\n\n1688\n01:23:46,974 --> 01:23:47,970\nAnd there we've implemented it.\n\n1689\n01:23:47,970 --> 01:23:50,860\nSo once we've tested it and\nfixed our problem, we do that.\n\n1690\n01:23:50,860 --> 01:23:53,820\n>> So it's kind of a nice little\nbuilt in staging environment\n\n1691\n01:23:53,820 --> 01:23:55,410\nis how they'll refer to it on the exam.\n\n1692\n01:23:55,410 --> 01:23:58,370\nAnd you can stage those permissions,\nsee how they go, and\n\n1693\n01:23:58,370 --> 01:23:59,380\nthen quickly implement them.\n\n1694\n01:23:59,380 --> 01:24:00,530\nSo a neat system.\n\n1695\n01:24:00,530 --> 01:24:05,150\nJust keep in mind that it is done right\nhere through our dynamic access rules,\n\n1696\n01:24:05,150 --> 01:24:06,530\nright, we've added that policy.\n\n1697\n01:24:06,530 --> 01:24:08,480\nSo as we implemented there.\n\n1698\n01:24:08,480 --> 01:24:12,576\nYou don't have to use it, you can\njust ignore that proposed section and\n\n1699\n01:24:12,576 --> 01:24:13,538\njust not use it.\n\n1700\n01:24:13,538 --> 01:24:15,220\nBut it is there.\nIt's kind of nice to have.\n\n1701\n01:24:15,220 --> 01:24:18,030\nThe larger your company,\nthe more important that'll be.\n\n1702\n01:24:18,030 --> 01:24:20,490\n>> Yeah I've seen several times people\nmaking the mistake of going in and\n\n1703\n01:24:20,490 --> 01:24:22,260\nthinking they're changing\nthe actual permissions and\n\n1704\n01:24:22,260 --> 01:24:24,870\ndo it under proposed or the opposite.\n\n1705\n01:24:24,870 --> 01:24:26,320\nSo do be careful with\nwhich section you're in.\n\n1706\n01:24:26,320 --> 01:24:29,200\nRemember it defaults to proposed\nwhen you first create that rule.\n\n1707\n01:24:30,370 --> 01:24:33,250\n>> Well Mike I think we've\nbeen pretty exhaustive here.\n\n1708\n01:24:33,250 --> 01:24:34,270\n>> I think so too.\n\n1709\n01:24:34,270 --> 01:24:34,850\n>> Okay.\n\n1710\n01:24:34,850 --> 01:24:39,230\n>> I think we've covered just about\nevery aspect of dynamic access control.\n\n1711\n01:24:39,230 --> 01:24:43,050\n>> Well we still have a few more storage\ntopics to cover before we wrap up this\n\n1712\n01:24:43,050 --> 01:24:44,210\nwhole objective.\n\n1713\n01:24:44,210 --> 01:24:46,980\nBut this is a pretty good stopping\npoint for us for this episode so\n\n1714\n01:24:46,980 --> 01:24:48,620\nwe'll go ahead and wrap up here.\n\n1715\n01:24:48,620 --> 01:24:51,130\nLet me remind you guys if\nyou have any questions\n\n1716\n01:24:51,130 --> 01:24:54,010\nlive during this show you\ncan go to ITpro.tv/live.\n\n1717\n01:24:54,010 --> 01:24:57,030\nYou'll see our chat box\nright beneath the video.\n\n1718\n01:24:57,030 --> 01:24:58,280\nYou can post your questions there.\n\n1719\n01:24:58,280 --> 01:25:00,250\nWe do monitor and answer.\n\n1720\n01:25:00,250 --> 01:25:02,520\nIf you have questions after the show,\n\n1721\n01:25:02,520 --> 01:25:05,790\nif you're watching this recorded,\nyou can go to the Q and A forums.\n\n1722\n01:25:05,790 --> 01:25:09,470\nOn every single itpro.tv page, you'll\nsee a link at the top that says Q and A,\n\n1723\n01:25:09,470 --> 01:25:11,900\nit'll take you to the questions and\nanswers area.\n\n1724\n01:25:11,900 --> 01:25:15,140\nYou can post your questions,\nwe monitor and answer there, too.\n\n1725\n01:25:15,140 --> 01:25:16,810\nAll right,\nwell I hope you guys enjoyed the show.\n\n1726\n01:25:16,810 --> 01:25:19,100\nSigning off for IT Pro TV, I'm Don Pezet.\n\n1727\n01:25:19,100 --> 01:25:20,217\n>> And I'm Mike Rodrick.\n\n1728\n01:25:20,217 --> 01:25:22,074\n>> And we will see you next time.\n\n1729\n01:25:22,074 --> 01:25:32,074\n[MUSIC]\n\n",
          "vimeoId": "98029349"
        },
        {
          "description": "In this episode Mike and Don take a look at configuring and optimizing storage. They demonstrate configuring iSCSI target and initiator. They also demonstrate how to reclaim disk space through the use of Features on Demand.",
          "length": "4195",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/006-Optimizing-Storage.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/006-Optimizing-Storage-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/006-Optimizing-Storage-sm.jpg",
          "title": "Optimizing Storage",
          "transcript": "1\n00:00:00,025 --> 00:00:00,870\n[NOISE]\n\n2\n00:00:00,870 --> 00:00:10,870\n[MUSIC]\n\n3\n00:00:15,348 --> 00:00:22,547\n[SOUND]\n\n4\n00:00:22,547 --> 00:00:33,191\n[MUSIC]\n\n5\n00:00:33,191 --> 00:00:34,769\nAll right.\nGood morning, good afternoon and\n\n6\n00:00:34,769 --> 00:00:36,270\ngood evening and welcome back.\n\n7\n00:00:36,270 --> 00:00:37,760\nTo another episode of ITProTV,\n\n8\n00:00:37,760 --> 00:00:40,800\nI'm your host Don Pezet,\ntoday with Mr Mike Roderick.\n\n9\n00:00:40,800 --> 00:00:41,560\nHow's it going Mike?\n\n10\n00:00:41,560 --> 00:00:42,900\n>> Fantastic Don, how're you doing today?\n\n11\n00:00:42,900 --> 00:00:44,190\n>> I am doing swell.\n\n12\n00:00:44,190 --> 00:00:44,810\n>> Yeah?\n>> I, I am\n\n13\n00:00:44,810 --> 00:00:46,465\nalways excited when we\ntalk about technology.\n\n14\n00:00:46,465 --> 00:00:47,610\n>> Mm-hm.\n>> That I, that I\n\n15\n00:00:47,610 --> 00:00:49,550\nactually use in production environments.\n\n16\n00:00:49,550 --> 00:00:51,460\n>> Right.\n>> Cuz you know, some of the stuff.\n\n17\n00:00:51,460 --> 00:00:51,960\n>> There's a lot of it.\n\n18\n00:00:51,960 --> 00:00:52,530\nYeah.\n\n19\n00:00:52,530 --> 00:00:55,920\n>> So, and some of the stuff, the features\nsound really cool, but you're like oh,\n\n20\n00:00:55,920 --> 00:00:58,380\nmost people aren't going to use\nthis in production because it's\n\n21\n00:00:58,380 --> 00:00:58,960\na fringe technology.\n\n22\n00:00:58,960 --> 00:01:00,500\n>> Yeah.\nYou've got a specific need for it or\n\n23\n00:01:00,500 --> 00:01:01,300\nsomething like that.\n\n24\n00:01:01,300 --> 00:01:03,330\nBut these are some stuff that I\nthink everybody can find useful.\n\n25\n00:01:03,330 --> 00:01:04,532\n>> Yeah, absolutely.\n\n26\n00:01:04,532 --> 00:01:09,520\nSo, what we're going to be talking about\ntoday is a couple of configuring and\n\n27\n00:01:09,520 --> 00:01:11,530\noptimizing storage techniques.\n\n28\n00:01:11,530 --> 00:01:12,573\nTools, devices,\n>> Mm-hm.\n\n29\n00:01:12,573 --> 00:01:14,740\n>> features, whatever inside of Windows.\n\n30\n00:01:14,740 --> 00:01:16,500\nAnd, and some of them are kind of neat.\n\n31\n00:01:16,500 --> 00:01:19,523\nThe first one that we're going\nto talk about is I-Scsi.\n\n32\n00:01:19,523 --> 00:01:23,700\nAlright, now iSCSI is a storage\ntechnology that's designed\n\n33\n00:01:23,700 --> 00:01:28,600\nto provide you connectivity to hard\ndrives via a regular TCPIT network.\n\n34\n00:01:28,600 --> 00:01:32,920\nOkay, now SCSI, s-c-s-i,\ndo you remember what that stands for?\n\n35\n00:01:32,920 --> 00:01:34,690\n>> Small computers serial interface.\n\n36\n00:01:34,690 --> 00:01:36,460\n>> That sounds right,\nwell, we'll go with that.\n\n37\n00:01:36,460 --> 00:01:37,330\n>> Something like that?\n\n38\n00:01:37,330 --> 00:01:37,855\n[LAUGH]\n>> So.\n\n39\n00:01:37,855 --> 00:01:39,241\n[LAUGH] it's a very old hard drive\n\n40\n00:01:39,241 --> 00:01:39,901\ntechnology.\n>> Yeah.\n\n41\n00:01:39,901 --> 00:01:40,891\n>> It was developed in the 80s.\n\n42\n00:01:40,891 --> 00:01:42,281\nIt's still in use in a lot of servers\n\n43\n00:01:42,281 --> 00:01:43,001\ntoday.\n>> Mm-hm.\n\n44\n00:01:43,001 --> 00:01:44,511\n>> Although now we normally see SAS or\n\n45\n00:01:44,511 --> 00:01:46,091\nSerial Attached SCSI.\n>> Yeah.\n\n46\n00:01:46,091 --> 00:01:48,374\n>> But you know so very, very common.\n\n47\n00:01:48,374 --> 00:01:52,270\nWhat iSCSI does is it takes the SCSI\nprotocol that's normally used on internal\n\n48\n00:01:52,270 --> 00:01:53,850\ncabling and\n\n49\n00:01:53,850 --> 00:01:57,230\nit encapsulates it in a TCPIP-packet\nto throw it on a regular network.\n\n50\n00:01:57,230 --> 00:01:58,130\n>> Yeah.\n\n51\n00:01:58,130 --> 00:02:03,330\n>> Now, what that enables us to do\nis to have storage in one place,\n\n52\n00:02:03,330 --> 00:02:06,840\na server in another place,\nand they connect together and\n\n53\n00:02:06,840 --> 00:02:09,550\nthe server sees the storage\nas local storage.\n\n54\n00:02:09,550 --> 00:02:12,260\nNow, you don't get as good of performance\n\n55\n00:02:12,260 --> 00:02:13,364\nout of it as if they were\n>> Right.\n\n56\n00:02:13,364 --> 00:02:15,910\n>> internal drives,\nbecause it is over your network, right?\n\n57\n00:02:15,910 --> 00:02:19,160\nBut it does open up the possibility\nto a lot of things.\n\n58\n00:02:19,160 --> 00:02:22,600\nAnd, if you've been watching\nall of our 74-12 shows,\n\n59\n00:02:22,600 --> 00:02:24,150\nyou've already seen us make use of it.\n\n60\n00:02:24,150 --> 00:02:24,730\n>> Yeah.\n\n61\n00:02:24,730 --> 00:02:30,080\n>> In the clustering, the fail over\nclustering episode, we had an iSCSI stand,\n\n62\n00:02:30,080 --> 00:02:31,890\nan actual appliance-\n>> Mm-hm.\n\n63\n00:02:31,890 --> 00:02:34,435\n>> On our network that we were\ngoing to use for our cluster.\n\n64\n00:02:34,435 --> 00:02:35,890\n>> [LAUGH]\n>> And what happened?\n\n65\n00:02:35,890 --> 00:02:37,580\nIt didn't support what\nwe were trying to do.\n\n66\n00:02:37,580 --> 00:02:38,650\n>> It wasn't compatible.\n\n67\n00:02:38,650 --> 00:02:40,590\nYeah, we didn't.\nSo we didn't meet the Microsoft hardware\n\n68\n00:02:40,590 --> 00:02:42,840\ncompatibility list or\nwhatever, so it failed us.\n\n69\n00:02:42,840 --> 00:02:45,275\nSo we cancelled the show and\nthat was the end of it, right?\n\n70\n00:02:45,275 --> 00:02:45,860\n>> [LAUGH]\n>> No.\n\n71\n00:02:45,860 --> 00:02:47,720\n>> No, we have an alternate solution.\n\n72\n00:02:47,720 --> 00:02:50,950\n>> We really quick,\ntook one of our Windows servers and\n\n73\n00:02:50,950 --> 00:02:54,180\nturned it into an iSCSI target.\n\n74\n00:02:54,180 --> 00:02:57,150\nSo, it became an iSCSI San and\n\n75\n00:02:57,150 --> 00:03:01,170\nthen we got our cluster node to attach to\nit and it provided the shared storage.\n\n76\n00:03:01,170 --> 00:03:03,400\n>> Mm-hm.\nNow, in a production environment,\n\n77\n00:03:03,400 --> 00:03:05,490\nthe performance is not\nwhere it needs to be,\n\n78\n00:03:05,490 --> 00:03:07,410\nyou wouldn't want to\ndo that in production.\n\n79\n00:03:07,410 --> 00:03:10,760\nBut for those of you who are studying\nat home, you're learning, you're kinda\n\n80\n00:03:10,760 --> 00:03:14,290\nfiguring this stuff out, you want to set\nup a cluster, but man, you don't want\n\n81\n00:03:14,290 --> 00:03:18,770\nto drop 20 grand on a SAN, Well, here's\na chance to build one up in Windows.\n\n82\n00:03:18,770 --> 00:03:21,518\nWindows server 2012 has\nbuilt-in iSCSI target\n\n83\n00:03:21,518 --> 00:03:22,452\nsupport,\n>> Mm-hm.\n\n84\n00:03:22,452 --> 00:03:23,449\n>> Okay?\nAnd let me,\n\n85\n00:03:23,449 --> 00:03:25,990\nlet me clarify that terminology.\n\n86\n00:03:25,990 --> 00:03:28,060\nIn iSCSI we really have two things.\n\n87\n00:03:28,060 --> 00:03:30,365\nAn iSCSI target, and an iSCSI client.\n\n88\n00:03:30,365 --> 00:03:31,150\n>> Mm-hm.\n\n89\n00:03:31,150 --> 00:03:33,910\n>> So an iSCSI target, that's a server, or\n\n90\n00:03:33,910 --> 00:03:34,680\nan appliance,\n>> Mm-hm.\n\n91\n00:03:34,680 --> 00:03:35,900\n>> that has storage on it.\n\n92\n00:03:35,900 --> 00:03:38,800\nAnd it wants to make that storage\navailable to other people.\n\n93\n00:03:38,800 --> 00:03:41,450\nAnd an iSCSI client,\nthat's the other people,\n\n94\n00:03:41,450 --> 00:03:45,730\nthat's the server work station that\nneeds network attached storage, and\n\n95\n00:03:45,730 --> 00:03:49,660\nit's gonna connect to one or more\ntargets that are out there, all right?\n\n96\n00:03:49,660 --> 00:03:52,142\nSo those are some of the different\ncomponents that we have.\n\n97\n00:03:52,142 --> 00:03:56,050\nWindows Server can be both,\na target and a client.\n\n98\n00:03:56,050 --> 00:03:56,665\n>> Mm-hm.\n\n99\n00:03:56,665 --> 00:03:58,485\n>> And so\nwhen we were filming that episode,\n\n100\n00:03:58,485 --> 00:03:59,675\nit's like episode number two I think.\n\n101\n00:03:59,675 --> 00:04:02,195\n>> I think so, yep.\n>> When we were filming that episode\n\n102\n00:04:02,195 --> 00:04:05,517\nwe took our domain controller and\nreally quick turned it into a target.\n\n103\n00:04:05,517 --> 00:04:06,162\n>> Mm-hm.\n\n104\n00:04:06,162 --> 00:04:09,432\n>> And then we took our two cluster notes,\nserver one and server two, and\n\n105\n00:04:09,432 --> 00:04:12,932\nwe made them clients to connect\nthe target to get to the storage.\n\n106\n00:04:12,932 --> 00:04:13,850\n>> Worked like a charm.\n\n107\n00:04:13,850 --> 00:04:15,212\n>> Now,\nwe did all that during one of the breaks.\n\n108\n00:04:15,212 --> 00:04:16,984\n>> Yeah, [LAUGH]\n>> You know, after we realized that the,\n\n109\n00:04:16,984 --> 00:04:18,530\nthe network SAN wasn't gonna work.\n\n110\n00:04:18,530 --> 00:04:20,300\nSo we did it pretty quickly.\n\n111\n00:04:20,300 --> 00:04:21,575\nNow we're going to show\nyou how that was done.\n\n112\n00:04:21,575 --> 00:04:22,930\n>> Mm-hm.\n>> Okay.\n\n113\n00:04:22,930 --> 00:04:24,220\nCause it's kind of neat and it is useful.\n\n114\n00:04:24,220 --> 00:04:24,750\n>> It is.\nIt is.\n\n115\n00:04:24,750 --> 00:04:25,270\n>> All right.\n\n116\n00:04:25,270 --> 00:04:28,220\nThe first thing you need to do is you\nneed to take a server that's running,\n\n117\n00:04:28,220 --> 00:04:29,150\nwell Windows Server.\n\n118\n00:04:29,150 --> 00:04:29,941\n>> Yeah.\n[LAUGH]\n\n119\n00:04:29,941 --> 00:04:30,574\n>> And this was\n\n120\n00:04:30,574 --> 00:04:34,879\nintroduced in Windows Server 2008 R2 so\nit hasn't been around all that long.\n\n121\n00:04:34,879 --> 00:04:37,510\n>> Mm-hm.\n>> They used to have Microsoft Windows\n\n122\n00:04:37,510 --> 00:04:39,480\nserver storage edition.\n\n123\n00:04:39,480 --> 00:04:41,042\n>> Right.\n>> And that was the only one that could be\n\n124\n00:04:41,042 --> 00:04:44,770\nan iSCSI target, now its just built\ninto regular Windows Server 2012.\n\n125\n00:04:44,770 --> 00:04:48,010\nSo I'm going to take a server,\n\n126\n00:04:48,010 --> 00:04:52,620\nI'll take I'll take my server one here\nwhich was going up in air for me.\n\n127\n00:04:52,620 --> 00:04:53,790\nAlright well I'll ignore it, right.\n\n128\n00:04:53,790 --> 00:04:54,570\nThat air couldn't be possibly.\n\n129\n00:04:54,570 --> 00:04:56,350\n>> I was going to say did it just\nclose it without reading it?\n\n130\n00:04:56,350 --> 00:04:57,500\n>> Yeah, of course it will.\n\n131\n00:04:57,500 --> 00:04:58,570\nSo. [LAUGH] >> [LAUGH]\n>> And then you know\n\n132\n00:04:58,570 --> 00:04:59,910\nwhat I'm going to tell you, Mike?\n\n133\n00:04:59,910 --> 00:05:01,566\n>> What?\n>> I didn't change anything.\n\n134\n00:05:01,566 --> 00:05:02,072\n[LAUGH]\n>> That's right.\n\n135\n00:05:02,072 --> 00:05:03,818\n[LAUGH]\n\n136\n00:05:03,818 --> 00:05:04,357\n>> [LAUGH] No, no,\n\n137\n00:05:04,357 --> 00:05:06,390\nI didn't install that toolbar and\nweather software.\n\n138\n00:05:06,390 --> 00:05:08,460\n>> I don't know where that came from.\n\n139\n00:05:08,460 --> 00:05:11,920\n>> So so anyway, I, I've got this server,\nI've got this Windows machine.\n\n140\n00:05:11,920 --> 00:05:15,787\nAnd I'm gonna turn it into a iSCSI target.\n\n141\n00:05:15,787 --> 00:05:20,460\nI want it to basically be an,\nan iSCSI SAN, an appliance, okay?\n\n142\n00:05:20,460 --> 00:05:23,515\n>> And to the rest of the network,\nthat's what it looks like, right?\n\n143\n00:05:23,515 --> 00:05:24,450\n>> Mm-hm.\n\n144\n00:05:24,450 --> 00:05:27,460\nSo when we do it, first we're gonna\nneed some hard drive space, and\n\n145\n00:05:27,460 --> 00:05:28,990\nI've got a little bit of\nhard drive space here.\n\n146\n00:05:28,990 --> 00:05:34,505\nNot a ton, but I've got some, looks like\nI have got about 280 gigs free here.\n\n147\n00:05:34,505 --> 00:05:36,684\n>> Mm-hm.\n>> And so I can create one or\n\n148\n00:05:36,684 --> 00:05:40,745\nmore virtual hard drives to\nshare out as iSCSI targets.\n\n149\n00:05:40,745 --> 00:05:41,410\n>> All right.\n\n150\n00:05:41,410 --> 00:05:45,270\n>> Now when I do that, it's kinda like\ncreating a VHD, like a virtual hard drive,\n\n151\n00:05:45,270 --> 00:05:47,640\nyou know, with, with Hyper V or whatever.\n\n152\n00:05:47,640 --> 00:05:50,410\nThe only difference is, instead of\nme using these drives I'm gonna be\n\n153\n00:05:50,410 --> 00:05:52,470\nposting them on the network\nwhere other people can use them.\n\n154\n00:05:53,810 --> 00:05:57,730\nSo step one, I need to install\nthe ISCSI target software.\n\n155\n00:05:57,730 --> 00:05:59,770\nNot installed by default.\n\n156\n00:05:59,770 --> 00:06:02,550\nThe ISCSI client software is.\n\n157\n00:06:02,550 --> 00:06:05,990\nIf you bring up your,\nyour little start screen, and\n\n158\n00:06:05,990 --> 00:06:09,646\njust type in iSCSI,\nyou'll see the iSCSI initiator.\n\n159\n00:06:09,646 --> 00:06:11,477\nThat's your client.\n\n160\n00:06:11,477 --> 00:06:12,760\n>> Mm-hm.\n>> That's what allows you to connect to\n\n161\n00:06:12,760 --> 00:06:15,580\nthis network storage and\nit is there by default.\n\n162\n00:06:15,580 --> 00:06:16,925\n>> And, and even on the Windows 8 clients?\n\n163\n00:06:16,925 --> 00:06:21,600\n>> Mm-hm, yep, I, on a Windows 8 client I,\nI think Windows, I.\n\n164\n00:06:21,600 --> 00:06:22,510\n>> Not sure about Windows 7.\n\n165\n00:06:22,510 --> 00:06:23,310\nGosh seems like it's been forever.\n\n166\n00:06:23,310 --> 00:06:24,860\nIt was so long ago.\n>> I'm pretty sure the last time I\n\n167\n00:06:24,860 --> 00:06:26,220\nhad to install it was like Windows XP.\n\n168\n00:06:26,220 --> 00:06:26,870\n>> Yeah.\n>> So\n\n169\n00:06:26,870 --> 00:06:30,038\nI think everything after Windows XP\nhad the, the initiator there.\n\n170\n00:06:30,038 --> 00:06:31,530\n>> Mm-hm.\n>> With Windows XP you could go to\n\n171\n00:06:31,530 --> 00:06:35,950\nMicrosoft's website and download the iSCSI\ninitiator but now it is part of the OS.\n\n172\n00:06:35,950 --> 00:06:38,200\nSo so that initiator, it's there.\n\n173\n00:06:38,200 --> 00:06:39,419\nYou know, it's not connected to anything.\n\n174\n00:06:39,419 --> 00:06:40,490\n>> Right.\n>> It's just sitting there empty.\n\n175\n00:06:40,490 --> 00:06:43,270\nWell not on ours cuz we're actually\nusing it, we'll, we'll see that later.\n\n176\n00:06:43,270 --> 00:06:44,550\n>> Yeah.\n[LAUGH]\n\n177\n00:06:44,550 --> 00:06:45,480\n>> Alright so\n\n178\n00:06:45,480 --> 00:06:50,520\nif I want to be an iSCSI target though,\nif I want to actually host the storage,\n\n179\n00:06:50,520 --> 00:06:53,870\nI need to install that service, and so,\nI'm gonna go into my server manager.\n\n180\n00:06:53,870 --> 00:06:54,660\nAnd we'll add that.\n\n181\n00:06:54,660 --> 00:06:55,310\n>> Mm-hm.\n\n182\n00:06:55,310 --> 00:06:58,300\n>> Now it is a feature on our server.\n\n183\n00:06:58,300 --> 00:07:01,080\nAnd so I'm just going to launch my\nserver manager and go to add roles and\n\n184\n00:07:01,080 --> 00:07:04,690\nfeatures, and,\n\n185\n00:07:04,690 --> 00:07:09,080\nas I move forward I'll see I, I've got\nrole based, feature based, installation.\n\n186\n00:07:09,080 --> 00:07:11,820\nI'll see the servers that I can work with.\n\n187\n00:07:11,820 --> 00:07:13,439\nI'm just working on the,\nthe server that I'm on.\n\n188\n00:07:14,720 --> 00:07:16,074\nWhich is server one.\n\n189\n00:07:16,074 --> 00:07:16,763\n>> All right.\n\n190\n00:07:16,763 --> 00:07:21,365\n>> And then in here, I'll see,\nyou know what, actually, I misspoke,\n\n191\n00:07:21,365 --> 00:07:23,240\nI said it was a feature.\n\n192\n00:07:23,240 --> 00:07:27,832\nWe're going to talk about something else\nin a minute here that's a feature, ISNS,\n\n193\n00:07:27,832 --> 00:07:30,090\nsimilar name, kind of confusing.\n\n194\n00:07:30,090 --> 00:07:33,889\nThe iSCHI target is a a role,\n>> A role service.\n\n195\n00:07:33,889 --> 00:07:34,530\n>> Service.\n\n196\n00:07:34,530 --> 00:07:36,580\nThere we go,\nthat's the term I'm looking for.\n\n197\n00:07:36,580 --> 00:07:37,780\nSo,\n>> I'm trying to differentiate,\n\n198\n00:07:37,780 --> 00:07:41,210\ntypically I guess the,\nthe definition if it's a role, or\n\n199\n00:07:41,210 --> 00:07:44,400\nrole service, it's providing\nsomething to the rest of the network.\n\n200\n00:07:44,400 --> 00:07:47,610\nIf it's a feat, a feature,\nprovides something to the server itself.\n\n201\n00:07:47,610 --> 00:07:48,650\n>> That's a good way to keep it straight.\n\n202\n00:07:48,650 --> 00:07:49,963\n>> Still doesn't help me\nremember where they are.\n\n203\n00:07:49,963 --> 00:07:51,640\n>> [LAUGH]\n>> That's what Microsoft will tell you.\n\n204\n00:07:51,640 --> 00:07:55,328\n>> Well, this one, the, the iSCSI\ntarget service is a part of file and\n\n205\n00:07:55,328 --> 00:07:56,441\nstorage services.\n\n206\n00:07:56,441 --> 00:07:59,135\nAnd you'll see that I have 3 to 12\nthings installed, and that's because we,\n\n207\n00:07:59,135 --> 00:08:00,732\nwe did some things on this\nserver the other day.\n\n208\n00:08:00,732 --> 00:08:01,444\n>> Yep.\n\n209\n00:08:01,444 --> 00:08:06,036\nAnd if I expand that out, and\ngo under file and ice guzzy services,\n\n210\n00:08:06,036 --> 00:08:08,490\nburied in here somewhere.\n\n211\n00:08:08,490 --> 00:08:11,610\nRight there, ice guzzy target server.\n\n212\n00:08:11,610 --> 00:08:12,230\nAll right?\n\n213\n00:08:12,230 --> 00:08:17,060\nIf I want to host the ice guzzy target,\nif I want to be a sand.\n\n214\n00:08:17,060 --> 00:08:20,890\nThis is what I need,\nthis role service right here, all right?\n\n215\n00:08:20,890 --> 00:08:26,020\nYou'll also see iscsi target\nstorage provider VDS and VSS.\n\n216\n00:08:26,020 --> 00:08:31,180\nIf you have the you know,\nthe iscsi servers in place and\n\n217\n00:08:31,180 --> 00:08:34,910\nyou want to provide volume shadow copy\nservices, you know, snapshots and\n\n218\n00:08:34,910 --> 00:08:38,360\nin drive snapshots,\nThen you'll need to turn that on also.\n\n219\n00:08:38,360 --> 00:08:40,460\nWe don't normally provide that\nover the network though, so\n\n220\n00:08:40,460 --> 00:08:42,230\nits not turned on by default.\n\n221\n00:08:42,230 --> 00:08:43,810\nI don't think Ive ever\nreally made use of that.\n\n222\n00:08:45,622 --> 00:08:50,050\nAll right, so I will leave it here with\njust the target server, and I'm not going\n\n223\n00:08:50,050 --> 00:08:53,480\nto add anything else, we'll just kind of\nclick forward and finish that up, right?\n\n224\n00:08:54,940 --> 00:08:57,790\nWhat it's going to do is it's going\nto install the iSCSI target, and\n\n225\n00:08:57,790 --> 00:08:58,870\nthen I'm ready to go.\n\n226\n00:08:58,870 --> 00:09:02,430\nI'm actually an iSCSI target as\nsoon as it's done installing.\n\n227\n00:09:02,430 --> 00:09:04,660\nBut I don't have any drives attached,\nso I'm not very useful.\n\n228\n00:09:04,660 --> 00:09:06,920\n>> Yeah, it's pretty,\npretty sad target, right?\n\n229\n00:09:06,920 --> 00:09:08,200\nYou got no drives to connect to.\n\n230\n00:09:08,200 --> 00:09:10,596\nI see you there, but\nyou got nothing out To offering.\n\n231\n00:09:10,596 --> 00:09:11,180\n>> Yeah.\nAnd\n\n232\n00:09:11,180 --> 00:09:14,570\nif your building a true appliance like\nmaybe you've, you've built up a server\n\n233\n00:09:14,570 --> 00:09:17,529\nthat's just stacked full of hard drives\nand you want it to be dedicated iSCSI.\n\n234\n00:09:17,529 --> 00:09:18,990\n>> Mm-hm.\n>> You'll probably want to do\n\n235\n00:09:18,990 --> 00:09:20,215\na core services install.\n\n236\n00:09:20,215 --> 00:09:21,830\n>> Right.\n>> So you get this stuff set up and\n\n237\n00:09:21,830 --> 00:09:24,650\nthen you uninstall the GUI, so\nit goes down in just a core service\n\n238\n00:09:24,650 --> 00:09:25,516\ninstall\n>> Mm-hm.\n\n239\n00:09:25,516 --> 00:09:29,064\n>> That way it's super efficient and it's\njust providing access to that storage.\n\n240\n00:09:29,064 --> 00:09:30,760\n>> Nice.\n>> Another thing to keep\n\n241\n00:09:30,760 --> 00:09:34,210\nin mind while we wait\n>> If this guy becomes a storage server\n\n242\n00:09:34,210 --> 00:09:38,070\nnetwork bandwidth is going to become\none of its number one bottlenecks.\n\n243\n00:09:38,070 --> 00:09:40,845\nSo, we need to make sure we have a good\nsolid network connection on this thing.\n\n244\n00:09:40,845 --> 00:09:42,593\n>> Hm-hm.\n>> To provide this storage access\n\n245\n00:09:42,593 --> 00:09:43,360\nthat we want.\n\n246\n00:09:43,360 --> 00:09:48,030\nAll right, so it's done, and\nI'll just hit close on that.\n\n247\n00:09:48,030 --> 00:09:53,183\nAnd now when I go into my start screen\nhere I can type in iscuzzy, and instead of\n\n248\n00:09:53,183 --> 00:09:58,521\njust seeing the iscuzzy initiator, I will\nalso see, oh, [SOUND] you know what?\n\n249\n00:09:58,521 --> 00:09:59,177\n>> What's up?\n\n250\n00:09:59,177 --> 00:10:01,170\n>> Again, I'm thinking ISNS\n>> Right.\n\n251\n00:10:01,170 --> 00:10:02,260\n>> ISNS is showing up under here.\n\n252\n00:10:02,260 --> 00:10:04,060\n>> Uh-huh.\n>> The iscuzzy target shows up in our\n\n253\n00:10:04,060 --> 00:10:05,530\nserver manager, so let me go back to that.\n\n254\n00:10:07,120 --> 00:10:09,070\nHere we go.\n\n255\n00:10:09,070 --> 00:10:12,850\nAll right, so back in my server manager,\nI'm just going to file and\n\n256\n00:10:12,850 --> 00:10:17,790\nstorage services and under that,\nI'll see iSCSI okay.\n\n257\n00:10:17,790 --> 00:10:19,520\nI wouldn't have seen this before.\n\n258\n00:10:19,520 --> 00:10:23,140\nNow that I installed the iSCSI target\nservice, here it is, all right.\n\n259\n00:10:23,140 --> 00:10:25,930\nAnd it shows that I am an iSCSI server.\n\n260\n00:10:25,930 --> 00:10:30,660\nBut I have no virtual disks whatsoever,\nthere it is.\n\n261\n00:10:30,660 --> 00:10:31,720\n>> That's sad.\n\n262\n00:10:31,720 --> 00:10:32,450\n>> Yeah, that's sad.\n\n263\n00:10:32,450 --> 00:10:35,010\nSo, what I need to do for\nthis thing to be functional,\n\n264\n00:10:35,010 --> 00:10:37,860\nis I need to create\natleast one virtual disk.\n\n265\n00:10:37,860 --> 00:10:40,850\nAll right, and then maybe I want to create\nseveral, but I need to create at least\n\n266\n00:10:40,850 --> 00:10:46,310\none, so I've got that option here to\ncreate a disk, and we will create one.\n\n267\n00:10:46,310 --> 00:10:50,280\nNow, creating a virtual disk,\nit's, it's a couple of steps.\n\n268\n00:10:50,280 --> 00:10:52,010\nFirst off,\nwe have to create the disk itself,\n\n269\n00:10:52,010 --> 00:10:56,800\nand then second we have to define\nwho's allowed to connect to the disk,\n\n270\n00:10:56,800 --> 00:11:00,600\nbecause this is, this is storage,\nThere may be sensitive data on here.\n\n271\n00:11:00,600 --> 00:11:03,200\nYou may not want just anybody on your\nnetwork to be able to connect to this\n\n272\n00:11:03,200 --> 00:11:05,370\ndrive, maybe even\nbypassing authentication.\n\n273\n00:11:05,370 --> 00:11:06,120\n>> Absolutely, yeah.\n\n274\n00:11:06,120 --> 00:11:07,290\n>> So.\n>> That's because it's built into that\n\n275\n00:11:07,290 --> 00:11:10,310\nWindows 8 client, so I could just\npull it up and scan your network and\n\n276\n00:11:10,310 --> 00:11:11,630\nsee what targets you got out there.\n\n277\n00:11:11,630 --> 00:11:13,800\n>> Yeah, and when you connect\nto this drive over the network,\n\n278\n00:11:13,800 --> 00:11:17,770\nit's the equivalent of you having stolen a\nphysical hard drive out of a computer and\n\n279\n00:11:17,770 --> 00:11:18,570\n>> Stuck it in yours, right,\n\n280\n00:11:18,570 --> 00:11:20,500\nbecause it shows up as local storage.\n\n281\n00:11:20,500 --> 00:11:22,420\nSo you could bypass ACL's,\n\n282\n00:11:22,420 --> 00:11:27,110\nyou could override, any of the ACL's that\nare put in place, other restrictions.\n\n283\n00:11:27,110 --> 00:11:29,600\nYou wouldn't be able to get\npast encryption though.\n\n284\n00:11:29,600 --> 00:11:34,450\nSo, if it was bitlockered or using\nthe EFS, the encrypting filing system.\n\n285\n00:11:34,450 --> 00:11:38,550\nIf it's using any of that stuff Stuff,\nthen you would be a little more safe.\n\n286\n00:11:38,550 --> 00:11:42,130\nBut still, somebody could maliciously just\nconnect to it and start writing to it.\n\n287\n00:11:42,130 --> 00:11:44,230\nAnd, you probably remember\nme saying earlier,\n\n288\n00:11:44,230 --> 00:11:48,260\nif two servers try to write to the same\ndrive at the same time, what happens?\n\n289\n00:11:48,260 --> 00:11:49,400\nDisk corruption.\n\n290\n00:11:49,400 --> 00:11:53,620\nSo, very easy to perform attacks on this\nso we want to make sure we limit that.\n\n291\n00:11:53,620 --> 00:11:58,240\nSo you'll notice that over here I've\ngot like all this different tuff listed\n\n292\n00:11:58,240 --> 00:12:00,530\nas we go through the add a disk wizard,\n\n293\n00:12:00,530 --> 00:12:03,305\nwe're doing a lot more\nthan just adding the disk.\n\n294\n00:12:03,305 --> 00:12:04,360\n>> Mm-hm.\n\n295\n00:12:04,360 --> 00:12:05,040\n>> All right.\n\n296\n00:12:05,040 --> 00:12:08,080\nSo first off,\nI do have a slight problem, which is-\n\n297\n00:12:08,080 --> 00:12:09,104\n>> I don't see a [CROSSTALK].\n\n298\n00:12:09,104 --> 00:12:11,391\n>> It it's not seeing itself so\n>> Nice.\n\n299\n00:12:11,391 --> 00:12:15,240\n>> It's supposed to showing me my-\n>> SCSI targets and\n\n300\n00:12:15,240 --> 00:12:17,290\nit doesn't see itself as a target.\n\n301\n00:12:17,290 --> 00:12:18,000\n>> Huh.\n>> So\n\n302\n00:12:18,000 --> 00:12:20,510\nthat tells me I need to make\nsure the service started.\n\n303\n00:12:20,510 --> 00:12:23,380\nSo I'm just gonna cancel\nout of that wizard and\n\n304\n00:12:23,380 --> 00:12:25,729\nI'm gonna jump into my services.\n\n305\n00:12:27,510 --> 00:12:29,800\nAnd just make sure that\nthe iSCSI target is started.\n\n306\n00:12:31,200 --> 00:12:33,180\nIt should've started on its own but\nyou know,\n\n307\n00:12:33,180 --> 00:12:37,735\nsometimes it will tell you to reboot or\nwhatever and-.\n\n308\n00:12:37,735 --> 00:12:38,570\n>> Mm-hm.\n>> Well.\n\n309\n00:12:38,570 --> 00:12:39,570\n>> It's right there.\n\n310\n00:12:39,570 --> 00:12:41,070\nSo, I'm just looking the service.\n\n311\n00:12:41,070 --> 00:12:43,580\nThe Microsoft iSCSI software target.\n\n312\n00:12:43,580 --> 00:12:44,910\nIt's right there, it's automatic.\n\n313\n00:12:44,910 --> 00:12:47,210\n>> Mm Hm.\n>> I'm going to restart this service.\n\n314\n00:12:47,210 --> 00:12:49,870\n>> Yeah, I was going to say,\nrestart that service.\n\n315\n00:12:49,870 --> 00:12:50,740\n>> Let that go.\n\n316\n00:12:50,740 --> 00:12:51,710\n>> When in doubt.\n>> And\n\n317\n00:12:51,710 --> 00:12:55,300\nwhile that's going I'm going to\nclose out of my server manager also.\n\n318\n00:12:55,300 --> 00:12:56,860\n>> And\nlet me just verify which server I'm on,\n\n319\n00:12:56,860 --> 00:12:59,660\nI want to make sure I didn't\nget on the wrong server.\n\n320\n00:12:59,660 --> 00:13:00,750\nI'm on server one, perfect.\n\n321\n00:13:01,850 --> 00:13:04,550\nOkay, so there you go,\nso it is up and running.\n\n322\n00:13:04,550 --> 00:13:06,230\nI'll go back into my server manager,\n\n323\n00:13:06,230 --> 00:13:08,547\nlet's see if we can have\nsome better luck this time.\n\n324\n00:13:14,508 --> 00:13:15,520\nAll right.\n\n325\n00:13:15,520 --> 00:13:16,050\nSo here I am.\n\n326\n00:13:16,050 --> 00:13:16,710\nI'm back in.\n\n327\n00:13:16,710 --> 00:13:19,445\nAgain, showing I don't have any disks so\nthat's no, no big deal.\n\n328\n00:13:19,445 --> 00:13:20,120\n>> Mm-hm.\n\n329\n00:13:20,120 --> 00:13:21,870\n>> So I'm gonna go in and add a disk.\n\n330\n00:13:21,870 --> 00:13:23,640\nIt's searching to find the server.\n\n331\n00:13:25,050 --> 00:13:26,380\nAnd still, no eligible servers.\n\n332\n00:13:26,380 --> 00:13:27,910\nNow that is really interesting.\n\n333\n00:13:27,910 --> 00:13:29,090\n>> Hm.\n\n334\n00:13:29,090 --> 00:13:31,160\n>> What have I done, Mike?\n\n335\n00:13:31,160 --> 00:13:35,720\n>> You know I have not seen that\n>> Just doesnt see himself,\n\n336\n00:13:35,720 --> 00:13:37,160\nit's definitely right, reboot the server.\n\n337\n00:13:38,180 --> 00:13:42,970\n>> I need to yeah, I could you know.\n\n338\n00:13:42,970 --> 00:13:47,848\nI might have remote manager not turned on\nthe firewall even though it kind of think\n\n339\n00:13:47,848 --> 00:13:51,504\nof itself and I think I had\nthe firewall turned off, I don't So,\n\n340\n00:13:51,504 --> 00:13:55,548\nlet's just eliminate the firewall\nas a possible cause, real quick.\n\n341\n00:14:02,912 --> 00:14:03,633\n>> Sure enough.\n\n342\n00:14:06,570 --> 00:14:08,110\n>> It's not gonna re-scan.\n\n343\n00:14:08,110 --> 00:14:09,190\nThat's it.\nIt's like, no, no.\n\n344\n00:14:09,190 --> 00:14:10,350\n>> Yeah.\n>> We don't wanna re-scan.\n\n345\n00:14:10,350 --> 00:14:13,050\n>> Too many times.\nWe might have to reboot now that\n\n346\n00:14:13,050 --> 00:14:14,050\nthe service is installed.\n\n347\n00:14:14,050 --> 00:14:15,470\nKind of frustrating.\n\n348\n00:14:16,640 --> 00:14:20,100\nSo, basically we need to be able to\nsee ourselves in order to add a disk.\n\n349\n00:14:20,100 --> 00:14:23,050\nI could jump over to another\nserver I've already got added\n\n350\n00:14:24,050 --> 00:14:28,280\nI've already got it added on DC1 so\nwe'll just jump over to that one.\n\n351\n00:14:32,720 --> 00:14:33,900\nHere we go.\n\n352\n00:14:33,900 --> 00:14:39,060\nSo here's another server where I've\nalready got the ISCSI server turned on and\n\n353\n00:14:39,060 --> 00:14:42,230\nbasically when you go in you'll see any\ndisks you have if you have any right.\n\n354\n00:14:42,230 --> 00:14:45,320\nOn a new server you won't have any\nJust need to create one and so\n\n355\n00:14:45,320 --> 00:14:50,640\nwe can whip over here to task and\nwe'll see new ISOZ virtual disk.\n\n356\n00:14:50,640 --> 00:14:54,190\nNow, because it is a virtual disk you\ncan move it from server to server so\n\n357\n00:14:54,190 --> 00:14:58,360\nif you already have one you could import\nif you were moving it to a new system, but\n\n358\n00:14:58,360 --> 00:15:03,210\nI'm just going to do a new\nISOZ disk Here we go.\n\n359\n00:15:03,210 --> 00:15:05,390\nAnd, yeah it finds itself, it should,\n\n360\n00:15:05,390 --> 00:15:07,080\nI mean this one should\nfind the other server too.\n\n361\n00:15:07,080 --> 00:15:07,900\n>> Yeah it really should, so\n\n362\n00:15:07,900 --> 00:15:10,260\nsomething's up with server one I'll\ntake a look while you're doing that.\n\n363\n00:15:10,260 --> 00:15:13,060\n>> It might be cause we still\nhave that fail cluster running?\n\n364\n00:15:13,060 --> 00:15:17,070\nAnd so it's got a virtual IP and a real\nIP and that might be getting in the way.\n\n365\n00:15:17,070 --> 00:15:20,025\n>> Is that we block everything but\n\n366\n00:15:20,025 --> 00:15:22,825\n[INAUDIBLE]\n>> [CROSSTALK] That was with network load\n\n367\n00:15:22,825 --> 00:15:23,341\nbounds.\n\n368\n00:15:23,341 --> 00:15:26,499\n[CROSSTALK] So well hey,\nwe'll do it here, it's fine.\n\n369\n00:15:26,499 --> 00:15:29,970\nSo I've got ITPro [INAUDIBLE] it's showing\nup, it's showing as not clustered.\n\n370\n00:15:29,970 --> 00:15:31,280\nOh, it's in a cluster.\n\n371\n00:15:31,280 --> 00:15:33,784\n>> So it's not a cluster [CROSSTALK]\n>> So\n\n372\n00:15:33,784 --> 00:15:37,450\nI have to use the fail over\ncluster manager to add it there.\n\n373\n00:15:37,450 --> 00:15:40,200\nYou don't remember from episode number\ntwo, we configured a cluster on\n\n374\n00:15:40,200 --> 00:15:41,560\nthe two servers, and so that--\n>> Mm-hm.\n\n375\n00:15:41,560 --> 00:15:42,730\n>> that's why it's not showing up.\n\n376\n00:15:42,730 --> 00:15:43,830\nThat makes sense.\n\n377\n00:15:43,830 --> 00:15:45,830\nAll right, so\nI'll just add it here, it's fine.\n\n378\n00:15:45,830 --> 00:15:48,460\nSo, I'm gonna add in a disk, and\n\n379\n00:15:48,460 --> 00:15:51,850\nit's gonna add in on this server here\n>> Mm-hm.\n\n380\n00:15:51,850 --> 00:15:54,300\n>> And I'll see you know,\nwhere it's gonna create it.\n\n381\n00:15:54,300 --> 00:15:56,100\nDo I wanna create it on my C drive?\n\n382\n00:15:56,100 --> 00:16:00,250\nOr some where else and\ni can always type in a custom path and\n\n383\n00:16:00,250 --> 00:16:04,418\nbrowse somewhere on my hard\ndrive to put this other disk.\n\n384\n00:16:04,418 --> 00:16:07,990\nDisk IO is gonna be another concern of\nours, every time you read and write.\n\n385\n00:16:07,990 --> 00:16:11,590\nIf you have a bunch of virtual iSCSI\nvolumes on the same physical disk,\n\n386\n00:16:11,590 --> 00:16:13,870\nthey're all competing for disk access.\n\n387\n00:16:13,870 --> 00:16:17,680\nSo you may wanna put each disk\non separate physical drives, so\n\n388\n00:16:17,680 --> 00:16:19,830\nthat they don't compete against\neach other for disk IO.\n\n389\n00:16:20,930 --> 00:16:22,690\nBut for me,\nI'll just stick it on the C drive.\n\n390\n00:16:22,690 --> 00:16:25,100\n>> Right on the operating system drive.\n\n391\n00:16:25,100 --> 00:16:25,621\n>> Yeah, yeah.\n[LAUGH]\n\n392\n00:16:25,621 --> 00:16:26,133\n>> [LAUGH]\n\n393\n00:16:26,133 --> 00:16:26,975\n>> All right, so\n\n394\n00:16:26,975 --> 00:16:31,261\nI'm gonna create this one and\nmaybe this will be our corporate storage,\n\n395\n00:16:31,261 --> 00:16:31,913\nright?\nSo\n\n396\n00:16:31,913 --> 00:16:34,530\nthis is where I want all my company\npeople to store their data.\n\n397\n00:16:34,530 --> 00:16:38,473\nSo I'll call this my\nCorporate Storage Drive, right?\n\n398\n00:16:38,473 --> 00:16:41,098\nOr this might be my backup drive or\nsomething like that.\n\n399\n00:16:41,098 --> 00:16:42,848\nAnd notice down here, what it's creating.\n\n400\n00:16:42,848 --> 00:16:49,320\nC:/iscuzzyvirtualdisks/CorporateStorage.v-\nhdx.\n\n401\n00:16:49,320 --> 00:16:52,030\nIt's a virtual hard drive\njust like we use in Hyper-V.\n\n402\n00:16:52,030 --> 00:16:52,800\n>> Yep.\n\n403\n00:16:52,800 --> 00:16:56,230\n>> The only difference is, instead of\nattaching this one to a virtual machine,\n\n404\n00:16:56,230 --> 00:16:59,250\nwe're going to be attaching\nit to the network, so\n\n405\n00:16:59,250 --> 00:17:01,490\nthat somebody out there on the network\nwill be able to connect to it.\n\n406\n00:17:02,760 --> 00:17:05,380\nAll right, I'll go ahead and hit next.\n\n407\n00:17:05,380 --> 00:17:08,684\nNow comes probably one of the most\nimportant decisions I'm gonna make as we\n\n408\n00:17:08,684 --> 00:17:09,265\nset this up.\n\n409\n00:17:09,265 --> 00:17:13,473\nAll right, there's two types of\ndisk that I can pick from here.\n\n410\n00:17:13,473 --> 00:17:14,723\nI know there's three on the screen,\nbut there's really just two.\n\n411\n00:17:14,723 --> 00:17:17,940\n>> [LAUGH]\n>> Fixed size is the default.\n\n412\n00:17:17,940 --> 00:17:19,724\nAnd dynamically expanding\nis the other one.\n\n413\n00:17:19,724 --> 00:17:25,182\nAnd just like Hyper-V, what this is\ntelling me is, if I do a fixed disc,\n\n414\n00:17:25,182 --> 00:17:31,280\nwhatever size I specify up here, it's\ngonna layout that entire disc right now.\n\n415\n00:17:31,280 --> 00:17:35,035\nSo even though the disk is empty,\nif I put 36 gigs here,\n\n416\n00:17:35,035 --> 00:17:40,143\nIt's gonna create a 36 gig drive and\nallocate 36 gigs of space right now.\n\n417\n00:17:40,143 --> 00:17:40,973\nAll right?\n\n418\n00:17:40,973 --> 00:17:45,056\nThe reason it does that is to ensure that\nwe don't get fragmentation down the road.\n\n419\n00:17:45,056 --> 00:17:50,820\nThen it's got 36 gigs of nice contiguous\nspace, all in order on the disk.\n\n420\n00:17:50,820 --> 00:17:53,431\nAnother option we have is to do\nwhat's called thin provisioning.\n\n421\n00:17:53,431 --> 00:17:58,417\nYou can go to Dynamically expanding, and\nnow it's gonna create a 36 gig disk also,\n\n422\n00:17:58,417 --> 00:18:01,890\nexcept the file itself will\nprobably be like 1 meg in size.\n\n423\n00:18:01,890 --> 00:18:03,420\n>> Right, yeah.\n\n424\n00:18:03,420 --> 00:18:06,690\n>> And as we copy data into it,\nit's gonna grow.\n\n425\n00:18:06,690 --> 00:18:09,960\nAnd so it'll grow to mirror the actual\namount of data that's inside it.\n\n426\n00:18:09,960 --> 00:18:11,520\nNow, that's a good thing, right?\n\n427\n00:18:12,750 --> 00:18:14,170\nCertainly more efficient.\n\n428\n00:18:14,170 --> 00:18:15,223\n>> Got a couple issues though, right?\n\n429\n00:18:15,223 --> 00:18:18,813\nCuz you can deal with those, Don said we\ncan deal with those fragmentation if it's\n\n430\n00:18:18,813 --> 00:18:21,640\nstarting to grow and it runs into\nanother file in the hard drive.\n\n431\n00:18:21,640 --> 00:18:22,970\nNow it's gotta go around that.\n\n432\n00:18:22,970 --> 00:18:25,560\nSo now you've got a fragmented hard drive.\n\n433\n00:18:25,560 --> 00:18:26,920\nOther issues are performance.\n\n434\n00:18:26,920 --> 00:18:31,540\nIf it's got to grow, you're adding\ndata to it, it stops everything,\n\n435\n00:18:31,540 --> 00:18:35,550\nresizes that volume for you, grows that\nvolume, and then you go back to work.\n\n436\n00:18:35,550 --> 00:18:38,270\nSo you've got performance issues and\nfragmentation issues there.\n\n437\n00:18:38,270 --> 00:18:40,570\nAnd for lab environments, fantastic.\n\n438\n00:18:40,570 --> 00:18:43,335\n>> For lab test practice,\nI do Dynamic all the time.\n\n439\n00:18:43,335 --> 00:18:45,990\n>> Mm-hm.\n>> For production, I always do fixed disk.\n\n440\n00:18:45,990 --> 00:18:46,490\n>> Yeah.\n>> Right?\n\n441\n00:18:46,490 --> 00:18:48,260\nFor production environments you want\n\n442\n00:18:48,260 --> 00:18:50,760\nthings to be optimized,\nyou wanna go fixed disk, all right?\n\n443\n00:18:50,760 --> 00:18:55,340\n>> Microsoft has been trying to say\nthey've updated all of the algorithms,\n\n444\n00:18:55,340 --> 00:18:56,100\nthings that it uses.\n\n445\n00:18:56,100 --> 00:18:59,534\nAnd the performance is supposed to be\nalmost as good with those dynamically\n\n446\n00:18:59,534 --> 00:19:00,055\nexpanding.\n\n447\n00:19:00,055 --> 00:19:02,330\n>> Mm-hm.\n>> But I don't see it.\n\n448\n00:19:02,330 --> 00:19:04,710\n>> Some of the other options we see\non the screen, if I go Fixed disk,\n\n449\n00:19:04,710 --> 00:19:08,070\nyou've got this option,\nClear the virtual disk on allocation.\n\n450\n00:19:08,070 --> 00:19:10,720\nAnd that means it's going to\nlay out this 36 gig disk, and\n\n451\n00:19:10,720 --> 00:19:14,390\nit's going to write a zero to every sector\nthroughout where that file is written.\n\n452\n00:19:14,390 --> 00:19:16,806\nAnd it makes it take a while, right?\n\n453\n00:19:16,806 --> 00:19:19,931\nThe bigger the disc, if you do a terabyte\ndisc, it can take an hour to create.\n\n454\n00:19:19,931 --> 00:19:20,490\n>> Mm, yeah.\n\n455\n00:19:20,490 --> 00:19:22,190\n>> Right?\nIt can take a while.\n\n456\n00:19:22,190 --> 00:19:26,780\nIf you uncheck that option, it'll lay out\nthe disc, but it won't write a zero, so\n\n457\n00:19:26,780 --> 00:19:28,385\nit'll happen much, much faster.\n\n458\n00:19:28,385 --> 00:19:29,265\n>> Mm-hm.\n>> But Microsoft\n\n459\n00:19:29,265 --> 00:19:32,223\ndoesn't recommend that cuz\nit's not a truly clean drive.\n\n460\n00:19:32,223 --> 00:19:35,682\nThere's technically still undeleted,\nor whatever.\n\n461\n00:19:35,682 --> 00:19:38,848\n>> Data that has no pointers anymore\nto it, but it's still there.\n\n462\n00:19:38,848 --> 00:19:40,556\n>> So they don't recommend that.\n\n463\n00:19:40,556 --> 00:19:42,920\nIt's checked by default, and\nthat's usually what you want.\n\n464\n00:19:42,920 --> 00:19:45,400\nBut it means this operation is\ngoing to take a lot longer.\n\n465\n00:19:45,400 --> 00:19:47,945\nIf we do dynamically expanding,\nit's almost instantaneous.\n\n466\n00:19:47,945 --> 00:19:48,550\n>> Mm-hm.\n\n467\n00:19:48,550 --> 00:19:50,470\n>> Differencing is the third one.\n\n468\n00:19:50,470 --> 00:19:53,830\nAnd that's where I say I\nalready have a drive, but\n\n469\n00:19:53,830 --> 00:19:55,370\nI don't want to make any changes to it.\n\n470\n00:19:55,370 --> 00:19:58,907\nI'm going to create a second drive,\nand any changes I would\n\n471\n00:19:58,907 --> 00:20:03,098\nhave made to the first one,\nput the changes in the differencing disk.\n\n472\n00:20:03,098 --> 00:20:08,071\nThis way I can have either a master disk,\nor some kind of unchanged element that has\n\n473\n00:20:08,071 --> 00:20:12,849\nthe original data, and then just changes\ngo into the disk that I'm creating.\n\n474\n00:20:12,849 --> 00:20:16,482\nIt's really useful if you're built to\nbuild ten servers and they're all running\n\n475\n00:20:16,482 --> 00:20:19,850\nWindows Server 2012, then they've\nall got about ten gigs of storage,\n\n476\n00:20:19,850 --> 00:20:23,480\nwhich is the operating system that's\nidentical across all of them.\n\n477\n00:20:23,480 --> 00:20:27,867\nSo you could create one disk that had the\nbasic install of Windows Server 2012, and\n\n478\n00:20:27,867 --> 00:20:31,430\nthen create a differencing disk for\neach of your individual servers.\n\n479\n00:20:31,430 --> 00:20:35,794\nSo, Web 01, Web 02, FTP,\nwhatever the servers were.\n\n480\n00:20:35,794 --> 00:20:38,490\nAnd in the differencing disk,\nwe just have the changes,\n\n481\n00:20:38,490 --> 00:20:40,590\nwhere we changed the computer name,\njoined them to the domain,\n\n482\n00:20:40,590 --> 00:20:43,720\nand all that other stuff,\nthe unique stuff in those other files.\n\n483\n00:20:43,720 --> 00:20:46,513\nAgain, useful in a test and\nlab environment, not so\n\n484\n00:20:46,513 --> 00:20:48,556\nuseful in a production environment.\n\n485\n00:20:48,556 --> 00:20:49,473\n>> No, definitely not.\n\n486\n00:20:49,473 --> 00:20:52,423\nIf you've got ten machines all trying\nto hit the same base hard drive of\n\n487\n00:20:52,423 --> 00:20:55,130\nthat operating system,\nyou've got contention issues there.\n\n488\n00:20:56,280 --> 00:20:58,940\n>> All right, well I'm gonna go ahead and\ndo a dynamically expanding disk.\n\n489\n00:20:58,940 --> 00:21:03,330\nAnd I'll build one that is\n127 gigs in size, right?\n\n490\n00:21:03,330 --> 00:21:04,550\nI think that's the default for Hyper-V.\n\n491\n00:21:04,550 --> 00:21:05,710\n>> It is.\n[LAUGH]\n\n492\n00:21:05,710 --> 00:21:07,560\n>> So I'll do 127 gig dynamically\n\n493\n00:21:07,560 --> 00:21:08,980\nexpanding disk.\n\n494\n00:21:08,980 --> 00:21:11,500\nAll right,\nthen the next thing I need to do,\n\n495\n00:21:11,500 --> 00:21:15,530\nis I need to specify who's\nallowed to connect to it, right?\n\n496\n00:21:17,050 --> 00:21:19,775\nSorry, not who's allowed to connect to it,\nbut who's gonna host it.\n\n497\n00:21:19,775 --> 00:21:22,250\n>> Mm-hm.\n>> So, the default is that, oh no,\n\n498\n00:21:22,250 --> 00:21:23,479\nI'm sorry, I was right in the first place.\n\n499\n00:21:23,479 --> 00:21:24,931\n>> [CROSSTALK] you were doing both,\nactually, there.\n\n500\n00:21:24,931 --> 00:21:27,530\nWe're specifying the target and\nthen who it connects to, yep.\n\n501\n00:21:27,530 --> 00:21:29,650\n>> So, our server is the target.\n\n502\n00:21:29,650 --> 00:21:31,980\nAnd then we need to say\nwho's allowed to connect.\n\n503\n00:21:31,980 --> 00:21:34,670\nAnd so we need to give our target\na name that we can recognize.\n\n504\n00:21:34,670 --> 00:21:35,965\nAnd you'll see where I was in a hurry.\n\n505\n00:21:35,965 --> 00:21:36,870\n>> [LAUGH]\n>> And I just went with\n\n506\n00:21:36,870 --> 00:21:38,380\nthe default target one.\n\n507\n00:21:38,380 --> 00:21:40,650\nIn real life,\nI almost always name it after the server.\n\n508\n00:21:40,650 --> 00:21:42,175\nSo I'm gonna do a new iSCSI target.\n\n509\n00:21:42,175 --> 00:21:42,890\n>> Mm-hm.\n\n510\n00:21:42,890 --> 00:21:44,897\n>> And so\nwe're gonna create a new target name.\n\n511\n00:21:46,170 --> 00:21:50,015\nAnd for the target name,\nI'm gonna call it ITProTV2-dc1.\n\n512\n00:21:50,015 --> 00:21:51,620\nThat's this server's name.\n\n513\n00:21:51,620 --> 00:21:53,040\nAnd that way I can easily spot it.\n\n514\n00:21:53,040 --> 00:21:56,940\nYou're going to see, as we get more and\nmore targets on our network,\n\n515\n00:21:56,940 --> 00:22:00,030\nit gets really confusing to figure\nout which one you're connected to.\n\n516\n00:22:00,030 --> 00:22:04,470\nSo giving them a good name like this is\nreally important to recognizing them.\n\n517\n00:22:04,470 --> 00:22:06,035\n>> Unless you want to memorize that IQN.\n\n518\n00:22:06,035 --> 00:22:06,702\n>> [LAUGH] Yeah.\n\n519\n00:22:06,702 --> 00:22:10,130\n>> That iSCSI-qualifying name that it\ngenerates, which is, yeah, not enough.\n\n520\n00:22:10,130 --> 00:22:12,090\n>> Those are really long,\nlots of random numbers.\n\n521\n00:22:12,090 --> 00:22:13,560\n>> Yep.\n>> And calling it Target One is\n\n522\n00:22:13,560 --> 00:22:14,835\nnot a great idea either.\n\n523\n00:22:14,835 --> 00:22:16,180\n>> [LAUGH]\n>> But I was trying to rush through\n\n524\n00:22:16,180 --> 00:22:17,790\nit during that break just to get it done.\n\n525\n00:22:17,790 --> 00:22:18,820\nSo, all right.\n\n526\n00:22:18,820 --> 00:22:21,040\nSo I'll go with that.\n\n527\n00:22:21,040 --> 00:22:24,700\nThen I can specify who's\nallowed to connect to it.\n\n528\n00:22:24,700 --> 00:22:29,560\nThe iSCSI initiators, that's the client\nsoftware they're gonna be connecting.\n\n529\n00:22:29,560 --> 00:22:32,710\nSo I need to think about who\nI want to allow to connect,\n\n530\n00:22:32,710 --> 00:22:35,098\nand I just come through and I specify it.\n\n531\n00:22:35,098 --> 00:22:40,474\nI don't want to just let everybody\nout there connect, I want to specify.\n\n532\n00:22:40,474 --> 00:22:44,130\nNow, sometimes we know a lot of\ninformation about who's gonna connect.\n\n533\n00:22:44,130 --> 00:22:47,150\nWe might know the IQMs for\nthe servers, all right.\n\n534\n00:22:47,150 --> 00:22:50,181\nIf you don't,\nthen you can manually put it in.\n\n535\n00:22:50,181 --> 00:22:54,470\nAnd this is what I normally do, I\nnormally come in and do it by IP address.\n\n536\n00:22:54,470 --> 00:22:56,995\nBecause you know the IP addresses of\nthe people that are gonna connect.\n\n537\n00:22:56,995 --> 00:22:57,580\n>> Mm-hm.\n>> But\n\n538\n00:22:57,580 --> 00:23:00,960\nyou'll see you can also do it by their\nMAC address of their network card.\n\n539\n00:23:00,960 --> 00:23:01,480\n>> Yep.\n\n540\n00:23:01,480 --> 00:23:05,420\n>> You can do it by their DNS name or\ntheir IQN if you know it.\n\n541\n00:23:05,420 --> 00:23:07,598\nAnd here's an example of\nan IQN right up here.\n\n542\n00:23:07,598 --> 00:23:08,223\n>> Mm-hm.\n\n543\n00:23:08,223 --> 00:23:12,406\n>> All right, so I don't know the IQN,\nso I might just go in and\n\n544\n00:23:12,406 --> 00:23:17,640\ndo IP address, and say that-\n>> 100, 241.\n\n545\n00:23:17,640 --> 00:23:21,018\nYou know what, I'm gonna do,\nlet's see, 241 will be good, and\n\n546\n00:23:21,018 --> 00:23:22,670\nthen 242 is the other server.\n\n547\n00:23:23,760 --> 00:23:27,473\nAnd I might even list myself, just because\nmaybe I want to connect to my own drive.\n\n548\n00:23:27,473 --> 00:23:30,930\nThat's something that we do occasionally.\n\n549\n00:23:30,930 --> 00:23:36,610\nAll right, so\nI'm just adding in each of the ones\n\n550\n00:23:36,610 --> 00:23:39,925\nthat I know I'm gonna let connect.\n\n551\n00:23:39,925 --> 00:23:42,655\nNow, rule of thumb,\nwe generally don't want to have\n\n552\n00:23:42,655 --> 00:23:45,315\ntwo servers connecting to\nthe same drive at the same time.\n\n553\n00:23:45,315 --> 00:23:49,140\nSo for this target, we might only list one\nclient, and then it becomes exclusive.\n\n554\n00:23:49,140 --> 00:23:50,222\n>> Mm-hm.\n>> All right, but\n\n555\n00:23:50,222 --> 00:23:53,926\nif you're gonna do what we did the other\nday, which was cluster shared volumes,\n\n556\n00:23:53,926 --> 00:23:56,995\nwhere people are sharing access,\nThen you need to list each node.\n\n557\n00:23:56,995 --> 00:23:58,623\nSo, this might be a three-node cluster.\n\n558\n00:23:58,623 --> 00:24:03,043\nI would list each cluster node in here,\ncuz they all may need to connect to it,\n\n559\n00:24:03,043 --> 00:24:05,631\ndepending on whether they've gone active.\n\n560\n00:24:05,631 --> 00:24:06,971\nAll right.\n>> You can come back in, and change it.\n\n561\n00:24:06,971 --> 00:24:10,486\nYou can always come back, and\nadd addition targets if you need to, or\n\n562\n00:24:10,486 --> 00:24:13,530\nadditional initiators that\nwanna connect to that target.\n\n563\n00:24:13,530 --> 00:24:15,505\nIf you add another server,\ndo a node later on.\n\n564\n00:24:15,505 --> 00:24:16,859\nYou can come back, and\nthrow that in there.\n\n565\n00:24:18,140 --> 00:24:21,243\n>> All right, an extra step we\ncan do to protect ourselves,\n\n566\n00:24:21,243 --> 00:24:25,720\nIP addresses can be spoofed, Mac addresses\ncan be spoofed, IQNs can be spoofed.\n\n567\n00:24:25,720 --> 00:24:27,460\nAll of those things can be spoofed.\n\n568\n00:24:27,460 --> 00:24:31,618\nSo, to protect ourselves, we might\nchoose to add Authentication, all right?\n\n569\n00:24:31,618 --> 00:24:35,024\nWell, the authentication piece for\nis typically done with CHAP,\n\n570\n00:24:35,024 --> 00:24:37,466\nthe challenge handshake\nauthentication protocol.\n\n571\n00:24:37,466 --> 00:24:41,500\nWhere you specify a name, and\na password for people to connect.\n\n572\n00:24:41,500 --> 00:24:44,503\nAnd so, I could come in here, and\nspecify a username, and password, and\n\n573\n00:24:44,503 --> 00:24:46,860\nsomebody would need to present to connect.\n\n574\n00:24:46,860 --> 00:24:51,353\nAlso supports reverse authentication,\nwhere it's not the client\n\n575\n00:24:51,353 --> 00:24:56,574\nauthenticating to the server, but\nthe server authenticating to the client.\n\n576\n00:24:56,574 --> 00:24:58,860\nSo, the client knows they\nconnect to the real person.\n\n577\n00:24:58,860 --> 00:25:01,596\nSo, we might choose to\nturn on both directions,\n\n578\n00:25:01,596 --> 00:25:05,757\nto make sure that we are cross\nauthenticating our systems, if we want to.\n\n579\n00:25:05,757 --> 00:25:06,372\nRight?\n\n580\n00:25:06,372 --> 00:25:08,700\nI'm gonna leave that off for\nright now, but it's easy to turn.\n\n581\n00:25:08,700 --> 00:25:10,686\nAnd you can turn it on after the fact too.\n\n582\n00:25:10,686 --> 00:25:11,708\n>> Absolutely.\n\n583\n00:25:11,708 --> 00:25:12,392\n>> All right.\n\n584\n00:25:12,392 --> 00:25:19,540\nWhen that's done, I now have a new target\nwith a single drive, inside of it.\n\n585\n00:25:19,540 --> 00:25:21,520\nAnd either of the IP\naddresses that I listed,\n\n586\n00:25:21,520 --> 00:25:23,248\nwill be able to connect to this target.\n\n587\n00:25:23,248 --> 00:25:28,099\nAnd they'll see that 127 gig drive,\nsitting right there.\n\n588\n00:25:28,099 --> 00:25:29,110\nAll right.\n\n589\n00:25:29,110 --> 00:25:32,297\nNow, they will just see\nthat 127 gig drive.\n\n590\n00:25:32,297 --> 00:25:37,190\nIf they connect it to the one target,\nthey would see these four drives.\n\n591\n00:25:37,190 --> 00:25:40,931\nSo, you can have more than one drive\nattached to a singe target, if you want.\n\n592\n00:25:40,931 --> 00:25:43,760\nIt makes things a little bit easier,\nto manage sometimes.\n\n593\n00:25:43,760 --> 00:25:48,445\nSo, the target name normally\nreferences the role of those drives.\n\n594\n00:25:48,445 --> 00:25:49,769\nWhat they're gonna be doing?\n\n595\n00:25:49,769 --> 00:25:52,981\nSo, if I have a web server that needs\nfive volumes, I might have five volumes\n\n596\n00:25:52,981 --> 00:25:56,570\nall with one target name,\nthat tells me that, that's the web server.\n\n597\n00:25:56,570 --> 00:25:59,663\nGive it a name that makes sense to you,\nso you can recognize what it does,\n\n598\n00:25:59,663 --> 00:26:00,184\nwhat it is.\n\n599\n00:26:02,470 --> 00:26:05,640\nAll right, so now, I'm an iscuzzy server.\n\n600\n00:26:05,640 --> 00:26:07,560\nI'm up, I'm running.\n\n601\n00:26:07,560 --> 00:26:08,839\nI've got a virtual hard drive.\n\n602\n00:26:08,839 --> 00:26:10,742\nI'm just waiting for\nsomebody to connect to it, and\n\n603\n00:26:10,742 --> 00:26:12,440\nthe hard drive's not very big at all,\nright?\n\n604\n00:26:12,440 --> 00:26:18,141\nIf I browse to C:iscuzzy virtual disks,\nthere's corporate storage.\n\n605\n00:26:18,141 --> 00:26:21,050\nIt's a four megs inside,\nbut it's mostly empty.\n\n606\n00:26:21,050 --> 00:26:23,930\nYou'll see some of these other ones,\nI just called them disk one through disk\n\n607\n00:26:23,930 --> 00:26:25,987\nfour, where they're actually\npopulated with data.\n\n608\n00:26:25,987 --> 00:26:26,609\n>> Yep.\n>> This one,\n\n609\n00:26:26,609 --> 00:26:29,810\nwe actually installed\nWindows Server 2012 inside of it.\n\n610\n00:26:29,810 --> 00:26:30,819\nSo it's grown quite a bit.\n\n611\n00:26:30,819 --> 00:26:32,758\n>> [INAUDIBLE] Yeah.\n\n612\n00:26:32,758 --> 00:26:38,030\n>> So now, we've got that disk, that's up,\nnow we just need to connect to it, right?\n\n613\n00:26:38,030 --> 00:26:41,144\nIf we connect to it, we'll be able to\nsee that storage, and work with it.\n\n614\n00:26:41,144 --> 00:26:43,645\nSo, if I jump over to one\nof my other servers, so\n\n615\n00:26:43,645 --> 00:26:45,720\nhere's a server that's in that list.\n\n616\n00:26:47,120 --> 00:26:53,983\nOn this one, I can fire up my\niscuzzy initiator, my client.\n\n617\n00:26:53,983 --> 00:26:58,032\nAnd, all I need to do is reach out\nto that server, and connect to it.\n\n618\n00:26:58,032 --> 00:26:58,705\nAll right?\n\n619\n00:26:58,705 --> 00:27:01,550\nNow, if I know the full target name,\nand all of that.\n\n620\n00:27:01,550 --> 00:27:03,881\nI can punch it in here,\nand do a quick connect.\n\n621\n00:27:03,881 --> 00:27:06,510\nI'll tell you,\nI don't normally know the whole name.\n\n622\n00:27:06,510 --> 00:27:09,025\nAnd so,\nit doesn't normally workout for me.\n\n623\n00:27:09,025 --> 00:27:11,662\nBut in this case,\nwhen I go to a quick connect,\n\n624\n00:27:11,662 --> 00:27:14,440\nI can see those targets right there.\n\n625\n00:27:14,440 --> 00:27:16,022\nThere's somebody on target one, I guess.\n\n626\n00:27:16,022 --> 00:27:18,776\nBut here's the on I want, ITProTV 2 DC1.\n\n627\n00:27:18,776 --> 00:27:19,547\nRight, I named it.\n\n628\n00:27:19,547 --> 00:27:21,519\nSo, I can recognize what it was.\n\n629\n00:27:21,519 --> 00:27:25,198\nAnd I can choose it in connect,\nand when I connect,\n\n630\n00:27:25,198 --> 00:27:29,060\nit shows that I'm connected\nto that target, right?\n\n631\n00:27:29,060 --> 00:27:33,210\nSo, there I am connected to it, and\nI should see that drive, right?\n\n632\n00:27:33,210 --> 00:27:34,520\n>> Yeah, you should see yeah.\n\n633\n00:27:34,520 --> 00:27:36,040\n>> So, let's go find out.\n\n634\n00:27:38,520 --> 00:27:39,421\nProve it to me Don.\n[LAUGH]\n\n635\n00:27:39,421 --> 00:27:40,087\n>> I know, [LAUGH] now,\n\n636\n00:27:40,087 --> 00:27:41,585\nwe're going in here, and I won't be there.\n\n637\n00:27:41,585 --> 00:27:42,234\n>> Yeah, right.\n\n638\n00:27:42,234 --> 00:27:43,346\n[LAUGH]\n>> But actually,\n\n639\n00:27:43,346 --> 00:27:44,260\nyou've got a lot of drives in this one.\n\n640\n00:27:44,260 --> 00:27:46,382\nSo, we have to see in the mix here.\n\n641\n00:27:46,382 --> 00:27:47,717\nIt should be 127 gigs.\n\n642\n00:27:47,717 --> 00:27:48,679\n>> There it is.\n\n643\n00:27:48,679 --> 00:27:50,868\nThere is a 127 gig hard drive.\n\n644\n00:27:50,868 --> 00:27:53,758\nNow to this server,\nit looks like local storage.\n\n645\n00:27:53,758 --> 00:27:55,070\nLooks like storage here.\n\n646\n00:27:55,070 --> 00:27:59,943\nBut in reality, it's having to reach over\nthe network to the other server to write\n\n647\n00:27:59,943 --> 00:28:03,134\ndata to it, and\nthat data is being stored in that VHD.\n\n648\n00:28:03,134 --> 00:28:06,493\nSo, I'm gonna go ahead, and\nbring this thing online.\n\n649\n00:28:06,493 --> 00:28:10,628\nAnd we'll initialize it.\n\n650\n00:28:10,628 --> 00:28:11,160\nAll right.\n\n651\n00:28:11,160 --> 00:28:16,301\nAnd I'll create a partition on it, just\nlike, I would with a physical hard drive.\n\n652\n00:28:16,301 --> 00:28:18,424\nI'm treating this like\nany other hard drive.\n\n653\n00:28:18,424 --> 00:28:21,010\nI'll format the whole thing,\nmake it my D drive.\n\n654\n00:28:24,211 --> 00:28:27,010\nIt's my corporate storage, all right.\n\n655\n00:28:27,010 --> 00:28:28,420\nSo, I am just gonna get that provisioned.\n\n656\n00:28:28,420 --> 00:28:32,960\nAnd then, let me find a file,\nthat I can throw in there.\n\n657\n00:28:32,960 --> 00:28:34,870\nLet me take a look at this well,\nit has 4 gigs.\n\n658\n00:28:34,870 --> 00:28:36,835\nLet me take a look at something a little\nsmaller, I don't want to be here all day.\n\n659\n00:28:36,835 --> 00:28:41,783\n>> [LAUGH]\n>> [LAUGH] Let's take a couple\n\n660\n00:28:41,783 --> 00:28:45,428\nof DLLs, or something.\n\n661\n00:28:48,390 --> 00:28:53,378\nThis is the Hyper-V management Software.\n\n662\n00:28:53,378 --> 00:28:54,708\nSo, we'll take it.\n\n663\n00:28:54,708 --> 00:28:59,081\nAnd there's my D drive, and I'm just\ngonna paste all that junk in there.\n\n664\n00:29:00,984 --> 00:29:01,855\nThere we go.\n\n665\n00:29:01,855 --> 00:29:06,692\nSo, I just threw some stuff in there,\nso that you kind of see this thing.\n\n666\n00:29:06,692 --> 00:29:09,175\n>> Size got up a little bit,\non that dynamically expanding drive.\n\n667\n00:29:10,275 --> 00:29:12,972\n>> Now, I see it as a regular drive here,\nso when I look at D,\n\n668\n00:29:12,972 --> 00:29:15,691\nI can see that I've barely\nmade a dent in it, haven't I?\n\n669\n00:29:15,691 --> 00:29:22,390\nSo, maybe if I throw\na little more in there.\n\n670\n00:29:22,390 --> 00:29:27,338\nThat must be a real small amount of data,\nI thought it was a decent size, but\n\n671\n00:29:27,338 --> 00:29:29,236\nit really isn't much is it?\n\n672\n00:29:29,236 --> 00:29:32,605\n>> Looks like about 3, 4 megs [LAUGH]\n>> It must be [LAUGH].\n\n673\n00:29:32,605 --> 00:29:36,007\nAll right, so, this is a of data.\n\n674\n00:29:36,007 --> 00:29:41,607\nSo, yeah, I haven't copied much in there,\nused space is 165 megs, right.\n\n675\n00:29:41,607 --> 00:29:43,498\n>> Use to create a file of a certain size.\n\n676\n00:29:43,498 --> 00:29:45,720\n[CROSSTALK]\n>> Yeah, but it creates the empty ones,\n\n677\n00:29:45,720 --> 00:29:46,722\nthat don't really count.\n\n678\n00:29:46,722 --> 00:29:48,410\n>> No, I can make you a big one.\n\n679\n00:29:48,410 --> 00:29:50,023\nOpen up command prompt navigate,\nand let's try it.\n\n680\n00:29:50,023 --> 00:29:51,068\n>> Well, and actually.\n\n681\n00:29:51,068 --> 00:29:52,472\n>> Yeah, let's do it.\n\n682\n00:29:52,472 --> 00:29:53,026\nLet's see what happens.\n\n683\n00:29:53,026 --> 00:29:55,321\nFsutil.\n\n684\n00:29:55,321 --> 00:29:56,343\nAre you in D drive yet?\n\n685\n00:29:56,343 --> 00:30:00,753\nFile, createnew, all one word.\n\n686\n00:30:00,753 --> 00:30:02,785\nAnd then what is it?\n\n687\n00:30:02,785 --> 00:30:06,114\nThe name of the file test.\n\n688\n00:30:06,114 --> 00:30:07,343\nAnd then the, the size.\n\n689\n00:30:07,343 --> 00:30:10,548\nAnd you can make it ten gig.\n\n690\n00:30:10,548 --> 00:30:14,448\n>> I don't see, bytes, k, megs, gigs.\n\n691\n00:30:14,448 --> 00:30:15,966\nAccessed denied.\n\n692\n00:30:15,966 --> 00:30:17,440\nYou need to be an administrator.\n\n693\n00:30:17,440 --> 00:30:19,401\nI'm pretty sure Mike, when you do that,\n\n694\n00:30:19,401 --> 00:30:21,770\ncuz the file contents\nitself are actually empty.\n\n695\n00:30:21,770 --> 00:30:23,781\n[CROSSTALK]\n>> No, I used it to test my disk lotus.\n\n696\n00:30:23,781 --> 00:30:28,620\n>> And well but see disk lotus count\noff the reported size of the file.\n\n697\n00:30:28,620 --> 00:30:31,320\nAnd see, I don't think that this will\nactually make the file grow, but\n\n698\n00:30:31,320 --> 00:30:32,311\nit will report that size.\n\n699\n00:30:32,311 --> 00:30:33,491\nYeah, it's a weird one.\n\n700\n00:30:33,491 --> 00:30:35,150\nBut we do have a little bit, in there.\n\n701\n00:30:35,150 --> 00:30:38,881\nLet's go jump, and\nsee if that VHD has grown in size at all.\n\n702\n00:30:38,881 --> 00:30:40,623\n>> Maybe a little bit.\n\n703\n00:30:40,623 --> 00:30:41,575\n>> Yeah, it'll be sad.\n\n704\n00:30:41,575 --> 00:30:42,547\n>> I should have picked some bigger data.\n\n705\n00:30:42,547 --> 00:30:45,990\n[LAUGH]\n>> Well, now, I can see it's 256 megs now.\n\n706\n00:30:45,990 --> 00:30:49,288\n>> Whereas it was only 4 megs, yeah.\n\n707\n00:30:49,288 --> 00:30:52,050\nSo, it copied a bit in there,\nit just happened to be kind of fast today.\n\n708\n00:30:52,050 --> 00:30:53,003\nSo that's cool.\n\n709\n00:30:53,003 --> 00:30:54,702\n>> Nice.\n>> So, there you go,\n\n710\n00:30:54,702 --> 00:30:57,004\nit is growing as we throw data in.\n\n711\n00:30:57,004 --> 00:31:00,352\nSomehow identical in size to disk 1,\nwhich is interesting.\n\n712\n00:31:00,352 --> 00:31:04,032\n[LAUGH] But anyhow, yeah, so\nit's growing to reflect that.\n\n713\n00:31:04,032 --> 00:31:04,820\nSo that's pretty cool.\n\n714\n00:31:06,150 --> 00:31:09,010\nSo, it's working,\nI think that's a local drive.\n\n715\n00:31:09,010 --> 00:31:11,340\nI think it's a right here in my server.\n\n716\n00:31:11,340 --> 00:31:13,763\nBut in reality, it's over the network.\n\n717\n00:31:13,763 --> 00:31:16,160\nSo very, very cool stuff there.\n\n718\n00:31:16,160 --> 00:31:20,784\nNow, there's more we can do with this, and\nI wanna show you guys some of the neat\n\n719\n00:31:20,784 --> 00:31:23,770\nstuff, but it's about time for\nus to take a break.\n\n720\n00:31:23,770 --> 00:31:25,823\n>> So, let's stop here,\nand when we get back,\n\n721\n00:31:25,823 --> 00:31:28,701\nwe'll get a chance to see some\nmore iSCSI action, after this.\n\n722\n00:31:28,701 --> 00:31:35,969\n[MUSIC]\n\n723\n00:31:35,969 --> 00:31:37,849\nAll right, welcome back everybody.\n\n724\n00:31:37,849 --> 00:31:42,739\nSo at this stage in the game,\nwe've got a iscuzzy drive set up,\n\n725\n00:31:42,739 --> 00:31:44,598\non our iscuzzy target.\n\n726\n00:31:44,598 --> 00:31:48,110\nWe've got an iscuzzy client using\nit's initiator to connect up, and\n\n727\n00:31:48,110 --> 00:31:49,069\nmount that drive.\n\n728\n00:31:49,069 --> 00:31:51,495\nAnd we're copying data to it,\nand it's working great.\n\n729\n00:31:51,495 --> 00:31:55,061\nIt's growing, as it goes There's one\nother thing I need to mention on\n\n730\n00:31:55,061 --> 00:31:59,370\nthe iSCSI that's important for\nus as far as performance is concerned.\n\n731\n00:31:59,370 --> 00:32:02,280\nThis drive is located over the network.\n\n732\n00:32:02,280 --> 00:32:05,150\nAnd there's a certain\nbehavior that Windows\n\n733\n00:32:05,150 --> 00:32:08,770\nfollows that can actually impact\ndisk IO pretty badly here.\n\n734\n00:32:08,770 --> 00:32:14,280\nWhen you delete a file in Windows it\ndoes a delete notification to the drive.\n\n735\n00:32:14,280 --> 00:32:18,010\nIt basically communicates to the drive\nsaying this file is being deleted and\n\n736\n00:32:18,010 --> 00:32:20,490\nin some cases it will do\na scrub of that file.\n\n737\n00:32:20,490 --> 00:32:24,450\nIt generates a lot of disk IO all right,\nand it hurts performance.\n\n738\n00:32:24,450 --> 00:32:27,550\nWell, on a local drive we don't even\nnotice it so we don't think about it.\n\n739\n00:32:27,550 --> 00:32:30,720\nBut on a network drive,\nthis is happening over the network, and\n\n740\n00:32:30,720 --> 00:32:34,122\nit's tying up the iSCSI scan doing\nsomething that's not really necessary.\n\n741\n00:32:34,122 --> 00:32:38,660\nAll right in fact, on SSDs,\non solid state digital drives\n\n742\n00:32:38,660 --> 00:32:42,560\nthat extra delete notify can\nshorten the lifespan of the drive.\n\n743\n00:32:42,560 --> 00:32:43,090\n>> Absolutely.\n\n744\n00:32:43,090 --> 00:32:47,678\n>> So, when you install an SSD into\na Windows box now, if it's Windows 8 or\n\n745\n00:32:47,678 --> 00:32:48,894\nServer 2012.\n\n746\n00:32:48,894 --> 00:32:52,106\nThey'll automatically\ndetect that it's a SSD,\n\n747\n00:32:52,106 --> 00:32:55,709\nand they will automatically\ndisable the trim feature.\n\n748\n00:32:55,709 --> 00:32:56,900\nThey'll turn that off.\n\n749\n00:32:56,900 --> 00:32:59,621\nThey'll say we don't need to\nreclaim that unused disk space.\n\n750\n00:32:59,621 --> 00:33:02,800\nInstead, we can just leave it be and\nwe'll override it as we go.\n\n751\n00:33:02,800 --> 00:33:03,470\n>> Yeah as we go, yeah.\n\n752\n00:33:03,470 --> 00:33:04,570\n>> Don't generate the disk file, right?\n\n753\n00:33:04,570 --> 00:33:05,350\n>> Mm-hm.\n\n754\n00:33:05,350 --> 00:33:10,062\n>> Well when you connect to an iSCSI\ndrive, it should do the same thing.\n\n755\n00:33:10,062 --> 00:33:12,820\nAll right, it should disable trim for\n\n756\n00:33:12,820 --> 00:33:15,704\nthat system because it knows\nthat it hurts performance.\n\n757\n00:33:15,704 --> 00:33:17,345\nBut it doesn't always do it.\n\n758\n00:33:17,345 --> 00:33:19,520\n>> Hm.\n>> Sometimes it can get a little confused\n\n759\n00:33:19,520 --> 00:33:21,580\nor not properly recognize the drive.\n\n760\n00:33:21,580 --> 00:33:23,880\nSo it's a good idea to doublecheck it.\n\n761\n00:33:23,880 --> 00:33:27,408\nIt's such a good idea that they even\nmention it in the exam objectives.\n\n762\n00:33:27,408 --> 00:33:28,188\n>> [CROSSTALK]\n>> If you look\n\n763\n00:33:28,188 --> 00:33:31,438\nthey call out thin provisioning and\ntrim right there, and\n\n764\n00:33:31,438 --> 00:33:35,360\nthat's what they're talking\nabout is that delete notify.\n\n765\n00:33:35,360 --> 00:33:38,450\nSo, let me just show you\nreal quick how we can check.\n\n766\n00:33:38,450 --> 00:33:41,750\nI'll tell you guys, it's almost always\nturned on already so it's not so\n\n767\n00:33:41,750 --> 00:33:45,510\nmuch something we need to turn on as much\nas we need to verify that it's done.\n\n768\n00:33:45,510 --> 00:33:49,680\nSo, this is my iSCSI client, and\n\n769\n00:33:49,680 --> 00:33:56,540\nwhat I'm going to do is I'm just going\nverify real quick that trim is disabled.\n\n770\n00:33:57,570 --> 00:34:01,180\nSo I'm gonna open up a Administrative\nCommand Prompt, and let me bump my\n\n771\n00:34:01,180 --> 00:34:06,275\nfont size up real quick, and\nthat way everybody will be able to read.\n\n772\n00:34:06,275 --> 00:34:08,542\n>> Thank you my old eyes for\nhaving trouble with that one.\n\n773\n00:34:08,542 --> 00:34:10,309\n[LAUGH]\n>> All right so\n\n774\n00:34:10,309 --> 00:34:14,590\nthat's that same fsutil that Mike\nwas talking about before the break.\n\n775\n00:34:14,590 --> 00:34:17,087\nIt's a neat utility that we\ndon't see very often, but\n\n776\n00:34:17,087 --> 00:34:19,747\nit allows us to manipulate\nthe file system.\n\n777\n00:34:19,747 --> 00:34:28,419\nAnd you can run fsutil behavior\nquery DisableDeleteNotify.\n\n778\n00:34:28,419 --> 00:34:31,503\nAll right that's the delete\nnotification I was talking about.\n\n779\n00:34:31,503 --> 00:34:34,713\nAnd we're querying what\nit's set at all right.\n\n780\n00:34:34,713 --> 00:34:35,883\nIt's gonna have one of two values here.\n\n781\n00:34:35,883 --> 00:34:37,873\nIt's either gonna have a 0 or a 1.\n\n782\n00:34:37,873 --> 00:34:40,598\nZero means that it is disabled,\nthat's what we want.\n\n783\n00:34:40,598 --> 00:34:41,123\n>> Mm-hm.\n\n784\n00:34:41,123 --> 00:34:44,600\n>> One means it's turned on,\nthat's not what we want, okay.\n\n785\n00:34:44,600 --> 00:34:49,010\nSo when I look at, this one\nDisableDeleteNotify is currently set to 0.\n\n786\n00:34:49,010 --> 00:34:50,010\nThat's what I want.\n\n787\n00:34:50,010 --> 00:34:50,830\nAll right.\n\n788\n00:34:50,830 --> 00:34:54,310\nIf it weren't or if wasn't,\nwhatever the grammar is here.\n\n789\n00:34:54,310 --> 00:34:59,997\nIf it wasn't,\nthen I would need to change that,\n\n790\n00:34:59,997 --> 00:35:04,437\nand I would need to run fsutil behavior\n\n791\n00:35:04,437 --> 00:35:09,179\nset DisableDeleteNotify 0 like that.\n\n792\n00:35:09,179 --> 00:35:09,760\n>> Mm-hm.\n\n793\n00:35:09,760 --> 00:35:13,350\n>> Okay, and that would set it\nto the value that I wanted.\n\n794\n00:35:13,350 --> 00:35:15,030\n>> Nice.\n>> And off we go, all right.\n\n795\n00:35:15,030 --> 00:35:18,550\nAnd it's just a performance issue,\nwhen we're talking about iSCSI.\n\n796\n00:35:18,550 --> 00:35:22,396\nIf we leave it on,\nif we had it set to a 1, like that.\n\n797\n00:35:22,396 --> 00:35:27,196\nThen, when we ran that query, we'd see\nit was set to a 1, and now it would be\n\n798\n00:35:27,196 --> 00:35:31,943\ndoing these delete notifies that\ngenerate a performance degradation so.\n\n799\n00:35:31,943 --> 00:35:34,465\n>> Do you know off hand if it's all\nthe drives on that system when you're\n\n800\n00:35:34,465 --> 00:35:35,043\nsetting that?\n\n801\n00:35:35,043 --> 00:35:36,530\n>> It is, it is.\n\n802\n00:35:36,530 --> 00:35:37,430\n>> Okay, so you can't do it individually.\n\n803\n00:35:37,430 --> 00:35:41,020\n>> It's a site, it's a server wide\nthing and so it's just this server,\n\n804\n00:35:41,020 --> 00:35:41,930\nthis server that I'm on.\n\n805\n00:35:41,930 --> 00:35:43,190\n>> Mm-hm.\n>> But it does disable it for\n\n806\n00:35:43,190 --> 00:35:43,990\nall the disks.\n\n807\n00:35:43,990 --> 00:35:46,930\nTo my knowledge there's no way\nto do it for an individual disk.\n\n808\n00:35:46,930 --> 00:35:47,646\nYep.\n\n809\n00:35:47,646 --> 00:35:52,002\nYeah, cuz it's actually a behavior of how\nthe hardware abstraction layer interacts\n\n810\n00:35:52,002 --> 00:35:53,298\nwith the disk.sys-\n>> Yeah.\n\n811\n00:35:53,298 --> 00:35:54,602\n>> The hard drive utility.\n\n812\n00:35:54,602 --> 00:35:55,703\n>> Nice.\n\n813\n00:35:55,703 --> 00:35:58,090\n>> All right so\nthat's one thing worth mentioning there.\n\n814\n00:35:58,090 --> 00:36:02,070\nJust be aware of that, that this\nDisabledDeleteNotify, we want that to be\n\n815\n00:36:02,070 --> 00:36:07,340\nset to 0, and that's going to ensure that\nwe are not doing the delete notifies.\n\n816\n00:36:07,340 --> 00:36:08,570\n>> Very good.\n\n817\n00:36:08,570 --> 00:36:13,350\nAll right so that's it really for\nsetting up an iSCSI target,\n\n818\n00:36:13,350 --> 00:36:16,085\nbuilt into Windows server,\npretty easy to do and kind of neat.\n\n819\n00:36:16,085 --> 00:36:16,833\n>> Mm-hm.\n\n820\n00:36:16,833 --> 00:36:20,592\n>> As your network grows,\nyou may have more and more and\n\n821\n00:36:20,592 --> 00:36:23,920\nmore of these targets that are out there.\n\n822\n00:36:23,920 --> 00:36:29,350\nAnd so if you have 15 different SAMS,\n15 different iSCSI boxes or whatever,\n\n823\n00:36:29,350 --> 00:36:32,170\nit can become difficult to remember all\nthat targets that are out there and\n\n824\n00:36:32,170 --> 00:36:33,360\nkeep track of them.\n\n825\n00:36:33,360 --> 00:36:37,000\nSo we also have another\nservice that's called ISNS,\n\n826\n00:36:37,000 --> 00:36:42,338\nwhich is the iSCSI SAM Naming Server-\n>> Service whatever thing.\n\n827\n00:36:42,338 --> 00:36:43,683\n>> Service, there we go.\n\n828\n00:36:43,683 --> 00:36:45,224\nWhich is kind of like DNS.\n\n829\n00:36:45,224 --> 00:36:45,750\n>> Mm-hm.\n\n830\n00:36:45,750 --> 00:36:48,140\n>> But for iSCSI scans and not just iSCSI.\n\n831\n00:36:48,140 --> 00:36:53,830\nIt also covers IFC which is\nan inner network fiber channel.\n\n832\n00:36:53,830 --> 00:36:57,430\nSo you can buy a fiber\nchannel gateway that will\n\n833\n00:36:57,430 --> 00:37:01,470\nallow you to connect a fiber\nchannel SAM up to a TCIPI network.\n\n834\n00:37:01,470 --> 00:37:04,865\nIt absolutely slaughters\nthe performance of the SAM, and\n\n835\n00:37:04,865 --> 00:37:08,360\nit's designed to do site\nto site replication, right.\n\n836\n00:37:08,360 --> 00:37:13,034\nAnd so you can't site to site replicate\nover just traditional fiber channel SAM\n\n837\n00:37:13,034 --> 00:37:17,724\ntechnologies, so you gotta encapsulate\nit in TCPIP and send it along the wire.\n\n838\n00:37:17,724 --> 00:37:23,954\nSo, iSNS supports both,\niSCSI as well as the IFC.\n\n839\n00:37:23,954 --> 00:37:25,965\nMost people aren't going\nto use that piece, though.\n\n840\n00:37:25,965 --> 00:37:29,775\nSo, if we have a bunch of iSCSI devices,\nand a bunch of iSCSI targets,\n\n841\n00:37:29,775 --> 00:37:33,435\nwe can register them all\nwith an with an iSNS server.\n\n842\n00:37:33,435 --> 00:37:37,577\nAnd then on our iSCSI clients instead of\nhaving to remember all the targets that\n\n843\n00:37:37,577 --> 00:37:40,538\nare out there,\nI can just point them to the iSNS server.\n\n844\n00:37:40,538 --> 00:37:43,007\nJust point them right to that server and\nthen there's no need to go and\n\n845\n00:37:43,007 --> 00:37:44,897\nremember all the different\nones that are out there.\n\n846\n00:37:44,897 --> 00:37:45,702\nI'll see them in the list.\n\n847\n00:37:45,702 --> 00:37:46,473\n>> Nice.\n>> Okay.\n\n848\n00:37:46,473 --> 00:37:50,222\nIt's really easy to set up,\nalthough if you do some Google searching,\n\n849\n00:37:50,222 --> 00:37:52,855\nthere is next to no\ndocumentation out there on it.\n\n850\n00:37:52,855 --> 00:37:54,178\n>> [LAUGH] There really isn't.\n\n851\n00:37:54,178 --> 00:37:55,011\n>> I don't know why.\n\n852\n00:37:55,011 --> 00:37:55,548\n>> I don't either.\n\n853\n00:37:55,548 --> 00:37:57,822\n>> Yeah, good luck finding it.\n\n854\n00:37:57,822 --> 00:37:58,833\nBut it's not that hard.\n\n855\n00:37:58,833 --> 00:38:00,700\nSo let me show you guys how it works.\n\n856\n00:38:00,700 --> 00:38:04,396\nI'm going to take my domain controller,\nthis guy right here, and\n\n857\n00:38:04,396 --> 00:38:07,504\nthis is the one that I set up\nas the iSCSI target earlier.\n\n858\n00:38:07,504 --> 00:38:08,440\n>> Mm-hm.\n\n859\n00:38:08,440 --> 00:38:12,320\n>> I'm gonna make him an iSNS\nserver also all right.\n\n860\n00:38:12,320 --> 00:38:16,622\nSo to do that I'm gonna go back here into\nmy server manager, and Add rolls and\n\n861\n00:38:16,622 --> 00:38:18,992\nfeatures and this one is a feature right.\n\n862\n00:38:18,992 --> 00:38:20,134\n>> [CROSSTALK].\n\n863\n00:38:20,134 --> 00:38:23,050\n>> Earlier I was doing a roll service,\nthis one's a feature.\n\n864\n00:38:23,050 --> 00:38:25,700\nSo I'm gonna move forward\nto my feature selection, so\n\n865\n00:38:25,700 --> 00:38:29,920\nI'm just skipping past server roles and\ngoing to features.\n\n866\n00:38:29,920 --> 00:38:34,490\nAnd inside of features,\nI'll find the iSNS server service.\n\n867\n00:38:34,490 --> 00:38:36,400\nI'm just gonna check that off.\n\n868\n00:38:36,400 --> 00:38:38,710\nAnd finish it up all right.\n\n869\n00:38:38,710 --> 00:38:40,624\nNow we're going to let that one install.\n\n870\n00:38:40,624 --> 00:38:41,420\n>> Mm hm.\n\n871\n00:38:41,420 --> 00:38:45,360\n>> And as soon as it's done,\nwe're an iSNS server.\n\n872\n00:38:45,360 --> 00:38:46,320\n>> Right.\n>> That's it right.\n\n873\n00:38:46,320 --> 00:38:48,769\nReally, you don't need a lot of\nconfiguration on the server.\n\n874\n00:38:48,769 --> 00:38:51,777\nBut, it's not going to do us much good\nuntil people register with it, and\n\n875\n00:38:51,777 --> 00:38:53,974\nthere is a little bit of\nconfiguration that we can do.\n\n876\n00:38:53,974 --> 00:38:57,357\nSo we'll register with it and then see\nsome of the things that we can work with.\n\n877\n00:38:57,357 --> 00:38:57,891\n>> Nice.\n\n878\n00:38:57,891 --> 00:38:59,415\n>> All right.\n\n879\n00:38:59,415 --> 00:39:01,190\nNow one word of caution.\n\n880\n00:39:01,190 --> 00:39:05,550\nI've installed this thing a number\nof times, and I've got basically\n\n881\n00:39:05,550 --> 00:39:10,590\na 50% success rate with the service\nactually being started after I'm done.\n\n882\n00:39:10,590 --> 00:39:12,400\nFor some reason the service\ndoesn't always start.\n\n883\n00:39:12,400 --> 00:39:18,240\nSo, I've gotten in the habit of whenever I\ninstall it, I go into my services, panel.\n\n884\n00:39:18,240 --> 00:39:21,310\n>> You immediately going and\nchecking to see if it actually started up?\n\n885\n00:39:21,310 --> 00:39:24,170\n>> Yeah cuz I'm telling you, there's a lot\nof times where I go to work with it, and\n\n886\n00:39:24,170 --> 00:39:27,365\nits not working and I go and look,\nand the service is just stopped.\n\n887\n00:39:27,365 --> 00:39:30,820\nSo not a big deal to go in and find it.\n\n888\n00:39:30,820 --> 00:39:33,276\nHere's the Microsoft iSNS server,\nand oh, it is running.\n\n889\n00:39:33,276 --> 00:39:34,356\n>> Yay.\n\n890\n00:39:34,356 --> 00:39:35,039\nWe are lucky today.\n\n891\n00:39:35,039 --> 00:39:35,965\n>> All right so this time's a winner.\n\n892\n00:39:35,965 --> 00:39:38,156\n>> [LAUGH]\n>> All right, no configuration here,\n\n893\n00:39:38,156 --> 00:39:40,050\nit's just running.\n\n894\n00:39:40,050 --> 00:39:40,962\nOkay.\n\n895\n00:39:40,962 --> 00:39:46,550\nNow, for a client I can take a, well not a\nclient, for a target, for an iSCSI target,\n\n896\n00:39:46,550 --> 00:39:51,054\nI can register it with iSNS Very easily,\nand I can register a client,\n\n897\n00:39:51,054 --> 00:39:56,220\ntoo, but I want to start with the targets\nto get some data there first.\n\n898\n00:39:56,220 --> 00:40:00,030\nSo, now what I would do is I would go\nto each of my servers that are targets.\n\n899\n00:40:00,030 --> 00:40:03,250\nWhoever I've set up as a target,\nand on them.\n\n900\n00:40:04,650 --> 00:40:08,960\nI would set them to, basically,\nregister, with the ISNS.\n\n901\n00:40:08,960 --> 00:40:14,240\nServer, and some of them will do it\nautomatically, some won't, but, but a lot\n\n902\n00:40:14,240 --> 00:40:17,690\nof times it's already set up for us and\nwe don't really have to worry about it.\n\n903\n00:40:17,690 --> 00:40:20,780\nThey'll register and\nbe discovered through active directory and\n\n904\n00:40:20,780 --> 00:40:21,760\nother things like that.\n\n905\n00:40:21,760 --> 00:40:24,890\nSo, a lot of times,\nit's being done for us, all right?\n\n906\n00:40:24,890 --> 00:40:28,479\nFor a client,\nwe go into our i scuzzy initiator.\n\n907\n00:40:30,778 --> 00:40:34,578\nAnd in your i scuzzy initiator which\nmine is apparently not running, but,\n\n908\n00:40:34,578 --> 00:40:38,519\nwell it's all right, so isns was running\nbut my i scuzzy initiator wasn't.\n\n909\n00:40:40,200 --> 00:40:41,610\nDid it start it?\n\n910\n00:40:41,610 --> 00:40:43,310\nThere we go, okay.\n\n911\n00:40:43,310 --> 00:40:46,830\niSCSI initiator, you can look in here and\nyou'll see target,\n\n912\n00:40:46,830 --> 00:40:49,930\ndiscovery, favorite targets,\nand so on, and\n\n913\n00:40:49,930 --> 00:40:54,360\nin here we actually have the option\nto connect to an ISNS server.\n\n914\n00:40:54,360 --> 00:40:57,720\nI'm under the discover tab,\nand here's ISNS servers, and\n\n915\n00:40:57,720 --> 00:40:59,960\nI can add the server I want to connect to.\n\n916\n00:40:59,960 --> 00:41:05,010\nSo, I'm just gonna punch in the IP of\nthe server where I installed I,S, and S.\n\n917\n00:41:05,010 --> 00:41:07,810\nAnd it's gonna ask if I wanna\ncreate a firewall rule.\n\n918\n00:41:07,810 --> 00:41:08,335\nDo I need-\n>> Mm-hm.\n\n919\n00:41:08,335 --> 00:41:09,145\n>> to communicate to it,\n\n920\n00:41:09,145 --> 00:41:09,965\nI'll say yes to that.\n\n921\n00:41:12,010 --> 00:41:15,352\nAnd it's gonna reach out and\nregister with the server.\n\n922\n00:41:15,352 --> 00:41:18,455\nAll right, now the cool part\nis once we're registered.\n\n923\n00:41:18,455 --> 00:41:19,050\n>> Mm-hm.\n\n924\n00:41:19,050 --> 00:41:21,220\n>> When I go under Targets,\n\n925\n00:41:21,220 --> 00:41:25,325\nI'll now see every target that's\nregistered with that server.\n\n926\n00:41:25,325 --> 00:41:28,270\n>> Mm-hm.\n>> So, as I add more targets and\n\n927\n00:41:28,270 --> 00:41:31,810\nI register them with ISNS, they'll start\nto show up right here in this list,\n\n928\n00:41:31,810 --> 00:41:34,940\nthey'll just show up automatically and\nI can pick them and connect.\n\n929\n00:41:34,940 --> 00:41:36,940\nI don't have to go in and\nremember the names anymore.\n\n930\n00:41:36,940 --> 00:41:39,860\nThey're just listed right there for\nme, all right.\n\n931\n00:41:39,860 --> 00:41:42,970\nSo, I did that on this server,\nlet me jump over to my other server.\n\n932\n00:41:42,970 --> 00:41:46,390\nI'll do it here too, and so, on this guy,\n\n933\n00:41:46,390 --> 00:41:50,390\nI'm just going to go under discovery and\nI'll add.\n\n934\n00:41:50,390 --> 00:41:52,008\nThat server also.\n\n935\n00:41:55,908 --> 00:41:56,830\nI will try.\n\n936\n00:41:56,830 --> 00:41:57,737\nThere we go.\n>> [LAUGH]\n\n937\n00:41:57,737 --> 00:41:59,240\n>> All right so I've got it in.\n\n938\n00:41:59,240 --> 00:42:01,935\nAll right, now I'm gonna jump\nback over to the server.\n\n939\n00:42:01,935 --> 00:42:02,670\n>> Mm-hm.\n\n940\n00:42:02,670 --> 00:42:03,679\n>> Back on the server.\n\n941\n00:42:04,900 --> 00:42:07,590\nI'll bring up my start screen and\njust type in ISNS.\n\n942\n00:42:07,590 --> 00:42:09,111\nHere's my ISNS server.\n\n943\n00:42:11,662 --> 00:42:15,829\nAnd when I launch the ISNS\nserver I can start to see any\n\n944\n00:42:15,829 --> 00:42:19,110\nregistered initiators and targets.\n\n945\n00:42:19,110 --> 00:42:23,390\nOkay, and looking at it I can see the two\ninitiators that we just registered.\n\n946\n00:42:23,390 --> 00:42:25,930\nBut I don't really see any targets yet,\ndo I?\n\n947\n00:42:25,930 --> 00:42:29,740\nSo, we need to get our targets joined up,\nand, and\n\n948\n00:42:29,740 --> 00:42:32,200\nwe don't have any on here just yet.\n\n949\n00:42:32,200 --> 00:42:35,560\nSo, I need to get that done, but,\notherwise I've got my initiators.\n\n950\n00:42:35,560 --> 00:42:38,540\nThese guys are connecting up and\nsaying, hey what targets do you have.\n\n951\n00:42:38,540 --> 00:42:42,730\n>> So, looking at it, ISNS is keeping\na database with all of those servers,\n\n952\n00:42:42,730 --> 00:42:44,220\nthose targets that have registered.\n\n953\n00:42:44,220 --> 00:42:46,455\nSo, basically that's what you're doing,\nright, is browsing that database.\n\n954\n00:42:46,455 --> 00:42:47,290\nMm-hm.\n\n955\n00:42:47,290 --> 00:42:48,170\n>> Populating that list.\n\n956\n00:42:48,170 --> 00:42:50,735\n>> And we can pull them up and\nlook and kind of see where they are.\n\n957\n00:42:50,735 --> 00:42:51,790\n>> Mm-hm.\n>> And, you know, you can,\n\n958\n00:42:51,790 --> 00:42:54,965\nyou can group these things together\ninto what are called discovery domains.\n\n959\n00:42:54,965 --> 00:42:56,890\n>> Mm-hm.\n>> You have a default discovery domain and\n\n960\n00:42:56,890 --> 00:42:58,285\neverybody is being lumped together.\n\n961\n00:42:58,285 --> 00:42:59,470\n>> Mm-hm.\n>> But we can create\n\n962\n00:42:59,470 --> 00:43:01,870\nother ones to gather them into,\ninto groups.\n\n963\n00:43:01,870 --> 00:43:07,660\nSo I might have a bunch of targets that\nwere specific to one department or\n\n964\n00:43:07,660 --> 00:43:08,930\nsomething like that.\n\n965\n00:43:08,930 --> 00:43:09,470\n>> Yeah.\n\n966\n00:43:09,470 --> 00:43:10,915\nAnd so, I might do web servers.\n\n967\n00:43:10,915 --> 00:43:12,610\n>> Mm-hm.\n>> And so I can go in here and\n\n968\n00:43:12,610 --> 00:43:16,154\nI can add in each of my systems\nthat are part of the web servers.\n\n969\n00:43:16,154 --> 00:43:16,880\n>> Mm-hm.\n\n970\n00:43:16,880 --> 00:43:20,760\nAnd so now they're here and as I drop\nthis down I can look at these different,\n\n971\n00:43:20,760 --> 00:43:21,460\ndifferent,\n>> Right.\n\n972\n00:43:21,460 --> 00:43:25,130\n>> Discovery domains and I can control\nwhich targets they're presented with.\n\n973\n00:43:25,130 --> 00:43:26,470\nSo, you don't have to see all the targets,\n\n974\n00:43:26,470 --> 00:43:29,340\nthey can just see the few that\nI've chosen to add in there.\n\n975\n00:43:29,340 --> 00:43:29,930\n>> Nice.\n\n976\n00:43:29,930 --> 00:43:30,620\n>> All right.\n\n977\n00:43:30,620 --> 00:43:33,680\nSo we can those and\nyou can even add in new entries.\n\n978\n00:43:33,680 --> 00:43:35,380\nYou can put in the initiators or targets.\n\n979\n00:43:35,380 --> 00:43:38,990\nSo for example, my,\nmy target still hasn't shown up, so\n\n980\n00:43:38,990 --> 00:43:43,220\nwhat I'm going to do is come in here and\nI will just manually add it in,\n\n981\n00:43:45,250 --> 00:43:50,725\nand so my target is this guy There we go.\n\n982\n00:43:50,725 --> 00:43:51,500\n>> Mm-hm.\n\n983\n00:43:51,500 --> 00:43:53,842\n>> And you know, type unknown, it's still.\n\n984\n00:43:53,842 --> 00:43:54,542\n>> Hm.\n\n985\n00:43:58,721 --> 00:44:01,635\n>> Let's just verify here real quick.\n\n986\n00:44:05,257 --> 00:44:08,060\nYeah, it should register, I, I'm being\nimpatient is our, is our problem.\n\n987\n00:44:08,060 --> 00:44:10,180\n>> Exactly. [LAUGH] >> So we might have\nto wait and come back on this one.\n\n988\n00:44:10,180 --> 00:44:11,390\n>> All right.\n>> But-\n\n989\n00:44:11,390 --> 00:44:12,970\n>> But basically it will\n\n990\n00:44:14,320 --> 00:44:15,710\npopulate that sooner or later.\n\n991\n00:44:18,450 --> 00:44:20,180\nIf we, if we wait long enough.\n\n992\n00:44:20,180 --> 00:44:21,210\n>> If we wait, exactly.\n\n993\n00:44:21,210 --> 00:44:22,170\nIt's a Microsoft thing.\n\n994\n00:44:22,170 --> 00:44:25,070\n>> But but yeah so if we wait long enough,\nthe target will show up there, and\n\n995\n00:44:25,070 --> 00:44:28,300\nthe cool part here then\n>> Is, I do that on all my targets, right,\n\n996\n00:44:28,300 --> 00:44:30,805\nall my targets get discovered in here,\nthey get loaded up.\n\n997\n00:44:30,805 --> 00:44:31,490\n>> Mh-hm.\n>> And now,\n\n998\n00:44:31,490 --> 00:44:34,180\nwhen I jump over to my other machines,\nthey connect, and\n\n999\n00:44:34,180 --> 00:44:39,220\nthey start to see, what you know, what\nwe've chosen to, to advertise to them,\n\n1000\n00:44:39,220 --> 00:44:41,030\nwhat the, you know,\nwhat they're set to get.\n\n1001\n00:44:41,030 --> 00:44:44,005\nSo under my web servers I would have\nthe various targets tied in for them.\n\n1002\n00:44:44,005 --> 00:44:45,170\n>> Mm-hm.\n>> They would see that.\n\n1003\n00:44:45,170 --> 00:44:45,980\nNo remembering the names.\n\n1004\n00:44:45,980 --> 00:44:47,590\n>> There you go.\n>> It's just automatically in that list.\n\n1005\n00:44:47,590 --> 00:44:49,400\n>> It makes it a lot easier to work with.\n\n1006\n00:44:49,400 --> 00:44:49,910\n>> All right.\n\n1007\n00:44:49,910 --> 00:44:50,905\nWell why don't we do this Mike?\n\n1008\n00:44:50,905 --> 00:44:52,960\n>> Mm-hm.\n>> Why don't we while we're waiting,\n\n1009\n00:44:52,960 --> 00:44:54,020\nwe'll let this sit and wait.\n\n1010\n00:44:54,020 --> 00:44:55,580\n>> Okay.\n>> And we'll move on to the next top pick\n\n1011\n00:44:55,580 --> 00:44:56,310\nand then come back.\n\n1012\n00:44:56,310 --> 00:44:56,970\n>> All right.\n\n1013\n00:44:56,970 --> 00:44:59,580\n>> I also want to talk a little\nbit about clustering on these too.\n\n1014\n00:44:59,580 --> 00:45:02,460\n>> Mm. Okay. >> So so we'll, we'll double\nback and get back to that afterwards too.\n\n1015\n00:45:02,460 --> 00:45:03,500\n>> Okay.\n>> So-\n\n1016\n00:45:03,500 --> 00:45:04,200\n>> All right.\n\n1017\n00:45:04,200 --> 00:45:05,361\nWhat, what is next [CROSSTALK].\n\n1018\n00:45:05,361 --> 00:45:05,918\n>> We are gonna,\n\n1019\n00:45:05,918 --> 00:45:09,295\nlet's talk about some what was it we were\ngonna talk about oh features on demand.\n\n1020\n00:45:09,295 --> 00:45:10,350\n>> Mm-hm.\n>> Let's take a look at features\n\n1021\n00:45:10,350 --> 00:45:11,830\non demand.\n\n1022\n00:45:11,830 --> 00:45:14,340\nSo let's see let me log in real\nquick to one of my servers, and\n\n1023\n00:45:14,340 --> 00:45:17,080\nbefore we start up let's talk\nabout what the heck it is.\n\n1024\n00:45:18,410 --> 00:45:19,900\n>> It's, it's funny because I tell you,\n\n1025\n00:45:19,900 --> 00:45:24,100\nI don't know about you, one of my\nfavorite things when 2008 came out was,\n\n1026\n00:45:24,100 --> 00:45:25,340\nyou go back further than I do,\n>> Mm-hm.\n\n1027\n00:45:25,340 --> 00:45:28,700\n>> You remember in 2000 and 2003,\nwhen you're setting up a server,\n\n1028\n00:45:28,700 --> 00:45:32,430\nanytime you want to install a new role\n>> You had to go find the disk, right.\n\n1029\n00:45:32,430 --> 00:45:35,760\nYou had to have the source\ndisk copied somewhere.\n\n1030\n00:45:35,760 --> 00:45:37,810\nTo install those, and\nit was always a pain,\n\n1031\n00:45:37,810 --> 00:45:40,770\nbecause you go to the storage closet or\nwhatever, who had the disk last?\n\n1032\n00:45:40,770 --> 00:45:42,130\nWhere is that disk?\n\n1033\n00:45:42,130 --> 00:45:45,770\nSo now, we're to the, we're starting\nwith 2008, you don't have to, right.\n\n1034\n00:45:45,770 --> 00:45:46,860\nAll the binary for\n\n1035\n00:45:46,860 --> 00:45:49,640\nall the different roles,\n>> Some features are already there\n\n1036\n00:45:49,640 --> 00:45:51,630\nin the image when you install it.\n\n1037\n00:45:51,630 --> 00:45:54,360\nRight, we're just installing a wim file\nand it's got everything it needs there.\n\n1038\n00:45:54,360 --> 00:45:56,260\nSo, you never have to\ngo find a disc anymore.\n\n1039\n00:45:56,260 --> 00:46:00,540\nYou can fire up that add roles\nfeatures wizard pick what you want and\n\n1040\n00:46:00,540 --> 00:46:02,130\nit installs it, and it's beautiful.\n\n1041\n00:46:03,350 --> 00:46:06,290\nAnd now we're going to talk\nabout how we can take that away.\n\n1042\n00:46:06,290 --> 00:46:06,790\n[LAUGH]\n>> [LAUGH]\n\n1043\n00:46:06,790 --> 00:46:07,878\n>> How we can, how we can do away with all\n\n1044\n00:46:07,878 --> 00:46:10,043\nof that and\nmake you have to go find that disc again.\n\n1045\n00:46:10,043 --> 00:46:12,038\nCuz that's really what features on demand\n\n1046\n00:46:12,038 --> 00:46:14,040\nis about, but there's a reason for it.\nYou know if we, we,\n\n1047\n00:46:14,040 --> 00:46:16,810\nwe think about all those binaries for\nall the different roles and features,\n\n1048\n00:46:16,810 --> 00:46:20,570\nthey take up some space on that hard drive\nbut not a considerable amount of space.\n\n1049\n00:46:20,570 --> 00:46:21,535\nA few gigs or so.\n\n1050\n00:46:21,535 --> 00:46:22,920\n>> Mm-hm.\n\n1051\n00:46:22,920 --> 00:46:26,250\n>> But if you're talking about say,\nyou know a Hyper-V server.\n\n1052\n00:46:26,250 --> 00:46:28,070\nAnd you've got ten,\n\n1053\n00:46:28,070 --> 00:46:33,170\n15 different virtual machines running\nserver 2012, for example, on there.\n\n1054\n00:46:33,170 --> 00:46:36,500\nThat means you've got 15\ncopies of all of those files.\n\n1055\n00:46:36,500 --> 00:46:39,270\nAnd if you don't ever plan on using them,\nyou're not installing those rules or\n\n1056\n00:46:39,270 --> 00:46:42,840\nif you just wanna make them smaller, cuz\nwe can still install the rules it's just\n\n1057\n00:46:42,840 --> 00:46:45,300\ngonna have to find the source files again.\n\n1058\n00:46:45,300 --> 00:46:46,910\nThat's what features on\ndemand is all about.\n\n1059\n00:46:46,910 --> 00:46:51,870\nWe're gonna go to our machines, and I can\ntake it, I can take a physical machine, I,\n\n1060\n00:46:51,870 --> 00:46:55,670\nI can do it to a virtual machine, I can\ndo it to a VHD that's not even mounted.\n\n1061\n00:46:55,670 --> 00:46:57,270\nI you know, we can use DISM to do that.\n\n1062\n00:46:57,270 --> 00:47:01,340\nBut we're gonna strip out all those\nbinaries, all those files and\n\n1063\n00:47:01,340 --> 00:47:05,600\nfree up that space and make my WIM file,\nor my virtual machine Machine or my, or\n\n1064\n00:47:05,600 --> 00:47:06,680\nmy physical server.\n\n1065\n00:47:06,680 --> 00:47:08,530\nMake more free space on that hard drive.\n\n1066\n00:47:10,090 --> 00:47:13,310\nOnce I've done that, though,\nnow those are no longer there, so\n\n1067\n00:47:13,310 --> 00:47:17,740\nyou go to add roles and features and pick\none of your roles, it's gonna find one of\n\n1068\n00:47:17,740 --> 00:47:22,140\nthose files somewhere, and what it's\ngonna do, it's got three options, really.\n\n1069\n00:47:22,140 --> 00:47:25,500\nWe can go and we can During the command.\n\n1070\n00:47:25,500 --> 00:47:30,210\nIf we're running the command from, say\nthe command power install/windowsfeature,\n\n1071\n00:47:30,210 --> 00:47:32,420\nname of the feature, DNS and\n\n1072\n00:47:32,420 --> 00:47:37,050\nthen point it to a location where\nwe've copied those files too.\n\n1073\n00:47:37,050 --> 00:47:40,464\nWe'll take a, a share or just a folder and\n\n1074\n00:47:40,464 --> 00:47:45,473\nwe'll copy all those source files\nonto that from the 2012 DVD.\n\n1075\n00:47:45,473 --> 00:47:48,945\nAnd then when we run that command,\nwe'll tell it where to find the files.\n\n1076\n00:47:48,945 --> 00:47:53,145\nIf you don't add that source, if you\ndon't tell it where to find those files,\n\n1077\n00:47:53,145 --> 00:47:55,870\nthen it can reach out to Windows update.\n\n1078\n00:47:55,870 --> 00:47:58,880\nAnd it can get the source files\nthat it needs from there.\n\n1079\n00:47:58,880 --> 00:48:02,320\nOr you can create a share, what they call\na, I forget what the technical name was,\n\n1080\n00:48:02,320 --> 00:48:07,960\nit's a feature share and\nit's basically just a shared folder.\n\n1081\n00:48:07,960 --> 00:48:10,270\nAnd when we set up the shared folder,\n\n1082\n00:48:10,270 --> 00:48:14,120\nagain we'll copy all of those\nbinaries into that folder.\n\n1083\n00:48:14,120 --> 00:48:19,910\nAnd then we'll use a group policy to tell\nthe servers where that folder is located.\n\n1084\n00:48:19,910 --> 00:48:22,292\nSo, then anytime you go\nto install a feature or\n\n1085\n00:48:22,292 --> 00:48:24,924\na role it know where to look for\nthose source files.\n\n1086\n00:48:24,924 --> 00:48:28,515\nSo if you think back to that\nHyper-V Server where I've got 15 machines,\n\n1087\n00:48:28,515 --> 00:48:32,280\nI've yanked all those binaries out\nof all those 15 virtual machines.\n\n1088\n00:48:32,280 --> 00:48:36,190\nNow I've got one copy of them in\na folder on that Hyper-V Server, and\n\n1089\n00:48:36,190 --> 00:48:40,490\n15 of those machines any time they need to\ninstall a role can go hit that folder and\n\n1090\n00:48:40,490 --> 00:48:42,500\nthey can get the files they\nneed to install that role.\n\n1091\n00:48:42,500 --> 00:48:46,460\nSo, you can specify the source\nlocation during the in the command,\n\n1092\n00:48:46,460 --> 00:48:49,050\nthe Install-WindowsFeature command for\nPowerShell.\n\n1093\n00:48:49,050 --> 00:48:53,010\nYou can let it go out and grab it from\nWindows update, or you can set up a shared\n\n1094\n00:48:53,010 --> 00:48:57,610\nlocation and use group policy to tell\nthem where to go get those files.\n\n1095\n00:48:57,610 --> 00:49:00,820\nSo, the first thing we would do is,\nwe're going to remove those files, and\n\n1096\n00:49:00,820 --> 00:49:05,440\nwe're going to use Windows PowerShell\nto get rid of all of those features.\n\n1097\n00:49:05,440 --> 00:49:07,130\nSo, what I'm going to do,\nI'm hooked up to,\n\n1098\n00:49:07,130 --> 00:49:08,980\nare you still using serve one right now?\n\n1099\n00:49:08,980 --> 00:49:11,490\nI'm on serve one,\nshould I go to serve two?\n\n1100\n00:49:11,490 --> 00:49:14,860\n>> I'm just watching on DC one so\nyou are welcome to server one.\n\n1101\n00:49:14,860 --> 00:49:17,270\n>> Well, what I'm going to do here on\nserve one is I am going to open up\n\n1102\n00:49:17,270 --> 00:49:17,808\nthe PowerShell.\n\n1103\n00:49:17,808 --> 00:49:24,190\n[COUGH] Excuse me, and,\nlet me change my font so I can see that.\n\n1104\n00:49:24,190 --> 00:49:25,440\nCan you see me, Jason?\n\n1105\n00:49:26,810 --> 00:49:27,310\nYou have me?\n\n1106\n00:49:28,830 --> 00:49:32,224\nDid I lock up on iVJ?\n\n1107\n00:49:32,224 --> 00:49:33,990\n>> Yeah, it looks like you froze.\n\n1108\n00:49:33,990 --> 00:49:36,640\n>> I'll kill it,\n[LAUGH] I'll kill it here.\n\n1109\n00:49:36,640 --> 00:49:39,440\nLet me refresh my iVJ connection.\n\n1110\n00:49:39,440 --> 00:49:43,300\nWhat we use to share our\nscreen with you guys.\n\n1111\n00:49:43,300 --> 00:49:45,920\n>> And while he's doing that\nyou know there's several useful\n\n1112\n00:49:45,920 --> 00:49:47,590\nplaces to use features on demand.\n\n1113\n00:49:47,590 --> 00:49:50,970\nWhen you're building Hyper-V appliances.\n\n1114\n00:49:50,970 --> 00:49:54,270\nSo, you've got a flexible hard drive or\nI'm sorry,\n\n1115\n00:49:54,270 --> 00:49:55,980\na dynamically expanding hard drive.\n\n1116\n00:49:55,980 --> 00:49:56,730\nYou remove these features.\n\n1117\n00:49:56,730 --> 00:49:57,420\nMakes it really small.\n\n1118\n00:49:57,420 --> 00:49:59,960\nMakes it easy to clone and,\nand move along pretty fast.\n\n1119\n00:49:59,960 --> 00:50:01,500\nSo, a lot of cool uses for this.\n\n1120\n00:50:01,500 --> 00:50:02,266\n>> Yeah, absolutely.\n\n1121\n00:50:02,266 --> 00:50:03,893\n>> Oh, you're good here.\n>> All right.\n\n1122\n00:50:03,893 --> 00:50:06,593\n>> So let me again,\nbump up that font size so,\n\n1123\n00:50:06,593 --> 00:50:10,502\nwe can see what the heck is going\non in Mike's console, here.\n\n1124\n00:50:13,535 --> 00:50:17,310\nAnd this is a command that I don't use all\nthat often, so I've got my cheat sheet.\n\n1125\n00:50:17,310 --> 00:50:17,985\nIt's a little bit long.\n\n1126\n00:50:17,985 --> 00:50:19,790\n>> [LAUGH]\n>> But, we're gonna be piping.\n\n1127\n00:50:19,790 --> 00:50:21,390\nWe're basically got to get a list.\n\n1128\n00:50:21,390 --> 00:50:24,540\nThere's a command called\nuninstall-WindowsFeatures.\n\n1129\n00:50:24,540 --> 00:50:27,640\nPrior to 2012, you had to do two commands.\n\n1130\n00:50:27,640 --> 00:50:30,220\nYou would do an uninstall-WindowsFeature,\n\n1131\n00:50:30,220 --> 00:50:32,690\nthat would uninstall it if it\nhad already been installed.\n\n1132\n00:50:32,690 --> 00:50:35,280\nLet's say you're trying to remove DNS or\nsomething like that, but\n\n1133\n00:50:35,280 --> 00:50:36,830\nthe source files were still there.\n\n1134\n00:50:36,830 --> 00:50:41,330\nThen there was a remove-WindowsFeature\nthat would actually pull the binaries,\n\n1135\n00:50:41,330 --> 00:50:44,500\nthe source files for\ncreating that role off of that machine.\n\n1136\n00:50:44,500 --> 00:50:47,420\nStarting with 2012 they've\nbasically combined them.\n\n1137\n00:50:47,420 --> 00:50:50,370\nSo, we now have\nan uninstall-WindowsFeature PowerShell\n\n1138\n00:50:50,370 --> 00:50:53,500\ncommand with a -remove\nparameter that we can\n\n1139\n00:50:53,500 --> 00:50:55,740\nadd to the command to actually\npull the binaries out.\n\n1140\n00:50:57,310 --> 00:51:00,503\nSo what I'm going to do here, we're going\nto end up piping a couple of commands to.\n\n1141\n00:51:00,503 --> 00:51:05,480\nCuz the uninstall-WindowsFeature,\nyou have to do a dash name, and\n\n1142\n00:51:05,480 --> 00:51:07,500\nthen the name of the feature\nyou're trying to remove, or\n\n1143\n00:51:07,500 --> 00:51:09,696\nthe name of the role\nyou're trying to remove.\n\n1144\n00:51:09,696 --> 00:51:11,790\nAnd then -remove to actually pull it out.\n\n1145\n00:51:11,790 --> 00:51:12,950\nBut there's a lot of them, right?\n\n1146\n00:51:12,950 --> 00:51:14,130\nAnd I don't want to sit here and\n\n1147\n00:51:14,130 --> 00:51:19,010\ncreate a list of every single role and\nfeature that I want to remove.\n\n1148\n00:51:19,010 --> 00:51:20,140\nGreat thing about PowerShell.\n\n1149\n00:51:20,140 --> 00:51:24,940\nI can let it generate the list, pipe\nthat list into the next command, right?\n\n1150\n00:51:24,940 --> 00:51:27,990\nBut every time I always tell people when\nwe're talking about doing something like\n\n1151\n00:51:27,990 --> 00:51:31,050\nthis and piping those commands\nfrom one to the other,\n\n1152\n00:51:31,050 --> 00:51:32,890\nalways check the results\nof your first command.\n\n1153\n00:51:32,890 --> 00:51:36,485\nMake sure you're getting the list you\nexpect before you go piping it in to some\n\n1154\n00:51:36,485 --> 00:51:38,750\nkinda remove command or\nsomething like that.\n\n1155\n00:51:38,750 --> 00:51:42,306\nSo, the first thing I'm gonna do is\njust to get-Features, or I'm sorry,\n\n1156\n00:51:42,306 --> 00:51:43,483\nget-WindowsFeature.\n\n1157\n00:51:46,234 --> 00:51:50,591\nAnd you guys have probably seen this\nin a couple of our other episodes, and\n\n1158\n00:51:50,591 --> 00:51:53,342\nhit Enter and\nit's gonna go through and list.\n\n1159\n00:51:53,342 --> 00:51:55,295\nAnd there's what I would have to list,\n\n1160\n00:51:55,295 --> 00:51:58,264\nif I was gonna do -name I'd have\nto list every one of those.\n\n1161\n00:51:58,264 --> 00:51:59,412\nNot gonna happen.\n\n1162\n00:51:59,412 --> 00:52:00,504\nAll right?\n\n1163\n00:52:00,504 --> 00:52:03,010\nSo now I know that command is working.\n\n1164\n00:52:03,010 --> 00:52:06,040\nYou guys remember the ones with the X's\nare the ones that are installed at this\n\n1165\n00:52:06,040 --> 00:52:08,170\nserver's currently performing.\n\n1166\n00:52:09,740 --> 00:52:12,915\nWhat I want to do now, cuz I don't\nreally want to remove the files for\n\n1167\n00:52:12,915 --> 00:52:15,365\nthe roles that is actually running.\n\n1168\n00:52:15,365 --> 00:52:19,595\nSo I need to trim this list down to\nwhere it's just the ones that are not\n\n1169\n00:52:19,595 --> 00:52:20,965\nbeing used.\n\n1170\n00:52:20,965 --> 00:52:24,485\nSo I'm going to take same command,\nget-WindowsFeature and\n\n1171\n00:52:24,485 --> 00:52:25,435\nI'm going to pipe that.\n\n1172\n00:52:27,330 --> 00:52:32,528\nUse my pipe here to to go where-object and\n\n1173\n00:52:32,528 --> 00:52:39,212\nthen I'm gonna filter that\nwith a -filterscript and\n\n1174\n00:52:39,212 --> 00:52:44,114\nmy filterscripts are always going to go\n\n1175\n00:52:44,114 --> 00:52:49,165\nin those curly braces or your brackets or\n\n1176\n00:52:49,165 --> 00:52:53,473\nbraces $_.installed equals or\n\n1177\n00:52:53,473 --> 00:52:58,102\neq for equals, and then $false}.\n\n1178\n00:52:58,102 --> 00:52:59,390\nHit Enter.\n\n1179\n00:53:01,060 --> 00:53:05,640\nAnd this time notice in that list that\nhad just scrolled by, there are no x's.\n\n1180\n00:53:05,640 --> 00:53:09,020\nSo these are only roles that\nare not currently installed.\n\n1181\n00:53:10,390 --> 00:53:13,550\nSo now I know that my command\ngives me the roles I want.\n\n1182\n00:53:13,550 --> 00:53:17,150\nI'm sure that it's not gonna removed\nanything that I didn't want it to remove.\n\n1183\n00:53:17,150 --> 00:53:18,580\nI verify that.\n\n1184\n00:53:18,580 --> 00:53:22,610\nNow, I feel comfortable piping that\ninto the next part of the command,\n\n1185\n00:53:22,610 --> 00:53:24,950\nwhich is the actual remove features.\n\n1186\n00:53:24,950 --> 00:53:27,160\nSo I'm just going to\ncontinue on to up arrow.\n\n1187\n00:53:28,220 --> 00:53:31,650\nGuys, here's an important thing that\nI think some people miss sometimes.\n\n1188\n00:53:31,650 --> 00:53:34,830\nIf you're going to test your commands,\nyou're going to type them out,\n\n1189\n00:53:34,830 --> 00:53:38,420\ntest them before you pipe into the next\none, don't retype the command.\n\n1190\n00:53:39,540 --> 00:53:42,630\nBecause you, what if you typo then\nyou tested it, it worked great, but\n\n1191\n00:53:42,630 --> 00:53:46,290\nthen you made a typo when you,\nso just use your up arrow.\n\n1192\n00:53:46,290 --> 00:53:55,590\nAnd we're going to type that into\nan uninstall-WindowsFeature, maybe.\n\n1193\n00:53:55,590 --> 00:53:56,410\nDid I spell that right?\n\n1194\n00:53:56,410 --> 00:53:59,345\nI did not.\n\n1195\n00:53:59,345 --> 00:54:02,618\nUninstall-WindowsFeature and\n\n1196\n00:54:02,618 --> 00:54:07,560\nthen a -remove to actually\nremove the binaries.\n\n1197\n00:54:07,560 --> 00:54:11,120\nSo it should take that same list and\npull all that stuff out.\n\n1198\n00:54:11,120 --> 00:54:11,911\nSo we'd hit Enter.\n\n1199\n00:54:16,248 --> 00:54:19,140\nAnd there you see that progress\nbar going across the top.\n\n1200\n00:54:19,140 --> 00:54:21,130\nTake it just a second here\nto remove all of that.\n\n1201\n00:54:24,370 --> 00:54:27,585\nAnd once it finishes we'll rerun\none of those other commands that\n\n1202\n00:54:27,585 --> 00:54:30,800\nget-WindowsFeature and\nsee what's still there.\n\n1203\n00:54:30,800 --> 00:54:32,650\nActually, I guess it would still be there,\njust you know,\n\n1204\n00:54:32,650 --> 00:54:36,635\nshow, it still knows\nwhat features are there.\n\n1205\n00:54:36,635 --> 00:54:40,030\n>> [LAUGH]\n>> We'll see, I'm curious.\n\n1206\n00:54:40,030 --> 00:54:43,345\n>> It does take a little while cuz\nthere's a lot of little files.\n\n1207\n00:54:43,345 --> 00:54:46,875\nAnd if you've applied Windows updates,\nthere may be additional things attached\n\n1208\n00:54:46,875 --> 00:54:50,805\nthat have come along, so it's cleaning\nall of that up and stripping them out.\n\n1209\n00:54:50,805 --> 00:54:52,585\nMike did something cool here, which is,\n\n1210\n00:54:52,585 --> 00:54:56,010\nsee how he did the get-WindowsFeature and\npiped it into the other command?\n\n1211\n00:54:56,010 --> 00:54:59,070\nSo, it's actually iterating through\nthis command many many times.\n\n1212\n00:54:59,070 --> 00:55:03,550\nSo, for all of those features you see\nthat he has flagged as available, and\n\n1213\n00:55:03,550 --> 00:55:04,200\nthere's a lot of them.\n\n1214\n00:55:04,200 --> 00:55:04,950\nWhat would you say, Mike?\n\n1215\n00:55:04,950 --> 00:55:05,650\nProbably?\n\n1216\n00:55:05,650 --> 00:55:07,280\n>> There's a good 30 of the dangum things.\n\n1217\n00:55:07,280 --> 00:55:08,680\n>> At least.\n>> So, so\n\n1218\n00:55:08,680 --> 00:55:10,640\nyou see all the different things\nthat are flagged as available.\n\n1219\n00:55:10,640 --> 00:55:13,290\nIt's having to get through and\nremove every one of them.\n\n1220\n00:55:13,290 --> 00:55:14,790\n>> That does take some time.\n\n1221\n00:55:14,790 --> 00:55:16,170\nAll right.\n>> You must restart\n\n1222\n00:55:16,170 --> 00:55:17,340\nto finish the rule process.\n\n1223\n00:55:17,340 --> 00:55:18,190\nWell, I don't know.\n\n1224\n00:55:18,190 --> 00:55:20,217\nAre you,\ndid you say you're on this guy right now?\n\n1225\n00:55:20,217 --> 00:55:21,213\n>> No, I'm not on that one, nope.\n\n1226\n00:55:21,213 --> 00:55:21,841\n>> Are you sure?\n\n1227\n00:55:21,841 --> 00:55:25,277\n>> Yep, you can have that.\n>> All right, well, let's restart it,\n\n1228\n00:55:25,277 --> 00:55:30,550\nI don't know why I, close that,\nlet's do a little shutdown -r t0.\n\n1229\n00:55:30,550 --> 00:55:31,613\nDoesn't like it from there.\n\n1230\n00:55:39,820 --> 00:55:43,017\nAll right, so, we have this thing\nrestarting to finish up that process and\n\n1231\n00:55:43,017 --> 00:55:44,096\nthen we'll take a look.\n\n1232\n00:55:44,096 --> 00:55:46,043\nAnd while, I'll tell you what,\nwhile it's doing that,\n\n1233\n00:55:46,043 --> 00:55:48,940\nlet me go over to the domain\ncontroller really quick here.\n\n1234\n00:55:48,940 --> 00:55:50,962\nBecause I did not actually set up a share.\n\n1235\n00:55:50,962 --> 00:55:55,606\nI didn't want to.\nWaste your guys' time watching me copy all\n\n1236\n00:55:55,606 --> 00:55:58,168\nthose source files over.\n\n1237\n00:55:58,168 --> 00:55:59,570\nYou're already signed into there.\n\n1238\n00:55:59,570 --> 00:56:01,119\nCan I jump in as you, same password?\n\n1239\n00:56:01,119 --> 00:56:05,379\n>> If you kick off administrator,\nI should be logged in as Don.\n\n1240\n00:56:05,379 --> 00:56:07,828\n>> Yep, alright, administrator's gone.\n\n1241\n00:56:07,828 --> 00:56:12,643\nAlright, and what I wanted to show\nyou is if we had created a share and\n\n1242\n00:56:12,643 --> 00:56:18,557\nthen we would take our DVD, our 2012\nR2 DVD and inside that source's folder,\n\n1243\n00:56:18,557 --> 00:56:22,990\nwe would get all the binaries and\nI put em in that share.\n\n1244\n00:56:22,990 --> 00:56:26,350\nAnd then we've gotta tell the servers\nwhere to find that share so\n\n1245\n00:56:26,350 --> 00:56:30,510\nthat when I go to add roles and features,\nand they realize that they don't have\n\n1246\n00:56:30,510 --> 00:56:34,210\nthe source files anymore,\nthey know where to go to find those guys.\n\n1247\n00:56:34,210 --> 00:56:35,680\nSo I'm just gonna come down here, and\n\n1248\n00:56:35,680 --> 00:56:40,330\nI would not use the default to main policy\nnormally but just to show you the setting,\n\n1249\n00:56:40,330 --> 00:56:42,560\nI'm going to right-click on that\ndefault domain and choose edit.\n\n1250\n00:56:44,350 --> 00:56:47,440\nAnd in here I'm going to go\ninto my Computer half, and\n\n1251\n00:56:47,440 --> 00:56:52,660\nthen Policies,\nAdministrative Templates and then System.\n\n1252\n00:56:52,660 --> 00:56:57,410\nNow there's a lot of nodes or\nsub-containers inside System.\n\n1253\n00:56:57,410 --> 00:56:59,440\nThis is actually one\nof the loose settings.\n\n1254\n00:56:59,440 --> 00:57:03,780\nSo if I scroll down past all these nodes,\nthere's a setting down here,\n\n1255\n00:57:03,780 --> 00:57:08,720\nspecify setting for optional component\ninstallation and component repair.\n\n1256\n00:57:08,720 --> 00:57:12,890\nAnd that's another reason to keep those\nin, we talked about that earlier,\n\n1257\n00:57:12,890 --> 00:57:14,980\nit's another reason to keep\nthose source files available and\n\n1258\n00:57:14,980 --> 00:57:19,370\nlet those servers know where they are,\nif you've yanked them out, because it can,\n\n1259\n00:57:19,370 --> 00:57:21,480\nif it detects a problem\nwith the roller service,\n\n1260\n00:57:21,480 --> 00:57:25,240\nit can go and try to fix it,\nnot if it doesn't have the source files.\n\n1261\n00:57:25,240 --> 00:57:27,290\nSo I would just choose enable here, and\n\n1262\n00:57:27,290 --> 00:57:30,750\nthen I can put that alternate\nsource file path right there.\n\n1263\n00:57:30,750 --> 00:57:34,040\nWe can also use our own WSUS server, or\n\n1264\n00:57:34,040 --> 00:57:36,650\nwe can force it to go out\nto Microsoft instead.\n\n1265\n00:57:36,650 --> 00:57:41,160\nLike I might a WSUS server to do\nmy updates but I might not want to\n\n1266\n00:57:41,160 --> 00:57:44,920\nstore all those feature files and\nthings like that on my SUS server.\n\n1267\n00:57:44,920 --> 00:57:47,920\nSo I can say hey you know what for\nyour updates go to my SUS server but for\n\n1268\n00:57:47,920 --> 00:57:51,080\nthe windows features if you\nneed one of those binaries,\n\n1269\n00:57:51,080 --> 00:57:53,950\njust go out to Microsoft's pay server and\nget it from there so\n\n1270\n00:57:53,950 --> 00:57:56,990\nI don't have to store them locally or if\nthey update them, that's another reason.\n\n1271\n00:57:56,990 --> 00:57:59,470\nSo, that's it, you're just coming here,\nchoose enable and\n\n1272\n00:57:59,470 --> 00:58:04,930\nspecify that source path in there and then\nwhen you run that windows, add remove or\n\n1273\n00:58:04,930 --> 00:58:08,620\nadd roles and features, it'll know\nwhere to look to find those files.\n\n1274\n00:58:08,620 --> 00:58:10,080\nSo I flip back over real quick.\n\n1275\n00:58:10,080 --> 00:58:14,614\nI'll go ahead and log out,\nfree up one of these logons there.\n\n1276\n00:58:14,614 --> 00:58:20,197\n[SOUND] And if I reconnect now that\nit should have rebooted by now.\n\n1277\n00:58:20,197 --> 00:58:26,614\nConnect back over to server 1 [NOISE] And\n\n1278\n00:58:26,614 --> 00:58:34,594\nit's setting up features\nthat it's removing.\n\n1279\n00:58:34,594 --> 00:58:35,230\n>> Very exciting.\n>> Yeah.\n\n1280\n00:58:35,230 --> 00:58:38,237\n>> I always thought that was funny\nhow it's setting up features, but\n\n1281\n00:58:38,237 --> 00:58:40,234\nit's actually deleting the features but.\n\n1282\n00:58:40,234 --> 00:58:41,700\n>> Yeah, I don't have any features.\n\n1283\n00:58:41,700 --> 00:58:43,010\n[LAUGH]\n>> I think it's just because they\n\n1284\n00:58:43,010 --> 00:58:44,580\ndidn't expect a lot of people to do this.\n\n1285\n00:58:44,580 --> 00:58:46,020\nYou know, this was added after the fact.\n\n1286\n00:58:46,020 --> 00:58:47,340\n>> Yeah.\n>> You didn't have the ability to do it\n\n1287\n00:58:47,340 --> 00:58:49,170\noriginally, so they kind of added it.\n\n1288\n00:58:49,170 --> 00:58:50,535\nIt's not a very commonly used one.\n\n1289\n00:58:50,535 --> 00:58:51,920\n>> Mm-mm.\n>> Another neat thing,\n\n1290\n00:58:51,920 --> 00:58:54,525\nyou can actually do this\nagainst a WIM file.\n\n1291\n00:58:54,525 --> 00:58:55,150\n>> Mm-hm.\n\n1292\n00:58:55,150 --> 00:58:59,200\nSo if you've already used Windows\nDeployment Services to build an image,\n\n1293\n00:58:59,200 --> 00:59:03,040\nyou can mount the image next to\nthe same commands against the image,\n\n1294\n00:59:03,040 --> 00:59:06,650\nand actually extract these feature files\nfrom an image you've already made.\n\n1295\n00:59:06,650 --> 00:59:09,710\n>> Absolutely, and that means now when\nI go to clone that virtual hard drive,\n\n1296\n00:59:09,710 --> 00:59:11,600\nI get that much less that\nI have to worry about.\n\n1297\n00:59:11,600 --> 00:59:14,089\n>> Yep, that's, and\nthat's really what it boils down to.\n\n1298\n00:59:14,089 --> 00:59:20,786\nIt's all about reducing the amount\nof storage that our images take up.\n\n1299\n00:59:20,786 --> 00:59:24,269\nMost of our storage is not a concern,\nwe're not really worried about it but,\n\n1300\n00:59:24,269 --> 00:59:27,110\nthe other use is if you wanna\nprevent people from adding roles,\n\n1301\n00:59:27,110 --> 00:59:30,561\nwell you're not really preventing them\ncuz they can just bring the disk in.\n\n1302\n00:59:30,561 --> 00:59:34,856\n>> Yeah, guess if you blocked Internet\naccess and didn't set up that share,\n\n1303\n00:59:34,856 --> 00:59:38,742\nin small environments and\nstuff like that, probably not worth it,\n\n1304\n00:59:38,742 --> 00:59:43,721\nI can see in enterprise environments where\nyou've got hundreds of virtual machines or\n\n1305\n00:59:43,721 --> 00:59:48,185\nthousands and you're talking a few gigs\nper machine, that starts to add up.\n\n1306\n00:59:48,185 --> 00:59:51,282\nYou can start configuring your, figuring\nout your costs per gig on your storage.\n\n1307\n00:59:51,282 --> 00:59:52,790\n>> Mm hm.\n\n1308\n00:59:52,790 --> 00:59:56,700\n>> And you might see a savings there so\nit might be worth doing.\n\n1309\n00:59:56,700 --> 00:59:59,874\nMe, personally, I like to be able to\ngo to that add roles and features and\n\n1310\n00:59:59,874 --> 01:00:01,870\nI don't have to worry about it.\n\n1311\n01:00:01,870 --> 01:00:02,510\nYeah.\n\n1312\n01:00:02,510 --> 01:00:04,720\nBut if you set it up properly,\nyou still don't.\n\n1313\n01:00:04,720 --> 01:00:07,200\nIt's got that central location\nwhere they can all access it.\n\n1314\n01:00:08,560 --> 01:00:13,227\nAll right, so we'll go back in here,\none quick last peek.\n\n1315\n01:00:13,227 --> 01:00:14,370\nSee if we see anything different.\n\n1316\n01:00:17,177 --> 01:00:21,039\nYou don't really have to be an admin\nto run this, but I will, for giggles.\n\n1317\n01:00:22,490 --> 01:00:24,550\nLet's just do get dash\nWindows feature again.\n\n1318\n01:00:25,860 --> 01:00:26,670\nSee if it lists them.\n\n1319\n01:00:26,670 --> 01:00:34,348\nIt still should list them because it could\ninstall them if it found the source files.\n\n1320\n01:00:34,348 --> 01:00:35,891\nBut maybe not.\n\n1321\n01:00:38,191 --> 01:00:40,580\nYep, so it still does list them.\n\n1322\n01:00:40,580 --> 01:00:44,380\nSo yeah again but you can see now\ninstead of available they say removed.\n\n1323\n01:00:45,420 --> 01:00:45,920\nRight?\n\n1324\n01:00:47,110 --> 01:00:48,120\nThat's the difference there.\n\n1325\n01:00:49,220 --> 01:00:51,490\nAnd that, my friends,\nis features on demand.\n\n1326\n01:00:53,030 --> 01:00:56,290\n>> Well, Mike, I've been waiting patiently\nand I can see that I still haven't\n\n1327\n01:00:56,290 --> 01:01:00,180\nregistered with the IS and S server so\nI need to dig into it and find that out.\n\n1328\n01:01:00,180 --> 01:01:00,690\nLet's do this.\n\n1329\n01:01:00,690 --> 01:01:01,680\nLet's stop and take a break.\n\n1330\n01:01:01,680 --> 01:01:03,454\n>> Okay.\n>> When we get back I will have,\n\n1331\n01:01:03,454 --> 01:01:06,990\none way or another, forced this thing\nto register with the ISNS server.\n\n1332\n01:01:06,990 --> 01:01:08,210\nI might just need to reboot.\n\n1333\n01:01:08,210 --> 01:01:09,126\nAnd.\n\n1334\n01:01:09,126 --> 01:01:13,213\n[LAUGH] And once that's done, we'll take\na look at that and then we'll just take\n\n1335\n01:01:13,213 --> 01:01:17,178\na quick look at clustering when it comes\nto IScsi because that is important and\n\n1336\n01:01:17,178 --> 01:01:19,993\nthen we'll wrap up this show from there so\nstay tuned.\n\n1337\n01:01:19,993 --> 01:01:21,277\nWe'll be back after this.\n\n1338\n01:01:21,277 --> 01:01:24,625\n[NOISE] Alright,\n\n1339\n01:01:24,625 --> 01:01:29,890\nwelcome back everybody.\n\n1340\n01:01:29,890 --> 01:01:33,170\nSo, I found out something\ninteresting during the break there.\n\n1341\n01:01:33,170 --> 01:01:34,672\nI waited patiently\n>> Bingo.\n\n1342\n01:01:34,672 --> 01:01:36,500\n>> For us to register with ISNS.\n\n1343\n01:01:36,500 --> 01:01:39,840\n>> For Mr Don,\nI would say he waited very patiently.\n\n1344\n01:01:39,840 --> 01:01:41,860\n>> And then I said; you know what?\n\n1345\n01:01:41,860 --> 01:01:45,365\nI'm tired of being patient,\nI'm going to force it to register.\n\n1346\n01:01:45,365 --> 01:01:49,430\nAnd the entry where it registers with\niSNS, where it keeps that iSNS server\n\n1347\n01:01:49,430 --> 01:01:54,286\nvalue, it's actually stored in your WMI,\nyour Windows management instrumentation.\n\n1348\n01:01:54,286 --> 01:01:57,969\nSo, I reached in to that database\nto write the value directly and\n\n1349\n01:01:57,969 --> 01:02:00,779\nI noticed something odd,\nthe values not there.\n\n1350\n01:02:00,779 --> 01:02:01,345\n>> It's gone.\n\n1351\n01:02:01,345 --> 01:02:05,485\nAnd apparently Windows server\n2012 R2 the value is gone.\n\n1352\n01:02:05,485 --> 01:02:08,890\nAnd I did some checking on\nthe tech net site, and there's\n\n1353\n01:02:08,890 --> 01:02:13,045\nother people asking where did it go, and\nMicrosoft's not providing any answers.\n\n1354\n01:02:13,045 --> 01:02:18,825\nSo it appears that while we can\nbe an iSNS server just fine.\n\n1355\n01:02:18,825 --> 01:02:20,533\n>> Mm-hm.\n>> Windows Server 2012 at\n\n1356\n01:02:20,533 --> 01:02:23,365\nleast as of the moment of this\nrecording is not capable of being\n\n1357\n01:02:23,365 --> 01:02:24,196\nan IS-\n>> Right.\n\n1358\n01:02:24,196 --> 01:02:26,840\n>> iSNS registered target.\n\n1359\n01:02:26,840 --> 01:02:28,560\nYou can register as a client, right?\n\n1360\n01:02:28,560 --> 01:02:29,660\nWe saw my initiators-\n>> Mm-hm.\n\n1361\n01:02:29,660 --> 01:02:30,850\n>> Register before the break.\n\n1362\n01:02:30,850 --> 01:02:33,770\n>> Yep.\n>> But the targets are not registering.\n\n1363\n01:02:33,770 --> 01:02:34,350\n>> Right.\n\n1364\n01:02:34,350 --> 01:02:35,372\n>> So that.\n\n1365\n01:02:35,372 --> 01:02:36,451\n>> First your sands would support it.\n\n1366\n01:02:36,451 --> 01:02:37,304\nThings like that.\n\n1367\n01:02:37,304 --> 01:02:37,804\nSo.\n>> Yeah.\n\n1368\n01:02:37,804 --> 01:02:38,483\nAnd I don't know if\n\n1369\n01:02:38,483 --> 01:02:41,887\nthat's going to be long term thing or not.\nI checked our other sand here in the\n\n1370\n01:02:41,887 --> 01:02:46,144\nbuilding and it didn't have iSNS support\neither so I don't know maybe that's\n\n1371\n01:02:46,144 --> 01:02:49,495\na dying technology but, interesting.\n>> Have it going away.\n\n1372\n01:02:49,495 --> 01:02:51,015\n>> Well, what's on the exam is setting up\n\n1373\n01:02:51,015 --> 01:02:54,400\nan iSNS server which is really just\na matter of adding the service and\n\n1374\n01:02:54,400 --> 01:02:55,810\nthen you're pretty much done.\n\n1375\n01:02:55,810 --> 01:02:57,950\nMaybe you create some\ndiscovery domains but\n\n1376\n01:02:57,950 --> 01:03:00,470\nother than that there's\nnot too much to it.\n\n1377\n01:03:00,470 --> 01:03:04,325\nI do wanna cover one other thing about\niSCSI before we move on, though.\n\n1378\n01:03:04,325 --> 01:03:04,970\n>> Mm-hm.\n\n1379\n01:03:04,970 --> 01:03:07,590\n>> Remember at the beginning,\nwhen I started setting up iSCSI,\n\n1380\n01:03:07,590 --> 01:03:10,830\nI was trying to set it up on server\nnumber one, and it didn't work and\n\n1381\n01:03:10,830 --> 01:03:12,340\nthen I remembered, oh, that's right.\n\n1382\n01:03:12,340 --> 01:03:13,000\n>> Yep.\n\n1383\n01:03:13,000 --> 01:03:15,715\n>> iSCSI is cluster aware\nin Windows Server 2012.\n\n1384\n01:03:15,715 --> 01:03:16,720\n>> Mm-hm.\n\n1385\n01:03:16,720 --> 01:03:20,206\nThat means that if we're\nsetting up a iSCSI target,\n\n1386\n01:03:20,206 --> 01:03:23,785\nwe can actually make it cluster aware and\nredundant.\n\n1387\n01:03:23,785 --> 01:03:27,735\nNow, there's not a lot of need for that\nbut if you've already got shared storage,\n\n1388\n01:03:27,735 --> 01:03:31,236\nthen you'd probably just put that\nshared storage in the cluster anyway,\n\n1389\n01:03:31,236 --> 01:03:31,820\nand\n>> Yeah.-\n\n1390\n01:03:31,820 --> 01:03:34,710\n>> not worry about doing a clustered\n\n1391\n01:03:34,710 --> 01:03:38,670\nISCSI environment, but you can and\nso we do need to be aware for that.\n\n1392\n01:03:38,670 --> 01:03:40,370\nOn the exam they're not\ngoing to have you do it but\n\n1393\n01:03:40,370 --> 01:03:43,070\nthey want you to know it can be done,\nand I'll just show you really quickly.\n\n1394\n01:03:43,070 --> 01:03:45,502\nLet me jump over to one\nof my cluster nodes,\n\n1395\n01:03:45,502 --> 01:03:49,163\nand this is from the cluster we\nsetup in the clustering episode.\n\n1396\n01:03:49,163 --> 01:03:50,698\nNot this one, this one.\n\n1397\n01:03:50,698 --> 01:03:55,445\nAnd basically if I go into\nmy Failover cluster manager.\n\n1398\n01:03:55,445 --> 01:04:01,048\nIn my failover cluster manager,\nwhen I have an iSCSI target set up.\n\n1399\n01:04:01,048 --> 01:04:05,958\nI installed the iSCSI target\nrole service on this machine and\n\n1400\n01:04:05,958 --> 01:04:08,941\nnow that the role service is on here,\n\n1401\n01:04:08,941 --> 01:04:13,943\nI can drill into my roles and\nI'll see in here, if I wanna go and\n\n1402\n01:04:13,943 --> 01:04:18,300\nconfigure a roll,\nthat I'll have that ability now.\n\n1403\n01:04:18,300 --> 01:04:20,310\nI'll have that ability\nto add an iSCSI roll.\n\n1404\n01:04:20,310 --> 01:04:25,420\nSo when I move forward, I can see it here\nin my list, an iSCSI target server and\n\n1405\n01:04:25,420 --> 01:04:30,140\nan ISNS server,\nboth of which are cluster aware.\n\n1406\n01:04:30,140 --> 01:04:32,550\nSo when I tried to add\na target on this machine and\n\n1407\n01:04:32,550 --> 01:04:36,510\nit wouldn't let me, the reason is\nonce you're in a failover cluster,\n\n1408\n01:04:36,510 --> 01:04:39,690\nit will only let you create\nfailover iSCSI targets.\n\n1409\n01:04:39,690 --> 01:04:42,160\nIt won't let you create stand\nalone ones anymore, and\n\n1410\n01:04:42,160 --> 01:04:43,670\nthat's a limitation of the software.\n\n1411\n01:04:43,670 --> 01:04:45,535\nSo that's why I didn't see that option.\n\n1412\n01:04:45,535 --> 01:04:49,805\nBut I could come in here and say,\nall right, I'm gonna be an iSCSI target\n\n1413\n01:04:49,805 --> 01:04:53,871\nserver, and we can set that up,\nwe can give it a name that it'll use.\n\n1414\n01:04:53,871 --> 01:04:57,570\nSo I'll just call it my iSCSI target.\n\n1415\n01:04:57,570 --> 01:05:00,562\nI don't think it'll let me use spaces,\nbut it will let me use a hyphen, so\n\n1416\n01:05:00,562 --> 01:05:02,074\nmaybe I'll stick a hyphen in there.\n\n1417\n01:05:02,074 --> 01:05:03,457\nSo, it gives me my iSCSI target and\n\n1418\n01:05:03,457 --> 01:05:05,381\nI don't remember what my\nnext available IP is.\n\n1419\n01:05:05,381 --> 01:05:06,520\n>> 45, yeah.\n\n1420\n01:05:06,520 --> 01:05:07,850\n>> We'll go 45.\n\n1421\n01:05:07,850 --> 01:05:10,235\nSo here's the shared IP that it'll use.\n\n1422\n01:05:10,235 --> 01:05:12,640\nIt'll validate that real quick and\nsee if I picked a bad IP.\n\n1423\n01:05:12,640 --> 01:05:15,450\nNope.\nAnd then I can specify what disk it's\n\n1424\n01:05:15,450 --> 01:05:17,270\ngonna tie to,\nI guess I have an available disk.\n\n1425\n01:05:17,270 --> 01:05:20,080\nNot a big one, but we'll take it.\n\n1426\n01:05:20,080 --> 01:05:23,610\nAnd it'll attach it to\nmake that iSCSI target.\n\n1427\n01:05:23,610 --> 01:05:26,260\nSo now I've got a cluster\naware iSCSI target and\n\n1428\n01:05:26,260 --> 01:05:30,760\nthe cool part here is if server one fails,\nserver two will take over.\n\n1429\n01:05:30,760 --> 01:05:33,340\nAnd it looks like I got a warning.\n\n1430\n01:05:33,340 --> 01:05:38,870\nOh, I haven't installed the iSCSI\ntarget role service on server two.\n\n1431\n01:05:38,870 --> 01:05:41,190\nYep, so it's just letting me know that,\n\n1432\n01:05:41,190 --> 01:05:45,460\nwhile I do have a cluster,\nonly one node is properly configured.\n\n1433\n01:05:45,460 --> 01:05:47,196\nI really need to go to my other node and\n\n1434\n01:05:47,196 --> 01:05:49,670\nadd the iSCSI target role\nservice over there, too.\n\n1435\n01:05:49,670 --> 01:05:52,120\n>> Otherwise, yeah,\nit wouldn't be able to failover to it.\n\n1436\n01:05:52,120 --> 01:05:54,130\n>> But there it is,\nthere's my target server it's up,\n\n1437\n01:05:54,130 --> 01:05:58,200\nit's got that one hard drive\nattached to it and so it's there.\n\n1438\n01:05:58,200 --> 01:06:01,280\nWe can fail it between the servers,\nwell normally we could, except here.\n\n1439\n01:06:01,280 --> 01:06:03,930\nHere we're gonna have a hard time\nwith that because the other one isn't\n\n1440\n01:06:03,930 --> 01:06:05,840\nquite set up for it, so.\n\n1441\n01:06:05,840 --> 01:06:06,940\nBut that's basically it.\n\n1442\n01:06:06,940 --> 01:06:08,410\nIt is cluster aware, so\n\n1443\n01:06:08,410 --> 01:06:11,570\njust be aware that that's why I had\nissues at the beginning of the show.\n\n1444\n01:06:12,870 --> 01:06:14,666\nAll right, so\nthat pretty much wraps up iSCSI.\n\n1445\n01:06:14,666 --> 01:06:17,784\nKind of anti-climatic there because we\ncouldn't register with the ISNS server.\n\n1446\n01:06:17,784 --> 01:06:19,399\n>> Yeah.\nKind of a bummer to end it that way but.\n\n1447\n01:06:19,399 --> 01:06:23,129\n>> Yeah, if this were a Windows\n2008 show it works great, in 2008.\n\n1448\n01:06:23,129 --> 01:06:26,522\nBut in 2012, not gonna be our winner, so.\n\n1449\n01:06:26,522 --> 01:06:31,300\nAll right, the very last objective that\nwe're gonna touch on in this episode\n\n1450\n01:06:31,300 --> 01:06:36,349\nis multi-tiered discs or\ndisk storage tiering.\n\n1451\n01:06:36,349 --> 01:06:40,815\nTiered storage, I think tiered\nstorage is the official term to use.\n\n1452\n01:06:40,815 --> 01:06:43,919\nAnd it's kind of interesting\none because it's one that\n\n1453\n01:06:43,919 --> 01:06:46,506\nwe've already covered in the 7410 show.\n\n1454\n01:06:46,506 --> 01:06:49,505\nWhat happened is in 7410\nwe did storage pools and\n\n1455\n01:06:49,505 --> 01:06:54,220\nin storage spaces on the server which is\na new feature in Windows Server 2012.\n\n1456\n01:06:54,220 --> 01:06:59,800\nIt's really cool, and it gets used\nhand-in-hand with tiered storage.\n\n1457\n01:06:59,800 --> 01:07:04,150\nThe idea behind tiered storage is,\nyou might have some hard drives that\n\n1458\n01:07:04,150 --> 01:07:10,500\nare six gigabit fiber channel SCSI drives\nthat are super fast, super expensive.\n\n1459\n01:07:10,500 --> 01:07:15,470\nAnd then you might have a bunch of 5400\nRPM SATA drives that are super cheap and\n\n1460\n01:07:15,470 --> 01:07:16,680\nnot so great.\n\n1461\n01:07:16,680 --> 01:07:19,040\nAnd you might want your critical data or\n\n1462\n01:07:19,040 --> 01:07:24,210\nyour frequently accessed data going\non these 15,000 RPM fast drives.\n\n1463\n01:07:24,210 --> 01:07:27,130\nAnd you might want your less\nfrequently accessed data going\n\n1464\n01:07:27,130 --> 01:07:29,630\non these 5400 RPM SATA drives.\n\n1465\n01:07:29,630 --> 01:07:31,680\nSo you've got tiers of storage.\n\n1466\n01:07:31,680 --> 01:07:35,860\nTier one, high end storage and\ntier two, low end storage or whatever.\n\n1467\n01:07:35,860 --> 01:07:38,880\nAnd with storage spaces we\ncan actually tell it hey,\n\n1468\n01:07:38,880 --> 01:07:41,600\nstuff is being accessed frequently,\nmove it up to these drives.\n\n1469\n01:07:41,600 --> 01:07:44,890\nEverything else, move it off to these\nother ones, and it's really, really cool,\n\n1470\n01:07:44,890 --> 01:07:46,030\nall right.\n\n1471\n01:07:46,030 --> 01:07:47,330\nYou can also do it with SSD.\n\n1472\n01:07:47,330 --> 01:07:51,060\nYou might have a bunch of SSD drives and\na bunch of SATA drives, and\n\n1473\n01:07:51,060 --> 01:07:53,550\nso SSD becomes your tier one storage.\n\n1474\n01:07:53,550 --> 01:07:58,420\nSo we actually set up all of that when\nwe did the storage spaces episode.\n\n1475\n01:07:58,420 --> 01:08:02,239\nSo we really went through and Nate\nCopeland, he had a great lab set up for\n\n1476\n01:08:02,239 --> 01:08:04,910\nthat, so\nwe kind of ran through and did it.\n\n1477\n01:08:04,910 --> 01:08:08,150\nSo instead of repeating or\nreinventing the wheel here,\n\n1478\n01:08:08,150 --> 01:08:12,040\nwhat I want to do is refer you\nover to that 7410 episode.\n\n1479\n01:08:12,040 --> 01:08:16,790\nJump over to the 7410 shows, as a ITPROTV\nsubscriber it's part of your account so\n\n1480\n01:08:16,790 --> 01:08:18,070\nyou don't have to pay extra.\n\n1481\n01:08:18,070 --> 01:08:19,110\nJump on over and check that out.\n\n1482\n01:08:19,110 --> 01:08:21,270\nLook for\nthe storage episode over there and\n\n1483\n01:08:21,270 --> 01:08:24,090\nyou'll see a great example\nof tiered storage there.\n\n1484\n01:08:24,090 --> 01:08:26,440\nJust be aware that you've gotta\nclassify those discs, and\n\n1485\n01:08:26,440 --> 01:08:28,840\nwe typically do that as part\nof the storage spaces setup.\n\n1486\n01:08:28,840 --> 01:08:29,520\n>> Right, yup.\n\n1487\n01:08:29,520 --> 01:08:30,170\nYeah, very cool.\n\n1488\n01:08:30,170 --> 01:08:32,980\nAnd the fact that it figures out\nwhich files are most accessed and\n\n1489\n01:08:32,980 --> 01:08:36,140\nwhich files are least accessed, and\nit'll dynamically move stuff around\n\n1490\n01:08:36,140 --> 01:08:38,460\nbetween your faster drives and\nyour slow drives.\n\n1491\n01:08:38,460 --> 01:08:40,206\nAnd you can pre-cache some things too,\nas well.\n\n1492\n01:08:40,206 --> 01:08:44,040\nYou can load, if you think there's some\nthings that might not get accessed as much\n\n1493\n01:08:44,040 --> 01:08:45,740\nand it wants to move it off\nto the slow storage and\n\n1494\n01:08:45,740 --> 01:08:48,590\nyou don't want that, you can force it\nto put some on the fast part, too.\n\n1495\n01:08:48,590 --> 01:08:49,210\n>> Yeah.\nAbsolutely.\n\n1496\n01:08:50,470 --> 01:08:53,730\nAll right, well, Mike as far as optimizing\nand messing around with advanced storage\n\n1497\n01:08:53,730 --> 01:08:55,129\nfeatures I think that's\nabout all I've got.\n\n1498\n01:08:55,129 --> 01:08:56,595\n>> I think so too.\n>> Do you have anything else to fill in?\n\n1499\n01:08:56,595 --> 01:08:58,520\n>> No,\nI think we covered the whole gambit there.\n\n1500\n01:08:58,520 --> 01:09:01,600\n>> All right, well, ladies and\ngentlemen, let me just remind you guys.\n\n1501\n01:09:01,600 --> 01:09:04,790\nIf you have questions on any of this,\nfeel free to,\n\n1502\n01:09:04,790 --> 01:09:07,960\nwell, live during the show,\nyou go to www.itpro.tv/live, and\n\n1503\n01:09:07,960 --> 01:09:11,120\nyou'll see our little chat box down\nat the bottom beneath the video.\n\n1504\n01:09:11,120 --> 01:09:12,440\nYou can post your questions.\n\n1505\n01:09:12,440 --> 01:09:13,800\nWe'll answer during the show.\n\n1506\n01:09:13,800 --> 01:09:17,200\nIf you have questions after the show,\nmake use of our Q and A forums.\n\n1507\n01:09:17,200 --> 01:09:22,110\nAt the top of every page at www.itpro.tv,\nyou will see the Q and A link up there,\n\n1508\n01:09:22,110 --> 01:09:25,240\nhit it, it'll take you into the forums\nyou can post your questions there,\n\n1509\n01:09:25,240 --> 01:09:26,460\nwe monitor and answer so.\n\n1510\n01:09:26,460 --> 01:09:29,850\nTake advantage of that resource,\nit is there for you.\n\n1511\n01:09:29,850 --> 01:09:30,740\n>> Absolutely.\n\n1512\n01:09:30,740 --> 01:09:32,687\n>> All right,\nwell I hope you guys enjoyed the show.\n\n1513\n01:09:32,687 --> 01:09:35,102\nSigning off for ITProTV, I'm Don Pezet.\n\n1514\n01:09:35,102 --> 01:09:35,727\n>> And I'm Mike Roderick.\n\n1515\n01:09:35,727 --> 01:09:37,573\n>> And we will see you next time.\n\n1516\n01:09:37,573 --> 01:09:47,573\n[MUSIC]\n\n1517\n01:09:50,308 --> 01:09:55,540\n[NOISE]\n\n",
          "vimeoId": "98029351"
        }
      ],
      "title": "Configure file and storage solutions"
    },
    {
      "episodes": [
        {
          "description": "In this episode Mike and Don take a look at business continuity and disaster recovery and the various tools available to implement them. They demonstrate Windows Server backups and performing a Bare Metal Restore (BMR) as well as introducing Microsoft Azure backups. They also discuss Hyper-V Replica and its failover settings.",
          "length": "6018",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/008-Disaster-Recovery.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/008-Disaster-Recovery-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/008-Disaster-Recovery-sm.jpg",
          "title": "Disaster Recovery",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,045 --> 00:00:22,503\n[SOUND]\n\n3\n00:00:22,503 --> 00:00:33,253\n[MUSIC]\n\n4\n00:00:33,253 --> 00:00:36,182\nAll right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:36,182 --> 00:00:38,291\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,291 --> 00:00:41,110\nI'm your host Don Pezet today with Mr.\nMike Rodrick.\n\n7\n00:00:41,110 --> 00:00:41,870\nHow's it going Mike?\n\n8\n00:00:41,870 --> 00:00:43,080\n>> Great, how you doing, Don?\n\n9\n00:00:43,080 --> 00:00:45,090\n>> I am doing swell.\n\n10\n00:00:45,090 --> 00:00:48,850\nWe got a neat episode today, because we're\ngonna be tackling disaster recovery,\n\n11\n00:00:48,850 --> 00:00:50,225\nand you might ask yourself,\n\n12\n00:00:50,225 --> 00:00:52,965\nwait a minute guys, haven't we\nalready covered disaster recovery?\n\n13\n00:00:52,965 --> 00:00:53,845\nAnd the answer's yes.\n\n14\n00:00:53,845 --> 00:00:54,475\n>> Yes, we have.\n\n15\n00:00:54,475 --> 00:00:58,985\n>> But it just shows how important a topic\nthis is that Microsoft basically has added\n\n16\n00:00:58,985 --> 00:01:02,105\nit as an exam objective for\nevery one of their exams.\n\n17\n00:01:02,105 --> 00:01:04,755\nAnd what we're really talking about\nhere is a little bit more advanced.\n\n18\n00:01:04,755 --> 00:01:08,815\nYou know, kind of revisiting some of the\ntechnology we've talked about in terms of\n\n19\n00:01:08,815 --> 00:01:12,320\nrecovery and\nsome of the other plans we might have.\n\n20\n00:01:12,320 --> 00:01:13,330\nThere's a lot of complexity.\n\n21\n00:01:13,330 --> 00:01:15,670\nThere's a lot of different\nsolutions that are out there.\n\n22\n00:01:15,670 --> 00:01:19,120\nAnd you kind of have to find\nthe one that's right for you.\n\n23\n00:01:19,120 --> 00:01:19,820\nAll right.\nSo\n\n24\n00:01:19,820 --> 00:01:22,130\nthe first thing we want to do is\nwe're gonna start out simple and\n\n25\n00:01:22,130 --> 00:01:24,800\nwe'll work our way up to super mega\ncomplex by the end of the episode.\n\n26\n00:01:24,800 --> 00:01:26,020\n>> I like that idea.\n\n27\n00:01:26,020 --> 00:01:30,020\n>> So just starting out simple,\nlet's talk about Windows Server Backup.\n\n28\n00:01:30,020 --> 00:01:31,430\n>> Woohoo, my favorite.\n\n29\n00:01:31,430 --> 00:01:34,380\n>> Windows Server Backup is\nbuilt into Windows Server.\n\n30\n00:01:34,380 --> 00:01:36,970\nIt's been built into\nWindows Server forever.\n\n31\n00:01:36,970 --> 00:01:40,900\nThe first time I worked with it was under\nNT4 back when it was called NT backup.\n\n32\n00:01:40,900 --> 00:01:43,930\nWhen did they change that name,\nin like 2003 or something?\n\n33\n00:01:43,930 --> 00:01:44,795\n>> Was it 2000, I think, 2003?\n\n34\n00:01:44,795 --> 00:01:46,950\n>> Somewhere around there,\nthey changed the name.\n\n35\n00:01:46,950 --> 00:01:51,235\nBut it's the same product and it's just\na little software package we have on\n\n36\n00:01:51,235 --> 00:01:54,485\nWindows Server that we can install,\nand then we can start to do backup.\n\n37\n00:01:54,485 --> 00:01:57,195\nNow-\n>> Not installed by default.\n\n38\n00:01:57,195 --> 00:01:58,755\n>> And I do want to mention that.\n\n39\n00:01:58,755 --> 00:02:00,925\nIt's not installed by default,\nbut you wouldn't know it,\n\n40\n00:02:00,925 --> 00:02:03,675\nbecause the dag gum icon shows up\nwhether it's installed or not.\n\n41\n00:02:03,675 --> 00:02:06,450\nI don't know why Microsoft does that.\n\n42\n00:02:06,450 --> 00:02:10,820\nI guess you have the management tools so\nyou can manage backups on other systems.\n\n43\n00:02:10,820 --> 00:02:13,640\nBut they don't install it locally,\nand there's a big reason for that.\n\n44\n00:02:13,640 --> 00:02:16,290\nYou're not gonna see this on the exam,\nbut the real reason for\n\n45\n00:02:16,290 --> 00:02:18,945\nit is Microsoft's Backup\nis not particularly good.\n\n46\n00:02:18,945 --> 00:02:22,460\n[LAUGH] Not trying to be sarcastic.\n\n47\n00:02:22,460 --> 00:02:23,900\n>> No, Microsoft admits it.\n\n48\n00:02:23,900 --> 00:02:24,970\nThey tell you.\n\n49\n00:02:24,970 --> 00:02:26,490\n>> It's not very future rich.\n\n50\n00:02:26,490 --> 00:02:29,240\nAnd what they want to do is they know\n\n51\n00:02:29,240 --> 00:02:32,920\nthat most people are going to\nuse third party backup software.\n\n52\n00:02:32,920 --> 00:02:36,770\nAnd so they wanna give you the basic\nbackup utility that you can use if you\n\n53\n00:02:36,770 --> 00:02:41,070\nhave to, but ideally you're gonna go with\nsomebody else for your backup solution.\n\n54\n00:02:41,070 --> 00:02:43,110\n>> It's really not\nan enterprise level solution.\n\n55\n00:02:43,110 --> 00:02:46,480\nIt's meant to back up that single server,\nand we use it around here.\n\n56\n00:02:46,480 --> 00:02:50,530\nWe've got other backup solutions, but\nif you need a quick backup of a server\n\n57\n00:02:50,530 --> 00:02:53,100\nthat you want to try to restore in\na virtual machine for a testing or\n\n58\n00:02:53,100 --> 00:02:54,770\nsomething like that.\n\n59\n00:02:54,770 --> 00:02:57,710\nWe've used it where we've got a server\nthat doesn't have a lot of info on it.\n\n60\n00:02:57,710 --> 00:02:59,650\nWe don't need to backup the entire server.\n\n61\n00:02:59,650 --> 00:03:03,215\nWe can use Windows Server Backup to\nbackup just a couple of files, move\n\n62\n00:03:03,215 --> 00:03:07,035\nthem somewhere else where we are planning\nto back up that other server completely or\n\n63\n00:03:07,035 --> 00:03:07,985\nsomething like that.\n\n64\n00:03:07,985 --> 00:03:09,895\nSo it's got its uses, and it's included.\n\n65\n00:03:09,895 --> 00:03:10,935\nIt's free, so it's there.\n\n66\n00:03:10,935 --> 00:03:13,375\n>> Yep, so\nwhat are some of the weaknesses of it?\n\n67\n00:03:13,375 --> 00:03:15,860\nLet's highlight the bad and then we'll\ntalk about how we can use it, right?\n\n68\n00:03:15,860 --> 00:03:17,900\nSo some of the big\nweaknesses that we have,\n\n69\n00:03:17,900 --> 00:03:21,300\nthe Windows server backup doesn't\nhave any central management.\n\n70\n00:03:21,300 --> 00:03:25,190\nSo if you configure WIndows Server Backup\non ten different machines,\n\n71\n00:03:25,190 --> 00:03:27,860\nit's ten different configs\nin ten different places,\n\n72\n00:03:27,860 --> 00:03:31,330\nyou can't monitor the backup health and\nstatus from a central console.\n\n73\n00:03:31,330 --> 00:03:33,420\nIt just doesn't have it, all right?\n\n74\n00:03:33,420 --> 00:03:34,620\nThe second thing is,\n\n75\n00:03:34,620 --> 00:03:39,360\nif you back up to a network location,\nit will only store one backup.\n\n76\n00:03:39,360 --> 00:03:41,378\nIt doesn't let you store like,\nmultiple backups.\n\n77\n00:03:41,378 --> 00:03:45,750\nSo if you want a history, a backlog,\nor whatever, it doesn't do that.\n\n78\n00:03:45,750 --> 00:03:48,250\nThird limitation, and-\n>> No tape support anymore,\n\n79\n00:03:48,250 --> 00:03:49,000\nthey removed tape.\n\n80\n00:03:49,000 --> 00:03:49,610\n>> Did they really?\n\n81\n00:03:49,610 --> 00:03:51,730\nWow.\n>> Yes, removed tape support altogether.\n\n82\n00:03:51,730 --> 00:03:55,070\n>> So yeah, so a couple of things like\nthat are gonna be problematic for\n\n83\n00:03:55,070 --> 00:03:57,270\nus in a production environment.\n\n84\n00:03:57,270 --> 00:04:00,130\nYou go with third party software and\nit kind of resolves that.\n\n85\n00:04:00,130 --> 00:04:02,480\nAll right, now you might ask yourself,\nwait a minute,\n\n86\n00:04:02,480 --> 00:04:05,660\nMicrosoft knows this stuff is there,\ndon't they give us anything?\n\n87\n00:04:05,660 --> 00:04:06,810\nWell, they do have something.\n\n88\n00:04:06,810 --> 00:04:11,480\nThey have something called the Systems\nCenter Data Protection Manager, or SCDPM.\n\n89\n00:04:11,480 --> 00:04:15,260\nYou know, the Systems Center Suite\nis well known for, well, first off,\n\n90\n00:04:15,260 --> 00:04:16,800\nextremely long product names.\n\n91\n00:04:16,800 --> 00:04:20,930\n>> [LAUGH] And the extremely\nlarge dollar symbol next to it.\n\n92\n00:04:20,930 --> 00:04:22,340\n>> They are expensive.\n\n93\n00:04:22,340 --> 00:04:25,880\nBut you know, not just expensive\nin cost of the software,\n\n94\n00:04:25,880 --> 00:04:27,820\ncuz software's not that bad.\n\n95\n00:04:27,820 --> 00:04:32,750\nI think the SCDPM starts at something\nlike $1500 and then, I wanna say it's $70\n\n96\n00:04:32,750 --> 00:04:37,350\nper server that you protect, get the\nlicense per server, so it's not that bad.\n\n97\n00:04:37,350 --> 00:04:38,560\nBut the hardware.\n\n98\n00:04:38,560 --> 00:04:41,930\nBecause you have to have hyper v capable\ndedicated hardware and storage and so\n\n99\n00:04:41,930 --> 00:04:44,020\non and it gets expensive really fast.\n\n100\n00:04:44,020 --> 00:04:44,600\n>> Yep.\n>> And\n\n101\n00:04:44,600 --> 00:04:46,470\nthat's how all\nthe System Center products are.\n\n102\n00:04:46,470 --> 00:04:49,190\nThe infrastructure behind them are so\nheavy.\n\n103\n00:04:49,190 --> 00:04:52,970\nSmall businesses, medium businesses,\nSDPM is not really an option.\n\n104\n00:04:52,970 --> 00:04:55,630\nBut in an enterprise environment,\nit can be pretty handy.\n\n105\n00:04:55,630 --> 00:04:57,470\nSo if you want to learn more about that,\n\n106\n00:04:57,470 --> 00:04:59,570\nwell that's probably a separate\nshow some other day.\n\n107\n00:04:59,570 --> 00:05:03,315\nBut you can go to Microsoft's website and\ndo a search for SCDPM.\n\n108\n00:05:03,315 --> 00:05:04,135\nIt'll turn up.\n\n109\n00:05:04,135 --> 00:05:05,130\nIt's a decent product.\n\n110\n00:05:05,130 --> 00:05:06,231\nI've worked with it a bit.\n\n111\n00:05:06,231 --> 00:05:08,080\nI kind of like some of my\nthird party stuff better.\n\n112\n00:05:08,080 --> 00:05:09,140\n>> Right.\n\n113\n00:05:09,140 --> 00:05:14,470\n>> Comvault is really just awesome\nin enterprise environments.\n\n114\n00:05:14,470 --> 00:05:18,230\nIBM's Tivoli has a backup solution\nin it that's pretty good.\n\n115\n00:05:18,230 --> 00:05:20,490\nYou see that used in a lot of schools.\n\n116\n00:05:20,490 --> 00:05:22,780\nI'm going to say it.\n\n117\n00:05:22,780 --> 00:05:24,510\nI used to love Backup Exec.\n\n118\n00:05:24,510 --> 00:05:28,900\nBackup Exec was my favorite product\nwhen it was created by Seagate and\n\n119\n00:05:28,900 --> 00:05:30,595\nthen it got sold.\n\n120\n00:05:30,595 --> 00:05:32,330\nIt became its own little entity.\n\n121\n00:05:32,330 --> 00:05:35,860\nAnd so it was Veritas Backup Exec.\n\n122\n00:05:35,860 --> 00:05:36,900\nAnd it was a great product.\n\n123\n00:05:36,900 --> 00:05:40,010\nAnd then Symantec bought it,\nand it just kills me.\n\n124\n00:05:40,010 --> 00:05:43,530\nWhenever Symantec buys a product,\nwell, that used to be good software.\n\n125\n00:05:43,530 --> 00:05:45,110\n>> There goes that one, pretty much.\n\n126\n00:05:45,110 --> 00:05:46,010\n>> So that's where it is.\n\n127\n00:05:46,010 --> 00:05:49,510\nSo Symantec Backup Exec,\nnot what it used to be.\n\n128\n00:05:49,510 --> 00:05:52,670\nBut there's tons of software out there and\nthey give you a lot of cool stuff.\n\n129\n00:05:52,670 --> 00:05:56,630\nLike special agents for\nbacking up Sequel and Exchange and for\n\n130\n00:05:56,630 --> 00:05:58,810\nbacking up your domain controllers and\nall.\n\n131\n00:05:58,810 --> 00:06:02,680\nAnd quickly and easily doing authoritative\nrestores of a single user account.\n\n132\n00:06:02,680 --> 00:06:05,940\nWhich we know we can do by hand but\nit's a little complex, so\n\n133\n00:06:05,940 --> 00:06:08,125\nit's nice to have that third\nparty software that does it.\n\n134\n00:06:08,125 --> 00:06:11,530\n>> Mm-hm\n>> So unlike the third party software I\n\n135\n00:06:11,530 --> 00:06:16,391\nuse to mute my phone during a show\nwhich obviously didn't work.\n\n136\n00:06:16,391 --> 00:06:19,900\n>> [LAUGH] So anyhow- [LAUGH]\n>> [LAUGH] How sensitive those mics are.\n\n137\n00:06:19,900 --> 00:06:22,410\n>> We can see the problem with\nrelying on third party software,\n\n138\n00:06:22,410 --> 00:06:24,230\nmy phone did not mute.\n\n139\n00:06:24,230 --> 00:06:26,630\nSo anyhow, same thing with backups.\n\n140\n00:06:26,630 --> 00:06:29,640\nBut on the exam, you are gonna\nsee the Windows Server Backup.\n\n141\n00:06:29,640 --> 00:06:32,190\nThe one that is built in regardless\nof whether you use it in real life.\n\n142\n00:06:32,190 --> 00:06:33,620\nAnd fortunately, it's pretty easy.\n\n143\n00:06:33,620 --> 00:06:37,550\nAll we have we have to do is install\nit and then we're ready to rock right.\n\n144\n00:06:37,550 --> 00:06:40,950\n>> Familiarize yourself with\nthe WB admin commands as well.\n\n145\n00:06:40,950 --> 00:06:44,900\nYou want to work with the Windows backup\nfrom the command line or scripted or\n\n146\n00:06:44,900 --> 00:06:46,290\nanything like that.\n\n147\n00:06:46,290 --> 00:06:48,620\nThe command is actually WB admin.\n\n148\n00:06:48,620 --> 00:06:51,440\nWindows Backup administrations\nis what it stands for.\n\n149\n00:06:51,440 --> 00:06:52,890\nAnd just do a forward slash question mark.\n\n150\n00:06:52,890 --> 00:06:55,690\nLook at your different switches that come\nalong with that, because if they ask you\n\n151\n00:06:55,690 --> 00:06:58,870\nanything about it, they might point\nto that command prompt syntax.\n\n152\n00:07:00,260 --> 00:07:03,115\n>> All right, so we mentioned\nit's not installed by default.\n\n153\n00:07:03,115 --> 00:07:03,800\n>> Mm-hm.\n\n154\n00:07:03,800 --> 00:07:06,870\n>> When you fire up Windows Server 2012,\nand 2012 R2, if\n\n155\n00:07:06,870 --> 00:07:10,345\nyou go under administrative tools, you'll\nactually see Windows Server Backup there.\n\n156\n00:07:10,345 --> 00:07:11,140\n>> Mm-hm.\n>> But if you fire it up,\n\n157\n00:07:11,140 --> 00:07:12,890\nit'll tell you very usefully\nthat it's not installed.\n\n158\n00:07:12,890 --> 00:07:14,240\n>> That it's not installed, yeah.\n\n159\n00:07:14,240 --> 00:07:16,440\nSo it is just a feature that\nwe need to get added in.\n\n160\n00:07:16,440 --> 00:07:17,890\nAnd Mike, did you have a server\nthat you wanted to do?\n\n161\n00:07:17,890 --> 00:07:19,510\n>> Yeah, I've got one pulled one,\nso we might want to go ahead and\n\n162\n00:07:19,510 --> 00:07:20,360\ninstall it real quick.\n\n163\n00:07:20,360 --> 00:07:21,020\n>> Let's do it.\n\n164\n00:07:21,020 --> 00:07:24,675\nAnd what we're going to do is just\nmove into the next exam objective,\n\n165\n00:07:24,675 --> 00:07:26,639\nalso which is a bare metal recovery.\n\n166\n00:07:26,639 --> 00:07:28,994\n>> Mm-hm.\n>> The Windows Server Backup gives us\n\n167\n00:07:28,994 --> 00:07:33,060\nthe ability to backup the entire server,\nthe whole shebang.\n\n168\n00:07:33,060 --> 00:07:37,260\nAnd so if we're backing that up to\nexternal media, not a tape anymore but\n\n169\n00:07:37,260 --> 00:07:42,230\na USB drive or something like that,\nand the server fails, we can get\n\n170\n00:07:42,230 --> 00:07:47,780\na brand new server with completely blank\nhard drives and restore from bare metal.\n\n171\n00:07:47,780 --> 00:07:51,010\nJust put the server back to the way that\nit was, and bring the system back up.\n\n172\n00:07:51,010 --> 00:07:53,140\nWindows Server Backup\ngives us that ability.\n\n173\n00:07:53,140 --> 00:07:53,850\n>> Absolutely.\n\n174\n00:07:53,850 --> 00:07:55,685\n>> To do it,\nwe'd really just need two things.\n\n175\n00:07:55,685 --> 00:07:58,830\nWe'd need, one, a successful backup,\nwhich we're going to do here in a moment.\n\n176\n00:07:58,830 --> 00:08:01,404\n>> Mm-hm.\n>> And two, a Windows Server 2012 R2 DVD\n\n177\n00:08:01,404 --> 00:08:05,360\nwe can boot off of, so that we can\nrun Windows Restore from From there.\n\n178\n00:08:05,360 --> 00:08:08,292\nOr I guess you could do it from Window PE\nor whatever if you were creative.\n\n179\n00:08:08,292 --> 00:08:10,083\n>> Yeah you could boot the disk, yep.\n\n180\n00:08:10,083 --> 00:08:12,270\nAnd you can make some restore media.\n\n181\n00:08:12,270 --> 00:08:14,450\nSo I'm just gonna come in here and\nchoose WIndows Server Backup.\n\n182\n00:08:14,450 --> 00:08:17,735\nIt is a feature, you might have seen me\nskip through there right past the roles,\n\n183\n00:08:17,735 --> 00:08:18,900\nit's a feature.\n\n184\n00:08:18,900 --> 00:08:23,069\nAnd that's about it really,\nnothing, did I remove,\n\n185\n00:08:23,069 --> 00:08:26,340\ndid we do that in the lab yesterday?\n\n186\n00:08:26,340 --> 00:08:27,016\nDid we remove the source file?\n\n187\n00:08:27,016 --> 00:08:29,536\n>> [LAUGH]\n>> Let's see if it's gonna let me-\n\n188\n00:08:29,536 --> 00:08:30,292\n>> We did features on demand on this\n\n189\n00:08:30,292 --> 00:08:31,903\nthing, and we removed it so it's-\n>> Let's see if it's gonna find it.\n\n190\n00:08:31,903 --> 00:08:33,895\nI can't remember if these guys\nhave Internet access, they should.\n\n191\n00:08:33,895 --> 00:08:34,956\n>> They should.\n\n192\n00:08:34,956 --> 00:08:36,403\n>> If they don't find it,\ngo out to Windows Update.\n\n193\n00:08:36,403 --> 00:08:38,312\n>> [LAUGH] I guess we'll find out.\n\n194\n00:08:38,312 --> 00:08:39,050\n>> I forgot about that, yeah.\n\n195\n00:08:39,050 --> 00:08:41,510\nMight need to put those back.\n\n196\n00:08:41,510 --> 00:08:42,356\nThere it goes.\n\n197\n00:08:42,356 --> 00:08:43,500\n>> Okay, good.\n>> Maybe.\n\n198\n00:08:43,500 --> 00:08:47,000\n>> So, for those of you that have\nworked with Windows Server before,\n\n199\n00:08:47,000 --> 00:08:48,830\nyou might have noticed one\nthing that was different.\n\n200\n00:08:48,830 --> 00:08:53,680\nMike just checked off the Windows Server\nbackup feature in his installing.\n\n201\n00:08:53,680 --> 00:08:58,780\nIn previous versions of Windows you had\na choice between installing the GUI or\n\n202\n00:08:58,780 --> 00:09:00,930\nthe command line tools, or both, right?\n\n203\n00:09:00,930 --> 00:09:03,060\nWell on the new one,\nit automatically installs both.\n\n204\n00:09:03,060 --> 00:09:04,995\nI never knew why they did\nthem separate anyways.\n\n205\n00:09:04,995 --> 00:09:08,771\nCuz the command line utilities, they're so\nsmall, you might as well install them.\n\n206\n00:09:08,771 --> 00:09:11,783\nBut, so there we go, we're gonna\nhave that in place in just a minute.\n\n207\n00:09:11,783 --> 00:09:14,090\n>> We'll keep our fingers crossed there.\n\n208\n00:09:14,090 --> 00:09:15,717\nYeah, cuz we did do that\nfeatures on demand.\n\n209\n00:09:15,717 --> 00:09:17,490\n>> [LAUGH]\n>> So we removed all the source files for\n\n210\n00:09:17,490 --> 00:09:18,870\nadding these features.\n\n211\n00:09:18,870 --> 00:09:22,207\nBut this guy has got Internet access, so\nthe second option, if you don't specify,\n\n212\n00:09:22,207 --> 00:09:23,993\nif I was installing it\nfrom the command line,\n\n213\n00:09:23,993 --> 00:09:26,110\nyou could tell it where you\nmoved the source files to.\n\n214\n00:09:26,110 --> 00:09:29,425\nOtherwise it goes out to Windows Update\nand grabs those guys there.\n\n215\n00:09:29,425 --> 00:09:32,024\n[LAUGH]\n>> All right, now once it's done though,\n\n216\n00:09:32,024 --> 00:09:35,740\nwe'll be able to use the graphical user\ninterface to create a backup schedule to\n\n217\n00:09:35,740 --> 00:09:38,748\nsay when we want this system to\nback up and where it's back up to.\n\n218\n00:09:38,748 --> 00:09:43,153\nWe can to manual back ups, or whatever,\nif we want to, from the command prompt.\n\n219\n00:09:43,153 --> 00:09:48,616\n>> We also have the wbadmin commands that\nwe can run Windows Backup Administration.\n\n220\n00:09:48,616 --> 00:09:51,789\nAnd that means we can do scripted backups,\nor automated,\n\n221\n00:09:51,789 --> 00:09:55,500\nyou can do automated restores\nif you really feel crazy.\n\n222\n00:09:55,500 --> 00:09:59,000\nSo we've got that functionality, it's kind\nof up to us how we want to deal with it.\n\n223\n00:09:59,000 --> 00:09:59,856\n>> Yeah if we wanna take a peek,\n\n224\n00:09:59,856 --> 00:10:02,117\nlike I said it's a good idea to\nfamiliarize yourself with those commands.\n\n225\n00:10:06,129 --> 00:10:08,306\nJust so you can get at some\nof the different options,\n\n226\n00:10:08,306 --> 00:10:11,286\nyou can recognize that syntax on\nthe exam there if they ask you about it.\n\n227\n00:10:11,286 --> 00:10:15,038\n>> Yeah and you'll see wbadmin,\nthe stuff that it's doing right there,\n\n228\n00:10:15,038 --> 00:10:16,538\ngetting a list of the disks so\n\n229\n00:10:16,538 --> 00:10:20,748\nwe can schedule backups, starting\na backup, enabling or disabling a backup.\n\n230\n00:10:20,748 --> 00:10:24,670\nSo just various things,\nall stuff we can do from the GUI.\n\n231\n00:10:24,670 --> 00:10:28,640\nBut if you're trying to automate this,\nmaybe you're about to deploy 200 servers\n\n232\n00:10:28,640 --> 00:10:30,300\nand you want to use\nWindows Backup on them,\n\n233\n00:10:30,300 --> 00:10:32,520\nbut you don't want it to go and\nconfigure it 200 times.\n\n234\n00:10:32,520 --> 00:10:35,440\nYou could write a simple script,\nhave it run on those machines as part of\n\n235\n00:10:35,440 --> 00:10:38,710\nthe setup process, and now they're\nset up to do backups every night or\n\n236\n00:10:38,710 --> 00:10:40,360\nwhatever it is that you chose to make.\n\n237\n00:10:40,360 --> 00:10:41,470\n>> Exactly.\n\n238\n00:10:41,470 --> 00:10:43,320\n>> Yeah, so we've come into our\nWindows Server backup here.\n\n239\n00:10:43,320 --> 00:10:45,541\nAnd first thing you'll notice\nthat we just installed it so\n\n240\n00:10:45,541 --> 00:10:46,820\nwe don't have a schedule set up.\n\n241\n00:10:46,820 --> 00:10:48,740\nIt's gonna read, take a look.\n\n242\n00:10:48,740 --> 00:10:51,500\nIt's looking for any backups that\nI might have already created.\n\n243\n00:10:51,500 --> 00:10:53,722\nChecking my disks, seeing what we've got.\n\n244\n00:10:53,722 --> 00:10:56,810\nAnd then you can see here,\nno backup has been configured.\n\n245\n00:10:56,810 --> 00:10:59,338\nSo I don't have any data down here.\n\n246\n00:10:59,338 --> 00:11:03,532\nWe go into Backup Schedule and this is\nwhere we can set up our backup schedule.\n\n247\n00:11:03,532 --> 00:11:06,950\nPretty straightforward little wizard,\nwe'll click Next.\n\n248\n00:11:08,010 --> 00:11:11,700\nAnd we're gonna do a full server backup,\nI believe, so we can do that bare metal\n\n249\n00:11:11,700 --> 00:11:13,720\nrestore, so we might have to\nlet this run in the background.\n\n250\n00:11:13,720 --> 00:11:15,540\nWe've got about 30 gigs there.\n\n251\n00:11:15,540 --> 00:11:16,770\n>> Yeah, let's go ahead and fire that up.\n\n252\n00:11:16,770 --> 00:11:19,780\nNow, while that's running,\nit doesn't ask too much more right?\n\n253\n00:11:19,780 --> 00:11:24,069\nOh, [LAUGH] it's warning us,\ncuz these are clustered servers, and so\n\n254\n00:11:24,069 --> 00:11:26,117\nwe have a cluster shared volume.\n\n255\n00:11:26,117 --> 00:11:28,070\nAnd so it's just warning us about that,\n\n256\n00:11:28,070 --> 00:11:30,948\nthat it won't be able to back\nup the cluster shared volume.\n\n257\n00:11:30,948 --> 00:11:33,365\n>> Right, so\nI decide when I want it to run and\n\n258\n00:11:33,365 --> 00:11:35,933\nwe'll just leave the default here, 9 PM.\n\n259\n00:11:35,933 --> 00:11:38,505\nIf you wanted to do it more than\nonce a day you can do that as well.\n\n260\n00:11:38,505 --> 00:11:41,280\nClick Next.\n\n261\n00:11:41,280 --> 00:11:45,349\nAnd then where do I wanna back this up to,\na hard disk that is dedicated for backups.\n\n262\n00:11:45,349 --> 00:11:47,277\nAnd this is what they're\ngonna recommend for\n\n263\n00:11:47,277 --> 00:11:51,380\nyour scheduled backup because that way\nit's always there, it's always available.\n\n264\n00:11:51,380 --> 00:11:55,572\nYou can back it up to some different\nlocations like a shared network folder,\n\n265\n00:11:55,572 --> 00:11:56,830\nsomething like that.\n\n266\n00:11:56,830 --> 00:12:00,830\nBut if that network wasn't available,\nmy backup would fail.\n\n267\n00:12:00,830 --> 00:12:03,580\nAnd we'll go ahead and back it up\nto a hard disk that's dedicated.\n\n268\n00:12:03,580 --> 00:12:06,840\nBut you do want to make sure you note\nhere, the hard disk that you use will be\n\n269\n00:12:06,840 --> 00:12:09,850\nformatted and\nthen dedicated to only store backups.\n\n270\n00:12:09,850 --> 00:12:11,490\nSo whatever volume you choose, or\n\n271\n00:12:11,490 --> 00:12:14,152\nwhatever hard drive you choose,\nyou can't use it for anything else.\n\n272\n00:12:14,152 --> 00:12:16,620\nIt's gonna wipe any data\nthat's already on there, and\n\n273\n00:12:16,620 --> 00:12:18,880\nit's gonna exclude it from any other use.\n\n274\n00:12:20,400 --> 00:12:24,498\nAnd let's see if I could find\nthat drive that I created.\n\n275\n00:12:28,085 --> 00:12:29,095\n>> 300 megabytes, Mike?\n\n276\n00:12:29,095 --> 00:12:31,320\nThat's gonna be a tight backup.\n\n277\n00:12:31,320 --> 00:12:35,609\n>> That is not the drive,\nit's not seeing my other,\n\n278\n00:12:35,609 --> 00:12:40,323\nit's not seeing the attached\nstorage I don't think.\n\n279\n00:12:40,323 --> 00:12:42,720\nLet's double check that I did attach that.\n\n280\n00:12:42,720 --> 00:12:44,578\nMaybe I didn't attach that.\n\n281\n00:12:44,578 --> 00:12:49,550\nAll right, well let me go back over to,\n\n282\n00:12:49,550 --> 00:12:53,915\noh is this our physical-\n>> That's one of our clustered servers\n\n283\n00:12:53,915 --> 00:12:54,841\nfrom the show the other day.\n\n284\n00:12:54,841 --> 00:12:55,630\n>> That is, that is.\n\n285\n00:12:55,630 --> 00:12:56,878\nLet's go jump over to.\n\n286\n00:13:01,096 --> 00:13:05,595\nNo, the 100.241,\nthat's one of our virtuals, is it not?\n\n287\n00:13:05,595 --> 00:13:06,320\n>> No that's a physical.\n\n288\n00:13:06,320 --> 00:13:06,924\n>> Okay.\n\n289\n00:13:06,924 --> 00:13:07,946\n>> That's our physical that we used for\nclustering.\n\n290\n00:13:07,946 --> 00:13:08,468\n>> All right.\n\n291\n00:13:08,468 --> 00:13:09,670\nAll right,\nlet's go over here to the other one then.\n\n292\n00:13:09,670 --> 00:13:10,850\n>> All right.\n\n293\n00:13:10,850 --> 00:13:13,890\nWell, while Mike's jumping servers,\nI do want to talk about one thing.\n\n294\n00:13:13,890 --> 00:13:15,820\nWhen we back up the server,\n\n295\n00:13:15,820 --> 00:13:18,780\none of the default options is\nto back up the system state.\n\n296\n00:13:18,780 --> 00:13:23,220\nNow, Mike had that option in there to do\na custom back up to pick other things.\n\n297\n00:13:23,220 --> 00:13:24,857\nBut normally the system state\nis one of the things we want.\n\n298\n00:13:24,857 --> 00:13:28,313\nAnd if you've worked with Windows for\na long time you know the system state,\n\n299\n00:13:28,313 --> 00:13:30,486\nthe key thing that it\ncontains is the registry.\n\n300\n00:13:30,486 --> 00:13:32,733\nIt's a copy of the registry\nin your system,\n\n301\n00:13:32,733 --> 00:13:35,420\nwhich is a lot of the custom\nsettings on our devices.\n\n302\n00:13:35,420 --> 00:13:37,020\nThat's pretty important.\n\n303\n00:13:37,020 --> 00:13:38,186\nWell, in Windows Server 2008,\n\n304\n00:13:38,186 --> 00:13:40,115\nthey made a little change that\nyou guys might not be aware of.\n\n305\n00:13:40,115 --> 00:13:43,021\nAnd that is when you\nback up the system state,\n\n306\n00:13:43,021 --> 00:13:45,477\nit now also includes the boot volume.\n\n307\n00:13:45,477 --> 00:13:49,987\nAll right, now I mention that here because\na lot of servers that are out there just\n\n308\n00:13:49,987 --> 00:13:51,190\nhave one hard drive.\n\n309\n00:13:51,190 --> 00:13:52,132\nThey just have a C drive.\n\n310\n00:13:52,132 --> 00:13:55,030\nIf you've got a simple web server DHCP,\nDNS something like that,\n\n311\n00:13:55,030 --> 00:13:58,730\nyou probably don't have a bunch of hard\ndrives attached to it, you just have C.\n\n312\n00:13:58,730 --> 00:14:03,250\nAnd so if you choose to back up the system\nstate, it's gonna back up the boot volume,\n\n313\n00:14:03,250 --> 00:14:05,300\nwhich is gonna be your entire C drive.\n\n314\n00:14:05,300 --> 00:14:09,260\nAnd so, even if you go custom and\nchoose just the system state,\n\n315\n00:14:09,260 --> 00:14:11,930\nit's still gonna back\nup the entire server.\n\n316\n00:14:11,930 --> 00:14:13,260\nSo you might as well go ahead and\n\n317\n00:14:13,260 --> 00:14:16,710\nchoose that entire server\noption like what Mike did.\n\n318\n00:14:16,710 --> 00:14:20,653\nIf you've got multiple hard drives\nattached to it, like on a file server, and\n\n319\n00:14:20,653 --> 00:14:23,818\nyou just want to back up the files,\nthat's when you go ahead and\n\n320\n00:14:23,818 --> 00:14:24,973\ndo the custom back up.\n\n321\n00:14:24,973 --> 00:14:28,368\nAnd it'll give you a navigation tree where\nyou can check off the folders that you\n\n322\n00:14:28,368 --> 00:14:29,493\nwant to back up and stuff.\n\n323\n00:14:29,493 --> 00:14:31,937\nBut you'll see the system\nstate in there and\n\n324\n00:14:31,937 --> 00:14:35,636\nif you check off system state,\nit will backup your entire C drive,\n\n325\n00:14:35,636 --> 00:14:39,440\nyour entire boot volume where\nyour operating system is stored.\n\n326\n00:14:39,440 --> 00:14:40,930\nThat'll be a part of that system state.\n\n327\n00:14:40,930 --> 00:14:45,160\nSo, backups of the registry that used to\nbe only a couple of hundred megs in size,\n\n328\n00:14:45,160 --> 00:14:48,970\nare now over ten gigs in size because\nthey're including the Windows operating\n\n329\n00:14:48,970 --> 00:14:50,090\nsystem in them.\n\n330\n00:14:50,090 --> 00:14:53,710\nSome people got frustrated with that,\nbut honestly I really appreciated it.\n\n331\n00:14:53,710 --> 00:14:57,800\nAnd the reason was, if you work in a\ncorporate environment you might have some\n\n332\n00:14:57,800 --> 00:15:03,250\nservers that you got from HP or Dell that\nalready had Windows installed on them,\n\n333\n00:15:03,250 --> 00:15:06,738\nand you might have a volume\nlicense agreement with Microsoft.\n\n334\n00:15:06,738 --> 00:15:10,210\nAnd so your VLE or Enterprise\ndisks that you get from Microsoft,\n\n335\n00:15:10,210 --> 00:15:14,250\nyou've got these servers that are running\nOS's that were installed Dell or HP,\n\n336\n00:15:14,250 --> 00:15:17,040\nthey might be different versions.\n\n337\n00:15:17,040 --> 00:15:19,660\nThey might use different SKUs,\nyour product keys might not work.\n\n338\n00:15:19,660 --> 00:15:23,823\nSo having a bare metal backup of the OS\nmeans when you go to restore it you know\n\n339\n00:15:23,823 --> 00:15:28,337\nyou're restoring the right version of\nWindows that matches with that license.\n\n340\n00:15:28,337 --> 00:15:31,239\nAnd so it makes life a little\neasier on that side.\n\n341\n00:15:31,239 --> 00:15:33,480\nI use to struggle with\nthat back in the day.\n\n342\n00:15:33,480 --> 00:15:37,642\nSo it is kind of nice but\nit does make the back ups bigger.\n\n343\n00:15:37,642 --> 00:15:39,830\nFortunately, most people aren't\nbacking up to tape anymore.\n\n344\n00:15:39,830 --> 00:15:43,040\nWhen you back up to tape it's slow, right?\n\n345\n00:15:43,040 --> 00:15:46,480\nWhich, have you seen lately how\nbig some of these LTO drives are?\n\n346\n00:15:46,480 --> 00:15:48,140\n>> Yes, it's amazing isn't it?\n\n347\n00:15:48,140 --> 00:15:52,910\n>> Yeah, I mean, some of them are,\nI've seen 50 terabyte tapes now,\n\n348\n00:15:52,910 --> 00:15:56,610\nwhich is just insane, on a single tape.\n\n349\n00:15:56,610 --> 00:15:59,833\nSo, you can get ones-\n>> I've seen the statistics on it.\n\n350\n00:15:59,833 --> 00:16:03,760\nI don't know how fast, cuz it's tapes,\nyou gotta spool through the whole thing.\n\n351\n00:16:03,760 --> 00:16:07,001\nIt reminds me of my old days with the\ncassette tapes and stuff, to get to that\n\n352\n00:16:07,001 --> 00:16:10,202\nnext song or to that third song,\nthen you gotta fast forward and stuff.\n\n353\n00:16:10,202 --> 00:16:12,840\n>> [LAUGH] And you're trying to\ncopy that Beastie Boys album and\n\n354\n00:16:12,840 --> 00:16:16,590\nthere's empty space at the end,\nand you've gotta fast forward.\n\n355\n00:16:17,710 --> 00:16:20,240\nSadly, true story.\n\n356\n00:16:20,240 --> 00:16:23,100\nYeah, so tapes have their shortcomings.\n\n357\n00:16:23,100 --> 00:16:25,040\nBut they are inexpensive and\n\n358\n00:16:25,040 --> 00:16:29,330\nthey can hold a large quantity of data and\nthey're really easy to send off site.\n\n359\n00:16:29,330 --> 00:16:31,280\nVersus hard drives which\ncan be more expensive,\n\n360\n00:16:31,280 --> 00:16:33,650\nalthough nowadays hard drives\nhave been a lot less expensive.\n\n361\n00:16:33,650 --> 00:16:36,820\nSo a lot of people back up their hard\ndrive now that makes your backups go\n\n362\n00:16:36,820 --> 00:16:37,400\npretty fast.\n\n363\n00:16:37,400 --> 00:16:41,400\nSo having this extra size in your\nbackup is not such a big deal anymore.\n\n364\n00:16:41,400 --> 00:16:44,620\nIf you're still backing up to tape\nthat might be very frustrating.\n\n365\n00:16:44,620 --> 00:16:48,229\nAnd in that scenario,\nyou wanna use third-party software.\n\n366\n00:16:48,229 --> 00:16:50,510\n>> All right, so I switch back\nover to this other machine and\n\n367\n00:16:50,510 --> 00:16:53,660\nI do have a second drive on here we\nshould be able to use for our backup.\n\n368\n00:16:53,660 --> 00:16:56,480\nSo I'm getting that backup\nconsole loaded up again.\n\n369\n00:16:58,615 --> 00:17:01,315\nWaiting for it to scan my drives.\n\n370\n00:17:01,315 --> 00:17:02,795\nThere we go.\n\n371\n00:17:02,795 --> 00:17:03,865\nSo we'll try this one more time.\n\n372\n00:17:03,865 --> 00:17:05,195\nWe're gonna go to backup schedule.\n\n373\n00:17:07,605 --> 00:17:09,495\nAnd see if we can successfully set it up.\n\n374\n00:17:11,602 --> 00:17:14,052\n>> And\nMike's gonna use a direct attach drive\n\n375\n00:17:14,052 --> 00:17:18,402\nat home I do this with I have a USB\n3.0 hard drive that I attach.\n\n376\n00:17:18,402 --> 00:17:23,270\nAnd you can actually configure this\nto work with multiple drives so\n\n377\n00:17:23,270 --> 00:17:25,120\nI have two drives that I swap out.\n\n378\n00:17:25,120 --> 00:17:28,510\nAnd so one week I'll leave one\ndrive attached to back up to and\n\n379\n00:17:28,510 --> 00:17:31,140\nthe next week I swap it out and\nhook up my other one, and so\n\n380\n00:17:31,140 --> 00:17:34,220\nI can always go back a week\nbecause I have multiple drives.\n\n381\n00:17:34,220 --> 00:17:37,560\n>> Did you want to look at\nthe custom options while we're here?\n\n382\n00:17:37,560 --> 00:17:39,120\n>> We can just glance\nat it really quickly.\n\n383\n00:17:39,120 --> 00:17:40,640\n>> A quick see, we can choose them.\n\n384\n00:17:40,640 --> 00:17:43,090\n>> But yeah so basically you go\nthrough here and you add your items.\n\n385\n00:17:43,090 --> 00:17:45,210\nYou add what it is that you wanna back up.\n\n386\n00:17:45,210 --> 00:17:48,210\nAnd so see, you've got your C\ndrive your D drive and so on.\n\n387\n00:17:48,210 --> 00:17:50,540\nIf you choose bare metal,\nsee how that grabbed.\n\n388\n00:17:50,540 --> 00:17:53,140\n>> At everything that was\non there when I did that.\n\n389\n00:17:53,140 --> 00:17:56,500\n>> But if you do system state,\nso Mike uncheck everything.\n\n390\n00:17:58,050 --> 00:18:00,840\nAnd then just click system state.\n\n391\n00:18:02,270 --> 00:18:02,830\nAll right.\n\n392\n00:18:02,830 --> 00:18:04,280\nSee how he just clicked system state and\n\n393\n00:18:04,280 --> 00:18:06,610\nit looks like it's not\ngonna back up that C drive?\n\n394\n00:18:06,610 --> 00:18:08,510\nWell, the C drive is the boot volume.\n\n395\n00:18:08,510 --> 00:18:11,500\nAnd so it actually is gonna\nback up that entire C drive.\n\n396\n00:18:11,500 --> 00:18:13,970\nSo just be aware of that,\nthat's what I was talking about.\n\n397\n00:18:13,970 --> 00:18:15,274\n>> All right, so let's do a bare metal.\n\n398\n00:18:18,235 --> 00:18:20,267\nAnd I'll just click next.\n\n399\n00:18:20,267 --> 00:18:21,428\nAnd we will set our schedule again.\n\n400\n00:18:21,428 --> 00:18:22,840\nI'll leave it on the default for 9 PM.\n\n401\n00:18:22,840 --> 00:18:27,530\nAnd we're gonna dedicate\na drive to the backup.\n\n402\n00:18:27,530 --> 00:18:29,075\nHopefully this time it'll see it.\n\n403\n00:18:29,075 --> 00:18:32,910\n[LAUGH]\nAnd there is my D drive.\n\n404\n00:18:38,630 --> 00:18:39,130\nAll right.\n>> Yeah.\n\n405\n00:18:39,130 --> 00:18:40,610\nAnd that's the screen I was also talking\n\n406\n00:18:40,610 --> 00:18:42,620\nabout where if you have more\nthan one drive attached.\n\n407\n00:18:42,620 --> 00:18:44,980\nSo I said I swap out my USB drives?\n\n408\n00:18:44,980 --> 00:18:49,240\nWhen I set up my back up, I hooked up\nboth drives and I checked them both off.\n\n409\n00:18:49,240 --> 00:18:52,400\nAnd that told the server hey,\nwhich ever one of these is attached,\n\n410\n00:18:52,400 --> 00:18:53,220\nwe can back up to.\n\n411\n00:18:53,220 --> 00:18:55,900\nWhat if they're both,\nwe'll just override the oldest one.\n\n412\n00:18:55,900 --> 00:18:57,260\nSo it's really smart about that.\n\n413\n00:18:57,260 --> 00:18:58,200\n>> Mm-hm, very good.\n\n414\n00:18:59,290 --> 00:19:00,311\nAnd we'll just keep on going.\n\n415\n00:19:00,311 --> 00:19:02,650\nIt's warning me there that it's\ngoing to format that drive and\n\n416\n00:19:02,650 --> 00:19:03,800\ndedicate it to backups.\n\n417\n00:19:03,800 --> 00:19:05,120\nI'll click finish.\n\n418\n00:19:05,120 --> 00:19:09,522\nAnd this is gonna actually do the back up,\nthis is setting up my schedule so\n\n419\n00:19:09,522 --> 00:19:11,830\nit should run out every night at 9 PM.\n\n420\n00:19:11,830 --> 00:19:14,760\nAnd then what we can do is we can\ngo into our backup once options.\n\n421\n00:19:14,760 --> 00:19:16,874\nSo now I've got my schedule, and\n\n422\n00:19:16,874 --> 00:19:21,910\nI can see the next scheduled backup\nis gonna be 9 PM this evening.\n\n423\n00:19:21,910 --> 00:19:25,940\nNow if we want to go ahead and\nfire a backup, we'll click over here and\n\n424\n00:19:25,940 --> 00:19:26,550\ndo a backup once.\n\n425\n00:19:26,550 --> 00:19:30,300\nWhen you do your backup once,\nyou can do different options.\n\n426\n00:19:30,300 --> 00:19:33,720\nMaybe I want to do just a backup of\nan individual folder or a volume, or\n\n427\n00:19:33,720 --> 00:19:34,500\nsomething like that.\n\n428\n00:19:34,500 --> 00:19:36,900\nI didn't want to do a whole\nsystem state at this point.\n\n429\n00:19:36,900 --> 00:19:38,800\nI could choose different options and\n\n430\n00:19:38,800 --> 00:19:42,650\ngo through this same wizard\npicking different options there.\n\n431\n00:19:42,650 --> 00:19:46,335\nIn this case, I'll go ahead and use my\nschedule back-up options because i know\n\n432\n00:19:46,335 --> 00:19:48,543\nit's got the right thing\nthat I want to back up.\n\n433\n00:19:48,543 --> 00:19:52,070\nSystem state or the bare metal config,\nand it's got the right location so\n\n434\n00:19:52,070 --> 00:19:54,390\nI'll just use the scheduled options.\n\n435\n00:19:54,390 --> 00:19:56,350\nAnd this isn't gonna interfere\nwith my schedule either,\n\n436\n00:19:56,350 --> 00:19:58,240\nit will still fire at 9 o'clock tonight.\n\n437\n00:19:59,730 --> 00:20:03,080\nOnce I verify everything looks good,\nwe'll go ahead and click Backup.\n\n438\n00:20:04,710 --> 00:20:06,780\nAnd if we wait a few minutes\nit'll read everything and\n\n439\n00:20:06,780 --> 00:20:10,070\neventually it'll tell us about how\nlong it thinks it's going to take.\n\n440\n00:20:10,070 --> 00:20:14,130\nAnd they're always so accurate with that,\nso I set my watch by it.\n\n441\n00:20:14,130 --> 00:20:18,130\n>> The pointless numbers they show on\nthe screen just to pacify you as a user.\n\n442\n00:20:18,130 --> 00:20:20,050\nAll right, now that backup,\n\n443\n00:20:20,050 --> 00:20:23,090\nit's going to take awhile to run\nwhenever it's done calculating.\n\n444\n00:20:23,090 --> 00:20:27,070\nSo who knows, it'll probably take\na good 20, maybe even 30 minutes.\n\n445\n00:20:27,070 --> 00:20:29,770\nSo we're gonna leave it running in\nthe background because we also want to\n\n446\n00:20:29,770 --> 00:20:32,140\nshow you guys how to restore from a.\n\n447\n00:20:32,140 --> 00:20:36,300\nDo a bare metal recovery to\nget our system back online.\n\n448\n00:20:36,300 --> 00:20:38,680\nBut while we're waiting on that to finish,\n\n449\n00:20:38,680 --> 00:20:41,405\nlet's talk about one of the other\nflaws of Windows server backup.\n\n450\n00:20:41,405 --> 00:20:43,990\n>> [LAUGH]\n>> Mike is backing up to a hard drive\n\n451\n00:20:43,990 --> 00:20:45,830\nthat's directly attached to that server.\n\n452\n00:20:45,830 --> 00:20:46,450\nGreat.\n\n453\n00:20:46,450 --> 00:20:49,410\nIf he has a failure he can\nrecover it from that hard drive.\n\n454\n00:20:49,410 --> 00:20:52,140\nAnd if it's a USB hard drive he can\neven move it to another system and\n\n455\n00:20:52,140 --> 00:20:53,030\nrecover from it.\n\n456\n00:20:53,030 --> 00:20:55,790\nBut what if his building is destroyed?\n\n457\n00:20:55,790 --> 00:21:00,730\nWell, he lost the server and\nthe backup drive attached to it.\n\n458\n00:21:00,730 --> 00:21:03,580\nSo, off site backups\nare what we really want.\n\n459\n00:21:03,580 --> 00:21:06,520\nWe really want to make sure that we\nstore the backups somewhere else.\n\n460\n00:21:06,520 --> 00:21:09,040\nSomewhere physically located\noutside of our building.\n\n461\n00:21:09,040 --> 00:21:10,920\nSo, that if we have\na true totally disaster,\n\n462\n00:21:10,920 --> 00:21:13,070\nwe still have access to the backup.\n\n463\n00:21:13,070 --> 00:21:16,280\nWhen we use Windows server backup like\nthis it's typically backing up somewhere\n\n464\n00:21:16,280 --> 00:21:17,410\nlocal and\n\n465\n00:21:17,410 --> 00:21:20,910\nwe need to get involved to make sure that\nthose backups are being shipped off site.\n\n466\n00:21:20,910 --> 00:21:24,410\nIf somebody's I mentioned\nmy two USB drives.\n\n467\n00:21:24,410 --> 00:21:27,780\nWell, so you might be saying man,\nDon you really plan.\n\n468\n00:21:27,780 --> 00:21:28,650\nYou do your backups.\n\n469\n00:21:28,650 --> 00:21:30,130\nThat's a true story.\n\n470\n00:21:30,130 --> 00:21:33,110\nI have two hard drives sitting\non top of my computer at home.\n\n471\n00:21:33,110 --> 00:21:35,000\nAnd I do change them out once a week.\n\n472\n00:21:35,000 --> 00:21:35,890\n>> But where are they?\n\n473\n00:21:35,890 --> 00:21:36,650\n>> But the second one,\n\n474\n00:21:36,650 --> 00:21:39,470\nthe one that's not plugged in is literally\nsitting on top of my computer at home.\n\n475\n00:21:39,470 --> 00:21:41,730\nYeah, so I'm not that,\nThat good about my backups.\n\n476\n00:21:41,730 --> 00:21:43,930\nSo I have two drives.\n\n477\n00:21:43,930 --> 00:21:46,500\nOne is hooked up and\nthe other is sitting right there\n\n478\n00:21:46,500 --> 00:21:50,195\non top of the computer probably\nblocking a fan or something.\n\n479\n00:21:50,195 --> 00:21:54,640\n[LAUGH] So if my house burns down,\nI'll lost both of my drives.\n\n480\n00:21:54,640 --> 00:21:56,730\nSo wouldn't it be convenient\nto send it off site?\n\n481\n00:21:56,730 --> 00:21:59,060\n>> It would.\n>> Well, I'm good about my backups\n\n482\n00:21:59,060 --> 00:22:00,790\n>> I'm not good about grabbing that drive\n\n483\n00:22:00,790 --> 00:22:02,160\nand taking it with me\n>> I'm not going to\n\n484\n00:22:02,160 --> 00:22:02,960\ndo that\n>> [LAUGH]\n\n485\n00:22:02,960 --> 00:22:05,190\n>> So, we do have another option that we\n\n486\n00:22:05,190 --> 00:22:10,610\ncan use to kind of facilitate this and\nit's called Microsoft as your backup.\n\n487\n00:22:10,610 --> 00:22:11,600\nAll right?\n\n488\n00:22:11,600 --> 00:22:13,970\nYou've probably heard of\nWindows Azure at this point, and\n\n489\n00:22:13,970 --> 00:22:17,570\nthat's the hosted cloud\nversion of Microsoft Windows.\n\n490\n00:22:17,570 --> 00:22:20,890\nYou can do a cloud version of Sequel,\nExchange, [CROSSTALK] yeah,\n\n491\n00:22:20,890 --> 00:22:22,741\nActive Director the best use for it.\n\n492\n00:22:22,741 --> 00:22:26,223\nSo you can do all sorts of\nstuff in the Cloud, right?\n\n493\n00:22:26,223 --> 00:22:30,020\n>> Well, you might not like the Cloud\nvery much, and I wouldn't blame you.\n\n494\n00:22:30,020 --> 00:22:34,940\nBut we can actually do a backup on our\nserver where it backs up straight to\n\n495\n00:22:34,940 --> 00:22:39,450\na storage pool, or they call it\na backup vault, in Windows Azure.\n\n496\n00:22:39,450 --> 00:22:42,120\nAnd it's called\nthe Microsoft Azure Backup.\n\n497\n00:22:42,120 --> 00:22:45,150\nI think we have the product page for\nthat pulled up somewhere.\n\n498\n00:22:46,370 --> 00:22:46,945\nHere.\n\n499\n00:22:46,945 --> 00:22:48,878\nBut I'm not sharing my desktop, am I?\n\n500\n00:22:48,878 --> 00:22:50,150\nLet me.\n[LAUGH]\n\n501\n00:22:50,150 --> 00:22:51,400\n>> It's a really cool concept.\n\n502\n00:22:51,400 --> 00:22:54,390\nI mean, just like Don was saying, just\na cloud provider out there, Microsoft.\n\n503\n00:22:54,390 --> 00:22:57,690\nAnd they give us,\nI think it's worth 5 gigs free.\n\n504\n00:22:57,690 --> 00:22:59,780\nAnd then after that\nyou're gonna pay per gig,\n\n505\n00:22:59,780 --> 00:23:02,600\ndepending on if you wanna do monthly,\nor yearly, or something like that.\n\n506\n00:23:02,600 --> 00:23:04,430\n>> Who knows?\n'Cause when you sign up,\n\n507\n00:23:04,430 --> 00:23:07,650\nthey It's like they changed\nthe free storage week to week.\n\n508\n00:23:07,650 --> 00:23:08,430\n>> Yeah, pretty much.\n\n509\n00:23:08,430 --> 00:23:12,700\n>> But with Windows Azure, if you're gonna\nuse it, you're gonna need to pay, right?\n\n510\n00:23:12,700 --> 00:23:15,740\nBecause you wanna make sure you can back\nup all your data, and 5 gigs is a joke.\n\n511\n00:23:16,960 --> 00:23:19,890\nThat's not gonna be nearly what\nyou need to back up your servers.\n\n512\n00:23:19,890 --> 00:23:22,660\nSo the cool part about this\nis you sign up for it.\n\n513\n00:23:22,660 --> 00:23:27,380\nYou have Microsoft Azure account, you\nmight already have one, and you go in and\n\n514\n00:23:27,380 --> 00:23:29,280\nthey've gotta configure it here.\n\n515\n00:23:29,280 --> 00:23:30,350\nConfigure option.\n\n516\n00:23:30,350 --> 00:23:33,340\nYou go in and you create a backup vault.\n\n517\n00:23:33,340 --> 00:23:35,860\nAnd no pictures, there we go, pictures.\n\n518\n00:23:35,860 --> 00:23:40,500\nSo you go in and here they're showing\nthe kind of sign up process, but\n\n519\n00:23:40,500 --> 00:23:43,675\nyou go in and you create a vault.\n\n520\n00:23:43,675 --> 00:23:46,510\nAnd I can't zoom in on it.\n\n521\n00:23:46,510 --> 00:23:49,350\nTheir page is dynamically re-sizing.\n\n522\n00:23:49,350 --> 00:23:51,584\nYou go in and you create a backup vault.\n\n523\n00:23:51,584 --> 00:23:53,250\nAnd a vault is just a storage location.\n\n524\n00:23:53,250 --> 00:23:54,500\nYou set an amount of storage.\n\n525\n00:23:54,500 --> 00:23:55,376\nAnd that's what you pay for.\n\n526\n00:23:55,376 --> 00:23:56,708\nYou're paying for that vault.\n\n527\n00:23:56,708 --> 00:23:57,917\nOkay?\n\n528\n00:23:57,917 --> 00:24:01,832\nThen, once you've got the vault set up,\nyou have to upload a certificate, you\n\n529\n00:24:01,832 --> 00:24:06,170\ngenerate a certificate, or you use one of\nthe pre-built certificates on your server.\n\n530\n00:24:06,170 --> 00:24:09,135\nIt can be self signed if you want,\nyou don't have to buy one.\n\n531\n00:24:09,135 --> 00:24:13,210\nThen you upload it into Windows Azure so\nthat they recognize your server, so\n\n532\n00:24:13,210 --> 00:24:15,330\nthey can identify who your server is.\n\n533\n00:24:15,330 --> 00:24:16,910\nAnd they use that certificate for\n\n534\n00:24:16,910 --> 00:24:19,730\nencrypting the backup when it's being set\nup, so you definitely want to try that.\n\n535\n00:24:19,730 --> 00:24:21,315\n>> That server that's being\nconnected to it, as well.\n\n536\n00:24:21,315 --> 00:24:25,180\n>> Mm-hm, and then after that\nthere's just this little agent.\n\n537\n00:24:25,180 --> 00:24:26,420\nYou download the,\n\n538\n00:24:26,420 --> 00:24:29,200\nthey don't really show the picture\nof where you go to download it.\n\n539\n00:24:29,200 --> 00:24:33,310\nBut you download the Azure Backup Agent,\nand you just run it on your computer,\n\n540\n00:24:33,310 --> 00:24:35,150\nit's a little setup file that it runs.\n\n541\n00:24:35,150 --> 00:24:39,940\nIt's not much to it, you basically\nconfigure a proxy if you have one, and\n\n542\n00:24:39,940 --> 00:24:42,921\nthen you specify the certificate\nthat identifies your server.\n\n543\n00:24:42,921 --> 00:24:44,362\n>> Mm-hm.\n>> This is the one that matches\n\n544\n00:24:44,362 --> 00:24:45,310\nthe one on the other end.\n\n545\n00:24:45,310 --> 00:24:49,040\nAnd once you've got that in place\nyou can now run backups, and\n\n546\n00:24:49,040 --> 00:24:53,631\ninstead of backing up locally, or backing\nup to a USB drive attached to you or\n\n547\n00:24:53,631 --> 00:24:58,505\nwhatever, it's uploading it straight\ninto Microsoft's Azure data center.\n\n548\n00:24:58,505 --> 00:25:01,030\n>> Right.\n>> So if you lose your entire building,\n\n549\n00:25:01,030 --> 00:25:04,510\nevery server, a fire or\nwhatever, everything's gone,\n\n550\n00:25:04,510 --> 00:25:07,550\nyour backups are sitting up there\nin the could waiting for you.\n\n551\n00:25:07,550 --> 00:25:09,530\nAnd you can go on in and recover them.\n\n552\n00:25:09,530 --> 00:25:14,100\nSo it's a neat product,\nthe pricing on it is really not that bad.\n\n553\n00:25:14,100 --> 00:25:15,560\nYou're paying really for two things.\n\n554\n00:25:15,560 --> 00:25:19,068\nSo one is the size of the backup vault,\nso however your backup vault is,\n\n555\n00:25:19,068 --> 00:25:22,298\nwhatever that size is, and so\nyou've got your storage pricing.\n\n556\n00:25:22,298 --> 00:25:26,062\nBut then you're also paying for bandwidth,\nso the bandwidth as you upload and\n\n557\n00:25:26,062 --> 00:25:26,640\ndownload.\n\n558\n00:25:26,640 --> 00:25:29,378\nSo like,\nif you just leave a backup sitting there,\n\n559\n00:25:29,378 --> 00:25:31,515\nit doesn't really cost all that much.\n\n560\n00:25:31,515 --> 00:25:33,040\n>> Right.\n>> But if you're constantly updating\n\n561\n00:25:33,040 --> 00:25:35,150\nthat backup, reloading data,\nit can get expensive.\n\n562\n00:25:35,150 --> 00:25:38,510\nAnd that's why you wanna make sure\nthat you use incremental backups.\n\n563\n00:25:38,510 --> 00:25:41,620\nSo that you're just sending up\nthe changes and not the whole thing,\n\n564\n00:25:41,620 --> 00:25:42,520\nto cut down on that.\n\n565\n00:25:42,520 --> 00:25:44,811\n>> Oh, it had a big price drop,\nalmost 50% there.\n\n566\n00:25:44,811 --> 00:25:47,775\n>> Yeah, apparently,\nyou get your first five for free, and\n\n567\n00:25:47,775 --> 00:25:50,391\nthen $0.28 per gigabyte,\nand you know what?\n\n568\n00:25:50,391 --> 00:25:53,850\nIt looks like they changed it, that\nthey don't charge for bandwidth anymore.\n\n569\n00:25:53,850 --> 00:25:57,200\nSee, we do not charge additionally for\nbandwidth, storage, storage interactions,\n\n570\n00:25:57,200 --> 00:25:58,090\nblah, blah blah.\n\n571\n00:25:58,090 --> 00:26:01,490\nThat they're just billing for\nthe size of your vault.\n\n572\n00:26:01,490 --> 00:26:03,956\n>> Yeah,\ntrying to keep up with the competitors.\n\n573\n00:26:03,956 --> 00:26:05,070\n[LAUGH]\n>> I guess so.\n\n574\n00:26:05,070 --> 00:26:08,400\nSo, if we had a terabyte of data,\nwhat would this cost us per month?\n\n575\n00:26:08,400 --> 00:26:12,424\nIf we had a terabyte of data,\nthat's 1,000 gigabytes.\n\n576\n00:26:12,424 --> 00:26:15,520\n>> Say, 25% of that, so\nyou're talking about.\n\n577\n00:26:15,520 --> 00:26:17,630\n>> $280, I guess.\n\n578\n00:26:17,630 --> 00:26:18,394\n>> Yeah, something like that, yeah.\n\n579\n00:26:18,394 --> 00:26:21,000\n>> Well no, hang on,\nI think I just did that math, didn't I?\n\n580\n00:26:21,000 --> 00:26:26,540\nSo if we, [LAUGH] this is the problem,\nsimple math is not our forte.\n\n581\n00:26:26,540 --> 00:26:30,165\nSo if it's 28 cents per gigabyte,\nand we're talking 1000 gigabytes, so\n\n582\n00:26:30,165 --> 00:26:31,135\nwe have a terrabyte.\n\n583\n00:26:31,135 --> 00:26:32,760\nOh it is, $280 a month.\n\n584\n00:26:32,760 --> 00:26:33,881\n>> Spot on.\n\n585\n00:26:33,881 --> 00:26:38,900\n>> So, is it worth $280 a month to have\na backup that's off site, automatically,\n\n586\n00:26:38,900 --> 00:26:42,020\nyou don't have to worry about\nrotating tapes, and so on.\n\n587\n00:26:42,020 --> 00:26:44,570\n>> And they take care of\nall the redundancy, I mean,\n\n588\n00:26:44,570 --> 00:26:46,860\nyou're good to go there, yeah.\n\n589\n00:26:46,860 --> 00:26:49,174\n>> And it is more than likely\nworth that for you, right?\n\n590\n00:26:49,174 --> 00:26:50,905\nAnd I say it's a terabyte of storage,\nright?\n\n591\n00:26:50,905 --> 00:26:54,990\nYou might be backing up 50 servers\nto that one terabyte of storage.\n\n592\n00:26:54,990 --> 00:26:58,010\nSo $280 a month to back up 50 servers,\nthat's not so bad.\n\n593\n00:26:58,010 --> 00:26:58,820\n>> That's not bad at all.\n\n594\n00:26:58,820 --> 00:27:01,980\n>> So for a small business you might say,\nwell maybe I won't backup\n\n595\n00:27:01,980 --> 00:27:05,550\nthe whole server, maybe I just have some\nQuickBooks files, and things like that.\n\n596\n00:27:05,550 --> 00:27:09,500\nWell, you might you might be able to fit\nin that five gigabytes a month that's free\n\n597\n00:27:09,500 --> 00:27:11,315\nif you're just backing up\nsome of your data files.\n\n598\n00:27:11,315 --> 00:27:13,950\n>> Right.\n>> So don't discount Azure as being too\n\n599\n00:27:13,950 --> 00:27:14,950\nexpensive.\n\n600\n00:27:14,950 --> 00:27:17,870\nJust look at your data, look at what\nyou actually need a backup of, and\n\n601\n00:27:17,870 --> 00:27:19,650\nyou may find that it's\nactually very affordable.\n\n602\n00:27:19,650 --> 00:27:23,010\nSo just keep that option open, and\n\n603\n00:27:23,010 --> 00:27:24,870\nMicrosoft is not the only\ncompany that does this.\n\n604\n00:27:24,870 --> 00:27:26,825\n>> No, no.\n>> You've got tons of other guys.\n\n605\n00:27:26,825 --> 00:27:29,380\n>> LiveVault is a good one, I think.\n\n606\n00:27:29,380 --> 00:27:31,910\n>> Carbonite, they do it,\nthey have corporate stuff now.\n\n607\n00:27:31,910 --> 00:27:33,290\nPersonally, I like CrashPlan.\n\n608\n00:27:33,290 --> 00:27:36,053\nI don't know if you've ever used them,\nI love their product.\n\n609\n00:27:36,053 --> 00:27:37,298\n>> Mm-hm, I have.\n\n610\n00:27:37,298 --> 00:27:40,750\n>> But not on the Microsoft exam, so\n[LAUGH] we won't get into all that stuff.\n\n611\n00:27:40,750 --> 00:27:43,090\n>> There's a free trial, too, if you guys\nmight have seen up at the top there.\n\n612\n00:27:43,090 --> 00:27:45,070\nSo if when you're studying for\nthe exam and you wanna get in there and\n\n613\n00:27:45,070 --> 00:27:49,060\nplay around with it and just click on\nsome things, you can set up a free trial.\n\n614\n00:27:49,060 --> 00:27:51,470\nJust watch it so\nit doesn't renew automatically on you.\n\n615\n00:27:51,470 --> 00:27:54,640\nI think when mine expired, they wanted\nto try to charge the card again, but\n\n616\n00:27:54,640 --> 00:27:57,080\ndefinitely get out there and play with it.\n\n617\n00:27:57,080 --> 00:27:58,950\n>> And Mike, I'm kind of surprised,\nbut looking over there,\n\n618\n00:27:58,950 --> 00:27:59,888\nit looks like our backup's done.\n\n619\n00:27:59,888 --> 00:28:00,660\n>> Yeah, it did finish.\n>> That was pretty fast.\n\n620\n00:28:00,660 --> 00:28:04,248\n>> Yeah, and if we want to pull up\nthat screen before we take off, here?\n\n621\n00:28:04,248 --> 00:28:05,440\n>> Oh yeah, we're about out of time.\n\n622\n00:28:05,440 --> 00:28:09,420\nSo yeah, let's look here, the backup\nis done, you can see it backed up.\n\n623\n00:28:09,420 --> 00:28:11,640\nOnly seven and half gigs,\nthat's why it was so fast,\n\n624\n00:28:11,640 --> 00:28:13,024\nI thought it was going to be 30.\n\n625\n00:28:13,024 --> 00:28:13,960\n>> Not bad.\n>> So it backed up pretty quick,\n\n626\n00:28:13,960 --> 00:28:15,980\nI can see it's got\neverything that it's needed.\n\n627\n00:28:15,980 --> 00:28:18,260\nWe now have a full backup on this drive.\n\n628\n00:28:18,260 --> 00:28:22,270\nSo if we were to have a disaster, we'd be\nable to recover from it, pretty slick.\n\n629\n00:28:22,270 --> 00:28:23,525\n>> And\nwe're gonna have a disaster on break.\n\n630\n00:28:23,525 --> 00:28:24,200\n[LAUGH]\n>> We might as well,\n\n631\n00:28:24,200 --> 00:28:26,478\nyeah, it seems like we work that\nout usually, one way or another.\n\n632\n00:28:26,478 --> 00:28:26,986\n[LAUGH]\n>> Yeah.\n\n633\n00:28:26,986 --> 00:28:29,610\n[LAUGH] >> All right,\nwell ladies and gentlemen,\n\n634\n00:28:29,610 --> 00:28:32,390\nlet's stop here and take a break.\nWhen we get back, we're gonna talk more\n\n635\n00:28:32,390 --> 00:28:35,040\nabout disaster recovery.\nWe've got a few other backup methods to\n\n636\n00:28:35,040 --> 00:28:37,830\ntalk about and then we're going\nto start talking about recovery,\n\n637\n00:28:37,830 --> 00:28:39,780\nrestoring from this kind of stuff.\n\n638\n00:28:39,780 --> 00:28:42,420\nSo, we've got a lot more to get through,\nstay tuned.\n\n639\n00:28:42,420 --> 00:28:43,441\nWe'll be back after this.\n\n640\n00:28:43,441 --> 00:28:50,860\n[MUSIC]\n\n641\n00:28:50,860 --> 00:28:53,170\nAll right, welcome back, everybody.\n\n642\n00:28:53,170 --> 00:28:56,300\nSo before the break we were\ntalking about backups and\n\n643\n00:28:56,300 --> 00:28:59,530\nhow we can get our bare-metal backup and\nall those things going.\n\n644\n00:28:59,530 --> 00:29:02,670\nWe've got a few other little back up\ntechnologies to talk about before we get\n\n645\n00:29:02,670 --> 00:29:03,965\ninto restores.\n\n646\n00:29:03,965 --> 00:29:06,020\n>> Mm-hm.\n>> So the very next one I wanna talk about\n\n647\n00:29:06,020 --> 00:29:07,863\nare role-specific back-ups.\n\n648\n00:29:07,863 --> 00:29:10,480\n>> Right.\n>> When we use Windows Server Backup,\n\n649\n00:29:10,480 --> 00:29:14,480\nit's doing what it's name implies,\nit's trying to backup the server itself\n\n650\n00:29:14,480 --> 00:29:17,816\nregardless of what it is that server does.\n\n651\n00:29:17,816 --> 00:29:21,120\nBut, depending on the roles we've\ninstalled, there may be ways for\n\n652\n00:29:21,120 --> 00:29:23,990\nus to backup the individual role,\n\n653\n00:29:23,990 --> 00:29:26,730\nwithout the need to back up\nthe whole rest of the server, right?\n\n654\n00:29:26,730 --> 00:29:27,470\n>> Exactly.\n\n655\n00:29:27,470 --> 00:29:29,680\n>> A great example would be like DHCP.\n\n656\n00:29:29,680 --> 00:29:35,460\nIf I have a dynamic host configuration\nprotocol, a DHCP server, if I were to lose\n\n657\n00:29:35,460 --> 00:29:40,260\nit, it breaks, destroyed whatever, and\nI need to build up a new one, right?\n\n658\n00:29:40,260 --> 00:29:45,410\nDoes the computer name for that server\nreally matter on a DHCP server?\n\n659\n00:29:45,410 --> 00:29:47,680\n>> No.\n>> No, does it's IP address matter?\n\n660\n00:29:47,680 --> 00:29:48,360\nNo.\n\n661\n00:29:48,360 --> 00:29:51,280\nReally not much matters on it at all,\n\n662\n00:29:51,280 --> 00:29:55,550\nthe only thing that's important on a DHCP\nserver is the DHCP database itself.\n\n663\n00:29:55,550 --> 00:29:58,120\n>> Yeah, all those settings we've got,\nthe scopes we created,\n\n664\n00:29:58,120 --> 00:30:00,326\nthe leases that have been generated,\nand all that good stuff.\n\n665\n00:30:00,326 --> 00:30:01,920\n>> Yeah, the leases, right?\n\n666\n00:30:01,920 --> 00:30:05,150\nAll the active IP assignments,\ncuz if we lose all those,\n\n667\n00:30:05,150 --> 00:30:08,980\nwe might double up somebody,\nissue out an IP that's already in use.\n\n668\n00:30:08,980 --> 00:30:11,600\nSo, the DHCP database is really important,\n\n669\n00:30:11,600 --> 00:30:13,458\neverything else on the server\nwe don't care about.\n\n670\n00:30:13,458 --> 00:30:15,210\n>> Right.\n>> I could build up a new server\n\n671\n00:30:15,210 --> 00:30:19,550\nwith the wrong name, with a different IP,\nwith all sorts of stuff changed.\n\n672\n00:30:19,550 --> 00:30:22,505\nAnd as long as I put that DHCP\ndatabase back to the way it was,\n\n673\n00:30:22,505 --> 00:30:23,873\nit'll work just fine.\n\n674\n00:30:23,873 --> 00:30:24,930\n>> Yeah.\n>> All right, so\n\n675\n00:30:24,930 --> 00:30:29,200\nsometimes we do overkill by doing\nbare-metal backups to servers, and so\n\n676\n00:30:29,200 --> 00:30:30,410\nwe may choose to go a different route.\n\n677\n00:30:30,410 --> 00:30:34,210\nNow you might say well, it's overkill but\nI'll do it anyway, right?\n\n678\n00:30:34,210 --> 00:30:36,500\nThere are scenarios where we do\nneed to be careful about this.\n\n679\n00:30:36,500 --> 00:30:40,080\nFor example,\nwhen we do a full backup of the server,\n\n680\n00:30:40,080 --> 00:30:43,050\na bare-metal back up,\nwhen we do that, it takes awhile.\n\n681\n00:30:43,050 --> 00:30:48,200\nIt could take an hour on a server to\ndo a full back up of the system, right?\n\n682\n00:30:48,200 --> 00:30:52,620\nSo, if you're trying to back up throughout\nthe day, if a back up takes an hour,\n\n683\n00:30:52,620 --> 00:30:54,653\nhow many back ups could you take in a day?\n\n684\n00:30:54,653 --> 00:30:55,630\n24, right?\n\n685\n00:30:55,630 --> 00:30:57,380\nThat's the maximum amount of backups.\n\n686\n00:30:57,380 --> 00:31:00,565\nBut if you never want your backups\nto be more than 15 minutes old,\n\n687\n00:31:00,565 --> 00:31:02,840\nthat's not gonna work, right?\n\n688\n00:31:02,840 --> 00:31:05,315\nSo in those scenarios,\nwe need to dial in specifically.\n\n689\n00:31:05,315 --> 00:31:08,398\nAnd, I can't think of anyone who's backing\nup their DHCP database that frequently.\n\n690\n00:31:08,398 --> 00:31:08,980\n>> Really?\nYou know.\n\n691\n00:31:08,980 --> 00:31:12,160\nBut if it was like a SQL database, right?\n\n692\n00:31:12,160 --> 00:31:14,980\nWe don't want to lose database\ntransactions, and so.\n\n693\n00:31:14,980 --> 00:31:17,460\n>> I can't lose hours worth\nof transactions, absolutely.\n\n694\n00:31:17,460 --> 00:31:20,152\n>> Yep, and so Windows Server Backup\nis not gonna be suitable there, and\n\n695\n00:31:20,152 --> 00:31:21,640\neven a full server back up.\n\n696\n00:31:21,640 --> 00:31:23,940\nSo, we need to pay attention to\nthe roles that are on our server and\n\n697\n00:31:23,940 --> 00:31:26,030\nlook at what back up\nfunctionality they have.\n\n698\n00:31:26,030 --> 00:31:28,390\nNow, I've mentioned DHCP, Mike,\nyou've got that pulled up, don't you?\n\n699\n00:31:28,390 --> 00:31:29,810\n>> I've got one pulled up here, and\n\n700\n00:31:29,810 --> 00:31:33,160\njust an example of the different\nservers you can back up.\n\n701\n00:31:33,160 --> 00:31:36,330\nDHCP happens to back up\nitself every 60 minutes.\n\n702\n00:31:36,330 --> 00:31:40,480\nBut I can come in here, right-click on\nmy server, and choose to backup, and\n\n703\n00:31:40,480 --> 00:31:41,628\ntell it where I want it to back up.\n\n704\n00:31:41,628 --> 00:31:46,060\nAnd click Ok, and it's that simple.\n\n705\n00:31:46,060 --> 00:31:49,131\n>> Yeah, and it's backing up\nevery 60 minutes all ready and\n\n706\n00:31:49,131 --> 00:31:51,410\nthat backup is being stored\nin that little folder.\n\n707\n00:31:51,410 --> 00:31:53,380\nAnd Mike,\ncan you browse through that folder and\n\n708\n00:31:53,380 --> 00:31:56,005\nshow the backup is really, really small.\n\n709\n00:31:56,005 --> 00:31:58,021\n>> Mm-hm.\n>> Because it just has your scopes,\n\n710\n00:31:58,021 --> 00:32:00,380\nyour leases, and some basic settings.\n\n711\n00:32:00,380 --> 00:32:02,917\nI don't know that I've ever seen it more\nthan like two or three megabytes in size.\n\n712\n00:32:02,917 --> 00:32:03,709\n>> No.\n\n713\n00:32:03,709 --> 00:32:06,370\nSo the backup is very, very fast and\n\n714\n00:32:06,370 --> 00:32:11,920\nwe can then copy that off to another\nlocation and restore it as needed.\n\n715\n00:32:11,920 --> 00:32:14,920\nSo the backup's really,\nreally straightforward.\n\n716\n00:32:14,920 --> 00:32:15,720\nIt's right there.\n\n717\n00:32:15,720 --> 00:32:17,380\n>> There it is.\n>> So you're looking at like 2 megabytes\n\n718\n00:32:17,380 --> 00:32:17,938\nright there.\n\n719\n00:32:17,938 --> 00:32:20,426\n>> Yeah, because we don't have any scopes\nor anything on this one, but still,\n\n720\n00:32:20,426 --> 00:32:21,364\nit would not be much bigger.\n\n721\n00:32:23,050 --> 00:32:25,271\n>> So, keep that in mind.\n\n722\n00:32:25,271 --> 00:32:27,666\nEach roll may have its\nown backup solutions,\n\n723\n00:32:27,666 --> 00:32:31,521\nnow some rolls like Active Directory\nDomain Controller, it doesn't.\n\n724\n00:32:31,521 --> 00:32:35,003\nYou have the active directory which\nis part of the system states, so\n\n725\n00:32:35,003 --> 00:32:37,940\nyou might as well do the bare\nmetal at that point.\n\n726\n00:32:37,940 --> 00:32:39,480\nYou have the certificate services.\n\n727\n00:32:39,480 --> 00:32:41,440\n>> Yeah.\n>> Where really it's the certificates\n\n728\n00:32:41,440 --> 00:32:43,890\nthemselves we care about,\nnot the rest of it.\n\n729\n00:32:43,890 --> 00:32:47,690\nAnd so we might choose to back up our\ncertificate store from the database or\n\n730\n00:32:47,690 --> 00:32:49,540\nfrom the registry and\nnot get the rest of it.\n\n731\n00:32:49,540 --> 00:32:52,290\nSo different roles might\nhave different needs.\n\n732\n00:32:52,290 --> 00:32:53,480\nJust be aware of that.\n\n733\n00:32:53,480 --> 00:32:56,350\nIf you do a bare metal you get it all so\nwho cares.\n\n734\n00:32:56,350 --> 00:32:58,380\n>> But\nlike you were saying time constraints,\n\n735\n00:32:58,380 --> 00:33:00,010\nalso costs if you're\nsending these off site.\n\n736\n00:33:00,010 --> 00:33:02,900\nAnd you saw some of the charges\nwe'd get per gigabyte up there.\n\n737\n00:33:02,900 --> 00:33:06,390\nSo you might want to limit where you can\nhow much data you're actually storing up\n\n738\n00:33:06,390 --> 00:33:07,690\nthere in the cloud.\n\n739\n00:33:07,690 --> 00:33:08,460\n>> And restore time.\n\n740\n00:33:08,460 --> 00:33:12,790\nIf you actually have a failure, it does\ntake longer to restore a bare metal one\n\n741\n00:33:12,790 --> 00:33:16,570\nthan it might be to just,\nDHCP again, as an example.\n\n742\n00:33:16,570 --> 00:33:19,540\nI can just quickly add the DHCP\nrole to another server, and\n\n743\n00:33:19,540 --> 00:33:22,522\nthen restore that database\n[CROSSTALK] backup in minutes.\n\n744\n00:33:22,522 --> 00:33:25,697\n>> And that's all you have to do,\nis just delete the current database,\n\n745\n00:33:25,697 --> 00:33:28,820\nput that backup back in there,\nand restart the service.\n\n746\n00:33:28,820 --> 00:33:29,620\nAnd you're good to go.\n\n747\n00:33:29,620 --> 00:33:33,240\nIf it's a DNS and you're doing standard,\nprimary, or secondaries, it's just a file.\n\n748\n00:33:33,240 --> 00:33:33,830\nRight?\n\n749\n00:33:33,830 --> 00:33:36,040\n>> Yeah, the zone file.\n\n750\n00:33:36,040 --> 00:33:37,620\nSo just keep that in mind.\n\n751\n00:33:37,620 --> 00:33:41,400\nThere are role specific backup scenarios\nand every role is a little bit different.\n\n752\n00:33:41,400 --> 00:33:42,990\nSo you can just kinda dig in for those.\n\n753\n00:33:42,990 --> 00:33:43,930\nFor the exam,\n\n754\n00:33:43,930 --> 00:33:47,680\njust be aware that we don't want to\nhave to do a full bare metal backup.\n\n755\n00:33:47,680 --> 00:33:50,470\nThere may just be individual components\nthat we can grab that meet our needs.\n\n756\n00:33:50,470 --> 00:33:52,160\nAll right.\n\n757\n00:33:52,160 --> 00:33:55,580\nThe other thing is,\nwe might not need a backup.\n\n758\n00:33:55,580 --> 00:33:57,075\nWell, I don't wanna say that at all.\n\n759\n00:33:57,075 --> 00:33:58,690\n>> [LAUGH]\n>> You always need a backup, right?\n\n760\n00:33:58,690 --> 00:34:00,020\n>> Yeah.\n>> There's no substitute for\n\n761\n00:34:00,020 --> 00:34:00,630\na good backup.\n\n762\n00:34:00,630 --> 00:34:01,260\n>> Yep.\n\n763\n00:34:01,260 --> 00:34:03,365\n>> But\nthere are times where we have failures.\n\n764\n00:34:03,365 --> 00:34:04,920\n>> Mm-hm.\n>> Where we don't actually need to go to\n\n765\n00:34:04,920 --> 00:34:06,860\nthe backup to recover from that, right?\n\n766\n00:34:06,860 --> 00:34:09,150\nAnd I know we've talked about\nthis in other shows, but\n\n767\n00:34:09,150 --> 00:34:14,050\nWindows has\nthe Volume Shadow Copy Service, or VSS.\n\n768\n00:34:14,050 --> 00:34:19,150\nAnd the Volume Shadow Copy Service, it\ntakes basically a look at your server and\n\n769\n00:34:19,150 --> 00:34:22,090\ncan periodically take\na snapshot of your hard drives.\n\n770\n00:34:22,090 --> 00:34:24,990\nAnd that way if something gets deleted,\nor damaged, or whatever,\n\n771\n00:34:24,990 --> 00:34:27,100\nyou can roll back to that snapshot.\n\n772\n00:34:27,100 --> 00:34:29,920\nIt's very easy to configure,\nMike's gonna show it in a minute, but\n\n773\n00:34:29,920 --> 00:34:33,100\nit makes life super simple for\nus when something gets lost.\n\n774\n00:34:33,100 --> 00:34:38,120\nI used to work for an insurance company,\nand I would get at least\n\n775\n00:34:38,120 --> 00:34:43,610\none support ticket a week where somebody\ndeleted a file on the file server.\n\n776\n00:34:43,610 --> 00:34:45,630\nAnd they deleted it, they didn't mean to,\n\n777\n00:34:45,630 --> 00:34:48,826\nthey wanted me to recover it from backup,\nall right.\n\n778\n00:34:48,826 --> 00:34:51,600\nAnd the support ticket would\ngo to the help desk guys,\n\n779\n00:34:51,600 --> 00:34:54,400\nthey would escalate it to tier two, and\nthen it would have to come to tier three,\n\n780\n00:34:54,400 --> 00:34:56,760\nbecause only tier three\npeople can do restores.\n\n781\n00:34:56,760 --> 00:35:00,240\nIn our organization,\ntier two could do backups, but\n\n782\n00:35:00,240 --> 00:35:02,270\nonly tier three could do restores.\n\n783\n00:35:02,270 --> 00:35:05,020\nSo it would have to get escalated\nall the way up to tier three.\n\n784\n00:35:05,020 --> 00:35:07,790\nI'd have to go and\nfind the appropriate backup tape,\n\n785\n00:35:07,790 --> 00:35:09,420\nbecause we were backing up to tape.\n\n786\n00:35:09,420 --> 00:35:13,430\nAnd just like you said Mike, the backup\nwould have to spin all the way through\n\n787\n00:35:13,430 --> 00:35:16,540\nthat tape to get to the point where\nthat file was and restore it.\n\n788\n00:35:16,540 --> 00:35:18,250\nIt would take me at least an hour.\n\n789\n00:35:18,250 --> 00:35:23,110\nAnd so I hated seeing those tickets\nwhen some, I need to not say-\n\n790\n00:35:23,110 --> 00:35:23,780\n>> Say user.\n\n791\n00:35:23,780 --> 00:35:25,729\n>> I wanted to say moron, yeah.\n\n792\n00:35:25,729 --> 00:35:31,280\n[LAUGH] When some water head or whatever,\ndecided to accidentally delete a file,\n\n793\n00:35:31,280 --> 00:35:34,340\nthen I know it's going to take\nan hour of my time to go and restore.\n\n794\n00:35:34,340 --> 00:35:36,170\nIt was really frustrating.\n\n795\n00:35:36,170 --> 00:35:41,980\nWell, when Volume Shadow Copy was\nintroduced, it was like a ray of light.\n\n796\n00:35:41,980 --> 00:35:43,780\nSo when somebody deletes a file,\n\n797\n00:35:43,780 --> 00:35:46,750\ninstead of actually deleting it,\nVolume Shadow Copy just kind of hides it.\n\n798\n00:35:46,750 --> 00:35:49,920\nIt marks it as deleted, but\nit's still there on the drive, and\n\n799\n00:35:49,920 --> 00:35:51,990\nsomebody with the appropriate permissions,\nand\n\n800\n00:35:51,990 --> 00:35:56,550\nit could even be the end user, can just\npull up the properties of that folder and\n\n801\n00:35:56,550 --> 00:36:00,930\nchoose the previous versions option and\nrestore that deleted file.\n\n802\n00:36:00,930 --> 00:36:02,524\nWhen we implemented that,\n\n803\n00:36:02,524 --> 00:36:06,420\nthe help desk at tier one was able\nto resolve simple file glitches.\n\n804\n00:36:06,420 --> 00:36:10,390\nThey didn't even come to me anymore,\nand that was just great.\n\n805\n00:36:10,390 --> 00:36:12,435\nIt really made life great for\nus, all right?\n\n806\n00:36:12,435 --> 00:36:13,270\n>> Mm-hm.\n\n807\n00:36:13,270 --> 00:36:14,870\n>> Two things to remember.\n\n808\n00:36:14,870 --> 00:36:20,060\nOne, on Windows Server 2012, Volume Shadow\nCopy is not turned on by default, right?\n\n809\n00:36:20,060 --> 00:36:22,355\nSo we need to make sure we turn\nit on if we're gonna use it.\n\n810\n00:36:22,355 --> 00:36:23,020\n>> Mm-hm.\n\n811\n00:36:23,020 --> 00:36:28,310\n>> And then two,\nit is not a replacement for backups.\n\n812\n00:36:28,310 --> 00:36:31,570\nSure it'll protect you from\nan accidental override or deletion, but\n\n813\n00:36:31,570 --> 00:36:34,900\nif your hard drive fails you\nlose the Volume Shadow Copy.\n\n814\n00:36:34,900 --> 00:36:35,445\nIt's gone.\n>> Yeah,\n\n815\n00:36:35,445 --> 00:36:39,650\ncuz it's stored on the same volume\nthat you're making the shadow copy of.\n\n816\n00:36:39,650 --> 00:36:42,237\nAnd you can move that, but\nthere's really no point because it's not\n\n817\n00:36:42,237 --> 00:36:44,810\na complete copy of the file,\nit's just the changed blocks.\n\n818\n00:36:44,810 --> 00:36:47,310\nSo even if you moved it to a different\nvolume thinking, all right,\n\n819\n00:36:47,310 --> 00:36:51,170\nnow I don't have to do backups cuz I've\ngot my shadow copies, you lose the drive,\n\n820\n00:36:51,170 --> 00:36:53,590\nyou cannot restore those shadow copies.\n\n821\n00:36:53,590 --> 00:36:54,960\n>> And that's the key thing there.\n\n822\n00:36:54,960 --> 00:37:00,640\nOn the exam, volume shadow copy\nis not a replacement for backups.\n\n823\n00:37:00,640 --> 00:37:02,470\nSo, why do we bring it up here?\n\n824\n00:37:02,470 --> 00:37:03,990\nWell, there is one\nlittle advanced concept.\n\n825\n00:37:03,990 --> 00:37:08,020\nI mentioned that volume shadow copy is not\nturned on by default in Windows Server,\n\n826\n00:37:08,020 --> 00:37:09,800\nand that may be something that we want.\n\n827\n00:37:09,800 --> 00:37:11,272\nWe want that turned on.\n\n828\n00:37:11,272 --> 00:37:14,230\nWell, it can be difficult to\nmanage across a ton of servers.\n\n829\n00:37:14,230 --> 00:37:18,350\nAnd so we have a nice little utility\ncalled the VSS Admin that let's us deal\n\n830\n00:37:18,350 --> 00:37:19,020\nwith that.\n\n831\n00:37:19,020 --> 00:37:19,771\nAnd Mike you got that [CROSSTALK]?\n\n832\n00:37:19,771 --> 00:37:20,520\n>> Yeah I do.\n\n833\n00:37:20,520 --> 00:37:24,650\nTo turn it on, I think we've shown\nyou guys this in other episodes,\n\n834\n00:37:24,650 --> 00:37:28,270\nI'm going to real quick go into C colon's\nproperties or right-click on C colon and\n\n835\n00:37:28,270 --> 00:37:30,150\nchoose Configure Shadow Copies.\n\n836\n00:37:30,150 --> 00:37:32,030\nAnd here I can see I did this earlier,\n\n837\n00:37:32,030 --> 00:37:36,520\nI turned it on on C colon,\nyou just choose Enable.\n\n838\n00:37:36,520 --> 00:37:40,620\nAnd there I can see the different\nrestore points I have, or\n\n839\n00:37:40,620 --> 00:37:42,010\nshadow copies that I have.\n\n840\n00:37:42,010 --> 00:37:44,470\nAnd I could create a new one\nif I wanted to from here.\n\n841\n00:37:44,470 --> 00:37:49,630\nTo work with these guys from the command\nprompt, we got a utility called Vssadmin.\n\n842\n00:37:49,630 --> 00:37:51,680\nVolume Shadow Service Administration.\n\n843\n00:37:51,680 --> 00:37:52,500\nSo, Vssadmin.\n\n844\n00:37:53,530 --> 00:37:55,670\nAnd I'll start with a little,\n\n845\n00:37:55,670 --> 00:38:00,610\noh oops there might be an extra S in there\nwhich I don't think it's gonna like.\n\n846\n00:38:00,610 --> 00:38:02,850\nI'm just gonna do switch\nquestion mark there to start.\n\n847\n00:38:02,850 --> 00:38:04,980\nAnd I can see the different\ncommands that we have available.\n\n848\n00:38:04,980 --> 00:38:08,930\nSo we can create shadow copies from here,\nwe can remove old ones, and\n\n849\n00:38:08,930 --> 00:38:10,390\nthat's something you\ngot to worry about too.\n\n850\n00:38:10,390 --> 00:38:12,650\nWhen you choose your previous versions,\n\n851\n00:38:12,650 --> 00:38:15,190\nhow many previous versions\ndo you want to retain?\n\n852\n00:38:15,190 --> 00:38:18,395\nThat's gonna require the more versions you\nwant to save the more space it's going\n\n853\n00:38:18,395 --> 00:38:19,325\nto require.\n\n854\n00:38:19,325 --> 00:38:21,645\nBut I can create and delete it from here.\n\n855\n00:38:21,645 --> 00:38:25,705\nI can delete the shadow storage all\ntogether, I can list my providers.\n\n856\n00:38:25,705 --> 00:38:30,560\nFor example, if I come in here and\ndo a, let's do a VSS admin.\n\n857\n00:38:30,560 --> 00:38:33,813\nSomething like list shadow storage.\n\n858\n00:38:33,813 --> 00:38:38,377\nOops, almost forgot,\nthere's no slash in these commands,\n\n859\n00:38:38,377 --> 00:38:41,022\nthey will not like it if you do that.\n\n860\n00:38:41,022 --> 00:38:46,460\nList shadows, all right,\nhere I can see that it is\n\n861\n00:38:46,460 --> 00:38:52,660\nstoring those because I\nenabled it on the C drive.\n\n862\n00:38:52,660 --> 00:38:56,570\nIt's got the shadow copy storage\nvolume is on that C drive as well.\n\n863\n00:38:56,570 --> 00:38:59,770\nShows my how much is used,\nI've got 70 megs there.\n\n864\n00:38:59,770 --> 00:39:01,840\nIt's allocated 1.4 gigs,\n\n865\n00:39:01,840 --> 00:39:04,820\nit takes a certain percentage\nof your drive by default.\n\n866\n00:39:04,820 --> 00:39:06,920\nYou can go in there and change that.\n\n867\n00:39:06,920 --> 00:39:11,940\nMaximum shadow copy storage space is 29,\nor about 30 gigs there.\n\n868\n00:39:11,940 --> 00:39:14,313\nAnd we could do other\nthings like list shadows.\n\n869\n00:39:17,771 --> 00:39:21,220\nWhere I can come and I can see\nthe copies that I've already made.\n\n870\n00:39:21,220 --> 00:39:25,440\nYou saw in that GUI there were two\nshadow copies that got created.\n\n871\n00:39:25,440 --> 00:39:28,830\nOne when you turn on, one's automatically\ncreated when you turn it on.\n\n872\n00:39:28,830 --> 00:39:32,932\nThe default schedule is every 7 AM and\nnoon which obviously we can modify that.\n\n873\n00:39:32,932 --> 00:39:35,910\nPerhaps there I can work with, and\nI could maybe delete one of these.\n\n874\n00:39:35,910 --> 00:39:38,180\nIf I had one that was\nolder I could remove it,\n\n875\n00:39:38,180 --> 00:39:40,610\nI could get the ID from here and\nthen delete it.\n\n876\n00:39:40,610 --> 00:39:42,970\nThe other thing you can do is\nyou can look at your providers.\n\n877\n00:39:44,470 --> 00:39:47,520\nIf you're working with when we talk about,\noops.\n\n878\n00:39:47,520 --> 00:39:50,240\nThat is not the right command.\n\n879\n00:39:50,240 --> 00:39:52,750\nLet's do a Vssadmin.\n\n880\n00:39:53,750 --> 00:39:56,563\nList I want to say it's providers.\n\n881\n00:40:00,335 --> 00:40:01,125\nYep.\n\n882\n00:40:01,125 --> 00:40:04,487\nSo here I can see some of\nthe providers that DSS has and\n\n883\n00:40:04,487 --> 00:40:07,708\nthis is important when\nwe're doing our backups.\n\n884\n00:40:07,708 --> 00:40:11,179\nBy default, Windows Server Backup\nuses VSS to do the backup,\n\n885\n00:40:11,179 --> 00:40:15,184\nwhich means it's creating a quick\nsnapshot of that entire volume, and\n\n886\n00:40:15,184 --> 00:40:18,010\nthen making the backup from that snapshot.\n\n887\n00:40:18,010 --> 00:40:19,450\nThat way we've got a consistent backup.\n\n888\n00:40:19,450 --> 00:40:23,510\nBecause if your backup takes an hour,\nthe files at the beginning were backed up\n\n889\n00:40:23,510 --> 00:40:26,120\nan 9 o'clock, the files at the end were\nactually backed up and 10 o'clock.\n\n890\n00:40:26,120 --> 00:40:29,502\nYou don't have a consistent\nstate across that backup.\n\n891\n00:40:29,502 --> 00:40:32,390\nVSS it'll make a call and\nit'll tell everything to freeze for\n\n892\n00:40:32,390 --> 00:40:35,510\na second, just give me one second\nlet me take a quick snapshot.\n\n893\n00:40:35,510 --> 00:40:37,490\nAll right now you can go back\nto doing what you want to do and\n\n894\n00:40:37,490 --> 00:40:40,940\nI'm going to make my backup based off\nof this if you've got the provider.\n\n895\n00:40:40,940 --> 00:40:45,430\nIf you've got some service running on\nthere that doesn't understand VSS then\n\n896\n00:40:45,430 --> 00:40:49,180\nit won't pause and you'll have to do with\nthe old school screen back up on there.\n\n897\n00:40:49,180 --> 00:40:51,090\nSo a few different ways,\n\n898\n00:40:51,090 --> 00:40:53,570\nyou know it just gives you the ability\nagain really just to work with\n\n899\n00:40:53,570 --> 00:40:58,780\nVSS From that command prompt, I can script\nit because it's a command-line utility.\n\n900\n00:40:58,780 --> 00:41:01,870\n>> And t hat's the big deal there is\nthat you might have a un-attended\n\n901\n00:41:01,870 --> 00:41:05,440\ninstall script that you use for setting\nup new servers, and so you can make this\n\n902\n00:41:05,440 --> 00:41:08,390\na part of that so that when you set\nup the system, it automatically turns\n\n903\n00:41:08,390 --> 00:41:12,150\non Volume Shadow Copy, sets the schedule,\nand gets all that put in place.\n\n904\n00:41:12,150 --> 00:41:14,740\nReally, really handy to ensure\nthat doesn't get missed.\n\n905\n00:41:14,740 --> 00:41:18,540\nCuz there's nothing worse than somebody\ndeletes a file and you go and you check.\n\n906\n00:41:18,540 --> 00:41:21,172\nAnd you're like, aah,\nvolume shadow copy's not turned on!\n\n907\n00:41:21,172 --> 00:41:24,715\nIt's too late after the fact, you can't\njust turn it on and go to the past.\n\n908\n00:41:24,715 --> 00:41:30,965\nSo then you have to go to your backup\ntapes or whatever and that's tough.\n\n909\n00:41:30,965 --> 00:41:36,055\nSo Mike, that's probably about it that\nwe need to cover for backing things up.\n\n910\n00:41:36,055 --> 00:41:37,696\n>> Right, for\ngetting our good backup made.\n\n911\n00:41:37,696 --> 00:41:40,821\n>> Let's switch gears and\ntalk about recovering.\n\n912\n00:41:40,821 --> 00:41:43,525\nSo let's just go worst case scenario.\n\n913\n00:41:43,525 --> 00:41:46,295\nWe have a server that is\njust completely destroyed,\n\n914\n00:41:46,295 --> 00:41:48,430\nthe one we backed up at\nthe beginning of the segment.\n\n915\n00:41:48,430 --> 00:41:52,370\nSo, something happened, I think Nate put\none of his Rockstar energy drinks on top\n\n916\n00:41:52,370 --> 00:41:55,820\nof it and knocked it over,\nand the machine just shot.\n\n917\n00:41:55,820 --> 00:42:00,090\nSo now, we need to bring up a new\nmachine and recover it, okay.\n\n918\n00:42:00,090 --> 00:42:04,110\nSo, when it comes to recovering\na server we need to make a decision.\n\n919\n00:42:04,110 --> 00:42:07,650\nAnd the decision is going to be\nbetween whether we think we can\n\n920\n00:42:07,650 --> 00:42:13,060\nfix the original server, or whether we\njust need to bring up an all new one.\n\n921\n00:42:13,060 --> 00:42:14,390\nIf we're gonna fix the server,\n\n922\n00:42:14,390 --> 00:42:17,440\nwe've got some tools, we'll talk about\nthe Windows recovery environment and\n\n923\n00:42:17,440 --> 00:42:22,160\nstuff like that for that scenario,\nbut if we need to do an all new one,\n\n924\n00:42:22,160 --> 00:42:25,480\nfortunately we've got our bare metal\nrestore, and we're ready to rock, right.\n\n925\n00:42:25,480 --> 00:42:29,560\n>> Assuming we've done that complete or\nwe did that bare metal backup, so\n\n926\n00:42:29,560 --> 00:42:33,780\nwhat I've done is I've just moved\nthe disc over to this virtual machine.\n\n927\n00:42:33,780 --> 00:42:36,363\nAnd I'll reboot this virtual machine.\n\n928\n00:42:36,363 --> 00:42:38,405\nPress the old any key.\n\n929\n00:42:38,405 --> 00:42:42,750\n>> And\nhe's just booting off the old R2-DVD.\n\n930\n00:42:42,750 --> 00:42:47,240\nSo if you don't have a recovery media or\nwhatever, you don't need one.\n\n931\n00:42:47,240 --> 00:42:49,380\nYou can just boot off\nthe regular retail DVD, and\n\n932\n00:42:49,380 --> 00:42:50,920\naccess the recovery tools from there.\n\n933\n00:42:50,920 --> 00:42:52,400\n>> Mm-hm, exactly.\n\n934\n00:42:52,400 --> 00:42:53,530\nAnd it's kinda weird.\n\n935\n00:42:53,530 --> 00:42:55,990\nI remember the first time I started\nplaying with this where you've gotta\n\n936\n00:42:55,990 --> 00:42:57,510\npretend like you're installing.\n\n937\n00:42:57,510 --> 00:43:00,050\nLike, wait, no, I don't want to install,\nI wanna recover.\n\n938\n00:43:00,050 --> 00:43:02,910\nBut then I've got my Repair\nyour computer option down here.\n\n939\n00:43:07,050 --> 00:43:09,050\nAnd let's do a little\ntroubleshooting action.\n\n940\n00:43:10,280 --> 00:43:12,160\nAnd we'll do a system image recovery.\n\n941\n00:43:15,580 --> 00:43:19,280\nAnd then I'm going to tell it where it is,\nman, I know that's small for you guys,\n\n942\n00:43:19,280 --> 00:43:20,510\nit's small for me on my screen.\n\n943\n00:43:21,550 --> 00:43:23,540\nWe'll select our system image.\n\n944\n00:43:24,980 --> 00:43:25,980\nActually it's already found it.\n\n945\n00:43:25,980 --> 00:43:29,770\n>> What it does is it scans the drives\nthat are attached to the computer to see\n\n946\n00:43:29,770 --> 00:43:31,720\nif there's already an image on there.\n\n947\n00:43:31,720 --> 00:43:33,000\nIt might be able to find one.\n\n948\n00:43:33,000 --> 00:43:34,680\n>> Yep.\nAnd if it finds it, great.\n\n949\n00:43:34,680 --> 00:43:38,080\nThe only negative with this is if\nyou have more than one backup.\n\n950\n00:43:38,080 --> 00:43:40,690\nBecause it picks the newest one.\n\n951\n00:43:40,690 --> 00:43:42,560\nWell, maybe the newest one\nis not the one we want.\n\n952\n00:43:42,560 --> 00:43:43,900\nWe want to go back a few versions.\n\n953\n00:43:43,900 --> 00:43:46,010\nSo you've got select a system\nimage at the bottom, and\n\n954\n00:43:46,010 --> 00:43:47,820\nyou can go and\nmanually pick which one you want.\n\n955\n00:43:47,820 --> 00:43:49,030\n>> So I can browse through.\n\n956\n00:43:49,030 --> 00:43:51,580\n>> But for most people\n>> They want to get back to\n\n957\n00:43:51,580 --> 00:43:52,660\nthe latest and greatest.\n\n958\n00:43:52,660 --> 00:43:53,970\nSo it scans it and finds it.\n\n959\n00:43:53,970 --> 00:43:55,600\nAnd Mikey, it already found yours.\n\n960\n00:43:55,600 --> 00:43:56,130\n>> Looking good.\n\n961\n00:43:56,130 --> 00:43:57,690\nTells me what computer\nit was actually from,\n\n962\n00:43:57,690 --> 00:43:59,300\nit knows that it's not\nthe same computer there.\n\n963\n00:44:01,030 --> 00:44:04,238\nAnd let's see, looks good.\n\n964\n00:44:04,238 --> 00:44:07,432\n>> Now on this screen there's a few\noptions you need to be aware of,\n\n965\n00:44:07,432 --> 00:44:09,280\nyou've got exclude disks up there.\n\n966\n00:44:09,280 --> 00:44:12,590\n>> You can actually choose which\ndisks you're gonna be restoring to or\n\n967\n00:44:12,590 --> 00:44:14,110\nexcluding from the recovery.\n\n968\n00:44:14,110 --> 00:44:15,890\n>> Mm-hm.\n>> If there's a difference\n\n969\n00:44:15,890 --> 00:44:17,820\nin the amount of hard drives\nin the old system and\n\n970\n00:44:17,820 --> 00:44:21,110\nthe new hard drives in the new system,\nyou might need to manipulate this.\n\n971\n00:44:21,110 --> 00:44:23,160\nFor most people,\nyou want to recover the whole thing.\n\n972\n00:44:23,160 --> 00:44:24,320\nIt's kind of the whole point.\n\n973\n00:44:24,320 --> 00:44:26,490\n>> Right. Yep. >> And so\nwe don't normally mess with that.\n\n974\n00:44:26,490 --> 00:44:27,940\nBut you also have installed drivers.\n\n975\n00:44:27,940 --> 00:44:28,630\n>> Yeah.\n\n976\n00:44:28,630 --> 00:44:30,320\n>> On your old system,\n\n977\n00:44:30,320 --> 00:44:33,570\nyou may have had different\nhardware than on your new server.\n\n978\n00:44:33,570 --> 00:44:36,310\nIf you had a complete failure of\na server that's three years old,\n\n979\n00:44:36,310 --> 00:44:37,860\nyou can't buy that server again.\n\n980\n00:44:37,860 --> 00:44:40,110\n>> Right.\n>> So you might have to use an all new\n\n981\n00:44:40,110 --> 00:44:40,920\nserver.\n\n982\n00:44:40,920 --> 00:44:43,970\nSo here's your chance\nto load some drivers.\n\n983\n00:44:43,970 --> 00:44:47,485\nIf you don't do this, if we were just to\nrestore the old system, it might boot up\n\n984\n00:44:47,485 --> 00:44:50,687\nan immediately blue screen if it didn't\nhave a RAID controller driver or\n\n985\n00:44:50,687 --> 00:44:51,696\nsomething like that.\n\n986\n00:44:51,696 --> 00:44:52,780\nRAID Controllers,\nthose are the ones that always get me.\n\n987\n00:44:52,780 --> 00:44:56,412\n>> Those are the big ones, because if you\ncan get it booted up you can always add\n\n988\n00:44:56,412 --> 00:44:58,730\na network adapter driver\nsomething like that.\n\n989\n00:44:58,730 --> 00:45:01,090\nBut it's being able to talk to\nthat mass storage device driver.\n\n990\n00:45:01,090 --> 00:45:05,500\n>> So here's that chance and that's\ngoing to allow us to restore an image to\n\n991\n00:45:05,500 --> 00:45:08,810\ndifferent hardware than what\nthe system was that we backed up on.\n\n992\n00:45:08,810 --> 00:45:10,650\nNow in our case it's the same, isn't it?\n\n993\n00:45:10,650 --> 00:45:11,420\n>> Right, Yeah.\nI would think so\n\n994\n00:45:11,420 --> 00:45:12,050\n[CROSSTALK]\n>> Ok so,\n\n995\n00:45:12,050 --> 00:45:14,322\nwe don't have any more to add there so\nwe're in good shape.\n\n996\n00:45:14,322 --> 00:45:18,570\n>> Go to click Next, and it gives me\none last chance to think about it.\n\n997\n00:45:18,570 --> 00:45:20,310\nWe'll click Finish.\n\n998\n00:45:20,310 --> 00:45:24,904\nAnd it's going to tell me that all data\nwill be restored and formatted and\n\n999\n00:45:24,904 --> 00:45:26,196\nreplaced, so yes.\n\n1000\n00:45:26,196 --> 00:45:27,238\nWe want to continue.\n\n1001\n00:45:27,238 --> 00:45:30,405\n>> Yay, all right, so there we go.\n\n1002\n00:45:30,405 --> 00:45:32,656\n>> And you sit there and\nwatch the progress bar for\n\n1003\n00:45:32,656 --> 00:45:34,280\nthe rest of the afternoon [LAUGH].\n\n1004\n00:45:34,280 --> 00:45:36,740\n>> Now the restore will take awhile.\n\n1005\n00:45:36,740 --> 00:45:39,530\nIt's got to bring everything back,\nrecreating the partitions,\n\n1006\n00:45:39,530 --> 00:45:40,230\ncopying the data.\n\n1007\n00:45:40,230 --> 00:45:43,582\nSo we'll just let it sit there.\n\n1008\n00:45:43,582 --> 00:45:45,380\n>> [INAUDIBLE]\n>> Oh you broke it.\n\n1009\n00:45:45,380 --> 00:45:47,260\nWhat did you do?\n\n1010\n00:45:47,260 --> 00:45:49,720\n>> Oh, you know he's got a-\n>> Hard drive's not big enough.\n\n1011\n00:45:49,720 --> 00:45:51,540\n>> It's not big enough,\nit should be the same size.\n\n1012\n00:45:51,540 --> 00:45:56,840\nAll right, well I'll take a peek at\nthat and see what we got going on here.\n\n1013\n00:45:56,840 --> 00:45:59,920\n>> But it does kind of highlight, though,\nif you're going be restoring a server,\n\n1014\n00:45:59,920 --> 00:46:03,592\nyou've gotta make sure that it's\ncomparable to the one before.\n\n1015\n00:46:03,592 --> 00:46:07,550\nAnd so we backed up hard drives\nthat were of a certain size,\n\n1016\n00:46:07,550 --> 00:46:09,180\nthen we may have to bump it up.\n\n1017\n00:46:09,180 --> 00:46:11,120\n>> Yeah,\nmight have to change the size on that guy.\n\n1018\n00:46:11,120 --> 00:46:12,599\nGotta add another drive here, I guess.\n\n1019\n00:46:14,200 --> 00:46:19,590\nAll right, well, while you're looking\ninto that, when Mike did that restore, or\n\n1020\n00:46:19,590 --> 00:46:23,810\nattempted to do it, he booted off of the\nDVD, and when he booted off of the DVD,\n\n1021\n00:46:23,810 --> 00:46:27,300\nhe had the repair option, and\nthen once he went into repair,\n\n1022\n00:46:27,300 --> 00:46:29,570\nit really just gave him the option\nto restore and that was it.\n\n1023\n00:46:29,570 --> 00:46:31,130\nIt didn't really give him\na lot of other options.\n\n1024\n00:46:31,130 --> 00:46:36,680\nAnd the reason it did that, is there was\nno operating system on the hard drive for\n\n1025\n00:46:36,680 --> 00:46:38,400\nthe server that he was\ntrying to restore to.\n\n1026\n00:46:38,400 --> 00:46:40,910\nRight, it's completely blank,\nit was a brand new server.\n\n1027\n00:46:42,170 --> 00:46:45,600\nIf your server already had\nan operating system though,\n\n1028\n00:46:45,600 --> 00:46:49,800\nhe would be in what's called WIN RE,\nthe Windows Recovery Environment.\n\n1029\n00:46:49,800 --> 00:46:53,780\nAnd it would give him more options\nthan just to restore, all right.\n\n1030\n00:46:53,780 --> 00:46:57,686\nIt gives you the option to do\nthe repair the boot sector,\n\n1031\n00:46:57,686 --> 00:47:03,446\nit gives you the option to, what were some\nof the other things that we see in there?\n\n1032\n00:47:03,446 --> 00:47:07,300\nThere's a command prompt, you can\naccess the command prompt for the OS.\n\n1033\n00:47:07,300 --> 00:47:08,500\n>> Command prompt with the network.\n\n1034\n00:47:08,500 --> 00:47:11,090\n>> You can do a system\nfile scan to look for\n\n1035\n00:47:11,090 --> 00:47:13,150\nany system files that\nmight have been modified.\n\n1036\n00:47:13,150 --> 00:47:15,780\nYou get a lot of options to,\nbasically, try and\n\n1037\n00:47:15,780 --> 00:47:19,190\ncorrect Windows without having\nto go to a backup tape.\n\n1038\n00:47:19,190 --> 00:47:19,780\nAll right?\n\n1039\n00:47:19,780 --> 00:47:23,930\nThat's not what we do in the case\nof a total server failure.\n\n1040\n00:47:23,930 --> 00:47:27,840\nBut if I just had a server that maybe was\nfailing to boot, I know the hard drives\n\n1041\n00:47:27,840 --> 00:47:30,625\nhaven't failed, but something has happened\nand it is not booting up anymore.\n\n1042\n00:47:30,625 --> 00:47:34,225\nOr I installed a driver,\nmaybe a bad video card driver.\n\n1043\n00:47:34,225 --> 00:47:36,000\n>> Mm-hm.\n>> And now every time I try to boot up,\n\n1044\n00:47:36,000 --> 00:47:37,620\nit goes into bkue screens, all right.\n\n1045\n00:47:37,620 --> 00:47:40,660\nAnd I tried to boot into safe mode,\nbut that's blue screening too.\n\n1046\n00:47:40,660 --> 00:47:42,660\nI can't get into the system.\n\n1047\n00:47:42,660 --> 00:47:47,071\nThat's where we can break out out trusty\nWindows Server 2012 install media, or\n\n1048\n00:47:47,071 --> 00:47:48,080\nR2 media.\n\n1049\n00:47:48,080 --> 00:47:51,770\nWe could boot off of that, and when we\ngo into the repair option, we'll see\n\n1050\n00:47:51,770 --> 00:47:56,350\nthe other items that are in there, that\nWin RE or Windows Recover Environment.\n\n1051\n00:47:56,350 --> 00:47:59,208\nSo that's a pretty useful thing.\n\n1052\n00:47:59,208 --> 00:48:02,918\nI know we used it heavily in\nthe Windows 8 show and the A plus show.\n\n1053\n00:48:02,918 --> 00:48:05,417\nSo you guys have more than\nlikely seen it before.\n\n1054\n00:48:05,417 --> 00:48:08,543\nBut on the exam they will\nrefer Refer to it as WinRE.\n\n1055\n00:48:08,543 --> 00:48:10,559\nAnd I know we don't normally call it that,\nwe say, well,\n\n1056\n00:48:10,559 --> 00:48:12,380\nyou just boot up the disk and\ngo to repair.\n\n1057\n00:48:12,380 --> 00:48:14,310\nAnd the reason they have\na special name for it is,\n\n1058\n00:48:14,310 --> 00:48:19,330\nyou actually can build a disk that\nis specifically a WinRE disk.\n\n1059\n00:48:19,330 --> 00:48:21,620\nIn other words, a disk that you\ncan't install Windows from,\n\n1060\n00:48:21,620 --> 00:48:24,300\nthat you boot off and it immediately\ngoes into the recovery tools.\n\n1061\n00:48:24,300 --> 00:48:26,610\nYou can find documentation\non the internet,\n\n1062\n00:48:26,610 --> 00:48:28,110\na lot of people show how to do that.\n\n1063\n00:48:28,110 --> 00:48:32,010\nI don't normally do it because I know\nI've got my install media laying around,\n\n1064\n00:48:32,010 --> 00:48:35,360\nI could easily get that, I don't want\nto hold a disk if I don't have to.\n\n1065\n00:48:35,360 --> 00:48:39,090\nSo, I also mentioned Safe Mode,\nkeep that in mind.\n\n1066\n00:48:39,090 --> 00:48:42,640\nA lot of times if it's just something\nas simple as a driver going bad,\n\n1067\n00:48:42,640 --> 00:48:47,340\nwe could restore from backups if we\nneeded to, you know, full bare metal, but\n\n1068\n00:48:47,340 --> 00:48:50,640\nit's a lot faster to just go into\nSafe Mode and uninstall that driver.\n\n1069\n00:48:50,640 --> 00:48:53,630\nSo don't go crazy and\ndo a full restore when you might have\n\n1070\n00:48:53,630 --> 00:48:56,130\nother options that can really\nminimize your down time.\n\n1071\n00:48:58,390 --> 00:49:01,365\nThe other thing is BCD.\n\n1072\n00:49:01,365 --> 00:49:05,370\nWhich is the boot configuration data.\n\n1073\n00:49:06,420 --> 00:49:10,740\nThis is one that I see where you update a\nraid controller, or driver, or something,\n\n1074\n00:49:10,740 --> 00:49:12,290\nand all of a sudden your\nsystem won't boot up.\n\n1075\n00:49:12,290 --> 00:49:14,750\nOr your system will boot and\nit'll say, no hard drives found or\n\n1076\n00:49:14,750 --> 00:49:16,750\nsomething crazy like that.\n\n1077\n00:49:16,750 --> 00:49:22,230\nAnd when that happens, you could go\ninto a bare-metal recovery again.\n\n1078\n00:49:22,230 --> 00:49:25,180\nBut wouldn't it be nice to be able\nto recover to get around that?\n\n1079\n00:49:26,180 --> 00:49:28,980\nNow BCD, that boot configuration data.\n\n1080\n00:49:28,980 --> 00:49:31,680\nWe have a special utility called BCD Edit.\n\n1081\n00:49:31,680 --> 00:49:34,010\nThat we can use to\nmanipulate that boot data.\n\n1082\n00:49:34,010 --> 00:49:38,050\nAnd there's a few things that I like to do\nand you certainly don't have to do them,\n\n1083\n00:49:38,050 --> 00:49:41,550\nbut in virtual machines,\nif you're running a Hyper VBM.\n\n1084\n00:49:41,550 --> 00:49:45,126\nIt can be very,\nvery difficult to get into safe mode.\n\n1085\n00:49:45,126 --> 00:49:50,730\nBecause you gotta reboot, and while it's\nrebooting it's at the Hyper V bio screen.\n\n1086\n00:49:50,730 --> 00:49:53,400\nAnd you have to hit F8 to get that menu.\n\n1087\n00:49:53,400 --> 00:49:57,040\nWell if you're on a VM, or\nlike your laptop, Mike.\n\n1088\n00:49:57,040 --> 00:49:57,730\nYou've got SSD.\n\n1089\n00:49:58,810 --> 00:50:01,050\n>> Yeah.\n>> SSD, it boots so fast, it's so\n\n1090\n00:50:01,050 --> 00:50:04,340\nhard to hit F8 to get in\nthere to get into safe mode.\n\n1091\n00:50:04,340 --> 00:50:08,290\nSo we can actually use BCD Edit\nto add an extra boot entry\n\n1092\n00:50:08,290 --> 00:50:11,730\nthat says when you boot up, just for\na few seconds, give me an option\n\n1093\n00:50:11,730 --> 00:50:15,880\nto where I could choose to boot into\nWindows or boot into safe mode.\n\n1094\n00:50:15,880 --> 00:50:19,160\nWe can create a menu that will\nbe displayed at boot time.\n\n1095\n00:50:19,160 --> 00:50:24,110\nAnd so that's another neat little\nway to be able to get around that.\n\n1096\n00:50:24,110 --> 00:50:27,150\nAnd Mike, I think you had those commands.\n\n1097\n00:50:27,150 --> 00:50:28,265\n>> I do, I do.\n\n1098\n00:50:28,265 --> 00:50:30,975\nLet me bump up my font\njust a little bit here.\n\n1099\n00:50:30,975 --> 00:50:31,555\nYeah, and\n\n1100\n00:50:31,555 --> 00:50:36,975\nlike you were saying when it's really\nfast boot or if it's a remote system.\n\n1101\n00:50:36,975 --> 00:50:39,395\nYou know, I'm not there to\nhit F8 on that remote system.\n\n1102\n00:50:39,395 --> 00:50:42,820\nI need to get into,\nI've used on domain controllers.\n\n1103\n00:50:42,820 --> 00:50:45,340\nWhen I need to get into that\ndirectory service restore mode.\n\n1104\n00:50:45,340 --> 00:50:46,290\nWhich is basically.\n\n1105\n00:50:46,290 --> 00:50:46,986\n>> Great example!\n[CROSSTALK]\n\n1106\n00:50:46,986 --> 00:50:48,780\n>> for domain controllers.\n\n1107\n00:50:48,780 --> 00:50:53,065\nSo we basically,\ngo into BCD Edit, and BCD Edit,\n\n1108\n00:50:53,065 --> 00:50:56,850\nis gonna be the command\nthat we use in there.\n\n1109\n00:50:56,850 --> 00:51:01,130\nI just typed BCD Edit, and I can see,\nif my mouse will play along.\n\n1110\n00:51:01,130 --> 00:51:04,920\nThis is just one of those days,\nthere we go.\n\n1111\n00:51:04,920 --> 00:51:07,870\nHere I can see,\nI've got a couple lines in there already,\n\n1112\n00:51:07,870 --> 00:51:10,710\npointing to my default\nWindows operating system.\n\n1113\n00:51:10,710 --> 00:51:16,230\nAnd if we want to,\nif you can see that there, move it over.\n\n1114\n00:51:16,230 --> 00:51:19,974\nIf we wanted to create one or\nif we wanna add a new line,\n\n1115\n00:51:19,974 --> 00:51:25,717\nwe can do something like BCD Edit, switch\nset, to add a line to that database, and\n\n1116\n00:51:25,717 --> 00:51:32,060\nthen I'm going to add it to my default,\nor set it as the default I should say.\n\n1117\n00:51:32,060 --> 00:51:33,530\n>> You know those little name shortcuts.\n\n1118\n00:51:33,530 --> 00:51:36,300\nYou're always going to have\nat least two entries in here.\n\n1119\n00:51:36,300 --> 00:51:39,440\nAnd if you look, you'll see identifiers,\none is called boot MGR,\n\n1120\n00:51:39,440 --> 00:51:41,390\nthat's our boot manager,\nthat's how we boot up.\n\n1121\n00:51:41,390 --> 00:51:43,410\nAnd the other one is current.\n\n1122\n00:51:43,410 --> 00:51:46,150\nThat word current,\nthat's actually just a shortcut name.\n\n1123\n00:51:46,150 --> 00:51:51,680\nAnd it actually is pointing to\nthe GUID of this current boot volume.\n\n1124\n00:51:51,680 --> 00:51:55,930\nSo if you look down a little bit lower\non there you'll see, and you know what,\n\n1125\n00:51:55,930 --> 00:51:57,280\nactually, it doesn't display it does it?\n\n1126\n00:51:57,280 --> 00:52:00,080\nThe actual GUID, cuz it's current.\n\n1127\n00:52:00,080 --> 00:52:01,610\nIf we had other ones,\n\n1128\n00:52:01,610 --> 00:52:05,240\ninstead of current they would actually\nhave their GUID, and it's pretty long.\n\n1129\n00:52:05,240 --> 00:52:09,380\nSo when you see the squiggly bracket\ndefault, and current, and boot manager,\n\n1130\n00:52:09,380 --> 00:52:11,890\nthose are just name aliases to\nstop us from having to type\n\n1131\n00:52:11,890 --> 00:52:12,570\nsomething big and long.\n\n1132\n00:52:12,570 --> 00:52:17,380\n>> It's a lot easier to type that in, and\nI'm just gonna add a line for safeboot.\n\n1133\n00:52:17,380 --> 00:52:22,040\nSo we'll do safeboot and you can do,\nI can do minimal or I can do, actually\n\n1134\n00:52:22,040 --> 00:52:26,860\nthis guys, a domain controller why don't\nI do a little DSA repair on this guy?\n\n1135\n00:52:26,860 --> 00:52:29,290\nSo safe boot and then just DSA repair.\n\n1136\n00:52:29,290 --> 00:52:32,580\n>> I thought it was just DS repair.\n\n1137\n00:52:32,580 --> 00:52:37,014\n>> It might be.\nIt might be, you're probably right.\n\n1138\n00:52:40,060 --> 00:52:42,689\nAnd so now, if i do another BCD,\nlet's see if we can see that guy in there.\n\n1139\n00:52:44,720 --> 00:52:47,060\nAll right, not showing up there.\n\n1140\n00:52:47,060 --> 00:52:50,710\nBut when I reboot this system,\nit should, so we'll do a little.\n\n1141\n00:52:52,410 --> 00:52:54,050\n>> Actually, you know what,\nit did take effect.\n\n1142\n00:52:54,050 --> 00:52:56,620\nSince you did default,\nsee how it modified current.\n\n1143\n00:52:56,620 --> 00:53:00,210\nIf you look at the bottom of current,\nsafe boot DS repair's turned on.\n\n1144\n00:53:00,210 --> 00:53:03,360\n>> Very good.\n>> So, when Mike did it,\n\n1145\n00:53:03,360 --> 00:53:04,560\nhe attached it to default.\n\n1146\n00:53:04,560 --> 00:53:07,510\nSo instead of creating a new entry,\nit modified the existing one.\n\n1147\n00:53:07,510 --> 00:53:10,710\nSo now what's going to happen is,\nif we reboot,\n\n1148\n00:53:10,710 --> 00:53:13,710\nit's going to go into active\ndirectory services restore mode.\n\n1149\n00:53:13,710 --> 00:53:15,480\nSo we're forcing it along.\n\n1150\n00:53:15,480 --> 00:53:17,770\nAnd that's what we'd want on a VM or\n\n1151\n00:53:17,770 --> 00:53:20,270\na machine with SSD,\nis this gonna boot too fast?\n\n1152\n00:53:20,270 --> 00:53:22,200\nThis will ensure that we boot to that.\n\n1153\n00:53:22,200 --> 00:53:24,874\n>> Exactly.\nSo we'll do a little reboot on that guy,\n\n1154\n00:53:24,874 --> 00:53:28,570\nand see if we can get into our\ndirectory service restore mode.\n\n1155\n00:53:32,361 --> 00:53:33,310\n>> How were you connected to that?\n\n1156\n00:53:33,310 --> 00:53:35,110\nWere you remote desktopped into it?\n\n1157\n00:53:35,110 --> 00:53:37,520\n>> You know,\nwas I not displaying that on our screen?\n\n1158\n00:53:37,520 --> 00:53:38,360\n>> I don't know.\n\n1159\n00:53:38,360 --> 00:53:39,860\nI didn't even know if it's a rerun.\n\n1160\n00:53:39,860 --> 00:53:43,903\n>> So that was good old DC two there.\n\n1161\n00:53:51,695 --> 00:53:53,653\nOh, is DC two not in?\n\n1162\n00:53:59,945 --> 00:54:03,236\nJust thinking about it.\n\n1163\n00:54:03,236 --> 00:54:04,361\n>> It's just gonna sit there.\n\n1164\n00:54:04,361 --> 00:54:06,486\n>> Right?\n\n1165\n00:54:06,486 --> 00:54:07,171\n>> All right, now,\n\n1166\n00:54:07,171 --> 00:54:09,690\nwhile we're waiting on that,\n>> You know you might be saying to\n\n1167\n00:54:09,690 --> 00:54:11,830\nyourself wait, a minute Don and Mike.\n\n1168\n00:54:11,830 --> 00:54:16,560\nCan't I just go in to MSConfig,\nyou go to start, and run MSConfig, and\n\n1169\n00:54:16,560 --> 00:54:19,890\nyou can tell it, hey, boot in safe mode or\nboot in directory services restore mode.\n\n1170\n00:54:19,890 --> 00:54:22,599\nAnd the answer is, yes you can do that,\nit's a heck of a lot easier.\n\n1171\n00:54:23,630 --> 00:54:26,830\nBut, what if you can't boot\ninto your operating system?\n\n1172\n00:54:26,830 --> 00:54:28,590\nIf you can't get to your\ndesktop you can't run MSConfig.\n\n1173\n00:54:28,590 --> 00:54:31,720\nAnd so, that command is not\ngoing to be available to you.\n\n1174\n00:54:31,720 --> 00:54:34,980\nWith this, I can actually boot off\nof the Windows server 2012 R2 DVD,\n\n1175\n00:54:34,980 --> 00:54:41,250\nboot off of that DVD, go into repair, and\ntell it to give me the command shell.\n\n1176\n00:54:41,250 --> 00:54:45,300\nOnce I'm in the command shell I\ncould use BCD edit to flag it so\n\n1177\n00:54:45,300 --> 00:54:49,080\nthat I would then boot into directory\nservices repair mode or whatever.\n\n1178\n00:54:49,080 --> 00:54:50,890\nSo then we just reboot and we go.\n\n1179\n00:54:50,890 --> 00:54:55,470\nSo BCD edit let's us modify this even\nif we can't get to the full OS and\n\n1180\n00:54:55,470 --> 00:54:58,590\nI know I've had to do that before\nwith a video card driver issue.\n\n1181\n00:54:58,590 --> 00:54:59,360\n>> You can't see it.\n\n1182\n00:54:59,360 --> 00:55:02,180\n>> Where even when I tried to get into\nsafe mode, it was blue screening which was\n\n1183\n00:55:02,180 --> 00:55:06,340\nbizarre cuz safe mode's not suppose to\nload the video card driver, but it was.\n\n1184\n00:55:06,340 --> 00:55:10,755\nAnd so I was able to do the little VGA\nflag that says don't load the video card\n\n1185\n00:55:10,755 --> 00:55:14,540\nadapter driver and then just boot\nthe system right back up and fix it.\n\n1186\n00:55:14,540 --> 00:55:16,500\nSo, pretty handy utility.\n\n1187\n00:55:16,500 --> 00:55:18,270\nDefinitely nice to manipulate it.\n\n1188\n00:55:18,270 --> 00:55:21,800\nThere are plenty of other people out there\nthat make specialized Windows boot disks.\n\n1189\n00:55:21,800 --> 00:55:25,270\nYou have the ultimate boot CD and\npeople like that.\n\n1190\n00:55:25,270 --> 00:55:29,380\nThey have great utilities on them, but\njust the Windows install media, Windows\n\n1191\n00:55:29,380 --> 00:55:32,270\nrecovery environment is actually got a lot\nof tools in there that are very helpful.\n\n1192\n00:55:32,270 --> 00:55:33,360\n>> It does.\n\n1193\n00:55:33,360 --> 00:55:36,220\n>> If you are a volume license\npartner with Microsoft,\n\n1194\n00:55:36,220 --> 00:55:40,300\nif you're an enterprise customer,\nyou also have something called the DART,\n\n1195\n00:55:40,300 --> 00:55:44,880\nthe Microsoft Disaster and\nRecovery Toolkit, or MSDART.\n\n1196\n00:55:44,880 --> 00:55:46,270\nReally useful utility.\n\n1197\n00:55:46,270 --> 00:55:49,208\nNot available to anybody\nexcept enterprise customers.\n\n1198\n00:55:49,208 --> 00:55:53,444\nAnd it has even more utilities,\nlike Windows memory diagnostics, and\n\n1199\n00:55:53,444 --> 00:55:54,510\nstuff like that.\n\n1200\n00:55:54,510 --> 00:55:58,110\nIf you want to learn more about it,\njump over to our Windows 8 show.\n\n1201\n00:55:58,110 --> 00:55:59,560\nWas that in?\n\n1202\n00:55:59,560 --> 00:56:01,170\n>> I wanna say that it's in 687.\n\n1203\n00:56:01,170 --> 00:56:02,125\n>> Is it 7687?\n\n1204\n00:56:02,125 --> 00:56:05,000\nSo in one of the Windows 8\nshows we cover the MS DaRT.\n\n1205\n00:56:05,000 --> 00:56:07,390\nAnd for\nsome reason I thought it was in 688.\n\n1206\n00:56:07,390 --> 00:56:08,260\nIt's in one of those.\n\n1207\n00:56:08,260 --> 00:56:11,540\n>> It might be, yeah, that's right, cuz\nthey redid that to manage and maintain.\n\n1208\n00:56:11,540 --> 00:56:12,543\n>> Yeah, they updated the objectives.\n\n1209\n00:56:12,543 --> 00:56:14,200\nThat's always convenient.\n\n1210\n00:56:14,200 --> 00:56:15,450\nBut check that one out.\n\n1211\n00:56:15,450 --> 00:56:16,430\nMS Start's pretty cool, too.\n\n1212\n00:56:16,430 --> 00:56:21,930\nBut for the normal people, right,\nthen your Windows Server 2012 boot disk,\n\n1213\n00:56:21,930 --> 00:56:24,600\nyour install media,\nit has most of the tools that we need.\n\n1214\n00:56:24,600 --> 00:56:28,940\n>> All right, so I got a DC backup\nhere and reconnected to it.\n\n1215\n00:56:28,940 --> 00:56:31,370\nAnd you'll see just,\nyou guys have seen this before, Safe Mode.\n\n1216\n00:56:31,370 --> 00:56:32,830\nSo you can tell I'm in Safe Mode.\n\n1217\n00:56:34,510 --> 00:56:36,630\n>> And\nit's the Directory Services Restore Mode.\n\n1218\n00:56:36,630 --> 00:56:37,140\n>> Yes, it is.\n\n1219\n00:56:37,140 --> 00:56:40,983\nAnd I had to remember the Directory\nServices Restore Mode password.\n\n1220\n00:56:40,983 --> 00:56:41,752\n>> [LAUGH]\n>> I was like, wait a second.\n\n1221\n00:56:41,752 --> 00:56:44,130\n[LAUGH] Which one did they set that to?\n\n1222\n00:56:44,130 --> 00:56:46,400\nLuckily, we used our standard.\n\n1223\n00:56:46,400 --> 00:56:47,900\nAnd so that's it.\n\n1224\n00:56:47,900 --> 00:56:51,060\nSo we added that line and we didn't have\nto hit F8, we didn't have to do anything.\n\n1225\n00:56:51,060 --> 00:56:54,870\nIt just automatically went into that\ndirectory service restore mode.\n\n1226\n00:56:54,870 --> 00:56:56,590\nThe important thing to do after this,\n\n1227\n00:56:56,590 --> 00:56:59,040\nonce you had have fixed your problem,\nyou've gotta put it back.\n\n1228\n00:56:59,040 --> 00:57:00,650\n>> Would be to get rid of that line,\n\n1229\n00:57:00,650 --> 00:57:02,680\nbecause you're now going to\nbe in a little bit of a loop.\n\n1230\n00:57:02,680 --> 00:57:05,715\nIt's gonna always boot into this DSRM.\n\n1231\n00:57:05,715 --> 00:57:07,583\nSo let me bump this up a little bit.\n\n1232\n00:57:11,321 --> 00:57:12,910\n>> So we can read it without binoculars.\n\n1233\n00:57:12,910 --> 00:57:14,070\n>> I know.\n\n1234\n00:57:14,070 --> 00:57:16,770\nAnd the command is just\ngonna be delete value safe.\n\n1235\n00:57:16,770 --> 00:57:18,500\nSo it's just gonna be bcd edit.\n\n1236\n00:57:19,610 --> 00:57:22,680\nAnd then switch delete value,\n\n1237\n00:57:22,680 --> 00:57:27,860\nand then safe boot.\n\n1238\n00:57:28,960 --> 00:57:31,580\nGet rid of that line.\n\n1239\n00:57:31,580 --> 00:57:33,980\nAnd then we do another bcd\n>> Edit.\n\n1240\n00:57:35,110 --> 00:57:38,540\nWe'll see that that line down there\nhas been removed from my current, so\n\n1241\n00:57:38,540 --> 00:57:41,040\nit's no longer going into safe mode.\n\n1242\n00:57:41,040 --> 00:57:41,916\nSo I'll reboot this guy.\n\n1243\n00:57:48,011 --> 00:57:48,660\nAnd that's it.\n\n1244\n00:57:48,660 --> 00:57:54,560\nWe come back and\nit should be back into our normal mode.\n\n1245\n00:57:54,560 --> 00:57:56,256\n>> Sweet.\n>> How'd it go with our other restores?\n\n1246\n00:57:56,256 --> 00:57:56,940\n[CROSSTALK]\n>> Yeah.\n\n1247\n00:57:56,940 --> 00:57:58,960\nI've gotta actually clean up some space.\n\n1248\n00:57:58,960 --> 00:58:01,172\nI don't have enough room\nto make a VHD anymore.\n\n1249\n00:58:01,172 --> 00:58:01,672\n[LAUGH]\n>> [LAUGH] Nice.\n\n1250\n00:58:01,672 --> 00:58:02,590\n>> So I have to\n\n1251\n00:58:02,590 --> 00:58:05,210\nmake a little bit bigger drive and\nthen I can show you that whole process.\n\n1252\n00:58:05,210 --> 00:58:07,180\n>> So actually we ran out of\nstorage on the host machine.\n\n1253\n00:58:07,180 --> 00:58:08,310\nThat's pretty funny.\n\n1254\n00:58:08,310 --> 00:58:09,100\n>> Yep.\n>> Alright,\n\n1255\n00:58:09,100 --> 00:58:10,430\nwe'll take care of that during the break.\n\n1256\n00:58:10,430 --> 00:58:12,790\nIt is actually a pretty good\nspot of us to stop here.\n\n1257\n00:58:12,790 --> 00:58:14,480\nSo let's stop and take a timeout.\n\n1258\n00:58:14,480 --> 00:58:18,250\nAnd when we get back,\nwe're gonna restore that backup.\n\n1259\n00:58:18,250 --> 00:58:19,940\nAnd we still have a bunch\nof other stuff to do.\n\n1260\n00:58:19,940 --> 00:58:21,090\n>> We do.\nIt's all the cool stuff to go.\n\n1261\n00:58:21,090 --> 00:58:22,240\nYeah.\n>> Oh, clustering and HyperV.\n\n1262\n00:58:22,240 --> 00:58:24,310\nWe definitely have to tackle that.\n\n1263\n00:58:24,310 --> 00:58:25,910\nSo let's stop here.\n\n1264\n00:58:25,910 --> 00:58:27,310\nLike I said, stay tuned.\n\n1265\n00:58:27,310 --> 00:58:29,960\nWe'll be back in a few minutes.\n\n1266\n00:58:29,960 --> 00:58:36,098\n[SOUND]\nAll right.\n\n1267\n00:58:36,098 --> 00:58:37,790\nWelcome back everybody.\n\n1268\n00:58:37,790 --> 00:58:40,640\nAfter a little false start for\nour live viewers there.\n\n1269\n00:58:40,640 --> 00:58:42,890\nSo, during the break we took lunch.\n\n1270\n00:58:42,890 --> 00:58:46,040\nThrough the magic of TV,\nit may seem like a very short break.\n\n1271\n00:58:46,040 --> 00:58:51,624\nBut you'll remember before the break that\nMike went to restore his backup image and\n\n1272\n00:58:51,624 --> 00:58:54,110\nwe ran out of hard drive space.\n\n1273\n00:58:54,110 --> 00:58:54,660\n>> Failed miserably?\n\n1274\n00:58:54,660 --> 00:58:56,670\nYeah, we did.\n>> So it is important if you're gonna\n\n1275\n00:58:56,670 --> 00:59:00,360\nrestore an image to a system that you\nhave enough hard drive space available.\n\n1276\n00:59:00,360 --> 00:59:02,920\nAnd the problem here was not actually with\nthe virtual machine that Mike was using,\n\n1277\n00:59:02,920 --> 00:59:04,740\nbut the underlying OS.\n\n1278\n00:59:04,740 --> 00:59:08,170\nSo, we've corrected that now, so\nMike is going to repeat that process and\n\n1279\n00:59:08,170 --> 00:59:12,300\nshow us doing the bare metal\nrestore of that virtual machine.\n\n1280\n00:59:12,300 --> 00:59:14,681\nSo lets jump over to you Mike and\nget a chance to see that.\n\n1281\n00:59:14,681 --> 00:59:16,970\n>> Yep, so what I've got here,\nI've got our virtual machine.\n\n1282\n00:59:16,970 --> 00:59:17,950\nI'm gonna power it up.\n\n1283\n00:59:17,950 --> 00:59:21,210\nAnd just like we talked about before\nwe're going to boot from the DVD.\n\n1284\n00:59:21,210 --> 00:59:25,610\nSo hit the magic Any key there and\nstart this process up.\n\n1285\n00:59:27,920 --> 00:59:31,430\nAnd if all goes well this time,\nwe'll get a little further.\n\n1286\n00:59:31,430 --> 00:59:33,470\nSo we'll wait for this guy to boot up.\n\n1287\n00:59:33,470 --> 00:59:34,940\nAnd I'm just booting like I said,\n\n1288\n00:59:34,940 --> 00:59:39,720\nto the 2012 R2 DVD, and I'm gonna pick\nmy languages there, click Next and\n\n1289\n00:59:39,720 --> 00:59:42,750\nthen go over here and\nclick this Repair Your Computer link.\n\n1290\n00:59:44,095 --> 00:59:47,875\nAnd then as we saw before,\nwell I'm gonna click Troubleshoot, and\n\n1291\n00:59:47,875 --> 00:59:49,315\nthen do my system recovery.\n\n1292\n00:59:51,115 --> 00:59:54,755\nAnd then what it should do is because\nI've attached that drive that has that\n\n1293\n00:59:54,755 --> 00:59:56,785\nbackup on it, it's found that backup.\n\n1294\n00:59:56,785 --> 00:59:58,590\nAnd it says, is this the one you want?\n\n1295\n00:59:58,590 --> 01:00:01,880\nAnd as Don pointed out earlier,\nif there were multiple backups on there,\n\n1296\n01:00:01,880 --> 01:00:04,580\nI could go and browse and\npick one if I didn't want the latest one.\n\n1297\n01:00:04,580 --> 01:00:06,285\nIt should automatically\npick the latest one,\n\n1298\n01:00:06,285 --> 01:00:09,800\nis usually what we want, but\nmaybe you want to go back a little further\n\n1299\n01:00:09,800 --> 01:00:13,320\nbecause you've had some kind of\ndeleted issue or something like that.\n\n1300\n01:00:13,320 --> 01:00:14,130\nSo I'll click Next.\n\n1301\n01:00:15,260 --> 01:00:16,510\nAnd that's pretty much it.\n\n1302\n01:00:16,510 --> 01:00:18,520\nWe talked about these right\nbefore we went on break.\n\n1303\n01:00:18,520 --> 01:00:20,930\nIf I wanted to Excludes certain\ndrives from the back up or\n\n1304\n01:00:20,930 --> 01:00:24,950\nfrom the restore process, or had any\ndrivers if the hard drive controllers\n\n1305\n01:00:24,950 --> 01:00:27,220\nwere different on this particular machine.\n\n1306\n01:00:27,220 --> 01:00:30,180\nWe'll click Next, and Finish.\n\n1307\n01:00:31,320 --> 01:00:34,530\nAnd it's gonna warn me again that\nit's gonna format those drives and\n\n1308\n01:00:34,530 --> 01:00:35,753\nreplace it that a back up.\n\n1309\n01:00:35,753 --> 01:00:38,860\nI'll say Yes, and hopefully this\ntime we get a little further.\n\n1310\n01:00:38,860 --> 01:00:41,099\n>> Yep.\nSo now what it's gonna do is it's gonna\n\n1311\n01:00:41,099 --> 01:00:44,330\nrebuild the partition table\nas it was laid out before.\n\n1312\n01:00:44,330 --> 01:00:48,420\nIt's gonna rebuild the boot sector,\nyour EFI partition, that kind of stuff.\n\n1313\n01:00:48,420 --> 01:00:49,590\nIt's gonna put that in place, and\n\n1314\n01:00:49,590 --> 01:00:52,660\nthen it's gonna start restoring\nyour actual operating system.\n\n1315\n01:00:52,660 --> 01:00:54,980\nAnd so that's what it's doing right now,\nchurning along.\n\n1316\n01:00:54,980 --> 01:00:57,740\nThe bigger the backup,\nthe longer this is gonna take.\n\n1317\n01:00:57,740 --> 01:00:59,380\nMike, your back up was\nactually pretty small.\n\n1318\n01:00:59,380 --> 01:01:01,770\n>> Yeah, about 10 gigs or something\nlike that, so it shouldn't be too bad.\n\n1319\n01:01:01,770 --> 01:01:04,280\n>> It'll probably be like 10 minutes or\nsomething, to get it restored.\n\n1320\n01:01:04,280 --> 01:01:07,540\nBut if you're restoring from back up tape,\nthis could take hours?\n\n1321\n01:01:07,540 --> 01:01:09,030\n>> Yeah.\n>> You know, if you have terabytes of\n\n1322\n01:01:09,030 --> 01:01:10,550\ndata it could take hours.\n\n1323\n01:01:10,550 --> 01:01:13,890\nSo, depending on the size of that backup,\nyou'll have to wait.\n\n1324\n01:01:13,890 --> 01:01:17,985\nOnce it's done, it's restored,\nif we loaded any drivers,\n\n1325\n01:01:17,985 --> 01:01:21,239\nit's actually slipstreamed\ninto the drivers.\n\n1326\n01:01:21,239 --> 01:01:23,560\n>> [LAUGH]\n>> That was a little hard to say.\n\n1327\n01:01:23,560 --> 01:01:24,750\nSo it's gonna get that.\n\n1328\n01:01:24,750 --> 01:01:25,715\n>> So get lunch.\n\n1329\n01:01:25,715 --> 01:01:27,080\n[LAUGH]\n>> Tip back a few beers.\n\n1330\n01:01:27,080 --> 01:01:31,070\nAnyhow, so it's gonna restore that\ninformation, get it in place.\n\n1331\n01:01:31,070 --> 01:01:32,520\nAfter that we really just reboot.\n\n1332\n01:01:32,520 --> 01:01:37,050\nAnd if it's the same hardware, then you\njust reboot and the server's back up and\n\n1333\n01:01:37,050 --> 01:01:38,310\nyou're in business.\n\n1334\n01:01:38,310 --> 01:01:42,390\nIf your hardware changed though,\nif this like a new motherboard, or\n\n1335\n01:01:42,390 --> 01:01:45,730\nwhatever, your system's going to reboot,\nit's going to be happy, but\n\n1336\n01:01:45,730 --> 01:01:47,730\nyou're going to lose your activation.\n\n1337\n01:01:47,730 --> 01:01:49,720\nAnd so Windows will deactivate.\n\n1338\n01:01:49,720 --> 01:01:53,741\nIf you're using KMS, right,\nthe Key-Management-Services or\n\n1339\n01:01:53,741 --> 01:01:56,780\nKey-Management-Servers, then your system\nwill just automatically reactivate,\n\n1340\n01:01:56,780 --> 01:01:58,150\nit's no big deal.\n\n1341\n01:01:58,150 --> 01:02:01,246\nIf you're using MAK as\nthe multiple activation keys,\n\n1342\n01:02:01,246 --> 01:02:04,470\nusually the manual product key that\nyou punch in, then when you boot up,\n\n1343\n01:02:04,470 --> 01:02:06,280\nit's gonna tell you you need to activate.\n\n1344\n01:02:06,280 --> 01:02:09,980\nNow, it's been my experience that\nsometimes it doesn't tell you that\n\n1345\n01:02:09,980 --> 01:02:11,160\nright away.\n\n1346\n01:02:11,160 --> 01:02:15,120\nYou're under pressure,\nyou do this big restore, and you're done.\n\n1347\n01:02:15,120 --> 01:02:17,760\nThe server boots, it's happy and\nyou're like, oh, thank goodness.\n\n1348\n01:02:17,760 --> 01:02:19,690\nThe server's back online, I'm done.\n\n1349\n01:02:19,690 --> 01:02:23,415\nAnd then,\nthree days later the server won't boot up.\n\n1350\n01:02:23,415 --> 01:02:24,300\n>> [LAUGH]\n>> And you go and\n\n1351\n01:02:24,300 --> 01:02:27,060\nlook and it says you need to activate and\nyou gotta do it now!\n\n1352\n01:02:27,060 --> 01:02:30,480\nYou're beyond your demo period or\ntrial period or whatever it says, and\n\n1353\n01:02:30,480 --> 01:02:31,772\nthat's really frustrating-\n>> Yeah it is\n\n1354\n01:02:31,772 --> 01:02:33,340\n>> To have that creep up a few days later.\n\n1355\n01:02:33,340 --> 01:02:38,060\nSo, even if it doesn't tell tell you\nto reactivate, it's a good practice,\n\n1356\n01:02:38,060 --> 01:02:43,040\nthat once you do the restore, go into\nyour system Control Panel item, and\n\n1357\n01:02:43,040 --> 01:02:45,020\nwhen you go in there it'll tell\nyou if you're still activated.\n\n1358\n01:02:45,020 --> 01:02:48,240\nIf you're not, it will give you\nthe option to reactivate right then.\n\n1359\n01:02:48,240 --> 01:02:51,350\nDo it now, you know, don't don't wait\ntill later cause otherwise you'll have\n\n1360\n01:02:51,350 --> 01:02:54,607\nanother down time even after you recover.\n\n1361\n01:02:54,607 --> 01:02:55,790\n>> Very good.\n\n1362\n01:02:55,790 --> 01:02:58,190\n>> Alright so it looks like\nit finished the EFI stuff and\n\n1363\n01:02:58,190 --> 01:03:00,390\nnow it's doing, oh this is done?\n\n1364\n01:03:00,390 --> 01:03:01,520\nWhat is that even saying?\n\n1365\n01:03:01,520 --> 01:03:05,160\n>> It still says it might to\na few hours to a few minutes.\n\n1366\n01:03:05,160 --> 01:03:07,600\nOr few minutes to a few hours.\n\n1367\n01:03:07,600 --> 01:03:09,490\n>> But at least they're being\na little more honest here, and\n\n1368\n01:03:09,490 --> 01:03:10,740\nnot even bothering to give you a time.\n\n1369\n01:03:10,740 --> 01:03:12,080\nOh it's done, good.\n\n1370\n01:03:12,080 --> 01:03:14,540\n>> So we'll go ahead and\nclick Restart now and see what happens.\n\n1371\n01:03:16,790 --> 01:03:19,490\n>> And\nwe're restoring to a virtual machine.\n\n1372\n01:03:19,490 --> 01:03:20,860\nWe could have restored to a physical.\n\n1373\n01:03:20,860 --> 01:03:22,610\nYou can actually go back and forth too.\n\n1374\n01:03:22,610 --> 01:03:26,130\nMaybe you had a machine that was\nvirtualized, and you're running some\n\n1375\n01:03:26,130 --> 01:03:29,040\nsoftware on there and the vendor says,\noh, we don't support virtualization and\n\n1376\n01:03:29,040 --> 01:03:31,105\nwe're not gonna help you,\nand you go, well, crap.\n\n1377\n01:03:31,105 --> 01:03:32,250\n>> [LAUGH]\n>> Now I need to move it to\n\n1378\n01:03:32,250 --> 01:03:33,450\na physical machine.\n\n1379\n01:03:33,450 --> 01:03:37,740\nYou could take a bare-metal backup of the\nVM and restore it to a physical machine or\n\n1380\n01:03:37,740 --> 01:03:38,760\nvice versa.\n\n1381\n01:03:38,760 --> 01:03:41,220\nA backup of a physical machine and\nrestore it to a VM.\n\n1382\n01:03:41,220 --> 01:03:45,320\nIt's an easy way to do P to V,\nphysical to virtual conversions.\n\n1383\n01:03:45,320 --> 01:03:47,970\nThe thing to remember there\nare the drivers, right?\n\n1384\n01:03:47,970 --> 01:03:49,870\n>> Right.\n>> When you bring it in to Hyper V,\n\n1385\n01:03:49,870 --> 01:03:53,490\nyou got the integration services that\nyou have to install to give the drivers.\n\n1386\n01:03:53,490 --> 01:03:55,230\n>> And\nwhen you go from virtual to physical,\n\n1387\n01:03:55,230 --> 01:03:57,010\nit's an entirely different\nset of hardware.\n\n1388\n01:03:57,010 --> 01:03:58,468\n>> Right.\n>> And so you're gonna need to go and\n\n1389\n01:03:58,468 --> 01:03:59,711\nload drivers for that, too.\n\n1390\n01:03:59,711 --> 01:04:01,266\n>> Absolutely.\n\n1391\n01:04:01,266 --> 01:04:02,792\nShe's thinking about it here.\n\n1392\n01:04:02,792 --> 01:04:03,875\nThere she goes.\n\n1393\n01:04:03,875 --> 01:04:07,456\n>> Yep, so it's booting up, and\nthis is booting up off the hard drive now,\n\n1394\n01:04:07,456 --> 01:04:08,417\nnot off of the DVD.\n\n1395\n01:04:08,417 --> 01:04:09,706\n>> Right.\n>> And so this is the restored\n\n1396\n01:04:09,706 --> 01:04:10,514\noperating system.\n\n1397\n01:04:10,514 --> 01:04:14,910\nSince we did a bare-metal restore it\nincludes everything, the registry,\n\n1398\n01:04:14,910 --> 01:04:15,710\nthe operating system,\n\n1399\n01:04:15,710 --> 01:04:18,955\nall of our applications,\nevery single bit of data we could expect.\n\n1400\n01:04:20,415 --> 01:04:23,485\nAnd I don't remember Mike, this machine,\nwhat did it do before, was it just a?\n\n1401\n01:04:23,485 --> 01:04:25,715\n>> It was just a server,\nit was part of the domain now, and\n\n1402\n01:04:25,715 --> 01:04:28,035\nI don't know if this machine is\nconnected to the same network.\n\n1403\n01:04:28,035 --> 01:04:30,350\n>> Okay, I was just about to say\nis the other server still up?\n\n1404\n01:04:30,350 --> 01:04:31,630\nBecause.\n\n1405\n01:04:31,630 --> 01:04:34,350\n>> Yes, it probably is, but I think\nit's on a different network completely.\n\n1406\n01:04:34,350 --> 01:04:35,372\n>> Okay, all right, so we'll be safe then.\n\n1407\n01:04:35,372 --> 01:04:36,904\n[LAUGH]\n>> We just won't be able to login with\n\n1408\n01:04:36,904 --> 01:04:37,817\na different account.\n\n1409\n01:04:37,817 --> 01:04:38,800\n[LAUGH]\n>> We backed\n\n1410\n01:04:38,800 --> 01:04:40,480\nup a perfectly healthy server.\n\n1411\n01:04:40,480 --> 01:04:41,263\n>> Right.\n>> And then we\n\n1412\n01:04:41,263 --> 01:04:44,740\nare restoring it now to an entirely\nnew system, so we have the risk of,\n\n1413\n01:04:44,740 --> 01:04:48,250\nif we bring them up at the same time,\ntwo machines with the same name,\n\n1414\n01:04:48,250 --> 01:04:52,596\nsame IP, same SID,\nthat's gonna cause some problems, right?\n\n1415\n01:04:52,596 --> 01:04:53,210\n>> That would cause issues there.\n\n1416\n01:04:53,210 --> 01:04:56,180\n>> But fortunately with Hyper-V, you can\nput a lot on a isolated network, and.\n\n1417\n01:04:56,180 --> 01:05:00,000\n>> In fact, he's not connected to\nthe network at all right now, so.\n\n1418\n01:05:00,000 --> 01:05:00,530\n>> Oh, perfect.\n\n1419\n01:05:00,530 --> 01:05:02,425\n>> All right, and\nwe'll see if we can log in.\n\n1420\n01:05:03,695 --> 01:05:05,685\nI'll try to log in with the local admin,\nI guess.\n\n1421\n01:05:08,215 --> 01:05:09,355\n>> If you know that password.\n\n1422\n01:05:09,355 --> 01:05:10,012\n>> Yeah, right?\n\n1423\n01:05:15,803 --> 01:05:20,175\n>> All right, so we're up,\nwe're healthy, machine is recovered.\n\n1424\n01:05:20,175 --> 01:05:20,687\n>> We are, yep.\n>> So\n\n1425\n01:05:20,687 --> 01:05:23,797\nthat's it,\nbare-metal recovery's really easy to do.\n\n1426\n01:05:23,797 --> 01:05:26,407\nAnd let me tell you,\nfrom personal experience,\n\n1427\n01:05:26,407 --> 01:05:30,310\nwhen you have a server failure, to know\nthat you've got a good clean backup,\n\n1428\n01:05:30,310 --> 01:05:32,590\nthat you can just go and restore,\nand get that server back online?\n\n1429\n01:05:32,590 --> 01:05:34,030\n>> Right.\n>> Worth its weight in gold.\n\n1430\n01:05:34,030 --> 01:05:35,420\n>> Absolutely.\n>> Just to\n\n1431\n01:05:35,420 --> 01:05:38,210\nbe able to recover from a failure\nlike that, so very, very handy.\n\n1432\n01:05:38,210 --> 01:05:39,240\n>> Nice.\n\n1433\n01:05:39,240 --> 01:05:42,030\n>> All right, so\nthat's what we need to know for the exam,\n\n1434\n01:05:42,030 --> 01:05:43,270\nthat's Windows Server Backup.\n\n1435\n01:05:43,270 --> 01:05:45,635\nIt's got its limitations, but\nit's still pretty useful.\n\n1436\n01:05:45,635 --> 01:05:46,560\n>> Mm-hm.\n\n1437\n01:05:46,560 --> 01:05:50,880\n>> We still have a handful of other topics\nto talk about too, but that's about it for\n\n1438\n01:05:50,880 --> 01:05:51,570\nWindows backup, isn't it?\n\n1439\n01:05:51,570 --> 01:05:54,770\n>> That does it for\nWindows Server backup, yeah.\n\n1440\n01:05:54,770 --> 01:05:58,508\n>> All right, the next thing we want to\ntalk about, we've talked about clustering.\n\n1441\n01:05:58,508 --> 01:06:01,080\n>> Mm-hm.\n>> And so we did a whole episode on\n\n1442\n01:06:01,080 --> 01:06:02,885\nclustering and high availability.\n\n1443\n01:06:02,885 --> 01:06:06,420\nAnd one of the nice things\nabout a cluster is,\n\n1444\n01:06:06,420 --> 01:06:11,520\nif one system fails, one node fails,\nwhatever your cluster resource is,\n\n1445\n01:06:11,520 --> 01:06:14,695\nit just jumps on over to another machine,\nand you're in business, right?\n\n1446\n01:06:14,695 --> 01:06:19,530\nAnd we showed you guys how to cluster\nHyper-V, and it worked really well.\n\n1447\n01:06:19,530 --> 01:06:20,760\nWe took a virtual machine, and\n\n1448\n01:06:20,760 --> 01:06:24,965\nwe failed it over while it was on, it\nwas running the whole time, really cool.\n\n1449\n01:06:24,965 --> 01:06:26,320\n>> Yep.\n\n1450\n01:06:26,320 --> 01:06:31,215\n>> But,\nwhat if you have more than one cluster?\n\n1451\n01:06:31,215 --> 01:06:31,930\n>> Mm-hm.\n\n1452\n01:06:31,930 --> 01:06:34,750\n>> And you want a Hyper-V machine\nto be able to jump from one\n\n1453\n01:06:34,750 --> 01:06:37,820\ncluster to another cluster, or\nmaybe you don't have a cluster at all.\n\n1454\n01:06:37,820 --> 01:06:40,100\n>> Right.\n>> Maybe you've got a standalone Hyper-V\n\n1455\n01:06:40,100 --> 01:06:43,630\nserver here, and\nanother standalone Hyper-V server, and\n\n1456\n01:06:43,630 --> 01:06:47,030\nyou want to have a VM that's\nable to boot on either one.\n\n1457\n01:06:47,030 --> 01:06:48,750\n>> Exactly.\n>> Similar to a cluster, but\n\n1458\n01:06:48,750 --> 01:06:51,210\nwithout the hardware and cost of it.\n\n1459\n01:06:51,210 --> 01:06:52,060\n>> Right.\n\n1460\n01:06:52,060 --> 01:06:53,750\n>> Well in Windows Server 2012 R2,\n\n1461\n01:06:53,750 --> 01:06:57,870\nwe now have Hyper-V replicas,\nwhich help to provide that.\n\n1462\n01:06:57,870 --> 01:06:59,460\n>> Very cool stuff, very cool.\n\n1463\n01:06:59,460 --> 01:07:04,280\nWe've got, as Don was saying, you can do\nit with just stand alone Hyper-V machines.\n\n1464\n01:07:04,280 --> 01:07:07,075\nAnd basically all you're going to do is\nyou're going to take your Hyper-V server\n\n1465\n01:07:07,075 --> 01:07:09,540\nhere, you're gonna have\na VM running on that.\n\n1466\n01:07:09,540 --> 01:07:13,180\nYou've got a Hyper-V running at another\nsite, maybe your back up site, and\n\n1467\n01:07:13,180 --> 01:07:19,120\nthey are gonna use the terms primary\nserver, and then secondary, or alternate.\n\n1468\n01:07:19,120 --> 01:07:23,370\nSo, you've got your primary VM running\non your primary Hyper-V server.\n\n1469\n01:07:23,370 --> 01:07:24,497\nAnd all we're gonna do is,\n\n1470\n01:07:24,497 --> 01:07:27,710\nwe're going to enable this\nHyper-V replication or replica.\n\n1471\n01:07:27,710 --> 01:07:30,960\nSo, we'll go to that alternate site or\nthat secondary site,\n\n1472\n01:07:30,960 --> 01:07:35,530\nhave Hyper-V installed, and we're gonna\nenable the Hyper-V replica through\n\n1473\n01:07:35,530 --> 01:07:39,470\nthe Hyper-V console, there's a little\nwizard you go through to set this up.\n\n1474\n01:07:39,470 --> 01:07:43,085\nThen you go back over to your primary\nsite, and you're gonna chose which\n\n1475\n01:07:43,085 --> 01:07:47,595\nmachine you want to make available,\nor make that replica of.\n\n1476\n01:07:47,595 --> 01:07:51,345\nAnd you basically right-click on it and\ngo through another little wizard, and\n\n1477\n01:07:51,345 --> 01:07:55,390\nyou tell it where that alternate site is,\nwhere that Hyper-V server is over there.\n\n1478\n01:07:55,390 --> 01:07:59,730\nAnd it will replicate that virtual\nmachine to that other Hyper-V server.\n\n1479\n01:07:59,730 --> 01:08:01,100\nNow only one of them's running,\n\n1480\n01:08:01,100 --> 01:08:05,800\nthe Hyper-V back at the primary, that\nvirtual machine back at your primary site,\n\n1481\n01:08:05,800 --> 01:08:10,040\nis the one that's performing the services,\nor doing whatever it is on your network.\n\n1482\n01:08:10,040 --> 01:08:15,470\nAnd in the event of a failure it can\nflip over, and it keeps the virtual\n\n1483\n01:08:15,470 --> 01:08:19,260\nmachine up to date through a replication\nprocess, hence the name Hyper-V Replica.\n\n1484\n01:08:20,660 --> 01:08:25,445\nAnd prior to I guess it was in 2012,\nit was every, actually I want to say,\n\n1485\n01:08:25,445 --> 01:08:29,448\nit was five minutes that it would\nreplicate those changes over.\n\n1486\n01:08:29,448 --> 01:08:31,020\nSo it's gonna monitor\nthat virtual machine,\n\n1487\n01:08:31,020 --> 01:08:35,420\nand then it's gonna replicate\nthose changes to the other site.\n\n1488\n01:08:35,420 --> 01:08:37,790\nWith 2012 R2, they've give us\nthe ability to change that.\n\n1489\n01:08:37,790 --> 01:08:41,000\nWe can actually go,\nwhat was it five minutes, 15 minutes, or\n\n1490\n01:08:41,000 --> 01:08:44,280\n30 minutes, if I'm not mistaken,\non our replicative changes there.\n\n1491\n01:08:44,280 --> 01:08:47,420\nWhat else do you need to know about that?\n\n1492\n01:08:47,420 --> 01:08:51,470\nNow the, so that's without a cluster,\nwe can set that up.\n\n1493\n01:08:51,470 --> 01:08:54,140\nAnd then you can, it gives you the ability\nof right there in the console,\n\n1494\n01:08:54,140 --> 01:08:55,680\nyou can test failover.\n\n1495\n01:08:55,680 --> 01:08:59,580\nYou can do a planned failover test, where\nit'll flip over to that other machine, or\n\n1496\n01:08:59,580 --> 01:09:02,000\nyour other Hyper-V server\nat the other location.\n\n1497\n01:09:02,000 --> 01:09:06,846\nAnd then like I said, it can do\nthe what they call unplanned failures,\n\n1498\n01:09:06,846 --> 01:09:09,210\nif a Hyper-V server goes down.\n\n1499\n01:09:09,210 --> 01:09:13,410\nWhen you set it up initially, the initial\nreplication is gonna go across the network\n\n1500\n01:09:13,410 --> 01:09:16,838\nby default, but you do have the option\nto copy that to removable media.\n\n1501\n01:09:16,838 --> 01:09:21,190\nIf that Hyper-V's hard drives, or that\nvirtual machine's hard drives are large,\n\n1502\n01:09:21,190 --> 01:09:26,070\nand you don't wanna use all that bandwidth\nfor that initial replication, you can\n\n1503\n01:09:26,070 --> 01:09:30,210\ncopy it to some removable media, and then\nship that out to your alternate location.\n\n1504\n01:09:30,210 --> 01:09:33,320\nHave them restore it over there, and\nthen rest of the replication for\n\n1505\n01:09:33,320 --> 01:09:36,590\nthe changes would take care of that.\n\n1506\n01:09:36,590 --> 01:09:38,180\nSo, that's without a cluster.\n\n1507\n01:09:38,180 --> 01:09:41,680\nIf you wanna do it on a cluster, so as Don\nwas saying, if you've got a cluster at\n\n1508\n01:09:41,680 --> 01:09:45,000\neach location, then what we're gonna do,\nwe're gonna install like we\n\n1509\n01:09:45,000 --> 01:09:48,850\ndid in our previous episode, we're gonna\nhave a Hyper-V as a clustered role.\n\n1510\n01:09:48,850 --> 01:09:53,930\nAnd then what you do is you install this\nHyper-V Replica Broker, and the broker\n\n1511\n01:09:53,930 --> 01:09:58,750\nis the cluster-aware part of this process\nthat'll do basically the same thing.\n\n1512\n01:09:58,750 --> 01:10:02,110\nBut now we're gonna be replicating those\nchanges from one cluster to another.\n\n1513\n01:10:03,678 --> 01:10:06,870\nAll right, so we've got a great,\nwe're not going to do a lab in here.\n\n1514\n01:10:06,870 --> 01:10:08,820\nIt would take a little too much to set up,\nI think.\n\n1515\n01:10:08,820 --> 01:10:12,790\nBut there's a great TechNet lab,\nthat walks you through the whole process.\n\n1516\n01:10:12,790 --> 01:10:15,810\nYou get to set up the cluster,\nI think you've got that there.\n\n1517\n01:10:15,810 --> 01:10:17,325\n>> Let me bring that\nup here on my machine.\n\n1518\n01:10:17,325 --> 01:10:20,900\nAnd I'm gonna post the URL\nto it in the show notes.\n\n1519\n01:10:20,900 --> 01:10:24,520\nBut if you want to get to it right away,\non the Microsoft Tech Net V Labs.\n\n1520\n01:10:24,520 --> 01:10:27,816\nYou can just do a Google search for\nTechNet V-Labs, like the First Response.\n\n1521\n01:10:27,816 --> 01:10:28,338\n>> Mm-hm.\n\n1522\n01:10:28,338 --> 01:10:32,450\n>> In their V-labs you'll find a lab\nthat's called Windows Server 22 of R2,\n\n1523\n01:10:32,450 --> 01:10:34,640\nintroduction to failover clustering.\n\n1524\n01:10:34,640 --> 01:10:38,520\nAnd it walks you through setting up\na cluster and putting that in place, and\n\n1525\n01:10:38,520 --> 01:10:43,060\nthen once the cluster is in place, it then\nwalks you through doing a Hyper-V Replica.\n\n1526\n01:10:43,060 --> 01:10:46,360\nAnd the reason we're not gonna do it on\nthe show is that it does take a long,\n\n1527\n01:10:46,360 --> 01:10:46,925\nlong time.\n\n1528\n01:10:46,925 --> 01:10:48,130\n>> Mm-hm.\n>> Because\n\n1529\n01:10:48,130 --> 01:10:50,120\nwe're not talking about shared storage.\n\n1530\n01:10:50,120 --> 01:10:53,690\nWhen we did the cluster lab,\nwe did that right here on the show.\n\n1531\n01:10:53,690 --> 01:10:56,780\nBecause when you have two\nnodes in a cluster, and\n\n1532\n01:10:56,780 --> 01:10:59,810\nthe VM is running on one of them,\nwell it's shared storage.\n\n1533\n01:10:59,810 --> 01:11:03,080\nSo when you do failover, the other\nserver has access to the same storage,\n\n1534\n01:11:03,080 --> 01:11:03,735\nthe same data.\n\n1535\n01:11:03,735 --> 01:11:04,490\n>> Right.\n\n1536\n01:11:04,490 --> 01:11:09,140\n>> But when you're talking about Hyper-V\nreplicas, it is not the same storage.\n\n1537\n01:11:09,140 --> 01:11:11,290\nYou don't have to have shared storage for\nit,\n\n1538\n01:11:11,290 --> 01:11:13,310\nand that's one of the big\nadvantages of it.\n\n1539\n01:11:13,310 --> 01:11:18,880\nSo what it actually has to do is create\nan entire copy of the virtual machine and\n\n1540\n01:11:18,880 --> 01:11:21,000\nstore it on both sides,\nand keep it up to date.\n\n1541\n01:11:21,000 --> 01:11:23,850\nAnd that thing is constantly changing,\nit writes to the page file and\n\n1542\n01:11:23,850 --> 01:11:24,800\nstuff like that.\n\n1543\n01:11:24,800 --> 01:11:29,300\nSo it is a little bit intensive,\nbut if you have about an hour and\n\n1544\n01:11:29,300 --> 01:11:33,600\na half to set aside one day, sit down and\ndo this lab cause it's great.\n\n1545\n01:11:33,600 --> 01:11:37,370\nAnd they walk you through kind of\nstep-by-step how to set up the cluster,\n\n1546\n01:11:37,370 --> 01:11:39,670\nand then how to set up\nthe replicas on top of it.\n\n1547\n01:11:39,670 --> 01:11:42,650\nNow you don't have to do\nit on top of a cluster,\n\n1548\n01:11:42,650 --> 01:11:44,560\nit's great practice to do it this way.\n\n1549\n01:11:44,560 --> 01:11:47,370\nBut they do have another\nlab on there which,\n\n1550\n01:11:47,370 --> 01:11:49,910\nlet me see if I can find it real quick.\n\n1551\n01:11:49,910 --> 01:11:53,945\nI usually just search for\nthe word replica, because there's only so\n\n1552\n01:11:53,945 --> 01:11:55,208\nmany that have that.\n\n1553\n01:11:55,208 --> 01:11:57,021\nAnd there's another lab on here,\n\n1554\n01:11:57,021 --> 01:12:01,560\nthis one, Getting Start with\nWindows Server 2012 Hyper-V Replication.\n\n1555\n01:12:01,560 --> 01:12:04,060\nThe only problem with this\nlab is that it's not R2.\n\n1556\n01:12:04,060 --> 01:12:05,625\nOn the exam you're gonna see R2.\n\n1557\n01:12:05,625 --> 01:12:09,258\nSo it's not gonna have certain options\nlike changing the replication time that\n\n1558\n01:12:09,258 --> 01:12:10,560\nMike mentioned.\n\n1559\n01:12:10,560 --> 01:12:14,710\nNow one thing you said, Mike, is that\nyou can go from 5 minutes to 15 to 30.\n\n1560\n01:12:14,710 --> 01:12:15,321\n>> Mm-hm.\n>> And\n\n1561\n01:12:15,321 --> 01:12:18,520\nyou might ask yourself why\nwould you wanna go 30 minutes?\n\n1562\n01:12:18,520 --> 01:12:19,636\nWhy would you wanna go longer?\n\n1563\n01:12:19,636 --> 01:12:21,240\nWouldn't you wanna go the shortest, but\n\n1564\n01:12:21,240 --> 01:12:23,470\nthere's two main reasons you\nmight want to go longer.\n\n1565\n01:12:23,470 --> 01:12:25,470\nReason number one is simply performance.\n\n1566\n01:12:25,470 --> 01:12:27,510\nThe more frequently you replicate,\n\n1567\n01:12:27,510 --> 01:12:31,520\nthe more traffic you're sending over your\nWAN link and if it's going over WAN link,\n\n1568\n01:12:31,520 --> 01:12:36,820\nnormally might be this on your LAN so\nthe one is at performance.\n\n1569\n01:12:36,820 --> 01:12:40,570\nThe other reason is sometimes\nit's nice to have a delay,\n\n1570\n01:12:40,570 --> 01:12:43,500\nthat way if something bad\nhappens in production,\n\n1571\n01:12:43,500 --> 01:12:48,710\nnot only is the server offline, maybe the\nserver gets infected with a virus, right?\n\n1572\n01:12:48,710 --> 01:12:53,150\nIf you're on a 30 minute delay then\nyou've got 30 minutes to take that server\n\n1573\n01:12:53,150 --> 01:12:57,200\noffline and bail over the the other\none and run from the other server,\n\n1574\n01:12:57,200 --> 01:12:59,380\nthe other replica,\ncuz it's 30 minutes behind.\n\n1575\n01:12:59,380 --> 01:13:03,470\nNow that means you lost 30 minutes of\ndata, but there was no restore time.\n\n1576\n01:13:03,470 --> 01:13:05,550\nIt was very quick for\nyou to flip right over.\n\n1577\n01:13:05,550 --> 01:13:08,710\nSo that may be an attractive option to\nyou in which case that longer delay\n\n1578\n01:13:08,710 --> 01:13:09,780\ntime may be better.\n\n1579\n01:13:09,780 --> 01:13:11,020\nNot saying that's right for everybody,\n\n1580\n01:13:11,020 --> 01:13:13,920\njust saying that in some scenarios\nthat works out well enough.\n\n1581\n01:13:13,920 --> 01:13:17,900\nSo if you wanna see those options,\nthat's where you need the R2 lab.\n\n1582\n01:13:17,900 --> 01:13:21,650\nAnd this one is not going to\nbe the best one for that,\n\n1583\n01:13:21,650 --> 01:13:23,330\nbut take advantage of both of them.\n\n1584\n01:13:23,330 --> 01:13:24,320\nThey're completely free.\n\n1585\n01:13:24,320 --> 01:13:25,540\nIt's a great resource.\n\n1586\n01:13:25,540 --> 01:13:26,100\n>> They're fun to do.\n\n1587\n01:13:26,100 --> 01:13:29,110\n>> But you'll see this one\nis even flagged as hot.\n\n1588\n01:13:29,110 --> 01:13:30,540\nIt's a hot lab.\n\n1589\n01:13:30,540 --> 01:13:31,750\nA lot of people work in this one.\n\n1590\n01:13:31,750 --> 01:13:35,480\nCuz it does do failover clustering\nas well as the replication.\n\n1591\n01:13:36,560 --> 01:13:40,930\nJust on a high level though,\nsetting it up is really pretty easy.\n\n1592\n01:13:40,930 --> 01:13:45,230\nWhat you do is you go into\nyour Hyper-V manager and\n\n1593\n01:13:45,230 --> 01:13:48,250\nyou just find your virtual machine\nthat you wanna set a replica up for.\n\n1594\n01:13:48,250 --> 01:13:51,830\nSo maybe I wanna do Web 01, and it's\ngonna be mad at me cuz I'm on a cluster.\n\n1595\n01:13:51,830 --> 01:13:52,420\n>> Yeah, yeah.\n\n1596\n01:13:52,420 --> 01:13:54,960\n>> But you right-click on it and\nyou'll see Enable Replication.\n\n1597\n01:13:54,960 --> 01:13:58,000\nAnd then there's just a little wizard that\nyou walk through where you set it up, and\n\n1598\n01:13:58,000 --> 01:14:00,120\nyou'll see Specify the Replica Server.\n\n1599\n01:14:00,120 --> 01:14:01,880\nWho you wanna send the copy to,\n\n1600\n01:14:01,880 --> 01:14:06,500\nany connection parameters you have,\nwhich virtual hard drives are replicating\n\n1601\n01:14:06,500 --> 01:14:10,460\nbecause you might have some VHDs that\naren't necessary to send across.\n\n1602\n01:14:10,460 --> 01:14:13,462\nYou can set up that replication\nfrequency that Mike mentioned,\n\n1603\n01:14:13,462 --> 01:14:18,725\nyou can do any other recovery points\nif you want to set recovery points or\n\n1604\n01:14:18,725 --> 01:14:21,055\ntime snapshots you can revert back to.\n\n1605\n01:14:21,055 --> 01:14:24,135\nAnd then how you want to\ndo the initial replication.\n\n1606\n01:14:24,135 --> 01:14:26,985\nMike mentioned that it does it\nover the network by default.\n\n1607\n01:14:26,985 --> 01:14:28,167\nThat's great if you're on a LAN.\n\n1608\n01:14:28,167 --> 01:14:30,065\nBut on a WAN link that might be bad.\n\n1609\n01:14:30,065 --> 01:14:33,950\nAnd so you can kind of\npre-stage the replica where\n\n1610\n01:14:33,950 --> 01:14:35,500\nyou copy it over to the other side and\n\n1611\n01:14:35,500 --> 01:14:38,870\nit's just out of date and then in that\ncase, it just needs to get caught up.\n\n1612\n01:14:38,870 --> 01:14:40,660\nSo you'll see those options\nas you go through the wizard.\n\n1613\n01:14:40,660 --> 01:14:42,470\nI'm pretty sure it's not\ngoing to let me do this but\n\n1614\n01:14:42,470 --> 01:14:45,405\nlet's just see if it'll let me.\n\n1615\n01:14:45,405 --> 01:14:47,950\n>> [LAUGH] Yeah, right, set it up.\n\n1616\n01:14:47,950 --> 01:14:49,720\nReplicating on the cluster itself.\n\n1617\n01:14:49,720 --> 01:14:52,830\n>> Yeah, I don't think it's gonna let\nme do it, but we'll give it a shot.\n\n1618\n01:14:52,830 --> 01:14:57,420\nActually, didn't we bring up Hyper-V\non the domain controller, didn't we?\n\n1619\n01:14:57,420 --> 01:14:58,986\nWhich I know is another great practice.\n\n1620\n01:14:58,986 --> 01:15:02,610\n>> [LAUGH] Oh, you do have to, yeah.\n\n1621\n01:15:02,610 --> 01:15:05,400\n>> I'm at a cluster, so\nI need a replica broker.\n\n1622\n01:15:05,400 --> 01:15:09,750\nSo yeah, when you're on a cluster\nyou have some extra concerns there.\n\n1623\n01:15:09,750 --> 01:15:10,540\nJust be aware of that.\n\n1624\n01:15:10,540 --> 01:15:11,830\nIt's really cool.\n\n1625\n01:15:11,830 --> 01:15:16,240\nThe best use for it,\nis if you're a small business or\n\n1626\n01:15:16,240 --> 01:15:19,830\na medium-size business, and you don't\nwanna invest in the shared storage and\n\n1627\n01:15:19,830 --> 01:15:23,760\nthe high-end hardware cost,\nyou can do Hyper-V replicas like this.\n\n1628\n01:15:23,760 --> 01:15:24,910\nIt's low cost.\n\n1629\n01:15:24,910 --> 01:15:27,380\nIt works great between\nbetween geographical areas.\n\n1630\n01:15:27,380 --> 01:15:29,890\nIt's also nice if you\nwanna set up a staging or\n\n1631\n01:15:29,890 --> 01:15:34,060\na test environment that you can have\na replica that's something over somewhere.\n\n1632\n01:15:34,060 --> 01:15:38,000\nAnd maybe you run your backups against the\nreplica instead of running your backups\n\n1633\n01:15:38,000 --> 01:15:40,470\nagainst the production server for\nperformance reasons.\n\n1634\n01:15:40,470 --> 01:15:43,040\nAll sorts of benefits, for\ndoing something like this.\n\n1635\n01:15:43,040 --> 01:15:46,560\n>> And something else they've given us the\nability to do with the Hyper-V replica,\n\n1636\n01:15:46,560 --> 01:15:48,200\nyou know, we can have two copies,\nbasically.\n\n1637\n01:15:48,200 --> 01:15:52,250\nGot the primary and the alternate, and\nyou might be doing it between sites, or\n\n1638\n01:15:52,250 --> 01:15:56,450\nyou might be doing, as Donald was saying,\nit in one location, for fault tolerance.\n\n1639\n01:15:56,450 --> 01:15:59,290\nBut I would still like to have\nan offsite copy of that somewhere.\n\n1640\n01:15:59,290 --> 01:16:03,360\nAnd that's where we get into the Hyper-V\nreplica extended replication.\n\n1641\n01:16:03,360 --> 01:16:04,840\nWe can actually go, it's kind of twisted,\n\n1642\n01:16:04,840 --> 01:16:09,810\nwe go from the primary site,\nreplicate that out to your replica site or\n\n1643\n01:16:09,810 --> 01:16:13,870\nyour secondary site and then we can go\nto that secondary Hyper-V server, and\n\n1644\n01:16:13,870 --> 01:16:17,120\nwe can go in and launch the wizard\nagain and do the extended replication.\n\n1645\n01:16:17,120 --> 01:16:20,600\nWe're replicating that to a completely\ndifferent site or a different server.\n\n1646\n01:16:20,600 --> 01:16:23,725\nSo you might have two Hyper-V\nservers in your one location.\n\n1647\n01:16:23,725 --> 01:16:26,095\n>> Mm-hm.\n>> And you're replicating that for\n\n1648\n01:16:26,095 --> 01:16:29,010\nfault tolerance reasons cuz you don't\nhave the money for a cluster and\n\n1649\n01:16:29,010 --> 01:16:33,710\nthen replicating that replica to\nanother location for an offsite,\n\n1650\n01:16:33,710 --> 01:16:36,600\nin case we have our disaster\nrecovery type scenarios.\n\n1651\n01:16:36,600 --> 01:16:38,510\nOr it could be back to a corporate office.\n\n1652\n01:16:38,510 --> 01:16:39,920\nSo if something happens to the branch,\n\n1653\n01:16:39,920 --> 01:16:43,320\nthe corporate has a copy of those virtual\nhard drives or something like that.\n\n1654\n01:16:43,320 --> 01:16:46,460\nSo that's the Hyper-V replica,\nextended replication.\n\n1655\n01:16:46,460 --> 01:16:48,350\nLet's just take it out one more notch.\n\n1656\n01:16:48,350 --> 01:16:51,520\n>> I've seen that used to great success\nin scenarios like you described,\n\n1657\n01:16:51,520 --> 01:16:56,990\nwhere at your home office, maybe you have\ntwo servers that are on the same LAN.\n\n1658\n01:16:56,990 --> 01:16:59,260\nNice, good speed connection between them.\n\n1659\n01:16:59,260 --> 01:17:02,330\nSo you set up a replica, and you set\nit to the lowest interval possible,\n\n1660\n01:17:02,330 --> 01:17:03,260\nevery five minutes.\n\n1661\n01:17:03,260 --> 01:17:04,060\nAll right.\n\n1662\n01:17:04,060 --> 01:17:07,120\nBut then you take that second server,\nthe one that's not in production,\n\n1663\n01:17:07,120 --> 01:17:10,410\nthe one that's not actually being hit by\nyour users and you take that second server\n\n1664\n01:17:10,410 --> 01:17:14,920\nand you set it to replicate with your\nremote site and you maybe lower it to\n\n1665\n01:17:14,920 --> 01:17:19,650\nevery 30 minutes so now it's a little\nless burden on the wide area network.\n\n1666\n01:17:19,650 --> 01:17:23,190\nIf you have a server failure at your\nproduction environment, Server 1 goes\n\n1667\n01:17:23,190 --> 01:17:27,850\ndown, Server 2 can take over and it'll be\nwithin five minutes of where Server 1 was.\n\n1668\n01:17:27,850 --> 01:17:30,900\nAnd then if Server 2 fails or\nif the entire facility fails,\n\n1669\n01:17:30,900 --> 01:17:34,200\nyou jump over to Server 3\nin the other location and,\n\n1670\n01:17:34,200 --> 01:17:37,350\nmaybe you lose 30 minutes, but\nat least you're up and you're running.\n\n1671\n01:17:37,350 --> 01:17:38,350\nSo very cool.\n\n1672\n01:17:38,350 --> 01:17:40,450\nAnd doesn't require cluster hardware.\n\n1673\n01:17:40,450 --> 01:17:42,140\nThat's probably the best part of it.\n\n1674\n01:17:42,140 --> 01:17:45,330\n>> Exactly.\n>> I will say this, unlike clustering,\n\n1675\n01:17:45,330 --> 01:17:47,930\nthough, it's not a live failover.\n\n1676\n01:17:47,930 --> 01:17:49,880\nIt's really focused on the storage, so\n\n1677\n01:17:49,880 --> 01:17:53,750\nwhen you have failover with Hyper-V\nreplicas, there is downtime.\n\n1678\n01:17:53,750 --> 01:17:56,750\nSo people's sessions will be\ninterrupted while it reboots and\n\n1679\n01:17:56,750 --> 01:17:58,670\nboots up the replica and\ngets things healthy.\n\n1680\n01:17:58,670 --> 01:18:01,300\nThe replica is actually down\nwhile it's synchronizing just\n\n1681\n01:18:01,300 --> 01:18:02,690\nkeep the drives up to date.\n\n1682\n01:18:02,690 --> 01:18:05,060\nSo, that is a bit of a negative.\n\n1683\n01:18:05,060 --> 01:18:09,930\nIf you're looking for high availability,\nclustering's the solution.\n\n1684\n01:18:09,930 --> 01:18:12,770\nBut if you're just looking\ndisaster recovery, right?\n\n1685\n01:18:12,770 --> 01:18:16,920\nOr redundancy, then Hyper-V\nreplicas work out really well.\n\n1686\n01:18:17,950 --> 01:18:19,790\nAll right.\nOn a similar note,\n\n1687\n01:18:19,790 --> 01:18:24,080\nwe can really talk about\nmulti-site clusters.\n\n1688\n01:18:24,080 --> 01:18:25,000\n>> Right\n>> Right?\n\n1689\n01:18:25,000 --> 01:18:28,720\nThe cluster we set up on the show the\nother day was really just a local cluster,\n\n1690\n01:18:28,720 --> 01:18:30,640\nand that's what you normally do.\n\n1691\n01:18:30,640 --> 01:18:33,140\nClusters require shared storage.\n\n1692\n01:18:33,140 --> 01:18:36,940\nSo that means that you have some\nkind of SAN or an array like that.\n\n1693\n01:18:36,940 --> 01:18:39,940\nAnd each node of your\ncluster is connected to it.\n\n1694\n01:18:39,940 --> 01:18:40,515\nAll right?\n\n1695\n01:18:40,515 --> 01:18:41,240\n>> Mm-hm.\n>> So\n\n1696\n01:18:41,240 --> 01:18:43,470\nwe set that up in the show the other day.\n\n1697\n01:18:43,470 --> 01:18:48,770\nAnd let me just kinda bring up\na drawing that I made and here.\n\n1698\n01:18:48,770 --> 01:18:49,950\nSo if we take a look.\n\n1699\n01:18:49,950 --> 01:18:52,470\nAnd let's say over here on the left\nthat this is my home office.\n\n1700\n01:18:52,470 --> 01:18:53,450\n>> Right.\n>> Okay?\n\n1701\n01:18:53,450 --> 01:18:56,390\nAnd at my home office,\nI've got a SAN, right?\n\n1702\n01:18:56,390 --> 01:19:00,330\nAnd it's connected to these two servers,\nNode 1 and Node 2 of my cluster.\n\n1703\n01:19:00,330 --> 01:19:02,475\nSo there's my cluster,\nand it's happy, right?\n\n1704\n01:19:02,475 --> 01:19:03,100\n>> Mm-hm.\n\n1705\n01:19:03,100 --> 01:19:06,580\n>> A virtual machine could bounce\nbetween these, or a SQL database,\n\n1706\n01:19:06,580 --> 01:19:08,570\nwhatever it is that I've got clustered.\n\n1707\n01:19:08,570 --> 01:19:11,660\nAnd their data is on the shared storage,\nso\n\n1708\n01:19:11,660 --> 01:19:14,230\nI don't have to replicate\nstorage between these two guys,\n\n1709\n01:19:14,230 --> 01:19:18,482\nthe VM can fail between them, and\nthe storage is still there and it's happy.\n\n1710\n01:19:18,482 --> 01:19:22,140\nAll right, but I decide,\nman, I want big redundancy.\n\n1711\n01:19:22,140 --> 01:19:25,710\n>> Yeah.\n>> I want to extend my cluster.\n\n1712\n01:19:25,710 --> 01:19:29,780\nSo that some of the cluster nodes are in\na different geographical location.\n\n1713\n01:19:29,780 --> 01:19:33,080\nSo Node 3 and Node 4,\nI might want them in a different building,\n\n1714\n01:19:33,080 --> 01:19:35,380\na different subnet, different city.\n\n1715\n01:19:35,380 --> 01:19:36,350\nRight?\n\n1716\n01:19:36,350 --> 01:19:39,210\nWell, the biggest problem here is that\n\n1717\n01:19:39,210 --> 01:19:44,010\nI don't have a good way to attach\nthese nodes to the same storage.\n\n1718\n01:19:44,010 --> 01:19:44,620\nRight?\n\n1719\n01:19:44,620 --> 01:19:48,560\nIf this were an iSCSI SAN I could do it,\nbut performance would be in the gutter.\n\n1720\n01:19:48,560 --> 01:19:49,180\nRight?\n\n1721\n01:19:49,180 --> 01:19:54,140\nEven fiber channel, remember I mentioned\nIFC, or Internet fiber channel.\n\n1722\n01:19:54,140 --> 01:19:56,870\nWhere you send your fiber channel\ntraffic over a TCP IP network.\n\n1723\n01:19:56,870 --> 01:19:59,620\nIt's performance is in the gutter,\nno matter how much bandwidth you have.\n\n1724\n01:19:59,620 --> 01:20:03,429\n>> Right.\n>> So, you really can't, realistically,\n\n1725\n01:20:03,429 --> 01:20:09,290\nhave remote nodes in a cluster All right,\nbut there is a solution.\n\n1726\n01:20:09,290 --> 01:20:14,702\nAnd the solution is to do a multi-site\ncluster, where we deploy a second SAN,\n\n1727\n01:20:14,702 --> 01:20:21,140\nanother storage area network, and we have\nthese nodes connect directly to that SAN.\n\n1728\n01:20:21,140 --> 01:20:22,100\nAll right?\n\n1729\n01:20:22,100 --> 01:20:25,900\nThen, here's where things start\nto get a little fuzzy, and\n\n1730\n01:20:25,900 --> 01:20:31,400\nit's important,\nwe need to replicate the SANs.\n\n1731\n01:20:31,400 --> 01:20:36,358\nThis storage here needs to be identical,\nor as near identical as possible,\n\n1732\n01:20:36,358 --> 01:20:38,535\nover here in the other location.\n\n1733\n01:20:38,535 --> 01:20:46,104\nNow, if we have a SAN like this, most\nstorage area network vendors like EMC and\n\n1734\n01:20:46,104 --> 01:20:51,037\nHP, those guys,\nthey have replication suites and\n\n1735\n01:20:51,037 --> 01:20:55,020\ntechnologies built into their SAN.\n\n1736\n01:20:55,020 --> 01:20:59,110\nAnd I'll tell you guys,\nit's almost always an extra license.\n\n1737\n01:20:59,110 --> 01:21:01,840\nSo you just dropped $40,000 on a SAN.\n\n1738\n01:21:01,840 --> 01:21:05,490\nBe ready for another 12,000 for\nthat replica license or\n\n1739\n01:21:05,490 --> 01:21:07,630\nwhatever it is that they charge.\n\n1740\n01:21:07,630 --> 01:21:12,630\nIn fact, the only high end SAN vendor\nthat I know of that ever included it was\n\n1741\n01:21:12,630 --> 01:21:14,850\nEqualLogic, which is now Dell.\n\n1742\n01:21:14,850 --> 01:21:18,970\nSo they used to always include it,\nbut EMC and the other guys,\n\n1743\n01:21:18,970 --> 01:21:21,620\nthey always charged a little extra for\nthat license.\n\n1744\n01:21:21,620 --> 01:21:26,490\nAnd what it does is it lets you\nset up replication between your\n\n1745\n01:21:26,490 --> 01:21:31,760\ntwo SANs so that as you write data to one,\n\n1746\n01:21:31,760 --> 01:21:35,520\nit's automatically sending a copy\nof that data to the other one.\n\n1747\n01:21:35,520 --> 01:21:38,150\nData is being replicated back and forth.\n\n1748\n01:21:38,150 --> 01:21:42,870\nSo our nodes, our cluster,\ndoesn't to know anything about that.\n\n1749\n01:21:42,870 --> 01:21:46,180\nIt's completely independent of Windows.\n\n1750\n01:21:46,180 --> 01:21:47,055\n>> That's a good point,\n\n1751\n01:21:47,055 --> 01:21:51,430\ncuz there is nothing built in to Microsoft\nclustering that will replicate that data.\n\n1752\n01:21:51,430 --> 01:21:54,020\nWe have to use some kind\nof third party utility.\n\n1753\n01:21:54,020 --> 01:21:57,385\n>> The closest is the Microsoft SyncToy,\nwhich is a piece of garbage.\n\n1754\n01:21:57,385 --> 01:21:58,326\n>> [LAUGH]\n>> [LAUGH]\n\n1755\n01:21:58,326 --> 01:21:59,903\n>> You're gonna call it a toy,\n\n1756\n01:21:59,903 --> 01:22:01,100\nyou know it's not.\n\n1757\n01:22:01,100 --> 01:22:04,368\n>> Yeah, that whole sync framework\nthat they have is not good.\n\n1758\n01:22:04,368 --> 01:22:08,960\nSo these vendors, EMC,\nI've worked with theirs personally.\n\n1759\n01:22:08,960 --> 01:22:10,710\nAnd theirs is top notch.\n\n1760\n01:22:10,710 --> 01:22:12,630\nAnd it does use IFC.\n\n1761\n01:22:12,630 --> 01:22:16,120\nSo it is sending fiber channel\ncommunications over a TCP/IP network.\n\n1762\n01:22:16,120 --> 01:22:21,540\nBut it allows you to replicate the entire\nSAN, whatever you write to it is all being\n\n1763\n01:22:21,540 --> 01:22:28,040\nreplicated to another SAN somewhere else,\nso the two SANs are effectively identical.\n\n1764\n01:22:28,040 --> 01:22:28,700\nAll right.\n\n1765\n01:22:28,700 --> 01:22:31,234\nSo then, I can build a cluster, and\n\n1766\n01:22:31,234 --> 01:22:36,993\neven though these nodes are attached to\ndifferent SANs, they don't know that.\n\n1767\n01:22:36,993 --> 01:22:39,078\nThey think they're\nattached to the same one,\n\n1768\n01:22:39,078 --> 01:22:42,780\nbecause when these guys look at SAN number\none, they see a certain set of volumes.\n\n1769\n01:22:42,780 --> 01:22:47,420\nWhen these guys look at SAN number two,\nthey see the same exact set of volumes.\n\n1770\n01:22:47,420 --> 01:22:49,730\nThey think they're\nlooking at the same SAN.\n\n1771\n01:22:51,170 --> 01:22:54,826\nSo when that's done,\nwe're pretty much golden, right?\n\n1772\n01:22:54,826 --> 01:22:57,995\nAfter that, we really just set up the SAN\nto run like we would normally expect,\n\n1773\n01:22:57,995 --> 01:22:58,930\nand off we go.\n\n1774\n01:22:58,930 --> 01:22:59,910\nAll right.\n\n1775\n01:22:59,910 --> 01:23:03,010\nNow, one thing we do need to be aware of,\nthough,\n\n1776\n01:23:03,010 --> 01:23:08,490\nbecause the nodes don't realize that\nthey're looking at different SANs,\n\n1777\n01:23:08,490 --> 01:23:11,560\nthe nodes are all gonna\ntreat themselves equally.\n\n1778\n01:23:11,560 --> 01:23:14,470\nSo let's say this is a Hyper-V cluster.\n\n1779\n01:23:14,470 --> 01:23:19,410\nAnd so I've got a VM here on Node 1,\nand Node 1 fails.\n\n1780\n01:23:19,410 --> 01:23:26,410\nThat VM could then jump to Node 2,\ncould jump to Node 3 or Node 4.\n\n1781\n01:23:26,410 --> 01:23:28,250\nWe might not want that.\n\n1782\n01:23:28,250 --> 01:23:33,450\nAnd so if we're gonna do\na multi-site cluster like this,\n\n1783\n01:23:33,450 --> 01:23:37,060\nit is important that we put\nsome preferences in there.\n\n1784\n01:23:37,060 --> 01:23:43,060\nAnd we say this VM prefers Node 1,\nand then Node 2 comes second,\n\n1785\n01:23:43,060 --> 01:23:47,170\nand after that, then you jump over\nto the other facility over here.\n\n1786\n01:23:47,170 --> 01:23:50,000\nCuz I don't want everybody at my home\noffice having to reach across the wide\n\n1787\n01:23:50,000 --> 01:23:51,860\narea network to get to that server.\n\n1788\n01:23:51,860 --> 01:23:52,610\nRight?\n\n1789\n01:23:52,610 --> 01:23:58,165\nNow, running plain old Hyper-V\nright on top of Windows Server\n\n1790\n01:23:58,165 --> 01:24:02,740\n2012, it doesn't give you a whole\nheck of a lot for setting preference.\n\n1791\n01:24:02,740 --> 01:24:06,660\nYou can set a startup server, so you can\ndictate which server you want it to start\n\n1792\n01:24:06,660 --> 01:24:09,750\nup on, and then after that it doesn't\ngive you a whole lot of control.\n\n1793\n01:24:09,750 --> 01:24:13,500\nBut if you use\nthe System Center Virtual Machine Manager,\n\n1794\n01:24:13,500 --> 01:24:16,620\nthe SCVMM,\nIt does give you a lot of control.\n\n1795\n01:24:16,620 --> 01:24:18,830\nAnd you can set preferences and\nrank the servers and\n\n1796\n01:24:18,830 --> 01:24:21,790\nstuff, and\nkinda set where you'd prefer them to go\n\n1797\n01:24:21,790 --> 01:24:27,120\nto make sure that they stay in the home\noffice unless the home office fails.\n\n1798\n01:24:27,120 --> 01:24:30,000\nIn which case then we jump\nover to the other side.\n\n1799\n01:24:30,000 --> 01:24:34,190\nSo that's definitely something we need\nto be aware of with a multi-site SAN.\n\n1800\n01:24:35,730 --> 01:24:38,230\nThere's also another thing to be aware of.\n\n1801\n01:24:38,230 --> 01:24:39,140\nIP addresses.\n\n1802\n01:24:40,430 --> 01:24:45,145\nRemember, that when we build a cluster,\nevery clustered resource has a virtual\n\n1803\n01:24:45,145 --> 01:24:49,390\nIP address, and that virtual IP address\nhas to be in a particular subnet.\n\n1804\n01:24:49,390 --> 01:24:53,790\nNow, subnets are typically\nin one geographic location.\n\n1805\n01:24:53,790 --> 01:24:59,317\nBut if I have a virtual machine here,\nwith an IP of 192.168.0.100,\n\n1806\n01:24:59,317 --> 01:25:04,701\nwhen it fails over to this side,\nit's gonna be 192.168.0.100.\n\n1807\n01:25:04,701 --> 01:25:05,868\nIt's gonna be the same thing.\n\n1808\n01:25:05,868 --> 01:25:06,493\nAll right?\n\n1809\n01:25:06,493 --> 01:25:09,825\nSo we've got two choices\nhow we want to handle this.\n\n1810\n01:25:09,825 --> 01:25:13,455\nOne, we could set our servers up for\nDHCP, right, that's gonna happen.\n\n1811\n01:25:13,455 --> 01:25:15,085\nSo that's not gonna happen.\n\n1812\n01:25:15,085 --> 01:25:15,920\n>> Nope.\n\n1813\n01:25:15,920 --> 01:25:24,230\n>> Or two, we make plans to have the same\nsubnet present in two different networks.\n\n1814\n01:25:24,230 --> 01:25:26,410\nAnd there's a few ways to go about that.\n\n1815\n01:25:26,410 --> 01:25:31,466\nIf you're using a dynamic routing\nprotocol like OSPF or BGP,\n\n1816\n01:25:31,466 --> 01:25:37,701\nyou can use those routing protocols to\ndirect people to the traffic source.\n\n1817\n01:25:37,701 --> 01:25:42,680\nSo you can say 192.168.0.0/24 is here.\n\n1818\n01:25:42,680 --> 01:25:47,500\nBut then when a failure happens,\nit'll redirect everybody over to here,\n\n1819\n01:25:47,500 --> 01:25:49,590\nexpecting that network to now\nbe in the other location.\n\n1820\n01:25:50,690 --> 01:25:54,680\nThe problem with that is,\nwhat if it's not a full failure?\n\n1821\n01:25:54,680 --> 01:25:58,145\nWhat if some of the machines for\n\n1822\n01:25:58,145 --> 01:26:02,740\n192.168.1.0 are over here and others\nare over here in this other building?\n\n1823\n01:26:02,740 --> 01:26:05,950\nIn that scenario, a dynamic routing\nprotocol's not going to help you.\n\n1824\n01:26:05,950 --> 01:26:10,340\nWhat you're going to need is\nsome kind of a layer 2 tunnel\n\n1825\n01:26:10,340 --> 01:26:16,010\nbetween these two locations, so\nthat the subnet can exist in both places.\n\n1826\n01:26:16,010 --> 01:26:17,940\nA lot of times,\nyour storage area networks,\n\n1827\n01:26:17,940 --> 01:26:20,940\ntheir replication software will\ninclude that functionality.\n\n1828\n01:26:20,940 --> 01:26:22,760\nBut even if they don't,\nyou can build up your own.\n\n1829\n01:26:22,760 --> 01:26:24,440\nYou can do GRE tunnels,\n\n1830\n01:26:24,440 --> 01:26:29,870\ngeneric routing encapsulation tunnels,\nyou can do layer 2 tunneling.\n\n1831\n01:26:29,870 --> 01:26:33,450\nThere's a couple of different\nprotocols that are available for that.\n\n1832\n01:26:33,450 --> 01:26:37,250\nIf you're running IPv6, though,\nyou can use IP mobility.\n\n1833\n01:26:37,250 --> 01:26:39,160\nAnd then those machines will\nbe perfectly happy over there,\n\n1834\n01:26:39,160 --> 01:26:40,400\neven though they're in the wrong subnet,\n\n1835\n01:26:40,400 --> 01:26:43,950\nbecause IPv6 has the built-in\nfunctionality to support that.\n\n1836\n01:26:43,950 --> 01:26:47,860\nSo, if you've moved to IPv6,\nit's a much smaller problem.\n\n1837\n01:26:47,860 --> 01:26:52,090\nBut if you're in the IPv4 world, you've\ngot to build a tunnel of some sort so\n\n1838\n01:26:52,090 --> 01:26:57,710\nthat a broadcast over here on the 192.16.0\nnetwork gets forwarded to the other side,\n\n1839\n01:26:57,710 --> 01:26:59,380\nand layer 3 routing is not gonna do that,\nso\n\n1840\n01:26:59,380 --> 01:27:01,660\nit's got to be a layer\n2 tunnel of some sort.\n\n1841\n01:27:03,180 --> 01:27:05,410\nSo, those are some of the caveats.\n\n1842\n01:27:05,410 --> 01:27:06,900\nMicrosoft has some great articles.\n\n1843\n01:27:06,900 --> 01:27:10,000\nI pulled them up earlier, and\nI'll post these with the show notes.\n\n1844\n01:27:10,000 --> 01:27:14,190\nBut they've got some really neat stuff,\nlet me find it here,\n\n1845\n01:27:14,190 --> 01:27:15,910\nthat we can keep in mind.\n\n1846\n01:27:15,910 --> 01:27:18,470\nSo here they have an article\nthat's the requirements for\n\n1847\n01:27:18,470 --> 01:27:22,090\na multi-site failover cluster, so\nsome of the things we need to meet, and\n\n1848\n01:27:22,090 --> 01:27:26,370\nthis is actually one written for\nWindows Server 2008, but it holds true for\n\n1849\n01:27:26,370 --> 01:27:30,970\n2012 too, it's the same considerations,\nthey haven't updated that article.\n\n1850\n01:27:30,970 --> 01:27:34,650\nAlso, I snagged another article,\nwhere did it go?\n\n1851\n01:27:34,650 --> 01:27:39,260\nOh, this one,\ntalking about our heartbeat, okay?\n\n1852\n01:27:39,260 --> 01:27:40,590\n>> Hm, between the cluster nodes.\n\n1853\n01:27:40,590 --> 01:27:41,540\n>> Exactly.\n\n1854\n01:27:41,540 --> 01:27:44,820\nI mentioned that in the other episode,\nthat our nodes are talking to each\n\n1855\n01:27:44,820 --> 01:27:47,470\nother to make sure that they're up and\nthey're online.\n\n1856\n01:27:47,470 --> 01:27:51,833\nAnd that process assumes you're on a LAN,\non a local area network.\n\n1857\n01:27:51,833 --> 01:27:56,006\nWell, if you're crossing a wide area\nnetwork to get to the other side,\n\n1858\n01:27:56,006 --> 01:27:59,292\nthe delay might be long enough\nto break your heartbeat.\n\n1859\n01:27:59,292 --> 01:28:00,500\n>> Where you think something's failed.\n\n1860\n01:28:00,500 --> 01:28:01,250\n>> Mm-hm.\n\n1861\n01:28:01,250 --> 01:28:03,667\nSo we might need to manipulate that and\nchange it.\n\n1862\n01:28:03,667 --> 01:28:05,958\nAnd so I pulled this article\nthat just kind of describes it.\n\n1863\n01:28:05,958 --> 01:28:07,897\nI doubt you'll see this on the test, but\n\n1864\n01:28:07,897 --> 01:28:11,650\nin real life land this is something\nthat you really do have to deal with.\n\n1865\n01:28:11,650 --> 01:28:13,335\nAnd it's not hard to manipulate.\n\n1866\n01:28:13,335 --> 01:28:16,800\nYou'll see there's a bunch of command\nline utilities that we can use to\n\n1867\n01:28:16,800 --> 01:28:18,480\nrun to modify those values.\n\n1868\n01:28:18,480 --> 01:28:22,010\nAnd basically you just tweak it to\nincrease the heartbeat level to\n\n1869\n01:28:22,010 --> 01:28:22,930\nan acceptable level.\n\n1870\n01:28:22,930 --> 01:28:27,370\nNow, understand the bigger that interval,\nthe longer the amount of\n\n1871\n01:28:27,370 --> 01:28:31,100\ntime between heartbeats is, the longer\nit takes you to detect a failure.\n\n1872\n01:28:31,100 --> 01:28:33,170\n>> Right.\n>> So, when we did that failure earlier,\n\n1873\n01:28:33,170 --> 01:28:34,900\nwe lost, like what, two pings?\n\n1874\n01:28:34,900 --> 01:28:35,490\n>> Yeah, one or two.\n\n1875\n01:28:35,490 --> 01:28:36,560\nThat was it.\n\n1876\n01:28:36,560 --> 01:28:39,220\n>> So, for\nevery second that you increase it,\n\n1877\n01:28:39,220 --> 01:28:42,090\nthat's a bigger time\nto detect the failure.\n\n1878\n01:28:42,090 --> 01:28:43,500\nSo you don't wanna go too big.\n\n1879\n01:28:43,500 --> 01:28:45,660\nSo you do have to do a little tuning and\ntweaking.\n\n1880\n01:28:45,660 --> 01:28:46,840\nLook at your network.\n\n1881\n01:28:46,840 --> 01:28:50,240\nFigure out what you can get away with,\nwhat the latency is on the line and\n\n1882\n01:28:50,240 --> 01:28:50,980\ntweak it and adjust it.\n\n1883\n01:28:50,980 --> 01:28:56,115\nThere's no one size fits all on this one\nunless you don't care about down time.\n\n1884\n01:28:56,115 --> 01:28:57,230\n>> [LAUGH]\n>> And\n\n1885\n01:28:57,230 --> 01:29:00,330\nthen you wouldn't be doing\na cluster in the first place.\n\n1886\n01:29:00,330 --> 01:29:03,720\n>> So I'll post these, but\nthey've got some good stuff in there and\n\n1887\n01:29:03,720 --> 01:29:06,290\non this one they really do\nsome best practices for it.\n\n1888\n01:29:06,290 --> 01:29:07,470\nSome of the things to talk about.\n\n1889\n01:29:07,470 --> 01:29:10,350\nThey even cover some of\nthe things that are not Microsoft\n\n1890\n01:29:10,350 --> 01:29:14,850\nlike doing the multi-subnets\nversus a single-subnet and so on.\n\n1891\n01:29:14,850 --> 01:29:16,260\nSo really good article,\n\n1892\n01:29:16,260 --> 01:29:19,010\nreal informative if you're gonna\nbe doing this in real life.\n\n1893\n01:29:19,010 --> 01:29:20,590\nProbably overkill for what's on the exam.\n\n1894\n01:29:21,590 --> 01:29:23,390\nI also wanna post this.\n\n1895\n01:29:23,390 --> 01:29:26,970\nWhen I first started messing around\nwith the multi-site clustering,\n\n1896\n01:29:26,970 --> 01:29:28,810\nI watched this video right here.\n\n1897\n01:29:28,810 --> 01:29:32,630\nMicrosoft was doing these tech days\npromotions where they'd get out and\n\n1898\n01:29:32,630 --> 01:29:35,130\ndo these presentations and\npost them online.\n\n1899\n01:29:35,130 --> 01:29:38,980\nAnd this one is a great presentation where\nthey run through some of the new stuff\n\n1900\n01:29:38,980 --> 01:29:42,700\nin 2012, and how you can kind\nof build that multi-sit cluster.\n\n1901\n01:29:42,700 --> 01:29:44,590\nSome of the stuff you have to think about.\n\n1902\n01:29:44,590 --> 01:29:48,445\nSo again, if you wanna learn more about\nit, it's definitely a good video to catch.\n\n1903\n01:29:48,445 --> 01:29:50,625\nSo some neat stuff in there.\n\n1904\n01:29:50,625 --> 01:29:54,615\nHe specifically talks about\nHyper V in a multi-site cluster.\n\n1905\n01:29:54,615 --> 01:29:57,935\nSo, another good one to see, and\nI'll post that with the show notes too.\n\n1906\n01:29:59,005 --> 01:30:00,895\nYou know, Mike,\nI'm forgetting something here.\n\n1907\n01:30:00,895 --> 01:30:02,595\n>> Global Update Manager\nwe wanna talk about.\n\n1908\n01:30:02,595 --> 01:30:03,125\n>> That is it.\n\n1909\n01:30:03,125 --> 01:30:03,640\n>> Yep.\n\n1910\n01:30:03,640 --> 01:30:04,690\nAll right, so\n\n1911\n01:30:04,690 --> 01:30:08,600\nwe do have another consideration when\nit comes to multi-site clusters.\n\n1912\n01:30:08,600 --> 01:30:09,570\nLet me go back to my diagram.\n\n1913\n01:30:10,840 --> 01:30:11,340\nAll right.\n\n1914\n01:30:12,560 --> 01:30:17,440\nWhen we have a cluster with\nan even amount of nodes,\n\n1915\n01:30:17,440 --> 01:30:21,450\nwe need a tie-breaker for\nwhen there's a disconnect, right?\n\n1916\n01:30:22,880 --> 01:30:27,480\nNormally, we can use a Storage based,\nshared storage, witness right,\n\n1917\n01:30:27,480 --> 01:30:29,130\nwhere we actually use our SAN.\n\n1918\n01:30:29,130 --> 01:30:30,010\nDisk witness.\n\n1919\n01:30:30,010 --> 01:30:31,270\nYes, thanks Mike.\n\n1920\n01:30:31,270 --> 01:30:34,040\nSo, we normally use that\none as the witness.\n\n1921\n01:30:34,040 --> 01:30:39,000\nWhen you have multiple SANs involved,\nyou cannot use a disk witness.\n\n1922\n01:30:39,000 --> 01:30:42,247\nAnd the reason is,\nif our WAN link goes down,\n\n1923\n01:30:42,247 --> 01:30:45,073\nthese guys can see their SAN just fine.\n\n1924\n01:30:45,073 --> 01:30:47,630\nThese guys can see their SAN just fine.\n\n1925\n01:30:47,630 --> 01:30:50,568\nAnd that means they're both gonna\nthink that they're healthy and\n\n1926\n01:30:50,568 --> 01:30:53,180\nthat the other guy is down and\nthey're both gonna try and go active.\n\n1927\n01:30:53,180 --> 01:30:54,554\nAnd that's not what you want.\n\n1928\n01:30:54,554 --> 01:31:01,330\nSo in a multi-location cluster,\nyou can't trust the SAN.\n\n1929\n01:31:01,330 --> 01:31:05,570\nEven though that's where your\nsuper sensitive data is,\n\n1930\n01:31:05,570 --> 01:31:07,900\nyou just can't trust it as a tie-breaker,\ncuz there's two of them.\n\n1931\n01:31:07,900 --> 01:31:12,910\nIt would be like them getting two votes,\nand now you're still at an even number,\n\n1932\n01:31:12,910 --> 01:31:14,480\nso it's pointless.\n\n1933\n01:31:14,480 --> 01:31:17,380\nSo in a multi-site cluster like this, it's\n\n1934\n01:31:17,380 --> 01:31:21,480\nreally important that we use a file share\nwitness, which is what I stuck down here.\n\n1935\n01:31:21,480 --> 01:31:22,290\nOkay?\n\n1936\n01:31:22,290 --> 01:31:23,959\nWell here's the problem with\nthe file share witness.\n\n1937\n01:31:24,960 --> 01:31:27,860\nIf I stick it over here,\nI've got my tie breaker.\n\n1938\n01:31:27,860 --> 01:31:28,573\nRight?\n\n1939\n01:31:28,573 --> 01:31:29,900\n>> For one side. [LAUGH] >> For one side.\n\n1940\n01:31:31,520 --> 01:31:36,220\nAnd if the home office fails and SAN 2 is\nall that's left, I got a tie right here\n\n1941\n01:31:36,220 --> 01:31:38,990\nbetween these two guys and\nI can't see the file share witness.\n\n1942\n01:31:38,990 --> 01:31:42,290\nSo I assume that I'm the problem,\nnot that they're the problem,\n\n1943\n01:31:42,290 --> 01:31:43,590\ncuz I can't see the witness.\n\n1944\n01:31:43,590 --> 01:31:44,310\nAll right.\n\n1945\n01:31:44,310 --> 01:31:46,040\nThe same thing is true in\nthe opposite direction.\n\n1946\n01:31:46,040 --> 01:31:48,830\nIf we stick it over here, same problem.\n\n1947\n01:31:48,830 --> 01:31:52,070\nThe home office,\nif the DR site completely goes out,\n\n1948\n01:31:52,070 --> 01:31:54,390\nthe home office loses\na connection to the witness.\n\n1949\n01:31:54,390 --> 01:31:58,030\n>> And so it assumes that it's the problem\nand the VMs don't come active.\n\n1950\n01:31:58,030 --> 01:31:59,750\nNow You can go always go and\nforce them active.\n\n1951\n01:31:59,750 --> 01:32:01,890\nIt's not that big of a deal, right?\n\n1952\n01:32:01,890 --> 01:32:04,830\nBut if you're trying to get\nhigh availability with as\n\n1953\n01:32:04,830 --> 01:32:08,460\nlittle downtime as possible,\nyou don't want anything to be manual.\n\n1954\n01:32:08,460 --> 01:32:13,190\nAnd so in a multi-site cluster,\nit's important that not\n\n1955\n01:32:13,190 --> 01:32:18,550\nonly you use a file share witness, but\nthat it be located in a third site.\n\n1956\n01:32:18,550 --> 01:32:19,270\nOkay?\n\n1957\n01:32:19,270 --> 01:32:23,140\nIt has to be in a third location,\nsomewhere else.\n\n1958\n01:32:23,140 --> 01:32:27,270\nSo if we bring into this\nlittle model here, and\n\n1959\n01:32:27,270 --> 01:32:29,790\nyou know I didn't really leave\nmyself enough room for this.\n\n1960\n01:32:29,790 --> 01:32:32,140\n>> It could be a little tiny\nsite down at the bottom.\n\n1961\n01:32:32,140 --> 01:32:35,880\n>> Yeah, so maybe we contract with\nsomebody or we talk to our ISP,\n\n1962\n01:32:35,880 --> 01:32:38,590\nand we say hey,\ncan we co-locate a server there?\n\n1963\n01:32:38,590 --> 01:32:40,850\nMaybe we use a Windows Azure instance,\nright?\n\n1964\n01:32:40,850 --> 01:32:43,279\n>> Yeah.\nOr Amazon EC.\n\n1965\n01:32:43,279 --> 01:32:46,466\nOh no that's right, EC2,\nElastic Compute Club.\n\n1966\n01:32:46,466 --> 01:32:49,752\nSo we bring up some instance out there.\n\n1967\n01:32:49,752 --> 01:32:51,865\n>> Cuz this is just real low,\nit's just file share, that's it.\n\n1968\n01:32:51,865 --> 01:32:52,948\n>> Yeah, that's all we need.\n\n1969\n01:32:52,948 --> 01:32:57,844\n>> And we bring up a third location\ninto our mix, and when we do that,\n\n1970\n01:32:57,844 --> 01:33:02,652\nnow we can have both sides connected\nto this other location, and\n\n1971\n01:33:02,652 --> 01:33:04,660\nthey can communicate.\n\n1972\n01:33:04,660 --> 01:33:08,270\nAnd then we just put our file\nshare witness out there.\n\n1973\n01:33:08,270 --> 01:33:13,220\nThe idea being,\nif the home office were to fail,\n\n1974\n01:33:13,220 --> 01:33:17,270\nthe disaster recovery site could\nstill see the file share witness.\n\n1975\n01:33:17,270 --> 01:33:22,050\nAnd it would know that it's not\nthe problem, it's okay to come active.\n\n1976\n01:33:22,050 --> 01:33:24,310\nOr if the disaster recovery site failed,\n\n1977\n01:33:24,310 --> 01:33:27,660\nthe home office would still be able\nto see the file share witness.\n\n1978\n01:33:27,660 --> 01:33:31,060\nIt would know that it's not the problem\nand it would be okay to come active.\n\n1979\n01:33:31,060 --> 01:33:31,900\nAll right?\n\n1980\n01:33:31,900 --> 01:33:36,930\nBut if this WAN link failed, and the home\noffice just couldn't see the remotes.\n\n1981\n01:33:36,930 --> 01:33:38,190\nI couldn't see the DR site.\n\n1982\n01:33:38,190 --> 01:33:40,820\nIt wouldn't be wouldn't be able to\nsee the file share witness either.\n\n1983\n01:33:40,820 --> 01:33:43,930\nAnd the home office would know\nthat it was the problem and\n\n1984\n01:33:43,930 --> 01:33:45,640\nit would know to take its servers down.\n\n1985\n01:33:45,640 --> 01:33:48,140\n>> Right.\n>> So that solves the problem but\n\n1986\n01:33:48,140 --> 01:33:51,060\nit does require a third site.\n\n1987\n01:33:51,060 --> 01:33:55,120\nWe've got to move that file\nshare witness out there so\n\n1988\n01:33:55,120 --> 01:33:58,030\nthat it's honest,\nthat it can be that tie breaker.\n\n1989\n01:33:58,030 --> 01:33:59,750\nSo, for a small or\n\n1990\n01:33:59,750 --> 01:34:04,150\nmedium business, having that third site,\nwell that used be a real burden.\n\n1991\n01:34:04,150 --> 01:34:07,560\nBut thanks to Windows Azure,\nAmazon EC2, Rackspace,\n\n1992\n01:34:07,560 --> 01:34:11,720\ncompanies like that, it's so\neasy to bring up that unit somewhere else.\n\n1993\n01:34:11,720 --> 01:34:13,670\nIt'll cost you, if you use Amazon right?\n\n1994\n01:34:13,670 --> 01:34:16,470\nYou do like one of their\nreally micro instances,\n\n1995\n01:34:16,470 --> 01:34:19,350\nyou can have a windows server up,\nVPN into it.\n\n1996\n01:34:19,350 --> 01:34:23,400\nIt'll cost you, it's something like\n$12.50 a month or something around that.\n\n1997\n01:34:23,400 --> 01:34:26,400\nSo it is not an expensive thing to do.\n\n1998\n01:34:26,400 --> 01:34:31,968\nBut the file share witness does\nneed to be in a third location.\n\n1999\n01:34:31,968 --> 01:34:36,610\n>> What got me thinking about that\nwas the Global Update Manager.\n\n2000\n01:34:36,610 --> 01:34:40,450\nThe Global Update Manager is what\ncontrols that file share witness.\n\n2001\n01:34:40,450 --> 01:34:43,380\nAnd it turns out that\nin Windows Server 2012,\n\n2002\n01:34:43,380 --> 01:34:47,710\nthere was a little quirk in the Global\nUpdate Manager that was a problem.\n\n2003\n01:34:47,710 --> 01:34:48,500\nOkay?\n\n2004\n01:34:48,500 --> 01:34:53,060\nAnd the problem was,\nmachines had to write their little time\n\n2005\n01:34:53,060 --> 01:34:56,490\nstamp file to the file share witness\nthat would say hey, I'm up, I'm happy.\n\n2006\n01:34:57,690 --> 01:35:02,820\nAnd if they ever stopped writing to that\nfile, then we assumed they were down.\n\n2007\n01:35:02,820 --> 01:35:03,510\nOkay?\n\n2008\n01:35:03,510 --> 01:35:07,610\nWell, when we assume someone is down,\nwe need to take care of it.\n\n2009\n01:35:07,610 --> 01:35:12,130\nAnd so any of the nodes that\nare still up need to check in.\n\n2010\n01:35:12,130 --> 01:35:13,250\nThey all vote, right?\n\n2011\n01:35:13,250 --> 01:35:17,300\nWe get our quorum, and\nwhen they decide that there is a failure,\n\n2012\n01:35:17,300 --> 01:35:21,450\neach of the nodes has to\nacknowledge the failure, okay?\n\n2013\n01:35:21,450 --> 01:35:26,390\nAnd only when all of the remaining nodes,\nso every node that is still online,\n\n2014\n01:35:26,390 --> 01:35:28,855\nyou don't care about the offline guys,\nbut the nodes that are online,\n\n2015\n01:35:28,855 --> 01:35:33,535\nonly once all of them had said yes,\nlet's fail over, would it fail over.\n\n2016\n01:35:33,535 --> 01:35:37,325\nWell, there were a few little bugs that\ncould every now and then lead to one or\n\n2017\n01:35:37,325 --> 01:35:45,057\ntwo nodes either not voting ever or just\nbeing delayed, and taking a while to vote.\n\n2018\n01:35:45,057 --> 01:35:47,458\nAnd it would slow the fail over down.\n\n2019\n01:35:47,458 --> 01:35:51,793\nSo in Windows 2012 R2,\nthey changed that behavior and\n\n2020\n01:35:51,793 --> 01:35:56,050\nnow you don't have to wait for\nall of the nodes to check in.\n\n2021\n01:35:56,050 --> 01:35:59,625\nYou just have to wait for\na majority of the nodes to check-in, and\n\n2022\n01:35:59,625 --> 01:36:01,380\nthen the failover will happen.\n\n2023\n01:36:01,380 --> 01:36:04,580\nThat speeds up the failover, and\nit solves that little quirk.\n\n2024\n01:36:04,580 --> 01:36:08,460\nNow because that's new functionality,\nyou can expect it to be on the exam.\n\n2025\n01:36:08,460 --> 01:36:09,540\nThis is something they can turn on.\n\n2026\n01:36:10,640 --> 01:36:17,320\nSo I pulled up the article on where they\npublished that change, and it is here.\n\n2027\n01:36:17,320 --> 01:36:22,950\nAnd you'll see where they're basically\ntalking about the Global Update Manager,\n\n2028\n01:36:22,950 --> 01:36:25,560\nhere we go, and\nhow it just changed the mode.\n\n2029\n01:36:25,560 --> 01:36:27,260\nAnd if you're happy with\nthe new functionality,\n\n2030\n01:36:27,260 --> 01:36:29,905\ngreat, you should leave it be,\nyou don't do anything.\n\n2031\n01:36:29,905 --> 01:36:35,295\nBut if for some reason you need to\nforce it back to the 2012 way, you can.\n\n2032\n01:36:35,295 --> 01:36:40,135\nThere's a PowerShell command you can run\nwhich is the Get-Cluster command, and\n\n2033\n01:36:40,135 --> 01:36:42,270\nyou can pull the database read write mode.\n\n2034\n01:36:42,270 --> 01:36:43,760\nAnd that's the Global Update Manager mode.\n\n2035\n01:36:43,760 --> 01:36:46,590\nAnd you'll see there's three options.\n\n2036\n01:36:46,590 --> 01:36:51,440\nZero, which is everybody has to check-in,\nand that's the old way.\n\n2037\n01:36:51,440 --> 01:36:56,310\nThere's one, just a majority has to\ncheck-in, and that's the new way.\n\n2038\n01:36:56,310 --> 01:37:00,560\nAnd then there's the majority write and\nlocal read, and that means in order for\n\n2039\n01:37:00,560 --> 01:37:03,430\nsomebody to be able to\nbring the system up,\n\n2040\n01:37:03,430 --> 01:37:07,710\nthey don't have to necessarily be\nable write to the File Share Witness.\n\n2041\n01:37:07,710 --> 01:37:10,380\nThey just need to be able to read to\nsee that status and then go ahead and\n\n2042\n01:37:10,380 --> 01:37:11,430\nmake it happen.\n\n2043\n01:37:11,430 --> 01:37:16,560\nSo the default is one and that's normally\nwhat we want, and that's basically it.\n\n2044\n01:37:16,560 --> 01:37:20,080\nBut you can change it back\nto the old one if you want.\n\n2045\n01:37:20,080 --> 01:37:24,420\nInstead of Get-Cluster, you would do\na Set-Cluster and modify that value.\n\n2046\n01:37:24,420 --> 01:37:27,550\nNow they go on to say,\nyou don't wanna mess with this.\n\n2047\n01:37:27,550 --> 01:37:31,450\nIf you read through here, somewhere\nin here, they say, oh, right here.\n\n2048\n01:37:31,450 --> 01:37:34,120\nDo not use either majority modes one or\ntwo for\n\n2049\n01:37:34,120 --> 01:37:39,120\nanywhere where you need strong\nconsistency guarantees.\n\n2050\n01:37:39,120 --> 01:37:41,770\nThe old way required unanimity, right?\n\n2051\n01:37:41,770 --> 01:37:43,010\n>> They all had to be in sync, yeah.\n\n2052\n01:37:43,010 --> 01:37:44,040\n>> Everybody, and so\n\n2053\n01:37:44,040 --> 01:37:47,870\nif you relied upon that, then you wanna\ngo back to the old way, go back to zero.\n\n2054\n01:37:48,940 --> 01:37:53,405\nBut for most us, we're more concerned\nabout rapidity, getting back online as\n\n2055\n01:37:53,405 --> 01:37:57,595\nfast as possible and so the new default\nmode of one is what we're going to want.\n\n2056\n01:37:58,935 --> 01:38:01,955\nSo that is a little change,\njust something to be aware of and\n\n2057\n01:38:01,955 --> 01:38:05,210\nagain, not something most of\nus are gonna mess with it.\n\n2058\n01:38:05,210 --> 01:38:07,200\nThat's a hard one to remember.\n\n2059\n01:38:07,200 --> 01:38:09,120\nIt's a hidden thing that kind\nof runs in the background.\n\n2060\n01:38:09,120 --> 01:38:10,820\nMost of us never even think about it.\n\n2061\n01:38:10,820 --> 01:38:13,410\nI'll post a link to that article\nwith the show notes also, just so\n\n2062\n01:38:13,410 --> 01:38:18,980\nyou can take a look at it and\nmake sure that you understand that.\n\n2063\n01:38:18,980 --> 01:38:20,740\nMike, let's see what else\nwe got on our objectives.\n\n2064\n01:38:20,740 --> 01:38:22,890\n>> I think we pretty much hit it all.\n\n2065\n01:38:22,890 --> 01:38:23,620\n>> I say, is that it?\n\n2066\n01:38:23,620 --> 01:38:24,455\nLike it was only a few things.\n\n2067\n01:38:24,455 --> 01:38:25,045\n>> [LAUGH] I know right?\n\n2068\n01:38:25,045 --> 01:38:26,370\n>> [LAUGH] This is quite a bit of stuff.\n\n2069\n01:38:26,370 --> 01:38:28,850\n>> There's a lot of info.\n\n2070\n01:38:28,850 --> 01:38:33,970\n>> But you can't understate how\nimportant disaster recovery is.\n\n2071\n01:38:33,970 --> 01:38:37,210\nI mean, you don't think about it\nwhen your network is running fine.\n\n2072\n01:38:37,210 --> 01:38:39,920\nWhen the network's running fine,\ndisaster recovery is not a big deal.\n\n2073\n01:38:39,920 --> 01:38:44,250\nBut when you're in a failure,\nevery step you take to prepare for\n\n2074\n01:38:44,250 --> 01:38:47,040\nthat, makes your life so\nmuch easier, you know?\n\n2075\n01:38:47,040 --> 01:38:50,410\nAnd when you've got the recovery\ninstructions right there in your hand,\n\n2076\n01:38:50,410 --> 01:38:52,102\nit really does make a huge difference.\n\n2077\n01:38:52,102 --> 01:38:53,370\n>> People aren't thinking clearly, and\n\n2078\n01:38:53,370 --> 01:38:55,420\nmaking good decisions\nduring the disaster itself.\n\n2079\n01:38:55,420 --> 01:38:57,200\nThat's not when you wanna decide.\n\n2080\n01:38:57,200 --> 01:38:59,790\nWhat order should I bring\nthese machines back up in?\n\n2081\n01:38:59,790 --> 01:39:00,580\nAnd things like that.\n\n2082\n01:39:00,580 --> 01:39:04,940\nThat all needs to be planned out,\ntested, re-evaluated every so often.\n\n2083\n01:39:04,940 --> 01:39:06,720\nSo a very important part of our process.\n\n2084\n01:39:08,760 --> 01:39:12,425\n>> Well let me just remind everybody that\nif you ever have any questions on this,\n\n2085\n01:39:12,425 --> 01:39:15,565\nlive during the show,\nyou can go to ITPro.TV/live and\n\n2086\n01:39:15,565 --> 01:39:18,145\nyou'll see the chat room\nright beneath the video.\n\n2087\n01:39:18,145 --> 01:39:19,055\nPost your questions.\n\n2088\n01:39:19,055 --> 01:39:20,605\nWe monitor and answer during the show.\n\n2089\n01:39:20,605 --> 01:39:25,170\nIf you have questions after the show,\nlike if you're watching this recorded, on\n\n2090\n01:39:25,170 --> 01:39:29,510\nevery page at the ITPro.TV website, you'll\nsee a link at the top that says Q&A.\n\n2091\n01:39:29,510 --> 01:39:30,130\nClick on it.\n\n2092\n01:39:30,130 --> 01:39:32,930\nIt'll take you into our Q&A forums and\nyou can post there.\n\n2093\n01:39:32,930 --> 01:39:35,680\nAnd again, we monitor and answer, although\nRonnie's kicking my butt right now.\n\n2094\n01:39:35,680 --> 01:39:37,610\n>> [LAUGH]\n>> He's answered a lot more questions\n\n2095\n01:39:37,610 --> 01:39:39,272\nthan I have, so I need to get on the ball.\n\n2096\n01:39:39,272 --> 01:39:41,147\nBut yeah,\ndefinitely take advantage of that.\n\n2097\n01:39:41,147 --> 01:39:41,877\nIt's a resource.\n\n2098\n01:39:41,877 --> 01:39:42,960\nIt's there for you.\n\n2099\n01:39:42,960 --> 01:39:45,380\nWe wanna make sure you guys\nunderstand what's going on.\n\n2100\n01:39:45,380 --> 01:39:46,780\nPersonally, I love the forums,\n\n2101\n01:39:46,780 --> 01:39:50,220\nbecause when you post a question there,\neverybody else sees it.\n\n2102\n01:39:50,220 --> 01:39:51,480\nWe can all kind of benefit.\n\n2103\n01:39:51,480 --> 01:39:52,720\nPeople learn from each other.\n\n2104\n01:39:52,720 --> 01:39:53,830\nIt's a very valuable asset.\n\n2105\n01:39:55,390 --> 01:39:59,240\nWell I hope you guys enjoyed the show,\nsigning off for ITPro.TV, I'm Don Pezet.\n\n2106\n01:39:59,240 --> 01:40:00,004\n>> And I'm Mike Rodrick.\n\n2107\n01:40:00,004 --> 01:40:02,001\n>> And we will see you next time.\n\n2108\n01:40:02,001 --> 01:40:05,089\n[MUSIC]\n\n",
          "vimeoId": "98448107"
        }
      ],
      "title": "Implement business continuity and disaster recovery"
    },
    {
      "episodes": [
        {
          "description": "In this episode Nate and Mike take a look at advanced configuration of network services. They demonstrate creating DHCP superscopes and multicast scopes as well as failover and Name Protection. They discuss DNS GlobalNames zones and demonstrate configuring Domain Name System Security Extensions (DNSSEC). They wrap up with deploying IP Address Management (IPAM).",
          "length": "8529",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/007-Configure-Network-Services.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/007-Configure-Network-Services-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/007-Configure-Network-Services-sm.jpg",
          "title": "Configure Network Services",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,050 --> 00:00:22,506\n[SOUND]\n\n3\n00:00:22,506 --> 00:00:33,387\n[MUSIC]\n\n4\n00:00:33,387 --> 00:00:37,291\nWell all right, welcome back to\nanother fantastic episode of ITProTV.\n\n5\n00:00:37,291 --> 00:00:40,930\nI am Nathan Copeland\nhere with Mike Rodrick!\n\n6\n00:00:40,930 --> 00:00:42,040\n>> Hey, how's it going, Nate?\n\n7\n00:00:42,040 --> 00:00:43,545\n>> Pretty good, Mike, pretty good.\n\n8\n00:00:43,545 --> 00:00:44,850\n>> Ready for another exciting day?\n\n9\n00:00:44,850 --> 00:00:47,980\nWe've got some great\ntopics to cover today.\n\n10\n00:00:47,980 --> 00:00:48,610\n>> Yeah, we do.\n\n11\n00:00:48,610 --> 00:00:52,670\nToday we'll be covering advanced DHCP and\n\n12\n00:00:52,670 --> 00:00:56,970\nDNS stuff and for the official objectives.\n\n13\n00:00:56,970 --> 00:00:59,920\nSo here on the Microsoft site,\n\n14\n00:00:59,920 --> 00:01:03,870\nimplement an advanced Dynamic Host\nConfiguration Protocol solution.\n\n15\n00:01:03,870 --> 00:01:08,410\nAll right, so we'll mess around with some\nsuper scopes, some multicast scopes,\n\n16\n00:01:08,410 --> 00:01:13,430\nhigh availability, and some fail\nover scopes, things of that nature.\n\n17\n00:01:13,430 --> 00:01:14,090\n>> Absolutely.\n\n18\n00:01:14,090 --> 00:01:15,580\n>> Yeah, should be a good time.\n\n19\n00:01:15,580 --> 00:01:17,390\n>> Lots of fun.\nThey've done a lot of cool things to DHCP,\n\n20\n00:01:17,390 --> 00:01:18,800\nespecially I like that fail over part,\n\n21\n00:01:18,800 --> 00:01:23,305\nwe will talk more about that so-\n>> Good stuff.\n\n22\n00:01:23,305 --> 00:01:23,853\n>> Yep.\n\n23\n00:01:23,853 --> 00:01:29,005\nAll right, well, Mike, I guess what-\n>> Dive right in?\n\n24\n00:01:29,005 --> 00:01:29,700\n>> Mm-hm, yep.\n>> Let's do it.\n\n25\n00:01:29,700 --> 00:01:34,110\n>> So first up on our list we have,\nso creating superscopes.\n\n26\n00:01:34,110 --> 00:01:36,623\n>> Superscopes and\nmulticast scopes, right?\n\n27\n00:01:36,623 --> 00:01:37,625\n[COUGH] Excuse me.\n\n28\n00:01:37,625 --> 00:01:41,740\nYeah so, you know, superscopes,\nwe've worked with DHCP in some previous\n\n29\n00:01:41,740 --> 00:01:44,350\nepisodes, so we should have a pretty\ngood understanding of what that is.\n\n30\n00:01:44,350 --> 00:01:47,170\nHeck, I think even in our A+ we\ntalk a little bit about DHCP.\n\n31\n00:01:47,170 --> 00:01:50,990\nSo you guys at this point know\nDHCP is the way we can provide IP\n\n32\n00:01:50,990 --> 00:01:55,330\nconfiguration to our clients dynamically.\n\n33\n00:01:55,330 --> 00:01:57,079\nAnd when we talk about scopes,\n\n34\n00:01:57,079 --> 00:02:01,996\nagain another thing we've talked about in\nprevious episodes and even other classes,\n\n35\n00:02:01,996 --> 00:02:05,965\nif we do like a class C scope, do you\nremember how many nodes you can have\n\n36\n00:02:05,965 --> 00:02:09,021\non a Class C if you had all\nof the addresses available?\n\n37\n00:02:09,021 --> 00:02:10,311\nTop of your head?\n\n38\n00:02:10,311 --> 00:02:11,429\n>> Like sixteen.\n\n39\n00:02:11,429 --> 00:02:12,630\n>> Pop quiz here.\n\n40\n00:02:12,630 --> 00:02:15,511\nNo Class C, one octet, 254, right?\n\n41\n00:02:15,511 --> 00:02:16,223\n>> Yeah, yeah.\n\n42\n00:02:16,223 --> 00:02:18,980\n254 that's-\n>> I know we're used to using class Bs\n\n43\n00:02:18,980 --> 00:02:22,540\naround here and\nthat's why it popped into his head.\n\n44\n00:02:22,540 --> 00:02:25,720\nSo you start out with a company and\nyou've got a few hundred nodes or\n\n45\n00:02:25,720 --> 00:02:26,930\nsomething maybe a hundred nodes.\n\n46\n00:02:26,930 --> 00:02:30,210\nAnd you start out, you got a\n>> Class C address that you use and\n\n47\n00:02:30,210 --> 00:02:33,840\nthen along the way, over time,\nyou add more and more nodes and\n\n48\n00:02:33,840 --> 00:02:38,338\nlike we had here,\nan influx of devices, right?\n\n49\n00:02:38,338 --> 00:02:42,680\nSmart phones, tablets,\nlaptops, things like that.\n\n50\n00:02:42,680 --> 00:02:45,540\nThat you hadn't planned on when\nyou first set up that scope.\n\n51\n00:02:45,540 --> 00:02:47,585\nSo now, all of a sudden,\nyou're getting low on IP addresses.\n\n52\n00:02:48,790 --> 00:02:52,590\nSo what we can do is,\nwe really need to make a bigger scope.\n\n53\n00:02:52,590 --> 00:02:56,020\nBut to tide us over, to get us through\nthat initial period where we're out of or\n\n54\n00:02:56,020 --> 00:02:59,195\nreally low on IP addresses,\nwe can take a couple of scopes,\n\n55\n00:02:59,195 --> 00:03:03,635\ntake two class: scopes for example,\nand combine them into one superscope.\n\n56\n00:03:03,635 --> 00:03:05,978\nI like that name, superscope.\n\n57\n00:03:05,978 --> 00:03:09,132\n[LAUGH]\n>> Yeah, that's right, so\n\n58\n00:03:09,132 --> 00:03:13,340\nwe're running out of those IP addresses.\n\n59\n00:03:13,340 --> 00:03:16,940\nAnd a quick fix that we did to get around\nit is we shortened up our lease time.\n\n60\n00:03:16,940 --> 00:03:17,890\n>> Right.\n>> Yeah, quite a bit.\n\n61\n00:03:17,890 --> 00:03:24,170\nSo, as we have visitors and things,\nwe do have a guest network.\n\n62\n00:03:24,170 --> 00:03:25,810\n>> Or wireless access point out there.\n\n63\n00:03:25,810 --> 00:03:26,558\n>> Yep.\n>> Yeah, and so\n\n64\n00:03:26,558 --> 00:03:30,101\nwe shortened that lease time and\nreleased some of those addresses back, so\n\n65\n00:03:30,101 --> 00:03:31,990\nwe weren't running out so much.\n\n66\n00:03:31,990 --> 00:03:33,720\n>> Exactly.\nAll right, so\n\n67\n00:03:33,720 --> 00:03:36,080\nwhy don't I show you guys\nhow to make a superscope?\n\n68\n00:03:36,080 --> 00:03:38,070\nIt's pretty straightforward.\n\n69\n00:03:38,070 --> 00:03:41,710\nThe biggest thing to remember is\nthat the scopes have to exist.\n\n70\n00:03:41,710 --> 00:03:44,820\nAll we're gonna be doing is\ncombining two scopes into one.\n\n71\n00:03:44,820 --> 00:03:49,350\nBut the scopes themselves have to exist\nbefore you can create the superscope.\n\n72\n00:03:49,350 --> 00:03:51,970\nSo, what I'm gonna do is I'm\ngonna switch over here to DC,\n\n73\n00:03:51,970 --> 00:03:56,280\nwho is the DHCP server in these lab\nmachines, and we'll take a peek.\n\n74\n00:03:57,680 --> 00:03:58,490\nIt's a little bit small.\n\n75\n00:03:58,490 --> 00:04:00,750\nI might have to play\nwith my resolution later.\n\n76\n00:04:00,750 --> 00:04:03,900\nBut I've got a scope that's being used for\nthe rest of the lab machines.\n\n77\n00:04:03,900 --> 00:04:08,020\nI'm not gonna mess with that one in\nthe middle of our demonstration here.\n\n78\n00:04:08,020 --> 00:04:12,650\nSo all I'm gonna do is I'm gonna create,\nwhat are we using now, 192?\n\n79\n00:04:12,650 --> 00:04:14,720\nI'm gonna come in here and\ncreate a new scope.\n\n80\n00:04:16,080 --> 00:04:18,678\nAnd we've seen this before in some other\nepisodes, so if you're unfamiliar,\n\n81\n00:04:18,678 --> 00:04:20,050\nmake sure you check out the rest of those.\n\n82\n00:04:20,050 --> 00:04:22,250\nThey definitely come\nwith your subscription.\n\n83\n00:04:22,250 --> 00:04:26,138\nI'm gonna call this one,\n\n84\n00:04:26,138 --> 00:04:30,383\nI'll just call it Scope 1.\n\n85\n00:04:30,383 --> 00:04:31,713\nNot feeling really creative today.\n\n86\n00:04:31,713 --> 00:04:36,330\n>> [LAUGH]\n>> So I'll call it Scope 1, and\n\n87\n00:04:36,330 --> 00:04:40,353\nlet's say we do something like\n\n88\n00:04:40,353 --> 00:04:45,615\na 192.168.2.1 all the way up\n\n89\n00:04:45,615 --> 00:04:51,055\nthrough 192.168.2.199.\n\n90\n00:04:51,055 --> 00:04:55,650\nUse our standard class C subnet mask.\n\n91\n00:04:55,650 --> 00:04:58,410\nI'm not gonna do any exclusions,\nnot gonna change,\n\n92\n00:04:58,410 --> 00:05:01,920\nthe default is eight days there,\nNext, Next.\n\n93\n00:05:01,920 --> 00:05:03,660\nAnd I'm not gonna configure any options.\n\n94\n00:05:03,660 --> 00:05:05,370\nWell, let's do one.\n\n95\n00:05:05,370 --> 00:05:07,060\nLet's do some options.\n\n96\n00:05:07,060 --> 00:05:14,216\nLet's do our default gateway, 192.168.2.1.\n\n97\n00:05:17,506 --> 00:05:20,080\nIt's already picked up my DNS name,\nthat's fine.\n\n98\n00:05:21,220 --> 00:05:24,100\nWe're not using Wins, and we'll go ahead.\n\n99\n00:05:24,100 --> 00:05:29,650\nI'm gonna wait to activate that scope,\nand Finish, and now I've got a scope.\n\n100\n00:05:30,860 --> 00:05:33,670\nThen we're going to go and\nrepeat the process.\n\n101\n00:05:33,670 --> 00:05:41,010\nNew Scope, and I'll call it Scope 2.\n\n102\n00:05:41,010 --> 00:05:47,154\n192.168.3.1 all the way\n\n103\n00:05:47,154 --> 00:05:54,101\nthrough 192.168.3.199.\n\n104\n00:05:54,101 --> 00:05:58,872\nNo exclusions, default lease,\nset up my default gateway,\n\n105\n00:05:58,872 --> 00:06:05,340\n192.168.3.1, although I did include\nthat in the scope, didn't I?\n\n106\n00:06:05,340 --> 00:06:06,920\nThat wouldn't be good.\n\n107\n00:06:06,920 --> 00:06:11,385\nNext and not gonna activate it just yet.\n\n108\n00:06:11,385 --> 00:06:12,085\nNext.\n\n109\n00:06:12,085 --> 00:06:13,505\nAnd Finish.\n>> Nice.\n\n110\n00:06:13,505 --> 00:06:14,255\n>> All right.\n\n111\n00:06:14,255 --> 00:06:18,405\nSo there you go, we've got two\nquick little class C scopes here.\n\n112\n00:06:18,405 --> 00:06:22,917\nAnd so now, if I wanna combine\nthose guys and create a superscope,\n\n113\n00:06:22,917 --> 00:06:25,345\nI right-click, new Superscope.\n\n114\n00:06:26,825 --> 00:06:31,851\nAnd I'll click Next,\nand I'm gonna call this\n\n115\n00:06:31,851 --> 00:06:36,429\nthe Contoso Superscope, and\n\n116\n00:06:36,429 --> 00:06:41,460\nI'll click Next, and here I can see\na list of the scopes that already exist,\n\n117\n00:06:41,460 --> 00:06:43,940\nand this is why I say you've\ngotta create it ahead of time.\n\n118\n00:06:43,940 --> 00:06:47,200\nCuz if you don't, it doesn't show up\nin this list, and there's no new scope\n\n119\n00:06:47,200 --> 00:06:50,590\nbutton here or anything like that,\nso gotta create it ahead of time.\n\n120\n00:06:50,590 --> 00:06:53,415\nWe'll click, and\nwe'll grab those two scopes I just made,\n\n121\n00:06:53,415 --> 00:06:57,100\nwe'll click Next, and Finish.\n\n122\n00:06:58,950 --> 00:07:03,140\nAnd now I have a superscope that\ncontains both of those scopes.\n\n123\n00:07:03,140 --> 00:07:03,640\n>> All right.\n\n124\n00:07:04,660 --> 00:07:07,100\nSo what kind of situation then,\n\n125\n00:07:07,100 --> 00:07:11,340\nwould you want to be combining scopes\nlike this to make that superscope?\n\n126\n00:07:11,340 --> 00:07:14,075\n>> Like I was saying earlier, I think\nprimarily where I've seen this used is\n\n127\n00:07:14,075 --> 00:07:15,630\nwhen we're running out of IP addresses.\n\n128\n00:07:15,630 --> 00:07:20,312\nSo let's say we already had\nthe 192.168.2.0 scope set up, and\n\n129\n00:07:20,312 --> 00:07:25,588\nthere was about 199 addresses in there,\nand we're running out, we're getting\n\n130\n00:07:25,588 --> 00:07:30,119\nclose to the end, and so what I could\ndo is I could create another scope and\n\n131\n00:07:30,119 --> 00:07:35,380\nthen pool those together, which just\nincreases the number of addresses.\n\n132\n00:07:35,380 --> 00:07:37,050\nOr, when you're migrating.\n\n133\n00:07:37,050 --> 00:07:42,229\nWe could actually create another scope\nthat had more addresses available in it.\n\n134\n00:07:42,229 --> 00:07:46,519\nAnd then combine that with that other one,\nshorten the lease duration on one of\n\n135\n00:07:46,519 --> 00:07:50,094\nthe scopes, and get people to move\nover to that second scope, and\n\n136\n00:07:50,094 --> 00:07:52,577\nthen eliminate that\nfirst scope that we had.\n\n137\n00:07:52,577 --> 00:07:56,204\nSo you see it used either just to combine\ntwo scopes to make more addresses\n\n138\n00:07:56,204 --> 00:08:00,365\navailable, or in the process of migrating\nfrom one scope to another we've decided\n\n139\n00:08:00,365 --> 00:08:03,237\nto change our IP infrastructure or\nsomething like that.\n\n140\n00:08:03,237 --> 00:08:05,040\n>> Nice.\n\n141\n00:08:05,040 --> 00:08:09,449\nSo then when I climb machine out of there,\nso we need haulers out for an IP address.\n\n142\n00:08:10,450 --> 00:08:16,610\nWill it pick from one of those two so\nit can get a two dot or a three dot?\n\n143\n00:08:16,610 --> 00:08:20,600\n>> Exactly, and that's a very good point,\nbecause with this, you don't know.\n\n144\n00:08:20,600 --> 00:08:23,270\nWell, it depends on your subnet layout.\n\n145\n00:08:23,270 --> 00:08:26,570\nYou know, when that packet comes in, that\nrequest, he sees he's on the three dot and\n\n146\n00:08:26,570 --> 00:08:27,990\nhe'll give him an address\nfrom the three dot.\n\n147\n00:08:27,990 --> 00:08:31,150\nHe sees it on the two dot,\nhe'll give him an address on the two.\n\n148\n00:08:31,150 --> 00:08:34,163\nIf we're moving our subnet mass\nto try to go to a bigger pool,\n\n149\n00:08:34,163 --> 00:08:38,355\nI really don't know which one he's going\nto get an IP address from, so which means,\n\n150\n00:08:38,355 --> 00:08:42,099\nbecause, right, the default gateway\nhas to be on the same network as you.\n\n151\n00:08:42,099 --> 00:08:45,526\nSo I've got to set up my router now\nto handle both of those scopes.\n\n152\n00:08:45,526 --> 00:08:50,281\nI've gotta have a default gateway on the\ntwo dot network as well as the three dot\n\n153\n00:08:50,281 --> 00:08:53,758\nnetwork because I need to be\nable to handle both of those.\n\n154\n00:08:53,758 --> 00:08:57,020\n>> Right, so if the client machine,\nif it's on two different networks,\n\n155\n00:08:57,020 --> 00:09:00,630\nare you going to have to\nbring up a relay agent or\n\n156\n00:09:00,630 --> 00:09:03,890\nsomething to be able to get\na dot guy over to the do not?\n\n157\n00:09:03,890 --> 00:09:05,140\n>> Yep, you would.\n\n158\n00:09:05,140 --> 00:09:08,390\nIf you were,\nbecause we know DHP is broadcast, so\n\n159\n00:09:08,390 --> 00:09:12,370\nif that three, normally my DHCP server\nis probably up around the switch.\n\n160\n00:09:12,370 --> 00:09:13,852\nIt might be connected to or\naround that router.\n\n161\n00:09:13,852 --> 00:09:16,696\nIt might be connected to more\nthan one network in this case.\n\n162\n00:09:16,696 --> 00:09:19,090\n>> Nice.\n\n163\n00:09:19,090 --> 00:09:21,899\n>> Yep, that is our good old super scope.\n\n164\n00:09:21,899 --> 00:09:24,450\nHonestly, I'll tell you,\nwe used one here once and for\n\n165\n00:09:24,450 --> 00:09:26,858\nthe very reason we're\nrunning out of IP Addresses.\n\n166\n00:09:26,858 --> 00:09:30,621\nBut we don't use them that often.\n\n167\n00:09:30,621 --> 00:09:31,248\n>> Right.\n\n168\n00:09:31,248 --> 00:09:32,710\n>> So that's a super scope.\n\n169\n00:09:32,710 --> 00:09:35,021\nWhat else, multi-scope?\n\n170\n00:09:35,021 --> 00:09:35,764\n>> Multi-scopes.\n\n171\n00:09:35,764 --> 00:09:37,064\n>> Multi-cast scope we should say.\n\n172\n00:09:37,064 --> 00:09:40,431\n>> Multi-cast scopes\n>> You wanna tell 'em about multicast,\n\n173\n00:09:40,431 --> 00:09:41,000\nand I'll.\n\n174\n00:09:41,000 --> 00:09:47,600\n>> All right, with a multicast scope,\nmulticast we've got are broadcasts.\n\n175\n00:09:47,600 --> 00:09:49,850\nBroadcasts, they just go out to everybody.\n\n176\n00:09:49,850 --> 00:09:53,360\nWe've got unicast,\nthey go out to just one person.\n\n177\n00:09:53,360 --> 00:09:57,010\nAnd of course with our multicast scopes,\nit's like a one to many.\n\n178\n00:09:57,010 --> 00:09:59,220\n>> It broadcasts out, and\n\n179\n00:09:59,220 --> 00:10:03,070\nif you're in that group that it's destined\nfor those packets, then you get it.\n\n180\n00:10:03,070 --> 00:10:05,930\nAnd the machines that are not\nin that multicast don't,\n\n181\n00:10:05,930 --> 00:10:07,340\nthey just drop those packets out.\n\n182\n00:10:07,340 --> 00:10:08,320\n>> Exactly, exactly.\n\n183\n00:10:08,320 --> 00:10:09,290\nYou see used this lots.\n\n184\n00:10:09,290 --> 00:10:15,270\nAny kind of video conference type thing,\nor something like that,\n\n185\n00:10:15,270 --> 00:10:18,030\nwhere you've got one person in their\noffice and they're streaming out, or they\n\n186\n00:10:18,030 --> 00:10:22,940\nwanna send some video content or something\nlike that to other members of the office.\n\n187\n00:10:24,870 --> 00:10:30,011\nThose other members, they've got a normal\nIPv4 address that's valid on their subnet,\n\n188\n00:10:30,011 --> 00:10:34,138\nbut I can assign a multicast address\nto that meeting, and then if I assign\n\n189\n00:10:34,138 --> 00:10:38,701\na multicast address to those other people\nthey can then join the party, right?\n\n190\n00:10:38,701 --> 00:10:40,804\nAnd so we can create a multicast scope.\n\n191\n00:10:40,804 --> 00:10:45,404\nI can have DHCP pass out a multicast\naddress to my client machines when they\n\n192\n00:10:45,404 --> 00:10:46,670\nneed one.\n\n193\n00:10:46,670 --> 00:10:49,190\nAnd it's as easy as just\ncreating another scope.\n\n194\n00:10:49,190 --> 00:10:51,045\nThere's really not much to it.\n\n195\n00:10:51,045 --> 00:10:55,325\nYou have to know the address range for\nmulticast.\n\n196\n00:10:55,325 --> 00:10:56,775\nThat'll be your big key there.\n\n197\n00:10:56,775 --> 00:10:58,825\nBut as you can see,\nI'm just right clicking on IPv4.\n\n198\n00:10:58,825 --> 00:11:05,045\nYou're gonna choose new multicast\nscope and I'll go through the wizard.\n\n199\n00:11:05,045 --> 00:11:05,549\nWe'll click Next.\n\n200\n00:11:05,549 --> 00:11:11,154\nAnd give it a name, we'll call this the,\n\n201\n00:11:11,154 --> 00:11:15,325\nI'll just call it Multicast.\n\n202\n00:11:15,325 --> 00:11:16,670\nReally not feeling all\nthat creative today.\n\n203\n00:11:16,670 --> 00:11:17,880\n>> [LAUGH]\n>> Really can't\n\n204\n00:11:17,880 --> 00:11:19,870\ncome up with any good names.\n\n205\n00:11:19,870 --> 00:11:22,490\nSo we'll call it multicast,\nI'll click next.\n\n206\n00:11:22,490 --> 00:11:26,565\nAnd this is what you got to\nremember from network plus,\n\n207\n00:11:26,565 --> 00:11:31,816\n224.0.0.0 all the way up\nto 239..255255254255.\n\n208\n00:11:31,816 --> 00:11:36,540\nThat's the assigned range for\nmultitask addresses.\n\n209\n00:11:36,540 --> 00:11:38,687\nAnd so I can make it whatever I want.\n\n210\n00:11:38,687 --> 00:11:42,449\nI can just do like a 224.1.1.\n\n211\n00:11:42,449 --> 00:11:46,862\nI don't know we'll say all the way from\n\n212\n00:11:46,862 --> 00:11:51,424\n1.1.1 to 224.1.1.99.\n\n213\n00:11:51,424 --> 00:11:52,283\nWe'll give a hundred.\n\n214\n00:11:52,283 --> 00:11:53,860\nWe'll say, we got a hundred people coming\nto this particular or somewhere around.\n\n215\n00:11:55,486 --> 00:12:01,680\nClick next, no exclusions.\n\n216\n00:12:01,680 --> 00:12:05,970\nLease duration, notice the default\nlease duration on this one is 30 days.\n\n217\n00:12:05,970 --> 00:12:09,440\nSo, unlike our normal DHCP once you get\nthis multicast address you keep it for\n\n218\n00:12:09,440 --> 00:12:11,440\na month, right.\n\n219\n00:12:11,440 --> 00:12:15,250\n>> So then, so at the,\nis it just like on a regular one so\n\n220\n00:12:15,250 --> 00:12:19,270\nthen when it starts to get to that halfway\npoint or that three-quarter point,\n\n221\n00:12:19,270 --> 00:12:22,600\ndoes that machine holler\nout to renew his multicast?\n\n222\n00:12:22,600 --> 00:12:23,260\n>> Yep.\n\n223\n00:12:23,260 --> 00:12:25,680\nSo it works the same way,\njust a long duration.\n\n224\n00:12:25,680 --> 00:12:26,180\n>> Oh, okay.\n\n225\n00:12:26,180 --> 00:12:27,710\nRight on.\n\n226\n00:12:27,710 --> 00:12:32,610\n>> So we'll click next and\nI'll go ahead and activate it and finish.\n\n227\n00:12:33,880 --> 00:12:34,560\nAnd that's it.\n\n228\n00:12:34,560 --> 00:12:36,038\nWe now have a multicast scope.\n\n229\n00:12:36,038 --> 00:12:38,940\nI don't have any multicast applications or\nanything or\n\n230\n00:12:38,940 --> 00:12:42,284\nanyway to request one at this point but\nthat's all you gotta do.\n\n231\n00:12:42,284 --> 00:12:49,310\nSo DHEP, easy to set up that superscope,\neasy to set up that multi cast scope.\n\n232\n00:12:49,310 --> 00:12:53,290\nWhat else do we want to talk\nabout while we're here?\n\n233\n00:12:53,290 --> 00:12:53,930\nSomething else.\n\n234\n00:12:53,930 --> 00:12:54,550\nOh.\n\n235\n00:12:54,550 --> 00:12:57,533\nI might as well talk about DHCPV six,\nwhile we're here.\n\n236\n00:12:57,533 --> 00:13:02,289\nThe main thing to understand about\nDHCPV six is just the fact that DHDP\n\n237\n00:13:02,289 --> 00:13:06,180\nsupports DHCPV six,\nDHCPV six, I should say.\n\n238\n00:13:06,180 --> 00:13:09,990\nIt works the same way,\nyou can come back here to your IPV six and\n\n239\n00:13:09,990 --> 00:13:12,510\nwe can create new scopes.\n\n240\n00:13:12,510 --> 00:13:15,390\nSame Wizard,\nit is just going to be an IPV6 address.\n\n241\n00:13:15,390 --> 00:13:18,760\nSo, we can click Next on this guy,\ngive it a name.\n\n242\n00:13:18,760 --> 00:13:23,490\nI will call it my test scope just for\ngiggles.\n\n243\n00:13:23,490 --> 00:13:24,517\nOr test V6 maybe?\n\n244\n00:13:28,080 --> 00:13:32,950\nAnd then I would need to know\nmy company prefix at this point.\n\n245\n00:13:32,950 --> 00:13:39,350\nWe've talked about, with IPv6, where\nthe client gets the prefix that's assigned\n\n246\n00:13:39,350 --> 00:13:43,235\nto my company, and then they generate\nthe last six 64 bits on their own, right?\n\n247\n00:13:43,235 --> 00:13:45,155\nSo I'm not really.\n\n248\n00:13:45,155 --> 00:13:48,181\nHere, I'm trying to think if\nI could just make one up.\n\n249\n00:13:48,181 --> 00:13:56,050\n2001:, we should probably do a colon,\ncolon, maybe and see if it'll let me.\n\n250\n00:13:56,050 --> 00:13:57,230\n>> [LAUGH]\n>> Yeah.\n\n251\n00:13:58,580 --> 00:13:59,410\nIt's not going to like that.\n\n252\n00:13:59,410 --> 00:14:02,892\nI don't really have a valid\npre-fix that I can assign here.\n\n253\n00:14:02,892 --> 00:14:04,480\nI guess I can just make one up.\n\n254\n00:14:11,145 --> 00:14:12,470\n>> Something like that.\n\n255\n00:14:12,470 --> 00:14:16,110\nYeah it didn't like that one either.\n\n256\n00:14:16,110 --> 00:14:19,850\nSo all right well I won't\nbother trying to make one up.\n\n257\n00:14:19,850 --> 00:14:22,180\nBut in the end you know\nas we go through there.\n\n258\n00:14:22,180 --> 00:14:23,570\nIt'd be the same thing.\n\n259\n00:14:23,570 --> 00:14:24,930\nNormally, I'll be honest with you.\n\n260\n00:14:24,930 --> 00:14:30,130\nWe don't use DHCP a lot for\nIPv6 because it's also generated.\n\n261\n00:14:30,130 --> 00:14:32,740\nWe're gonna create that, we've talked\nabout that in another episode and\n\n262\n00:14:32,740 --> 00:14:37,580\none of the other server classes, where you\ncreate your advertisement on the router.\n\n263\n00:14:37,580 --> 00:14:41,730\nAnd the router advertises\nthat company prefix, and\n\n264\n00:14:41,730 --> 00:14:46,130\nyou pick that up from there and\nyour node just generates its own\n\n265\n00:14:46,130 --> 00:14:49,970\nglobal unique IPv6 address by\ngenerating those last 64 bits, so.\n\n266\n00:14:49,970 --> 00:14:53,460\nThe main thing to understand I think\nat this point with DHCP is that it does\n\n267\n00:14:53,460 --> 00:14:56,000\nsupport, V six.\n\n268\n00:14:56,000 --> 00:15:00,390\nBecause even though a client can get\nthe IP address from the router, or\n\n269\n00:15:00,390 --> 00:15:03,790\nthe prefix from the router and generate\nthe rest of it and create his own IPv6 six\n\n270\n00:15:03,790 --> 00:15:07,620\naddress he still needs a default gateway,\nstill needs the IP address of a DNS\n\n271\n00:15:07,620 --> 00:15:11,520\nserver, you know you might be passing\nout DNS suffixes and things like that.\n\n272\n00:15:11,520 --> 00:15:17,060\nSo, you can turn the managed flag\non on your advertisement and\n\n273\n00:15:17,060 --> 00:15:19,540\nthat means you get the prefix\nfrom the router but\n\n274\n00:15:19,540 --> 00:15:21,780\nthen go talk to DHCP to get\nthe rest of the options.\n\n275\n00:15:23,170 --> 00:15:23,850\n>> Mm.\n\n276\n00:15:23,850 --> 00:15:24,390\nSo then, alright.\n\n277\n00:15:24,390 --> 00:15:27,730\nSo, Mike.\nSo, like, from a design point, right?\n\n278\n00:15:27,730 --> 00:15:33,540\nSo would you have just like one DHCP\nserver like this that would pass out\n\n279\n00:15:33,540 --> 00:15:39,160\nIPv4 addresses, IPv6, and also have\na super scopes, multi account scopes.\n\n280\n00:15:39,160 --> 00:15:42,658\nIt's not really making that\nall that busy of a role.\n\n281\n00:15:42,658 --> 00:15:44,258\nSo as far as performance wise,\n\n282\n00:15:44,258 --> 00:15:48,145\nit'd be something that you'd have to\nmonitor within your organization.\n\n283\n00:15:48,145 --> 00:15:50,341\nOrganization and see, but\n\n284\n00:15:50,341 --> 00:15:55,314\nit's the fault tolerance that\nwe gotta worry about, right?\n\n285\n00:15:55,314 --> 00:15:58,531\nI mean yeah, one server might be\nable to handle my workload, but\n\n286\n00:15:58,531 --> 00:16:00,880\nwhat if that server goes down?\n\n287\n00:16:00,880 --> 00:16:04,850\nAnd that's where we gotta try to figure\nout how we can provide some kind\n\n288\n00:16:04,850 --> 00:16:07,580\nof fault tolerance to our DHCP solution.\n\n289\n00:16:07,580 --> 00:16:12,790\nWe've learned back in Network Plus or\nwhatever that just because the DHCP\n\n290\n00:16:12,790 --> 00:16:16,830\nserver goes down doesn't mean your\naddress is invalid or is no longer valid.\n\n291\n00:16:16,830 --> 00:16:17,540\nRight?\n\n292\n00:16:17,540 --> 00:16:18,610\nYou've got that lease.\n\n293\n00:16:18,610 --> 00:16:19,832\nIt's good for eight days.\n\n294\n00:16:19,832 --> 00:16:24,140\nSo unless you're trying to renew or\nyou're new to the network and\n\n295\n00:16:24,140 --> 00:16:29,248\nyou need an IP address, then the fact\nthat DHCP down is not gonna hinder much.\n\n296\n00:16:29,248 --> 00:16:32,514\nBut if it's down for long,\nnow I've got new clients coming in,\n\n297\n00:16:32,514 --> 00:16:36,326\nnew devices coming into my network,\nvisitors, vendors, whatever, and\n\n298\n00:16:36,326 --> 00:16:40,621\nyou've got leases that are expiring that\nneed to be renewed, things like that, and\n\n299\n00:16:40,621 --> 00:16:42,645\nthat's where we can run into an issue.\n\n300\n00:16:42,645 --> 00:16:43,620\n>> Right.\n\n301\n00:16:43,620 --> 00:16:48,653\nNow so with a 2012 R2 we do have a high\n\n302\n00:16:48,653 --> 00:16:53,848\navailability and fail over it with DHCP.\n\n303\n00:16:53,848 --> 00:16:57,595\nSo we can implement stuff like that to\nmake sure our clients can still get\n\n304\n00:16:57,595 --> 00:16:59,479\nthose addresses when they need to.\n\n305\n00:16:59,479 --> 00:17:00,188\n>> Exactly.\n\n306\n00:17:00,188 --> 00:17:04,993\nPrior to 2012 one of the issues we had\nwith DHCP was it was unaware of any other\n\n307\n00:17:04,993 --> 00:17:07,640\nDHCP servers on the network.\n\n308\n00:17:07,640 --> 00:17:11,530\nSo it did not recognize or\nknow that there were anybody else,\n\n309\n00:17:11,530 --> 00:17:13,670\nif there was, passing out IP addresses.\n\n310\n00:17:13,670 --> 00:17:17,180\nSo if you set up two DCHP servers,\nyou had to be really careful\n\n311\n00:17:17,180 --> 00:17:20,260\nbecause they couldn't be passing\nout the same pool of addresses and\n\n312\n00:17:20,260 --> 00:17:23,430\nit would be like saying all right, here's\nyou, you can pass out one through ten.\n\n313\n00:17:23,430 --> 00:17:26,260\nI'm over here and\nI'm passing out one through ten, and\n\n314\n00:17:26,260 --> 00:17:27,910\nyou have no idea what\nI've already passed out.\n\n315\n00:17:27,910 --> 00:17:30,670\nSo you give some client number two, and\n\n316\n00:17:30,670 --> 00:17:32,740\nthen I turn around and\ngive some client number two,\n\n317\n00:17:32,740 --> 00:17:37,040\nnow we've got two clients with the same\nIP addresses, and that's not gonna work.\n\n318\n00:17:37,040 --> 00:17:41,060\nSo what we would do is we would\ndo what's called a split scope.\n\n319\n00:17:41,060 --> 00:17:46,880\nWhere we would take a second DHCP server,\nand we in our head think about the pool\n\n320\n00:17:46,880 --> 00:17:51,400\nof addresses that we wanted to pass out,\nand Microsoft had this 80-20 rule.\n\n321\n00:17:51,400 --> 00:17:55,800\nThat was their best practice, where you\nwould take 80% of the addresses and\n\n322\n00:17:55,800 --> 00:18:00,802\nput it on one server and then 20% of the\naddresses and put it on the other server.\n\n323\n00:18:00,802 --> 00:18:04,820\nAnd a lot of times,\nthey would be on a different subnet, and\n\n324\n00:18:04,820 --> 00:18:09,920\nyou'd set up a relay agent to delay\nthe request going to the second server.\n\n325\n00:18:09,920 --> 00:18:12,640\nSo the first server would have plenty\nof time to respond as long as he was\n\n326\n00:18:12,640 --> 00:18:13,720\nup and available.\n\n327\n00:18:13,720 --> 00:18:17,137\nIf he went down, then that relay\nagent would hear that request,\n\n328\n00:18:17,137 --> 00:18:19,228\nrealize that nobody was responding and\n\n329\n00:18:19,228 --> 00:18:23,940\nhe could forward that request on to\nthe other subnet on the other DHCP server.\n\n330\n00:18:23,940 --> 00:18:28,680\nAnd we would then reverse the process cuz\nyou'd have subnet A and subnet B, right?\n\n331\n00:18:28,680 --> 00:18:30,940\nDifferent network addresses.\n\n332\n00:18:30,940 --> 00:18:38,390\nAnd so the DHCP server on subnet A would\nhave 80% of subnet A's IP addresses.\n\n333\n00:18:38,390 --> 00:18:43,270\nThe DHCP server on subnet B would\nhave 20% of subnet A's IP addresses.\n\n334\n00:18:44,740 --> 00:18:50,640\nAnd then the DHCP server on subnet B would\nhave 80% of subnet B's IP addresses,\n\n335\n00:18:50,640 --> 00:18:56,470\nand the DHCP server on subnet A would\nhave 20% of subnet B's IP addresses.\n\n336\n00:18:56,470 --> 00:18:59,110\nSo they'd be providing fault tolerance for\neach other, right?\n\n337\n00:18:59,110 --> 00:19:00,676\nSo if either one of them went down,\n\n338\n00:19:00,676 --> 00:19:03,762\nthe other one could pick up the slack\nuntil we got him up and running.\n\n339\n00:19:03,762 --> 00:19:07,868\nBut you had to be real careful in making\nsure there was no overlap, because again,\n\n340\n00:19:07,868 --> 00:19:08,893\nthey were unaware.\n\n341\n00:19:08,893 --> 00:19:11,422\nBut now, we've got DHCP fail over.\n\n342\n00:19:11,422 --> 00:19:14,350\nWhat?\n\n343\n00:19:14,350 --> 00:19:16,390\nGood stuff, good stuff.\n\n344\n00:19:16,390 --> 00:19:18,240\nAnd are very easy to implement.\n\n345\n00:19:18,240 --> 00:19:18,970\nLet's do this.\n\n346\n00:19:18,970 --> 00:19:21,910\nLet's go and, over here to server one.\n\n347\n00:19:21,910 --> 00:19:23,640\nAnd I don't believe, he is not.\n\n348\n00:19:23,640 --> 00:19:27,734\nSo let's go ahead and\nadd some DHCP to him.\n\n349\n00:19:27,734 --> 00:19:31,314\nAll right, just real quick, you guys\nhave seen this wizard a million times,\n\n350\n00:19:31,314 --> 00:19:33,753\nso I'm not going to tell\nyou about every step, am I?\n\n351\n00:19:33,753 --> 00:19:41,207\nI'm going to pick DHCP,\nadd the features, Next> Next > Install,\n\n352\n00:19:41,207 --> 00:19:46,488\nwhile this guy is installing with 2012 R2.\n\n353\n00:19:46,488 --> 00:19:50,064\nAnd of course everything can be\nmanaged from the PowerShell.\n\n354\n00:19:50,064 --> 00:19:54,096\nAnd here during the break I'll have\nto dig it up and look for it, but\n\n355\n00:19:54,096 --> 00:19:58,633\nthere's a Technet article that lists\nall the new PowerShell commands that\n\n356\n00:19:58,633 --> 00:20:00,594\nthey've added to manage DHCP.\n\n357\n00:20:00,594 --> 00:20:05,686\nAnd there's about 100 of them\nthat runs that command yeah,\n\n358\n00:20:05,686 --> 00:20:09,254\nand a handful have been\nadded new to are R2.\n\n359\n00:20:09,254 --> 00:20:12,507\n>> Yeah, probably give you\nthe ability to create scopes and\n\n360\n00:20:12,507 --> 00:20:15,710\nthings like that, and\nthe advantage of being a script.\n\n361\n00:20:15,710 --> 00:20:16,780\nI like Powershell.\n\n362\n00:20:16,780 --> 00:20:17,290\nHow do you feel?\n\n363\n00:20:17,290 --> 00:20:19,760\nI've warmed up to Powershell\nover the last couple of years.\n\n364\n00:20:19,760 --> 00:20:22,260\nI don't know about you,\nI do like it thought.\n\n365\n00:20:22,260 --> 00:20:25,310\nI was kind of anti Powershell at first.\n\n366\n00:20:25,310 --> 00:20:25,950\n>> Right.\n>> I was like,\n\n367\n00:20:25,950 --> 00:20:28,000\n\"I've got my command prompt,\nI've got the GUI, why do I need it?\"\n\n368\n00:20:28,000 --> 00:20:30,950\n>> You know, I'll tell you.\n\n369\n00:20:30,950 --> 00:20:34,060\nI wasn't a real big fan\nof PowerShell until\n\n370\n00:20:34,060 --> 00:20:35,860\nI discovered that you\ncould push the tab key.\n\n371\n00:20:35,860 --> 00:20:37,980\n>> Yes.\n>> And it would fill it out.\n\n372\n00:20:37,980 --> 00:20:40,960\nYou put in a couple letters,\nyou tab key and fill it out,\n\n373\n00:20:40,960 --> 00:20:42,390\nand you could keep hitting tab.\n\n374\n00:20:42,390 --> 00:20:44,740\nAnd it'll cycle through there.\n\n375\n00:20:44,740 --> 00:20:48,010\nAnd, yeah, after I saw that,\nI was like, wow, yeah.\n\n376\n00:20:48,010 --> 00:20:50,550\n>> It is a beautiful thing.\n\n377\n00:20:50,550 --> 00:20:52,290\nIt's a beautiful thing.\n\n378\n00:20:52,290 --> 00:20:52,910\nAll right.\n\n379\n00:20:52,910 --> 00:20:55,440\nSo DHCP finished up here, next, and\n\n380\n00:20:55,440 --> 00:20:58,510\nI'm just gonna do the initial\nconfiguration of this guy.\n\n381\n00:20:58,510 --> 00:21:00,655\nAuthorize this server in active directory.\n\n382\n00:21:00,655 --> 00:21:06,791\n[SOUND] Does it say?\n\n383\n00:21:06,791 --> 00:21:08,290\nIt does say done.\n\n384\n00:21:08,290 --> 00:21:13,120\nThat's an interesting little\nway to do a progress bar.\n\n385\n00:21:13,120 --> 00:21:16,510\nYou never trust progress bars anyway,\nright, but at least it says done.\n\n386\n00:21:16,510 --> 00:21:21,790\nAll right.\nSo, I got DHTP fired up on this guy and\n\n387\n00:21:21,790 --> 00:21:26,935\nwe should see that he does\nnot have any scopes yet.\n\n388\n00:21:26,935 --> 00:21:28,130\n>> Mm-hm.\n\n389\n00:21:28,130 --> 00:21:30,331\n>> I've got nothing under here.\n\n390\n00:21:30,331 --> 00:21:31,716\n>> All right.\nAnd I really should know\n\n391\n00:21:31,716 --> 00:21:33,527\nwhat this guy's IP address is.\n\n392\n00:21:33,527 --> 00:21:40,060\nLet's check that real quick\n>> So\n\n393\n00:21:40,060 --> 00:21:44,720\nwhat do you need this guy's IP for?\n\n394\n00:21:44,720 --> 00:21:48,382\n>> We're going to go set\nup this fail over, but\n\n395\n00:21:48,382 --> 00:21:50,780\nI've gotta know who the other side is.\n\n396\n00:21:50,780 --> 00:21:53,320\nI'll show you here in just a second.\n\n397\n00:21:53,320 --> 00:21:55,830\nAnd yeah,\nI'm with you on the Powershell thing.\n\n398\n00:21:55,830 --> 00:21:57,830\nThe tab auto-fill, fantastic sorry.\n\n399\n00:21:57,830 --> 00:22:01,380\nForgot to go back to\nthe other conversation.\n\n400\n00:22:01,380 --> 00:22:02,150\nAll right.\nSo yeah.\n\n401\n00:22:02,150 --> 00:22:03,790\nWe got DHCP installed on this guy.\n\n402\n00:22:03,790 --> 00:22:07,000\nNow what I'm gonna do is\nflip back over to DC.\n\n403\n00:22:07,000 --> 00:22:11,204\nSo I've got two DHCP servers, but\nright now if server one, or DC, goes down,\n\n404\n00:22:11,204 --> 00:22:14,610\nwe've got lots of problems cuz\nthat's my domain controller.\n\n405\n00:22:14,610 --> 00:22:16,890\nBut we're forgetting about that for\nright now.\n\n406\n00:22:16,890 --> 00:22:19,620\nIf this guy goes down,\nI have no DHCP available.\n\n407\n00:22:19,620 --> 00:22:20,580\nRight?\n\n408\n00:22:20,580 --> 00:22:22,690\nSo we wanna provide some fault tolerance.\n\n409\n00:22:22,690 --> 00:22:25,800\nSo I'm gonna come over here,\nand right click on IPv4.\n\n410\n00:22:27,060 --> 00:22:29,270\nAnd choose configure failover.\n\n411\n00:22:29,270 --> 00:22:30,743\n>> Hm.\n>> Right?\n\n412\n00:22:30,743 --> 00:22:31,830\n>> Mm hm.\n\n413\n00:22:31,830 --> 00:22:34,562\n>> And then I can choose to\nprovide fall tolerance for\n\n414\n00:22:34,562 --> 00:22:38,280\nall the scopes that exist on this\nserver or just particular scopes.\n\n415\n00:22:38,280 --> 00:22:42,710\nIf I uncheck this,\nthen I can choose just certain scopes.\n\n416\n00:22:42,710 --> 00:22:46,800\nI might not need, one of them might be\na test network, or something like that.\n\n417\n00:22:46,800 --> 00:22:50,830\nA scope from IRND, and maybe I don't\nwanna provide full tolerance for that.\n\n418\n00:22:50,830 --> 00:22:54,480\nSo it's up to you, but I'll go ahead and\nchoose all for this demo.\n\n419\n00:22:54,480 --> 00:22:56,296\n>> Mm hm.\n>> And I'll click next, and\n\n420\n00:22:56,296 --> 00:22:59,330\nthen it's gonna tell us\nwho the partner server is.\n\n421\n00:22:59,330 --> 00:23:00,740\nNow, the partner servers.\n\n422\n00:23:00,740 --> 00:23:01,350\nThe way this works,\n\n423\n00:23:01,350 --> 00:23:05,280\nwith the fail over, you create this\nrelationship between these two servers.\n\n424\n00:23:05,280 --> 00:23:10,870\nA DHCP server, there can only be two DHCP\nservers in a fail over relationship.\n\n425\n00:23:10,870 --> 00:23:14,820\nSo I can't add a third or\na fourth one to this same relationship.\n\n426\n00:23:14,820 --> 00:23:19,695\nBut a DHCP server could be part\nof more than one failover.\n\n427\n00:23:19,695 --> 00:23:20,255\nAll right?\n\n428\n00:23:20,255 --> 00:23:24,966\nSo if wanted to do, let's say between\nserver A and B provide fault tolerance for\n\n429\n00:23:24,966 --> 00:23:29,607\nscope A, then I could go to server A and\nserver C and provide fault tolerance for\n\n430\n00:23:29,607 --> 00:23:30,188\nscope B.\n\n431\n00:23:30,188 --> 00:23:34,297\nSo I don't have to do it, they can\nbe a2part, more than one failover.\n\n432\n00:23:34,297 --> 00:23:36,953\nAnd I'll go ahead and add this guy.\n\n433\n00:23:36,953 --> 00:23:42,560\nWhat did I say it was, 192.168.1.103.\n\n434\n00:23:42,560 --> 00:23:45,782\nAnd I'll click next.\n\n435\n00:23:45,782 --> 00:23:51,620\nAnd you can see that it's\ngoing to give me a name and\n\n436\n00:23:51,620 --> 00:23:59,685\ntypically I'll change that to\nsomething a little more meaningful,\n\n437\n00:23:59,685 --> 00:24:04,148\nwe'll just call it the DC-serve1.\n\n438\n00:24:07,108 --> 00:24:08,455\nSomething like that just\nindicate who's part of it.\n\n439\n00:24:08,455 --> 00:24:12,490\nWhen you set this up,\nyou've got a couple options here.\n\n440\n00:24:12,490 --> 00:24:17,740\nWe've got this Maximum Client Lead Time,\nwe've got the Mode,\n\n441\n00:24:17,740 --> 00:24:20,950\nand then I've got some\nLoad Balancing Percentages here.\n\n442\n00:24:20,950 --> 00:24:22,685\nAnd let's talk about\nthese real Real quick.\n\n443\n00:24:23,705 --> 00:24:27,805\nWhen the original or the,\none of the nodes goes down.\n\n444\n00:24:27,805 --> 00:24:28,365\nRight?\n\n445\n00:24:28,365 --> 00:24:31,850\nThey're going to communicate with each\nother, and they're going to, he's,\n\n446\n00:24:31,850 --> 00:24:35,820\nthe partner's going to realize that\nthe other guy is no longer in business.\n\n447\n00:24:35,820 --> 00:24:41,370\nAnd it needs to determine, should I\ntake over or what do I need to do?\n\n448\n00:24:41,370 --> 00:24:45,970\nSo that maximum client lead time\ncontrols how long it is before\n\n449\n00:24:45,970 --> 00:24:49,630\nhe assumes the full pool of addresses.\n\n450\n00:24:49,630 --> 00:24:52,740\nWhen we set this up, he's going to be\nassigned a percentage of addresses.\n\n451\n00:24:52,740 --> 00:24:56,430\nSo that the backup, let's say you've\ngot a hundred addresses available\n\n452\n00:24:56,430 --> 00:25:00,297\non your primary server there.\n\n453\n00:25:00,297 --> 00:25:04,180\nThe other guy is,\nwell let's back up for a second,\n\n454\n00:25:04,180 --> 00:25:08,930\nlet me cause I need to tell you\nguys what we're talking about here.\n\n455\n00:25:08,930 --> 00:25:12,090\nHot standby mode versus\nload balancing mode.\n\n456\n00:25:12,090 --> 00:25:13,750\nWhat I'm talking about\nis hot standby mode.\n\n457\n00:25:13,750 --> 00:25:15,730\nAnd I'm going to make\nsure I'm clear with that.\n\n458\n00:25:15,730 --> 00:25:18,620\nHot standby means you've got a primary,\nyou got the main one and\n\n459\n00:25:18,620 --> 00:25:19,940\nthe other one's just a standby.\n\n460\n00:25:19,940 --> 00:25:21,250\nHe's not doing anything.\n\n461\n00:25:22,750 --> 00:25:26,040\nLoad balancing is when I split the work\nload up across both of them and\n\n462\n00:25:26,040 --> 00:25:28,300\nthey're both working at the same time.\n\n463\n00:25:28,300 --> 00:25:34,890\nSo if we're in hot stand by mode,\nthat's when I've got to decide two things.\n\n464\n00:25:34,890 --> 00:25:38,490\nOne is how many addresses I am\ngoing to give the standby server.\n\n465\n00:25:38,490 --> 00:25:43,050\nSo if the primary goes down, the standby\nneeds a few addresses that he can\n\n466\n00:25:43,050 --> 00:25:47,130\nuse while waiting to see if\nthe primary is down for good, or\n\n467\n00:25:47,130 --> 00:25:50,690\nif it was just a temporary network\nconnectivity issue or something like that.\n\n468\n00:25:50,690 --> 00:25:52,840\nSo the default is 5%.\n\n469\n00:25:52,840 --> 00:25:57,220\nSo if you give your primary 100 IP\naddresses, do your math real quick,\n\n470\n00:25:57,220 --> 00:25:58,200\nfive addresses, right?\n\n471\n00:25:58,200 --> 00:26:00,510\nGoing to go over to that standby.\n\n472\n00:26:00,510 --> 00:26:04,090\nAnd that way, if he looses\nconnectivity with that primary,\n\n473\n00:26:04,090 --> 00:26:06,660\nhe's got a couple addresses\nthat he can lease out.\n\n474\n00:26:06,660 --> 00:26:09,110\nUntil the primary comes back up.\n\n475\n00:26:09,110 --> 00:26:14,270\nIf he can't talk to the primary by\nwhatever my maximum client lead time is,\n\n476\n00:26:14,270 --> 00:26:16,520\nso, which is by default one hour.\n\n477\n00:26:16,520 --> 00:26:18,400\nThen you're just going to say all\nright I'm going to go ahead and\n\n478\n00:26:18,400 --> 00:26:19,400\ntake over the entire scope.\n\n479\n00:26:20,705 --> 00:26:22,680\nBecause he assumes that\nthe partner is not coming back.\n\n480\n00:26:22,680 --> 00:26:26,620\nAnd he's going to take\nover that entire scope.\n\n481\n00:26:27,700 --> 00:26:30,470\nMicrosoft typically will recommend,\nit depends.\n\n482\n00:26:30,470 --> 00:26:31,430\nOn what you're trying to do.\n\n483\n00:26:31,430 --> 00:26:36,030\nYou might change this to something like\n15 minutes or something like that.\n\n484\n00:26:36,030 --> 00:26:39,370\nAnd your percentage of\naddresses needs to be enough to\n\n485\n00:26:39,370 --> 00:26:41,520\ncover the maximum client lead time.\n\n486\n00:26:41,520 --> 00:26:44,230\nSo if you're going to set\nthat lead time in an hour,\n\n487\n00:26:44,230 --> 00:26:46,950\nhow many addresses do you\nnormally lease out in an hour?\n\n488\n00:26:46,950 --> 00:26:50,520\nIf he's only got five, and you normally\nlease out, on average, fifteen,\n\n489\n00:26:50,520 --> 00:26:52,350\nit's not going to cut it, right?\n\n490\n00:26:52,350 --> 00:26:56,240\nSo you play with those numbers,\nyou set your reserve addresses.\n\n491\n00:26:56,240 --> 00:26:59,990\nAccording to what you\ngot your maximum final.\n\n492\n00:27:01,120 --> 00:27:05,140\nThe other mode is going to be low balance,\n\n493\n00:27:05,140 --> 00:27:10,040\nwhere I got the option to choose\nto how much or what percentage of\n\n494\n00:27:10,040 --> 00:27:14,380\nthe pool goes to each one,\nparticularly may be leave it at 50/50.\n\n495\n00:27:14,380 --> 00:27:19,096\nThe state switch over is for\nwhen if we are in that hot Standby and\n\n496\n00:27:19,096 --> 00:27:22,680\nwe setup our feature, or values up here.\n\n497\n00:27:22,680 --> 00:27:26,550\nWhen it does switch over it\nstays in what is known as a,\n\n498\n00:27:26,550 --> 00:27:30,230\nI can not think of the Microsoft term for\nit, but\n\n499\n00:27:30,230 --> 00:27:35,050\nhe knows that the other note is down but\nhe is not going to assume it is permanent,\n\n500\n00:27:35,050 --> 00:27:38,220\nhe is not going to take\nover the primary role.\n\n501\n00:27:38,220 --> 00:27:41,750\nHe's got the address, he's got the pools,\nbut he's still considered the standby.\n\n502\n00:27:41,750 --> 00:27:44,540\nIf we do that state switch over interval,\nwe can automate that.\n\n503\n00:27:44,540 --> 00:27:48,330\nBy default, you have to manually\nswitch him over to be the primary.\n\n504\n00:27:48,330 --> 00:27:53,050\nIf I set this state switch over interval,\nthat means if, by default,\n\n505\n00:27:53,050 --> 00:27:56,940\n60 minutes, he will take over the role and\nconsider himself the primary.\n\n506\n00:27:56,940 --> 00:27:59,830\nAnd then when the other guy comes back up,\nhe would be the standby.\n\n507\n00:28:01,360 --> 00:28:06,220\nAnd then the last thing we're going to do\nis the message authentication that we use.\n\n508\n00:28:06,220 --> 00:28:09,350\nAnd that's what they're going to use\nto communicate with each other in this\n\n509\n00:28:09,350 --> 00:28:11,055\nrelationship so they can validate.\n\n510\n00:28:11,055 --> 00:28:16,040\nBecause I can maybe try to do a denial\nof service on you if I could trick your\n\n511\n00:28:16,040 --> 00:28:20,140\nDHCP server to thinking the other node\nwas down or something like that so,\n\n512\n00:28:20,140 --> 00:28:25,350\nwe put a little password in there just so\nthat it can authenticate each other.\n\n513\n00:28:25,350 --> 00:28:28,559\nAnd I'll click next and finish.\n\n514\n00:28:30,370 --> 00:28:32,850\nAnd I get a bunch of success messages.\n\n515\n00:28:32,850 --> 00:28:33,570\nI'll click close.\n\n516\n00:28:34,800 --> 00:28:38,710\nAnd then if we flip over to server one,\nand\n\n517\n00:28:38,710 --> 00:28:44,080\nI refresh this console,\nthere is both the super scope\n\n518\n00:28:44,080 --> 00:28:47,900\nas well as the other scope,\nall of the server options are coming over.\n\n519\n00:28:47,900 --> 00:28:49,190\nI don't have any server options.\n\n520\n00:28:49,190 --> 00:28:51,130\nThere's all of my scope options.\n\n521\n00:28:51,130 --> 00:28:55,160\nSame thing with these here, I should see\nmy default gateway addresses that I chose.\n\n522\n00:28:55,160 --> 00:28:57,210\nSo it, it took care of everything and\nthat's it.\n\n523\n00:28:57,210 --> 00:28:58,580\nWe are set up.\n\n524\n00:28:58,580 --> 00:29:00,260\n>> Nice.\n>> It's that easy.\n\n525\n00:29:00,260 --> 00:29:03,950\n>> So then server one,\nsince all that stuff replicated over,\n\n526\n00:29:03,950 --> 00:29:08,768\nthey're going to be talking the whole\ntime so when DC goes down server one's\n\n527\n00:29:08,768 --> 00:29:13,020\ngoing to know what addresses have already\nbeen assigned and that sort of thing, so\n\n528\n00:29:13,020 --> 00:29:14,720\nhe doesn't have to go and talk to DNS or\n\n529\n00:29:14,720 --> 00:29:18,280\nsomebody else to figure out who\nhas what and that sort of thing.\n\n530\n00:29:18,280 --> 00:29:19,400\nHe already knows.\n\n531\n00:29:19,400 --> 00:29:19,940\n>> Exactly.\n\n532\n00:29:19,940 --> 00:29:22,010\nHe would be aware of any\nleases that were available.\n\n533\n00:29:22,010 --> 00:29:22,630\nIn fact, let's see.\n\n534\n00:29:22,630 --> 00:29:25,219\nI don't know if we've got any clients.\n\n535\n00:29:26,540 --> 00:29:30,386\nDon't think we have any clients that are\nactually configured for DHCP right now.\n\n536\n00:29:30,386 --> 00:29:35,010\nI was going to see if there were any\nleases we could see that they had but\n\n537\n00:29:35,010 --> 00:29:36,810\nthere aren't any leases so.\n\n538\n00:29:36,810 --> 00:29:39,660\nThey share their information so that\nthey're both aware of what's going on.\n\n539\n00:29:39,660 --> 00:29:41,350\nAnd, and that's the big improvement.\n\n540\n00:29:41,350 --> 00:29:44,290\nRight, now they're no\nlonger independent and\n\n541\n00:29:44,290 --> 00:29:47,770\nunaware of everything else\nthat's going on in the network.\n\n542\n00:29:47,770 --> 00:29:51,378\nAnd like, \"Hey, we gave some\nintelligence to DHDP.\" [LAUGH] Nice,\n\n543\n00:29:51,378 --> 00:29:55,008\nthey're now self-aware,\nthey're going to take over pretty soon.\n\n544\n00:29:55,008 --> 00:30:00,470\n>> [LAUGH] I was trying to think\nof something funny to say with it.\n\n545\n00:30:00,470 --> 00:30:03,840\n>> Good old Skynet or something, yeah.\n\n546\n00:30:03,840 --> 00:30:07,200\nAll right, What you thinking?\n\n547\n00:30:07,200 --> 00:30:09,880\n>> We've got some more\nstuff to cover with DHCP.\n\n548\n00:30:09,880 --> 00:30:14,760\nWe've got some name protection, and\nsome DNS registration, that sort of thing.\n\n549\n00:30:14,760 --> 00:30:15,460\n>> It won't take very long.\n\n550\n00:30:15,460 --> 00:30:18,180\nYou want to go ahead and knock them out,\nor you want to come back from break?\n\n551\n00:30:18,180 --> 00:30:19,310\n>> Yeah, whichever.\n\n552\n00:30:19,310 --> 00:30:20,350\n>> Let's do it real quick.\n\n553\n00:30:20,350 --> 00:30:21,470\n>> Let's do it real quick.\n\n554\n00:30:21,470 --> 00:30:22,430\n>> So let me flip back over here.\n\n555\n00:30:22,430 --> 00:30:25,180\nThese are pretty straight forward options.\n\n556\n00:30:25,180 --> 00:30:29,870\nThere's something called name squatting\nthat we have to protect against.\n\n557\n00:30:29,870 --> 00:30:34,050\nAnd what that means is, in a normal domain\nenvironment, you have to create an account\n\n558\n00:30:34,050 --> 00:30:37,190\nin Active Directory, so you're not going\nto have two machines with the same name.\n\n559\n00:30:37,190 --> 00:30:39,030\nIt won't let you join that domain.\n\n560\n00:30:39,030 --> 00:30:42,600\nBut you can have some non domain members,\nor some non Microsoft machines,\n\n561\n00:30:42,600 --> 00:30:44,730\nnon Windows machines\ncoming into your network.\n\n562\n00:30:44,730 --> 00:30:48,410\nAnd what could happen, is let's say you've\nalready got a client one on your network.\n\n563\n00:30:48,410 --> 00:30:51,820\nAnd some vendor comes in\nwith a laptop Linux and\n\n564\n00:30:51,820 --> 00:30:53,760\nit happens to be name client one.\n\n565\n00:30:53,760 --> 00:30:59,460\nWell when he comes in and connects to your\nnetwork he's going to try to call up DHCP,\n\n566\n00:30:59,460 --> 00:31:02,030\nor DNS I should say and\n\n567\n00:31:02,030 --> 00:31:07,210\nregister his name with maybe,\nstatically mapped to an IP address.\n\n568\n00:31:07,210 --> 00:31:10,920\nAnd he can end up updating\nthe existing record for\n\n569\n00:31:10,920 --> 00:31:14,330\nclient one to this laptop's IP address.\n\n570\n00:31:14,330 --> 00:31:17,190\nWhich is obviously going\nto cause problems, so\n\n571\n00:31:17,190 --> 00:31:22,130\nname protection is just a way that\nI can prevent that DHCP will have\n\n572\n00:31:22,130 --> 00:31:27,630\nwhat's called a DHC ID that's a resource\nrecord that gets created in DNS.\n\n573\n00:31:27,630 --> 00:31:32,293\nAnd it will denote who the original\nrequestor of that name registration was.\n\n574\n00:31:32,293 --> 00:31:35,428\nAnd so anytime they try to do an update,\n\n575\n00:31:35,428 --> 00:31:40,561\nif it's not the original requestor\nit will refuse that update.\n\n576\n00:31:40,561 --> 00:31:48,172\nSo we can do that in there,\nwe can just go into our DHCP,\n\n577\n00:31:48,172 --> 00:31:52,805\nIPB four I pull up my properties,\n\n578\n00:31:52,805 --> 00:31:56,620\nand I have my advanced-\n>> DNS tab?\n\n579\n00:31:56,620 --> 00:31:58,810\n>> DNS tab, there we go, thank you.\n\n580\n00:31:58,810 --> 00:32:00,285\nAnd then right there at the bottom,\n\n581\n00:32:00,285 --> 00:32:04,270\nDHCP name protection is\ndisabled at the server level.\n\n582\n00:32:04,270 --> 00:32:06,130\nI can click Configure to turn that on.\n\n583\n00:32:07,970 --> 00:32:10,286\nAnd it's just a matter of putting\na check mark in that check box there.\n\n584\n00:32:10,286 --> 00:32:11,436\n>> [LAUGH]\n>> I know, it's funny,\n\n585\n00:32:11,436 --> 00:32:14,980\nthey give you a button, that opens up a\nwindow, that you can put a check mark in.\n\n586\n00:32:14,980 --> 00:32:17,990\nWhy not just put that\ncheck mark right there?\n\n587\n00:32:17,990 --> 00:32:20,701\n>> [LAUGH]\n>> Because it gives them a chance to\n\n588\n00:32:20,701 --> 00:32:21,995\ntell you all about it I guess.\n\n589\n00:32:21,995 --> 00:32:26,259\n>> Well maybe cuz now that box is there\nand so then in the next iteration of,\n\n590\n00:32:26,259 --> 00:32:29,786\nwhenever they have more room to enter-\n>> Good point, yeah.\n\n591\n00:32:29,786 --> 00:32:30,661\n>> Maybe it's a placeholder.\n\n592\n00:32:30,661 --> 00:32:33,203\n>> Some more advanced options or\nsomething, very good.\n\n593\n00:32:33,203 --> 00:32:36,272\nAll right so we turn that on, and\n\n594\n00:32:36,272 --> 00:32:39,870\nthe other thing was-\n>> DNS registration.\n\n595\n00:32:39,870 --> 00:32:43,630\n>> Yes, DNS registration which\nis right here on that same tab.\n\n596\n00:32:43,630 --> 00:32:47,690\nNormally what happens with our\nmodern Windows 8, Windows 7,\n\n597\n00:32:47,690 --> 00:32:52,560\nXP, when a client gets an IP\naddress from the DHCP server,\n\n598\n00:32:52,560 --> 00:32:56,980\nthe client is then gonna turn around and\ntry to do a dynamic update with DNS.\n\n599\n00:32:56,980 --> 00:33:00,730\nSay here's my name, this is the IP\naddress that I just got from DHCP,\n\n600\n00:33:00,730 --> 00:33:03,050\nmake an A record for me.\n\n601\n00:33:03,050 --> 00:33:07,810\nAnd then DHCP, in the background is\nregistering the PTR record for the client.\n\n602\n00:33:07,810 --> 00:33:12,200\nHe's calling up DNS, saying here's the IP\naddress, I just leased it out to this\n\n603\n00:33:12,200 --> 00:33:18,370\nparticular name, make a PTR record in that\nreverse look up zone, if you have one.\n\n604\n00:33:18,370 --> 00:33:19,420\nWhich is the default here.\n\n605\n00:33:19,420 --> 00:33:22,480\nEnable dynamic updates according\nto the settings below.\n\n606\n00:33:22,480 --> 00:33:24,840\nAnd basically, if the client requests, and\n\n607\n00:33:24,840 --> 00:33:27,190\nWindows 8 won't because\nit registers its own.\n\n608\n00:33:27,190 --> 00:33:32,770\nWe might want to have the DHCP\nserver create those records.\n\n609\n00:33:32,770 --> 00:33:35,910\nWe want the DHCP server to\nbe the owner of the record,\n\n610\n00:33:35,910 --> 00:33:38,230\nin which case we can uncheck that.\n\n611\n00:33:38,230 --> 00:33:40,370\nWhy are all my options grayed out?\n\n612\n00:33:43,286 --> 00:33:47,661\nHm, that's interesting, we'll have to\ncheck and see why they're all grayed out.\n\n613\n00:33:51,621 --> 00:33:53,286\nLet's try that again.\n\n614\n00:33:55,536 --> 00:33:58,245\nAm I not the DHCP admin on this guy?\n\n615\n00:33:58,245 --> 00:34:00,051\n>> [LAUGH]\n>> Anyway,\n\n616\n00:34:00,051 --> 00:34:04,883\nnormally there's a couple\noptions in here and I can say,\n\n617\n00:34:04,883 --> 00:34:09,843\nalways update,\nalways dynamically update DNS records.\n\n618\n00:34:09,843 --> 00:34:15,970\n>> And that's gonna force the DHCP server\nto do the request on behalf of the client.\n\n619\n00:34:15,970 --> 00:34:20,440\nAnd in that way the DHCP server is\nthe owner of those resource records and\n\n620\n00:34:20,440 --> 00:34:21,890\ncan make changes to them.\n\n621\n00:34:21,890 --> 00:34:24,800\nLike if the client calls up to renew\na lease and it has to get a different IP\n\n622\n00:34:24,800 --> 00:34:30,510\naddress, DHCP can reach out and\nmodify that record for them.\n\n623\n00:34:30,510 --> 00:34:32,245\nSo that's what that option is for there.\n\n624\n00:34:32,245 --> 00:34:36,282\n>> Hey, Jason,\njump over to my machine real quick.\n\n625\n00:34:36,282 --> 00:34:40,350\nAnd so I'll pull it up on\nanother little test computer.\n\n626\n00:34:40,350 --> 00:34:42,570\nBut yeah, sure enough,\nin yours being all grayed out,\n\n627\n00:34:42,570 --> 00:34:45,490\nnow f it's unchecked,\nall these options are grayed out.\n\n628\n00:34:45,490 --> 00:34:50,230\nBut if it is checked, we can go and\nclick through our options there.\n\n629\n00:34:50,230 --> 00:34:52,670\n>> Yeah, and as Nate's showing you guys,\nthat's the default there,\n\n630\n00:34:52,670 --> 00:34:55,720\ndynamically update records\nif requested by the client.\n\n631\n00:34:55,720 --> 00:34:59,400\nThe one we would choose there is always\ndynamically update DNS records and\n\n632\n00:34:59,400 --> 00:35:03,200\nthat would give the DHCP server\nownership of those records.\n\n633\n00:35:03,200 --> 00:35:05,453\n>> Right, nice.\n\n634\n00:35:05,453 --> 00:35:07,470\nAll right, yeah.\n\n635\n00:35:07,470 --> 00:35:09,430\nAnything else to add with those?\n\n636\n00:35:09,430 --> 00:35:13,860\n>> I think that is just about everything\nwe need for that particular objective.\n\n637\n00:35:13,860 --> 00:35:18,800\nThat's all the new features and\ncool stuff we can do with DHCP.\n\n638\n00:35:18,800 --> 00:35:19,590\n>> Nice.\n\n639\n00:35:19,590 --> 00:35:23,470\nAll right, well we are up here on break\ntime, so when we come back we got some\n\n640\n00:35:23,470 --> 00:35:27,480\nmore good DNS stuff to get to\non this set of objectives.\n\n641\n00:35:27,480 --> 00:35:29,217\n>> Yeah.\n>> So we'll save all that for\n\n642\n00:35:29,217 --> 00:35:30,161\nafter the break.\n\n643\n00:35:30,161 --> 00:35:36,536\n[SOUND].\n\n644\n00:35:36,536 --> 00:35:38,203\nAll right, welcome back.\n\n645\n00:35:38,203 --> 00:35:40,238\nAll right, so where we left off,\n\n646\n00:35:40,238 --> 00:35:43,590\nwe were just getting into\ntalking about good old DNS.\n\n647\n00:35:43,590 --> 00:35:46,110\nAnd specifically about DNS,\n\n648\n00:35:46,110 --> 00:35:50,820\nsome of the security stuff that\nwe can do to lock down DNS.\n\n649\n00:35:50,820 --> 00:35:54,450\nTo kind of optimize it and\nmake sure that our\n\n650\n00:35:54,450 --> 00:35:58,890\nclients are getting the responses that\neveryone, actually they always get.\n\n651\n00:35:58,890 --> 00:35:59,390\n>> Exactly, exactly.\n\n652\n00:36:00,870 --> 00:36:05,078\nIn our security episodes,\nwe've talked about DNS as a big target.\n\n653\n00:36:05,078 --> 00:36:08,452\nI mean it's one of the things that the bad\nguys are gonna try to manipulate because\n\n654\n00:36:08,452 --> 00:36:11,246\nthere are so many different types\nof attacks I can base off of that.\n\n655\n00:36:11,246 --> 00:36:15,922\nIf I can get access to DNS, we can start\ndoing phishing and pharming scams,\n\n656\n00:36:15,922 --> 00:36:18,470\nwe can do denial of service against DNS.\n\n657\n00:36:18,470 --> 00:36:24,650\nDifferent types of attacks that, if DNS is\ncompromised, we can expose ourselves too.\n\n658\n00:36:24,650 --> 00:36:27,750\nSo it's important that we do\nkeep it as secure as we can.\n\n659\n00:36:30,130 --> 00:36:31,830\nSo we've got a few new things we can do.\n\n660\n00:36:31,830 --> 00:36:35,499\nWe've got DNSSEC, which we're gonna\ntalk about which is not really,\n\n661\n00:36:35,499 --> 00:36:39,048\nI'm trying to think if that was,\nthey've made some improvements,\n\n662\n00:36:39,048 --> 00:36:42,800\nin 2012 R2 they've made it\nmuch easier to configure.\n\n663\n00:36:42,800 --> 00:36:47,437\nThere's a wizard-driven\ninterface that is fantastic cuz\n\n664\n00:36:47,437 --> 00:36:51,150\nDNSSEC is not simple\nwhen it comes down to it.\n\n665\n00:36:51,150 --> 00:36:55,273\nCuz we've talked about, I think in\nanother episode but I'm not sure, so\n\n666\n00:36:55,273 --> 00:36:57,080\nlet's refresh if we haven't.\n\n667\n00:36:57,080 --> 00:36:58,908\nWe'll talk about it here.\n\n668\n00:36:58,908 --> 00:37:01,597\nDNSSEC is\n\n669\n00:37:01,597 --> 00:37:06,320\na addition to the DNS protocol that we\ncan use to secure those DNS records.\n\n670\n00:37:06,320 --> 00:37:11,534\nIt basically allows the DNS servers to\ndigitally sign the query responses that\n\n671\n00:37:11,534 --> 00:37:17,470\nare going out when a client queries for,\nhey what's the IP address of client one.\n\n672\n00:37:17,470 --> 00:37:20,620\n>> DNS responds with,\nhere's the IP address and\n\n673\n00:37:20,620 --> 00:37:22,420\nwe're gonna digitally sign that record.\n\n674\n00:37:22,420 --> 00:37:23,900\nSo I can get two things out of that,\nright?\n\n675\n00:37:23,900 --> 00:37:26,520\nWe've talked about digital\nsignatures in other episodes.\n\n676\n00:37:26,520 --> 00:37:28,740\nBy providing that signature\nI can do two things.\n\n677\n00:37:28,740 --> 00:37:33,080\nI get non-repudiation, I know that that\nresource, that answer, that response,\n\n678\n00:37:33,080 --> 00:37:35,980\nis coming from my DNS server and\n\n679\n00:37:35,980 --> 00:37:39,660\nnot some rogue DNS server that\nsome bad guy's put on my network.\n\n680\n00:37:39,660 --> 00:37:43,750\nAnd two, I know that the information\nin that response has not been modified.\n\n681\n00:37:43,750 --> 00:37:46,650\nSo I don't have to worry about somebody\ntrying to alter that stuff and\n\n682\n00:37:46,650 --> 00:37:49,410\nslip that back in, and\ngive me the wrong answer and\n\n683\n00:37:49,410 --> 00:37:53,930\ntry to do phishing scams and\nthings like that, or pharming scams.\n\n684\n00:37:53,930 --> 00:37:58,060\nSo that's really what we are trying to do,\nis secure that DNS so we can tell, and\n\n685\n00:37:58,060 --> 00:38:03,510\nit digitally signs the zone as well for\nzone transfers and things like that.\n\n686\n00:38:03,510 --> 00:38:06,500\nAnd with the wizard it's\nfairly easy to implement.\n\n687\n00:38:06,500 --> 00:38:08,890\nSo let's go,\nyou want to go take a peek at it?\n\n688\n00:38:10,710 --> 00:38:11,829\n>> Yeah, let's do that.\n\n689\n00:38:11,829 --> 00:38:16,660\nAnd Mike, I believe on your machine there\nyou've got a, yep, a little wizard here.\n\n690\n00:38:16,660 --> 00:38:23,040\n>> I do, I'm currently on a DC which is\nalso our DNS server on this lab machines.\n\n691\n00:38:23,040 --> 00:38:27,497\nAnd I'm gonna expand it out,\nwe can see I've got, just standard DNS,\n\n692\n00:38:27,497 --> 00:38:30,184\nit's got one zone here for contoso.com.\n\n693\n00:38:30,184 --> 00:38:34,536\nAnd I'm gonna go down to contoso.com and\nI'm gonna right-click on it.\n\n694\n00:38:34,536 --> 00:38:39,170\nAnd I'm gonna go down to DNSSEC and\nchoose to sign the zone.\n\n695\n00:38:39,170 --> 00:38:43,490\nAnd that's gonna launch my DNSSEC wizard.\n\n696\n00:38:43,490 --> 00:38:47,820\nAnd once again, it's just\nan extension to the DNS protocol.\n\n697\n00:38:47,820 --> 00:38:50,010\nAnd I'll click Next.\n\n698\n00:38:50,010 --> 00:38:51,730\nAnd I've got a few options here.\n\n699\n00:38:51,730 --> 00:38:53,960\nI can customize my zone\nsigning parameters,\n\n700\n00:38:53,960 --> 00:38:56,290\nthis is done on a per zone basis.\n\n701\n00:38:56,290 --> 00:39:00,750\nSo if you have several different zones on\nyour DNS server, you might choose to not\n\n702\n00:39:00,750 --> 00:39:05,695\nsign one of those zones, or have different\nsigning options on one of those zones,\n\n703\n00:39:05,695 --> 00:39:07,780\nso it's done on a per zone basis.\n\n704\n00:39:07,780 --> 00:39:10,120\nYou can use the default settings.\n\n705\n00:39:10,120 --> 00:39:14,710\nI'm pretty much going to use the default\nsettings, but I wanna chose Customize so\n\n706\n00:39:14,710 --> 00:39:18,450\nI can still show you each screen\nalong the way on this wizard.\n\n707\n00:39:18,450 --> 00:39:21,210\nBut I'm not gonna change anything for\nthe most part.\n\n708\n00:39:21,210 --> 00:39:25,630\nYou can also say sign the zone with\nparameters of an existing zone.\n\n709\n00:39:25,630 --> 00:39:28,863\nSo if you already gone through\nthis wizard on one of your zones,\n\n710\n00:39:28,863 --> 00:39:32,828\nand then later on you add another zone\nto that DNS server and you decide, hey,\n\n711\n00:39:32,828 --> 00:39:35,704\nI just want to use the same\nthing I did on that first zone.\n\n712\n00:39:35,704 --> 00:39:38,429\nAll you can do is tell it what zone it is\nand it'll just copy the settings right\n\n713\n00:39:38,429 --> 00:39:40,568\nover, So I don't have to go all\nthe way through the wizard.\n\n714\n00:39:40,568 --> 00:39:42,135\nSo very cool option there.\n\n715\n00:39:42,135 --> 00:39:46,488\nSo I'm gonna choose Customize the zone\nsigning parameter so we can see them all.\n\n716\n00:39:46,488 --> 00:39:47,300\nThen I'll click next.\n\n717\n00:39:47,300 --> 00:39:50,864\nAnd the first thing it wants to\nknow is who is the key master,\n\n718\n00:39:50,864 --> 00:39:52,433\nthe one that generates and\n\n719\n00:39:52,433 --> 00:39:57,229\nmanages the cryptographic keys we're\ngonna use to do the digital signatures.\n\n720\n00:39:57,229 --> 00:40:00,790\nThis guy is going,\nhe's my only one at this point, so\n\n721\n00:40:00,790 --> 00:40:03,270\nhe's gonna be my key master.\n\n722\n00:40:03,270 --> 00:40:04,980\nIf I wanted to choose another one,\nI could, and\n\n723\n00:40:04,980 --> 00:40:08,510\nI could specify who that\nwas here in this dialogue.\n\n724\n00:40:08,510 --> 00:40:09,430\nI'll click next.\n\n725\n00:40:11,200 --> 00:40:14,170\nAnd then it's a little intro screen\ntalking about the key signing key.\n\n726\n00:40:14,170 --> 00:40:16,710\nThere's two keys we're gonna generate.\n\n727\n00:40:16,710 --> 00:40:21,010\nThere's a zone signing key which is gonna\nactually do the signatures to the records.\n\n728\n00:40:21,010 --> 00:40:22,550\nAnd to the zone itself.\n\n729\n00:40:22,550 --> 00:40:25,830\nAnd then there's the key signing key that\ngoing to protect the zone signing key.\n\n730\n00:40:25,830 --> 00:40:28,750\nAll right, so\nwe got a little layer of protection there.\n\n731\n00:40:28,750 --> 00:40:29,990\nI'm going to click next.\n\n732\n00:40:31,410 --> 00:40:35,540\nAnd I don't have a key currently, so\nI'm going to create one by clicking Add.\n\n733\n00:40:36,850 --> 00:40:41,090\nAnd then it's going to give me the option\nto either generate new signing keys or\n\n734\n00:40:41,090 --> 00:40:43,670\nuse pregenerated keys.\n\n735\n00:40:43,670 --> 00:40:46,970\nI'm just gonna let it\ngenerate the keys for me.\n\n736\n00:40:46,970 --> 00:40:48,960\nI'm not going to change\nany of these options, but\n\n737\n00:40:48,960 --> 00:40:54,280\nI do want to point out that the key\nlength on the key signing key is 2048,\n\n738\n00:40:54,280 --> 00:40:59,210\nand the rollover frequency is 755.\n\n739\n00:40:59,210 --> 00:41:01,270\nSo relatively long time.\n\n740\n00:41:01,270 --> 00:41:06,151\nWe don't replace this key nearly as often\nas we do the zone signing key itself.\n\n741\n00:41:08,230 --> 00:41:11,800\nSo I'll click Okay on that and\nit will generate that key for me.\n\n742\n00:41:12,810 --> 00:41:13,880\nAnd then I'm going to click Next.\n\n743\n00:41:15,430 --> 00:41:17,220\nAnd then I've got my zone signing key.\n\n744\n00:41:17,220 --> 00:41:17,810\nSame thing.\n\n745\n00:41:17,810 --> 00:41:21,350\nIt's going to tell me that this is the one\nthat actually does the signatures on\n\n746\n00:41:21,350 --> 00:41:22,020\nthe zone data.\n\n747\n00:41:23,320 --> 00:41:27,770\nWe will click Next, and\nAdd and same thing.\n\n748\n00:41:27,770 --> 00:41:29,650\nI am just going to use the defaults but\n\n749\n00:41:29,650 --> 00:41:32,360\nnotice the key length on\nthis one is only 1024.\n\n750\n00:41:32,360 --> 00:41:35,090\nShorter keylength,\nmaybe not as secure, but\n\n751\n00:41:35,090 --> 00:41:39,560\nless processing power to work with\nthat key, so I have a much longer,\n\n752\n00:41:39,560 --> 00:41:44,770\nstronger key protecting this key,\nbut this key is not as long.\n\n753\n00:41:44,770 --> 00:41:46,790\nAnd it changes every 90 days, so\n\n754\n00:41:46,790 --> 00:41:52,060\nI'm not as worried about having that long\nkey length, because I'm gonna change it.\n\n755\n00:41:52,060 --> 00:41:55,830\nHopefully, the idea is you're not gonna\nbe able to break that in 90 days, and\n\n756\n00:41:55,830 --> 00:41:59,540\nI'll be changing keys by then,\nso we're in the clear.\n\n757\n00:41:59,540 --> 00:42:04,479\nClick OK, and I've got my zone\nsigning key and I'm gonna click Next.\n\n758\n00:42:06,210 --> 00:42:12,630\nAnd then for DNSSEC or DNSSEC3, DNSSEC3\nis the newer version of NSEC or N-S-E-C.\n\n759\n00:42:12,630 --> 00:42:14,295\nI don't know what, did I just say DNSSEC?\n\n760\n00:42:14,295 --> 00:42:15,160\n>> Mm-hm.\n\n761\n00:42:15,160 --> 00:42:17,050\n>> NSEC, sorry guys.\n\n762\n00:42:17,050 --> 00:42:20,940\nYeah, NSEC is my Net Secure.\n\n763\n00:42:20,940 --> 00:42:26,680\nWhat this is for is if you query DNS for\na name that doesn't exist,\n\n764\n00:42:26,680 --> 00:42:30,240\nwell then there is no record in there for\nit to return to right, so\n\n765\n00:42:30,240 --> 00:42:32,880\nit can't digitally sign the answer and\nsend it back to you.\n\n766\n00:42:32,880 --> 00:42:36,775\nSo how do I know if I get a response\nfrom my DNS server, that says,\n\n767\n00:42:36,775 --> 00:42:40,470\nName can't be found,\nhow do I know it's from my DNS server?\n\n768\n00:42:40,470 --> 00:42:43,180\nCould be somebody trying to do\na denial of service, right?\n\n769\n00:42:43,180 --> 00:42:45,250\nSlipping in there and\njust telling my computer, oh yeah,\n\n770\n00:42:45,250 --> 00:42:47,000\nthat name can't be found.\n\n771\n00:42:47,000 --> 00:42:52,580\nSo Net Secure is going to give\nit a way to send back a record.\n\n772\n00:42:52,580 --> 00:42:56,925\nSaying the name does not exist and\nallow it to digitally sign that.\n\n773\n00:42:56,925 --> 00:43:02,360\nAnd NSEC3 is just the latest\niteration of that.\n\n774\n00:43:02,360 --> 00:43:03,240\nWe'll click Next.\n\n775\n00:43:05,470 --> 00:43:11,010\nAnd for the trust anchors these\nare the servers that have\n\n776\n00:43:11,010 --> 00:43:16,510\nthe key because my client, when you query\nDNS, he's gonna send you back a response.\n\n777\n00:43:16,510 --> 00:43:18,730\nThat response is gonna\nbe digitally signed.\n\n778\n00:43:18,730 --> 00:43:20,560\nAnd as we've talked\nabout in other episodes,\n\n779\n00:43:20,560 --> 00:43:25,220\nthat means it's using its private\nkey to do that digital signature.\n\n780\n00:43:25,220 --> 00:43:28,120\nWhich means I need the public key\n\n781\n00:43:28,120 --> 00:43:32,470\nto verify that it was encrypted in\nthe first place with that private key.\n\n782\n00:43:32,470 --> 00:43:33,820\nAnd I need to know where to get it.\n\n783\n00:43:33,820 --> 00:43:35,500\nAnd that's what my trust\nanchors are all about.\n\n784\n00:43:35,500 --> 00:43:40,520\nThese are the ones that I can get\na copy of that certificate and\n\n785\n00:43:40,520 --> 00:43:44,850\npublic key that we're using for DNSSEC.\n\n786\n00:43:44,850 --> 00:43:48,920\nSo typically you have got enable automatic\nupdate of trust anchors on key rollover.\n\n787\n00:43:48,920 --> 00:43:53,560\nSo as that key changes it's gonna\nautomatically update the trust anchors.\n\n788\n00:43:53,560 --> 00:43:55,660\nThat's definitely a good thing.\n\n789\n00:43:55,660 --> 00:43:58,300\nAnd then enable the distribution\nof trust anchor of this zone.\n\n790\n00:43:58,300 --> 00:44:04,340\nIf I have more than one DNS server and\nif it wasn't active directory integrated,\n\n791\n00:44:04,340 --> 00:44:06,280\nthen I would wanna make\nsure I enabled that so\n\n792\n00:44:06,280 --> 00:44:10,196\nthat it would allow that key to be\nsent over to the other DNS servers.\n\n793\n00:44:10,196 --> 00:44:10,993\nRight?\n\n794\n00:44:10,993 --> 00:44:14,305\n[COUGH] Excuse me.\n\n795\n00:44:14,305 --> 00:44:14,865\nClick Next.\n\n796\n00:44:16,915 --> 00:44:19,765\nAnd this is the signing and\npulling parameters,\n\n797\n00:44:19,765 --> 00:44:23,345\njust typically again don't\nchange any of these options.\n\n798\n00:44:23,345 --> 00:44:27,975\nHow it's applying that digital\nsignature using SHA1 and SHA256.\n\n799\n00:44:29,175 --> 00:44:30,875\nWe'll just ahead and click Next.\n\n800\n00:44:32,655 --> 00:44:40,620\nAnd one last look at our nice tidy zone,\nall right.\n\n801\n00:44:40,620 --> 00:44:42,260\nI am a little OCD about things like that,\nand\n\n802\n00:44:42,260 --> 00:44:44,350\nyou will see what I mean here in a second,\nI am going to click Next.\n\n803\n00:44:46,780 --> 00:44:50,060\nAnd the zone is successfully signed.\n\n804\n00:44:50,060 --> 00:44:50,830\nWe'll click Finish.\n\n805\n00:44:52,420 --> 00:44:54,675\nAnd then I'm going to refresh my zone.\n\n806\n00:44:54,675 --> 00:44:58,445\n>> [LAUGH]\n>> And you can see what I mean, right.\n\n807\n00:44:58,445 --> 00:44:59,240\n>> [LAUGH]\n>> All right.\n\n808\n00:44:59,240 --> 00:45:03,900\nNow it's no longer nearly as easy to\nlook through this information [LAUGH]\n\n809\n00:45:03,900 --> 00:45:06,680\nbecause I have all\nthe keys that are there.\n\n810\n00:45:06,680 --> 00:45:09,120\nI've got my resource record signatures.\n\n811\n00:45:09,120 --> 00:45:12,340\nI've got my NEC secure\nrecords that it generates.\n\n812\n00:45:12,340 --> 00:45:14,050\nAnd you can see it\ngenerates a lot of them.\n\n813\n00:45:15,570 --> 00:45:18,550\nSo again,\nthe zone is no longer neat and tidy.\n\n814\n00:45:18,550 --> 00:45:19,980\nBut I'll give you a hint, guys.\n\n815\n00:45:19,980 --> 00:45:23,040\nWhen I'm out here working with this,\nsort it by type.\n\n816\n00:45:23,040 --> 00:45:23,600\nRight?\n\n817\n00:45:23,600 --> 00:45:26,360\nAnd now I can find all my\nA records if I need to.\n\n818\n00:45:26,360 --> 00:45:30,050\nAnd I don't have to thumb\nthrough 100 different NSEC and\n\n819\n00:45:30,050 --> 00:45:33,660\nresource record signatures\nto find that thing.\n\n820\n00:45:33,660 --> 00:45:36,690\nBut that's it.\nYou'll see that now over here on the left,\n\n821\n00:45:36,690 --> 00:45:37,920\nyou can see that icon.\n\n822\n00:45:37,920 --> 00:45:42,680\nThere's a little lock appearing\non that particular zone,\n\n823\n00:45:42,680 --> 00:45:46,324\nindicating that that zone\nis now secured with DNSSEC.\n\n824\n00:45:47,500 --> 00:45:50,650\n>> All right Mike, so\nthen from the client's side.\n\n825\n00:45:50,650 --> 00:45:53,960\nSo now that we've enabled DNS,\nwe've assigned the zone.\n\n826\n00:45:53,960 --> 00:45:59,150\nFrom the client's side,\nwhat does it see that's different?\n\n827\n00:45:59,150 --> 00:46:01,250\n>> Now that's a good point,\nthat's a very good point.\n\n828\n00:46:01,250 --> 00:46:06,500\nWe now need to let the clients know,\nand I gotta remember where to do that.\n\n829\n00:46:06,500 --> 00:46:10,720\nWe've gotta let the clients know that\nthe zone is signed and to expect that,\n\n830\n00:46:10,720 --> 00:46:14,810\nbecause they've gotta go get the key and\nbe able to decrypt that signature and\n\n831\n00:46:14,810 --> 00:46:16,470\nverify that response.\n\n832\n00:46:16,470 --> 00:46:20,200\nSo we're going to be using\ngroup policy to do that.\n\n833\n00:46:20,200 --> 00:46:24,210\nWe actually add it to the name\nresolution policy table.\n\n834\n00:46:24,210 --> 00:46:28,780\nAnd that's gonna inform the clients that\nthe zone has been digitally signed, and\n\n835\n00:46:28,780 --> 00:46:33,090\nthey need to check for the key and\nverify that signature.\n\n836\n00:46:33,090 --> 00:46:36,811\nI'm gonna open up root policy management,\nand\n\n837\n00:46:36,811 --> 00:46:40,633\nI'm gonna try to remember\nwhere that option is.\n\n838\n00:46:40,633 --> 00:46:47,054\nI'm gonna modify my\ndefault domain policy And\n\n839\n00:46:47,054 --> 00:46:54,675\nit's gonna be user policies.\n\n840\n00:46:54,675 --> 00:46:58,769\nWindows I think hopefully you're\nlooking it up over there for me?\n\n841\n00:46:58,769 --> 00:46:59,732\n>> Mm-hm.\n\n842\n00:46:59,732 --> 00:47:02,890\n>> I wanna say its under security and\nthen it might\n\n843\n00:47:05,120 --> 00:47:09,640\nbe down in network access protection\nbecause that's also where we use our.\n\n844\n00:47:09,640 --> 00:47:10,425\nIt's not.\n\n845\n00:47:14,716 --> 00:47:15,800\nLet me.\n\n846\n00:47:17,841 --> 00:47:22,465\n>> Try in computer configuration,\npolicies,\n\n847\n00:47:22,465 --> 00:47:27,216\nWindows settings, name resolution policy.\n\n848\n00:47:27,216 --> 00:47:28,540\n>> Right above security.\n\n849\n00:47:28,540 --> 00:47:31,912\nIt was a snake, he would've bit me,\nas my mom used to like to say.\n\n850\n00:47:31,912 --> 00:47:34,170\nAll right, there we go,\ngood job, thank you, sir.\n\n851\n00:47:34,170 --> 00:47:38,260\nSo there's my name resolution policy\ntable and this has been added so\n\n852\n00:47:38,260 --> 00:47:43,420\nI've got this DNSSEC tag here and\nall I'm going to do\n\n853\n00:47:43,420 --> 00:47:48,590\nis tell it what suffix, which part of\nthe name space does this rule apply to.\n\n854\n00:47:48,590 --> 00:47:51,655\nIn our case,\nthat's going to be contoso.com.\n\n855\n00:47:51,655 --> 00:47:55,155\nI don't have to tell it who\nthe certification authority is.\n\n856\n00:47:55,155 --> 00:48:00,948\nThen down here DNSSEC enable DNSEC in this\nrule, and then I've got two options here,\n\n857\n00:48:00,948 --> 00:48:06,028\nrequire DNS clients to check the name and\naddress data has been validated.\n\n858\n00:48:06,028 --> 00:48:09,275\nI mean, that's kind of\nthe reason we're doing this, so\n\n859\n00:48:09,275 --> 00:48:11,180\nI definitely wanna choose that.\n\n860\n00:48:11,180 --> 00:48:14,335\nWe're not gonna be using IPsec\nbetween the server and the client.\n\n861\n00:48:14,335 --> 00:48:19,120\nThat might be a good option, depending on\nhow secure your network needed to be, but\n\n862\n00:48:19,120 --> 00:48:22,540\nwe'd have to set up our IPsec policies and\nthings like that.\n\n863\n00:48:22,540 --> 00:48:24,690\nAnd then don't forget to click create.\n\n864\n00:48:24,690 --> 00:48:29,060\nJust filling this in,\nnow you've got to click create and\n\n865\n00:48:29,060 --> 00:48:32,090\nwhat that does is it kind of wipes out,\nthis is like a form and\n\n866\n00:48:32,090 --> 00:48:36,590\nif I scroll down a little bit I can see\nthe actually name resolution policy table.\n\n867\n00:48:36,590 --> 00:48:38,330\nSo this is where I created that entry.\n\n868\n00:48:38,330 --> 00:48:41,050\nSo if I had another zone\nthat was digitally signed\n\n869\n00:48:41,050 --> 00:48:45,740\nI would go back up here and I would add\nadatam.com and choose my options and\n\n870\n00:48:45,740 --> 00:48:47,930\nclick create to add it\nto that table as well.\n\n871\n00:48:48,930 --> 00:48:53,750\nAnd so now the clients know the next\ntime group policy applies it's going\n\n872\n00:48:53,750 --> 00:48:57,030\nto know that contosa.com\nhas been digitally signed.\n\n873\n00:48:57,030 --> 00:49:01,160\nIt should look for\nthat verifier to validate those records.\n\n874\n00:49:01,160 --> 00:49:02,340\n>> Mm hm.\n\n875\n00:49:02,340 --> 00:49:02,940\nNice.\n>> So\n\n876\n00:49:02,940 --> 00:49:06,750\nat that point, then the client knows now,\nthe server knows, and everybody's happy.\n\n877\n00:49:06,750 --> 00:49:08,148\n>> Mm hm.\nNice.\n\n878\n00:49:08,148 --> 00:49:10,510\nAll right.\n\n879\n00:49:10,510 --> 00:49:11,470\nDNS.\n\n880\n00:49:11,470 --> 00:49:12,940\nPretty sweet.\n\n881\n00:49:12,940 --> 00:49:15,970\nA lot easier compared to 2008.\n\n882\n00:49:15,970 --> 00:49:17,850\nYeah, you're doing all this\nfrom either PowerShell or\n\n883\n00:49:17,850 --> 00:49:19,140\nthe command prompt to implement that.\n\n884\n00:49:19,140 --> 00:49:21,710\nAnd it was not nearly as fun.\n\n885\n00:49:21,710 --> 00:49:23,060\nNot nearly as fun.\n\n886\n00:49:23,060 --> 00:49:24,610\nAll right, go ahead.\n\n887\n00:49:24,610 --> 00:49:26,990\n>> No, go ahead, I was-\n>> A couple more things that we can do,\n\n888\n00:49:26,990 --> 00:49:30,960\nwe're just messing with our,\nJason over here.\n\n889\n00:49:30,960 --> 00:49:33,060\nWhich camera am I supposed\nto be on at this point?\n\n890\n00:49:33,060 --> 00:49:34,460\nI can't figure it out.\n\n891\n00:49:34,460 --> 00:49:35,849\nThat's okay Jason, we can't either.\n\n892\n00:49:35,849 --> 00:49:36,370\n>> [LAUGH]\n>> So,\n\n893\n00:49:36,370 --> 00:49:40,430\na couple of other things we\ncan do to help secure a DNS.\n\n894\n00:49:40,430 --> 00:49:43,500\nWe've got an option is, DNS socket pool.\n\n895\n00:49:43,500 --> 00:49:48,340\nAnd DNS will randomize the ports that\nit's using to respond to DNS queries.\n\n896\n00:49:48,340 --> 00:49:51,400\nThat's supposed to make it a little bit\nmore difficult for the bad guy to do any\n\n897\n00:49:51,400 --> 00:49:55,200\nspoofing or anything like that cuz he\ndoesn't know what port number the DNS\n\n898\n00:49:55,200 --> 00:49:59,220\nserver is using, so it's gonna be hard for\nhim to pretend he's the DNS server.\n\n899\n00:49:59,220 --> 00:50:02,472\nBy default that is set to 2,500.\n\n900\n00:50:02,472 --> 00:50:06,910\nSo there's 2,500 ports that it\ncan use to randomize between.\n\n901\n00:50:06,910 --> 00:50:11,030\nTo me that sounds like a lot of port\nnumbers, 2,500 different ports.\n\n902\n00:50:11,030 --> 00:50:12,690\nI think that's a good size.\n\n903\n00:50:12,690 --> 00:50:14,980\nIt can go all the way\nup to 10,000 I believe.\n\n904\n00:50:14,980 --> 00:50:19,110\nBut it's important for the exam that\nwe know how we can change that.\n\n905\n00:50:19,110 --> 00:50:21,800\nHow we can see what is and\nhow we can change it.\n\n906\n00:50:21,800 --> 00:50:25,780\nAs well as DNS cache locking, and\nlet's talk about them both and\n\n907\n00:50:25,780 --> 00:50:28,610\nthen we'll go take a look at them.\n\n908\n00:50:28,610 --> 00:50:30,810\nSo I explained what DNS socket pool is.\n\n909\n00:50:30,810 --> 00:50:35,640\nThat's where we're going to We can change\nthe number of ports that it has available\n\n910\n00:50:35,640 --> 00:50:37,620\nto randomize up those responses.\n\n911\n00:50:39,130 --> 00:50:43,819\nFor cache locking, we've learned in,\ngosh was that 4-10?\n\n912\n00:50:43,819 --> 00:50:49,000\n>> 4-11\n>> 4-11 I think where we talk about DNS.\n\n913\n00:50:49,000 --> 00:50:52,580\nAnyway, check out those episodes,\nit's part of your subscription.\n\n914\n00:50:52,580 --> 00:50:55,370\nWe've learned that DNS\ndoes a caching process.\n\n915\n00:50:55,370 --> 00:51:00,800\nWhen your client queries DNS,\ngets a response, the client caches it.\n\n916\n00:51:00,800 --> 00:51:02,860\nWhen DNS talks to other DNS servers and\n\n917\n00:51:02,860 --> 00:51:06,390\ngets a response from them,\nit's going to cache that response as well.\n\n918\n00:51:06,390 --> 00:51:10,570\nAnd it's good until the TTL or\nthe Time to Live expires, and\n\n919\n00:51:10,570 --> 00:51:12,770\nthen that is flushed from the cache.\n\n920\n00:51:14,120 --> 00:51:16,790\nAnd a DNS server will always\nlook in his cache first.\n\n921\n00:51:16,790 --> 00:51:20,500\nI mean if he's got the answer right there\nin his cache on his local hard drive,\n\n922\n00:51:20,500 --> 00:51:24,160\nno point going out to the root\nDNS server or anything like that.\n\n923\n00:51:24,160 --> 00:51:27,660\nIt's gonna be much faster if I can\npull the answer from my cache and\n\n924\n00:51:27,660 --> 00:51:28,710\ngive it to that client.\n\n925\n00:51:29,730 --> 00:51:33,870\nProblem is, is somebody could maliciously\ntry to manipulate that cache.\n\n926\n00:51:33,870 --> 00:51:36,560\nThey could go in there and\nchange those records.\n\n927\n00:51:36,560 --> 00:51:39,770\nAnd try to do some type of scam on your.\n\n928\n00:51:39,770 --> 00:51:40,990\nSome type of farming scam.\n\n929\n00:51:40,990 --> 00:51:46,460\nRedirect you to the wrong web server or\nsomething like that.\n\n930\n00:51:46,460 --> 00:51:50,580\nSo what we can do is\nwe can lock the cache.\n\n931\n00:51:50,580 --> 00:51:54,810\nAnd we can say, look anything that's\nin the cache cannot be modified.\n\n932\n00:51:54,810 --> 00:51:55,820\nAnd we can set a percentage.\n\n933\n00:51:55,820 --> 00:51:57,770\nIt's a percentage of the ttl.\n\n934\n00:51:57,770 --> 00:52:01,470\nSo you've got a ttl that's, you know\nwhen you get the response from the dns,\n\n935\n00:52:01,470 --> 00:52:04,630\nwhatever dns sever your\ndns sever's talking to.\n\n936\n00:52:04,630 --> 00:52:08,590\nThe authoritative dns server sends\nback the answer along with the ttl.\n\n937\n00:52:08,590 --> 00:52:11,830\nHow long you're allowed\nto cache that record for.\n\n938\n00:52:11,830 --> 00:52:15,770\nAnd when we talk about the cache locking,\n\n939\n00:52:15,770 --> 00:52:19,590\nwe're gonna set a percentage of\nhow old that record, that TTL,\n\n940\n00:52:19,590 --> 00:52:24,150\nhow much of that TTL has to expire\nbefore I can make changes to it.\n\n941\n00:52:24,150 --> 00:52:26,380\nSo if we set it to 100%, for example,\n\n942\n00:52:26,380 --> 00:52:30,410\nthat means that record cannot be modified\nthe entire time it's in the cache.\n\n943\n00:52:30,410 --> 00:52:32,190\nWhich, to me, sounds great.\n\n944\n00:52:32,190 --> 00:52:35,560\nWhy let them change it in the first place?\n\n945\n00:52:35,560 --> 00:52:39,880\nMicrosoft recommends 85%\non that cache logging.\n\n946\n00:52:39,880 --> 00:52:43,348\nSo the first 85% of the TTO,\nthe record cannot be modified,\n\n947\n00:52:43,348 --> 00:52:48,300\nthe remaining 15% of the time\nthe record could be modified.\n\n948\n00:52:50,210 --> 00:52:54,750\nSo two more things that we\ncan do to help secure DNS.\n\n949\n00:52:54,750 --> 00:52:59,160\n>> So, wait.\nSo even if there are updated information\n\n950\n00:52:59,160 --> 00:53:03,870\nthat's being put out there,\nit will not change its cache?\n\n951\n00:53:03,870 --> 00:53:05,230\nThis is locked down for that time?\n\n952\n00:53:05,230 --> 00:53:06,150\n>> It's locked down.\n\n953\n00:53:06,150 --> 00:53:07,730\nIt's locked down.\n\n954\n00:53:07,730 --> 00:53:12,530\nWhich, to me, and I should,\nonce that record gets in the cache,\n\n955\n00:53:12,530 --> 00:53:16,120\nyour DNS server, if you query for the same\nname, he's not going out to check and\n\n956\n00:53:16,120 --> 00:53:18,980\nsee if the cached information is current.\n\n957\n00:53:18,980 --> 00:53:21,710\nOtherwise, you might as well just go\nahead and retrieve the new record.\n\n958\n00:53:21,710 --> 00:53:25,980\nIf it's in his cache,\nhe's gonna use that response, so\n\n959\n00:53:25,980 --> 00:53:30,380\nI'm not really sure why I would ever\nallow my server to modify that cache.\n\n960\n00:53:30,380 --> 00:53:32,890\nHe's gonna use that until it expires,\nthrow it away,\n\n961\n00:53:32,890 --> 00:53:35,550\nthen he'll go get a new response.\n\n962\n00:53:35,550 --> 00:53:39,090\nSo I can't think of a good reason why\nit would really need to modify that\n\n963\n00:53:40,220 --> 00:53:41,900\ncached information.\n\n964\n00:53:41,900 --> 00:53:46,250\nWe talk about DNS troubleshooting and if\nand IP address changes and it's still in\n\n965\n00:53:46,250 --> 00:53:50,580\nthe cache then we have to flush the cache\nI guess you could try to go ahead just\n\n966\n00:53:50,580 --> 00:53:55,750\nupdate the cache record, because caching\ndoes speed up the DNS process, so,\n\n967\n00:53:55,750 --> 00:54:02,660\nso maybe you want to, allow for that to\nhappen, but, I wouldn't think too often.\n\n968\n00:54:02,660 --> 00:54:04,590\nSo what do you think?\n\n969\n00:54:04,590 --> 00:54:06,140\nShould we try it?\n\n970\n00:54:06,140 --> 00:54:07,550\nSo we're going to take a look at it?\n\n971\n00:54:07,550 --> 00:54:08,200\n>> Yeah, let's do it.\n\n972\n00:54:08,200 --> 00:54:08,980\n>> You ready?\n>> Mm-hm.\n\n973\n00:54:08,980 --> 00:54:12,440\n>> All right, so\nwe should we start with sock-up pooling?\n\n974\n00:54:12,440 --> 00:54:13,180\n>> Let's do them both,\n\n975\n00:54:13,180 --> 00:54:16,730\nbecause you know what, we're going\nto do them both from Power Shell.\n\n976\n00:54:16,730 --> 00:54:18,150\n>> All right.\n>> Yeah, we are.\n\n977\n00:54:18,150 --> 00:54:21,680\nI'm gong to pull up Power Shell, and\nI think I've already got my font adjusted.\n\n978\n00:54:21,680 --> 00:54:25,140\nRelatively well,\ncan you see that out there in TV land?\n\n979\n00:54:25,140 --> 00:54:25,640\nI'll wait.\n\n980\n00:54:28,732 --> 00:54:33,500\nAll right, so what we are going\nto do first, socket pool.\n\n981\n00:54:33,500 --> 00:54:39,345\nGood command to know for the exam is git.\n\n982\n00:54:39,345 --> 00:54:41,170\nget-dnsserver.\n\n983\n00:54:41,170 --> 00:54:46,180\nAnd what that's going\nto do is retrieve and\n\n984\n00:54:46,180 --> 00:54:49,670\ndisplay a whole bunch of\ninformation about my DNS server.\n\n985\n00:54:49,670 --> 00:54:52,420\nAnd you saw all that\nstuff scroll by there.\n\n986\n00:54:52,420 --> 00:54:58,520\nWhat I'm looking for on this first one is\ngoing to be my socket pool size, which\n\n987\n00:54:58,520 --> 00:55:04,520\nmeans I'm gonna scroll all the way back up\nto just about where I issued that command.\n\n988\n00:55:04,520 --> 00:55:05,150\nAll right?\n\n989\n00:55:05,150 --> 00:55:10,810\nAnd here I can see my current socket\npool size is that default, 2500.\n\n990\n00:55:10,810 --> 00:55:16,840\nSo it's got 2500 ports that it can\nuse to randomize its responses.\n\n991\n00:55:16,840 --> 00:55:20,940\nIf I wanna change that,\nwe're actually gonna use dnscmd.\n\n992\n00:55:20,940 --> 00:55:23,500\nAnd let me give you guys a little space.\n\n993\n00:55:23,500 --> 00:55:26,790\nI don't like working\ndown on the bottom there.\n\n994\n00:55:26,790 --> 00:55:30,280\nAnd we're gonna do a little\ndnscmd which is actually not\n\n995\n00:55:30,280 --> 00:55:31,940\nA PowerShell command, all right?\n\n996\n00:55:31,940 --> 00:55:34,500\nThis is dnscmd, we've talked\nabout that in our DNS episode.\n\n997\n00:55:35,680 --> 00:55:41,570\nIt's a command line utility to work with\nthe configuration of your DNS server.\n\n998\n00:55:41,570 --> 00:55:44,487\nYou can do just about anything\nyou need with dnscmd.\n\n999\n00:55:44,487 --> 00:55:51,338\nBut what we're gonna do is do\na config /socketpoolsize and\n\n1000\n00:55:51,338 --> 00:55:56,133\nbecause it's not a PowerShell command,\n\n1001\n00:55:56,133 --> 00:56:00,116\nI can't do my handy tab auto fill.\n\n1002\n00:56:00,116 --> 00:56:03,634\n>> [LAUGH]\n>> That's the downside of that there but\n\n1003\n00:56:03,634 --> 00:56:06,258\nDnscmd /config /socketpoolsize,\n\n1004\n00:56:06,258 --> 00:56:10,441\nand then just the size that you\nwanna set that socket pool to.\n\n1005\n00:56:10,441 --> 00:56:12,590\nAnd we'll say maybe 5000?\n\n1006\n00:56:12,590 --> 00:56:13,910\nAll right.\n\n1007\n00:56:13,910 --> 00:56:15,355\nHit Enter.\n\n1008\n00:56:15,355 --> 00:56:19,219\nAnd it tells me that the registry property\nsocketpoolsize successfully reset,\n\n1009\n00:56:19,219 --> 00:56:20,935\ncommand completed successfully.\n\n1010\n00:56:20,935 --> 00:56:24,836\nSo if I do another get-dns server,\n\n1011\n00:56:24,836 --> 00:56:30,167\nwhich is a PowerShell command,\nI can hit Enter,\n\n1012\n00:56:30,167 --> 00:56:36,407\nscroll all the way back up to\nwhere I issued that command,\n\n1013\n00:56:36,407 --> 00:56:41,367\nand I can see my socket\npool is now five grand.\n\n1014\n00:56:41,367 --> 00:56:44,914\nIt now has 5000 ports\nthat it can randomize.\n\n1015\n00:56:44,914 --> 00:56:46,440\n>> Right.\n\n1016\n00:56:46,440 --> 00:56:47,870\nNice.\nJust one little command.\n\n1017\n00:56:47,870 --> 00:56:48,700\n>> That was it.\n\n1018\n00:56:48,700 --> 00:56:49,773\n>> That's not too bad.\n>> Easy breezy right?\n\n1019\n00:56:49,773 --> 00:56:50,573\n>> Mm-hm.\n\n1020\n00:56:50,573 --> 00:56:51,763\n>> I like it.\nAll right,\n\n1021\n00:56:51,763 --> 00:56:56,594\nthe second one we talked about there\nwas going to be the locking percent.\n\n1022\n00:56:56,594 --> 00:57:02,608\nAnd if I scroll down in my results\nhere from that get-DNS server command,\n\n1023\n00:57:02,608 --> 00:57:05,234\nI'm gonna find a caching area.\n\n1024\n00:57:05,234 --> 00:57:08,430\nSo here's my server caching area.\n\n1025\n00:57:08,430 --> 00:57:12,370\nAnd one of the values that I'm looking for\nis this right here.\n\n1026\n00:57:12,370 --> 00:57:16,400\nLocking, if I can get my mouse\nto play along, locking percent,\n\n1027\n00:57:16,400 --> 00:57:17,495\nwhich is by default set to 100.\n\n1028\n00:57:17,495 --> 00:57:18,280\n>> Mm-hm.\n\n1029\n00:57:18,280 --> 00:57:20,617\n>> Which is, like I said,\ntypically where I'm going to leave it.\n\n1030\n00:57:20,617 --> 00:57:23,638\nBut if we wanna change that,\nand for the exam,\n\n1031\n00:57:23,638 --> 00:57:26,517\nwe should know how to\nchange it if we need to.\n\n1032\n00:57:26,517 --> 00:57:31,265\nWe're gonna type in set,\nI'm gonna scroll up\n\n1033\n00:57:31,265 --> 00:57:36,029\njust a wee bit there, set-dnsservercache.\n\n1034\n00:57:36,029 --> 00:57:40,370\nAnd this is a power PowerShell command,\nso I can do that tab-autofill on it.\n\n1035\n00:57:40,370 --> 00:57:44,812\nSet-dnsservercache -Lockingpercent.\n\n1036\n00:57:44,812 --> 00:57:48,730\nLocking percent, and\nthen whatever you want to set it to.\n\n1037\n00:57:48,730 --> 00:57:52,770\nIt's a percentage, so\nsomewhere between 0 and 100.\n\n1038\n00:57:52,770 --> 00:57:55,110\nI'm gonna change it to 85.\n\n1039\n00:57:55,110 --> 00:57:56,210\nHit Enter.\n\n1040\n00:57:57,990 --> 00:58:02,884\nAnd I'll run that DNS, or\nthat get-dnsserver again.\n\n1041\n00:58:02,884 --> 00:58:05,770\nAnd we'll scroll back up,\nnot as far this time, to my,\n\n1042\n00:58:05,770 --> 00:58:09,920\nwhere are you hiding at,\nwhere's my caching?\n\n1043\n00:58:09,920 --> 00:58:12,660\nThere we go,\nthere's my server cache settings.\n\n1044\n00:58:12,660 --> 00:58:17,180\nNow I can see that my locking\npercent is indeed set to 85.\n\n1045\n00:58:17,180 --> 00:58:19,859\n>> Nice.\n>> So two quick easy commands that we can\n\n1046\n00:58:19,859 --> 00:58:24,502\nuse to modify that socket pool size and\nthat cache locking percent.\n\n1047\n00:58:24,502 --> 00:58:25,459\n>> Nice.\n\n1048\n00:58:25,459 --> 00:58:26,110\n>> Yep.\n\n1049\n00:58:26,110 --> 00:58:26,719\n>> Good deal.\n\n1050\n00:58:26,719 --> 00:58:33,020\nAnything else on our socket pool and\ncache?\n\n1051\n00:58:33,020 --> 00:58:34,241\n>> I don't think so.\nLike I said,\n\n1052\n00:58:34,241 --> 00:58:37,456\nI like leaving that lock percent at 100.\n\n1053\n00:58:37,456 --> 00:58:40,994\nUntil I figure out a reason why I need to\nbe able to modify that cached information,\n\n1054\n00:58:40,994 --> 00:58:42,343\nI’m gonna leave it at 100.\n\n1055\n00:58:42,343 --> 00:58:46,806\n2,500 ports is quite a few ports to\nrandomize between, but I suppose as\n\n1056\n00:58:46,806 --> 00:58:51,914\nmachines get faster, and things like that,\nmaybe it makes it easier for the bad guys.\n\n1057\n00:58:51,914 --> 00:58:55,099\nSo, the more ports,\nthe more difficult it is going to be for\n\n1058\n00:58:55,099 --> 00:58:57,921\nthem to figure out what\nport it's currently using.\n\n1059\n00:58:57,921 --> 00:58:58,682\nAnd that's the thing.\n\n1060\n00:58:58,682 --> 00:59:00,876\nIt's not using the same port every time,\nit's randomizing between.\n\n1061\n00:59:00,876 --> 00:59:03,494\nSo you're just increasing\nthe number of options there.\n\n1062\n00:59:03,494 --> 00:59:05,253\nSo it's gonna be making it more secure.\n\n1063\n00:59:05,253 --> 00:59:05,961\n>> Mm-hm.\n\n1064\n00:59:05,961 --> 00:59:07,476\n>> And then DNS check, of course.\n\n1065\n00:59:07,476 --> 00:59:08,080\n>> Nice.\n\n1066\n00:59:08,080 --> 00:59:13,214\nAll right, well,\nup next in our set of objectives we\n\n1067\n00:59:13,214 --> 00:59:18,460\ndo have a DNS logging and\nsome other good DNS stuff.\n\n1068\n00:59:18,460 --> 00:59:22,060\nWe are coming right up here\non good old break time, so\n\n1069\n00:59:22,060 --> 00:59:24,460\nwe'll save logging then for\nafter the break.\n\n1070\n00:59:24,460 --> 00:59:25,077\n>> Sounds like a plan.\n>> Sweet.\n\n1071\n00:59:25,077 --> 00:59:27,091\nAll right.\nDNS logging after the break.\n\n1072\n00:59:27,091 --> 00:59:35,906\n[SOUND]\n>> All right, welcome back.\n\n1073\n00:59:35,906 --> 00:59:40,196\nSo where we left off,\nwe were talking about DNS logging.\n\n1074\n00:59:40,196 --> 00:59:44,260\nWe're gonna get in there and\ntake a look at DNS logging.\n\n1075\n00:59:44,260 --> 00:59:48,160\nNow DNS logging,\nwhat kinds of things were we-\n\n1076\n00:59:48,160 --> 00:59:49,300\n>> Yeah, you got a couple different ways.\n\n1077\n00:59:49,300 --> 00:59:54,090\nThere's two different types of\nlogging when you talk about DNS.\n\n1078\n00:59:54,090 --> 00:59:56,730\nYou've got your,\nwhat I call the standard logging.\n\n1079\n00:59:56,730 --> 01:00:00,510\nI think Nate's gonna pull up his\nDNS server here in a second.\n\n1080\n01:00:00,510 --> 01:00:02,210\nAnd that logs events to the event log.\n\n1081\n01:00:02,210 --> 01:00:04,900\nThat's gonna be some simple things\nlike the DNS server started,\n\n1082\n01:00:04,900 --> 01:00:09,400\nthe DNS server service successfully\nstopped, and things like that.\n\n1083\n01:00:09,400 --> 01:00:12,050\nThere's also an operational log\nthat you can look at for DNS\n\n1084\n01:00:12,050 --> 01:00:15,790\nthat's gonna give you much more detailed\ninformation about what's going on.\n\n1085\n01:00:15,790 --> 01:00:16,663\nAnd then there's debug logging.\n\n1086\n01:00:16,663 --> 01:00:19,808\nIn debug logging,\nanytime you ever hear the word debug,\n\n1087\n01:00:19,808 --> 01:00:21,652\nyou really wanna think verbose.\n\n1088\n01:00:21,652 --> 01:00:22,274\nAll right?\n\n1089\n01:00:22,274 --> 01:00:24,345\nBecause we can turn on debug logging and\n\n1090\n01:00:24,345 --> 01:00:28,249\nwe can log every little packet that's\ngoing in and out of that DNS server.\n\n1091\n01:00:28,249 --> 01:00:32,990\nBut the problem with that, I mean, it's\na good thing if you're troubleshooting.\n\n1092\n01:00:32,990 --> 01:00:36,190\nBut if you're not troubleshooting,\nyou're filling up log files,\n\n1093\n01:00:36,190 --> 01:00:40,320\nyou're making them very large, and you're\ngonna hurt the performance of the server.\n\n1094\n01:00:40,320 --> 01:00:43,650\nIf it has to sit and write down\nevery little thing that it's doing,\n\n1095\n01:00:43,650 --> 01:00:45,590\nit's gonna slow that DNS server down.\n\n1096\n01:00:45,590 --> 01:00:49,050\nSo, you turn on debug logging\nwhen you have problem.\n\n1097\n01:00:49,050 --> 01:00:50,680\nOnce you've found, tested,\n\n1098\n01:00:50,680 --> 01:00:54,910\nimplemented your solution,\nthen you turn debug logging off, and\n\n1099\n01:00:54,910 --> 01:00:58,015\nyou can leave the other logging on, but\nyou don't want to leave that running.\n\n1100\n01:00:58,015 --> 01:00:58,699\n>> Mm-hm.\n>> So, those are things.\n\n1101\n01:00:58,699 --> 01:01:01,119\nIf we pull up a DNS server, I don't know,\ndo we have a DNS server we can look at?\n\n1102\n01:01:01,119 --> 01:01:01,811\n>> Mm-hm, yeah.\n\n1103\n01:01:01,811 --> 01:01:06,080\nI've got one on my machine here.\n\n1104\n01:01:06,080 --> 01:01:09,830\nAnd in here, so\nto take a look at that logging.\n\n1105\n01:01:09,830 --> 01:01:17,170\nAll right, so click on good old DNS, and\nwe'll right-click and go into DNS Manager.\n\n1106\n01:01:17,170 --> 01:01:24,275\nAnd when this console opens up we\nwill go to click on our server.\n\n1107\n01:01:24,275 --> 01:01:28,195\nWell actually, well first of all,\ndown here in these global logs,\n\n1108\n01:01:29,445 --> 01:01:32,085\ndown here, and then in our DNS Events.\n\n1109\n01:01:32,085 --> 01:01:34,579\nThere we go.\nSo there are all the logs that is being\n\n1110\n01:01:34,579 --> 01:01:35,880\nlogged by default.\n\n1111\n01:01:35,880 --> 01:01:39,391\nAnd so these are background processes,\nlike start and\n\n1112\n01:01:39,391 --> 01:01:42,374\nstop service things,\nor things of that sort.\n\n1113\n01:01:42,374 --> 01:01:47,617\nYeah, so, by default those\nare turned on and they are logged.\n\n1114\n01:01:47,617 --> 01:01:50,157\nNow from what Mike was\nsaying about those Verbose\n\n1115\n01:01:50,157 --> 01:01:51,139\nlogs-\n>> Right.\n\n1116\n01:01:51,139 --> 01:01:56,359\n>> We right-click on our server,\nand we'll select Properties.\n\n1117\n01:01:56,359 --> 01:02:01,666\nAnd in here we will go\nonto our Event logging.\n\n1118\n01:02:01,666 --> 01:02:02,586\n>> Yeah, the Event logging,\n\n1119\n01:02:02,586 --> 01:02:04,630\nand that's where you see what\nNate just showed you, right?\n\n1120\n01:02:04,630 --> 01:02:07,400\nYou can see it's turned on for all events.\n\n1121\n01:02:07,400 --> 01:02:11,420\nYou could limit that if you wanted to just\nget errors or something, and warnings,\n\n1122\n01:02:11,420 --> 01:02:13,470\nyou didn't want to see the informationals.\n\n1123\n01:02:13,470 --> 01:02:19,490\n>> All right, and then just to the left of\nthat there is the debug logging in here.\n\n1124\n01:02:19,490 --> 01:02:21,603\nSo debugging logging, of course,\nby default it is turned off.\n\n1125\n01:02:21,603 --> 01:02:26,328\nAnd in the event of trying to track down\na problem or something of that sort,\n\n1126\n01:02:26,328 --> 01:02:29,482\nthen we'll just go ahead and\nclick on this stuff.\n\n1127\n01:02:29,482 --> 01:02:33,586\nAnd there are a number of options\nwhere we can define this, I guess,\n\n1128\n01:02:33,586 --> 01:02:36,977\nto more target what it is that\nwe're trying to look for.\n\n1129\n01:02:36,977 --> 01:02:38,190\n>> Absolutely, yeah.\n\n1130\n01:02:38,190 --> 01:02:41,640\nYou could, if you had an idea of where the\nproblem was, or what you're looking for,\n\n1131\n01:02:41,640 --> 01:02:43,480\nyou could just check\ncertain check marks there,\n\n1132\n01:02:43,480 --> 01:02:46,240\ntry to limit how many package\nyou're actually logging.\n\n1133\n01:02:46,240 --> 01:02:48,200\nAs you can see, it can get very detailed.\n\n1134\n01:02:48,200 --> 01:02:52,300\nI mean, talking about incoming and\noutgoing TCP and\n\n1135\n01:02:52,300 --> 01:02:57,390\nUDP, every query, every update, you can do\nevery notification, request, responses.\n\n1136\n01:02:57,390 --> 01:03:00,050\nSo you can imagine if you're in\nan environment where you've got\n\n1137\n01:03:00,050 --> 01:03:04,200\na lot of users hitting that DNS server,\nthat log can fill up really fast.\n\n1138\n01:03:04,200 --> 01:03:06,850\nAnd it's just gonna put a burden,\nan extra workload on the server.\n\n1139\n01:03:06,850 --> 01:03:09,799\nPerfect for troubleshooting,\njust don't leave it on all the time.\n\n1140\n01:03:09,799 --> 01:03:15,186\n>> So, anything else on good old logging?\n\n1141\n01:03:15,186 --> 01:03:18,552\n>> Not really, I mean, if you wanna go to\nthe event viewer and check it out there,\n\n1142\n01:03:18,552 --> 01:03:20,082\nyou can, but kinda the same thing.\n\n1143\n01:03:20,082 --> 01:03:21,777\nWe should look at\nthe operational log maybe.\n\n1144\n01:03:21,777 --> 01:03:23,135\n>> All right, well, yeah.\n\n1145\n01:03:23,135 --> 01:03:24,482\n>> We can figure that out real quick.\n\n1146\n01:03:24,482 --> 01:03:25,922\n>> Yeah, and Event viewer?\n\n1147\n01:03:25,922 --> 01:03:26,960\n>> Mm-hm.\n\n1148\n01:03:26,960 --> 01:03:29,485\nSo we can go back over to Server Manager\nand launch that Event viewer.\n\n1149\n01:03:29,485 --> 01:03:36,438\n>> [SOUND] And Tools and Event Viewer.\n\n1150\n01:03:36,438 --> 01:03:39,764\nAnd when the console comes up,\nthere we go.\n\n1151\n01:03:39,764 --> 01:03:44,410\n>> And then you'll see some, we won't\nbother looking, but in the application log\n\n1152\n01:03:44,410 --> 01:03:48,420\nin there under Windows,\nyou would see some general DNS events.\n\n1153\n01:03:48,420 --> 01:03:51,226\nBut if we go down under Windows,\nthere's my application services, and\n\n1154\n01:03:51,226 --> 01:03:52,429\nthere's that DNS server log.\n\n1155\n01:03:52,429 --> 01:03:56,971\nAnd that should be the same\nas what we were seeing in\n\n1156\n01:03:56,971 --> 01:04:00,875\nthe global logs, back in the DNS console.\n\n1157\n01:04:00,875 --> 01:04:03,586\nSo that's my log,\nmy server-specific log And\n\n1158\n01:04:03,586 --> 01:04:06,856\nthen I believe there's another\none under Windows logs.\n\n1159\n01:04:06,856 --> 01:04:10,589\nAnd I think if you go up to,\nno I'm sorry, where you are now.\n\n1160\n01:04:10,589 --> 01:04:12,020\nAnd expand out Microsoft?\n\n1161\n01:04:14,110 --> 01:04:17,860\nAnd then Windows, and then is there\none under there for DNS as well?\n\n1162\n01:04:18,930 --> 01:04:20,310\nSo many logs.\n\n1163\n01:04:20,310 --> 01:04:20,830\n>> A, B, C, D.\n\n1164\n01:04:20,830 --> 01:04:22,600\nOkay, D.\n\n1165\n01:04:22,600 --> 01:04:25,020\nAnd there's not.\n\n1166\n01:04:25,020 --> 01:04:25,570\n>> Oh, wait.\n\n1167\n01:04:25,570 --> 01:04:26,982\nThere it is, client events.\n\n1168\n01:04:26,982 --> 01:04:29,060\n>> Client events, and if you expand that,\n\n1169\n01:04:29,060 --> 01:04:32,490\nthere should be an operational\nunderneath that.\n\n1170\n01:04:32,490 --> 01:04:34,810\nDoesn't look like he's got\nanything entered there.\n\n1171\n01:04:34,810 --> 01:04:36,740\n>> Nope, zero events.\n\n1172\n01:04:36,740 --> 01:04:38,530\n>> So a couple of different\nplaces you can go to look,\n\n1173\n01:04:38,530 --> 01:04:42,860\nagain depending on what logging options\nyou've enabled there for that DNS logging.\n\n1174\n01:04:42,860 --> 01:04:43,472\nAll right.\n\n1175\n01:04:43,472 --> 01:04:45,430\nSo that's editing in a nutshell.\n\n1176\n01:04:45,430 --> 01:04:47,150\nSomebody's got to review those logs.\n\n1177\n01:04:47,150 --> 01:04:48,130\nYou want to monitor your DNS.\n\n1178\n01:04:48,130 --> 01:04:49,590\nDNS is obviously very important.\n\n1179\n01:04:49,590 --> 01:04:51,580\nWe've talked about that\nin our other episodes.\n\n1180\n01:04:51,580 --> 01:04:53,390\nNothing gets done without name resolution,\n\n1181\n01:04:53,390 --> 01:04:54,995\nunless you know your\nIP addresses by heart.\n\n1182\n01:04:54,995 --> 01:04:57,520\n[LAUGH] So DNS is very important.\n\n1183\n01:04:57,520 --> 01:05:01,900\nYou want to keep that\noperating efficiently.\n\n1184\n01:05:01,900 --> 01:05:05,060\n>> So, what about as far as managing goes?\n\n1185\n01:05:05,060 --> 01:05:09,530\nSo let's say that you've\ngot one admin guy and\n\n1186\n01:05:09,530 --> 01:05:13,770\nthis guy is busy, like all system\nadmins are you know, very busy.\n\n1187\n01:05:13,770 --> 01:05:18,040\nHe wants to delegate\nsome of this DNS stuff.\n\n1188\n01:05:18,040 --> 01:05:22,010\n>> There is a group that gets\ncreated in active directory if we\n\n1189\n01:05:22,010 --> 01:05:24,850\nwant to open up active directory\nthere is a DNS admins group that gets\n\n1190\n01:05:24,850 --> 01:05:28,080\ncreated when you install DNS, and\nif I add somebody to that group,\n\n1191\n01:05:28,080 --> 01:05:31,400\nthat gives them administrative\nrights over that DNS console.\n\n1192\n01:05:31,400 --> 01:05:35,050\nSo if I want to delegate away part of my\nresponsibility to someone that's going to\n\n1193\n01:05:35,050 --> 01:05:39,290\nmanage or maintain that DNS server,\nI can add them to that group that gives\n\n1194\n01:05:39,290 --> 01:05:41,950\nthem administrative access\nto that DNS console.\n\n1195\n01:05:41,950 --> 01:05:43,820\nAnd then they can do just\nabout everything in there.\n\n1196\n01:05:43,820 --> 01:05:46,400\nIt gives them modified\nright up to full control.\n\n1197\n01:05:46,400 --> 01:05:47,510\nSo just under full control.\n\n1198\n01:05:49,540 --> 01:05:52,720\nAnd that way we can have other\npeople that can go in and manage and\n\n1199\n01:05:52,720 --> 01:05:53,530\nmaintain that DNS.\n\n1200\n01:05:54,530 --> 01:05:58,942\nAnd we can give them the responsibility of\nreading all those darn log files [LAUGH].\n\n1201\n01:05:58,942 --> 01:06:02,620\n>> All right, should we go and\nadd anything out of that group?\n\n1202\n01:06:02,620 --> 01:06:03,440\n>> Sure if you want.\n\n1203\n01:06:03,440 --> 01:06:04,750\n>> Might as well, right?\n\n1204\n01:06:04,750 --> 01:06:05,470\n>> Might as well.\n\n1205\n01:06:05,470 --> 01:06:07,250\n>> As long as you are already in there.\n\n1206\n01:06:07,250 --> 01:06:11,190\n>> Yeah.\n>> All right, so on my machine here we go.\n\n1207\n01:06:11,190 --> 01:06:13,060\nAnd to add on that group.\n\n1208\n01:06:13,060 --> 01:06:14,390\nSo they might use this in computers.\n\n1209\n01:06:14,390 --> 01:06:15,750\n>> Yep.\n>> Monitor the administrative\n\n1210\n01:06:15,750 --> 01:06:16,250\ncenter, either one.\n\n1211\n01:06:17,350 --> 01:06:19,470\nI will go in here and, let's see.\n\n1212\n01:06:19,470 --> 01:06:23,600\nSo we've got, in our Gainesville, users.\n\n1213\n01:06:23,600 --> 01:06:26,290\n>> It's going to be with\nthe group that it's\n\n1214\n01:06:26,290 --> 01:06:28,270\ncreated should show up underneath users.\n\n1215\n01:06:28,270 --> 01:06:33,020\n>> And that built in container\ndown there at the bottom.\n\n1216\n01:06:33,020 --> 01:06:33,680\n>> All right.\nDone in there.\n\n1217\n01:06:33,680 --> 01:06:35,320\nAnd DNS admins.\n\n1218\n01:06:35,320 --> 01:06:36,370\nThat's it.\n\n1219\n01:06:36,370 --> 01:06:37,040\nThat guy right there.\n\n1220\n01:06:38,400 --> 01:06:40,460\nAnd the members of this.\n\n1221\n01:06:40,460 --> 01:06:47,461\nAll right, so go ahead and\nadd we'll add Jason Phillips\n\n1222\n01:06:47,461 --> 01:06:49,980\nto it cause, I mean, we don't-\n>> You really should trust\n\n1223\n01:06:49,980 --> 01:06:51,670\nthe person you're putting in there.\n\n1224\n01:06:51,670 --> 01:06:56,229\n>> Yeah [LAUGH] Jason, he's a,\nwe don't let him be a member of anything,\n\n1225\n01:06:56,229 --> 01:06:59,050\nhe has no like delegation at all.\n\n1226\n01:06:59,050 --> 01:07:00,750\nSo we'll go and add on to it to DNS.\n\n1227\n01:07:00,750 --> 01:07:02,390\n>> He can spell DNS I guess.\n\n1228\n01:07:02,390 --> 01:07:04,210\n>> Yeah, probably.\n\n1229\n01:07:04,210 --> 01:07:05,025\nI don't maybe.\n\n1230\n01:07:05,025 --> 01:07:06,478\n[CROSSTALK]\n>> He sending me some hand signals right\n\n1231\n01:07:06,478 --> 01:07:07,990\nnow and I'm not sure what they mean.\n\n1232\n01:07:07,990 --> 01:07:11,215\n>> All right so there we go so,\nwe've added in there.\n\n1233\n01:07:11,215 --> 01:07:12,435\nThere we go.\n\n1234\n01:07:12,435 --> 01:07:13,325\n>> Perfect.\n\n1235\n01:07:13,325 --> 01:07:16,245\n>> Yeah, so now he has just about,\nI mean not full control, but\n\n1236\n01:07:16,245 --> 01:07:19,495\nnow he has like free reign\n>> Yeah he can't tear down the DNS server\n\n1237\n01:07:19,495 --> 01:07:23,065\nbut he can create zones and\nthings like that in that DNS console and\n\n1238\n01:07:23,065 --> 01:07:27,740\ndo just about everything he needs to do.\n\n1239\n01:07:27,740 --> 01:07:28,480\n>> Nice.\n\n1240\n01:07:28,480 --> 01:07:29,490\n>> Perfect.\n>> All right,\n\n1241\n01:07:29,490 --> 01:07:32,150\nwhat's this idea with netmask ordering?\n\n1242\n01:07:32,150 --> 01:07:35,630\n>> Let's take a look at a couple options\nthat are a little more obscure when\n\n1243\n01:07:35,630 --> 01:07:38,670\nwe're talking about DNS settings and\nconfiguring our DNS server.\n\n1244\n01:07:38,670 --> 01:07:41,450\nI want to take a look at recursion and\nnetmask ordering.\n\n1245\n01:07:42,860 --> 01:07:44,740\nNetmask ordering, basically, what it is.\n\n1246\n01:07:44,740 --> 01:07:47,600\nIf you got a server that has\nmultiple network adapters.\n\n1247\n01:07:47,600 --> 01:07:51,100\nIt might be connected to three or\nfour of the subnets in your environment.\n\n1248\n01:07:51,100 --> 01:07:53,830\nThat means he's got three or\nfour, let's say he's got three.\n\n1249\n01:07:53,830 --> 01:07:55,770\nHe's got three IP addresses, one for\n\n1250\n01:07:55,770 --> 01:07:58,810\neach one of those network adapters\nconnect to those different networks.\n\n1251\n01:07:58,810 --> 01:07:59,970\nAnd if you query.\n\n1252\n01:07:59,970 --> 01:08:04,540\nSo he'll have three A records in that\nDNS console, or in that zone file.\n\n1253\n01:08:04,540 --> 01:08:08,470\nSo when a client sends a query for\nthat server's name, he's going to get,\n\n1254\n01:08:08,470 --> 01:08:09,520\nthe server doesn't know.\n\n1255\n01:08:09,520 --> 01:08:13,350\nI mean it gives it all free, it gives it\neverything that he's got, IPv4, IPv6.\n\n1256\n01:08:13,350 --> 01:08:15,860\nAnd if he's got three A records for\n\n1257\n01:08:15,860 --> 01:08:19,600\nthat particular server, he'll send\nback all three of them in a list.\n\n1258\n01:08:19,600 --> 01:08:23,360\nAnd then your client just takes\nthe first one and tries it,\n\n1259\n01:08:23,360 --> 01:08:25,780\nif that doesn't work it can\nbump down to the next one.\n\n1260\n01:08:25,780 --> 01:08:29,210\nBut your client, let's say subnet A,\nsubnet B and subnet C.\n\n1261\n01:08:29,210 --> 01:08:29,740\nAll right?\n\n1262\n01:08:29,740 --> 01:08:34,735\nAnd your client's on subnet B and when he\nqueries DNS he gets all three addresses\n\n1263\n01:08:34,735 --> 01:08:37,780\nbecause the servers connected to\nall three subnets, A, B, and C.\n\n1264\n01:08:37,780 --> 01:08:43,150\nWell, if the first one in the list is\nsubnet A, then he's gonna connect to that,\n\n1265\n01:08:43,150 --> 01:08:48,380\nnot realizing that that server's also\non subnet B, the same subnet he's on.\n\n1266\n01:08:48,380 --> 01:08:50,850\nNet mask ordering tells the DNS server,\nhey,\n\n1267\n01:08:50,850 --> 01:08:55,210\nwhen you return a list of multiple\nIP addresses, why don't you sort it?\n\n1268\n01:08:55,210 --> 01:08:59,260\nLook at the client's IP address, find\nthe one that's closest to the client, or\n\n1269\n01:08:59,260 --> 01:09:03,320\nwhoever's doing the query, and\nput that one in the top of the list.\n\n1270\n01:09:03,320 --> 01:09:06,740\nSo if you can find one and\nit's the same subnet as the requester or\n\n1271\n01:09:06,740 --> 01:09:11,010\nthe queryer, however you would say that,\nIt'll put that in the top of the list.\n\n1272\n01:09:11,010 --> 01:09:15,620\nI'd much rather have the client connecting\nacross to the interface that's on the same\n\n1273\n01:09:15,620 --> 01:09:16,670\nsubnet as him.\n\n1274\n01:09:16,670 --> 01:09:19,220\nAnd this could be\ngeographically dispersed so\n\n1275\n01:09:19,220 --> 01:09:24,080\ninstead of me going across the network out\nto Pensacola to get back to the server\n\n1276\n01:09:24,080 --> 01:09:28,501\nthat's here in my office I could use the\nIP addresses on the same subnent as bay,\n\n1277\n01:09:28,501 --> 01:09:30,093\nso that's all it is and\nit's just a check bar.\n\n1278\n01:09:30,093 --> 01:09:34,100\nSo all we have to do is go in there and\nturn on netmask ordering and\n\n1279\n01:09:34,100 --> 01:09:37,850\nit will start doing that it'll start\ntrying to prioritize that list\n\n1280\n01:09:37,850 --> 01:09:40,670\nof results that it sent back.\n\n1281\n01:09:40,670 --> 01:09:44,510\n>> Yeah but now, by default,\nthis is enabled, right?\n\n1282\n01:09:44,510 --> 01:09:49,020\n>> You know I have read certain things\nthat say it's disabled by default.\n\n1283\n01:09:49,020 --> 01:09:52,190\nI will tell you that every time\nI've looked in a DNS console\n\n1284\n01:09:52,190 --> 01:09:54,720\nthat I've just installed, it's turned on.\n\n1285\n01:09:54,720 --> 01:09:57,620\nSo you might want to check\nthat yourself and see,\n\n1286\n01:09:57,620 --> 01:10:00,460\nmake sure it's turned on if you\ndon't know if it is or not.\n\n1287\n01:10:00,460 --> 01:10:01,310\nIt just takes a second.\n\n1288\n01:10:01,310 --> 01:10:03,530\nIt's in the properties of the DNS server.\n\n1289\n01:10:03,530 --> 01:10:05,370\nBut like I said, I've seen mixed on that.\n\n1290\n01:10:05,370 --> 01:10:09,300\nI've seen some books tell you that\nit's turned off by default, and\n\n1291\n01:10:09,300 --> 01:10:11,910\nI'll tell you that every time I've\ninstalled DNS, it's already turned on.\n\n1292\n01:10:11,910 --> 01:10:15,610\nSo not exactly sure on that one.\n\n1293\n01:10:15,610 --> 01:10:16,170\n>> Right.\nAll right.\n\n1294\n01:10:16,170 --> 01:10:17,907\n>> I'll double check it on your machine.\n\n1295\n01:10:17,907 --> 01:10:19,070\n>> [LAUGH]\n>> Well, let's take a look.\n\n1296\n01:10:19,070 --> 01:10:20,110\n>> All right.\n>> Let's take a look and\n\n1297\n01:10:20,110 --> 01:10:21,070\nsee where it's at.\n\n1298\n01:10:21,070 --> 01:10:21,980\n>> All right.\n\n1299\n01:10:21,980 --> 01:10:23,530\n>> So, on this machine here.\n\n1300\n01:10:23,530 --> 01:10:25,652\nRight?\nSo what we'll do when we jump back into\n\n1301\n01:10:25,652 --> 01:10:27,880\nDNS Manager.\n\n1302\n01:10:27,880 --> 01:10:30,560\nAnd then, on our server.\n\n1303\n01:10:30,560 --> 01:10:36,350\nWe'll go to properties and\nthen on our advanced tab da,\n\n1304\n01:10:36,350 --> 01:10:40,330\nda, da right there enable new ask ordering\n>> And it just turned on and\n\n1305\n01:10:40,330 --> 01:10:42,375\nyou didn't turn that on earlier?\n\n1306\n01:10:42,375 --> 01:10:43,176\n>> Nope\n>> Right.\n\n1307\n01:10:43,176 --> 01:10:46,280\n>> Kind of makes makes me think it's\nturned on by default I think a couple\n\n1308\n01:10:46,280 --> 01:10:48,510\nof those people I was reading they\nweren't books they were blogs out there\n\n1309\n01:10:48,510 --> 01:10:49,200\non the internet.\n\n1310\n01:10:49,200 --> 01:10:53,450\nYou know you got to take that stuff you\ngot to do your own research so, right?\n\n1311\n01:10:53,450 --> 01:10:58,713\n>> So what kind of situations would you\nhave more than one IP address, a web\n\n1312\n01:10:58,713 --> 01:11:02,940\nserver- a web server that's connected to\nmultiple subnets, or something like that.\n\n1313\n01:11:04,250 --> 01:11:08,970\nShoot, a DNS server that is\nconnected to multiple servers,\n\n1314\n01:11:08,970 --> 01:11:11,517\nactually we're talking about DNS here but.\n\n1315\n01:11:11,517 --> 01:11:12,440\n[LAUGH] That kind of thing.\n\n1316\n01:11:12,440 --> 01:11:17,330\nYou might have an application server\nthat's connected to more than one subnet,\n\n1317\n01:11:18,420 --> 01:11:21,320\nand you want it to connect\nvia the closest one.\n\n1318\n01:11:23,150 --> 01:11:28,230\nBut yeah, I think primarily websites,\napp servers, things like that.\n\n1319\n01:11:28,230 --> 01:11:30,770\n>> All right.\nIsn't there also some stuff like\n\n1320\n01:11:30,770 --> 01:11:36,378\nSite Aware, things, I believe, I've heard\nthat come up in conversation or whatnot.\n\n1321\n01:11:36,378 --> 01:11:39,810\nIt'll kind of go out and do it on it's\nown, it'll realize where it's at and\n\n1322\n01:11:39,810 --> 01:11:41,250\nthen go and reach that guy.\n\n1323\n01:11:41,250 --> 01:11:46,938\n>> I think this is more,\nbecause it does site-aware applications,\n\n1324\n01:11:46,938 --> 01:11:49,330\nwill recognize what sites you're in,\n\n1325\n01:11:49,330 --> 01:11:54,380\nand when you clear your DNS, you'll\nmention what sites your in and then DNS.\n\n1326\n01:11:54,380 --> 01:11:58,700\nThat's primarily for services, the srv\nrecords and things like that, not so\n\n1327\n01:11:58,700 --> 01:11:59,610\nmuch for websites.\n\n1328\n01:11:59,610 --> 01:12:01,410\nThey don't create records in there.\n\n1329\n01:12:01,410 --> 01:12:03,799\nYou're just querying DNS for\nthe name of the web server and\n\n1330\n01:12:03,799 --> 01:12:05,231\ntrying to get back the IP address.\n\n1331\n01:12:05,231 --> 01:12:08,444\nSame thing for an application server,\nyou're probably just querying for\n\n1332\n01:12:08,444 --> 01:12:12,026\nthe name of the application or whatever\nthey've Published for that application.\n\n1333\n01:12:12,026 --> 01:12:15,811\nSo it's not a site aware\nthing in that case.\n\n1334\n01:12:15,811 --> 01:12:16,397\nRight?\n\n1335\n01:12:16,397 --> 01:12:17,700\n>> Yeah.\n\n1336\n01:12:17,700 --> 01:12:19,400\nNice.\nNow you did mention,\n\n1337\n01:12:19,400 --> 01:12:21,680\nyou were talking about recursion.\n\n1338\n01:12:23,110 --> 01:12:27,410\nSo in recursion the option to enable and\ndisable that is,\n\n1339\n01:12:27,410 --> 01:12:30,040\nbefore you know, let's, what is recursion?\n\n1340\n01:12:30,040 --> 01:12:33,760\n>> Recursion is what's gonna let my\nDNS server resolve external names.\n\n1341\n01:12:33,760 --> 01:12:37,080\nRight, because our DNS server that\nwe're running locally here is gonna be\n\n1342\n01:12:37,080 --> 01:12:41,600\nauthoritative for your particular company,\nor your namespace, to be more correct.\n\n1343\n01:12:41,600 --> 01:12:48,410\nSo let's say we are ITPro.TV, my DNS\nserver has a zone file for ITPro.TV,\n\n1344\n01:12:48,410 --> 01:12:53,695\nso I can go do that DNS server, and I can\nlook up any name that ends in ITPro.TV.\n\n1345\n01:12:53,695 --> 01:12:58,640\nClient1.ITPro.TV, or Server1.ITPro.TV.\n\n1346\n01:12:58,640 --> 01:13:03,630\nBut if I send a query to my DNS server for\na www.newegg.com, he doesn't have\n\n1347\n01:13:03,630 --> 01:13:06,800\nhis own for that, he's not authoritative\nfor that portion of the name space.\n\n1348\n01:13:06,800 --> 01:13:10,570\nI have to find the authoritative\nserver which is on New Egg's network.\n\n1349\n01:13:10,570 --> 01:13:15,020\nSo we can use recursion, my DNS server\ncan go out and use the root hints,\n\n1350\n01:13:15,020 --> 01:13:18,160\nwe've talked about this in our DNS\nepisode so if you haven't seen them.\n\n1351\n01:13:18,160 --> 01:13:21,970\nGo out to the very top of the name space,\nhit that root server,\n\n1352\n01:13:21,970 --> 01:13:26,615\nfind the .com server, and eventually\nwork his way down to the Contoso.com,\n\n1353\n01:13:26,615 --> 01:13:30,820\nthe newegg.com dns server and\ncan resolve that name.\n\n1354\n01:13:30,820 --> 01:13:32,820\nIf I disable recursion,\n\n1355\n01:13:32,820 --> 01:13:37,080\nI'm preventing my DNS server from\nbeing able to do that process.\n\n1356\n01:13:37,080 --> 01:13:42,480\nIt won't be able to resolve names unless\nhe's authoritative for it himself.\n\n1357\n01:13:42,480 --> 01:13:46,550\nIt disables forwarders,\nas well as the ability to use root hints.\n\n1358\n01:13:46,550 --> 01:13:50,370\nAnd we do this in environments where I\ndon't want external name resolution.\n\n1359\n01:13:50,370 --> 01:13:53,490\nYou know if I've got\na test environment and\n\n1360\n01:13:53,490 --> 01:13:57,090\nI need them to be able to resolve names\nwithin that test environment, but\n\n1361\n01:13:57,090 --> 01:14:00,010\nthese machines aren't patched,\nno anti virus software.\n\n1362\n01:14:00,010 --> 01:14:01,760\nI don't want them going\nout to the internet.\n\n1363\n01:14:01,760 --> 01:14:05,393\nI can disable recursion and they will\nnot be able to resolve external names.\n\n1364\n01:14:05,393 --> 01:14:08,450\nI'm assuming they're\nusing that DNS Server.\n\n1365\n01:14:08,450 --> 01:14:09,940\nSo that's usually where you stay.\n\n1366\n01:14:09,940 --> 01:14:13,750\nAnytime you want to prevent that\nDNS Server from being able to go out and\n\n1367\n01:14:13,750 --> 01:14:17,530\nresolve external names\nyou just say recursion.\n\n1368\n01:14:17,530 --> 01:14:19,978\n>> Right.\nAnd to disable that option so\n\n1369\n01:14:19,978 --> 01:14:24,376\nback [COUGH] there in our same\nsingle properties window and\n\n1370\n01:14:24,376 --> 01:14:28,300\nup there at the very top,\ndisable recursion.\n\n1371\n01:14:28,300 --> 01:14:31,270\nAnd as Mike mentioned,\nthere in parenthesis it says,\n\n1372\n01:14:31,270 --> 01:14:33,730\nalso disables forwarders.\n\n1373\n01:14:33,730 --> 01:14:38,360\nNow there is a command\nline way to do this.\n\n1374\n01:14:38,360 --> 01:14:40,240\nAnd just for the fun of it.\n\n1375\n01:14:40,240 --> 01:14:41,715\nLet's go here and run it.\n\n1376\n01:14:41,715 --> 01:14:42,640\n>> [COUGH]\n>> Alright.\n\n1377\n01:14:42,640 --> 01:14:49,900\nAnd that guy is D [SOUND] Dnscmd.\n\n1378\n01:14:49,900 --> 01:14:56,273\nAlright, and then the server\nname which this one, ckwb-dc1.\n\n1379\n01:14:56,273 --> 01:14:58,639\nAlright.\n\n1380\n01:14:58,639 --> 01:15:06,040\nAnd then config, and space forward slash.\n\n1381\n01:15:06,040 --> 01:15:09,470\nNo recursion.\n\n1382\n01:15:09,470 --> 01:15:09,980\nAlright.\n\n1383\n01:15:09,980 --> 01:15:13,590\nAnd then we can either do a one or a zero.\n\n1384\n01:15:13,590 --> 01:15:16,320\nRight?\nA one turns it off.\n\n1385\n01:15:16,320 --> 01:15:18,210\nAnd a zero turns it back on.\n\n1386\n01:15:18,210 --> 01:15:18,990\nOkay Alright?\n\n1387\n01:15:18,990 --> 01:15:20,700\nSo we can just put the, I can put a one.\n\n1388\n01:15:20,700 --> 01:15:22,980\nAnd there we go.\n\n1389\n01:15:22,980 --> 01:15:24,020\nAlright?\n\n1390\n01:15:24,020 --> 01:15:26,380\nAnd that'll turn it on,\nthat's gonna allow recursion.\n\n1391\n01:15:26,380 --> 01:15:28,130\nWhen it turns on no recursion.\n\n1392\n01:15:28,130 --> 01:15:31,990\nCorrect.\nJust like a double negative.\n\n1393\n01:15:31,990 --> 01:15:33,440\nYea.\nWe turn it off and\n\n1394\n01:15:33,440 --> 01:15:35,740\nit's allowing recursion.\n\n1395\n01:15:35,740 --> 01:15:40,670\nBut if we want no recursion then we put\nit to a zero so it's on so we block or\n\n1396\n01:15:40,670 --> 01:15:41,960\nwe don't allow it.\n\n1397\n01:15:41,960 --> 01:15:44,680\n>> We could actually go\nlook if we wanted to,\n\n1398\n01:15:44,680 --> 01:15:47,380\nwe could pull the properties back up and\nwe coud see.\n\n1399\n01:15:48,460 --> 01:15:51,770\nthat little check mark if its checking up.\n\n1400\n01:15:51,770 --> 01:15:52,540\n>> Right.\n\n1401\n01:15:52,540 --> 01:15:55,510\nSo in that case if we want to disable.\n\n1402\n01:15:55,510 --> 01:15:58,530\nYou'll have to close it and\n\n1403\n01:15:58,530 --> 01:16:03,550\nopen to see if it changes but\ngo ahead on your.\n\n1404\n01:16:04,840 --> 01:16:06,589\nBecause we want data, zero right?\n\n1405\n01:16:07,670 --> 01:16:11,650\nSo we want to allow recursion we're\nsetting no recursion to false or zero.\n\n1406\n01:16:11,650 --> 01:16:18,810\nAll right, we'll close that out and we'll\ngo back into our properties and advanced.\n\n1407\n01:16:18,810 --> 01:16:21,360\nNo?\nDid it turned on?\n\n1408\n01:16:21,360 --> 01:16:22,120\nIt didn't turn on?\n\n1409\n01:16:23,500 --> 01:16:28,520\nAll right, let's try one Just for\n\n1410\n01:16:28,520 --> 01:16:32,710\nold fums sake go back in there,\nand not that time.\n\n1411\n01:16:34,270 --> 01:16:38,890\nGo ahead and run that one again,\nand we'll close that back out.\n\n1412\n01:16:38,890 --> 01:16:42,150\nGo ahead and refresh that for\nthe fun of it, and\n\n1413\n01:16:42,150 --> 01:16:47,290\nwe'll go back into properties and\nadvanced and there we go.\n\n1414\n01:16:47,290 --> 01:16:51,720\nAlright, so now anyone who makes\nlook ups against this server,\n\n1415\n01:16:51,720 --> 01:16:53,580\nthey won't be able to go out?\n\n1416\n01:16:53,580 --> 01:16:56,580\n>> Only if it's got the zone, and\nI don't know what zones you have on there,\n\n1417\n01:16:56,580 --> 01:16:59,560\njust the check about so\nunless that DNS server has the answer,\n\n1418\n01:16:59,560 --> 01:17:03,670\nhe's not gonna be able to go out and get\nhelp from any other DNS servers, exactly.\n\n1419\n01:17:03,670 --> 01:17:05,500\nSo if this guy doesn't know the answer,\nthat's it.\n\n1420\n01:17:05,500 --> 01:17:07,040\nYou get name cannot be found.\n\n1421\n01:17:07,040 --> 01:17:11,090\nWell what if, okay,\nlet's say he has entries in his cache?\n\n1422\n01:17:11,090 --> 01:17:15,240\nSo, it was already in the cache, you can\nstill pull that until the TTL expires.\n\n1423\n01:17:15,240 --> 01:17:16,630\nRight?\nYep.\n\n1424\n01:17:16,630 --> 01:17:17,220\nNice.\n\n1425\n01:17:17,220 --> 01:17:18,210\nAnd then, that'd be it.\n\n1426\n01:17:18,210 --> 01:17:19,160\nThere'll be no mas.\n\n1427\n01:17:19,160 --> 01:17:19,690\nNo mas.\n\n1428\n01:17:19,690 --> 01:17:21,110\nNo mas, no more.\n\n1429\n01:17:21,110 --> 01:17:23,080\nAlright, we're right on.\n\n1430\n01:17:23,080 --> 01:17:26,060\nSo, yea, we've got the recursion,\nwe got our.\n\n1431\n01:17:26,060 --> 01:17:28,070\nNetmask, netmask ordering.\n\n1432\n01:17:28,070 --> 01:17:31,290\nWhat about, let's see next\non our list of global names.\n\n1433\n01:17:31,290 --> 01:17:37,110\n>> We have global name zones, and\nwe got analyzing zone level statistics.\n\n1434\n01:17:37,110 --> 01:17:39,910\nSo global name zones, I guess,\nyou wanna start there?\n\n1435\n01:17:39,910 --> 01:17:42,020\n>> Sure.\nGlobal name zones are a way\n\n1436\n01:17:42,020 --> 01:17:44,640\nthat we can resolve\n>> Single label names you know again from\n\n1437\n01:17:44,640 --> 01:17:48,660\nour DNS episode we've learned\nthat DNS resolves fully qualified\n\n1438\n01:17:48,660 --> 01:17:52,010\ndomain names into IP addresses right, but\n\n1439\n01:17:52,010 --> 01:17:56,120\nthere's times when we might be using\nsingle label names a lot of times for\n\n1440\n01:17:56,120 --> 01:17:59,050\napp servers and things like that\n>> [COUGH] Excuse me.\n\n1441\n01:17:59,050 --> 01:18:05,117\nI wanted my user to be able to type\nin http://app1 and connect to it.\n\n1442\n01:18:05,117 --> 01:18:07,310\nThe problem is,\nwhen you use those unresolved, or\n\n1443\n01:18:07,310 --> 01:18:12,690\nthose unqualified names,\nif it's not in the domain that you're in.\n\n1444\n01:18:12,690 --> 01:18:14,770\nOr one of your parent domains,\n\n1445\n01:18:14,770 --> 01:18:17,230\nyour computer's not going to\nbe able to resolve it, right?\n\n1446\n01:18:17,230 --> 01:18:22,790\nWe've talked, I believe,\nin one of our episodes, about, devolution.\n\n1447\n01:18:22,790 --> 01:18:26,990\nWhere your client, when you,\nif you type in an unqualified name,\n\n1448\n01:18:26,990 --> 01:18:30,960\nit's gonna assume that the resource you're\nlooking for is in the same domain as you.\n\n1449\n01:18:30,960 --> 01:18:33,960\nSo if your domain name is contoso.com.\n\n1450\n01:18:33,960 --> 01:18:38,160\nSo your computer is client1.contoso.com.\n\n1451\n01:18:38,160 --> 01:18:40,740\nAnd you type in app1.\n\n1452\n01:18:40,740 --> 01:18:42,620\nThen it's gonna try to resolve.\n\n1453\n01:18:42,620 --> 01:18:43,680\nYou can't resolve app1.\n\n1454\n01:18:43,680 --> 01:18:48,250\nYou can't send app1 a query over to DNS,\nsaying what's the IP address of app1?\n\n1455\n01:18:48,250 --> 01:18:50,130\nBecause DNS needs the full name.\n\n1456\n01:18:50,130 --> 01:18:52,090\nI need to know what DNS server to talk to.\n\n1457\n01:18:52,090 --> 01:18:54,730\nIs it the Contesor.com DNS server?\n\n1458\n01:18:54,730 --> 01:18:56,240\nIs it the NewEgg.com DNS server?\n\n1459\n01:18:56,240 --> 01:18:57,770\nI need the full name.\n\n1460\n01:18:57,770 --> 01:19:01,230\nSo, your client is gonna assume that\nit's in the same domain as you and\n\n1461\n01:19:01,230 --> 01:19:05,130\nit's gonna going to put App one back in\nTOSO.com and then query that DNS Server.\n\n1462\n01:19:06,340 --> 01:19:09,940\nIf that doesn't work, it will devolve\nthat name piece by piece, but\n\n1463\n01:19:09,940 --> 01:19:13,870\nthat's only going to keep you\nin the same tree in your force.\n\n1464\n01:19:13,870 --> 01:19:15,870\nThe contiguous name space.\n\n1465\n01:19:15,870 --> 01:19:16,980\nI can try to draw this up.\n\n1466\n01:19:16,980 --> 01:19:20,840\nI don't have Don's cool drawing\ntool on my computer just yet, but\n\n1467\n01:19:20,840 --> 01:19:23,610\nyou know if you think about this.\n\n1468\n01:19:23,610 --> 01:19:26,500\nIf your in a child to main,\nlet's say we've got Adata.com and\n\n1469\n01:19:26,500 --> 01:19:31,170\nwe've got a child to main\nthat's called EastAdata.com.\n\n1470\n01:19:31,170 --> 01:19:33,260\nAnd your computer is in that domain.\n\n1471\n01:19:33,260 --> 01:19:37,700\nThen your computer's name\nis client1.east.adata.com.\n\n1472\n01:19:37,700 --> 01:19:44,180\nYou type in app1 it's gonna attempt\nto resolve it as app1.east.adata.com.\n\n1473\n01:19:44,180 --> 01:19:46,510\nIt assumes it's in the same domain as you.\n\n1474\n01:19:46,510 --> 01:19:47,520\nIf that doesn't work,\n\n1475\n01:19:47,520 --> 01:19:50,980\nif it comes back with name not found,\nI can devolve the name.\n\n1476\n01:19:50,980 --> 01:19:53,930\nI can drop off part of that domain suffix.\n\n1477\n01:19:53,930 --> 01:19:57,213\nI can say if its not app one.ease.\n\n1478\n01:19:57,213 --> 01:20:00,110\nadata .com let me try app one.\n\n1479\n01:20:00,110 --> 01:20:00,689\nadata.\n\n1480\n01:20:00,689 --> 01:20:03,399\ncom.\nWork my way up that domain tree inside my\n\n1481\n01:20:03,399 --> 01:20:03,960\nforest.\n\n1482\n01:20:03,960 --> 01:20:10,752\nBut what if in my forest I've got\na domain called, what did I say?\n\n1483\n01:20:10,752 --> 01:20:11,261\n>> 8 AM.\n>> So\n\n1484\n01:20:11,261 --> 01:20:15,407\nwhat if I've got another domain\nin my forest called Fabricam?\n\n1485\n01:20:15,407 --> 01:20:18,303\n[COUGH] and\napp one is actually infabricate.\n\n1486\n01:20:18,303 --> 01:20:20,405\nWell my clients never gonna try that,\nright?\n\n1487\n01:20:20,405 --> 01:20:23,059\nHe dropped off the east he\nwas left with adatum.com and\n\n1488\n01:20:23,059 --> 01:20:27,036\nthat's as far as I can devolve it, I'm all\nthe way up to the parent of this time, or\n\n1489\n01:20:27,036 --> 01:20:29,080\nthe very top of that tree.\n\n1490\n01:20:29,080 --> 01:20:33,630\nSo what I can do is I can create\nwhat we call global name zones.\n\n1491\n01:20:33,630 --> 01:20:38,270\nAnd these allow me to create what\nwe call canonical name records,\n\n1492\n01:20:38,270 --> 01:20:42,030\nwhich we can do in our normal zones as\nwell, and it gives my computers a way to\n\n1493\n01:20:42,030 --> 01:20:46,700\nresolve those single label names even\nif they're not in the same domain or\n\n1494\n01:20:46,700 --> 01:20:50,160\ndomain tree as that client machine.\n\n1495\n01:20:50,160 --> 01:20:52,928\nI'm trying to think when this came out.\n\n1496\n01:20:52,928 --> 01:20:55,220\nI want to say it came out in 2008.\n\n1497\n01:20:55,220 --> 01:20:56,814\nDon't quote me on that.\n\n1498\n01:20:56,814 --> 01:21:00,590\nBut all you have to do is you\nhave to create the zone itself.\n\n1499\n01:21:00,590 --> 01:21:02,800\nAnd it has to be named global names.\n\n1500\n01:21:02,800 --> 01:21:07,240\nAnd that is plural, all one word,\nglobalnames, and then within there\n\n1501\n01:21:07,240 --> 01:21:11,860\nyou're gonna create your C name records,\ncuz it's a single label name, so you're\n\n1502\n01:21:11,860 --> 01:21:16,375\ngonna create these canonical names and\nthey're going to point to the A record.\n\n1503\n01:21:16,375 --> 01:21:18,835\nSo if we want to give you\nguys a demonstration of this,\n\n1504\n01:21:18,835 --> 01:21:22,175\nwe can pull up a DNS console and\nI'll show you exactly.\n\n1505\n01:21:22,175 --> 01:21:23,795\nIt'll make a little more sense\nI think when you see it.\n\n1506\n01:21:25,075 --> 01:21:27,665\n>> All right, I can click through Mike.\n\n1507\n01:21:27,665 --> 01:21:28,365\n>> Yeah.\n>> And you tell me\n\n1508\n01:21:28,365 --> 01:21:30,962\nwhere to go with the click\n>> Sounds like a plan.\n\n1509\n01:21:30,962 --> 01:21:35,822\n>> Alright so Nate's got his DNS console\nopen and I can see that this DNS server is\n\n1510\n01:21:35,822 --> 01:21:40,692\nauthoritative for the Chickabout.net,\nso anything that is in Chickabout.net he\n\n1511\n01:21:40,692 --> 01:21:42,930\nwould be able to resolve\n>> And\n\n1512\n01:21:42,930 --> 01:21:45,790\nnow we're gonna kind of cheat cuz we\nonly got the one DNS server here.\n\n1513\n01:21:45,790 --> 01:21:48,010\nLet's make another zone.\n\n1514\n01:21:48,010 --> 01:21:53,370\nSo let's right click, New Zone and\nlet's make a zone for something else.\n\n1515\n01:21:53,370 --> 01:21:55,720\nSomething like cantoso.com or\n\n1516\n01:21:55,720 --> 01:21:59,070\nfabricam or eightdateem\n>> Anything crazy like that.\n\n1517\n01:21:59,070 --> 01:21:59,640\n>> And primary zone?\n\n1518\n01:21:59,640 --> 01:22:00,300\n>> Yeah, might as well.\n\n1519\n01:22:00,300 --> 01:22:01,460\n>> All right.\n\n1520\n01:22:01,460 --> 01:22:04,550\n>> So we'll make it primary zone,\nreplicate it, yeah, that's fine.\n\n1521\n01:22:04,550 --> 01:22:06,916\nAnd Next and then, I don't know,\nwhatever you'd prefer.\n\n1522\n01:22:06,916 --> 01:22:09,080\n>> [MUSIC]\n\n1523\n01:22:09,080 --> 01:22:10,540\n>> Contoso's easy to type.\n\n1524\n01:22:10,540 --> 01:22:14,270\nAdatum is the new Microsoft\nlittle practice zone.\n\n1525\n01:22:14,270 --> 01:22:17,605\nContoso.com, needs to be\na fully qualified name.\n\n1526\n01:22:17,605 --> 01:22:18,495\nAnd then we'll click Next.\n\n1527\n01:22:19,835 --> 01:22:21,975\nAnd sure, we're not really\ngonna use it for anything, so\n\n1528\n01:22:21,975 --> 01:22:25,235\nwe'll allow Only Secure Dynamic Updates,\ngood option anyway.\n\n1529\n01:22:25,235 --> 01:22:26,869\nAnd then we'll click Finish.\n\n1530\n01:22:28,460 --> 01:22:30,900\nAnd then let's create\na resource record in there.\n\n1531\n01:22:30,900 --> 01:22:34,150\nSo let's expand out Contoso,\nright click on Contoso, sorry,\n\n1532\n01:22:34,150 --> 01:22:39,000\nchoose new A record, New Host A or Quad A.\n\n1533\n01:22:39,000 --> 01:22:44,390\nLet's make a record for APP1.\n\n1534\n01:22:44,390 --> 01:22:48,750\nThen the IP address, just put it down as\nwhatever you want, 10.1.2.3 or something.\n\n1535\n01:22:51,010 --> 01:22:51,890\nAnd then add host.\n\n1536\n01:22:53,510 --> 01:22:54,080\nAnd then, OK.\n\n1537\n01:22:55,520 --> 01:22:59,300\nAll right, so again,\nif my client is in chickabow.net,\n\n1538\n01:22:59,300 --> 01:23:02,240\nwhen he tries to type in app1 unqualified,\n\n1539\n01:23:02,240 --> 01:23:05,910\nhe's never gonna find it because\nit's not part of his own DNS suffix.\n\n1540\n01:23:05,910 --> 01:23:09,640\nHe's not gonna devolve it from\nchickabow.net to cantoso.com\n\n1541\n01:23:09,640 --> 01:23:11,090\n>> Not gonna happen.\n\n1542\n01:23:11,090 --> 01:23:15,440\nSo what we need to do is if we need\nusers in Chicabow to be able to resolve\n\n1543\n01:23:15,440 --> 01:23:17,280\nthese single label names,\n\n1544\n01:23:17,280 --> 01:23:20,420\nwhat we're going to do is we're\ngoing to create a global name zone.\n\n1545\n01:23:20,420 --> 01:23:22,775\nSo let's create another primary zone.\n\n1546\n01:23:22,775 --> 01:23:25,535\nAnd it's gonna be called GlobalNames,\nall one word.\n\n1547\n01:23:27,195 --> 01:23:31,495\nAnd let's replicate, let's do all\nthe inner servers in the forest,\n\n1548\n01:23:31,495 --> 01:23:32,985\nthat first one up there.\n\n1549\n01:23:32,985 --> 01:23:37,515\nA good option with your GlobalNames zone\nis you wanna make it a forest wide zone.\n\n1550\n01:23:37,515 --> 01:23:41,215\nWe wanna replicate that all in our\nDNS servers in the entire forest.\n\n1551\n01:23:41,215 --> 01:23:42,129\nAnd then we'll click next.\n\n1552\n01:23:43,170 --> 01:23:44,970\nAnd then globalnames, all one word.\n\n1553\n01:23:44,970 --> 01:23:49,220\nAnd then I click Next, and\n\n1554\n01:23:49,220 --> 01:23:53,590\nsure, you can actually choose\ndo not allow dynamic updates.\n\n1555\n01:23:53,590 --> 01:23:57,020\nNothing's gonna try to update in that zone\nanyway, but good idea to turn it off,\n\n1556\n01:23:57,020 --> 01:23:59,220\njust in case somebody wants\nto get malicious in there.\n\n1557\n01:23:59,220 --> 01:24:00,160\nAnd then hit Finish.\n\n1558\n01:24:02,100 --> 01:24:06,470\n>> And then what we do, is inside global\nnames, [COUGH], we're going to create\n\n1559\n01:24:06,470 --> 01:24:11,520\na new cname record, or a new alias,\na canonical name as Nate said earlier.\n\n1560\n01:24:11,520 --> 01:24:15,100\nThese do not point to IP addresses, these\npoint to fully qualified domain names.\n\n1561\n01:24:15,100 --> 01:24:20,220\nSo we're going to put APP1 for\nthe alias, and then for\n\n1562\n01:24:20,220 --> 01:24:25,520\nthe fully qualified,\nthat's going to be App1.Cantoso.com.\n\n1563\n01:24:25,520 --> 01:24:29,220\nSo what's gonna happen is when your client\nqueries it's gonna look in that global\n\n1564\n01:24:29,220 --> 01:24:30,870\nname zone and go there's app one,\n\n1565\n01:24:30,870 --> 01:24:35,050\napp one's IP address is actually,\noh, app1.cantoso.com.\n\n1566\n01:24:35,050 --> 01:24:39,200\nAnd then because this server has\nCantoso.com it can look it up there, and\n\n1567\n01:24:39,200 --> 01:24:40,240\nfind that A record.\n\n1568\n01:24:40,240 --> 01:24:43,150\nIf it didn't have Contoso it would\ngo through the normal process using\n\n1569\n01:24:43,150 --> 01:24:45,850\nthe roots or forwarders or\nwhatever to find Cantoso.com.\n\n1570\n01:24:45,850 --> 01:24:50,470\nSo this is what gives me the ability\nto resolve these single label\n\n1571\n01:24:50,470 --> 01:24:52,210\nnames within my environment.\n\n1572\n01:24:52,210 --> 01:24:54,980\nThere is one more thing we need to do.\n\n1573\n01:24:54,980 --> 01:24:59,050\nWe need to run the, oh gosh,\nI gotta remember that command,\n\n1574\n01:24:59,050 --> 01:25:02,010\nthere's a PowerShell command,\nit's gonna be set dash.\n\n1575\n01:25:04,502 --> 01:25:06,070\nI gotta think of that guy.\n\n1576\n01:25:06,070 --> 01:25:09,924\n>> I will pull up my PowerShell then.\n\n1577\n01:25:09,924 --> 01:25:12,053\nAll right.\n\n1578\n01:25:12,053 --> 01:25:20,030\n[SOUND]\nIt was set-globalnames.\n\n1579\n01:25:20,030 --> 01:25:21,091\nLet me find that real quick.\n\n1580\n01:25:25,915 --> 01:25:28,608\nI want to say it's set-globalnamezones or\nsomething.\n\n1581\n01:25:32,568 --> 01:25:36,586\n[SOUND] And good old PowerShell.\n\n1582\n01:25:36,586 --> 01:25:39,042\nSo this will be the way that we'll do it.\n\n1583\n01:25:41,956 --> 01:25:46,170\n[SOUND]\n>> You can do it from CMS CMD as well.\n\n1584\n01:25:46,170 --> 01:25:49,070\nAnd that's the first one I found.\n\n1585\n01:25:49,070 --> 01:25:50,920\nThere is a PowerShell command for it.\n\n1586\n01:25:50,920 --> 01:25:54,780\nWe can just do the DNS command, or\nDNSCMD, you can do it from right here.\n\n1587\n01:25:54,780 --> 01:25:58,120\nDNSCMD, space, name of your server.\n\n1588\n01:26:00,890 --> 01:26:03,249\nSpace, forward slash, config.\n\n1589\n01:26:04,590 --> 01:26:08,300\nSpace, forward slash, enable global\nnames support and that's all one word.\n\n1590\n01:26:08,300 --> 01:26:16,790\nEnableglobalnamessupport and\nit is plural yes, names support.\n\n1591\n01:26:16,790 --> 01:26:19,118\n>> Space one to turn it on or true.\n\n1592\n01:26:19,118 --> 01:26:22,390\nAnd enter and that's all we need.\n\n1593\n01:26:22,390 --> 01:26:24,340\nAlright.\n>> And now they know to go and look for\n\n1594\n01:26:24,340 --> 01:26:27,340\nthat global name zone when they're trying\nto resolve those single label names.\n\n1595\n01:26:27,340 --> 01:26:31,640\nOr that should say the DNS server\nknows that if it gets a request for\n\n1596\n01:26:31,640 --> 01:26:34,590\na name like that, it's not authoritative,\nbefore it goes out and\n\n1597\n01:26:34,590 --> 01:26:37,850\nuses the roots or forwards, or whatever,\nit can check in that global name zone and\n\n1598\n01:26:37,850 --> 01:26:40,180\nsee if there's a single label name for it.\n\n1599\n01:26:40,180 --> 01:26:43,360\nOr see if there's a C\nname record in there.\n\n1600\n01:26:43,360 --> 01:26:46,810\n>> So if we're resolving\nthese single liable names.\n\n1601\n01:26:46,810 --> 01:26:48,270\nThere's a goal of names.\n\n1602\n01:26:48,270 --> 01:26:50,890\nDo they replace lens?\n\n1603\n01:26:50,890 --> 01:26:53,655\n>> They, hm,\nwhat's a good way to say that?\n\n1604\n01:26:53,655 --> 01:26:54,210\n[LAUGH]\n>> [LAUGH]\n\n1605\n01:26:54,210 --> 01:26:55,720\n>> It used to be,\n\n1606\n01:26:55,720 --> 01:26:59,100\nnot that I would ever talk about\nactual questions on the exam\n\n1607\n01:26:59,100 --> 01:27:02,184\n>> But it's a good thing to know\n\n1608\n01:27:02,184 --> 01:27:02,900\nhint, hint.\n\n1609\n01:27:02,900 --> 01:27:05,300\n>> [LAUGH]\n>> But they, back\n\n1610\n01:27:05,300 --> 01:27:08,460\nwhen we used to use wins, that was one\nof the things they would try to ask you.\n\n1611\n01:27:08,460 --> 01:27:13,030\nI don't think they would anymore but the\npoint is, it's not a replacement for wins.\n\n1612\n01:27:13,030 --> 01:27:15,560\nYou read some of these guys\nthat talk about it and\n\n1613\n01:27:15,560 --> 01:27:17,410\nthey're going to tell you\nthat it replaces wins.\n\n1614\n01:27:17,410 --> 01:27:19,560\nI just want you to be\ncareful with that concept.\n\n1615\n01:27:19,560 --> 01:27:21,000\nIt is doing the same thing as wins.\n\n1616\n01:27:21,000 --> 01:27:23,720\nWins being our\nWindows Internet Name Service.\n\n1617\n01:27:23,720 --> 01:27:27,530\nAnd it was how I could resolve\nnet BIOS names and IP addresses.\n\n1618\n01:27:27,530 --> 01:27:29,560\nNet BIOS names were single label, right?\n\n1619\n01:27:29,560 --> 01:27:33,470\nThere was no dot this, that or\nthe other, it was just Client 1.\n\n1620\n01:27:33,470 --> 01:27:37,735\nSo, in a sense, global names are is\ndoing the same thing as wins.\n\n1621\n01:27:37,735 --> 01:27:40,365\nBut global name zones is a DNS protocol.\n\n1622\n01:27:40,365 --> 01:27:42,555\nIt's not a net bios protocol.\n\n1623\n01:27:42,555 --> 01:27:45,925\nSo if you have an application or an\noperating system, or something like that.\n\n1624\n01:27:45,925 --> 01:27:50,845\nThat relies on net bios for\nname resolution, it can't all of a sudden\n\n1625\n01:27:50,845 --> 01:27:55,105\nstart using global name zones because\nit doesn't understand the DNS protocol.\n\n1626\n01:27:55,105 --> 01:27:59,369\nSo global name zones is a way\nto transition from your\n\n1627\n01:27:59,369 --> 01:28:03,048\ndependency on WINS to\na total DNS solution.\n\n1628\n01:28:03,048 --> 01:28:07,710\nWe can eliminate NetBIOS from our\nnetwork altogether because now it can\n\n1629\n01:28:07,710 --> 01:28:12,448\nresolve fully qualified domain names\nthrough DNS as well as single label\n\n1630\n01:28:12,448 --> 01:28:16,196\nnames using global naming So\nin a way, it replaces WINS.\n\n1631\n01:28:16,196 --> 01:28:18,147\nJust understand it's not\na direct replacement.\n\n1632\n01:28:18,147 --> 01:28:20,540\nIt's not a plug and\nplay replacement for WINS.\n\n1633\n01:28:20,540 --> 01:28:23,975\nIf something understands NetBIOS and\ndoesn't understand DNS, it's not\n\n1634\n01:28:23,975 --> 01:28:27,780\ngonna be able to use global [INAUDIBLE]\n>> So,\n\n1635\n01:28:27,780 --> 01:28:32,440\nMike, while you were explaining that,\nI went and found that power shell code.\n\n1636\n01:28:32,440 --> 01:28:33,150\n>> Oh, did you?\n\n1637\n01:28:33,150 --> 01:28:33,700\nGood.\n\n1638\n01:28:33,700 --> 01:28:34,310\n>> Yep.\n\n1639\n01:28:34,310 --> 01:28:35,076\nAnd that guy.\n\n1640\n01:28:35,076 --> 01:28:36,579\nIt's so we could do get.\n\n1641\n01:28:36,579 --> 01:28:38,045\nIt's either get or set.\n\n1642\n01:28:38,045 --> 01:28:42,745\n>> Get if you just wanna see the current\nvalue, set if you wanna change it.\n\n1643\n01:28:42,745 --> 01:28:46,600\nDNS server global namezone.\n\n1644\n01:28:46,600 --> 01:28:47,526\n>> There we go.\n\n1645\n01:28:47,526 --> 01:28:52,000\n>> You have DNS server global namezone and\nit's running that.\n\n1646\n01:28:52,000 --> 01:28:54,890\nSo we can see, the very first line, true.\n\n1647\n01:28:54,890 --> 01:28:56,620\nSo it is turned on.\n\n1648\n01:28:56,620 --> 01:28:59,850\n>> Since you turned on\nyour usernet DNS CND.\n\n1649\n01:28:59,850 --> 01:29:00,870\nFantastic.\n\n1650\n01:29:00,870 --> 01:29:04,050\n>> Yep.\nAll right, so what about our, yeah,\n\n1651\n01:29:04,050 --> 01:29:06,420\nanything on global name zones?\n\n1652\n01:29:06,420 --> 01:29:08,220\n>> No, I think that's pretty much it.\n\n1653\n01:29:08,220 --> 01:29:10,720\nIt's, like I said, not too complex.\n\n1654\n01:29:10,720 --> 01:29:13,700\nIt's understanding why we need it and\n\n1655\n01:29:13,700 --> 01:29:17,560\nit's if we're resolving those single\nlabel names and making sure we enable it.\n\n1656\n01:29:17,560 --> 01:29:20,710\nAnd then create those\ncname records in there.\n\n1657\n01:29:20,710 --> 01:29:23,480\n>> All right, so\nMike we do have one last little topic.\n\n1658\n01:29:23,480 --> 01:29:27,395\nWe are out of time on\nour first little break.\n\n1659\n01:29:27,395 --> 01:29:28,300\n>> Okay.\n>> But\n\n1660\n01:29:28,300 --> 01:29:31,570\nthe last one we have left,\nzone level statistics.\n\n1661\n01:29:31,570 --> 01:29:32,900\n>> Oh, you want to do that real quick?\n\n1662\n01:29:32,900 --> 01:29:34,480\n>> Yeah, just while you got\nyour DNS server pulled up?\n\n1663\n01:29:34,480 --> 01:29:36,270\nYou guys just want to hang out for\njust a minute longer?\n\n1664\n01:29:36,270 --> 01:29:36,780\n>> All right, let's do it.\n\n1665\n01:29:36,780 --> 01:29:38,292\n>> I keep rambling too much, I guess.\n\n1666\n01:29:38,292 --> 01:29:39,971\n>> [LAUGH]\n>> I'm running us way over on time for\n\n1667\n01:29:39,971 --> 01:29:41,020\nthese episodes.\n\n1668\n01:29:41,020 --> 01:29:46,330\nYeah, let's pull up that DNS server again\nreal quick, and open up PowerShell really.\n\n1669\n01:29:46,330 --> 01:29:49,502\nGosh, do I remember that command now?\n\n1670\n01:29:49,502 --> 01:29:52,640\n>> [LAUGH]\nLet's see,\n\n1671\n01:29:52,640 --> 01:29:58,540\nif we go to get dash\nDNS server statistics.\n\n1672\n01:29:58,540 --> 01:30:01,640\nSee if that one fills in for us.\n\n1673\n01:30:01,640 --> 01:30:03,930\n>> I guess I probably could\nhave put an S in there.\n\n1674\n01:30:03,930 --> 01:30:04,720\n>> Yep, it's good enough.\n\n1675\n01:30:04,720 --> 01:30:05,620\n>> Oops.\n\n1676\n01:30:05,620 --> 01:30:07,960\n>> Shift tab right back there,\nthere we go.\n\n1677\n01:30:07,960 --> 01:30:11,410\n>> So yeah get dash DNS server\nstatistics space dash name.\n\n1678\n01:30:12,870 --> 01:30:17,841\nOr I'm sorry,\nspace dash zone name, probably.\n\n1679\n01:30:19,090 --> 01:30:22,916\nAnd then the name of the zone you\nwanna get your statistics back on.\n\n1680\n01:30:22,916 --> 01:30:24,300\nIn this case.\n\n1681\n01:30:24,300 --> 01:30:25,950\nYep, and that should be it.\n\n1682\n01:30:25,950 --> 01:30:27,157\n>> [SOUND]\n>> And\n\n1683\n01:30:27,157 --> 01:30:30,290\nyou'll see if we start from the bottom\nhere, we've got zone update statistics.\n\n1684\n01:30:30,290 --> 01:30:34,510\nSo, I can see how many times we've had\ndynamic updates received or rejected.\n\n1685\n01:30:34,510 --> 01:30:36,750\n>> Above that you've got your\nzone transfer statistics.\n\n1686\n01:30:36,750 --> 01:30:41,720\nHe's only got one DNS server, so\nI don't see any statistics there for AXFR,\n\n1687\n01:30:41,720 --> 01:30:45,000\nall zone transfer, IXFR,\nincremental zone transfer.\n\n1688\n01:30:45,000 --> 01:30:47,020\nAnd then above that there's a long list.\n\n1689\n01:30:47,020 --> 01:30:52,400\nEach type of resource record that we\nhave available in DNS is listed out\n\n1690\n01:30:52,400 --> 01:30:57,000\nwith query failures, response,\nname error and receive statistics.\n\n1691\n01:30:57,000 --> 01:30:59,320\nSo I can look at, and I think if\nyou go all the way up to the top,\n\n1692\n01:30:59,320 --> 01:31:02,980\nyou should have some A records listed up\nthere that actually has some activity.\n\n1693\n01:31:02,980 --> 01:31:05,580\nIt's giving you some detailed information.\n\n1694\n01:31:05,580 --> 01:31:09,030\nHow many times was this server queried for\na CNAME record or\n\n1695\n01:31:09,030 --> 01:31:11,810\na PGR record or an A record?\n\n1696\n01:31:11,810 --> 01:31:15,990\nAnd I can see he's had seven\nfailures: 37 queries received,\n\n1697\n01:31:15,990 --> 01:31:20,270\n37 responses, 21 query name errors.\n\n1698\n01:31:20,270 --> 01:31:24,030\nWhich would be like if you queried your\nDNS server for a name that doesn't exist.\n\n1699\n01:31:24,030 --> 01:31:27,160\nSo just a way to get some detailed\nstatistics at the zone level.\n\n1700\n01:31:27,160 --> 01:31:28,760\nAnd so you can fully change the name, and\n\n1701\n01:31:28,760 --> 01:31:32,220\nyou can get statistics\non a different zone.\n\n1702\n01:31:32,220 --> 01:31:34,000\n>> So good for troubleshooting.\n\n1703\n01:31:34,000 --> 01:31:35,294\n>> Nice.\n\n1704\n01:31:35,294 --> 01:31:37,930\nAll right, Mike, anything else with\ngood old zone level statistics?\n\n1705\n01:31:37,930 --> 01:31:39,110\n>> Not for me.\n\n1706\n01:31:39,110 --> 01:31:40,400\nFor you?\n>> Yeah, I'm good.\n\n1707\n01:31:40,400 --> 01:31:41,530\n>> All right.\n\n1708\n01:31:41,530 --> 01:31:42,310\n>> Sweet.\n\n1709\n01:31:42,310 --> 01:31:46,600\n>> All right, in that case let's go ahead\nand wrap it up here for our break and\n\n1710\n01:31:46,600 --> 01:31:50,000\nwhen we come back what's next after break?\n\n1711\n01:31:50,000 --> 01:31:53,400\n>> Good old IPAM,\nIP Address Address management.\n\n1712\n01:31:53,400 --> 01:31:54,350\n>> Nice.\n\n1713\n01:31:54,350 --> 01:31:56,210\nYeah, and I'll save the Apple jokes.\n\n1714\n01:31:56,210 --> 01:31:57,507\n>> All right.\n>> [LAUGH]\n\n1715\n01:31:57,507 --> 01:31:58,020\n>> All right, so\n\n1716\n01:31:58,020 --> 01:32:00,950\nwe'll get onto that stuff after the break.\n\n1717\n01:32:03,185 --> 01:32:08,343\n[SOUND] All right, welcome back.\n\n1718\n01:32:08,343 --> 01:32:12,933\nAll right, so where we left off, we just\ngot done wrapping up some of that good old\n\n1719\n01:32:12,933 --> 01:32:15,930\nDNS stuff, global name zones and\nthe statistics.\n\n1720\n01:32:15,930 --> 01:32:17,850\nPretty fun and exciting.\n\n1721\n01:32:17,850 --> 01:32:23,640\nSo to wrap this thing up we've got IPAM,\nIP Address Management.\n\n1722\n01:32:23,640 --> 01:32:28,590\nAnd a tool that we can use to manage\nour large infrastructure as we're\n\n1723\n01:32:28,590 --> 01:32:31,945\nspread out all over the country or\nglobally hopefully, right?\n\n1724\n01:32:31,945 --> 01:32:34,890\n>> Absolutely.\n>> A tool which we can use\n\n1725\n01:32:34,890 --> 01:32:39,650\nto inventory and to see our\nutilization and some of the rules and\n\n1726\n01:32:39,650 --> 01:32:41,990\nstuff which we have on our machines.\n\n1727\n01:32:41,990 --> 01:32:46,515\nIt's pretty cool,\nit basically centralizes the management of\n\n1728\n01:32:46,515 --> 01:32:52,260\nDHCP, DNS,\nActive Directory if we choose to do so,\n\n1729\n01:32:52,260 --> 01:32:56,720\nas well as my Network Policy Server,\nI believe, or my NPS server.\n\n1730\n01:32:56,720 --> 01:33:00,400\nSo, what it is,\nit's a client server type of model.\n\n1731\n01:33:00,400 --> 01:33:02,410\nYou install the IPM console.\n\n1732\n01:33:02,410 --> 01:33:07,330\nThe IPM console needs to be\ninstalled on a domain member, but\n\n1733\n01:33:07,330 --> 01:33:08,740\nnot a domain controller.\n\n1734\n01:33:08,740 --> 01:33:11,250\nFirst rule,\ncannot be on a domain controller.\n\n1735\n01:33:11,250 --> 01:33:13,360\nBut it does have to be on a domain member.\n\n1736\n01:33:13,360 --> 01:33:15,810\nAnd then what it's gonna do, is we're\ngonna go through the setup procedure, and\n\n1737\n01:33:15,810 --> 01:33:18,060\nI'll show you guys,\nit's a little bit slow, so\n\n1738\n01:33:18,060 --> 01:33:20,989\nhopefully it won't take too long for\nour demonstration purposes.\n\n1739\n01:33:21,990 --> 01:33:26,040\nBut what it'll do is it'll go out and\ndiscover all of your, whatever you choose,\n\n1740\n01:33:26,040 --> 01:33:27,210\nyou can limit if you want.\n\n1741\n01:33:27,210 --> 01:33:31,480\nBut your domain controllers,\nyour DNS servers, and your DHCP servers.\n\n1742\n01:33:31,480 --> 01:33:34,625\nAnd it'll install a little\nagent on each one of those.\n\n1743\n01:33:34,625 --> 01:33:38,745\nAnd then that agent is what's\ngonna report back to this console.\n\n1744\n01:33:38,745 --> 01:33:42,565\nIt's gonna allow me to\ncentrally manage them.\n\n1745\n01:33:42,565 --> 01:33:45,435\nSo if I got 15 DHCP servers across\nmy network, scattered around in\n\n1746\n01:33:45,435 --> 01:33:48,860\ndifferent offices or what have you,\nI can manage it from right here.\n\n1747\n01:33:48,860 --> 01:33:51,700\nI can create new reservations,\nI can create new scopes,\n\n1748\n01:33:51,700 --> 01:33:53,720\nI can modify existing scopes.\n\n1749\n01:33:53,720 --> 01:33:54,940\nSame thing with DNS.\n\n1750\n01:33:54,940 --> 01:33:58,750\nI can create new A records, or\nwhatever I need to do, make new zones.\n\n1751\n01:33:58,750 --> 01:34:00,200\nPlus it gives me an overview.\n\n1752\n01:34:00,200 --> 01:34:03,740\nNow, I can see what IP addresses I have,\nhow many are available,\n\n1753\n01:34:03,740 --> 01:34:05,910\nhow many aren't available or in use.\n\n1754\n01:34:05,910 --> 01:34:07,440\nWho's using them, things like that.\n\n1755\n01:34:07,440 --> 01:34:09,650\nLike, for example, here,\nwe keep a spreadsheet.\n\n1756\n01:34:10,680 --> 01:34:14,940\nAnd if anybody makes any changes, [COUGH]\nexcuse me, they're supposed to go and\n\n1757\n01:34:14,940 --> 01:34:15,910\nmodify that spreadsheet.\n\n1758\n01:34:15,910 --> 01:34:18,120\nHey, I made a new reservation, or\n\n1759\n01:34:18,120 --> 01:34:21,200\nI statically mapped this particular\nserver to this IP address.\n\n1760\n01:34:21,200 --> 01:34:25,220\nWell, somebody has to go put that in the\nspreadsheet so the rest of the admins know\n\n1761\n01:34:25,220 --> 01:34:28,489\nhey, that IP address is in use, and\nyou'd better not use it for anything else.\n\n1762\n01:34:29,530 --> 01:34:31,574\nAnd it gets updated every time,\nright Nate?\n\n1763\n01:34:31,574 --> 01:34:34,750\n>> [LAUGH] Yeah,\nyou know every time that I get in there,\n\n1764\n01:34:34,750 --> 01:34:39,090\nas long as I remember where that\nspreadsheet is located on the network.\n\n1765\n01:34:39,090 --> 01:34:41,475\n>> Or which copy of\nthe spreadsheet should I be using?\n\n1766\n01:34:41,475 --> 01:34:45,435\nCuz I know there's a couple copies\nof it now because [COUGH] somebody's\n\n1767\n01:34:45,435 --> 01:34:46,150\nduplicated it.\n\n1768\n01:34:46,150 --> 01:34:48,186\nAnd now it's like okay,\nwhich one is the current one.\n\n1769\n01:34:48,186 --> 01:34:49,572\nIt's not fun.\n\n1770\n01:34:49,572 --> 01:34:53,030\n>> [LAUGH]\n>> Which what IPAM is gonna do for me.\n\n1771\n01:34:53,030 --> 01:34:55,290\nIt's gonna be that spreadsheet.\n\n1772\n01:34:55,290 --> 01:34:57,240\nBut it's gonna go out and\ndiscover all the information.\n\n1773\n01:34:57,240 --> 01:34:59,800\nIt's gonna keep itself up to date.\n\n1774\n01:34:59,800 --> 01:35:01,160\nSo IPAM's a good thing.\n\n1775\n01:35:01,160 --> 01:35:03,560\nIt's new with Server 2012.\n\n1776\n01:35:03,560 --> 01:35:08,600\nAnd that's about it as far as what\nit is and what it's going to do.\n\n1777\n01:35:08,600 --> 01:35:12,620\nBut I said the main things we wanna know\nabout it is it does have to be on a domain\n\n1778\n01:35:12,620 --> 01:35:14,260\nmember but not a domain controller.\n\n1779\n01:35:15,420 --> 01:35:20,160\nYou can also have one\nIPAM console per domain.\n\n1780\n01:35:20,160 --> 01:35:22,020\nWell, let me rephrase that.\n\n1781\n01:35:22,020 --> 01:35:27,100\nYour DNS DHCP domain controllers can\nonly be managed by one IPAM console.\n\n1782\n01:35:27,100 --> 01:35:30,730\nSo, if we have different sites,\nlike we've got Gainesville and Pensacola.\n\n1783\n01:35:30,730 --> 01:35:34,810\nI could install IPAM here and\nmanage all of the DNS servers and\n\n1784\n01:35:34,810 --> 01:35:37,830\nDHCP servers across both locations.\n\n1785\n01:35:37,830 --> 01:35:41,740\nOr I could install IPAM here and\njust manage the ones at my location.\n\n1786\n01:35:41,740 --> 01:35:44,590\nSomebody in the other shop could\ninstall IPAM over there, and\n\n1787\n01:35:44,590 --> 01:35:50,570\nmanage their DNS servers and\ntheir DHCP servers and DNS servers.\n\n1788\n01:35:50,570 --> 01:35:54,365\nThey can only be managed by one\nconsole cuz it installs that agent and\n\n1789\n01:35:54,365 --> 01:35:57,970\nit has to report back to that console,\nso just keep that in mind.\n\n1790\n01:35:57,970 --> 01:36:02,255\nYou can either manage the entire\nenterprise from that one console or\n\n1791\n01:36:02,255 --> 01:36:03,606\nyou can divide it up so\n\n1792\n01:36:03,606 --> 01:36:07,966\nthat you know you might have an IPAM\nserver in each one of your physical\n\n1793\n01:36:07,966 --> 01:36:13,333\nlocations that just manages the service\nproviders in In that particular location.\n\n1794\n01:36:13,333 --> 01:36:16,131\n>> All right, well sweet, Michael.\n\n1795\n01:36:16,131 --> 01:36:20,370\nMy favorite thing is to\njump into things and\n\n1796\n01:36:20,370 --> 01:36:26,040\nconfigure it if it has\nconfiguring discuss it some more.\n\n1797\n01:36:26,040 --> 01:36:28,550\nSo you have a lab pulled up,\nis that correct?\n\n1798\n01:36:28,550 --> 01:36:30,620\n>> I do.\nI am actually using the tech-net\n\n1799\n01:36:30,620 --> 01:36:33,770\nvirtual labs, which I think we have talked\nabout a few times on some other episodes.\n\n1800\n01:36:33,770 --> 01:36:37,890\nA great place to go, I like setting\nup my own labs and things like that,\n\n1801\n01:36:37,890 --> 01:36:41,010\nbut sometimes maybe I don't want\nto setup that many servers or\n\n1802\n01:36:41,010 --> 01:36:44,100\nI want to do it right now and\nI don't have the time to set it up.\n\n1803\n01:36:44,100 --> 01:36:47,610\nSo you should really take a look\nat those Technet virtual labs and\n\n1804\n01:36:47,610 --> 01:36:48,990\nthey have got a few, especially for\n\n1805\n01:36:48,990 --> 01:36:53,930\nthe more advanced stuff that require\nseveral servers and things like that.\n\n1806\n01:36:53,930 --> 01:36:56,840\nHeck, go use their labs,\nthey've got step by step instructions,\n\n1807\n01:36:56,840 --> 01:36:58,330\nthe machines are already set up.\n\n1808\n01:36:58,330 --> 01:37:01,610\nIt's a really sweet interface\nwhich you'll see here in a minute.\n\n1809\n01:37:01,610 --> 01:37:04,440\nMuch like the interface in fact it's\nalmost the same interface that we give you\n\n1810\n01:37:04,440 --> 01:37:09,480\non our labs that are provided to you guys\nfree of charge with your subscription.\n\n1811\n01:37:09,480 --> 01:37:13,120\nSo, yeah take advantage of those but\nhere I need Three servers and\n\n1812\n01:37:13,120 --> 01:37:17,390\nin our sandbox for\nour labs that we have with IT PRO TV,\n\n1813\n01:37:17,390 --> 01:37:20,600\nI've got a domain controller,\none server, and two clients.\n\n1814\n01:37:20,600 --> 01:37:24,370\nSo I just opted to go over to TechNet for\nthis one.\n\n1815\n01:37:24,370 --> 01:37:25,830\n>> Nice.\n\n1816\n01:37:25,830 --> 01:37:27,085\n>> All right, well, let's do it.\n\n1817\n01:37:27,085 --> 01:37:27,845\nLet's take a peek.\n\n1818\n01:37:27,845 --> 01:37:28,965\nOh, Jason's way ahead of me.\n\n1819\n01:37:28,965 --> 01:37:30,395\nHe's already got it pulled up.\n\n1820\n01:37:30,395 --> 01:37:32,027\nAll right.\nSo, I'm going to have to follow their\n\n1821\n01:37:32,027 --> 01:37:34,205\ninstructions here a little bit,\nbecause I've got make sure.\n\n1822\n01:37:34,205 --> 01:37:37,615\nI don't know exactly what they've set\nup on these machines getting ready for\n\n1823\n01:37:37,615 --> 01:37:38,515\nthese labs.\n\n1824\n01:37:38,515 --> 01:37:41,080\nSo I've got a set of instructions\nhere that I just printed out.\n\n1825\n01:37:41,080 --> 01:37:43,330\nFrom Microsoft,\nwhich you guys can do as well.\n\n1826\n01:37:43,330 --> 01:37:47,130\nAnd we'll take a look at IPN,\nand we'll discuss it as we go.\n\n1827\n01:37:47,130 --> 01:37:52,336\nThe first thing they want me to do is\nto finalize the installation of DHCP.\n\n1828\n01:37:52,336 --> 01:37:56,650\nSo I'm going to launch server manager,\nand they have so\n\n1829\n01:37:56,650 --> 01:38:00,315\nmuch memory and resources there's\ntheir stuff snaps, it's really nice.\n\n1830\n01:38:00,315 --> 01:38:01,068\n>> [LAUGH]\n>> And\n\n1831\n01:38:01,068 --> 01:38:03,510\nI'm going to open up my DHCP console.\n\n1832\n01:38:06,645 --> 01:38:09,220\n>> And\nlet's see what they want me to do here.\n\n1833\n01:38:09,220 --> 01:38:12,938\nWe're going to go down\nto the IPv4 node and\n\n1834\n01:38:12,938 --> 01:38:16,460\nit looks like it's not turned on there.\n\n1835\n01:38:16,460 --> 01:38:17,830\nSo I'm going to delete it.\n\n1836\n01:38:19,290 --> 01:38:20,200\nJust the ten dot.\n\n1837\n01:38:22,390 --> 01:38:25,710\nRight click on that guy, and\nI am going to delete that.\n\n1838\n01:38:27,800 --> 01:38:28,410\nYes.\n\n1839\n01:38:30,960 --> 01:38:32,030\nAnd I believe that's it.\n\n1840\n01:38:32,030 --> 01:38:36,230\nAnd I'm going to close DHCP, so\nI'm left with no On good old DHCP here.\n\n1841\n01:38:36,230 --> 01:38:40,810\nNow we're going to get\ninto the actual IPAM part.\n\n1842\n01:38:40,810 --> 01:38:42,290\nSo I'm going to switch over to server one.\n\n1843\n01:38:42,290 --> 01:38:45,750\nRemember, you cannot install\nthis on a domain controller.\n\n1844\n01:38:45,750 --> 01:38:46,748\nSo I'm going to open up Server Manager.\n\n1845\n01:38:50,905 --> 01:38:53,468\nAnd you're going to let me know\nif I do anything wrong, right?\n\n1846\n01:38:53,468 --> 01:38:54,157\nAll right.\n\n1847\n01:38:54,157 --> 01:38:56,000\n>> [LAUGH]\n>> [LAUGH] And\n\n1848\n01:38:56,000 --> 01:39:01,150\nI am going to, go to add roles and\nfeatures and is a feature.\n\n1849\n01:39:01,150 --> 01:39:03,350\nRemember what I said in another episode,\n\n1850\n01:39:03,350 --> 01:39:07,070\nroles are providing\nservices to the network,\n\n1851\n01:39:07,070 --> 01:39:11,930\nfeatures add functionality to the server\nitself and that's what we're doing here.\n\n1852\n01:39:11,930 --> 01:39:14,880\nSo I'm going to do the whole next,\nnext, next.\n\n1853\n01:39:14,880 --> 01:39:19,632\nI'm going to skip the roles, and\nI'm going to go over to good old ipam, or\n\n1854\n01:39:19,632 --> 01:39:20,790\nto the features.\n\n1855\n01:39:20,790 --> 01:39:23,780\nAnd I'm going to check ip address\nmanagement, or ipam server.\n\n1856\n01:39:25,260 --> 01:39:27,980\nAnd then it's going to require dot net and\na couple of other things here.\n\n1857\n01:39:29,110 --> 01:39:35,580\nI'm going to go ahead and\nclick add features, then next and install.\n\n1858\n01:39:35,580 --> 01:39:38,160\nThat'll take about a minute or\nso to finish up.\n\n1859\n01:39:38,160 --> 01:39:41,200\nIt is installing .net 4 5.\n\n1860\n01:39:41,200 --> 01:39:44,290\nWe'll wait for that.\n\n1861\n01:39:44,290 --> 01:39:47,110\nWe'll get into our IPM console and\nstart setting it up.\n\n1862\n01:39:47,110 --> 01:39:49,970\nIt's a really cool console.\n\n1863\n01:39:49,970 --> 01:39:54,480\nLooking at it the other day and\nrunning through it and step by step.\n\n1864\n01:39:54,480 --> 01:39:56,890\n>> Right just clicks and.\n\n1865\n01:39:56,890 --> 01:40:01,340\n>> So Mike, so\nlet,me ask you this, so sales.\n\n1866\n01:40:01,340 --> 01:40:06,255\nSo before you had a console like\nthis to manage, all these servers,\n\n1867\n01:40:06,255 --> 01:40:09,470\nthroughout your whole organization.\n\n1868\n01:40:09,470 --> 01:40:13,210\nSo before this,\nwhat would you have to do to manage this?\n\n1869\n01:40:13,210 --> 01:40:16,026\nI mean could you just use tools?\n\n1870\n01:40:16,026 --> 01:40:17,010\n>> Yeah.\nAbsolutely.\n\n1871\n01:40:17,010 --> 01:40:17,880\nRight.\n>> Absolutely.\n\n1872\n01:40:17,880 --> 01:40:20,350\nYou know, you could remote into them.\n\n1873\n01:40:20,350 --> 01:40:25,150\nMost likely, I'd be using a custom console\nthat I had made and pointed to each one of\n\n1874\n01:40:25,150 --> 01:40:30,580\nmy DHCP servers, for example,\nand managed them all from there.\n\n1875\n01:40:30,580 --> 01:40:34,440\nIt's kind of replacing the need\nto do some of that maybe.\n\n1876\n01:40:36,150 --> 01:40:39,930\nIt gives me more control and\nit puts it all in one location.\n\n1877\n01:40:39,930 --> 01:40:43,120\nIt adds this IP address management part.\n\n1878\n01:40:43,120 --> 01:40:47,520\nWhereas with DHP and DNS shure we could\ngo to the individual machines and\n\n1879\n01:40:47,520 --> 01:40:48,030\nmanage them.\n\n1880\n01:40:48,030 --> 01:40:51,730\nWe could create our custom console,\nbut this adds the ability\n\n1881\n01:40:51,730 --> 01:40:55,030\nto monitor the IP address utilization,\nIP address blocks and range.\n\n1882\n01:40:55,030 --> 01:40:56,190\nAnd things like that as well.\n\n1883\n01:40:57,360 --> 01:40:59,940\nLooks like it finished up, so I'm going\nto go ahead and click 'close' on here,\n\n1884\n01:40:59,940 --> 01:41:04,210\nand then I'm going to turn around and\nopen up that new console that I have.\n\n1885\n01:41:04,210 --> 01:41:06,130\nI'm sorry,\nI'm not going to open up that console,\n\n1886\n01:41:06,130 --> 01:41:08,610\nbecause it should add it\nover here to server manager.\n\n1887\n01:41:08,610 --> 01:41:11,470\nThis is one where I don't\nget a separate console.\n\n1888\n01:41:11,470 --> 01:41:14,200\nIt's managed right here\nfrom server manager.\n\n1889\n01:41:14,200 --> 01:41:16,730\nSo I'm going to click on\nIPAM over there on the left.\n\n1890\n01:41:19,640 --> 01:41:22,010\nAnd you can see my step by step.\n\n1891\n01:41:22,010 --> 01:41:25,720\nSo I have six steps that I'm going to\ngo through to set up this IPAM console.\n\n1892\n01:41:25,720 --> 01:41:28,010\nThe first one is connected\nto the IPAM server.\n\n1893\n01:41:28,010 --> 01:41:29,820\nAnd they want you to click on that.\n\n1894\n01:41:29,820 --> 01:41:33,410\nI'll tell you that it's already selected.\n\n1895\n01:41:33,410 --> 01:41:35,275\nSo you can see the name of my server,\n\n1896\n01:41:35,275 --> 01:41:38,230\nserver1.contoso.com connected\nas contoso administrator.\n\n1897\n01:41:38,230 --> 01:41:42,390\nSo I'm going to jump down to step 2,\nprovision the IPAM server.\n\n1898\n01:41:44,800 --> 01:41:45,686\nGive a little focus there.\n\n1899\n01:41:45,686 --> 01:41:51,375\nThat's not going to work out too well.\n\n1900\n01:41:51,375 --> 01:41:56,420\n>> [LAUGH]\n>> Yeah, my resolution is a little too low\n\n1901\n01:41:56,420 --> 01:42:01,050\nand I cannot see the bottom\nof this dialogue box.\n\n1902\n01:42:01,050 --> 01:42:03,050\nLet's see if I cannot\nreduce its size either.\n\n1903\n01:42:03,050 --> 01:42:08,244\nThat is not going to work, so\nlet me close that real quick,\n\n1904\n01:42:08,244 --> 01:42:11,320\nand adjust some resolution here.\n\n1905\n01:42:11,320 --> 01:42:16,910\nAnd hopefully that won't\nmess too bad with my IVGA.\n\n1906\n01:42:16,910 --> 01:42:18,620\n>> Yeah, we should be good.\n\n1907\n01:42:23,044 --> 01:42:24,650\n>> Let's see if that helps.\n\n1908\n01:42:24,650 --> 01:42:26,230\nI can hide the taskbar as well.\n\n1909\n01:42:30,330 --> 01:42:31,960\nThat really annoys me to hide the taskbar,\n\n1910\n01:42:31,960 --> 01:42:34,220\nbut to give us a little more\nspace onscreen we'll go for it.\n\n1911\n01:42:34,220 --> 01:42:36,010\nAll right so we'll try that again.\n\n1912\n01:42:36,010 --> 01:42:42,395\nProvision the I pan server,\nand I still can I see it now?\n\n1913\n01:42:42,395 --> 01:42:45,510\n[LAUGH]\n>> I just barely see those buttons down\n\n1914\n01:42:45,510 --> 01:42:46,960\nthere at the bottom.\n\n1915\n01:42:46,960 --> 01:42:52,230\nAll right.\nSo we're going to click NEXT, and\n\n1916\n01:42:52,230 --> 01:42:54,710\nthen here I've got to choose how\nI'm going to go about provisioning.\n\n1917\n01:42:54,710 --> 01:42:58,930\nIn other words, how I'm going to go\nabout setting up the VNS servers and\n\n1918\n01:42:58,930 --> 01:43:01,530\nthe DHV servers to connect\nto this counsel, right?\n\n1919\n01:43:01,530 --> 01:43:03,390\nAnd I can do it manually or\n\n1920\n01:43:03,390 --> 01:43:08,360\nI can let this console create some\ngroup policy objects to do it for me.\n\n1921\n01:43:08,360 --> 01:43:11,260\nI don't know about you but I kind of\nlike letting the console do it for\n\n1922\n01:43:11,260 --> 01:43:12,710\nme rather than do it manually.\n\n1923\n01:43:12,710 --> 01:43:16,860\nThe key here is to know that once\nyou've chosen to do group policy,\n\n1924\n01:43:16,860 --> 01:43:19,580\nyou've got to stick with that method.\n\n1925\n01:43:19,580 --> 01:43:22,990\nIf you did manual and then you wanted\nto change over to group policy.\n\n1926\n01:43:22,990 --> 01:43:24,470\nIn fact, here let me go to previous.\n\n1927\n01:43:26,560 --> 01:43:28,230\nGo away task bar.\n\n1928\n01:43:28,230 --> 01:43:29,940\nI hate floating task bars.\n\n1929\n01:43:29,940 --> 01:43:39,575\nHere we can see that, so\nmanager's must be configured with access.\n\n1930\n01:43:39,575 --> 01:43:45,412\n[INAUDIBLE] You can configure these\nsettings manually on each server,\n\n1931\n01:43:45,412 --> 01:43:49,810\nor [INAUDIBLE] provisioned,\nmanage servers automatically as GPOs.\n\n1932\n01:43:49,810 --> 01:43:54,040\nIf you choose, it should say in here.\n\n1933\n01:43:54,040 --> 01:43:56,390\nYeah, it does say in here.\n\n1934\n01:43:56,390 --> 01:43:59,400\nThe managed server provisioning\nmethod cannot be changed after\n\n1935\n01:43:59,400 --> 01:44:00,630\ncompleting this wizard.\n\n1936\n01:44:00,630 --> 01:44:03,225\nSo that's just an important\nnote to pay attention to.\n\n1937\n01:44:03,225 --> 01:44:06,929\nWe're going to do group policy based, and\nwhen I do group policy based, I'm going to\n\n1938\n01:44:06,929 --> 01:44:10,235\nput a, we'll call it a prefix out in\nfront of the name of the group policies.\n\n1939\n01:44:10,235 --> 01:44:12,260\nAnd I'm just going to put IPAM.\n\n1940\n01:44:12,260 --> 01:44:13,613\nFor this one.\n\n1941\n01:44:13,613 --> 01:44:16,632\nAnd then we're gonna click Next.\n\n1942\n01:44:16,632 --> 01:44:22,070\nAnd then confirm my settings,\nand I like everything I see.\n\n1943\n01:44:22,070 --> 01:44:29,700\nThere's the group policies that it's gonna\ncreate, IPAM_DHCP, DNS, and DC_ MPS.\n\n1944\n01:44:29,700 --> 01:44:33,630\nI'm happy with everything\nI click apply [COUGH] and\n\n1945\n01:44:33,630 --> 01:44:36,726\nthen we wait for this wizard to finish.\n\n1946\n01:44:36,726 --> 01:44:39,396\n>> Nice.\n\n1947\n01:44:39,396 --> 01:44:44,523\nSo even with those, what we talked about\nearlier, with those RSAT tools you can\n\n1948\n01:44:44,523 --> 01:44:49,810\nstill browse, and connected to, you know,\nall the servers all over the place.\n\n1949\n01:44:49,810 --> 01:44:54,980\nSo then how would IPAM then\nplay into all of that.\n\n1950\n01:44:54,980 --> 01:44:59,560\nI mean could you like delegate it\nwhere someone could use IPAM rather\n\n1951\n01:44:59,560 --> 01:45:02,270\nthan all that other\n>> Yeah, you know, to me it's a little bit\n\n1952\n01:45:02,270 --> 01:45:06,520\neasier working with multiple servers in\nhere than it is through a custom console\n\n1953\n01:45:06,520 --> 01:45:08,720\nwith each server listed out,\ncuz you gotta expand that server.\n\n1954\n01:45:08,720 --> 01:45:11,320\nYou're really working with\neach individual server\n\n1955\n01:45:13,290 --> 01:45:15,390\nin that console when you do it that way.\n\n1956\n01:45:15,390 --> 01:45:20,210\nI don't know, it seems a little bit\neasier to work with through IPAM.\n\n1957\n01:45:20,210 --> 01:45:22,280\n>> Nice.\n>> But I like it.\n\n1958\n01:45:22,280 --> 01:45:23,674\nMaybe just cuz it's new and shiny.\n\n1959\n01:45:23,674 --> 01:45:25,920\n>> [LAUGH]\n>> [LAUGH] But I like using good old IPAM.\n\n1960\n01:45:26,960 --> 01:45:30,600\nAlright, so now we've provisioned that\nIPAM server, so it is all set up.\n\n1961\n01:45:30,600 --> 01:45:36,020\nThe next thing we are going to do is\nadd the domain admins group to a group\n\n1962\n01:45:36,020 --> 01:45:40,570\nthat should have been created for us, an\nactive directory called the IPAM admins.\n\n1963\n01:45:40,570 --> 01:45:45,480\nSo, I'm gonna open up Computer Management.\n\n1964\n01:45:45,480 --> 01:45:49,110\nActually, I think this is a local\ngroup that it created for us.\n\n1965\n01:45:49,110 --> 01:45:50,090\nLet's take a peek here.\n\n1966\n01:45:50,090 --> 01:45:53,670\nWe're gonna go down to Groups, and\n\n1967\n01:45:53,670 --> 01:45:57,230\nsee if I can find,\nthere is my IPAM administrators group.\n\n1968\n01:45:58,490 --> 01:46:00,720\nYou can see I've got\na couple of them here.\n\n1969\n01:46:01,880 --> 01:46:05,170\nI'm gonna add, so this is for\nthe address space management,\n\n1970\n01:46:05,170 --> 01:46:07,080\nI'm going to go ahead and\nadd the domain admins.\n\n1971\n01:46:13,600 --> 01:46:18,033\nAnd then I'm also going to add them to,\n\n1972\n01:46:18,033 --> 01:46:22,890\nsorry, trying to get this sorted\nback the way it was here.\n\n1973\n01:46:22,890 --> 01:46:25,610\nThe IPAM administrators,\nreally this is the only one I need.\n\n1974\n01:46:29,270 --> 01:46:32,062\nIs the IPAM administrators for\nthe domain admins, the other ones are for\n\n1975\n01:46:32,062 --> 01:46:33,600\ndelegating administrative control.\n\n1976\n01:46:33,600 --> 01:46:35,720\nI didn't need to add him to that one.\n\n1977\n01:46:35,720 --> 01:46:38,080\nThe IPAM administrators\nare gonna have full control.\n\n1978\n01:46:38,080 --> 01:46:40,800\nNow where'd they go?\n\n1979\n01:46:40,800 --> 01:46:46,860\nYou know, I sort it by name and\nsomehow IPAM shows up under, interesting.\n\n1980\n01:46:48,200 --> 01:46:50,115\nAnyway, Microsoft's never\nbeen good at sorting.\n\n1981\n01:46:50,115 --> 01:46:53,170\n>> [LAUGH]\n>> IPAM administrators gives them full\n\n1982\n01:46:53,170 --> 01:46:55,240\ncontrol over the entire console.\n\n1983\n01:46:55,240 --> 01:46:59,820\nThe IPM ASM is my Address Space Management\nand that would give them control over just\n\n1984\n01:46:59,820 --> 01:47:03,890\nthe address space portion and\nnot the others like DNS and DHCP.\n\n1985\n01:47:03,890 --> 01:47:10,830\nThere's also the IPAM auditors and the MSM\nis the multi server Management, which\n\n1986\n01:47:10,830 --> 01:47:15,510\nwill let them work with the actual servers\nunderneath that manage or monitor servers.\n\n1987\n01:47:15,510 --> 01:47:19,670\nSo, that's really for delegating\nadministrator control, but definitely\n\n1988\n01:47:19,670 --> 01:47:23,120\nimportant that you add the domain admins\nto the i pam administrators group.\n\n1989\n01:47:23,120 --> 01:47:28,250\nAnd these are local groups, notice I'm in\ncomputer management not active directory.\n\n1990\n01:47:28,250 --> 01:47:28,780\nAlright, so\n\n1991\n01:47:28,780 --> 01:47:33,490\nonce we got that done now it is off to\nconfigure our group policy objects.\n\n1992\n01:47:33,490 --> 01:47:35,530\nSo I am going to open up Powershell.\n\n1993\n01:47:37,300 --> 01:47:38,790\nAnd I almost did it on my host machine.\n\n1994\n01:47:38,790 --> 01:47:41,885\nI have hit my task bar, that is right.\n\n1995\n01:47:41,885 --> 01:47:46,071\nWe're going to launch Powershell and\nI am going to adjust that font so\n\n1996\n01:47:46,071 --> 01:47:49,190\nyou guys can see what\nthe heck I'm typing out here.\n\n1997\n01:47:55,940 --> 01:47:56,690\nLittle better?\n\n1998\n01:47:56,690 --> 01:47:59,388\n>> Mm-hm.\n>> Little bigger, little better.\n\n1999\n01:47:59,388 --> 01:48:00,700\n>> Yeah, that's good.\n\n2000\n01:48:00,700 --> 01:48:03,004\n>> Good enough?\nAll right so this is gonna be what,\n\n2001\n01:48:03,004 --> 01:48:07,222\ninvoke-ipamgpoprovisioning.\n\n2002\n01:48:07,222 --> 01:48:11,440\nInvoke-ipamgpoprivisioning?\n\n2003\n01:48:11,440 --> 01:48:13,630\n>> Yep.\nSpace- Domain.\n\n2004\n01:48:13,630 --> 01:48:14,980\n>> Domain.\n\n2005\n01:48:14,980 --> 01:48:19,820\n>> Space and then your devinecontosa.com.\n\n2006\n01:48:19,820 --> 01:48:26,530\nSpace dash GPO prefix name,\nput a dash, yep GPO prefix name.\n\n2007\n01:48:28,280 --> 01:48:30,100\nAll right and\nwhatever your prefix was, I think you-\n\n2008\n01:48:30,100 --> 01:48:31,720\n>> This is one we used in that wizard,\n\n2009\n01:48:31,720 --> 01:48:32,940\nit's got to be the same.\n\n2010\n01:48:32,940 --> 01:48:34,640\nAlright and so yeah IPAM.\n\n2011\n01:48:34,640 --> 01:48:39,391\nThen dash delegated GPO user,\n\n2012\n01:48:39,391 --> 01:48:43,600\nand put in administrator.\n\n2013\n01:48:46,090 --> 01:48:50,984\nThen space -IPAM server FQDN,\n\n2014\n01:48:50,984 --> 01:48:56,243\nand then server1.Contoso.com\n\n2015\n01:48:56,243 --> 01:49:01,690\n[CROSSTALK] all right, that's it.\n\n2016\n01:49:01,690 --> 01:49:04,798\n>> I'm gonna hit enter, and\nit's gonna ask me if I wanna go ahead and\n\n2017\n01:49:04,798 --> 01:49:05,880\ncreate those GPO's.\n\n2018\n01:49:05,880 --> 01:49:10,625\nIt creates and links them to my domain,\nwe'll say yes and hit Enter.\n\n2019\n01:49:10,625 --> 01:49:15,180\n[CROSSTALK] And\nwe have to wait for it to finish.\n\n2020\n01:49:15,180 --> 01:49:19,790\n>> So now this is creating those GPOs?\n\n2021\n01:49:19,790 --> 01:49:20,410\nWas that correct?\n\n2022\n01:49:20,410 --> 01:49:21,110\n>> Correct.\n\n2023\n01:49:21,110 --> 01:49:24,370\n>> Okay.\nNice.\n\n2024\n01:49:24,370 --> 01:49:26,530\n>> Looks like it's finished so\nI'm gonna exit out of there.\n\n2025\n01:49:27,660 --> 01:49:31,484\nAnd then let's take a peek\nin Group Policy Management\n\n2026\n01:49:35,434 --> 01:49:36,740\n>> Expand out my forest.\n\n2027\n01:49:36,740 --> 01:49:38,160\nExpand out domains.\n\n2028\n01:49:38,160 --> 01:49:40,633\nExpand out good old cantoso.com and\n\n2029\n01:49:40,633 --> 01:49:44,660\nthere I can see them linked\nright up to my domain.\n\n2030\n01:49:44,660 --> 01:49:47,370\nAnybody think, well wait,\nwon't that apply to all servers?\n\n2031\n01:49:47,370 --> 01:49:50,370\nWell they do some security\nfiltering on these guys.\n\n2032\n01:49:50,370 --> 01:49:53,130\nAnd if I look at this policy right now,\nright.\n\n2033\n01:49:53,130 --> 01:49:56,790\nYou guys have learned from our\nGroup Policy episodes, by default,\n\n2034\n01:49:56,790 --> 01:49:59,040\nauthenticated users is\nusually sitting right here.\n\n2035\n01:49:59,040 --> 01:50:02,860\nSo the group policies apply to everyone,\nall users, all computers.\n\n2036\n01:50:02,860 --> 01:50:04,100\nThey've removed that.\n\n2037\n01:50:04,100 --> 01:50:07,910\nAnd then what's gonna happen is\nthe IPAM console is gonna add back\n\n2038\n01:50:07,910 --> 01:50:11,415\njust the servers that\nit's supposed to manage.\n\n2039\n01:50:11,415 --> 01:50:14,920\n>> That's what we hope happens anyway\n[LAUGH] we've seen it a couple times where\n\n2040\n01:50:14,920 --> 01:50:19,890\nit doesn't do like it's supposed to do\nbut, we'll keep our fingers crossed here.\n\n2041\n01:50:19,890 --> 01:50:23,280\n>> So then of course right now\nsince there's nothing in there,\n\n2042\n01:50:23,280 --> 01:50:26,220\nthis GPO right now won't\nbe applied to anybody.\n\n2043\n01:50:26,220 --> 01:50:27,260\n>> Correct.\n>> It's kind of just sitting there.\n\n2044\n01:50:27,260 --> 01:50:30,160\n>> Even though it's linked to\nthe domain there's nobody supplying to.\n\n2045\n01:50:30,160 --> 01:50:30,660\n>> Nice.\n\n2046\n01:50:32,720 --> 01:50:33,650\n>> All right.\n\n2047\n01:50:33,650 --> 01:50:37,530\nNow the next they're going to have us\ndo just for this little lab environment\n\n2048\n01:50:37,530 --> 01:50:40,970\nis to change some of the polling\ninterval if I remember right.\n\n2049\n01:50:42,615 --> 01:50:45,300\nIPAM has a polling interval of how\noften it goes out and checks and\n\n2050\n01:50:45,300 --> 01:50:48,200\ndoes it's jobs on the different\nservers that it's managing.\n\n2051\n01:50:48,200 --> 01:50:51,140\nWe're gonna shorten that\nup a little bit just to\n\n2052\n01:50:51,140 --> 01:50:53,000\nmake the lab go a little bit faster.\n\n2053\n01:50:55,010 --> 01:50:57,170\nSo I'm gonna open up,\nwhat am I gonna do, Task Scheduler?\n\n2054\n01:50:57,170 --> 01:50:58,260\n>> Task Scheduler, yep.\n\n2055\n01:50:58,260 --> 01:51:02,740\nAnd drill down in there.\n\n2056\n01:51:02,740 --> 01:51:06,340\nThere's gonna be Microsoft, and\nthen Windows, and then IPAM.\n\n2057\n01:51:06,340 --> 01:51:11,510\nWe look for address management.\n\n2058\n01:51:15,280 --> 01:51:18,520\nTheir address utilization's there\n>> Address utilization, all right, got it.\n\n2059\n01:51:18,520 --> 01:51:20,920\n>> And then properties, triggers.\n\n2060\n01:51:22,830 --> 01:51:26,660\nYep, and then we will change\nthis to every five minutes.\n\n2061\n01:51:26,660 --> 01:51:32,710\n>> I'm going to\n\n2062\n01:51:32,710 --> 01:51:37,894\nedit that guy, and where it says\nto repeat task every two hours.\n\n2063\n01:51:39,085 --> 01:51:40,135\n>> Let's make it five minutes.\n\n2064\n01:51:40,135 --> 01:51:43,315\n>> Five minutes.\n\n2065\n01:51:44,485 --> 01:51:45,005\nOkay.\n\n2066\n01:51:45,005 --> 01:51:47,385\n>> All right so\nupdate that pooling interval.\n\n2067\n01:51:47,385 --> 01:51:48,165\n>> All right.\n\n2068\n01:51:48,165 --> 01:51:48,665\n>> All right.\n\n2069\n01:51:51,100 --> 01:51:52,800\nNow I believe we are done here.\n\n2070\n01:51:52,800 --> 01:51:54,190\n>> I'm going to minimize.\n\n2071\n01:51:54,190 --> 01:51:55,810\nI think we might come\nback to that in a minute.\n\n2072\n01:51:55,810 --> 01:51:56,600\nWe'll see.\n\n2073\n01:51:56,600 --> 01:51:58,280\nAll right, what's next?\n\n2074\n01:51:58,280 --> 01:52:02,653\n>> All right so then now let's go ahead\nand configure our server, discovery and\n\n2075\n01:52:02,653 --> 01:52:03,399\nstep three.\n\n2076\n01:52:03,399 --> 01:52:06,870\n>> Yeah, you can see how it's\nfilled in information as we go.\n\n2077\n01:52:06,870 --> 01:52:07,590\nCompleted.\n\n2078\n01:52:07,590 --> 01:52:11,355\nNow I've gotta go find all of my\ndomain controllers, DNS servers, and\n\n2079\n01:52:11,355 --> 01:52:12,877\nDHCP servers on my network.\n\n2080\n01:52:12,877 --> 01:52:17,875\nSo if I, depending on what domain I was\ngonna manage with this particular IPM\n\n2081\n01:52:17,875 --> 01:52:20,400\nconsole, I have one to pick from.\n\n2082\n01:52:20,400 --> 01:52:24,950\nSo I'll add good old Coursera.com, and\nthen I don't have to manage all of these,\n\n2083\n01:52:24,950 --> 01:52:27,031\nthey want me to manage them all, yep.\n\n2084\n01:52:27,031 --> 01:52:29,316\n>> Mm-hm\n>> All right, so we'll go ahead and\n\n2085\n01:52:29,316 --> 01:52:33,621\nclick Okay, and manage all three\ndomain controllers, DNS servers, and\n\n2086\n01:52:33,621 --> 01:52:35,228\nDHCP servers, all right?\n\n2087\n01:52:35,228 --> 01:52:39,666\nSo now it says one domain selected, and\nthis is where, when I first started\n\n2088\n01:52:39,666 --> 01:52:44,470\nplaying with IPM, I would stop right\nhere and go wow, it's taking forever.\n\n2089\n01:52:44,470 --> 01:52:45,475\nWhat's it supposed to do?\n\n2090\n01:52:45,475 --> 01:52:47,310\n>> [LAUGH]\n>> Why isn't it doing anything?\n\n2091\n01:52:47,310 --> 01:52:50,240\nThe next step is to actually start\nthe discovery, you gotta click that one,\n\n2092\n01:52:50,240 --> 01:52:51,765\nor you're gonna be waiting for\nquite awhile.\n\n2093\n01:52:51,765 --> 01:52:52,950\n>> [LAUGH] Mm-hm.\n\n2094\n01:52:52,950 --> 01:52:53,510\n>> Right?\nSo\n\n2095\n01:52:53,510 --> 01:52:55,622\nassuming they're doing\nit the way I'm doing it.\n\n2096\n01:52:55,622 --> 01:52:56,970\n>> Yeah.\n>> Yep, so let's go ahead and\n\n2097\n01:52:56,970 --> 01:52:59,620\nclick on that, start server discovery.\n\n2098\n01:52:59,620 --> 01:53:04,485\nAnd then yeah, so this process, it can\ntake a little bit, it can go really fast.\n\n2099\n01:53:04,485 --> 01:53:05,410\n>> Mm-hm.\n\n2100\n01:53:05,410 --> 01:53:07,400\n>> And so it looks like you're.\n\n2101\n01:53:07,400 --> 01:53:09,092\nOh yeah, that's right,\nscroll bar over there.\n\n2102\n01:53:09,092 --> 01:53:10,490\n>> Yeah.\n>> Scroll down a little bit.\n\n2103\n01:53:10,490 --> 01:53:12,820\n>> Yeah, so it's telling me there's one or\n\n2104\n01:53:12,820 --> 01:53:17,890\nmore IPM tasks running in the task\nscheduler, please wait for completion.\n\n2105\n01:53:17,890 --> 01:53:20,372\nI could flip back over to task scheduler.\n\n2106\n01:53:22,856 --> 01:53:25,712\nAnd I should see that task running.\n\n2107\n01:53:30,402 --> 01:53:34,605\nGosh, my mouse is just not wanting\nto play along very well here.\n\n2108\n01:53:34,605 --> 01:53:41,501\nLet's see if it shows history, and maybe\nthis, this takes a minute to fill out.\n\n2109\n01:53:44,148 --> 01:53:48,918\n>> Mm, or\nit is listing some stuff in there.\n\n2110\n01:53:48,918 --> 01:53:55,435\n>> Yeah, let's see ServerDiscovery,\nthere we go, take a look at that one.\n\n2111\n01:53:55,435 --> 01:53:58,203\nAnd here I can see action started.\n\n2112\n01:53:58,203 --> 01:54:00,910\n[LAUGH] So\nwe just have to wait until it finishes.\n\n2113\n01:54:03,020 --> 01:54:04,490\n>> All right.\n>> But, it doesn't show me\n\n2114\n01:54:04,490 --> 01:54:05,650\nlike a progress bar in here.\n\n2115\n01:54:05,650 --> 01:54:08,730\nSo you can come in and\nverify that it's finished.\n\n2116\n01:54:08,730 --> 01:54:12,010\nIf you had closed this little box here, or\n\n2117\n01:54:12,010 --> 01:54:15,700\nsomething like that, if you want to go\nthere and check on the status of that job.\n\n2118\n01:54:15,700 --> 01:54:18,500\nIts got this little progress\nbar running across the top and\n\n2119\n01:54:18,500 --> 01:54:22,730\neventually its gonna change the message\nthat appears here in this little bar,\n\n2120\n01:54:22,730 --> 01:54:24,674\nletting me know that it has finished.\n\n2121\n01:54:24,674 --> 01:54:28,388\nAnd it can take a few minutes,\nthey say five, ten minutes.\n\n2122\n01:54:28,388 --> 01:54:29,730\nI've seen it take quite a while,\n\n2123\n01:54:30,730 --> 01:54:33,680\nespecially it depends on\nyour infrastructure, right?\n\n2124\n01:54:33,680 --> 01:54:36,550\nIf you're talking about going\nacross the WAN to other sites, and\n\n2125\n01:54:36,550 --> 01:54:40,374\nthings like that, and\nit's gonna reach out, and find those guys.\n\n2126\n01:54:40,374 --> 01:54:41,853\n>> Mm, yeah so,\n\n2127\n01:54:41,853 --> 01:54:46,533\nall right, right now we're kinda broke\ndown as far as progression of this.\n\n2128\n01:54:46,533 --> 01:54:48,140\n>> Mm-hm\n>> Once that guy finishes up,\n\n2129\n01:54:48,140 --> 01:54:51,482\nthen once it does finish then we\nshould be able to refresh our console.\n\n2130\n01:54:51,482 --> 01:54:53,300\n>> Right.\n>> We'll be able to jump in there and\n\n2131\n01:54:53,300 --> 01:54:55,285\nstart taking a peak at\nsome of those servers\n\n2132\n01:54:55,285 --> 01:54:57,900\n>> Mm-hm, should, should.\n\n2133\n01:54:57,900 --> 01:55:01,320\nSo, what you thinking?\n\n2134\n01:55:01,320 --> 01:55:02,370\nTake a break, watch?\n\n2135\n01:55:03,370 --> 01:55:06,720\n>> Yeah, let's take a quick, little break.\n\n2136\n01:55:06,720 --> 01:55:08,078\n>> Okay.\n>> We'll let this guy run and\n\n2137\n01:55:08,078 --> 01:55:10,590\nwhen we get back,\nwe'll continue on with this guy,\n\n2138\n01:55:10,590 --> 01:55:13,020\nand take a look at all this\nfun stuff in the console.\n\n2139\n01:55:13,020 --> 01:55:13,760\n>> Sounds like a plan.\n\n2140\n01:55:13,760 --> 01:55:16,644\n>> Sweet, all right, so we'll see\nyou guys back here in just a minute.\n\n2141\n01:55:16,644 --> 01:55:23,657\n[MUSIC]\n\n2142\n01:55:23,657 --> 01:55:26,135\nAll right, welcome back.\n\n2143\n01:55:26,135 --> 01:55:29,472\nAll right, so\nthat console has finished running, and so\n\n2144\n01:55:29,472 --> 01:55:34,295\nnow we are ready to proceed on to getting\nour servers managed with good old IPAM.\n\n2145\n01:55:34,295 --> 01:55:38,460\n>> Exactly, yeah, so we'll see up\nhere at the top that it has finished.\n\n2146\n01:55:38,460 --> 01:55:40,500\nIt says,\ndiscovered servers based on 6:12 at 11:45,\n\n2147\n01:55:40,500 --> 01:55:45,590\nand it tells me when my\nnext data collection is.\n\n2148\n01:55:45,590 --> 01:55:48,405\nSo our next step then will be step five,\nwe just finished step four.\n\n2149\n01:55:48,405 --> 01:55:53,712\nWe'll move on to step 5, Select or add\nservers to manage and verify IPM access.\n\n2150\n01:55:53,712 --> 01:56:00,470\n>> [LAUGH]\n>> I love these small little screens.\n\n2151\n01:56:00,470 --> 01:56:04,147\n[COUGH] And really what we're looking\nat here is I can see this exclamation\n\n2152\n01:56:04,147 --> 01:56:05,360\npoint I have over here.\n\n2153\n01:56:06,520 --> 01:56:10,310\nOh, let's check, one thing we didn't\ncheck is the group policy object.\n\n2154\n01:56:10,310 --> 01:56:11,212\nMight wanna wait to do that.\n\n2155\n01:56:11,212 --> 01:56:13,690\nYeah, we'll go ahead and wait to do that.\n\n2156\n01:56:13,690 --> 01:56:17,273\nAll right, so I can see that IPM\nstatus is currently blocked and\n\n2157\n01:56:17,273 --> 01:56:20,196\nthat manageability status\nis set to unspecified.\n\n2158\n01:56:20,196 --> 01:56:20,727\n>> Mm-hm.\n\n2159\n01:56:20,727 --> 01:56:25,949\n>> And that's because those group policies\nhave not been configured yet, right?\n\n2160\n01:56:25,949 --> 01:56:29,440\nThey were linked to the domain,\nbut it hasn't added and\n\n2161\n01:56:29,440 --> 01:56:34,860\nsay, in this case, DC to that filter list,\nthe security filter on the GPO.\n\n2162\n01:56:34,860 --> 01:56:38,745\nSo the policy isn't\nbeing applied to him yet\n\n2163\n01:56:38,745 --> 01:56:43,270\nwhich is why he is still being blocked,\nall right?\n\n2164\n01:56:43,270 --> 01:56:47,547\n>> So, let's go ahead and\nif we can right-click on that guy, and\n\n2165\n01:56:47,547 --> 01:56:49,580\nwe can choose to edit server.\n\n2166\n01:56:51,690 --> 01:56:57,310\nAnd in here, we've got those options\nthere that are checked, right on.\n\n2167\n01:56:57,310 --> 01:57:03,360\nSo, we can manage those items, and then\nunder unspecified, we can drop that down.\n\n2168\n01:57:03,360 --> 01:57:07,232\n>> We'll change that\nmanageability status to managed.\n\n2169\n01:57:07,232 --> 01:57:08,020\n>> Mm-hm.\n\n2170\n01:57:08,020 --> 01:57:09,394\n>> Alright.\n\n2171\n01:57:09,394 --> 01:57:13,126\n>> Alright, and click okay.\n\n2172\n01:57:13,126 --> 01:57:14,504\n>> Alright.\n\n2173\n01:57:14,504 --> 01:57:17,890\n>> Alright, so\nnow I've got this part done.\n\n2174\n01:57:17,890 --> 01:57:22,028\nSo let's now then jump over\non to our domain controller.\n\n2175\n01:57:27,671 --> 01:57:31,071\nAnd good old group policy management.\n\n2176\n01:57:31,071 --> 01:57:32,084\n>> Mm-hm.\n\n2177\n01:57:32,084 --> 01:57:37,319\n>> All right, and at this point let's\ndrill down and take a look at those.\n\n2178\n01:57:39,110 --> 01:57:43,770\n>> You know DHCP was not checked on that,\nwas it?\n\n2179\n01:57:43,770 --> 01:57:48,580\nSo they're on DNS, I can see that the\ncomputer account for DC has been added.\n\n2180\n01:57:48,580 --> 01:57:56,178\nOn DHCP, it has not been added,\nbecause if I go back for one second.\n\n2181\n01:57:59,614 --> 01:58:01,630\n>> And edit server, or DHCP?\n\n2182\n01:58:01,630 --> 01:58:05,480\n>> We need to make sure\nthat DHCP is checked there.\n\n2183\n01:58:05,480 --> 01:58:06,630\n>> All right, let's check it.\n\n2184\n01:58:06,630 --> 01:58:10,343\n>> I'll just click OK, and\nhopefully he will add that,\n\n2185\n01:58:10,343 --> 01:58:12,578\nif not I might have to manually.\n\n2186\n01:58:17,501 --> 01:58:19,550\n>> Let's give it a little refresh there.\n\n2187\n01:58:19,550 --> 01:58:20,810\nAll right, so sure enough.\n\n2188\n01:58:20,810 --> 01:58:23,035\n>> Yep.\n>> So it added it on there.\n\n2189\n01:58:23,035 --> 01:58:24,220\n>> Mm-hm.\n>> All right,\n\n2190\n01:58:24,220 --> 01:58:27,830\nat this point we can just go ahead and\nreboot this guy.\n\n2191\n01:58:27,830 --> 01:58:31,720\n>> Alright, and we're gonna reboot this\nguy, do we want to do a GP update?\n\n2192\n01:58:31,720 --> 01:58:37,060\n>> A restart would do that too,\nwouldn't it?\n\n2193\n01:58:37,060 --> 01:58:38,714\n>> Mm-hm, yeah, yeah, either or.\n\n2194\n01:58:38,714 --> 01:58:39,398\n>> Right.\n>> Mm-hm.\n\n2195\n01:58:39,398 --> 01:58:41,510\n>> All right, let's just restart him here.\n\n2196\n01:58:41,510 --> 01:58:44,278\nWhat am I running?\n\n2197\n01:58:44,278 --> 01:58:48,455\nLet's do a shut down-RT0.\n\n2198\n01:58:48,455 --> 01:58:53,160\n>> Right, and\nthen once this guy is completely back up,\n\n2199\n01:58:53,160 --> 01:58:57,490\nthen we will wait, and\nthen we will move on to our next step,\n\n2200\n01:58:57,490 --> 01:59:02,160\nwhich is rebooting good old server\none that we've been working with.\n\n2201\n01:59:02,160 --> 01:59:05,867\n>> All right.\n>> Put in that IPAM console.\n\n2202\n01:59:05,867 --> 01:59:06,690\n>> Mm-hm.\n\n2203\n01:59:06,690 --> 01:59:11,670\n>> And once these guys are back up,\nwe can proceed forward.\n\n2204\n01:59:13,230 --> 01:59:14,680\n>> And they don't take too long to reboot.\n\n2205\n01:59:14,680 --> 01:59:16,640\n>> So what do you think, Mike?\n\n2206\n01:59:16,640 --> 01:59:21,940\nShould we roll this out here in our\nlittle studio and manage our IPAM?\n\n2207\n01:59:21,940 --> 01:59:24,480\n>> With our one DNS server and\nDHCP server?\n\n2208\n01:59:24,480 --> 01:59:26,605\nIt might be a little overkill,\nI don't know.\n\n2209\n01:59:26,605 --> 01:59:30,597\n>> [LAUGH]\n>> [LAUGH] Although, fun to play with,\n\n2210\n01:59:30,597 --> 01:59:32,305\nfun to play with.\n\n2211\n01:59:34,139 --> 01:59:36,682\nAll right, so he's almost done\nrebooting and then once he does,\n\n2212\n01:59:36,682 --> 01:59:39,890\nI don't wannt to reboot serve\none until DC's up and running.\n\n2213\n01:59:39,890 --> 01:59:41,200\nCuz he is my domain controller so\n\n2214\n01:59:41,200 --> 01:59:43,410\nI want to make sure he's there\nwhen server one tries to reboot.\n\n2215\n01:59:44,560 --> 01:59:48,393\nSo we'll let it finish\nsupplying those policies.\n\n2216\n01:59:48,393 --> 01:59:50,929\nPlease wait, I think we talked\nabout that in our other episode.\n\n2217\n01:59:50,929 --> 01:59:55,379\nRight now it's doing the whole retrieving\nan ordered list of group policies that\n\n2218\n01:59:55,379 --> 01:59:59,175\nare supposed to apply, and\nit's applying the computer half of those\n\n2219\n01:59:59,175 --> 02:00:02,103\npolicies\n>> And then we'll get our log on screen\n\n2220\n02:00:02,103 --> 02:00:07,362\nand we should be able to log on and it'll\napply the user half of those policies.\n\n2221\n02:00:07,362 --> 02:00:11,310\n[LAUGH] he's taking his sweet time.\n\n2222\n02:00:11,310 --> 02:00:12,900\n>> Yeah.\nHe sure is.\n\n2223\n02:00:12,900 --> 02:00:15,040\n>> Lots of policies to apply.\n\n2224\n02:00:15,040 --> 02:00:19,805\n>> I'll tell you what, was it you and\nDon, you guys talking about how.\n\n2225\n02:00:19,805 --> 02:00:22,230\n>> Impatient you guys have become.\n\n2226\n02:00:22,230 --> 02:00:26,360\n>> waiting for this stuff to go and\nfinally just granted out.\n\n2227\n02:00:26,360 --> 02:00:29,400\nSo as I start talking about it,\nhey, maybe it heard me.\n\n2228\n02:00:29,400 --> 02:00:30,470\n>> Yup, it heard you.\n\n2229\n02:00:30,470 --> 02:00:31,339\n>> Went ahead and finished.\n\n2230\n02:00:32,920 --> 02:00:34,440\nSo I'll log into that guy,\n\n2231\n02:00:34,440 --> 02:00:38,580\nand of course then next we'll\nthen reboot good old server one.\n\n2232\n02:00:38,580 --> 02:00:39,580\n>> Server one, all right.\n\n2233\n02:00:39,580 --> 02:00:45,180\n>> I have PowerShell?\n\n2234\n02:00:45,180 --> 02:00:45,740\n>> What's that?\n\n2235\n02:00:45,740 --> 02:00:46,680\n>> Oops, I misspelled it.\n\n2236\n02:00:46,680 --> 02:00:49,120\n>> Yeah, usually it's faster\nif I can actually type.\n\n2237\n02:00:49,120 --> 02:00:55,150\nI do like that update where\nthey've added that power button,\n\n2238\n02:00:55,150 --> 02:00:59,610\nor if you're running my taskbar\nnot being there and everything,\n\n2239\n02:00:59,610 --> 02:01:02,280\nwhen you have got that button\ndown on the bottom left,\n\n2240\n02:01:02,280 --> 02:01:04,290\nyou can right click on that and\nchoose restart now.\n\n2241\n02:01:04,290 --> 02:01:08,880\nWhich is a very nice option, but\nyeah Powershell's right there too.\n\n2242\n02:01:08,880 --> 02:01:15,220\nSo, trying to be fancy or something.\n\n2243\n02:01:15,220 --> 02:01:17,810\nSo we will get this guy restarted and\nlog back in.\n\n2244\n02:01:20,380 --> 02:01:22,262\nAlright, that was a bit faster.\n\n2245\n02:01:22,262 --> 02:01:23,018\n>> Huh.\n\n2246\n02:01:23,018 --> 02:01:29,580\n>> Whoops, misclick,\nlet me try that one more time.\n\n2247\n02:01:29,580 --> 02:01:30,080\nAlright.\n\n2248\n02:01:34,970 --> 02:01:36,410\n>> That's funny.\n\n2249\n02:01:36,410 --> 02:01:38,760\n>> And once this guy boots up.\n\n2250\n02:01:38,760 --> 02:01:41,920\nNow, let's jump back\ninto that IPAM console.\n\n2251\n02:01:41,920 --> 02:01:45,180\n>> All right.\n>> And then from there we'll need to\n\n2252\n02:01:45,180 --> 02:01:49,910\ndo yet another little waiting task\ncuz now we have to refresh or wait,\n\n2253\n02:01:49,910 --> 02:01:54,580\nretrieve, refresh, that one in there\nonce we finally get it fired up.\n\n2254\n02:01:55,880 --> 02:01:56,930\nAlright.\nSounds like a plan.\n\n2255\n02:01:59,230 --> 02:02:00,760\nAs things populate.\n\n2256\n02:02:00,760 --> 02:02:01,970\nThere we go.\n\n2257\n02:02:01,970 --> 02:02:05,580\nAs I said in a few different episodes I\nlike to wait until that bar's done moving\n\n2258\n02:02:05,580 --> 02:02:08,410\nacross the top and I wait until this\nlist completely populates otherwise\n\n2259\n02:02:08,410 --> 02:02:10,010\nServer Manager just gets irritated.\n\n2260\n02:02:11,530 --> 02:02:12,500\nMakes it take even longer.\n\n2261\n02:02:14,770 --> 02:02:15,450\nAlright.\n\n2262\n02:02:17,760 --> 02:02:22,350\nNow once this guy populates we'll\ngo back into our server inventory.\n\n2263\n02:02:22,350 --> 02:02:29,510\nAnd then let's right click on that guy and\nthen let's choose refresh.\n\n2264\n02:02:29,510 --> 02:02:31,240\nServer access status.\n\n2265\n02:02:31,240 --> 02:02:34,440\n>> Yeah, because certainly he's\nstill showing as a red X here and\n\n2266\n02:02:34,440 --> 02:02:35,065\nblocked, right?\n\n2267\n02:02:35,065 --> 02:02:36,309\n>> Mm-hm.\n>> We're going to\n\n2268\n02:02:36,309 --> 02:02:37,750\nsee if we can update that.\n\n2269\n02:02:38,870 --> 02:02:41,740\n>> All right.\nSo now, those policies,\n\n2270\n02:02:41,740 --> 02:02:43,990\nsince we've rebooted that guy and\n\n2271\n02:02:43,990 --> 02:02:50,550\nwe added in the security filterings that\nwill apply to our demand controller.\n\n2272\n02:02:50,550 --> 02:02:51,350\nAnd, yeah.\n\n2273\n02:02:51,350 --> 02:02:52,010\nSo, let's see.\n\n2274\n02:02:52,010 --> 02:02:54,370\nAll right.\nOh, that was pretty fast.\n\n2275\n02:02:54,370 --> 02:02:54,890\nNice.\n\n2276\n02:02:54,890 --> 02:02:58,980\nA lot faster than those\nother versions wasn't it?\n\n2277\n02:02:58,980 --> 02:03:00,540\n>> Exactly.\nAs Nate was saying it's\n\n2278\n02:03:00,540 --> 02:03:04,880\njust gonna add the I PAN to administrators\ngroup, give them the ability.\n\n2279\n02:03:04,880 --> 02:03:09,580\nIt's gonna open up some firewall holes to\nallow this remote management going on and\n\n2280\n02:03:09,580 --> 02:03:11,890\ngive the I Pan address gives\nus access to this information.\n\n2281\n02:03:13,000 --> 02:03:14,570\nSo now we've got our servers found.\n\n2282\n02:03:14,570 --> 02:03:15,250\nAre we good to go?\n\n2283\n02:03:15,250 --> 02:03:16,980\nWhat do we do next?\n\n2284\n02:03:16,980 --> 02:03:18,660\n>> Well so now at this point,\n\n2285\n02:03:18,660 --> 02:03:23,931\nwe've got good old green check mark\nmanaged and it is unblocked so\n\n2286\n02:03:23,931 --> 02:03:28,300\nnow we can do our managing or whatever\nkind of administrative stuff that we want.\n\n2287\n02:03:28,300 --> 02:03:30,280\n>> Beautiful.\n>> We can create some scopes,\n\n2288\n02:03:30,280 --> 02:03:34,110\nwe could click on things and\nwhat not and take a look.\n\n2289\n02:03:34,110 --> 02:03:37,100\n>> But, you know what,\nwhile, while we're here,\n\n2290\n02:03:37,100 --> 02:03:40,470\nlet's just start down there and,\nlet's just kind of go through and\n\n2291\n02:03:40,470 --> 02:03:43,805\nclick on each one and take a look\nat the things that, it shows us.\n\n2292\n02:03:43,805 --> 02:03:46,639\n>> Alright so we've got our address\nspace is divided up into blocks.\n\n2293\n02:03:47,770 --> 02:03:50,930\nAnd then ranges and then addresses.\n\n2294\n02:03:50,930 --> 02:03:55,270\nAnd the block is really the overlying,\nthis is typically,\n\n2295\n02:03:55,270 --> 02:03:58,180\nlike, if you think about\nwhat your ISP is giving you.\n\n2296\n02:03:58,180 --> 02:04:03,630\nLike they said, all right, if you've got\nfrom your ISP a particular class B block,\n\n2297\n02:04:03,630 --> 02:04:08,970\nyou know, or something like that, you are\ngonna be 173 something something something\n\n2298\n02:04:08,970 --> 02:04:13,430\nslash 16 or in house we might\nbe using a private class.\n\n2299\n02:04:13,430 --> 02:04:16,980\nWe might be doing a class B as well or\na class C.\n\n2300\n02:04:16,980 --> 02:04:22,940\nSo I might add to this 1921681.0-24\nas my entire block of addresses and\n\n2301\n02:04:22,940 --> 02:04:25,298\nthen we've got our\ninventory down below there.\n\n2302\n02:04:25,298 --> 02:04:27,380\nWhere we would see the IPV for\n\n2303\n02:04:27,380 --> 02:04:32,550\naddresses, and range groups would\ndivide that up even further.\n\n2304\n02:04:32,550 --> 02:04:36,420\nInventory, you kind of\nlook at inventory as a,\n\n2305\n02:04:36,420 --> 02:04:38,270\nwell these are addresses that are in use.\n\n2306\n02:04:38,270 --> 02:04:39,150\nRight.\n\n2307\n02:04:39,150 --> 02:04:43,520\nSo once it's in, I don't know if DCs\nactually, I know he's running DHCP.\n\n2308\n02:04:43,520 --> 02:04:47,050\nI don't know if we've got any\nThis guys says, DHP client.\n\n2309\n02:04:47,050 --> 02:04:49,290\nWe'll check on it here in just a second.\n\n2310\n02:04:49,290 --> 02:04:54,090\nAnd then under that, you've got monitor\nand manage, and I can see my DNS and\n\n2311\n02:04:54,090 --> 02:04:56,020\nDHCP servers listed here.\n\n2312\n02:04:56,020 --> 02:04:57,280\nWe've got one.\n\n2313\n02:04:57,280 --> 02:05:01,230\nSee, it still doesn't see him as\na DHCP server, which is interesting.\n\n2314\n02:05:01,230 --> 02:05:02,090\n>> Right.\n\n2315\n02:05:02,090 --> 02:05:04,608\n>> Which is why our DHCP\ninfo is not popping up.\n\n2316\n02:05:04,608 --> 02:05:09,790\n[COUGH] We'll have to see, because they're\ngoing to want us to create a scope.\n\n2317\n02:05:09,790 --> 02:05:12,420\nAnd we don't have any\nDNS servers to manage.\n\n2318\n02:05:12,420 --> 02:05:14,238\nI mean DHCP servers to\nmanage at this point.\n\n2319\n02:05:14,238 --> 02:05:21,990\nPush that again.\n\n2320\n02:05:21,990 --> 02:05:25,015\nI don't know why he's\nnot showing up properly.\n\n2321\n02:05:25,015 --> 02:05:32,250\nI'm gonna go ahead and try to re.\n\n2322\n02:05:32,250 --> 02:05:33,480\nI don't know if you saw what I clicked.\n\n2323\n02:05:33,480 --> 02:05:34,540\nClick dot.\nI'll show you guys that.\n\n2324\n02:05:34,540 --> 02:05:37,260\nThe first one we did was\nrefresh server status.\n\n2325\n02:05:37,260 --> 02:05:41,060\nAccess status, and that's what made\nsure that the GPO is in play and\n\n2326\n02:05:41,060 --> 02:05:43,530\nthat we did have the proper\naccess to manage it.\n\n2327\n02:05:43,530 --> 02:05:47,540\nAnd then retrieve all server data should\ngo out and then pull back from those\n\n2328\n02:05:47,540 --> 02:05:51,180\nagents that it installed information\nabout scopes that exist.\n\n2329\n02:05:51,180 --> 02:05:54,010\nZones that exist within DNS,\nand things like that.\n\n2330\n02:05:54,010 --> 02:05:56,710\nSo let's see if that\nchanged anything here.\n\n2331\n02:05:56,710 --> 02:06:03,940\nWe'll go down to DHCP and DNS servers,\nand I'm still only showing a DNS roll.\n\n2332\n02:06:03,940 --> 02:06:07,670\nSo for some reason he's not seeing\nthe fact that it's running DHCP,\n\n2333\n02:06:09,050 --> 02:06:10,810\nwhich is gonna prove interesting.\n\n2334\n02:06:13,470 --> 02:06:18,520\nTell you what, we'll do some\nDNS Not sure why their particular\n\n2335\n02:06:18,520 --> 02:06:21,680\nlab machines are not functioning properly,\nas far that goes it should.\n\n2336\n02:06:21,680 --> 02:06:25,720\nLet me just make sure\nDC is running a scope.\n\n2337\n02:06:25,720 --> 02:06:26,760\nOr is running the HV.\n\n2338\n02:06:26,760 --> 02:06:28,500\nWe already,\nin fact we deleted that scope earlier.\n\n2339\n02:06:29,740 --> 02:06:31,815\nSo it should be there, let's double check.\n\n2340\n02:06:31,815 --> 02:06:37,420\n>> Alright so\nwe'll just skip on over to the.\n\n2341\n02:06:37,420 --> 02:06:38,270\n>> Finished the key?\n\n2342\n02:06:38,270 --> 02:06:39,630\nConsole there.\n\n2343\n02:06:39,630 --> 02:06:41,770\n>> Yeah, back on DC one.\n\n2344\n02:06:41,770 --> 02:06:44,470\nAnd let's just make sure\nthat the service is running.\n\n2345\n02:06:47,760 --> 02:06:51,170\nI've got green check marks down the board\nthere, so everything looks fine.\n\n2346\n02:06:53,930 --> 02:06:56,650\nStars great out,\nwhich tells me that it is running.\n\n2347\n02:06:56,650 --> 02:06:58,957\n>> I'm going to re-start it.\n\n2348\n02:06:58,957 --> 02:07:02,590\n>> Okay.\n\n2349\n02:07:02,590 --> 02:07:03,950\n>> See if that makes any difference.\n\n2350\n02:07:03,950 --> 02:07:06,085\nAnd the problem is, though,\nis the pulling interval.\n\n2351\n02:07:06,085 --> 02:07:07,510\nWe've reduced it to five minutes but\n\n2352\n02:07:07,510 --> 02:07:10,710\nit hasn't been five minutes\nsince I refresh that info.\n\n2353\n02:07:10,710 --> 02:07:16,840\nLet's go back over to server 1 for\nmy ipam console.\n\n2354\n02:07:16,840 --> 02:07:20,230\nAnd we'll go pull info again.\n\n2355\n02:07:22,610 --> 02:07:24,270\n>> Retrieve all server data.\n\n2356\n02:07:24,270 --> 02:07:27,710\n>> Let me make sure that\nNDCP has not checked it yet.\n\n2357\n02:07:27,710 --> 02:07:29,435\nWe checked that once, already, right?\n\n2358\n02:07:29,435 --> 02:07:29,967\nMm-hm.\n\n2359\n02:07:29,967 --> 02:07:32,100\n>> All right, DHCP server's checked.\n\n2360\n02:07:34,100 --> 02:07:34,600\nOkay.\n\n2361\n02:07:35,810 --> 02:07:37,110\nDo I dare check again?\n\n2362\n02:07:37,110 --> 02:07:40,708\nAll right, this time it stayed.\n\n2363\n02:07:40,708 --> 02:07:41,276\n>> Mm-hm.\n>> So\n\n2364\n02:07:41,276 --> 02:07:44,764\nnow I'm going to try again\nto retrieve server data.\n\n2365\n02:07:44,764 --> 02:07:45,661\n>> All right.\n\n2366\n02:07:45,661 --> 02:07:47,730\n>> And\nsee if we can find that info about DHCP.\n\n2367\n02:07:49,240 --> 02:07:49,740\n>> All right.\n\n2368\n02:07:49,740 --> 02:07:54,075\nAnd then so then once it finishes\nthen we'll just refresh our console.\n\n2369\n02:07:54,075 --> 02:07:55,892\n>> Mm-hm.\nAnd it should be showing up.\n\n2370\n02:07:55,892 --> 02:07:57,401\n>> There should be two separate lines.\n\n2371\n02:07:57,401 --> 02:08:00,019\nWhen I go to DHD and SNDH of your servers.\n\n2372\n02:08:00,019 --> 02:08:01,383\nI should see two separate lines.\n\n2373\n02:08:01,383 --> 02:08:06,013\nOne for the fact that it's, because it's\nthe same physical machine, one line for\n\n2374\n02:08:06,013 --> 02:08:07,413\nDNS, one line for DHCP.\n\n2375\n02:08:07,413 --> 02:08:12,220\nSo let's see what happens here.\n\n2376\n02:08:12,220 --> 02:08:14,035\n>> Let's refresh the console.\n\n2377\n02:08:14,035 --> 02:08:14,845\nSo we'll just make sure.\n\n2378\n02:08:16,535 --> 02:08:18,685\n>> There we go.\n>> There we go, much better,\n\n2379\n02:08:18,685 --> 02:08:22,585\nso little hiccup there with that one\ncheck mark not staying checked for\n\n2380\n02:08:22,585 --> 02:08:27,495\nDHCP now we've got our DHC\nnow I can mange both DNS and\n\n2381\n02:08:27,495 --> 02:08:30,980\nDHCP from this console.\n\n2382\n02:08:30,980 --> 02:08:36,020\n>> Alright, let's jump back up to the IP\naddress blocks under the IP address space\n\n2383\n02:08:36,020 --> 02:08:38,200\nbecause now we added that guy in there.\n\n2384\n02:08:38,200 --> 02:08:43,160\nAnd sure enough, it doesn't have anything\nin there in our address inventory.\n\n2385\n02:08:45,270 --> 02:08:47,100\nI do not have any reservations created.\n\n2386\n02:08:47,100 --> 02:08:50,370\nI do not have any leases\nput out at this point, so\n\n2387\n02:08:50,370 --> 02:08:51,420\nprobably nothing showing up there.\n\n2388\n02:08:51,420 --> 02:08:55,240\nI am kind of surprised that it has not\ndetected our address block just yet,\n\n2389\n02:08:55,240 --> 02:08:57,170\nthe address range that we\nare using on our network.\n\n2390\n02:08:57,170 --> 02:08:58,140\nSo, I can add it manually.\n\n2391\n02:08:58,140 --> 02:09:02,670\nI do not know what their machines are,\nas far as what their address block is.\n\n2392\n02:09:02,670 --> 02:09:08,070\nBut, you can definitely come in here and\nsay all tasks at ip address block.\n\n2393\n02:09:08,070 --> 02:09:11,390\nI'm going to use one,\njust to show you this process,\n\n2394\n02:09:11,390 --> 02:09:14,110\nit's not the one in use by\nthese machines I don't think.\n\n2395\n02:09:14,110 --> 02:09:20,857\nLet's say our address block is\n10.1.1 Let's go to 10.1.0.0.\n\n2396\n02:09:20,857 --> 02:09:27,750\nAnd the prefix length will be 16 for\nthis particular block that I want to use.\n\n2397\n02:09:28,930 --> 02:09:32,669\nAnd I know that's not the default class A,\nbut I'm doing that intentionally.\n\n2398\n02:09:33,720 --> 02:09:37,620\nMy starting and end IP address I've got\nthe entire block from 0.0 to 255, 255.\n\n2399\n02:09:37,620 --> 02:09:41,320\nIf this was an external address block,\n\n2400\n02:09:41,320 --> 02:09:46,080\none that I'd gotten assigned from my\nISP who had gotten it from a registrar.\n\n2401\n02:09:46,080 --> 02:09:49,220\nThen I would want to assign\nmy registrar here, but\n\n2402\n02:09:49,220 --> 02:09:52,410\nit's an internal private address so\nI don't need to worry about that.\n\n2403\n02:09:52,410 --> 02:09:56,208\nI could put a description down here,\n\n2404\n02:09:56,208 --> 02:10:00,881\nthis is going to be\nCorporate Address Block.\n\n2405\n02:10:00,881 --> 02:10:03,990\nI wat to say corporate headquarters,\nsomething like that.\n\n2406\n02:10:03,990 --> 02:10:05,240\nI could put the owner or what have you.\n\n2407\n02:10:05,240 --> 02:10:05,740\nClick OK.\n\n2408\n02:10:09,906 --> 02:10:11,798\nMan, there's something\nreally up with this console.\n\n2409\n02:10:11,798 --> 02:10:16,770\nOh, it's filtered.\n\n2410\n02:10:16,770 --> 02:10:19,900\nThere's my block, and so\nthere's the block I just added.\n\n2411\n02:10:19,900 --> 02:10:25,580\nAnd the way this works, you've got blocks\nAddress of ranges, and then addresses.\n\n2412\n02:10:25,580 --> 02:10:29,860\nAnd it's basically a hierarchical\nstructure, so the block is the entire,\n\n2413\n02:10:29,860 --> 02:10:33,510\nin this case, 10.1.0.0 class of addresses.\n\n2414\n02:10:33,510 --> 02:10:36,420\nAnd then I might divide that up in\nmy network into multiple subnets.\n\n2415\n02:10:36,420 --> 02:10:37,750\nRight?\nI might go.\n\n2416\n02:10:37,750 --> 02:10:39,340\nDid I use a class?\n\n2417\n02:10:39,340 --> 02:10:42,960\nB, I should have used a class C.\n\n2418\n02:10:42,960 --> 02:10:45,268\nAnyway, I would divide that up.\n\n2419\n02:10:45,268 --> 02:10:48,850\n10.1.1, 10.1.2, 10.1.3, those would be\naddress ranges that I would want to add.\n\n2420\n02:10:48,850 --> 02:10:50,830\nThere's where I put my subnets.\n\n2421\n02:10:50,830 --> 02:10:52,490\nAnd then with each one of those subnets,\n\n2422\n02:10:52,490 --> 02:10:55,410\nyou'd see the individual\naddresses themself.\n\n2423\n02:10:55,410 --> 02:10:57,520\nSo, it's a hierarchical block.\n\n2424\n02:10:57,520 --> 02:11:02,670\nRanges, which are similar to subnets,\nand then addresses themselves.\n\n2425\n02:11:02,670 --> 02:11:04,630\nAnd then you can group ranges together for\n\n2426\n02:11:04,630 --> 02:11:07,749\nmanagement purposes with\nyour IP address ranger.\n\n2427\n02:11:09,350 --> 02:11:12,940\nAnd you arrange groups.\n\n2428\n02:11:12,940 --> 02:11:14,290\nFor us, what do we want to do next?\n\n2429\n02:11:15,750 --> 02:11:16,560\nNate?\n\n2430\n02:11:16,560 --> 02:11:21,340\n>> Well, at this point, yeah, just\ncreating some things, we can show you.\n\n2431\n02:11:21,340 --> 02:11:23,210\nWe can create some scopes in here.\n\n2432\n02:11:23,210 --> 02:11:25,830\n>> Okay.\n>> We can jump back over and do a DC.\n\n2433\n02:11:25,830 --> 02:11:27,710\nTake a look over there.\n\n2434\n02:11:27,710 --> 02:11:29,790\nBut, you know, yeah at this point.\n\n2435\n02:11:29,790 --> 02:11:31,910\nWe've got this guy up and running.\n\n2436\n02:11:31,910 --> 02:11:33,390\n>> Yeah at this point, yes we do.\n\n2437\n02:11:33,390 --> 02:11:35,850\nWe have IPAM up, configured properly.\n\n2438\n02:11:35,850 --> 02:11:38,945\nIt knows where my server or\nyou know in this case just one server.\n\n2439\n02:11:38,945 --> 02:11:42,965\nBut in your case it's going to be several\nservers most likely on your enterprise and\n\n2440\n02:11:42,965 --> 02:11:44,845\nnow I can start managing\nthem from right here.\n\n2441\n02:11:44,845 --> 02:11:47,883\nSo let's see some of the things\nwe can do with the IPAM console.\n\n2442\n02:11:47,883 --> 02:11:52,500\nI'm going to head down to\nDNS zone monitoring Ouch.\n\n2443\n02:11:54,470 --> 02:11:56,015\nIt's not very happy.\n\n2444\n02:11:56,015 --> 02:11:57,740\n>> [LAUGH]\n>> I love it.\n\n2445\n02:11:58,860 --> 02:12:01,120\nIn Microsoft's labs test,\nyou see what it says?\n\n2446\n02:12:01,120 --> 02:12:02,820\n>> What does it say?\n\n2447\n02:12:02,820 --> 02:12:04,260\n>> Click DNS monitoring.\n\n2448\n02:12:04,260 --> 02:12:05,764\nNote that both zones are OK.\n\n2449\n02:12:05,764 --> 02:12:10,230\n>> [LAUGH]\n>> [LAUGH] Oh, that's so nice.\n\n2450\n02:12:10,230 --> 02:12:13,950\nSo yeah, it thinks there's\nsomething wrong with my zone here.\n\n2451\n02:12:18,570 --> 02:12:20,480\nLet's go back in and\nsee if I can update that.\n\n2452\n02:12:20,480 --> 02:12:22,340\nIt might have just been\nhung up from earlier.\n\n2453\n02:12:23,610 --> 02:12:26,460\nSo what I did, I right clicked on there,\nreset zone status, and\n\n2454\n02:12:26,460 --> 02:12:28,500\nnow I'm going to go back and\nretrieve all server data again.\n\n2455\n02:12:28,500 --> 02:12:31,780\nMake it go back out and\ncheck on the status of those guys, and\n\n2456\n02:12:31,780 --> 02:12:34,930\nsee if it reports back as healthy.\n\n2457\n02:12:34,930 --> 02:12:39,660\n>> And of course, once again after we've\nrun this then we'll refresh our console.\n\n2458\n02:12:39,660 --> 02:12:43,810\nAll right, so if it finished, click in\nthere, we'll go to it and refresh that,\n\n2459\n02:12:43,810 --> 02:12:45,620\nwhich it did very fast.\n\n2460\n02:12:45,620 --> 02:12:48,830\nAnd on here, oh yeah, there we go.\n\n2461\n02:12:48,830 --> 02:12:52,220\n>> So I can probably do the same thing to\nthe other two if we really wanted we could\n\n2462\n02:12:52,220 --> 02:12:53,170\nreset that guy.\n\n2463\n02:12:53,170 --> 02:12:57,760\nAnd then go back\n\n2464\n02:12:57,760 --> 02:13:02,140\nup to my server inventory, and\ncollect my data up all over again.\n\n2465\n02:13:02,140 --> 02:13:02,640\nRight.\n\n2466\n02:13:05,110 --> 02:13:10,770\nAnd then once that guy finishes, then\nwe'll refresh our console one more time.\n\n2467\n02:13:11,900 --> 02:13:12,970\nAnd, take a look down there.\n\n2468\n02:13:15,440 --> 02:13:19,530\nAll right.\n\n2469\n02:13:19,530 --> 02:13:20,470\nRefresh.\n>> Much better.\n\n2470\n02:13:20,470 --> 02:13:21,110\n>> Yep, sure enough.\n\n2471\n02:13:21,110 --> 02:13:22,070\n>> Much better.\n\n2472\n02:13:22,070 --> 02:13:22,660\nAll right.\n\n2473\n02:13:22,660 --> 02:13:27,650\nLet's see, and if we go down a little\nbit further here the resolution on\n\n2474\n02:13:27,650 --> 02:13:30,680\nthis guy is pretty small guys,\nall right, I'm going to have to scroll.\n\n2475\n02:13:30,680 --> 02:13:34,511\nI'm going to select what goes up there at\nthe top and then we're going to scroll\n\n2476\n02:13:34,511 --> 02:13:38,070\ndown here and I can see the name of\nthe zone, duration and current state.\n\n2477\n02:13:38,070 --> 02:13:40,600\nWell, it's only been up for\none minute and 14 seconds, because right,\n\n2478\n02:13:40,600 --> 02:13:42,710\nit had that red box before.\n\n2479\n02:13:42,710 --> 02:13:45,680\nSo, it says okay, it's been good for\na minute and 14 seconds,\n\n2480\n02:13:45,680 --> 02:13:49,790\nI go to Authoritative Servers and I can\nsee who that Authoritative Server is.\n\n2481\n02:13:49,790 --> 02:13:51,500\nI can tell that it's\nActive Directory integrated.\n\n2482\n02:13:51,500 --> 02:13:55,190\nI get the IP addresses for\nhim, the whole nine.\n\n2483\n02:13:55,190 --> 02:13:55,750\n>> Nice.\n>> All right.\n\n2484\n02:13:56,850 --> 02:13:58,700\nI'll play with some DHCP next.\n\n2485\n02:13:58,700 --> 02:13:59,740\n>> All right.\nLet's jump in there.\n\n2486\n02:13:59,740 --> 02:14:01,595\n>> See if it sees anything just yet.\n\n2487\n02:14:01,595 --> 02:14:04,890\nBecause I, oh that's right we don't\nhave any scopes on our DHCP server yet.\n\n2488\n02:14:06,040 --> 02:14:07,150\n>> Why don't we create one?\n\n2489\n02:14:07,150 --> 02:14:07,880\nLet's create one.\n\n2490\n02:14:07,880 --> 02:14:09,580\n>> All right.\n\n2491\n02:14:09,580 --> 02:14:13,850\nSo what I'm going to do is go to DNS and\nDHCP servers over here, and\n\n2492\n02:14:13,850 --> 02:14:17,750\nI'm just going to right click on DHCP,\nand I'm going to choose.\n\n2493\n02:14:17,750 --> 02:14:18,560\nAnd notice what I can do.\n\n2494\n02:14:18,560 --> 02:14:24,140\nI can work with the server properties,\nthe server options, I've got create scope.\n\n2495\n02:14:24,140 --> 02:14:26,250\nLaunch the actual DHCP MMC.\n\n2496\n02:14:26,250 --> 02:14:27,860\nMicrosoft Management Console.\n\n2497\n02:14:27,860 --> 02:14:30,340\nI can work with my vendor and\nuser classes.\n\n2498\n02:14:30,340 --> 02:14:32,200\nSo I've got it all right here.\n\n2499\n02:14:32,200 --> 02:14:34,410\nI'm going to go ahead and\nchoose Create DHCP Scope.\n\n2500\n02:14:34,410 --> 02:14:35,730\n>> All right.\n\n2501\n02:14:35,730 --> 02:14:36,230\n>> All right.\n\n2502\n02:14:37,690 --> 02:14:40,800\nAnd it's the same thing I'd be doing if\n\n2503\n02:14:40,800 --> 02:14:44,350\nI was right-clicking New Scope\ninside the DHCP Console.\n\n2504\n02:14:44,350 --> 02:14:46,060\nThe dialog looks a little bit different.\n\n2505\n02:14:46,060 --> 02:14:47,280\nIt's PowerShell based.\n\n2506\n02:14:48,640 --> 02:14:51,570\nAnd I like these windows, you know you\ncan right now it's set to show all.\n\n2507\n02:14:51,570 --> 02:14:55,380\nSo I can scroll down through all\nthe different options, right, but\n\n2508\n02:14:55,380 --> 02:14:58,750\nif I want to jump to a particular section,\nI can do that.\n\n2509\n02:14:58,750 --> 02:15:02,200\nI can go to just the DNS and\njust the advanced so\n\n2510\n02:15:02,200 --> 02:15:03,510\nI can kind of work my way down through.\n\n2511\n02:15:03,510 --> 02:15:06,060\nIt makes the screen a little bit clearer,\nit makes it a little easier to work with.\n\n2512\n02:15:07,410 --> 02:15:10,490\nAlright for us,\nwhat do you want to do Nate?\n\n2513\n02:15:10,490 --> 02:15:11,270\nYeah, scope one.\n\n2514\n02:15:11,270 --> 02:15:15,220\nLet's just name this guy scope one.\n\n2515\n02:15:16,360 --> 02:15:16,940\n>> All right.\n\n2516\n02:15:16,940 --> 02:15:19,814\n>> That's pretty good.\n\n2517\n02:15:19,814 --> 02:15:22,950\nAnd for a description, nothing there.\n\n2518\n02:15:22,950 --> 02:15:26,350\n>> I don't need no stinking description.\n\n2519\n02:15:26,350 --> 02:15:30,890\n>> Start IP address, let's do 10.1.1.1.\n\n2520\n02:15:30,890 --> 02:15:33,787\nAnd for our ends do 10.1.1.99 And\n\n2521\n02:15:33,787 --> 02:15:39,810\nlet's just make it a Class C.\n\n2522\n02:15:39,810 --> 02:15:40,310\n>> Class C?\n\n2523\n02:15:40,310 --> 02:15:41,870\n>> Sure.\n2.5, 2.5, 2.5.0.\n\n2524\n02:15:41,870 --> 02:15:42,770\n>> All right.\n\n2525\n02:15:42,770 --> 02:15:46,680\n>> And for the lease, it is assigned.\n\n2526\n02:15:46,680 --> 02:15:48,260\nAnd your exclusions.\n\n2527\n02:15:48,260 --> 02:15:49,510\n>> No, no exclusions.\n\n2528\n02:15:49,510 --> 02:15:51,960\n>> Activated on creation,\nsure, let's do that.\n\n2529\n02:15:51,960 --> 02:15:54,000\nAnything else you want to change?\n\n2530\n02:15:54,000 --> 02:15:54,616\n>> Let's see.\n\n2531\n02:15:54,616 --> 02:15:56,932\nWe'll go and accept the defaults.\n\n2532\n02:15:56,932 --> 02:15:59,416\n>> We've got our dynamic\nupdates turned on, again,\n\n2533\n02:15:59,416 --> 02:16:01,687\nsame options you'd see\nin the normal wizard.\n\n2534\n02:16:01,687 --> 02:16:04,311\nYou've got your scope options for\nyour classes.\n\n2535\n02:16:04,311 --> 02:16:06,238\nIf you wanted to add a router.\n\n2536\n02:16:06,238 --> 02:16:11,540\nWe might want to do something like that so\nwe might say number 3 router.\n\n2537\n02:16:11,540 --> 02:16:15,210\nAnd then what you do, it's kind of strange\nhere, you've got your server name or\n\n2538\n02:16:15,210 --> 02:16:19,310\nIP address like, in this case,\nwhat are we gonna use?\n\n2539\n02:16:19,310 --> 02:16:24,043\nI don't know if he exists, 10.1.1.1?\n\n2540\n02:16:24,043 --> 02:16:25,750\nOh, wait, that's in the scope.\n\n2541\n02:16:25,750 --> 02:16:30,920\nLet's do 254.\nLet's go to the other end.\n\n2542\n02:16:30,920 --> 02:16:32,310\nOops, I'm sorry, not there.\n\n2543\n02:16:34,280 --> 02:16:38,437\nDown here where it says IP Address is\na good place to add that IP address.\n\n2544\n02:16:38,437 --> 02:16:43,020\nSo 10.1.1.254 and\n\n2545\n02:16:43,020 --> 02:16:46,495\nthen you've got to make sure you\nclick add to list, all right.\n\n2546\n02:16:46,495 --> 02:16:48,680\nCuz then I can go back up here,\nand we won't for this,\n\n2547\n02:16:48,680 --> 02:16:51,260\nbut then I've got all the different\noptions if I wanted to list out who their\n\n2548\n02:16:51,260 --> 02:16:56,320\nDNS server name was or IP Address was or\nthings like that I would add those.\n\n2549\n02:16:56,320 --> 02:17:00,370\nSame little box here and then click add\nto list if I scroll down just a little\n\n2550\n02:17:00,370 --> 02:17:03,250\nfurther you'll see that each one\nof those options that I add,\n\n2551\n02:17:03,250 --> 02:17:05,600\nis gonna show up down here, all right\n>> Mm hm\n\n2552\n02:17:05,600 --> 02:17:09,094\n>> For example if we wanted to tell them\n\n2553\n02:17:09,094 --> 02:17:14,807\nthere DNS server address was,\nget my mouse to play along.\n\n2554\n02:17:14,807 --> 02:17:17,150\n10.1.1.100.\n\n2555\n02:17:19,714 --> 02:17:23,423\nAnd, Add To List.\n\n2556\n02:17:23,423 --> 02:17:26,164\nAnd, so now I'm configuring\nmy list of options there.\n\n2557\n02:17:26,164 --> 02:17:29,003\n>> Nice.\n\n2558\n02:17:29,003 --> 02:17:31,520\n>> For\nthe rest I think we're probably good.\n\n2559\n02:17:31,520 --> 02:17:34,010\nSo we'll apply it.\n\n2560\n02:17:34,010 --> 02:17:35,430\nGood old Apply, Ok.\n\n2561\n02:17:37,310 --> 02:17:42,185\nAnd then should we jump back\nover to our domain controller?\n\n2562\n02:17:42,185 --> 02:17:42,750\n>> Mm-hm.\n\n2563\n02:17:42,750 --> 02:17:45,785\n>> Take a look at that and see that our\n>> You know,\n\n2564\n02:17:45,785 --> 02:17:46,935\nwhen we did create that scope.\n\n2565\n02:17:46,935 --> 02:17:48,105\n>> Let's do it.\nLet's see,\n\n2566\n02:17:48,105 --> 02:17:53,485\nright here we've got DHCP scopes, and\nI see that scope we just created.\n\n2567\n02:17:53,485 --> 02:18:00,808\nAnd if we flip back over to DC and\nwe take a look at DHCP.\n\n2568\n02:18:00,808 --> 02:18:01,308\nAll right.\n\n2569\n02:18:04,625 --> 02:18:10,500\n>> Now we expand this guy out we\nhopefully [COUGH] there she is.\n\n2570\n02:18:10,500 --> 02:18:13,840\n>> Nice.\n>> So there's my scope as well as\n\n2571\n02:18:13,840 --> 02:18:14,890\nthe options that I configured.\n\n2572\n02:18:14,890 --> 02:18:16,915\nThe router\n>> And the DNS server.\n\n2573\n02:18:16,915 --> 02:18:17,650\n>> Mm-hm.\n\n2574\n02:18:17,650 --> 02:18:18,290\n>> Right?\n\n2575\n02:18:18,290 --> 02:18:20,800\nAnd we even create reservations from here.\n\n2576\n02:18:20,800 --> 02:18:25,120\nI can go back over to my DHCP server.\n\n2577\n02:18:25,120 --> 02:18:26,830\nAnd let's say I need a new reservation.\n\n2578\n02:18:30,195 --> 02:18:32,773\nActually it's not on that screen there.\n\n2579\n02:18:37,975 --> 02:18:42,615\nI forget where to go to make that\nreservation, but we can definitely make,\n\n2580\n02:18:42,615 --> 02:18:43,880\noh IP addresses.\n\n2581\n02:18:43,880 --> 02:18:45,331\nThat's what it is.\n\n2582\n02:18:45,331 --> 02:18:46,620\nPart is it then.\n\n2583\n02:18:46,620 --> 02:18:49,057\nBut anyway,\nwe won't go too far out off the lab here.\n\n2584\n02:18:49,057 --> 02:18:50,822\n>> [CROSSTALK]\n>> Yeah.\n\n2585\n02:18:50,822 --> 02:18:52,280\nSo but you can.\n\n2586\n02:18:52,280 --> 02:18:56,210\nIf you know the Mac address you can\ncreate reservations through here.\n\n2587\n02:18:56,210 --> 02:18:58,800\nYou can do just everything\nyou need to do for DHCP,\n\n2588\n02:18:58,800 --> 02:19:01,890\nDNS and NPS and Active Directory.\n\n2589\n02:19:02,990 --> 02:19:03,710\n>> Nice.\n\n2590\n02:19:03,710 --> 02:19:07,750\nNow one that thing that we should mention.\n\n2591\n02:19:07,750 --> 02:19:15,280\nSo new in server 2012 R2, right so in this\nguy over here, the database That he uses.\n\n2592\n02:19:15,280 --> 02:19:17,985\n[CROSSTALK] In Server 2012,\n\n2593\n02:19:17,985 --> 02:19:23,593\nit would use the Windows internal\ndatabase, and in 2012 R2,\n\n2594\n02:19:23,593 --> 02:19:29,015\nwhat's new to the is that now\nyou can use a SQL database.\n\n2595\n02:19:29,015 --> 02:19:30,325\n>> Yeah, and that's nice.\n\n2596\n02:19:30,325 --> 02:19:32,880\nA lot of people have SQL\non their network already.\n\n2597\n02:19:32,880 --> 02:19:36,770\nAnd maybe for some reason if you want to\ndo your own reports on some of that data\n\n2598\n02:19:36,770 --> 02:19:39,580\nor things like that we can\nhave it dumped into a SQL,\n\n2599\n02:19:39,580 --> 02:19:43,570\nas Nate before said that you had to\nuse that Windows internal database.\n\n2600\n02:19:43,570 --> 02:19:49,460\nNow we can dump it right into\nour SQL database, or SQL server.\n\n2601\n02:19:49,460 --> 02:19:50,950\nCreate its own database.\n\n2602\n02:19:50,950 --> 02:19:53,580\n>> All right Mike, well anything else in\n\n2603\n02:19:53,580 --> 02:19:57,750\ngood old IPAM that you want to touch\non while we've got the console here.\n\n2604\n02:19:57,750 --> 02:19:58,440\n>> I don't think so.\n\n2605\n02:19:58,440 --> 02:20:00,990\nI mean, I think we've pretty\nmuch covered everything we need.\n\n2606\n02:20:00,990 --> 02:20:03,930\nYou know, there's obviously more to it.\n\n2607\n02:20:03,930 --> 02:20:06,000\nI recommend you guys get in there and\nexplore.\n\n2608\n02:20:06,000 --> 02:20:07,820\nFire up this Technet lab.\n\n2609\n02:20:07,820 --> 02:20:11,020\nThere's another optional exercise I think\nthey have you go through that we're not\n\n2610\n02:20:11,020 --> 02:20:12,060\ndoing here.\n\n2611\n02:20:12,060 --> 02:20:13,130\nAnd then just play.\n\n2612\n02:20:13,130 --> 02:20:14,380\nRight?\nThere's nothing that says you\n\n2613\n02:20:14,380 --> 02:20:16,230\nhave to follow their steps.\n\n2614\n02:20:16,230 --> 02:20:17,920\nGet in here and explore the console.\n\n2615\n02:20:17,920 --> 02:20:19,760\nPoke on every little option.\n\n2616\n02:20:19,760 --> 02:20:23,610\nWhen you're preparing for the exam,\nthis is what I always tell my students.\n\n2617\n02:20:23,610 --> 02:20:25,720\nYou can go through these exercises.\n\n2618\n02:20:25,720 --> 02:20:27,170\nYou can read these books.\n\n2619\n02:20:27,170 --> 02:20:29,720\nBut get in there and play.\n\n2620\n02:20:29,720 --> 02:20:30,440\nClick on things.\n\n2621\n02:20:30,440 --> 02:20:31,830\nDo things that it tells you not to do.\n\n2622\n02:20:31,830 --> 02:20:32,830\nIt's just a virtual machine.\n\n2623\n02:20:32,830 --> 02:20:33,670\nYou can't break it.\n\n2624\n02:20:33,670 --> 02:20:34,740\nRight?\nYou can always turn it off and\n\n2625\n02:20:34,740 --> 02:20:36,010\nstart it over again.\n\n2626\n02:20:36,010 --> 02:20:37,490\nMe, I'm a tactile learner.\n\n2627\n02:20:37,490 --> 02:20:40,260\nYou've got visual learners,\ntactile learners, audible learners.\n\n2628\n02:20:40,260 --> 02:20:41,670\nI like to do things.\n\n2629\n02:20:41,670 --> 02:20:43,880\nSo that's why they have these\nvirtual machines for you.\n\n2630\n02:20:43,880 --> 02:20:46,910\nThat's why we provide virtual machines for\nyour subscribers.\n\n2631\n02:20:46,910 --> 02:20:49,870\nIs to give you the ability to get\nin there and play with things.\n\n2632\n02:20:49,870 --> 02:20:53,700\nSo try things out, click on everything,\nlook at all the dialog boxes, read some of\n\n2633\n02:20:53,700 --> 02:20:57,040\nthose intro screens that we skipped past\nas we're going through those wizards.\n\n2634\n02:20:58,050 --> 02:20:59,950\nHelp you get ready for that exam.\n\n2635\n02:20:59,950 --> 02:21:00,760\n>> Mm.\n\n2636\n02:21:00,760 --> 02:21:04,720\nAlright well Mike that\nwraps up our DNS and\n\n2637\n02:21:04,720 --> 02:21:08,335\nour DHCP events the configuration\nstuff and a good old IPAM.\n\n2638\n02:21:08,335 --> 02:21:12,470\nAnd if you ever have any\nquestions during the show,\n\n2639\n02:21:12,470 --> 02:21:17,350\nbe sure to check us out on the right below\non the live page right below our video.\n\n2640\n02:21:17,350 --> 02:21:17,920\nThere's a chat box.\n\n2641\n02:21:17,920 --> 02:21:18,770\nYou can jump in there.\n\n2642\n02:21:18,770 --> 02:21:21,420\nWe've got a monitor up here\nrespond to you during the show.\n\n2643\n02:21:21,420 --> 02:21:26,340\nIf you ever have any questions after the\nshow And jump into the Q and A section and\n\n2644\n02:21:26,340 --> 02:21:26,990\nthe forms there.\n\n2645\n02:21:26,990 --> 02:21:27,730\nDrop us a line.\n\n2646\n02:21:27,730 --> 02:21:29,480\nWe monitor it and get back to you.\n\n2647\n02:21:29,480 --> 02:21:33,060\nAnd if you're ever away from your PC\nyou can always check us out on Roku.\n\n2648\n02:21:33,060 --> 02:21:34,670\nWe've got a channel there.\n\n2649\n02:21:34,670 --> 02:21:36,980\nAnd check us out from\nthe comfort of your own couch.\n\n2650\n02:21:36,980 --> 02:21:38,905\n>> That's how I check you guys\nout when I'm at home watching.\n\n2651\n02:21:38,905 --> 02:21:39,940\n>> [LAUGH] Oh, yeah?\n\n2652\n02:21:39,940 --> 02:21:41,280\n>> Yeah.\nJust sit there and watch.\n\n2653\n02:21:41,280 --> 02:21:44,165\n>> Sitting on the couch,\nrecline with the Roku.\n\n2654\n02:21:44,165 --> 02:21:45,274\n>> All right, that's awesome.\n\n2655\n02:21:45,274 --> 02:21:46,560\nAll right.\nWell, signing out for\n\n2656\n02:21:46,560 --> 02:21:48,610\nIT Pro TV, I'm Nathan Copeland.\n\n2657\n02:21:48,610 --> 02:21:49,570\n>> And I'm Mike Rodrick.\n\n2658\n02:21:49,570 --> 02:21:51,017\n>> And we'll see you next time.\n\n2659\n02:21:51,017 --> 02:22:01,017\n[MUSIC]\n\n2660\n02:22:03,068 --> 02:22:03,568\n[NOISE]\n\n",
          "vimeoId": "98129662"
        }
      ],
      "title": "Configure Network Services"
    },
    {
      "episodes": [
        {
          "description": "In this episode Mike and Don take a look at configuring an Active Directory forest and domain. They explain how to modify existing domains and forests in the event of upgrades or expansions. They also describe using universal principle names (UPN) suffixes. They conclude with demonstrating how to monitor and manage SYSVOL replication.",
          "length": "4835",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/009-Configuring-AD-Infrastructure.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/009-Configuring-AD-Infrastructure-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/009-Configuring-AD-Infrastructure-sm.jpg",
          "title": "Configuring AD Infrastructure",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:29,093 --> 00:00:32,379\nAll right, good morning,\ngood afternoon and good evening and\n\n3\n00:00:32,379 --> 00:00:36,278\nwelcome back to another episode of\nIT Pro TV I'm your host Tom Pissette.\n\n4\n00:00:36,278 --> 00:00:37,770\nToday with Mr. Mike Rodrick.\n\n5\n00:00:37,770 --> 00:00:38,380\nHow's it going, Mike?\n\n6\n00:00:38,380 --> 00:00:38,990\n>> Fantastic.\n\n7\n00:00:38,990 --> 00:00:39,670\nHow you doing, Don?\n\n8\n00:00:39,670 --> 00:00:41,630\n>> You know, I'm really excited.\n\n9\n00:00:41,630 --> 00:00:43,460\n>> Yeah?\n>> Because we do a lot of episodes\n\n10\n00:00:43,460 --> 00:00:45,870\nthat cover a lot of stuff,\na lot of technologies.\n\n11\n00:00:45,870 --> 00:00:47,758\n>> Some more exciting than others.\n\n12\n00:00:47,758 --> 00:00:48,660\n>> [LAUGH] Yeah.\n\n13\n00:00:48,660 --> 00:00:52,985\nSome that you know,\nyou are never going to use in production.\n\n14\n00:00:52,985 --> 00:00:57,685\n>> What? [LAUGH] >> But are important\nbecause they're on the exam, but\n\n15\n00:00:57,685 --> 00:00:58,735\ntoday's episode.\n\n16\n00:00:58,735 --> 00:00:59,325\n>> Good stuff.\n\n17\n00:00:59,325 --> 00:01:00,665\n>> This one is action packed,\n\n18\n00:01:00,665 --> 00:01:05,045\nit's full of all sorts of stuff that you\nwill use out there in the real world,\n\n19\n00:01:05,045 --> 00:01:08,955\nespecially enterprise environments, not so\nmuch small and medium businesses, so\n\n20\n00:01:08,955 --> 00:01:11,650\nthis is an exciting one\n>> We're going to be covering active\n\n21\n00:01:11,650 --> 00:01:14,280\ndirectory configuration,\nand you might ask yourself,\n\n22\n00:01:14,280 --> 00:01:16,060\n\"wait a minute, I watch the 74-11 show.\n\n23\n00:01:16,060 --> 00:01:22,360\nYou guys already did active directory, why\nare you doing it again?\" Well, in 74-11,\n\n24\n00:01:22,360 --> 00:01:27,150\neverything that we covered was really\nfrom the perspective of a single domain.\n\n25\n00:01:27,150 --> 00:01:28,980\n>> Very simple environment.\n\n26\n00:01:28,980 --> 00:01:29,900\n>> Absolutely.\n\n27\n00:01:29,900 --> 00:01:31,010\nAnd given the choice,\n\n28\n00:01:31,010 --> 00:01:33,700\nI'm going to go single domain no\nmatter how big my environment is.\n\n29\n00:01:33,700 --> 00:01:37,970\nIf I have a company that has 10 employees,\nI'm going to go single domain.\n\n30\n00:01:37,970 --> 00:01:41,840\nIf I have an enterprise that has\nthousands of employees across the globe,\n\n31\n00:01:41,840 --> 00:01:43,680\nI'm going to try and go single domain,\n>> [LAUGH]\n\n32\n00:01:43,680 --> 00:01:44,190\n>> Right?\n\n33\n00:01:44,190 --> 00:01:46,114\nBecause it's so much easier to manage\n>> it is\n\n34\n00:01:46,114 --> 00:01:47,410\n>> and maintain.\n\n35\n00:01:47,410 --> 00:01:48,090\n>> It is.\n>> But there are times.\n\n36\n00:01:48,090 --> 00:01:49,650\nWe need more than one domain, and so\n\n37\n00:01:49,650 --> 00:01:52,250\nwe're going to take a look\nat how to handle that.\n\n38\n00:01:52,250 --> 00:01:53,765\nBut I'm getting ahead of myself, Mike,\n\n39\n00:01:53,765 --> 00:01:57,090\nbecause I'm forgetting something\nthat's even more important.\n\n40\n00:01:57,090 --> 00:01:57,690\n>> What's that?\n\n41\n00:01:57,690 --> 00:01:58,650\n>> How to upgrade.\n\n42\n00:01:58,650 --> 00:01:59,640\n>> How to upgrade, huh?\n\n43\n00:01:59,640 --> 00:02:02,150\n>> So if you have a 2008 Active Directory,\n\n44\n00:02:02,150 --> 00:02:04,666\nhow do you upgrade to\na 2012 Active Directory?\n\n45\n00:02:04,666 --> 00:02:06,840\nSo we're going to take a look at\nthat in this episode Episode 2,\n\n46\n00:02:06,840 --> 00:02:09,650\nthat's maybe even more exciting, because\nwhether you're single or multiple domain,\n\n47\n00:02:09,650 --> 00:02:10,650\nyou have to go through that.\n\n48\n00:02:10,650 --> 00:02:12,590\n>> Yeah, absolutely,\ngot to get that new stuff going.\n\n49\n00:02:12,590 --> 00:02:13,580\nAll of those new features.\n\n50\n00:02:13,580 --> 00:02:14,618\n>> Got to have the cutting edge, right?\n\n51\n00:02:14,618 --> 00:02:15,780\n>> Heck ya.\n[LAUGH]\n\n52\n00:02:15,780 --> 00:02:17,060\n>> Unless you're, you know,\n\n53\n00:02:17,060 --> 00:02:19,090\na government employee,\nin which case, you know.\n\n54\n00:02:19,090 --> 00:02:20,786\n>> We're sorry.\n>> Still working on that MT4 upgrade.\n\n55\n00:02:20,786 --> 00:02:23,394\n[LAUGH] Ain't that the truth.\n\n56\n00:02:23,394 --> 00:02:24,440\n>> All right.\n\n57\n00:02:24,440 --> 00:02:27,480\n>> So let's start with the upgrade piece,\nbecause it is straightforward and\n\n58\n00:02:27,480 --> 00:02:29,160\nit is something that\nwe need to understand.\n\n59\n00:02:29,160 --> 00:02:31,110\n>> Okay\n>> Do I still have the objectives for\n\n60\n00:02:31,110 --> 00:02:31,920\nthis show pulled up?\n\n61\n00:02:31,920 --> 00:02:32,620\nLet's see.\n\n62\n00:02:32,620 --> 00:02:35,480\nI had them somewhere around here.\n\n63\n00:02:35,480 --> 00:02:36,380\nHere we go.\n\n64\n00:02:36,380 --> 00:02:40,250\nSo, we're going to jump around\na little bit in the objectives.\n\n65\n00:02:40,250 --> 00:02:43,050\nI we kind of take a look\nat the objectives,\n\n66\n00:02:43,050 --> 00:02:45,445\nI'll pull it up on our website here.\n\n67\n00:02:45,445 --> 00:02:48,460\nBecause it really starts off with\nconfiguring a forest or domain, and\n\n68\n00:02:48,460 --> 00:02:50,860\nit jumps into the multi-domain stuff.\n\n69\n00:02:50,860 --> 00:02:53,490\nAnd well what we are going to do is\nwe're going to stat off right here with\n\n70\n00:02:53,490 --> 00:02:58,050\nupgrading existing domains and forests,\nincluding environment preparations and\n\n71\n00:02:58,050 --> 00:03:01,020\nfunctional levels, that's what we're\ngoing to take a look at first, all right?\n\n72\n00:03:01,020 --> 00:03:03,720\nAnd as part of the upgrade,\n\n73\n00:03:03,720 --> 00:03:07,000\nwe need to change the way that\nactive directory replicates, the way\n\n74\n00:03:07,000 --> 00:03:11,700\nit replicated under 2008 is different\nthan the way that it replicates in 2012.\n\n75\n00:03:11,700 --> 00:03:17,150\nSo, when you upgrade you almost\nalways immediately follow up with\n\n76\n00:03:17,150 --> 00:03:20,600\nupgrades syspol replication way down here.\n\n77\n00:03:20,600 --> 00:03:24,050\nSo we're going to go a little out of\norder with the objectives if you're\n\n78\n00:03:24,050 --> 00:03:27,260\none of those people that's following along\nby the book its going to look weird.\n\n79\n00:03:27,260 --> 00:03:29,500\nBut it makes sense because these are\nthe two pieces that I'm going to, yeah.\n\n80\n00:03:29,500 --> 00:03:31,080\n>> There's a lot of steps, but yeah,\nit's going to go in the right order,\n\n81\n00:03:31,080 --> 00:03:32,560\nwhat you guys are going to\ndo out in the real world.\n\n82\n00:03:32,560 --> 00:03:34,200\n>> Yeah.\n>> And you got to know it all anyway for\n\n83\n00:03:34,200 --> 00:03:35,686\nthe exam, so.\n\n84\n00:03:35,686 --> 00:03:39,807\n>> So that's kind of where we're\ngoing to start is I've got right\n\n85\n00:03:39,807 --> 00:03:43,542\nhere a Windows Server 2008\nR2 Enterprise Edition,\n\n86\n00:03:43,542 --> 00:03:46,810\nthat is a mouthful, domain controller.\n\n87\n00:03:46,810 --> 00:03:50,730\nIt's up and it's running an active\ndirectory, forest and domain.\n\n88\n00:03:50,730 --> 00:03:51,670\nIt's running domain1.itpro.tv.\n\n89\n00:03:51,670 --> 00:03:53,860\nSo that's it, it's right there and\nit's 2008 R2.\n\n90\n00:03:53,860 --> 00:03:56,960\n>> So we're going to do\nan in place upgrade on this?\n\n91\n00:03:56,960 --> 00:03:57,720\nCorrect?\n\n92\n00:03:57,720 --> 00:04:00,050\n>> Which is actually not the recommended.\n\n93\n00:04:00,050 --> 00:04:00,550\nRight?\n>> Wait.\n\n94\n00:04:00,550 --> 00:04:01,470\n>> Because there's really two\n\n95\n00:04:01,470 --> 00:04:02,810\ndifferent ways.\n>> We're not going to do an in\n\n96\n00:04:02,810 --> 00:04:03,710\nplace upgrade, sorry.\n>> Oh\n\n97\n00:04:03,710 --> 00:04:04,265\nwe're not?\nOkay.\n\n98\n00:04:04,265 --> 00:04:05,030\n>> [LAUGH]\n>> It\n\n99\n00:04:05,030 --> 00:04:05,751\nwould-\n>> Could have.\n\n100\n00:04:05,751 --> 00:04:06,650\n[LAUGH]\n>> I should've let you finish,\n\n101\n00:04:06,650 --> 00:04:09,790\nthough, because that is a great point,\nyou don't want to do in-place upgrades,\n\n102\n00:04:09,790 --> 00:04:14,220\nif you can avoid it, especially with\ndomain controllers, it's a nightmare.\n\n103\n00:04:14,220 --> 00:04:15,120\n>> Can't imagine.\n\n104\n00:04:15,120 --> 00:04:17,900\n>> So what Microsoft recommends\nis when it comes time to upgrade,\n\n105\n00:04:17,900 --> 00:04:22,670\nyou're running 2008, and\nyou want to upgrade your domain to 2012,\n\n106\n00:04:22,670 --> 00:04:25,130\nthey recommend doing what's\ncalled a swing migration.\n\n107\n00:04:25,130 --> 00:04:28,440\n>> And, that's where you don't\nmess with your 2008 server.\n\n108\n00:04:28,440 --> 00:04:32,450\nYou bring up an all new 2012 server.\n\n109\n00:04:32,450 --> 00:04:34,520\nAnd, you promote it to\nbe a domain controller.\n\n110\n00:04:34,520 --> 00:04:35,900\nAnd, you shift all your stuff over to it.\n\n111\n00:04:35,900 --> 00:04:37,310\nAnd you kind of move that way.\n\n112\n00:04:37,310 --> 00:04:38,650\nAnd, that's where we're going to be.\n\n113\n00:04:38,650 --> 00:04:42,250\nI've got this guy right here,\nwhich is, domain 1- D C 1, right?\n\n114\n00:04:42,250 --> 00:04:45,040\nSo, that's this server.\n\n115\n00:04:45,040 --> 00:04:45,780\n>> Right.\n\n116\n00:04:45,780 --> 00:04:49,251\n>> And, I've got\n>> A new server, domain1/dc2.\n\n117\n00:04:49,251 --> 00:04:52,170\nNow, it's not actually\na domain controller, yet,\n\n118\n00:04:52,170 --> 00:04:55,990\nI just installed Windows server 2012\non it, and I joined it to the domain.\n\n119\n00:04:55,990 --> 00:04:57,590\nThat's all I've done to it.\n\n120\n00:04:57,590 --> 00:05:00,600\nI haven't even installed\nthe active directory role yet.\n\n121\n00:05:00,600 --> 00:05:06,805\nBut If this is going to be our first\nWindows Server 2012 R2 machine,\n\n122\n00:05:06,805 --> 00:05:09,405\nthat's going to be a domain controller,\nthere's some steps we need to take.\n\n123\n00:05:09,405 --> 00:05:10,995\nIf it's just going to be a member server.\n\n124\n00:05:10,995 --> 00:05:11,995\n>> Right, doesn't matter.\n\n125\n00:05:11,995 --> 00:05:13,255\n>> You can join away, doesn't matter.\n\n126\n00:05:13,255 --> 00:05:16,275\nIt doesn't affect the domain at\nall if it's just a member server.\n\n127\n00:05:16,275 --> 00:05:18,145\n>> But with those new, if we're\ngoing to bring in a new operating,\n\n128\n00:05:18,145 --> 00:05:20,615\nevery time they come out with a new\noperating system we get new features,\n\n129\n00:05:20,615 --> 00:05:22,925\nnew things we can do in active directory.\n\n130\n00:05:22,925 --> 00:05:24,110\nLike 2008 R2.\n\n131\n00:05:24,110 --> 00:05:26,710\nBrought in the recycle bin and so\n\n132\n00:05:26,710 --> 00:05:28,835\nwhat we got to do is we got to\nprepare the environment for that.\n\n133\n00:05:28,835 --> 00:05:30,530\nBecause those 2008 domain controllers,\n\n134\n00:05:30,530 --> 00:05:33,130\nthey're not going to\nunderstand the new classes and\n\n135\n00:05:33,130 --> 00:05:37,000\nthe new objects that we can create in\nactive directory that 2012 brings in.\n\n136\n00:05:37,000 --> 00:05:41,520\nSo we've got to update our forest,\nwe've got to upgrade our group policy,\n\n137\n00:05:41,520 --> 00:05:43,290\nas well as prepare for RODCs.\n\n138\n00:05:43,290 --> 00:05:47,810\nAnd we've got some cool tools,\nit makes it really easy for us to do.\n\n139\n00:05:47,810 --> 00:05:51,890\nIf we do it, if we just install,\nif Don just went right now and\n\n140\n00:05:51,890 --> 00:05:57,550\nran dcpromo on that 2012 It would\nactually do a lot of this stuff for us.\n\n141\n00:05:57,550 --> 00:06:00,620\nBut, you do have to be an Enterprise admin\n\n142\n00:06:00,620 --> 00:06:02,630\nto start doing what we're\ngetting ready to do.\n\n143\n00:06:02,630 --> 00:06:04,500\nSo you might not be.\n\n144\n00:06:04,500 --> 00:06:09,480\nYou might be the one that's getting ready\nto make that new domain controller but\n\n145\n00:06:09,480 --> 00:06:12,740\nyou need somebody else to go ahead prepare\nthe forest, prepare the schema, and\n\n146\n00:06:12,740 --> 00:06:13,810\nget everything set up, so.\n\n147\n00:06:13,810 --> 00:06:16,620\nWe'll show you how to do it\nindependently of the actual Active\n\n148\n00:06:16,620 --> 00:06:17,700\ndirectory installation.\n\n149\n00:06:17,700 --> 00:06:21,060\n>> Yeah, and Mike you mentioned, every\ntime a new operating system comes out,\n\n150\n00:06:21,060 --> 00:06:25,930\nit's even got worse, lately,\nbecause it's when an R2 comes out, also.\n\n151\n00:06:25,930 --> 00:06:28,440\n>> So when 2008 R2 came out, and\n\n152\n00:06:28,440 --> 00:06:32,030\nnow when 2012 R2 came out,\n>> You actually have to get your domain,\n\n153\n00:06:32,030 --> 00:06:34,750\nand get your forest ready\nto receive that R2 domain\n\n154\n00:06:34,750 --> 00:06:36,300\ncontroller before you bring it on.\n\n155\n00:06:36,300 --> 00:06:40,060\nAnd so, we're going to go through\nthis from the angle of upgrading\n\n156\n00:06:40,060 --> 00:06:43,210\nfrom 2008 R2 going to 2012.\n\n157\n00:06:43,210 --> 00:06:44,205\nRight or 2012 R2.\n\n158\n00:06:44,205 --> 00:06:46,212\n>> [CROSSTALK]\n>> but this would be the same thing if\n\n159\n00:06:46,212 --> 00:06:48,810\nwe were going from 2012 to 2012 R2.\n\n160\n00:06:48,810 --> 00:06:49,450\n>> Yeah.\n\n161\n00:06:49,450 --> 00:06:51,530\n>> refueled going from 2000 8 to 2008 R2.\n\n162\n00:06:51,530 --> 00:06:56,050\nThis process has been in place\nsince Windows server 2003.\n\n163\n00:06:56,050 --> 00:06:57,100\n>> Windows server 2003, yeah.\n\n164\n00:06:57,100 --> 00:06:59,500\n>> Yeah, so it's been around for\na long time but\n\n165\n00:06:59,500 --> 00:07:01,410\nyou got to go through this\nprocess to get the system ready.\n\n166\n00:07:01,410 --> 00:07:03,720\nBut if you don't,\nyou get all sorts of errors and\n\n167\n00:07:03,720 --> 00:07:07,310\nit doesn't necessarily stop you,\nit just wreaks havoc on your domain.\n\n168\n00:07:07,310 --> 00:07:09,610\n>> Yes. [LAUGH] >> So you definitely\nhave to make sure you take steps and\n\n169\n00:07:09,610 --> 00:07:11,750\nthey've got a lot better\nabout that on newer ones.\n\n170\n00:07:11,750 --> 00:07:14,610\nSo if you forget to do it,\nMike was mentioning this before the show.\n\n171\n00:07:14,610 --> 00:07:16,780\n>> Right.\n>> If you forget to do these prep steps\n\n172\n00:07:16,780 --> 00:07:19,730\nduring the initial wizard when you run it,\nit will try and do them for you.\n\n173\n00:07:19,730 --> 00:07:20,340\n>> Yeah.\n\n174\n00:07:20,340 --> 00:07:23,960\nBut you'll see when we do them,\nyou have to have certain permissions.\n\n175\n00:07:23,960 --> 00:07:26,540\nAnd the person who's promoting\na domain controller might not have\n\n176\n00:07:26,540 --> 00:07:27,140\nthose permissions.\n\n177\n00:07:27,140 --> 00:07:30,270\nSo the automated steps don't always work,\nso we want to\n\n178\n00:07:30,270 --> 00:07:33,740\nmake sure we take the proper precautions,\ntake the proper steps beforehand.\n\n179\n00:07:33,740 --> 00:07:38,460\nAnd step number one with any\nupgrade is always back up.\n\n180\n00:07:38,460 --> 00:07:40,205\n>> Yes. [LAUGH] >> Back up your systems.\n\n181\n00:07:40,205 --> 00:07:41,700\nBecause there's no way to undo this.\n\n182\n00:07:41,700 --> 00:07:45,665\nWhen we start making changes, so Mike\nmentioned there's all these new options.\n\n183\n00:07:45,665 --> 00:07:46,360\nRight?\n\n184\n00:07:46,360 --> 00:07:50,659\nWell, inside of the active directory\nyou've got your various classes,\n\n185\n00:07:50,659 --> 00:07:53,518\nyour objects and\ntheir associated attributes.\n\n186\n00:07:53,518 --> 00:07:57,655\nAnd it's those attributes that we're\nmodifying, we're adding new attributes.\n\n187\n00:07:57,655 --> 00:08:00,279\nAnd to do that,\nwe have to modify Our schema.\n\n188\n00:08:00,279 --> 00:08:01,192\n>> Right.\n>> Well,\n\n189\n00:08:01,192 --> 00:08:04,853\nyour active directory forest\nhas one schema, and that's it.\n\n190\n00:08:04,853 --> 00:08:06,990\nAnd when you modify it, it modifies it for\n\n191\n00:08:06,990 --> 00:08:09,506\nevery domain controller\nin your entire forest.\n\n192\n00:08:09,506 --> 00:08:11,800\nWhether you have one domain or\na thousand domains.\n\n193\n00:08:11,800 --> 00:08:14,220\nThey all get modified, and\nthere's no undo button.\n\n194\n00:08:14,220 --> 00:08:14,920\n>> Nope.\n\n195\n00:08:14,920 --> 00:08:18,660\n>> You can't delete\nattributes out of the schema.\n\n196\n00:08:18,660 --> 00:08:20,155\nOnce it's been created, you can disable.\n\n197\n00:08:20,155 --> 00:08:20,980\nYou can deactivate them.\n\n198\n00:08:20,980 --> 00:08:21,690\n>> Yeah, but you can't.\n\n199\n00:08:21,690 --> 00:08:23,399\nNow they have introduced\na way to roll back.\n\n200\n00:08:23,399 --> 00:08:25,115\nI don't know if you've seen this,\n\n201\n00:08:25,115 --> 00:08:28,214\nto go from like 2012 R2 back\nto 2012 functional level.\n\n202\n00:08:28,214 --> 00:08:32,615\nI'll tell you that I don't think\nI would ever wanna try it again.\n\n203\n00:08:32,615 --> 00:08:36,700\nAnd it's only if, so\nthis is something brand new.\n\n204\n00:08:36,700 --> 00:08:38,267\nYou couldn't do it back in\nthe past like Don was saying.\n\n205\n00:08:38,267 --> 00:08:41,847\nOnce you erased your functional level\nthat was it, there was no going back.\n\n206\n00:08:41,847 --> 00:08:47,247\nYou can, with 2012 R2 you can\nroll back to 2012 if you haven't\n\n207\n00:08:47,247 --> 00:08:52,648\ntaken advantage of any of the new\nfeatures that 2012 R2 rolled in.\n\n208\n00:08:52,648 --> 00:08:55,155\nIf you've already upgraded your schema,\nand\n\n209\n00:08:55,155 --> 00:08:57,350\nthen you made some of those new objects.\n\n210\n00:08:57,350 --> 00:08:59,810\nOr whatever that 2012 R2\nis gonna bring in for\n\n211\n00:08:59,810 --> 00:09:01,600\nus, you're not gonna be able to go back.\n\n212\n00:09:01,600 --> 00:09:03,900\nBecause now you've already taken\nadvantage of those new definitions.\n\n213\n00:09:03,900 --> 00:09:06,580\nBut honestly, in the end,\nMicrosoft doesn't recommend it.\n\n214\n00:09:06,580 --> 00:09:08,400\nAnd it's not something\nyou ever should rely on.\n\n215\n00:09:08,400 --> 00:09:09,964\nYou need to back your systems up, and\n\n216\n00:09:09,964 --> 00:09:12,340\nthat way if something goes\nwrong you can just roll back.\n\n217\n00:09:12,340 --> 00:09:13,286\n>> Yeah.\n\n218\n00:09:13,286 --> 00:09:14,883\n>> Because it's not\ngonna be a pretty thing.\n\n219\n00:09:14,883 --> 00:09:17,360\n[LAUGH]\n>> So the tool that Mike and\n\n220\n00:09:17,360 --> 00:09:21,940\nI have been talking about is\na little tool called Adprep, and\n\n221\n00:09:21,940 --> 00:09:24,250\nit's Active Directory prep or preparation.\n\n222\n00:09:24,250 --> 00:09:26,378\n>> Right.\n>> And what it does is it prepares, well,\n\n223\n00:09:26,378 --> 00:09:28,331\nshouldn't use the words in the definition.\n\n224\n00:09:28,331 --> 00:09:31,443\n>> [LAUGH] Just turn around the words,\nyeah.\n\n225\n00:09:31,443 --> 00:09:33,892\n>> It goes through and\nit modifies the active directory.\n\n226\n00:09:33,892 --> 00:09:37,566\nTo add in the these new attributes,\nthese new objects and classes,\n\n227\n00:09:37,566 --> 00:09:41,061\nto add these new definitions\ninside of your schema, all right?\n\n228\n00:09:41,061 --> 00:09:46,127\nSo we've got a nice little tool that we\nuse to run it, it's included on the DVD.\n\n229\n00:09:46,127 --> 00:09:48,145\nNow this is important.\n\n230\n00:09:48,145 --> 00:09:51,930\nAdprep, I mentioned that the first\ntime it was out there was in\n\n231\n00:09:51,930 --> 00:09:54,680\nWindows server 2003, right?\n\n232\n00:09:54,680 --> 00:09:59,380\nThe Windows, what was it Windows 2000\nserver right, the names switched around.\n\n233\n00:09:59,380 --> 00:10:01,570\nWindows 2000 server that was\nthe first active directory so\n\n234\n00:10:01,570 --> 00:10:03,701\nthere was no Adprep, you had to make it.\n\n235\n00:10:03,701 --> 00:10:05,177\n>> [LAUGH]\n>> Yeah, but\n\n236\n00:10:05,177 --> 00:10:08,470\nstarting with Windows server 2003\nyou had this Adprep utility.\n\n237\n00:10:08,470 --> 00:10:11,580\nAnd so every time a new version of\nthe OS comes out, be it a major or\n\n238\n00:10:11,580 --> 00:10:15,340\na minor release,\na new version of Adprep comes out.\n\n239\n00:10:15,340 --> 00:10:20,160\nSo if you're about to install your first\nWindows Server 2012 domain control.\n\n240\n00:10:20,160 --> 00:10:23,550\nOr 2012 R2 domain controller,\nyou need to get the install DVD for\n\n241\n00:10:23,550 --> 00:10:25,690\nthat new version of the OS.\n\n242\n00:10:25,690 --> 00:10:26,440\n>> Right.\n\n243\n00:10:26,440 --> 00:10:29,421\n>> And on that disc,\nyou'll find the Adprep utility.\n\n244\n00:10:29,421 --> 00:10:31,668\nNow you can take that utility.\n\n245\n00:10:31,668 --> 00:10:32,889\nAnd this where it gets a little odd,\n\n246\n00:10:32,889 --> 00:10:35,267\ncuz you might think well all right\nI'm gonna run it on the new server.\n\n247\n00:10:35,267 --> 00:10:35,923\n>> Right.\n\n248\n00:10:35,923 --> 00:10:38,308\n>> But you don't,\nyou run it on the old server.\n\n249\n00:10:38,308 --> 00:10:41,844\nYou go to your 2008 domain controller,\nand you run it there.\n\n250\n00:10:41,844 --> 00:10:46,775\nYou want it to run there so it can modify\nyour active directory as it's in place,\n\n251\n00:10:46,775 --> 00:10:49,610\nand then you bring up your new DC.\n\n252\n00:10:49,610 --> 00:10:51,440\nSo that's kind of the steps\nthat we have to go through.\n\n253\n00:10:51,440 --> 00:10:53,391\nNow, when we talk about\nthese modifications,\n\n254\n00:10:53,391 --> 00:10:55,256\nwe're talking about modifying the schema.\n\n255\n00:10:55,256 --> 00:10:57,199\nAnd if you're a little rusty on that,\n\n256\n00:10:57,199 --> 00:10:59,707\ncuz I know we covered it\na number of episodes ago.\n\n257\n00:10:59,707 --> 00:11:00,769\n>> Yeah, 411.\n\n258\n00:11:00,769 --> 00:11:03,070\n>> That schema, you've only got one.\n\n259\n00:11:03,070 --> 00:11:05,030\nOne schema for the entire forest.\n\n260\n00:11:05,030 --> 00:11:06,220\nAnd so somewhere in your forest.\n\n261\n00:11:06,220 --> 00:11:07,027\n>> Somewhere.\n\n262\n00:11:07,027 --> 00:11:09,216\n>> [LAUGH] There's probably\nsome song about that.\n\n263\n00:11:09,216 --> 00:11:13,987\nThere's a domain controller\nthat is your schema master.\n\n264\n00:11:13,987 --> 00:11:18,768\nRemember our five FSMO roles, our\nFlexible Single Master Operation roles?\n\n265\n00:11:18,768 --> 00:11:20,434\n>> One of the many names they give it.\n\n266\n00:11:20,434 --> 00:11:21,774\n>> Yeah, how I remember that stuff.\n\n267\n00:11:21,774 --> 00:11:24,040\nBut you do have a schema master.\n\n268\n00:11:24,040 --> 00:11:27,700\nAnd the schema master is the only\nperson allowed to change the schema.\n\n269\n00:11:27,700 --> 00:11:30,460\nNow, you could run the Adprep\nfrom any domain controller, but\n\n270\n00:11:30,460 --> 00:11:33,290\nit's gonna have to reach\nout to the schema master.\n\n271\n00:11:33,290 --> 00:11:35,670\nSo I typically run it\nfrom the schema master.\n\n272\n00:11:35,670 --> 00:11:36,960\n>> Figure out which one it is and\ngo ahead and run it there.\n\n273\n00:11:36,960 --> 00:11:39,737\nThat way if you get network connectivity\nissues that's not gonna hold you up.\n\n274\n00:11:39,737 --> 00:11:42,135\n>> Mm-hm, now I've only got one DC, but\n\n275\n00:11:42,135 --> 00:11:46,144\nif I didn't know which one it was\nthere's an easy way to find out.\n\n276\n00:11:46,144 --> 00:11:50,682\nThe schema management utility\nis not actually present by\n\n277\n00:11:50,682 --> 00:11:53,440\ndefault in 2008 or 2012.\n\n278\n00:11:53,440 --> 00:11:54,760\nIt's not there.\n\n279\n00:11:54,760 --> 00:11:55,855\n>> And they do that on purpose, right?\n\n280\n00:11:55,855 --> 00:11:57,056\nCuz the schema is very protective.\n\n281\n00:11:57,056 --> 00:11:59,878\nThey don't want someday accidentally going\nin there and making changes to schema.\n\n282\n00:11:59,878 --> 00:12:02,322\nSo they don't even give you the console.\n\n283\n00:12:02,322 --> 00:12:03,303\nYou've gotta build your own.\n\n284\n00:12:03,303 --> 00:12:05,387\nAnd you've got to register the snap\nin before you can build it.\n\n285\n00:12:05,387 --> 00:12:08,498\n>> Yeah, the dynamic link\nlibraries are there for it.\n\n286\n00:12:08,498 --> 00:12:11,488\nBut they're just not registered,\nso you don't see them.\n\n287\n00:12:11,488 --> 00:12:13,415\nSo if I were to open up an MMC.\n\n288\n00:12:13,415 --> 00:12:15,580\nSo just the Microsoft Management Console.\n\n289\n00:12:15,580 --> 00:12:19,173\nWhen I open up one of those,\nif I go to File and\n\n290\n00:12:19,173 --> 00:12:24,241\nAdd/Remove Snap-in, and\nI'm on my 2008 server here.\n\n291\n00:12:24,241 --> 00:12:28,341\nBut if I go in here, I can see Active\nDirectory domains and trust, sites and\n\n292\n00:12:28,341 --> 00:12:30,640\nservices, users and computers.\n\n293\n00:12:30,640 --> 00:12:34,720\nI do not see Active Directory schema,\nit's just not in the list, all right?\n\n294\n00:12:34,720 --> 00:12:39,760\nSo what I need to do is,\nwhoops, close out of that.\n\n295\n00:12:39,760 --> 00:12:40,920\nThere we go.\n\n296\n00:12:40,920 --> 00:12:42,970\nAnd I need to run a little command.\n\n297\n00:12:42,970 --> 00:12:46,937\nNow, I do need to be a admin to be able\nto do this, or it's not gonna work.\n\n298\n00:12:46,937 --> 00:12:50,548\nSo this run prompt really, we used to be\nable to use it when we didn't have user\n\n299\n00:12:50,548 --> 00:12:52,340\naccess, or user [CROSSTALK] control.\n\n300\n00:12:52,340 --> 00:12:53,721\n>> [LAUGH] Right, yeah.\n\n301\n00:12:53,721 --> 00:12:58,281\n>> So what I'm gonna do is I'm gonna open\nup a command prompt as an administrator,\n\n302\n00:12:58,281 --> 00:12:58,970\nall right?\n\n303\n00:12:58,970 --> 00:13:00,210\nAnd let me bump the font up so\n\n304\n00:13:00,210 --> 00:13:03,350\neverybody will be able to see\nthe command that I'm gonna type.\n\n305\n00:13:03,350 --> 00:13:08,965\nAnd what I'm gonna run is I'm gonna use\nregister service, it's R-E-G-S-V-R-32.\n\n306\n00:13:10,710 --> 00:13:16,536\nAnd, I know that sounds odd being\n32-bit in a world of 64-bit machines.\n\n307\n00:13:16,536 --> 00:13:17,759\nBut, basically,\n\n308\n00:13:17,759 --> 00:13:22,580\nregsvr32 allows you to register\na dynamic link library with the system.\n\n309\n00:13:22,580 --> 00:13:25,445\nAnd, the library I want is,\n\n310\n00:13:25,445 --> 00:13:30,570\nschmmgmt.dll.\n\n311\n00:13:30,570 --> 00:13:36,209\nSo the command is regsvr32\nschmmgmt.dll that's\n\n312\n00:13:36,209 --> 00:13:41,660\nregistered service schema management,\nright?\n\n313\n00:13:41,660 --> 00:13:43,860\nThat's what we're running and\nso that's gonna register.\n\n314\n00:13:43,860 --> 00:13:46,200\nI'll see that it's succeeded, right?\n\n315\n00:13:46,200 --> 00:13:48,840\nIf I had just tried that\nthrough the run prompt,\n\n316\n00:13:48,840 --> 00:13:50,660\nuser account control would kick in and\nstop it.\n\n317\n00:13:50,660 --> 00:13:53,050\nIt wouldn't work, so\nthat's why I didn't run it from there.\n\n318\n00:13:53,050 --> 00:13:54,173\nYou used to be able to do that.\n\n319\n00:13:54,173 --> 00:13:57,068\nNow, [CROSSTALK] yeah,\nyou're [LAUGH] always getting in the way,\n\n320\n00:13:57,068 --> 00:13:58,128\nalways protecting us.\n\n321\n00:13:58,128 --> 00:14:04,253\nSo, now if I go into the MMC, if I go back\nin here to file, and Add/Remove Snap-in.\n\n322\n00:14:04,253 --> 00:14:09,320\nNow I'll see a new entry in here for\nactive directory schema.\n\n323\n00:14:09,320 --> 00:14:10,570\nAnd we didn't see that before.\n\n324\n00:14:10,570 --> 00:14:12,750\nThat's what we just registered\nto make that present.\n\n325\n00:14:13,795 --> 00:14:17,220\nAnd before I forget I'm gonna\nput that in our show notes.\n\n326\n00:14:17,220 --> 00:14:23,610\nJust so we have that cuz\nit's a hard one to remember.\n\n327\n00:14:24,800 --> 00:14:27,298\n>> It is.\nI always miss one of\n\n328\n00:14:27,298 --> 00:14:30,240\nthe Schema Management.\n\n329\n00:14:30,240 --> 00:14:32,250\n>> All right, so now that it's there,\nthough, I can go to File,\n\n330\n00:14:32,250 --> 00:14:33,730\nand Add/Remove Snap-in.\n\n331\n00:14:33,730 --> 00:14:37,450\nAnd I can find Schema Management,\nand I can add that in.\n\n332\n00:14:37,450 --> 00:14:41,080\nAnd the whole reason I'm doing it is\nnot because I wanna view my schema.\n\n333\n00:14:41,080 --> 00:14:44,360\nI just want to be able to come in here and\nchoose operations master.\n\n334\n00:14:44,360 --> 00:14:46,750\nI can right-click on\nActive Directory Schema.\n\n335\n00:14:46,750 --> 00:14:48,460\nAnd choose Operations Master and\n\n336\n00:14:48,460 --> 00:14:52,520\nit will tell me who the current\nFSMO role holder is.\n\n337\n00:14:52,520 --> 00:14:53,600\nAnd it's this server.\n\n338\n00:14:53,600 --> 00:14:54,510\n>> Nice.\n\n339\n00:14:54,510 --> 00:14:58,050\n>> So while we don't have to\nrun Adprep from this server\n\n340\n00:14:58,050 --> 00:14:59,080\nI prefer to do it this way.\n\n341\n00:14:59,080 --> 00:15:01,870\nThis is the way where you don't have to\nworry about network failures happening\n\n342\n00:15:01,870 --> 00:15:02,450\nmid upgrade.\n\n343\n00:15:02,450 --> 00:15:04,250\nThat would be catastrophic, right?\n\n344\n00:15:04,250 --> 00:15:06,590\nSo this way we run it right from the box,\nwe know we're in good shape.\n\n345\n00:15:08,232 --> 00:15:11,340\n>> And I think we already mentioned too,\nwe're gonna be the Enterprise Admin for\n\n346\n00:15:11,340 --> 00:15:12,230\nthis.\n\n347\n00:15:12,230 --> 00:15:12,980\n>> I own.\n\n348\n00:15:12,980 --> 00:15:13,648\n>> Did we say that?\n\n349\n00:15:13,648 --> 00:15:14,885\n>> I left out two things, right?\n\n350\n00:15:14,885 --> 00:15:17,670\n>> Yep.\n>> Shoot, thank you Mike.\n\n351\n00:15:17,670 --> 00:15:19,870\nThe one is Enterprise Admin, right?\n\n352\n00:15:19,870 --> 00:15:23,520\nThe schema, you've got one for\nthe entire forest.\n\n353\n00:15:23,520 --> 00:15:26,230\nSo a domain admin account\nis not good enough, right?\n\n354\n00:15:26,230 --> 00:15:28,730\n>> That can make changes that would\naffect other domains which a domain\n\n355\n00:15:28,730 --> 00:15:29,310\nadmin can't do.\n\n356\n00:15:29,310 --> 00:15:31,880\nSo, gotta be in\nthe Enterprise Admins Group.\n\n357\n00:15:31,880 --> 00:15:33,860\n>> Yep, and the other piece,\nyou remember the other piece?\n\n358\n00:15:33,860 --> 00:15:36,490\n>> Yeah, you gotta be in the Schema Admins\nGroup cuz we're gonna make changes.\n\n359\n00:15:36,490 --> 00:15:39,370\nThe schema again, like we said,\nthey hid the console from us.\n\n360\n00:15:39,370 --> 00:15:42,423\nThey also, an enterprise admin cannot\nmake changes to the schema which is\n\n361\n00:15:42,423 --> 00:15:43,120\nkinda strange.\n\n362\n00:15:43,120 --> 00:15:45,538\nBut you have to be in\nthat Schema Admins Group.\n\n363\n00:15:45,538 --> 00:15:48,668\nAs well as the Enterprise Admins Group\nto make changes to the schema.\n\n364\n00:15:48,668 --> 00:15:52,594\nSo in order to run these commands\nyou would need to be in both [COUGH]\n\n365\n00:15:52,594 --> 00:15:53,474\nwhich is why.\n\n366\n00:15:53,474 --> 00:15:57,088\nWe were saying earlier you might be in\nthe position where you're gonna be doing\n\n367\n00:15:57,088 --> 00:15:59,784\nthe actual work of raising\nthat domain functional level.\n\n368\n00:15:59,784 --> 00:16:03,592\nBut you might not have the authority\nto get it ready to happen.\n\n369\n00:16:03,592 --> 00:16:07,280\nSo you might have to have somebody else\ngo in to do the adprep/forsestprep and\n\n370\n00:16:07,280 --> 00:16:08,200\nthings like that.\n\n371\n00:16:08,200 --> 00:16:12,190\n>> Now by default the schema admins group,\nit's empty.\n\n372\n00:16:12,190 --> 00:16:13,310\nThere's nobody in it.\n\n373\n00:16:13,310 --> 00:16:16,740\nSo by default nobody's\nallowed to modify the schema.\n\n374\n00:16:16,740 --> 00:16:20,970\nThe enterprise admins have permission\nto put people in that group and\n\n375\n00:16:20,970 --> 00:16:21,980\ntake them out.\n\n376\n00:16:21,980 --> 00:16:25,680\nAnd so Microsoft's recommended procedure\nis, when you want to make a change to\n\n377\n00:16:25,680 --> 00:16:32,280\nthe schema, you get a enterprise admin\nto move you into the schema admin group,\n\n378\n00:16:32,280 --> 00:16:35,440\nyou make your change, and\nthen take you out of the group.\n\n379\n00:16:35,440 --> 00:16:36,640\nNobody should stay in there for\n\n380\n00:16:36,640 --> 00:16:39,419\nany long amount of time, cuz you don't\nwant to accidentally modify the schema.\n\n381\n00:16:40,530 --> 00:16:41,080\nAll right.\n\n382\n00:16:41,080 --> 00:16:42,480\nSo I'm gonna double check that, right,\n\n383\n00:16:42,480 --> 00:16:45,660\nbecause I don't think I\nput myself in that group.\n\n384\n00:16:45,660 --> 00:16:48,660\nSo let me go into my active\ndirectory users and computers.\n\n385\n00:16:48,660 --> 00:16:50,440\nI'm gonna hunt down my user account.\n\n386\n00:16:50,440 --> 00:16:53,180\nAnd we don't have many users so\nI should be able to find it pretty quick.\n\n387\n00:16:53,180 --> 00:16:54,550\nThere we go.\n\n388\n00:16:54,550 --> 00:16:57,770\nAnd if I take a look at my member of tab,\nif I can find it.\n\n389\n00:16:57,770 --> 00:16:58,650\nThere we go.\n\n390\n00:16:58,650 --> 00:16:59,950\nI am in domain admins.\n\n391\n00:16:59,950 --> 00:17:01,350\nThat doesn't help me.\n\n392\n00:17:01,350 --> 00:17:03,410\n>> Nope.\n>> I am an enterprise admin which is good.\n\n393\n00:17:03,410 --> 00:17:04,600\n>> That's half the battle.\n\n394\n00:17:04,600 --> 00:17:09,400\n>> And so now I just need to add\nmyself to the schema admins group.\n\n395\n00:17:09,400 --> 00:17:11,280\nAnd now I'll be able to make changes.\n\n396\n00:17:12,405 --> 00:17:15,085\nBut, remember that when you change your\n\n397\n00:17:15,085 --> 00:17:18,865\ngroup membership your security\ntoken does not update right away.\n\n398\n00:17:18,865 --> 00:17:20,985\nYou've got to log out and log back in.\n\n399\n00:17:20,985 --> 00:17:23,135\nSo I'm going to need to log\nout before this takes effect.\n\n400\n00:17:23,135 --> 00:17:25,090\nSo let me do that real quick.\n\n401\n00:17:25,090 --> 00:17:26,550\n>> That'll give them a new access token.\n\n402\n00:17:26,550 --> 00:17:29,580\nThat's gonna include that\nschema admin's group and\n\n403\n00:17:29,580 --> 00:17:30,940\nthen we should be able\nto make those changes.\n\n404\n00:17:32,010 --> 00:17:32,670\n>> Should.\n\n405\n00:17:32,670 --> 00:17:34,660\n>> Should.\n>> We gotta use our IT operator there.\n\n406\n00:17:34,660 --> 00:17:36,858\nAlways use the word should.\n\n407\n00:17:36,858 --> 00:17:37,920\n[LAUGH]\n>> [LAUGH]\n\n408\n00:17:37,920 --> 00:17:39,460\n>> All right, so here I am.\n\n409\n00:17:39,460 --> 00:17:43,230\nNow I should be well-equipped\nto make changes to this DC.\n\n410\n00:17:43,230 --> 00:17:45,830\nNow, this is Windows server 2008 R2.\n\n411\n00:17:45,830 --> 00:17:46,900\nThis is not 2012.\n\n412\n00:17:46,900 --> 00:17:49,880\nBut, because this is pivotal\nto the upgrade you might see\n\n413\n00:17:49,880 --> 00:17:50,570\nthis on one of the exams.\n\n414\n00:17:50,570 --> 00:17:53,470\nIt's one of the few times you might\nsee the older server creep up.\n\n415\n00:17:53,470 --> 00:17:54,170\nAll right.\n\n416\n00:17:54,170 --> 00:17:54,950\nSo what have I done?\n\n417\n00:17:54,950 --> 00:17:58,740\nWell, I took the Windows\nserver 2012 R2 disc.\n\n418\n00:17:58,740 --> 00:18:01,740\nAnd I just popped it into my 2008 machine.\n\n419\n00:18:01,740 --> 00:18:07,080\nNow one thing to be aware of, in 2012 R2,\nwe're almost always doing 64-bit,\n\n420\n00:18:07,080 --> 00:18:12,980\nbut back in the 2008 days, you were just\nas likely to go 32-bit as you were 64-bit.\n\n421\n00:18:12,980 --> 00:18:17,260\nSo if you've got a 32-bit domain\ncontroller, hopefully you don't, but\n\n422\n00:18:17,260 --> 00:18:21,570\nif you do,\nthe Adprep on Windows Server 2012 R2,\n\n423\n00:18:21,570 --> 00:18:25,350\nif you've got a 64 bit disk,\nis this 64 bit executable.\n\n424\n00:18:25,350 --> 00:18:29,220\nSo you may need to go to Microsoft's\nwebsite and download a eval copy of\n\n425\n00:18:29,220 --> 00:18:34,170\nWindow's server 2012R2 32 bit,\nnow this is where it gets confusing.\n\n426\n00:18:34,170 --> 00:18:37,600\nYou'll hear a lot of people say that there\nisn't a 32 bit version of Window's server.\n\n427\n00:18:37,600 --> 00:18:38,860\n>> Window's 64 only.\n\n428\n00:18:38,860 --> 00:18:41,450\nAnd as far as Microsoft is concerned and\n\n429\n00:18:41,450 --> 00:18:43,250\nas far as their phone\nsupport is concerned.\n\n430\n00:18:43,250 --> 00:18:45,340\nYes there is just a 64 bit.\n\n431\n00:18:45,340 --> 00:18:47,740\nBut they have a 32 bit version also.\n\n432\n00:18:47,740 --> 00:18:49,650\nThey just refuse to support it.\n\n433\n00:18:49,650 --> 00:18:50,750\nAnd so it is there.\n\n434\n00:18:50,750 --> 00:18:53,230\nYou can download an eval copy\nfrom Microsoft's website.\n\n435\n00:18:53,230 --> 00:18:55,270\nYou just can't call them for help, and\n\n436\n00:18:55,270 --> 00:18:59,700\nthe only time that I've ever downloaded it\nis when I needed that ADP prep utility.\n\n437\n00:18:59,700 --> 00:19:01,260\n>> Right.\n[LAUGH] >> Frustrating to have to\n\n438\n00:19:01,260 --> 00:19:02,610\ndownload 4 gigs of crap for a 200K file.\n\n439\n00:19:02,610 --> 00:19:03,753\n>> Just to get that tool, yeah.\n\n440\n00:19:03,753 --> 00:19:06,430\n[LAUGH]\n>> But sometimes that what you have to do.\n\n441\n00:19:06,430 --> 00:19:09,940\nSo hopefully you're all 64 bit, it's not\nas big as a problem as it used to be.\n\n442\n00:19:09,940 --> 00:19:14,470\nAll right, so on this box, I'm gonna go\nahead and fire up a command prompt, and\n\n443\n00:19:14,470 --> 00:19:16,260\nI'll just run it as an administrator.\n\n444\n00:19:16,260 --> 00:19:17,170\nGotta make sure we do that.\n\n445\n00:19:19,060 --> 00:19:21,890\nAnd then I need to find\nADPrep on the disk.\n\n446\n00:19:21,890 --> 00:19:23,100\nAnd Mike, do you remember where it is?\n\n447\n00:19:23,100 --> 00:19:25,120\nIs it sources?\n>> Sources, it's in the Tools folder.\n\n448\n00:19:25,120 --> 00:19:27,110\nBut I could be mistaken.\n\n449\n00:19:27,110 --> 00:19:28,540\n>> Let's see, it's, oh, support.\n\n450\n00:19:28,540 --> 00:19:32,698\n>> Support\n>> Wow,\n\n451\n00:19:32,698 --> 00:19:34,510\nshoot, maybe I don't remember where it is.\n\n452\n00:19:34,510 --> 00:19:35,850\nOh, there it is, ADPrep.\n\n453\n00:19:35,850 --> 00:19:37,930\nSo here we go.\n\n454\n00:19:37,930 --> 00:19:41,395\nIt's D colon, that's just my DVD drive.\n\n455\n00:19:41,395 --> 00:19:43,190\nD:/Support/ADPrep.\n\n456\n00:19:43,190 --> 00:19:47,120\nAnd if I take a look in there,\nyou'll see a bunch of interesting stuff.\n\n457\n00:19:47,120 --> 00:19:49,750\nLet's paginate that real quick.\n\n458\n00:19:49,750 --> 00:19:52,780\nYou'll see a bunch of\ninteresting stuff in here and\n\n459\n00:19:52,780 --> 00:19:54,920\nlet me explain what most of it is.\n\n460\n00:19:54,920 --> 00:19:59,130\nYou'll see adprep.exe and\nadprep.dll right?\n\n461\n00:19:59,130 --> 00:20:00,870\nThose are really the two\nfiles that we need.\n\n462\n00:20:00,870 --> 00:20:04,020\nThat's the actual utility that's going\nto prepare our Active Directory.\n\n463\n00:20:05,080 --> 00:20:11,360\nBut, you'll notice after that, all\nthese LDF files, right, what are those?\n\n464\n00:20:11,360 --> 00:20:13,010\nWell-\n>> Those are our new objects.\n\n465\n00:20:13,010 --> 00:20:15,140\n>> Yeah,\nthat's all of our new attributes, and\n\n466\n00:20:15,140 --> 00:20:16,970\nthings that are being added to the schema.\n\n467\n00:20:16,970 --> 00:20:20,180\nSo it's objects, attributes, classes-\n>> Yeah.\n\n468\n00:20:20,180 --> 00:20:21,130\nThere is a fourth one, isn't there?\n\n469\n00:20:21,130 --> 00:20:21,850\nWhat am I leaving out?\n\n470\n00:20:21,850 --> 00:20:23,160\n>> I don't know.\nObjects, classes,\n\n471\n00:20:23,160 --> 00:20:23,900\nactive directory, I don't know.\n\n472\n00:20:23,900 --> 00:20:24,450\nI think that's it.\n\n473\n00:20:24,450 --> 00:20:25,872\n>> I mean that is it.\n\n474\n00:20:25,872 --> 00:20:28,370\nWhatever.\n>> There is a fourth one.\n\n475\n00:20:28,370 --> 00:20:30,700\n>> But all that stuff is\ndefined in these little files.\n\n476\n00:20:30,700 --> 00:20:34,440\nSo, it's really doing a bunch\nof active directory imports.\n\n477\n00:20:34,440 --> 00:20:37,640\nYou might remember the L-diff, DE,\ncommand that we have added another show.\n\n478\n00:20:37,640 --> 00:20:40,000\n>> Yeah.\n>> For barking coating and modify users.\n\n479\n00:20:40,000 --> 00:20:41,280\nThat's what this is doing.\n\n480\n00:20:41,280 --> 00:20:44,750\nAnd so they've already defined all\nthe different changes we need to make.\n\n481\n00:20:44,750 --> 00:20:45,807\nWhat's a smaller one?\n\n482\n00:20:45,807 --> 00:20:47,943\nLet's do like SCH67.\n\n483\n00:20:50,195 --> 00:20:53,928\nAll right, so if you look, you'll see\nhere it's going through, and it's doing,\n\n484\n00:20:53,928 --> 00:20:54,780\nschema modified.\n\n485\n00:20:54,780 --> 00:20:58,900\nSystem must contain, and then it's doing\nvarious values to indicate something\n\n486\n00:20:58,900 --> 00:21:03,240\nthat is creating or checking or verifying\nand then making some kind of a change.\n\n487\n00:21:03,240 --> 00:21:05,760\nSo each of these just\ndefining modifications.\n\n488\n00:21:05,760 --> 00:21:06,260\n>> Yeah.\n\n489\n00:21:07,700 --> 00:21:14,000\n>> Now if you're on adprep/?, it will give\nyou some good feedback on what to do.\n\n490\n00:21:14,000 --> 00:21:17,560\nAnd you'll get to see some of\nthe main Extensions that will run.\n\n491\n00:21:17,560 --> 00:21:21,330\nThese four right here are the big\nfour that we deal with, okay?\n\n492\n00:21:21,330 --> 00:21:23,570\nSo, let's run through each one, right?\n\n493\n00:21:23,570 --> 00:21:28,580\nThere are separate forest prep and\ndomain prep commands, right?\n\n494\n00:21:28,580 --> 00:21:32,970\nRemember that the forest affects\nthe forest, the entire thing, but\n\n495\n00:21:32,970 --> 00:21:35,560\na domain just affects\nan individual domain.\n\n496\n00:21:35,560 --> 00:21:39,720\nSo you might have one domain where you're\ndeploying 2012 domain controllers.\n\n497\n00:21:39,720 --> 00:21:41,950\nYou might have another\ndomain where you're not.\n\n498\n00:21:41,950 --> 00:21:43,560\nAnd so\nyou might want to modify that one yet.\n\n499\n00:21:43,560 --> 00:21:45,290\nYou might want to leave that one be.\n\n500\n00:21:45,290 --> 00:21:48,680\nSo we have domain prep just to\nmodify an individual domain.\n\n501\n00:21:48,680 --> 00:21:52,140\nBut regardless,\nwe have have to do the forest.\n\n502\n00:21:52,140 --> 00:21:53,690\nWe always to do the forest, so.\n\n503\n00:21:53,690 --> 00:21:55,660\n>> You don't have to do every\nsingle one of your domains.\n\n504\n00:21:55,660 --> 00:21:57,090\nYou just do the ones you wanna update.\n\n505\n00:21:57,090 --> 00:21:58,280\n>> Exactly, yup.\n\n506\n00:21:58,280 --> 00:22:02,000\nAnd so if we do Adprep/forestprep,\n\n507\n00:22:02,000 --> 00:22:05,070\nthat gets the forest ready,\nbut we're not done yet.\n\n508\n00:22:05,070 --> 00:22:07,080\nYou can't just do forest then stop.\n\n509\n00:22:07,080 --> 00:22:10,600\nYou then have to do domain prep,\nfor each and\n\n510\n00:22:10,600 --> 00:22:14,240\nevery domain that you anticipate\nrunning 2012 R2 domain controllers,\n\n511\n00:22:14,240 --> 00:22:16,720\nwhich should probably be all of them,\neventually.\n\n512\n00:22:16,720 --> 00:22:17,990\n>> And it's not something you have to do.\n\n513\n00:22:17,990 --> 00:22:20,900\nI mean, if you left one off,\nyou could go back and do it later.\n\n514\n00:22:20,900 --> 00:22:22,460\nSo you could upgrade one domain, and\n\n515\n00:22:22,460 --> 00:22:24,750\nthen maybe later on you get your\nyour licenses for your other domain.\n\n516\n00:22:24,750 --> 00:22:26,260\nAnd you want to upgrade it or\nsomething like that.\n\n517\n00:22:26,260 --> 00:22:28,180\nSo you can always go back and do it.\n\n518\n00:22:28,180 --> 00:22:29,990\nAs long as force prep\nhas been run initially.\n\n519\n00:22:29,990 --> 00:22:31,580\n>> You know I'm glad you\nmentioned that Mike.\n\n520\n00:22:31,580 --> 00:22:32,460\nI'm bad about this.\n\n521\n00:22:32,460 --> 00:22:37,000\nThere's a lot of times I might forget\nwhether I've done this already.\n\n522\n00:22:37,000 --> 00:22:39,760\nOr maybe it's the The first\ntime I've worked on a network.\n\n523\n00:22:39,760 --> 00:22:43,500\nSo I walk into the building and I don't\nknow, if someone has already done this or\n\n524\n00:22:43,500 --> 00:22:44,460\nnot, right?\n\n525\n00:22:44,460 --> 00:22:47,150\nWell you can run it again and\nit doesn't hurt anything.\n\n526\n00:22:47,150 --> 00:22:49,090\nIf the work has already been done.\n\n527\n00:22:49,090 --> 00:22:51,970\nIf somebody has already run\n80 prep slash forestprep and\n\n528\n00:22:51,970 --> 00:22:55,060\nyou run it a second time it\njust doesn't do anything.\n\n529\n00:22:55,060 --> 00:22:58,290\nSo if you're ever uncertain as to\nwhether someone's already done it,\n\n530\n00:22:58,290 --> 00:22:59,090\njust go ahead and do it again.\n\n531\n00:22:59,090 --> 00:23:00,260\nYou're better safe than sorry.\n\n532\n00:23:00,260 --> 00:23:01,910\n>> Better safe than sorry.\n\n533\n00:23:01,910 --> 00:23:04,390\n>> All right.\nYou'll also notice a slash domain prep,\n\n534\n00:23:04,390 --> 00:23:05,700\nthat'll get the domain ready.\n\n535\n00:23:05,700 --> 00:23:09,295\nSo normally, at a minimum,\nwe're going to run these two commands.\n\n536\n00:23:09,295 --> 00:23:11,380\nForestprep for the forest,\nand then domain prep for\n\n537\n00:23:11,380 --> 00:23:13,060\nwhichever domain it is we're modifying.\n\n538\n00:23:13,060 --> 00:23:16,510\nNow forestPrep,\nyou've got to be an Enterprise admin,\n\n539\n00:23:16,510 --> 00:23:17,970\nyou've got to be a schema admin.\n\n540\n00:23:17,970 --> 00:23:18,830\nAll right.\n\n541\n00:23:18,830 --> 00:23:20,140\nDomainPrep, though,\n\n542\n00:23:20,140 --> 00:23:24,370\nyou don't have to be an Enterprise admin\nbecause you're just modifying your domain.\n\n543\n00:23:24,370 --> 00:23:26,150\nSo you can be a domain admin for that one.\n\n544\n00:23:26,150 --> 00:23:31,820\nSo if you've got separation of roles,\nthen this really contributes to that.\n\n545\n00:23:31,820 --> 00:23:34,650\nBut if you're a small company,\nif you've got one domain and\n\n546\n00:23:34,650 --> 00:23:35,970\nyou're it, you're the IT guys.\n\n547\n00:23:35,970 --> 00:23:37,140\n>> You're all the hats, exactly.\n\n548\n00:23:37,140 --> 00:23:40,275\n>> You're just run command\nby followed by the next one.\n\n549\n00:23:40,275 --> 00:23:44,798\n[LAUGH] All right, group policies.\n\n550\n00:23:44,798 --> 00:23:49,295\nGroup policy's, their permissions\nchanged a little bit going from\n\n551\n00:23:49,295 --> 00:23:54,102\n2008 to 2008 R2, and so\nwhen we go to 2012 and 2012 R2,\n\n552\n00:23:54,102 --> 00:23:58,521\nif we're not certain if those\nchanges were made we can do /gpPrep,\n\n553\n00:23:58,521 --> 00:24:02,941\nalso to get the group policies\nready Again, if somebody's already\n\n554\n00:24:02,941 --> 00:24:07,544\ndone it doesn't hurt it to do it again,\nso it's not that big of a deal.\n\n555\n00:24:07,544 --> 00:24:11,660\nAll right, and the last one, /rodcPrep.\n\n556\n00:24:11,660 --> 00:24:15,100\nI'm pretty sure we already talked\nabout this one in 70-410 or 70-411.\n\n557\n00:24:15,100 --> 00:24:16,080\n>> 411 I think, yeah.\n\n558\n00:24:16,080 --> 00:24:20,510\n>> But if you're going to be using\nRead-only Domain Controllers,\n\n559\n00:24:20,510 --> 00:24:21,610\nyou've got to do this.\n\n560\n00:24:21,610 --> 00:24:24,600\nThis is what allows that,\nit enables that functionality.\n\n561\n00:24:24,600 --> 00:24:28,120\nIf you haven't run rodcPrep, you can't\nhave Read-only Domain Controllers.\n\n562\n00:24:28,120 --> 00:24:29,960\n>> Right.\n>> That's why I say we covered it another\n\n563\n00:24:29,960 --> 00:24:32,070\nshow, cuz we already covered\nRead-only Domain Controllers.\n\n564\n00:24:32,070 --> 00:24:34,580\n>> Right, yeah.\n>> So that's already kind of tackled.\n\n565\n00:24:34,580 --> 00:24:37,770\nBut again, if you're not sure if somebody\ndid it, go ahead and do it again.\n\n566\n00:24:37,770 --> 00:24:40,860\nIf you're not planning on using\nRead-Only Domain controllers,\n\n567\n00:24:40,860 --> 00:24:43,980\nit doesn't hurt to go ahead and\nget the Active Directory prepared for it.\n\n568\n00:24:43,980 --> 00:24:46,320\nIt gives you that ability to use it\nin the future when you're ready.\n\n569\n00:24:46,320 --> 00:24:46,940\n>> That's what I say.\n\n570\n00:24:46,940 --> 00:24:48,120\n>> While you've got the disc in there,\n\n571\n00:24:48,120 --> 00:24:49,890\nyou've got the permissions\nto run the command.\n\n572\n00:24:49,890 --> 00:24:50,760\nJust go ahead and run it.\n\n573\n00:24:50,760 --> 00:24:51,440\nThat way you're done.\n\n574\n00:24:51,440 --> 00:24:52,450\nYou don't have to remember.\n\n575\n00:24:52,450 --> 00:24:54,920\nCuz you're gonna go,\nI wanna set up an RDC.\n\n576\n00:24:54,920 --> 00:24:57,610\nYou go to set it up and\nthe option's not there.\n\n577\n00:24:57,610 --> 00:24:59,190\nSmack.\nSomeone forgot to run that command,\n\n578\n00:24:59,190 --> 00:25:00,270\nso\n>> Yeah.\n\n579\n00:25:00,270 --> 00:25:01,370\nGo ahead and run it ahead of time.\n\n580\n00:25:01,370 --> 00:25:01,930\n>> Yep.\nTwo\n\n581\n00:25:01,930 --> 00:25:03,237\nyears from now you're hunting for\nthat DVD.\n\n582\n00:25:03,237 --> 00:25:04,980\n>> [LAUGH]\n>> I think we've all been there.\n\n583\n00:25:04,980 --> 00:25:05,520\nTrying to find.\n\n584\n00:25:05,520 --> 00:25:06,770\nWhere'd I put that DVD?\n\n585\n00:25:06,770 --> 00:25:11,050\nAnd then you find where you've got the,\nwell not so much in 2012 anymore.\n\n586\n00:25:11,050 --> 00:25:11,710\n>> Right.\n>> But\n\n587\n00:25:11,710 --> 00:25:14,900\nin 2008 you got your enterprise disk,\nbut the server is standard.\n\n588\n00:25:14,900 --> 00:25:16,520\nAnd, yeah, it's a frigging mess.\n\n589\n00:25:16,520 --> 00:25:17,180\nAll right.\n\n590\n00:25:17,180 --> 00:25:20,770\nSo those are the four main ones that\nwe need to remember right there.\n\n591\n00:25:20,770 --> 00:25:23,090\nAnd really,\nit kind of boils down to three.\n\n592\n00:25:23,090 --> 00:25:26,550\nYou'll normally do /forestPrep,\nfollowed by /domainPrep /gpPrep, and\n\n593\n00:25:26,550 --> 00:25:29,380\nthen lastly /rodcPrep, and\nknock it out of the park.\n\n594\n00:25:29,380 --> 00:25:30,030\nRight?\n\n595\n00:25:30,030 --> 00:25:31,880\nThere's a ton of other\nmodifications though.\n\n596\n00:25:31,880 --> 00:25:34,620\nYou'll see we can specify\na particular forest if\n\n597\n00:25:34,620 --> 00:25:36,160\nyou're dealing with more than one.\n\n598\n00:25:36,160 --> 00:25:37,580\nNot very common there.\n\n599\n00:25:38,640 --> 00:25:42,170\nIf you're modifying more than one domain,\nyou can do that, you can say /domain and\n\n600\n00:25:42,170 --> 00:25:43,690\nspecify it.\n\n601\n00:25:43,690 --> 00:25:44,490\n>> Right.\n>> Notice that all of\n\n602\n00:25:44,490 --> 00:25:48,030\nthese just default to whatever forest and\ndomain you're currently logged into.\n\n603\n00:25:48,030 --> 00:25:51,820\nYou can specify alternate credentials\njust as far as username and passwords.\n\n604\n00:25:51,820 --> 00:25:54,910\nYou can do silent where you don't get\noutput if you're trying to script.\n\n605\n00:25:54,910 --> 00:25:57,990\nAnd so on, so a lot of different options.\n\n606\n00:25:57,990 --> 00:26:00,230\nI wanted to point out this guy right here.\n\n607\n00:26:00,230 --> 00:26:02,625\nWell, I wanted to point it out,\nif would let me.\n\n608\n00:26:02,625 --> 00:26:04,745\n>> [LAUGH]\n>> There we go, this guy right here,\n\n609\n00:26:04,745 --> 00:26:06,220\n/forceReplicate.\n\n610\n00:26:06,220 --> 00:26:09,290\nWhen you make this change,\nyou're modifying your schema, and\n\n611\n00:26:09,290 --> 00:26:12,200\nyou've only got one schema in\nyour entire forest, right?\n\n612\n00:26:12,200 --> 00:26:13,650\nSo you just do it when you're done.\n\n613\n00:26:13,650 --> 00:26:16,400\nWell, you need to allow time for\n\n614\n00:26:16,400 --> 00:26:19,850\nthat change to replicate out to\nyour other domain controllers.\n\n615\n00:26:19,850 --> 00:26:25,495\nIf you just have one DC, well first, shame\non you cuz if that DC fails your screwed,\n\n616\n00:26:25,495 --> 00:26:28,120\n[LAUGH], but\nsecondly if you only have one DC,\n\n617\n00:26:28,120 --> 00:26:30,750\nyou don't have to worry about replication,\nyou're done, right.\n\n618\n00:26:30,750 --> 00:26:34,720\nBut if you've got more than one DC,\nyou need to allow time for\n\n619\n00:26:34,720 --> 00:26:35,860\nthat to replicate between them.\n\n620\n00:26:35,860 --> 00:26:40,470\nNow the typical replication\ninterval between DCs in the same\n\n621\n00:26:40,470 --> 00:26:41,680\nlocation is five minutes.\n\n622\n00:26:41,680 --> 00:26:42,920\n>> Right.\n>> So within five minutes it\n\n623\n00:26:42,920 --> 00:26:44,170\nshould replicate.\n\n624\n00:26:44,170 --> 00:26:47,540\nWithin multiple geographic locations,\nthough, it's 90 minutes.\n\n625\n00:26:47,540 --> 00:26:50,660\n>> Yeah, what if that infrastructure\nmasters on the other side of a site.\n\n626\n00:26:50,660 --> 00:26:51,430\nSomething like that.\n\n627\n00:26:51,430 --> 00:26:54,430\nIt could be 90 minutes, three hours, so.\n\n628\n00:26:54,430 --> 00:26:57,380\n>> So if you don't wanna wait that long,\n\n629\n00:26:57,380 --> 00:26:59,650\nor if somebody's defined\ncustom connections, right?\n\n630\n00:26:59,650 --> 00:27:00,730\nSite connectors.\n\n631\n00:27:00,730 --> 00:27:02,050\n>> Right.\n>> Then it could be an entire day\n\n632\n00:27:02,050 --> 00:27:03,590\nbefore the replication happens.\n\n633\n00:27:03,590 --> 00:27:04,950\nSo you can force replicate.\n\n634\n00:27:04,950 --> 00:27:07,130\nThat force replication\nto happen right now.\n\n635\n00:27:07,130 --> 00:27:08,300\nSo if you're in a hurry.\n\n636\n00:27:08,300 --> 00:27:09,560\nYou can go that route.\n\n637\n00:27:09,560 --> 00:27:12,740\nI'll tell you guys,\nsince this is a non-reversible action,\n\n638\n00:27:12,740 --> 00:27:14,890\nit's something that I\nalways take my time with.\n\n639\n00:27:14,890 --> 00:27:16,380\nAnd so I don't normally use this option.\n\n640\n00:27:16,380 --> 00:27:19,610\nBut if you're in a hurry,\nthis is a good one to throw in there.\n\n641\n00:27:19,610 --> 00:27:24,660\nNormally what I'll do is, as we plan for\nthis, I'll go ahead and do the update, and\n\n642\n00:27:24,660 --> 00:27:27,720\nI'll wait a solid 24 hours before\nI start to go and do the others.\n\n643\n00:27:27,720 --> 00:27:30,260\nAnd I'll check to make sure\nreplication is happening across\n\n644\n00:27:30,260 --> 00:27:32,370\nall my domain controllers and all that.\n\n645\n00:27:32,370 --> 00:27:34,508\n>> Absolutely.\n>> All right,\n\n646\n00:27:34,508 --> 00:27:37,200\nso let's say that we wanna go ahead and\nget this turkey ready.\n\n647\n00:27:37,200 --> 00:27:38,160\n>> Let's do it.\n\n648\n00:27:38,160 --> 00:27:39,530\n>> So I-\n>> Enough talking, let's get busy.\n\n649\n00:27:39,530 --> 00:27:42,952\n>> I'm in the appropriate groups,\nso I should be able to fire up my\n\n650\n00:27:42,952 --> 00:27:48,800\nadprep/forestprep, and we'll give that\na go, it's gonna give me a warning,\n\n651\n00:27:48,800 --> 00:27:53,570\nright, it's letting me know\nthat under the new settings,\n\n652\n00:27:53,570 --> 00:27:57,550\nWindows Server 2000, or Windows 2000\nServer, is no longer supported.\n\n653\n00:27:57,550 --> 00:28:00,822\nSo I can't have any Windows 2000\nserver domain controllers, and\n\n654\n00:28:00,822 --> 00:28:03,103\nif you do shame on you,\nthey're not supported.\n\n655\n00:28:03,103 --> 00:28:05,806\nSo 2003 is still supported though,\nisn't it?\n\n656\n00:28:05,806 --> 00:28:06,517\n>> 2003 is.\n\n657\n00:28:06,517 --> 00:28:07,045\nYup.\n\n658\n00:28:07,045 --> 00:28:07,898\n2003 and later.\n\n659\n00:28:07,898 --> 00:28:10,990\n>> So it's just telling me\nthat you've got to have that.\n\n660\n00:28:10,990 --> 00:28:12,960\nAnd we're okay, we've got it.\n\n661\n00:28:12,960 --> 00:28:15,140\nIt's also letting us know that\nwe're going to be doing the update.\n\n662\n00:28:15,140 --> 00:28:17,800\nIt's telling me who\nthe schema master is and\n\n663\n00:28:17,800 --> 00:28:20,510\nit's recommending that\nI be on that server.\n\n664\n00:28:20,510 --> 00:28:21,270\n>> On that machine, yeah.\n\n665\n00:28:21,270 --> 00:28:23,270\n>> You don't have to be,\nbut it's a good idea.\n\n666\n00:28:23,270 --> 00:28:26,800\nThis operation cannot be reversed\nafter it completes, right?\n\n667\n00:28:26,800 --> 00:28:28,100\nBig warning flag.\n\n668\n00:28:28,100 --> 00:28:31,590\nDon't think you can undo it\n>> Rarely is it really gonna cause\n\n669\n00:28:31,590 --> 00:28:32,190\na problem, right?\n\n670\n00:28:32,190 --> 00:28:35,090\nBut you might have a domain out\nthere that's running some custom\n\n671\n00:28:35,090 --> 00:28:38,220\napplication that has done\nsome changes to the schema.\n\n672\n00:28:38,220 --> 00:28:41,490\nAnd if you go and make these changes,\nmaybe that hoses their application.\n\n673\n00:28:41,490 --> 00:28:42,600\n>> Yeah.\n>> That's something that you've\n\n674\n00:28:42,600 --> 00:28:43,200\ngotta think about.\n\n675\n00:28:43,200 --> 00:28:44,990\nI don't think I've ever\nseen it cause problems.\n\n676\n00:28:44,990 --> 00:28:46,800\n>> Frigging GFI LanFax, that software.\n\n677\n00:28:46,800 --> 00:28:47,740\n>> Oh, really.\n[LAUGH]\n\n678\n00:28:47,740 --> 00:28:48,730\n>> Yeah, I shouldn't talk bad about\n\n679\n00:28:48,730 --> 00:28:49,490\nsomebody's software.\n\n680\n00:28:49,490 --> 00:28:53,900\nI hate that software, and\nit is a great example of that.\n\n681\n00:28:53,900 --> 00:28:54,550\n>> Okay, there you go.\n\n682\n00:28:54,550 --> 00:28:58,920\n>> And it was fact software and so it\nextra facts fields to every user account.\n\n683\n00:28:58,920 --> 00:28:59,980\nIt modified the schema.\n\n684\n00:28:59,980 --> 00:29:00,570\n>> Okay, right.\n\n685\n00:29:00,570 --> 00:29:02,080\n>> To add these facts fields.\n\n686\n00:29:02,080 --> 00:29:04,530\nWell then Microsoft\nadded some facts fields.\n\n687\n00:29:04,530 --> 00:29:05,990\nWho uses facts anymore?\n\n688\n00:29:05,990 --> 00:29:08,090\nBut back then I ran into this.\n\n689\n00:29:08,090 --> 00:29:11,070\nThat would of been like 2003, 2004.\n\n690\n00:29:11,070 --> 00:29:11,848\n>> Frustrating somehow.\n\n691\n00:29:11,848 --> 00:29:14,730\n[LAUGH]\n>> [LAUGH] Anyhow.\n\n692\n00:29:14,730 --> 00:29:16,530\nAll right, so I just need to confirm that.\n\n693\n00:29:16,530 --> 00:29:18,050\nAnd this is the weirdest\nconfirmation screen.\n\n694\n00:29:18,050 --> 00:29:19,590\nCuz you have to type a capital C.\n\n695\n00:29:19,590 --> 00:29:20,820\n>> Right.\n>> Which is bazaar,\n\n696\n00:29:20,820 --> 00:29:21,990\nbut that's what you need.\n\n697\n00:29:21,990 --> 00:29:23,330\n>> Or C to confirm, or Y for yes.\n\n698\n00:29:23,330 --> 00:29:24,240\n>> Yep.\n\n699\n00:29:24,240 --> 00:29:28,180\nAnd this one is telling me forest wide\ninformation has already been updated,\n\n700\n00:29:28,180 --> 00:29:33,760\nnow how can that be,\nI brought this 2008 R2 server up just\n\n701\n00:29:33,760 --> 00:29:38,230\nthis morning on a fresh install, I didn't\nupdate it, how'd that happen, all right.\n\n702\n00:29:38,230 --> 00:29:41,950\nWell, the way it happened\nis at the forest level,\n\n703\n00:29:41,950 --> 00:29:46,950\nnothing really changed between 2008 R2 and\n2012 R2.\n\n704\n00:29:46,950 --> 00:29:49,990\nSo all I really had to do was put in\na little flag at this point and that's it.\n\n705\n00:29:49,990 --> 00:29:50,500\n>> That had been done.\n\n706\n00:29:50,500 --> 00:29:51,070\n>> Okay.\n\n707\n00:29:51,070 --> 00:29:53,100\nThe real changes happen\nat the domain level.\n\n708\n00:29:53,100 --> 00:29:53,970\nSo I get this message.\n\n709\n00:29:53,970 --> 00:29:55,900\nNow, that doesn't mean we\ndon't have to run this.\n\n710\n00:29:55,900 --> 00:29:58,530\nYou do still need to run it because\nit puts a little flag in to say\n\n711\n00:29:58,530 --> 00:29:59,470\nthat you did it.\n\n712\n00:29:59,470 --> 00:30:00,210\nAll right.\n\n713\n00:30:00,210 --> 00:30:02,520\nSo now I'm going to follow\nthat up with /domainPrep.\n\n714\n00:30:02,520 --> 00:30:03,805\nNow I've only got one domain.\n\n715\n00:30:03,805 --> 00:30:05,157\nWait is that true?\n\n716\n00:30:05,157 --> 00:30:07,257\n[CROSSTALK]\n>> At this point we have one.\n\n717\n00:30:07,257 --> 00:30:09,250\nDid we finished the other domain?\n\n718\n00:30:09,250 --> 00:30:10,110\n>> I don't know.\nWe're going to\n\n719\n00:30:10,110 --> 00:30:12,340\nhave a second domain in another episode.\n\n720\n00:30:12,340 --> 00:30:14,420\nAnd so, maybe later in this episode.\n\n721\n00:30:14,420 --> 00:30:17,410\nSo we need to doublecheck that other\ndomain and make sure that it gets done to.\n\n722\n00:30:17,410 --> 00:30:19,760\nBut right now,\nwhere don't worry about this one.\n\n723\n00:30:19,760 --> 00:30:23,750\nAnd I'll do the GP prep also,\nto get my group policies, and\n\n724\n00:30:23,750 --> 00:30:26,730\nthere we go,\nthe GPOs didn't need to be done, but\n\n725\n00:30:26,730 --> 00:30:30,400\nI do see Adprep successfully updated\nthe domain-wide information.\n\n726\n00:30:30,400 --> 00:30:35,452\nSo, my group policies were already taken\ncare of, cuz that was part of 2008 R2,\n\n727\n00:30:35,452 --> 00:30:38,717\nbut my domain prep had to be [CROSSTALK]\n>> Oh then our other domain\n\n728\n00:30:38,717 --> 00:30:42,171\nis running only a 2012 R2 domain\ncontroller, so probably already is.\n\n729\n00:30:42,171 --> 00:30:43,675\n>> Oh it is, yup, so\nit's already in business.\n\n730\n00:30:43,675 --> 00:30:44,880\n>> We'll double check it, but.\n\n731\n00:30:44,880 --> 00:30:46,490\n>> Okay, all right, so we're good there.\n\n732\n00:30:46,490 --> 00:30:47,410\nAnd we're preped.\n\n733\n00:30:47,410 --> 00:30:50,290\nNow you can see right here,\nif you're running it a second time, or\n\n734\n00:30:50,290 --> 00:30:52,560\nif it's already been done,\nno harm no foul.\n\n735\n00:30:52,560 --> 00:30:53,420\n>> Right.\n>> But otherwise,\n\n736\n00:30:53,420 --> 00:30:54,960\nif you run it, it takes care of it.\n\n737\n00:30:54,960 --> 00:30:58,600\nIt imports those LDF\nfiles in a large domain.\n\n738\n00:30:58,600 --> 00:31:02,650\nWhat I just ran there in about a minute,\ncould take an hour.\n\n739\n00:31:02,650 --> 00:31:04,180\nI've seen it take as long as an hour.\n\n740\n00:31:04,180 --> 00:31:07,440\nIt can take a long time to run,\nas it goes through and updates and\n\n741\n00:31:07,440 --> 00:31:09,260\nmodifies the schema.\n\n742\n00:31:09,260 --> 00:31:11,230\nThis is a domain that I\ninstalled this morning.\n\n743\n00:31:11,230 --> 00:31:13,950\nRight, we've added two user\naccounts to it, Mike and I.\n\n744\n00:31:13,950 --> 00:31:16,100\nSo it's very, very small,\nso it happened very fast.\n\n745\n00:31:16,100 --> 00:31:18,610\nSo just be aware that it may take longer.\n\n746\n00:31:18,610 --> 00:31:20,220\nAll right, so that is done.\n\n747\n00:31:20,220 --> 00:31:21,680\nI'm knocked out of the park there.\n\n748\n00:31:21,680 --> 00:31:24,870\nMike, good point that our other domain,\nit does have 2012 machine, so\n\n749\n00:31:24,870 --> 00:31:26,150\nwe're good there.\n\n750\n00:31:26,150 --> 00:31:28,810\nSo, we're pretty well taken care of.\n\n751\n00:31:28,810 --> 00:31:31,720\nNow we're ready to start\ndoing the actual migration.\n\n752\n00:31:31,720 --> 00:31:35,890\nThis domain that I'm in right now\nhas just one domain controller.\n\n753\n00:31:35,890 --> 00:31:38,800\nA Windows server 2008 R2 domain\ncontroller and that's it.\n\n754\n00:31:38,800 --> 00:31:42,260\nAnd I can verify that in\nActive Directory using Computers.\n\n755\n00:31:43,970 --> 00:31:47,950\nI can see that I'm in domain1.itpro.tv and\nunder domain controllers.\n\n756\n00:31:47,950 --> 00:31:50,020\nI just have domain-dc1.\n\n757\n00:31:50,020 --> 00:31:50,920\n>> Right.\n\n758\n00:31:50,920 --> 00:31:56,048\n>> And it is running\nWindows Server 2008 R2, right?\n\n759\n00:31:56,048 --> 00:31:59,806\nSo I have no 2012 domain controllers,\nbut now that we've done the adprep,\n\n760\n00:31:59,806 --> 00:32:00,772\nwe can bring one up.\n\n761\n00:32:00,772 --> 00:32:01,283\n>> That's right.\n\n762\n00:32:01,283 --> 00:32:04,415\n>> And that's what we're gonna do,\nafter the break, all right,\n\n763\n00:32:04,415 --> 00:32:05,990\ncuz we're running out of time.\n\n764\n00:32:05,990 --> 00:32:08,136\nAll right, so ladies and gentlemen,\nlet's stop here and take a break.\n\n765\n00:32:08,136 --> 00:32:11,300\nWhen we get back, we're ready to\nbring up that domain controller.\n\n766\n00:32:11,300 --> 00:32:12,070\n>> We're ready.\n\n767\n00:32:12,070 --> 00:32:13,050\n>> All right, so stay tuned.\n\n768\n00:32:13,050 --> 00:32:13,944\nWe'll be back after this.\n\n769\n00:32:13,944 --> 00:32:21,003\n[MUSIC]\n\n770\n00:32:21,003 --> 00:32:22,850\n>> All right, welcome back everybody.\n\n771\n00:32:22,850 --> 00:32:25,590\nSo now,\nwe've prepared our active directory,\n\n772\n00:32:25,590 --> 00:32:28,508\nwe're ready to bring up our\nnew 2012 R2 domain controller.\n\n773\n00:32:28,508 --> 00:32:29,194\n>> We're ready.\n\n774\n00:32:29,194 --> 00:32:30,008\n>> Before I do that.\n\n775\n00:32:30,008 --> 00:32:31,820\n>> Mm-hm.\n>> I want to make sure I made good\n\n776\n00:32:31,820 --> 00:32:33,110\non what we said earlier.\n\n777\n00:32:33,110 --> 00:32:34,600\n>> Uh-oh.\n>> I need to take myself out\n\n778\n00:32:34,600 --> 00:32:36,010\nof the schema admin's group.\n\n779\n00:32:36,010 --> 00:32:36,860\n>> Oh yeah.\n\n780\n00:32:36,860 --> 00:32:37,700\nBest practicing, right?\n\n781\n00:32:37,700 --> 00:32:40,340\n>> I'm done modifying the schema,\nso get myself out of there so\n\n782\n00:32:40,340 --> 00:32:42,800\nI don't accidentally\nmodify it down the road.\n\n783\n00:32:42,800 --> 00:32:46,210\nNow we do have that other domain that\nwe may need to do some AD prep for or\n\n784\n00:32:46,210 --> 00:32:46,720\nsomething.\n\n785\n00:32:46,720 --> 00:32:48,390\nI'd have to put myself, well no,\nI've already done the four.\n\n786\n00:32:48,390 --> 00:32:50,830\nSee, I'm good,\nI just need to get myself out of there.\n\n787\n00:32:50,830 --> 00:32:56,050\nSo I'm gonna go ahead and\nfind my account, and just get myself out\n\n788\n00:32:56,050 --> 00:32:59,740\nof the Schema Admins group, so\nI don't need to be in there anymore.\n\n789\n00:32:59,740 --> 00:33:00,580\nI'll just knock that out.\n\n790\n00:33:00,580 --> 00:33:01,230\nOkay.\n\n791\n00:33:01,230 --> 00:33:03,231\nAlways a good practice and\nI do need to log out and\n\n792\n00:33:03,231 --> 00:33:04,840\nlog back in before that takes effect.\n\n793\n00:33:04,840 --> 00:33:06,396\nI'll worry about that later.\n\n794\n00:33:06,396 --> 00:33:10,761\nAll right, so now that's done,\nhere's my 2008 domain controller, it's up,\n\n795\n00:33:10,761 --> 00:33:12,840\nit's sitting here, it's happy.\n\n796\n00:33:12,840 --> 00:33:14,768\nNow I'm gonna bring up the 2012 one.\n\n797\n00:33:14,768 --> 00:33:17,184\nAnd we've got a separate box for\nthat so here's my 2012.\n\n798\n00:33:17,184 --> 00:33:19,470\nThis is DOMAIN1-DC2.\n\n799\n00:33:19,470 --> 00:33:21,390\n>> It's named DC2 but\nit's not really a domain controller.\n\n800\n00:33:21,390 --> 00:33:24,000\nOh yeah, we just got ahead of\nourselves with the naming conventions.\n\n801\n00:33:24,000 --> 00:33:25,045\n>> Anticipating change, right?\n\n802\n00:33:25,045 --> 00:33:26,574\n>> That's right, exactly.\n>> [LAUGH] All right, so\n\n803\n00:33:26,574 --> 00:33:28,927\nI am gonna promote this turkey.\n\n804\n00:33:28,927 --> 00:33:30,830\nI don't think I even installed\nthe role on it, though.\n\n805\n00:33:30,830 --> 00:33:33,910\nSo let's start by getting\nthat role [LAUGH] installed.\n\n806\n00:33:33,910 --> 00:33:35,855\nLet's start by locking\nmy screen by accident.\n\n807\n00:33:35,855 --> 00:33:37,630\n>> [LAUGH]\n>> And then we're get that role installed.\n\n808\n00:33:37,630 --> 00:33:38,723\n>> So as he gets logged back in there,\n\n809\n00:33:38,723 --> 00:33:40,460\nnow remember guys it's a two step process,\nright?\n\n810\n00:33:40,460 --> 00:33:42,220\nYou gotta install the role first.\n\n811\n00:33:42,220 --> 00:33:44,050\nLIke it's all the binaries ready and\neverything,\n\n812\n00:33:44,050 --> 00:33:47,450\nall the DLLs then we're going to go\nback and run the configuration wizard.\n\n813\n00:33:47,450 --> 00:33:48,140\nHe runs this.\n\n814\n00:33:48,140 --> 00:33:49,350\nIt's still not a domain controller.\n\n815\n00:33:49,350 --> 00:33:51,180\nIt's just ready to become\na domain controller.\n\n816\n00:33:51,180 --> 00:33:52,690\n>> Yep.\nAnd it\n\n817\n00:33:52,690 --> 00:33:54,550\nwon't take long to install a role here.\n\n818\n00:33:54,550 --> 00:33:55,860\nYeah, so we'll let that install.\n\n819\n00:33:55,860 --> 00:33:59,390\nAnd it won't even require a reboot because\nit's not really making any changes.\n\n820\n00:33:59,390 --> 00:34:01,570\nYou're just copying over some executables.\n\n821\n00:34:01,570 --> 00:34:03,620\nWhen it's done, we're going to run Adprep.\n\n822\n00:34:03,620 --> 00:34:07,670\nNow, when we run Adprep,\nthat's going, or, we don't-\n\n823\n00:34:07,670 --> 00:34:08,930\n>> We don't want DC promo really.\n\n824\n00:34:08,930 --> 00:34:12,190\n>> Yeah, it's-\n>> Active Directory Domain Services\n\n825\n00:34:12,190 --> 00:34:13,585\nConfiguration Wizard.\n\n826\n00:34:13,585 --> 00:34:17,310\n>> [LAUGH] Used to just be DC promo,\nso much easier.\n\n827\n00:34:17,310 --> 00:34:19,245\n>> Yes, yes.\n>> So basically now that it's done.\n\n828\n00:34:19,245 --> 00:34:20,945\nOnce it's done.\n\n829\n00:34:20,945 --> 00:34:22,877\nWe'll just basically run\nthe promotion wizard.\n\n830\n00:34:22,877 --> 00:34:27,662\nAnd it's going to see that we've\ngot an existing 2008 R2 domain.\n\n831\n00:34:27,662 --> 00:34:29,321\nBut it's going to be okay with that.\n\n832\n00:34:29,321 --> 00:34:31,235\nIt's going to be cool because\nwe've already prepared it.\n\n833\n00:34:31,235 --> 00:34:35,227\nAnd so then it's going to allow us\nto install It's gonna come up and\n\n834\n00:34:35,227 --> 00:34:40,505\nnow we're gonna have a 2012 R2 domain\ncontroller side by side with our 2008 and\n\n835\n00:34:40,505 --> 00:34:42,519\nit doesn't have to be 2000.\n\n836\n00:34:42,519 --> 00:34:43,739\nIt could be 2003 for that matter.\n\n837\n00:34:43,739 --> 00:34:45,073\nWe can have them side by side and happy.\n\n838\n00:34:45,073 --> 00:34:46,978\n>> That is a good point cuz they\ndo call that on the objectives.\n\n839\n00:34:46,978 --> 00:34:48,336\nJust because, we're getting excited.\n\n840\n00:34:48,336 --> 00:34:50,680\nWe want this 2012 R2 domain controller.\n\n841\n00:34:50,680 --> 00:34:53,319\nWe want to take advantage of all\nthese new features that we get.\n\n842\n00:34:53,319 --> 00:34:54,434\nYou don't have to right?\n\n843\n00:34:54,434 --> 00:34:56,670\nI mean you might be happy\nsitting at 2008 R2.\n\n844\n00:34:56,670 --> 00:35:01,340\nYou can bring in a 2012 domain controller\nas long as you've done the prep\n\n845\n00:35:01,340 --> 00:35:04,220\nwork in the schema and Active Directory.\n\n846\n00:35:04,220 --> 00:35:05,790\nAnd then you could just leave it at that.\n\n847\n00:35:05,790 --> 00:35:07,350\nYou can run them side by side.\n\n848\n00:35:07,350 --> 00:35:12,490\nYou can have a mix, as you were saying,\nof 2003, 2008 and 2012 domain controllers.\n\n849\n00:35:12,490 --> 00:35:14,580\nHere's the only issue that\nyou'll bump into that.\n\n850\n00:35:14,580 --> 00:35:17,349\nWell, the only real issue for\na normal person.\n\n851\n00:35:17,349 --> 00:35:19,220\n>> [LAUGH]\n>> Not us.\n\n852\n00:35:19,220 --> 00:35:20,255\n>> Not us, we're not normal.\n\n853\n00:35:20,255 --> 00:35:21,720\n[LAUGH]\n>> The only normal issue that you'll\n\n854\n00:35:21,720 --> 00:35:25,920\nbump into is with each version of\nWindows server, they add more and\n\n855\n00:35:25,920 --> 00:35:27,260\nmore to the group policies.\n\n856\n00:35:27,260 --> 00:35:30,020\n>> Yep.\n>> So now there are thousands of group\n\n857\n00:35:30,020 --> 00:35:33,250\npolicies objects and entries and\ntheir settings that we can modify.\n\n858\n00:35:33,250 --> 00:35:37,490\nSo, if you create a GPO under\nWindows server 2012, it's going to\n\n859\n00:35:37,490 --> 00:35:42,360\nreplicate to the other domain controllers,\nthe 2008 and even 2003 domain controllers.\n\n860\n00:35:42,360 --> 00:35:45,766\nIf you try and\nedit that GPO on one of those older DCs,\n\n861\n00:35:45,766 --> 00:35:51,126\nyou're gonna get a ton of errors, cuz\nit's not gonna recognize those settings.\n\n862\n00:35:51,126 --> 00:35:55,172\nSo if you go that route, what you really\nshould do is install the remote server\n\n863\n00:35:55,172 --> 00:35:59,654\nadministration toolkit on your own system,\nyour laptop or desktop or whatever, and\n\n864\n00:35:59,654 --> 00:36:02,831\ninstall the latest one for\nWindows Server 2012 R2, and\n\n865\n00:36:02,831 --> 00:36:05,591\nthen that way you can use that for\nediting your GPOs.\n\n866\n00:36:05,591 --> 00:36:07,150\nIt's what you should be doing anyway, but\n\n867\n00:36:07,150 --> 00:36:09,635\nit makes sure that you're not gonna\nget errors when you edit those.\n\n868\n00:36:09,635 --> 00:36:11,950\nSo just be aware that that's\nsomething you'll bump into.\n\n869\n00:36:11,950 --> 00:36:14,228\nIt's nice knowing we can do\nit as a piece-meal process,\n\n870\n00:36:14,228 --> 00:36:16,270\nso we can kind of upgrade\nthem as we get our licenses.\n\n871\n00:36:17,812 --> 00:36:19,430\n>> All right, so\nI've got my tools installed now.\n\n872\n00:36:19,430 --> 00:36:22,240\nSo I'm just going to go up here\nto my little warning flag, and\n\n873\n00:36:22,240 --> 00:36:24,130\nit's telling me I need to run.\n\n874\n00:36:24,130 --> 00:36:25,285\n>> You're not done yet.\n\n875\n00:36:25,285 --> 00:36:27,100\n>> Post-deployment configuration, right.\n\n876\n00:36:27,100 --> 00:36:28,930\nPromote this server to\na domain controller.\n\n877\n00:36:28,930 --> 00:36:29,900\nThat's what I'm going to do.\n\n878\n00:36:29,900 --> 00:36:30,800\n>> This is the good stuff here.\n\n879\n00:36:30,800 --> 00:36:32,850\nNow we're actually making\nit a domain controller.\n\n880\n00:36:32,850 --> 00:36:33,760\n>> Now we're making progress.\n\n881\n00:36:33,760 --> 00:36:37,620\nNow, what I want,\nis to upgrade my existing my domain.\n\n882\n00:36:37,620 --> 00:36:40,400\nSo I've gotten domain one to ITPro.tv and\n\n883\n00:36:40,400 --> 00:36:44,160\nI want to add my first 2012\nR2 domain controller to it.\n\n884\n00:36:44,160 --> 00:36:46,560\nI could add a new domain or\na new forest but\n\n885\n00:36:46,560 --> 00:36:49,285\nI want to add a domain controller\nto an existing domain.\n\n886\n00:36:49,285 --> 00:36:50,420\n>> Mm-hm.\n\n887\n00:36:50,420 --> 00:36:54,457\n>> All right, and it's defaulting to\nmy user account, I'm a domain admin, so\n\n888\n00:36:54,457 --> 00:36:55,272\nthat's cool.\n\n889\n00:36:55,272 --> 00:36:55,930\n>> Should be good.\n\n890\n00:36:57,090 --> 00:36:59,670\n>> Although technically I'm breaking\nsecurity practices, cuz I shouldn't be\n\n891\n00:36:59,670 --> 00:37:03,170\nlogging in with my admin account,\nif I had a regular user account.\n\n892\n00:37:03,170 --> 00:37:06,070\n>> I would have sworn you did a run as\ncommand before you started all of this.\n\n893\n00:37:06,070 --> 00:37:07,008\n>> Oh certainly.\n[LAUGH]\n\n894\n00:37:07,008 --> 00:37:07,675\n>> Yes, absolutely\n\n895\n00:37:07,675 --> 00:37:08,200\n>> [LAUGH]\n\n896\n00:37:08,200 --> 00:37:09,870\n>> All right, so\n\n897\n00:37:09,870 --> 00:37:11,510\nnow it's running some checks.\n\n898\n00:37:11,510 --> 00:37:13,820\nIt's gonna take some,\ntake a look at the Active Directory,\n\n899\n00:37:13,820 --> 00:37:16,200\nit's trying to find out\nwhether DNS is already set up,\n\n900\n00:37:16,200 --> 00:37:19,340\nwhether there's a global catalog,\nwhether we should be those.\n\n901\n00:37:19,340 --> 00:37:23,520\nWhether AD Prep has been run,\ncuz if hasn't we'll get a failure here.\n\n902\n00:37:23,520 --> 00:37:28,110\nThere's another set of prerequisite checks\nwe'll see that also check again for this.\n\n903\n00:37:28,110 --> 00:37:32,360\nSo it's doing some of those background\nchecks and we just have to be patient.\n\n904\n00:37:32,360 --> 00:37:35,260\nYou see our sad little\nblue bar filling across.\n\n905\n00:37:35,260 --> 00:37:37,260\nSo we're going to wait for\na moment while it checks that.\n\n906\n00:37:37,260 --> 00:37:40,500\nNow, I'm going to change\na few things here.\n\n907\n00:37:40,500 --> 00:37:45,465\nFirst off, I didn't want to support\na bunch of DNS servers for our lab here.\n\n908\n00:37:45,465 --> 00:37:48,455\nWe're actually going to have four\ndomain controllers by the time this\n\n909\n00:37:48,455 --> 00:37:50,455\nepisode is over.\n\n910\n00:37:50,455 --> 00:37:53,710\nSo what I've done is,\nI really just have one DNS server.\n\n911\n00:37:53,710 --> 00:37:56,613\nIt's all set up on domain 1-DC1.\n\n912\n00:37:56,613 --> 00:38:00,560\nSo when this is happy,\nI'll uncheck that box.\n\n913\n00:38:00,560 --> 00:38:04,310\nIf you're doing a true migration, if\nyou're going to get rid of that 2008 box,\n\n914\n00:38:04,310 --> 00:38:06,200\nthen we'd want to move DNS also.\n\n915\n00:38:06,200 --> 00:38:08,420\nSo I'd want to install DNS here.\n\n916\n00:38:08,420 --> 00:38:10,692\nBut since I'm going to keep that\nother server for the time being,\n\n917\n00:38:10,692 --> 00:38:12,673\nI'm going to leave that, or\nI'm going to uncheck that,\n\n918\n00:38:12,673 --> 00:38:14,263\nwe'll just use the other\nserver [INAUDIBLE].\n\n919\n00:38:14,263 --> 00:38:15,733\n>> Speed that up just a little bit.\n\n920\n00:38:15,733 --> 00:38:19,260\nIt's a really good idea to have for DNS.\n\n921\n00:38:19,260 --> 00:38:22,020\n>> Yup.\nAnd speaking of removing the other server,\n\n922\n00:38:22,020 --> 00:38:26,200\nif we want to remove it, by the time\nwe're done here, we got a few steps to go\n\n923\n00:38:26,200 --> 00:38:30,230\nthrough to basically demote the old server\nand remove it as a domain controller.\n\n924\n00:38:30,230 --> 00:38:31,950\nBut, let's finish this one first.\n\n925\n00:38:31,950 --> 00:38:35,820\nSo I'm going to go ahead and check off\nDNS, so i'm not gonna be a DNS server.\n\n926\n00:38:35,820 --> 00:38:37,480\nI'll stay a global catalog.\n\n927\n00:38:37,480 --> 00:38:40,370\nand I need to put in my directory\nservices restore password.\n\n928\n00:38:41,500 --> 00:38:43,250\n>> Super secret password.\n\n929\n00:38:43,250 --> 00:38:44,650\n>> Yup.\n\n930\n00:38:44,650 --> 00:38:47,680\nAnd remember, this is for if we ever\nhave a failure int he active directory,\n\n931\n00:38:47,680 --> 00:38:49,100\nwe need to reboot without AD.\n\n932\n00:38:49,100 --> 00:38:53,482\nThis is the password the local\nadministrator account will use.\n\n933\n00:38:53,482 --> 00:38:54,306\nAll right.\n\n934\n00:38:54,306 --> 00:38:56,860\nSome of the other options if\nwe're going install from media.\n\n935\n00:38:56,860 --> 00:38:57,795\nWhere we want to replicate from.\n\n936\n00:38:57,795 --> 00:39:00,011\nWe covered all these in the 410 show.\n\n937\n00:39:00,011 --> 00:39:01,350\n>> 7411, Yep.\n\n938\n00:39:01,350 --> 00:39:01,880\n>> Yep.\n\n939\n00:39:01,880 --> 00:39:03,000\nSo we'll go ahead and just move forward.\n\n940\n00:39:03,000 --> 00:39:05,005\nI'm gonna go with my\ndefault paths on this one.\n\n941\n00:39:05,005 --> 00:39:05,870\n>> Mm-hm.\n\n942\n00:39:05,870 --> 00:39:07,760\n>> And we get our options to review.\n\n943\n00:39:07,760 --> 00:39:10,120\nAnd then the final prerequisite check.\n\n944\n00:39:10,120 --> 00:39:10,760\nJust making sure.\n\n945\n00:39:10,760 --> 00:39:13,780\nNow you're pretty much always\ngonna get some warnings here.\n\n946\n00:39:13,780 --> 00:39:17,980\nMost of them are just indicating that\nyou're trimming off support for older OSs.\n\n947\n00:39:17,980 --> 00:39:22,840\nSo, here there's a setting\ncalled allow cryptography\n\n948\n00:39:22,840 --> 00:39:24,985\nalgorithms compatible with Windows NT 4.0.\n\n949\n00:39:24,985 --> 00:39:26,066\n>> [LAUGH]\n>> And\n\n950\n00:39:26,066 --> 00:39:28,069\nif we have that turned on\nit can weaken security, so\n\n951\n00:39:28,069 --> 00:39:30,127\nhopefully you don't have\nto support that anymore.\n\n952\n00:39:30,127 --> 00:39:32,490\n>> If you're a military post, you might\nneed to enable that again, right?\n\n953\n00:39:32,490 --> 00:39:33,016\nYeah.\n>> [LAUGH]\n\n954\n00:39:33,016 --> 00:39:34,581\n>> [LAUGH] So we will leave that be and\n\n955\n00:39:34,581 --> 00:39:38,160\ninstall, and we'll let it finish.\n\n956\n00:39:38,160 --> 00:39:39,800\nAll right, there it goes.\n\n957\n00:39:39,800 --> 00:39:42,986\nNow while that's running,\nI don't actually want to do it, but\n\n958\n00:39:42,986 --> 00:39:46,467\nif we wanted to get rid of our old\n2008 domain controller, right,\n\n959\n00:39:46,467 --> 00:39:49,125\nthere's two real things that\nwe need to worry about.\n\n960\n00:39:49,125 --> 00:39:52,146\nThe first thing is this domain controller,\n\n961\n00:39:52,146 --> 00:39:57,141\nbecause it was our first one,\nis holding all of the FSMO role, all five.\n\n962\n00:39:57,141 --> 00:40:00,652\nSo, if we're gonna get rid of this,\nwe need to move those FSMO rules off,\n\n963\n00:40:00,652 --> 00:40:04,160\nmove into our new server, or\nto a different server somewhere else.\n\n964\n00:40:04,160 --> 00:40:06,964\nSo remember, you've got your schema\nmaster, your infrastructure master,\n\n965\n00:40:06,964 --> 00:40:07,815\ndomain naming master.\n\n966\n00:40:07,815 --> 00:40:11,355\n>> Domain naming master,\nPDC emulator and RID master.\n\n967\n00:40:11,355 --> 00:40:13,055\n>> RID master, there we go,\nthat's all five.\n\n968\n00:40:13,055 --> 00:40:14,775\n>> Now dcpromo will do it for you.\n\n969\n00:40:14,775 --> 00:40:17,955\nI mean it'll see that there's still\na role holder and it's gonna say, hey,\n\n970\n00:40:17,955 --> 00:40:20,475\ndo you want me to migrate these roles for\nyou?\n\n971\n00:40:20,475 --> 00:40:21,065\nI wouldn't rely on it.\n\n972\n00:40:21,065 --> 00:40:21,911\nI don't know about you.\n\n973\n00:40:21,911 --> 00:40:22,608\n>> I didn't even know it would that.\n\n974\n00:40:22,608 --> 00:40:23,349\nI always do it manually.\n\n975\n00:40:23,349 --> 00:40:28,520\n>> If it sees that it is still a role\nholder, it should say something to you.\n\n976\n00:40:28,520 --> 00:40:31,355\n>> Okay, so I normally do it manually,\nif the wizard will do it, cool, but\n\n977\n00:40:31,355 --> 00:40:33,129\nI don't trust wizards, I'm with you Mike.\n\n978\n00:40:33,129 --> 00:40:34,652\n>> I don't either, especially with those,\n\n979\n00:40:34,652 --> 00:40:37,121\nI mean you are talking about your\nFSMO's there, we like those guys.\n\n980\n00:40:37,121 --> 00:40:40,300\n>> Yeah, so you'll have to move those off,\nthat's the first\n\n981\n00:40:40,300 --> 00:40:42,370\n>> And then the second is,\n\n982\n00:40:42,370 --> 00:40:44,330\nyou don't just shut the server off, right?\n\n983\n00:40:44,330 --> 00:40:46,260\nYou need to demote the server.\n\n984\n00:40:46,260 --> 00:40:49,860\nYou basically run dcpromo again,\nand you'll demote the server,\n\n985\n00:40:49,860 --> 00:40:52,100\nremoving it as a domain controller.\n\n986\n00:40:52,100 --> 00:40:56,015\nOnce that's done it'll just be a regular\nmember server joined to your domain.\n\n987\n00:40:56,015 --> 00:40:59,931\nIf you're actually getting rid of the box,\nyou should unjoin it from the domain,\n\n988\n00:40:59,931 --> 00:41:02,090\nwhich will delete its record there.\n\n989\n00:41:02,090 --> 00:41:05,050\nAnd then you can shut the server down and\nget rid of it.\n\n990\n00:41:05,050 --> 00:41:09,450\nIf you don't follow any of those steps,\nif any one of them gets skipped,\n\n991\n00:41:09,450 --> 00:41:12,870\nyou'll end up with,\nwhat are they called, relics?\n\n992\n00:41:12,870 --> 00:41:14,060\nThat's not the right-\n>> Artifacts.\n\n993\n00:41:14,060 --> 00:41:14,620\n>> Artifacts.\n\n994\n00:41:14,620 --> 00:41:16,710\nYou'll end up with artifacts\nin your Active Directory.\n\n995\n00:41:16,710 --> 00:41:20,310\nLeft over pieces that indicate this\nserver should exist, but doesn't.\n\n996\n00:41:20,310 --> 00:41:23,920\n>> Cuz the KCC still has replication links\nbuilt and the other domain controllers,\n\n997\n00:41:23,920 --> 00:41:26,510\nmy replication partner is gone,\nwhat am I supposed to do?\n\n998\n00:41:26,510 --> 00:41:28,930\n>> Yep, you'll get failed\nreplication all the time.\n\n999\n00:41:28,930 --> 00:41:29,860\nIt's a mess.\n\n1000\n00:41:29,860 --> 00:41:32,290\nSo you do not want that, right?\n\n1001\n00:41:32,290 --> 00:41:34,791\nAnd I know in a previous episode\nwe covered using Ntdsutil to do\n\n1002\n00:41:34,791 --> 00:41:35,617\nmetadata cleanup.\n\n1003\n00:41:35,617 --> 00:41:38,570\n>> Ugh, clean up the metadata, yikes.\n\n1004\n00:41:38,570 --> 00:41:42,340\nYou can go in there and\nforcefully seize your FSMO roles,\n\n1005\n00:41:42,340 --> 00:41:46,800\nyou can delete a domain\ncontroller that no longer exists.\n\n1006\n00:41:46,800 --> 00:41:49,770\n>> You know, you can do that stuff\nafter the fact, but you don't want to.\n\n1007\n00:41:49,770 --> 00:41:50,900\n>> No.\n>> You want to do it the right way.\n\n1008\n00:41:50,900 --> 00:41:52,305\n>> Yes.\n>> And the right way is to\n\n1009\n00:41:52,305 --> 00:41:56,192\ngo into your server manager and\ndemote the domain controller.\n\n1010\n00:41:56,192 --> 00:41:59,511\nOnce it's demoted,\nunjoin it from the domain.\n\n1011\n00:41:59,511 --> 00:42:01,535\n>> Right.\n>> And then you can shut it down, and\n\n1012\n00:42:01,535 --> 00:42:04,132\nit's gracefully removed\nfrom the active directory.\n\n1013\n00:42:04,132 --> 00:42:08,540\nSo that's typically what you want\nto do for those old servers.\n\n1014\n00:42:09,662 --> 00:42:12,700\nAll right, so the other server is\nstill promoting, let's check on it.\n\n1015\n00:42:12,700 --> 00:42:13,830\nIt has rebooted.\n\n1016\n00:42:17,080 --> 00:42:19,671\nIt's going to reboot once it\nreplicates and becomes a DC.\n\n1017\n00:42:19,671 --> 00:42:22,332\nSo it should come up here and\n\n1018\n00:42:22,332 --> 00:42:27,320\nlet me just check on one\nthing over here real quick.\n\n1019\n00:42:27,320 --> 00:42:33,096\nI think we're fine.\n\n1020\n00:42:33,096 --> 00:42:36,939\nYeah, all right, so this guy's still\nfiring up, and what we should see now is\n\n1021\n00:42:36,939 --> 00:42:39,980\nthe server is not gonna look\ntoo terribly different, right?\n\n1022\n00:42:39,980 --> 00:42:44,600\nIt's going to be domain1-DC2,\nbut it is a domain controller.\n\n1023\n00:42:44,600 --> 00:42:46,120\n>> How do I know it's a domain controller?\n\n1024\n00:42:47,200 --> 00:42:48,440\nTwo easy ways to check.\n\n1025\n00:42:48,440 --> 00:42:49,810\n>> Couple things.\n\n1026\n00:42:49,810 --> 00:42:52,840\n>> One way is to go into\nActive Directory Users and Computers.\n\n1027\n00:42:52,840 --> 00:42:55,255\n>> Little info right there, you can see\nDomain Services listed on your screen,\n\n1028\n00:42:55,255 --> 00:42:56,268\nthat's always a good sign too.\n\n1029\n00:42:56,268 --> 00:42:57,162\n>> Yeah, now-.\n>> [LAUGH]\n\n1030\n00:42:57,162 --> 00:42:57,825\n>> Do you.\n\n1031\n00:42:57,825 --> 00:42:59,580\n>> Although, yeah.\n[LAUGH]\n\n1032\n00:42:59,580 --> 00:43:01,040\n>> Yeah, if you just installed the binary,\n\n1033\n00:43:01,040 --> 00:43:06,080\nsometimes you'll see that so\nit's not necessarily the greatest source.\n\n1034\n00:43:06,080 --> 00:43:08,090\n>> Yeah, open up,\nsee if the tools are there, first of all.\n\n1035\n00:43:08,090 --> 00:43:10,300\nCuz when you make it a domain controller,\ntools should have been added,\n\n1036\n00:43:10,300 --> 00:43:11,750\nyour consoles.\n\n1037\n00:43:11,750 --> 00:43:12,988\nThen see if you can open up the consoles.\n\n1038\n00:43:12,988 --> 00:43:18,380\nGo into Active Directory,\nsay Users and Computers.\n\n1039\n00:43:18,380 --> 00:43:19,310\nLooking good.\n\n1040\n00:43:19,310 --> 00:43:22,590\n>> We can go into\nthe Domain Controllers OU and\n\n1041\n00:43:22,590 --> 00:43:25,760\nhopefully I see my new machine\nright there, which I do.\n\n1042\n00:43:25,760 --> 00:43:27,510\n>> Nice.\n>> So that's a pretty good indicator that\n\n1043\n00:43:27,510 --> 00:43:29,040\nI am now a domain controller.\n\n1044\n00:43:29,040 --> 00:43:32,230\nThat's one way, another way I\nlike to check, is if you fire up\n\n1045\n00:43:32,230 --> 00:43:37,120\ncomputer management, you should no longer\nhave any local users in groups, right?\n\n1046\n00:43:37,120 --> 00:43:39,750\nA domain controller doesn't\nhave local users in groups\n\n1047\n00:43:39,750 --> 00:43:40,420\n>> So we can go in and\n\n1048\n00:43:40,420 --> 00:43:42,140\ncheck that just to be sure.\n\n1049\n00:43:42,140 --> 00:43:45,810\nA member server, a standard load server,\ndoes have local users in groups.\n\n1050\n00:43:45,810 --> 00:43:48,950\nSo looking here in my System Tools,\nI don't even see the option.\n\n1051\n00:43:48,950 --> 00:43:50,740\n>> It's gone.\n>> Yeah so-\n\n1052\n00:43:50,740 --> 00:43:51,340\n>> Then we could check.\n\n1053\n00:43:51,340 --> 00:43:55,000\nIf we wanted to open up File Explorer,\nwe could go into C:\\Windows\\System32.\n\n1054\n00:43:55,000 --> 00:43:57,110\nWe'd see an NTDS folder\nwhere our database.\n\n1055\n00:43:57,110 --> 00:43:59,340\nWe'd see our sys file folder.\n\n1056\n00:43:59,340 --> 00:44:02,410\nJust letting us know that everything\nhad replicated over from that existing\n\n1057\n00:44:02,410 --> 00:44:03,730\ndomain controller, and we were good to go.\n\n1058\n00:44:04,780 --> 00:44:06,090\n>> All right, so we are rocking there.\n\n1059\n00:44:06,090 --> 00:44:08,660\nSo we're now a 2012 R2 DC.\n\n1060\n00:44:08,660 --> 00:44:12,110\nNow, we're technically running in,\nwe'll call it mixed mode.\n\n1061\n00:44:12,110 --> 00:44:13,045\n>> Yeah, we went from 2000, yeah.\n\n1062\n00:44:13,045 --> 00:44:17,595\n>> So we've got our 2008 R2 machine,\nwe've got our 2012 R2 machine.\n\n1063\n00:44:17,595 --> 00:44:18,953\nThey're both up, they're both happy.\n\n1064\n00:44:18,953 --> 00:44:20,675\nThey're replicating between each other.\n\n1065\n00:44:20,675 --> 00:44:21,455\nEverything's great, right?\n\n1066\n00:44:21,455 --> 00:44:23,315\n>> We can run it just like\nthis as long as we want it.\n\n1067\n00:44:23,315 --> 00:44:25,165\n>> As long as we want it, but.\n\n1068\n00:44:25,165 --> 00:44:26,285\n>> Unless.\n>> [LAUGH] But\n\n1069\n00:44:26,285 --> 00:44:28,420\nthere's some things that we wanna do.\n\n1070\n00:44:28,420 --> 00:44:31,600\nWe do want to get rid of that 2008\ndomain controller at some point.\n\n1071\n00:44:31,600 --> 00:44:33,160\nSo eventually you'll demote it.\n\n1072\n00:44:33,160 --> 00:44:38,410\nAnd to demote it all you do, and again,\nit's not a 2008 exam but just for your own\n\n1073\n00:44:38,410 --> 00:44:43,840\nreference, in your Server Manager > Roles\nand Active Directory Domain Services.\n\n1074\n00:44:43,840 --> 00:44:46,890\nAnd in the Roles screen,\nif you scroll down,\n\n1075\n00:44:46,890 --> 00:44:50,837\nyou'll find under the AD Tools,\ndcpromo, right there.\n\n1076\n00:44:50,837 --> 00:44:51,390\n>> All right.\n\n1077\n00:44:51,390 --> 00:44:52,650\n>> And you'll run that dcpromo, and\n\n1078\n00:44:52,650 --> 00:44:56,150\nthat'll run you through the demotion\nbecause it promotes and demotes.\n\n1079\n00:44:56,150 --> 00:44:57,320\nIt does both.\n\n1080\n00:44:57,320 --> 00:44:58,540\n>> That's a smart little tool.\n\n1081\n00:44:58,540 --> 00:45:01,730\n>> So, that's one step that\nwe might follow up with.\n\n1082\n00:45:01,730 --> 00:45:06,418\nAnother step that we need\nto follow up with is in\n\n1083\n00:45:06,418 --> 00:45:11,951\nthe Active Directory in\nWindows Server 2008 and,\n\n1084\n00:45:11,951 --> 00:45:15,930\nearlier, it used a system called FRS.\n\n1085\n00:45:15,930 --> 00:45:19,601\nFile Replication Services, to replicate\nthe Active Directory between the servers.\n\n1086\n00:45:19,601 --> 00:45:20,940\nAll right?\n\n1087\n00:45:20,940 --> 00:45:24,330\nFRS was introduced in Windows 2000, right?\n\n1088\n00:45:24,330 --> 00:45:26,100\nIt's old and, it sucks.\n\n1089\n00:45:26,100 --> 00:45:27,289\n[LAUGH]\n>> [LAUGH]\n\n1090\n00:45:27,289 --> 00:45:28,470\n>> It's not really a great way\n\n1091\n00:45:28,470 --> 00:45:29,088\nto phrase it.\n\n1092\n00:45:29,088 --> 00:45:32,130\n>> [LAUGH]\n>> FRS is not the most reliable.\n\n1093\n00:45:32,130 --> 00:45:33,353\nA lot of people had issues with it.\n\n1094\n00:45:33,353 --> 00:45:33,991\n>> It's not.\n\n1095\n00:45:33,991 --> 00:45:35,860\nYeah, and\nthen troubleshooting was just a nightmare.\n\n1096\n00:45:35,860 --> 00:45:38,360\nI mean it was not easy to work with,\nit really wasn't.\n\n1097\n00:45:38,360 --> 00:45:41,330\nAnd it's sorta replicating that\nsysvol folder back and forth.\n\n1098\n00:45:41,330 --> 00:45:46,680\n>> So in Windows Server 2008 R2,\nMicrosoft introduced what was called DFSR.\n\n1099\n00:45:46,680 --> 00:45:50,200\nThe distributed file system replication,\nDFSR.\n\n1100\n00:45:50,200 --> 00:45:53,480\nAnd it used some of the DFS\nfunctionality for replicating.\n\n1101\n00:45:53,480 --> 00:45:55,409\nAnd DFS is a part of\nthe Windows operating system.\n\n1102\n00:45:55,409 --> 00:45:56,700\nIt's been there for a long time.\n>> Right.\n\n1103\n00:45:56,700 --> 00:46:00,210\n>> And it works a lot more\nreliably that FRS does.\n\n1104\n00:46:00,210 --> 00:46:06,700\nWell, because that was new in R2, Windows\n2008 defaults to FRS, the old style.\n\n1105\n00:46:06,700 --> 00:46:11,635\nSo if you have 2000,\n2003, 2008, or 2008R2.\n\n1106\n00:46:11,635 --> 00:46:14,016\nAll four of those default to FRS.\n\n1107\n00:46:14,016 --> 00:46:14,689\nAll right?\n\n1108\n00:46:14,689 --> 00:46:19,327\nSo when I just promoted that 2012 R2\ndomain controller, it saw that and\n\n1109\n00:46:19,327 --> 00:46:20,260\nit said.\n\n1110\n00:46:20,260 --> 00:46:23,060\nOh, you got these old guys running FRS.\n\n1111\n00:46:23,060 --> 00:46:25,100\nI better run FRS also.\n\n1112\n00:46:25,100 --> 00:46:29,010\nSo even though we've got the latest and\ngreatest domain controller now at OS,\n\n1113\n00:46:29,010 --> 00:46:32,630\nwe're still running the old\ncrummy applications, right?\n\n1114\n00:46:32,630 --> 00:46:34,720\nSo we need to upgrade that.\n\n1115\n00:46:34,720 --> 00:46:36,465\nWe need to get it to move over to DFSR.\n\n1116\n00:46:36,465 --> 00:46:41,100\nNow, Windows 2000,\nWindows Server 2003 do not support DFSR.\n\n1117\n00:46:41,100 --> 00:46:42,431\nAnd in fact, Mike do you know,\ndoes Windows Server 2008\n\n1118\n00:46:42,431 --> 00:46:44,090\n>> Now 2008 does, yep.\n\n1119\n00:46:44,090 --> 00:46:47,660\n>> Okay, I know 2008 R2 does,\nand 2008 does also.\n\n1120\n00:46:47,660 --> 00:46:52,220\nSo we can get them to switch to DFSR,\nthey just don't do it by themselves.\n\n1121\n00:46:52,220 --> 00:46:57,905\nSo before we get rid of that 2008 box,\nit's good idea to move over to DFSR.\n\n1122\n00:46:57,905 --> 00:47:00,737\nYou can do it afterwards, but\nI like to do it beforehand,\n\n1123\n00:47:00,737 --> 00:47:03,160\njust to make sure everything's\non the up and up.\n\n1124\n00:47:03,160 --> 00:47:06,250\n>> And I believe, and one thing\nwe'll point out, too, to go to this,\n\n1125\n00:47:06,250 --> 00:47:09,016\nbecause it's not supported\nby anything prior to 2008,\n\n1126\n00:47:09,016 --> 00:47:11,419\nyour domain functional\nlevel has to be at 2008.\n\n1127\n00:47:11,419 --> 00:47:12,300\n>> Oh, yeah.\n\n1128\n00:47:12,300 --> 00:47:15,070\n>> So, yeah, we haven't really talked\nabout the functional levels yet.\n\n1129\n00:47:15,070 --> 00:47:16,620\nI kinda forgot about that when\nwe were planning this out.\n\n1130\n00:47:16,620 --> 00:47:17,690\n>> We should talk about those.\n\n1131\n00:47:17,690 --> 00:47:18,932\n>> Let's talk about those.\n>> Let's definitely,\n\n1132\n00:47:18,932 --> 00:47:20,680\nlet me pull those up real quick.\n\n1133\n00:47:20,680 --> 00:47:22,440\n>> Yeah, we've got two things\nwe were gonna talk about.\n\n1134\n00:47:22,440 --> 00:47:24,720\nWe've got domain,\nwhat's called domain functional level and\n\n1135\n00:47:24,720 --> 00:47:26,770\nthen a forest functional level.\n\n1136\n00:47:26,770 --> 00:47:31,230\nAnd it's really all about,\nwhat I boil it down to is it's\n\n1137\n00:47:31,230 --> 00:47:34,405\nthe minimum operating system\non your domain controllers.\n\n1138\n00:47:34,405 --> 00:47:38,768\nAnd as we were talking when we bring these\nnew operating systems when we move to 2012\n\n1139\n00:47:38,768 --> 00:47:39,737\nand 2012 R2.\n\n1140\n00:47:39,737 --> 00:47:43,367\nWe saw that we had to upgrade the schema\nto support these new objects,\n\n1141\n00:47:43,367 --> 00:47:44,640\nthese new classes.\n\n1142\n00:47:44,640 --> 00:47:47,310\nAnd there could be new capabilities\nthat are introduced with these operating\n\n1143\n00:47:47,310 --> 00:47:48,580\nsystems as well.\n\n1144\n00:47:48,580 --> 00:47:52,343\nBut we can't take advantage of them while\nwe've got some of the older operating\n\n1145\n00:47:52,343 --> 00:47:53,199\nsystems around.\n\n1146\n00:47:53,199 --> 00:47:57,154\nSo the functional level of our domain\nis determined by the lowest version of\n\n1147\n00:47:57,154 --> 00:47:59,871\nthe operating system on\nyour domain controllers.\n\n1148\n00:47:59,871 --> 00:48:02,247\nNow we're not talking your print servers,\nyour file servers,\n\n1149\n00:48:02,247 --> 00:48:03,931\nthey can still be running NT for\nall it cares.\n\n1150\n00:48:03,931 --> 00:48:06,976\nBut, your functional level,\nif we raise that up.\n\n1151\n00:48:06,976 --> 00:48:10,920\nThat determines what the minimum operating\nsystem on our domain controllers is.\n\n1152\n00:48:10,920 --> 00:48:17,130\nAnd, in order to support DFS, or\nDFSR for active directory replication,\n\n1153\n00:48:17,130 --> 00:48:20,470\nwe're going to have to raise our\ndomain functional level to 2008.\n\n1154\n00:48:20,470 --> 00:48:24,850\nThat ensures that I'll never be adding any\n2003 or 2000 prior domain controllers.\n\n1155\n00:48:27,090 --> 00:48:29,960\n>> So let's take a look at this chart,\nthis is on the Microsoft Technet site and\n\n1156\n00:48:29,960 --> 00:48:32,420\nactually here let me add this to\nthe show notes so that we got it.\n\n1157\n00:48:32,420 --> 00:48:33,490\n>> Is that that same bookmark?\n\n1158\n00:48:33,490 --> 00:48:35,490\nI like that one, it's the little chart.\n\n1159\n00:48:35,490 --> 00:48:36,270\n>> Yeah, it's just a chart.\n\n1160\n00:48:36,270 --> 00:48:37,110\nCharts are nice, right?\n\n1161\n00:48:37,110 --> 00:48:37,630\nPeople like charts.\n\n1162\n00:48:37,630 --> 00:48:38,900\n>> I like charts.\n\n1163\n00:48:38,900 --> 00:48:42,150\nAll right, so\nit started back in Windows 2000, right?\n\n1164\n00:48:42,150 --> 00:48:44,140\nWindows 2000 introduced\nthe active directory.\n\n1165\n00:48:44,140 --> 00:48:47,410\n>> Yeah.\n>> If you still had an MT4 domain\n\n1166\n00:48:47,410 --> 00:48:51,880\nyou could run in Windows 2000 mixed mode\nwhere you could still have 2000 domain,\n\n1167\n00:48:51,880 --> 00:48:55,150\nMT4 domain controllers\nmixed with your 2000.\n\n1168\n00:48:55,150 --> 00:48:58,540\nThere were some features,\nlike universal groups, right?\n\n1169\n00:48:58,540 --> 00:49:01,310\nAnd group nesting,\nputting one group inside of another group.\n\n1170\n00:49:01,310 --> 00:49:02,280\nYou couldn't do that in NT4.\n\n1171\n00:49:02,280 --> 00:49:03,260\n>> Right.\n\n1172\n00:49:03,260 --> 00:49:08,490\n>> So in Windows 2000, you had to move\nto Windows 2000 native mode to get that.\n\n1173\n00:49:08,490 --> 00:49:10,950\nIn native mode,\nyou no longer supported NT4.\n\n1174\n00:49:12,080 --> 00:49:16,110\nWe've seen a continuation of that,\nWindows 2003.\n\n1175\n00:49:16,110 --> 00:49:20,050\nWhen you went into Windows 2003, you\ngained support for things like the Netdom\n\n1176\n00:49:20,050 --> 00:49:25,530\nutility and user password attributes, INET\norg stuff for doing exchange migrations.\n\n1177\n00:49:25,530 --> 00:49:28,300\n>> But we couldn't do any of that if I\nstill had 2000 domain controllers on my\n\n1178\n00:49:28,300 --> 00:49:29,380\nnetworks.\n\n1179\n00:49:29,380 --> 00:49:31,000\n>> Yep, you had to go to 2003.\n\n1180\n00:49:31,000 --> 00:49:33,300\n>> Yep.\n>> Windows Server 2008\n\n1181\n00:49:33,300 --> 00:49:34,530\n>> Right there, DFS.\n\n1182\n00:49:34,530 --> 00:49:40,090\nGetting that DFSR support, that was a part\nof being at that 2008 functional level.\n\n1183\n00:49:40,090 --> 00:49:44,950\nOkay, and then you'll see it's kinda\ncontinued on, and you'll see 2008 R2\n\n1184\n00:49:44,950 --> 00:49:49,040\nadded some authentication\nmechanisms Windows Server 2012,\n\n1185\n00:49:49,040 --> 00:49:51,421\nsupport for KDC claims, 2012 R2.\n\n1186\n00:49:51,421 --> 00:49:54,528\n>> [CROSSTALK] Dynamic access control.\n\n1187\n00:49:54,528 --> 00:49:57,110\n>> Each one adding some\nadditional functionality.\n\n1188\n00:49:57,110 --> 00:50:01,230\nIf you need those features you've\ngotta raise your functional level.\n\n1189\n00:50:01,230 --> 00:50:04,450\nAnd if I go to the Windows Server\n2012 R2 functional level,\n\n1190\n00:50:04,450 --> 00:50:06,530\nI can no longer have even 2012\n>> That's right.\n\n1191\n00:50:06,530 --> 00:50:08,620\n>> Domain controls, they've gotta be R2.\n\n1192\n00:50:08,620 --> 00:50:10,100\nSo it's kinda requirement.\n\n1193\n00:50:10,100 --> 00:50:13,100\n>> And you've really gotta worry,\nI don't know what you think about this,\n\n1194\n00:50:13,100 --> 00:50:16,410\nI always think, well, let me look at\nthe features and then decide if I want to.\n\n1195\n00:50:16,410 --> 00:50:19,625\nYou don't want to just install 2012 and\nimmediately go to that.\n\n1196\n00:50:19,625 --> 00:50:21,350\nCause there's a chance\nyou might need a 2012 or\n\n1197\n00:50:21,350 --> 00:50:23,980\n2008 R2 domain controller at some point.\n\n1198\n00:50:23,980 --> 00:50:26,960\nAnd you kinda shoot yourself in the foot\n>> Cause you can't go backwards.\n\n1199\n00:50:26,960 --> 00:50:27,480\n>> That's right.\n\n1200\n00:50:27,480 --> 00:50:28,760\nYou can't go back.\n\n1201\n00:50:28,760 --> 00:50:30,860\n>> Yeah, it's a one way migration.\n\n1202\n00:50:30,860 --> 00:50:33,440\nIf you make this change,\nif you raise your functional level, and\n\n1203\n00:50:33,440 --> 00:50:34,960\nit does decide you need to undo it,\n\n1204\n00:50:34,960 --> 00:50:38,500\nand you actually have to restore from\nbackup all of your domain controllers.\n\n1205\n00:50:38,500 --> 00:50:39,160\n>> Yup.\n>> Which is not\n\n1206\n00:50:39,160 --> 00:50:40,140\nsomething that's going to happen.\n\n1207\n00:50:40,140 --> 00:50:40,750\n>> No, definitely not.\n\n1208\n00:50:40,750 --> 00:50:42,690\n>> So\nit might as well just be a one way change.\n\n1209\n00:50:42,690 --> 00:50:44,380\nDon't even pretend that you can roll back.\n\n1210\n00:50:44,380 --> 00:50:45,310\n>> Exactly.\n\n1211\n00:50:45,310 --> 00:50:46,790\n>> So yeah, it is tough.\n\n1212\n00:50:46,790 --> 00:50:51,200\nIf you don't need the feature,\nthere's no reason to push you to do it.\n\n1213\n00:50:51,200 --> 00:50:51,710\n>> Right.\n\n1214\n00:50:51,710 --> 00:50:53,580\n>> The exception would be the DFSR stuff.\n\n1215\n00:50:53,580 --> 00:50:56,870\nI've worked with both replication,\nI'll tell you, the FRS is a nightmare.\n\n1216\n00:50:56,870 --> 00:50:57,460\n>> Yeah.\n>> And so\n\n1217\n00:50:57,460 --> 00:50:59,670\nthe sooner you get to DFSR the better.\n\n1218\n00:50:59,670 --> 00:51:00,360\n>> Yep.\n>> So\n\n1219\n00:51:00,360 --> 00:51:03,740\ngetting to that 2008 functional\nlevel is really handy.\n\n1220\n00:51:03,740 --> 00:51:08,910\nGetting to 2012, 2012 R2, if you're not\nusing these features then not necessarily.\n\n1221\n00:51:08,910 --> 00:51:09,650\n>> Better hold off.\n\n1222\n00:51:09,650 --> 00:51:13,270\n>> Now, I've been talking about\nthe domain functional level.\n\n1223\n00:51:13,270 --> 00:51:17,470\nThere's also the forest functional level,\nbut you'll notice in a lot of these,\n\n1224\n00:51:17,470 --> 00:51:19,980\nlike forest functional level,\nit may not add anything.\n\n1225\n00:51:19,980 --> 00:51:21,030\nSometimes they don't.\n\n1226\n00:51:21,030 --> 00:51:21,600\n>> Right.\n>> So\n\n1227\n00:51:21,600 --> 00:51:25,870\nWindows Server 2003 added the ability\nto do forests trust, domain renames,\n\n1228\n00:51:25,870 --> 00:51:26,920\nthings like that.\n\n1229\n00:51:26,920 --> 00:51:30,120\n>> For sure, 2012 is one of those ones\nthat didn't bring anything along with it.\n\n1230\n00:51:30,120 --> 00:51:31,840\n>> Let me see if I can find it,\nhere we go.\n\n1231\n00:51:31,840 --> 00:51:35,960\nSo Windows Server 2012 all the features\nthat are available in 2008 R2 are here,\n\n1232\n00:51:35,960 --> 00:51:37,560\nno additional features.\n\n1233\n00:51:37,560 --> 00:51:39,960\nAnd then you'll see the same\nthing with 2012 R2.\n\n1234\n00:51:39,960 --> 00:51:41,140\nNo additional features, and\n\n1235\n00:51:41,140 --> 00:51:43,960\nthat's why when we did that AD prep,\nnothing really happened.\n\n1236\n00:51:43,960 --> 00:51:46,480\nYou know, it's not like there were really\nany features that were being added there\n\n1237\n00:51:46,480 --> 00:51:48,820\nbecause they were already present.\n\n1238\n00:51:48,820 --> 00:51:52,090\nAnd so we said the domain functional level\nis determined by the lowest operating\n\n1239\n00:51:52,090 --> 00:51:53,820\nsystem on your domain controllers.\n\n1240\n00:51:53,820 --> 00:51:57,750\nYour forest functional level is determined\nby your lowest domain functional level.\n\n1241\n00:51:57,750 --> 00:52:00,500\nSo if you have four domains\nin your forest, and\n\n1242\n00:52:00,500 --> 00:52:02,870\nyou just have to raise each\none of those domains up,\n\n1243\n00:52:02,870 --> 00:52:06,170\nbefore you can raise the forest\nup to that particular level.\n\n1244\n00:52:06,170 --> 00:52:10,160\n>> All right, so for us, we just need\nto make sure that we're at least\n\n1245\n00:52:10,160 --> 00:52:14,450\n>> 2008, so that we can do DFSR, right.\n\n1246\n00:52:14,450 --> 00:52:15,870\nWhich we're pretty much going to be.\n\n1247\n00:52:15,870 --> 00:52:19,240\n>> We should be since we gotta 2008 and\na 2012 domain controller exactly.\n\n1248\n00:52:19,240 --> 00:52:23,900\n>> But let's just verify to make sure,\nalways better to be safe than sorry.\n\n1249\n00:52:23,900 --> 00:52:27,030\nSo, the easiest way,\nI don't know why I don't use the.\n\n1250\n00:52:27,030 --> 00:52:28,200\nShortcut right here.\n\n1251\n00:52:28,200 --> 00:52:30,150\n>> I want to go to active\ndirectory users and computers.\n\n1252\n00:52:30,150 --> 00:52:34,580\n>> They're just trying to take\nadvantage of that 2012 start screen.\n\n1253\n00:52:34,580 --> 00:52:40,420\n>> And for the domain, we just go into\nactive directory users and computers,\n\n1254\n00:52:40,420 --> 00:52:42,810\nyou right click on your domain name\n>> And,\n\n1255\n00:52:42,810 --> 00:52:45,940\nyou can choose Raise Domain Functionality.\n\n1256\n00:52:45,940 --> 00:52:47,490\nAnd, that doesn't mean\nit's going to raise it.\n\n1257\n00:52:47,490 --> 00:52:49,230\nIt takes us to the screen\nthat lets us see.\n\n1258\n00:52:49,230 --> 00:52:50,920\nSo, don't panic.\n\n1259\n00:52:50,920 --> 00:52:54,020\nAnd, it'll show you what\nyour current level is.\n\n1260\n00:52:54,020 --> 00:52:56,230\nAnd, what you can raise it to.\n\n1261\n00:52:56,230 --> 00:52:57,430\nMy current level is 2008 R2.\n\n1262\n00:52:57,430 --> 00:52:59,470\nIt won't let me raise it higher.\n\n1263\n00:52:59,470 --> 00:53:00,400\nWhy?\n\n1264\n00:53:00,400 --> 00:53:02,500\n>> I still have a 2008\nR2 domain controller.\n\n1265\n00:53:02,500 --> 00:53:03,280\n>> That's right.\n\n1266\n00:53:03,280 --> 00:53:06,990\n>> So it won't let me move up to 2012 or\n2012 R2 untill I ditch that 2008 one.\n\n1267\n00:53:06,990 --> 00:53:09,160\nBut I'm not in a hurry,\n\n1268\n00:53:09,160 --> 00:53:11,840\nbecause I know that those don't\nadd a feature that I need.\n\n1269\n00:53:11,840 --> 00:53:12,390\n>> Exactly.\n\n1270\n00:53:12,390 --> 00:53:13,160\n>> I just need 2008.\n\n1271\n00:53:13,160 --> 00:53:14,060\nI didn't even need 2008 R2.\n\n1272\n00:53:14,060 --> 00:53:17,110\n>> So just a quick way to verify,\ndidn't have to change anything.\n\n1273\n00:53:17,110 --> 00:53:18,200\nDouble check.\n\n1274\n00:53:18,200 --> 00:53:21,350\n>> Now the forest is actually\ndone in a different place, right?\n\n1275\n00:53:21,350 --> 00:53:22,135\nThant's done.\n\n1276\n00:53:22,135 --> 00:53:24,600\n>> Here we go again.\n>> I know I need to go this way.\n\n1277\n00:53:24,600 --> 00:53:28,710\n>> Action directory domains and\ntrusts that's where I usually do it.\n\n1278\n00:53:28,710 --> 00:53:31,560\n>> You don't see the forest in\nthe active directory users and\n\n1279\n00:53:31,560 --> 00:53:33,440\ncomputer screens you just do one domain.\n\n1280\n00:53:33,440 --> 00:53:36,890\nBut when you go to active directories,\ndomains and trusts you actually see.\n\n1281\n00:53:36,890 --> 00:53:39,330\nThe forest,\nall the domains that are in your forest.\n\n1282\n00:53:39,330 --> 00:53:42,150\nAnd see you can right click up here\non active directory domains and\n\n1283\n00:53:42,150 --> 00:53:45,300\ntrust me you'll see rays\nforest functional level.\n\n1284\n00:53:45,300 --> 00:53:47,030\nAnd, here we can raise it again,\n\n1285\n00:53:47,030 --> 00:53:50,620\nI can't raise it because I still\nhave that 2008 R2 domain controller.\n\n1286\n00:53:50,620 --> 00:53:52,410\n>> Do you know you can do\nyour domain in here too.\n\n1287\n00:53:53,540 --> 00:53:55,360\n>> You can.\n>> You can right click on that domain.\n\n1288\n00:53:55,360 --> 00:53:56,280\nNo way.\n>> Sure, try it, try it.\n\n1289\n00:53:56,280 --> 00:53:57,400\nCome on, let's be brave.\n\n1290\n00:53:57,400 --> 00:53:58,550\nLive on the edge.\n\n1291\n00:53:58,550 --> 00:53:59,540\n>> Hey, you can.\n\n1292\n00:53:59,540 --> 00:54:00,250\nLook at that!\n\n1293\n00:54:00,250 --> 00:54:01,030\nOne stop shop.\n\n1294\n00:54:01,030 --> 00:54:02,325\n>> Yeah,\nI don't know when they added that.\n\n1295\n00:54:02,325 --> 00:54:04,330\nCause I know, back in the past,\nthat you could not.\n\n1296\n00:54:04,330 --> 00:54:05,610\nYou had to go to two separate tools.\n\n1297\n00:54:05,610 --> 00:54:06,460\n>> I did not know that.\n\n1298\n00:54:06,460 --> 00:54:09,770\n>> Somewhere around 2008,\nI think they dropped that in there on us.\n\n1299\n00:54:09,770 --> 00:54:11,782\n>> That's going to make me so\nmuch more efficient now.\n\n1300\n00:54:11,782 --> 00:54:12,409\n>> [LAUGH] I know!\n\n1301\n00:54:12,409 --> 00:54:13,820\n>> I'll be able to raise those domains.\n\n1302\n00:54:13,820 --> 00:54:19,450\nIt's funny because this is the kind of\nthing you do once every four years or\n\n1303\n00:54:19,450 --> 00:54:20,180\nsomething.\n\n1304\n00:54:21,420 --> 00:54:25,030\nAnyhow, but yeah I had no idea.\n\n1305\n00:54:25,030 --> 00:54:25,780\n>> We're good now.\n\n1306\n00:54:25,780 --> 00:54:26,850\n>> We're good.\n\n1307\n00:54:26,850 --> 00:54:30,070\nSo now we're ready to actually\ntell our system to move.\n\n1308\n00:54:30,070 --> 00:54:34,200\nNow the problem is, Mike you did a great\njob detailing, the different steps,\n\n1309\n00:54:34,200 --> 00:54:36,410\nthe different Phases we go through.\n\n1310\n00:54:36,410 --> 00:54:36,930\nUh-huh.\n\n1311\n00:54:36,930 --> 00:54:38,820\n>> What I didn't mention was\n>> Mm-hm.\n\n1312\n00:54:38,820 --> 00:54:41,860\n>> How long it could take, if you've got\n[LAUGH] a bunch of domain controllers\n\n1313\n00:54:41,860 --> 00:54:44,680\nin a lot of different geographical areas,\nit can take a while for\n\n1314\n00:54:44,680 --> 00:54:46,010\nthis change to happen.\n\n1315\n00:54:46,010 --> 00:54:46,880\nMm-hm.\n>> So,\n\n1316\n00:54:46,880 --> 00:54:50,530\nthe last one that I did in a production\nenvironment, you basically have,\n\n1317\n00:54:50,530 --> 00:54:52,050\nis it four commands when you run?\n\n1318\n00:54:52,050 --> 00:54:53,680\nPretty sure there's four, right?\n\n1319\n00:54:53,680 --> 00:54:56,310\n>> Perhaps.\n>> As far as the DFSX\n\n1320\n00:54:56,310 --> 00:54:57,490\n>> Oh, there's four stages, yep.\n\n1321\n00:54:57,490 --> 00:54:58,260\nFour stages.\n\n1322\n00:54:58,260 --> 00:54:59,800\n>> So there's four stages we go through,\n\n1323\n00:54:59,800 --> 00:55:03,800\nand the last time I did this to\nproduction, I did one stage per day, so\n\n1324\n00:55:03,800 --> 00:55:07,500\nI did a 24 hour period in between each\nstage to make sure that it replicated out\n\n1325\n00:55:07,500 --> 00:55:10,440\nto all the DCs, that everybody was happy,\nthat we were able to move forward.\n\n1326\n00:55:10,440 --> 00:55:12,230\nIt's not like I was in\na rush to get there.\n\n1327\n00:55:12,230 --> 00:55:13,950\n>> Right.\n>> So I just took four days to do it.\n\n1328\n00:55:13,950 --> 00:55:18,430\nWell, this episode is not going to be four\ndays long, so we are going to try and\n\n1329\n00:55:18,430 --> 00:55:20,010\n>> We're going to try to hurry.\n\n1330\n00:55:20,010 --> 00:55:23,660\n>> But just be aware that the larger\nyour active directory is,\n\n1331\n00:55:23,660 --> 00:55:25,600\nthat's the more data\nthat has to replicate.\n\n1332\n00:55:25,600 --> 00:55:28,080\nThis could take a while in\na production environment.\n\n1333\n00:55:28,080 --> 00:55:29,810\nAbsolutely.\n>> Yeah, definitely is not something\n\n1334\n00:55:29,810 --> 00:55:31,510\nyou're gonna come in at nine\no'clock in the morning and\n\n1335\n00:55:31,510 --> 00:55:34,322\nhope to be done before lunch or something.\n\n1336\n00:55:34,322 --> 00:55:36,750\n>> All right, so the main process\nthat we're gonna go through,\n\n1337\n00:55:36,750 --> 00:55:40,150\nMicrosoft gives us a nice little\ncommand line utility, and\n\n1338\n00:55:40,150 --> 00:55:43,690\nlet me just bump up my font size again\nsince I'm on a different server now.\n\n1339\n00:55:43,690 --> 00:55:47,730\nAnd it's basically called, is it DFSR\n>> DFSR or mig, or\n\n1340\n00:55:47,730 --> 00:55:51,360\nDFSR migration, I guess,\nto remember the acronym.\n\n1341\n00:55:51,360 --> 00:55:54,350\nBut DFSR mig is the command.\n\n1342\n00:55:54,350 --> 00:55:56,728\n>> There we go, and\nif you just run it by itself,\n\n1343\n00:55:56,728 --> 00:56:00,357\nit will give you a kind of little\ndescription of what's going on, and\n\n1344\n00:56:00,357 --> 00:56:03,630\nwhat we really need to pay attention\nto is this guy right here.\n\n1345\n00:56:03,630 --> 00:56:05,232\nSet global state.\n\n1346\n00:56:05,232 --> 00:56:10,511\nSo DFSR mig,\n/SetGlobalState followed by a number.\n\n1347\n00:56:10,511 --> 00:56:12,890\nAnd there's the four stages\nthat Mike was talking about.\n\n1348\n00:56:12,890 --> 00:56:14,780\n>> Right.\n>> Let's run over these again, right?\n\n1349\n00:56:14,780 --> 00:56:15,345\nStart.\n\n1350\n00:56:15,345 --> 00:56:16,190\n>> Mm-hm.\n\n1351\n00:56:16,190 --> 00:56:20,580\n>> That's when we tell all the servers\nthat, or all the domain controllers.\n\n1352\n00:56:20,580 --> 00:56:23,070\nBut hey,\nwe're gonna be migrating over to DFSR.\n\n1353\n00:56:23,070 --> 00:56:25,920\nSo if you don't have it, you should\nprobably get it installed, right?\n\n1354\n00:56:25,920 --> 00:56:27,750\n>> Right, yep, mm-hm.\n\n1355\n00:56:27,750 --> 00:56:29,395\nYeah, so that kinda gets everything ready.\n\n1356\n00:56:29,395 --> 00:56:32,400\nCuz it lets everybody know, hey,\nwe're getting ready to do this migration.\n\n1357\n00:56:32,400 --> 00:56:35,420\nSo now, what we're gonna have is,\nwe're still using FRS.\n\n1358\n00:56:35,420 --> 00:56:36,790\nWe've still got our normal SysFile folder.\n\n1359\n00:56:36,790 --> 00:56:39,014\nThen we're gonna go into\nthis prepared phase.\n\n1360\n00:56:39,014 --> 00:56:43,304\nNow once you gotta run this command,\nyou're basically going to do a DFSR mig,\n\n1361\n00:56:43,304 --> 00:56:44,570\nSetMigrationState.\n\n1362\n00:56:44,570 --> 00:56:48,400\nAnd then we're gonna do 0,\nto put it in that start phase.\n\n1363\n00:56:48,400 --> 00:56:50,850\nAnd then as Don was saying,\nyou gotta wait till\n\n1364\n00:56:50,850 --> 00:56:54,190\nevery Domain Controller out\nthere knows about this change.\n\n1365\n00:56:54,190 --> 00:56:57,680\nSo there's that command,\nGetGlobalState, and GetMigrationState.\n\n1366\n00:56:57,680 --> 00:57:01,550\nWe're gonna use those to see either where\nthat domain controller was sitting at,\n\n1367\n00:57:01,550 --> 00:57:05,710\nis at in the migration process, or where\nall of our domain controllers are at for\n\n1368\n00:57:05,710 --> 00:57:06,580\nthe migration process.\n\n1369\n00:57:06,580 --> 00:57:07,780\nAnd we can't go on,\n\n1370\n00:57:07,780 --> 00:57:12,640\nuntil we return the fact that the global\nstate is at zero in this case.\n\n1371\n00:57:12,640 --> 00:57:14,760\nSo, I don't know if we\nwant to go ahead and\n\n1372\n00:57:14,760 --> 00:57:15,510\nstart it, or-\n>> Yeah,\n\n1373\n00:57:15,510 --> 00:57:19,920\nwe'll get it started just because\nI don't want to be too patient.\n\n1374\n00:57:19,920 --> 00:57:20,708\n>> [CROSSTALK] Go ahead and do it then.\n\n1375\n00:57:20,708 --> 00:57:22,913\nGet first,\njust to see what it is before you started.\n\n1376\n00:57:22,913 --> 00:57:25,560\nHit global state.\n\n1377\n00:57:25,560 --> 00:57:28,637\n>> All right, so our GetGlobalState\nright now is 'Eliminated'.\n\n1378\n00:57:28,637 --> 00:57:30,139\n>> [CROSSTALK] 'Eliminated'.\nYeah, so nothing.\n\n1379\n00:57:30,139 --> 00:57:33,330\n>> Yeah,\nwe don't have DFSL are implemented at all.\n\n1380\n00:57:33,330 --> 00:57:33,870\n>> Right.\n\n1381\n00:57:33,870 --> 00:57:36,595\n>> All right, so\nthen we'll do a SetGlobalState.\n\n1382\n00:57:36,595 --> 00:57:39,353\n>> Mm-hm.\n>> And I'm gonna set it to 0,\n\n1383\n00:57:39,353 --> 00:57:41,492\nwhich is getting ready.\n\n1384\n00:57:41,492 --> 00:57:42,060\n>> Which is that start phase, yeah.\n\n1385\n00:57:42,060 --> 00:57:46,360\nSo this should let everybody\nknow [COUGH] excuse me, so\n\n1386\n00:57:46,360 --> 00:57:49,460\nnow we've got new global state is 'Start'.\n\n1387\n00:57:49,460 --> 00:57:50,150\n>> Invalid state?\n\n1388\n00:57:50,150 --> 00:57:51,940\n>> I know, and\nit always says that even though but\n\n1389\n00:57:51,940 --> 00:57:53,380\nif you don't do that\nit'll give you problems.\n\n1390\n00:57:53,380 --> 00:57:56,440\nSo you really want to go ahead and\nset it to that state zero.\n\n1391\n00:57:56,440 --> 00:57:58,460\nAnd now if you do another GetGlobalState,\n\n1392\n00:57:58,460 --> 00:58:03,800\nit should show that we are, still says\n'Eliminated', which is kind of odd.\n\n1393\n00:58:03,800 --> 00:58:05,070\n>> [CROSSTALK] Well, it-\n>> Do a GetMigrationState.\n\n1394\n00:58:05,070 --> 00:58:06,360\nI'll see what that comes up.\n\n1395\n00:58:06,360 --> 00:58:07,760\n>> And we do have to wait, right?\n\n1396\n00:58:07,760 --> 00:58:10,970\nBecause the global state\nwill only update when\n\n1397\n00:58:10,970 --> 00:58:15,040\nall of your domain controllers are in\nagreement so if anybody is in disagreement\n\n1398\n00:58:15,040 --> 00:58:18,710\nit's still going to reflect the last\none where everybody was there.\n\n1399\n00:58:18,710 --> 00:58:22,025\nGet migration state is a little more\nuseful because it will show each\n\n1400\n00:58:22,025 --> 00:58:22,710\nof the DCs.\n\n1401\n00:58:22,710 --> 00:58:25,550\nAnd so we can see here, all domain\ncontrollers have migrated successfully to\n\n1402\n00:58:25,550 --> 00:58:27,240\nthe global state 'Eliminated'.\n\n1403\n00:58:27,240 --> 00:58:28,597\nMigration has reached a consistent state.\n\n1404\n00:58:28,597 --> 00:58:30,286\nWell, that's not what I want.\n\n1405\n00:58:30,286 --> 00:58:33,100\nI want us to get to that\nglobal state of zero.\n\n1406\n00:58:33,100 --> 00:58:34,418\nAnd, did I do the syntax right?\n\n1407\n00:58:34,418 --> 00:58:37,738\nSetGlobalState and stay at 0,\nthat's what I wanted.\n\n1408\n00:58:37,738 --> 00:58:40,910\n>> You know, I'm honestly thinking\nthey changed that up a little bit.\n\n1409\n00:58:40,910 --> 00:58:44,255\nIt seems migration has reached a\nconsistent state on all domain controllers\n\n1410\n00:58:44,255 --> 00:58:44,835\nsucceeded.\n\n1411\n00:58:44,835 --> 00:58:46,478\nTry it, let's see what happens.\n\n1412\n00:58:46,478 --> 00:58:49,778\nLet's go ahead and do\na SetMigrationState 1, see what happens.\n\n1413\n00:58:49,778 --> 00:58:54,020\n>> Then it's going invalid.\n\n1414\n00:58:54,020 --> 00:58:54,620\n>> There we go.\n\n1415\n00:58:54,620 --> 00:58:57,320\n>> [LAUGH] Have they changed this?\n\n1416\n00:58:58,390 --> 00:58:59,770\n>> No, it's gonna work.\n\n1417\n00:58:59,770 --> 00:59:00,610\nWe're just have to be patient.\n\n1418\n00:59:00,610 --> 00:59:01,520\n>> We're just being impatient?\n\n1419\n00:59:01,520 --> 00:59:02,050\nYeah.\n\n1420\n00:59:02,050 --> 00:59:03,890\nSee that is one of\nthe problems with these.\n\n1421\n00:59:05,750 --> 00:59:07,660\n>> There's two,\nI've read it two different ways.\n\n1422\n00:59:07,660 --> 00:59:10,100\nSome people say you don't have\nto worry about setting state 0,\n\n1423\n00:59:10,100 --> 00:59:12,530\nyou can just jump right into state 1.\n\n1424\n00:59:12,530 --> 00:59:15,548\nI like the other school of thought\nwhere you gotta go ahead and\n\n1425\n00:59:15,548 --> 00:59:17,420\ndo the State 0,\neven though it throws up some errors.\n\n1426\n00:59:17,420 --> 00:59:18,150\nYou go ahead and do it.\n\n1427\n00:59:18,150 --> 00:59:20,560\nThat kinda just lets everybody know,\nhey, we're getting ready to get started.\n\n1428\n00:59:21,780 --> 00:59:25,200\nCuz really,\nstate 1 is what's gonna do the first work.\n\n1429\n00:59:25,200 --> 00:59:29,374\nWhat's gonna happen is, we've already\ngot our normal .sys file folder, and\n\n1430\n00:59:29,374 --> 00:59:32,253\nthat's gonna be replicated\nusing the old school FRS.\n\n1431\n00:59:32,253 --> 00:59:36,578\nAnd so what state 1 is doing,\nis it's creating this new sysvol folder.\n\n1432\n00:59:36,578 --> 00:59:40,600\nIt's gonna be this, sysvol\\dfsr.\n\n1433\n00:59:40,600 --> 00:59:43,560\nOr it might the other way around,\ndfsr-sysvol.\n\n1434\n00:59:43,560 --> 00:59:45,840\nAnd it's gonna create a new folder for\nour sysvol.\n\n1435\n00:59:45,840 --> 00:59:49,890\nRemember sysvol is where we're storing our\nlog on log off start up shut down scripts,\n\n1436\n00:59:49,890 --> 00:59:53,360\nour group policy administrative\ntemplates are gonna be stored there.\n\n1437\n00:59:53,360 --> 00:59:55,230\nSo it's going to create\nthis folder side by side.\n\n1438\n00:59:56,360 --> 00:59:59,190\nEverything's still using\nthe old school FRS.\n\n1439\n00:59:59,190 --> 01:00:02,140\nFRS is still being updated if you\nmake changes to your policies or\n\n1440\n01:00:02,140 --> 01:00:04,740\nscripts still being replicated\nto all domain controllers.\n\n1441\n01:00:04,740 --> 01:00:06,720\nWe're just creating this\nextra folder next to it.\n\n1442\n01:00:06,720 --> 01:00:08,253\n>> Yep.\n>> And getting everything ready to start\n\n1443\n01:00:08,253 --> 01:00:08,792\nthe migration.\n\n1444\n01:00:08,792 --> 01:00:12,634\n>> Well let's do this Mike, because like I\nsaid, I normally run that first command.\n\n1445\n01:00:12,634 --> 01:00:15,664\nI normally come in and\ndo the SetGlobalState 0.\n\n1446\n01:00:15,664 --> 01:00:16,620\n>> Right.\n\n1447\n01:00:16,620 --> 01:00:17,190\n>> Right.\n\n1448\n01:00:17,190 --> 01:00:20,270\n>> And tell it, hey,\nwe're going to be going into it prepared.\n\n1449\n01:00:20,270 --> 01:00:22,129\nAnd I normally wait 24 hours.\n\n1450\n01:00:22,129 --> 01:00:24,474\nSo let's do this,\nlet's stop and take a break.\n\n1451\n01:00:24,474 --> 01:00:25,240\n>> Okay.\n\n1452\n01:00:25,240 --> 01:00:26,901\n>> And we'll wait five minutes.\n\n1453\n01:00:26,901 --> 01:00:27,859\n[LAUGH]\n>> [LAUGH]\n\n1454\n01:00:27,859 --> 01:00:28,658\n>> And we'll give it\n\n1455\n01:00:28,658 --> 01:00:30,470\na second just to see if it gets happy.\n\n1456\n01:00:30,470 --> 01:00:32,860\nBecause it's got to\ncommunicate between the DCs.\n\n1457\n01:00:32,860 --> 01:00:34,870\nIt's got to reach an agreement and\n\n1458\n01:00:34,870 --> 01:00:38,220\nonly when all of the DCs\nreach a consistent state,\n\n1459\n01:00:38,220 --> 01:00:42,020\nthey all say they're preparing, will\nit then say yes, you're now preparing.\n\n1460\n01:00:42,020 --> 01:00:43,710\nAnd then you're starting or\nwhatever it is.\n\n1461\n01:00:43,710 --> 01:00:47,340\nYou go through each of the different\nphases so that's what we need to do.\n\n1462\n01:00:47,340 --> 01:00:48,370\nSo we'll just stop.\n\n1463\n01:00:48,370 --> 01:00:49,040\nWe'll give it a minute.\n\n1464\n01:00:49,040 --> 01:00:50,320\n>> All right.\n>> And we'll go from there.\n\n1465\n01:00:50,320 --> 01:00:51,140\n>> Sounds like a plan.\n\n1466\n01:00:51,140 --> 01:00:51,780\n>> All right.\n\n1467\n01:00:51,780 --> 01:00:52,690\nSo stay tuned.\n\n1468\n01:00:52,690 --> 01:00:53,190\nWe'll be back after this.\n\n1469\n01:01:00,153 --> 01:01:02,406\nAll right welcome back everybody.\n\n1470\n01:01:02,406 --> 01:01:04,687\nIn typical fashion I got\na little impatient and\n\n1471\n01:01:04,687 --> 01:01:08,329\nstarted digging through the event logs and\nthen I remembered something.\n\n1472\n01:01:09,330 --> 01:01:12,689\nBefore the show I brought up these\ndomains to be able use for our labs, and\n\n1473\n01:01:12,689 --> 01:01:16,508\nI forgot something pivotal, which is\nmy first domain controller was a 2008.\n\n1474\n01:01:16,508 --> 01:01:18,041\n[CROSSTALK] It doesn't matter.\n\n1475\n01:01:18,041 --> 01:01:19,236\nIt was a 2008 domain controller.\n\n1476\n01:01:19,236 --> 01:01:24,040\nSince it was the very first one,\nit defaulted to DFSR.\n\n1477\n01:01:24,040 --> 01:01:24,734\nSo it-\n>> It said,\n\n1478\n01:01:24,734 --> 01:01:25,689\nwhy would I wanna use this old stuff.\n\n1479\n01:01:25,689 --> 01:01:26,362\n>> That's right.\n\n1480\n01:01:26,362 --> 01:01:27,483\n[LAUGH]\n>> When there's no old domain\n\n1481\n01:01:27,483 --> 01:01:28,780\ncontrollers in this.\n\n1482\n01:01:28,780 --> 01:01:31,147\n>> So\nthat's why I'm seeing that the state,\n\n1483\n01:01:31,147 --> 01:01:34,250\nthe migration state is already\nflagged as eliminated.\n\n1484\n01:01:34,250 --> 01:01:40,194\nThat means that it has\ncompletely removed the FRS.\n\n1485\n01:01:40,194 --> 01:01:41,802\nYeah, it's gone, it's outta there.\n\n1486\n01:01:41,802 --> 01:01:45,642\nSo, when I try and force it to\nset the migration stay area, the,\n\n1487\n01:01:45,642 --> 01:01:49,149\nwell here where was that command,\nSetGlobalState to 0.\n\n1488\n01:01:49,149 --> 01:01:52,490\nThat's why it's giving me an invalid state\nchange, so I'm trying to roll it back.\n\n1489\n01:01:52,490 --> 01:01:54,115\nSo if I really wanted to do this,\n\n1490\n01:01:54,115 --> 01:01:58,579\nI would have needed to have brought up a\nWindows server 2003 domain controller, and\n\n1491\n01:01:58,579 --> 01:02:02,347\nthen gone to 2008 and then to 2012 and\nthen I'd see this process.\n\n1492\n01:02:02,347 --> 01:02:05,040\nSo that's why it's-\n>> I think we could, and\n\n1493\n01:02:05,040 --> 01:02:05,930\nI could be completely wrong.\n\n1494\n01:02:05,930 --> 01:02:07,844\nBut I think when we installed\nthe 2008 domain controller,\n\n1495\n01:02:07,844 --> 01:02:10,204\nwhere you get the option to choose your\ndomain and forest functional levels-\n\n1496\n01:02:10,204 --> 01:02:10,889\n>> Does it give you the choice?\n\n1497\n01:02:10,889 --> 01:02:13,445\n>> I think if we, I don't know\nif it did or not, but if it did,\n\n1498\n01:02:13,445 --> 01:02:15,809\nwe could have dropped it down there maybe,\nbut yeah.\n\n1499\n01:02:15,809 --> 01:02:19,787\n>> Well, apparently ours defaulted to\nDFSR, so let me just show you the steps.\n\n1500\n01:02:19,787 --> 01:02:22,340\nIt's really pretty straight forward.\n\n1501\n01:02:22,340 --> 01:02:26,730\nBasically we run the SetGlobalState 0 and\nthat's how we get started right?\n\n1502\n01:02:26,730 --> 01:02:31,410\nAnd once that's done you then\ndo the GetMigrationState and\n\n1503\n01:02:31,410 --> 01:02:34,520\nyou basically just keep running\nit until it finally says that\n\n1504\n01:02:34,520 --> 01:02:37,340\nall of your servers have\nreached a consistent state.\n\n1505\n01:02:37,340 --> 01:02:41,120\n>> And they should all say whatever\nstate it is that you are shooting for.\n\n1506\n01:02:41,120 --> 01:02:45,477\nSo if you're saying 0, for example,\nthen they should all say 'Start'.\n\n1507\n01:02:45,477 --> 01:02:46,258\n>> Right.\n>> When it says that\n\n1508\n01:02:46,258 --> 01:02:48,919\nall the main controllers have\nreached a consistent state and\n\n1509\n01:02:48,919 --> 01:02:51,853\nthat state is 'Start' then you're\nready to move to the next one.\n\n1510\n01:02:51,853 --> 01:02:53,632\n>> Right.\n>> And so the next one,\n\n1511\n01:02:53,632 --> 01:02:56,870\nyou would just come in and\nsay SetGlobalState 1.\n\n1512\n01:02:56,870 --> 01:02:59,180\nAnd then that would move\nyou into 'Prepared'.\n\n1513\n01:02:59,180 --> 01:03:03,350\nAnd you'd run that GetMigrationState and\nyou'd wait until everybody was consistent.\n\n1514\n01:03:03,350 --> 01:03:07,050\nAnd you'd go through each of\nthe phases just like Mike described.\n\n1515\n01:03:07,050 --> 01:03:09,047\nAnd when you reached that\nlast phase 'Eliminated'.\n\n1516\n01:03:09,047 --> 01:03:14,281\nThat's when it removes FRS, but in all the\nfirst three stages FRS is still running.\n\n1517\n01:03:14,281 --> 01:03:15,290\n>> Yeah.\n\n1518\n01:03:15,290 --> 01:03:19,860\n>> You're not actually use DFSR until\nyou get to number 2, 'Redirected'.\n\n1519\n01:03:19,860 --> 01:03:22,810\nAnd then when you get to 'Eliminated',\nFRS is gone, that finished it.\n\n1520\n01:03:22,810 --> 01:03:24,330\nSo you just run through each one.\n\n1521\n01:03:24,330 --> 01:03:28,300\nI normally do one a day, over four days,\nand that way you know you get enough\n\n1522\n01:03:28,300 --> 01:03:31,610\ntime in between, replication goes good,\nand you move forward.\n\n1523\n01:03:31,610 --> 01:03:34,500\n>> And you can roll back, and that's why\nthey break it down in these different\n\n1524\n01:03:34,500 --> 01:03:35,990\nstages, because that 'Prepared' stage.\n\n1525\n01:03:35,990 --> 01:03:39,160\nIt's just getting the FRS directory ready.\n\n1526\n01:03:39,160 --> 01:03:42,330\nBut you're still using the FRS\nto replicate everything.\n\n1527\n01:03:42,330 --> 01:03:45,880\nAll the domain controllers are still\nediting group policies from FRS.\n\n1528\n01:03:45,880 --> 01:03:48,570\nStage three or redirect is like all\nright now I'm going to switch over.\n\n1529\n01:03:48,570 --> 01:03:51,925\nNow all of a sudden we are going\nto start using the DFS location to\n\n1530\n01:03:51,925 --> 01:03:54,283\ndo the group policies and\nthings like that.\n\n1531\n01:03:54,283 --> 01:03:55,629\nFRS is still there.\n\n1532\n01:03:55,629 --> 01:03:57,058\nFRS is still being updated.\n\n1533\n01:03:57,058 --> 01:03:58,196\nIt's still being replicated.\n\n1534\n01:03:58,196 --> 01:04:01,933\nThat way if something goes wrong\nduring that phase I could roll back.\n\n1535\n01:04:01,933 --> 01:04:04,855\nAnd then step three is when it says,\nall right I'm no longer gonna update FRS,\n\n1536\n01:04:04,855 --> 01:04:06,920\nwe're just gonna forget about it.\n\n1537\n01:04:06,920 --> 01:04:08,760\nAnd, you can't roll back.\n\n1538\n01:04:08,760 --> 01:04:09,310\nYou're done.\n>> Yeah,\n\n1539\n01:04:09,310 --> 01:04:11,100\nonce you eliminate it,\nyou can't roll it back.\n\n1540\n01:04:11,100 --> 01:04:14,130\nSo that's why I'm getting the invalid\nstate messages, I'm trying to roll back,\n\n1541\n01:04:14,130 --> 01:04:15,100\nand it won't let me, right?\n\n1542\n01:04:15,100 --> 01:04:16,195\nSo we've already finished.\n\n1543\n01:04:16,195 --> 01:04:21,440\n[INAUDIBLE] That's the process\nif you got a native 2008 domain.\n\n1544\n01:04:21,440 --> 01:04:24,190\nIf you never had the earlier ones then you\nprobably won't have to deal with this,\n\n1545\n01:04:24,190 --> 01:04:26,000\njust like I didn't have to here.\n\n1546\n01:04:26,000 --> 01:04:30,510\nBut if you're in an existing environment,\nlike our office here, we had to do it.\n\n1547\n01:04:30,510 --> 01:04:33,230\nBecause we went from NT4 to 2003 and\n2008 and so on.\n\n1548\n01:04:33,230 --> 01:04:35,950\n>> I'd be willing to guess\nthere are companies out\n\n1549\n01:04:35,950 --> 01:04:37,890\nthere that have upgraded\nover the years and\n\n1550\n01:04:37,890 --> 01:04:42,658\nare probably still using FRS and\nhaven't had any troubles yet.\n\n1551\n01:04:42,658 --> 01:04:45,120\n[LAUGH]\n>> Yeah, they might not even know it.\n\n1552\n01:04:45,120 --> 01:04:47,510\nYeah, don't realize that this has changed.\n\n1553\n01:04:47,510 --> 01:04:50,440\nEventually, Microsoft will kill\noff support for FRS though.\n\n1554\n01:04:50,440 --> 01:04:51,310\nAnd then, you'll have to do it.\n\n1555\n01:04:51,310 --> 01:04:52,820\nSo better to do it ahead of time.\n\n1556\n01:04:52,820 --> 01:04:58,080\nI'll tell you, just personally, DFSR is so\nmuch more reliable that you want to do it.\n\n1557\n01:04:58,080 --> 01:04:59,920\nYou can go on the internet and\njust do a search for\n\n1558\n01:04:59,920 --> 01:05:04,220\nactive directory replication issues and\nyou'll find tons of results.\n\n1559\n01:05:04,220 --> 01:05:05,550\nYou had a lot of people have problems, and\n\n1560\n01:05:05,550 --> 01:05:08,460\nit's because FRS is not very resilient,\nso yup.\n\n1561\n01:05:08,460 --> 01:05:11,660\nYou can have issues with that.\n\n1562\n01:05:11,660 --> 01:05:14,600\nAll right.\nSo, that is one part of doing our upgrade,\n\n1563\n01:05:14,600 --> 01:05:16,990\nis basically upgrading\nthat replication system.\n\n1564\n01:05:16,990 --> 01:05:18,925\n>> Mm-hm.\n>> So we talk a little bit about\n\n1565\n01:05:20,595 --> 01:05:23,305\ngetting our active directory up and\nin place.\n\n1566\n01:05:23,305 --> 01:05:24,355\nWait, I'm in the wrong spot.\n\n1567\n01:05:24,355 --> 01:05:25,290\n>> Scroll back up there.\n\n1568\n01:05:25,290 --> 01:05:25,795\n>> [LAUGH] There we go.\n>> [LAUGH]\n\n1569\n01:05:25,795 --> 01:05:27,125\n>> We talked about getting our\n\n1570\n01:05:28,617 --> 01:05:30,132\n>> Active directory upgraded, right?\n\n1571\n01:05:30,132 --> 01:05:31,577\n>> Mm-hm.\n>> And in bringing up that one,\n\n1572\n01:05:31,577 --> 01:05:33,657\nmaking sure we do AD prep first and\ngetting there.\n\n1573\n01:05:33,657 --> 01:05:37,117\n>> Right.\n>> When that's done, we make sure that we\n\n1574\n01:05:37,117 --> 01:05:42,190\nupgrade our replication,\nour FRS to DFSR if we haven't already.\n\n1575\n01:05:42,190 --> 01:05:43,810\nPretty straightforward,\nas part of the upgrade.\n\n1576\n01:05:43,810 --> 01:05:44,530\nAll right?\n\n1577\n01:05:44,530 --> 01:05:46,075\nAnother part of the upgrade\nis getting ready for\n\n1578\n01:05:46,075 --> 01:05:47,340\nread-only domain controller support.\n\n1579\n01:05:47,340 --> 01:05:48,180\nAnd, we're gonna use that.\n\n1580\n01:05:48,180 --> 01:05:52,390\nNow, we covered that whole process\nin depth in the 7411 show.\n\n1581\n01:05:52,390 --> 01:05:54,530\nWhat was it, section five?\n\n1582\n01:05:54,530 --> 01:05:57,050\n>> I think topic five or section\nfive covered those objectives there.\n\n1583\n01:05:57,050 --> 01:05:59,550\n>> So, if you want to find out more\nabout that, we covered over there.\n\n1584\n01:05:59,550 --> 01:06:01,200\nAnd, we actually did these objectives.\n\n1585\n01:06:01,200 --> 01:06:04,630\nThen we showed how to set\nthe password replication policy and\n\n1586\n01:06:04,630 --> 01:06:06,130\nmonitor, manage all that.\n\n1587\n01:06:06,130 --> 01:06:07,520\nSo we covered it over there.\n\n1588\n01:06:07,520 --> 01:06:08,890\nSo, definitely, check that out.\n\n1589\n01:06:08,890 --> 01:06:12,310\nIf you're not going to use RODCs though,\nthen you don't worry about it.\n\n1590\n01:06:12,310 --> 01:06:13,090\nIt's like our domain.\n\n1591\n01:06:13,090 --> 01:06:14,860\nWe don't have any RODCs here.\n\n1592\n01:06:14,860 --> 01:06:16,190\nBut if you are going to need it,\n\n1593\n01:06:16,190 --> 01:06:17,760\nthat's definitely something\nyou want to check out.\n\n1594\n01:06:17,760 --> 01:06:19,170\nAll right.\n\n1595\n01:06:19,170 --> 01:06:22,585\nThe only other piece that we've got for\nreplication that we need to worry about.\n\n1596\n01:06:22,585 --> 01:06:23,810\n>> Mm-hm.\n\n1597\n01:06:23,810 --> 01:06:26,630\n>> Some of the other things we might\nwanna deal with as far as like UPNs.\n\n1598\n01:06:26,630 --> 01:06:27,300\nRight?\n\n1599\n01:06:27,300 --> 01:06:27,830\n>> Right.\n\n1600\n01:06:27,830 --> 01:06:31,315\n>> Configure multiple user\nprinciple names and suffixes.\n\n1601\n01:06:31,315 --> 01:06:32,440\n>> Mm-hm.\nNow, I don't know about you, but\n\n1602\n01:06:32,440 --> 01:06:35,595\nI've never really worked in any Really\nlarge environments like this, and\n\n1603\n01:06:35,595 --> 01:06:38,625\nI know this comes into play a lot of\nthe times you have multiple domains, and\n\n1604\n01:06:38,625 --> 01:06:41,335\nyou want to shorten up some\nof those UPN suffixes.\n\n1605\n01:06:41,335 --> 01:06:42,985\n>> You know,\nI've used it a few different ways.\n\n1606\n01:06:42,985 --> 01:06:44,425\nHere's one of the main things,\n\n1607\n01:06:44,425 --> 01:06:48,690\nlooking at my domain here that we've\ngot this wherever I buried it here.\n\n1608\n01:06:48,690 --> 01:06:49,600\nAll right.\n\n1609\n01:06:49,600 --> 01:06:51,120\nSo here's our domain controller.\n\n1610\n01:06:52,180 --> 01:06:53,880\nWell, if I can get back to my main screen.\n\n1611\n01:06:53,880 --> 01:06:55,320\n>> And while he's getting that up,\nUPN suffix,\n\n1612\n01:06:55,320 --> 01:06:56,720\nhe's talking about User Principle Name.\n\n1613\n01:06:56,720 --> 01:06:58,020\nA user account has several names.\n\n1614\n01:06:58,020 --> 01:07:02,090\nYou've got the pre-Windows 2000 name,\nor you've got domain slash and\n\n1615\n01:07:02,090 --> 01:07:07,220\nthen username UPN, or user principle name,\nfollows the format user name @ and\n\n1616\n01:07:07,220 --> 01:07:13,590\nthen your domain suffix like,\nMike@itpro.tv or something like that.\n\n1617\n01:07:13,590 --> 01:07:15,270\nIt is kind of funny that we,\nI don't know about you,\n\n1618\n01:07:15,270 --> 01:07:18,990\nI'll always log on with pre Window's\n2000 method, even to this day.\n\n1619\n01:07:18,990 --> 01:07:21,570\n>> Most people do because that's\nwhat they were trained on.\n\n1620\n01:07:21,570 --> 01:07:25,470\nBut let me show you guys, Mike,\nmentioned you got multiple names right, so\n\n1621\n01:07:25,470 --> 01:07:26,860\nlet me show you how this kind of works.\n\n1622\n01:07:26,860 --> 01:07:28,230\n>> I'm going to create\na user account here.\n\n1623\n01:07:28,230 --> 01:07:33,280\nSo, I'm going to create\nChristopher Walken.\n\n1624\n01:07:33,280 --> 01:07:36,990\nAnd you'll see it asks for\na first name, last name, full name.\n\n1625\n01:07:36,990 --> 01:07:39,040\nThen it asks for two log on names.\n\n1626\n01:07:39,040 --> 01:07:44,080\nThis is what Mike was talking about\nThe Windows 2000 and higher, or\n\n1627\n01:07:44,080 --> 01:07:50,390\nactive directory user name, and\nthe pre-Windows 2000 or the NetBIOS name.\n\n1628\n01:07:50,390 --> 01:07:55,580\nNetBIOS, that's old, we're talking\nabout NT4, NT351, DOS, right?\n\n1629\n01:07:55,580 --> 01:07:56,820\nNetBIOS is old stuff.\n\n1630\n01:07:56,820 --> 01:08:02,540\nWindows 4 groups So, back in the day\nyour user accounts had to conform\n\n1631\n01:08:02,540 --> 01:08:07,570\nto the Net BIOS requirements, which was,\nyou could have a name with no spaces, you\n\n1632\n01:08:07,570 --> 01:08:12,150\ncould have an underscore if you wanted and\nyou were limited to fifteen characters.\n\n1633\n01:08:12,150 --> 01:08:15,020\nBut starting with the active directory,\n\n1634\n01:08:15,020 --> 01:08:17,760\nyour username was more like\na fully qualified name.\n\n1635\n01:08:17,760 --> 01:08:21,690\nYou had a user name that could be\nhundreds of characters long, and\n\n1636\n01:08:21,690 --> 01:08:24,270\nthen it would be @ and your domain.\n\n1637\n01:08:24,270 --> 01:08:27,240\nWell, my domain is @domain1.itpro.tv.\n\n1638\n01:08:27,240 --> 01:08:31,960\nSo, if I create a user account for Chris\nhere, I'll make it cwalken Right, and\n\n1639\n01:08:31,960 --> 01:08:34,160\nsee how its typing that in for\nboth of them?\n\n1640\n01:08:34,160 --> 01:08:38,200\nWell, if I start adding to it, eventually,\n\n1641\n01:08:38,200 --> 01:08:43,020\nwhat'll happen is you'll notice it\nstops adding to this one down here.\n\n1642\n01:08:43,020 --> 01:08:44,590\nI hit my 15 characters but\n\n1643\n01:08:44,590 --> 01:08:48,710\nI was able to keep adding up here\nbecause I have a longer name supported.\n\n1644\n01:08:48,710 --> 01:08:52,810\nSo you can have these two\ndifferent usernames and\n\n1645\n01:08:52,810 --> 01:08:55,910\nthe main thing is back in\nthe old day when you logged in.\n\n1646\n01:08:55,910 --> 01:09:00,900\nYou logged in as whatever your netbios\nname for your domain was, backslash, and\n\n1647\n01:09:00,900 --> 01:09:02,180\nyour username.\n\n1648\n01:09:02,180 --> 01:09:06,190\nBut under the new system,\nyou can log in as C Walken at and\n\n1649\n01:09:06,190 --> 01:09:07,990\nyour domain name right there.\n\n1650\n01:09:07,990 --> 01:09:09,340\nNow here's the problem,\n\n1651\n01:09:09,340 --> 01:09:12,470\nthis part right here, that's your UPN,\nthat's your user principle name.\n\n1652\n01:09:12,470 --> 01:09:15,480\nThis part, this being attached,\nyour suffix.\n\n1653\n01:09:15,480 --> 01:09:18,050\nAnd it's what's being attached\nto your user name to create that\n\n1654\n01:09:18,050 --> 01:09:19,720\nfully qualified user name.\n\n1655\n01:09:19,720 --> 01:09:21,540\nWell, it looks like an email, doesn't it?\n\n1656\n01:09:21,540 --> 01:09:22,050\n>> It does.\n\n1657\n01:09:22,050 --> 01:09:23,350\n>> Name at whatever.\n\n1658\n01:09:23,350 --> 01:09:28,970\nBut it's rare that your active directory\ndomain name matches your email address.\n\n1659\n01:09:28,970 --> 01:09:32,470\nSo we may want to add additional UPN's so\n\n1660\n01:09:32,470 --> 01:09:35,130\nthat your username matches your\nemail address and it creates\n\n1661\n01:09:35,130 --> 01:09:38,550\nkind of like a single sign on, people\njust have one user name to remember.\n\n1662\n01:09:38,550 --> 01:09:41,780\nNow, if you don't care about that,\nyou leave it be.\n\n1663\n01:09:41,780 --> 01:09:45,370\nAnd now he can log in as\ndomain 1 slash sea walking or\n\n1664\n01:09:45,370 --> 01:09:50,610\nsea walking at domain 2 dot ITPro.tv.\n\n1665\n01:09:50,610 --> 01:09:51,530\nAnd I'll give him a password.\n\n1666\n01:09:55,530 --> 01:09:57,570\nThere we go and done.\n\n1667\n01:09:57,570 --> 01:09:59,647\nOkay.\nSo, now I've got the user account, but\n\n1668\n01:09:59,647 --> 01:10:02,410\nwouldn't it be nice if he could\nlog in with his email address?\n\n1669\n01:10:02,410 --> 01:10:03,360\n>> Right.\n>> All right, so\n\n1670\n01:10:03,360 --> 01:10:08,170\nto do that I just need to add kind of\nlike an alias, an alias for that UPN.\n\n1671\n01:10:08,170 --> 01:10:11,920\nAnd if I go back into my active\ndirectory and domains and\n\n1672\n01:10:11,920 --> 01:10:15,185\ntrusts, and I pull up, whoops.\n\n1673\n01:10:15,185 --> 01:10:17,446\n[LAUGH] I'll just pull\nup random screens here.\n\n1674\n01:10:17,446 --> 01:10:18,310\n>> [LAUGH]\n>> There we go.\n\n1675\n01:10:18,310 --> 01:10:22,130\n>> If I pull up the properties on\ndomain one, what is going on here?\n\n1676\n01:10:22,130 --> 01:10:23,180\n>> Perhaps your touch screen?\n\n1677\n01:10:23,180 --> 01:10:23,930\nOr is it?\n\n1678\n01:10:23,930 --> 01:10:25,420\n>> Or maybe I'm going crazy.\n\n1679\n01:10:25,420 --> 01:10:28,770\nAnd you know,\nI'm in the wrong spot anyway, aren't I?\n\n1680\n01:10:28,770 --> 01:10:30,370\nShoot.\nThe UPNs, they're under?\n\n1681\n01:10:30,370 --> 01:10:31,930\n>> Oh, are they in sites?\n\n1682\n01:10:31,930 --> 01:10:33,350\nNo, you know what?\n\n1683\n01:10:33,350 --> 01:10:34,760\n>> Now I gotta remember which\ntool they're a part of.\n\n1684\n01:10:34,760 --> 01:10:35,970\n>> Yeah.\n>> But basically, we go in and\n\n1685\n01:10:35,970 --> 01:10:40,180\nwe can pull up the properties for our\ndomain and you can add additional UPN'S.\n\n1686\n01:10:40,180 --> 01:10:42,120\nAnd you can add as many as you want.\n\n1687\n01:10:42,120 --> 01:10:43,600\nNormally, you don't add too many.\n\n1688\n01:10:43,600 --> 01:10:48,570\nYou're really just adding in the ones for\nemail addresses or\n\n1689\n01:10:48,570 --> 01:10:52,760\nwhatever, aliases, so that people\ncan log in with different names.\n\n1690\n01:10:52,760 --> 01:10:55,600\nSo if you have domain1.itpro.tv,\n\n1691\n01:10:55,600 --> 01:10:58,380\nmost of your end users don't\nnecessarily know your domain name.\n\n1692\n01:10:58,380 --> 01:11:02,990\nBut if it's cwalken@itpro.tv, right,\nwell that might be his email address.\n\n1693\n01:11:02,990 --> 01:11:05,110\nSo all right, hey, that's my email,\nI can log in with that.\n\n1694\n01:11:05,110 --> 01:11:06,020\nIt works perfect.\n\n1695\n01:11:06,020 --> 01:11:07,510\nAnd so\nthat's kind of the way that we go there.\n\n1696\n01:11:07,510 --> 01:11:10,420\nSo, adding UPNs does\nmake life a lot easier.\n\n1697\n01:11:10,420 --> 01:11:13,850\n>> Yeah, it should be in domains and\ntrusts, under properties.\n\n1698\n01:11:13,850 --> 01:11:15,310\nWe don't see that UPN suffix tab.\n\n1699\n01:11:15,310 --> 01:11:16,000\n>> Oh, you know, did I?\n\n1700\n01:11:16,000 --> 01:11:17,090\n>> Oh, is it properties of the.\n\n1701\n01:11:17,090 --> 01:11:18,290\n>> Yeah,\nI might have put in the wrong thing.\n\n1702\n01:11:18,290 --> 01:11:19,160\n>> Of domains and trusts?\n\n1703\n01:11:19,160 --> 01:11:19,880\n>> There we go.\n\n1704\n01:11:20,940 --> 01:11:21,850\n>> Sure enough, all right.\n\n1705\n01:11:21,850 --> 01:11:23,710\nSo, what you'll see is right up here.\n\n1706\n01:11:23,710 --> 01:11:26,030\nI right-clicked on the domain itself and\njust popped in.\n\n1707\n01:11:26,030 --> 01:11:28,580\nIt should've right-clicked up here\nwhere it says active directory domains\n\n1708\n01:11:28,580 --> 01:11:29,690\nand trusts.\n\n1709\n01:11:29,690 --> 01:11:32,380\nAnd if I pull up the properties,\nhere's my list of UPNs,\n\n1710\n01:11:32,380 --> 01:11:35,650\nand I can add in alternate UPNs.\n\n1711\n01:11:35,650 --> 01:11:37,650\nI'm gonna add ITPro.tv.\n\n1712\n01:11:37,650 --> 01:11:41,460\nNow, I didn't wanna use ITPro.tv\nas my Active Directory domain\n\n1713\n01:11:41,460 --> 01:11:44,920\nname because,while we've got our\nreal production web servers and\n\n1714\n01:11:44,920 --> 01:11:46,770\nstuff that DNS zone hosted\nout on the internet.\n\n1715\n01:11:46,770 --> 01:11:49,720\nI didn't want to have to\nmaintain an internal versus\n\n1716\n01:11:49,720 --> 01:11:51,820\nan external copy of that DNS zone.\n\n1717\n01:11:51,820 --> 01:11:55,990\nSo internally, we used domainone.itpro.tv.\n\n1718\n01:11:55,990 --> 01:12:00,442\nExternally, we used itpro.tv, So\nI might want to add this as another UPN so\n\n1719\n01:12:00,442 --> 01:12:04,897\nthat people's login names can match\ntheir email address without the domain\n\n1720\n01:12:04,897 --> 01:12:06,233\nname having to match.\n\n1721\n01:12:06,233 --> 01:12:07,964\nThe email.\n\n1722\n01:12:07,964 --> 01:12:08,625\nAll right.\n\n1723\n01:12:08,625 --> 01:12:11,467\n>> Now we do have to worry about\nuniqueness if we're going to use that UPN\n\n1724\n01:12:11,467 --> 01:12:12,890\nsuffix across multiple domains.\n\n1725\n01:12:12,890 --> 01:12:13,390\nRight?\n>> Yes.\n\n1726\n01:12:13,390 --> 01:12:14,820\n>> Because all of a sudden the username\n\n1727\n01:12:14,820 --> 01:12:17,040\nnow is that relative part of the name.\n\n1728\n01:12:17,040 --> 01:12:18,330\n>> Yes, so\nyou can bump into some problems.\n\n1729\n01:12:18,330 --> 01:12:22,335\nNow the SSIDs attached to them\nwill still keep them unique but\n\n1730\n01:12:22,335 --> 01:12:23,995\nit's really confusing to the end users.\n\n1731\n01:12:23,995 --> 01:12:26,498\nAnd when they go to log in they're\nnot typing in their SID, are they?\n\n1732\n01:12:26,498 --> 01:12:31,405\n>> No.\n>> They're typing in their name and UPN.\n\n1733\n01:12:31,405 --> 01:12:33,355\nAnd so\nif there is a duplicate it will fail.\n\n1734\n01:12:33,355 --> 01:12:36,595\nYour infrastructure master, your RID\nmaster, they're all helping out to try and\n\n1735\n01:12:36,595 --> 01:12:37,425\nprevent that.\n\n1736\n01:12:37,425 --> 01:12:39,685\nBut making sure you have\na good catalogue and\n\n1737\n01:12:39,685 --> 01:12:43,880\nthe replication is working is\npivotal to preventing errors there.\n\n1738\n01:12:43,880 --> 01:12:46,310\nAll right,\nnow if I go back to the Active Directory,\n\n1739\n01:12:46,310 --> 01:12:48,760\nI can find old Christopher Walken.\n\n1740\n01:12:48,760 --> 01:12:51,460\nHere he is.\n\n1741\n01:12:51,460 --> 01:12:54,790\nAnd when I go into his account,\nI can see that domain one.\n\n1742\n01:12:54,790 --> 01:12:59,030\nAnd if I drop it down,\nI can now choose ITPro.tv.\n\n1743\n01:12:59,030 --> 01:13:04,700\nSo now when he logs in, he can log in and\nas cwalken@itpro.tv, and he's in business.\n\n1744\n01:13:04,700 --> 01:13:07,860\nHe doesn't have to remember that he's\nin domain one, or domain two, or\n\n1745\n01:13:07,860 --> 01:13:11,060\ndomain three, he is just in ITProTV.\n\n1746\n01:13:11,060 --> 01:13:15,770\nSo I might have 50 domains but\nthen I use one UPN across all 50 so\n\n1747\n01:13:15,770 --> 01:13:18,860\nthat every user logs in with\nthat same style username.\n\n1748\n01:13:18,860 --> 01:13:20,880\n>> I like it.\n>> End users don't care what domain\n\n1749\n01:13:20,880 --> 01:13:22,280\nthey're in.\n\n1750\n01:13:22,280 --> 01:13:24,560\n>> I like it. [LAUGH] >> And\nthey can still log in the old way.\n\n1751\n01:13:24,560 --> 01:13:27,000\nAnd you'll see a lot of\npeople log in the old way.\n\n1752\n01:13:27,000 --> 01:13:29,850\n>> It really does, I mean it pretty much\ndefaults to that when you go to most your\n\n1753\n01:13:29,850 --> 01:13:30,570\nclient operating systems.\n\n1754\n01:13:30,570 --> 01:13:31,531\nIt's easier on the end user.\n\n1755\n01:13:31,531 --> 01:13:33,520\n>> Yeah.\n>> Cuz the domain name is assumed down\n\n1756\n01:13:33,520 --> 01:13:36,530\nthere below it and you just type\nin your user name and you go.\n\n1757\n01:13:36,530 --> 01:13:38,640\n>> And let me just show this,\nI've only got domain controller.\n\n1758\n01:13:38,640 --> 01:13:39,829\nSo let me make him a domain admin.\n\n1759\n01:13:41,080 --> 01:13:44,623\n>> And so if Christopher Walken\nis watching this show.\n\n1760\n01:13:44,623 --> 01:13:45,399\n[LAUGH] He's now a domain admin.\n\n1761\n01:13:45,399 --> 01:13:46,084\n>> Woo-hoo.\n>> So\n\n1762\n01:13:46,084 --> 01:13:51,870\nanyhow I just wanna show you\nguys that login,-logout process.\n\n1763\n01:13:51,870 --> 01:13:56,940\nSo when we go to log in,\na lot of us come in here,\n\n1764\n01:13:56,940 --> 01:14:02,020\nwe specify a user name and if you just\npunch in like Dpezet and your password.\n\n1765\n01:14:02,020 --> 01:14:03,510\nRight?\nSee what that says?\n\n1766\n01:14:03,510 --> 01:14:06,720\nSign into domain1,\nthat's using your NetBIOS login.\n\n1767\n01:14:06,720 --> 01:14:11,620\nAnd you could actually type in DOMAIN1\\ or\nDOMAIN2,\n\n1768\n01:14:11,620 --> 01:14:13,720\nand see how it just changed\nthat to show DOMAIN2?\n\n1769\n01:14:13,720 --> 01:14:16,520\nBut that's the old NetBIOS name.\n\n1770\n01:14:16,520 --> 01:14:21,480\nI could just as easily log\nin as cwalken@itpro.tv, and\n\n1771\n01:14:21,480 --> 01:14:24,780\nsee how it says sign in to itpro.tv?\n\n1772\n01:14:24,780 --> 01:14:29,000\nNow, I don't have an itpro.tv\nactive directory domain.\n\n1773\n01:14:29,000 --> 01:14:29,550\n>> Right.\n\n1774\n01:14:29,550 --> 01:14:31,130\n>> But I have a UPN.\n\n1775\n01:14:31,130 --> 01:14:35,870\nAnd so it'll be able to look up\nthat UPN and find his account and\n\n1776\n01:14:35,870 --> 01:14:39,180\nrealize that he's actually in domain one.\n\n1777\n01:14:39,180 --> 01:14:42,130\nAnd so when logs in, there he goes.\n\n1778\n01:14:42,130 --> 01:14:44,760\nHe just remembers his username\nis his email address.\n\n1779\n01:14:44,760 --> 01:14:45,940\nRight?\n>> Exactly.\n\n1780\n01:14:45,940 --> 01:14:48,290\n>> And I say email address,\nit doesn't have to be your email address.\n\n1781\n01:14:48,290 --> 01:14:50,060\nBut it certainly is handy.\n\n1782\n01:14:50,060 --> 01:14:54,440\nIf you're also running Microsoft Exchange\nas your mail server, then it literally is\n\n1783\n01:14:54,440 --> 01:14:57,360\nthe same username and the same\npassword to log into your computer,\n\n1784\n01:14:57,360 --> 01:14:59,980\nto log into your email,\nto log into your mobile phone.\n\n1785\n01:14:59,980 --> 01:15:03,850\nIt's all kind of single sign on at that\npoint, and life becomes a lot easier for\n\n1786\n01:15:03,850 --> 01:15:04,830\nyour end user.\n\n1787\n01:15:04,830 --> 01:15:08,500\n>> Which makes it easier for us in the end\n>> Yeah.\n\n1788\n01:15:08,500 --> 01:15:11,470\nIf you're like a help desk technician or\n\n1789\n01:15:11,470 --> 01:15:14,600\nwhatever, how many calls are you\ngetting with people who forget.\n\n1790\n01:15:14,600 --> 01:15:18,610\nBut I logged in as cwalken@itproducttv.\n\n1791\n01:15:18,610 --> 01:15:22,360\nBut you'll see when I run that who\nam I command, I get domain1/cwalken.\n\n1792\n01:15:22,360 --> 01:15:24,070\nIt maps those together.\n\n1793\n01:15:24,070 --> 01:15:25,670\nThat's what UPN is.\n\n1794\n01:15:25,670 --> 01:15:27,410\n>> Yep.\n>> All right.\n\n1795\n01:15:27,410 --> 01:15:29,910\nNow, if you attach the UPN\n\n1796\n01:15:29,910 --> 01:15:33,180\nat the beginning when you\nfirst created your domain.\n\n1797\n01:15:34,200 --> 01:15:35,150\nGreat, you're done.\n\n1798\n01:15:35,150 --> 01:15:39,170\nAny time you create a new user,\nyou'll have that chance to change it.\n\n1799\n01:15:39,170 --> 01:15:42,421\nRight?\nSo if I go into active directory users and\n\n1800\n01:15:42,421 --> 01:15:50,022\ncomputers, and I go to create a new\nuser When we go to create that new user,\n\n1801\n01:15:50,022 --> 01:15:53,950\nso here I go, and\nI can pick itpro.tv there.\n\n1802\n01:15:55,890 --> 01:15:58,696\nOkay, once I've chosen it one time,\nthe next time I run it,\n\n1803\n01:15:58,696 --> 01:16:01,800\nit kinda like caches it and\nit'll default to that one again.\n\n1804\n01:16:01,800 --> 01:16:04,560\nBut if you move between computers or\nbetween user accounts like I did,\n\n1805\n01:16:04,560 --> 01:16:06,840\nit'll go back to the default\nname like it did there.\n\n1806\n01:16:06,840 --> 01:16:08,000\nSo sometimes it'll remember,\n\n1807\n01:16:08,000 --> 01:16:09,070\nsometimes it won't\n>> [LAUGH]\n\n1808\n01:16:09,070 --> 01:16:10,258\n>> But you can choose it.\n\n1809\n01:16:10,258 --> 01:16:10,760\n>> Kinda like me.\n>> But\n\n1810\n01:16:10,760 --> 01:16:14,270\nif you've already got a thousand\nuser accounts in your environment,\n\n1811\n01:16:14,270 --> 01:16:15,770\nit can be kind of annoying, and so\n\n1812\n01:16:15,770 --> 01:16:20,350\nyou'll want to rely on things like LDIVDE,\nor SFVDE to do a bulk change.\n\n1813\n01:16:20,350 --> 01:16:22,250\n>> Power cell strip, update them all.\n\n1814\n01:16:22,250 --> 01:16:23,110\n>> Actually, can you do a.\n\n1815\n01:16:24,210 --> 01:16:30,213\nLet's see, can you do a,\n[CROSSTALK] I've never done this,\n\n1816\n01:16:30,213 --> 01:16:35,760\nso I'm kind of curious if we\ncan change them all in bulk.\n\n1817\n01:16:38,024 --> 01:16:39,550\n>> I don't think.\n\n1818\n01:16:39,550 --> 01:16:40,220\n>> You can.\nLook at that.\n\n1819\n01:16:40,220 --> 01:16:41,620\nYou can change the UPN suffix in bulk.\n\n1820\n01:16:41,620 --> 01:16:46,180\nSo just to show you guys what I did there,\nI highlighted all my user accounts, and\n\n1821\n01:16:46,180 --> 01:16:47,990\nthen I just right-clicked and\nchose Properties.\n\n1822\n01:16:47,990 --> 01:16:50,590\nThat brings up the Bulk Change dialog.\n\n1823\n01:16:50,590 --> 01:16:53,820\nAnd under Account,\nUPN suffix was right there,\n\n1824\n01:16:53,820 --> 01:16:56,940\nand I can switch them to\nhave that Other suffix.\n\n1825\n01:16:56,940 --> 01:16:58,260\nSo we can do it in bulk,\nthat's convenient.\n\n1826\n01:16:58,260 --> 01:16:59,753\n>> And\nthat works if they're all in the same OU.\n\n1827\n01:16:59,753 --> 01:17:02,970\n[LAUGH] If they're broken\noff into different OUs,\n\n1828\n01:17:02,970 --> 01:17:05,260\nit's really hard to do that group select.\n\n1829\n01:17:05,260 --> 01:17:08,030\nSo that's when your\ncommand line utilities.\n\n1830\n01:17:08,030 --> 01:17:09,810\n>> Yeah.\n>> Come into play.\n\n1831\n01:17:09,810 --> 01:17:13,220\n>> If they're multiple domains,\nthen yeah, you've got no choice,\n\n1832\n01:17:13,220 --> 01:17:13,970\nyou at your command line.\n\n1833\n01:17:13,970 --> 01:17:14,880\nIf they're all in one domain,\n\n1834\n01:17:14,880 --> 01:17:17,250\nyou can actually cheat a little bit and\nuse your search function.\n\n1835\n01:17:17,250 --> 01:17:18,200\n>> I certainly didn't think about that.\n\n1836\n01:17:18,200 --> 01:17:23,520\n>> And so you can come in here and say,\njust show me users, and so we could say,\n\n1837\n01:17:23,520 --> 01:17:29,080\nwell I dunno you probably\nstick with the default search.\n\n1838\n01:17:29,080 --> 01:17:29,780\nRight?\n\n1839\n01:17:29,780 --> 01:17:34,332\nSo we could come in here and say,\nwe wanna find users, and find now, and so.\n\n1840\n01:17:34,332 --> 01:17:36,110\n>> We can select them all that way.\n\n1841\n01:17:36,110 --> 01:17:40,370\n>> Yeah, then we can just sort it out and\nfind all our users across the whole thing.\n\n1842\n01:17:40,370 --> 01:17:42,210\nNow, you're gonna get some\nservice ones like this,\n\n1843\n01:17:42,210 --> 01:17:45,710\nlike there's my Kerberos ticket\ngranting ticket and all that stuff.\n\n1844\n01:17:45,710 --> 01:17:47,600\nSo, you gotta be careful with\nsome of those, but yeah, you can.\n\n1845\n01:17:47,600 --> 01:17:49,355\n>> You might want to change that suffix.\n\n1846\n01:17:49,355 --> 01:17:50,800\n>> Yeah,\nyou got to cheat the system a little bit.\n\n1847\n01:17:50,800 --> 01:17:52,880\nBut that's a UPN, it's really useful.\n\n1848\n01:17:52,880 --> 01:17:55,060\nAgain, especially if you have\nlike Microsoft Exchange.\n\n1849\n01:17:55,060 --> 01:17:56,300\nAll right.\n>> Because then\n\n1850\n01:17:56,300 --> 01:17:58,750\nyou can make people's log in their\nemail address and people like that.\n\n1851\n01:17:58,750 --> 01:18:02,400\nIt is easier, you don't have to\nworry about choosing that domain.\n\n1852\n01:18:02,400 --> 01:18:04,498\nYou used to, when you log in,\nyou have three boxes.\n\n1853\n01:18:04,498 --> 01:18:05,680\n>> Yeah.\n>> User name, Password, and\n\n1854\n01:18:05,680 --> 01:18:07,560\na Drop down box for domain.\n\n1855\n01:18:07,560 --> 01:18:10,020\nAnd that's gone now because you just\ntype it in as part of your user name.\n\n1856\n01:18:10,020 --> 01:18:11,740\nThat's how you should be logging in.\n\n1857\n01:18:11,740 --> 01:18:14,042\n>> I've seen some environments but\nthat list is very long.\n\n1858\n01:18:14,042 --> 01:18:15,860\nAnd I'm trying to get a user\nto pick the right one or\n\n1859\n01:18:15,860 --> 01:18:17,720\ntry to figure out what's going on.\n\n1860\n01:18:17,720 --> 01:18:20,905\nAnd we're also gonna talk about\nit a little more when we start\n\n1861\n01:18:20,905 --> 01:18:24,026\ntalking about Force Trust and\nsetting up trust as routing,\n\n1862\n01:18:24,026 --> 01:18:26,600\nsome of those UPNs suffixes\nacross those force.\n\n1863\n01:18:26,600 --> 01:18:27,740\n>> Yeah, and just another thing.\n\n1864\n01:18:27,740 --> 01:18:31,612\nIf the domains are geographically\ndispersed, when you get to that drop down\n\n1865\n01:18:31,612 --> 01:18:34,138\nbox to to pick domain, it can take\na little while for it to populate.\n\n1866\n01:18:34,138 --> 01:18:35,360\n>> Yeah.\n>> Cuz you gotta reach out and\n\n1867\n01:18:35,360 --> 01:18:37,320\npull the see if those\ndomains are still there.\n\n1868\n01:18:37,320 --> 01:18:39,130\nSo, yeah, definitely not the greatest way.\n\n1869\n01:18:39,130 --> 01:18:40,992\nIt doesn't scale very well,\nNetBIOS never did.\n\n1870\n01:18:40,992 --> 01:18:42,690\nRight?\nYeah, really wasn't designed for that.\n\n1871\n01:18:42,690 --> 01:18:46,662\n>> So, if you're still using NetBIOS\ntoday in Windows Server 2012, you can.\n\n1872\n01:18:46,662 --> 01:18:49,790\nSupport is still there but you really\nneed to be moving away from that.\n\n1873\n01:18:49,790 --> 01:18:52,200\nYour users need to be\nlogging in with their UPN.\n\n1874\n01:18:52,200 --> 01:18:53,630\nBe it the official UPN or\n\n1875\n01:18:53,630 --> 01:18:55,590\nthe alias that you've added\n>> Right.\n\n1876\n01:18:55,590 --> 01:18:59,495\n>> And then you need to be specifying\nthat domain as part of the username.\n\n1877\n01:18:59,495 --> 01:19:00,670\n>> Yaeh, support for that is gonna drop,\n\n1878\n01:19:00,670 --> 01:19:02,480\nI think we've been talking\nabout since Windows 2000.\n\n1879\n01:19:02,480 --> 01:19:04,172\nBut support is eventually gonna go way.\n\n1880\n01:19:04,172 --> 01:19:06,290\n>> All right,\n\n1881\n01:19:06,290 --> 01:19:10,712\nwell Mike I think that covers deploying,\nan additional domain controller.\n\n1882\n01:19:10,712 --> 01:19:14,730\nWe're gonna take a look at trust when\nwe have domain controllers that are in\n\n1883\n01:19:14,730 --> 01:19:16,550\ndifferent forests.\n\n1884\n01:19:16,550 --> 01:19:19,206\nOr even different domains\ninside of our single forest.\n\n1885\n01:19:19,206 --> 01:19:20,700\n>> Right.\n>> So we're going to take a look at that\n\n1886\n01:19:20,700 --> 01:19:22,635\nbut we'll probably do\nthat in our next episode.\n\n1887\n01:19:22,635 --> 01:19:24,435\n>> Okay.\n>> As well as sites.\n\n1888\n01:19:24,435 --> 01:19:27,786\nBut that covers most of the things\ninvolved with doing a new deployment.\n\n1889\n01:19:27,786 --> 01:19:28,920\n>> Right.\n>> Now we're gonna\n\n1890\n01:19:28,920 --> 01:19:31,970\nsee about getting an existing\ndeployment to enter together.\n\n1891\n01:19:31,970 --> 01:19:33,960\n>> But this is a pretty good\nstopping point for us, so\n\n1892\n01:19:33,960 --> 01:19:35,630\ncan you think of anything else to fill in?\n\n1893\n01:19:35,630 --> 01:19:37,250\n>> No, I thing we are good.\n\n1894\n01:19:37,250 --> 01:19:38,510\n>> All right.\n>> I think we're good.\n\n1895\n01:19:38,510 --> 01:19:40,020\n>> Well, let me just remind you guys,\n\n1896\n01:19:40,020 --> 01:19:43,110\nif you ever have any questions on\nthis stuff, live during the show,\n\n1897\n01:19:43,110 --> 01:19:47,220\nyou can go to itpro.tv/live, you'll see\nour chat box right beneath the video.\n\n1898\n01:19:47,220 --> 01:19:48,930\nIf we're live, the chatroom will be open,\n\n1899\n01:19:48,930 --> 01:19:52,250\nyou can post your questions,\nwe monitor and answer during the show.\n\n1900\n01:19:52,250 --> 01:19:56,100\nIf you go there and the chatroom is\nclosed that means we're not live, so\n\n1901\n01:19:56,100 --> 01:19:57,530\nwe're not here 24 hours a day.\n\n1902\n01:19:57,530 --> 01:20:03,150\nSo take advantage of the Q&A forums at the\ntop of every page is a link that says Q&A.\n\n1903\n01:20:03,150 --> 01:20:03,750\nJump on in there.\n\n1904\n01:20:03,750 --> 01:20:05,490\nThe forums, you can post your questions.\n\n1905\n01:20:05,490 --> 01:20:06,900\nWe monitor and answer there also.\n\n1906\n01:20:06,900 --> 01:20:07,890\n>> Absolutely, absolutely.\n\n1907\n01:20:07,890 --> 01:20:11,470\n>> Take advantage of that resource\n>> It is there for you.\n\n1908\n01:20:11,470 --> 01:20:13,270\nAll right,\nwell I hope you enjoyed the show.\n\n1909\n01:20:13,270 --> 01:20:15,100\nSigning off for IT Pro TV, I'm Don Pezet.\n\n1910\n01:20:15,100 --> 01:20:16,120\n>> And I'm Mike Rodrick.\n\n1911\n01:20:16,120 --> 01:20:17,301\n>> And we will see ya next time.\n\n1912\n01:20:17,301 --> 01:20:22,384\n[MUSIC]\n\n",
          "vimeoId": "100414902"
        },
        {
          "description": "In this episode Mike and Don wrap up configuring Active Directory with discussion and demonstration of configuring trusts and sites. They discuss the differences of external, forest, shortcut and realm trusts as well as trust authentication. They give scenarios on creating sites and managing site coverage as well as the registration of SRV records and domain controller movement between sites.",
          "length": "6610",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/010-Configuring-AD-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/010-Configuring-AD-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/010-Configuring-AD-Pt-2-sm.jpg",
          "title": "Configuring AD Part 2",
          "transcript": "1\n00:00:00,050 --> 00:00:10,050\n[MUSIC]\n\n2\n00:00:14,670 --> 00:00:20,260\n[SOUND]\n\n3\n00:00:20,260 --> 00:00:30,920\n[MUSIC]\n\n4\n00:00:30,920 --> 00:00:31,420\nAll right.\n\n5\n00:00:31,420 --> 00:00:33,420\nGood morning, good afternoon,\nand good evening.\n\n6\n00:00:33,420 --> 00:00:35,730\nWelcome back to another\nepisode of IT pro TV.\n\n7\n00:00:35,730 --> 00:00:37,340\nI'm your host Don Pezet.\n\n8\n00:00:37,340 --> 00:00:39,580\nBack once again with Mr.\nMike Rodrick, how's it going Mike?\n\n9\n00:00:39,580 --> 00:00:40,710\n>> Another day in paradise Don.\n\n10\n00:00:40,710 --> 00:00:42,240\nHow you doing?\n\n11\n00:00:42,240 --> 00:00:43,590\n>> [LAUGH] Glorious day!\n\n12\n00:00:43,590 --> 00:00:46,680\nAs we tag a part two of active directory.\n\n13\n00:00:46,680 --> 00:00:49,100\nFor those of you watching live this\nmorning, we filmed our part one.\n\n14\n00:00:49,100 --> 00:00:51,772\nToday we're going to\ncontinue on with that.\n\n15\n00:00:51,772 --> 00:00:54,680\nWe got a few neat things to talk about.\n\n16\n00:00:54,680 --> 00:00:58,390\nI know I led the last episode saying\nwe're gonna deal with multiple domains.\n\n17\n00:00:58,390 --> 00:00:59,840\n>> Right.\n>> But for those of you that were sharp\n\n18\n00:00:59,840 --> 00:01:02,340\nyou watched that whole episode and\nyou said wait a minute,\n\n19\n00:01:02,340 --> 00:01:06,790\nDon did all of that in one domain\n>> [LAUGH] Keeping\n\n20\n00:01:06,790 --> 00:01:07,890\non the edge of your seat.\n\n21\n00:01:07,890 --> 00:01:09,910\nYou know, making you tune back in.\n\n22\n00:01:09,910 --> 00:01:11,640\n>> So that's where we're at, right.\n\n23\n00:01:11,640 --> 00:01:13,850\nSo we're going to pick back\nup with multiple domains and\n\n24\n00:01:13,850 --> 00:01:15,490\nsome of the things that we\nneed to think about there.\n\n25\n00:01:15,490 --> 00:01:18,380\nWe're going to continue using the same\nservers from that last show though.\n\n26\n00:01:18,380 --> 00:01:21,340\nSo we had domain one, that ITPro.TV and\n\n27\n00:01:21,340 --> 00:01:25,610\nthat's where our two servers were, and\nwe did the upgrade and all that stuff.\n\n28\n00:01:25,610 --> 00:01:27,790\nNow we're going to bring into\nthe mix a few other guys.\n\n29\n00:01:27,790 --> 00:01:29,980\nDomain two and domain three.\n\n30\n00:01:29,980 --> 00:01:30,650\nOkay.\n\n31\n00:01:30,650 --> 00:01:34,320\nSo let's talk a little bit about what\nhappens when you have more than one,\n\n32\n00:01:34,320 --> 00:01:35,340\nlet's go back even further.\n\n33\n00:01:35,340 --> 00:01:37,440\nI know this is similarly\ncovered in another episode.\n\n34\n00:01:37,440 --> 00:01:39,730\nWhy would you want more than one domain?\n\n35\n00:01:39,730 --> 00:01:40,340\nAll right.\n\n36\n00:01:40,340 --> 00:01:41,590\n>> You wouldn't.\n\n37\n00:01:41,590 --> 00:01:43,191\n>> Well\n>> There are a few good reasons right,\n\n38\n00:01:43,191 --> 00:01:44,580\nthat you would want extra domains.\n\n39\n00:01:44,580 --> 00:01:47,930\nI was trying to think off the top of\nmy head, different DNS name spaces,\n\n40\n00:01:47,930 --> 00:01:50,410\nif you wanted separation of namespace.\n\n41\n00:01:50,410 --> 00:01:54,000\nAdministrative reasons might\nbe another reason as well.\n\n42\n00:01:54,000 --> 00:01:56,880\n>> Yeah, but for the longest time,\none of the big reasons you'd want multiple\n\n43\n00:01:56,880 --> 00:01:59,255\ndomains was multiple password policies,\nright?\n\n44\n00:01:59,255 --> 00:01:59,950\n>> Mm-hm, yeah.\n\n45\n00:01:59,950 --> 00:02:03,710\n>> In older versions of Windows, you\ncould only have one password policy for\n\n46\n00:02:03,710 --> 00:02:05,030\nan entire domain.\n\n47\n00:02:05,030 --> 00:02:08,480\nSo if you had two groups of people that\nyou wanted to have different password\n\n48\n00:02:08,480 --> 00:02:09,855\nexpiration times or whatever.\n\n49\n00:02:09,855 --> 00:02:11,620\n>> Right.\n>> You could do multiple domains.\n\n50\n00:02:11,620 --> 00:02:12,770\nIt's not like that anymore.\n\n51\n00:02:12,770 --> 00:02:14,542\nNow we have the fine grain\npassword policies, or,\n\n52\n00:02:14,542 --> 00:02:15,791\nwhat's the other names for those?\n\n53\n00:02:15,791 --> 00:02:17,194\n>> PSO's, or password static objects.\n\n54\n00:02:17,194 --> 00:02:18,829\n>> That's it.\nSo now that we've got that fancy stuff,\n\n55\n00:02:18,829 --> 00:02:20,180\nwe don't worry about that one anymore.\n\n56\n00:02:20,180 --> 00:02:23,900\nBut there are still some scenarios where\nyou might want more than one domain.\n\n57\n00:02:23,900 --> 00:02:27,200\nThe best one is what Mike mentioned,\nthe administrative boundaries.\n\n58\n00:02:27,200 --> 00:02:30,570\nLet's say that you work for\na multinational company.\n\n59\n00:02:30,570 --> 00:02:32,570\nAll right, so you're IBM.\n\n60\n00:02:32,570 --> 00:02:35,940\nAnd so\nyou've got offices all across the globe.\n\n61\n00:02:35,940 --> 00:02:38,890\nAnd you've got an IT department\nthat's responsible for\n\n62\n00:02:38,890 --> 00:02:41,520\nthe North American\nportion of your business.\n\n63\n00:02:41,520 --> 00:02:44,320\nAnd you've got another IT department for\nthe South American, and\n\n64\n00:02:44,320 --> 00:02:45,240\nanother IT department for\n\n65\n00:02:45,240 --> 00:02:49,510\nthe European, and another market or\nIT department for the Asian side.\n\n66\n00:02:49,510 --> 00:02:52,790\nSo each continent has\nits own IT department.\n\n67\n00:02:52,790 --> 00:02:55,718\nAnd you don't want the American IT\ndepartment messing around with\n\n68\n00:02:55,718 --> 00:02:58,130\nthe Australian IT department,\nor whatever, right?\n\n69\n00:02:58,130 --> 00:03:01,900\nSo what you might do is use\nseparate domains to create borders,\n\n70\n00:03:01,900 --> 00:03:04,260\nto create boundaries of credentials.\n\n71\n00:03:04,260 --> 00:03:08,409\nAnd we talked a little bit about that in a\nround-a-bout way in the last episode where\n\n72\n00:03:08,409 --> 00:03:11,280\nwe talked about domain admins\nversus enterprise admins.\n\n73\n00:03:12,510 --> 00:03:15,630\nThat a domain admin is limited to\nperforming functions just within\n\n74\n00:03:15,630 --> 00:03:16,610\ntheir domain.\n\n75\n00:03:16,610 --> 00:03:18,710\nSo if I have a North American domain and\n\n76\n00:03:18,710 --> 00:03:21,290\nI'm a domain admin in\nthe North American domain.\n\n77\n00:03:21,290 --> 00:03:23,510\nI'm not an admin in the European domain.\n\n78\n00:03:23,510 --> 00:03:24,510\n>> Right.\nSo you'd have full control in\n\n79\n00:03:24,510 --> 00:03:27,060\nthe North American domain, but\nnothing in that European domain.\n\n80\n00:03:27,060 --> 00:03:28,380\n>> That is exactly right.\n\n81\n00:03:28,380 --> 00:03:32,075\nSo we use it for\nseparating out those security boundaries.\n\n82\n00:03:32,075 --> 00:03:33,260\n>> Mm-hm.\n>> Setting that access signals\n\n83\n00:03:33,260 --> 00:03:34,280\nlimitations.\n\n84\n00:03:34,280 --> 00:03:36,000\nNow there's things like the schema.\n\n85\n00:03:36,000 --> 00:03:37,910\n>> Right.\n>> Which is gonna be shared across that\n\n86\n00:03:37,910 --> 00:03:38,920\nwhole environment.\n\n87\n00:03:38,920 --> 00:03:41,820\nSo there are things where we\nstill need the enterprise admin,\n\n88\n00:03:41,820 --> 00:03:43,152\nwho's in charge of the whole shebang.\n\n89\n00:03:43,152 --> 00:03:44,791\nRight?\n\n90\n00:03:44,791 --> 00:03:47,540\nBut the individual people of IT admins,\n\n91\n00:03:47,540 --> 00:03:50,720\nthe employees,\nthey're limited to an individual domain.\n\n92\n00:03:50,720 --> 00:03:51,720\nAll right.\n\n93\n00:03:51,720 --> 00:03:54,470\n>> Yeah.\nAnd then, oh, what was I just thinking of?\n\n94\n00:03:54,470 --> 00:03:57,610\nWith the multiple domains you're\ngonna get the oh, the replication.\n\n95\n00:03:57,610 --> 00:04:02,150\nIf you had a slow WAN length between\ngeographically split offices.\n\n96\n00:04:02,150 --> 00:04:05,040\nIf they're part of the same domain,\nyou're replicating a domain\n\n97\n00:04:05,040 --> 00:04:08,290\npartition which was one of the bigger\npartitions if you got a large company.\n\n98\n00:04:08,290 --> 00:04:11,200\nSo you might have to make it its own\ndomain just to prevent that domain\n\n99\n00:04:11,200 --> 00:04:13,060\npartition from replicating\nacross that wavelength.\n\n100\n00:04:13,060 --> 00:04:16,210\n>> Yeah, when you have separate domains\nthe only thing you replicate between them\n\n101\n00:04:16,210 --> 00:04:17,840\nare the global catalog right?\n\n102\n00:04:17,840 --> 00:04:20,255\nThe global catalog and\nits little subset of information.\n\n103\n00:04:20,255 --> 00:04:22,420\n>> Mm-hm, the schema partition and\nthe config partition but\n\n104\n00:04:22,420 --> 00:04:23,620\nthose are usually small.\n\n105\n00:04:23,620 --> 00:04:26,050\n>> Yeah, and\nhow often do we change the schema?\n\n106\n00:04:26,050 --> 00:04:27,860\nOr even the config partition for\nthat matter.\n\n107\n00:04:27,860 --> 00:04:29,910\nHow often are we adding new domains and\nstuff?\n\n108\n00:04:29,910 --> 00:04:33,500\nSo those are really small,\nmakes things a lot more efficient.\n\n109\n00:04:33,500 --> 00:04:37,680\nNow in today's world, bandwidth is not\nthe same limit that it used to be.\n\n110\n00:04:37,680 --> 00:04:39,680\nSo we don't even worry about that so much.\n\n111\n00:04:39,680 --> 00:04:43,420\nSo for most organizations,\na single domain is the way to go.\n\n112\n00:04:43,420 --> 00:04:45,020\nAnd I think I said that the last time.\n\n113\n00:04:45,020 --> 00:04:46,310\n>> You did, you did.\nAnd it's true, there.\n\n114\n00:04:46,310 --> 00:04:49,992\nCuz you're bringing another domain,\na domain controller can only be a domain\n\n115\n00:04:49,992 --> 00:04:53,467\ncontroller for a single domain, so\nnow you are talking extra equipment.\n\n116\n00:04:53,467 --> 00:04:55,160\nThen you've got the administration\nthat you gotta do.\n\n117\n00:04:55,160 --> 00:04:56,530\nIt makes it a lot more complex.\n\n118\n00:04:56,530 --> 00:04:59,210\nYou got DNS to worry about now\nwhen you got multiple domains.\n\n119\n00:04:59,210 --> 00:05:03,680\nA lot more complexity, really want\nto do it if you have a need for it.\n\n120\n00:05:03,680 --> 00:05:07,480\n>> And if you don't fit one of those\nspecific needs it's better to go single\n\n121\n00:05:07,480 --> 00:05:10,650\ndomain, cuz you can always have more\ndomains later if you change your mind.\n\n122\n00:05:10,650 --> 00:05:11,390\nRight?\n\n123\n00:05:11,390 --> 00:05:15,460\nBut if you go multiple domains, it's\nactually a pain to consolidate them down\n\n124\n00:05:15,460 --> 00:05:19,370\nto a single domain it's pretty\nchallenging, I mean it can be done.\n\n125\n00:05:19,370 --> 00:05:21,340\n>> The good old active\ndirectory migration wizard.\n\n126\n00:05:21,340 --> 00:05:22,412\n>> Whoo freaking hassle.\n\n127\n00:05:22,412 --> 00:05:22,950\n[LAUGH]\n>> [LAUGH] So\n\n128\n00:05:22,950 --> 00:05:26,750\nyeah, you don't want to get involved\nin that if you can avoid it.\n\n129\n00:05:26,750 --> 00:05:29,800\nSo, while multiple domains\nare fully supported, and\n\n130\n00:05:29,800 --> 00:05:32,960\nthey're useful in some scenarios,\nmost of us will never deal with it.\n\n131\n00:05:32,960 --> 00:05:34,440\n>> Right.\n>> And I've worked for\n\n132\n00:05:34,440 --> 00:05:36,560\ncompanies with thousands of employees,\n\n133\n00:05:36,560 --> 00:05:39,270\nwith hundreds of offices,\nall in a single domain.\n\n134\n00:05:39,270 --> 00:05:41,515\n>> Yeah, a single domain\nsupports millions of objects.\n\n135\n00:05:41,515 --> 00:05:43,360\n>> Mm-hm.\n>> I mean, it's very, very scalable, so.\n\n136\n00:05:43,360 --> 00:05:45,900\n>> And when we talk about like,\nreplication efficiency and stuff,\n\n137\n00:05:45,900 --> 00:05:49,010\nwe're gonna see later on in this episode\nhow we can use what are called site\n\n138\n00:05:49,010 --> 00:05:50,195\nlinks to control that.\n\n139\n00:05:50,195 --> 00:05:50,731\n>> Mm-hm.\n>> And so\n\n140\n00:05:50,731 --> 00:05:53,336\nthat kind of eliminates that\nburden of doing, you know,\n\n141\n00:05:53,336 --> 00:05:55,960\nmassive amounts of replication\nbetween the locations.\n\n142\n00:05:55,960 --> 00:06:00,825\nSo there's ways around that and so, I'll\nbe honest with you guys, really probably\n\n143\n00:06:00,825 --> 00:06:05,500\n95 to 99 percent of the companies out\nthere don't need more than one domain.\n\n144\n00:06:05,500 --> 00:06:10,080\nBut for the exam [LAUGH],\nyou might work for that 1%.\n\n145\n00:06:10,080 --> 00:06:14,400\nThey're that one company that needs it and\nso you need to be aware of it, and\n\n146\n00:06:14,400 --> 00:06:15,650\nhow it works, all right?\n\n147\n00:06:15,650 --> 00:06:19,510\nSo let's start by talking about\nmultiple domains that we control.\n\n148\n00:06:19,510 --> 00:06:24,720\nSo for whatever reason, maybe we do wanna\ndo the North America and European domains.\n\n149\n00:06:24,720 --> 00:06:27,460\nSo we wanna break up our\nenvironment into multiple domains.\n\n150\n00:06:27,460 --> 00:06:30,310\nNow when we do that,\nwhenever you create a user account,\n\n151\n00:06:30,310 --> 00:06:32,065\nyou've gotta pick which domain they're in.\n\n152\n00:06:32,065 --> 00:06:33,950\n>> Mm-hm.\n>> When you create a computer account,\n\n153\n00:06:33,950 --> 00:06:34,600\nyou join a domain.\n\n154\n00:06:34,600 --> 00:06:36,470\nYou gotta pick which domain they're in.\n\n155\n00:06:36,470 --> 00:06:40,220\nWhen you write group policy objects,\nGPOs are stored in the domain, so\n\n156\n00:06:40,220 --> 00:06:41,970\nyou gotta pick which domain.\n\n157\n00:06:41,970 --> 00:06:43,820\nWell, I guess that's not entirely true,\nright?\n\n158\n00:06:43,820 --> 00:06:46,590\nSite-\n>> There's that one option, yeah.\n\n159\n00:06:46,590 --> 00:06:47,480\n>> Yeah.\n>> Move the GP to a site.\n\n160\n00:06:47,480 --> 00:06:49,990\nBut you're still creating\nit in one of your domains.\n\n161\n00:06:49,990 --> 00:06:50,900\n>> Oh no that's true that's right.\n\n162\n00:06:50,900 --> 00:06:52,170\n>> You know.\n>> Cause the sites are within that yeah.\n\n163\n00:06:52,170 --> 00:06:52,785\n>> Yeah.\n\n164\n00:06:52,785 --> 00:06:55,670\n>> So these are things that we'll\nhave to keep in mind right?\n\n165\n00:06:55,670 --> 00:06:58,860\nIt's an extra bit of administrative burden\nwe've got to consider every time we\n\n166\n00:06:58,860 --> 00:07:00,120\ncreate an object.\n\n167\n00:07:00,120 --> 00:07:04,740\nAnd when users log in they've gotta\nspecify the appropriate domain to login.\n\n168\n00:07:04,740 --> 00:07:06,830\n>> Right.\n>> So, in the last episode we talked about\n\n169\n00:07:06,830 --> 00:07:07,940\nUPNs, User Principal Names.\n\n170\n00:07:07,940 --> 00:07:08,800\n>> Right.\n>> And how we can kinda\n\n171\n00:07:08,800 --> 00:07:10,125\nalleviate that stress.\n\n172\n00:07:10,125 --> 00:07:10,710\n>> Mm-hm.\n>> But\n\n173\n00:07:10,710 --> 00:07:12,520\nit's still something we\nneed to be aware of.\n\n174\n00:07:12,520 --> 00:07:13,020\n>> For sure.\n\n175\n00:07:14,110 --> 00:07:17,920\n>> All right, so\nwhen we add a second domain, right?\n\n176\n00:07:17,920 --> 00:07:18,950\nHow do we add a second domain?\n\n177\n00:07:18,950 --> 00:07:20,050\nWell it's pretty easy.\n\n178\n00:07:20,050 --> 00:07:23,832\nIt's, when we do a promotion,\nwhen we promote our domain controller,\n\n179\n00:07:23,832 --> 00:07:25,760\nthe wizard asks us what are we doing?\n\n180\n00:07:25,760 --> 00:07:30,130\nAre we creating a new domain\ncontroller in an existing domain?\n\n181\n00:07:30,130 --> 00:07:35,130\nOr a new controller in a new\ndomain in our same forest?\n\n182\n00:07:35,130 --> 00:07:38,359\nOr a new domain controller in a new\ndomain in a new forest, right,\n\n183\n00:07:38,359 --> 00:07:40,080\ncreate a new forest all together.\n\n184\n00:07:40,080 --> 00:07:40,850\n>> All new\n>> So\n\n185\n00:07:40,850 --> 00:07:44,040\nyou do have several different choices\nwhen you go to do that install.\n\n186\n00:07:44,040 --> 00:07:48,350\nAnd so, you pick that as part of\nthat DC promo, and you set that up.\n\n187\n00:07:48,350 --> 00:07:50,850\nNow, in our environment,\nwe have two domains.\n\n188\n00:07:50,850 --> 00:07:51,970\nWe have domain one.\n\n189\n00:07:51,970 --> 00:07:53,123\nLet me bring this up.\nWhere is that?\n\n190\n00:07:53,123 --> 00:07:57,735\nI'm gonna fire up my server manager.\n\n191\n00:07:57,735 --> 00:08:01,616\nAnd get into the active\ndirectory sites and services.\n\n192\n00:08:01,616 --> 00:08:02,550\nOr no.\n\n193\n00:08:02,550 --> 00:08:03,840\nDomains and trust.\n\n194\n00:08:03,840 --> 00:08:05,240\nI gotta get in the right tool.\n\n195\n00:08:05,240 --> 00:08:08,080\nI need to get into the Active\nDirectory Domains and Trust tool.\n\n196\n00:08:08,080 --> 00:08:09,500\n>> What are we gonna do?\n\n197\n00:08:09,500 --> 00:08:11,710\n>> Make sure I'm actually\nsharing my desktop here.\n\n198\n00:08:11,710 --> 00:08:12,440\nI say I am.\n\n199\n00:08:14,060 --> 00:08:15,120\nThere we go.\n\n200\n00:08:15,120 --> 00:08:16,313\nAll right.\nSo I'm gonna go into\n\n201\n00:08:16,313 --> 00:08:18,790\nActive Directory Domains and Trusts.\n\n202\n00:08:18,790 --> 00:08:20,640\nAnd what you'll see is I have two domains.\n\n203\n00:08:20,640 --> 00:08:24,600\nI have domain1.itpro.tv and\ndomain2.itpro.tv.\n\n204\n00:08:24,600 --> 00:08:27,070\nHow did I get that second domain?\n\n205\n00:08:27,070 --> 00:08:31,560\nWell, I went to a second machine,\nI ran DCPromo, and\n\n206\n00:08:31,560 --> 00:08:36,350\nI told it, create me a new\ndomain in my existing forest.\n\n207\n00:08:36,350 --> 00:08:39,130\nThese two domains are in the same forest.\n\n208\n00:08:39,130 --> 00:08:39,790\n>> Right.\n\n209\n00:08:39,790 --> 00:08:42,200\n>> Now, this screen is terrible for\nshowing that, right?\n\n210\n00:08:42,200 --> 00:08:44,230\nIt's hard to understand what's going on,\nbut, Mikey,\n\n211\n00:08:44,230 --> 00:08:45,550\nyou've got a diagram that shows them how.\n\n212\n00:08:45,550 --> 00:08:47,630\n>> I do.\nSo we want to take a peek at that.\n\n213\n00:08:47,630 --> 00:08:52,560\nSo we started with domain1 and\nthat was where we had that 2008 domain\n\n214\n00:08:52,560 --> 00:08:55,770\ncontroller as well as that\n2012 domain controller.\n\n215\n00:08:55,770 --> 00:09:01,140\nAnd then what Don has done is he's created\na second domain in our existing forest\n\n216\n00:09:01,140 --> 00:09:02,710\nby taking another domain controller and\n\n217\n00:09:02,710 --> 00:09:06,790\nrunning DCPromo choosing add a new\ndomain to an existing forest.\n\n218\n00:09:06,790 --> 00:09:08,400\nSo now, we've got domain2.\n\n219\n00:09:08,400 --> 00:09:12,690\nOur forest is going to get the name\nfrom that first domain that we add.\n\n220\n00:09:12,690 --> 00:09:14,040\nSo we start with nothing.\n\n221\n00:09:14,040 --> 00:09:15,750\nWe took that very first machine,\n\n222\n00:09:15,750 --> 00:09:20,000\nthat 2008 machine, created our domain\nwhich also creates our forest.\n\n223\n00:09:20,000 --> 00:09:22,330\nEven if you have a single\ndomain you still have a forest.\n\n224\n00:09:22,330 --> 00:09:25,820\nIt's a sparse forest,\nI guess, you still have one.\n\n225\n00:09:25,820 --> 00:09:28,410\nAnd, it pulls the name of the forest\nfrom the name of that, and\n\n226\n00:09:28,410 --> 00:09:30,910\nthat first domain is an important domain.\n\n227\n00:09:30,910 --> 00:09:33,460\nThat guy is known as our forest route.\n\n228\n00:09:33,460 --> 00:09:36,820\nAnd in there you're gonna find some things\nthat you won't find in any other domains,\n\n229\n00:09:36,820 --> 00:09:38,220\nno matter how many you have.\n\n230\n00:09:38,220 --> 00:09:39,760\nYou've got that enterprise admins group.\n\n231\n00:09:39,760 --> 00:09:42,340\nWhich we've talked about a couple\ntimes throughout this episode and\n\n232\n00:09:42,340 --> 00:09:43,240\nour previous episode.\n\n233\n00:09:43,240 --> 00:09:45,120\nAbout they've got forest-wide rights.\n\n234\n00:09:45,120 --> 00:09:49,040\nWhere your domain admin,\nhis rights end at that triangle,\n\n235\n00:09:49,040 --> 00:09:50,920\nat that boundary of that domain.\n\n236\n00:09:50,920 --> 00:09:53,910\nThe Enterprise admin\nhas forest-wide rights.\n\n237\n00:09:53,910 --> 00:09:55,430\nWe talked about the Schema admins,\n\n238\n00:09:55,430 --> 00:09:57,930\nthe only people that have permission\nto make changes to the Schema.\n\n239\n00:09:57,930 --> 00:10:00,910\nThey're also located in Active Directory\nin that forest root and\n\n240\n00:10:00,910 --> 00:10:02,219\nyou won't find them anywhere else.\n\n241\n00:10:03,260 --> 00:10:06,440\nAnd that very first domain controller\nhas all five of the roles,\n\n242\n00:10:06,440 --> 00:10:11,170\nincluding the FSMOs,\nincluding those two forest-wide roles.\n\n243\n00:10:11,170 --> 00:10:15,100\n>> Yeah, and the forest-wide roles,\nthat's your domain naming master and\n\n244\n00:10:15,100 --> 00:10:18,390\nyour schema, that's right, schema master.\n\n245\n00:10:18,390 --> 00:10:21,530\nSo, you know, the domain naming master,\ncuz you need somebody to keep track of\n\n246\n00:10:21,530 --> 00:10:24,710\nthe names of the domains, to make sure you\ndon't have two domains with the same name.\n\n247\n00:10:24,710 --> 00:10:27,280\nAnd a schema master,\nwhich is controlling the schema.\n\n248\n00:10:27,280 --> 00:10:31,820\nIf you look in the other domains in\nyour forest, they'll have a rid master,\n\n249\n00:10:31,820 --> 00:10:34,290\na PDC emulator and\nan infrastructure master.\n\n250\n00:10:34,290 --> 00:10:39,590\nThey will not have a schema master and\na domain naming master.\n\n251\n00:10:39,590 --> 00:10:41,560\n>> And you could move them,\nMicrosoft will recommend you don't.\n\n252\n00:10:41,560 --> 00:10:45,380\nJust leave them in that forest group,\nand you're good to go.\n\n253\n00:10:45,380 --> 00:10:48,840\n>> And we didn't show on the diagram, but\nit is using the fully qualified name.\n\n254\n00:10:48,840 --> 00:10:52,920\nSo our first domain was\ndomain1.itpro.tv and so\n\n255\n00:10:52,920 --> 00:10:56,900\nthe forest itself is domain1.itpro.tv.\n\n256\n00:10:56,900 --> 00:11:01,940\nWhen I made domain2 I told it I wanted\nto create a new domain in a new tree.\n\n257\n00:11:01,940 --> 00:11:07,140\nAnd so, it's domain2.itpro.tv, so\nthey're all underneath this itpro.tv,\n\n258\n00:11:07,140 --> 00:11:11,440\nwhich is not an active directory domain,\nthat's just our DNS domain.\n\n259\n00:11:11,440 --> 00:11:13,890\nSo it's just kind of\noff to the side there.\n\n260\n00:11:13,890 --> 00:11:15,600\n>> Just dump that up there.\n\n261\n00:11:15,600 --> 00:11:18,260\n>> But you can create child domains also.\n\n262\n00:11:18,260 --> 00:11:20,290\nWhen you create a single domain,\nit's a tree,\n\n263\n00:11:21,430 --> 00:11:25,700\nit's a tree regardless of whether there's\nany other domains attached to it or not.\n\n264\n00:11:25,700 --> 00:11:27,647\nSo when you look in that\ndiagram at domain3,\n\n265\n00:11:27,647 --> 00:11:30,610\ndomain3 is sitting off to\nthe side there all by itself.\n\n266\n00:11:30,610 --> 00:11:32,310\nIt's in its own forest.\n\n267\n00:11:32,310 --> 00:11:33,630\nThe forest is called domain3.\n\n268\n00:11:33,630 --> 00:11:38,302\nThe domain is called domain3, and\nit's a tree that is the domain3 tree.\n\n269\n00:11:38,302 --> 00:11:41,300\nSo that's what most people's active\ndirectories look like, very,\n\n270\n00:11:41,300 --> 00:11:45,670\nvery simple, but what Mike is drawing\non the left is a little more complex.\n\n271\n00:11:45,670 --> 00:11:52,140\nWe've got two trees,\ndomain1.itpro.tv and domain2.itpro.tv.\n\n272\n00:11:52,140 --> 00:11:56,520\nUnder either tree we could have several\ntiers of child domains if we want.\n\n273\n00:11:56,520 --> 00:11:59,930\nSo he's done like us.domain1.itpro.tv.\n\n274\n00:11:59,930 --> 00:12:05,990\nAnd you might do eu.domain1.itpro.tv,\nand so on.\n\n275\n00:12:05,990 --> 00:12:07,770\nFor each of the different\nchild domains that we have.\n\n276\n00:12:07,770 --> 00:12:08,710\n>> Right.\n>> All right,\n\n277\n00:12:08,710 --> 00:12:13,100\nnow the child parent relationship\nis kinda important, right?\n\n278\n00:12:13,100 --> 00:12:14,500\n>> It is.\n>> Because of what's going on between\n\n279\n00:12:14,500 --> 00:12:15,135\nthe domains.\n\n280\n00:12:15,135 --> 00:12:16,050\n>> Mm-hm.\nAnd we've got the,\n\n281\n00:12:16,050 --> 00:12:18,910\nyou know, what makes that tree is that\ncontiguous name space where you can take,\n\n282\n00:12:18,910 --> 00:12:21,750\nthe child domain is named us, and\n\n283\n00:12:21,750 --> 00:12:27,160\nthen it's just adding that to\nthe parent's name, domain1.itpro.tv.\n\n284\n00:12:27,160 --> 00:12:28,823\nThis other domain over here,\n\n285\n00:12:28,823 --> 00:12:33,414\nit's a separate tree because it's not\na contiguous, although I mean if we have,\n\n286\n00:12:33,414 --> 00:12:36,688\nwe don't have a root domain\nup here like it was ITPro.TV.\n\n287\n00:12:36,688 --> 00:12:39,720\nSo, it's not considered\na contiguous namespace there.\n\n288\n00:12:39,720 --> 00:12:41,970\nSo it would be a separate tree.\n\n289\n00:12:41,970 --> 00:12:44,700\nAnd we're getting ready, do we wanna\ngo ahead and draw some trusts up here?\n\n290\n00:12:44,700 --> 00:12:46,490\n>> Yeah, let's show some of those trusts,\n\n291\n00:12:46,490 --> 00:12:49,420\nthe way that it kind of maps out\nin an internal domain like that.\n\n292\n00:12:49,420 --> 00:12:53,580\n>> So, we were talking parent-child\nthere initially, let's do a little.\n\n293\n00:12:53,580 --> 00:12:54,860\nOh, they've got a nice line tool.\n\n294\n00:12:56,510 --> 00:12:57,640\n>> So.\n\n295\n00:12:57,640 --> 00:12:59,230\nAll the little points highlight for\nyou there.\n\n296\n00:12:59,230 --> 00:13:00,510\n>> Try to get the right points there.\n\n297\n00:13:00,510 --> 00:13:01,690\nThat is a two way arrow?\n\n298\n00:13:01,690 --> 00:13:03,000\nPerfect.\n>> Yep, perfect.\n\n299\n00:13:04,810 --> 00:13:08,552\nAll right, so whenever you create\na new domain in your forest,\n\n300\n00:13:08,552 --> 00:13:12,780\nthere is what's called a trust\ncreated in between the domains.\n\n301\n00:13:12,780 --> 00:13:15,790\nAnd the trust means that one domain\n\n302\n00:13:15,790 --> 00:13:19,340\nwill trust the authentication\nmechanisms of another domain.\n\n303\n00:13:19,340 --> 00:13:27,110\nSo us.domain1.itpro.tv will trust security\ncertificates, the kerberos tokens,\n\n304\n00:13:27,110 --> 00:13:32,090\nit will trust those that have\nbeen issued by domain1.itpro.tv.\n\n305\n00:13:32,090 --> 00:13:34,740\nHere it's a parent child trust.\n\n306\n00:13:34,740 --> 00:13:39,490\nA child domain always trusts the parent,\nand the parent always trusts the child.\n\n307\n00:13:39,490 --> 00:13:42,780\nIt's called a two way transitive trust.\n\n308\n00:13:42,780 --> 00:13:44,520\n>> Exactly.\n>> They trust each other.\n\n309\n00:13:44,520 --> 00:13:45,750\nIt's two directions.\n\n310\n00:13:45,750 --> 00:13:47,270\nRight?\nWe'll see later not every\n\n311\n00:13:47,270 --> 00:13:47,970\ntrust is like that.\n\n312\n00:13:47,970 --> 00:13:50,610\nSometimes they're unidirectional or\none-way trusts trusts, but\n\n313\n00:13:50,610 --> 00:13:52,160\nin this case a two-way trust.\n\n314\n00:13:52,160 --> 00:13:53,850\nThat's created automatically.\n\n315\n00:13:53,850 --> 00:13:54,760\nYou don't have to create it.\n\n316\n00:13:54,760 --> 00:13:57,180\nJust when you run that DCPromo wizard, and\n\n317\n00:13:57,180 --> 00:14:01,940\nyou choose to add a new child domain, it\nautomatically puts this trust in place, so\n\n318\n00:14:01,940 --> 00:14:06,980\nthat a user in\nus.domain1.itpro.tv could go and\n\n319\n00:14:06,980 --> 00:14:12,330\nsit down at a computer in\ndomain1.itpro.tv, and log in.\n\n320\n00:14:12,330 --> 00:14:14,990\n>> Exactly.\n>> And we could assign permissions and\n\n321\n00:14:14,990 --> 00:14:16,130\nstuff if we wanted.\n\n322\n00:14:16,130 --> 00:14:19,900\n>> Yeah, and it's important to know\nthey are two ways he pointed out.\n\n323\n00:14:19,900 --> 00:14:21,650\nWhich means there's a trust\ngoing in either direction.\n\n324\n00:14:21,650 --> 00:14:24,660\nNormally a lot of these drawings you'll\nactually see two separate arrows,\n\n325\n00:14:24,660 --> 00:14:27,300\nto make it easier for\nthis drawing it's just a one arrow.\n\n326\n00:14:27,300 --> 00:14:29,180\nBut there really are two separate objects.\n\n327\n00:14:29,180 --> 00:14:30,910\nOne going in each direction.\n\n328\n00:14:30,910 --> 00:14:32,780\nAnd as he said, they're transitive.\n\n329\n00:14:32,780 --> 00:14:38,350\nMeaning if A trusts B, and\nB trusts C, then A trusts C.\n\n330\n00:14:38,350 --> 00:14:40,790\nSo, as we've got here,\nthere's a parent-child trust,\n\n331\n00:14:40,790 --> 00:14:42,738\nif I can get rid of my\nsilly little boxes there.\n\n332\n00:14:42,738 --> 00:14:48,610\nThere's a parent-child trust between\ndomain1 and us.domain1.itpro.tv.\n\n333\n00:14:48,610 --> 00:14:52,110\nAnd then when I added this other domain\njust to give you guys an example.\n\n334\n00:14:52,110 --> 00:14:56,522\nLet's say this is going to be,\n\n335\n00:14:56,522 --> 00:15:00,438\nsomething like training.\n\n336\n00:15:00,438 --> 00:15:03,070\nMy little double clicker\nis not going there.\n\n337\n00:15:04,250 --> 00:15:06,279\n>> Your double clicker\nthat's an official term.\n\n338\n00:15:06,279 --> 00:15:07,730\n>> That is.\nDouble-click to add text, and\n\n339\n00:15:07,730 --> 00:15:09,390\nit doesn't want to add text.\n\n340\n00:15:09,390 --> 00:15:14,395\nLet's call it, a little bit over here,\nget out of the way.\n\n341\n00:15:14,395 --> 00:15:17,760\n>> [LAUGH]\n>> And I can quadruple-click.\n\n342\n00:15:17,760 --> 00:15:19,956\nAnyway, we'll just copy this one, maybe.\n\n343\n00:15:19,956 --> 00:15:24,440\n>> [LAUGH] We've been\ndefeated by the text box.\n\n344\n00:15:24,440 --> 00:15:25,380\n>> There we go.\n\n345\n00:15:25,380 --> 00:15:28,100\nWe'll just put that one down there and\nedit this guy, and\n\n346\n00:15:28,100 --> 00:15:28,868\nthen we'll let them do that.\n\n347\n00:15:28,868 --> 00:15:33,876\nAnd so we'll call this something like,\n\n348\n00:15:33,876 --> 00:15:40,951\nI don't know,\ntraining.us.domain1.itpro.tv,\n\n349\n00:15:40,951 --> 00:15:46,862\nand then my text disappears,\noh, there we go.\n\n350\n00:15:46,862 --> 00:15:50,580\nAnd I know I made a typo on domain, but\nI really don't wanna go fix it right now.\n\n351\n00:15:50,580 --> 00:15:52,714\nIt's giving me too much trouble.\n\n352\n00:15:52,714 --> 00:15:56,845\nBut anyway, the point is, so\n\n353\n00:15:56,845 --> 00:16:01,662\nhere We have, oops, son of a gun.\n\n354\n00:16:01,662 --> 00:16:06,070\n>> [LAUGH]\n>> Did it just wipe out half my text?\n\n355\n00:16:06,070 --> 00:16:06,700\nIt really did.\n\n356\n00:16:06,700 --> 00:16:07,850\nThere we go.\n\n357\n00:16:07,850 --> 00:16:09,608\nSo we won't fix the typo for right now.\n\n358\n00:16:09,608 --> 00:16:10,457\n>> [LAUGH]\n>> So anyway. So a new child. So\n\n359\n00:16:10,457 --> 00:16:16,383\nnow I've got a parent child between\nus.domain1.itprotv [LAUGH] and\n\n360\n00:16:16,383 --> 00:16:20,121\ntraining.us.domain1.itpro.tv.\nAnd\n\n361\n00:16:20,121 --> 00:16:22,650\nthat is also a two-way transitive trust.\n\n362\n00:16:22,650 --> 00:16:29,010\nSo because there's both transitive,\ndomain1 trusts us who trusts training.\n\n363\n00:16:29,010 --> 00:16:32,620\nSo then, domain1 trusts training and\nvice versa.\n\n364\n00:16:32,620 --> 00:16:35,560\nSo in other words, users in\ntraining could be given access very\n\n365\n00:16:35,560 --> 00:16:38,350\neasily to these resources\nup here in domain1.\n\n366\n00:16:38,350 --> 00:16:41,470\n>> Yeah, and that's one of the big\nreasons why we do these kind of trusts,\n\n367\n00:16:41,470 --> 00:16:43,830\nis you wanna be able to share\nresources between the domains.\n\n368\n00:16:43,830 --> 00:16:45,510\nYou are still one company, right,\n\n369\n00:16:45,510 --> 00:16:47,489\neven though you've got these\nseparate security boundaries.\n\n370\n00:16:49,190 --> 00:16:50,580\n>> So those are automatically created,\n\n371\n00:16:50,580 --> 00:16:53,050\nyou add that child domain\nautomatically creates those.\n\n372\n00:16:53,050 --> 00:16:55,560\nWe'll pull up our domains and\ntrust console here in a minute and\n\n373\n00:16:55,560 --> 00:16:58,840\nyou'll see that parent-child\ntrust that gets created.\n\n374\n00:16:58,840 --> 00:17:02,695\nThen when you add additional trees to\nyour forest, so in this case Don added\n\n375\n00:17:02,695 --> 00:17:08,300\ndomain2.itpro.tv, there is\nan automatic two-way transitive trust\n\n376\n00:17:08,300 --> 00:17:12,980\ncreated between forest root and\nall tree roots.\n\n377\n00:17:14,500 --> 00:17:16,420\nAll right, so\nwe'll draw that one in there.\n\n378\n00:17:16,420 --> 00:17:20,070\nAgain, automatic, two-way, transitive.\n\n379\n00:17:20,070 --> 00:17:23,530\nSo usersintraining.us could be given\n\n380\n00:17:23,530 --> 00:17:27,800\naccess to resources in domain2\nbecause of that transitivity.\n\n381\n00:17:29,060 --> 00:17:29,860\n>> Transitivity, yeah.\n\n382\n00:17:29,860 --> 00:17:31,420\n>> Transitivity, if that's a word.\n\n383\n00:17:31,420 --> 00:17:35,820\n>> The way I always learned\nit was like if A trust B and\n\n384\n00:17:35,820 --> 00:17:39,110\nB trust C, then A trust C, right?\n\n385\n00:17:39,110 --> 00:17:41,680\nTransitive, you pass through\nthe person in the middle.\n\n386\n00:17:41,680 --> 00:17:45,690\nAnd, it's not necessarily the greatest\nanalogy because in the domain world there\n\n387\n00:17:45,690 --> 00:17:49,444\nmay be many, many steps in between,\nlike in Mike's tree you've got four.\n\n388\n00:17:49,444 --> 00:17:54,597\nSo training.us.domain1.itpro.tv\ntrusts domain2.itpro.tv\n\n389\n00:17:54,597 --> 00:17:59,850\nbecause you have an uninterrupted\nchain of trust in between them.\n\n390\n00:17:59,850 --> 00:18:01,070\nAnd It's vice-versa also.\n\n391\n00:18:01,070 --> 00:18:05,890\nThe reverse is true because\nof the two-way trust.\n\n392\n00:18:05,890 --> 00:18:06,820\n>> That is a good point.\n\n393\n00:18:06,820 --> 00:18:09,920\nThat's known as the trust path.\n\n394\n00:18:09,920 --> 00:18:12,270\nHere's the one thing that we\ncan run into problems with.\n\n395\n00:18:12,270 --> 00:18:14,650\nIt's great that this is all automatic,\nit's all set up for us.\n\n396\n00:18:14,650 --> 00:18:16,680\nWe don't have to really do anything.\n\n397\n00:18:16,680 --> 00:18:19,420\nBut, if a user's sitting\nin training.us.domain1.,\n\n398\n00:18:19,420 --> 00:18:21,654\nwe've got some long names, don't we?\n\n399\n00:18:21,654 --> 00:18:23,500\n>> [LAUGH]\n>> If they're sitting down there in\n\n400\n00:18:23,500 --> 00:18:28,690\ntraining and they wanna access resources\nup in domain2, then when they go to access\n\n401\n00:18:28,690 --> 00:18:32,410\nthat resource, what's gonna happen\nis the domain controller in training\n\n402\n00:18:32,410 --> 00:18:34,840\nis gonna wanna give them, they've got\ntheir ticket granting ticket, right?\n\n403\n00:18:34,840 --> 00:18:35,720\nThey've already logged in.\n\n404\n00:18:35,720 --> 00:18:37,770\nThey've got the proof that\nthey've authenticated.\n\n405\n00:18:37,770 --> 00:18:40,000\nThey go to get their session ticket or\ntheir service ticket,\n\n406\n00:18:40,000 --> 00:18:43,500\nwhen they talk to their domain controller\nit's gonna say, hey, that resource you're\n\n407\n00:18:43,500 --> 00:18:47,440\ntrying to access it's not in my domain,\nI can't give you access to the resource.\n\n408\n00:18:47,440 --> 00:18:51,420\nBut what I can do is refer you,\nI got a trust with this other domain,\n\n409\n00:18:51,420 --> 00:18:52,470\nhow about I refer you up there?\n\n410\n00:18:52,470 --> 00:18:56,260\nAnd so then you're gonna go up here and\ntalk to that domain controller and say,\n\n411\n00:18:56,260 --> 00:18:59,390\nhey, I need a session ticket for\nthis particular resource.\n\n412\n00:18:59,390 --> 00:19:00,190\nSame thing.\n\n413\n00:19:00,190 --> 00:19:04,310\nIt's not in my domain, I can give you\na referral, and refer you up to here.\n\n414\n00:19:04,310 --> 00:19:05,080\nSame thing.\n\n415\n00:19:05,080 --> 00:19:08,720\nEventually I'll get referred all the way\naround to the domain, following that trust\n\n416\n00:19:08,720 --> 00:19:12,880\npath that has the resource that\ncan issue me my session ticket.\n\n417\n00:19:12,880 --> 00:19:15,860\nBut if there was any connectivity issues,\nif the domain controller in one of those\n\n418\n00:19:15,860 --> 00:19:19,430\ndomains on the way was unavailable,\nthat would cause a problem.\n\n419\n00:19:19,430 --> 00:19:23,100\nIf there's geographically split,\nsomething like that,\n\n420\n00:19:23,100 --> 00:19:26,380\nyou could be talking about\nslowing that access time down.\n\n421\n00:19:26,380 --> 00:19:31,430\nSo another kind of trust that we create\nwithin here is called a shortcut trust.\n\n422\n00:19:31,430 --> 00:19:34,250\nAnd the whole purpose of\nthat shortcut trust is to,\n\n423\n00:19:34,250 --> 00:19:36,820\nwell the main purpose, I guess,\nof that shortcut trust\n\n424\n00:19:36,820 --> 00:19:42,030\nis to bypass that trust path to make\na shortcut that we can jump across.\n\n425\n00:19:42,030 --> 00:19:44,720\nSo what we could do is we\ncould come in here, and\n\n426\n00:19:44,720 --> 00:19:49,720\nI'm gonna draw a little line\nbetween training.us and\n\n427\n00:19:50,880 --> 00:19:55,650\ndomain two here and we'll use a different\ncolor for this shortcut trust.\n\n428\n00:19:55,650 --> 00:19:57,160\nAnd notice what I'm going to do.\n\n429\n00:19:59,590 --> 00:20:05,650\nWe are going to change\none of these arrows to,\n\n430\n00:20:05,650 --> 00:20:09,105\nso let's go the other way, actually.\n\n431\n00:20:09,105 --> 00:20:10,330\n>> [LAUGH]\n>> We'll say the end is\n\n432\n00:20:10,330 --> 00:20:13,680\nnothing in the this starts just like this.\n\n433\n00:20:13,680 --> 00:20:16,430\nAll right,\nthat will be known as a shortcut trust.\n\n434\n00:20:16,430 --> 00:20:21,140\nSo now what I can do is, I can go across\nthat instead of going all the way around\n\n435\n00:20:21,140 --> 00:20:24,430\nthat path, but a couple key things we\ngotta worry about these shortcut trusts.\n\n436\n00:20:24,430 --> 00:20:28,737\nOne, they're not automatic,\nthey're created manually, but\n\n437\n00:20:28,737 --> 00:20:33,060\nthey are transitive, but\nthey're only one-way, right?\n\n438\n00:20:33,060 --> 00:20:36,140\nAnd so the arrow of the trust\nbecomes really important.\n\n439\n00:20:36,140 --> 00:20:40,820\nThat arrow is going from\ndomain2 down to training which\n\n440\n00:20:40,820 --> 00:20:44,060\nmeans domain2 trusts training.\n\n441\n00:20:44,060 --> 00:20:47,500\nWhich means users in training\ncan go across the trust and\n\n442\n00:20:47,500 --> 00:20:49,468\naccess resources in domain2.\n\n443\n00:20:49,468 --> 00:20:54,250\nUsers in domain2 would have to go around\nthe path still to get down to resources\n\n444\n00:20:54,250 --> 00:20:55,330\nin training.\n\n445\n00:20:55,330 --> 00:20:57,770\nSo you can create one in each\ndirection if you want to.\n\n446\n00:20:57,770 --> 00:20:58,984\nThey are transitive.\n\n447\n00:20:58,984 --> 00:21:03,400\nA user, let's say here in US,\n\n448\n00:21:03,400 --> 00:21:05,600\ncould go down to training and\nthen up that shortcut.\n\n449\n00:21:05,600 --> 00:21:09,400\nAnd we could create several shortcuts.\n\n450\n00:21:09,400 --> 00:21:15,460\nBut the key there is the one that they\nare transitive but they're one-way and\n\n451\n00:21:15,460 --> 00:21:20,130\nthe direction of the arrow is\nopposite of the direction of access.\n\n452\n00:21:20,130 --> 00:21:26,240\nIt'd be like saying, okay I trust Don,\nthat means Don can drive my car.\n\n453\n00:21:26,240 --> 00:21:30,460\nI can't drive his car, right,\nbecause he didn't say he trusted me.\n\n454\n00:21:30,460 --> 00:21:31,688\n>> Yeah, yeah, that's about right.\n\n455\n00:21:31,688 --> 00:21:34,230\n[LAUGH]\n>> [LAUGH] He's seen me drive.\n\n456\n00:21:34,230 --> 00:21:37,730\n>> Now let's make sure that we're\nreally clear on something here.\n\n457\n00:21:37,730 --> 00:21:39,730\nRegardless of whether that trust existed,\n\n458\n00:21:39,730 --> 00:21:41,915\nif Mike didn't create that shortcut trust,\nright?\n\n459\n00:21:41,915 --> 00:21:42,680\n>> Mm-hm.\n\n460\n00:21:42,680 --> 00:21:46,810\n>> Users in domain2 can still\naccess resources and training.\n\n461\n00:21:46,810 --> 00:21:50,308\nAnd users in training can still\naccess resources in domain2.\n\n462\n00:21:50,308 --> 00:21:53,810\nThe only difference is what domain\ncontrollers they have to talk to to make\n\n463\n00:21:53,810 --> 00:21:54,760\nit happen.\n\n464\n00:21:54,760 --> 00:21:58,670\nSo without the shortcut trust, you\nstill have the access, it's just not as\n\n465\n00:21:58,670 --> 00:22:03,330\nefficient, because you'll see you'll have\nto get at least four domain controllers\n\n466\n00:22:03,330 --> 00:22:07,335\ninvolved any time training talks\nto domain2 or vice versa, right?\n\n467\n00:22:07,335 --> 00:22:07,840\n>> Mm-hm.\n\n468\n00:22:07,840 --> 00:22:10,510\n>> So, the shortcut trust\nis all about efficiency.\n\n469\n00:22:10,510 --> 00:22:13,080\n>> Right.\n>> If you have it where users\n\n470\n00:22:13,080 --> 00:22:16,500\ninfrequently access the resources,\nso maybe every now and\n\n471\n00:22:16,500 --> 00:22:19,080\nthen the training team\nneeds to look at domain2.\n\n472\n00:22:19,080 --> 00:22:19,985\nOr every now and then,\n\n473\n00:22:19,985 --> 00:22:23,230\ndomain2 needs to look at training, then\ndon't even bother with the shortcut trust.\n\n474\n00:22:23,230 --> 00:22:24,700\nIt's a needless complication.\n\n475\n00:22:24,700 --> 00:22:26,170\nDon't worry about it, right?\n\n476\n00:22:26,170 --> 00:22:30,675\nBut if every single day the training\ndepartment has folders mapped over to\n\n477\n00:22:30,675 --> 00:22:35,510\ndomain2 and they're accessing that data,\nwell, the first time they access that\n\n478\n00:22:35,510 --> 00:22:37,840\nresource every day, you're hitting\nfour domain controllers to do it.\n\n479\n00:22:37,840 --> 00:22:40,052\nAnd that's not efficient.\n\n480\n00:22:40,052 --> 00:22:44,580\nThe shortcut trust can cut you down, in\nMike's scenario, from four DCs down to and\n\n481\n00:22:44,580 --> 00:22:46,472\nso it makes it a lot more efficient.\n\n482\n00:22:46,472 --> 00:22:50,270\nThe lookup happens faster, people get to\nthat resource faster, the first time.\n\n483\n00:22:50,270 --> 00:22:53,780\nOnce they access it they have a token and\nthe token, are they 24-hour tokens?\n\n484\n00:22:53,780 --> 00:22:54,474\n>> I wanna say they're eight.\n\n485\n00:22:54,474 --> 00:22:54,981\n>> Eight-hour tokens?\n\n486\n00:22:54,981 --> 00:22:57,760\n>> The session tickets\nare a little shorter I think, so.\n\n487\n00:22:57,760 --> 00:23:00,310\n>> So they're getting an eight-hour\ntoken and that means for\n\n488\n00:23:00,310 --> 00:23:02,860\nthe next eight hours you really\njust sped em up one time, and\n\n489\n00:23:02,860 --> 00:23:05,030\nthen the rest of the time\nis pretty normal.\n\n490\n00:23:05,030 --> 00:23:06,920\nSo that's why I say it's infrequent.\n\n491\n00:23:06,920 --> 00:23:08,030\nInfrequent access between them.\n\n492\n00:23:08,030 --> 00:23:10,960\nYou don't even bother with the shortcut\ntrust which most people don't.\n\n493\n00:23:10,960 --> 00:23:15,290\nBut if it's frequent access you can\nmake people's life a little bit better,\n\n494\n00:23:15,290 --> 00:23:19,960\nsecond by second every day so\nit helps out a little bit.\n\n495\n00:23:19,960 --> 00:23:23,920\nSo yeah, that's what those\nshortcut trusts are used for.\n\n496\n00:23:23,920 --> 00:23:26,220\nYou do have to manually\ncreate them though, right?\n\n497\n00:23:26,220 --> 00:23:26,860\n>> Right.\n>> Which,\n\n498\n00:23:26,860 --> 00:23:29,960\nyou know, our domain only has two.\n\n499\n00:23:29,960 --> 00:23:31,300\n>> Yeah, I don't think we can.\n\n500\n00:23:31,300 --> 00:23:32,090\n>> I wonder if it'll let us.\n\n501\n00:23:32,090 --> 00:23:32,960\nLet's see.\n\n502\n00:23:32,960 --> 00:23:36,050\nSo I'm going into my, here,\nI'll just pull this up on mine.\n\n503\n00:23:37,200 --> 00:23:39,460\nI've got my active\ndirectory domains in trust.\n\n504\n00:23:39,460 --> 00:23:42,420\nAnd we've got two domains,\ndomain1 and domain2.\n\n505\n00:23:42,420 --> 00:23:44,938\nWell, notice how they're not\nnested underneath each other.\n\n506\n00:23:44,938 --> 00:23:47,559\nAnd that's because we don't have\na parent-child relationship here.\n\n507\n00:23:47,559 --> 00:23:49,936\nWe have two trees and\ntrees are side-by-side.\n\n508\n00:23:49,936 --> 00:23:52,291\nAnd, so, when you create two trees,\n\n509\n00:23:52,291 --> 00:23:57,200\nthere is a two-way transit of trust\nautomatically between the two trees.\n\n510\n00:23:57,200 --> 00:24:02,210\nSo, these guys trust each other but\nI didn't have to create that, they did it.\n\n511\n00:24:02,210 --> 00:24:05,360\nIf I pulled the properties of\nthat domain and I go to trust.\n\n512\n00:24:05,360 --> 00:24:09,300\nSee how it's got that domain2.itpro.tv,\nand it's got it two ways.\n\n513\n00:24:09,300 --> 00:24:12,230\nYou've got an outgoing trust,\nand an incoming trust.\n\n514\n00:24:12,230 --> 00:24:13,675\nThe two different ways.\n\n515\n00:24:13,675 --> 00:24:14,480\n>> Mm-hm.\n\n516\n00:24:14,480 --> 00:24:18,310\n>> And the trust type I can\nsee is a tree root type.\n\n517\n00:24:19,370 --> 00:24:22,790\nThey trust each other because well,\nthey're both trees,\n\n518\n00:24:22,790 --> 00:24:24,110\nand they're roots in the forest.\n\n519\n00:24:24,110 --> 00:24:25,570\nAnd so\nthey automatically trust each other.\n\n520\n00:24:25,570 --> 00:24:27,280\nYou might also see parent child.\n\n521\n00:24:27,280 --> 00:24:27,900\nRight?\n\n522\n00:24:27,900 --> 00:24:31,210\nIf one is a child of another one they're\ngonna automatically trust each other.\n\n523\n00:24:31,210 --> 00:24:32,032\nAll right.\n\n524\n00:24:32,032 --> 00:24:35,380\nA shortcut trust though,\nif we create a new one.\n\n525\n00:24:35,380 --> 00:24:38,840\nWhen we go to create a new trust, it's\ngonna ask us who it is we're gonna trust.\n\n526\n00:24:38,840 --> 00:24:41,160\nAnd I don't think it's gonna let me do\nthis one just cuz we already have it.\n\n527\n00:24:41,160 --> 00:24:43,490\nMaybe during the break I'll whip\nup another domain controller,\n\n528\n00:24:43,490 --> 00:24:45,716\nbecause you can never have too many.\n\n529\n00:24:45,716 --> 00:24:46,720\n>> [LAUGH]\n>> Let's see.\n\n530\n00:24:46,720 --> 00:24:52,006\n[CROSSTALK] So if I do domain two.\n\n531\n00:24:52,006 --> 00:24:52,749\nLet's find out.\n\n532\n00:24:55,767 --> 00:24:58,410\nThat already exists.\n\n533\n00:24:58,410 --> 00:25:00,940\nAll right, during the break\nI'll whip up another domain.\n\n534\n00:25:00,940 --> 00:25:03,210\nI'll whip up a child so\nthat we can see that, and\n\n535\n00:25:03,210 --> 00:25:05,180\nthen we can see a shortcut trust.\n\n536\n00:25:05,180 --> 00:25:08,570\nWhat I'll do is I'll build\na child off of domain1 and\n\n537\n00:25:08,570 --> 00:25:12,440\nthen we'll build a shortcut trust\nbetween that child and domain2 so\n\n538\n00:25:12,440 --> 00:25:15,760\nthat when the child does look ups it won't\nhave to pass through domain1 to do it.\n\n539\n00:25:15,760 --> 00:25:20,450\nThis is probably a pretty good\nspot to stop and do that.\n\n540\n00:25:20,450 --> 00:25:22,990\nI guess they the only other thing worth\nmentioning if we go back to Mike's\n\n541\n00:25:22,990 --> 00:25:26,805\ndiagram, in his diagram he shows\ndomain3 sitting out there.\n\n542\n00:25:26,805 --> 00:25:29,010\nDomain3 is in a separate forest.\n\n543\n00:25:30,200 --> 00:25:34,350\nForests are basically defined\nas organizational boundaries.\n\n544\n00:25:34,350 --> 00:25:36,320\nThe forest boundary is your company,\nright?\n\n545\n00:25:36,320 --> 00:25:38,890\nThat's the end of the systems\nthat you control.\n\n546\n00:25:38,890 --> 00:25:41,550\nSo if somebody has a domain\nin a different forest,\n\n547\n00:25:41,550 --> 00:25:43,550\nthat is completely separate from you.\n\n548\n00:25:43,550 --> 00:25:45,370\n>> No administrative\noverlap between forests.\n\n549\n00:25:45,370 --> 00:25:45,940\n>> Absolutely none.\n\n550\n00:25:45,940 --> 00:25:49,970\nThere are no trusts, nothing in\nplace between forests like this.\n\n551\n00:25:49,970 --> 00:25:52,920\nAnd so later on in the show we're\ngonna take a look at that because,\n\n552\n00:25:52,920 --> 00:25:55,850\njust because they're a separate company\ndoesn't mean you're not necessarily going\n\n553\n00:25:55,850 --> 00:25:58,210\nto trust them,\nthere are several scenarios.\n\n554\n00:25:58,210 --> 00:26:01,200\nLike maybe you're company just\nacquired another company.\n\n555\n00:26:01,200 --> 00:26:02,720\nYou just bought somebody.\n\n556\n00:26:02,720 --> 00:26:05,290\nOr maybe it's a contracting\norganization and\n\n557\n00:26:05,290 --> 00:26:07,830\nyou're setting up a temporary\npartnership with them.\n\n558\n00:26:07,830 --> 00:26:11,285\nAnd so you want to trust them for\na certain period of time so they can use\n\n559\n00:26:11,285 --> 00:26:14,205\ntheir own user accounts instead of you\nhaving to issue new user accounts.\n\n560\n00:26:14,205 --> 00:26:16,955\n>> I've seen situations where the DMZ,\nthe screen sublet,\n\n561\n00:26:16,955 --> 00:26:20,245\nis actually separate forest,\nwith completely separate control.\n\n562\n00:26:20,245 --> 00:26:23,475\nAnd you can have a lot more control over\nwhat's going on between those forests\n\n563\n00:26:23,475 --> 00:26:24,740\nbecause there's nothing automatic.\n\n564\n00:26:24,740 --> 00:26:25,810\n>> Yep.\n\n565\n00:26:25,810 --> 00:26:29,750\nAnd on those trusts they're,\nnot normally transitive,\n\n566\n00:26:29,750 --> 00:26:30,330\nwe'll see\n>> Yes.\n\n567\n00:26:30,330 --> 00:26:31,490\n>> Some variations there.\n\n568\n00:26:31,490 --> 00:26:33,100\nBut we'll talk about\nthose a little bit later.\n\n569\n00:26:33,100 --> 00:26:35,170\nBut that's why he's got\nthat forest on the diagram.\n\n570\n00:26:35,170 --> 00:26:37,040\nWe're definitely going to visit that one.\n\n571\n00:26:37,040 --> 00:26:40,359\nBut yeah, let's stop for a break and\nI'll just whip up another DC so\n\n572\n00:26:40,359 --> 00:26:43,927\nwe can demonstrate that process and\nkind of show those internal trusts.\n\n573\n00:26:43,927 --> 00:26:45,308\n>> Okay, sounds like a plan.\n\n574\n00:26:45,308 --> 00:26:49,149\n>> All right, ladies and gentlemen,\n\n575\n00:26:49,149 --> 00:26:53,560\nstay tuned, we'll be back after this.\n\n576\n00:26:53,560 --> 00:26:57,243\n[SOUND] Alright, welcome back everybody.\n\n577\n00:26:57,243 --> 00:27:00,924\nSo during the break I'm frantically\ninstalling the server and\n\n578\n00:27:00,924 --> 00:27:04,952\nadding the role and stuff to build\nup that other domain controller and\n\n579\n00:27:04,952 --> 00:27:09,536\nthen it occurred to me that we've created\ncountless domains on the show now but\n\n580\n00:27:09,536 --> 00:27:13,585\nI don't know if we have actually\ncreated a child domain on this show.\n\n581\n00:27:13,585 --> 00:27:14,242\n>> I don't think so.\n\n582\n00:27:14,242 --> 00:27:17,480\n>> So I held off, I didn't create the\nchild domain because I wanted to show you\n\n583\n00:27:17,480 --> 00:27:20,470\nguys that process and it really is\njust picking some different options in\n\n584\n00:27:20,470 --> 00:27:22,510\nthe Wizard but let's take a look at it.\n\n585\n00:27:22,510 --> 00:27:27,170\nI've got this server up and what we're\ngonna do is, is we have domain1.itpro.tv.\n\n586\n00:27:27,170 --> 00:27:31,730\nWe're gonna create a child domain\ncalled training.domain1.itpro.tv, and\n\n587\n00:27:31,730 --> 00:27:36,170\nthis would be our training domain\nwhere new employees get trained or\n\n588\n00:27:36,170 --> 00:27:38,740\nwhatever before they move\ninto the real environment.\n\n589\n00:27:38,740 --> 00:27:42,590\nSo, we're gonna go ahead and\ntake it and promote it up.\n\n590\n00:27:42,590 --> 00:27:45,650\nAnd so I'll go in here and\nrun my DCPromo just like normal.\n\n591\n00:27:45,650 --> 00:27:48,600\nBut I'm gonna answer these\nquestions a little bit differently.\n\n592\n00:27:48,600 --> 00:27:50,250\n>> Right.\n>> You'll see that it defaults to\n\n593\n00:27:50,250 --> 00:27:52,520\nadd a domain controller\nto an existing domain.\n\n594\n00:27:52,520 --> 00:27:54,340\n>> Right.\n>> If you got a single domain environment,\n\n595\n00:27:54,340 --> 00:27:57,630\nthat's the one you always choose and\nthat's that, alright?\n\n596\n00:27:57,630 --> 00:28:02,070\nBut you've got add a new\ndomain to an existing forest.\n\n597\n00:28:02,070 --> 00:28:06,280\nWell, if we do that, we have two choices.\n\n598\n00:28:06,280 --> 00:28:10,790\nYou can create an all-new tree,which\nis what I did with domain2, or\n\n599\n00:28:10,790 --> 00:28:13,020\nyou can create a child domain.\n\n600\n00:28:13,020 --> 00:28:19,740\nSo, a child domain underneath an existing\ntree or its own tree all to itself.\n\n601\n00:28:19,740 --> 00:28:20,260\nAll right.\n\n602\n00:28:20,260 --> 00:28:22,940\nAnd you'll notice the difference is when\nwe chose a child domain, you've gotta\n\n603\n00:28:22,940 --> 00:28:27,010\nchoose a parent, versus when you create\na tree, you just have to pick a forest.\n\n604\n00:28:27,010 --> 00:28:28,210\n>> What forest are you adding the tree to?\n\n605\n00:28:28,210 --> 00:28:31,240\n>> Mm-hm.\nAnd then we could always create an all-new\n\n606\n00:28:31,240 --> 00:28:35,190\nforest, if we just want to be completely\nseparate, all-new, all-individual.\n\n607\n00:28:35,190 --> 00:28:39,180\nAnd if this is the first domain controller\nyou're building, you need to do a forest,\n\n608\n00:28:39,180 --> 00:28:40,040\nall right.\n\n609\n00:28:40,040 --> 00:28:44,940\nBut I'm gonna do a child\ndomain underneath domain1.\n\n610\n00:28:44,940 --> 00:28:49,100\nAnd so, if I wanna browse,\nit's gonna ask me for my credentials, and\n\n611\n00:28:49,100 --> 00:28:53,520\noh, you know what, I'm not joined to the\ndomain, so this is gonna fail, isn't it?\n\n612\n00:28:53,520 --> 00:28:55,650\n>> Yeah, but you should still be,\nif you're an enterprise admin,\n\n613\n00:28:55,650 --> 00:28:58,470\nyou should be able to browse through\nthat domain in a context partition.\n\n614\n00:28:58,470 --> 00:28:59,490\n>> Oh I see.\nAlthough I think you.\n\n615\n00:28:59,490 --> 00:29:01,690\n>> Yeah I'm not even joined at the domain\nthat's what we won't even see.\n\n616\n00:29:01,690 --> 00:29:02,650\n>> Yeah actually.\n>> I'm gonna type it in.\n\n617\n00:29:02,650 --> 00:29:04,430\n>> Yeah.\n>> It's fine you know you can always just\n\n618\n00:29:04,430 --> 00:29:06,980\ntype it in if you're not\njoined at the domain yet.\n\n619\n00:29:06,980 --> 00:29:09,540\nIf I was already joined at the domain\nI'd be able to hit select and\n\n620\n00:29:09,540 --> 00:29:11,300\nI'd see the domains I could pick from.\n\n621\n00:29:11,300 --> 00:29:12,870\n>> RIght.\n>> But in my case I'm not so\n\n622\n00:29:12,870 --> 00:29:17,910\nI'm going to go into domain1.itpro.tv and\nmy new domain\n\n623\n00:29:17,910 --> 00:29:22,213\nis going to be training., actually, I\ndon't think you have to type that, do you?\n\n624\n00:29:22,213 --> 00:29:22,860\n>> Just training.\n\n625\n00:29:22,860 --> 00:29:24,770\nAnd you'll need to\nchange your credentials.\n\n626\n00:29:24,770 --> 00:29:26,877\nIt looks like you're the local admin.\n\n627\n00:29:26,877 --> 00:29:28,770\n>> Yeah, so I need to have domain1.\n\n628\n00:29:28,770 --> 00:29:32,760\nAnd you've gotta use credentials\nthat are valid in that\n\n629\n00:29:32,760 --> 00:29:35,980\nparent domain to be able to access it,\nso I'll just punch that in.\n\n630\n00:29:35,980 --> 00:29:37,560\nThat should be all that it needs.\n\n631\n00:29:37,560 --> 00:29:42,240\nSo, I'm gonna be creating\ntraining.domain1.itpro.tv, so\n\n632\n00:29:42,240 --> 00:29:44,190\na child under that existing domain.\n\n633\n00:29:44,190 --> 00:29:46,630\nI'll see if it resolves all of that okay.\n\n634\n00:29:46,630 --> 00:29:49,240\nIf it doesn't,\nI'll just need to join the domain first.\n\n635\n00:29:49,240 --> 00:29:50,928\nName resolution.\n\n636\n00:29:50,928 --> 00:29:54,168\n>> [CROSSTALK]\n>> Yeah, it, if their on the same network,\n\n637\n00:29:54,168 --> 00:29:56,170\nthis almost always succeeds.\n\n638\n00:29:56,170 --> 00:29:57,260\nAnd there it went for me.\n\n639\n00:29:57,260 --> 00:29:58,820\nIf these were on separate networks,\n\n640\n00:29:58,820 --> 00:30:02,420\nthen it really comes down to your DNS\nservers and having a machine that's\n\n641\n00:30:02,420 --> 00:30:04,910\nalready joined at the domain can make\nsure those problems don't happen.\n\n642\n00:30:04,910 --> 00:30:06,480\nIn my case it worked just fine.\n\n643\n00:30:06,480 --> 00:30:09,550\nSo my domain functional level is\ngonna go to Windows Server 2012 R2.\n\n644\n00:30:09,550 --> 00:30:10,398\nI'm okay with that.\n\n645\n00:30:10,398 --> 00:30:10,970\n>> Mm-hm.\n>> I'm not\n\n646\n00:30:10,970 --> 00:30:12,510\nnot gonna bring up any more DNS servers.\n\n647\n00:30:12,510 --> 00:30:13,565\nWe've got enough of those.\n\n648\n00:30:13,565 --> 00:30:18,060\n>> [LAUGH]\n>> And I'll punch in my password for DSRM.\n\n649\n00:30:18,060 --> 00:30:22,090\nAll right, so\nwhen it comes up it's not gonna ask me\n\n650\n00:30:22,090 --> 00:30:25,600\ntoo much more because it's basically\na child under some existing domain.\n\n651\n00:30:25,600 --> 00:30:27,320\nSo it's just my normal options\n>> Mm-hm.\n\n652\n00:30:27,320 --> 00:30:30,020\n>> I'll have to pick my NetBIOS name\nwhich we'll just default to training.\n\n653\n00:30:30,020 --> 00:30:31,370\nI'm fine with that.\n\n654\n00:30:31,370 --> 00:30:32,673\nAnd then my paths,\n\n655\n00:30:32,673 --> 00:30:37,850\nwe'll stick with the default of\nC:\\windows\\NTDS and all those guys.\n\n656\n00:30:37,850 --> 00:30:41,230\n>> Yes, that was really the only\ndifference was that first screen.\n\n657\n00:30:41,230 --> 00:30:43,700\nYou're just telling it hey,\nI'm not doing the normal\n\n658\n00:30:43,700 --> 00:30:46,530\nadding a domain controller to an existing\ndomain, I wanna create a new one, and\n\n659\n00:30:46,530 --> 00:30:49,890\nI want it to be a child of\nan existing in that same forest.\n\n660\n00:30:49,890 --> 00:30:53,080\n>> Just gotta let it finish its\nlittle prerequisite check here, and\n\n661\n00:30:53,080 --> 00:30:55,830\nas soon as we're done,\nwe will be in business.\n\n662\n00:30:57,330 --> 00:30:59,240\nThere we go.\nAnd it's gonna go ahead and promote us.\n\n663\n00:30:59,240 --> 00:31:02,540\nNow we will have to reboot, so\nwe'll give it a moment to do that.\n\n664\n00:31:02,540 --> 00:31:05,590\nBut otherwise we'll be a child domain.\n\n665\n00:31:05,590 --> 00:31:08,120\nNow as a part of building this,\nit says okay,\n\n666\n00:31:08,120 --> 00:31:12,570\nyou're a child domain of an existing\ndomain, domain1.itpro.tv.\n\n667\n00:31:12,570 --> 00:31:17,510\nAnd so as it comes up,\nit's gonna build a two-way transitive\n\n668\n00:31:17,510 --> 00:31:21,025\ntrust that is a parent-child trust between\n\n669\n00:31:21,025 --> 00:31:26,120\ntraining.domain1.itpro.tv and\ndomain1.itpro.tv.\n\n670\n00:31:26,120 --> 00:31:28,110\nSo it's doing that for\nus in the background.\n\n671\n00:31:28,110 --> 00:31:30,580\nWe don't have to worry about it.\n\n672\n00:31:30,580 --> 00:31:34,230\nSo let's jump back, Mike or,\noh, it's gonna reboot here.\n\n673\n00:31:34,230 --> 00:31:35,278\n>> Yup.\n>> So while it's rebooting,\n\n674\n00:31:35,278 --> 00:31:36,551\nlet's jump back over and\nlook at Mike's diagram.\n\n675\n00:31:36,551 --> 00:31:37,188\n>> Mm-hm.\n>> And\n\n676\n00:31:37,188 --> 00:31:39,375\nhe's updated it to reflect\nwhat we've just built.\n\n677\n00:31:39,375 --> 00:31:42,829\nRight, so now we've got our\noriginal domain1.it itpro.tv.\n\n678\n00:31:42,829 --> 00:31:50,330\nWe had our domain2.itpro.tv,\nwhich was a separate tree in that forest.\n\n679\n00:31:50,330 --> 00:31:51,920\nAnd now we've added this training.\n\n680\n00:31:51,920 --> 00:31:54,980\nThat's what we're doing right now is,\nwe took a machine,\n\n681\n00:31:54,980 --> 00:31:58,980\ninstalled Active Directory, and\nwe're creating training.domain1.itpro.tv.\n\n682\n00:31:58,980 --> 00:32:00,385\nSo we're gonna get that automatic,\n\n683\n00:32:00,385 --> 00:32:03,830\ntwo-way transit of trust that gets\ncreated between parent and child.\n\n684\n00:32:03,830 --> 00:32:05,424\nI've kinda color-coded them for us there.\n\n685\n00:32:05,424 --> 00:32:07,701\n>> [LAUGH]\n>> Parent-child is in the blue.\n\n686\n00:32:07,701 --> 00:32:12,068\nAnd I really probably shouldn't call that\na parent-child, that should actually be\n\n687\n00:32:12,068 --> 00:32:12,728\n>> A tree.\n\n688\n00:32:12,728 --> 00:32:13,622\n>> A tree.\n\n689\n00:32:13,622 --> 00:32:14,430\n>> A tree root, right?\n\n690\n00:32:14,430 --> 00:32:15,910\n>> Yeah, so we could change that up.\n\n691\n00:32:16,920 --> 00:32:20,590\n>> Well, so when it's done, we haven't\ncreated that shortcut trust yet.\n\n692\n00:32:20,590 --> 00:32:22,180\nSo, when this is done,\n\n693\n00:32:22,180 --> 00:32:26,680\nif a user in-training accesses\na resource in domain two.\n\n694\n00:32:26,680 --> 00:32:29,470\nDomain two is going to look\nthem up against their own DC.\n\n695\n00:32:29,470 --> 00:32:31,260\nAnd it's gonna fail,\ncuz the records aren't there.\n\n696\n00:32:31,260 --> 00:32:33,490\nIt's going to refer them to domain one.\n\n697\n00:32:33,490 --> 00:32:36,920\nDomain one's gonna look up the records,\nand it's gonna fail there, and\n\n698\n00:32:36,920 --> 00:32:39,869\nthen it's gonna forward it, or\nredirect it over to training.\n\n699\n00:32:39,869 --> 00:32:42,820\nAnd training's DC will look it up and\nit will succeed.\n\n700\n00:32:42,820 --> 00:32:47,810\nSo, right now, training accessing domain\ntwo will involve three domain controllers.\n\n701\n00:32:47,810 --> 00:32:50,430\nBut we can put that shortcut\ntrust in place, and\n\n702\n00:32:50,430 --> 00:32:52,660\nnow it'll just be between\nthose two domains.\n\n703\n00:32:52,660 --> 00:32:55,510\nYou'll have two domain controllers\ninvolved, which is more efficient.\n\n704\n00:32:55,510 --> 00:32:56,353\nAll right, so\n\n705\n00:32:56,353 --> 00:33:00,442\nwe'll be able to do that as soon as\nthis DC is done coming back online.\n\n706\n00:33:00,442 --> 00:33:03,268\nIn fact, the trust should already be\nin place, I might be able to see that.\n\n707\n00:33:03,268 --> 00:33:04,418\n>> Should be able to see that, right?\n\n708\n00:33:04,418 --> 00:33:06,755\n>> Well, we'll see if we\ncan see that ahead of time,\n\n709\n00:33:06,755 --> 00:33:08,600\nlet me get over to my 2012 box here.\n\n710\n00:33:10,180 --> 00:33:12,217\nAnd, I guess let me get logged back in.\n\n711\n00:33:14,286 --> 00:33:18,380\nI keep hitting some kind of shortcut on\nmy computer that is locking the screen.\n\n712\n00:33:18,380 --> 00:33:21,570\nWindows key L is what normally locks it,\nbut I am not hitting that, so\n\n713\n00:33:21,570 --> 00:33:25,000\nI'm hitting something else,\nit keeps locking my screen.\n\n714\n00:33:25,000 --> 00:33:27,718\nAll right, let's go ahead and\nrefresh this and see what we get.\n\n715\n00:33:29,900 --> 00:33:33,280\nAll right, so when I refresh it,\nthings don't look any different at first.\n\n716\n00:33:33,280 --> 00:33:35,248\nBut when I expand out domain one,\n\n717\n00:33:35,248 --> 00:33:39,340\nI can see there's\ntraining.domain1.itpro.tv underneath it.\n\n718\n00:33:39,340 --> 00:33:42,182\nThey're nested because it's a parent,\nchild, right?\n\n719\n00:33:42,182 --> 00:33:46,438\nAnd when I pull up the properties for\ndomain one, and\n\n720\n00:33:46,438 --> 00:33:49,533\nI look at the trusts that are present,\n\n721\n00:33:49,533 --> 00:33:54,079\nI can see it's got a tree-root\ntrust to domain two, and\n\n722\n00:33:54,079 --> 00:33:59,155\nit's got a child trust to\ntraining.domain1.itpro.tv.\n\n723\n00:33:59,155 --> 00:34:00,793\nWe didn't create those trusts.\n\n724\n00:34:00,793 --> 00:34:01,407\n>> Neither one of them.\n\n725\n00:34:01,407 --> 00:34:03,640\n>> They were created during\nthe promotion process.\n\n726\n00:34:03,640 --> 00:34:06,960\nInside of your forest, those are created,\nand you can't work with those.\n\n727\n00:34:06,960 --> 00:34:09,730\nNotice when I highlight those\nthe Remove button is not there.\n\n728\n00:34:09,730 --> 00:34:10,799\nI can't remove them.\n\n729\n00:34:10,799 --> 00:34:14,670\nAnd if pull up their properties, well,\nI get a few little things here, but\n\n730\n00:34:14,670 --> 00:34:16,520\nthese aren't changeable fields.\n\n731\n00:34:16,520 --> 00:34:18,990\nIf I try and type in these,\nnothing happens, so\n\n732\n00:34:18,990 --> 00:34:24,350\nthe only real option I have is, The other\ndomain supports Kerberos AES encryption.\n\n733\n00:34:24,350 --> 00:34:28,160\nYou can turn that on or off, and it's-\n>> And you can validate the trust.\n\n734\n00:34:28,160 --> 00:34:29,170\n>> Yes.\n>> And that's it.\n\n735\n00:34:29,170 --> 00:34:31,490\n>> So, not really much that\nyou can do with these.\n\n736\n00:34:31,490 --> 00:34:34,860\nThe validate is kinda nice I guess, if you\nwanna just see if it's actually working.\n\n737\n00:34:34,860 --> 00:34:36,470\n>> If you're having issues for\nsome reason, and\n\n738\n00:34:36,470 --> 00:34:39,110\nyou wanna see if maybe the trust was part\nof the reason, you come here and test it,\n\n739\n00:34:39,110 --> 00:34:40,510\nand make sure it did created.\n\n740\n00:34:40,510 --> 00:34:42,490\nProbably more useful on manual trust,\n\n741\n00:34:42,490 --> 00:34:44,070\ntrust that we create,\nthan those automatic.\n\n742\n00:34:44,070 --> 00:34:46,950\nI don't know that I've ever seen\na real issue come up with those.\n\n743\n00:34:46,950 --> 00:34:49,950\n>> Yeah.\n>> Other than, yeah, just make it all,\n\n744\n00:34:49,950 --> 00:34:51,310\nfailing altogether.\n\n745\n00:34:51,310 --> 00:34:55,320\n>> So, we've got it, it's there,\nwe now have this additional domain.\n\n746\n00:34:55,320 --> 00:34:59,678\nThe only problem is, if somebody in\ntraining decides to access domain two,\n\n747\n00:34:59,678 --> 00:35:03,163\nthere's gonna be some extra\ndomain controllers involved.\n\n748\n00:35:03,163 --> 00:35:07,404\nAnd so here's where we may choose\nto create a shortcut trust.\n\n749\n00:35:07,404 --> 00:35:07,950\n>> Right.\n\n750\n00:35:07,950 --> 00:35:10,534\n>> All right, now when you create a trust,\n\n751\n00:35:10,534 --> 00:35:14,570\nnotice how you have incoming trusts and\noutgoing trusts.\n\n752\n00:35:14,570 --> 00:35:16,430\nThat's our direction.\n\n753\n00:35:16,430 --> 00:35:21,140\nDomains trusted by this domain, that\nmeans that the domain I'm currently on,\n\n754\n00:35:21,140 --> 00:35:23,660\nwill trust user accounts\nfrom somebody else.\n\n755\n00:35:23,660 --> 00:35:26,110\n>> From somebody else on the other side,\nso this's an outgoing trust.\n\n756\n00:35:26,110 --> 00:35:28,780\nWe trust somebody else, right?\n\n757\n00:35:28,780 --> 00:35:34,370\n>> The other one, domains that trust this\ndomain, that's other people that trust us.\n\n758\n00:35:34,370 --> 00:35:35,904\nSo when we-\n>> Allow you to access to resources in\n\n759\n00:35:35,904 --> 00:35:36,930\ntheir domain.\n\n760\n00:35:36,930 --> 00:35:37,940\n>> Exactly.\n\n761\n00:35:37,940 --> 00:35:42,930\nAnd, so when we go to create a new trust,\nit's gonna ask us about those ends, right,\n\n762\n00:35:42,930 --> 00:35:44,730\nit needs to know who's trusting who.\n\n763\n00:35:44,730 --> 00:35:46,190\n>> Well, one of the problems is,\n\n764\n00:35:46,190 --> 00:35:48,690\nit doesn't actually ask you a start and\na finish.\n\n765\n00:35:48,690 --> 00:35:50,830\nIt just really kinda goes\noff with the other end.\n\n766\n00:35:50,830 --> 00:35:55,870\nSo, we need to make sure that we are\nconnected to a domain controller that is,\n\n767\n00:35:55,870 --> 00:35:58,650\nor basically connected to a domain\ncontroller that's gonna be participating\n\n768\n00:35:58,650 --> 00:35:59,690\nin this trust.\n\n769\n00:35:59,690 --> 00:36:00,520\nAll right?\n\n770\n00:36:00,520 --> 00:36:03,570\nIf I want domain two\n\n771\n00:36:03,570 --> 00:36:07,660\nto trust user accounts that\nare coming from training, okay?\n\n772\n00:36:07,660 --> 00:36:10,690\nI can jump to either one of those,\nto set up that shortcut trust and\n\n773\n00:36:10,690 --> 00:36:12,090\nget it put in place.\n\n774\n00:36:12,090 --> 00:36:13,910\nAnd which way did you have your diagram?\n\n775\n00:36:13,910 --> 00:36:17,400\n>> I say we went from,\nI said domain to trust training.\n\n776\n00:36:17,400 --> 00:36:18,090\nOkay.\n\n777\n00:36:18,090 --> 00:36:19,400\nSo, I'm gonna pull up domain two.\n\n778\n00:36:19,400 --> 00:36:22,940\nNow I'll pull up his properties.\n\n779\n00:36:22,940 --> 00:36:28,330\nSo here's domain two, and I need to say,\nwe want to trust training.\n\n780\n00:36:28,330 --> 00:36:32,385\nRight?\nSo, domains trusted by this domain.\n\n781\n00:36:32,385 --> 00:36:36,145\nI want to, I'm domain two,\nand I want to trust training.\n\n782\n00:36:36,145 --> 00:36:37,295\nTraining's not on the list.\n\n783\n00:36:37,295 --> 00:36:39,030\nDoes that mean I don't trust training?\n\n784\n00:36:39,030 --> 00:36:39,808\nNo.\n\n785\n00:36:39,808 --> 00:36:41,919\n>> That's still through\nthe other transitive trust.\n\n786\n00:36:41,919 --> 00:36:44,438\nWe could still get there, but\nwe wanna speed up that process.\n\n787\n00:36:44,438 --> 00:36:45,725\n>> That's right.\n\n788\n00:36:45,725 --> 00:36:46,735\nSo, right now, we don't know that.\n\n789\n00:36:46,735 --> 00:36:48,995\nWe would go through\ndomain one to get there.\n\n790\n00:36:48,995 --> 00:36:50,910\nWe'd go through that long,\ndrawn out process.\n\n791\n00:36:50,910 --> 00:36:54,150\nSo, we're gonna do a new trust,\nall right, and so\n\n792\n00:36:54,150 --> 00:36:56,550\nhere we go jumping into our Trust Wizard.\n\n793\n00:36:56,550 --> 00:36:59,290\nAnd it's asking who it is that\nwe're gonna be trusting, right?\n\n794\n00:36:59,290 --> 00:37:01,430\nSo, type the name of the domain.\n\n795\n00:37:01,430 --> 00:37:06,995\nSo it's gonna be,\ntraining.domain1.itpro.tv.\n\n796\n00:37:06,995 --> 00:37:09,715\nAll right, and then it's gonna ask,\nwhat are we doing?\n\n797\n00:37:09,715 --> 00:37:14,140\nAll right, is a realm trust or\na trust with a Windows domain?\n\n798\n00:37:14,140 --> 00:37:16,305\nNow what the heck is that, right?\n\n799\n00:37:16,305 --> 00:37:20,790\nWell, remember that a lot of\nthe authentication and the underlying\n\n800\n00:37:20,790 --> 00:37:25,460\nfunction of the Active Directory is\nbuilt upon Kerberos and LDAP, right?\n\n801\n00:37:25,460 --> 00:37:28,840\nAnd a lot of that comes\nfrom the UNIX world, right?\n\n802\n00:37:28,840 --> 00:37:33,090\nKerberos or Kerberos was developed\nin the UNIX world originally, and\n\n803\n00:37:33,090 --> 00:37:35,560\nMicrosoft just changed it\na little bit to use it here.\n\n804\n00:37:35,560 --> 00:37:39,200\nSo, if we want to do a trust\nwith a UNIX environment,\n\n805\n00:37:39,200 --> 00:37:41,390\na Kerberos Version 5 realm, you can.\n\n806\n00:37:41,390 --> 00:37:42,530\nAnd that's what it's saying right here,\n\n807\n00:37:42,530 --> 00:37:44,290\ndo we wanna do a realm\ntrust with one of those?\n\n808\n00:37:44,290 --> 00:37:46,180\n>> Now something's not right\nwith our name, though.\n\n809\n00:37:46,180 --> 00:37:49,050\nCuz normally we would see,\nit should recognize that.\n\n810\n00:37:49,050 --> 00:37:49,710\nYou see up at the top,\n\n811\n00:37:49,710 --> 00:37:52,570\nthe name you specified is not\na valid Windows domain name?\n\n812\n00:37:52,570 --> 00:37:53,910\nIt's really not liking that at all.\n\n813\n00:37:53,910 --> 00:37:56,075\n>> Training, did I spell it wrong?\n\n814\n00:37:56,075 --> 00:37:58,250\n.domain1.itpro, hang on,\nlet me double check.\n\n815\n00:37:58,250 --> 00:38:01,040\n>> It might be a lag or\na delay in our DNS.\n\n816\n00:38:01,040 --> 00:38:02,924\nI know they're all using\nthe same DNS server.\n\n817\n00:38:02,924 --> 00:38:04,573\n>> Let me verify that\nit actually finished.\n\n818\n00:38:04,573 --> 00:38:09,070\n>> [LAUGH]\n>> All right, so while I'm verifying that-\n\n819\n00:38:09,070 --> 00:38:10,070\n>> And while he's doing that, so\n\n820\n00:38:10,070 --> 00:38:11,830\nwhat that was, was that screen comes up.\n\n821\n00:38:11,830 --> 00:38:14,370\nNormally what I would see there,\nis I'd see the shortcut trust options.\n\n822\n00:38:14,370 --> 00:38:16,840\nCuz it would immediately see\nthat it was a Windows domain.\n\n823\n00:38:16,840 --> 00:38:21,090\nAnd it would ask me if I wanna make\na shortcut trust or a realm trust,\n\n824\n00:38:21,090 --> 00:38:25,860\nas Don was explaining, where if we wanna\ndo something outside of our force.\n\n825\n00:38:25,860 --> 00:38:29,536\nIt could be a, I think you were saying\na Kerberos realm, like a Unix environment,\n\n826\n00:38:29,536 --> 00:38:31,370\nor something like that.\n\n827\n00:38:31,370 --> 00:38:34,275\nBut when that didn't give us\nthe option to do shortcut, I mean,\n\n828\n00:38:34,275 --> 00:38:35,568\nsomething's probably not right.\n\n829\n00:38:35,568 --> 00:38:40,020\nIt might have let us finish anyway,\nand just type in the names manually.\n\n830\n00:38:40,020 --> 00:38:41,390\nBut something it wasn't liking there.\n\n831\n00:38:42,470 --> 00:38:46,270\n>> I'm just gonna verify, we did that\npromotion and the server rebooted.\n\n832\n00:38:46,270 --> 00:38:48,600\nI never actually logged back\nin to see if it finished.\n\n833\n00:38:48,600 --> 00:38:51,720\nAnd so there is definitely\na chance that it didn't finish, so\n\n834\n00:38:51,720 --> 00:38:54,180\nI just wanna go in and\nmake sure that that is there.\n\n835\n00:38:54,180 --> 00:38:56,950\nAnd I might've done a typo or\nsomething, who knows?\n\n836\n00:38:58,220 --> 00:39:02,065\nWith me there's no limit to what\nI might've messed up on that one.\n\n837\n00:39:02,065 --> 00:39:04,940\n>> [LAUGH]\n>> So let's just get in there and see.\n\n838\n00:39:07,160 --> 00:39:07,720\nAll right.\n\n839\n00:39:07,720 --> 00:39:09,160\nSo I'm gonna double check two things.\n\n840\n00:39:09,160 --> 00:39:10,763\nFirst off, I wanna double check, not that.\n\n841\n00:39:10,763 --> 00:39:14,147\n[LAUGH] I wanna double\ncheck the computer name,\n\n842\n00:39:14,147 --> 00:39:19,830\nto make sure that it's showing that\nit is in that proper domain name.\n\n843\n00:39:19,830 --> 00:39:21,690\nAnd I'm gonna check how\nI spelled things here.\n\n844\n00:39:21,690 --> 00:39:25,970\nSo I've got training.domain1.itpro.tv.\n\n845\n00:39:25,970 --> 00:39:28,200\nSo the domain did get created.\n\n846\n00:39:28,200 --> 00:39:32,480\nAnd under domain controllers,\nI do have Training-DC1, so it is there.\n\n847\n00:39:33,620 --> 00:39:37,414\nAnd then I wanna pull up my\nsystem properties, which, there.\n\n848\n00:39:37,414 --> 00:39:43,123\nAnd so I can see that I'm\nTRAINING-DC1.training.domain1.itpro.tv.\n\n849\n00:39:43,123 --> 00:39:44,891\nAll right.\n\n850\n00:39:44,891 --> 00:39:47,065\nAnd then the last thing\nI wanna check is DNS.\n\n851\n00:39:47,065 --> 00:39:50,490\nLet me jump over to our\nhandy dandy DNS server.\n\n852\n00:39:52,440 --> 00:39:54,780\nAnd make sure that I've\ngot my records there.\n\n853\n00:39:54,780 --> 00:39:57,780\nWhen you create an active\ndirectory environment,\n\n854\n00:39:57,780 --> 00:39:59,860\nit creates a ton of DNS records.\n\n855\n00:39:59,860 --> 00:40:02,510\nWe've seen those SRV\nrecords in other episodes.\n\n856\n00:40:02,510 --> 00:40:04,690\nAnd so I'm just gonna double check and\nmake sure those are there.\n\n857\n00:40:04,690 --> 00:40:06,740\nIf they're not there, we try and\n\n858\n00:40:06,740 --> 00:40:11,120\ndo look-ups against the DNS server to find\nout about this other domain that exists.\n\n859\n00:40:11,120 --> 00:40:13,740\nAnd if we don't find the records then,\nthere's a problem.\n\n860\n00:40:13,740 --> 00:40:16,118\nIt could also just be replication, right?\n\n861\n00:40:16,118 --> 00:40:16,640\n>> Yeah.\n\n862\n00:40:16,640 --> 00:40:20,810\n>> The remaining contacts partition, or\nI'm sorry, the configuration partition\n\n863\n00:40:20,810 --> 00:40:24,120\nthat stores the information about\nthe domains that exist in our forest.\n\n864\n00:40:24,120 --> 00:40:27,560\nAnd I was trying to get into sites and\nservices, but it's being really slow.\n\n865\n00:40:27,560 --> 00:40:30,000\n>> Well, it's probably the fact\nthat I'm running, what,\n\n866\n00:40:30,000 --> 00:40:32,870\nfive domain controllers all\noff of my laptop right now.\n\n867\n00:40:32,870 --> 00:40:34,540\n>> It's a beautiful thing.\n\n868\n00:40:34,540 --> 00:40:37,430\n>> I've got a pretty decent laptop, but\n\n869\n00:40:37,430 --> 00:40:42,505\nyou eventually reach the threshold\nof what it can handle.\n\n870\n00:40:42,505 --> 00:40:43,390\n>> [LAUGH]\n>> So yeah.\n\n871\n00:40:43,390 --> 00:40:45,620\nWe'll give that just a second\nas it seems to get caught up.\n\n872\n00:40:45,620 --> 00:40:46,700\nAnd we'll find out what's going on.\n\n873\n00:40:46,700 --> 00:40:48,350\nI'll bet that this is a replication thing.\n\n874\n00:40:48,350 --> 00:40:49,010\n>> Yeah.\n\n875\n00:40:49,010 --> 00:40:52,280\n>> Mike mentioned earlier the different\nreplication partitions we have.\n\n876\n00:40:52,280 --> 00:40:55,790\nAnd so there's, the domain partition which\nwe're not so worried about right now.\n\n877\n00:40:55,790 --> 00:41:00,055\nBut the configuration partition you know,\nin the scheme of partitions.\n\n878\n00:41:00,055 --> 00:41:01,190\nWhich config is the one that we need here.\n\n879\n00:41:01,190 --> 00:41:02,280\n>> Yeah.\n>> That's the one that contains all our\n\n880\n00:41:02,280 --> 00:41:02,920\ndomain names.\n\n881\n00:41:02,920 --> 00:41:04,570\nAnd it may just not have\nreplicated it everywhere yet.\n\n882\n00:41:04,570 --> 00:41:05,310\n>> Might not have replicated it.\n\n883\n00:41:05,310 --> 00:41:08,270\nThe knowledge consistency check or\nwhich I think we've talked about in\n\n884\n00:41:08,270 --> 00:41:10,985\n4-11 as well which is what generates\nthat replications typology.\n\n885\n00:41:10,985 --> 00:41:13,340\nAnd we just added a brand\nnew domain controller.\n\n886\n00:41:13,340 --> 00:41:14,600\nA brand new domain.\n\n887\n00:41:14,600 --> 00:41:18,080\nIt's gotta run and create and\nupdate replication topology.\n\n888\n00:41:18,080 --> 00:41:19,280\nSo that everybody's replicating.\n\n889\n00:41:20,340 --> 00:41:23,400\nAnd those two, the scheme and\nthe partition forest wide so\n\n890\n00:41:23,400 --> 00:41:26,170\nthey should replicate to all domain\ncontrollers throughout our forest.\n\n891\n00:41:26,170 --> 00:41:28,320\n>> Yep, and so\nI'm just taking a quick peek here.\n\n892\n00:41:28,320 --> 00:41:32,400\nAnd under domain one.it.pro.tv and\nDNS I do have training.\n\n893\n00:41:32,400 --> 00:41:36,257\nAnd underneath it I do see the SRV\nrecords that I would expect to see.\n\n894\n00:41:36,257 --> 00:41:42,360\n>> And while we're here, I do believe we\nwere gonna talk about these at one point.\n\n895\n00:41:42,360 --> 00:41:43,636\nI'm gonna go ahead.\n\n896\n00:41:43,636 --> 00:41:48,336\n>> We can, yeah, it'd be a good\nstalling tactic to give it time,\n\n897\n00:41:48,336 --> 00:41:52,253\n[LAUGH],\n>> All right, yeah.\n\n898\n00:41:52,253 --> 00:41:53,763\n>> The SRV records are pretty important.\n\n899\n00:41:53,763 --> 00:41:56,405\n>> They really are.\nSRV records we talked about I'm sure in\n\n900\n00:41:56,405 --> 00:41:59,082\nour DNS episode,\nwe've mentioned them there.\n\n901\n00:41:59,082 --> 00:42:02,261\nWhen a machine, when a servers offering\na service to the network, the clients or\n\n902\n00:42:02,261 --> 00:42:04,503\nthe other nodes on the network\nneed to be able to find out,\n\n903\n00:42:04,503 --> 00:42:05,780\nhey who's running Kerberos?\n\n904\n00:42:05,780 --> 00:42:07,340\nI wanna log on.\n\n905\n00:42:07,340 --> 00:42:09,160\nWhere's my Kerberos server?\n\n906\n00:42:09,160 --> 00:42:11,030\nI need to browse the forest.\n\n907\n00:42:11,030 --> 00:42:13,990\nWhich one of you guys is running\nas a global catalog server?\n\n908\n00:42:13,990 --> 00:42:18,520\nSo when you install a service like this\non a machine, it registers records.\n\n909\n00:42:18,520 --> 00:42:20,720\nIt still registers its normal a record,\nright?\n\n910\n00:42:20,720 --> 00:42:22,880\nFor, so we can find it by IP address.\n\n911\n00:42:22,880 --> 00:42:27,290\nBut then, it also registered SRV records,\nor service locator records.\n\n912\n00:42:27,290 --> 00:42:28,740\nAnd they follow a particular format.\n\n913\n00:42:28,740 --> 00:42:30,830\nIt's going to be underscore.\n\n914\n00:42:30,830 --> 00:42:31,850\nProtocol.\n\n915\n00:42:31,850 --> 00:42:33,440\nUnderscore.\n\n916\n00:42:33,440 --> 00:42:34,810\nServices being offered.\n\n917\n00:42:34,810 --> 00:42:35,350\nAnd then the name.\n\n918\n00:42:35,350 --> 00:42:37,910\nAnd you've got a port and\na wait option in there as well.\n\n919\n00:42:37,910 --> 00:42:41,010\nIf you've got more than one, you can do\na little bit of load balancing with them.\n\n920\n00:42:41,010 --> 00:42:43,060\nSo it's important that they get created.\n\n921\n00:42:43,060 --> 00:42:46,720\nAnd if they don't, there's actually\na file on our, if you ever get to,\n\n922\n00:42:46,720 --> 00:42:49,880\ncuz I've seen this happen with domain\ncontrollers where you set one up and\n\n923\n00:42:49,880 --> 00:42:52,280\nit doesn't create the records\nthat it's supposed to.\n\n924\n00:42:52,280 --> 00:43:00,008\nThere is a file that the server maintains\ncalled netlogon.dns oh, that went on.\n\n925\n00:43:00,008 --> 00:43:00,940\n>> [LAUGH]\n>> Net logon.dns like wait,\n\n926\n00:43:00,940 --> 00:43:02,460\ncan I remember what that's called?\n\n927\n00:43:02,460 --> 00:43:07,850\nAnd it's located down in like\nc:Windows\\system32\\config if\n\n928\n00:43:07,850 --> 00:43:09,360\nI'm not mistaken.\n\n929\n00:43:09,360 --> 00:43:10,842\n>> You said it's called what?\n\n930\n00:43:10,842 --> 00:43:12,115\nNetlogon.dns?\n\n931\n00:43:12,115 --> 00:43:14,280\n>> Netlogon.dns\n>> You know.\n\n932\n00:43:16,050 --> 00:43:17,130\n>> See if you can find it.\n\n933\n00:43:17,130 --> 00:43:19,070\n>> System32.\n\n934\n00:43:19,070 --> 00:43:20,240\n>> Whoops.\n\n935\n00:43:20,240 --> 00:43:21,620\n>> System32.\n\n936\n00:43:21,620 --> 00:43:24,480\nI think it's underneath there.\n\n937\n00:43:24,480 --> 00:43:27,507\nYou're going to be in a folder called fig.\n\n938\n00:43:27,507 --> 00:43:30,410\nAnd in there.\n\n939\n00:43:30,410 --> 00:43:31,710\nNet logon.DNS.\n\n940\n00:43:31,710 --> 00:43:36,150\nSo that file right there, should show\nall of the different services that\n\n941\n00:43:36,150 --> 00:43:38,720\nthis computer thinks it's\nsupposed to register.\n\n942\n00:43:38,720 --> 00:43:41,450\nSo if that file, oh you've got to\nrun your command prompt as an admin.\n\n943\n00:43:41,450 --> 00:43:42,200\n>> Take on me, Mike.\n\n944\n00:43:42,200 --> 00:43:44,572\n[LAUGH]\n>> Or your Notepad as an admin.\n\n945\n00:43:44,572 --> 00:43:45,343\n[LAUGH]\n>> [CROSSTALK]\n\n946\n00:43:45,343 --> 00:43:45,982\n>> So in there,\n\n947\n00:43:45,982 --> 00:43:48,260\nwe're gonna find\nthe different SRV records.\n\n948\n00:43:48,260 --> 00:43:50,330\nIt really is pretty cool to look at,\n\n949\n00:43:50,330 --> 00:43:52,550\ncuz you'll see everything that\nserver's supposed to register.\n\n950\n00:43:52,550 --> 00:43:55,610\nIf something was missing from there,\nthat's gonna be a problem.\n\n951\n00:43:55,610 --> 00:43:59,270\nIf all the records were there, but\nit just didn't register them with DNS.\n\n952\n00:43:59,270 --> 00:44:02,800\nYou can do a net stop netlogon,\nand a net start netlogon, and\n\n953\n00:44:02,800 --> 00:44:04,078\nthat kicks that service in, and\n\n954\n00:44:04,078 --> 00:44:08,350\ncauses it to, it's supposed to register\nthose every time it starts up.\n\n955\n00:44:08,350 --> 00:44:09,420\n>> Normally, I would do this.\n\n956\n00:44:09,420 --> 00:44:13,010\nI used to do this when I would teach\nthe official Microsoft classes,\n\n957\n00:44:13,010 --> 00:44:17,410\nis I'd go into DNS and I would delete\nall my _msdcs and all that stuff.\n\n958\n00:44:17,410 --> 00:44:18,140\nI'd delete them.\n\n959\n00:44:18,140 --> 00:44:22,450\nAnd then it's going to reset the net\nlogon service pop up back up again.\n\n960\n00:44:22,450 --> 00:44:25,445\nI'd do it right now, except I'm\nwaiting on replication to happen.\n\n961\n00:44:25,445 --> 00:44:29,030\n[LAUGH] So, but here's that list.\n\n962\n00:44:29,030 --> 00:44:30,312\nIt just lays them out.\n\n963\n00:44:30,312 --> 00:44:31,950\nAnd see, it's corrected for that domain.\n\n964\n00:44:31,950 --> 00:44:33,850\nSo I'm on one of the domain sources.\n\n965\n00:44:33,850 --> 00:44:36,010\nI can see one of\nthe domain one of ITProTV.\n\n966\n00:44:36,010 --> 00:44:37,240\nSo you can see that information.\n\n967\n00:44:37,240 --> 00:44:38,100\nIt's kinda cool stuff.\n\n968\n00:44:38,100 --> 00:44:39,681\n>> Mm-hm.\nAnd another thing to note is about those\n\n969\n00:44:39,681 --> 00:44:41,480\nagain, I'm pretty sure\nwe covered this in 411.\n\n970\n00:44:41,480 --> 00:44:44,240\nWe're talk DNS, but just in case.\n\n971\n00:44:44,240 --> 00:44:48,830\nThose SRV records, like an alias,\nthey do not point back to an IP address.\n\n972\n00:44:48,830 --> 00:44:52,550\nAnd an SRV record points back to an FQDN,\na fully qualified domain name.\n\n973\n00:44:52,550 --> 00:44:57,250\nThen you take that name and you look\nup the a record to get the IP address.\n\n974\n00:44:57,250 --> 00:44:59,660\nIt'll register more than one,\nif we have sites set up,\n\n975\n00:44:59,660 --> 00:45:02,100\nwhich is something we're\ngoing to talk about later.\n\n976\n00:45:02,100 --> 00:45:05,240\nThe servers will register more than\none copy of those SRV records.\n\n977\n00:45:05,240 --> 00:45:09,150\nThey'll register one generic record\nthat says, hey, I'm a Kerberos server.\n\n978\n00:45:09,150 --> 00:45:11,100\nAnd then,\nthey'll register it again saying,\n\n979\n00:45:11,100 --> 00:45:15,250\nhey, I'm running Kerberos in the\nGainesville site or something like that.\n\n980\n00:45:15,250 --> 00:45:17,780\nSo if a client's looking for\na service, but\n\n981\n00:45:17,780 --> 00:45:21,240\nhe wants to find one in a particular site,\nhe can still do that.\n\n982\n00:45:22,260 --> 00:45:24,910\n>> All right, so let's see,\nI think we probably stalled long enough.\n\n983\n00:45:24,910 --> 00:45:28,790\nLet's, let's go in here and see if we\ncan't create that trust this time.\n\n984\n00:45:28,790 --> 00:45:32,570\nAll right, so I'm going to go back in\nhere, we'll create a new trust again.\n\n985\n00:45:32,570 --> 00:45:38,040\nAnd this time, when it asks for\nthe DNS or Net BIOS name,\n\n986\n00:45:38,040 --> 00:45:47,020\nI'm gonna put in here,\nit was training.domain1.itpro.tv.\n\n987\n00:45:47,020 --> 00:45:47,860\nThere we go.\n\n988\n00:45:47,860 --> 00:45:48,740\n>> That's looking better.\n\n989\n00:45:48,740 --> 00:45:50,810\n>> All right, so\nwe do get a slightly different screen now.\n\n990\n00:45:50,810 --> 00:45:51,570\nIt is seeing it.\n\n991\n00:45:51,570 --> 00:45:53,160\nAnd we didn't change anything.\n\n992\n00:45:53,160 --> 00:45:54,680\nWe just waited.\n\n993\n00:45:54,680 --> 00:45:56,666\n>> Sometimes you know,\n\n994\n00:45:56,666 --> 00:45:58,721\non live TV [CROSSTALK]\n>> So,\n\n995\n00:45:58,721 --> 00:46:01,052\nyou'll see where I can create\nseveral different trusts here.\n\n996\n00:46:01,052 --> 00:46:03,960\nNow, it's not really saying shortcut,\nis it?\n\n997\n00:46:03,960 --> 00:46:06,250\n>> Yeah,\nit doesn't call it a shortcut that's-\n\n998\n00:46:06,250 --> 00:46:07,620\n>> But that's what it is, right?\n\n999\n00:46:07,620 --> 00:46:11,380\nIt's saying do you wanna create a two way\ntrust, one way incoming, one way outgoing.\n\n1000\n00:46:11,380 --> 00:46:13,910\nThese are all different\ntypes of shortcuts.\n\n1001\n00:46:13,910 --> 00:46:16,270\nDo I wanna create a two way shortcut?\n\n1002\n00:46:16,270 --> 00:46:17,380\nA one way short cut?\n\n1003\n00:46:17,380 --> 00:46:19,190\nOne way in and one way out.\n\n1004\n00:46:19,190 --> 00:46:20,810\nSo based on our needs.\n\n1005\n00:46:20,810 --> 00:46:25,180\nNow, Mike, you said we were gonna make it\nwhere domain two trusted training, right?\n\n1006\n00:46:25,180 --> 00:46:26,910\n>> Correct.\nSo this would be an outgoing.\n\n1007\n00:46:26,910 --> 00:46:29,090\nWe wanna trust training.\n\n1008\n00:46:29,090 --> 00:46:30,130\n>> Yes, yep.\n\n1009\n00:46:30,130 --> 00:46:35,120\nSo if somebody in training tries to\naccess a resource in domain two.\n\n1010\n00:46:35,120 --> 00:46:36,590\nWell, we'll allow them.\n\n1011\n00:46:36,590 --> 00:46:39,270\nAnd if we need to do a lookup,\nwe can follow the shortcut,\n\n1012\n00:46:39,270 --> 00:46:42,460\njump right over their DC and\nvalidate their token if we need to\n\n1013\n00:46:42,460 --> 00:46:44,755\nwithout having to get domain\none involved in the mix.\n\n1014\n00:46:44,755 --> 00:46:46,720\n>> Right.\nAnd because we're only doing one\n\n1015\n00:46:46,720 --> 00:46:50,190\nside of it, we just need our credentials\nin domain two, is where we are, right?\n\n1016\n00:46:50,190 --> 00:46:52,000\nIf you were going to do a two way,\n\n1017\n00:46:52,000 --> 00:46:53,630\nyou would need credentials\nin both domains, right?\n\n1018\n00:46:53,630 --> 00:46:58,600\nI can't just assume, I can't say, oh yeah,\nI'm going to make them trust me, right?\n\n1019\n00:46:58,600 --> 00:47:01,480\nThat wouldn't, that wouldn't be right.\n\n1020\n00:47:01,480 --> 00:47:02,460\n>> I'm gonna hit Next on it.\n\n1021\n00:47:02,460 --> 00:47:03,680\nHere are the sides of the trust.\n\n1022\n00:47:03,680 --> 00:47:06,770\nAre we creating for this domain only,\nor both sides of the domain?\n\n1023\n00:47:06,770 --> 00:47:08,300\nWe're just doing this domain.\n\n1024\n00:47:08,300 --> 00:47:11,420\nActually, no,\nwe need to do both sides, don't we?\n\n1025\n00:47:11,420 --> 00:47:13,190\nBasically, we're trusting them, and\n\n1026\n00:47:13,190 --> 00:47:16,760\non their end they need to say that,\nit's okay.\n\n1027\n00:47:16,760 --> 00:47:19,385\n>> I know it seems weird, but\nit's okay for them to trust us.\n\n1028\n00:47:19,385 --> 00:47:21,460\n[LAUGH]\n>> Now the reason we get this option right\n\n1029\n00:47:21,460 --> 00:47:24,000\nhere is, we might not have\ncontrol of that other domain.\n\n1030\n00:47:24,000 --> 00:47:28,040\nSo you might be the IT guy setting up this\nside of the domain, and then you've gotta\n\n1031\n00:47:28,040 --> 00:47:31,340\ncall somebody on the other end,\nand have them set up their side.\n\n1032\n00:47:31,340 --> 00:47:34,970\nAnd so on your side,\nit's a one way outgoing.\n\n1033\n00:47:34,970 --> 00:47:37,780\nOn their side, it's a one way incoming.\n\n1034\n00:47:37,780 --> 00:47:38,718\nAnd they'll need to\ncomplete that other side.\n\n1035\n00:47:38,718 --> 00:47:41,441\nNow if you're an enterprise admin,\nyou can do both sides, right?\n\n1036\n00:47:41,441 --> 00:47:45,463\nBut if you're not an enterprise admin,\nyou can likely only do your side.\n\n1037\n00:47:45,463 --> 00:47:46,317\nThis domain only.\n\n1038\n00:47:46,317 --> 00:47:48,003\nAm I in enterprise?\n\n1039\n00:47:48,003 --> 00:47:48,734\nI'm in enterprise.\n\n1040\n00:47:48,734 --> 00:47:49,242\n>> You are, yep.\n\n1041\n00:47:49,242 --> 00:47:51,040\n>> So I'll go ahead and do both sides.\n\n1042\n00:47:52,400 --> 00:47:54,440\nAnd so it's gonna ask for that user name.\n\n1043\n00:47:54,440 --> 00:47:59,080\nAnd actually I have my UPN, don't I?\n\n1044\n00:47:59,080 --> 00:48:00,290\n>> You do.\n\n1045\n00:48:00,290 --> 00:48:01,322\n>> So I can punch in my UPN.\n\n1046\n00:48:01,322 --> 00:48:01,831\nNow.\n>> It sucks that we have to\n\n1047\n00:48:01,831 --> 00:48:02,660\nenter all of them, yeah.\n\n1048\n00:48:02,660 --> 00:48:08,205\n>> I could put domain1/D Pezet or\nD Pezet at domain1.itpro dot tv but\n\n1049\n00:48:08,205 --> 00:48:12,310\nin the last episode we\ncreated a UPN of itpro.tv.\n\n1050\n00:48:12,310 --> 00:48:12,810\n>> That's right.\n\n1051\n00:48:12,810 --> 00:48:16,920\n>> So I can put in that generic name,\nwe'll see if that works.\n\n1052\n00:48:16,920 --> 00:48:21,060\n[LAUGH] So we'll punch that one in and\nit should find me which it did not.\n\n1053\n00:48:21,060 --> 00:48:22,680\nAccess denied.\n\n1054\n00:48:22,680 --> 00:48:24,460\n>> Oh and\nGod forbid they let me hit Finish.\n\n1055\n00:48:24,460 --> 00:48:26,120\n>> Oh yeah.\n>> I might like try it again.\n\n1056\n00:48:26,120 --> 00:48:26,930\nAll right.\n\n1057\n00:48:26,930 --> 00:48:30,030\n>> You're gonna have to do it all again.\n\n1058\n00:48:30,030 --> 00:48:35,710\nLet's go ahead and punch that in, so\nthat was training.domain1.itpro.tv.\n\n1059\n00:48:35,710 --> 00:48:40,275\nAnd we are doing a-\n>> A one way outgoing.\n\n1060\n00:48:40,275 --> 00:48:44,615\n>> Outgoing and\nwe want to create both sides and\n\n1061\n00:48:44,615 --> 00:48:49,909\nthere we go,\ndomain1/dpezet that should be good.\n\n1062\n00:48:49,909 --> 00:48:56,711\nThere we go, all right,\ndomain1/dpezet, that should be good.\n\n1063\n00:48:56,711 --> 00:48:59,874\nAnd there we go, yep so\nit wasn't able to find my account and\n\n1064\n00:48:59,874 --> 00:49:03,419\nagain that may not have replicated out or\nwe never did add that UPN to\n\n1065\n00:49:03,419 --> 00:49:06,420\nthe other domain so\nthat's more than likely the issue.\n\n1066\n00:49:06,420 --> 00:49:08,220\nAll right so there we go.\n\n1067\n00:49:08,220 --> 00:49:10,212\nIt's giving us the option to confirm it,\nright?\n\n1068\n00:49:10,212 --> 00:49:13,600\nWhich it just runs a quick little\ntest to verify that it's working.\n\n1069\n00:49:13,600 --> 00:49:14,770\nI'll go ahead and say to confirm it.\n\n1070\n00:49:15,800 --> 00:49:16,430\nAnd there we go.\n\n1071\n00:49:16,430 --> 00:49:18,180\nTrust relationship was\nsuccessfully confirmed.\n\n1072\n00:49:19,320 --> 00:49:20,370\n>> I like it.\n\n1073\n00:49:20,370 --> 00:49:21,030\n>> All right.\n\n1074\n00:49:21,030 --> 00:49:23,950\nNow notice at no point in that\nwizard did it say shortcut, did it?\n\n1075\n00:49:23,950 --> 00:49:24,500\n>> Right.\n\n1076\n00:49:24,500 --> 00:49:25,882\n>> But\nnow that it's done what does it say?\n\n1077\n00:49:25,882 --> 00:49:26,813\n>> Shortcut drive.\n\n1078\n00:49:26,813 --> 00:49:29,050\nThat's Microsoft for you.\n\n1079\n00:49:29,050 --> 00:49:35,790\n>> So, there is now a shortcut in\nbetween domain 2 and training.\n\n1080\n00:49:35,790 --> 00:49:40,625\nIf I pull up domain 1, and I pull up\nits properties and I go into its trust.\n\n1081\n00:49:40,625 --> 00:49:43,405\nNotice there's no\nshortcuts in the list here.\n\n1082\n00:49:43,405 --> 00:49:44,265\nRight?\n\n1083\n00:49:44,265 --> 00:49:48,925\nAnd if I go and pull up Training, I'll see\nthat shortcut on the other side, right.\n\n1084\n00:49:48,925 --> 00:49:50,635\nHere's that connection to the parent.\n\n1085\n00:49:50,635 --> 00:49:52,005\nHere's that shortcut we created.\n\n1086\n00:49:52,005 --> 00:49:54,060\n>> Yeah, that's what it looks\nlike when it's an incoming trust.\n\n1087\n00:49:54,060 --> 00:49:57,110\nRight, cuz now that arrow is\ncoming down too, Training.\n\n1088\n00:49:58,720 --> 00:50:00,010\n>> Yep, now that trust is in place.\n\n1089\n00:50:00,010 --> 00:50:04,850\nNow when a user from training goes to\naccess a resource in domain 2, domain 2\n\n1090\n00:50:04,850 --> 00:50:08,370\nwill know that it can jump right over to\ntraining to authenticate that user, and\n\n1091\n00:50:08,370 --> 00:50:09,370\nnot bother domain 1.\n\n1092\n00:50:09,370 --> 00:50:10,320\n>> Exactly.\n>> All right.\n\n1093\n00:50:10,320 --> 00:50:13,610\n>> You guys can kinda see where this is\nnot so practical in the real world where\n\n1094\n00:50:13,610 --> 00:50:15,680\nmost of the time you're gonna\nhave one domain, right?\n\n1095\n00:50:15,680 --> 00:50:17,390\nOne domain, this doesn't matter, right?\n\n1096\n00:50:17,390 --> 00:50:21,290\nBut in a multi-domain environment it can\nbe important if you have frequent access,\n\n1097\n00:50:21,290 --> 00:50:23,288\nshortcuts like this can\nreally save you some time.\n\n1098\n00:50:23,288 --> 00:50:24,797\n>> Yes, they can.\n\n1099\n00:50:24,797 --> 00:50:29,490\n>> Now those are all trusts\ninside of our forest.\n\n1100\n00:50:29,490 --> 00:50:30,550\n>> Right.\n>> Right.\n\n1101\n00:50:30,550 --> 00:50:32,110\nLet's talk about other forests.\n\n1102\n00:50:33,120 --> 00:50:35,590\nSo Mike, you've got-\n>> Cross some boundaries there, yeah.\n\n1103\n00:50:35,590 --> 00:50:39,430\nSo if you're just a single domain,\nsingle forest, you don't need these.\n\n1104\n00:50:39,430 --> 00:50:43,850\nBut if you've got a scenario where either\nyou're running a second forest and\n\n1105\n00:50:43,850 --> 00:50:47,590\nwe haven't really talked about why\nwe'd want to go to another forest yet.\n\n1106\n00:50:47,590 --> 00:50:48,970\nI guess we can come up to that next.\n\n1107\n00:50:48,970 --> 00:50:53,590\nBut there's gonna be times when I might\nwant to extend the trust beyond my\n\n1108\n00:50:53,590 --> 00:50:54,860\nforest boundaries.\n\n1109\n00:50:54,860 --> 00:50:56,730\nIt could be a business partner.\n\n1110\n00:50:56,730 --> 00:50:58,430\nMaybe we've run Web applications and\n\n1111\n00:50:58,430 --> 00:51:01,680\ntheir users are trying to access\nthis Web app that we're running.\n\n1112\n00:51:01,680 --> 00:51:03,740\nAnd I don't want them to have\nto use a separate username and\n\n1113\n00:51:03,740 --> 00:51:07,130\npassword every time they come over,\nthey can just do their single sign on.\n\n1114\n00:51:07,130 --> 00:51:11,170\nIt could be an external Kerberos realm,\nwhere it's not a Windows environment.\n\n1115\n00:51:11,170 --> 00:51:11,900\nOr something like that.\n\n1116\n00:51:11,900 --> 00:51:14,480\nSo we can set up these external trusts.\n\n1117\n00:51:14,480 --> 00:51:16,720\nAnd they are going to be,\nthey are not automatic.\n\n1118\n00:51:16,720 --> 00:51:19,060\nWe're going to have to\ncreate them manually.\n\n1119\n00:51:19,060 --> 00:51:20,900\nThey are mostly one way objects.\n\n1120\n00:51:20,900 --> 00:51:24,940\nYou can create one in each direction\nif you need that functionality.\n\n1121\n00:51:24,940 --> 00:51:29,450\nAnd they're transitive,\nbut sort of, all right?\n\n1122\n00:51:29,450 --> 00:51:31,400\nWhen we set up, if I was gonna set up a,\n\n1123\n00:51:31,400 --> 00:51:34,430\nwell let's just talk about setting\nup a forest root in general.\n\n1124\n00:51:34,430 --> 00:51:38,930\nFirst of all, the forest roots\nare going to be created between the,\n\n1125\n00:51:38,930 --> 00:51:43,760\nor the forest trusts will be created\nbetween the forest roots, all right?\n\n1126\n00:51:43,760 --> 00:51:48,620\nSo in this case, remember the forest root\nwas gonna be the first domain that was\n\n1127\n00:51:48,620 --> 00:51:53,510\ncreated within that forest and\nbecause we used green for that guy.\n\n1128\n00:51:53,510 --> 00:51:55,610\nSo this would be my forest\nroot over here in domain 1.\n\n1129\n00:51:55,610 --> 00:51:57,440\nHere's my forest root in domain 3 and\n\n1130\n00:51:57,440 --> 00:52:00,000\nwe're gonna establish\nthat trust between them.\n\n1131\n00:52:00,000 --> 00:52:05,520\nIt's transitive to all the domains\nwithin the forest that trust each other.\n\n1132\n00:52:05,520 --> 00:52:09,950\nIn other words, I'm not gonna set up\nanother forest trust between domain 3 and\n\n1133\n00:52:09,950 --> 00:52:12,670\ndomain 2, and domain 3 and training.\n\n1134\n00:52:12,670 --> 00:52:17,100\nAll the domains in the forest\ndomain 1 can go across that forest\n\n1135\n00:52:17,100 --> 00:52:19,370\ntrust over there in domain 3.\n\n1136\n00:52:19,370 --> 00:52:23,950\nIf there was a third forest up here and\nwe had a.\n\n1137\n00:52:25,580 --> 00:52:28,600\n>> Like a domain floor out on\na separate forest somewhere.\n\n1138\n00:52:28,600 --> 00:52:31,710\n>> Yeah, let me see if I can try\nto get that up real quick here.\n\n1139\n00:52:31,710 --> 00:52:34,670\nSo we've got a,\nwell let's drag that guy out there,\n\n1140\n00:52:34,670 --> 00:52:36,380\nMike, instead of trying to click and drag.\n\n1141\n00:52:36,380 --> 00:52:40,539\nVisio is not, I'm learning.\n\n1142\n00:52:40,539 --> 00:52:44,870\nAnd I gotta move him to the front,\nrun him through the back so\n\n1143\n00:52:44,870 --> 00:52:45,730\nwe can get rid of that arrow.\n\n1144\n00:52:45,730 --> 00:52:47,360\nSo here's another-\n>> While he's drawing that,\n\n1145\n00:52:47,360 --> 00:52:50,820\nif any of you are old school\nWindows users or NT users,\n\n1146\n00:52:50,820 --> 00:52:51,870\nyou might be saying, wait a minute.\n\n1147\n00:52:51,870 --> 00:52:54,600\nMike, you can create individual trust,\nright?\n\n1148\n00:52:54,600 --> 00:52:58,290\nAnd what's going on is\nthat used to be the case.\n\n1149\n00:52:58,290 --> 00:53:01,910\nIt used to be that if you wanted to\ntrust somebody in a separate forest,\n\n1150\n00:53:01,910 --> 00:53:05,860\nthe only way you could do it\nwas individual domain trusts.\n\n1151\n00:53:05,860 --> 00:53:09,726\nSo Mike drew that domain\n1 to domain 3 trust and\n\n1152\n00:53:09,726 --> 00:53:13,820\nin the old way they were\none way non-transitive.\n\n1153\n00:53:13,820 --> 00:53:16,960\nIf you wanted all three of the domains\non the left to trust domain 3\n\n1154\n00:53:16,960 --> 00:53:19,690\nyou would have to create\nthree trusts to domain 3.\n\n1155\n00:53:19,690 --> 00:53:20,820\n>> See I did not know that.\n\n1156\n00:53:20,820 --> 00:53:21,540\n>> That's how it used to be.\n\n1157\n00:53:21,540 --> 00:53:22,980\nWindows 2000, Windows 2003.\n\n1158\n00:53:22,980 --> 00:53:26,980\nWhat Microsoft found was that If\nanybody bothered to set up the trust,\n\n1159\n00:53:26,980 --> 00:53:28,815\nthey did set them up for all the domains.\n\n1160\n00:53:28,815 --> 00:53:30,290\n>> Mm-hm.\n>> And so in 2008,\n\n1161\n00:53:30,290 --> 00:53:33,710\nwe got the forest trust, and\nthe forest trust is really awesome.\n\n1162\n00:53:33,710 --> 00:53:37,760\nBecause it can be transitive, but\n\n1163\n00:53:37,760 --> 00:53:39,835\nwithin the forest like Microsoft,\nhe is about to show you that.\n\n1164\n00:53:39,835 --> 00:53:42,830\n>> Mm-hm.\n>> But it also supports all the domains.\n\n1165\n00:53:42,830 --> 00:53:45,420\nSo in his drawing,\nwhat he's done there is all the domains,\n\n1166\n00:53:45,420 --> 00:53:50,220\ndomain 1, domain 2, Training,\nthey all trust domain 3 and vice versa.\n\n1167\n00:53:50,220 --> 00:53:52,090\nDomain 3 trust all three of them.\n\n1168\n00:53:52,090 --> 00:53:53,630\nAnd that's how you're gonna use it.\n\n1169\n00:53:53,630 --> 00:53:55,210\nYou can still do the old way.\n\n1170\n00:53:55,210 --> 00:53:58,540\nYou can still create one way\nnon-transitive trust between a single\n\n1171\n00:53:58,540 --> 00:54:01,180\ndomain and the external domain,\nbut nobody ever does that.\n\n1172\n00:54:01,180 --> 00:54:02,900\nThere's not a lot of call for it.\n\n1173\n00:54:02,900 --> 00:54:04,330\nYou may have some reason for doing it.\n\n1174\n00:54:04,330 --> 00:54:09,190\nMaybe the US domain is bringing\nin external contractor,\n\n1175\n00:54:09,190 --> 00:54:10,470\nbut the European domain isn't.\n\n1176\n00:54:10,470 --> 00:54:11,050\nAnd so, you know,\n\n1177\n00:54:11,050 --> 00:54:14,070\nyou don't want that trust to be transitive\nover across your entire forest.\n\n1178\n00:54:14,070 --> 00:54:15,340\nYou still have that functionality.\n\n1179\n00:54:15,340 --> 00:54:18,100\nBut what you're gonna see on\nthe exam are gonna be forest trusts\n\n1180\n00:54:18,100 --> 00:54:19,570\nlike Mike has drawn.\n\n1181\n00:54:19,570 --> 00:54:21,580\n>> And then you go back to\nthat transitivity thing so\n\n1182\n00:54:21,580 --> 00:54:25,340\nnow I've got domain 3 and let's just\ncall this one domain 4 over here.\n\n1183\n00:54:25,340 --> 00:54:26,870\nThis third forest.\n\n1184\n00:54:26,870 --> 00:54:31,360\nSo transitive to all these domains within\ndomain 1 between domain 1 and domain 3.\n\n1185\n00:54:31,360 --> 00:54:37,360\nBut users in domain 1 forest could not go\nacross both of these forest trusts and\n\n1186\n00:54:37,360 --> 00:54:38,500\naccess down here.\n\n1187\n00:54:38,500 --> 00:54:39,110\nAll right.\n\n1188\n00:54:39,110 --> 00:54:44,050\nSo it's not transitive between forests,\nwe won't assume that just\n\n1189\n00:54:44,050 --> 00:54:49,110\nbecause this forest trusts the other\none that it extends to another party.\n\n1190\n00:54:49,110 --> 00:54:53,240\nSo that's our forest trust and\nthe same wizard we're going to\n\n1191\n00:54:53,240 --> 00:54:58,090\nuse to create this guy, when you have\nan authentication option to choose.\n\n1192\n00:54:58,090 --> 00:55:02,740\nWhen we set up these forced trusts,\nwe've then got to decide if we want to do\n\n1193\n00:55:02,740 --> 00:55:05,420\nwhat's called a forced\nwide authentication.\n\n1194\n00:55:05,420 --> 00:55:08,280\nOr a selective authentication.\n\n1195\n00:55:08,280 --> 00:55:13,540\nAnd forced wide authentication is\nprobably not used much anymore.\n\n1196\n00:55:13,540 --> 00:55:16,890\nThe thing about forest wide that\nmeans that you're saying that\n\n1197\n00:55:16,890 --> 00:55:20,120\nall the authenticated users\nfrom that other forest\n\n1198\n00:55:20,120 --> 00:55:23,210\ncan now be trusted within my forest.\n\n1199\n00:55:23,210 --> 00:55:27,430\nYou're basically adding all their\nusers to your authenticated users.\n\n1200\n00:55:27,430 --> 00:55:30,225\nThere's some places I've used that\nauthenticated users group and\n\n1201\n00:55:30,225 --> 00:55:33,721\nwhen I used it, I was not thinking about\nthose people from that other organization.\n\n1202\n00:55:33,721 --> 00:55:36,526\nSo usually that's a little too extreme for\nmost people,\n\n1203\n00:55:36,526 --> 00:55:39,694\nthere might be some environments\nwhere you're okay with that.\n\n1204\n00:55:39,694 --> 00:55:43,006\nThe other option is gonna be\nSelective authentication.\n\n1205\n00:55:43,006 --> 00:55:45,424\nWhere now I can set up my forest trust.\n\n1206\n00:55:45,424 --> 00:55:48,120\nSo we trust each other.\n\n1207\n00:55:48,120 --> 00:55:51,820\nBut I get to go to the servers that I'm\ngonna let you authenticate to, all right?\n\n1208\n00:55:51,820 --> 00:55:55,200\nI have to specify each server that\nyou're allowed to authenticate on,\n\n1209\n00:55:55,200 --> 00:55:57,440\nas well as give you\npermissions over the resource.\n\n1210\n00:55:57,440 --> 00:56:01,190\nSo a lot more control over what they're\nallowed to access when they come\n\n1211\n00:56:01,190 --> 00:56:03,510\nacross that forest trust.\n\n1212\n00:56:03,510 --> 00:56:05,480\nYou can pick that when\nyou create that trust.\n\n1213\n00:56:05,480 --> 00:56:07,010\nYou can also change it after the fact.\n\n1214\n00:56:07,010 --> 00:56:09,335\nIf you started with forest wide\nauthentication and go wow,\n\n1215\n00:56:09,335 --> 00:56:10,319\nthat was a mistake.\n\n1216\n00:56:10,319 --> 00:56:13,130\nI can definitely switch it back\nto selective authentication.\n\n1217\n00:56:13,130 --> 00:56:14,130\n>> Yep.\n\n1218\n00:56:14,130 --> 00:56:15,110\nAll right, well, let's do this.\n\n1219\n00:56:15,110 --> 00:56:16,460\nLet's stop here and take a break.\n\n1220\n00:56:16,460 --> 00:56:17,390\nAnd when we get back,\n\n1221\n00:56:17,390 --> 00:56:20,370\nwe've got that domain three sitting\nout in another forest right now.\n\n1222\n00:56:20,370 --> 00:56:23,730\nAnd when we get back, we're gonna build\nthat forest trust between them and\n\n1223\n00:56:23,730 --> 00:56:25,000\nkinda build that connection.\n\n1224\n00:56:25,000 --> 00:56:26,900\nSo, we'll get a chance to\nsee that kind of trust and\n\n1225\n00:56:26,900 --> 00:56:28,530\nwe'll do the selective\nauthentication on it.\n\n1226\n00:56:28,530 --> 00:56:29,860\nSo we'll get a chance to see that too.\n\n1227\n00:56:29,860 --> 00:56:32,378\nSo stay tuned, we'll be back in a few.\n\n1228\n00:56:32,378 --> 00:56:39,320\n[MUSIC]\n\n1229\n00:56:39,320 --> 00:56:41,759\n[SOUND] All right,\nwelcome back, everybody.\n\n1230\n00:56:41,759 --> 00:56:47,240\nSo in the last segment, we took a stab\nat shortcut trust within a forest.\n\n1231\n00:56:47,240 --> 00:56:49,990\nNow, we're going to jump\nthe boundary between forests.\n\n1232\n00:56:49,990 --> 00:56:51,980\nAnd you'll see,\nit's actually pretty similar, right?\n\n1233\n00:56:51,980 --> 00:56:52,630\n>> Yeah, it is.\n\n1234\n00:56:52,630 --> 00:56:55,280\n>> But there is just a couple extra\nlittle features that we'll see.\n\n1235\n00:56:55,280 --> 00:56:58,120\nWe've got domain one is our forest root.\n\n1236\n00:56:58,120 --> 00:57:01,140\nAnd we've got domain three that's\nsitting out there in another forest and\n\n1237\n00:57:01,140 --> 00:57:03,970\nwe're going to go ahead and\nbuild a forest trust there, okay?\n\n1238\n00:57:03,970 --> 00:57:07,792\n>> So those forest trusts, they're gonna\nbe built between the forest roots.\n\n1239\n00:57:07,792 --> 00:57:11,230\nWhich I remember,\nyour forest root is your first domain.\n\n1240\n00:57:11,230 --> 00:57:12,250\nThey got created in that forest.\n\n1241\n00:57:12,250 --> 00:57:13,960\nYou're gonna establish that there.\n\n1242\n00:57:13,960 --> 00:57:15,090\nSame option as you're saying.\n\n1243\n00:57:15,090 --> 00:57:15,650\nWe're gonna go in there.\n\n1244\n00:57:15,650 --> 00:57:18,460\nAnd, we're gonna right click and\nchoose new trust.\n\n1245\n00:57:18,460 --> 00:57:22,020\nAnd then, decide whether or not we want\nto do forest line authentication or\n\n1246\n00:57:22,020 --> 00:57:23,232\nselective authentication.\n\n1247\n00:57:23,232 --> 00:57:25,770\n>> All right, so\nI'm gonna run through that process.\n\n1248\n00:57:25,770 --> 00:57:28,740\nLet me just bring up my active\ndirector domains and trusts.\n\n1249\n00:57:28,740 --> 00:57:30,670\nAnd I'm just gonna pull up old domain one.\n\n1250\n00:57:32,080 --> 00:57:33,960\nAnd I'll go under my trust,\nand this time, you know,\n\n1251\n00:57:33,960 --> 00:57:36,150\nwe'll see the trust that\nwe have from before.\n\n1252\n00:57:36,150 --> 00:57:37,880\nI'm gonna go ahead and do a new trust.\n\n1253\n00:57:37,880 --> 00:57:39,780\n>> And here we would need\nto be an enterprise admin,\n\n1254\n00:57:39,780 --> 00:57:42,690\nbecause we are doing things that\nare going beyond our domain boundaries.\n\n1255\n00:57:42,690 --> 00:57:46,680\nAnd I would need to have an enterprise\nadmin account in that other forest\n\n1256\n00:57:46,680 --> 00:57:48,570\nif I was gonna do both sides.\n\n1257\n00:57:48,570 --> 00:57:50,450\n>> And so here where it's asking for\nthe domain name,\n\n1258\n00:57:50,450 --> 00:57:51,790\nI need to put the root\ndomain of the other forest.\n\n1259\n00:57:51,790 --> 00:57:53,520\nAnd so the other forest and\nso the other forest-\n\n1260\n00:57:53,520 --> 00:57:54,750\n>> You can actually just specify\n\n1261\n00:57:54,750 --> 00:58:00,160\nthe forest name itself, and it'll\nfigure it should figure it out itself.\n\n1262\n00:58:00,160 --> 00:58:01,610\n>> And\nthey're normally going to be the same.\n\n1263\n00:58:01,610 --> 00:58:04,670\nBut you bring up a good point, cuz you\ncan rename the domain after the fact.\n\n1264\n00:58:04,670 --> 00:58:06,090\nIn which case,\nthey might not match anymore.\n\n1265\n00:58:06,090 --> 00:58:06,990\n>> Exactly.\n\n1266\n00:58:06,990 --> 00:58:08,955\n>> So I'll go ahead and punch that in.\n\n1267\n00:58:08,955 --> 00:58:12,270\nwww.Domain3.itpro.tv\n>> And so, it's going to reach out and\n\n1268\n00:58:12,270 --> 00:58:12,840\nit's going to see.\n\n1269\n00:58:12,840 --> 00:58:15,690\nAnd just like Mike said, it detected that.\n\n1270\n00:58:15,690 --> 00:58:19,110\n>> It's not in the same forest as\nthis domain we're working with.\n\n1271\n00:58:19,110 --> 00:58:21,270\nSo it says, well,\nI can't setup a shortcut trust.\n\n1272\n00:58:21,270 --> 00:58:23,650\nI can't setup you know,\na parent child, or anything like that.\n\n1273\n00:58:23,650 --> 00:58:27,690\nThe only thing that's left is that\nexternal trust, or realm trust, or\n\n1274\n00:58:27,690 --> 00:58:28,740\nforest trust.\n\n1275\n00:58:28,740 --> 00:58:30,920\n>> And this screen is what\nI was talking about earlier\n\n1276\n00:58:30,920 --> 00:58:32,390\n>> The forest trust is what you're gonna\n\n1277\n00:58:32,390 --> 00:58:33,260\nsee on the exam.\n\n1278\n00:58:33,260 --> 00:58:37,080\nThat's where our entire forest trusts\nsomebody else's entire forest.\n\n1279\n00:58:37,080 --> 00:58:41,630\nBut if you have need to trust just\na single domain in that other forest,\n\n1280\n00:58:41,630 --> 00:58:43,550\nyou can create an external trust.\n\n1281\n00:58:43,550 --> 00:58:47,860\nAnd in Windows Server 2003 and earlier\nthose external trusts were all we had.\n\n1282\n00:58:47,860 --> 00:58:49,623\nAnd so\nyou did have to it domain by domain.\n\n1283\n00:58:49,623 --> 00:58:50,266\nAnd it was kinda a hassle.\n>> Mm-hm.\n\n1284\n00:58:50,266 --> 00:58:51,320\n>> But those are there.\n\n1285\n00:58:51,320 --> 00:58:54,820\nThat's the old style mapping,\nyou know, it says right here,\n\n1286\n00:58:54,820 --> 00:58:58,610\na nontransitive trust bounded by the\ndomains in the relationship and that's it.\n\n1287\n00:58:58,610 --> 00:59:01,170\nA forest trust, on the other hand,\n\n1288\n00:59:01,170 --> 00:59:06,470\nis transitive between the forest not\ntwo or third one, like in your diagram.\n\n1289\n00:59:06,470 --> 00:59:09,353\nSo it is limited to that, but\nit is transitive within the forests.\n\n1290\n00:59:09,353 --> 00:59:12,314\nAnd that's normally the way\nthat we're going to go.\n\n1291\n00:59:12,314 --> 00:59:15,550\nAll right, then it's asking, if we\nwant to do two way, one way incoming,\n\n1292\n00:59:15,550 --> 00:59:16,760\none way out going.\n\n1293\n00:59:16,760 --> 00:59:18,500\nWe'll go, should we go all two way?\n\n1294\n00:59:18,500 --> 00:59:19,270\n>> Might as well go two way.\n\n1295\n00:59:19,270 --> 00:59:21,070\n>> Let's go all out.\n>> We happen to know an administrative\n\n1296\n00:59:21,070 --> 00:59:24,200\naccount in that other forest over there.\n\n1297\n00:59:24,200 --> 00:59:27,860\n>> If this was a matter of us acquiring a\ncompany, so we've purchased somebody else,\n\n1298\n00:59:27,860 --> 00:59:29,780\nand we're gonna be merging them into us.\n\n1299\n00:59:29,780 --> 00:59:32,340\nWell, a two way is what\nwe're normally gonna want.\n\n1300\n00:59:32,340 --> 00:59:34,750\nBut if these are contractors coming in,\nwell,\n\n1301\n00:59:34,750 --> 00:59:39,520\nwe might wanna trust their accounts so\nthat they can log in to our systems and\n\n1302\n00:59:39,520 --> 00:59:41,400\nwe don't have to give them user accounts,\nright?\n\n1303\n00:59:41,400 --> 00:59:43,390\nBut they might not wanna\ntrust our accounts.\n\n1304\n00:59:43,390 --> 00:59:45,390\nThey might not want us\nto access their systems.\n\n1305\n00:59:45,390 --> 00:59:47,020\nIn which case, it would be a one way.\n\n1306\n00:59:47,020 --> 00:59:49,050\nSo, there's calls for both.\n\n1307\n00:59:49,050 --> 00:59:50,750\nIt just depends on what your scenario is.\n\n1308\n00:59:50,750 --> 00:59:51,620\nWe'll go ahead and do a two way.\n\n1309\n00:59:53,210 --> 00:59:55,240\nAll right, and then it asks\nwhere we're gonna create it, and\n\n1310\n00:59:55,240 --> 00:59:56,460\nthis comes down to credentials.\n\n1311\n00:59:56,460 --> 01:00:00,360\n>> Right.\n>> Right, and if you have both sides and\n\n1312\n01:00:00,360 --> 01:00:03,220\nyou can specify the credentials for\nit then great.\n\n1313\n01:00:03,220 --> 01:00:04,230\nThat's not normally the case.\n\n1314\n01:00:04,230 --> 01:00:06,140\n>> Right\n>> Normally, you're setting up one end.\n\n1315\n01:00:06,140 --> 01:00:07,270\nThis domain only.\n\n1316\n01:00:07,270 --> 01:00:09,470\nAnd then somebody on the other\nend is going to set it up.\n\n1317\n01:00:09,470 --> 01:00:10,010\n>> Right.\n\n1318\n01:00:10,010 --> 01:00:11,980\n>> All right.\nNow honestly.\n\n1319\n01:00:11,980 --> 01:00:13,640\nSo I've done this in real life, Mike.\n\n1320\n01:00:13,640 --> 01:00:14,940\nAnd I've always done this domain only.\n\n1321\n01:00:14,940 --> 01:00:15,978\n>> Oh yeah?\n>> If you do the other one does\n\n1322\n01:00:15,978 --> 01:00:17,191\nit give you the chance to [CROSSTALK].\n\n1323\n01:00:17,191 --> 01:00:20,180\n>> Yep, it's going to say,\nwhat's the password for this other domain.\n\n1324\n01:00:20,180 --> 01:00:21,450\nYeah.\n>> Well, let's give that a shot\n\n1325\n01:00:21,450 --> 01:00:22,730\nthen we'll save both.\n\n1326\n01:00:22,730 --> 01:00:23,660\n>> Save us a couple steps.\n\n1327\n01:00:23,660 --> 01:00:24,300\n>> All right.\n\n1328\n01:00:24,300 --> 01:00:27,095\nSo now it's asking for\nmy credentials on domain three.\n\n1329\n01:00:27,095 --> 01:00:28,540\n>> Mm-hm.\n>> I guess it's assuming I'll use mine\n\n1330\n01:00:28,540 --> 01:00:29,130\nfor domain one?\n\n1331\n01:00:29,130 --> 01:00:29,760\n>> Yep exactly.\n\n1332\n01:00:29,760 --> 01:00:32,729\n>> Okay, so on the other side, I wonder\nif I created an account for myself?\n\n1333\n01:00:34,210 --> 01:00:35,220\nProbably.\n\n1334\n01:00:35,220 --> 01:00:36,538\nI guess we'll find out, right?\n\n1335\n01:00:36,538 --> 01:00:39,395\n[LAUGH] So let's go,\nI'll get an access denied.\n\n1336\n01:00:39,395 --> 01:00:40,814\n>> [LAUGH]\n>> In fact, you know what?\n\n1337\n01:00:40,814 --> 01:00:42,005\nLet me just use administrator.\n\n1338\n01:00:42,005 --> 01:00:42,990\n[LAUGH] There we go.\n\n1339\n01:00:44,540 --> 01:00:49,500\nAnd now it's asking,\ndo I want to forest wide authentication?\n\n1340\n01:00:49,500 --> 01:00:51,490\nOpen up the flood gates let them all in.\n\n1341\n01:00:51,490 --> 01:00:51,990\nYeah.\n>> Or,\n\n1342\n01:00:51,990 --> 01:00:54,700\ndo I wanna do selective authentication?\n\n1343\n01:00:54,700 --> 01:00:58,410\nAnd pick exactly who it is I want\nto allow to come through and\n\n1344\n01:00:58,410 --> 01:00:59,653\nwhat servers they authenticate off of?\n\n1345\n01:00:59,653 --> 01:01:00,788\n>> Exactly, exactly, yeah.\n\n1346\n01:01:00,788 --> 01:01:04,010\n>> You know, first of all we didn't have\nthat selective authentication prior,\n\n1347\n01:01:04,010 --> 01:01:08,638\nI wanna say it was 2012 that introduce,\nno it was 2008.\n\n1348\n01:01:08,638 --> 01:01:09,780\n>> Was it?\n>> But yeah,\n\n1349\n01:01:09,780 --> 01:01:12,710\nwhen you do that forest wide like we\nwere saying earlier, you're basically\n\n1350\n01:01:12,710 --> 01:01:16,370\nsaying that all of their users are now\npart of your authenticated users.\n\n1351\n01:01:16,370 --> 01:01:20,290\nSo anywhere that your users could gain\naccess to, they can now gain access.\n\n1352\n01:01:20,290 --> 01:01:23,880\nAssuming the authenticated users\ngroup have been given access to that.\n\n1353\n01:01:23,880 --> 01:01:25,500\nAnd if it's the same organization,\n\n1354\n01:01:25,500 --> 01:01:29,460\nlike was saying, if you bought a company,\nmaybe you want to do that.\n\n1355\n01:01:29,460 --> 01:01:30,190\nIt's a lot easier.\n\n1356\n01:01:30,190 --> 01:01:33,560\nI don't have to specify the individual\nresources and things like that.\n\n1357\n01:01:33,560 --> 01:01:34,830\nBut between two businesses,\n\n1358\n01:01:34,830 --> 01:01:37,220\nyou're almost always gonna want\nto go with that selective.\n\n1359\n01:01:37,220 --> 01:01:42,270\nSo you've got a finer control over what\nthey're allowed to connect to when they\n\n1360\n01:01:42,270 --> 01:01:46,430\ncome across that forest trust.\n\n1361\n01:01:46,430 --> 01:01:49,031\nThe other thing that we want to keep in\nmind as we go through here is if you click\n\n1362\n01:01:49,031 --> 01:01:50,220\nNext, there's the SID history.\n\n1363\n01:01:50,220 --> 01:01:52,230\nAnd I can't remember if it\ngives us an option here.\n\n1364\n01:01:52,230 --> 01:01:54,510\nOh, it's gonna ask us\nabout our suffix routing.\n\n1365\n01:01:54,510 --> 01:01:56,760\n>> It's actually asking\nus about both directions.\n\n1366\n01:01:56,760 --> 01:02:00,830\nSo here are the outgoing trust\nauthentication level, local, forest.\n\n1367\n01:02:00,830 --> 01:02:03,450\nAnd then you'll see like\nlevel specified forest.\n\n1368\n01:02:03,450 --> 01:02:05,385\n>> Oh, that's right. [CROSSTALK] Both\nsides. >> So the two different sides,\n\n1369\n01:02:05,385 --> 01:02:08,260\ncuz we did it two way\n>> So do I wanna go forest wide and\n\n1370\n01:02:08,260 --> 01:02:10,680\nthen add selective later or-\n>> Change it to selective, we can do that.\n\n1371\n01:02:10,680 --> 01:02:11,400\n>> I don't know what do you think?\n\n1372\n01:02:11,400 --> 01:02:12,460\n>> Lets do it,\nlet's show them how to do it.\n\n1373\n01:02:12,460 --> 01:02:15,160\n>> Just in case somebody had already\nset this up and you go in there and\n\n1374\n01:02:15,160 --> 01:02:15,710\ncheck it out.\n\n1375\n01:02:15,710 --> 01:02:18,780\nAnd you realize that, oh my gosh,\nwe're at forest wide I wanna fix that.\n\n1376\n01:02:18,780 --> 01:02:20,410\nWe'll show you where to go to fix that.\n\n1377\n01:02:20,410 --> 01:02:22,720\n>> Yeah we're gonna fix that\n>> And so\n\n1378\n01:02:22,720 --> 01:02:26,530\nit has probably enough information now so\nlet's just finish that up.\n\n1379\n01:02:26,530 --> 01:02:33,380\nAnd give that a moment, normally,\ndo we get a confirmation screen normally?\n\n1380\n01:02:33,380 --> 01:02:35,160\n>> Yeah, usually it'll ask\nyou if you want to validate.\n\n1381\n01:02:35,160 --> 01:02:37,629\n>> Great, I screwed something up there.\n\n1382\n01:02:37,629 --> 01:02:40,420\n[LAUGH] That certainly didn't do it,\ndid it?\n\n1383\n01:02:40,420 --> 01:02:41,410\n>> You know, I don't see it.\n\n1384\n01:02:41,410 --> 01:02:43,390\n>> All right shoot, let me try it..\n\n1385\n01:02:43,390 --> 01:02:46,450\nI probably clicked next on some stupid\nscreen that told me what went wrong,\n\n1386\n01:02:46,450 --> 01:02:47,880\nand I didn't pay attention.\n\n1387\n01:02:47,880 --> 01:02:51,310\nAll right,\nlet me run right back through this again.\n\n1388\n01:02:51,310 --> 01:02:54,320\nAll right, so I'm gonna go ahead and\ntrust that other domain.\n\n1389\n01:02:54,320 --> 01:02:56,650\nIt is a forest trust.\n\n1390\n01:02:56,650 --> 01:02:58,990\nIt is a two-way trust.\n\n1391\n01:02:58,990 --> 01:03:00,800\nWe'll create both sides.\n\n1392\n01:03:01,920 --> 01:03:06,600\nAnd I'll punch in my account.\n\n1393\n01:03:08,400 --> 01:03:10,330\nWe're going forest wide for\nthe authentication.\n\n1394\n01:03:11,360 --> 01:03:12,990\nIt's given my little summary here.\n\n1395\n01:03:14,510 --> 01:03:15,210\nCannot continue.\n\n1396\n01:03:15,210 --> 01:03:17,260\nThe trust relationship cannot continue.\n\n1397\n01:03:17,260 --> 01:03:21,220\nThe source object SID already\nexists in the destination forest.\n\n1398\n01:03:21,220 --> 01:03:24,600\nThe source object SID,\nis that talking about my user account?\n\n1399\n01:03:24,600 --> 01:03:30,730\nBecause I do-\n>> That's interesting.\n\n1400\n01:03:30,730 --> 01:03:33,084\nI wonder if it's who is it, maybe.\n\n1401\n01:03:33,084 --> 01:03:35,116\nI don't know if that was\nthe same error we got earlier.\n\n1402\n01:03:35,116 --> 01:03:35,949\n>> Oh my, no.\n\n1403\n01:03:35,949 --> 01:03:37,005\nI know what the problem is MIke.\n\n1404\n01:03:37,005 --> 01:03:38,244\nI didn't even think about this.\n\n1405\n01:03:38,244 --> 01:03:40,556\nAll right.\nThis morning I brought these domain\n\n1406\n01:03:40,556 --> 01:03:42,267\ncontrollers up really quickly.\n\n1407\n01:03:42,267 --> 01:03:48,140\nAnd one of the things I did is\nI cloned the domain controller.\n\n1408\n01:03:48,140 --> 01:03:48,670\n>> Oh, okay, okay, okay.\n\n1409\n01:03:48,670 --> 01:03:50,550\n>> So, and\nI did it before I promoted it, right?\n\n1410\n01:03:50,550 --> 01:03:53,120\nSo I had this install of\nWindows Server 2012, and\n\n1411\n01:03:53,120 --> 01:03:55,130\nI used VMware to just quickly clone it.\n\n1412\n01:03:55,130 --> 01:03:55,850\n>> Okay.\n>> And so\n\n1413\n01:03:55,850 --> 01:03:57,950\nwhen I cloned it, it's got the same SID.\n\n1414\n01:03:57,950 --> 01:03:58,520\n>> Right.\n\n1415\n01:03:58,520 --> 01:04:01,020\n>> Now, I then promoted it to\nbecome a domain controller, right?\n\n1416\n01:04:01,020 --> 01:04:04,350\nSo at that point they get different\nSIDs cuz the domain's attached to it.\n\n1417\n01:04:04,350 --> 01:04:06,330\nBut the trust point, like this.\n\n1418\n01:04:06,330 --> 01:04:07,230\n>> Right.\n>> The domain\n\n1419\n01:04:07,230 --> 01:04:08,410\nSID's not taken into account.\n\n1420\n01:04:08,410 --> 01:04:11,080\nIt's the SID of the actual domain\ncontroller I'm reaching out to.\n\n1421\n01:04:11,080 --> 01:04:12,610\nAnd it's seeing the same SID.\n\n1422\n01:04:12,610 --> 01:04:15,570\nSo what I really need to do\nis Sysprep that other box.\n\n1423\n01:04:15,570 --> 01:04:17,220\nI should've done that this morning, and\n\n1424\n01:04:17,220 --> 01:04:19,870\nI didn't think about it because\nI hadn't promoted it yet.\n\n1425\n01:04:19,870 --> 01:04:21,780\nI said oh, they got a new domain SID.\n\n1426\n01:04:21,780 --> 01:04:23,220\nBut I did forget about that.\n\n1427\n01:04:23,220 --> 01:04:25,490\nAnd that's the problem,\nis they've got the same SID.\n\n1428\n01:04:25,490 --> 01:04:26,420\n>> Okay.\n\n1429\n01:04:26,420 --> 01:04:29,020\n>> Kinda reinforces the importance\nof that Sysprep utility.\n\n1430\n01:04:29,020 --> 01:04:30,440\n>> Yes.\n>> When you've got multiple domains\n\n1431\n01:04:30,440 --> 01:04:32,690\ninvolved, you can get\nduplicate SIDs pretty easy.\n\n1432\n01:04:32,690 --> 01:04:34,080\nSo I do need to Sysprep, but\n\n1433\n01:04:34,080 --> 01:04:37,370\nthe problem is can't Sysprep\na domain controller that's promoted.\n\n1434\n01:04:37,370 --> 01:04:38,590\nCan you?\n>> No, now you're supposed\n\n1435\n01:04:38,590 --> 01:04:39,630\nto start all over.\n\n1436\n01:04:39,630 --> 01:04:42,810\n>> So what I basically have to do is\nstart all over again, so that's fun.\n\n1437\n01:04:42,810 --> 01:04:47,600\nSo, let's do this, I'll have to\nwhip that up like during the break.\n\n1438\n01:04:47,600 --> 01:04:51,540\n>> Yeah, I was gonna say,\nit's just about, or no, is it not?\n\n1439\n01:04:51,540 --> 01:04:53,220\nOkay.\n>> No we're still short on time.\n\n1440\n01:04:53,220 --> 01:04:57,810\nSo let's do this, let's take a TV timeout,\n\n1441\n01:04:57,810 --> 01:05:01,245\nwe'll do a fake wavy line\ndream sequence thing.\n\n1442\n01:05:01,245 --> 01:05:02,990\n>> [LAUGH]\n>> And I'll just whip one of these up.\n\n1443\n01:05:02,990 --> 01:05:03,874\nFor those of you watching live,\n\n1444\n01:05:03,874 --> 01:05:05,430\nyou'll get to see me just kind\nof whip up this other one.\n\n1445\n01:05:05,430 --> 01:05:08,740\n>> Put a thought bubble above Don's head,\nlittle gears going.\n\n1446\n01:05:08,740 --> 01:05:11,430\n>> For those of you watching recorded,\nwell, you'll see no time passing and\n\n1447\n01:05:11,430 --> 01:05:12,270\nthen we'll jump right in there.\n\n1448\n01:05:12,270 --> 01:05:13,260\nSo give me just a moment.\n\n1449\n01:05:13,260 --> 01:05:15,019\nI'm gonna fix this mess up,\nand then we'll be right back.\n\n1450\n01:05:16,290 --> 01:05:17,875\nAll right.\nSo through the magic of television.\n\n1451\n01:05:17,875 --> 01:05:22,110\n[LAUGH] We've now just rebuilt domain\nthree so it's got its correct SID.\n\n1452\n01:05:22,110 --> 01:05:25,870\nSo that's a risk you have when\nyou start cloning machines with\n\n1453\n01:05:25,870 --> 01:05:27,180\nvirtualization software.\n\n1454\n01:05:27,180 --> 01:05:29,550\nSo I'm just going to repeat\nthat process and then go and\n\n1455\n01:05:29,550 --> 01:05:31,090\nset up that forest trust again.\n\n1456\n01:05:31,090 --> 01:05:32,700\nJust like we did a moment ago.\n\n1457\n01:05:32,700 --> 01:05:34,000\nSo I'll pull up my properties.\n\n1458\n01:05:34,000 --> 01:05:35,910\nAnd I'll go to my trusts.\n\n1459\n01:05:35,910 --> 01:05:36,930\nDo a new trust.\n\n1460\n01:05:36,930 --> 01:05:39,160\nI feel like we've been here before.\n\n1461\n01:05:39,160 --> 01:05:40,052\n>> I know, it looks familiar.\n\n1462\n01:05:40,052 --> 01:05:43,602\n>> So we'll go ahead and\ndo that trust too.\n\n1463\n01:05:43,602 --> 01:05:45,710\nDomain3.itpro.tv.\n\n1464\n01:05:45,710 --> 01:05:47,800\nAnd it's gonna be a forest trust.\n\n1465\n01:05:49,010 --> 01:05:50,550\nAnd we're gonna go ahead and do a two way.\n\n1466\n01:05:51,550 --> 01:05:55,890\nAnd we'll do both sides,\ncuz I've got accounts.\n\n1467\n01:05:55,890 --> 01:05:57,142\nAnd I'll use the administrator account.\n\n1468\n01:06:00,927 --> 01:06:03,492\nAnd it just needs to be somebody\nwho's an Enterprise admin.\n\n1469\n01:06:03,492 --> 01:06:06,902\nWe're gonna do forest wide authentication\ncuz we're gonna turn on selective\n\n1470\n01:06:06,902 --> 01:06:08,220\nauthentication separate.\n\n1471\n01:06:08,220 --> 01:06:08,720\n>> Right.\n\n1472\n01:06:09,820 --> 01:06:11,860\n>> And so I'll leave that on both sides.\n\n1473\n01:06:13,430 --> 01:06:14,210\nAnd off we go.\n\n1474\n01:06:14,210 --> 01:06:17,020\nThere we go,\ntrust relationship created successfully.\n\n1475\n01:06:17,020 --> 01:06:17,780\n>> I like it.\n\n1476\n01:06:17,780 --> 01:06:21,680\n>> So now we've got that in place,\nand we've got a full forest trust, and\n\n1477\n01:06:21,680 --> 01:06:22,960\nit's gonna offer to confirm it.\n\n1478\n01:06:22,960 --> 01:06:26,150\nI'll go ahead and\nlet it do the confirmation.\n\n1479\n01:06:26,150 --> 01:06:30,090\n>> Yeah, sometimes it'll lag a little bit,\nand say, it succeeded on both sides?\n\n1480\n01:06:30,090 --> 01:06:30,970\n>> Yep, it is done.\n\n1481\n01:06:30,970 --> 01:06:31,590\n>> Nice.\n\n1482\n01:06:31,590 --> 01:06:35,170\n>> Okay, now the trust that we just\ncreated, that one right there,\n\n1483\n01:06:35,170 --> 01:06:36,540\ndomain three to ITPro.tv.\n\n1484\n01:06:36,540 --> 01:06:40,320\nYou'll see it's noted that\nit is a forest trust, and\n\n1485\n01:06:40,320 --> 01:06:43,770\nforest trusts are a lot different\nthan the other trusts, right?\n\n1486\n01:06:43,770 --> 01:06:47,220\nThese child trusts, the tree root,\nthose are created automatically.\n\n1487\n01:06:47,220 --> 01:06:49,300\nThere's not a whole lot\nwe can do with them.\n\n1488\n01:06:49,300 --> 01:06:51,080\nBut with a forest trust, there's a lot.\n\n1489\n01:06:51,080 --> 01:06:53,640\n>> Yep.\n>> The way we have it set up right now,\n\n1490\n01:06:53,640 --> 01:06:58,330\nI trust every user account from domain\nthree, and domain three trusts every\n\n1491\n01:06:58,330 --> 01:07:03,102\nuser account from domain one,\ndomain two, and training dot domain one.\n\n1492\n01:07:03,102 --> 01:07:06,120\nYou know, all of our forest,\nthe whole shebang.\n\n1493\n01:07:06,120 --> 01:07:07,538\nIt's a little bit of overkill, right?\n\n1494\n01:07:07,538 --> 01:07:12,240\nSo with these, we can come in and\ntweak all sorts of different things.\n\n1495\n01:07:12,240 --> 01:07:15,760\nIf you take that trust and you just built,\nthat forest trust, and you pull up its\n\n1496\n01:07:15,760 --> 01:07:19,690\nproperties, you'll see a lot more options\nin here than what we saw in the other.\n\n1497\n01:07:19,690 --> 01:07:22,840\nI mean, you see the same options\non this first page but for\n\n1498\n01:07:22,840 --> 01:07:24,280\nexample we have name suffix routing.\n\n1499\n01:07:25,640 --> 01:07:28,870\nIf we created additional\nUPNs on the other side,\n\n1500\n01:07:28,870 --> 01:07:31,340\nwe don't necessarily know about it here,\nit's a separate forest right?\n\n1501\n01:07:31,340 --> 01:07:33,050\nHow would be know they're UPNs?\n\n1502\n01:07:33,050 --> 01:07:36,490\nSo, if I need to I can\nadd in any other ones or\n\n1503\n01:07:36,490 --> 01:07:40,020\nreally add them on the other side and\nthen refresh here to learn them.\n\n1504\n01:07:40,020 --> 01:07:44,320\nSo right now we know *.domain3.itpro.tv.\n\n1505\n01:07:44,320 --> 01:07:48,000\nOn their side they would know\n*.domain1.itpro.tv, *.domain2.itpro.tv,\n\n1506\n01:07:48,000 --> 01:07:53,780\nand *.itpro.tv because of that\nUPN that we put in place.\n\n1507\n01:07:53,780 --> 01:07:58,585\n>> And that star is gonna mean\nthat includes training dot.\n\n1508\n01:07:58,585 --> 01:07:59,918\n>> Mm-hm.\n>> Oh, what are we calling it?\n\n1509\n01:07:59,918 --> 01:08:02,550\nTraining.itpro or\ntraining.domain1.itpro.tv.\n\n1510\n01:08:02,550 --> 01:08:07,138\nAnd you might want to set it up\nwhere you know because that forest\n\n1511\n01:08:07,138 --> 01:08:11,990\ntrust is transitive to all the domains\nin that forest, you might not want that.\n\n1512\n01:08:11,990 --> 01:08:16,210\nMaybe you only want users that have\na name that ends in domain1.ITPro.tv\n\n1513\n01:08:16,210 --> 01:08:17,100\nto be able to come through.\n\n1514\n01:08:17,100 --> 01:08:19,040\nSo you can disable that\nname suffix routing.\n\n1515\n01:08:19,040 --> 01:08:20,260\nWe could get rid of that wildcard, or\n\n1516\n01:08:20,260 --> 01:08:24,040\nwe could specify exactly which\nname suffixes we wanted to allow.\n\n1517\n01:08:24,040 --> 01:08:28,540\n>> Yeah, if you go in and edit, you can\ncome in and you'll see name suffixes to\n\n1518\n01:08:28,540 --> 01:08:32,680\nexclude from routing to domain three, so\nif there's some that I don't want to send.\n\n1519\n01:08:32,680 --> 01:08:36,540\nAnd then existing name suffixes, we can\nkind of manipulate those and tweak them.\n\n1520\n01:08:36,540 --> 01:08:40,480\nSo you have a little bit of control there\nas far as how those UPN's are handled.\n\n1521\n01:08:40,480 --> 01:08:42,640\nAnd individual domains even.\n\n1522\n01:08:42,640 --> 01:08:44,440\nAnd then under authentication,\n\n1523\n01:08:44,440 --> 01:08:47,960\nhere's where we can see that we can turn\non selective authentication if we want.\n\n1524\n01:08:47,960 --> 01:08:49,620\nAnd I'll go ahead and apply that.\n\n1525\n01:08:51,670 --> 01:08:53,220\n>> And now once we do that.\n\n1526\n01:08:53,220 --> 01:08:55,180\nNow, that changes things, right?\n\n1527\n01:08:55,180 --> 01:08:57,020\nNow we still trust them, but\n\n1528\n01:08:57,020 --> 01:09:00,330\nwe've gotta specify what resources\nthey're allowed to connect.\n\n1529\n01:09:00,330 --> 01:09:02,770\nAnd so, I don't know, if we want\nto go into an active directory and\n\n1530\n01:09:02,770 --> 01:09:04,020\nuse those computers.\n\n1531\n01:09:04,020 --> 01:09:06,870\nAnd we're gonna have to pull up the\ndifferent, like if we had file servers.\n\n1532\n01:09:06,870 --> 01:09:09,240\nIn our case we've got a domain\ncontroller that we can use, I guess.\n\n1533\n01:09:09,240 --> 01:09:12,750\nBut now what you're gonna see is on\nthe object and active directory,\n\n1534\n01:09:12,750 --> 01:09:18,290\non the server computer account, there's\na permission called Allow to Authenticate.\n\n1535\n01:09:18,290 --> 01:09:20,430\nAnd so if we pull up those properties.\n\n1536\n01:09:20,430 --> 01:09:22,230\nOh, we're gonna have to\nprobably change our view, yup.\n\n1537\n01:09:22,230 --> 01:09:23,130\n>> Gotta go Advanced.\n\n1538\n01:09:23,130 --> 01:09:25,204\nI'm gonna go up to View > Advanced.\n\n1539\n01:09:25,204 --> 01:09:27,400\n>> And\nthen we get to see that Security tab.\n\n1540\n01:09:27,400 --> 01:09:30,530\nAnd then once we take a peek at that\nSecurity tab, we'll see that there's a one\n\n1541\n01:09:30,530 --> 01:09:32,751\nof the permissions is gonna\nbe Allow to Authenticate.\n\n1542\n01:09:34,390 --> 01:09:38,460\nAnd we would have to add the group\nof users from that other force\n\n1543\n01:09:38,460 --> 01:09:40,450\nfrom that domain in that other force,\nwe would add them.\n\n1544\n01:09:40,450 --> 01:09:43,020\nAnd then just put a check mark\nthere in the Allow column and\n\n1545\n01:09:43,020 --> 01:09:44,340\nthe Allow to Authenticate.\n\n1546\n01:09:44,340 --> 01:09:47,370\nThat gives them permission to authenticate\nto that particular server, and\n\n1547\n01:09:47,370 --> 01:09:48,790\nthat particular server only.\n\n1548\n01:09:48,790 --> 01:09:52,080\nSo and then you would still have to go to\nthe resource to share and what have you.\n\n1549\n01:09:52,080 --> 01:09:54,280\nAnd give them read or\nwrite or whatever you want.\n\n1550\n01:09:54,280 --> 01:09:55,890\nBut it wouldn't just give\nthem blanket access to it.\n\n1551\n01:09:55,890 --> 01:09:56,750\nThey couldn't just come over and\n\n1552\n01:09:56,750 --> 01:09:59,580\njust start sitting down at one of your\nclient machines and try to log on.\n\n1553\n01:09:59,580 --> 01:10:01,610\nBecause they could with that\nforest wide authentication.\n\n1554\n01:10:01,610 --> 01:10:04,100\nWe're gonna trust their\nauthentication process, so.\n\n1555\n01:10:04,100 --> 01:10:05,980\n>> That is the real risk,\nis that, you know,\n\n1556\n01:10:05,980 --> 01:10:09,660\nthey could sit down at any workstation\nin your business and log in,\n\n1557\n01:10:09,660 --> 01:10:11,420\nbecause they're\nan authenticated user right?\n\n1558\n01:10:11,420 --> 01:10:12,700\nThey have that permission.\n\n1559\n01:10:12,700 --> 01:10:15,220\nSo this is the way we kind of\nput that constraint on there.\n\n1560\n01:10:15,220 --> 01:10:16,310\nWe limit them to machines.\n\n1561\n01:10:16,310 --> 01:10:17,750\nIt's a great idea.\n\n1562\n01:10:17,750 --> 01:10:20,540\nThis was a newer feature,\nwe didn't have it in 2003.\n\n1563\n01:10:20,540 --> 01:10:22,730\n>> Right.\n>> So it is a newer feature in 2008 and\n\n1564\n01:10:22,730 --> 01:10:24,500\n2012, definitely something to make use of.\n\n1565\n01:10:24,500 --> 01:10:25,650\n>> Absolutely.\n\n1566\n01:10:25,650 --> 01:10:27,930\n>> Right, and you can turn it on and\noff really easily.\n\n1567\n01:10:27,930 --> 01:10:33,680\nSo you saw where back here I just pulled\nup the properties of the trust itself.\n\n1568\n01:10:33,680 --> 01:10:38,130\nSo here was that domain three trust,\nand in the properties for\n\n1569\n01:10:38,130 --> 01:10:40,340\nit under authentication,\nit's just a radio button.\n\n1570\n01:10:40,340 --> 01:10:42,530\nAnd once you flip that, you go and\nassign the permissions.\n\n1571\n01:10:42,530 --> 01:10:45,170\nNow if I didn't flip that, if I just\nwent to selective authentication and\n\n1572\n01:10:45,170 --> 01:10:50,060\nleft it like that, nobody's selected,\nso they're not gonna get very far.\n\n1573\n01:10:50,060 --> 01:10:53,150\nSo I do need to go and\nadd it to the resources where needed.\n\n1574\n01:10:53,150 --> 01:10:53,900\n>> Exactly.\n\n1575\n01:10:53,900 --> 01:10:54,770\nExactly.\n\n1576\n01:10:54,770 --> 01:10:57,290\nAnd that helps keep us safe\nacross that forest trust, and\n\n1577\n01:10:57,290 --> 01:11:00,360\nanother thing that we wanna mention while\nwe're talking about these forest trusts\n\n1578\n01:11:00,360 --> 01:11:02,150\nis something called SID filtering.\n\n1579\n01:11:02,150 --> 01:11:06,230\nAnd this is, we know that user accounts\nare all object in active directories\n\n1580\n01:11:06,230 --> 01:11:10,580\nsecured principals anyway have an SID and\nthat uniquely identifies that object.\n\n1581\n01:11:12,660 --> 01:11:16,940\nThere's something called SID history, that\nfacilitates migration between domains and\n\n1582\n01:11:16,940 --> 01:11:17,470\nthings like that.\n\n1583\n01:11:17,470 --> 01:11:20,480\nWhen we move an object from\none domain to another,\n\n1584\n01:11:20,480 --> 01:11:23,640\nwell the SID, the security identifier, is\nactually made up of two parts, all right?\n\n1585\n01:11:23,640 --> 01:11:27,130\nIt's the domain identifier, and\nthen the relative identifier.\n\n1586\n01:11:27,130 --> 01:11:29,590\nWe've talked about the RID\nmaster in our other shows.\n\n1587\n01:11:29,590 --> 01:11:33,300\nThe domain identifier is the same for\nevery object within that domain, right?\n\n1588\n01:11:33,300 --> 01:11:34,803\nAnd then the relative identifier\ngets tacked on to the end of that.\n\n1589\n01:11:34,803 --> 01:11:37,464\nTo make sure that that SID is unique for\nthat object.\n\n1590\n01:11:37,464 --> 01:11:41,861\nWhen we migrate objects from one domain\nto another Well, the SID has to change,\n\n1591\n01:11:41,861 --> 01:11:44,169\nbecause the domain identifiers change.\n\n1592\n01:11:44,169 --> 01:11:46,760\nAnd we're now in a different domain.\n\n1593\n01:11:46,760 --> 01:11:49,760\nAnd what will happen if we change SID?\n\n1594\n01:11:49,760 --> 01:11:53,620\nThey no longer have access to the\nresources that they use to have access to.\n\n1595\n01:11:53,620 --> 01:11:55,670\nWindows sees there's\na completely different account.\n\n1596\n01:11:55,670 --> 01:11:58,570\nSo to help with that there's\nsomething called SID history.\n\n1597\n01:11:58,570 --> 01:12:02,720\nAnd when you migrate and object from one\ndomain to another, it gets a new SID for\n\n1598\n01:12:02,720 --> 01:12:03,660\nthat new domain.\n\n1599\n01:12:03,660 --> 01:12:07,510\nBut in it's SID history is\nthe old SID from the old domain.\n\n1600\n01:12:07,510 --> 01:12:09,420\nThat way they can still access objects.\n\n1601\n01:12:09,420 --> 01:12:11,430\nThey're still in all the groups\nthat they used to belong to.\n\n1602\n01:12:11,430 --> 01:12:15,320\nIt just makes it an easier\ntransition when you're migrating.\n\n1603\n01:12:15,320 --> 01:12:17,680\nBut bad guys can take advantage of this.\n\n1604\n01:12:17,680 --> 01:12:19,890\nIf I'm sitting in domain three and\n\n1605\n01:12:19,890 --> 01:12:24,220\nI know there's a forced trust between\ndomain three and domain one like that.\n\n1606\n01:12:24,220 --> 01:12:28,470\nWhat I can do is I can determine the SID\nof one of your privileged user accounts.\n\n1607\n01:12:28,470 --> 01:12:30,360\nOr one of my own privilege user accounts.\n\n1608\n01:12:30,360 --> 01:12:34,140\nAnd I could then try to add\nthat to my SID history.\n\n1609\n01:12:34,140 --> 01:12:37,619\nAnd when your SID history gets,\nall the SIDs your current SID, and\n\n1610\n01:12:37,619 --> 01:12:40,380\nyour previous SIDs are listed\non your access token.\n\n1611\n01:12:40,380 --> 01:12:44,100\nAnd then when I come across,\nI could be your domain admin, all right?\n\n1612\n01:12:44,100 --> 01:12:46,060\nIf I could figure out what his SID was and\n\n1613\n01:12:46,060 --> 01:12:49,500\nsome of the built-in SIDs\nare pretty easy to figure out.\n\n1614\n01:12:49,500 --> 01:12:54,120\nSo by default on these [INAUDIBLE]\nSID filtering is enabled.\n\n1615\n01:12:54,120 --> 01:12:58,370\nAnd what that means is,\nwhen you come across the trust, the only\n\n1616\n01:12:58,370 --> 01:13:02,000\nSID you're allowed to bring is the one\nfrom the domain you're coming from.\n\n1617\n01:13:02,000 --> 01:13:05,720\nSo it's not gonna pay any attention to\nyour SID history, which eliminates that\n\n1618\n01:13:05,720 --> 01:13:10,880\nchance or makes it much more difficult for\nsomebody to process that type of attack.\n\n1619\n01:13:10,880 --> 01:13:12,740\n>> Yeah, and in 2008,\nwe had to turn that on, right?\n\n1620\n01:13:12,740 --> 01:13:13,450\nBut in 2012, it's on by default?\n\n1621\n01:13:13,450 --> 01:13:14,730\n>> Right, yep, exactly\n>> Exactly.\n\n1622\n01:13:14,730 --> 01:13:16,290\n>> It was a PowerShell command before,\nwasn't it?\n\n1623\n01:13:16,290 --> 01:13:16,870\n>> Yes, yep.\n\n1624\n01:13:16,870 --> 01:13:18,430\nAnd now it's a PowerShell\ncommand to turn it off.\n\n1625\n01:13:18,430 --> 01:13:20,550\nBut it is turned on by default.\n\n1626\n01:13:20,550 --> 01:13:21,700\n>> Yeah.\nFor the exam, though,\n\n1627\n01:13:21,700 --> 01:13:23,055\nyou wanna be familiar with the concept.\n\n1628\n01:13:23,055 --> 01:13:24,550\n>> Mm-hm.\n>> And know that function is there.\n\n1629\n01:13:24,550 --> 01:13:25,480\nThe SID history won't work.\n\n1630\n01:13:25,480 --> 01:13:26,830\n>> And there's a difference between,\n\n1631\n01:13:26,830 --> 01:13:28,730\nthere's SID filtering,\nwhich is what I was just talking about.\n\n1632\n01:13:28,730 --> 01:13:31,150\nAnd then, there's SID filter quarantining,\n\n1633\n01:13:31,150 --> 01:13:34,850\nwhich I don't think they get into on\nthis particular exam, but just in case.\n\n1634\n01:13:34,850 --> 01:13:38,740\n>> That's gonna basically do the same,\nsimilar with the name suffix routing.\n\n1635\n01:13:38,740 --> 01:13:39,870\nSID filtered quarantine,\n\n1636\n01:13:39,870 --> 01:13:43,520\nnormally a forest trust is transitive\nto all the domains within that forest.\n\n1637\n01:13:43,520 --> 01:13:47,640\nIf I only wanted users from one domain\nto go across that forest trust,\n\n1638\n01:13:47,640 --> 01:13:49,320\nI can do SID filter quarantining,\n\n1639\n01:13:49,320 --> 01:13:53,250\nwhich will then only the specified\ndomains are gonna be allowed to, or\n\n1640\n01:13:53,250 --> 01:13:58,070\nthe specified domain identifiers are\nallowed to go across that forest trust.\n\n1641\n01:13:58,070 --> 01:13:59,020\n>> All right.\n\n1642\n01:13:59,020 --> 01:14:02,130\nSo at this stage in the game, we've got a\nchance to see what it's like to have more\n\n1643\n01:14:02,130 --> 01:14:03,730\nthan one domain in our environment.\n\n1644\n01:14:03,730 --> 01:14:06,740\n>> We saw trust within a domain and\nwithin a forest, and\n\n1645\n01:14:06,740 --> 01:14:09,610\nwe saw trust between forests, right?\n\n1646\n01:14:09,610 --> 01:14:12,380\nThere's one more thing we need to be\nfamiliar with when we're talking about\n\n1647\n01:14:12,380 --> 01:14:16,310\nmultiple domains, and that is sites and\ngeographical locations.\n\n1648\n01:14:16,310 --> 01:14:18,570\nSo that's what we're gonna\ntackle in the next segment.\n\n1649\n01:14:18,570 --> 01:14:21,670\nBut for now, I think we've pretty much\ncovered everything we need on the forest\n\n1650\n01:14:21,670 --> 01:14:22,360\nside, right?\n\n1651\n01:14:22,360 --> 01:14:23,830\n>> We trusted it up.\n\n1652\n01:14:23,830 --> 01:14:25,051\n>> We are all trusted\n>> [LAUGH]\n\n1653\n01:14:25,051 --> 01:14:25,809\n>> All right, so ladies and\n\n1654\n01:14:25,809 --> 01:14:27,188\ngentlemen let's stop here and\ntake a break.\n\n1655\n01:14:27,188 --> 01:14:30,624\nAnd when we get back,\nwe're gonna tackle active directory sites.\n\n1656\n01:14:30,624 --> 01:14:35,771\n[SOUND] All right welcome\n\n1657\n01:14:35,771 --> 01:14:39,633\nback everybody.\n\n1658\n01:14:39,633 --> 01:14:42,512\nNow at the beginning of the episode,\nI made a comment.\n\n1659\n01:14:42,512 --> 01:14:44,207\nI said,\n>> You made a lot of comments.\n\n1660\n01:14:44,207 --> 01:14:45,322\n>> I know, I say a lot of things.\n\n1661\n01:14:45,322 --> 01:14:50,610\nEven in a large organization,\nI'm typically gonna go single domain.\n\n1662\n01:14:50,610 --> 01:14:51,710\nI'm not gonna go multiple domain.\n\n1663\n01:14:51,710 --> 01:14:53,700\n>> Right,\nunless I got a really good reason not to.\n\n1664\n01:14:53,700 --> 01:14:56,720\nAnd one of the reasons you\nbrought up Mike, was replication.\n\n1665\n01:14:56,720 --> 01:14:58,750\nIf you have a single domain,\n\n1666\n01:14:58,750 --> 01:15:02,220\nyou have to replicate the entire\ndomain partition between those.\n\n1667\n01:15:02,220 --> 01:15:06,400\nSo wouldn't it be nice, if we had\nsome way to manipulate replication.\n\n1668\n01:15:06,400 --> 01:15:08,690\nWe want that, if we have a single domain.\n\n1669\n01:15:08,690 --> 01:15:10,770\nAnd we want that if we\nhave multiple domains too.\n\n1670\n01:15:10,770 --> 01:15:14,365\nThere's plenty of times where you want to\ncontrol replication between your systems.\n\n1671\n01:15:14,365 --> 01:15:15,000\n>> Mm-hm.\n\n1672\n01:15:15,000 --> 01:15:18,100\n>> And the way we do that in the Active\nDirectory is through a utility called\n\n1673\n01:15:18,100 --> 01:15:20,520\nActive Directory Sites and Services.\n\n1674\n01:15:20,520 --> 01:15:21,320\n>> Right.\n\n1675\n01:15:21,320 --> 01:15:24,870\n>> Now, Mike, you mentioned a couple of\nthings earlier that I don't know if we\n\n1676\n01:15:24,870 --> 01:15:27,240\ncovered them in another episode or not,\n>> Okay.\n\n1677\n01:15:27,240 --> 01:15:29,800\n>> But, when you install\nan Active Directory domain control,\n\n1678\n01:15:29,800 --> 01:15:33,300\nwhen you run DC Promo,\nthere's two little services that fire up.\n\n1679\n01:15:33,300 --> 01:15:35,760\nRight.\n>> One is called the KCC,\n\n1680\n01:15:35,760 --> 01:15:38,220\nthe knowledge consistency checker.\n\n1681\n01:15:38,220 --> 01:15:41,500\nI know for a fact you mentioned that\none in the beginning of the episode.\n\n1682\n01:15:41,500 --> 01:15:45,070\nThe KCC is running, and it's what allows\nthe domain controllers to check and\n\n1683\n01:15:45,070 --> 01:15:49,030\nsee whether or not they can successfully\nreplicate between each other.\n\n1684\n01:15:49,030 --> 01:15:52,900\nAnd whether their knowledge is\nconsistent with the knowledge of other\n\n1685\n01:15:52,900 --> 01:15:53,660\ndomain controllers.\n\n1686\n01:15:53,660 --> 01:15:55,190\nDo we all see the same thing?\n\n1687\n01:15:55,190 --> 01:15:56,256\nAre we convergent?\n\n1688\n01:15:56,256 --> 01:15:59,460\n>> We've talked about like how\nlong it takes to replicate.\n\n1689\n01:15:59,460 --> 01:16:02,770\nAnd he's the one that makes sure there's\nno more than three hops between any two\n\n1690\n01:16:02,770 --> 01:16:05,870\ndomain controllers and that that\nconvergence is happening quickly.\n\n1691\n01:16:05,870 --> 01:16:10,350\nIf we add new or remove domain\ncontrollers, he rearranges those links and\n\n1692\n01:16:10,350 --> 01:16:13,635\nhe makes sure we maintain\nthat consistency.\n\n1693\n01:16:13,635 --> 01:16:18,510\n>> And what the KCC is trying to\nset up is, is really pretty simple.\n\n1694\n01:16:18,510 --> 01:16:21,760\nIt's trying to set up where\nno one domain controller\n\n1695\n01:16:21,760 --> 01:16:25,000\nhas to replicate with any more\nthan two other domain controllers.\n\n1696\n01:16:25,000 --> 01:16:26,310\n>> So it's trying,\n\n1697\n01:16:26,310 --> 01:16:27,690\nit doesn't always succeed\n>> Right\n\n1698\n01:16:27,690 --> 01:16:29,120\n>> But, it's trying to set it up where\n\n1699\n01:16:29,120 --> 01:16:32,410\nas a DC, you only have to replicate\nwith two other people, right?\n\n1700\n01:16:32,410 --> 01:16:36,030\nYou might have a 100 domain controllers,\nbut it creates this like mesh,\n\n1701\n01:16:36,030 --> 01:16:37,440\nlike living mesh, right?\n\n1702\n01:16:37,440 --> 01:16:41,340\nWhere each DC is replicating the two other\npeople, and they replicate the two more,\n\n1703\n01:16:41,340 --> 01:16:44,120\nand they replicate, and\nit kind of branches out exponentially.\n\n1704\n01:16:44,120 --> 01:16:45,300\nI think that's the right word.\n\n1705\n01:16:45,300 --> 01:16:46,840\n>> And it works out really well,\nbecause in the end,\n\n1706\n01:16:46,840 --> 01:16:49,480\nif we're talkin about what five\nsecond change notification,\n\n1707\n01:16:49,480 --> 01:16:53,060\n15 second notification delay in the end.\n\n1708\n01:16:53,060 --> 01:16:55,940\nA change within your domain,\nassuming we're just one site,\n\n1709\n01:16:55,940 --> 01:16:57,120\nwhich is where we're headed.\n\n1710\n01:16:57,120 --> 01:16:58,240\nIt should be within minutes.\n\n1711\n01:16:58,240 --> 01:16:59,470\nA minute and a half, two minutes.\n\n1712\n01:16:59,470 --> 01:17:01,110\nEverybody knows about\na change that you made.\n\n1713\n01:17:01,110 --> 01:17:02,630\nYou made a new user account.\n\n1714\n01:17:02,630 --> 01:17:06,030\nThat person can logon and talk to\nany domain controller in the domain.\n\n1715\n01:17:06,030 --> 01:17:07,700\nAnd be successful, within two minutes.\n\n1716\n01:17:07,700 --> 01:17:08,600\n>> Absolutely.\n\n1717\n01:17:08,600 --> 01:17:10,520\nNow you can set this up manually,\nif you want.\n\n1718\n01:17:10,520 --> 01:17:11,240\nIt'll let you.\n\n1719\n01:17:11,240 --> 01:17:13,980\nRight?\nIt's a terrible idea, but you can do it.\n\n1720\n01:17:13,980 --> 01:17:16,690\nThe problem is active directory\nenvironments can get very complex,\n\n1721\n01:17:16,690 --> 01:17:19,250\nvery fast, and situations change.\n\n1722\n01:17:19,250 --> 01:17:21,170\n>> Right, domain controller goes down.\n\n1723\n01:17:21,170 --> 01:17:21,760\n>> Great example.\n\n1724\n01:17:21,760 --> 01:17:22,340\n>> Something like that.\n\n1725\n01:17:22,340 --> 01:17:23,820\nYou bring him down for\nmaintenance intentionally,\n\n1726\n01:17:23,820 --> 01:17:25,990\nor network connectivity issues.\n\n1727\n01:17:25,990 --> 01:17:27,410\nI still gotta replicate to everybody else.\n\n1728\n01:17:27,410 --> 01:17:29,360\nAnd if he's down,\nwhat happened to his two partners?\n\n1729\n01:17:29,360 --> 01:17:29,890\nAll right.\n\n1730\n01:17:29,890 --> 01:17:31,630\n>> Yep.\nAnd every time you promote a new DC,\n\n1731\n01:17:31,630 --> 01:17:34,210\nare you gonna sit there are recalculate\nyour whole topology and\n\n1732\n01:17:34,210 --> 01:17:35,500\nfigure that stuff out?\n\n1733\n01:17:35,500 --> 01:17:36,675\nNo.\n>> I'm not, but the KCC is.\n\n1734\n01:17:36,675 --> 01:17:39,550\n[LAUGH]\n>> The KCC does a great job of it too.\n\n1735\n01:17:39,550 --> 01:17:41,600\nAnd every instance where\nsomebody tells me,\n\n1736\n01:17:41,600 --> 01:17:43,740\nwell John I had to override\nit in this scenario, right?\n\n1737\n01:17:43,740 --> 01:17:47,310\nI am not exaggerating,\nsometimes we exaggerate.\n\n1738\n01:17:47,310 --> 01:17:51,000\nLiterally, every time somebody has told\nme a scenario where they overrode it,\n\n1739\n01:17:51,000 --> 01:17:55,070\nI was able to show them a problem in\ntheir topology they needed to fix.\n\n1740\n01:17:55,070 --> 01:17:58,280\nAnd once they fixed the topology,\nthe KCC started working properly.\n\n1741\n01:17:58,280 --> 01:18:00,634\nSo if the KCC's is ever\nnot working right for you.\n\n1742\n01:18:00,634 --> 01:18:04,190\nAnd normally it indicates that\nthere's some other underlying problem.\n\n1743\n01:18:04,190 --> 01:18:06,710\n>> Yeah, cuz if you manually\nmake any links, which you can.\n\n1744\n01:18:06,710 --> 01:18:07,840\nIt's not gonna mess with those.\n\n1745\n01:18:07,840 --> 01:18:09,220\nAll right, you know better than I do.\n\n1746\n01:18:09,220 --> 01:18:10,210\nIt's gonna leave them there and\n\n1747\n01:18:10,210 --> 01:18:12,830\ntry to work around what you\ndid the best as best it can.\n\n1748\n01:18:12,830 --> 01:18:16,080\n>> And Microsoft, I read this\nfascinating white paper they did once,\n\n1749\n01:18:16,080 --> 01:18:17,190\non how it works great.\n\n1750\n01:18:17,190 --> 01:18:20,180\nThey tested it up to\n1,500 domain controllers.\n\n1751\n01:18:20,180 --> 01:18:21,250\nAnd that when you get beyond 1,500,\n\n1752\n01:18:21,250 --> 01:18:23,940\nsure there's some scenarios\nwhere it might not do so great.\n\n1753\n01:18:23,940 --> 01:18:27,970\nBut how people have 1,500 domain controls?\n\n1754\n01:18:27,970 --> 01:18:28,870\nI'm not talking about servers.\n\n1755\n01:18:28,870 --> 01:18:29,840\nI'm not talking about work stations.\n\n1756\n01:18:29,840 --> 01:18:31,320\nI'm talking about domain controls, 1500.\n\n1757\n01:18:31,320 --> 01:18:32,430\n>> That's a lot of domain controls.\n\n1758\n01:18:32,430 --> 01:18:35,525\n>> It is a lot and most environments\nare not going to have that.\n\n1759\n01:18:35,525 --> 01:18:37,050\nThey're not even gonna come close.\n\n1760\n01:18:37,050 --> 01:18:39,220\n>> There's one scenario\nI think that I found and\n\n1761\n01:18:39,220 --> 01:18:41,380\nyou might be able to prove\nme wrong on this one,\n\n1762\n01:18:41,380 --> 01:18:45,110\nthere is one scenario I found that where\nI like to set up some manual links.\n\n1763\n01:18:45,110 --> 01:18:47,020\nAnd that's what you were\ntalking about your FSMO's,\n\n1764\n01:18:47,020 --> 01:18:49,420\nyour flexible single master operations.\n\n1765\n01:18:49,420 --> 01:18:50,850\nNormally you have a back up and\n\n1766\n01:18:50,850 --> 01:18:52,620\nthere's nothing you do in\nthe system that says, all right,\n\n1767\n01:18:52,620 --> 01:18:56,030\nthis is going to be my infrastructure\nmaster if this guy goes down.\n\n1768\n01:18:56,030 --> 01:18:58,970\nThere's nothing to do internally or\nanything like that, but in your mind,\n\n1769\n01:18:58,970 --> 01:18:59,970\nyou should have a plan.\n\n1770\n01:18:59,970 --> 01:19:03,180\nIf that machine fails,\nI know it's my scema master,\n\n1771\n01:19:03,180 --> 01:19:06,170\nmy domain master and I'm going to want\nto get those onto another machine.\n\n1772\n01:19:06,170 --> 01:19:09,620\nAnd so, we'll manually create a\nreplication link between the current role\n\n1773\n01:19:09,620 --> 01:19:12,010\nholder and my planned role holder.\n\n1774\n01:19:12,010 --> 01:19:14,700\nThat way those guys are as\nconsistent as possible.\n\n1775\n01:19:14,700 --> 01:19:17,810\nAnd if that guy ever fails and I flop\nthat role over, I seize the role and\n\n1776\n01:19:17,810 --> 01:19:19,155\nthere's very little loss there.\n\n1777\n01:19:19,155 --> 01:19:19,680\n>> Mm-hm.\nWell,\n\n1778\n01:19:19,680 --> 01:19:21,150\nnow my argument there,\n>> Uh-huh.\n\n1779\n01:19:21,150 --> 01:19:22,840\n>> Would be you certainly could do that,\n>> Right.\n\n1780\n01:19:22,840 --> 01:19:24,000\n>> But in theory,\n\n1781\n01:19:24,000 --> 01:19:27,320\nif your replication was working right, you\nshouldn't need a direct link like that.\n\n1782\n01:19:27,320 --> 01:19:27,890\n>> They should all be, yes.\n\n1783\n01:19:27,890 --> 01:19:28,570\nYep.\n>> So,\n\n1784\n01:19:28,570 --> 01:19:30,270\n>> So it kinda goes back to that argument.\n\n1785\n01:19:30,270 --> 01:19:31,860\nAnd sure, you can go either route.\n\n1786\n01:19:31,860 --> 01:19:35,520\nAnd if you do like some manual entries,\nthe KCC's still running.\n\n1787\n01:19:35,520 --> 01:19:38,290\nIt'll still plan around\nyour manual entries.\n\n1788\n01:19:38,290 --> 01:19:40,579\nSo, it's not too bad.\nBut if you create enough of those manual\n\n1789\n01:19:40,579 --> 01:19:44,712\nentries, you could create a deadlock\nscenario where Some servers just can't\n\n1790\n01:19:44,712 --> 01:19:46,354\nreplicate so just be careful.\n\n1791\n01:19:46,354 --> 01:19:51,386\nYou need to know more than the KCC does\nif your going to be overriding it and\n\n1792\n01:19:51,386 --> 01:19:52,880\nmost people don't.\n\n1793\n01:19:52,880 --> 01:19:55,500\n>> Exactly, so let it do it,\nthat's what its there for right?\n\n1794\n01:19:55,500 --> 01:19:57,080\n>> The KCC, that's one piece.\n\n1795\n01:19:57,080 --> 01:20:00,010\nIt's what's building these replication\nconnections between our servers and\n\n1796\n01:20:00,010 --> 01:20:03,740\nif we just want to let it run, great,\nit's running right now on these DC's.\n\n1797\n01:20:03,740 --> 01:20:05,190\nI have no idea what the topology is.\n\n1798\n01:20:06,340 --> 01:20:09,790\nIt's working in combination\nwith another service.\n\n1799\n01:20:09,790 --> 01:20:16,180\nA service called the ISTG or\nInter-Site Topology Generator, right.\n\n1800\n01:20:16,180 --> 01:20:18,760\nBy default,\nwhen we add domain controllers,\n\n1801\n01:20:18,760 --> 01:20:23,180\nthey're all treated as being in\nthe same geographic location, and\n\n1802\n01:20:23,180 --> 01:20:26,200\nin that scenario the ISTG\ndoesn't do anything.\n\n1803\n01:20:26,200 --> 01:20:29,190\nIt literally stops itself, it doesn't run.\n\n1804\n01:20:29,190 --> 01:20:32,238\nBut if you have two geographic locations,\n\n1805\n01:20:32,238 --> 01:20:37,040\nthen the ISTG kicks in and\nit starts to do some really neat stuff.\n\n1806\n01:20:38,450 --> 01:20:43,300\nIt says hey, you might have five\nservers in Orlando, Florida.\n\n1807\n01:20:43,300 --> 01:20:46,070\n>> Right.\n>> And you might have five more servers in\n\n1808\n01:20:46,070 --> 01:20:46,685\nParis, France.\n\n1809\n01:20:46,685 --> 01:20:47,530\n>> Mm-hm.\n\n1810\n01:20:47,530 --> 01:20:51,890\n>> Well, do you need those five servers\nto replicate between the two continents?\n\n1811\n01:20:51,890 --> 01:20:52,900\n>> I really don't, do I?\n\n1812\n01:20:52,900 --> 01:20:53,500\n>> You could.\n\n1813\n01:20:53,500 --> 01:20:57,370\n>> I just need to give one,\nget one person to send that change over.\n\n1814\n01:20:57,370 --> 01:21:00,530\nAnd then let them do their really\nfast replication on the other side.\n\n1815\n01:21:00,530 --> 01:21:02,910\n>> Yeah and\nit's much more efficient to go that way.\n\n1816\n01:21:02,910 --> 01:21:04,490\nSo the ISTG looks at that.\n\n1817\n01:21:04,490 --> 01:21:06,780\nAnd it says you've got two\ndifferent geographic locations.\n\n1818\n01:21:06,780 --> 01:21:08,300\nLet's select what's called a bridge head.\n\n1819\n01:21:08,300 --> 01:21:08,840\n>> Right.\n\n1820\n01:21:08,840 --> 01:21:11,395\n>> And the bridge head will be one server\n\n1821\n01:21:11,395 --> 01:21:14,915\nthat communicates across that boundary\nbetween those geographical locations.\n\n1822\n01:21:14,915 --> 01:21:16,645\nNow, within the geographical locations,\n\n1823\n01:21:16,645 --> 01:21:20,125\nyou still have all the normal double\nlength that the KCC creates, but\n\n1824\n01:21:20,125 --> 01:21:23,430\nthe ISTG is working between\nthe geographical locations.\n\n1825\n01:21:23,430 --> 01:21:28,690\nThe problem is, how does Windows know that\nyou have multiple geographical locations?\n\n1826\n01:21:28,690 --> 01:21:29,470\nIt doesn't.\n\n1827\n01:21:29,470 --> 01:21:33,930\nThere is no way that it can tell that\nyou have multiple geographic locations.\n\n1828\n01:21:33,930 --> 01:21:35,340\nWe have to tell it.\n\n1829\n01:21:36,380 --> 01:21:39,760\nAnd that's how we control replication,\nthat's how we can get in there and\n\n1830\n01:21:39,760 --> 01:21:43,460\nmess with it by what are called\nActive Directory Sites.\n\n1831\n01:21:43,460 --> 01:21:47,860\nIf you have multiple domains, this is\nwhere your brain starts to go crazy.\n\n1832\n01:21:47,860 --> 01:21:48,580\n>> I know right.\n\n1833\n01:21:48,580 --> 01:21:54,370\n>> Is, you can have more than one\ndomain in the same geographic location.\n\n1834\n01:21:54,370 --> 01:21:55,230\n>> Right.\n\n1835\n01:21:55,230 --> 01:21:59,020\n>> You can also have more than one\ngeographic location in a domain, right?\n\n1836\n01:21:59,020 --> 01:22:01,180\nSo I might have domain one.\n\n1837\n01:22:01,180 --> 01:22:06,180\nAnd I might have computers for domain one\nin Orlando, Florida and Paris, France.\n\n1838\n01:22:06,180 --> 01:22:08,990\nRight?\nI might have one domain spread across\n\n1839\n01:22:08,990 --> 01:22:09,620\nthose two cities.\n\n1840\n01:22:09,620 --> 01:22:10,870\n>> Right.\n>> Right?\n\n1841\n01:22:10,870 --> 01:22:15,130\nOr I might have domain one\nin Orlando Florida, and\n\n1842\n01:22:15,130 --> 01:22:17,130\nDomain two in Orlando Florida.\n\n1843\n01:22:17,130 --> 01:22:21,590\nSo the boundaries are very gray,\nvery blurry lines here.\n\n1844\n01:22:21,590 --> 01:22:24,830\nSo that's why Windows is going to\nneed some instruction from us,\n\n1845\n01:22:24,830 --> 01:22:28,390\nto coach it as to what is found where,\nall right.\n\n1846\n01:22:28,390 --> 01:22:29,490\nSo let's take a look at how it's done.\n\n1847\n01:22:29,490 --> 01:22:30,570\n>> All right.\n\n1848\n01:22:30,570 --> 01:22:32,510\n>> I'm gonna fire up\none of my DC's here and\n\n1849\n01:22:32,510 --> 01:22:34,220\nit doesn't really matter which one, right-\n>> No.\n\n1850\n01:22:34,220 --> 01:22:35,420\n>> Cuz they should all be the same.\n\n1851\n01:22:35,420 --> 01:22:37,420\n>> Forest level activity, right, yeah.\n\n1852\n01:22:37,420 --> 01:22:41,615\n>> So, I'm gonna go up here into my tools\nand Active Directory Sites and Services.\n\n1853\n01:22:41,615 --> 01:22:42,880\n>> Mm-hm.\n\n1854\n01:22:42,880 --> 01:22:43,850\nAnd we gave up,\n\n1855\n01:22:43,850 --> 01:22:47,590\nas Don was saying at the beginning of\nthis episode, we start out with one site.\n\n1856\n01:22:47,590 --> 01:22:50,100\nIt's called\nthe Default First Site Name site.\n\n1857\n01:22:50,100 --> 01:22:55,600\nAnd every domain controller that\nyou add is gonna be in that site.\n\n1858\n01:22:55,600 --> 01:22:58,190\nAnd if you never have more than one site,\nif\n\n1859\n01:22:58,190 --> 01:23:02,550\nyou just stick with one physical location,\nyou might never open this console, and\n\n1860\n01:23:02,550 --> 01:23:04,920\neverything dumps under that one site,\nand it really doesn't really matter.\n\n1861\n01:23:04,920 --> 01:23:08,210\nBecause you haven't set up any,\nwhat we call, subnet objects and\n\n1862\n01:23:08,210 --> 01:23:10,700\nwe'll kind of go through\nhow we set this up.\n\n1863\n01:23:10,700 --> 01:23:14,480\nBut, once you add that second geographical\nlocation, that's when you're gonna wanna\n\n1864\n01:23:14,480 --> 01:23:17,880\ncome in here and configure this and\nchange those defaults, and add your sites,\n\n1865\n01:23:17,880 --> 01:23:20,100\nand then move your domain\ncontrollers appropriately.\n\n1866\n01:23:20,100 --> 01:23:23,405\n>> Yeah and so what you would do is you\nwould take this Default First Site Name.\n\n1867\n01:23:23,405 --> 01:23:25,340\n>> Mm-hm.\n>> Right it's the dumbest name ever.\n\n1868\n01:23:25,340 --> 01:23:26,498\nDefault First Site Name.\n\n1869\n01:23:26,498 --> 01:23:27,610\n>> It sure is.\n\n1870\n01:23:27,610 --> 01:23:31,660\n>> So there's our first site and if I go\nunder there and look at the servers all of\n\n1871\n01:23:31,660 --> 01:23:34,945\nmy servers are lumped in there and notice,\nI've got three domains represented.\n\n1872\n01:23:34,945 --> 01:23:37,710\n>> Mm-hm.\n>> Domain1, I've got two DCs for it.\n\n1873\n01:23:37,710 --> 01:23:39,730\n>> Right.\n>> Domain2 and Training,\n\n1874\n01:23:39,730 --> 01:23:43,125\nall three domains are present right\nhere in this one geographic location.\n\n1875\n01:23:43,125 --> 01:23:44,270\n>> Mm-hm.\n>> Right.\n\n1876\n01:23:44,270 --> 01:23:51,480\nBut what if I I had servers in Orlando and\nservers in Paris and servers in London.\n\n1877\n01:23:51,480 --> 01:23:52,570\n>> Right.\n>> Right?\n\n1878\n01:23:52,570 --> 01:23:54,450\nI could come through and\nI could create those sites.\n\n1879\n01:23:54,450 --> 01:23:56,470\nNow I'm gonna start here with\nthis one that I've already got.\n\n1880\n01:23:56,470 --> 01:23:57,170\nI'm just gonna rename it.\n\n1881\n01:23:57,170 --> 01:23:57,790\n>> Exactly.\n\n1882\n01:23:57,790 --> 01:23:59,677\n>> So that'd be Orlando\n>> Yeah.\n\n1883\n01:23:59,677 --> 01:24:00,690\n>> Right.\n\n1884\n01:24:00,690 --> 01:24:02,840\nAnd then I can add two more sites.\n\n1885\n01:24:02,840 --> 01:24:04,810\nJust by doing a new site.\n\n1886\n01:24:04,810 --> 01:24:07,540\nAnd I'll create a site called Paris.\n\n1887\n01:24:07,540 --> 01:24:11,690\nAnd we'll talk about these site\nlinks here in just a minute.\n\n1888\n01:24:11,690 --> 01:24:13,800\nAnd we'll create one more for London.\n\n1889\n01:24:17,052 --> 01:24:20,070\nAll right, so I'm just whipping\nup these geographic locations.\n\n1890\n01:24:20,070 --> 01:24:22,890\n>> Right.\n>> So now, I've got my cities.\n\n1891\n01:24:22,890 --> 01:24:24,760\nParis, London, Orlando.\n\n1892\n01:24:24,760 --> 01:24:25,610\nAll right.\n\n1893\n01:24:25,610 --> 01:24:29,590\nAnd all of my domain controllers\nare right here in Orlando.\n\n1894\n01:24:29,590 --> 01:24:30,950\nBecause they're in the same city.\n\n1895\n01:24:30,950 --> 01:24:33,120\nBecause they're in the same\ngeographical location,\n\n1896\n01:24:33,120 --> 01:24:35,710\nthey're replicating between\neach other every five minutes.\n\n1897\n01:24:35,710 --> 01:24:37,540\n>> Yup\n>> Every five minutes they're replicating.\n\n1898\n01:24:37,540 --> 01:24:41,130\nVery, very fast replication and\nthat could be burdensome\n\n1899\n01:24:41,130 --> 01:24:44,180\nif I have a small WAN link or something\nlike that between those locations.\n\n1900\n01:24:45,480 --> 01:24:49,060\nWhen I start to split them\nup into their cities though,\n\n1901\n01:24:49,060 --> 01:24:52,490\nnow I can control the replication\ninterval between the cities.\n\n1902\n01:24:52,490 --> 01:24:55,867\nAnd I can just go through and\nI can say, you know what Domain2, or\n\n1903\n01:24:55,867 --> 01:24:59,590\nDomain1-DC2, maybe that one is in Paris.\n\n1904\n01:24:59,590 --> 01:25:01,630\n>> Right, and you drag and\ndrop them and see.\n\n1905\n01:25:01,630 --> 01:25:03,690\nOr you can right-click and choose Move.\n\n1906\n01:25:03,690 --> 01:25:04,740\nGive me the drag and drop warning.\n\n1907\n01:25:04,740 --> 01:25:07,550\n>> Yeah, it warns you if you drag and\ndrop, cuz it's easier to\n\n1908\n01:25:07,550 --> 01:25:11,700\naccidentally drag and drop,\nthan accidentally right-click, I suppose.\n\n1909\n01:25:11,700 --> 01:25:14,420\n>> And maybe Domain2 is in London.\n\n1910\n01:25:14,420 --> 01:25:16,210\nSo I'll just put that one over there.\n\n1911\n01:25:16,210 --> 01:25:19,070\nBut maybe Training and\nDomain1 are both in Orlando.\n\n1912\n01:25:19,070 --> 01:25:20,520\n>> Right, in our headquarters, yeah.\n\n1913\n01:25:20,520 --> 01:25:22,830\n>> So I can just kinda throw\nthose out there like that.\n\n1914\n01:25:22,830 --> 01:25:25,560\nNow when we look at these,\nthese aren't actually the domains,\n\n1915\n01:25:25,560 --> 01:25:26,860\nthese are the servers themselves.\n\n1916\n01:25:26,860 --> 01:25:29,120\n>> Right.\nSo Doman1-DC1, and\n\n1917\n01:25:29,120 --> 01:25:32,490\nDomain1-DC2, they're both in Domain1.\n\n1918\n01:25:32,490 --> 01:25:37,080\nSo Domain1 is now spanning more\nthan one geographic location.\n\n1919\n01:25:37,080 --> 01:25:39,000\n>> We got an office here in Orlando.\n\n1920\n01:25:39,000 --> 01:25:41,860\nWe've also got an office\nout there in Paris.\n\n1921\n01:25:41,860 --> 01:25:43,830\n>> Versus having two\ndomains in one location.\n\n1922\n01:25:43,830 --> 01:25:47,400\nHere I've got Training and\nDomain1 are both in Orlando.\n\n1923\n01:25:47,400 --> 01:25:49,560\nTwo domains, one location.\n\n1924\n01:25:49,560 --> 01:25:52,410\nNow that doesn't mean that somebody\nin training couldn't login in\n\n1925\n01:25:52,410 --> 01:25:53,280\nParis or London.\n\n1926\n01:25:53,280 --> 01:25:55,260\n>> Right.\n>> We have our trust in place.\n\n1927\n01:25:55,260 --> 01:25:59,385\nIf they sit down in London and\ntry to login, it's gonna try to connect to\n\n1928\n01:25:59,385 --> 01:26:04,080\nDomain2-DC1, and it's gonna say,\nthat's not us, we don't know who you are.\n\n1929\n01:26:04,080 --> 01:26:06,290\nAnd it's gonna go through the Trust Path.\n\n1930\n01:26:06,290 --> 01:26:06,810\nRight?\n\n1931\n01:26:06,810 --> 01:26:09,370\nAnd jump up until it gets\nto the Training DC here.\n\n1932\n01:26:09,370 --> 01:26:13,100\nSo you can still log in in the city,\nit's just gonna be slower, right?\n\n1933\n01:26:13,100 --> 01:26:14,750\nBecause you gotta hit that Trust Path.\n\n1934\n01:26:14,750 --> 01:26:18,930\nIf you have domain controller for your\ndomain in that city, it'll be much faster.\n\n1935\n01:26:18,930 --> 01:26:21,000\nSo that generally what we want.\n\n1936\n01:26:21,000 --> 01:26:22,230\nWe want domain controllers for\n\n1937\n01:26:22,230 --> 01:26:25,210\nthe domains that people use\nin the cities that they use.\n\n1938\n01:26:25,210 --> 01:26:28,130\n>> And it says servers,\njust keep in mind the only thing you see\n\n1939\n01:26:28,130 --> 01:26:29,640\nin this console are your\ndomain controllers.\n\n1940\n01:26:29,640 --> 01:26:32,630\nIt's not concerned with your print\nservers, your file servers or\n\n1941\n01:26:32,630 --> 01:26:33,700\nanything like that.\n\n1942\n01:26:33,700 --> 01:26:37,050\nWe're just dealing with active\ndirectory in our domain controllers.\n\n1943\n01:26:37,050 --> 01:26:41,940\n>> Yep, now I divided these servers up,\nbut really if I were to stop right now.\n\n1944\n01:26:41,940 --> 01:26:43,290\nI haven't done anything, right?\n\n1945\n01:26:43,290 --> 01:26:44,550\nI haven't actually achieved anything.\n\n1946\n01:26:44,550 --> 01:26:47,040\n>> It doesn't know what Paris is,\nor what London is, right?\n\n1947\n01:26:47,040 --> 01:26:49,070\nWe gotta define that somehow.\n\n1948\n01:26:49,070 --> 01:26:52,540\n>> And the best way to define\nit is with IP addresses.\n\n1949\n01:26:52,540 --> 01:26:57,160\nWe typically, almost always, have\ndifferent IP subnets in different cities.\n\n1950\n01:26:57,160 --> 01:27:01,240\nAnd so we come up and\nwe define the IP subnets that we use and\n\n1951\n01:27:01,240 --> 01:27:03,310\nthen we attach them to the sites.\n\n1952\n01:27:03,310 --> 01:27:05,300\nAnd so now Windows just has\nto look at your IP address.\n\n1953\n01:27:05,300 --> 01:27:08,090\nAnd it says,\noh you've got a Parisian IP address or\n\n1954\n01:27:08,090 --> 01:27:10,680\nyou've got a Orlando IP address.\n\n1955\n01:27:10,680 --> 01:27:12,570\nAnd so it takes you and\ngives you the right one and\n\n1956\n01:27:12,570 --> 01:27:13,990\nsticks you in the right city.\n\n1957\n01:27:13,990 --> 01:27:18,440\nSo, you hit a domain controller\nthat's geographically close to you.\n\n1958\n01:27:18,440 --> 01:27:21,980\nUnless it's down or non-existent, and\nthen you jump over to another site.\n\n1959\n01:27:21,980 --> 01:27:23,650\n>> That's the only way it happens,\n\n1960\n01:27:23,650 --> 01:27:26,085\nso your network has to be layed-out\nproperly to support this.\n\n1961\n01:27:26,085 --> 01:27:31,010\nIf your subnet crosses your boundaries and\ngeographically usually is\n\n1962\n01:27:31,010 --> 01:27:34,830\nwhat we're talking about, then it has\nno way to tell it apart, if my subnet,\n\n1963\n01:27:34,830 --> 01:27:40,650\nif I had computers here in our Orlando\noffice and I had computers in the Paris\n\n1964\n01:27:40,650 --> 01:27:43,410\noffice that were part of the same subnet,\nit could not tell the difference.\n\n1965\n01:27:43,410 --> 01:27:44,468\nIt's just looking at that subnet address.\n\n1966\n01:27:44,468 --> 01:27:46,722\n>> But\nthat's also bad networking practice, so\n\n1967\n01:27:46,722 --> 01:27:49,568\nif your doing that your not\ndesigning an optimal network.\n\n1968\n01:27:49,568 --> 01:27:53,033\nYou normally want separate subnets because\nyou don't want broadcasts going between\n\n1969\n01:27:53,033 --> 01:27:53,570\nthe cities.\n\n1970\n01:27:53,570 --> 01:27:55,970\nSo hopefully you're not doing that.\n\n1971\n01:27:55,970 --> 01:27:58,240\n>> It could be a scenario if\nyou get a metropolitan or\n\n1972\n01:27:58,240 --> 01:27:59,730\nan associated campus area network.\n\n1973\n01:27:59,730 --> 01:28:03,960\nWhere you've got four or five buildings\nand they're connected with fiber.\n\n1974\n01:28:03,960 --> 01:28:06,270\nSo a nice fast connection\nbetween the buildings but\n\n1975\n01:28:06,270 --> 01:28:07,920\nyou've got domain controllers\nin each building.\n\n1976\n01:28:07,920 --> 01:28:11,036\nAnd you want the people in building two\nto log on with the domain controller in\n\n1977\n01:28:11,036 --> 01:28:11,680\nbuilding two.\n\n1978\n01:28:11,680 --> 01:28:14,491\nI could still set up each building\nas a site even though it was\n\n1979\n01:28:14,491 --> 01:28:15,905\nthe same geographical area.\n\n1980\n01:28:15,905 --> 01:28:19,027\nAnd then I'd really want to make sure\nI had my subnets laid out properly or\n\n1981\n01:28:19,027 --> 01:28:20,670\nI could not tell the difference.\n\n1982\n01:28:20,670 --> 01:28:21,400\n>> Yeah, great example.\n\n1983\n01:28:22,440 --> 01:28:26,433\nSo what I'm gonna do is I'm gonna say\nyou know in Orlando maybe we have one\n\n1984\n01:28:26,433 --> 01:28:28,867\n192.168.0.0/24, right?\n\n1985\n01:28:28,867 --> 01:28:30,247\nSo it's just a Class C.\n\n1986\n01:28:30,247 --> 01:28:32,303\nThat's gonna be in Orlando, all right?\n\n1987\n01:28:32,303 --> 01:28:34,810\nAnd then I'll create another subnet.\n\n1988\n01:28:35,920 --> 01:28:40,850\nAnd maybe this one will be 192.168.1.0/24,\nand that'll be in London.\n\n1989\n01:28:42,520 --> 01:28:44,620\nAnd then I just keep going.\n\n1990\n01:28:44,620 --> 01:28:47,960\nI list each of my subnets and\nwhere they reside.\n\n1991\n01:28:47,960 --> 01:28:51,790\n>> And as he's doing that, keep in mind\na subnet can only be a part of one site,\n\n1992\n01:28:51,790 --> 01:28:53,960\nbecause that's where we're\nusing to find the boundaries.\n\n1993\n01:28:53,960 --> 01:28:55,910\nA site can have more than one subnet.\n\n1994\n01:28:55,910 --> 01:28:58,480\nMaybe in that London office it's\na bigger office, so I've got two or\n\n1995\n01:28:58,480 --> 01:29:00,720\nthree Class C subnets there.\n\n1996\n01:29:00,720 --> 01:29:03,740\nSo you can continue to add\nsubnets to the sites, but\n\n1997\n01:29:03,740 --> 01:29:05,900\na subnet can only be a part of one site.\n\n1998\n01:29:06,960 --> 01:29:10,780\n>> So here I've got these three and you\ncould have more than one subnet in a site,\n\n1999\n01:29:10,780 --> 01:29:11,770\nif I needed to.\n\n2000\n01:29:11,770 --> 01:29:13,600\nMaybe Paris was really big and so\n\n2001\n01:29:13,600 --> 01:29:18,215\nmaybe I didn't do a /24 there\nmaybe I did a /23 or something.\n\n2002\n01:29:18,215 --> 01:29:19,995\nYou could do that, but\nyou could have non contiguous ones also.\n\n2003\n01:29:19,995 --> 01:29:24,911\n>> Oh yeah, you could do\n192.168.3.0/24 and a 10.1.1 whatever.\n\n2004\n01:29:24,911 --> 01:29:29,826\n>> Yeah, in fact we've got here\nin our studio 10.1.230.0/24 and\n\n2005\n01:29:29,826 --> 01:29:34,748\nso we could come in and say that's in\nOrlando although we're not in Orlando.\n\n2006\n01:29:34,748 --> 01:29:38,412\nSo now I've got more than\none subnet in Orlando.\n\n2007\n01:29:38,412 --> 01:29:40,662\nSo we've got them both\nright there attached.\n\n2008\n01:29:40,662 --> 01:29:43,122\nSo you just go through and\nyou list them and put them in.\n\n2009\n01:29:43,122 --> 01:29:44,902\nThat's how your system's gonna know.\n\n2010\n01:29:44,902 --> 01:29:48,212\nWhen your system boots up and it says\nI need to find a domain controller.\n\n2011\n01:29:48,212 --> 01:29:51,920\nIt does a DNS lookup for\nthe SRV records for the domain controller.\n\n2012\n01:29:51,920 --> 01:29:54,870\nAnd then it looks at your IP address and\n\n2013\n01:29:54,870 --> 01:29:57,280\nit finds the site that\nmatches that IP address.\n\n2014\n01:29:57,280 --> 01:30:00,330\nAnd it finds a DC in that site.\n\n2015\n01:30:00,330 --> 01:30:01,163\nIf we take a look-.\n\n2016\n01:30:01,163 --> 01:30:01,860\nOh, sorry Mike.\n\n2017\n01:30:01,860 --> 01:30:04,640\n>> I was going to say, let's just break\nthat down just a little bit further.\n\n2018\n01:30:04,640 --> 01:30:09,589\nBecause I know they like\nquestions about this.\n\n2019\n01:30:09,589 --> 01:30:12,374\nThe two reasons we do sites,\nas Don mentioned.\n\n2020\n01:30:12,374 --> 01:30:17,853\nOne is to control replication because\nintrasite replication occurs frequently,\n\n2021\n01:30:17,853 --> 01:30:22,520\nassumes a high speed reliable network,\nit's uncompressed.\n\n2022\n01:30:22,520 --> 01:30:27,610\nWhereas intersite replication assumes\na high cost, unreliable network,\n\n2023\n01:30:27,610 --> 01:30:29,950\nit is able to compress it if we needed to.\n\n2024\n01:30:29,950 --> 01:30:33,100\nSo the first reason we set up sites\nis to control that replication.\n\n2025\n01:30:33,100 --> 01:30:37,010\nBecause I can control how often,\nby default between sites,\n\n2026\n01:30:37,010 --> 01:30:40,940\nwe're talking three hours, or\n180 minutes is the default.\n\n2027\n01:30:40,940 --> 01:30:43,731\nI can change that all the way down\nto 15 minutes, if I choose to do so.\n\n2028\n01:30:43,731 --> 01:30:47,603\nThere's no change notification.\n\n2029\n01:30:47,603 --> 01:30:50,320\nWithin sites, change notification occurs.\n\n2030\n01:30:50,320 --> 01:30:53,410\nSo as soon as a change occurs,\nhe notifies his replication partner.\n\n2031\n01:30:53,410 --> 01:30:54,500\nAnd that's why it's so fast,\n\n2032\n01:30:54,500 --> 01:30:57,990\ncuz as soon as he gets notified,\nhe requests that replication.\n\n2033\n01:30:57,990 --> 01:31:00,110\nBetween sites there is\nno change notification.\n\n2034\n01:31:00,110 --> 01:31:03,510\nSo a change occurs in London,\nmy computers in,\n\n2035\n01:31:03,510 --> 01:31:06,460\nmy domain controllers over here in Orlando\nare not gonna know about that change\n\n2036\n01:31:06,460 --> 01:31:09,830\nuntil they poll, and to say,\nhave there been any changes?\n\n2037\n01:31:09,830 --> 01:31:12,420\nAnd that by default is\ngonna occur in 180 minutes.\n\n2038\n01:31:12,420 --> 01:31:13,911\nBut I can again drop that down to 15.\n\n2039\n01:31:13,911 --> 01:31:16,831\nThe other reason we create them\nis that service localization.\n\n2040\n01:31:16,831 --> 01:31:21,840\nBecause if I go to log on here in the\nOrlando office I would like to talk to it.\n\n2041\n01:31:21,840 --> 01:31:24,670\nIt makes more sense to talk to the domain\ncontrol its right here on the same\n\n2042\n01:31:24,670 --> 01:31:25,240\nland as me.\n\n2043\n01:31:25,240 --> 01:31:28,710\nWhy wait for my traffic to go all\nthe way to Paris and back just for\n\n2044\n01:31:28,710 --> 01:31:30,910\nme to authenticate when there\nis a domain control here.\n\n2045\n01:31:30,910 --> 01:31:32,740\nProblem is, the clients aren't that smart.\n\n2046\n01:31:32,740 --> 01:31:34,570\nThey don't know what site there at.\n\n2047\n01:31:34,570 --> 01:31:37,470\nSo what's gonna happen is if I sit\nat my computer and go to logon, and\n\n2048\n01:31:37,470 --> 01:31:41,710\nhe's gonna query DNS and say hey,\nI need a Kerberos server.\n\n2049\n01:31:41,710 --> 01:31:44,980\nDNS is then gonna retrieve\na list of domain controllers,\n\n2050\n01:31:44,980 --> 01:31:46,540\nand I'm just gonna take\nthe first one on the list.\n\n2051\n01:31:46,540 --> 01:31:50,270\nThe first one that replies to a LDAP\nping so I know he's up and running and\n\n2052\n01:31:50,270 --> 01:31:52,000\nI'm gonna attempt to log on.\n\n2053\n01:31:52,000 --> 01:31:56,198\nIf it's not in my site, if I happen to\nconnect to a domain controller in Paris,\n\n2054\n01:31:56,198 --> 01:32:00,590\nthat domain controller over there is going\nto, he's gonna send a message back and\n\n2055\n01:32:00,590 --> 01:32:01,442\nsay hey buddy.\n\n2056\n01:32:01,442 --> 01:32:03,513\n>> [LAUGH]\n>> You're not in my site,\n\n2057\n01:32:03,513 --> 01:32:05,710\nyou're actually in the Orlando site.\n\n2058\n01:32:05,710 --> 01:32:08,550\nWhy don't you try to logon with\nthe domain controller there?\n\n2059\n01:32:08,550 --> 01:32:12,780\nMy client will then re-query DNS and\nsay hey, I need to log on,\n\n2060\n01:32:12,780 --> 01:32:14,010\nI need a Kerbero Server.\n\n2061\n01:32:14,010 --> 01:32:18,900\nBy the way, I'm in this Orlando site,\nand then DNS is gonna return a list of\n\n2062\n01:32:18,900 --> 01:32:21,670\njust the domain controllers that\nare gonna be on the Orlando site.\n\n2063\n01:32:21,670 --> 01:32:24,550\nNow then what my client does is,\nhe creates what's called an affinity.\n\n2064\n01:32:24,550 --> 01:32:26,320\nHe's gonna end his registry,\n\n2065\n01:32:26,320 --> 01:32:29,130\nremember the fact that he's\nnow part of the Orlando site.\n\n2066\n01:32:29,130 --> 01:32:32,630\nAnd then from then on,\nhe'll include that in his query.\n\n2067\n01:32:32,630 --> 01:32:36,310\nIf I take my laptop with me,\nand I travel out to Paris.\n\n2068\n01:32:36,310 --> 01:32:37,790\nIt's gonna happen all over again.\n\n2069\n01:32:37,790 --> 01:32:42,310\nI'm gonna get to Paris, I'm gotta get\nan IP address from the Paris location.\n\n2070\n01:32:42,310 --> 01:32:44,530\nBut when I go to log on,\nI'm gonna look at that affinity.\n\n2071\n01:32:44,530 --> 01:32:46,280\nAnd I'm gonna go wait,\nI'm a part of the Orlando site.\n\n2072\n01:32:46,280 --> 01:32:50,330\nAnd I'm gonna query DNS, going to give me\na list of domain controllers in Orlando.\n\n2073\n01:32:50,330 --> 01:32:51,830\nAnd I'm going to talk\nto the guy in Orlando.\n\n2074\n01:32:51,830 --> 01:32:54,820\nAnd he's going to say hey buddy,\nyou're not in my site anymore.\n\n2075\n01:32:54,820 --> 01:32:57,920\nYou're actually in the Paris site,\nwhy don't you talk to them.\n\n2076\n01:32:57,920 --> 01:33:01,610\nI'll re-query DNS, so\n\n2077\n01:33:01,610 --> 01:33:04,430\nI can get a list of domain controllers\nthat are in the Paris office.\n\n2078\n01:33:04,430 --> 01:33:06,010\nAnd I'll update my affinity.\n\n2079\n01:33:06,010 --> 01:33:07,540\nAnd now I'll remember I'm in Paris,\n\n2080\n01:33:07,540 --> 01:33:10,200\nwhen I travel home it has\nto happen all over again.\n\n2081\n01:33:10,200 --> 01:33:13,080\nSo the clients aren't that bright when\nit comes it, it's really the domain\n\n2082\n01:33:13,080 --> 01:33:15,918\ncontrollers that are looking at that\nincoming authentication request and\n\n2083\n01:33:15,918 --> 01:33:17,377\nsaying, wait you're not in my site.\n\n2084\n01:33:17,377 --> 01:33:21,713\n>> Yeah, and all this stuff is happening\nin the background as we set this up.\n\n2085\n01:33:21,713 --> 01:33:23,890\nSo I added the sub nets.\n\n2086\n01:33:23,890 --> 01:33:26,280\nIf I jump back over here to DNS.\n\n2087\n01:33:26,280 --> 01:33:30,650\nAnd I drill into the SRV records for\n_sites.\n\n2088\n01:33:30,650 --> 01:33:32,930\nSee how it's created London,\nOrlando, Paris.\n\n2089\n01:33:32,930 --> 01:33:35,310\n>> Nice.\n>> And if I go into Orlando I can see it's\n\n2090\n01:33:35,310 --> 01:33:41,040\ngot TCP and under there I've got\ndomain1-dc1 and training-dc1.\n\n2091\n01:33:41,040 --> 01:33:44,920\nSo it's already updating these DNS\nrecords to reflect what we're putting in.\n\n2092\n01:33:44,920 --> 01:33:48,150\nGoing into Paris, there's domain1-dc2.\n\n2093\n01:33:48,150 --> 01:33:51,630\nAnd going into London there's domain2-dc1.\n\n2094\n01:33:51,630 --> 01:33:55,730\nSo it's already updating that\ninformation as we make these changes.\n\n2095\n01:33:55,730 --> 01:33:56,850\n>> Absolutely, Absolutely.\n\n2096\n01:33:56,850 --> 01:33:59,370\nAnd Active Directory is not the only thing\nthat can take advantage of this, right?\n\n2097\n01:33:59,370 --> 01:34:01,380\nI mean Exchange is site aware.\n\n2098\n01:34:01,380 --> 01:34:02,990\nWhen you go to check your mailbox,\n\n2099\n01:34:02,990 --> 01:34:06,570\nwhy not check with the mailbox server\nthat's in the same location as you?\n\n2100\n01:34:06,570 --> 01:34:07,680\nDFS is site aware and\n\n2101\n01:34:07,680 --> 01:34:10,950\nthere's some other things that can take\nadvantage of this once we get it set up.\n\n2102\n01:34:10,950 --> 01:34:12,130\n>> Yeah, absolutely.\n\n2103\n01:34:12,130 --> 01:34:15,490\nNow Mike mentioned that we can adjust\nthe timers in between the sites, and\n\n2104\n01:34:15,490 --> 01:34:16,390\nthat's done pretty easily.\n\n2105\n01:34:16,390 --> 01:34:19,080\nAnd it's actually part of the thing\nthat I skipped over a moment ago.\n\n2106\n01:34:19,080 --> 01:34:22,640\nWhen we moved the servers into the sites,\nit asked a little bit,\n\n2107\n01:34:22,640 --> 01:34:25,110\nor when I created the sites, asked\na little bit of how I wanted to connect.\n\n2108\n01:34:25,110 --> 01:34:27,870\nAnd I chose something that was,\nwell it's right here.\n\n2109\n01:34:27,870 --> 01:34:32,280\nWhich was the default IP site link,\nthis guy right here.\n\n2110\n01:34:32,280 --> 01:34:35,680\nIn between the sites,\nyou have what are called site links and\n\n2111\n01:34:35,680 --> 01:34:38,273\nthere's two forms, IP and SMTP\n>> Not really.\n\n2112\n01:34:38,273 --> 01:34:39,169\n[LAUGH]\n>> [LAUGH] Yeah, not really.\n\n2113\n01:34:39,169 --> 01:34:43,984\nYou almost always use IP if\nyou have a remote location and\n\n2114\n01:34:43,984 --> 01:34:46,655\nyou've got a normal WAN link.\n\n2115\n01:34:46,655 --> 01:34:50,353\nIt's up 24-7, you communicate,\nand you're in business.\n\n2116\n01:34:50,353 --> 01:34:52,520\nSo you use the IP site link.\n\n2117\n01:34:52,520 --> 01:34:57,800\nYou replicate using TCP/IP's like normal,\nbut if you've got a remote location\n\n2118\n01:34:57,800 --> 01:35:03,200\nthat is on dial up or ISDN,\nsome line that's not up all the time.\n\n2119\n01:35:03,200 --> 01:35:07,100\nYou can use SMTP, it'll actually\nsend the replication as an email.\n\n2120\n01:35:07,100 --> 01:35:09,318\nNow you might ask yourself\nwhy would I do that?\n\n2121\n01:35:09,318 --> 01:35:15,291\nAnd the reason is if the link is down,\nyou can queue the changes.\n\n2122\n01:35:15,291 --> 01:35:17,276\nYou can just pile them up like email.\n\n2123\n01:35:17,276 --> 01:35:19,302\n>> Store them forward and\nthat's the great thing about SMTP, right?\n\n2124\n01:35:19,302 --> 01:35:22,800\n>> And then when the line does come up\nthe other side can get all these emails\n\n2125\n01:35:22,800 --> 01:35:24,669\nbasically and process the changes and\n\n2126\n01:35:24,669 --> 01:35:27,040\noff it goes\n>> So if you're on dial up or\n\n2127\n01:35:27,040 --> 01:35:31,560\nsome kinda intermittent connection,\nthe SMTP site link is there for you.\n\n2128\n01:35:31,560 --> 01:35:35,120\nNotice there isn't one created by\ndefault cuz nobody uses it anymore,\n\n2129\n01:35:35,120 --> 01:35:35,620\nbut it is there.\n\n2130\n01:35:35,620 --> 01:35:39,690\n>> And another big caveat of the SMTP,\ndid I say that right?\n\n2131\n01:35:39,690 --> 01:35:42,370\nIt can't replicate the domain partition.\n\n2132\n01:35:42,370 --> 01:35:43,520\nSo if they're in the same domain,\n\n2133\n01:35:43,520 --> 01:35:46,570\nif you get two different sites\nthat are in different domains.\n\n2134\n01:35:46,570 --> 01:35:50,030\nSo they can replicate the schema and\nthe configuration partition.\n\n2135\n01:35:50,030 --> 01:35:51,364\nYou're right,\nif it's the domain partition, you're SOL.\n\n2136\n01:35:51,364 --> 01:35:52,827\n>> Yeah, it won't work for that.\n\n2137\n01:35:52,827 --> 01:35:53,843\n>> Yeah, it's not gonna cut that.\n\n2138\n01:35:53,843 --> 01:35:56,118\n>> So the IP one is the one\nthat we normally use.\n\n2139\n01:35:56,118 --> 01:35:59,267\nIt does Create one by default, and\nall of the sites are using it.\n\n2140\n01:35:59,267 --> 01:36:02,790\nAnd if we look at that\nIP default site link.\n\n2141\n01:36:02,790 --> 01:36:08,000\nThis is where, Mike mentioned it,\nreplicate every 180 minutes.\n\n2142\n01:36:08,000 --> 01:36:09,460\nAnd that might be too long for you.\n\n2143\n01:36:09,460 --> 01:36:11,130\nYou might want to shorten that down.\n\n2144\n01:36:11,130 --> 01:36:14,290\nBut you know, every 180,\nwhat is that, every three hours?\n\n2145\n01:36:14,290 --> 01:36:16,300\nSo every three hours it's replicating.\n\n2146\n01:36:16,300 --> 01:36:20,320\nHow long would it take somebody\nto go from Orlando to Paris?\n\n2147\n01:36:20,320 --> 01:36:21,390\nMore than three hours.\n\n2148\n01:36:21,390 --> 01:36:24,300\nParis to London, you could probably\npull that off in three hours.\n\n2149\n01:36:24,300 --> 01:36:26,700\nThat means that if I disabled\nsomebody's account in one city,\n\n2150\n01:36:26,700 --> 01:36:28,110\nit could take up to three hours.\n\n2151\n01:36:28,110 --> 01:36:31,330\nWell, that's a high priority change,\nI guess that would rush out faster.\n\n2152\n01:36:31,330 --> 01:36:34,200\nIf I created a new account, it wouldn't\nnecessarily show up in the other city for\n\n2153\n01:36:34,200 --> 01:36:35,500\nup to three hours.\n\n2154\n01:36:35,500 --> 01:36:38,270\nThat may be something I don't want.\n\n2155\n01:36:38,270 --> 01:36:40,710\nThe other thing you'll\nnotice here is a cost.\n\n2156\n01:36:40,710 --> 01:36:46,120\nWe can manipulate the way that replication\noccurs by tinkering with this cost value.\n\n2157\n01:36:46,120 --> 01:36:48,390\nIf you have more than one site link,\n\n2158\n01:36:48,390 --> 01:36:52,020\nthe one with the lowest cost is\nthe one that's going to be chosen.\n\n2159\n01:36:52,020 --> 01:36:56,620\nSo, that's another great way we can make\nmanipulate replication between cities.\n\n2160\n01:36:56,620 --> 01:37:01,056\nI use this all the time, because you\nmight to set up a hub for your location.\n\n2161\n01:37:01,056 --> 01:37:03,098\n[crosstalk]\n>> Instead of where you've got corporate\n\n2162\n01:37:03,098 --> 01:37:07,018\noffice and all your branch offices,\nbecause if everything is in that one site\n\n2163\n01:37:07,018 --> 01:37:10,320\nlink, the ISTG can replicate\nany which way it sees fit.\n\n2164\n01:37:10,320 --> 01:37:13,420\n>> Active directory is all about the\nmulti-master replication anyway, right?\n\n2165\n01:37:13,420 --> 01:37:15,910\nAll domains controllers are equal and\nso on.\n\n2166\n01:37:15,910 --> 01:37:16,990\nBut we know.\n\n2167\n01:37:16,990 --> 01:37:19,210\n>> That you've got servers\nthat are beefier than others,\n\n2168\n01:37:19,210 --> 01:37:20,930\nthat locations are more\nstable than others.\n\n2169\n01:37:20,930 --> 01:37:22,560\nYou probably have a hub, a headquarters.\n\n2170\n01:37:22,560 --> 01:37:25,530\n>> A lot of my changes occur at\nheadquarters and if we're hub and spoke,\n\n2171\n01:37:25,530 --> 01:37:28,410\nthey get out to all the branch offices\nquicker instead of getting to one branch\n\n2172\n01:37:28,410 --> 01:37:32,700\nand then from that branch to another\nbranch and kind of daisy chaining along.\n\n2173\n01:37:32,700 --> 01:37:33,470\n>> So, what I like to do,\n\n2174\n01:37:33,470 --> 01:37:36,960\nis I like to leave the default\nIP site link as my backup.\n\n2175\n01:37:36,960 --> 01:37:38,280\nRight.\n>> Just say all right.\n\n2176\n01:37:38,280 --> 01:37:39,310\nAs a back up.\n\n2177\n01:37:39,310 --> 01:37:41,370\nYeah, you can replicate\nto whoever you want.\n\n2178\n01:37:41,370 --> 01:37:45,690\nBut then I normally create lower cost\nsite links to connect the sites the way\n\n2179\n01:37:45,690 --> 01:37:46,350\nI want them.\n\n2180\n01:37:46,350 --> 01:37:46,900\n>> Right.\n\n2181\n01:37:46,900 --> 01:37:49,710\n>> And then the KCC can\nnavigate that however it wants.\n\n2182\n01:37:49,710 --> 01:37:54,400\nSo to do that, we can just come in,\nand let's say Orlando is our center,\n\n2183\n01:37:54,400 --> 01:37:55,170\nour headquarters.\n\n2184\n01:37:56,270 --> 01:38:00,530\nSo, I want Paris to replicate to Orlando,\nand I want London to replicate to Orlando,\n\n2185\n01:38:00,530 --> 01:38:02,800\nI don't want Paris and\nLondon to replicate to each other.\n\n2186\n01:38:02,800 --> 01:38:06,670\nOr maybe I do to cut down on\ntraffic across the Atlantic.\n\n2187\n01:38:06,670 --> 01:38:08,520\nIt's up to you how you wanna go about it.\n\n2188\n01:38:08,520 --> 01:38:10,910\nBut I'm gonna get these two\nto replicate to Orlando, and\n\n2189\n01:38:10,910 --> 01:38:14,750\nthe way I'm gonna do it is by creating low\ncost links that are more attractive than\n\n2190\n01:38:14,750 --> 01:38:16,170\nthe other route, all right?\n\n2191\n01:38:16,170 --> 01:38:20,130\nAnd so I can come here under\nmy intersite transports.\n\n2192\n01:38:20,130 --> 01:38:21,220\nAnd I can create a new one.\n\n2193\n01:38:21,220 --> 01:38:22,270\nI'll do a new site link.\n\n2194\n01:38:23,430 --> 01:38:25,930\nAnd I'll create a site\nlink here that says,\n\n2195\n01:38:25,930 --> 01:38:30,700\nthis one will be Paris to Orlando,\nall right?\n\n2196\n01:38:30,700 --> 01:38:33,020\nAnd so I'm gonna add Paris and\nOrlando to it.\n\n2197\n01:38:34,600 --> 01:38:38,350\nAnd then I'll create\nanother one I'll try and\n\n2198\n01:38:38,350 --> 01:38:43,860\ncreate another one called\nLondon to Orlando.\n\n2199\n01:38:43,860 --> 01:38:44,890\nAnd I'll put London [INAUDIBLE].\n\n2200\n01:38:44,890 --> 01:38:45,897\nAll right now,\n\n2201\n01:38:45,897 --> 01:38:50,170\nwhen I created these [INAUDIBLE]\ncosts the intervals are the same.\n\n2202\n01:38:50,170 --> 01:38:52,600\nSo I really just wasted\nmy time creating these.\n\n2203\n01:38:52,600 --> 01:38:56,450\nBut where they become attractive is\nif I come in here and I change them.\n\n2204\n01:38:56,450 --> 01:38:57,980\nAnd I lower their cost.\n\n2205\n01:38:57,980 --> 01:39:00,310\nAnd I may or\nmay not change their interval.\n\n2206\n01:39:00,310 --> 01:39:02,140\n>> Right.\n>> I might not care about the interval.\n\n2207\n01:39:02,140 --> 01:39:04,520\nI might care about who\nit is you're talking to.\n\n2208\n01:39:04,520 --> 01:39:07,110\nBut I'm going to go ahead and\njust bump that down to 90 minutes.\n\n2209\n01:39:08,440 --> 01:39:09,070\nAll right.\n\n2210\n01:39:09,070 --> 01:39:11,070\nAnd I'll do that the same for\nthe other one.\n\n2211\n01:39:11,070 --> 01:39:16,480\nI'm just gonna bump these down, and\nby doing that I gave these a lower cost.\n\n2212\n01:39:16,480 --> 01:39:23,565\nSo if I'm a server in Paris at a cost\nof 10, I can replicate with Orlando,\n\n2213\n01:39:23,565 --> 01:39:27,575\nbut at a cost of 100 I could\nreplicate with London, right.\n\n2214\n01:39:27,575 --> 01:39:28,115\n>> Right.\n\n2215\n01:39:28,115 --> 01:39:32,075\n>> So, I'm gonna pick to replicate with\nOrlando over London because the cost is so\n\n2216\n01:39:32,075 --> 01:39:32,785\nmuch lower.\n\n2217\n01:39:33,915 --> 01:39:34,735\nSo now,\n\n2218\n01:39:34,735 --> 01:39:39,850\nParis will build a link to Orlando,\nLondon we'll build a link to Orlando, but,\n\n2219\n01:39:39,850 --> 01:39:44,550\nParis won't build a link to London because\nthat cost is so high on that other link.\n\n2220\n01:39:44,550 --> 01:39:47,890\n>> By default, you know what, I don't\nknow if they changed this recently, so\n\n2221\n01:39:47,890 --> 01:39:49,800\nthat site links are actually\ntransitive now?\n\n2222\n01:39:51,030 --> 01:39:52,590\n>> The-\n>> So that there is transitivity between\n\n2223\n01:39:52,590 --> 01:39:57,610\nthe site links, so\nit could end up creating a London or\n\n2224\n01:39:57,610 --> 01:40:01,290\nwhat did I say, London\n>> Like London to Paris going through\n\n2225\n01:40:01,290 --> 01:40:02,800\nOrlando.\n\n2226\n01:40:02,800 --> 01:40:05,630\nThe thing is\n>> I like to turn it off\n\n2227\n01:40:05,630 --> 01:40:07,760\n>> Yeah, you can turn it off by default,\n\n2228\n01:40:07,760 --> 01:40:10,920\nthough what is going to happen is\n>> What Mike's saying is\n\n2229\n01:40:10,920 --> 01:40:14,380\nwe get the transitive trust, so\nLondon could go to Orlando and\n\n2230\n01:40:14,380 --> 01:40:17,740\nthen could go to Paris, and if you look\nat the cost, what would that cost be?\n\n2231\n01:40:17,740 --> 01:40:21,230\nIt would only be 20, and so\nthat is a pretty low cost.\n\n2232\n01:40:21,230 --> 01:40:22,740\nIt could still happen.\n\n2233\n01:40:22,740 --> 01:40:26,490\nWe could fudge our numbers a bit to make\nthat better, or we could turn it off.\n\n2234\n01:40:26,490 --> 01:40:27,900\nI mean, where is that option Mike?\n\n2235\n01:40:27,900 --> 01:40:29,970\n>> If you right click on IP itself.\n\n2236\n01:40:31,440 --> 01:40:33,100\nWe can go to the properties of that,\n\n2237\n01:40:33,100 --> 01:40:36,408\nyou can disable transitively on\none of those guys I thought.\n\n2238\n01:40:36,408 --> 01:40:39,431\n>> Bridge all [CROSSTALK] links,\nbecause that would be a bridge.\n\n2239\n01:40:39,431 --> 01:40:41,910\n>> Yes, if you turn off that,\nif you uncheck that,\n\n2240\n01:40:41,910 --> 01:40:44,100\nit will no longer be\nable to do it by itself.\n\n2241\n01:40:44,100 --> 01:40:46,700\nThen we can manually set up\nbridging if we wanted to.\n\n2242\n01:40:46,700 --> 01:40:48,080\nSo bridging.\n\n2243\n01:40:48,080 --> 01:40:49,300\nWe haven't really talked about it.\n\n2244\n01:40:49,300 --> 01:40:51,070\n>> Yeah.\n>> Bridging is basically where we build\n\n2245\n01:40:51,070 --> 01:40:53,480\nthat transitive side of things.\n\n2246\n01:40:53,480 --> 01:40:55,830\nAnd if we turn this option off.\n\n2247\n01:40:55,830 --> 01:40:56,570\nBridge all site links.\n\n2248\n01:40:56,570 --> 01:40:57,740\nThat's going to stop that from happening.\n\n2249\n01:40:57,740 --> 01:40:58,500\nThat means.\n\n2250\n01:40:58,500 --> 01:41:00,730\nIn order for\none site to replicate with another,\n\n2251\n01:41:00,730 --> 01:41:02,540\nthere has to be a valid site link.\n\n2252\n01:41:02,540 --> 01:41:04,710\nNo transitivity is going to exist.\n\n2253\n01:41:04,710 --> 01:41:05,270\n>> Right.\n\n2254\n01:41:05,270 --> 01:41:09,520\n>> If I want Paris to\nreplicate to Orlando, but\n\n2255\n01:41:09,520 --> 01:41:11,950\nI want it to do it basically through.\n\n2256\n01:41:11,950 --> 01:41:12,570\nI mean, I'm sorry.\n\n2257\n01:41:12,570 --> 01:41:16,010\nIf I want Paris to replicate from London\nand I want it to go through Orlando.\n\n2258\n01:41:16,010 --> 01:41:17,450\nWe can build our own bridge and\n\n2259\n01:41:17,450 --> 01:41:21,420\nyou probably saw that option when I\nwent in here, new site link bridge.\n\n2260\n01:41:21,420 --> 01:41:24,530\n>> And then you can set it up,\ngive it a little higher class and\n\n2261\n01:41:24,530 --> 01:41:27,740\nwe're only using that site link\nbridge if it costs more than 20,\n\n2262\n01:41:27,740 --> 01:41:30,160\nI think is what we've got right now or\n10 and 10.\n\n2263\n01:41:30,160 --> 01:41:34,720\nSo we set that to 50, now we've turned off\nthe site link bridge, it's not going to do\n\n2264\n01:41:34,720 --> 01:41:39,350\nthat automatically, only if Orlando is not\navailable, then it would Jump over and\n\n2265\n01:41:39,350 --> 01:41:44,610\ntry to use that it goes straight\nto Paris to, I've got my cities.\n\n2266\n01:41:44,610 --> 01:41:45,660\n>> Paris to London.\n\n2267\n01:41:45,660 --> 01:41:48,070\nYeah, and\nit's all about planning for failure.\n\n2268\n01:41:48,070 --> 01:41:50,260\nAll right,\ndo you need to have the silent bridge?\n\n2269\n01:41:50,260 --> 01:41:53,570\nNot really because if a failure\nhappens the K-C-C is gonna kick in and\n\n2270\n01:41:53,570 --> 01:41:56,150\nremap anyway so you'll normally be fine.\n\n2271\n01:41:56,150 --> 01:41:58,690\nIf you left the default ip silent.\n\n2272\n01:41:58,690 --> 01:42:01,378\nBut if I remove that default ip silent,\nright?\n\n2273\n01:42:01,378 --> 01:42:02,021\n>> That's true.\n\n2274\n01:42:02,021 --> 01:42:03,770\n[INAUDIBLE]\n>> If I were to get rid, or\n\n2275\n01:42:03,770 --> 01:42:04,630\nactually, can you remove it?\n\n2276\n01:42:04,630 --> 01:42:06,200\nI think you'd just say, oh, you can.\n\n2277\n01:42:06,200 --> 01:42:07,552\nSo, if I were to delete that, and\n\n2278\n01:42:07,552 --> 01:42:11,680\nI were to delete this site\nlink link bridge that I made.\n\n2279\n01:42:11,680 --> 01:42:16,330\nNow Paris can replicate to Orlando,\nLondon can replicate to Orlando, but\n\n2280\n01:42:16,330 --> 01:42:19,270\nLondon cannot replicate to Paris.\n\n2281\n01:42:19,270 --> 01:42:22,910\nEspecially since I turned off\nthe bridge all site links option.\n\n2282\n01:42:22,910 --> 01:42:24,320\nIt's not there.\n\n2283\n01:42:24,320 --> 01:42:28,670\nNow, if Orlando fails, London and\nParis are isolated from each other.\n\n2284\n01:42:28,670 --> 01:42:32,020\nAnd if one of them makes a change,\nthe other won't see it and\n\n2285\n01:42:32,020 --> 01:42:35,820\nnow I can get some real bad stuff\nhappening in my domain, right?\n\n2286\n01:42:35,820 --> 01:42:38,750\nSo having that site link\nbridge is pretty handy.\n\n2287\n01:42:39,810 --> 01:42:43,560\nI usually leave the default IP site link\nin the background and that covers me.\n\n2288\n01:42:43,560 --> 01:42:45,080\nYup.\nIt's there and you're good.\n\n2289\n01:42:45,080 --> 01:42:47,860\nBut if you deleted it,\nyou're gonna need that site link bridge.\n\n2290\n01:42:47,860 --> 01:42:53,010\nAnd if you turn it on here, that's\nthe default, it's here covered also.\n\n2291\n01:42:53,010 --> 01:42:57,370\nOr you can manually create\nit like I did a moment ago.\n\n2292\n01:42:57,370 --> 01:43:03,220\nAnd so we can say,\nLondon to Orlando to Paris.\n\n2293\n01:43:03,220 --> 01:43:05,800\nAnd we've already got our sites in there.\n\n2294\n01:43:05,800 --> 01:43:06,750\nAnd now we're covered.\n\n2295\n01:43:06,750 --> 01:43:09,180\nNotice, you don't have a cost\nwith the sight link bridge, and\n\n2296\n01:43:09,180 --> 01:43:10,970\nthat's because it just\nadds the cost of the link.\n\n2297\n01:43:10,970 --> 01:43:12,550\nSo this actually would have a cost of 20.\n\n2298\n01:43:12,550 --> 01:43:14,120\n>> Right.\n>> And it would replicate\n\n2299\n01:43:14,120 --> 01:43:14,830\nevery 90 minutes.\n\n2300\n01:43:14,830 --> 01:43:18,470\nSo, London to Paris is\ngonna have a cost of 20.\n\n2301\n01:43:18,470 --> 01:43:22,420\nLondon to Orlando only 10 And\nParis to Orlando only ten also.\n\n2302\n01:43:22,420 --> 01:43:24,960\n>> Nice.\n>> Now I have made a ton of changes here\n\n2303\n01:43:24,960 --> 01:43:26,295\nin a very short amount of time.\n\n2304\n01:43:26,295 --> 01:43:27,910\n>> [LAUGH]\n>> So, Lord only knows\n\n2305\n01:43:27,910 --> 01:43:29,630\nwhat it's actually negotiated.\n\n2306\n01:43:29,630 --> 01:43:35,880\nI'm just gonna run down and And let me\njust kind of, let me kickoff the KCC.\n\n2307\n01:43:35,880 --> 01:43:36,870\n>> We doing the KCC.\n\n2308\n01:43:36,870 --> 01:43:37,480\n>> Yeah.\n\n2309\n01:43:37,480 --> 01:43:40,528\n>> I think you right-click\non the NTDS settings.\n\n2310\n01:43:40,528 --> 01:43:41,737\n[CROSSTALK]\n>> Oh, fine, all right.\n\n2311\n01:43:41,737 --> 01:43:45,102\nIf we drill down under the server,\nyou'll see NTDS settings and\n\n2312\n01:43:45,102 --> 01:43:47,296\nthat's where we start to have our links.\n\n2313\n01:43:47,296 --> 01:43:50,510\nAnd remember what I said earlier, it's\ntrying to set up an environment where each\n\n2314\n01:43:50,510 --> 01:43:52,619\ndomain controller only\nreplicates with two people.\n\n2315\n01:43:52,619 --> 01:43:53,858\nSometimes as.\n\n2316\n01:43:53,858 --> 01:43:54,488\nThree.\n\n2317\n01:43:54,488 --> 01:43:56,674\nI'm not sure if it had to do three here,\nor\n\n2318\n01:43:56,674 --> 01:44:00,740\nif it just ended up doing three because\nwe've made so many ratified changes.\n\n2319\n01:44:00,740 --> 01:44:03,190\n>> Yeah it might be the process\nof removing one or something.\n\n2320\n01:44:03,190 --> 01:44:05,850\nI think you can right-click on one of\nthose automatically generated and run KCC.\n\n2321\n01:44:05,850 --> 01:44:08,700\nAre they all tasks?\n\n2322\n01:44:08,700 --> 01:44:09,920\n>> I got replicate now.\n\n2323\n01:44:09,920 --> 01:44:11,530\nI think it's on in TDS settings.\n\n2324\n01:44:11,530 --> 01:44:15,100\nIsn't it that we see do do do do.\n\n2325\n01:44:15,100 --> 01:44:16,140\nThere it is.\n\n2326\n01:44:16,140 --> 01:44:18,470\nWe got check replication topology.\n\n2327\n01:44:18,470 --> 01:44:21,020\nSo I'm just gonna run that and\nmake sure it re-runs a check.\n\n2328\n01:44:21,020 --> 01:44:23,890\nThat's gonna force the KCC to run.\n\n2329\n01:44:23,890 --> 01:44:28,270\nSo I just right-clicked on that and went\nto all tasks, check replication topology.\n\n2330\n01:44:28,270 --> 01:44:30,230\nYou can force replication from here too.\n\n2331\n01:44:30,230 --> 01:44:34,280\nSo you can replicate to or from a server,\nthat's pretty handy if you want\n\n2332\n01:44:34,280 --> 01:44:37,020\nreplication to happen now,\nnot 90 minutes from now.\n\n2333\n01:44:37,020 --> 01:44:38,880\n>> It's also where we can\nmanually create links,\n\n2334\n01:44:38,880 --> 01:44:42,060\nwe talked about how we rarely do that,\nbut you could do that in there.\n\n2335\n01:44:42,060 --> 01:44:43,380\nOh and\none other thing we didn't show them,\n\n2336\n01:44:43,380 --> 01:44:45,420\nnot only can you change\nthe replication interval,\n\n2337\n01:44:45,420 --> 01:44:46,960\nyou can change when their\nallowed to replicate.\n\n2338\n01:44:46,960 --> 01:44:48,620\nWe can actually control the schedule.\n\n2339\n01:44:48,620 --> 01:44:52,425\nYou might have a scenario where you know,\nbetween seven in the morning and\n\n2340\n01:44:52,425 --> 01:44:54,530\nnine in the morning it's just\nreally busy at my network.\n\n2341\n01:44:54,530 --> 01:44:57,170\nI have a lot of people logging in and\nthings like that or\n\n2342\n01:44:57,170 --> 01:45:02,100\nI've got off-site backups going on\n1:00 and 4:00 in the morning and\n\n2343\n01:45:02,100 --> 01:45:03,920\nmaybe I don't want that\nreplication occurring.\n\n2344\n01:45:03,920 --> 01:45:06,520\nNot a lot of changes going\non at 1:00 in the morning.\n\n2345\n01:45:06,520 --> 01:45:09,400\nI can stop that inter site replication.\n\n2346\n01:45:09,400 --> 01:45:13,170\nAnd let it just, and that way my,\nmy backups or whatever can go.\n\n2347\n01:45:13,170 --> 01:45:14,260\n>> Yeah.\nAnd that's done right here under\n\n2348\n01:45:14,260 --> 01:45:14,980\nthe site links.\n\n2349\n01:45:14,980 --> 01:45:16,830\nYou just pull up the properties\nof the site link and\n\n2350\n01:45:16,830 --> 01:45:19,850\nyou go to change schedule and\nyou can go in here and you can set it.\n\n2351\n01:45:19,850 --> 01:45:21,850\nAnd what I normally do is\nhighlight the whole thing and\n\n2352\n01:45:21,850 --> 01:45:23,375\nsay replication is not available.\n\n2353\n01:45:23,375 --> 01:45:23,940\n>> Mm-hm.\n\n2354\n01:45:23,940 --> 01:45:26,620\n>> And then just go back and\nspecify when it is.\n\n2355\n01:45:26,620 --> 01:45:27,230\nRight?\n>> Right.\n\n2356\n01:45:27,230 --> 01:45:30,670\n>> So if you don't want replication\nto happen during your peak time.\n\n2357\n01:45:30,670 --> 01:45:31,550\nWhich what did you say?\n\n2358\n01:45:31,550 --> 01:45:32,880\nLike 9 AM or something?\n\n2359\n01:45:32,880 --> 01:45:33,880\n>> I don't know.\n7 to 9 or something.\n\n2360\n01:45:33,880 --> 01:45:35,220\nWhenever people are logging in.\n\n2361\n01:45:35,220 --> 01:45:37,940\n>> So we can come through and\nhighlight the areas that we want.\n\n2362\n01:45:38,980 --> 01:45:44,730\nAnd basically stymie replication during\nthe time that, well I guess it's Sunday,\n\n2363\n01:45:44,730 --> 01:45:48,130\nwe could probably go ahead and\ndo it all the time, and on Saturday.\n\n2364\n01:45:48,130 --> 01:45:50,950\nBut during weekdays we\njust exclude those hours.\n\n2365\n01:45:50,950 --> 01:45:52,700\nSo you kinda manipulate that schedule.\n\n2366\n01:45:52,700 --> 01:45:56,720\nSo now we're not replicating between 7 and\n10 AM Monday through Friday.\n\n2367\n01:45:56,720 --> 01:45:59,110\n>> So two things we can control\nwith that replication there.\n\n2368\n01:45:59,110 --> 01:46:00,770\nHow often and\nwhen it's allowed to replicate.\n\n2369\n01:46:00,770 --> 01:46:04,390\n>> All right so\nit's had a few moments to settle down.\n\n2370\n01:46:04,390 --> 01:46:07,940\nI'm just gonna refresh this, and we may\nfind because we've got three domains.\n\n2371\n01:46:07,940 --> 01:46:10,175\nThen it may just have to\nhave those three links.\n\n2372\n01:46:10,175 --> 01:46:13,580\nSo I can see domain 1- dc1\ndoes have three links.\n\n2373\n01:46:13,580 --> 01:46:15,785\n>> Mm-hm.\n>> It's connecting to domain 2- dc1.\n\n2374\n01:46:15,785 --> 01:46:18,460\nThat makes sense it's gotta connect to\na domain controller in its own domain.\n\n2375\n01:46:18,460 --> 01:46:18,995\n>> Mm-hm.\n>> And\n\n2376\n01:46:18,995 --> 01:46:21,605\nthen connecting to one domain controller\nin each of the other domains.\n\n2377\n01:46:21,605 --> 01:46:22,375\n>> Yeah that makes sense.\n\n2378\n01:46:22,375 --> 01:46:24,980\n>> So it had to do three If we take\na look at some of these other ones,\n\n2379\n01:46:24,980 --> 01:46:28,972\nlike training,\ntraining connects to domain 1- dc1 and\n\n2380\n01:46:28,972 --> 01:46:32,634\ndomain 1- dc 2 in Orlando and Paris\n>> Nice.\n\n2381\n01:46:32,634 --> 01:46:33,168\n>> Alright?\n\n2382\n01:46:33,168 --> 01:46:38,260\nAnd then if I jump over to this Parisian\nserver, I can see that it's connecting to,\n\n2383\n01:46:38,260 --> 01:46:43,290\nwell two servers in Orlando, which is\nwhat I'd expect for the site links.\n\n2384\n01:46:43,290 --> 01:46:45,220\nBut it did connect to one in London, and\n\n2385\n01:46:45,220 --> 01:46:48,510\nthat's because that's\nthe only server in domain 2.\n\n2386\n01:46:48,510 --> 01:46:49,770\nThere's nobody else to connect to.\n\n2387\n01:46:49,770 --> 01:46:52,410\nSo no matter how high the cost is,\nthat's who we're going to connect to.\n\n2388\n01:46:52,410 --> 01:46:57,530\nAnd we'll probably see the same\nthing here in London, where again,\n\n2389\n01:46:57,530 --> 01:47:01,060\nit's got a connection to Paris because\nthat's the only other domain controller\n\n2390\n01:47:01,060 --> 01:47:05,031\nfor that domain and\nit's gotta cross that boundary.\n\n2391\n01:47:05,031 --> 01:47:05,920\n>> Very good.\n\n2392\n01:47:05,920 --> 01:47:08,676\n>> So, we can manipulate these\nsite connections a few different\n\n2393\n01:47:08,676 --> 01:47:11,610\nways mostly for replication\npurposes is why we manipulate it.\n\n2394\n01:47:11,610 --> 01:47:13,710\n>> Right.\n>> You can override these links,\n\n2395\n01:47:13,710 --> 01:47:19,790\nif I wanted to force this guy to have\na link to domain 1, or domain 2.\n\n2396\n01:47:19,790 --> 01:47:20,410\nThis is domain two.\n\n2397\n01:47:20,410 --> 01:47:23,300\nIf I wanted to force it to have\na connection to, well, I guess it's\n\n2398\n01:47:23,300 --> 01:47:25,200\ngot a connection to everybody else-\n>> What about training?\n\n2399\n01:47:25,200 --> 01:47:25,980\n>> Training, right.\n\n2400\n01:47:25,980 --> 01:47:28,580\nSo if I wanted to force it to have\na connection to training, we could come in\n\n2401\n01:47:28,580 --> 01:47:33,740\nhere and do a new connection, and\nwe could pick that training DC.\n\n2402\n01:47:33,740 --> 01:47:37,690\nAlright, when you do that,\nyou're building a manual connection.\n\n2403\n01:47:37,690 --> 01:47:40,471\nSee how it doesn't say automatically\ngenerated, it's actually got a name?\n\n2404\n01:47:40,471 --> 01:47:40,971\n>> Right.\n>> Now the next time the KCC runs it's\n\n2405\n01:47:40,971 --> 01:47:41,886\ngoing to re-evaluate other links and\nmanipulate things around your manual link.\n\n2406\n01:47:41,886 --> 01:47:47,134\nSo, your manual link could actually\n\n2407\n01:47:47,134 --> 01:47:53,720\nhave bigger ramifications than you think.\n\n2408\n01:47:53,720 --> 01:47:56,760\nSo you've gotta then go through and\ncheck to see what has changed,\n\n2409\n01:47:56,760 --> 01:48:00,195\nwho else was replicating with training,\nand are they still doing it, right?\n\n2410\n01:48:00,195 --> 01:48:02,340\n>> Mm-hm.\n>> So Paris here, for example.\n\n2411\n01:48:02,340 --> 01:48:04,654\n>> Yep.\n>> If we force that KCC to run again.\n\n2412\n01:48:07,219 --> 01:48:09,230\nAnd then we wait a few moments, right?\n\n2413\n01:48:09,230 --> 01:48:12,690\nIt can take, 20 minutes sometimes.\n\n2414\n01:48:12,690 --> 01:48:17,530\nAnd, if we wait we may find that,\nthat link disappears, apparently not.\n\n2415\n01:48:17,530 --> 01:48:20,700\nBut, we might see that link disappears cuz\nthe manual link that we created overriding\n\n2416\n01:48:20,700 --> 01:48:22,130\nit, so you can do that.\n\n2417\n01:48:22,130 --> 01:48:25,830\nI do encourage you guys not to use\nmanual links if you can avoid it,\n\n2418\n01:48:25,830 --> 01:48:28,840\nif you are at that point it normally means\nthere's some other problems, something you\n\n2419\n01:48:28,840 --> 01:48:33,930\nprobably saw with a sight link instead or\nyou know a replication issue underneath.\n\n2420\n01:48:35,180 --> 01:48:40,270\nAll right, so those are the main things\nwhen it comes to the sight links if\n\n2421\n01:48:40,270 --> 01:48:43,910\nwe wanted to so a SMTP one you know, it's\nreally created exactly the same exact way.\n\n2422\n01:48:43,910 --> 01:48:52,510\nYou just pick the sites and then you\nspecify a name and a cost or whatever.\n\n2423\n01:48:52,510 --> 01:48:54,975\nNow I normally set that cost really,\nreally high.\n\n2424\n01:48:54,975 --> 01:48:55,710\n>> [LAUGH]\n>> Right?\n\n2425\n01:48:55,710 --> 01:48:58,410\nBecause you don't wanna use that\nthing unless you absolutely have to.\n\n2426\n01:48:58,410 --> 01:49:01,600\nBut it's created the same way and\nit deals with the SMTP side.\n\n2427\n01:49:01,600 --> 01:49:03,780\nYou don't have to set up an SMTP server or\n\n2428\n01:49:03,780 --> 01:49:07,870\nemail or anything,\nit does it all on its own.\n\n2429\n01:49:07,870 --> 01:49:11,037\nNormally you are not going to use that\n>> Hopefully not.\n\n2430\n01:49:11,037 --> 01:49:13,740\n[LAUGH]\n>> Mike can you think of anything else we\n\n2431\n01:49:13,740 --> 01:49:15,080\nneed to mention on sites?\n\n2432\n01:49:15,080 --> 01:49:16,050\n>> I think we've covered it all.\n\n2433\n01:49:16,050 --> 01:49:18,230\nI think you did a pretty good job,\nas always.\n\n2434\n01:49:18,230 --> 01:49:20,980\n>> Alright, well let's wrap it here then.\n\n2435\n01:49:20,980 --> 01:49:21,840\n>> All right.\n>> And\n\n2436\n01:49:21,840 --> 01:49:25,120\nI do want to remind you guys if you have\nany questions that go beyond like what we\n\n2437\n01:49:25,120 --> 01:49:27,500\nshowed here, by all means ask them.\n\n2438\n01:49:27,500 --> 01:49:31,380\nLive during the show you can go to\nitpro.tv/live you'll see our chat\n\n2439\n01:49:31,380 --> 01:49:34,230\nbox beneath the video,\npost your questions there, we monitor and\n\n2440\n01:49:34,230 --> 01:49:35,900\nanswer during the show.\n\n2441\n01:49:35,900 --> 01:49:39,100\nIf you have questions after the show,\nuse our Q&A forums.\n\n2442\n01:49:39,100 --> 01:49:41,320\nHit that Q&A link at\nthe top of the screen.\n\n2443\n01:49:41,320 --> 01:49:44,970\nIt'll take you into the forums and\npost your questions we monitor and answer.\n\n2444\n01:49:44,970 --> 01:49:47,750\nAll right,\nwell I hope you guys enjoyed the show.\n\n2445\n01:49:47,750 --> 01:49:49,950\nSigning off for IT pro TV, I'm Don Pezet.\n\n2446\n01:49:49,950 --> 01:49:50,870\n>> And I'm Mike Rodrick.\n\n2447\n01:49:50,870 --> 01:49:51,937\n>> And we will see you next time.\n\n2448\n01:49:51,937 --> 01:50:01,937\n[MUSIC]\n\n2449\n01:50:03,999 --> 01:50:10,090\n[SOUND]\n\n",
          "vimeoId": "100414903"
        }
      ],
      "title": "Configure the Active Directory infrastructure"
    },
    {
      "episodes": [
        {
          "description": "In this episode Mike and Don break down the Certificate Services role and its use inside an enterprise environment. They begin by installing the role, configuring certificate revocation lists (CRLs) and implementing a backup and recovery solution. They also demonstrate certificate deployment, certificate renewal and managing key archival and recovery.",
          "length": "6669",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/012-Certificate-Services.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/012-Certificate-Services-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/012-Certificate-Services-sm.jpg",
          "title": "Certificate Services",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,809 --> 00:00:22,344\n[SOUND]\n\n3\n00:00:22,344 --> 00:00:33,280\n[MUSIC]\n\n4\n00:00:33,280 --> 00:00:35,966\nAll right, good morning,\ngood afternoon, and good evening.\n\n5\n00:00:35,966 --> 00:00:38,301\nAnd welcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,301 --> 00:00:40,110\nI'm your host Don Pezet.\n\n7\n00:00:40,110 --> 00:00:41,160\nToday, with Mr. Mike Rodrick.\n\n8\n00:00:41,160 --> 00:00:42,280\nHow's it going, Mike?\n\n9\n00:00:42,280 --> 00:00:43,620\n>> Fantastic, how you doing, Don?\n\n10\n00:00:43,620 --> 00:00:44,600\n>> I am doing swell.\n\n11\n00:00:44,600 --> 00:00:48,060\nIt's another great Hawaiian shirt Friday.\n\n12\n00:00:48,060 --> 00:00:51,050\n>> I've slacked a little bit, didn't I?\n\n13\n00:00:51,050 --> 00:00:51,640\n>> Yeah.\n\n14\n00:00:51,640 --> 00:00:53,590\nIt's okay, I'll forgive you this time.\n\n15\n00:00:53,590 --> 00:00:55,790\n>> Wait, could be a blue Hawaiian.\n\n16\n00:00:55,790 --> 00:00:56,510\n>> I suppose.\n\n17\n00:00:56,510 --> 00:00:58,630\n>> Isn't that a drink or something?\n\n18\n00:00:58,630 --> 00:01:00,945\n>> No, I think you failed.\n\n19\n00:01:00,945 --> 00:01:02,710\n[LAUGH]\n>> We'll just start drawing little palm\n\n20\n00:01:02,710 --> 00:01:03,598\ntrees on here.\n\n21\n00:01:03,598 --> 00:01:05,070\n[LAUGH]\n>> All right,\n\n22\n00:01:05,070 --> 00:01:07,165\nI'll take you up on that one.\n\n23\n00:01:07,165 --> 00:01:10,620\n[LAUGH] I'll draw the ones on your back,\nand I guarantee there'll be palm trees,\n\n24\n00:01:10,620 --> 00:01:11,530\njust trust me, you know.\n\n25\n00:01:11,530 --> 00:01:13,070\n>> Oh yeah, sure.\nLike getting a tattoo\n\n26\n00:01:13,070 --> 00:01:14,230\nin Asian language right?\n\n27\n00:01:14,230 --> 00:01:15,860\nYou know exactly what it says.\n\n28\n00:01:15,860 --> 00:01:17,856\n>> You trust that they\nknow what they're doing.\n\n29\n00:01:17,856 --> 00:01:19,190\n>> [LAUGH]\n>> All right, well ladies and\n\n30\n00:01:19,190 --> 00:01:22,810\ngentlemen, we have another episode\nof 7412, the Windows Server 2012\n\n31\n00:01:22,810 --> 00:01:27,630\nR2 Certification Exams, so\nwe are going to be jumping back into that.\n\n32\n00:01:27,630 --> 00:01:31,520\nSpecifically we are going to be\nlooking at certificate services.\n\n33\n00:01:31,520 --> 00:01:34,280\nNow, I know we've touched\non certificate services\n\n34\n00:01:34,280 --> 00:01:38,790\nlightly in other episodes because we use\ncertificates for so many different things.\n\n35\n00:01:38,790 --> 00:01:41,008\nBut today,\nwe're kicking out the stops, right?\n\n36\n00:01:41,008 --> 00:01:42,170\nWe're gonna go into the all the bells and\n\n37\n00:01:42,170 --> 00:01:45,150\nwhistles of running your own certificate\nservice inside of your enterprise\n\n38\n00:01:45,150 --> 00:01:47,190\nenvironment because it's pretty\nmuch a given these days.\n\n39\n00:01:47,190 --> 00:01:48,300\n>> Yeah, absolutely, absolutely.\n\n40\n00:01:48,300 --> 00:01:49,002\nWe use it for everything.\n\n41\n00:01:49,002 --> 00:01:52,144\nSmart cards are becoming a much\nmore popular way to log on now\n\n42\n00:01:52,144 --> 00:01:55,200\nthat the equipment has come down in cost,\na lot easier to implement,\n\n43\n00:01:55,200 --> 00:01:57,230\nand it's a much more secure solution.\n\n44\n00:01:57,230 --> 00:02:00,180\nTo IP6, to, you know, just everything.\n\n45\n00:02:00,180 --> 00:02:02,970\n>> Yeah, I know,\nI use it constantly with just SSH.\n\n46\n00:02:02,970 --> 00:02:06,280\nSo, for Linux servers,\nUnix servers, routers,\n\n47\n00:02:06,280 --> 00:02:10,180\nfirewalls, SSH in them a lot of times,\nuse certificates for that.\n\n48\n00:02:10,180 --> 00:02:14,530\nIn the Windows world we see it with EFS,\nthe encrypting file system.\n\n49\n00:02:14,530 --> 00:02:17,360\nYou see it with BitLocker even.\n\n50\n00:02:17,360 --> 00:02:21,782\nYou see it with VPNs, so\nthere's a lot of uses for certificates.\n\n51\n00:02:21,782 --> 00:02:23,160\nRemember that certificates,\n\n52\n00:02:23,160 --> 00:02:26,950\nif you've watched the security episodes\nyou've kinda heard all this before, but\n\n53\n00:02:26,950 --> 00:02:31,170\nthe certificates, they basically\nare made up of two parts, public key and\n\n54\n00:02:31,170 --> 00:02:36,610\na private key, and the private key\nallows us to encrypt and decrypt data.\n\n55\n00:02:36,610 --> 00:02:39,960\nBut a public key just\nallows you to encrypt data.\n\n56\n00:02:39,960 --> 00:02:43,400\nAnd that means we can send a public\nkey across the network, and\n\n57\n00:02:43,400 --> 00:02:47,340\nsomebody else can use that public key\nto encrypt data and send it to us.\n\n58\n00:02:47,340 --> 00:02:50,190\nAnd we never have to worry about our\nprivate key crossing the network.\n\n59\n00:02:50,190 --> 00:02:55,820\nThat makes it a very secure form of not\njust encryption and decryption like that,\n\n60\n00:02:55,820 --> 00:02:59,090\nbut we can use them for authentication and\nall sorts of other things.\n\n61\n00:02:59,090 --> 00:03:01,070\nSo they're very-\n>> SSL and stuff.\n\n62\n00:03:01,070 --> 00:03:03,610\nWhen you connect to a secure website,\nthat's what you're doing right?\n\n63\n00:03:03,610 --> 00:03:06,510\nIs you're connecting the server saying,\nhey, prove to me who you are.\n\n64\n00:03:06,510 --> 00:03:10,030\nHe's sending back a certificate\nthat proves his identity.\n\n65\n00:03:10,030 --> 00:03:13,510\nAnd in there is his public key, and\nthen you're going to create a session key.\n\n66\n00:03:13,510 --> 00:03:15,350\nEncrypt it with that public key.\n\n67\n00:03:15,350 --> 00:03:18,720\nSend it back across, and now you both\nhave a copy of that symmetric key.\n\n68\n00:03:18,720 --> 00:03:20,330\nThat you can use to actually encrypt and\ndecrypt the data.\n\n69\n00:03:20,330 --> 00:03:23,870\nBecause with symmetric encryption\nit's all about key distribution and\n\n70\n00:03:23,870 --> 00:03:26,020\nhow we can keep that key safe.\n\n71\n00:03:26,020 --> 00:03:26,550\nYeah, and you know,\n\n72\n00:03:26,550 --> 00:03:30,780\na lot of people they, you see certificates\nmost commonly with like secure websites.\n\n73\n00:03:30,780 --> 00:03:31,280\n>> Yeah.\n>> Right?\n\n74\n00:03:31,280 --> 00:03:32,720\nSo you know you browse to Amazon, you go\n\n75\n00:03:32,720 --> 00:03:35,370\nto buy something it switches to SSL.\nThat's where we see certificates\n\n76\n00:03:35,370 --> 00:03:37,790\nvery visibly, but\nthey're used for a ton of things,\n\n77\n00:03:37,790 --> 00:03:39,630\nand you'll see it here\nwhen we go to set it up.\n\n78\n00:03:39,630 --> 00:03:41,320\nWe're doing templates today, right?\n\n79\n00:03:41,320 --> 00:03:44,530\n>> Yep.\n>> Okay so, [LAUGH], I gotta remember.\n\n80\n00:03:44,530 --> 00:03:48,220\nSo when we go to set up templates\ninside of our certificate server,\n\n81\n00:03:48,220 --> 00:03:50,050\nthere's a part where we get\nto manage our templates.\n\n82\n00:03:50,050 --> 00:03:52,990\nYou'll see all the different things\nwe can use certificates for.\n\n83\n00:03:52,990 --> 00:03:56,620\nIt's a pretty big list, and\nthat's just the stuff built in.\n\n84\n00:03:56,620 --> 00:03:59,390\nYou can choose to use certificates for\nwhatever you want outside of that list.\n\n85\n00:03:59,390 --> 00:04:00,310\nSo it's pretty powerful.\n\n86\n00:04:00,310 --> 00:04:02,060\n>> Mm-hm, good stuff, good stuff.\n\n87\n00:04:02,060 --> 00:04:04,830\nAnd you know it's got a lot of\npieces to it to get it set up.\n\n88\n00:04:04,830 --> 00:04:07,740\nThere's a lot of things that we want\nto do to try to keep that certificate.\n\n89\n00:04:07,740 --> 00:04:09,750\nWhat we call that public\nkey infrastructure.\n\n90\n00:04:09,750 --> 00:04:14,900\nThe public key, or PKI, is all the pieces\nthat make up your certificate solution.\n\n91\n00:04:14,900 --> 00:04:18,600\nThat's the servers that are responsible\nfor issuing those certificates, for\n\n92\n00:04:18,600 --> 00:04:21,220\nmaintaining those certificates so\nthat their lifetime.\n\n93\n00:04:21,220 --> 00:04:23,470\nTalk about revoking certificates and\nthings like that.\n\n94\n00:04:23,470 --> 00:04:25,868\nRecovering keys when we need to.\n\n95\n00:04:25,868 --> 00:04:29,320\nSo we're gonna talk about how we\nwould set up this infrastructure,\n\n96\n00:04:29,320 --> 00:04:34,540\nthis hierarchy typically of certificate\nservers that we're gonna create\n\n97\n00:04:34,540 --> 00:04:38,230\nto support our needs for whatever it\nis we are doing in our environment.\n\n98\n00:04:38,230 --> 00:04:42,030\n>> Yeah, and there really is\nquite a few different components.\n\n99\n00:04:42,030 --> 00:04:44,270\nAnd, so, we're gonna focus\nin on the server side and\n\n100\n00:04:44,270 --> 00:04:47,610\non the server side we need to generate,\nor create,\n\n101\n00:04:47,610 --> 00:04:51,600\nsome kind of entity that's able to\ngenerate and issue certificates, right.\n\n102\n00:04:51,600 --> 00:04:54,493\nThat's a key component and that entity,\n\n103\n00:04:54,493 --> 00:04:58,810\nthat's something that's called\na certificate authority.\n\n104\n00:04:58,810 --> 00:05:00,970\nI don't know why I\npronounced it all crazy.\n\n105\n00:05:00,970 --> 00:05:03,775\n>> Sounds like you wanted\nsay certification authority.\n\n106\n00:05:03,775 --> 00:05:05,150\n>> [LAUGH]\n>> Yeah, CA for short.\n\n107\n00:05:05,150 --> 00:05:05,880\nThere we go.\n\n108\n00:05:05,880 --> 00:05:08,690\n>> I always tell people well\nEnglish is my second language.\n\n109\n00:05:08,690 --> 00:05:09,975\nI don't have a first language.\n\n110\n00:05:09,975 --> 00:05:12,330\n>> [LAUGH]\n>> I didn't get that far.\n\n111\n00:05:12,330 --> 00:05:16,510\nSo we need a certification authority or\na certificate authority, a CA, and\n\n112\n00:05:16,510 --> 00:05:18,320\nthat's the person who's\ngonna be responsible for\n\n113\n00:05:18,320 --> 00:05:20,870\ngenerating certificates and\nissuing them on the network.\n\n114\n00:05:20,870 --> 00:05:25,480\nThe certificates themselves are another\ncomponent that makes up our RPKI.\n\n115\n00:05:25,480 --> 00:05:29,390\nOur clients that use the certificates,\nthat's another component.\n\n116\n00:05:29,390 --> 00:05:33,310\nAnd then there's the CRL,\nthe certificate revocation list.\n\n117\n00:05:33,310 --> 00:05:36,250\nThe list of certificates\nthat we've disabled or\n\n118\n00:05:36,250 --> 00:05:38,160\nrevoked, that are no longer valid.\n\n119\n00:05:38,160 --> 00:05:39,490\nThat's another component.\n\n120\n00:05:39,490 --> 00:05:43,400\nAll of these things work\ntogether to create our PKI, and\n\n121\n00:05:43,400 --> 00:05:48,120\nit can be very simple, a single server,\nreal quick and easy implementation.\n\n122\n00:05:48,120 --> 00:05:55,550\nOr it can be very complex with many, many\nservers and a much more complex topology.\n\n123\n00:05:55,550 --> 00:05:57,108\nSo Mike, let's start off simple.\n\n124\n00:05:57,108 --> 00:05:59,185\n>> Okay.\n>> And we'll whip up a CA.\n\n125\n00:05:59,185 --> 00:06:00,050\n>> Okay.\n>> From there,\n\n126\n00:06:00,050 --> 00:06:01,682\nwe can really start to ratchet things up.\n\n127\n00:06:01,682 --> 00:06:04,191\n>> Sounds like a plan, sounds like a plan.\n\n128\n00:06:04,191 --> 00:06:05,220\nWe'll start.\n\n129\n00:06:05,220 --> 00:06:09,760\nIn most situations, like Don said,\nyou can have just a single server but\n\n130\n00:06:09,760 --> 00:06:12,720\nmost environments we're going to\nset up some type of hierarchy.\n\n131\n00:06:12,720 --> 00:06:16,170\nIt might be a very simple,\ntwo-level hierarchy, but\n\n132\n00:06:16,170 --> 00:06:19,110\nwhat we do, the first CA that you install,\nand Certificate Authority or\n\n133\n00:06:19,110 --> 00:06:22,560\nCertification Authority, it's a role\nthat we can install in 2012 R2.\n\n134\n00:06:22,560 --> 00:06:25,180\nIt's actually changed now from 2008.\n\n135\n00:06:25,180 --> 00:06:29,571\nBack in 2008, you could only install\ncertificate services on an Enterprise\n\n136\n00:06:29,571 --> 00:06:31,940\nedition of the operating system.\n\n137\n00:06:31,940 --> 00:06:36,060\nYou couldn't do it on Standard,\nif I remember correctly,\n\n138\n00:06:36,060 --> 00:06:38,070\nand in 2012 we can\ninstall it on either one.\n\n139\n00:06:38,070 --> 00:06:41,440\nThat does not matter,\nyou can do it on Standard or Datacenter.\n\n140\n00:06:41,440 --> 00:06:46,100\nThe first one we create is a special CA,\nand he's known as our root CA.\n\n141\n00:06:46,100 --> 00:06:50,030\nWe've got what we call root CA,\nthat's the very top of my hierarchy.\n\n142\n00:06:50,030 --> 00:06:53,520\nAnd then underneath that,\nwe'll create subordinate CAs.\n\n143\n00:06:53,520 --> 00:06:57,660\nWhen we try to decide how we are going to\nset up our hierarchy, we can do it for\n\n144\n00:06:57,660 --> 00:06:58,700\ndifferent reasons.\n\n145\n00:06:58,700 --> 00:07:01,380\nOur root CA is typically very protective.\n\n146\n00:07:01,380 --> 00:07:05,840\nThe one thing we want to keep in mind,\nif the root CA ever becomes compromised,\n\n147\n00:07:05,840 --> 00:07:09,380\nthen everything underneath that\nis considered compromised,\n\n148\n00:07:09,380 --> 00:07:12,200\nI can't trust any of the certificates\nthat he's ever issued.\n\n149\n00:07:12,200 --> 00:07:16,130\nSo if he becomes compromised,\nmy whole PKI has to be redone.\n\n150\n00:07:16,130 --> 00:07:20,170\nSo what normally happens is we're gonna\nset up that first certificate authority,\n\n151\n00:07:20,170 --> 00:07:23,280\nthat root CA, and\nwe're gonna take him offline.\n\n152\n00:07:23,280 --> 00:07:26,740\nHe's gonna issue certificates\nto subordinate CAs, and\n\n153\n00:07:26,740 --> 00:07:31,030\nthen the subordinate CAs are the ones that\nactually issue the certificates to users,\n\n154\n00:07:31,030 --> 00:07:32,780\nto the computers, and things like that.\n\n155\n00:07:32,780 --> 00:07:34,840\nThe root is taken offline and\n\n156\n00:07:34,840 --> 00:07:37,970\nonly brought online to maybe\ndo some updates now and again.\n\n157\n00:07:37,970 --> 00:07:39,900\nHe's usually not part of the domain.\n\n158\n00:07:39,900 --> 00:07:43,070\nHe's not tied into active\ndirectory because he's gonna be\n\n159\n00:07:43,070 --> 00:07:44,670\nnot connected at the network.\n\n160\n00:07:44,670 --> 00:07:48,106\nAnd if you ever setup another subordinate\nCA, you're gonna have to do it,\n\n161\n00:07:48,106 --> 00:07:51,995\nbecause he's not online, I mean, you could\nbring him online I guess temporarily.\n\n162\n00:07:51,995 --> 00:07:55,248\nBut a lot of places will do it by file\nwhere you create the request on that\n\n163\n00:07:55,248 --> 00:07:58,856\nnew subordinate, and I'll show you how\nto do this, and you copy it to a file.\n\n164\n00:07:58,856 --> 00:08:02,681\nTake that file over to the root, issue it,\ncopy it back to your removable media,\n\n165\n00:08:02,681 --> 00:08:06,270\ntake it back to the new subordinate and\ninstall that certificate.\n\n166\n00:08:06,270 --> 00:08:09,660\nSo we'll start by setting up our\nroot up there at the very top.\n\n167\n00:08:09,660 --> 00:08:13,900\nAnd so this guy is,\nif I'm on the right machine here.\n\n168\n00:08:13,900 --> 00:08:17,370\nThis is a stand alone server,\nso he's not part of my domain.\n\n169\n00:08:18,900 --> 00:08:21,930\nAnd just like installing any other role,\nit's pretty straight forward in getting\n\n170\n00:08:21,930 --> 00:08:25,790\nthe role installed itself,\njust Next a few times here.\n\n171\n00:08:25,790 --> 00:08:28,540\nAnd then picking your role,\nActive Directory certificate services.\n\n172\n00:08:29,700 --> 00:08:32,896\nAnd we'll add the required features, our\nmanagement consoles, and things like that.\n\n173\n00:08:35,334 --> 00:08:37,415\nNo additional features to install.\n\n174\n00:08:37,415 --> 00:08:40,480\nBut when we get down here,\nthis is where we gotta pick.\n\n175\n00:08:40,480 --> 00:08:42,440\nBecause certificate authority or\ncertification authority,\n\n176\n00:08:42,440 --> 00:08:45,740\nthis role has several sub-components or\nrole services.\n\n177\n00:08:45,740 --> 00:08:47,275\nDepending on what you want to do with it.\n\n178\n00:08:47,275 --> 00:08:47,960\nRight?\n\n179\n00:08:47,960 --> 00:08:52,370\nNow for this guy, for the root, he's not\ngonna be issuing certificates to users.\n\n180\n00:08:52,370 --> 00:08:54,740\nHe's not gonna be issuing\ncertificates to computers.\n\n181\n00:08:54,740 --> 00:08:58,350\nSo we're not installing things like the\nauthority web enrollment where I can set\n\n182\n00:08:58,350 --> 00:09:00,840\nup a webpage that users can go and\nrequest certificates.\n\n183\n00:09:00,840 --> 00:09:04,050\nAnd we'll take a look at some of\nthese other components when we\n\n184\n00:09:04,050 --> 00:09:06,170\nget to the subordinate CA.\n\n185\n00:09:06,170 --> 00:09:09,747\nSo for this particular guy,\njust the certification authority role,\n\n186\n00:09:09,747 --> 00:09:10,846\nthat's all we need.\n\n187\n00:09:10,846 --> 00:09:12,053\nNext.\n\n188\n00:09:12,053 --> 00:09:13,494\nAnd install.\n\n189\n00:09:13,494 --> 00:09:14,730\nSo pretty straightforward there.\n\n190\n00:09:14,730 --> 00:09:17,853\nWe'll let that spin up and then we'll\ngo in and we'll configure this guy.\n\n191\n00:09:17,853 --> 00:09:18,433\n>> Yeah.\n\n192\n00:09:18,433 --> 00:09:22,610\nNow Mike you mentioned how we're gonna\ntake this guy offline eventually.\n\n193\n00:09:22,610 --> 00:09:26,475\nAnd I know some of you viewers out there,\nyou might say isn't that kinda paranoid?\n\n194\n00:09:26,475 --> 00:09:31,005\nAnd let me make sure I\nkinda reinforce this.\n\n195\n00:09:31,005 --> 00:09:35,845\nIf somebody compromises your root CA,\nif a hacker gets into it or whatever.\n\n196\n00:09:35,845 --> 00:09:41,567\nIf they can get the private key of\nyour root CA, they can effectively\n\n197\n00:09:41,567 --> 00:09:48,437\nissue certificates and access certificates\nfor every server that CA has issued.\n\n198\n00:09:48,437 --> 00:09:52,617\nThey've effective compromised every\nsingle certificate on that server.\n\n199\n00:09:52,617 --> 00:09:56,147\nOnce your root CA is compromised,\nyou've lost everything.\n\n200\n00:09:57,300 --> 00:10:01,490\nSo what better way to secure\nit than to just not have it\n\n201\n00:10:01,490 --> 00:10:04,100\nplugged into the network at all,\nor maybe not even turned on?\n\n202\n00:10:04,100 --> 00:10:06,710\nRight?\nIf you don't need to access it on\n\n203\n00:10:06,710 --> 00:10:10,220\na regular basis, how better to secure\nthat than to just power it off or\n\n204\n00:10:10,220 --> 00:10:11,270\nunplug it from the network?\n\n205\n00:10:11,270 --> 00:10:14,900\n>> That way they have got to have physical\naccess in order to compromise it.\n\n206\n00:10:14,900 --> 00:10:19,940\n>> I'm reminded of that really bad\nMission Impossible movie with Tom Cruise.\n\n207\n00:10:19,940 --> 00:10:23,570\nRemember when he breaks in to the building\nand dangles from the ceiling,\n\n208\n00:10:23,570 --> 00:10:24,400\nto access-\n>> And\n\n209\n00:10:24,400 --> 00:10:27,013\nthat drop of sweat almost hits the floor,\nright?\n\n210\n00:10:27,013 --> 00:10:29,900\n[LAUGH]\n>> So why is he doing that?\n\n211\n00:10:29,900 --> 00:10:32,290\nIf the computer was attached to a network,\n\n212\n00:10:32,290 --> 00:10:34,010\nhe could have just come in\nover the network right?\n\n213\n00:10:34,010 --> 00:10:38,110\nUses his mad hacker skills or\nwhatever to get in that way.\n\n214\n00:10:38,110 --> 00:10:42,020\nBut for a computer that is offline,\nyou've got to get physical access to it.\n\n215\n00:10:42,020 --> 00:10:44,880\nAnd it's much easier to secure\nsomething physically than it is\n\n216\n00:10:44,880 --> 00:10:46,210\nlogically on the network.\n\n217\n00:10:46,210 --> 00:10:48,890\nSo that's why we're\ngonna take this offline.\n\n218\n00:10:48,890 --> 00:10:51,290\nAnd you should do this even for\na small company.\n\n219\n00:10:51,290 --> 00:10:53,440\nIt's a good idea to have the offline CA.\n\n220\n00:10:53,440 --> 00:10:56,520\nNow in the past, that meant having\na physical server somewhere you lost.\n\n221\n00:10:56,520 --> 00:10:58,610\n>> Right.\n>> But now we're talking VMs.\n\n222\n00:10:58,610 --> 00:11:01,270\nIs it a big deal to have virtual\nmachine shut down somewhere?\n\n223\n00:11:01,270 --> 00:11:01,980\nIt really isn't.\n\n224\n00:11:01,980 --> 00:11:03,160\n>> No, not at all, not at all.\n\n225\n00:11:03,160 --> 00:11:05,496\nAnd so, we're effectively then\nsplitting the risk up, right?\n\n226\n00:11:05,496 --> 00:11:09,700\nCuz if we have three subordinate CAs,\nthe roots offline.\n\n227\n00:11:09,700 --> 00:11:12,626\nIf one of the subordinates gets\ncompromised all things being equal,\n\n228\n00:11:12,626 --> 00:11:14,805\nI'm losing a third of my infrastructure,\nright?\n\n229\n00:11:14,805 --> 00:11:15,327\n>> Right.\n\n230\n00:11:15,327 --> 00:11:19,370\n>> That I had to redo from that point\ndown, instead of my entire infrastructure.\n\n231\n00:11:19,370 --> 00:11:20,450\nSo, yeah.\n\n232\n00:11:20,450 --> 00:11:21,790\nAll right, so this guy has finished.\n\n233\n00:11:21,790 --> 00:11:23,150\nI'm gonna click on our little link here,\n\n234\n00:11:23,150 --> 00:11:26,795\nConfigure Active Directory Certificate\nServices on the Destination Server.\n\n235\n00:11:26,795 --> 00:11:31,100\n[LAUGH] And again, this is a standalone,\nhe's not part of the domain.\n\n236\n00:11:31,100 --> 00:11:33,090\nSo I'm just the local\nadministrator is fine.\n\n237\n00:11:35,330 --> 00:11:38,600\nThe only role service I added was\nthe certification authority, so\n\n238\n00:11:38,600 --> 00:11:42,310\nthat's the one we will configure\nafter it thinks about it.\n\n239\n00:11:45,330 --> 00:11:48,494\nHere, we're gonna do it because\nit is not joined to the domain,\n\n240\n00:11:48,494 --> 00:11:50,788\nI don't even get the choice\nin enterprise CA.\n\n241\n00:11:50,788 --> 00:11:53,652\nThe difference between stand alone and\nenterprise, is whether or\n\n242\n00:11:53,652 --> 00:11:55,300\nnot it is tied into Active Directory.\n\n243\n00:11:55,300 --> 00:11:58,160\nDoes it publish any information\nin Active Directory?\n\n244\n00:11:58,160 --> 00:12:01,370\nAnd because this guy is not part of the\ndomain, he would not have write access or\n\n245\n00:12:01,370 --> 00:12:03,230\nanything like that to Active Directory.\n\n246\n00:12:03,230 --> 00:12:04,717\nSo our only choice is Stand Alone.\n\n247\n00:12:04,717 --> 00:12:06,272\nAnd we'll click Next.\n\n248\n00:12:06,272 --> 00:12:08,150\nAnd that's fine cuz he's gonna be offline,\nright?\n\n249\n00:12:08,150 --> 00:12:09,590\nHe's not connected to the domain.\n\n250\n00:12:09,590 --> 00:12:12,390\nI don't want him to be tied\nin to Active Directory.\n\n251\n00:12:12,390 --> 00:12:13,048\nWe're gonna do a root CA.\n\n252\n00:12:13,048 --> 00:12:17,665\nCuz that's the very first one we\ninstalled at the top of our hierarchy and\n\n253\n00:12:17,665 --> 00:12:19,490\nI don't have a private key.\n\n254\n00:12:19,490 --> 00:12:23,150\nIf we were restoring or had you know\ntrying to recover from a disaster or\n\n255\n00:12:23,150 --> 00:12:26,270\nsomething like that or\nmigrating from an older PKI,\n\n256\n00:12:26,270 --> 00:12:29,130\nI might have a key already,\nwe're just gonna create a new one.\n\n257\n00:12:29,130 --> 00:12:29,670\n>> Yeah, and\n\n258\n00:12:29,670 --> 00:12:33,790\nthis is the key that I was talking\nabout that's super sensitive, right?\n\n259\n00:12:33,790 --> 00:12:37,160\nIf this private key gets compromised,\neverything's gone, right?\n\n260\n00:12:37,160 --> 00:12:39,210\n>> It's done, yep.\n>> But, you've gotta create one and so\n\n261\n00:12:39,210 --> 00:12:42,870\nit's generating that private key right\nhere so it's going through that process.\n\n262\n00:12:42,870 --> 00:12:45,660\n>> And then here we can choose what\ncryptographic service providers we\n\n263\n00:12:45,660 --> 00:12:47,170\nwant and our key link.\n\n264\n00:12:47,170 --> 00:12:49,050\nThen this is not gonna be the keylink for\n\n265\n00:12:49,050 --> 00:12:51,091\nthe certificates we're\nissuing to our users.\n\n266\n00:12:51,091 --> 00:12:52,620\nWhere this is the one for\n\n267\n00:12:52,620 --> 00:12:54,894\nthe key that Don's talking\nabout that root CA certificate.\n\n268\n00:12:55,945 --> 00:12:58,095\nSo I'm gonna make this as strong as I can.\n\n269\n00:12:58,095 --> 00:13:01,324\nWe'll go 4,096 bits on this guy.\n\n270\n00:13:01,324 --> 00:13:04,905\nThe longer the key,\nthe stronger the key, right?\n\n271\n00:13:04,905 --> 00:13:08,165\nThe more possibilities so\nthey're a little more difficult to break.\n\n272\n00:13:08,165 --> 00:13:11,050\nBut it's also takes more processing power\n\n273\n00:13:11,050 --> 00:13:13,570\nto work the algorithms with\na longer key like that.\n\n274\n00:13:13,570 --> 00:13:16,970\nSo I might not want to go with that\nkey length on the ones I'm issuing to\n\n275\n00:13:16,970 --> 00:13:18,980\nthe users, and the computers and\nthings like that.\n\n276\n00:13:18,980 --> 00:13:20,880\nBut for the root CA for sure.\n\n277\n00:13:20,880 --> 00:13:22,420\nI'm not changing any of the defaults.\n\n278\n00:13:22,420 --> 00:13:27,201\nSomething you guys should know though,\nthe ones with the little # in there,\n\n279\n00:13:27,201 --> 00:13:31,390\nthose are next gen cryptographic\nservice providers.\n\n280\n00:13:31,390 --> 00:13:35,110\nThey're stronger algorithms\nis all they are.\n\n281\n00:13:35,110 --> 00:13:38,180\nSHA1 is really not considered all that-\n>> Yeah,\n\n282\n00:13:38,180 --> 00:13:41,600\nSHA1 has some known collision attacks so\ndoes MD5,\n\n283\n00:13:41,600 --> 00:13:45,120\nso a lot of security professionals\nare recommending SHA256 or higher.\n\n284\n00:13:45,120 --> 00:13:47,700\nSo you might want to choose\none of those to bump it up.\n\n285\n00:13:48,720 --> 00:13:53,100\nDo note that the stronger\nthe encryption you put on these\n\n286\n00:13:53,100 --> 00:13:55,640\nthe less compatibility you get.\n\n287\n00:13:55,640 --> 00:13:59,390\nIf you're gonna bring up other CA's\nthat aren't necessarily Windows CA's.\n\n288\n00:13:59,390 --> 00:14:01,800\nYou might have a Linux CA or\nsomething like that.\n\n289\n00:14:01,800 --> 00:14:04,705\nSo, you just need to make sure\nyour different systems support it.\n\n290\n00:14:04,705 --> 00:14:06,764\nIf this was going to\nbe used in production,\n\n291\n00:14:06,764 --> 00:14:08,722\nwe'd normally go SHA256 or higher.\n\n292\n00:14:08,722 --> 00:14:09,604\n>> Exactly.\n\n293\n00:14:09,604 --> 00:14:13,890\nAll right, and\nthen we're going to give our CA a name.\n\n294\n00:14:13,890 --> 00:14:20,300\nI'm just going to call it something\npretty simple like root CA, Next.\n\n295\n00:14:20,300 --> 00:14:22,300\nAnd then this validity\nperiod again is not for\n\n296\n00:14:22,300 --> 00:14:23,830\nthe certificates we're gonna be issuing.\n\n297\n00:14:23,830 --> 00:14:28,340\nEach certificate template I can\nset the validity period for.\n\n298\n00:14:28,340 --> 00:14:29,330\nThis is for the root scan.\n\n299\n00:14:29,330 --> 00:14:31,810\nBecause he's gonna be offline,\nI don't want to have to go in and\n\n300\n00:14:31,810 --> 00:14:33,540\nrenew it as often and things like that.\n\n301\n00:14:33,540 --> 00:14:35,010\nSo I'll leave it at like five years.\n\n302\n00:14:35,010 --> 00:14:37,460\nI've known some people that\nbump it up even further.\n\n303\n00:14:37,460 --> 00:14:38,650\nBut the longer it's valid for\n\n304\n00:14:38,650 --> 00:14:40,750\nthe more time you're giving\nthe bad guys to work on it.\n\n305\n00:14:40,750 --> 00:14:44,590\nSo you don't want it to be good for\n30 years or anything like that.\n\n306\n00:14:44,590 --> 00:14:47,360\n>> I'm always surprised when I see ones\non the Internet like for Verisign and\n\n307\n00:14:47,360 --> 00:14:48,970\nstuff that have issued it at 100 years.\n\n308\n00:14:48,970 --> 00:14:51,550\nAnd you'll see that,\nthe shorter the better.\n\n309\n00:14:51,550 --> 00:14:53,280\nBut there is one thing to remember, and\n\n310\n00:14:53,280 --> 00:14:55,007\nthey even have that little\nnote there on the screen.\n\n311\n00:14:55,007 --> 00:14:59,815\nIt's kinda small there,\nwhich is, this validity period\n\n312\n00:14:59,815 --> 00:15:04,055\nshould be longer than the longest\ncertificate you plan on issuing, right.\n\n313\n00:15:04,055 --> 00:15:07,935\nIf I'm gonna issue a certificate that's\na ten year certificate to a client, and\n\n314\n00:15:07,935 --> 00:15:10,457\nmy root CA certificate\nexpires in that period,\n\n315\n00:15:10,457 --> 00:15:13,087\nit's gonna cause problems when\nit comes time to renewing.\n\n316\n00:15:13,087 --> 00:15:15,403\nSo you need to think about the types\nof certificates you issue.\n\n317\n00:15:15,403 --> 00:15:19,700\n>> Now as a rule of thumb I try and issue\none year certificates whenever possible.\n\n318\n00:15:19,700 --> 00:15:21,512\n>> Right.\n>> One year is a good amount of time.\n\n319\n00:15:21,512 --> 00:15:28,826\n>> You'll find things like\nwhat is it IPSEC using shot.\n\n320\n00:15:28,826 --> 00:15:35,710\nWhat is it SHA256 and shoot so [LAUGH]\n>> Try with going with that.\n\n321\n00:15:35,710 --> 00:15:36,620\nI can't think of it.\n\n322\n00:15:38,640 --> 00:15:40,841\n>> I'm trying to think\nof the bit strengths,\n\n323\n00:15:40,841 --> 00:15:43,043\nthat when you do like a 1,024 bit key,\n\n324\n00:15:43,043 --> 00:15:46,981\nit takes a single machine almost a billion\nyears to be able to break that key.\n\n325\n00:15:46,981 --> 00:15:47,740\n>> Oh yes yep.\n\n326\n00:15:47,740 --> 00:15:51,721\n>> And if you go to a 2,048\nbit key what you did 4,096-\n\n327\n00:15:51,721 --> 00:15:52,696\n>> I did 4,096, yep.\n\n328\n00:15:52,696 --> 00:15:53,335\n>> I don't know on that one.\n\n329\n00:15:53,335 --> 00:15:57,439\nBut when you do 2,048 bit it takes\nA machine hundreds of billions of years to\n\n330\n00:15:57,439 --> 00:15:58,001\nbreak it.\n\n331\n00:15:58,001 --> 00:15:58,595\n>> Right.\n\n332\n00:15:58,595 --> 00:16:01,880\n>> Now attacks these days don't take place\non one machine, they're distributed.\n\n333\n00:16:01,880 --> 00:16:04,150\nBut when you're talking\nabout billions of years,\n\n334\n00:16:04,150 --> 00:16:06,100\nit'll take somebody a long\ntime to break that.\n\n335\n00:16:06,100 --> 00:16:11,890\nSo, by picking a shorter period here,\nnow somebody not only has to try and\n\n336\n00:16:11,890 --> 00:16:14,740\nbreak an already hard key, but\nthey have to do it in that one year.\n\n337\n00:16:14,740 --> 00:16:17,010\nBecause if they don't,\nby the time that year is up,\n\n338\n00:16:17,010 --> 00:16:18,240\nyou're going to issue a new key.\n\n339\n00:16:18,240 --> 00:16:21,040\nSo, if you put 100 years, are you safe?\n\n340\n00:16:21,040 --> 00:16:24,010\nProbably, right,\nyou're probably safe at 100 years, but\n\n341\n00:16:24,010 --> 00:16:25,400\nyou don't know if you're safe.\n\n342\n00:16:25,400 --> 00:16:28,520\n>> Yeah, and who knows where computing\npower's gonna be 10 years from now,\n\n343\n00:16:28,520 --> 00:16:29,850\n15 years from now.\n\n344\n00:16:29,850 --> 00:16:34,066\nAnd so, now all of a sudden,\nwhat seemed really strong,\n\n345\n00:16:34,066 --> 00:16:35,960\n4,096, is considered extremely weak and\n\n346\n00:16:35,960 --> 00:16:39,470\nnow we're going with 9,000 and something,\nor something completely different.\n\n347\n00:16:39,470 --> 00:16:42,203\n>> And I know what the Verisign\nguys are doing, which is they say,\n\n348\n00:16:42,203 --> 00:16:44,482\nwe'll issue you the certificate for\n100 years.\n\n349\n00:16:44,482 --> 00:16:48,754\nAnd then when the time comes, maybe ten\nyears from now we can always issue a new\n\n350\n00:16:48,754 --> 00:16:51,414\ncertificate and\ninvalidate the previous one.\n\n351\n00:16:51,414 --> 00:16:54,080\nSo, they can always to that,\nyou can expire a certificate early if you\n\n352\n00:16:54,080 --> 00:16:55,970\nwant to through their revocation system.\n\n353\n00:16:55,970 --> 00:17:00,475\nSo just make sure that the rule of\nthumb here is, pick a number that's\n\n354\n00:17:00,475 --> 00:17:04,757\nbigger than the longest term of\ncertificate you plan on issuing.\n\n355\n00:17:04,757 --> 00:17:06,083\nSo, with a five year one here,\n\n356\n00:17:06,083 --> 00:17:08,839\nall those certificates we issue\nshould be less than five years.\n\n357\n00:17:08,839 --> 00:17:11,840\n>> Should be less than five, and\none or two is typically what I see.\n\n358\n00:17:12,840 --> 00:17:15,120\nAll right, so we'll just keep on\nclicking Next after we pick that.\n\n359\n00:17:15,120 --> 00:17:16,690\nI'm going to leave the default location.\n\n360\n00:17:16,690 --> 00:17:20,060\nThis is where it's going to store the\ncertificate services database as well as\n\n361\n00:17:20,060 --> 00:17:21,050\nthe log files.\n\n362\n00:17:21,050 --> 00:17:24,307\nYou can see it's System 32 and\nthen cert log.\n\n363\n00:17:26,524 --> 00:17:27,650\nAnd that's about it.\n\n364\n00:17:27,650 --> 00:17:29,980\nWe'll click Configure,\nif I'm happy with all my choices.\n\n365\n00:17:31,010 --> 00:17:33,350\nAnd it shouldn't take it\nlong to set this guy up.\n\n366\n00:17:33,350 --> 00:17:35,260\nNow, the next thing we're gonna do,\n\n367\n00:17:35,260 --> 00:17:38,710\nonce we've finished with this is, I've got\nto go in and modify a of couple things.\n\n368\n00:17:38,710 --> 00:17:41,940\nBecause this guys not tied\ninto Active Directory,\n\n369\n00:17:41,940 --> 00:17:45,830\nhe can't just publish his certificate and\nhis certificate revocation list,\n\n370\n00:17:45,830 --> 00:17:48,750\nwhich we'll talk more about here in\na little bit, in Active Directory.\n\n371\n00:17:48,750 --> 00:17:51,770\nBut the subordinates need\nto be able to see that.\n\n372\n00:17:51,770 --> 00:17:54,750\nThey need to talk to the root, or they\ndon't need to talk to the root, they need\n\n373\n00:17:54,750 --> 00:17:59,500\nto find his certificate and they need to\nfind his certificate revocation list.\n\n374\n00:17:59,500 --> 00:18:03,380\nSo we're gonna change where\nit's publishing those guys to.\n\n375\n00:18:03,380 --> 00:18:08,350\nSo I can see configuration succeeded,\nwe're gonna close both of those wizards.\n\n376\n00:18:08,350 --> 00:18:12,574\nAnd now I should be able to launch my good\nold CertSrv console, so there we are,\n\n377\n00:18:12,574 --> 00:18:14,119\nCertification Authority.\n\n378\n00:18:16,000 --> 00:18:17,610\nAnd that'll load up.\n\n379\n00:18:17,610 --> 00:18:18,660\nHopefully everything is good.\n\n380\n00:18:18,660 --> 00:18:20,500\nI got a nice green check mark over there.\n\n381\n00:18:20,500 --> 00:18:22,930\nYou guys can see that.\n\n382\n00:18:22,930 --> 00:18:25,910\nAnd because, another we'll point out,\nwhat's your one difference you're gonna\n\n383\n00:18:25,910 --> 00:18:29,180\nsee between stand-alone and\nEnterprise CAs,\n\n384\n00:18:29,180 --> 00:18:33,230\nbecause this guy's a stand-alone,\nI do not have a templates node here.\n\n385\n00:18:33,230 --> 00:18:36,210\nThe Enterprise CAs give you\naccess to the templates.\n\n386\n00:18:36,210 --> 00:18:39,390\nYou can still actually use templates\nwith these stand-alones, but\n\n387\n00:18:39,390 --> 00:18:43,470\nyou have to go a completely separate\nroute, it's not really set up for that.\n\n388\n00:18:43,470 --> 00:18:46,730\nSo what I'm gonna do is, I'm gonna pull\nup the properties here of my root CA,\n\n389\n00:18:46,730 --> 00:18:51,137\nand this for some reason always takes\na while to get these properties up.\n\n390\n00:18:52,550 --> 00:18:54,690\nTo me it's a while,\nI'm like you, I get impatient.\n\n391\n00:18:54,690 --> 00:18:56,945\nI'm like, why does it take 30\nseconds to open up properties?\n\n392\n00:18:56,945 --> 00:18:59,615\n>> Well, while we're waiting on it,\nyou mentioned the Enterprise CAs.\n\n393\n00:18:59,615 --> 00:19:01,210\n>> Mm-hm.\n>> If we had made this one\n\n394\n00:19:01,210 --> 00:19:04,425\nan Enterprise CA, it would've already\nregistered with the Active Directory and\n\n395\n00:19:04,425 --> 00:19:06,490\nit'd be present so\nwe wouldn't have to do these steps.\n\n396\n00:19:06,490 --> 00:19:07,690\n>> Right.\n>> So, you might be thinking,\n\n397\n00:19:07,690 --> 00:19:08,510\nwell I'll just go with that route,\n\n398\n00:19:08,510 --> 00:19:10,720\nI'll just register it with\nthe Active Directory.\n\n399\n00:19:10,720 --> 00:19:11,660\nHere's one problem.\n\n400\n00:19:11,660 --> 00:19:13,800\nIf you are planning on\nshutting this system down and\n\n401\n00:19:13,800 --> 00:19:17,640\ntaking it off the network,\na Windows machine\n\n402\n00:19:17,640 --> 00:19:21,680\nexpects to see the Active Directory\nat least once every six months.\n\n403\n00:19:21,680 --> 00:19:24,500\nIf a machine doesn't see\nthe Active Directory for\n\n404\n00:19:24,500 --> 00:19:28,850\nsix months, the trust relationship between\nthat machine and the domain breaks.\n\n405\n00:19:28,850 --> 00:19:32,230\nAnd once that happens,\nit causes all sorts of problems and\n\n406\n00:19:32,230 --> 00:19:35,695\nyou can get your CA into a point\nwhere it may not be bootable anymore.\n\n407\n00:19:35,695 --> 00:19:38,330\nYou may have done unrepairable.\n\n408\n00:19:38,330 --> 00:19:39,650\n>> Mm-hm, irreparable or something, yeah.\n\n409\n00:19:39,650 --> 00:19:43,620\n>> Irreparable or something,\ndamage [LAUGH] to the machine.\n\n410\n00:19:43,620 --> 00:19:45,570\nAnd then you end up in a really bad spot.\n\n411\n00:19:45,570 --> 00:19:49,280\nSo by doing a non-domain machine like\nthis, we can leave it off as long as want.\n\n412\n00:19:49,280 --> 00:19:50,460\nWe can leave it off for three years.\n\n413\n00:19:50,460 --> 00:19:52,344\nWhen we power it up,\nit will be horribly outdated.\n\n414\n00:19:52,344 --> 00:19:53,754\n>> It might need some\nWindows Updates [LAUGH].\n\n415\n00:19:53,754 --> 00:19:55,391\n>> But, it'll be fine.\n\n416\n00:19:55,391 --> 00:19:58,971\nAnd we could have, maybe manually\nbeen doing the updates to it offline.\n\n417\n00:19:58,971 --> 00:20:00,010\nYou can do that.\n\n418\n00:20:00,010 --> 00:20:01,370\nSo, keep that in mind.\n\n419\n00:20:01,370 --> 00:20:04,194\nThat's one of the risks if you choose\nto go the Enterprise CA route.\n\n420\n00:20:04,194 --> 00:20:05,251\n>> Exactly.\n\n421\n00:20:05,251 --> 00:20:07,939\nAll right, so here's my Properties,\nand the first thing I'm gonna do is,\n\n422\n00:20:07,939 --> 00:20:10,502\nI'm gonna click View Certificate to\nshow you guys this because this CA,\n\n423\n00:20:10,502 --> 00:20:11,650\nhe needs a certificate as well.\n\n424\n00:20:11,650 --> 00:20:13,580\nHe needs to be able to prove his identity.\n\n425\n00:20:13,580 --> 00:20:15,940\nBut there's nobody higher\nthan him in the hierarchy.\n\n426\n00:20:15,940 --> 00:20:18,310\nSo, where is he getting\nhis certificate from?\n\n427\n00:20:18,310 --> 00:20:21,610\nHe creates what's called\na self-signed certificate.\n\n428\n00:20:21,610 --> 00:20:23,035\nEventually, we'll get to see it.\n\n429\n00:20:23,035 --> 00:20:23,568\n>> [LAUGH]\n>> And\n\n430\n00:20:23,568 --> 00:20:27,562\nso, because there's nobody higher than\nhim in the public key infrastructure,\n\n431\n00:20:27,562 --> 00:20:29,513\nin RPKI, he is the root, he is the top.\n\n432\n00:20:29,513 --> 00:20:32,510\nHe creates a self-signed certificate, so\n\n433\n00:20:32,510 --> 00:20:36,481\nwhat we'll see is it is issued\nto Root CA issued by Root CA.\n\n434\n00:20:36,481 --> 00:20:38,560\nSo that's what they mean\nby self-signed certificate.\n\n435\n00:20:38,560 --> 00:20:40,690\nIt's good for everything,\nand as we can see,\n\n436\n00:20:40,690 --> 00:20:42,985\nour validity period that we set for\nfive years there.\n\n437\n00:20:42,985 --> 00:20:46,540\nAnd if we go to the certification path,\nI'll see again he's at the top.\n\n438\n00:20:46,540 --> 00:20:47,860\nThere is nothing above him.\n\n439\n00:20:49,240 --> 00:20:52,000\nAll right, so the first thing that we're\ngonna do to get this guy set up, I'm gonna\n\n440\n00:20:52,000 --> 00:20:56,380\nhead over to this Extensions tab, and I've\ngot two extensions I've gotta deal with.\n\n441\n00:20:56,380 --> 00:21:01,065\nI've got what's called the CDP,\nor the CRL Distribution Point,\n\n442\n00:21:01,065 --> 00:21:04,210\nand sorry I guess I need to define\nall the acronyms as we go here.\n\n443\n00:21:04,210 --> 00:21:06,880\nThis is like an acronym within an acronym.\n\n444\n00:21:06,880 --> 00:21:11,310\nSo you've heard us mention a couple times\nrevocation, or certificate revocation.\n\n445\n00:21:11,310 --> 00:21:13,890\nI love the analogy of a driver's license,\ncuz certificates and\n\n446\n00:21:13,890 --> 00:21:16,790\ndriver's licenses are very\nsimilar in concept.\n\n447\n00:21:16,790 --> 00:21:18,540\nIt's all about trust and\n\n448\n00:21:18,540 --> 00:21:22,080\ntrusting the person that issued\nthe certificate in the first place.\n\n449\n00:21:22,080 --> 00:21:24,140\nYou know, when we talk about,\n\n450\n00:21:24,140 --> 00:21:26,340\nlike if you happen to be pulled\nover by a police officer.\n\n451\n00:21:26,340 --> 00:21:27,620\nHopefully that doesn't happen.\n\n452\n00:21:27,620 --> 00:21:30,170\nYou know, the first thing thing\nhe does is he asks you for\n\n453\n00:21:30,170 --> 00:21:31,580\nyour driver's license, right?\n\n454\n00:21:31,580 --> 00:21:33,010\nAnd you show him that license.\n\n455\n00:21:33,010 --> 00:21:34,420\nAnd it has your information on there.\n\n456\n00:21:34,420 --> 00:21:36,060\nIt identifies you.\n\n457\n00:21:36,060 --> 00:21:37,820\nThat's got your name,\nyour address, your weight,\n\n458\n00:21:37,820 --> 00:21:39,920\nand whatever stuff they\nwanna put on there.\n\n459\n00:21:39,920 --> 00:21:42,740\nBut the police officer,\nhe trusts the information\n\n460\n00:21:42,740 --> 00:21:47,610\nis accurate on that driver's license and\nthat's because there's a big old stamp,\n\n461\n00:21:47,610 --> 00:21:50,660\nin our case from the state of Florida,\non that license.\n\n462\n00:21:50,660 --> 00:21:54,430\nAnd he knows that, before they issue that\ndriver's license, they verified all that.\n\n463\n00:21:54,430 --> 00:21:59,130\nThey made me bring in birth certificates,\nDNA samples, I mean the whole nine, right?\n\n464\n00:22:00,160 --> 00:22:02,660\nSo, he knows that all\nthe information has been verified.\n\n465\n00:22:02,660 --> 00:22:04,200\nHe does not have to verify it again.\n\n466\n00:22:04,200 --> 00:22:06,660\nSo he trusts that.\n\n467\n00:22:06,660 --> 00:22:08,810\nBut my license can get suspended, right?\n\n468\n00:22:08,810 --> 00:22:12,620\nIf I don't pay a ticket or something like\nthat, my license could get suspended.\n\n469\n00:22:12,620 --> 00:22:16,990\nThey don't come into my house and\ntake my license back from me, right?\n\n470\n00:22:16,990 --> 00:22:21,260\nThey maintain a list, a database, and\nwhen that police officer takes my license,\n\n471\n00:22:21,260 --> 00:22:25,390\nthe second thing he does is he goes to his\ncar and he punches in my driver's license.\n\n472\n00:22:25,390 --> 00:22:28,890\nAnd he's making sure that the driver's\nlicense is in good standing.\n\n473\n00:22:28,890 --> 00:22:31,380\nBecause by looking at\nthe driver's license,\n\n474\n00:22:31,380 --> 00:22:34,120\nhe has no idea of knowing\nif it's suspended, expired.\n\n475\n00:22:34,120 --> 00:22:35,784\nWell, maybe he'd know\nexpired cuz of the date, but.\n\n476\n00:22:35,784 --> 00:22:36,660\n>> [LAUGH]\n>> And it's\n\n477\n00:22:36,660 --> 00:22:37,990\nthe same thing with certificates.\n\n478\n00:22:37,990 --> 00:22:42,920\nIf I issue a certificate to a user, and\nthen they leave my company before their\n\n479\n00:22:42,920 --> 00:22:46,190\ncertificate reaches\nthe end of its lifetime.\n\n480\n00:22:46,190 --> 00:22:50,080\nI don't want them trying to use the\ncertificate to digitally sign an email, or\n\n481\n00:22:50,080 --> 00:22:52,980\nto get into the building,\nor to log on to a system.\n\n482\n00:22:52,980 --> 00:22:55,180\nBut I can't take the certificate\nback from them, right?\n\n483\n00:22:55,180 --> 00:22:58,450\nThey could have several copies\nof it on removable media.\n\n484\n00:22:58,450 --> 00:23:00,060\nSo I've got no way of just taking it back.\n\n485\n00:23:00,060 --> 00:23:03,390\nSo what I have to do is maintain\na list of revoked certificates.\n\n486\n00:23:03,390 --> 00:23:07,810\nWe go in, we end the validity period,\nor we revoke the certificate.\n\n487\n00:23:07,810 --> 00:23:09,710\nAnd then we publish a list.\n\n488\n00:23:09,710 --> 00:23:13,030\nAnd that list has to be made available so\nthat, for example,\n\n489\n00:23:13,030 --> 00:23:16,022\nwhen you connect to Bank of America,\nyou're getting Bank of America's\n\n490\n00:23:16,022 --> 00:23:19,850\ncertificate, you're seeing that it\nwas issued by somebody like Verisign.\n\n491\n00:23:19,850 --> 00:23:21,610\nAnd then you're going to Verisign, and\n\n492\n00:23:21,610 --> 00:23:23,830\nyou're checking Verisign's\nrevocation list.\n\n493\n00:23:23,830 --> 00:23:25,340\nHey, is this certificate still good?\n\n494\n00:23:25,340 --> 00:23:28,810\nWell how did you find\nVerisign's revocation list?\n\n495\n00:23:28,810 --> 00:23:31,868\nBecause of these right here,\nthese CDP extensions.\n\n496\n00:23:31,868 --> 00:23:35,966\nThe CRL, the revocation list itself,\nis called the CRL,\n\n497\n00:23:35,966 --> 00:23:40,657\ncertificate revocation list, and\nwe all call it krill for short.\n\n498\n00:23:40,657 --> 00:23:45,616\nAnd then the CRL distribution point,\nor CDP, or krill distribution point,\n\n499\n00:23:45,616 --> 00:23:48,297\nis where we're publishing that list to.\n\n500\n00:23:48,297 --> 00:23:52,318\nAnd as we said earlier, you'll see there's\npaths in here that are going to like LDAP.\n\n501\n00:23:52,318 --> 00:23:58,070\nAll right for active directory, there's\na HTTP one that'll go to a website.\n\n502\n00:23:58,070 --> 00:24:00,970\nBut again,\nhe can't access active directory so\n\n503\n00:24:00,970 --> 00:24:02,670\nwe're going to add a couple in here.\n\n504\n00:24:02,670 --> 00:24:06,540\nAnd you just click add,\nto add a new Extension.\n\n505\n00:24:06,540 --> 00:24:09,190\nAnd for the location I've got to\nmake sure I get this part right.\n\n506\n00:24:09,190 --> 00:24:11,436\nBecause otherwise it\nwill hose everything up.\n\n507\n00:24:11,436 --> 00:24:13,061\n>> [LAUGH] That's always good.\n\n508\n00:24:13,061 --> 00:24:18,330\n>> I have set one of these up before and\nmade a typo in the CDP.\n\n509\n00:24:18,330 --> 00:24:21,610\nAnd then what happens is, he tries to\nissue to certificates to the first layer\n\n510\n00:24:21,610 --> 00:24:24,730\nof subordinates, and then the subordinates\ntake their certificate and\n\n511\n00:24:24,730 --> 00:24:28,780\nthey can't find their revocation list, and\nthey won't let you set up the subordinate.\n\n512\n00:24:28,780 --> 00:24:33,440\nAnd trying it to issue a second\none is nearly impossible.\n\n513\n00:24:33,440 --> 00:24:37,025\nSo what I'm gonna do is you\ncan see I'm actually gonna\n\n514\n00:24:37,025 --> 00:24:41,495\nput this over on the domain\ncontroller itself, which is.\n\n515\n00:24:41,495 --> 00:24:46,945\n.itpro.tv/certdata and this'll make more\n\n516\n00:24:46,945 --> 00:24:52,535\nsense when you see my next\ncouple steps from now.\n\n517\n00:24:52,535 --> 00:24:53,510\n>> We haven't set up that server yet,\nright?\n\n518\n00:24:53,510 --> 00:24:55,233\nYou're doing this preemptively.\n\n519\n00:24:55,233 --> 00:24:58,481\n>> Exactly, because I gotta get this done\nbecause he's gotta issue certificates to\n\n520\n00:24:58,481 --> 00:25:01,635\nhis subordinates, and this has to be set\nbecause this information is gonna be in\n\n521\n00:25:01,635 --> 00:25:03,170\nthose certificates that he issues.\n\n522\n00:25:03,170 --> 00:25:06,453\nSo even though it's not there yet\nI'm going to go ahead and\n\n523\n00:25:06,453 --> 00:25:08,933\ntell him where its going\nto be in the future.\n\n524\n00:25:08,933 --> 00:25:12,720\nAnd then after cert data we actually\nhave a pretty cool little option here.\n\n525\n00:25:12,720 --> 00:25:14,830\nI can insert these variables so\n\n526\n00:25:14,830 --> 00:25:18,210\nI've got certdata/ and\nI'm going to insert the CA name.\n\n527\n00:25:19,930 --> 00:25:23,039\nSo that's just a variable\nthat'll get replaced with\n\n528\n00:25:23,039 --> 00:25:25,456\nthe certification authority's name and\n\n529\n00:25:25,456 --> 00:25:30,371\nthen after that we're going to insert the,\nif I can find it so you wanna name suffix.\n\n530\n00:25:33,806 --> 00:25:39,050\nAnd then after that we are going\nto insert Delta CRL allow.\n\n531\n00:25:39,050 --> 00:25:41,559\nDelta CRL, Delta meaning changes right?\n\n532\n00:25:42,730 --> 00:25:47,730\nSo we can publish the full krill or we can\npublish just the changes since the last\n\n533\n00:25:47,730 --> 00:25:51,880\nfull publication .And then what I've\ngot to do is I've got to get in here.\n\n534\n00:25:51,880 --> 00:25:54,710\nNow I find the easiest way is just\nto click in here anywhere and\n\n535\n00:25:54,710 --> 00:25:56,240\nthen hit my n key.\n\n536\n00:25:56,240 --> 00:25:59,025\nGet to the end of the line and add a .crl.\n\n537\n00:26:00,410 --> 00:26:04,990\nNow there's a sample,\nyou can see right here, example location.\n\n538\n00:26:04,990 --> 00:26:08,930\nAnd it happens to be the exact same\none I'm using where it's server name/,\n\n539\n00:26:08,930 --> 00:26:11,780\nthey did certenroll instead of certdata.\n\n540\n00:26:11,780 --> 00:26:14,490\nCA name, CRL name suffix,\n\n541\n00:26:14,490 --> 00:26:19,490\nDelta crl allowed .crl,\nmake sure I type that correct.\n\n542\n00:26:21,840 --> 00:26:22,680\nAll right, you good?\n\n543\n00:26:22,680 --> 00:26:24,590\n>> Much easier to fix\na typo now than later.\n\n544\n00:26:24,590 --> 00:26:25,470\n>> Yes, absolutely.\n\n545\n00:26:25,470 --> 00:26:28,000\nAll right, so we'll go ahead and\nclick OK on that.\n\n546\n00:26:28,000 --> 00:26:32,960\nAnd then what I wanna do is I wanna\nmake sure that this CA includes that\n\n547\n00:26:32,960 --> 00:26:34,528\npath that I just typed in.\n\n548\n00:26:34,528 --> 00:26:36,910\nIf I type it in and\ndon't check these marks,\n\n549\n00:26:36,910 --> 00:26:39,710\nthen it won't include it in\nthe certificates that it issues.\n\n550\n00:26:39,710 --> 00:26:42,140\nSo I want to include it in the CRLs and\n\n551\n00:26:42,140 --> 00:26:46,770\nI want to include it in the CDP\nextensions of those issued certificates.\n\n552\n00:26:46,770 --> 00:26:48,410\nI'm gonna go ahead and\napply these changes.\n\n553\n00:26:48,410 --> 00:26:52,220\nThese changes are gonna require a restart,\nbut I've got more changes I want to make.\n\n554\n00:26:52,220 --> 00:26:54,690\nSo I am going to say no to restarting it.\n\n555\n00:26:54,690 --> 00:27:00,260\nAnd now I'm gonna add a path for the AIA,\nor the Authority Information Access.\n\n556\n00:27:00,260 --> 00:27:05,330\nThis is where you can find\nthe root CA certificate.\n\n557\n00:27:05,330 --> 00:27:10,000\nBecause if a client needs to trust,\nthey need to trust the issuing CAs.\n\n558\n00:27:10,000 --> 00:27:12,560\nHe's going to want to verify,\nhey, show me your certificate.\n\n559\n00:27:12,560 --> 00:27:13,970\nThis is where he is going to find it.\n\n560\n00:27:13,970 --> 00:27:15,770\nBecause if I issue a certificate to Don,\n\n561\n00:27:15,770 --> 00:27:19,110\nhow does Don know where to\nfind the root CA certificate?\n\n562\n00:27:19,110 --> 00:27:22,870\nIn the certificate in the AI extensions\nis the path of where to go to\n\n563\n00:27:22,870 --> 00:27:24,340\nfind that certificate.\n\n564\n00:27:24,340 --> 00:27:27,224\nSo same thing,\nI'm just going to click Add.\n\n565\n00:27:27,224 --> 00:27:33,148\nThis path is similar, it's gonna be\n\n566\n00:27:33,148 --> 00:27:43,103\nhttp://lun-dc1.lab.itpro.tv/certaindata/.\n\n567\n00:27:43,103 --> 00:27:48,219\nAnd then I'm gonns insert the server DNS\n\n568\n00:27:48,219 --> 00:27:54,630\nname, Followed by an underscore.\n\n569\n00:27:54,630 --> 00:27:59,740\nIf I click in there it'll help.\n\n570\n00:27:59,740 --> 00:28:01,255\nThen I'm gonna insert the CA name.\n\n571\n00:28:06,341 --> 00:28:09,638\nAnd then we're gonna insert\nthe certificate name.\n\n572\n00:28:13,887 --> 00:28:14,791\nAnd that's not the one.\n\n573\n00:28:18,669 --> 00:28:25,560\nAnd on the end of this\none I need to add a .crt.\n\n574\n00:28:25,560 --> 00:28:31,150\nAnd again there's an example down here\nthat's similar to the one we're using.\n\n575\n00:28:31,150 --> 00:28:32,320\nThey say file.\n\n576\n00:28:32,320 --> 00:28:35,300\nI'm gonna be publishing\nthis to a web server.\n\n577\n00:28:35,300 --> 00:28:39,450\nServer name, certificate role,\nserver name, underscore CA name.\n\n578\n00:28:39,450 --> 00:28:41,500\nMake sure I got all that right.\n\n579\n00:28:41,500 --> 00:28:43,000\nCertificate name dot CRT.\n\n580\n00:28:43,000 --> 00:28:44,730\nAnd we'll click OK.\n\n581\n00:28:44,730 --> 00:28:45,480\nAnd then same thing,\n\n582\n00:28:45,480 --> 00:28:49,600\nI want to make sure that this new path is\nincluded when he issues new certificates.\n\n583\n00:28:49,600 --> 00:28:52,090\nSo I'm gonna include in the AIA extension.\n\n584\n00:28:52,090 --> 00:28:54,000\nAs well as, we don't really have an OCSP.\n\n585\n00:28:54,000 --> 00:28:57,130\nWe're gonna talk about that online\ncertificate status protocol later\n\n586\n00:28:57,130 --> 00:28:59,170\non in our episode here.\n\n587\n00:28:59,170 --> 00:29:01,600\nSo I've got both of those set.\n\n588\n00:29:01,600 --> 00:29:04,780\nNow when I click OK, that change\nis also gonna require a restart.\n\n589\n00:29:04,780 --> 00:29:08,400\nAnd now we'll go ahead and\nrestart that guy.\n\n590\n00:29:09,600 --> 00:29:10,630\nSo we'll get this set up.\n\n591\n00:29:11,958 --> 00:29:16,380\nLet this guy, it'll take just a second\nto reboot the certificate services.\n\n592\n00:29:16,380 --> 00:29:19,450\nAnd then we're gonna go and\nwe're gonna publish the CRL.\n\n593\n00:29:19,450 --> 00:29:23,140\nAnd get that out there.\n\n594\n00:29:23,140 --> 00:29:25,630\nAll right, looks like everything\nrestarted successfully,\n\n595\n00:29:25,630 --> 00:29:27,710\nI got a green check mark up there.\n\n596\n00:29:27,710 --> 00:29:30,160\nSo now I'm gonna go down to\nthese revoke certificates.\n\n597\n00:29:32,100 --> 00:29:35,490\nLater on I'll show you some of the options\nthat you have with publishing this.\n\n598\n00:29:35,490 --> 00:29:38,535\nFor right now just to get this lab\ngoing I'm just gonna go ahead and\n\n599\n00:29:38,535 --> 00:29:42,970\nright-click on revoke certificates,\nall tasks, and publish and\n\n600\n00:29:42,970 --> 00:29:45,970\nthat's gonna publish that CRL.\n\n601\n00:29:45,970 --> 00:29:50,201\nThe other thing I'm gonna need in order\nto set up my subordinate, I need that\n\n602\n00:29:50,201 --> 00:29:55,890\ncertificate of revocation list,\nthere it goes, I was like, come on baby!\n\n603\n00:29:55,890 --> 00:29:59,461\nI can't do a delta CRL because delta\nmeans changes since the last pull,\n\n604\n00:29:59,461 --> 00:30:02,274\nnever published a pull yet so\nwe can only publish a pull.\n\n605\n00:30:04,945 --> 00:30:06,710\nAll right,\nI can't remember if it's waiting.\n\n606\n00:30:06,710 --> 00:30:08,710\nNo success message, all right.\n\n607\n00:30:08,710 --> 00:30:12,310\nSo now what I need to do, the other thing\nI'm gonna need to set up my subordinates,\n\n608\n00:30:12,310 --> 00:30:15,640\nis a copy of this guy's certificate.\n\n609\n00:30:15,640 --> 00:30:17,875\nSo I'm gonna go back into\nthe properties of the root CA.\n\n610\n00:30:20,243 --> 00:30:24,098\n[SOUND] Which like I said.\n\n611\n00:30:24,098 --> 00:30:25,245\n>> We'll eventually get there.\n\n612\n00:30:25,245 --> 00:30:27,944\n>> Yeah, I don't know why\nit always takes that long.\n\n613\n00:30:27,944 --> 00:30:31,380\nAnd I'm gonna click on view certificate\nto view that root CA certificate again.\n\n614\n00:30:37,256 --> 00:30:39,110\nAnd he's thinking about it.\n\n615\n00:30:39,110 --> 00:30:40,910\nHe's like maybe I'll let you see it.\n\n616\n00:30:40,910 --> 00:30:41,515\nMaybe I won't.\n\n617\n00:30:41,515 --> 00:30:43,186\n[LAUGH]\n>> All right and\n\n618\n00:30:43,186 --> 00:30:48,455\nI'm gonna go over here to\nthe details tab and copy the file.\n\n619\n00:30:48,455 --> 00:30:52,995\nAnd that's gonna start my export wizard\nto allow me to export this certificate.\n\n620\n00:30:52,995 --> 00:30:54,615\nSo we'll click Next.\n\n621\n00:30:54,615 --> 00:30:57,532\nAnd I'm just gonna leave\nit in the X.509 standard.\n\n622\n00:30:58,755 --> 00:30:59,505\nI'm gonna click Next.\n\n623\n00:31:00,835 --> 00:31:05,745\nAnd I'm gonna export it out to, let's put\nit, I've got a couple files I'm gonna\n\n624\n00:31:05,745 --> 00:31:08,950\nhave to copy over,\nI'm gonna go ahead and do it right now.\n\n625\n00:31:08,950 --> 00:31:10,670\nWhat I'm gonna do is,\nI'm gonna send this over to DC1,\n\n626\n00:31:10,670 --> 00:31:13,600\ncuz eventually I've gotta\ncopy it over there anyway, so\n\n627\n00:31:13,600 --> 00:31:18,570\nI'm gonna kinda cheat and go ahead and get\nit there using our administrative shares.\n\n628\n00:31:18,570 --> 00:31:20,600\n>> Now, Mike chose the X509 format,\n\n629\n00:31:20,600 --> 00:31:24,180\nand in that format it's just\nthe public key that's being sent.\n\n630\n00:31:24,180 --> 00:31:26,550\nAnd that's all we need is the public key,\nnot the private key.\n\n631\n00:31:26,550 --> 00:31:29,970\nRemember that, private keys\nshould just stay on the server.\n\n632\n00:31:29,970 --> 00:31:32,760\nBe careful,\nif you pick some of the other formats,\n\n633\n00:31:32,760 --> 00:31:38,090\nlike if you pick the PFX format, that\none can export the private key as well.\n\n634\n00:31:38,090 --> 00:31:41,520\nAnd so, if you do that it'll ask you if\nyou wanna export the private key also.\n\n635\n00:31:41,520 --> 00:31:43,100\nYou wanna make sure you say no.\n\n636\n00:31:43,100 --> 00:31:44,460\n>> Right.\n\n637\n00:31:44,460 --> 00:31:48,450\n>> The only export of that private key\nyou should make is one for a backup copy.\n\n638\n00:31:48,450 --> 00:31:50,920\nYou burn it to a disk,\nstick it in a vault somewhere.\n\n639\n00:31:50,920 --> 00:31:53,670\nUnderstand that that is the most\nsensitive part of this system.\n\n640\n00:31:53,670 --> 00:31:56,851\nSo this, right here, what he's doing,\nhe just needs the public key.\n\n641\n00:31:56,851 --> 00:31:59,553\nAnd if an attacker gets our public key,\nbig deal, we'll give them the public key,\n\n642\n00:31:59,553 --> 00:32:00,102\nwe don't care.\n\n643\n00:32:00,102 --> 00:32:00,764\n>> Exactly.\n\n644\n00:32:00,764 --> 00:32:01,670\nHence the name public.\n\n645\n00:32:01,670 --> 00:32:02,207\n>> Yeah.\n\n646\n00:32:02,207 --> 00:32:04,350\nIf they have that key,\nthat just means that they can trust us.\n\n647\n00:32:04,350 --> 00:32:05,268\nDoesn't mean we trust them.\n\n648\n00:32:05,268 --> 00:32:05,830\n>> Exactly.\n\n649\n00:32:06,850 --> 00:32:07,950\nAnd a couple more things.\n\n650\n00:32:07,950 --> 00:32:11,068\nSince we published that CRL,\n\n651\n00:32:11,068 --> 00:32:17,428\none of the locations in that CDP\nlist was a default location,\n\n652\n00:32:17,428 --> 00:32:26,320\nC:\\Windows\\System32\\SearchServe and\ninsert enroll.\n\n653\n00:32:26,320 --> 00:32:30,280\nSo here, I can see another copy\nof that root CA certificate\n\n654\n00:32:30,280 --> 00:32:33,360\nas well as my certificate revocation list.\n\n655\n00:32:34,460 --> 00:32:36,300\nSo I'm gonna take both of those and\ncopy them.\n\n656\n00:32:38,020 --> 00:32:41,720\nThen I'm going to navigate\nback over to DC1.\n\n657\n00:32:41,720 --> 00:32:48,460\nC drive there and\nI'm just going to paste those files.\n\n658\n00:32:48,460 --> 00:32:53,170\nAgain, now if this was truly offline,\nI would be doing this via thumb drive or\n\n659\n00:32:53,170 --> 00:32:55,850\nsome type of removable media or\nsomething like that.\n\n660\n00:32:55,850 --> 00:32:57,310\nI'm kind of cheating here.\n\n661\n00:32:57,310 --> 00:33:00,350\nWe're saying we're setting it\nup offline but to make the lab.\n\n662\n00:33:00,350 --> 00:33:03,360\nI don't have thumb drives for\nmy VMs and all that stuff.\n\n663\n00:33:04,790 --> 00:33:07,276\nSo now that we got that,\nI know it's about time to take a break.\n\n664\n00:33:07,276 --> 00:33:08,357\nWhat do you think?\n\n665\n00:33:08,357 --> 00:33:10,025\n>> Yeah.\nThis is a good spot to stop because we're\n\n666\n00:33:10,025 --> 00:33:10,933\ndone on the root now, right?\n\n667\n00:33:10,933 --> 00:33:11,781\n>> We're pretty much done there.\n\n668\n00:33:11,781 --> 00:33:14,978\nWe're going to switch over to the DC and\nset some things up over there and\n\n669\n00:33:14,978 --> 00:33:17,555\nthen work on our subordinate CA next.\n\n670\n00:33:17,555 --> 00:33:22,360\n>> Now, if you're a small business, and\nyou're not really handling critical data.\n\n671\n00:33:22,360 --> 00:33:24,780\nYou just want certificates for\nsome kind of internal use or whatever.\n\n672\n00:33:24,780 --> 00:33:26,390\n>> Yeah, signing emails or eAddress.\n\n673\n00:33:26,390 --> 00:33:28,280\n>> Then yeah, yeah, for\nsomething like that,\n\n674\n00:33:28,280 --> 00:33:31,070\nyou might choose to just\ndo a online route CA.\n\n675\n00:33:31,070 --> 00:33:34,730\nAnd then a lot of those steps that\nwe did right there aren't necessary.\n\n676\n00:33:34,730 --> 00:33:37,450\nBut usually if you're company's\nbig enough to need your own CA,\n\n677\n00:33:37,450 --> 00:33:40,320\nyou're gonna wanna do it right and\nthese are the steps to go through.\n\n678\n00:33:40,320 --> 00:33:43,820\nSo if it seems a little overly\ncomplex well, it's all for security.\n\n679\n00:33:43,820 --> 00:33:45,650\nIt's all for\nimplementing things the right way.\n\n680\n00:33:45,650 --> 00:33:46,610\n>> Exactly.\n\n681\n00:33:46,610 --> 00:33:47,950\n>> All right, well let's stop here and\ntake a break.\n\n682\n00:33:47,950 --> 00:33:50,150\nWhen we get back,\nwe're gonna see the second part,\n\n683\n00:33:50,150 --> 00:33:52,270\nwhich is actually getting\nour subordinate set up.\n\n684\n00:33:52,270 --> 00:33:54,550\nAnd the subordinate's the one\nthat does all the real work.\n\n685\n00:33:54,550 --> 00:33:56,160\nSo that's where the fun stuff starts.\n\n686\n00:33:56,160 --> 00:33:57,614\n>> Absolutely.\n>> So definitely stay tuned.\n\n687\n00:33:57,614 --> 00:33:58,796\nWe'll be back after this.\n\n688\n00:33:58,796 --> 00:34:06,774\n[MUSIC]\n\n689\n00:34:06,774 --> 00:34:07,380\nAll right.\n\n690\n00:34:07,380 --> 00:34:08,890\nWelcome back, everybody.\n\n691\n00:34:08,890 --> 00:34:11,780\nIn the first segment,\nwe got our root CA set up.\n\n692\n00:34:11,780 --> 00:34:14,310\nAnd even though it's not a part\nof the active directory,\n\n693\n00:34:14,310 --> 00:34:16,610\nwe've got it communicating\ninto our environment.\n\n694\n00:34:16,610 --> 00:34:17,690\nNow, we're ready to take the next step,\n\n695\n00:34:17,690 --> 00:34:19,644\nwhich is getting our\nsubordinate CA in place.\n\n696\n00:34:19,644 --> 00:34:22,831\nAnd our subordinate CA is going to\nbe attached to the active directory.\n\n697\n00:34:22,831 --> 00:34:25,130\nIn fact,\nours is going to be a domain controller.\n\n698\n00:34:25,130 --> 00:34:28,040\nNow, you don't have to do that,\nand in fact, in production,\n\n699\n00:34:28,040 --> 00:34:32,530\nwe prefer to have the subordinate CAs be\ndedicated machine that's not also a DC.\n\n700\n00:34:32,530 --> 00:34:34,450\nBut you can in a small environment.\n\n701\n00:34:34,450 --> 00:34:35,680\n>> Yeah, in a small environment you can.\n\n702\n00:34:35,680 --> 00:34:38,410\nCuz it is gonna be protected much\nlike a domain controller would.\n\n703\n00:34:38,410 --> 00:34:40,485\nHe's very sensitive information on him, so\n\n704\n00:34:40,485 --> 00:34:44,207\nit's not a huge risk putting it on there\nI don't think, but in most places yeah.\n\n705\n00:34:44,207 --> 00:34:47,040\nOne, for performance,\nyou want it off on a separate machine.\n\n706\n00:34:47,040 --> 00:34:49,304\nAnd for security, it's better if you can.\n\n707\n00:34:49,304 --> 00:34:51,740\nAnd in virtual environments why not,\nright?\n\n708\n00:34:51,740 --> 00:34:52,460\n>> Yeah, yeah.\n>> Unless you're\n\n709\n00:34:52,460 --> 00:34:55,470\nlimited by the amount of RAM in your\nlaptop and you just can run a couple.\n\n710\n00:34:55,470 --> 00:34:58,780\n>> Yeah, or licensing cost,\nI suppose, POS.\n\n711\n00:34:58,780 --> 00:35:00,890\n>> All right.\nSo let's get this turkey deployed.\n\n712\n00:35:00,890 --> 00:35:01,480\n>> All right.\n\n713\n00:35:01,480 --> 00:35:03,842\nFirst thing I'm going to do,\nI'm going to cheat real quick.\n\n714\n00:35:03,842 --> 00:35:07,230\nAnd remember, I said, this guy's gonna\nbe offline, but he's not really offline.\n\n715\n00:35:07,230 --> 00:35:10,280\nSo I'm gonna turn on some file and\nprinter sharing so\n\n716\n00:35:10,280 --> 00:35:13,600\nI can copy some files back\nto him in just a minute.\n\n717\n00:35:13,600 --> 00:35:15,146\nSo let me.\n>> Yeah.\n\n718\n00:35:15,146 --> 00:35:18,905\nIn real life LAN, we'd use a thumb drive\nto shuttle these files between the system\n\n719\n00:35:18,905 --> 00:35:20,710\ncuz the root CAL would be offline.\n\n720\n00:35:20,710 --> 00:35:23,560\nBut here in the initial stage,\nwe can go ahead and make it available.\n\n721\n00:35:23,560 --> 00:35:24,650\n>> Exactly.\n\n722\n00:35:24,650 --> 00:35:28,240\nSo I'm just gonna come in here to my\nadvanced sharing settings and see.\n\n723\n00:35:28,240 --> 00:35:29,520\nI think he's got.\n\n724\n00:35:29,520 --> 00:35:31,600\nYeah, he's got a private\nprofile applied right now.\n\n725\n00:35:31,600 --> 00:35:37,302\nI'm just gonna turn on all of that just so\nI can copy some files back to him.\n\n726\n00:35:37,302 --> 00:35:40,550\nAll right, so again, that's not something\nyou do in normally setting these guys up.\n\n727\n00:35:40,550 --> 00:35:44,220\nSo now back over to DC,\nwhich is going to be my subordinate CA.\n\n728\n00:35:44,220 --> 00:35:45,680\nAnd the first thing I need to do is,\n\n729\n00:35:45,680 --> 00:35:50,670\nbecause he's not part of my domain, I need\nto go create a DNS record for this guy.\n\n730\n00:35:50,670 --> 00:35:54,560\nIf your DNS is set up for\nsecure-only dynamic updates,\n\n731\n00:35:54,560 --> 00:35:58,925\nthen that root is not gonna be able\nto create a record for himself.\n\n732\n00:35:58,925 --> 00:36:02,275\nSo I'm just gonna come in here and\nmake one for him.\n\n733\n00:36:02,275 --> 00:36:04,105\nSo I was just gonna make a new A record.\n\n734\n00:36:05,945 --> 00:36:07,750\nAnd lets see, his name was, what?\n\n735\n00:36:07,750 --> 00:36:10,029\n>> LON-root, was it?\n\n736\n00:36:10,029 --> 00:36:12,500\n>> Yeah, LON-root, you are correct.\n\n737\n00:36:15,340 --> 00:36:16,852\n>> Look at that,\nI pay attention sometimes.\n\n738\n00:36:16,852 --> 00:36:17,567\n>> LON-root.\n\n739\n00:36:17,567 --> 00:36:21,712\n[LAUGH] And his IP address,\n10.1.1.9, I believe.\n\n740\n00:36:21,712 --> 00:36:23,732\nYou know, I should verify that.\n\n741\n00:36:23,732 --> 00:36:24,951\n>> Yeah, I have no idea.\n\n742\n00:36:24,951 --> 00:36:26,450\n[LAUGH]\n>> And make sure.\n\n743\n00:36:26,450 --> 00:36:28,248\nWell, let's just double\ncheck that real quick.\n\n744\n00:36:30,174 --> 00:36:32,125\nThink I gave him a dot nine address, yeah.\n\n745\n00:36:34,632 --> 00:36:37,630\nAll right, so 10.1.1.9, and I'll add host.\n\n746\n00:36:39,870 --> 00:36:41,890\nAnd we are good to go there.\n\n747\n00:36:41,890 --> 00:36:44,896\nAnd so now I've got a new A record, so\ncomputers can find them if they needed to.\n\n748\n00:36:44,896 --> 00:36:49,990\nBut again, he's gonna be offline, but for\nthis initial part I need him visible.\n\n749\n00:36:49,990 --> 00:36:56,400\nAll right, so next thing we're going\nto do is setup our subordinate CA.\n\n750\n00:36:56,400 --> 00:36:57,570\nSo it's kinda same thing.\n\n751\n00:36:57,570 --> 00:36:59,740\nI'm gonna come over here and\ndo the add rules and features.\n\n752\n00:37:02,610 --> 00:37:04,780\nOh, you know what I'm gonna\ndo before this, actually?\n\n753\n00:37:04,780 --> 00:37:05,940\nHere's the thing,\n\n754\n00:37:05,940 --> 00:37:09,310\nat some point we need our network\nto trust the root CA certificate.\n\n755\n00:37:09,310 --> 00:37:12,920\nAnd we'll typically use group policy to\ndeploy that to all the machines out there\n\n756\n00:37:12,920 --> 00:37:13,900\non the network.\n\n757\n00:37:13,900 --> 00:37:16,690\nWhich is fine, but I wanna go ahead.\n\n758\n00:37:16,690 --> 00:37:18,340\nTo get this set up, I'm gonna go ahead and\n\n759\n00:37:18,340 --> 00:37:21,980\nmanually install the root CA certificate\non this particular subordinate.\n\n760\n00:37:21,980 --> 00:37:24,330\nThat way, I can get everything set up,\nthen we can go back and\n\n761\n00:37:24,330 --> 00:37:27,410\ndeploy it out to the rest of\nthe machines on the network.\n\n762\n00:37:27,410 --> 00:37:31,340\nSo what I'm gonna do, remember I\ncopied these files over here earlier.\n\n763\n00:37:31,340 --> 00:37:34,060\nI believe I put them right\nhere on the C drive.\n\n764\n00:37:35,100 --> 00:37:38,547\nSo I'm gonna grab this\nroot CA certificate, and\n\n765\n00:37:38,547 --> 00:37:40,912\nwe are going to install this guy.\n\n766\n00:37:43,476 --> 00:37:45,720\n>> Yeah, those group policy\nobjects that Mike mentioned,\n\n767\n00:37:45,720 --> 00:37:47,360\nthose are gonna be pivotal to this.\n\n768\n00:37:47,360 --> 00:37:50,960\nBecause all your clients, if you have a\nthousand workstations in your environment,\n\n769\n00:37:50,960 --> 00:37:52,420\nthey need to trust your CA.\n\n770\n00:37:52,420 --> 00:37:54,370\nThey need to trust the certificates\nthat you're issuing.\n\n771\n00:37:54,370 --> 00:37:57,860\nSo we'll have to deploy this and,\non a single machine, sure,\n\n772\n00:37:57,860 --> 00:37:59,150\nyou can manually do it like this.\n\n773\n00:37:59,150 --> 00:38:02,750\nBut if you've got a thousand workstations,\nyou don't wanna go to each one and\n\n774\n00:38:02,750 --> 00:38:06,770\ndo this process, so\nwe'll automate that with the GPO.\n\n775\n00:38:06,770 --> 00:38:08,328\n>> So I'm going to make\nsure to use local machine.\n\n776\n00:38:08,328 --> 00:38:11,070\nIt's the machine that needs\nto trust the certificate.\n\n777\n00:38:11,070 --> 00:38:14,870\nI mean, the users do at some point as\nwell, but for this, the machine does.\n\n778\n00:38:14,870 --> 00:38:18,850\nAnd because it's a self-signed\ncertificate, if I let Windows decide where\n\n779\n00:38:18,850 --> 00:38:22,460\nto put the certificate, it very well\ncould dump it into my untrusted root.\n\n780\n00:38:22,460 --> 00:38:24,070\nIt doesn't know who it is, right?\n\n781\n00:38:24,070 --> 00:38:28,080\nSo I'm going to force it by choosing Place\nall certificates in the following store.\n\n782\n00:38:28,080 --> 00:38:31,353\nAnd I'm going put it in that trusted\nroot certification authority.\n\n783\n00:38:33,154 --> 00:38:35,880\nAnd next and finish.\n\n784\n00:38:35,880 --> 00:38:39,010\nAnd I should get a little message here in\na second saying the import was successful.\n\n785\n00:38:39,010 --> 00:38:46,285\nAnd now, my subordinate CA knows to trust\nany certificates issued by that root CA.\n\n786\n00:38:46,285 --> 00:38:49,435\nSo yeah eventually, it does seem\na little bit slow sometimes here.\n\n787\n00:38:50,885 --> 00:38:53,362\nSo we get that, pretty sure\nthere's a message that pops up.\n\n788\n00:38:53,362 --> 00:38:55,125\n[LAUGH]\n>> I thought there was too.\n\n789\n00:38:55,125 --> 00:38:58,245\n>> As soon as I go away from it,\nit'll pop back up and say, oh look.\n\n790\n00:38:58,245 --> 00:38:58,955\nThere we go.\n\n791\n00:38:58,955 --> 00:39:00,155\nImport was successful.\n\n792\n00:39:00,155 --> 00:39:01,090\nWe'll click OK.\n\n793\n00:39:01,090 --> 00:39:04,030\nSometimes you get those stealth ones\nthat pop up behind your window and\n\n794\n00:39:04,030 --> 00:39:04,810\nyou can't see them.\n\n795\n00:39:04,810 --> 00:39:06,120\n>> And you're just waiting forever,\nand ever.\n\n796\n00:39:06,120 --> 00:39:09,836\nAll right now I'm gonna take these other\ntwo files that we created earlier, or\n\n797\n00:39:09,836 --> 00:39:11,029\nwe copied over earlier.\n\n798\n00:39:11,029 --> 00:39:15,142\nOne of them was the certificate revocation\nlist, and then the other one was the root\n\n799\n00:39:15,142 --> 00:39:18,150\nCA certificate, but\nin a different format, right?\n\n800\n00:39:18,150 --> 00:39:21,830\nIt's that that format that\nwe specified in that AIA,\n\n801\n00:39:21,830 --> 00:39:25,140\nwith the server name underscore CA name,\nand things like that.\n\n802\n00:39:25,140 --> 00:39:29,380\nSo, I'm gonna copy these files, cuz\nremember where I said they were gonna be,\n\n803\n00:39:29,380 --> 00:39:32,410\nin those two paths I specified.\n\n804\n00:39:32,410 --> 00:39:34,501\nHTTP:/lon-dc1/CertData.\n\n805\n00:39:34,501 --> 00:39:38,353\nSo what I need to do now is come in here.\n\n806\n00:39:38,353 --> 00:39:42,103\nOh wait, I haven't actually\ninstalled certificate [CROSSTALK].\n\n807\n00:39:42,103 --> 00:39:43,160\nThe folder's not gonna be there, yet.\n\n808\n00:39:43,160 --> 00:39:43,771\n>> Yeah, so let's do that.\n\n809\n00:39:43,771 --> 00:39:48,499\nSo let me go back over here and\ndo Add roles and features.\n\n810\n00:39:49,650 --> 00:39:54,221\nAnd then next three times.\n\n811\n00:39:54,221 --> 00:39:55,745\nAnd so just like before on my root,\n\n812\n00:39:55,745 --> 00:39:58,437\nI'm gonna choose\nActive Directory Certificate Services.\n\n813\n00:39:58,437 --> 00:40:00,574\nWe're gonna add the required consoles.\n\n814\n00:40:00,574 --> 00:40:04,447\nI'm going to click next, there's no\nadditional features that I need for\n\n815\n00:40:04,447 --> 00:40:05,079\nthis case.\n\n816\n00:40:05,079 --> 00:40:07,270\nThis is where it's going\nto be a little different.\n\n817\n00:40:07,270 --> 00:40:09,740\nBecause this guy's doing the actual work,\nright,\n\n818\n00:40:09,740 --> 00:40:13,210\nthis is the one that users are going\nto go to to request a certificate,\n\n819\n00:40:13,210 --> 00:40:16,400\ncomputers are going to go to that\nwe're going to use for all of that.\n\n820\n00:40:16,400 --> 00:40:20,420\nWe're going to also going to add this\ncertification authority web enrollment.\n\n821\n00:40:20,420 --> 00:40:21,680\nAnd I'll the features and\n\n822\n00:40:21,680 --> 00:40:25,049\nthere you can that see IIS is one of\nthe features that it's going to add.\n\n823\n00:40:26,550 --> 00:40:30,150\nThe other ones, and for the exam you\nshould at least go through here and\n\n824\n00:40:30,150 --> 00:40:31,970\ntake a peek at these other ones and\nknow what they are.\n\n825\n00:40:31,970 --> 00:40:35,440\nThe certification authority web\nenrollment is gonna create a website\n\n826\n00:40:35,440 --> 00:40:40,210\nthat makes it very simple to go to,\nto browse to and request a certificate.\n\n827\n00:40:40,210 --> 00:40:42,850\nWe've got the certificate\nenrollment web service and\n\n828\n00:40:42,850 --> 00:40:46,750\nthe enrollment web service policy, or\npolicy web search, I love these names.\n\n829\n00:40:46,750 --> 00:40:48,980\nThey're like,\nlet's just flip the words around and\n\n830\n00:40:48,980 --> 00:40:52,380\nmake it do something different and you\nguys can try and figure out what it does.\n\n831\n00:40:52,380 --> 00:40:55,050\nBut those are a couple services\nthat are gonna help me\n\n832\n00:40:55,050 --> 00:40:56,990\nwhen the computers are not connected.\n\n833\n00:40:56,990 --> 00:40:59,360\nThey're not directly connected to\nthe network, maybe they're outside or\n\n834\n00:40:59,360 --> 00:41:00,720\nsomething like that.\n\n835\n00:41:00,720 --> 00:41:04,890\nThey can still request a certificate,\nor renew a certificate.\n\n836\n00:41:04,890 --> 00:41:09,130\nThere's the network in device\nenrollment servicer, NDES, which is for\n\n837\n00:41:09,130 --> 00:41:12,910\nissuing certificates to devices that can't\nrequest one on their own, like switches,\n\n838\n00:41:12,910 --> 00:41:14,170\nor routers, or things like that.\n\n839\n00:41:14,170 --> 00:41:15,500\n>> Yep, we use that in the Cisco world,\n\n840\n00:41:15,500 --> 00:41:18,990\nlike if you want to do 802.1x\nauthentication on a Cisco switch,\n\n841\n00:41:18,990 --> 00:41:21,900\nit needs to be able to know where\nto trust certificates from.\n\n842\n00:41:21,900 --> 00:41:24,050\nAnd it might be from a Windows\nserver like this and\n\n843\n00:41:24,050 --> 00:41:26,120\nyou'll need that network device enrolled.\n\n844\n00:41:26,120 --> 00:41:29,300\n>> And then the online\nresponder is what we can use to\n\n845\n00:41:29,300 --> 00:41:31,720\nassist the clients in\nfinding the revocation list.\n\n846\n00:41:31,720 --> 00:41:35,030\nNormally what's going to happen is when\nyour computer or user account is presented\n\n847\n00:41:35,030 --> 00:41:38,860\na certificate, in the certificate\nis where to find a revocation list.\n\n848\n00:41:38,860 --> 00:41:42,230\n>> You're gonna go find that list,\ndownload it, and then you gotta make sure\n\n849\n00:41:42,230 --> 00:41:46,130\nthat the certificate that's being\npresented to you is not on that list.\n\n850\n00:41:46,130 --> 00:41:49,600\nBut that means the client has to parse\nthat entire list from top to bottom and\n\n851\n00:41:49,600 --> 00:41:52,460\nover a few years, that list can get long.\n\n852\n00:41:52,460 --> 00:41:54,470\nAnd so that can slow down the process.\n\n853\n00:41:54,470 --> 00:41:59,140\nWhat the online responder does is instead\nof the client going to the kernel itself,\n\n854\n00:41:59,140 --> 00:42:03,210\nit's gonna go to the online responder and\nsay hey, can you check this for me?\n\n855\n00:42:03,210 --> 00:42:07,190\nThe online responder can then parse the\nlist, and give him just the response he's\n\n856\n00:42:07,190 --> 00:42:09,430\nlooking for, so he doesn't have\nto go through that entire list.\n\n857\n00:42:09,430 --> 00:42:11,932\nAnd there's some caching that goes\non with that online responder,\n\n858\n00:42:11,932 --> 00:42:14,180\nwhich will just again\nspeed this process up.\n\n859\n00:42:14,180 --> 00:42:15,630\n>> And that's fairly new, isn't it?\n\n860\n00:42:15,630 --> 00:42:16,730\n>> It is, I think.\n\n861\n00:42:16,730 --> 00:42:18,970\n>> Like 2008?\n>> I think 2008 is when that started.\n\n862\n00:42:18,970 --> 00:42:22,710\nFor the exam, know that you do not\nneed an online responder for every CA.\n\n863\n00:42:22,710 --> 00:42:26,590\nA single online responder can\nbe a responder for multiple CAs.\n\n864\n00:42:26,590 --> 00:42:31,010\nWe set up what's called\na configuration group.\n\n865\n00:42:31,010 --> 00:42:32,640\nI have to remember the exact term.\n\n866\n00:42:32,640 --> 00:42:35,620\nWe'll see it here in a little\nbit when we get into it.\n\n867\n00:42:35,620 --> 00:42:37,080\nBut for now, just the web enrollment.\n\n868\n00:42:38,560 --> 00:42:41,050\nI don't need any additional configuration.\n\n869\n00:42:41,050 --> 00:42:42,960\nThe default IIS install is fine.\n\n870\n00:42:44,750 --> 00:42:45,750\nWe'll click install.\n\n871\n00:42:47,190 --> 00:42:51,720\nIt's gonna install the role but when we\nget done it's going to give me a warning.\n\n872\n00:42:51,720 --> 00:42:53,960\nIt's going to say okay,\nI've installed this role, but\n\n873\n00:42:53,960 --> 00:42:56,490\nI'm not really a subordinate CA yet\n\n874\n00:42:56,490 --> 00:43:00,690\nbecause I don't have a certificate\nissued to me to give me permission.\n\n875\n00:43:00,690 --> 00:43:02,170\nBecause remember, it is all about trust.\n\n876\n00:43:02,170 --> 00:43:06,922\nThe root CA has to issue a certificate\nto the subordinate saying that yes you\n\n877\n00:43:06,922 --> 00:43:11,524\nare part of my PKI and you can issue\ncertificates that chain back up to me,\n\n878\n00:43:11,524 --> 00:43:12,293\nall right?\n\n879\n00:43:14,685 --> 00:43:16,370\nYeah, eventually it'll kick in here.\n\n880\n00:43:16,370 --> 00:43:17,990\n>> Yeah, now we get to wait\nimpatiently while it goes.\n\n881\n00:43:17,990 --> 00:43:19,630\n>> Yeah, unfortunately.\n\n882\n00:43:19,630 --> 00:43:20,430\nSo we'll wait for this.\n\n883\n00:43:20,430 --> 00:43:25,460\nLet's see what else we can talk about\nwhile we're waiting for that guy.\n\n884\n00:43:25,460 --> 00:43:27,525\n>> Well,\nyou mentioned the web enrollment, right?\n\n885\n00:43:27,525 --> 00:43:28,635\n>> Mm-hm.\n>> So the web enrollment,\n\n886\n00:43:28,635 --> 00:43:29,281\nit is a web page.\n\n887\n00:43:29,281 --> 00:43:32,834\nIt's it's a very old looking webpage,\nvery NT4 looking.\n\n888\n00:43:32,834 --> 00:43:36,389\nBut an end user in theory can fire up\nthat webpage on their computer and\n\n889\n00:43:36,389 --> 00:43:37,480\nrequest a cert.\n\n890\n00:43:37,480 --> 00:43:39,520\nYou can either automatically approve it or\n\n891\n00:43:39,520 --> 00:43:42,830\nyou can do manual approval where an admin\nhas to look at it and approve it.\n\n892\n00:43:42,830 --> 00:43:46,630\nThe webpage is great if you want\nto do one off certificates.\n\n893\n00:43:46,630 --> 00:43:49,800\nBut if you want to do hundreds\nof thousands of certificates,\n\n894\n00:43:49,800 --> 00:43:51,860\nyou don't want all of your users\nto have to go to that webpage.\n\n895\n00:43:51,860 --> 00:43:55,220\nSo, while it's useful,\nwe're not always going to use it.\n\n896\n00:43:55,220 --> 00:43:57,770\nInstead, we use those group\npolicy objects we talked about.\n\n897\n00:43:57,770 --> 00:44:02,650\nWith a GPO we can push it out and\nhave the computers do auto enrollment.\n\n898\n00:44:02,650 --> 00:44:07,650\nAnd auto enrollment is when you log in as\npart of your login process, the active\n\n899\n00:44:07,650 --> 00:44:11,770\ndirectory and the computer that you're\nlogging into, those devices reach out for\n\n900\n00:44:11,770 --> 00:44:15,100\nyou and request a certificate on\nyour behalf and get it issued.\n\n901\n00:44:15,100 --> 00:44:18,650\nSo with that, your end users can be\ngetting their own individual certificate\n\n902\n00:44:18,650 --> 00:44:19,960\nand not even know it happened.\n\n903\n00:44:19,960 --> 00:44:21,490\n>> Exactly.\n>> And, I think it's the coolest thing,\n\n904\n00:44:21,490 --> 00:44:22,990\ncuz I know I've turned it on.\n\n905\n00:44:22,990 --> 00:44:27,320\nI think the biggest environment I've done\nwith it was probably about 5000 users.\n\n906\n00:44:27,320 --> 00:44:29,590\nAnd it was cool to just turn it on and\n\n907\n00:44:29,590 --> 00:44:33,380\nby the next morning see that I had issued\nover 3000 certificates that night.\n\n908\n00:44:33,380 --> 00:44:36,350\nAnd over the next few days\nas people came into work or\n\n909\n00:44:36,350 --> 00:44:39,930\ncame back from vacation to issue them out\nand you just not have to do anything.\n\n910\n00:44:39,930 --> 00:44:41,870\nYou just kick back and wait.\n\n911\n00:44:41,870 --> 00:44:43,210\nIt's neat stuff.\n\n912\n00:44:43,210 --> 00:44:47,030\n>> And we've talked about EFS in a couple\nof other episodes and we know that\n\n913\n00:44:47,030 --> 00:44:51,080\nrequires certificates and the users can\nuse EFS without any configuration, right?\n\n914\n00:44:51,080 --> 00:44:52,060\nThey can just go and encrypt a file.\n\n915\n00:44:52,060 --> 00:44:54,770\nBut they're getting\nself-signed certificates.\n\n916\n00:44:54,770 --> 00:44:58,020\nSo we typically want to issue, we want\nto be control of those certificates so\n\n917\n00:44:58,020 --> 00:45:00,010\nwe issue those to them.\n\n918\n00:45:00,010 --> 00:45:03,970\nExactly like Don said, we'll use a group\npolicy to automate that process.\n\n919\n00:45:03,970 --> 00:45:06,770\nThen when they go to encrypt a file,\nthey don't even realize that they've\n\n920\n00:45:06,770 --> 00:45:10,130\nalready been issued a certificate for\nthat purpose and we're good to go.\n\n921\n00:45:10,130 --> 00:45:11,710\n>> Yeah and that's a key component.\n\n922\n00:45:11,710 --> 00:45:13,540\nIf we want to do like a recovery agent,\n\n923\n00:45:13,540 --> 00:45:16,430\nif you want your domain admins to be\nable to decrypt things, you can't\n\n924\n00:45:16,430 --> 00:45:20,020\ndecrypt people if they've got a bunch of\nself signed certs all over the place.\n\n925\n00:45:20,020 --> 00:45:21,725\nWho knows what's going on?\n\n926\n00:45:21,725 --> 00:45:24,560\n>> And then somehow they need to\nprotect that private key, right,\n\n927\n00:45:24,560 --> 00:45:28,500\nso are we gonna teach all our users how\nto export their private key and keep it?\n\n928\n00:45:28,500 --> 00:45:29,400\nYeah no,\n>> Yeah and\n\n929\n00:45:29,400 --> 00:45:33,740\nthen they'd put it on a thumb drive and\nleave it by another desk.\n\n930\n00:45:33,740 --> 00:45:34,380\n>> Yeah exactly.\n\n931\n00:45:34,380 --> 00:45:36,280\nOr export it somewhere else\non the same hard drive so\n\n932\n00:45:36,280 --> 00:45:38,710\nwhen their hard drive fails they've lost\ntheir key and the back up of the key.\n\n933\n00:45:38,710 --> 00:45:40,390\n>> Or they email it to themselves.\n\n934\n00:45:40,390 --> 00:45:41,350\nThat's my favorite.\n\n935\n00:45:41,350 --> 00:45:42,490\nThey're like I'll email it to myself.\n\n936\n00:45:42,490 --> 00:45:45,410\nNow it's in my mailbox if I\never need my private key.\n\n937\n00:45:45,410 --> 00:45:47,725\nYour unencrypted SOTP email.\n\n938\n00:45:47,725 --> 00:45:53,190\n[LAUGH] Users will find all new ways\nto surprise you with lack of security.\n\n939\n00:45:53,190 --> 00:45:54,910\n>> It is amazing.\n\n940\n00:45:54,910 --> 00:45:59,260\n>> When the CA, when the certificate\nservices are finished installing,\n\n941\n00:45:59,260 --> 00:46:03,140\nwe are still gonna have to run\nthe little configuration wizard, right?\n\n942\n00:46:03,140 --> 00:46:06,250\nBecause as far as it knows,\nbecause our other one is a standalone,\n\n943\n00:46:06,250 --> 00:46:09,010\nas far as it knows we might be\nabout to make an enterprise today.\n\n944\n00:46:09,010 --> 00:46:10,500\nThis might be it, so we're-\n>> Make a root.\n\n945\n00:46:10,500 --> 00:46:11,970\n>> So\nwe'll have to run through that wizard and\n\n946\n00:46:11,970 --> 00:46:14,340\ntell it which kind of a CA we're creating.\n\n947\n00:46:14,340 --> 00:46:15,860\nAnd when we tell it it's a subordinate,\n\n948\n00:46:15,860 --> 00:46:18,040\nthat's when it's gonna have to\nreach out to that other CA.\n\n949\n00:46:18,040 --> 00:46:21,160\nThat's why it's so important we have those\nother certificates that we trust them.\n\n950\n00:46:21,160 --> 00:46:22,940\n>> Exactly.\nNow I always,\n\n951\n00:46:22,940 --> 00:46:25,360\nyou know shaking the windows back and\nforth doesn't that make it go faster.\n\n952\n00:46:25,360 --> 00:46:25,900\n>> I believe so.\n\n953\n00:46:25,900 --> 00:46:29,523\nWhat do you, do you have like 128\nmegs of RAM or something like that.\n\n954\n00:46:29,523 --> 00:46:32,080\n>> [LAUGH] I think he's up to like,\nhe was using dynamic.\n\n955\n00:46:32,080 --> 00:46:32,720\nWhat is he up to?\n\n956\n00:46:32,720 --> 00:46:34,710\n>> Oh, you're using dynamic memory?\n\n957\n00:46:34,710 --> 00:46:36,230\n>> I am.\nSo I could fire up more.\n\n958\n00:46:36,230 --> 00:46:37,590\n>> That never works for me.\n\n959\n00:46:37,590 --> 00:46:39,350\nThat is always-\n>> See, it just jumped up to 410.\n\n960\n00:46:39,350 --> 00:46:40,000\nSomething's happening.\n\n961\n00:46:41,370 --> 00:46:43,140\nYeah.\n>> That was we're getting impatient.\n\n962\n00:46:43,140 --> 00:46:44,790\n>> I'll tell you I don't\nknow if this is true or\n\n963\n00:46:44,790 --> 00:46:49,698\nnot, but every single roll I install it\nseems like it always stops on 63 or 64%.\n\n964\n00:46:49,698 --> 00:46:51,870\n>> [LAUGH]\n>> And, and I don't know what it is.\n\n965\n00:46:51,870 --> 00:46:54,220\nIt's like okay Microsoft you're\njust messing with us now.\n\n966\n00:46:54,220 --> 00:46:56,130\n>> They've, the status bar means nothing.\n\n967\n00:46:56,130 --> 00:46:57,135\n>> It means nothing.\n\n968\n00:46:57,135 --> 00:46:58,640\n[LAUGH] But it is doing a lot, right?\n\n969\n00:46:58,640 --> 00:47:00,000\nIt's installing certificate services.\n\n970\n00:47:00,000 --> 00:47:02,930\nIt's also installing IIS and\ngetting the webpage ready.\n\n971\n00:47:02,930 --> 00:47:05,260\nI tell you a horror story.\n\n972\n00:47:05,260 --> 00:47:07,210\nLove, when did they start that?\n\n973\n00:47:07,210 --> 00:47:11,020\nIn 2008 I guess where when you install\na role that reminds you of all the other\n\n974\n00:47:11,020 --> 00:47:13,070\nthings that you need.\n\n975\n00:47:13,070 --> 00:47:16,550\nWay back in the day in 2003 and\n2000, it didn't do that.\n\n976\n00:47:16,550 --> 00:47:19,010\nAnd you had to know what\ncomponents you needed and\n\n977\n00:47:19,010 --> 00:47:24,290\nI have gone and set up a CA and\nforgot to install IIS first.\n\n978\n00:47:24,290 --> 00:47:27,890\nAnd so, it tries to make this webpage,\nbut if you didn't install IIS,\n\n979\n00:47:27,890 --> 00:47:30,470\nit couldn't do it and that part fails.\n\n980\n00:47:30,470 --> 00:47:32,880\nAnd I never did figure\nout how to go back and\n\n981\n00:47:32,880 --> 00:47:34,870\nhave it recreate that\nwebpage after the fact.\n\n982\n00:47:34,870 --> 00:47:36,730\n>> Yeah.\n>> You have to install it all over again.\n\n983\n00:47:37,940 --> 00:47:39,500\nAll right, it looks like it did finish.\n\n984\n00:47:39,500 --> 00:47:42,880\nWhy don't I jump over there,\nmy wizard went behind me somewhere.\n\n985\n00:47:46,590 --> 00:47:47,600\nAll right, well, I don't know.\n\n986\n00:47:47,600 --> 00:47:48,760\nMaybe I did click close.\n\n987\n00:47:48,760 --> 00:47:49,680\nSo the role installed.\n\n988\n00:47:49,680 --> 00:47:52,450\nNow I'm going to configure the active\ndirectory certificate services,\n\n989\n00:47:52,450 --> 00:47:53,450\njust like we did before.\n\n990\n00:47:54,760 --> 00:47:58,135\nThis time I'm logged on\nto the domain admin here.\n\n991\n00:47:58,135 --> 00:48:01,398\nJust wait for it to verify my credentials,\nall good, we'll click next.\n\n992\n00:48:01,398 --> 00:48:05,202\nNow whoever does this You need to be an\nadministrator on the machine that you're\n\n993\n00:48:05,202 --> 00:48:06,240\ninstalling this on.\n\n994\n00:48:06,240 --> 00:48:09,480\nYou don't necessarily have\nto be a Domain Admin.\n\n995\n00:48:09,480 --> 00:48:14,715\nAlthough it is going to register an active\ndirectory, so you always should.\n\n996\n00:48:14,715 --> 00:48:16,350\nWhoever does this is gonna be,\n\n997\n00:48:16,350 --> 00:48:18,820\nwe're gonna get a couple of\ngroups added to active directory.\n\n998\n00:48:18,820 --> 00:48:22,760\nAnd one of them is the CA Admins, and this\nis gonna, whoever installs it is gonna be\n\n999\n00:48:22,760 --> 00:48:24,890\nadded automatically to that\nCA Administrators Group.\n\n1000\n00:48:26,700 --> 00:48:27,734\nSo we'll click next and\n\n1001\n00:48:27,734 --> 00:48:31,261\nI'm gonna go ahead and configure both of\nthose Role Services that we installed.\n\n1002\n00:48:34,095 --> 00:48:34,595\nMaybe.\n\n1003\n00:48:37,152 --> 00:48:41,060\nAll right, and this guy I do want to tie\nhim in to Active Directory because I wanna\n\n1004\n00:48:41,060 --> 00:48:42,880\nbe able to do that auto enrollment.\n\n1005\n00:48:42,880 --> 00:48:46,720\nAnd I wanna be able to use templates and\nI wanna be able to grab information.\n\n1006\n00:48:46,720 --> 00:48:48,280\nNow the thing about tying\nin an Active Directory,\n\n1007\n00:48:48,280 --> 00:48:50,380\ncertain information is\nrequired in the certificate.\n\n1008\n00:48:50,380 --> 00:48:54,090\nYour name, your email,\nwhatever the template defines.\n\n1009\n00:48:54,090 --> 00:48:57,390\nAnd if we tie it in an Active Directory,\nwhen a user gets or\n\n1010\n00:48:57,390 --> 00:48:59,280\nrequests a certificate,\nwhether it's automated or\n\n1011\n00:48:59,280 --> 00:49:01,880\nmanual, they don't need to\nprovide any information.\n\n1012\n00:49:01,880 --> 00:49:04,939\nIt can grab all the information from\ntheir user account in Active Directory.\n\n1013\n00:49:06,590 --> 00:49:08,130\nClick next.\n\n1014\n00:49:08,130 --> 00:49:11,340\nThis is, I mean, as Don was saying it\ndoesn't see that root out there, so\n\n1015\n00:49:11,340 --> 00:49:14,030\nI've gotta tell it, hey you\nare a subordinate CA, not a root CA.\n\n1016\n00:49:14,030 --> 00:49:20,630\nWe don't have an existing key for\nthis server yet.\n\n1017\n00:49:20,630 --> 00:49:24,460\nFor this one I'll just leave the 2048,\nthat's fine.\n\n1018\n00:49:24,460 --> 00:49:25,290\nWe'll click next.\n\n1019\n00:49:26,710 --> 00:49:33,510\nAnd I'm gonna call this\none my Lab Issuing CA.\n\n1020\n00:49:35,430 --> 00:49:39,390\nLab in the name of my domain there.\n\n1021\n00:49:39,390 --> 00:49:43,400\nAnd here, because it's a subordinate,\nhe needs a certificate from a parent.\n\n1022\n00:49:43,400 --> 00:49:45,980\nSomebody higher than him in the hierarchy.\n\n1023\n00:49:45,980 --> 00:49:49,270\nIf the parent's online,\nI can send it right over to him.\n\n1024\n00:49:49,270 --> 00:49:51,450\nOurs technically is, and we could, but\n\n1025\n00:49:51,450 --> 00:49:54,570\nlet's see the process we would\nnormally go through in the real world.\n\n1026\n00:49:54,570 --> 00:49:58,470\nSo we're gonna save the certificate\nrequest to a file on the target machine.\n\n1027\n00:49:58,470 --> 00:50:00,310\nAnd you can see the name\nhere that it's gonna be.\n\n1028\n00:50:00,310 --> 00:50:02,570\nIt's this dot rec file.\n\n1029\n00:50:02,570 --> 00:50:05,160\n>> And we'd normally save that\nto like a USB thumb drive.\n\n1030\n00:50:05,160 --> 00:50:06,992\n>> Exactly.\n>> So that we could tote it over to our\n\n1031\n00:50:06,992 --> 00:50:08,605\noffline CA to issue this server.\n\n1032\n00:50:08,605 --> 00:50:10,090\n>> Mm-hm.\nAnd it might be that you have to take\n\n1033\n00:50:10,090 --> 00:50:13,140\nthat you know you might have to mail it\nto the corporate office where the root CA\n\n1034\n00:50:13,140 --> 00:50:16,570\nis if you've added a branch in or\nsomething like that.\n\n1035\n00:50:16,570 --> 00:50:20,980\nSame and then just back to the normals\nwe'll use the default locations, and\n\n1036\n00:50:20,980 --> 00:50:24,680\nI will click configure, and it should run\n\n1037\n00:50:24,680 --> 00:50:29,290\nthrough this process relatively quickly\nand get us all set up as a swell.\n\n1038\n00:50:29,290 --> 00:50:31,530\nClose to being setup as a subordinate.\n\n1039\n00:50:31,530 --> 00:50:32,240\nThere we go.\n\n1040\n00:50:32,240 --> 00:50:33,600\nAnd here's the warning\nI was talking about.\n\n1041\n00:50:33,600 --> 00:50:36,450\nYou can see that active directory\ncertificate services is incomplete.\n\n1042\n00:50:36,450 --> 00:50:39,260\nTo complete the installation,\nuse the request file,\n\n1043\n00:50:39,260 --> 00:50:42,250\ntake it over to the root, and\nget your subordinate CA certificate.\n\n1044\n00:50:42,250 --> 00:50:45,160\nSo I'm gonna close my Wizard and\nI'm gonna do just that.\n\n1045\n00:50:45,160 --> 00:50:47,330\nI'm gonna go take a look and\nthere's my request file.\n\n1046\n00:50:47,330 --> 00:50:50,820\nSo I'm gonna Copy that and I'm going to\n\n1047\n00:50:53,550 --> 00:50:57,876\nPaste that over there on my root CA.\n\n1048\n00:50:57,876 --> 00:51:01,190\nAll right.\n\n1049\n00:51:01,190 --> 00:51:05,680\nAnd now that I've got that done,\nback out to my C drive here.\n\n1050\n00:51:06,820 --> 00:51:10,400\nAnd now that IIS is installed,\nI can finish what I started to do earlier.\n\n1051\n00:51:10,400 --> 00:51:15,012\nWe've gotta put these files in that\nlocation we specified in the AIAA and\n\n1052\n00:51:15,012 --> 00:51:16,500\nthe CDPs.\n\n1053\n00:51:16,500 --> 00:51:20,470\nSo I'm gonna grab that\nroot CA certificate there.\n\n1054\n00:51:20,470 --> 00:51:23,090\nAs well as the certificate\nrevocation list.\n\n1055\n00:51:23,090 --> 00:51:23,945\nI'm gonna copy them.\n\n1056\n00:51:23,945 --> 00:51:30,483\nAnd into Inetpub > www.root\nI'm gonna make a new folder,\n\n1057\n00:51:30,483 --> 00:51:36,380\nand I called it, in that path,\nI called it CertData.\n\n1058\n00:51:38,630 --> 00:51:40,790\nAnd I'm gonna Paste those\ntwo files in there.\n\n1059\n00:51:40,790 --> 00:51:43,310\nSo now, even though the root's offline.\n\n1060\n00:51:43,310 --> 00:51:44,700\nThey, when they get a certificate,\n\n1061\n00:51:44,700 --> 00:51:48,050\nthey're gonna see those two paths\nthat we added to the extensions.\n\n1062\n00:51:48,050 --> 00:51:48,970\nAnd they're gonna go here, and\n\n1063\n00:51:48,970 --> 00:51:51,540\nthey're gonna go oh, there's the root's\ncertificate verification list,\n\n1064\n00:51:51,540 --> 00:51:53,500\nas well as the certificate, all right.\n\n1065\n00:51:54,850 --> 00:51:59,910\nAll right now we're gonna go back over and\nissue our subordinate CA certificate.\n\n1066\n00:51:59,910 --> 00:52:01,340\nSo we flip back over to the root.\n\n1067\n00:52:02,900 --> 00:52:06,000\nAnd I'm gonna come up here and\nI'm gonna right click on my root.\n\n1068\n00:52:06,000 --> 00:52:07,690\nI'm gonna go All Tasks.\n\n1069\n00:52:07,690 --> 00:52:09,540\nSubmit New Request.\n\n1070\n00:52:09,540 --> 00:52:11,730\nIt's gonna launch a little\nwizard where I can browse and\n\n1071\n00:52:11,730 --> 00:52:16,450\nfind that request file that we,\nyou know, copied via thumb drive, right?\n\n1072\n00:52:16,450 --> 00:52:17,330\nAnd we'll click open.\n\n1073\n00:52:19,200 --> 00:52:23,030\nAnd then I'm gonna give it a second,\nor two.\n\n1074\n00:52:23,030 --> 00:52:24,660\nAnd go down to pending requests.\n\n1075\n00:52:25,890 --> 00:52:30,300\nAnd once it finishes opening up that\nrequest and validating the information in\n\n1076\n00:52:30,300 --> 00:52:34,030\nthe request it should show up\nhere in my pending requests.\n\n1077\n00:52:34,030 --> 00:52:34,580\nSo here it is.\n\n1078\n00:52:34,580 --> 00:52:38,610\nNow as an administrator my job would\nbe to decide do I want to issue this.\n\n1079\n00:52:38,610 --> 00:52:42,150\nIs this a valid request or is somebody\ntrying to set up a rogue CA on my network?\n\n1080\n00:52:42,150 --> 00:52:45,490\nSo I can see the requester's\nissuing the common name,\n\n1081\n00:52:45,490 --> 00:52:49,870\nLab Issuing CA and the type of certificate\nit's requesting is for a subordinate CA.\n\n1082\n00:52:51,920 --> 00:52:54,880\nSo we'll just right click on this guy and\ndecide that yep,\n\n1083\n00:52:54,880 --> 00:52:59,830\nit's a legitimate request and we're gonna\nissue that request, that certificate and\n\n1084\n00:52:59,830 --> 00:53:02,230\nnow it's gonna show up\nunder issued certificates.\n\n1085\n00:53:02,230 --> 00:53:05,690\nAnd now I've gotta take the certificate\nback over to the subordinate so\n\n1086\n00:53:05,690 --> 00:53:07,260\nI can install it.\n\n1087\n00:53:07,260 --> 00:53:08,560\nSo I'm gonna export this guy.\n\n1088\n00:53:09,970 --> 00:53:12,120\nJust like we did earlier\non the root CA certificate.\n\n1089\n00:53:13,310 --> 00:53:15,970\nYou go to Details and Copy to File.\n\n1090\n00:53:18,678 --> 00:53:25,070\nAnd for this one I am gonna do a,\nI think I wanna do a PKCS for this one.\n\n1091\n00:53:26,130 --> 00:53:28,950\nAnd I'm also gonna include all\ncertificates in the certification path if\n\n1092\n00:53:28,950 --> 00:53:31,740\npossible but one of the things about\nthis format, as Don was mentioning,\n\n1093\n00:53:31,740 --> 00:53:33,155\nit could include the private key.\n\n1094\n00:53:33,155 --> 00:53:34,470\n>> Mm-hm.\n>> It can also include multiple\n\n1095\n00:53:34,470 --> 00:53:37,390\ncertificates whereas a .CER\nis a single certificate.\n\n1096\n00:53:38,550 --> 00:53:42,500\n>> Yeah, and that's because we have a root\nCA and we're creating a subordinate but\n\n1097\n00:53:42,500 --> 00:53:44,590\nyou can actually create\na subordinate of a subordinate.\n\n1098\n00:53:44,590 --> 00:53:47,010\nYou can have several tiers of service and\n\n1099\n00:53:47,010 --> 00:53:49,390\nthat's all part of your\ncertification chain.\n\n1100\n00:53:49,390 --> 00:53:52,219\nSo when you export this cert you might\nwant to include the entire chain.\n\n1101\n00:53:52,219 --> 00:53:54,270\n>> Mm-hm.\n>> That would have the root CA cert\n\n1102\n00:53:54,270 --> 00:53:58,112\nas well the subs, and\nthen the final actual issuing authority.\n\n1103\n00:53:58,112 --> 00:54:01,220\n>> Exactly, cuz like we were saying,\nit is a whole trust path there.\n\n1104\n00:54:01,220 --> 00:54:04,550\nIf you just have the subordinate CA,\ncertificate installed and\n\n1105\n00:54:04,550 --> 00:54:08,300\ntrusted, then if you think about it\nbeing a hierarchy like a pyramid,\n\n1106\n00:54:08,300 --> 00:54:10,620\nyou're gonna trust from that point down.\n\n1107\n00:54:10,620 --> 00:54:13,070\nIf there were four other sub-CAs, but\n\n1108\n00:54:13,070 --> 00:54:15,680\nyou didn't get the root\nCA certificate trusted,\n\n1109\n00:54:15,680 --> 00:54:19,240\nthen you wouldn't trust certificates\nissued by those other subordinates, right?\n\n1110\n00:54:19,240 --> 00:54:21,280\nSo if you go up to the top,\nyou'll trust everything.\n\n1111\n00:54:21,280 --> 00:54:24,190\nWe can do what's called\ncross certification trust\n\n1112\n00:54:24,190 --> 00:54:25,960\nbetween other organizations.\n\n1113\n00:54:25,960 --> 00:54:29,190\nOr maybe other departments run their\nown public key infrastructure.\n\n1114\n00:54:29,190 --> 00:54:31,750\nAnd I need to be able to trust\ncertificates that they've issued.\n\n1115\n00:54:31,750 --> 00:54:34,390\nI might have to import\ntheir root certificate.\n\n1116\n00:54:34,390 --> 00:54:38,680\nI'm just gonna call this sub CA so\nI talk and don't click here, and\n\n1117\n00:54:38,680 --> 00:54:44,100\nfinish, and now we should be\nable to flip back over to my DC.\n\n1118\n00:54:44,100 --> 00:54:46,632\nAnd this is where you keep\nyour fingers crossed.\n\n1119\n00:54:46,632 --> 00:54:48,450\n>> [LAUGH]\n>> This is the step where you've got\n\n1120\n00:54:48,450 --> 00:54:49,050\nto go all right.\n\n1121\n00:54:49,050 --> 00:54:52,190\nI sure hope I typed all that\nstuff in there correctly.\n\n1122\n00:54:52,190 --> 00:54:53,858\nSo, I'm going to open up\nCertification Authority.\n\n1123\n00:54:53,858 --> 00:54:57,520\nAnd, we're gonna see\nthat it's not running,\n\n1124\n00:54:57,520 --> 00:55:00,152\nbecause he doesn't have a certificate\nsaying he's allowed to yet.\n\n1125\n00:55:00,152 --> 00:55:06,480\nSo I'm going to right click on this guy,\nall tasks, and Install CA Certificate.\n\n1126\n00:55:08,080 --> 00:55:13,511\nAnd then I should be able to find that\nsub-CA certificate that we issued.\n\n1127\n00:55:15,511 --> 00:55:18,311\nAnd then you gotta wait\nabout 30 seconds or so for\n\n1128\n00:55:18,311 --> 00:55:22,842\nit to do it's thing in the background and\nthen we'll attempt to start up the CA and\n\n1129\n00:55:22,842 --> 00:55:24,870\nsee if it actually worked.\n\n1130\n00:55:24,870 --> 00:55:27,210\n>> Yeah,\nit's really hard to see on this screen.\n\n1131\n00:55:27,210 --> 00:55:28,720\nI know it looks like the font's small.\n\n1132\n00:55:28,720 --> 00:55:31,310\nBut even if you're standing right here,\nit's really hard to see.\n\n1133\n00:55:31,310 --> 00:55:34,810\nThere's a little black down arrow\nthat appears on the server.\n\n1134\n00:55:34,810 --> 00:55:35,860\nIt's microscopic.\n\n1135\n00:55:35,860 --> 00:55:39,200\nAnd that's how we know it's not running,\njust by looking at it.\n\n1136\n00:55:39,200 --> 00:55:39,784\nCuz otherwise,\n\n1137\n00:55:39,784 --> 00:55:42,760\nyou don't really get any kind of on screen\nconfirmation that it's not running.\n\n1138\n00:55:42,760 --> 00:55:44,900\n>> Exactly.\n>> So we're gonna, well,\n\n1139\n00:55:44,900 --> 00:55:46,680\nit is importing the certificate right now.\n\n1140\n00:55:46,680 --> 00:55:47,230\n>> And we'll see.\n\n1141\n00:55:47,230 --> 00:55:50,419\n>> And we should be able to start it, and\nthen we'll see that black arrow go away.\n\n1142\n00:55:51,990 --> 00:55:53,882\nOr we'll see it stay and\nwe have a problem.\n\n1143\n00:55:53,882 --> 00:55:56,809\n[LAUGH]\n>> Yeah, if he's unable to find out where,\n\n1144\n00:55:56,809 --> 00:55:59,891\nif those files weren't in\nthe location we specified or\n\n1145\n00:55:59,891 --> 00:56:04,054\nif we specified the location incorrectly\nHe would not be able to start up.\n\n1146\n00:56:04,054 --> 00:56:08,390\nAnd then what happens is,\nyou can't come in here and right-click and\n\n1147\n00:56:08,390 --> 00:56:09,567\nrequest another,\n\n1148\n00:56:09,567 --> 00:56:14,660\nyou'll lose the option to install the CA\ncertificate cuz it's all ready failed.\n\n1149\n00:56:14,660 --> 00:56:15,860\nIt's a pain in the butt, it really is.\n\n1150\n00:56:15,860 --> 00:56:17,680\n>> Yeah.\n>> All right, but there we go.\n\n1151\n00:56:17,680 --> 00:56:20,480\nWe've got a green check mark,\nhopefully you guys can see that now.\n\n1152\n00:56:20,480 --> 00:56:24,280\nAnd notice what I saying earlier, we've\ngot this templates node which we did not\n\n1153\n00:56:24,280 --> 00:56:28,930\nhave on the stand alone,\nbecause it's an enterprise.\n\n1154\n00:56:28,930 --> 00:56:30,720\nHe does have a templates node.\n\n1155\n00:56:30,720 --> 00:56:34,220\n>> So now, we've got a fully functional\nsubordinate CA that's ready to rock,\n\n1156\n00:56:34,220 --> 00:56:35,400\nready to issue certs.\n\n1157\n00:56:35,400 --> 00:56:37,074\n>> Yup.\n>> Our root's CA at this point.\n\n1158\n00:56:37,074 --> 00:56:37,700\nWe can take him offline, right?\n\n1159\n00:56:37,700 --> 00:56:38,920\n>> We can take him offline.\n\n1160\n00:56:40,100 --> 00:56:41,400\nExactly.\nWe can shut him down.\n\n1161\n00:56:41,400 --> 00:56:41,909\nWe don't need him anymore.\n\n1162\n00:56:43,160 --> 00:56:46,780\nWell, let's go ahead and\ntake a look at a group policy.\n\n1163\n00:56:46,780 --> 00:56:49,640\nSo now, I want the rest of\nthe machines on my network to trust\n\n1164\n00:56:49,640 --> 00:56:51,500\nmy public infrastructure.\n\n1165\n00:56:51,500 --> 00:56:54,950\nSo on your domain controller, which\nhappens to be our subordinate in this\n\n1166\n00:56:54,950 --> 00:56:58,020\ncase, I'm going to come over\nhere to group policy, and\n\n1167\n00:56:58,020 --> 00:57:01,810\nI'm just going to right at the domain\nlevel I'm going to create and\n\n1168\n00:57:01,810 --> 00:57:03,788\nwe've talked about this in\nour other episodes, right?\n\n1169\n00:57:03,788 --> 00:57:04,348\n>> Mm-hm.\n\n1170\n00:57:04,348 --> 00:57:05,470\n>> Creating GPOs.\n\n1171\n00:57:05,470 --> 00:57:07,310\nAnd I'll call it my lab domain.\n\n1172\n00:57:07,310 --> 00:57:07,850\nI don't know.\n\n1173\n00:57:09,750 --> 00:57:14,176\nPKI or something.\n\n1174\n00:57:14,176 --> 00:57:15,778\nAnd then we'll edit that policy.\n\n1175\n00:57:20,445 --> 00:57:26,087\nAnd here, I'm going to do down to my\ncomputer configuration, policies.\n\n1176\n00:57:26,087 --> 00:57:27,295\nWindows settings.\n\n1177\n00:57:27,295 --> 00:57:33,699\n[PAUSE].\n\n1178\n00:57:33,699 --> 00:57:38,310\nSecurity settings.\n\n1179\n00:57:38,310 --> 00:57:40,910\nAnd then my public key policies.\n\n1180\n00:57:44,070 --> 00:57:48,410\nAnd under here, I have my trusted\nroute certification authorities.\n\n1181\n00:57:48,410 --> 00:57:51,930\nSo what I'm doing is the exact same thing\nas we did earlier when I did it manually\n\n1182\n00:57:51,930 --> 00:57:52,700\non one computer.\n\n1183\n00:57:52,700 --> 00:57:54,600\nI'm importing a certificate.\n\n1184\n00:57:54,600 --> 00:57:57,650\nI'm just turning into a policy that's\ngoing to be applied to all the other\n\n1185\n00:57:57,650 --> 00:57:59,260\nmachines on my network.\n\n1186\n00:57:59,260 --> 00:58:02,640\nThe process is exactly the same,\nlocal machine because I'm under\n\n1187\n00:58:02,640 --> 00:58:05,610\nthe group policy,\nthat's the only thing I can choose.\n\n1188\n00:58:06,980 --> 00:58:09,500\nI got to go find that\nroute CA certificate.\n\n1189\n00:58:13,760 --> 00:58:15,910\nAnd then because I right\nclicked on trusted route,\n\n1190\n00:58:15,910 --> 00:58:17,390\nit already knows where I want to put it.\n\n1191\n00:58:19,530 --> 00:58:20,320\nAnd then we wait for\n\n1192\n00:58:20,320 --> 00:58:24,140\nthe little message to pop up that tells\nme that the import was successful.\n\n1193\n00:58:28,220 --> 00:58:28,840\nHopefully.\n>> [LAUGH]\n\n1194\n00:58:28,840 --> 00:58:30,390\n>> And then as policy refreshes on all\n\n1195\n00:58:30,390 --> 00:58:33,640\nthe nodes on our network, they will now\ntrust our public key infrastructure.\n\n1196\n00:58:33,640 --> 00:58:36,120\n>> And notice how that,\nthe list only has one entry.\n\n1197\n00:58:36,120 --> 00:58:39,990\nThis does not replace the list that\nis already on your computers this\n\n1198\n00:58:39,990 --> 00:58:40,970\nsupplements.\n\n1199\n00:58:40,970 --> 00:58:43,945\nSo we're adding this one entry to\nthe list of CA's you already trust,\n\n1200\n00:58:43,945 --> 00:58:49,760\ncuz your computer is from Microsoft\nwill trust Verasign and Geo Trust and\n\n1201\n00:58:49,760 --> 00:58:52,860\nall of those other companies that are out\nthere that issue the internet certs So\n\n1202\n00:58:52,860 --> 00:58:54,490\nwe're just adding to it.\n\n1203\n00:58:54,490 --> 00:58:55,700\n>> If fact, we can probably see.\n\n1204\n00:58:55,700 --> 00:59:02,810\nLet's see.\nWe've already installed it manually here.\n\n1205\n00:59:02,810 --> 00:59:08,520\nThese guys do not have a, yeah, whatever.\n\n1206\n00:59:08,520 --> 00:59:09,410\nLet's take a peek.\n\n1207\n00:59:10,570 --> 00:59:14,400\nIf I come here to my internet options,\nI go over to my content tab and\n\n1208\n00:59:14,400 --> 00:59:17,210\nclick on certificates,\nI can come over to my trusted route\n\n1209\n00:59:17,210 --> 00:59:19,520\ncertification authorities, and\nhere is what Don was saying,\n\n1210\n00:59:19,520 --> 00:59:23,760\nthese are all the public CAs that\nmy computer already knows to trust.\n\n1211\n00:59:23,760 --> 00:59:28,880\nAnd if I look through this list,\nthere is my root CA that we issued.\n\n1212\n00:59:31,260 --> 00:59:33,030\nSo yeah,\nit's now in the trusted roots, and\n\n1213\n00:59:33,030 --> 00:59:35,440\nthat will happen on all the computers\non my network at this point.\n\n1214\n00:59:37,010 --> 00:59:38,410\nAll right, so we've got that set up,\n\n1215\n00:59:38,410 --> 00:59:41,300\nwe're gonna come back into group\npolicy in just a little bit.\n\n1216\n00:59:41,300 --> 00:59:44,280\nIt is getting close to our break time, the\nnext thing we're gonna look at is, we're\n\n1217\n00:59:44,280 --> 00:59:47,970\ngonna start looking at, now that we've got\nour PKI set up, what can I do with it?\n\n1218\n00:59:47,970 --> 00:59:50,290\nRight.\nLet's take a look at the certificates and\n\n1219\n00:59:50,290 --> 00:59:53,740\nissuing them, the templates and\nthe permissions and all that fun stuff.\n\n1220\n00:59:53,740 --> 00:59:55,850\n>> And this is actually\na great place to take a break,\n\n1221\n00:59:55,850 --> 00:59:57,620\nbecause you'll need to\ndo this in real life.\n\n1222\n00:59:57,620 --> 01:00:02,150\nYou need to give time for all of your work\nstations out there to update their GPOs.\n\n1223\n01:00:02,150 --> 01:00:06,160\nThey'll refresh their policy every ninety\nminutes by default if they're turned on.\n\n1224\n01:00:06,160 --> 01:00:08,640\nAnd so they'll see this new root CA.\n\n1225\n01:00:08,640 --> 01:00:10,300\nThey'll automatically trust it,\n\n1226\n01:00:10,300 --> 01:00:13,140\nand then they'll be able to use\nthe certificates that we issue.\n\n1227\n01:00:13,140 --> 01:00:16,010\nIf we don't wait, if we just rush right\nin and start doing other things, well,\n\n1228\n01:00:16,010 --> 01:00:17,780\nyour work stations don't\ntrust the root CA, yet,\n\n1229\n01:00:17,780 --> 01:00:19,910\nthey're not gonna trust any\nof the certs you issue.\n\n1230\n01:00:21,190 --> 01:00:22,470\n>> Exactly.\n>> All right, well, we'll stop here and\n\n1231\n01:00:22,470 --> 01:00:23,370\ntake a break.\n\n1232\n01:00:23,370 --> 01:00:27,240\nAnd when we get back,\nadvanced certificate services, right?\n\n1233\n01:00:27,240 --> 01:00:28,793\nSo more CA stuff.\n\n1234\n01:00:28,793 --> 01:00:29,582\nAfter this.\n\n1235\n01:00:29,582 --> 01:00:32,306\n[SOUND]\n\n1236\n01:00:32,306 --> 01:00:37,755\nAll right.\n\n1237\n01:00:37,755 --> 01:00:38,754\nWelcome back, everybody.\n\n1238\n01:00:38,754 --> 01:00:41,871\nSo in the first two segments\nwe set up our root CA and\n\n1239\n01:00:41,871 --> 01:00:45,743\nthen we We just finished bringing\nup our first subordinates.\n\n1240\n01:00:45,743 --> 01:00:47,675\nYeah, I say our first,\nwe might have more, right?\n\n1241\n01:00:47,675 --> 01:00:50,265\nYou'd just repeat that process\nas many times as you need.\n\n1242\n01:00:50,265 --> 01:00:52,115\nSo now we've got\nthe subordinate issuing CA,\n\n1243\n01:00:52,115 --> 01:00:56,570\nwe've published our root cert through\nthe group policy objects so all of our\n\n1244\n01:00:56,570 --> 01:01:00,190\nClients trust that certificate server now,\nso we're done, episode's over right Mike?\n\n1245\n01:01:00,190 --> 01:01:01,050\n>> That's it, that's it.\n\n1246\n01:01:01,050 --> 01:01:02,865\nYou can go home.\n>> That's it, easy, done\n\n1247\n01:01:02,865 --> 01:01:03,530\n>> [LAUGH]\n\n1248\n01:01:03,530 --> 01:01:05,470\n>> Well, we are done, technically, right?\n\n1249\n01:01:05,470 --> 01:01:07,580\nWe have a functioning PKI,\n>> Right.\n\n1250\n01:01:07,580 --> 01:01:08,560\n>> We're just not using it, right?\n\n1251\n01:01:08,560 --> 01:01:09,240\n>> Exactly.\n\n1252\n01:01:09,240 --> 01:01:13,440\nSo, now we need to use the neat\ninfrastructure that we just set up.\n\n1253\n01:01:13,440 --> 01:01:14,000\n>> Exactly.\nSo,\n\n1254\n01:01:14,000 --> 01:01:15,390\nlet's go back over here and take a peek.\n\n1255\n01:01:15,390 --> 01:01:17,680\nI'll pull up that subordinate CA again.\n\n1256\n01:01:17,680 --> 01:01:21,630\nAs Don was saying,\nwe usually have more than one subordinate.\n\n1257\n01:01:21,630 --> 01:01:23,500\nWe have a nice hierarchy.\n\n1258\n01:01:23,500 --> 01:01:26,400\nYou can do it It could be\na simple two level hierarchy\n\n1259\n01:01:26,400 --> 01:01:30,940\nit could be several levels deep and\nyou can set up more than one sub CA for\n\n1260\n01:01:30,940 --> 01:01:34,710\njust the simple fact of load\nbalancing where one CA is not enough.\n\n1261\n01:01:34,710 --> 01:01:37,750\nIt could be a geographical thing,\nI've got a CA that handles\n\n1262\n01:01:37,750 --> 01:01:42,630\nall my North American offices another CA\nthat handles all my European offices.\n\n1263\n01:01:42,630 --> 01:01:44,190\nIt could be policy driven.\n\n1264\n01:01:44,190 --> 01:01:46,670\nIt could be that this CA has different\n\n1265\n01:01:46,670 --> 01:01:49,580\nRequirements to request\ncertificates then this other CA.\n\n1266\n01:01:49,580 --> 01:01:51,190\nOne for my employees.\n\n1267\n01:01:51,190 --> 01:01:54,990\nA different CA that requires different\nthings for my contractors and\n\n1268\n01:01:54,990 --> 01:01:56,760\npartner organizations.\n\n1269\n01:01:56,760 --> 01:01:59,510\nSo, different reasons to\nsetup those subordinate CAs.\n\n1270\n01:02:00,760 --> 01:02:01,720\nSo, in here, let's take a peek.\n\n1271\n01:02:01,720 --> 01:02:02,800\nWe haven't looked at this guy yet.\n\n1272\n01:02:02,800 --> 01:02:04,810\nLet's pull up his properties real quick.\n\n1273\n01:02:04,810 --> 01:02:08,930\nThis is again this is what I call\nthe issuing CA, so my subordinate CA.\n\n1274\n01:02:08,930 --> 01:02:15,420\nAnd we'll wait a second for those props\nto pull up and eventually there will.\n\n1275\n01:02:15,420 --> 01:02:17,060\nWe'll take a peek at this certificate.\n\n1276\n01:02:18,690 --> 01:02:21,570\nAnd this is the one that we\nrequested from the root so\n\n1277\n01:02:21,570 --> 01:02:22,770\nwe're going to see unlike the root,\n\n1278\n01:02:22,770 --> 01:02:25,758\nwho had a self signed certificate because\nthere's nobody higher than him...\n\n1279\n01:02:25,758 --> 01:02:31,720\nThis one should pull up and\nwe'll see that it was issued to\n\n1280\n01:02:31,720 --> 01:02:37,370\nissuing C-A issued by route C-A and\nit was just only good for one year.\n\n1281\n01:02:37,370 --> 01:02:41,190\nAnd if we take a look at that\ncertification path I can see that trust\n\n1282\n01:02:41,190 --> 01:02:47,830\npath from the From that support on\nbackup to the root drive, right?\n\n1283\n01:02:47,830 --> 01:02:49,250\nAll right so\nthe next thing we're gonna do,\n\n1284\n01:02:49,250 --> 01:02:53,030\nagain, enterprise we mentioned earlier,\nenterprise CAs use templates.\n\n1285\n01:02:53,030 --> 01:02:56,590\nAnd these templates are what define\nwhat information is required\n\n1286\n01:02:56,590 --> 01:03:00,870\nto get the certificate, like name,\nemail, or address or what have you.\n\n1287\n01:03:00,870 --> 01:03:03,060\nThey also define who can.\n\n1288\n01:03:03,060 --> 01:03:06,670\nThe permissions are actually\ncontrolled on the templets themselves.\n\n1289\n01:03:06,670 --> 01:03:08,430\nThe templets have an access control list.\n\n1290\n01:03:08,430 --> 01:03:12,160\nAnd in order to request\na certificate you need both reed and\n\n1291\n01:03:12,160 --> 01:03:15,100\nenroll permission over\nthat particular templet.\n\n1292\n01:03:15,100 --> 01:03:18,830\nIf we're going to use group policy to\nautomate the process, then the group or\n\n1293\n01:03:18,830 --> 01:03:22,900\nuser that you are automating it for\nWould need read, enroll and\n\n1294\n01:03:22,900 --> 01:03:24,470\nauto enroll permission.\n\n1295\n01:03:24,470 --> 01:03:25,580\nNow, this is a short list,\n\n1296\n01:03:25,580 --> 01:03:30,040\nthese are the ones that this\nparticular CA is allowed to issue.\n\n1297\n01:03:30,040 --> 01:03:33,650\nSo, this list here, if you had\nthe right permissions you could request\n\n1298\n01:03:33,650 --> 01:03:35,330\none of these types of certificates.\n\n1299\n01:03:35,330 --> 01:03:37,100\nBut, that's not all it knows about.\n\n1300\n01:03:37,100 --> 01:03:39,940\nIf we wanna work with,\nI can't work with these templates here.\n\n1301\n01:03:39,940 --> 01:03:43,300\nI can pull up their properties and I can\nsee a little bit of information about them\n\n1302\n01:03:43,300 --> 01:03:45,460\nbut I can't really do\nanything with them here.\n\n1303\n01:03:45,460 --> 01:03:46,330\nIn order to work with them,\n\n1304\n01:03:46,330 --> 01:03:50,090\nwe've got a separate tool that I can\naccess from inside this console.\n\n1305\n01:03:50,090 --> 01:03:52,084\nYou right click on templates and\nyou choose manage.\n\n1306\n01:03:52,084 --> 01:03:55,498\nAnd this is going to open up my\ncertificate templates manager console.\n\n1307\n01:03:55,498 --> 01:03:59,707\nAnd here I can see all the templates\nthat I actually have available.\n\n1308\n01:03:59,707 --> 01:04:05,920\nAll right, every time we get\na new OS we get a new version.\n\n1309\n01:04:05,920 --> 01:04:10,330\nWhen 2000 was out we had version one\ntemplates, with 2003 we had version two,\n\n1310\n01:04:10,330 --> 01:04:15,010\nwith 2008 we got version three,\nand with 2012 we got version four.\n\n1311\n01:04:15,010 --> 01:04:19,280\nAnd you'll see that most of these\nare actually version one templates.\n\n1312\n01:04:19,280 --> 01:04:22,970\nVersion one templates, back in 2000,\nyou couldn't change anything.\n\n1313\n01:04:22,970 --> 01:04:24,900\nI can't change.\n\n1314\n01:04:24,900 --> 01:04:27,380\nYou see how all this\ninformation is grayed out?\n\n1315\n01:04:27,380 --> 01:04:30,010\nI can't change the purpose,\nwhat's included.\n\n1316\n01:04:30,010 --> 01:04:33,720\nThe only thing I can modify\non a version one template\n\n1317\n01:04:33,720 --> 01:04:37,060\nis this access control list itself.\n\n1318\n01:04:37,060 --> 01:04:40,250\nBut what we can do is we can\nduplicate one of these templates.\n\n1319\n01:04:40,250 --> 01:04:43,150\nIf I wanted to make some changes to that\ntemplate, but it's a version one and\n\n1320\n01:04:43,150 --> 01:04:45,180\nI can't, I can copy it.\n\n1321\n01:04:45,180 --> 01:04:48,170\nAnd when I copy it, I can choose\nwhat version I want to make it.\n\n1322\n01:04:49,280 --> 01:04:51,200\nThere's one version\nthree template in here.\n\n1323\n01:04:51,200 --> 01:04:54,630\nIt should be my OCSP response\nsigning certificate.\n\n1324\n01:04:54,630 --> 01:04:57,120\nWhich we'll see later on in our show.\n\n1325\n01:04:57,120 --> 01:04:59,230\nIn those there are no\nversion four templates.\n\n1326\n01:04:59,230 --> 01:05:01,600\nBut again you know eventually,\nthey'll probably come out with some, but\n\n1327\n01:05:01,600 --> 01:05:03,440\nthere aren't any at this point.\n\n1328\n01:05:03,440 --> 01:05:07,710\nSo what I'm gonna do, I wanna modify\na user template, a user certificate.\n\n1329\n01:05:07,710 --> 01:05:10,370\nThe templates define what the purpose is.\n\n1330\n01:05:10,370 --> 01:05:11,820\nSo if I look at the Extensions tab,\n\n1331\n01:05:11,820 --> 01:05:15,120\nI can see that this is good for\nbasic constraints.\n\n1332\n01:05:15,120 --> 01:05:16,540\nWhere is my key usage?\n\n1333\n01:05:16,540 --> 01:05:17,040\nHere we go.\n\n1334\n01:05:18,660 --> 01:05:22,660\nYeah, so this is good for EFS secure\nemail and client authentication.\n\n1335\n01:05:22,660 --> 01:05:25,930\nThat certificate supports those functions.\n\n1336\n01:05:25,930 --> 01:05:28,730\nBut, we want to do smart card logon,\n\n1337\n01:05:28,730 --> 01:05:32,110\nwell this particular certificate\ndoesn't support smart card logon.\n\n1338\n01:05:32,110 --> 01:05:34,320\nI want to add a new extension to it.\n\n1339\n01:05:34,320 --> 01:05:37,515\nBut since it's a version one I can't make\nchanges, so what I'm gonna do is I'm gonna\n\n1340\n01:05:37,515 --> 01:05:41,270\nright-click on that user and\nchoose duplicate template.\n\n1341\n01:05:41,270 --> 01:05:44,670\nAnd that's gonna open up this dialogue\nwhere I can first pick my version.\n\n1342\n01:05:44,670 --> 01:05:48,420\nNow they don't list it as easily, you know\nit's not just one, two, three, and four.\n\n1343\n01:05:48,420 --> 01:05:49,900\nThat would be be too easy.\n\n1344\n01:05:49,900 --> 01:05:52,310\nWhat they say is,\nwho's it going to be compatible with?\n\n1345\n01:05:52,310 --> 01:05:55,890\nAnd you need to know if it's\n2003 then that's a version 2,\n\n1346\n01:05:55,890 --> 01:05:56,762\nif it's 2008 that'd be a version 3, etc.\n\n1347\n01:05:56,762 --> 01:06:01,772\nI'm going to use 2003 because that\nwill go all the way back if I've\n\n1348\n01:06:01,772 --> 01:06:05,660\ngot a mixed environment, I want to make\nsure XP clients could request it as well.\n\n1349\n01:06:05,660 --> 01:06:08,900\nThen I'm gonna go over\nhere to the General tab.\n\n1350\n01:06:08,900 --> 01:06:09,960\nAnd we're gonna give it a name, and\n\n1351\n01:06:09,960 --> 01:06:15,050\nI'm gonna call it Lab User,\nmy name of my domain there.\n\n1352\n01:06:16,160 --> 01:06:20,100\nAnd then we're gonna go to\nthe Extensions tab, and\n\n1353\n01:06:20,100 --> 01:06:22,890\nI'm gonna add a new function to it,\nI'm gonna click Edit.\n\n1354\n01:06:24,260 --> 01:06:26,375\nAnd I'm gonna click Add, and\n\n1355\n01:06:26,375 --> 01:06:31,950\nI'm gonna add smart card functionality\nto this particular template.\n\n1356\n01:06:31,950 --> 01:06:33,800\nAll right so\nnow I've got smart card logon in there.\n\n1357\n01:06:35,330 --> 01:06:39,730\nThe other thing I need to do, and\nthis is not something I would normally do,\n\n1358\n01:06:39,730 --> 01:06:42,380\nin the real world, but\nbecause my user accounts.\n\n1359\n01:06:42,380 --> 01:06:45,170\nWe're not running exchange,\nwe don't have emails, and\n\n1360\n01:06:45,170 --> 01:06:48,770\nyou can see that this particular template\nis going to include the email name and\n\n1361\n01:06:48,770 --> 01:06:52,965\nthe subject name as well as include\nthe email name and alternate subject name.\n\n1362\n01:06:52,965 --> 01:06:54,775\nSo if I don't have an email address,\n\n1363\n01:06:54,775 --> 01:06:57,475\nit would fail when I went\nto request the certificate.\n\n1364\n01:06:57,475 --> 01:07:00,215\nSo I'm gonna uncheck those just for\nthe purposes of this lab.\n\n1365\n01:07:02,585 --> 01:07:07,270\nThe next thing I wanna do, is take a look\nat this superseded templates, all right.\n\n1366\n01:07:07,270 --> 01:07:10,770\nNow what this allows me to do, let's say\nwe had all ready been using certificates\n\n1367\n01:07:10,770 --> 01:07:13,370\nfor client authentication and NEFS.\n\n1368\n01:07:13,370 --> 01:07:17,070\nSo we were just using that default\nuser template there, that worked fine.\n\n1369\n01:07:17,070 --> 01:07:19,120\nUntil the boss comes down last week and\n\n1370\n01:07:19,120 --> 01:07:20,580\nsays, hey we're gonna\nimplement smart cards.\n\n1371\n01:07:20,580 --> 01:07:24,550\nWe're gonna really secure our network,\nand change our authentication method.\n\n1372\n01:07:24,550 --> 01:07:27,580\nBut I've already issued all\nmy users user certificates.\n\n1373\n01:07:27,580 --> 01:07:29,770\nSo now I gotta reissue\nthem new certificates.\n\n1374\n01:07:29,770 --> 01:07:31,240\nThis does it for me.\n\n1375\n01:07:31,240 --> 01:07:36,070\nI can come in here and say, look, this\nparticular lab user is gonna supersede\n\n1376\n01:07:37,280 --> 01:07:38,450\nthe user certificate.\n\n1377\n01:07:38,450 --> 01:07:43,890\nSo anybody that already has a user\ncertificate will now get it replaced\n\n1378\n01:07:43,890 --> 01:07:49,270\nwith my new lab user certificate\nthat supports smart card logon.\n\n1379\n01:07:49,270 --> 01:07:52,870\nThe last thing I need to do is take\na look at the Security tab, and\n\n1380\n01:07:52,870 --> 01:07:54,480\nI want to set the permissions.\n\n1381\n01:07:54,480 --> 01:07:56,840\nNow, I'm going to just use\nthe authenticated users here so\n\n1382\n01:07:56,840 --> 01:07:58,750\neverybody in my network can get one.\n\n1383\n01:07:58,750 --> 01:08:01,580\nBut it could be very specific, you know,\nyou could set it to a certain group of\n\n1384\n01:08:01,580 --> 01:08:04,400\nindividuals or a group of machines or\nsomething like that.\n\n1385\n01:08:04,400 --> 01:08:06,770\nAnd I'm gonna go ahead and\ngive him read and enroll.\n\n1386\n01:08:06,770 --> 01:08:07,330\nThat's what they,\n\n1387\n01:08:07,330 --> 01:08:10,500\nif I give them enroll they can now\nmanually request a certificate.\n\n1388\n01:08:10,500 --> 01:08:13,230\nWe're also gonna go ahead and\nkinda kill two birds with one stone here.\n\n1389\n01:08:13,230 --> 01:08:16,170\nWe're gonna go ahead and set up auto\nenrollment as well because I know in\n\n1390\n01:08:16,170 --> 01:08:18,760\nthe end, that's how I wanna\ndeploy these certificates.\n\n1391\n01:08:18,760 --> 01:08:21,780\nI don't wanna have them manually go and\nrequest one.\n\n1392\n01:08:21,780 --> 01:08:25,670\nSo I give read, enroll, and\nauto enroll to the authenticated users.\n\n1393\n01:08:25,670 --> 01:08:29,730\nI click OK, and now I've got\na new template called Lab User.\n\n1394\n01:08:29,730 --> 01:08:34,581\nAnd I can see that it's going to support\nthe same three find authentication EFS,\n\n1395\n01:08:34,581 --> 01:08:36,950\nsecure email and now smart card logon.\n\n1396\n01:08:38,150 --> 01:08:40,680\nSo I'm going to go ahead, I'm just going\nto minimize this templates console for\n\n1397\n01:08:40,680 --> 01:08:44,560\nnow, and\nhere's where a lot of people will goof up\n\n1398\n01:08:44,560 --> 01:08:47,120\nbecause if I come back out here and\nif I refresh this.\n\n1399\n01:08:50,090 --> 01:08:51,669\nProbably takes way too long to refresh.\n\n1400\n01:08:51,669 --> 01:08:52,950\nYou might think okay,\n\n1401\n01:08:52,950 --> 01:08:56,804\nnow we're going to see this new\nLab User certificate sitting here.\n\n1402\n01:08:56,804 --> 01:08:59,080\nBut all we did was modify the template.\n\n1403\n01:08:59,080 --> 01:09:03,005\nWe haven't told this CA that it's allowed\nto issue that type of certificate.\n\n1404\n01:09:03,005 --> 01:09:06,840\nCuz again, you might have one CA\nthat's issuing these certificates.\n\n1405\n01:09:06,840 --> 01:09:09,430\nA different CA issues\na different set of certificates.\n\n1406\n01:09:09,430 --> 01:09:15,220\nI do need to come back in, right-click,\nand choose New, Template to Issue,\n\n1407\n01:09:15,220 --> 01:09:19,190\nand then pick my Lab User certificate and\nclick OK.\n\n1408\n01:09:20,690 --> 01:09:24,970\nNow the CA has been told\nhe's allowed to issue those.\n\n1409\n01:09:24,970 --> 01:09:26,890\nThe next thing if we\nwant to automate this,\n\n1410\n01:09:26,890 --> 01:09:28,440\nwe're gonna use Group Policy to do that.\n\n1411\n01:09:28,440 --> 01:09:31,910\nI'm gonna flip back over to Group Policy,\nand I'm gonna edit that same policy,\n\n1412\n01:09:31,910 --> 01:09:36,730\nit's already linked to the domain,\nso we'll just use that one.\n\n1413\n01:09:36,730 --> 01:09:39,840\nAnd for this I wanna go down to the user\nhalf because I'm issuing a user\n\n1414\n01:09:39,840 --> 01:09:41,190\ncertificate.\n\n1415\n01:09:41,190 --> 01:09:44,640\nI have goofed there before and\ngone, why is this not working?\n\n1416\n01:09:44,640 --> 01:09:48,810\nWhy, I've logged off, logged back on,\ndo a GP update and nothing.\n\n1417\n01:09:48,810 --> 01:09:51,150\n>> You know,\nyou can issue computer certificates,\n\n1418\n01:09:51,150 --> 01:09:53,092\nwhich are really useful for IP sec.\n\n1419\n01:09:53,092 --> 01:09:55,290\nAnd so, in that scenario you\nwould go on your computer.\n\n1420\n01:09:55,290 --> 01:09:58,060\nBut we didn't mess with\nthe computer certificate.\n\n1421\n01:09:58,060 --> 01:09:58,930\n>> Correct.\n>> Which I think\n\n1422\n01:09:58,930 --> 01:10:00,500\nwill work with IP sec by default.\n\n1423\n01:10:00,500 --> 01:10:01,000\n>> Yup.\nIt will.\n\n1424\n01:10:02,010 --> 01:10:03,780\n>> So, you might need to do that for\ncertain things.\n\n1425\n01:10:03,780 --> 01:10:05,280\nBut what you're doing is a user script.\n\n1426\n01:10:05,280 --> 01:10:06,150\n>> Yep, exactly.\n\n1427\n01:10:06,150 --> 01:10:08,290\nAnd so, here I've got a couple\npolicies I'm gonna set.\n\n1428\n01:10:08,290 --> 01:10:10,020\nI'm just gonna double-click\non this Certificate\n\n1429\n01:10:10,020 --> 01:10:14,870\nServices Client Auto Enrollment, and\nI'm gonna change the model to Enabled.\n\n1430\n01:10:14,870 --> 01:10:18,150\nAnd I'm also going to say renew\nexpired update pending and\n\n1431\n01:10:18,150 --> 01:10:20,550\nremove revoked certificates automatically.\n\n1432\n01:10:20,550 --> 01:10:22,730\nAnd update certificates that\nuse certificate templates.\n\n1433\n01:10:22,730 --> 01:10:26,650\nSo when we make that superseded template,\nit'll take care of that for me.\n\n1434\n01:10:26,650 --> 01:10:30,550\nIt's by default gonna warn them when they\nhave 10% left in their lifetime of their\n\n1435\n01:10:30,550 --> 01:10:31,170\ncertificate.\n\n1436\n01:10:31,170 --> 01:10:32,290\nThat you need to go renew it.\n\n1437\n01:10:32,290 --> 01:10:36,350\nYou need to review your certificate\nbefore it expires, not after it expires.\n\n1438\n01:10:36,350 --> 01:10:40,120\nRight after it expires, you can't\nrenew it, you need a new certificate.\n\n1439\n01:10:40,120 --> 01:10:43,420\nThen I'm gonna go to the certificate\nenrollment policy, and\n\n1440\n01:10:43,420 --> 01:10:47,580\nI'm just gonna turn that on, and\nthere's one default policy that we get\n\n1441\n01:10:47,580 --> 01:10:51,170\nas the active directory enrollment policy,\nand for the most part, it suits our needs.\n\n1442\n01:10:51,170 --> 01:10:53,030\nWe could create additional ones.\n\n1443\n01:10:53,030 --> 01:10:57,010\nBut it controls some of the behavior\nlike how the certificates are issued,\n\n1444\n01:10:57,010 --> 01:10:58,810\nare they pushed out automatically.\n\n1445\n01:10:58,810 --> 01:11:01,680\nAs far as you know once they make\na request, do they have to go back in and\n\n1446\n01:11:01,680 --> 01:11:04,122\nmanually go get it if you're\ndoing the web enrollment.\n\n1447\n01:11:04,122 --> 01:11:07,200\nSo I'm going to turn that on, make sure\nactive directive is selected, click OK.\n\n1448\n01:11:07,200 --> 01:11:09,190\nAnd that should be it.\n\n1449\n01:11:09,190 --> 01:11:10,788\nWe should be good to go.\n\n1450\n01:11:10,788 --> 01:11:15,030\nSo I'm gonna close my editor, and I'm just\ngonna minimize group policy because I\n\n1451\n01:11:15,030 --> 01:11:18,150\nalways end up going back in there for\none reason or another.\n\n1452\n01:11:18,150 --> 01:11:20,800\nNow what I'm going to do is I'm\ngoing to do a little GP update.\n\n1453\n01:11:20,800 --> 01:11:23,160\nYou guys have seen this\ncommand a few times so\n\n1454\n01:11:23,160 --> 01:11:25,170\nI'm not going to bother fixing my font.\n\n1455\n01:11:25,170 --> 01:11:29,090\nGP update force because I\ndon't wanna wait 90 minutes.\n\n1456\n01:11:29,090 --> 01:11:30,480\nI don't wanna log off and log back on.\n\n1457\n01:11:30,480 --> 01:11:32,930\nAnd that should\n\n1458\n01:11:32,930 --> 01:11:37,480\nupdate our group policy which hopefully\nwill then issue me a certificate.\n\n1459\n01:11:38,610 --> 01:11:41,220\nSo we'll wait until that user\nhalf gets done refreshing.\n\n1460\n01:11:43,700 --> 01:11:46,340\nAnd now I'm gonna open up\nMicrosoft Management Console.\n\n1461\n01:11:47,530 --> 01:11:49,410\nAnd I'm gonna add my certificate snap in.\n\n1462\n01:11:49,410 --> 01:11:52,220\nNow if a user ever wants to work\nwith their own certificates,\n\n1463\n01:11:52,220 --> 01:11:53,840\nthis is how they do it.\n\n1464\n01:11:53,840 --> 01:11:57,097\nSo you can imagine teaching your\nend users this stuff, right?\n\n1465\n01:11:57,097 --> 01:11:58,296\nI'm gonna add that certificates console.\n\n1466\n01:11:58,296 --> 01:12:02,196\nBecause I'm an administrator on this\nmachine, it doesn't default to user.\n\n1467\n01:12:02,196 --> 01:12:04,606\nI can also work with service account or\ncomputer account certificates.\n\n1468\n01:12:04,606 --> 01:12:08,841\nBut I want my user account, we click OK.\n\n1469\n01:12:08,841 --> 01:12:13,193\nAnd now, when I expand out certificates,\nexpand out personal, and\n\n1470\n01:12:13,193 --> 01:12:17,995\nclick on certificates, there I can see\nthat I have a certificate from the lab\n\n1471\n01:12:17,995 --> 01:12:21,237\nissuing CA,\npurposes includes smart card logon.\n\n1472\n01:12:21,237 --> 01:12:24,270\nAnd, if I take a look at\nthe template that was used,\n\n1473\n01:12:24,270 --> 01:12:27,080\nit was indeed that lab user template.\n\n1474\n01:12:27,080 --> 01:12:30,440\nSo there we just automatically issue\na certificate, as Don was saying,\n\n1475\n01:12:30,440 --> 01:12:32,290\nto 3,000 users in one quick move.\n\n1476\n01:12:33,350 --> 01:12:35,120\n>> You can do computers also.\n\n1477\n01:12:35,120 --> 01:12:38,900\nYou can also do multiple certificates,\ncertificates for different purposes.\n\n1478\n01:12:38,900 --> 01:12:40,033\nIf you want separate ones or\n\n1479\n01:12:40,033 --> 01:12:42,261\nyou can create one universal\ncertificate like this.\n\n1480\n01:12:42,261 --> 01:12:44,776\nDifferent scenarios are gonna work for\ndifferent people,\n\n1481\n01:12:44,776 --> 01:12:47,799\nyou just have to look at your environment,\nsee what works best for you.\n\n1482\n01:12:47,799 --> 01:12:49,447\nBut yeah, this is a great system.\n\n1483\n01:12:49,447 --> 01:12:50,900\n>> And this is a good point too,\n\n1484\n01:12:50,900 --> 01:12:54,852\nwhen we talk about certificates they\ncan be single purpose or multipurpose.\n\n1485\n01:12:54,852 --> 01:12:59,470\nSingle purpose means it's only good for\none thing, smart card logon, nothing else.\n\n1486\n01:12:59,470 --> 01:13:03,377\nMultipurpose is like the one we just did\nwhere it can do client authentication,\n\n1487\n01:13:03,377 --> 01:13:04,908\nEFS, smart card logon, etc.\n\n1488\n01:13:04,908 --> 01:13:07,287\nAnd so you might think,\nwhy would I, you know,\n\n1489\n01:13:07,287 --> 01:13:10,035\nwhat's the difference when I choose one or\nthe other?\n\n1490\n01:13:10,035 --> 01:13:14,655\nIf you do a single purpose certificate and\nthey need more than one function,\n\n1491\n01:13:14,655 --> 01:13:19,058\nlike EFS and smartcard, I'd have to\nissue two separate certificates,\n\n1492\n01:13:19,058 --> 01:13:20,446\neach doing one thing.\n\n1493\n01:13:20,446 --> 01:13:23,723\nIf I do a multi-purpose, I could\ncombine it all into one certificate and\n\n1494\n01:13:23,723 --> 01:13:26,429\njust have to issue one certificate\nto manage and maintain.\n\n1495\n01:13:26,429 --> 01:13:29,260\nSo then you might thing, well,\nwhy don't I always do that?\n\n1496\n01:13:29,260 --> 01:13:31,280\nThat's the smart way to go?\n\n1497\n01:13:31,280 --> 01:13:34,550\nWhat if you want your smartcard log on\ncertificate to be good for a year, but\n\n1498\n01:13:34,550 --> 01:13:37,510\nyou want your EFS certificate\nto be good for two years.\n\n1499\n01:13:37,510 --> 01:13:39,240\nIf they're all on the same certificate,\nI can't do that.\n\n1500\n01:13:39,240 --> 01:13:42,460\nSo if you have different requirements for\nthe validity period and things like that,\n\n1501\n01:13:42,460 --> 01:13:43,710\nor strength.\n\n1502\n01:13:43,710 --> 01:13:44,940\n>> And on a multipurpose key,\n\n1503\n01:13:44,940 --> 01:13:49,550\nis the key gets compromised, everything\nyou use that key for has to be rehandled.\n\n1504\n01:13:49,550 --> 01:13:52,470\nSo if you used it for, like, bit locker,\nnow you got to re-encrypt your drive,\n\n1505\n01:13:52,470 --> 01:13:53,830\nthat's a mess.\n\n1506\n01:13:53,830 --> 01:13:56,240\nVersus if you use separate keys,\nthat would mean it should.\n\n1507\n01:13:56,240 --> 01:13:57,580\n>> Exactly.\n\n1508\n01:13:57,580 --> 01:13:59,949\n>> Honestly if one of your\nkeys gets compromised,\n\n1509\n01:13:59,949 --> 01:14:01,883\nthey probably all have [CROSSTALK]\n>> Yeah.\n\n1510\n01:14:01,883 --> 01:14:03,960\n[LAUGH] All right, very good.\n\n1511\n01:14:03,960 --> 01:14:06,900\nSo that takes care of, we showed\nyou how to work with the templates,\n\n1512\n01:14:08,050 --> 01:14:09,280\nset the permissions on the template.\n\n1513\n01:14:09,280 --> 01:14:11,920\nRemember, the permissions\nare done on the template itself.\n\n1514\n01:14:11,920 --> 01:14:15,130\nNext thing I want to show you guys is\nhow to set up an enrollment agent.\n\n1515\n01:14:15,130 --> 01:14:18,400\nBecause if we're doing smart card login,\nfor example, within our company.\n\n1516\n01:14:18,400 --> 01:14:21,130\nLet's say we're hiring ten\nnew people next Monday.\n\n1517\n01:14:21,130 --> 01:14:22,400\nThey're gonna walk in on Monday.\n\n1518\n01:14:22,400 --> 01:14:24,122\nThey're gonna get their employee package,\nand\n\n1519\n01:14:24,122 --> 01:14:26,904\nthey're gonna want their smart card\nsitting there waiting for them, right?\n\n1520\n01:14:26,904 --> 01:14:30,347\nWell I don't want to wait til\nMonday to do that, as they come in.\n\n1521\n01:14:30,347 --> 01:14:33,050\nBecause they don't have an account yet.\n\n1522\n01:14:33,050 --> 01:14:35,100\nThey're not there to\nrequest a certificate.\n\n1523\n01:14:35,100 --> 01:14:38,530\nI wanna go ahead and get a certificate for\nthis other person, put it on a smart card,\n\n1524\n01:14:38,530 --> 01:14:40,770\nhave it ready to go when\nthey walk in Monday morning.\n\n1525\n01:14:40,770 --> 01:14:43,250\nWell normally,\nI can't request a certificate for Don.\n\n1526\n01:14:43,250 --> 01:14:45,930\nI can request a certificate for\nmyself, right?\n\n1527\n01:14:45,930 --> 01:14:48,500\nSo we can create what's\ncalled an enrollment agent.\n\n1528\n01:14:48,500 --> 01:14:52,490\nAn enrollment agent is given permission to\nrequest certificates on behalf of another\n\n1529\n01:14:52,490 --> 01:14:53,900\nuser or computer.\n\n1530\n01:14:53,900 --> 01:14:57,620\nWith 2012 they introduced something\ncalled restricted enrollment agents.\n\n1531\n01:14:57,620 --> 01:15:01,440\nWhere we can be very specific about what\nthey are allowed to request a certificate\n\n1532\n01:15:01,440 --> 01:15:04,120\nor who they are allowed to\nrequest a certificate for.\n\n1533\n01:15:04,120 --> 01:15:09,530\nIt's going to be done, where am I at here,\noh, let's get out of that.\n\n1534\n01:15:09,530 --> 01:15:12,120\nLet's flip back over to the templates.\n\n1535\n01:15:12,120 --> 01:15:15,380\nThe first thing I need to\ndo is come in here and\n\n1536\n01:15:15,380 --> 01:15:17,560\nthere's a certificate for\nEnrollment Agent.\n\n1537\n01:15:17,560 --> 01:15:18,990\nI'm going to have to turn that on.\n\n1538\n01:15:20,280 --> 01:15:22,620\nWe'll find Enrollment Agent here.\n\n1539\n01:15:22,620 --> 01:15:24,360\nIt's a version 1, but I don't care.\n\n1540\n01:15:24,360 --> 01:15:27,899\nI'm not changing any of the properties\nexcept for the Access Control List.\n\n1541\n01:15:28,910 --> 01:15:34,065\nI'm going to go ahead and give, oh, who\nshould I make my enrollment agent here.\n\n1542\n01:15:34,065 --> 01:15:38,779\nWe'll use Nate-Dog over there.\n\n1543\n01:15:38,779 --> 01:15:43,014\nSo I've added Nate, and\nI'm going to give him read and\n\n1544\n01:15:43,014 --> 01:15:47,726\nenroll permissions for\nthe Enrollment Agent Certificate.\n\n1545\n01:15:47,726 --> 01:15:52,142\nThen I'm going to go back out\nto my CertServ console and\n\n1546\n01:15:52,142 --> 01:15:57,720\ntell it it's now allowed to issue\nan Enrollment Agent Certificate.\n\n1547\n01:16:01,325 --> 01:16:03,880\n>> Eventually.\n>> I swore, I clicked on that.\n\n1548\n01:16:05,080 --> 01:16:06,120\n>> In your environment,\n\n1549\n01:16:06,120 --> 01:16:08,780\nyou might choose to create a group\ninstead called Enrollment Agents.\n\n1550\n01:16:08,780 --> 01:16:12,430\nThat way you could put people in and\nout of that to be able to use it.\n\n1551\n01:16:12,430 --> 01:16:16,437\nHere we're doing a specific user which\nis good in smaller environments.\n\n1552\n01:16:16,437 --> 01:16:19,351\nIf we don't want to constantly maintain\nit a group can be a little handier.\n\n1553\n01:16:19,351 --> 01:16:22,550\n>> Yeah, it would definitely\nbe a best practice, right?\n\n1554\n01:16:22,550 --> 01:16:24,750\nNow the enrollment agent is set up.\n\n1555\n01:16:24,750 --> 01:16:28,850\nI need to request now Nate needs to\nbe issued one of those certificates.\n\n1556\n01:16:28,850 --> 01:16:31,580\nAnd so let me double-check,\nI forgot to add him.\n\n1557\n01:16:31,580 --> 01:16:37,205\nWell I've got a client up and\nrunning yeah, we've got a client.\n\n1558\n01:16:37,205 --> 01:16:38,285\nI think you can log onto here.\n\n1559\n01:16:39,805 --> 01:16:42,026\nSo he's not in any special group,\n\n1560\n01:16:42,026 --> 01:16:46,324\nso he wouldn't be able to logon to\nthe server and request one here.\n\n1561\n01:16:46,324 --> 01:16:49,940\nSo let me logon as Nate.\n\n1562\n01:16:49,940 --> 01:16:54,038\nMaybe.\n\n1563\n01:16:54,038 --> 01:16:55,060\n>> If you know his password.\n\n1564\n01:16:55,060 --> 01:16:55,942\n>> Try that again.\n\n1565\n01:17:02,740 --> 01:17:04,933\nAll right then, let's do this.\n\n1566\n01:17:04,933 --> 01:17:06,837\nLet's flip back over to DC and\n\n1567\n01:17:06,837 --> 01:17:10,350\nlet's double check on that\nActive Directory in here.\n\n1568\n01:17:11,670 --> 01:17:12,590\nWhat do we do now?\n\n1569\n01:17:12,590 --> 01:17:13,570\nOh you know what it is?\n\n1570\n01:17:13,570 --> 01:17:14,540\nI know what it is.\n\n1571\n01:17:14,540 --> 01:17:18,855\nSilly, silly me.\n\n1572\n01:17:18,855 --> 01:17:22,971\nNate does not have permissions to\nremote desktop into to this machine and\n\n1573\n01:17:22,971 --> 01:17:24,664\nI'm using this RDP console.\n\n1574\n01:17:24,664 --> 01:17:28,960\nSo I need to fix that real quick.\n\n1575\n01:17:31,820 --> 01:17:33,640\nI'll just go the old school way here.\n\n1576\n01:17:34,970 --> 01:17:37,960\nI know I'm supposed to be using\nthat smart that start screen and\n\n1577\n01:17:39,300 --> 01:17:40,710\ndoing all that fun stuff.\n\n1578\n01:17:40,710 --> 01:17:42,150\n>> Hard to get used to new things.\n\n1579\n01:17:42,150 --> 01:17:42,750\n>> It is isn't it?\n\n1580\n01:17:43,930 --> 01:17:48,220\nAll right so I'm gonna come in here and\nI'm gonna go ahead and add Nate,\n\n1581\n01:17:48,220 --> 01:17:51,234\ngive him permissins to\nremote into this machine.\n\n1582\n01:18:00,667 --> 01:18:03,291\nAnd then we're gonna log back in as Nate,\nand we'll take a look at this.\n\n1583\n01:18:03,291 --> 01:18:08,140\nWe'll grab one of those\ncertificates real quick.\n\n1584\n01:18:12,070 --> 01:18:15,950\nSo what Nate's gonna do if I had told you\nknow hey you're now the enrollment agent.\n\n1585\n01:18:15,950 --> 01:18:17,270\nWe're gonna make you the enrollment agent,\n\n1586\n01:18:17,270 --> 01:18:19,310\nyou need to go request one\nof these certificates.\n\n1587\n01:18:19,310 --> 01:18:22,830\nHe's got a couple different ways he could\ndo that we could connect I really haven't\n\n1588\n01:18:22,830 --> 01:18:25,540\ntest, we haven't looked at\nour web enrollment page.\n\n1589\n01:18:25,540 --> 01:18:27,420\nBut there's really an easier way to do it,\n\n1590\n01:18:27,420 --> 01:18:30,540\nwhich I'll show you once\nit builds Nate's profile.\n\n1591\n01:18:30,540 --> 01:18:31,865\nFirst time he's logged on, so.\n\n1592\n01:18:31,865 --> 01:18:35,469\n>> [LAUGH] Gotta set up a Start screen and\nWindows store, it's very important.\n\n1593\n01:18:35,469 --> 01:18:36,049\n>> Gotta down.\n\n1594\n01:18:36,049 --> 01:18:37,560\n>> How can we get by without that?\n\n1595\n01:18:37,560 --> 01:18:42,250\n>> I know, right, download all those\ncool apps, and all that fun stuff.\n\n1596\n01:18:42,250 --> 01:18:44,140\n>> That is one of the more\nfrustrating things about Windows 8,\n\n1597\n01:18:44,140 --> 01:18:46,800\nthe amount of fluff they've\nadded to the accounts.\n\n1598\n01:18:46,800 --> 01:18:48,130\n>> Yeah, yeah.\n\n1599\n01:18:48,130 --> 01:18:49,210\n>> Yeah, when he gets logged in.\n\n1600\n01:18:49,210 --> 01:18:51,390\nAnd Mike,\nyou mentioned that web enrollment, right?\n\n1601\n01:18:51,390 --> 01:18:54,780\nSo what Nate could do is he\ncould fire up a web browser and\n\n1602\n01:18:54,780 --> 01:18:56,790\npoint it to our subordinate CA.\n\n1603\n01:18:56,790 --> 01:18:57,589\nAnd there's just a web page.\n\n1604\n01:18:57,589 --> 01:18:59,545\nIt's a very sparse webpage.\n\n1605\n01:18:59,545 --> 01:19:02,830\nYou can request and\ninstall a certificate if you want.\n\n1606\n01:19:02,830 --> 01:19:05,050\n>> And we should take a peek at it,\nI suppose,\n\n1607\n01:19:05,050 --> 01:19:10,370\ncuz we saw where I created the MMC and\nrequested a certificate that way.\n\n1608\n01:19:10,370 --> 01:19:11,890\nGreat, Googley moogley.\n\n1609\n01:19:11,890 --> 01:19:12,750\n>> It's taking its time.\n\n1610\n01:19:12,750 --> 01:19:13,820\n>> It really is.\n\n1611\n01:19:13,820 --> 01:19:15,030\n>> Why don't you just\njump over to the DC and\n\n1612\n01:19:15,030 --> 01:19:16,810\nwe'll show them the web page right now?\n\n1613\n01:19:16,810 --> 01:19:18,770\n>> Okay.\n>> By the time we're done with that,\n\n1614\n01:19:18,770 --> 01:19:20,010\nhopefully he'll be logged in.\n\n1615\n01:19:20,010 --> 01:19:21,010\n>> Maybe.\n\n1616\n01:19:21,010 --> 01:19:25,531\nAll right, in that web URL it's always\ngoing to be name of the server.\n\n1617\n01:19:25,531 --> 01:19:26,402\nSo, http.\n\n1618\n01:19:26,402 --> 01:19:31,030\nNow, we should set up a certificate and\nsecure the web page as well.\n\n1619\n01:19:31,030 --> 01:19:39,086\nBut it's always be http or\nhttps://name of the server/certserve.\n\n1620\n01:19:39,086 --> 01:19:47,997\nSo in our case http://lun-dc1/cert S\n>> I always get that backwards.\n\n1621\n01:19:47,997 --> 01:19:49,082\nServe, cert serve.\n\n1622\n01:19:49,082 --> 01:19:50,435\n>> I usually try it twice.\n\n1623\n01:19:50,435 --> 01:19:51,816\n>> Yeah.\n>> [LAUGH]\n\n1624\n01:19:51,816 --> 01:19:54,374\n>> And let me go ahead and authenticate.\n\n1625\n01:19:54,374 --> 01:19:58,837\n>> I did always think it was funny\nhow it's the certificate service, but\n\n1626\n01:19:58,837 --> 01:20:01,118\nit doesn't enable SSL by default.\n\n1627\n01:20:01,118 --> 01:20:01,654\n>> Right?\n\n1628\n01:20:01,654 --> 01:20:04,230\n>> And I I know why.\n\n1629\n01:20:04,230 --> 01:20:07,752\nThe reason is if you're just now setting\nup your CA you can't issue certs yet\n\n1630\n01:20:07,752 --> 01:20:10,290\nso it doesn't have an SSL\ncertificate to use.\n\n1631\n01:20:10,290 --> 01:20:14,630\nIt is up to you to go back into\nIIS after all this is done and\n\n1632\n01:20:14,630 --> 01:20:17,360\nassign a certificate to that\nwebsite to make this page secure.\n\n1633\n01:20:17,360 --> 01:20:19,000\nThe default is that it's not secure.\n\n1634\n01:20:19,000 --> 01:20:20,180\n>> It's not, and we really should.\n\n1635\n01:20:20,180 --> 01:20:22,700\nHere, somebody could click\nrequest a certificate.\n\n1636\n01:20:22,700 --> 01:20:24,536\nI just like when I right\nclicked earlier and\n\n1637\n01:20:24,536 --> 01:20:27,960\nhere it's showing me all the certificates\nthat I have permissions to request.\n\n1638\n01:20:27,960 --> 01:20:31,419\nAnd in this case, just a user certificate.\n\n1639\n01:20:31,419 --> 01:20:34,204\nBut as Dom was saying it's\na pretty plain old webpage.\n\n1640\n01:20:34,204 --> 01:20:38,895\n>> Yeah, it is useful on the home page,\nif you go back to the home page.\n\n1641\n01:20:38,895 --> 01:20:43,167\nYou'll see on there where they\ncan download oh, it's thinking.\n\n1642\n01:20:43,167 --> 01:20:43,795\n>> It's thinking.\n\n1643\n01:20:43,795 --> 01:20:45,521\n>> They can not just\nrequest a certificate, but\n\n1644\n01:20:45,521 --> 01:20:47,299\nthey can also download\nthe root certificate.\n\n1645\n01:20:47,299 --> 01:20:49,792\n>> Right.\n>> And that's useful, the public key,\n\n1646\n01:20:49,792 --> 01:20:50,739\nnot private key.\n\n1647\n01:20:50,739 --> 01:20:53,387\nThat's useful if they're sitting\non a machine that's maybe not\n\n1648\n01:20:53,387 --> 01:20:54,359\njoined to your domain.\n\n1649\n01:20:54,359 --> 01:20:58,420\nSo the GPO didn't apply to it, it's not\ngonna trust any of these certificates.\n\n1650\n01:20:58,420 --> 01:21:02,075\nThey could download the CA certificate and\ncertificate chain,\n\n1651\n01:21:02,075 --> 01:21:05,806\ninstall it on their computer,\nand now, they trust your server.\n\n1652\n01:21:05,806 --> 01:21:11,750\n>> Really useful if you have like\na Mac machines, a Mac OS machine.\n\n1653\n01:21:11,750 --> 01:21:13,817\nWhatever's not going to be run your GPO.\n\n1654\n01:21:13,817 --> 01:21:15,009\n>> Right.\n>> So here they can go and\n\n1655\n01:21:15,009 --> 01:21:15,721\njust download it.\n\n1656\n01:21:15,721 --> 01:21:17,998\n>> Contractor laptops, they're not\npart of your domain, things like that.\n\n1657\n01:21:17,998 --> 01:21:19,621\n>> Absolutely.\n>> Maybe some mobile devices.\n\n1658\n01:21:19,621 --> 01:21:21,549\n>> Yeah, and it's not a security issue.\n\n1659\n01:21:21,549 --> 01:21:23,617\nWe're not worried that they trust us.\n\n1660\n01:21:23,617 --> 01:21:24,593\nThat's fine.\n\n1661\n01:21:24,593 --> 01:21:28,330\nWe don't trust them unless\nwe choose to change that.\n\n1662\n01:21:28,330 --> 01:21:29,480\n>> Exactly.\nAll right, there we go.\n\n1663\n01:21:29,480 --> 01:21:30,160\nNate's logged in.\n\n1664\n01:21:30,160 --> 01:21:33,450\nSo real quick,\nI'm just going to set up an MMC.\n\n1665\n01:21:36,305 --> 01:21:40,881\nAnd add my certificate's snap in.\n\n1666\n01:21:40,881 --> 01:21:41,649\n>> There we go.\n\n1667\n01:21:43,901 --> 01:21:47,192\nNotice because Nate's not an admin,\nit only offers him himself,\n\n1668\n01:21:47,192 --> 01:21:50,120\nnot the computer and service accounts.\n\n1669\n01:21:50,120 --> 01:21:53,740\nI'll go down here and we should see that\nNate already has one for smart card logon.\n\n1670\n01:21:53,740 --> 01:21:55,520\nRight?\nThat my group policy kicked in and\n\n1671\n01:21:55,520 --> 01:21:57,200\nautomatically issued him one.\n\n1672\n01:21:57,200 --> 01:22:01,200\nSo I'm going to come in here and\nrequest another certificate, and\n\n1673\n01:22:01,200 --> 01:22:03,330\nit's gonna walk me through\nthe process it's gonna use.\n\n1674\n01:22:03,330 --> 01:22:05,820\nThat's that default policy we set for\nyour group policy.\n\n1675\n01:22:08,122 --> 01:22:11,020\nAnd then now what it's doing is\nit's reaching out to the CA and\n\n1676\n01:22:11,020 --> 01:22:14,610\nit's finding out what certificates\ndoes Nate have permission to request?\n\n1677\n01:22:14,610 --> 01:22:18,090\nHe's gotta have at least Read and\nEnroll permission.\n\n1678\n01:22:18,090 --> 01:22:19,440\nAnd if I did my job correctly,\n\n1679\n01:22:19,440 --> 01:22:22,570\nthe enrollment agent certificate\nshould show up in that list.\n\n1680\n01:22:24,730 --> 01:22:26,140\nAnd sure enough there it is.\n\n1681\n01:22:26,140 --> 01:22:30,860\nSo I'm going to choose enrollment agent,\nwe'll click enroll and I get\n\n1682\n01:22:30,860 --> 01:22:36,670\nsuccess and I see that new certificate\nthere for Nate to be an enrollment agent.\n\n1683\n01:22:36,670 --> 01:22:38,750\nSo now that Nate's been\nissued a certificate for\n\n1684\n01:22:38,750 --> 01:22:41,150\nthe purpose of enrollment agent.\n\n1685\n01:22:41,150 --> 01:22:45,560\nNow we're gonna go back over and we're\ngonna set it up as an enrollment agent.\n\n1686\n01:22:45,560 --> 01:22:49,100\nSo we'll pull up the properties for\nthis issuing CA.\n\n1687\n01:22:49,100 --> 01:22:50,750\nBoy they opened up fast that time.\n\n1688\n01:22:50,750 --> 01:22:52,590\nAnd I've got a tab here for\nenrollment agents.\n\n1689\n01:22:52,590 --> 01:22:55,600\nAnd you can see by default,\ndo not restrict enrollment agents.\n\n1690\n01:22:55,600 --> 01:22:59,730\nSo in other words, once he has that\ncertificate he can request any certificate\n\n1691\n01:22:59,730 --> 01:23:03,870\non behalf of anybody which we\ndon't want Nate doing that.\n\n1692\n01:23:03,870 --> 01:23:04,686\nWe don't trust him like that.\n\n1693\n01:23:04,686 --> 01:23:05,230\n>> [LAUGH] Not that much.\n\n1694\n01:23:05,230 --> 01:23:09,130\n>> I mean he can request in my name\na domain admin certificate and\n\n1695\n01:23:09,130 --> 01:23:10,410\ntry to do things with that.\n\n1696\n01:23:10,410 --> 01:23:13,950\n>> And then maybe I go to access\nthe server with IPSEC or I browse to it,\n\n1697\n01:23:13,950 --> 01:23:17,500\nand I assume it's the real server because\nI see a cert that was signed by Mike.\n\n1698\n01:23:17,500 --> 01:23:19,700\nAnd I go all right,\nwell I know that's it, but\n\n1699\n01:23:19,700 --> 01:23:22,880\nin actuality it's one that Nate\nissued out or whatever, right?\n\n1700\n01:23:22,880 --> 01:23:26,680\nSo that's the risk we have, is there\nneeds to be somebody there who we trust.\n\n1701\n01:23:26,680 --> 01:23:29,080\n>> So we're gonna just turn it on by\nchoosing Restricted Roman Agents.\n\n1702\n01:23:29,080 --> 01:23:32,710\nAnd this is gonna tell me that only\nCA's 2008 and later support this, so\n\n1703\n01:23:32,710 --> 01:23:35,740\nif you still have 2003 And\ncertificate servers,\n\n1704\n01:23:35,740 --> 01:23:39,550\nthey would not understand the whole\nrestricted enrollment agent process.\n\n1705\n01:23:39,550 --> 01:23:43,690\nBy default, it's got Everyone,\nAll templates, and Permissions, Everyone.\n\n1706\n01:23:43,690 --> 01:23:46,785\nNow, I can't just remove\nthe Everyone group.\n\n1707\n01:23:46,785 --> 01:23:48,605\nOr it flips back to do not restrict.\n\n1708\n01:23:48,605 --> 01:23:52,055\nSo, what you have to do is first add, so\n\n1709\n01:23:52,055 --> 01:23:56,445\nI'm gonna add Nate, again this will be\nmuch better if we were using a group.\n\n1710\n01:23:56,445 --> 01:23:59,925\nAnd now that I've added Nate,\nI can remove everyone.\n\n1711\n01:23:59,925 --> 01:24:02,250\nSo, the only enrollment\nagent I'm allowing is Nate.\n\n1712\n01:24:02,250 --> 01:24:04,580\nWhat templates can he request?\n\n1713\n01:24:04,580 --> 01:24:09,410\nWell, I'm gonna set it up so that it's\nthe, I don't know, we'll click Add here,\n\n1714\n01:24:09,410 --> 01:24:13,420\nit's not responding now so\nwe'll wait for it to think about this.\n\n1715\n01:24:15,576 --> 01:24:17,970\nIt's gotta build that list and\nit's a little bit slow.\n\n1716\n01:24:17,970 --> 01:24:24,150\nI'm gonna let him get that lab user\ncertificate and then I'm gonna remove all.\n\n1717\n01:24:25,430 --> 01:24:28,380\nAnd then for whom is he allowed\nto request a certificate?\n\n1718\n01:24:28,380 --> 01:24:34,010\nAnd I'm gonna add, I think I created\na group called executives earlier.\n\n1719\n01:24:35,350 --> 01:24:37,909\nAnd I'm going to remove\nthe everyone group.\n\n1720\n01:24:39,670 --> 01:24:42,700\nSo now Nate can only request lab\nuser certificates and only for\n\n1721\n01:24:42,700 --> 01:24:46,220\npeople that are in that executive group,\nthat security group and active director,\n\n1722\n01:24:47,260 --> 01:24:54,390\nand that is our restricted\nenrollment agent, again new to 2012.\n\n1723\n01:24:54,390 --> 01:24:57,970\nYeah, if we had not put the restriction on\nthis, just a regular enrollment agent, so\n\n1724\n01:24:57,970 --> 01:24:59,220\nit's really the same thing.\n\n1725\n01:24:59,220 --> 01:25:00,300\n>> Exactly.\n\n1726\n01:25:00,300 --> 01:25:01,590\nAll right, let's see what do we got?\n\n1727\n01:25:01,590 --> 01:25:05,290\nEnough time to do a real quick, maybe not.\n\n1728\n01:25:05,290 --> 01:25:06,620\nOCSP I think is next.\n\n1729\n01:25:06,620 --> 01:25:10,315\nWe got OCSP to still do, which is our\nOnline Certificate Status Protocol.\n\n1730\n01:25:10,315 --> 01:25:12,823\nAnd we still want to do some key recovery.\n\n1731\n01:25:12,823 --> 01:25:14,727\n>> Okay, why don't we do this?\n\n1732\n01:25:14,727 --> 01:25:16,756\nWhy don't we stop here,\nand when we get back,\n\n1733\n01:25:16,756 --> 01:25:20,470\nwe'll tackle OCSP in the next segment, and\nthen we'll do key recovery from there.\n\n1734\n01:25:20,470 --> 01:25:21,580\nSo it's a pretty good spot to stop.\n\n1735\n01:25:21,580 --> 01:25:22,488\n>> Sounds like a plan.\n\n1736\n01:25:22,488 --> 01:25:23,112\n>> All right.\n\n1737\n01:25:23,112 --> 01:25:24,392\nSo ladies and gentlemen we're\ngoing to stop and take a break.\n\n1738\n01:25:24,392 --> 01:25:28,128\nWhen we get back,\nmore certificate stuff after this.\n\n1739\n01:25:28,128 --> 01:25:31,196\n[MUSIC]\n\n1740\n01:25:31,196 --> 01:25:37,184\n[SOUND]\nAll right, welcome back everybody.\n\n1741\n01:25:37,184 --> 01:25:40,626\nSo, at the beginning of\nthe episode we talked a little bit\n\n1742\n01:25:40,626 --> 01:25:44,214\nabout these certificate replication lists,\nthe CRL, and\n\n1743\n01:25:44,214 --> 01:25:47,585\nwe talked a bit about how it's\nkind of inefficient it was\n\n1744\n01:25:47,585 --> 01:25:52,070\ndesigned in an earlier day when\nthe world was not as big as it is now.\n\n1745\n01:25:52,070 --> 01:25:54,780\nAnd so, it's not very efficient for\nprocessing revocation and\n\n1746\n01:25:54,780 --> 01:25:59,490\nin fact a lot of web browsers have\nnot done a good at handling that, so\n\n1747\n01:25:59,490 --> 01:26:04,890\nsometimes your web browser's not actually\nchecking the CRL like they should.\n\n1748\n01:26:04,890 --> 01:26:09,110\nThe OCSP is a new service that we have,\nnew-ish, right?\n\n1749\n01:26:09,110 --> 01:26:12,413\nCame out in 2008 or for\nWindows, it came out in 2008.\n\n1750\n01:26:12,413 --> 01:26:13,665\nIt's not just a Microsoft thing.\n\n1751\n01:26:13,665 --> 01:26:14,317\n>> Right.\n\n1752\n01:26:14,317 --> 01:26:16,574\n>> But it came out to make\nthat a lot more efficient,\n\n1753\n01:26:16,574 --> 01:26:18,504\nwhere we can do direct domain look-ups,\n\n1754\n01:26:18,504 --> 01:26:22,920\nyou have much faster response from the\nserver when checking for revocation lists.\n\n1755\n01:26:22,920 --> 01:26:27,422\nIt's not on by default because\nit's the new way to do things.\n\n1756\n01:26:27,422 --> 01:26:28,002\n>> Right.\n\n1757\n01:26:28,002 --> 01:26:30,093\n>> So if we want to make use of\nthe OSB we've got to get it set up and\n\n1758\n01:26:30,093 --> 01:26:31,946\nthat's what we're going to\ntake a look at right now.\n\n1759\n01:26:31,946 --> 01:26:33,330\n>> All right, let's do it.\n\n1760\n01:26:33,330 --> 01:26:35,400\nThe first thing I want to show you guys\nis we're going to come in here and\n\n1761\n01:26:35,400 --> 01:26:38,390\nI'm going to right click on my\nrevokes certificates node and\n\n1762\n01:26:38,390 --> 01:26:40,330\nI'm going to pull up its Properties.\n\n1763\n01:26:40,330 --> 01:26:41,740\nThis is where you can control.\n\n1764\n01:26:41,740 --> 01:26:44,650\nIt's gonna automatically publish\nthe certificate revocation list.\n\n1765\n01:26:44,650 --> 01:26:47,540\nAll those locations listed,\nremember, we took a look at earlier.\n\n1766\n01:26:47,540 --> 01:26:50,460\nThe CDPs,\nthose Critical Distribution Points.\n\n1767\n01:26:50,460 --> 01:26:53,260\nSo that's where it's\ngoing to publish them to.\n\n1768\n01:26:53,260 --> 01:26:55,570\nThis is how often it's\ngoing to publish them.\n\n1769\n01:26:55,570 --> 01:26:59,080\nAnd most places will do something,\nthey're gonna change these defaults.\n\n1770\n01:26:59,080 --> 01:26:59,940\nI don't know about you, Don.\n\n1771\n01:26:59,940 --> 01:27:06,360\nI kind of like doing the I don't know,\nI've seen some places set this to one day.\n\n1772\n01:27:06,360 --> 01:27:10,680\nAnd then change this to every one hour and\n\n1773\n01:27:10,680 --> 01:27:13,530\nthat might be a little too frequent for\nsome people.\n\n1774\n01:27:13,530 --> 01:27:18,708\n>> Yeah it boils down to how fast you\nwant to be able to revoke a certificate.\n\n1775\n01:27:18,708 --> 01:27:22,097\nThe default setting of do\na full publish once a week and\n\n1776\n01:27:22,097 --> 01:27:25,864\na delta every day means if that\nyou revoke the certificate,\n\n1777\n01:27:25,864 --> 01:27:31,070\nit could take up to 24 hours before\nyour clients realize it's been revoked.\n\n1778\n01:27:31,070 --> 01:27:34,029\n>> Which means that person could attempt\nto use their certificate to log on even\n\n1779\n01:27:34,029 --> 01:27:36,076\nafter you've fired them or\ndigitally sign emails.\n\n1780\n01:27:36,076 --> 01:27:36,839\n>> Yep.\n\n1781\n01:27:36,839 --> 01:27:38,139\nSo, if you're worried about that.\n\n1782\n01:27:38,139 --> 01:27:40,219\nIf you're trying to keep\nthat time really short,\n\n1783\n01:27:40,219 --> 01:27:42,210\nthen here's where you would adjust it.\n\n1784\n01:27:42,210 --> 01:27:45,730\nSo, the top setting though,\nthat's for publishing the full list?\n\n1785\n01:27:45,730 --> 01:27:49,650\nAnd the bottom setting is for\nthe deltas, for the changes that happen.\n\n1786\n01:27:49,650 --> 01:27:50,920\nSo you just kinda set them,\n\n1787\n01:27:50,920 --> 01:27:53,120\nthe top value will obviously be\nbigger than the smaller value.\n\n1788\n01:27:53,120 --> 01:27:54,230\nIt's the one on the bottom,\n\n1789\n01:27:54,230 --> 01:27:58,250\nthough that's gonna determine how quickly\nyou can revoke somebody's certificate.\n\n1790\n01:27:58,250 --> 01:28:00,010\n>> Exactly.\nI'm gonna go ahead and click OK.\n\n1791\n01:28:00,010 --> 01:28:01,192\nI'll show you the CRL here in a second.\n\n1792\n01:28:01,192 --> 01:28:02,926\nWe haven't revoked any certificates so\n\n1793\n01:28:02,926 --> 01:28:05,325\nthere's nothing on\nthe certificate revocation list.\n\n1794\n01:28:05,325 --> 01:28:07,774\nSo let's go back over here\nto issued certificates.\n\n1795\n01:28:07,774 --> 01:28:12,638\nAnd I'm going to find that one for Nate,\nfor the lab user, his smart card, and\n\n1796\n01:28:12,638 --> 01:28:17,420\nI'm going to right click on it,\nall tasks and revoke certificate.\n\n1797\n01:28:17,420 --> 01:28:20,330\nAnd when you revoke a certificate, it's\ngoing to ask you for a reason code and\n\n1798\n01:28:20,330 --> 01:28:22,560\nit gives me several choices here.\n\n1799\n01:28:22,560 --> 01:28:25,850\nThe thing to keep in mind is that\nit really doesn't matter for\n\n1800\n01:28:25,850 --> 01:28:27,450\nthe most part, what you choose.\n\n1801\n01:28:27,450 --> 01:28:30,950\nA revoke certificated is a revoke\ncertificate and they are permanent.\n\n1802\n01:28:30,950 --> 01:28:35,910\nAll right, once you revoke a certificate\nyou cannot unrevoke it except there's\n\n1803\n01:28:35,910 --> 01:28:38,550\nalways an exception,\ncertificate hold, all right?\n\n1804\n01:28:38,550 --> 01:28:41,100\nCertificate hold is the only one\nthat would allow you to unrevoke it.\n\n1805\n01:28:41,100 --> 01:28:44,180\nThis might be for\nif say Nate's going on sabbatical.\n\n1806\n01:28:44,180 --> 01:28:45,560\nHe's gonna be gone for six months.\n\n1807\n01:28:45,560 --> 01:28:48,220\nI don't want anybody using his\nsmart card while he's gone.\n\n1808\n01:28:48,220 --> 01:28:51,380\nBut I don't wanna revoke it and have to\nissue him a new one when he gets back, so\n\n1809\n01:28:51,380 --> 01:28:52,680\nI can put it on hold.\n\n1810\n01:28:52,680 --> 01:28:53,940\nIt'll be invalidated.\n\n1811\n01:28:53,940 --> 01:28:58,420\nIt'll show up on the CRL, but\nwhen he comes back, I could un-revoke it.\n\n1812\n01:28:58,420 --> 01:29:01,250\nBut all the others,\nkey compromise, I mean,\n\n1813\n01:29:01,250 --> 01:29:05,100\nthat's good for keeping track of why\nyou revoked it in the first place,\n\n1814\n01:29:05,100 --> 01:29:07,740\nchange of affiliation,\nnice way of saying we fired you.\n\n1815\n01:29:07,740 --> 01:29:09,530\n[LAUGH] But you're done,\nyou're outta here.\n\n1816\n01:29:10,540 --> 01:29:11,300\nAll the rest of them,\n\n1817\n01:29:11,300 --> 01:29:14,480\nit really doesn't matter why\na revoked certificate is revoked.\n\n1818\n01:29:14,480 --> 01:29:17,100\nDid it have rampant\nincompetence as an option?\n\n1819\n01:29:17,100 --> 01:29:18,700\nYeah, I was looking, I was looking.\n\n1820\n01:29:19,990 --> 01:29:22,430\nSo now it shows up underneath\nmy revoked certificates and\n\n1821\n01:29:22,430 --> 01:29:24,980\nthe first thing you're gonna do\neven me for- For me personally,\n\n1822\n01:29:24,980 --> 01:29:28,150\neven though I know that revocation\nlist is gonna be published in an hour.\n\n1823\n01:29:28,150 --> 01:29:30,710\nRight, I'm gonna publish\nthat delta pril every hour.\n\n1824\n01:29:30,710 --> 01:29:33,590\nFirst thing I do when I revoke\na certificate is to go ahead and\n\n1825\n01:29:33,590 --> 01:29:34,690\npublish this CRL again.\n\n1826\n01:29:34,690 --> 01:29:36,765\nJust completely throw those\nother numbers out the window.\n\n1827\n01:29:36,765 --> 01:29:38,270\n[LAUGH] Pretty much, pretty much.\n\n1828\n01:29:38,270 --> 01:29:43,600\nSo now what I'm gonna do, is now that\nI've republished the CRL and I've locked\n\n1829\n01:29:43,600 --> 01:29:48,260\nup my console, I'm gonna wait patiently\nuntil it starts responding again.\n\n1830\n01:29:48,260 --> 01:29:50,410\nOh, that's right I gotta tell\nit if I wanna do the full,\n\n1831\n01:29:50,410 --> 01:29:55,160\nI'm gonna do the whole pril,\nI always forget that dialog's coming.\n\n1832\n01:29:55,160 --> 01:29:56,500\nAll right so now that I've done that,\n\n1833\n01:29:56,500 --> 01:29:57,990\nI'm gonna go back into\nproperties really quick.\n\n1834\n01:29:57,990 --> 01:30:01,300\nJust so you guys can see, there's my\nrevocation list that I've published.\n\n1835\n01:30:01,300 --> 01:30:03,170\nThere's the delta CRL.\n\n1836\n01:30:03,170 --> 01:30:07,100\nIf we want to view that,\nI can go to the revocation list and\n\n1837\n01:30:07,100 --> 01:30:08,600\nthere's the one that I just revoked.\n\n1838\n01:30:08,600 --> 01:30:10,710\nI can see that the reason\ncode was affiliation chain.\n\n1839\n01:30:12,510 --> 01:30:13,290\nAll right.\nSo, that's\n\n1840\n01:30:13,290 --> 01:30:14,900\nour certificate revocation list.\n\n1841\n01:30:14,900 --> 01:30:18,700\nAgain, as Don and I were saying earlier,\nthe client's going to have to parse that.\n\n1842\n01:30:18,700 --> 01:30:22,490\nThat's got one entry in it so\nthat's not a big deal.\n\n1843\n01:30:22,490 --> 01:30:24,750\nBut we'll go ahead and\nshow you how to set up this OCSP.\n\n1844\n01:30:24,750 --> 01:30:28,220\nSo, the first thing I need to do\nis flip back over to install it.\n\n1845\n01:30:28,220 --> 01:30:30,110\nRemember, we did not choose that.\n\n1846\n01:30:30,110 --> 01:30:33,460\nWhen we install certificate\nservices on this machine.\n\n1847\n01:30:33,460 --> 01:30:37,580\nI'm gonna jump ahead real quick and\nsee I've got two of six already installed,\n\n1848\n01:30:37,580 --> 01:30:41,470\nbecause we did certificate authority and\ncertificational third WEP enrollment.\n\n1849\n01:30:41,470 --> 01:30:45,530\nI'm gonna add the online responder,\nit's gonna add my responder console.\n\n1850\n01:30:45,530 --> 01:30:49,300\nAnd that's really all you\ngotta choose through here.\n\n1851\n01:30:49,300 --> 01:30:52,330\nAnd just next, next and install,\nand we'll get this installed as.\n\n1852\n01:30:52,330 --> 01:30:54,650\nQuickly as Microsoft will let us.\n\n1853\n01:30:54,650 --> 01:30:56,350\nSee if it stops at 63 or 64%.\n\n1854\n01:30:56,350 --> 01:31:01,570\nYeah, and the OS OCSP, it's basically\ngoing to maintain a little database.\n\n1855\n01:31:01,570 --> 01:31:04,520\nIt's going to keep track of the revocation\njust like your CRL does, but\n\n1856\n01:31:04,520 --> 01:31:05,920\nin a database form.\n\n1857\n01:31:05,920 --> 01:31:09,380\nThat way when we reach out to it we're not\nsaying, hey, give me the whole list so\n\n1858\n01:31:09,380 --> 01:31:11,060\nI can figure it out myself.\n\n1859\n01:31:11,060 --> 01:31:12,330\nInstead we're reaching out to it and\n\n1860\n01:31:12,330 --> 01:31:15,220\nsaying, I'm accessing this certificate,\nis it okay?\n\n1861\n01:31:15,220 --> 01:31:19,210\nAnd so we're doing a query based on one\nspecific certificate in doing that lookup.\n\n1862\n01:31:19,210 --> 01:31:23,820\nSo, it's a lot more efficient\nit is The newer side of things.\n\n1863\n01:31:23,820 --> 01:31:25,430\nMost systems support it these days.\n\n1864\n01:31:25,430 --> 01:31:28,090\nI think so, I think so and\nif they don't they could still go and\n\n1865\n01:31:28,090 --> 01:31:30,840\nwe're going to add to the extensions\nwhere to find the OCSB.\n\n1866\n01:31:30,840 --> 01:31:34,050\nWe do have to tell the nodes that hey,\nthere is an OCSB on the network and\n\n1867\n01:31:34,050 --> 01:31:34,755\nyou can check with him.\n\n1868\n01:31:34,755 --> 01:31:38,835\nIf they didn't support that, they would\nstill see the location of the CRL,\n\n1869\n01:31:38,835 --> 01:31:40,775\nand they would be able to\ncheck it the old way as well.\n\n1870\n01:31:42,185 --> 01:31:43,785\nOr they can just choose to disregard it.\n\n1871\n01:31:43,785 --> 01:31:46,045\nYeah, they can just trust it anyway,\njust like I do.\n\n1872\n01:31:46,045 --> 01:31:48,708\nYou go to those websites and it says,\nthis certificate can't be trusted,\n\n1873\n01:31:48,708 --> 01:31:49,607\nare you sure you want to?\n\n1874\n01:31:49,607 --> 01:31:51,987\n[SOUND] Yeah, please.\n\n1875\n01:31:51,987 --> 01:31:53,345\nHere's my credit card number.\n\n1876\n01:31:53,345 --> 01:31:55,900\nOh, goodness.\n\n1877\n01:31:55,900 --> 01:31:57,750\nWhile we're waiting on this.\n\n1878\n01:31:57,750 --> 01:31:58,648\nIt's at 63%.\n\n1879\n01:31:58,648 --> 01:32:02,050\nI remember the very first thing\nthat I bought on the internet.\n\n1880\n01:32:02,050 --> 01:32:05,320\nI bought a copy of a Linux distribution.\n\n1881\n01:32:05,320 --> 01:32:09,290\nIt was a company that put all the files\ntogether and sent it to you on a CD.\n\n1882\n01:32:09,290 --> 01:32:11,630\nI bought it online with a credit\ncard on a non-SSL page.\n\n1883\n01:32:11,630 --> 01:32:14,250\nIt was one of those where you filled\nout the form and hit submit, so\n\n1884\n01:32:14,250 --> 01:32:16,050\nyou know it was just an e-mailed page.\n\n1885\n01:32:16,050 --> 01:32:16,860\nEmailing it to him so\n\n1886\n01:32:16,860 --> 01:32:21,810\nit was like the most [LAUGH] non secure\npurchase that I could have ever made.\n\n1887\n01:32:21,810 --> 01:32:24,270\nBut it would of been in like 1992 so\nyou know,\n\n1888\n01:32:24,270 --> 01:32:25,850\nback then things weren't\nas bad as they are now.\n\n1889\n01:32:25,850 --> 01:32:28,892\nIt was you and 50 other people\non the internet at that time.\n\n1890\n01:32:28,892 --> 01:32:32,560\nYup, that was the first\ntransaction I made.\n\n1891\n01:32:32,560 --> 01:32:33,330\nNice.\n\n1892\n01:32:33,330 --> 01:32:35,750\nAll right so\nnow we've got that role install so\n\n1893\n01:32:35,750 --> 01:32:37,450\nI am going to click on the configure link.\n\n1894\n01:32:39,030 --> 01:32:41,170\nSo and this is kind of odd,\nthis part here.\n\n1895\n01:32:41,170 --> 01:32:44,330\nIt basically is going to go and\nset up some things in the background.\n\n1896\n01:32:44,330 --> 01:32:46,300\nSo I've got my lab administrator account.\n\n1897\n01:32:47,340 --> 01:32:49,090\nI am going to configure\nthe online responder.\n\n1898\n01:32:49,090 --> 01:32:52,910\nAnd I'm going to click configure.\n\n1899\n01:32:54,410 --> 01:32:55,460\nRight?\nIt's really tough.\n\n1900\n01:32:55,460 --> 01:32:56,470\nI know.\nWhy doesn't it\n\n1901\n01:32:56,470 --> 01:32:58,030\njust do that when I install it?\n\n1902\n01:32:58,030 --> 01:32:59,620\nDid you write these steps down?\n\n1903\n01:32:59,620 --> 01:33:01,655\nYes, I did.\nI made sure we got detailed notes here.\n\n1904\n01:33:01,655 --> 01:33:03,000\n[LAUGH] All right.\n\n1905\n01:33:03,000 --> 01:33:04,450\nThere it is now, configured.\n\n1906\n01:33:04,450 --> 01:33:05,330\nAnd we're really not done.\n\n1907\n01:33:05,330 --> 01:33:08,600\nWe didn't actually configure any.\n\n1908\n01:33:08,600 --> 01:33:09,790\nWe still have more steps to do.\n\n1909\n01:33:09,790 --> 01:33:11,410\nSo the point of that wizard is.\n\n1910\n01:33:11,410 --> 01:33:12,420\nPointless.\n\n1911\n01:33:12,420 --> 01:33:13,720\nReally pointless.\n\n1912\n01:33:13,720 --> 01:33:14,400\nYes exactly.\n\n1913\n01:33:14,400 --> 01:33:16,382\nThere is no point to that wizard.\n\n1914\n01:33:16,382 --> 01:33:20,480\nAll right, now that I've got that\ninstalled the next thing I wanna do is\n\n1915\n01:33:20,480 --> 01:33:27,670\ncome over here and go to my, oh I need to\nissue that certificate as well don't I?\n\n1916\n01:33:27,670 --> 01:33:30,530\nSo, let's do this,\nlet's open up the console first.\n\n1917\n01:33:30,530 --> 01:33:31,330\nI'll show you this first.\n\n1918\n01:33:31,330 --> 01:33:34,069\nWe'll go tools and then I should have my.\n\n1919\n01:33:35,200 --> 01:33:37,160\nActually- Online responder management.\n\n1920\n01:33:37,160 --> 01:33:39,990\nYou know what, I'm gonna,\nI don't know why I'm going there first.\n\n1921\n01:33:39,990 --> 01:33:40,910\nLet's set that up.\n\n1922\n01:33:40,910 --> 01:33:45,120\nWe need to set the permissions up, because\nhe needs a certificate in order to so\n\n1923\n01:33:45,120 --> 01:33:48,220\nthis, so We are going to come into our,\n\n1924\n01:33:48,220 --> 01:33:51,320\nI've gone into group policy for\nsome reason.\n\n1925\n01:33:51,320 --> 01:33:54,860\nI'm going to go back over to my\ncertificate services console.\n\n1926\n01:33:54,860 --> 01:33:58,970\nAnd I'm going to take\na look at those templates.\n\n1927\n01:33:58,970 --> 01:34:00,030\nAnd I'm going to manage them.\n\n1928\n01:34:00,030 --> 01:34:05,100\nAnd because the online responder is\ngoing to digitally sign those responses,\n\n1929\n01:34:05,100 --> 01:34:09,000\nbecause you think about that we could\ndo a denial of service if I said,\n\n1930\n01:34:09,000 --> 01:34:12,120\noh yeah I'm the online responder and\nno that certificate is no good.\n\n1931\n01:34:12,120 --> 01:34:14,930\nYeah, it would tell everybody that it\nwas revoked, even though it was good or\n\n1932\n01:34:14,930 --> 01:34:17,870\nworse it'd say oh yeah\nthat certificate is good.\n\n1933\n01:34:17,870 --> 01:34:20,000\nYeah.\nEven though it was not, right?\n\n1934\n01:34:20,000 --> 01:34:21,480\nSo we wanna make sure our OCSP,\n\n1935\n01:34:21,480 --> 01:34:24,720\nwe're getting the response from the,\nthe, the official OCSP.\n\n1936\n01:34:24,720 --> 01:34:28,230\nSo I'm gonna come in\nhere to my permissions.\n\n1937\n01:34:28,230 --> 01:34:31,420\nIf I can get to my security tab,\nI can find it there.\n\n1938\n01:34:31,420 --> 01:34:33,570\nAnd probably not the best thing to do,\nbut just for\n\n1939\n01:34:33,570 --> 01:34:37,010\nthe lab, I'm gonna give the authenticated\nusers enroll permission for this template.\n\n1940\n01:34:39,110 --> 01:34:42,110\nAnd then I'm gonna go back out here and\n\n1941\n01:34:42,110 --> 01:34:45,910\ntell it that it's now allowed\nto issue the OCSP template.\n\n1942\n01:34:49,460 --> 01:34:50,640\nAlright.\nNow that's in the list.\n\n1943\n01:34:50,640 --> 01:34:52,800\nI want to make sure I do that first\ncause you'll see when I go and\n\n1944\n01:34:52,800 --> 01:34:55,670\nconfigure the ocsp it can\npull all this information and\n\n1945\n01:34:55,670 --> 01:34:59,188\ndo it all automatically if I make\nsure I remember to do that first.\n\n1946\n01:34:59,188 --> 01:35:02,270\nSo, al right, so\nnow back over to server manager and\n\n1947\n01:35:02,270 --> 01:35:03,960\nwe'll open up that online responder\n\n1948\n01:35:11,666 --> 01:35:16,930\nAnd we'll go into my\nrevocation configuration.\n\n1949\n01:35:16,930 --> 01:35:19,770\nAnd I don't have any yet, so\nwe're gonna right-click on this guy and\n\n1950\n01:35:19,770 --> 01:35:25,180\nchoose Add Revocation Configuration, and\nI'll click next on our intro screen.\n\n1951\n01:35:27,160 --> 01:35:31,090\nAnd for this one, I'm just gonna\ncall it the lab configuration or\n\n1952\n01:35:31,090 --> 01:35:32,340\nsomething like that.\n\n1953\n01:35:32,340 --> 01:35:35,750\nAgain, this could be an online\nresponder for more than one CA.\n\n1954\n01:35:35,750 --> 01:35:40,970\nSo, I'm gonna get a certificate\nfrom an existing Enterprise CA.\n\n1955\n01:35:43,276 --> 01:35:44,917\nAnd then I'll click Browse and\n\n1956\n01:35:44,917 --> 01:35:49,570\nmy Enterprise CA should show up because\nhe's published in an active directory.\n\n1957\n01:35:49,570 --> 01:35:50,980\nSo I can pick it.\n\n1958\n01:35:50,980 --> 01:35:51,755\nAnd I'll I click Next.\n\n1959\n01:35:52,775 --> 01:35:56,145\nAnd there, because I've already got\nthat template set up, it found my CA.\n\n1960\n01:35:56,145 --> 01:35:58,697\nIt knows what certificate it wants to get.\n\n1961\n01:35:58,697 --> 01:36:00,335\nSo, I can do it all automatically.\n\n1962\n01:36:00,335 --> 01:36:03,191\nWe could do it manually if we needed to.\n\n1963\n01:36:03,191 --> 01:36:07,779\nAnd then hopefully, if things go well\nWe'll give it a minute to whir and\n\n1964\n01:36:07,779 --> 01:36:09,773\ngrind here in the background.\n\n1965\n01:36:09,773 --> 01:36:12,890\nAnd there we go, I now have\nan online responder configuration.\n\n1966\n01:36:12,890 --> 01:36:14,180\nAnd what I'm really looking for\n\n1967\n01:36:14,180 --> 01:36:17,610\nin the end is just that it says,\nworking, down here, right.\n\n1968\n01:36:17,610 --> 01:36:20,807\nNow one more thing I need to do for\nthis all to work is,\n\n1969\n01:36:20,807 --> 01:36:25,610\nthe certificates that I issue from this\npoint on need to include the location of\n\n1970\n01:36:25,610 --> 01:36:28,553\nthat OCSP so\nthey know where to send that query.\n\n1971\n01:36:28,553 --> 01:36:34,510\nSo I'm gonna come in here and\npull up the properties of my CA again.\n\n1972\n01:36:36,040 --> 01:36:38,290\nAnd I'm gonna head over\nto the Extensions tab.\n\n1973\n01:36:38,290 --> 01:36:43,041\nAnd on this AIA, on this authority\ninformation access, I'm gonna click Add.\n\n1974\n01:36:44,340 --> 01:36:49,754\nAnd it's a pretty easy when it's just\n\n1975\n01:36:49,754 --> 01:36:57,204\nhttp://lun-dc1/ocsp, and I will click OK.\n\n1976\n01:36:58,310 --> 01:37:00,530\nAnd then I want to make sure,\ncuz adding the path,\n\n1977\n01:37:00,530 --> 01:37:02,050\nif I don't check these\nit won't include it.\n\n1978\n01:37:02,050 --> 01:37:05,920\nI want to include it in the extensions\nof the issued certificates and\n\n1979\n01:37:05,920 --> 01:37:08,330\nin the OCSP extensions.\n\n1980\n01:37:08,330 --> 01:37:13,330\nThe other thing to keep in mind, and\nI do have to restart services for\n\n1981\n01:37:13,330 --> 01:37:15,880\nthis to take effect,\nis from this point on,\n\n1982\n01:37:15,880 --> 01:37:18,750\ncertificates that are issued\nwill have that information.\n\n1983\n01:37:18,750 --> 01:37:22,700\nCertificates that I've already issued\nwould not have that information.\n\n1984\n01:37:22,700 --> 01:37:26,330\nSo you wanna do this as early as\nyou can in the lifetime of your CA.\n\n1985\n01:37:27,650 --> 01:37:29,970\n>> Otherwise it's one of\nthose where you deploy it and\n\n1986\n01:37:29,970 --> 01:37:31,480\nyou deploy it through attrition, right?\n\n1987\n01:37:31,480 --> 01:37:33,510\n>> Yeah.\n>> As your certificates expire,\n\n1988\n01:37:33,510 --> 01:37:34,410\nnew ones get issued,\n\n1989\n01:37:34,410 --> 01:37:38,110\nand they have the entry for the OCSP, and\nthat was part of the original deployment.\n\n1990\n01:37:38,110 --> 01:37:40,510\nI remember when this first came out,\nMicrosoft was saying,\n\n1991\n01:37:40,510 --> 01:37:45,235\nturn this on as soon as you can so\nthat over the next few years [LAUGH]\n\n1992\n01:37:45,235 --> 01:37:48,905\nas your certificates expire they'll\nstart to get populated with this data.\n\n1993\n01:37:48,905 --> 01:37:51,635\nSo that is one of\nthe things to keep in mind.\n\n1994\n01:37:51,635 --> 01:37:55,357\nIf you turn it on right away,\nyou're in business, you're in good shape,\n\n1995\n01:37:55,357 --> 01:37:57,970\nbut otherwise it could take years\nbefore all your certs check.\n\n1996\n01:37:57,970 --> 01:37:59,630\n>> Right?\nYeah cuz if they don't expire for\n\n1997\n01:37:59,630 --> 01:38:02,090\ntwo years, it could take a while.\n\n1998\n01:38:02,090 --> 01:38:03,820\nAll right, so that covers most of it.\n\n1999\n01:38:03,820 --> 01:38:04,840\nI think the last thing, or\n\n2000\n01:38:04,840 --> 01:38:08,890\none of the next things we wanna talk\nabout is key recovery or key archival.\n\n2001\n01:38:08,890 --> 01:38:11,830\nWe've talked in several episodes,\nand Don's mentioned in this one,\n\n2002\n01:38:11,830 --> 01:38:14,110\nhow important it is to keep that key safe.\n\n2003\n01:38:14,110 --> 01:38:15,800\nIf you lose that private key,\n\n2004\n01:38:15,800 --> 01:38:19,640\nyou lose access to everything you've\nencrypted using that public key.\n\n2005\n01:38:19,640 --> 01:38:22,430\nAnd if we don't,\nwe've got a couple of options.\n\n2006\n01:38:22,430 --> 01:38:25,520\nI think in other episodes we've\ntalked about a data recovery agent.\n\n2007\n01:38:25,520 --> 01:38:28,965\nWhere when you encrypt files files,\nit uses your key to encrypt them but\n\n2008\n01:38:28,965 --> 01:38:31,875\nit also uses the recovery agents key\nto encrypt them, so he could go and\n\n2009\n01:38:31,875 --> 01:38:34,695\ndecrypt them for you if you lost your key.\n\n2010\n01:38:34,695 --> 01:38:37,457\nBut that's kind of a pain, I mean you\nmight have encrypted files all over\n\n2011\n01:38:37,457 --> 01:38:39,715\nthe place,\nwhat if you forget about a couple?\n\n2012\n01:38:39,715 --> 01:38:42,105\nIt's not the most efficient method.\n\n2013\n01:38:42,105 --> 01:38:44,770\nI could rely on my end users\nbacking up their own keys.\n\n2014\n01:38:44,770 --> 01:38:45,417\n>> That works.\n\n2015\n01:38:45,417 --> 01:38:46,995\n>> [LAUGH] Yeah.\n\n2016\n01:38:46,995 --> 01:38:50,325\nExactly, so yeah,\nwe'll throw that option out the window.\n\n2017\n01:38:51,690 --> 01:38:54,000\nI can do a, what else could we do?\n\n2018\n01:38:54,000 --> 01:38:55,760\nI guess that's about it.\n\n2019\n01:38:55,760 --> 01:38:57,978\nSo this is the other option,\nis to set up key archival.\n\n2020\n01:38:57,978 --> 01:39:03,045\nInstead of relying on my end users to\nback up their keys, what we're gonna do\n\n2021\n01:39:03,045 --> 01:39:09,070\nis say hey, CA, when you issue a key to a\nuser, make a copy of it and set it aside.\n\n2022\n01:39:09,070 --> 01:39:14,070\nThat way if they ever lose their key, I\ndon't have to go decrypt all their files,\n\n2023\n01:39:14,070 --> 01:39:18,200\nissue them a new certificate,\nhave them encrypt all those files again.\n\n2024\n01:39:18,200 --> 01:39:21,500\nI can just replace their key and\nthey're right back in business.\n\n2025\n01:39:21,500 --> 01:39:22,795\nBut it does have to be set up.\n\n2026\n01:39:22,795 --> 01:39:25,630\nSo I'm gonna show you guys how to do that.\n\n2027\n01:39:25,630 --> 01:39:29,290\nThere's really three\nmain steps to doing this.\n\n2028\n01:39:29,290 --> 01:39:32,120\nYou've got to, well maybe four,\nif you wanna consider picking\n\n2029\n01:39:32,120 --> 01:39:36,400\nwho your CA is gonna be,\nyour key recovery agent, your KRA.\n\n2030\n01:39:36,400 --> 01:39:40,760\nOne, you wanna make sure you trust whoever\nit is that you assigned to this, right?\n\n2031\n01:39:40,760 --> 01:39:45,850\nBecause, if I'm the key recovery agent,\nI can go recover anybody's keys.\n\n2032\n01:39:45,850 --> 01:39:47,200\nEven if they haven't lost it yet, right?\n\n2033\n01:39:47,200 --> 01:39:48,890\nSo if I wanna get that\nthe domain admin key or\n\n2034\n01:39:48,890 --> 01:39:51,110\nthat enterprise admin\nkey I can go recover it.\n\n2035\n01:39:51,110 --> 01:39:57,030\nSo this is usually an account that\nvery few people know the password to.\n\n2036\n01:39:57,030 --> 01:39:59,230\nSo I gotta decide who's gonna\nbe the key recovery agent.\n\n2037\n01:39:59,230 --> 01:40:02,360\nAgain, best practice would be do a group,\nand then just add and\n\n2038\n01:40:02,360 --> 01:40:03,910\nremove people from that as you need.\n\n2039\n01:40:03,910 --> 01:40:08,260\nI've also got to issue a certificate to\nthat and I guess, I'm trying to think,\n\n2040\n01:40:08,260 --> 01:40:09,475\nyeah you can issue\na certificate to a group.\n\n2041\n01:40:09,475 --> 01:40:11,055\n>> Mm-hm.\n>> I think so.\n\n2042\n01:40:11,055 --> 01:40:14,980\nAnd I've gotta issue the key recovery\nagent certificate to whomever I've decided\n\n2043\n01:40:14,980 --> 01:40:16,520\nto make the recovery agent.\n\n2044\n01:40:16,520 --> 01:40:19,100\nThen I've gotta tell my\ncertificate authority, hey,\n\n2045\n01:40:19,100 --> 01:40:21,250\nwe're gonna start archiving keys.\n\n2046\n01:40:21,250 --> 01:40:22,960\nBecause right now he\ndoesn't archive any keys,\n\n2047\n01:40:22,960 --> 01:40:25,830\nhe just issues certificates\nas people request.\n\n2048\n01:40:25,830 --> 01:40:29,430\nBut he's not, once we tell him to start\narchiving keys, he's not gonna archive\n\n2049\n01:40:29,430 --> 01:40:34,950\nevery single key he issues, only if\nthe template says to archive the key.\n\n2050\n01:40:34,950 --> 01:40:37,935\nSo when he goes to issue a certificate,\nhe looks at that template and\n\n2051\n01:40:37,935 --> 01:40:41,795\nhe says oh, I'm supposed archive\na copy of this key, all right?\n\n2052\n01:40:41,795 --> 01:40:43,925\nSo let's take a peek\nat how we can do that.\n\n2053\n01:40:43,925 --> 01:40:46,905\nI'm gonna go here and,\nfirst let's turn on that template.\n\n2054\n01:40:48,005 --> 01:40:51,455\nSo I'm gonna go back into managing\nmy certificate templates, and\n\n2055\n01:40:51,455 --> 01:40:53,565\nI'm gonna find that KRA certificate.\n\n2056\n01:40:54,725 --> 01:40:56,605\nAnd I'm gonna do a couple of things here.\n\n2057\n01:40:56,605 --> 01:41:00,600\nFirst thing I'm gonna do\nis to decide who my KRA is.\n\n2058\n01:41:00,600 --> 01:41:03,511\nAnd I'm gonna make Don,\nI trust Don for the most part.\n\n2059\n01:41:03,511 --> 01:41:04,370\n>> Mistake number one.\n\n2060\n01:41:04,370 --> 01:41:05,544\n>> We'll let Don be my KRA, right.\n\n2061\n01:41:05,544 --> 01:41:06,170\nI know.\n\n2062\n01:41:06,170 --> 01:41:09,700\nAnd I wanna make sure I give\nDon enroll permissions.\n\n2063\n01:41:09,700 --> 01:41:12,542\nAlthough actually now that I think about\nit, Nate's already logged on once on that.\n\n2064\n01:41:12,542 --> 01:41:13,925\nWe don't wanna wait for\nthat darn profile to load up again.\n\n2065\n01:41:13,925 --> 01:41:15,190\n>> Yeah, let's do Nate.\n\n2066\n01:41:15,190 --> 01:41:17,650\nWe wouldn't normally trust Nate,\nbut in a lab environment it's okay.\n\n2067\n01:41:17,650 --> 01:41:20,052\n>> In a lab environment I\nsuppose we can trust him.\n\n2068\n01:41:20,052 --> 01:41:23,340\nAll right, so\nI'll give Nate the enroll permissions\n\n2069\n01:41:23,340 --> 01:41:25,410\non this key recovery agent certificate.\n\n2070\n01:41:25,410 --> 01:41:28,352\nThe next thing I'm gonna do is I'm\ngonna take a look at my subject name,\n\n2071\n01:41:28,352 --> 01:41:31,810\nand I wanna make sure it doesn't have\nany emails cuz we don't have any email\n\n2072\n01:41:31,810 --> 01:41:32,840\nset up in our environment here.\n\n2073\n01:41:33,880 --> 01:41:37,600\nThis next part is, where is it?\n\n2074\n01:41:37,600 --> 01:41:39,070\nIssuance requirements.\n\n2075\n01:41:39,070 --> 01:41:42,060\nAll right, now, as we just said this\nis a very important certificate.\n\n2076\n01:41:42,060 --> 01:41:43,910\nWith this certificate I can\nrecover anybody's keys.\n\n2077\n01:41:43,910 --> 01:41:47,380\nSo normally you cannot\njust issue one of these.\n\n2078\n01:41:47,380 --> 01:41:49,810\nThe CA certificate manager\napproval is checked.\n\n2079\n01:41:49,810 --> 01:41:53,200\nThat means it's gonna sit in that pending\nnode until somebody comes along and says,\n\n2080\n01:41:53,200 --> 01:41:55,740\nokay, I'm gonna go ahead and\nissue the certificate.\n\n2081\n01:41:55,740 --> 01:41:58,190\nFor the lab, I'm gonna uncheck that.\n\n2082\n01:41:58,190 --> 01:42:01,310\nNotice you've got this really cool option\nhere, number of authorized signatures.\n\n2083\n01:42:01,310 --> 01:42:02,560\nThis is how protected it is,\n\n2084\n01:42:02,560 --> 01:42:06,640\nyou might require more than one person\nto approve issuing this certificate.\n\n2085\n01:42:06,640 --> 01:42:09,820\nYou might have to have three people say\nall right, I agree Nate can be the KRA.\n\n2086\n01:42:11,170 --> 01:42:14,220\nSo just kind of a cool little factoid\nI'll point out for you there.\n\n2087\n01:42:14,220 --> 01:42:16,250\nBut I think I've got everything.\n\n2088\n01:42:16,250 --> 01:42:20,250\nWe set the permissions and\nwe turned off the approvals, so\n\n2089\n01:42:20,250 --> 01:42:21,432\nlet's go and click OK on that.\n\n2090\n01:42:23,040 --> 01:42:28,095\nThen, as always, its back out to my\nCertSrv console and new template issue.\n\n2091\n01:42:32,023 --> 01:42:35,425\nAnd we'll wait for\nit to populate that list.\n\n2092\n01:42:35,425 --> 01:42:39,627\nAnd then we will, Tell it to issue.\n\n2093\n01:42:39,627 --> 01:42:41,000\n[LAUGH]\n>> Eventually, yeah.\n\n2094\n01:42:41,000 --> 01:42:42,090\n>> Eventually.\n\n2095\n01:42:42,090 --> 01:42:46,530\nAll right, so there we go, KRA, he is now\nallowed to issue the KRA certificate.\n\n2096\n01:42:47,780 --> 01:42:49,950\nSo that's gonna show up there.\n\n2097\n01:42:49,950 --> 01:42:53,990\nThen I need to issue that to\nmy proposed recovery agent.\n\n2098\n01:42:53,990 --> 01:42:57,310\nSo I'm gonna come in here, and\nI'm still logged on as Nate.\n\n2099\n01:42:57,310 --> 01:42:58,387\nSo I'm gonna request a new certificate.\n\n2100\n01:43:05,375 --> 01:43:07,170\nAnd we will get a list.\n\n2101\n01:43:07,170 --> 01:43:09,590\nAnd hopefully, if I did my job correctly,\nNate'll show up in that list.\n\n2102\n01:43:09,590 --> 01:43:11,917\nHe has permissions to enroll.\n\n2103\n01:43:11,917 --> 01:43:15,461\n[COUGH]\n>> Yeah, so the two pieces there,\n\n2104\n01:43:15,461 --> 01:43:19,678\nhe's gotta have permissions to enroll, and\nwe have to have activated that template.\n\n2105\n01:43:19,678 --> 01:43:22,110\nSo if they're both in place\nwe should see it, and we do.\n\n2106\n01:43:22,110 --> 01:43:23,320\n>> And there we go, we're good to go.\n\n2107\n01:43:23,320 --> 01:43:23,820\nSo we'll click Enroll.\n\n2108\n01:43:26,809 --> 01:43:30,450\nAnd we wait just a second,\nand it should enroll him.\n\n2109\n01:43:30,450 --> 01:43:32,240\nAnd then we'll see that\nhe has a certificate.\n\n2110\n01:43:32,240 --> 01:43:35,422\nSo now Nate, now we've got who\nour recovery agent's going to be.\n\n2111\n01:43:35,422 --> 01:43:38,520\nWe've issued a certificate for\nthat purpose.\n\n2112\n01:43:38,520 --> 01:43:39,760\nNow we're gonna go back over and\n\n2113\n01:43:39,760 --> 01:43:42,900\nset up a certificate authority\nto support key archival.\n\n2114\n01:43:44,330 --> 01:43:46,719\nI think my CA is saying wait,\nreally, Nate?\n\n2115\n01:43:46,719 --> 01:43:48,460\n>> [LAUGH]\n>> Are you sure?\n\n2116\n01:43:48,460 --> 01:43:49,157\n>> Red flags went off.\n\n2117\n01:43:49,157 --> 01:43:50,225\n>> [LAUGH] Yeah.\n\n2118\n01:43:50,225 --> 01:43:52,973\nAll right, we'll go ahead and\nclick Finish on there.\n\n2119\n01:43:52,973 --> 01:43:56,313\nAnd now back over to CrtSrv, and\n\n2120\n01:43:56,313 --> 01:44:01,275\nwe're gonna pull up the properties for\nthe CA.\n\n2121\n01:44:01,275 --> 01:44:03,823\nAnd, we're gonna go over\nto recovery agents.\n\n2122\n01:44:03,823 --> 01:44:07,630\nAnd, you see by default do not\narchive the key, all right.\n\n2123\n01:44:07,630 --> 01:44:11,880\nBut notice what it says, do the following\nwhen a certificate request includes key\n\n2124\n01:44:11,880 --> 01:44:13,480\narchival, that's what\nI was saying earlier.\n\n2125\n01:44:13,480 --> 01:44:17,120\nJust because I turn this on, doesn't mean\nit's going to start archiving every key.\n\n2126\n01:44:17,120 --> 01:44:20,480\nOnly if the template\nrequests key archival.\n\n2127\n01:44:20,480 --> 01:44:22,220\nAnd then I could change this, too.\n\n2128\n01:44:22,220 --> 01:44:25,210\nWe could have could have,\nmay be it takes the old missile silos,\n\n2129\n01:44:25,210 --> 01:44:29,500\nyou have two keys really far apart, so two\npeople have to turn them at the same time.\n\n2130\n01:44:29,500 --> 01:44:32,759\nI could have more than one recovery\nagent required to recover a key.\n\n2131\n01:44:33,920 --> 01:44:34,760\nSo I'm going to leave it one.\n\n2132\n01:44:34,760 --> 01:44:37,010\nI'm going to click add.\n\n2133\n01:44:37,010 --> 01:44:40,780\nAnd then, I'm going to find Mr.\nNate Copeland, and I'll verify that that\n\n2134\n01:44:40,780 --> 01:44:44,340\ncertificate is for key archival or\nkey recovery agent, I should say.\n\n2135\n01:44:45,620 --> 01:44:46,820\nAnd I'll go ahead and click okay.\n\n2136\n01:44:46,820 --> 01:44:50,740\nNow you'll see right now,\nit says not loaded, and I've got a red X,\n\n2137\n01:44:50,740 --> 01:44:53,010\nif you can tell over there,\na little red X on there.\n\n2138\n01:44:53,010 --> 01:44:55,710\nBecause I need to restart the certificate\nserver before this change will\n\n2139\n01:44:55,710 --> 01:44:56,210\ntake effect.\n\n2140\n01:44:56,210 --> 01:44:59,350\nSo I'll click okay, and\nit'll say do you want to restart.\n\n2141\n01:44:59,350 --> 01:44:59,850\nWe'll say yes.\n\n2142\n01:45:05,657 --> 01:45:08,773\nAnd eventually the properties\nwill disappear, and\n\n2143\n01:45:08,773 --> 01:45:10,550\nwe'll pull em right back up.\n\n2144\n01:45:13,620 --> 01:45:14,300\nAll right.\nVery good.\n\n2145\n01:45:14,300 --> 01:45:17,680\nIts restarted and we're going to\nright click on that properties, and\n\n2146\n01:45:17,680 --> 01:45:19,830\nwe'll go back over to\nthat recovery agents tab.\n\n2147\n01:45:19,830 --> 01:45:22,540\nAnd now I can see Nate is listed\nas my recovery agent, and\n\n2148\n01:45:22,540 --> 01:45:24,620\neverything is good and valid.\n\n2149\n01:45:24,620 --> 01:45:27,390\nAt this point,\nI've got my recovery agent picked.\n\n2150\n01:45:27,390 --> 01:45:29,780\nAnd I've told my CA that\nit's allowed to archive,\n\n2151\n01:45:29,780 --> 01:45:32,590\nor archive a key,\nonly if the template requests.\n\n2152\n01:45:32,590 --> 01:45:36,170\nSo the next thing I would do,\nis come in here to my templates.\n\n2153\n01:45:39,060 --> 01:45:43,370\nMan is was cruising the in there for\na second, and now its locking up again.\n\n2154\n01:45:43,370 --> 01:45:45,350\nI might not have closed\nmy certificate manager.\n\n2155\n01:45:45,350 --> 01:45:46,570\n>> It gave you false hope.\n\n2156\n01:45:46,570 --> 01:45:47,490\nWell, there it is.\n\n2157\n01:45:47,490 --> 01:45:49,420\n>> I still had it open, good deal.\n\n2158\n01:45:49,420 --> 01:45:52,120\nLet's say we want to start\narchiving a key for our lab user,\n\n2159\n01:45:52,120 --> 01:45:53,607\nour smart card certificate\nthat we've been using.\n\n2160\n01:45:53,607 --> 01:45:54,184\nI'm going to pull up the properties.\n\n2161\n01:45:54,184 --> 01:46:02,100\nAnd I'm going to go to\nthat request handling tab.\n\n2162\n01:46:02,100 --> 01:46:06,970\nAnd use archive subject\nencryption private key, so\n\n2163\n01:46:06,970 --> 01:46:12,660\nnow anytime once it will\nlet me check that there.\n\n2164\n01:46:12,660 --> 01:46:14,360\n[LAUGH] It's thinking about it.\n\n2165\n01:46:14,360 --> 01:46:18,555\n>> It's such a powerful console, it's\ngot to take time to load and to handle.\n\n2166\n01:46:18,555 --> 01:46:20,433\n[CROSSTALK] There we go.\n\n2167\n01:46:20,433 --> 01:46:22,930\nAnd it's only enabled for\nfuture certificates right?\n\n2168\n01:46:22,930 --> 01:46:25,460\nIt's telling me that hey I can't\ngo back and archive the key for\n\n2169\n01:46:25,460 --> 01:46:27,585\ncertificates I've already issued.\n\n2170\n01:46:27,585 --> 01:46:28,085\n>> Mm-hm.\n>> Right?\n\n2171\n01:46:29,670 --> 01:46:31,848\nMake sure I didn't check it too\nmany times, and uncheck it.\n\n2172\n01:46:31,848 --> 01:46:33,775\nAnd now we're We're good to go.\n\n2173\n01:46:33,775 --> 01:46:34,865\n>> We have set that up.\n\n2174\n01:46:34,865 --> 01:46:37,825\nAnd I would have to do that to\neach template that I wanted\n\n2175\n01:46:37,825 --> 01:46:38,695\nto archive a key for.\n\n2176\n01:46:38,695 --> 01:46:41,805\nIf somebody requests\na exchange of certificate,\n\n2177\n01:46:41,805 --> 01:46:43,365\nlet's not gonna archive the key for\nthat one.\n\n2178\n01:46:43,365 --> 01:46:46,225\nBecause a template is not requesting it.\n\n2179\n01:46:46,225 --> 01:46:47,705\nAnd that is how we set it up.\n\n2180\n01:46:49,575 --> 01:46:51,445\nSo at that point, we now have a recovery.\n\n2181\n01:46:51,445 --> 01:46:52,665\nIf anybody, somebody,\n\n2182\n01:46:52,665 --> 01:46:56,485\nrequests that lab user certificate,\nit will archive a copy of their key.\n\n2183\n01:46:58,300 --> 01:47:00,910\nWhen it comes time to do the recovery,\nwe're gonna use certutil.\n\n2184\n01:47:00,910 --> 01:47:03,260\nI don't think we're gonna\ngo into that today, but.\n\n2185\n01:47:03,260 --> 01:47:05,710\n>> Yeah, I don't think we're\ngonna dive into that too much.\n\n2186\n01:47:05,710 --> 01:47:08,610\nCertutil is the command line interface\nto be able interact with this we\n\n2187\n01:47:08,610 --> 01:47:11,180\ndon't really have a good way to handle it.\n\n2188\n01:47:11,180 --> 01:47:15,155\nThe important thing to remember,\nis that we do have a key archive now.\n\n2189\n01:47:15,155 --> 01:47:15,720\nMm-hm.\n\n2190\n01:47:15,720 --> 01:47:17,910\n>> Nobody can access it except for Nate.\n\n2191\n01:47:17,910 --> 01:47:21,020\nNate is the person who we created\nas our key recovery agent,\n\n2192\n01:47:21,020 --> 01:47:22,770\nas our authorized person.\n\n2193\n01:47:22,770 --> 01:47:25,740\nSo he'll be able to use\nthat certutil command line,\n\n2194\n01:47:25,740 --> 01:47:27,140\nto be able to pull that key out.\n\n2195\n01:47:27,140 --> 01:47:28,430\n>> Exactly.\nAnd he would need to know,\n\n2196\n01:47:28,430 --> 01:47:31,820\nlike let's say, I don't know, he needed\nto recover this certificate here.\n\n2197\n01:47:31,820 --> 01:47:35,430\nWhat Nate would need Is the serial number.\n\n2198\n01:47:35,430 --> 01:47:36,260\nI've got to identify it, right.\n\n2199\n01:47:36,260 --> 01:47:38,260\nWhen it stores it in that database,\n\n2200\n01:47:38,260 --> 01:47:41,830\nwe need to tell it what certificate\nthat I'm trying to recover the key for.\n\n2201\n01:47:41,830 --> 01:47:47,010\nAnd that the command is going to be\ncert util space dash recover key.\n\n2202\n01:47:47,010 --> 01:47:49,870\nAnd then, the thumbprint of\nthe certificate you're trying to recover.\n\n2203\n01:47:49,870 --> 01:47:52,150\nAnd then, the word output blob.\n\n2204\n01:47:52,150 --> 01:47:55,910\nAnd what it does is it creates this\nblob being binary large object.\n\n2205\n01:47:55,910 --> 01:47:58,940\nSo I need to come in here and\nget this number right here,\n\n2206\n01:47:58,940 --> 01:48:02,292\nthat's the one I need to type\ninto that cert util command.\n\n2207\n01:48:02,292 --> 01:48:04,035\nthat And it's actually a pain in the butt.\n\n2208\n01:48:04,035 --> 01:48:05,510\n>> [LAUGH]\n>> Because when you copy it,\n\n2209\n01:48:05,510 --> 01:48:06,760\nit includes all those spaces.\n\n2210\n01:48:06,760 --> 01:48:07,650\n>> And you gotta take the spaces out.\n\n2211\n01:48:07,650 --> 01:48:09,830\n>> And in command,\nyou gotta take the spaces out.\n\n2212\n01:48:09,830 --> 01:48:13,490\nSo not the most user-friendly\nway of doing it.\n\n2213\n01:48:13,490 --> 01:48:17,760\nOnce it's generated that output blob,\nbinary large object, then he's gonna run\n\n2214\n01:48:17,760 --> 01:48:24,480\nanother command, certutil dash recover\nkey, and then the path to the output blob.\n\n2215\n01:48:24,480 --> 01:48:26,680\nAnd then path to where\nhe wants to recover it.\n\n2216\n01:48:26,680 --> 01:48:29,120\nAnd it'll be one of those\nPKCS number sevens, or\n\n2217\n01:48:29,120 --> 01:48:32,060\nthe PFX file because that\nincludes the private key.\n\n2218\n01:48:32,060 --> 01:48:34,180\nIt'll be also be password protected.\n\n2219\n01:48:34,180 --> 01:48:38,130\nAnytime you include, when you do those\nPKCS number sevens they're gonna be\n\n2220\n01:48:38,130 --> 01:48:40,830\npassword protected,\nbecause they do include that private key.\n\n2221\n01:48:40,830 --> 01:48:41,490\nYeah.\n\n2222\n01:48:41,490 --> 01:48:43,080\n>> Yeah, and hopefully you never need it.\n\n2223\n01:48:43,080 --> 01:48:43,600\n>> Right.\n>> But\n\n2224\n01:48:43,600 --> 01:48:46,550\nthis would be one of those scenarios\nwhere maybe you terminated\n\n2225\n01:48:46,550 --> 01:48:49,280\nan employee and\ndeleted their Active Directory user\n\n2226\n01:48:49,280 --> 01:48:50,170\naccount.,\n>> Mm-hm.\n\n2227\n01:48:50,170 --> 01:48:53,020\n>> And\nthey left some EFS files encrypted, and\n\n2228\n01:48:53,020 --> 01:48:55,415\nyou need to be able to get at them, right?\n\n2229\n01:48:55,415 --> 01:48:56,960\n>> Mm-hm.\n>> And maybe you hadn't set up a.\n\n2230\n01:48:56,960 --> 01:48:58,450\n>> Recovery agent.\n\n2231\n01:48:58,450 --> 01:49:02,830\n>> Yeah, or\nmaybe it's a scenario where somebody had.\n\n2232\n01:49:02,830 --> 01:49:04,820\n>> I'm trying to think of other\nscenarios where you'd need to go-\n\n2233\n01:49:04,820 --> 01:49:07,310\n>> If their hard drive fails,\n\n2234\n01:49:07,310 --> 01:49:09,160\nthey lose their private key that way.\n\n2235\n01:49:09,160 --> 01:49:11,490\n>> Yeah.\n>> Their profile gets corrupted,\n\n2236\n01:49:11,490 --> 01:49:15,150\nthey delete the user account.\n\n2237\n01:49:15,150 --> 01:49:18,750\n>> Yeah, with the user accounts, when it's\na user certificate that's being generated,\n\n2238\n01:49:18,750 --> 01:49:20,540\nif you have a enterprise CA and\n\n2239\n01:49:20,540 --> 01:49:23,120\nthe active directory,\n>> The private keys actually attach to\n\n2240\n01:49:23,120 --> 01:49:24,290\nthe user account in the AD.\n\n2241\n01:49:24,290 --> 01:49:26,250\nSo you're kind of protected there.\n\n2242\n01:49:26,250 --> 01:49:29,700\nBut if you're not doing an enterprise CA,\nif you're doing a stand alone,\n\n2243\n01:49:29,700 --> 01:49:33,520\nlike our root is, then those private keys\naren't stored in the active directory.\n\n2244\n01:49:33,520 --> 01:49:34,710\nSo you don't get that resiliency,\n\n2245\n01:49:34,710 --> 01:49:37,210\nand that's where you really need\nthis key archive there too.\n\n2246\n01:49:37,210 --> 01:49:40,530\nSo a few scenarios are there,\nhopefully you never need it,\n\n2247\n01:49:40,530 --> 01:49:43,480\nideally, but the time does arise.\n\n2248\n01:49:43,480 --> 01:49:47,160\n>> Just set it up early just in case,\nthat way you're covered.\n\n2249\n01:49:47,160 --> 01:49:51,180\nBecause, like he said, from now on,\nCertificate Editor should be archived.\n\n2250\n01:49:51,180 --> 01:49:53,400\nI couldn't go back and get a key for\n\n2251\n01:49:53,400 --> 01:49:55,550\nany of those certificates\nthat I'd already issued.\n\n2252\n01:49:55,550 --> 01:50:00,450\nAll right, well Mike, I think that\nis a pretty exhaustive coverage of\n\n2253\n01:50:00,450 --> 01:50:03,570\ncertificate services,\ncan you have anything else to throw in?\n\n2254\n01:50:03,570 --> 01:50:05,720\n>> I honestly can't, if we want to\ntake a look at these objectives.\n\n2255\n01:50:05,720 --> 01:50:09,910\nBut I think we hit just about everything\nyou can do with certificate authority,\n\n2256\n01:50:09,910 --> 01:50:11,045\nother than tear one up.\n\n2257\n01:50:11,045 --> 01:50:15,190\n[LAUGH] Alright, well, this is a pretty\ngood spot for us to wrap up then.\n\n2258\n01:50:15,190 --> 01:50:19,520\nSo, let me just remind everybody, if you\nhave any questions on this live during\n\n2259\n01:50:19,520 --> 01:50:24,990\nthe show, you can go to itpro.tv/live and\nyou'll see us, you know, doing our thing.\n\n2260\n01:50:24,990 --> 01:50:27,180\nAnd you'll see the chat box\nright beneath our video.\n\n2261\n01:50:27,180 --> 01:50:28,470\nyou can post your questions there.\n\n2262\n01:50:28,470 --> 01:50:30,820\n>> Uh-hm.\n>> We monitor and answer during the show.\n\n2263\n01:50:30,820 --> 01:50:35,270\nIf you have questions after the show,\nIF we're not live, use the Q&A forums.\n\n2264\n01:50:35,270 --> 01:50:38,990\nAt the top of every page, on ITpro.tv,\nyou'll see a link that says Q&A.\n\n2265\n01:50:38,990 --> 01:50:40,160\nClick on it.\n\n2266\n01:50:40,160 --> 01:50:42,200\n>> Hm.\n>> It'll take you to the Q&A forums.\n\n2267\n01:50:42,200 --> 01:50:44,090\nYou can post there.\nAnd, again, we monitor and answer.\n\n2268\n01:50:44,090 --> 01:50:45,080\n>> Absolutely.\n\n2269\n01:50:45,080 --> 01:50:47,190\n>> All right.\nWell I hope you guys enjoyed the show.\n\n2270\n01:50:47,190 --> 01:50:49,210\nSigning off for ITProTV, I'm Don Pezet.\n\n2271\n01:50:49,210 --> 01:50:50,380\n>> And I'm Mike Rodrick.\n\n2272\n01:50:50,380 --> 01:50:52,000\n>> And we will see you next time.\n\n2273\n01:50:52,000 --> 01:51:02,000\n[MUSIC]\n\n",
          "vimeoId": "100718642"
        },
        {
          "description": "In this episode Mike and Don discuss Active Directory Rights Management Services (AD RMS) and scenarios in which its use can be leveraged. They demonstrate managing AD RMS Service Connection Points (SCP) as well as configuring Exclusion Policies. They conclude with discussing Active Directory Federation Services (AD FS) scenarios in which it can be leveraged inside an enterprise environment.",
          "length": "4877",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/013-RMS-and-AD-FS.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/013-RMS-and-AD-FS-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcsa70412/013-RMS-and-AD-FS-sm.jpg",
          "title": "RMS and Federations",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,712 --> 00:00:35,473\nAll right.\nGood morning, good afternoon, and\n\n3\n00:00:35,473 --> 00:00:36,012\ngood evening.\n\n4\n00:00:36,012 --> 00:00:38,539\nAnd welcome back to another\nepisode of IT Pro TV.\n\n5\n00:00:38,539 --> 00:00:40,230\nI'm your host Don Pezet.\n\n6\n00:00:40,230 --> 00:00:41,560\nBack again with Mr. Mike Rodrick.\n\n7\n00:00:41,560 --> 00:00:42,150\nHow's it going Mike?\n\n8\n00:00:42,150 --> 00:00:42,710\n>> Fantastic.\n\n9\n00:00:42,710 --> 00:00:43,520\nHow're you doing, Don?\n\n10\n00:00:43,520 --> 00:00:45,220\n>> I'm doing just swell.\n\n11\n00:00:45,220 --> 00:00:48,455\nIt's another great,\nfantastic Hawaiian shirt Friday and\n\n12\n00:00:48,455 --> 00:00:49,618\n[LAUGH]\n>> I know.\n\n13\n00:00:49,618 --> 00:00:50,442\nI'm liking it, I'm liking it.\n\n14\n00:00:50,442 --> 00:00:52,325\n>> [LAUGH]\n>> That's very loud.\n\n15\n00:00:52,325 --> 00:00:53,330\n[LAUGH]\n>> That's right.\n\n16\n00:00:53,330 --> 00:00:53,830\nThat's right.\n\n17\n00:00:54,880 --> 00:00:59,440\nToday we are gonna be jumping back into\nthe wonderful world of Windows Server\n\n18\n00:00:59,440 --> 00:01:03,230\n2012 R2, specifically the 70-412 exam.\n\n19\n00:01:03,230 --> 00:01:04,810\nAnd I think where we left off,\n\n20\n00:01:04,810 --> 00:01:08,560\nwe were getting into some of active\ndirectory, really advanced stuff.\n\n21\n00:01:08,560 --> 00:01:11,380\nAnd so we took a look at certificate\n>> Right.\n\n22\n00:01:11,380 --> 00:01:12,190\n>> Services, right?\n\n23\n00:01:12,190 --> 00:01:14,150\n>> Yep.\n>> Now we;re gonna take a look at Rights\n\n24\n00:01:14,150 --> 00:01:18,460\nManagement Services or RMS, which is\nanother extension to the active directory.\n\n25\n00:01:19,650 --> 00:01:23,994\nWith the RMS,\nwe can do really cool stuff, right?\n\n26\n00:01:23,994 --> 00:01:24,652\n>> Yeah.\n\n27\n00:01:24,652 --> 00:01:27,300\n>> If you think about some\nof the things that we use in\n\n28\n00:01:27,300 --> 00:01:29,880\noffices just on a regular basis, right?\n\n29\n00:01:29,880 --> 00:01:33,880\nYou write up a document in Microsoft Word,\nand you email it to somebody.\n\n30\n00:01:33,880 --> 00:01:35,729\nSo I email it to you, right?\n\n31\n00:01:35,729 --> 00:01:36,270\n>> Right.\n>> And,\n\n32\n00:01:36,270 --> 00:01:40,400\nthen you take that document and you can\nforward it to whoever you want, right?\n\n33\n00:01:40,400 --> 00:01:42,980\n>> Competition,\nsomebody outside the organization.\n\n34\n00:01:42,980 --> 00:01:45,780\nExactly.You got no control\nover it once I've got it.\n\n35\n00:01:45,780 --> 00:01:47,930\n>> And, you could save that attachment.\n\n36\n00:01:47,930 --> 00:01:48,610\nAnd, edit it.\n\n37\n00:01:48,610 --> 00:01:49,680\n>> Right.\n>> And send it along.\n\n38\n00:01:49,680 --> 00:01:50,870\nAnd, say, look what Don wrote.\n\n39\n00:01:50,870 --> 00:01:52,028\nCan you believe this guy?\n\n40\n00:01:52,028 --> 00:01:53,350\n>> [LAUGH]\n>> Or, whatever.\n\n41\n00:01:53,350 --> 00:01:56,970\nOr you could take it and print it out and\nthen take the paper copies and\n\n42\n00:01:56,970 --> 00:01:58,900\nwalk right out of the building with them.\n\n43\n00:01:58,900 --> 00:02:02,840\nSo our normal office products,\nthings like email and\n\n44\n00:02:02,840 --> 00:02:06,620\nMicrosoft Office,they were great,\nthey have a lot of features but\n\n45\n00:02:06,620 --> 00:02:10,070\nthey're terrible at protecting\nour intellectual property.\n\n46\n00:02:10,070 --> 00:02:11,110\n>> They really are.\n\n47\n00:02:11,110 --> 00:02:14,360\nI mean, we've got NTFS permissions where\nwe can control that stuff there but\n\n48\n00:02:14,360 --> 00:02:17,440\nonce it leaves NTFS,\nthat doesn't stay with them.\n\n49\n00:02:17,440 --> 00:02:19,348\n>> Yeah, and\nemails are the biggest culprits.\n\n50\n00:02:19,348 --> 00:02:20,010\nRight?\n\n51\n00:02:20,010 --> 00:02:22,045\nBecause people treat\nemail like a file server.\n\n52\n00:02:22,045 --> 00:02:23,155\n>> Right.\nSo, hey Mike,\n\n53\n00:02:23,155 --> 00:02:24,716\nI want you to read this file.\n\n54\n00:02:24,716 --> 00:02:28,410\nI could copy it to a network share and\nsay go there and get to it.\n\n55\n00:02:28,410 --> 00:02:29,500\n>> No, no, just email's it to me.\n\n56\n00:02:29,500 --> 00:02:30,849\n>> I'll just email it to you.\n\n57\n00:02:30,849 --> 00:02:32,960\nRight?\nAnd you see so many people do that and\n\n58\n00:02:32,960 --> 00:02:36,190\nit kills me because email servers\nare terrible file servers.\n\n59\n00:02:36,190 --> 00:02:36,850\n>> Right.\n\n60\n00:02:36,850 --> 00:02:38,288\n>> Mainly for this reason, right?\n\n61\n00:02:38,288 --> 00:02:41,730\nIf I email him a file and\nthen I modify the original,\n\n62\n00:02:41,730 --> 00:02:44,350\nhe has this emailed copy that\nhasn't been modified, right?\n\n63\n00:02:44,350 --> 00:02:44,870\n>> Right.\n\n64\n00:02:44,870 --> 00:02:46,940\n>> So, now it's not just\nthe risk of data getting out.\n\n65\n00:02:46,940 --> 00:02:49,830\nIt's a risk of obsolete data being used,\nand\n\n66\n00:02:49,830 --> 00:02:52,600\nthat's a big challenge\na lot of companies face.\n\n67\n00:02:52,600 --> 00:02:55,550\nSo these are real problems that\ncompanies have to deal with.\n\n68\n00:02:55,550 --> 00:02:58,440\nAnd there's not much we can do about it,\nright?\n\n69\n00:02:58,440 --> 00:03:01,770\nWell, we do actually have one\nthing now that we can use.\n\n70\n00:03:01,770 --> 00:03:03,020\nAnd that's RMS.\n\n71\n00:03:03,020 --> 00:03:08,810\nNow, I do want to preface this\nwhole section with a grain of salt.\n\n72\n00:03:08,810 --> 00:03:09,760\n>> Right.\n>> Which is,\n\n73\n00:03:09,760 --> 00:03:13,380\nwe're about to learn about active\ndirectory RMS, and it's really cool.\n\n74\n00:03:13,380 --> 00:03:17,750\nAnd it works really well, and\nit does exactly what it promises to do.\n\n75\n00:03:17,750 --> 00:03:21,865\nBut it hasn't made a lot of traction\nout there in the real world.\n\n76\n00:03:21,865 --> 00:03:23,610\n>> Right.\n>> It was introduced in\n\n77\n00:03:23,610 --> 00:03:24,730\nWindows Server 2003?\n\n78\n00:03:24,730 --> 00:03:27,560\n>> I believe 2003,\nat the end of 2003 R2 maybe?\n\n79\n00:03:27,560 --> 00:03:31,000\n>> And then it got general\nacceptance in 2008 and now in 2012.\n\n80\n00:03:31,000 --> 00:03:32,710\nSo it's been updated a few times,\n\n81\n00:03:32,710 --> 00:03:37,470\nit's pretty mature but\nwe're gonna to see some limitations to it.\n\n82\n00:03:37,470 --> 00:03:41,630\nWhat active directory RMS, or\nRights Management Services,\n\n83\n00:03:41,630 --> 00:03:45,960\nallows us to do is to basically put DRM,\nor Digital Rights Management.\n\n84\n00:03:45,960 --> 00:03:47,940\nIt allows us to put security and\n\n85\n00:03:47,940 --> 00:03:51,345\nprotection on our files that\ndoesn't leave the file.\n\n86\n00:03:51,345 --> 00:03:51,850\n>> Right.\n\n87\n00:03:51,850 --> 00:03:55,720\n>> Whatever you do to it, you email it,\nFTP it, copy it to a thumb drive,\n\n88\n00:03:55,720 --> 00:03:56,770\nwhatever.\n\n89\n00:03:56,770 --> 00:03:59,050\nThe rights management stays in that file,\nand\n\n90\n00:03:59,050 --> 00:04:01,830\nwe're able to control\naccess to that content.\n\n91\n00:04:01,830 --> 00:04:02,800\n>> Right, yep.\n\n92\n00:04:02,800 --> 00:04:06,630\nAnd I like to think of it like persistent\nusage policies that stay with that.\n\n93\n00:04:06,630 --> 00:04:09,130\nWhereas NTFS it's only\non that file system.\n\n94\n00:04:09,130 --> 00:04:11,830\nAnd some of the things we can\ndo to protect the content,\n\n95\n00:04:11,830 --> 00:04:14,060\nwe can stop it from being printed.\n\n96\n00:04:14,060 --> 00:04:16,240\nSo you can say yeah you can open\nthis document all you want, but\n\n97\n00:04:16,240 --> 00:04:17,510\nyou can't print it.\n\n98\n00:04:17,510 --> 00:04:19,360\nWe can stop it from being modified.\n\n99\n00:04:19,360 --> 00:04:22,100\nSo you can look at it,\nbut you can't change it.\n\n100\n00:04:22,100 --> 00:04:24,380\nWe can stop it from being forwarded.\n\n101\n00:04:24,380 --> 00:04:26,200\n>> Yeah, emailed outside of our domain.\n\n102\n00:04:26,200 --> 00:04:29,740\n>> Yeah, I can email you something Mike\nand I could flag it to prevent forwarding.\n\n103\n00:04:29,740 --> 00:04:30,910\nAnd then Mike can read it and\n\n104\n00:04:30,910 --> 00:04:33,250\nsee it but he wouldn't be able\nto forward it to anybody else.\n\n105\n00:04:33,250 --> 00:04:34,956\n>> And I've tried.\nI mean I've tried to figure out,\n\n106\n00:04:34,956 --> 00:04:37,400\nI was like oh, they can't stop,\n[INAUDIBLE] stop snip it, right?\n\n107\n00:04:37,400 --> 00:04:39,640\nWish I could do a print screen or\nsomething like that.\n\n108\n00:04:39,640 --> 00:04:42,360\nAnd sure enough,\nI mean they locked it down pretty good.\n\n109\n00:04:42,360 --> 00:04:45,300\n>> And we can even set stuff to expire.\n\n110\n00:04:45,300 --> 00:04:49,600\nSo I might send him a document and\nput a 30 day timer on it and\n\n111\n00:04:49,600 --> 00:04:52,275\nsay he can open it all he wants for\n30 days.\n\n112\n00:04:52,275 --> 00:04:54,780\nBut after 30 days, it's expired,\nhe's gonna have to get a new copy.\n\n113\n00:04:54,780 --> 00:04:58,490\nIt's a great way to ensure that old\nversions of your documents aren't left\n\n114\n00:04:58,490 --> 00:04:59,090\nlying around.\n\n115\n00:04:59,090 --> 00:05:00,815\nThey get rendered inert,\n\n116\n00:05:00,815 --> 00:05:03,430\nobsolete, whatever's the word there and\nI don't know.\n\n117\n00:05:03,430 --> 00:05:05,685\n>> Yeah like sales quotes,\nhey I'll give you this price, but hey,\n\n118\n00:05:05,685 --> 00:05:07,400\nit's only gonna be good for seven days.\n\n119\n00:05:07,400 --> 00:05:08,630\nSomething like that, so.\n\n120\n00:05:08,630 --> 00:05:09,560\nVery cool stuff.\n\n121\n00:05:09,560 --> 00:05:11,670\n>> So, does that sound cool?\n\n122\n00:05:11,670 --> 00:05:14,450\nSure does, I remember the first time\nI saw this stuff I was like that's\n\n123\n00:05:14,450 --> 00:05:15,155\nawesome that's great.\n\n124\n00:05:15,155 --> 00:05:18,740\nBut it's one of those things,\n\n125\n00:05:18,740 --> 00:05:23,060\ndo you remember a time when you\nwould buy music on the internet?\n\n126\n00:05:23,060 --> 00:05:25,745\nYou'd buy MP3s and\nit would have DRM on it.\n\n127\n00:05:25,745 --> 00:05:26,245\n>> Yes.\n>> Right?\n\n128\n00:05:26,245 --> 00:05:27,710\nApple was really bad about this.\n\n129\n00:05:27,710 --> 00:05:32,420\nAnd people got so frustrated with not\nbeing able to play their music or\n\n130\n00:05:32,420 --> 00:05:34,165\nbeing locked into Apple or whatever.\n\n131\n00:05:34,165 --> 00:05:35,400\n>> Right.\n>> That\n\n132\n00:05:35,400 --> 00:05:36,960\nfinally Apple had to back down on it.\n\n133\n00:05:36,960 --> 00:05:39,144\nAnd now the music doesn't\nhave DRM on it anymore.\n\n134\n00:05:39,144 --> 00:05:42,100\nAnd in fact if you go on the Internet and\nyou buy music these days,\n\n135\n00:05:42,100 --> 00:05:43,835\nyou pretty much expect\nit not to have DRAM.\n\n136\n00:05:43,835 --> 00:05:44,420\n>> Right.\n\n137\n00:05:44,420 --> 00:05:46,780\n>> Well,\nthat's kind of how your documents become.\n\n138\n00:05:46,780 --> 00:05:51,974\nYour documents become a little bit\nmore difficult to handle, because one,\n\n139\n00:05:51,974 --> 00:05:56,859\nyou have to have an RMS compatible\nclient to be able to protect the data.\n\n140\n00:05:56,859 --> 00:05:57,630\n>> Right.\n\n141\n00:05:57,630 --> 00:06:01,120\n>> And then whoever is receiving it\nhas to have an RMS capable client\n\n142\n00:06:01,120 --> 00:06:03,350\nto be able to open and handle your data.\n\n143\n00:06:03,350 --> 00:06:06,870\nAnd because RMS is a Microsoft product,\n\n144\n00:06:06,870 --> 00:06:09,655\nit kind of limits you to this\nMicrosoft centric world.\n\n145\n00:06:09,655 --> 00:06:11,380\n>> Yeah.\n>> And that's where our general acceptance\n\n146\n00:06:11,380 --> 00:06:13,300\nstarts to break down.\n\n147\n00:06:13,300 --> 00:06:17,353\n>> Yeah I really think that the idea was\nthat eventually other vendors might add\n\n148\n00:06:17,353 --> 00:06:18,322\nsupport for RMS.\n\n149\n00:06:18,322 --> 00:06:21,300\nAnd we would get to see this\nacross a wider range of products,\n\n150\n00:06:21,300 --> 00:06:22,635\nbut so far it hasn't panned out.\n\n151\n00:06:22,635 --> 00:06:26,097\n[CROSSTALK] Except for\noffice and, you know.\n\n152\n00:06:26,097 --> 00:06:29,050\n>> There were some third parties that\ncreated some kind of cool stuff.\n\n153\n00:06:29,050 --> 00:06:31,090\nAnd like, what was it?\n\n154\n00:06:31,090 --> 00:06:34,473\nLiquid machines, liquid metal,\nsomething like that,\n\n155\n00:06:34,473 --> 00:06:38,780\na company that made a whole bunch of\nextensions for it to other files.\n\n156\n00:06:38,780 --> 00:06:41,954\nAnd then the get bought by Checkpoint\nSoftware and they kinda disappeared.\n\n157\n00:06:41,954 --> 00:06:42,770\n>> [LAUGH]\n>> And so\n\n158\n00:06:42,770 --> 00:06:46,010\nyou see that in IT, that people\ncome up with something really cool.\n\n159\n00:06:46,010 --> 00:06:48,970\nThey'll get acquired by a bigger\ncompany and the product disappears.\n\n160\n00:06:48,970 --> 00:06:51,960\nSo that was kinda what\nhappened with some of them.\n\n161\n00:06:51,960 --> 00:06:54,370\nAnd so what we're really left\nwith is the core services.\n\n162\n00:06:54,370 --> 00:06:56,820\nWhat we're gonna see in this episode.\n\n163\n00:06:56,820 --> 00:06:59,830\nSo we're gonna see how we can\nprotect Microsoft Office documents.\n\n164\n00:06:59,830 --> 00:07:00,338\nRight?\n>> Yeah.\n\n165\n00:07:00,338 --> 00:07:02,673\n>> So we're talking about Word, Excel,\n\n166\n00:07:02,673 --> 00:07:04,238\nPowerPoint, InfoPath.\n\n167\n00:07:05,500 --> 00:07:06,150\nAccess?\n\n168\n00:07:06,150 --> 00:07:07,220\nActually no not Access, yeah.\n\n169\n00:07:07,220 --> 00:07:08,590\n>> I don't think that you can do Access.\n\n170\n00:07:08,590 --> 00:07:09,920\n>> Yeah.\n>> It'll tie into SharePoint so\n\n171\n00:07:09,920 --> 00:07:11,620\nif you use SharePoint libraries,\nbut then again,\n\n172\n00:07:11,620 --> 00:07:15,120\nthey need to be Office documents stored\nin the SharePoint library as well.\n\n173\n00:07:15,120 --> 00:07:16,590\n>> And then there's emails.\n\n174\n00:07:16,590 --> 00:07:19,740\nSpecifically for\nusing the Microsoft Outlook client.\n\n175\n00:07:19,740 --> 00:07:20,476\n>> Right.\n>> Right?\n\n176\n00:07:20,476 --> 00:07:23,733\nBecause it's actually the office\nproduct that's handling,\n\n177\n00:07:23,733 --> 00:07:26,756\nprotecting the data as far as\nif you're the data creator.\n\n178\n00:07:26,756 --> 00:07:27,261\n>> Right.\n>> And\n\n179\n00:07:27,261 --> 00:07:30,397\nthen allowing you access to\nthe data if you're the recipient,\n\n180\n00:07:30,397 --> 00:07:33,310\nif you're the person who's\ngetting access to that data.\n\n181\n00:07:33,310 --> 00:07:35,770\nSo it really is\na Microsoft Office function.\n\n182\n00:07:35,770 --> 00:07:38,800\nIf you don't use Microsoft Office\nin your environment,\n\n183\n00:07:38,800 --> 00:07:40,890\nthen you're not really gonna\nbe able to make use of RMS.\n\n184\n00:07:40,890 --> 00:07:41,840\n>> This is probably not for you.\n\n185\n00:07:41,840 --> 00:07:42,759\n>> Yeah.\n>> [LAUGH]\n\n186\n00:07:42,759 --> 00:07:44,490\n>> But, if you plan on passing this exam,\n\n187\n00:07:44,490 --> 00:07:45,990\nit doesn't matter what you use.\n\n188\n00:07:45,990 --> 00:07:47,260\n>> That's right.\n>> You need to learn RMS.\n\n189\n00:07:47,260 --> 00:07:48,664\nSo we're gonna take a look at it.\n\n190\n00:07:48,664 --> 00:07:50,312\nI'll tell you guys, I think it's awesome.\n\n191\n00:07:50,312 --> 00:07:51,330\nI really do.\n\n192\n00:07:51,330 --> 00:07:52,112\nI think it's really cool.\n\n193\n00:07:52,112 --> 00:07:54,945\nI like the idea of being able\nto protect My information.\n\n194\n00:07:54,945 --> 00:07:55,492\n>> Right.\n>> And\n\n195\n00:07:55,492 --> 00:07:58,788\nif I send you an email I don't want\nyou forwarding it all over the place.\n\n196\n00:07:58,788 --> 00:08:00,123\nWell I guess it just\ndepends on what I'm saying.\n\n197\n00:08:00,123 --> 00:08:01,378\n>> [LAUGH]\n>> But\n\n198\n00:08:01,378 --> 00:08:04,946\nI like to be able to have that control\nover information I disseminate.\n\n199\n00:08:04,946 --> 00:08:06,524\nAnd we don't normally have that.\n\n200\n00:08:06,524 --> 00:08:08,898\nRMS is a step in that direction.\n\n201\n00:08:08,898 --> 00:08:10,536\n>> Mm-hm, and\nit is relatively easy to work with.\n\n202\n00:08:10,536 --> 00:08:14,078\nI mean, right in your Office products\nwe've got buttons built-in to add that\n\n203\n00:08:14,078 --> 00:08:15,120\nprotection.\n\n204\n00:08:15,120 --> 00:08:16,780\nWe're gonna see that we\ncan create templates.\n\n205\n00:08:16,780 --> 00:08:19,440\nSo my users don't even\nhave to really know.\n\n206\n00:08:19,440 --> 00:08:21,800\nWe can set certain templates and\n\n207\n00:08:21,800 --> 00:08:26,340\nthat'll give the IT people full control\nand it'll give sales people read.\n\n208\n00:08:26,340 --> 00:08:28,330\nAnd it'll prevent fording\nit outside the domain.\n\n209\n00:08:28,330 --> 00:08:31,050\nSo they don't have to think about all\nthe different options they should choose.\n\n210\n00:08:31,050 --> 00:08:32,070\nThey just apply the template.\n\n211\n00:08:32,070 --> 00:08:34,720\nThey know that this is\nwhat all HR documents get.\n\n212\n00:08:34,720 --> 00:08:37,300\nAnd this is what all external\ndocuments get, and things like that.\n\n213\n00:08:37,300 --> 00:08:40,980\nAnd we can set up trusts between\nother companies that are running RMS.\n\n214\n00:08:40,980 --> 00:08:43,730\nSo that we can exchange\nRMS protected content\n\n215\n00:08:43,730 --> 00:08:45,932\nwith outside organizations as well.\n\n216\n00:08:45,932 --> 00:08:49,060\nBut then that requires them\nto be running it as well, and\n\n217\n00:08:49,060 --> 00:08:51,480\nshare some trust policies\nthat we'll show you guys.\n\n218\n00:08:51,480 --> 00:08:55,120\nBut once it gets set up,\nit's relatively easy for the user.\n\n219\n00:08:56,140 --> 00:08:58,410\n>> All right, so Mike,\nlet's take a look at it, right?\n\n220\n00:08:58,410 --> 00:09:00,090\n>> Let's dive into it, let's dive into it.\n\n221\n00:09:00,090 --> 00:09:03,670\nSo, I've got some trusty virtual machines\nset up here so we can show you guys this.\n\n222\n00:09:03,670 --> 00:09:08,190\nI've done a couple of things ahead of time\nto try to speed it up just a wee bit.\n\n223\n00:09:08,190 --> 00:09:11,030\nSo you guys don't have to watch me\ncreate shares and things like that and\n\n224\n00:09:11,030 --> 00:09:12,370\nI'll point them out as we go.\n\n225\n00:09:12,370 --> 00:09:15,067\nI've also created a couple groups ahead\nof time and a couple user accounts.\n\n226\n00:09:15,067 --> 00:09:17,185\nSo we'll skip all of that.\n\n227\n00:09:17,185 --> 00:09:20,176\nAnd I'll kinda show you as we go, or\ntell you what I did ahead of time.\n\n228\n00:09:20,176 --> 00:09:23,397\nAnd when we get there, actually I'll\nshow you a couple things here first.\n\n229\n00:09:23,397 --> 00:09:28,956\nLet me just open up my domain controller\nand get a little users and computers.\n\n230\n00:09:28,956 --> 00:09:31,412\nI created a group, a couple of groups.\n\n231\n00:09:31,412 --> 00:09:33,618\nOne is called my AD RMS super users.\n\n232\n00:09:33,618 --> 00:09:37,270\nAnd that is gonna be a group\nthat we're gonna add.\n\n233\n00:09:37,270 --> 00:09:39,865\nAnd it's kinda like a security policy,\n\n234\n00:09:39,865 --> 00:09:44,840\nor when you think as we did certificate\nservices in an earlier episode.\n\n235\n00:09:44,840 --> 00:09:46,940\nThis is somebody,\nif I put them in the super users,\n\n236\n00:09:46,940 --> 00:09:52,078\nthey will always get an owner's\nright access certificate.\n\n237\n00:09:52,078 --> 00:09:53,830\nSo it's kinda like your safety policy,\n\n238\n00:09:53,830 --> 00:09:57,600\nbecause we can end up losing access\nto documents if we're not careful.\n\n239\n00:09:57,600 --> 00:10:01,830\nIf that policy expires,\nnobody has access to that document.\n\n240\n00:10:01,830 --> 00:10:05,760\nOr if we lose a key, this group\ncan always get back in there and\n\n241\n00:10:05,760 --> 00:10:07,690\ndecrypt those documents.\n\n242\n00:10:07,690 --> 00:10:11,798\nI created an executive group, just so we\nwill have somebody to test those out on.\n\n243\n00:10:11,798 --> 00:10:13,790\nI made Don and Nate a couple of accounts.\n\n244\n00:10:13,790 --> 00:10:15,615\nAnd we'll be able to block\nthem access from something.\n\n245\n00:10:15,615 --> 00:10:17,280\n>> [LAUGH]\n>> The other thing I did,\n\n246\n00:10:17,280 --> 00:10:18,840\nwas I had to set up DNS.\n\n247\n00:10:18,840 --> 00:10:22,220\nCuz they're gonna need\nto find my RMS server.\n\n248\n00:10:22,220 --> 00:10:24,920\nAnd we'll talk about this process\nthat we go through when you create.\n\n249\n00:10:24,920 --> 00:10:28,330\nAnd when you consume this RMS content.\n\n250\n00:10:28,330 --> 00:10:34,050\nBut in my forward lookup zone,\nI just made a simple A record for AD RMS.\n\n251\n00:10:34,050 --> 00:10:35,530\nIf you guys can see that there.\n\n252\n00:10:35,530 --> 00:10:38,650\nAnd that just points to the IP\naddress of the RMS server or\n\n253\n00:10:38,650 --> 00:10:43,010\nthe server that I plan on\ninstalling AD RMS on, right.\n\n254\n00:10:43,010 --> 00:10:44,157\n>> And that name is important, right?\n\n255\n00:10:44,157 --> 00:10:45,098\nIt's got to be AD RMS?\n\n256\n00:10:45,098 --> 00:10:46,996\n>> Yes, got to be AD RMS, exactly.\n\n257\n00:10:46,996 --> 00:10:50,742\nAll right, so then the next thing we'll do\nis we're gonna head on over to server one.\n\n258\n00:10:50,742 --> 00:10:54,800\nAnd this is the server I wanna install or\nmake my AD RMS server.\n\n259\n00:10:54,800 --> 00:10:56,605\nSo I'm gonna add roles and features.\n\n260\n00:10:56,605 --> 00:11:00,099\nAnd the old next three times.\n\n261\n00:11:03,020 --> 00:11:06,910\nAnd then I'm gonna choose my Active\nDirectory Rights Management Services.\n\n262\n00:11:07,990 --> 00:11:11,230\nAnd it's gonna be .net four,\nthat will take a few minutes.\n\n263\n00:11:11,230 --> 00:11:16,670\nMy RSAT tools, IIS, my Web server,\ncouple other things.\n\n264\n00:11:16,670 --> 00:11:20,060\nAnd we'll click Add Features,\nand that's pretty much Next.\n\n265\n00:11:21,220 --> 00:11:24,200\nAll the way down to my role services.\n\n266\n00:11:24,200 --> 00:11:28,290\nAnd here we could tie this\ninto federation services.\n\n267\n00:11:28,290 --> 00:11:31,100\nSo if we wanted to use RMS\nalong with federation services,\n\n268\n00:11:31,100 --> 00:11:33,090\nI'm not going to for this one.\n\n269\n00:11:33,090 --> 00:11:35,620\nSo I'll just do the RMS, we'll click Next.\n\n270\n00:11:35,620 --> 00:11:37,830\nDon't need to change anything\non my Web service install.\n\n271\n00:11:39,970 --> 00:11:41,220\nAnd we'll go ahead and get that started.\n\n272\n00:11:43,330 --> 00:11:46,230\nAnd that will take it minute while\nit goes through the process of\n\n273\n00:11:46,230 --> 00:11:50,250\ninstalling all those different components,\nespecially that .net component.\n\n274\n00:11:51,270 --> 00:11:52,820\nSo we're gonna get this set up.\n\n275\n00:11:52,820 --> 00:11:57,030\nThere's a lot of different certificates\nthat are involved with this RMS.\n\n276\n00:11:57,030 --> 00:11:59,250\nOnce we get this role installed,\nthen we're gonna have to go back and\n\n277\n00:11:59,250 --> 00:12:00,430\nconfigure it.\n\n278\n00:12:00,430 --> 00:12:04,520\nAnd we'll create what's\ncalled an RMS cluster.\n\n279\n00:12:04,520 --> 00:12:06,700\nEven though you've got one\nserver it's called a cluster.\n\n280\n00:12:06,700 --> 00:12:08,580\nAnd we can add more servers to it.\n\n281\n00:12:08,580 --> 00:12:10,330\nAnd sometimes it turns out to be.\n\n282\n00:12:10,330 --> 00:12:12,880\nBut there's a,\nwhat's called a server license or\n\n283\n00:12:12,880 --> 00:12:15,820\ncertificate that's gonna\nbe issued to that cluster.\n\n284\n00:12:15,820 --> 00:12:18,920\nAnd that's really one of the primary\ncertificates in this whole process.\n\n285\n00:12:18,920 --> 00:12:24,110\nBecause what's gonna happen is if I\nwanna create RMS protected content,\n\n286\n00:12:24,110 --> 00:12:26,720\nI'm gonna open up Office,\nand open up Word.\n\n287\n00:12:26,720 --> 00:12:28,350\nAnd I'm gonna create this document and\n\n288\n00:12:28,350 --> 00:12:31,730\nwe're gonna go into our protect\ndocument option and apply our template.\n\n289\n00:12:31,730 --> 00:12:35,240\nIf it's the first time I've created\nthis I need a couple certificates.\n\n290\n00:12:35,240 --> 00:12:38,860\nI need a certificate to identity\nmyself as a trusted participant\n\n291\n00:12:38,860 --> 00:12:41,210\nin the RMS infrastructure.\n\n292\n00:12:41,210 --> 00:12:44,510\nAnd that's my client license or\ncertificate.\n\n293\n00:12:44,510 --> 00:12:47,510\nAnd then once I get that, that'll\nallow me to actually do RMS content,\n\n294\n00:12:47,510 --> 00:12:49,120\neven when I'm not\nconnected to the network.\n\n295\n00:12:49,120 --> 00:12:53,760\nSo, if I'm at home and I'm typing out\nan email then I can throw RMS on there.\n\n296\n00:12:53,760 --> 00:12:58,670\nThe machine I'm sitting at also needs\na certificate, a machine license or\n\n297\n00:12:58,670 --> 00:13:00,700\ncertificate, if I remember\nthe name of that correctly.\n\n298\n00:13:00,700 --> 00:13:02,050\nAnd that'll get issued one.\n\n299\n00:13:02,050 --> 00:13:04,010\nSo sometimes the first time you do it,\n\n300\n00:13:04,010 --> 00:13:06,360\nit can take it a minute because it's\ngotta issue those certificates.\n\n301\n00:13:06,360 --> 00:13:09,360\nAnd then once you've done it once,\nyou're good to go.\n\n302\n00:13:09,360 --> 00:13:10,700\nSame thing for the recipient.\n\n303\n00:13:10,700 --> 00:13:13,670\nIf they've never consumed any RMS\nprotected content then they are gonna need\n\n304\n00:13:13,670 --> 00:13:15,830\nto get issued those keys.\n\n305\n00:13:15,830 --> 00:13:18,040\nAnd what's gonna happen is,\nyou're gonna create this document.\n\n306\n00:13:18,040 --> 00:13:21,060\nAnd you're gonna choose to apply this\ntemplate to it that's gonna assign\n\n307\n00:13:21,060 --> 00:13:22,970\ncertain rights and privileges.\n\n308\n00:13:22,970 --> 00:13:25,990\nAnd then the RMS server is going to,\n\n309\n00:13:25,990 --> 00:13:28,955\nyou're gonna have the certificate\nfrom the RMS server.\n\n310\n00:13:28,955 --> 00:13:32,350\nAnd which includes the public\nkey of that RMS cluster.\n\n311\n00:13:32,350 --> 00:13:35,940\nAnd you're gonna generate\na symmetric key and\n\n312\n00:13:35,940 --> 00:13:37,790\nthat's gonna be used to\nencrypt the document.\n\n313\n00:13:37,790 --> 00:13:40,820\nAnd then you're gonna take\nthe key from the server,\n\n314\n00:13:40,820 --> 00:13:42,600\nthe public key out of\nthat server certificate.\n\n315\n00:13:42,600 --> 00:13:44,712\nAnd encrypt the session key,\nnot the session key but\n\n316\n00:13:44,712 --> 00:13:47,560\nthe symmetric key that's used\nto encrypt the document.\n\n317\n00:13:47,560 --> 00:13:48,180\nSo at that point,\n\n318\n00:13:48,180 --> 00:13:52,020\nthe only person that can decrypt\nthe document is the RMS cluster itself.\n\n319\n00:13:52,020 --> 00:13:55,840\nAnd then when I send that to Don and\nDon tries to open that document\n\n320\n00:13:55,840 --> 00:13:58,550\nhe's gonna first have to prove\nthat he's a trusted participant.\n\n321\n00:13:58,550 --> 00:14:01,160\nAnd if he's not he'll have\nto get issues a certificate.\n\n322\n00:14:01,160 --> 00:14:05,100\nAnd then the RMS server can use\nthat certificate to identify Don.\n\n323\n00:14:05,100 --> 00:14:08,241\nDetermine if he's on the usage policy\nthat we've assigned to the document.\n\n324\n00:14:08,241 --> 00:14:10,761\nAnd if he is, it's gonna decrypt.\n\n325\n00:14:10,761 --> 00:14:14,086\nCuz remember the server has the private\nkey that matches the public key that\n\n326\n00:14:14,086 --> 00:14:15,790\nwe encrypted the symmetric key with.\n\n327\n00:14:15,790 --> 00:14:22,640\nSo it's gonna decrypt that symmetric key\nand get Don's public key from his license.\n\n328\n00:14:22,640 --> 00:14:24,820\nAnd encrypt a symmetric key and\nsend it over to Don.\n\n329\n00:14:24,820 --> 00:14:29,270\nSo now Don can decrypt that symmetric\nkey and then can consume that content.\n\n330\n00:14:29,270 --> 00:14:31,880\n>> And if that sounds like a lot, it is.\n\n331\n00:14:31,880 --> 00:14:36,270\nAnd that's why we have the support for\na cluster, more than one RMS server.\n\n332\n00:14:36,270 --> 00:14:41,410\nBecause if you have 5,000 employees,\nand every document they open.\n\n333\n00:14:41,410 --> 00:14:45,647\nAnd half the emails that they open are\nhaving to run through this RMS process.\n\n334\n00:14:45,647 --> 00:14:48,325\nYou're gonna need multiple servers\nto be able to handle that,\n\n335\n00:14:48,325 --> 00:14:50,395\nto keep smooth operation going.\n\n336\n00:14:50,395 --> 00:14:53,396\nNot to mention the fact that you want two\nservers anyway because what happens if one\n\n337\n00:14:53,396 --> 00:14:53,975\nserver fails?\n\n338\n00:14:53,975 --> 00:14:57,254\nAll of a sudden you can't open\nyour documents anymore, right?\n\n339\n00:14:57,254 --> 00:14:57,841\n>> [CROSSTALK] access to everything, yeah.\n\n340\n00:14:57,841 --> 00:14:59,323\n>> Yeah,\nyou do actually have a little bit of time,\n\n341\n00:14:59,323 --> 00:15:00,783\nthat's how the offline access works,\nright?\n\n342\n00:15:00,783 --> 00:15:05,230\nThat we can kind of cash our own cert and\nbe able to work for a little while.\n\n343\n00:15:05,230 --> 00:15:08,070\nBut sooner or later,\nthat server stays down.\n\n344\n00:15:08,070 --> 00:15:11,097\nYou're not gonna be able to open your\ndocuments, and that's a real problem.\n\n345\n00:15:11,097 --> 00:15:14,459\nSo not only do you wanna\ndeploy multiple servers.\n\n346\n00:15:14,459 --> 00:15:17,115\nIt's a good idea to have\none in a remote location,\n\n347\n00:15:17,115 --> 00:15:19,277\nalso to multiple [CROSSTALK] locations.\n\n348\n00:15:19,277 --> 00:15:21,603\n>> Exactly.\nAnd we can set some time limits,\n\n349\n00:15:21,603 --> 00:15:24,990\nlike if I can set how long\nthe use licenses are good for.\n\n350\n00:15:24,990 --> 00:15:27,360\nSo they don't have to go back every time.\n\n351\n00:15:27,360 --> 00:15:29,450\nBut some environments\nthey don't wanna do that.\n\n352\n00:15:29,450 --> 00:15:31,240\nThey want you to have\nto identify every time.\n\n353\n00:15:31,240 --> 00:15:36,060\nSo we can prevent client side\ncaching of those used licenses and\n\n354\n00:15:36,060 --> 00:15:36,820\ncouple things we can share.\n\n355\n00:15:36,820 --> 00:15:38,770\nAnd I'll show you guys where\nwe can set that as well.\n\n356\n00:15:38,770 --> 00:15:42,023\n>> Yeah, and the other thing is we may\nneed to have one of these RMS servers\n\n357\n00:15:42,023 --> 00:15:43,251\nexposed to the Internet.\n\n358\n00:15:43,251 --> 00:15:44,780\n>> Mm-hm.\n>> If you want to be able\n\n359\n00:15:44,780 --> 00:15:48,122\nto send documents to people\noutside of your organization and\n\n360\n00:15:48,122 --> 00:15:49,832\nhave them be able to open them.\n\n361\n00:15:49,832 --> 00:15:52,967\nThey're gonna have to be able to contact\nan RMS server in your organization.\n\n362\n00:15:52,967 --> 00:15:54,523\nAnd that can be challenging.\n\n363\n00:15:54,523 --> 00:15:56,682\n>> Yeah.\n>> In earlier versions of Windows Server,\n\n364\n00:15:56,682 --> 00:15:59,514\nit was a real problem because you\ndon't wanna expose a server like\n\n365\n00:15:59,514 --> 00:16:02,002\nthis to the internet,\nyou didn't wanna put in your DMZ.\n\n366\n00:16:02,002 --> 00:16:03,488\n>> Right, mm-hm.\n\n367\n00:16:03,488 --> 00:16:07,538\n>> And fortunately, now we can use things\nlike branch access and stuff like that,\n\n368\n00:16:07,538 --> 00:16:11,468\nwhere you create mini VPN tunnels to be\nable to do that access without having to\n\n369\n00:16:11,468 --> 00:16:13,360\nexpose it to the internet.\n\n370\n00:16:13,360 --> 00:16:16,160\nBut those are some of the reasons\nwhy we might need multiple servers,\n\n371\n00:16:16,160 --> 00:16:17,780\nthat cluster type solution.\n\n372\n00:16:17,780 --> 00:16:18,740\n>> Exactly, exactly.\n\n373\n00:16:19,900 --> 00:16:20,540\nIt is still kicking.\n\n374\n00:16:20,540 --> 00:16:22,010\nI'm going to guess.\n\n375\n00:16:22,010 --> 00:16:23,225\nWhat did I say in that other episode?\n\n376\n00:16:23,225 --> 00:16:26,546\n64% is where it stops every time,\nno matter what role you're selling.\n\n377\n00:16:26,546 --> 00:16:28,150\n>> [LAUGH] And it is just sitting there.\n\n378\n00:16:28,150 --> 00:16:28,845\n>> 63 or 64%.\n\n379\n00:16:28,845 --> 00:16:32,140\n>> That's when they decide they just have\nno idea how long it's gonna take and\n\n380\n00:16:32,140 --> 00:16:33,173\nthey're gonna wait right there.\n\n381\n00:16:33,173 --> 00:16:35,946\n>> [LAUGH] Well, all right,\nthat looks like, it's more than half, so\n\n382\n00:16:35,946 --> 00:16:38,960\nyou feel good about it, but\nit's still got a little ways to go.\n\n383\n00:16:38,960 --> 00:16:42,675\n>> Well, while waiting on that, as we\nstart to protect our documents, oh, well,\n\n384\n00:16:42,675 --> 00:16:45,697\nthere, it jumped right to it, so\nI'll finish my thought later.\n\n385\n00:16:45,697 --> 00:16:46,567\n>> Nice.\n\n386\n00:16:46,567 --> 00:16:47,120\nAlright.\n\n387\n00:16:47,120 --> 00:16:48,780\nSo now that we finished that,\nI'm going to go ahead and\n\n388\n00:16:48,780 --> 00:16:51,190\nclick on this Perform\nadditional configuration.\n\n389\n00:16:53,150 --> 00:16:57,450\nAnd I will click Next on my little\nwizard here as soon as it let's me.\n\n390\n00:16:57,450 --> 00:16:58,140\n>> When it lets you.\n\n391\n00:16:58,140 --> 00:16:59,330\n>> Yeah.\n\n392\n00:16:59,330 --> 00:17:00,360\nThere it goes.\n\n393\n00:17:00,360 --> 00:17:02,240\nAll right, so\nhere I'm setting up a new cluster.\n\n394\n00:17:02,240 --> 00:17:04,940\nI don't have anything to start, so\nthis is my first server I'm adding.\n\n395\n00:17:06,850 --> 00:17:11,500\nAnd then I'm going to decide, we can use\nsequel server to store this information\n\n396\n00:17:11,500 --> 00:17:14,910\nand the policies that we create,\nthe usage policies,\n\n397\n00:17:14,910 --> 00:17:19,460\nthe key information, and all of that\ncan be stored in a SQL Server Database,\n\n398\n00:17:19,460 --> 00:17:21,380\nwhich is probably\nthe recommended way to go.\n\n399\n00:17:21,380 --> 00:17:22,180\n>> Yes.\n\n400\n00:17:22,180 --> 00:17:27,360\n>> 2008 I believe, and later,\nSQL Server is what's supported with 2012.\n\n401\n00:17:27,360 --> 00:17:30,040\nOr if you don't have SQL Server\non your network you can use this\n\n402\n00:17:30,040 --> 00:17:31,760\nWindows Internal Database.\n\n403\n00:17:31,760 --> 00:17:34,790\nWhich is basically SQL without\nthe management interface.\n\n404\n00:17:34,790 --> 00:17:38,340\n>> Yeah, and the Windows Internal Database\ndoes not scale as well as a full\n\n405\n00:17:38,340 --> 00:17:39,500\nSQL Server.\n\n406\n00:17:39,500 --> 00:17:43,800\nSo you can start this way, but eventually\nyou may get some performance issues.\n\n407\n00:17:43,800 --> 00:17:47,460\nAnd then the main thing is,\nwith the Windows Internal Database your\n\n408\n00:17:47,460 --> 00:17:50,340\ntransaction logs and the database,\nthey're all stored in the same place.\n\n409\n00:17:50,340 --> 00:17:53,556\nThey're typically stored right on the same\ndrive with your operating system, so\n\n410\n00:17:53,556 --> 00:17:56,276\nyou get a lot of disk I/O contention,\nand it doesn't perform well.\n\n411\n00:17:56,276 --> 00:17:59,131\nFor small and medium businesses,\nthat's probably fine.\n\n412\n00:17:59,131 --> 00:18:02,950\nBut for an enterprise, where you might\nhave tens of thousands of employees,\n\n413\n00:18:02,950 --> 00:18:05,772\nhundreds of thousands, or\neven millions of documents,\n\n414\n00:18:05,772 --> 00:18:09,260\nthe internal database is just not\ngoing to be able to handle that load.\n\n415\n00:18:09,260 --> 00:18:12,150\nAnd so\nyou'll want to use a dedicated SQL server.\n\n416\n00:18:12,150 --> 00:18:15,220\nIt doesn't have to be run\non the RMS server either.\n\n417\n00:18:15,220 --> 00:18:16,350\nIn fact, they encourage you not to.\n\n418\n00:18:16,350 --> 00:18:20,811\nTo have a dedicated separate SQL server\nand then just have RMS point to it.\n\n419\n00:18:20,811 --> 00:18:24,901\nSo if we were to choose that option there,\nwhere it says Specify database server,\n\n420\n00:18:24,901 --> 00:18:28,601\nyou've got that Select button where\nyou would go and choose that server.\n\n421\n00:18:28,601 --> 00:18:32,269\nIt can be any server in your entire\nnetwork, to be able to do that.\n\n422\n00:18:32,269 --> 00:18:35,620\n>> And the other big limitation, which is\nprobably an important one too with that\n\n423\n00:18:35,620 --> 00:18:38,642\nWindows Internal, is you're limited\nto one server in your cluster.\n\n424\n00:18:38,642 --> 00:18:39,282\nYou cannot add any more.\n\n425\n00:18:39,282 --> 00:18:40,740\n>> I didn't know that, oh,\nI guess it makes sense.\n\n426\n00:18:40,740 --> 00:18:43,120\nYeah, the Windows Internal Database\ndoesn't allow remote connections.\n\n427\n00:18:43,120 --> 00:18:45,720\n>> Right, so it's not shared\nbetween all of the RMS servers.\n\n428\n00:18:45,720 --> 00:18:47,630\nSo really for test environments,\n\n429\n00:18:47,630 --> 00:18:50,910\nthings like that where you're just\nlet's see if we want to use this.\n\n430\n00:18:50,910 --> 00:18:53,840\nThey're really good for that, but\notherwise stay away from that WID.\n\n431\n00:18:55,490 --> 00:18:56,940\nThen I've got to set an account.\n\n432\n00:18:56,940 --> 00:19:02,760\nThis is the account that RMS is going to\nrun under, and I've already created one.\n\n433\n00:19:02,760 --> 00:19:06,445\nNow in the real world, I think with\ntoday's, what do they call them,\n\n434\n00:19:06,445 --> 00:19:10,882\nthe Group Managed Service Accounts, where\nWindows is maintaining the password for\n\n435\n00:19:10,882 --> 00:19:13,401\nthat service account,\nis really the way to go.\n\n436\n00:19:13,401 --> 00:19:17,940\nI just made a standard account,\ncuz I was feeling a little lazy.\n\n437\n00:19:17,940 --> 00:19:21,890\n[LAUGH]\n>> [LAUGH]\n\n438\n00:19:21,890 --> 00:19:22,590\n>> And of course,\n\n439\n00:19:22,590 --> 00:19:23,730\nset password never expires.\n\n440\n00:19:23,730 --> 00:19:25,276\nOne of our best security\noptions we've got.\n\n441\n00:19:25,276 --> 00:19:28,271\n[LAUGH]\n>> [LAUGH]\n\n442\n00:19:28,271 --> 00:19:29,189\n>> All right.\n\n443\n00:19:29,189 --> 00:19:32,865\nOh, and the other thing with this one,\nI don't know if they tell us here.\n\n444\n00:19:32,865 --> 00:19:35,095\nYou cannot set the,\n\n445\n00:19:35,095 --> 00:19:38,185\nthe person that's installing this,\nyou can't use that account here.\n\n446\n00:19:39,430 --> 00:19:42,610\nIt will not let you use the same\naccount you're installing it\n\n447\n00:19:42,610 --> 00:19:44,678\nto specify as the service.\n\n448\n00:19:44,678 --> 00:19:48,758\nThen I've got the different cryptographic\nservice modes that I can choose from.\n\n449\n00:19:48,758 --> 00:19:53,890\nCryptographic mode two just supports,\nas you can see, RSA22048 and SHA256.\n\n450\n00:19:53,890 --> 00:19:55,640\nSo, stronger, newer algorithms.\n\n451\n00:19:57,510 --> 00:20:00,440\nAnd then we're gonna\nlet RMS manage the key.\n\n452\n00:20:00,440 --> 00:20:03,580\nIf you had a separate cryptographic\nstorage provider that you were using,\n\n453\n00:20:03,580 --> 00:20:04,410\nyou could use that.\n\n454\n00:20:06,890 --> 00:20:10,590\nAnd then the password to protect that key,\nand we'd wanna make sure that was a good,\n\n455\n00:20:10,590 --> 00:20:12,605\nlong, strong password.\n\n456\n00:20:12,605 --> 00:20:14,946\n>> So you're using 1-2-3-4-5-6-7-8?\n\n457\n00:20:14,946 --> 00:20:15,661\n[LAUGH]\n>> Pretty much.\n\n458\n00:20:15,661 --> 00:20:16,980\n[LAUGH]\n>> It's eight characters.\n\n459\n00:20:16,980 --> 00:20:17,528\n>> Password two.\n\n460\n00:20:17,528 --> 00:20:22,935\n[LAUGH] All right, and then I've\ngotta set up the virtual directory.\n\n461\n00:20:22,935 --> 00:20:25,670\nCuz a lot of this is\ngonna be going via HTTP.\n\n462\n00:20:25,670 --> 00:20:28,620\nAnd so it installed IIS\nwhen we installed the ROLA.\n\n463\n00:20:28,620 --> 00:20:29,790\nAnd I've got that default website.\n\n464\n00:20:29,790 --> 00:20:31,010\nThat's fine, we'll use that.\n\n465\n00:20:32,910 --> 00:20:34,690\nAnd then, oh, my certificate.\n\n466\n00:20:34,690 --> 00:20:37,570\nI did not issue a darn\ncertificate to this guy, did I?\n\n467\n00:20:37,570 --> 00:20:39,340\nLet's do an unencrypted.\n\n468\n00:20:39,340 --> 00:20:41,820\nFor the lab, we'll go ahead and\ndo unencrypted.\n\n469\n00:20:41,820 --> 00:20:46,109\nIn the real world, you'd wanna assign\na certificate to that machine and\n\n470\n00:20:46,109 --> 00:20:47,173\nthen set that up.\n\n471\n00:20:47,173 --> 00:20:48,498\nBut we'll just do HTTP.\n\n472\n00:20:48,498 --> 00:20:53,133\nSo it'll go over port 80, and\n\n473\n00:20:53,133 --> 00:20:58,118\nmy FQDN is going to be LUN-SBR1.\n\n474\n00:20:58,118 --> 00:20:59,608\nOh, I'm sorry, actually, I take that back.\n\n475\n00:20:59,608 --> 00:21:01,327\nSilly me.\n\n476\n00:21:01,327 --> 00:21:07,220\nADRMS.LAB.ITPERODE.TD.\n\n477\n00:21:07,220 --> 00:21:10,120\n>> Yep, there's that host name\nthat he created in DNS earlier,\n\n478\n00:21:10,120 --> 00:21:11,100\nhe pointed that out.\n\n479\n00:21:11,100 --> 00:21:13,860\nSo ADRMS is the name and\nthen you just tack it on the domain.\n\n480\n00:21:13,860 --> 00:21:15,020\n>> Exactly.\n\n481\n00:21:15,020 --> 00:21:17,411\nAnd we'll click Next.\n\n482\n00:21:17,411 --> 00:21:20,229\nAll right, and then for this one,\nmy server license certificate,\n\n483\n00:21:20,229 --> 00:21:21,473\nwe just have to give it a name.\n\n484\n00:21:21,473 --> 00:21:26,896\nAnd I'm just going to call it LabRMS,\n\n485\n00:21:26,896 --> 00:21:30,970\nsomething crazy like that.\n\n486\n00:21:30,970 --> 00:21:33,344\nAnd then I want to register my\nservice connection point so\n\n487\n00:21:33,344 --> 00:21:37,070\nthat my users can find it,\nit'll publish that in active directory.\n\n488\n00:21:37,070 --> 00:21:39,960\nI am logged on as the main admin,\nso it should work.\n\n489\n00:21:41,020 --> 00:21:42,070\nAnd we'll click Install.\n\n490\n00:21:45,030 --> 00:21:46,170\nAnd we'll let that configure.\n\n491\n00:21:48,220 --> 00:21:51,020\n>> All right.\nSo when this is done, technically,\n\n492\n00:21:51,020 --> 00:21:52,790\nwe're running ADRMS.\n\n493\n00:21:52,790 --> 00:21:54,900\nNow, we've gotta get our users set up for\nthat.\n\n494\n00:21:54,900 --> 00:21:58,040\nWe've gotta got ourselves set up\nto that to be able to support it.\n\n495\n00:21:58,040 --> 00:22:01,348\nBut the basic framework will be in place\nand we'll be ready to take a rest.\n\n496\n00:22:01,348 --> 00:22:02,994\n>> Exactly.\n\n497\n00:22:02,994 --> 00:22:06,700\n>> So not terribly difficult if you\nknow what to put in those fields and\n\n498\n00:22:06,700 --> 00:22:08,570\nget moving forward.\n\n499\n00:22:08,570 --> 00:22:09,237\n>> Yeah, really is.\n\n500\n00:22:09,237 --> 00:22:11,140\nAnd we're gonna go, and\nonce we get it installed,\n\n501\n00:22:11,140 --> 00:22:12,790\nwe've got a couple things we'll do in IIS.\n\n502\n00:22:12,790 --> 00:22:16,040\nWe've gotta open up some anonymous\nauthentication on a couple of these pages\n\n503\n00:22:16,040 --> 00:22:19,098\nwhere you connect to initially\nbefore you're authenticated, right?\n\n504\n00:22:19,098 --> 00:22:21,350\nWhen it has to verify who you are.\n\n505\n00:22:21,350 --> 00:22:23,120\nSo we're going to turn on\nanonymous authentication on\n\n506\n00:22:23,120 --> 00:22:24,620\nthose authentication pages.\n\n507\n00:22:24,620 --> 00:22:25,502\nThat's not redundant.\n\n508\n00:22:25,502 --> 00:22:28,806\n>> [LAUGH]\n>> And then we'll get into our console,\n\n509\n00:22:28,806 --> 00:22:30,181\nactually do some work.\n\n510\n00:22:30,181 --> 00:22:32,744\nThis is probably going to take, though,\na couple of minutes, two, or three,\n\n511\n00:22:32,744 --> 00:22:33,257\nfive minutes.\n\n512\n00:22:33,257 --> 00:22:35,488\nI don't know if we wanna-\n>> We can stop and take a break.\n\n513\n00:22:35,488 --> 00:22:37,270\n>> Yeah, it'd probably be a good time.\n\n514\n00:22:37,270 --> 00:22:37,828\n>> Okay.\n\n515\n00:22:37,828 --> 00:22:40,376\n>> Usually does take a few minutes\nto get all of that installed there,\n\n516\n00:22:40,376 --> 00:22:42,850\nget that internal database set up and\nall of that, so.\n\n517\n00:22:42,850 --> 00:22:44,388\n>> All right.\nWell, what we'll do is we'll stop and\n\n518\n00:22:44,388 --> 00:22:44,918\ntake a break then.\n\n519\n00:22:44,918 --> 00:22:47,442\nAnd when we get back, this little\nwizard should have finished, and\n\n520\n00:22:47,442 --> 00:22:49,493\nwe'll go through the next\npart of the configuration.\n\n521\n00:22:49,493 --> 00:22:52,395\nSo stay tuned,\nmore configuration after this.\n\n522\n00:22:52,395 --> 00:23:00,011\n[MUSIC]\n\n523\n00:23:00,011 --> 00:23:01,500\nAll right, welcome back, everybody.\n\n524\n00:23:01,500 --> 00:23:04,430\nSo during the break, Mike's little\ninstallation, was it finished?\n\n525\n00:23:04,430 --> 00:23:04,980\n>> It did.\nIt did, finally.\n\n526\n00:23:04,980 --> 00:23:06,530\n>> And now we're ready to do some damage,\nright?\n\n527\n00:23:06,530 --> 00:23:07,120\n>> We are.\n\n528\n00:23:07,120 --> 00:23:07,660\nLet's check it out.\n\n529\n00:23:07,660 --> 00:23:11,450\nAll right, so there we can see it did\ncomplete, but notice what it says here.\n\n530\n00:23:11,450 --> 00:23:16,560\nBefore you can administer ADRMS on this\nserver, you must log off and log on again.\n\n531\n00:23:16,560 --> 00:23:20,517\nAnd that's because when we created this,\nit created a group, it actually created\n\n532\n00:23:20,517 --> 00:23:24,655\na couple of groups, in fact, here, we'll\njust pull up active directory real quick.\n\n533\n00:23:24,655 --> 00:23:29,128\nI'll go ahead and close these two wizards\nand flip back over to DC real quick, well,\n\n534\n00:23:29,128 --> 00:23:30,774\nlet me log off while I'm here.\n\n535\n00:23:30,774 --> 00:23:33,660\n>> [LAUGH]\n>> Might as well.\n\n536\n00:23:33,660 --> 00:23:35,120\n>> Since it told you to and all.\n\n537\n00:23:35,120 --> 00:23:37,550\n>> Yeah, or should we just try it\nanyway to show them that it is true.\n\n538\n00:23:37,550 --> 00:23:42,987\nLet's see, if I go down here to Active\nDirectory Rights Management Services.\n\n539\n00:23:45,345 --> 00:23:47,469\nIt's gonna attempt to open up my console.\n\n540\n00:23:48,835 --> 00:23:49,531\n>> It's gonna sit there.\n\n541\n00:23:49,531 --> 00:23:50,135\n>> Maybe.\n\n542\n00:23:50,135 --> 00:23:51,953\nOr it's just gonna laugh at me, yeah.\n\n543\n00:23:51,953 --> 00:23:52,975\nThe server's unwilling.\n\n544\n00:23:52,975 --> 00:23:54,191\nEver seen that error?\n\n545\n00:23:54,191 --> 00:23:58,823\nThe server is unwilling to perform this\naction, I'm like wait, is this skynet.\n\n546\n00:23:58,823 --> 00:24:00,124\nWhat do you mean unwilling.\n\n547\n00:24:00,124 --> 00:24:02,151\n>> I believe I paid for you.\n\n548\n00:24:02,151 --> 00:24:03,888\nYou'll do as I say.\n\n549\n00:24:03,888 --> 00:24:04,420\n>> Yeah, and\n\n550\n00:24:04,420 --> 00:24:08,215\nhere you can see again a request fail\nwith HTTP status 401 unauthorized.\n\n551\n00:24:08,215 --> 00:24:12,377\nAll right, what's happening is I got\nadded to a group in active directory, so\n\n552\n00:24:12,377 --> 00:24:14,470\nwe flip back over to active directory.\n\n553\n00:24:16,200 --> 00:24:19,110\nI thought I had it open,\nI'll do DNS, there we go.\n\n554\n00:24:19,110 --> 00:24:21,440\nSo we'll check out tools and\nactive directory users and computers.\n\n555\n00:24:24,240 --> 00:24:29,351\nAnd in here, you can take a look,\n\n556\n00:24:29,351 --> 00:24:34,462\nI believe it dumped them in here,\n\n557\n00:24:34,462 --> 00:24:38,856\nor in my built in container.\n\n558\n00:24:38,856 --> 00:24:43,467\nRDS, I don't know exactly where\nI put it to be honest with you.\n\n559\n00:24:43,467 --> 00:24:44,875\n>> [LAUGH]\n>> But anyway,\n\n560\n00:24:44,875 --> 00:24:49,027\nI created a couple of groups,\nand I thought they were in here.\n\n561\n00:24:49,027 --> 00:24:51,047\nI don't see it.\n\n562\n00:24:51,047 --> 00:24:54,916\nAnyway there's an ADR administrators\ngroup that got added.\n\n563\n00:24:54,916 --> 00:24:57,280\nAnd if you guys remember\nfrom our other episodes,\n\n564\n00:24:57,280 --> 00:25:01,150\nwhen you get your access token is when\nyou log off or when you log on, right?\n\n565\n00:25:01,150 --> 00:25:06,320\nSo my group membership changed, I need log\noff and log back on to update my token,\n\n566\n00:25:06,320 --> 00:25:09,720\nso that I can then\nadminister my RMS cluster.\n\n567\n00:25:09,720 --> 00:25:10,688\nSo I'm gonna log out.\n\n568\n00:25:15,820 --> 00:25:16,800\nOh, actually you know what?\n\n569\n00:25:16,800 --> 00:25:21,240\nI was thinking that actually\nmight be a local group.\n\n570\n00:25:21,240 --> 00:25:22,020\nLet's check that.\n\n571\n00:25:22,020 --> 00:25:23,450\nMeh, good enough.\n\n572\n00:25:23,450 --> 00:25:24,830\nSorry, babbling to myself here.\n\n573\n00:25:24,830 --> 00:25:26,430\nSo we get logged back in\nas the administrator.\n\n574\n00:25:26,430 --> 00:25:29,790\nNow I when I go to open up that console,\nI should be good to go.\n\n575\n00:25:31,310 --> 00:25:32,709\nAs soon as we can get to it.\n\n576\n00:25:32,709 --> 00:25:34,037\nAnd then what we are going to do,\n\n577\n00:25:34,037 --> 00:25:36,068\nis we are going to make\na couple of changes to IIS.\n\n578\n00:25:36,068 --> 00:25:39,418\nRemember I said we have to open\nup a couple of the web pages for\n\n579\n00:25:39,418 --> 00:25:40,557\nanonymous access,\n\n580\n00:25:40,557 --> 00:25:45,050\nso that we can prove who we are to the\nauthentication process of the RMS cluster.\n\n581\n00:25:47,630 --> 00:25:50,330\nSo I'm going to do two things,\nI'm going to open up RMS,\n\n582\n00:25:50,330 --> 00:25:53,820\njust to show you guys we can now get\naccess to the console, it's not broken.\n\n583\n00:25:55,140 --> 00:25:55,660\n>> Yet.\n\n584\n00:25:55,660 --> 00:25:56,190\n>> Yet.\n\n585\n00:25:56,190 --> 00:25:57,240\n>> We have plenty of time to break it.\n\n586\n00:25:57,240 --> 00:25:57,855\n>> That's right.\n\n587\n00:25:57,855 --> 00:26:00,250\n[LAUGH] And I am good at breaking things.\n\n588\n00:26:02,560 --> 00:26:06,150\nAll right.\nSo we'll let that snap in, fill in there.\n\n589\n00:26:06,150 --> 00:26:07,399\n>> There we go.\n\n590\n00:26:07,399 --> 00:26:08,007\nYep.\n>> And\n\n591\n00:26:08,007 --> 00:26:10,023\nnow you can see I have\naccess to my cluster.\n\n592\n00:26:10,023 --> 00:26:11,947\nIt's going to populate\na little list over here.\n\n593\n00:26:14,199 --> 00:26:16,000\nThere we go.\n\n594\n00:26:16,000 --> 00:26:16,860\nAnd there's my server.\n\n595\n00:26:16,860 --> 00:26:19,730\nAnd you'll see I have all kinds of good\nnodes under here that we'll come back and\n\n596\n00:26:19,730 --> 00:26:20,700\ntake a look at.\n\n597\n00:26:20,700 --> 00:26:25,410\nBut before we go any further,\nlet me not forget to set up IIS properly.\n\n598\n00:26:30,249 --> 00:26:32,830\n>> Now, this IIS step that he's doing.\n\n599\n00:26:32,830 --> 00:26:36,080\nIf you are just using RMS internally and\n\n600\n00:26:36,080 --> 00:26:40,160\nall of your users are logging in via\nWindows, whenever they go and hit these\n\n601\n00:26:40,160 --> 00:26:43,000\nwebpages, it's gonna automatically\nlog them in and authenticate it.\n\n602\n00:26:43,000 --> 00:26:44,920\nIt's kind of a part of the system.\n\n603\n00:26:44,920 --> 00:26:47,990\nAnd so\nthat's why these pages are protected.\n\n604\n00:26:47,990 --> 00:26:51,242\nIt's if you want people to be able to\naccess this without necessarily being on\n\n605\n00:26:51,242 --> 00:26:54,495\nyour domain, or being external, or\nwhatever, they're not gonna be able to\n\n606\n00:26:54,495 --> 00:26:57,895\nauthenticate against IIS, and that's\nwhere we have to tweak these settings.\n\n607\n00:26:57,895 --> 00:26:59,670\n>> Exactly\n>> So this is something that pretty much\n\n608\n00:26:59,670 --> 00:27:00,530\neverybody's gonna do.\n\n609\n00:27:00,530 --> 00:27:03,820\nBut if you're wondering why Microsoft\ndoesn't do it for us, that's why,\n\n610\n00:27:03,820 --> 00:27:07,730\nis that in an internal only environment,\nthis is the more secure solution.\n\n611\n00:27:07,730 --> 00:27:08,320\n>> Exactly.\n\n612\n00:27:08,320 --> 00:27:10,810\nSo, we'll just enable both of those there.\n\n613\n00:27:10,810 --> 00:27:15,460\nI did that on the _wmcs Virtual\ndirectory as well as this\n\n614\n00:27:15,460 --> 00:27:17,650\nlicensing directory as well.\n\n615\n00:27:17,650 --> 00:27:18,750\nAnd we should be good to go there.\n\n616\n00:27:18,750 --> 00:27:22,770\nAll right so now we'll flip back\nover to our RMS clustering.\n\n617\n00:27:22,770 --> 00:27:24,370\nWe'll take a look at\na couple of things in here.\n\n618\n00:27:24,370 --> 00:27:28,250\nFirst thing I wanna do is I really\nwanna set up my super user group.\n\n619\n00:27:28,250 --> 00:27:29,750\nGo ahead and get that taken care of.\n\n620\n00:27:29,750 --> 00:27:31,820\nRemember those are kind\nof like our safety net.\n\n621\n00:27:31,820 --> 00:27:33,760\nPeople that can get access that\nare always going to get issues.\n\n622\n00:27:33,760 --> 00:27:36,240\nIn fact we can read here members of\nthe super users group are granted\n\n623\n00:27:36,240 --> 00:27:40,690\nowner use license when they request\na use license from the RMS cluster.\n\n624\n00:27:40,690 --> 00:27:44,210\nThat way they can decrypt\nall RMS protected content\n\n625\n00:27:44,210 --> 00:27:45,200\npublished by this cluster.\n\n626\n00:27:46,320 --> 00:27:49,030\nSo all I do is click change super user.\n\n627\n00:27:49,030 --> 00:27:52,090\nAnd then over here my actions\npane I'm gonna enable super user.\n\n628\n00:27:53,500 --> 00:27:55,820\nThen I've got to tell it\nwho my super user group is.\n\n629\n00:27:55,820 --> 00:28:01,688\nI created a group earlier before\nthe episode and I called it super user.\n\n630\n00:28:01,688 --> 00:28:05,192\nWhat did I start it with,\nit was something.\n\n631\n00:28:05,192 --> 00:28:09,455\nADRM_superusers group if I remember right,\nthere we go.\n\n632\n00:28:09,455 --> 00:28:15,440\nADRMS_superusers@lab.itpro.tv, now\nmost of this is email based right.\n\n633\n00:28:15,440 --> 00:28:18,120\nIt's all tied, your identity is\nreally tied to that email address.\n\n634\n00:28:18,120 --> 00:28:19,960\nSo you'll see email\naddresses all throughout.\n\n635\n00:28:19,960 --> 00:28:23,870\nI had to email enable this\ngroup in order to use it here.\n\n636\n00:28:23,870 --> 00:28:25,600\nAnd I'll click OK.\n\n637\n00:28:25,600 --> 00:28:31,120\nAnd now it shows me that my super user\ngroup is set to that ADRMS_SuperUsers.\n\n638\n00:28:31,120 --> 00:28:35,275\nAnd no, you don't have to call it Super\nUsers if you don't want to, I like it.\n\n639\n00:28:35,275 --> 00:28:38,768\n[LAUGH] All right, so the next thing we're\ngonna do is we're gonna take look at\n\n640\n00:28:38,768 --> 00:28:40,180\nconfiguring some templates.\n\n641\n00:28:40,180 --> 00:28:43,170\nRemember I said earlier that\nwe can make it very easy for\n\n642\n00:28:43,170 --> 00:28:48,040\nour users to apply RMS protection to\ndocuments by creating these templates.\n\n643\n00:28:48,040 --> 00:28:51,230\nAnd then they can just browse\na template list and apply it.\n\n644\n00:28:51,230 --> 00:28:54,080\nThey don't even have to\nknow exactly what it does.\n\n645\n00:28:55,300 --> 00:28:58,709\nSo I'm just gonna come in here,\nright click and choose oops,\n\n646\n00:28:58,709 --> 00:29:01,803\nCreate Distributed Rights Policy Template\ndown here.\n\n647\n00:29:01,803 --> 00:29:03,543\nI hate it when they take away\nmy right-click capabilities.\n\n648\n00:29:03,543 --> 00:29:06,601\n>> [LAUGH]\n>> And I'm gonna click Add.\n\n649\n00:29:06,601 --> 00:29:10,091\nAnd this is one of the few dialog boxes in\nWindows that I know of where you have to\n\n650\n00:29:10,091 --> 00:29:11,016\nput a description.\n\n651\n00:29:11,016 --> 00:29:11,945\nKinda odd.\n\n652\n00:29:11,945 --> 00:29:13,410\nUsually you don't see that.\n\n653\n00:29:13,410 --> 00:29:15,300\nBut I'm gonna make this one say Read Only.\n\n654\n00:29:16,310 --> 00:29:19,135\nAnd notice I cannot click Add until\nI give it a description here.\n\n655\n00:29:19,135 --> 00:29:25,723\nSo I'll just put something\nlike read-only access.\n\n656\n00:29:25,723 --> 00:29:27,460\nNo soup for you.\n\n657\n00:29:27,460 --> 00:29:29,060\nNo copy or print.\n\n658\n00:29:29,060 --> 00:29:30,700\nIf I can spell.\n\n659\n00:29:34,130 --> 00:29:35,822\nAnd I will click Add.\n\n660\n00:29:35,822 --> 00:29:37,620\nAll right, so\nthere I got the first part of it down.\n\n661\n00:29:37,620 --> 00:29:39,660\nThis is what my template\nis gonna be called.\n\n662\n00:29:39,660 --> 00:29:41,570\nBut that doesn't really limit that, right.\n\n663\n00:29:41,570 --> 00:29:45,960\nThat was just a description as when\nI click next, here's where I'm gonna\n\n664\n00:29:45,960 --> 00:29:49,460\nactually add who's getting permission and\nwhat permission they're gonna get.\n\n665\n00:29:49,460 --> 00:29:53,360\nJust like setting up an access\ncontrol list on an NTFS object.\n\n666\n00:29:53,360 --> 00:29:57,860\nSo I click Add, and I'm gonna find,\nI created a group called executives.\n\n667\n00:29:58,970 --> 00:30:02,450\nAnd I did email enable that group as well,\nexecutives@lab.itpro.tv.\n\n668\n00:30:02,450 --> 00:30:07,080\nAnd I'll click OK, and\nthen I, just like in NTFS,\n\n669\n00:30:07,080 --> 00:30:08,710\nI'm gonna give them view permissions.\n\n670\n00:30:08,710 --> 00:30:13,780\nAnd you see the permissions we have here,\nFull Control view, Edit, Save,\n\n671\n00:30:13,780 --> 00:30:18,934\nExport or Save As, Print, Forward,\n\n672\n00:30:18,934 --> 00:30:25,170\nReply, Reply All, Extract, Allow Macros,\nView Rights, Edit Rights, okay?\n\n673\n00:30:25,170 --> 00:30:28,510\nSo these are all the things that\nI can assign or not assign.\n\n674\n00:30:28,510 --> 00:30:30,790\n>> And some of these are email specific,\n\n675\n00:30:30,790 --> 00:30:35,140\nlike reply all, some of these\nare document specific, like save.\n\n676\n00:30:35,140 --> 00:30:36,630\nAlthough I guess you can save an email.\n\n677\n00:30:36,630 --> 00:30:39,430\nSo they don't necessarily apply to every\ndocument, you've got to make sure you\n\n678\n00:30:39,430 --> 00:30:42,830\npick the right set as you need, based on\nthe type of document you're protecting.\n\n679\n00:30:42,830 --> 00:30:43,610\n>> Exactly.\n\n680\n00:30:43,610 --> 00:30:47,270\nAnd then down here I've got that grant\nowner full control right with no\n\n681\n00:30:47,270 --> 00:30:48,360\nexpiration.\n\n682\n00:30:48,360 --> 00:30:50,990\nYou might or\nmight not want to use that option, right?\n\n683\n00:30:50,990 --> 00:30:54,690\nIf it's something that they're preparing\nthat's going to be a company document,\n\n684\n00:30:54,690 --> 00:30:57,850\nmaybe you want their rights to be\nlimited once they've created it as well.\n\n685\n00:30:57,850 --> 00:31:01,260\nI normally will let the owner have\nthe full control with no exception there.\n\n686\n00:31:03,280 --> 00:31:04,360\nAnd I'll go ahead and click next.\n\n687\n00:31:06,890 --> 00:31:10,210\nAnd then this is where I can control\nhow long, as Don pointed out earlier\n\n688\n00:31:10,210 --> 00:31:15,560\nhow long the content is good for, as well\nas how long their use licence is good for.\n\n689\n00:31:15,560 --> 00:31:20,320\nSo I can set a particular date, if I\nknow exactly what day I want this in on,\n\n690\n00:31:20,320 --> 00:31:24,780\n31st of December of 2014, or\nmaybe I just want a number of days.\n\n691\n00:31:24,780 --> 00:31:27,500\nAnd I'll go ahead and\nput something like 7 days there.\n\n692\n00:31:27,500 --> 00:31:29,930\nAnd then the, so\nthat's the content itself.\n\n693\n00:31:29,930 --> 00:31:34,080\nSo even if your use license hadn't\nexpired, if the content's expired,\n\n694\n00:31:34,080 --> 00:31:35,380\nyou can't get access to it.\n\n695\n00:31:35,380 --> 00:31:36,860\nIt's not gonna give you access any longer.\n\n696\n00:31:38,190 --> 00:31:42,380\nAnd then the use license, this is what\nI need to be able to open the document.\n\n697\n00:31:42,380 --> 00:31:45,670\nWhen I try to consume that content,\nit's gotta authenticate me and\n\n698\n00:31:45,670 --> 00:31:50,500\nthen assign me a use license based on\nwhatever permission I'm supposed to have.\n\n699\n00:31:50,500 --> 00:31:54,873\nAnd if that expires, I have to go back and\nget another one from the RMS cluster.\n\n700\n00:31:54,873 --> 00:31:57,555\nAssuming that the content\nitself has not expired.\n\n701\n00:31:57,555 --> 00:32:00,840\n>> And so you may ask yourself why\ndo we have two of these values?\n\n702\n00:32:00,840 --> 00:32:02,407\nAnd let me just give you a Scenario.\n\n703\n00:32:02,407 --> 00:32:04,647\nMike set a seven day\nexpiration on this document.\n\n704\n00:32:04,647 --> 00:32:08,486\nSo if we send a document out, and we use\nthis template for applying the security to\n\n705\n00:32:08,486 --> 00:32:11,605\nit, whoever receives it will\nhave seven days to deal with it.\n\n706\n00:32:11,605 --> 00:32:12,198\n>> Mm-hm.\n>> And\n\n707\n00:32:12,198 --> 00:32:13,714\nby the end of seven\ndays it will expire and\n\n708\n00:32:13,714 --> 00:32:18,060\nthey'll no longer be able to open it\n>> What if on day three,\n\n709\n00:32:18,060 --> 00:32:20,650\nI find out that there's\na mistake in there?\n\n710\n00:32:20,650 --> 00:32:22,770\nSo I sent out a new document.\n\n711\n00:32:22,770 --> 00:32:26,498\nI might want to immediately\nexpire the existing document.\n\n712\n00:32:26,498 --> 00:32:29,550\nWell, if somebody already has\na seven day access to it,\n\n713\n00:32:29,550 --> 00:32:32,740\nthen they're not gonna check back in for\nseven days.\n\n714\n00:32:32,740 --> 00:32:36,200\nSo there's no way I can\nexpire it out early.\n\n715\n00:32:36,200 --> 00:32:40,380\nBut if we leave it like he's got, or he\nhad before, where it was seven days usage\n\n716\n00:32:40,380 --> 00:32:44,515\nand one day for\nthat duration for the license.\n\n717\n00:32:44,515 --> 00:32:47,350\n>> Mm-hm.\n>> Well, every 24 hours\n\n718\n00:32:47,350 --> 00:32:50,310\npeople will have to check back in to\nmake sure that it's still okay for\n\n719\n00:32:50,310 --> 00:32:52,460\nthem to access that document for\nthe seven days.\n\n720\n00:32:52,460 --> 00:32:55,100\nAt the end of seven days, it's gone\nno matter what, but every 24 hours,\n\n721\n00:32:55,100 --> 00:32:56,290\nyou have to check in.\n\n722\n00:32:56,290 --> 00:33:00,300\nAnd that allows us to be able to change\nthe policy after the fact if we need to.\n\n723\n00:33:00,300 --> 00:33:00,900\n>> Exactly.\n\n724\n00:33:00,900 --> 00:33:01,400\nI like that.\nAnd\n\n725\n00:33:01,400 --> 00:33:02,540\nthat's the way I kinda like to do that.\n\n726\n00:33:02,540 --> 00:33:05,958\nI mean it might generate a little\nmore traffic to your RMS cluster,\n\n727\n00:33:05,958 --> 00:33:08,500\nbut I think it's worth it,\nit gives you that flexibility.\n\n728\n00:33:08,500 --> 00:33:12,310\nWe can also prevent them from caching,\nyou've got an option here,\n\n729\n00:33:12,310 --> 00:33:15,370\nenable users to view protected\ncontent using a browser add in.\n\n730\n00:33:15,370 --> 00:33:17,010\nSo if their browser's supported it,\n\n731\n00:33:17,010 --> 00:33:20,840\nwell with IE, [LAUGH] they can\nview content through there.\n\n732\n00:33:20,840 --> 00:33:24,430\nAnd here require a new use license\nevery time content is consumed.\n\n733\n00:33:24,430 --> 00:33:28,390\nSo they won't be able to cache their\nuseer license, and we'll go ahead and\n\n734\n00:33:28,390 --> 00:33:29,245\ncheck that one for now.\n\n735\n00:33:29,245 --> 00:33:30,740\nAnd I'll think all I'll do.\n\n736\n00:33:30,740 --> 00:33:33,885\n>> And consumed is just\na fancy pants word for opened.\n\n737\n00:33:33,885 --> 00:33:35,180\n>> [LAUGH]\n>> So every time you open\n\n738\n00:33:35,180 --> 00:33:36,590\na document you are consuming it.\n\n739\n00:33:38,000 --> 00:33:40,315\n>> All right,\nit makes me sound important or something.\n\n740\n00:33:40,315 --> 00:33:42,473\n>> [LAUGH]\n>> I'm not goinna set up any revocation\n\n741\n00:33:42,473 --> 00:33:43,340\noptions right now.\n\n742\n00:33:43,340 --> 00:33:44,646\nWe could, whether or\n\n743\n00:33:44,646 --> 00:33:48,500\nnot the content protected using\nthis template may be revoked.\n\n744\n00:33:48,500 --> 00:33:51,020\nWe'll go ahead and leave it.\n\n745\n00:33:51,020 --> 00:33:52,770\n>> That's going back to\nwhat I was talking about.\n\n746\n00:33:52,770 --> 00:33:54,700\nYou might want to\nterminate something early.\n\n747\n00:33:54,700 --> 00:33:56,700\nAnd, that'll only happen\nif you're checking back in.\n\n748\n00:33:56,700 --> 00:33:59,525\nSee how it's got a refresh interval ]\nright there for the revocation list.\n\n749\n00:33:59,525 --> 00:34:00,860\n>> Mm-hm.\n>> And, so, you can set that.\n\n750\n00:34:00,860 --> 00:34:03,540\n>> And kinda shrink the amount\nof time in between check-ins.\n\n751\n00:34:03,540 --> 00:34:04,970\n>> Exactly.\n\n752\n00:34:04,970 --> 00:34:08,400\nAll right, so we'll click finish on that,\nand now I've got my new policy.\n\n753\n00:34:08,400 --> 00:34:12,440\nNow, at this point, the policy is\nstored in that database, here, locally.\n\n754\n00:34:12,440 --> 00:34:14,330\nAnd so, in order for\nthem to apply this policy,\n\n755\n00:34:14,330 --> 00:34:17,250\nthey're gonna need connection\nto that RMS cluster.\n\n756\n00:34:17,250 --> 00:34:19,280\nWe can actually set this up.\n\n757\n00:34:19,280 --> 00:34:23,250\nAnd what we should do, is distribute this\nso they can access this just like a file\n\n758\n00:34:23,250 --> 00:34:27,008\nshare would, and they can cache these\npolicies locally on their machine.\n\n759\n00:34:27,008 --> 00:34:30,527\nSo that they can create RMS protected\ncontent when they're not connected\n\n760\n00:34:30,527 --> 00:34:32,581\nto the network like when they're at home.\n\n761\n00:34:32,581 --> 00:34:36,290\nI can see up here that the template\nfile location is currently not set.\n\n762\n00:34:36,290 --> 00:34:41,635\nI've already created a few shares\nthat we're gonna use to do this.\n\n763\n00:34:41,635 --> 00:34:45,438\nYou just have to have a shared location\nwhere we can store these guys.\n\n764\n00:34:45,438 --> 00:34:48,840\nSo I'm gonna click change distributed\nrights policy template file location,\n\n765\n00:34:48,840 --> 00:34:50,640\nagain I can see it's not set.\n\n766\n00:34:50,640 --> 00:34:54,090\nI'm going to enable export and\nthen I just have to put in my UNC path,\n\n767\n00:34:54,090 --> 00:34:59,390\nand I believe I made this server one, and\n\n768\n00:34:59,390 --> 00:35:05,050\nI called it RMS templates and\nI'll click OK.\n\n769\n00:35:06,180 --> 00:35:09,090\nAnd I should see that it did create,\nset that location.\n\n770\n00:35:09,090 --> 00:35:14,700\nAnd if I open up file explorer,\nand I go take a look at that share\n\n771\n00:35:17,780 --> 00:35:22,130\nthere is my read only usage\npolicy that we created earlier.\n\n772\n00:35:22,130 --> 00:35:24,090\nYou'll notice it's stored\nas an XML document.\n\n773\n00:35:25,880 --> 00:35:27,420\nAll right, so\nnow we've got that guy set up.\n\n774\n00:35:27,420 --> 00:35:31,650\nThe next thing we're gonna do just to show\nyou is, what's called an exclusion policy.\n\n775\n00:35:32,810 --> 00:35:38,620\nThis allows you to block certain\nusers from obtaining used licenses,\n\n776\n00:35:38,620 --> 00:35:40,530\nor block certain applications.\n\n777\n00:35:40,530 --> 00:35:43,610\nMaybe if they got, I don't want\nthem using an older version of word\n\n778\n00:35:43,610 --> 00:35:45,040\nto work with these for some good reason.\n\n779\n00:35:45,040 --> 00:35:47,660\nI haven't thought of\nmany too good reasons.\n\n780\n00:35:47,660 --> 00:35:50,210\nOr maybe you don't want them\nusing PowerPoint with RMS,\n\n781\n00:35:50,210 --> 00:35:51,500\nor something like that.\n\n782\n00:35:51,500 --> 00:35:54,900\nSo we can come over here and\nmanage application exclusion lists.\n\n783\n00:35:54,900 --> 00:35:57,810\nThe top one up here,\nmanage RMS user exclusion list.\n\n784\n00:35:57,810 --> 00:36:02,870\nI don't want any of my contractors to be\nable to open up RMS protected content,\n\n785\n00:36:02,870 --> 00:36:03,960\nor anything like that.\n\n786\n00:36:03,960 --> 00:36:06,880\nSo I could add their group\nto the exclusion list and\n\n787\n00:36:06,880 --> 00:36:10,410\nthat way even if they tried to obtain\na use license they would be denied.\n\n788\n00:36:12,600 --> 00:36:14,400\nI'll go ahead and add one for\nan application here.\n\n789\n00:36:14,400 --> 00:36:18,120\nAll you have to do is turn it on,\nenable application exclusions.\n\n790\n00:36:18,120 --> 00:36:21,540\nOnce I've turned it on, then I can pick\nthe application that I want to block.\n\n791\n00:36:21,540 --> 00:36:25,670\nAnd we'll do something like PowerPoint.\n\n792\n00:36:25,670 --> 00:36:32,711\nAnd we'll say version\n14 through version 16.\n\n793\n00:36:37,192 --> 00:36:38,530\nAnd Finish, and it's that easy.\n\n794\n00:36:38,530 --> 00:36:41,230\nSo we hit Continue to add additional.\n\n795\n00:36:41,230 --> 00:36:43,006\nWell, we only have so many.\n\n796\n00:36:43,006 --> 00:36:45,065\n>> [LAUGH]\n>> [LAUGH] All right, so\n\n797\n00:36:45,065 --> 00:36:48,830\nthat's our good old exclusion policy.\n\n798\n00:36:48,830 --> 00:36:53,660\nNext thing we're gonna take a look at\nis what we call our trust policies.\n\n799\n00:36:55,980 --> 00:36:57,530\nUp here I've got trust policies,\n\n800\n00:36:57,530 --> 00:37:03,190\nand I've got what's called trusted user\ndomains, and trusted publishing domains.\n\n801\n00:37:03,190 --> 00:37:07,000\nIn the trusted user domain, there's\na policy here, this is for my company,\n\n802\n00:37:07,000 --> 00:37:10,660\nnow right now we're lab dot at ITProTV and\n\n803\n00:37:10,660 --> 00:37:16,000\nthis is our file that includes\nthe information about our rms cluster.\n\n804\n00:37:16,000 --> 00:37:22,410\nAnd the idea is if I want to share\nprotected content between organizations.\n\n805\n00:37:22,410 --> 00:37:25,130\nThey're running their own RMS cluster.\n\n806\n00:37:25,130 --> 00:37:30,130\nAnd then we can swap these trusted user\ndomain or trusted publishing domain files,\n\n807\n00:37:30,130 --> 00:37:35,580\nand allow us to consume content that\nthey're protecting with their RMS cluster.\n\n808\n00:37:35,580 --> 00:37:36,440\nAnd vice versa.\n\n809\n00:37:36,440 --> 00:37:38,600\nAnd it really depends which one you use.\n\n810\n00:37:38,600 --> 00:37:40,400\nDepends on how you wanna go about it.\n\n811\n00:37:40,400 --> 00:37:44,890\nIf you set up a trusted user domain,\nbasically what you're saying is, or\n\n812\n00:37:44,890 --> 00:37:45,570\nif you import.\n\n813\n00:37:45,570 --> 00:37:47,240\nThey're gonna export their policy.\n\n814\n00:37:47,240 --> 00:37:51,020\nSo just like I would if I'm setting it up\na partnership, I'm gonna come in here and\n\n815\n00:37:51,020 --> 00:37:53,330\nI'm going to export my\ntrusted user domain.\n\n816\n00:37:54,710 --> 00:37:57,700\nAnd I'll pick a location I made earlier.\n\n817\n00:37:57,700 --> 00:38:03,230\nWhat was it, exporting,\nI believe there's SBR1/export.\n\n818\n00:38:03,230 --> 00:38:11,460\nAll right and TUDs or trusted user domains\nare going to be saved as a BIN file.\n\n819\n00:38:13,590 --> 00:38:15,400\nSo trusted user domain and\nI'll click save.\n\n820\n00:38:15,400 --> 00:38:20,340\nAnd then what I can do is I could give\nthem access or email them that document.\n\n821\n00:38:20,340 --> 00:38:21,640\nAnd then they're gonna turn around and\n\n822\n00:38:21,640 --> 00:38:24,740\ncome into trusted user domains\non theirs and choose import.\n\n823\n00:38:24,740 --> 00:38:29,390\nNow I can't import the same one I just\nexported I don't have another organization\n\n824\n00:38:29,390 --> 00:38:32,470\nfile but I would come here and\ngrab that it's going to tell me that it.\n\n825\n00:38:32,470 --> 00:38:37,000\nIt can't because it's already trusted.\n\n826\n00:38:37,000 --> 00:38:39,680\nBut that's okay,\njust to show you the process there.\n\n827\n00:38:39,680 --> 00:38:43,490\nFor some reason it always dumps\nmy console when I do that.\n\n828\n00:38:43,490 --> 00:38:46,650\nTrusted user domain, what you're doing is\nyou're saying that you trust their users.\n\n829\n00:38:46,650 --> 00:38:50,690\nYou're gonna allow their users to\nconnect to your RMS cluster and\n\n830\n00:38:50,690 --> 00:38:52,610\ntry to obtain a use policy.\n\n831\n00:38:54,630 --> 00:38:58,170\nSo that means that they do have to have,\nas Don was saying earlier, that means I've\n\n832\n00:38:58,170 --> 00:39:02,310\ngot to expose my RMS cluster, because\nthey're coming from their organization,\n\n833\n00:39:02,310 --> 00:39:04,100\nprobably across the WAN or whatever.\n\n834\n00:39:04,100 --> 00:39:06,240\nAnd we can do some proxying in there,\n\n835\n00:39:06,240 --> 00:39:08,260\nto kind of give it a little\nlayer of security.\n\n836\n00:39:08,260 --> 00:39:10,650\n>> Normally you'll set up a VPN tunnel,\n\n837\n00:39:10,650 --> 00:39:12,540\na VPN tunnel between your\norganization Connection and theirs.\n\n838\n00:39:12,540 --> 00:39:14,810\nSo it's not that you're exposing\nyour RMS to the internet.\n\n839\n00:39:14,810 --> 00:39:16,230\n>> Right.\n>> You are exposing it to that\n\n840\n00:39:16,230 --> 00:39:19,565\nother company's so\nthat they can access check in.\n\n841\n00:39:19,565 --> 00:39:21,220\n>> Hm-hm.\nAnd so if that's a possibility,\n\n842\n00:39:21,220 --> 00:39:25,010\nif we can allow that level of access then\nwe can deal with the trusted user domains.\n\n843\n00:39:25,010 --> 00:39:28,190\nAnd the trusted publishing domains\nis a little bit different.\n\n844\n00:39:28,190 --> 00:39:33,560\nHere what's gonna happen is we're gonna\nall of a sudden trust their RMS cluster.\n\n845\n00:39:33,560 --> 00:39:36,820\nAnd so when I send, if Don's in another\norganization and I send him some\n\n846\n00:39:36,820 --> 00:39:42,020\nprotective content he can actually obtain\nthe use license from his own RMS cluster.\n\n847\n00:39:42,020 --> 00:39:46,550\nWe're gonna send them the keys\nfrom our RMS cluster, so\n\n848\n00:39:46,550 --> 00:39:50,390\nthat that their RMS cluster\ncan then decrypt that content.\n\n849\n00:39:50,390 --> 00:39:52,403\nAnd issue a use license to their user.\n\n850\n00:39:52,403 --> 00:39:56,300\nSo to me, that's a little higher level of\ntrust there, because now we're talking\n\n851\n00:39:56,300 --> 00:39:59,381\nabout exporting our clusters private key,\nand sending it over.\n\n852\n00:39:59,381 --> 00:40:01,598\nBut the process is exactly the same.\n\n853\n00:40:01,598 --> 00:40:06,229\nIt doesn't create a BIN, it creates\na Oh gosh, I remember that it's in XML,\n\n854\n00:40:06,229 --> 00:40:07,597\nlet's find out here.\n\n855\n00:40:07,597 --> 00:40:11,602\nWe'll call it lab, wait,\n\n856\n00:40:11,602 --> 00:40:15,955\nactually let me put that, and\n\n857\n00:40:15,955 --> 00:40:22,761\nthat's a shared location, SVR1/X ports.\n\n858\n00:40:22,761 --> 00:40:27,510\nAnd we'll call it something like\nlab-trusted publishing domain.\n\n859\n00:40:29,682 --> 00:40:33,255\nI noticed I had to password protect it,\nbecause it's got that private key.\n\n860\n00:40:39,398 --> 00:40:42,533\n[INAUDIBLE] Do I need to\nput the name up there?\n\n861\n00:40:47,887 --> 00:40:50,064\nOh, did I say, oh,\nI'm doing import, sorry, my bad.\n\n862\n00:40:50,064 --> 00:40:52,880\n>> [LAUGH] I was like wait what?\n\n863\n00:40:52,880 --> 00:40:54,260\n>> Let's export that instead.\n\n864\n00:40:54,260 --> 00:40:59,980\nSo let me go down here and I will export\nmine, and that makes a little more sense.\n\n865\n00:41:01,660 --> 00:41:03,410\nIt's already in my favorite location.\n\n866\n00:41:03,410 --> 00:41:08,910\nWe'll call it lab-trusted publishing\ndomain, and notice it is an XML file.\n\n867\n00:41:08,910 --> 00:41:10,272\nAnd I'm gonna have to password protect it.\n\n868\n00:41:19,745 --> 00:41:21,466\nAnd if I needed backwards compatibility,\n\n869\n00:41:21,466 --> 00:41:23,723\nif they were running an older\nversion of RMS over there.\n\n870\n00:41:23,723 --> 00:41:28,365\nWe could drop that down a level,\nand it'll export that.\n\n871\n00:41:28,365 --> 00:41:30,425\nAnd then again,\nwe would share that information.\n\n872\n00:41:30,425 --> 00:41:34,345\nWe put it in a shared location in this\ncase, but then they could import and\n\n873\n00:41:34,345 --> 00:41:35,365\nit could be done internally.\n\n874\n00:41:35,365 --> 00:41:39,180\nYou might have different departments\nwith their own RMS infrastructure and\n\n875\n00:41:39,180 --> 00:41:42,470\ntheir own sets of templates and\nthings like that that they use.\n\n876\n00:41:42,470 --> 00:41:45,804\nAll right, so that's how we're going to\nset this up to work with our external\n\n877\n00:41:45,804 --> 00:41:47,720\norganizations or partner organizations.\n\n878\n00:41:47,720 --> 00:41:52,120\nIt's just to import theirs and\nto export ours for them.\n\n879\n00:41:52,120 --> 00:41:56,100\nAgain, the key there is to understand the\ndifference with the trusted user domains.\n\n880\n00:41:56,100 --> 00:41:58,620\nThey're gonna have to\nconnect to your RMS cluster\n\n881\n00:41:58,620 --> 00:42:00,620\nin order to get access to that content.\n\n882\n00:42:00,620 --> 00:42:04,309\nWith a trusted publishing domain, we're\ngiving them the ability to decrypt stuff\n\n883\n00:42:04,309 --> 00:42:07,697\nthat we've encrypted so they can issue\ntheir own use licenses on their end.\n\n884\n00:42:09,413 --> 00:42:12,531\nAll right, what is next?\n\n885\n00:42:12,531 --> 00:42:16,400\nSo I'd say we're pretty much\ngood to go with the set up.\n\n886\n00:42:16,400 --> 00:42:20,800\nNow we can take a look at actually putting\nthis into play and testing it out.\n\n887\n00:42:20,800 --> 00:42:25,200\nSo I am going to switch\nover to CL1 here and\n\n888\n00:42:25,200 --> 00:42:28,000\nI'm going to log off because right\nnow I'm logged on as the admin.\n\n889\n00:42:28,000 --> 00:42:32,250\nAnd earlier, I gave a few of\n\n890\n00:42:32,250 --> 00:42:36,590\nthe users access or permission or remote\nin, so we're gonna have that same deal.\n\n891\n00:42:36,590 --> 00:42:39,852\nAnd I'm gonna go with the,\nlet's start with Mr. Don.\n\n892\n00:42:39,852 --> 00:42:41,300\n>> You know my password?\n\n893\n00:42:41,300 --> 00:42:43,720\n>> I do.\n>> [LAUGH] Great,\n\n894\n00:42:43,720 --> 00:42:45,200\nnow I've got to change my passwords.\n\n895\n00:42:46,730 --> 00:42:47,535\nI guess I'll do password3.\n\n896\n00:42:47,535 --> 00:42:49,770\n>> [LAUGH] Right, I know,\nit was 2 this time.\n\n897\n00:42:49,770 --> 00:42:52,835\nSo, I just started guessing 1,\n2, it's all good.\n\n898\n00:42:52,835 --> 00:42:54,830\n>> [LAUGH]\n>> All right, so what I'm gonna do,\n\n899\n00:42:54,830 --> 00:42:58,455\nI'm gonna get logged in as Don, and Don's\ngonna have to get his profile set up here.\n\n900\n00:42:58,455 --> 00:43:04,610\n[COUGH] And then the next thing I'm gonna\ndo is, we're gonna go ahead and add,\n\n901\n00:43:04,610 --> 00:43:10,785\nI want to make sure I add the the URL for\nthe RMS cluster, that adrms.lab.expert.tv.\n\n902\n00:43:10,785 --> 00:43:17,500\nI wanna add that to my intranet sites\nin my Internet Explorer, in my browser.\n\n903\n00:43:18,620 --> 00:43:19,834\n>> Yeah, the RMS system,\n\n904\n00:43:19,834 --> 00:43:23,580\nit actually uses some active scripting\nin the background and by default,\n\n905\n00:43:23,580 --> 00:43:26,730\nInternet Explorer will block it\n>> That's why we need to make sure we add\n\n906\n00:43:26,730 --> 00:43:30,090\nit to our Intranet site so\nthat it is a trusted site.\n\n907\n00:43:30,090 --> 00:43:31,120\n>> Exactly.\n\n908\n00:43:31,120 --> 00:43:34,468\n>> Well, no I shouldn't say that,\nbecause now there is a trusted site zone.\n\n909\n00:43:34,468 --> 00:43:37,910\n>> Yeah.\n>> But the Intranet basically gets\n\n910\n00:43:37,910 --> 00:43:41,940\neven more trusted than\na trusted site zone.\n\n911\n00:43:41,940 --> 00:43:42,940\nIt gets confusing.\n\n912\n00:43:42,940 --> 00:43:43,830\n>> I know, it really does [LAUGH].\n\n913\n00:43:43,830 --> 00:43:45,900\n>> So it's a trustier [LAUGH].\n\n914\n00:43:45,900 --> 00:43:50,510\n>> And most of the time, it will pick up\nthat it's an Intranet site on it's own.\n\n915\n00:43:50,510 --> 00:43:52,980\nBut for this one, we'll add and make sure.\n\n916\n00:43:52,980 --> 00:43:56,920\n>> Another option is you can add it to the\ntrusted sites through group policy object.\n\n917\n00:43:56,920 --> 00:43:59,830\nIf you want to make sure its done across\nall the machines in your organizations you\n\n918\n00:43:59,830 --> 00:44:02,890\ncreate a GPO and you add that adrms.\n\n919\n00:44:02,890 --> 00:44:06,600\nWell, in our case lab.itpro.tv, stick\nthat in the trusted sites in the GPO and\n\n920\n00:44:06,600 --> 00:44:08,730\nit pushes out your network.\n\n921\n00:44:08,730 --> 00:44:11,290\n>> And that's a much better way to go,\nbecause here you are going to see I am\n\n922\n00:44:11,290 --> 00:44:14,380\ngoing to have to do it for\neach user that logs on here.\n\n923\n00:44:14,380 --> 00:44:18,470\nWe use a group policy,\nI do it once and I'm done.\n\n924\n00:44:18,470 --> 00:44:20,310\nWow, you must have a big,\nold profile on here.\n\n925\n00:44:20,310 --> 00:44:21,335\nI don't know.\n>> That's right.\n\n926\n00:44:21,335 --> 00:44:23,937\n>> [LAUGH]\n>> It's all my New Kids on the Block\n\n927\n00:44:23,937 --> 00:44:26,800\nwallpaper just having in Downloads.\n\n928\n00:44:26,800 --> 00:44:30,570\n>> [LAUGH] Darn roaming profiles.\n\n929\n00:44:30,570 --> 00:44:32,587\n>> All my Shakira MP3s.\n\n930\n00:44:32,587 --> 00:44:33,394\n>> [LAUGH].\n\n931\n00:44:33,394 --> 00:44:37,920\n>> And [LAUGH]\n>> Let's all flip over to the desktop\n\n932\n00:44:37,920 --> 00:44:42,210\nhere, open up Internet Explorer and\nI am going to stop that.\n\n933\n00:44:42,210 --> 00:44:46,640\nNot worried about that and\n\n934\n00:44:46,640 --> 00:44:50,670\nI am just going to navigate to,\nwe didn't secure that page.\n\n935\n00:44:50,670 --> 00:44:55,854\nSo it's just going to be\n\n936\n00:44:55,854 --> 00:45:06,765\nhttp:4/4/adrms.it.lab.itpro.tv.\n\n937\n00:45:06,765 --> 00:45:09,895\nIt's just got that default webpage there.\n\n938\n00:45:09,895 --> 00:45:13,845\nAnd now, it makes it easier to add\nit if I just navigate to that page.\n\n939\n00:45:13,845 --> 00:45:17,515\nGo over here to my Security tab,\ngo to Local Intranet and click Sites.\n\n940\n00:45:19,075 --> 00:45:24,005\nAnd then Advanced, and then Add and\n\n941\n00:45:24,005 --> 00:45:28,770\nthen Close, and Ok and Ok.\n\n942\n00:45:28,770 --> 00:45:33,580\nAll right, so once we've got that done,\nnow I need to create some content.\n\n943\n00:45:33,580 --> 00:45:40,917\nSo I'm going to fire up Word.\n\n944\n00:45:40,917 --> 00:45:43,035\nThat super fast search\nengine of Microsoft.\n\n945\n00:45:43,035 --> 00:45:44,466\n>> [LAUGH]\n>> And\n\n946\n00:45:44,466 --> 00:45:48,405\nthey wonder why Bing is\nsuch a great search engine.\n\n947\n00:45:48,405 --> 00:45:50,840\n>> [LAUGH]\n>> Personal favorite, huh?\n\n948\n00:45:50,840 --> 00:45:52,430\n>> It's a good thing Jay's\nnot here to hear that.\n\n949\n00:45:52,430 --> 00:45:53,130\nHe would-\n>> [LAUGH] I know.\n\n950\n00:45:53,130 --> 00:45:54,980\nHe is a Bing fan, isn't he?\n\n951\n00:45:54,980 --> 00:45:57,263\n>> He's like a Bing evangelist or\nsomething, yeah.\n\n952\n00:45:57,263 --> 00:46:01,160\n[LAUGH] All right, let me get rid of\nthe first time Don has run office here, so\n\n953\n00:46:01,160 --> 00:46:03,340\nI've just got a couple of\nlittle wizards to kill.\n\n954\n00:46:03,340 --> 00:46:05,218\n>> That's right,\nI'm a Google Docs kind of guy.\n\n955\n00:46:05,218 --> 00:46:09,780\n>> [LAUGH] And I am going to go ahead and\ncreate a blank document and\n\n956\n00:46:09,780 --> 00:46:13,160\nno I'm not using pirated software,\njust didn't feel like activating it.\n\n957\n00:46:13,160 --> 00:46:21,720\nSo I am going to say this is a protected\ndocument, or something along those lines.\n\n958\n00:46:21,720 --> 00:46:26,240\nAnd then all the user has to do\nis come over here to File, and\n\n959\n00:46:26,240 --> 00:46:30,395\nthen Protect Document,\nand then Restrict Access.\n\n960\n00:46:30,395 --> 00:46:34,375\nAnd I haven't done this before so\nI need to connect to DRM services and\n\n961\n00:46:34,375 --> 00:46:35,165\nget templates.\n\n962\n00:46:36,935 --> 00:46:40,055\nAnd it should retrieve the templates\nfrom the server, it's also going to,\n\n963\n00:46:40,055 --> 00:46:42,935\nat this point it's going\nto verify my identity.\n\n964\n00:46:44,640 --> 00:46:47,990\nOh doggone it, and I forgot to\ngive you an email address, Don.\n\n965\n00:46:47,990 --> 00:46:48,990\n>> Oh man.\n\n966\n00:46:48,990 --> 00:46:50,190\n>> Can you believe that?\n\n967\n00:46:50,190 --> 00:46:52,380\nWhere did I put you in, employees?\n\n968\n00:46:52,380 --> 00:46:55,780\n>> While he's adding an email address\nto me, the idea here is that we create\n\n969\n00:46:55,780 --> 00:46:59,526\nmultiple templates for all the different\nscenarios our end users needs.\n\n970\n00:46:59,526 --> 00:47:06,750\nSo we only without print,\nprint one's expires in 20 days, whatever.\n\n971\n00:47:06,750 --> 00:47:09,810\nYou create these different templates so\nall your end users have to do is go to\n\n972\n00:47:09,810 --> 00:47:13,880\nRestrict Document and pick the template\nthat suits their need for them.\n\n973\n00:47:13,880 --> 00:47:15,420\nAnd you might even create those yourself.\n\n974\n00:47:15,420 --> 00:47:19,450\nYou might have various templates\nthat are required by regulation or\n\n975\n00:47:19,450 --> 00:47:22,850\nsomething and you can create each\none of those and have them in place.\n\n976\n00:47:22,850 --> 00:47:25,140\nSo in our case, we just have one template,\n\n977\n00:47:25,140 --> 00:47:27,310\nwhich is what he's working\non retrieving here.\n\n978\n00:47:27,310 --> 00:47:28,610\n>> Exactly.\n\n979\n00:47:28,610 --> 00:47:31,490\nNow we got some email addresses for\nthose guys.\n\n980\n00:47:31,490 --> 00:47:33,550\nSo, we'll try that one more time.\n\n981\n00:47:33,550 --> 00:47:37,790\n>> Do you have to log out and\nlog back in for that to work, or no?\n\n982\n00:47:37,790 --> 00:47:38,830\n>> I don't think so.\n\n983\n00:47:38,830 --> 00:47:43,250\nI think it's gonna hit Active Directory\nas it goes and verify that and find out.\n\n984\n00:47:43,250 --> 00:47:43,760\nYep, there we go.\n\n985\n00:47:43,760 --> 00:47:47,450\nSo now what it's done is it went and\nretrieved the templates, and\n\n986\n00:47:47,450 --> 00:47:50,690\nnow I should see my template,\nand there is my read only.\n\n987\n00:47:50,690 --> 00:47:53,010\nThey give us this default\nrestricted access.\n\n988\n00:47:53,010 --> 00:47:55,782\nIf they do restricted access,\nthis is where they get to pick, right?\n\n989\n00:47:55,782 --> 00:47:58,708\nit's not a template, they've got\nto manually decided, all right,\n\n990\n00:47:58,708 --> 00:48:00,442\nwho am I going to give read permission to,\n\n991\n00:48:00,442 --> 00:48:03,137\nwho am I going to give change\npermission to and things like that.\n\n992\n00:48:03,137 --> 00:48:06,899\nAnd that might be fine but usually,\nI want to make it easy on my end user.\n\n993\n00:48:06,899 --> 00:48:09,577\nI want to make, as Don was saying,\nthose different templates for\n\n994\n00:48:09,577 --> 00:48:12,031\ndifferent purposes, and\nthey just pick it and that's it.\n\n995\n00:48:12,031 --> 00:48:12,790\nAll right?\n\n996\n00:48:12,790 --> 00:48:17,720\nThey're going to, now Don, in this case,\ncreated the document so he's the owner.\n\n997\n00:48:17,720 --> 00:48:18,350\nSo I need to.\n\n998\n00:48:18,350 --> 00:48:20,110\n>> And there's that description\nthat you typed in so\n\n999\n00:48:20,110 --> 00:48:22,230\nthe end user knows what\nthey just picked too.\n\n1000\n00:48:22,230 --> 00:48:23,870\nRight?\nSo they can see, read only, access,\n\n1001\n00:48:23,870 --> 00:48:24,760\nno copy, or print.\n\n1002\n00:48:24,760 --> 00:48:26,460\n>> Exactly, I like it.\n\n1003\n00:48:26,460 --> 00:48:29,790\nSo then if I go back out here and\nlet's save this document.\n\n1004\n00:48:31,870 --> 00:48:32,940\nOops, that's the wrong menu.\n\n1005\n00:48:32,940 --> 00:48:34,610\nI was gonna say what?\n\n1006\n00:48:34,610 --> 00:48:38,370\nI'm just gonna save my\nremote desktop group there.\n\n1007\n00:48:38,370 --> 00:48:42,490\nAnd let me put this somewhere that\nthe other users will have access to so\n\n1008\n00:48:42,490 --> 00:48:48,270\nI've got another share set up,\ndoc share I think it was called.\n\n1009\n00:48:50,400 --> 00:48:52,888\nThen I'll just call it,\nI'll leave that there.\n\n1010\n00:48:52,888 --> 00:48:56,819\n>> [LAUGH] Our protected content\nis all in the file name.\n\n1011\n00:48:56,819 --> 00:48:58,780\n>> [LAUGH] That's super secret, isn't it?\n\n1012\n00:48:58,780 --> 00:49:00,700\nWe'll just call it secret doc.\n\n1013\n00:49:00,700 --> 00:49:03,850\nAll right.\n\n1014\n00:49:03,850 --> 00:49:05,820\nAnd I'll click Save.\n\n1015\n00:49:05,820 --> 00:49:07,260\nAll right, there we go.\n\n1016\n00:49:07,260 --> 00:49:09,350\nAnd I've got this View Permission up here.\n\n1017\n00:49:09,350 --> 00:49:12,310\nAnd because, again, because Don's is\nthe account that created this file,\n\n1018\n00:49:12,310 --> 00:49:14,420\nyou can see he has full control.\n\n1019\n00:49:15,910 --> 00:49:19,689\nRight?\nNow if I log off Oh,\n\n1020\n00:49:19,689 --> 00:49:20,860\nthat's not going to work.\n\n1021\n00:49:20,860 --> 00:49:21,890\nSomething wrong with this console.\n\n1022\n00:49:21,890 --> 00:49:23,760\nIt doesn't like me logging off.\n\n1023\n00:49:23,760 --> 00:49:26,760\nI'll get an error about a minute from\nnow saying unable to log you off.\n\n1024\n00:49:28,418 --> 00:49:32,610\nAnd I'm gonna log back on as,\nlet's do Nate,\n\n1025\n00:49:32,610 --> 00:49:34,040\nI think he already has a profile on here.\n\n1026\n00:49:36,170 --> 00:49:37,390\nWait who did we give access to?\n\n1027\n00:49:37,390 --> 00:49:39,060\nWe gave it, oh,\nwe gave it to the executives.\n\n1028\n00:49:39,060 --> 00:49:40,460\nSo let me do Ronnie.\n\n1029\n00:49:41,490 --> 00:49:43,251\nRonnie is in that executives group.\n\n1030\n00:49:47,233 --> 00:49:50,115\nAnd next time I'll remember you guys,\nI apologize,\n\n1031\n00:49:50,115 --> 00:49:52,245\nI should have logged on as these peeps.\n\n1032\n00:49:52,245 --> 00:49:53,665\n>> There is your unable to log in message.\n\n1033\n00:49:53,665 --> 00:49:56,815\n>> Unable to log off, oh wait, I've\nalready logged off and logged back on.\n\n1034\n00:49:56,815 --> 00:49:59,505\n>> Yeah, the first time you log into a\nWindows 8 machine it's got to create your\n\n1035\n00:49:59,505 --> 00:50:03,105\nuser profile and it does some crazy stuff\nit didn't used to because of the new\n\n1036\n00:50:03,105 --> 00:50:04,680\nWindows store and all of that.\n\n1037\n00:50:04,680 --> 00:50:06,830\nSo it does take a lot longer to\nget that initial profile going.\n\n1038\n00:50:06,830 --> 00:50:08,620\n>> It does.\nAnd these guys are chapped because\n\n1039\n00:50:08,620 --> 00:50:10,520\nI don't have Internet access\non these virtual machines, so\n\n1040\n00:50:10,520 --> 00:50:12,050\nthey can't connect to the store.\n\n1041\n00:50:12,050 --> 00:50:13,525\nSo it's really not\na happy camper right now.\n\n1042\n00:50:13,525 --> 00:50:15,610\n>> Yeah, gotta get that store.\n\n1043\n00:50:15,610 --> 00:50:18,672\nHow else are you supposed to\nplay Candy Crush or whatever.\n\n1044\n00:50:18,672 --> 00:50:20,278\n[LAUGH]\n>> I know and Mahjong and all that.\n\n1045\n00:50:20,278 --> 00:50:20,970\n>> [LAUGH]\n>> Man,\n\n1046\n00:50:20,970 --> 00:50:22,400\nall the different solitaires they've got.\n\n1047\n00:50:22,400 --> 00:50:23,965\n>> So many productivity apps.\n\n1048\n00:50:23,965 --> 00:50:25,330\n>> [LAUGH]\n>> Like Words With Friends.\n\n1049\n00:50:25,330 --> 00:50:25,960\n>> It's growing though.\n\n1050\n00:50:25,960 --> 00:50:27,260\nRight?\nI mean, they're getting more and\n\n1051\n00:50:27,260 --> 00:50:28,180\nmore apps.\n\n1052\n00:50:28,180 --> 00:50:28,940\n>> No, it's not.\n\n1053\n00:50:28,940 --> 00:50:30,520\n>> No, not really.\n[LAUGH] You know, I looked the other day.\n\n1054\n00:50:30,520 --> 00:50:32,260\nI was like, all right,\nlet me check, it's been a while.\n\n1055\n00:50:32,260 --> 00:50:34,580\nLet me go look and see if there\nare any cool apps that are out.\n\n1056\n00:50:34,580 --> 00:50:36,960\nYeah, I came back with nothing.\n\n1057\n00:50:36,960 --> 00:50:37,906\n>> I haven't looked in months.\n\n1058\n00:50:37,906 --> 00:50:38,531\n>> [LAUGH]\n>> Yeah, I just\n\n1059\n00:50:39,950 --> 00:50:40,870\n>> It's just, I don't know.\n\n1060\n00:50:40,870 --> 00:50:41,560\n>> It's tough.\n\n1061\n00:50:41,560 --> 00:50:43,830\nIt's tough to kick of\nan app store these days.\n\n1062\n00:50:43,830 --> 00:50:46,950\nYou know, when you've got Apple\nwith such a huge head start.\n\n1063\n00:50:46,950 --> 00:50:47,660\n>> Right.\nYeah.\n\n1064\n00:50:47,660 --> 00:50:52,080\n>> And Google with such a good customer\nbase that it's tough for anybody.\n\n1065\n00:50:52,080 --> 00:50:52,650\n>> It is.\n>> It's like little\n\n1066\n00:50:52,650 --> 00:50:53,830\nBlackberries going through.\n\n1067\n00:50:53,830 --> 00:50:54,330\n>> Yeah.\n\n1068\n00:50:56,330 --> 00:50:57,060\nAll right.\n\n1069\n00:50:57,060 --> 00:50:58,930\nSo we'll get Ronnie logged in here, and\n\n1070\n00:50:58,930 --> 00:51:03,590\nwe'll see what happens when he tries\nto open up this protected content.\n\n1071\n00:51:03,590 --> 00:51:06,550\n>> Cool thing on Ronnie's side,\non my side, for\n\n1072\n00:51:06,550 --> 00:51:10,240\nthe Don account we had to go in and turn\non all our mess, had to get the template.\n\n1073\n00:51:10,240 --> 00:51:11,410\nRight?\nAnd then we had to apply it.\n\n1074\n00:51:11,410 --> 00:51:15,410\nSo, as the user that was encoding it,\nwe had to do a little bit of work, but\n\n1075\n00:51:15,410 --> 00:51:17,315\non Ronnie's side he doesn't\nhave to do anything.\n\n1076\n00:51:17,315 --> 00:51:21,525\nWhen he opens that document Word\nis gonna see that it's got RMS.\n\n1077\n00:51:21,525 --> 00:51:26,537\nAnd in the security stamp on that file\nit says hey, this is protected with RMS.\n\n1078\n00:51:26,537 --> 00:51:28,717\nHere is the server you can talk to,\n\n1079\n00:51:28,717 --> 00:51:31,250\nhere is the information you\nneed to be able to open it.\n\n1080\n00:51:31,250 --> 00:51:32,580\nGo talk to the server.\n\n1081\n00:51:32,580 --> 00:51:35,136\nSo, Ronnie doesn't have to\ndo any prep work at all.\n\n1082\n00:51:35,136 --> 00:51:36,820\n>> Right.\n>> At least that I remember.\n\n1083\n00:51:36,820 --> 00:51:38,970\n>> Nope.\n>> And he can just fire the document open,\n\n1084\n00:51:38,970 --> 00:51:42,630\nand it'll check for that license,\nand if he gets the license, great.\n\n1085\n00:51:42,630 --> 00:51:44,340\nIf he doesn't,\nthen he won't even be able to open.\n\n1086\n00:51:46,020 --> 00:51:46,740\n>> Exactly, so, we'll see here.\n\n1087\n00:51:46,740 --> 00:51:49,050\nI'll try just opening up Word,\n\n1088\n00:51:49,050 --> 00:51:50,984\nget rid of all those crazy\nwizards that are gonna pop up.\n\n1089\n00:51:50,984 --> 00:51:56,592\n[SOUND]\n>> Ask me later,\n\n1090\n00:51:56,592 --> 00:51:58,930\nit should say annoy me later.\n\n1091\n00:52:00,100 --> 00:52:01,142\n>> Yeah it should say.\n\n1092\n00:52:01,142 --> 00:52:07,773\nAll right lets see here, if I'm going to\nbrowse, We store that up in that share.\n\n1093\n00:52:12,835 --> 00:52:14,553\nI'll just double click on that document.\n\n1094\n00:52:18,385 --> 00:52:21,614\nAnd now what's doing, see here what\nit's going to say to create and\n\n1095\n00:52:21,614 --> 00:52:23,440\nconsume I have to have a certificate.\n\n1096\n00:52:23,440 --> 00:52:24,730\nI do not have one yet so\n\n1097\n00:52:24,730 --> 00:52:28,570\nto verify my credentials and\ndownload current policies and permissions.\n\n1098\n00:52:28,570 --> 00:52:30,350\nSo I'm gonna go ahead and\nlet it do that for me.\n\n1099\n00:52:32,090 --> 00:52:35,840\n>> The word knows that it's protected,\nnow it's reaching out to get that license.\n\n1100\n00:52:37,675 --> 00:52:39,950\nAnd uh-oh.\n\n1101\n00:52:39,950 --> 00:52:41,540\n>> Ronnie's username,\nRonnie is not in there.\n\n1102\n00:52:41,540 --> 00:52:43,010\nWho did I give access to?\n\n1103\n00:52:43,010 --> 00:52:43,790\nThe executives.\n\n1104\n00:52:43,790 --> 00:52:44,290\nRight?\n\n1105\n00:52:45,300 --> 00:52:46,188\nWell that's a good option to.\n\n1106\n00:52:46,188 --> 00:52:47,380\nI was gonna show you this anyway.\n\n1107\n00:52:47,380 --> 00:52:49,930\nThis is what happens when somebody\ntries to access the content and\n\n1108\n00:52:49,930 --> 00:52:52,050\nthey do not have permissions.\n\n1109\n00:52:52,050 --> 00:52:54,060\nLet's go check that policy real quick.\n\n1110\n00:52:55,080 --> 00:52:58,240\nAnd we'll find out that one, we'll find\nout if Ronnie's in that executives group.\n\n1111\n00:53:01,189 --> 00:53:03,122\nYeah, he's in executives.\n\n1112\n00:53:03,122 --> 00:53:05,590\nWhy is it not liking that?\n\n1113\n00:53:05,590 --> 00:53:06,720\nWhat did I do?\n\n1114\n00:53:06,720 --> 00:53:07,730\n>> You ruined everything.\n\n1115\n00:53:07,730 --> 00:53:10,420\n>> I did.\n>> This is why we can't have\n\n1116\n00:53:10,420 --> 00:53:11,045\nnice things, man.\n\n1117\n00:53:11,045 --> 00:53:14,720\n>> [LAUGH]\n>> Who did I give access to here.\n\n1118\n00:53:14,720 --> 00:53:15,842\nLet's see.\n\n1119\n00:53:15,842 --> 00:53:22,060\nUser rights,executives at ITProTV,\nI gave them view permissions.\n\n1120\n00:53:22,060 --> 00:53:23,662\nDid I get that in there right?\n\n1121\n00:53:23,662 --> 00:53:27,424\nExecutives at lab.itpro.tv.\n\n1122\n00:53:27,424 --> 00:53:31,318\nLooks correct. Interesting.\nLet's try that one more time.\n\n1123\n00:53:37,703 --> 00:53:39,980\n>> Did Ronnie have a local\naccount on that computer?\n\n1124\n00:53:39,980 --> 00:53:43,550\nDoes it possibly open the login with\na local account instead of a domain?\n\n1125\n00:53:43,550 --> 00:53:45,050\n>> No, I only made that main account,\nI'm sure.\n\n1126\n00:53:45,050 --> 00:53:55,020\nWe'll double check it here but\n>> It's probably just because it's Ronnie.\n\n1127\n00:53:55,020 --> 00:53:55,660\n>> Probably.\n>> We\n\n1128\n00:53:55,660 --> 00:53:57,348\ndon't give Ronnie access\nto anything around here.\n\n1129\n00:53:57,348 --> 00:53:59,150\n>> You cannot be accessed using\nyour current credentials,\n\n1130\n00:53:59,150 --> 00:54:01,760\nyou might wanna use your Microsoft\naccount to access this content.\n\n1131\n00:54:01,760 --> 00:54:03,916\nSo sure enough something,\nit's not liking something there.\n\n1132\n00:54:08,525 --> 00:54:10,530\nI'm not exactly sure what.\n\n1133\n00:54:12,690 --> 00:54:13,990\n>> So, we have a failure like this,\n\n1134\n00:54:13,990 --> 00:54:16,680\nit's usually caused by one\nof a few possibilities.\n\n1135\n00:54:16,680 --> 00:54:17,280\nRight?\n\n1136\n00:54:17,280 --> 00:54:20,840\nIt could be paused by\na typo in one of the URLs.\n\n1137\n00:54:20,840 --> 00:54:22,160\nRight?\nBecause, we had to put that URL for\n\n1138\n00:54:22,160 --> 00:54:26,140\nthe phone home address\nthat asrms.lab.itpro.tv.\n\n1139\n00:54:26,140 --> 00:54:27,820\nSo we could have a typo there,\n\n1140\n00:54:27,820 --> 00:54:31,370\nwe could have a typo in our group name or\nour whatever.\n\n1141\n00:54:31,370 --> 00:54:33,137\nSo now we get to start that fun process.\n\n1142\n00:54:33,137 --> 00:54:34,360\n>> Right.\n>> Where we just go back and\n\n1143\n00:54:34,360 --> 00:54:37,900\nverify and look and\nsee if we can hunt that one down.\n\n1144\n00:54:37,900 --> 00:54:38,620\n>> Let's see real quick.\n\n1145\n00:54:38,620 --> 00:54:40,896\n>> You know, Mike,\nwe are already over in this segment.\n\n1146\n00:54:40,896 --> 00:54:41,840\n>> Okay.\nSo why don't we do this,\n\n1147\n00:54:41,840 --> 00:54:44,270\nwhy don't we stop and take a break and\nyou can hunt down the issue.\n\n1148\n00:54:44,270 --> 00:54:47,430\nAnd when we get back,\nwe'll show you guys where the mistake was.\n\n1149\n00:54:47,430 --> 00:54:49,040\nIt's almost always just a simple typo.\n\n1150\n00:54:49,040 --> 00:54:51,115\n>> The way I type, yeah, most likely.\n\n1151\n00:54:51,115 --> 00:54:52,950\n[LAUGH]\n>> It could be network connectivity,\n\n1152\n00:54:52,950 --> 00:54:54,350\nlike if we couldn't contact the RMS.\n\n1153\n00:54:54,350 --> 00:54:55,340\nBut they'll normally tell us.\n\n1154\n00:54:55,340 --> 00:54:58,020\nAnd then we wouldn't have been\nable to see that network share.\n\n1155\n00:54:58,020 --> 00:55:00,340\n>> Yeah.\n>> So I don't think it's network side.\n\n1156\n00:55:00,340 --> 00:55:02,050\nMore than likely a typo.\n\n1157\n00:55:02,050 --> 00:55:03,410\nAll right, we'll stop and take a break.\n\n1158\n00:55:03,410 --> 00:55:05,570\nWhen we get back, we'll wrap up RMS, and\n\n1159\n00:55:05,570 --> 00:55:07,770\nthen we have some federation\nservice to talk about to.\n\n1160\n00:55:07,770 --> 00:55:11,468\nSo, stay tuned, we'll be back in a few.\n\n1161\n00:55:11,468 --> 00:55:18,858\n[SOUND] All right,\nwelcome back, everybody.\n\n1162\n00:55:18,858 --> 00:55:19,883\nSo during the break.\n\n1163\n00:55:19,883 --> 00:55:22,060\n[LAUGH]\n>> I almost forgot about that.\n\n1164\n00:55:22,060 --> 00:55:24,649\n>> Mike went through troubleshooting\nthe issue with RMS and,\n\n1165\n00:55:24,649 --> 00:55:25,952\nlike, almost all mistakes.\n\n1166\n00:55:25,952 --> 00:55:27,858\n>> [LAUGH]\n>> It turned out to be something very,\n\n1167\n00:55:27,858 --> 00:55:28,500\nvery simple.\n\n1168\n00:55:28,500 --> 00:55:30,000\nIt's actually more embarrassing,\n\n1169\n00:55:30,000 --> 00:55:32,130\nbecause you specifically said how to not\n>> Right\n\n1170\n00:55:32,130 --> 00:55:33,080\n>> Let that happen just moments\n\n1171\n00:55:33,080 --> 00:55:33,692\nbefore the error happened.\n\n1172\n00:55:33,692 --> 00:55:35,700\n>> [LAUGH]\n>> So Mike why don't you take\n\n1173\n00:55:35,700 --> 00:55:37,770\nit from here and show them what's around\n>> All right, yeah.\n\n1174\n00:55:37,770 --> 00:55:41,660\nWhat I forgot to do, remember how we said\nwe had to add that admrs.lab.itpro.tv\n\n1175\n00:55:41,660 --> 00:55:44,350\nto their local internet site in\ntheir internet explorer settings.\n\n1176\n00:55:44,350 --> 00:55:46,770\nAnd we also said how normally\nwe do that through group policy,\n\n1177\n00:55:46,770 --> 00:55:48,680\nwe don't have to do it\non every single user.\n\n1178\n00:55:48,680 --> 00:55:51,030\nAnd yeah, like a bonehead,\n[LAUGH] I forgot and\n\n1179\n00:55:51,030 --> 00:55:52,480\ndid not do it on Ronnie's account.\n\n1180\n00:55:52,480 --> 00:55:55,430\nSo that's why I was unable to\nconnect to them on our server.\n\n1181\n00:55:55,430 --> 00:55:59,260\nLike I was saying, it was not letting\nme activate the controls needed\n\n1182\n00:55:59,260 --> 00:56:03,200\nto process and\ngenerate that certificate, so.\n\n1183\n00:56:03,200 --> 00:56:05,303\n>> That's why it was\nworking under my account,\n\n1184\n00:56:05,303 --> 00:56:08,911\nbecause we had added it to local internet,\nbut then on Ronnie's we hadn't.\n\n1185\n00:56:08,911 --> 00:56:11,798\nAnd it just goes to show you the GPO is\nthe better way to go cause then you don't\n\n1186\n00:56:11,798 --> 00:56:13,710\nhave to worry about it for\neach individual usage.\n\n1187\n00:56:13,710 --> 00:56:14,438\n>> Exactly.\n\n1188\n00:56:14,438 --> 00:56:16,676\nSo now that I've added that,\nI won't show you that again.\n\n1189\n00:56:16,676 --> 00:56:19,047\nYou guys know how to add a site\nto your local intranet site.\n\n1190\n00:56:19,047 --> 00:56:25,172\nI should be able to navigate over to that\nshare and try to open up that document.\n\n1191\n00:56:25,172 --> 00:56:28,239\nAnd this time-\n>> [LAUGH] Watch, we get the error again,\n\n1192\n00:56:28,239 --> 00:56:29,540\nthat would be absolutely funny.\n\n1193\n00:56:29,540 --> 00:56:30,155\n>> I know, right?\n\n1194\n00:56:30,155 --> 00:56:31,136\n[LAUGH] All right.\n\n1195\n00:56:31,136 --> 00:56:32,210\n[LAUGH] All right.\n\n1196\n00:56:32,210 --> 00:56:35,404\n>> There we go.\n>> Ronnie gets a very clear message,\n\n1197\n00:56:35,404 --> 00:56:36,080\nright.\n\n1198\n00:56:36,080 --> 00:56:41,878\nThat this is a protected document and\nthat it is read only, right, so he knows.\n\n1199\n00:56:41,878 --> 00:56:45,223\n>> If I try to delete any of this content,\nif I try to type anything, nothing's\n\n1200\n00:56:45,223 --> 00:56:48,710\nhappening here, I promise you I'm\ntapping crazy on my keyboard right now.\n\n1201\n00:56:48,710 --> 00:56:50,610\n>> Well, and look at the menu bar, right?\n\n1202\n00:56:50,610 --> 00:56:54,290\n>> It's all gone, right,\neverything's gone, so I'll log right out.\n\n1203\n00:56:54,290 --> 00:56:57,950\nIf I click view permissions\nI can see that I have view.\n\n1204\n00:56:57,950 --> 00:56:59,760\nNo edit, no copy, no print.\n\n1205\n00:56:59,760 --> 00:57:04,830\nSo I can't select this text and\ntry to right click on it.\n\n1206\n00:57:04,830 --> 00:57:06,990\nNotice copy's grayed out.\n\n1207\n00:57:06,990 --> 00:57:09,343\nEven if I try to do a snippet.\n\n1208\n00:57:13,871 --> 00:57:18,226\nOf that content and I'm thinking,\nI'm going to get around it, watch this,\n\n1209\n00:57:18,226 --> 00:57:20,290\nthey can't stop me.\n\n1210\n00:57:20,290 --> 00:57:23,870\nNotice my document's gone,\nit won't let me.\n\n1211\n00:57:23,870 --> 00:57:26,580\nAs soon as I fire up that Snipping Tool.\n\n1212\n00:57:26,580 --> 00:57:27,690\n>> It grabs a grey screen.\n\n1213\n00:57:27,690 --> 00:57:29,060\n>> Yeah.\nI get a grey screen.\n\n1214\n00:57:29,060 --> 00:57:30,200\nThe document is gone.\n\n1215\n00:57:30,200 --> 00:57:31,940\nThere's nothing to capture there.\n\n1216\n00:57:31,940 --> 00:57:33,270\nPrint screen's gonna do the same thing.\n\n1217\n00:57:33,270 --> 00:57:34,550\nIt's gonna come out as a blank.\n\n1218\n00:57:34,550 --> 00:57:39,470\nSo no way to get access or\nno way to modify.\n\n1219\n00:57:39,470 --> 00:57:41,920\nTry to make a copy of it and\nmodify the copy, everything like that.\n\n1220\n00:57:42,930 --> 00:57:46,650\n>> So if this looks like a really\ncool service, well it is.\n\n1221\n00:57:46,650 --> 00:57:48,280\nWhy hasn't it caught on?\n\n1222\n00:57:48,280 --> 00:57:50,480\nThe main reason it hasn't caught on is,\n\n1223\n00:57:50,480 --> 00:57:52,830\nit's really just supporting\nMicrosoft Office.\n\n1224\n00:57:52,830 --> 00:57:57,630\nSo all of our Office documents and emails\nwritten in Microsoft Outlook, as long as\n\n1225\n00:57:57,630 --> 00:58:00,060\nthey're being received by somebody\nwho's also running Microsoft Outlook,\n\n1226\n00:58:00,060 --> 00:58:02,760\nit works great and\nit really runs wonderfully.\n\n1227\n00:58:02,760 --> 00:58:05,420\nSo in a Microsoft-only world,\nit's perfect.\n\n1228\n00:58:05,420 --> 00:58:08,850\nIf you start dealing with\ncross-platform compatibility though,\n\n1229\n00:58:08,850 --> 00:58:10,020\nit dies really quick.\n\n1230\n00:58:10,020 --> 00:58:14,270\nAnd all of a sudden you've got users who\ncan't view the documents that you created.\n\n1231\n00:58:14,270 --> 00:58:15,650\nThat's the biggest challenge.\n\n1232\n00:58:15,650 --> 00:58:19,260\nSo that may change,\ndown the road but for right now.\n\n1233\n00:58:19,260 --> 00:58:23,410\n>> Get some Google Docs support\nin there or something like that.\n\n1234\n00:58:23,410 --> 00:58:25,590\n>> What they really need\nis Open Office support.\n\n1235\n00:58:25,590 --> 00:58:28,870\nIf they had that,\nthen they'd be in business.\n\n1236\n00:58:28,870 --> 00:58:30,960\nAll right.\nSo that's pretty much it for\n\n1237\n00:58:30,960 --> 00:58:33,280\nrights management services, RMS.\n\n1238\n00:58:33,280 --> 00:58:34,530\nIt's a part of Windows server.\n\n1239\n00:58:34,530 --> 00:58:36,120\nIt's pretty easy to implement.\n\n1240\n00:58:36,120 --> 00:58:38,033\nI mean,\nI guess there were kind of a lot of steps.\n\n1241\n00:58:38,033 --> 00:58:39,127\n>> Yeah.\n>> It wasn't as bad as, like,\n\n1242\n00:58:39,127 --> 00:58:39,904\ncertificate server.\n\n1243\n00:58:39,904 --> 00:58:40,726\n>> But, no absolutely not.\n\n1244\n00:58:40,726 --> 00:58:41,411\nAbsolutely not.\n\n1245\n00:58:41,411 --> 00:58:44,680\nAnd once you get it up, and you remember\nto set up your group policy properly.\n\n1246\n00:58:44,680 --> 00:58:45,870\nI think you're good to go.\n\n1247\n00:58:45,870 --> 00:58:48,638\n[LAUGH]\n>> All right, well speaking of things that\n\n1248\n00:58:48,638 --> 00:58:53,046\ntake a lot of steps to configure, let's\ntake a look at our last technology, right.\n\n1249\n00:58:53,046 --> 00:58:54,772\nThis is really the last objective we\nneed to cover for this education.\n\n1250\n00:58:54,772 --> 00:58:55,978\n>> It is-\n>> And\n\n1251\n00:58:55,978 --> 00:58:59,660\nthat's Active Directory\nFederation Services.\n\n1252\n00:58:59,660 --> 00:59:00,400\nAll right.\n\n1253\n00:59:00,400 --> 00:59:04,680\nNow let's start but just kind of stepping\nback from the table for a second, and\n\n1254\n00:59:04,680 --> 00:59:06,390\nlet's go big picture.\n\n1255\n00:59:06,390 --> 00:59:09,200\nWhat the heck is Active Directory\nfederation services?\n\n1256\n00:59:10,250 --> 00:59:13,080\nWell, it is very, very common.\n\n1257\n00:59:13,080 --> 00:59:17,980\nIn business, that your company is gonna\nneed to interact with other companies,\n\n1258\n00:59:17,980 --> 00:59:21,970\nor organizations that are not a part\nof your Active Directory forest.\n\n1259\n00:59:21,970 --> 00:59:22,570\n>> Right.\n>> And\n\n1260\n00:59:22,570 --> 00:59:25,810\nyou want to be able to give them access to\nresources, or you just wanna be able to\n\n1261\n00:59:25,810 --> 00:59:29,040\nauthenticate them for something, maybe\nlike logging into a website or whatever.\n\n1262\n00:59:29,040 --> 00:59:30,060\n>> Yeah.\nBecause it is primarily for\n\n1263\n00:59:30,060 --> 00:59:31,494\na web-based application.\n\n1264\n00:59:31,494 --> 00:59:32,494\n>> That's one of the yup.\n\n1265\n00:59:32,494 --> 00:59:36,110\n>> But you don't necessarily want them\nto have full user accounts in your\n\n1266\n00:59:36,110 --> 00:59:38,050\nActive Directory and all of that.\n\n1267\n00:59:38,050 --> 00:59:42,080\nBe a participating member inside of your\norganization and you also don't want to\n\n1268\n00:59:42,080 --> 00:59:46,440\nexpose your active directory to the\ninternet or where ever these people are.\n\n1269\n00:59:46,440 --> 00:59:51,750\nSo what we need is some kind of\na system where we can safely\n\n1270\n00:59:51,750 --> 00:59:56,430\nextend our Active Directory outside of\nthe boundary of just PC authentication,\n\n1271\n00:59:56,430 --> 01:00:00,500\nto allow other applications, like web\nbased applications, shopping carts,\n\n1272\n01:00:00,500 --> 01:00:02,450\nwhatever to authenticate against RAD.\n\n1273\n01:00:02,450 --> 01:00:06,340\nAnd these are systems that are not\nnecessarily Microsoft systems.\n\n1274\n01:00:06,340 --> 01:00:10,030\nThat we wanna have a single\nsign on type environment,\n\n1275\n01:00:10,030 --> 01:00:14,405\nwhere we have a sign on that webpage and,\nif it's our end users maybe they have\n\n1276\n01:00:14,405 --> 01:00:16,755\na sign on on the webpage and\nthe same sign on for their PC.\n\n1277\n01:00:16,755 --> 01:00:17,575\n>> Exactly.\n\n1278\n01:00:17,575 --> 01:00:19,975\n>> We want to unite that\nauthentication process.\n\n1279\n01:00:19,975 --> 01:00:23,035\n>> And that's the key there is you know if\nyou're talking about let's say I've got\n\n1280\n01:00:23,035 --> 01:00:25,870\nthis web application\nthat I run on my network.\n\n1281\n01:00:25,870 --> 01:00:30,840\nAnd let's say I'm a, I don't know,\nI'm a raw materials producer.\n\n1282\n01:00:30,840 --> 01:00:34,990\nAnd I've got customers that need to buy\nthose materials to do their manufacturing.\n\n1283\n01:00:34,990 --> 01:00:38,200\nSo I've got a page that they can\ncome to and order these products.\n\n1284\n01:00:38,200 --> 01:00:39,800\nWell that means if they go to their job,\n\n1285\n01:00:39,800 --> 01:00:42,460\nthey log on to their computer\nwith their work account.\n\n1286\n01:00:42,460 --> 01:00:44,900\nWhen they come to my web application,\n\n1287\n01:00:44,900 --> 01:00:47,110\nI would have to create them\nan account in my directory.\n\n1288\n01:00:47,110 --> 01:00:50,250\nThat's another username, another\npassword that they've got to remember.\n\n1289\n01:00:50,250 --> 01:00:53,170\nIf they hire new people they've got to\ncall me up and say hey we've got these two\n\n1290\n01:00:53,170 --> 01:00:56,010\nnew people that we want to allow to\nmake orders and things like that.\n\n1291\n01:00:56,010 --> 01:00:58,180\nCan you add them to your web application?\n\n1292\n01:00:58,180 --> 01:01:00,980\nUsing Federation Services,\nwe can keep everything separate.\n\n1293\n01:01:00,980 --> 01:01:04,370\nI'm in charge of the application or\nwhat we call the resource.\n\n1294\n01:01:04,370 --> 01:01:07,660\nAnd I maintain their web server and\nall of that.\n\n1295\n01:01:07,660 --> 01:01:11,930\nThey would be called the account partner,\nand they maintain their own accounts, and\n\n1296\n01:01:11,930 --> 01:01:15,892\ntheir users like they normally do, and\nI'm just gonna set it up so that my side\n\n1297\n01:01:15,892 --> 01:01:19,365\ntrusts that the authentication that\nhas already occurred on their network.\n\n1298\n01:01:19,365 --> 01:01:21,025\nThey've already logged in at their job,\nright?\n\n1299\n01:01:21,025 --> 01:01:23,765\nTheir domain controllers already\ngiven them an access token.\n\n1300\n01:01:23,765 --> 01:01:27,035\nAnd all we're gonna do is we're gonna\nsay all right I'm gonna start trusting\n\n1301\n01:01:27,035 --> 01:01:29,095\nthat and allow them to come over.\n\n1302\n01:01:29,095 --> 01:01:32,625\nAnd I can still control what level\nof access they have on my end\n\n1303\n01:01:32,625 --> 01:01:34,275\nwithout them having to do anything.\n\n1304\n01:01:34,275 --> 01:01:37,405\nSo the resource partner stays\nin control of the resource.\n\n1305\n01:01:37,405 --> 01:01:40,300\nThe account partner stays\nin control of the accounts.\n\n1306\n01:01:40,300 --> 01:01:44,170\nAnd everybody's happy, they've got\na single sign-on, a nice smooth process.\n\n1307\n01:01:44,170 --> 01:01:47,820\n>> And this is something Microsoft\nhas been working on for a long time.\n\n1308\n01:01:47,820 --> 01:01:50,800\nA lot of Microsoft products\nactually originate internally for\n\n1309\n01:01:50,800 --> 01:01:52,840\nthem to fit some need, right?\n\n1310\n01:01:52,840 --> 01:01:57,530\nSo if you look at Microsoft,\nyou've got their PC, their Windows LS and\n\n1311\n01:01:57,530 --> 01:02:00,060\nOffice Desk top application divisions.\n\n1312\n01:02:00,060 --> 01:02:02,110\nBut they also have things like Hotmail.\n\n1313\n01:02:02,110 --> 01:02:06,100\nAnd when they acquired Hotmail,\nthey were all BSD servers, and\n\n1314\n01:02:06,100 --> 01:02:08,000\nnot running the active directory and\nstuff.\n\n1315\n01:02:08,000 --> 01:02:09,470\nAnd Microsoft needed a way for\n\n1316\n01:02:09,470 --> 01:02:13,740\ntheir web applications to smoothly\nauthenticate and to integrate.\n\n1317\n01:02:13,740 --> 01:02:15,800\nSo they created something internally and\n\n1318\n01:02:15,800 --> 01:02:17,750\nthen rolled it into a product\nthey began to sell.\n\n1319\n01:02:17,750 --> 01:02:22,060\nWhich it used to be Microsoft\nIdentity Integration Server, MIIS.\n\n1320\n01:02:22,060 --> 01:02:23,550\nDid you ever work with that one Mike?\n\n1321\n01:02:23,550 --> 01:02:24,934\n>> No, I did not.\n>> It was a pleasure.\n\n1322\n01:02:24,934 --> 01:02:26,437\n>> [LAUGH]\n>> So in the early days\n\n1323\n01:02:26,437 --> 01:02:27,525\n>> And MIIS,\n\n1324\n01:02:27,525 --> 01:02:29,155\nit was like walking on broken glass.\n\n1325\n01:02:29,155 --> 01:02:33,521\nIt was not a pleasant thing to do,\nit was like eating spinach.\n\n1326\n01:02:33,521 --> 01:02:38,425\n[LAUGH] And so over the years,\nMicrosoft has evolved it,\n\n1327\n01:02:38,425 --> 01:02:41,890\nand made it a lot better, and in fact it's\ngotten to the point now where it's so\n\n1328\n01:02:41,890 --> 01:02:45,870\nstable and good at what it does,\nthat it's no longer a separate product.\n\n1329\n01:02:45,870 --> 01:02:48,450\nNow it's a part of Windows Server and so\n\n1330\n01:02:48,450 --> 01:02:52,040\nthe Microsoft Identity Integration Server\nhas now been discontinued, and\n\n1331\n01:02:52,040 --> 01:02:57,800\nit is now Active Directory Federation\nServices, or Identity Management.\n\n1332\n01:02:57,800 --> 01:03:02,420\nInside of the windows server, and\nthe reason that Microsoft wants to\n\n1333\n01:03:02,420 --> 01:03:06,750\nintegrate is, they've got one particular\nuse case they're pushing really hard,\n\n1334\n01:03:06,750 --> 01:03:09,150\nwhich is if you want to\ngo to Windows Azure.\n\n1335\n01:03:09,150 --> 01:03:12,730\nIf you wanna start putting servers and\nweb applications in Windows Azure, and\n\n1336\n01:03:12,730 --> 01:03:17,020\nyou want to authenticate against your AD,\nyou may not be very comfortable\n\n1337\n01:03:17,020 --> 01:03:20,400\nputting a domain controller for\nyour domain in the cloud.\n\n1338\n01:03:20,400 --> 01:03:24,350\nAnd so, instead you can leverage active\ndirect through federation services and\n\n1339\n01:03:24,350 --> 01:03:28,070\ndo federated identity calls back to\nyour environment to authenticate people.\n\n1340\n01:03:28,070 --> 01:03:29,490\nAnd it works really well, and\n\n1341\n01:03:29,490 --> 01:03:34,980\nit helps to remove that exposure,\nboundary, roadblock, whatever.\n\n1342\n01:03:34,980 --> 01:03:37,260\n>> Yeah.\n>> That obstacle between you and\n\n1343\n01:03:37,260 --> 01:03:39,299\ngiving them your money for\ngoing into the cloud.\n\n1344\n01:03:39,299 --> 01:03:40,610\n>> [LAUGH]\n>> [LAUGH] So they want to\n\n1345\n01:03:40,610 --> 01:03:41,910\nmake that as easy as possible.\n\n1346\n01:03:41,910 --> 01:03:44,340\n>> Absolutely.\n>> So that's their big motivation.\n\n1347\n01:03:44,340 --> 01:03:44,880\n>> Yep.\n\n1348\n01:03:44,880 --> 01:03:47,421\nIt is a rather complex infrastructure.\n\n1349\n01:03:47,421 --> 01:03:49,184\n>> [LAUGH]\n>> There can be a lot of pieces to it.\n\n1350\n01:03:49,184 --> 01:03:50,794\nDepending on what you're trying to do.\n\n1351\n01:03:50,794 --> 01:03:53,740\nWe've talked about Like with the Azure and\nsetting up.\n\n1352\n01:03:53,740 --> 01:03:58,390\nSo we can do single sign on into an\napplication we're having hosted up there.\n\n1353\n01:03:58,390 --> 01:04:01,680\nWe can also do it, as I was saying\nearlier, between two business partners.\n\n1354\n01:04:01,680 --> 01:04:03,500\nWe can set up a federation.\n\n1355\n01:04:03,500 --> 01:04:06,150\nWe would run federation services on\nour end, they would run it on theirs.\n\n1356\n01:04:06,150 --> 01:04:08,460\nAnd we would set up\ntrust policies between.\n\n1357\n01:04:08,460 --> 01:04:13,185\nWe can also do a, what we call a Federated\nWeb SSO, where you're doing it just for\n\n1358\n01:04:13,185 --> 01:04:14,309\nyour own company.\n\n1359\n01:04:14,309 --> 01:04:18,014\nWhere you've got an internal network and\nthen you've got a separate force,\n\n1360\n01:04:18,014 --> 01:04:19,730\nmaybe out there in your perimeter.\n\n1361\n01:04:19,730 --> 01:04:22,598\nAnd you can set up a trust or\na federation between those.\n\n1362\n01:04:22,598 --> 01:04:25,690\nSo, my users that are traveling,\nthey don't have to have a user\n\n1363\n01:04:25,690 --> 01:04:29,243\naccount that they use when they're at\nwork, a separate user account that\n\n1364\n01:04:29,243 --> 01:04:32,766\nthey use when they're outside to\nconnect to those resources in our DMZ.\n\n1365\n01:04:32,766 --> 01:04:36,030\nSo, we can set up a federation\nbetween our own force as well.\n\n1366\n01:04:36,030 --> 01:04:36,710\n>> Yeah.\n\n1367\n01:04:36,710 --> 01:04:39,070\nNow you mentioned the complexity of it.\n\n1368\n01:04:39,070 --> 01:04:39,670\nRight?\n\n1369\n01:04:39,670 --> 01:04:42,000\nLet's talk about the different\ncomponents that are involved.\n\n1370\n01:04:42,000 --> 01:04:42,500\n>> Yeah, right.\n\n1371\n01:04:42,500 --> 01:04:46,770\n>> Now, we have that roll in our server,\nso if we go into our server manager or\n\n1372\n01:04:46,770 --> 01:04:50,490\nwhatever that adds rolls, you'll see\nthe Active Directory Federation Services.\n\n1373\n01:04:50,490 --> 01:04:52,360\nBut there's actually a lot more to it.\n\n1374\n01:04:52,360 --> 01:04:52,890\n>> There is, yeah.\n>> And\n\n1375\n01:04:52,890 --> 01:04:55,290\nit is one of the more\ncomplex things to set up.\n\n1376\n01:04:55,290 --> 01:04:57,230\n>> Yeah.\nYou got that federation server, itself,\n\n1377\n01:04:57,230 --> 01:04:59,450\nwhich is going to be\nthe primary component.\n\n1378\n01:04:59,450 --> 01:05:01,680\nYou've got to have something,\ndepending on what side you are.\n\n1379\n01:05:01,680 --> 01:05:05,250\nIf you're the account partner side, you've\ngot to have some kind of identity stored.\n\n1380\n01:05:05,250 --> 01:05:08,970\nThat could be directory services,\nactive directory domain services.\n\n1381\n01:05:08,970 --> 01:05:10,370\nIt could be LDS.\n\n1382\n01:05:10,370 --> 01:05:11,140\nIt could be,\n\n1383\n01:05:11,140 --> 01:05:13,960\nthere's a couple other options that we\nhave typically in a Windows environment.\n\n1384\n01:05:13,960 --> 01:05:15,490\nWe're talking the main services.\n\n1385\n01:05:15,490 --> 01:05:19,300\nBut then, a lot of times what we want to\ndo is we want to set up a proxy, because I\n\n1386\n01:05:19,300 --> 01:05:24,300\ndon't really want to expose my federation\nservers directly to the internet.\n\n1387\n01:05:24,300 --> 01:05:27,690\nSo we'll keep those federation servers\nback behind us in our intranet, and\n\n1388\n01:05:27,690 --> 01:05:32,970\nthen out in our DMZ we'll\nput a proxy server.\n\n1389\n01:05:32,970 --> 01:05:34,530\nAnd that becomes the connection point.\n\n1390\n01:05:34,530 --> 01:05:36,790\nRight?\nThe middle man to pass through and\n\n1391\n01:05:36,790 --> 01:05:41,870\nthen you've got your web server that has\nto be running the ADFS claimsware agent,\n\n1392\n01:05:41,870 --> 01:05:45,010\nbecause what's going to happen is,\nwhen somebody tries to connect to\n\n1393\n01:05:45,010 --> 01:05:49,480\nthat web application, that agent then\nis going to intercept that call and\n\n1394\n01:05:49,480 --> 01:05:52,140\nrealize that you haven't been\nauthenticated yet, and it's going to\n\n1395\n01:05:52,140 --> 01:05:56,370\nredirect us and start the process, which\nwe'll kind of diagram here in a second.\n\n1396\n01:05:56,370 --> 01:05:59,300\nSo there's right there you've got your,\non the resource side I've got\n\n1397\n01:05:59,300 --> 01:06:04,020\nmy resource federation server, I've got\nmy resource federation proxy server,\n\n1398\n01:06:04,020 --> 01:06:07,090\nI've got my web server\nhosting the web application.\n\n1399\n01:06:07,090 --> 01:06:09,810\nOn the account partner's side\nI've got my account partner or\n\n1400\n01:06:09,810 --> 01:06:11,100\nmy account federation server.\n\n1401\n01:06:11,100 --> 01:06:14,700\nI've got my account federation proxy\nserver if I choose to run one.\n\n1402\n01:06:14,700 --> 01:06:18,546\nAnd I've got my identity store where\nI'm going to get the information and\n\n1403\n01:06:18,546 --> 01:06:19,860\nit's all claims based.\n\n1404\n01:06:19,860 --> 01:06:22,670\nWe're going to be sending claims\nover from one side to other.\n\n1405\n01:06:22,670 --> 01:06:25,850\nThink we've talked about claims\nin another episode a little bit.\n\n1406\n01:06:25,850 --> 01:06:26,450\n>> A little bit.\n\n1407\n01:06:26,450 --> 01:06:27,750\nYeah, not much though.\n\n1408\n01:06:27,750 --> 01:06:32,480\nSo, claims based system is like\na challenge response type system.\n\n1409\n01:06:32,480 --> 01:06:34,520\nThat somebody builds up a request,\n\n1410\n01:06:34,520 --> 01:06:37,330\nor a claim,\na message they send to the other side and\n\n1411\n01:06:37,330 --> 01:06:41,550\nthey initiate a process of validating who\nthey are and exchanging the credentials.\n\n1412\n01:06:41,550 --> 01:06:45,500\nThey're claiming that access\nto gain entry into the system.\n\n1413\n01:06:45,500 --> 01:06:48,490\n>> Yeah, I like thinking of claims\nas a statement about an identity.\n\n1414\n01:06:48,490 --> 01:06:50,810\nAnd it really extends,you know,\nwe've talked about it.\n\n1415\n01:06:50,810 --> 01:06:53,290\nI forget what we were talking about.\n\n1416\n01:06:53,290 --> 01:06:55,630\nWhere, oh we were talking about\ndynamic access control, and\n\n1417\n01:06:55,630 --> 01:07:00,560\nwe talk about how limited with ENFS, we're\nlimited to the SID of your user account,\n\n1418\n01:07:00,560 --> 01:07:04,130\nthe SID of your groups, and\nby using dynamic access control,\n\n1419\n01:07:04,130 --> 01:07:08,530\nwe introduce claims, where I can grab\nany attribute from that user account.\n\n1420\n01:07:08,530 --> 01:07:09,680\nAnd it's the same thing here.\n\n1421\n01:07:09,680 --> 01:07:13,580\nWe're going to be doing claims, so\nI can grab that user's department\n\n1422\n01:07:13,580 --> 01:07:17,340\nfrom their user account and\nI can send that over with the request.\n\n1423\n01:07:17,340 --> 01:07:19,820\nAnd then on the resource partner side,\nI might say,\n\n1424\n01:07:19,820 --> 01:07:24,620\nlook, if they come over with\na claim of Salesperson,\n\n1425\n01:07:24,620 --> 01:07:28,570\nif their department is sales I'll\ngive them view access, all right.\n\n1426\n01:07:28,570 --> 01:07:34,380\nBut if they come over with a Department\nof, I don't know, Procurement\n\n1427\n01:07:34,380 --> 01:07:40,010\nthen they can actually order product\ninstead of just view completed orders.\n\n1428\n01:07:40,010 --> 01:07:43,650\nSo we create claims and\nwe send those over and as I was saying.\n\n1429\n01:07:43,650 --> 01:07:47,450\nThe account partner is still in charge\nof what users are going to get access.\n\n1430\n01:07:47,450 --> 01:07:50,860\nThey're setting the department\nvalues on their user accounts.\n\n1431\n01:07:50,860 --> 01:07:54,350\nBut on the resource partners' side,\nwe're the ones that decide what level\n\n1432\n01:07:54,350 --> 01:07:59,010\nof access they have when they\ncome across with those claims.\n\n1433\n01:07:59,010 --> 01:08:00,630\n>> Now there's a lot involved in this.\n\n1434\n01:08:00,630 --> 01:08:05,800\nMike mentioned like, six different server\ncomponents or we're going to have, this\n\n1435\n01:08:05,800 --> 01:08:09,650\nis obviously, not a technology a small or\nmedium business is going to make use of.\n\n1436\n01:08:09,650 --> 01:08:10,410\n>> Right.\n>> Right.\n\n1437\n01:08:10,410 --> 01:08:13,530\nThis is something that enterprises make\nuse of especially when they're dealing\n\n1438\n01:08:13,530 --> 01:08:15,455\nwith like, b to b,\nbusiness to business transaction.\n\n1439\n01:08:15,455 --> 01:08:16,010\n[INAUDIBLE].\n\n1440\n01:08:16,010 --> 01:08:17,620\nAnd, Mike, you've got a diagram\nthat kinda shows that.\n\n1441\n01:08:17,620 --> 01:08:18,120\nDo you-\n>> I do.\n\n1442\n01:08:18,120 --> 01:08:18,620\n>> Want to show us-\n\n1443\n01:08:18,620 --> 01:08:19,120\n>> I do.\n\n1444\n01:08:19,120 --> 01:08:19,670\n>> What's going on there?\n\n1445\n01:08:19,670 --> 01:08:20,630\n>> You know, I was just thinking.\n\n1446\n01:08:20,630 --> 01:08:21,735\nI don't know if I still have\n\n1447\n01:08:21,735 --> 01:08:23,940\nZoom-It installed on this bad boy.\nOh, I do.\n\n1448\n01:08:23,940 --> 01:08:25,550\n>> It's just pretty legible right there.\n\n1449\n01:08:25,550 --> 01:08:26,250\n>> It is, isn't it?\n\n1450\n01:08:26,250 --> 01:08:29,800\nAnd so, here you can see this is\nbetween two different organizations and\n\n1451\n01:08:29,800 --> 01:08:32,410\nI've got my online retailer\nover here on the right.\n\n1452\n01:08:32,410 --> 01:08:35,550\nAnd I've got my tailspin\ntoys here on the left.\n\n1453\n01:08:35,550 --> 01:08:37,920\nAnd I can see that they\ncreated a Federation Trust.\n\n1454\n01:08:37,920 --> 01:08:41,330\nAnd like all trusts, we just talked\nabout in a previous episode,\n\n1455\n01:08:41,330 --> 01:08:42,640\nthat direction of the arrow, right.\n\n1456\n01:08:42,640 --> 01:08:48,595\nThis is saying that the online\nretailer Trusts Tailspin Toys,\n\n1457\n01:08:48,595 --> 01:08:51,615\nwhich means the access is going to\ngo in the other direction, right?\n\n1458\n01:08:51,615 --> 01:08:54,835\nIt's Tailspin Toys employees\nthat are going to be accessing\n\n1459\n01:08:54,835 --> 01:08:56,175\nthe resource over here.\n\n1460\n01:08:56,175 --> 01:08:59,785\nSo on the online retailer side I can\nsee their resource federation server.\n\n1461\n01:08:59,785 --> 01:09:04,535\nAnd the resource federation server's\nwhere we set up our trust policies.\n\n1462\n01:09:04,535 --> 01:09:08,460\nThen we've got the resource federation\nproxy, and then I've got my web server\n\n1463\n01:09:08,460 --> 01:09:14,410\nthat's hosting whatever application it\nis that I want to give this access to.\n\n1464\n01:09:14,410 --> 01:09:18,340\nAnd then on the account partner side,\nthey have their account federation server.\n\n1465\n01:09:18,340 --> 01:09:22,710\nThey've got their identity store, in this\ncase active directory main services, and\n\n1466\n01:09:22,710 --> 01:09:26,020\nthen they've got their account\nfederation server proxy.\n\n1467\n01:09:26,020 --> 01:09:30,250\nSo a lot of components there,\nanother scenario might be\n\n1468\n01:09:30,250 --> 01:09:33,730\nbefore we get to that ,what\ndid I do with that guy?\n\n1469\n01:09:33,730 --> 01:09:36,120\nWell, I guess that one's a good example.\n\n1470\n01:09:36,120 --> 01:09:39,890\nHere, I've got a single organization,\njust Adventure Works.\n\n1471\n01:09:39,890 --> 01:09:44,610\nSo I've got my internal corporate network\non the right side of this diagram.\n\n1472\n01:09:44,610 --> 01:09:49,330\nAnd I can see my account federation\nserver, my domain controller.\n\n1473\n01:09:49,330 --> 01:09:53,120\nAnd then out here in the DMZ\nwhere my resource is, I've got my\n\n1474\n01:09:53,120 --> 01:09:58,110\nresource federation server, the account\nfederation server proxy for this guy.\n\n1475\n01:09:58,110 --> 01:10:00,040\nMy web server.\n\n1476\n01:10:00,040 --> 01:10:04,464\nAnd they've got a domain control,\nI'm hoping that's an RODC out there.\n\n1477\n01:10:04,464 --> 01:10:07,170\n>> [LAUGH]\n>> That's kind of scary.\n\n1478\n01:10:07,170 --> 01:10:09,630\nAnd so,\n>> Might be a separate domain.\n\n1479\n01:10:09,630 --> 01:10:12,000\nWell, no,\nthey only say one domain don't they?\n\n1480\n01:10:12,000 --> 01:10:13,290\n>> Yeah, they do, don't they?\n\n1481\n01:10:13,290 --> 01:10:14,360\nOr no, no, it's a forest trust.\n\n1482\n01:10:14,360 --> 01:10:15,890\nSo yep,\nthat's a separate forest out there.\n\n1483\n01:10:15,890 --> 01:10:17,760\n>> Okay.\n>> Yep, so that's just a forest in their\n\n1484\n01:10:17,760 --> 01:10:19,620\n>> Perimeter network.\n\n1485\n01:10:19,620 --> 01:10:23,210\nI think this one kind of\nshows it a little bit better.\n\n1486\n01:10:23,210 --> 01:10:27,050\nHere, I'm going between two organizations\nbut I can see the arrows a little better.\n\n1487\n01:10:27,050 --> 01:10:29,880\nSo we can talk about it.\n\n1488\n01:10:29,880 --> 01:10:32,010\nIt's pretty neat the way it works.\n\n1489\n01:10:32,010 --> 01:10:34,915\nWhat's going to happen is I've got my\nclient sitting out here in the internet\n\n1490\n01:10:34,915 --> 01:10:37,720\nand they're going to attempt\nto connect to this web server.\n\n1491\n01:10:37,720 --> 01:10:41,370\nThat's hosting this application over\nhere on the resource partner side.\n\n1492\n01:10:41,370 --> 01:10:44,060\nAnd that's where that agent's going to\nkick in and it's going to say look,\n\n1493\n01:10:44,060 --> 01:10:47,730\nyou've got to have the appropriate\nclaim to gain access to this.\n\n1494\n01:10:47,730 --> 01:10:49,653\nSo it's going to send back a referral and\n\n1495\n01:10:49,653 --> 01:10:53,520\nyou see it's going to bounce over\nto this resource federation server.\n\n1496\n01:10:53,520 --> 01:10:55,740\nThe resource federation server\nthen's going to determine,\n\n1497\n01:10:55,740 --> 01:10:58,730\nhey wait we've got a trust\nset up with these guys.\n\n1498\n01:10:58,730 --> 01:11:03,765\nAnd he's going to tell him\nthat he needs to go back and\n\n1499\n01:11:03,765 --> 01:11:07,360\ntalk to his Home server [INAUDIBLE]\n>> Yeah,\n\n1500\n01:11:07,360 --> 01:11:10,590\nhome server or back to his network.\n\n1501\n01:11:10,590 --> 01:11:13,670\nHe has to authenticate.\n\n1502\n01:11:13,670 --> 01:11:15,180\nSo it's going to authenticate him and\n\n1503\n01:11:15,180 --> 01:11:20,380\nit's going to generate the appropriate\nclaims and I guess that was Step 5.\n\n1504\n01:11:20,380 --> 01:11:24,010\nYeah, comma, I don't know why Step 4\nhas one in each area direction there.\n\n1505\n01:11:24,010 --> 01:11:27,050\nSo Step 5, it tells him, hey,\ngo get authenticated, so\n\n1506\n01:11:27,050 --> 01:11:28,810\nhe talks to the account\nfederation server proxy.\n\n1507\n01:11:28,810 --> 01:11:31,990\nAnd then, it looks like they're\nmissing a step, because at that point,\n\n1508\n01:11:31,990 --> 01:11:36,200\nnow I've got the appropriate token, and\nI would go back to the web server, and\n\n1509\n01:11:36,200 --> 01:11:40,030\nI should gain access, whatever level\nof access that token gives me.\n\n1510\n01:11:40,030 --> 01:11:40,600\n>> Yeah.\n\n1511\n01:11:40,600 --> 01:11:41,820\nAnd on the right side,\n\n1512\n01:11:41,820 --> 01:11:44,705\non the tray research side in this diagram,\nthey don't have a proxy.\n\n1513\n01:11:44,705 --> 01:11:48,360\nRight?\nAnd that's okay because over there,\n\n1514\n01:11:48,360 --> 01:11:51,415\nyou've got your resource server but\nyou don't have your account server.\n\n1515\n01:11:51,415 --> 01:11:52,500\n>> Right.\n>> And the account server is\n\n1516\n01:11:52,500 --> 01:11:53,810\nthe dangerous one.\n\n1517\n01:11:53,810 --> 01:11:57,420\nIf a hacker were to get in to your account\nserver, that's obviously a big deal.\n\n1518\n01:11:57,420 --> 01:12:00,980\nThe resource server,\nthat's where our protected resources are.\n\n1519\n01:12:00,980 --> 01:12:04,630\nBasically where our access is happening,\nand so it's less sensitive because\n\n1520\n01:12:04,630 --> 01:12:07,060\nit's a resource we're already\nmaking available on the internet,\n\n1521\n01:12:07,060 --> 01:12:08,560\nso that's why they're showing it here.\n\n1522\n01:12:08,560 --> 01:12:11,710\nNow you could do a proxy on both sides,\nyou could do no proxy, right?\n\n1523\n01:12:11,710 --> 01:12:14,317\nAt a minimum, though, you're going\nto have two federation servers.\n\n1524\n01:12:14,317 --> 01:12:18,091\nThe resource federation server and\nthe account federation server.\n\n1525\n01:12:18,091 --> 01:12:21,889\nThe resource is where the access happens\nThe account, that's where the user\n\n1526\n01:12:21,889 --> 01:12:25,550\naccounts reside and where the claims\nare actually being generated.\n\n1527\n01:12:25,550 --> 01:12:30,020\nAnd so the end user is passed between the\ntwo while they generate their claim and\n\n1528\n01:12:30,020 --> 01:12:33,260\nthen finally come back and access\nthe resource they were looking to get to.\n\n1529\n01:12:33,260 --> 01:12:36,885\n>> Yep, and it's like we were saying\nearlier, there's a lot of setup involved.\n\n1530\n01:12:36,885 --> 01:12:40,520\nCuz you've got to go and define all these\nclaims that you're going to send over.\n\n1531\n01:12:40,520 --> 01:12:43,200\nLike on the account partner's side, I've\ngot to say, all right I want to send over\n\n1532\n01:12:43,200 --> 01:12:46,150\ntheir department attribute,\nI'm gonna have a claim for that.\n\n1533\n01:12:46,150 --> 01:12:49,248\nMaybe I want to send over some\ngroup membership information.\n\n1534\n01:12:49,248 --> 01:12:49,780\nLike I say,\n\n1535\n01:12:49,780 --> 01:12:53,390\nwe can really pull any attribute from\nactive directory that I want to send over.\n\n1536\n01:12:53,390 --> 01:12:56,414\nOn the resource partner's side,\nthey're gonna process these claims.\n\n1537\n01:12:56,414 --> 01:13:02,200\nAnd remember,\nstill we're separate entities,\n\n1538\n01:13:02,200 --> 01:13:04,580\nso they have to map those claims.\n\n1539\n01:13:04,580 --> 01:13:10,370\nWe might call it D-E-P-T for department,\nthey might call it just department,\n\n1540\n01:13:10,370 --> 01:13:13,520\nthe full word, or\nthey might call it something else.\n\n1541\n01:13:13,520 --> 01:13:16,430\nSo we end up creating these\nmaps to these claims.\n\n1542\n01:13:16,430 --> 01:13:20,890\nWe can do what they call passing\nthrough these LDAP attributes, and\n\n1543\n01:13:20,890 --> 01:13:24,970\nthen we can modify them on the way over\nif we need to because they have to agree.\n\n1544\n01:13:24,970 --> 01:13:26,350\nWe might call it one thing.\n\n1545\n01:13:26,350 --> 01:13:29,521\nThey might call the same\nthing something else, and\n\n1546\n01:13:29,521 --> 01:13:33,510\nwe gotta make sure that the federations\nmap those up correctly.\n\n1547\n01:13:33,510 --> 01:13:37,050\n>> Now, the set up for this,\nlike you said, it is pretty complex.\n\n1548\n01:13:37,050 --> 01:13:41,590\nAnd I know normally during the show,\nwe run through that configuration.\n\n1549\n01:13:42,630 --> 01:13:46,250\nBut it is a prohibitively\nlong configuration.\n\n1550\n01:13:46,250 --> 01:13:48,140\n>> It is,\nit takes a long time to set it up.\n\n1551\n01:13:48,140 --> 01:13:50,100\n>> So, what I want to do\nis I want to recommend for\n\n1552\n01:13:50,100 --> 01:13:52,470\nyou guys, the Microsoft TechNet view labs.\n\n1553\n01:13:52,470 --> 01:13:55,230\nThey're available on Microsoft's site,\nand, let me see,\n\n1554\n01:13:55,230 --> 01:13:57,540\ncan we bring up my computer for a second?\n\n1555\n01:13:57,540 --> 01:14:00,672\nI know, I haven't shared on\nmy computer yet today, so\n\n1556\n01:14:00,672 --> 01:14:03,430\nI'm throwing a monkey\nwrench at Jason here.\n\n1557\n01:14:03,430 --> 01:14:05,250\nThe Microsoft Technet V-labs.\n\n1558\n01:14:05,250 --> 01:14:08,580\nIf you're not familiar with them,\nyou can go to technet.microsoft.com.\n\n1559\n01:14:08,580 --> 01:14:09,960\nThey are absolutely free.\n\n1560\n01:14:09,960 --> 01:14:11,330\nYou can just go to their website.\n\n1561\n01:14:11,330 --> 01:14:12,740\nDo you even have to log in?\n\n1562\n01:14:12,740 --> 01:14:15,490\n>> You do need a Microsoft\naccount I think.\n\n1563\n01:14:15,490 --> 01:14:17,040\n>> But it's free.\n>> But it's free to set that up.\n\n1564\n01:14:17,040 --> 01:14:19,280\n>> So once you have it,\nyou can go to their site.\n\n1565\n01:14:19,280 --> 01:14:22,800\nAnd they have not one,\nbut two, Technet V-labs.\n\n1566\n01:14:22,800 --> 01:14:25,060\nThere's one that's called Windows Server\n\n1567\n01:14:25,060 --> 01:14:29,180\n2012 R2 Implementing\nClaims-Aware Applications.\n\n1568\n01:14:29,180 --> 01:14:31,910\nAnd in that lab they actually have you\n\n1569\n01:14:31,910 --> 01:14:35,910\nset up a little web server with a\nclaims-aware web app, and then you set up\n\n1570\n01:14:35,910 --> 01:14:40,790\nan active directory federation between\ntwo domains to exchange these tokens.\n\n1571\n01:14:40,790 --> 01:14:42,670\nAnd they have another lab,\n\n1572\n01:14:42,670 --> 01:14:47,570\nwhich is called Windows Server\n2012 R2 New Features in ADFS.\n\n1573\n01:14:47,570 --> 01:14:50,640\nNow this is the better of\nthe two labs in my opinion.\n\n1574\n01:14:50,640 --> 01:14:52,920\nIt sounds like it's just\nshowing the new features, but\n\n1575\n01:14:52,920 --> 01:14:55,110\nit actually shows the whole thing.\n\n1576\n01:14:55,110 --> 01:14:58,480\nBut it access the new features which are\nthe ones that are most likely to show up\n\n1577\n01:14:58,480 --> 01:14:59,320\non the exam.\n\n1578\n01:14:59,320 --> 01:14:59,940\n>> Exactly.\n>> And\n\n1579\n01:14:59,940 --> 01:15:01,220\nso\n>> Okay, go ahead.\n\n1580\n01:15:01,220 --> 01:15:03,822\n>> Yeah they're always gonna quiz you on\nthe new features cuz that's the new and\n\n1581\n01:15:03,822 --> 01:15:04,430\nexciting stuff.\n\n1582\n01:15:04,430 --> 01:15:05,850\nMake sure you know that.\n\n1583\n01:15:05,850 --> 01:15:09,526\n>> But it will walk you through, step\nby step, getting this set up and let me\n\n1584\n01:15:09,526 --> 01:15:13,770\njust give you a word of caution, make sure\nyou've got about two hours on your hand.\n\n1585\n01:15:13,770 --> 01:15:15,180\n>> [LAUGH]\n>> Not joking.\n\n1586\n01:15:15,180 --> 01:15:15,760\n>> Oh no?\n\n1587\n01:15:15,760 --> 01:15:17,090\n>> I've done this lab myself,\n\n1588\n01:15:17,090 --> 01:15:20,600\nit takes about two hours\nto go from start to finish.\n\n1589\n01:15:20,600 --> 01:15:24,180\nAnd get the federation in place,\nget the claims exchanging, and so on.\n\n1590\n01:15:24,180 --> 01:15:26,661\nSo longer than one of our full episodes.\n\n1591\n01:15:26,661 --> 01:15:28,720\n>> [LAUGH]\n>> And it's just clicking, so\n\n1592\n01:15:28,720 --> 01:15:30,650\nwe would bore you to death if we did it.\n\n1593\n01:15:30,650 --> 01:15:33,660\nBut they've got a step-by-step example\nof going through and implementing this.\n\n1594\n01:15:33,660 --> 01:15:38,910\nAnd if we go back to Mike's diagram,\nyou've gotta basically set all this up on\n\n1595\n01:15:38,910 --> 01:15:41,520\nyour federation servers,\nyour account federation server,\n\n1596\n01:15:41,520 --> 01:15:46,750\nyour resource federation server, as well\nas setting up the proxies, the web server.\n\n1597\n01:15:46,750 --> 01:15:47,660\nThere is a lot involved.\n\n1598\n01:15:47,660 --> 01:15:50,450\n>> And then you go and create all\nthe claims and the claim mappings on both\n\n1599\n01:15:50,450 --> 01:15:53,960\nsides, and set up your trust policies\nwith your different organizations.\n\n1600\n01:15:53,960 --> 01:15:54,560\nSo there's a lot to it.\n\n1601\n01:15:54,560 --> 01:15:58,290\nIt's a lot of fun, I think,\nbut it takes a long time.\n\n1602\n01:15:58,290 --> 01:16:00,200\n>> So while the concept is simple,\n\n1603\n01:16:00,200 --> 01:16:02,250\nthe concept's really not\nthat bad to understand.\n\n1604\n01:16:02,250 --> 01:16:05,110\nYou basically just have this hand\noff of the authentication process\n\n1605\n01:16:05,110 --> 01:16:06,350\nthat's going on.\n\n1606\n01:16:06,350 --> 01:16:08,780\nIt's the implementation\nthat is really challenging.\n\n1607\n01:16:08,780 --> 01:16:11,761\nThere's a lot of steps, there's\na lot of rooms for making mistakes.\n\n1608\n01:16:11,761 --> 01:16:14,450\nI definitely encourage you guys\nto do those Technet V-labs.\n\n1609\n01:16:14,450 --> 01:16:18,270\nAnd we'll post the links,\nalong with the show notes.\n\n1610\n01:16:18,270 --> 01:16:19,140\nDo we have, yeah we have the show notes.\n\n1611\n01:16:19,140 --> 01:16:20,020\n>> Yeah, we have some notes.\n\n1612\n01:16:20,020 --> 01:16:22,356\n>> So we'll put them along with\nthe show notes with this episode so\n\n1613\n01:16:22,356 --> 01:16:23,770\nyou guys can do them.\n\n1614\n01:16:23,770 --> 01:16:27,110\nI definitely encourage you to go through\nit, and go through it more than once.\n\n1615\n01:16:27,110 --> 01:16:30,250\nBecause you want to be familiar with that\nprocess, all the steps that are involved.\n\n1616\n01:16:30,250 --> 01:16:33,380\nBecause on the exam,\nit's such a complex process,\n\n1617\n01:16:33,380 --> 01:16:36,000\nthey can't ask you to configure it.\n\n1618\n01:16:36,000 --> 01:16:37,540\n>> Right.\n>> You do have simulation questions\n\n1619\n01:16:37,540 --> 01:16:39,440\non the exam, with federation.\n\n1620\n01:16:39,440 --> 01:16:42,510\nIt's just too big\na concept to be able to do.\n\n1621\n01:16:42,510 --> 01:16:46,610\nSo what you're gonna get are more\ndescriptive type questions,\n\n1622\n01:16:46,610 --> 01:16:49,650\nasking you about the process,\nand the systems involved.\n\n1623\n01:16:49,650 --> 01:16:51,280\nAnd you'll really get a good feel for\n\n1624\n01:16:51,280 --> 01:16:53,350\nthat as you set up each\nof the individual pieces,\n\n1625\n01:16:53,350 --> 01:16:57,650\neven though we've fully described the\nprocess here, the nuts and bolts of it.\n\n1626\n01:16:57,650 --> 01:16:59,990\nThe more you do it by hand,\nthe more you'll learn.\n\n1627\n01:16:59,990 --> 01:17:01,100\n>> Yeah, and take a look,\n\n1628\n01:17:01,100 --> 01:17:05,720\nmake sure we understand that we've got\ndifferent ways we can implement it, right.\n\n1629\n01:17:05,720 --> 01:17:08,000\nWe can implement it\nbetween two organization.\n\n1630\n01:17:08,000 --> 01:17:11,500\nWe can do it just internally\nbetween our perimeter network and\n\n1631\n01:17:11,500 --> 01:17:13,980\nour internal network, depending on\nwhat we're trying to accomplish.\n\n1632\n01:17:13,980 --> 01:17:18,048\nAnd the other good thing about that lab,\nyou can see creating the claims,\n\n1633\n01:17:18,048 --> 01:17:20,680\ncreating what they call\na relying party trust.\n\n1634\n01:17:20,680 --> 01:17:23,950\nI think they go through modifying\nsome of those claims and\n\n1635\n01:17:23,950 --> 01:17:26,890\npassing through some\ndifferent LDAP attributes.\n\n1636\n01:17:26,890 --> 01:17:30,550\nAnd then, like I always say with those\nlabs, you follow the instructions, do them\n\n1637\n01:17:30,550 --> 01:17:33,970\nthe way it tells you do so you get a good\nfeel for it and then go in there and play.\n\n1638\n01:17:33,970 --> 01:17:36,490\nYou know, say,\nhey what if I did it this way instead?\n\n1639\n01:17:36,490 --> 01:17:39,790\nOr let's throw this attribute in there and\nsee what happens,\n\n1640\n01:17:39,790 --> 01:17:41,830\nchange some permissions on some of those.\n\n1641\n01:17:41,830 --> 01:17:44,960\nAnd then it also goes into\nwork folders as well,\n\n1642\n01:17:44,960 --> 01:17:48,180\nwhich is something else that's gonna\nbe called out on the exam for this one.\n\n1643\n01:17:48,180 --> 01:17:50,520\n>> Yeah,\nthere's a lot of neat components in there.\n\n1644\n01:17:50,520 --> 01:17:51,350\nIt is just a big one.\n\n1645\n01:17:51,350 --> 01:17:52,650\nSo definitely jump in there and\n\n1646\n01:17:52,650 --> 01:17:56,820\ndo it, and maybe one day we'll\nrecord us going through the lab.\n\n1647\n01:17:56,820 --> 01:17:58,914\nI just, I don't want to do it here on\nan episode because it'd be boring.\n\n1648\n01:17:58,914 --> 01:18:01,542\n>> [CROSSTALK]\n>> Or maybe what we could do is we\n\n1649\n01:18:01,542 --> 01:18:03,750\ncould kinda get it half set up,\nmaybe set up one side and\n\n1650\n01:18:03,750 --> 01:18:06,583\nthen just go through and set up the other\nor maybe something like that so\n\n1651\n01:18:06,583 --> 01:18:09,670\nwe could look through some of those\nclaims and show you some of those.\n\n1652\n01:18:09,670 --> 01:18:10,390\nYeah.\n\n1653\n01:18:10,390 --> 01:18:14,050\n>> Yeah, that will be a task for\nanother day.\n\n1654\n01:18:14,050 --> 01:18:15,580\nBut yeah, that is basically it.\n\n1655\n01:18:15,580 --> 01:18:16,590\nIt does sound simple.\n\n1656\n01:18:16,590 --> 01:18:19,430\nThe concept is simple, it's\nthe implementation that's challenging.\n\n1657\n01:18:19,430 --> 01:18:20,490\nIt's been around for a while, though.\n\n1658\n01:18:20,490 --> 01:18:22,310\nIt's not going anywhere anytime soon.\n\n1659\n01:18:22,310 --> 01:18:25,360\nYou know, Microsoft is very proud of it,\nand it is good, and\n\n1660\n01:18:25,360 --> 01:18:27,860\nthere are a lot of organizations\nout there that make use of it.\n\n1661\n01:18:27,860 --> 01:18:34,595\nIt's SAML compliant, which is\nsomething you see a lot these days.\n\n1662\n01:18:34,595 --> 01:18:37,060\nSAML is, let's see if I can remember.\n\n1663\n01:18:37,060 --> 01:18:39,720\nSecurity Association Markup Language.\n\n1664\n01:18:39,720 --> 01:18:40,368\n>> Yep, very good.\n>> Okay, good.\n\n1665\n01:18:40,368 --> 01:18:41,490\nGood.\nSo [LAUGH]\n\n1666\n01:18:41,490 --> 01:18:42,175\n>> I think so.\n\n1667\n01:18:42,175 --> 01:18:47,240\n[LAUGH].\n>> So SAML, it is a open standard for\n\n1668\n01:18:47,240 --> 01:18:50,380\nauthenticating people and\nthen doing like single sign-on.\n\n1669\n01:18:50,380 --> 01:18:53,370\nSo like if you have an IBM mainframe.\n\n1670\n01:18:53,370 --> 01:18:55,730\nAnd you've got a Windows Active Directory.\n\n1671\n01:18:55,730 --> 01:19:01,680\nAnd you've got a UNIX Kerberos realm, and\nyou've got all these disparate systems.\n\n1672\n01:19:01,680 --> 01:19:03,940\nBut you don't want your end-users\nto have ten different usernames and\n\n1673\n01:19:03,940 --> 01:19:05,110\npasswords, right?\n\n1674\n01:19:05,110 --> 01:19:07,970\n>> Wouldn't it be nice to have a single\nsign-on, one username and password?\n\n1675\n01:19:07,970 --> 01:19:12,770\nSo, SAML compliant systems can exchange\ninformation between each other, and\n\n1676\n01:19:12,770 --> 01:19:15,350\nthey're basically doing\nclaims against each other.\n\n1677\n01:19:15,350 --> 01:19:18,010\nAnd, you can get it where you\njust have a single user account,\n\n1678\n01:19:18,010 --> 01:19:22,040\nand federation services can be used to\ndo that with non-Microsoft systems.\n\n1679\n01:19:22,040 --> 01:19:25,190\nOn the exam, you're just going to\nsee Microsoft and Microsoft, and\n\n1680\n01:19:25,190 --> 01:19:26,100\nthat's what they want you to do.\n\n1681\n01:19:26,100 --> 01:19:29,480\nThey want you to do your Microsoft\ndomain to Windows Azure's domain.\n\n1682\n01:19:29,480 --> 01:19:31,580\nYou see you can do the exchanges there.\n\n1683\n01:19:31,580 --> 01:19:33,020\nSo that's kind of what they want.\n\n1684\n01:19:33,020 --> 01:19:34,040\nBut you can do it with other ones.\n\n1685\n01:19:34,040 --> 01:19:36,970\nI know right here in town,\nthe University of Florida makes use of it.\n\n1686\n01:19:36,970 --> 01:19:40,700\nThey actually leverage another product\nthat's out there called Shibboleth,\n\n1687\n01:19:40,700 --> 01:19:44,270\nwhich is like an open source\nidentity integration system.\n\n1688\n01:19:44,270 --> 01:19:49,570\nAnd so, they use active directory\nfederation to point into Shibboleth,\n\n1689\n01:19:49,570 --> 01:19:52,320\nand then they take their mainframe and\npoint it into Shibboleth, and so on.\n\n1690\n01:19:52,320 --> 01:19:53,790\nSo it's like a hub.\n\n1691\n01:19:53,790 --> 01:19:59,560\nSo if you do that, you can achieve that\nlog in holy grail of single sign-on.\n\n1692\n01:19:59,560 --> 01:20:03,230\nBut it's different for every environment,\nit requires customization for\n\n1693\n01:20:03,230 --> 01:20:08,309\nevery environment, so\nit really is a unique deployment.\n\n1694\n01:20:08,309 --> 01:20:11,460\nSo like I said, we'll post the link for\nthe labs on the site,\n\n1695\n01:20:11,460 --> 01:20:14,070\nand give us some feedback.\n\n1696\n01:20:14,070 --> 01:20:17,130\nI don't know if you guys would even be\ninterested in that if we went ahead and\n\n1697\n01:20:17,130 --> 01:20:20,080\nrecorded us going through and\ndoing the lab or whatever.\n\n1698\n01:20:20,080 --> 01:20:21,620\nIt's a pretty straightforward process.\n\n1699\n01:20:21,620 --> 01:20:22,920\nBut definitely something\nworth checking out.\n\n1700\n01:20:24,120 --> 01:20:29,170\nAll right, so if you guys have\nany questions on this stuff,\n\n1701\n01:20:29,170 --> 01:20:30,520\nkeep in mind, you can always ask us.\n\n1702\n01:20:30,520 --> 01:20:33,730\nLive during the show,\nyou can go to itpro.tv/live.\n\n1703\n01:20:33,730 --> 01:20:35,950\nAnd you'll see the chat room\nright beneath the video.\n\n1704\n01:20:35,950 --> 01:20:36,870\nYou can post your questions there.\n\n1705\n01:20:36,870 --> 01:20:39,410\nWe'll monitor and answer during the show.\n\n1706\n01:20:39,410 --> 01:20:42,300\nIf you have questions after the show,\nuse the Q and A link.\n\n1707\n01:20:42,300 --> 01:20:43,765\nIt's at the top of every page.\n\n1708\n01:20:43,765 --> 01:20:45,760\nIt'll take you to the Q and A forums.\n\n1709\n01:20:45,760 --> 01:20:48,330\nPost your questions there and\nagain we monitor any answers.\n\n1710\n01:20:48,330 --> 01:20:51,240\nWe wanna make sure you guys have\nthe information you need to be successful.\n\n1711\n01:20:51,240 --> 01:20:52,670\n>> That's it.\n\n1712\n01:20:52,670 --> 01:20:55,820\n>> All right, well, signing out for\nhttp://itpro.tv/live.\n\n1713\n01:20:55,820 --> 01:20:56,350\nI'm Don Pezet.\n\n1714\n01:20:56,350 --> 01:20:57,640\n>> And I'm Mike Rodrick.\n\n1715\n01:20:57,640 --> 01:20:59,600\n>> And we will see you next time.\n\n1716\n01:20:59,600 --> 01:21:09,600\n[MUSIC]\n\n",
          "vimeoId": "100718643"
        }
      ],
      "title": "Configure Identity and Access Solutions"
    },
    {
      "episodes": [],
      "title": "Implement Network Load Balancing"
    }
  ],
  "url": "mcsa-windows-server-2014",
  "vLab": true
}
