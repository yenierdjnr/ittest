{
  "description": "The Designing and Implementing a Server Infrastructure exam is the first of two exams required to obtain the Microsoft Certified Solutions Expert (MCSE) certification. This exam departs from the traditional pattern of \"how\" to perform tasks and instead focuses on \"why\" these things are done and “why” one would want to make certain decisions like use IPsec instead of PPTP or have four active directory domain controllers instead of one. This course covers topics ranging from server capacity planning and placement to active directory topology design. The typical viewer would be anyone involved in designing network solutions or working in a consulting role.",
  "descriptionMD": "",
  "length": "57612",
  "name": "MCSE Windows Server 2012 - 70-413",
  "practiceExam": true,
  "subtitle": "Designing and Implementing a Server Infrastructure",
  "tagUrl": "microsoft-technical",
  "topics": [
    {
      "episodes": [
        {
          "description": "The Designing and Implementing a Server Infrastructure exam is the first of two exams required to obtain the Microsoft Certified Solutions Expert (MCSE) certification. This exam departs from the traditional pattern of \"how\" to perform tasks and instead focuses on \"why\" these things are done. This course covers topics ranging from server capacity planning and placement to active directory topology design. The typical viewer would be anyone involved in designing network solutions or working in a consulting role.",
          "length": "497",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/microsoftmcseserver2012-0-0-overview-112414.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/microsoftmcseserver2012-0-0-overview-112414-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/microsoftmcseserver2012-0-0-overview-112414-sm.jpg",
          "title": "Overview of MCSE Windows Server 2012 (70-413)",
          "transcript": "1\n00:00:00,004 --> 00:00:04,994\n[SOUND] The 70-413 exam is the first\n\n2\n00:00:04,994 --> 00:00:09,102\nexam on the way to completing your\n\n3\n00:00:09,102 --> 00:00:17,188\nMicrosoft Certified Solutions\nExpert Certificate, the MCSE.\n\n4\n00:00:17,188 --> 00:00:20,615\nThe MCSE is one of the most sought\nafter certifications from Microsoft and\n\n5\n00:00:20,615 --> 00:00:24,539\nit's definitely one of the most well known\nIT certifications throughout the entire\n\n6\n00:00:24,539 --> 00:00:28,110\nindustry so it's definitely\na target people are looking for.\n\n7\n00:00:28,110 --> 00:00:31,140\nMicrosoft has expanded the MCSE\nquite a bit over the years so\n\n8\n00:00:31,140 --> 00:00:33,060\nthere's actually more than one track.\n\n9\n00:00:33,060 --> 00:00:36,590\nLet's start and take a look at that real\nquick before we dive into the nitty gritty\n\n10\n00:00:36,590 --> 00:00:37,730\ndetails.\n\n11\n00:00:37,730 --> 00:00:40,830\nI've got the Microsoft certification and\ntraining page pulled up here and\n\n12\n00:00:40,830 --> 00:00:43,780\nthey're just showing all of\nthe different MCSE's that are available.\n\n13\n00:00:43,780 --> 00:00:46,770\nThere's the MCSE desktop infrastructure,\nwhich is important for\n\n14\n00:00:46,770 --> 00:00:48,960\npeople who are going to be\nsupporting Windows 7 or\n\n15\n00:00:48,960 --> 00:00:52,940\nWindows 8 desktops in a corporate or\nlarge enterprise environment.\n\n16\n00:00:52,940 --> 00:00:57,110\nThey cover technologies based on deploying\nhundreds of thousands of machines and\n\n17\n00:00:57,110 --> 00:00:58,490\nmaintaining them.\n\n18\n00:00:58,490 --> 00:01:02,520\nBut when you have that many desktops you\nneed servers to provide services and\n\n19\n00:01:02,520 --> 00:01:06,030\nthat's where the MCSE server\ninfrastructure comes in.\n\n20\n00:01:06,030 --> 00:01:11,460\nNow, there is an MCSE for Windows Server\n2012 as well as Windows Server 2008.\n\n21\n00:01:11,460 --> 00:01:13,240\nSo depending on which\ncertification you're looking for,\n\n22\n00:01:13,240 --> 00:01:15,560\nyou'll want to make sure you\nchoose the appropriate one.\n\n23\n00:01:15,560 --> 00:01:18,390\nThe ones here on IT Pro TV are built\naround Windows Server 2012,\n\n24\n00:01:18,390 --> 00:01:22,580\nwe choose to do the newer\ncertification as opposed to the older.\n\n25\n00:01:22,580 --> 00:01:25,520\nBut you'll see that there are other ones\nout there, like the private cloud, for\n\n26\n00:01:25,520 --> 00:01:28,740\nsetting up the system center solutions\nthat are available through Microsoft.\n\n27\n00:01:28,740 --> 00:01:32,820\nThere's enterprise devices and apps,\nwhich focuses around mobile and\n\n28\n00:01:32,820 --> 00:01:33,910\nsome development.\n\n29\n00:01:33,910 --> 00:01:35,600\nData platform for databases.\n\n30\n00:01:35,600 --> 00:01:39,420\nBusiness Intelligence for\nusing the data in the databases.\n\n31\n00:01:39,420 --> 00:01:42,708\nWe've got Messaging, which is for\nMicrosoft Exchange and collaboration.\n\n32\n00:01:42,708 --> 00:01:44,660\nYou got MSCE: Communication,\n\n33\n00:01:44,660 --> 00:01:48,790\nwhich is built around the link server and\nsome of the voice over IP technologies.\n\n34\n00:01:48,790 --> 00:01:53,000\nAnd then good old SharePoint, for\ninformation exchange and handling.\n\n35\n00:01:53,000 --> 00:01:55,400\nQuite a few different MCSEs.\n\n36\n00:01:55,400 --> 00:01:57,610\nWhen someone out there says,\nhey, I'm an MCSE.\n\n37\n00:01:57,610 --> 00:02:02,100\nWe have to follow it up with a question,\nwith great, what are you an MCSE in?\n\n38\n00:02:02,100 --> 00:02:04,240\nWhich one are you actually certified in?\n\n39\n00:02:04,240 --> 00:02:08,660\nWell, we're tackling the most common one,\nand that's server infrastructure.\n\n40\n00:02:08,660 --> 00:02:12,980\nThese are employees that will be\nresponsible for configuring and\n\n41\n00:02:12,980 --> 00:02:14,730\nmaintaining servers.\n\n42\n00:02:14,730 --> 00:02:17,580\nNow, those servers might\nbe providing name look ups.\n\n43\n00:02:17,580 --> 00:02:21,760\nIt might be authentication, file servers,\nprint servers Email servers,\n\n44\n00:02:21,760 --> 00:02:23,250\nwho knows what they're providing.\n\n45\n00:02:23,250 --> 00:02:26,430\nBut the basic foundation is\nthe Microsoft Windows Server product, and\n\n46\n00:02:26,430 --> 00:02:27,890\nwe need to know the ins and outs of it,\n\n47\n00:02:27,890 --> 00:02:32,410\nand that's what the MCSE Server\nInfrastructure is all about.\n\n48\n00:02:32,410 --> 00:02:36,980\nNow, MSCE Server Infrastructure, that's\nthe generic name for the certification.\n\n49\n00:02:36,980 --> 00:02:39,960\nThere's specific tests,\nthough, catered to whether or\n\n50\n00:02:39,960 --> 00:02:43,480\nnot you are doing Windows server 2012 or\nWindows server 2008.\n\n51\n00:02:43,480 --> 00:02:47,530\nIf you are doing Windows server 2012,\n\n52\n00:02:47,530 --> 00:02:51,480\nnotice that there's five\ndifferent exams listed here.\n\n53\n00:02:51,480 --> 00:02:53,500\nMost of these, you should already have.\n\n54\n00:02:53,500 --> 00:02:58,490\nIf you are pursuing the MCSC,\nyou have to get your MCSA first.\n\n55\n00:02:58,490 --> 00:03:02,940\nLike the MCSC, there are several MSCAs,\nyou need the MCSA for\n\n56\n00:03:02,940 --> 00:03:04,870\nServer Infrastructure for\nWindows Server 2012.\n\n57\n00:03:04,870 --> 00:03:07,010\nWhen you have the MCSA for\n\n58\n00:03:07,010 --> 00:03:11,540\nWindows Server 2012 that's these three\nexams right here, 410, 411, and 412.\n\n59\n00:03:11,540 --> 00:03:13,990\nIt's actually 70-410, 70-411, and 70-412.\n\n60\n00:03:13,990 --> 00:03:19,730\nIf you don't have your MCSA yet,\nstop here.\n\n61\n00:03:19,730 --> 00:03:22,140\nYou don't need the MSCE videos just yet.\n\n62\n00:03:22,140 --> 00:03:23,710\nJump back to the MCSA, right?\n\n63\n00:03:23,710 --> 00:03:25,690\nWe've already filmed them\nright here on ITProTV and\n\n64\n00:03:25,690 --> 00:03:28,980\nyou can start moving through\nstarting with 70-410.\n\n65\n00:03:28,980 --> 00:03:33,080\nIf you go out of order one of two\nthings is going to happen, all right?\n\n66\n00:03:33,080 --> 00:03:35,260\nOne, you'll get in over\nyour head very fast.\n\n67\n00:03:35,260 --> 00:03:37,860\nWhen we start right here with 70-413,\n\n68\n00:03:37,860 --> 00:03:42,380\nit's assumed you already have all the\nknowledge from those first three shows.\n\n69\n00:03:43,440 --> 00:03:44,940\nSo that's problem number one.\n\n70\n00:03:44,940 --> 00:03:46,580\nProblem number two is,\nif you start here and\n\n71\n00:03:46,580 --> 00:03:50,510\nyou go pass this exam,\nyou will not get a certification for it.\n\n72\n00:03:50,510 --> 00:03:54,880\nYou cannot get your MCSE unless\nyou also have your MCSA.\n\n73\n00:03:54,880 --> 00:03:58,940\nThat's the starting point,\nbefore you proceed to here.\n\n74\n00:03:58,940 --> 00:04:02,970\nNow at 70-413 is this, designing and\nimplementing a server infrastructure and\n\n75\n00:04:02,970 --> 00:04:04,010\nthis is a really neat one.\n\n76\n00:04:04,010 --> 00:04:08,230\nIt's different than pretty much any\nother show we've done on IT Pro TV.\n\n77\n00:04:08,230 --> 00:04:13,990\nIn 410, 411, and 412, you learn how\nto do a ton of different things.\n\n78\n00:04:13,990 --> 00:04:16,000\nHow to set up the active directory.\n\n79\n00:04:16,000 --> 00:04:18,810\nHow to configure routing and\nremote access.\n\n80\n00:04:18,810 --> 00:04:19,850\nHow to do all this stuff.\n\n81\n00:04:20,920 --> 00:04:23,750\nBut you never really address the why.\n\n82\n00:04:23,750 --> 00:04:27,230\nWhy would I choose to use\nIPsec instead of PPTP?\n\n83\n00:04:27,230 --> 00:04:32,290\nWhy would I choose to use\nnetwork access protection?\n\n84\n00:04:32,290 --> 00:04:35,250\nWhy would I choose to have four\nactive directory domain controllers\n\n85\n00:04:35,250 --> 00:04:36,290\ninstead of one?\n\n86\n00:04:36,290 --> 00:04:39,070\nWhy would I choose to have five\ndomains instead of just having\n\n87\n00:04:39,070 --> 00:04:40,960\none domain in a single forest.\n\n88\n00:04:40,960 --> 00:04:42,530\nWhy do we make these decisions?\n\n89\n00:04:42,530 --> 00:04:45,470\nWell that's what the 70-413 show covers.\n\n90\n00:04:45,470 --> 00:04:48,540\nWe take a look at a lot of\nthe different infrastructure,\n\n91\n00:04:48,540 --> 00:04:50,860\nthe things that were covered\nin the other servers.\n\n92\n00:04:50,860 --> 00:04:54,760\nAnd now we find out the why,\nthe design mechanisms that go behind this.\n\n93\n00:04:54,760 --> 00:04:57,240\nHow we make the right decisions.\n\n94\n00:04:57,240 --> 00:05:02,110\nThis is not a responsibility that\nsomebody new to IT is going to be doing.\n\n95\n00:05:02,110 --> 00:05:04,340\nNobody is going to hire somebody\nright out of college and say,\n\n96\n00:05:04,340 --> 00:05:06,110\n\"hey can you design my network\".\n\n97\n00:05:07,280 --> 00:05:11,080\nBecause if you choose a poor design\non day one it's going to have\n\n98\n00:05:11,080 --> 00:05:13,880\nlasting ramifications for\nthe life of that network.\n\n99\n00:05:13,880 --> 00:05:15,340\nYou need somebody with experience and\n\n100\n00:05:15,340 --> 00:05:18,810\na deep understanding of how all\nthe different pieces interact.\n\n101\n00:05:18,810 --> 00:05:21,850\nWhen you have that understanding,\nyou can create a very stable,\n\n102\n00:05:21,850 --> 00:05:23,760\nvery reliable design.\n\n103\n00:05:23,760 --> 00:05:26,710\nThat will give you a much better network\nexperience throughout the life of your\n\n104\n00:05:26,710 --> 00:05:27,680\ntechnology.\n\n105\n00:05:27,680 --> 00:05:29,590\nSo, that's what's covered in 70-413.\n\n106\n00:05:29,590 --> 00:05:33,320\nThere is some implementation.\n\n107\n00:05:33,320 --> 00:05:36,050\nThere's a few technologies we cover in\nthere that weren't on the other exams and\n\n108\n00:05:36,050 --> 00:05:37,530\nso we actually show those.\n\n109\n00:05:37,530 --> 00:05:40,580\nBut most of it is just discussing designs.\n\n110\n00:05:40,580 --> 00:05:44,880\nPossible arrangements of technologies to\nprovide the best possible deployment and\n\n111\n00:05:44,880 --> 00:05:48,260\nthe different things we have to take\ninto account that influence our design.\n\n112\n00:05:48,260 --> 00:05:50,930\nWe have to make modifications\nbased on our current network.\n\n113\n00:05:50,930 --> 00:05:53,450\nSo it's really neat,\nit's very conceptual, and\n\n114\n00:05:53,450 --> 00:05:58,150\nit's all built around stuff you've already\nlearned, so I will just reiterate it here.\n\n115\n00:05:58,150 --> 00:06:02,070\nIt is really important that you complete\nthose first three certification exams\n\n116\n00:06:02,070 --> 00:06:04,868\nbefore progressing to here.\n\n117\n00:06:04,868 --> 00:06:09,440\nNow once 413 is done, you are ready to\nmove on to 414 the other part of MCSC for\n\n118\n00:06:09,440 --> 00:06:10,630\nWindows Server 2012.\n\n119\n00:06:10,630 --> 00:06:14,890\nAnd it's implementing an advanced\nserver infrastructure.\n\n120\n00:06:14,890 --> 00:06:18,750\nYou take some of those earlier services\nand you extend them even further with some\n\n121\n00:06:18,750 --> 00:06:21,690\nadvanced functionality that's in there and\nwe even take a look at some other\n\n122\n00:06:21,690 --> 00:06:25,250\nones like active directory federation\nservices that are just much more\n\n123\n00:06:25,250 --> 00:06:29,340\ncomplex than any of the technologies\ndeployed in the earlier shows.\n\n124\n00:06:29,340 --> 00:06:31,210\nSo, really neat stuff here.\n\n125\n00:06:31,210 --> 00:06:33,080\nWhen you pass these two exams,\n\n126\n00:06:33,080 --> 00:06:37,520\nIf you already have your MCSA\nyou'll then be awarded the MCSE.\n\n127\n00:06:37,520 --> 00:06:40,970\nAnd for most people,\nthat's where they stop with Microsoft.\n\n128\n00:06:40,970 --> 00:06:43,750\nMicrosoft does have a few\nhigher tier certifications,\n\n129\n00:06:43,750 --> 00:06:45,590\nlike the Microsoft Certified Architect.\n\n130\n00:06:45,590 --> 00:06:48,220\nI know they were talking\nabout retiring that one, or\n\n131\n00:06:48,220 --> 00:06:50,480\nthe Microsoft Certified Master\nwas another one.\n\n132\n00:06:50,480 --> 00:06:53,280\nBut their still out there,\nyou can still achieve those.\n\n133\n00:06:53,280 --> 00:06:56,350\nBut they are just not very common they\nare very, very difficult to get and so\n\n134\n00:06:56,350 --> 00:06:59,260\nmost people stop right\nthere with the M-C-S-E.\n\n135\n00:06:59,260 --> 00:07:01,380\nBut is that the end if you are learning?\n\n136\n00:07:01,380 --> 00:07:05,090\nNo, once you've completed that it's\na good idea to broaden your horizons.\n\n137\n00:07:05,090 --> 00:07:09,030\nYou likely are having to integrate to\nproducts from other vendors like Linux or\n\n138\n00:07:09,030 --> 00:07:12,650\nMac OS and so you may extend out to\nstart learning about those platforms and\n\n139\n00:07:12,650 --> 00:07:14,790\ndeploying service with those technologies.\n\n140\n00:07:14,790 --> 00:07:17,870\nSo just keep that in mind as you move\nthrough, while this might seem like\n\n141\n00:07:17,870 --> 00:07:21,830\nthe end of your certification path with\nMicrosoft, it may just be the beginning\n\n142\n00:07:21,830 --> 00:07:26,350\nof you entering into other operating\nsystems, so always pay attention, look for\n\n143\n00:07:26,350 --> 00:07:29,430\nthe various resources that\nare out there learn all you can.\n\n144\n00:07:29,430 --> 00:07:32,920\nThat's the piece of advice I always\ngive to people is, learn all you can.\n\n145\n00:07:32,920 --> 00:07:38,010\nBecause it never hurts to know additional\ninformation it's always going to help.\n\n146\n00:07:38,010 --> 00:07:40,950\nSo that's basically what we're going\nto be taking a look at in the 70-413.\n\n147\n00:07:40,950 --> 00:07:44,000\nThat design, that why, how we do things,\n\n148\n00:07:44,000 --> 00:07:48,170\nand why they're done throughout\na Microsoft environment.\n\n149\n00:07:48,170 --> 00:07:51,060\nThat sounds like the right place for\nyou if you got your MCSA and\n\n150\n00:07:51,060 --> 00:07:53,760\nyou're ready to move into the MCSE and\nstay tuned,\n\n151\n00:07:53,760 --> 00:07:56,940\nbecause we've got the 70-413\nepisodes coming up next.\n\n152\n00:07:56,940 --> 00:08:00,050\nIf you need to tackle the MCSA or\nsome of the other content, make sure you\n\n153\n00:08:00,050 --> 00:08:02,890\njump over to those shows, because it's\nall part of your IT Pro TV subscription,\n\n154\n00:08:02,890 --> 00:08:06,920\nso just make sure you start in\nthe right place and move forward.\n\n155\n00:08:06,920 --> 00:08:10,520\nWell best of luck on your exams and I'll\nsee you in the episodes coming up next.\n\n156\n00:08:10,520 --> 00:08:17,669\n[MUSIC]\n\n",
          "vimeoId": "112924624"
        }
      ],
      "title": "Overview for MCSE Windows Server 2012 R2 (70-413)"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "931",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/001-Designing-A-Server-Infrastructure.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/001-Designing-A-Server-Infrastructure-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/001-Designing-A-Server-Infrastructure-sm.jpg",
          "title": "Designing A Server Infrastructure",
          "transcript": "1\n00:00:00,000 --> 00:00:08,417\n[MUSIC]\n\n2\n00:00:08,417 --> 00:00:13,960\nThe 70-413 exam is one of\nthe MCSE exams from Microsoft.\n\n3\n00:00:13,960 --> 00:00:15,600\nNow, that's a lot of numbers and acronyms.\n\n4\n00:00:15,600 --> 00:00:17,390\nSo let's stop and take a minute and\nlook at each of those.\n\n5\n00:00:17,390 --> 00:00:21,230\nAnd kind of talk about what the exam\nactually is, what it covers, and\n\n6\n00:00:21,230 --> 00:00:22,470\nwhat its purpose is.\n\n7\n00:00:22,470 --> 00:00:25,410\nWell, first off,\nit's part of the MCSE track,\n\n8\n00:00:25,410 --> 00:00:28,640\nwhich is the Microsoft Certified\nSolutions Expert track.\n\n9\n00:00:28,640 --> 00:00:30,920\nFor those of you who've been\ninvolved in this for awhile,\n\n10\n00:00:30,920 --> 00:00:34,160\nyou might also know it as the Microsoft\nCertified Systems Engineer, but\n\n11\n00:00:34,160 --> 00:00:36,620\ntheir name underwent some\nrebranding a couple of years ago.\n\n12\n00:00:36,620 --> 00:00:40,690\nSo now, it's the Microsoft Certified\nSolutions Expert, the MCSE.\n\n13\n00:00:40,690 --> 00:00:43,290\nIt's one of the higher level\ncertifications with Microsoft.\n\n14\n00:00:43,290 --> 00:00:46,210\nAnd when people think of\nMicrosoft certifications,\n\n15\n00:00:46,210 --> 00:00:48,510\nit's usually the MCSE\nthat they think about.\n\n16\n00:00:48,510 --> 00:00:51,020\nThat's the one that has\nthe name recognition.\n\n17\n00:00:51,020 --> 00:00:54,410\nAnd for getting something on your resume,\nthe MCSE is a pretty good one.\n\n18\n00:00:54,410 --> 00:00:56,230\nRight.\nIt does draw some attention.\n\n19\n00:00:56,230 --> 00:00:58,340\nHuman Resources managers recognize it.\n\n20\n00:00:58,340 --> 00:00:59,970\nIT managers recognize it.\n\n21\n00:00:59,970 --> 00:01:03,260\nNow, the MCSE has several different\ntracks that are available,\n\n22\n00:01:03,260 --> 00:01:05,240\ndepending on what you want to do.\n\n23\n00:01:05,240 --> 00:01:10,290\nAnd the 70-413 exam is part of\nthe server infrastructure track.\n\n24\n00:01:10,290 --> 00:01:13,540\nAnd it's designed to show that\nyou have the knowledge and\n\n25\n00:01:13,540 --> 00:01:17,720\nskills necessary, not just to\nimplement Microsoft technologies.\n\n26\n00:01:17,720 --> 00:01:20,350\nBut to know how to properly deploy them.\n\n27\n00:01:20,350 --> 00:01:22,280\nNow, what do I mean by that?\n\n28\n00:01:22,280 --> 00:01:26,820\nIn a lot of the exams,\nMicrosoft focuses on the how for things.\n\n29\n00:01:26,820 --> 00:01:27,820\nHow to do this?\n\n30\n00:01:27,820 --> 00:01:29,300\nHow to set up a DNS server?\n\n31\n00:01:29,300 --> 00:01:31,400\nHow to set up remote access VPNs?\n\n32\n00:01:31,400 --> 00:01:33,350\nHow to implement active directory, right?\n\n33\n00:01:33,350 --> 00:01:34,970\nHow to do these things.\n\n34\n00:01:34,970 --> 00:01:36,430\nBut they never really go into the why.\n\n35\n00:01:37,840 --> 00:01:40,160\nWhy would you do it this way?\n\n36\n00:01:40,160 --> 00:01:42,610\nI know, I can have more than\none active directory domain.\n\n37\n00:01:42,610 --> 00:01:43,330\nWhy would I?\n\n38\n00:01:43,330 --> 00:01:44,860\nWhy would I want more than one?\n\n39\n00:01:44,860 --> 00:01:49,100\nOr I know there's several different\nways I can setup a remote access VPN.\n\n40\n00:01:49,100 --> 00:01:51,570\nWhy would I do one versus the other?\n\n41\n00:01:51,570 --> 00:01:54,320\nWell, that's what the MCSE tackles.\n\n42\n00:01:54,320 --> 00:01:56,130\nIn the MCSA, right?\n\n43\n00:01:56,130 --> 00:01:59,995\nThe Microsoft Certified\nSolutions Administrator.\n\n44\n00:01:59,995 --> 00:02:01,590\nIn the MCSA track or associate, sorry.\n\n45\n00:02:01,590 --> 00:02:04,520\nIn that track, you're the doer.\n\n46\n00:02:04,520 --> 00:02:05,490\nYou're the grunt.\n\n47\n00:02:05,490 --> 00:02:07,870\nThe one that's out there in\nthe field doing the actual work.\n\n48\n00:02:07,870 --> 00:02:09,440\nYou're the one setting up the servers.\n\n49\n00:02:09,440 --> 00:02:11,600\nYou're the one performing those actions.\n\n50\n00:02:11,600 --> 00:02:13,640\nSo, when you look at\nthose exam objectives,\n\n51\n00:02:13,640 --> 00:02:18,690\nthey're full of implement this,\ndeploy that, migrate this.\n\n52\n00:02:18,690 --> 00:02:23,070\nBut when you get into the MCSE,\nthe exam objectives change.\n\n53\n00:02:23,070 --> 00:02:26,690\nThey become design this, plan that.\n\n54\n00:02:26,690 --> 00:02:29,100\nYou're not necessarily the one\ndoing the implementation.\n\n55\n00:02:29,100 --> 00:02:31,250\nNow in a small and\nmedium business, you will.\n\n56\n00:02:31,250 --> 00:02:32,710\nBut in a larger enterprise business,\n\n57\n00:02:32,710 --> 00:02:34,820\nyou're not the one doing\nthe implementation anymore.\n\n58\n00:02:34,820 --> 00:02:38,450\nYou're the one who's\ndesigning the infrastructure.\n\n59\n00:02:38,450 --> 00:02:42,300\nComing up with that framework that's gonna\nbe deployed throughout your organization,\n\n60\n00:02:42,300 --> 00:02:44,650\nand that's really important.\n\n61\n00:02:44,650 --> 00:02:47,020\nIf you make a mistake setting\nup a DNS server, what do you do?\n\n62\n00:02:47,020 --> 00:02:49,360\nYou just fix the mistake and that's it.\n\n63\n00:02:49,360 --> 00:02:54,220\nBut if you make a mistake designing\na network, it can be very expensive and\n\n64\n00:02:54,220 --> 00:02:56,190\nvery difficult to go back and change that.\n\n65\n00:02:56,190 --> 00:02:58,310\nSo you've really gotta know your stuff.\n\n66\n00:02:58,310 --> 00:03:00,190\nAnd that's what an MCSE is.\n\n67\n00:03:00,190 --> 00:03:04,000\nAn MCSE is not a person\njust getting started in IT.\n\n68\n00:03:04,000 --> 00:03:06,230\nIt's somebody who's got\na background in IT.\n\n69\n00:03:06,230 --> 00:03:08,000\nThey've been working with Windows server.\n\n70\n00:03:08,000 --> 00:03:11,180\nThey're already an MCSA,\nalready certified.\n\n71\n00:03:11,180 --> 00:03:13,500\nAnd looking to move to that next step.\n\n72\n00:03:13,500 --> 00:03:18,040\nMoving up to the higher level management,\nyou know, IT Director type position.\n\n73\n00:03:18,040 --> 00:03:20,190\nThat's what an MCSE is\nreally designed for.\n\n74\n00:03:20,190 --> 00:03:22,550\nAnd that's not how it's marketed a lot.\n\n75\n00:03:22,550 --> 00:03:25,020\nA lot of times people see hey,\nI wanna get into IT.\n\n76\n00:03:25,020 --> 00:03:26,140\nI wanna get started.\n\n77\n00:03:26,140 --> 00:03:27,390\nI want the MCSE.\n\n78\n00:03:27,390 --> 00:03:28,770\nWell, it's not designed for you.\n\n79\n00:03:28,770 --> 00:03:29,270\nRight?\n\n80\n00:03:29,270 --> 00:03:31,210\nFor somebody just getting started.\n\n81\n00:03:31,210 --> 00:03:32,000\nNo network.\n\n82\n00:03:32,000 --> 00:03:35,240\nNo company out there is gonna hire\nyou to design their network with no\n\n83\n00:03:35,240 --> 00:03:35,960\nfield experience.\n\n84\n00:03:35,960 --> 00:03:37,150\nThis is really designed for\n\n85\n00:03:37,150 --> 00:03:39,330\npeople who already have that\nexperience under their belt.\n\n86\n00:03:39,330 --> 00:03:40,240\nAll right.\n\n87\n00:03:40,240 --> 00:03:41,020\nLet me show you what I mean.\n\n88\n00:03:42,060 --> 00:03:45,240\nHere's the different MCSE\ntracks that are out there.\n\n89\n00:03:45,240 --> 00:03:46,820\nAnd the one we're looking\nat is this one right here,\n\n90\n00:03:46,820 --> 00:03:49,470\nthe MCSE Server Infrastructure.\n\n91\n00:03:49,470 --> 00:03:53,960\nIt's made up of a couple of exams, and\nyou'll see those laid out right here.\n\n92\n00:03:53,960 --> 00:03:57,050\nNow, to get your\nMCSE Server Infrastructure,\n\n93\n00:03:57,050 --> 00:03:59,980\nyou already have to have the MCSA.\n\n94\n00:03:59,980 --> 00:04:03,720\nYou have to show that you\nknow how to do things that\n\n95\n00:04:03,720 --> 00:04:07,450\nare part of that kind of wheelhouse.\n\n96\n00:04:07,450 --> 00:04:09,250\nWhat is expected of the doer.\n\n97\n00:04:09,250 --> 00:04:10,670\nThe person in the field.\n\n98\n00:04:10,670 --> 00:04:14,020\nAnd then you have to show that\nyou know the more advance level.\n\n99\n00:04:14,020 --> 00:04:16,450\nSo the first three exams\nhere are just the MCSA.\n\n100\n00:04:16,450 --> 00:04:17,010\nRight.\n\n101\n00:04:17,010 --> 00:04:19,970\nInstalling and\nconfiguring Windows Server 2012.\n\n102\n00:04:19,970 --> 00:04:21,600\nAdministering Windows Server 2012.\n\n103\n00:04:21,600 --> 00:04:24,860\nConfigure Advances Windows Server\n2012 Services.\n\n104\n00:04:24,860 --> 00:04:28,790\nAll three of those exams\nfocusing on the how to do things.\n\n105\n00:04:28,790 --> 00:04:32,610\nBut then you get to the MCSC side,\nyou get designing and\n\n106\n00:04:32,610 --> 00:04:34,350\nimplementing a server infrastructure.\n\n107\n00:04:34,350 --> 00:04:37,670\nThat's the 70-413 that\nwe're talking about here.\n\n108\n00:04:37,670 --> 00:04:43,390\nAnd the implementing and advance server\ninfrastructure which is 70-414, all right.\n\n109\n00:04:43,390 --> 00:04:46,590\nNow for the 413, the exam objectives\nbreak down like this, right?\n\n110\n00:04:46,590 --> 00:04:49,310\nWe've got designing and\nimplementing a server infrastructure.\n\n111\n00:04:49,310 --> 00:04:53,080\nThe implementing, it's really\nassumed you already know how to do.\n\n112\n00:04:53,080 --> 00:04:57,530\nSo it's focusing more on the design and\nplan side.\n\n113\n00:04:57,530 --> 00:05:01,060\nAnd as we start to look at the exam\nobjectives, you'll see that right away.\n\n114\n00:05:01,060 --> 00:05:03,770\nPlan and deploy a server infrastructure.\n\n115\n00:05:03,770 --> 00:05:05,810\nDesign and\nimplement a network infrastructure.\n\n116\n00:05:05,810 --> 00:05:07,130\nDesign network access.\n\n117\n00:05:07,130 --> 00:05:08,870\nDesign active directory, right?\n\n118\n00:05:08,870 --> 00:05:12,870\nEach of these telling you,\nyou already know how to do these things.\n\n119\n00:05:12,870 --> 00:05:14,360\nNow we need to grasp that why.\n\n120\n00:05:14,360 --> 00:05:17,440\nAnd that's what we're\ngonna do in this show.\n\n121\n00:05:17,440 --> 00:05:21,330\nIn the 7413 show on ITProTV, we're gonna\nbe taking each of these exam objective\n\n122\n00:05:21,330 --> 00:05:24,990\nareas and looking at the different\nscenarios that fit to them and\n\n123\n00:05:24,990 --> 00:05:28,300\nfiguring out which ones\nwork in which area.\n\n124\n00:05:28,300 --> 00:05:30,110\nNow each of them says, plan and deploy.\n\n125\n00:05:30,110 --> 00:05:33,840\nAnd the reason they say, plan and\ndeploy Is not because for the show,\n\n126\n00:05:33,840 --> 00:05:35,710\nwe need to know how to deploy it.\n\n127\n00:05:35,710 --> 00:05:37,700\nI'm sorry,\nnot that we're going to deploy it.\n\n128\n00:05:37,700 --> 00:05:39,640\nBut that we need to already know that.\n\n129\n00:05:39,640 --> 00:05:40,850\nSo if you ever look at one of these.\n\n130\n00:05:40,850 --> 00:05:44,450\nAnd you say, man, I don't know how to\ndeploy something on Microsoft Azure.\n\n131\n00:05:44,450 --> 00:05:45,870\nRight, I've never used it.\n\n132\n00:05:45,870 --> 00:05:48,840\nWell, they expect you to\nalready have that knowledge.\n\n133\n00:05:48,840 --> 00:05:51,280\nThe exam's really focusing\non the planning side.\n\n134\n00:05:51,280 --> 00:05:53,920\nBut if you don't know how to do it,\na lot of times,\n\n135\n00:05:53,920 --> 00:05:55,750\nyou're not gonna know how to plan for\nit either.\n\n136\n00:05:55,750 --> 00:05:58,670\nYou gotta kinda know both pieces of it.\n\n137\n00:05:58,670 --> 00:06:01,910\nSo we start off with just a server\ninstallation strategy, right?\n\n138\n00:06:01,910 --> 00:06:04,750\nGetting Windows server 2012 installed.\n\n139\n00:06:04,750 --> 00:06:06,450\nThere's several ways to go about it.\n\n140\n00:06:06,450 --> 00:06:10,010\nSo, we'll talk about ways to automate\ndeployments, do local deployments,\n\n141\n00:06:10,010 --> 00:06:13,610\ndo deployments in Microsoft Azure,\nright, Windows deployment services.\n\n142\n00:06:13,610 --> 00:06:16,100\nAll of theses are different components\nthat influence the way that\n\n143\n00:06:16,100 --> 00:06:17,670\nwe deploy Windows.\n\n144\n00:06:17,670 --> 00:06:21,820\nAnd there's certain scenarios where one\nmethod is definitely preferable to others.\n\n145\n00:06:21,820 --> 00:06:24,810\nSame thing with implementing\na server deployment infrastructure.\n\n146\n00:06:24,810 --> 00:06:27,400\nIf we're going to be deploying\nusing Windows Azure,\n\n147\n00:06:27,400 --> 00:06:29,440\nwe need to get set up to\nbe able to handle that.\n\n148\n00:06:29,440 --> 00:06:31,240\nIf we're going to deploy using WDS,\n\n149\n00:06:31,240 --> 00:06:35,790\nwe need to build up a WDS infrastructure\nbefore we can deploy with that.\n\n150\n00:06:35,790 --> 00:06:37,890\nWe need to make sure,\nwe've got our ducks in a row there,\n\n151\n00:06:37,890 --> 00:06:39,790\nas far as the different methods for it.\n\n152\n00:06:39,790 --> 00:06:42,470\nAnd when one method is\npreferable to another.\n\n153\n00:06:43,990 --> 00:06:47,460\nPlanning and implementing\nserver upgrades and migrations.\n\n154\n00:06:47,460 --> 00:06:50,070\nServer upgrades require a lot of planning.\n\n155\n00:06:50,070 --> 00:06:52,220\nAnd we don't typically\ndo in-place upgrades.\n\n156\n00:06:52,220 --> 00:06:54,520\nBut if you are,\nthere's a ton of planning involved there.\n\n157\n00:06:54,520 --> 00:06:56,690\nBut normally,\nwe're doing swing migrations.\n\n158\n00:06:56,690 --> 00:06:59,440\nBringing up new servers to\nreplace the old servers.\n\n159\n00:06:59,440 --> 00:07:01,750\nSo now you've got two sets of servers up.\n\n160\n00:07:01,750 --> 00:07:04,740\nAnd swinging your users from\nthe old system to the new system,\n\n161\n00:07:04,740 --> 00:07:05,870\nwe have to plan for it.\n\n162\n00:07:05,870 --> 00:07:09,610\nWhen is that method appropriate versus\nwhen is an in place upgrade appropriate?\n\n163\n00:07:09,610 --> 00:07:10,940\nRight?\nWe've gotta have a good\n\n164\n00:07:10,940 --> 00:07:11,820\nunderstanding of that.\n\n165\n00:07:12,950 --> 00:07:15,910\nAnd then any file in storage\nservices on the network.\n\n166\n00:07:15,910 --> 00:07:20,510\nWe already learned, in the other shows,\nthat we can deploy iSCSI if we want.\n\n167\n00:07:20,510 --> 00:07:21,990\nWe can use iSNS.\n\n168\n00:07:21,990 --> 00:07:24,850\nWe can use all these\ndifferent things like NFS.\n\n169\n00:07:24,850 --> 00:07:25,930\nBut why?\n\n170\n00:07:25,930 --> 00:07:27,660\nWhen would we use them right?\n\n171\n00:07:27,660 --> 00:07:29,440\niSNS is one of my favorites.\n\n172\n00:07:29,440 --> 00:07:35,050\nWindows server can be an iSNS server,\nbut it can't be an iSNS client.\n\n173\n00:07:35,050 --> 00:07:39,160\nSo if we're trying to manage Windows\nclients, iSNS is worthless to us, so\n\n174\n00:07:39,160 --> 00:07:40,420\nwe don't need it, right?\n\n175\n00:07:40,420 --> 00:07:46,760\nIf you've got a bunch of Linux or\nUnix based appliances that are running.\n\n176\n00:07:46,760 --> 00:07:48,370\nYou can use iSNS.\n\n177\n00:07:48,370 --> 00:07:50,170\nYou need to know when that's appropriate.\n\n178\n00:07:50,170 --> 00:07:54,000\nNot just how, but why.\n\n179\n00:07:54,000 --> 00:07:57,610\nThe other objectives,\nthey all fall right in line with that.\n\n180\n00:07:57,610 --> 00:07:59,960\nDesign and\nimplement network infrastructure.\n\n181\n00:07:59,960 --> 00:08:03,600\nSo when do we use DHCP and\nwhat's the best way to design it?\n\n182\n00:08:03,600 --> 00:08:05,130\nWhat about name resolution?\n\n183\n00:08:05,130 --> 00:08:08,620\nThere's DNS, but we also have WANs and\nsingle name resolution.\n\n184\n00:08:08,620 --> 00:08:12,030\nAnd while they're not so popular anymore,\nthere's times that we need those and so\n\n185\n00:08:12,030 --> 00:08:14,460\nhow do we design around that.\n\n186\n00:08:14,460 --> 00:08:16,550\nIP address management.\n\n187\n00:08:16,550 --> 00:08:19,720\nIP address management used to be neglected\nreally bad on the Microsoft exams.\n\n188\n00:08:19,720 --> 00:08:22,160\nThey would just say use DHCP and\nthat's it.\n\n189\n00:08:22,160 --> 00:08:26,780\nBut there are a lot of times, we need to\nhave static IPs assigned to machines.\n\n190\n00:08:26,780 --> 00:08:29,490\nAnd we need to track which ones we've\nused and which ones we haven't.\n\n191\n00:08:29,490 --> 00:08:32,890\nAnd so we'll get a chance to see some of\nthe different methods available for that.\n\n192\n00:08:34,700 --> 00:08:37,560\nWe've got design and\nimplement network access services.\n\n193\n00:08:37,560 --> 00:08:38,880\nRight?\nWe're talking about VPNs for\n\n194\n00:08:38,880 --> 00:08:39,430\nthe most part.\n\n195\n00:08:39,430 --> 00:08:42,860\nBut you'll see web applications,\nand proxies, remote desktops,\n\n196\n00:08:42,860 --> 00:08:44,980\nsome of the different\nsolutions that are in there.\n\n197\n00:08:44,980 --> 00:08:47,570\nFor being able to reach out and\naccess those systems,\n\n198\n00:08:47,570 --> 00:08:51,200\neven a little bit of high availability\nlike network load balancing.\n\n199\n00:08:51,200 --> 00:08:53,250\nAll of these pieces fit together.\n\n200\n00:08:53,250 --> 00:08:56,420\nWhen you learn how to do something,\nyou're learning it individually.\n\n201\n00:08:56,420 --> 00:09:00,080\nWhen you start planning and designing,\nyou're fitting the puzzle pieces together\n\n202\n00:09:00,080 --> 00:09:04,560\nand snapping these different technologies\nto each other to create a full solution.\n\n203\n00:09:04,560 --> 00:09:07,640\nAnd there's a lot of stuff we've\ngotta understand about that.\n\n204\n00:09:07,640 --> 00:09:09,140\nA lot of it,\nyou've probably already figured out,\n\n205\n00:09:09,140 --> 00:09:11,400\nbecause a lot of it's common sense, right?\n\n206\n00:09:11,400 --> 00:09:13,030\nIf I'm gonna bring up\na mission critical server,\n\n207\n00:09:13,030 --> 00:09:14,450\nI'd probably want to make it redundant.\n\n208\n00:09:14,450 --> 00:09:17,270\nSo while the web server\nis the critical part.\n\n209\n00:09:17,270 --> 00:09:20,360\nUsing something like network load\nbalancing is how I can get more than one\n\n210\n00:09:20,360 --> 00:09:21,160\nweb server in place.\n\n211\n00:09:21,160 --> 00:09:22,620\nSo I use them together.\n\n212\n00:09:22,620 --> 00:09:26,460\nAnd now, I've got my mission critical\nweb server and it's redundant.\n\n213\n00:09:26,460 --> 00:09:27,460\nI've created that solution.\n\n214\n00:09:30,380 --> 00:09:31,550\nOn the active directory,\n\n215\n00:09:31,550 --> 00:09:35,520\nwe actually get two different\nexam objective categories for it.\n\n216\n00:09:35,520 --> 00:09:38,360\nAnd you'll notice,\nthey account 20 to 25% of the exam.\n\n217\n00:09:38,360 --> 00:09:42,530\nSo, a minimum of 40% of the exam,\nbut as much as 50%,\n\n218\n00:09:42,530 --> 00:09:45,600\nis going to be straight\non active directory.\n\n219\n00:09:45,600 --> 00:09:49,890\nAnd they're talking about the logical,\nas well as physical designs.\n\n220\n00:09:49,890 --> 00:09:53,730\nOn the logical design side, we're\ntalking about our organizational units,\n\n221\n00:09:53,730 --> 00:09:58,150\nour group policy objects,\nour forest and domain structure.\n\n222\n00:09:58,150 --> 00:09:59,720\nAll of that is important.\n\n223\n00:09:59,720 --> 00:10:03,860\nAnd if we design right in the beginning,\nwe can have a very scalable,\n\n224\n00:10:03,860 --> 00:10:07,300\nvery flexible, and\npowerful active directory environment.\n\n225\n00:10:07,300 --> 00:10:10,470\nIf we designed it poorly in the beginning,\nwe've got to go and\n\n226\n00:10:10,470 --> 00:10:12,580\nfind out how to get out\nthat mess down the road.\n\n227\n00:10:12,580 --> 00:10:14,510\nIt can be really challenging and\nreally expensive.\n\n228\n00:10:15,720 --> 00:10:19,220\nOn the physical side,\nit's more based on server placement.\n\n229\n00:10:19,220 --> 00:10:21,960\nHow many domain controllers do I need?\n\n230\n00:10:21,960 --> 00:10:24,040\nWhen is a read-only\ndomain controller useful?\n\n231\n00:10:24,040 --> 00:10:25,710\nHow many global catalogs do I need?\n\n232\n00:10:25,710 --> 00:10:28,530\nAnd where should the global\ncatalogs be placed?\n\n233\n00:10:28,530 --> 00:10:32,050\nWhere physically, geographically,\nshould these catalogs be placed?\n\n234\n00:10:32,050 --> 00:10:35,060\nThese are concerns that\nare easier to fix down the road.\n\n235\n00:10:35,060 --> 00:10:36,680\nIf you make a mistake\non the physical side,\n\n236\n00:10:36,680 --> 00:10:39,800\nit's a lot easier to correct these,\nbut it's still important.\n\n237\n00:10:39,800 --> 00:10:43,280\nThere are a lot of organizations, I see\nthis all the time, where I'll go out to\n\n238\n00:10:43,280 --> 00:10:48,460\na company and they are not right sized for\ntheir domain controllers.\n\n239\n00:10:48,460 --> 00:10:52,760\nThey might have 5,000 employees and\n20 domain controllers.\n\n240\n00:10:52,760 --> 00:10:53,860\nAnd I look at them and I'm like, man,\n\n241\n00:10:53,860 --> 00:10:57,020\nyou have 5,000 employees,\nwhy do you have 20 domain controllers?\n\n242\n00:10:57,020 --> 00:10:58,640\nThat's a bit overkill isn't it?\n\n243\n00:10:58,640 --> 00:11:01,230\nThat's a ton of domain controllers.\n\n244\n00:11:01,230 --> 00:11:05,710\nAnd there are sometimes, when you need\nthat, when you need 20 domain controllers.\n\n245\n00:11:05,710 --> 00:11:07,090\nBut most organizations don't.\n\n246\n00:11:07,090 --> 00:11:08,850\nMost organizations need less.\n\n247\n00:11:08,850 --> 00:11:10,730\nSome organizations need even more.\n\n248\n00:11:10,730 --> 00:11:14,380\nYou might have a multi-national\norganization with the locations in\n\n249\n00:11:14,380 --> 00:11:15,650\nnumerous cities.\n\n250\n00:11:15,650 --> 00:11:17,680\nAnd you need a domain\ncontroller in each city.\n\n251\n00:11:17,680 --> 00:11:20,580\nSo you might have 500 domain controllers,\nbut it makes sense,\n\n252\n00:11:20,580 --> 00:11:22,910\nbecause you have 500 different locations.\n\n253\n00:11:22,910 --> 00:11:26,930\nBut, if you are one massive location,\nlike a university.\n\n254\n00:11:26,930 --> 00:11:31,290\nYou might have 60,000 students all\nright there on one university campus.\n\n255\n00:11:31,290 --> 00:11:34,140\nYou don't need hundreds of\ndomain controllers for that.\n\n256\n00:11:34,140 --> 00:11:39,290\nOne domain controller is capable of\nhandling 500 to 1500 users pretty easily.\n\n257\n00:11:39,290 --> 00:11:43,340\nSo you build based on that, scaling\nour domain controller infrastructure,\n\n258\n00:11:43,340 --> 00:11:48,000\nmaking sure that its where our users\nneed and where it's available.\n\n259\n00:11:48,000 --> 00:11:50,880\nHow to create a DC,\nthat's pretty easy, right.\n\n260\n00:11:50,880 --> 00:11:52,150\nBut why to create it?\n\n261\n00:11:52,150 --> 00:11:52,840\nWhy make one?\n\n262\n00:11:52,840 --> 00:11:53,580\nWhy put it here.\n\n263\n00:11:53,580 --> 00:11:56,400\nWhy put it there,\nthat stuff start to get really important.\n\n264\n00:11:56,400 --> 00:11:59,490\nSo it's a really neat certification exam,\nright?\n\n265\n00:11:59,490 --> 00:12:03,120\nBecause you're really starting to\nlearn the concept behind this.\n\n266\n00:12:03,120 --> 00:12:04,910\nI know we hear this from\nour user all the time,\n\n267\n00:12:04,910 --> 00:12:07,310\nis though, they'll go through an they'll\nlearn a technology and they'll say,\n\n268\n00:12:07,310 --> 00:12:11,550\nwow it's great, Don, we just learned this\ntechnology, but why would we use it?\n\n269\n00:12:11,550 --> 00:12:12,930\nWhy is this useful?\n\n270\n00:12:12,930 --> 00:12:15,660\nAnd we always try and\nhighlight that in our shows.\n\n271\n00:12:15,660 --> 00:12:19,170\nSo we've already covered some of\nthe why's with scenarios and so\n\n272\n00:12:19,170 --> 00:12:20,410\non in the other shows.\n\n273\n00:12:20,410 --> 00:12:23,330\nSo you've already been\nexposed to a lot of this.\n\n274\n00:12:23,330 --> 00:12:27,880\nBut for the 7413 show we hit specifically,\non what's gonna be targeted on the exam.\n\n275\n00:12:27,880 --> 00:12:30,910\nSo make sure that you've got\nthose concepts under your belt.\n\n276\n00:12:30,910 --> 00:12:35,160\nMaking sure that you grasp the when,\nthe why, the where, right?\n\n277\n00:12:35,160 --> 00:12:40,140\nThose other things that fall outside\nof the how that we learn in most exams.\n\n278\n00:12:40,140 --> 00:12:43,290\nNow, keep in mind,\nif you're going to get your MCSE,\n\n279\n00:12:43,290 --> 00:12:46,000\nthere's more than just the 70-413 exam.\n\n280\n00:12:46,000 --> 00:12:49,070\nYou'll need to move and\ndo the 70-414 also.\n\n281\n00:12:49,070 --> 00:12:52,740\nThat's the other piece here which\nis implementing an advanced server\n\n282\n00:12:52,740 --> 00:12:53,740\ninfrastructure.\n\n283\n00:12:53,740 --> 00:12:55,450\nWhich builds right on top of this one.\n\n284\n00:12:55,450 --> 00:12:59,030\nSo it makes sense to do 413 first,\nand then do 414 afterwards.\n\n285\n00:12:59,030 --> 00:13:01,680\nRight?\nAnd that's the order that we're gonna\n\n286\n00:13:01,680 --> 00:13:03,080\ncover them here on the show.\n\n287\n00:13:04,240 --> 00:13:05,430\nAll right.\n\n288\n00:13:05,430 --> 00:13:08,320\nThat's basically, all we need to\nknow about this certification and\n\n289\n00:13:08,320 --> 00:13:09,330\nwhat it covers.\n\n290\n00:13:09,330 --> 00:13:12,750\nThe only other thing is\nMicrosoft has just made a change\n\n291\n00:13:12,750 --> 00:13:16,640\nwhere all of their testing is\nbeing done through Pearson VUE.\n\n292\n00:13:16,640 --> 00:13:19,140\nYou used to be able to take\nthe exams at Prometric also.\n\n293\n00:13:19,140 --> 00:13:20,380\nAnd I think, that's still going on now.\n\n294\n00:13:20,380 --> 00:13:23,260\nBut by the time most of you watch\nthis video, that'll be over.\n\n295\n00:13:23,260 --> 00:13:25,870\nSo, Vue is the new testing location.\n\n296\n00:13:25,870 --> 00:13:29,681\nSo when you go to sign up for this exam,\nyou're actually gonna go to www.vue.com.\n\n297\n00:13:29,681 --> 00:13:33,010\nV-U-E.com and you'll register for\nthe exam there.\n\n298\n00:13:33,010 --> 00:13:35,880\nThey have testing centers\nall over the world.\n\n299\n00:13:35,880 --> 00:13:38,370\nSo you can find a testing\ncenter that's near you.\n\n300\n00:13:38,370 --> 00:13:39,590\nThe exam costs $150, right?\n\n301\n00:13:39,590 --> 00:13:42,770\nThat was plastered on one\nof these pages I had up.\n\n302\n00:13:42,770 --> 00:13:45,860\nWhich is not incredibly expensive\ncompared to a lot of vendors that have\n\n303\n00:13:45,860 --> 00:13:46,910\nbeen raising their prices.\n\n304\n00:13:46,910 --> 00:13:48,780\nMicrosoft has kept theirs pretty low.\n\n305\n00:13:48,780 --> 00:13:50,090\nSo it's out there.\n\n306\n00:13:50,090 --> 00:13:53,300\nOh, just got a remark in the chat\nroom there, thank you James.\n\n307\n00:13:53,300 --> 00:13:55,030\nThat December 31st,\n\n308\n00:13:55,030 --> 00:14:00,340\n2014 is the last that you'll be able\nto take Prometric exams for Microsoft.\n\n309\n00:14:00,340 --> 00:14:01,740\nSo after that, it'll be all Vue.\n\n310\n00:14:01,740 --> 00:14:04,530\nBut even today, they're on Vue already.\n\n311\n00:14:04,530 --> 00:14:06,580\nSo you might as well just jump over and\ndo Vue,\n\n312\n00:14:06,580 --> 00:14:09,770\nunless it's really convenient\nto get to that Prometric center.\n\n313\n00:14:09,770 --> 00:14:12,832\nVue is where you're\nnormally gonna do that.\n\n314\n00:14:12,832 --> 00:14:14,830\nAll right and oh, actually,\nlooking right here at the page,\n\n315\n00:14:14,830 --> 00:14:16,990\nI got the two giant buttons to\nschedule with Pearson VUE and\n\n316\n00:14:16,990 --> 00:14:19,740\nschedule with Prometric if I'd\nbother to look at the page.\n\n317\n00:14:19,740 --> 00:14:22,220\nBut that button will\ngo away December 31st.\n\n318\n00:14:22,220 --> 00:14:25,030\nThat's actually written, you know,\nif I'd read the stuff in front of me.\n\n319\n00:14:25,030 --> 00:14:27,410\nIt's right there on the page.\n\n320\n00:14:27,410 --> 00:14:32,400\nBut yeah, so Pearson's VUE is going to\nbe their new exclusive exam provider.\n\n321\n00:14:32,400 --> 00:14:36,240\nSo just keep that in mind as you\nget closer to taking that exam.\n\n322\n00:14:36,240 --> 00:14:37,490\nAll right.\nWell, we're really excited\n\n323\n00:14:37,490 --> 00:14:38,070\nabout this show.\n\n324\n00:14:38,070 --> 00:14:40,600\nWe're excited any time we\nlaunch a new show on IT Pro TV.\n\n325\n00:14:40,600 --> 00:14:42,810\nYou definitely want to stay tuned and\n\n326\n00:14:42,810 --> 00:14:45,460\ncatch the episodes as we move\nthrough all of this content.\n\n327\n00:14:45,460 --> 00:14:48,870\nAnd remember, if you have any questions,\nyou can always reach out to us.\n\n328\n00:14:48,870 --> 00:14:53,150\nLive during the show, you'll see the chat\nbox right beneath the live video.\n\n329\n00:14:53,150 --> 00:14:53,900\nYou can watch that and\n\n330\n00:14:53,900 --> 00:14:57,230\nthrow in your messages there,\nand we help as best we can.\n\n331\n00:14:57,230 --> 00:15:01,250\nIf you have questions after the show,\nif you just watched this intro and\n\n332\n00:15:01,250 --> 00:15:06,060\nyou decided you're thinking about\ndoing the 7413, but you're not sure.\n\n333\n00:15:06,060 --> 00:15:07,360\nJump into our Q and A forums.\n\n334\n00:15:07,360 --> 00:15:09,860\nYou can post questions there\nin our Microsoft forum.\n\n335\n00:15:09,860 --> 00:15:12,660\nAnd we'll monitor, answer,\ngive you whatever advice we can.\n\n336\n00:15:12,660 --> 00:15:14,220\nAnd other viewers will\ngive you advice too.\n\n337\n00:15:14,220 --> 00:15:17,440\nYou'll find there's a lot of people\nthat are passionate about the MCSE.\n\n338\n00:15:17,440 --> 00:15:18,840\nIt's an important certification.\n\n339\n00:15:19,960 --> 00:15:21,640\nAll right, well, just keep that in mind.\n\n340\n00:15:21,640 --> 00:15:25,292\nIf you have any questions, feel free to\nask and I'll see you during the show.\n\n341\n00:15:25,292 --> 00:15:31,139\n[MUSIC]\n\n",
          "vimeoId": "106972325"
        },
        {
          "description": "",
          "length": "4592",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/002-Planning-Server-Deployments.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/002-Planning-Server-Deployments-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/002-Planning-Server-Deployments-sm.jpg",
          "title": "Planning Server Deployments",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,485 --> 00:00:33,993\nAll right.\n\n3\n00:00:33,993 --> 00:00:36,519\nGood morning, good afternoon,\nand good evening, and\n\n4\n00:00:36,519 --> 00:00:38,581\nwelcome back to another\nepisode of ITProTV.\n\n5\n00:00:38,581 --> 00:00:40,800\nI'm your host Don Pezet.\n\n6\n00:00:40,800 --> 00:00:42,370\nBack again with Mr. Mike Rodrick.\n\n7\n00:00:42,370 --> 00:00:43,000\nHow's it going Mike?\n\n8\n00:00:43,000 --> 00:00:43,790\n>> Fantastic Don.\n\n9\n00:00:43,790 --> 00:00:44,630\nHow you doing today?\n\n10\n00:00:44,630 --> 00:00:45,530\n>> I am doing great.\n\n11\n00:00:45,530 --> 00:00:50,320\nAnd I said back again but we're really\nkicking off an all new show here.\n\n12\n00:00:50,320 --> 00:00:51,980\n>> We are.\n>> So, for some of our viewers,\n\n13\n00:00:51,980 --> 00:00:55,210\nthis might be the very first episode\nof ITProTV you've ever watched.\n\n14\n00:00:55,210 --> 00:00:56,232\nIsn't that nice pressure, huh?\n\n15\n00:00:56,232 --> 00:00:58,660\n>> Yeah.\n[LAUGH] No pressure there.\n\n16\n00:00:58,660 --> 00:01:00,907\n>> So we either do a good job, or\n\n17\n00:01:00,907 --> 00:01:02,973\nthat's it [CROSSTALK]\n>> Dude,\n\n18\n00:01:02,973 --> 00:01:05,140\nwe would never do that to you guys.\n\n19\n00:01:05,140 --> 00:01:08,540\n>> All right, well, we're always\nexcited to kick off a new show, but\n\n20\n00:01:08,540 --> 00:01:09,780\nthis ones even bigger, right?\n\n21\n00:01:09,780 --> 00:01:13,070\nBecause it's not just a new show,\nit's a whole new level of certification.\n\n22\n00:01:13,070 --> 00:01:13,920\n>> It is.\n\n23\n00:01:13,920 --> 00:01:16,680\n>> Up until now, all the Microsoft shows\nwe've done have really been focused on\n\n24\n00:01:16,680 --> 00:01:18,430\nthe MCSA.\n\n25\n00:01:18,430 --> 00:01:20,420\nNow, we're going MCSE.\n\n26\n00:01:20,420 --> 00:01:22,870\nAnd that means that at this point,\n\n27\n00:01:22,870 --> 00:01:28,115\nwe've kind of gotten past\nthe the part timers you know.\n\n28\n00:01:28,115 --> 00:01:29,360\n>> [LAUGH]\n>> The newbies,\n\n29\n00:01:29,360 --> 00:01:32,250\npeople are getting started, now we're\nmoving up the people that have really you\n\n30\n00:01:32,250 --> 00:01:35,330\nknow they've earned they've paid\ntheir dues out there in the field.\n\n31\n00:01:35,330 --> 00:01:35,850\n>> Yeah.\nAbsolutely.\n\n32\n00:01:35,850 --> 00:01:37,300\n>> And they're ready to learn\nthat higher level stuff.\n\n33\n00:01:37,300 --> 00:01:38,100\n>> That's pretty cool.\n\n34\n00:01:38,100 --> 00:01:41,800\nYeah because in MCSA, we really we're the\nones that end up implementing right we get\n\n35\n00:01:41,800 --> 00:01:44,830\nthat design handed to us and\nthen we have to go out there and actually.\n\n36\n00:01:44,830 --> 00:01:46,000\nPut it in place.\n\n37\n00:01:46,000 --> 00:01:49,660\nThe MCSE is the one that sits there and\nhands us the design.\n\n38\n00:01:50,840 --> 00:01:52,330\n>> So the design.\n\n39\n00:01:52,330 --> 00:01:53,750\nBoy, that can be challenging.\n\n40\n00:01:53,750 --> 00:01:58,430\nI know I've said this before, but a lot of\nthe stuff that we configure, when you're\n\n41\n00:01:58,430 --> 00:02:02,640\njust doing the configuration, if you make\na mistake, it's pretty easy to fix, right?\n\n42\n00:02:02,640 --> 00:02:05,360\nSo if I was supposed to give\na server one IP address, but\n\n43\n00:02:05,360 --> 00:02:08,300\nI gave it a different one by accident,\nI just go in and change the IP right?\n\n44\n00:02:08,300 --> 00:02:09,630\nNot a big deal.\n\n45\n00:02:09,630 --> 00:02:10,942\nHopefully nobody even noticed.\n\n46\n00:02:10,942 --> 00:02:11,455\n>> Yeah.\n>> [LAUGH]\n\n47\n00:02:11,455 --> 00:02:13,950\n>> But, when it comes to your design,\n\n48\n00:02:13,950 --> 00:02:18,190\nwhat if I was supposed to have\na parent and a child domain and\n\n49\n00:02:18,190 --> 00:02:20,760\ninstead I created two trees, right\n>> Right.\n\n50\n00:02:20,760 --> 00:02:22,370\n>> Two separate domains.\n\n51\n00:02:22,370 --> 00:02:25,620\nCan you convert one to a child\ndomain after you've made it?\n\n52\n00:02:25,620 --> 00:02:26,400\nNo.\nAnd,\n\n53\n00:02:26,400 --> 00:02:31,700\nto make a change at that level is\nusually not possible first off.\n\n54\n00:02:31,700 --> 00:02:32,440\n>> Right.\nYeah.\n\n55\n00:02:32,440 --> 00:02:35,550\nAnd even when it is possible,\nthe amount of\n\n56\n00:02:35,550 --> 00:02:39,250\neffort that it takes to implement that\nchange is going to be timely and costly,\n\n57\n00:02:39,250 --> 00:02:42,200\nright, so it's definitely not\nsomething you want to do.\n\n58\n00:02:42,200 --> 00:02:47,440\nThat's why this is not the newbies anymore\nthis is us moving up to people that\n\n59\n00:02:47,440 --> 00:02:51,370\nhave done their time in the field,\nthat understand how the systems work and\n\n60\n00:02:51,370 --> 00:02:55,070\nnow they're ready to design networks\nthat are the way they want them to be.\n\n61\n00:02:55,070 --> 00:02:57,820\n>> Right.\n>> I always equate this to the why\n\n62\n00:02:57,820 --> 00:02:58,650\nversus the how.\n\n63\n00:02:58,650 --> 00:02:59,340\nRight?\n>> Yes.\n\n64\n00:02:59,340 --> 00:03:03,240\nSo in all the MCSA shows\nit's how to do things,\n\n65\n00:03:03,240 --> 00:03:05,340\nnow we're gonna talk\nabout why to do things.\n\n66\n00:03:05,340 --> 00:03:08,180\nNow, that does make things\na little bit different\n\n67\n00:03:08,180 --> 00:03:10,430\nwhere as the other ones\nwere a lot more hands on.\n\n68\n00:03:10,430 --> 00:03:13,850\nWe were always remoted into machines and\nshowing how to do things.\n\n69\n00:03:13,850 --> 00:03:18,300\nFor this show, it's going to be a lot more\ndiagrams and pictures and concepts and\n\n70\n00:03:18,300 --> 00:03:20,320\nstuff like that so,\nit's definitely a different beast.\n\n71\n00:03:21,450 --> 00:03:24,300\n>> Yeah, but\nstill exciting none the less, I think.\n\n72\n00:03:24,300 --> 00:03:25,380\nAnd this is for 413.\n\n73\n00:03:25,380 --> 00:03:29,380\nFor 414 you start to get back into\nthe little more hands on implementing\n\n74\n00:03:29,380 --> 00:03:30,320\nkinds of things.\n\n75\n00:03:30,320 --> 00:03:34,130\nBut for 413 it's very design heavy, and\nthat's what we're going to be starting,\n\n76\n00:03:34,130 --> 00:03:38,570\nis if we want to have\na Windows Server infrastructure,\n\n77\n00:03:38,570 --> 00:03:41,850\nsooner or later we're going to\nhave to install Windows Server.\n\n78\n00:03:41,850 --> 00:03:45,480\nAnd in the 410 and\n411 shows or 7410, 7411.\n\n79\n00:03:45,480 --> 00:03:49,770\nYou saw how to install a server, right?\n\n80\n00:03:49,770 --> 00:03:53,440\nHow to pop in a DVD and do an install,\nor how to do a network install.\n\n81\n00:03:53,440 --> 00:03:56,290\nHow to do it through WDS,\nthe Windows Deployment Server.\n\n82\n00:03:56,290 --> 00:03:58,270\nYou saw all those different methods,\n\n83\n00:03:58,270 --> 00:04:00,510\nnow we need to look at\nthe design aspect of that.\n\n84\n00:04:00,510 --> 00:04:04,070\nAnd figure out which one's the right\nsolution for our network, and\n\n85\n00:04:04,070 --> 00:04:05,650\nwhich one's going to be.\n\n86\n00:04:05,650 --> 00:04:07,030\nOr how to properly implement it.\n\n87\n00:04:08,260 --> 00:04:10,660\n>> Yeah, with so many different solutions,\nI mean, we really got to make sure we're\n\n88\n00:04:10,660 --> 00:04:13,090\npicking the right one that's gonna be\nthe most efficient for our environment.\n\n89\n00:04:14,330 --> 00:04:18,040\n>> Now before we dive into the topic,\nI want to bring the objectives up\n\n90\n00:04:18,040 --> 00:04:20,680\nhere on the screen just so\nyou guys can get a glance at it.\n\n91\n00:04:20,680 --> 00:04:22,140\nAnd what I've done,\n\n92\n00:04:22,140 --> 00:04:25,330\nis I've pulled up the objectives\nhere right from Microsoft's website.\n\n93\n00:04:25,330 --> 00:04:28,070\nSo this is right off of\nMicrosoft's website.\n\n94\n00:04:28,070 --> 00:04:32,040\nI've reformatted it a little bit,\nbecause they do this horrible deal.\n\n95\n00:04:32,040 --> 00:04:35,090\nLike a thousand semicolons and\nit's one big long sentence.\n\n96\n00:04:35,090 --> 00:04:38,360\nSo, I've formatted it into an outline\nbecause that's what I like.\n\n97\n00:04:38,360 --> 00:04:41,180\nBut, what you'll notice is that\nour first objective is plan and\n\n98\n00:04:41,180 --> 00:04:42,800\ndeploy a server infrastructure.\n\n99\n00:04:42,800 --> 00:04:44,760\nAnd it's basically a quarter of the exam.\n\n100\n00:04:44,760 --> 00:04:47,390\nA quarter of the exam comes\nright out of this topic here.\n\n101\n00:04:47,390 --> 00:04:49,370\nSo it's a pretty big one.\n\n102\n00:04:49,370 --> 00:04:52,820\nBut the reason I wanted to pull this up\nis I wanted to show you some key words.\n\n103\n00:04:52,820 --> 00:04:54,540\nDesign and plan, right.\n\n104\n00:04:55,700 --> 00:04:57,390\nDesign and plan.\n\n105\n00:04:57,390 --> 00:04:59,880\nFor this exam it's not saying implement.\n\n106\n00:04:59,880 --> 00:05:01,620\nImplement, that means do it.\n\n107\n00:05:01,620 --> 00:05:04,210\nGet out there and do this activity.\n\n108\n00:05:04,210 --> 00:05:05,540\nThis is all designed and planned.\n\n109\n00:05:05,540 --> 00:05:08,170\nYou're gonna see that throughout\nthe objectives for this exam,\n\n110\n00:05:08,170 --> 00:05:12,490\nas we go even beyond this show\ninto the follow up shows for 7413.\n\n111\n00:05:12,490 --> 00:05:14,390\nYou'll see a lot of that.\n\n112\n00:05:14,390 --> 00:05:17,220\nEvery now and then you'll hit a section\nlike this one, where you've got implement.\n\n113\n00:05:17,220 --> 00:05:18,360\nSo here it is.\n\n114\n00:05:18,360 --> 00:05:21,320\nConfigurate multi-site topology and\ntransport servers.\n\n115\n00:05:21,320 --> 00:05:26,076\nWell, we've already done\nthe implementation side in the 7410 and\n\n116\n00:05:26,076 --> 00:05:27,530\n7411 show.\n\n117\n00:05:27,530 --> 00:05:31,030\nThat knowledge is expected for\nyou to have it, all right?\n\n118\n00:05:31,030 --> 00:05:34,120\nSo just knowing how to\ndesign it isn’t enough.\n\n119\n00:05:34,120 --> 00:05:36,770\nOn the exam they want you to know both.\n\n120\n00:05:36,770 --> 00:05:40,120\nAnd that’s why the MCSA is\na prerequisite for the MCSE.\n\n121\n00:05:40,120 --> 00:05:47,190\nYou need to have passed the 7410, 411 and\n412 exams and understand how to do things.\n\n122\n00:05:47,190 --> 00:05:50,160\nAnd then the why makes a lot more sense.\n\n123\n00:05:50,160 --> 00:05:52,100\nSo if you're just getting started and\n\n124\n00:05:52,100 --> 00:05:54,670\nyou said oh man I'm going\nto tune into the 7413 show.\n\n125\n00:05:54,670 --> 00:05:56,440\nI want to get my MCSE.\n\n126\n00:05:56,440 --> 00:05:58,440\nWell, that's not a place to start.\n\n127\n00:05:58,440 --> 00:06:00,465\nRight?\nYou start with 7410 and\n\n128\n00:06:00,465 --> 00:06:01,375\nmove up from there.\n\n129\n00:06:01,375 --> 00:06:03,325\nSo keep that in mind.\n\n130\n00:06:03,325 --> 00:06:04,615\nWe'll see these keywords.\n\n131\n00:06:04,615 --> 00:06:07,095\nDesign, plan, right?\n\n132\n00:06:07,095 --> 00:06:08,935\nYou'll see those\nthroughout the objectives.\n\n133\n00:06:08,935 --> 00:06:12,110\nAlmost everyone of them being design and\nplan.\n\n134\n00:06:12,110 --> 00:06:16,070\nWith a few configured implement thrown\nin there, but for the most part,\n\n135\n00:06:16,070 --> 00:06:17,510\nit's all design and plan.\n\n136\n00:06:17,510 --> 00:06:18,010\n>> Yeah.\n\n137\n00:06:19,100 --> 00:06:20,650\n>> All right, so let's get started.\n\n138\n00:06:20,650 --> 00:06:21,170\n>> Let's do it.\n\n139\n00:06:21,170 --> 00:06:25,110\n>> So the very first one is\njust design considerations,\n\n140\n00:06:25,110 --> 00:06:28,120\nincluding images and\nbare metal/virtual deployment and\n\n141\n00:06:28,120 --> 00:06:30,685\nit really blends into all the other\nobjectives that are coming up.\n\n142\n00:06:30,685 --> 00:06:33,480\n[LAUGH]\n>> I mentioned the most basic\n\n143\n00:06:33,480 --> 00:06:34,400\nform of install.\n\n144\n00:06:34,400 --> 00:06:36,020\nThe install that we learned first, right?\n\n145\n00:06:36,020 --> 00:06:37,980\nYou take the DVD, you put it in the drive.\n\n146\n00:06:37,980 --> 00:06:38,920\n>> You slap it in.\n\n147\n00:06:38,920 --> 00:06:40,780\n>> You click ready to click next a bunch.\n\n148\n00:06:40,780 --> 00:06:44,060\n>> It's not necessarily a bad\nway to install a server, right?\n\n149\n00:06:44,060 --> 00:06:44,640\n>> Yeah.\n>> I mean,\n\n150\n00:06:44,640 --> 00:06:47,700\nif you're a small shop and you've got just\na couple servers or something like that.\n\n151\n00:06:47,700 --> 00:06:49,300\nThat would work for you.\n\n152\n00:06:49,300 --> 00:06:53,780\nIf I needed a server right now for on the\nshow, if I just wanted to whip something\n\n153\n00:06:53,780 --> 00:06:56,850\nup real quick to show you guys, that's\nthe type of install I'm gonna do, right?\n\n154\n00:06:56,850 --> 00:06:57,910\nIt makes sense.\n\n155\n00:06:57,910 --> 00:07:00,520\nI don't need a whole lot of crazy\ninfrastructure to do that kind\n\n156\n00:07:00,520 --> 00:07:01,300\nof an install.\n\n157\n00:07:01,300 --> 00:07:03,280\n>> Right.\n>> It just doesn't scale well.\n\n158\n00:07:03,280 --> 00:07:03,870\nRight?\n\n159\n00:07:03,870 --> 00:07:05,610\nSo if you're doing one, five,\n\n160\n00:07:05,610 --> 00:07:09,900\nmaybe even ten installs,\nuse that disk, great, fine, it works.\n\n161\n00:07:11,080 --> 00:07:14,710\nYou start to lose some stuff\nthough when you start to get to\n\n162\n00:07:14,710 --> 00:07:15,780\nhundreds of machines\n>> [LAUGH]\n\n163\n00:07:15,780 --> 00:07:17,280\n>> Or thousands of machines.\n\n164\n00:07:17,280 --> 00:07:19,846\nHow many disks do you need laying around?\n\n165\n00:07:19,846 --> 00:07:21,720\n[LAUGH] And all that.\n\n166\n00:07:21,720 --> 00:07:26,430\nSo there's different solutions we start\nto move through to get around that.\n\n167\n00:07:26,430 --> 00:07:30,230\nIt does vary based on whether\nit's a bare metal install or\n\n168\n00:07:30,230 --> 00:07:31,370\nif it's a virtual deployment.\n\n169\n00:07:31,370 --> 00:07:34,070\nThere's a lot of considerations\nthat we have to think about when\n\n170\n00:07:34,070 --> 00:07:34,890\nwe're doing these.\n\n171\n00:07:34,890 --> 00:07:39,440\nFirst off, you know, Mike,\nlet's add to this a little bit.\n\n172\n00:07:39,440 --> 00:07:42,497\nI always like to post my show\nnotes with the episode, so\n\n173\n00:07:42,497 --> 00:07:44,563\nanything we write here we'll post.\n\n174\n00:07:44,563 --> 00:07:47,450\nWhen we talk about design considerations,\n\n175\n00:07:47,450 --> 00:07:51,906\nwhat are some of the different\nmethods of doing an install, right?\n\n176\n00:07:51,906 --> 00:07:53,682\nSo there's the DVD based install.\n\n177\n00:07:53,682 --> 00:07:54,849\nEasy enough.\n\n178\n00:07:54,849 --> 00:07:58,794\nWe could do an ISO install,\nvery handy in our virtual environments,\n\n179\n00:07:58,794 --> 00:08:03,160\ncuz it's very easy to pop out an ISO into\na virtual machine and do it that way.\n\n180\n00:08:03,160 --> 00:08:03,800\n>> Yeah.\n\n181\n00:08:03,800 --> 00:08:05,160\n>> Similar to a DVD install.\n\n182\n00:08:05,160 --> 00:08:07,990\nJust a little more stable because I\ndon't have the actual disk that I've\n\n183\n00:08:07,990 --> 00:08:08,972\ngotta manage.\n\n184\n00:08:08,972 --> 00:08:12,160\n>> Yeah, and great point there,\nbecause these days we're installing in\n\n185\n00:08:12,160 --> 00:08:15,700\na virtual machine probably more often\nthan we are in a physical machine, and so\n\n186\n00:08:15,700 --> 00:08:18,630\na lot of us honestly don't\neven carry DVDs anymore.\n\n187\n00:08:18,630 --> 00:08:21,100\nYou just have a USB stick\nwith all your ISOs on it.\n\n188\n00:08:21,100 --> 00:08:22,920\nThat's a pretty common thing.\n\n189\n00:08:22,920 --> 00:08:24,920\n>> We could do a USB-based install.\n\n190\n00:08:25,940 --> 00:08:28,020\nIt's kind of along the lines\nof the DVD though,\n\n191\n00:08:28,020 --> 00:08:31,850\nwhere it's still gonna be one\nmachine at a time kinda thing.\n\n192\n00:08:31,850 --> 00:08:35,370\nBut a little bit easier than the DVD in\nthe fact that one of the downsides of\n\n193\n00:08:35,370 --> 00:08:36,645\nthe DVD is it's slow.\n\n194\n00:08:36,645 --> 00:08:38,820\n>> Mm-hm.\n>> That transfer speed on our optical\n\n195\n00:08:38,820 --> 00:08:41,230\ndrives is not gonna keep up with our USBs.\n\n196\n00:08:41,230 --> 00:08:43,940\nAnd it's difficult to change.\n\n197\n00:08:43,940 --> 00:08:45,840\nHow do I put an answer file in there?\n\n198\n00:08:45,840 --> 00:08:47,550\nHow do I slip in an update?\n\n199\n00:08:47,550 --> 00:08:50,670\nI've gotta go and\nI've gotta break that ISO down.\n\n200\n00:08:50,670 --> 00:08:53,180\nGet some tool to kinda\nslip that stuff in there.\n\n201\n00:08:53,180 --> 00:08:55,180\nRebuild that ISO, burn it back to a disk.\n\n202\n00:08:55,180 --> 00:08:58,065\nUSB, I can throw my answer\nfile right there on it.\n\n203\n00:08:58,065 --> 00:09:00,445\n>> Yeah, I remember back in the NT4 days.\n\n204\n00:09:00,445 --> 00:09:04,000\nRight?\nI'm an NT4, CSE or several versions, but\n\n205\n00:09:04,000 --> 00:09:05,500\nthat's where I got started.\n\n206\n00:09:05,500 --> 00:09:08,840\nAnd I used to teach those\ncourses forever ago, and\n\n207\n00:09:08,840 --> 00:09:11,400\nwhat we would do is we would teach for\nan unattended install.\n\n208\n00:09:11,400 --> 00:09:13,455\nIf you wanted it to be\nan automated install.\n\n209\n00:09:13,455 --> 00:09:14,570\n>> Mm-hm.\n>> You'd have your DVD, and\n\n210\n00:09:14,570 --> 00:09:16,880\nyou'd have a floppy disc\nwith the answer file.\n\n211\n00:09:16,880 --> 00:09:19,710\nAnd so you'd pop the DVD in,\npop the floppy disc in and go.\n\n212\n00:09:19,710 --> 00:09:21,900\nBut-\n>> What a 10.TXT is that time, right?\n\n213\n00:09:21,900 --> 00:09:23,760\n>> Yeah, yeah.\nThat's it.\n\n214\n00:09:23,760 --> 00:09:25,505\nBut we don't have floppy\ndisk drives anymore.\n\n215\n00:09:25,505 --> 00:09:28,169\n[LAUGH] So\nif you wanted to burn it on the DVD,\n\n216\n00:09:28,169 --> 00:09:31,801\nyou always had this headache\nof the boot record on the DVD.\n\n217\n00:09:31,801 --> 00:09:32,497\n>> Mm-hm.\n>> And so\n\n218\n00:09:32,497 --> 00:09:37,372\nI'd use these extraction utilities to pull\nout the boot record, modify the image,\n\n219\n00:09:37,372 --> 00:09:38,754\nit was a real headache.\n\n220\n00:09:38,754 --> 00:09:40,254\nUSB installs are super easy.\n\n221\n00:09:40,254 --> 00:09:40,874\n>> Absolutely.\n\n222\n00:09:40,874 --> 00:09:42,795\n>> You can just stick\nthe unattend file right there.\n\n223\n00:09:42,795 --> 00:09:44,426\n>> Mm-hm.\n>> That helps to relieve a lot of\n\n224\n00:09:44,426 --> 00:09:45,950\nthe pressure of a physical install.\n\n225\n00:09:45,950 --> 00:09:47,040\n>> Yeah.\n\n226\n00:09:47,040 --> 00:09:48,921\n>> I mentioned DVD, ISO, USB installs,\n\n227\n00:09:48,921 --> 00:09:51,915\nthey don't scale well if you\nhave to do hundreds of machines.\n\n228\n00:09:51,915 --> 00:09:52,790\n>> Mm-hm.\n>> Well,\n\n229\n00:09:52,790 --> 00:09:54,935\nif you've got an unattend\nfile right there.\n\n230\n00:09:54,935 --> 00:09:55,470\n>> Mm-hm.\n\n231\n00:09:55,470 --> 00:09:58,740\n>> That answers all of the questions, then\nyou're really just popping in the disk and\n\n232\n00:09:58,740 --> 00:09:59,440\nbooting the system up.\n\n233\n00:09:59,440 --> 00:10:00,950\nAnd then it runs through and does-\n>> Absolutely.\n\n234\n00:10:00,950 --> 00:10:01,920\n>> The install for you.\n\n235\n00:10:01,920 --> 00:10:03,680\n>> It knows where to look and\nwhat to look for.\n\n236\n00:10:03,680 --> 00:10:05,200\n>> It's not so bad.\n>> And you're good to go.\n\n237\n00:10:05,200 --> 00:10:09,490\n>> So the problem with doing that,\neven with an unattend file,\n\n238\n00:10:09,490 --> 00:10:13,440\nis it's kind of hard to create\nuniqueness between the machines, right?\n\n239\n00:10:13,440 --> 00:10:16,600\nThat if I have an unattend file\nthat's got a series of answers.\n\n240\n00:10:16,600 --> 00:10:18,310\nAnd if I used that to\ninstall on 5,000 machines,\n\n241\n00:10:18,310 --> 00:10:20,920\nthose 5,000 machines are pretty\nmuch gonna be the same right?\n\n242\n00:10:20,920 --> 00:10:21,430\n>> Yeah, absolutely.\n\n243\n00:10:22,460 --> 00:10:26,735\n>> You can allow for variations like the\nWindows machine name or the IP address.\n\n244\n00:10:26,735 --> 00:10:28,810\n>> Mm-hm.\n>> But they're mostly gonna be the same.\n\n245\n00:10:28,810 --> 00:10:30,060\n>> For the most part they're the same.\n\n246\n00:10:30,060 --> 00:10:33,640\nSo, maybe if you wanted to start\nout with setting up 50 machines.\n\n247\n00:10:33,640 --> 00:10:36,200\nAnd then you were gonna go back and\nindividualize them, add rules or\n\n248\n00:10:36,200 --> 00:10:38,180\nsomething, but that's still a lot of work.\n\n249\n00:10:38,180 --> 00:10:42,190\n>> Yeah, a great example of where you\nmight want to do something like this would\n\n250\n00:10:42,190 --> 00:10:43,015\nbe like a school?\n\n251\n00:10:43,015 --> 00:10:44,910\n>> Mm-hm.\n>> Maybe you just got 50 new computers for\n\n252\n00:10:44,910 --> 00:10:45,950\na computer lab.\n\n253\n00:10:45,950 --> 00:10:48,056\nWell you want all those 50\ncomputers to be the same.\n\n254\n00:10:48,056 --> 00:10:49,560\n>> Mm-hm.\n>> Same basic configuration.\n\n255\n00:10:49,560 --> 00:10:53,470\nSo an unattend answer file coupled\nwith Windows works really well.\n\n256\n00:10:53,470 --> 00:10:56,190\nBut what it if I have other things\nlike third party applications I wanna\n\n257\n00:10:56,190 --> 00:10:56,840\ninstall, right?\n\n258\n00:10:56,840 --> 00:10:59,500\nWhat if I wanna start making\nthese machines unique?\n\n259\n00:10:59,500 --> 00:11:02,440\nThese type of installs don't\nreally allow for that, right?\n\n260\n00:11:02,440 --> 00:11:06,870\nSo that's where we start to get into\nmore complex types deployments, right?\n\n261\n00:11:06,870 --> 00:11:08,870\nThings where we start\nbringing in third party, or\n\n262\n00:11:08,870 --> 00:11:10,460\nadditional software to manage it.\n\n263\n00:11:10,460 --> 00:11:12,065\nSoftware like WDS.\n\n264\n00:11:12,065 --> 00:11:12,650\n>> Mm-hm.\n\n265\n00:11:12,650 --> 00:11:14,300\n>> And SCCM, right?\n\n266\n00:11:14,300 --> 00:11:17,496\nAnd we're talking about\nthe Windows Deployment Services.\n\n267\n00:11:17,496 --> 00:11:19,620\n>> My personal favorite.\n\n268\n00:11:19,620 --> 00:11:22,270\n>> Or Windows Deployment Server,\nnot Services.\n\n269\n00:11:22,270 --> 00:11:26,490\nAnd then we've got\nthe Systems Center Configuration Manager,\n\n270\n00:11:28,870 --> 00:11:30,545\nwhich it's amazing software.\n\n271\n00:11:30,545 --> 00:11:31,250\n[LAUGH]\n>> Yes, it is.\n\n272\n00:11:31,250 --> 00:11:32,250\nIt's very powerful.\n\n273\n00:11:32,250 --> 00:11:33,970\nI mean, it can do just about anything.\n\n274\n00:11:33,970 --> 00:11:35,095\n>> It's a lot of infrastructure.\n\n275\n00:11:35,095 --> 00:11:36,190\n>> [LAUGH]\n>> So\n\n276\n00:11:36,190 --> 00:11:38,455\nwe're talking about\nincreased complexity here.\n\n277\n00:11:38,455 --> 00:11:38,980\nRight?\n\n278\n00:11:38,980 --> 00:11:43,735\nIf you're a small business, you're\nprobably not setting up WDS or SCCM.\n\n279\n00:11:43,735 --> 00:11:47,840\nWe're talking about system networks where\nyou have hundreds of thousands of servers,\n\n280\n00:11:47,840 --> 00:11:49,290\nI'm not even talking about\nwork stations right,\n\n281\n00:11:49,290 --> 00:11:51,611\nyour work stations would\nbe even higher than that.\n\n282\n00:11:51,611 --> 00:11:52,962\n>> Yup.\n>> To need the infrastructure like this to\n\n283\n00:11:52,962 --> 00:11:53,584\nbe able to manage it.\n\n284\n00:11:53,584 --> 00:11:55,494\n>> Mm-hm.\n\n285\n00:11:55,494 --> 00:11:57,850\n>> WDS is probably the easiest to deploy.\n\n286\n00:11:59,200 --> 00:12:00,275\nIt's just a role on a server.\n\n287\n00:12:00,275 --> 00:12:00,840\n>> Mm-hm.\n>> So\n\n288\n00:12:00,840 --> 00:12:03,870\nyou know its built into Windows server,\nwe check off that role and\n\n289\n00:12:03,870 --> 00:12:05,890\nnow a WDS server is up and running.\n\n290\n00:12:05,890 --> 00:12:07,245\n>> All right.\n>> We can create images.\n\n291\n00:12:07,245 --> 00:12:07,920\n>> Mm-hm.\n\n292\n00:12:07,920 --> 00:12:10,670\n>> And in those images,\nwe can have third party software.\n\n293\n00:12:10,670 --> 00:12:13,770\n>> Yeah, we can do what we call our thick\nimages where we've already installed,\n\n294\n00:12:13,770 --> 00:12:17,220\nif we know what software needs to be\na part of that image ahead of time, we can\n\n295\n00:12:17,220 --> 00:12:21,012\njust when we create our reference machine,\nwe can include that software in there.\n\n296\n00:12:21,012 --> 00:12:23,960\nAnd then we deploy it out,\nit's already there and we're good to go.\n\n297\n00:12:23,960 --> 00:12:25,580\nBut again,\nkinda like back to what you say,\n\n298\n00:12:25,580 --> 00:12:29,765\nnow that image it's gonna be the same\nevery time I push that image out.\n\n299\n00:12:29,765 --> 00:12:33,380\nWhereas we get into system center\nconfiguration manager, now it does it\n\n300\n00:12:33,380 --> 00:12:37,430\na little differently, instead of\nincluding the applications in the image,\n\n301\n00:12:37,430 --> 00:12:41,390\nsystem center would allow me to\ndeploy that stock server image.\n\n302\n00:12:41,390 --> 00:12:45,785\nAnd then back on top of that, go back and\ninstall certain applications.\n\n303\n00:12:45,785 --> 00:12:50,135\n>> Yeah, and it's super slick because you\ncan even do it based on a MAC address.\n\n304\n00:12:50,135 --> 00:12:52,385\nYou can do it for\nmachines that you don't even have yet.\n\n305\n00:12:52,385 --> 00:12:53,461\n>> [LAUGH] Right.\n\n306\n00:12:53,461 --> 00:12:56,380\n>> And I've done this before,\nit's really cool, so for\n\n307\n00:12:56,380 --> 00:13:00,129\nexample maybe you're purchasing\n200 new computers from Lenovo.\n\n308\n00:13:00,129 --> 00:13:01,065\n>> Mm-hm.\n>> All right?\n\n309\n00:13:01,065 --> 00:13:03,444\nAnd so you place your order with Lenovo.\n\n310\n00:13:03,444 --> 00:13:05,110\nAnd then you say, all right.\n\n311\n00:13:05,110 --> 00:13:07,629\nI know it's gonna take you guys\na few weeks to assemble and\n\n312\n00:13:07,629 --> 00:13:11,070\nsend us the machines but, can you send\nme the MAC address for the machines.\n\n313\n00:13:11,070 --> 00:13:11,630\n>> Right.\n>> And\n\n314\n00:13:11,630 --> 00:13:14,580\nif you're an enterprise customer they'll\ndo that, they'll send you a spreadsheet.\n\n315\n00:13:14,580 --> 00:13:17,805\nAnd so, while you haven't\nreceived the machines yet,\n\n316\n00:13:17,805 --> 00:13:21,045\nyou've got a spreadsheet with\nthe 200 MAC addresses, or\n\n317\n00:13:21,045 --> 00:13:24,790\nsometimes they'll do the GUIDs if they're\ngonna do the operating system install for\n\n318\n00:13:24,790 --> 00:13:27,775\nyou, they'll give you the GUIDs,\nwhich is even more useful.\n\n319\n00:13:27,775 --> 00:13:31,105\nBut if they're not gonna install the OS,\nthey'll at least give you the MACS.\n\n320\n00:13:31,105 --> 00:13:34,535\nAnd so you can go into system\ncenter configuration manager.\n\n321\n00:13:34,535 --> 00:13:37,055\nAnd you can import those MAC addresses in,\nand\n\n322\n00:13:37,055 --> 00:13:42,487\nsay when this system boots up,\ngive this batch of 50.\n\n323\n00:13:42,487 --> 00:13:43,210\n>> Mm-hm.\n\n324\n00:13:43,210 --> 00:13:47,420\n>> Give them Windows 7, and\nour accounting department image,\n\n325\n00:13:47,420 --> 00:13:51,160\nand the Windows 7 software and\nor the operating system,\n\n326\n00:13:51,160 --> 00:13:53,646\nand then the accounting software and\nthe pieces for that.\n\n327\n00:13:53,646 --> 00:13:56,750\nThe next 50,\ngive them that same Windows 7 image, but\n\n328\n00:13:56,750 --> 00:13:58,675\ngive them the marketing\ndepartment software packages.\n\n329\n00:13:58,675 --> 00:13:59,580\n>> Mm-hm.\n>> And so on.\n\n330\n00:13:59,580 --> 00:14:01,520\nYou can prestage all this stuff.\n\n331\n00:14:01,520 --> 00:14:04,070\n>> All right.\n>> So when all those nice big Lenovo boxes\n\n332\n00:14:04,070 --> 00:14:06,211\ncome in, I don't know why I picked Lenovo.\n\n333\n00:14:06,211 --> 00:14:07,943\n>> [LAUGH].\n>> But we'll go with them today.\n\n334\n00:14:07,943 --> 00:14:10,830\nThat's actually the vendor that I\ndealt with last time we did this.\n\n335\n00:14:10,830 --> 00:14:11,730\nBut-\n>> There we go.\n\n336\n00:14:11,730 --> 00:14:14,590\n>> But when those big boxes come in,\nyou open up the computers,\n\n337\n00:14:14,590 --> 00:14:16,655\nyou plug them in the network and\nturn them on.\n\n338\n00:14:16,655 --> 00:14:18,710\n>> Mm-hm.\n>> They find the SCCM machine on\n\n339\n00:14:18,710 --> 00:14:23,980\nthe network, and it deploys the OS,\nit deploys the software.\n\n340\n00:14:23,980 --> 00:14:27,060\nAnd when it comes up, you've got\naccounting machines, you've got marketing\n\n341\n00:14:27,060 --> 00:14:30,330\nmachines, you've got whatever,\nbased on the configuration you specified.\n\n342\n00:14:30,330 --> 00:14:31,128\nExtremely powerful.\n\n343\n00:14:31,128 --> 00:14:32,140\nRight?\n>> Oh yeah, absolutely.\n\n344\n00:14:33,180 --> 00:14:36,020\n>> But with great power comes\ngreat responsibility, right?\n\n345\n00:14:36,020 --> 00:14:37,055\n>> And great cost.\n\n346\n00:14:37,055 --> 00:14:38,260\n>> [LAUGH]\n>> And great cost.\n\n347\n00:14:38,260 --> 00:14:42,990\nSCCM is not cheap, and monetarily it's\nactually pretty easy to justify SCCM.\n\n348\n00:14:42,990 --> 00:14:43,620\n>> Right.\n\n349\n00:14:43,620 --> 00:14:46,810\n>> But,\nthe real cost comes in maintenance.\n\n350\n00:14:46,810 --> 00:14:48,860\n>> Yeah.\n>> It requires you to have a SQL sever,\n\n351\n00:14:48,860 --> 00:14:50,345\nit's all powered by a database.\n\n352\n00:14:50,345 --> 00:14:52,590\n>> Mm-hm.\n>> It's very complex, and\n\n353\n00:14:52,590 --> 00:14:55,860\nit typically requires more\nthan one sever to operate.\n\n354\n00:14:55,860 --> 00:14:59,631\nSo, the whole system center framework\nreally just has a lot of infrastructure\n\n355\n00:14:59,631 --> 00:15:01,780\nthat's necessary to deploy it.\n\n356\n00:15:01,780 --> 00:15:03,050\nIt's awesome.\n\n357\n00:15:03,050 --> 00:15:04,140\nOnce you got it set up.\n\n358\n00:15:04,140 --> 00:15:04,820\n>> It is.\nIt's slick.\n\n359\n00:15:04,820 --> 00:15:07,240\nLike all those applications\nyou're talking about pushing out.\n\n360\n00:15:07,240 --> 00:15:08,640\nYou've got to go in and\nmake these packages.\n\n361\n00:15:08,640 --> 00:15:12,700\nSo you gotta wrap these things up so that\nSCCM can actually deploy them out, and\n\n362\n00:15:12,700 --> 00:15:14,290\nthat can be a challenge.\n\n363\n00:15:14,290 --> 00:15:17,150\nSome of these applications aren't\nreally designed to do that, or\n\n364\n00:15:17,150 --> 00:15:19,760\ndon't have any direct support for\nthat kind of thing.\n\n365\n00:15:19,760 --> 00:15:21,180\nSo you gotta try to figure it out.\n\n366\n00:15:21,180 --> 00:15:23,445\n>> Yeah, but I mean if you take,\nif you have the SCCM.\n\n367\n00:15:23,445 --> 00:15:24,180\n>> Mm-hm.\n\n368\n00:15:24,180 --> 00:15:27,180\n>> And you combine that with the system\ncenter operations manager, for\n\n369\n00:15:27,180 --> 00:15:28,890\nyou know monitoring health and\nperformance.\n\n370\n00:15:28,890 --> 00:15:30,260\n>> Right.\n>> You can see when a machine is not\n\n371\n00:15:30,260 --> 00:15:33,100\nhealthy anymore and\nit can automatically redeploy the image.\n\n372\n00:15:33,100 --> 00:15:35,100\nBasically format and\nre-install the machine.\n\n373\n00:15:35,100 --> 00:15:37,050\nSo employees come into\na nice fresh system.\n\n374\n00:15:37,050 --> 00:15:38,839\nRight?\nIf you combine it with a SCVMM,\n\n375\n00:15:38,839 --> 00:15:41,168\nthe System Center Virtual Machine Manager,\n\n376\n00:15:41,168 --> 00:15:43,997\nnow it can do your virtual\nmachine deployments, too.\n\n377\n00:15:43,997 --> 00:15:45,354\n>> Right.\n>> You bring up a new VM.\n\n378\n00:15:45,354 --> 00:15:46,143\nYou say I need a web server.\n\n379\n00:15:46,143 --> 00:15:46,880\nPow!\n\n380\n00:15:46,880 --> 00:15:49,313\nIt deploys the stuff on there and\ngets it in place.\n\n381\n00:15:49,313 --> 00:15:51,391\nThat's a lot of power.\n\n382\n00:15:51,391 --> 00:15:52,000\n>> That's huge.\n\n383\n00:15:52,000 --> 00:15:56,048\nAnd we can throw our desired state\nof configuration on top of that and\n\n384\n00:15:56,048 --> 00:15:59,070\nthrow files, get the website set up.\n\n385\n00:15:59,070 --> 00:16:01,770\nAll while we sit back and\ndrink our coffee.\n\n386\n00:16:01,770 --> 00:16:04,620\n>> Stick system centered data\nprotection manager on there, and\n\n387\n00:16:04,620 --> 00:16:05,920\nnow they're being backed up.\n\n388\n00:16:05,920 --> 00:16:08,300\nAnd you've got a fully\nmanaged infrastructure,\n\n389\n00:16:08,300 --> 00:16:10,540\nMicrosoft calls that the private cloud.\n\n390\n00:16:11,620 --> 00:16:14,610\nSo cloud services are really\nreally popular these days.\n\n391\n00:16:14,610 --> 00:16:18,340\nAnd so, you might have Windows Azure or\nAmazon S3 for\n\n392\n00:16:18,340 --> 00:16:22,800\nhosting your servers outside\nof your environment.\n\n393\n00:16:22,800 --> 00:16:25,540\nThose hosting servers are nice, but\n\n394\n00:16:25,540 --> 00:16:29,490\ncan you really trust that data\nis safe in a 3rd party cloud.\n\n395\n00:16:29,490 --> 00:16:31,050\nIf you want to set up your own you can.\n\n396\n00:16:31,050 --> 00:16:32,920\nAnd it's all done through\nthe system center suite.\n\n397\n00:16:32,920 --> 00:16:36,590\nIf you have all of that infrastructure\ntogether you have a private cloud.\n\n398\n00:16:36,590 --> 00:16:41,200\nSo that kinda a deployment is cool,\nit's really slick, but\n\n399\n00:16:41,200 --> 00:16:44,090\nyou've gotta have a great need for\ndoing that.\n\n400\n00:16:44,090 --> 00:16:48,900\nYou need to have a pretty large\ninfrastructure to warrant that.\n\n401\n00:16:48,900 --> 00:16:53,150\nEven if you're a school and you're getting\neducational discounts and you talked to\n\n402\n00:16:53,150 --> 00:16:56,920\na Microsoft rep and they tell you, yeah,\nwe'll give you the whole system center.\n\n403\n00:16:56,920 --> 00:16:57,610\nWe'll give it to you free.\n\n404\n00:16:59,130 --> 00:17:01,270\nEven then you might look at it and\nsay ooh,\n\n405\n00:17:01,270 --> 00:17:05,140\nI might not do that just because\nit's overkill for what I need.\n\n406\n00:17:05,140 --> 00:17:10,740\nMost people are perfectly happy with\nWDS because you can create one WIM file\n\n407\n00:17:10,740 --> 00:17:13,180\nthat has multiple images inside of it.\n\n408\n00:17:13,180 --> 00:17:19,250\nSo you could create a student image and\na staff teacher image and whatever.\n\n409\n00:17:19,250 --> 00:17:22,280\nData deduplicated inside of one WIM file.\n\n410\n00:17:22,280 --> 00:17:24,080\nIt's a little harder to maintain,\n\n411\n00:17:24,080 --> 00:17:29,050\nbut it doesn't require a database server,\nand all these other different systems.\n\n412\n00:17:29,050 --> 00:17:32,060\nAll these other moving pieces,\nit doesn't require all that.\n\n413\n00:17:32,060 --> 00:17:37,020\nBut the big difference is\nthat WDS can give you a LTI,\n\n414\n00:17:37,020 --> 00:17:40,906\nor Light-touch Installation.\n\n415\n00:17:42,640 --> 00:17:47,160\nAnd really to a lesser extent,\nso does an unattended install.\n\n416\n00:17:47,160 --> 00:17:48,510\nIt gives you that LTI.\n\n417\n00:17:48,510 --> 00:17:52,600\n>> And Light-touch, we've gotta be\nthere to typically to start it up.\n\n418\n00:17:52,600 --> 00:17:54,570\nOr we gotta trigger it somehow.\n\n419\n00:17:54,570 --> 00:17:57,706\nWhereas when we get into\nSystems Center Configuration Manager,\n\n420\n00:17:57,706 --> 00:17:59,480\nthere we get our Zero Touch install.\n\n421\n00:17:59,480 --> 00:18:01,527\nWhere I can schedule this to\noccur in the middle of the night,\n\n422\n00:18:01,527 --> 00:18:03,040\nI don't even have to be there.\n\n423\n00:18:03,040 --> 00:18:03,930\n>> Yeah.\n>> And like you were saying,\n\n424\n00:18:03,930 --> 00:18:07,150\nI can go ahead and set the schedule up\nbefore the computers are even in house.\n\n425\n00:18:07,150 --> 00:18:11,463\n>> It's never truly Zero Touch, somebody's\ngotta push the power button at some point.\n\n426\n00:18:11,463 --> 00:18:13,681\n[LAUGH]\n>> [LAUGH] Right?\n\n427\n00:18:13,681 --> 00:18:16,855\n>> But, once somebody's,\nand you can train anybody.\n\n428\n00:18:16,855 --> 00:18:22,725\nAt these high schools or\nwhatever you can get students to do it,\n\n429\n00:18:22,725 --> 00:18:24,835\nand even in private sectors\nyou might have interns.\n\n430\n00:18:24,835 --> 00:18:28,000\nYou don't need somebody who even\nunderstands computers very well.\n\n431\n00:18:28,000 --> 00:18:31,770\nJust somebody who can plug in a keyboard,\nplug in a monitor and push a power button.\n\n432\n00:18:31,770 --> 00:18:35,910\nBecause after that, the whole installation\nand deployment happens automatically.\n\n433\n00:18:35,910 --> 00:18:40,360\nSo, definitely a big,\nbig change there, all right?\n\n434\n00:18:40,360 --> 00:18:44,360\nNow, there is another installation\nmethod that really is a little bit\n\n435\n00:18:44,360 --> 00:18:48,670\nmore manual and I'm gonna add it\nup here after unintended install.\n\n436\n00:18:48,670 --> 00:18:51,620\nWhich is an image based install.\n\n437\n00:18:53,300 --> 00:18:58,150\nYou might use some of the Microsoft\nimaging software like ImageX or\n\n438\n00:18:59,280 --> 00:19:00,160\n>> Is it now DISM?\n\n439\n00:19:00,160 --> 00:19:01,580\n>> DISM, thank you, Mike.\n\n440\n00:19:02,670 --> 00:19:04,580\n>> ImageX, it's still out there.\n\n441\n00:19:04,580 --> 00:19:05,470\nIt's being depreciated,\n\n442\n00:19:05,470 --> 00:19:08,280\nbecause DISM can what ImageX can do and\nthen a whole lot more.\n\n443\n00:19:08,280 --> 00:19:09,350\n>> Yep.\n\n444\n00:19:09,350 --> 00:19:13,550\nSo you might use something like that,\nor you might use Symantec Ghost,\n\n445\n00:19:13,550 --> 00:19:15,600\nAcronis True Image.\n\n446\n00:19:15,600 --> 00:19:18,870\nThere's a ton of them that are out\nthere where you can take an image of\n\n447\n00:19:18,870 --> 00:19:19,860\nyour system.\n\n448\n00:19:19,860 --> 00:19:21,310\nSo you take one computer.\n\n449\n00:19:21,310 --> 00:19:24,720\nYou get it set up exactly back to\nthe way you want and you take an image.\n\n450\n00:19:24,720 --> 00:19:29,450\nAnd then you go to your new computers and\nyou just apply the image to them.\n\n451\n00:19:29,450 --> 00:19:33,520\nThey suffer some of the same limitations\nas WDS and unattended installs.\n\n452\n00:19:33,520 --> 00:19:35,150\nThe machines are going to be identical.\n\n453\n00:19:35,150 --> 00:19:36,560\n>> Right.\n>> Right.\n\n454\n00:19:36,560 --> 00:19:38,070\nMaybe a little too identical.\n\n455\n00:19:38,070 --> 00:19:40,580\nThey might have\n>> Might have the same SID so\n\n456\n00:19:40,580 --> 00:19:44,270\nwe have to remember to\nuse sysprep with these,\n\n457\n00:19:44,270 --> 00:19:47,690\nto make sure the machines are unique and\nwe've seen that before.\n\n458\n00:19:47,690 --> 00:19:49,910\nBut if you want the machines to be\nidentical, this can be a quick and\n\n459\n00:19:49,910 --> 00:19:51,700\neasy deployment method.\n\n460\n00:19:51,700 --> 00:19:54,237\nSo that's a lot of different\nchoices out there for\n\n461\n00:19:54,237 --> 00:19:56,180\nhow we want to get Windows installed.\n\n462\n00:19:56,180 --> 00:19:57,250\n>> Yeah, who would have thought, right?\n\n463\n00:19:57,250 --> 00:19:59,410\nWait, don't I just take the DVD and\nthrow it in?\n\n464\n00:19:59,410 --> 00:20:00,960\n>> Yeah.\n>> A lot of choices.\n\n465\n00:20:00,960 --> 00:20:02,800\n>> And there's even one more.\n\n466\n00:20:02,800 --> 00:20:04,810\nI'm gonna tack onto this one more.\n\n467\n00:20:04,810 --> 00:20:06,860\nWhich is if we're doing\na virtual deployment, right?\n\n468\n00:20:06,860 --> 00:20:14,840\nIf we're deploying on virtual machines, we\nmight be using a VM template or a clone.\n\n469\n00:20:14,840 --> 00:20:18,350\nIf I need a web server and I've already\ngot a web server up in my virtual\n\n470\n00:20:18,350 --> 00:20:19,900\nenvironment I can just clone the VM.\n\n471\n00:20:19,900 --> 00:20:20,990\n>> Right.\n>> Right?\n\n472\n00:20:20,990 --> 00:20:23,650\nOr I might have already made a template,\nand\n\n473\n00:20:23,650 --> 00:20:25,780\nwe can just clone that out and\nthrow it out.\n\n474\n00:20:25,780 --> 00:20:30,600\nSo I know we showed some of that in our\nlittle Hyper-V series that we filmed.\n\n475\n00:20:30,600 --> 00:20:31,880\n>> Yeah, those can be really handy.\n\n476\n00:20:31,880 --> 00:20:33,038\nEspecially when you're talking about like,\n\n477\n00:20:33,038 --> 00:20:34,770\ndoing network load balancing on\na web server, something like that.\n\n478\n00:20:34,770 --> 00:20:38,330\nWhere you really want the machines\nto be fairly identical.\n\n479\n00:20:38,330 --> 00:20:41,100\nAnd so it can be very easy\nto just whip out those.\n\n480\n00:20:41,100 --> 00:20:45,520\nOr if you've got an R and D department\nthat needs to pull out new servers for\n\n481\n00:20:45,520 --> 00:20:47,420\nprojects to work on or\nsomething like that.\n\n482\n00:20:47,420 --> 00:20:50,210\nI can have a template all set\nup with everything they need and\n\n483\n00:20:50,210 --> 00:20:54,300\nall they have to do is make a copy of\nthat template and they're good to go.\n\n484\n00:20:54,300 --> 00:20:58,820\n>> Yeah, that VM template,\nthat process is really the same\n\n485\n00:20:58,820 --> 00:21:02,440\nas using an image-based install.\n\n486\n00:21:02,440 --> 00:21:04,020\nCuz you're effectively making an image,\n\n487\n00:21:04,020 --> 00:21:05,630\nyou just don't need third\nparty software to do it.\n\n488\n00:21:05,630 --> 00:21:07,600\nYou're just cloning the VM.\n\n489\n00:21:07,600 --> 00:21:10,340\nYou can't clone a physical\nmachine cuz it doesn't have that\n\n490\n00:21:10,340 --> 00:21:13,060\nunderlying hypervisor\nto be able to tap into.\n\n491\n00:21:13,060 --> 00:21:14,740\nBut a virtual machine does, right?\n\n492\n00:21:14,740 --> 00:21:16,050\nSo, really easy to clone that.\n\n493\n00:21:16,050 --> 00:21:18,940\nBut again, we gotta remember to use\nsysprep to make the new machine unique.\n\n494\n00:21:18,940 --> 00:21:22,050\nOtherwise, we're gonna\nget some issues there.\n\n495\n00:21:22,050 --> 00:21:26,770\nSo out of all of these installs,\nwhich is right for your scenario?\n\n496\n00:21:26,770 --> 00:21:29,670\nWell that's what you're\ngonna see on the exam.\n\n497\n00:21:29,670 --> 00:21:32,730\nOn the exam they're gonna\ngive you scenarios, right?\n\n498\n00:21:32,730 --> 00:21:36,620\nYou're the IT administrator for\na dentist office with five computers.\n\n499\n00:21:36,620 --> 00:21:40,520\nYou need to deploy Windows\n8 on a new server.\n\n500\n00:21:40,520 --> 00:21:44,141\nYou need to put Windows Server 2012 on\na new machine to serve as a file server,\n\n501\n00:21:44,141 --> 00:21:46,970\nwhich will be the most\nappropriate install method?\n\n502\n00:21:46,970 --> 00:21:49,900\nAll of these would work, but\n\n503\n00:21:49,900 --> 00:21:52,330\nthere is going to be one that is\nmore appropriate than the others.\n\n504\n00:21:52,330 --> 00:21:54,734\nThis is the type of question where\nthere is more than one right answer.\n\n505\n00:21:54,734 --> 00:21:57,755\nBut one answer is more\nright than the others.\n\n506\n00:21:57,755 --> 00:21:59,920\n[LAUGH]\n>> What's your favorite catchphrase with\n\n507\n00:21:59,920 --> 00:22:02,940\nthe least administrative effort.\n\n508\n00:22:02,940 --> 00:22:05,580\nTypically they throw that in there.\n\n509\n00:22:05,580 --> 00:22:07,460\nAnd that's exactly what Don was saying,\n\n510\n00:22:07,460 --> 00:22:09,670\nyou have to pick the one that's right for\nyou.\n\n511\n00:22:09,670 --> 00:22:12,580\nYou're not gonna go setup system\ncenter configuration manager\n\n512\n00:22:12,580 --> 00:22:14,690\nto install two servers, right?\n\n513\n00:22:14,690 --> 00:22:15,390\n>> You could.\n\n514\n00:22:15,390 --> 00:22:17,080\n>> You could.\n>> You certainly could.\n\n515\n00:22:17,080 --> 00:22:18,320\nI think we've done that more than once.\n\n516\n00:22:18,320 --> 00:22:20,440\n>> We have.\n\n517\n00:22:20,440 --> 00:22:22,750\n>> But yeah it's just not practical.\n\n518\n00:22:22,750 --> 00:22:25,370\nSo make sure you understand first off\n\n519\n00:22:25,370 --> 00:22:27,300\nall the different installation\nmethods that are there.\n\n520\n00:22:28,360 --> 00:22:32,265\nAnd then on top of that understand which\nones are appropriate for which scenarios.\n\n521\n00:22:32,265 --> 00:22:37,110\nThese first three, DVD based install,\nISO install, USB install,\n\n522\n00:22:37,110 --> 00:22:41,740\nthose are effectively the same,\nit just different media.\n\n523\n00:22:41,740 --> 00:22:45,084\nBut those are useful when you\nneed a single system you don't,\n\n524\n00:22:45,084 --> 00:22:49,396\nyou're not worried about time and you can\nsit down and run through the wizard and\n\n525\n00:22:49,396 --> 00:22:51,860\nget things set up uniquely for\nthat machine.\n\n526\n00:22:51,860 --> 00:22:56,508\nWhen we get into unattended and\nimage-based installs, and even VM clones,\n\n527\n00:22:56,508 --> 00:22:59,942\nthat's where we want to be\nable to basically duplicate,\n\n528\n00:22:59,942 --> 00:23:03,330\nor create multiple machines\nthat are identical.\n\n529\n00:23:03,330 --> 00:23:04,540\nThose work out really well.\n\n530\n00:23:05,600 --> 00:23:09,120\nWDS is where we're now\ngetting a little big larger.\n\n531\n00:23:09,120 --> 00:23:12,850\nWe wanted to start deploying to\nlarge quantities of machines, but\n\n532\n00:23:12,850 --> 00:23:15,340\nwe want to be able to provide\nsome uniqueness to them.\n\n533\n00:23:15,340 --> 00:23:18,390\nLike a marketing image,\na sales image, and so on.\n\n534\n00:23:18,390 --> 00:23:21,660\nAnd we don't have to worry about\nhaving to carry around media.\n\n535\n00:23:21,660 --> 00:23:24,208\nAll of these guys up here require\nus to use some kinda media to do\n\n536\n00:23:24,208 --> 00:23:26,610\nthe deployment like booting from a CD or\nbooting from USB.\n\n537\n00:23:26,610 --> 00:23:29,100\n>> Yeah, from a portable hard drive or\nsomething like that.\n\n538\n00:23:29,100 --> 00:23:32,540\nAnother nice thing about deployment\nservers are when we get into that is\n\n539\n00:23:32,540 --> 00:23:34,430\nif you have to do it often.\n\n540\n00:23:34,430 --> 00:23:36,660\nMaybe I don't have that many servers.\n\n541\n00:23:36,660 --> 00:23:39,685\nI've been in environments where we didn't\nhave didn't have all that many computers.\n\n542\n00:23:39,685 --> 00:23:42,572\nBut we had to reimage them, almost\nevery week or every couple of weeks.\n\n543\n00:23:42,572 --> 00:23:46,036\nAnd in that case, small number of\ncomputers you might think, okay,\n\n544\n00:23:46,036 --> 00:23:47,362\nwell I'll just use a DVD.\n\n545\n00:23:47,362 --> 00:23:49,138\nNot if I'm doing it every week.\n\n546\n00:23:49,138 --> 00:23:53,899\nNow it's worth me Setting up that\ninfrastructure to semi-automate this\n\n547\n00:23:53,899 --> 00:23:54,596\nprocess.\n\n548\n00:23:54,596 --> 00:23:57,977\n>> Yeah, and we actually a classroom\nhere in the building and\n\n549\n00:23:57,977 --> 00:24:02,030\nit's got 16 computers in it,\nand we do that, we re-image it.\n\n550\n00:24:02,030 --> 00:24:04,080\nNot every week, but\nevery month or something.\n\n551\n00:24:04,080 --> 00:24:04,615\n>> Maybe we should.\n\n552\n00:24:04,615 --> 00:24:05,400\n[LAUGH]\n>> It gets junked up.\n\n553\n00:24:05,400 --> 00:24:10,315\nYeah, and that classroom gets used for all\nsorts of different things, rarely class.\n\n554\n00:24:10,315 --> 00:24:14,780\n[LAUGH] We usually have planning\nmeetings in there and stuff.\n\n555\n00:24:14,780 --> 00:24:17,030\nSo, it's nice to wipe those\nmachines from time to time.\n\n556\n00:24:17,030 --> 00:24:20,700\nNow, when we looked at it we said,\nboy, we could do SCCM.\n\n557\n00:24:20,700 --> 00:24:22,260\n>> Mm-hm.\n>> And we could just tell it,\n\n558\n00:24:22,260 --> 00:24:25,280\nhey re-image this classroom once a week.\n\n559\n00:24:25,280 --> 00:24:26,790\n>> Yeah.\n>> And just every week,\n\n560\n00:24:26,790 --> 00:24:29,140\nSaturday at midnight or whatever it\ncould wipe those machines and redeploy.\n\n561\n00:24:29,140 --> 00:24:30,737\nWe thought about doing that, but\n\n562\n00:24:30,737 --> 00:24:33,769\nat the end of the day non of us\nreally care about that classroom.\n\n563\n00:24:33,769 --> 00:24:37,900\n[LAUGH] It's empty most days.\n\n564\n00:24:37,900 --> 00:24:42,180\nAnd we didn't wanna go through the effort\nof setting up an SCCM infrastructure\n\n565\n00:24:42,180 --> 00:24:43,930\njust to handle that.\n\n566\n00:24:43,930 --> 00:24:48,370\nSo instead, we said, we'll just\ngo with WDS and once a month, or\n\n567\n00:24:48,370 --> 00:24:51,970\nhowever often we want to,\nsomebody can go in that room and\n\n568\n00:24:51,970 --> 00:24:55,090\njust reboot all the computers and\nhave them PXE boot.\n\n569\n00:24:55,090 --> 00:24:56,460\nThey boot from the network.\n\n570\n00:24:56,460 --> 00:24:59,230\nAnd you just pick the image and\nhit enter and then walk away.\n\n571\n00:24:59,230 --> 00:25:01,140\nSo, it's a light touch.\n\n572\n00:25:01,140 --> 00:25:03,770\nSomebody does have to go in there and\nstart the process.\n\n573\n00:25:03,770 --> 00:25:05,710\nThey just do it once a month and\nlet it run.\n\n574\n00:25:05,710 --> 00:25:10,030\nAnd that worked out for us because now we\ndon't have to support an SCCM to do it.\n\n575\n00:25:10,030 --> 00:25:13,850\nSo, it's a matter of finding out which\nsolution is right for your environment.\n\n576\n00:25:13,850 --> 00:25:15,800\nWe certainly could have used SCCM.\n\n577\n00:25:15,800 --> 00:25:19,350\nWe've got the licenses as part of our\nMicrosoft partnership or whatever,\n\n578\n00:25:19,350 --> 00:25:22,280\nbut in that case, it was just overkill.\n\n579\n00:25:24,920 --> 00:25:25,520\n>> Right.\n\n580\n00:25:25,520 --> 00:25:29,890\n>> So, those are some of the different\ntypes of deployments that are out there.\n\n581\n00:25:29,890 --> 00:25:33,890\nWe need to choose the right one,\nand then we need to implement it.\n\n582\n00:25:33,890 --> 00:25:35,130\nAnd when you go to implementing it,\n\n583\n00:25:35,130 --> 00:25:38,210\nthere's different design schemes we\ncan follow for each of these, right?\n\n584\n00:25:38,210 --> 00:25:39,850\nSome are pretty straightforward.\n\n585\n00:25:39,850 --> 00:25:41,370\nBut that's what we're gonna\ntake a look at, next.\n\n586\n00:25:41,370 --> 00:25:43,785\nYou'll see, like, planning for\nthe deployments and\n\n587\n00:25:43,785 --> 00:25:44,700\nin-server limitations and so on.\n\n588\n00:25:44,700 --> 00:25:46,920\nSo, we're gonna take a look at those,\nnext.\n\n589\n00:25:46,920 --> 00:25:49,690\nBut, looking at the clock,\nthis is probably a good spot to stop for\n\n590\n00:25:49,690 --> 00:25:51,053\na break, don't you think, Mike?\n\n591\n00:25:51,053 --> 00:25:51,600\n>> Looking at my. [LAUGH] >> No watch.\n[LAUGH]\n\n592\n00:25:51,600 --> 00:25:52,160\n>> Looking at my\n\n593\n00:25:53,930 --> 00:25:55,798\nGucci it's about that time.\n\n594\n00:25:55,798 --> 00:25:58,270\n[LAUGH]\n>> There you go.\n\n595\n00:25:58,270 --> 00:25:59,050\nAll right.\nVery GQ.\n\n596\n00:25:59,050 --> 00:26:01,772\nWell, ladies and gentlemen,\nlet's stop here and take a break.\n\n597\n00:26:01,772 --> 00:26:05,075\nWhen we get back, we're going to take\na look at designing how we use these\n\n598\n00:26:05,075 --> 00:26:07,577\ndeployment systems and\napplying them to our network.\n\n599\n00:26:07,577 --> 00:26:10,131\nSo stay tuned, we'll be back after this.\n\n600\n00:26:10,131 --> 00:26:17,887\n[MUSIC]\n\n601\n00:26:17,887 --> 00:26:19,740\nAll right welcome back everybody.\n\n602\n00:26:19,740 --> 00:26:23,410\nSo, what we wanna talk about\nnow is kind of planning for\n\n603\n00:26:23,410 --> 00:26:25,160\nhow we're gonna implement\nour server deployments.\n\n604\n00:26:25,160 --> 00:26:28,280\nHow we start to get this\nstuff kind of put into place.\n\n605\n00:26:28,280 --> 00:26:32,040\nAnd there's a few different things\nthat are available to assist us with\n\n606\n00:26:32,040 --> 00:26:33,160\nthat planning.\n\n607\n00:26:33,160 --> 00:26:37,760\nNow, in the MCSA shows, when we were\ntalking about the how to do things,\n\n608\n00:26:37,760 --> 00:26:40,520\none of the big utilities we've\ntalked about was the Assessment and\n\n609\n00:26:40,520 --> 00:26:42,480\nDeployment toolkit, all right?\n\n610\n00:26:42,480 --> 00:26:43,970\nLet me bring this up here.\n\n611\n00:26:43,970 --> 00:26:45,170\nI started the download.\n\n612\n00:26:45,170 --> 00:26:48,490\nYou just go to Microsoft's website and you\ndownload the assessment deployment kit.\n\n613\n00:26:48,490 --> 00:26:50,540\nYou guys should have seen this by now.\n\n614\n00:26:50,540 --> 00:26:53,260\nAnd when you go to install it,\nit's basically a collection of tools that\n\n615\n00:26:53,260 --> 00:26:55,980\nassists us with doing\nWindows server deployments..\n\n616\n00:26:55,980 --> 00:27:00,150\nSo, if you wanna create unattend files,\nif you wanna create your own images and\n\n617\n00:27:00,150 --> 00:27:03,100\nthings of that nature, well you've\ngot your deployment tools here,\n\n618\n00:27:03,100 --> 00:27:06,160\nwhere it's got dizum and the other\nutilities that are a part of that.\n\n619\n00:27:06,160 --> 00:27:08,470\nNow, dizums actually\nincluded with your OS too.\n\n620\n00:27:08,470 --> 00:27:09,930\nSo, you've got it different ways there.\n\n621\n00:27:09,930 --> 00:27:10,690\n>> Right, right.\n\n622\n00:27:10,690 --> 00:27:13,707\nThe big one in there's that Windows\nSystems Image Manager, because that's how\n\n623\n00:27:13,707 --> 00:27:15,940\nit makes it a lot easier to try\nto create those answer files.\n\n624\n00:27:15,940 --> 00:27:19,429\nThey're just XML documents,\nwe can really technically,\n\n625\n00:27:19,429 --> 00:27:22,880\nI could take out Notepad++ and\nwrite up an answer file.\n\n626\n00:27:22,880 --> 00:27:25,070\n>> If you like reading documentation, yes.\n\n627\n00:27:25,070 --> 00:27:25,810\n>> Yeah, yeah.\n\n628\n00:27:25,810 --> 00:27:28,880\nSo, using a tool like this allows\nme to create that answer file.\n\n629\n00:27:28,880 --> 00:27:29,905\nAnd then I can go back and\n\n630\n00:27:29,905 --> 00:27:33,100\ntweak it in the future if I need\nto using an editor or something.\n\n631\n00:27:33,100 --> 00:27:34,330\n>> Some of the other\nthings that are in here\n\n632\n00:27:34,330 --> 00:27:36,180\nare the Application Compatibility Toolkit.\n\n633\n00:27:36,180 --> 00:27:38,950\nI know we covered that in\nour Windows 8 shows because\n\n634\n00:27:38,950 --> 00:27:42,380\nyou might have an application that's not\nsupported under Windows Server 2012,\n\n635\n00:27:42,380 --> 00:27:43,930\nbut it did work under 2008.\n\n636\n00:27:43,930 --> 00:27:47,780\nSo, you might need to create a shim or\nwhatever to get it compatible.\n\n637\n00:27:47,780 --> 00:27:50,680\nNow I'll tell you If you've got\nan application that's not supported\n\n638\n00:27:50,680 --> 00:27:53,470\nunder Windows Server 2012,\ndon't go to Windows Server 2012.\n\n639\n00:27:53,470 --> 00:27:55,120\nYou know, I mean it's easy as that.\n\n640\n00:27:55,120 --> 00:27:57,160\nWe're not talking about desktop apps here,\n\n641\n00:27:57,160 --> 00:27:59,280\nwhere you can do some kind of\nkludge to get them working.\n\n642\n00:27:59,280 --> 00:28:01,570\nOn a server it needs to work right.\n\n643\n00:28:01,570 --> 00:28:04,630\nSo, things like the ACT are not as useful.\n\n644\n00:28:04,630 --> 00:28:08,700\nBut the Windows PE, that Preinstallation\nEnvironment, that's important for\n\n645\n00:28:08,700 --> 00:28:11,730\nus because if we're doing\nWindows Deployment Services, WDS,\n\n646\n00:28:11,730 --> 00:28:14,620\nyou need a boot.wim, to boot systems, but\n\n647\n00:28:14,620 --> 00:28:18,060\nyou need Windows PE images to be\nable to capture and deploy images.\n\n648\n00:28:18,060 --> 00:28:19,850\nIt's really important.\n\n649\n00:28:19,850 --> 00:28:21,760\nUser State Migration tool.\n\n650\n00:28:21,760 --> 00:28:23,080\nVolume Activation Management tool.\n\n651\n00:28:23,080 --> 00:28:26,320\nThese are other things that I know\nwe've used in other shows, but\n\n652\n00:28:26,320 --> 00:28:30,070\neach of these is really\ntalking about the how, right?\n\n653\n00:28:30,070 --> 00:28:31,470\nHow we get this stuff deployed.\n\n654\n00:28:31,470 --> 00:28:32,340\nNone of it's really the why.\n\n655\n00:28:32,340 --> 00:28:35,400\nThe closest thing we have to a why\nare the assessment toolkits.\n\n656\n00:28:35,400 --> 00:28:38,930\nAnd what they're designed to\ndo is to look at what kind of\n\n657\n00:28:38,930 --> 00:28:41,540\nload your server can handle.\n\n658\n00:28:41,540 --> 00:28:43,690\nFor doing performance testing and so on.\n\n659\n00:28:43,690 --> 00:28:46,230\nAnd so, if we look at the assessment\ntoolkit, see how it says here,\n\n660\n00:28:46,230 --> 00:28:49,790\nsimulates user activity and\nexamines the state of a computer.\n\n661\n00:28:49,790 --> 00:28:52,710\nProduces metrics for various aspects.\n\n662\n00:28:52,710 --> 00:28:54,752\nThat gives you information\nto know whether or\n\n663\n00:28:54,752 --> 00:28:57,180\nnot your hardware is going to\nbe what you need it to be.\n\n664\n00:28:57,180 --> 00:29:01,030\nBut you've already purchased the hardware,\nyou're kinda beyond that.\n\n665\n00:29:01,030 --> 00:29:03,320\n[LAUGH] But\nmaybe you've got older hardware and\n\n666\n00:29:03,320 --> 00:29:04,950\nyour thinking about\nupgrading it to Server 2012.\n\n667\n00:29:04,950 --> 00:29:07,800\nThat could be the difference between\nwhether you do an upgrade or\n\n668\n00:29:07,800 --> 00:29:10,140\nwhether you just go and\nbuy a new server, right?\n\n669\n00:29:10,140 --> 00:29:12,160\nIt may be your hardware's\njust not up to snuff.\n\n670\n00:29:14,070 --> 00:29:15,490\nAll right, so, the assessment and\n\n671\n00:29:15,490 --> 00:29:19,680\ndeployment kit really doesn't have a whole\nlot in the way of planning for us.\n\n672\n00:29:19,680 --> 00:29:21,310\nBut there's another utility.\n\n673\n00:29:21,310 --> 00:29:22,480\nI'm just going to cancel that install.\n\n674\n00:29:22,480 --> 00:29:24,450\nNo point in going crazy there.\n\n675\n00:29:24,450 --> 00:29:28,110\nThere's another utility which is\ncalled the Microsoft Assessment and\n\n676\n00:29:28,110 --> 00:29:29,630\nPlanning Toolkit, right.\n\n677\n00:29:29,630 --> 00:29:31,280\nSo, instead of the assessment and\n\n678\n00:29:31,280 --> 00:29:34,080\ndeployment this was the assessment and\nplanning.\n\n679\n00:29:34,080 --> 00:29:34,860\n>> Right.\n\n680\n00:29:34,860 --> 00:29:36,930\n>> Kind of goes in line with\nwhat this show is about right.\n\n681\n00:29:38,180 --> 00:29:41,150\nWhen you download it, it's just\na free download from Microsoft site.\n\n682\n00:29:41,150 --> 00:29:42,730\nYou download it and run it.\n\n683\n00:29:42,730 --> 00:29:44,030\nAnd it looks like this.\n\n684\n00:29:44,030 --> 00:29:45,040\nAll right.\n\n685\n00:29:45,040 --> 00:29:47,890\nWhat you do is you can create a little\ndatabase where it will store it's\n\n686\n00:29:47,890 --> 00:29:48,810\ninformation.\n\n687\n00:29:48,810 --> 00:29:53,080\nAnd then it starts to help you plan for\nhow you're going to do your deployment.\n\n688\n00:29:53,080 --> 00:29:55,000\nAnd look at the different\nscenarios over here.\n\n689\n00:29:55,000 --> 00:29:57,220\nCloud is what Microsoft\nis pushing right now.\n\n690\n00:29:57,220 --> 00:29:59,921\nSo, it's already-\n>> It's the first tab on there.\n\n691\n00:29:59,921 --> 00:30:01,316\n>> [LAUGH]\n>> If you're going to deploy,\n\n692\n00:30:01,316 --> 00:30:03,230\nwhy would you deploy anywhere\nother then the Cloud?\n\n693\n00:30:03,230 --> 00:30:04,700\n>> Absolutely.\nBecause that's gonna cost\n\n694\n00:30:04,700 --> 00:30:05,250\nmore money, right?\n\n695\n00:30:05,250 --> 00:30:08,851\nWe're gonna be spending\nmoney with Microsoft.\n\n696\n00:30:08,851 --> 00:30:10,561\n[LAUGH]\n>> Yeah, it's a sad reality.\n\n697\n00:30:10,561 --> 00:30:13,370\nBut for a lot of companies\nthe cloud is a wonderful\n\n698\n00:30:13,370 --> 00:30:17,030\nplace to deploy things to because you\ndon't have to worry about maintaining\n\n699\n00:30:17,030 --> 00:30:19,200\nthe underlying physical infrastructure,\nright?\n\n700\n00:30:19,200 --> 00:30:19,770\n>> Absolutely.\n\n701\n00:30:19,770 --> 00:30:21,400\n>> It's a big deal.\n\n702\n00:30:21,400 --> 00:30:23,550\nBut, it's not right for everybody.\n\n703\n00:30:23,550 --> 00:30:25,120\nAnd so you'll see other scenarios.\n\n704\n00:30:25,120 --> 00:30:27,850\nAm I deploying desktops,\nam I deploying servers,\n\n705\n00:30:27,850 --> 00:30:30,140\nam I deploying desktop virtualization.\n\n706\n00:30:30,140 --> 00:30:30,760\nRight?\n\n707\n00:30:30,760 --> 00:30:35,400\nAnd each of these scenarios\nare going to change the different\n\n708\n00:30:35,400 --> 00:30:38,480\noptions that are available here inside\nof my assessment and planning toolkit.\n\n709\n00:30:38,480 --> 00:30:39,670\n>> Right.\n\n710\n00:30:39,670 --> 00:30:42,190\n>> So, you just kind of poke around in\nhere and you'll see all sorts of stuff,\n\n711\n00:30:42,190 --> 00:30:46,440\nbut if I want to server deployments,\nthis is my current scenario.\n\n712\n00:30:46,440 --> 00:30:50,700\nAnd so, now, I can perform an inventory\nwhere it will look at the systems that\n\n713\n00:30:50,700 --> 00:30:54,780\nare on my network right now and help to\nidentify areas where we might consolidate\n\n714\n00:30:54,780 --> 00:30:57,500\nservers together instead\nof having them separate.\n\n715\n00:30:57,500 --> 00:31:01,400\nAnd some of the other options are what\ntype of considerations we might have if we\n\n716\n00:31:01,400 --> 00:31:04,110\nare deploying to this hardware\nversus that hardware.\n\n717\n00:31:04,110 --> 00:31:06,300\nHow our networks are arranged and so on.\n\n718\n00:31:06,300 --> 00:31:07,580\nIt gives you a lot of good suggestions.\n\n719\n00:31:07,580 --> 00:31:09,590\n>> And it's pretty impressive\ndid you just download that?\n\n720\n00:31:09,590 --> 00:31:10,670\nYeah, did you look and see?\n\n721\n00:31:10,670 --> 00:31:11,910\nYou might have got that sample.\n\n722\n00:31:11,910 --> 00:31:13,355\nI don't know if you got\nthe sample files with you.\n\n723\n00:31:13,355 --> 00:31:15,640\nBecause it'll show you some,\nI don't know if we really wanna do a scan.\n\n724\n00:31:15,640 --> 00:31:17,840\nIt does take a little while.\n\n725\n00:31:17,840 --> 00:31:20,190\n>> The scan does take a while.\n\n726\n00:31:20,190 --> 00:31:22,720\nI may not have chosen it.\n\n727\n00:31:22,720 --> 00:31:26,090\n>> It showed up in a folder I\nactually downloaded it into.\n\n728\n00:31:26,090 --> 00:31:29,900\nYou know, let's just do this, or we can\ncheck during the break or something.\n\n729\n00:31:29,900 --> 00:31:31,074\n>> Yeah, we'll look at the break.\n\n730\n00:31:31,074 --> 00:31:35,750\n>> I downloaded it right from here and\nit didn't prompt me about any...\n\n731\n00:31:35,750 --> 00:31:37,950\n>> It just gave you that one, okay.\n\n732\n00:31:37,950 --> 00:31:42,315\n>> Yeah, I don't know,\nmaybe I was just being lazy.\n\n733\n00:31:42,315 --> 00:31:44,012\n>> [LAUGH]\n>> But yeah, when you install it,\n\n734\n00:31:44,012 --> 00:31:47,306\nthe real benefit, the real power to me,\nis this guy right here,\n\n735\n00:31:47,306 --> 00:31:48,777\nthe getting started guide.\n\n736\n00:31:48,777 --> 00:31:53,697\nIt starts to give you advice over how to\nuse this tool to be able to go in and\n\n737\n00:31:53,697 --> 00:31:59,790\nstart to examine your network, figure out\nwhat's going on and then what you can do.\n\n738\n00:31:59,790 --> 00:32:03,100\nAnd, you'll see that it's really just\ngonna turn out a bunch of reports.\n\n739\n00:32:03,100 --> 00:32:07,400\nAnd, see how it's got this life,\ncan I zoom in on that?\n\n740\n00:32:07,400 --> 00:32:08,420\n>> Yeah really nice reports.\n\n741\n00:32:08,420 --> 00:32:10,550\nI mean, they come out as an Excel\nspreadsheet and it'll tell you hey,\n\n742\n00:32:10,550 --> 00:32:15,930\nwe found five exchange servers and\nwe see you've got 700 mailboxes and\n\n743\n00:32:15,930 --> 00:32:19,180\nthings like that and it'll start to give\nyou an idea of what you've got out there\n\n744\n00:32:19,180 --> 00:32:23,110\nin the first place, and as Don was saying\nwhat we can maybe start to consolidate.\n\n745\n00:32:23,110 --> 00:32:23,940\n>> Yeah.\n\n746\n00:32:23,940 --> 00:32:27,140\nAnd if you look at how they intend you\nto use this, there's six steps, and\n\n747\n00:32:27,140 --> 00:32:31,000\nnotice only the last two steps\ninclude using the map itself.\n\n748\n00:32:31,000 --> 00:32:33,100\nAlmost everything else is part of\nthe getting started guide, right?\n\n749\n00:32:33,100 --> 00:32:33,930\nGetting your requirements,\n\n750\n00:32:33,930 --> 00:32:37,030\npreparing your environments,\ngetting yourself ready for that.\n\n751\n00:32:37,030 --> 00:32:41,717\nSo we're really gonna be doing a lot\nof work just kind of getting in\n\n752\n00:32:41,717 --> 00:32:42,918\nplace to run it.\n\n753\n00:32:42,918 --> 00:32:46,340\nSo, back in here we can perform\nan inventory where it's gonna go and\n\n754\n00:32:46,340 --> 00:32:48,922\nscan our network and\nwhat Mike what was saying was,\n\n755\n00:32:48,922 --> 00:32:51,764\nman if I had those sample files,\nwe'd already be done.\n\n756\n00:32:51,764 --> 00:32:53,252\n>> [LAUGH]\n>> If you don't,\n\n757\n00:32:53,252 --> 00:32:55,317\nit takes a long time to scan a network.\n\n758\n00:32:55,317 --> 00:32:58,150\nAnd you'll see all the different\nthings that it can scan.\n\n759\n00:32:58,150 --> 00:33:01,525\nNot just Windows computers, but\nit'll do Linux, UNIX computers,\n\n760\n00:33:01,525 --> 00:33:06,930\nVMware Exchange, Active Directory, you'll\nsee theres a bunch of stuff in here.\n\n761\n00:33:06,930 --> 00:33:10,300\nSo maybe I'll do\nActive Directory in Windows.\n\n762\n00:33:10,300 --> 00:33:13,270\nWhat else might I want to chose in here?\n\n763\n00:33:13,270 --> 00:33:15,090\nWe'll just stick with that for right now.\n\n764\n00:33:15,090 --> 00:33:16,278\n>> Yeah, keep it short and sweet.\n\n765\n00:33:16,278 --> 00:33:19,735\n>> And so then we can specify exactly\nwhat we're gonna be tapping into, like\n\n766\n00:33:19,735 --> 00:33:24,725\nthe Active Directory, SCCM if we've got\nit, other Windows networking protocols.\n\n767\n00:33:24,725 --> 00:33:27,865\nWe can scan an IP range which\nis what I'm gonna choose\n\n768\n00:33:27,865 --> 00:33:30,065\ncuz I'm not actually joined\nto an Active Directory.\n\n769\n00:33:30,065 --> 00:33:30,902\nOh, you know what?\n\n770\n00:33:30,902 --> 00:33:33,705\nIt's gonna make me,\nI'll just leave it off for now.\n\n771\n00:33:33,705 --> 00:33:35,820\nWe'll scan IP range.\n\n772\n00:33:35,820 --> 00:33:37,800\nAnd then we can punch in that range.\n\n773\n00:33:37,800 --> 00:33:42,946\nNow my laptop is not joined to the domain\nhere which is why I'm not scanning that,\n\n774\n00:33:42,946 --> 00:33:47,712\nbut if I go in and just tell it to scan\nthat network, it'll go and look at what\n\n775\n00:33:47,712 --> 00:33:52,966\nwe've got and start to give us information\nabout considerations on our network.\n\n776\n00:33:52,966 --> 00:33:56,216\nSo I'm gonna give it\na little account here.\n\n777\n00:33:56,216 --> 00:33:58,585\n>> Now I gotta remember\nwhat my account is.\n\n778\n00:33:58,585 --> 00:34:01,394\n>> [LAUGH]\n>> It probably wants the whole thing.\n\n779\n00:34:01,394 --> 00:34:03,391\n[CROSSTALK]\n>> So what is it?\n\n780\n00:34:03,391 --> 00:34:06,386\nThe lab don, I think is what I am.\n\n781\n00:34:06,386 --> 00:34:07,013\n>> We shall find out.\n\n782\n00:34:07,013 --> 00:34:07,942\n>> We'll find out, yeah.\n\n783\n00:34:07,942 --> 00:34:09,846\n>> [LAUGH]\n>> If it fails miserably.\n\n784\n00:34:09,846 --> 00:34:12,722\nSo we'll just save that.\n\n785\n00:34:12,722 --> 00:34:15,299\nAnd so I'll have that credential so\nwe can reach out and look at the machines.\n\n786\n00:34:16,760 --> 00:34:18,720\nAll right, so there we go.\n\n787\n00:34:18,720 --> 00:34:21,250\nRun it.\nWonderful and we'll let it scan.\n\n788\n00:34:21,250 --> 00:34:23,280\nAll right, so it's gonna run and scan.\n\n789\n00:34:23,280 --> 00:34:27,250\nI told it to do an IP scan so\nit's got 254 IPs in that network, so\n\n790\n00:34:27,250 --> 00:34:28,540\nit's scanning along.\n\n791\n00:34:28,540 --> 00:34:30,490\nSome of the machines on here are Macs and\nso\n\n792\n00:34:30,490 --> 00:34:34,630\nit's not gonna be able to talk to them but\nwhen it finds the Windows machines,\n\n793\n00:34:34,630 --> 00:34:36,800\nthere's a Windows Active Directory\non this network.\n\n794\n00:34:36,800 --> 00:34:39,110\nI gave it my credentials so\nit'll hit those, and\n\n795\n00:34:39,110 --> 00:34:41,200\nit'll start to break down\ninformation about those systems.\n\n796\n00:34:41,200 --> 00:34:45,560\nIf they're running Windows Server 2008,\nit's going to give me information about\n\n797\n00:34:45,560 --> 00:34:47,280\nwhat would happen if I wanted\nto upgrade to 2012, and\n\n798\n00:34:47,280 --> 00:34:49,720\ndifferent scenarios that\nare available there.\n\n799\n00:34:49,720 --> 00:34:53,070\nIt'll also give me recommendations\non other server deployments I might\n\n800\n00:34:53,070 --> 00:34:54,290\nneed to make.\n\n801\n00:34:54,290 --> 00:34:55,840\nI only scanned one subnet.\n\n802\n00:34:55,840 --> 00:34:59,730\nIf I scanned more than one subnet, now it\nwould know I had different networks and\n\n803\n00:34:59,730 --> 00:35:02,580\nthat brings a lot of different\nstuff into play there.\n\n804\n00:35:02,580 --> 00:35:05,590\nAll right, so it's gonna go and\ntake a look at that,\n\n805\n00:35:05,590 --> 00:35:08,210\nand it'll take a little\nwhile to churn through this.\n\n806\n00:35:08,210 --> 00:35:10,230\nI don't know if we wanna wait for\nit or not.\n\n807\n00:35:10,230 --> 00:35:12,060\n>> We can just let it\nrun in the background.\n\n808\n00:35:12,060 --> 00:35:12,850\n>> Okay.\n\n809\n00:35:12,850 --> 00:35:15,050\nSo I guess I can't use the MapGo,\nbut yeah,\n\n810\n00:35:15,050 --> 00:35:17,650\nwe can go on to talk about other\nthings and come back to it.\n\n811\n00:35:17,650 --> 00:35:20,930\nAnd, yeah, actually let's do that, cuz if\nwe come back to it and it's still running,\n\n812\n00:35:20,930 --> 00:35:24,240\nthen we can go and get those sample files\nand pull those up instead, so one way or\n\n813\n00:35:24,240 --> 00:35:25,150\nanother we'll get to it.\n\n814\n00:35:25,150 --> 00:35:26,080\n>> Sounds like a plan.\n\n815\n00:35:26,080 --> 00:35:30,160\n>> But the assessment planning toolkit,\nthat's the one that's really designed for\n\n816\n00:35:30,160 --> 00:35:31,230\nfiguring out your design.\n\n817\n00:35:31,230 --> 00:35:32,710\nFigure out what you need.\n\n818\n00:35:32,710 --> 00:35:37,659\nIf it scans your network, and it finds\nthat you have 10,000 workstations and\n\n819\n00:35:37,659 --> 00:35:39,467\nonly 1 domain controller.\n\n820\n00:35:39,467 --> 00:35:40,130\nAll right?\n\n821\n00:35:40,130 --> 00:35:43,335\nWell it's going to recommend at least one\nmore domain controller anyway because\n\n822\n00:35:43,335 --> 00:35:45,130\nit'll know that you need redundancy.\n\n823\n00:35:45,130 --> 00:35:50,310\nBut it'll probably recommend one more or\nmaybe even two more\n\n824\n00:35:50,310 --> 00:35:54,410\nbased on the load that the systems are\nunder based on user authentication, right?\n\n825\n00:35:54,410 --> 00:35:56,800\nThat's the kind of thing that\nthe Assessment and Planning Tool Kit does.\n\n826\n00:35:56,800 --> 00:35:59,600\nIt helps us to recognize\nareas in our network that\n\n827\n00:35:59,600 --> 00:36:02,320\naren't up to Microsoft's best practices.\n\n828\n00:36:02,320 --> 00:36:04,690\nBut it's not the be all\nend all of designs.\n\n829\n00:36:04,690 --> 00:36:07,840\nThere's plenty of times in real\nlife land when your designs might\n\n830\n00:36:07,840 --> 00:36:10,269\ndiffer from what's just\nconsidered the best practice.\n\n831\n00:36:11,860 --> 00:36:14,010\nLet's use user account as an example.\n\n832\n00:36:14,010 --> 00:36:16,720\nRight?\nI might have a network with just 500\n\n833\n00:36:16,720 --> 00:36:21,180\nusers, and Mike might have a network\nwith 5,000 users, all right?\n\n834\n00:36:21,180 --> 00:36:25,520\nBut maybe in Mike's network,\npeople sit down, they really work from\n\n835\n00:36:25,520 --> 00:36:30,640\njust their computer, and that's it, they\ndon't do a lot of network authentication.\n\n836\n00:36:30,640 --> 00:36:34,250\nBut in my network, people are constantly\naccessing network resources and\n\n837\n00:36:34,250 --> 00:36:36,960\nmoving between domains and doing all\nsorts of crazy stuff like that, so\n\n838\n00:36:36,960 --> 00:36:39,110\nthere's a huge amount of authentication.\n\n839\n00:36:39,110 --> 00:36:42,330\nSo even though I've only got\n10% of the users he does,\n\n840\n00:36:42,330 --> 00:36:46,820\nmy 500 users might be generating more\nauthentication activity than his.\n\n841\n00:36:46,820 --> 00:36:49,230\nSo we can't just base\ndecisions on simple things,\n\n842\n00:36:49,230 --> 00:36:50,680\nlike how many user accounts do you have?\n\n843\n00:36:50,680 --> 00:36:52,120\nOr how many computers do you have?\n\n844\n00:36:52,120 --> 00:36:55,820\nCuz it's really based around how\nmuch activity you're under, and\n\n845\n00:36:55,820 --> 00:36:57,120\nthat's what this tool can determine.\n\n846\n00:36:57,120 --> 00:37:00,850\n>> Yeah, cuz it's got a great module\nin there that can go back and scan for\n\n847\n00:37:00,850 --> 00:37:02,960\nperformance indexes and look at that and\n\n848\n00:37:02,960 --> 00:37:06,900\ngive you an idea of how your servers\nare handling the normal work load.\n\n849\n00:37:06,900 --> 00:37:08,930\nAnd again,\nmaybe thinking about consolidating.\n\n850\n00:37:08,930 --> 00:37:11,040\nMaybe you want to go virtual\nwith some of your servers,\n\n851\n00:37:11,040 --> 00:37:14,800\nmaybe you want to start consolidating some\nof those roles onto the same machine,\n\n852\n00:37:14,800 --> 00:37:17,470\nand this is your first\nlook at what might be\n\n853\n00:37:17,470 --> 00:37:19,270\npossible within your network when\nyou're planning everything out.\n\n854\n00:37:20,370 --> 00:37:21,640\n>> Yep.\n\n855\n00:37:21,640 --> 00:37:24,550\nSo that's what the assessment and\nplanning toolkit does.\n\n856\n00:37:24,550 --> 00:37:25,300\nIt's pretty cool.\n\n857\n00:37:25,300 --> 00:37:26,480\nIt's a neat system.\n\n858\n00:37:26,480 --> 00:37:31,130\nI don't really rely on it too much for\ncoming up with my overall design, but\n\n859\n00:37:31,130 --> 00:37:33,030\nit is great for planning your upgrades.\n\n860\n00:37:33,030 --> 00:37:34,630\nIt'll tell you whether systems are ready.\n\n861\n00:37:34,630 --> 00:37:36,520\nIt's good for that kind of stuff.\n\n862\n00:37:36,520 --> 00:37:40,710\nEvery tool has its Its pros and cons,\nso just be aware, the assessment and\n\n863\n00:37:40,710 --> 00:37:44,570\ndeployment toolkit, which is great for\nactually doing the deployment,\n\n864\n00:37:44,570 --> 00:37:48,440\nthe assessment and planning toolkit or\nthe MAP, Microsoft Assessment and\n\n865\n00:37:48,440 --> 00:37:52,020\nPlanning toolkit, is great for planning.\n\n866\n00:37:52,020 --> 00:37:54,050\nAll right, so-\n>> Which is our primary objective for\n\n867\n00:37:54,050 --> 00:37:54,840\nthis example.\n\n868\n00:37:54,840 --> 00:37:57,660\n>> So some of the other things that we've\ngot up there that the rest of these\n\n869\n00:37:57,660 --> 00:38:02,590\nobjectives really kind of stacked\ntogether, talking about stuff we've\n\n870\n00:38:02,590 --> 00:38:08,410\nalready talked about, these last\nlittle sections here boil down to WDS,\n\n871\n00:38:08,410 --> 00:38:13,710\nthe Windows Deployment Server, and\nMicrosoft Azure, the cloud based service.\n\n872\n00:38:13,710 --> 00:38:16,440\nSo, let's start talking about WDS first.\n\n873\n00:38:17,450 --> 00:38:21,765\nSo, if we choose to go with WDS For\nour deployment system.\n\n874\n00:38:21,765 --> 00:38:23,165\nAll right, that's great.\n\n875\n00:38:23,165 --> 00:38:24,165\nIt's really easy.\n\n876\n00:38:24,165 --> 00:38:28,455\nIt's just a role we add to a server,\nso no big deal there, right?\n\n877\n00:38:28,455 --> 00:38:30,075\nWell, let me pull up a diagram.\n\n878\n00:38:30,075 --> 00:38:34,315\nSo let's say we've got a diagram,\nsomething.\n\n879\n00:38:34,315 --> 00:38:36,405\nWell let's just go with this.\n\n880\n00:38:36,405 --> 00:38:38,915\nOkay, so\nI've got Site 1 here on my network, and\n\n881\n00:38:38,915 --> 00:38:42,830\nI've got a couple of workstations here and\nI've got a couple of servers here.\n\n882\n00:38:42,830 --> 00:38:48,220\nAnd I wanna set up a semi-automated\ndeployment system, so that as I add new\n\n883\n00:38:48,220 --> 00:38:52,440\nworkstations I can quickly just thow an\nimage out there and get them up to date.\n\n884\n00:38:52,440 --> 00:38:55,280\nAll right, so I select WDS.\n\n885\n00:38:55,280 --> 00:38:56,850\nWhat's the high level steps, Mike, for\n\n886\n00:38:56,850 --> 00:38:58,560\ndeploying WDS in that\nkind of an environment?\n\n887\n00:38:58,560 --> 00:39:01,760\n>> Just taking yourself,\nget yourself a Server 2012 R2 box,\n\n888\n00:39:01,760 --> 00:39:04,287\nand it's a role that we would install, so\n\n889\n00:39:04,287 --> 00:39:08,440\nwe're just gonna go into our server\nmanager, click add roles and features,\n\n890\n00:39:08,440 --> 00:39:14,350\nnext three times, and choose to play\nwith services, and we're good to go.\n\n891\n00:39:14,350 --> 00:39:18,810\nIt's relatively easy to set up if\nyou've just got a single location and\n\n892\n00:39:18,810 --> 00:39:21,380\na single deployment server\nis gonna be all you need.\n\n893\n00:39:21,380 --> 00:39:23,500\nIt's got a wizard that's gonna\nwalk you through the process.\n\n894\n00:39:23,500 --> 00:39:27,560\nIt's gonna ask you as soon as you\ninstall the role, like most roles you\n\n895\n00:39:27,560 --> 00:39:30,490\ngotta go back and configure\nthe role to actually make it work.\n\n896\n00:39:30,490 --> 00:39:31,780\nAnd it needs certain things.\n\n897\n00:39:31,780 --> 00:39:32,920\nOnce you've installed the role,\n\n898\n00:39:32,920 --> 00:39:36,040\nyou've gotta tell it where\nyou're gonna store your images.\n\n899\n00:39:36,040 --> 00:39:39,874\nSo you gotta have somewhere that's got\nthe disk space, the storage capacity, and\n\n900\n00:39:39,874 --> 00:39:41,189\nthe performance remember,\n\n901\n00:39:41,189 --> 00:39:44,493\ncuz it's a very read in sensitive\nprocess there to store those images.\n\n902\n00:39:44,493 --> 00:39:48,840\nAnd then the next thing you've gotta do is\nyou've got to import your first images.\n\n903\n00:39:48,840 --> 00:39:52,773\nRight, we've gotta have a boot image that\nwe can start those computers up because\n\n904\n00:39:52,773 --> 00:39:55,343\ntypically We're dealing\nwith bare metal machines.\n\n905\n00:39:55,343 --> 00:39:59,461\nWe're pushing something out to a machine\nthat does not have an operating\n\n906\n00:39:59,461 --> 00:40:00,280\nsystem on it.\n\n907\n00:40:00,280 --> 00:40:02,530\nA server, a client,\nit really doesn't matter.\n\n908\n00:40:02,530 --> 00:40:07,310\nBut on the Windows server 2012 disk, or on\nthe Windows 8 disk, in the sources folder,\n\n909\n00:40:07,310 --> 00:40:13,230\nyou'll find the boot.wim, which we\ncan just import right off of the DVD,\n\n910\n00:40:13,230 --> 00:40:17,060\nand then there's also an install.wim,\nwhich is the basic\n\n911\n00:40:17,060 --> 00:40:20,730\ndefault installation of either Windows\n8 or 2012, whichever one you're doing.\n\n912\n00:40:20,730 --> 00:40:24,310\nSo those typically the first two\nthings we import in there, and\n\n913\n00:40:24,310 --> 00:40:30,480\nthen once you've got that set up you've\ngot a few other options like we've talked\n\n914\n00:40:30,480 --> 00:40:35,095\nabout in our deployment services episodes\nwhere I've got to worry about my DHCP.\n\n915\n00:40:35,095 --> 00:40:38,485\nIf it's running on the same\nserver as the deployment server\n\n916\n00:40:38,485 --> 00:40:41,805\nbecause they'll compete\nover that port 67 UDP.\n\n917\n00:40:43,645 --> 00:40:44,625\nWhat else do we got to do?\n\n918\n00:40:44,625 --> 00:40:48,175\nWe've got to set up some permissions\nas far as who can go in and\n\n919\n00:40:48,175 --> 00:40:55,580\naccess those images, set up our,\ngosh what else do we need to do?\n\n920\n00:40:55,580 --> 00:40:56,940\nWe can do a little message.\n\n921\n00:40:56,940 --> 00:41:00,260\nWe gotta decide whether or\nnot its going to respond to known clients,\n\n922\n00:41:00,260 --> 00:41:03,750\nwhich would be pre-stage clients, clients\nthat already exist in active directory.\n\n923\n00:41:03,750 --> 00:41:06,530\nOr right now in deployment\nservices console with 2012 you\n\n924\n00:41:06,530 --> 00:41:08,310\ncan set up your pre-stage machines there.\n\n925\n00:41:08,310 --> 00:41:13,050\nOr if you want it to respond to known and\nunknown clients, and\n\n926\n00:41:13,050 --> 00:41:17,830\nif you do that means Joe Stranger\ncan walk into your network and\n\n927\n00:41:17,830 --> 00:41:22,570\ncould potentially pull down your licensed\nsoftware and install it on their machine.\n\n928\n00:41:22,570 --> 00:41:27,580\nYou also have the option to do\na required administrator approval for\n\n929\n00:41:27,580 --> 00:41:28,820\nthose unknown devices as well.\n\n930\n00:41:28,820 --> 00:41:31,380\nAnd once you've got that set up you're,\n\n931\n00:41:31,380 --> 00:41:35,420\nreally you've got your basic deployment\nservices if that's all you need.\n\n932\n00:41:35,420 --> 00:41:37,760\n>> So, that's all stuff that\nwe covered in the MCSA shows.\n\n933\n00:41:38,760 --> 00:41:40,490\nWell, what's so hard about that design?\n\n934\n00:41:40,490 --> 00:41:44,210\nWell, let's talk about some of the things\nthat make the design more complex.\n\n935\n00:41:44,210 --> 00:41:48,460\nLet's say, you know in a small network,\nyou probably just have one network.\n\n936\n00:41:48,460 --> 00:41:50,140\nSo your work stations are right here,\n\n937\n00:41:50,140 --> 00:41:52,560\nthey're on the same network\nas your DWS server.\n\n938\n00:41:52,560 --> 00:41:55,430\nYou can fire up a work station,\nit'll reach right out on the network.\n\n939\n00:41:55,430 --> 00:41:59,780\nIt'll jump out there and find that\nDWS server, and pull down it's image.\n\n940\n00:41:59,780 --> 00:42:02,960\nThese guys all work, and\nthey're happy, and they're great.\n\n941\n00:42:02,960 --> 00:42:04,925\nAnd it's like Mike said if we got DHCP,\n\n942\n00:42:04,925 --> 00:42:09,034\nthe clients boot up they look in the DHCP\nserver, it tells them where to boot from,\n\n943\n00:42:09,034 --> 00:42:11,435\nthey then go over WDS and\nthey're in business.\n\n944\n00:42:11,435 --> 00:42:12,225\n>> Right.\n\n945\n00:42:12,225 --> 00:42:16,970\n>> What if you have more than\none subnet though, all right.\n\n946\n00:42:16,970 --> 00:42:19,260\nIf I have more than one subnet,\n\n947\n00:42:19,260 --> 00:42:25,010\nthen my clients down here go to boot\nup and do they find that WDS server?\n\n948\n00:42:25,010 --> 00:42:26,340\nNo.\nIt's on a different network.\n\n949\n00:42:26,340 --> 00:42:27,750\n>> It's all broadcast at that point.\n\n950\n00:42:27,750 --> 00:42:30,250\n>> So when they send their broadcast out,\n\n951\n00:42:30,250 --> 00:42:33,290\nit doesn't make it over\nto this other WDS server.\n\n952\n00:42:33,290 --> 00:42:34,790\nSo they don't find.\n\n953\n00:42:34,790 --> 00:42:40,010\nSo in that scenario where we've\ngot multiple subnets involved,\n\n954\n00:42:40,010 --> 00:42:40,930\nour design has to change.\n\n955\n00:42:40,930 --> 00:42:42,480\n>> Right.\n>> And there's a few ways you can\n\n956\n00:42:42,480 --> 00:42:43,590\nhandle this.\n\n957\n00:42:43,590 --> 00:42:46,775\nYou can do like what we did here,\none of the easier solutions,\n\n958\n00:42:46,775 --> 00:42:49,850\nwhich is to stick more than one\nnetwork card in your WDS box.\n\n959\n00:42:49,850 --> 00:42:54,385\nRight, I could put more than one network\ncard in this WDS box, and it could have\n\n960\n00:42:54,385 --> 00:42:59,730\nan interface on Subnet 1, and an interface\non Subnet 2, and an interface on Subnet 3.\n\n961\n00:42:59,730 --> 00:43:00,290\nRight?\n\n962\n00:43:00,290 --> 00:43:01,580\n>> Right, but\nthat would require three network cards.\n\n963\n00:43:01,580 --> 00:43:04,364\n>> Exactly, and if it's a virtual\nenvironment, easy breezy, right?\n\n964\n00:43:04,364 --> 00:43:05,690\n>> Oh, well, that's a good point.\n\n965\n00:43:05,690 --> 00:43:08,416\n>> It can go right into that if\nthat deployment server was virtual,\n\n966\n00:43:08,416 --> 00:43:12,052\neasy enough to just add additional network\nadapters to it, and configure routing and\n\n967\n00:43:12,052 --> 00:43:12,720\nlet it attach.\n\n968\n00:43:12,720 --> 00:43:16,465\nIf it's a physical machine, now we've\ngot talking about buying more network\n\n969\n00:43:16,465 --> 00:43:19,190\nadapters, running cables,\nand things like that.\n\n970\n00:43:19,190 --> 00:43:21,840\nWhich might be more than\nwhat we wanna try to do.\n\n971\n00:43:21,840 --> 00:43:23,730\n>> So there's alternatives, right.\n\n972\n00:43:23,730 --> 00:43:28,142\nWhat we could do is when we deploy\nWindows Deployment Services,\n\n973\n00:43:28,142 --> 00:43:30,520\nthere's really two pieces to it.\n\n974\n00:43:30,520 --> 00:43:37,900\nThere's the WDS image server itself, and\nthen there's the WDS transport server.\n\n975\n00:43:37,900 --> 00:43:41,480\nAnd when you go to install it,\nit actually installs both of them.\n\n976\n00:43:41,480 --> 00:43:48,400\n>> But if we've got separate subnets and\nwe just want to help people find the WDS,\n\n977\n00:43:48,400 --> 00:43:54,200\nwe could deploy just a WDS transport\nserver, in those other subnets.\n\n978\n00:43:54,200 --> 00:44:00,030\nSo I might build another server and\nstick it out here on this subnet,\n\n979\n00:44:00,030 --> 00:44:03,750\nand this'll be a WDS transport server.\n\n980\n00:44:03,750 --> 00:44:07,665\n>> And I'm not quite sure why it's\nsmashing my text, kinda strange but.\n\n981\n00:44:07,665 --> 00:44:10,808\n>> [LAUGH]\n>> I'll run with it.\n\n982\n00:44:10,808 --> 00:44:11,765\n>> [LAUGH]\n>> [LAUGH]\n\n983\n00:44:11,765 --> 00:44:13,231\n>> So I can deploy one here too,\n\n984\n00:44:13,231 --> 00:44:13,850\nall right.\n\n985\n00:44:13,850 --> 00:44:16,588\n>> When we deploy these\nWDS transport servers,\n\n986\n00:44:16,588 --> 00:44:21,595\nthey're not full-blown WDS servers,\nthey don't have the image store on them.\n\n987\n00:44:21,595 --> 00:44:22,410\n>> Mm-hm.\n>> Right?\n\n988\n00:44:22,410 --> 00:44:25,240\nThey just help you find WDS and\ntalk to it.\n\n989\n00:44:25,240 --> 00:44:29,420\nSo these machines when they fire up\nthey reach out under their network and\n\n990\n00:44:29,420 --> 00:44:31,370\nthey see the transport server.\n\n991\n00:44:31,370 --> 00:44:36,440\nAnd the transport server then helps\nthem to be able to reach out and\n\n992\n00:44:36,440 --> 00:44:41,550\nconnect back to your primary to get\ntheir image to be able to deploy.\n\n993\n00:44:41,550 --> 00:44:43,567\nSo in a multiple subnet environment,\n\n994\n00:44:43,567 --> 00:44:46,050\nyou're gonna have to do\none of those things right.\n\n995\n00:44:46,050 --> 00:44:49,920\nYou're either going to have to do, there's\nsome manipulation that you can do too.\n\n996\n00:44:49,920 --> 00:44:51,630\n>> Yeah.\nYou can definitely do some relays agents\n\n997\n00:44:51,630 --> 00:44:52,610\nor something like that.\n\n998\n00:44:52,610 --> 00:44:55,490\nI think the one thing to keep in mind is\nwhat you said though that guy does not\n\n999\n00:44:55,490 --> 00:44:57,020\nhave the images out there.\n\n1000\n00:44:57,020 --> 00:44:59,020\nWe're still talking\ntransporting that image.\n\n1001\n00:44:59,020 --> 00:45:01,970\nSo if this is subnets within a facility.\n\n1002\n00:45:01,970 --> 00:45:04,220\nRight, if we are all on\na nice high speed LAN,\n\n1003\n00:45:04,220 --> 00:45:06,880\nthis might could work out really well.\n\n1004\n00:45:06,880 --> 00:45:09,345\nIf we're talking about across WAN links,\n\n1005\n00:45:09,345 --> 00:45:11,520\ndon't know if we are ready\nto jump to that yet.\n\n1006\n00:45:11,520 --> 00:45:13,840\n>> Sure.\nLet me just change this.\n\n1007\n00:45:13,840 --> 00:45:18,760\n>> Yeah, if those were different sites\ninstead of subnets, now we really,\n\n1008\n00:45:18,760 --> 00:45:23,390\nI mean some of our thick images are 60,\n70 GB in sizes for\n\n1009\n00:45:23,390 --> 00:45:26,730\nour clients with all that\nsoftware installed on there.\n\n1010\n00:45:26,730 --> 00:45:28,720\nI really don't need that\ngoing across that WAN link.\n\n1011\n00:45:28,720 --> 00:45:30,660\nI've got users that are trying\nto use that network to\n\n1012\n00:45:30,660 --> 00:45:32,170\ndo their jobs, things like that.\n\n1013\n00:45:32,170 --> 00:45:34,210\nIt's gonna be slow.\n\n1014\n00:45:34,210 --> 00:45:36,820\nIf anything happens\nduring that transmission.\n\n1015\n00:45:36,820 --> 00:45:40,400\nIt uses bits and stuff, but it's just\nnot something we wanna deal with.\n\n1016\n00:45:40,400 --> 00:45:44,022\nWe can set up a hierarchy\nof deployment servers.\n\n1017\n00:45:44,022 --> 00:45:46,120\nWhere we instead of putting\nthat transport out there,\n\n1018\n00:45:46,120 --> 00:45:50,920\njust the transport, we actually set up\nmultiple Windows Deployment Servers.\n\n1019\n00:45:50,920 --> 00:45:56,140\nOne at each one of those WDS servers\nat each one of those locations.\n\n1020\n00:45:56,140 --> 00:45:59,821\nIf you're going to do, and I can't\nremember if we talked about the hierarchy\n\n1021\n00:45:59,821 --> 00:46:01,785\nin our previous, I don't think we did.\n\n1022\n00:46:01,785 --> 00:46:03,910\nDid we, in our other deployment show?\n\n1023\n00:46:03,910 --> 00:46:05,500\n>> I don't recall.\n\n1024\n00:46:05,500 --> 00:46:07,460\n>> So, let's go back over it anyway.\n\n1025\n00:46:07,460 --> 00:46:10,347\nSo when we do that hierarchy,\nwe're gonna have a couple of more choices,\n\n1026\n00:46:10,347 --> 00:46:12,270\nand this again is going\nto come to your planning.\n\n1027\n00:46:12,270 --> 00:46:15,943\nHow do you want to handle this, cuz if you\nput a deployment server at each location,\n\n1028\n00:46:15,943 --> 00:46:17,310\nthey can be independent.\n\n1029\n00:46:17,310 --> 00:46:21,310\nThey can each one has to\nbe managed independently.\n\n1030\n00:46:21,310 --> 00:46:25,898\nOr, I can kinda set it up to where\nthere's a hierarchy to them,\n\n1031\n00:46:25,898 --> 00:46:31,890\nwhere they get all their configuration\ninformation from that parent WDS server.\n\n1032\n00:46:31,890 --> 00:46:36,964\n>> And you can combine that with FRS,\nthe File Replication Services,\n\n1033\n00:46:36,964 --> 00:46:40,800\nto be able to basically\nreplicate the image store.\n\n1034\n00:46:40,800 --> 00:46:43,546\nSo that when you create a new image and\nstore it up here,\n\n1035\n00:46:43,546 --> 00:46:45,994\nit can be replicated down\nto the other sites, and\n\n1036\n00:46:45,994 --> 00:46:50,040\nwhen you make modifications and stuff\nFRS will do the block level replication.\n\n1037\n00:46:50,040 --> 00:46:52,330\nSo that you get the images stored\nout at your different locations.\n\n1038\n00:46:52,330 --> 00:46:57,490\nThat's really important,\nbecause what if this site is New York?\n\n1039\n00:46:57,490 --> 00:47:01,470\nAnd this other site is somewhere\nin Hawaii or whatever.\n\n1040\n00:47:01,470 --> 00:47:05,290\nSo you could have huge\ngeographical distances and\n\n1041\n00:47:05,290 --> 00:47:09,390\nif you have multiple machines\nall getting imaged at once,\n\n1042\n00:47:09,390 --> 00:47:13,560\nwell multicast are really pretty\ndifficult to send over a WAN link.\n\n1043\n00:47:13,560 --> 00:47:16,190\nYou can but it requires a lot of\nnetwork infrastructure to do it.\n\n1044\n00:47:16,190 --> 00:47:20,240\nSo most of the time these will end up\nbeing unicast, apparently my battery\n\n1045\n00:47:20,240 --> 00:47:25,020\nis running low, these will end up being\nunicast going across the network and\n\n1046\n00:47:25,020 --> 00:47:27,470\nthat means each one is carrying\ntheir own data stream and\n\n1047\n00:47:27,470 --> 00:47:31,060\nthat's definitely not\nsomething that we wanna push.\n\n1048\n00:47:31,060 --> 00:47:35,260\nSo having that transport server, having\nwhere we can, and iTunes is gonna update.\n\n1049\n00:47:35,260 --> 00:47:37,730\nWhat is going on?\nMy laptop has decided-\n\n1050\n00:47:37,730 --> 00:47:38,350\n>> It's taking over.\n\n1051\n00:47:38,350 --> 00:47:39,302\n[LAUGH]\n>> Battery's low,\n\n1052\n00:47:39,302 --> 00:47:40,060\nit's time to update iTunes.\n\n1053\n00:47:40,060 --> 00:47:41,675\n>> [LAUGH]\n>> So anyhow,\n\n1054\n00:47:41,675 --> 00:47:46,379\nit's gonna help to alleviate that,\nbut we've got to make that decision.\n\n1055\n00:47:46,379 --> 00:47:49,989\nIf they're just separate subnets,\nand it's all in the same building,\n\n1056\n00:47:49,989 --> 00:47:54,135\nthen you're not really worried about the\nextra bandwidth passing between subnets\n\n1057\n00:47:54,135 --> 00:47:57,470\nbecause it is still local, so\nyou can use just A transport server.\n\n1058\n00:47:57,470 --> 00:48:01,640\nBut if these are geographical boundaries,\ndistances like that, and\n\n1059\n00:48:01,640 --> 00:48:05,879\nyou want to minimize on the WAN length,\nthat is where you've got to do,\n\n1060\n00:48:05,879 --> 00:48:09,855\nnot just a transport server,\nbut a full blown WDS install.\n\n1061\n00:48:09,855 --> 00:48:13,355\nWhen you do the install,\nthat's the default, it does both WDS and\n\n1062\n00:48:13,355 --> 00:48:15,860\nthe transport role on it,\nso it can actually be both.\n\n1063\n00:48:15,860 --> 00:48:16,775\n>> Mm-hm.\nAnd\n\n1064\n00:48:16,775 --> 00:48:18,825\nit gives you that choice during\nthat wizard when you go to install.\n\n1065\n00:48:18,825 --> 00:48:21,725\nThere's two little check marks\nthere that you can check, one for\n\n1066\n00:48:21,725 --> 00:48:26,302\neach of those subcomponents\nof that role service.\n\n1067\n00:48:27,432 --> 00:48:29,202\nYeah, I think I put that on for you.\n\n1068\n00:48:29,202 --> 00:48:29,882\n>> Yeah right, I've got it.\n\n1069\n00:48:29,882 --> 00:48:30,751\nThere we go.\n>> Okay. [LAUGH] >> [LAUGH] So\n\n1070\n00:48:30,751 --> 00:48:33,512\ngotta get enough battery juice to\nget through the rest of the segment.\n\n1071\n00:48:33,512 --> 00:48:34,192\n>> Right.\n>> Actually,\n\n1072\n00:48:34,192 --> 00:48:36,950\nthis is probably a pretty good spot for\nus to stop anyway.\n\n1073\n00:48:36,950 --> 00:48:40,160\nI wanna double check that map scan\nthat was running in the background,\n\n1074\n00:48:40,160 --> 00:48:42,850\nmake sure it's done, or\nshow some sample files, or whatever.\n\n1075\n00:48:42,850 --> 00:48:44,630\n>> Okay.\n>> To give everyone a chance to see that.\n\n1076\n00:48:44,630 --> 00:48:47,870\nWe still have Microsoft Azure and\nthe cloud deployments to talk about, and\n\n1077\n00:48:47,870 --> 00:48:49,880\nI feel like there's something\nelse we're leaving out.\n\n1078\n00:48:49,880 --> 00:48:52,140\n>> There was something\n>> And we got app controller.\n\n1079\n00:48:52,140 --> 00:48:53,090\nWe'll talk about that one.\n\n1080\n00:48:53,090 --> 00:48:54,150\nBut I think that's it.\n\n1081\n00:48:54,150 --> 00:48:55,520\n>> Maybe a little bit about multi cast.\n\n1082\n00:48:55,520 --> 00:48:58,340\nWell actually, we went over most of\nthe options of the different multi cast\n\n1083\n00:48:58,340 --> 00:49:00,150\noptions themselves in an hour of the show.\n\n1084\n00:49:00,150 --> 00:49:01,680\n>> All right, when we get back,\n\n1085\n00:49:01,680 --> 00:49:03,690\nwe'll talk a little bit more\nabout cloud deployments and\n\n1086\n00:49:03,690 --> 00:49:07,840\nwe'll see a bit more of the map utility,\nand then, we'll wrap up from there.\n\n1087\n00:49:07,840 --> 00:49:08,790\nSo, stay tuned.\n\n1088\n00:49:08,790 --> 00:49:09,920\nWe'll be back in a few.\n\n1089\n00:49:09,920 --> 00:49:16,920\n[SOUND].\n\n1090\n00:49:16,920 --> 00:49:17,620\nAll right.\n\n1091\n00:49:17,620 --> 00:49:18,930\nWelcome back everybody.\n\n1092\n00:49:18,930 --> 00:49:25,200\nSo during the break, we let the [LAUGH]\nassessment and planning utility run.\n\n1093\n00:49:25,200 --> 00:49:29,090\nAnd I didn't choose to do\nthe performance assessment.\n\n1094\n00:49:29,090 --> 00:49:31,400\nAnd so it actually finished pretty quick.\n\n1095\n00:49:31,400 --> 00:49:33,150\nOn a positive side,\nit finished kind of quick.\n\n1096\n00:49:33,150 --> 00:49:34,992\nOn the negative side,\nit didn't get the good data.\n\n1097\n00:49:34,992 --> 00:49:36,260\n>> [LAUGH] Right.\n>> The performance data is where\n\n1098\n00:49:36,260 --> 00:49:36,840\nthe excitement is.\n\n1099\n00:49:36,840 --> 00:49:39,450\nI do have some sample files I\nwill show you here in a second.\n\n1100\n00:49:39,450 --> 00:49:40,920\nIt finished scanning my network.\n\n1101\n00:49:40,920 --> 00:49:44,400\nNow I gave it a single\nset of credentials and\n\n1102\n00:49:44,400 --> 00:49:47,750\nmost of the machines on my\nnetwork aren't on that domain.\n\n1103\n00:49:47,750 --> 00:49:51,320\nSo it really only found a handful of\nmachines that it could inventory and\n\n1104\n00:49:51,320 --> 00:49:51,990\nI expected that.\n\n1105\n00:49:51,990 --> 00:49:55,810\nSo I got four machines inventoried\nout of the 25 that it found.\n\n1106\n00:49:55,810 --> 00:49:57,733\n>> I'm pretty glad that you\ndidn't scan my machine.\n\n1107\n00:49:57,733 --> 00:49:59,750\n[LAUGH]\n>> [LAUGH] Why are there so\n\n1108\n00:49:59,750 --> 00:50:00,820\nmany image files on here?\n\n1109\n00:50:00,820 --> 00:50:05,670\n[LAUGH] So anyhow,\nit scans some and it found them, and\n\n1110\n00:50:05,670 --> 00:50:09,750\nwhat it's gonna do now is it's gonna show\nme my readiness for different scenarios.\n\n1111\n00:50:09,750 --> 00:50:11,420\nAnd so we can come over here and\n\n1112\n00:50:11,420 --> 00:50:14,750\nstart to look at some of the different\nthings that we might be planning on doing.\n\n1113\n00:50:14,750 --> 00:50:16,360\nMaybe I'm planning on going to the cloud.\n\n1114\n00:50:17,590 --> 00:50:20,210\nWell, it inventoried those machines and\n\n1115\n00:50:20,210 --> 00:50:24,170\nnow it's gonna show whether there's any\nconsiderations I need to have over whether\n\n1116\n00:50:24,170 --> 00:50:28,600\nthat machine will be compatible with\ngoing into Windows Azure, right?\n\n1117\n00:50:28,600 --> 00:50:32,310\nAnd I can see that there were three\nmachines that were ready 100% that\n\n1118\n00:50:32,310 --> 00:50:34,710\nI can take and move into the cloud.\n\n1119\n00:50:34,710 --> 00:50:38,230\nNow it should have found, there's\na domain controller, a file server, and\n\n1120\n00:50:38,230 --> 00:50:41,840\nyou know I don't even know what that\nthird server is, I think it's just a.\n\n1121\n00:50:41,840 --> 00:50:42,630\n>> A number server or?\n\n1122\n00:50:42,630 --> 00:50:47,620\n>> Yeah, so they're not anything crazy but\nyou might have third party software, or\n\n1123\n00:50:47,620 --> 00:50:50,890\nmore commonly, specialized hardware, and\n\n1124\n00:50:50,890 --> 00:50:54,040\nthat may make it where it\nwon't be cloud compatible.\n\n1125\n00:50:54,040 --> 00:50:57,270\nBut we can see that these machines here,\nand if I click on that, it'll go and\n\n1126\n00:50:57,270 --> 00:50:58,320\nbreak them down.\n\n1127\n00:50:58,320 --> 00:51:03,750\nAnd we can start to see what's going on as\nfar as whether we're ready to rock or not.\n\n1128\n00:51:03,750 --> 00:51:07,110\nAnd so, it just breaks it down for\nyou and kinda lays it out.\n\n1129\n00:51:07,110 --> 00:51:09,830\nThere's these Excel reports\nthat are a lot more detailed.\n\n1130\n00:51:09,830 --> 00:51:12,072\nSo here it tells me I got\nthree machines that are ready.\n\n1131\n00:51:12,072 --> 00:51:12,684\nWhich three?\n\n1132\n00:51:12,684 --> 00:51:14,700\n[LAUGH]\n>> Which three out of the 25 that we have?\n\n1133\n00:51:14,700 --> 00:51:16,325\nWhich three are actually ready?\n\n1134\n00:51:16,325 --> 00:51:17,040\n[LAUGH]\n>> Yep.\n\n1135\n00:51:17,040 --> 00:51:21,430\nSo, it does kinda leave you hanging\na little bit there, but if you generate\n\n1136\n00:51:21,430 --> 00:51:24,470\nthe readiness report, that's where you\nreally start to see your information.\n\n1137\n00:51:24,470 --> 00:51:27,930\nAnd you'll see that on each of these that\nwhen you go through and look at them,\n\n1138\n00:51:27,930 --> 00:51:30,900\nI’m sure you get some nice data I guess,\nbut\n\n1139\n00:51:30,900 --> 00:51:33,370\nat the end of the day it doesn’t\ngive you the really raw stuff.\n\n1140\n00:51:33,370 --> 00:51:34,720\nYou gotta pull up the Excel sheet for\nthat.\n\n1141\n00:51:34,720 --> 00:51:35,510\n>> Right.\n\n1142\n00:51:35,510 --> 00:51:37,580\nThose are great reports though,\nhigh level overviews.\n\n1143\n00:51:37,580 --> 00:51:40,940\nLet’s say we found that we had a bunch\nof machines that weren’t ready and\n\n1144\n00:51:40,940 --> 00:51:44,030\nwe dug into their reports,\nfigure out what the problem was.\n\n1145\n00:51:44,030 --> 00:51:46,670\nWe can come back and\nrun this assessment again and\n\n1146\n00:51:46,670 --> 00:51:47,760\nsee if those numbers have changed.\n\n1147\n00:51:47,760 --> 00:51:50,830\n>> Yeah, and\nthen the real power is right here.\n\n1148\n00:51:50,830 --> 00:51:51,860\nCapacity planning.\n\n1149\n00:51:51,860 --> 00:51:52,600\nRight?\n>> Mm-hm.\n\n1150\n00:51:52,600 --> 00:51:55,040\n>> So looking at my current environment,\n\n1151\n00:51:55,040 --> 00:51:58,420\nwhat kind of capacity am I gonna\nneed in this new environment?\n\n1152\n00:51:58,420 --> 00:52:01,300\nWell, it doesn't work unless you\ncollect the performance data.\n\n1153\n00:52:01,300 --> 00:52:04,180\nAnd you'll see it's kind of grayed\nout here because I didn't collect it.\n\n1154\n00:52:04,180 --> 00:52:06,130\nThat's the part that\ntakes the longest time.\n\n1155\n00:52:06,130 --> 00:52:08,200\n>> Right.\n>> It wants to watch your systems for\n\n1156\n00:52:08,200 --> 00:52:10,940\na period of time to gauge\ntheir performance, and\n\n1157\n00:52:10,940 --> 00:52:13,500\na minimum effective time is an hour.\n\n1158\n00:52:13,500 --> 00:52:17,330\nSo if I wanted to start this up and\nwait an hour I could do that, but back\n\n1159\n00:52:17,330 --> 00:52:20,890\nhere on the overview page you'll see where\nyou can download some sample reports.\n\n1160\n00:52:20,890 --> 00:52:22,240\nThere's a link here.\n\n1161\n00:52:22,240 --> 00:52:25,150\nAnd that's what I've done, is I've\npulled up some of the sample reports.\n\n1162\n00:52:25,150 --> 00:52:27,900\nAnd-\n>> Keep in mind too that's an hour during\n\n1163\n00:52:27,900 --> 00:52:29,040\nproduction, right?\n\n1164\n00:52:29,040 --> 00:52:29,970\n>> Yes, yes.\n\n1165\n00:52:29,970 --> 00:52:32,844\n>> One o'clock in the morning when\nyou're trying to run those reports,\n\n1166\n00:52:32,844 --> 00:52:34,756\nyou're not gonna get\nvery accurate results.\n\n1167\n00:52:34,756 --> 00:52:37,834\n>> And, you know, I've run this\nn production environments, and\n\n1168\n00:52:37,834 --> 00:52:39,436\nI usually don't just do an hour.\n\n1169\n00:52:39,436 --> 00:52:40,580\nI like to do 24 hours.\n\n1170\n00:52:40,580 --> 00:52:43,205\n>> Mm-hm.\nCuz even an hour might be not quite enough\n\n1171\n00:52:43,205 --> 00:52:45,285\nto get a typical workload on that machine.\n\n1172\n00:52:45,285 --> 00:52:45,835\n>> Yeah.\n\n1173\n00:52:45,835 --> 00:52:47,855\nPeople take lunch breaks\nat different times,\n\n1174\n00:52:47,855 --> 00:52:49,915\npeople get to work at different times.\n\n1175\n00:52:49,915 --> 00:52:52,845\nI find that your peak time,\nmost companies have two peak times.\n\n1176\n00:52:52,845 --> 00:52:57,610\nAnd they're normally around 10 AM and\naround 3 PM, is usually when you get it.\n\n1177\n00:52:57,610 --> 00:53:00,650\nAnd I always make the joke,\nthat if people show up to work and\n\n1178\n00:53:00,650 --> 00:53:01,990\nthey've got all sorts of\nother that they need to get.\n\n1179\n00:53:01,990 --> 00:53:02,760\nThey got to get coffee.\n\n1180\n00:53:02,760 --> 00:53:05,150\nThey've got to talk to people,\nthey've got standup meetings.\n\n1181\n00:53:05,150 --> 00:53:06,660\n>> You've got to talk about\nthat episode from last night.\n\n1182\n00:53:06,660 --> 00:53:07,350\n>> That's right.\n>> Yeah.\n\n1183\n00:53:07,350 --> 00:53:10,330\n>> People don't really get to work until\nthey've been at the office a good hour.\n\n1184\n00:53:10,330 --> 00:53:10,990\nRight?\n\n1185\n00:53:10,990 --> 00:53:11,610\n>> Yeah.\n\n1186\n00:53:11,610 --> 00:53:13,280\n>> And then-\n>> And then it's lunchtime.\n\n1187\n00:53:13,280 --> 00:53:15,720\n>> They log about an hour of work and\nthen it's lunchtime.\n\n1188\n00:53:15,720 --> 00:53:17,590\nThey cool down from that, and\nthey get back from lunch and\n\n1189\n00:53:17,590 --> 00:53:19,410\nthey're just not really geared up.\n\n1190\n00:53:19,410 --> 00:53:21,810\nAnd then around 3 o'clock they're\nlike man, this day is almost over.\n\n1191\n00:53:21,810 --> 00:53:23,078\nI gotta get to work.\n\n1192\n00:53:23,078 --> 00:53:23,981\n[LAUGH]\n>> Exactly.\n\n1193\n00:53:23,981 --> 00:53:24,700\n[LAUGH]\n>> So\n\n1194\n00:53:24,700 --> 00:53:27,890\nyou don't get that when you just\nmonitor for one hour, right?\n\n1195\n00:53:27,890 --> 00:53:29,870\nYou don't see your full capacity.\n\n1196\n00:53:29,870 --> 00:53:34,460\nAnd if your company expands more than one\ntime zone, that's another problem, right?\n\n1197\n00:53:34,460 --> 00:53:38,547\nSo we can run this scan over a long period\nof time, and here you can see in theirs,\n\n1198\n00:53:38,547 --> 00:53:42,030\nthey ran from June 20th at 5:00\nPM to June 21st at 10:00 AM.\n\n1199\n00:53:42,030 --> 00:53:44,090\nThat's a terrible time they chose.\n\n1200\n00:53:44,090 --> 00:53:45,540\n>> That is a horrible time.\n\n1201\n00:53:45,540 --> 00:53:46,550\n>> Look at that.\n\n1202\n00:53:46,550 --> 00:53:47,480\nIt's like after closing.\n\n1203\n00:53:47,480 --> 00:53:48,530\n>> Overnight.\n\n1204\n00:53:48,530 --> 00:53:50,370\n>> That was a bad window\nof time they chose.\n\n1205\n00:53:50,370 --> 00:53:52,745\nBut-\n>> It's an evening store, I don't know.\n\n1206\n00:53:52,745 --> 00:53:54,720\n[LAUGH]\n>> I wonder why they did that.\n\n1207\n00:53:54,720 --> 00:53:57,330\nBut, anyhow,\nnumber of machines specified 450.\n\n1208\n00:53:57,330 --> 00:54:01,770\nSo they scanned a huge group of machines,\nand this is\n\n1209\n00:54:01,770 --> 00:54:06,380\nthe Excel report that's dumped right out\nof MAP, so I didn't modify any of this.\n\n1210\n00:54:06,380 --> 00:54:10,710\nYou get a how it works tab that explains\nexactly how this data was calculated, so\n\n1211\n00:54:10,710 --> 00:54:14,460\nit goes into great depth to explain it.\n\n1212\n00:54:14,460 --> 00:54:15,305\nYeah, it's good.\n\n1213\n00:54:15,305 --> 00:54:17,160\n>> [LAUGH]\n>> But if you go into placement\n\n1214\n00:54:17,160 --> 00:54:20,150\nmetric summary,\nthis is the important one, okay?\n\n1215\n00:54:20,150 --> 00:54:24,570\nHere's where it starts to lay out all of\nthe different machines that were scanned,\n\n1216\n00:54:24,570 --> 00:54:26,770\nand here's their performance data, right?\n\n1217\n00:54:26,770 --> 00:54:31,570\nI can see that in that window of time,\nwhat was the average CPU utilization?\n\n1218\n00:54:31,570 --> 00:54:35,570\nWhat was the max,\nthe 95th percentile utilization?\n\n1219\n00:54:35,570 --> 00:54:38,070\nWhat is this basic need?\n\n1220\n00:54:38,070 --> 00:54:40,090\nMemory and so on.\n\n1221\n00:54:40,090 --> 00:54:43,980\nJust because I have a server doesn't\nmean it's running at full capacity.\n\n1222\n00:54:43,980 --> 00:54:47,600\nSo here I can look at the load\nthat it's on, on average and\n\n1223\n00:54:47,600 --> 00:54:50,540\ndetermine whether I need to add\nmore servers or not, right?\n\n1224\n00:54:50,540 --> 00:54:51,060\n>> Right.\n\n1225\n00:54:51,060 --> 00:54:51,920\nOr consolidate some.\n\n1226\n00:54:51,920 --> 00:54:54,730\nI mean, if we're working virtually we\nmight want to take three fiscal servers\n\n1227\n00:54:54,730 --> 00:54:58,180\nand combine them because we can see our\nresources aren't being utilized fully.\n\n1228\n00:54:58,180 --> 00:55:01,900\nOr, if we going out to Azure,\nwe're paying money for that, right?\n\n1229\n00:55:01,900 --> 00:55:05,882\nSo, I definitely don't want a full blown\nserver that is just doing DHCP, you know,\n\n1230\n00:55:05,882 --> 00:55:09,010\nor it's tickling the processor at 1% or\nsomething like that.\n\n1231\n00:55:09,010 --> 00:55:11,738\n>> Yeah, I mean look at this first\nserver the absolute maximum CPU for\n\n1232\n00:55:11,738 --> 00:55:12,650\nthat day was 10%.\n\n1233\n00:55:12,650 --> 00:55:15,040\nRight and the average was 0.24.\n\n1234\n00:55:15,040 --> 00:55:16,320\nThis server is idle.\n\n1235\n00:55:16,320 --> 00:55:18,510\nDo you even need the server?\n\n1236\n00:55:18,510 --> 00:55:20,230\nNow same thing on memory.\n\n1237\n00:55:20,230 --> 00:55:23,590\nIt only has 512 Megs of\nmemory which is impressive.\n\n1238\n00:55:23,590 --> 00:55:26,290\nAnd the average utilization is 0.19.\n\n1239\n00:55:26,290 --> 00:55:28,150\n>> Gotta be server core.\n\n1240\n00:55:28,150 --> 00:55:34,385\n>> Again 0.19 GB, so I guess that's\n190 MB, which is less than 50%.\n\n1241\n00:55:35,730 --> 00:55:38,560\nThat's stuff that we need to\nknow as we plan our upgrades and\n\n1242\n00:55:38,560 --> 00:55:39,990\nwe look at our environment.\n\n1243\n00:55:39,990 --> 00:55:44,130\nIf this is our domain controller right\nhere, is it able to withstand everything?\n\n1244\n00:55:44,130 --> 00:55:44,830\n>> Right.\n\n1245\n00:55:44,830 --> 00:55:45,330\n>> Looks like it, right?\n>> Mm-hm.\n\n1246\n00:55:45,330 --> 00:55:47,670\n>> And always remember you got your big\n\n1247\n00:55:47,670 --> 00:55:51,727\nfour, CPU, memory, disk, network.\nAnd that's what it lays out here.\n\n1248\n00:55:51,727 --> 00:55:53,689\nSo now I get my disk I/O, my input output.\n\n1249\n00:55:53,689 --> 00:55:55,523\nAnd so I can look at that.\n\n1250\n00:55:55,523 --> 00:55:57,430\nI can look at the average reads and\n\n1251\n00:55:57,430 --> 00:56:01,120\nwrites per second, and\nthen in here somewhere we get network.\n\n1252\n00:56:01,120 --> 00:56:02,720\nHere it is, network utilization.\n\n1253\n00:56:02,720 --> 00:56:05,050\nSo, look at those big four,\nand determine whether or\n\n1254\n00:56:05,050 --> 00:56:06,840\nnot that server meets your needs.\n\n1255\n00:56:06,840 --> 00:56:08,150\nYou may not need to upgrade.\n\n1256\n00:56:08,150 --> 00:56:09,280\nYou may need to upgrade.\n\n1257\n00:56:09,280 --> 00:56:11,030\nYou may need to bump that up.\n\n1258\n00:56:11,030 --> 00:56:14,150\nNow I just pulled the general\nperfmetric results here.\n\n1259\n00:56:14,150 --> 00:56:16,150\nBut remember all those\ndifferent scenarios?\n\n1260\n00:56:16,150 --> 00:56:19,570\nSo when you go, there's reports\non each of these different ones.\n\n1261\n00:56:19,570 --> 00:56:22,700\nWhen we go in and we pick something\nlike our Server Virtualization, right?\n\n1262\n00:56:22,700 --> 00:56:27,220\nIf we wanna look at server consolidation,\nwe could collect the performance data.\n\n1263\n00:56:27,220 --> 00:56:29,220\nAnd then it gives you a report, and\n\n1264\n00:56:29,220 --> 00:56:31,290\nyou'll be able to pull that\nServer Virtualization report.\n\n1265\n00:56:31,290 --> 00:56:35,110\nAnd let me pull that one up\nfrom the sample files here.\n\n1266\n00:56:35,110 --> 00:56:36,840\nServer Virtualization recommendation.\n\n1267\n00:56:38,420 --> 00:56:39,970\nAnd it'll look something like this.\n\n1268\n00:56:39,970 --> 00:56:44,360\nIt gives you your overall summary,\nyour how it works, and\n\n1269\n00:56:44,360 --> 00:56:45,930\nthen it starts to break things down.\n\n1270\n00:56:45,930 --> 00:56:49,506\nHere's my host machine details,\nmy utilization, and\n\n1271\n00:56:49,506 --> 00:56:53,125\nthen my consolidation recommendation,\nright?\n\n1272\n00:56:53,125 --> 00:56:56,485\nHere's where we're starting\nto recommend what we do.\n\n1273\n00:56:56,485 --> 00:56:57,105\nAll right?\n\n1274\n00:56:57,105 --> 00:57:01,535\nSo we've got host one,\nand then virtual machines.\n\n1275\n00:57:01,535 --> 00:57:04,485\nAnd these hosts don't exist, all right?\n\n1276\n00:57:04,485 --> 00:57:08,530\nIt's recommending that we create\na host one for virtualization.\n\n1277\n00:57:08,530 --> 00:57:12,290\nAnd that we put these VMs,\nnow these used to be physical servers,\n\n1278\n00:57:12,290 --> 00:57:16,700\nbut these physical servers specifically on\nthis host, and look at the count on there.\n\n1279\n00:57:16,700 --> 00:57:20,600\nI hear this really often where\npeople say yeah, I get four or\n\n1280\n00:57:20,600 --> 00:57:22,880\nfive virtual machines per host.\n\n1281\n00:57:22,880 --> 00:57:27,440\nWell, you should be able to get ten\nto 20 virtual machines on a host, but\n\n1282\n00:57:27,440 --> 00:57:29,580\nit all comes down to performance, right?\n\n1283\n00:57:29,580 --> 00:57:31,580\nAnd it knows the performance.\n\n1284\n00:57:31,580 --> 00:57:32,360\nIt mapped that out.\n\n1285\n00:57:32,360 --> 00:57:36,700\nIt mapped out the CPU memory disk,\nand network for each of those VMs.\n\n1286\n00:57:36,700 --> 00:57:39,580\nAnd it's figured out which ones\nwill play nicely with each other.\n\n1287\n00:57:39,580 --> 00:57:41,690\nAnd look how many we've\ngot on this one host here.\n\n1288\n00:57:41,690 --> 00:57:49,260\nWe've got, let's see, six through,\nwow they're going all out aren't they?\n\n1289\n00:57:49,260 --> 00:57:51,490\n>> They are.\n\n1290\n00:57:51,490 --> 00:57:52,280\n>> Holy moly.\n\n1291\n00:57:52,280 --> 00:57:56,520\nThey're really maximizing this one so\nhere's two.\n\n1292\n00:57:56,520 --> 00:57:59,950\nSix through 56, they've got 50 VMson this\none host, that's really impressive, oh.\n\n1293\n00:57:59,950 --> 00:58:01,110\nI didn't notice this.\n\n1294\n00:58:01,110 --> 00:58:06,250\nA lot of them are Windows Vista, Windows\nXP, right, so there not full server,\n\n1295\n00:58:06,250 --> 00:58:11,050\ncarrying a server load, but\nWindows 7 Ultimate and Enterprise.\n\n1296\n00:58:11,050 --> 00:58:15,090\nThey must be doing VDI, right, and\na lot of these machines look to have been\n\n1297\n00:58:15,090 --> 00:58:19,880\nsitting fairly idle,\n0.04% CPU utilizational average.\n\n1298\n00:58:19,880 --> 00:58:23,770\nSo then, this is not indicative of\na true production environment here, but\n\n1299\n00:58:23,770 --> 00:58:25,350\nyou'll get an idea.\n\n1300\n00:58:25,350 --> 00:58:30,320\nAnd you shouldn't act on this like\nit's chiseled in stone, right?\n\n1301\n00:58:30,320 --> 00:58:32,910\nMake sure you understand that\nyour network and your needs, and\n\n1302\n00:58:32,910 --> 00:58:34,370\nuse this as a starting point.\n\n1303\n00:58:34,370 --> 00:58:38,690\nThen say well, Microsoft says I can get\naway with, how many hosts, let's see.\n\n1304\n00:58:38,690 --> 00:58:42,700\nOne, two, three, four,\nfive, six, seven, eight.\n\n1305\n00:58:44,340 --> 00:58:45,840\nYou know there 18,\n\n1306\n00:58:45,840 --> 00:58:50,230\nso Microsoft says I can get away with\n18 hyper view servers all right.\n\n1307\n00:58:50,230 --> 00:58:52,830\n>> It shows you I think,\nthat first row for\n\n1308\n00:58:52,830 --> 00:58:56,620\neach host, gives you what your specs\nare going to be for that host.\n\n1309\n00:58:56,620 --> 00:58:57,450\n>> Oh yeah the aggregate.\n\n1310\n00:58:57,450 --> 00:58:58,910\n>> Theres like an aggregate line for\neach one.\n\n1311\n00:58:58,910 --> 00:59:03,500\n>> Right there yeah,\nso host 13, you know it\n\n1312\n00:59:03,500 --> 00:59:07,870\nhas information on that host and what its\ngoing to need, as far as memory and so on.\n\n1313\n00:59:07,870 --> 00:59:11,950\nBut basically it gives\nyou a starting point.\n\n1314\n00:59:11,950 --> 00:59:17,380\nSo I've got over 400 machines here, which\nare probably physical machines right now.\n\n1315\n00:59:17,380 --> 00:59:20,230\nAnd it's saying that I can get\nit down to 18 physical hosts.\n\n1316\n00:59:20,230 --> 00:59:21,710\nThat's a pretty big\ndifference right there.\n\n1317\n00:59:21,710 --> 00:59:22,680\n>> It's huge.\n\n1318\n00:59:22,680 --> 00:59:24,050\nBut it might not be perfect, right?\n\n1319\n00:59:24,050 --> 00:59:27,110\nYou might have changing needs over time,\nand this might be pretty maxed out.\n\n1320\n00:59:28,210 --> 00:59:28,970\nUsually it isn't, right?\n\n1321\n00:59:28,970 --> 00:59:32,060\nSo they're saying here, like host 18,\nmy aggregate for host 18,\n\n1322\n00:59:32,060 --> 00:59:36,500\nit should be averaging 7% CPU utilization,\nright.\n\n1323\n00:59:36,500 --> 00:59:40,150\nIt should be averaging 35 gigs\nof memory utilization, so\n\n1324\n00:59:40,150 --> 00:59:44,160\nif it's got 64 gigs of memory,\nI've got plenty of room to grow.\n\n1325\n00:59:44,160 --> 00:59:45,090\n>> Lots of head room.\n\n1326\n00:59:45,090 --> 00:59:48,830\nAveraging 189 disc I/O\noperations per second.\n\n1327\n00:59:48,830 --> 00:59:53,090\nYou know,\ndisc space utilization at 600 gigs and so\n\n1328\n00:59:53,090 --> 00:59:56,580\non, so each of these give us\nthat kind of recommendation.\n\n1329\n00:59:56,580 --> 00:59:57,080\n>> Right.\n\n1330\n00:59:58,270 --> 01:00:00,480\n>> All right.\nAnd, you will see all of the other ones.\n\n1331\n01:00:00,480 --> 01:00:02,900\nWe've got utilization\nbefore virtualization,\n\n1332\n01:00:02,900 --> 01:00:05,740\nlogical disc utilization,\nit breaks it all done for us.\n\n1333\n01:00:05,740 --> 01:00:07,600\nThis is valuable information.\n\n1334\n01:00:07,600 --> 01:00:11,380\nIt helps us to design that final result.\n\n1335\n01:00:11,380 --> 01:00:15,060\nIf you have a virtual machine that's very\ndisc intensive, and you have another\n\n1336\n01:00:15,060 --> 01:00:19,040\nvirtual machine that's very CPU intensive,\nthey'll play nicely together.\n\n1337\n01:00:19,040 --> 01:00:22,590\nBut, if you have two VMs that are both\nCPU intensive, they'll butt heads.\n\n1338\n01:00:22,590 --> 01:00:23,390\n>> Maybe not so much.\n\n1339\n01:00:23,390 --> 01:00:25,840\n>> So, your placement really\ncomes into hand here.\n\n1340\n01:00:25,840 --> 01:00:29,020\nAnd the assessment plan in your\ntool kit will do it, for free.\n\n1341\n01:00:29,020 --> 01:00:30,560\nAnother utility that will do it?\n\n1342\n01:00:30,560 --> 01:00:33,180\nThe Microsoft System Center\nVirtual Machine Manager.\n\n1343\n01:00:33,180 --> 01:00:35,481\nIt'll do the same thing, but\nit won't do it for free.\n\n1344\n01:00:35,481 --> 01:00:39,050\n>> [LAUGH] So\nwhich resource is better for you?\n\n1345\n01:00:39,050 --> 01:00:41,493\nMAP is only good for planning.\n\n1346\n01:00:41,493 --> 01:00:44,595\nBut SCVMM, you can run that thing for\nthe life of the product,\n\n1347\n01:00:44,595 --> 01:00:46,515\nand it will manage and\nmaintain your systems.\n\n1348\n01:00:46,515 --> 01:00:47,185\nVery, very useful.\n\n1349\n01:00:47,185 --> 01:00:48,345\nSo different goals for that.\n\n1350\n01:00:50,065 --> 01:00:55,985\nAll right, the other thing that's\nmentioned in here is cloud, all right.\n\n1351\n01:00:55,985 --> 01:01:00,055\nYou may have your own servers, or you\nmight want to rent somebody else's, right.\n\n1352\n01:01:00,055 --> 01:01:03,355\nNow this brings a whole new level\nof complexity into environments.\n\n1353\n01:01:04,580 --> 01:01:05,970\nIf you watch the commercials,\n\n1354\n01:01:05,970 --> 01:01:10,090\nthey all make it sound like,\nall of your data is in the cloud.\n\n1355\n01:01:10,090 --> 01:01:14,890\nAll right, and, while that would be nice,\nit never happens that way, right?\n\n1356\n01:01:14,890 --> 01:01:17,180\nIt's more of a slow migration,\nyou start moving,\n\n1357\n01:01:17,180 --> 01:01:18,950\nyou move one system up to the cloud.\n\n1358\n01:01:18,950 --> 01:01:20,700\nThen later,\nyou move another system up to the cloud.\n\n1359\n01:01:20,700 --> 01:01:22,840\nThen over time, you move more,\nand more, and more.\n\n1360\n01:01:22,840 --> 01:01:24,250\nWhen you run the map, and\n\n1361\n01:01:24,250 --> 01:01:27,690\nit does its analysis to find\nout your Azure VM readiness.\n\n1362\n01:01:27,690 --> 01:01:28,530\nIt's saying,\n\n1363\n01:01:28,530 --> 01:01:32,840\nif you wanted to move everything right\nnow, here's what your status is.\n\n1364\n01:01:32,840 --> 01:01:33,350\nAll right?\n\n1365\n01:01:33,350 --> 01:01:36,470\nBut then you pick and choose, so\ninside of there you start to determine,\n\n1366\n01:01:36,470 --> 01:01:40,350\nwhich ones are actually going to go and\nstart to get moved across.\n\n1367\n01:01:40,350 --> 01:01:41,940\nI'm generating one of my reports here.\n\n1368\n01:01:44,140 --> 01:01:45,020\nAnd we'll pull that up.\n\n1369\n01:01:45,020 --> 01:01:47,410\nSo here's my Windows Azure VM readiness.\n\n1370\n01:01:47,410 --> 01:01:50,640\nIt's got the three VMs that it cataloged,\nand here they are.\n\n1371\n01:01:50,640 --> 01:01:53,100\nAnd it's just showing kind\nof what they are right now.\n\n1372\n01:01:53,100 --> 01:01:55,810\nI've got one virtual, and\ntwo physical machines that it scanned.\n\n1373\n01:01:55,810 --> 01:01:58,040\nOh, it found my SQL servers\nfrom the show the other day.\n\n1374\n01:01:58,040 --> 01:01:58,568\n>> Oh, nice.\n\n1375\n01:01:58,568 --> 01:01:59,973\n>> That's cool.\n\n1376\n01:01:59,973 --> 01:02:02,700\n[LAUGH] So it found these machines here.\n\n1377\n01:02:02,700 --> 01:02:07,010\nOne's already virtual, and the other\ntwo are physical, so it found those.\n\n1378\n01:02:07,010 --> 01:02:09,280\nAnd it's basically giving\nme information like,\n\n1379\n01:02:09,280 --> 01:02:11,700\nif the running sequel is sequel clustered.\n\n1380\n01:02:11,700 --> 01:02:12,200\nRight?\n\n1381\n01:02:12,200 --> 01:02:14,680\nAnd what's the current operating system,\nand then whether or\n\n1382\n01:02:14,680 --> 01:02:16,440\nnot they're ready to go.\n\n1383\n01:02:16,440 --> 01:02:20,720\nIn this case,\noperating system supported as an Azure VM?\n\n1384\n01:02:20,720 --> 01:02:21,480\nYes.\n\n1385\n01:02:21,480 --> 01:02:22,110\nAll right.\n\n1386\n01:02:22,110 --> 01:02:23,600\nI didn't do the performance metric, so\n\n1387\n01:02:23,600 --> 01:02:26,130\nthat's why I don't have my\nperformance tabs down here.\n\n1388\n01:02:26,130 --> 01:02:27,600\nBut I could look at\nthose performance tabs.\n\n1389\n01:02:27,600 --> 01:02:31,860\nNow I'd get an idea of what type of\nresources in Azure I'm going to need, and\n\n1390\n01:02:31,860 --> 01:02:34,770\nthat's what's going to allow me to\nfigure out what my bill is going to be.\n\n1391\n01:02:34,770 --> 01:02:35,310\nRight?\n>> Right,\n\n1392\n01:02:35,310 --> 01:02:36,910\nstarting to get that budget ready so\nyou can\n\n1393\n01:02:36,910 --> 01:02:38,152\n>> Present that to the higher ups.\n\n1394\n01:02:38,152 --> 01:02:41,990\nYeah because you're charged by network\nband width, that 's a big part of it.\n\n1395\n01:02:41,990 --> 01:02:44,890\nYou're also charged by memory assignment,\nthat's the number one resource.\n\n1396\n01:02:44,890 --> 01:02:48,880\nYou're technically charged for CPU too,\nbut memory is always the one you gear on.\n\n1397\n01:02:48,880 --> 01:02:52,250\nBut you can be charged by other\nthings too, like Disk i/o and\n\n1398\n01:02:52,250 --> 01:02:53,550\nsome vendors that are out there.\n\n1399\n01:02:53,550 --> 01:02:55,540\nAnd so, this'll give you\nthat information you need,\n\n1400\n01:02:55,540 --> 01:02:58,075\nto figure out exactly the scale\nthat you're gonna need.\n\n1401\n01:02:58,075 --> 01:03:00,320\n>> Mm-hm.\n>> So on the exam,\n\n1402\n01:03:00,320 --> 01:03:02,620\nthey may give you a report like this.\n\n1403\n01:03:02,620 --> 01:03:04,340\nAnd they may ask you,\n\n1404\n01:03:04,340 --> 01:03:07,160\nbased on this report,\nhow many physical hosts do you need.\n\n1405\n01:03:07,160 --> 01:03:08,140\nWell, it's right there.\n\n1406\n01:03:08,140 --> 01:03:09,530\nYou just scroll through the report and\nfind it.\n\n1407\n01:03:09,530 --> 01:03:11,360\nThat's the information, and you've got it.\n\n1408\n01:03:11,360 --> 01:03:14,310\nBut In real life land you might need\nto build on this a little more, because\n\n1409\n01:03:14,310 --> 01:03:17,720\nyou always know a little more about your\nenvironment than what Microsoft does.\n\n1410\n01:03:17,720 --> 01:03:19,930\nThey've probably never even heard of you.\n\n1411\n01:03:19,930 --> 01:03:21,600\nRight?\nI mean, if you were a really big company,\n\n1412\n01:03:21,600 --> 01:03:22,420\nthey've heard of you, sure.\n\n1413\n01:03:22,420 --> 01:03:27,495\nBut if you're IT Pro TV, I don't know\nif Microsoft knows Knows about us.\n\n1414\n01:03:27,495 --> 01:03:28,335\nProbably.\n\n1415\n01:03:28,335 --> 01:03:30,525\n>> Not yet.\n[LAUGH] But they will.\n\n1416\n01:03:30,525 --> 01:03:32,920\n>> One day, that'll be the day.\n\n1417\n01:03:32,920 --> 01:03:36,035\n[LAUGH]\n>> Microsoft comes in and says what?\n\n1418\n01:03:36,035 --> 01:03:37,693\n>> You can't do that.\n\n1419\n01:03:37,693 --> 01:03:41,682\n[LAUGH] So really good\ninformation to have, all right.\n\n1420\n01:03:41,682 --> 01:03:46,245\nThere is another element to be aware of,\nwhen we deal with Windows Azure,\n\n1421\n01:03:46,245 --> 01:03:51,028\nremember I brought up this diagram and\nI said boy, if we start to have multiple\n\n1422\n01:03:51,028 --> 01:03:55,910\ngeographic locations, things get a little\nmore complex with WDS, and so on.\n\n1423\n01:03:55,910 --> 01:03:57,758\n>> Right.\n>> If I decide to make the jump into\n\n1424\n01:03:57,758 --> 01:03:59,486\nWindows Azure, how do I deploy?\n\n1425\n01:03:59,486 --> 01:04:00,153\nDeploy my servers there.\n\n1426\n01:04:00,153 --> 01:04:03,967\nWell, it's basically multiple\ngeographic locations.\n\n1427\n01:04:03,967 --> 01:04:07,910\nIt's just one of those locations\nhappens to be controlled by Microsoft.\n\n1428\n01:04:07,910 --> 01:04:12,560\nSo when we go back to our original\nlist of ways to deploy, right?\n\n1429\n01:04:12,560 --> 01:04:14,920\nYou can’t really do\na DVD install any more.\n\n1430\n01:04:14,920 --> 01:04:16,338\nCuz Microsoft won't let\nyou in that server room.\n\n1431\n01:04:16,338 --> 01:04:18,690\n[LAUGH]\n>> No, probably not.\n\n1432\n01:04:18,690 --> 01:04:20,840\n>> But you can do an ISO install, right?\n\n1433\n01:04:20,840 --> 01:04:23,090\nWell actually no, I don’t think they’ll\nlet you do that either do they?\n\n1434\n01:04:23,090 --> 01:04:24,590\nOh they do.\n>> I guess it depends on what level\n\n1435\n01:04:24,590 --> 01:04:25,400\nyou go with.\n\n1436\n01:04:25,400 --> 01:04:30,930\n>> Yeah, but what you’re really\ndoing is deploying their images or\n\n1437\n01:04:30,930 --> 01:04:34,140\nyou have to create your own image and\nsubmit it up there.\n\n1438\n01:04:34,140 --> 01:04:38,690\nBut another thing they don’t talk\nabout very often is you can do WDS.\n\n1439\n01:04:38,690 --> 01:04:43,860\nYou can actually put a WDS transport\nserver in your Azure cloud and\n\n1440\n01:04:43,860 --> 01:04:48,530\nnow you can boot up VMs in the Azure\ncloud and they'll find your WDS box.\n\n1441\n01:04:48,530 --> 01:04:52,060\nOr you can deploy\na full-blown WDS up there and\n\n1442\n01:04:52,060 --> 01:04:54,770\nstore your own images for\ndeploying to the machines.\n\n1443\n01:04:54,770 --> 01:04:56,400\nEither way works.\n\n1444\n01:04:56,400 --> 01:05:00,710\nNow, how do you do that if it's\na completely separate environment?\n\n1445\n01:05:00,710 --> 01:05:03,890\nWell, the feature about Windows Azure\nthat they don't talk about a lot\n\n1446\n01:05:03,890 --> 01:05:08,370\nthat's very important in\nthat environment is VPN.\n\n1447\n01:05:08,370 --> 01:05:12,810\nWhen you build an Azure Cloud,\none of the options you have is to build\n\n1448\n01:05:12,810 --> 01:05:18,200\na VPN between your Environment and\nthe Windows Azure cloud.\n\n1449\n01:05:18,200 --> 01:05:22,050\nAnd you want that because if you've\nalready got an active directory\n\n1450\n01:05:22,050 --> 01:05:26,400\nenvironment here, do you want a whole\nsecond domain out there in the cloud?\n\n1451\n01:05:26,400 --> 01:05:28,270\nNo, you want it to be\na part of your environment.\n\n1452\n01:05:28,270 --> 01:05:30,230\nAt a minimum you want it\nto be in your forest.\n\n1453\n01:05:30,230 --> 01:05:31,940\nRight?\nYou don't want to do some kind of external\n\n1454\n01:05:31,940 --> 01:05:34,320\ntrust when it's your own equipment, right?\n\n1455\n01:05:34,320 --> 01:05:36,890\nAnd just because it's in Azure\ncloud doesn't mean that it needs\n\n1456\n01:05:36,890 --> 01:05:38,200\nto be available to the whole world.\n\n1457\n01:05:38,200 --> 01:05:40,330\nYou don't have to put\npublic servers up there.\n\n1458\n01:05:40,330 --> 01:05:44,040\nYou can create a private\nnetwork in the Azure cloud,\n\n1459\n01:05:44,040 --> 01:05:46,270\nwith a VPN back to your environment.\n\n1460\n01:05:46,270 --> 01:05:49,570\nAnd now those servers can\ntalk to your local systems.\n\n1461\n01:05:49,570 --> 01:05:51,612\nBut you get all of the advantages\nof being in the cloud.\n\n1462\n01:05:51,612 --> 01:05:53,810\n>> It's just like another site\non your network, except now,\n\n1463\n01:05:53,810 --> 01:05:56,950\nsomebody else is taking care of all\nthe backend work on those servers.\n\n1464\n01:05:56,950 --> 01:05:59,680\n>> That's really the big selling point for\n\n1465\n01:05:59,680 --> 01:06:05,030\nthis is having that tunnel in\nplace that protects that data.\n\n1466\n01:06:05,030 --> 01:06:07,590\nYou communicate to it,\nit does require a little bit of set up.\n\n1467\n01:06:07,590 --> 01:06:10,470\nYou've got to have a compatible firewall.\n\n1468\n01:06:10,470 --> 01:06:13,870\nAnd they'll actually give you the firewall\nconfigs to throw on your system,\n\n1469\n01:06:13,870 --> 01:06:15,210\nwhich is kinda nice.\n\n1470\n01:06:15,210 --> 01:06:18,070\nBut basically, you've gotta have\nthat kind of system in place.\n\n1471\n01:06:18,070 --> 01:06:19,970\nAnd then once it's there\nyou can communicate.\n\n1472\n01:06:19,970 --> 01:06:25,930\nNow it goes back to the problem of,\nif I put a transport server up in Azure.\n\n1473\n01:06:25,930 --> 01:06:27,270\nThen my VMs up there boot up.\n\n1474\n01:06:27,270 --> 01:06:30,330\nThey can find my WDS server\nback down here in my site.\n\n1475\n01:06:30,330 --> 01:06:34,240\nBut now they're gonna download their\nimage from the WDS in my site and\n\n1476\n01:06:34,240 --> 01:06:35,630\nthat may not be what I want.\n\n1477\n01:06:35,630 --> 01:06:36,450\nRight?\n>> Right.\n\n1478\n01:06:36,450 --> 01:06:41,890\n>> So in that case, you'll probably\nwanna do a full-blown WDS up there\n\n1479\n01:06:41,890 --> 01:06:46,950\nin order to get that information in place\nand working the way that you want it to.\n\n1480\n01:06:46,950 --> 01:06:49,971\nSo you'll probably have to mess\naround with it a little bit to\n\n1481\n01:06:49,971 --> 01:06:51,638\nget the configuration precise.\n\n1482\n01:06:51,638 --> 01:06:52,583\nBut once it's done,\n\n1483\n01:06:52,583 --> 01:06:55,847\nI'm probably spending more time on\nthis stupid diagram than I intend to.\n\n1484\n01:06:55,847 --> 01:06:56,638\n>> But it's looking really good.\n\n1485\n01:06:56,638 --> 01:06:58,263\nI'll say it's lined up nicely.\n\n1486\n01:06:58,263 --> 01:07:00,834\n>> So, anyhow, the nice part about it is,\n\n1487\n01:07:00,834 --> 01:07:05,800\nat the end of the day is you'll have\nthis tunnel across your networks.\n\n1488\n01:07:05,800 --> 01:07:08,160\nIf you have a server up there\nthat you're creating and\n\n1489\n01:07:08,160 --> 01:07:11,970\nyou do a full blown WDS up here, right.\n\n1490\n01:07:11,970 --> 01:07:17,750\nSo if I do a full blown WDS,\nthen that machine can boot up and it can\n\n1491\n01:07:17,750 --> 01:07:22,740\njust reach right over, get its image, get\nall the information it needs and be happy.\n\n1492\n01:07:24,340 --> 01:07:28,590\nOr we can do a transport server in\nwhich case it can find that but\n\n1493\n01:07:28,590 --> 01:07:33,750\nthen once it's found it,\nit will get directed across the tunnel and\n\n1494\n01:07:33,750 --> 01:07:36,140\ncome and hit your WDS down here.\n\n1495\n01:07:36,140 --> 01:07:38,990\nAnd that works too if\nyou've got small images.\n\n1496\n01:07:38,990 --> 01:07:41,020\nIf you've got something like that,\nthat works out fine.\n\n1497\n01:07:41,020 --> 01:07:44,020\nBut more commonly we wanna hit\nthat server up in in Azure.\n\n1498\n01:07:44,020 --> 01:07:46,750\n>> Especially if they're charging us\nby bandwidth or anything like that.\n\n1499\n01:07:46,750 --> 01:07:48,600\nThat's a lot of data going back and forth.\n\n1500\n01:07:49,680 --> 01:07:51,790\n>> Now,\nwhere this gets a little more complex.\n\n1501\n01:07:51,790 --> 01:07:54,730\nSo so far it's really not any different\nthan another site in our active directory\n\n1502\n01:07:54,730 --> 01:07:56,020\nexcept for the VPN tunnel piece.\n\n1503\n01:07:56,020 --> 01:07:57,900\nRight?\nYou got to build up that VPN tunnel and\n\n1504\n01:07:57,900 --> 01:07:58,809\nthen you're ready to rock.\n\n1505\n01:07:59,940 --> 01:08:05,440\nIf you want to go a step further,\ndeploying apps inside of Azure.\n\n1506\n01:08:05,440 --> 01:08:08,250\nIf we're deploying a server,\nit's no big deal.\n\n1507\n01:08:08,250 --> 01:08:09,290\nRight?\nWe just bring up a server.\n\n1508\n01:08:09,290 --> 01:08:11,270\nIt's just like our local environment.\n\n1509\n01:08:11,270 --> 01:08:15,120\nBut if this is a public service,\nsomething that's facing the internet,\n\n1510\n01:08:15,120 --> 01:08:18,920\nthere's normally one, normally more than\none server involved in that communication.\n\n1511\n01:08:18,920 --> 01:08:20,930\nThink of like when you\ngo to Amazon's website.\n\n1512\n01:08:20,930 --> 01:08:21,460\n>> Right.\n\n1513\n01:08:21,460 --> 01:08:22,730\n>> Sure, they've got web servers.\n\n1514\n01:08:22,730 --> 01:08:25,110\nRight?\nTons of web servers.\n\n1515\n01:08:25,110 --> 01:08:27,930\nBut then on the back end,\nthey've got tons of database servers.\n\n1516\n01:08:27,930 --> 01:08:31,290\nAnd the web server doesn't really do\nmuch without the database behind it.\n\n1517\n01:08:31,290 --> 01:08:32,980\nRight?\nIf I go to Amazon's homepage,\n\n1518\n01:08:32,980 --> 01:08:33,790\nsure I'll see the page.\n\n1519\n01:08:33,790 --> 01:08:35,330\nBut if I type in to search for a product,\n\n1520\n01:08:35,330 --> 01:08:37,210\nit's gotta connect to\na database to find it.\n\n1521\n01:08:37,210 --> 01:08:38,320\n>> The web server doesn't know it.\n\n1522\n01:08:38,320 --> 01:08:41,910\nSo one is not any good without the other,\nso\n\n1523\n01:08:41,910 --> 01:08:46,050\nwhen I do that type of deployment I really\nneed to have my servers paired together.\n\n1524\n01:08:46,050 --> 01:08:50,040\nAll the solutions we've talked about up\nuntil now don't pay attention to that.\n\n1525\n01:08:50,040 --> 01:08:52,950\nThey don't realize the connection\nbetween the systems.\n\n1526\n01:08:52,950 --> 01:08:57,430\nWDS doesn't, SCCM doesn't by default,\nyou can modify it too.\n\n1527\n01:08:57,430 --> 01:08:59,770\nBut all of those other products,\nthey just don't recognize that,\n\n1528\n01:08:59,770 --> 01:09:01,660\nthey treat the servers individually.\n\n1529\n01:09:01,660 --> 01:09:04,500\nBut when we're deploying to Azure,\nwe might not want that.\n\n1530\n01:09:04,500 --> 01:09:07,150\nWe might want our machines\nto be interrelated.\n\n1531\n01:09:07,150 --> 01:09:11,960\nI might have my production website up\nhere, right, and it's web servers and\n\n1532\n01:09:11,960 --> 01:09:13,940\ndatabase servers working together.\n\n1533\n01:09:13,940 --> 01:09:19,260\nAnd I might have a staging site or\na development site down here in my local\n\n1534\n01:09:19,260 --> 01:09:23,109\nbusiness and I want to be able to\nquickly clone and deploy that.\n\n1535\n01:09:24,190 --> 01:09:28,010\nWell, there's a neat little\nsystem we can use to do that and\n\n1536\n01:09:28,010 --> 01:09:31,010\nit's called the Microsoft,\nI think I've got the webpage.\n\n1537\n01:09:31,010 --> 01:09:32,970\nIf I can find my web browser.\n\n1538\n01:09:32,970 --> 01:09:36,130\nNot there, not there.\n\n1539\n01:09:36,130 --> 01:09:37,610\nCome on.\nThere it is.\n\n1540\n01:09:37,610 --> 01:09:40,360\nThe Microsoft system\ncenter app controller.\n\n1541\n01:09:40,360 --> 01:09:40,920\nAll right.\n\n1542\n01:09:40,920 --> 01:09:44,830\nThe app controller is\nwhat can extend the SCCM\n\n1543\n01:09:44,830 --> 01:09:48,070\nto now recognize when\nsystems are interrelated.\n\n1544\n01:09:48,070 --> 01:09:50,830\nNow, we manage things\nbased on an application.\n\n1545\n01:09:50,830 --> 01:09:54,230\nAnd, that application might be\nmade up of more than one VM.\n\n1546\n01:09:54,230 --> 01:09:56,810\nYou might have one or more web servers and\n\n1547\n01:09:56,810 --> 01:10:00,420\none or more data base servers\nthat are tied together.\n\n1548\n01:10:00,420 --> 01:10:04,680\nAnd the busier that system gets,\nmaybe you start spawning more web servers\n\n1549\n01:10:04,680 --> 01:10:08,350\nto handle that load, or you start spawning\nmore database servers to handle that load.\n\n1550\n01:10:08,350 --> 01:10:10,670\nThe app controller understands that.\n\n1551\n01:10:10,670 --> 01:10:13,670\nIt understand the relationship\nbetween your VMs, all right?\n\n1552\n01:10:13,670 --> 01:10:16,040\nAnd it makes it where\nwhen you do a deployment,\n\n1553\n01:10:16,040 --> 01:10:19,820\nyou can do a deployment in your\nlocal environment or in Azure and\n\n1554\n01:10:19,820 --> 01:10:24,520\nit'll deploy all of the VMs necessary\nto make that application work.\n\n1555\n01:10:24,520 --> 01:10:29,530\nSo if I wanted to deploy\nMicrosoft Exchange.\n\n1556\n01:10:29,530 --> 01:10:30,110\nRight.\n\n1557\n01:10:30,110 --> 01:10:33,240\nI might have my production exchange\nsystem and I might have a development or\n\n1558\n01:10:33,240 --> 01:10:34,590\ntest environment.\n\n1559\n01:10:34,590 --> 01:10:37,210\nWell Microsoft Exchange you've got\nyour exchange front end server,\n\n1560\n01:10:37,210 --> 01:10:38,690\nyou've got your client access server,\n\n1561\n01:10:38,690 --> 01:10:43,210\nyou've got your mailbox server all these\ndifferent pieces that make up exchange.\n\n1562\n01:10:43,210 --> 01:10:45,210\nYou can configure the app\ncontroller to understand that and\n\n1563\n01:10:45,210 --> 01:10:49,960\nsay, when I wanna deploy\nexchange in my Azure site,\n\n1564\n01:10:49,960 --> 01:10:53,770\nI need you to deploy all three of these\npieces and have them talk to each other.\n\n1565\n01:10:53,770 --> 01:10:55,370\nAnd so\nthe app controller will handle that.\n\n1566\n01:10:55,370 --> 01:10:57,710\nIt's really neat software.\n\n1567\n01:10:57,710 --> 01:11:01,150\nFor the exam, they don't expect\nyou to know how to configure it,\n\n1568\n01:11:01,150 --> 01:11:03,240\ncuz it's actually pretty drawn out.\n\n1569\n01:11:03,240 --> 01:11:07,960\nBut they want you to understand what it\ndoes, that it sets up those relationships.\n\n1570\n01:11:07,960 --> 01:11:10,580\nAnd that's really why I\nwanted to highlight it here,\n\n1571\n01:11:10,580 --> 01:11:13,850\ncuz that's going to be a big part if\nyour deploying out to Azure, right?\n\n1572\n01:11:13,850 --> 01:11:17,550\nNow, if you do want to get some hands on,\nthere's a TechNet V-Lab for\n\n1573\n01:11:17,550 --> 01:11:19,100\nit that's really cool.\n\n1574\n01:11:19,100 --> 01:11:22,050\nAnd, basically,\nit runs you through System Center 2012 and\n\n1575\n01:11:22,050 --> 01:11:25,880\nparticularly setting up an application\nwith the app controller.\n\n1576\n01:11:25,880 --> 01:11:29,140\nIt has you set up a little web app, and\nso you've got a couple pieces with it and\n\n1577\n01:11:29,140 --> 01:11:30,410\nit shows deploying it.\n\n1578\n01:11:30,410 --> 01:11:32,740\nSo, if you want to get some hands on with,\nyou can right there.\n\n1579\n01:11:32,740 --> 01:11:33,990\nYou'll see the whole process.\n\n1580\n01:11:33,990 --> 01:11:34,820\nIt walks you through it.\n\n1581\n01:11:34,820 --> 01:11:38,500\nI'll post the link to\nthis with the show notes.\n\n1582\n01:11:38,500 --> 01:11:40,270\nWhich, where are my show notes,\nthese days?\n\n1583\n01:11:40,270 --> 01:11:41,100\nHere.\n\n1584\n01:11:41,100 --> 01:11:43,900\nSo, I'm gonna stick that in\nhere under App Controller.\n\n1585\n01:11:43,900 --> 01:11:46,960\nOops, I'm just gonna\nscroll around like crazy.\n\n1586\n01:11:46,960 --> 01:11:52,883\nBut, I'll stick it in here just so\nwe've got it.\n\n1587\n01:11:52,883 --> 01:11:54,189\nApparently I don't know how\nto do this stuff, anymore.\n\n1588\n01:11:54,189 --> 01:11:56,325\nSo the App Controller vLab.\n\n1589\n01:11:56,325 --> 01:11:58,525\nIt's a good one to run through.\n\n1590\n01:11:58,525 --> 01:12:01,531\nI encourage you guys to do it just so,\nyou can get exposed to it, and\n\n1591\n01:12:01,531 --> 01:12:02,990\nget a chance to see it.\n\n1592\n01:12:02,990 --> 01:12:07,120\nBut at the end of the day,\nyou just need to understand the concept.\n\n1593\n01:12:07,120 --> 01:12:09,290\nBut sometimes the VMs are inter-related,\n\n1594\n01:12:09,290 --> 01:12:12,960\nall the other utilities we talked\nabout don't understand that.\n\n1595\n01:12:12,960 --> 01:12:13,790\nAll right.\n\n1596\n01:12:13,790 --> 01:12:18,990\nWell also remember, that with\nWindows Azure, it's really a IAAS, right?\n\n1597\n01:12:18,990 --> 01:12:21,890\nInfrastructure As A Service deployment.\n\n1598\n01:12:21,890 --> 01:12:25,370\nAnd that means that, you no longer\nworry about the hardware underneath it.\n\n1599\n01:12:25,370 --> 01:12:27,020\nYou still have to monitor it for\nperformance, right?\n\n1600\n01:12:27,020 --> 01:12:30,880\nBecause you might need to reserve more\nmemory or more CPU power or whatever.\n\n1601\n01:12:30,880 --> 01:12:32,420\nBut for the most part,\nyou're not dealing with that.\n\n1602\n01:12:32,420 --> 01:12:34,250\nAnd for a lot of people,\nthey don't even manage the OS.\n\n1603\n01:12:34,250 --> 01:12:37,840\nThey just say hey, give me\na Windows Server 2012 data center server.\n\n1604\n01:12:37,840 --> 01:12:38,880\n>> Right.\n>> All right?\n\n1605\n01:12:38,880 --> 01:12:41,190\nSo the installation's already done.\n\n1606\n01:12:41,190 --> 01:12:43,030\nNow, we just need to customize it.\n\n1607\n01:12:43,030 --> 01:12:44,810\nAnd WDS won't do that.\n\n1608\n01:12:44,810 --> 01:12:46,330\nAnd even unattend files won't do that,\n\n1609\n01:12:46,330 --> 01:12:48,770\nbecause you're already past\nthe unattend file part.\n\n1610\n01:12:48,770 --> 01:12:49,400\nRight?\n\n1611\n01:12:49,400 --> 01:12:53,440\nSo from there we need something like SCCM\nto be able to connect and reconfigure it.\n\n1612\n01:12:53,440 --> 01:12:55,570\nOr we have to reconfigure it by hand.\n\n1613\n01:12:55,570 --> 01:12:58,780\nThat's not ideal, if you've got\na ton of machines to deal with.\n\n1614\n01:12:58,780 --> 01:13:00,430\nSCCM becomes the best solution here.\n\n1615\n01:13:01,670 --> 01:13:02,430\nAll right?\n\n1616\n01:13:02,430 --> 01:13:05,010\nSo those are some of the scenarios\nthat we're going to have for\n\n1617\n01:13:05,010 --> 01:13:07,010\ndeployments that are out there.\n\n1618\n01:13:07,010 --> 01:13:08,680\nHopefully, you guys have\na better understanding now,\n\n1619\n01:13:08,680 --> 01:13:10,180\nof some of the different nuances and\n\n1620\n01:13:10,180 --> 01:13:13,060\nthe different things that change\nthe way we configure that.\n\n1621\n01:13:13,060 --> 01:13:15,570\nThat's really what this\ndesigning stuff comes down to.\n\n1622\n01:13:16,660 --> 01:13:18,180\n>> Right.\nKnowing all the different options and\n\n1623\n01:13:18,180 --> 01:13:19,630\nwhich ones gonna work in your scenario.\n\n1624\n01:13:19,630 --> 01:13:21,550\nWhich ones gonna work in your environment?\n\n1625\n01:13:21,550 --> 01:13:23,570\n>> Now, we've got a lot\nmore to get through, right.\n\n1626\n01:13:23,570 --> 01:13:26,450\nWe really just kind of covered this\nwhole planning and designing for\n\n1627\n01:13:26,450 --> 01:13:28,160\ndifferent installs sides.\n\n1628\n01:13:28,160 --> 01:13:30,460\nWe still have upgrades and\nmigrations to talk about.\n\n1629\n01:13:30,460 --> 01:13:34,090\nWe've got the Virtual Machine Manager\nwhich we need to see and look at.\n\n1630\n01:13:34,090 --> 01:13:37,790\nAnd we've got file storage right,\niSCSI and those guys.\n\n1631\n01:13:37,790 --> 01:13:39,170\nThe stuff that's involved with them.\n\n1632\n01:13:39,170 --> 01:13:41,250\nSo we've got a lot more in this objective.\n\n1633\n01:13:41,250 --> 01:13:43,820\nBut this is a pretty good stop for\nus to stop this one.\n\n1634\n01:13:43,820 --> 01:13:48,170\nSo all right well, hopefully,\nas far as the house side,\n\n1635\n01:13:48,170 --> 01:13:50,745\nthere wasn't anything crazy and\nnew there for you.\n\n1636\n01:13:50,745 --> 01:13:53,740\nOn the y side though,\na lot of that is new.\n\n1637\n01:13:53,740 --> 01:13:56,340\nOh, good question in the chat room there.\n\n1638\n01:13:56,340 --> 01:13:59,760\nSo does Azure include the license for\nthe OS?\n\n1639\n01:13:59,760 --> 01:14:02,083\nAnd the answer is usually.\n\n1640\n01:14:02,083 --> 01:14:03,518\n>> [LAUGH] Maybe?\n\n1641\n01:14:03,518 --> 01:14:06,610\n[LAUGH]\n>> If you just go to Azure and\n\n1642\n01:14:06,610 --> 01:14:08,730\nyou choose to spawn up a VM.\n\n1643\n01:14:08,730 --> 01:14:10,650\nYes, it'll include the license for the OS.\n\n1644\n01:14:10,650 --> 01:14:12,920\nSo, and\nit's almost always data centered edition.\n\n1645\n01:14:12,920 --> 01:14:15,210\nThey usually don't mess around\nwith any of the other ones.\n\n1646\n01:14:15,210 --> 01:14:17,100\nYou might as well get the whole thing.\n\n1647\n01:14:17,100 --> 01:14:18,510\nSo you can spin those up.\n\n1648\n01:14:18,510 --> 01:14:23,010\nAnd the cost of the OS is\nfactored into the rental fee for\n\n1649\n01:14:23,010 --> 01:14:24,425\nthe memory and CPU and stuff, right?\n\n1650\n01:14:24,425 --> 01:14:25,720\nCuz you know, you pay per hour.\n\n1651\n01:14:25,720 --> 01:14:29,080\nAnd so,\nthe host OS license is covered on that.\n\n1652\n01:14:29,080 --> 01:14:30,230\nAll right?\n\n1653\n01:14:30,230 --> 01:14:35,260\nThe reason I say maybe is, if you were\nalready a volume license partner and\n\n1654\n01:14:35,260 --> 01:14:37,440\nyou're paying for that license,\n\n1655\n01:14:37,440 --> 01:14:41,550\nwhen you go to Azure, they'll actually\ngive you a discounted rate there.\n\n1656\n01:14:41,550 --> 01:14:44,250\nYou get a discounted rate, because\nyou're already paying for the licenses.\n\n1657\n01:14:44,250 --> 01:14:45,440\n>> Right.\n>> So they don't need to charge you\n\n1658\n01:14:45,440 --> 01:14:46,320\na second time for that.\n\n1659\n01:14:46,320 --> 01:14:49,760\nBut for most people, yes, it's covered.\n\n1660\n01:14:49,760 --> 01:14:51,000\nAnd you just leave it that way.\n\n1661\n01:14:51,000 --> 01:14:54,640\nBut if you're a volume-licensed partner\nwith Microsoft or an enterprise partner,\n\n1662\n01:14:54,640 --> 01:14:57,790\nyou shouldn't just go and sign up for\na normal Azure account, all right?\n\n1663\n01:14:57,790 --> 01:15:00,890\nInstead, you should call your EA rep,\nyour Enterprise agreement rep.\n\n1664\n01:15:00,890 --> 01:15:04,200\nCall them and say hey,\nwe wanna start rolling out Azure.\n\n1665\n01:15:04,200 --> 01:15:07,400\nAnd you'll find that you have a lot of\nAzure benefits that are already rolled\n\n1666\n01:15:07,400 --> 01:15:08,610\ninto your Enterprise agreement.\n\n1667\n01:15:08,610 --> 01:15:11,260\nAnd your pricing starts\nto go down quite a bit.\n\n1668\n01:15:11,260 --> 01:15:13,790\nAnd it's all because you're\nalready paying for those licenses.\n\n1669\n01:15:15,670 --> 01:15:19,470\nBut yeah, that's a great question,\nglad you asked it.\n\n1670\n01:15:19,470 --> 01:15:20,960\nAnd that's a great example right there.\n\n1671\n01:15:20,960 --> 01:15:22,130\nI want to remind you guys,\n\n1672\n01:15:22,130 --> 01:15:26,020\nespecially when we talk about designs\nlike this, a lot of questions pop up.\n\n1673\n01:15:26,020 --> 01:15:30,250\nAnd so if you have any questions on this\nstuff, please feel free to ask us, right?\n\n1674\n01:15:30,250 --> 01:15:31,780\nIt's what we're here for.\n\n1675\n01:15:31,780 --> 01:15:34,570\nLive during the show,\nyou can go to itpro.tv/live.\n\n1676\n01:15:34,570 --> 01:15:37,450\nAnd you'll see the chat box\nright beneath the video.\n\n1677\n01:15:37,450 --> 01:15:38,620\nPost your question there.\n\n1678\n01:15:38,620 --> 01:15:39,800\nWe monitor and and answer during the show.\n\n1679\n01:15:39,800 --> 01:15:40,990\n>> We'd love to hear from you.\n\n1680\n01:15:40,990 --> 01:15:44,490\n>> If you have questions after the show,\nuse our Q and A forums.\n\n1681\n01:15:44,490 --> 01:15:47,300\nAt the top of every page,\nthere's a link that says Q and A.\n\n1682\n01:15:47,300 --> 01:15:48,640\nClick on it, right?\n\n1683\n01:15:48,640 --> 01:15:49,440\nJump right in there.\n\n1684\n01:15:49,440 --> 01:15:50,480\nIt will take you to our forums.\n\n1685\n01:15:50,480 --> 01:15:51,560\nYou can post your questions.\n\n1686\n01:15:51,560 --> 01:15:53,300\nWe monitor and answer there too, right?\n\n1687\n01:15:53,300 --> 01:15:54,850\n>> Absolutely.\n>> We wanna make sure you guys get\n\n1688\n01:15:54,850 --> 01:15:56,400\nthe answers to your questions.\n\n1689\n01:15:56,400 --> 01:15:59,680\nAnd with a topic like this\nthat's somewhat ephemeral.\n\n1690\n01:15:59,680 --> 01:16:01,800\n>> Yeah, very theory based.\n\n1691\n01:16:01,800 --> 01:16:02,850\nYou have a lot of questions.\n\n1692\n01:16:02,850 --> 01:16:03,540\n>> It's common, yep.\n\n1693\n01:16:03,540 --> 01:16:05,370\nSo definitely take advantage of that.\n\n1694\n01:16:05,370 --> 01:16:05,870\nIt's there for you.\n\n1695\n01:16:07,050 --> 01:16:08,790\nAll right, well,\nI hope you guys enjoyed the show.\n\n1696\n01:16:08,790 --> 01:16:10,970\nSigning off for ITPro TV, I'm Don Pizet.\n\n1697\n01:16:10,970 --> 01:16:12,200\n>> And I'm Mike Rodrick.\n\n1698\n01:16:12,200 --> 01:16:14,180\n>> And we will see you next time.\n\n1699\n01:16:14,180 --> 01:16:24,180\n[MUSIC]\n\n1700\n01:16:25,790 --> 01:16:30,085\n[NOISE]\n\n1701\n01:16:30,085 --> 01:16:32,140\n[MUSIC]\n\n",
          "vimeoId": "107163251"
        },
        {
          "description": "",
          "length": "5479",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/003-Server-Migration-and-VM-Services.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/003-Server-Migration-and-VM-Services-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/003-Server-Migration-and-VM-Services-sm.jpg",
          "title": "Server Migration and VM Roles",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,449 --> 00:00:37,747\nAll right, welcome everybody to\nanother exciting episode of IT Pro TV.\n\n3\n00:00:37,747 --> 00:00:40,710\nMy name is Mike Roderick, and\nI'm going to be your host today.\n\n4\n00:00:40,710 --> 00:00:46,590\nAnd we are going to be continuing on with\nwhat we started on a previous episode,\n\n5\n00:00:46,590 --> 00:00:51,910\nwhich is we're currently going through\nthe 70413 exam, and we are hitting\n\n6\n00:00:51,910 --> 00:00:56,680\nthat first major objective, which is\nplan and deploy a server infrastructure.\n\n7\n00:00:56,680 --> 00:00:59,450\nWe mentioned yesterday that it's\na good portion of the exam.\n\n8\n00:00:59,450 --> 00:01:02,620\nIt's 20 out of 25 percent of that.\n\n9\n00:01:02,620 --> 00:01:05,040\nAnd in the previous episode,\nif you haven't watched that yet\n\n10\n00:01:05,040 --> 00:01:08,270\nyou guys will get a chance to soon,\nwe went over design and\n\n11\n00:01:08,270 --> 00:01:11,350\nplan on automated server\ninstallation strategy.\n\n12\n00:01:11,350 --> 00:01:14,950\nWe talked about some of the different\ntools that we have available to\n\n13\n00:01:14,950 --> 00:01:18,915\ndo some of these migrations or\ndeployments, I should say.\n\n14\n00:01:18,915 --> 00:01:24,135\nAnd we talked about some different server\ndeployment infrastructure strategies.\n\n15\n00:01:24,135 --> 00:01:29,425\nToday, we are going to continue on and\nwe're going to be hitting the plan and\n\n16\n00:01:29,425 --> 00:01:34,900\nimplement Server upgrade and migration,\nand then later on this afternoon,\n\n17\n00:01:34,900 --> 00:01:38,120\ndepending on how our time goes,\nwe're going to get into plan and deploy\n\n18\n00:01:38,120 --> 00:01:43,170\nthe virtual machine manager services, so\na lot of fun stuff lined up for today.\n\n19\n00:01:45,040 --> 00:01:49,100\nI figure we will just dive right into it.\n\n20\n00:01:49,100 --> 00:01:52,720\nWe're going to get into\nsome role migration as\n\n21\n00:01:52,720 --> 00:01:54,720\nprimarily what we are talking about.\n\n22\n00:01:54,720 --> 00:01:57,160\nAnd when Microsoft calls out\nonto these objectives, plan and\n\n23\n00:01:57,160 --> 00:01:59,660\nimplement a server migration.\n\n24\n00:01:59,660 --> 00:02:04,550\nReally what we are looking at is migrating\nour services that are currently running on\n\n25\n00:02:04,550 --> 00:02:07,940\nan older operating system to\na newer operating system.\n\n26\n00:02:07,940 --> 00:02:13,360\nWe might have some of our infrastructure\nservices running on a 2008 R2 machine,\n\n27\n00:02:13,360 --> 00:02:17,390\nlike DNS, or, DHCP or\nsome of our file services, or\n\n28\n00:02:17,390 --> 00:02:19,690\nour domain controllers and\nthings like that.\n\n29\n00:02:19,690 --> 00:02:20,790\nAnd we're ready to upgrade.\n\n30\n00:02:20,790 --> 00:02:22,340\nWe want to bring those guys over.\n\n31\n00:02:22,340 --> 00:02:24,140\nWe want to bring in 2012 R2.\n\n32\n00:02:24,140 --> 00:02:28,010\nTake advantage of some of those new\nfeatures that we have available\n\n33\n00:02:28,010 --> 00:02:31,120\nin this new operating system.\n\n34\n00:02:31,120 --> 00:02:32,700\nSo how do we get our roles?\n\n35\n00:02:32,700 --> 00:02:36,030\nThe stuff that we've already running\non our current infrastructure\n\n36\n00:02:36,030 --> 00:02:38,100\nover to these new machines?\n\n37\n00:02:38,100 --> 00:02:42,430\nAnd we need to do it in\na way that reduces or,\n\n38\n00:02:43,670 --> 00:02:46,270\nreally, we want to try to limit\nthe amount of downtime, right?\n\n39\n00:02:46,270 --> 00:02:49,890\nWe don't want our users not being\nable to access these services.\n\n40\n00:02:49,890 --> 00:02:53,580\nIf DHCP is not available, they might\nnot be able to get an IP address, and\n\n41\n00:02:53,580 --> 00:02:55,600\nthen do their job, right?\n\n42\n00:02:55,600 --> 00:02:59,800\nIf their client connect resources, or if\nDNS is unavailable, that's going to cause\n\n43\n00:02:59,800 --> 00:03:04,490\ndowntime on my network which is\nwhat we want to try to avoid.\n\n44\n00:03:04,490 --> 00:03:06,470\nSo that's why planning is so important and\n\n45\n00:03:06,470 --> 00:03:08,250\nwe talked about that in\nthe previous episode.\n\n46\n00:03:08,250 --> 00:03:12,610\nThis particular class is really\nfocused on a lot of that planning and\n\n47\n00:03:12,610 --> 00:03:14,050\nthat strategizing.\n\n48\n00:03:14,050 --> 00:03:19,890\nWhen we get in to the MCSE track\nwe're talking about, you got your\n\n49\n00:03:19,890 --> 00:03:24,970\nMCSAs which are the ones that are going\nto be implementing your designs, right?\n\n50\n00:03:24,970 --> 00:03:29,060\nBut then your MCSEs, these are the ones\nthat actually create those designs.\n\n51\n00:03:29,060 --> 00:03:33,315\nWho gave those designs designs to the\nMCSA's that they could put them in place.\n\n52\n00:03:33,315 --> 00:03:34,105\nNot your MCSC's.\n\n53\n00:03:34,105 --> 00:03:38,705\nSo that's where these two, we are going\nto go 413 and eventually we are going\n\n54\n00:03:38,705 --> 00:03:42,185\nto get to 70-414 which continues along and\ngives you that MCSC.\n\n55\n00:03:43,655 --> 00:03:45,305\nSo, role migration.\n\n56\n00:03:45,305 --> 00:03:47,945\nYou know when we look at role migration,\nI've got some notes around here\n\n57\n00:03:47,945 --> 00:03:51,055\nsomewhere that I can pull up and\nI will make sure, like Don does,\n\n58\n00:03:51,055 --> 00:03:55,480\nI'll make sure I put these notes up there\nfor you guys to get off the website.\n\n59\n00:03:55,480 --> 00:04:00,640\nBut when we're talking about role\nmigration, again, we want to\n\n60\n00:04:00,640 --> 00:04:05,390\ntry to limit downtime, and we want to try\nto, depending on what we're trying to do,\n\n61\n00:04:05,390 --> 00:04:09,665\nusually when we're talking migration,\nwe're bringing in new hardware.\n\n62\n00:04:09,665 --> 00:04:10,885\nWe can do an upgrade.\n\n63\n00:04:10,885 --> 00:04:15,975\nYou guys know, we've had other episodes\nwhere we talk about our Windows 8 classes,\n\n64\n00:04:15,975 --> 00:04:19,695\nand 410, and\nsome of those intro server classes.\n\n65\n00:04:19,695 --> 00:04:21,445\nWe talked about upgrades, right?\n\n66\n00:04:21,445 --> 00:04:26,310\nAn upgrade is where I'm going to basically\njust swap out the operating system\n\n67\n00:04:26,310 --> 00:04:28,890\nleaving everything there in place.\n\n68\n00:04:28,890 --> 00:04:32,070\nSo, if that machine was\nalready a file server and\n\n69\n00:04:32,070 --> 00:04:34,560\nit had shared folders on it and\nthings like that,\n\n70\n00:04:34,560 --> 00:04:38,810\nyou've got your axis control list,\nall those different resources.\n\n71\n00:04:38,810 --> 00:04:43,230\nAn upgrade might be the way to go,\nbecause I don't have to worry.\n\n72\n00:04:43,230 --> 00:04:44,860\nAll that stuff should still be there.\n\n73\n00:04:44,860 --> 00:04:46,670\nAll my shares are still there.\n\n74\n00:04:46,670 --> 00:04:48,860\nAll my access control\nlists are still there.\n\n75\n00:04:48,860 --> 00:04:51,520\nI don't have to set all\nthat stuff up again.\n\n76\n00:04:51,520 --> 00:04:53,410\nBut there are some downsides to upgrades,\nright?\n\n77\n00:04:53,410 --> 00:04:56,600\nThey're typically quick, easy,\nless administrative effort.\n\n78\n00:04:56,600 --> 00:04:59,360\nBecause again,\nI don't have to reconfigure everything.\n\n79\n00:04:59,360 --> 00:05:04,340\nThe problem is when we do an upgrade\nlike that you run into a few issues\n\n80\n00:05:04,340 --> 00:05:06,350\nthat you can run into.\n\n81\n00:05:06,350 --> 00:05:10,850\nOne is any problems that that machine\nwas having are going to be there still.\n\n82\n00:05:10,850 --> 00:05:13,790\nRight, you're just going to\nbe upgrading your problems.\n\n83\n00:05:13,790 --> 00:05:15,410\nThey're not going to go away.\n\n84\n00:05:15,410 --> 00:05:18,930\nAnd as we've talked with upgrades before,\nsometimes little things get left.\n\n85\n00:05:18,930 --> 00:05:22,640\nLittle bits of the old operating\nsystem are still hanging out,\n\n86\n00:05:22,640 --> 00:05:27,915\nsome DLL didn't get overridden or\ndid get overridden and it shouldn't have.\n\n87\n00:05:27,915 --> 00:05:31,865\nAnd those can cause, for lack of\na better term, I call them gremlins.\n\n88\n00:05:31,865 --> 00:05:34,015\nLittle things that just go\nwrong on those machines.\n\n89\n00:05:34,015 --> 00:05:37,555\nAnd really hard to track down and\ntry to figure out where it came from and\n\n90\n00:05:37,555 --> 00:05:39,345\nwhat I can do about it.\n\n91\n00:05:39,345 --> 00:05:41,725\nSo that's a problem with doing an upgrade.\n\n92\n00:05:41,725 --> 00:05:46,780\nThe other thing you can run into\nis when we do an upgrade, 2012 R2.\n\n93\n00:05:46,780 --> 00:05:50,390\nHas some really cool features some\nfeatures that I apologize guys I'm going\n\n94\n00:05:50,390 --> 00:05:54,340\nto be glancing over here to the side now\nand again because I'm on this side of\n\n95\n00:05:54,340 --> 00:05:58,940\nthe podium today and our chat window\nis on that side of the room over there.\n\n96\n00:05:58,940 --> 00:06:02,480\nSo you'll see me glancing over I just want\nto make sure I don't miss any questions or\n\n97\n00:06:02,480 --> 00:06:05,920\nanything like that,\nthat you guys are throwing out there but\n\n98\n00:06:05,920 --> 00:06:10,150\n2012 R2 has some new and\nexciting features.\n\n99\n00:06:10,150 --> 00:06:12,800\nWhen we do an upgrade, it's going to\n\n100\n00:06:12,800 --> 00:06:16,260\nactually install 2012 R2 will install\nwhat we call compatibility mode.\n\n101\n00:06:16,260 --> 00:06:18,960\nIt's going to dumb itself down and\n\n102\n00:06:18,960 --> 00:06:22,830\nit's going to install basically\n2008 R2 mode if you will.\n\n103\n00:06:22,830 --> 00:06:26,050\nIn other words, it's not going to\nenable a lot of those cool new features\n\n104\n00:06:26,050 --> 00:06:30,970\nthat are only available in 2012R2 are not\ngoing to be available, right, and so\n\n105\n00:06:30,970 --> 00:06:34,550\nwe do some more steps and enable.\n\n106\n00:06:34,550 --> 00:06:37,170\nWe have to enable all of that manually,\nbasically.\n\n107\n00:06:37,170 --> 00:06:39,370\nWhereas, if we do a clean install,\n\n108\n00:06:39,370 --> 00:06:43,730\nnow we're getting 2012R2 on\na brand new piece of equipment.\n\n109\n00:06:43,730 --> 00:06:45,610\nAnd we're going to get\nall of those features and\n\n110\n00:06:45,610 --> 00:06:47,020\ncapabilities right out of the box.\n\n111\n00:06:47,020 --> 00:06:49,470\nThey're all going to be enabled already.\n\n112\n00:06:49,470 --> 00:06:53,700\nSo that's a big advantage of doing\nthe migration as well as, again,\n\n113\n00:06:53,700 --> 00:06:59,060\nnot bringing any problems along and\nstarting from a known good point.\n\n114\n00:06:59,060 --> 00:07:02,790\nThat's another thing that we talk about\nwhen we do migrations is the fact that\n\n115\n00:07:03,840 --> 00:07:07,740\nI know everything that's on this\nmachine because I'm migrating over.\n\n116\n00:07:07,740 --> 00:07:12,190\nSo I've got a brand spanking\nclean install of 2012 R2.\n\n117\n00:07:12,190 --> 00:07:14,670\nI'm going to install\njust the roles I need.\n\n118\n00:07:14,670 --> 00:07:18,360\nYou know on that old machine that I'm\ndecommissioning, there might be some stuff\n\n119\n00:07:18,360 --> 00:07:22,640\nthat was installed and then we didn't\nneed it anymore, it never got removed.\n\n120\n00:07:22,640 --> 00:07:26,260\nThere might be some applications\nthat really need to be updated.\n\n121\n00:07:26,260 --> 00:07:29,880\nAnd when I move to that new machine I'm\ninstalling the latest version of those\n\n122\n00:07:29,880 --> 00:07:33,950\napplications, right, gives me\na chance to go through everything,\n\n123\n00:07:33,950 --> 00:07:38,780\nfigure out what it is I really need on\nthis new machine, what I can get rid of,\n\n124\n00:07:38,780 --> 00:07:43,640\nand start with a good known point and\na good working configuration.\n\n125\n00:07:43,640 --> 00:07:47,350\nA couple things we want to\nthink about with our migration.\n\n126\n00:07:47,350 --> 00:07:49,689\nOne, we can do it from\nphysical to physical.\n\n127\n00:07:49,689 --> 00:07:51,949\nOr we can do it from physical to virtual,\nright?\n\n128\n00:07:51,949 --> 00:07:53,879\nWhich is very common nowadays.\n\n129\n00:07:53,879 --> 00:07:56,378\nWe're seeing more and more.\n\n130\n00:07:56,378 --> 00:08:00,340\nVirtualization because of the power\nof our servers that we have nowadays.\n\n131\n00:08:00,340 --> 00:08:04,730\nIt just doesn't make sense to go out and\nbuy a server and run DNS on it.\n\n132\n00:08:04,730 --> 00:08:08,710\nYou're gonna use 0.001% of your\nprocessor or whatever the case may be.\n\n133\n00:08:08,710 --> 00:08:12,650\nSo we're seeing a lot of move to\nvirtualization where we can consolidate\n\n134\n00:08:12,650 --> 00:08:18,820\nour different roles and run several\nvirtual servers on a physical host that\n\n135\n00:08:18,820 --> 00:08:26,150\nhas those four quad core processors or 64\ngigs of RAM or whatever we put in there.\n\n136\n00:08:26,150 --> 00:08:29,200\nA lot of times it is going\nto be physical to virtual.\n\n137\n00:08:29,200 --> 00:08:34,080\nBut that's really not,\nI won't say it's not important, but\n\n138\n00:08:34,080 --> 00:08:38,550\nthere's not much difference in migrating\na role from a physical to a physical, or\n\n139\n00:08:38,550 --> 00:08:40,840\nphysical to a virtual, right?\n\n140\n00:08:40,840 --> 00:08:47,210\nWe also have to consider the fact that\n2012 R2 is only available in 64-bit.\n\n141\n00:08:47,210 --> 00:08:49,010\nSo when we talk about doing a migration,\n\n142\n00:08:49,010 --> 00:08:53,220\nwe're going to be from\n64-bit operating systems.\n\n143\n00:08:53,220 --> 00:08:57,740\nIf R2 2003 server, something like that\nis running 32-bit we're not going to be\n\n144\n00:08:57,740 --> 00:08:59,300\nable to do a migration.\n\n145\n00:08:59,300 --> 00:09:02,590\nWe're going to have to basically\ndo a clean install and\n\n146\n00:09:02,590 --> 00:09:04,100\ninstall those rolls all over again.\n\n147\n00:09:05,440 --> 00:09:06,810\nAll right?\n\n148\n00:09:06,810 --> 00:09:11,540\nNow, Microsoft gives us a few\ndifferent tools that we can use\n\n149\n00:09:11,540 --> 00:09:13,050\nto help with this migration.\n\n150\n00:09:13,050 --> 00:09:16,660\nWe've got some Powershell\ncommands that we can use.\n\n151\n00:09:16,660 --> 00:09:21,740\nWe've got a couple of different wizards,\nI'll show you a couple of these things\n\n152\n00:09:21,740 --> 00:09:26,810\nas we go through here to help\nus with those migrations.\n\n153\n00:09:26,810 --> 00:09:27,760\nAll right.\n\n154\n00:09:27,760 --> 00:09:31,780\nAnd I'm gonna skip down for just a second.\n\n155\n00:09:31,780 --> 00:09:34,570\nI don't know why I seem to have\nthese a little bit out of order.\n\n156\n00:09:34,570 --> 00:09:37,370\nBut I'll come back to\nthese migration tools.\n\n157\n00:09:37,370 --> 00:09:40,560\nLike one of them is with Powershell.\n\n158\n00:09:40,560 --> 00:09:43,130\nYou guys, we've talked about\nPowerShell in several episodes and\n\n159\n00:09:43,130 --> 00:09:45,240\nwe know it's very modular, right?\n\n160\n00:09:45,240 --> 00:09:50,300\nSo when you fire up Powershell\nyou have access to a certain\n\n161\n00:09:50,300 --> 00:09:52,820\nmodules which are your\ndifferent commandments.\n\n162\n00:09:52,820 --> 00:09:56,950\nAnd as we install different services\nwe typically get additional modules\n\n163\n00:09:56,950 --> 00:10:01,720\nthat we can add that gives us\naccess to new commands, or\n\n164\n00:10:01,720 --> 00:10:03,640\ncmdlets as Microsoft likes to call them.\n\n165\n00:10:04,750 --> 00:10:05,480\nThe one for\n\n166\n00:10:05,480 --> 00:10:09,620\nour migration is gonna be this one here\nthat I've got highlighted in the notes.\n\n167\n00:10:09,620 --> 00:10:14,740\nIt's add-pssnapin, and\nthen the name of the module\n\n168\n00:10:14,740 --> 00:10:21,015\nis gonna be\nmicrosoft.windows.servermanager.migration.\n\n169\n00:10:21,015 --> 00:10:26,920\nAnd you're gonna run that command in your\nPowerShell, and that's going to add in,\n\n170\n00:10:26,920 --> 00:10:32,593\nload up that module that gives us access\nto our migration tools from Powershell.\n\n171\n00:10:32,593 --> 00:10:35,104\nWe wanna script to migration or\nsomething like that.\n\n172\n00:10:35,104 --> 00:10:40,792\nI've got several DNS servers, and I don't\nwanna have to do it manually in each one.\n\n173\n00:10:40,792 --> 00:10:42,624\nI can generate a script and\n\n174\n00:10:42,624 --> 00:10:47,711\nthen execute that script on these\ndifferent DNS servers, for example.\n\n175\n00:10:47,711 --> 00:10:53,600\nThe command I've got right below\nthat is just a typical help command.\n\n176\n00:10:53,600 --> 00:10:55,810\nWe've used that before\non several episodes.\n\n177\n00:10:55,810 --> 00:10:58,880\nOr if I wanna get a list of a certain\nset of commands that are available.\n\n178\n00:10:58,880 --> 00:10:59,890\nHow do I know what's there?\n\n179\n00:10:59,890 --> 00:11:03,990\nWhen I run that add PS snap in,\nokay great, now what happens?\n\n180\n00:11:03,990 --> 00:11:07,220\nWell then I can run this\nget-command-module and\n\n181\n00:11:07,220 --> 00:11:11,870\nthen the name of that module\nMicrosoft.Windows.ServerManager.Migration.\n\n182\n00:11:11,870 --> 00:11:13,770\nAnd I'll get a list of those commands.\n\n183\n00:11:13,770 --> 00:11:18,430\nAnd I'm gonna show you guys\nthat here in just a minute.\n\n184\n00:11:18,430 --> 00:11:20,580\nWe also have in the GUI.\n\n185\n00:11:20,580 --> 00:11:25,660\nWe can go through ServerManager and we can\nuse our Add Roles and Features Wizard,\n\n186\n00:11:25,660 --> 00:11:30,040\nand we can add a feature that's called\nthe Windows migration tools, or\n\n187\n00:11:30,040 --> 00:11:32,130\nthe Windows server migration tools.\n\n188\n00:11:32,130 --> 00:11:37,020\nAnd really it's not much more than\nthen doing the command prompt\n\n189\n00:11:37,020 --> 00:11:41,240\nversion because when you add it, yes,\nit adds an option to your server manager\n\n190\n00:11:41,240 --> 00:11:46,370\ntools menu that I can go in and pick\nWindows server manager or migration tools.\n\n191\n00:11:46,370 --> 00:11:49,450\nAll that does is open up a Power\nshell prompt with that module or\n\n192\n00:11:49,450 --> 00:11:50,720\nwith access to those commands.\n\n193\n00:11:50,720 --> 00:11:53,950\nSo, really two different ways to\ngo about doing the same thing.\n\n194\n00:11:55,600 --> 00:11:59,460\nAll right, so, first and foremost,\nwe've got a plan, right?\n\n195\n00:11:59,460 --> 00:12:01,210\nAnd we've said this a couple of times.\n\n196\n00:12:02,290 --> 00:12:04,400\nPlanning is a very important part of this,\n\n197\n00:12:04,400 --> 00:12:07,440\nespecially when we're talking\nabout moving these roles.\n\n198\n00:12:07,440 --> 00:12:12,310\nI don't wanna be the one\nthat has to explain why\n\n199\n00:12:12,310 --> 00:12:16,680\nwe're giving the staff the afternoon off\nbecause nobody can get anything done.\n\n200\n00:12:16,680 --> 00:12:18,460\nBecause I've brought\ndown half the network.\n\n201\n00:12:18,460 --> 00:12:20,450\nOr because the file\nservers are unavailable.\n\n202\n00:12:20,450 --> 00:12:22,700\nOr our DNS is unavailable.\n\n203\n00:12:22,700 --> 00:12:25,110\nSo planning this out is\nextremely important.\n\n204\n00:12:25,110 --> 00:12:29,500\nWe wanna make sure that we've\nlooked at what we wanna do and\n\n205\n00:12:29,500 --> 00:12:31,550\nthen how we wanna go about doing it.\n\n206\n00:12:31,550 --> 00:12:36,540\nAnd we've thought about any\nissues that might arise.\n\n207\n00:12:36,540 --> 00:12:40,850\nMicrosoft gives us a whole lot\nof help with this situation.\n\n208\n00:12:40,850 --> 00:12:45,170\nThey give us some really nice\ndocumentation on migrating roles.\n\n209\n00:12:45,170 --> 00:12:46,570\nBecause it's gonna be different.\n\n210\n00:12:46,570 --> 00:12:49,720\nRight?\nEach role that we're talking about\n\n211\n00:12:49,720 --> 00:12:51,730\nhas its own unique characteristics.\n\n212\n00:12:51,730 --> 00:12:55,460\nProperties, resources that it needs\nto access and things like that.\n\n213\n00:12:55,460 --> 00:12:58,180\nSo it's not just a general plan.\n\n214\n00:12:58,180 --> 00:13:00,980\nHey, I'm gonna take this service and\nI'm gonna uninstall it from here and\n\n215\n00:13:00,980 --> 00:13:03,650\nI'm gonna install it on this\nnew server that I just set up.\n\n216\n00:13:03,650 --> 00:13:07,690\nWe've really gotta look at what\neach one of those roles needs and\n\n217\n00:13:07,690 --> 00:13:10,670\nconsider what we're gonna\nneed to migrate and\n\n218\n00:13:12,210 --> 00:13:15,640\nwhat order we might need to do\nthings in and things like that.\n\n219\n00:13:15,640 --> 00:13:19,290\nAnd I'm going to pull up, I've got a link\nhere, and again, I'll throw these notes up\n\n220\n00:13:19,290 --> 00:13:24,630\nwith our show when we get it posted,\nwhenever they get around to posting it.\n\n221\n00:13:24,630 --> 00:13:26,270\nBut we'll get that put up there.\n\n222\n00:13:26,270 --> 00:13:29,970\nBut let me take you\nover to a webpage here.\n\n223\n00:13:29,970 --> 00:13:32,145\nThat handy-dandy link pulled up somewhere.\n\n224\n00:13:32,145 --> 00:13:36,747\n[SOUND] This one right here.\n\n225\n00:13:36,747 --> 00:13:39,347\nThis is what that link will take you to.\n\n226\n00:13:39,347 --> 00:13:41,310\nThis is a Microsoft page.\n\n227\n00:13:41,310 --> 00:13:44,920\nAs you can see, migrating roles and\nfeatures in Windows server.\n\n228\n00:13:44,920 --> 00:13:47,510\nAnd they give us documentation for\n\n229\n00:13:47,510 --> 00:13:50,150\nsome of the different roles that\nwe might be wanting to migrate.\n\n230\n00:13:50,150 --> 00:13:53,710\nAnd you'll see that they're different\ndepending on the version of the operating\n\n231\n00:13:53,710 --> 00:13:57,260\nsystem that we're gonna be migrating to.\n\n232\n00:13:57,260 --> 00:13:58,440\nSo they finally got these out.\n\n233\n00:13:58,440 --> 00:14:02,460\nFor a while, they just recently updated\nthis to include the R2 content.\n\n234\n00:14:02,460 --> 00:14:04,596\nTake a little while to get someone, and\n\n235\n00:14:04,596 --> 00:14:07,910\nin fact you'll see some of\nthese still say server 2012.\n\n236\n00:14:07,910 --> 00:14:12,700\nSo they're slowly getting all this\ndocumentation updated to support.\n\n237\n00:14:12,700 --> 00:14:14,150\nGood morning Jesse?\n\n238\n00:14:14,150 --> 00:14:15,850\nTo support 2012 R2.\n\n239\n00:14:15,850 --> 00:14:20,550\nBut this one page actually has, you can\nsee I've got 2012 R2, I've got 2012.\n\n240\n00:14:20,550 --> 00:14:22,670\nIf I scroll down I've got 2008 R2 as well.\n\n241\n00:14:22,670 --> 00:14:26,890\nAnd each one of these it's\ngonna take me to a document.\n\n242\n00:14:26,890 --> 00:14:30,380\nFor example,\nif I am thinking about migrating,\n\n243\n00:14:30,380 --> 00:14:35,980\nwhat's a good one to migrate here,\nlet's do DHCP Server to 2012 R2.\n\n244\n00:14:35,980 --> 00:14:40,540\nI can follow this link and\nit's going to take me\n\n245\n00:14:40,540 --> 00:14:45,400\nto the TechNet page, which is going\nto guide me through the process.\n\n246\n00:14:45,400 --> 00:14:46,850\nAll right?\nIt's gonna show me what my\n\n247\n00:14:46,850 --> 00:14:51,720\nsupported operating systems are going\nto be for migrating over to,\n\n248\n00:14:51,720 --> 00:14:55,170\nas well as the different\nrole configurations.\n\n249\n00:14:55,170 --> 00:14:57,430\nAnd then a very handy guide.\n\n250\n00:14:57,430 --> 00:15:01,810\nYou see we've got different\nlinks here preparing to migrate.\n\n251\n00:15:03,040 --> 00:15:04,250\nMigrating.\n\n252\n00:15:04,250 --> 00:15:05,480\nVerifying the migration.\n\n253\n00:15:05,480 --> 00:15:09,980\nVery important part of migrating a role is\nmaking sure that it's functioning, right?\n\n254\n00:15:09,980 --> 00:15:14,040\nOnce we get it moved over to that new\nserver I can't just say yep, I'm done.\n\n255\n00:15:14,040 --> 00:15:16,210\nAnd go get my Mountain Dew.\n\n256\n00:15:16,210 --> 00:15:18,530\nI need to make sure that\nthings are working.\n\n257\n00:15:18,530 --> 00:15:22,840\nAnd then any post migration tasks that\nI might have to do that might deal with\n\n258\n00:15:22,840 --> 00:15:27,380\ndecommissioning the older server and\nthings like that or\n\n259\n00:15:27,380 --> 00:15:30,130\nsetting up permissions\nif it's a file server.\n\n260\n00:15:31,600 --> 00:15:32,810\nSo really good documentation.\n\n261\n00:15:32,810 --> 00:15:34,240\nI'm not gonna pull each one of these up.\n\n262\n00:15:34,240 --> 00:15:38,380\nWhen you guys are studying they're not\ngonna really get you on this exam.\n\n263\n00:15:40,580 --> 00:15:41,330\nI gotta be really careful,\n\n264\n00:15:41,330 --> 00:15:44,000\nbecause I don't know what questions\nyou're going to get on the exam, right?\n\n265\n00:15:44,000 --> 00:15:45,718\nThey can change that up on us.\n\n266\n00:15:45,718 --> 00:15:50,672\nBut they're usually not super specific to\nany particular role, because there's so\n\n267\n00:15:50,672 --> 00:15:52,059\nmany different roles.\n\n268\n00:15:52,059 --> 00:15:55,179\nAnd each one is going to\nbe a little bit different.\n\n269\n00:15:55,179 --> 00:15:58,583\nThere are some general steps that we\ncan think about when we're looking\n\n270\n00:15:58,583 --> 00:16:00,780\nat roles and I'll come back to that.\n\n271\n00:16:00,780 --> 00:16:02,380\nI have a really good documentation and\n\n272\n00:16:02,380 --> 00:16:05,940\njust important that we know that\nthis is here and that we use this.\n\n273\n00:16:05,940 --> 00:16:08,110\nRight?\nThat we go out and we do our research and\n\n274\n00:16:08,110 --> 00:16:12,180\nour planning before we actually\nget into the migration process.\n\n275\n00:16:13,670 --> 00:16:14,840\nAll right.\n\n276\n00:16:14,840 --> 00:16:20,196\nSo, they got different documentation\nagain for the different roles,\n\n277\n00:16:20,196 --> 00:16:26,098\nand they'll probably be adding a few,\nI don't see Print Manager on this guy.\n\n278\n00:16:26,098 --> 00:16:27,770\nThere's my file and storage services.\n\n279\n00:16:27,770 --> 00:16:33,200\nI did not see Print, which is another\none that we typically have to migrate.\n\n280\n00:16:34,360 --> 00:16:37,290\nAlso a guide here on installing and\nusing and\n\n281\n00:16:37,290 --> 00:16:39,510\nremoving the Windows\nServer Migration Tools.\n\n282\n00:16:39,510 --> 00:16:41,850\nThose are the ones I was talking about,\nthat's the GUI\n\n283\n00:16:43,140 --> 00:16:47,380\nversion of the migration tools.\n\n284\n00:16:47,380 --> 00:16:52,412\nIf we're gonna do a migration like this,\nwhat's gonna happen is, we're gonna\n\n285\n00:16:52,412 --> 00:16:57,379\nactually install these migration tools\non the destination computer, right?\n\n286\n00:16:57,379 --> 00:16:59,928\nWe're gonna go to the one that\nwe want to hold the role.\n\n287\n00:16:59,928 --> 00:17:02,320\nWe're gonna install these.\n\n288\n00:17:02,320 --> 00:17:07,020\nWe're going to create a share,\nbasically a what they call a migration\n\n289\n00:17:07,020 --> 00:17:11,710\nstore and that migration\nstore is gonna be a UNC path.\n\n290\n00:17:11,710 --> 00:17:15,694\nIt's gonna need to be mapped because we're\ngonna need to use a drive letter in our\n\n291\n00:17:15,694 --> 00:17:18,636\ncommands, and\nthen we're gonna go to the source machine.\n\n292\n00:17:18,636 --> 00:17:20,710\nThe one that's currently\nholding the role and\n\n293\n00:17:20,710 --> 00:17:23,272\nwe're gonna install those\nmigration tools over there.\n\n294\n00:17:23,272 --> 00:17:28,521\nThen we're going to run some power\nshow commands that are going to gather\n\n295\n00:17:28,521 --> 00:17:33,941\nup all the information about that role,\nput it up in that migration store,\n\n296\n00:17:33,941 --> 00:17:38,610\nand then we can pull those settings\nback down to that new server.\n\n297\n00:17:40,090 --> 00:17:43,760\nNow again,\nit's gonna vary with different roles.\n\n298\n00:17:43,760 --> 00:17:46,010\nAnd there's other ways\nof going about this.\n\n299\n00:17:46,010 --> 00:17:49,138\nOne of the things that they don't\ntalk about in here, and for me,\n\n300\n00:17:49,138 --> 00:17:54,960\nI've never, what Active Directory,\nfor example.\n\n301\n00:17:54,960 --> 00:17:58,710\nActive Directory has a great replication\nservice built into it, right?\n\n302\n00:17:58,710 --> 00:18:01,131\nWe've talked about that in 411 and 412.\n\n303\n00:18:01,131 --> 00:18:05,336\nIf I'm gonna bring in a 2012\nR2 domain controller,\n\n304\n00:18:05,336 --> 00:18:09,989\nthen I can just take that machine,\ninstall 2012 R2 on it.\n\n305\n00:18:09,989 --> 00:18:15,163\nPromote it to be a domain controller,\nadd DNS, do my Active Directory and\n\n306\n00:18:15,163 --> 00:18:19,030\nthen just let Active Directory replicate,\nright?\n\n307\n00:18:19,030 --> 00:18:22,010\nWait long enough it's\ngonna replicate over, and\n\n308\n00:18:22,010 --> 00:18:26,660\nthen I can demote my older domain\ncontroller and get it out of the system.\n\n309\n00:18:27,840 --> 00:18:33,010\nSo, different ways of going about it\ndepending on what the role is going to be.\n\n310\n00:18:33,010 --> 00:18:35,240\nNow, that's really if\nyou've got new hardware.\n\n311\n00:18:35,240 --> 00:18:37,300\nIf I don't have new hardware, well now,\n\n312\n00:18:37,300 --> 00:18:38,850\nI've got to do it a little\nbit differently, right?\n\n313\n00:18:38,850 --> 00:18:39,910\nI might have to, and again,\n\n314\n00:18:39,910 --> 00:18:44,190\nit really doesn't make sense with\nActive Directory, but like with DHCP.\n\n315\n00:18:44,190 --> 00:18:49,740\nIf I'm not getting new hardware,\nif my hardware supports doing 2012 R2,\n\n316\n00:18:49,740 --> 00:18:52,610\nthen maybe I'm going to do\nwhat we call a wipe and load.\n\n317\n00:18:52,610 --> 00:18:54,060\nMigrate those settings for\n\n318\n00:18:54,060 --> 00:18:58,530\nthose roles out into that migration store,\nblow away my server,\n\n319\n00:18:58,530 --> 00:19:03,320\ninstall 2012 R2, and then bring those\nsettings back down to that new machine.\n\n320\n00:19:04,580 --> 00:19:06,010\nAll right?\n\n321\n00:19:06,010 --> 00:19:10,130\nSo, again, lot of it really depends\non the role you're trying to migrate.\n\n322\n00:19:11,270 --> 00:19:14,520\nLet me flip back over to my notes so\nI don't lose track of\n\n323\n00:19:15,610 --> 00:19:19,210\nwhere I am headed with this.\n\n324\n00:19:19,210 --> 00:19:20,560\nLet's take a look at,\n\n325\n00:19:20,560 --> 00:19:25,550\nI showed you guys the documentation that\nMicrosoft provides to do this migration.\n\n326\n00:19:26,870 --> 00:19:30,470\nLet's take a quick look at the PS snap-in.\n\n327\n00:19:30,470 --> 00:19:34,530\nWe'll add those migration tools to a\nserver, and I'll show you how to do that.\n\n328\n00:19:34,530 --> 00:19:35,730\nSo, let me flip.\n\n329\n00:19:38,180 --> 00:19:42,940\nAll I've got here,\nthis is just a 2012 R2 server.\n\n330\n00:19:42,940 --> 00:19:45,630\nAnd again, a couple of different\nways I can go about this.\n\n331\n00:19:45,630 --> 00:19:49,420\nI think we'll do the PowerShell version.\n\n332\n00:19:49,420 --> 00:19:51,290\nI like the PowerShell version.\n\n333\n00:19:51,290 --> 00:19:53,320\nLike I said, if we do it through the GUI,\n\n334\n00:19:53,320 --> 00:19:56,260\nyou guys have seen that\nwizard a few times by now.\n\n335\n00:19:56,260 --> 00:20:01,120\nWhen you are studying for MCSC, you should\nbe very familiar with your add roles and\n\n336\n00:20:01,120 --> 00:20:02,620\nfeatures wizard.\n\n337\n00:20:02,620 --> 00:20:10,829\nSo, through PowerShell,\nwe are going to do add-pssnapin.\n\n338\n00:20:12,040 --> 00:20:14,510\nMake sure I can spell that correctly.\n\n339\n00:20:14,510 --> 00:20:19,103\nAnd then, it's gonna be\n\n340\n00:20:19,103 --> 00:20:29,209\nmicrosoft.windows.servermanager.migration.\n\n341\n00:20:29,209 --> 00:20:36,186\n[SOUND] Either, I can't type.\n\n342\n00:20:36,186 --> 00:20:38,688\nLet me double check my command there.\n\n343\n00:20:38,688 --> 00:20:44,243\n[SOUND] Windows.servermanager.migration\n\n344\n00:20:49,843 --> 00:20:52,304\nInvalid argument?\n\n345\n00:20:52,304 --> 00:20:56,438\n[INAUDIBLE]\nMicrosoft.windows.servermanager.migration.\n\n346\n00:20:56,438 --> 00:21:01,842\nI swear to you guys, right before this\nthing, I fired this up just to make sure.\n\n347\n00:21:01,842 --> 00:21:03,909\nPain in my butt.\n\n348\n00:21:03,909 --> 00:21:05,465\nAll right, one more time.\n\n349\n00:21:05,465 --> 00:21:12,380\nMake sure I run it as administrator,\n\n350\n00:21:12,380 --> 00:21:15,056\njust in case,\n\n351\n00:21:15,056 --> 00:21:24,215\nadd-pssnapin, microsoft.windows.server\n\n352\n00:21:30,816 --> 00:21:35,042\nHm, interesting.\n\n353\n00:21:35,042 --> 00:21:39,178\n[INAUDIBLE]\n\n354\n00:21:39,178 --> 00:21:46,469\nUnless, All right,\n\n355\n00:21:46,469 --> 00:21:51,734\nwell, let me just make sure that I\ndon't have that already added in here.\n\n356\n00:21:55,340 --> 00:21:59,810\n[SOUND] This is the one\nI was talking about,\n\n357\n00:21:59,810 --> 00:22:07,754\nif you want to verify the commands\nare available, get-command-module\n\n358\n00:22:12,193 --> 00:22:18,085\n.servermanager.migration.\n\n359\n00:22:18,085 --> 00:22:21,232\nAnd, see, it's not installed yet.\n\n360\n00:22:21,232 --> 00:22:25,777\nAll right, well, that is interesting.\n\n361\n00:22:25,777 --> 00:22:27,530\nLet's go through the GUI and\ntry it that way.\n\n362\n00:22:28,890 --> 00:22:32,841\nSo, I'm gonna flip back over to Server\nManager, and I'll show you that way, and\n\n363\n00:22:32,841 --> 00:22:34,690\nsee if I can get it done through there.\n\n364\n00:22:34,690 --> 00:22:39,298\nSo again, Add Roles and Features,\nwhen Server Manager finishes refreshing.\n\n365\n00:22:43,470 --> 00:22:45,113\nDo the hold Next three times.\n\n366\n00:22:45,113 --> 00:22:47,098\nAnd this is gonna be a feature.\n\n367\n00:22:47,098 --> 00:22:47,899\nIt's not a role.\n\n368\n00:22:47,899 --> 00:22:50,081\nSo, Next one more time\nto get past my roles.\n\n369\n00:22:50,081 --> 00:22:56,130\nAnd then, in my list of features, I've\ngot my Windows Server Migration Tools.\n\n370\n00:22:57,470 --> 00:22:59,590\nAnd we'll go ahead and check that off.\n\n371\n00:22:59,590 --> 00:23:02,420\nI'm gonna click Next and Install.\n\n372\n00:23:02,420 --> 00:23:04,570\nAnd that'll just take\na second to whip through.\n\n373\n00:23:04,570 --> 00:23:05,870\nAnd that should do the same thing.\n\n374\n00:23:05,870 --> 00:23:10,094\nIt should make that module available and\ngive us access to those commands.\n\n375\n00:23:10,094 --> 00:23:16,895\nSo, once that finishes up, I'll show you\nguys a list of those commands there.\n\n376\n00:23:16,895 --> 00:23:18,439\nAll right.\n\n377\n00:23:18,439 --> 00:23:20,024\nFrustrating, right?\n\n378\n00:23:20,024 --> 00:23:22,299\nI mean, that's a pretty simple command.\n\n379\n00:23:22,299 --> 00:23:24,302\nIt's really hard to get\nthat one incorrect.\n\n380\n00:23:24,302 --> 00:23:26,600\nSo, we'll see why that's not working.\n\n381\n00:23:26,600 --> 00:23:30,072\nSo, while that's installing,\nactually, it's just about done.\n\n382\n00:23:30,072 --> 00:23:34,175\nLet me go ahead and let it finish.\n\n383\n00:23:34,175 --> 00:23:38,203\nAnd then once it gets done,\nwe'll go up to our Tools menu, and\n\n384\n00:23:38,203 --> 00:23:43,403\nwe'll see we have a new node on our Server\nManager tools for my migration tools.\n\n385\n00:23:47,037 --> 00:23:48,203\nI say, it's almost done.\n\n386\n00:23:48,203 --> 00:23:52,066\nThere we go.\n\n387\n00:23:52,066 --> 00:23:55,466\nAnd now under tools, I should see\nmy Windows Server Migration Tools.\n\n388\n00:23:55,466 --> 00:23:57,826\nI'm gonna click on that.\n\n389\n00:23:57,826 --> 00:24:01,167\nAs you can see it just opens\nup a Windows PowerShell.\n\n390\n00:24:01,167 --> 00:24:04,067\nAnd [COUGH] let's check,\nlet me adjust my font for you guys so\n\n391\n00:24:04,067 --> 00:24:06,619\nthat you can see what the heck\nI'm typing out there.\n\n392\n00:24:15,258 --> 00:24:16,478\nA little bit better.\n\n393\n00:24:16,478 --> 00:24:21,399\nAnd if I do the get-command for\nthat module, we'll see if it's loaded\n\n394\n00:24:21,399 --> 00:24:26,418\nit up already or if I'm gonna have to\ngo back and load it up after the fact.\n\n395\n00:24:31,909 --> 00:24:40,168\nSo\nmicrosoft.windows.servermanager.migration.\n\n396\n00:24:44,389 --> 00:24:44,969\nAnd there you go.\n\n397\n00:24:44,969 --> 00:24:47,369\nNow you can see that those\nguys have been loaded up.\n\n398\n00:24:47,369 --> 00:24:52,174\nSo again, you should be able to run\nthat command from PowerShell and\n\n399\n00:24:52,174 --> 00:24:56,831\ninstall these commands, and\nthen they're gonna be available.\n\n400\n00:24:56,831 --> 00:24:59,380\nOr you can go through the Add Server,\nor Add Roles and\n\n401\n00:24:59,380 --> 00:25:04,050\nFeatures in Server Manager and\nwe can add the migration tools that way.\n\n402\n00:25:04,050 --> 00:25:08,510\nAnd there's the different commandlets\nthat we've got available.\n\n403\n00:25:08,510 --> 00:25:12,770\nAnd of course you guys know from our other\nshows, if you need any more help on like\n\n404\n00:25:12,770 --> 00:25:17,710\nwhat commands or parameters or\nswitches are available with\n\n405\n00:25:17,710 --> 00:25:21,170\nthose different commands,\nwe can always do our get-help and\n\n406\n00:25:21,170 --> 00:25:24,330\nthen the name of that command and\nwe can get some more information there.\n\n407\n00:25:24,330 --> 00:25:26,670\nSo, a couple different ways\nof go about adding those, and\n\n408\n00:25:26,670 --> 00:25:31,140\nagain the power of that is gonna be the\nfact that now I can script some of that.\n\n409\n00:25:31,140 --> 00:25:35,710\nSo with my PowerShell commands I can start\nautomating some of this migration process.\n\n410\n00:25:35,710 --> 00:25:39,445\nEspecially handy, when I've got\na large environment and I've got,\n\n411\n00:25:39,445 --> 00:25:44,060\nif it's a small office, maybe I wanna\ndo some of this a little more manually.\n\n412\n00:25:44,060 --> 00:25:47,160\nIn a large environment\nwhere we've got hundreds or\n\n413\n00:25:47,160 --> 00:25:51,920\nthousands of servers to deal with, might\nbe a little easier if we can script some\n\n414\n00:25:51,920 --> 00:25:54,070\nof that out or\nautomate some of that process.\n\n415\n00:25:56,575 --> 00:25:57,504\nAll right, so those are some of the tools.\n\n416\n00:25:57,504 --> 00:26:00,815\nWe've got the documentation\nthat Microsoft provides, right?\n\n417\n00:26:00,815 --> 00:26:05,225\nWe can go out there and we can get that\ndocumentation from Microsoft to help us in\n\n418\n00:26:05,225 --> 00:26:09,705\nour planning process, look for\nany pitfalls that we might run into.\n\n419\n00:26:09,705 --> 00:26:13,025\nThen we can go and\nwe can get the PowerShell commands\n\n420\n00:26:13,025 --> 00:26:18,370\nif we want to start scripting some\nof that information, all right?\n\n421\n00:26:18,370 --> 00:26:20,898\nAnd let's see where that brings us to.\n\n422\n00:26:20,898 --> 00:26:26,250\nAll right so, I tell you what,\nthat's probably a good place to stop.\n\n423\n00:26:26,250 --> 00:26:29,290\nWe've just got a few more minutes\nleft before our break time anyway.\n\n424\n00:26:29,290 --> 00:26:31,846\nAnd our next topic's gonna take\na little bit longer to go through.\n\n425\n00:26:31,846 --> 00:26:34,340\nSo why don't we stop and\ntake a break there?\n\n426\n00:26:34,340 --> 00:26:38,110\nAnd when we come back we're gonna\ncontinue on with migrating roles.\n\n427\n00:26:38,110 --> 00:26:40,735\nSo I'll see you guys back here in a few.\n\n428\n00:26:40,735 --> 00:26:47,175\n[SOUND].\n\n429\n00:26:47,175 --> 00:26:49,480\nAll right, welcome back ladies and\ngentlemen.\n\n430\n00:26:49,480 --> 00:26:52,160\nContinuing on with our\nmigration of our roles.\n\n431\n00:26:52,160 --> 00:26:56,360\nWe left off talking about\njust some general concepts,\n\n432\n00:26:56,360 --> 00:27:00,380\nsome of the documentation that we've got\navailable from Microsoft that we can use\n\n433\n00:27:00,380 --> 00:27:03,620\nto do our migrations or\nto help with and plan our migrations.\n\n434\n00:27:03,620 --> 00:27:05,900\nAnd then I showed you\na couple of the tools, or\n\n435\n00:27:05,900 --> 00:27:11,030\nI showed you the PowerShell tools that are\navailable if we want to start scripting or\n\n436\n00:27:11,030 --> 00:27:13,220\nautomating some of that process.\n\n437\n00:27:13,220 --> 00:27:17,660\nNext thing I wanna talk about, next\nthing they call out in the objectives,\n\n438\n00:27:17,660 --> 00:27:24,670\nis going to be migrating across\ndomains and forests, all right?\n\n439\n00:27:24,670 --> 00:27:27,420\nAnd this is something that\nwe're gonna run into,\n\n440\n00:27:27,420 --> 00:27:31,190\nprimarily if we are doing some\nrestructuring of our organization.\n\n441\n00:27:31,190 --> 00:27:35,243\nMaybe initially,\nyears ago when we set up our domains,\n\n442\n00:27:35,243 --> 00:27:41,208\nmaybe we didn't have enough foresight to\nsee where we were gonna be in five years.\n\n443\n00:27:41,208 --> 00:27:46,056\nMaybe we've changed names or we've done\na merger with a couple companies, or\n\n444\n00:27:46,056 --> 00:27:50,690\nsome divestitures where we split\nsomething up or consolidating domains.\n\n445\n00:27:50,690 --> 00:27:54,900\nMaybe we started out,\nway back in the day it was very popular to\n\n446\n00:27:54,900 --> 00:27:57,850\nmake lots of domains, and\nwe started realizing that sometimes we're\n\n447\n00:27:57,850 --> 00:28:01,110\nadding a level of complexity\nthat we might not need.\n\n448\n00:28:01,110 --> 00:28:02,968\nSo maybe we're consolidating things down.\n\n449\n00:28:02,968 --> 00:28:07,022\nBut that could be done from\ntwo domains within a forest,\n\n450\n00:28:07,022 --> 00:28:11,270\nlike from one domain to\nanother into a child domain.\n\n451\n00:28:11,270 --> 00:28:16,597\nOr into another domain name space\ntree in our forest ,or consolidation,\n\n452\n00:28:16,597 --> 00:28:18,300\nbackup to a root domain.\n\n453\n00:28:18,300 --> 00:28:20,510\nOr it could be to a completely new forest.\n\n454\n00:28:20,510 --> 00:28:24,340\nMaybe we've decided that we're\ngonna just kinda start all over.\n\n455\n00:28:24,340 --> 00:28:28,744\nWe're going to make a brand new forest\nwith a domain in there, and now I've got\n\n456\n00:28:28,744 --> 00:28:32,749\nto migrate all of my information from\nthat old domain in the old forest,\n\n457\n00:28:32,749 --> 00:28:35,370\ninto that new domain in the new forest.\n\n458\n00:28:35,370 --> 00:28:38,910\nAnd one of the things they call out,\nagain, is just talking about that.\n\n459\n00:28:38,910 --> 00:28:45,260\nWe've talked about, in our 411 or\n412 where we talk about trusts.\n\n460\n00:28:45,260 --> 00:28:49,849\nAnd I think as we mentioned in one of our\nfirst episodes in this particular track,\n\n461\n00:28:51,390 --> 00:28:53,140\na lot of this is assumed, right.\n\n462\n00:28:53,140 --> 00:28:57,270\nWe're on the MCSE track here, so\nwe should already be familiar with most of\n\n463\n00:28:57,270 --> 00:29:01,350\nthis stuff, or all of this stuff really,\nfrom our MCSA track.\n\n464\n00:29:01,350 --> 00:29:03,980\nSo they're gonna assume\nyou know what a trust is.\n\n465\n00:29:03,980 --> 00:29:06,940\nThey're not gonna talk about it or\ncall it out.\n\n466\n00:29:06,940 --> 00:29:11,224\nIf you all can get books and things like\nthat, we don't break down the differences\n\n467\n00:29:11,224 --> 00:29:15,138\nbetween the parent/child trust and\nshortcut trust and external trust and\n\n468\n00:29:15,138 --> 00:29:18,200\nforced trust and\nthings like that in this particular one.\n\n469\n00:29:18,200 --> 00:29:21,280\nSo if you're unfamiliar with any of that,\nmake sure you go back and\n\n470\n00:29:21,280 --> 00:29:25,650\ncheck out some of our other episodes where\nwe go into that in a little more depth.\n\n471\n00:29:25,650 --> 00:29:26,420\nReally what we need, one,\n\n472\n00:29:26,420 --> 00:29:31,920\nwe need to be familiar with the fact\nthat there are trusts available.\n\n473\n00:29:31,920 --> 00:29:38,010\nA couple terms I want to throw out there,\ninterforest and intraforest migrations.\n\n474\n00:29:38,010 --> 00:29:43,220\nWith our intraforest migration, if we're\ntalking about two domains in the same\n\n475\n00:29:43,220 --> 00:29:48,600\nforest, then we're gonna be doing an\nintraforest migration, within the forest.\n\n476\n00:29:48,600 --> 00:29:51,430\nIf we're going from an old\nforest to a new forest,\n\n477\n00:29:51,430 --> 00:29:56,003\nnow we're talking interforest migration,\nso between forests.\n\n478\n00:29:56,003 --> 00:30:00,970\nIf we're talking about,\nwith the intraforest migration,\n\n479\n00:30:00,970 --> 00:30:05,370\nso we're saying within our forest, now\nwe're taking advantage of a lot of those\n\n480\n00:30:05,370 --> 00:30:07,570\ntrusts that are already there, right?\n\n481\n00:30:07,570 --> 00:30:11,550\nWe know that when we create a child\ndomain, we get an automatic two-way\n\n482\n00:30:11,550 --> 00:30:16,071\ntransit of trust created between\nthe parent/child domain.\n\n483\n00:30:16,071 --> 00:30:19,162\nWe also, when we have a new\ndomain tree in our forest,\n\n484\n00:30:19,162 --> 00:30:23,643\nwe get a trust that's established between\nthe tree root and the forest root.\n\n485\n00:30:23,643 --> 00:30:26,400\nSo those are already there and\nwe can take advantage of those.\n\n486\n00:30:26,400 --> 00:30:30,841\nIf we are doing an interforest migration,\nif we're migrating from one\n\n487\n00:30:30,841 --> 00:30:35,480\nforest to another, well there are not\nexternal trusts set up by default.\n\n488\n00:30:35,480 --> 00:30:37,980\nThere is no trust\nestablished between those.\n\n489\n00:30:37,980 --> 00:30:39,653\nSo we're gonna have to do that manually.\n\n490\n00:30:39,653 --> 00:30:42,389\nWe're gonna have to set up that trust, and\n\n491\n00:30:42,389 --> 00:30:45,810\nagain we go over setting\nthat up in 411 and 412.\n\n492\n00:30:45,810 --> 00:30:48,420\nThe other thing we have to\nworry about is our DNS, right?\n\n493\n00:30:48,420 --> 00:30:50,510\nWhen we start going\nthrough this migration,\n\n494\n00:30:50,510 --> 00:30:54,880\nif it's an intraforest migration DNS is\nprobably already set up to handle that,\n\n495\n00:30:54,880 --> 00:30:58,300\nwhere we can resolve names in\nthe different domains within our forest.\n\n496\n00:30:58,300 --> 00:31:02,750\nIf we're setting up a brand new forest, we\nmight want to set up some stub zones, for\n\n497\n00:31:02,750 --> 00:31:08,670\nexample, to facilitate that name\nresolution across those forest boundaries.\n\n498\n00:31:08,670 --> 00:31:13,950\nSo getting that prepared, getting all that\nset up, and then it's just going back\n\n499\n00:31:13,950 --> 00:31:17,570\nto using the tools that we have available,\nthat we've talked about already.\n\n500\n00:31:17,570 --> 00:31:21,330\nAs well as for Active Directory,\nMicrosoft gives us a tool called\n\n501\n00:31:21,330 --> 00:31:25,780\nthe Active Directory Migration Tool,\nor ADMT for short.\n\n502\n00:31:25,780 --> 00:31:28,730\nAnd this is gonna help\nus migrating our object.\n\n503\n00:31:28,730 --> 00:31:33,330\nAnd in this particular one they're calling\nout primarily migrating computer objects\n\n504\n00:31:33,330 --> 00:31:36,730\nfrom one domain and one forest to another.\n\n505\n00:31:36,730 --> 00:31:39,932\nBut that also does our user accounts and\nour groups and\n\n506\n00:31:39,932 --> 00:31:42,719\nthings like that that we\nneed to migrate over.\n\n507\n00:31:42,719 --> 00:31:47,679\nAnd again, one of the big things we wanna\nworry about is making sure that our\n\n508\n00:31:47,679 --> 00:31:50,298\nnetwork remains functional, right?\n\n509\n00:31:50,298 --> 00:31:53,098\nThat we're not causing any down time.\n\n510\n00:31:53,098 --> 00:31:56,878\nOr any unavailability of\nthe services that we're offering.\n\n511\n00:31:56,878 --> 00:31:59,220\nSo we want to make sure,\nagain, that we plan this out.\n\n512\n00:31:59,220 --> 00:32:04,520\nWe think about what we're going to do\nwith migrating objects across forests or\n\n513\n00:32:04,520 --> 00:32:07,620\neven between one domain and another.\n\n514\n00:32:07,620 --> 00:32:11,400\nWe should know at this point about\nour SIDs, our security identifiers.\n\n515\n00:32:11,400 --> 00:32:14,310\nAnd those SIDs are made up of two parts.\n\n516\n00:32:14,310 --> 00:32:17,310\nRight?\nYou've got your domain identifier which is\n\n517\n00:32:18,340 --> 00:32:21,370\ngonna be common for\nall objects within that domain.\n\n518\n00:32:21,370 --> 00:32:23,710\nAnd then you've got your RID,\nor your relative identifier,\n\n519\n00:32:23,710 --> 00:32:25,410\nthat gets tacked onto the end.\n\n520\n00:32:25,410 --> 00:32:28,350\nThat's gonna be unique for\nevery single object and that for\n\n521\n00:32:28,350 --> 00:32:31,160\nmy SID is gonna be unique for\nevery single object.\n\n522\n00:32:31,160 --> 00:32:34,690\nWe migrate objects to another domain,\nwhether it's in the same forest or\n\n523\n00:32:34,690 --> 00:32:38,800\nit's in a different forest,\nthe domain identifier is gonna change.\n\n524\n00:32:38,800 --> 00:32:42,740\nThat means that object\nis gonna have a new SID.\n\n525\n00:32:42,740 --> 00:32:44,510\nWe have things like SID history, though,\n\n526\n00:32:44,510 --> 00:32:49,400\nthat we can take advantage of that can\nensure my users can maintain access to\n\n527\n00:32:49,400 --> 00:32:54,450\nthose resources as we move them\nfrom one domain to another.\n\n528\n00:32:54,450 --> 00:32:58,980\nThe other thing we're gonna wanna make\nsure we keep in mind is when we do\n\n529\n00:32:58,980 --> 00:33:03,320\na migration between domains, and again it\ndoesn't really matter if it's two domains\n\n530\n00:33:03,320 --> 00:33:07,750\nin the same forest or two domains in\ndifferent forests, when we migrate\n\n531\n00:33:07,750 --> 00:33:13,040\nthose computer objects that is gonna\nrequire a restart on those computers.\n\n532\n00:33:13,040 --> 00:33:16,640\nSo that's going to be downtime, so\nsomething we've got to think about.\n\n533\n00:33:16,640 --> 00:33:21,516\nMaybe we want to do that after hours or\nif were slow for a 24/7 shot,\n\n534\n00:33:21,516 --> 00:33:25,400\nmaybe a slower time on our\nnetwork where we can do that and\n\n535\n00:33:25,400 --> 00:33:29,390\nnot cause a lot of service\ninterruption for my end users.\n\n536\n00:33:30,740 --> 00:33:33,730\nSo make sure we think about that,\nthat restart that’s going to be required.\n\n537\n00:33:35,400 --> 00:33:36,000\nAll right.\nSo\n\n538\n00:33:36,000 --> 00:33:41,680\nthat pretty much takes care of some\nhigh level concepts of migrating roles.\n\n539\n00:33:41,680 --> 00:33:46,490\nNext thing I want to get into, and\nif we take a look at our objectives here,\n\n540\n00:33:46,490 --> 00:33:51,400\nis gonna be designing a server\nconsolidation strategy, all right?\n\n541\n00:33:51,400 --> 00:33:54,361\nSo designing a server\nconsolidation strategy.\n\n542\n00:33:54,361 --> 00:33:57,296\nAnd I'll go back over to my notes here.\n\n543\n00:33:57,296 --> 00:34:02,481\nUsually, as I got here in my notes,\nwe're talking about migrating into\n\n544\n00:34:02,481 --> 00:34:08,007\na virtualization technology like of\nMicrosoft can say HyperV that could be,\n\n545\n00:34:08,007 --> 00:34:13,120\nthere's a few other products out\nthere that we could use for that.\n\n546\n00:34:13,120 --> 00:34:15,140\nBut that's what we're\nusually trying to do,\n\n547\n00:34:15,140 --> 00:34:20,340\nis when we talk about server consolidation\nwe want to take all these physical servers\n\n548\n00:34:20,340 --> 00:34:24,280\nand we want to move them into\na virtualization infrastructure so\n\n549\n00:34:24,280 --> 00:34:26,900\nthat I can revert to\na virtualization platform, so\n\n550\n00:34:26,900 --> 00:34:31,041\nthat I can reduce the number of physical\nservers that I have on my rack.\n\n551\n00:34:31,041 --> 00:34:36,860\nI have a company here that worked for,\nwe had at one point a couple years ago,\n\n552\n00:34:36,860 --> 00:34:42,350\nI think we had 15, 16 physical servers,\nsomething like that.\n\n553\n00:34:42,350 --> 00:34:46,320\nAnd by doing a server consolidation and\ngoing virtual\n\n554\n00:34:46,320 --> 00:34:50,940\nwe dropped the number of physical\nservers in our rack down to three.\n\n555\n00:34:50,940 --> 00:34:52,770\nSo those of you that have, I'm sure,\n\n556\n00:34:52,770 --> 00:34:55,180\na few of you have spent some\ntime in a server closet.\n\n557\n00:34:55,180 --> 00:34:58,710\nYou know that all those servers,\na lot of heat.\n\n558\n00:34:58,710 --> 00:35:01,740\nA lot of noise,\na lot of power consumption.\n\n559\n00:35:01,740 --> 00:35:06,040\nSo if I can go from 15 servers\nto 3 that's a pretty big\n\n560\n00:35:07,160 --> 00:35:11,650\nimprovement in my power reduction, in my\npower consumption, my heat generation,\n\n561\n00:35:11,650 --> 00:35:15,020\nthe number of UPSs that I've got\nto maintain, things like that.\n\n562\n00:35:15,020 --> 00:35:17,590\nFrees up a lot of space\nin my rack as well.\n\n563\n00:35:17,590 --> 00:35:20,298\nAnd that was a small organization,\nI'm talking about 15 servers.\n\n564\n00:35:20,298 --> 00:35:23,840\nYou get into a company that is global or\n\n565\n00:35:23,840 --> 00:35:27,450\nsomething like that where you're\ntalking about thousands of servers.\n\n566\n00:35:28,900 --> 00:35:32,620\nWe can start reducing that\nnumber by going virtual.\n\n567\n00:35:32,620 --> 00:35:34,120\nSo it doesn't have to be.\n\n568\n00:35:34,120 --> 00:35:39,035\nWhen we talk about server consolidation\nit could also mean just consolidating to\n\n569\n00:35:39,035 --> 00:35:40,708\na single physical server.\n\n570\n00:35:40,708 --> 00:35:43,089\nI've got a physical server\nthat's running DNS.\n\n571\n00:35:43,089 --> 00:35:45,842\nI've got a physical server\nthat's running DHCP.\n\n572\n00:35:45,842 --> 00:35:49,422\nI bought a new server\nthat's a lot more capable,\n\n573\n00:35:49,422 --> 00:35:52,550\nhas a lot more resources available.\n\n574\n00:35:52,550 --> 00:35:56,020\nI could combine those roles\nonto that same machine.\n\n575\n00:35:56,020 --> 00:35:59,130\nSo usually we're talking about moving\nto a virtualization technology, but\n\n576\n00:35:59,130 --> 00:35:59,850\nnot necessarily.\n\n577\n00:35:59,850 --> 00:36:04,670\nSo, it doesn't always mean going virtual,\nall right?\n\n578\n00:36:04,670 --> 00:36:06,530\nWe've gotta consider performance, right?\n\n579\n00:36:06,530 --> 00:36:10,970\nWe've gotta think about, we start\nconsolidating these roles, I might\n\n580\n00:36:10,970 --> 00:36:16,150\nwant to try to cram everything on a single\nserver or as few servers as possible.\n\n581\n00:36:16,150 --> 00:36:20,360\nI've got to make sure those services\nare still providing an adequate level of\n\n582\n00:36:20,360 --> 00:36:22,560\nperformance to my network.\n\n583\n00:36:22,560 --> 00:36:24,810\nIt might look good in my server closet.\n\n584\n00:36:24,810 --> 00:36:29,736\nBoss is happy cuz the power bill's gone\ndown, but now my end users, it takes much\n\n585\n00:36:29,736 --> 00:36:34,320\nlonger to resolve a name or to connect\nto a resource or something like that.\n\n586\n00:36:34,320 --> 00:36:38,610\nWhich, in the end,\nis not going to be worth it, right?\n\n587\n00:36:38,610 --> 00:36:40,370\nI've got to maintain that performance.\n\n588\n00:36:41,550 --> 00:36:43,920\nSo I might not be able to\nconsolidate everything.\n\n589\n00:36:43,920 --> 00:36:48,270\nWe've gotta make it keeping performance\nin mind, as well as redundancy.\n\n590\n00:36:48,270 --> 00:36:50,050\nThis is another thing\nthat we can run into.\n\n591\n00:36:50,050 --> 00:36:53,560\nPeople can get a little carried\naway with their consolidation.\n\n592\n00:36:53,560 --> 00:36:58,230\nOkay, we're gonna put all this in here,\nwe're down to one physical server,\n\n593\n00:36:58,230 --> 00:37:01,490\nit's running Hyper V and\nI've got everything on there.\n\n594\n00:37:01,490 --> 00:37:04,760\nI've got 15 virtual servers running,\nand it's all there.\n\n595\n00:37:04,760 --> 00:37:05,590\nGreat!\n\n596\n00:37:05,590 --> 00:37:06,655\nWe're rocking, right?\n\n597\n00:37:06,655 --> 00:37:09,900\nYeah, until that physical host fails.\n\n598\n00:37:09,900 --> 00:37:12,730\nAnd now you didn't lose one server,\nyou lost 15 servers.\n\n599\n00:37:13,950 --> 00:37:16,220\nYour entire server infrastructure is down.\n\n600\n00:37:16,220 --> 00:37:17,920\nSo making sure we have redundancy,\n\n601\n00:37:17,920 --> 00:37:22,585\nthat means the physical host\nas well as the services.\n\n602\n00:37:22,585 --> 00:37:26,875\nJust because I'm going virtual we cannot\nforget our best practices, having more\n\n603\n00:37:26,875 --> 00:37:31,485\nthan one DHCP server available, having\nmore than one domain controller available.\n\n604\n00:37:31,485 --> 00:37:35,035\nAnd then splitting those up on\ndifferent physical hosts so\n\n605\n00:37:35,035 --> 00:37:36,945\nthat we have that level\nof fault tolerance or\n\n606\n00:37:36,945 --> 00:37:40,995\nredundancy to make sure we don't\nhave that unexpected downtime.\n\n607\n00:37:43,230 --> 00:37:46,746\nWhen we look at server\nconsolidation by virtualization,\n\n608\n00:37:46,746 --> 00:37:50,340\ncuz like I said that is\ntypically what we are doing.\n\n609\n00:37:50,340 --> 00:37:54,790\nA few things that we want, general steps\nthat we might want to go through, or\n\n610\n00:37:54,790 --> 00:37:56,100\nthat we should go through.\n\n611\n00:37:56,100 --> 00:37:58,499\nFirst is just determine what\nyour virtualization scope is.\n\n612\n00:37:59,850 --> 00:38:04,310\nTake a look at your network and decide\nwhat are we going to try to virtualize?\n\n613\n00:38:05,380 --> 00:38:08,160\nAnd when I talk about scope,\n\n614\n00:38:08,160 --> 00:38:12,670\nI'm really talking about how far we\nwant to go with this consolidation.\n\n615\n00:38:12,670 --> 00:38:15,370\nDo I really want to try to\nvirtualize my entire network?\n\n616\n00:38:17,120 --> 00:38:18,860\nMaybe in the end.\n\n617\n00:38:18,860 --> 00:38:20,920\nBut do I really want to do it all at once?\n\n618\n00:38:20,920 --> 00:38:22,190\nIf something goes wrong,\n\n619\n00:38:22,190 --> 00:38:27,030\nif something happens during that process,\nI'm kinda out of luck.\n\n620\n00:38:27,030 --> 00:38:27,670\nAll right?\n\n621\n00:38:27,670 --> 00:38:31,760\nSo, maybe don't virtualize\nthe entire data center at one time.\n\n622\n00:38:31,760 --> 00:38:37,350\nYou break it down into smaller chunks and\nyou virtualize a little bit at a time.\n\n623\n00:38:37,350 --> 00:38:39,520\nOr maybe you do it by location.\n\n624\n00:38:39,520 --> 00:38:42,490\nIf your different sites\nyou've got branch offices and\n\n625\n00:38:42,490 --> 00:38:45,180\nthings like that,\nmaybe we do one branch at a time.\n\n626\n00:38:45,180 --> 00:38:47,520\nWe do that remote office first.\n\n627\n00:38:47,520 --> 00:38:50,540\nIt maybe becomes our guinea pig for\nthe rest of the network.\n\n628\n00:38:50,540 --> 00:38:54,360\nIt gives me a chance to go through\nthe process, to work out the kinks,\n\n629\n00:38:54,360 --> 00:38:57,390\nrun into any issues that might arise.\n\n630\n00:38:57,390 --> 00:39:00,610\nAnd worse case scenario,\nit's not ideal, I don't want to, but\n\n631\n00:39:00,610 --> 00:39:06,940\nworst case I have issues at one branch\nnow instead of the entire network.\n\n632\n00:39:06,940 --> 00:39:12,370\nSo determining what the scope is, how far\nare we gonna go with our virtualization.\n\n633\n00:39:12,370 --> 00:39:16,860\nAnd then next thing is going to\nbe creating a workload list.\n\n634\n00:39:16,860 --> 00:39:22,390\nLooking at what applications we\nhave running on those servers, can\n\n635\n00:39:22,390 --> 00:39:26,180\nthose applications, are those applications\nsupported in a virtual environment?\n\n636\n00:39:26,180 --> 00:39:30,250\nNow you might have a situation where,\nsure, I can run that application on\n\n637\n00:39:30,250 --> 00:39:33,650\na virtual server, but the vendor is\nnot going to support me anymore.\n\n638\n00:39:33,650 --> 00:39:34,833\nThat might be a big thing.\n\n639\n00:39:34,833 --> 00:39:39,931\nSo, make sure that your application\nsupports virtualization and\n\n640\n00:39:39,931 --> 00:39:44,853\nthat your vendor supports you\nin that virtualization process.\n\n641\n00:39:44,853 --> 00:39:49,738\nI've seen it several times where The\nvendor itself, they don't wanna have to\n\n642\n00:39:49,738 --> 00:39:54,864\ndeal with, that's another thing that they\nmight have to troubleshoot with you.\n\n643\n00:39:54,864 --> 00:39:56,430\nAll right?\n\n644\n00:39:56,430 --> 00:39:58,160\nYou're having a problem\nwith the application,\n\n645\n00:39:58,160 --> 00:40:01,350\nyou've called up your vendor for\nsupport and they don't wanna\n\n646\n00:40:01,350 --> 00:40:03,800\nhave to deal with the virtualization part\nof this they're like, you know what,\n\n647\n00:40:03,800 --> 00:40:06,700\nwe're not gonna support you, you've\ngone virtual and we don't support that.\n\n648\n00:40:06,700 --> 00:40:08,200\nPut it on a physical server.\n\n649\n00:40:08,200 --> 00:40:09,480\nCall us back.\n\n650\n00:40:09,480 --> 00:40:12,774\nI've also told them,\nI've been talking with them on the phone.\n\n651\n00:40:12,774 --> 00:40:17,593\nI said, No, it's a physical machine,\nI swear, sometimes that works,\n\n652\n00:40:17,593 --> 00:40:19,395\nsometimes that doesn't.\n\n653\n00:40:19,395 --> 00:40:22,265\nDepends on what we are doing.\n\n654\n00:40:22,265 --> 00:40:24,027\nBut what apps are deployed?\n\n655\n00:40:24,027 --> 00:40:28,190\nWhere they're currently deployed at?\n\n656\n00:40:28,190 --> 00:40:32,410\nWhat the OS and\nresource requirements are for those apps?\n\n657\n00:40:32,410 --> 00:40:34,664\nDoes that app run on 2012 R2?\n\n658\n00:40:34,664 --> 00:40:41,010\nAll right, what kind of resources does\nthat app or that workload require?\n\n659\n00:40:41,010 --> 00:40:43,380\nIs it a memory intensive application?\n\n660\n00:40:43,380 --> 00:40:49,180\nIs it a very discontents of workload that\nthat application throws on that server.\n\n661\n00:40:49,180 --> 00:40:51,226\nAgain, can it be virtualized?\n\n662\n00:40:51,226 --> 00:40:54,317\nAnd we took a look at MAP\nin a previous episode,\n\n663\n00:40:54,317 --> 00:40:58,921\nour Microsoft Assessment and\nPlanning toolkit, fantastic tool for\n\n664\n00:40:58,921 --> 00:41:03,110\ndoing this because it's gonna go out and\nscan my machines.\n\n665\n00:41:03,110 --> 00:41:04,500\nIt's gonna look at what we've got.\n\n666\n00:41:04,500 --> 00:41:08,910\nIt's gonna give me some\nbeautiful reports indicating,\n\n667\n00:41:08,910 --> 00:41:12,850\nwhat services are out there,\nwhat applications are out there, and\n\n668\n00:41:12,850 --> 00:41:18,800\nwhat resources those services and\nthose servers are consuming, right?\n\n669\n00:41:18,800 --> 00:41:19,820\nWe took a look at that, like I said,\n\n670\n00:41:19,820 --> 00:41:22,970\nif you didn't get to see yesterday's\nepisode yet, should be up pretty soon.\n\n671\n00:41:22,970 --> 00:41:24,490\nYou guys check it out.\n\n672\n00:41:24,490 --> 00:41:29,380\nWe showed you some example documentation\nor reports that assessment and\n\n673\n00:41:29,380 --> 00:41:30,920\nplanning toolkit provides.\n\n674\n00:41:30,920 --> 00:41:35,400\nIt gives you great information there,\nand pretty easy to do.\n\n675\n00:41:35,400 --> 00:41:38,980\nWhen you see our episode from yesterday,\nall we did was pull it up,\n\n676\n00:41:38,980 --> 00:41:43,550\ntype in the IP range that we\nwanted to scan and hit go.\n\n677\n00:41:43,550 --> 00:41:46,680\nAnd it goes out and\nit finds that, and it scans.\n\n678\n00:41:46,680 --> 00:41:52,090\nYou can also do an active directory, you\ncan have it connect to active directory,\n\n679\n00:41:52,090 --> 00:41:53,810\nand look at your server objects in there,\n\n680\n00:41:53,810 --> 00:41:59,640\ndiscover the servers that it\nneeds to monitor and look at.\n\n681\n00:41:59,640 --> 00:42:03,290\nIt all uses WMI, or the MAP uses WMI,\n\n682\n00:42:03,290 --> 00:42:06,470\nwhich is my\nWindows Management Instrumentation.\n\n683\n00:42:06,470 --> 00:42:09,880\nAnother tool we could use\nwould be the SCVMM, right?\n\n684\n00:42:09,880 --> 00:42:13,160\nMy Systems Center Virtual Machine Manager.\n\n685\n00:42:13,160 --> 00:42:19,046\nIf we use SCVMM,\na little bit more initial work, right?\n\n686\n00:42:19,046 --> 00:42:24,940\nWe've got to install an agent on\nthe servers that we're wanting to analyze.\n\n687\n00:42:24,940 --> 00:42:28,820\nBut once we got that agent we could use\ngroup policy to push that agent out.\n\n688\n00:42:28,820 --> 00:42:32,720\nIf we're running SCVMM there's a good\nchance we're running system center\n\n689\n00:42:34,050 --> 00:42:35,440\nconfiguration manager.\n\n690\n00:42:35,440 --> 00:42:37,100\nAnd we could use that maybe or\n\n691\n00:42:37,100 --> 00:42:42,290\noperations manager to push out that\nagent for that virtual machine manager.\n\n692\n00:42:44,580 --> 00:42:46,510\nOr we could do it manually, right?\n\n693\n00:42:46,510 --> 00:42:50,320\nIf we wanna use performance\nmonitor we can do it ourselves.\n\n694\n00:42:50,320 --> 00:42:54,140\nWe can go in and throw the counters\nthat we want into performance monitor,\n\n695\n00:42:54,140 --> 00:42:59,660\nwe can create our data collector sets so\nthat we can capture that information.\n\n696\n00:43:01,050 --> 00:43:04,610\nAnd we know what servers we've got so we\ncan go to them we can fire that tool up.\n\n697\n00:43:04,610 --> 00:43:08,490\nPerformance monitor will allow you to\nmonitor remote machines as well so\n\n698\n00:43:08,490 --> 00:43:11,840\nI could run performance\nmonitor from my client.\n\n699\n00:43:11,840 --> 00:43:14,420\nFor example, sitting in my little\ncubicle down in the basement and\n\n700\n00:43:14,420 --> 00:43:18,160\nI could monitor those service from\nthere and log that information.\n\n701\n00:43:18,160 --> 00:43:23,440\nSo like we talked yesterday, there's\ndifferent tools available, different ways\n\n702\n00:43:23,440 --> 00:43:28,650\nwe can go to accomplish the same thing,\nand it's really about your environment.\n\n703\n00:43:28,650 --> 00:43:30,240\nWhat's best for you?\n\n704\n00:43:30,240 --> 00:43:34,030\nIf I'm a small shop with three servers,\nI probably don't wanna go out and\n\n705\n00:43:34,030 --> 00:43:37,600\nset up SCVMM to go through that.\n\n706\n00:43:37,600 --> 00:43:39,710\nMaybe I just used performance monitor.\n\n707\n00:43:39,710 --> 00:43:44,752\nIf I've got multiple physical locations,\nif I've got a large network with\n\n708\n00:43:44,752 --> 00:43:50,503\n100 of servers, I probably wanna move into\none of those more automated processes,\n\n709\n00:43:50,503 --> 00:43:55,741\nthat can go out and do it and generate\nthat information and report it back to me.\n\n710\n00:43:55,741 --> 00:43:59,280\nAll right, so\ndetermine your virtualization scope.\n\n711\n00:43:59,280 --> 00:44:04,270\nCreate your workload list,\nand then plan for\n\n712\n00:44:04,270 --> 00:44:08,190\nyour backup options as well as your\nfault tolerant options, all right?\n\n713\n00:44:08,190 --> 00:44:13,010\nSo, if I'm gonna be virtualizing this,\nhow am I gonna be backing this up?\n\n714\n00:44:13,010 --> 00:44:15,830\nOnce it gets virtual I've\ngot different choices.\n\n715\n00:44:15,830 --> 00:44:20,870\nReally not any different from when\nit was a physical anyway, but it's\n\n716\n00:44:20,870 --> 00:44:25,440\nstill something I've gotta consider and it\ndoes add a new option when we go virtual.\n\n717\n00:44:25,440 --> 00:44:26,820\nWe've got application backup.\n\n718\n00:44:26,820 --> 00:44:30,730\nMost applications are services,\nlike you look at DHCP.\n\n719\n00:44:30,730 --> 00:44:34,580\nI can go in there and I can backup that\ndatabase and everything I need for\n\n720\n00:44:34,580 --> 00:44:35,740\nDHCP manually, right?\n\n721\n00:44:35,740 --> 00:44:39,790\nIt does it automatically every 60 minutes\nanyway, and I can always go in and create\n\n722\n00:44:39,790 --> 00:44:45,280\na manual backup if I need to for moving\noff site or whatever the case may be.\n\n723\n00:44:45,280 --> 00:44:48,238\nSo maybe there's a backup procedure\nbuilt into the application itself.\n\n724\n00:44:48,238 --> 00:44:51,886\nWe could do a work load backup.\n\n725\n00:44:51,886 --> 00:44:55,861\nAnd here we're talking about maybe\nusing Windows server backup, or\n\n726\n00:44:55,861 --> 00:45:00,191\nmy system center data protection manager,\nor maybe something like that.\n\n727\n00:45:00,191 --> 00:45:05,218\nWhere some services are spread out\nacross multiple machines, right?\n\n728\n00:45:05,218 --> 00:45:08,904\nTiered type applications or something\nlike that where I can't just back up\n\n729\n00:45:08,904 --> 00:45:13,270\nthe application of one server, I really\nneed to get all the different components.\n\n730\n00:45:13,270 --> 00:45:17,030\nYou look at something like federation\nservices and it's a very complex service\n\n731\n00:45:17,030 --> 00:45:20,390\nthat has different components on\ndifferent servers in you network.\n\n732\n00:45:20,390 --> 00:45:25,340\nAnd just backing up one is not gonna\ngive me the ability to restore that, so\n\n733\n00:45:25,340 --> 00:45:28,680\nmaybe I wanna look at\ndoing a work load backup,\n\n734\n00:45:28,680 --> 00:45:33,830\nwhere I look at all of the pieces that\nthat particular work load requires and\n\n735\n00:45:33,830 --> 00:45:38,800\nuse something like a data protection\nmanager or Windows Server back up.\n\n736\n00:45:38,800 --> 00:45:40,440\nAnd then my fault tolerant options.\n\n737\n00:45:40,440 --> 00:45:44,893\nSorry, I forgot the other option there\nwas the virtualization host backup,\n\n738\n00:45:44,893 --> 00:45:48,607\nwhich is something I can't do\nwhen they're physical, right?\n\n739\n00:45:48,607 --> 00:45:53,096\nNow all of a sudden I've got this new\noption if I've moved my servers to these\n\n740\n00:45:53,096 --> 00:45:54,370\nvirtual servers.\n\n741\n00:45:54,370 --> 00:45:55,200\nI've got four or\n\n742\n00:45:55,200 --> 00:46:00,880\nfive virtual servers on this physical host\nproviding these services to the network.\n\n743\n00:46:00,880 --> 00:46:05,210\nI could back up the virtualization\nhost itself as a whole,\n\n744\n00:46:05,210 --> 00:46:07,970\nwhich is gonna include all\nof the virtual machines\n\n745\n00:46:07,970 --> 00:46:10,760\nthat are running on that\nvirtualization host, right.\n\n746\n00:46:10,760 --> 00:46:15,340\nThat again would be something\nlike data protection Manager,\n\n747\n00:46:15,340 --> 00:46:18,740\nwhich is a component of the system\ncenter suite of utilities.\n\n748\n00:46:20,270 --> 00:46:22,790\nThe good thing about\nthat particular process,\n\n749\n00:46:22,790 --> 00:46:26,740\nusing that data protection\nmanager is it uses VSS.\n\n750\n00:46:26,740 --> 00:46:29,350\nMy Volume Shadow copy Service.\n\n751\n00:46:29,350 --> 00:46:34,570\nAnd big advantage there is it creates\na snapshot of the machine, and\n\n752\n00:46:34,570 --> 00:46:37,740\nthen makes the backup based\noff of that snapshot.\n\n753\n00:46:37,740 --> 00:46:42,010\nWhereas if I'm doing an application\nbackup or a work load backup with say,\n\n754\n00:46:42,010 --> 00:46:46,050\nWindows Server Backup,\nthere could be some down time or\n\n755\n00:46:46,050 --> 00:46:51,040\nat the minimum some performance\ndegradation during that backup process.\n\n756\n00:46:51,040 --> 00:46:56,527\nWhereas with the SCDPM, because it\nmakes that snapshot real quick and\n\n757\n00:46:56,527 --> 00:47:00,061\nthen makes the backup\nbased on the snapshot,\n\n758\n00:47:00,061 --> 00:47:06,483\nhardly any performance degradation while\nthat backup process is going, right?\n\n759\n00:47:06,483 --> 00:47:10,495\nWe also have to think about\nour fault tolerant options.\n\n760\n00:47:10,495 --> 00:47:14,070\nI really kind of leading back to\nwhat I was just saying a minute ago.\n\n761\n00:47:15,760 --> 00:47:17,980\nWe can get carried away\nwith our consolidation,\n\n762\n00:47:17,980 --> 00:47:22,960\nwe can take it a little bit too far and\nwe can remove a lot of my fault\n\n763\n00:47:22,960 --> 00:47:26,830\ntolerance that I've worked so\nhard to make sure we had.\n\n764\n00:47:26,830 --> 00:47:31,040\nSo I still wanna make sure that I'm\nproviding some type of fault tolerance for\n\n765\n00:47:31,040 --> 00:47:32,130\nthese services.\n\n766\n00:47:32,130 --> 00:47:36,010\nAnd that might include network load\nbalancing, very common for our stateless\n\n767\n00:47:36,010 --> 00:47:39,690\napplications when I don't have to\nmaintain that connection with the client.\n\n768\n00:47:39,690 --> 00:47:46,348\nWeb servers are a typical thing we see\nwhen we talk about network load balancing.\n\n769\n00:47:46,348 --> 00:47:50,328\nSo that gives full tolerance for that web\nbased application that I'm providing.\n\n770\n00:47:50,328 --> 00:47:53,788\nOr we might do application\nspecific clustering.\n\n771\n00:47:53,788 --> 00:47:55,014\nA lot of applications,\n\n772\n00:47:55,014 --> 00:47:59,070\na lot of Microsoft apps have a built in\nclustering capability like SQL Server.\n\n773\n00:48:00,580 --> 00:48:04,370\nSo we can use that to provide\nthat [INAUDIBLE] more than one\n\n774\n00:48:04,370 --> 00:48:06,760\nSQL server clustered together.\n\n775\n00:48:06,760 --> 00:48:09,410\nOr we could do a host clustering, right.\n\n776\n00:48:09,410 --> 00:48:15,250\nIf the application itself doesn't support\nclustering or have its own mechanism for\n\n777\n00:48:15,250 --> 00:48:20,110\nclustering, then we can do our\nWindows Failover Cluster Service.\n\n778\n00:48:20,110 --> 00:48:23,950\nWe've seen that in some previous\nepisodes on another one of our tracks.\n\n779\n00:48:23,950 --> 00:48:28,970\nAnd we could create FLA over cluster and\n\n780\n00:48:28,970 --> 00:48:32,810\nthen install that service on\nthat cluster and provide that.\n\n781\n00:48:32,810 --> 00:48:34,300\nThe important thing is\nthat we thought about it.\n\n782\n00:48:34,300 --> 00:48:40,500\nAgain, we planned, we figured out what\nwe need to provide fault tolerance for,\n\n783\n00:48:40,500 --> 00:48:42,310\nand how we wanna go about doing it.\n\n784\n00:48:42,310 --> 00:48:45,540\nImportant that we think about these\nthings during the process we don't just\n\n785\n00:48:45,540 --> 00:48:49,760\nget started, and then go, shoot,\nI forgot to think about this.\n\n786\n00:48:49,760 --> 00:48:52,750\nSo, let's summarize that again.\n\n787\n00:48:52,750 --> 00:48:57,530\nDetermine your virtualization and\nscope, create your work load list,\n\n788\n00:48:57,530 --> 00:49:02,080\nplan your back up options,\nplan your fault tolerant\n\n789\n00:49:02,080 --> 00:49:07,220\noptions and then the last part is\nanalyzing the work load requirements.\n\n790\n00:49:07,220 --> 00:49:11,010\nSummarizing requirements to plan\nwhat capabilities are necessary.\n\n791\n00:49:12,280 --> 00:49:18,420\nWe're going to have to figure out how\nmany services can I consolidate, right.\n\n792\n00:49:18,420 --> 00:49:22,000\nThat physical host has to\nuse some resources, right.\n\n793\n00:49:22,000 --> 00:49:23,468\nWe've got to reserve some for that.\n\n794\n00:49:23,468 --> 00:49:27,535\nThen we're gonna create our\nvirtual server on top of that, and\n\n795\n00:49:27,535 --> 00:49:32,705\nwe've got to divide the remaining\nresources amongst those virtual servers,\n\n796\n00:49:32,705 --> 00:49:34,385\nand how much resources do I give?\n\n797\n00:49:34,385 --> 00:49:36,435\nHow much CPU do I give\nto this virtual server?\n\n798\n00:49:36,435 --> 00:49:38,605\nHow much memory do I need\nto give it access to?\n\n799\n00:49:39,630 --> 00:49:42,580\nWhat kind of hard disc\ncapabilities does it need?\n\n800\n00:49:42,580 --> 00:49:47,400\nDoes it need good, fast speed or\ncan a simple LAN on a SAN suffice or\n\n801\n00:49:47,400 --> 00:49:52,920\ndo I need to make sure\nthis is high speed and\n\n802\n00:49:52,920 --> 00:49:55,400\nso looking at that\ninformation is gonna help me.\n\n803\n00:49:55,400 --> 00:49:58,990\nDevelop the plan on how\nmany I can consolidate.\n\n804\n00:49:58,990 --> 00:50:01,040\nI think Don mentioned in\nour previous episode,\n\n805\n00:50:01,040 --> 00:50:04,750\nyou can find applications that'll\nplay along nicely with each other.\n\n806\n00:50:04,750 --> 00:50:09,460\nWhere this application happens to be\na very memory intensive application.\n\n807\n00:50:09,460 --> 00:50:12,750\nThis other application\nis very discontensive.\n\n808\n00:50:12,750 --> 00:50:16,190\nThey might play nicely together,\ncuz they're not competing for resources.\n\n809\n00:50:16,190 --> 00:50:19,327\nIf I've got two applications\nthat are both disk intensive,\n\n810\n00:50:19,327 --> 00:50:23,070\nthat's gonna cause some contention,\nright, for that disk IO.\n\n811\n00:50:23,070 --> 00:50:29,770\nAnd maybe I don't wanna put those guys\ntogether, I might wann split those up.\n\n812\n00:50:29,770 --> 00:50:34,322\nSome steps that we wanna go through when\nwe are talking about doing our migration,\n\n813\n00:50:34,322 --> 00:50:36,640\nall right.\n\n814\n00:50:36,640 --> 00:50:39,900\nTell you what,\nthat brings us up to our break time.\n\n815\n00:50:39,900 --> 00:50:42,530\nWhy don't we take a quick break.\n\n816\n00:50:42,530 --> 00:50:44,150\nWe'll go grab something to drink.\n\n817\n00:50:44,150 --> 00:50:45,250\nGet up, stretch the legs.\n\n818\n00:50:45,250 --> 00:50:46,700\nDo whatever we got to do.\n\n819\n00:50:46,700 --> 00:50:49,895\nI'll meet you back here in a few and\nwe'll continue on with our role migration.\n\n820\n00:50:49,895 --> 00:50:57,371\n[NOISE].\n\n821\n00:50:57,371 --> 00:50:59,167\nAll right, welcome back everybody.\n\n822\n00:50:59,167 --> 00:51:01,422\nI've got some things set up for\n\n823\n00:51:01,422 --> 00:51:06,170\nsome really cool demos on the second\nhalf of this episode here.\n\n824\n00:51:06,170 --> 00:51:09,330\nSo, sorry for that little extended\nbreak if you guys were watching live.\n\n825\n00:51:09,330 --> 00:51:13,360\nSo we left off talking about,\nwhere were we at?\n\n826\n00:51:13,360 --> 00:51:16,610\nWe're planning fault tolerance and\nanalyzing our workload requirements.\n\n827\n00:51:16,610 --> 00:51:19,960\nSome of the steps that we have to go\nthrough when we are getting ready for\n\n828\n00:51:19,960 --> 00:51:21,050\nour migration.\n\n829\n00:51:21,050 --> 00:51:25,680\nNext, the last thing on that\nparticular objective was going to be,\n\n830\n00:51:28,110 --> 00:51:32,830\nso we're here planned for capacity and\nresource optimization, all right.\n\n831\n00:51:32,830 --> 00:51:35,340\nPlanning for your capacity and\nresource optimization, and\n\n832\n00:51:35,340 --> 00:51:39,570\nthat's really something that we're\nprobably close to having the information\n\n833\n00:51:39,570 --> 00:51:42,570\nat this point to accomplish that\nwithout doing anything else.\n\n834\n00:51:42,570 --> 00:51:47,030\nBecause during our process, if we scroll\nback up and look at some of our steps,\n\n835\n00:51:47,030 --> 00:51:50,960\nwhen we created our workload list,\nthat's when we went out and\n\n836\n00:51:50,960 --> 00:51:53,890\nlooked at the servers that we had,\nand we looked at the applications and\n\n837\n00:51:53,890 --> 00:51:56,230\nthe workloads that those\nservers were providing.\n\n838\n00:51:56,230 --> 00:52:00,910\nAnd we, cuz we wanna decide how we're\ngoing to divide this up against\n\n839\n00:52:00,910 --> 00:52:02,140\nthe different virtual machines.\n\n840\n00:52:02,140 --> 00:52:04,120\nHow many virtual machines, how many hosts,\n\n841\n00:52:04,120 --> 00:52:06,000\nwhat roles can it combine and\nthings like that.\n\n842\n00:52:06,000 --> 00:52:07,270\nSo we ran something like MAP.\n\n843\n00:52:07,270 --> 00:52:11,550\nMy Microsoft Assessment and\nPlanning Toolkit.\n\n844\n00:52:11,550 --> 00:52:14,650\nSo we have that information already there.\n\n845\n00:52:14,650 --> 00:52:18,170\nThat's really the same that we're\ngonna use when we do our capacity and\n\n846\n00:52:18,170 --> 00:52:19,940\nresource optimization.\n\n847\n00:52:19,940 --> 00:52:21,690\nIt's the same concept.\n\n848\n00:52:21,690 --> 00:52:25,900\nWe're going to make sure\nthat we are the servers,\n\n849\n00:52:25,900 --> 00:52:29,030\nhave the capacity to\ncarry those workloads.\n\n850\n00:52:29,030 --> 00:52:34,100\nSo that we can provide the level of\nperformance that we want to our network.\n\n851\n00:52:34,100 --> 00:52:35,940\nAnd the resources as well.\n\n852\n00:52:35,940 --> 00:52:38,700\nOptimizing that,\nmaking sure that we've got enough ram,\n\n853\n00:52:38,700 --> 00:52:40,010\nthat we've got enough hard drive, right.\n\n854\n00:52:40,010 --> 00:52:43,900\nWe always talk about the four main\nsubsystems when we look at performance.\n\n855\n00:52:43,900 --> 00:52:46,440\nCPU, disk, memory and network.\n\n856\n00:52:46,440 --> 00:52:48,130\nThose are what we're talking about here,\n\n857\n00:52:48,130 --> 00:52:53,740\nmaking sure that we're placing these\nroles and services properly so\n\n858\n00:52:53,740 --> 00:52:57,720\nthat we can maintain that\nlevel of expected performance.\n\n859\n00:52:57,720 --> 00:53:00,860\nSo, we probably have the results already\nfrom map that we've done previously.\n\n860\n00:53:00,860 --> 00:53:05,530\nWe use that same information,\nconsolidate it, analyze it.\n\n861\n00:53:05,530 --> 00:53:09,780\nDivide it up amongst the different\nhosts that we are operating.\n\n862\n00:53:09,780 --> 00:53:12,080\nA couple of other things\nthat they call out or\n\n863\n00:53:12,080 --> 00:53:15,350\nthat they mention in there is gonna\nbe something called trim storage,\n\n864\n00:53:15,350 --> 00:53:18,090\nwhich just gives us the ability\nto reclaim unused space.\n\n865\n00:53:18,090 --> 00:53:22,780\nYou see this a lot with virtual machine\nmanager or virtual machines in general.\n\n866\n00:53:22,780 --> 00:53:24,850\nWhen we've got a lot of\nhard drives on a san or\n\n867\n00:53:24,850 --> 00:53:29,060\nsomething like that, we've allocated so\nmuch space to these hard drives,\n\n868\n00:53:29,060 --> 00:53:33,460\nnow we realized that server really\ndoesn't need that big of a virtual disc.\n\n869\n00:53:33,460 --> 00:53:35,710\nSo, we could drop that down download it.\n\n870\n00:53:35,710 --> 00:53:38,560\nReduce that in,\nthat's just going to free up space for\n\n871\n00:53:38,560 --> 00:53:42,960\nother virtual hard drives or whatever\nit is we plan to do with that space.\n\n872\n00:53:42,960 --> 00:53:44,050\nWe'll reclaim unused space.\n\n873\n00:53:44,050 --> 00:53:47,490\nThere is an application programming\ninterface that comes along with trim\n\n874\n00:53:47,490 --> 00:53:53,130\nstorage, so if we want to tweak\nan application, or write some\n\n875\n00:53:53,130 --> 00:53:57,720\ncode that an application when it's done\ncan free up space or something like that.\n\n876\n00:53:57,720 --> 00:54:00,180\nAnd it has, we can set up a schedule.\n\n877\n00:54:00,180 --> 00:54:03,320\nSo it'll run this optimization\npass periodically,\n\n878\n00:54:03,320 --> 00:54:07,460\nlook at our storage utilization,\ntrim anything back that it can.\n\n879\n00:54:07,460 --> 00:54:09,190\nAnother one is data de-duplication.\n\n880\n00:54:09,190 --> 00:54:11,640\nAnd I know we've talked about that\nin some other episodes as well, so\n\n881\n00:54:11,640 --> 00:54:13,210\nI'm not gonna dive into it.\n\n882\n00:54:13,210 --> 00:54:18,070\nRemember the big thing about data\nduplication is it divides my data up into\n\n883\n00:54:18,070 --> 00:54:22,480\nsmall chunks and then it compares those\nchunks, and it's looking for duplications,\n\n884\n00:54:22,480 --> 00:54:27,090\nand if there's duplicate chunks,\nit can eliminate the duplicate copies and\n\n885\n00:54:27,090 --> 00:54:31,325\njust keep one copy of that\nparticular Blocker chunk.\n\n886\n00:54:31,325 --> 00:54:36,280\nThereby freeing up a lot of disc space and\nI've looked at some of the Microsoft pages\n\n887\n00:54:36,280 --> 00:54:41,160\non this and some of these larger\norganizations with these large virtual\n\n888\n00:54:41,160 --> 00:54:45,919\nenvironments, they 50, 60,\n\n889\n00:54:45,919 --> 00:54:49,960\n70% reduction in disk utilization.\n\n890\n00:54:49,960 --> 00:54:53,580\nNot performance wise but\nspace utilization, right.\n\n891\n00:54:53,580 --> 00:54:54,430\nWhich is huge.\n\n892\n00:54:54,430 --> 00:54:59,380\nI mean, if I can reclaim\n50% of my storage space and\n\n893\n00:54:59,380 --> 00:55:03,190\nfree that up for something else,\nthat's huge, right.\n\n894\n00:55:03,190 --> 00:55:08,350\nAnd supposedly, no performance degradation\nwith that data duplication process.\n\n895\n00:55:09,660 --> 00:55:14,990\nAll right, so that pretty much wraps\nup our first part of our objectives.\n\n896\n00:55:14,990 --> 00:55:18,410\nLet me flip back over there,\nshow you guys where we are at.\n\n897\n00:55:18,410 --> 00:55:22,610\nSo that ends up the plan and\nimplement server upgrade and migration.\n\n898\n00:55:22,610 --> 00:55:27,610\nNow we're gonna head into plan and\ndeploy virtual manager services.\n\n899\n00:55:28,680 --> 00:55:33,310\nVMM or SCVMM,\nsystem center virtual machine manager, and\n\n900\n00:55:33,310 --> 00:55:35,260\nthey call it a few\nspecific things in here so\n\n901\n00:55:35,260 --> 00:55:38,660\nfantastic if you guys have had\na chance to play with it yet.\n\n902\n00:55:38,660 --> 00:55:41,470\nI love virtual machine manager.\n\n903\n00:55:43,330 --> 00:55:44,068\nIt's really cool.\n\n904\n00:55:44,068 --> 00:55:47,799\nIf you've gotta man your virtual\nenvironment, then this is the tool to use.\n\n905\n00:55:47,799 --> 00:55:52,902\nBut they specifically call out some\nthings like to plan and deploy profiles,\n\n906\n00:55:52,902 --> 00:55:58,167\nlike operating system profiles,\nHardware profiles, capability profiles,\n\n907\n00:55:58,167 --> 00:56:02,801\nand my application profiles,\nSQL profiles, so what I've done, and\n\n908\n00:56:02,801 --> 00:56:07,905\nthey also call out plan and management\nservices, scaling out, updating and\n\n909\n00:56:07,905 --> 00:56:12,540\nservicing services, configuring VMM,\nlibraries, services to non\n\n910\n00:56:12,540 --> 00:56:17,840\ntrusted domains and work groups,\nwe'll go over a few of those as well.\n\n911\n00:56:17,840 --> 00:56:20,160\nWhat I've done.\n\n912\n00:56:20,160 --> 00:56:21,510\nThere's a lot of setup involved.\n\n913\n00:56:21,510 --> 00:56:24,690\nI mean,\nVMM takes a little bit to get it set up.\n\n914\n00:56:24,690 --> 00:56:27,350\nRather than drag this show out.\n\n915\n00:56:27,350 --> 00:56:30,120\nHave you watch me go through\na bunch of wizards and\n\n916\n00:56:30,120 --> 00:56:34,460\nconsume all of our time that way,\nI'm using one of Tech Net's labs.\n\n917\n00:56:34,460 --> 00:56:37,830\nWhich you guys have access to,\nthe Tech Net virtual labs.\n\n918\n00:56:37,830 --> 00:56:38,760\nLet me use one of those.\n\n919\n00:56:38,760 --> 00:56:43,050\nAnd I picked one that really is\nbeyond what we're trying to do here.\n\n920\n00:56:43,050 --> 00:56:47,430\nBut it's a full blown VMM setup already so\nI can just open up some things and\n\n921\n00:56:47,430 --> 00:56:49,340\nshow them to you and\nwe can talk about them.\n\n922\n00:56:49,340 --> 00:56:51,090\nI figure that would be a little easier,\n\n923\n00:56:51,090 --> 00:56:54,740\nthat way we can focus on what\nwe're trying to study for here and\n\n924\n00:56:54,740 --> 00:57:00,610\nnot worry about installing SCVMM and\nprereqs and things like that, all right.\n\n925\n00:57:01,670 --> 00:57:05,010\nSo let me flip over to, if I can find,\n\n926\n00:57:05,010 --> 00:57:08,400\nagain I know we've talked about this in\na few different shows these are just our\n\n927\n00:57:08,400 --> 00:57:14,630\nTechNet Virtual Labs available to\nthe public very, very good labs.\n\n928\n00:57:14,630 --> 00:57:18,320\nLet me flip back over to\nthat little virtual machine.\n\n929\n00:57:20,355 --> 00:57:27,020\nHere's the set of instructions that\ncomes with this particular lab.\n\n930\n00:57:27,020 --> 00:57:30,210\nAnd if I scroll back up a little ways,\n\n931\n00:57:30,210 --> 00:57:35,370\nI want to show you the end result\nof what we are trying to do here.\n\n932\n00:57:35,370 --> 00:57:39,710\nThis particular one is focusing on\ndeploying a multi-tier service and\n\n933\n00:57:39,710 --> 00:57:44,680\nthrough this, we really get to see all the\ndifferent components that they call out in\n\n934\n00:57:44,680 --> 00:57:48,280\nthe objective for this particular exam.\n\n935\n00:57:48,280 --> 00:57:53,400\nWe go through some steps, importing\nour resources that we're gonna need.\n\n936\n00:57:53,400 --> 00:57:54,660\nLet me back up for a second.\n\n937\n00:57:54,660 --> 00:57:58,510\nLet's talk about what the heck\nthis multi-tier service is anyway.\n\n938\n00:57:58,510 --> 00:58:01,780\nWhen we deploy a virtual machine,\nDon mentioned this yesterday,\n\n939\n00:58:01,780 --> 00:58:05,480\nwe did when we were in our\nepisode the other day.\n\n940\n00:58:05,480 --> 00:58:11,770\nWe talked about the ability to deploy a\nservice not an individual virtual machine.\n\n941\n00:58:11,770 --> 00:58:12,370\nWe can.\n\n942\n00:58:12,370 --> 00:58:13,940\nWe can deploy virtual machines.\n\n943\n00:58:13,940 --> 00:58:18,050\nBut a lot of times, our applications\nare not running on a single machine.\n\n944\n00:58:18,050 --> 00:58:20,810\nRight?\nThey're a multi-tiered application.\n\n945\n00:58:20,810 --> 00:58:24,610\nI think, in our other episode we talked\nabout web applications are very common for\n\n946\n00:58:24,610 --> 00:58:28,370\nthis because your web server's\nkind of that front end.\n\n947\n00:58:28,370 --> 00:58:30,430\nThis is where people are connecting to.\n\n948\n00:58:30,430 --> 00:58:34,410\nIt's providing the interface that\nthey're dealing with your company.\n\n949\n00:58:34,410 --> 00:58:37,940\nWhether that's ordering product or\nwhatever the case may be.\n\n950\n00:58:37,940 --> 00:58:40,070\nBut that server's just a web server.\n\n951\n00:58:40,070 --> 00:58:45,360\nIt's just presenting, it's the\npresentation layer of our tiered service.\n\n952\n00:58:45,360 --> 00:58:50,300\nBehind that, could be one or\nmore tiers stacked up underneath there\n\n953\n00:58:50,300 --> 00:58:53,160\nthat are providing the information,\nlike a SQL server.\n\n954\n00:58:53,160 --> 00:58:57,270\nIf I go to that web page, and I see a\ncatalog of products that I can order, and\n\n955\n00:58:57,270 --> 00:59:01,810\nthere's descriptions, and pictures,\nand prices, and things like that,\n\n956\n00:59:01,810 --> 00:59:06,560\nthat's all coming from a SQL database,\nmost likely, or some type of database.\n\n957\n00:59:06,560 --> 00:59:10,120\nSo my web server is actually\nreaching back to another server\n\n958\n00:59:11,260 --> 00:59:13,150\nto pull that information.\n\n959\n00:59:13,150 --> 00:59:15,880\nAnd that's what they mean\nby multi-tiered service.\n\n960\n00:59:15,880 --> 00:59:19,330\nAnd what we can do within VMM\nis we can define all that.\n\n961\n00:59:19,330 --> 00:59:23,440\nWe can define the different tiers,\nwhat virtual machines are required.\n\n962\n00:59:23,440 --> 00:59:27,000\nLike, we've got our third tier depending\non which way you wanna go with\n\n963\n00:59:27,000 --> 00:59:28,370\nyour numbers.\n\n964\n00:59:28,370 --> 00:59:31,380\nYour outer tier where I got my web server,\n\n965\n00:59:31,380 --> 00:59:34,130\nwell that's a VMM that\nneeds to be running IIS.\n\n966\n00:59:34,130 --> 00:59:36,890\nIt needs a certain virtual\ndirectory setup, things like that.\n\n967\n00:59:36,890 --> 00:59:41,490\nMaybe we need ASP for\nthat webpage to function.\n\n968\n00:59:41,490 --> 00:59:43,670\nSo I got a virtual machine with that.\n\n969\n00:59:43,670 --> 00:59:48,250\nI got another virtual machine that's\ngonna be necessary to run the,\n\n970\n00:59:48,250 --> 00:59:52,340\nlike if it's a mid tier maybe that's where\nthe application actually chugs away,\n\n971\n00:59:52,340 --> 00:59:54,458\nthe ISS is just presenting it.\n\n972\n00:59:54,458 --> 00:59:58,290\nGot this mid-tier where\nthe application is being hosted and\n\n973\n00:59:58,290 --> 01:00:01,800\nthen I've got a back-tier\nwhere the database is hosted.\n\n974\n01:00:01,800 --> 01:00:04,530\nSo I need a SQL server for that part.\n\n975\n01:00:04,530 --> 01:00:07,980\nI need to create a database,\nthings like that.\n\n976\n01:00:07,980 --> 01:00:10,130\nI've got to connect them all to a network.\n\n977\n01:00:10,130 --> 01:00:14,320\nSo I've got a virtual network set up or\na virtual switch set in Hyper-V\n\n978\n01:00:14,320 --> 01:00:17,490\nthat these all need to be connected to so\nthey can talk to each other.\n\n979\n01:00:17,490 --> 01:00:19,710\nDoing that manually, I could do that.\n\n980\n01:00:19,710 --> 01:00:23,162\nI could whip up a virtual machine\none at a time, set those up.\n\n981\n01:00:23,162 --> 01:00:27,380\nA multi-tier service allows me\nto define all of this as a unit.\n\n982\n01:00:27,380 --> 01:00:30,950\nAnd then when I go to deploy it,\nI deploy it as a service, and\n\n983\n01:00:30,950 --> 01:00:34,130\nit knows what virtual machines I need for\nthose different tiers.\n\n984\n01:00:34,130 --> 01:00:38,560\nIt's all defined in my service\ntemplate I deploy it as a unit.\n\n985\n01:00:38,560 --> 01:00:41,720\nSo we'll have to import the resources\nthat are gonna be necessary for\n\n986\n01:00:41,720 --> 01:00:42,530\nthe different tiers.\n\n987\n01:00:42,530 --> 01:00:46,900\nThat might be hard drives, virtual hard\ndrive templates or something like that.\n\n988\n01:00:46,900 --> 01:00:51,820\nCreate an OS profile which defines my\noperating system and some of my operating\n\n989\n01:00:51,820 --> 01:00:55,100\nsystem settings, and I'll show\nyou all of this as we go through.\n\n990\n01:00:55,100 --> 01:00:57,160\nCreate a hardware profile.\n\n991\n01:00:57,160 --> 01:01:00,180\nHow much processor memory,\nthings like that.\n\n992\n01:01:00,180 --> 01:01:05,670\nWe've got our application profile that\nwe can create for the app itself.\n\n993\n01:01:05,670 --> 01:01:09,560\nThe VM template then for\nthe individual virtual machines,\n\n994\n01:01:09,560 --> 01:01:14,100\nwhich are gonna pull in the VM template\nreally defines, it's kinda layers, right?\n\n995\n01:01:14,100 --> 01:01:16,810\nSo we're gonna create our OS profile and\nour hardware profile.\n\n996\n01:01:16,810 --> 01:01:19,240\nThen we're gonna create a VM template.\n\n997\n01:01:19,240 --> 01:01:22,850\nWhich pulls in a particular OS profile or\nhardware profile and\n\n998\n01:01:22,850 --> 01:01:25,030\nties it into that VM template.\n\n999\n01:01:25,030 --> 01:01:28,670\nThen we go into our service template and\nwe pull in the VM templates.\n\n1000\n01:01:28,670 --> 01:01:31,430\nSo there's a layered process\nhere that we're setting up, so\n\n1001\n01:01:31,430 --> 01:01:35,030\nit makes it very scalable,\nvery easy to work with.\n\n1002\n01:01:35,030 --> 01:01:37,750\nAnd in the end,\nwe'll have something that looks like this,\n\n1003\n01:01:37,750 --> 01:01:40,790\nwe're gonna create this th service.\n\n1004\n01:01:40,790 --> 01:01:43,210\nAnd you can see the different\ntiers they have.\n\n1005\n01:01:43,210 --> 01:01:45,150\nThey've got a web tier out here.\n\n1006\n01:01:45,150 --> 01:01:47,410\nThey've got a SQL tier and\n\n1007\n01:01:47,410 --> 01:01:51,640\nthen they've got a mid-tier\nthat's running the application.\n\n1008\n01:01:51,640 --> 01:01:54,890\nSo in the end, that's what I'm\ngonna to be showing you here.\n\n1009\n01:01:55,970 --> 01:01:58,960\nSo let me flip over to\nthe actual lab machine.\n\n1010\n01:01:58,960 --> 01:02:00,810\nAnd as I said I did a lot\nof this ahead of time.\n\n1011\n01:02:00,810 --> 01:02:02,760\nJust so\nwe wouldn't have to sit here and wait.\n\n1012\n01:02:02,760 --> 01:02:05,970\nAnd watch me import resources and\ngo through this.\n\n1013\n01:02:05,970 --> 01:02:08,230\nBut I do want to show you the end result.\n\n1014\n01:02:08,230 --> 01:02:10,600\nAnd then we're going to do\nthe last step together.\n\n1015\n01:02:10,600 --> 01:02:14,150\nWe're going to go in and\nactually create that service template.\n\n1016\n01:02:14,150 --> 01:02:17,930\nSo I've already have\nsome guest OS profiles.\n\n1017\n01:02:17,930 --> 01:02:22,120\nI've got one, for example, right here for\nmy web server that I want to make,\n\n1018\n01:02:22,120 --> 01:02:22,688\nor my web VM.\n\n1019\n01:02:22,688 --> 01:02:28,240\nI'm just gonna pull up the properties so\nwe can take a peek at that, eventually.\n\n1020\n01:02:30,500 --> 01:02:31,600\nThere we go.\n\n1021\n01:02:31,600 --> 01:02:33,728\nAnd I can see that on my guest OS profile,\n\n1022\n01:02:33,728 --> 01:02:38,510\nI have defined that it's gonna be a 64\nbit edition of server 2012 standard.\n\n1023\n01:02:38,510 --> 01:02:39,630\nAnd just to show you, and\n\n1024\n01:02:39,630 --> 01:02:41,880\nI've got my different options\nthere that I can pick from.\n\n1025\n01:02:42,970 --> 01:02:46,200\nMy identity information,\nname of the machine,\n\n1026\n01:02:46,200 --> 01:02:50,660\nthe little pound symbol that's gonna\ngenerate an incremental number there.\n\n1027\n01:02:50,660 --> 01:02:54,790\nI can type in my admin, I can go ahead and\nset an admin password, a product key,\n\n1028\n01:02:54,790 --> 01:02:56,290\na time zone.\n\n1029\n01:02:56,290 --> 01:03:00,760\nI can install roles, look at this, I mean\nthis is straight out of my add roles and\n\n1030\n01:03:00,760 --> 01:03:02,170\nfeatures wizard.\n\n1031\n01:03:02,170 --> 01:03:05,890\nHere's my roles and I can choose\nwhat I want and as you can see for\n\n1032\n01:03:05,890 --> 01:03:10,570\nthis particular OS template,\nI've got Webserver IIS selected.\n\n1033\n01:03:13,080 --> 01:03:16,020\nI think that's all I've got on this one.\n\n1034\n01:03:16,020 --> 01:03:17,440\nFeatures as well.\n\n1035\n01:03:17,440 --> 01:03:18,930\nAs far as the networking goes,\n\n1036\n01:03:18,930 --> 01:03:22,680\nit's gonna be joined to\nthe Cantoosa.com domain in this case.\n\n1037\n01:03:22,680 --> 01:03:24,860\nIt's gonna use the credentials.\n\n1038\n01:03:24,860 --> 01:03:30,245\nThey created a special account for\nthis, domain admin is an account that's\n\n1039\n01:03:30,245 --> 01:03:35,479\ncreated that's gonna be actually\nperforming the domain joint process.\n\n1040\n01:03:35,479 --> 01:03:38,847\nIt could have an answer file or\n\n1041\n01:03:38,847 --> 01:03:44,658\na run 1's at the end of\nthe installation process.\n\n1042\n01:03:44,658 --> 01:03:47,133\nDependencies in this case\nis just mess to make sure,\n\n1043\n01:03:47,133 --> 01:03:48,838\nbecause I specified this account.\n\n1044\n01:03:48,838 --> 01:03:50,469\nThat account that needs to be available,\nright.\n\n1045\n01:03:50,469 --> 01:03:52,529\nIf it couldn't find that\naccount this would fail.\n\n1046\n01:03:52,529 --> 01:03:55,700\nSo that's an example of an OS profile,\nand there's different ones.\n\n1047\n01:03:55,700 --> 01:04:01,650\nHere's one for SQL, pretty much the same.\n\n1048\n01:04:01,650 --> 01:04:06,251\nIt's not gonna have IIS installed but\n64-bit, 2012.\n\n1049\n01:04:06,251 --> 01:04:12,168\nYou can see, no roles or features but\nit is going to be joined to the domain.\n\n1050\n01:04:12,168 --> 01:04:15,990\nAnd there's one for my mid tier as well\nbut you've seen one, we are good enough.\n\n1051\n01:04:15,990 --> 01:04:21,651\nThen I've got my hardware profiles,\nsame kind of concept,\n\n1052\n01:04:21,651 --> 01:04:26,876\na place that I can define what\nthis particular VM needs.\n\n1053\n01:04:26,876 --> 01:04:31,390\nSo I can see one processor\n512 megs of RAM.\n\n1054\n01:04:31,390 --> 01:04:34,376\nI can do my startup memory,\nthings like that.\n\n1055\n01:04:34,376 --> 01:04:38,460\nThis is the same stuff we go\nthrough when we make a new VM.\n\n1056\n01:04:38,460 --> 01:04:42,814\nHere we're just pre-defining it, storing\nit in a template for re-usability, so\n\n1057\n01:04:42,814 --> 01:04:45,940\nthat I don't have to do this every time,\nall right?\n\n1058\n01:04:45,940 --> 01:04:47,740\nWhat hard drives are attached to it?\n\n1059\n01:04:48,910 --> 01:04:50,960\nWhat network it's gonna be connected to?\n\n1060\n01:04:50,960 --> 01:04:56,043\nYou can see it's connected to\na network called Contoso-VMN.\n\n1061\n01:04:56,043 --> 01:04:59,210\nSame thing as if I were to pull up the\nother ones, you'd see the same thing for\n\n1062\n01:04:59,210 --> 01:05:00,610\nthese other hardware profiles.\n\n1063\n01:05:02,410 --> 01:05:09,220\nCapability profiles, these are, they're\n\n1064\n01:05:09,220 --> 01:05:13,150\nways to set limits, or\nranges, if you will.\n\n1065\n01:05:13,150 --> 01:05:16,080\nThey're very similar\nto a hardware profile.\n\n1066\n01:05:16,080 --> 01:05:20,550\nHardware profile is very specific,\nit's saying one processor, or\n\n1067\n01:05:20,550 --> 01:05:24,610\n4096 MB of RAM, or\nwhatever the case may be.\n\n1068\n01:05:25,740 --> 01:05:30,045\nCapability profile is\nmore of a ranged profile,\n\n1069\n01:05:30,045 --> 01:05:34,460\nyou can see here,\nprocessors 1 to 64, right?\n\n1070\n01:05:34,460 --> 01:05:38,707\nThe ones they have here are predefined,\nI didn't make these, these are just some\n\n1071\n01:05:38,707 --> 01:05:43,540\npredefined profiles that come with VMM,\nfor different virtualization platforms.\n\n1072\n01:05:43,540 --> 01:05:47,560\nESX for example has different\nlimitation than Hyper-V.\n\n1073\n01:05:47,560 --> 01:05:52,190\nSo these are profiles that I could apply\nto make sure that any machines I create\n\n1074\n01:05:52,190 --> 01:05:56,460\ndon't go out of those ranges,\ndon't cause a problem with the Hyper-V, or\n\n1075\n01:05:56,460 --> 01:05:59,960\nthe virtualization platform of choice.\n\n1076\n01:05:59,960 --> 01:06:02,842\nI also have a SQL Server\nprofile down here.\n\n1077\n01:06:02,842 --> 01:06:06,940\nWe're gonna have a SQL Server for\nthat back end, for my data tier.\n\n1078\n01:06:06,940 --> 01:06:11,260\nAnd here's the profile that I'm gonna\nend up using to configure SQL Server.\n\n1079\n01:06:11,260 --> 01:06:15,482\nI can see my configuration is gonna\nbe done as Contoso Administrator.\n\n1080\n01:06:15,482 --> 01:06:17,650\nWe're gonna set it up to\nuse Windows authentication.\n\n1081\n01:06:19,390 --> 01:06:23,210\nAnd then under my service accounts I'm\ngonna define the different accounts that\n\n1082\n01:06:23,210 --> 01:06:27,050\nare gonna be used for\nthe different services that SQL needs.\n\n1083\n01:06:27,050 --> 01:06:29,760\nSome of you have probably\nsetup a SQL Server before.\n\n1084\n01:06:29,760 --> 01:06:33,168\nThis is the same stuff we see when\nwe setup that SQL Server, right?\n\n1085\n01:06:33,168 --> 01:06:36,340\nWhen we install SQL we have to\ndefine the different services,\n\n1086\n01:06:36,340 --> 01:06:39,040\nwhat accounts they're gonna run under.\n\n1087\n01:06:39,040 --> 01:06:43,620\nSo here I'm just doing it all in\na template, again, for re-usability, for\n\n1088\n01:06:43,620 --> 01:06:47,450\nconsistency across different machines,\nall right.\n\n1089\n01:06:47,450 --> 01:06:53,362\nHere I can see where it's gonna\ncreate the instance name,\n\n1090\n01:06:53,362 --> 01:06:57,835\nmssqlserver, instance ID, sqlsysprep.\n\n1091\n01:06:57,835 --> 01:07:03,751\nSo again, just a template that\nwe can use for re-usability.\n\n1092\n01:07:03,751 --> 01:07:08,731\nSo I've got all these profiles set up,\nlet's see what else\n\n1093\n01:07:08,731 --> 01:07:13,626\nI want to show you why we are in here,\nI got my VM templates.\n\n1094\n01:07:13,626 --> 01:07:18,126\nSo once I've created my OS profile,\nmy hardware profile,\n\n1095\n01:07:18,126 --> 01:07:23,527\nif I need a SQL Server profile, maybe,\nan app compatibility profile or\n\n1096\n01:07:23,527 --> 01:07:28,700\nan application profile, then,\nI can create my VM templates.\n\n1097\n01:07:28,700 --> 01:07:30,630\nAnd if I pull up,\nlet's pull up the web one here.\n\n1098\n01:07:33,430 --> 01:07:37,650\nSo here I've got my TH Web properties,\nso this is one of my VM templates.\n\n1099\n01:07:37,650 --> 01:07:42,600\nAnd I can see as I go down in here,\nmy hardware configuration is pulling from\n\n1100\n01:07:42,600 --> 01:07:46,780\nthis one that's called tinydisk.vhd,\nit's just a small hard drive.\n\n1101\n01:07:48,250 --> 01:07:52,230\nIf I go to my, and you can see my\nhardware profiles being applied,\n\n1102\n01:07:52,230 --> 01:07:55,410\nI've got one processor 512 megs of RAM.\n\n1103\n01:07:55,410 --> 01:07:58,418\nI can see where my disk\nis attached down here.\n\n1104\n01:07:58,418 --> 01:08:03,343\nI've got my OS configuration and\nall this information is being pulled,\n\n1105\n01:08:03,343 --> 01:08:09,820\nthere's that con web that's being pulled\nfrom that template that I created earlier.\n\n1106\n01:08:09,820 --> 01:08:13,850\nChance to put in my application\nprofile if I have one of those,\n\n1107\n01:08:13,850 --> 01:08:17,100\na SQL Server profile,\nthis is my web server.\n\n1108\n01:08:17,100 --> 01:08:21,090\nSo you can see none, no SQL Server\nconfiguration settings in this case.\n\n1109\n01:08:21,090 --> 01:08:25,490\nIf I flip over to my SQL Server VM\ntemplate, and I go to my\n\n1110\n01:08:25,490 --> 01:08:30,970\nSQL Server configuration, now I can see\nthat template that I've brought in.\n\n1111\n01:08:30,970 --> 01:08:33,580\nAnd a lot of these will\nlet you create these.\n\n1112\n01:08:33,580 --> 01:08:38,157\nIf I hadn't created that SQL profile\nahead of time, I could have gone into my\n\n1113\n01:08:38,157 --> 01:08:43,093\nVM templates, clicked on Create Virtual\nMachine Template or right-clicked and\n\n1114\n01:08:43,093 --> 01:08:47,811\nchose Create New Virtual Machine Template,\nand then I can come into here, and\n\n1115\n01:08:47,811 --> 01:08:49,835\nI could create a new deployment.\n\n1116\n01:08:49,835 --> 01:08:52,293\nSo you can see that I could\nadd another deployment option.\n\n1117\n01:08:52,293 --> 01:08:55,470\nOr if there wasn't one already I\ncould go ahead and create one.\n\n1118\n01:08:55,470 --> 01:08:56,934\nSo a lot of these you can do and\n\n1119\n01:08:56,934 --> 01:08:59,751\nthere's more than one ways\nto go about creating them.\n\n1120\n01:08:59,751 --> 01:09:04,418\nI'm a little OCD about some of that\nstuff so I kind of like to go logically.\n\n1121\n01:09:04,418 --> 01:09:08,039\nTo me, it makes more sense if\nI create my hardware profiles,\n\n1122\n01:09:08,039 --> 01:09:10,740\nmy operating system profiles, first.\n\n1123\n01:09:10,740 --> 01:09:13,330\nThen I go and\ncombine those into my VM templates.\n\n1124\n01:09:13,330 --> 01:09:15,000\nMaybe you'd rather work backwards.\n\n1125\n01:09:15,000 --> 01:09:17,600\nCreate your template, give it a name, and\n\n1126\n01:09:17,600 --> 01:09:20,760\nthen try to figure out what\nOS requirements you have, or\n\n1127\n01:09:20,760 --> 01:09:24,130\nwhat hardware requirements for\nthat particular VM template.\n\n1128\n01:09:24,130 --> 01:09:27,670\nSo now I've got all my VM templates,\nI made three.\n\n1129\n01:09:27,670 --> 01:09:30,710\nI made one for\nthat web server that's gonna be out front.\n\n1130\n01:09:30,710 --> 01:09:34,650\nRemember, my OS profile is\ngoing to install IIS on that.\n\n1131\n01:09:34,650 --> 01:09:38,730\nI've got my mid-tier that's\ngonna host the application.\n\n1132\n01:09:38,730 --> 01:09:39,810\nI didn't show you that one, but\n\n1133\n01:09:39,810 --> 01:09:43,580\nthere is an application profile that\nthat one is gonna be pulling in.\n\n1134\n01:09:43,580 --> 01:09:49,090\nIt's also going to be installing\nASP.NET or ASP on that particular one.\n\n1135\n01:09:49,090 --> 01:09:51,800\nAnd then I've got my\nSQL Server VM template.\n\n1136\n01:09:51,800 --> 01:09:56,090\nThis is where we're going to, or\nthis is the SQL Server that I set up.\n\n1137\n01:09:56,090 --> 01:10:00,630\nIt's pulling in that OS profile for\nmy SQL Server.\n\n1138\n01:10:00,630 --> 01:10:04,520\nMaybe it needs more memory, it definitely\nneeds some good hard drive access.\n\n1139\n01:10:06,180 --> 01:10:11,560\nGot my SQL Server profile that\nI've included in that VM template.\n\n1140\n01:10:11,560 --> 01:10:13,470\nSo I could deploy these as is, right?\n\n1141\n01:10:13,470 --> 01:10:16,470\nI could come over here right now,\nand I could go ahead and\n\n1142\n01:10:16,470 --> 01:10:20,110\ndeploy out some of these\nvirtual machines manually.\n\n1143\n01:10:20,110 --> 01:10:23,740\nBut as I said earlier,\nI'd much rather do this as a unit,\n\n1144\n01:10:23,740 --> 01:10:26,640\nbecause I need all three\nto set up this service.\n\n1145\n01:10:26,640 --> 01:10:29,910\nI need my IIS server,\nI need my application server,\n\n1146\n01:10:29,910 --> 01:10:34,010\nmy mid-tier, and\nI need my data tier, my SQL Server.\n\n1147\n01:10:34,010 --> 01:10:36,930\nOne doesn't do any good without the other.\n\n1148\n01:10:36,930 --> 01:10:40,380\nSo why not put these all together and\ngo ahead and\n\n1149\n01:10:40,380 --> 01:10:45,070\nset that up, and\nthen deploy that out as a unit, all right.\n\n1150\n01:10:45,070 --> 01:10:46,810\nSo that is what we're gonna do but\n\n1151\n01:10:46,810 --> 01:10:49,600\nI'm gonna do a little bit of\na cliff hanger on you guys.\n\n1152\n01:10:49,600 --> 01:10:54,350\nIt's coming up right on break, so\nnow that you've seen a lot of the pieces,\n\n1153\n01:10:54,350 --> 01:10:56,400\nwe've talked about the different profiles.\n\n1154\n01:10:56,400 --> 01:11:00,050\nThe OS profile, the hardware\nprofile the application profile,\n\n1155\n01:11:00,050 --> 01:11:04,550\nthe capability profile, the SQL Server\nprofile, we've seen the VM templates,\n\n1156\n01:11:04,550 --> 01:11:06,450\nwhere I start bringing those together.\n\n1157\n01:11:06,450 --> 01:11:09,530\nWhen we come back from break,\nI'm gonna tie it all together, and\n\n1158\n01:11:09,530 --> 01:11:11,760\nwe're gonna make that\nnew service template.\n\n1159\n01:11:11,760 --> 01:11:14,418\nSo you guys stay tuned, and\nI'll see you back here in a few.\n\n1160\n01:11:14,418 --> 01:11:22,168\n[SOUND].\n\n1161\n01:11:22,168 --> 01:11:24,490\nAll right, welcome back ladies and\ngentlemen.\n\n1162\n01:11:24,490 --> 01:11:28,555\nWe left off setting up\nsome profiles with in VMM.\n\n1163\n01:11:28,555 --> 01:11:31,470\nSome operating system profiles, hardware\nprofiles, I won't list them all again,\n\n1164\n01:11:31,470 --> 01:11:34,320\nI know you guys are like,\nplease don't go through that list again.\n\n1165\n01:11:34,320 --> 01:11:35,370\nYou know what they were.\n\n1166\n01:11:35,370 --> 01:11:37,990\nBut we got all of our profiles set up.\n\n1167\n01:11:37,990 --> 01:11:42,310\nAnd then we created our VM templates,\nwhich incorporated those OS profiles and\n\n1168\n01:11:42,310 --> 01:11:43,920\nhardware profiles.\n\n1169\n01:11:43,920 --> 01:11:47,419\nThe last thing I want to\ndo is tie it all together.\n\n1170\n01:11:47,419 --> 01:11:52,359\nNow I want to make this service\ntemplate that's gonna define what VMs\n\n1171\n01:11:52,359 --> 01:11:53,558\nare necessary.\n\n1172\n01:11:53,558 --> 01:11:56,538\nFor this particular application or\nservice.\n\n1173\n01:11:56,538 --> 01:11:58,800\nSo all I'm gonna do is I'm\ngonna come up here to service.\n\n1174\n01:11:58,800 --> 01:12:02,360\nI'm into my library workspace.\n\n1175\n01:12:02,360 --> 01:12:05,040\nAnd at the top I'm gonna\nclick on Service Templates.\n\n1176\n01:12:06,510 --> 01:12:09,680\nAnd then I just going to click,\ncreate service template.\n\n1177\n01:12:09,680 --> 01:12:12,930\nYou guys know I could right click\ncreate service template as well,\n\n1178\n01:12:12,930 --> 01:12:14,070\nwhich ever way you want to go.\n\n1179\n01:12:14,070 --> 01:12:16,320\nIt's going to launch the same wizard.\n\n1180\n01:12:16,320 --> 01:12:18,930\nThe first thing I'm going to\ndo is give this guy a name,\n\n1181\n01:12:18,930 --> 01:12:23,090\nI'm just going to call it TH app or\nsomething like that.\n\n1182\n01:12:24,960 --> 01:12:26,914\nThen for\nthe release I'm just going to put 1.0.\n\n1183\n01:12:28,220 --> 01:12:30,500\nThen they give me some choices here.\n\n1184\n01:12:31,930 --> 01:12:35,480\nWindows that I cannot\nresize drive me crazy.\n\n1185\n01:12:35,480 --> 01:12:39,720\nAs you can see I can start out\nwith a blank service template.\n\n1186\n01:12:39,720 --> 01:12:44,220\nThey've got a layout for a single machine,\na two tier application, and\n\n1187\n01:12:44,220 --> 01:12:47,890\nthe one that I'm gonna do is gonna\nbe this three tier application.\n\n1188\n01:12:47,890 --> 01:12:49,680\nAll I'm going to do is select that.\n\n1189\n01:12:49,680 --> 01:12:51,730\nAnd as everything, I don't even\nknow if I need to mention this.\n\n1190\n01:12:51,730 --> 01:12:55,580\nI'm sure you've seen it a few times by now\nif you've watched many of our episodes.\n\n1191\n01:12:55,580 --> 01:13:00,890\nJust about every wizard we go through\nnowadays has a view script button.\n\n1192\n01:13:00,890 --> 01:13:04,130\nSo keep that in mind if you want to\nlook at your power shell scripts,\n\n1193\n01:13:04,130 --> 01:13:07,420\nyour power sell commands that are going\nto be necessary to do what this wizard is\n\n1194\n01:13:07,420 --> 01:13:09,050\ndoing, I can come in here.\n\n1195\n01:13:09,050 --> 01:13:11,150\nSo I picked a three tier application.\n\n1196\n01:13:11,150 --> 01:13:15,093\nSo I can see they're storing\nthis Get-SCSeviceTemplate and\n\n1197\n01:13:15,093 --> 01:13:18,139\nthe name Three Tier Application and\nvariable.\n\n1198\n01:13:18,139 --> 01:13:21,882\nAnd then they're calling\nthat New-SCServiceTemplate,\n\n1199\n01:13:21,882 --> 01:13:25,550\nName TH-App Release 1.0\nServiceTemplate pattern and\n\n1200\n01:13:25,550 --> 01:13:29,610\nthen that's gonna be\nthe Three Tier Application there.\n\n1201\n01:13:29,610 --> 01:13:30,600\nSo just a little FYI.\n\n1202\n01:13:30,600 --> 01:13:34,350\nYou guys know you can go in there and\nlook at your PowerShell.\n\n1203\n01:13:34,350 --> 01:13:35,630\nAll right, so I've got my name.\n\n1204\n01:13:35,630 --> 01:13:37,860\nI've got my release for\nthis particular one.\n\n1205\n01:13:37,860 --> 01:13:40,770\nGot my three tier\napplication layout selected.\n\n1206\n01:13:40,770 --> 01:13:47,890\nI click OK, and\nit's gonna create this workspace,\n\n1207\n01:13:47,890 --> 01:13:53,500\nis really what I like to think of it as\nand I can see that there's three tiers.\n\n1208\n01:13:53,500 --> 01:13:54,480\nSurprise, surprise.\n\n1209\n01:13:54,480 --> 01:13:57,340\nSince I choose three tier application.\n\n1210\n01:13:57,340 --> 01:14:02,490\nSo up at the top, I've got my TH app,\nwith my release zero or at least 1.0.\n\n1211\n01:14:02,490 --> 01:14:04,380\nThen, I've got my different tiers here.\n\n1212\n01:14:04,380 --> 01:14:05,380\nAll I have to do.\n\n1213\n01:14:05,380 --> 01:14:09,860\nYou'll notice over here on the left\nthat it's laid out all the existing VM\n\n1214\n01:14:09,860 --> 01:14:11,200\ntemplates that I have available.\n\n1215\n01:14:11,200 --> 01:14:14,650\nThe ones that we've created\nin our previous segment.\n\n1216\n01:14:14,650 --> 01:14:15,820\nNow, I just start dropping.\n\n1217\n01:14:15,820 --> 01:14:21,310\nI just start dragging and dropping these\nguys right out onto my service template.\n\n1218\n01:14:21,310 --> 01:14:23,940\nThis is a separate tool, by the way,\nI don't know if you've noticed that.\n\n1219\n01:14:23,940 --> 01:14:28,030\nWhen I clicked that Create Service\nTemplate, it opened up a separate tool\n\n1220\n01:14:28,030 --> 01:14:31,880\ncalled the Virtual Machine Manager\nService Template Designer.\n\n1221\n01:14:33,722 --> 01:14:37,060\nAll right, so\nI'm gonna take Mister SQL here, and\n\n1222\n01:14:37,060 --> 01:14:40,820\nI'm gonna drop him on that first tier.\n\n1223\n01:14:40,820 --> 01:14:41,970\nWe want to drop him right there.\n\n1224\n01:14:41,970 --> 01:14:44,220\nJust drag and drop it right out there.\n\n1225\n01:14:44,220 --> 01:14:47,560\nYou will see that all\nthe information from that template\n\n1226\n01:14:47,560 --> 01:14:50,200\nis now being displayed in here.\n\n1227\n01:14:50,200 --> 01:14:53,190\nI've got my, and I'm gonna drop\nthis down for just a second.\n\n1228\n01:14:54,850 --> 01:14:56,460\nYou can rearrange this stuff.\n\n1229\n01:14:56,460 --> 01:14:58,340\nYou can start dragging\nthese things around,\n\n1230\n01:14:58,340 --> 01:15:00,320\nkind of make them, kind of like VIZIO.\n\n1231\n01:15:00,320 --> 01:15:03,070\nLike I can move these as I need to so\nI can see things.\n\n1232\n01:15:03,070 --> 01:15:06,120\nSo here it's got my\nTHSQ0 machine tier one.\n\n1233\n01:15:06,120 --> 01:15:07,960\nGot some information.\n\n1234\n01:15:07,960 --> 01:15:11,160\nIf I pull these properties back up\nagain it really restricts my view.\n\n1235\n01:15:11,160 --> 01:15:14,676\nMy resolution has to be\na little low to display.\n\n1236\n01:15:14,676 --> 01:15:21,350\nThrough our iVGA, so pardon me for that.\n\n1237\n01:15:21,350 --> 01:15:26,010\nAs I click on this,\nI can see my properties down here.\n\n1238\n01:15:26,010 --> 01:15:30,740\nSo if I needed to change anything\nthis shows me the more commonly\n\n1239\n01:15:30,740 --> 01:15:33,410\nused properties when I\nclick on these guys.\n\n1240\n01:15:33,410 --> 01:15:36,530\nThere's also a View All Properties\nthat I can go to.\n\n1241\n01:15:36,530 --> 01:15:42,630\nIf I click that, it's gonna come up and\ngive me some additional options.\n\n1242\n01:15:42,630 --> 01:15:43,930\nBut I can use more detail.\n\n1243\n01:15:43,930 --> 01:15:46,890\nI can go back into my hardware\nconfiguration if I need\n\n1244\n01:15:46,890 --> 01:15:48,340\nto tweak anything there.\n\n1245\n01:15:48,340 --> 01:15:50,090\nMaybe I made a template, but for\n\n1246\n01:15:50,090 --> 01:15:53,390\nthis particular service I need\njust a little bit more memory.\n\n1247\n01:15:53,390 --> 01:15:56,850\nOr I need another hard drive,\nor another network adapter.\n\n1248\n01:15:56,850 --> 01:16:00,660\nSo I can come in here and I can tweak it\nwithout modifying the actual template.\n\n1249\n01:16:02,300 --> 01:16:06,330\nSo just wanted to give\nyou guys a look at that.\n\n1250\n01:16:06,330 --> 01:16:07,150\nAnd this right here,\n\n1251\n01:16:07,150 --> 01:16:10,460\nI want to point this out because\nthey call this out as an objective.\n\n1252\n01:16:10,460 --> 01:16:11,560\nI think they say.\n\n1253\n01:16:13,470 --> 01:16:18,430\nPlan to manage services including scaling\nout, updating and servicing services.\n\n1254\n01:16:18,430 --> 01:16:20,620\nAnd so it's just a check mark, right?\n\n1255\n01:16:20,620 --> 01:16:25,090\nBut what they mean is this\nmachine tier can be scaled out.\n\n1256\n01:16:25,090 --> 01:16:30,280\nWhat if we get to the point where,\nthis is the SQL tier, my data tier.\n\n1257\n01:16:30,280 --> 01:16:34,320\nBut maybe on that web tier,\nI start out with a single virtual machine.\n\n1258\n01:16:34,320 --> 01:16:35,970\nThat's hosting that website.\n\n1259\n01:16:35,970 --> 01:16:40,670\nBut as my company grows,\nas we become more popular or whatever,\n\n1260\n01:16:40,670 --> 01:16:45,060\nthat one single web server is not enough\nfor the workload that it's under.\n\n1261\n01:16:45,060 --> 01:16:49,650\nI can come back in here and add another\nmachine to that particular tier.\n\n1262\n01:16:49,650 --> 01:16:52,580\nAdd a second web server,\nadd a third web server.\n\n1263\n01:16:52,580 --> 01:16:54,166\nIf that is checked.\n\n1264\n01:16:54,166 --> 01:16:59,560\nIf I dont' check that, I will not be\nable to scale out that particular tier.\n\n1265\n01:16:59,560 --> 01:17:02,700\nAnd you might want to on some of them,\nprevent somebody from adding a second or\n\n1266\n01:17:02,700 --> 01:17:05,180\nthird SQL server to that particular tier.\n\n1267\n01:17:05,180 --> 01:17:08,890\nSo maybe I choose to uncheck that so\nthat it can't be scaled up.\n\n1268\n01:17:08,890 --> 01:17:11,770\nI can also define a minimum and\nmaximum, so\n\n1269\n01:17:11,770 --> 01:17:17,360\nit can be scaled out to a maximum of\nfive VMs in this particular case.\n\n1270\n01:17:18,520 --> 01:17:20,290\nAll right?\n\n1271\n01:17:20,290 --> 01:17:21,690\nNow I was gonna show you, but\n\n1272\n01:17:21,690 --> 01:17:25,380\nwhen I opened those properties,\nit had to save everything.\n\n1273\n01:17:25,380 --> 01:17:29,730\nSo you'll see that my little red\nexclamation point went away.\n\n1274\n01:17:29,730 --> 01:17:32,750\nBut I'm gonna show you what I mean\nhere when I add my second VM.\n\n1275\n01:17:32,750 --> 01:17:36,440\nSo I'm gonna grab my mid-tier, all right?\n\n1276\n01:17:36,440 --> 01:17:38,540\nAnd I'm going to drag him\nover to the second tier.\n\n1277\n01:17:39,670 --> 01:17:40,870\nI'm gonna drop it on there.\n\n1278\n01:17:40,870 --> 01:17:45,390\nNotice I still have this red\nexclamation point sitting there.\n\n1279\n01:17:45,390 --> 01:17:48,030\nIt's not telling me\nthat there's a problem.\n\n1280\n01:17:48,030 --> 01:17:52,570\nBut it hasn't really gone through and\nverified, did I goof something up?\n\n1281\n01:17:52,570 --> 01:17:54,250\nDid I not assign a network adapter?\n\n1282\n01:17:54,250 --> 01:17:55,420\nSomething like that.\n\n1283\n01:17:55,420 --> 01:17:57,560\nSo, it's telling me that\nit needs to be checked.\n\n1284\n01:17:57,560 --> 01:18:02,200\nThere is a Save and Validate\nbutton over here that I can click.\n\n1285\n01:18:02,200 --> 01:18:05,080\nIt's going to go through and\nlook at what I've done so far.\n\n1286\n01:18:05,080 --> 01:18:08,560\nAnd now you can see my\nexclamation point is gone.\n\n1287\n01:18:08,560 --> 01:18:12,100\nI don't have to run that for\neach one that I'm dragging out.\n\n1288\n01:18:12,100 --> 01:18:15,410\nI could have drug them all out and\nthen just run it at the end.\n\n1289\n01:18:15,410 --> 01:18:20,390\nOr I could run it for each one as I go,\nit's whatever works best for you.\n\n1290\n01:18:20,390 --> 01:18:22,850\nAnd then my last one is gonna be Mr Web.\n\n1291\n01:18:22,850 --> 01:18:26,510\nI'll drag him out and drop him there.\n\n1292\n01:18:26,510 --> 01:18:29,290\nAnd I'm going to reduce\nthis down again just cause\n\n1293\n01:18:29,290 --> 01:18:34,050\nmy, sometimes they call me a little OCD.\n\n1294\n01:18:34,050 --> 01:18:38,940\nI'm going to move some of this around and\nfor me really has no bearing\n\n1295\n01:18:38,940 --> 01:18:43,740\non the end result of this application but\nI kinda like to [LAUGH] organize these\n\n1296\n01:18:43,740 --> 01:18:47,510\nguys a little bit different I'm going to\nput my web tier up there in the front.\n\n1297\n01:18:47,510 --> 01:18:51,620\nMy mid tier in the middle, and\nmy SQL back here on the back.\n\n1298\n01:18:53,020 --> 01:18:56,410\nAnd then get those network adapters\nput back into the right place.\n\n1299\n01:18:58,620 --> 01:19:02,330\nSo again, not really, oops,\nnot really have anything to do with\n\n1300\n01:19:02,330 --> 01:19:06,260\nthe functionality, but, logically when\nI'm looking at this, a little bit easier.\n\n1301\n01:19:06,260 --> 01:19:09,080\nSo very cool that I can move this stuff\naround, drag it around as I need.\n\n1302\n01:19:09,080 --> 01:19:12,910\nSo now that I've got everything out there\nI'm just going to save and validate.\n\n1303\n01:19:16,190 --> 01:19:19,130\nAnd now I have my service template.\n\n1304\n01:19:19,130 --> 01:19:20,250\nSo everything validates.\n\n1305\n01:19:20,250 --> 01:19:22,030\nEverything checks out.\n\n1306\n01:19:22,030 --> 01:19:24,540\nAgain just a couple things I want\nto point out while we're in here.\n\n1307\n01:19:24,540 --> 01:19:26,970\nEach one of these has properties\nassociated with it so\n\n1308\n01:19:26,970 --> 01:19:28,910\nas you click on these different ones.\n\n1309\n01:19:28,910 --> 01:19:30,260\nI can see properties.\n\n1310\n01:19:30,260 --> 01:19:32,170\nLike for my network adapter.\n\n1311\n01:19:32,170 --> 01:19:35,540\nIt's set to a dynamic,\nmaybe I want to do a static.\n\n1312\n01:19:35,540 --> 01:19:38,000\nI can create a static pool within VMM.\n\n1313\n01:19:38,000 --> 01:19:41,080\nAnd it can pull an IP address from there,\nfor example.\n\n1314\n01:19:41,080 --> 01:19:42,650\nI'm just going to leave it on dynamic.\n\n1315\n01:19:42,650 --> 01:19:45,010\nMAC address, I want it to be static.\n\n1316\n01:19:45,010 --> 01:19:46,348\nRequired bandwidth.\n\n1317\n01:19:46,348 --> 01:19:51,089\nIf I come up here, I can see properties\nagain for these different tiers.\n\n1318\n01:19:51,089 --> 01:19:53,349\nThere's my mid tier.\n\n1319\n01:19:53,349 --> 01:19:57,940\nSecond computer tier for this particular\nservice, there's some of those properties.\n\n1320\n01:19:57,940 --> 01:20:00,920\nWhat else I wanna show you?\n\n1321\n01:20:00,920 --> 01:20:05,780\nAgain, you don't see the scale out\ncapability here on these properties.\n\n1322\n01:20:05,780 --> 01:20:09,790\nYou do have to go in and click that View\nAll Properties before you see that option.\n\n1323\n01:20:09,790 --> 01:20:12,220\nSo, something you wanna keep in mind.\n\n1324\n01:20:12,220 --> 01:20:13,800\nSo now I've got it all set up.\n\n1325\n01:20:13,800 --> 01:20:16,002\nI think I already saved and\nvalidated it, so I'm good to go.\n\n1326\n01:20:19,045 --> 01:20:20,206\nYeah.\n\n1327\n01:20:20,206 --> 01:20:22,076\nWe are good to go there.\n\n1328\n01:20:22,076 --> 01:20:24,804\nSo now I should be able to close this guy.\n\n1329\n01:20:27,160 --> 01:20:32,490\nAnd now underneath my\nService Templates I see my TH App.\n\n1330\n01:20:32,490 --> 01:20:34,940\nSo that's what I just set up.\n\n1331\n01:20:34,940 --> 01:20:37,370\nNow, any time I need to deploy,\n\n1332\n01:20:37,370 --> 01:20:42,150\na service that requires a web server,\na mid tier running ASP.\n\n1333\n01:20:42,150 --> 01:20:45,690\nAnd a back end running SQL server.\n\n1334\n01:20:45,690 --> 01:20:49,730\nI have all of that set up,\nI can just come in here and i can go and\n\n1335\n01:20:49,730 --> 01:20:51,959\npublish this service template.\n\n1336\n01:20:53,220 --> 01:20:57,560\nWhich just makes it available to\nwhoever has permissions to come in here\n\n1337\n01:20:57,560 --> 01:20:58,310\nand deploy.\n\n1338\n01:20:58,310 --> 01:21:00,660\nSo I've published it out of my library,\nall right.\n\n1339\n01:21:02,070 --> 01:21:06,240\nSo now, once I publish this,\nit's available for use.\n\n1340\n01:21:06,240 --> 01:21:10,129\nSo I can come over here to VM and\nServices, all right.\n\n1341\n01:21:10,129 --> 01:21:13,700\nAnd I can click create service.\n\n1342\n01:21:13,700 --> 01:21:18,750\nBut instead of creating from scratch, I've\ngot my service template that I can use.\n\n1343\n01:21:18,750 --> 01:21:23,180\nSo I'm gonna click browse and\ngo ahead and select my THF.\n\n1344\n01:21:23,180 --> 01:21:25,380\nNow I can't actually deploy this.\n\n1345\n01:21:25,380 --> 01:21:30,220\nI'm in a virtual machine,\nhyper V is not gonna allow me to set up\n\n1346\n01:21:30,220 --> 01:21:34,180\na virtual machine within a virtual machine\nI don't have enough resources on this\n\n1347\n01:21:34,180 --> 01:21:38,210\ntech net lab machine for those three\ndifferent virtual machines to run anyway.\n\n1348\n01:21:38,210 --> 01:21:41,700\nSo it's not going to succeed, but\nyou can see I can just come in here and\n\n1349\n01:21:41,700 --> 01:21:47,230\npick my app and click okay, and\nthen tell it where I'm deploying this too.\n\n1350\n01:21:47,230 --> 01:21:51,000\nWhat particular host,\nif I had a particular host in mind and\n\n1351\n01:21:51,000 --> 01:21:54,500\nthey've got a cloud set up, you can see\nover here they've got Contoso Cloud, so\n\n1352\n01:21:54,500 --> 01:21:55,880\nI could deploy to that.\n\n1353\n01:21:55,880 --> 01:21:58,550\nOr, as I said with those other wizards,\n\n1354\n01:21:58,550 --> 01:22:03,652\nif I hadn't created a service template yet\nI could go ahead and create it here.\n\n1355\n01:22:03,652 --> 01:22:06,730\nAll right, so I could back through that\nprocess, this would just open up that\n\n1356\n01:22:06,730 --> 01:22:11,270\nservice template designer console where\nI could run through that same process.\n\n1357\n01:22:12,720 --> 01:22:15,990\nAgain if I click OK it's just going\nto throw up a bunch of errors about.\n\n1358\n01:22:15,990 --> 01:22:17,920\nNot enough resources, etc.\n\n1359\n01:22:17,920 --> 01:22:21,650\nSo I'm not actually going to deploy it,\nbut that's how easy it is.\n\n1360\n01:22:21,650 --> 01:22:25,290\nNow, anytime, I can go in here and\ndeploy this as a unit, right.\n\n1361\n01:22:25,290 --> 01:22:26,180\nWhen I deploy that out,\n\n1362\n01:22:26,180 --> 01:22:28,960\nit's actually gonna fire up three\ndifferent virtual machines.\n\n1363\n01:22:28,960 --> 01:22:31,470\nIt's gonna create three\ndifferent virtual machines.\n\n1364\n01:22:31,470 --> 01:22:36,340\nSomething to think about, that could\nput a, what's a good way to say it?\n\n1365\n01:22:36,340 --> 01:22:37,800\nThat could affect your performance, right,\n\n1366\n01:22:37,800 --> 01:22:41,160\non that host machine that it's spinning\nup those three new virtuals on.\n\n1367\n01:22:41,160 --> 01:22:45,100\nSo if it's a complex, if it's a\nmulti-tiered like I set up, if you've got\n\n1368\n01:22:45,100 --> 01:22:49,500\nseveral different machines, I have three\nfront-end web servers in that web tier.\n\n1369\n01:22:49,500 --> 01:22:53,700\nThat's something I've gotta keep in mind\nbecause if I go to spin that up, it could\n\n1370\n01:22:53,700 --> 01:22:57,080\naffect the performance of other virtual\nmachines that might be on that host.\n\n1371\n01:22:57,080 --> 01:23:04,121\nWhich I might wanna do during\nmy peak hours in my business.\n\n1372\n01:23:04,121 --> 01:23:07,730\nSo that's most of what we\nneed to see about VMM.\n\n1373\n01:23:07,730 --> 01:23:12,890\nAgain, they called out a couple\nof other things in here\n\n1374\n01:23:12,890 --> 01:23:14,010\nI don't have a lot of notes typed.\n\n1375\n01:23:14,010 --> 01:23:17,550\nI'll get these notes polished up for\nyou guys for the VMM part.\n\n1376\n01:23:17,550 --> 01:23:21,580\nBut we looked at OS templates,\nwe looked at the hardware templates,\n\n1377\n01:23:21,580 --> 01:23:25,860\nthe capability templates, the application\ntemplates and my sequel profiles.\n\n1378\n01:23:27,290 --> 01:23:31,150\nWe saw in the end how to create,\nI kind of went out of order.\n\n1379\n01:23:31,150 --> 01:23:35,520\nI made more sense to me to look at\nthese guys first and then come back and\n\n1380\n01:23:35,520 --> 01:23:38,495\nlook at virtual machine\nmanager service templates.\n\n1381\n01:23:38,495 --> 01:23:40,880\nCuz they kind of tie everything together.\n\n1382\n01:23:40,880 --> 01:23:42,730\nWe talked about scaling out.\n\n1383\n01:23:42,730 --> 01:23:47,300\nUpdating and servicing the services\nreally just involves, once you've set it\n\n1384\n01:23:47,300 --> 01:23:50,450\nup to scale out, you can come in there and\nyou can add new machines.\n\n1385\n01:23:52,150 --> 01:23:54,660\nDepending on how big the update is, right.\n\n1386\n01:23:54,660 --> 01:23:59,500\nIf it's a small little patch or something\nlike that maybe I go to the VM and\n\n1387\n01:23:59,500 --> 01:24:00,910\nI just do it that way.\n\n1388\n01:24:00,910 --> 01:24:04,860\nIf it's a service pack or\nsomething major, maybe I create a new\n\n1389\n01:24:04,860 --> 01:24:09,730\nvirtual machine template and\nI swap that out in my service template and\n\n1390\n01:24:09,730 --> 01:24:14,640\nI redeploy it as a new service template.\n\n1391\n01:24:14,640 --> 01:24:17,120\nVirtual Machine Manager libraries.\n\n1392\n01:24:17,120 --> 01:24:18,030\nI didn't really look at that.\n\n1393\n01:24:18,030 --> 01:24:19,760\nI'll go back and\nlook at that as well as plan and\n\n1394\n01:24:19,760 --> 01:24:23,690\ndeploy services to non-trusted domains and\nword groups.\n\n1395\n01:24:23,690 --> 01:24:26,910\nReally not a lot to see with this one.\n\n1396\n01:24:26,910 --> 01:24:28,500\nBut it is a new capability.\n\n1397\n01:24:28,500 --> 01:24:32,600\nSo very good chance that it'll\nbe called out on an exam.\n\n1398\n01:24:32,600 --> 01:24:40,430\nJust understand that 2012 R2, or I should\nsay SCVMM 2012 and 2012R2 supports\n\n1399\n01:24:42,310 --> 01:24:47,294\ndeploying services,\nvirtual machines, out to untrusted.\n\n1400\n01:24:47,294 --> 01:24:50,670\nAnd if you've got a non-trusted domain or\na server,\n\n1401\n01:24:50,670 --> 01:24:54,010\na host machine that's in a work group,\nwell, there's no trust, right,\n\n1402\n01:24:54,010 --> 01:24:57,290\nbetween your VMM is\nprobably a domain member.\n\n1403\n01:24:57,290 --> 01:25:01,580\nBut I wanna deploy a virtual machine\nto a host that's not part of my domain.\n\n1404\n01:25:01,580 --> 01:25:02,740\nThat's possible now.\n\n1405\n01:25:02,740 --> 01:25:05,450\nWe just have to go in and\nadd it to our console.\n\n1406\n01:25:07,410 --> 01:25:13,776\nSo in here we have our,\nlet's see where I can show you that...\n\n1407\n01:25:18,698 --> 01:25:21,540\nSee what else I got.\n\n1408\n01:25:21,540 --> 01:25:26,120\nSo we were talking about\nadding hosts adding hosts.\n\n1409\n01:25:26,120 --> 01:25:29,210\nI can come in here and\njust choose to add a Hyper-V host,\n\n1410\n01:25:29,210 --> 01:25:31,310\nadd a Citrix host, a VM host.\n\n1411\n01:25:31,310 --> 01:25:33,130\nI can also create hosts groups.\n\n1412\n01:25:33,130 --> 01:25:36,970\nSo it's just a matter of adding those\nguys so that they can be managed.\n\n1413\n01:25:36,970 --> 01:25:40,130\nGetting that agent installed\non that machine so\n\n1414\n01:25:40,130 --> 01:25:42,620\nthat I can manage it\nthrough my VMM console.\n\n1415\n01:25:42,620 --> 01:25:44,170\nThat's really what we\nneed to know about that.\n\n1416\n01:25:44,170 --> 01:25:47,620\nIs that it's a new\ncapability in 2012 R2 VMM.\n\n1417\n01:25:47,620 --> 01:25:50,840\nThe ability to manage or\n\n1418\n01:25:50,840 --> 01:25:54,500\npush out machines or\nservice templates to non-domain members.\n\n1419\n01:25:54,500 --> 01:25:56,780\nOr a group, whatever the case may be.\n\n1420\n01:25:56,780 --> 01:25:59,220\nAnd the other thing I wanted to\nshow you guys was the libraries.\n\n1421\n01:25:59,220 --> 01:26:04,620\nLibraries are places that we\ncan store are shared resources.\n\n1422\n01:26:04,620 --> 01:26:06,950\nLike when you saw me\npull in those templates,\n\n1423\n01:26:06,950 --> 01:26:08,700\nthere was that tiny HD, all right.\n\n1424\n01:26:08,700 --> 01:26:11,540\nAnd there's a bunch of other\nthings that come with,\n\n1425\n01:26:11,540 --> 01:26:15,380\nin this case I've got most\nof them removed I think.\n\n1426\n01:26:15,380 --> 01:26:19,030\nBut over here I've got a couple\nof different library servers, and\n\n1427\n01:26:19,030 --> 01:26:24,100\nI've got a VM library here,\nthere were a couple\n\n1428\n01:26:24,100 --> 01:26:29,030\nof those scripts that I set up for our\ndemo in the first part removed a lot of\n\n1429\n01:26:29,030 --> 01:26:34,490\nthe default items from the library\njust to keep it a little smaller.\n\n1430\n01:26:34,490 --> 01:26:40,550\nBut here I can see from the talking head\napp is the one I was showing you guys.\n\n1431\n01:26:40,550 --> 01:26:41,950\nUse your different resources.\n\n1432\n01:26:41,950 --> 01:26:48,000\nSo if I take a look at, for example,\nmy, which one did I use that on?\n\n1433\n01:26:48,000 --> 01:26:50,370\nI think that was on my mid tier.\n\n1434\n01:26:50,370 --> 01:26:55,068\nSo if I go to my hardware profile for\nmy mid tier.\n\n1435\n01:26:59,515 --> 01:27:04,588\nIt should be able to see.\n\n1436\n01:27:04,588 --> 01:27:06,456\nMaybe it wasn't on the mid tier.\n\n1437\n01:27:06,456 --> 01:27:09,174\nOne of these guys was using that...\n\n1438\n01:27:14,492 --> 01:27:16,593\nTake a peek over there.\n\n1439\n01:27:16,593 --> 01:27:19,600\nI don't know if I showed you that earlier.\n\n1440\n01:27:19,600 --> 01:27:23,580\nThe mid tier has that ASP\nserver attached to it.\n\n1441\n01:27:23,580 --> 01:27:26,760\nCan't really see it, but\nwhen I set those profiles up,\n\n1442\n01:27:26,760 --> 01:27:31,229\nI picked from the library the hard\ndrives that I wanted to use.\n\n1443\n01:27:33,100 --> 01:27:35,830\nSo for a couple of those we can\nuse this tiny disk, which is here.\n\n1444\n01:27:35,830 --> 01:27:38,800\nWhich is a predefined virtual\nhard drive of a certain size.\n\n1445\n01:27:38,800 --> 01:27:40,110\nObviously, tiny.\n\n1446\n01:27:40,110 --> 01:27:43,428\nAnd there's another that I use,\nI use that for that mid tier.\n\n1447\n01:27:43,428 --> 01:27:47,408\nWhich is another partition\nof the hard drive there.\n\n1448\n01:27:47,408 --> 01:27:50,949\nSo the libraries are just\nplaces to store components.\n\n1449\n01:27:50,949 --> 01:27:54,529\nThings that I might need to\ndeploy out virtual machines.\n\n1450\n01:27:54,529 --> 01:27:59,269\nAnd you creating a library, it's really\na lot like just setting up a share in\n\n1451\n01:27:59,269 --> 01:28:02,100\na way that VMM is gonna have access to.\n\n1452\n01:28:02,100 --> 01:28:06,510\nSo if you've got VM admins that need\nto come out and deploy new machines.\n\n1453\n01:28:06,510 --> 01:28:08,850\nYou can have different\ntemplates set up and\n\n1454\n01:28:08,850 --> 01:28:11,280\nthey can access these\nthrough the libraries.\n\n1455\n01:28:11,280 --> 01:28:14,890\nSo here they've got a blank library,\nthey've got that library.\n\n1456\n01:28:14,890 --> 01:28:20,140\nOne of our shows we've talked about\nsystems in a virtual machine manager and\n\n1457\n01:28:20,140 --> 01:28:21,850\nthe ability to just\nstore virtual machines.\n\n1458\n01:28:21,850 --> 01:28:23,980\nPark them in the library\nif I'm not using them.\n\n1459\n01:28:23,980 --> 01:28:26,180\nAnd then deploy them out from the library.\n\n1460\n01:28:26,180 --> 01:28:28,510\nClone them out from\nthe library if I need to.\n\n1461\n01:28:28,510 --> 01:28:30,330\nWhen I go to deploy those guys.\n\n1462\n01:28:30,330 --> 01:28:32,920\nAnd it's easy to set up\na new library server.\n\n1463\n01:28:32,920 --> 01:28:33,839\nIf I go in here and click.\n\n1464\n01:28:35,201 --> 01:28:37,899\nAdd library server it launches a wizard.\n\n1465\n01:28:37,899 --> 01:28:41,022\nI would need to use an account\nthat has permissions.\n\n1466\n01:28:45,835 --> 01:28:48,857\nAnd then when I get into here I\ncan select my library server,\n\n1467\n01:28:48,857 --> 01:28:52,250\nI pick where I want it, what server\nI was gonna put that library on.\n\n1468\n01:28:52,250 --> 01:28:55,820\nWho was actually going to\nhost the raw data, right.\n\n1469\n01:28:55,820 --> 01:28:58,860\nThose templates and things like that\nthat I wanna store in that library.\n\n1470\n01:28:58,860 --> 01:29:01,850\nSo I go through here,\npick select my library server.\n\n1471\n01:29:01,850 --> 01:29:05,510\nAdd a library share and\nbaddabing I've got a new library, so\n\n1472\n01:29:05,510 --> 01:29:09,770\nnothing too difficult there,\nit's really just like I said,\n\n1473\n01:29:09,770 --> 01:29:12,200\nkinda like setting up a soft\nware distribution point.\n\n1474\n01:29:12,200 --> 01:29:15,130\nOr some other kind of share,\nyou're just doing it through VMM and\n\n1475\n01:29:15,130 --> 01:29:18,400\nthen when you come into your console\nyou create that new library, and\n\n1476\n01:29:18,400 --> 01:29:24,020\nnow you have access to all of\nthose components there, all right.\n\n1477\n01:29:24,020 --> 01:29:27,401\nSo, let's go back over to our list.\n\n1478\n01:29:29,776 --> 01:29:32,382\nAnd take a peak at that.\n\n1479\n01:29:36,582 --> 01:29:41,336\n[SOUND] And I think, like I said,\nI'll fill out these notes.\n\n1480\n01:29:41,336 --> 01:29:45,130\nI just didn't get around to actually\ntyping some of that out in the notes here.\n\n1481\n01:29:45,130 --> 01:29:48,770\nI'll fill that out and make sure we\nget those posted up with our show.\n\n1482\n01:29:48,770 --> 01:29:50,560\nBut we've covered pretty much everything.\n\n1483\n01:29:50,560 --> 01:29:52,031\nIf we flip back over to our objectives.\n\n1484\n01:29:53,159 --> 01:29:55,390\nSomewhere in here.\n\n1485\n01:29:55,390 --> 01:29:59,300\nWe have done our plan and\nimplement server upgrade and\n\n1486\n01:29:59,300 --> 01:30:01,770\nmigration in the first couple\nsegments of this episode.\n\n1487\n01:30:01,770 --> 01:30:04,340\nIn the last couple segments,\nwe focus on plan and\n\n1488\n01:30:04,340 --> 01:30:06,710\ndeploy virtual machine manager services.\n\n1489\n01:30:07,950 --> 01:30:10,790\nSo I think that is probably\ngonna do it for today.\n\n1490\n01:30:10,790 --> 01:30:13,090\nI hope you guys have enjoyed the show.\n\n1491\n01:30:13,090 --> 01:30:17,110\nRemember as always if you guys want,\nif you have questions during the show you\n\n1492\n01:30:17,110 --> 01:30:20,350\nwanna ask something you guys\nhave that chat room available.\n\n1493\n01:30:20,350 --> 01:30:24,570\nJump in there type your question in, love\nto hear from you during the show I can,\n\n1494\n01:30:24,570 --> 01:30:28,920\nwe can interact live,\nreal time If you're watching this recorded\n\n1495\n01:30:28,920 --> 01:30:31,650\nyou've got that Q&A link up\nat the top of every page.\n\n1496\n01:30:31,650 --> 01:30:34,070\nAll you got to do is\nclick on that Q&A link.\n\n1497\n01:30:34,070 --> 01:30:37,570\nYou can go up, ask your question.\n\n1498\n01:30:37,570 --> 01:30:40,420\nAnd all of us hosts here\nat IT Pro TV monitor that.\n\n1499\n01:30:40,420 --> 01:30:41,950\nWe'll get in there and\nanswer your questions.\n\n1500\n01:30:41,950 --> 01:30:46,000\nYou've always got somebody available to\nanswer your questions as your studying.\n\n1501\n01:30:46,000 --> 01:30:47,840\nAnd getting ready for your exams.\n\n1502\n01:30:49,820 --> 01:30:51,440\nCan't think of anything else.\n\n1503\n01:30:51,440 --> 01:30:52,650\nDid I hit it all Jason?\n\n1504\n01:30:52,650 --> 01:30:54,670\n>> We're good?\n\n1505\n01:30:54,670 --> 01:30:55,430\n>> All right, then.\n\n1506\n01:30:55,430 --> 01:30:59,050\nLadies and gentlemen, signing off for\nITProTV, I'm Mike Rodrick.\n\n1507\n01:30:59,050 --> 01:31:00,869\nYou guys have a fantastic\nrest of your day.\n\n1508\n01:31:00,869 --> 01:31:10,869\n[MUSIC]\n\n",
          "vimeoId": "107256004"
        },
        {
          "description": "",
          "length": "4566",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/004-Planning-For-Storage.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/004-Planning-For-Storage-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/004-Planning-For-Storage-sm.jpg",
          "title": "Planning For Storage",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,470 --> 00:00:19,915\n[SOUND]\n\n3\n00:00:22,434 --> 00:00:33,374\n[MUSIC]\n\n4\n00:00:33,374 --> 00:00:36,485\nAll right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:36,485 --> 00:00:38,570\nwelcome back to another\nepisode of IT Pro TV.\n\n6\n00:00:38,570 --> 00:00:42,131\nI'm your host, Don Pazzett,\nback again with Mr. Mike Roderick.\n\n7\n00:00:42,131 --> 00:00:42,781\nHow's it going, Mike?\n\n8\n00:00:42,781 --> 00:00:43,301\n>> Fantastic.\n\n9\n00:00:43,301 --> 00:00:44,020\nHow are you doing, Don?\n\n10\n00:00:44,020 --> 00:00:45,870\n>> I am doing swell, and thanks for\n\n11\n00:00:45,870 --> 00:00:48,395\ncovering me in the last\nepisode when I was not here.\n\n12\n00:00:48,395 --> 00:00:49,490\n>> Hey, no problem, no problem.\n\n13\n00:00:49,490 --> 00:00:50,540\nIt was fun, lots of fun.\n\n14\n00:00:50,540 --> 00:00:52,152\nWe had a good time, didn't we, guys?\n\n15\n00:00:52,152 --> 00:00:53,067\nHopefully.\n[LAUGH]\n\n16\n00:00:53,067 --> 00:00:54,316\n>> This is where we need that crickets\n\n17\n00:00:54,316 --> 00:00:55,227\nchirping sound effect.\n\n18\n00:00:55,227 --> 00:00:56,759\nYou know that [NOISE].\n\n19\n00:00:56,759 --> 00:00:57,570\nAnyhow.\n\n20\n00:00:57,570 --> 00:01:01,050\n>> So I had to pull the joke and\nlike, hey with me is Don.\n\n21\n00:01:01,050 --> 00:01:01,835\nAnd they're like no.\n\n22\n00:01:01,835 --> 00:01:04,910\n>> [LAUGH]\n>> Don used that one day with you so.\n\n23\n00:01:04,910 --> 00:01:06,250\n>> Yep, I had to dash out.\n\n24\n00:01:06,250 --> 00:01:09,240\nWe help out some of the local\nschools with some various things and\n\n25\n00:01:09,240 --> 00:01:10,720\nI was helping them with\nsome wireless networks.\n\n26\n00:01:10,720 --> 00:01:14,090\nSo I was out of the studio but\nwe're back again.\n\n27\n00:01:14,090 --> 00:01:14,677\n>> We are?\n\n28\n00:01:14,677 --> 00:01:18,142\n>> And it looks like we're ready\nto just pick up the tail end\n\n29\n00:01:18,142 --> 00:01:20,512\nof our little planning section here.\n\n30\n00:01:20,512 --> 00:01:24,800\n>> Yeah that topic or objective one, we\ngot through one, all the way through 1.4,\n\n31\n00:01:24,800 --> 00:01:26,831\nso we're getting ready to hit 1.5.\n\n32\n00:01:26,831 --> 00:01:29,795\n>> You can never cover too much stuff,\nright?\n\n33\n00:01:29,795 --> 00:01:34,155\n>> No. [LAUGH] >> So, we're gonna be\nlooking at planning storage today.\n\n34\n00:01:34,155 --> 00:01:35,695\nAnd there's a lot of different things.\n\n35\n00:01:35,695 --> 00:01:36,651\nLet me get to the top of this here.\n\n36\n00:01:36,651 --> 00:01:38,369\nWe'll get to the top of this situation.\n\n37\n00:01:38,369 --> 00:01:39,080\n>> [LAUGH]\n>> But\n\n38\n00:01:39,080 --> 00:01:42,169\nbasically there's a lot that's\ninvolved when it comes to planning and\n\n39\n00:01:42,169 --> 00:01:43,052\nplanning storage.\n\n40\n00:01:43,052 --> 00:01:44,492\nNow, when we talk about this,\n\n41\n00:01:44,492 --> 00:01:46,932\nwe're really not talking about\ninternal storage on a system.\n\n42\n00:01:46,932 --> 00:01:51,342\nThat's pretty much a given, right, that\nthese days on a workstation you probably\n\n43\n00:01:51,342 --> 00:01:54,622\njust have one hard drive in it and\nthat's it, not much to plan for there.\n\n44\n00:01:54,622 --> 00:01:58,132\nOn a server, you probably have at least\ntwo hard drives, maybe mirrored for\n\n45\n00:01:58,132 --> 00:02:00,100\nredundancy, that kind of a thing.\n\n46\n00:02:00,100 --> 00:02:03,880\nBut we're talking about here is\nreally planning for bulk storage.\n\n47\n00:02:03,880 --> 00:02:04,770\nRight.\n\n48\n00:02:04,770 --> 00:02:07,650\nAlmost every company has a file share.\n\n49\n00:02:07,650 --> 00:02:10,040\nA place where they store their stuff.\n\n50\n00:02:10,040 --> 00:02:12,630\nAnd they usually map it to\na particular drive letter and\n\n51\n00:02:12,630 --> 00:02:13,560\npeople call it that right.\n\n52\n00:02:13,560 --> 00:02:14,660\nWell what's our's here at the office.\n\n53\n00:02:14,660 --> 00:02:15,350\nThe F drive.\n\n54\n00:02:15,350 --> 00:02:17,330\n>> The F drive exactly, exactly.\n\n55\n00:02:17,330 --> 00:02:20,440\nBut you know it is something that we see\nall the time because when we talk about\n\n56\n00:02:20,440 --> 00:02:23,770\ndirect attach storage,\nit's fine, it's fast typically.\n\n57\n00:02:23,770 --> 00:02:27,150\nMaybe not our fastest solution but\nthe biggest problem I think with direct\n\n58\n00:02:27,150 --> 00:02:31,780\nattached storage is, if that server's not\navailable that storage is not available.\n\n59\n00:02:31,780 --> 00:02:33,480\nAnd that usually can happen, so.\n\n60\n00:02:33,480 --> 00:02:37,440\n>> So if you have all of your employees\nstoring their documents on a server,\n\n61\n00:02:37,440 --> 00:02:38,790\ninstead of storing them locally right?\n\n62\n00:02:38,790 --> 00:02:42,850\nWhich is a great idea because if you store\nstuff locally you got to back up all\n\n63\n00:02:42,850 --> 00:02:44,330\nthose machines, but\n\n64\n00:02:44,330 --> 00:02:49,150\nif everybody stores them on the server you\nhave one place to go to back that data up.\n\n65\n00:02:49,150 --> 00:02:51,330\nSo if you've trained your\nusers to do that right,\n\n66\n00:02:51,330 --> 00:02:56,090\nthey've got that F drive and they put that\ndata there and that server goes offline.\n\n67\n00:02:56,090 --> 00:02:57,380\n>> Yes.\n>> All of the sudden,\n\n68\n00:02:57,380 --> 00:02:58,790\nyou've got some unhappy campers.\n\n69\n00:02:58,790 --> 00:03:00,600\n>> Not just one of your employees\nis out of their data but\n\n70\n00:03:00,600 --> 00:03:02,600\nnow all of your employees\ncannot get to their data.\n\n71\n00:03:02,600 --> 00:03:04,880\n>> And boy that's when they start\nsaying some really snotty things.\n\n72\n00:03:04,880 --> 00:03:05,480\n>> [LAUGH] Yeah, they do.\n\n73\n00:03:05,480 --> 00:03:08,480\n>> Like, well I have access to\nthis storage on my computer.\n\n74\n00:03:08,480 --> 00:03:10,810\nFrom now on I'm gonna write\nthe data to my computer and\n\n75\n00:03:10,810 --> 00:03:13,620\nthen that's when you tell them,\nall right, so you're fired.\n\n76\n00:03:13,620 --> 00:03:14,125\n>> Yeah.\n>> [LAUGH]\n\n77\n00:03:14,125 --> 00:03:15,000\n>> [LAUGH]\n\n78\n00:03:15,000 --> 00:03:17,410\n>> But we may not have that authority.\n\n79\n00:03:17,410 --> 00:03:21,380\nSo instead, if we're going to provide\ncentralized storage like that,\n\n80\n00:03:21,380 --> 00:03:22,210\nwe know it's a good idea.\n\n81\n00:03:22,210 --> 00:03:28,960\nBut we need to make sure that it's fast,\nit's reliable and it's available.\n\n82\n00:03:28,960 --> 00:03:29,920\nRight?\nThat when\n\n83\n00:03:29,920 --> 00:03:32,160\npeople want to get to that data they can.\n\n84\n00:03:32,160 --> 00:03:35,210\nAnd there are a ton of solutions for\nus to do that.\n\n85\n00:03:35,210 --> 00:03:37,430\nInternal storage is not one of them.\n\n86\n00:03:37,430 --> 00:03:38,100\nRight?\n\n87\n00:03:38,100 --> 00:03:41,122\nSo you might see that at\na very small shop, right?\n\n88\n00:03:41,122 --> 00:03:45,967\nA shop that can afford to have their data\noffline for hours or days at a time.\n\n89\n00:03:45,967 --> 00:03:47,010\n>> Right.\n\n90\n00:03:47,010 --> 00:03:49,670\n>> They might do internal storage in that,\nor me at home, right?\n\n91\n00:03:49,670 --> 00:03:50,320\nThat's what I do.\n\n92\n00:03:50,320 --> 00:03:51,182\n>> Yeah.\n>> I've got all\n\n93\n00:03:51,182 --> 00:03:53,065\nmy data is in one computer at home.\n\n94\n00:03:53,065 --> 00:03:55,285\nI've got like five hard\ndrives in the thing.\n\n95\n00:03:55,285 --> 00:03:58,831\nBut if that computer goes down, you know,\nI wouldn't say I lose access to my data,\n\n96\n00:03:58,831 --> 00:04:00,514\nbut I have replicated in other places.\n\n97\n00:04:00,514 --> 00:04:02,689\n>> [LAUGH]\n>> But, that's the primary place for\n\n98\n00:04:02,689 --> 00:04:03,195\nme to get it.\n\n99\n00:04:03,195 --> 00:04:05,755\nBut that's okay,\nbecause what is my data at home?\n\n100\n00:04:05,755 --> 00:04:07,617\n>> Right, it's your movies and your music.\n\n101\n00:04:07,617 --> 00:04:09,646\n[LAUGH]\n>> I can survive without my mp3s for\n\n102\n00:04:09,646 --> 00:04:10,389\na little while.\n\n103\n00:04:10,389 --> 00:04:15,292\nSo not a big deal there, but if you're\nan insurance corporation and all of\n\n104\n00:04:15,292 --> 00:04:20,448\nyour template forms are stored right\nthere on that drive and it goes offline.\n\n105\n00:04:20,448 --> 00:04:21,139\n>> Right.\n\n106\n00:04:21,139 --> 00:04:22,950\n>> You might have where\nemployees can't get work done.\n\n107\n00:04:22,950 --> 00:04:25,050\n>> Yeah, now you've got a bunch of\nemployees that you're paying and\n\n108\n00:04:25,050 --> 00:04:27,200\nthey're just sitting there twiddling\ntheir thumbs without nothing to do.\n\n109\n00:04:27,200 --> 00:04:28,000\n>> Yep.\n\n110\n00:04:28,000 --> 00:04:29,370\nNow all through the 80's and\n\n111\n00:04:29,370 --> 00:04:32,740\nthrough the 90's the file storage\nreally was just a shared folder.\n\n112\n00:04:32,740 --> 00:04:33,820\nPeople put their junk in there.\n\n113\n00:04:33,820 --> 00:04:36,890\nSo there were a lot of documents and\ntext files and stuff like that.\n\n114\n00:04:36,890 --> 00:04:42,090\nBut in the new millenia it's as\noften as not going to be a database.\n\n115\n00:04:42,090 --> 00:04:43,020\nRight?\nSo we may have\n\n116\n00:04:43,020 --> 00:04:46,920\ndatabases that store all of our customer\nrecords or sales information and so on.\n\n117\n00:04:46,920 --> 00:04:49,880\nWell, the storage need\nof a database isn't that\n\n118\n00:04:49,880 --> 00:04:51,930\nmuch different than\nthe storage need of files.\n\n119\n00:04:51,930 --> 00:04:54,380\nRight?\nThere are some peculiarities.\n\n120\n00:04:54,380 --> 00:04:56,210\nHard word to say this\nearly in the morning,\n\n121\n00:04:56,210 --> 00:04:59,120\nbut if you wanna learn more about\ndatabase storage you can always jump\n\n122\n00:04:59,120 --> 00:05:02,800\nover to our sequel show we\ncovered in depth over there.\n\n123\n00:05:02,800 --> 00:05:07,180\nBut at the end of the day, you've got\ndata being written to a hard drive, and\n\n124\n00:05:07,180 --> 00:05:10,460\nyou've got more than one person\nwanting to get at that data.\n\n125\n00:05:10,460 --> 00:05:13,700\nBe it in database or\nbe individual files on a hard drive.\n\n126\n00:05:13,700 --> 00:05:17,207\nSo the solutions\nare really pretty similar.\n\n127\n00:05:17,207 --> 00:05:18,162\nAll right, so\n\n128\n00:05:18,162 --> 00:05:23,748\nwhat's step one if we want to eliminate\nthe reliance upon a single server, right.\n\n129\n00:05:23,748 --> 00:05:27,590\nWe don't want that instance of a single\nserver failing and us losing access.\n\n130\n00:05:27,590 --> 00:05:30,260\nWhat are some of the solutions\nthat are available to us?\n\n131\n00:05:30,260 --> 00:05:33,860\n>> Yeah, gotta kinda think about, how\ndo we wanna connect to that storage and\n\n132\n00:05:33,860 --> 00:05:36,590\nhow much storage are we going to need?\n\n133\n00:05:36,590 --> 00:05:40,200\n>> If we're married to internal storage,\nif we've gotta do it,\n\n134\n00:05:40,200 --> 00:05:44,770\nright, then there's solutions, things\nlike DFS, the distributed file system.\n\n135\n00:05:44,770 --> 00:05:45,940\n>> Right.\n>> Where you can do that and\n\n136\n00:05:45,940 --> 00:05:50,160\nyou replicate your data across servers or\neven across geographic locations.\n\n137\n00:05:50,160 --> 00:05:55,360\nThe problem with DFS though is it\nmaintains multiple copies of your data,\n\n138\n00:05:55,360 --> 00:05:58,140\nso you're doubling or tripling or\nquadrupling your storage with\n\n139\n00:05:58,140 --> 00:06:02,160\neach DFS node that you add, and\nit's also not necessarily the fastest.\n\n140\n00:06:02,160 --> 00:06:05,330\nIf you make a change on one server,\nit's gotta replicate to the others.\n\n141\n00:06:05,330 --> 00:06:06,890\nSo for transactional data, for\n\n142\n00:06:06,890 --> 00:06:11,190\ndata that's gotta be in lockstep,\nsolutions like DFS just aren't an option.\n\n143\n00:06:11,190 --> 00:06:15,220\nSo our next step really Is\nto go to shared storage.\n\n144\n00:06:15,220 --> 00:06:18,390\nShared storage is where you\nhave one set of storage, but\n\n145\n00:06:18,390 --> 00:06:20,553\nmore than one server can see it.\n\n146\n00:06:20,553 --> 00:06:22,622\nAll right.\nAnd what we wanna do in this episode is\n\n147\n00:06:22,622 --> 00:06:26,411\nwalk you through some of the different\nsolutions that are out there.\n\n148\n00:06:26,411 --> 00:06:30,190\nWe'll go through kinda each one and\nwe're gonna start.\n\n149\n00:06:30,190 --> 00:06:31,280\nI like to do this.\n\n150\n00:06:31,280 --> 00:06:32,945\nWe'll start from the cheapest.\n\n151\n00:06:32,945 --> 00:06:36,340\n>> [LAUGH]\n>> And we'll go to the most expensive.\n\n152\n00:06:36,340 --> 00:06:40,410\nUnderstanding that most people don't\nneed the most expensive solution.\n\n153\n00:06:40,410 --> 00:06:41,007\nBut on the exam,\n\n154\n00:06:41,007 --> 00:06:43,837\nyou've got to be able to tell when one\nis appropriate versus another, right?\n\n155\n00:06:43,837 --> 00:06:47,428\nNo IT director is going to want to pay for\nthe most expensive, but\n\n156\n00:06:47,428 --> 00:06:52,168\nit might be that that's exactly what you\nneed to fit your company's requirements.\n\n157\n00:06:52,168 --> 00:06:55,323\n>> Exactly, so we've got to be able to\njustify that cost, figure out why or\n\n158\n00:06:55,323 --> 00:06:58,470\nexplain why we need to spend that money,\nwarrant spending that money.\n\n159\n00:06:58,470 --> 00:06:59,570\n>> Yup.\n\n160\n00:06:59,570 --> 00:07:02,240\nAll right.\nSo, the cheapest form of shared storages\n\n161\n00:07:02,240 --> 00:07:04,340\nout there is iSCSI storage, all right?\n\n162\n00:07:04,340 --> 00:07:08,280\nAnd that's our first bullet point in\nour objectives, and I've got a diagram\n\n163\n00:07:08,280 --> 00:07:13,360\nhere somewhere that kind of shows\nan iSCSI SAN, and iSCSI SAN is cheap.\n\n164\n00:07:13,360 --> 00:07:15,490\nBecause, well,\nbecause of two reasons, though.\n\n165\n00:07:15,490 --> 00:07:18,830\nThe main reason is,\nit doesn't require a specialized network.\n\n166\n00:07:18,830 --> 00:07:19,440\n>> Right.\n\n167\n00:07:19,440 --> 00:07:23,520\n>> iSCSI SANs do SCSI\ncommunications across TCP/IP,\n\n168\n00:07:23,520 --> 00:07:24,870\nacross your regular network.\n\n169\n00:07:24,870 --> 00:07:25,370\nRight?\n\n170\n00:07:25,370 --> 00:07:29,860\nSo, you've already got a network in place\nand your PC's have IP addresses and\n\n171\n00:07:29,860 --> 00:07:32,710\nthey can talk to each other or\nI say PC's, these would be servers.\n\n172\n00:07:32,710 --> 00:07:33,270\n>> Right.\n>> So\n\n173\n00:07:33,270 --> 00:07:35,730\nour severs can see each other and\nthey can talk.\n\n174\n00:07:35,730 --> 00:07:37,510\nI take this iSCSI SAN that I go out and\nbuy,\n\n175\n00:07:37,510 --> 00:07:41,940\nI stick it right on the switch,\nand now all my nodes can see it.\n\n176\n00:07:41,940 --> 00:07:44,510\n>> Yeah, most of my servers already\nhave built-in network adapters.\n\n177\n00:07:44,510 --> 00:07:46,460\nThey connect to that copper-based media.\n\n178\n00:07:46,460 --> 00:07:48,208\nLike you said,\nyou got switches already in place.\n\n179\n00:07:48,208 --> 00:07:52,926\nSo there's no high-end media to go buy, or\nnetwork adapters, or anything like that,\n\n180\n00:07:52,926 --> 00:07:55,620\nand we like to call it the poor man's SAN,\nright?\n\n181\n00:07:55,620 --> 00:07:57,625\n>> Yeah, and\nthat's exactly what it is, right?\n\n182\n00:07:57,625 --> 00:07:59,082\n>> Mm-hm.\n>> On a positive side,\n\n183\n00:07:59,082 --> 00:08:01,350\nthese nodes can all see\nshared storage now.\n\n184\n00:08:01,350 --> 00:08:04,520\nSo if I want to set up a cluster,\nor anything like that, I can.\n\n185\n00:08:04,520 --> 00:08:05,032\nI've got it.\n>> Right.\n\n186\n00:08:05,032 --> 00:08:05,544\n>> Right?\n\n187\n00:08:05,544 --> 00:08:07,390\nOn a negative side,\n\n188\n00:08:07,390 --> 00:08:11,265\nthe iSCSI SAN is running over\nthe same network as everything else.\n\n189\n00:08:11,265 --> 00:08:11,985\nRight?\n\n190\n00:08:11,985 --> 00:08:15,785\nSo if you've got a gigabit network,\nwhich is what most people have these days.\n\n191\n00:08:15,785 --> 00:08:19,665\nIf you have a gig network, then you're\nsaying as a gig connection, and\n\n192\n00:08:19,665 --> 00:08:23,417\nthese four nodes are all splitting\na one gig connection to that SAN.\n\n193\n00:08:23,417 --> 00:08:24,567\nAll right?\n\n194\n00:08:24,567 --> 00:08:28,205\nWell, you should already see problem\nnumber one, which is Contention.\n\n195\n00:08:28,205 --> 00:08:31,095\nAll of these nodes are fighting for\naccess to that SAN.\n\n196\n00:08:31,095 --> 00:08:35,490\nThey're dividing up that one gig\nconnection across four nodes,\n\n197\n00:08:35,490 --> 00:08:37,502\nit's not gonna give you great performance.\n\n198\n00:08:37,502 --> 00:08:38,590\nAll right?\n\n199\n00:08:38,590 --> 00:08:41,740\nThe other thing is,\nit's running over TCPIP.\n\n200\n00:08:41,740 --> 00:08:45,890\nAnd TCP has its on own overhead that\nit introduces with any protocol.\n\n201\n00:08:45,890 --> 00:08:47,990\nSo just because you have a gig connection,\n\n202\n00:08:47,990 --> 00:08:50,542\neven if I took these\nguys out of the picture.\n\n203\n00:08:50,542 --> 00:08:51,054\nRight?\n>> Right.\n\n204\n00:08:51,054 --> 00:08:52,254\n>> Let's just say its\n\n205\n00:08:52,254 --> 00:08:54,185\none node to a switch to a SAN.\n\n206\n00:08:54,185 --> 00:08:56,910\nYou're not actually getting\na gigabit of bandwidth.\n\n207\n00:08:56,910 --> 00:08:57,420\nRight?\n\n208\n00:08:57,420 --> 00:09:00,650\nYou're probably getting maybe 600 megabit.\n\n209\n00:09:00,650 --> 00:09:02,770\nRight?\nYour not normally gonna get the full\n\n210\n00:09:02,770 --> 00:09:06,955\nbandwidth out of that because of\nthe overhead introduced by your protocols.\n\n211\n00:09:06,955 --> 00:09:08,775\nIt retransmits, things like that.\n\n212\n00:09:08,775 --> 00:09:10,005\nAll right?\n\n213\n00:09:10,005 --> 00:09:13,775\nThe other thing we'll add onto that is,\n\n214\n00:09:13,775 --> 00:09:18,889\njust let's assume this is a perfect world,\nand that it is.\n\n215\n00:09:18,889 --> 00:09:19,620\n>> Wait, it's not?\n[LAUGH]\n\n216\n00:09:19,620 --> 00:09:20,126\n>> [LAUGH] No.\n\n217\n00:09:20,126 --> 00:09:22,015\nWe'll say it's a perfect world,\n\n218\n00:09:22,015 --> 00:09:23,281\nlike in all the Apple commercials.\n\n219\n00:09:23,281 --> 00:09:24,379\n>> Yeah.\n[LAUGH]\n\n220\n00:09:24,379 --> 00:09:26,005\n>> And [LAUGH] that\n\n221\n00:09:26,005 --> 00:09:28,105\neverything is just working super great.\n\n222\n00:09:28,105 --> 00:09:30,580\nThis node is connected\nto a switch to the SAN.\n\n223\n00:09:30,580 --> 00:09:32,940\nAnd it's a full one gig connection.\n\n224\n00:09:32,940 --> 00:09:34,962\nLets just assume that we\nget the full gigabit.\n\n225\n00:09:34,962 --> 00:09:35,474\n>> Right.\n>> Right?\n\n226\n00:09:35,474 --> 00:09:40,464\nWell a gigabit is really not that good.\n\n227\n00:09:40,464 --> 00:09:42,120\nEven at 100% it's not that good.\n\n228\n00:09:42,120 --> 00:09:44,249\nWhen you buy a SCSI hard drive.\n\n229\n00:09:44,249 --> 00:09:47,525\nIf you buy one today,\neven the cheap ones are usually rated for\n\n230\n00:09:47,525 --> 00:09:48,850\nsix gigabit of traffic.\n\n231\n00:09:49,895 --> 00:09:55,040\nYou're introducing a bottleneck\njust through that basic network.\n\n232\n00:09:55,040 --> 00:09:57,970\nThat's the number one problem with iSCSI.\n\n233\n00:09:57,970 --> 00:10:01,280\nNot the contention,\nnot the fact that you get TCPI overhead.\n\n234\n00:10:01,280 --> 00:10:02,890\n>> Right.\n>> Just the fact that the network,\n\n235\n00:10:02,890 --> 00:10:06,070\neven at it's best is still\nnot as good as the cheap,\n\n236\n00:10:06,070 --> 00:10:09,510\nhard drive internal storage model\nthat you can get on any PC.\n\n237\n00:10:09,510 --> 00:10:11,310\n>> Exactly.\nCuz we can eliminate some of that.\n\n238\n00:10:11,310 --> 00:10:13,140\nRight?\nWe can segregate that out.\n\n239\n00:10:13,140 --> 00:10:16,200\nTry to eliminate some of the normal\ntraffic that's going on our networking.\n\n240\n00:10:16,200 --> 00:10:19,210\nKeep that off of our data,\nwhere our data is travelling.\n\n241\n00:10:19,210 --> 00:10:22,520\nSo we don't have a contention there, but\nas you say, you're still just not gonna\n\n242\n00:10:22,520 --> 00:10:27,290\nget the performance you need, or coming in\nclose to what those drives could handle.\n\n243\n00:10:27,290 --> 00:10:30,582\n>> Yeah, so, you'll find people who\nhave various designs for iSCSI,\n\n244\n00:10:30,582 --> 00:10:33,640\nthat help to try and\nalleviate some of this.\n\n245\n00:10:33,640 --> 00:10:36,530\nIf you are on a shoestring budget,\nand you're just trying to get some\n\n246\n00:10:36,530 --> 00:10:39,435\nbasic shared storage, and\nperformance is not your concern.\n\n247\n00:10:39,435 --> 00:10:41,740\nRight?\nMaybe redundancy is your concern.\n\n248\n00:10:41,740 --> 00:10:44,697\nWell then go ahead and get that iSCSI\nSAN throw it on your regular network and\n\n249\n00:10:44,697 --> 00:10:45,894\njust take a performance hit.\n\n250\n00:10:45,894 --> 00:10:46,577\nRight?\nYou can do that.\n\n251\n00:10:46,577 --> 00:10:51,237\n>> And you can even take a 2012R2 server,\ncause we have an iSCSI is now,\n\n252\n00:10:51,237 --> 00:10:55,570\nwe've got a iSCSI target as a role\nthat we can install on 2012 server.\n\n253\n00:10:55,570 --> 00:10:57,590\nSo if I can't go out and\nget that dedicated SAN,\n\n254\n00:10:57,590 --> 00:11:01,150\nI could take one of my servers and\nuse it as my iSCSI target.\n\n255\n00:11:01,150 --> 00:11:05,790\nAnd then the client is built in as\nwell as the client operating system so\n\n256\n00:11:05,790 --> 00:11:08,020\nthey could then connect\nto that iSCSI target.\n\n257\n00:11:08,020 --> 00:11:08,720\n>> Yep.\n\n258\n00:11:08,720 --> 00:11:15,560\nAnother option is to have your iSCSI\nSAN be on its own dedicated network.\n\n259\n00:11:15,560 --> 00:11:16,100\nAll right.\n\n260\n00:11:16,100 --> 00:11:22,220\nSo for example, I could have my LAN,\njust be this other side here, and\n\n261\n00:11:22,220 --> 00:11:25,950\nI was gonna try and label this real quick\nbut it's kinda turning out bad, isn't it?\n\n262\n00:11:25,950 --> 00:11:28,160\nThere.\nSo there's my LAN and\n\n263\n00:11:28,160 --> 00:11:32,305\nI could have my individual nodes\nall plugged in to that LAN.\n\n264\n00:11:32,305 --> 00:11:33,045\nRight?\n\n265\n00:11:33,045 --> 00:11:37,413\nS that they're plugged in, and maybe\nit's separate switches and all of that.\n\n266\n00:11:37,413 --> 00:11:43,330\nSo that the iSCSI SAN is on\nits own dedicated switches and\n\n267\n00:11:43,330 --> 00:11:45,853\nnot sharing with regular LAN traffic.\n\n268\n00:11:45,853 --> 00:11:48,590\n>> Right.\n>> So every PC would have to have\n\n269\n00:11:48,590 --> 00:11:50,010\ntwo adapters.\n\n270\n00:11:50,010 --> 00:11:52,860\nOne adapter that connected\nit to the iSCSI SAN.\n\n271\n00:11:52,860 --> 00:11:53,960\n>> That shared storage.\n\n272\n00:11:53,960 --> 00:11:55,720\n>> Yep, I gotta stop saying PC.\n\n273\n00:11:55,720 --> 00:11:56,510\nIt's not all our PCs.\n\n274\n00:11:56,510 --> 00:11:57,220\nIt's our servers.\n\n275\n00:11:57,220 --> 00:11:58,890\n>> Right.\n>> Any server that needed connectivity to\n\n276\n00:11:58,890 --> 00:12:00,000\nthat shared storage.\n\n277\n00:12:00,000 --> 00:12:04,330\nThey would need to have one network\nadapter that connected to the regular\n\n278\n00:12:04,330 --> 00:12:09,650\nnetwork, and a separate network adapter\nthat ran over here to this iSCSI SAN.\n\n279\n00:12:09,650 --> 00:12:11,435\nAnd now none of my cables would have been.\n\n280\n00:12:11,435 --> 00:12:13,450\n>> [LAUGH]\n>> Well, whatever.\n\n281\n00:12:13,450 --> 00:12:14,690\nYou guys get what I'm trying to do here.\n\n282\n00:12:14,690 --> 00:12:15,237\n>> Yeah, it's copper.\n\n283\n00:12:15,237 --> 00:12:17,080\nRight?\nSo, we can bend copper anyway we want.\n\n284\n00:12:17,080 --> 00:12:19,520\nAnd another thing it does,\nis it helps with security as well.\n\n285\n00:12:19,520 --> 00:12:22,560\nBecause now all that traffic going\nback into that iSCSI SAN and\n\n286\n00:12:22,560 --> 00:12:27,760\nis segregated out from your normal data,\nor your normal traffic, on your network.\n\n287\n00:12:27,760 --> 00:12:28,930\nMaking it a little more difficult for\n\n288\n00:12:28,930 --> 00:12:31,905\nsomebody to try to get access to data\nthat they shouldn't have access to.\n\n289\n00:12:31,905 --> 00:12:32,440\n>> Yeah.\n\n290\n00:12:32,440 --> 00:12:36,120\nAnd so that's gonna help, but\nit's still not gonna make things great.\n\n291\n00:12:36,120 --> 00:12:39,280\nRight?\nBecause even in an absolute perfect world,\n\n292\n00:12:39,280 --> 00:12:41,645\niSCSI is just not great for performance.\n\n293\n00:12:41,645 --> 00:12:42,410\nRight?\n\n294\n00:12:42,410 --> 00:12:45,700\nSo, one thing we can do to help is\nto move the LAN to one network and\n\n295\n00:12:45,700 --> 00:12:48,742\nhave the iSCSI stand be its own\ndedicated network with dedicated necks.\n\n296\n00:12:48,742 --> 00:12:49,740\nAll right?\n\n297\n00:12:49,740 --> 00:12:51,500\nThere's another thing we can do to help.\n\n298\n00:12:51,500 --> 00:12:54,290\nRemember that TCP/IP overhead\nI was talking about?\n\n299\n00:12:54,290 --> 00:12:57,680\nNormally, when we send iSCSI traffic,\nor SCSI traffic.\n\n300\n00:12:57,680 --> 00:13:01,090\nSCSI has its own little checksums\nthat it does for error correction.\n\n301\n00:13:01,090 --> 00:13:05,115\nWhen you stick it in a TCP/IP packet,\nwell it, or it's a.\n\n302\n00:13:05,115 --> 00:13:06,675\n>> TCB's doing the same thing?\n\n303\n00:13:06,675 --> 00:13:07,765\n>> Yeah.\nIt's got its own CRC so\n\n304\n00:13:07,765 --> 00:13:08,665\nyou're actually doubling up.\n\n305\n00:13:08,665 --> 00:13:11,445\nI think at the end of the day you're\ntripling up because I'm pretty sure you\n\n306\n00:13:11,445 --> 00:13:15,165\nget a layer two CRC and then you get\nthe transport layer doing it too.\n\n307\n00:13:15,165 --> 00:13:17,195\nSo you get a couple of CRCs happening.\n\n308\n00:13:17,195 --> 00:13:19,175\nThat's a lot of mathematical operations.\n\n309\n00:13:19,175 --> 00:13:25,020\nSo they do sell special network\nadapters that will do iSCSI offloading.\n\n310\n00:13:25,020 --> 00:13:29,630\nWhere you can have it do all\nthe TCP checksums, as well as\n\n311\n00:13:29,630 --> 00:13:34,860\nthe iSCSI encoding and decoding, and it\ntakes that off the burden of your server.\n\n312\n00:13:34,860 --> 00:13:37,550\nDon't confuse that with\nthe TCP offload engine.\n\n313\n00:13:37,550 --> 00:13:38,200\nTOE.\n\n314\n00:13:38,200 --> 00:13:40,930\nRight?\nA lot of network adapters have TOE.\n\n315\n00:13:40,930 --> 00:13:44,931\nAnd that's great,\nit takes the TCP encoding/decoding and\n\n316\n00:13:44,931 --> 00:13:48,660\nassembly/dissembley off of\nthe burden of your CPU.\n\n317\n00:13:48,660 --> 00:13:51,132\nBut it doesn't do the iSCSI encoding and\ndecoding.\n\n318\n00:13:51,132 --> 00:13:51,644\nRight?\n>> Right.\n\n319\n00:13:51,644 --> 00:13:53,904\n>> So there's dedicated iSCSI adapters.\n\n320\n00:13:53,904 --> 00:13:55,244\nYou can find them out there on\n\n321\n00:13:55,244 --> 00:13:57,498\nvarious websites.\nLet's see if I can find one real quick.\n\n322\n00:13:57,498 --> 00:13:59,954\nIf you're going to go at that route.\n\n323\n00:13:59,954 --> 00:14:01,614\nBut it really is just a stopgap,\n\n324\n00:14:01,614 --> 00:14:03,920\nI find that they're not normally worth it.\n\n325\n00:14:03,920 --> 00:14:08,380\nIf you're married to iSCSI, if you have\nto do iSCSI, these things become useful.\n\n326\n00:14:09,620 --> 00:14:13,035\nBut if you just do a search for\niSCSI adapter.\n\n327\n00:14:13,035 --> 00:14:16,725\nAll an iSCSI adapter is is\na network adapter, is a NIC.\n\n328\n00:14:16,725 --> 00:14:20,185\nBut it's got that special\niSCSI functionality on it.\n\n329\n00:14:20,185 --> 00:14:22,365\nSo like here's one from Solarflare.\n\n330\n00:14:22,365 --> 00:14:23,485\nI'm not familiar with them.\n\n331\n00:14:23,485 --> 00:14:24,215\nIt's only 425 bucks.\n\n332\n00:14:24,215 --> 00:14:26,655\nThe one I'm used to are the QLogics and\nthe Intels, and\n\n333\n00:14:26,655 --> 00:14:27,575\nthey're normally a thousand bucks.\n\n334\n00:14:27,575 --> 00:14:30,340\nYeah, so you can see a QLogic for $852.\n\n335\n00:14:30,340 --> 00:14:31,420\nAnd, I don't see.\n\n336\n00:14:31,420 --> 00:14:32,835\nHP, they're proud of their's aren't they?\n\n337\n00:14:32,835 --> 00:14:33,640\n4300 bucks, what is that?\n\n338\n00:14:33,640 --> 00:14:36,230\n>> There's got to be\nsomething special about that.\n\n339\n00:14:36,230 --> 00:14:38,830\n>> Yeah,\nthat's got to be something special.\n\n340\n00:14:38,830 --> 00:14:42,700\nAnyhow, the point being, when you look at\nthese, as we kind of go down the line.\n\n341\n00:14:42,700 --> 00:14:45,720\nMost of these are just gigabit,\nyou will see some ten giga ones now,\n\n342\n00:14:45,720 --> 00:14:48,270\nbecause they are starting to\nbump up to the ten gig size.\n\n343\n00:14:48,270 --> 00:14:50,424\nNow we start exceeding\nthe bandwidth of a single drive.\n\n344\n00:14:50,424 --> 00:14:51,840\n>> Right.\n>> Your single drive should be about six\n\n345\n00:14:51,840 --> 00:14:54,832\ngigabit but\nwhat if you have eight drives in that SAN?\n\n346\n00:14:54,832 --> 00:14:57,510\nSo, you're still in this bottleneck.\n\n347\n00:14:57,510 --> 00:14:59,720\nRight?\nThat's one of the big problems we have.\n\n348\n00:14:59,720 --> 00:15:05,185\nBut you will find these special\niSCSI adapters that are out there.\n\n349\n00:15:05,185 --> 00:15:09,610\nAnd they're network cards that have\nspecial circuitry on them to improve\n\n350\n00:15:09,610 --> 00:15:11,850\nthe performance of iSCSI communications.\n\n351\n00:15:11,850 --> 00:15:15,410\nAnd you can't really see it here,\nbut it's super blurry.\n\n352\n00:15:15,410 --> 00:15:18,125\nBut one of these chips on\nhere will be an accelerator.\n\n353\n00:15:18,125 --> 00:15:21,035\nSo, there are ways to improve iSCSI.\n\n354\n00:15:21,035 --> 00:15:24,917\nBut at the end of the day,\nit's still just not gonna be great.\n\n355\n00:15:24,917 --> 00:15:25,775\n>> Right.\n>> RIght?\n\n356\n00:15:25,775 --> 00:15:27,665\nSo we've seen a few\ndifferent designs there.\n\n357\n00:15:27,665 --> 00:15:28,175\nRight?\n\n358\n00:15:28,175 --> 00:15:32,630\nWhere it's all shared on one network or\nwe split our LAN out or\n\n359\n00:15:32,630 --> 00:15:37,170\nwe bring in these accelerator boards, but\nthese are all really designed for low end.\n\n360\n00:15:37,170 --> 00:15:37,695\nRight?\n>> Right.\n\n361\n00:15:37,695 --> 00:15:38,805\n>> People who are on a budget or\n\n362\n00:15:38,805 --> 00:15:40,990\njust people who aren't\nworried about performance.\n\n363\n00:15:40,990 --> 00:15:42,635\nRight?\n\n364\n00:15:42,635 --> 00:15:43,935\nBut what if performance is your concern.\n\n365\n00:15:43,935 --> 00:15:46,080\n>> We need a little more money.\n\n366\n00:15:46,080 --> 00:15:47,292\n>> Yeah, [LAUGH] a lot more.\n\n367\n00:15:47,292 --> 00:15:50,875\nUnfortunately there's a huge gap between\nthe bottom solution and the next one.\n\n368\n00:15:50,875 --> 00:15:51,782\n>> Right.\n>> You know,\n\n369\n00:15:51,782 --> 00:15:53,800\nan iSCSI SAN doesn't\nhave to cost you much.\n\n370\n00:15:53,800 --> 00:15:58,206\nThe SAN itself without drives\nwill probably only be 6 to $800,\n\n371\n00:15:58,206 --> 00:15:59,917\nsomewhere in that range.\n\n372\n00:15:59,917 --> 00:16:01,779\nYou start stacking drives in there, and\n\n373\n00:16:01,779 --> 00:16:05,959\nyou can build out a good iSCSI solution\nfor 3 to $5,000, it's pretty reasonable.\n\n374\n00:16:05,959 --> 00:16:07,920\n>> That's not bad.\n\n375\n00:16:07,920 --> 00:16:10,710\n>> Even the high end ones like\nthe Dell EqualLogic ones or\n\n376\n00:16:10,710 --> 00:16:14,320\nwhatever, they're usually\nonly about $10,000.\n\n377\n00:16:14,320 --> 00:16:16,280\nBut the next step, is where we say,\n\n378\n00:16:16,280 --> 00:16:18,640\nall right,\nlet's ditch all this ethernet stuff.\n\n379\n00:16:18,640 --> 00:16:21,060\n>> Right.\n>> That ethernet is just not gonna be\n\n380\n00:16:21,060 --> 00:16:22,440\nthe protocol of choice for us, and\n\n381\n00:16:22,440 --> 00:16:25,760\nwe don't want to take SCSI and\nre-encode it over another protocol.\n\n382\n00:16:25,760 --> 00:16:29,080\nWe want to send native SCSI\nacross a dedicated network.\n\n383\n00:16:29,080 --> 00:16:31,920\nThe solution for\nthat is what's called a Fibre Channel SAN.\n\n384\n00:16:32,980 --> 00:16:36,440\nThe Fibre Channel SAN, it's fancy, right?\n\n385\n00:16:36,440 --> 00:16:36,990\n>> It is.\n\n386\n00:16:36,990 --> 00:16:39,190\n>> It takes a couple of different forms,\nand\n\n387\n00:16:39,190 --> 00:16:42,040\nI've kind of done the two\nmost common forms right here.\n\n388\n00:16:42,040 --> 00:16:47,350\nAnd what you'll see is on the left side,\n\n389\n00:16:47,350 --> 00:16:52,460\nI've got two servers, and they're\njust plugged directly into the SAN.\n\n390\n00:16:52,460 --> 00:16:55,350\nBecause when you buy a Fibre Channel SAN,\na lot of times it'll have at least four\n\n391\n00:16:55,350 --> 00:16:58,370\nports right there on the SAN, so\nyou can plug four nodes into it.\n\n392\n00:16:58,370 --> 00:16:58,970\n>> Right.\n\n393\n00:16:58,970 --> 00:17:00,680\n>> But if you've got more than four nodes,\n\n394\n00:17:00,680 --> 00:17:04,440\nyou'll need to bring in a Fibre Channel\nswitch, and it's not a normal switch.\n\n395\n00:17:04,440 --> 00:17:06,480\nIt's a Fibre Channel SAN switch, right?\n\n396\n00:17:06,480 --> 00:17:09,690\nIt's designed specifically for\nSAN communications.\n\n397\n00:17:09,690 --> 00:17:13,898\nAnd you plug your nodes into this, and\nthey'll have a fiber optic connection\n\n398\n00:17:13,898 --> 00:17:16,625\nthat's capable of pushing\nhuge amounts of data.\n\n399\n00:17:16,625 --> 00:17:21,989\nBut more importantly, it can push SCSI\nwithout having to re-encode it or\n\n400\n00:17:21,989 --> 00:17:24,688\nwhatever into some other protocol.\n\n401\n00:17:24,688 --> 00:17:27,400\nIt can go right on the line\nover to that SAN, and\n\n402\n00:17:27,400 --> 00:17:30,690\nyou communicated as if\nthey were internal drives.\n\n403\n00:17:30,690 --> 00:17:32,215\nGreat for performance.\n\n404\n00:17:32,215 --> 00:17:32,995\nRight.\n\n405\n00:17:32,995 --> 00:17:34,185\nNot so great for the pocket book.\n\n406\n00:17:34,185 --> 00:17:37,515\n>> No, not so much, not gonna be\nputting this at the house, am I?\n\n407\n00:17:37,515 --> 00:17:40,655\n>> I'm sure there are cheap ways to\nimplement this, but in a production\n\n408\n00:17:40,655 --> 00:17:45,170\nenvironment the cheapest Fibre Channel\nSAN I've worked on was $40,000.\n\n409\n00:17:45,170 --> 00:17:50,470\nSo it's a big jump from\nthe low end to this end.\n\n410\n00:17:50,470 --> 00:17:52,040\nBut boy, does it help for performance.\n\n411\n00:17:52,040 --> 00:17:52,790\n>> Yeah, it does.\n\n412\n00:17:52,790 --> 00:17:54,850\n>> And these are dedicated networks,\nright.\n\n413\n00:17:54,850 --> 00:17:57,890\nSo you'd still have another network\ncard that was running over to your LAN.\n\n414\n00:17:57,890 --> 00:18:03,310\nSo this is dedicated just for storage,\nand you're able to push data super fast.\n\n415\n00:18:04,530 --> 00:18:07,150\nThere's a number of different\ncompanies out there that make SANs.\n\n416\n00:18:07,150 --> 00:18:11,980\nHP and EMC are probably the two biggest,\nso you'll see a lot of those.\n\n417\n00:18:11,980 --> 00:18:14,050\nThere are other companies,\nbut they kind of come and\n\n418\n00:18:14,050 --> 00:18:16,350\ngo as they generate these things.\n\n419\n00:18:16,350 --> 00:18:19,220\nBut the big ones, HP and EMC,\n\n420\n00:18:19,220 --> 00:18:23,330\nthey sell a ton of SANs that are out\nthere, and Fibre Channel is their forte.\n\n421\n00:18:23,330 --> 00:18:25,540\nRight?\nThat's what they specialize in.\n\n422\n00:18:25,540 --> 00:18:28,320\nThey do sell iSCSI SANs,\nbut it's really just for\n\n423\n00:18:28,320 --> 00:18:30,440\nthose customers that they're\ngonna lose on price.\n\n424\n00:18:30,440 --> 00:18:31,070\nRight?\nBut\n\n425\n00:18:31,070 --> 00:18:34,760\ntheir customers who're concerned about\nperformance all buy Fibre Channel.\n\n426\n00:18:34,760 --> 00:18:35,440\nRight?\n\n427\n00:18:35,440 --> 00:18:39,130\nSo you go out and you purchase a SAN,\nand it's a Fibre Channel SAN.\n\n428\n00:18:39,130 --> 00:18:42,500\nYou've gotta get your nodes connected to\nit, so all of your nodes are going to need\n\n429\n00:18:42,500 --> 00:18:46,660\nat least one Fibre HBA, right,\nthat's a host bus adapter.\n\n430\n00:18:47,660 --> 00:18:52,060\nUnlike iSCSI, it's not just\na souped-up network card, right?\n\n431\n00:18:52,060 --> 00:18:52,881\n>> Right.\n>> It looks\n\n432\n00:18:52,881 --> 00:18:56,499\nlike a fiber-optic network card, but\nit's actually a hard drive controller.\n\n433\n00:18:56,499 --> 00:18:57,620\n>> Yeah.\n\n434\n00:18:57,620 --> 00:19:02,640\n>> It's like one of those Intel or Promise\nor whatever hard drive controllers you\n\n435\n00:19:02,640 --> 00:19:06,040\nmight pop in a PC, although most PC's have\nit integrated into the motherboard now.\n\n436\n00:19:06,040 --> 00:19:11,060\nThis when you add in, and your server\nwill see that as a hard drive controller,\n\n437\n00:19:11,060 --> 00:19:16,250\nand it will see the Fibre Channel\ndrives as if they were internal drives.\n\n438\n00:19:16,250 --> 00:19:18,620\nThey'll just look like\ninternal drives to us.\n\n439\n00:19:18,620 --> 00:19:22,090\nThat's a big difference from iSCSI where\nyour system has to boot its own OS, and\n\n440\n00:19:22,090 --> 00:19:24,380\nonce it's up,\nthen it connects to the iSCSI stuff.\n\n441\n00:19:24,380 --> 00:19:26,690\nSo it knows they're remote, right?\n\n442\n00:19:26,690 --> 00:19:30,030\nBut with Fibre Channel, it sees them\nright there, and it's ready to rock.\n\n443\n00:19:31,620 --> 00:19:34,850\nSo the Fibre Channel HBAs that you get\nwill probably depend on the vendor.\n\n444\n00:19:34,850 --> 00:19:38,000\nIf you're buying Dell servers or\nHP servers or whatever,\n\n445\n00:19:38,000 --> 00:19:42,030\nyou can buy them with the HBAs in there,\nor you can go and buy them online.\n\n446\n00:19:42,030 --> 00:19:47,770\nSo I was on CDW earlier QLogic,\nthey actually make Fibre HBAs also.\n\n447\n00:19:47,770 --> 00:19:52,400\nLet's just do a search for fibre HBAs.\n\n448\n00:19:53,680 --> 00:19:55,760\n>> A little more expensive than\nour normal network adapters.\n\n449\n00:19:56,910 --> 00:20:00,380\n>> Yeah, we they do a lot more,\nthere's a Brocade.\n\n450\n00:20:00,380 --> 00:20:03,112\nBrocade is a real big name in SANs,\n\n451\n00:20:03,112 --> 00:20:08,780\n1,300 bucks for just one, although this\none has two ports, and that's important.\n\n452\n00:20:08,780 --> 00:20:11,840\nWhy would I want two ports in an HBA?\n\n453\n00:20:11,840 --> 00:20:14,120\n>> We're way back to Network+ for\nthat one.\n\n454\n00:20:14,120 --> 00:20:15,450\n>> Yeah.\nRedundancy, right?\n\n455\n00:20:15,450 --> 00:20:16,810\nThis is your storage.\n\n456\n00:20:16,810 --> 00:20:18,690\n>> Right.\n>> If your fiber cable fails,\n\n457\n00:20:18,690 --> 00:20:19,630\nsomebody trips over a cable,\n\n458\n00:20:19,630 --> 00:20:22,455\nyou don't want your cable to just\nwink out of existence and go offline.\n\n459\n00:20:22,455 --> 00:20:24,520\n>> [LAUGH]\n>> So if we can have more than one link,\n\n460\n00:20:24,520 --> 00:20:25,440\nwe can get redundancy, and\n\n461\n00:20:25,440 --> 00:20:27,960\nI'll show you an example of\nthat probably after the break.\n\n462\n00:20:27,960 --> 00:20:30,540\nSo you'll see a lot of these\nwill have multiple ports.\n\n463\n00:20:30,540 --> 00:20:31,960\nNotice this one right here.\n\n464\n00:20:31,960 --> 00:20:35,400\nIt's a two port, and\nit's rated for 8 gigabit.\n\n465\n00:20:35,400 --> 00:20:37,310\nAll right, so it's an 8 gigabit link.\n\n466\n00:20:37,310 --> 00:20:40,540\nIt exceeds the speed\nof most normal drives.\n\n467\n00:20:40,540 --> 00:20:42,830\nBut you'll see other\nspeeds that are out there.\n\n468\n00:20:42,830 --> 00:20:45,090\nIf you build a Fibre Channel SAN today,\n\n469\n00:20:45,090 --> 00:20:47,000\nthe odds are you're not going to be\nable to get one under 8 gigabyte.\n\n470\n00:20:47,000 --> 00:20:49,060\n>> Right.\n>> That's pretty much the standard now.\n\n471\n00:20:49,060 --> 00:20:51,555\nBut notice this turkey right here,\n56 gigabit.\n\n472\n00:20:52,770 --> 00:20:55,630\nNow, we've got multiple 6 gig drives or\n\n473\n00:20:55,630 --> 00:20:58,130\nwhatever, we can actually\ntake advantage of that.\n\n474\n00:20:58,130 --> 00:20:59,849\n>> Right.\n>> We can communicate at those speeds.\n\n475\n00:21:00,930 --> 00:21:02,370\nYou know, you do pay for it.\n\n476\n00:21:02,370 --> 00:21:04,400\nThey don't show it on this one,\nwell, actually, I guess they do.\n\n477\n00:21:04,400 --> 00:21:05,410\nThis one's complete.\n\n478\n00:21:05,410 --> 00:21:07,970\nI thought this one took those\nlittle adapters, but it doesn't.\n\n479\n00:21:07,970 --> 00:21:09,870\nYeah, it did, 1,000 bucks,\nthat's actually a steal.\n\n480\n00:21:09,870 --> 00:21:10,670\n>> That's not a bad price.\n\n481\n00:21:10,670 --> 00:21:15,140\n>> I've never heard of MelonBox though,\nso who knows what their reliability is.\n\n482\n00:21:15,140 --> 00:21:17,400\nAnd as you start looking\nat some of these guys,\n\n483\n00:21:17,400 --> 00:21:19,760\nyou'll see various vendors that jump in.\n\n484\n00:21:19,760 --> 00:21:25,480\nAnd some are big names, like Lenovo,\nright, names that you know and recognize.\n\n485\n00:21:25,480 --> 00:21:28,500\nOther ones are names that\nyou just never heard of.\n\n486\n00:21:28,500 --> 00:21:32,790\nSo you gotta kinda take it with\na grain of sand, grain of salt.\n\n487\n00:21:32,790 --> 00:21:33,640\nSand, salt, I don't know.\n\n488\n00:21:33,640 --> 00:21:35,143\n>> Either one doesn't sound good.\n\n489\n00:21:35,143 --> 00:21:38,260\n[LAUGH]\n>> But, those are HBAs, and\n\n490\n00:21:38,260 --> 00:21:41,030\nwhen you get connected like that,\nnow you're getting that speed.\n\n491\n00:21:41,030 --> 00:21:43,450\nNow, you're getting that performance.\n\n492\n00:21:43,450 --> 00:21:44,870\nWhen you buy a Fibre Channel SAN,\n\n493\n00:21:44,870 --> 00:21:47,490\nit probably has a limited\namount of fiber ports.\n\n494\n00:21:47,490 --> 00:21:51,360\nGetting a Fibre switch is\nalmost always required.\n\n495\n00:21:51,360 --> 00:21:56,390\nWhen you design a Fibre Channel SAN,\nyou have your SAN.\n\n496\n00:21:56,390 --> 00:21:59,030\n>> Right.\n>> You have the nodes that connect to it,\n\n497\n00:21:59,030 --> 00:22:02,370\nand then you have what's\ncalled your switch fabric.\n\n498\n00:22:02,370 --> 00:22:04,730\nAll right, I'm not sure of the history\nof the word fabric on this one.\n\n499\n00:22:04,730 --> 00:22:07,440\n>> Just all the pieces that\nkinda tie it all together.\n\n500\n00:22:07,440 --> 00:22:12,320\n>> And that fabric, that's what is\nconnecting your nodes to the storage.\n\n501\n00:22:12,320 --> 00:22:14,470\nAnd it may be that your fabric\nis really straightforward,\n\n502\n00:22:14,470 --> 00:22:16,850\nthat it's just two connections like this,\nright?\n\n503\n00:22:16,850 --> 00:22:23,360\nOr it may be much more complex,\nwith one, or even more than one, switch.\n\n504\n00:22:23,360 --> 00:22:26,610\nAnd I mentioned that those switches,\nthey are special switches.\n\n505\n00:22:26,610 --> 00:22:29,140\nThere's a number of\nvendors that make them.\n\n506\n00:22:29,140 --> 00:22:33,180\nBut, one of my favorites,\nif we can find some right here,\n\n507\n00:22:33,180 --> 00:22:36,140\nthe Cisco 9000 series,\nwhich is the ones that I like.\n\n508\n00:22:36,140 --> 00:22:41,530\nLet's do a search for a Fibre Channel\nswitch, and see what turns up here.\n\n509\n00:22:41,530 --> 00:22:45,585\nBut there are other companies like McData,\nI know that one always sounds funny but\n\n510\n00:22:45,585 --> 00:22:47,433\nMcData-\n>> You want fries with that?\n\n511\n00:22:47,433 --> 00:22:51,506\n>> It makes them sound cheap, doesn't it,\nbut it's actually really expensive.\n\n512\n00:22:51,506 --> 00:22:55,162\n[LAUGH] Let's see, I guess I should\nhave added the word SAN to that,\n\n513\n00:22:55,162 --> 00:22:56,680\nFibre Channel SAN switch.\n\n514\n00:22:58,760 --> 00:23:01,660\nIf they don't turn up here,\nI'll just go to Cisco's website.\n\n515\n00:23:01,660 --> 00:23:05,870\nFor years, companies like Brocade and\nMcData would make these Fibre Channel\n\n516\n00:23:05,870 --> 00:23:11,380\nswitches, and they were 15,000, $20,000\njust for the switch for like a 16 port.\n\n517\n00:23:11,380 --> 00:23:13,500\nThey're really, really expensive.\n\n518\n00:23:13,500 --> 00:23:16,680\nAnd Cisco decided they wanted\nto get into that market, and\n\n519\n00:23:16,680 --> 00:23:19,530\nthe best way to do that\nundercut the competition.\n\n520\n00:23:19,530 --> 00:23:23,410\nAnd so they jumped in with these 24\nport switches that were only $4,000.\n\n521\n00:23:23,410 --> 00:23:26,850\nI mean they, I mean they slaughtered\nthe price point, and they've taken over.\n\n522\n00:23:26,850 --> 00:23:30,520\nSo you see those Cisco 9000s a lot.\n\n523\n00:23:30,520 --> 00:23:34,685\nLet me see if I can find their\nproduct page or whatever.\n\n524\n00:23:34,685 --> 00:23:37,500\nBut you go with, Bing, I got Binged.\n\n525\n00:23:37,500 --> 00:23:42,382\n[LAUGH] Here we go, so like the Cisco MDS\n9000 Family, 8 gigabit Fibre Channel\n\n526\n00:23:42,382 --> 00:23:46,083\nswitching, and I was hoping it\nwould have at least a picture.\n\n527\n00:23:46,083 --> 00:23:47,458\nThose are the blades there.\n\n528\n00:23:47,458 --> 00:23:50,083\nBut anyhow, so they make these switches.\n\n529\n00:23:50,083 --> 00:23:51,458\nThey're dedicated for SANs.\n\n530\n00:23:51,458 --> 00:23:55,253\nThey have a lot of really cool features in\nthere that help us to control our SAN, and\n\n531\n00:23:55,253 --> 00:23:58,993\nwe're gonna talk about these in the next\nsegment, but there's a lot of stuff you\n\n532\n00:23:58,993 --> 00:24:02,120\nneed to do to protect your servers and\nisolate your servers.\n\n533\n00:24:02,120 --> 00:24:04,200\nAnd you can do it in software,\nbut it's just not effective.\n\n534\n00:24:04,200 --> 00:24:05,560\n>> Right.\n>> You can do it in hardware.\n\n535\n00:24:05,560 --> 00:24:06,570\nIt's even better.\n\n536\n00:24:06,570 --> 00:24:08,320\nSo that needs to be a part of your design,\n\n537\n00:24:08,320 --> 00:24:12,270\nis you have to think about your servers\nand how you're gonna isolate them.\n\n538\n00:24:12,270 --> 00:24:16,591\nYou may find that in some situations,\nyou have to do two SANs.\n\n539\n00:24:16,591 --> 00:24:17,468\n>> Mm-hm.\n\n540\n00:24:17,468 --> 00:24:20,367\n>> But if you had chosen the right\nswitch you might be able to get away\n\n541\n00:24:20,367 --> 00:24:21,520\nwith one SAN.\n\n542\n00:24:21,520 --> 00:24:23,560\nRight?\nA great example of that would be like,\n\n543\n00:24:23,560 --> 00:24:26,910\nif you have a DMZ and an internal network.\n\n544\n00:24:26,910 --> 00:24:27,750\nRight?\n\n545\n00:24:27,750 --> 00:24:32,260\nDo you want your DMZ servers to have\ntheir storage on the same SAN as your\n\n546\n00:24:32,260 --> 00:24:33,340\ninternal servers?\n\n547\n00:24:33,340 --> 00:24:34,158\n>> Not so much.\n\n548\n00:24:34,158 --> 00:24:35,052\n>> Not normally.\n\n549\n00:24:35,052 --> 00:24:35,780\n>> [LAUGH].\n\n550\n00:24:35,780 --> 00:24:40,540\n>> If we take SAN 1 here, as an example,\nlet's say this is my internal file share,\n\n551\n00:24:40,540 --> 00:24:43,720\nwhere I've got all of my\nsecret corporate data, and\n\n552\n00:24:43,720 --> 00:24:46,028\nthis guy is a web server\nthat faces the internet.\n\n553\n00:24:46,028 --> 00:24:46,874\n>> [LAUGH].\n>> Right?\n\n554\n00:24:46,874 --> 00:24:51,014\nWell, this guy might not have a, there\nmight be a firewall, view of the network,\n\n555\n00:24:51,014 --> 00:24:53,424\npeople can't get to node\n1 from the internet.\n\n556\n00:24:53,424 --> 00:24:55,817\n>> Mm-hm.\n>> But they can get to node 2 because it's\n\n557\n00:24:55,817 --> 00:24:56,742\nmy web server.\n\n558\n00:24:56,742 --> 00:24:58,980\n>> Right.\nIf somebody hacks into this web server\n\n559\n00:25:00,010 --> 00:25:05,170\nthrough the HBA, they could try to connect\nto the storage for this other server.\n\n560\n00:25:05,170 --> 00:25:09,880\nNow if they pull it off successfully, they\ndon't even need a user account on node 1.\n\n561\n00:25:09,880 --> 00:25:11,830\nThey have access to the hard drives.\n\n562\n00:25:11,830 --> 00:25:14,430\nSo they can just snapshot those drives,\ngather all the data, and\n\n563\n00:25:14,430 --> 00:25:15,630\nwalk right off with it.\n\n564\n00:25:15,630 --> 00:25:16,810\nThat's a big problem.\n\n565\n00:25:16,810 --> 00:25:18,410\n>> It's huge.\nIt's like they walk into your server\n\n566\n00:25:18,410 --> 00:25:20,990\ncloset and actually pulls your\nhard drives out of your server.\n\n567\n00:25:20,990 --> 00:25:22,740\n>> And\nyou might not even notice it happened.\n\n568\n00:25:22,740 --> 00:25:24,860\nBecause it's happening\nback here on the SAN,\n\n569\n00:25:24,860 --> 00:25:27,180\nyour file server won't even show access.\n\n570\n00:25:27,180 --> 00:25:28,099\nDoesn't even know it happened.\n\n571\n00:25:28,099 --> 00:25:29,025\nRight.\n\n572\n00:25:29,025 --> 00:25:30,415\nThat's a big problem.\n\n573\n00:25:30,415 --> 00:25:32,705\nSo a lot of people deploy two SANs.\n\n574\n00:25:32,705 --> 00:25:35,475\nOne for internal, one for external,\nor even more than that but\n\n575\n00:25:35,475 --> 00:25:38,175\nat a minimum one for\ninternal, one for external.\n\n576\n00:25:38,175 --> 00:25:42,330\nThe external SAN holding,\nthey're DMZ resources but,\n\n577\n00:25:42,330 --> 00:25:45,860\nif you have one of the Cisco switches or\nthe Brocades, the McDATAs,\n\n578\n00:25:45,860 --> 00:25:48,850\nyou get one of those really good\nfiber channel switches in there,\n\n579\n00:25:48,850 --> 00:25:53,220\nwhat you can do is you can create\npartitioned VSANs, virtual SANs.\n\n580\n00:25:53,220 --> 00:25:58,020\nAnd so you can take this one SAN and\npartition it up, separate the drives out.\n\n581\n00:25:58,020 --> 00:26:01,430\nAnd your servers will think\nthat's it's more than one SAN,\n\n582\n00:26:01,430 --> 00:26:03,340\nwhen in actuality it's just one.\n\n583\n00:26:03,340 --> 00:26:06,740\nAnd so you can create a partition for\nyour DMZs and a partition for\n\n584\n00:26:06,740 --> 00:26:07,860\nyour internal storage.\n\n585\n00:26:07,860 --> 00:26:11,090\nAnd if somebody hacks into one node,\nthey'll only be able to get\n\n586\n00:26:11,090 --> 00:26:14,980\nto the partition that they're in, unless\nthey're able to hack into that switch.\n\n587\n00:26:14,980 --> 00:26:19,200\nWell the switch doesn't allow direct\nconnections over the fiber optic for HB.\n\n588\n00:26:19,200 --> 00:26:20,720\nThat's just for storage.\n\n589\n00:26:20,720 --> 00:26:23,810\nSo they would have to get into your\ninternal network to be able to do that.\n\n590\n00:26:23,810 --> 00:26:26,567\nSo it allows you to start combining\nresources that you wouldn't\n\n591\n00:26:26,567 --> 00:26:28,660\nnormally be able to combine.\n\n592\n00:26:28,660 --> 00:26:32,490\nAnd that's how the big guys like\nMicrosoft Azure, and Amazon S3.\n\n593\n00:26:32,490 --> 00:26:33,520\n>> Mm-hm.\n\n594\n00:26:33,520 --> 00:26:36,880\n>> When you have millions of customers\nputting data on your storage.\n\n595\n00:26:36,880 --> 00:26:37,410\nYou don't know.\n\n596\n00:26:37,410 --> 00:26:38,540\nIs that their private data?\n\n597\n00:26:38,540 --> 00:26:39,450\nTheir public data?\n\n598\n00:26:39,450 --> 00:26:40,430\nYou don't know.\n\n599\n00:26:40,430 --> 00:26:42,720\nSo they do partitioning\nlike this to protect it.\n\n600\n00:26:42,720 --> 00:26:46,520\nAnd it's features like that,\nthat you get by having that switch.\n\n601\n00:26:46,520 --> 00:26:48,400\nYou don't, if you go direct connect.\n\n602\n00:26:48,400 --> 00:26:49,660\n>> All right.\n\n603\n00:26:49,660 --> 00:26:52,200\n>> So direct connect does leave\nyou open to certain risks.\n\n604\n00:26:53,300 --> 00:26:57,700\nAll right, so fiber channel sounds\ngreat for performance, there\n\n605\n00:26:57,700 --> 00:27:00,990\nare some other considerations we need to\nthink about as we start to deploy them,\n\n606\n00:27:00,990 --> 00:27:04,420\nbut looking at the clock, it's probably\na good spot to stop and take a break.\n\n607\n00:27:04,420 --> 00:27:05,450\nWhat do you think, Mike?\n\n608\n00:27:05,450 --> 00:27:06,480\n>> I think so.\n\n609\n00:27:06,480 --> 00:27:07,920\n>> All right, so let's stop here.\n\n610\n00:27:07,920 --> 00:27:08,660\nWhen we get back,\n\n611\n00:27:08,660 --> 00:27:11,900\nwe're gonna talk more about fiber channel\nSANs, and then we're gonna get into\n\n612\n00:27:11,900 --> 00:27:15,280\nsome other features we need to keep in\nmind as we build our storage design.\n\n613\n00:27:15,280 --> 00:27:15,970\nSo, stay tune.\n\n614\n00:27:15,970 --> 00:27:17,442\nWe'll be back after this.\n\n615\n00:27:17,442 --> 00:27:25,315\n[SOUND].\n\n616\n00:27:25,315 --> 00:27:27,770\nAll right, welcome back everybody.\n\n617\n00:27:27,770 --> 00:27:30,790\nI do want to mention one thing real quick\nbefore we go back fiber channel SANS.\n\n618\n00:27:30,790 --> 00:27:33,880\nI was looking the show notes\nduring the break and we\n\n619\n00:27:33,880 --> 00:27:37,400\nforgot to mention one little thing that I\nwant to throw in which is storage spaces.\n\n620\n00:27:39,150 --> 00:27:43,510\nStorage spaces, I guest we'll talk about\nit a little later in the show too.\n\n621\n00:27:43,510 --> 00:27:47,612\nWe cover storage spaces in,\nI think, 74-10 or 74-11 show.\n\n622\n00:27:47,612 --> 00:27:48,813\n>> Yeah, it's 4-11.\n\n623\n00:27:48,813 --> 00:27:51,687\nYeah, 4-10, 4-11.\n>> It's a neat technology that ties to\n\n624\n00:27:51,687 --> 00:27:53,278\ninternal storage, and\n\n625\n00:27:53,278 --> 00:27:58,060\nyou can kind of view that as like\na stepping stone before going to iSCSI.\n\n626\n00:27:58,060 --> 00:28:01,330\nI mentioned DFS,\nthe Distributed File Service And\n\n627\n00:28:01,330 --> 00:28:04,110\nhow we can use that to replicate our data.\n\n628\n00:28:04,110 --> 00:28:07,520\nStorage space is very similar except\nit is all right on one system.\n\n629\n00:28:07,520 --> 00:28:10,820\nIt gives you redundancy, it really\ndoesn't help out for performance.\n\n630\n00:28:10,820 --> 00:28:12,910\nAnd I'm not a big fan of it personally.\n\n631\n00:28:12,910 --> 00:28:13,800\nI don't know what about you Mike.\n\n632\n00:28:13,800 --> 00:28:14,335\n>> Not really.\nAnd\n\n633\n00:28:14,335 --> 00:28:17,685\nyour server is still a single point of\nfailure at that point as far as getting\n\n634\n00:28:17,685 --> 00:28:20,315\naccess to the data, so.\n\n635\n00:28:20,315 --> 00:28:24,765\n>> But I wanted to bring it up\nhere because it is a exam possible\n\n636\n00:28:24,765 --> 00:28:25,390\ntopic, right?\n\n637\n00:28:25,390 --> 00:28:26,075\n>> Mm-hm.\n>> And\n\n638\n00:28:26,075 --> 00:28:29,725\nthe way that you'll see it on the exam\nis not likely as a right answer, but as\n\n639\n00:28:29,725 --> 00:28:33,985\na wrong answer, but you need to be aware\nof it, that storage spaces are there.\n\n640\n00:28:33,985 --> 00:28:35,995\nIt is another type of storage.\n\n641\n00:28:35,995 --> 00:28:38,910\nIt's not gonna factor into\nmost of our designs though.\n\n642\n00:28:38,910 --> 00:28:41,600\nAll right, so\nlet's get back to our Fiber Channel SAN.\n\n643\n00:28:41,600 --> 00:28:42,190\n>> Mm-hm.\n>> So,\n\n644\n00:28:42,190 --> 00:28:44,909\nwhen we talk about building\non a Fibr Channel SAN,\n\n645\n00:28:44,909 --> 00:28:49,314\none of the big considerations that we're\ngoing to have, or probably the biggest\n\n646\n00:28:49,314 --> 00:28:53,760\nconsideration, is how much redundancy do\nwe want to build into our SAN, right?\n\n647\n00:28:53,760 --> 00:28:54,430\n>> Right.\n\n648\n00:28:54,430 --> 00:28:58,150\n>> The two models that I've drawn right\nhere really have no redundancy built into\n\n649\n00:28:58,150 --> 00:28:59,090\nthem whatsoever.\n\n650\n00:28:59,090 --> 00:29:02,540\nRight?\nThese two models focus around scalability.\n\n651\n00:29:02,540 --> 00:29:03,830\nThe model on the left,\n\n652\n00:29:03,830 --> 00:29:07,205\nwe can grow to have as many servers\nas we have ports on the SAN.\n\n653\n00:29:07,205 --> 00:29:07,850\n>> Right.\n\n654\n00:29:07,850 --> 00:29:11,520\n>> So if our SAN has four fiber ports\non it, we can go to four nodes.\n\n655\n00:29:11,520 --> 00:29:14,590\nIf that's the size of our environment,\nthat's good!\n\n656\n00:29:14,590 --> 00:29:15,381\nWe're done!\nProblem solved!\n\n657\n00:29:15,381 --> 00:29:15,950\nRight.\n>> And\n\n658\n00:29:15,950 --> 00:29:18,770\none of those could be our Hyper V host.\n\n659\n00:29:18,770 --> 00:29:21,860\n>> Yeah,\nyou have a ton of VM's stacked on them.\n\n660\n00:29:21,860 --> 00:29:23,145\nSo four physical nodes.\n\n661\n00:29:23,145 --> 00:29:24,240\n>> Yep.\n\n662\n00:29:24,240 --> 00:29:27,685\n>> If we want to go beyond that though,\nwe can switch to a switch.\n\n663\n00:29:27,685 --> 00:29:28,780\n>> Mm-hm..\n>> That sounded dumb,\n\n664\n00:29:28,780 --> 00:29:32,120\nbut anyway [LAUGH] we\ncan switch to a switch.\n\n665\n00:29:32,120 --> 00:29:33,579\n>> We can add a switch.\n\n666\n00:29:33,579 --> 00:29:37,680\n>> [LAUGH] And so now we're limited\nto the ports on our switch, right?\n\n667\n00:29:37,680 --> 00:29:41,705\nOn a positive side, we can have more\nthan the limited ports on our SAN.\n\n668\n00:29:41,705 --> 00:29:43,090\n>> Right.\n>> On a negative side,\n\n669\n00:29:43,090 --> 00:29:45,550\nwe've introduced yet\nanother point of failure, right?\n\n670\n00:29:45,550 --> 00:29:48,830\nSo if the switch fails,\nwe lose our connection to the SAN.\n\n671\n00:29:48,830 --> 00:29:49,900\nThat's a negative.\n\n672\n00:29:49,900 --> 00:29:52,810\nWe've also added cost to it as it's grown.\n\n673\n00:29:52,810 --> 00:29:57,170\nBut either way, we're not introducing\nredundancy or reliability.\n\n674\n00:29:57,170 --> 00:29:58,395\nWe're introducing scalability.\n\n675\n00:29:58,395 --> 00:30:00,960\n>> Right.\n>> That's what that solution does.\n\n676\n00:30:00,960 --> 00:30:05,320\nSo if we want redundancy,\nwe've got choices, all right.\n\n677\n00:30:05,320 --> 00:30:06,435\n>> Break out the wallet.\n\n678\n00:30:06,435 --> 00:30:07,440\n[LAUGH].\n>> Break out the wallet.\n\n679\n00:30:07,440 --> 00:30:09,915\nChoice number one,\nis to go with multiple SANs.\n\n680\n00:30:09,915 --> 00:30:10,940\n>> Mm-hm.\n\n681\n00:30:10,940 --> 00:30:15,060\n>> I can have more than one SAN, and I can\nstart dividing my nodes up across them.\n\n682\n00:30:15,060 --> 00:30:19,460\nSo, I might have node one connected to\na fiber switch, that connects to SAN 1.\n\n683\n00:30:19,460 --> 00:30:23,320\nAnd I might have node four connected to\na different switch that connects to SAN 2.\n\n684\n00:30:23,320 --> 00:30:23,820\nRight.\n\n685\n00:30:23,820 --> 00:30:28,670\nOr maybe it's not so\nmuch that I have separate switches, right?\n\n686\n00:30:28,670 --> 00:30:34,860\nI could actually just bring these around\nand have them all run to the same switch.\n\n687\n00:30:34,860 --> 00:30:35,780\n>> Right.\n\n688\n00:30:35,780 --> 00:30:38,370\n>> And in this case, I've got two SAN's.\n\n689\n00:30:38,370 --> 00:30:41,905\nThat's a strange looking diagram there.\n\n690\n00:30:41,905 --> 00:30:44,020\n>> [LAUGH].\n>> I've got two SAN's and\n\n691\n00:30:44,020 --> 00:30:47,400\nall of my nodes connect to the switch,\nthey gain access to the data.\n\n692\n00:30:47,400 --> 00:30:51,130\nIf one SAN were to fail,\nthe other one's still up.\n\n693\n00:30:51,130 --> 00:30:57,820\nAnd when you buy a SAN,\nif it's an EqualLogic SAN, or a EMC,\n\n694\n00:30:57,820 --> 00:31:03,280\nor an HP, or whatever, they usually have\nSAN to SAN replication functionality.\n\n695\n00:31:03,280 --> 00:31:07,440\nSo they can replicate right\nin between each other,\n\n696\n00:31:07,440 --> 00:31:09,580\nto ensure that their data is in sync.\n\n697\n00:31:09,580 --> 00:31:13,170\nWhen data is written to one, it\nautomatically gets written to the other.\n\n698\n00:31:13,170 --> 00:31:17,460\nAnd the data is there, safe,\nintact, and exactly as we need it.\n\n699\n00:31:17,460 --> 00:31:20,230\nBut that's a function of the physical SAN.\n\n700\n00:31:20,230 --> 00:31:23,890\nIf that's something you need, you need to\nconsider that when you're buying the SAN,\n\n701\n00:31:23,890 --> 00:31:25,160\nwhen you're shopping for features.\n\n702\n00:31:25,160 --> 00:31:28,140\nYou need to say,\ndo I have direct SAN to SAN replication?\n\n703\n00:31:28,140 --> 00:31:28,711\nAnd be careful.\n\n704\n00:31:28,711 --> 00:31:29,750\nRight.\nBecause\n\n705\n00:31:29,750 --> 00:31:32,410\nit's almost always a licensed feature.\n\n706\n00:31:32,410 --> 00:31:35,565\nIn other words, regardless of the hardware\nyou buy, it's probably got the support.\n\n707\n00:31:35,565 --> 00:31:37,065\n>> Mm-hm.\nYou've gotta pay extra for it.\n\n708\n00:31:37,065 --> 00:31:38,530\n>> [LAUGH] Right.\n>> So EMC does that.\n\n709\n00:31:38,530 --> 00:31:39,938\nWhere if you buy the SAN,\n\n710\n00:31:39,938 --> 00:31:44,250\nit's got a hardware SAN to hardware\nSAN replication piece built-in to it.\n\n711\n00:31:44,250 --> 00:31:46,125\nThey have a software one called RepliStor.\n\n712\n00:31:46,125 --> 00:31:47,292\nIt's not great for performance.\n\n713\n00:31:47,292 --> 00:31:50,459\n>> Right.\n>> But for physical SAN to physical SAN.\n\n714\n00:31:50,459 --> 00:31:54,889\nThe functionality is there, but\nyou've gotta pay an extra, it's like 3 or\n\n715\n00:31:54,889 --> 00:32:00,030\n4,000 per year, like a license thing,\nto get that activator to replicate.\n\n716\n00:32:00,030 --> 00:32:03,860\nWhen that happens, if Node 1 is\ntrying to connect up to SAN 1, and\n\n717\n00:32:03,860 --> 00:32:08,690\nSAN 1 fails, it can just connect over\nto SAN 2 and you're in business, right?\n\n718\n00:32:08,690 --> 00:32:10,820\nSo having more than one SAN or\n\n719\n00:32:10,820 --> 00:32:15,470\nmore than one fiber channel switch\nreally starts to improve performance.\n\n720\n00:32:15,470 --> 00:32:18,070\nBut even this model has its limitations.\n\n721\n00:32:18,070 --> 00:32:22,840\nSo when we start going back to like\nthis right here, if one switch fails,\n\n722\n00:32:22,840 --> 00:32:26,320\none SAN goes down, and the nodes\nthat are connected to it goes down.\n\n723\n00:32:26,320 --> 00:32:29,083\nThe other nodes, the other SAN,\nthat's all still up.\n\n724\n00:32:29,083 --> 00:32:34,108\nSo I could have where maybe I'm doing\nnetwork load balancing between Node 2 and\n\n725\n00:32:34,108 --> 00:32:34,970\nNode 3.\n\n726\n00:32:34,970 --> 00:32:37,168\nAnd so, now my clients are unaffected.\n\n727\n00:32:37,168 --> 00:32:39,940\nSure, Node 2 went down, but\nthey just connect to Node 3 and\n\n728\n00:32:39,940 --> 00:32:40,699\nthey're back in business.\n\n729\n00:32:41,748 --> 00:32:46,800\nSo different kinda design structure there\nas we start to layer our technologies.\n\n730\n00:32:46,800 --> 00:32:53,970\nIf you want full redundancy, you've gotta\ngo to a fully redundant switch fabric.\n\n731\n00:32:53,970 --> 00:33:00,130\nAnd in this model it means that every\nSAN has to have two HBA connections.\n\n732\n00:33:00,130 --> 00:33:04,300\nAnd every node has to have two HBAs.\n\n733\n00:33:04,300 --> 00:33:06,030\nWell, I shouldn't say it that way.\n\n734\n00:33:06,030 --> 00:33:08,840\nYou can have one HBA,\nwe saw that when I was shopping earlier.\n\n735\n00:33:08,840 --> 00:33:10,935\n>> [CROSSTALK] more than one port on it.\n\n736\n00:33:10,935 --> 00:33:17,580\n>> If you have a dual port HBA,\nwhich was not this one.\n\n737\n00:33:17,580 --> 00:33:24,990\nIf you have a dual-port HBA then you can\ndo MPIO, Multi Path Input Output, MPIO.\n\n738\n00:33:24,990 --> 00:33:30,530\nAlmost every SAN, even iSCSI SAN\nsupport MPIO, almost all of them.\n\n739\n00:33:30,530 --> 00:33:33,445\nThere's always exceptions, so\nI don't want to be all inclusive.\n\n740\n00:33:33,445 --> 00:33:34,330\n>> [LAUGH]\n>> So\n\n741\n00:33:34,330 --> 00:33:38,220\nif you get a dual port fiber\nchannel adaptor like this.\n\n742\n00:33:38,220 --> 00:33:43,500\nAnd one of your ports were to fail, then\nit'll just use the other port to try and\n\n743\n00:33:43,500 --> 00:33:47,750\nconnect up to a to you know the same SAN\njust going out the other connection.\n\n744\n00:33:47,750 --> 00:33:51,000\nThis gives us redundancy of our fiber\ncable, it gives us redundancy on our\n\n745\n00:33:51,000 --> 00:33:54,380\nswitches, it gives us redundancy\non our physical SANs, right?\n\n746\n00:33:54,380 --> 00:33:57,220\n>> And it gives you more\nperformance as well because it can\n\n747\n00:33:57,220 --> 00:33:59,500\nactually take advantage of\nthat extra bandwidth right?\n\n748\n00:33:59,500 --> 00:34:01,850\nIt can add it all up together and use it.\n\n749\n00:34:01,850 --> 00:34:04,713\nSo you're getting really good performance\nout of it, and if one of them fails,\n\n750\n00:34:04,713 --> 00:34:07,342\nyou drop a little bit of performance,\nbecause you got that redundancy.\n\n751\n00:34:07,342 --> 00:34:11,800\n>> Now the only negative of this is\nwhat if we have an HBA failure, right?\n\n752\n00:34:11,800 --> 00:34:15,687\nAnd so in that scenario, you might\nnot wanna go with one dual-port HBA.\n\n753\n00:34:15,687 --> 00:34:19,200\nYou might instead wanna go with\ntwo single-port HBAs, right?\n\n754\n00:34:19,200 --> 00:34:23,430\nSo now you can handle an HPA failure and\nyou'll just jump right over and\n\n755\n00:34:23,430 --> 00:34:24,520\nuse the other one.\n\n756\n00:34:24,520 --> 00:34:25,635\nThat works, too, right?\n\n757\n00:34:25,635 --> 00:34:29,750\nMPIO actually doesn't care if\nthe ports are on the same HBA or\n\n758\n00:34:29,750 --> 00:34:32,030\nif on separate HBAs,\nit sees it the same way.\n\n759\n00:34:32,030 --> 00:34:34,350\nSo it really doesn't\nmake a difference there.\n\n760\n00:34:34,350 --> 00:34:36,200\nBut on the redundancy side, it does.\n\n761\n00:34:36,200 --> 00:34:39,510\nBut you guys can kinda see where\nthe expense comes in here.\n\n762\n00:34:39,510 --> 00:34:42,940\nWe have two SANs or you don't necessarily\nhave to have a second SAN, right?\n\n763\n00:34:42,940 --> 00:34:45,008\nMaybe this is all just\nredundancy to one SAN and\n\n764\n00:34:45,008 --> 00:34:46,770\nwe can take this guy out of the picture.\n\n765\n00:34:50,940 --> 00:34:51,700\nThere we go.\n\n766\n00:34:51,700 --> 00:34:56,110\nSo, there's just redundant connections\ninto that first SAN, and now,\n\n767\n00:34:56,110 --> 00:35:00,730\nif a switch fails, if a cable fails, if\nan HBA fails, we've got full redundancy.\n\n768\n00:35:00,730 --> 00:35:04,240\nThis is called a full mesh switch fabric,\nright?\n\n769\n00:35:04,240 --> 00:35:07,120\nSo, we've got complete\nredundancy from path to path.\n\n770\n00:35:07,120 --> 00:35:10,660\nBut we've doubled our hardware costs,\ndoubled a lot of that.\n\n771\n00:35:10,660 --> 00:35:12,780\nPros and cons, but\nthis will give us full redundancy.\n\n772\n00:35:12,780 --> 00:35:17,330\n>> We start looking at how much you lose\nwhen your SAN is down or unavailable.\n\n773\n00:35:17,330 --> 00:35:19,410\nThen maybe all of a sudden,\nthe costs don't seem so much.\n\n774\n00:35:21,140 --> 00:35:22,870\n>> One problem this doesn't solve.\n\n775\n00:35:22,870 --> 00:35:27,290\nTo have a full mesh switch fabric\nlike this, all these nodes,\n\n776\n00:35:27,290 --> 00:35:28,410\nthey've gotta be in the same place.\n\n777\n00:35:28,410 --> 00:35:30,340\nThey've gotta be in the same building.\n\n778\n00:35:30,340 --> 00:35:32,820\nThey've gotta have physical\nconnectivity to each other.\n\n779\n00:35:32,820 --> 00:35:34,600\nWhat if my building fails?\n\n780\n00:35:34,600 --> 00:35:38,150\nWhat if my entire building catches on\nfire or gets hit by a hurricane or\n\n781\n00:35:38,150 --> 00:35:39,260\nsomething like that?\n\n782\n00:35:39,260 --> 00:35:40,940\nWe don't get redundancy there.\n\n783\n00:35:40,940 --> 00:35:44,899\nSo in that scenario, we've gotta\nstretch to a multi site SAN, and\n\n784\n00:35:44,899 --> 00:35:47,174\nthat opens up a whole new can of worms.\n\n785\n00:35:47,174 --> 00:35:48,768\nRight?\n>> Yes, it does.\n\n786\n00:35:48,768 --> 00:35:53,110\nThis native iSCSI traffic\nbeing sent across a link,\n\n787\n00:35:53,110 --> 00:35:56,490\nit's not designed to go over\nlarge geographical boundaries.\n\n788\n00:35:56,490 --> 00:35:57,930\nIt's not designed to be routed.\n\n789\n00:35:57,930 --> 00:36:01,070\nSCSI doesn't route, traffic's destined for\na LUN and that's it.\n\n790\n00:36:01,070 --> 00:36:03,668\nThere's no path to get to the LUN,\nyou just get on a cable.\n\n791\n00:36:03,668 --> 00:36:05,418\nSo.\n>> But it's nice, reduces our overhead,\n\n792\n00:36:05,418 --> 00:36:08,418\none of the reasons it's so much faster\nthan trying to do it over TCP IP but\n\n793\n00:36:08,418 --> 00:36:11,000\nthat definitely brings in\na new set of problems.\n\n794\n00:36:11,000 --> 00:36:13,090\nWhen you're geographically\ndistributed like that.\n\n795\n00:36:13,090 --> 00:36:13,930\n>> Absolutely.\n\n796\n00:36:13,930 --> 00:36:16,530\nSo, that's gonna be part of my\nproblem there for replicating.\n\n797\n00:36:16,530 --> 00:36:18,680\nThe other thing is just performance,\nright?\n\n798\n00:36:18,680 --> 00:36:21,580\nWhen we're on a local network,\nwhen everybody is right here together in\n\n799\n00:36:21,580 --> 00:36:25,050\nthe same building, we can communicate\nat the full speeds of these links.\n\n800\n00:36:25,050 --> 00:36:28,790\nBut if you're going between\nmultiple physical locations,\n\n801\n00:36:28,790 --> 00:36:31,810\nare you gonna have a six gig\nlink between you and your motor?\n\n802\n00:36:31,810 --> 00:36:34,030\nA 56 gig link or whatever?\n\n803\n00:36:34,030 --> 00:36:34,610\nNot likely.\n\n804\n00:36:34,610 --> 00:36:38,580\n>> Yeah you spent all that money\non that 56 gigabit HBA and\n\n805\n00:36:38,580 --> 00:36:40,310\nnow your putting it over\nyour WAN connection.\n\n806\n00:36:41,520 --> 00:36:43,340\n>> So that brings in some problems.\n\n807\n00:36:43,340 --> 00:36:48,868\nBut if you absolutely have to have\nmulti-site SAN functionality,\n\n808\n00:36:48,868 --> 00:36:54,370\ncomplete autonomy, then your going to have\nto sacrifice performance for redundancy.\n\n809\n00:36:54,370 --> 00:36:55,800\nYou got to choose.\n\n810\n00:36:55,800 --> 00:37:01,130\nIt's the choice we make on the exam\nwhen it talks about storage designs and\n\n811\n00:37:01,130 --> 00:37:04,210\nit's talking about performance,\nit'll mention that in the requirements.\n\n812\n00:37:04,210 --> 00:37:08,615\nIt'll say this company is really\nconcerned about speed of access.\n\n813\n00:37:08,615 --> 00:37:11,330\nThat it's all gonna be local,\nit's all gonna be fiber channel.\n\n814\n00:37:11,330 --> 00:37:14,190\nBut when it's redundancy\nthat's the number one concern,\n\n815\n00:37:14,190 --> 00:37:16,490\nit's gotta be a redundant solution.\n\n816\n00:37:16,490 --> 00:37:18,920\nWe gotta sacrifice\nperformance to get there.\n\n817\n00:37:18,920 --> 00:37:23,660\nSo here's an example where I've got\na couple of nodes in one location and\n\n818\n00:37:23,660 --> 00:37:28,208\na couple of nodes in another location,\nseparated by a wide area network,\n\n819\n00:37:28,208 --> 00:37:29,650\na WAN, right?\n\n820\n00:37:29,650 --> 00:37:32,310\nAnd maybe this is a metro\nEthernet connection.\n\n821\n00:37:32,310 --> 00:37:35,547\nMaybe it's, who know what,\nwhatever it is we can afford.\n\n822\n00:37:35,547 --> 00:37:38,435\n>> [LAUGH]\n>> Maybe it's an OC 12 or something,\n\n823\n00:37:38,435 --> 00:37:39,129\nwho know.\n\n824\n00:37:39,129 --> 00:37:42,249\nBut we get this connection\nthat's run between our location.\n\n825\n00:37:42,249 --> 00:37:44,970\nOur SANs have to replicate.\n\n826\n00:37:44,970 --> 00:37:50,390\nThese two SANs need to be identical or\nnear identical to be able to do this.\n\n827\n00:37:50,390 --> 00:37:56,130\nAnd so, what we need is really IFC or\ninternet fiber channel.\n\n828\n00:37:57,170 --> 00:38:00,162\nJust like iSCSI, where you take SCSI and\n\n829\n00:38:00,162 --> 00:38:03,980\nre-encode it to send\nit over TCIP networks.\n\n830\n00:38:03,980 --> 00:38:08,709\nWith fiber channel you can do the same\nthing just send it across the internet or\n\n831\n00:38:08,709 --> 00:38:09,594\nacross TCIP.\n\n832\n00:38:09,594 --> 00:38:11,851\nSo you take your fiber\nchannel communications, and\n\n833\n00:38:11,851 --> 00:38:15,880\nwe send it over the ethernet links to pass\nacross that network to the other side.\n\n834\n00:38:15,880 --> 00:38:17,790\nIt's gonna slow down.\n\n835\n00:38:17,790 --> 00:38:22,230\nWell, if we can support that delay and\neverybody's just connected to\n\n836\n00:38:22,230 --> 00:38:25,500\none location,\nmaybe everybody's connected to SAN 1.\n\n837\n00:38:25,500 --> 00:38:28,184\nIf SAN 2 gets a little bit behind,\nit's not such a big deal,\n\n838\n00:38:28,184 --> 00:38:30,093\nbecause everybody is connected to SAN 1.\n\n839\n00:38:30,093 --> 00:38:33,456\nAnd if we have a failure,\nthen we jump over to SAN 2, and sure,\n\n840\n00:38:33,456 --> 00:38:37,160\nwe lost a little data, but\nwe're still online, right?\n\n841\n00:38:37,160 --> 00:38:41,710\nBut if this is mission critical data\nlike stock market transactions, right?\n\n842\n00:38:41,710 --> 00:38:47,190\nSo you're buying or selling stocks and we\ncan't afford to lose those transactions.\n\n843\n00:38:47,190 --> 00:38:50,610\nIn that case, these SANs have\nto be in what's called lockstep.\n\n844\n00:38:50,610 --> 00:38:55,200\nWhen you set up the replication between\nthe SANs, it's gonna ask you that.\n\n845\n00:38:55,200 --> 00:38:58,040\nIs there allowed to be latency or\ndo you need them in lock-step?\n\n846\n00:38:58,040 --> 00:39:00,930\nWhen they're in lock-step,\nyou write data to SAN 1,\n\n847\n00:39:00,930 --> 00:39:05,760\nit tells SAN 2 to do the same thing and\nthen it waits.\n\n848\n00:39:05,760 --> 00:39:09,660\nAnd it waits for SAN 2 to say, okay,\ngot it, wrote it, and then we move on.\n\n849\n00:39:09,660 --> 00:39:11,870\nIt slows things down.\n\n850\n00:39:11,870 --> 00:39:14,560\nAnd if you've ever bought stocks online,\n\n851\n00:39:14,560 --> 00:39:16,350\nyou'll see where a lot\nof people tell you that.\n\n852\n00:39:16,350 --> 00:39:19,770\nWhen you do your purchase, it looks like\nyour purchase happens right away, but\n\n853\n00:39:19,770 --> 00:39:23,380\nit'll say right in there that it may take\nup to three minutes for this to post, or\n\n854\n00:39:23,380 --> 00:39:24,530\nsomething like that.\n\n855\n00:39:24,530 --> 00:39:27,630\nAnd that's letting you know that, yeah,\nlooks like you got a great deal, but you\n\n856\n00:39:27,630 --> 00:39:32,650\ngotta make sure it goes through all the\nway, and maybe things subject to change.\n\n857\n00:39:32,650 --> 00:39:35,520\nAnd as long as you're not a day trader,\nit's not normally that big of a deal.\n\n858\n00:39:35,520 --> 00:39:38,870\nBut you have heard about people\nlosing a good bit of money over these\n\n859\n00:39:38,870 --> 00:39:39,650\nmatter of minutes.\n\n860\n00:39:39,650 --> 00:39:41,510\n>> There was a big issue with that,\n\n861\n00:39:41,510 --> 00:39:44,850\nwith guys that were actually running\nsome of that equipment, with the NYSE.\n\n862\n00:39:44,850 --> 00:39:47,625\nWhere they were looping fiber,\njust for that.\n\n863\n00:39:47,625 --> 00:39:50,334\nBecause they could get that data and\ndo their purchases,\n\n864\n00:39:50,334 --> 00:39:53,722\nhave just miles of fiber looped,\nto slow that down, just a little bit,\n\n865\n00:39:53,722 --> 00:39:55,708\ngive them a few seconds of reaction time.\n\n866\n00:39:55,708 --> 00:39:58,125\n>> Really?\n>> Yeah, it was a big thing.\n\n867\n00:39:58,125 --> 00:39:59,208\n>> Smart.\n\n868\n00:39:59,208 --> 00:40:03,650\nIt's like in Superman 2,\nwhere they did the rounding of decimals,\n\n869\n00:40:03,650 --> 00:40:05,036\nlike Richard Pryor.\n\n870\n00:40:05,036 --> 00:40:07,560\n[LAUGH] If Richard Pryor could do it.\n\n871\n00:40:09,215 --> 00:40:11,205\nAll right.\nWell, you guys get the idea there.\n\n872\n00:40:11,205 --> 00:40:15,455\nAnd we do take a performance hit,\nbut we gain reliability.\n\n873\n00:40:15,455 --> 00:40:21,045\nWe know that if SAN 1 fails, if we lose\nthis SAN entirely, SAN 2 is in lockstep.\n\n874\n00:40:21,045 --> 00:40:25,585\nThese servers are up with the exact same\ndata that the servers over here had and\n\n875\n00:40:25,585 --> 00:40:28,585\nour end users can connect\nup to the new nodes, and\n\n876\n00:40:28,585 --> 00:40:33,340\nwe didn't lose a single transaction,\nnot a single bit right?\n\n877\n00:40:33,340 --> 00:40:37,230\nThis is really expensive, and this is\nabout as expensive as it gets mostly\n\n878\n00:40:37,230 --> 00:40:42,560\nbecause it's designed for people with\nmultiple locations, big business.\n\n879\n00:40:42,560 --> 00:40:46,050\nThe other thing is it's not\nnormally deployed just like this.\n\n880\n00:40:46,050 --> 00:40:48,380\nLet's say that SAN 1 here\nis at my headquarters, and\n\n881\n00:40:48,380 --> 00:40:49,870\nSAN 2 is at disaster recovery.\n\n882\n00:40:49,870 --> 00:40:51,850\nSo yes, this is the model.\n\n883\n00:40:51,850 --> 00:40:55,023\nBut at my headquarters,\nI likely have this.\n\n884\n00:40:55,023 --> 00:40:55,523\n>> Right.\n\n885\n00:40:55,523 --> 00:40:56,350\n>> Right?\n\n886\n00:40:56,350 --> 00:41:01,050\nI'm likely doing replication right here\nwith a full mesh for my smaller failures.\n\n887\n00:41:01,050 --> 00:41:04,260\nNot every failure is my entire\nbuilding failing, right?\n\n888\n00:41:04,260 --> 00:41:05,510\nSo I might have simple things.\n\n889\n00:41:05,510 --> 00:41:08,710\nLike server failing, hard drive's failing,\nnetwork switches failing.\n\n890\n00:41:08,710 --> 00:41:12,880\nSo we have a fully redundant mesh in our\nheadquarters, and we combine that with\n\n891\n00:41:12,880 --> 00:41:16,920\na multi-side SAN to have that\nreplica over at the other location.\n\n892\n00:41:16,920 --> 00:41:20,480\nAnd if they're in lockstep, we have\ncomplete guarantees that our data is\n\n893\n00:41:20,480 --> 00:41:24,720\nidentical, and\nwe are as resilient as possible.\n\n894\n00:41:24,720 --> 00:41:29,400\nOur performance is a shadow of what it\nwould be in a single SAN model, but\n\n895\n00:41:29,400 --> 00:41:30,880\nit's definitely more reliable.\n\n896\n00:41:30,880 --> 00:41:32,030\n>> We've got moths in our pocket book.\n\n897\n00:41:33,730 --> 00:41:36,550\n>> So it all comes down to your\ncustomers requirements, right?\n\n898\n00:41:36,550 --> 00:41:38,000\nWhat it is they're looking for.\n\n899\n00:41:38,000 --> 00:41:40,170\nAnd this stuff can be really effective.\n\n900\n00:41:40,170 --> 00:41:45,460\nOne of the stories that I use in\nthe September 11th attacks, right?\n\n901\n00:41:45,460 --> 00:41:47,200\nThe World Trade Center were destroyed.\n\n902\n00:41:47,200 --> 00:41:48,190\n>> Right.\n>> And\n\n903\n00:41:48,190 --> 00:41:51,700\nif you remember back to there,\nthe New York Stock Exchange.\n\n904\n00:41:51,700 --> 00:41:54,150\nThey shut down for what,\nlike three days didn't they?\n\n905\n00:41:54,150 --> 00:41:55,210\n>> Yeah, I believe so.\n>> Three or four days.\n\n906\n00:41:55,210 --> 00:41:55,840\n>> Yep.\n\n907\n00:41:55,840 --> 00:41:59,360\n>> So they shut down, and it was\nbecause their main trading floor was\n\n908\n00:41:59,360 --> 00:42:02,310\nright there inside of one of\nthe World Trade Center buildings.\n\n909\n00:42:02,310 --> 00:42:04,280\nAnd so it was destroyed, right?\n\n910\n00:42:04,280 --> 00:42:08,430\nWell, a lot of people assume they did that\nbecause they lost the data center, but\n\n911\n00:42:08,430 --> 00:42:12,270\nthe reality is they actually replicated\nall their to data centers in New Jersey.\n\n912\n00:42:12,270 --> 00:42:15,900\nSo, they actually had completely\nredundant data centers in New Jersey\n\n913\n00:42:15,900 --> 00:42:17,200\nthat were up to the minute.\n\n914\n00:42:17,200 --> 00:42:18,320\nThey were live.\n\n915\n00:42:18,320 --> 00:42:22,140\nAnd they actually did cut over,\nbecause it was automatic, so\n\n916\n00:42:22,140 --> 00:42:23,650\nit cut over to New Jersey.\n\n917\n00:42:23,650 --> 00:42:26,970\nAnd then they made the decision\nto shut down for a few days.\n\n918\n00:42:26,970 --> 00:42:29,410\nRight?\nIn respect and all that.\n\n919\n00:42:29,410 --> 00:42:32,590\nSo, a lot of people assume they\nshut down because they had to.\n\n920\n00:42:32,590 --> 00:42:34,180\nBecause they lost that facility, but\n\n921\n00:42:34,180 --> 00:42:35,980\nin reality they did it\nbecause they wanted to.\n\n922\n00:42:35,980 --> 00:42:36,890\nRight?\nAnd they thought it was\n\n923\n00:42:36,890 --> 00:42:38,050\nthe right thing to do.\n\n924\n00:42:38,050 --> 00:42:41,130\nThey had a full, or they have still-\n>> Yes.\n\n925\n00:42:41,130 --> 00:42:43,330\n>> I'm sure,a fully redundant environment.\n\n926\n00:42:43,330 --> 00:42:45,800\nThey were ready to be back in\nbusiness in a moment's notice.\n\n927\n00:42:45,800 --> 00:42:47,200\nAnd that's important.\n\n928\n00:42:47,200 --> 00:42:50,671\nIf you're a stock exchange, and\nyou're not exchanging stocks-\n\n929\n00:42:50,671 --> 00:42:51,514\n>> [LAUGH] Right.\n\n930\n00:42:51,514 --> 00:42:52,106\n>> Then what are you doing?\n\n931\n00:42:52,106 --> 00:42:53,250\nYou're just sitting there\n\n932\n00:42:53,250 --> 00:42:54,315\nlosing reputation-\n>> Yep.\n\n933\n00:42:54,315 --> 00:42:55,790\n>> by yourself.\n\n934\n00:42:55,790 --> 00:42:57,920\nSo definitely a big thing to keep in mind.\n\n935\n00:42:57,920 --> 00:43:01,870\nSo is there just one size fits all for\nthese designs?\n\n936\n00:43:01,870 --> 00:43:02,980\nAbsolutely not.\n\n937\n00:43:02,980 --> 00:43:04,178\nIs money a big factor?\n\n938\n00:43:04,178 --> 00:43:05,750\n>> [LAUGH]\n>> Absolutely yes.\n\n939\n00:43:05,750 --> 00:43:07,460\nBut it also comes down to your needs.\n\n940\n00:43:07,460 --> 00:43:09,726\nWhen you go to design storage for\na network,\n\n941\n00:43:09,726 --> 00:43:12,800\nyou need to find out what\nsomeone's budget is, first off.\n\n942\n00:43:12,800 --> 00:43:15,150\nBecause there may just be\nthings that aren't achievable.\n\n943\n00:43:16,160 --> 00:43:18,910\nBut the budget is what determines that.\n\n944\n00:43:18,910 --> 00:43:23,140\nAfter that, you need to determine\nwhat kind of speed they need, and\n\n945\n00:43:23,140 --> 00:43:26,030\nwhat kind of redundancy and\nreliability they need.\n\n946\n00:43:26,030 --> 00:43:30,088\nAnd don't just ask, on the exam they\nwon't put you in the situation, but\n\n947\n00:43:30,088 --> 00:43:32,838\nin real life, don't go up to a CIO or\nIT manager and\n\n948\n00:43:32,838 --> 00:43:35,940\nsay okay, what kind of\navailability do we want on this?\n\n949\n00:43:35,940 --> 00:43:37,398\n>> Right.\n>> Cuz what are they gonna say?\n\n950\n00:43:37,398 --> 00:43:38,440\n>> 100% all the time.\n\n951\n00:43:38,440 --> 00:43:40,273\n>> Yeah!\nThere's only one answer to that question.\n\n952\n00:43:40,273 --> 00:43:40,898\n>> Absolutely.\n\n953\n00:43:40,898 --> 00:43:42,648\n>> But when you tell them,\nokay, I can do that.\n\n954\n00:43:42,648 --> 00:43:43,898\nI'm gonna need $8 million.\n\n955\n00:43:43,898 --> 00:43:45,649\n>> [LAUGH]\n>> Then they go, ooh.\n\n956\n00:43:45,649 --> 00:43:47,482\nMaybe we don't, you know, what's 98%?\n\n957\n00:43:47,482 --> 00:43:49,898\n[LAUGH]\n>> [LAUGH]\n\n958\n00:43:49,898 --> 00:43:51,750\n>> So that's research.\n\n959\n00:43:51,750 --> 00:43:55,760\nSo you need to find out what they really,\nactually need.\n\n960\n00:43:55,760 --> 00:43:59,120\nI used to work for a bank,\nand we were FDIC insured.\n\n961\n00:43:59,120 --> 00:44:03,820\nAnd when you're FDIC insured, they set\nrules and guidelines for your operation.\n\n962\n00:44:03,820 --> 00:44:09,680\nAnd in our rules it said that if our bank\nhad some kind of catastrophic failure,\n\n963\n00:44:09,680 --> 00:44:13,670\nwe had to be back in business in 72 hours.\n\n964\n00:44:13,670 --> 00:44:15,280\nIf we weren't back in\nbusiness in 72 hours,\n\n965\n00:44:15,280 --> 00:44:17,540\nthe FDIC would step in take over the bank.\n\n966\n00:44:17,540 --> 00:44:19,300\nThat was in the rules.\n\n967\n00:44:19,300 --> 00:44:24,950\nSo, when we design for failure and\nfailover and all that, 72 hours, 3 days.\n\n968\n00:44:24,950 --> 00:44:26,140\nThat's what our plan was.\n\n969\n00:44:26,140 --> 00:44:31,940\nNow, it's really easy to build redundancy\nwhen it's okay to be down for three days.\n\n970\n00:44:31,940 --> 00:44:32,990\nAll right.\n\n971\n00:44:32,990 --> 00:44:36,771\nBut if you're amazon.com, and\nyou're losing $1 million an hour,\n\n972\n00:44:36,771 --> 00:44:38,481\ndo you wanna be down for 3 days?\n\n973\n00:44:38,481 --> 00:44:39,690\n>> Three days is not gonna work.\n\n974\n00:44:39,690 --> 00:44:40,530\n>> No.\n>> No.\n\n975\n00:44:40,530 --> 00:44:43,860\nSo Amazon is gonna dump a ton of\nmoney into building that redundancy.\n\n976\n00:44:43,860 --> 00:44:45,490\nIt makes sense for them.\n\n977\n00:44:45,490 --> 00:44:49,600\nVersus at the bank, we put some\ngood money into our redundancy, but\n\n978\n00:44:49,600 --> 00:44:52,390\nwe didn't go as crazy as we could have,\nright?\n\n979\n00:44:52,390 --> 00:44:55,630\nWe kept our expenses, I think,\nour redundant storage model,\n\n980\n00:44:55,630 --> 00:44:58,420\nthe full price tag and\nit ended up being about $250,000.\n\n981\n00:44:58,420 --> 00:45:00,500\nSo we did spend a good bit, but,\n\n982\n00:45:00,500 --> 00:45:03,730\nwe weren't as super redundant\nas a lot of organizations are.\n\n983\n00:45:03,730 --> 00:45:06,045\nYou've gotta design for\nthe needs of your customer.\n\n984\n00:45:07,615 --> 00:45:08,115\nAll right.\n\n985\n00:45:09,215 --> 00:45:11,375\nI think that's all I've\ngot on fiber channel SANs.\n\n986\n00:45:11,375 --> 00:45:13,325\nLet's see,\nanything else to mention on that one?\n\n987\n00:45:13,325 --> 00:45:14,860\nNah, that's about it.\n\n988\n00:45:14,860 --> 00:45:15,677\n>> Good?\n\n989\n00:45:15,677 --> 00:45:19,155\n>> All right, so what we're gonna talk\nabout the rest of the show are some of\n\n990\n00:45:19,155 --> 00:45:22,575\nthe other bells and whistles we wanna\nkeep in mind as we design our storage,\n\n991\n00:45:22,575 --> 00:45:26,870\nsome of the things that we may wanna\nfactor in as part of our design.\n\n992\n00:45:26,870 --> 00:45:27,580\nAll right.\n\n993\n00:45:27,580 --> 00:45:31,480\nSo let's talk about one easy one,\ncuz we're kinda winding down this segment.\n\n994\n00:45:31,480 --> 00:45:35,360\nSo we talked about iSCSI SANs\nat the beginning of the episode.\n\n995\n00:45:35,360 --> 00:45:39,210\nAnd iSCSI SANs, they're not expensive,\nthey're not high end,\n\n996\n00:45:39,210 --> 00:45:40,660\ntheir performance is poor.\n\n997\n00:45:40,660 --> 00:45:41,530\nBut you may use them, right?\n\n998\n00:45:41,530 --> 00:45:43,000\nYou may need to use them.\n\n999\n00:45:43,000 --> 00:45:45,700\nYou may actually be in an environment\nwhere you use more than\n\n1000\n00:45:45,700 --> 00:45:47,260\none of them, right?\n\n1001\n00:45:47,260 --> 00:45:50,220\nIf you have more than one iSCSI SAN,\n\n1002\n00:45:50,220 --> 00:45:52,960\nit can be challenging to keep\ntrack of all of them, right?\n\n1003\n00:45:52,960 --> 00:45:54,660\nAnd the connections, and so on.\n\n1004\n00:45:54,660 --> 00:45:57,020\nWhen you've got a fiber\nchannel environment,\n\n1005\n00:45:58,270 --> 00:46:02,638\nthat HBA is connected to a fiber channel\nswitch, and it's connected to the SANs.\n\n1006\n00:46:02,638 --> 00:46:06,230\nSo the HPA can do a scan, and it can just\ntell you all the lines that are out there.\n\n1007\n00:46:06,230 --> 00:46:07,760\nSuper easy.\n\n1008\n00:46:07,760 --> 00:46:11,750\nBut on an iSCSI SAN you can't do that,\nbecause it's connected to your LAN.\n\n1009\n00:46:11,750 --> 00:46:14,180\nYou'd have to do a scan, and\nyou find all sorts of stuff out there.\n\n1010\n00:46:14,180 --> 00:46:15,410\n>> Absolutely, yeah.\n\n1011\n00:46:15,410 --> 00:46:20,140\n>> So to help facilitate that,\nMicrosoft has the SNS,\n\n1012\n00:46:20,140 --> 00:46:23,090\nwhich is the Storage Name Server\nfunctionality.\n\n1013\n00:46:23,090 --> 00:46:27,356\nAnd I know we covered that in\n>> [CROSSTALK]\n\n1014\n00:46:27,356 --> 00:46:29,308\n>> One of the other shows about how to\n\n1015\n00:46:29,308 --> 00:46:30,530\nimplement it.\n\n1016\n00:46:30,530 --> 00:46:37,770\nThe wide implement iSNS is that we can get\nmultiple iSCSI servers set up, or SANs.\n\n1017\n00:46:37,770 --> 00:46:40,040\nYou can have as many as you want.\n\n1018\n00:46:40,040 --> 00:46:43,760\nAnd you get them to register\nwith an iSNS server.\n\n1019\n00:46:43,760 --> 00:46:45,360\n>> And when you fire up a new node,\n\n1020\n00:46:45,360 --> 00:46:47,590\ninstead of having to point to\nall these individual iSCSI SANs,\n\n1021\n00:46:47,590 --> 00:46:52,460\nyou just point them to the iSNS server,\nthe see the SANs and off they go, right?\n\n1022\n00:46:52,460 --> 00:46:56,870\nSo in an environment where you\nhave more than one iSCSI SAN,\n\n1023\n00:46:56,870 --> 00:46:59,080\niSNS can save you a little bit of time,\nright?\n\n1024\n00:46:59,080 --> 00:47:02,390\nThink of it as like DNS for iSCSI SANs.\n\n1025\n00:47:02,390 --> 00:47:03,840\n>> Yeah.\nOtherwise, we gotta know all the,\n\n1026\n00:47:03,840 --> 00:47:06,610\njust like with DNS, without it you\nhave to know the IP addresses.\n\n1027\n00:47:06,610 --> 00:47:11,660\nWithout the iSNS, you've gotta know all\nthose IQNs, those iSCSI qualifying names,\n\n1028\n00:47:11,660 --> 00:47:14,320\nthose big old long identifiers\nthat get generated.\n\n1029\n00:47:14,320 --> 00:47:14,920\n>> Yeah.\n\n1030\n00:47:14,920 --> 00:47:16,540\nAnd it's super easy to deploy.\n\n1031\n00:47:16,540 --> 00:47:18,740\nWe deployed it in that earlier episode.\n\n1032\n00:47:18,740 --> 00:47:21,420\nDefinitely jump over to,\nI'm pretty sure it was 74-12.\n\n1033\n00:47:21,420 --> 00:47:23,980\nWe'll have to put in the show\nnotes which episode it was\n\n1034\n00:47:23,980 --> 00:47:25,670\nto see it implemented there.\n\n1035\n00:47:25,670 --> 00:47:29,555\nBut the why is simply if you've\ngot more than one iSCSI SAN.\n\n1036\n00:47:29,555 --> 00:47:32,615\nAnd you can deploy it with one if you want\njust to keep it consistent knowing that\n\n1037\n00:47:32,615 --> 00:47:35,095\nyour going to grow later on,\nbut that's it's purpose.\n\n1038\n00:47:35,095 --> 00:47:37,775\nJust to make it easier\nto discover iSCSI SANs.\n\n1039\n00:47:37,775 --> 00:47:38,705\nIs it required?\n\n1040\n00:47:38,705 --> 00:47:41,515\nAbsolutely not, if you've got good\ndocumentation you don't need it.\n\n1041\n00:47:41,515 --> 00:47:42,168\n>> Right.\n>> All right.\n\n1042\n00:47:42,168 --> 00:47:45,667\nBut that's the same thing\nas saying is DHCP required?\n\n1043\n00:47:45,667 --> 00:47:46,168\nIt's not.\n\n1044\n00:47:46,168 --> 00:47:50,208\nYou could do all static IPs, but\nit sure makes life a lot easier.\n\n1045\n00:47:50,208 --> 00:47:53,293\nSo, if you see a question that's\ntalking about administrative effort.\n\n1046\n00:47:53,293 --> 00:47:57,230\n>> [LAUGH] Microsoft's favorite little\nline to throw on every question.\n\n1047\n00:47:57,230 --> 00:48:00,585\n>> So, we've got an iSCSI SAN we wanna\nreduce the administrative effort of\n\n1048\n00:48:00,585 --> 00:48:03,170\nconnecting up nodes to all\nthese different iSCSI SANs.\n\n1049\n00:48:03,170 --> 00:48:04,720\nWhat's the solution for us?\n\n1050\n00:48:04,720 --> 00:48:05,490\niSNS.\n\n1051\n00:48:06,750 --> 00:48:09,830\nA little funny caveat on iSNS.\n\n1052\n00:48:09,830 --> 00:48:14,630\nIf you've got third party iSCSI hardware,\nit works great with iSNS.\n\n1053\n00:48:14,630 --> 00:48:17,230\nBut if you're using\nthe Microsoft iSCSI target, so\n\n1054\n00:48:17,230 --> 00:48:20,710\nif you're using Windows storage server,\nit doesn't register with ISNS.\n\n1055\n00:48:20,710 --> 00:48:25,598\nIn that scenario, the ISNS server\ndoesn't really help you very much.\n\n1056\n00:48:25,598 --> 00:48:27,990\n>> Very odd that they didn't include\nsupport for their own product in there.\n\n1057\n00:48:27,990 --> 00:48:29,480\n>> Who knows why.\n\n1058\n00:48:29,480 --> 00:48:32,760\nI've read some articles\nabout how to force it, but\n\n1059\n00:48:32,760 --> 00:48:34,110\nI've tried them, and it doesn't work.\n\n1060\n00:48:34,110 --> 00:48:37,370\nI don't know what the article authors\nare doing that I did differently.\n\n1061\n00:48:39,260 --> 00:48:43,900\nAll right, so what are some of the other\nlittle bells and whistles we've got?\n\n1062\n00:48:43,900 --> 00:48:45,555\nLet's see, storage pools.\n\n1063\n00:48:45,555 --> 00:48:46,200\n>> Mm-hm.\n\n1064\n00:48:46,200 --> 00:48:46,970\nStorage pools.\n\n1065\n00:48:46,970 --> 00:48:47,720\nGood stuff there.\n\n1066\n00:48:47,720 --> 00:48:49,845\nWell, I don't know, interesting stuff.\n\n1067\n00:48:49,845 --> 00:48:52,570\n>> [LAUGH]\n>> You know, we mention storage spaces and\n\n1068\n00:48:52,570 --> 00:48:53,810\nI always mix these things up.\n\n1069\n00:48:53,810 --> 00:48:56,810\nStorage pools and storage spaces.\n\n1070\n00:48:56,810 --> 00:49:01,655\nStorage pools are actually pretty useful\nversus storage spaces, in my opinion.\n\n1071\n00:49:01,655 --> 00:49:05,756\n[LAUGH] When you have SANs,\nyou may have more than one SAN or\n\n1072\n00:49:05,756 --> 00:49:10,639\nyou may have one SAN that just has\nmore than one type of storage in it.\n\n1073\n00:49:10,639 --> 00:49:17,980\nYou might have fiber channel rated\n15000 RPMs 6 gigabyte iSCSI drives.\n\n1074\n00:49:17,980 --> 00:49:25,580\nAnd then you might have 5400 RPM three\ngigabit SATA drives, or gigabyte drive.\n\n1075\n00:49:25,580 --> 00:49:28,600\nSo, if you've got these really fast,\n\n1076\n00:49:28,600 --> 00:49:33,650\nreally expensive drives and\nyou get these really cheap slower drives.\n\n1077\n00:49:33,650 --> 00:49:37,520\nHow do you segregate you data across those\nto make sure that the important stuff uses\n\n1078\n00:49:37,520 --> 00:49:40,390\nthe fast drives and the unimportant\nstuff uses the slow drives.\n\n1079\n00:49:40,390 --> 00:49:41,580\n>> We can try to do it manually.\n\n1080\n00:49:41,580 --> 00:49:45,750\nCreate a set of storage pools with just\nour fast drives in it and put all of our\n\n1081\n00:49:45,750 --> 00:49:49,390\ndata that needs that high access or\nis frequently accessed over there.\n\n1082\n00:49:49,390 --> 00:49:52,540\nAnd we can create another pool\nwith our slower drives and\n\n1083\n00:49:52,540 --> 00:49:55,340\nput some of our less accessed data there.\n\n1084\n00:49:55,340 --> 00:49:57,990\nOr, we can get into the tiered storage.\n\n1085\n00:49:57,990 --> 00:49:59,920\n>> Yep.\n>> And that's pretty sweet stuff.\n\n1086\n00:49:59,920 --> 00:50:04,192\n>> And tiered storage, that helps us to\nhave this happen automatically, right?\n\n1087\n00:50:04,192 --> 00:50:08,480\n>> Mm-hm. [COUGH] >> With tiered storage,\nwe can take one LAN on our SAN and\n\n1088\n00:50:08,480 --> 00:50:12,000\nsay that this LAN is going to be\n15,000 RPM, fiber channel SCSI drive.\n\n1089\n00:50:12,000 --> 00:50:13,730\nSuper fast, super expensive.\n\n1090\n00:50:13,730 --> 00:50:15,600\nAll right, and\nthen we take another LAN and\n\n1091\n00:50:15,600 --> 00:50:19,730\nwe say this is going to be our cheap\ndrives, 5400 rpm, slow SATA drives.\n\n1092\n00:50:19,730 --> 00:50:21,000\nJust cheap and dirty.\n\n1093\n00:50:21,000 --> 00:50:22,780\nGet as much of it as you can, right.\n\n1094\n00:50:22,780 --> 00:50:26,560\nSo, we can define those\nas different tiers or\n\n1095\n00:50:26,560 --> 00:50:31,020\nthe example that Microsoft likes to\nuse is that you might have SSDs.\n\n1096\n00:50:31,020 --> 00:50:35,160\nSolid State Drives, that are super mega\nfast, but super mega expensive, and\n\n1097\n00:50:35,160 --> 00:50:36,720\nthen you've got traditional\nspinning disks.\n\n1098\n00:50:36,720 --> 00:50:37,670\nThose are our two tiers.\n\n1099\n00:50:37,670 --> 00:50:39,270\nYou can go either way on it.\n\n1100\n00:50:39,270 --> 00:50:41,750\nSo, if we go that route, that's fine.\n\n1101\n00:50:41,750 --> 00:50:44,830\nWe can separate things out manually,\nlike you said, Mike.\n\n1102\n00:50:44,830 --> 00:50:47,560\nBut with storage tiers,\nwe can tell Windows to do it for us.\n\n1103\n00:50:47,560 --> 00:50:52,260\nTo say, if data has been frequently\naccessed, move it over to the SSDs.\n\n1104\n00:50:52,260 --> 00:50:54,560\n>> Yeah.\nSo, we really create that pool, and\n\n1105\n00:50:54,560 --> 00:50:56,230\nwe don't segregate out\nthe different speeds.\n\n1106\n00:50:56,230 --> 00:50:58,290\nWe put them all into that same pool.\n\n1107\n00:50:58,290 --> 00:51:01,510\nAnd then it can see those faster drives,\nif it recognizes them.\n\n1108\n00:51:01,510 --> 00:51:04,050\nI've seen, with solid state drives,\none thing you gotta watch for\n\n1109\n00:51:04,050 --> 00:51:08,070\nis those solid state drives will\nsometimes come up as unrecognized.\n\n1110\n00:51:08,070 --> 00:51:11,000\nThen it won't realize that\nthey're a much faster drive, and\n\n1111\n00:51:11,000 --> 00:51:12,950\nthen start moving that data out there.\n\n1112\n00:51:12,950 --> 00:51:14,660\n>> And what does Microsoft always say?\n\n1113\n00:51:14,660 --> 00:51:19,320\nCheck the Windows hardware quality labs,\nWHQL compatibility list.\n\n1114\n00:51:19,320 --> 00:51:22,960\n>> Then there's some PowerShell commands\nyou can fire off to label them correctly.\n\n1115\n00:51:22,960 --> 00:51:24,930\nAnd then it will pick it up correctly.\n\n1116\n00:51:24,930 --> 00:51:27,570\n>> Yeah, I think we did that in\nthe show 'cause we were faking the SSD.\n\n1117\n00:51:27,570 --> 00:51:30,600\nIt was Nate that did that.\n\n1118\n00:51:30,600 --> 00:51:32,430\nSo, our way's to fake it,\nbut you shouldn't have to.\n\n1119\n00:51:32,430 --> 00:51:35,150\nIf you buy supported drives,\nit'll recognize it.\n\n1120\n00:51:35,150 --> 00:51:38,100\nThe most important part here is\nit does it for us automatically.\n\n1121\n00:51:38,100 --> 00:51:43,280\nSo, if we have a design that's requiring\nus to specify different speed drives for\n\n1122\n00:51:43,280 --> 00:51:44,630\ndifferent purposes.\n\n1123\n00:51:44,630 --> 00:51:49,210\nStorage pools become really handy.\n\n1124\n00:51:49,210 --> 00:51:52,420\nNow, what are some scenarios\nwhere that comes in.\n\n1125\n00:51:52,420 --> 00:51:53,410\nRight?\n\n1126\n00:51:53,410 --> 00:51:56,850\nThe primary example would just\nbe things like a file share.\n\n1127\n00:51:56,850 --> 00:51:58,780\n>> Yep.\n>> If we have a straight up file share,\n\n1128\n00:51:58,780 --> 00:52:01,540\nthere's going to be documents on there\nthat people work with everyday, and\n\n1129\n00:52:01,540 --> 00:52:05,200\nthere's gonna be other documents that just\nsat around not being used maybe even for\n\n1130\n00:52:05,200 --> 00:52:05,750\nyears.\n\n1131\n00:52:05,750 --> 00:52:06,690\n>> Right?\n>> Right.\n\n1132\n00:52:06,690 --> 00:52:10,300\nSo, it makes sense to move the frequently\naccessed stuff to fast drives, and\n\n1133\n00:52:10,300 --> 00:52:12,300\nthe not so frequent stuff to slow drives.\n\n1134\n00:52:12,300 --> 00:52:14,280\nThat's a great example of\nhow we might use that.\n\n1135\n00:52:15,540 --> 00:52:17,360\nAlso with backups.\n\n1136\n00:52:17,360 --> 00:52:22,160\nIf you're backing up to a SAN partition or\na LAN, you might want,\n\n1137\n00:52:22,160 --> 00:52:26,710\nas I write my current backup, I want to\nwrite that to SSDs because it's fast.\n\n1138\n00:52:26,710 --> 00:52:30,235\nBut then if the backup sits there and\nisn't being used, then it gets shifted\n\n1139\n00:52:30,235 --> 00:52:34,170\nover to the SATA drive where it can just\nsit there and be idle like an archive.\n\n1140\n00:52:34,170 --> 00:52:36,980\nThat's another example of\nwhere we might use that.\n\n1141\n00:52:36,980 --> 00:52:38,560\nSame thing goes with databases.\n\n1142\n00:52:38,560 --> 00:52:42,340\nWhere the database file itself\nwas very read-intensive,\n\n1143\n00:52:42,340 --> 00:52:45,430\nbut slower drives might be perfectly fine\nfor that, if you've got enough of them.\n\n1144\n00:52:45,430 --> 00:52:49,540\nIf you've got fifteen slow drives in\nan array, that's fifteen sets of heads.\n\n1145\n00:52:49,540 --> 00:52:52,180\nEven though they're slow drives,\nthey'll read pretty fast.\n\n1146\n00:52:52,180 --> 00:52:55,200\nBut your transaction logs,\nwhere you write to them constantly,\n\n1147\n00:52:55,200 --> 00:52:57,070\nyou need the best write speeds possible.\n\n1148\n00:52:57,070 --> 00:52:59,500\nSSD will do better.\n\n1149\n00:52:59,500 --> 00:53:03,324\nAnd so, the transaction logs get moved off\nto the SSDs while the database stays on\n\n1150\n00:53:03,324 --> 00:53:04,780\nyour solar drives.\n\n1151\n00:53:04,780 --> 00:53:09,350\nWell, normally you would have\nto design that yourself, but\n\n1152\n00:53:09,350 --> 00:53:13,630\nstorage spaces and storage pools can\nwork together to create that for us.\n\n1153\n00:53:13,630 --> 00:53:16,820\nSo, that's it's being moved around and\nplaced in the right locations and\n\n1154\n00:53:16,820 --> 00:53:17,510\ndone dynamically.\n\n1155\n00:53:17,510 --> 00:53:18,960\n>> Yeah, absolutely.\n\n1156\n00:53:18,960 --> 00:53:21,700\nIt's kind of an extension of some of\nthose drives we're seeing now with\n\n1157\n00:53:21,700 --> 00:53:23,540\nthe hyper drives on the client end.\n\n1158\n00:53:23,540 --> 00:53:27,440\nThat's the same kind of thing where\nyou've got some type of storage or\n\n1159\n00:53:27,440 --> 00:53:29,560\nSSD memory in there.\n\n1160\n00:53:29,560 --> 00:53:31,200\nBut then we're taking it\nup to an Enterprise type.\n\n1161\n00:53:31,200 --> 00:53:31,740\n>> You know what?\n\n1162\n00:53:31,740 --> 00:53:34,176\nI bought one of those for my computer\nat home and it's not impressive.\n\n1163\n00:53:34,176 --> 00:53:34,677\n>> Impressed?\n\n1164\n00:53:34,677 --> 00:53:36,120\nNo. Really? [LAUGH]\n>> I don't know how it-\n\n1165\n00:53:36,120 --> 00:53:38,010\n>> I'll save my money then.\n\n1166\n00:53:38,010 --> 00:53:39,460\n>> I don't know how it catalogs data.\n\n1167\n00:53:39,460 --> 00:53:42,480\nBut yeah, it's no faster than\na normal drive in my opinion.\n\n1168\n00:53:42,480 --> 00:53:45,240\nIn their defense,\nI haven't actually run a benchmark on it.\n\n1169\n00:53:45,240 --> 00:53:47,140\n>> Right, right.\n>> But, you know.\n\n1170\n00:53:47,140 --> 00:53:49,970\nSo, one of the big problems we have is\nthat people will do these designs in\n\n1171\n00:53:49,970 --> 00:53:52,130\nthe early day, and they'll say,\nall right, I got this for this and\n\n1172\n00:53:52,130 --> 00:53:55,910\nthese other drives for that and then they\nget is set up that way in the beginning,\n\n1173\n00:53:55,910 --> 00:53:59,160\nbut over time people move away from that,\nand they stop following the rules and\n\n1174\n00:53:59,160 --> 00:54:00,640\nit gets kind of broken apart.\n\n1175\n00:54:00,640 --> 00:54:03,000\nSo, if you're gonna do it manually you\nhave to make sure you stick with it.\n\n1176\n00:54:03,000 --> 00:54:05,720\nThat you're constantly auditing your\nstorage to make sure that it's being\n\n1177\n00:54:05,720 --> 00:54:07,030\nproperly used.\n\n1178\n00:54:07,030 --> 00:54:09,885\nIf you use storage pools, though,\nit's doing it dynamically.\n\n1179\n00:54:09,885 --> 00:54:11,410\n>> Done\n>> Hands off.\n\n1180\n00:54:11,410 --> 00:54:12,813\nYou set it and forget it.\n\n1181\n00:54:12,813 --> 00:54:15,585\n[LAUGH] Like the rotisserie chicken.\n\n1182\n00:54:15,585 --> 00:54:17,020\n[LAUGH]\n>> All right.\n\n1183\n00:54:17,020 --> 00:54:22,870\nWe've got a few other neat things to talk\nabout that'll influence our designs but\n\n1184\n00:54:22,870 --> 00:54:23,750\nit's time for a break.\n\n1185\n00:54:23,750 --> 00:54:24,330\n>> Break time.\n\n1186\n00:54:24,330 --> 00:54:25,510\n>> We'll stop here and take a break.\n\n1187\n00:54:25,510 --> 00:54:27,442\nWe'll be back in just a few.\n\n1188\n00:54:27,442 --> 00:54:34,919\n[MUSIC]\n\n1189\n00:54:34,919 --> 00:54:37,010\n>> All right, welcome back everybody.\n\n1190\n00:54:37,010 --> 00:54:38,640\nOkay, so it's bells and whistles time.\n\n1191\n00:54:38,640 --> 00:54:39,160\n>> It is, it is.\n\n1192\n00:54:39,160 --> 00:54:42,200\n>> So we're gonna hit on a couple of\nneat things you might wanna factor\n\n1193\n00:54:42,200 --> 00:54:43,360\ninto your design.\n\n1194\n00:54:43,360 --> 00:54:46,660\nObviously, not going to influence the\ndesign as a whole, but our important thing\n\n1195\n00:54:46,660 --> 00:54:50,460\nis to try and build it as we kind of\nplan for our storage environment.\n\n1196\n00:54:50,460 --> 00:54:54,180\nMike, you made a reference earlier in\nthe show about how we might have multiple\n\n1197\n00:54:54,180 --> 00:54:55,690\nnotes connected to a SAN.\n\n1198\n00:54:55,690 --> 00:54:57,800\n>> Right.\n>> But those nodes might be hyper v hosts.\n\n1199\n00:54:57,800 --> 00:54:58,364\n>> Right.\n>> And\n\n1200\n00:54:58,364 --> 00:54:59,900\nso, there might be bunch\nof VM's that are on there.\n\n1201\n00:54:59,900 --> 00:55:00,790\n>> Sitting on top of those.\n\n1202\n00:55:00,790 --> 00:55:01,360\nYup.\n\n1203\n00:55:01,360 --> 00:55:05,200\n>> Well, one of the challenges that we\nhave with that, is that the VMs, if they\n\n1204\n00:55:05,200 --> 00:55:09,900\nare in turn connecting to a SAN, they're\nall fighting for access to that HBA.\n\n1205\n00:55:09,900 --> 00:55:14,360\nAnd, that's not the greatest situation to\nbe in when you've got VMs that are storage\n\n1206\n00:55:14,360 --> 00:55:15,470\nintensive.\n\n1207\n00:55:15,470 --> 00:55:19,830\nSo, what a lot of people do, is if they\nhave a storage intensive virtual machine,\n\n1208\n00:55:19,830 --> 00:55:23,310\nthey usually devirtualize it and\nmake it its own physical server.\n\n1209\n00:55:23,310 --> 00:55:26,980\nBut, you don't have to do that because\nin hyperview we have support for\n\n1210\n00:55:26,980 --> 00:55:28,602\nwhat is called virtual fiber channel.\n\n1211\n00:55:28,602 --> 00:55:31,445\nAnd with virtual fiber channel,\n\n1212\n00:55:31,445 --> 00:55:36,833\nwhat it does is it allows the virtual\nmachine to see the HBA's.\n\n1213\n00:55:36,833 --> 00:55:40,902\nAnd if it can see the HBA, then it\ncan connect directly to the SAN and\n\n1214\n00:55:40,902 --> 00:55:43,300\nbypass the host LS for it, right.\n\n1215\n00:55:43,300 --> 00:55:46,610\nI said bypass, the host is still\na little bit involved, right.\n\n1216\n00:55:46,610 --> 00:55:51,032\nBut it allows a virtual\nmachine to directly connect to\n\n1217\n00:55:51,032 --> 00:55:53,890\na fiber channel LUN on a SAN.\n\n1218\n00:55:53,890 --> 00:55:57,430\nAnd that's a really cool feature if you\nhave something that's disk intensive,\n\n1219\n00:55:57,430 --> 00:56:02,040\nbecause you could have an HBA\nthat was dedicated to one VM.\n\n1220\n00:56:02,040 --> 00:56:05,860\nNow that's a neat feature, but\nhow does that change our design?\n\n1221\n00:56:05,860 --> 00:56:10,220\nThe biggest challenge is,\nif you've got multiple Hyper-V hosts, and\n\n1222\n00:56:10,220 --> 00:56:12,880\nyou're doing like,\na clustered environment so\n\n1223\n00:56:12,880 --> 00:56:15,750\nyour VM can fail over from\nserver to server to server, if\n\n1224\n00:56:15,750 --> 00:56:20,530\nit had a dedicated HBA on one server, it's\ngonna need a dedicated HBA on the others.\n\n1225\n00:56:20,530 --> 00:56:21,060\nRight.\n>> Yeah.\n\n1226\n00:56:21,060 --> 00:56:24,960\n>> So we need to plan for that in terms\nof a number of HBAs that we have,\n\n1227\n00:56:24,960 --> 00:56:26,400\nthose host bus adapters.\n\n1228\n00:56:26,400 --> 00:56:29,130\nBut you've gotta have, if you're\ndoing a dedicated one on one node,\n\n1229\n00:56:29,130 --> 00:56:32,980\nyou gotta have that one available\non all of the other nodes also, or\n\n1230\n00:56:32,980 --> 00:56:35,730\nthat virtual machine will\nnot be able to fail over.\n\n1231\n00:56:35,730 --> 00:56:39,930\nIf you've got a 16 node cluster, and\nyou've got this one VM that needs\n\n1232\n00:56:39,930 --> 00:56:44,000\na dedicated NIC, I mean a dedicated HPA,\nyou might want to just pick like\n\n1233\n00:56:44,000 --> 00:56:48,640\nthree nodes and put that extra dedicated\nHPA on three of the nodes, and\n\n1234\n00:56:48,640 --> 00:56:51,580\nthat way that VM can bounce\nbetween any of those three hosts.\n\n1235\n00:56:51,580 --> 00:56:53,700\n>> Just limit where it's\nallowed to fail over to.\n\n1236\n00:56:53,700 --> 00:56:56,360\n>> Just because you have\n16 hosts doesn't mean you\n\n1237\n00:56:56,360 --> 00:56:58,170\nneed every VM to be able\nto go to every host.\n\n1238\n00:56:58,170 --> 00:56:59,990\nSometimes you just have to pick or choose.\n\n1239\n00:56:59,990 --> 00:57:02,590\nThree is more than enough\nin most scenarios.\n\n1240\n00:57:02,590 --> 00:57:04,940\nBut it can start to influence\nthings like performance,\n\n1241\n00:57:04,940 --> 00:57:08,970\nas far as if you're running the System\nCenter Virtual Machine Manager, and\n\n1242\n00:57:08,970 --> 00:57:11,720\nif it's tied in with\nSystem Center Operations Manager,\n\n1243\n00:57:11,720 --> 00:57:16,080\nit'll make performance based assessments\nand move VMs based on performance needs.\n\n1244\n00:57:16,080 --> 00:57:19,280\nWell that's minimizing the amount\nof movement that one VM has.\n\n1245\n00:57:19,280 --> 00:57:23,390\nRight, but the SCV amendment's smart\nenough to recognize that and SCOM is also,\n\n1246\n00:57:23,390 --> 00:57:25,850\nso it will make decisions\nbased on that data.\n\n1247\n00:57:25,850 --> 00:57:27,930\nBut just be aware that\nthat option is there.\n\n1248\n00:57:27,930 --> 00:57:31,370\nIf you have a disk I/O\nintensive application,\n\n1249\n00:57:31,370 --> 00:57:34,705\nyou don't have to devirtualize it, you\ndon't have to make it a physical machine.\n\n1250\n00:57:34,705 --> 00:57:39,215\nYou can still virtualize it and give it\na dedicated HBA, use the virtual fiber\n\n1251\n00:57:39,215 --> 00:57:43,085\nchannel functionality to let it\nconnect directly to the SAN, and\n\n1252\n00:57:43,085 --> 00:57:45,665\nnow it's got it's own connection,\nperfect disk.\n\n1253\n00:57:45,665 --> 00:57:48,295\nAnd you still get the benefits\nof shared CPU and\n\n1254\n00:57:48,295 --> 00:57:52,690\nshared memory, shared NICs for network\naccess, you still get those benefits,\n\n1255\n00:57:52,690 --> 00:57:56,559\nyou're just giving up\nthe benefit of shared disk I/O.\n\n1256\n00:57:56,559 --> 00:58:01,302\nI say giving up the benefit, in this case\nit'd be giving up the detriment [LAUGH].\n\n1257\n00:58:01,302 --> 00:58:03,440\n>> Yeah, yep [LAUGH].\n\n1258\n00:58:03,440 --> 00:58:05,591\n>> All right, so\nthat's one neat little feature there.\n\n1259\n00:58:05,591 --> 00:58:07,310\nIt is something that I've used.\n\n1260\n00:58:07,310 --> 00:58:10,800\nJust to give you a real world example,\nMicrosoft Exchange.\n\n1261\n00:58:11,860 --> 00:58:16,560\nMicrosoft Exchange, it's an email server,\nit maintains email databases.\n\n1262\n00:58:16,560 --> 00:58:20,440\nAnd it does not do, well,\nin Exchange 2010 and\n\n1263\n00:58:20,440 --> 00:58:23,470\nnewer, it does not do data de-duplication.\n\n1264\n00:58:23,470 --> 00:58:27,925\nSo if I send an email to 50 recipients,\nit stored 50 times in that database.\n\n1265\n00:58:27,925 --> 00:58:30,629\n>> [LAUGH]\n>> Each user has their own copy.\n\n1266\n00:58:30,629 --> 00:58:34,827\nAnd so when users start to delete it,\nthey're just deleting their own copy, so\n\n1267\n00:58:34,827 --> 00:58:36,510\nthe databases get big fast.\n\n1268\n00:58:36,510 --> 00:58:39,868\nIt wasn't like that in earlier versions\nof Exchange but in the newer ones it is.\n\n1269\n00:58:39,868 --> 00:58:44,180\nSo disk I/O becomes really important\nwith Exchange as it finds these emails,\n\n1270\n00:58:44,180 --> 00:58:45,910\nretrieves them, and brings them back.\n\n1271\n00:58:45,910 --> 00:58:49,370\nAnd so you might wanna virtualize\nyour exchange servers, but\n\n1272\n00:58:49,370 --> 00:58:54,000\nnot hurt performance, and so a dedicated\nHPA for that will really come in handy.\n\n1273\n00:58:54,000 --> 00:58:57,730\nAnother scenario are database servers,\nyou might want to virtualize your sequel\n\n1274\n00:58:57,730 --> 00:59:01,700\nserver but you know disk I/O is a number\none concern with database servers, right.\n\n1275\n00:59:01,700 --> 00:59:04,030\nDisk I/O and\nmemory those are the two big things.\n\n1276\n00:59:04,030 --> 00:59:06,260\nSo, if you want optimal disk I/O for\n\n1277\n00:59:06,260 --> 00:59:08,830\nthat sequel server,\na lot of people just devirtualize it.\n\n1278\n00:59:08,830 --> 00:59:09,690\nThey say you know, screw it,\n\n1279\n00:59:09,690 --> 00:59:11,950\nI need this to run as fast as possible,\nphysical server time.\n\n1280\n00:59:13,140 --> 00:59:16,240\nBut now you get all the negatives\ninvolved with physical servers.\n\n1281\n00:59:16,240 --> 00:59:18,210\nWhereas if you had virtualized it,\n\n1282\n00:59:18,210 --> 00:59:22,130\nit could have had seamless transparent\nclustering and all that other good stuff.\n\n1283\n00:59:22,130 --> 00:59:22,977\nYou lose that.\n\n1284\n00:59:22,977 --> 00:59:25,636\nSo definitely keep that in mind.\n\n1285\n00:59:25,636 --> 00:59:27,600\nVirtual fibre channel really cool.\n\n1286\n00:59:29,110 --> 00:59:30,840\nAll right, who's next on our list, NFS?\n\n1287\n00:59:30,840 --> 00:59:32,110\n>> NFS, yeah.\n\n1288\n00:59:32,110 --> 00:59:33,970\nNetwork file system.\n\n1289\n00:59:33,970 --> 00:59:37,180\n>> NFS has been around a long,\nlong, long, long, long time.\n\n1290\n00:59:37,180 --> 00:59:39,063\nLonger than Windows.\n>> [LAUGH]\n\n1291\n00:59:39,063 --> 00:59:40,755\n>> NFS is the network file system,\n\n1292\n00:59:40,755 --> 00:59:43,080\nit's used mostly in Unix and Linux worlds.\n\n1293\n00:59:43,080 --> 00:59:46,940\nIf you want to share\nfiles between Windows and\n\n1294\n00:59:46,940 --> 00:59:51,130\na Linux environment then\nNFS is the solution.\n\n1295\n00:59:51,130 --> 00:59:55,860\nYou will need at least one Windows server\nsomewhere running the NFS services,\n\n1296\n00:59:55,860 --> 00:59:57,940\npart of the storage server in Windows.\n\n1297\n00:59:57,940 --> 00:59:59,530\nAnd then you can share.\n\n1298\n00:59:59,530 --> 01:00:04,130\nMost people don't need it because,\nmost Linux distros have Samba.\n\n1299\n01:00:04,130 --> 01:00:06,690\n>> Yeah they've got their emulators\nthat always them to connect to our SMB\n\n1300\n01:00:06,690 --> 01:00:07,940\nshares and Windows environments.\n\n1301\n01:00:07,940 --> 01:00:11,430\n>> Yep and same thing with Macs, like\nMac OS can connect to Windows shares too.\n\n1302\n01:00:11,430 --> 01:00:15,440\nIt used to be that that stuff was\nproprietary and now call them CIFS.\n\n1303\n01:00:15,440 --> 01:00:18,430\nWhat is it common internet file system?\n\n1304\n01:00:18,430 --> 01:00:19,790\n>> I think so, yes.\n\n1305\n01:00:19,790 --> 01:00:23,890\n>> So now it's kinda become like an open\nstandard so a lot of people support that\n\n1306\n01:00:23,890 --> 01:00:26,962\nbut you may have a system where\nthat is just not an option.\n\n1307\n01:00:26,962 --> 01:00:30,110\nWhere you want native file sharing\nsupport for the remote end\n\n1308\n01:00:30,110 --> 01:00:34,690\nto connect your Windows server and the NSF\nshares are the best way to deal with that.\n\n1309\n01:00:34,690 --> 01:00:36,280\nAll right, now-\n>> No overhead or converting,\n\n1310\n01:00:36,280 --> 01:00:37,800\ngood performance.\n\n1311\n01:00:37,800 --> 01:00:39,751\n>> Now if you're in an all\nWindows environment,\n\n1312\n01:00:39,751 --> 01:00:43,790\nNFS shouldn't be on your radar, there's\nnot really a lot of need to run NFS.\n\n1313\n01:00:43,790 --> 01:00:46,510\nBut if you're dealing with Unix and\nLinux servers,\n\n1314\n01:00:46,510 --> 01:00:51,400\nNFS shares can remove that compatibility\nboundary, can establish that connection.\n\n1315\n01:00:51,400 --> 01:00:54,456\nSo on the exam if you start seeing them\nstart dropping hints about Linux and\n\n1316\n01:00:54,456 --> 01:00:57,250\nUnix servers,\nNFS needs to pop into your radar.\n\n1317\n01:00:57,250 --> 01:00:59,420\nDoesn't really change\nthe underlying storage,\n\n1318\n01:00:59,420 --> 01:01:01,860\nit's just an extra service\nto extend compatibility.\n\n1319\n01:01:02,950 --> 01:01:06,102\nSo, I actually use NFS for\na few things in my house.\n\n1320\n01:01:06,102 --> 01:01:07,700\n>> Do you?\n>> I probably shouldn't.\n\n1321\n01:01:07,700 --> 01:01:10,600\nYeah cuz when you're using rsync and\nsome Unix utilities,\n\n1322\n01:01:10,600 --> 01:01:12,920\nthey just behave better over NFS.\n\n1323\n01:01:12,920 --> 01:01:16,325\nBut there's so many limitations to NFS,\nlike how it handles user accounts, and\n\n1324\n01:01:16,325 --> 01:01:18,160\nauthentication's pretty poor.\n\n1325\n01:01:18,160 --> 01:01:21,198\nSo you definitely need,\nyou really have to have it,\n\n1326\n01:01:21,198 --> 01:01:23,625\nit's not like somebody wants to have it.\n\n1327\n01:01:23,625 --> 01:01:27,655\n>> [LAUGH]\n>> All right, well unless maybe you're\n\n1328\n01:01:27,655 --> 01:01:30,075\nstudying then you're like I\nreally want NFS just to learn.\n\n1329\n01:01:30,075 --> 01:01:32,062\n>> [LAUGH]\n>> All right now if we're not using NFS,\n\n1330\n01:01:32,062 --> 01:01:34,120\nthen we're using the Windows file system,\nright.\n\n1331\n01:01:34,120 --> 01:01:39,010\nAnd the Windows file sharing which is\nall done via SMB, Server Message Block.\n\n1332\n01:01:39,010 --> 01:01:40,210\n>> Server Message Block.\n\n1333\n01:01:40,210 --> 01:01:41,750\n>> The Linux software I was\ntalking about a minute ago,\n\n1334\n01:01:41,750 --> 01:01:46,240\nSamba, that's just a play on SMB,\nsubversive plot.\n\n1335\n01:01:46,240 --> 01:01:50,230\nAnd Microsoft has slowly\nimproved SMB over the years.\n\n1336\n01:01:50,230 --> 01:01:54,670\nIn fact, it's barely recognizable from\nSMB 1.0 from the old days, back in NT4,\n\n1337\n01:01:54,670 --> 01:01:59,820\nand stuff, where it was just a very\nbasic file sharing protocol.\n\n1338\n01:01:59,820 --> 01:02:04,480\nIt got a lot of integrity\nprotection stuff put in in SMB 2.0.\n\n1339\n01:02:04,480 --> 01:02:09,340\nIn Windows Server 2012,\nwe now have SMB 3.0.\n\n1340\n01:02:09,340 --> 01:02:12,950\nAnd there's a lot of cool features that\nare built into it you might not know about\n\n1341\n01:02:12,950 --> 01:02:14,490\nthat may change your design.\n\n1342\n01:02:15,580 --> 01:02:19,380\nThe number one feature that pops in my\nmind that's like this is encryption.\n\n1343\n01:02:20,870 --> 01:02:25,720\nIf you got your MCSE under Windows\nserver 2000 or Windows server 2003,\n\n1344\n01:02:25,720 --> 01:02:28,080\n2008, if you saw a question and\n\n1345\n01:02:28,080 --> 01:02:32,040\nit talked about securing data\ncommunications between servers, right?\n\n1346\n01:02:32,040 --> 01:02:35,740\nIt says you need to do file transfers\nbetween servers using SMB, right,\n\n1347\n01:02:35,740 --> 01:02:38,340\nregular shared folders and\nyou need to encrypt it.\n\n1348\n01:02:38,340 --> 01:02:39,750\nWell, what was our solution?\n\n1349\n01:02:39,750 --> 01:02:41,000\n>> IPsec.\n\n1350\n01:02:41,000 --> 01:02:43,160\nIf it's data in motion.\n\n1351\n01:02:43,160 --> 01:02:45,420\n>> And we spent a ton of time\ntalking about it, didn't we?\n\n1352\n01:02:45,420 --> 01:02:48,020\nYou taught those classes, you know.\n\n1353\n01:02:48,020 --> 01:02:48,640\nIPsec was a big deal.\n\n1354\n01:02:48,640 --> 01:02:50,779\nIt was the solution for encrypting.\n\n1355\n01:02:50,779 --> 01:02:53,517\nSMB 3.0, it's got encryption built in.\n\n1356\n01:02:53,517 --> 01:02:56,010\nDoesn't need IPsec.\n\n1357\n01:02:56,010 --> 01:02:58,850\nNow why did Microsoft do that if we\nalready had a solution in place.\n\n1358\n01:02:58,850 --> 01:03:00,985\nWell IPsec is not the easiest\nthing to implement.\n\n1359\n01:03:00,985 --> 01:03:03,225\n>> Yeah,\nI mean you got policies on either end,\n\n1360\n01:03:03,225 --> 01:03:06,050\nthey've got to negotiate their\nsecurity levels and things like that.\n\n1361\n01:03:06,050 --> 01:03:08,630\nSo there's a lot of set up and\nconfiguration involved.\n\n1362\n01:03:08,630 --> 01:03:10,950\nYeah, or preshared keys which\nare not the greatest thing.\n\n1363\n01:03:10,950 --> 01:03:14,490\nCertificates are better but now you got\na PKI you got to build up, it's a lot.\n\n1364\n01:03:14,490 --> 01:03:18,320\n>> You can't just add other nodes, If\nthey don't have a policy that's matching\n\n1365\n01:03:18,320 --> 01:03:19,630\nthey're not going to be\nable to communicate.\n\n1366\n01:03:19,630 --> 01:03:21,170\nSo there's a lot to it.\n\n1367\n01:03:21,170 --> 01:03:24,670\n>> And I think Microsoft was waiting\nbecause they new IPV6 was coming along.\n\n1368\n01:03:24,670 --> 01:03:27,172\nAnd IPV6 has native IPsec\nsupport built into it, and\n\n1369\n01:03:27,172 --> 01:03:31,740\nthey're like you know we can use this, but\nthe adoption rate has just been too slow.\n\n1370\n01:03:31,740 --> 01:03:35,859\nAnd so in Windows Server 2012, Microsoft\nsaid let's come up with another solution,\n\n1371\n01:03:35,859 --> 01:03:37,115\nand they did, SMB 3.0.\n\n1372\n01:03:37,115 --> 01:03:42,460\nNow, SMB 3.0 is completely backwards\ncompatible with 2.0 and 1.0.\n\n1373\n01:03:42,460 --> 01:03:46,492\nBut the new features that were added,\nlike encryption,\n\n1374\n01:03:46,492 --> 01:03:50,680\nonly work when you're going SMB 3,\nto SMB 3 clients.\n\n1375\n01:03:50,680 --> 01:03:51,310\nAll right?\n\n1376\n01:03:51,310 --> 01:03:52,610\nNow, who are those?\n\n1377\n01:03:52,610 --> 01:03:55,780\nWell, it's Windows Server 2012 and\nWindows 8.\n\n1378\n01:03:55,780 --> 01:03:56,470\nRight?\n\n1379\n01:03:56,470 --> 01:04:00,878\nSo if you have Windows 7, Windows Vista,\nWindows Server 2008 All right?\n\n1380\n01:04:00,878 --> 01:04:02,324\n>> Mm-hm.\n>> They're SNB 2.0.\n\n1381\n01:04:02,324 --> 01:04:05,510\nThey're not gonna be able\nto do encryption in SNB.\n\n1382\n01:04:05,510 --> 01:04:07,770\nIPsec still needs to be on your radar.\n\n1383\n01:04:07,770 --> 01:04:08,570\n>> Yep.\n\n1384\n01:04:08,570 --> 01:04:12,040\n>> But if you're running Windows Server\n2012, and you've got other Windows Server\n\n1385\n01:04:12,040 --> 01:04:15,610\n2012 clients, or you've got Windows\n8 clients, they're SNB 3.0.\n\n1386\n01:04:15,610 --> 01:04:17,650\nThey'll do encryption automatically.\n\n1387\n01:04:17,650 --> 01:04:18,400\nIt's just, it's part of it.\n\n1388\n01:04:18,400 --> 01:04:19,520\nYou don't even have to configure it.\n\n1389\n01:04:19,520 --> 01:04:20,960\nIt just does it.\n\n1390\n01:04:20,960 --> 01:04:21,780\n>> Right.\n>> It's like EFS.\n\n1391\n01:04:21,780 --> 01:04:24,830\nIt uses temporary certificates,\nand it does its job.\n\n1392\n01:04:24,830 --> 01:04:28,750\nSo, really cool,\neliminates the need for ip set.\n\n1393\n01:04:28,750 --> 01:04:32,455\nNow, because that's a new feature, expect\nto see that one on the exam [CROSSTALK]\n\n1394\n01:04:32,455 --> 01:04:35,849\nand you see the difference there,\nit comes down to what clients you have.\n\n1395\n01:04:35,849 --> 01:04:40,803\nIf they say you need to securely encrypt\ntraffic between A Windows Server 2012\n\n1396\n01:04:40,803 --> 01:04:46,040\nserver and a Windows Server 2008 server,\nIPsec is your solution, right?\n\n1397\n01:04:46,040 --> 01:04:50,750\nBut if it's between two Windows Server\n2012 servers, you can use SMB 3.0.\n\n1398\n01:04:50,750 --> 01:04:52,170\nIn fact, it will automatically.\n\n1399\n01:04:52,170 --> 01:04:53,710\n>> Yep.\n>> So.\n\n1400\n01:04:53,710 --> 01:04:55,310\n>> So\nthat's a neat little bell-and-whistle.\n\n1401\n01:04:55,310 --> 01:04:56,990\nThere's other things that were added,\nright?\n\n1402\n01:04:56,990 --> 01:04:58,000\nWhat were some of the other things?\n\n1403\n01:04:58,000 --> 01:04:59,470\n>> Yeah,\nthey threw some PowerShell commands.\n\n1404\n01:04:59,470 --> 01:05:02,580\nOf course, everything now has PowerShell\ncommands that we can use to configure it.\n\n1405\n01:05:02,580 --> 01:05:05,910\nWe've got our, what, our multi-channel\nsupport, that we can do with SNB 3.0 now.\n\n1406\n01:05:05,910 --> 01:05:09,150\nWere some of the big ones\nthat I remember offhand.\n\n1407\n01:05:09,150 --> 01:05:13,630\n>> Yeah, there's another thing that\nit does called directory leases.\n\n1408\n01:05:13,630 --> 01:05:15,010\nAnd directory leases are kinda neat.\n\n1409\n01:05:15,010 --> 01:05:19,120\nIf you are, let's say you're\nworking in a branch office, and\n\n1410\n01:05:19,120 --> 01:05:21,820\nyou're accessing a fileshare\nat your headquarters, and\n\n1411\n01:05:21,820 --> 01:05:25,020\nthe fileshare has a thousand files\nin the root directory, right?\n\n1412\n01:05:25,020 --> 01:05:26,507\nAnd I think we've all seen that.\n\n1413\n01:05:26,507 --> 01:05:27,930\nYep.\n[LAUGH] Well,\n\n1414\n01:05:27,930 --> 01:05:31,300\nwhen you open up that rootshare,\nwhat happens?\n\n1415\n01:05:31,300 --> 01:05:33,740\nYour Explorer window, it like freezes.\n\n1416\n01:05:33,740 --> 01:05:36,160\n>> Yes, you get that little\ngreen bar going across there.\n\n1417\n01:05:36,160 --> 01:05:40,750\n>> Yeah, and it's basically scraping all\nthose files and pulling their meta-data.\n\n1418\n01:05:40,750 --> 01:05:44,140\nHow big they are,\nwhat was their modified date, right?\n\n1419\n01:05:44,140 --> 01:05:45,630\nWhat icon do they use?\n\n1420\n01:05:45,630 --> 01:05:46,530\n>> Right.\n\n1421\n01:05:46,530 --> 01:05:48,590\nIt scrapes all that data\nfrom all the files, and\n\n1422\n01:05:48,590 --> 01:05:50,490\nit explains to you it takes awhile.\n\n1423\n01:05:50,490 --> 01:05:52,420\nIf you're on a local area network,\nit's not such a big deal, but\n\n1424\n01:05:52,420 --> 01:05:54,710\nif you're on a remote network,\nit does take awhile.\n\n1425\n01:05:54,710 --> 01:05:58,790\nSo what happens is the first time,\nin SMB 3.0, the first time you go\n\n1426\n01:05:58,790 --> 01:06:01,840\nto a remote directory like that,\nyeah it still does the scrape,\n\n1427\n01:06:01,840 --> 01:06:03,970\nit still takes awhile, all right.,\n>> But\n\n1428\n01:06:03,970 --> 01:06:07,510\nthen it caches it,\nit holds a copy of it, and\n\n1429\n01:06:07,510 --> 01:06:12,250\nnow whenever you connect again, basically\nSMB it works one of two ways, right?\n\n1430\n01:06:12,250 --> 01:06:14,890\nOne way is a pull,\nwhere you tell the server hey here's\n\n1431\n01:06:14,890 --> 01:06:16,980\nthe date of my cache copy,\nwhat's changed since then?\n\n1432\n01:06:16,980 --> 01:06:19,920\nAnd the server tells you what's changed,\nright, but\n\n1433\n01:06:19,920 --> 01:06:23,680\nif you're holding that folder open,\nif you've got a connection to it.\n\n1434\n01:06:23,680 --> 01:06:27,430\nThe server will actually push the changes\nto you also, that's the second way.\n\n1435\n01:06:27,430 --> 01:06:31,530\nSo you're getting updates to your cache,\nwhile you hold that folder open.\n\n1436\n01:06:31,530 --> 01:06:33,840\n>> Right.\n>> So the second time you browse to it,\n\n1437\n01:06:33,840 --> 01:06:37,815\nthe third or the 300th time,\nit opens [SOUND] lickety split, real fast.\n\n1438\n01:06:37,815 --> 01:06:39,040\nThat's a big difference.\n\n1439\n01:06:39,040 --> 01:06:41,760\nIt's another feature of SMB 3.0,\nthat we don't have to configure,\n\n1440\n01:06:41,760 --> 01:06:44,980\nit's just there and it's turned on,\nso it's kinda a nice thing.\n\n1441\n01:06:44,980 --> 01:06:46,580\nThere are other solutions.\n\n1442\n01:06:46,580 --> 01:06:48,770\nYou know, you could do branch cache.\n\n1443\n01:06:48,770 --> 01:06:50,620\nRight?\nStuff like that that'll help\n\n1444\n01:06:50,620 --> 01:06:51,260\nto alleviate it.\n\n1445\n01:06:51,260 --> 01:06:53,070\nBut there's a lot of infrastructure there.\n\n1446\n01:06:53,070 --> 01:06:55,820\nThe advantage of this,\nit's just built into the protocol.\n\n1447\n01:06:55,820 --> 01:06:57,000\n>> That's nice.\n\n1448\n01:06:57,000 --> 01:06:59,910\n>> So those are all some of the neat\nlittle things that are built in.\n\n1449\n01:06:59,910 --> 01:07:03,160\nThe only one, the only other\nwe have mentioned mentioned,\n\n1450\n01:07:03,160 --> 01:07:05,690\nit's kind of important,\ntransparent failover.\n\n1451\n01:07:05,690 --> 01:07:10,460\nYou've been able to cluster file\nservers as far back as I can remember.\n\n1452\n01:07:10,460 --> 01:07:14,030\nI know you could do it in NT4,\nI imagine you could do it in 351.\n\n1453\n01:07:14,030 --> 01:07:15,240\nI never worked on a NT351 cluster.\n\n1454\n01:07:15,240 --> 01:07:18,568\n[LAUGH] I worked on the standalone\nservers, but not clusters.\n\n1455\n01:07:18,568 --> 01:07:19,784\nThat was a long time ago.\n\n1456\n01:07:19,784 --> 01:07:23,968\nBut you've been able to cluster\nfile servers for a long time.\n\n1457\n01:07:23,968 --> 01:07:28,315\nSo if one physical server failed,\nthe other server it took over.\n\n1458\n01:07:28,315 --> 01:07:29,900\n>> Uh-huh.\n>> It was there, your systems up again.\n\n1459\n01:07:29,900 --> 01:07:30,610\nAll right.\n\n1460\n01:07:30,610 --> 01:07:34,215\nThe problem was your clients were\nvery aware that it happened.\n\n1461\n01:07:34,215 --> 01:07:34,950\n>> Uh-huh.\n>> All right.\n\n1462\n01:07:34,950 --> 01:07:37,560\nIf they were in the middle of the write,\nthe write just got aborted.\n\n1463\n01:07:37,560 --> 01:07:38,550\n>> Yup.\n>> And\n\n1464\n01:07:38,550 --> 01:07:41,080\nusually their shared folder disconnected.\n\n1465\n01:07:41,080 --> 01:07:44,330\nAnd then had to double click on the share\nfolder again, before it reconnected and\n\n1466\n01:07:44,330 --> 01:07:45,700\nthey were established on the other nodes.\n\n1467\n01:07:45,700 --> 01:07:46,945\nSo it was visible to the end user.\n\n1468\n01:07:46,945 --> 01:07:47,587\nAll right.\n\n1469\n01:07:47,587 --> 01:07:52,040\nWith SMB 3.0,\nif we have a clustered file server,\n\n1470\n01:07:52,040 --> 01:07:54,430\nit'll automatically fail over\nfrom one node to the other.\n\n1471\n01:07:54,430 --> 01:07:57,830\nSo if the write was interrupted, it'll\nretransmit the write to the other node.\n\n1472\n01:07:57,830 --> 01:08:00,950\nAnd if you were connected to one,\nit doesn't show a disconnect,\n\n1473\n01:08:00,950 --> 01:08:02,240\nit just automatically moves you over.\n\n1474\n01:08:02,240 --> 01:08:04,040\nIt's transparent to the end user.\n\n1475\n01:08:04,040 --> 01:08:06,920\nSo another nice feature of SNB 3.0.\n\n1476\n01:08:06,920 --> 01:08:11,630\nIf you've got Windows 8 clients, that's\nreally handy, in earlier versions like\n\n1477\n01:08:11,630 --> 01:08:14,670\nWindows 7, and earlier the only way\nto get transparent fail over for\n\n1478\n01:08:14,670 --> 01:08:16,740\na file system, was to use DFS.\n\n1479\n01:08:16,740 --> 01:08:20,180\nThe DFS client would do\ntransparent failover.\n\n1480\n01:08:20,180 --> 01:08:21,700\nBut it meant you had to have DFS maybe.\n\n1481\n01:08:21,700 --> 01:08:22,955\n>> Right, which was more servers.\n\n1482\n01:08:22,955 --> 01:08:24,680\n>> Mm-hm, yep.\n\n1483\n01:08:24,680 --> 01:08:28,100\nAt a minimum, it's storing your data\nin more than one location, right?\n\n1484\n01:08:28,100 --> 01:08:31,500\nEven if the servers are right next to\neach other, DFS requires multiple copies.\n\n1485\n01:08:31,500 --> 01:08:32,980\nSo at a minimum there's that.\n\n1486\n01:08:34,530 --> 01:08:35,840\nAll right.\n\n1487\n01:08:35,840 --> 01:08:39,790\nThe last feature I've got,\nis good old ODX, right?\n\n1488\n01:08:39,790 --> 01:08:41,650\n>> ODX.\n>> I say good old ODX.\n\n1489\n01:08:41,650 --> 01:08:43,310\nMost of you probably haven't heard of it.\n\n1490\n01:08:43,310 --> 01:08:46,180\nIt's very new, and\nit's not very popular yet.\n\n1491\n01:08:46,180 --> 01:08:49,933\nI don't know how long it'll be before\nit becomes popular, if it ever does.\n\n1492\n01:08:49,933 --> 01:08:52,700\n>> [LAUGH] If it does, yeah.\n\n1493\n01:08:52,700 --> 01:08:54,760\n>> ODX is the offloaded data transfer.\n\n1494\n01:08:54,760 --> 01:08:57,100\nThe x kind of throws you,\nbut it is transfer.\n\n1495\n01:08:57,100 --> 01:08:59,450\nSo, offloaded data transfer.\n\n1496\n01:08:59,450 --> 01:09:00,920\nWhat the heck is it?\n\n1497\n01:09:00,920 --> 01:09:04,095\nWell, it's a way of accelerating\ncopy operations on a SAN.\n\n1498\n01:09:04,095 --> 01:09:04,600\n>> Mm-hm.\n\n1499\n01:09:04,600 --> 01:09:05,990\n>> Let's go back to my diagram for\na second.\n\n1500\n01:09:07,100 --> 01:09:10,720\nIf I've got multiple SANs, right?\n\n1501\n01:09:10,720 --> 01:09:14,660\nand I want to copy data\nfrom SAN 1 to SAN 2.\n\n1502\n01:09:14,660 --> 01:09:17,750\nWell there's a lot of\nworking parts in that model.\n\n1503\n01:09:18,830 --> 01:09:22,240\nOne of my nodes has to reach the SAN and\ngather the data.\n\n1504\n01:09:22,240 --> 01:09:24,350\nThen it has to send it over\nthe network to the other server, and\n\n1505\n01:09:24,350 --> 01:09:25,990\nthe other server has to\nwrite it to the SAN, right?\n\n1506\n01:09:25,990 --> 01:09:27,080\n>> Right.\n>> We expect that.\n\n1507\n01:09:27,080 --> 01:09:30,050\nWe expect a lot of moving parts\nwhen you're dealing with multiple\n\n1508\n01:09:30,050 --> 01:09:31,890\nservers and so on.\n\n1509\n01:09:31,890 --> 01:09:34,300\nBut what it I just had a single SAN?\n\n1510\n01:09:34,300 --> 01:09:38,930\nIf I just had one SAN like this,\nand I was a node connected to it.\n\n1511\n01:09:38,930 --> 01:09:42,090\nAnd I wanted to copy data\nfrom one drive on the SAN,\n\n1512\n01:09:42,090 --> 01:09:46,290\none lun to another lun on the SAN.\n\n1513\n01:09:46,290 --> 01:09:50,400\nNow it's one node copying from\na LUN to a lun on the same SAN.\n\n1514\n01:09:50,400 --> 01:09:53,570\nThere's a lot less moving parts on it.\n\n1515\n01:09:53,570 --> 01:09:56,990\nBut the copy operation was still carried\nout like the example I gave a second ago.\n\n1516\n01:09:56,990 --> 01:09:58,340\n>> That's still gotta go back.\n\n1517\n01:09:58,340 --> 01:10:00,450\nAll the data has to be transmitted\nback over that node, and\n\n1518\n01:10:00,450 --> 01:10:01,870\nthen right back to that same SAN.\n\n1519\n01:10:01,870 --> 01:10:02,860\n>> And over the same lines.\n\n1520\n01:10:02,860 --> 01:10:06,890\nSo you're reading on this fiber line, and\nthen you're writing on this fiber line.\n\n1521\n01:10:06,890 --> 01:10:10,018\nAnd the node is setting in-between\nthat entire copy operation.\n\n1522\n01:10:10,018 --> 01:10:13,310\nSo the general-purpose CPU on this node,\nis being\n\n1523\n01:10:13,310 --> 01:10:17,360\nused to perform all the file checksums,\nand all that stuff as it moves that data.\n\n1524\n01:10:17,360 --> 01:10:18,220\nIt's an intermediary.\n\n1525\n01:10:19,780 --> 01:10:20,320\nAll right?\n\n1526\n01:10:20,320 --> 01:10:24,620\nODX helps to eliminate that intermediary,\nokay?\n\n1527\n01:10:24,620 --> 01:10:29,580\nThe way ODX works,\nis basically your node, when it wants to\n\n1528\n01:10:29,580 --> 01:10:34,240\ncopy data from one LUN to another,\n>> Instead of doing it itself.\n\n1529\n01:10:34,240 --> 01:10:38,620\nIt reaches out to the SAN, and it request\na transfer token or transfer token.\n\n1530\n01:10:38,620 --> 01:10:41,270\nAnd it says hey I want to copy some stuff.\n\n1531\n01:10:41,270 --> 01:10:44,090\nCan you generate a token for\nme that identifies me as a server?\n\n1532\n01:10:44,090 --> 01:10:45,880\nAnd the SAN will do it.\n\n1533\n01:10:45,880 --> 01:10:46,470\nRight.\nThen,\n\n1534\n01:10:46,470 --> 01:10:48,970\nthe node can reach out with that token,\nand\n\n1535\n01:10:48,970 --> 01:10:52,580\nit can say I need to\ncopy data from this one.\n\n1536\n01:10:52,580 --> 01:10:55,800\n>> To this LUN, and\nI need you to do it for me.\n\n1537\n01:10:55,800 --> 01:11:00,530\nAnd the SAN will get it, and it'll use\nthat token which identifies the server,\n\n1538\n01:11:00,530 --> 01:11:04,810\nand it then transfers that\ndata as if it was the server.\n\n1539\n01:11:04,810 --> 01:11:05,360\nOkay?\n\n1540\n01:11:05,360 --> 01:11:10,010\nSo the SAN moves the data between\nthe LUNs, it takes the server and\n\n1541\n01:11:10,010 --> 01:11:12,280\nthe link, out of the picture.\n\n1542\n01:11:12,280 --> 01:11:16,310\nCopies the data, and when it's done,\nthe SAN then notifies the node saying,\n\n1543\n01:11:16,310 --> 01:11:16,850\nyep, it's done.\n\n1544\n01:11:16,850 --> 01:11:19,150\nAnd then you move on, right?\n\n1545\n01:11:19,150 --> 01:11:23,420\nSo, the node starts it and finishes it,\nbut it's not in the middle of it.\n\n1546\n01:11:23,420 --> 01:11:25,990\nAll that transfer happens\nwithout the node being involved.\n\n1547\n01:11:25,990 --> 01:11:31,030\nIt really speeds up copy\noperations within the same SAN.\n\n1548\n01:11:31,030 --> 01:11:33,640\nDoesn't do a lick of\ngood going between SANs.\n\n1549\n01:11:33,640 --> 01:11:35,043\nOr even between servers for that matter.\n\n1550\n01:11:35,043 --> 01:11:39,066\nBut when it's just between LUNs in the\nsame SAN, it really improves performance\n\n1551\n01:11:39,066 --> 01:11:41,918\nbecause you take the network\nout of the picture, right?\n\n1552\n01:11:41,918 --> 01:11:45,140\nYou use just the storage side of\nthe network to perform that operation.\n\n1553\n01:11:45,140 --> 01:11:46,390\nIt's considerably faster.\n\n1554\n01:11:46,390 --> 01:11:50,050\nIt actually can do copies\nbetween servers on the same SAN.\n\n1555\n01:11:50,050 --> 01:11:51,730\nIt can do that, too.\n\n1556\n01:11:51,730 --> 01:11:55,210\nThe key piece, here, is your\noperating system has to support it.\n\n1557\n01:11:55,210 --> 01:11:57,120\nThis is a new feature for\nWindows server 2012.\n\n1558\n01:11:57,120 --> 01:12:02,190\nSo, only Windows server 2012 machines can\ndo it, and your SAN has to support it.\n\n1559\n01:12:02,190 --> 01:12:02,780\nRight?\n\n1560\n01:12:02,780 --> 01:12:04,055\nAnd this is a hardware function.\n\n1561\n01:12:04,055 --> 01:12:04,690\n>> Right.\n>> So\n\n1562\n01:12:04,690 --> 01:12:07,620\nif your SAN doesn't support it today,\nit probably never is going to.\n\n1563\n01:12:07,620 --> 01:12:11,870\nSo it may mean you need to purchase\na new SAN to have this, and that may or\n\n1564\n01:12:11,870 --> 01:12:12,930\nmay not be worth it for you.\n\n1565\n01:12:12,930 --> 01:12:16,610\n>> Yeah, you've gotta decide if you\nreally wanna spend that much money or\n\n1566\n01:12:16,610 --> 01:12:19,450\nupgrade that thing just for that feature.\n\n1567\n01:12:19,450 --> 01:12:21,920\n>> And, how often do you perform\nthese copy operations, right?\n\n1568\n01:12:21,920 --> 01:12:24,380\nIs this something you do once a week,\nonce a month?\n\n1569\n01:12:24,380 --> 01:12:29,180\nIt may not matter right, but if this is\nsomething you're gonna be doing a lot.\n\n1570\n01:12:29,180 --> 01:12:33,420\nAll right, let's say for\nexample you've got a database and\n\n1571\n01:12:33,420 --> 01:12:35,230\nyou're doing transaction log backups.\n\n1572\n01:12:35,230 --> 01:12:37,930\nAnd you just backup to the local\ndrive first to get it done and\n\n1573\n01:12:37,930 --> 01:12:41,530\nthen you copy them over to another for\nsafekeeping.\n\n1574\n01:12:41,530 --> 01:12:42,130\nRight.\n\n1575\n01:12:42,130 --> 01:12:44,700\nIf you're doing that every day or\nevery hour or\n\n1576\n01:12:44,700 --> 01:12:47,210\nevery 15 minutes,\nODX really comes in handy.\n\n1577\n01:12:47,210 --> 01:12:50,250\nReally speeds that up because your node\nisn't wasting its time dealing with\n\n1578\n01:12:50,250 --> 01:12:53,130\nthe copy operation,\nthe SAN does it for you, right?\n\n1579\n01:12:53,130 --> 01:12:56,690\nSo, that's the type of environment\nthat really benefits from this.\n\n1580\n01:12:56,690 --> 01:13:00,330\nBut most people doesn't have routine\ncopy operations that they undergo.\n\n1581\n01:13:02,830 --> 01:13:08,490\nIf you have Hyper V and you\nare constantly cloning virtual machines,\n\n1582\n01:13:08,490 --> 01:13:10,990\nor cloning a template to\ncreate new virtual machines,\n\n1583\n01:13:10,990 --> 01:13:14,286\nthat copy operation will really\nbe accelerated with ODX, right.\n\n1584\n01:13:15,560 --> 01:13:20,260\nOr, if you have a staging and development\nand production environment, right.\n\n1585\n01:13:20,260 --> 01:13:22,510\nAnd, once a day you take your\nproduction environment and\n\n1586\n01:13:22,510 --> 01:13:24,490\nclone it to your staging environment.\n\n1587\n01:13:24,490 --> 01:13:28,990\nThat's the kind of thing that ODX can\nreally improve the performance for, right.\n\n1588\n01:13:28,990 --> 01:13:30,060\nNot a lot of environments have that.\n\n1589\n01:13:30,060 --> 01:13:33,040\nIf you're a small or medium environment,\nyou probably don't have that at all.\n\n1590\n01:13:33,040 --> 01:13:34,100\nIt's not useful.\n\n1591\n01:13:34,100 --> 01:13:37,410\nBut in a larger enterprise environment,\nthat's a very real scenario.\n\n1592\n01:13:37,410 --> 01:13:37,920\nRight?\n\n1593\n01:13:37,920 --> 01:13:43,380\nSo, on the exam when you see somebody\ntalking about large copy operations or\n\n1594\n01:13:43,380 --> 01:13:48,080\nfrequent copy operations within\na single SAN, ODX support.\n\n1595\n01:13:48,080 --> 01:13:48,815\nThat's a big deal.\n\n1596\n01:13:48,815 --> 01:13:52,060\nSMB3.0 gives it to you,\nwith SMB2 and earlier,\n\n1597\n01:13:52,060 --> 01:13:53,160\nyou don't have that functionality.\n\n1598\n01:13:54,900 --> 01:13:55,970\nAll right, so.\n\n1599\n01:13:55,970 --> 01:13:56,910\nOr actually, hang on.\n\n1600\n01:13:56,910 --> 01:14:00,120\nI mentioned SMB,\nit's actually not tied to SMB3, sorry.\n\n1601\n01:14:00,120 --> 01:14:00,830\n>> Oh, that's right.\n\n1602\n01:14:00,830 --> 01:14:04,750\n>> It is a new feature of Windows Server\n2012, but it's not tied to SMB.\n\n1603\n01:14:04,750 --> 01:14:07,952\nSMB will be shared folders, these\nare not shared, it's right on the SAN.\n\n1604\n01:14:07,952 --> 01:14:10,717\nSo I miss spoke there, so\nlet me just correct that real quick.\n\n1605\n01:14:10,717 --> 01:14:15,670\n[LAUGH] So, definitely important\nto understand that separation.\n\n1606\n01:14:15,670 --> 01:14:17,105\nBut yes, so, that's a pretty cool one,\n\n1607\n01:14:17,105 --> 01:14:18,710\nyour hardware does have\nto support it though.\n\n1608\n01:14:18,710 --> 01:14:21,940\nSo it's another one where we\ngot to hit up the WHQL website.\n\n1609\n01:14:21,940 --> 01:14:23,540\nYou gotta make sure you got that support.\n\n1610\n01:14:23,540 --> 01:14:25,730\nYou might have to purchase new equipment\nto take advantage of this offer.\n\n1611\n01:14:25,730 --> 01:14:26,330\n>> Yeah, being a new feature,\n\n1612\n01:14:26,330 --> 01:14:28,875\nit's doubtful that some of our\nolder stuff is gonna support that.\n\n1613\n01:14:28,875 --> 01:14:29,580\n>> Mm-hm.\n\n1614\n01:14:29,580 --> 01:14:32,375\nYep, but really definitely cool.\n\n1615\n01:14:32,375 --> 01:14:32,900\n>> Mm-hm.\n>> All right.\n\n1616\n01:14:32,900 --> 01:14:33,985\nWell, Mike, I think we've been pretty\n\n1617\n01:14:33,985 --> 01:14:37,730\nexhaustive here of covering\nthe different scenarios and features.\n\n1618\n01:14:37,730 --> 01:14:41,230\n>> Yeah, I think that wraps file and\nsort services up pretty darn well.\n\n1619\n01:14:41,230 --> 01:14:44,120\nAll right, so just remember,\non the exam you're going to see questions.\n\n1620\n01:14:44,120 --> 01:14:46,120\nThey're going to give you\nthe requirements of their customers.\n\n1621\n01:14:46,120 --> 01:14:49,750\nYou know, what they're looking to achieve\nand we're selecting the right designs for\n\n1622\n01:14:49,750 --> 01:14:52,670\nthem, and the questions will focus\non all sorts of different things.\n\n1623\n01:14:52,670 --> 01:14:55,700\nBut hopefully we've given you guys\nthe scenarios, the descriptions,\n\n1624\n01:14:55,700 --> 01:14:57,230\nthe understanding of these technologies.\n\n1625\n01:14:57,230 --> 01:14:59,320\nThe whys you use these technologies.\n\n1626\n01:14:59,320 --> 01:15:01,900\nSo you can match them up to\nthe situations that need them.\n\n1627\n01:15:01,900 --> 01:15:03,540\n>> What is the priority in my design?\n\n1628\n01:15:03,540 --> 01:15:04,480\nIs it performance?\n\n1629\n01:15:04,480 --> 01:15:05,380\nIs it cost?\n\n1630\n01:15:05,380 --> 01:15:07,490\nAnd where [INAUDIBLE].\n\n1631\n01:15:07,490 --> 01:15:09,770\n>> But because this stuff is so\ndesign-based,\n\n1632\n01:15:09,770 --> 01:15:11,580\nodds are questions are gonna pop up.\n\n1633\n01:15:11,580 --> 01:15:13,520\nAnd so we wanna make sure you guys know.\n\n1634\n01:15:13,520 --> 01:15:14,990\nYou can always ask them, right?\n\n1635\n01:15:14,990 --> 01:15:16,570\nIf you have questions\nlive during the show,\n\n1636\n01:15:16,570 --> 01:15:20,900\nyou go to itpro.tv/live,\nyou'll see the chat box beneath the video.\n\n1637\n01:15:20,900 --> 01:15:24,260\nPost your questions there,\nwe monitor and answer during the show.\n\n1638\n01:15:24,260 --> 01:15:27,760\nIf you have questions after the show,\nuse our Q&A forums.\n\n1639\n01:15:27,760 --> 01:15:30,640\nAt the top of every page,\non the itpro.tv website,\n\n1640\n01:15:30,640 --> 01:15:33,800\nyou'll see a link that says Q&A,\nit will take you in to the forums.\n\n1641\n01:15:33,800 --> 01:15:36,280\nPost your questions there,\nwe monitor and answer.\n\n1642\n01:15:36,280 --> 01:15:39,700\nWe want to make sure you guys have\nthe information you need to be successful.\n\n1643\n01:15:39,700 --> 01:15:40,772\n>> Right.\n\n1644\n01:15:40,772 --> 01:15:42,880\n>> All right,\nwell I hope you guys enjoyed the show.\n\n1645\n01:15:42,880 --> 01:15:44,950\nSigning off for ITProTV, I'm Don Pezet.\n\n1646\n01:15:44,950 --> 01:15:46,140\n>> And I'm Mike Rodrick.\n\n1647\n01:15:46,140 --> 01:15:47,680\n>> And we will see you next time.\n\n1648\n01:15:47,680 --> 01:15:57,680\n[MUSIC]\n\n1649\n01:15:59,890 --> 01:16:06,130\n[SOUND]\n\n",
          "vimeoId": "107615165"
        }
      ],
      "title": "Plan and deploy a server infrastructure"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "6057",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/005-Network-Infrastructure.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/005-Network-Infrastructure-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/005-Network-Infrastructure-sm.jpg",
          "title": "Network Infrastructure",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,260 --> 00:00:22,550\n[SOUND]\n\n3\n00:00:22,550 --> 00:00:32,550\n[MUSIC]\n\n4\n00:00:33,590 --> 00:00:36,381\nAll right, good morning,\ngood afternoon and good evening.\n\n5\n00:00:36,381 --> 00:00:38,540\nAnd welcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,540 --> 00:00:40,310\nI'm your host Don Pezet.\n\n7\n00:00:40,310 --> 00:00:42,230\nBack with Mike Rodrick,\nhow's it going Mike?\n\n8\n00:00:42,230 --> 00:00:43,110\n>> Another day in paradise.\n\n9\n00:00:43,110 --> 00:00:43,930\nDon, how are you doing?\n\n10\n00:00:43,930 --> 00:00:44,890\n>> Doing just swell.\n\n11\n00:00:44,890 --> 00:00:45,650\n>> All right.\n\n12\n00:00:45,650 --> 00:00:49,640\n>> We've got an all new section\nof objects to jump into today.\n\n13\n00:00:49,640 --> 00:00:53,040\nWe're gonna be looking at\nnetwork infrastructure\n\n14\n00:00:53,040 --> 00:00:55,160\nwhich is kind of important these days.\n\n15\n00:00:55,160 --> 00:00:57,010\n>> It darn sure is, isn't it?\n\n16\n00:00:57,010 --> 00:01:00,945\n>> I look back to like the old MCSC track,\nand I mean really old, the NT41\n\n17\n00:01:00,945 --> 00:01:01,780\n>> Mm-hm.\n\n18\n00:01:01,780 --> 00:01:04,730\n>> Where, you really have to\nknow networking to do it.\n\n19\n00:01:04,730 --> 00:01:06,295\nYou could use Net-Buoy for everything.\n\n20\n00:01:06,295 --> 00:01:08,030\n>> [LAUGH]\n>> And that was it.\n\n21\n00:01:08,030 --> 00:01:11,060\nTo where we are today where DNS and\nDHCP and\n\n22\n00:01:11,060 --> 00:01:15,750\nour other network infrastructure\nservices are critical to a good design.\n\n23\n00:01:15,750 --> 00:01:17,380\n>> Yeah, yeah.\nI don't think you could run a network or\n\n24\n00:01:17,380 --> 00:01:18,650\ndesign a network without it.\n\n25\n00:01:18,650 --> 00:01:19,460\n>> Yeah you really can't.\n\n26\n00:01:19,460 --> 00:01:20,930\n>> You could but.\n\n27\n00:01:20,930 --> 00:01:24,560\nRight off the bat like active directory\nrequires a DNS infrastructure.\n\n28\n00:01:24,560 --> 00:01:25,450\nYou can't run without one.\n\n29\n00:01:25,450 --> 00:01:28,475\nSo right there you know you're\ngoing to have that other minimum.\n\n30\n00:01:28,475 --> 00:01:32,650\nDCHP, I guess you could\nget away with not running.\n\n31\n00:01:32,650 --> 00:01:33,860\nYou'd be crazy to but.\n\n32\n00:01:33,860 --> 00:01:37,270\nYeah, you're not going to be statically\nmapping 800 devices and all that.\n\n33\n00:01:37,270 --> 00:01:38,915\n>> Or running them all APIPA, right?\n\n34\n00:01:38,915 --> 00:01:41,770\n169.254 that's what we'll do\nthrough the whole network.\n\n35\n00:01:41,770 --> 00:01:44,130\n>> You know,\nMicrosoft says that is a valid solution.\n\n36\n00:01:44,130 --> 00:01:46,110\nI can run a network with APIPA.\n\n37\n00:01:46,110 --> 00:01:47,510\n>> Yeah,\nif you don't need Internet access.\n\n38\n00:01:47,510 --> 00:01:48,100\n>> Yeah, exactly.\n\n39\n00:01:48,100 --> 00:01:51,020\n>> [LAUGH] Or\nI guess if you had a proxy server.\n\n40\n00:01:51,020 --> 00:01:56,520\nYou could do a, what's it called,\nthe automatic proxy thing, its got a name.\n\n41\n00:01:56,520 --> 00:01:57,940\nIt's got a name.\n\n42\n00:01:57,940 --> 00:01:58,930\nI don't remember.\n\n43\n00:01:58,930 --> 00:02:00,050\n>> I can't think of it.\n\n44\n00:02:00,050 --> 00:02:02,860\n>> Where basically you have a proxy\nadvertising itself on the network.\n\n45\n00:02:02,860 --> 00:02:04,340\nPeople use that.\n>> No.\n\n46\n00:02:04,340 --> 00:02:06,010\n>> It doesn't matter,\nwe're creating a scenario that we do now.\n\n47\n00:02:06,010 --> 00:02:07,170\n>> Yeah,\n[LAUGH] you knew we could do that.\n\n48\n00:02:07,170 --> 00:02:08,613\n[LAUGH]\n>> [LAUGH] So,\n\n49\n00:02:08,613 --> 00:02:12,298\na good network infrastructure is\nreally important to provide all\n\n50\n00:02:12,298 --> 00:02:15,070\nthe services that people expect to have.\n\n51\n00:02:15,070 --> 00:02:17,350\nPeople expect have internet access.\n\n52\n00:02:17,350 --> 00:02:20,570\nWhether they should or not is\na different story, people expect it.\n\n53\n00:02:20,570 --> 00:02:25,650\nPeople expect to be able to easily find\nservers via name instead of an ip.\n\n54\n00:02:25,650 --> 00:02:28,610\nAnd people expect not to have\nto configure an ip address when\n\n55\n00:02:28,610 --> 00:02:29,310\nthey plug in a computer.\n\n56\n00:02:29,310 --> 00:02:30,310\n>> Absolutely, absolutely.\n\n57\n00:02:30,310 --> 00:02:32,690\nAnd we don't want to wait too long for\nthat name resolution.\n\n58\n00:02:32,690 --> 00:02:35,220\nWe don't wanna have to wait too long for\nthat ip address assignment and\n\n59\n00:02:35,220 --> 00:02:37,890\nif I can't get name resolution,\nI can't even log in.\n\n60\n00:02:37,890 --> 00:02:43,510\n>> Yeah, and the bigger your network, the\nmore difficult this becomes to support.\n\n61\n00:02:43,510 --> 00:02:44,490\nBut the more attention it needs.\n\n62\n00:02:44,490 --> 00:02:46,120\n>> Right.\n>> Because I tell you,\n\n63\n00:02:46,120 --> 00:02:48,170\na lot of people will set up a DNS server,\n\n64\n00:02:48,170 --> 00:02:51,510\nset up a DHCP server and then never touch\n>> Again because they're\n\n65\n00:02:51,510 --> 00:02:52,980\npretty stable, right?\n\n66\n00:02:52,980 --> 00:02:55,570\nI can't remember the last time\nI heard somebody say boy,\n\n67\n00:02:55,570 --> 00:02:57,970\nmy DNS server crashed today.\n\n68\n00:02:57,970 --> 00:02:59,600\nDACP is on the fritz again.\n\n69\n00:02:59,600 --> 00:03:01,760\nIt just doesn't happen, right?\n\n70\n00:03:01,760 --> 00:03:04,990\nIn DNS,\nthere's really not much that can go wrong.\n\n71\n00:03:04,990 --> 00:03:05,820\nPeriod.\n\n72\n00:03:05,820 --> 00:03:06,540\nAnd with DHCP,\n\n73\n00:03:06,540 --> 00:03:09,410\nthe only thing that really ever goes\nwrong there is you run out of addresses.\n\n74\n00:03:09,410 --> 00:03:11,450\n>> Right, and\nthat's just us again not monitoring it and\n\n75\n00:03:11,450 --> 00:03:15,950\nmaking sure we've accounted for\nany growth or anything like that.\n\n76\n00:03:15,950 --> 00:03:18,130\n>> But that is a big part of it is growth,\nright.\n\n77\n00:03:18,130 --> 00:03:20,140\n>> Yeah.\n>> The solution you put in place in\n\n78\n00:03:20,140 --> 00:03:23,970\nthe beginning might not be valid anymore,\nand I know we had that here.\n\n79\n00:03:23,970 --> 00:03:27,040\nWe have a public network\nthat we let people hop on.\n\n80\n00:03:27,040 --> 00:03:31,070\nAnd when we initially put it out there,\nit had like 200 ip's, I think,\n\n81\n00:03:31,070 --> 00:03:33,950\nin the DACP pool and 8 day leases.\n\n82\n00:03:33,950 --> 00:03:35,390\n>> Yes.\n>> it was the default in Windows.\n\n83\n00:03:35,390 --> 00:03:36,610\n>> The standard yeah.\n\n84\n00:03:36,610 --> 00:03:38,310\n>> And we were like, that's plenty.\n\n85\n00:03:38,310 --> 00:03:41,320\nNo more than 200 devices would\nshow up on this network in\n\n86\n00:03:41,320 --> 00:03:43,310\nan 8 day period, it'll be fine.\n\n87\n00:03:43,310 --> 00:03:44,910\nBut then our guests,\n\n88\n00:03:44,910 --> 00:03:48,970\npeople would come over to the studios,\nthey have iPads and iPhones.\n\n89\n00:03:48,970 --> 00:03:51,815\nI mean, sorry, Surface tablets and\nwindows phones.\n\n90\n00:03:51,815 --> 00:03:55,420\n>> [LAUGH]\n>> Yeah, not only Android devices.\n\n91\n00:03:55,420 --> 00:03:59,240\nWe have Rokus,\ncountless Rokus here at the office now.\n\n92\n00:03:59,240 --> 00:04:03,370\nIP cameras, laptops,\nall these different devices.\n\n93\n00:04:03,370 --> 00:04:04,250\n>> Count them up right now.\n\n94\n00:04:04,250 --> 00:04:08,730\nHow many devices do you have on you, with\nyou, in your bag, that need an IP address?\n\n95\n00:04:08,730 --> 00:04:12,230\n>> I mean, if we just took this podium,\nright, we'd get four or five.\n\n96\n00:04:12,230 --> 00:04:13,630\n>> One, two, three, yeah, exactly.\n\n97\n00:04:13,630 --> 00:04:15,220\nExactly so.\n\n98\n00:04:15,220 --> 00:04:18,570\n>> So that's the world that we live\nin these days and we ran out of IPs.\n\n99\n00:04:18,570 --> 00:04:20,160\n>> We did.\n>> Multiple times in there, so\n\n100\n00:04:20,160 --> 00:04:23,720\nwe had to bump that pool up\nto a much bigger pool and\n\n101\n00:04:23,720 --> 00:04:25,040\nwe shortened the leases, right.\n\n102\n00:04:25,040 --> 00:04:27,190\n>> Right.\n>> Figuring out that sweet spot is part\n\n103\n00:04:27,190 --> 00:04:28,890\nof our network infrastructure.\n\n104\n00:04:28,890 --> 00:04:31,404\nSo these are all things that\nwe need to think about and\n\n105\n00:04:31,404 --> 00:04:34,790\nthis is all part objective 2.0,\nwhich I do not have pulled up here.\n\n106\n00:04:34,790 --> 00:04:36,840\n>> It is right here.\n\n107\n00:04:36,840 --> 00:04:37,510\nBut you got it on your screen?\n\n108\n00:04:37,510 --> 00:04:38,090\n>> Oh, you've got it?\n\n109\n00:04:38,090 --> 00:04:38,970\n>> Yup.\n\n110\n00:04:38,970 --> 00:04:42,173\nObjective 2.0, design and\nimplement network infrastructure services.\n\n111\n00:04:42,173 --> 00:04:46,060\nAnd then 2.1,\nwhich I guess we'll start with, design and\n\n112\n00:04:46,060 --> 00:04:49,883\nmaintain a dynamic host\nconfiguration protocol solution.\n\n113\n00:04:49,883 --> 00:04:54,897\n>> So, DHCP, that is a, I don't\nwant to call it a critical service,\n\n114\n00:04:54,897 --> 00:04:59,303\nbecause technically DHCP fails\nyour network is still up.\n\n115\n00:04:59,303 --> 00:04:59,923\n>> Right.\n\n116\n00:04:59,923 --> 00:05:01,360\n>> But\nboy does it make things uncomfortable.\n\n117\n00:05:02,490 --> 00:05:04,700\nDHCP makes our life so much easier.\n\n118\n00:05:04,700 --> 00:05:08,620\nIt's pretty much a guarantee that\nwe're going to want to run that.\n\n119\n00:05:08,620 --> 00:05:09,850\nYou guys should already\nbe familiar with it.\n\n120\n00:05:09,850 --> 00:05:11,830\nI know we set it up in the 4-10 show.\n\n121\n00:05:11,830 --> 00:05:13,910\nSo everybody had a chance to see that.\n\n122\n00:05:13,910 --> 00:05:16,730\nBut the idea is that when a work station\nfires out on your network it should\n\n123\n00:05:16,730 --> 00:05:21,970\njust be able to reach out and find a DHCP\nserver to give it an address, right?\n\n124\n00:05:21,970 --> 00:05:24,760\nAnd I've got a simple diagram,\njust an example of that here.\n\n125\n00:05:24,760 --> 00:05:25,840\nLet me pull this up.\n\n126\n00:05:25,840 --> 00:05:30,210\nSo, you bring up a PC, so\nhere's a PC on the network.\n\n127\n00:05:30,210 --> 00:05:31,690\nAnd it just sends out a broadcast.\n\n128\n00:05:31,690 --> 00:05:34,400\nAnd it says, hey,\ncan somebody out there spot me an IP?\n\n129\n00:05:34,400 --> 00:05:35,470\nI don't need it forever.\n\n130\n00:05:35,470 --> 00:05:36,760\nI just need it for a little while.\n\n131\n00:05:36,760 --> 00:05:38,060\nHook me up.\n\n132\n00:05:38,060 --> 00:05:41,550\nAnd if we have a DHCP server on\nthe network, it'll hear that request.\n\n133\n00:05:41,550 --> 00:05:42,400\nAnd it will reply back.\n\n134\n00:05:42,400 --> 00:05:43,660\nIt'll say, here's your address.\n\n135\n00:05:43,660 --> 00:05:44,380\nOff you go.\n\n136\n00:05:44,380 --> 00:05:46,090\n>> What could go wrong there?\n\n137\n00:05:46,090 --> 00:05:46,700\n>> Pretty easy setup.\n\n138\n00:05:46,700 --> 00:05:47,940\nAnd there's actually one more step.\n\n139\n00:05:47,940 --> 00:05:49,740\nYou'll actually have to say,\nyeah, I'll take that address and\n\n140\n00:05:49,740 --> 00:05:52,580\nthe other person responds back and\nsays, here you go, it's actually yours.\n\n141\n00:05:52,580 --> 00:05:54,860\nSo it's really like a four step process.\n\n142\n00:05:54,860 --> 00:05:56,810\nIt's all broadcast.\n\n143\n00:05:56,810 --> 00:05:58,340\nThat's why you don't need an address.\n\n144\n00:05:58,340 --> 00:06:03,650\nYou're just sending\nmessages to 255.255.255.\n\n145\n00:06:03,650 --> 00:06:05,380\nYou go out on the network and\nthere you go.\n\n146\n00:06:05,380 --> 00:06:07,630\n>> At this point the client\ndoesn't even have an IP address so\n\n147\n00:06:07,630 --> 00:06:10,490\nyou can't do any type of unicast traffic.\n\n148\n00:06:10,490 --> 00:06:16,280\n>> So if it's that simple, why have it on\na planning and designing certification?\n\n149\n00:06:16,280 --> 00:06:17,784\nRight?\nWhy drive into it like that?\n\n150\n00:06:17,784 --> 00:06:19,260\n>> [LAUGH]\n>> The reason is,\n\n151\n00:06:19,260 --> 00:06:21,970\nit's not always this simple.\n\n152\n00:06:21,970 --> 00:06:25,170\nAt a bare minimum, there's two things\nyou have to worry about with DHCP.\n\n153\n00:06:25,170 --> 00:06:26,910\nWe've kind of already mentioned them.\n\n154\n00:06:26,910 --> 00:06:29,730\nYour pool size, and your lease time.\n\n155\n00:06:29,730 --> 00:06:31,390\nSo when you go to design your solution,\n\n156\n00:06:31,390 --> 00:06:33,540\nthose are usually the only\ntwo things you think about.\n\n157\n00:06:33,540 --> 00:06:36,060\nHow Big of an IP pool do I need?\n\n158\n00:06:36,060 --> 00:06:37,010\n>> Right.\n\n159\n00:06:37,010 --> 00:06:40,750\n>> And, how long do I want these people to\nlease it so that I don't run out of IPs.\n\n160\n00:06:40,750 --> 00:06:42,454\n>> Yeah.\nCuz, a lot of times I think what we forget\n\n161\n00:06:42,454 --> 00:06:45,130\nabout is the fact that it's like why\ndo I want shorten that lease time?\n\n162\n00:06:45,130 --> 00:06:45,890\nWhat's that gonna do for me?\n\n163\n00:06:45,890 --> 00:06:47,280\nBecause shortening it up,\n\n164\n00:06:47,280 --> 00:06:50,160\nmeans that you gotta talk to\nthe DHCP server move often, right?\n\n165\n00:06:50,160 --> 00:06:51,375\nWe went over in four.\n\n166\n00:06:51,375 --> 00:06:53,765\n10-4-11, whenever DHP was in.\n\n167\n00:06:53,765 --> 00:06:54,999\nIt's 50% right?\n\n168\n00:06:54,999 --> 00:06:58,720\nAt 50% mark, that's when their\ngonna attempt to renew that lease.\n\n169\n00:06:58,720 --> 00:07:01,070\nWhat sometimes we don't think\nabout is all those mobile devices,\n\n170\n00:07:01,070 --> 00:07:02,590\nlike Don was mentioning earlier.\n\n171\n00:07:02,590 --> 00:07:08,100\nPeople come into our building, they've got\ntheir Surface and they get an IP address.\n\n172\n00:07:08,100 --> 00:07:09,170\nAnd then, they leave you know?\n\n173\n00:07:09,170 --> 00:07:11,840\nAnd they,\nthey take that IP address with them.\n\n174\n00:07:11,840 --> 00:07:15,010\nThey go back to the hotel,\nback to work, whatever.\n\n175\n00:07:15,010 --> 00:07:18,220\nTheir computer,\ntheir device is gonna get an IP address\n\n176\n00:07:18,220 --> 00:07:21,680\nfrom whatever DHCP server's at\nthat network they've gone to.\n\n177\n00:07:21,680 --> 00:07:25,890\nMy DHCP server still has that address\nleased out to that person and\n\n178\n00:07:25,890 --> 00:07:28,880\nuntil that lease expires, it's not\ngonna give it out to anybody else.\n\n179\n00:07:28,880 --> 00:07:31,380\nSo we've gotta think about these\ndevices that are coming in and\n\n180\n00:07:31,380 --> 00:07:34,370\nbasically, Stealing IP addresses\nfrom our available pool.\n\n181\n00:07:34,370 --> 00:07:37,720\n>> Yeah, but if you think it's simple,\nwell you're right.\n\n182\n00:07:37,720 --> 00:07:40,430\nFor most people DHCP is simple.\n\n183\n00:07:40,430 --> 00:07:44,570\nA lot of home routers run it, there's\nnot a whole lot to plan or design for.\n\n184\n00:07:44,570 --> 00:07:47,590\nWhere it gets complex though\nis an enterprise environment.\n\n185\n00:07:47,590 --> 00:07:49,180\n>> Right.\n>> And that's what this exam is all about.\n\n186\n00:07:49,180 --> 00:07:53,980\nThis exam is not about home users and\nsmall office, this is about enterprise.\n\n187\n00:07:53,980 --> 00:07:58,996\nAnd in an enterprise network, you're\nlikely going to have more than one subnet.\n\n188\n00:07:58,996 --> 00:08:02,907\nAnd how we leverage DHCP in a multiple\nsubnet environment is important.\n\n189\n00:08:02,907 --> 00:08:06,963\nI just mentioned here in this diagram\nthat when we do a DHCP Discovery,\n\n190\n00:08:06,963 --> 00:08:10,696\nwe're trying to find a DHCP server,\nit powered by broadcasts.\n\n191\n00:08:10,696 --> 00:08:12,390\nRight?\n\n192\n00:08:12,390 --> 00:08:14,890\nWell, that works out great when\nyou have a single segment.\n\n193\n00:08:14,890 --> 00:08:17,840\nWhen your network is one flat network,\na single subnet.\n\n194\n00:08:17,840 --> 00:08:18,620\nRight?\n\n195\n00:08:18,620 --> 00:08:20,185\nBut what if we have multiple segments?\n\n196\n00:08:20,185 --> 00:08:20,780\n>> Right.\n\n197\n00:08:20,780 --> 00:08:24,130\n>> What if I have two networks\nseparated by a router?\n\n198\n00:08:24,130 --> 00:08:27,110\nWell in this scenario,\nif I have a machine,\n\n199\n00:08:27,110 --> 00:08:31,830\nlike this PC down here, let's say that\nthis guy right here is my DHCP server.\n\n200\n00:08:31,830 --> 00:08:34,833\nSo here is my DHCP server,\nthat worked out great.\n\n201\n00:08:34,833 --> 00:08:36,950\n>> [LAUGH] We know what you meant.\n\n202\n00:08:36,950 --> 00:08:37,601\n>> It completely disappeared.\n\n203\n00:08:37,601 --> 00:08:40,300\n>> [LAUGH]\n>> So this will be my DHCP server.\n\n204\n00:08:41,410 --> 00:08:45,530\nAnd when I go to communicate out,\nwell if I am in that location, wonderful.\n\n205\n00:08:45,530 --> 00:08:50,572\nThis PC can send out it's broadcast and\nit's gonna hit that DHCP server.\n\n206\n00:08:50,572 --> 00:08:51,084\n>> Right.\n>> Right?\n\n207\n00:08:51,084 --> 00:08:53,330\nBut what about this PC down here?\n\n208\n00:08:53,330 --> 00:08:58,110\nThis PC, he send out his broadcast,\nand who's gonna hear it?\n\n209\n00:08:58,110 --> 00:08:59,480\n>> Only those guys on that subnet.\n\n210\n00:08:59,480 --> 00:09:00,280\nRight?\n>> Yeah this other\n\n211\n00:09:00,280 --> 00:09:02,610\nlaptop over here's not going\nto do anything about it.\n\n212\n00:09:02,610 --> 00:09:04,291\n>> Exactly,\nbecause we put those routers in place and\n\n213\n00:09:04,291 --> 00:09:07,390\nin a lot of times to create those\ncontention or broadcast domains.\n\n214\n00:09:07,390 --> 00:09:11,030\nAnd they're not gonna allow that broadcast\nto go through to that other subnet,\n\n215\n00:09:11,030 --> 00:09:14,750\nwhich means the DHCP server is\nnever gonna hear that client.\n\n216\n00:09:14,750 --> 00:09:17,865\n>> Yeah, the broadcast will indeed\nmake it over to the router.\n\n217\n00:09:17,865 --> 00:09:18,720\nRight?\nSo\n\n218\n00:09:18,720 --> 00:09:21,270\nthe broadcast is gonna hit\neverybody on that network.\n\n219\n00:09:21,270 --> 00:09:23,190\nSo it's gonna go out,\nit's gonna hit that router.\n\n220\n00:09:23,190 --> 00:09:25,910\nBut what does a router do to a broadcast?\n\n221\n00:09:25,910 --> 00:09:27,080\nThrows it away.\n\n222\n00:09:27,080 --> 00:09:29,340\n>> Yeah.\n>> Yeah, routers route unicast packets.\n\n223\n00:09:29,340 --> 00:09:30,800\nRouters don't route broadcast.\n\n224\n00:09:30,800 --> 00:09:32,990\nIt's not gonna make it across.\n\n225\n00:09:32,990 --> 00:09:35,989\nSo in this scenario,\nhere's where my design kicks in.\n\n226\n00:09:35,989 --> 00:09:36,715\nAll right.\n\n227\n00:09:36,715 --> 00:09:40,155\nHere's where I have to think about\nwhat solution is gonna be best for me,\n\n228\n00:09:40,155 --> 00:09:41,235\nand there's two.\n\n229\n00:09:41,235 --> 00:09:42,565\n>> You can do it a couple ways, yeah.\n\n230\n00:09:42,565 --> 00:09:43,935\n>> There's two main ones\nthat I can think of.\n\n231\n00:09:43,935 --> 00:09:46,086\nI'm sure there's more that are out there.\n\n232\n00:09:46,086 --> 00:09:48,495\n>> [LAUGH] Right, yeah.\n>> But the two that are the main solution.\n\n233\n00:09:48,495 --> 00:09:50,745\nSolution number one is\nprobably the easiest,\n\n234\n00:09:50,745 --> 00:09:53,497\nwhich is stick a DHCP server over there.\n\n235\n00:09:53,497 --> 00:09:54,010\nRight?\n>> Yeah.\n\n236\n00:09:54,010 --> 00:09:55,270\n>> You got a DHCP server here,\n\n237\n00:09:55,270 --> 00:09:57,945\nlet's go ahead and just stick one,\nwhoops, that's not what I wanted.\n\n238\n00:09:57,945 --> 00:10:00,160\nGo ahead and\njust stick one over there too.\n\n239\n00:10:00,160 --> 00:10:04,150\nAnd now when they send that broadcast\nout the local DHCP server hears it and\n\n240\n00:10:04,150 --> 00:10:04,742\nresponds.\n\n241\n00:10:04,742 --> 00:10:05,255\n>> Yeah.\n>> Right?\n\n242\n00:10:05,255 --> 00:10:06,870\nAnd that's what a lot of people do.\n\n243\n00:10:06,870 --> 00:10:07,928\nA lot of people go ahead and\n\n244\n00:10:07,928 --> 00:10:10,830\nput a lot of DHCP servers in each\nof their different locations.\n\n245\n00:10:10,830 --> 00:10:14,350\n>> If you get a small number of subnets,\nmaybe that's not so bad.\n\n246\n00:10:14,350 --> 00:10:17,900\nIt does increase your complexity in\nmanaging, sometimes with that DHCP.\n\n247\n00:10:17,900 --> 00:10:22,000\nIf you get into a large number of subnets,\nit's a lot of extra equipment.\n\n248\n00:10:22,000 --> 00:10:22,720\n>> Yep.\n\n249\n00:10:22,720 --> 00:10:27,025\nNow if this branch though is a huge\noffice, if there's 5,000 PCs out here.\n\n250\n00:10:27,025 --> 00:10:30,160\nRight?\nWell you probably don't want 5,000 PCs\n\n251\n00:10:30,160 --> 00:10:33,050\ncoming all the way across to\na central DHP server anyway.\n\n252\n00:10:33,050 --> 00:10:35,720\nSo sticking one out there at\nthe remote location makes sense.\n\n253\n00:10:35,720 --> 00:10:37,840\n>> Right.\n>> They contact the local DHCP server and\n\n254\n00:10:37,840 --> 00:10:39,880\nthey're in business.\n\n255\n00:10:39,880 --> 00:10:41,698\nBut what if there's five people out there?\n\n256\n00:10:41,698 --> 00:10:42,198\nNot 5000.\n>> Right.\n\n257\n00:10:42,198 --> 00:10:42,880\n>> Just five.\n\n258\n00:10:42,880 --> 00:10:44,480\n>> And\nthey don't even have a server out there.\n\n259\n00:10:44,480 --> 00:10:45,050\n>> Probably not.\n\n260\n00:10:45,050 --> 00:10:47,150\nIf you don't have a server out there,\n\n261\n00:10:47,150 --> 00:10:51,840\nthen you don't want to bring\nup something just for DHCP.\n\n262\n00:10:51,840 --> 00:10:52,710\nIt's kinda overkill.\n\n263\n00:10:52,710 --> 00:10:53,650\n>> Right.\n>> So\n\n264\n00:10:53,650 --> 00:10:58,530\nmaybe your router supports running\nDHCP and it can provide the addresses.\n\n265\n00:10:58,530 --> 00:10:59,170\nRight?\n\n266\n00:10:59,170 --> 00:11:04,425\nBut more commonly we're gonna use\nsomething called a DHCP relay agent.\n\n267\n00:11:04,425 --> 00:11:05,045\nAll right?\n\n268\n00:11:05,045 --> 00:11:09,465\nA DHCP relay agent, or sometimes you'll\nhear it called an IP Helper Address.\n\n269\n00:11:09,465 --> 00:11:12,235\nMicrosoft, for the exam,\nthey call it a DHCP relay agent.\n\n270\n00:11:12,235 --> 00:11:13,785\n>> Yep.\n>> That's what you're gonna see.\n\n271\n00:11:13,785 --> 00:11:16,375\nIn real life land,\nCisco calls it an IP helper adjuster.\n\n272\n00:11:16,375 --> 00:11:18,145\nYou see that a lot more commonly.\n\n273\n00:11:18,145 --> 00:11:20,410\nBut on the exam you'll see relay agent.\n\n274\n00:11:20,410 --> 00:11:24,017\nWith a relay agent, it can be your router,\nor it can be another server.\n\n275\n00:11:24,017 --> 00:11:25,940\nRight?\nMaybe I have a file server\n\n276\n00:11:25,940 --> 00:11:26,510\nthat's out there.\n\n277\n00:11:26,510 --> 00:11:30,125\nNot a DHCP server, just a file server.\n\n278\n00:11:30,125 --> 00:11:34,110\nRight?\nAnd I guess I only have so much room.\n\n279\n00:11:34,110 --> 00:11:38,290\nSo, it will be a file server, and\nit's just sitting out there waiting for\n\n280\n00:11:38,290 --> 00:11:40,764\npeople to connect up and\ndo whatever it is they do.\n\n281\n00:11:40,764 --> 00:11:45,730\nRight?\nWell, it can listen out for broadcasts.\n\n282\n00:11:45,730 --> 00:11:48,320\nWhen somebody does a broadcast looking for\na DHCP address,\n\n283\n00:11:48,320 --> 00:11:53,450\nit can intercept it and\nrelay it over to the DHCP server.\n\n284\n00:11:53,450 --> 00:11:56,020\nSo, this guy sends out a broadcast.\n\n285\n00:11:56,020 --> 00:11:57,429\nRight?\nAnd it goes out on the network.\n\n286\n00:11:58,740 --> 00:12:03,890\nGoing out to whoever is going to listen,\nthat's the whole nature of a broadcast.\n\n287\n00:12:03,890 --> 00:12:06,730\nAnd it goes out and one of the people\nthat's gonna hear it is the server.\n\n288\n00:12:06,730 --> 00:12:07,830\nNow you know the other machines,\n\n289\n00:12:07,830 --> 00:12:10,370\nthis laptop will here it too,\nthe router will heat it too.\n\n290\n00:12:10,370 --> 00:12:11,910\nBut if they're not relay agents,\n\n291\n00:12:11,910 --> 00:12:14,990\nthey're just gonna ignore it,\nthey're not gonna do anything about that.\n\n292\n00:12:14,990 --> 00:12:17,670\nBut this guy, the file server.\n\n293\n00:12:17,670 --> 00:12:21,680\nIf I have it configured as a DHCP relay\nagent, it will do something about it.\n\n294\n00:12:21,680 --> 00:12:24,450\nIt will intercept that call and\n\n295\n00:12:24,450 --> 00:12:28,910\nit will send it over to\na DHCP server somewhere else.\n\n296\n00:12:28,910 --> 00:12:31,520\nRight?\nIf we've got a DHCP server set up at our\n\n297\n00:12:31,520 --> 00:12:33,390\nhome office, or wherever.\n\n298\n00:12:33,390 --> 00:12:37,970\nIt will send it right along and get it\nover there, so that we can get a response.\n\n299\n00:12:37,970 --> 00:12:41,500\nBasically it's just converting\nthat broadcast into a unicast, so\n\n300\n00:12:41,500 --> 00:12:44,460\nthat it can be sent across the wire\n>> Which means that he does have\n\n301\n00:12:44,460 --> 00:12:48,910\nto have the ip address of that DHCP\nserver in order to create that unicast.\n\n302\n00:12:48,910 --> 00:12:51,893\nAnd when it comes back,\nit comes back not to the client that is\n\n303\n00:12:51,893 --> 00:12:54,480\nrequesting the address but\nback to the relay agent.\n\n304\n00:12:54,480 --> 00:12:58,084\nAnd the relay agent just turns around and\nturns it back into a broadcast, and\n\n305\n00:12:58,084 --> 00:13:01,140\ndumps it back into the subnet and\nthe client gets his answer.\n\n306\n00:13:01,140 --> 00:13:04,580\nAnd the client is really unaware\nthat anyone is even helping do this,\n\n307\n00:13:04,580 --> 00:13:06,470\nhe's just hollering out and\ngetting a response.\n\n308\n00:13:06,470 --> 00:13:08,650\nHe thinks everything's working fine.\n\n309\n00:13:08,650 --> 00:13:11,502\n>> So, pros and cons of this model.\n\n310\n00:13:11,502 --> 00:13:13,940\nAll right?\nOn a positive side I could\n\n311\n00:13:13,940 --> 00:13:17,110\nhave 50 branch offices,\n50 different subnets.\n\n312\n00:13:17,110 --> 00:13:20,360\nAll feeding from one DHCP server.\n\n313\n00:13:20,360 --> 00:13:22,400\nMakes management a breeze.\n\n314\n00:13:22,400 --> 00:13:23,110\nRight?\n>> Right.\n\n315\n00:13:23,110 --> 00:13:25,600\n>> Anytime I wanna manage DHCP,\nI got one place to go.\n\n316\n00:13:25,600 --> 00:13:27,330\nMy one centralized DHCP server.\n\n317\n00:13:27,330 --> 00:13:29,580\nSo from a management perspective,\n\n318\n00:13:29,580 --> 00:13:32,520\na single DHCP server is a heck\nof a lot more convenient.\n\n319\n00:13:32,520 --> 00:13:34,850\nAnd we can leverage\nthings like subnets and\n\n320\n00:13:34,850 --> 00:13:39,570\nsupernets to set up custom options and\nvalues that we push out to our clients.\n\n321\n00:13:39,570 --> 00:13:41,790\nIt really does make things flexible and\neasy.\n\n322\n00:13:41,790 --> 00:13:44,843\nSo as the administrator,\nthis is usually what we want.\n\n323\n00:13:44,843 --> 00:13:45,510\n>> Right.\n\n324\n00:13:45,510 --> 00:13:46,425\n>> On the con side.\n\n325\n00:13:46,425 --> 00:13:46,930\nRight?\nFor\n\n326\n00:13:46,930 --> 00:13:48,925\nan end user there's some latency involved.\n\n327\n00:13:48,925 --> 00:13:51,440\n>> Right.\n>> If it was a local DHCP server I'd get\n\n328\n00:13:51,440 --> 00:13:52,755\nmy results really fast.\n\n329\n00:13:52,755 --> 00:13:53,310\n>> Right.\n>> But\n\n330\n00:13:53,310 --> 00:13:56,520\nsince I'm having to relay this across,\nmaybe that's a WAN,\n\n331\n00:13:56,520 --> 00:13:58,470\nmaybe it's just a router on a LAN so\nit's not that long.\n\n332\n00:13:58,470 --> 00:14:00,160\nBut it's gotta be relayed nonetheless.\n\n333\n00:14:00,160 --> 00:14:02,170\nThat's gonna increase the amount\nof time that it takes.\n\n334\n00:14:02,170 --> 00:14:05,252\nAnd if it takes too long my\nDHCP request might time out.\n\n335\n00:14:05,252 --> 00:14:05,762\n>> Right.\n>> Right?\n\n336\n00:14:05,762 --> 00:14:07,500\nSo we've gotta keep that in consideration.\n\n337\n00:14:08,710 --> 00:14:12,270\nThe other negative is if I\nhave 50 branches out here and\n\n338\n00:14:12,270 --> 00:14:14,930\nall of them are using\nmy central DHCP server.\n\n339\n00:14:14,930 --> 00:14:16,990\nWhat happens if the DHCP server fails?\n\n340\n00:14:16,990 --> 00:14:18,210\n>> You're in a world of hurt.\n\n341\n00:14:18,210 --> 00:14:18,712\n>> Yeah [LAUGH].\n\n342\n00:14:18,712 --> 00:14:19,475\n>> Well not immediately.\n\n343\n00:14:19,475 --> 00:14:21,520\n>> I guess it depends on how\nlong your lease time is [LAUGH].\n\n344\n00:14:21,520 --> 00:14:23,220\n>> Yeah, not immediately, I supposed.\n\n345\n00:14:23,220 --> 00:14:25,180\n>> If you got eight day leases and\n\n346\n00:14:25,180 --> 00:14:28,425\nall your computers are on,\nin eight days it's really gonna suck.\n\n347\n00:14:28,425 --> 00:14:32,140\n[LAUGH] That's how long you\nhave to fix the problem.\n\n348\n00:14:32,140 --> 00:14:33,430\n>> Or notice that it's down there.\n\n349\n00:14:33,430 --> 00:14:37,250\n>> Yeah, but, if there was a computer that\nwasn't on, when you had that failure and\n\n350\n00:14:37,250 --> 00:14:38,635\nyou had just turned it on.\n\n351\n00:14:38,635 --> 00:14:40,320\n>> Yeah.\n>> Even though they had a lease before,\n\n352\n00:14:40,320 --> 00:14:43,870\nthey're gonna boot up and try to get an\naddress and now they're not gonna get one.\n\n353\n00:14:43,870 --> 00:14:45,255\nThey're gonna get a 169254 address.\n\n354\n00:14:45,255 --> 00:14:46,932\n>> Right.\n>> And they'll think the network is down.\n\n355\n00:14:46,932 --> 00:14:48,810\nAll right?\n\n356\n00:14:48,810 --> 00:14:51,060\nAnd it's not just the DHCP\nserver going down.\n\n357\n00:14:51,060 --> 00:14:52,065\nIf that's a WAN link.\n\n358\n00:14:52,065 --> 00:14:55,080\nRight?\nMaybe this is a T1 line or cable or\n\n359\n00:14:55,080 --> 00:14:55,930\nDSL or whatever.\n\n360\n00:14:55,930 --> 00:14:57,150\nIf that line goes down,\n\n361\n00:14:57,150 --> 00:14:59,620\nif we lose our Internet connection,\nthese guys are dead in the water.\n\n362\n00:14:59,620 --> 00:15:00,460\n>> Absolutely.\n\n363\n00:15:00,460 --> 00:15:02,920\nAnd that file server, we were\ntalking about installing routing and\n\n364\n00:15:02,920 --> 00:15:05,030\nroute access just to\nmake that a relay agent.\n\n365\n00:15:05,030 --> 00:15:07,150\nSo there's a bit more complexity there.\n\n366\n00:15:07,150 --> 00:15:10,800\n>> Yeah, it's extra services\nthat are running on that server.\n\n367\n00:15:10,800 --> 00:15:12,880\nGetting kind of beyond\nthe scope of what it does.\n\n368\n00:15:12,880 --> 00:15:16,009\nNow if your router supports it, then that\ntakes a little bit off of the server.\n\n369\n00:15:16,009 --> 00:15:16,653\n>> Yeah.\n>> But still,\n\n370\n00:15:16,653 --> 00:15:17,950\nit's more to run on your network.\n\n371\n00:15:19,110 --> 00:15:21,690\nSo definitely pros and cons.\n\n372\n00:15:21,690 --> 00:15:25,440\nThe centralized DHCP\nserver is really nice, but\n\n373\n00:15:25,440 --> 00:15:27,590\nredundancy needs to be your consideration.\n\n374\n00:15:27,590 --> 00:15:28,240\nRight?\n\n375\n00:15:28,240 --> 00:15:30,410\nTypically it's two types of redundancy.\n\n376\n00:15:30,410 --> 00:15:32,620\nRight?\nWe need redundancy for our WAN links.\n\n377\n00:15:32,620 --> 00:15:37,370\nSo if some Internet connection goes down\nor whatever, another connection steps in.\n\n378\n00:15:37,370 --> 00:15:41,080\nFortunately in today's world,\nwe have so many web-based services,\n\n379\n00:15:41,080 --> 00:15:45,880\nlike Office 365 and Shared Storage and\nstuff, that if the WAN link goes down,\n\n380\n00:15:45,880 --> 00:15:47,395\npeople are typically\ndead in the water anyway.\n\n381\n00:15:47,395 --> 00:15:48,690\n>> [LAUGH] Right.\n>> Regardless of\n\n382\n00:15:48,690 --> 00:15:50,620\nwhether they have an IP address or not.\n\n383\n00:15:50,620 --> 00:15:54,470\nSo it may not be that big of a concern to\nworry about the WAN length, but you'll\n\n384\n00:15:54,470 --> 00:15:58,572\nnormally want redundancy there and then\nthe other place would be the DHCP server.\n\n385\n00:15:58,572 --> 00:15:59,152\n>> Right.\n\n386\n00:15:59,152 --> 00:15:59,862\n>> Right?\n\n387\n00:15:59,862 --> 00:16:03,090\nAnd we've got a couple of ways that\nwe can make a DHCP server redundant.\n\n388\n00:16:03,090 --> 00:16:07,260\nSo, the one that pops into my mind, is\nprobably the hardest, which is clustering.\n\n389\n00:16:07,260 --> 00:16:08,267\n>> The clustering, yeah.\n\n390\n00:16:08,267 --> 00:16:10,108\nI mean,\nbecause it is a clusterable service.\n\n391\n00:16:10,108 --> 00:16:11,455\nRight?\nSo we can dump it on top of\n\n392\n00:16:11,455 --> 00:16:13,179\na normal Windows failover cluster.\n\n393\n00:16:13,179 --> 00:16:14,209\nBut that again,\n\n394\n00:16:14,209 --> 00:16:19,300\nthat's a lot of expense if you're just\ntrying to provide redundancy for DHCP.\n\n395\n00:16:19,300 --> 00:16:23,260\nIf you've got clustering running for\nsomething else, and\n\n396\n00:16:23,260 --> 00:16:26,420\nyou need to add some fault tolerance\nto DHCP and maybe I go ahead and\n\n397\n00:16:26,420 --> 00:16:29,660\ndump that on top of there, it's quite\na bit of hardware and expense and\n\n398\n00:16:29,660 --> 00:16:32,390\nmanagement just to provide redundancy for\nDHCP.\n\n399\n00:16:32,390 --> 00:16:34,670\nWe've got some other solutions we can do.\n\n400\n00:16:34,670 --> 00:16:36,450\nMaybe a little less expensive.\n\n401\n00:16:36,450 --> 00:16:40,930\nI'm thinking like split scope is one and\nthat's the one Microsoft recommended for\n\n402\n00:16:40,930 --> 00:16:41,960\na long time.\n\n403\n00:16:41,960 --> 00:16:43,340\nWas just dividing that scope.\n\n404\n00:16:43,340 --> 00:16:45,570\nRunning more then one DHCP server and\n\n405\n00:16:45,570 --> 00:16:49,020\nthen dividing that scope\namongst those DHCP servers.\n\n406\n00:16:49,020 --> 00:16:53,990\nTrick was getting that set up,\nyou had to be very careful because DHCP at\n\n407\n00:16:53,990 --> 00:16:56,800\nthe time was unaware of\nany other GHP server.\n\n408\n00:16:56,800 --> 00:17:00,910\nJust independent servers, they don't talk\nto each other, share any information, or\n\n409\n00:17:00,910 --> 00:17:01,670\nanything like that.\n\n410\n00:17:01,670 --> 00:17:05,260\nSo you had to make sure that\nyou didn't overlap any scopes.\n\n411\n00:17:05,260 --> 00:17:08,780\nYou could end up passing out duplicate\nIP addresses on your network.\n\n412\n00:17:08,780 --> 00:17:12,026\nSo it was the [INAUDIBLE]\npercentage we used to do the\n\n413\n00:17:12,026 --> 00:17:13,597\n>> They used to do the 80-20.\n\n414\n00:17:13,597 --> 00:17:14,850\n>> The 80-20 rule, there we go.\n\n415\n00:17:14,850 --> 00:17:18,500\n>> Where we take 80% of the addresses and\nput them on one server, and\n\n416\n00:17:18,500 --> 00:17:20,810\nthen 20% of the addresses\non the other server.\n\n417\n00:17:20,810 --> 00:17:23,350\nAnd that way if that one\nwas considered our primary.\n\n418\n00:17:23,350 --> 00:17:26,060\nIf he went down,\nthe other guy had enough left to.\n\n419\n00:17:27,670 --> 00:17:28,720\nKeep going for a little while.\n\n420\n00:17:28,720 --> 00:17:29,570\n>> Yeah, I always hated that.\n\n421\n00:17:29,570 --> 00:17:30,535\nI always want 50-50.\n\n422\n00:17:30,535 --> 00:17:33,339\n>> [LAUGH] Just split it right down the\nmiddle, [CROSSTALK] and makes it simple.\n\n423\n00:17:33,339 --> 00:17:36,650\n>> It's Microsoft best practices to do\n8020, it's what they write in the guide.\n\n424\n00:17:36,650 --> 00:17:39,960\nAnd now there's a little wizard that does\nit, and that's what they want you to do.\n\n425\n00:17:39,960 --> 00:17:40,590\nI always want 50-50.\n\n426\n00:17:40,590 --> 00:17:43,430\nIf your servers are equal,\nwhat do you care?\n\n427\n00:17:43,430 --> 00:17:44,510\nYou set it up that way.\n\n428\n00:17:44,510 --> 00:17:45,550\n>> It makes more sense to me.\n\n429\n00:17:45,550 --> 00:17:49,630\n>> And if one of your servers runs out\nof addresses, it just stops answering.\n\n430\n00:17:49,630 --> 00:17:51,500\nAnd the other server issues\nout in the meantime.\n\n431\n00:17:51,500 --> 00:17:53,240\nSo that's kinda what I've always done.\n\n432\n00:17:53,240 --> 00:17:56,690\nThe key thing to remember is you\nhave to plan for failure, all right.\n\n433\n00:17:56,690 --> 00:18:01,440\nSo if one server fails, the other servers\nneeds to have enough addresses to\n\n434\n00:18:01,440 --> 00:18:03,400\ncompensate for the one that was down.\n\n435\n00:18:03,400 --> 00:18:05,690\nAnd so you split up your range to do that.\n\n436\n00:18:05,690 --> 00:18:08,320\nSo let's say we were\ndoing an entire class C.\n\n437\n00:18:08,320 --> 00:18:12,890\nSo you got, we'll just do\n192.168.0.1 through 254 right.\n\n438\n00:18:14,120 --> 00:18:17,930\nSo you might split it down the middle or\nyou might do an 80 20 or whatever.\n\n439\n00:18:17,930 --> 00:18:21,000\nBut what you do is you put\nthe whole range on both servers.\n\n440\n00:18:21,000 --> 00:18:24,240\nBut you put an exclusion on\nthe two servers to block it.\n\n441\n00:18:24,240 --> 00:18:26,050\nLet me, let me give you an example.\n\n442\n00:18:26,050 --> 00:18:31,610\nI guess I don't have the note,\nlet me just do a blank note file here.\n\n443\n00:18:31,610 --> 00:18:32,200\nAll right.\nSo,\n\n444\n00:18:32,200 --> 00:18:35,350\nlet's say my network is 192.168.0.1 or\n0.0 slash 24.\n\n445\n00:18:35,350 --> 00:18:40,790\nAnd I want to set aside a few IPs for\nmy servers and things like that.\n\n446\n00:18:40,790 --> 00:18:47,080\nSo maybe I'm going to issue\nout 192.168.0.100 through 199.\n\n447\n00:18:47,080 --> 00:18:49,420\nRight?\nJust a cool 100 addresses.\n\n448\n00:18:49,420 --> 00:18:52,280\nOr I guess we could take it all\nthe way to 200 just to do whatever.\n\n449\n00:18:53,440 --> 00:18:54,350\nAll right.\n\n450\n00:18:54,350 --> 00:18:58,310\nSo that's the address range that I'm\ngoing to be handing out via DHCP.\n\n451\n00:18:58,310 --> 00:19:02,822\nSo on my two servers\non DHCP server one and\n\n452\n00:19:02,822 --> 00:19:08,263\nDHCP server two I create\na pool which is going to be\n\n453\n00:19:08,263 --> 00:19:13,843\n192.168.0.100 through 200 and\n\n454\n00:19:13,843 --> 00:19:18,405\nI create this same exact pool over here.\n\n455\n00:19:18,405 --> 00:19:23,390\n192.168.0.100 through 200.\nYou might be saying to yourself, Don,\n\n456\n00:19:23,390 --> 00:19:27,870\nyou just said don't overlap.\n\n457\n00:19:27,870 --> 00:19:34,900\nWell, what we do then,\nis we put an exclusion in.\n\n458\n00:19:34,900 --> 00:19:38,730\nOn this one,\nmaybe we exclude 192.168.0.150.\n\n459\n00:19:38,730 --> 00:19:39,450\nThrough 200.\n\n460\n00:19:39,450 --> 00:19:44,473\nAnd on the other one, we exclude\n\n461\n00:19:44,473 --> 00:19:52,109\n192.168.0.100 through 149.\n\n462\n00:19:52,109 --> 00:19:57,010\nOkay?\nSo this exclusion covers the valid IPs on\n\n463\n00:19:57,010 --> 00:19:58,727\nthis server.\n\n464\n00:19:58,727 --> 00:20:01,740\nAnd this exclusion covers\nthe valid IPs on this server.\n\n465\n00:20:01,740 --> 00:20:03,130\nThey're excluding each other.\n\n466\n00:20:03,130 --> 00:20:05,590\n>> Right\n>> So they have the addresses but\n\n467\n00:20:05,590 --> 00:20:07,180\nthey don't overlap because the exclusion.\n\n468\n00:20:08,440 --> 00:20:12,620\nOn a positive side they can both be\nissuing out addresses at the same time and\n\n469\n00:20:12,620 --> 00:20:14,990\nI don't have to worry\nabout duplicate IP's.\n\n470\n00:20:14,990 --> 00:20:17,540\nOn a negative side if a failure happens,\nwhat do I have to do?\n\n471\n00:20:17,540 --> 00:20:20,150\nI have to go and remove the exclusion.\n\n472\n00:20:20,150 --> 00:20:21,920\nOtherwise it's not going to\nhand out those addresses.\n\n473\n00:20:21,920 --> 00:20:22,850\n>> Right.\n\n474\n00:20:22,850 --> 00:20:25,680\nAnd even if I do that,\nif I remove the exclusion,\n\n475\n00:20:25,680 --> 00:20:29,825\nnow I'm handing out addresses that\nmight already be in use on the network.\n\n476\n00:20:29,825 --> 00:20:32,730\n>> Because you're not transferring those\nleases over or anything like that.\n\n477\n00:20:32,730 --> 00:20:36,180\nSo he doesn't know if he says he's\ngot this new pool of addresses, but\n\n478\n00:20:36,180 --> 00:20:39,530\nhe doesn't know if any of those addresses\nbeen used on the network already, so\n\n479\n00:20:39,530 --> 00:20:42,730\nhe could end up passing out addresses\nto other clients already have.\n\n480\n00:20:42,730 --> 00:20:45,430\n>> So what if I want that though?\n\n481\n00:20:45,430 --> 00:20:46,660\nWhat if that is what I want?\n\n482\n00:20:46,660 --> 00:20:49,260\nI want to be able to maintain\nthat state in a failure.\n\n483\n00:20:49,260 --> 00:20:51,170\nThat is where the cluster comes in.\n\n484\n00:20:51,170 --> 00:20:55,260\nSo if you've ever asked yourself,\nwhy the heck would anybody cluster DHCP,\n\n485\n00:20:55,260 --> 00:20:59,820\nmy Linksys WRT 54G can run it,\nwhy would I cluster that.\n\n486\n00:20:59,820 --> 00:21:01,700\nNo, the reason is state, right?\n\n487\n00:21:01,700 --> 00:21:05,420\nYou want to make sure that if somebody\nalready has an address assigned to them,\n\n488\n00:21:05,420 --> 00:21:08,780\neven when you fail,\nyou still have a record of that.\n\n489\n00:21:08,780 --> 00:21:10,600\nYou know, so\nthat their lease is still valid.\n\n490\n00:21:10,600 --> 00:21:14,430\nWhat will happen in this scenario\nis when you remove that exclusion\n\n491\n00:21:14,430 --> 00:21:16,860\nit's gonna start trying to\nissue out IPs in that range.\n\n492\n00:21:16,860 --> 00:21:19,520\nAnd every time a Microsoft DHCP\nissues an address,\n\n493\n00:21:19,520 --> 00:21:22,190\nthere's something they don't\nput in the documentation.\n\n494\n00:21:22,190 --> 00:21:24,470\nIt actually checks to see if\nthe address is already in use.\n\n495\n00:21:25,500 --> 00:21:30,230\nIf it sees the address is already in use,\nit marks the address as invalid.\n\n496\n00:21:30,230 --> 00:21:33,170\nIt actually creates a lease for\nit, and flags it as invalid.\n\n497\n00:21:33,170 --> 00:21:36,210\nAll right, so if that range,\n\n498\n00:21:36,210 --> 00:21:41,030\nmy ranges are two ranges of 50 IPs each,\nwhen we remove this lease up here,\n\n499\n00:21:41,030 --> 00:21:44,990\nif 40 of those addresses are already\nin use, they all get marked as invalid.\n\n500\n00:21:44,990 --> 00:21:45,760\nRight?\n\n501\n00:21:45,760 --> 00:21:49,730\nAnd, that's okay cause the people that\nhave those addresses will continue to use\n\n502\n00:21:49,730 --> 00:21:51,750\nthem, they're trying to renew their lease.\n\n503\n00:21:51,750 --> 00:21:55,240\nWhen they go to renew,\nthey'll get a new address and\n\n504\n00:21:55,240 --> 00:21:57,160\ntheir invalid one will be\nfreed up to be used again.\n\n505\n00:21:57,160 --> 00:21:59,560\nSo, it'll work itself out eventually.\n\n506\n00:21:59,560 --> 00:22:00,210\n>> Eventually.\n\n507\n00:22:00,210 --> 00:22:03,590\n>> Once your lease times are all up,\nit'll work itself out.\n\n508\n00:22:03,590 --> 00:22:07,150\nBut if you have a cluster,\nwhen one node fails and\n\n509\n00:22:07,150 --> 00:22:09,930\nthe other cluster node takes over,\nit's got\n\n510\n00:22:09,930 --> 00:22:15,040\nthe full DHCP database live to the moment\nwith every lease that was in there.\n\n511\n00:22:15,040 --> 00:22:16,625\nThere is no working itself out.\n\n512\n00:22:16,625 --> 00:22:17,775\nIt's already done.\n\n513\n00:22:17,775 --> 00:22:18,850\nThat's right, I did air quotes.\n\n514\n00:22:18,850 --> 00:22:19,750\n>> [LAUGH] I saw that.\n\n515\n00:22:19,750 --> 00:22:24,265\n[LAUGH]\nAnd now in 2012 they introduced\n\n516\n00:22:24,265 --> 00:22:29,065\na pretty cool new feature\nwhich is this DHCP fail over.\n\n517\n00:22:29,065 --> 00:22:33,125\nSo now, instead of, if you don't\nhave the cluster already running and\n\n518\n00:22:33,125 --> 00:22:36,103\nyou don't want to have that\nextra expense of setting\n\n519\n00:22:36,103 --> 00:22:39,297\nup a Windows fail over cluster just for\nDHCP [CROSSTALK].\n\n520\n00:22:39,297 --> 00:22:40,042\n>> Yeah, all that.\n\n521\n00:22:40,042 --> 00:22:40,695\n>> Yeah, all that.\n\n522\n00:22:40,695 --> 00:22:46,170\nExpense, we can do now within\nDHCP its own sort of failover.\n\n523\n00:22:46,170 --> 00:22:49,240\nIt's really pretty darn cool, and\nit's incredibly easy to set up.\n\n524\n00:22:49,240 --> 00:22:52,950\nWell we did it in 412, so you guys, if\nyou missed that episode, you go back and\n\n525\n00:22:52,950 --> 00:22:53,510\ncheck 412.\n\n526\n00:22:53,510 --> 00:22:55,730\nWe set up a DHCP failover, and\n\n527\n00:22:55,730 --> 00:22:59,280\nyou're just creating a relationship\nwith two DHCP servers.\n\n528\n00:22:59,280 --> 00:23:00,570\nAnd now they're aware of each other.\n\n529\n00:23:00,570 --> 00:23:01,400\nThat's really the key.\n\n530\n00:23:01,400 --> 00:23:03,130\nThey know about each other.\n\n531\n00:23:03,130 --> 00:23:07,060\nAnd as we said last show, we can set it\nup as either a load balancing mode, or\n\n532\n00:23:07,060 --> 00:23:10,400\na hot standby type mode,\nor whatever we wanna do.\n\n533\n00:23:10,400 --> 00:23:15,250\nBut we can provide fault tolerance right\nthere within DHCP without requiring\n\n534\n00:23:15,250 --> 00:23:18,450\nthat shared storage and that failover\ncluster and things like that.\n\n535\n00:23:18,450 --> 00:23:20,885\n>> Yeah, and they'll fail over\nautomatically, right Mike?\n\n536\n00:23:20,885 --> 00:23:22,310\n>> Mm-hm\n>> When one goes down.\n\n537\n00:23:22,310 --> 00:23:23,430\n>> Yes.\n>> So,\n\n538\n00:23:23,430 --> 00:23:25,490\nwe really have three solutions here.\n\n539\n00:23:25,490 --> 00:23:26,470\nThey're all effective.\n\n540\n00:23:26,470 --> 00:23:27,080\nThey all work.\n\n541\n00:23:27,080 --> 00:23:28,660\nDifferent pros and cons, right?\n\n542\n00:23:28,660 --> 00:23:33,400\nThe easiest is just to manually\nsplit the pools yourself, and\n\n543\n00:23:33,400 --> 00:23:35,230\nthe servers act independently.\n\n544\n00:23:35,230 --> 00:23:37,855\nThe negative is it takes them a little\nwhile to work out their problems after\n\n545\n00:23:37,855 --> 00:23:38,465\na failure is detected.\n\n546\n00:23:38,465 --> 00:23:40,305\n>> Right.\nAnd you have to get manually involved, but\n\n547\n00:23:40,305 --> 00:23:42,120\nif that's what you want\nthen it works out great.\n\n548\n00:23:42,120 --> 00:23:42,745\n>> Mm-hm.\n\n549\n00:23:42,745 --> 00:23:44,545\n>> There's the DACP failover solution.\n\n550\n00:23:44,545 --> 00:23:46,035\n>> Right.\n>> Doesn't require a cluster,\n\n551\n00:23:46,035 --> 00:23:46,810\nso that's nice.\n\n552\n00:23:46,810 --> 00:23:48,215\n>> Mm-hm.\n>> Has automatic failover, so\n\n553\n00:23:48,215 --> 00:23:49,155\nit's a pretty good solution.\n\n554\n00:23:49,155 --> 00:23:51,195\nAnd then there's the full clustering.\n\n555\n00:23:51,195 --> 00:23:52,845\n>> Right.\n>> Full clustering gives you the best\n\n556\n00:23:52,845 --> 00:23:54,260\navailability.\n\n557\n00:23:54,260 --> 00:23:57,310\n>> But at a cost, and it's more complex.\n\n558\n00:23:57,310 --> 00:23:58,720\nWhich solution is right?\n\n559\n00:23:58,720 --> 00:24:00,790\nWell, it depends on\nthe needs of your customer.\n\n560\n00:24:00,790 --> 00:24:01,368\nYou know?\n\n561\n00:24:01,368 --> 00:24:06,280\nIf it's 100% up time with zero down time,\nclustering is your only choice.\n\n562\n00:24:06,280 --> 00:24:07,660\nThat is the closest you are going to get.\n\n563\n00:24:07,660 --> 00:24:14,496\nBut if they want automatic fail over,\nthat's where the DHAP fail over comes in.\n\n564\n00:24:14,496 --> 00:24:18,280\nAnd if they want manual control,\nthat's where just doing splits comes in.\n\n565\n00:24:18,280 --> 00:24:21,191\nNow one negative of doing\na split scope is you have to\n\n566\n00:24:21,191 --> 00:24:26,650\nconfigure your options independently for\nthe servers, and that's kinda a hassle.\n\n567\n00:24:26,650 --> 00:24:28,980\nBut you can use Power Shell and\n\n568\n00:24:28,980 --> 00:24:31,530\nother command lists to kinda\nautomate that process.\n\n569\n00:24:31,530 --> 00:24:32,530\nThere's a few things you can do.\n\n570\n00:24:32,530 --> 00:24:35,220\nAnd you can export a J Speak\nconfiguration and reimport it.\n\n571\n00:24:35,220 --> 00:24:37,400\nThere's certain ways to\nkinda shortcut that.\n\n572\n00:24:37,400 --> 00:24:39,470\nIt kinda alleviates the pain there.\n\n573\n00:24:39,470 --> 00:24:41,375\nBut just understand, for some people,\nthat is the best solution.\n\n574\n00:24:43,488 --> 00:24:44,200\nAll right.\n\n575\n00:24:44,200 --> 00:24:46,295\nWhat else do we have on DHCP here.\n\n576\n00:24:46,295 --> 00:24:48,400\n[CROSSTALK] We've got DHCP v6.\n\n577\n00:24:48,400 --> 00:24:51,837\n>> Yeah, and I think we've kinda talked\nabout that again in some of our other\n\n578\n00:24:51,837 --> 00:24:52,400\nepisodes.\n\n579\n00:24:52,400 --> 00:24:53,570\nIf you're gonna be using IPv6,\n\n580\n00:24:53,570 --> 00:24:57,020\nit's good to know that DHCP\nfully supports it, right?\n\n581\n00:24:57,020 --> 00:25:00,300\nIt's ready to go out of\nthe box with DHCP V6.\n\n582\n00:25:00,300 --> 00:25:03,890\nWe can pass out v6 addresses\njust like we do v4 addresses.\n\n583\n00:25:03,890 --> 00:25:07,410\nWhich is what we called that stateful\nmode where somebody's actually\n\n584\n00:25:07,410 --> 00:25:11,200\nkeeping track of what v6 address\nare being passed out to those nodes.\n\n585\n00:25:11,200 --> 00:25:14,120\nOr we could do the stateless\nmode where we've got a router\n\n586\n00:25:14,120 --> 00:25:17,470\nthat's doing an advertisement and,\nfrom our other classes,\n\n587\n00:25:17,470 --> 00:25:20,880\nyou guys have learned that they can pretty\nmuch generated their own IPv6 address.\n\n588\n00:25:20,880 --> 00:25:24,200\nOnce they get the global\nprefix from the router.\n\n589\n00:25:24,200 --> 00:25:28,320\nBut we still might wanna use DHCP to pass\nout some of those other options, right?\n\n590\n00:25:28,320 --> 00:25:32,350\nWe know DHCP is not just IP address and\nsubnet masks.\n\n591\n00:25:32,350 --> 00:25:36,290\nDNS server address, NetBIOS node type,\nor DNS suffix search list, and\n\n592\n00:25:36,290 --> 00:25:37,250\nthings like that.\n\n593\n00:25:37,250 --> 00:25:42,170\nSo even though that client or that server\ncould generate it's own v6 address,\n\n594\n00:25:42,170 --> 00:25:44,920\nit still needs a default gateway and\na DNS server address.\n\n595\n00:25:44,920 --> 00:25:46,013\nAnd that's what we call\nthat stateless mode.\n\n596\n00:25:46,013 --> 00:25:50,378\nIn server 2012, 2012 R2,\nDHCP fully supports it.\n\n597\n00:25:50,378 --> 00:25:54,666\n>> Another thing to remember,\nwhen you're doing your network design,\n\n598\n00:25:54,666 --> 00:25:58,830\nis that DHCP for\nIPv4 is entirely broadcast, right?\n\n599\n00:25:58,830 --> 00:26:01,530\nBut there are no broadcasts in IPv6.\n\n600\n00:26:01,530 --> 00:26:04,658\nSo DHCP for IPv6 is entirely multi-cast.\n\n601\n00:26:04,658 --> 00:26:07,792\nSo your DHCP relay agent, your routers,\n\n602\n00:26:07,792 --> 00:26:12,906\nwhoever's involved in this has to\nbe set up to handle multi-cast.\n\n603\n00:26:12,906 --> 00:26:15,081\nAnd if they're running IPv6\nthen they absolutely are so\n\n604\n00:26:15,081 --> 00:26:17,256\nit's not normally something\nwe have to worry about, but\n\n605\n00:26:17,256 --> 00:26:19,265\nit is one of those things\nthat can turn up on the exam.\n\n606\n00:26:19,265 --> 00:26:23,006\n>> A couple of other things they call\nout on DH should be is doing our DHCP\n\n607\n00:26:23,006 --> 00:26:27,535\nfiltering or we can control, a little bit\nof control about whose allowed to get a IP\n\n608\n00:26:27,535 --> 00:26:29,264\naddress from our DHCP server.\n\n609\n00:26:29,264 --> 00:26:31,760\nAnd one of the things about\nDH it's pretty anonymous.\n\n610\n00:26:31,760 --> 00:26:33,410\nRight?\nTheres not authentication process\n\n611\n00:26:33,410 --> 00:26:34,270\ngoing on.\n\n612\n00:26:34,270 --> 00:26:37,300\nSomebody hollers out,\nhey I need an IP address, that's its job,\n\n613\n00:26:37,300 --> 00:26:40,440\nit's supposed to give an IP address\nto whoever\"s looking for one.\n\n614\n00:26:40,440 --> 00:26:44,050\nDHV filtering, where we can go into\nthe properties of our DHV server.\n\n615\n00:26:44,050 --> 00:26:46,010\nWe've got an allow list,\nwe've got a deny list.\n\n616\n00:26:46,010 --> 00:26:48,020\nAnd it's all based on Mac address.\n\n617\n00:26:48,020 --> 00:26:50,270\nSo we can add addresses there and\nallow it or\n\n618\n00:26:50,270 --> 00:26:52,390\ndeny it depending on which\nway we wanted to go.\n\n619\n00:26:52,390 --> 00:26:53,821\nDeny wold always override the allow.\n\n620\n00:26:53,821 --> 00:26:56,361\nSo if a device happened\nto be on both lists,\n\n621\n00:26:56,361 --> 00:26:58,839\nthe deny would end up winning out on that.\n\n622\n00:26:58,839 --> 00:27:02,250\n>> Yeah, and you do wanna\nremember the limitation of this.\n\n623\n00:27:02,250 --> 00:27:03,880\nRight?\nWhich we talked about in the network\n\n624\n00:27:03,880 --> 00:27:07,840\naccess protection segments of the,\nthat was 4/11 show, I believe.\n\n625\n00:27:07,840 --> 00:27:11,890\nWith network access protection,\nyou can couple that to DHCP.\n\n626\n00:27:11,890 --> 00:27:14,719\nAnd when someone requests a DHCP address,\nyou can check their health to make sure\n\n627\n00:27:14,719 --> 00:27:16,314\nthat they're allowed\nto get on the network.\n\n628\n00:27:16,314 --> 00:27:18,148\nAnd if they are, you let them on.\n\n629\n00:27:18,148 --> 00:27:19,530\nAnd if they're not, you block them, right?\n\n630\n00:27:19,530 --> 00:27:21,770\nBut how do we bypass that?\n\n631\n00:27:21,770 --> 00:27:23,740\nWe just give ourselves a static IP, right?\n\n632\n00:27:23,740 --> 00:27:24,320\n>> Exactly.\n\n633\n00:27:24,320 --> 00:27:25,520\n[LAUGH]\n>> If somebody gives themselves\n\n634\n00:27:25,520 --> 00:27:29,880\na static IP, the DHCP filter doesn't work,\nthe NAP doesn't work.\n\n635\n00:27:29,880 --> 00:27:31,870\nAnything that's attached\nto DHCP stops working.\n\n636\n00:27:31,870 --> 00:27:33,640\nIt's only when they're dynamic.\n\n637\n00:27:33,640 --> 00:27:37,630\nSo, it's not too difficult for\nsomebody to fire up a sniffer and\n\n638\n00:27:37,630 --> 00:27:40,220\nsee what your IP range is and\nthen just pick an IP at random, right?\n\n639\n00:27:40,220 --> 00:27:41,320\n>> That's right.\nExactly.\n\n640\n00:27:41,320 --> 00:27:43,910\n>> And it doesn't take long to\npick an IP that's not in use.\n\n641\n00:27:43,910 --> 00:27:46,350\nSo they do that and then,\nthey're on the network.\n\n642\n00:27:46,350 --> 00:27:51,700\nSo remember, it's not necessarily\nthe most powerful of solutions for\n\n643\n00:27:51,700 --> 00:27:53,740\nfiltering and protecting yourself.\n\n644\n00:27:53,740 --> 00:27:55,642\n>> It's one of the weakest\nthat we can use there.\n\n645\n00:27:55,642 --> 00:27:59,136\nAnd what else do we need to call out,\nwe've got a couple minutes left.\n\n646\n00:27:59,136 --> 00:28:01,680\nYeah we've got the DHCP management pack.\n\n647\n00:28:01,680 --> 00:28:06,210\n>> Oh yeah, for our SCOM, or\nSystem Center Operations Manager.\n\n648\n00:28:06,210 --> 00:28:09,480\nIf I want to manage this through my\nSystem Center Operations Manager,\n\n649\n00:28:09,480 --> 00:28:10,450\nthere is a package.\n\n650\n00:28:10,450 --> 00:28:13,380\nYou have to download it from Microsoft,\nit's freely available.\n\n651\n00:28:13,380 --> 00:28:17,380\nAnd you can incorporate that into your\nSystem Center Operations Manager and then\n\n652\n00:28:17,380 --> 00:28:22,312\nyou can do a lot of really most of your\nmanagement functions from system center.\n\n653\n00:28:22,312 --> 00:28:24,770\n>> Yeah if we take a look\nat the product page.\n\n654\n00:28:24,770 --> 00:28:26,440\nI've got the product page pulled up here.\n\n655\n00:28:26,440 --> 00:28:30,640\nIf you have a centralized DHCP server\njust one of them you don't need this.\n\n656\n00:28:30,640 --> 00:28:34,300\nBut if you have a bunch of DHCP servers\nand you're trying to manage these things,\n\n657\n00:28:34,300 --> 00:28:37,340\nthe Windows Server DHCP Management Pack\nis really cool.\n\n658\n00:28:37,340 --> 00:28:41,740\nIt lets SCOM monitor performance and\nthe status of your server.\n\n659\n00:28:41,740 --> 00:28:44,286\nThis article has a bunch of junk in it,\nbut what I'm looking for is right here.\n\n660\n00:28:44,286 --> 00:28:45,689\n>> [CROSSTALK] There you go.\n>> Feature summary, right.\n\n661\n00:28:45,689 --> 00:28:49,030\nSome of the different things we can do,\nand the main one is this guy right here.\n\n662\n00:28:49,030 --> 00:28:52,690\nMonitor DACP and\nDHCP V6 for serviceability.\n\n663\n00:28:52,690 --> 00:28:57,200\nSo if the DACP server goes offline or,\noops, that is the wrong direction.\n\n664\n00:28:57,200 --> 00:29:00,320\nIf it goes offline or whatever,\nyou'll be able to detect it.\n\n665\n00:29:00,320 --> 00:29:02,670\nBut it also monitors,\nthey have it somewhere in here.\n\n666\n00:29:02,670 --> 00:29:04,400\nHere.\nJust monitoring the scope.\n\n667\n00:29:04,400 --> 00:29:09,330\nSo if you're running low on addresses,\na lot of people this sneaks up on them and\n\n668\n00:29:09,330 --> 00:29:12,070\nthey don't realize, it's just all of\na sudden one day they're out of addresses.\n\n669\n00:29:12,070 --> 00:29:14,300\nBut that didn't happen over night,\nwell I guess it could,\n\n670\n00:29:14,300 --> 00:29:15,232\nit could be an attack, right?\n\n671\n00:29:15,232 --> 00:29:16,809\n>> [LAUGH]\n>> There are some DHCP database attacks\n\n672\n00:29:16,809 --> 00:29:17,780\nthat are out there.\n\n673\n00:29:17,780 --> 00:29:21,000\nBut often times it slowly builds over\ntime and you're getting closer and\n\n674\n00:29:21,000 --> 00:29:23,770\ncloser to being out of addresses and\nthat's kinda how we work.\n\n675\n00:29:23,770 --> 00:29:27,030\nIs that our usage was just slowly\ngrowing as we bought more toys.\n\n676\n00:29:27,030 --> 00:29:27,740\n>> Yeah.\n[LAUGH]\n\n677\n00:29:27,740 --> 00:29:29,400\n>> So, that's kinda what happens and\n\n678\n00:29:29,400 --> 00:29:32,112\nSCOM can monitor that and\nyou could see your trend graph and\n\n679\n00:29:32,112 --> 00:29:34,507\nget an idea of when you need\nto expand out your pool.\n\n680\n00:29:34,507 --> 00:29:37,418\nBut there's a lot of other things here,\nwhen it comes to monitoring and detecting.\n\n681\n00:29:37,418 --> 00:29:42,013\nThere's Network Access Protection\nrelated events, name protection,\n\n682\n00:29:42,013 --> 00:29:43,960\nall sorts of other stuff.\n\n683\n00:29:43,960 --> 00:29:48,235\nThe latency and delay features are pretty\ncool, to be able to check that that out.\n\n684\n00:29:48,235 --> 00:29:52,435\nJust really neat stuff here, especially\nif you have more than one DHCP server.\n\n685\n00:29:52,435 --> 00:29:54,883\nThis makes managing it a lot easier.\n\n686\n00:29:54,883 --> 00:29:58,575\nKeep in mind it's not built in to SCOM,\nit's just an add on pack.\n\n687\n00:29:58,575 --> 00:30:00,235\nYou download it, doesn't cost anything.\n\n688\n00:30:00,235 --> 00:30:01,600\nWell, SCOM costs plenty.\n\n689\n00:30:01,600 --> 00:30:02,649\n>> [LAUGH]\n>> But this doesn't,\n\n690\n00:30:02,649 --> 00:30:04,687\nit's just an add-on that\ngives you that management.\n\n691\n00:30:04,687 --> 00:30:08,843\nSCOM out of the box can't\nreally monitor much about DHCP.\n\n692\n00:30:08,843 --> 00:30:13,332\n>> Another thing, the last thing they call\nout on our objectives is maintaining that\n\n693\n00:30:13,332 --> 00:30:17,383\nDHCP database which I know we've gone\nover in at least two of our classes.\n\n694\n00:30:17,383 --> 00:30:20,220\n4-10 probably, and 4-12.\n\n695\n00:30:20,220 --> 00:30:22,970\nI don't really know what else to\nadd to it that's different here.\n\n696\n00:30:22,970 --> 00:30:25,850\nYou know, we're gonna,\nDHCP pretty much does it for us.\n\n697\n00:30:25,850 --> 00:30:27,427\nRight, it backs itself\nup every 60 minutes.\n\n698\n00:30:27,427 --> 00:30:29,824\nThe downside being that\nit is to the local drive.\n\n699\n00:30:29,824 --> 00:30:33,366\nSo if we wanna maintain that\nbackup though hardware failure or\n\n700\n00:30:33,366 --> 00:30:37,588\nsomething like that we're going to have\nto either have some sort script or\n\n701\n00:30:37,588 --> 00:30:42,220\nsome process of getting either manually\nbacking it up to an alternate location or\n\n702\n00:30:42,220 --> 00:30:46,070\njust copying that database\nbackup out to another location.\n\n703\n00:30:46,070 --> 00:30:49,780\n>> And, that's the real big deal there\nis when it comes to designing your\n\n704\n00:30:49,780 --> 00:30:52,870\ninfrastructure part of the design\nis how often to back it up.\n\n705\n00:30:52,870 --> 00:30:53,580\nRight?\n\n706\n00:30:53,580 --> 00:30:57,000\nDo you really need to back up\nyour DHCP database regularly?\n\n707\n00:30:57,000 --> 00:30:57,800\nProbably not.\n\n708\n00:30:57,800 --> 00:30:59,537\nMost people worry about\nthe options that are set.\n\n709\n00:30:59,537 --> 00:31:01,382\nLike redefining your scopes and stuff.\n\n710\n00:31:01,382 --> 00:31:02,900\nThat would be a pain.\n\n711\n00:31:02,900 --> 00:31:06,240\nBut the leases I'm not necessarily\nall that worried about.\n\n712\n00:31:06,240 --> 00:31:07,000\nBut maybe I am.\n\n713\n00:31:07,000 --> 00:31:08,380\nMaybe I don't have a cluster and\n\n714\n00:31:08,380 --> 00:31:11,300\nI wanna get as good of a back-up or\nrestore as possible.\n\n715\n00:31:11,300 --> 00:31:14,010\nSo maintaining a healthy database,\nthat's one of the ways that we do it.\n\n716\n00:31:14,010 --> 00:31:16,420\nWe back it up so\nthat we can restore it pretty easily.\n\n717\n00:31:16,420 --> 00:31:18,422\nAnd just like you said Mike,\nit's stored on the local drive.\n\n718\n00:31:18,422 --> 00:31:20,580\nThat is not the greatest place to put it.\n\n719\n00:31:20,580 --> 00:31:22,190\nSo that's a part of it.\n\n720\n00:31:22,190 --> 00:31:24,120\nAlso the database over time,\n\n721\n00:31:25,380 --> 00:31:29,390\nthe system knows that writing to the hard\ndrive is slower than writing to RAM.\n\n722\n00:31:29,390 --> 00:31:31,730\nAnd so when it's issuing\nout a bunch of leases and\n\n723\n00:31:31,730 --> 00:31:36,140\nhandling a bunch of renewals it can get\nback logged with writing to the database.\n\n724\n00:31:36,140 --> 00:31:40,320\nSo DHCP runs almost entirely from RAM.\n\n725\n00:31:40,320 --> 00:31:43,110\nIt loads the DHCP database into RAM,\nthat's what it runs from.\n\n726\n00:31:43,110 --> 00:31:47,260\nAnd if the file on the hard\ndrive gets far enough behind\n\n727\n00:31:47,260 --> 00:31:49,250\nit'll actually stop updating it, right?\n\n728\n00:31:49,250 --> 00:31:52,960\nAnd when it has time, it'll clean\nthings up and get caught up, but\n\n729\n00:31:52,960 --> 00:31:55,980\nthat means there can actually be a pretty\nbig difference between what's in RAM and\n\n730\n00:31:55,980 --> 00:31:57,320\nwhat's on the hard drive.\n\n731\n00:31:57,320 --> 00:32:01,400\nAnd if you find yourself starting to get\na bunch of duplicate IPs or something like\n\n732\n00:32:01,400 --> 00:32:05,830\nthat, then what you need to do is what's\ncalled reconciling the DHCP database.\n\n733\n00:32:05,830 --> 00:32:07,580\nAnd I'm pretty sure we showed\nthat in the other show, too.\n\n734\n00:32:07,580 --> 00:32:10,360\nCuz you could just right-click on\nthe DHCP server and choose to reconcile.\n\n735\n00:32:10,360 --> 00:32:15,028\nAnd that's where it compares what's on\nthe hard drive to what's in RAM and\n\n736\n00:32:15,028 --> 00:32:16,669\ngets them back to parity.\n\n737\n00:32:16,669 --> 00:32:18,985\nRight?\nAnd that is a challenge.\n\n738\n00:32:18,985 --> 00:32:23,588\nIf you see that happening a lot then\nit means your disks are too slow, and\n\n739\n00:32:23,588 --> 00:32:27,620\nyou need, or\nyou're just getting overwhelmed, right.\n\n740\n00:32:27,620 --> 00:32:31,640\nYou either need to add more DACP\nservers to compensate for the load.\n\n741\n00:32:31,640 --> 00:32:33,560\nOr you need to add faster storage.\n\n742\n00:32:33,560 --> 00:32:36,340\nI see this most commonly not when it's\nthat the drives aren't fast enough but\n\n743\n00:32:36,340 --> 00:32:37,910\nthat the server's just doing too much.\n\n744\n00:32:37,910 --> 00:32:39,100\nRight.\n>> Too many things going on.\n\n745\n00:32:39,100 --> 00:32:42,481\n>> You get a domain controller that's\nrunning DNS, that's running DACP and\n\n746\n00:32:42,481 --> 00:32:43,200\nradius.\n\n747\n00:32:43,200 --> 00:32:45,585\nYou know, you get it doing all\nthese different things and\n\n748\n00:32:45,585 --> 00:32:47,430\nDACP starts to get a bit overwhelmed.\n\n749\n00:32:47,430 --> 00:32:47,930\nRight.\n\n750\n00:32:47,930 --> 00:32:52,400\nAnd so in those scenarios you may choose\nto move DACP off the dedicated servers,\n\n751\n00:32:52,400 --> 00:32:54,320\nmove it over to network infrastructure,\n\n752\n00:32:54,320 --> 00:32:58,120\nsomething to reduce the load on\nthat server and compensate for it.\n\n753\n00:32:58,120 --> 00:33:00,730\nYeah.\nSo that's all part of maintaining that\n\n754\n00:33:00,730 --> 00:33:01,660\ndatabase.\n\n755\n00:33:01,660 --> 00:33:03,590\nAnd you want to help\nthe DACP database anyway,\n\n756\n00:33:03,590 --> 00:33:07,160\nbecause when it comes to migrating,\ndo we talk about migrating in this one?\n\n757\n00:33:07,160 --> 00:33:09,980\n>> I don't think in this\none they call that out.\n\n758\n00:33:09,980 --> 00:33:11,350\n>> No, it's not there, is it?\n\n759\n00:33:11,350 --> 00:33:12,620\nNope.\n>> Nope, alright.\n\n760\n00:33:12,620 --> 00:33:15,780\nWe talked a little bit about\nmigrating under IPM, but with DACP,\n\n761\n00:33:15,780 --> 00:33:20,760\nif we wanna migrate from Windows Server\n2008 to Windows Server 2012 for example,\n\n762\n00:33:20,760 --> 00:33:24,790\nyou can stop the DACP service and just\ncopy that database right over to the new\n\n763\n00:33:24,790 --> 00:33:27,990\nserver and start it and it brings all the\nsettings over if the database is healthy.\n\n764\n00:33:27,990 --> 00:33:29,010\nBut before you do that,\n\n765\n00:33:29,010 --> 00:33:33,140\nyou need to make sure it's reconciled, the\ndata's in there, and you move it along.\n\n766\n00:33:33,140 --> 00:33:36,170\nYou can actually defragment and\ncompress the database too, but I.\n\n767\n00:33:36,170 --> 00:33:37,710\n>> Is that, what was the name?\n\n768\n00:33:37,710 --> 00:33:38,260\nJetpack?\n\n769\n00:33:38,260 --> 00:33:38,950\n>> It's Jetpack.\n\n770\n00:33:38,950 --> 00:33:42,060\nYup.\nAnd I've worked in some big,\n\n771\n00:33:42,060 --> 00:33:44,600\nbig networks and\nI've never once had to do that.\n\n772\n00:33:44,600 --> 00:33:48,520\nSo I don't know exactly how big your\nnetwork has to be to need that kind\n\n773\n00:33:48,520 --> 00:33:50,320\nof activity, but it is there.\n\n774\n00:33:50,320 --> 00:33:52,950\nSo, that's going to be part of your\nmaintenance schedule, you know,\n\n775\n00:33:52,950 --> 00:33:54,930\nwhen you plan your backups and so on.\n\n776\n00:33:54,930 --> 00:33:57,680\nYou gotta plan your backups to DACP and\nmaintain your server health.\n\n777\n00:33:59,300 --> 00:34:02,340\nAll right, well Mike,\nI know we shot past our break time, so\n\n778\n00:34:02,340 --> 00:34:04,820\nwhy don't we stop for a minute.\n\n779\n00:34:04,820 --> 00:34:06,660\nAll right, well ladies and gentlemen,\nwe're gonna stop and take a break.\n\n780\n00:34:06,660 --> 00:34:09,280\nWhen we get back,\nI think we're jumping into DNS now, right?\n\n781\n00:34:09,280 --> 00:34:12,920\n>> We are.\n>> Yep, so DNS after this, stay tuned.\n\n782\n00:34:12,920 --> 00:34:16,264\n[MUSIC]\n\n783\n00:34:16,264 --> 00:34:21,905\n[SOUND] All right, welcome back everybody.\n\n784\n00:34:21,905 --> 00:34:26,145\nSo, after a, you know,\namazingly complex segment of DACP.\n\n785\n00:34:26,145 --> 00:34:27,196\n>> Right?\n[LAUGH]\n\n786\n00:34:27,196 --> 00:34:27,895\n>> [LAUGH]\n\n787\n00:34:27,895 --> 00:34:31,347\nLet's jump into the world of\nDNS the domain naming system.\n\n788\n00:34:31,347 --> 00:34:35,705\nNow, whereas DACP is kind of behind the\nscenes technology that we don't normally\n\n789\n00:34:35,705 --> 00:34:36,545\nhave to mess with,\n\n790\n00:34:36,545 --> 00:34:39,145\nDNS is a very much in your face technology\n>> Yes.\n\n791\n00:34:39,145 --> 00:34:41,880\n>> That we are having to deal\nwith on a regular basis.\n\n792\n00:34:41,880 --> 00:34:45,850\nNobody wants to memorize IDs, and DNS is\nwhat stops us from having to do that.\n\n793\n00:34:45,850 --> 00:34:46,850\n>> [LAUGH] Exactly.\n\n794\n00:34:46,850 --> 00:34:48,400\nI love DNS.\nI mean it's great.\n\n795\n00:34:48,400 --> 00:34:49,060\nIt's fast.\n\n796\n00:34:49,060 --> 00:34:49,840\nIt's scalable.\n\n797\n00:34:49,840 --> 00:34:51,150\nIt's just fantastic.\n\n798\n00:34:51,150 --> 00:34:54,530\n>> Now on the DNS design side,\nthere's a lot of stuff to think about.\n\n799\n00:34:54,530 --> 00:34:56,090\nIt's actually very similar to DACP.\n\n800\n00:34:56,090 --> 00:34:59,720\nIn fact, if I bring up my DACP diagram,\nit kind of mirrors what we saw here.\n\n801\n00:34:59,720 --> 00:35:01,190\n>> You could relabel those guys DNS.\n\n802\n00:35:01,190 --> 00:35:02,820\n>> I mean you really could, right?\n\n803\n00:35:02,820 --> 00:35:05,930\nIf you've got a DACP server\nat your headquarters,\n\n804\n00:35:05,930 --> 00:35:08,530\nyou can deploy more of\nthe branches to disperse out.\n\n805\n00:35:08,530 --> 00:35:09,930\nSame thing goes for DNS.\n\n806\n00:35:09,930 --> 00:35:12,490\nYou might have a centralized\nDNS server and\n\n807\n00:35:12,490 --> 00:35:15,470\nyou might have dedicated\nDNS servers at each branch.\n\n808\n00:35:15,470 --> 00:35:19,560\n>> Big difference here being that DNS\nis not a broadcast based technology,\n\n809\n00:35:19,560 --> 00:35:22,630\nit's all unicast, so we don't have\nto worry about those relay agents.\n\n810\n00:35:22,630 --> 00:35:28,760\nWe really don't have to have a DNS\nserver on every single subnet.\n\n811\n00:35:28,760 --> 00:35:32,010\nThat's where in our design,\nwhy do I want to put DNS servers?\n\n812\n00:35:32,010 --> 00:35:34,730\nDo I really want to put them at each and\nevery subnet?\n\n813\n00:35:34,730 --> 00:35:38,460\nAnd instead of being, like with DACP,\ninstead of worrying about whether or\n\n814\n00:35:38,460 --> 00:35:40,860\nnot they're going to be able to talk\nto the DHB server via broadcast and\n\n815\n00:35:40,860 --> 00:35:41,730\nthings like that.\n\n816\n00:35:41,730 --> 00:35:44,220\nNow we're looking more at things like,\nhow many nodes are out there?\n\n817\n00:35:44,220 --> 00:35:47,010\nHow many DNS clients do\nI have at that location?\n\n818\n00:35:47,010 --> 00:35:49,650\nHow much workload is gonna\nbe sent back across that WAN\n\n819\n00:35:49,650 --> 00:35:53,060\nif the subnets are separated by WANs,\nthat's gonna determine,\n\n820\n00:35:53,060 --> 00:35:57,400\ndo I really need to put a DNS server\nat each one of those locations.\n\n821\n00:35:57,400 --> 00:36:01,440\n>> Yeah, and, you know, DNS kind of has\nlike pseudo-redundancy built into it.\n\n822\n00:36:01,440 --> 00:36:05,380\nFor example, you can put in two\nDNS servers in your configuration.\n\n823\n00:36:05,380 --> 00:36:09,340\nSo, your primary one might be the one at\nyour home office and your second one might\n\n824\n00:36:09,340 --> 00:36:14,130\nbe a public DNS server or a DNS server\nright there in your branch office.\n\n825\n00:36:14,130 --> 00:36:17,900\nThat way if you can't get to your primary,\nyou know, you just fail that one and\n\n826\n00:36:17,900 --> 00:36:19,280\njump over to the next one and so on.\n\n827\n00:36:19,280 --> 00:36:19,910\n>> Right.\n\n828\n00:36:19,910 --> 00:36:21,990\n>> You can deploy DNS\nas a secondary server.\n\n829\n00:36:21,990 --> 00:36:23,830\nSo if you have a file\nserver out at your branch,\n\n830\n00:36:23,830 --> 00:36:25,990\nyou can kind of repurpose\nthat as a DNS server.\n\n831\n00:36:26,990 --> 00:36:30,080\nOne thing worth mentioning though is\nthat you actually can set up just\n\n832\n00:36:30,080 --> 00:36:33,310\na dedicated DNS caching server.\n\n833\n00:36:33,310 --> 00:36:35,560\n>> Right, it's actually easier\nthan setting up a DNS server, or\n\n834\n00:36:35,560 --> 00:36:36,640\na full blown DNS server.\n\n835\n00:36:36,640 --> 00:36:37,510\n>> Yeah.\nI mean, really,\n\n836\n00:36:37,510 --> 00:36:39,310\nall it is is a DNS server with no zones.\n\n837\n00:36:39,310 --> 00:36:40,085\n>> Yeah, exactly.\n\n838\n00:36:40,085 --> 00:36:42,230\n[LAUGH]\n>> If you create a DNS server with no\n\n839\n00:36:42,230 --> 00:36:44,910\nzones,\n>> Then all it is is a caching server.\n\n840\n00:36:44,910 --> 00:36:47,220\nPeople will do look ups against it.\n\n841\n00:36:47,220 --> 00:36:49,220\nAnd it will then forward to somebody else.\n\n842\n00:36:49,220 --> 00:36:50,190\nMaybe the home office.\n\n843\n00:36:50,190 --> 00:36:51,300\nMaybe somewhere else.\n\n844\n00:36:51,300 --> 00:36:53,590\nRight, the internet who knows.\n\n845\n00:36:53,590 --> 00:36:56,430\nAnd it will just cache the records and\nkeep them on hand.\n\n846\n00:36:56,430 --> 00:36:58,570\nSo if you have 5,000 people over here and\n\n847\n00:36:58,570 --> 00:37:00,920\nyou want them to be able to do\nlookups against the DNS server but\n\n848\n00:37:00,920 --> 00:37:04,920\nyou don't want to maintain multiple copies\nof the zones, you can leverage that.\n\n849\n00:37:04,920 --> 00:37:07,510\nAnd that will help them\nimprove performance\n\n850\n00:37:07,510 --> 00:37:11,320\nwithout having to worry about\nreplicating zones between locations.\n\n851\n00:37:11,320 --> 00:37:12,180\nRight.\n\n852\n00:37:12,180 --> 00:37:16,840\nSo when we go to design DNS, there's that\nchoice of how many servers do we need.\n\n853\n00:37:16,840 --> 00:37:19,240\nYou know, do we need them\nin each location and so on.\n\n854\n00:37:19,240 --> 00:37:21,310\nAnd it's really gonna depend on traffic.\n\n855\n00:37:21,310 --> 00:37:25,010\nAnd it's not, this is the tough one,\nwell people always ask me okay well,\n\n856\n00:37:25,010 --> 00:37:28,100\nhow many clients out here before\nI need to add another DNS server?\n\n857\n00:37:28,100 --> 00:37:30,420\nWell, it's not really how many clients,\n\n858\n00:37:30,420 --> 00:37:33,460\nit's how many lookups per second\nyou're performing, right.\n\n859\n00:37:33,460 --> 00:37:35,260\nBecause you might have\n5,000 clients down here but\n\n860\n00:37:35,260 --> 00:37:37,910\nif they're only performing\nlookups every couple of minutes,\n\n861\n00:37:37,910 --> 00:37:41,180\nyou could have a really crappy\nDNS server do a great job, right.\n\n862\n00:37:41,180 --> 00:37:42,910\nIt's not a hard job.\n\n863\n00:37:42,910 --> 00:37:46,020\nBut if you've got 5,000 people out here\nthat are constantly browsing the Internet\n\n864\n00:37:46,020 --> 00:37:48,280\nand doing other things,\nthose are a ton of lookups.\n\n865\n00:37:48,280 --> 00:37:51,680\nAnd remember that with DNS,\nDNS lookups are almost always recursive.\n\n866\n00:37:51,680 --> 00:37:55,360\nSo when you go to do a lookup against\nthe server, it probably doesn't have\n\n867\n00:37:55,360 --> 00:38:00,320\nthe answer for what you want, it has to\nturn around and do the lookup for you.\n\n868\n00:38:00,320 --> 00:38:04,330\nSo it's doing a lot of work and\nthat does get cumbersome on it.\n\n869\n00:38:04,330 --> 00:38:08,090\nSo you need to monitor your CPU, monitor\nyour network bandwidth on that system.\n\n870\n00:38:08,090 --> 00:38:09,830\nIt's not normally gonna be disk I/O,\nright?\n\n871\n00:38:09,830 --> 00:38:12,330\n>> Right.\n>> Cuz the DNS stuff is cached into RAM.\n\n872\n00:38:12,330 --> 00:38:15,610\nBut CPU and\nmemory are gonna be your bottlenecks there\n\n873\n00:38:15,610 --> 00:38:18,890\nas people do their lookups, and\nit goes out to find out the results.\n\n874\n00:38:18,890 --> 00:38:20,490\nThe bigger your cache, the better,\n\n875\n00:38:20,490 --> 00:38:23,080\ncuz that'll start to minimize the amount\nof recursive queries we have to do.\n\n876\n00:38:24,150 --> 00:38:25,150\n>> Exactly.\n\n877\n00:38:25,150 --> 00:38:27,710\n>> So\nit's not a one size fits all solution,\n\n878\n00:38:27,710 --> 00:38:30,570\nyou do need to make sure that you've\ngot adequate name servers in place,\n\n879\n00:38:30,570 --> 00:38:33,070\nbecause things like active\ndirectory depend on it.\n\n880\n00:38:33,070 --> 00:38:33,640\nYour DNS goes down,\n\n881\n00:38:33,640 --> 00:38:36,160\nyou're probably not going to be able\nto log in to the active directory.\n\n882\n00:38:36,160 --> 00:38:38,590\n>> Can't find the domain controller,\ncan't find the global catalog server,\n\n883\n00:38:38,590 --> 00:38:39,660\nyou're not getting too far.\n\n884\n00:38:39,660 --> 00:38:41,810\n>> Yeah, it definitely\nshortens the lifespan of that.\n\n885\n00:38:42,970 --> 00:38:45,800\nNow, when we go to deploy DNS,\n\n886\n00:38:45,800 --> 00:38:49,380\nwe're almost always going to have at\nleast one DNS server in our headquarters.\n\n887\n00:38:49,380 --> 00:38:51,380\nRight?\nAnd hopefully two for redundancy purposes.\n\n888\n00:38:51,380 --> 00:38:52,500\nThat's what you want.\n\n889\n00:38:52,500 --> 00:38:54,940\nAnd that's where our active\ndirectory DNS records get stored.\n\n890\n00:38:54,940 --> 00:38:56,910\nAnd all the other information.\n\n891\n00:38:56,910 --> 00:39:00,180\nOne of the things that they don't\nreally call out very much is that\n\n892\n00:39:00,180 --> 00:39:03,640\nyour DNS servers, they don't have\nto be Windows DNS servers, right.\n\n893\n00:39:03,640 --> 00:39:08,600\nWe have full Windows DNS operable\nwith non-Microsoft DNS servers.\n\n894\n00:39:08,600 --> 00:39:12,590\nSo you might have Unix or\nLinux bind servers, right bind is\n\n895\n00:39:12,590 --> 00:39:17,138\nthe open source DNS standard that really\nmost internet DNS servers are on, and\n\n896\n00:39:17,138 --> 00:39:21,040\nit does, it supports dynamic\nregistration and things like that now.\n\n897\n00:39:21,040 --> 00:39:22,835\nNow they introduced that in 2009?\n\n898\n00:39:22,835 --> 00:39:24,880\n8.8.\n>> Yeah, it was like BIND 8.0.\n\n899\n00:39:24,880 --> 00:39:26,940\nIt was a long time ago, so\n\n900\n00:39:26,940 --> 00:39:30,707\nyou're definitely gonna have that support\nor you're not doing your job in updating.\n\n901\n00:39:30,707 --> 00:39:33,250\n[LAUGH]\n>> [LAUGH] I think they now support all\n\n902\n00:39:33,250 --> 00:39:36,770\nthe incremental changes,\nthe incremental updates, and\n\n903\n00:39:36,770 --> 00:39:40,330\neven the fast updates I think are all\nsupported with the BIND as well.\n\n904\n00:39:40,330 --> 00:39:42,150\n>> And SRV records and all that stuff,\n\n905\n00:39:42,150 --> 00:39:44,620\nthey don't have to be\nMicrosoft DNS servers.\n\n906\n00:39:44,620 --> 00:39:45,720\nIt's kinda nice if they are.\n\n907\n00:39:45,720 --> 00:39:47,370\nRight?\nBecause you can stick them on\n\n908\n00:39:47,370 --> 00:39:50,150\nthe domain controller and they'll\nreplicate with the active directory.\n\n909\n00:39:50,150 --> 00:39:53,190\nYou can have a multi-master model.\n\n910\n00:39:53,190 --> 00:39:57,080\nIf you go with non-Microsoft servers,\nyou can't have a multi-master model.\n\n911\n00:39:57,080 --> 00:40:00,190\nYou can have a master, a primary, right?\n\n912\n00:40:00,190 --> 00:40:02,380\nAnd, then you have secondaries, right?\n\n913\n00:40:02,380 --> 00:40:03,908\nAll your other servers are secondaries.\n\n914\n00:40:03,908 --> 00:40:06,814\n>> They maintain read-only\ncopies of the zone,\n\n915\n00:40:06,814 --> 00:40:10,847\nwhich is effectively the same\nthing as caching the entire zone.\n\n916\n00:40:10,847 --> 00:40:13,381\nThat's really all they're doing,\nbut you can't make changes.\n\n917\n00:40:13,381 --> 00:40:17,228\nSo anytime you want to make updates to\nthe zone you have to go to the primary.\n\n918\n00:40:17,228 --> 00:40:20,060\nNow for For public DNS zones,\nthat's fine, right?\n\n919\n00:40:20,060 --> 00:40:23,010\nHow often do we change\nour public DNS zones?\n\n920\n00:40:23,010 --> 00:40:26,900\nBut internally, if we've got dynamic\nregistration of our clients,\n\n921\n00:40:26,900 --> 00:40:30,880\nwe're using DHCP or whatever Updates\nto your zone are happening constantly.\n\n922\n00:40:30,880 --> 00:40:35,110\nAnd that's why it's so nice to do\nan active directory integrated zone.\n\n923\n00:40:35,110 --> 00:40:37,880\nTo have that title along with your active\ndirectory and push along that way.\n\n924\n00:40:37,880 --> 00:40:39,390\nNot to mention the security features.\n\n925\n00:40:39,390 --> 00:40:39,930\n>> Oh yeah, yeah.\n\n926\n00:40:39,930 --> 00:40:41,440\nWe talked about those in our other class.\n\n927\n00:40:41,440 --> 00:40:44,620\nSeveral advantages of doing that\nactive directory integrated zones.\n\n928\n00:40:44,620 --> 00:40:47,390\n>> So that's actually the first thing\nthey point out in this objective,\n\n929\n00:40:47,390 --> 00:40:51,820\nis they say, planning for\nactive directory integrated zones.\n\n930\n00:40:51,820 --> 00:40:54,190\n>> Yeah, and for\nyour internal name resolution, I mean,\n\n931\n00:40:54,190 --> 00:40:56,320\nthat is obviously it\nis the best way to go.\n\n932\n00:40:57,810 --> 00:40:59,210\nNot at my DMZ, right?\n\n933\n00:40:59,210 --> 00:41:02,080\nWe're not gonna put a copy of\nactive directory out in the DMZ and\n\n934\n00:41:02,080 --> 00:41:03,605\nhost DNS out there, most likely.\n\n935\n00:41:03,605 --> 00:41:04,770\n>> Mm-hm.\n\n936\n00:41:04,770 --> 00:41:06,960\nNow, when you do an active\ndirectory integrated grade zone,\n\n937\n00:41:06,960 --> 00:41:09,440\nI mentioned one benefit,\nwhich is replication.\n\n938\n00:41:09,440 --> 00:41:10,980\nRight?\nSo we don't have to sweat\n\n939\n00:41:10,980 --> 00:41:12,104\nreplication with DNS.\n\n940\n00:41:12,104 --> 00:41:13,840\n>> Right.\n>> We have multiple masters updates\n\n941\n00:41:13,840 --> 00:41:14,650\ncan happen anywhere.\n\n942\n00:41:14,650 --> 00:41:16,570\nAnd you can deploy as many of\nthese servers as you want.\n\n943\n00:41:16,570 --> 00:41:17,660\nIt's pretty awesome.\n\n944\n00:41:17,660 --> 00:41:19,180\nConfiguration is stored in the AD so\n\n945\n00:41:19,180 --> 00:41:21,315\nwhen you backup the AD you\nare backing up DNS too.\n\n946\n00:41:21,315 --> 00:41:22,836\nThat's cool too, right?\n\n947\n00:41:22,836 --> 00:41:23,440\n>> Mm-hm.\n\n948\n00:41:23,440 --> 00:41:27,113\n>> But the biggest advantage in\nmy opinion, cuz people ask me,\n\n949\n00:41:27,113 --> 00:41:28,980\n[LAUGH] Microsoft calls\nonce on a while and\n\n950\n00:41:28,980 --> 00:41:31,330\nsays you know what can we\ndo to make DNS better.\n\n951\n00:41:31,330 --> 00:41:35,690\nSo the biggest upgrade in my\nopinion is the security side.\n\n952\n00:41:35,690 --> 00:41:37,990\n>> Right.\n>> There are a lot of security features\n\n953\n00:41:37,990 --> 00:41:40,975\ninside of the Windows DNS\nserver just in general.\n\n954\n00:41:40,975 --> 00:41:42,280\n>> Mm-hm.\n>> But when your active directory\n\n955\n00:41:42,280 --> 00:41:47,210\nintegrated, you can say only authenticated\nusers can do dynamic upgrades.\n\n956\n00:41:47,210 --> 00:41:47,735\n>> Right.\n>> Right?\n\n957\n00:41:47,735 --> 00:41:49,154\nYou got a little drop down box so\n\n958\n00:41:49,154 --> 00:41:51,720\nthat you can pick from secure\nonly [CROSSTALK] or secure or\n\n959\n00:41:51,720 --> 00:41:54,451\nunsecure you can do that,\nanybody can update a DNS record,\n\n960\n00:41:54,451 --> 00:41:56,440\neven without logging in.\n>> Right.\n\n961\n00:41:56,440 --> 00:41:58,052\n>> Not necessarily the best\nsituation to be in, right?\n\n962\n00:41:58,052 --> 00:41:58,640\n>> Mm-hm.\n>> Right.\n\n963\n00:41:58,640 --> 00:42:01,760\n>> Another big security advantage\nthe active directory is the fact that it's\n\n964\n00:42:01,760 --> 00:42:02,780\nencrypted, right?\n\n965\n00:42:02,780 --> 00:42:03,970\nWith your standard primary and\n\n966\n00:42:03,970 --> 00:42:07,040\nsecondaries, it's not gonna encrypt\nthat replication traffic, and\n\n967\n00:42:07,040 --> 00:42:10,480\nif I can get a copy of your zone file\nthat's pretty much a map to your network.\n\n968\n00:42:10,480 --> 00:42:14,230\nActive directory replication is encrypted,\nwhich means if I dump my DNS info in\n\n969\n00:42:14,230 --> 00:42:16,960\nthere, it's gonna replicate along with\nthe active directory database and\n\n970\n00:42:16,960 --> 00:42:18,048\nnow it's gonna be encrypted.\n\n971\n00:42:18,048 --> 00:42:20,190\nWithout having to bring in IPsec or\n\n972\n00:42:20,190 --> 00:42:22,440\nsomething else to try\nto protect that data.\n\n973\n00:42:22,440 --> 00:42:23,210\n>> Yep.\n\n974\n00:42:23,210 --> 00:42:24,800\nSo pros and cons.\n\n975\n00:42:24,800 --> 00:42:25,620\nWell, I say cons.\n\n976\n00:42:25,620 --> 00:42:27,270\nThere's not really a whole\nlot of cons here, right?\n\n977\n00:42:27,270 --> 00:42:28,310\n>> Not too many really.\n\n978\n00:42:28,310 --> 00:42:29,190\n>> Because-\n>> Except for\n\n979\n00:42:29,190 --> 00:42:30,330\nthe fact that where we place it.\n\n980\n00:42:30,330 --> 00:42:33,280\nWe might not wanna put a copy\nof active directory in a DMZ or\n\n981\n00:42:33,280 --> 00:42:34,740\nsome internet-facing server.\n\n982\n00:42:34,740 --> 00:42:37,579\n>> Yeah, and the other thing\nto remember is that we do have\n\n983\n00:42:37,579 --> 00:42:41,227\ninter-operability between\nthe Microsoft DNS and other vendors, so\n\n984\n00:42:41,227 --> 00:42:44,813\nyou might have an Active Directory\nintegrated DNS infrastructure,\n\n985\n00:42:44,813 --> 00:42:47,567\nwhere you've got ten masters\nall integrated in AD.\n\n986\n00:42:47,567 --> 00:42:49,605\n>> Mm-hm\n>> You could still bring up some Unix or\n\n987\n00:42:49,605 --> 00:42:50,680\nLinux BIND servers.\n\n988\n00:42:50,680 --> 00:42:51,884\n>> Yeah.\n>> And they'll be secondaries,\n\n989\n00:42:51,884 --> 00:42:53,065\nthey won't be [CROSSTALK] primaries.\n\n990\n00:42:53,065 --> 00:42:56,355\nBut they'll be able to do zone\ntransfers with your other DNS servers,\n\n991\n00:42:56,355 --> 00:42:58,600\nyou've got full compatibility there.\n\n992\n00:42:58,600 --> 00:43:01,935\nSo on the exam,\nif you get a scenario where they say\n\n993\n00:43:01,935 --> 00:43:05,711\nthe existing DNS servers\nare all running Bind 9.0.\n\n994\n00:43:05,711 --> 00:43:06,502\n>> Mm-hm.\n>> Well, great.\n\n995\n00:43:06,502 --> 00:43:07,980\nYou don't have to change those.\n\n996\n00:43:07,980 --> 00:43:08,920\nYou can stick with that.\n\n997\n00:43:08,920 --> 00:43:09,512\nYou can keep them.\n\n998\n00:43:09,512 --> 00:43:11,450\n>> Mm-hm.\n>> But you'll lose some of those pieces.\n\n999\n00:43:11,450 --> 00:43:16,030\nSo if they say you've got these servers,\nthey're running Bind 9.0, and you wanna\n\n1000\n00:43:16,030 --> 00:43:19,937\nimplement a DNS infrastructure that\nrequires authentication update records.\n\n1001\n00:43:19,937 --> 00:43:20,740\n>> Yeah.\n>> All right?\n\n1002\n00:43:20,740 --> 00:43:23,770\nIn your mind, you should say oop,\ngotta replace those DNS servers.\n\n1003\n00:43:23,770 --> 00:43:25,095\n>> Gotta reactive directory integrate.\n\n1004\n00:43:25,095 --> 00:43:26,400\n>> Mm-hm.\n\n1005\n00:43:26,400 --> 00:43:29,655\nBut if they're saying you've\ngot Windows and Linux systems,\n\n1006\n00:43:29,655 --> 00:43:33,220\nand you wanna have Windows DNS servers for\nhosting the active directory, but\n\n1007\n00:43:33,220 --> 00:43:37,570\nyou want your Linux clients to be able to\ndo lookups against a Linux DNS server,\n\n1008\n00:43:37,570 --> 00:43:41,790\ndoes that mean you need to\nswitch them over somehow?\n\n1009\n00:43:41,790 --> 00:43:45,370\nNo, you can have the Linux and DNS server\nrunning side by side with the Windows one,\n\n1010\n00:43:45,370 --> 00:43:46,320\nit works just fine.\n\n1011\n00:43:46,320 --> 00:43:47,920\n>> Absolutely, absolutely.\n\n1012\n00:43:47,920 --> 00:43:51,515\n>> So keep that in mind as you look at the\ndifferent scenarios that are out there.\n\n1013\n00:43:51,515 --> 00:43:54,080\nInter-operability with OS is something\nthat you're going to have to deal\n\n1014\n00:43:54,080 --> 00:43:55,400\nwith in real life pretty frequently.\n\n1015\n00:43:55,400 --> 00:43:57,945\nIt's not an all Microsoft\nworld like it used to be.\n\n1016\n00:43:57,945 --> 00:43:59,740\n>> [LAUGH]\n>> Those days are done.\n\n1017\n00:43:59,740 --> 00:44:01,180\n>> Even if they say it is but, yeah.\n\n1018\n00:44:01,180 --> 00:44:03,090\n>> Yeah.\nWith these Macs creeping up all over\n\n1019\n00:44:03,090 --> 00:44:03,710\nthe place.\n\n1020\n00:44:03,710 --> 00:44:05,850\n>> I know right?\nThey're up to like 5% now I think.\n\n1021\n00:44:05,850 --> 00:44:06,591\nOf the business [CROSSTALK].\n[LAUGH]\n\n1022\n00:44:06,591 --> 00:44:08,158\n>> It's so funny when you put it that way,\n\n1023\n00:44:08,158 --> 00:44:08,694\n5%, wow!\n\n1024\n00:44:08,694 --> 00:44:12,950\nIt's like one out of 20 computers or\nsomething.\n\n1025\n00:44:12,950 --> 00:44:13,835\nAnyway.\n\n1026\n00:44:13,835 --> 00:44:15,254\n[LAUGH]\n>> Slowly but surely,\n\n1027\n00:44:15,254 --> 00:44:17,154\nthey're working their way back in.\n\n1028\n00:44:17,154 --> 00:44:18,710\n[LAUGH]\n>> Yeah.\n\n1029\n00:44:18,710 --> 00:44:23,030\nAll right, some of the other features\nthat we have, DNSSEC, right?\n\n1030\n00:44:23,030 --> 00:44:26,960\nDNSSEC, the whole security framework\nthat was applied after all the root\n\n1031\n00:44:26,960 --> 00:44:29,330\nvulnerabilities turned up.\n\n1032\n00:44:29,330 --> 00:44:30,290\n>> Yeah, yep.\n\n1033\n00:44:30,290 --> 00:44:32,700\n>> DNS is a very trusting protocol.\n\n1034\n00:44:32,700 --> 00:44:33,240\n>> It is.\n\n1035\n00:44:33,240 --> 00:44:35,950\n>> And in the old days, back in the 80s.\n\n1036\n00:44:35,950 --> 00:44:37,466\nThe internet was a friendly place.\n\n1037\n00:44:37,466 --> 00:44:38,320\n>> [LAUGH]\n>> There were flowers and\n\n1038\n00:44:38,320 --> 00:44:41,823\nrainbows everywhere, it was awesome, and\nyou didn't have to worry about security.\n\n1039\n00:44:41,823 --> 00:44:43,561\n>> [LAUGH] I'm picturing Mr. Rogers.\n\n1040\n00:44:43,561 --> 00:44:45,540\n[LAUGH]\n>> Or who was the painting guy?\n\n1041\n00:44:45,540 --> 00:44:46,410\nThe happy trees.\n\n1042\n00:44:46,410 --> 00:44:47,032\n>> Bob Ross.\n\n1043\n00:44:47,032 --> 00:44:49,288\n>> [CROSSTALK] [LAUGH]\n>> The Bob Ross of the DNS servers\n\n1044\n00:44:49,288 --> 00:44:50,440\nout there.\n\n1045\n00:44:50,440 --> 00:44:52,380\nSo, it's not like that today.\n\n1046\n00:44:52,380 --> 00:44:53,755\n>> No.\n>> And there are a number of\n\n1047\n00:44:53,755 --> 00:44:55,945\nvarious specific DNS\nattacks that are out there.\n\n1048\n00:44:55,945 --> 00:44:57,330\n>> Mm-hm.\n>> So if you're going to be\n\n1049\n00:44:57,330 --> 00:45:01,210\nhosting DNS servers, and these might be\npublic ones that are facing the internet.\n\n1050\n00:45:01,210 --> 00:45:02,575\n>> Right.\n>> These might just be internal,\n\n1051\n00:45:02,575 --> 00:45:04,900\ncuz internal people are more\nlikely to attack your network.\n\n1052\n00:45:04,900 --> 00:45:06,300\n>> That's right.\n>> Than external people are.\n\n1053\n00:45:06,300 --> 00:45:08,630\nSo, there's certain measures we can take.\n\n1054\n00:45:08,630 --> 00:45:11,070\nAnd we're kinda lucky in that\nmost of them are on by default,\n\n1055\n00:45:11,070 --> 00:45:11,985\nwe don't have to mess with them.\n\n1056\n00:45:11,985 --> 00:45:12,850\n>> Mm-hm.\n>> Right?\n\n1057\n00:45:12,850 --> 00:45:15,160\nBut we may have to configure things.\n\n1058\n00:45:15,160 --> 00:45:16,340\n>> Yes.\n>> If we're doing\n\n1059\n00:45:16,340 --> 00:45:18,245\ninternet facing DNS servers for our zone.\n\n1060\n00:45:18,245 --> 00:45:18,820\n>> mm-hm.\n>> And\n\n1061\n00:45:18,820 --> 00:45:21,600\nwe are gonna be publishing\ninformation to upstream DNS servers,\n\n1062\n00:45:22,730 --> 00:45:26,518\nlike through our ISPs or whatever,\nwe very well may want to do DNSSEC.\n\n1063\n00:45:26,518 --> 00:45:27,050\n>> Mm-hm.\n>> All right.\n\n1064\n00:45:27,050 --> 00:45:29,634\nSo what the heck is DNSSEC?\n\n1065\n00:45:29,634 --> 00:45:31,490\n>> That might be a title for a show.\n\n1066\n00:45:31,490 --> 00:45:31,990\n[CROSSTALK]\n>> Sec for DNS.\n\n1067\n00:45:31,990 --> 00:45:33,399\n[LAUGH]\n\n1068\n00:45:33,399 --> 00:45:34,228\n>> It's just, go ahead.\n\n1069\n00:45:34,228 --> 00:45:35,839\n>> I was going to say DNSSEC is just\n\n1070\n00:45:35,839 --> 00:45:38,230\na way that I can digitally\nsign those zones.\n\n1071\n00:45:38,230 --> 00:45:42,370\nYeah because we've talked about I think in\nSecurity Plus and our episodes there, and\n\n1072\n00:45:42,370 --> 00:45:45,310\nas Don said there's several different\ntypes of attacks that target DNS,\n\n1073\n00:45:45,310 --> 00:45:47,290\nbecause it is such an important system.\n\n1074\n00:45:47,290 --> 00:45:50,040\nEverything really needs that to\nfunction so if I can bring that down,\n\n1075\n00:45:50,040 --> 00:45:53,800\nI can do a lot of things from simple\ndenial of service to redirecting and\n\n1076\n00:45:53,800 --> 00:45:57,605\nphishing scams and things like that, so\nI've gotta protect that information.\n\n1077\n00:45:57,605 --> 00:46:02,390\nDNSSEC is just giving my DNS servers\nthe ability to digitally sign the zone.\n\n1078\n00:46:02,390 --> 00:46:05,960\nAs well as signing the responses\nthat are going out to these clients.\n\n1079\n00:46:05,960 --> 00:46:08,730\nWhen I say DNS client, remember,\nnot client operating system.\n\n1080\n00:46:08,730 --> 00:46:13,040\nDNS is a client server model, so\nwhoever's consuming that resource.\n\n1081\n00:46:13,040 --> 00:46:16,600\nSo they can digitally sign it,\nso as a client of DNS,\n\n1082\n00:46:16,600 --> 00:46:23,460\nI can verify that the response came from\nmy DNS server and not from some scam.\n\n1083\n00:46:23,460 --> 00:46:24,687\nIt made it really simple.\n\n1084\n00:46:24,687 --> 00:46:28,333\nIn 2012, it was PowerShell.\n\n1085\n00:46:28,333 --> 00:46:31,062\nThere was a lot of\nPowerShell commands that I\n\n1086\n00:46:31,062 --> 00:46:35,050\ncould run through to configure\nDNSSEC on my zone or zones.\n\n1087\n00:46:35,050 --> 00:46:38,430\nIn 2012 R2, they've given us a wizard.\n\n1088\n00:46:38,430 --> 00:46:41,410\nAnd it really makes life\na whole lot easier.\n\n1089\n00:46:41,410 --> 00:46:44,190\nYou go through the same info, but\nyou just walk through a wizard.\n\n1090\n00:46:44,190 --> 00:46:46,370\nAnd you can even copy your settings.\n\n1091\n00:46:46,370 --> 00:46:49,760\nIf you've configured DNSSEC\non one particular zone,\n\n1092\n00:46:49,760 --> 00:46:52,070\nyou can actually go to another zone and\n\n1093\n00:46:52,070 --> 00:46:57,090\npull those DNSSEC settings from that zone\nand apply them to a second or third zone.\n\n1094\n00:46:57,090 --> 00:47:01,590\nSo it gives us a real easy way to\nimplement that across several zones.\n\n1095\n00:47:01,590 --> 00:47:03,550\n>> So how's that factor into our planning?\n\n1096\n00:47:03,550 --> 00:47:05,746\nWell, we've got to decide whether or\nnot we wanna do it.\n\n1097\n00:47:05,746 --> 00:47:07,091\n>> Hm-hm.\n>> That's the first off.\n\n1098\n00:47:07,091 --> 00:47:07,812\n>> Right.\n>> Secondly,\n\n1099\n00:47:07,812 --> 00:47:09,084\nif we decide we wanna go ahead and\n\n1100\n00:47:09,084 --> 00:47:11,354\ndo DNSSEC,\nif we're doing it between Windows Servers.\n\n1101\n00:47:11,354 --> 00:47:12,230\nSuper easy.\n\n1102\n00:47:12,230 --> 00:47:13,870\nRight?\nIt's just a simple wizard, right?\n\n1103\n00:47:13,870 --> 00:47:16,590\nBut if you've got some Windows servers and\nyou've got some Bind servers,\n\n1104\n00:47:16,590 --> 00:47:17,990\nalso it becomes a lot more challenging.\n\n1105\n00:47:17,990 --> 00:47:20,480\nYou've got to do certificate changes,\nyou've got to set up PKI,\n\n1106\n00:47:20,480 --> 00:47:21,920\nit's a lot of work.\n\n1107\n00:47:21,920 --> 00:47:23,240\nSo just be aware of that.\n\n1108\n00:47:23,240 --> 00:47:24,030\nYou can do it.\n\n1109\n00:47:24,030 --> 00:47:25,560\nIt does have the inter-operability,\n\n1110\n00:47:25,560 --> 00:47:28,900\nit just requires a little bit more\nthinking as we go through and get set up.\n\n1111\n00:47:28,900 --> 00:47:29,790\nNot a simple wizard.\n\n1112\n00:47:29,790 --> 00:47:31,560\n>> Exactly, exactly.\n\n1113\n00:47:31,560 --> 00:47:35,520\nAnother one they called out was DNS socket\npool, which again we've covered in 412.\n\n1114\n00:47:35,520 --> 00:47:40,230\nWe talked about what it is, and\nwe're talking about design.\n\n1115\n00:47:40,230 --> 00:47:42,659\nWe're talking about how many\nports we have available for\n\n1116\n00:47:42,659 --> 00:47:44,590\nthat DNS server to\nrespond of those queries.\n\n1117\n00:47:44,590 --> 00:47:49,140\n2500 I believe is the default\nnumber of ports it has available.\n\n1118\n00:47:49,140 --> 00:47:52,060\nWe can increase that up to,\ngosh I can't remember what the max is,\n\n1119\n00:47:52,060 --> 00:47:53,180\nit's pretty high.\n\n1120\n00:47:53,180 --> 00:47:56,410\nBut we're just increasing\nthe number of ports that it has\n\n1121\n00:47:56,410 --> 00:47:58,750\navailable to respond to these clients.\n\n1122\n00:47:58,750 --> 00:48:03,235\nWhich is gonna make it more difficult for\nthe bad guy to try to do any DNS spoofing.\n\n1123\n00:48:03,235 --> 00:48:06,100\nCuz he doesn't know what port\nthat server is responding on.\n\n1124\n00:48:06,100 --> 00:48:08,240\nIt will randomize.\n>> Remember that DNS,\n\n1125\n00:48:08,240 --> 00:48:11,973\nwhile you may send\nthe request to at as TCP.\n\n1126\n00:48:11,973 --> 00:48:14,078\n>> Mm-hm\n>> DNS is predominantly at UDP\n\n1127\n00:48:14,078 --> 00:48:14,893\nprotocol so.\n\n1128\n00:48:14,893 --> 00:48:18,610\nIf you send the request as TCP or\nif you send it as UDP, that's fine,\n\n1129\n00:48:18,610 --> 00:48:21,810\nthe response is generally\ngoing to come back UDP.\n\n1130\n00:48:21,810 --> 00:48:24,710\nIt's a state list protocol, so\nit's just throwing the answer to you and\n\n1131\n00:48:24,710 --> 00:48:26,490\nthe server never even checks\nto see if you got it.\n\n1132\n00:48:26,490 --> 00:48:29,010\nIf you didn't get it,\nyou just do another DNS query, right?\n\n1133\n00:48:29,010 --> 00:48:32,450\nSo, attackers know this, and\nthey can forge responses.\n\n1134\n00:48:32,450 --> 00:48:37,435\nSo you send a request that says,\nI need to get to www.donsbank.com.\n\n1135\n00:48:37,435 --> 00:48:39,043\nA hacker can intercept that, and\n\n1136\n00:48:39,043 --> 00:48:43,181\nas long as they respond faster than the\nDNS server, and say, yeah, donsbank.com,\n\n1137\n00:48:43,181 --> 00:48:46,350\nthat's this IP, and\nit's pointing to their own server.\n\n1138\n00:48:46,350 --> 00:48:49,810\nNow it's like a phishing attempt that\nI never had the chance to defeat.\n\n1139\n00:48:49,810 --> 00:48:54,461\nWhen you get that email, and you read it,\nand it's got, like, broken English, and\n\n1140\n00:48:54,461 --> 00:48:58,401\nit says donsbank.com in the link, but\nyou float your mouse over it, and\n\n1141\n00:48:58,401 --> 00:49:03,018\nit's like hotservers.ru, [LAUGH] and\nlike, I'm pretty sure that's not my bank.\n\n1142\n00:49:03,018 --> 00:49:03,518\n>> I don't think so.\n\n1143\n00:49:03,518 --> 00:49:06,120\n>> So that kind of stuff you can see.\n\n1144\n00:49:06,120 --> 00:49:10,690\nBut when somebody intercepts that\nDNS communication, it's too late.\n\n1145\n00:49:10,690 --> 00:49:14,330\nYou typed in the name yourself,\nhow could that possibly be wrong?\n\n1146\n00:49:14,330 --> 00:49:17,685\nAnd that's one of the key\ncomponents of DNS poisoning, right?\n\n1147\n00:49:17,685 --> 00:49:20,559\nAnd if they can intercept and\ncommunicate that, well,\n\n1148\n00:49:20,559 --> 00:49:24,596\nif we have these communications digitally\nsigned and I get that intercepted,\n\n1149\n00:49:24,596 --> 00:49:28,020\nthe hacker forged message,\nthe digital signature is gonna fail,\n\n1150\n00:49:28,020 --> 00:49:30,060\nthey don't have the cert to sign that.\n\n1151\n00:49:30,060 --> 00:49:32,530\nAnd so I'll know this is not\na valid response, let me wait for\n\n1152\n00:49:32,530 --> 00:49:34,230\nthe real one from my server.\n\n1153\n00:49:34,230 --> 00:49:39,050\nWhere it's really important are server\nto server communications, because those,\n\n1154\n00:49:39,050 --> 00:49:42,420\na hacker could put in\nthousands of bad entries and\n\n1155\n00:49:42,420 --> 00:49:45,170\nthem push them up as cached\nentries to an upstream server.\n\n1156\n00:49:45,170 --> 00:49:47,960\nSaying, here, I've done all these lookups,\ncache them on your server.\n\n1157\n00:49:47,960 --> 00:49:50,267\nAnd if we don't have a way\nto check that for validity,\n\n1158\n00:49:50,267 --> 00:49:52,790\nwe could be bringing\na ton of bad records in.\n\n1159\n00:49:52,790 --> 00:49:54,550\nAnd I know it's a little bit further down.\n\n1160\n00:49:54,550 --> 00:49:55,900\nOh, no, it's not.\nIt's actually the very next thing,\n\n1161\n00:49:55,900 --> 00:49:56,445\nisn't it?\n\n1162\n00:49:56,445 --> 00:49:57,055\nCache locking.\n\n1163\n00:49:57,055 --> 00:49:57,820\n>> Cache locking, yep.\n\n1164\n00:49:57,820 --> 00:50:00,000\n>> Which kind of leads\nus into cache locking,\n\n1165\n00:50:00,000 --> 00:50:03,310\nwhich is the same idea that we want to\nmake sure that people aren't able to\n\n1166\n00:50:03,310 --> 00:50:05,360\npoison the cache records\nwe got on our server.\n\n1167\n00:50:06,360 --> 00:50:08,290\n>> Yeah, by default that's set to 100%.\n\n1168\n00:50:08,290 --> 00:50:11,580\nSo that means those records are not going\nto be able, once they get in the cache,\n\n1169\n00:50:11,580 --> 00:50:15,280\nyou're not going to be able to modify\nthose records until the TTL expires, which\n\n1170\n00:50:15,280 --> 00:50:18,260\nmeans it's going to be throwing it out and\ngetting that information all over again.\n\n1171\n00:50:18,260 --> 00:50:21,350\nWe can change that with a,\nactually there's no PowerShell command,\n\n1172\n00:50:21,350 --> 00:50:24,070\nI think, odd as it might be, there's\nno PowerShell command for that yet.\n\n1173\n00:50:24,070 --> 00:50:25,320\nI'm sure there will be.\n\n1174\n00:50:25,320 --> 00:50:28,160\nBut it's a Dnscmd command,\npretty straightforward.\n\n1175\n00:50:28,160 --> 00:50:30,060\nAnd we can just adjust,\nit's set as a percentage value.\n\n1176\n00:50:30,060 --> 00:50:30,726\n>> Mm-hm.\n\n1177\n00:50:30,726 --> 00:50:33,820\nYeah, and it's 100% by default,\nwhich is what you want.\n\n1178\n00:50:33,820 --> 00:50:37,400\nIf you get a record that\nhas a TTL of 24 hours,\n\n1179\n00:50:37,400 --> 00:50:39,730\nthen don't allow it to be modified for\n24 hours.\n\n1180\n00:50:39,730 --> 00:50:44,600\nIf somebody else tries to push in an\nupdate to it in that period of time, well,\n\n1181\n00:50:44,600 --> 00:50:45,720\nit's probably invalid.\n\n1182\n00:50:45,720 --> 00:50:48,080\nIt's probably an attacker doing something,\nso we discard it.\n\n1183\n00:50:48,080 --> 00:50:51,160\nNow, you might have an exception\nin your scenario, right?\n\n1184\n00:50:51,160 --> 00:50:55,670\nYou might have a time where,\nsure, the TTL is 24 hours, but\n\n1185\n00:50:55,670 --> 00:50:57,960\nyou need to push an update\nout before then.\n\n1186\n00:50:57,960 --> 00:51:01,230\nAnd you want people to cache early, well,\ncache locking will stop that from working.\n\n1187\n00:51:01,230 --> 00:51:05,000\nSo you might have a need to go ahead and\nreduce that time down.\n\n1188\n00:51:05,000 --> 00:51:07,570\nNow, Mike and\nI were talking about it before the show,\n\n1189\n00:51:07,570 --> 00:51:10,500\nand we were trying to come up with\na scenario where you might want to\n\n1190\n00:51:10,500 --> 00:51:11,770\ndo that in a production environment.\n\n1191\n00:51:11,770 --> 00:51:16,000\nBut, I could not think of a single\nscenario that didn't involve bad planning,\n\n1192\n00:51:16,000 --> 00:51:17,050\nright.\n\n1193\n00:51:17,050 --> 00:51:19,880\nAdjusting your cache lock is\nusually the result of bad\n\n1194\n00:51:19,880 --> 00:51:21,540\nplanning that you need to do it.\n\n1195\n00:51:21,540 --> 00:51:25,520\nSo, for example, let's say that I've\ngot a bunch of DHCP clients that\n\n1196\n00:51:25,520 --> 00:51:28,170\nI know are going to be refreshing,\ngetting new addresses, and\n\n1197\n00:51:28,170 --> 00:51:31,900\nupdating their DNS record, or\nupdating their host records in DNS.\n\n1198\n00:51:31,900 --> 00:51:32,520\nRight?\n\n1199\n00:51:32,520 --> 00:51:35,140\nWell, if I normally do\nan eight day lease and\n\n1200\n00:51:35,140 --> 00:51:37,280\nmaybe I'll get eight day\nTTLs in these lookups.\n\n1201\n00:51:37,280 --> 00:51:40,380\nBut I'm about to change to\nsomething shorter or modify that so\n\n1202\n00:51:40,380 --> 00:51:41,920\nI want them to update earlier.\n\n1203\n00:51:41,920 --> 00:51:48,350\nIf I plan for the change, I can reduce the\nTTL down to whatever I want, 15 minutes.\n\n1204\n00:51:48,350 --> 00:51:52,726\nAnd then make the change, and then after\nit's done, bump the TTL back up again.\n\n1205\n00:51:52,726 --> 00:51:57,760\nSo if you plan for it, you should never\nhave to adjust the cache lock, all right?\n\n1206\n00:51:57,760 --> 00:52:01,030\nBut if you're constantly finding problems\nwhere there's a remote system that's\n\n1207\n00:52:01,030 --> 00:52:05,870\nchanging IPs frequently, the cache lock\nmay cause you to lose connectivity.\n\n1208\n00:52:05,870 --> 00:52:07,910\nAnd again,\nit's the result of bad planning.\n\n1209\n00:52:07,910 --> 00:52:10,130\nYou should have static IPs\nin the remote systems.\n\n1210\n00:52:10,130 --> 00:52:12,850\nThere shouldn't be things\nwhere it's rapidly changing.\n\n1211\n00:52:12,850 --> 00:52:15,990\nA lot of people set their TTLs very,\nvery low.\n\n1212\n00:52:15,990 --> 00:52:18,980\nYou'll see out on the Internet,\n15 minutes is a pretty common number.\n\n1213\n00:52:18,980 --> 00:52:20,580\n>> Right.\n>> You can go as low as a minute,\n\n1214\n00:52:20,580 --> 00:52:21,210\nif you want.\n\n1215\n00:52:21,210 --> 00:52:23,030\n>> Yeah.\nGoogle's pretty darn short, isn't it.\n\n1216\n00:52:23,030 --> 00:52:25,495\nThey just wanna balance that\nload across multiple servers.\n\n1217\n00:52:25,495 --> 00:52:26,019\n>> Yep.\n\n1218\n00:52:26,019 --> 00:52:27,310\n>> Don't want you caching it too long.\n\n1219\n00:52:27,310 --> 00:52:27,812\n>> Yeah.\n\n1220\n00:52:27,812 --> 00:52:29,476\n>> [LAUGH]\n>> That's basically it.\n\n1221\n00:52:29,476 --> 00:52:32,393\nAll right, now, other things that we\nneed to think about with DNS, right.\n\n1222\n00:52:32,393 --> 00:52:34,255\nSo obviously the number\nof servers is important.\n\n1223\n00:52:34,255 --> 00:52:37,775\nWhether we go Active Directory\nintegrated or not is a big decision.\n\n1224\n00:52:37,775 --> 00:52:40,735\nThose are all things that\nstart to influence us.\n\n1225\n00:52:40,735 --> 00:52:43,155\nWe'll also see things like our namespace.\n\n1226\n00:52:43,155 --> 00:52:46,155\nAnd designing a namespace,\nit's a big deal.\n\n1227\n00:52:46,155 --> 00:52:47,455\n>> That is a big part of it.\n\n1228\n00:52:47,455 --> 00:52:50,460\n>> Cuz if you get it wrong in\nthe beginning, that's hard to change.\n\n1229\n00:52:50,460 --> 00:52:52,180\n>> It has to be done early, exactly.\n\n1230\n00:52:52,180 --> 00:52:53,726\nIt has to be planned for,\ncuz you've got to decide.\n\n1231\n00:52:53,726 --> 00:52:55,160\nYou've got a few different choices, right?\n\n1232\n00:52:55,160 --> 00:52:59,120\nYou can go with the same name inside and\noutside of your network.\n\n1233\n00:52:59,120 --> 00:53:05,120\nSo, your external resources and your\ninternal resources are all donsbank.com,\n\n1234\n00:53:05,120 --> 00:53:08,540\nor you can do a split namespace\nwhere they're completely different,\n\n1235\n00:53:08,540 --> 00:53:12,130\nyou could have donsbank.com\nto the external side, and\n\n1236\n00:53:12,130 --> 00:53:16,710\nthen donsbank.local, maybe,\ninternal and non-routable name inside.\n\n1237\n00:53:16,710 --> 00:53:19,630\nAnd you could do a child domain.\n\n1238\n00:53:19,630 --> 00:53:22,245\nRight.\nYou could do what we call a subdomain in\n\n1239\n00:53:22,245 --> 00:53:26,020\nthe DNS world, where you've got,\nmaybe to the outside,\n\n1240\n00:53:26,020 --> 00:53:30,690\nyou're donsbank.com,\ninside you're internal.donsbank.com.\n\n1241\n00:53:30,690 --> 00:53:35,790\nAnd really, each one has its own merits,\nits own pros and its own cons.\n\n1242\n00:53:35,790 --> 00:53:38,100\nA lot of it having to\ndo with manageability.\n\n1243\n00:53:38,100 --> 00:53:43,090\nAnd administratively being able to\ndifferentiate between external resources\n\n1244\n00:53:43,090 --> 00:53:45,180\nand internal resources easily.\n\n1245\n00:53:45,180 --> 00:53:49,530\nNow, if you have the same namespace\ninside and outside, management wise,\n\n1246\n00:53:49,530 --> 00:53:51,010\nit's pretty straightforward.\n\n1247\n00:53:51,010 --> 00:53:54,190\nBut difficult to differentiate between,\n\n1248\n00:53:54,190 --> 00:53:57,240\nsay, internal resources\nversus external resources.\n\n1249\n00:53:57,240 --> 00:53:57,800\n>> Yeah.\n\n1250\n00:53:57,800 --> 00:54:00,377\nAnd when you first set up\nan Active Directory forest,\n\n1251\n00:54:00,377 --> 00:54:03,018\nthis is one of the earliest\ndecisions you have to make.\n\n1252\n00:54:03,018 --> 00:54:05,185\nYou're gonna make a new forest and\nyou got to give it a name.\n\n1253\n00:54:05,185 --> 00:54:09,200\nAnd while you can change it later on,\nMicrosoft doesn't exactly make it easy.\n\n1254\n00:54:09,200 --> 00:54:11,540\nSo, you want to avoid that if you can.\n\n1255\n00:54:11,540 --> 00:54:13,830\nLet's just use ITProTV as an example,\nright?\n\n1256\n00:54:13,830 --> 00:54:15,206\nSo here's our hierarchy.\n\n1257\n00:54:15,206 --> 00:54:19,430\nWe have itpro.tv, that's the website\nthat most of you guys more\n\n1258\n00:54:19,430 --> 00:54:22,250\nthan likely have browsed to,\nunless you've bootlegged our content,\n\n1259\n00:54:22,250 --> 00:54:24,520\n[LAUGH] so\nthat's where you're watching us from.\n\n1260\n00:54:24,520 --> 00:54:25,070\n>> Shame on you.\n\n1261\n00:54:25,070 --> 00:54:28,650\n>> And then underneath that,\nwe have lab.itpro.tv.\n\n1262\n00:54:28,650 --> 00:54:31,393\n>> All right, well,\nwhat the heck is lab.itpro.tv?\n\n1263\n00:54:31,393 --> 00:54:32,770\nThat's what we use here on the show,\nright?\n\n1264\n00:54:32,770 --> 00:54:34,930\nThat's our little show domain that we use,\nand\n\n1265\n00:54:34,930 --> 00:54:37,740\nthe domain controller for it I think\nis sitting back behind me somewhere.\n\n1266\n00:54:37,740 --> 00:54:42,240\nAnd so we've got a domain controller\nslash DNS server for lab.itpro.tv.\n\n1267\n00:54:42,240 --> 00:54:44,370\nThat is private.\n\n1268\n00:54:44,370 --> 00:54:45,510\nIt's here on our private network.\n\n1269\n00:54:45,510 --> 00:54:46,290\nYou guys can't get to it.\n\n1270\n00:54:46,290 --> 00:54:48,370\nIf you try and do a lookup out\nthere on the Internet for it,\n\n1271\n00:54:48,370 --> 00:54:50,500\nyou're not gonna get any responses.\n\n1272\n00:54:50,500 --> 00:54:56,101\nBut itpro.tv, the guy right there,\nthat is hosted up on the Internet.\n\n1273\n00:54:56,101 --> 00:54:57,100\nAny of you guys can query it.\n\n1274\n00:54:57,100 --> 00:54:58,420\nThat's how you find our server.\n\n1275\n00:54:58,420 --> 00:55:00,828\nSo this part, the parent zone here,\n\n1276\n00:55:00,828 --> 00:55:05,185\nthat's actually being hosted by\npublic servers on the Internet.\n\n1277\n00:55:05,185 --> 00:55:09,371\nThis subdomain, lab.itpro.tv, we broke\nthat off, and that's what we use for\n\n1278\n00:55:09,371 --> 00:55:13,400\nour Active Directory here for\non the show and communications.\n\n1279\n00:55:13,400 --> 00:55:15,210\nBut this isn't really disjointed.\n\n1280\n00:55:15,210 --> 00:55:17,340\nThese guys are still in the same zone.\n\n1281\n00:55:17,340 --> 00:55:18,980\nThey're related to each other,\n\n1282\n00:55:18,980 --> 00:55:22,870\nthe difference being that I just have\ntwo different servers hosting that up.\n\n1283\n00:55:22,870 --> 00:55:27,146\nBut Mike mentioned the other scenario,\nwhich is,\n\n1284\n00:55:27,146 --> 00:55:33,808\nmaybe instead of doing that, I have two\ndifferent domains, like itpro.tv and\n\n1285\n00:55:33,808 --> 00:55:38,893\nitpro, maybe itprolab.tv,\nwhich I can't seem to spell.\n\n1286\n00:55:38,893 --> 00:55:39,810\nSo we definitely don't\nwant to do that one.\n\n1287\n00:55:39,810 --> 00:55:41,643\nOkay, itprolab.tv.\n\n1288\n00:55:41,643 --> 00:55:43,885\nWhich in hindsight, is a stupid name, but-\n>> [LAUGH]\n\n1289\n00:55:43,885 --> 00:55:45,101\n>> But let's say that was it.\n\n1290\n00:55:45,101 --> 00:55:47,340\nThese are two completely different names.\n\n1291\n00:55:47,340 --> 00:55:47,930\nRight.\n\n1292\n00:55:47,930 --> 00:55:48,850\nOne name for outside.\n\n1293\n00:55:48,850 --> 00:55:49,980\nOne name for inside.\n\n1294\n00:55:49,980 --> 00:55:52,602\nThat makes it easier for\nus to manage, right?\n\n1295\n00:55:52,602 --> 00:55:54,040\nAnd a lot of people will do this.\n\n1296\n00:55:54,040 --> 00:55:55,520\nWhen they set up their\nActive Directory forest,\n\n1297\n00:55:55,520 --> 00:55:58,320\nthey'll pick something completely\ndifferent, and that's okay.\n\n1298\n00:55:58,320 --> 00:56:01,570\nRemember that each tree in your forest\ncan have a different domain name anyway.\n\n1299\n00:56:01,570 --> 00:56:03,150\nSo you can kind of pick and choose.\n\n1300\n00:56:04,240 --> 00:56:09,290\nBut the real danger on this one is\npeople get tempted to pick a fake name.\n\n1301\n00:56:09,290 --> 00:56:11,280\nA name they don't own or\nthat they made up.\n\n1302\n00:56:12,430 --> 00:56:14,817\nAnd it's changed so much over the years.\n\n1303\n00:56:14,817 --> 00:56:17,939\nI remember back in 2000 when I was first\ndealing with the Active Directory,\n\n1304\n00:56:17,939 --> 00:56:20,797\nright when it first came out, and\nit said, you got to pick a domain name.\n\n1305\n00:56:20,797 --> 00:56:21,503\nRight?\n>> And\n\n1306\n00:56:21,503 --> 00:56:25,029\nthey even suggested using\nsomething fake back then.\n\n1307\n00:56:25,029 --> 00:56:26,837\n>> Right.\n>> If you used something fake you didn't\n\n1308\n00:56:26,837 --> 00:56:29,291\nhave to worry about anybody on the\ninternet being able to get to it [LAUGH]\n\n1309\n00:56:29,291 --> 00:56:30,850\nand it would be internally available only.\n\n1310\n00:56:30,850 --> 00:56:32,160\n>> Mm-hm.\n>> But the problem was if you\n\n1311\n00:56:32,160 --> 00:56:34,200\nchanged your mind down the road.\n\n1312\n00:56:34,200 --> 00:56:35,580\n>> Yeah.\n>> Let's say a few years from now you\n\n1313\n00:56:35,580 --> 00:56:37,430\nwanted to make something\navailable on the internet.\n\n1314\n00:56:37,430 --> 00:56:38,105\nYou couldn't.\n\n1315\n00:56:38,105 --> 00:56:38,920\nCuz you used a fake name.\n\n1316\n00:56:38,920 --> 00:56:40,190\n>> Yeah.\n>> All right.\n\n1317\n00:56:40,190 --> 00:56:43,710\nSo, what a lot of people do is, they would\npick public names that they didn't own.\n\n1318\n00:56:43,710 --> 00:56:46,150\nWell then, if they chose to make\nsomething available on the internet,\n\n1319\n00:56:46,150 --> 00:56:48,640\nthey'd try to buy this domain and\nit might not be available anymore.\n\n1320\n00:56:48,640 --> 00:56:50,080\n>> Yeah, or\nsomebody's name squatting on it.\n\n1321\n00:56:50,080 --> 00:56:53,290\nAnd they're gonna charge you\na fortune to get that name.\n\n1322\n00:56:53,290 --> 00:56:55,060\n>> Or my absolute favorite one.\n\n1323\n00:56:55,060 --> 00:57:01,198\nA lot of people would pick something and\nthey would do something like this.\n\n1324\n00:57:01,198 --> 00:57:01,899\nDomain.\n\n1325\n00:57:01,899 --> 00:57:03,070\nmsft.\n.Msft,\n\n1326\n00:57:03,070 --> 00:57:05,595\nthat's not a valid top level domain,\nright?\n\n1327\n00:57:05,595 --> 00:57:07,805\nAnd so they would pick that as a fakie.\n\n1328\n00:57:07,805 --> 00:57:11,675\nBut now,\nthey're selling the new expanded TLDs.\n\n1329\n00:57:11,675 --> 00:57:14,615\nSo if I want it, I can go and\npay a million bucks or\n\n1330\n00:57:14,615 --> 00:57:18,465\nwhatever Amazon had to pay for\ntheirs, and I could buy .msft.\n\n1331\n00:57:18,465 --> 00:57:20,452\nAnd now, all those people who chose\n\n1332\n00:57:20,452 --> 00:57:22,092\nfake names,\n>> [LAUGH]\n\n1333\n00:57:22,092 --> 00:57:23,282\n>> Boy, they're in trouble.\n\n1334\n00:57:23,282 --> 00:57:25,802\nCuz now,\nI can start to have some fun with that.\n\n1335\n00:57:25,802 --> 00:57:26,842\nRight.\n>> Yeah, absolutely.\n\n1336\n00:57:26,842 --> 00:57:28,380\n>> It'd cost me a lot to do it,\nbut I could.\n\n1337\n00:57:28,380 --> 00:57:29,782\nThat's the point.\n\n1338\n00:57:29,782 --> 00:57:35,000\nSo what you really need to do, whether\nit's a fake name or real name or whatever.\n\n1339\n00:57:35,000 --> 00:57:38,560\nIt really should be a real\nname that you've purchased.\n\n1340\n00:57:38,560 --> 00:57:40,360\nYou might not be using it\nout there in the internet.\n\n1341\n00:57:40,360 --> 00:57:41,700\nBut you should own it.\n\n1342\n00:57:41,700 --> 00:57:45,110\nAnd the easiest thing to do is to use\nsubdomain's off something that is real.\n\n1343\n00:57:45,110 --> 00:57:48,200\nAnd that's, it doesn't cost you any\nextra money and you get that protection.\n\n1344\n00:57:48,200 --> 00:57:53,610\nSo by using lab.itpro.tv as our\nshow domain, we've got that.\n\n1345\n00:57:53,610 --> 00:57:58,197\nAnd then, if we want a domain for our\noffice, we could have office.itpro.tv or\n\n1346\n00:57:58,197 --> 00:58:02,190\ncorporate.itpro.tv or whatever it is\nthat we wanted to designate these.\n\n1347\n00:58:02,190 --> 00:58:08,320\nAll underneath the itpro.tv name, that\nhierarchy that we've got there like that.\n\n1348\n00:58:08,320 --> 00:58:10,400\nRight?\nSo you get that flexibility,\n\n1349\n00:58:10,400 --> 00:58:11,180\nyou get a lot more power.\n\n1350\n00:58:11,180 --> 00:58:13,110\n>> Absolutely, absolutely.\n\n1351\n00:58:13,110 --> 00:58:13,700\n>> All right.\n\n1352\n00:58:13,700 --> 00:58:15,720\nWhich solution is right for you?\n\n1353\n00:58:15,720 --> 00:58:16,780\nWell, it kind of depends.\n\n1354\n00:58:16,780 --> 00:58:19,260\nOn this one, I really do feel\nlike there's a one size fits all.\n\n1355\n00:58:19,260 --> 00:58:22,690\nI feel like, you should have\na public top level domain and\n\n1356\n00:58:22,690 --> 00:58:25,480\nthen, do subdomains underneath that for\nyour active directory.\n\n1357\n00:58:25,480 --> 00:58:29,100\nBut many people argue, they prefer to\ndo completely separate domain names.\n\n1358\n00:58:29,100 --> 00:58:31,890\nThat way they just weren't, you know,\nthe possibility for crossover.\n\n1359\n00:58:31,890 --> 00:58:33,120\nYou don't want that.\n\n1360\n00:58:33,120 --> 00:58:38,012\nSo, you know, there may actually be\nmore than one option there for you.\n\n1361\n00:58:38,012 --> 00:58:42,290\nAll right, Mike, I know we've got more to\ntalk about on DNS and IPAM is coming up,\n\n1362\n00:58:42,290 --> 00:58:44,250\nbut we are a little low on time for\nthis segment.\n\n1363\n00:58:44,250 --> 00:58:46,100\nSo, you got anything else to\nthrow in before we break?\n\n1364\n00:58:46,100 --> 00:58:47,220\n>> No, I think we're good.\n\n1365\n00:58:47,220 --> 00:58:49,070\n>> All right.\nSo ladies and gentlemen, let's stop and\n\n1366\n00:58:49,070 --> 00:58:49,760\ntake a breather here.\n\n1367\n00:58:49,760 --> 00:58:52,280\nWhen we get back, more on DNS.\n\n1368\n00:58:52,280 --> 00:58:54,383\nWe'll see you then.\n\n1369\n00:58:54,383 --> 00:59:00,643\n>> [NOISE].\n\n1370\n00:59:00,643 --> 00:59:03,550\n>> All right, welcome back everybody.\n\n1371\n00:59:03,550 --> 00:59:07,470\nOkay so the next thing we want to\ntalk about are DNS migrations.\n\n1372\n00:59:07,470 --> 00:59:11,293\nAll right, as we migrate from one version\nof the operating system to another.\n\n1373\n00:59:11,293 --> 00:59:14,490\nYou know, you're probably running DNS,\nbecause it supports active directory.\n\n1374\n00:59:14,490 --> 00:59:16,840\nAnd you're probably running\nit on a Microsoft server.\n\n1375\n00:59:16,840 --> 00:59:18,980\nBut those servers get upgraded, right?\n\n1376\n00:59:18,980 --> 00:59:23,600\nYou go from Windows Server 2003\nto Windows Server 2008 and so on.\n\n1377\n00:59:24,830 --> 00:59:27,310\nWhat we do each leg along the journey?\n\n1378\n00:59:27,310 --> 00:59:29,030\nFor the most part, we don't do much.\n\n1379\n00:59:29,030 --> 00:59:29,950\nRight?\n\n1380\n00:59:29,950 --> 00:59:33,460\nDNS hasn't really changed all\nthat much over the years.\n\n1381\n00:59:33,460 --> 00:59:35,400\nYou know, new security features-\n\n1382\n00:59:35,400 --> 00:59:36,730\n>> Yeah-\n>> Yeah\n\n1383\n00:59:36,730 --> 00:59:38,800\n>> That's about it really you know.\n\n1384\n00:59:38,800 --> 00:59:42,290\nIt gives us a couple options to,\ngosh I'm just trying to think\n\n1385\n00:59:42,290 --> 00:59:46,200\nwhat else they really added, but yeah DNS\nsac and stuff like that is about all.\n\n1386\n00:59:46,200 --> 00:59:49,220\n>> Well most of that stuff you do in\nin place upgrade is adding a feature.\n\n1387\n00:59:49,220 --> 00:59:53,190\nSo you just chose to turn that feature\non or not turn it on and off you go.\n\n1388\n00:59:53,190 --> 00:59:56,130\nBut there are some things\nthat we need to keep in mind\n\n1389\n00:59:56,130 --> 00:59:57,690\nwhen we start to do these migrations.\n\n1390\n00:59:57,690 --> 01:00:02,290\nAnd some of these, we're going to have\nto reach a little bit back for, to get.\n\n1391\n01:00:02,290 --> 01:00:07,010\nNow, if we're migrating from\na non-Microsoft DNS server\n\n1392\n01:00:07,010 --> 01:00:11,120\nto a Microsoft DNS server, it's actually\na pretty straight forward process.\n\n1393\n01:00:11,120 --> 01:00:15,900\nYou're non-Microsoft DNS server is\nprobably set up as a standard primary.\n\n1394\n01:00:15,900 --> 01:00:16,630\nAll right?\n\n1395\n01:00:16,630 --> 01:00:20,170\nAnd you are basically,\nreplicating that zone, and\n\n1396\n01:00:20,170 --> 01:00:24,300\nyou're doing a zone transfer to your\nMicrosoft server as a standard secondary.\n\n1397\n01:00:24,300 --> 01:00:26,730\nIf you're not,\nthat's what you need to set up.\n\n1398\n01:00:26,730 --> 01:00:28,470\nSo let's run through that scenario.\n\n1399\n01:00:28,470 --> 01:00:32,930\nWe'll assume that all you have\nare Linux DNS servers, and that's it.\n\n1400\n01:00:32,930 --> 01:00:35,300\nAnd you want to bring those\nover to the Microsoft world,\n\n1401\n01:00:35,300 --> 01:00:37,460\nwhich is what Microsoft wants you to do.\n\n1402\n01:00:37,460 --> 01:00:44,450\nSo, you bring up a Microsoft DNS server,\nand you set it up as a standard secondary.\n\n1403\n01:00:44,450 --> 01:00:48,510\nNot active directory integrated,\nbecause secondaries can't do that.\n\n1404\n01:00:48,510 --> 01:00:51,835\nYou want to bring it up as a standard\nsecondary and you tell it to replicate\n\n1405\n01:00:51,835 --> 01:00:55,785\nthe zone from your Linux server, your BIND\nserver that's out there on the network.\n\n1406\n01:00:55,785 --> 01:00:57,995\nThat will get you a copy of the zone, and\n\n1407\n01:00:57,995 --> 01:00:59,905\nhave it sitting right there\non your Microsoft server.\n\n1408\n01:00:59,905 --> 01:01:03,355\nIt stops you from having to do any\ncrazy import, export, CSV file,\n\n1409\n01:01:03,355 --> 01:01:04,225\nanything like that.\n\n1410\n01:01:04,225 --> 01:01:05,276\nIt just brings the zone over.\n\n1411\n01:01:05,276 --> 01:01:06,970\nAll right.\n\n1412\n01:01:06,970 --> 01:01:11,870\nFrom there, you can then,\nbasically sever your connection to\n\n1413\n01:01:11,870 --> 01:01:15,950\nthe other server and\npromote yourself up to become a primary.\n\n1414\n01:01:15,950 --> 01:01:19,680\nYou can tell yourself to be stored in the\nactive directory as a multi master model.\n\n1415\n01:01:19,680 --> 01:01:22,870\nYou can move up from there and\nshut off your Linux servers.\n\n1416\n01:01:22,870 --> 01:01:26,350\nYou just need to get all\nof your other clients,\n\n1417\n01:01:26,350 --> 01:01:29,430\nyour pcs whatever they are and\npoint them at your new DNS server.\n\n1418\n01:01:29,430 --> 01:01:31,620\nIt's pretty straight forward.\n\n1419\n01:01:31,620 --> 01:01:34,348\nWhere things get tricky is the whole\nactive directory integrative piece.\n\n1420\n01:01:34,348 --> 01:01:36,620\nIf you are not worried about being\nactive directory integrated,\n\n1421\n01:01:36,620 --> 01:01:38,290\nyou could just stay a standard secondary.\n\n1422\n01:01:38,290 --> 01:01:41,120\nAnd now, your windows server has\nto copy that zone your done.\n\n1423\n01:01:41,120 --> 01:01:44,860\nBut if you want the dynamic updating and\nthe multi-master changes and\n\n1424\n01:01:44,860 --> 01:01:45,660\nreplication and\n\n1425\n01:01:45,660 --> 01:01:50,150\nall that good stuff, you'll need to bump\nyourself up to become the master, right?\n\n1426\n01:01:50,150 --> 01:01:53,710\nSo, you can either take your Linux servers\ndown that are running DNS, or you can\n\n1427\n01:01:53,710 --> 01:01:57,900\nconvert them into secondaries and your\nWindows servers are now the primaries.\n\n1428\n01:01:57,900 --> 01:02:01,690\nIt is important to have your\nWindows servers be the primaries,\n\n1429\n01:02:01,690 --> 01:02:06,040\nif you want to do things like dynamic\nDNS registration on the Windows side.\n\n1430\n01:02:06,040 --> 01:02:07,080\nAnd you more than likely will,\n\n1431\n01:02:07,080 --> 01:02:10,192\nbecause there is certain tools\nthat take advantage of that.\n\n1432\n01:02:10,192 --> 01:02:13,830\nAll right, so that's one of the big\nconsiderations we have with migration.\n\n1433\n01:02:13,830 --> 01:02:17,790\nThe other thing is when we migrate\nfrom older versions of Windows,\n\n1434\n01:02:17,790 --> 01:02:20,330\nI said not much has\nchanged in the DNS world,\n\n1435\n01:02:20,330 --> 01:02:23,940\nand that's pretty true if you're\nthinking about in recent times.\n\n1436\n01:02:23,940 --> 01:02:27,800\nBut if we reach way back,\nright, way back to Windows 2000,\n\n1437\n01:02:27,800 --> 01:02:31,150\n14 years ago, you are there.\n\n1438\n01:02:31,150 --> 01:02:32,470\n>> 14, wow.\n>> I know, it's been a long time.\n\n1439\n01:02:32,470 --> 01:02:33,620\n>> Has it been that long?\n\n1440\n01:02:33,620 --> 01:02:35,920\n>> So 14 years ago Windows 2000 came out.\n\n1441\n01:02:35,920 --> 01:02:40,210\nThe way they implemented DNS in\nan active directory integrated zone\n\n1442\n01:02:40,210 --> 01:02:41,645\nwas a little different than it is now.\n\n1443\n01:02:41,645 --> 01:02:42,210\n>> Mm-hm.\n\n1444\n01:02:42,210 --> 01:02:44,680\n>> Microsoft recognized right off that\nit was a little bit of a problem.\n\n1445\n01:02:44,680 --> 01:02:45,280\n>> Right.\n\n1446\n01:02:45,280 --> 01:02:50,040\n>> When you deployed an active directory\nintegrated DNS zone back in Windows 2000,\n\n1447\n01:02:50,040 --> 01:02:53,580\nthe configuration for\nit was stored in the domain partition.\n\n1448\n01:02:53,580 --> 01:02:59,040\nThat means that it was replicated to all\nof the domain controllers in your domain.\n\n1449\n01:02:59,040 --> 01:02:59,550\nRight?\n\n1450\n01:02:59,550 --> 01:03:03,470\nSo if you had 50 domain controllers and\nonly two of them were DNS servers,\n\n1451\n01:03:03,470 --> 01:03:04,060\nit didn't matter.\n\n1452\n01:03:04,060 --> 01:03:07,120\nAll 50 of them had copies of the DNS zone.\n\n1453\n01:03:07,120 --> 01:03:08,780\n>> Just make sure your application size.\n\n1454\n01:03:08,780 --> 01:03:09,315\nLarger.\n\n1455\n01:03:09,315 --> 01:03:10,230\nIt's going to take longer.\n\n1456\n01:03:10,230 --> 01:03:11,470\nI mean, it's kind of a waste.\n\n1457\n01:03:11,470 --> 01:03:13,690\n>> And most of the servers\nare ignoring it anyway, right?\n\n1458\n01:03:13,690 --> 01:03:16,265\nUnless they're running the DNS service,\nthey're just going to ignore that stuff.\n\n1459\n01:03:16,265 --> 01:03:16,910\n>> Mm-hm.\n\n1460\n01:03:16,910 --> 01:03:17,970\n>> So in Windows Server 2003,\n\n1461\n01:03:17,970 --> 01:03:23,440\nthey introduced a neat feature which\nwas called an application partition.\n\n1462\n01:03:23,440 --> 01:03:27,880\nIt allowed you to move the DNS stuff into\nits own partition in the active directory.\n\n1463\n01:03:27,880 --> 01:03:29,390\nAnd now, when it replicated,\n\n1464\n01:03:29,390 --> 01:03:33,420\nif it was replicating to a DNS server,\nit would send the DNS partition.\n\n1465\n01:03:33,420 --> 01:03:36,710\nBut if it was replicating to a non-DNS\nserver, it would leave that off.\n\n1466\n01:03:36,710 --> 01:03:39,820\nWhy bother those servers with junk\nthey're not gonna use anyway?\n\n1467\n01:03:39,820 --> 01:03:40,320\nIt was cool.\n\n1468\n01:03:41,350 --> 01:03:46,910\nBut if you had already implemented your\nDNS, it didn't switch over automatically.\n\n1469\n01:03:46,910 --> 01:03:50,990\nAnd it's possible even today,\n14 years later, that you can go out there\n\n1470\n01:03:50,990 --> 01:03:55,360\nto a production environment where whoever\ndid the upgrade just didn't know about it.\n\n1471\n01:03:55,360 --> 01:03:56,490\n>> Right.\nJust kind of left it.\n\n1472\n01:03:56,490 --> 01:03:58,760\n>> You don't- small and\nmedium environment.\n\n1473\n01:03:58,760 --> 01:03:59,610\nYou don't notice.\n\n1474\n01:03:59,610 --> 01:04:01,640\nIt's not that big of a performance hit.\n\n1475\n01:04:01,640 --> 01:04:03,670\nIn a large environment, it can be though.\n\n1476\n01:04:03,670 --> 01:04:05,380\nAnd their DNS resolution,\n\n1477\n01:04:05,380 --> 01:04:08,650\ntheir domain controllers might have slow\nreplication and they don't know why.\n\n1478\n01:04:08,650 --> 01:04:11,270\nAnd it turns out that the problem is\nthey're replicating this DNS zone\n\n1479\n01:04:11,270 --> 01:04:11,818\neverywhere.\n\n1480\n01:04:11,818 --> 01:04:12,840\nEven non-DNS servers.\n\n1481\n01:04:12,840 --> 01:04:16,948\nSo we might need to convert them\nfrom storing it in the domain,\n\n1482\n01:04:16,948 --> 01:04:19,713\nto storing it in application partition.\n\n1483\n01:04:19,713 --> 01:04:21,768\nFortunately, it's super easy.\n\n1484\n01:04:21,768 --> 01:04:23,584\nLet me just show you real quick here.\n\n1485\n01:04:23,584 --> 01:04:27,938\nI've got a DNS server pulled up And\nwhat you do, is you find your zone.\n\n1486\n01:04:27,938 --> 01:04:31,930\nSo I'll take lab@ITPro.TV, all right?\n\n1487\n01:04:31,930 --> 01:04:37,040\nAnd if I pull up the properties\non that zone, and I go in here,\n\n1488\n01:04:37,040 --> 01:04:38,830\nI can see this one's running.\n\n1489\n01:04:38,830 --> 01:04:40,825\nIt's Active Directory integrated.\n\n1490\n01:04:40,825 --> 01:04:43,655\nThat's where we can convert from\nbeing a standard secondary.\n\n1491\n01:04:43,655 --> 01:04:47,685\nI mentioned that earlier, you wanna cover\nyourself up you just switch it to primary\n\n1492\n01:04:47,685 --> 01:04:51,115\nand check that off to store it in\nthe AD and you're done, real easy.\n\n1493\n01:04:51,115 --> 01:04:53,515\nBut then you've got this one right here,\nreplication.\n\n1494\n01:04:53,515 --> 01:04:56,435\nAnd if I pick change on that you'll\nnotice this option down here.\n\n1495\n01:04:56,435 --> 01:05:00,345\nIt says replicate to all domain\ncontrollers in this domain for\n\n1496\n01:05:00,345 --> 01:05:02,360\nWindows 2000 compatibility.\n\n1497\n01:05:02,360 --> 01:05:06,390\nThat is the old Windows\n2000 mode with a whole zone\n\n1498\n01:05:06,390 --> 01:05:08,260\nwas stored in the domain partition.\n\n1499\n01:05:08,260 --> 01:05:11,430\nAll right, all of your domain\ncontrollers received a copy of that zone\n\n1500\n01:05:11,430 --> 01:05:13,190\nregardless of whether they\nwere DNS servers or not.\n\n1501\n01:05:14,500 --> 01:05:16,690\nTo convert it,\njust choose one of the top two options.\n\n1502\n01:05:17,800 --> 01:05:22,760\nThe DNS partition for your domain or\nthe DNS partition for your forest.\n\n1503\n01:05:22,760 --> 01:05:25,410\n>> It'll create,\ndepending on which one you choose,\n\n1504\n01:05:25,410 --> 01:05:28,510\nif you create all domain controllers\nthat are DNS servers in the domain,\n\n1505\n01:05:28,510 --> 01:05:32,370\nit creates an application partition\ncalled the domain DNS zone.\n\n1506\n01:05:32,370 --> 01:05:35,710\nIf you choose all domain controllers\nthat are running DNS in the forest,\n\n1507\n01:05:35,710 --> 01:05:37,450\nthen it creates a forest DNS zone.\n\n1508\n01:05:37,450 --> 01:05:41,510\nAnd just tells that KCC how to\nset up that replication topology.\n\n1509\n01:05:41,510 --> 01:05:43,843\nWell who does it have to include\nin the replication topology for\n\n1510\n01:05:43,843 --> 01:05:44,730\nthat particular zone?\n\n1511\n01:05:44,730 --> 01:05:46,920\nBecause remember, we've talked\nabout active directory application.\n\n1512\n01:05:46,920 --> 01:05:49,750\nEach one of those partitions\nreplicated independently so\n\n1513\n01:05:49,750 --> 01:05:51,250\nit can have its own topology for that.\n\n1514\n01:05:51,250 --> 01:05:54,840\n>> Yeah, and when we say okay to that it's\ngoing to convert it over and that's it.\n\n1515\n01:05:54,840 --> 01:05:56,150\nIt's really that easy.\n\n1516\n01:05:56,150 --> 01:06:00,872\nBut the thing I always have to remember\nis that's my active directory domain\n\n1517\n01:06:00,872 --> 01:06:03,918\nlab.itpro.tv, so\nI want to convert that one.\n\n1518\n01:06:03,918 --> 01:06:07,230\nI always forget to do the _msdcs.\n\n1519\n01:06:07,230 --> 01:06:08,450\n>> Oh, your SRV records.\n\n1520\n01:06:08,450 --> 01:06:10,780\n>> Yeah, and it's really a separate zone.\n\n1521\n01:06:10,780 --> 01:06:14,330\nIt doesn't look like it because if we\nexpand out lab you'll see it right there.\n\n1522\n01:06:14,330 --> 01:06:16,980\nBut it is a separate zone, and so\nyou have to adjust it there too.\n\n1523\n01:06:16,980 --> 01:06:19,200\nSo I'm going to pull up\nthe properties on that one, and\n\n1524\n01:06:19,200 --> 01:06:21,360\nI'll check to make sure\nthat that one's set.\n\n1525\n01:06:21,360 --> 01:06:23,280\nAnd it's going to the whole forest,\nthat's fine.\n\n1526\n01:06:24,310 --> 01:06:27,040\nThat's really the only place\nthat we see that DNS partition.\n\n1527\n01:06:27,040 --> 01:06:28,330\nYou don't really know it's there.\n\n1528\n01:06:28,330 --> 01:06:30,440\nI mean you can see it ADSI edit I suppose.\n\n1529\n01:06:30,440 --> 01:06:33,840\n>> Yeah, and when you do some of your\nreplication tools like ReplMon and\n\n1530\n01:06:33,840 --> 01:06:36,710\nthings like that, you can verify\nthe status, make sure that particular\n\n1531\n01:06:36,710 --> 01:06:40,650\npartition is replicating,\ncheck its partners and things like that.\n\n1532\n01:06:40,650 --> 01:06:43,710\nBut other than that, yeah,\nyou don't really deal with it directly.\n\n1533\n01:06:43,710 --> 01:06:47,570\n>> Yeah so if I get connected into my,\nlet's see, I probably want to do like,\n\n1534\n01:06:47,570 --> 01:06:48,490\nmy configurate.\n\n1535\n01:06:48,490 --> 01:06:51,350\nWell, actually, is this going to see it?\n\n1536\n01:06:51,350 --> 01:06:54,110\nShoot, I always get confused whether\nthis is going to see it or not.\n\n1537\n01:06:54,110 --> 01:06:59,210\nBut when you start to drill into here\nyou'll be able to see your partitions.\n\n1538\n01:06:59,210 --> 01:07:00,446\nThis should be right here.\n\n1539\n01:07:02,447 --> 01:07:03,770\nWell, I'm just going to\ngive them silly names.\n\n1540\n01:07:03,770 --> 01:07:05,960\nIt's going to make it harder for\nme to recognize them.\n\n1541\n01:07:05,960 --> 01:07:07,620\nBut looking at my partitions.\n\n1542\n01:07:07,620 --> 01:07:09,770\n>> That very first one\nis your domain DNS zone.\n\n1543\n01:07:09,770 --> 01:07:11,500\n>> And there's my forest DNS zones.\n\n1544\n01:07:11,500 --> 01:07:12,330\nSo I can spot them.\n\n1545\n01:07:12,330 --> 01:07:13,600\n>> So, they're there.\n\n1546\n01:07:13,600 --> 01:07:17,720\nAt a minimum you've got three partitions,\nyour schema, your configuration,\n\n1547\n01:07:17,720 --> 01:07:22,030\nand your domain and with the DNS\nwe're just adding two more, right?\n\n1548\n01:07:22,030 --> 01:07:23,700\n>> Yep.\n>> And as you install other\n\n1549\n01:07:23,700 --> 01:07:27,440\nproducts you may get even more partitions\ndepending on what you want in there.\n\n1550\n01:07:27,440 --> 01:07:31,840\nIf you're running like, GFI land fax, it\ncreates it's own partition now and yeah,\n\n1551\n01:07:31,840 --> 01:07:33,160\nit does all sorts of crazy things.\n\n1552\n01:07:33,160 --> 01:07:37,590\nSo different products may build in more\nbut at a minimum you'll have three and\n\n1553\n01:07:37,590 --> 01:07:40,260\nthen here we can see Redeanis has just\nadded two more and they get nice,\n\n1554\n01:07:40,260 --> 01:07:44,480\neasy to use names, and that's because it's\ntrying to not overlap with other stuff.\n\n1555\n01:07:44,480 --> 01:07:50,070\nAll right, so real easy to\nconvert that but just be aware.\n\n1556\n01:07:50,070 --> 01:07:54,180\nIf you have an exam question, and\nit's talking about how they just migrated\n\n1557\n01:07:54,180 --> 01:07:58,910\nfrom Windows 2000, don't assume that\nthe DNS zones are in the right partition.\n\n1558\n01:07:58,910 --> 01:08:01,840\nIt may be part of your design that\nyou've got to change that and\n\n1559\n01:08:01,840 --> 01:08:04,050\nget them moved over to\nthe correct partition.\n\n1560\n01:08:04,050 --> 01:08:08,033\nI shouldn't say correct, they'll run just\nfine the other way, it's just you're\n\n1561\n01:08:08,033 --> 01:08:11,678\nreplicating unnecessary data between\n>> A more efficient location for that.\n\n1562\n01:08:11,678 --> 01:08:13,574\n>> I'm sure that ties into less\nadministrative effort somehow.\n\n1563\n01:08:13,574 --> 01:08:21,020\n>> [LAUGH] Yeah right, somehow or other.\n\n1564\n01:08:21,020 --> 01:08:24,480\n>> IPv6 was the most\npainless thing to move to.\n\n1565\n01:08:24,480 --> 01:08:28,630\nMike, what do we need to do to our\nDNS server to get it to support IPv6?\n\n1566\n01:08:28,630 --> 01:08:30,820\n>> Well first you're going to\nhave to do absolutely nothing.\n\n1567\n01:08:30,820 --> 01:08:31,781\n>> There's that.\n\n1568\n01:08:31,781 --> 01:08:34,340\n[LAUGH]\n>> Just like DHCP,\n\n1569\n01:08:34,340 --> 01:08:36,830\nDNS fully supports IPv6.\n\n1570\n01:08:36,830 --> 01:08:40,110\nA couple of differences maybe in\nsome of the names of the records.\n\n1571\n01:08:40,110 --> 01:08:42,380\nThat ridiculous quad A name.\n\n1572\n01:08:42,380 --> 01:08:47,760\nI understand the logic behind it but\nit's kind of a pain to say AAAA record.\n\n1573\n01:08:47,760 --> 01:08:49,544\nBut yeah DNS fully supports IPv6.\n\n1574\n01:08:49,544 --> 01:08:52,527\nYou can have your A records for\nyour IPv4 host records.\n\n1575\n01:08:52,527 --> 01:08:55,291\nYou've got your quad A records or\nyour AAAA,\n\n1576\n01:08:55,291 --> 01:08:58,947\nbecause it's four times the bit space,\nright, for that.\n\n1577\n01:08:58,947 --> 01:09:03,430\nBut those are going to be your IPv6\nrecords and when you're query DNS,\n\n1578\n01:09:03,430 --> 01:09:07,180\nif it has A records and\nquad A records it returns them all.\n\n1579\n01:09:07,180 --> 01:09:11,991\nLike, when I say hey, whats the IP\naddress of server 14.itpro.tv?\n\n1580\n01:09:11,991 --> 01:09:16,770\nIf it has both A and Quad A, it gives\n'em all back to you in the response.\n\n1581\n01:09:16,770 --> 01:09:20,600\nYour application is gonna determine\nwhether it's using the IPv4 or\n\n1582\n01:09:20,600 --> 01:09:21,660\nthat IPv6 address.\n\n1583\n01:09:21,660 --> 01:09:23,330\nSo really no difference.\n\n1584\n01:09:23,330 --> 01:09:28,440\nSupports dynamic updates,\njust like our IPv4 addresses do.\n\n1585\n01:09:28,440 --> 01:09:31,130\nI really can't think of any major\ndifferences with it, other than that.\n\n1586\n01:09:31,130 --> 01:09:33,320\n>> All right, so\nthat one's pretty straight forward,\n\n1587\n01:09:33,320 --> 01:09:35,410\nnot a lot of planning\nreally required there.\n\n1588\n01:09:35,410 --> 01:09:36,600\n>> No.\n\n1589\n01:09:36,600 --> 01:09:37,960\n>> It is pretty straight forward.\n\n1590\n01:09:37,960 --> 01:09:40,755\nThe only real planning we have\nto do is handing out the DNS\n\n1591\n01:09:40,755 --> 01:09:45,585\nservers to our clients, which if\nyou're using DHCPv6 is easy enough.\n\n1592\n01:09:45,585 --> 01:09:48,995\nIf you're not using DHCPv6,\nhow can you hand out DNS servers?\n\n1593\n01:09:48,995 --> 01:09:50,805\nWell, you can do a group policy object.\n\n1594\n01:09:50,805 --> 01:09:54,000\nYou can use a GPO to push\nout DNS servers that way or\n\n1595\n01:09:54,000 --> 01:09:55,050\nyou can statically assign them.\n\n1596\n01:09:55,050 --> 01:09:56,940\nThat's less pleasant but it does work.\n\n1597\n01:09:56,940 --> 01:10:00,210\nAll right, the next exam objective though,\nis something that's a little\n\n1598\n01:10:00,210 --> 01:10:03,790\nmore involved, and\nthat's the single label names.\n\n1599\n01:10:03,790 --> 01:10:05,240\nRight, or single name.\n\n1600\n01:10:05,240 --> 01:10:05,920\nNo, single label name.\n\n1601\n01:10:05,920 --> 01:10:08,590\n>> Single label name, or\nthe single label name resolution and\n\n1602\n01:10:08,590 --> 01:10:12,060\nits global names Zones, I think,\nis what we end up creating.\n\n1603\n01:10:12,060 --> 01:10:14,930\n>> This is another one of\nthose legacy technologies.\n\n1604\n01:10:14,930 --> 01:10:16,260\nBack in the day, right?\n\n1605\n01:10:16,260 --> 01:10:17,480\nBack in the Windows 3.1 day,\n\n1606\n01:10:17,480 --> 01:10:22,180\nall of our communications were\nreally sent over NetBIOS.\n\n1607\n01:10:22,180 --> 01:10:26,010\nAnd NetBIOS used single names\nto reference a machine.\n\n1608\n01:10:26,010 --> 01:10:29,910\nSo in other words this machine in front\nof me is called a Don laptop one.\n\n1609\n01:10:30,970 --> 01:10:31,490\nThat's it.\n\n1610\n01:10:31,490 --> 01:10:32,990\nThat's what the name was,\nit's just a single name.\n\n1611\n01:10:32,990 --> 01:10:34,880\nThere was no domain attached to it, right.\n\n1612\n01:10:34,880 --> 01:10:37,220\nIt wasn't a fully qualified domain name.\n\n1613\n01:10:37,220 --> 01:10:41,290\nThat's a problem when you have\nbig networks, tons of hosts.\n\n1614\n01:10:41,290 --> 01:10:42,240\nHow do you manage that?\n\n1615\n01:10:42,240 --> 01:10:46,430\nWhen you've got 10,000 machines, you can't\nhave two machines with the same names,\n\n1616\n01:10:46,430 --> 01:10:48,920\neven though they're in completely\ndifferent buildings right?\n\n1617\n01:10:48,920 --> 01:10:50,020\n>> Yeah, right.\nJust not gonna work.\n\n1618\n01:10:50,020 --> 01:10:52,028\nNot a very scalable\nsolution is the problem.\n\n1619\n01:10:52,028 --> 01:10:57,050\n>> Yeah, so that model, NetBIOS was\nthe protocol that did the lookup set, but\n\n1620\n01:10:57,050 --> 01:11:01,916\nthe actual lookup server was WINS,\nthe Windows Internet Naming System,\n\n1621\n01:11:01,916 --> 01:11:05,980\nAnd WINS would just do a single\nname to an IP address.\n\n1622\n01:11:05,980 --> 01:11:09,060\nWell, DNS doesn't do just a single name.\n\n1623\n01:11:09,060 --> 01:11:10,430\nIt does a fully qualified name and\n\n1624\n01:11:10,430 --> 01:11:13,730\nexpects a host name and\na domain name to resolve that to an IP.\n\n1625\n01:11:13,730 --> 01:11:17,840\nSo how do we handle that in our new world,\nwhere we're very DNS centric?\n\n1626\n01:11:17,840 --> 01:11:22,500\nWe might have software that is written\nthat only does a single name lookup.\n\n1627\n01:11:22,500 --> 01:11:24,330\nSo what happens from there?\n\n1628\n01:11:24,330 --> 01:11:28,430\nWell your host OS tries to fix that by\nsaying, if you do a single name lookup\n\n1629\n01:11:28,430 --> 01:11:31,730\nhere's a DNS suffix that I'll\njust stick on the end and try it.\n\n1630\n01:11:31,730 --> 01:11:35,630\nAssuming you're using DNS, but if your\nclient's not even trying to use DNS,\n\n1631\n01:11:35,630 --> 01:11:39,430\nif it's just throwing this name out like\nit can get to it which happens a lot.\n\n1632\n01:11:39,430 --> 01:11:40,481\nSomebody does // and\n\n1633\n01:11:40,481 --> 01:11:44,110\na single name, that's the old\nNetBIOS way of browsing the things.\n\n1634\n01:11:44,110 --> 01:11:48,065\nWhen you do that, you need some other kind\nof mechanism to step in and solve the day,\n\n1635\n01:11:48,065 --> 01:11:51,660\ncuz DNS suffixes might not be in place.\n\n1636\n01:11:51,660 --> 01:11:52,990\nIt might not work.\n\n1637\n01:11:52,990 --> 01:11:55,250\nAnd a single label name will do that.\n\n1638\n01:11:55,250 --> 01:11:58,350\n>> Also it happens when we\ngot multi-domain force.\n\n1639\n01:11:58,350 --> 01:12:02,508\nIf we look at the way your clients resolve\nthose names, it's gonna assume that 80,\n\n1640\n01:12:02,508 --> 01:12:06,580\n90% of the resources you're trying to\nconnect to are in the same domain as you.\n\n1641\n01:12:06,580 --> 01:12:11,310\nSo if you type in a single label name,\nit takes your machine's own DNS suffix,\n\n1642\n01:12:11,310 --> 01:12:12,530\ntacks it on the end.\n\n1643\n01:12:12,530 --> 01:12:15,960\nWe've talked about the devolution\nprocess where we can drop off\n\n1644\n01:12:15,960 --> 01:12:17,910\none part of the name at a time.\n\n1645\n01:12:17,910 --> 01:12:21,214\nTrying to resolve it which will work\nmy way up that domain tree within my\n\n1646\n01:12:21,214 --> 01:12:22,064\nforest, right?\n\n1647\n01:12:22,064 --> 01:12:25,657\nSo up from the child domain to\nthe parent domain and on up, but\n\n1648\n01:12:25,657 --> 01:12:28,903\nI'm never going to be able\nto jump over to other trees.\n\n1649\n01:12:28,903 --> 01:12:34,247\nWhich is another time, again, a way we\ncan do single labels across multiple name\n\n1650\n01:12:34,247 --> 01:12:39,380\nspaces or multiple trees there as where\nthese global names are gonna come in.\n\n1651\n01:12:39,380 --> 01:12:42,590\nAnd it allows us to do something very\nsimilar to what that net bios did.\n\n1652\n01:12:42,590 --> 01:12:46,030\nWe basically create aliases\nwithin the global name zone.\n\n1653\n01:12:46,030 --> 01:12:49,890\nThe alias are c name records, just like\nwe create in our normal DNS partitions.\n\n1654\n01:12:49,890 --> 01:12:54,293\nWe create a c name record and\nthat's gonna play back to an FQDN.\n\n1655\n01:12:54,293 --> 01:12:59,121\nThere's companies that like\ntheir users to be able to type\n\n1656\n01:12:59,121 --> 01:13:02,676\nin http://companycalendar, right?\n\n1657\n01:13:02,676 --> 01:13:03,887\n>> Intranet.\n>> Yeah, exactly, and\n\n1658\n01:13:03,887 --> 01:13:07,820\nI wanna be able to do that from any\ndomain, no matter what domain I'm in,\n\n1659\n01:13:07,820 --> 01:13:12,740\nin my company as that's where these global\nname zones can really come into play.\n\n1660\n01:13:12,740 --> 01:13:17,470\nNow one of the big problems\nwith these single named labels\n\n1661\n01:13:17,470 --> 01:13:19,990\nis that if it was software\nthat was written to do it,\n\n1662\n01:13:19,990 --> 01:13:22,505\nit's really got to be able to\nunderstand that's happening.\n\n1663\n01:13:22,505 --> 01:13:24,220\n>> Yes.\n>> And for most people,\n\n1664\n01:13:24,220 --> 01:13:28,990\nwhen this was originally released, the\neffort it took to get your software aware\n\n1665\n01:13:28,990 --> 01:13:32,320\nof that, was the same effort it took\nto just make it us DNS instead.\n\n1666\n01:13:32,320 --> 01:13:32,847\n>> Right, yeah.\n\n1667\n01:13:32,847 --> 01:13:35,736\n>> And so, the majority of software\nprograms out there have been switched to\n\n1668\n01:13:35,736 --> 01:13:37,260\nbe able to do that.\n\n1669\n01:13:37,260 --> 01:13:41,670\nBut the scenario that you might see on the\nexam is something like, there's a software\n\n1670\n01:13:41,670 --> 01:13:47,280\napplication that's no longer supported,\nand requires single name lookups, right?\n\n1671\n01:13:47,280 --> 01:13:51,556\nIn that scenario, you can't update the\napplication, it's no longer supported, but\n\n1672\n01:13:51,556 --> 01:13:55,801\nyou still need it to function, and that's\nexactly where single name lookups come in.\n\n1673\n01:13:55,801 --> 01:14:00,764\nIt's a stopgap, it's just a momentary\nBand-Aid you can use while you go and\n\n1674\n01:14:00,764 --> 01:14:02,300\nfind better software.\n\n1675\n01:14:02,300 --> 01:14:03,745\nSoftware that doesn't suck.\n\n1676\n01:14:03,745 --> 01:14:07,720\n[LAUGH] And that really is,\nsadly, what it boils down too.\n\n1677\n01:14:07,720 --> 01:14:10,580\nIf that software is no longer supported,\nit's time to replace this.\n\n1678\n01:14:10,580 --> 01:14:12,960\nSo, you gotta get in and\nfind that replacement.\n\n1679\n01:14:12,960 --> 01:14:17,560\n>> So yeah, it's just a means to migrate\nfrom an environment that relies on NetBIOS\n\n1680\n01:14:17,560 --> 01:14:20,830\nand Wins over to a full DNS solution.\n\n1681\n01:14:20,830 --> 01:14:24,300\nAnd then I can decommission my Wins\nservers and turn off NetBIOS and\n\n1682\n01:14:24,300 --> 01:14:26,340\nall that nasty broadcast it generates.\n\n1683\n01:14:26,340 --> 01:14:27,130\n>> So, for most of us,\n\n1684\n01:14:27,130 --> 01:14:31,080\nif we're designing a new network, this is\nnot even gonna be a blip on our radar.\n\n1685\n01:14:31,080 --> 01:14:31,780\nAll right?\n\n1686\n01:14:31,780 --> 01:14:33,130\nBut if we have a requirement for\n\n1687\n01:14:33,130 --> 01:14:37,230\nsupporting old single name look up\napplications, this is a resource for us.\n\n1688\n01:14:37,230 --> 01:14:42,030\nOne key thing to remember is that\na DNS server can only have one single\n\n1689\n01:14:42,030 --> 01:14:44,115\nname pool or zone, right?\n\n1690\n01:14:44,115 --> 01:14:45,850\nCuz it's a single name,\nhow can you have more than one?\n\n1691\n01:14:45,850 --> 01:14:47,060\nHow would you tell them apart?\n\n1692\n01:14:47,060 --> 01:14:50,796\nSo there is some balancing act that has to\nbe performed between providing this across\n\n1693\n01:14:50,796 --> 01:14:53,900\nto your entire force versus\na single domain and so on.\n\n1694\n01:14:53,900 --> 01:14:56,265\nSo you do have to be\na little particular there.\n\n1695\n01:14:56,265 --> 01:15:00,855\nYou can't have more than one single\nname zone on the same DNS server.\n\n1696\n01:15:00,855 --> 01:15:04,875\nBut if you have more than one DNS server,\nyou can do it.\n\n1697\n01:15:04,875 --> 01:15:08,910\nAll right, the last bits we have are just\nzone hierarchy and zone delegation.\n\n1698\n01:15:08,910 --> 01:15:14,300\n>> And we really cover those\npretty heavy in our DNS modules,\n\n1699\n01:15:14,300 --> 01:15:19,830\nbut again talking about planning-wise,\nare we going with a single domain?\n\n1700\n01:15:19,830 --> 01:15:22,620\nAre we gonna do child domains?\n\n1701\n01:15:22,620 --> 01:15:24,050\nOr we're gonna have separate trees?\n\n1702\n01:15:25,860 --> 01:15:28,930\nI don't know, a lot of times when I look\nat delegation, cuz if you set up and\n\n1703\n01:15:28,930 --> 01:15:33,450\nremember from our other episodes with DNS,\nyou set up your first, your forest root,\n\n1704\n01:15:33,450 --> 01:15:37,150\nright, your IGPro.tv, and\nyou put DNS in there.\n\n1705\n01:15:37,150 --> 01:15:42,780\nAs you add child domain that DNS\nserver that's in that forest root\n\n1706\n01:15:42,780 --> 01:15:47,180\nis still the authoritative DNS server,\nfor no matter how far you go to the left,\n\n1707\n01:15:47,180 --> 01:15:53,110\nwhether you add lab.itpro.tv,\noffice.itprotv, etc., etc.,\n\n1708\n01:15:53,110 --> 01:15:57,590\nthat first DNS server is authoritative for\neverything that ends in itpro.tv.\n\n1709\n01:15:57,590 --> 01:16:01,090\nThat as I grow, could become\nquite a workload on that server.\n\n1710\n01:16:01,090 --> 01:16:05,360\nThose DNS servers up there in that\nroot are providing DNS resolution for\n\n1711\n01:16:05,360 --> 01:16:06,800\nthe entire forest.\n\n1712\n01:16:06,800 --> 01:16:10,810\nThat's gonna be a large workload,\ncould also be for administrative purposes.\n\n1713\n01:16:10,810 --> 01:16:16,530\nWhat if the people in office.itpro.tv\nwant to manage their own DNS zone.\n\n1714\n01:16:16,530 --> 01:16:18,520\nWe can delegate the authority away.\n\n1715\n01:16:18,520 --> 01:16:21,410\nAnd I don't know we covered that\nconcept in our other classes, but\n\n1716\n01:16:21,410 --> 01:16:25,690\nwe can delegate a portion of the name\nspace to another DNS server.\n\n1717\n01:16:25,690 --> 01:16:27,840\nAnd all we're doing is\na very simple wizard.\n\n1718\n01:16:27,840 --> 01:16:28,715\nYou right click, delegate,\n\n1719\n01:16:28,715 --> 01:16:31,790\nyou give it the name space tell it who\nthe new authoritative server's gonna be.\n\n1720\n01:16:31,790 --> 01:16:33,500\nMaintains a pointer to that server and\n\n1721\n01:16:33,500 --> 01:16:36,900\nthen it can forward those queries\non to that particular DNS server.\n\n1722\n01:16:36,900 --> 01:16:38,810\n>> Let me give you a couple of\nscenarios of how this might\n\n1723\n01:16:38,810 --> 01:16:40,600\nplay out in a production environment.\n\n1724\n01:16:40,600 --> 01:16:43,760\nI've kinda whipped up a hierarchy\nhere of just a fictitious company.\n\n1725\n01:16:43,760 --> 01:16:48,250\nSo we got company.com,\nthat would be our public DNS name, right?\n\n1726\n01:16:48,250 --> 01:16:51,490\nSo, my customers go to www.company.com or\n\n1727\n01:16:51,490 --> 01:16:53,850\nwhatever, that's what's gonna\nbe facing the Internet.\n\n1728\n01:16:53,850 --> 01:16:57,560\nI'll probably have that hosted\non public DNS servers, right?\n\n1729\n01:16:57,560 --> 01:16:58,690\nThey may be ones that I manage.\n\n1730\n01:16:58,690 --> 01:17:01,270\nThey may through some DNS registrar,\nright?\n\n1731\n01:17:01,270 --> 01:17:05,376\nA register.com, or hover.com, Geotrust,\nwhoever it is that I bought my domain\n\n1732\n01:17:05,376 --> 01:17:09,520\nthrough, so it may be someone completely\noutside of my company, right?\n\n1733\n01:17:09,520 --> 01:17:16,695\nThen inside of my company, maybe I have\nmultiple subdomains like na.company.com,\n\n1734\n01:17:16,695 --> 01:17:20,650\nthat might be one tree in my forest for\nmy North American division.\n\n1735\n01:17:20,650 --> 01:17:21,235\n>> Mm-hm.\n>> And\n\n1736\n01:17:21,235 --> 01:17:24,785\nI have another tree in my forest for\neu.company.com.\n\n1737\n01:17:24,785 --> 01:17:27,177\nThese are separate domains.\n\n1738\n01:17:27,177 --> 01:17:29,587\nSeparate trees in the same forest.\n\n1739\n01:17:29,587 --> 01:17:34,137\nSo I'll have separate DNS servers for\nthem, hosting there, thereselves, right.\n\n1740\n01:17:34,137 --> 01:17:37,987\nBut, I'll need to make sure that I set\nup my forwarders so that when we go and\n\n1741\n01:17:37,987 --> 01:17:42,253\ndo look ups against these, if somebody\ndoesn't Lookup against eu.company.com,\n\n1742\n01:17:42,253 --> 01:17:47,273\nagainst the DNS server here, and they're\nlooking for my workstation up in NA.\n\n1743\n01:17:47,273 --> 01:17:50,783\nI need it to know to forward\nto the DNS servers here and\n\n1744\n01:17:50,783 --> 01:17:52,468\nnot to go all the way out to the internet.\n\n1745\n01:17:52,468 --> 01:17:54,033\n>> Mm-hm.\n>> And do some public lookup.\n\n1746\n01:17:54,033 --> 01:17:57,143\nSo when we start to break our\nhierarchy apart like this,\n\n1747\n01:17:57,143 --> 01:18:00,863\nhaving our DNS forwarders configured right\non our DNS servers is really important,\n\n1748\n01:18:00,863 --> 01:18:04,130\nespecially as we start breaking\ndown into even lower tiers.\n\n1749\n01:18:04,130 --> 01:18:09,290\nNow, one thing that we do get\nis if I have North America and\n\n1750\n01:18:09,290 --> 01:18:13,730\nEurope, right, entered in here as\nseparate domains, what if I want to have\n\n1751\n01:18:13,730 --> 01:18:17,530\none IT department that has\npermissions over both of them, right?\n\n1752\n01:18:17,530 --> 01:18:18,870\nOr what if I don't have that right now,\n\n1753\n01:18:18,870 --> 01:18:20,670\nwhat if I have an IT department\nin North America and\n\n1754\n01:18:20,670 --> 01:18:23,120\na separate IT department in Europe?\n\n1755\n01:18:23,120 --> 01:18:26,572\nWhich one of them gets\nto be the forest root?\n\n1756\n01:18:26,572 --> 01:18:27,151\n>> Right.\n\n1757\n01:18:27,151 --> 01:18:30,660\n>> Right, which one of them gets to\nbe that first domain in the forest?\n\n1758\n01:18:30,660 --> 01:18:33,750\nBecause whoever it is,\ngets the schema admins and\n\n1759\n01:18:33,750 --> 01:18:36,820\nenterprise admins groups,\nand that's a big deal.\n\n1760\n01:18:36,820 --> 01:18:39,700\nBecause if somebody in North America\nstarts messing with the schema,\n\n1761\n01:18:39,700 --> 01:18:41,120\nwhat does that do to Europe?\n\n1762\n01:18:41,120 --> 01:18:42,610\n>> That affects the entire forest.\n\n1763\n01:18:42,610 --> 01:18:43,960\nIt's forest wide.\n\n1764\n01:18:43,960 --> 01:18:46,170\n>> One schema for your entire forest.\n\n1765\n01:18:46,170 --> 01:18:48,800\nSo we need to protect that, and\n\n1766\n01:18:48,800 --> 01:18:54,438\na very common design to help alleviate\nthat is to do what's called a empty root.\n\n1767\n01:18:54,438 --> 01:18:58,770\nAn empty root is where we\ntake this model here, and\n\n1768\n01:18:58,770 --> 01:19:03,530\nmaybe we just move it down a little bit,\nand we introduce another tier.\n\n1769\n01:19:03,530 --> 01:19:09,868\nSo we stick another tier up here at the\ntop, and maybe I'll make that company.com.\n\n1770\n01:19:09,868 --> 01:19:14,504\nAnd under company.com,\nmaybe I make something like ad.company,\n\n1771\n01:19:14,504 --> 01:19:16,690\nor corp.company, or whatever.\n\n1772\n01:19:16,690 --> 01:19:19,110\nI'm doing ad for active directory, right?\n\n1773\n01:19:19,110 --> 01:19:22,380\nNow, all of my active domains have\nstarted to grow a little bit,\n\n1774\n01:19:22,380 --> 01:19:24,530\nwhich is kind of obnoxious.\n\n1775\n01:19:24,530 --> 01:19:29,480\nIt's not the end of the world, but\nit does get a little more ungainly, but\n\n1776\n01:19:29,480 --> 01:19:31,460\nwhat it does, it gains us something.\n\n1777\n01:19:31,460 --> 01:19:35,080\nWe get a little bit of a benefit\nfrom this model, all right.\n\n1778\n01:19:35,080 --> 01:19:37,580\nAnd let me give you\nthe real scenario here.\n\n1779\n01:19:37,580 --> 01:19:44,470\nWhen I do this, I still have North America\nand Europe as their own domains, right.\n\n1780\n01:19:44,470 --> 01:19:45,380\nSo they're still separate.\n\n1781\n01:19:45,380 --> 01:19:48,250\nI can have an IT department for\nNorth America, an IT department for EU,\n\n1782\n01:19:48,250 --> 01:19:49,750\nand they're separate.\n\n1783\n01:19:49,750 --> 01:19:55,120\nBut then I have another domain\nthat's just ad.company.com, right.\n\n1784\n01:19:55,120 --> 01:19:56,720\nThat is my forest root.\n\n1785\n01:19:57,910 --> 01:20:03,990\nInside of it, it's empty,\nexcept for enterprise admins and\n\n1786\n01:20:03,990 --> 01:20:08,410\nschema admins groups, and maybe a handful\nof user accounts that are the authorized\n\n1787\n01:20:08,410 --> 01:20:13,930\npersonnel for making schema and\nforest wide changes.\n\n1788\n01:20:13,930 --> 01:20:17,790\nOkay, so now this is not being used for\nday to day stuff.\n\n1789\n01:20:17,790 --> 01:20:21,286\nIt's really a place holder that's used for\ncontrolling authority.\n\n1790\n01:20:21,286 --> 01:20:23,503\nControlling authority for\nforest wide changes.\n\n1791\n01:20:23,503 --> 01:20:27,126\nAnd underneath it now we get that\nmore granularity of control.\n\n1792\n01:20:27,126 --> 01:20:30,846\nThis empty root model is\nreally gaining in popularity.\n\n1793\n01:20:30,846 --> 01:20:35,345\nBecause what we are starting to see is\ncompanies doing a lot of mergers and\n\n1794\n01:20:35,345 --> 01:20:36,930\nacquisitions.\n\n1795\n01:20:36,930 --> 01:20:40,840\nAnd sell offs, where you know maybe you\nsell off a portion of the company and so\n\n1796\n01:20:40,840 --> 01:20:42,070\nyou might be selling off.\n\n1797\n01:20:42,070 --> 01:20:46,830\nThe European operations for your company,\nbut not the North American portion, but\n\n1798\n01:20:46,830 --> 01:20:49,090\nif they are all being controlled\nlike if this is your forest root and\n\n1799\n01:20:49,090 --> 01:20:51,190\nthen you're kind of screwed,\nit's really hard to sell it off.\n\n1800\n01:20:51,190 --> 01:20:52,190\n>> Yeah.\n[LAUGH]\n\n1801\n01:20:52,190 --> 01:20:53,650\n>> But if your forest root is separate,\n\n1802\n01:20:53,650 --> 01:20:55,220\neven if it's empty, it makes sense.\n\n1803\n01:20:55,220 --> 01:20:58,280\nNow, there is a slight burden here\nin that you're gonna need at least\n\n1804\n01:20:58,280 --> 01:21:01,200\none server to handle that and back in\nthe physical server days, that stunk,\n\n1805\n01:21:01,200 --> 01:21:02,900\nyou had to create a physical server.\n\n1806\n01:21:02,900 --> 01:21:07,010\nBut in the days of virtual machines,\nit's not a big deal at all anymore.\n\n1807\n01:21:07,010 --> 01:21:10,480\nYou can, even in a massive company, your\nempty root might be a server with only\n\n1808\n01:21:10,480 --> 01:21:15,050\na gig of RAM associated with it, and\njust a very small VM that's a placeholder.\n\n1809\n01:21:15,050 --> 01:21:18,380\nMeanwhile, the domain controllers in\nthese subdomains are the ones that\n\n1810\n01:21:18,380 --> 01:21:20,930\nare really being busy, all right?\n\n1811\n01:21:20,930 --> 01:21:26,710\nTechnically with this model,\nI've got one forest,\n\n1812\n01:21:26,710 --> 01:21:29,365\nand I've got one tree, right?\n\n1813\n01:21:29,365 --> 01:21:31,680\nad.company.com, and\nthese guys are underneath it.\n\n1814\n01:21:31,680 --> 01:21:33,600\n>> They're all contiguous name spaces.\n\n1815\n01:21:33,600 --> 01:21:35,900\n>> We don't have to do it that way, do we?\n\n1816\n01:21:35,900 --> 01:21:40,010\nWe could take, and\nit's probably going to be a pain for\n\n1817\n01:21:40,010 --> 01:21:41,955\nme to try to select all this stuff.\n\n1818\n01:21:41,955 --> 01:21:47,300\n[LAUGH] We could take all this stuff and\nmove it like that, so now I don't have to\n\n1819\n01:21:47,300 --> 01:21:53,362\nhave this crazy AD thing which is good\nbecause North America kinda became NAD.\n\n1820\n01:21:53,362 --> 01:21:54,300\n>> [LAUGH].\n\n1821\n01:21:54,300 --> 01:21:56,420\n>> Negative connotations in U.S.\n\n1822\n01:21:56,420 --> 01:21:59,810\nEnglish at least,\nI don't what other counties, but.\n\n1823\n01:21:59,810 --> 01:22:06,630\nSo now we can kinda go back to that and we\nmight have something called root.domain,\n\n1824\n01:22:06,630 --> 01:22:09,930\nsomething completely off but\n\n1825\n01:22:09,930 --> 01:22:12,640\nwe know that's what that is,\nthat's our forest root right there.\n\n1826\n01:22:12,640 --> 01:22:15,970\nNobody's going to be in there so we don't\ncare if it has a stupid name, right?\n\n1827\n01:22:15,970 --> 01:22:17,260\nAnd so there it is.\n\n1828\n01:22:17,260 --> 01:22:22,180\nOr maybe we call it root.company.com,\nif we wanna you know,\n\n1829\n01:22:22,180 --> 01:22:26,830\nat least have it fall within the range\nof our normal domain zones or whatever.\n\n1830\n01:22:26,830 --> 01:22:28,340\nSo, it's still empty.\n\n1831\n01:22:28,340 --> 01:22:31,060\nI still am not gonna be putting\na bunch of users in there.\n\n1832\n01:22:31,060 --> 01:22:33,090\nBut it's there, it's in place.\n\n1833\n01:22:33,090 --> 01:22:34,950\nAnd now,\nI've got that central placeholder.\n\n1834\n01:22:34,950 --> 01:22:38,340\nSo as you come up with your design,\n\n1835\n01:22:38,340 --> 01:22:42,230\nmaking this type of a decision\non day one is super easy.\n\n1836\n01:22:42,230 --> 01:22:45,030\nAnd it gives you a lot of\nflexibility going forward.\n\n1837\n01:22:45,030 --> 01:22:47,830\nMaking this decision on day 720?\n\n1838\n01:22:47,830 --> 01:22:48,910\nThat's a nightmare.\n\n1839\n01:22:48,910 --> 01:22:50,750\n>> Not so fun at all.\n\n1840\n01:22:50,750 --> 01:22:53,270\n>> That is really, really difficult\nto change something like this.\n\n1841\n01:22:53,270 --> 01:22:56,200\nJust changing your forest\nroot is really hard.\n\n1842\n01:22:56,200 --> 01:22:58,370\nRenaming your forest\nroot is not a big deal.\n\n1843\n01:22:58,370 --> 01:23:00,920\nBut if it's already got\nchildren underneath it,\n\n1844\n01:23:00,920 --> 01:23:02,640\nyou can't just like move those off.\n\n1845\n01:23:02,640 --> 01:23:05,520\nThat's really really difficult\nto change your domain hierarchy.\n\n1846\n01:23:05,520 --> 01:23:08,210\nSo, a good plan from day one is important.\n\n1847\n01:23:09,290 --> 01:23:10,890\nAnd this is a pretty\naccepted model right here.\n\n1848\n01:23:10,890 --> 01:23:15,150\nSo, it's called an empty root model,\nand expect to see it on the exam.\n\n1849\n01:23:15,150 --> 01:23:15,650\n>> Yeah, absolutely.\n\n1850\n01:23:17,940 --> 01:23:21,380\n>> Alright, so zone hierarchies,\nzone delegation, that's pretty much it.\n\n1851\n01:23:21,380 --> 01:23:24,720\nRemember that this whole model\nthat I just diagramed right here,\n\n1852\n01:23:24,720 --> 01:23:27,880\nI could be hosting that all on\none DNS server if I wanted.\n\n1853\n01:23:27,880 --> 01:23:30,390\n>> Right.\n>> If I had DNS being replicated across\n\n1854\n01:23:30,390 --> 01:23:33,570\nthe forest, this could be identical\nacross my entire environment.\n\n1855\n01:23:33,570 --> 01:23:36,970\nOr I can have separate DNS servers for\nevery single tier of this, and\n\n1856\n01:23:36,970 --> 01:23:41,220\nthat's where the delegations really\ncome in handy because company.com,\n\n1857\n01:23:41,220 --> 01:23:44,740\nthose DNS servers are on the internet and\nthen root.company.com.\n\n1858\n01:23:44,740 --> 01:23:47,030\nI don't want that everywhere, and\nthen, you know, North America, so\n\n1859\n01:23:47,030 --> 01:23:48,650\nit all starts to break down from there.\n\n1860\n01:23:48,650 --> 01:23:53,410\nSo just understand that you can break this\ninto as many pieces as you need to suit\n\n1861\n01:23:53,410 --> 01:23:55,010\nyour environment.\n\n1862\n01:23:55,010 --> 01:23:59,670\nBut keep in mind that as you start to\nspread out geographically, the latency of\n\n1863\n01:23:59,670 --> 01:24:03,310\ndoing lookups between geographic regions\nstarts to create a bit of a burden.\n\n1864\n01:24:03,310 --> 01:24:08,270\nSo having caches, having DNS forwarders\ndefined to send you to specific servers,\n\n1865\n01:24:08,270 --> 01:24:10,890\nthat becomes really important for\noptimal lookup performance.\n\n1866\n01:24:10,890 --> 01:24:11,390\n>> Absolutely.\n\n1867\n01:24:12,520 --> 01:24:14,960\n>> Especially if you have global\ncatalogs and all that good stuff.\n\n1868\n01:24:14,960 --> 01:24:16,790\nThey need to be able to find\ntheir destinations quickly.\n\n1869\n01:24:18,450 --> 01:24:21,810\nAll right, Mike, I think I talked\na little more on DNS than I planned.\n\n1870\n01:24:21,810 --> 01:24:23,980\nCan you think of anything\nelse to throw in?\n\n1871\n01:24:23,980 --> 01:24:25,260\n>> Well,\nI think we covered that pretty well and\n\n1872\n01:24:25,260 --> 01:24:27,410\nthat's going to bring us up into IPAM.\n\n1873\n01:24:27,410 --> 01:24:30,383\n>> All right, the last thing we have for\nthis show is IPAM,\n\n1874\n01:24:30,383 --> 01:24:34,308\nwhich is the IP Address Management and\nso we'll get a chance to see that but\n\n1875\n01:24:34,308 --> 01:24:37,691\nlet's stop here and take a break,\nwe'll pick back up in a few.\n\n1876\n01:24:37,691 --> 01:24:45,238\n[MUSIC]\n\n1877\n01:24:45,238 --> 01:24:48,280\nAlright, welcome back everybody.\n\n1878\n01:24:48,280 --> 01:24:51,460\nSo for our final segment,\nwe're gonna take a look at IPAM, right.\n\n1879\n01:24:51,460 --> 01:24:52,990\nOur IP address management.\n\n1880\n01:24:54,000 --> 01:24:54,694\nIt's a neat service.\n\n1881\n01:24:54,694 --> 01:24:57,631\nIt was introduced in 2012, right?\n\n1882\n01:24:57,631 --> 01:25:00,462\nWas it?\nOkay, so it's not brand new, but\n\n1883\n01:25:00,462 --> 01:25:05,150\nintroduced in 2012,\nupdated in R2 to add some new features.\n\n1884\n01:25:05,150 --> 01:25:05,690\n>> Right.\n\n1885\n01:25:05,690 --> 01:25:08,120\n>> And it's definitely something\nthat we need to plan for\n\n1886\n01:25:08,120 --> 01:25:09,980\nwhen we go to deploy it into a network.\n\n1887\n01:25:09,980 --> 01:25:13,616\nThere's certain design elements\nthat come into effect and\n\n1888\n01:25:13,616 --> 01:25:16,024\nI know we covered this in was it 411?\n\n1889\n01:25:16,024 --> 01:25:16,587\n>> 412.\n\n1890\n01:25:16,587 --> 01:25:18,670\nAnd it goes into IPAM, yep.\n\n1891\n01:25:18,670 --> 01:25:23,005\n>> But in that show we really just\ndid a simple deployment like a single\n\n1892\n01:25:23,005 --> 01:25:27,890\nIPAM managing a single domain and\nthat's fine, that works, and\n\n1893\n01:25:27,890 --> 01:25:28,870\neverything we do is accurate.\n\n1894\n01:25:28,870 --> 01:25:31,280\nBut what if you have multiple domains?\n\n1895\n01:25:31,280 --> 01:25:33,010\nWhat if you have a larger environment?\n\n1896\n01:25:33,010 --> 01:25:35,130\nThe IPAM model starts to break down a bit.\n\n1897\n01:25:35,130 --> 01:25:36,460\nOr at least the way we showed it.\n\n1898\n01:25:36,460 --> 01:25:39,930\nSo there's certain considerations\nwe need to have in larger networks,\n\n1899\n01:25:39,930 --> 01:25:41,810\nand that's what we're\ngonna take a look at here.\n\n1900\n01:25:41,810 --> 01:25:42,770\nAll right?\n\n1901\n01:25:42,770 --> 01:25:45,350\nFirst off, let's just kind of break\ndown some of the deployment issues\n\n1902\n01:25:45,350 --> 01:25:45,920\nthat we bump into.\n\n1903\n01:25:45,920 --> 01:25:47,575\n.\nAnd the different ways of deploying IPAM.\n\n1904\n01:25:47,575 --> 01:25:48,560\nMm-hm.\n\n1905\n01:25:48,560 --> 01:25:51,800\nYeah, when you go to provision, when you\nfirst set up IPAM, it's gotta go out and\n\n1906\n01:25:51,800 --> 01:25:54,550\nit's got to discover the servers\nthat you're gonna manage.\n\n1907\n01:25:54,550 --> 01:25:55,210\nAnd as Don was saying,\n\n1908\n01:25:55,210 --> 01:25:59,510\na big part of this is planning on\nwho's gonna be doing that management?\n\n1909\n01:25:59,510 --> 01:26:02,830\nAre we going to be setting up\nmanagement from a central location or\n\n1910\n01:26:02,830 --> 01:26:03,740\nfrom the different sites?\n\n1911\n01:26:03,740 --> 01:26:07,580\nBut, somehow,\nI've gotta provision those servers.\n\n1912\n01:26:07,580 --> 01:26:09,430\nIn other words,\nI've gotta get those servers,\n\n1913\n01:26:09,430 --> 01:26:12,990\nI've got to tell them what IPAM\nserver they're supposed to report to.\n\n1914\n01:26:12,990 --> 01:26:16,010\nThat involves installing\nan agent on those machines.\n\n1915\n01:26:16,010 --> 01:26:17,730\nAnd we're talking about our DNS servers,\n\n1916\n01:26:17,730 --> 01:26:22,350\nour DHCP servers, our domain controllers\nand our network policy servers.\n\n1917\n01:26:22,350 --> 01:26:24,640\nThese are the ones that I\ncan manage through IPAM.\n\n1918\n01:26:24,640 --> 01:26:26,670\nAnd by far the best, I think the best,\n\n1919\n01:26:26,670 --> 01:26:30,500\none of the easiest ways to do\nit Is through group policy.\n\n1920\n01:26:30,500 --> 01:26:33,100\nAs we go through the installation\nof that IPAM and\n\n1921\n01:26:33,100 --> 01:26:37,330\nwe go to configure it,\nwe're going to create a GPO prefix.\n\n1922\n01:26:37,330 --> 01:26:40,050\nIt's going to create all\nof these GPOs necessary.\n\n1923\n01:26:40,050 --> 01:26:43,270\nThere's one for the DHCP servers,\none for the DNS servers, one for\n\n1924\n01:26:43,270 --> 01:26:45,850\nthe domain controllers, one for\nthe network policy servers.\n\n1925\n01:26:45,850 --> 01:26:48,770\nAnd then what it does is it just\nlinks them to the domain and\n\n1926\n01:26:48,770 --> 01:26:50,780\nthen it does security filtering on them,\nso\n\n1927\n01:26:50,780 --> 01:26:54,370\nthat it only applies to the servers\nthat you're trying to manage.\n\n1928\n01:26:54,370 --> 01:26:57,250\nAnd then that's going to take care\nof setting up the, installing that\n\n1929\n01:26:57,250 --> 01:27:01,880\nagent on there, configuring my firewall,\nmy remote management.\n\n1930\n01:27:01,880 --> 01:27:02,890\nAnd things like that.\n\n1931\n01:27:02,890 --> 01:27:05,420\nAnd it's that agent that\nreports back to the console.\n\n1932\n01:27:05,420 --> 01:27:09,830\nIf we don't use group policy we're\ngoing to be doing all that manually.\n\n1933\n01:27:09,830 --> 01:27:15,320\nAnd the thing you've got to remember is\nonce you choose to use group policy or\n\n1934\n01:27:15,320 --> 01:27:18,610\ndo manual provisioning,\nthat's it, you're stuck with it.\n\n1935\n01:27:18,610 --> 01:27:22,700\nYou cannot change after the fact,\nyou can't go oh you know what this manual\n\n1936\n01:27:22,700 --> 01:27:25,880\nprovisioning just sucks so\nI want to do group policy now.\n\n1937\n01:27:25,880 --> 01:27:26,590\nToo late.\n\n1938\n01:27:26,590 --> 01:27:27,170\nYou're done.\n\n1939\n01:27:27,170 --> 01:27:29,970\nSo, you gotta make sure you think\nabout how you wanna go about and\n\n1940\n01:27:29,970 --> 01:27:31,040\nprovision those services.\n\n1941\n01:27:31,040 --> 01:27:35,450\nHow I wanna go out and discover them,\nand then add them to that IPAM console.\n\n1942\n01:27:35,450 --> 01:27:39,840\n>> Yeah, and really deploying IPAM,\nit's a pretty sensitive thing and\n\n1943\n01:27:39,840 --> 01:27:41,930\na lot of people look at it and\ngo, man, it's a pain in the butt.\n\n1944\n01:27:41,930 --> 01:27:43,420\nWhy would I wanna mess with all this?\n\n1945\n01:27:43,420 --> 01:27:48,100\nBut the reward, right risk versus reward,\nwhatever, effort versus reward,\n\n1946\n01:27:48,100 --> 01:27:52,920\nis pretty high because if you have\na legal requirement in your organization\n\n1947\n01:27:52,920 --> 01:27:57,970\nto track who is using what IP address\nat what time, IPAM is the solution.\n\n1948\n01:27:57,970 --> 01:28:00,550\nSo sure, we got some headaches that\nwe gotta deal with, but once it's in\n\n1949\n01:28:00,550 --> 01:28:05,670\nplace it fulfills that legal requirement\nand this is a complex set of things.\n\n1950\n01:28:05,670 --> 01:28:08,560\nThere's a lot of different stuff\nthat we have to monitor to find\n\n1951\n01:28:08,560 --> 01:28:10,850\nout who is actually using IPs when.\n\n1952\n01:28:10,850 --> 01:28:13,360\nIt's not the easiest thing\nin the world and with\n\n1953\n01:28:13,360 --> 01:28:16,905\nany new product from Microsoft it takes\na little while to work the kinks out.\n\n1954\n01:28:16,905 --> 01:28:18,566\n>> Mm-hm.\n>> So it's actually gotten better in\n\n1955\n01:28:18,566 --> 01:28:19,271\n2012 R2.\n\n1956\n01:28:19,271 --> 01:28:19,893\n>> It has.\n\n1957\n01:28:19,893 --> 01:28:22,291\n>> I'm sure it'll be\nbetter in server 2015.\n\n1958\n01:28:22,291 --> 01:28:23,732\nOr whatever the next one is.\n\n1959\n01:28:23,732 --> 01:28:27,638\nSo it's still advancing and improving,\nbut it is a pretty good product.\n\n1960\n01:28:27,638 --> 01:28:28,242\n>> It is.\n\n1961\n01:28:28,242 --> 01:28:31,789\nAnd it just lets us You know that\nreally helps, as his name implies,\n\n1962\n01:28:31,789 --> 01:28:33,108\nIP address management.\n\n1963\n01:28:33,108 --> 01:28:36,828\nI've worked on several networks where,\nhow did you manage your IP allocation?\n\n1964\n01:28:36,828 --> 01:28:38,186\n>> Excel spreadsheet.\n\n1965\n01:28:38,186 --> 01:28:40,890\n[LAUGH]\n>> Yeah, exactly and then you really\n\n1966\n01:28:40,890 --> 01:28:43,900\nhope that your other administrators,\nhey I'm gonna go grab, I'm gonna go set up\n\n1967\n01:28:43,900 --> 01:28:47,660\na new print server, statically map it,\nthey grab an IP address.\n\n1968\n01:28:47,660 --> 01:28:51,090\nThey forget to go update the spreadsheet,\nnobody knows that IP address is in use,\n\n1969\n01:28:51,090 --> 01:28:52,250\nsomebody else tries to use it.\n\n1970\n01:28:52,250 --> 01:28:53,980\nIt was really a pain in the butt.\n\n1971\n01:28:53,980 --> 01:28:55,200\nThis centralizes all that.\n\n1972\n01:28:55,200 --> 01:28:56,170\nAnd it does it all for you.\n\n1973\n01:28:56,170 --> 01:28:57,170\nAnd it goes and reaches out.\n\n1974\n01:28:57,170 --> 01:28:59,130\nAnd as we saw in 412,\n\n1975\n01:28:59,130 --> 01:29:03,150\nit's pretty powerful stuff cuz once I\nget this done I can create new scopes,\n\n1976\n01:29:03,150 --> 01:29:07,018\nI can create DNS records,\nI can find available IP addresses.\n\n1977\n01:29:07,018 --> 01:29:09,020\n>> Mm-hm.\n>> We can migrate scopes and\n\n1978\n01:29:09,020 --> 01:29:09,770\nthings like that.\n\n1979\n01:29:09,770 --> 01:29:11,520\nSo it's pretty impressive technology.\n\n1980\n01:29:11,520 --> 01:29:13,405\nIt is a little tricky getting it set up.\n\n1981\n01:29:13,405 --> 01:29:13,945\n>> Yeah.\n\n1982\n01:29:13,945 --> 01:29:17,055\nOr maybe you're digging through your\nlogs one day cuz some documents\n\n1983\n01:29:17,055 --> 01:29:17,730\ncame up missing.\n\n1984\n01:29:17,730 --> 01:29:20,955\n>> Mm-hm.\n>> And you find where somebody deleted\n\n1985\n01:29:20,955 --> 01:29:23,165\nthese documents, but\nthey deleted it like five weeks ago.\n\n1986\n01:29:23,165 --> 01:29:24,815\n>> Right.\n>> And so you've got a record of the IP\n\n1987\n01:29:24,815 --> 01:29:26,924\naddress but you need to know what\nmachine it was and who did it.\n\n1988\n01:29:26,924 --> 01:29:27,430\n>> Yeah.\n\n1989\n01:29:27,430 --> 01:29:30,175\n>> Well, if that's a DHCP pool address.\n\n1990\n01:29:30,175 --> 01:29:30,910\n>> Mm-hm.\n\n1991\n01:29:30,910 --> 01:29:32,470\n>> Who knows who had it at that time.\n\n1992\n01:29:32,470 --> 01:29:35,086\nAnd maybe you don't have five\nweeks of DHCP logs available.\n\n1993\n01:29:35,086 --> 01:29:35,702\n>> Right.\n>> So\n\n1994\n01:29:35,702 --> 01:29:39,630\nhaving IPAM in place to collect that\ndata's gonna fulfill that need.\n\n1995\n01:29:39,630 --> 01:29:42,000\nSo IPAM really is a security\nrelated solution,\n\n1996\n01:29:42,000 --> 01:29:44,390\nit doesn't really benefit our\nnetwork much other than that.\n\n1997\n01:29:44,390 --> 01:29:46,960\nIt's monitoring,\ngiving us that information.\n\n1998\n01:29:46,960 --> 01:29:50,155\nSo when we deploy it we've\ngotta keep security in mind.\n\n1999\n01:29:50,155 --> 01:29:50,700\n>> Mm-hm.\n\n2000\n01:29:50,700 --> 01:29:52,900\n>> In a single domain environment\nit's pretty straightforward.\n\n2001\n01:29:52,900 --> 01:29:54,975\nYou deploy one IPAM and you're done.\n\n2002\n01:29:54,975 --> 01:29:56,980\n>> Right.\n>> But in a multi-domain environment or\n\n2003\n01:29:56,980 --> 01:30:00,720\nenvironments where it's not just your\nend-users that you're monitoring but\n\n2004\n01:30:00,720 --> 01:30:02,550\nyour domain admins that you're monitoring.\n\n2005\n01:30:02,550 --> 01:30:03,900\nThings get a little more complex.\n\n2006\n01:30:03,900 --> 01:30:04,780\n>> Mm-hm.\n>> I pulled\n\n2007\n01:30:04,780 --> 01:30:06,710\nthe diagram from Microsoft's TechNet site.\n\n2008\n01:30:06,710 --> 01:30:08,220\nAnd we'll post a URL for this one.\n\n2009\n01:30:08,220 --> 01:30:10,680\nBut this is an example for\ndeployment they have.\n\n2010\n01:30:10,680 --> 01:30:14,000\nAnd basically they've got\na company headquarters up here.\n\n2011\n01:30:14,000 --> 01:30:17,070\nThey've got a data center over\nhere where the servers are, and\n\n2012\n01:30:17,070 --> 01:30:21,450\nthey've got branch and remote offices\nthat are out wherever, all right?\n\n2013\n01:30:21,450 --> 01:30:24,600\nNotice that they've deployed\nIPAM servers in each of these.\n\n2014\n01:30:24,600 --> 01:30:27,220\nWe've got an IPAM server here,\nan IPAM server here, and\n\n2015\n01:30:27,220 --> 01:30:30,360\nan IPM server up here at headquarters,\nall right?\n\n2016\n01:30:30,360 --> 01:30:33,364\nCould we manage all of this\nwith just one IPAM server?\n\n2017\n01:30:33,364 --> 01:30:34,135\n>> Mm-hm.\n>> Absolutely.\n\n2018\n01:30:34,135 --> 01:30:35,920\n>> Sure.\n>> You could, yeah.\n\n2019\n01:30:35,920 --> 01:30:41,260\nBut by having multiple ones it gives us\nthe ability to delegate out access and\n\n2020\n01:30:41,260 --> 01:30:43,080\nprovide more granular control.\n\n2021\n01:30:43,080 --> 01:30:44,630\nNotice that these are all separate.\n\n2022\n01:30:44,630 --> 01:30:50,650\nThe IPAM server here in the data center is\nconnected and managing the NPS, the domain\n\n2023\n01:30:50,650 --> 01:30:55,050\ncontrollers, the DNS servers, the DHCP\nservers, all over here in the data center.\n\n2024\n01:30:55,050 --> 01:30:55,970\nAll right.\n\n2025\n01:30:55,970 --> 01:31:00,208\nThe headquarter's IPAM server is\nalso connected to all of those.\n\n2026\n01:31:00,208 --> 01:31:00,940\n>> Mm-hm.\n>> All right?\n\n2027\n01:31:00,940 --> 01:31:04,650\nRemember that your IPAM servers\ndon't share information,\n\n2028\n01:31:04,650 --> 01:31:06,300\nthey keep it to themselves.\n\n2029\n01:31:06,300 --> 01:31:07,330\nWhy would I want that?\n\n2030\n01:31:07,330 --> 01:31:09,370\nDon't we want them to be able to share?\n\n2031\n01:31:09,370 --> 01:31:12,430\nWell, what if we're worried\nabout a domain admin down here\n\n2032\n01:31:12,430 --> 01:31:13,675\ndoing things they shouldn't be doing?\n\n2033\n01:31:13,675 --> 01:31:14,700\n>> [LAUGH]\n>> Well,\n\n2034\n01:31:14,700 --> 01:31:17,655\nthey could probably get into this IPAM\nservers and modify records couldn't they?\n\n2035\n01:31:17,655 --> 01:31:19,250\n>> Mm-hm.\n>> Sure it's a database, right.\n\n2036\n01:31:19,250 --> 01:31:21,310\nAnybody could pop in there and\nmess around with it.\n\n2037\n01:31:21,310 --> 01:31:23,780\nWell if we have a second copy up here.\n\n2038\n01:31:23,780 --> 01:31:25,010\nNow we can tell that that happened.\n\n2039\n01:31:25,010 --> 01:31:27,230\nNow we know that they've been going in and\nmodifying records.\n\n2040\n01:31:27,230 --> 01:31:27,810\n>> Exactly.\n\n2041\n01:31:27,810 --> 01:31:29,400\n>> Having a second copy,\n\n2042\n01:31:29,400 --> 01:31:32,530\na second independent copy is\nsomething that's really important,\n\n2043\n01:31:32,530 --> 01:31:35,055\nespecially if you're gonna be\nturning this over for legal review.\n\n2044\n01:31:35,055 --> 01:31:35,555\n>> Mm-hm.\n>> Right?\n\n2045\n01:31:35,555 --> 01:31:36,495\nYou really need to make\n\n2046\n01:31:36,495 --> 01:31:37,520\nsure you've got that.\n\n2047\n01:31:37,520 --> 01:31:40,100\nThey do the same thing with the branch\noffices where we may not have\n\n2048\n01:31:40,100 --> 01:31:42,290\nphysical control over that IPAM server.\n\n2049\n01:31:42,290 --> 01:31:44,420\nIf we're worried about\nthe accuracy of the data,\n\n2050\n01:31:44,420 --> 01:31:47,620\nwe may need to pull it into\na centralized location also.\n\n2051\n01:31:47,620 --> 01:31:48,500\n>> Right.\n\n2052\n01:31:48,500 --> 01:31:50,860\nYeah, so very flexible in\nthe way you wanna set it up.\n\n2053\n01:31:50,860 --> 01:31:54,680\nYou can do a centralized model,\nyou can do a distributive model, or\n\n2054\n01:31:54,680 --> 01:31:58,305\nyou can do what they call a hybrid, which\nis really when you just combine the two.\n\n2055\n01:31:58,305 --> 01:32:01,370\nRight.\nYou might have some of them, one location,\n\n2056\n01:32:01,370 --> 01:32:04,050\nmaybe you've got that data center\nthat has admins there that can.\n\n2057\n01:32:04,050 --> 01:32:07,480\nHandle their own but then your remote\noffices are part of a hierarchy that go\n\n2058\n01:32:07,480 --> 01:32:09,620\nback into that corporate office.\n\n2059\n01:32:09,620 --> 01:32:10,580\n>> Yeah.\n\n2060\n01:32:10,580 --> 01:32:11,760\nOr vice versa right?\n\n2061\n01:32:11,760 --> 01:32:13,630\nThe data center is probably\nin your headquarters.\n\n2062\n01:32:13,630 --> 01:32:16,021\nAnd so\nmaybe you have one IPAM server for that.\n\n2063\n01:32:16,021 --> 01:32:17,865\n>> Mm-hm.\n>> That's now just singular, but\n\n2064\n01:32:17,865 --> 01:32:20,090\nthen your branches each\nhave dedicated ones.\n\n2065\n01:32:20,090 --> 01:32:21,970\nIt's up to you how you wanna mix and\nmatch.\n\n2066\n01:32:21,970 --> 01:32:23,060\nTo achieve the goal.\n\n2067\n01:32:23,060 --> 01:32:25,175\nIt really comes down to trust and\nauthority.\n\n2068\n01:32:25,175 --> 01:32:26,010\n>> Yeah.\n>> Right?\n\n2069\n01:32:26,010 --> 01:32:29,540\nIf you have people who have the authority\nto be able to go in there and\n\n2070\n01:32:29,540 --> 01:32:30,665\nmodify an IPAM server.\n\n2071\n01:32:30,665 --> 01:32:31,180\n>> Mm-hm.\n\n2072\n01:32:31,180 --> 01:32:34,630\n>> But you don't trust them, [LAUGH]\nthen you're gonna need to break it.\n\n2073\n01:32:34,630 --> 01:32:36,020\nI know that sounds ridiculous.\n\n2074\n01:32:36,020 --> 01:32:37,950\nYou're, like, well,\ncan't you just terminate those employees.\n\n2075\n01:32:37,950 --> 01:32:39,530\nBut if you've ever worked for\nthe government,\n\n2076\n01:32:39,530 --> 01:32:40,922\nyou know that's not always an option.\n\n2077\n01:32:40,922 --> 01:32:41,660\n>> [LAUGH] Right.\n>> And so\n\n2078\n01:32:41,660 --> 01:32:45,980\nyou may be using this as that\nkeep them honest type thing.\n\n2079\n01:32:45,980 --> 01:32:46,530\n>> Right.\n\n2080\n01:32:46,530 --> 01:32:48,770\nAnd then maybe jump out of order\nwhile we're talking about like,\n\n2081\n01:32:48,770 --> 01:32:50,080\nsecurity and trusting things like that.\n\n2082\n01:32:50,080 --> 01:32:52,590\nAnother great thing about IPAM\nis that it's very role based.\n\n2083\n01:32:52,590 --> 01:32:57,200\nThere's several roles within IPAM that\nwe can use to delegate out permissions\n\n2084\n01:32:57,200 --> 01:33:00,930\nto certain administrators, because IPAM,\nI mean we're talking about monitoring,\n\n2085\n01:33:00,930 --> 01:33:03,740\ndepending on how we set it up, we don't\nhave to discover the domain controllers.\n\n2086\n01:33:03,740 --> 01:33:06,270\nWe can discover just the DHCP servers.\n\n2087\n01:33:06,270 --> 01:33:08,760\nOr just the DNS servers or\nwe could do all of them,\n\n2088\n01:33:08,760 --> 01:33:11,360\nthe active directory, NPS, DNS and DHCP.\n\n2089\n01:33:11,360 --> 01:33:15,050\nBut what if I want to\ngive somebody out there\n\n2090\n01:33:15,050 --> 01:33:19,570\ncontrol over the DHCP servers but not the\nDNS servers, not the domain controllers?\n\n2091\n01:33:19,570 --> 01:33:23,380\nThere's roles created within IPAM\nthat I can use to give them that.\n\n2092\n01:33:23,380 --> 01:33:25,990\nMaybe I could just let\nthem work with scopes or\n\n2093\n01:33:25,990 --> 01:33:28,340\njust let them work with reservations.\n\n2094\n01:33:28,340 --> 01:33:29,700\nAnd we can create our own roles.\n\n2095\n01:33:29,700 --> 01:33:32,850\nAnd then we can go and\ndelegate permissions to those roles and\n\n2096\n01:33:32,850 --> 01:33:35,360\ngive them just access to\ncertain portions of that.\n\n2097\n01:33:35,360 --> 01:33:38,740\nSo we can delegate out parts of our\njob and give them that capability.\n\n2098\n01:33:38,740 --> 01:33:41,860\n>> Yeah, and if you're the one\ntasked with setting all of this up,\n\n2099\n01:33:41,860 --> 01:33:46,060\njust remember in a hierarchical IPAM model\nwhere you've got several distributed\n\n2100\n01:33:46,060 --> 01:33:47,370\nthroughout your system.\n\n2101\n01:33:47,370 --> 01:33:48,665\nEach server really is independent.\n\n2102\n01:33:48,665 --> 01:33:49,190\n>> Mm-hm.\n>> So\n\n2103\n01:33:49,190 --> 01:33:51,030\nthe only difference is\nthe discovery scope.\n\n2104\n01:33:51,030 --> 01:33:52,240\n>> Right.\n>> You know, if you set one up for\n\n2105\n01:33:52,240 --> 01:33:57,130\na particular domain, you just discovered\nDHCP, DNS and so on for that domain.\n\n2106\n01:33:57,130 --> 01:33:59,180\nBut if you want that centralized\none that manages everything,\n\n2107\n01:33:59,180 --> 01:34:01,950\nyou've got to set it to\ndiscover everything.\n\n2108\n01:34:01,950 --> 01:34:05,610\nAnd IPAM does conform to\nyour forest boundaries, so\n\n2109\n01:34:05,610 --> 01:34:08,825\nif you have more than one forest, you're\ngoing to have to have more than one IPAM.\n\n2110\n01:34:08,825 --> 01:34:09,700\n>> Mm-hm.\n\n2111\n01:34:09,700 --> 01:34:10,422\n>> That does happen.\n\n2112\n01:34:10,422 --> 01:34:13,510\nThere's organizations,\nmaybe you acquired another company, and so\n\n2113\n01:34:13,510 --> 01:34:14,930\nyou've got two forests right now, and\n\n2114\n01:34:14,930 --> 01:34:18,638\nyou've got external trusts in between\nthem, that's fine, or forest trusts even.\n\n2115\n01:34:18,638 --> 01:34:21,391\nBut you’re IPAM will not\ncross that forest boundary.\n\n2116\n01:34:21,391 --> 01:34:23,440\n>> Right.\n>> So keep that in mind as your design\n\n2117\n01:34:23,440 --> 01:34:25,720\ngets to bigger and bigger environments.\n\n2118\n01:34:25,720 --> 01:34:28,190\nYou may need more and\nmore IPAM servers to cover it.\n\n2119\n01:34:28,190 --> 01:34:29,062\n>> Mm-hm.\n\n2120\n01:34:29,062 --> 01:34:33,480\n>> All right other things worth\nmentioning here, the database, right?\n\n2121\n01:34:33,480 --> 01:34:34,970\n>> Yeah.\nRight, we gotta store all this\n\n2122\n01:34:34,970 --> 01:34:37,660\ninformation that we're\ndiscovering somewhere.\n\n2123\n01:34:37,660 --> 01:34:41,870\nAnd in 2012 we were limited to\nthat Windows internal database.\n\n2124\n01:34:41,870 --> 01:34:47,510\nThe good old WID 2012 R2 they've now\ngiven us the ability to use a SQL server.\n\n2125\n01:34:47,510 --> 01:34:49,860\nSo we can have that\nattached to a SQL server.\n\n2126\n01:34:49,860 --> 01:34:52,930\nThe SQL server could be\nco-located with that IPAM server.\n\n2127\n01:34:52,930 --> 01:34:55,290\nCould be on a remote machine somewhere.\n\n2128\n01:34:55,290 --> 01:34:57,258\n>> Yeah, and\nI was making fun of it before the show.\n\n2129\n01:34:57,258 --> 01:34:59,780\n>> [LAUGH]\n>> Mike knows more about IPAM than I do.\n\n2130\n01:34:59,780 --> 01:35:01,550\nHe's definitely more of an expert than me.\n\n2131\n01:35:01,550 --> 01:35:02,770\nAnd so I was making a joke.\n\n2132\n01:35:02,770 --> 01:35:06,210\nThe windows internal database\nis built on SQL express.\n\n2133\n01:35:06,210 --> 01:35:10,270\nIt can handle records over a million\nrows and tables over a million rows.\n\n2134\n01:35:10,270 --> 01:35:14,670\nIt's got some limitations on memory,\nbut I was saying man what company is so\n\n2135\n01:35:14,670 --> 01:35:19,200\nbig that they've exceeded the utility\nof the windows internal database.\n\n2136\n01:35:19,200 --> 01:35:22,220\nBut Mike you had some really good points\non why we'd wanna go with SQL, right?\n\n2137\n01:35:22,220 --> 01:35:25,130\n>> Yeah.\nOne is, centralizing the information, but\n\n2138\n01:35:25,130 --> 01:35:28,220\ngiving us the ability to do some\nreally cool reporting capabilities.\n\n2139\n01:35:28,220 --> 01:35:31,700\nCuz we know SQL has some great\nreporting tools built into it.\n\n2140\n01:35:31,700 --> 01:35:36,020\nAs well as scalability and\nfault tolerance, cuz with SQL\n\n2141\n01:35:36,020 --> 01:35:39,220\nwe've got clustering capabilities and\nthings like that that we can do.\n\n2142\n01:35:39,220 --> 01:35:40,364\n>> Yeah, and that's really what it gets.\n\n2143\n01:35:40,364 --> 01:35:40,970\n>> Yeah.\n\n2144\n01:35:40,970 --> 01:35:43,305\n>> Each IPAM server is independent.\n\n2145\n01:35:43,305 --> 01:35:45,250\n>> Mm-hm.\n>> So they don't share information between\n\n2146\n01:35:45,250 --> 01:35:45,960\nthe data bases.\n\n2147\n01:35:45,960 --> 01:35:48,580\nHaving SQL is not going to know,\nlet that change.\n\n2148\n01:35:48,580 --> 01:35:50,586\n>> Right.\n>> But it does get you a lot of bells and\n\n2149\n01:35:50,586 --> 01:35:51,126\nwhistles.\n\n2150\n01:35:51,126 --> 01:35:52,738\n>> Mm-hm.\n>> Especially clustering things of\n\n2151\n01:35:52,738 --> 01:35:53,320\nthat nature.\n\n2152\n01:35:53,320 --> 01:35:54,540\n>> Yup.\n>> Yeah, it's pretty sweet.\n\n2153\n01:35:54,540 --> 01:35:55,610\n>> Right.\n\n2154\n01:35:55,610 --> 01:35:56,270\nExactly.\n\n2155\n01:35:56,270 --> 01:35:57,610\n>> So what else do we have on here?\n\n2156\n01:35:57,610 --> 01:36:00,815\nWe've got, let's see managing\nmonitoring servers we talked about.\n\n2157\n01:36:00,815 --> 01:36:02,030\n>> Mm-hm.\n\n2158\n01:36:02,030 --> 01:36:03,030\nAuditing, you mentioned.\n\n2159\n01:36:03,030 --> 01:36:05,080\nIt keeps up to three years so\n\n2160\n01:36:05,080 --> 01:36:08,094\nwe can comply with a lot\nof our legal requirements.\n\n2161\n01:36:08,094 --> 01:36:12,774\nBut migrating IPs,\nyeah again it really is very powerful in\n\n2162\n01:36:12,774 --> 01:36:17,465\nthe fact that I can manage all\nthat from a central location.\n\n2163\n01:36:17,465 --> 01:36:21,792\nIf we're talking about going\nfrom a smaller scope of IP\n\n2164\n01:36:21,792 --> 01:36:26,317\naddresses to a larger one,\nwe can start migrating over.\n\n2165\n01:36:26,317 --> 01:36:29,817\nSo managing, monitoring multiple DNS and\nDHTP servers.\n\n2166\n01:36:29,817 --> 01:36:34,057\n>> And when you deploy IPAM it doesn't\nhave to take over your whole network from\n\n2167\n01:36:34,057 --> 01:36:38,628\nday one, you can definitely do it phase,\nslowly bringing in your DHCP servers and\n\n2168\n01:36:38,628 --> 01:36:39,640\nyour subnets in.\n\n2169\n01:36:39,640 --> 01:36:40,780\n>> Slow being the key word.\n\n2170\n01:36:40,780 --> 01:36:41,894\nI IPAM's not gonna let you go too fast.\n\n2171\n01:36:41,894 --> 01:36:44,013\n>> [LAUGH]\n>> Because it really does take a while to\n\n2172\n01:36:44,013 --> 01:36:45,360\ndo some of that discovery.\n\n2173\n01:36:45,360 --> 01:36:48,648\n>> But maybe if you're on the Microsoft\nSQL Database maybe it'll be faster.\n\n2174\n01:36:48,648 --> 01:36:49,731\n>> Yeah, that's a possibility.\n\n2175\n01:36:49,731 --> 01:36:50,306\n>> Probably not.\n\n2176\n01:36:50,306 --> 01:36:55,180\n>> [LAUGH]\n>> One cool feature that it does\n\n2177\n01:36:55,180 --> 01:36:57,506\nhave though,\nnot that the other features aren't cool.\n\n2178\n01:36:57,506 --> 01:36:58,099\nBut anything,\n\n2179\n01:36:58,099 --> 01:37:02,050\nis that it can integrate with the System\nCenter Virtual Machine Manager, and\n\n2180\n01:37:02,050 --> 01:37:08,290\nthat's really useful because SCVMM can do\nit's own internal DHCP and MAC address\n\n2181\n01:37:08,290 --> 01:37:13,660\nassignments when you start spawning up VMs\nand it's one extra place to keep track of.\n\n2182\n01:37:13,660 --> 01:37:17,082\nAnd in the initial versions you didn't\nhave that, so there was like a something\n\n2183\n01:37:17,082 --> 01:37:20,727\nkinda got over looked, you nad NPS, DHCP\nand all these other places you monitored.\n\n2184\n01:37:20,727 --> 01:37:25,140\nSo, in 2012 R2 we do now have that\nintegration, the ability to see that.\n\n2185\n01:37:25,140 --> 01:37:28,010\nSo as you spawn up your VMs\nthey're being tracked too.\n\n2186\n01:37:28,010 --> 01:37:31,850\nReally important if you're doing VDI,\nthe Virtual Desktop Infrastructure.\n\n2187\n01:37:31,850 --> 01:37:35,270\nBecause with VDI you're constantly\nspinning up workstation VMs, and\n\n2188\n01:37:35,270 --> 01:37:36,760\nthen destroying them again.\n\n2189\n01:37:36,760 --> 01:37:38,660\nThey're not sticking around very long.\n\n2190\n01:37:38,660 --> 01:37:41,380\nAnd their addresses are changing very,\nvery frequently.\n\n2191\n01:37:41,380 --> 01:37:43,110\nSo we need to be able\nto keep track of them.\n\n2192\n01:37:43,110 --> 01:37:44,050\n>> Exactly, exactly.\n\n2193\n01:37:44,050 --> 01:37:47,680\n>> I think that's about\nall we've got on IPAM.\n\n2194\n01:37:47,680 --> 01:37:49,270\nThere's really not too much there.\n\n2195\n01:37:49,270 --> 01:37:50,988\nI will say this.\n\n2196\n01:37:50,988 --> 01:37:53,080\nIPAM's not very popular.\n\n2197\n01:37:53,080 --> 01:37:54,380\nIt hasn't been out.\n\n2198\n01:37:54,380 --> 01:37:55,040\nYeah.\n\n2199\n01:37:55,040 --> 01:37:57,570\nIt is a fairly new product, so\n\n2200\n01:37:57,570 --> 01:37:59,680\na lot of companies haven't\nbeen able to embrace it yet.\n\n2201\n01:37:59,680 --> 01:38:03,100\nBut it is growing,\nMicrosoft is always proud of new products.\n\n2202\n01:38:03,100 --> 01:38:05,730\nSo, even if you're not\nusing it in production,\n\n2203\n01:38:05,730 --> 01:38:08,810\ndon't make the mistake of thinking\nthat it's not going to be on the exam.\n\n2204\n01:38:08,810 --> 01:38:11,640\nSo, you definitely want to make\nsure that you're familiar with it.\n\n2205\n01:38:11,640 --> 01:38:13,210\nThis image that I pulled,\n\n2206\n01:38:13,210 --> 01:38:17,310\nI actually pulled it from the TechNet\narticle on IPAM deployment.\n\n2207\n01:38:17,310 --> 01:38:19,120\nAnd IPAM deployment planning,\n\n2208\n01:38:19,120 --> 01:38:22,930\nwe've kind of summarized exactly\nwhat this whole article says.\n\n2209\n01:38:22,930 --> 01:38:28,840\nBut it is a good read cuz they do go a\nlittle bit further into capacity planning,\n\n2210\n01:38:28,840 --> 01:38:34,600\nand mentioning things like a single IPAM\nserver can support up to 150 DHCP servers.\n\n2211\n01:38:34,600 --> 01:38:37,410\nMost people will never exceed that,\nbut if you have more,\n\n2212\n01:38:37,410 --> 01:38:40,120\nyou'll need to go to more IPAM servers.\n\n2213\n01:38:40,120 --> 01:38:43,030\nBut what I find useful is way down\nat the bottom of this article.\n\n2214\n01:38:43,030 --> 01:38:44,530\nLet me see if I can find it, here we go.\n\n2215\n01:38:44,530 --> 01:38:48,220\nIt explains the database\nstorage utilization, right, and\n\n2216\n01:38:48,220 --> 01:38:49,390\nyou won't see this on the exam.\n\n2217\n01:38:49,390 --> 01:38:51,200\nThey don't make you\nmemorize numbers like this.\n\n2218\n01:38:51,200 --> 01:38:54,830\nBut in real life land,\nthat's good data to have, to say,\n\n2219\n01:38:54,830 --> 01:38:57,500\nall right how fast is\nthis database gonna grow.\n\n2220\n01:38:57,500 --> 01:39:00,330\nEspecially with the Windows internal\ndatabase because the SQL database is\n\n2221\n01:39:00,330 --> 01:39:03,710\npretty easy to purge it can grow\nto massive sizes if we want, but\n\n2222\n01:39:03,710 --> 01:39:05,550\nthe Windows internal database can't.\n\n2223\n01:39:05,550 --> 01:39:10,440\nSo and this is one of the negatives\nof IPAM, is it doesn't purge itself.\n\n2224\n01:39:10,440 --> 01:39:12,940\nSo you have to go and\nmanually purge the records.\n\n2225\n01:39:12,940 --> 01:39:15,520\nAnd so you've gotta be able to\ntrack when you need to do that\n\n2226\n01:39:15,520 --> 01:39:18,490\nto set up tasks to do it.\n\n2227\n01:39:18,490 --> 01:39:22,620\nBut you'll see here, even with 40,000 IPs,\nit's only growing at 3GB a month.\n\n2228\n01:39:22,620 --> 01:39:26,280\nSo, not a huge amount of data per year.\n\n2229\n01:39:27,840 --> 01:39:32,440\nBut, the larger that database, the more\npoor its performance is going to get.\n\n2230\n01:39:32,440 --> 01:39:34,290\nAnd that's another reason to\njump over to Microsoft SQL.\n\n2231\n01:39:36,170 --> 01:39:38,650\nAll right, well, I think that's all\nI've got on IPAM, how about you?\n\n2232\n01:39:38,650 --> 01:39:40,827\n>> Me, too.\nIf you need any more information actually\n\n2233\n01:39:40,827 --> 01:39:42,856\ndeploying it, check out that 412 episode.\n\n2234\n01:39:42,856 --> 01:39:46,050\nI think we pulled up one of the TechNet\nV-labs actually when we were doing that.\n\n2235\n01:39:46,050 --> 01:39:48,172\nThere's a really good one out there\non those on those TechNet V-labs\n\n2236\n01:39:48,172 --> 01:39:48,730\nfor IPAM as well.\n\n2237\n01:39:50,420 --> 01:39:52,406\n>> So\nfortunately this is one of the easy ones.\n\n2238\n01:39:52,406 --> 01:39:55,220\nWhen you deploy it in a multiple\nenvironment, each server's independent, so\n\n2239\n01:39:55,220 --> 01:39:56,420\nit's not really any different.\n\n2240\n01:39:56,420 --> 01:39:59,670\nYou're just deploying more of them,\nand adjusting that discovery scope.\n\n2241\n01:40:00,765 --> 01:40:04,065\nAll right, well that pretty much\nwraps this episode up for us.\n\n2242\n01:40:04,065 --> 01:40:08,045\nLet me remind you guys if you have\nany questions be sure to ask.\n\n2243\n01:40:08,045 --> 01:40:10,785\nLive during the show you\ncan go to itpro.tv/live and\n\n2244\n01:40:10,785 --> 01:40:14,090\nyou'll see the chat box right beneath\nthe video, post your questions,\n\n2245\n01:40:14,090 --> 01:40:15,950\nwe monitor and answer during the show.\n\n2246\n01:40:15,950 --> 01:40:19,740\nIf you have any questions after the show,\nuse our Q&A forums.\n\n2247\n01:40:19,740 --> 01:40:22,080\nAt the top of every page at itpro.tv,\n\n2248\n01:40:22,080 --> 01:40:24,240\nyou'll see a link that says Q&A,\nclick on it.\n\n2249\n01:40:24,240 --> 01:40:26,060\n>> Do it.\n>> It takes you to the forums and\n\n2250\n01:40:26,060 --> 01:40:30,522\nyou can post your questions there,\nwe monitor and answer.\n\n2251\n01:40:30,522 --> 01:40:31,153\n>> [LAUGH]\n>> [CROSSTALK]\n\n2252\n01:40:31,153 --> 01:40:32,584\n>> All right, well ladies and gentlemen,\n\n2253\n01:40:32,584 --> 01:40:34,070\nI hope you guys enjoyed the show.\n\n2254\n01:40:34,070 --> 01:40:35,920\nSigning off for ITProTV, I'm Don Pezet.\n\n2255\n01:40:35,920 --> 01:40:36,990\n>> And I'm Mike Rodrick.\n\n2256\n01:40:36,990 --> 01:40:38,764\n>> And we will see you next time.\n\n2257\n01:40:38,764 --> 01:40:43,974\n[MUSIC]\n\n",
          "vimeoId": "107615164"
        }
      ],
      "title": "Design and implement network infrastructure services"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "5189",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/006-Planning-Network-Access.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/006-Planning-Network-Access-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/006-Planning-Network-Access-sm.jpg",
          "title": "Planning Network Access",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,295 --> 00:00:22,420\n[SOUND]\n\n3\n00:00:22,420 --> 00:00:32,420\n[MUSIC]\n\n4\n00:00:33,545 --> 00:00:34,047\nAll right.\n\n5\n00:00:34,047 --> 00:00:36,281\nGood morning, good afternoon,\nand good evening.\n\n6\n00:00:36,281 --> 00:00:38,540\nAnd welcome back to another\nepisode of ITProTV.\n\n7\n00:00:38,540 --> 00:00:40,420\nI'm your host, Don Pezet.\n\n8\n00:00:40,420 --> 00:00:42,490\nBack with the man in black Mr.\nMike Rodrick.\n\n9\n00:00:42,490 --> 00:00:43,110\nHow's it going Mike?\n\n10\n00:00:43,110 --> 00:00:44,230\n>> Fantastic how are you doing Don?\n\n11\n00:00:44,230 --> 00:00:45,690\n>> Is it Johnny Cash memorial day?\n\n12\n00:00:45,690 --> 00:00:48,940\n>> It is, you know I was just in that\nmood this morning when I got dressed.\n\n13\n00:00:48,940 --> 00:00:51,928\nI was feeling a little Folsom Blues or\nsomething.\n\n14\n00:00:51,928 --> 00:00:57,065\n>> [LAUGH] All right,\nwell, speaking of prisons-\n\n15\n00:00:57,065 --> 00:00:58,880\n>> [LAUGH]\n\n16\n00:00:58,880 --> 00:01:00,630\n>> We're gonna be taking a look at remote\n\n17\n00:01:00,630 --> 00:01:05,670\naccess methods today, which used for\nthe forces of good are a great thing.\n\n18\n00:01:05,670 --> 00:01:08,250\nUsed for\nbad will get you in Folsom prison.\n\n19\n00:01:08,250 --> 00:01:09,750\n>> Yes, it will.\n\n20\n00:01:09,750 --> 00:01:11,390\n>> Right?\nBut, more and\n\n21\n00:01:11,390 --> 00:01:16,080\nmore we have our end users working\nremotely from our primary offices.\n\n22\n00:01:16,080 --> 00:01:19,240\nAnd we need to provide some way for\nthem to be able to connect in and\n\n23\n00:01:19,240 --> 00:01:24,393\ngain access to the resources as if they\nwere here in the building with us.\n\n24\n00:01:24,393 --> 00:01:25,940\n>> Mm-hm.\n\n25\n00:01:25,940 --> 00:01:28,710\n>> And, you guys learned in the 7410,\n411, 412 shows and\n\n26\n00:01:28,710 --> 00:01:32,260\nexams that there's a number of different\nremote access methods out there.\n\n27\n00:01:32,260 --> 00:01:34,370\nWhat we're gonna do today is we're\ngonna go back over those and\n\n28\n00:01:34,370 --> 00:01:38,710\nwe're gonna start taking a look at\nwhen the one solution is the right\n\n29\n00:01:38,710 --> 00:01:41,710\nversus another, and\nsome of the different caveats and\n\n30\n00:01:41,710 --> 00:01:45,430\nthings we need to be aware of as we build\na proper design for an environment.\n\n31\n00:01:45,430 --> 00:01:49,410\nAnd remember, especially with this exam,\nyou should always be thinking, not so\n\n32\n00:01:49,410 --> 00:01:50,290\nmuch how to do these.\n\n33\n00:01:50,290 --> 00:01:52,460\nRight, you're expected to\nknow how to do them already.\n\n34\n00:01:52,460 --> 00:01:54,570\nRight, but\nwhat we're learning here is the why.\n\n35\n00:01:54,570 --> 00:02:02,200\nWhy would one solution be more ideal for\na certain situation than another one?\n\n36\n00:02:02,200 --> 00:02:03,040\nAnd there's something.\n\n37\n00:02:03,040 --> 00:02:03,944\nThere's always some caveat,\n\n38\n00:02:03,944 --> 00:02:07,850\nsome feature, some piece of that\npuzzle that we've gotta be aware of.\n\n39\n00:02:07,850 --> 00:02:10,570\nAlright, so\nwe're just gonna dive right in.\n\n40\n00:02:10,570 --> 00:02:16,420\nThe first part of the objective is just\na real general design, a VPN solution.\n\n41\n00:02:16,420 --> 00:02:19,310\nAnd VPNs, they take a lot of forms.\n\n42\n00:02:19,310 --> 00:02:23,360\nSo this is a super broad\nkind of point to throw in.\n\n43\n00:02:23,360 --> 00:02:24,910\n>> Yeah, it really is.\n\n44\n00:02:24,910 --> 00:02:27,190\n>> So,\nwhen it comes to designing a VPN solution,\n\n45\n00:02:27,190 --> 00:02:29,910\nwe've got to remember that there's\nactually two different types.\n\n46\n00:02:29,910 --> 00:02:34,970\nI guess it's really more than that, but\ntwo primary types of VPNs that we deploy.\n\n47\n00:02:34,970 --> 00:02:38,850\nAnt that's client-to-site,\nversus site-to-site.\n\n48\n00:02:38,850 --> 00:02:41,640\nAnd there's differences in how we're\ngoing to configure things based on that,\n\n49\n00:02:41,640 --> 00:02:44,880\nso let's just go over that real\nhigh level topic real quick to make\n\n50\n00:02:44,880 --> 00:02:47,510\nsure that our minds are fresh, and\nthen we'll start to kind of dive into it.\n\n51\n00:02:48,690 --> 00:02:51,940\nYeah, so when we talk about the different\ntypes with a client-to-site\n\n52\n00:02:51,940 --> 00:02:54,730\ntype connection, this is what we're\ntalking about with remote access user.\n\n53\n00:02:54,730 --> 00:02:57,650\nRight?\nSomebody that's at home and they want to\n\n54\n00:02:57,650 --> 00:03:00,560\nmaybe, they normally work from home,\nor they're taking a day and they're\n\n55\n00:03:00,560 --> 00:03:04,740\ngoing to stay at home, and they want to\nget some work done, or a traveling worker.\n\n56\n00:03:04,740 --> 00:03:06,850\nYou know?\nSomebody that's out in the field.\n\n57\n00:03:06,850 --> 00:03:08,290\nNeeds to be able to connect back.\n\n58\n00:03:08,290 --> 00:03:12,290\nAnd we're going to give them access to\nthat network from wherever they're at.\n\n59\n00:03:12,290 --> 00:03:15,380\nAnd then you've got your site-to-site\nVPNs, where we're talking about\n\n60\n00:03:15,380 --> 00:03:20,460\nconnecting, say, a corporate office and\na branch office, or something like that.\n\n61\n00:03:20,460 --> 00:03:23,190\nOr to extranet partner or something.\n\n62\n00:03:23,190 --> 00:03:25,990\nAnd this is going to give me, instead\nof each person, if I've got 10 users,\n\n63\n00:03:25,990 --> 00:03:30,390\n20 users out there that branch office, I\ndon't need each one of them trying to make\n\n64\n00:03:30,390 --> 00:03:33,130\na VPN connection back to\nthe corporate office, I can have\n\n65\n00:03:33,130 --> 00:03:38,060\none tunnel established between those two\noffices that all traffic flows through.\n\n66\n00:03:38,060 --> 00:03:42,160\nSo you're trying to support one user,\nor individual users while they're out\n\n67\n00:03:42,160 --> 00:03:45,330\nin the field, or you're trying to\nconnect two locations together.\n\n68\n00:03:45,330 --> 00:03:49,930\n>> Now you certainly could\nuse a remote access VPN for\n\n69\n00:03:49,930 --> 00:03:52,940\nindividual machines in a branch,\nit's not very efficient, right?\n\n70\n00:03:52,940 --> 00:03:55,280\nBut there are certain scenarios\nwhere that might be beneficial or\n\n71\n00:03:55,280 --> 00:03:57,640\nwhere you blend the two, right?\n\n72\n00:03:57,640 --> 00:03:59,370\nLet's take a look at\nmy diagram real quick.\n\n73\n00:03:59,370 --> 00:04:02,860\nSo when we have a branch office\nlike what I've got up here.\n\n74\n00:04:02,860 --> 00:04:07,400\nYou've got a bunch of physical PCs,\nmaybe you've got a server or whatever.\n\n75\n00:04:07,400 --> 00:04:08,970\nWhat Mike said is exactly right.\n\n76\n00:04:08,970 --> 00:04:13,170\nIf each one of these guys built a VPN,\nthat's not what I wanted,\n\n77\n00:04:13,170 --> 00:04:16,700\nif each one of these guys built a VPN\ntunnel back to the home office.\n\n78\n00:04:16,700 --> 00:04:17,250\nRight.\n\n79\n00:04:17,250 --> 00:04:22,130\nYou'd be talking about four different\ntunnels that were leading from this\n\n80\n00:04:22,130 --> 00:04:27,320\nbranch office back to the home office to\ngain access to these servers over here.\n\n81\n00:04:27,320 --> 00:04:32,050\nSo that process,\nthat just creating those tunnels.\n\n82\n00:04:32,050 --> 00:04:35,220\nIt's got overhead, overhead that\nwe probably don't want to incur.\n\n83\n00:04:35,220 --> 00:04:37,000\nAnd the fact that you're\ndoing it four times.\n\n84\n00:04:37,000 --> 00:04:39,420\nOh, god forbid it remembered my-\n>> [LAUGH]\n\n85\n00:04:39,420 --> 00:04:40,660\n>> Pencil settings.\n\n86\n00:04:40,660 --> 00:04:44,590\nBut if you're doing it four times\nto reach across to that other side,\n\n87\n00:04:44,590 --> 00:04:46,410\neach one is getting a little\nbit of overhead and\n\n88\n00:04:46,410 --> 00:04:49,595\na little bit of extra effort and\nso on involved in that.\n\n89\n00:04:49,595 --> 00:04:52,160\n>> Mm-hm.\n>> So it makes more sense that if we have\n\n90\n00:04:52,160 --> 00:04:57,150\na branch office like this,\nto have all of these nodes not go to\n\n91\n00:04:57,150 --> 00:05:02,560\ntheir own individual VPN tunnel or\nhit a firewall or a router of some sort,\n\n92\n00:05:02,560 --> 00:05:07,940\nand from there have that firewall or\nrouter build a tunnel to the other side.\n\n93\n00:05:07,940 --> 00:05:12,710\nAnd when they do that you're building\n\n94\n00:05:12,710 --> 00:05:17,180\na true tunnel, a tunnel that's invisible\nto your users; they don't know about it.\n\n95\n00:05:17,180 --> 00:05:22,220\nThe tunnel is actually being\nbuilt between infrastructure,\n\n96\n00:05:22,220 --> 00:05:27,000\nbetween firewalls or routers or\nservers at our different locations.\n\n97\n00:05:27,000 --> 00:05:29,170\nAnd that's what people\nare traveling across.\n\n98\n00:05:29,170 --> 00:05:34,090\nAnd the nice thing about a tunnel mode\nVPN like this is that the end users,\n\n99\n00:05:34,090 --> 00:05:35,430\nthey don't even know it's there.\n\n100\n00:05:35,430 --> 00:05:36,380\n>> Wow.\nSo,\n\n101\n00:05:36,380 --> 00:05:39,400\nthey can just type in the name of a share,\nconnect to a printer,\n\n102\n00:05:39,400 --> 00:05:42,830\njust like they were at\nthe corporate office, really.\n\n103\n00:05:42,830 --> 00:05:45,350\n>> Yeah.\nNo need for configuring a client or\n\n104\n00:05:45,350 --> 00:05:45,860\nanything.\n\n105\n00:05:45,860 --> 00:05:49,800\nAnd that's what people really\nget where we struggle with.\n\n106\n00:05:49,800 --> 00:05:50,690\nIs there's so\n\n107\n00:05:50,690 --> 00:05:54,700\nmany places where you can make a mistake\nwhen you're configuring a VPN tunnel.\n\n108\n00:05:54,700 --> 00:05:57,450\nAnd it's just a hassle.\n\n109\n00:05:57,450 --> 00:05:58,870\nIt's really tough.\n\n110\n00:05:58,870 --> 00:06:01,470\nSo, having a VPN like this.\n\n111\n00:06:01,470 --> 00:06:02,450\n>> I know you've gone through it.\n\n112\n00:06:02,450 --> 00:06:05,970\nTrying to walk an end user through\ncreating those VPN objects.\n\n113\n00:06:05,970 --> 00:06:07,290\nNow you're going to need\nto type in this IP.\n\n114\n00:06:08,560 --> 00:06:09,100\n>> No.\n\n115\n00:06:09,100 --> 00:06:10,250\nNot so much.\n\n116\n00:06:10,250 --> 00:06:15,170\n>> So that's ideal for a branch office,\nbut for somebody at home, right?\n\n117\n00:06:15,170 --> 00:06:18,040\nI guess maybe you could\non their router at home,\n\n118\n00:06:18,040 --> 00:06:19,780\nyou could configure a site-to-site VPN.\n\n119\n00:06:19,780 --> 00:06:22,170\nI, you know.\n>> I think Ronnie has a router sitting at\n\n120\n00:06:22,170 --> 00:06:24,430\nhis house and\nhas created a tunnel in here for himself.\n\n121\n00:06:24,430 --> 00:06:27,520\n>> Yeah, and that's one of those el\ncheapo routers like a Linksys server or\n\n122\n00:06:27,520 --> 00:06:28,900\nwhatever it's not anything special.\n\n123\n00:06:28,900 --> 00:06:29,480\n>> Right.\n>> But\n\n124\n00:06:29,480 --> 00:06:32,780\nmost of your home usage is not going to be\nat that level and you may not want that,\n\n125\n00:06:32,780 --> 00:06:34,185\nbecause what else is in our home??\n\n126\n00:06:34,185 --> 00:06:34,770\n>> Mm-hm.\n\n127\n00:06:34,770 --> 00:06:39,010\n>> Well you know they've got their kids\niPad and their Rokus and other devices,\n\n128\n00:06:39,010 --> 00:06:41,720\nyou don't want them to have\naccess to your business network.\n\n129\n00:06:41,720 --> 00:06:44,290\nSo for a home user it makes sense\n\n130\n00:06:44,290 --> 00:06:48,060\nthat you'd want them to run a VPN\nclient right there in their OS.\n\n131\n00:06:48,060 --> 00:06:50,990\n>> And not go through a tunnel\ncreated by their infrastructure, but\n\n132\n00:06:50,990 --> 00:06:53,560\ninstead go through a tunnel\nthat they create themselves.\n\n133\n00:06:55,130 --> 00:06:59,630\nBut what if you have an employee who\nsometimes works in a branch office and\n\n134\n00:06:59,630 --> 00:07:02,160\nsometimes is out in the field?\n\n135\n00:07:02,160 --> 00:07:05,310\nI used to work for an insurance company,\nand we had these field adjusters.\n\n136\n00:07:05,310 --> 00:07:07,840\nThey would go out to client sites and\nlook at destruction,\n\n137\n00:07:07,840 --> 00:07:11,010\nand figure out how much we needed\nto pay to cover the damages.\n\n138\n00:07:11,010 --> 00:07:14,460\nSo sometimes they were in the office and\nsometimes they were in the field.\n\n139\n00:07:14,460 --> 00:07:17,624\nSo they had the VPN client\nconfigured on their laptop and\n\n140\n00:07:17,624 --> 00:07:20,340\nwhen they were in the field they used it.\n\n141\n00:07:20,340 --> 00:07:22,760\nBut when they went back to their\noffice they didn't use it.\n\n142\n00:07:22,760 --> 00:07:25,300\nIt was a mix of the two and\nthat's very common.\n\n143\n00:07:25,300 --> 00:07:28,510\nSo don't assume that you're\ngoing to have just one solution.\n\n144\n00:07:29,570 --> 00:07:33,760\nWhere it differs though are the endpoints,\nokay?\n\n145\n00:07:33,760 --> 00:07:35,900\nIf you're going to be doing both,\n\n146\n00:07:35,900 --> 00:07:39,980\nif you're going to have site-to-site VPNs\nlike this and you're going to have remote\n\n147\n00:07:39,980 --> 00:07:43,930\naccess VPNs, you'll likely be\nterminating them on different equipment.\n\n148\n00:07:43,930 --> 00:07:46,950\nYou could in theory just have one system.\n\n149\n00:07:46,950 --> 00:07:49,860\nYou could have like a forefront\nthreat management gateway here.\n\n150\n00:07:49,860 --> 00:07:53,623\nOr you could have just a Windows server\nrunning routing and remote access here.\n\n151\n00:07:53,623 --> 00:07:54,862\nThat was terminating both.\n\n152\n00:07:54,862 --> 00:07:58,235\nYour remote access clients and\nyour tunnels.\n\n153\n00:07:58,235 --> 00:07:59,963\nBut typically we don't do that.\n\n154\n00:07:59,963 --> 00:08:01,637\nIf you're building site-to-site tunnels,\n\n155\n00:08:01,637 --> 00:08:04,534\nyou normally do that between your network\ninfrastructure, between firewalls.\n\n156\n00:08:04,534 --> 00:08:06,730\nAll right.\nAnd then your remote access users,\n\n157\n00:08:06,730 --> 00:08:09,390\nthey're gonna connect in, but\nthey're gonna need to connect to\n\n158\n00:08:09,390 --> 00:08:12,960\na server of some sort on your side\nthat's posting up these VPNs.\n\n159\n00:08:12,960 --> 00:08:17,086\nAnd so we may have a routing and remote\naccess server available in our DMZ that\n\n160\n00:08:17,086 --> 00:08:20,199\nthey can then connect to,\nto establish that VPN tunnel.\n\n161\n00:08:20,199 --> 00:08:22,150\n>> Right.\n\n162\n00:08:22,150 --> 00:08:25,441\nYeah, so several different ways we can go\nabout it, depending on what our needs are.\n\n163\n00:08:25,441 --> 00:08:28,184\n>> Yeah, and it really does vary.\n\n164\n00:08:28,184 --> 00:08:31,500\nAnd I hate to say it, but\nit usually comes down to money.\n\n165\n00:08:31,500 --> 00:08:34,960\nA lot of times, if you are gonna\nbe deploying a large scale VPN,\n\n166\n00:08:34,960 --> 00:08:37,440\nWindows servers just don't\nscale very well for that.\n\n167\n00:08:37,440 --> 00:08:39,270\nAnd so you're typically gonna\nhave hardware appliances.\n\n168\n00:08:39,270 --> 00:08:42,913\nThings like CISCO ASA firewalls,\nor Juniper SSGs, or whatever,\n\n169\n00:08:42,913 --> 00:08:46,556\nwhich can handle thousands upon\nthousands of VPN tunnels really,\n\n170\n00:08:46,556 --> 00:08:50,300\nreally well with accelerated\nhardware inside of them.\n\n171\n00:08:50,300 --> 00:08:52,770\nYou know, Microsoft servers don't\nhave that accelerated hardware.\n\n172\n00:08:52,770 --> 00:08:55,685\nSo when we talk about a Microsoft\nserver hosting the VPN tunnel,\n\n173\n00:08:55,685 --> 00:08:57,010\nit can, it certainly can.\n\n174\n00:08:57,010 --> 00:08:57,553\n>> Mm-hm.\n\n175\n00:08:57,553 --> 00:09:01,573\n>> But it's gonna be limited,\nmostly by CPU, because the encryption and\n\n176\n00:09:01,573 --> 00:09:04,396\ndecryption of that traffic\nis a burden on the CPU.\n\n177\n00:09:04,396 --> 00:09:08,496\nAnd you can get accelerator boards for\nthat, but most servers don't have that,\n\n178\n00:09:08,496 --> 00:09:10,900\nright, and by most, I mean 99% of them.\n\n179\n00:09:10,900 --> 00:09:13,370\nRight, it's a rarity that\nyou see that kind of system.\n\n180\n00:09:13,370 --> 00:09:15,430\nSo it's not the most efficient.\n\n181\n00:09:16,700 --> 00:09:19,520\nOn the exam though,\nremember it's a Microsoft exam.\n\n182\n00:09:19,520 --> 00:09:21,883\nThey want you to solve the problems\nwith Microsoft solutions.\n\n183\n00:09:21,883 --> 00:09:24,823\nSo don't shy away from putting\na Microsoft server in there, and\n\n184\n00:09:24,823 --> 00:09:27,609\nsaying that's what I'm gonna\nterminate my VPN tunnels to.\n\n185\n00:09:27,609 --> 00:09:29,390\nCuz that'll likely be\nthe right answer on the test.\n\n186\n00:09:29,390 --> 00:09:30,090\n>> Absolutely.\n\n187\n00:09:30,090 --> 00:09:31,773\nAbsolutely.\n\n188\n00:09:31,773 --> 00:09:33,697\nAll right, so we decide then,\n\n189\n00:09:33,697 --> 00:09:38,170\nin our planning we've decided what\ntype of VPN tunnel we wanna set up.\n\n190\n00:09:38,170 --> 00:09:40,730\nOne of the next things we really\ngotta take a look at then is,\n\n191\n00:09:40,730 --> 00:09:42,000\nhow are we gonna authenticate, right.\n\n192\n00:09:42,000 --> 00:09:46,237\nHow are we going to identify this person\nthat's attempting to make this connection,\n\n193\n00:09:46,237 --> 00:09:49,130\nwhether or not we should allow\nthat connection to be made or not?\n\n194\n00:09:49,130 --> 00:09:51,210\nAnd we've got a few different\nchoices there as well.\n\n195\n00:09:51,210 --> 00:09:52,240\n>> Yeah.\n\n196\n00:09:52,240 --> 00:09:54,350\nRemote access VPNs are the easiest.\n\n197\n00:09:54,350 --> 00:09:57,810\nYou've got an end user who's launching\nthat VPN tunnel themselves, so\n\n198\n00:09:57,810 --> 00:09:59,530\nhow can we authenticate them?\n\n199\n00:09:59,530 --> 00:10:00,210\nUser name and password.\n\n200\n00:10:00,210 --> 00:10:01,110\n>> Right.\nExactly.\n\n201\n00:10:01,110 --> 00:10:04,330\n>> They've got an Active Directory\naccount, or they can have one.\n\n202\n00:10:04,330 --> 00:10:08,290\nAnd we can use our Internet Authentication\nServer to be able to pick that up and\n\n203\n00:10:08,290 --> 00:10:12,280\nauthenticate them and let them in or\nnot, right, really straightforward.\n\n204\n00:10:12,280 --> 00:10:15,457\nWhere it becomes a little more challenging\nthough, are site-to-site VPNs.\n\n205\n00:10:15,457 --> 00:10:17,050\n>> Mm-hm.\n>> When you have a site-to-site VPN,\n\n206\n00:10:17,050 --> 00:10:19,110\nit's not an end user\nbuilding that connection.\n\n207\n00:10:19,110 --> 00:10:21,330\nIt's usually a server, or a firewall, or\n\n208\n00:10:21,330 --> 00:10:24,340\na router that's actually building that\nconnection back to the home office.\n\n209\n00:10:24,340 --> 00:10:27,610\nSo, how do you authentic them,\nuser name and password?\n\n210\n00:10:27,610 --> 00:10:28,856\nYou could, I suppose.\n\n211\n00:10:28,856 --> 00:10:30,108\n>> Maybe.\n[LAUGH]\n\n212\n00:10:30,108 --> 00:10:31,716\n>> But normally it's gonna fall back\n\n213\n00:10:31,716 --> 00:10:32,745\nto one of two things.\n\n214\n00:10:32,745 --> 00:10:36,774\nEither a pre-shared key, so\na password that you determine.\n\n215\n00:10:36,774 --> 00:10:37,400\n>> Right.\n\n216\n00:10:37,400 --> 00:10:38,320\n>> Or a certificate.\n\n217\n00:10:39,345 --> 00:10:40,893\nAnd pre-shared key are the easiest.\n\n218\n00:10:40,893 --> 00:10:43,906\nAnd I think when we did IPSec in the show,\nwe just did a pre-shared key didn't we?\n\n219\n00:10:43,906 --> 00:10:46,424\n>> Yeah, because we didn't set up\na public key infrastructure or\n\n220\n00:10:46,424 --> 00:10:49,073\nanything like that so [LAUGH]\n>> And that's exactly the thing,\n\n221\n00:10:49,073 --> 00:10:52,061\nis with a pre-shared key you just\ncome up with a password, and\n\n222\n00:10:52,061 --> 00:10:54,880\nas long as it's entered in\non both sides there you go.\n\n223\n00:10:54,880 --> 00:11:00,130\nBut the problem with PSKs is one,\nyou gotta remember to change them, right?\n\n224\n00:11:00,130 --> 00:11:02,480\nOtherwise they just stay the same forever\n>> And nobody does.\n\n225\n00:11:02,480 --> 00:11:03,550\n>> Yeah.\n>> I mean, they should,\n\n226\n00:11:03,550 --> 00:11:05,400\nbut half the time they don't.\n\n227\n00:11:05,400 --> 00:11:06,840\n>> And then the second thing is,\n\n228\n00:11:06,840 --> 00:11:10,080\nyou've got to securely transit\nit to get it to the other side.\n\n229\n00:11:10,080 --> 00:11:12,700\nThere's the possibility that pre-shared\nkey could be intercepted, and\n\n230\n00:11:12,700 --> 00:11:14,420\nthen you've got a real problem there, too.\n\n231\n00:11:14,420 --> 00:11:16,292\n>> Mm-hm.\nAnd we've always had to face, like,\n\n232\n00:11:16,292 --> 00:11:19,353\nbrute force attacks and things like that,\nwhere the pre-shared key,\n\n233\n00:11:19,353 --> 00:11:22,620\nit's just a password so, given enough\ntime, if they're not changing it in\n\n234\n00:11:22,620 --> 00:11:25,540\nthe appropriate length of time,\nit will be cracked so.\n\n235\n00:11:25,540 --> 00:11:26,130\n>> Yep.\n\n236\n00:11:26,130 --> 00:11:30,170\nSo in a high security environment,\npre-shared key is not really viable.\n\n237\n00:11:30,170 --> 00:11:33,447\nFor small businesses, businesses that\nare transmitting non-secure data,\n\n238\n00:11:33,447 --> 00:11:34,174\nthey're fine.\n\n239\n00:11:34,174 --> 00:11:36,460\nRight, or in your own labs,\nwhatever, they're fine.\n\n240\n00:11:36,460 --> 00:11:39,650\nBut if you're transmitting sensitive data,\nmedical records,\n\n241\n00:11:39,650 --> 00:11:43,740\nfinancial information,\nPSKs just aren't enough, right.\n\n242\n00:11:43,740 --> 00:11:45,560\nCertificates are better.\n\n243\n00:11:45,560 --> 00:11:49,055\nIf you do certificate authentication,\nfirst off, you issue a certificate,\n\n244\n00:11:49,055 --> 00:11:52,730\nit kinda works like a PSK,\nexcept you can set expiration dates on it,\n\n245\n00:11:52,730 --> 00:11:54,540\nyou can renew and reissue.\n\n246\n00:11:54,540 --> 00:11:57,230\nYou can issue different certificates\nto different end points.\n\n247\n00:11:57,230 --> 00:12:00,900\nSo if one end point gets compromised,\nyou just revoke that one certificate,\n\n248\n00:12:00,900 --> 00:12:03,620\ninstead of having to revoke\nthe certificates from multiple people.\n\n249\n00:12:03,620 --> 00:12:07,370\nAnd we can use them for\nremote access VPNs also.\n\n250\n00:12:07,370 --> 00:12:10,490\nSo on the remote access VPN side instead\nof just using your username and password,\n\n251\n00:12:10,490 --> 00:12:11,960\nwe can use the certificate.\n\n252\n00:12:11,960 --> 00:12:14,590\nThat's really useful when\nwe have like a shared PC.\n\n253\n00:12:14,590 --> 00:12:16,874\nWe don't know who the user's gonna be, but\n\n254\n00:12:16,874 --> 00:12:19,361\nwe want to allow that PC\nto be able to connect in.\n\n255\n00:12:19,361 --> 00:12:20,529\n>> Right, right.\n\n256\n00:12:20,529 --> 00:12:22,701\nYeah, and\nit's just a step up in complexity,\n\n257\n00:12:22,701 --> 00:12:25,431\ncuz we do have to set up our\npublic key infrastructure, and\n\n258\n00:12:25,431 --> 00:12:29,970\nthen issue the appropriate certificates\nto our servers so they can be identified.\n\n259\n00:12:29,970 --> 00:12:33,610\nAnd then it comes to what method\nof authentication we wanna use.\n\n260\n00:12:33,610 --> 00:12:37,250\nWe could do IPsec authentication\nwith our certificates.\n\n261\n00:12:37,250 --> 00:12:41,010\nWe could do our, what,\nIP over HTTPS if we wanted to.\n\n262\n00:12:41,010 --> 00:12:42,890\nSo we have a couple of\ndifferent options there.\n\n263\n00:12:42,890 --> 00:12:47,510\nAnd depending on which way we go, is gonna\ndetermine which certificates we need for\n\n264\n00:12:47,510 --> 00:12:49,470\nour different servers.\n\n265\n00:12:49,470 --> 00:12:51,516\nAs well as what solution we choose,\n\n266\n00:12:51,516 --> 00:12:56,500\nbecause we really haven't even thrown in\nDirect Access yet, because that's another\n\n267\n00:12:56,500 --> 00:13:00,407\nviable remote access solution in\nour modern Windows environment.\n\n268\n00:13:00,407 --> 00:13:01,605\nSo we can do Direct Access.\n\n269\n00:13:02,895 --> 00:13:06,014\nSo if we're gonna do IPsec,\nwhich is a pretty common one I think,\n\n270\n00:13:06,014 --> 00:13:10,236\nwe're gonna issue certificates from our\nown public key infrastructure, typically.\n\n271\n00:13:10,236 --> 00:13:13,695\nI mean you could go out and\nbuy certificates from a public CA.\n\n272\n00:13:13,695 --> 00:13:16,830\nWe've talked about public and\nprivate CAs in some other episodes.\n\n273\n00:13:16,830 --> 00:13:20,460\nBut if it's all in-house, I mean,\nif these are my users, or my clients, or\n\n274\n00:13:20,460 --> 00:13:24,700\nmy laptops that have been issued to my\nend users, I can use things like group\n\n275\n00:13:24,700 --> 00:13:27,650\npolicy to automate the issuing\nof those certificates.\n\n276\n00:13:27,650 --> 00:13:30,230\nI can issue them to my\nremote access server,\n\n277\n00:13:30,230 --> 00:13:31,670\nand they're all gonna be trusted, right?\n\n278\n00:13:31,670 --> 00:13:36,060\nWe can use group policy to\nimport that root CA certificate.\n\n279\n00:13:36,060 --> 00:13:39,210\nSo there's no trust issues there,\nno warnings or anything like that.\n\n280\n00:13:39,210 --> 00:13:42,934\nRelatively painless to do, once you get\nthe public key infrastructure set up.\n\n281\n00:13:42,934 --> 00:13:44,062\n>> Mm-hm.\n\n282\n00:13:44,062 --> 00:13:47,720\nAnd that is a big part of it\nis getting that PKI in place.\n\n283\n00:13:47,720 --> 00:13:48,890\nAnd you can create your own PKI, right,\n\n284\n00:13:48,890 --> 00:13:52,480\nyou don't have to go out and use all\npurchased certificates or whatever.\n\n285\n00:13:52,480 --> 00:13:56,950\nBut when you build your own PKI, the key\nthing to remember is that all of your\n\n286\n00:13:56,950 --> 00:14:02,490\nclients have got to trust your root\ncertificate, your root CA certificate.\n\n287\n00:14:02,490 --> 00:14:05,130\nIf they don't, they're not gonna trust all\nof the certificates that you've issued\n\n288\n00:14:05,130 --> 00:14:07,000\nout, and that's a big deal.\n\n289\n00:14:07,000 --> 00:14:08,365\nSo once you get over that hurdle though,\n\n290\n00:14:08,365 --> 00:14:09,983\nthe rest of the PKI is\nreally straightforward.\n\n291\n00:14:09,983 --> 00:14:12,329\nRight, and\nI know we showed how to set that up, so\n\n292\n00:14:12,329 --> 00:14:14,808\nit's not that big of a deal\nonce you get it in place.\n\n293\n00:14:14,808 --> 00:14:17,040\nBut you just have to do it, right.\n\n294\n00:14:17,040 --> 00:14:18,810\nYou gotta get it in there and\nget it trusted.\n\n295\n00:14:18,810 --> 00:14:21,840\nIf all of your clients\nare joined to your domain, and\n\n296\n00:14:21,840 --> 00:14:24,860\nyou've got an enterprise CA that's\nActive Directory integrated,\n\n297\n00:14:24,860 --> 00:14:27,490\nthen they're gonna automatically\ntrust that root CA.\n\n298\n00:14:27,490 --> 00:14:28,309\nIt's super easy.\n\n299\n00:14:28,309 --> 00:14:32,010\nSo all that resistance to setting\nup a CA starts to go away.\n\n300\n00:14:32,010 --> 00:14:32,790\n>> Right.\n\n301\n00:14:32,790 --> 00:14:35,410\n>> And you can use this for\nmore than just the VPN side.\n\n302\n00:14:35,410 --> 00:14:40,393\nOnce you get this set up for VPN,\nthe logical next steps lead us to things\n\n303\n00:14:40,393 --> 00:14:44,397\nlike 802.1X authentication,\nWPA2 Enterprise.\n\n304\n00:14:44,397 --> 00:14:48,308\nSo your wireless access points, you can\nset them to do certificate authentication.\n\n305\n00:14:48,308 --> 00:14:51,880\nAnd it really, it starts to make\nlife easier for your users.\n\n306\n00:14:51,880 --> 00:14:56,070\nFrom a design prospective, it's a far\nmore secure and more flexible model so\n\n307\n00:14:56,070 --> 00:14:57,710\nyou really do want to get to that point.\n\n308\n00:14:57,710 --> 00:14:58,350\n>> Absolutely.\n\n309\n00:14:58,350 --> 00:14:59,500\nAbsolutely.\n\n310\n00:14:59,500 --> 00:15:04,170\nDirect access is a, again, we've talked\nabout Direct Access and other solutions.\n\n311\n00:15:04,170 --> 00:15:06,015\nOne cool thing about Direct Access,\n\n312\n00:15:06,015 --> 00:15:09,500\nit gives us the ability to do\nwhat they call Kerberos proxy.\n\n313\n00:15:09,500 --> 00:15:13,970\nWhere Direct Access will actually\nproxy my Kerberos authentication, and\n\n314\n00:15:13,970 --> 00:15:17,500\nit'll remove the requirement for\nneeding certificates.\n\n315\n00:15:17,500 --> 00:15:18,750\nIf you're within a single site.\n\n316\n00:15:18,750 --> 00:15:23,012\nThe problem with the Kerberos proxying is\nit's not gonna go across the site-to-site\n\n317\n00:15:23,012 --> 00:15:27,340\ntype when you're going across from\nlike an office to a branch office or\n\n318\n00:15:27,340 --> 00:15:28,400\nsomething like that.\n\n319\n00:15:28,400 --> 00:15:30,580\nIn that case, we're gonna have\nto fall back to certificates.\n\n320\n00:15:30,580 --> 00:15:35,300\nBut if it's all within one location on\nthat LAN, we can do that reverse proxy.\n\n321\n00:15:35,300 --> 00:15:38,100\n>> Yeah, and\nDirect Access itself is really neat.\n\n322\n00:15:38,100 --> 00:15:39,424\n>> It is.\n>> It's a neat protocol,\n\n323\n00:15:39,424 --> 00:15:41,900\na little difficult and\nchallenging to implement.\n\n324\n00:15:41,900 --> 00:15:44,290\n>> There's a few different\ncomponents to set up I suppose but-\n\n325\n00:15:44,290 --> 00:15:46,220\n>> It's one of the longer labs if you sit\n\n326\n00:15:46,220 --> 00:15:47,240\ndown to configure it.\n\n327\n00:15:47,240 --> 00:15:51,208\nBut once it's in place it's really\nneat because what it effectively is,\n\n328\n00:15:51,208 --> 00:15:52,744\nis a VPN that builds itself.\n\n329\n00:15:52,744 --> 00:15:54,634\n>> It's transparent,\nI mean they're just connected.\n\n330\n00:15:54,634 --> 00:15:56,950\nAs soon as they fire up, in fact,\nthey don't even have to log on, right?\n\n331\n00:15:56,950 --> 00:16:00,018\nI mean, as soon as that computer turns on.\n\n332\n00:16:00,018 --> 00:16:03,609\nIt's connecting in the background,\nif it has an IP connection,\n\n333\n00:16:03,609 --> 00:16:08,010\nit's gonna connect to that work and\nestablish that DirectAccess connection.\n\n334\n00:16:08,010 --> 00:16:09,334\nAnd so by the time the user logs on,\n\n335\n00:16:09,334 --> 00:16:11,710\nthe computer's already\nconnected to the work network.\n\n336\n00:16:11,710 --> 00:16:14,110\nThey're going to see their file shares,\ntheir printers,\n\n337\n00:16:14,110 --> 00:16:16,840\nthey might not even log on, and\nI can remotely manage their machine.\n\n338\n00:16:17,855 --> 00:16:21,500\nCompare to the VPNs, where they've got\nto go and double click on that icon,\n\n339\n00:16:21,500 --> 00:16:25,490\nand if they get disconnected,\nthey've got to go back and click it again,\n\n340\n00:16:25,490 --> 00:16:26,100\nand things like that.\n\n341\n00:16:26,100 --> 00:16:28,035\nSo it's really convenient.\n\n342\n00:16:28,035 --> 00:16:31,570\nDownside being it's only supported\nby Windows 7, Windows 8 maybe, and\n\n343\n00:16:31,570 --> 00:16:36,850\nthe setup required for it,\nbut it works out really well.\n\n344\n00:16:36,850 --> 00:16:41,520\n>> So that's a lot of different\nsolutions that we kind of talked about.\n\n345\n00:16:41,520 --> 00:16:44,848\nSo we talked about, and\nI'm just gonna add these to the notes, so\n\n346\n00:16:44,848 --> 00:16:46,615\nwe've got them in the show notes.\n\n347\n00:16:46,615 --> 00:16:51,666\nSo we talked about remote access VPNs,\nwhich is kinda the traditional\n\n348\n00:16:51,666 --> 00:16:55,775\nsomebody installs a client\non their laptop, right, and\n\n349\n00:16:55,775 --> 00:17:01,698\nthat's gonna be stuff like PPTP, L2TP,\nSSTP, the newer SSL version, right.\n\n350\n00:17:01,698 --> 00:17:04,605\nSo when a lot of people think of VPNs,\nthis is the first thing they think of,\n\n351\n00:17:04,605 --> 00:17:06,866\ncuz it's what end users\nare normally exposed to, right,\n\n352\n00:17:06,866 --> 00:17:08,408\ncuz it's what they've seen the most.\n\n353\n00:17:08,408 --> 00:17:12,436\nSo that type of solution is great\nwhen you have the mobile user,\n\n354\n00:17:12,436 --> 00:17:17,300\nthe person who works from home,\nworks from a hotel, works from the office,\n\n355\n00:17:17,300 --> 00:17:22,240\nand you need standard compatible\nprotocols, right, PPTP, L2TP, SSTP.\n\n356\n00:17:23,550 --> 00:17:25,370\nWhich is great, if you've got Linux or\n\n357\n00:17:25,370 --> 00:17:28,940\nMac OS, they work, it's kinda supported\nby all the different platforms.\n\n358\n00:17:29,940 --> 00:17:35,270\nDirectAccess is another client\nbased VPN solution, right.\n\n359\n00:17:35,270 --> 00:17:37,920\nSo I'm gonna just put here\nclient based VPN solution so\n\n360\n00:17:37,920 --> 00:17:40,000\nwe can remember what that one's for.\n\n361\n00:17:40,000 --> 00:17:43,851\nThis one takes the burden of configuring\na client on the end user's station\n\n362\n00:17:43,851 --> 00:17:44,656\naway, right.\n\n363\n00:17:44,656 --> 00:17:47,708\nThe end user's station basically\nbuilds its own secure connection, so\n\n364\n00:17:47,708 --> 00:17:50,100\nwe don't have to worry about\na lot of the headaches.\n\n365\n00:17:50,100 --> 00:17:53,520\nWe do still have to have a server\nthat's powering this stuff, but\n\n366\n00:17:53,520 --> 00:17:55,230\nit kind of removes the burdens.\n\n367\n00:17:55,230 --> 00:17:59,690\nThe biggest problem with DirectAccess\nis that it's Microsoft proprietary.\n\n368\n00:17:59,690 --> 00:18:01,180\nSo it's super cool,\n\n369\n00:18:01,180 --> 00:18:04,340\nit makes life really easy, but\nit only works on Microsoft clients.\n\n370\n00:18:04,340 --> 00:18:07,299\nSo if you're supporting Linux or\nMac OS or whatever,\n\n371\n00:18:07,299 --> 00:18:09,948\nDirectAccess is not gonna be an option for\nyou.\n\n372\n00:18:09,948 --> 00:18:12,380\nYou're going to have to go\nback to remote access VPNs.\n\n373\n00:18:12,380 --> 00:18:18,160\nSo on the client based VPN solution side,\nthese are really our two choices.\n\n374\n00:18:18,160 --> 00:18:20,640\nAnd we'll see some alternatives later.\n\n375\n00:18:20,640 --> 00:18:23,250\nBut these are the two main choices.\n\n376\n00:18:23,250 --> 00:18:24,110\nAnd on the exam,\n\n377\n00:18:24,110 --> 00:18:27,270\nthe way you determine which one to use\nis gonna be based on your clients.\n\n378\n00:18:27,270 --> 00:18:27,930\nAll right?\n\n379\n00:18:27,930 --> 00:18:29,990\nDirectAccess support was\nintroduced in Windows 7?\n\n380\n00:18:29,990 --> 00:18:33,032\n>> Yeah, they went back and added support\nfor Windows 7, so Windows 7, Windows 8.\n\n381\n00:18:33,032 --> 00:18:36,657\nI think Windows 7,\nnot the home version, right?\n\n382\n00:18:36,657 --> 00:18:38,480\nSo Pro and Enterprise on Windows 7.\n\n383\n00:18:38,480 --> 00:18:43,210\n>> So if you see Windows 7 Home Version or\nWindows Vista any version on the exam,\n\n384\n00:18:43,210 --> 00:18:46,170\nthat's gonna be a scenario where\nDirectAccess is not gonna work for you.\n\n385\n00:18:46,170 --> 00:18:52,710\nYou're gonna need to step back to\nthe traditional VPN protocols.\n\n386\n00:18:52,710 --> 00:18:55,810\nAll right, so\nthose are the client based ones.\n\n387\n00:18:55,810 --> 00:18:58,970\nAnd then on the site to\nsite side of things,\n\n388\n00:18:58,970 --> 00:19:05,170\nwhen we build up connections between\nsites, so site to site, right?\n\n389\n00:19:05,170 --> 00:19:07,710\nThe most common one there is IPsec, right?\n\n390\n00:19:07,710 --> 00:19:12,510\nWe wanna build an IPsec VPN between two\nfirewalls or two routers or a router and\n\n391\n00:19:12,510 --> 00:19:15,980\na firewall, or whatever, or\ntwo Windows servers, they can do it.\n\n392\n00:19:15,980 --> 00:19:18,960\nIPsec works great, you can use\n\n393\n00:19:20,340 --> 00:19:25,310\nPSK authentication or\ncertificate authentication, right?\n\n394\n00:19:25,310 --> 00:19:28,480\nBut obviously we wanna use\ncertificate authentication if we can,\n\n395\n00:19:28,480 --> 00:19:29,780\nif we have the infrastructure.\n\n396\n00:19:29,780 --> 00:19:34,438\nThe smaller your office, the less likely\nyou're gonna have a PKI in place, so\n\n397\n00:19:34,438 --> 00:19:36,282\nthe PSK is a good alternative.\n\n398\n00:19:36,282 --> 00:19:38,074\nThat was a lot of\nacronyms in one sentence.\n\n399\n00:19:38,074 --> 00:19:39,990\nI've got to be careful about that.\n>> It really was, wasn't it?\n\n400\n00:19:39,990 --> 00:19:41,573\nAlmost as many as your lower third.\n\n401\n00:19:41,573 --> 00:19:44,865\n[LAUGH]\n>> [LAUGH] All right.\n\n402\n00:19:44,865 --> 00:19:47,831\nSo, what other ones, I know we mentioned,\n\n403\n00:19:47,831 --> 00:19:51,050\nthe web service proxy\nwe'll talk about later.\n\n404\n00:19:52,630 --> 00:19:56,980\nAnd I think those are kinda the three\nmain ones as we start to do our designs.\n\n405\n00:19:56,980 --> 00:19:58,780\nRemember that you can mix and\nmatch these, and\n\n406\n00:19:58,780 --> 00:20:01,470\njust remember that each one\nserves a different purpose,\n\n407\n00:20:01,470 --> 00:20:05,300\nfits a different scenario, and we need to\npick the appropriate one for our scenario.\n\n408\n00:20:05,300 --> 00:20:07,270\n>> And nothing limits us to just one,\neither.\n\n409\n00:20:07,270 --> 00:20:08,540\nWe might be doing more than one.\n\n410\n00:20:08,540 --> 00:20:11,660\nWe might decide that we\nreally like DirectAccess and\n\n411\n00:20:11,660 --> 00:20:14,460\nwe want those capabilities, so\nwe're going to put it in place.\n\n412\n00:20:14,460 --> 00:20:16,834\nBut I do have a couple of Linux\nlaptops floating out there or\n\n413\n00:20:16,834 --> 00:20:19,190\nsomething like that that\nI still have to support.\n\n414\n00:20:19,190 --> 00:20:20,640\nSo we run VPN as well.\n\n415\n00:20:20,640 --> 00:20:22,190\nSo we can do both if we need to.\n\n416\n00:20:22,190 --> 00:20:25,150\nAnd that's something we've\ngot to come up in our design.\n\n417\n00:20:25,150 --> 00:20:29,290\nIn the initial phase, we've got to think\nabout, what do we need to support?\n\n418\n00:20:29,290 --> 00:20:31,030\nYou know,\nwhat clients do we have out there?\n\n419\n00:20:31,030 --> 00:20:33,530\nAnd think about what clients we\nmight have in the future as well.\n\n420\n00:20:33,530 --> 00:20:35,000\nWe don't want to limit ourselves.\n\n421\n00:20:35,000 --> 00:20:37,630\n>> Yep.\nAll right, some of the other things we're\n\n422\n00:20:37,630 --> 00:20:41,130\ngoing to need to think about as we\nstart to deploy these VPNs, right.\n\n423\n00:20:41,130 --> 00:20:42,760\nI even had it in my diagram.\n\n424\n00:20:42,760 --> 00:20:44,280\nWhere'd that diagram go?\n\n425\n00:20:44,280 --> 00:20:45,080\nHere.\n\n426\n00:20:45,080 --> 00:20:48,410\nYou know, we're likely gonna\nhave firewalls in place.\n\n427\n00:20:48,410 --> 00:20:53,450\nAnd that firewall may be sitting in\nbetween my clients and their connectivity.\n\n428\n00:20:53,450 --> 00:20:57,073\nSo if I take a look at my home remote\nuser here, who's on a laptop, right.\n\n429\n00:20:57,073 --> 00:21:00,490\nThey pass through a NAT router,\nit's pretty common these days.\n\n430\n00:21:00,490 --> 00:21:01,790\nThey pass across the Internet.\n\n431\n00:21:01,790 --> 00:21:03,160\nThey hit this firewall.\n\n432\n00:21:03,160 --> 00:21:07,030\nThey go into my DMZ to get to my remote\naccess server that they're VPNing into.\n\n433\n00:21:07,030 --> 00:21:07,590\nRight?\n\n434\n00:21:07,590 --> 00:21:11,700\nWell, the firewall is not really involved\nin the VPN communication, right?\n\n435\n00:21:11,700 --> 00:21:15,510\nThe client is building a VPN to my\nremote access server to gain access.\n\n436\n00:21:15,510 --> 00:21:19,050\nWell, it doesn't matter that the firewall\nis not participating in the VPN,\n\n437\n00:21:19,050 --> 00:21:21,180\nit is blocking and allowing traffic.\n\n438\n00:21:21,180 --> 00:21:23,840\nAnd so there's a firewall configuration\nthat we're gonna need to do there.\n\n439\n00:21:23,840 --> 00:21:27,698\nThere's definitely a configuration if that\nfirewall is terminating the VPN, right?\n\n440\n00:21:27,698 --> 00:21:29,620\nWe know we're gonna have\nto configure there.\n\n441\n00:21:29,620 --> 00:21:31,633\nBut if we're just trying to\nallow VPN communications to pass\n\n442\n00:21:31,633 --> 00:21:34,323\nthrough the firewall, there's some things\nthat we're going to have to allow.\n\n443\n00:21:34,323 --> 00:21:34,990\n>> Mm-hm.\n\n444\n00:21:34,990 --> 00:21:36,210\nYeah, we've got a few different ones.\n\n445\n00:21:36,210 --> 00:21:39,330\nAnd depending on whether we're\ndealing with IPv4 or IPv6.\n\n446\n00:21:40,460 --> 00:21:44,433\nAnd if we're dealing with IPv4, then we\ngotta start throwing in, at least for\n\n447\n00:21:44,433 --> 00:21:48,231\nDirectAccess, we start throwing in\nsome of our encapsulating protocols or\n\n448\n00:21:48,231 --> 00:21:50,603\nour little stopgaps to\nallow the IPv4 to work,\n\n449\n00:21:50,603 --> 00:21:53,906\nor tunneling, I guess we'll call them,\ntunneling protocols.\n\n450\n00:21:53,906 --> 00:21:57,490\nTunneling IPv6 over IPv4.\n\n451\n00:21:57,490 --> 00:22:02,615\nAnd you've got UDP 3554\nif we're doing Teredo.\n\n452\n00:22:02,615 --> 00:22:06,451\nIf we're doing, what was the other one\nI wanted to mention in there, 6 to 4,\n\n453\n00:22:06,451 --> 00:22:08,448\nit's gonna be Internet Protocol 41.\n\n454\n00:22:08,448 --> 00:22:13,240\nBoth of those need both inbound and\noutbound for IPv4 traffic.\n\n455\n00:22:13,240 --> 00:22:16,281\nTCP 62000.\n\n456\n00:22:16,281 --> 00:22:18,865\nInbound for the network location server.\n\n457\n00:22:18,865 --> 00:22:20,178\nNow, in our other shows,\n\n458\n00:22:20,178 --> 00:22:24,210\nI think we've gone over the different\ncomponents of a DirectAccess solution.\n\n459\n00:22:24,210 --> 00:22:27,950\nRemember that network location server is\nthe one, if a client's going to establish\n\n460\n00:22:27,950 --> 00:22:29,780\na direct, remember,\nit's all done behind the scenes, right?\n\n461\n00:22:29,780 --> 00:22:33,113\nIt's not the user interacting with it,\nso the machine, the client,\n\n462\n00:22:33,113 --> 00:22:36,573\nneeds to be able to determine,\nam I inside the network, or am I outside?\n\n463\n00:22:36,573 --> 00:22:39,490\nAnd that's what that network\nlocation server is for.\n\n464\n00:22:39,490 --> 00:22:42,760\nAnd that's gonna need port 62000 in\norder to connect to that network\n\n465\n00:22:42,760 --> 00:22:44,720\nlocation server.\n\n466\n00:22:44,720 --> 00:22:48,420\n>> And if you're trying to scribble these\ndown furiously in the background or\n\n467\n00:22:48,420 --> 00:22:52,500\nwhatever, we're gonna post them with the\nshow notes, so you'll have these entries.\n\n468\n00:22:52,500 --> 00:22:57,490\nThe exam, it doesn't typically dive\ninto raw port numbers like this,\n\n469\n00:22:57,490 --> 00:23:00,290\nbut the exam objective is saying,\nwhat do you need to know for\n\n470\n00:23:00,290 --> 00:23:02,260\nthe firewall configuration,\nand these are things, right?\n\n471\n00:23:02,260 --> 00:23:04,292\nAs we do our design,\nif there's a firewall in between,\n\n472\n00:23:04,292 --> 00:23:06,906\nwe're gonna need to open up some\nports to allow these communications.\n\n473\n00:23:06,906 --> 00:23:07,820\n>> Right, right.\n\n474\n00:23:07,820 --> 00:23:09,800\nYeah, and these are ports on\nyour remote access server.\n\n475\n00:23:09,800 --> 00:23:13,170\nSo in Don's diagram,\nthis would be back on that RAS back there.\n\n476\n00:23:13,170 --> 00:23:16,740\nIf you're doing IPv6,\nyou're gonna need Internet Protocol 50.\n\n477\n00:23:16,740 --> 00:23:24,010\nIf you're doing both inbound and\noutbound, UDP 500 for the IPv6 traffic.\n\n478\n00:23:24,010 --> 00:23:26,625\nAnd then ICMPv6 if we're using Teredo.\n\n479\n00:23:28,640 --> 00:23:32,150\nThe firewall itself, if the firewall is\nnot the end point, if we're trying to\n\n480\n00:23:32,150 --> 00:23:36,780\nconnect back to that remote access server,\nwe still have to set up the firewall\n\n481\n00:23:36,780 --> 00:23:40,190\nrules on the remote access server to\nallow that connection to be established.\n\n482\n00:23:40,190 --> 00:23:43,320\nThe firewall, though, is gonna have to\nallow some traffic to go through, right?\n\n483\n00:23:43,320 --> 00:23:47,930\nSo we've gotta make sure that all the\ntraffic, whatever protocol we're using,\n\n484\n00:23:47,930 --> 00:23:50,340\nis gonna have to be allowed in\nthat firewall in that case,\n\n485\n00:23:50,340 --> 00:23:52,000\nif it's not the endpoint itself.\n\n486\n00:23:52,000 --> 00:23:54,645\n>> Yeah, and you mentioned UDP 500.\n\n487\n00:23:54,645 --> 00:23:56,828\nYou very well may have\nUDP 500 open already,\n\n488\n00:23:56,828 --> 00:23:59,784\nbecause that's the default port for\nIPsec traffic in general.\n\n489\n00:23:59,784 --> 00:24:00,394\n>> Mm-hm.\n\n490\n00:24:00,394 --> 00:24:04,965\n>> Remember that IPv6 It's\ngot IPsec built into it.\n\n491\n00:24:04,965 --> 00:24:09,450\nSo when IPv6 does encryption, it's almost\nalways using the regular IPsec framework,\n\n492\n00:24:09,450 --> 00:24:11,200\nwhich typically uses UDP500.\n\n493\n00:24:11,200 --> 00:24:15,390\nIt can be overridden, which can be useful\nin some scenarios, but that's the default.\n\n494\n00:24:15,390 --> 00:24:20,190\nSo keep that in mind with all of this,\nis that these are the default numbers.\n\n495\n00:24:20,190 --> 00:24:23,160\nIf you're going to see numbers on the\nexam, these are the numbers you'll see.\n\n496\n00:24:23,160 --> 00:24:26,768\nBut in real life land, you may have chosen\nto override this for various reasons,\n\n497\n00:24:26,768 --> 00:24:29,797\nright, to avoid fingerprinting of\nyour network and remote scans,\n\n498\n00:24:29,797 --> 00:24:31,200\nthings of that nature.\n\n499\n00:24:31,200 --> 00:24:33,100\nIt's like SSH, right?\n\n500\n00:24:33,100 --> 00:24:37,670\nSSH always runs on port 22, but almost\nall the net admins out there change it to\n\n501\n00:24:37,670 --> 00:24:39,480\na different port just to move it off.\n\n502\n00:24:39,480 --> 00:24:41,210\nIt's like security through obscurity.\n\n503\n00:24:41,210 --> 00:24:43,870\n>> Yeah, absolutely, and one of our\nbasic hardening techniques is to\n\n504\n00:24:43,870 --> 00:24:47,220\nchange your default configurations,\nbecause everybody knows what they are.\n\n505\n00:24:47,220 --> 00:24:48,740\n>> Yup, absolutely.\n\n506\n00:24:48,740 --> 00:24:50,660\nAll right, so keep that in mind,\n\n507\n00:24:50,660 --> 00:24:52,950\nthat even if the firewall is\nnot participating in the VPN,\n\n508\n00:24:52,950 --> 00:24:56,420\nwe're probably gonna have to open up\nsome ports to allow the traffic through.\n\n509\n00:24:56,420 --> 00:25:00,720\nAnd that's just part and\nparcel of doing this design work.\n\n510\n00:25:00,720 --> 00:25:05,660\nAnother thing to keep in mind is that\nwhen you're doing site-to-site VPNs,\n\n511\n00:25:05,660 --> 00:25:11,500\nit's really useful to have static\nIPs on both sides of the tunnel.\n\n512\n00:25:11,500 --> 00:25:14,890\nYou don't have to, but\nit does make life a lot easier.\n\n513\n00:25:14,890 --> 00:25:16,980\nYou'll find your tunnels\nare a lot more reliable.\n\n514\n00:25:16,980 --> 00:25:21,540\nSo if I'm building a site-to-site VPN like\nthis, if I can have a static public IP\n\n515\n00:25:21,540 --> 00:25:26,230\non both ends of the tunnel, either end of\nthe tunnel can wake up the connection.\n\n516\n00:25:26,230 --> 00:25:30,010\nRemember, tunnels, if they sit\nidle long enough, they'll go down.\n\n517\n00:25:30,010 --> 00:25:32,600\nAnd it's only when the next time\nsomebody tries to throw traffic over it,\n\n518\n00:25:32,600 --> 00:25:34,630\nthe tunnel will come back up.\n\n519\n00:25:34,630 --> 00:25:38,341\nWell, if I have a static IP on one side,\nlike at my headquarters,\n\n520\n00:25:38,341 --> 00:25:42,927\nand a dynamic IP over here, the branch\noffice can wake the tunnel up because it's\n\n521\n00:25:42,927 --> 00:25:45,130\ngot a static IP to reach out to.\n\n522\n00:25:45,130 --> 00:25:48,250\nBut the home office\ncan't wake up the tunnel\n\n523\n00:25:48,250 --> 00:25:52,260\nbecause when it goes to communicate with\nthe branch, the branch has a dynamic IP.\n\n524\n00:25:52,260 --> 00:25:54,080\nWe don't know what to reach out to.\n\n525\n00:25:54,080 --> 00:25:56,650\nSo that makes it where\nthe home office can't\n\n526\n00:25:56,650 --> 00:25:59,260\ninitiate communications\nwhile the tunnel is down.\n\n527\n00:25:59,260 --> 00:26:01,340\nWe would have to wait for\nthe branch to wake back up.\n\n528\n00:26:01,340 --> 00:26:03,340\nThat makes remote management a hassle.\n\n529\n00:26:03,340 --> 00:26:06,010\nSo static IPs on both\nends solves that problem.\n\n530\n00:26:06,010 --> 00:26:08,580\nIt allows both ends of\nthe tunnel to wake it up.\n\n531\n00:26:08,580 --> 00:26:10,000\nThere's other solutions, you know,\n\n532\n00:26:10,000 --> 00:26:14,100\nyou can get like constant pings going over\nthe tunnel to keep it up, stuff like that.\n\n533\n00:26:14,100 --> 00:26:15,960\nBut it's just better to have statics.\n\n534\n00:26:15,960 --> 00:26:18,120\nWhere that's not possible\nis that remote user.\n\n535\n00:26:18,120 --> 00:26:20,280\nRemote user,\nthey're moving all over the place.\n\n536\n00:26:20,280 --> 00:26:24,360\nSo that VPN tunnel has\nto be initiated by them.\n\n537\n00:26:24,360 --> 00:26:28,350\nThat brings in some extra considerations,\nthings like Windows updates and\n\n538\n00:26:28,350 --> 00:26:31,190\nremotely managing the system\nbecause they might wander off and\n\n539\n00:26:31,190 --> 00:26:35,680\nnot VPN in for weeks on end, and\nnow they start to get behind.\n\n540\n00:26:35,680 --> 00:26:40,260\nAnd so how do we protect our network from\nthem bringing an infected machine or\n\n541\n00:26:40,260 --> 00:26:42,070\na compromised machine back onto it?\n\n542\n00:26:42,070 --> 00:26:45,066\nWe'll want to couple this\nwith technologies like NAP,\n\n543\n00:26:45,066 --> 00:26:49,180\nnetwork access protection, so we can check\nthose machines before coming back in.\n\n544\n00:26:49,180 --> 00:26:53,170\nYou don't need NAP when you're\ndoing a site to site like this.\n\n545\n00:26:53,170 --> 00:26:55,490\nYou know, that one's always up and\npeople are connected.\n\n546\n00:26:55,490 --> 00:26:59,300\nBut with a remote access user, you really\nbenefit from having something like NAP.\n\n547\n00:26:59,300 --> 00:27:00,400\n>> Absolutely, absolutely.\n\n548\n00:27:02,130 --> 00:27:02,700\n>> All right, let's see.\n\n549\n00:27:02,700 --> 00:27:04,550\nWhat else do we have here on our list?\n\n550\n00:27:04,550 --> 00:27:06,820\nWe got a whole shopping list\nof stuff to do on this one.\n\n551\n00:27:06,820 --> 00:27:08,030\n>> We do.\nWe kind of already talked about\n\n552\n00:27:08,030 --> 00:27:10,660\nclient site to sites.\n\n553\n00:27:10,660 --> 00:27:13,245\nMentioned redundancy for\nthat remote access server.\n\n554\n00:27:13,245 --> 00:27:17,340\nHave you ever done that,\nactually set two different ISPs,\n\n555\n00:27:17,340 --> 00:27:19,920\nhave your remote access server\nconnected to two different ones?\n\n556\n00:27:19,920 --> 00:27:23,970\n>> I've done it where I had two different\nremote access servers on two different\n\n557\n00:27:23,970 --> 00:27:24,490\nISPs.\n\n558\n00:27:24,490 --> 00:27:28,120\nYou can do one, but it's up to you.\n\n559\n00:27:28,120 --> 00:27:31,150\nIt depends on how critical your VPN is.\n\n560\n00:27:31,150 --> 00:27:34,950\nIf you've got remote users that can\nonly work when they're VPNed in,\n\n561\n00:27:34,950 --> 00:27:38,370\nand if the VPN goes down, they can't work.\n\n562\n00:27:38,370 --> 00:27:39,860\nYou need more than one ISP.\n\n563\n00:27:40,890 --> 00:27:45,330\nAnd at every company I've worked for,\nif you had a need for\n\n564\n00:27:45,330 --> 00:27:49,140\nmore than one ISP, you had a need for\nmore than one VPN server.\n\n565\n00:27:49,140 --> 00:27:52,380\nAnd so\nwhat we would traditionally do is set up\n\n566\n00:27:52,380 --> 00:27:56,690\ntwo VPN servers on two different ISPs and\nthen do DNS round robins.\n\n567\n00:27:56,690 --> 00:28:02,730\nSo people would VPN into, not an IP, but\na name, VPN.company.com or whatever.\n\n568\n00:28:02,730 --> 00:28:05,900\nAnd that way they could round robin\nbetween them and be guaranteed connection.\n\n569\n00:28:05,900 --> 00:28:07,826\nYou don't have to do round robin DNS,\nthough,\n\n570\n00:28:07,826 --> 00:28:10,890\ncuz when you define a VPN connection,\nyou can setup alternate servers to\n\n571\n00:28:10,890 --> 00:28:13,930\nconnect to for it to try if you have\nprimaries and backups and so on.\n\n572\n00:28:13,930 --> 00:28:16,660\nSo you can definitely do that.\n\n573\n00:28:16,660 --> 00:28:19,900\nAnother thing worth sneaking in right\nhere before the break is bandwidth.\n\n574\n00:28:19,900 --> 00:28:20,580\nRight?\n\n575\n00:28:20,580 --> 00:28:24,180\nWe need to think about the bandwidth that\nthese VPN users are going to consume.\n\n576\n00:28:24,180 --> 00:28:27,300\nAnd as far as them\naccessing local resources,\n\n577\n00:28:27,300 --> 00:28:29,800\nwe don't normally sweat that too much.\n\n578\n00:28:29,800 --> 00:28:32,920\nBut depending on how you've\nconfigured your routing,\n\n579\n00:28:32,920 --> 00:28:36,890\nthey may be routing all of their\ntraffic across that VPN tunnel,\n\n580\n00:28:36,890 --> 00:28:41,600\nnot just traffic to your internal network,\nall right?\n\n581\n00:28:41,600 --> 00:28:45,360\n>> Big advantage of direct access there,\nit's a lot easier cuz with direct access,\n\n582\n00:28:45,360 --> 00:28:48,230\nas we saw in earlier episodes,\nI can keep that traffic separate.\n\n583\n00:28:48,230 --> 00:28:51,210\nThe traffic that's going to my corporate\nnetwork is gonna travel through that\n\n584\n00:28:51,210 --> 00:28:54,410\ntunnel established back\nover to the corporate side.\n\n585\n00:28:54,410 --> 00:28:56,630\nMy internet traffic, searching, Google or\n\n586\n00:28:56,630 --> 00:28:59,160\nwhatever, is not gonna\ngo through that tunnel.\n\n587\n00:28:59,160 --> 00:29:02,460\nBut with VPNs, as Don pointed out, a lot\nof times that traffic all goes through\n\n588\n00:29:02,460 --> 00:29:05,800\nthere, gets routed out to the Internet,\nback through the corporate network and\n\n589\n00:29:05,800 --> 00:29:06,820\nthen back out to that client.\n\n590\n00:29:06,820 --> 00:29:10,620\nAnd that can start to add up if you've\ngot several concurrent connections.\n\n591\n00:29:10,620 --> 00:29:11,380\n>> That's exactly right.\n\n592\n00:29:11,380 --> 00:29:15,950\nAnd when you configure a VPN tunnel,\nthere's two ways to configure it.\n\n593\n00:29:15,950 --> 00:29:19,650\nThe one way is where all of their\ntraffic goes over the VPN tunnel, right?\n\n594\n00:29:19,650 --> 00:29:22,716\nSo going back to my diagram here,\nif this home user VPNs\n\n595\n00:29:22,716 --> 00:29:28,130\ninto that remote access server, and all of\ntheir traffic is going over the tunnel.\n\n596\n00:29:28,130 --> 00:29:33,030\nWell, if they fire up Netflix or\nAmazon or whatever and they think, hey,\n\n597\n00:29:33,030 --> 00:29:36,210\nI'm at home, I'm on my own laptop,\nit's okay for me to go to Netflix.\n\n598\n00:29:36,210 --> 00:29:39,260\nBut they're actually going through\nthe tunnel to the office and\n\n599\n00:29:39,260 --> 00:29:40,510\nthen back out to the Internet.\n\n600\n00:29:40,510 --> 00:29:44,720\nSo when that movie plays, the movie is\ndownloading to your headquarters and\n\n601\n00:29:44,720 --> 00:29:46,790\nthen uploading back over the VPN tunnel.\n\n602\n00:29:46,790 --> 00:29:50,450\nIt's doubling the bandwidth consumption\nof that client connecting, so\n\n603\n00:29:50,450 --> 00:29:51,860\nthat's a big deal.\n\n604\n00:29:53,020 --> 00:29:56,950\nAn alternative is to configure\nwhat's called split tunneling.\n\n605\n00:29:56,950 --> 00:30:00,170\nWith split tunneling, that's what\nwe say when somebody remotes in,\n\n606\n00:30:00,170 --> 00:30:04,120\nwe give them the routes for\nour local networks only.\n\n607\n00:30:04,120 --> 00:30:08,280\nSo maybe your home office\nis using 10.1.0.0.\n\n608\n00:30:08,280 --> 00:30:11,530\nSo you would push that route to them and\n\n609\n00:30:11,530 --> 00:30:14,070\nsay, 10.1.0.0 is available\nvia the VPN tunnel.\n\n610\n00:30:14,070 --> 00:30:15,750\nEverything else, you're on your own.\n\n611\n00:30:15,750 --> 00:30:21,390\nAnd that way when they access a 10.1.0.0\naddress, they'll go over the VPN tunnel.\n\n612\n00:30:21,390 --> 00:30:23,350\nWhen they go to Netflix or\na Amazon or whatever,\n\n613\n00:30:23,350 --> 00:30:24,510\nthey just go straight out to the Internet.\n\n614\n00:30:25,550 --> 00:30:31,900\nNow that sounds like a great solution,\nbut their VPN didn't connect it.\n\n615\n00:30:31,900 --> 00:30:34,780\nIf they then go to some\nmalicious website and\n\n616\n00:30:34,780 --> 00:30:38,110\nget infected,\nthey're infected while the tunnel is up.\n\n617\n00:30:38,110 --> 00:30:40,790\nYou're creating a back\ndoor into your network.\n\n618\n00:30:40,790 --> 00:30:45,170\nYou need to ensure\nthe security of those remote\n\n619\n00:30:45,170 --> 00:30:46,820\nmachines if you're gonna\ndo split tunneling.\n\n620\n00:30:48,210 --> 00:30:51,710\nMore commonly the solution that\nI do is to configure the VPN\n\n621\n00:30:51,710 --> 00:30:56,210\ntunnel to provide a route and\nthen kill off all other traffic.\n\n622\n00:30:56,210 --> 00:30:58,350\nTo say while you're VPNed in,\n\n623\n00:30:58,350 --> 00:31:02,250\nyou can get to 10.1.0.0 and that's it,\nyou can't get to the Internet.\n\n624\n00:31:02,250 --> 00:31:03,550\n>> And your end users love you.\n\n625\n00:31:03,550 --> 00:31:04,510\n>> Oh yeah, they hate it, right?\n\n626\n00:31:04,510 --> 00:31:07,980\nBecause they'll VPN in to do some work,\nthen they've got to disconnect,\n\n627\n00:31:07,980 --> 00:31:10,010\nthen they've got to reconnect,\nand it's really frustrating.\n\n628\n00:31:10,010 --> 00:31:12,630\nBut if you can't guarantee\nthe security of those remote machines,\n\n629\n00:31:12,630 --> 00:31:14,080\nthat's what you have to do.\n\n630\n00:31:14,080 --> 00:31:16,940\nBut if you know that remote\nmachine is being managed,\n\n631\n00:31:16,940 --> 00:31:19,850\nyou know you've got network policy\nserver that's checking for health and\n\n632\n00:31:19,850 --> 00:31:23,330\nall that stuff, you know that you've\ngot anti-virus deployed on it,\n\n633\n00:31:23,330 --> 00:31:26,970\nand that it's checking in,\nand the machine is healthy.\n\n634\n00:31:26,970 --> 00:31:30,530\nIf you can ensure all of that, then sure,\nsplit tunneling is a great option, and\n\n635\n00:31:30,530 --> 00:31:33,960\nyou can have people where they're\nstill able to use their machines\n\n636\n00:31:33,960 --> 00:31:36,490\neven when they're VPNed in for\nthings other than work.\n\n637\n00:31:38,170 --> 00:31:42,430\nBut most companies will tell you\nyour laptop is a tool, not a toy.\n\n638\n00:31:42,430 --> 00:31:46,050\nYou should be using it for work, and while\nit's nice that you can go to Facebook,\n\n639\n00:31:46,050 --> 00:31:47,065\nit's not really a requirement.\n\n640\n00:31:47,065 --> 00:31:48,561\n>> Uh-oh, don't tell Jason.\n\n641\n00:31:48,561 --> 00:31:51,274\n[LAUGH]\n>> All right, well, ladies and gentlemen,\n\n642\n00:31:51,274 --> 00:31:54,164\nthat's probably a good spot for\nus to stop and take a break.\n\n643\n00:31:54,164 --> 00:31:57,475\nWe're gonna talk more about direct\naccess and some other things.\n\n644\n00:31:57,475 --> 00:31:59,852\nWe got a-\n>> Yeah, we got C Mac and\n\n645\n00:31:59,852 --> 00:32:00,454\na-\n>> Microsoft Azure,\n\n646\n00:32:00,454 --> 00:32:01,113\nwe didn't even talk about that one.\n\n647\n00:32:01,113 --> 00:32:01,844\nYeah.\n\n648\n00:32:01,844 --> 00:32:06,654\n>> Yep so, we got some more topics to get\ninto in the world of designing for VPNs so\n\n649\n00:32:06,654 --> 00:32:07,760\nstay tuned.\n\n650\n00:32:07,760 --> 00:32:10,975\nWe'll be back after this.\n\n651\n00:32:10,975 --> 00:32:18,117\n[SOUND] All right, welcome back everybody.\n\n652\n00:32:18,117 --> 00:32:21,153\nSo let's talk about a couple\nof other little nuts and\n\n653\n00:32:21,153 --> 00:32:23,325\nbolts that are left over about VPNs.\n\n654\n00:32:23,325 --> 00:32:23,940\n>> Uh-huh.\n\n655\n00:32:23,940 --> 00:32:29,440\n>> One of the big ones that we need\nto mention is Microsoft Azure.\n\n656\n00:32:29,440 --> 00:32:32,490\nObviously, Microsoft is very proud of\ntheir cloud service, and they should be.\n\n657\n00:32:32,490 --> 00:32:34,060\nIt's a really good service.\n\n658\n00:32:34,060 --> 00:32:38,917\nIf you're gonna start deploying servers,\nworkstations whatever it is that\n\n659\n00:32:38,917 --> 00:32:42,072\nyou choose to deploy out\nthere in the Azure cloud.\n\n660\n00:32:42,072 --> 00:32:44,300\nYou may need to have\na secure connection to.\n\n661\n00:32:44,300 --> 00:32:47,158\nI have to say may, but maybe, you'll\nhave an unsecure [CROSSTALK] whatever.\n\n662\n00:32:47,158 --> 00:32:49,530\n>> [LAUGH]\n>> If you're deploying things like\n\n663\n00:32:49,530 --> 00:32:51,700\ndatabase servers, email servers and so on.\n\n664\n00:32:51,700 --> 00:32:52,865\nSome of them may be public-facing.\n\n665\n00:32:52,865 --> 00:32:54,100\nRight?\nA web server,\n\n666\n00:32:54,100 --> 00:32:55,760\nyou want that to be public-facing.\n\n667\n00:32:55,760 --> 00:32:58,380\nSo you don't necessarily need\nsecure connections to that,\n\n668\n00:32:58,380 --> 00:33:00,340\nbecause it's a public-facing server.\n\n669\n00:33:00,340 --> 00:33:05,110\nBut if you deploy something like\na email client access server.\n\n670\n00:33:05,110 --> 00:33:07,690\nYou don't necessarily want that\nto be exposed to the internet.\n\n671\n00:33:07,690 --> 00:33:10,700\nOr a database server, you definitely\ndon't want that exposed to the internet.\n\n672\n00:33:10,700 --> 00:33:14,020\nSo you need a secure method to be\nable to connect to that server.\n\n673\n00:33:14,020 --> 00:33:17,350\nNow, you could always use\nthe Azure Control Panel.\n\n674\n00:33:17,350 --> 00:33:19,650\nAnd go into there, and\nthen pull up the console that way.\n\n675\n00:33:19,650 --> 00:33:21,160\nBut that's not gonna be good for\nyour end users.\n\n676\n00:33:21,160 --> 00:33:22,290\n>> Right.\n\n677\n00:33:22,290 --> 00:33:25,462\n>> So if you want your end users to be\nable to access resources in the Azure\n\n678\n00:33:25,462 --> 00:33:29,290\ncloud securely, you're typically\ngonna build a VPN and tunnel to it.\n\n679\n00:33:29,290 --> 00:33:30,930\nAnd fortunately,\nthey've got support for it.\n\n680\n00:33:30,930 --> 00:33:33,710\nLet me just give you kind of\na high level overview of it.\n\n681\n00:33:33,710 --> 00:33:39,190\nI know, in the 70410 show, if you jump\nover to that first of our server show,\n\n682\n00:33:39,190 --> 00:33:43,650\nI believe it was Nate and I, we did\nan episode specifically on how to do this.\n\n683\n00:33:43,650 --> 00:33:44,620\nSo if you haven't done it before,\n\n684\n00:33:44,620 --> 00:33:47,730\nwe show how to build that VPN\ntunnel to connect up to Azure.\n\n685\n00:33:47,730 --> 00:33:50,110\nBut what you do is in Azure,\n\n686\n00:33:50,110 --> 00:33:53,910\nthere's a simple wizard you run through\nwhere you specify your VPN settings.\n\n687\n00:33:53,910 --> 00:33:56,540\nAnd it then, exports a config for you.\n\n688\n00:33:56,540 --> 00:33:59,840\nThat, on the other side, can be loaded\non to a Windows remote access server.\n\n689\n00:33:59,840 --> 00:34:01,240\nThat's what we used on the show.\n\n690\n00:34:01,240 --> 00:34:05,810\nOr you could throw it onto a Cisco ASA,\nor whatever to create that VPN tunnel.\n\n691\n00:34:05,810 --> 00:34:11,570\nWhen that happens, you're Azure cloud is\nnow linked to your headquarters' network.\n\n692\n00:34:11,570 --> 00:34:15,180\nAnd your clients can remote into your\nheadquarters and gain access to your Azure\n\n693\n00:34:15,180 --> 00:34:18,240\ncloud, or they can be at the headquarters\nand gain access to your Azure cloud, but\n\n694\n00:34:18,240 --> 00:34:21,320\nnow, you've got a secure and\nprivate communication up there.\n\n695\n00:34:21,320 --> 00:34:26,140\nSo if you want to put a domain\ncontroller up there in the Azure cloud,\n\n696\n00:34:26,140 --> 00:34:27,780\nthis is a great way to do it.\n\n697\n00:34:27,780 --> 00:34:30,370\nYou wouldn't want to do domain\nreplication across the internet and\n\n698\n00:34:30,370 --> 00:34:31,680\nhave it not be secured.\n\n699\n00:34:31,680 --> 00:34:33,590\nThat's a recipe for disaster.\n\n700\n00:34:33,590 --> 00:34:34,800\nBut building up that tunnel helps.\n\n701\n00:34:34,800 --> 00:34:38,360\nNow, on the exam when it\ncomes to designing this,\n\n702\n00:34:38,360 --> 00:34:40,810\nthere's some little caveats\nyou need to be aware of.\n\n703\n00:34:40,810 --> 00:34:45,080\nThe main one is the exam hasn't\nbeen updated to reflect some new\n\n704\n00:34:45,080 --> 00:34:47,440\nchanges in Azure over the last few months.\n\n705\n00:34:47,440 --> 00:34:55,620\nSo when you configure an Azure VPN, it can\nonly do a VPN to one location, all right.\n\n706\n00:34:55,620 --> 00:34:57,440\nThat's changed in real life land.\n\n707\n00:34:57,440 --> 00:35:01,120\nIf you go to Azure right now, you can\nhave it VPN into more than one location.\n\n708\n00:35:01,120 --> 00:35:05,570\nSo for example, if I have a headquarters\nand a disaster recovery location, and\n\n709\n00:35:05,570 --> 00:35:07,490\nI want both of them to be\nconnected to my Azure cloud.\n\n710\n00:35:07,490 --> 00:35:11,410\nOr if I have a headquarters and\n10 branch offices, and\n\n711\n00:35:11,410 --> 00:35:14,350\nI want all the branch offices\nto go directly to Azure.\n\n712\n00:35:14,350 --> 00:35:16,690\nWell, on the exam,\nit still set the old way.\n\n713\n00:35:16,690 --> 00:35:20,470\nWhich means your Azure cloud\nVPNs to your headquarters.\n\n714\n00:35:20,470 --> 00:35:24,360\nFrom there, all of your branches,\nthey would need to connect up to\n\n715\n00:35:24,360 --> 00:35:28,410\nthe headquarters and route through the\nheadquarters to get to the Azure cloud.\n\n716\n00:35:28,410 --> 00:35:29,590\nThat's the old way.\n\n717\n00:35:29,590 --> 00:35:32,270\nMicrosoft pushed some updates\nabout three months ago now.\n\n718\n00:35:32,270 --> 00:35:35,470\nThat allow for\nyou to do more than one VPN tunnel.\n\n719\n00:35:35,470 --> 00:35:37,690\nSo now you could have each\nof your branches with their\n\n720\n00:35:37,690 --> 00:35:38,870\nown connection to Azure.\n\n721\n00:35:38,870 --> 00:35:39,880\nAnd that's nice.\n\n722\n00:35:39,880 --> 00:35:43,210\nBecause if the headquarters fails,\nall the branches are still up and\n\n723\n00:35:43,210 --> 00:35:43,860\nconnected, right?\n\n724\n00:35:43,860 --> 00:35:47,750\nIt makes it easier to push more\nresources up there into the Azure cloud.\n\n725\n00:35:47,750 --> 00:35:50,030\nThe only way to do that before.\n\n726\n00:35:50,030 --> 00:35:54,060\nAnd this is why I bring it up here, is on\nthe exam, if you get a question that's\n\n727\n00:35:54,060 --> 00:35:57,610\ntalking about needing multiple\nVPN connections into Azure,\n\n728\n00:35:57,610 --> 00:36:03,030\nwell this connectivity, what we used in\nthat show, was what was built into Azure.\n\n729\n00:36:03,030 --> 00:36:06,220\nIf you need to do something\noutside of its specs,\n\n730\n00:36:06,220 --> 00:36:10,030\nyou have to bring up your own remote\naccess server in Azure, all right.\n\n731\n00:36:10,030 --> 00:36:13,450\nAnd so you won't be terminating your\ntunnel against the Azure cloud itself.\n\n732\n00:36:13,450 --> 00:36:19,020\nYou'll be terminating your tunnel against\nyour own remote access server in here.\n\n733\n00:36:19,020 --> 00:36:24,460\nIf you need to get outside of the design\nspec of what they actually offer.\n\n734\n00:36:24,460 --> 00:36:26,770\nThat is a fully supported configuration.\n\n735\n00:36:26,770 --> 00:36:28,730\nYou can do that,\ncuz you built your own VPN server.\n\n736\n00:36:28,730 --> 00:36:33,530\nSo you can have 200 branch offices,\nall connected into that\n\n737\n00:36:33,530 --> 00:36:36,920\nremote access server that's running\nright there for any site-to-site VPNs.\n\n738\n00:36:36,920 --> 00:36:41,120\nAnd now, they've got access without\nhaving to go through the headquarters.\n\n739\n00:36:41,120 --> 00:36:42,800\nIt's kind of,\nI don't want to say frustrating,\n\n740\n00:36:42,800 --> 00:36:45,320\nthe technology advances so fast.\n\n741\n00:36:45,320 --> 00:36:48,301\nAnd Microsoft is trying to make\nAzure as good a product as they can.\n\n742\n00:36:48,301 --> 00:36:51,000\nSo they're constantly adding new stuff.\n\n743\n00:36:51,000 --> 00:36:53,620\nThey're not updating the exam\nat the same pace though,\n\n744\n00:36:53,620 --> 00:36:54,700\nwhich is kind of a good thing.\n\n745\n00:36:54,700 --> 00:36:57,000\nImagine how frustrating it would be\nif the exam updated every month.\n\n746\n00:36:57,000 --> 00:36:57,660\n>> Right?\n\n747\n00:36:57,660 --> 00:37:00,580\n>> So, just be aware, if you've worked\nwith this in real life land and\n\n748\n00:37:00,580 --> 00:37:04,900\nyou're saying, wait, I know I can do more\nthan one VPN tunnel to the Azure cloud.\n\n749\n00:37:04,900 --> 00:37:06,500\nOn the exam, you really can't.\n\n750\n00:37:06,500 --> 00:37:09,193\nYou'll have to set up your own\nremote access server up there.\n\n751\n00:37:09,193 --> 00:37:11,490\nAll right, and that will probably change.\n\n752\n00:37:11,490 --> 00:37:15,200\nI think the exams are slighty update,\noh actually, they're not,\n\n753\n00:37:15,200 --> 00:37:17,685\nare they, they're not\n>> Probably not.\n\n754\n00:37:17,685 --> 00:37:21,830\n>> Yeah, so Microsoft is starting to wind\ndown development on the 2012 materials,\n\n755\n00:37:21,830 --> 00:37:24,430\nbecause the next version of\nServer is about to come out, so.\n\n756\n00:37:24,430 --> 00:37:26,670\n>> Yeah, exactly.\nServer 2016 should be out in\n\n757\n00:37:26,670 --> 00:37:27,476\nthe next year.\n\n758\n00:37:27,476 --> 00:37:30,270\n[LAUGH]\n>> It's funny, cuz we're still in 2014.\n\n759\n00:37:30,270 --> 00:37:33,050\nAnd we're like, oh, Server 2016,\nit'll probably be out next month.\n\n760\n00:37:33,050 --> 00:37:35,950\nYeah, the whole year thing\ndoesn't really apply anymore.\n\n761\n00:37:35,950 --> 00:37:37,424\nThey should go back to letters.\n\n762\n00:37:37,424 --> 00:37:39,249\n[LAUGH]\n>> I know, right?\n\n763\n00:37:39,249 --> 00:37:42,200\n>> Or shapes,\nWindows Triangle is coming out next month.\n\n764\n00:37:42,200 --> 00:37:44,650\nSo anyhow, so keep that in mind,\n\n765\n00:37:44,650 --> 00:37:47,780\njust a little variation\nbetween real life and that.\n\n766\n00:37:47,780 --> 00:37:50,190\nSeems like there was something\nelse that I wanted to mention,\n\n767\n00:37:50,190 --> 00:37:51,080\nwhat was the other thing?\n\n768\n00:37:51,080 --> 00:37:53,190\nWe talked about Azure.\n\n769\n00:37:53,190 --> 00:37:53,720\n>> CMAK?\n\n770\n00:37:53,720 --> 00:37:55,560\n>> Oh that's right, CMAK.\n\n771\n00:37:55,560 --> 00:37:59,020\n>> CMAK is a cool little, it used to be\nsomething that we'd have to download from\n\n772\n00:37:59,020 --> 00:38:03,040\nMicrosoft and they've actually\nadded it as a, I want to say,\n\n773\n00:38:03,040 --> 00:38:05,020\nit's a feature in Windows server 2012 now.\n\n774\n00:38:05,020 --> 00:38:09,160\nBut CMAK stands for\nthe Connection Manager Administration Kit.\n\n775\n00:38:09,160 --> 00:38:11,020\nOne of the things we talked\nabout earlier in the show,\n\n776\n00:38:11,020 --> 00:38:16,520\nwith VPNs, configuration on the clients\nside tended to be a little bit difficult.\n\n777\n00:38:16,520 --> 00:38:20,170\nFor IT people, maybe not so much,\nbecause we know all our settings.\n\n778\n00:38:20,170 --> 00:38:23,080\nYou know, what security protocols\nwe're using for authentication and\n\n779\n00:38:23,080 --> 00:38:24,820\nauthorization.\n\n780\n00:38:24,820 --> 00:38:28,820\nWhat tunneling protocols we're using,\nthe IP addresses, and things like that.\n\n781\n00:38:28,820 --> 00:38:31,280\nBut for an end user to try and\nconfigure that?\n\n782\n00:38:31,280 --> 00:38:34,910\nIn work at the office,\nI can push these kinds of settings out or\n\n783\n00:38:34,910 --> 00:38:37,800\nI can configure them\nmaybe using group policy.\n\n784\n00:38:37,800 --> 00:38:39,130\nBut for those remote users, for\n\n785\n00:38:39,130 --> 00:38:42,010\nthose home users and things like that,\nthey're not part of my domain.\n\n786\n00:38:42,010 --> 00:38:44,140\nI can't push out a group policy.\n\n787\n00:38:44,140 --> 00:38:47,470\nI don't really want to go out to\ntheir house and set this up for them.\n\n788\n00:38:47,470 --> 00:38:50,270\nAnd I've dealt with companies,\nwhere they've done everything they can.\n\n789\n00:38:50,270 --> 00:38:54,330\nThey have made text document\nwith step by step instructions\n\n790\n00:38:54,330 --> 00:38:56,500\non how to configure these VPN tunnels.\n\n791\n00:38:56,500 --> 00:38:59,480\nThey have web pages with tutorials\non them, on how to set up,\n\n792\n00:38:59,480 --> 00:39:01,130\nand they're like sure, you can go home.\n\n793\n00:39:01,130 --> 00:39:03,120\nYou can connect to work with a VPN.\n\n794\n00:39:03,120 --> 00:39:05,130\nHere's your step by step guides.\n\n795\n00:39:05,130 --> 00:39:07,570\nYeah, and then, they'd come in the next\nday and say it didn't work for me.\n\n796\n00:39:07,570 --> 00:39:09,940\nIt was really, really frustrating.\n\n797\n00:39:09,940 --> 00:39:12,690\nAnd there is some complexity to it.\n\n798\n00:39:12,690 --> 00:39:15,710\nThere's a lot of different choices to\nbe made when you're setting that up.\n\n799\n00:39:15,710 --> 00:39:18,340\nSo, the Connection Manager\nAdministration Kit is executable.\n\n800\n00:39:18,340 --> 00:39:21,200\nIt's a little wizard that\nwe can run through and\n\n801\n00:39:21,200 --> 00:39:23,070\nI can provide all of the information.\n\n802\n00:39:23,070 --> 00:39:26,090\nI am going to go through and\nI am going to put in the IP address or\n\n803\n00:39:26,090 --> 00:39:30,190\naddresses of the different VPN servers or\nphone numbers if we're doing dial up\n\n804\n00:39:30,190 --> 00:39:32,030\nconnections, actually\nsupports that as well.\n\n805\n00:39:32,030 --> 00:39:37,060\nI can put all of that information\nin there and it's going to generate\n\n806\n00:39:37,060 --> 00:39:41,885\na little executable file and\nnow all I have to do is deploy that out.\n\n807\n00:39:41,885 --> 00:39:43,890\nAnyway I deploy any other file.\n\n808\n00:39:43,890 --> 00:39:47,210\nIf I send it to you on a thumb drive,\nI put it up on a file share,\n\n809\n00:39:47,210 --> 00:39:52,120\non an FTP server or something like that,\nemail to them as an attachment.\n\n810\n00:39:52,120 --> 00:39:55,874\nAll they have to do is take this\nexecutable to their laptop or\n\n811\n00:39:55,874 --> 00:39:57,913\ntheir home computer and run it.\n\n812\n00:39:57,913 --> 00:40:02,098\nAnd it's got all the information it needs\nto create that VPN connection for them.\n\n813\n00:40:02,098 --> 00:40:03,927\nAnd so we really eliminate.\n\n814\n00:40:03,927 --> 00:40:06,020\nA big source of troubleshooting.\n\n815\n00:40:06,020 --> 00:40:09,760\nWhen that user is calling me up saying,\nhey, I can't make this VPN connection.\n\n816\n00:40:09,760 --> 00:40:13,730\nIf I know the UCMAK to either create\nit as long as they haven't gone in and\n\n817\n00:40:13,730 --> 00:40:17,620\nchanged anything, I'm pretty sure that all\nthe settings in there are correct, and\n\n818\n00:40:17,620 --> 00:40:20,870\nI can focus my troubleshooting\non something else.\n\n819\n00:40:20,870 --> 00:40:22,930\nIt's very, very customizable.\n\n820\n00:40:22,930 --> 00:40:27,318\nEverything in there from the important\nstuff, the connection information,\n\n821\n00:40:27,318 --> 00:40:30,321\nto maybe the not so\nimportant stuff, company logos.\n\n822\n00:40:30,321 --> 00:40:35,470\nYou can put your own, you know the little\nquestion mark in the top right corner?\n\n823\n00:40:35,470 --> 00:40:37,640\nWhere you click it and\nit gives you some generic help?\n\n824\n00:40:37,640 --> 00:40:38,570\nYou can customize that.\n\n825\n00:40:38,570 --> 00:40:40,250\nYou can have your own tech number,\n\n826\n00:40:40,250 --> 00:40:43,680\nyour own help desk phone\nnumbers listed in there.\n\n827\n00:40:43,680 --> 00:40:46,550\nLike I said, phone books for\ndial up when they're travelling around.\n\n828\n00:40:46,550 --> 00:40:49,290\nIt's a very cool little concept.\n\n829\n00:40:49,290 --> 00:40:52,400\n>> And the fact that it's all kind of\npre-built, the end user doesn't have\n\n830\n00:40:52,400 --> 00:40:54,850\nto worry about this stuff,\nwe can do advanced things like having\n\n831\n00:40:54,850 --> 00:40:59,270\nmultiple IP addresses for our VPN server,\nso that if one fails it moves to the next.\n\n832\n00:40:59,270 --> 00:41:03,050\nAnd so that kind of stuff, if you're\ntrying to relay that configuration to\n\n833\n00:41:03,050 --> 00:41:07,380\na user, doing it in bulk on hundreds\nof machines, it's a real burden.\n\n834\n00:41:07,380 --> 00:41:11,740\nSo the primary usage for CMAK is really\njust to make administration easier, right.\n\n835\n00:41:11,740 --> 00:41:15,530\nTo make it where our engines just\nhave less of a chance to screw up our\n\n836\n00:41:15,530 --> 00:41:16,580\nconfigurations.\n\n837\n00:41:16,580 --> 00:41:18,100\nBut there is another use for it.\n\n838\n00:41:18,100 --> 00:41:20,815\nThe CMAK allows full custom branding.\n\n839\n00:41:20,815 --> 00:41:24,910\nMike, you mentioned customizing the help\nfiles, you can customize the logos and\n\n840\n00:41:24,910 --> 00:41:29,035\nthe text and all that stuff,\nso if you've got a service,\n\n841\n00:41:29,035 --> 00:41:33,105\nif you're like an Internet service\nprovider and you want to provide backup\n\n842\n00:41:33,105 --> 00:41:36,375\ndial up access to your users in\ncase their broadband goes down.\n\n843\n00:41:36,375 --> 00:41:39,795\nYou could create CMAK package\nthat didn't even say Microsoft\n\n844\n00:41:39,795 --> 00:41:42,525\nthat said your company's name and\nso on, and\n\n845\n00:41:42,525 --> 00:41:45,785\nwhen people ran it, it would automatically\nadd that dial up entry for them, right?\n\n846\n00:41:45,785 --> 00:41:47,650\nThat kind of system is there.\n\n847\n00:41:47,650 --> 00:41:49,210\nOr if you are a bank and\n\n848\n00:41:49,210 --> 00:41:53,060\nyou want your customers to be able to have\na guaranteed secure connection to your\n\n849\n00:41:53,060 --> 00:41:56,160\nbank to be able to do their transactions,\nyou can distribute it that way.\n\n850\n00:41:56,160 --> 00:42:00,240\nSo from a corporate standpoint,\nit does make things kind of neat.\n\n851\n00:42:00,240 --> 00:42:04,390\nYou can brand that and it shows, hey,\nthis is the connection to this company.\n\n852\n00:42:04,390 --> 00:42:05,330\n>> Absolutely.\n\n853\n00:42:05,330 --> 00:42:09,320\nIn our designing and our laying out\nof our different VPN solutions,\n\n854\n00:42:09,320 --> 00:42:11,225\nthis is another tool that we can use.\n\n855\n00:42:11,225 --> 00:42:14,240\nBecause we've gotta think about, all\nright, do I need to support clients that\n\n856\n00:42:14,240 --> 00:42:18,180\nare outside of a network that I can not\nget these settings to in any other way?\n\n857\n00:42:18,180 --> 00:42:20,650\nSo now we've got another\nsolution we can use.\n\n858\n00:42:20,650 --> 00:42:22,620\n>> Another neat little\ntrick with the CMAK,\n\n859\n00:42:22,620 --> 00:42:24,600\nis at the very end of it's\nlittle wizard it says,\n\n860\n00:42:24,600 --> 00:42:28,010\nyou know, are there any other scripts or\nadditional commands you want to run?\n\n861\n00:42:28,010 --> 00:42:30,970\nAnd I've seen some people get really\ncreative with this even installing\n\n862\n00:42:30,970 --> 00:42:33,360\nother software along with the CMAK.\n\n863\n00:42:33,360 --> 00:42:38,185\nOr one of my favorites is\ninstalling the root certificate for\n\n864\n00:42:38,185 --> 00:42:41,085\nyour own CA to be trusted\non the client system.\n\n865\n00:42:41,085 --> 00:42:45,325\nSo this client system can get their VPN\ntunnel setup and trust your root CA and\n\n866\n00:42:45,325 --> 00:42:47,895\nhave their own cert all at the same time.\n\n867\n00:42:47,895 --> 00:42:51,225\nIt's all just limited to your creativity,\nso really powerful program.\n\n868\n00:42:51,225 --> 00:42:54,690\nNow you need to evaluate whether or\nnot that's a right fit for your solution.\n\n869\n00:42:54,690 --> 00:42:58,930\nIf you're gonna be using direct access,\ndo you need the CMAK?\n\n870\n00:42:58,930 --> 00:42:59,900\nNo.\n\n871\n00:42:59,900 --> 00:43:01,560\nDirect access doesn't have a need for\nthat.\n\n872\n00:43:01,560 --> 00:43:05,880\nBut if you're doing L2TP, PPTP, God\nforbid, dial up, if you're using any of\n\n873\n00:43:05,880 --> 00:43:09,560\nthose, CMAK is great because it\ntakes care of the configuration.\n\n874\n00:43:09,560 --> 00:43:15,580\nBut other systems like remote desktop\nwith the remote desktop services gateway,\n\n875\n00:43:15,580 --> 00:43:19,220\nand stuff like that, those types\nof things eliminate our need for\n\n876\n00:43:19,220 --> 00:43:23,060\nVPN tunnels and provide their\nown encryption and own security.\n\n877\n00:43:23,060 --> 00:43:25,590\nAnd so the CMAK is not necessarily\nuseful in those scenarios.\n\n878\n00:43:26,590 --> 00:43:30,310\nWhich I always thought that was\nthe funniest part of this because for\n\n879\n00:43:30,310 --> 00:43:35,600\n15 years where dial up and L2TP and PPTP\nwere the predominant VPN technologies.\n\n880\n00:43:35,600 --> 00:43:36,840\n>> And we really could have used the CMAK.\n\n881\n00:43:36,840 --> 00:43:40,600\n>> You had to go and download the CMAK to\nget it and now that those are on the wane,\n\n882\n00:43:40,600 --> 00:43:43,040\nyeah, now they include it\nwith the operating system.\n\n883\n00:43:43,040 --> 00:43:47,630\nNow that you don't need it, we'll just\nadd to the bloat of a server so and\n\n884\n00:43:47,630 --> 00:43:51,790\nif you ever wonder why a server install\nis 20 gigs in size, that's why, so.\n\n885\n00:43:53,600 --> 00:43:55,150\nThat is CMAK, self's pretty small.\n\n886\n00:43:55,150 --> 00:43:57,830\n>> It is pretty tiny, but it is worth it.\n\n887\n00:43:57,830 --> 00:44:02,470\nAll right, so that's the CMAK that\nis Windows Azure, Microsoft Azure.\n\n888\n00:44:02,470 --> 00:44:04,830\nWe talked about some of our\nother things like bandwidth.\n\n889\n00:44:04,830 --> 00:44:08,530\nI have a little note to\nmention protocol implications.\n\n890\n00:44:10,020 --> 00:44:12,390\nWhen you pick a VPN.\n\n891\n00:44:12,390 --> 00:44:15,350\nLet's say that all of the technologies\nthat we just talked about\n\n892\n00:44:15,350 --> 00:44:17,790\nin the show work for you.\n\n893\n00:44:17,790 --> 00:44:18,920\nYou don't care which one.\n\n894\n00:44:18,920 --> 00:44:20,950\nHow do you pick the best one?\n\n895\n00:44:20,950 --> 00:44:23,800\nHow do you pick which one's going\nto be secure for your environment?\n\n896\n00:44:25,070 --> 00:44:28,660\nEach protocol provides\na different level of security.\n\n897\n00:44:28,660 --> 00:44:31,050\nA different level of strength.\n\n898\n00:44:31,050 --> 00:44:33,080\nAnd a lot of them provide\nmore than one level.\n\n899\n00:44:33,080 --> 00:44:35,820\nIf you take something like PPTP,\n\n900\n00:44:35,820 --> 00:44:39,290\npoint to point tunneling protocol is\nsupported by darn near everything.\n\n901\n00:44:39,290 --> 00:44:44,130\nIt's an open standard Linux, Unix,\nMac OS, Windows, they all do it.\n\n902\n00:44:44,130 --> 00:44:45,530\nPPTP, very very prevalent.\n\n903\n00:44:45,530 --> 00:44:48,720\nSo you might be inclined to use\nthat because of it's compatibility.\n\n904\n00:44:48,720 --> 00:44:52,360\nBut it uses MPPE encryption by default,\nwhich is only 40 bit.\n\n905\n00:44:52,360 --> 00:44:56,810\n40 bit encryption is not nothing.\n\n906\n00:44:56,810 --> 00:44:58,240\n>> Slightly better than nothing?\n\n907\n00:44:58,240 --> 00:44:58,830\n>> Yeah.\n\n908\n00:44:58,830 --> 00:45:02,130\nIt's better than WEP, I guess.\n\n909\n00:45:02,130 --> 00:45:04,970\nSo there are worse things out there,\nbut not many and\n\n910\n00:45:04,970 --> 00:45:10,170\nso PPTP is not a very reliable\nhigh security model, right.\n\n911\n00:45:10,170 --> 00:45:12,280\nSo even though we could use it, sure,\n\n912\n00:45:12,280 --> 00:45:15,090\nit'd be very compatible,\nwe probably don't want to.\n\n913\n00:45:15,090 --> 00:45:18,340\nL2TP, on the other hand,\nuses much stronger encryption.\n\n914\n00:45:18,340 --> 00:45:21,700\nIt actually uses the IPsec framework,\nso we can go much stronger.\n\n915\n00:45:21,700 --> 00:45:24,850\nBut L2TP is not supported by everybody.\n\n916\n00:45:24,850 --> 00:45:28,190\nIn fact, it's kind of a rare day you\nfind systems that do support it.\n\n917\n00:45:28,190 --> 00:45:29,300\nIt's pretty much Microsoft.\n\n918\n00:45:29,300 --> 00:45:30,030\n>> Microsoft only, yeah.\n\n919\n00:45:30,030 --> 00:45:33,510\n>> Some CISCO systems support it and\nthat's about it.\n\n920\n00:45:33,510 --> 00:45:36,290\nSo, L2TP may or may not be a fit for\n\n921\n00:45:36,290 --> 00:45:39,116\nyour environment based on\nwhat clients you've got.\n\n922\n00:45:39,116 --> 00:45:45,030\nSSTP, right, the SSL-based,\nthat one's even more narrow, right?\n\n923\n00:45:45,030 --> 00:45:47,330\nCuz we just have what,\nWindows Vista and higher?\n\n924\n00:45:47,330 --> 00:45:49,310\n>> I think Windows Vista and\nlater is about the only thing it does.\n\n925\n00:45:49,310 --> 00:45:51,120\nCool concept,\nbeing able to go over Port 80, so\n\n926\n00:45:51,120 --> 00:45:53,520\nI don't have any custom ports to open or\nthings like that.\n\n927\n00:45:53,520 --> 00:45:56,780\nBut yeah, very limited if I've\ngot strictly Windows environment.\n\n928\n00:45:56,780 --> 00:45:57,760\nMaybe that's good.\n\n929\n00:45:57,760 --> 00:45:58,760\n>> Yep.\n\n930\n00:45:58,760 --> 00:46:00,110\nAnd it uses SSL.\n\n931\n00:46:00,110 --> 00:46:03,145\nYou know, for doing the encryption and\nSSL, while good.\n\n932\n00:46:03,145 --> 00:46:06,310\n>> Did I say Port 480, 443, you guys.\n\n933\n00:46:06,310 --> 00:46:06,810\n>> 443.\n>> Yeah.\n\n934\n00:46:06,810 --> 00:46:09,350\n>> I think it actually can go over 80,\nthough.\n\n935\n00:46:09,350 --> 00:46:11,650\nI think it does 443 first and\nthen moves down to 80.\n\n936\n00:46:11,650 --> 00:46:12,970\nIt's still encrypting.\n\n937\n00:46:14,750 --> 00:46:17,430\nAnyhow, you've got these\ndifferent protocols.\n\n938\n00:46:17,430 --> 00:46:21,960\nThey're all okay, but\nthey all have their problems.\n\n939\n00:46:21,960 --> 00:46:27,615\nSSTP, L2TP, PPTP, I prefer not to use any\nof those if I can choose something else.\n\n940\n00:46:27,615 --> 00:46:31,880\nIPSec is what I normally choose, but\nthat's because I am a network admin.\n\n941\n00:46:31,880 --> 00:46:35,130\nI love IPsec because I have\nfull control of everything,\n\n942\n00:46:35,130 --> 00:46:38,350\nI can choose what encryption I want to\nuse, how I am going to do key handoffs,\n\n943\n00:46:38,350 --> 00:46:43,010\nmy key strength, you can pick all\nof that and if you pick to do AES,\n\n944\n00:46:43,010 --> 00:46:46,220\nyou can pick,\ndo you want AES 128, AES 256?\n\n945\n00:46:46,220 --> 00:46:49,520\nYou pick and\nchoose based on your own needs.\n\n946\n00:46:49,520 --> 00:46:51,932\nIPSec is a framework, not a protocol.\n\n947\n00:46:51,932 --> 00:46:54,690\nSo it's made up the number\nof other protocols.\n\n948\n00:46:54,690 --> 00:46:57,580\nProblem with IPsec, though,\nis it's kind of complex.\n\n949\n00:46:57,580 --> 00:47:00,300\n>> Right.\n>> For site to site VPNs, it's perfect.\n\n950\n00:47:00,300 --> 00:47:03,000\nEvery firewall, every remote\naccess server, they support it.\n\n951\n00:47:03,000 --> 00:47:05,800\nYou can build those tunnels up,\nand it's awesome.\n\n952\n00:47:05,800 --> 00:47:09,690\nBut for an end user VPN, for\nremote access VPN, it's not ideal.\n\n953\n00:47:09,690 --> 00:47:10,360\nRight?\n\n954\n00:47:10,360 --> 00:47:11,920\nCisco does it, but\nI think that's about it.\n\n955\n00:47:12,970 --> 00:47:15,850\nSo for an end user,\nwe kinda lose that ability.\n\n956\n00:47:15,850 --> 00:47:19,040\nSo we go back to the L2TP, PPTP and so on.\n\n957\n00:47:19,040 --> 00:47:22,520\nWell, Direct Access fills in that gap.\n\n958\n00:47:22,520 --> 00:47:26,460\nAnd Direct Access says,\nlet's use IPSec, but make it easy for\n\n959\n00:47:26,460 --> 00:47:27,880\nthe end user, all right?\n\n960\n00:47:27,880 --> 00:47:30,610\nAnd let's use Direct Access to\nfind that server, connect up, and\n\n961\n00:47:30,610 --> 00:47:33,660\nprovide that encryption without\nthem having to muck around with\n\n962\n00:47:33,660 --> 00:47:36,760\ncertificates and all that other mess and\nget connected and get in business.\n\n963\n00:47:36,760 --> 00:47:41,550\nAnd use the stronger IPSec protocols\nto get a nice secure connection.\n\n964\n00:47:41,550 --> 00:47:44,400\nSo we're gonna talk more about\nDirect Access in the next segment cuz\n\n965\n00:47:44,400 --> 00:47:47,370\nwe need to make sure we've got a good\ndesign understanding of that because\n\n966\n00:47:47,370 --> 00:47:50,685\nit's good technology but\nit is Microsoft Proprietary.\n\n967\n00:47:50,685 --> 00:47:53,275\nSo we got a limitation there as\nto when we can use that one.\n\n968\n00:47:53,275 --> 00:47:54,715\n>> Yep.\n>> All right?\n\n969\n00:47:54,715 --> 00:47:58,585\nSo did I cover each of the different\nones in my little rant there?\n\n970\n00:47:58,585 --> 00:47:59,682\n>> I think you hit them all.\n\n971\n00:47:59,682 --> 00:48:02,913\nWhat are you talking about, the VPN\ntunnels, yep, we got PPTP, LTPP, SSTP.\n\n972\n00:48:02,913 --> 00:48:05,006\nIKEv2?\n\n973\n00:48:05,006 --> 00:48:06,489\nMaybe it's the other one?\n\n974\n00:48:06,489 --> 00:48:07,220\nWe didn't say?\n\n975\n00:48:07,220 --> 00:48:10,108\n>> Yeah, when you do IPsec\nunder the hood the encryption,\n\n976\n00:48:10,108 --> 00:48:13,610\nthe methods that you're using,\nthe connectivity you're using,\n\n977\n00:48:13,610 --> 00:48:16,570\nyou're doing the internetwork\nkey exchange or IKE.\n\n978\n00:48:16,570 --> 00:48:18,810\nAnd there's IKE version 1 or\nIKE version 2.\n\n979\n00:48:18,810 --> 00:48:20,280\nVersion 2 stuff is stronger.\n\n980\n00:48:20,280 --> 00:48:21,565\nMicrosoft supports both.\n\n981\n00:48:21,565 --> 00:48:25,210\n>> And the nice thing about that IKEV2\nis that is supports that feature.\n\n982\n00:48:25,210 --> 00:48:28,850\nAt least in Microsoft world\nof the automatic reconnect.\n\n983\n00:48:28,850 --> 00:48:31,550\nWhereas with a normal VPN connection,\nif you drop the connection,\n\n984\n00:48:31,550 --> 00:48:32,960\nyou've gotta double click on it.\n\n985\n00:48:32,960 --> 00:48:36,355\nAgain, IKEV2 supports that\nautomatic reconnect feature.\n\n986\n00:48:36,355 --> 00:48:37,700\n>> Yep.\n\n987\n00:48:37,700 --> 00:48:41,590\nSo that one, if both ends support it,\nyou definitely wanna go Version 2.\n\n988\n00:48:41,590 --> 00:48:43,030\nThere's several other improvements too.\n\n989\n00:48:43,030 --> 00:48:46,060\nBut you have some systems\nlike older Cisco ASAs or\n\n990\n00:48:46,060 --> 00:48:49,820\nwhatever that might only do Version 1,\nand so you might have a limitation there.\n\n991\n00:48:49,820 --> 00:48:50,530\nI'm trying to remember.\n\n992\n00:48:50,530 --> 00:48:53,080\nThere was something just the other day\nwhere I had to build an IKE version\n\n993\n00:48:53,080 --> 00:48:53,780\none tunnel.\n\n994\n00:48:53,780 --> 00:48:55,260\n>> Oh really?\n\n995\n00:48:55,260 --> 00:48:56,280\n>> What the heck was it?\n\n996\n00:48:56,280 --> 00:48:57,160\nIt was-\n>> One of the-\n\n997\n00:48:58,310 --> 00:49:00,153\n>> Some appliance I was VPNing into and\n\n998\n00:49:00,153 --> 00:49:02,650\nit just didn't do a version two.\n\n999\n00:49:02,650 --> 00:49:03,430\nIt might have been.\n\n1000\n00:49:03,430 --> 00:49:04,320\nYeah.\nAnyhow.\n\n1001\n00:49:04,320 --> 00:49:05,430\nSo you bump into that.\n\n1002\n00:49:05,430 --> 00:49:08,890\nSometimes you have equipment that just\ndoesn't support the latest and greatest.\n\n1003\n00:49:08,890 --> 00:49:10,980\nAnd so,\nthat's gotta factor into your design.\n\n1004\n00:49:10,980 --> 00:49:15,520\nAnd your design is either gonna require\nyou to step down to the common denominator\n\n1005\n00:49:15,520 --> 00:49:16,690\nbetween the systems.\n\n1006\n00:49:16,690 --> 00:49:19,280\nOr it's gonna require you to\nreplace that other system.\n\n1007\n00:49:19,280 --> 00:49:23,150\nAnd you'll see that on the exam, where it\nmight mention that there's a firewall or\n\n1008\n00:49:23,150 --> 00:49:25,180\nsomething that just doesn't\nsupport what you need.\n\n1009\n00:49:25,180 --> 00:49:27,700\nAnd there may be an option that says,\nreplace with a Microsoft server.\n\n1010\n00:49:27,700 --> 00:49:30,660\nAnd remember what I said in episode one.\n\n1011\n00:49:30,660 --> 00:49:33,750\nIf the answer involves spending more money\nwith Microsoft, it is probably right.\n\n1012\n00:49:33,750 --> 00:49:35,085\n>> That's gonna be the one.\n\n1013\n00:49:35,085 --> 00:49:37,440\n>> [LAUGH] Such a jaded way\nto look at the questions,\n\n1014\n00:49:37,440 --> 00:49:38,150\nbut\n>> [LAUGH]\n\n1015\n00:49:38,150 --> 00:49:39,790\n>> But that's the truth.\n\n1016\n00:49:39,790 --> 00:49:46,020\n>> All right, so, keep all that in mind\nas you start to design your VPN solution.\n\n1017\n00:49:47,220 --> 00:49:53,860\nOne last caveat that I want to mention on\ngeneral VPN stuff, is that NAT routers.\n\n1018\n00:49:53,860 --> 00:49:56,470\nNAT routers can wreak havoc with VPNs.\n\n1019\n00:49:56,470 --> 00:49:58,580\nAll right, network address translation,\n\n1020\n00:49:58,580 --> 00:50:03,470\ntakes your packets as they're crossing the\nnetwork and it changes your IP address.\n\n1021\n00:50:03,470 --> 00:50:07,020\nIt's normally looking at layer three,\nchanging your source address and\n\n1022\n00:50:07,020 --> 00:50:09,170\nyour destination,\nnot normally destination.\n\n1023\n00:50:09,170 --> 00:50:11,640\nBut changing your source\naddress would be different.\n\n1024\n00:50:11,640 --> 00:50:15,120\nAnd if you're doing a VPN connection\nfrom a route access client,\n\n1025\n00:50:15,120 --> 00:50:16,292\nit's not such a big deal.\n\n1026\n00:50:16,292 --> 00:50:17,440\nAll right?\n\n1027\n00:50:17,440 --> 00:50:22,720\nBut If there is two hosts on that network\nthat are going out using the same\n\n1028\n00:50:22,720 --> 00:50:26,980\nport number at the same time, then that\nwill modify not just the source ip.\n\n1029\n00:50:26,980 --> 00:50:29,090\nBut it will also modify the port number.\n\n1030\n00:50:30,240 --> 00:50:33,900\nThat is a problem with VPNs,\nbecause what do VPNs do by default?\n\n1031\n00:50:33,900 --> 00:50:36,341\nBy default, they are in transport mode.\n\n1032\n00:50:36,341 --> 00:50:38,190\nAnd I mean in tunnel mode.\n\n1033\n00:50:38,190 --> 00:50:41,530\nAnd that means that they are going\nto encrypt the transport layer.\n\n1034\n00:50:41,530 --> 00:50:43,900\nThey're going to encrypt\nthat transport information.\n\n1035\n00:50:43,900 --> 00:50:46,430\nAnd if you modify it,\nit corrupts the packet, right?\n\n1036\n00:50:46,430 --> 00:50:48,040\n>> Exactly.\nNow your COC's not gonna match.\n\n1037\n00:50:48,040 --> 00:50:50,030\nAnd it's gonna end up\ndropping those packets.\n\n1038\n00:50:50,030 --> 00:50:53,130\n>> So when you have technologies\nlike IPsec and PPTP,\n\n1039\n00:50:53,130 --> 00:50:56,380\nthey have what's called\nNAT traversal mode,\n\n1040\n00:50:56,380 --> 00:50:59,810\nwhere they allow that change to happen\nwithout corrupting the whole packet.\n\n1041\n00:50:59,810 --> 00:51:03,750\nThey basically choose not to\nencrypt the transport layer.\n\n1042\n00:51:03,750 --> 00:51:05,550\nIt weakens security a little bit.\n\n1043\n00:51:05,550 --> 00:51:09,300\nBut keep that in mind, for\nyour small office users.\n\n1044\n00:51:09,300 --> 00:51:11,150\nYour branch office where you're\ndoing a site to site VP.\n\n1045\n00:51:11,150 --> 00:51:12,880\nAnd it's no big deal, you don't NAT them.\n\n1046\n00:51:12,880 --> 00:51:14,400\nSo it's not a problem.\n\n1047\n00:51:14,400 --> 00:51:15,810\nBut for that remote access users,\n\n1048\n00:51:15,810 --> 00:51:20,890\ngoing to a hotel if they're\ndoing a bunch of UDP500 traffic.\n\n1049\n00:51:20,890 --> 00:51:24,140\nAre there other people in the hotel\ndoing UDP 500 traffic also?\n\n1050\n00:51:24,140 --> 00:51:25,470\nProbably.\n>> Most likely.\n\n1051\n00:51:25,470 --> 00:51:28,170\n>> So there are alternate configurations,\nwe can do.\n\n1052\n00:51:28,170 --> 00:51:31,020\nLike, you can force IPsec to use TCP.\n\n1053\n00:51:31,020 --> 00:51:34,190\nSo you can say use TCP port 10000,\nthat's a really popular one.\n\n1054\n00:51:34,190 --> 00:51:38,230\nOr TCP 10001 or whatever so you don't bump\ninto people doing the same thing you are.\n\n1055\n00:51:38,230 --> 00:51:41,550\nAnd that allows you to kind of bypass that\nto make sure that your port's not being\n\n1056\n00:51:41,550 --> 00:51:42,440\nmodified.\n\n1057\n00:51:42,440 --> 00:51:47,260\nBut just be aware that a NAT\nrouter can wreak havoc with that.\n\n1058\n00:51:47,260 --> 00:51:52,000\nAnd if you have a good system,\nlike a Cisco router or SAS,\n\n1059\n00:51:52,000 --> 00:51:53,705\nwe use a pfSense firewall here.\n\n1060\n00:51:53,705 --> 00:51:55,720\n>> Mm-hm.\n>> They're smart enough to recognize that\n\n1061\n00:51:55,720 --> 00:51:58,060\nand say,\n>> Oh yeah, that's ESP.\n\n1062\n00:51:58,060 --> 00:51:59,990\nThat's encrypted security payload.\n\n1063\n00:51:59,990 --> 00:52:01,660\nDon't mess with its port numbers.\n\n1064\n00:52:01,660 --> 00:52:05,278\nLet it pass through and\nthat usually works out.\n\n1065\n00:52:05,278 --> 00:52:07,620\nAll right.\n\n1066\n00:52:07,620 --> 00:52:09,740\nWe'll, we've got a lot more to\ntalk about this episode, Mike.\n\n1067\n00:52:09,740 --> 00:52:11,860\nWe got all the direct\naccess stuff to jump into.\n\n1068\n00:52:11,860 --> 00:52:15,270\nSo, why don't we stop here and\ntake a break?\n\n1069\n00:52:15,270 --> 00:52:17,225\nAnd when we get back,\nwe're gonna jump into.\n\n1070\n00:52:17,225 --> 00:52:20,343\n[CROSSTALK] Direct Access.\n\n1071\n00:52:20,343 --> 00:52:25,225\nAll right, we will be\n\n1072\n00:52:25,225 --> 00:52:29,572\nback, directly.\n\n1073\n00:52:29,572 --> 00:52:30,460\n[LAUGH] [SOUND] All right,\nwelcome back everybody.\n\n1074\n00:52:30,460 --> 00:52:33,780\nSo, for our last segment, we're going\nto take a look at Direct Access.\n\n1075\n00:52:33,780 --> 00:52:34,560\nNow, I know, you might be saying,\n\n1076\n00:52:34,560 --> 00:52:37,410\nwait a minute, we've kinda been\ntalking about direct access a lot.\n\n1077\n00:52:37,410 --> 00:52:38,832\n>> How many times are you\ngonna talk about it.\n\n1078\n00:52:38,832 --> 00:52:39,340\n>> I know.\nNow,\n\n1079\n00:52:39,340 --> 00:52:40,900\nwe're gonna focus in on it specifically.\n\n1080\n00:52:40,900 --> 00:52:43,310\nAnd that's because it is a newer solution.\n\n1081\n00:52:43,310 --> 00:52:45,030\nIt's something very\nattractive to Microsoft.\n\n1082\n00:52:45,030 --> 00:52:46,800\nDefinitely something that's\ngonna show up on the exam.\n\n1083\n00:52:46,800 --> 00:52:50,450\nSo we wanna be aware of it and\nunderstand the various caveats.\n\n1084\n00:52:50,450 --> 00:52:55,040\nIt's a neat protocol, but for those\nof you guys that already watched the,\n\n1085\n00:52:55,040 --> 00:52:56,690\nwhere did we do that 411 or 412?\n\n1086\n00:52:56,690 --> 00:52:58,420\n>> Gosh, that was in the advanced.\n\n1087\n00:52:58,420 --> 00:52:59,130\nI think that's 412.\n\n1088\n00:52:59,130 --> 00:52:59,660\n>> 412\n>> I think.\n\n1089\n00:52:59,660 --> 00:53:01,260\n>> So if you watched that show,\n\n1090\n00:53:01,260 --> 00:53:02,140\nwhich you should have.\n\n1091\n00:53:02,140 --> 00:53:05,160\nActually, you should have already\npassed that test by this point.\n\n1092\n00:53:05,160 --> 00:53:06,530\nThen, you've seen how to implement it.\n\n1093\n00:53:06,530 --> 00:53:08,900\nAnd you know about the weird\nthings you've got to do,\n\n1094\n00:53:08,900 --> 00:53:11,230\nlike the consecutive IP addresses and\nall that.\n\n1095\n00:53:12,450 --> 00:53:17,770\nFrom a purely design perspective,\nif we want to deploy direct access,\n\n1096\n00:53:17,770 --> 00:53:20,710\nit's actually not really that complex.\n\n1097\n00:53:20,710 --> 00:53:22,420\n>> Right.\n>> We've got our firewall port stack to be\n\n1098\n00:53:22,420 --> 00:53:25,160\nopen, Mike was rattling those off earlier\n>> Yes.\n\n1099\n00:53:25,160 --> 00:53:26,739\n>> And we'll post those at the show notes.\n\n1100\n00:53:27,860 --> 00:53:30,830\nThe real decisions we have\nto make are things like\n\n1101\n00:53:30,830 --> 00:53:34,920\nhow many direct access servers we\nneed to handle our load, and so on.\n\n1102\n00:53:34,920 --> 00:53:37,370\n>> And what level of access,\nwe want to give them to our networks and\n\n1103\n00:53:37,370 --> 00:53:38,845\nthings like that.\n\n1104\n00:53:38,845 --> 00:53:40,040\n>> So,let's take a look at all that.\n\n1105\n00:53:40,040 --> 00:53:40,740\nYeah.\n\n1106\n00:53:40,740 --> 00:53:45,520\n>> In 2012, as I was saying, it really\nwas a pain in the but to set it up.\n\n1107\n00:53:45,520 --> 00:53:47,630\nI mean not a pain, but it was a challenge.\n\n1108\n00:53:47,630 --> 00:53:49,000\nThere was a lot of information.\n\n1109\n00:53:49,000 --> 00:53:51,500\nIn 2012 R2, man,\nthey've got this beautiful\n\n1110\n00:53:51,500 --> 00:53:53,280\nwizard now that we can go through.\n\n1111\n00:53:53,280 --> 00:53:56,980\nAnd it pretty much asks you\nvery simplistic questions.\n\n1112\n00:53:56,980 --> 00:53:59,230\nWhere do you wanna put\nyour direct access server?\n\n1113\n00:53:59,230 --> 00:54:00,380\nIs it an edge device?\n\n1114\n00:54:00,380 --> 00:54:01,050\nIs it a DMZ?\n\n1115\n00:54:01,050 --> 00:54:03,090\nIs it a, and things like that.\n\n1116\n00:54:03,090 --> 00:54:06,460\nAnd they've added some support for\nworking along with NAT.\n\n1117\n00:54:06,460 --> 00:54:09,310\nSo you can actually get\naway from the whole,\n\n1118\n00:54:09,310 --> 00:54:12,700\nI have to have two consecutive IPv4\naddresses and things like that.\n\n1119\n00:54:12,700 --> 00:54:13,240\nSo there.\n\n1120\n00:54:13,240 --> 00:54:14,870\nThey're really made\nsome good improvements.\n\n1121\n00:54:14,870 --> 00:54:18,240\nAll that's going to do is make it\neven more viable of a solution.\n\n1122\n00:54:18,240 --> 00:54:21,825\nBecause now, I don't have to be so\nstringent in some of my you know,\n\n1123\n00:54:21,825 --> 00:54:24,997\nI can put this in places that I might\nnot have been able to do before.\n\n1124\n00:54:24,997 --> 00:54:27,880\nSo really cool,\ndon't have to have you know, cuz normally,\n\n1125\n00:54:27,880 --> 00:54:31,180\nwhen we think of a remote access server I\ncould have one connection to the outside.\n\n1126\n00:54:31,180 --> 00:54:32,500\nOne connection to the inside.\n\n1127\n00:54:32,500 --> 00:54:33,810\nThat's the whole point.\n\n1128\n00:54:33,810 --> 00:54:35,070\nBut now, with direct access,\n\n1129\n00:54:35,070 --> 00:54:37,860\nI can actually deploy it with\na single network adapter and NAT.\n\n1130\n00:54:37,860 --> 00:54:38,605\nIt's pretty crazy.\n\n1131\n00:54:38,605 --> 00:54:39,280\n>> Mm-hm.\n\n1132\n00:54:39,280 --> 00:54:39,790\n>> But really,\n\n1133\n00:54:39,790 --> 00:54:44,500\nwhen we look at our deployment topologies,\nI think Don has a couple of, not yet.\n\n1134\n00:54:44,500 --> 00:54:48,330\nWe are going to talk about a couple of\ndifferent ways that we can implement or\n\n1135\n00:54:48,330 --> 00:54:52,720\nwe can allow access into our network.\n\n1136\n00:54:52,720 --> 00:54:57,360\nWe can do it for, what's a good way to\nsay it, we can do full intranet access,\n\n1137\n00:54:57,360 --> 00:54:59,510\nwhich is typically like a VPN.\n\n1138\n00:54:59,510 --> 00:55:03,410\nWhere I'm just gonna allow these people\nto connect to this Direct Access server,\n\n1139\n00:55:03,410 --> 00:55:05,030\nwell, I should say the computer, right?\n\n1140\n00:55:05,030 --> 00:55:06,600\nIt happens behind the scenes.\n\n1141\n00:55:06,600 --> 00:55:09,040\nAnd they're gonna have access\nto everything in the network.\n\n1142\n00:55:09,040 --> 00:55:10,970\nEverything that they would normally\nhave permissions according to\n\n1143\n00:55:10,970 --> 00:55:12,600\ntheir user account.\n\n1144\n00:55:12,600 --> 00:55:14,480\nWhich is a common implementation,\n\n1145\n00:55:14,480 --> 00:55:18,930\nif we want to just give them access to\nall the file shares, all the printers.\n\n1146\n00:55:18,930 --> 00:55:23,690\nIt's just like they were connected to,\nthey were sitting at their work computer.\n\n1147\n00:55:23,690 --> 00:55:24,760\nSometimes, however,\n\n1148\n00:55:24,760 --> 00:55:29,790\nwe might wanna limit what they have access\nto when they're connecting remotely.\n\n1149\n00:55:29,790 --> 00:55:33,230\nWe might have some information\nthat's okay that they access\n\n1150\n00:55:33,230 --> 00:55:36,480\nwhile they're at the corporate\nnetwork on my secure LAN.\n\n1151\n00:55:36,480 --> 00:55:40,290\nBut I cannot have that information\nbeing transmitted out across the WAN,\n\n1152\n00:55:40,290 --> 00:55:41,250\neven if it's in a tunnel.\n\n1153\n00:55:41,250 --> 00:55:44,510\nBecause they're at some hotel or\nsomewhere like that.\n\n1154\n00:55:44,510 --> 00:55:47,720\nAnd there could be other things\nthat are coming into play, so.\n\n1155\n00:55:47,720 --> 00:55:50,880\nMaybe, I want to do\na selected server access.\n\n1156\n00:55:52,580 --> 00:55:54,340\nWhere I limit what they're\nable to connect to.\n\n1157\n00:55:54,340 --> 00:55:56,760\nThey still make their direct\naccess connection, but\n\n1158\n00:55:56,760 --> 00:55:58,740\nthey only see certain\nresources in the network.\n\n1159\n00:55:58,740 --> 00:56:01,063\nCertain servers in the network.\n\n1160\n00:56:01,063 --> 00:56:03,969\nOr we can do what we call and\nend-to-end connection.\n\n1161\n00:56:03,969 --> 00:56:08,256\nWhere we actually connect all the way to a\nparticular server, a particular resource.\n\n1162\n00:56:08,256 --> 00:56:10,145\nYou go through that Direct Access server.\n\n1163\n00:56:10,145 --> 00:56:13,170\nAnd then you connect to,\nI don't know, a file server.\n\n1164\n00:56:13,170 --> 00:56:14,350\nSomething like that.\n\n1165\n00:56:14,350 --> 00:56:17,360\nAnd that's where we're gonna\nestablish that connection between.\n\n1166\n00:56:17,360 --> 00:56:18,690\n>> Yep.\n>> So a couple different options with our\n\n1167\n00:56:18,690 --> 00:56:20,100\ntopologies there.\n\n1168\n00:56:20,100 --> 00:56:22,150\n>> Now that full access\nmethod that Mike mentioned,\n\n1169\n00:56:22,150 --> 00:56:23,260\nthat's gonna be the most common one.\n\n1170\n00:56:23,260 --> 00:56:24,830\n>> Yeah.\n>> That's what a lot of people do.\n\n1171\n00:56:24,830 --> 00:56:27,610\nBut there are some security\nimplications with that.\n\n1172\n00:56:27,610 --> 00:56:31,000\nLike I kinda mentioned earlier,\nwhich is if you have somebody who is\n\n1173\n00:56:31,000 --> 00:56:35,760\noutside of your facility, they're at\na hotel, they're who knows where, right?\n\n1174\n00:56:35,760 --> 00:56:39,030\nIf they establish\na Direct Access connection, and\n\n1175\n00:56:39,030 --> 00:56:42,300\nthey have full access to the intranet,\n\n1176\n00:56:42,300 --> 00:56:46,680\nthen you are opening yourself up to\nrisk is you can't see that machine.\n\n1177\n00:56:46,680 --> 00:56:48,230\nYou don't know what is being done on it.\n\n1178\n00:56:48,230 --> 00:56:52,910\nYou don't know if it is actually that\nperson, maybe somebody stolen that laptop,\n\n1179\n00:56:52,910 --> 00:56:56,540\nor they got user credentials or maybe they\nlet their kid use the computers while they\n\n1180\n00:56:56,540 --> 00:56:59,870\nwalked off, that kind of stuff,\nyou don't know, right?\n\n1181\n00:56:59,870 --> 00:57:03,430\nSo you've got to make sure you're securing\nthat endpoint if you're going to go\n\n1182\n00:57:03,430 --> 00:57:04,360\nfull access.\n\n1183\n00:57:04,360 --> 00:57:08,440\n>> Right.\n>> But one of Microsoft's big concepts or\n\n1184\n00:57:08,440 --> 00:57:12,980\nmodels, slogans, whatever is\nthe principle of least privilege.\n\n1185\n00:57:12,980 --> 00:57:15,040\nWhen you provide somebody access,\n\n1186\n00:57:15,040 --> 00:57:19,300\nyou should give them the bare minimum\nthey need to get their work done.\n\n1187\n00:57:19,300 --> 00:57:23,220\nSo, think about why does that person\nneed Direct Access to connect.\n\n1188\n00:57:23,220 --> 00:57:25,860\nMaybe you have a CRM\nserver on your network.\n\n1189\n00:57:25,860 --> 00:57:29,510\nRight, or a SharePoint server,\nan intranet server,\n\n1190\n00:57:29,510 --> 00:57:33,240\nsomething on your network that they need\naccess to when they're remote,all right,\n\n1191\n00:57:33,240 --> 00:57:36,400\nwell, when you do full access,\nthey'll get access to that.\n\n1192\n00:57:36,400 --> 00:57:40,685\nLook at access like everything else too\nwithout all the supervision they get when\n\n1193\n00:57:40,685 --> 00:57:44,960\nthey're at the office and so that's where\nthe other models come in really handy.\n\n1194\n00:57:44,960 --> 00:57:50,140\nNow, the most restrictive one, Mike,\nyou mentioned is the end to end access.\n\n1195\n00:57:50,140 --> 00:57:53,300\nIt's probably the least\nused of the three models.\n\n1196\n00:57:53,300 --> 00:57:56,270\nAnd you know,\nit's because the end station fires up and\n\n1197\n00:57:56,270 --> 00:58:01,150\nthey directly connect to a single station\nand that's what they get access for.\n\n1198\n00:58:01,150 --> 00:58:02,930\nWhat's a scenario where we would use that?\n\n1199\n00:58:02,930 --> 00:58:05,500\nWhere you just have access to one server?\n\n1200\n00:58:05,500 --> 00:58:08,020\n>> It might be,\nI'm trying to think of a good example.\n\n1201\n00:58:08,020 --> 00:58:11,570\nMaybe it's a SQL database.\n\n1202\n00:58:12,780 --> 00:58:16,030\n>> I've seen it with file servers where\nyou wanna have access to your files.\n\n1203\n00:58:16,030 --> 00:58:18,940\nNow your email and stuff,\nyou get that through Outlook Web Access or\n\n1204\n00:58:18,940 --> 00:58:20,860\nother protocols like files, right?\n\n1205\n00:58:20,860 --> 00:58:22,080\nThat file share.\n\n1206\n00:58:22,080 --> 00:58:22,830\nYou may wanna\n\n1207\n00:58:22,830 --> 00:58:25,010\nhave an end to end connection to be\nable to jump out there and get it.\n\n1208\n00:58:25,010 --> 00:58:28,440\nAnd the end to end connection, it might\nbe it typically leads to a server.\n\n1209\n00:58:28,440 --> 00:58:29,980\nBut it might be to a workstation or\nsomething so\n\n1210\n00:58:29,980 --> 00:58:32,150\nthat you can get at your\nfiles that are at the office.\n\n1211\n00:58:32,150 --> 00:58:34,500\nThere's other solutions\nthat can be used for that,\n\n1212\n00:58:34,500 --> 00:58:37,000\nso you may not necessarily\nbe the best fit.\n\n1213\n00:58:37,000 --> 00:58:40,210\n>> It's obviously one of\nthe most secure of our choices.\n\n1214\n00:58:40,210 --> 00:58:44,765\nOne big difference between say,\ndoing full Internet access and\n\n1215\n00:58:44,765 --> 00:58:48,985\nthat end to end is where the protection or\nencryption stops.\n\n1216\n00:58:48,985 --> 00:58:53,845\nLike with a VPN, the same thing with\nmy Direct Access full intranet,\n\n1217\n00:58:53,845 --> 00:58:57,335\nthe protection is between that client\nthat's making that connection, and\n\n1218\n00:58:57,335 --> 00:58:58,695\nthen that Direct Access server.\n\n1219\n00:58:58,695 --> 00:59:01,945\nThe authentication traffic,\nthe data that we're transmitting back and\n\n1220\n00:59:01,945 --> 00:59:04,005\nforth is going to be protected.\n\n1221\n00:59:04,005 --> 00:59:07,550\nOnce I get to that Direct Access server,\nmake it to the other side, I'm on\n\n1222\n00:59:07,550 --> 00:59:10,938\nthe corporate LAN, right, at that point,\nand the traffic is no longer protected.\n\n1223\n00:59:10,938 --> 00:59:14,660\nThat encapsulation is being removed and\nI'm typically okay with that,\n\n1224\n00:59:14,660 --> 00:59:17,050\nbecause that is my trusted network.\n\n1225\n00:59:17,050 --> 00:59:20,410\nBut if I need that security to\ngo all the way to, as you say,\n\n1226\n00:59:20,410 --> 00:59:23,820\nthat file server I'm connecting to,\nthat solution is not gonna work.\n\n1227\n00:59:23,820 --> 00:59:28,070\nSo that's when we might wanna look\nat that end to end type solution.\n\n1228\n00:59:28,070 --> 00:59:31,960\n>> Because it is so restricted, that does\nmake it one of the least commonly used.\n\n1229\n00:59:31,960 --> 00:59:36,130\nSo that the middle ground of\nthe selected server access,\n\n1230\n00:59:36,130 --> 00:59:37,330\nthat's going to be more common.\n\n1231\n00:59:37,330 --> 00:59:39,480\n>> Right, yep.\n>> If somebody is remotely connecting in\n\n1232\n00:59:39,480 --> 00:59:42,790\nand they need access to your crm and\na file server.\n\n1233\n00:59:42,790 --> 00:59:44,530\n>> Right.\n>> Well, you'd put that in your list and\n\n1234\n00:59:44,530 --> 00:59:47,500\nyou'd say here is what they are going\nto have access to when they connect in.\n\n1235\n00:59:47,500 --> 00:59:51,450\nThat prevents them from doing other\nmalicious activity on systems they\n\n1236\n00:59:51,450 --> 00:59:53,140\ndidn't need access to in the first place.\n\n1237\n00:59:53,140 --> 00:59:57,650\nIt's not very difficult to set up, and so\nthe majority of the time selected server\n\n1238\n00:59:57,650 --> 00:59:59,410\naccess is the one that\nwe're gonna go with.\n\n1239\n01:00:00,560 --> 01:00:04,110\nSo, this is a great example of where on\nthe exam you might see a question that's\n\n1240\n01:00:04,110 --> 01:00:08,280\nbased on choose the most correct answer.\n\n1241\n01:00:08,280 --> 01:00:10,340\nThere might be more than\none correct answer,\n\n1242\n01:00:10,340 --> 01:00:12,150\nbut one is more correct than another.\n\n1243\n01:00:12,150 --> 01:00:15,240\nSo we want to provide access to a user,\nbut\n\n1244\n01:00:15,240 --> 01:00:18,420\nrestrict them to just\nthe machines they need to get to.\n\n1245\n01:00:18,420 --> 01:00:21,470\nWell, full access,\nthat'll provide them access to the server.\n\n1246\n01:00:21,470 --> 01:00:24,000\nThat knocks out one part\nof the requirements, but\n\n1247\n01:00:24,000 --> 01:00:25,810\nit gives them more access\nthan they need and\n\n1248\n01:00:25,810 --> 01:00:28,300\nthat makes that answer a little\nless correct than the others.\n\n1249\n01:00:28,300 --> 01:00:30,810\n>> Exactly.\nOr if they tell you on that exam I need to\n\n1250\n01:00:30,810 --> 01:00:34,080\nprotect that data all\nthe way to the resource,\n\n1251\n01:00:34,080 --> 01:00:35,800\nthen those first two aren't\ngonna be possible, right?\n\n1252\n01:00:35,800 --> 01:00:38,560\nThe full intranet and the selected server\n\n1253\n01:00:38,560 --> 01:00:41,900\nboth are gonna remove that encapsulation\nonce you get to the Direct Access server.\n\n1254\n01:00:41,900 --> 01:00:44,710\nSo then your only solution\nwould be that end to end.\n\n1255\n01:00:44,710 --> 01:00:45,910\n>> Yeah, or\n\n1256\n01:00:45,910 --> 01:00:49,970\nstacking on top another protocol\nwhich becomes a bit of a nightmare.\n\n1257\n01:00:49,970 --> 01:00:52,290\nBut just to make sure you guys have\na good conceptual understanding,\n\n1258\n01:00:52,290 --> 01:00:53,750\nlet me go back to my diagram.\n\n1259\n01:00:53,750 --> 01:00:55,850\nWhen we talk about full access,\n\n1260\n01:00:55,850 --> 01:01:00,570\nor selected access, the client is actually\nconnecting to the Direct Access server,\n\n1261\n01:01:00,570 --> 01:01:02,570\nthe remote access server\nthat is running that.\n\n1262\n01:01:02,570 --> 01:01:06,900\nBut when we do end to end, it then\nbasically continues on and, I don't know\n\n1263\n01:01:06,900 --> 01:01:09,520\nif this will let me curve it, let's say\nwe're connecting to this file server.\n\n1264\n01:01:11,290 --> 01:01:12,880\nWhat we're actually connecting behind.\n\n1265\n01:01:12,880 --> 01:01:15,430\nI can only curve my tunnel so far.\n\n1266\n01:01:15,430 --> 01:01:18,960\nSo we're basically like relaying\nthrough that remote access server.\n\n1267\n01:01:18,960 --> 01:01:21,762\nAnd yeah, this is gonna be all warped and\nmessed up.\n\n1268\n01:01:21,762 --> 01:01:23,240\nAll right well, but\n\n1269\n01:01:23,240 --> 01:01:26,840\nbasically that connection is bouncing\nthrough the remote access server.\n\n1270\n01:01:26,840 --> 01:01:29,760\nI guess the better way for\nme to show that would be to create like.\n\n1271\n01:01:29,760 --> 01:01:31,936\n>> Mm, another.\n>> Two tunnels, and\n\n1272\n01:01:31,936 --> 01:01:36,270\nlike [LAUGH] this is breaking down fast.\n\n1273\n01:01:36,270 --> 01:01:42,850\nSo it's basically coming in like this and\ndoing two tunnels and you're leapfrogging.\n\n1274\n01:01:42,850 --> 01:01:44,430\nWell, now I'm just breaking everything.\n\n1275\n01:01:44,430 --> 01:01:48,550\nSo you're leapfrogging from one to\nthe other and that creates that\n\n1276\n01:01:48,550 --> 01:01:52,430\nsecure connection that you need to\nget connected to the server and\n\n1277\n01:01:52,430 --> 01:01:54,870\nhave everything be protected\nthe way that it needs to be.\n\n1278\n01:01:54,870 --> 01:01:55,900\n>> You might have an admin or\n\n1279\n01:01:55,900 --> 01:01:59,200\nsomebody high up that's out there that's\nmaking this Direct Access connection and\n\n1280\n01:01:59,200 --> 01:02:02,910\nthey're connecting to resources that are\nsensitive enough to where I got to make\n\n1281\n01:02:02,910 --> 01:02:06,540\nsure that even other people on that\nlocal area network can't see it.\n\n1282\n01:02:06,540 --> 01:02:09,640\nBecause, if I go through that\nDirect Access server and I've got\n\n1283\n01:02:09,640 --> 01:02:13,790\nfull intranet or select server access,\nand then I connect to that file server.\n\n1284\n01:02:13,790 --> 01:02:16,680\nWell, while that data's on\nthe LAN over there, it's visible.\n\n1285\n01:02:16,680 --> 01:02:18,317\nRight.\nIt's not encrypted unless it's,\n\n1286\n01:02:18,317 --> 01:02:20,480\nas Don say,\nwe put some other layer on top of that.\n\n1287\n01:02:20,480 --> 01:02:24,460\nSo that would give the opportunity for\nsome person that's on the LAN to run some\n\n1288\n01:02:24,460 --> 01:02:27,410\npacket capture utility, or something\nlike that, and capture that information.\n\n1289\n01:02:28,410 --> 01:02:30,560\n>> Yeah, that's our big risk.\n\n1290\n01:02:30,560 --> 01:02:35,540\nAnd the reality of it is internal attacks\nare far more common than external attacks.\n\n1291\n01:02:35,540 --> 01:02:38,310\nThere's hackers out there on the Internet,\neverybody knows that, right?\n\n1292\n01:02:38,310 --> 01:02:40,510\nAnd they're constantly\nscanning your systems.\n\n1293\n01:02:40,510 --> 01:02:42,070\nIf you look at the logs on your firewall,\n\n1294\n01:02:42,070 --> 01:02:44,250\nyou'll see thousands of\nscans per minute probably.\n\n1295\n01:02:44,250 --> 01:02:45,920\n>> Yeah.\n>> I mean it's ridiculous.\n\n1296\n01:02:45,920 --> 01:02:48,730\nBut, those are non-focused attacks.\n\n1297\n01:02:48,730 --> 01:02:50,090\nThey're just looking for\neasy targets, right?\n\n1298\n01:02:50,090 --> 01:02:52,780\nThey're trying to find people\nto break into that way.\n\n1299\n01:02:52,780 --> 01:02:56,690\nBut, internally,\nyou've got focused attacks, you know,\n\n1300\n01:02:56,690 --> 01:03:01,110\nmaybe it's disgruntled employees or\nwhatever or people that have specifically\n\n1301\n01:03:01,110 --> 01:03:05,330\ninfiltrated your organization to be able\nto collect that data, so internal security\n\n1302\n01:03:05,330 --> 01:03:09,240\nis something that's overlooked a lot and\nreally we need solutions for that.\n\n1303\n01:03:09,240 --> 01:03:10,720\n>> There used to be\na cool webpage I went to,\n\n1304\n01:03:10,720 --> 01:03:15,760\nit was cybercrime.gov, I think it's still\nout there and they can list all of these\n\n1305\n01:03:15,760 --> 01:03:19,210\ncases that have been prosecuted and\nyou look at the offender and\n\n1306\n01:03:19,210 --> 01:03:23,450\nit was disgruntled employee, disgruntled\nemployee, ex-employee, former employee.\n\n1307\n01:03:23,450 --> 01:03:25,630\nI mean, they've already got a username and\npassword, right?\n\n1308\n01:03:25,630 --> 01:03:28,110\nOn your network, they've got access\nto your ports and things like that,\n\n1309\n01:03:28,110 --> 01:03:30,460\nso definitely something\nwe've gotta worry about.\n\n1310\n01:03:30,460 --> 01:03:31,340\n>> Yeah.\n\n1311\n01:03:31,340 --> 01:03:35,010\nAll right now, Direct Access,\nstarting with Windows Server 2012,\n\n1312\n01:03:35,010 --> 01:03:39,000\nwas introduced and\nbuilt into the operating system.\n\n1313\n01:03:39,000 --> 01:03:43,960\nSo it's just a part of the remote access\nrole, we tack that on and we're up and\n\n1314\n01:03:43,960 --> 01:03:45,850\nrunning with a Direct Access server.\n\n1315\n01:03:45,850 --> 01:03:49,046\nWhen you do your design if\nyou wanna use Direct Access,\n\n1316\n01:03:49,046 --> 01:03:52,257\nyou're gonna need at least\none Direct Access server.\n\n1317\n01:03:52,257 --> 01:03:56,302\nBut people's communications are gonna\nbe bouncing through that server so\n\n1318\n01:03:56,302 --> 01:04:00,088\nthe more clients you have, the more\nDirect Access servers you need and\n\n1319\n01:04:00,088 --> 01:04:03,552\nyou can build up a Direct Access\narray where you have more than one\n\n1320\n01:04:03,552 --> 01:04:05,950\nDirect Access node handling your traffic.\n\n1321\n01:04:05,950 --> 01:04:07,279\nSo when we start to do a design,\n\n1322\n01:04:07,279 --> 01:04:10,359\nwe've gotta pay attention to\nthe amount of bandwidth that we've got.\n\n1323\n01:04:10,359 --> 01:04:14,307\nAnd encryption and decryption of traffic\nis kind of burdensome to a DirectAccess\n\n1324\n01:04:14,307 --> 01:04:17,845\nserver, so we've gotta make sure that\nwe have the nodes to handle that,\n\n1325\n01:04:17,845 --> 01:04:20,880\nto handle the load that we've got,\nall right?\n\n1326\n01:04:20,880 --> 01:04:25,790\nThe other thing though\nis the Direct Access,\n\n1327\n01:04:25,790 --> 01:04:29,440\nit's new in Windows Server 2012,\nright, so it never existed before.\n\n1328\n01:04:29,440 --> 01:04:31,045\n>> Well, that's not entirely true,\n\n1329\n01:04:31,045 --> 01:04:34,310\nDirectAccess was originally\na standalone product.\n\n1330\n01:04:34,310 --> 01:04:38,240\nIt was called Microsoft Forefront\nUnified Access Gateway.\n\n1331\n01:04:38,240 --> 01:04:40,580\n>> Unified Access Gateway, UAG.\n\n1332\n01:04:40,580 --> 01:04:43,760\n>> So, it had a previous life, all right,\n\n1333\n01:04:43,760 --> 01:04:45,800\nas a separate product\nthat you had to purchase.\n\n1334\n01:04:45,800 --> 01:04:48,320\nNow it's built into the OS but\nit used to be a separate product.\n\n1335\n01:04:48,320 --> 01:04:52,910\nSo, one of the deployment scenarios\nyou might have is doing a fresh,\n\n1336\n01:04:52,910 --> 01:04:56,360\nbrand new deployment in which case\nyou just pick how many DAs you need,\n\n1337\n01:04:56,360 --> 01:04:59,040\nhow many DirectAccess servers you need and\nyou throw them out there.\n\n1338\n01:04:59,040 --> 01:05:03,462\nBut you may also have another scenario\nwhich is upgrading from Forefront UAG.\n\n1339\n01:05:03,462 --> 01:05:06,990\nAll right, now, Mike how many production\nenvironments have you gone to where they\n\n1340\n01:05:06,990 --> 01:05:08,025\nare running Forefront UAG?\n\n1341\n01:05:08,025 --> 01:05:11,505\nYeah, same for me.\n\n1342\n01:05:11,505 --> 01:05:12,670\n>> [LAUGH]\n>> It's not,\n\n1343\n01:05:12,670 --> 01:05:15,130\nit wasn't a very popular product.\n\n1344\n01:05:15,130 --> 01:05:17,690\n>> We had our VPN solutions already,\nand now you want me to pay for\n\n1345\n01:05:17,690 --> 01:05:20,730\nthis other thing that might or\nnot be better, I don't know yet.\n\n1346\n01:05:20,730 --> 01:05:24,180\n>> Yeah, and the client wasn't\nbaked into the OS yet, and so\n\n1347\n01:05:24,180 --> 01:05:26,940\nit was definitely a little\nbit trickier to deal with.\n\n1348\n01:05:26,940 --> 01:05:28,240\nSo it wasn't very common.\n\n1349\n01:05:28,240 --> 01:05:31,130\nBut Microsoft did push it for some of\nthe larger enterprise clients, and so\n\n1350\n01:05:31,130 --> 01:05:33,790\nit is out there, you may encounter it.\n\n1351\n01:05:33,790 --> 01:05:36,560\nFortunately, DirectAccess didn't really\n\n1352\n01:05:36,560 --> 01:05:40,890\nchange much between Forefront UAG\nversus DirectAccess.\n\n1353\n01:05:40,890 --> 01:05:42,910\nIt's just that it's built into the OS now.\n\n1354\n01:05:42,910 --> 01:05:47,570\nSo migrating from one to the other\nis not that big of a deal.\n\n1355\n01:05:47,570 --> 01:05:49,870\nThere's two primary methods we use for\nof the migration.\n\n1356\n01:05:51,010 --> 01:05:55,560\nThere's the side by side migration,\nand the offline migration, all right?\n\n1357\n01:05:55,560 --> 01:05:58,325\nSide by side is the most common,\nif you got money.\n\n1358\n01:05:58,325 --> 01:06:01,350\n[LAUGH]\n>> Have some extra hardware laying around,\n\n1359\n01:06:01,350 --> 01:06:02,270\nthat kind of thing.\n\n1360\n01:06:02,270 --> 01:06:06,431\n>> Yeah, and it's a very common migration\nmodel for Microsoft now which is,\n\n1361\n01:06:06,431 --> 01:06:09,560\nyou don't upgrade,\nyou migrate, you replace.\n\n1362\n01:06:09,560 --> 01:06:13,340\nSo, you have Forefront UAG up and\nrunning, you don't mess with it, and\n\n1363\n01:06:13,340 --> 01:06:18,020\nyou bring up all new DirectAccess servers\nand they're running side by side.\n\n1364\n01:06:18,020 --> 01:06:20,130\nBoth running at the same time.\n\n1365\n01:06:20,130 --> 01:06:23,210\nThen, at your leisure, you can just\nredirect the clients to point to\n\n1366\n01:06:23,210 --> 01:06:26,380\nthe new UAG,\nto the new DirectAccess server.\n\n1367\n01:06:26,380 --> 01:06:28,840\n>> Right,\n>> And off you go, right?\n\n1368\n01:06:28,840 --> 01:06:31,890\nSo, the nice thing about this; you\ndon't have to schedule any downtime,\n\n1369\n01:06:31,890 --> 01:06:35,220\nyou can move at your leisure,\nyou can have some clients on the old UAG.\n\n1370\n01:06:35,220 --> 01:06:38,300\nYou can have some clients on\nthe new DirectAccess as you kind of\n\n1371\n01:06:38,300 --> 01:06:40,469\ntest the waters and wade into it.\n\n1372\n01:06:41,530 --> 01:06:42,212\nIt's a very simple model.\n\n1373\n01:06:42,212 --> 01:06:45,572\n>> Absolutely, and like you said\nleast impact on availability, and\n\n1374\n01:06:45,572 --> 01:06:49,177\nas you said just the ability to do\na couple, and let's see how it works.\n\n1375\n01:06:49,177 --> 01:06:50,488\nLet's see where we goofed or\n\n1376\n01:06:50,488 --> 01:06:54,270\nanything like that before we move the\nentire organization over to that solution.\n\n1377\n01:06:55,270 --> 01:06:57,870\nSo Microsoft actually has\na migration guide, but\n\n1378\n01:06:57,870 --> 01:06:59,350\nwe don't have to go into the giant guide.\n\n1379\n01:06:59,350 --> 01:07:02,460\nI'll post the URL for you so you can read\nit if you're excited about that stuff, but\n\n1380\n01:07:02,460 --> 01:07:06,940\nthe migration strategy for doing a side by\nside really just boils down to four steps.\n\n1381\n01:07:06,940 --> 01:07:09,130\nAnd I've got them right here in my notes.\n\n1382\n01:07:09,130 --> 01:07:15,210\nBasically, step one, you go to your\nUAG and you export your settings.\n\n1383\n01:07:15,210 --> 01:07:19,060\nYou can export the settings as\nfar as exactly how it was set,\n\n1384\n01:07:19,060 --> 01:07:23,110\nwhether it was selected server access,\nor so on, that kind of stuff.\n\n1385\n01:07:23,110 --> 01:07:25,720\nYou can export it or\nyou can just document it.\n\n1386\n01:07:25,720 --> 01:07:27,680\nThat's another way to go about it.\n\n1387\n01:07:27,680 --> 01:07:29,350\nSame thing with the GPOs.\n\n1388\n01:07:29,350 --> 01:07:33,430\nWith UAG, you use group policy objects\nto tell your clients what server to use.\n\n1389\n01:07:33,430 --> 01:07:37,164\nSo you need to document those because\nyou're gonna have to come and change those\n\n1390\n01:07:37,164 --> 01:07:40,760\nlater on, change them and appoint\npeople to the new DirectAccess servers.\n\n1391\n01:07:40,760 --> 01:07:44,730\nSo step one and step two is really just\nmaking sure that you've got your existing\n\n1392\n01:07:44,730 --> 01:07:46,810\nenvironment documented,\nthat you understand how it's configured.\n\n1393\n01:07:46,810 --> 01:07:47,680\nWhich you might already\nhave in the first place.\n\n1394\n01:07:47,680 --> 01:07:48,457\n>> Right, hopefully.\n\n1395\n01:07:48,457 --> 01:07:50,118\n>> Hopefully.\n[LAUGH]\n\n1396\n01:07:50,118 --> 01:07:50,873\n>> But, Mike,\n\n1397\n01:07:50,873 --> 01:07:55,369\nhow many places have you gone to where\nthey had up-to-date documentation?\n\n1398\n01:07:55,369 --> 01:07:57,840\n[LAUGH]\n>> Again, a big goose egg, one more time.\n\n1399\n01:07:57,840 --> 01:07:59,213\n[LAUGH]\n>> Yeah,\n\n1400\n01:07:59,213 --> 01:08:01,370\ncompanies do neglect their documentation.\n\n1401\n01:08:01,370 --> 01:08:03,480\nSo it's not uncommon for\nyou to need to refresh that, and\n\n1402\n01:08:03,480 --> 01:08:04,960\nthat's where we start, all right?\n\n1403\n01:08:04,960 --> 01:08:09,200\nStep three is just deploy the remote\naccess role on a server, right?\n\n1404\n01:08:09,200 --> 01:08:11,850\nIt's gonna be your DirectAccess server so\nyou got to deploy it somewhere.\n\n1405\n01:08:11,850 --> 01:08:14,090\nYou're gonna need at least one, right?\n\n1406\n01:08:14,090 --> 01:08:17,340\nProbably more if you've got heavy usage of\nthis stuff, but if you're just in testing,\n\n1407\n01:08:17,340 --> 01:08:19,970\nyou can deploy one and\ndepending on your hardware,\n\n1408\n01:08:19,970 --> 01:08:23,340\nthat's gonna determine how many clients\nyou can support connected to it.\n\n1409\n01:08:23,340 --> 01:08:25,520\nSo you'll need to monitor that too.\n\n1410\n01:08:25,520 --> 01:08:27,680\nAnd then step four,\nwe just configure it, right?\n\n1411\n01:08:27,680 --> 01:08:30,410\nConfiguring it is just like\na standalone server, right?\n\n1412\n01:08:30,410 --> 01:08:31,630\nIf we were doing a brand new install,\n\n1413\n01:08:31,630 --> 01:08:34,270\nyou'd get it set up, you put in\nall your infrastructure settings,\n\n1414\n01:08:34,270 --> 01:08:37,570\nall the things that we got from\nthe UAG originally, right?\n\n1415\n01:08:37,570 --> 01:08:41,270\nWe're adding in those settings,\nour IP addresses, DNS servers,\n\n1416\n01:08:41,270 --> 01:08:44,370\ncertificates, all the various\nthings that we need to provide.\n\n1417\n01:08:44,370 --> 01:08:47,090\n>> Now on our side by side,\nwe're gonna wanna make sure names and\n\n1418\n01:08:47,090 --> 01:08:48,440\nIP addresses are different, right,\n\n1419\n01:08:48,440 --> 01:08:50,902\ncuz we're gonna have both infrastructures\nrunning at the same time.\n\n1420\n01:08:50,902 --> 01:08:51,596\n>> Yeah.\nYou don't wanna overlap,\n\n1421\n01:08:51,596 --> 01:08:52,101\nthat's always fun.\n\n1422\n01:08:52,101 --> 01:08:53,320\n>> Yeah.\n[LAUGH]\n\n1423\n01:08:53,320 --> 01:08:55,064\n>> And when you have separate IPs for\n\n1424\n01:08:55,064 --> 01:08:58,800\nthis and that's gonna create\nsome challenges there too.\n\n1425\n01:08:58,800 --> 01:09:02,900\nBut once it's done all we do\nis we manipulate the GPOs.\n\n1426\n01:09:02,900 --> 01:09:06,270\nIt's the GPOs that are pointing people\nto the direct access servers anyway,\n\n1427\n01:09:06,270 --> 01:09:08,200\nthat's where they get their configuration.\n\n1428\n01:09:08,200 --> 01:09:11,750\nSo you may choose to just go and edit\nthe original GPOs to point to the new one.\n\n1429\n01:09:11,750 --> 01:09:14,489\nAnd then next time people update\ntheir policies they'll point to\n\n1430\n01:09:14,489 --> 01:09:15,790\nthe new DirectAccess server.\n\n1431\n01:09:16,920 --> 01:09:19,250\nOr you might want to do this\nbased on test groups, so\n\n1432\n01:09:19,250 --> 01:09:24,140\nyou create new GPOs to push some of your\nusers over to DirectAccess and step in.\n\n1433\n01:09:24,140 --> 01:09:26,020\nThat's what a lot of us like to do.\n\n1434\n01:09:26,020 --> 01:09:28,900\nBut that's basically it\nwith a side by side.\n\n1435\n01:09:28,900 --> 01:09:31,662\nOn a positive side it's real easy\nto back out if things go wrong.\n\n1436\n01:09:31,662 --> 01:09:32,590\n>> Yes.\n\n1437\n01:09:32,590 --> 01:09:35,186\n[LAUGH]\n>> On a negative side it's going to\n\n1438\n01:09:35,186 --> 01:09:36,920\nrequire double the hardware.\n\n1439\n01:09:36,920 --> 01:09:38,440\nYou've got to have extra\nhardware lying around.\n\n1440\n01:09:38,440 --> 01:09:39,960\nNow if these are virtual\nmachines it's not so\n\n1441\n01:09:39,960 --> 01:09:43,380\nbad, but if they're physical machines,\nit's extra hardware.\n\n1442\n01:09:43,380 --> 01:09:45,960\nExtra IPs, extra domain names, right?\n\n1443\n01:09:45,960 --> 01:09:49,050\nExtra licensing, cuz now you're\nlicensing two different servers,\n\n1444\n01:09:49,050 --> 01:09:51,470\nso a little bit burdensome there.\n\n1445\n01:09:51,470 --> 01:09:54,850\nBut it's definitely the safety\nnet model of moving over, right?\n\n1446\n01:09:54,850 --> 01:09:59,420\nYou're completely safe the whole way\ncuz it's super easy to flip back.\n\n1447\n01:09:59,420 --> 01:10:02,210\nBut let's say you don't\nhave the extra hardware or\n\n1448\n01:10:02,210 --> 01:10:05,362\nyou don't have the extra licenses or\nmaybe you just don't like safety nets\n\n1449\n01:10:05,362 --> 01:10:06,148\n>> [LAUGH]\n\n1450\n01:10:06,148 --> 01:10:07,815\n>> And you want to go all in.\n\n1451\n01:10:07,815 --> 01:10:11,740\nThat's our other model which\nis the offline migration.\n\n1452\n01:10:11,740 --> 01:10:15,855\nAnd again, the Microsoft Migration Guide\nreally goes into some great depth on it.\n\n1453\n01:10:15,855 --> 01:10:17,555\nThat's this URL I've got up here.\n\n1454\n01:10:17,555 --> 01:10:24,915\nBut it boils down to five steps also, just\nreal quick and easy way to kinda migrate.\n\n1455\n01:10:24,915 --> 01:10:29,685\nWith offline, you just shut down the UAG,\ntake that turkey out, and\n\n1456\n01:10:29,685 --> 01:10:33,460\nthen replace it with your\nDirectAccess servers.\n\n1457\n01:10:33,460 --> 01:10:35,030\nWere going to have downtime.\n\n1458\n01:10:35,030 --> 01:10:38,300\nYou take UAG down, all of your users\nare not cut off from DirectAccess\n\n1459\n01:10:38,300 --> 01:10:41,110\nwhile you build up the new environment and\nget people pushed over.\n\n1460\n01:10:41,110 --> 01:10:43,430\nIt can be really challenging\n\n1461\n01:10:43,430 --> 01:10:46,930\nespecially if you have users that\nonly connect using DirectAccess.\n\n1462\n01:10:46,930 --> 01:10:50,970\nIf you tear down the UAG,\nthey are no longer connected,\n\n1463\n01:10:50,970 --> 01:10:54,140\nare they gonna get the new GPOs\nthat we set to point over?\n\n1464\n01:10:54,140 --> 01:10:56,920\nNo, so there's definitely some\nthought that has to go into this.\n\n1465\n01:10:56,920 --> 01:11:00,380\nWe've got to push GPOs early, or we've got\nto have people come back to the office to\n\n1466\n01:11:00,380 --> 01:11:02,380\nget their updates to\npoint to the new server.\n\n1467\n01:11:02,380 --> 01:11:03,740\nThat can be a little challenging.\n\n1468\n01:11:03,740 --> 01:11:05,491\nYou can kind of work some tricks\nwith DNS Discovery and stuff.\n\n1469\n01:11:05,491 --> 01:11:08,603\nBut you probably want to\npush your GPOs out first, so\n\n1470\n01:11:08,603 --> 01:11:11,685\nthat things go a little bit\ndifferent in the order.\n\n1471\n01:11:11,685 --> 01:11:16,190\n>> I was one guy's blog I was reading, he\ncalled it the big bang method, he's like,\n\n1472\n01:11:16,190 --> 01:11:17,241\nIt's all or nothing man.\n\n1473\n01:11:17,241 --> 01:11:18,540\n>> [LAUGH]\n>> You just go for gold and\n\n1474\n01:11:18,540 --> 01:11:19,190\nsee what happens.\n\n1475\n01:11:19,190 --> 01:11:20,559\n>> This is either gonna work\n>> [LAUGH]\n\n1476\n01:11:20,559 --> 01:11:21,062\n>> Or it's not and\n\n1477\n01:11:21,062 --> 01:11:21,998\neither way we've moved on.\n\n1478\n01:11:21,998 --> 01:11:23,118\n>> [LAUGH] Pretty much.\n\n1479\n01:11:23,118 --> 01:11:25,297\n[LAUGH]\n>> That is one way to ensure that\n\n1480\n01:11:25,297 --> 01:11:27,750\nyou definitely move forward\ncause there is no rolling back.\n\n1481\n01:11:27,750 --> 01:11:29,955\n>> No rolling back, yeah,\ncuz you've already tore that UAG down.\n\n1482\n01:11:29,955 --> 01:11:34,880\n>> Yeah, if you have a company, like\na bank, where maybe you're not open on\n\n1483\n01:11:34,880 --> 01:11:39,310\nthe weekends, right, so if you were to\nshut down for a Saturday and maybe run\n\n1484\n01:11:39,310 --> 01:11:42,710\ninto problems, you got all day Sunday to\ntroubleshoot, that kind of works out.\n\n1485\n01:11:42,710 --> 01:11:47,060\nBut if you are a hospital\nthat's a 24/7 operation,\n\n1486\n01:11:47,060 --> 01:11:48,960\nthat's not really viable, right.\n\n1487\n01:11:48,960 --> 01:11:51,829\nAnd so the side by side may\nbe your only way to do this,\n\n1488\n01:11:51,829 --> 01:11:56,153\nto ensure the service levels you've got\nto meet with your customers, right.\n\n1489\n01:11:56,153 --> 01:12:01,322\nNow with the offline mode, basically we\nbuild up a new DirectAccess server and\n\n1490\n01:12:01,322 --> 01:12:03,447\nyou can shut down your old UAGs.\n\n1491\n01:12:03,447 --> 01:12:07,753\nYou've got to export or document the\nsettings on there if you've got them But\n\n1492\n01:12:07,753 --> 01:12:11,465\nbasically you're gonna bring up\nyour new direct access server and\n\n1493\n01:12:11,465 --> 01:12:15,838\nyou're basically treating this as a new\ninstall, so you run through the whole\n\n1494\n01:12:15,838 --> 01:12:20,408\nprocess like we did in the, 412 show\nto get that set up, you get your server\n\n1495\n01:12:20,408 --> 01:12:25,040\nIP set, you set up your IP HTTPS proxy And\nthen you start to build up your GPOs.\n\n1496\n01:12:25,040 --> 01:12:27,760\nAnd your GPO is just gonna specify\nthe newer mode access server.\n\n1497\n01:12:27,760 --> 01:12:29,320\nWe're ignoring the UAG.\n\n1498\n01:12:29,320 --> 01:12:30,730\nThe old stuff is gone.\n\n1499\n01:12:30,730 --> 01:12:33,290\nWe set up our clients,\nour application server.\n\n1500\n01:12:33,290 --> 01:12:35,920\nWe get all that stuff specified and\n\n1501\n01:12:35,920 --> 01:12:38,360\nwe configure direct access as\nif it was an all new thing.\n\n1502\n01:12:38,360 --> 01:12:40,260\nYou basically throw away the old,\n\n1503\n01:12:40,260 --> 01:12:42,400\nyou bring up the new one with\nthe same names or same IPs.\n\n1504\n01:12:42,400 --> 01:12:45,770\nMaybe it's the same server,\nbut probably not, right?\n\n1505\n01:12:45,770 --> 01:12:47,670\n>> Right.\n>> Because you know, UAG,\n\n1506\n01:12:47,670 --> 01:12:50,620\nit was mostly deployed\non Windows Server 2008.\n\n1507\n01:12:50,620 --> 01:12:55,360\nSo you're probably doing a new server here\nwith 2012, but maybe you've shut UAG down,\n\n1508\n01:12:55,360 --> 01:12:57,920\nformatted that server,\nprobably took a backup first, right.\n\n1509\n01:12:57,920 --> 01:12:58,540\n>> Yeah, hopefully.\n\n1510\n01:12:58,540 --> 01:13:02,100\n>> Formatted that server, and\nnow you're installing 2012 on it and\n\n1511\n01:13:02,100 --> 01:13:05,160\nbringing up the direct access and\ngoing from there.\n\n1512\n01:13:05,160 --> 01:13:08,180\n>> Really, and a lot of it is like what we\ntalked about in some of our other episodes\n\n1513\n01:13:08,180 --> 01:13:10,350\nabout upgrading the operating\nsystem itself, right.\n\n1514\n01:13:10,350 --> 01:13:14,700\nWe've talked about upgrading operating\nsystems and you can do a migration or\n\n1515\n01:13:14,700 --> 01:13:18,860\nyou can do a wipe and load,\nsame kind of concept here.\n\n1516\n01:13:18,860 --> 01:13:23,070\nOne of the nice things about the offline\nmigration is you are starting from a known\n\n1517\n01:13:23,070 --> 01:13:23,680\ngood point.\n\n1518\n01:13:23,680 --> 01:13:27,875\nNo chance of bringing any issues or\nproblems along with.\n\n1519\n01:13:27,875 --> 01:13:30,580\nWhereas, with your migration\nsometimes you can end up bringing,\n\n1520\n01:13:30,580 --> 01:13:35,350\nif some of those GPOs were configured\nincorrectly or that was causing problems.\n\n1521\n01:13:35,350 --> 01:13:38,230\nWell, if you bring those GPOs into your\ndirect access you just brought those\n\n1522\n01:13:38,230 --> 01:13:39,230\nproblems right along with you.\n\n1523\n01:13:39,230 --> 01:13:40,040\n>> That's right, yep.\n\n1524\n01:13:41,242 --> 01:13:44,720\nAll right, now the last little\nobjective here that we have\n\n1525\n01:13:44,720 --> 01:13:47,445\non the VPN side of things is\none time passwords, right?\n\n1526\n01:13:47,445 --> 01:13:51,510\nOTPs, one time passwords are really cool.\n\n1527\n01:13:51,510 --> 01:13:55,340\nMike, let's say for example that we've got\nyou set up for a remote access VPN and\n\n1528\n01:13:55,340 --> 01:13:58,510\nMicrosoft is referring to this in terms\nof direct access, but it's the same for\n\n1529\n01:13:58,510 --> 01:14:01,180\nthe other VPNs too, so\nwe'll wrap it all together.\n\n1530\n01:14:01,180 --> 01:14:01,720\n>> Right.\n\n1531\n01:14:01,720 --> 01:14:04,750\nIf Mike's laptop is set up for\nremote access VPN, and\n\n1532\n01:14:04,750 --> 01:14:07,415\nlet's say that Mike is one of those\nusers where you write your user name and\n\n1533\n01:14:07,415 --> 01:14:09,480\nyour password on a Post-It note and\nyou stick it on your monitor.\n\n1534\n01:14:09,480 --> 01:14:11,440\n>> You guys can't see that, can you?\n\n1535\n01:14:11,440 --> 01:14:17,490\n>> And then you're at the coffee shop and\nyou leave your laptop there.\n\n1536\n01:14:17,490 --> 01:14:19,345\nWell, what could somebody do\nif they had your laptop and\n\n1537\n01:14:19,345 --> 01:14:20,340\nyour user name and password?\n\n1538\n01:14:20,340 --> 01:14:21,590\n>> Pretty much anything they wanted.\n\n1539\n01:14:21,590 --> 01:14:23,380\nThey are now me at this point, right?\n\n1540\n01:14:23,380 --> 01:14:25,790\n>> They could log into your laptop,\nthey could VPN in, right?\n\n1541\n01:14:25,790 --> 01:14:28,610\n>> Especially if I've started\nsaving my passwords for\n\n1542\n01:14:28,610 --> 01:14:31,590\nmy VPN connections and\nthings like that, so, yeah.\n\n1543\n01:14:31,590 --> 01:14:32,900\n>> That's a big challenge, right?\n\n1544\n01:14:32,900 --> 01:14:36,160\nAnd it's a challenge whether you're\ndoing certificate authentication or user\n\n1545\n01:14:36,160 --> 01:14:38,890\nauthentication, whatever, cuz the same\ncertificate is being used over and over.\n\n1546\n01:14:38,890 --> 01:14:41,540\nIf somebody gets that certificate,\nit's a problem, right?\n\n1547\n01:14:41,540 --> 01:14:43,870\nSo how can we alleviate that?\n\n1548\n01:14:43,870 --> 01:14:47,580\nThere was a big scandal a few years ago\nabout how some people had been going\n\n1549\n01:14:47,580 --> 01:14:51,610\naround to Kinko's offices all over\nthe US and installing key loggers.\n\n1550\n01:14:51,610 --> 01:14:54,910\nSo people would go and rent a machine to\nuse to check their email or whatever and\n\n1551\n01:14:54,910 --> 01:14:58,214\nthese keystroke loggers would gather\ntheir credentials and ship them off.\n\n1552\n01:14:58,214 --> 01:15:00,890\nSo how do we prevent that\nfrom being a problem?\n\n1553\n01:15:00,890 --> 01:15:04,120\nWell, the solution is a one time password.\n\n1554\n01:15:04,120 --> 01:15:06,070\nA password that's an OTP or\n\n1555\n01:15:06,070 --> 01:15:11,030\none time when a user logs in,\nthey use that password and that's it.\n\n1556\n01:15:11,030 --> 01:15:14,070\nIt's no longer good for any other access.\n\n1557\n01:15:14,070 --> 01:15:15,450\nThey'll have a new password from there.\n\n1558\n01:15:15,450 --> 01:15:19,400\nThat means your password\nchanges every time you use it.\n\n1559\n01:15:19,400 --> 01:15:23,770\nIf somebody's running a keylogger, and\nthey capture your password, big deal.\n\n1560\n01:15:23,770 --> 01:15:25,355\nThey captured it while you used it.\n\n1561\n01:15:25,355 --> 01:15:28,920\nIts use has been burned up,\ncan't use it again, right?\n\n1562\n01:15:28,920 --> 01:15:33,700\nOne time passwords are like the Holy Grail\nof secure authentication, right?\n\n1563\n01:15:33,700 --> 01:15:36,170\nCuz it does completely\neliminate that ability for\n\n1564\n01:15:36,170 --> 01:15:39,050\nkeyloggers to be effective, right?\n\n1565\n01:15:39,050 --> 01:15:40,850\nAnd that's a cool thing to have.\n\n1566\n01:15:40,850 --> 01:15:41,960\nIt's really neat.\n\n1567\n01:15:41,960 --> 01:15:45,455\nThe problem is, how can you get\na user to do a one-time password,\n\n1568\n01:15:45,455 --> 01:15:48,030\ndo they carry around a sheet with\nall their upcoming passwords?\n\n1569\n01:15:48,030 --> 01:15:48,640\nWe can't do that.\n\n1570\n01:15:48,640 --> 01:15:49,550\n>> Hey, Don, I need to login.\n\n1571\n01:15:49,550 --> 01:15:51,330\nCan you send me a password real quick?\n\n1572\n01:15:51,330 --> 01:15:52,520\n>> Yeah [LAUGH].\n\n1573\n01:15:52,520 --> 01:15:55,220\nAnd it's sad, but that's kind\nof the thing that would happen.\n\n1574\n01:15:55,220 --> 01:15:59,330\nSo the solution is to do\nmultifactor authentication.\n\n1575\n01:15:59,330 --> 01:16:01,160\nAll right.\nUsually it's dual factor, right.\n\n1576\n01:16:01,160 --> 01:16:04,200\nSo you have two authentication pieces.\n\n1577\n01:16:04,200 --> 01:16:06,440\nOne piece is typically like a PIN number,\n\n1578\n01:16:06,440 --> 01:16:11,190\nsomething that you have memorized in\nyour head and then the second piece is\n\n1579\n01:16:12,330 --> 01:16:15,855\nsomething that's dynamically generated and\nconstantly changing.\n\n1580\n01:16:15,855 --> 01:16:19,420\nMulti-factor authentication is starting\nto become very, very commonplace.\n\n1581\n01:16:19,420 --> 01:16:24,620\nYou have like the Google authenticator and\nRSA SecurID and so on.\n\n1582\n01:16:24,620 --> 01:16:29,900\nAs of right now, Microsoft does not have\na multi-factor authentication solution.\n\n1583\n01:16:29,900 --> 01:16:34,290\nI would be shocked if they didn't have\none in development right now, right.\n\n1584\n01:16:34,290 --> 01:16:37,260\nJust because everybody else does and\nthey're actually working to create some\n\n1585\n01:16:37,260 --> 01:16:39,750\nstandard ones that share\nbetween the various companies.\n\n1586\n01:16:39,750 --> 01:16:42,220\nSo we might be seeing a trend in that too.\n\n1587\n01:16:42,220 --> 01:16:44,890\nIt's like Olaf II has a lot of support for\nthat.\n\n1588\n01:16:44,890 --> 01:16:48,840\nBut in the meantime, Microsoft just\nkind of left it to third parties and\n\n1589\n01:16:48,840 --> 01:16:51,890\nthe leader in that market is RSA.\n\n1590\n01:16:51,890 --> 01:16:54,360\nSo on the exam,\nif you see one-time passwords,\n\n1591\n01:16:54,360 --> 01:16:57,202\nit's almost gonna always\nrefer to RSA SecurID tokens.\n\n1592\n01:16:57,202 --> 01:16:59,446\nAnd if you're not familiar with those,\n\n1593\n01:16:59,446 --> 01:17:03,000\nlet me just bring up their\ntheir website real quick.\n\n1594\n01:17:03,000 --> 01:17:05,020\nIt's RSA SecureID tokens.\n\n1595\n01:17:05,020 --> 01:17:08,810\nYou know, I'll just pull up a picture so\nyou can see.\n\n1596\n01:17:08,810 --> 01:17:11,530\nHere you go.\nSo this is an RSA SecureID token.\n\n1597\n01:17:11,530 --> 01:17:13,445\nSome of you guys might have seen\nthis out in your workplace.\n\n1598\n01:17:13,445 --> 01:17:15,525\nFor some of you this may be\nthe first time you've seen it.\n\n1599\n01:17:15,525 --> 01:17:18,115\nBut basically,\nthey're little key chains, alright.\n\n1600\n01:17:18,115 --> 01:17:19,525\nYou keep it in your pocket or\n\n1601\n01:17:19,525 --> 01:17:22,815\non a necklace if you're into\nsporty tech fashion, I guess.\n\n1602\n01:17:22,815 --> 01:17:24,575\n>> They're pretty stylish.\n\n1603\n01:17:24,575 --> 01:17:27,275\n>> But basically just shows a code,\na 6-digit code, right?\n\n1604\n01:17:27,275 --> 01:17:31,120\nAnd see these little\nbars on the left side?\n\n1605\n01:17:31,120 --> 01:17:34,830\nIt's actually a timer and\nthey slowly tick down.\n\n1606\n01:17:34,830 --> 01:17:37,170\nAnd I believe it's every\n30 seconds on the new keys.\n\n1607\n01:17:37,170 --> 01:17:38,980\nThe old keys were every 60 seconds.\n\n1608\n01:17:38,980 --> 01:17:39,910\nBut every so\n\n1609\n01:17:39,910 --> 01:17:44,050\noften those bars will disappear and\nan all new number will be displayed.\n\n1610\n01:17:45,150 --> 01:17:48,380\nSo, let's just assume for a minute this\nis every 60 seconds, every 1 minute.\n\n1611\n01:17:48,380 --> 01:17:52,100\nThat means your password\nis changing once a minute.\n\n1612\n01:17:52,100 --> 01:17:55,330\nIn the span of an hour,\nyou'll have 60 different passwords, right?\n\n1613\n01:17:55,330 --> 01:17:56,060\nAnd you thought\n\n1614\n01:17:56,060 --> 01:17:58,560\nhaving to change your password every\n30 days was a pain in the butt.\n\n1615\n01:17:58,560 --> 01:18:02,430\nHere it's changing every single minute,\nall right?\n\n1616\n01:18:02,430 --> 01:18:05,870\nNot only that, not only is your\npassword changing every single minute,\n\n1617\n01:18:05,870 --> 01:18:09,150\nit's also only able to be used once.\n\n1618\n01:18:09,150 --> 01:18:13,170\nSo that means you can only log\nin once per minute, right?\n\n1619\n01:18:13,170 --> 01:18:16,200\nNow that might sound really bad,\nbut it really isn't.\n\n1620\n01:18:16,200 --> 01:18:17,740\nI mean,\nhow many times do you log in a day?\n\n1621\n01:18:17,740 --> 01:18:18,630\nA lot.\n\n1622\n01:18:18,630 --> 01:18:22,930\nBut within the span of one minute,\nthat's not normally an issue.\n\n1623\n01:18:22,930 --> 01:18:25,500\nAnd the newer tokens like I said\nare actually 30 seconds, so\n\n1624\n01:18:25,500 --> 01:18:27,110\nit's even a little bit shorter than that.\n\n1625\n01:18:27,110 --> 01:18:29,730\nBut when you go to log in,\nyou provide your user name,\n\n1626\n01:18:29,730 --> 01:18:33,060\nand then your password is dual factor.\n\n1627\n01:18:33,060 --> 01:18:36,660\nIt's two things, its a PIN number\nyou've memorized in your head, so\n\n1628\n01:18:36,660 --> 01:18:41,710\nmaybe it's like 1234, followed by whatever\ncode is on your keychain at that time.\n\n1629\n01:18:41,710 --> 01:18:43,993\n159759.\n\n1630\n01:18:43,993 --> 01:18:49,690\nWhen you punch that in, you authenticate\nand 159759 just got thrown in the trash.\n\n1631\n01:18:51,040 --> 01:18:53,560\nSo, if somebody ran a key\nlogger they got my PIN number,\n\n1632\n01:18:53,560 --> 01:18:54,900\nI don't know how they got that.\n\n1633\n01:18:54,900 --> 01:18:56,970\nBut this code's gone and\n\n1634\n01:18:56,970 --> 01:19:00,910\nif they were able to steal my key\nchain they don't have my pin number.\n\n1635\n01:19:00,910 --> 01:19:02,220\n>> They don't have your PIN, exactly.\n\n1636\n01:19:02,220 --> 01:19:05,830\n>> But if they were just looking over\nmy shoulder and got my pin number and\n\n1637\n01:19:05,830 --> 01:19:09,370\ngot a code, they would have to real\nquick use it in the next 30 seconds or\n\n1638\n01:19:09,370 --> 01:19:13,010\nthe next 1 minute because that code\nexpires and then they need another one.\n\n1639\n01:19:13,010 --> 01:19:16,200\nSo this gives us a very,\nvery secure connection, and for\n\n1640\n01:19:16,200 --> 01:19:19,940\npeople that are working remotely,\nthat is really handy.\n\n1641\n01:19:19,940 --> 01:19:21,600\n>> Yes.\n>> Because you don't know who's watching\n\n1642\n01:19:21,600 --> 01:19:24,895\nover their shoulders, you don't know\nwhat computer they're using or whatever.\n\n1643\n01:19:24,895 --> 01:19:27,710\nSo, trying to ensure that people\ncannot capture that data and\n\n1644\n01:19:27,710 --> 01:19:28,805\nuse it is real important.\n\n1645\n01:19:28,805 --> 01:19:34,130\nWell, direct access and\nall the VPN technologies we talked about,\n\n1646\n01:19:34,130 --> 01:19:38,950\nIPsec, PPTP, L2TP and so on,\nthey all support doing authentication\n\n1647\n01:19:38,950 --> 01:19:42,480\nthrough a network policy server,\nwhich is a RADIUS server.\n\n1648\n01:19:42,480 --> 01:19:46,880\nAnd SecurID tokens like\nthese use a RADIUS server.\n\n1649\n01:19:46,880 --> 01:19:51,152\nAnd so we can set ourselves to\nauthenticate against the RADIUS server and\n\n1650\n01:19:51,152 --> 01:19:53,543\nthat will enable one-time passwords.\n\n1651\n01:19:53,543 --> 01:19:56,570\nAnd because RADIUS is a standard,\nyou can use anybody's solution.\n\n1652\n01:19:56,570 --> 01:19:58,520\nMaybe it's RSA, right?\n\n1653\n01:19:58,520 --> 01:20:00,511\nMaybe it is YubiKey.\n\n1654\n01:20:00,511 --> 01:20:01,731\nYubiKey is another one.\n\n1655\n01:20:01,731 --> 01:20:03,580\n>> I like YubiKey stuff.\n\n1656\n01:20:03,580 --> 01:20:05,350\n>> So, YubiKey is very similar.\n\n1657\n01:20:05,350 --> 01:20:06,472\nIt doesn't display a code.\n\n1658\n01:20:06,472 --> 01:20:08,840\nIt's actually a USB thing you pop in, and\n\n1659\n01:20:08,840 --> 01:20:13,110\nwhen you tap its button,\nit is like a keyboard, it types the code.\n\n1660\n01:20:13,110 --> 01:20:14,620\nSo, it's a lot less expensive.\n\n1661\n01:20:14,620 --> 01:20:18,415\nThose RSA tokens,\nthey're usually 75 to 100 bucks a token.\n\n1662\n01:20:18,415 --> 01:20:22,790\nYubiKeys are like 25 bucks a token because\nthere's no screen on them and you just tap\n\n1663\n01:20:22,790 --> 01:20:27,120\nthe button and it types out what you\nwould have seen on the screen for you.\n\n1664\n01:20:27,120 --> 01:20:31,170\nBut they have a radius server that they\nhave available that you can tap into, or\n\n1665\n01:20:31,170 --> 01:20:33,400\nyou can use Microsoft,\nsome front end on it.\n\n1666\n01:20:33,400 --> 01:20:36,240\nYou know, either way on that one.\n\n1667\n01:20:36,240 --> 01:20:39,010\nGoogle hasn't really\nopened their's up yet.\n\n1668\n01:20:39,010 --> 01:20:40,690\nThe Google authenticator.\n\n1669\n01:20:40,690 --> 01:20:42,780\nThey have plans for it.\n\n1670\n01:20:42,780 --> 01:20:47,470\nBut the Google authenticator, it's a\nlittle App that runs on your cellphone and\n\n1671\n01:20:48,700 --> 01:20:51,570\nlet's see if I can make\nit a little bigger.\n\n1672\n01:20:51,570 --> 01:20:53,080\nAnd it's just displaying the codes.\n\n1673\n01:20:53,080 --> 01:20:57,420\nRight, so just like what you see in RSA or\nwhatever, but\n\n1674\n01:20:57,420 --> 01:20:59,330\ninstead of having key chain\nyour using your phone.\n\n1675\n01:20:59,330 --> 01:21:02,050\nRight, which almost everybody\nhas a smart phone these days so\n\n1676\n01:21:02,050 --> 01:21:03,150\nyou've got that available.\n\n1677\n01:21:03,150 --> 01:21:06,100\nSo, there's a number of companies\nproviding this service.\n\n1678\n01:21:06,100 --> 01:21:10,840\nIf you combine this with a VPN you'll\neliminate that risk of somebody,\n\n1679\n01:21:10,840 --> 01:21:14,200\nsome malicious user,\ngetting a hold of credentials and\n\n1680\n01:21:14,200 --> 01:21:16,080\nVPNing in from unsupported machines.\n\n1681\n01:21:16,080 --> 01:21:16,720\nRight?\n\n1682\n01:21:16,720 --> 01:21:20,260\nYou could protect from that with NAP,\nNetwork Access Protection also, but\n\n1683\n01:21:20,260 --> 01:21:23,630\nif you combine these,\nthen you've got a really secure network.\n\n1684\n01:21:23,630 --> 01:21:25,710\nSo, one time password, very powerful,\n\n1685\n01:21:25,710 --> 01:21:29,420\nvery useful, but\nthey do require a third party system.\n\n1686\n01:21:29,420 --> 01:21:31,740\nAnd like I said, secure ID tokens,\n\n1687\n01:21:31,740 --> 01:21:35,400\nthose really are the market\nleader in this stuff.\n\n1688\n01:21:35,400 --> 01:21:36,360\nSo, you see them very commonly.\n\n1689\n01:21:36,360 --> 01:21:37,460\n>> You do.\nYou see them all over the place.\n\n1690\n01:21:37,460 --> 01:21:39,090\nI see them every time I\ngo into the pharmacy.\n\n1691\n01:21:39,090 --> 01:21:43,630\nAnyplace where that person might walk\naway from that machine for a second,\n\n1692\n01:21:43,630 --> 01:21:49,370\nthey are going to log off obviously, but\nif I knew or if I had got their password,\n\n1693\n01:21:49,370 --> 01:21:52,980\nI'm not going to be able to get in because\nthey took their RSA token with them.\n\n1694\n01:21:52,980 --> 01:21:54,670\nSo, I don't have that\ncode that's generating.\n\n1695\n01:21:54,670 --> 01:21:58,660\n>> Yep, yeah now, one of\nthe questions that I usually get is,\n\n1696\n01:21:58,660 --> 01:22:01,270\nwell what if somebody steals my token and\nthey have my pin number?\n\n1697\n01:22:01,270 --> 01:22:03,030\nWell first off,\nyou're a bad employee, right?\n\n1698\n01:22:03,030 --> 01:22:04,022\n>> You're going to get fired.\n\n1699\n01:22:04,022 --> 01:22:06,124\n[LAUGH]\n>> So there's that, secondly,\n\n1700\n01:22:06,124 --> 01:22:09,329\nif you want to get around that,\nthere are further ways to secure it.\n\n1701\n01:22:09,329 --> 01:22:13,540\nSo, if you have where they are running\na software client on their cellphone\n\n1702\n01:22:13,540 --> 01:22:15,220\n>> Your cell phone should be PIN locked.\n\n1703\n01:22:15,220 --> 01:22:15,740\nRight?\n\n1704\n01:22:15,740 --> 01:22:18,910\nSo, if somebody steals your phone, they\nshouldn't be able to unlock the phone to\n\n1705\n01:22:18,910 --> 01:22:21,330\neven get to the number\ngenerating application.\n\n1706\n01:22:21,330 --> 01:22:23,190\nIf you're using physical tokens,\n\n1707\n01:22:23,190 --> 01:22:26,685\nlet me go back to my screen here,\nyou'll see they make different types.\n\n1708\n01:22:26,685 --> 01:22:30,255\nAnd there's some like this that\nactually allow you to have a PIN number\n\n1709\n01:22:30,255 --> 01:22:32,295\njust to turn on the screen.\n\n1710\n01:22:32,295 --> 01:22:35,215\nSo, you have one PIN number\nto turn on the screen, and\n\n1711\n01:22:35,215 --> 01:22:37,505\nanother PIN number that's\npart of your password.\n\n1712\n01:22:37,505 --> 01:22:40,345\nSo, it's an extra layer of\nsecurity that you can add.\n\n1713\n01:22:40,345 --> 01:22:42,625\nIt's a little bit of overkill for\nmost organizations,\n\n1714\n01:22:42,625 --> 01:22:44,965\nbut that type of\nfunctionality is out there.\n\n1715\n01:22:44,965 --> 01:22:47,920\nSo, you just need to figure\nout which ones work for you.\n\n1716\n01:22:49,380 --> 01:22:50,600\nAnd there's even another one.\n\n1717\n01:22:50,600 --> 01:22:54,480\nUVkey, they have one that NFC,\nthe Near Field Communications.\n\n1718\n01:22:54,480 --> 01:22:58,320\nSo, you just tap to your system and\nit authenticates using the code.\n\n1719\n01:22:58,320 --> 01:23:00,120\nSo, there's no code for\nsomebody to look at.\n\n1720\n01:23:00,120 --> 01:23:03,530\nThey'd have to steal the token but\nthey'd still have to know that PIN number.\n\n1721\n01:23:03,530 --> 01:23:05,540\nThat's the whole benefit of\ndual factor authentication.\n\n1722\n01:23:05,540 --> 01:23:06,040\n>> Nice.\nNice.\n\n1723\n01:23:08,110 --> 01:23:08,700\n>> All right.\n\n1724\n01:23:08,700 --> 01:23:09,880\nMike, what else do we have?\n\n1725\n01:23:09,880 --> 01:23:11,310\nIs that about it?\n\n1726\n01:23:11,310 --> 01:23:12,440\n>> We've pretty much covered it.\n\n1727\n01:23:12,440 --> 01:23:15,540\nThe last thing that we've already talked\nabout the certificates issued and\n\n1728\n01:23:15,540 --> 01:23:18,420\nwe've hit that in several-\n>> Okay.\n\n1729\n01:23:18,420 --> 01:23:23,130\nSo, you know, keep in mind that we talk\nabout a lot different solutions and\n\n1730\n01:23:23,130 --> 01:23:26,780\nwe talk about different scenarios\nwhere some of those solutions work.\n\n1731\n01:23:26,780 --> 01:23:28,080\nOn the exam,\nthat's going to be your challenge.\n\n1732\n01:23:28,080 --> 01:23:29,790\nThey're going to give you scenarios and\n\n1733\n01:23:29,790 --> 01:23:32,300\nyou need to pick the solutions\nthat meet that need.\n\n1734\n01:23:32,300 --> 01:23:34,180\nSo, you should be familiar with all these.\n\n1735\n01:23:34,180 --> 01:23:37,530\nGetting hands on experience with them\nis a great way to gain that intimate\n\n1736\n01:23:37,530 --> 01:23:40,150\nknowledge and\nthat's what we cover in the other shows.\n\n1737\n01:23:40,150 --> 01:23:43,460\nBut just having a cursory\nunderstanding of each, and which\n\n1738\n01:23:43,460 --> 01:23:47,460\none works in which scenario, is gonna\nbe key to being successful on the exam.\n\n1739\n01:23:47,460 --> 01:23:48,730\n>> Exactly.\n\n1740\n01:23:48,730 --> 01:23:52,032\n>> All right, well this is a good spot for\nus to wrap this episode up.\n\n1741\n01:23:52,032 --> 01:23:55,320\nWe'll stop here and just keep in mind,\nif you have any questions,\n\n1742\n01:23:55,320 --> 01:23:58,050\nyou're always welcome to\nask live during the show.\n\n1743\n01:23:58,050 --> 01:24:02,660\nYou can go to itpro.tv/live and you'll\nsee the chat box right beneath the video.\n\n1744\n01:24:02,660 --> 01:24:05,600\nPost your questions there,\nwe monitor and answer during the show.\n\n1745\n01:24:05,600 --> 01:24:09,070\nIf you have questions after the show,\nuse our Q&A forums.\n\n1746\n01:24:09,070 --> 01:24:13,860\nYou'll see a link at the top of every page\non the itpro.tv website that says Q&A.\n\n1747\n01:24:13,860 --> 01:24:14,715\nClick on that link.\n\n1748\n01:24:14,715 --> 01:24:16,680\nYou'll jump right in there,\ninto our forums.\n\n1749\n01:24:16,680 --> 01:24:18,850\nAnd you can post your questions,\nand we monitor and\n\n1750\n01:24:18,850 --> 01:24:23,330\nanswer after the show to make sure you get\nthe information you need to be successful.\n\n1751\n01:24:25,020 --> 01:24:29,528\nActually, Oh, I actually got a question\nin the chat room there, real quick.\n\n1752\n01:24:29,528 --> 01:24:30,730\nStatement/ question.\n\n1753\n01:24:30,730 --> 01:24:32,960\nCan we protect our VPN with two step and\n\n1754\n01:24:32,960 --> 01:24:35,360\nthe radius client detecting\nthe device as well?\n\n1755\n01:24:35,360 --> 01:24:39,500\nYou can, what I would do,if you\nwanted to verify the device right?\n\n1756\n01:24:39,500 --> 01:24:42,912\nSo, if I have Mike's laptop set up to VPN,\nand he set it for\n\n1757\n01:24:42,912 --> 01:24:44,970\na one time password right?\n\n1758\n01:24:44,970 --> 01:24:48,310\nBut then I don't want Mike to\ngo to his home computer and\n\n1759\n01:24:48,310 --> 01:24:50,120\ninstall the VPN client there and VPN in.\n\n1760\n01:24:50,120 --> 01:24:51,910\nRight?\nI want to make sure he's only able to VPN\n\n1761\n01:24:51,910 --> 01:24:53,800\nin from his laptop.\n\n1762\n01:24:53,800 --> 01:24:55,580\nYou can use Radius to do it.\n\n1763\n01:24:55,580 --> 01:24:57,500\nBut it's actually kinda\neasy to spoof that.\n\n1764\n01:24:57,500 --> 01:24:58,530\n>> Right.\n>> So,\n\n1765\n01:24:58,530 --> 01:25:02,680\na better thing to do would be to\nuse Network Access Protection, NAP.\n\n1766\n01:25:02,680 --> 01:25:08,410\nAnd with NAP, when he connects, Radius\nwill be verifying his one time password.\n\n1767\n01:25:08,410 --> 01:25:13,590\nAnd then after that all passes,\nthen radius can check in with NAP and\n\n1768\n01:25:13,590 --> 01:25:16,970\nit can look to validate whether he's\ngot a certificate on his laptop.\n\n1769\n01:25:16,970 --> 01:25:20,010\nIf he's got the workplace certificate\nthen he's allowed to connect.\n\n1770\n01:25:20,010 --> 01:25:23,230\nIf he doesn't, like if he's on his home\ncomputer then he's not able to connect.\n\n1771\n01:25:23,230 --> 01:25:24,970\nSo, I would combine that.\n\n1772\n01:25:24,970 --> 01:25:30,150\nRadius does have a client ID check that\nit does, but it's super easy to spoof it.\n\n1773\n01:25:30,150 --> 01:25:30,890\nIt really is.\n\n1774\n01:25:30,890 --> 01:25:34,260\nAnd your average end user can't do it,\nI suppose, so you get that.\n\n1775\n01:25:34,260 --> 01:25:38,056\nBut any middle schooler with a few\nminutes of Google time under their belt.\n\n1776\n01:25:38,056 --> 01:25:39,020\n>> [LAUGH] Exactly.\n>> Can figure that out.\n\n1777\n01:25:39,020 --> 01:25:41,190\n>> There's a YouTube video out there for\nit I'm sure.\n\n1778\n01:25:41,190 --> 01:25:44,850\n>> Yeah, you have to remember that\nRadius is a very old protocol, and\n\n1779\n01:25:44,850 --> 01:25:47,540\nit was developed in\nthe 80s during dial up.\n\n1780\n01:25:47,540 --> 01:25:49,640\nThe world was a friendlier\nplace back then.\n\n1781\n01:25:49,640 --> 01:25:52,180\nSo, you never want to\nrely on Radius by itself.\n\n1782\n01:25:52,180 --> 01:25:55,300\nIt's always Radius combined with\nsomething else that gives you security.\n\n1783\n01:25:57,490 --> 01:25:59,980\nAll right, well, ladies and gentlemen,\nI hope you guys enjoyed the show.\n\n1784\n01:25:59,980 --> 01:26:02,110\nKeep in mind,\nif you have questions make sure you ask.\n\n1785\n01:26:02,110 --> 01:26:04,270\nThat's the way you get\nthe information you need.\n\n1786\n01:26:04,270 --> 01:26:06,280\nAll right, we'll wrap it up here.\n\n1787\n01:26:06,280 --> 01:26:08,860\nSigning off for ITPRO TV, I'm Don Pezet.\n\n1788\n01:26:08,860 --> 01:26:09,790\n>> And I'm Mike Rodrick.\n\n1789\n01:26:09,790 --> 01:26:11,678\n>> And we will see you next time.\n\n1790\n01:26:11,678 --> 01:26:15,799\n[MUSIC]\n\n",
          "vimeoId": "107698423"
        },
        {
          "description": "",
          "length": "3434",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/007-Planning-Network-Access-Pt2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/007-Planning-Network-Access-Pt2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/007-Planning-Network-Access-Pt2-sm.jpg",
          "title": "Planning Network Access Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,725 --> 00:00:36,521\nAll right, good morning,\ngood afternoon and good evening.\n\n3\n00:00:36,521 --> 00:00:38,900\nWelcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,900 --> 00:00:42,060\nI'm your host,\nDon Pezet back again with Mr Johnny Cash.\n\n5\n00:00:42,060 --> 00:00:42,720\nHow's it going?\n\n6\n00:00:42,720 --> 00:00:44,040\n>> Fantastic.\nHow are you doing today Don?\n\n7\n00:00:44,040 --> 00:00:45,060\n>> I thought you were dead.\n\n8\n00:00:45,060 --> 00:00:46,589\nIt was on the news, no more new albums.\n\n9\n00:00:46,589 --> 00:00:47,326\n>> I'm back, I'm back.\n\n10\n00:00:47,326 --> 00:00:48,951\n>> [LAUGH]\n>> [LAUGH]\n\n11\n00:00:48,951 --> 00:00:50,152\n>> All right.\n\n12\n00:00:50,152 --> 00:00:54,621\nWell Mike, we got a neat show\ntoday because we're gonna\n\n13\n00:00:54,621 --> 00:00:58,340\ntackle one of the more\ncomplex technologies.\n\n14\n00:00:58,340 --> 00:01:00,641\nBut it's one that people\nare really excited to deploy, and\n\n15\n00:01:00,641 --> 00:01:02,125\nthat's network access protection.\n\n16\n00:01:02,125 --> 00:01:06,286\n>> Right, it's one of those things in some\nof our other episodes we talked about\n\n17\n00:01:06,286 --> 00:01:10,640\nthe popularity of increasing the number\nof users that are outside our network and\n\n18\n00:01:10,640 --> 00:01:11,760\nthings like that.\n\n19\n00:01:11,760 --> 00:01:13,660\nAnd you know these strange\ncomputers connecting.\n\n20\n00:01:13,660 --> 00:01:17,220\nAnd we need some way to make sure that we\ncan protect our network and keep it safe.\n\n21\n00:01:18,590 --> 00:01:21,720\n>> The first time that I was exposed\nto a technology like this was actually\n\n22\n00:01:21,720 --> 00:01:22,260\nwith Cisco.\n\n23\n00:01:22,260 --> 00:01:25,720\nCisco's a product called Cisco NAC,\nNetwork Access Control.\n\n24\n00:01:25,720 --> 00:01:28,212\nIt's effectively the same thing as NAP,\njust their version.\n\n25\n00:01:28,212 --> 00:01:31,667\nIncredibly expensive.\n\n26\n00:01:31,667 --> 00:01:34,490\nSo large businesses,\nenterprises, they can afford it.\n\n27\n00:01:34,490 --> 00:01:36,970\nSmall, medium businesses,\njust not even on their radar.\n\n28\n00:01:36,970 --> 00:01:40,076\nThe NAC controller started at like\n$50,000 and it just went up from there.\n\n29\n00:01:40,076 --> 00:01:40,772\n>> Wow.\n\n30\n00:01:40,772 --> 00:01:42,420\n>> It was just outrageously expensive.\n\n31\n00:01:42,420 --> 00:01:45,090\nSo Microsoft stepped in\nwith their solution,\n\n32\n00:01:45,090 --> 00:01:46,650\nNetwork Access Protection, or NAP.\n\n33\n00:01:46,650 --> 00:01:52,540\nDoes the same thing, very very effective,\nand built into the server.\n\n34\n00:01:52,540 --> 00:01:56,030\nSo it's not like you have crazy\nextra licensing fees or whatever.\n\n35\n00:01:56,030 --> 00:02:01,090\nSo what it does is it creates\nexcitement for medium-sized companies,\n\n36\n00:02:01,090 --> 00:02:04,740\nschool boards, organizations that don't\nhave a ton of money laying around.\n\n37\n00:02:04,740 --> 00:02:07,150\nBut want to maintain\na certain level of security.\n\n38\n00:02:07,150 --> 00:02:11,170\nBecause we have tons of people traveling\nwith laptops, getting infected or\n\n39\n00:02:11,170 --> 00:02:14,685\nwhatever, while out and\nabout at Starbucks or something.\n\n40\n00:02:14,685 --> 00:02:16,210\n>> [LAUGH]\n>> And then bringing that junk\n\n41\n00:02:16,210 --> 00:02:17,050\nback into your network.\n\n42\n00:02:17,050 --> 00:02:18,850\nYou need to be able to control that.\n\n43\n00:02:18,850 --> 00:02:23,160\n>> Absolutely and that gives us a way\nto do that and protect our network.\n\n44\n00:02:23,160 --> 00:02:23,810\nAnd like you said,\n\n45\n00:02:23,810 --> 00:02:26,640\na lot of times we look at our machines\nthat are inside our network and\n\n46\n00:02:26,640 --> 00:02:29,450\nwe can control them pretty much using\nour policies and things like that.\n\n47\n00:02:29,450 --> 00:02:33,840\nBut as say, when they travel and\nthey connect to these strange networks,\n\n48\n00:02:33,840 --> 00:02:35,200\nwho know what they're bringing back.\n\n49\n00:02:35,200 --> 00:02:38,580\nOr those home users that we're allowing\ntheir computers to VPN into our network.\n\n50\n00:02:38,580 --> 00:02:40,460\nI don't go out to their house and\ninspect their machine.\n\n51\n00:02:40,460 --> 00:02:44,880\nI dunno if they're running firewalls or\nantivirus software or anything like that.\n\n52\n00:02:44,880 --> 00:02:45,800\nSo very important.\n\n53\n00:02:45,800 --> 00:02:47,840\n>> Yeah, or\nthey let their kids use their laptop.\n\n54\n00:02:47,840 --> 00:02:49,790\nThat's a really popular one.\n\n55\n00:02:49,790 --> 00:02:51,190\nHere let me just,\nI'll type in the password.\n\n56\n00:02:51,190 --> 00:02:54,000\nHere you go, browse the internet,\ndo your homework, little Johnny.\n\n57\n00:02:54,000 --> 00:02:56,320\nAnd they're playing Minecraft for\nfive hours.\n\n58\n00:02:56,320 --> 00:02:59,130\n>> Let's click on every pop-up we see and\nsee what happens.\n\n59\n00:02:59,130 --> 00:03:00,270\n>> Yeah, you said yes.\n\n60\n00:03:00,270 --> 00:03:01,690\nThat's what the OK button's for.\n\n61\n00:03:01,690 --> 00:03:06,438\nI'm OK.\n[LAUGH] All right, so network access,\n\n62\n00:03:06,438 --> 00:03:09,790\nwe covered it in the 4 11.\n\n63\n00:03:09,790 --> 00:03:11,750\n>> I guess 4 11.\n\n64\n00:03:11,750 --> 00:03:12,620\n>> 4 11 show.\n\n65\n00:03:12,620 --> 00:03:15,190\nAnd we showed kinda how to implement it.\n\n66\n00:03:15,190 --> 00:03:17,920\nBut, you don't wanna just go and\nchuck some service out there and\n\n67\n00:03:17,920 --> 00:03:18,820\nbe done with it.\n\n68\n00:03:18,820 --> 00:03:21,580\nOne of the problems with the way that we\nimplemented it in the show was it was in\n\n69\n00:03:21,580 --> 00:03:22,820\na lab environment.\n\n70\n00:03:22,820 --> 00:03:25,480\nAnd so we only needed one of each server.\n\n71\n00:03:25,480 --> 00:03:30,000\nAnd it was a flat, single network, and you\nknow, not a whole lot of complexity there.\n\n72\n00:03:30,000 --> 00:03:35,040\nBut as your network grows to\nenterprise scale, your needs change.\n\n73\n00:03:35,040 --> 00:03:35,560\nAll right?\n\n74\n00:03:35,560 --> 00:03:38,390\nSo if you're a small or medium business\nand you're looking at deploying NAP,\n\n75\n00:03:38,390 --> 00:03:41,760\nwell the way we do it on the show,\nyou know, back in 411 that's fine.\n\n76\n00:03:41,760 --> 00:03:43,290\nIt's got all the components, it works.\n\n77\n00:03:43,290 --> 00:03:45,950\nIt's probably a little overkill for\na small or medium business, but\n\n78\n00:03:45,950 --> 00:03:47,800\nyou could certainly do it, right?\n\n79\n00:03:47,800 --> 00:03:49,480\nBut if you're an enterprise,\n\n80\n00:03:49,480 --> 00:03:54,440\nyou're gonna quickly find out that, all\nof a sudden it's taking longer to log in.\n\n81\n00:03:54,440 --> 00:03:58,630\nThat your DHCP requests aren't being\nanswered in a timely manner and\n\n82\n00:03:58,630 --> 00:04:00,620\nyou're ending up with APIPA addresses.\n\n83\n00:04:00,620 --> 00:04:03,542\nYou'll find things like that,\nthat are somewhat intermittent.\n\n84\n00:04:03,542 --> 00:04:06,830\nSometimes it happens, sometimes not, it's\njust super frustrating to troubleshoot.\n\n85\n00:04:06,830 --> 00:04:11,100\nAnd what's going on is your\ninfrastructure is just getting overloaded.\n\n86\n00:04:11,100 --> 00:04:13,570\nAnd so, we've got to pay\nattention to all of the different\n\n87\n00:04:13,570 --> 00:04:14,500\ncomponents that we've got.\n\n88\n00:04:14,500 --> 00:04:15,250\nThe different pieces.\n\n89\n00:04:15,250 --> 00:04:17,750\nWe've got to design our NAP strategy.\n\n90\n00:04:17,750 --> 00:04:22,220\nAnd then once we've the design, we then\nneed to revisit it and look at capacity.\n\n91\n00:04:22,220 --> 00:04:25,210\nAnd figure out, whether we need to\nincrease the amount of servers that we've\n\n92\n00:04:25,210 --> 00:04:27,450\ngot to handle the load\nof our organization.\n\n93\n00:04:27,450 --> 00:04:30,520\nSo, those are things we are gonna\ntalk about in this episode.\n\n94\n00:04:31,922 --> 00:04:34,530\nAll right, we'll let's just\nstart with straight up design.\n\n95\n00:04:34,530 --> 00:04:37,690\n>> Right?\n>> Okay, at a very high level\n\n96\n00:04:37,690 --> 00:04:39,750\nNAP is pretty straightforward.\n\n97\n00:04:39,750 --> 00:04:43,640\nA client connects to your network,\nand that client might be a PC,\n\n98\n00:04:43,640 --> 00:04:45,660\na laptop, a whatever.\n\n99\n00:04:45,660 --> 00:04:47,270\nIt connects to your network and\n\n100\n00:04:47,270 --> 00:04:51,800\nit checks in with a server that's\nhandling our NAP processes.\n\n101\n00:04:51,800 --> 00:04:56,240\nAnd that NAP server will evaluate\nthe client to determine whether or\n\n102\n00:04:56,240 --> 00:04:57,970\nnot it should be allowed in the network.\n\n103\n00:04:57,970 --> 00:05:00,010\nIf it is, it allows it on the network.\n\n104\n00:05:00,010 --> 00:05:02,690\nIf it isn't,\nit blocks it from being on the network.\n\n105\n00:05:02,690 --> 00:05:03,950\n>> Exactly.\n\n106\n00:05:03,950 --> 00:05:06,495\n>> But while it's as simple as that.\n\n107\n00:05:06,495 --> 00:05:08,005\nThe way I just put it right\nthere is pretty simple.\n\n108\n00:05:08,005 --> 00:05:10,262\n>> [INAUDIBLE] [LAUGH]\n>> I know,\n\n109\n00:05:10,262 --> 00:05:12,087\nthere's actually a lot of\nmoving pieces involved.\n\n110\n00:05:12,087 --> 00:05:14,365\n>> There are several different\nways we could choose.\n\n111\n00:05:14,365 --> 00:05:16,645\nWhen do you want to check that health?\n\n112\n00:05:16,645 --> 00:05:20,155\nWe can check it either one or\nmore different places.\n\n113\n00:05:20,155 --> 00:05:22,675\nAnd each one of those\nsolutions is going to require\n\n114\n00:05:22,675 --> 00:05:26,105\nslightly different configurations or maybe\na different server or something like that.\n\n115\n00:05:26,105 --> 00:05:28,730\nSo when we're planning it out,\nwe've got to sit and think, okay,\n\n116\n00:05:28,730 --> 00:05:31,340\nwhen do I want to run these guys\nthrough the that health check?\n\n117\n00:05:31,340 --> 00:05:33,990\nDo I want to do it when they\nget an IP address from DHCP?\n\n118\n00:05:33,990 --> 00:05:38,080\nDo I want to do it when they make an IPsec\nconnection or a VPN connection or\n\n119\n00:05:38,080 --> 00:05:39,150\na direct access connection?\n\n120\n00:05:40,280 --> 00:05:42,650\n>> And so, you know,\nlike Mike was just saying, right?\n\n121\n00:05:42,650 --> 00:05:44,650\nThere are these different methods for\nconnecting.\n\n122\n00:05:44,650 --> 00:05:45,900\nIf we look at Microsoft's website.\n\n123\n00:05:45,900 --> 00:05:47,460\nI've got this page pulled up here.\n\n124\n00:05:47,460 --> 00:05:50,910\nIt's called\nEvaluating NAP Design Examples.\n\n125\n00:05:50,910 --> 00:05:56,030\nAnd this page, it was updated in\nFebruary of 2012, so it's not that old,\n\n126\n00:05:56,030 --> 00:05:58,360\nbut even it's a little bit out of date,\nit's missing one thing.\n\n127\n00:05:58,360 --> 00:06:02,140\nBut when you look at evaluating NAP\ndesign examples and look down here,\n\n128\n00:06:02,140 --> 00:06:04,096\nit's got five different examples.\n\n129\n00:06:04,096 --> 00:06:05,373\nI love this last one.\n\n130\n00:06:05,373 --> 00:06:07,630\nNo enforcement.\n\n131\n00:06:07,630 --> 00:06:10,045\nSo it's not really an example there, but\n\n132\n00:06:10,045 --> 00:06:14,670\nyou'll see where we've got IPsec\nenforcement, 802.1X, VPN and DHCP.\n\n133\n00:06:14,670 --> 00:06:18,740\nWe're missing one which is that\nDirect Access Enforcement.\n\n134\n00:06:18,740 --> 00:06:22,590\nThat's a newer one that's been added\nthat you very well may see on the exam.\n\n135\n00:06:22,590 --> 00:06:26,380\nI didn't see it on mine,\nbut it could pop up.\n\n136\n00:06:26,380 --> 00:06:28,840\nSo there is a fifth one you'll see\nsometimes, it's no enforcement,\n\n137\n00:06:28,840 --> 00:06:30,220\nit really just doesn't count.\n\n138\n00:06:30,220 --> 00:06:33,120\n>> That one really,\nif you're not wanting to,\n\n139\n00:06:33,120 --> 00:06:36,840\nlet's say you just want to use\nthe remediation part of that, right?\n\n140\n00:06:36,840 --> 00:06:38,250\nSo especially internally,\n\n141\n00:06:38,250 --> 00:06:41,640\nwhere I know my computers stay within a\ntrusted environment and things like that.\n\n142\n00:06:41,640 --> 00:06:43,190\nBut I just don't want them\nturning their firewall off.\n\n143\n00:06:43,190 --> 00:06:45,210\nThey've got the bright idea\nthat if I turn my firewall off,\n\n144\n00:06:45,210 --> 00:06:46,810\nmy computer is going to go faster.\n\n145\n00:06:46,810 --> 00:06:49,440\nWell I am not going to enforce it, I'm not\ngoing to say that if they turned their\n\n146\n00:06:49,440 --> 00:06:51,900\nfirewall off I am going to\nkill their network access.\n\n147\n00:06:51,900 --> 00:06:53,920\nI am still going to give\nthem network access.\n\n148\n00:06:53,920 --> 00:06:55,190\nBut I do want to fix it for them.\n\n149\n00:06:55,190 --> 00:07:00,840\nSo I can keep that remediation part in\nwithout dropping them off of the network.\n\n150\n00:07:00,840 --> 00:07:02,310\n>> Or you can not even do that,\n\n151\n00:07:02,310 --> 00:07:04,890\nyou can just let them do it and\nit serves as a reporting piece.\n\n152\n00:07:04,890 --> 00:07:07,330\nSo you can say, all right, I can see that\nthese people have their firewall off.\n\n153\n00:07:07,330 --> 00:07:08,830\nDifferent pieces there.\n\n154\n00:07:08,830 --> 00:07:12,430\nBut, normally, what we're going to do\nis we're going to pick one of these and\n\n155\n00:07:12,430 --> 00:07:13,470\nthat's what we're going to deploy.\n\n156\n00:07:13,470 --> 00:07:15,280\nAnd these design guides are great for\nthat.\n\n157\n00:07:15,280 --> 00:07:16,710\nBut in real life land,\n\n158\n00:07:16,710 --> 00:07:20,400\nit usually goes a little bit beyond that\nbecause you don't normally just pick one.\n\n159\n00:07:20,400 --> 00:07:22,730\nYou pick more than one or\nmaybe even all of them.\n\n160\n00:07:22,730 --> 00:07:27,770\nBecause each of these represents\na different entry point into your system.\n\n161\n00:07:27,770 --> 00:07:30,760\nSo let's just start with a summary\nof what those entry points are.\n\n162\n00:07:30,760 --> 00:07:32,630\nThe first one is IPsec.\n\n163\n00:07:32,630 --> 00:07:37,250\nSo if you have an IPsec policy for\nclients to connect to your network.\n\n164\n00:07:37,250 --> 00:07:39,490\nAnd this is normally client IPsec, but\n\n165\n00:07:39,490 --> 00:07:42,260\nit could be a site-to-site\nVPN tunnel using IPsec also.\n\n166\n00:07:42,260 --> 00:07:44,680\n>> Can be internal like with you\nconnecting to a file server,\n\n167\n00:07:44,680 --> 00:07:46,160\nthat's got an IPsec policy on it.\n\n168\n00:07:47,330 --> 00:07:52,545\n>> And so anytime we build up one of those\nIPsec connections we run through NAP.\n\n169\n00:07:52,545 --> 00:07:55,079\nAnd verify whether we're allowed to\nconnect and whether we're up to snuff.\n\n170\n00:07:55,079 --> 00:07:59,040\nWhether we meet the levels of the security\nrequirements that we have in our place.\n\n171\n00:07:59,040 --> 00:08:02,067\nOur security statement of\nhealth is what determines that.\n\n172\n00:08:02,067 --> 00:08:05,671\nNow, IPsec is great But for\nthe most part it's like Mike says,\n\n173\n00:08:05,671 --> 00:08:08,122\nit's really just your internal clients.\n\n174\n00:08:08,122 --> 00:08:11,120\nYour external clients aren't\ncoming in using IPsec, right?\n\n175\n00:08:11,120 --> 00:08:13,250\nThey're coming in using other protocols.\n\n176\n00:08:13,250 --> 00:08:15,660\nSo if we want to guarantee the health\n\n177\n00:08:15,660 --> 00:08:20,960\nof machines that are inside of our\norganization and we use IPsec,\n\n178\n00:08:20,960 --> 00:08:24,740\nthen that's a great way to catch those\npeople as they connect to your network.\n\n179\n00:08:24,740 --> 00:08:29,370\nBut what about machines inside of your\nenvironment that don't use IPsec.\n\n180\n00:08:29,370 --> 00:08:31,450\nWhat if you're not using IPsec?\n\n181\n00:08:31,450 --> 00:08:34,312\nWell, in that case,\nyou got two other options, all right?\n\n182\n00:08:34,312 --> 00:08:37,664\nThe next one is 802.1x enforcement.\n\n183\n00:08:37,664 --> 00:08:42,313\n802.1x is really, really powerful,\nbecause this takes effect when\n\n184\n00:08:42,313 --> 00:08:47,420\nsomebody plugs into a switch or connects\nto a wireless access point, right?\n\n185\n00:08:47,420 --> 00:08:49,280\nDoesn't matter if you're running IPsec.\n\n186\n00:08:49,280 --> 00:08:50,800\nDoesn't matter about any of that stuff.\n\n187\n00:08:50,800 --> 00:08:54,360\nJust the instant you plug into\nthe network if you plug into a switch or\n\n188\n00:08:54,360 --> 00:08:58,550\nconnect to a wireless access point\nan 802.1x enabled access point or\n\n189\n00:08:58,550 --> 00:09:00,910\nswitch will ask you for your certificate.\n\n190\n00:09:00,910 --> 00:09:04,980\nAnd you'll hand it off and then it\nwill run that against the NAPsystem\n\n191\n00:09:04,980 --> 00:09:06,970\nto determine whether you\nshould be connected or not.\n\n192\n00:09:06,970 --> 00:09:10,430\nSo the switches and\naccess points are acting on our behalf,\n\n193\n00:09:10,430 --> 00:09:11,900\nwhich is really cool.\n\n194\n00:09:11,900 --> 00:09:16,080\nAgain, for people internal,\npeople coming to your network.\n\n195\n00:09:17,220 --> 00:09:21,941\nSo those three, oh, wait,\nI forgot to talk about the third one.\n\n196\n00:09:21,941 --> 00:09:22,955\n[LAUGH] The third one is DHCP.\n\n197\n00:09:22,955 --> 00:09:23,830\nRight?\n\n198\n00:09:23,830 --> 00:09:27,510\nSo somebody comes into your network and\nmaybe you've got switches or\n\n199\n00:09:27,510 --> 00:09:29,140\naccess points that are not 802.1x capable,\n\n200\n00:09:29,140 --> 00:09:32,600\nmost of them are today, but\nmaybe you've got some that aren't.\n\n201\n00:09:32,600 --> 00:09:35,960\nWe can catch them when they\nrequest a DHCP address.\n\n202\n00:09:35,960 --> 00:09:39,030\nNow, requesting a DHCP\naddress is probably one of\n\n203\n00:09:39,030 --> 00:09:43,300\nthe easiest implementation models of\nthese, but it's the easiest to bypass.\n\n204\n00:09:43,300 --> 00:09:44,680\nHow do you bypass it, Mike?\n\n205\n00:09:44,680 --> 00:09:46,570\n>> You statically map your IP address,\nright?\n\n206\n00:09:46,570 --> 00:09:48,440\nThen I'm not talking to\nyour DHCP server and\n\n207\n00:09:48,440 --> 00:09:50,560\nI never have to go through the help check.\n\n208\n00:09:50,560 --> 00:09:52,280\n>> Yep.\nIt's as simple as that.\n\n209\n00:09:52,280 --> 00:09:56,340\nSo DHCP, while it's easy to implement,\nis really easy to bypass also.\n\n210\n00:09:56,340 --> 00:09:58,000\n>> That only works with IPV 4 as well,\n\n211\n00:09:58,000 --> 00:10:01,090\nbecause with IPV 6,\nyou can typically generate your own, so.\n\n212\n00:10:01,090 --> 00:10:05,040\n>> That's true,\nI never even really thought of that.\n\n213\n00:10:05,040 --> 00:10:07,000\nLearn something new every day.\n\n214\n00:10:07,000 --> 00:10:09,430\n[LAUGH] So DHCP enforcement,\nwhile you can do it and\n\n215\n00:10:09,430 --> 00:10:13,480\nit's not very hard, it's also not very\npractical, as far as being effective.\n\n216\n00:10:13,480 --> 00:10:17,250\nVersus 802.1X.\nIf somebody's got a static IP, dynamic IP,\n\n217\n00:10:17,250 --> 00:10:18,330\nno IP.\n\n218\n00:10:18,330 --> 00:10:19,450\nIt's when they plug in.\n\n219\n00:10:19,450 --> 00:10:20,080\nRight.\n\n220\n00:10:20,080 --> 00:10:20,690\nThat's it.\n\n221\n00:10:20,690 --> 00:10:22,240\nOr connect to your wireless network.\n\n222\n00:10:22,240 --> 00:10:23,770\nSo you get them one way or another.\n\n223\n00:10:23,770 --> 00:10:25,230\nThose are great examples.\n\n224\n00:10:25,230 --> 00:10:30,030\nBut all of those, IPsec, 802.1X,\nDHCP, really designed for\n\n225\n00:10:30,030 --> 00:10:32,130\nthose internal clients.\n\n226\n00:10:32,130 --> 00:10:33,130\nWhat about our remote people?\n\n227\n00:10:33,130 --> 00:10:35,920\nPeople that are remotely connecting in.\n\n228\n00:10:35,920 --> 00:10:38,940\nWell, that's gonna be\nthe VPN enforcement example.\n\n229\n00:10:38,940 --> 00:10:45,110\nWhen they VPN in using L2TP or\nPPTP or SSTP right?\n\n230\n00:10:45,110 --> 00:10:47,780\nWhen they come in using\none of those protocols.\n\n231\n00:10:47,780 --> 00:10:52,070\nThe Routing and Remote Access server that\nthey're VPNing into can verify whether or\n\n232\n00:10:52,070 --> 00:10:53,970\nnot they should be able to connect in.\n\n233\n00:10:53,970 --> 00:10:59,648\nSo you guys start to see where it's\nnot a one solution wins for us.\n\n234\n00:10:59,648 --> 00:11:02,200\nI don't think we could pick\none of these and it's perfect.\n\n235\n00:11:02,200 --> 00:11:04,100\nWell I guess 802.1X is kind of close.\n\n236\n00:11:04,100 --> 00:11:04,770\n>> It's pretty close.\n\n237\n00:11:04,770 --> 00:11:07,080\n>> But\nyou'll really gonna combine these, and\n\n238\n00:11:07,080 --> 00:11:09,570\nyou'll probably deploy all\nfour in your environment.\n\n239\n00:11:09,570 --> 00:11:10,790\n>> Why not?\n\n240\n00:11:10,790 --> 00:11:13,130\nI know plenty of people don't use IPsec,\nand so\n\n241\n00:11:13,130 --> 00:11:15,500\nif that's the case you'll maybe\njust deploy the bottom three.\n\n242\n00:11:15,500 --> 00:11:16,970\nIt's whatever works.\n\n243\n00:11:16,970 --> 00:11:20,899\n>> I've seen that IPsec enforcement\nused to create isolation domains,\n\n244\n00:11:20,899 --> 00:11:24,108\nwhere every machine on your\nnetwork has an IPsec policy.\n\n245\n00:11:24,108 --> 00:11:27,013\nSo if anybody, a vendor or\nsomething like that comes in,\n\n246\n00:11:27,013 --> 00:11:29,252\nthey don't have an IPsec\npolicy on place and\n\n247\n00:11:29,252 --> 00:11:33,330\nthen they're not going to be able to\nconnect to anything on the network.\n\n248\n00:11:33,330 --> 00:11:36,150\nAnd what we'll talk about, and\nwe might have already talked about it,\n\n249\n00:11:36,150 --> 00:11:39,900\nbut, we're talking about IPSec, we're\nusing certificates for authentication.\n\n250\n00:11:39,900 --> 00:11:42,980\nIn this case, we're going to require\nthat certificate comes from that HRA,\n\n251\n00:11:42,980 --> 00:11:46,580\nthe Health Registration Authority, so\nif you can't prove you're compliant,\n\n252\n00:11:46,580 --> 00:11:48,287\nyou're not going to able to\nset up a IPSec conversation.\n\n253\n00:11:49,500 --> 00:11:53,701\n>> Yeah and IPsec is growing in importance\nbecause when you're on a shared network\n\n254\n00:11:53,701 --> 00:11:56,961\nof some sort where you don't\nknow who all's connected to it,\n\n255\n00:11:56,961 --> 00:11:59,174\nyou don't trust those communications.\n\n256\n00:11:59,174 --> 00:12:01,580\nBut you wanna be able to use\nthe wireless network or whatever.\n\n257\n00:12:01,580 --> 00:12:04,920\nSo, using IPsec to encrypt all of\nyour data between your machine and\n\n258\n00:12:04,920 --> 00:12:06,560\nanother machine becomes really,\nreally handy.\n\n259\n00:12:06,560 --> 00:12:08,040\n>> Yeah.\n>> So we are seeing it used more and\n\n260\n00:12:08,040 --> 00:12:11,840\nmore often, especially in like shared\ntenant buildings where there's common\n\n261\n00:12:11,840 --> 00:12:13,975\nswitches, IPsec really comes in handy.\n\n262\n00:12:13,975 --> 00:12:14,475\n>> Mm-hm, absolutely.\n\n263\n00:12:15,580 --> 00:12:20,990\n>> All right, so from a design side,\ndepending on which one of these or which\n\n264\n00:12:20,990 --> 00:12:24,740\ncombination of these we want to implement,\nwe're going to have to make some choices.\n\n265\n00:12:24,740 --> 00:12:28,520\nAnd the choices are really gonna center\non what kind of equipment we need.\n\n266\n00:12:28,520 --> 00:12:31,320\nThe first thing we need to think\nabout are the endpoints that\n\n267\n00:12:31,320 --> 00:12:32,440\npeople are connecting to.\n\n268\n00:12:32,440 --> 00:12:33,330\nRight?\n\n269\n00:12:33,330 --> 00:12:36,260\nIf they're gonna be\ndoing DHCP enforcement,\n\n270\n00:12:36,260 --> 00:12:38,820\nwe need to have a Microsoft DHTP server,\nright.\n\n271\n00:12:38,820 --> 00:12:43,610\nIf you've got a switch doing DHTP or\na Linux box or\n\n272\n00:12:43,610 --> 00:12:46,520\nwhatever, it's not gonna know\nhow to do the NAP enforcement.\n\n273\n00:12:46,520 --> 00:12:50,950\nSo if you're gonna do the DHTP solution,\nyou've gotta have a Microsoft DHTP server.\n\n274\n00:12:50,950 --> 00:12:52,930\nThe same thing goes for VPN enforcement.\n\n275\n00:12:52,930 --> 00:12:56,990\nIf you're going to do VPN enforcement,\nwell, a Cisco ASA or a Juniper SSG,\n\n276\n00:12:56,990 --> 00:13:00,160\nthey don't know how to\ndo the NAP enforcement.\n\n277\n00:13:00,160 --> 00:13:01,830\nBut a Microsoft routing and\n\n278\n00:13:01,830 --> 00:13:05,940\nremote access server acting as\nyour VPN concentrator, it does.\n\n279\n00:13:05,940 --> 00:13:09,655\nSo we will need a Microsoft routing and\nremote access server for VPN.\n\n280\n00:13:09,655 --> 00:13:14,530\n802.1x your switches and access points.\n\n281\n00:13:14,530 --> 00:13:16,890\nDon't forget those wireless access points.\n\n282\n00:13:16,890 --> 00:13:18,040\nIf you just do your switches,\n\n283\n00:13:18,040 --> 00:13:22,860\nonly physically capable people will\nbe able to connect up and be tested.\n\n284\n00:13:22,860 --> 00:13:24,650\nWireless people won't get tested.\n\n285\n00:13:24,650 --> 00:13:26,660\nSo you've got to make sure\nthat your access points and\n\n286\n00:13:26,660 --> 00:13:29,490\nyour switches support 802.1X.\n\n287\n00:13:29,490 --> 00:13:31,565\nNow, here it doesn't have\nto be Microsoft switches.\n\n288\n00:13:31,565 --> 00:13:33,660\n802.1X is a standard.\n\n289\n00:13:33,660 --> 00:13:35,950\nIt's certificate based is how it works.\n\n290\n00:13:35,950 --> 00:13:38,510\nAnd so you just need to make sure\nthat equipment is compatible.\n\n291\n00:13:38,510 --> 00:13:41,460\nSo when you guy to buy those switches,\nor if you already have some,\n\n292\n00:13:41,460 --> 00:13:43,650\nyou need to go break open the manual and\nlook.\n\n293\n00:13:43,650 --> 00:13:45,190\nAnd see if 802.1X support is in there.\n\n294\n00:13:46,870 --> 00:13:49,980\nAnd then IPsec,\nif you wanna do IPsec enforcement,\n\n295\n00:13:49,980 --> 00:13:54,620\nwell in this case, the client and\nthe server both need to be Microsoft\n\n296\n00:13:54,620 --> 00:13:57,892\nsystems because they're gonna\nbuild up that IP secession.\n\n297\n00:13:57,892 --> 00:14:00,880\nAnd it's during that process they\ndo the NAP enforcement check.\n\n298\n00:14:00,880 --> 00:14:04,100\nIf you don't have Microsoft systems,\nif you are doing a Linux box,\n\n299\n00:14:04,100 --> 00:14:07,540\nit doesn't know to check and so\nit is not going to happen there.\n\n300\n00:14:07,540 --> 00:14:11,915\nSo a lot of these is Microsoft-centric.\n\n301\n00:14:11,915 --> 00:14:16,580\nThat's our end point,\nthat's how people connect in the network.\n\n302\n00:14:16,580 --> 00:14:17,440\nWhat happens then?\n\n303\n00:14:18,610 --> 00:14:23,740\nWell, once they connect a chain reaction\nstarts, a number of systems get involved.\n\n304\n00:14:23,740 --> 00:14:27,630\nAnd I know we've covered this before but\njust to kind of recap what happens,\n\n305\n00:14:27,630 --> 00:14:30,990\nwhoever you connect to that's your\nentry point into the network.\n\n306\n00:14:30,990 --> 00:14:35,280\nThey're going to look at you and then\na couple of things are going to happen.\n\n307\n00:14:35,280 --> 00:14:38,550\nThe primary thing is they're going\nto validate that you are allowed to\n\n308\n00:14:38,550 --> 00:14:40,670\nconnect to the network just\non the basis of who you are.\n\n309\n00:14:41,680 --> 00:14:46,670\nSo there is almost always\na certificate hand off that happens.\n\n310\n00:14:46,670 --> 00:14:50,570\nYou show, as the client,\nyou show your end point your certificate.\n\n311\n00:14:51,650 --> 00:14:56,560\nAnd then that system,\nbe it the VPN Concentrator or\n\n312\n00:14:56,560 --> 00:15:01,420\nthe IPsec Server you're connecting to or\nwhatever, they turn around and\n\n313\n00:15:01,420 --> 00:15:04,560\ncheck with the network policy servers\nto go and find out whether or\n\n314\n00:15:04,560 --> 00:15:08,070\nnot you are allowed to connect\nbased on just that certificate.\n\n315\n00:15:08,070 --> 00:15:09,140\nOkay.\n\n316\n00:15:09,140 --> 00:15:15,470\nAssuming you are, then it takes a look\nat the health of your system and\n\n317\n00:15:15,470 --> 00:15:18,430\ndetermines whether you meet the other\nrequirements for connecting.\n\n318\n00:15:18,430 --> 00:15:19,870\nAnd only then are you allowed to connect.\n\n319\n00:15:19,870 --> 00:15:21,300\n>> Yeah, there's several different.\n\n320\n00:15:22,675 --> 00:15:24,750\nWhat are they, you got the system\nhealth validators on the server and\n\n321\n00:15:24,750 --> 00:15:26,760\nyou get system health\nagents that run the client.\n\n322\n00:15:26,760 --> 00:15:30,214\nAnd they basically run a little\nscript that pulls back\n\n323\n00:15:30,214 --> 00:15:35,126\ninformation on your system and then sends\nthe results of that script over and\n\n324\n00:15:35,126 --> 00:15:39,190\nthat's what's going to be compared\nby the HRA, not the HRA but\n\n325\n00:15:39,190 --> 00:15:43,434\nthe System Health validator over\non that network policy server.\n\n326\n00:15:43,434 --> 00:15:45,400\nSo your system runs a little agent.\n\n327\n00:15:45,400 --> 00:15:49,220\nIt has to be configured and\nenabled on the client end.\n\n328\n00:15:49,220 --> 00:15:51,990\nSends that script over, get's compared\nagainst that to see whether or\n\n329\n00:15:51,990 --> 00:15:53,960\nnot you are considered to be compliant.\n\n330\n00:15:53,960 --> 00:15:54,630\n>> Yeah.\n\n331\n00:15:54,630 --> 00:15:58,488\nAnd it's kinda weird when you think about\nit because that system health agent\n\n332\n00:15:58,488 --> 00:15:59,686\nrunning on the client.\n\n333\n00:15:59,686 --> 00:16:04,053\nThe client's really evaluating itself and\nthen turning those results over.\n\n334\n00:16:04,053 --> 00:16:05,886\nSo, you might think to yourself well,\n\n335\n00:16:05,886 --> 00:16:09,173\nwhat if somebody tampers with it to\ngive a false positive or whatever?\n\n336\n00:16:09,173 --> 00:16:12,089\nBut the service will actually\ncrash if you tamper with it,\n\n337\n00:16:12,089 --> 00:16:15,270\nso it's really one of those\nthat you can't mess with.\n\n338\n00:16:15,270 --> 00:16:18,530\nBut it'll evaluate itself and give the\nreport upstream to say, well, you know,\n\n339\n00:16:18,530 --> 00:16:22,070\nmy firewall's turned off but\nI did Windows Updates yesterday, right.\n\n340\n00:16:22,070 --> 00:16:22,804\n>> [LAUGH]\n>> And\n\n341\n00:16:22,804 --> 00:16:24,821\nmaybe that's enough to get you in, right.\n\n342\n00:16:24,821 --> 00:16:28,309\nOr maybe we look at it from a more like,\nnope, sorry, your firewall's off.\n\n343\n00:16:28,309 --> 00:16:29,592\nWe're not letting you in.\n\n344\n00:16:29,592 --> 00:16:31,040\nSo, that's important.\n\n345\n00:16:31,040 --> 00:16:32,738\nThere is one slight variation.\n\n346\n00:16:32,738 --> 00:16:37,793\nWith IPsec, 802.1x and VPN,\nthat certificate hand off happens first,\n\n347\n00:16:37,793 --> 00:16:41,310\nand then we start to do our\nsystem health validators.\n\n348\n00:16:41,310 --> 00:16:42,320\nRight.\n\n349\n00:16:42,320 --> 00:16:46,210\nWith DHCP,\nthat certificate hand off is skipped.\n\n350\n00:16:46,210 --> 00:16:46,820\nAll right.\n\n351\n00:16:46,820 --> 00:16:50,460\nBecause a DHCP request is a broadcast\npacket that goes out, and\n\n352\n00:16:50,460 --> 00:16:52,440\nwe start moving along from there.\n\n353\n00:16:52,440 --> 00:16:53,500\nIt gets skipped.\n\n354\n00:16:53,500 --> 00:16:57,950\nAnd so with that one, you basically jump\nright to the system help validators and\n\n355\n00:16:57,950 --> 00:16:59,160\nall of that process.\n\n356\n00:16:59,160 --> 00:17:00,985\nSo, DHCP is a little bit different.\n\n357\n00:17:00,985 --> 00:17:01,857\nAnd again,\n\n358\n00:17:01,857 --> 00:17:07,950\nit goes back to how DHCP is not the most\neffective of these enforcement methods.\n\n359\n00:17:07,950 --> 00:17:11,200\nSo, while it's there and you can use it,\nit's definitely not perfect.\n\n360\n00:17:11,200 --> 00:17:14,550\nAnd so, you should always be backing\nyourself up with another method behind\n\n361\n00:17:14,550 --> 00:17:15,070\nthe scenes.\n\n362\n00:17:16,720 --> 00:17:20,680\nAlright.\nSo, when we start to design our network,\n\n363\n00:17:20,680 --> 00:17:25,560\nwe've gotta have a network policy server\nin place to be able to do the work, right?\n\n364\n00:17:25,560 --> 00:17:27,260\nAnd we're gonna need a certificate server.\n\n365\n00:17:27,260 --> 00:17:29,850\nA certification authority\nto be able to answer our\n\n366\n00:17:29,850 --> 00:17:33,770\nquestions an answer our certificates and\nmake sure that they're actually valid.\n\n367\n00:17:33,770 --> 00:17:38,220\nSo, when we start designing\nan NPS deployment, or\n\n368\n00:17:38,220 --> 00:17:40,510\nNAP in general, right,\nNetwork Access Protection deployment,\n\n369\n00:17:41,510 --> 00:17:44,380\nthese are some of the systems\nthat we're going to need.\n\n370\n00:17:44,380 --> 00:17:48,440\nIf I've got wireless access points or\ninternal switches,\n\n371\n00:17:48,440 --> 00:17:51,760\nI didn't throw any up here on my diagram.\n\n372\n00:17:51,760 --> 00:17:56,340\nSo, if I got access points or\ninternal switches, whatever.\n\n373\n00:17:56,340 --> 00:17:59,928\nI need to make sure that\nthey are 802.1x capable.\n\n374\n00:17:59,928 --> 00:18:00,790\nAll right.\n\n375\n00:18:00,790 --> 00:18:04,550\nAnd, that way, when people plug into those\ndevices 802.1x authentication will happen.\n\n376\n00:18:04,550 --> 00:18:06,840\nYou know, it will verify that\nthey are allowed to connect.\n\n377\n00:18:07,960 --> 00:18:13,320\nIf we're doing VPN, we'll need to have\na Microsoft remote access server, right.\n\n378\n00:18:13,320 --> 00:18:16,770\nA routing remote access server\nthat's handling the VPN connections.\n\n379\n00:18:16,770 --> 00:18:18,650\nSo that it will know, right.\n\n380\n00:18:18,650 --> 00:18:22,580\nAnd then you know IPsec is just happening\nbetween our clients and servers, so\n\n381\n00:18:22,580 --> 00:18:24,380\nour Microsoft servers there.\n\n382\n00:18:24,380 --> 00:18:27,310\nAnd then DHCP,\nwell I can take somebody down here,\n\n383\n00:18:27,310 --> 00:18:29,020\nlet's see I think I'm out of servers.\n\n384\n00:18:29,020 --> 00:18:31,045\nI'll add another one.\n>> You can always pull up another one.\n\n385\n00:18:31,045 --> 00:18:34,950\n>> I'm kinda running low\non room here I guess but\n\n386\n00:18:34,950 --> 00:18:36,930\nI'll just stick another server over here.\n\n387\n00:18:36,930 --> 00:18:38,580\nSee it's gonna get\ncovered up by my head but\n\n388\n00:18:38,580 --> 00:18:42,060\nI'll just say that that's my DHCP server.\n\n389\n00:18:43,620 --> 00:18:46,678\nSo, it can sit over here and\ndo it's DHCP thing.\n\n390\n00:18:46,678 --> 00:18:49,970\nSo, I\"ll need that Microsoft DHCP\nserver to handle that.\n\n391\n00:18:49,970 --> 00:18:51,430\nSo, that's step one,\n\n392\n00:18:51,430 --> 00:18:54,840\ncomponent number one for\ndeploying a solution like this, all right?\n\n393\n00:18:54,840 --> 00:18:55,890\nComponent number two is the CA.\n\n394\n00:18:55,890 --> 00:18:58,490\nI've got to have that\ncertificate authority,\n\n395\n00:18:58,490 --> 00:19:00,350\nsomebody who can issue out certificates.\n\n396\n00:19:00,350 --> 00:19:04,670\nAnd with a CA keep in mind, you're not\nnormally going to have just one server.\n\n397\n00:19:04,670 --> 00:19:09,110\nIf you haven't watched it, make sure you\nwatch our certificate authority episode\n\n398\n00:19:09,110 --> 00:19:13,315\nfrom the 412 show where we showed like,\nyou'll deploy one and then you'll\n\n399\n00:19:13,315 --> 00:19:17,585\ncreate a subordinate CA, or maybe two or\nthree, depending on how many you need.\n\n400\n00:19:17,585 --> 00:19:19,415\nTake the root CA offline.\n\n401\n00:19:19,415 --> 00:19:23,101\nSo, although I'm just depicting\nthis as one icon, the PKI,\n\n402\n00:19:23,101 --> 00:19:26,035\nthe Public Key Infrastructure,\nis normally much bigger.\n\n403\n00:19:26,035 --> 00:19:30,195\nKeep that in mind when you do scaling for\nyour organization or\n\n404\n00:19:30,195 --> 00:19:33,150\nyou're doing capacity planning,\nif you got 200,000 PCs.\n\n405\n00:19:33,150 --> 00:19:37,110\nAnd you issue new\ncertificates every month.\n\n406\n00:19:37,110 --> 00:19:38,590\nRight?\nEvery 30 days or whatever.\n\n407\n00:19:38,590 --> 00:19:42,860\nYou're gonna need a handful of\nsubordinate CAs to handle that load.\n\n408\n00:19:42,860 --> 00:19:47,350\nBut, if you've got 2,000 PCs, and\nyou just issue new certs every two years,\n\n409\n00:19:47,350 --> 00:19:49,020\nit's gonna be pretty low burden.\n\n410\n00:19:49,020 --> 00:19:52,190\nAnd so, maybe you just need a single\nsubordinate CA, nothing too crazy there.\n\n411\n00:19:53,560 --> 00:19:54,960\nRight?\n\n412\n00:19:54,960 --> 00:19:56,897\nAfter that, we need a few other things.\n\n413\n00:19:56,897 --> 00:20:00,760\nNow, we have our Health Policy Server or\nHPS.\n\n414\n00:20:00,760 --> 00:20:05,910\nIt's actually just a system that's\nrunning the Windows policy server, right?\n\n415\n00:20:05,910 --> 00:20:07,710\nThe NPS, Network Policy Server.\n\n416\n00:20:07,710 --> 00:20:12,970\nAnd it's usually running Radius also\nto be able to do authentication.\n\n417\n00:20:12,970 --> 00:20:14,410\nBut it doesn't have to.\n\n418\n00:20:14,410 --> 00:20:18,170\nYou could actually be running\nRadius on a separate system,\n\n419\n00:20:18,170 --> 00:20:20,610\nlike a Health Registration Authority.\n\n420\n00:20:20,610 --> 00:20:21,970\nIf it's sitting on that separate system,\n\n421\n00:20:21,970 --> 00:20:25,650\nthat helps us to start to\nscale a little bit bigger.\n\n422\n00:20:25,650 --> 00:20:28,710\nNow the HRA,\nit's not really doing a ton of work.\n\n423\n00:20:28,710 --> 00:20:31,980\nIt's the HPS that's doing the bulk of\nthe work like actually running you against\n\n424\n00:20:31,980 --> 00:20:33,230\nthe policies and so on.\n\n425\n00:20:33,230 --> 00:20:37,862\nAnd if you're authenticating against the\nactive directory, it's that health policy\n\n426\n00:20:37,862 --> 00:20:40,780\nserver that's actually reaching out\nto the DC to validate you and stuff.\n\n427\n00:20:40,780 --> 00:20:42,820\nBut it is all passing through that HRA.\n\n428\n00:20:42,820 --> 00:20:46,450\nWe'll talk about ways to supplement that,\n\n429\n00:20:46,450 --> 00:20:49,900\nto boost up your speed and so on,\nin larger environments after the break.\n\n430\n00:20:51,750 --> 00:20:55,390\nThe other component we need is if\nsomebody gets connected up and\n\n431\n00:20:55,390 --> 00:20:59,950\nthey fail the requirements,\nthey don't meet our needs.\n\n432\n00:20:59,950 --> 00:21:02,740\nThe default is to just drop them from\nthe network and not let them connect.\n\n433\n00:21:02,740 --> 00:21:03,660\nAll right?\n\n434\n00:21:03,660 --> 00:21:05,000\nSorry you don't meet our requirements.\n\n435\n00:21:05,000 --> 00:21:06,060\nYou're out of here.\n\n436\n00:21:06,060 --> 00:21:06,570\nYou're fired.\n\n437\n00:21:06,570 --> 00:21:07,653\n>> No soup for you.\n\n438\n00:21:07,653 --> 00:21:10,575\n[LAUGH]\n>> [LAUGH] So, that's the default, but\n\n439\n00:21:10,575 --> 00:21:12,955\nit's kind of counterproductive.\n\n440\n00:21:12,955 --> 00:21:14,685\n>> It is.\nTypically we're not trying to\n\n441\n00:21:14,685 --> 00:21:15,685\nkeep them off the network.\n\n442\n00:21:15,685 --> 00:21:17,925\nWe want em to be able to\njoin into the network and\n\n443\n00:21:17,925 --> 00:21:20,815\nget access to resources that\nthey need to to their job.\n\n444\n00:21:20,815 --> 00:21:25,705\nWe just don't want infecting our network\nand bringing in systems that are not safe.\n\n445\n00:21:25,705 --> 00:21:27,165\nSo, we've gotta make sure that we're.\n\n446\n00:21:27,165 --> 00:21:29,385\nI forgot where I was going with that?\n\n447\n00:21:29,385 --> 00:21:34,985\nWith the remediation network, gives me the\nability to do a couple of things really.\n\n448\n00:21:34,985 --> 00:21:39,280\nI can set up some resources out there\nthat can allow them to become compliant.\n\n449\n00:21:39,280 --> 00:21:41,770\nWe can let them out of\nthat remediation network.\n\n450\n00:21:41,770 --> 00:21:45,200\nOr I could even turn on\nsome auto remediation.\n\n451\n00:21:45,200 --> 00:21:47,840\nThat's just an alternative to just\ndropping them from the network.\n\n452\n00:21:47,840 --> 00:21:49,830\nGive them a chance to become compliant.\n\n453\n00:21:49,830 --> 00:21:52,980\nSo, that they can then pass our help\nchecks and then connect to the network.\n\n454\n00:21:54,220 --> 00:21:58,150\n>> And what do you put in that\nremediation network, right?\n\n455\n00:21:58,150 --> 00:21:58,860\nIt's up to you.\n\n456\n00:21:58,860 --> 00:22:00,850\n>> Maybe you put your\nWSUS server up there, so\n\n457\n00:22:00,850 --> 00:22:03,160\nthat they can get current\nwith their Windows updates.\n\n458\n00:22:03,160 --> 00:22:06,670\nOr maybe you've got a file server with\na copy of your antivirus software, so\n\n459\n00:22:06,670 --> 00:22:09,690\nthey can install that and\nget that up to date and become compliant.\n\n460\n00:22:09,690 --> 00:22:10,890\nOther things we can kinda automate.\n\n461\n00:22:10,890 --> 00:22:12,560\nWe can turn their Windows Firewall on for\n\n462\n00:22:12,560 --> 00:22:16,920\nthem if that's why they're\nin a remediation network.\n\n463\n00:22:16,920 --> 00:22:18,200\n>> I went by one organization.\n\n464\n00:22:18,200 --> 00:22:20,500\nThis was probably a year or two ago.\n\n465\n00:22:20,500 --> 00:22:23,180\nAnd their remediation network was empty.\n\n466\n00:22:23,180 --> 00:22:25,080\nBut not completely empty.\n\n467\n00:22:25,080 --> 00:22:27,620\nWhen somebody got moved into the\nremediation network, they would still get\n\n468\n00:22:27,620 --> 00:22:30,780\na default gateway and public DNS server so\nthey had internet access.\n\n469\n00:22:30,780 --> 00:22:31,370\n>> Hm.\n>> So,\n\n470\n00:22:31,370 --> 00:22:33,070\nthey were isolated from\nthe internal network but\n\n471\n00:22:33,070 --> 00:22:34,340\nthey still had internet access.\n\n472\n00:22:34,340 --> 00:22:35,820\n>> Right.\nAlmost like a guest network.\n\n473\n00:22:35,820 --> 00:22:36,590\n>> Yeah.\nAnd the reason.\n\n474\n00:22:36,590 --> 00:22:37,260\nCuz I asked.\n\n475\n00:22:37,260 --> 00:22:38,360\nI was like, well, why would you do that?\n\n476\n00:22:38,360 --> 00:22:38,940\nWhy would you give\n\n477\n00:22:38,940 --> 00:22:41,280\ngive somebody internet access if they're\nnot authorized for your network.\n\n478\n00:22:41,280 --> 00:22:44,990\nAnd they said, well, we had a lot\nof people that would come by to\n\n479\n00:22:44,990 --> 00:22:48,020\nwork on the network,\nto do presentations and stuff,\n\n480\n00:22:48,020 --> 00:22:50,230\nand we didn't know what\nantivirus software they ran.\n\n481\n00:22:50,230 --> 00:22:52,530\n>> Right.\n>> So, maybe they ran McAfee,\n\n482\n00:22:52,530 --> 00:22:55,970\nSymantec, Sofos, who knows?\n\n483\n00:22:55,970 --> 00:22:57,500\n>> We want them to be able to contact and\n\n484\n00:22:57,500 --> 00:22:59,550\ndo their updates to be able\nto get on the network.\n\n485\n00:22:59,550 --> 00:23:01,080\n>> Right.\n>> We could check to see whether they\n\n486\n00:23:01,080 --> 00:23:01,910\nwere allowed.\n\n487\n00:23:01,910 --> 00:23:03,335\nWhether they were up to date.\n\n488\n00:23:03,335 --> 00:23:05,244\n>> Mm-hm.\n>> But we couldn't push them the updates.\n\n489\n00:23:05,244 --> 00:23:05,860\n>> [CROSSTALK] the updates.\n\n490\n00:23:05,860 --> 00:23:06,360\nYeah.\n\n491\n00:23:06,360 --> 00:23:07,535\n>> So, they gave them internet access.\n\n492\n00:23:07,535 --> 00:23:08,170\n>> Mm-hm.\n\n493\n00:23:08,170 --> 00:23:10,130\n>> That was a little\nbit of a stretch to me.\n\n494\n00:23:10,130 --> 00:23:13,091\nCuz technically somebody could pull up in\nthe parking lot and get internet access.\n\n495\n00:23:13,091 --> 00:23:13,841\n>> [LAUGH] Right.\n\n496\n00:23:13,841 --> 00:23:14,969\n>> But that was what they did.\n\n497\n00:23:14,969 --> 00:23:17,172\nSo, it's kind of up to you\nwhat's gonna go in there.\n\n498\n00:23:17,172 --> 00:23:19,230\n>> Mm-hm.\n>> And it could be a number of things.\n\n499\n00:23:19,230 --> 00:23:20,560\nIt could just be empty, right.\n\n500\n00:23:20,560 --> 00:23:24,130\nThen it becomes a true quarantine, right.\n\n501\n00:23:24,130 --> 00:23:26,820\nBut you're always better off to stick\nsome service in there to help people get\n\n502\n00:23:26,820 --> 00:23:33,380\nhealthy because remember, with NAP,\nas soon as they become healthy it knows.\n\n503\n00:23:33,380 --> 00:23:35,990\nAnd it moves them back into\nthe production network.\n\n504\n00:23:35,990 --> 00:23:38,380\nSo, it's possible they could\nre-mediate very quickly, and\n\n505\n00:23:38,380 --> 00:23:40,440\nthey get a message on the screen\nletting them know so they're aware.\n\n506\n00:23:42,410 --> 00:23:45,970\nSo, a lot of different\nmoving pieces in here,\n\n507\n00:23:45,970 --> 00:23:48,460\ndepending on which components\nwe're going to issue.\n\n508\n00:23:48,460 --> 00:23:51,330\nWhen you start doing a design it's\neasy to think of the design from\n\n509\n00:23:51,330 --> 00:23:53,930\nthe perspective of just\none of these solutions.\n\n510\n00:23:53,930 --> 00:23:56,120\nJust IP sect or just VPN.\n\n511\n00:23:56,120 --> 00:23:59,790\nBut, when you start combining them\nit starts to get a little murky.\n\n512\n00:23:59,790 --> 00:24:01,696\nRight?\nBut it's actually not that bad.\n\n513\n00:24:01,696 --> 00:24:04,662\nIf your switches and\naccess points are doing 802.1x.\n\n514\n00:24:04,662 --> 00:24:08,238\n802.1X requires a RADIUS server to work.\n\n515\n00:24:08,238 --> 00:24:11,489\nWell, you're usually running RADIUS on\nyour health registration authority.\n\n516\n00:24:11,489 --> 00:24:13,822\nSo you just point these guys at your HRA.\n\n517\n00:24:13,822 --> 00:24:14,623\nAll right.\n\n518\n00:24:14,623 --> 00:24:22,105\nSame thing goes for,\nnot DHCP, but IPsec and VPN.\n\n519\n00:24:22,105 --> 00:24:26,800\nOn the VPN side, they're gonna remote into\nthe routing and remote access server.\n\n520\n00:24:26,800 --> 00:24:30,490\nAnd so on there you set it to use\nRADIUS and you point it at the HRA.\n\n521\n00:24:30,490 --> 00:24:35,000\nSo, while we have different front ends,\nthe back end components are the same.\n\n522\n00:24:35,000 --> 00:24:39,050\nAnd once you've got this work done here on\nthe back end, that's really the hard part.\n\n523\n00:24:39,050 --> 00:24:40,260\n>> It is.\n>> The rest of it's just\n\n524\n00:24:40,260 --> 00:24:41,969\nsimple making some slight modifications.\n\n525\n00:24:41,969 --> 00:24:43,801\n>> Mm-hm.\n>> DHCP is a little bit of a pain to go in\n\n526\n00:24:43,801 --> 00:24:45,287\nand do its little settings.\n\n527\n00:24:45,287 --> 00:24:47,565\n>> Yeah, you've got all\nthe different options configured.\n\n528\n00:24:47,565 --> 00:24:48,460\n>> Mm-hm.\n\n529\n00:24:48,460 --> 00:24:51,880\nYeah, and if you've never deployed NAP,\n\n530\n00:24:51,880 --> 00:24:56,730\nif you watched our shows, I think,\ndid we do two of the four?\n\n531\n00:24:56,730 --> 00:24:57,237\nI think we did a couple of them.\n\n532\n00:24:57,237 --> 00:24:57,887\n>> I wanna say we did.\n\n533\n00:24:57,887 --> 00:25:01,178\nI think we did VPN,\nas well as DHCP, possibly.\n\n534\n00:25:01,178 --> 00:25:03,146\n>> Okay.\nI don't think we did all four.\n\n535\n00:25:03,146 --> 00:25:07,266\nSo, I do want to encourage you\nthough to do a little mock lab and\n\n536\n00:25:07,266 --> 00:25:09,580\nkinda go through each of the four.\n\n537\n00:25:09,580 --> 00:25:12,600\nYou'll find that they are 85% identical.\n\n538\n00:25:12,600 --> 00:25:14,498\nThat's why we didn't do\nall four on the show.\n\n539\n00:25:14,498 --> 00:25:16,218\nIt's just cuz the bulk of\nthem is just identical.\n\n540\n00:25:16,218 --> 00:25:19,701\nBut that last little bit that's different\nwill give you chance to get your hands wet\n\n541\n00:25:19,701 --> 00:25:21,454\nand kinda see how it works and\ntest it out.\n\n542\n00:25:21,454 --> 00:25:23,850\nBut yeah,\nonce you've got that back end in place,\n\n543\n00:25:23,850 --> 00:25:25,927\nthe rest of it's pretty straightforward.\n\n544\n00:25:25,927 --> 00:25:26,427\n>> Mm-hm.\n\n545\n00:25:28,127 --> 00:25:30,633\nAll right.\nSo, what I wanna talk about next, or\n\n546\n00:25:30,633 --> 00:25:31,958\nactually, I guess.\n\n547\n00:25:31,958 --> 00:25:35,708\nCouple other little things we should\nthrow out before the break, I guess.\n\n548\n00:25:35,708 --> 00:25:39,423\nI keep wanting to jump in to capacity,\ncuz it's a fun thing to talk about, but\n\n549\n00:25:39,423 --> 00:25:42,529\nthe other thing we need to remember\nis placement of our servers.\n\n550\n00:25:42,529 --> 00:25:44,317\n>> Yeah.\n>> Where do these servers go?\n\n551\n00:25:44,317 --> 00:25:49,461\nAnd in my diagram here I show a DMZ,\nand a remediation network, and so on.\n\n552\n00:25:49,461 --> 00:25:51,853\nThey're all in my headquarters.\n\n553\n00:25:51,853 --> 00:25:54,686\nAnd you're DMZ,\nthat's normally an isolated,\n\n554\n00:25:54,686 --> 00:25:59,550\nseparate network cuz you don't want your\nDMZ crossing into your local area network.\n\n555\n00:25:59,550 --> 00:26:00,072\n>> Mm-hm.\n\n556\n00:26:00,072 --> 00:26:03,990\n>> And I've got these servers down here,\nwhich are kinda my local area network.\n\n557\n00:26:03,990 --> 00:26:05,030\nRight?\n\n558\n00:26:05,030 --> 00:26:06,300\nWhere's the remediation network go?\n\n559\n00:26:07,630 --> 00:26:08,680\nIt's up to you.\n\n560\n00:26:08,680 --> 00:26:10,140\nCouple of choices here.\n\n561\n00:26:10,140 --> 00:26:12,710\nI've got it right here on\nmy local area network.\n\n562\n00:26:12,710 --> 00:26:14,550\nIt's just kind of cordoned off.\n\n563\n00:26:14,550 --> 00:26:18,530\nWhen you use NPS, when somebody\nconnects and they fail a health check,\n\n564\n00:26:18,530 --> 00:26:21,200\nit doesn't have to move them to\na completely separate network.\n\n565\n00:26:21,200 --> 00:26:24,689\nIt can leave them on your network and\nit can force IP filters on them.\n\n566\n00:26:24,689 --> 00:26:28,815\nIt can put a filter on and say,\nyeah you're on the 192.168.0 network,\n\n567\n00:26:28,815 --> 00:26:30,829\nbut you don't have access to all of it.\n\n568\n00:26:30,829 --> 00:26:38,086\nYou just have access to 192.168.0.57 and\n192.168.0.112, and that's it.\n\n569\n00:26:38,086 --> 00:26:40,880\n>> Just those servers sitting\nout in the remediation networks.\n\n570\n00:26:40,880 --> 00:26:41,540\n>> Yeah.\n\n571\n00:26:41,540 --> 00:26:45,550\nSo, this remediation network does\nnot have to be a separate network.\n\n572\n00:26:45,550 --> 00:26:50,510\nNow, I know a lot of people like it to be,\nand want it to be a separate network.\n\n573\n00:26:50,510 --> 00:26:52,580\nBut the problem is when\nsomebody's connecting in,\n\n574\n00:26:52,580 --> 00:26:54,970\ndepending on how they connected,\nyou may or not be able to do that.\n\n575\n00:26:54,970 --> 00:26:58,500\nYou may not be able to push somebody\nto a completely separate network.\n\n576\n00:26:58,500 --> 00:27:01,220\nFor example, with IPsec,\nyou really can't do it.\n\n577\n00:27:01,220 --> 00:27:02,750\nThey're already on the network.\n\n578\n00:27:02,750 --> 00:27:06,210\nYou can't really shift them IPs and\neverything over to another network,\n\n579\n00:27:06,210 --> 00:27:06,850\nit's not gonna work.\n\n580\n00:27:08,650 --> 00:27:12,090\nWith a switch,\nthey plugged into a physical port,\n\n581\n00:27:12,090 --> 00:27:14,970\nthat physical port is probably\non a particular VLAN.\n\n582\n00:27:14,970 --> 00:27:16,980\nYou can't shift them to another network.\n\n583\n00:27:16,980 --> 00:27:19,990\nSo you may be forced to have\nthat remediation network\n\n584\n00:27:19,990 --> 00:27:22,440\nright there inside of\nyour local area network,\n\n585\n00:27:22,440 --> 00:27:25,280\njust a subset of servers that you\nallow them to have access to.\n\n586\n00:27:26,340 --> 00:27:29,444\nBut if it's a VPN connection\nwhere they're coming in,\n\n587\n00:27:29,444 --> 00:27:33,218\nit's easy to shift them off to\na separate IP range and move them off.\n\n588\n00:27:33,218 --> 00:27:36,754\nAnd so, sometimes you have that\nflexibility to move it to another IP\n\n589\n00:27:36,754 --> 00:27:38,809\nrange, but don't assume you have to.\n\n590\n00:27:38,809 --> 00:27:41,374\nI've read countless articles on\nthe internet, where it's like, oh yeah,\n\n591\n00:27:41,374 --> 00:27:42,921\nset a separate IP range for\nthat remediation!\n\n592\n00:27:42,921 --> 00:27:44,675\nSometimes you can't.\n\n593\n00:27:44,675 --> 00:27:47,200\nAnd so, you've gotta kinda\nchoose your battle there.\n\n594\n00:27:47,200 --> 00:27:49,794\n>> [LAUGH]\n>> But otherwise,\n\n595\n00:27:49,794 --> 00:27:54,303\nas far as placement of the servers goes,\nthe routing remote access server,\n\n596\n00:27:54,303 --> 00:27:58,037\nif it's your VPN endpoint,\nit's probably gonna go in your DMZ\n\n597\n00:27:58,037 --> 00:28:02,360\nbecause people on the internet\nneed to be able to connect to it.\n\n598\n00:28:02,360 --> 00:28:07,380\nBut all of the other servers, DHCP,\nthe HRA, the HPS, all these other guys,\n\n599\n00:28:07,380 --> 00:28:12,876\nthey're all going to be sitting inside of\nyour network, on your local area network.\n\n600\n00:28:12,876 --> 00:28:16,353\nAnd you might have a special\nnetwork set up for your servers,\n\n601\n00:28:16,353 --> 00:28:20,255\nit might be that one, you might\nhave dedicated networks for these.\n\n602\n00:28:20,255 --> 00:28:24,051\nBut for the most part, they're gonna be on\nyour local network, behind your firewall.\n\n603\n00:28:24,051 --> 00:28:27,638\nThe only thing that really needs to be\nexposed to the Internet is the VPN server.\n\n604\n00:28:27,638 --> 00:28:28,154\nRight?\n\n605\n00:28:28,154 --> 00:28:31,225\nAll of the other ones are really\ndesigned to protect internal clients so\n\n606\n00:28:31,225 --> 00:28:32,565\nwe don't have to expose them.\n\n607\n00:28:34,983 --> 00:28:37,810\nAll right, well, Mike, why don't\nwe stop here and take a breather.\n\n608\n00:28:37,810 --> 00:28:38,640\n>> All right.\n\n609\n00:28:38,640 --> 00:28:41,797\n>> And when we get back,\nwe'll talk about capacity planning, and\n\n610\n00:28:41,797 --> 00:28:43,855\nhow we can improve performance with NAP.\n\n611\n00:28:43,855 --> 00:28:44,911\nSound good?\n>> Sounds like a plan.\n\n612\n00:28:44,911 --> 00:28:45,979\n>> All right, stay tuned.\n\n613\n00:28:45,979 --> 00:28:46,925\nWe'll be back in a few.\n\n614\n00:28:46,925 --> 00:28:50,431\n[SOUND] All right,\n\n615\n00:28:50,431 --> 00:28:56,044\nwelcome back, everybody.\n\n616\n00:28:56,044 --> 00:28:59,724\nSo, we've seen the infrastructure for\nNAP and\n\n617\n00:28:59,724 --> 00:29:04,698\nall the other components inside of it,\nbut capacity planning.\n\n618\n00:29:04,698 --> 00:29:07,763\n>> Right.\n>> How do we design for a heavy network?\n\n619\n00:29:07,763 --> 00:29:10,724\nAnd what even constitutes a heavy network?\n\n620\n00:29:10,724 --> 00:29:12,510\nIt's kind of confusing.\n\n621\n00:29:12,510 --> 00:29:13,737\n>> And\ndo I have to worry about all the pieces?\n\n622\n00:29:13,737 --> 00:29:14,881\nJust one or two of the pieces?\n\n623\n00:29:14,881 --> 00:29:16,512\nI mean, there's a lot of\ndifferent components there.\n\n624\n00:29:16,512 --> 00:29:17,194\n>> Yeah.\nI mean,\n\n625\n00:29:17,194 --> 00:29:21,120\nI threw up that diagram earlier in the\nshow, and now let me just bring this up.\n\n626\n00:29:21,120 --> 00:29:22,600\nThis is, I kind of flipped it around.\n\n627\n00:29:22,600 --> 00:29:26,439\nWhen we show all of these difference\ncomponents like the domain controller,\n\n628\n00:29:26,439 --> 00:29:30,042\nand the health registration authority,\nand all this other good stuff,\n\n629\n00:29:30,042 --> 00:29:33,010\nwell, behind that you\nmight have three switches.\n\n630\n00:29:33,010 --> 00:29:35,010\nYou might have 300 switches.\n\n631\n00:29:35,010 --> 00:29:37,288\nYou might have 30 clients or\n30,000 clients.\n\n632\n00:29:37,288 --> 00:29:40,916\nAnd each of them are generating\nload on your system.\n\n633\n00:29:40,916 --> 00:29:42,588\nHow much load?\n\n634\n00:29:42,588 --> 00:29:43,708\nWell, yeah.\n\n635\n00:29:43,708 --> 00:29:45,177\n[LAUGH]\n>> [LAUGH] Sorry.\n\n636\n00:29:45,177 --> 00:29:48,997\n>> So, how much load is this\nreally creating on our system?\n\n637\n00:29:48,997 --> 00:29:49,896\nAnd it kinda depends.\n\n638\n00:29:49,896 --> 00:29:53,704\nWhen you set up your health registration\nchecks, and health validation, and\n\n639\n00:29:53,704 --> 00:29:56,993\nall that good stuff, one of\nthe things that you're specifying is,\n\n640\n00:29:56,993 --> 00:30:01,080\nthat you're really specifying what's\ncalled a statement of health.\n\n641\n00:30:01,080 --> 00:30:04,668\nWhen a system is allowed to connect to\nyour network, it's been given a statement\n\n642\n00:30:04,668 --> 00:30:08,170\nof health that says, yes, you're healthy,\nyou're allowed on my network.\n\n643\n00:30:09,910 --> 00:30:13,360\nEvery time that PC disconnects and\n\n644\n00:30:13,360 --> 00:30:17,530\nreconnects, it has to repeat\nthe validation process.\n\n645\n00:30:17,530 --> 00:30:21,840\nSo that's gonna happen periodically\nas they disconnect and reconnect.\n\n646\n00:30:21,840 --> 00:30:23,310\nThose are validation requests.\n\n647\n00:30:23,310 --> 00:30:27,360\nSo, how many times in a day, or\nhow many times in an hour, or\n\n648\n00:30:27,360 --> 00:30:28,620\nhow many times in a minute?\n\n649\n00:30:28,620 --> 00:30:29,430\n>> Right.\n\n650\n00:30:29,430 --> 00:30:32,388\n>> Do people plug in and\nunplug from your network?\n\n651\n00:30:32,388 --> 00:30:35,420\nThat is gonna be your minimum number for\n\n652\n00:30:35,420 --> 00:30:37,739\nmeasuring load on these systems, or\nhow much activity you're seeing.\n\n653\n00:30:39,130 --> 00:30:42,940\nBut the statement of health that\nyou get has a validity period also.\n\n654\n00:30:42,940 --> 00:30:45,807\nBecause you don't want somebody to\nconnect and then just stay connected for\n\n655\n00:30:45,807 --> 00:30:48,464\nmonths on end, they get infected\nwith viruses and all sorts of stuff.\n\n656\n00:30:48,464 --> 00:30:50,332\nBut they passed the check six months ago.\n\n657\n00:30:50,332 --> 00:30:50,843\nRight?\n\n658\n00:30:50,843 --> 00:30:55,740\nSo, most of them have a validation\ncheck and the default is 24 hours.\n\n659\n00:30:55,740 --> 00:30:59,260\nSo every 24 hours,\nif that PC doesn't disconnect and\n\n660\n00:30:59,260 --> 00:31:03,300\nreconnect, every 24 hours\nit'll repeat its health check.\n\n661\n00:31:03,300 --> 00:31:04,560\nAnd that's a good interval.\n\n662\n00:31:04,560 --> 00:31:07,140\nMost people just leave it at the default\nbecause you should be updating your\n\n663\n00:31:07,140 --> 00:31:10,380\nantivirus definitions once a day and\nso on.\n\n664\n00:31:10,380 --> 00:31:12,260\nThat should be pretty routine.\n\n665\n00:31:12,260 --> 00:31:13,120\nSo that's kind of a good one.\n\n666\n00:31:13,120 --> 00:31:17,790\nYou can shorten it if you want, which is\ngonna increase the load on your network.\n\n667\n00:31:17,790 --> 00:31:22,135\nOr you can lengthen it out, which is gonna\ndecrease load, but increase your risk.\n\n668\n00:31:22,135 --> 00:31:25,970\nIt'll take longer to detect when\npeople are not in compliance.\n\n669\n00:31:25,970 --> 00:31:30,929\nSo, we need to understand that before\nwe can start to figure the load for\n\n670\n00:31:30,929 --> 00:31:31,963\nour systems.\n\n671\n00:31:31,963 --> 00:31:35,880\nNow, as a general rule of thumb,\n\n672\n00:31:35,880 --> 00:31:39,390\na general starting point, Microsoft, they\nactually have this really cool article.\n\n673\n00:31:39,390 --> 00:31:42,360\nLet me bring this up, which is\nthe NAP Capacity Planning article.\n\n674\n00:31:43,480 --> 00:31:46,799\nAnd I'll post the URL for this with\nthe show notes so you guys can have it.\n\n675\n00:31:46,799 --> 00:31:53,202\nBut there's a lot of stuff that's in\nhere and some of it's really useful.\n\n676\n00:31:53,202 --> 00:31:53,811\nSome of it isn't.\n\n677\n00:31:53,811 --> 00:31:54,489\n>> [LAUGH]\n>> Like\n\n678\n00:31:54,489 --> 00:31:57,144\ndo you require 100%\navailability of your servers?\n\n679\n00:31:57,144 --> 00:31:58,467\nWell, probably, right?\n\n680\n00:31:58,467 --> 00:32:00,466\n[LAUGH]\n>> [LAUGH] No, I want 50%, please.\n\n681\n00:32:00,466 --> 00:32:02,193\n>> [LAUGH] So we may need more systems.\n\n682\n00:32:02,193 --> 00:32:04,490\nBut it's just kinda highlighting\nall the different things that you\n\n683\n00:32:04,490 --> 00:32:05,098\nneed to plan for.\n\n684\n00:32:05,098 --> 00:32:09,694\nAnd when you look, it breaks it down based\non each of the different components and\n\n685\n00:32:09,694 --> 00:32:14,100\nthen it will lay out information about\nwhat you can do to make them redundant.\n\n686\n00:32:14,100 --> 00:32:15,565\nAnd we're gonna talk about some of these.\n\n687\n00:32:15,565 --> 00:32:19,800\nBut your NAP enforcement servers\nare probably the busiest.\n\n688\n00:32:19,800 --> 00:32:22,380\nAnd this is one where they\ngive some really good advice,\n\n689\n00:32:22,380 --> 00:32:24,860\nright down here at the very\nbottom of that one.\n\n690\n00:32:24,860 --> 00:32:27,820\nAnd this is just kind of, rule of thumb,\n\n691\n00:32:27,820 --> 00:32:31,510\na general starting point,\ncuz your mileage may vary.\n\n692\n00:32:31,510 --> 00:32:37,050\nBut the rule of thumb is that a single\nHealth Registration Authority should\n\n693\n00:32:37,050 --> 00:32:42,111\nbe able to handle up to 20 network\naccess requests per second.\n\n694\n00:32:42,111 --> 00:32:43,300\nAll right?\n\n695\n00:32:43,300 --> 00:32:48,120\nSo if in one second you have up to 20\npeople plugging in and unplugging or\n\n696\n00:32:48,120 --> 00:32:49,930\nhitting their 24 hour expiration limit or\n\n697\n00:32:49,930 --> 00:32:54,000\nwhatever, then a single HRA is\nprobably gonna be enough for you.\n\n698\n00:32:54,000 --> 00:32:54,945\nNow I say probably,\n\n699\n00:32:54,945 --> 00:32:58,310\ncuz if it's on some old crusty server,\nthen it's not gonna do so good,\n\n700\n00:32:58,310 --> 00:33:02,800\nbut on any modern server, it should be\nable to handle 20 requests per second.\n\n701\n00:33:02,800 --> 00:33:05,423\nThat's gonna be good enough for\nmost environments.\n\n702\n00:33:05,423 --> 00:33:06,630\nIn fact, they work it out.\n\n703\n00:33:06,630 --> 00:33:10,490\nIt's the equivalent of\n50,000 client computers in\n\n704\n00:33:10,490 --> 00:33:13,194\nan average network with a 24 hour SOH.\n\n705\n00:33:13,194 --> 00:33:16,746\nAll right, so\nif you've got less than 50,000 clients,\n\n706\n00:33:16,746 --> 00:33:19,505\nyou probably just need one HRA,\nand that's it.\n\n707\n00:33:19,505 --> 00:33:23,925\nNow on the exam,\ndo you ever deploy just one HRA?\n\n708\n00:33:23,925 --> 00:33:26,470\n>> No, we gotta have a little bit of\nfault tolerance in there, don't we?\n\n709\n00:33:26,470 --> 00:33:27,760\n>> That's exactly right.\n\n710\n00:33:27,760 --> 00:33:29,520\nAnd that's where it goes back\nto this comment right here.\n\n711\n00:33:29,520 --> 00:33:31,800\nDo you require availability?\n\n712\n00:33:31,800 --> 00:33:34,520\nIn Microsoft land, there is no number one.\n\n713\n00:33:34,520 --> 00:33:37,620\nIt's anti-binary,\nwe just jump straight to number two.\n\n714\n00:33:37,620 --> 00:33:38,760\nSo how many domain\ncontrollers do you need?\n\n715\n00:33:38,760 --> 00:33:39,340\n>> Two.\n\n716\n00:33:39,340 --> 00:33:40,260\n>> Two or more.\n\n717\n00:33:40,260 --> 00:33:41,130\nHow many DNS servers?\n\n718\n00:33:41,130 --> 00:33:41,750\n>> Two.\n\n719\n00:33:41,750 --> 00:33:42,460\n>> Exactly.\n\n720\n00:33:42,460 --> 00:33:43,960\nYou pick up the pattern.\n\n721\n00:33:43,960 --> 00:33:47,540\nAnd so that's how it is with NAP.\n\n722\n00:33:47,540 --> 00:33:51,790\nYou're gonna need, you're going to want,\nsorry, two or more.\n\n723\n00:33:51,790 --> 00:33:56,850\nYou could get by with one and boy,\nhaving one HRA handling 50,000 clients?\n\n724\n00:33:56,850 --> 00:33:58,880\nIt's a lot of work.\n\n725\n00:33:58,880 --> 00:34:03,220\nSo when Microsoft says that, they are\nliterally talking about a server that's\n\n726\n00:34:03,220 --> 00:34:09,160\nrunning the Windows Server OS, and\nthe HRA piece of NAP, and that's it.\n\n727\n00:34:09,160 --> 00:34:11,870\nNot running a single other thing.\n\n728\n00:34:11,870 --> 00:34:14,850\nSo when you start combining\nservices together or\n\n729\n00:34:14,850 --> 00:34:17,460\nvirtualizing your host, whatever.\n\n730\n00:34:17,460 --> 00:34:20,900\nWhen you start doing those things,\nthat number starts coming down and\n\n731\n00:34:20,900 --> 00:34:22,220\ndown and down.\n\n732\n00:34:22,220 --> 00:34:24,650\nAnd we can't predict what\nthat's gonna be like for\n\n733\n00:34:24,650 --> 00:34:29,290\nany network with reasonable certainty, so\nyou have to monitor your systems and it-\n\n734\n00:34:29,290 --> 00:34:30,213\n>> Cuz it could go the other way, right?\n\n735\n00:34:30,213 --> 00:34:33,392\nI mean, that's if your system meets\nthe minimum hardware requirements,\n\n736\n00:34:33,392 --> 00:34:34,510\nwe could go the other way.\n\n737\n00:34:34,510 --> 00:34:36,941\nMaybe our system blows those\nminimum requirements away and\n\n738\n00:34:36,941 --> 00:34:38,550\nmaybe we can get a little more out of it.\n\n739\n00:34:38,550 --> 00:34:39,760\nSo it could go either way.\n\n740\n00:34:39,760 --> 00:34:41,130\n>> Yeah, absolutely, yeah.\n\n741\n00:34:41,130 --> 00:34:45,240\nSo in either scenario, we just have\nto keep an eye on our systems.\n\n742\n00:34:45,240 --> 00:34:47,960\nAnd it goes back to the whole\nperformance monitor thing.\n\n743\n00:34:47,960 --> 00:34:50,000\nYou monitor the big four, CPU,\n\n744\n00:34:50,000 --> 00:34:53,030\nmemory, disk I/O, and-\n>> Network.\n\n745\n00:34:53,030 --> 00:34:53,900\n>> Network, sorry, there we go.\n\n746\n00:34:53,900 --> 00:34:55,380\nThose are the four big ones.\n\n747\n00:34:55,380 --> 00:34:59,610\nNow, on an HRA, on a Health Registration\nAuthority, on any of our enforcement\n\n748\n00:34:59,610 --> 00:35:03,199\npoints or whatever, it's really CPU\nthat's gonna be our bottleneck.\n\n749\n00:35:04,770 --> 00:35:08,290\nRAM, yeah, the policies are getting cached\ninto RAM, but the policies are very,\n\n750\n00:35:08,290 --> 00:35:11,080\nvery small, so\nit doesn't use a huge amount of RAM.\n\n751\n00:35:11,080 --> 00:35:15,340\nIt barely touches the disk because again,\nit's all been thrown into RAM.\n\n752\n00:35:15,340 --> 00:35:19,480\nAnd on the network side, well,\nthese little tokens, these certificates,\n\n753\n00:35:19,480 --> 00:35:20,520\nthey're not very large.\n\n754\n00:35:20,520 --> 00:35:23,900\nYou're talking about a couple of frames\nworth of data thrown on the network.\n\n755\n00:35:23,900 --> 00:35:28,300\nSo it's not particularly intensive,\nbut it's CPU.\n\n756\n00:35:28,300 --> 00:35:32,017\nBecause it's having to process this stuff,\nbecause it's having to digitally sign\n\n757\n00:35:32,017 --> 00:35:35,380\nthings, do mathematical operations,\nCPU is typically your bottleneck.\n\n758\n00:35:35,380 --> 00:35:37,660\nNow, like Mike said,\n\n759\n00:35:37,660 --> 00:35:41,590\nif you've got a quad socket-\n>> [LAUGH] Right.\n\n760\n00:35:41,590 --> 00:35:44,541\n>> Six-core CPU system,\nyou've got a ton of cores in there,\n\n761\n00:35:44,541 --> 00:35:47,680\nyou could probably scream and\nhandle a lot of stuff.\n\n762\n00:35:47,680 --> 00:35:50,813\nBut if that server fails,\nboy that's not gonna be any fun.\n\n763\n00:35:50,813 --> 00:35:53,200\nYep, cuz you don't want people coming\nin and not being able to connect.\n\n764\n00:35:53,200 --> 00:35:57,480\nOr worse, you don't want the servers\nfailing and people come in and\n\n765\n00:35:57,480 --> 00:36:00,040\nthey are able to connect,\ncuz we're no longer checking, right?\n\n766\n00:36:00,040 --> 00:36:02,550\n>> Exactly.\n>> Yeah, you definitely don't want that.\n\n767\n00:36:02,550 --> 00:36:03,648\nOr maybe you do, who knows.\n\n768\n00:36:03,648 --> 00:36:06,910\n[LAUGH] But if you went through\nthe trouble of setting up NAP,\n\n769\n00:36:06,910 --> 00:36:11,100\nyou probably don't want people to be able\nto bypass it, and so having redundancy,\n\n770\n00:36:11,100 --> 00:36:14,390\nhaving multiple endpoints in here,\nis really, really important.\n\n771\n00:36:14,390 --> 00:36:15,338\n>> It is.\n\n772\n00:36:15,338 --> 00:36:19,870\n>> All right so, if I decide that I\nwant to plan at a minimum just for\n\n773\n00:36:19,870 --> 00:36:21,940\nredundancy, right, what can I do?\n\n774\n00:36:21,940 --> 00:36:24,510\nWell, it does kind of\ndepend on the endpoint.\n\n775\n00:36:24,510 --> 00:36:29,950\nWhen we talk about DHCP servers,\nwell if you have a DHCP server, inside\n\n776\n00:36:29,950 --> 00:36:34,646\nof it you set what NPS box it's gonna\nreach out to communicate to check people.\n\n777\n00:36:34,646 --> 00:36:35,265\nRight?\n\n778\n00:36:35,265 --> 00:36:37,420\nYou can put more than one server in there.\n\n779\n00:36:37,420 --> 00:36:39,090\nAnd if you put more than one server in,\n\n780\n00:36:39,090 --> 00:36:41,420\nit's still gonna send\neverything to the first server.\n\n781\n00:36:41,420 --> 00:36:44,565\nUnless that first server fails,\nthen it'll go to the second one.\n\n782\n00:36:44,565 --> 00:36:46,360\nAnd it'll move down the list.\n\n783\n00:36:46,360 --> 00:36:50,030\nSo if you're just trying to get\nreliability and uptime, availability,\n\n784\n00:36:50,030 --> 00:36:51,890\nyou just put in more than one server.\n\n785\n00:36:51,890 --> 00:36:53,680\nYou're creating like\na trusted server group.\n\n786\n00:36:53,680 --> 00:36:57,100\nYou put each of the different servers\nin there that it can communicate with.\n\n787\n00:36:57,100 --> 00:37:01,850\nIf you have more than one DHCP server,\nyou can create like pseudo-load balancing.\n\n788\n00:37:01,850 --> 00:37:07,280\nOn your first server, you might list,\nmaybe you call your servers HPS,\n\n789\n00:37:07,280 --> 00:37:10,450\nright, Health Policy Servers,\nso HPS1 and HPS2.\n\n790\n00:37:10,450 --> 00:37:16,500\nAnd so on DHCP server one, you might put\nthe servers in as HPS1 and then HPS2.\n\n791\n00:37:16,500 --> 00:37:20,778\nBut then on your next DHCP server you\nmight reverse it and do HPS2 first and\n\n792\n00:37:20,778 --> 00:37:24,520\nthen HPS1, and that creates like,\nfake load balancing.\n\n793\n00:37:24,520 --> 00:37:28,510\nAnd now they're kind of splitting\ntheir load and if one server fails,\n\n794\n00:37:28,510 --> 00:37:32,250\nthey both just jump over to the same HPS\nat that point and you're in business.\n\n795\n00:37:32,250 --> 00:37:32,780\nThat works.\n\n796\n00:37:33,790 --> 00:37:39,730\nYou could run network load balancing\non the HPS boxes and now they appear\n\n797\n00:37:39,730 --> 00:37:43,090\nas a single system on the network even\nthough there's two machines behind it.\n\n798\n00:37:44,120 --> 00:37:45,860\nI've had mixed results with that.\n\n799\n00:37:45,860 --> 00:37:47,860\nAnytime you're doing\nsecurity authentication and\n\n800\n00:37:47,860 --> 00:37:50,290\nthings, NLB can start to get in the way.\n\n801\n00:37:50,290 --> 00:37:53,950\nSo you can do that, but\nwe don't normally have to.\n\n802\n00:37:53,950 --> 00:37:56,970\nAnd the reasoning there is with DHCP,\nyeah,\n\n803\n00:37:56,970 --> 00:37:59,380\nit just lets you put the servers\nin there and they're in order.\n\n804\n00:37:59,380 --> 00:38:03,800\nBut some of the other enforcement types,\nlike the VPN enforcement type,\n\n805\n00:38:03,800 --> 00:38:07,160\nactually allow us to specify\npriorities and weights.\n\n806\n00:38:07,160 --> 00:38:10,960\nAnd that allows us to manipulate which\nserver we're gonna be reaching out to,\n\n807\n00:38:10,960 --> 00:38:12,820\nand we can actually do\ntrue load balancing.\n\n808\n00:38:12,820 --> 00:38:13,460\nAll right.\n\n809\n00:38:13,460 --> 00:38:19,010\nWe see that done a lot when somebody\nsplits up the parts of HPS.\n\n810\n00:38:19,010 --> 00:38:21,010\nLet me go back to my diagram,\nwhere'd that thing go?\n\n811\n00:38:21,010 --> 00:38:22,260\nHere.\n\n812\n00:38:22,260 --> 00:38:27,161\nSee how I've got my Health Registration\nAuthority and I've got my HPS,\n\n813\n00:38:27,161 --> 00:38:29,220\nmy health policy server.\n\n814\n00:38:29,220 --> 00:38:32,860\nSo I've got them separated\nout as two different boxes.\n\n815\n00:38:32,860 --> 00:38:34,930\nThis, the HRA,\nthat's the one running Radius.\n\n816\n00:38:36,020 --> 00:38:39,048\nAnd HPS, that's the one running\nthe network policy server.\n\n817\n00:38:39,048 --> 00:38:45,038\nWell Radius, boy Radius, it's a very\nold protocol and it's super efficient.\n\n818\n00:38:45,038 --> 00:38:45,758\n>> It really is.\n\n819\n00:38:45,758 --> 00:38:50,110\n>> Radius packets are so small and\nit can handle them very, very rapidly.\n\n820\n00:38:50,110 --> 00:38:54,965\nThat, pretty much in any environment,\nyou really just need one Radius server,\n\n821\n00:38:54,965 --> 00:38:55,540\nreally.\n\n822\n00:38:55,540 --> 00:39:00,210\nEven in some of the larger environments\nI've worked in, we deployed two Radius\n\n823\n00:39:00,210 --> 00:39:02,440\nservers, but it was just for\nredundancy, not because we needed it.\n\n824\n00:39:02,440 --> 00:39:05,620\nI've never seen a Radius server\nthat was maxed out CPU-wise, right?\n\n825\n00:39:06,680 --> 00:39:11,150\nSo you'll probably deploy more than one\nof these guys, just for redundancy.\n\n826\n00:39:11,150 --> 00:39:13,810\nAnd then, on the HRAs\n\n827\n00:39:13,810 --> 00:39:19,260\nyou can specify which health\npolicy server they talk to and\n\n828\n00:39:19,260 --> 00:39:23,450\nhow they go about getting to what policy,\nor what priority and weight we use.\n\n829\n00:39:23,450 --> 00:39:25,100\nSo let me talk about\nthose values real quick.\n\n830\n00:39:26,550 --> 00:39:29,940\nWe can use priority and\nweight two different ways, okay?\n\n831\n00:39:29,940 --> 00:39:33,380\nMy example here on the left, let me see if\nI can make this just a little bit bigger\n\n832\n00:39:35,630 --> 00:39:38,210\nOh, well, that didn't make\nthe text any bigger, did it?\n\n833\n00:39:38,210 --> 00:39:41,904\n[LAUGH] So my example here on the left,\nI've got one routing and\n\n834\n00:39:41,904 --> 00:39:43,360\nremote access server.\n\n835\n00:39:43,360 --> 00:39:46,860\nSo this is my VPN server, right?\n\n836\n00:39:46,860 --> 00:39:51,020\nAnd it is pointing to the health\npolicy servers that it's gonna be\n\n837\n00:39:51,020 --> 00:39:52,640\ncommunicating with, all right?\n\n838\n00:39:52,640 --> 00:39:56,283\nNow these health policy servers might be\nHealth Registration Authorities also.\n\n839\n00:39:56,283 --> 00:40:00,051\nMy routing and remote access server\nmight be the HRA, because routing and\n\n840\n00:40:00,051 --> 00:40:02,744\nremote access is what\nactually powers the HRA also.\n\n841\n00:40:02,744 --> 00:40:04,816\nSo I might have that all combined there.\n\n842\n00:40:04,816 --> 00:40:07,316\nEither way, this scenario works.\n\n843\n00:40:07,316 --> 00:40:10,728\nI can then specify what servers\nI wanna communicate to.\n\n844\n00:40:10,728 --> 00:40:13,640\nAnd when you do that,\nyou specify a priority.\n\n845\n00:40:13,640 --> 00:40:16,730\nThe priority is the order in\nwhich you wanna try them out.\n\n846\n00:40:16,730 --> 00:40:19,190\nSo if I have Priority 1 and Priority 2,\n\n847\n00:40:19,190 --> 00:40:23,990\nI will always go to\nPriority 1 unless it fails.\n\n848\n00:40:23,990 --> 00:40:26,810\nAnd if it fails,\nthen I'll go to Priority 2.\n\n849\n00:40:26,810 --> 00:40:30,640\nAll right, but if Priority 1, if that\nguy's working I'll never go to Priority 2.\n\n850\n00:40:30,640 --> 00:40:31,870\nAll right.\n\n851\n00:40:31,870 --> 00:40:36,350\nBut look what I did here, I set all\nthree of these servers to Priority 1.\n\n852\n00:40:36,350 --> 00:40:37,830\nSo it's a three-way tie.\n\n853\n00:40:37,830 --> 00:40:38,935\nSo what happens there?\n\n854\n00:40:38,935 --> 00:40:40,876\n>> [INAUDIBLE] weight.\n\n855\n00:40:40,876 --> 00:40:44,127\n>> Once there's a three-way\ntie it goes to Weight, and\n\n856\n00:40:44,127 --> 00:40:48,545\nWeight determines the amount of load\nyou're gonna send to that server.\n\n857\n00:40:48,545 --> 00:40:51,790\nAnd I put 33, 33, 33.\n\n858\n00:40:51,790 --> 00:40:55,450\nIt's out of a hundred, I know it doesn't\nadd up perfect, but this does work.\n\n859\n00:40:55,450 --> 00:40:59,850\nAnd so you're going to send 33%\nof your load to the first server.\n\n860\n00:40:59,850 --> 00:41:01,880\nAnd the other third to this server and\n\n861\n00:41:01,880 --> 00:41:04,430\nthe last third to this server,\nso that you're doing\n\n862\n00:41:04,430 --> 00:41:08,490\neven load distribution across the three\ndifferent HPS boxes in this scenario.\n\n863\n00:41:09,660 --> 00:41:12,110\nBy doing this, I get high availability,\n\n864\n00:41:12,110 --> 00:41:16,720\nif one HPS fails I've got two more, and I\nget load balancing to be able to scale up.\n\n865\n00:41:16,720 --> 00:41:20,750\nI already know that radius up here\nis not going to be very busy, and\n\n866\n00:41:20,750 --> 00:41:24,210\nit's reaching out to these guys,\nwho may be very busy,\n\n867\n00:41:24,210 --> 00:41:27,270\nas they're doing all the certificate\nchecks and stuff like that, but\n\n868\n00:41:27,270 --> 00:41:29,899\nI'm distributing that load to make\nthings a little more balanced.\n\n869\n00:41:31,000 --> 00:41:33,520\nAnd if one server fails,\nand I just have 33 and\n\n870\n00:41:33,520 --> 00:41:37,970\n33 here, it's not like it just stops\nsending that other third of the traffic.\n\n871\n00:41:37,970 --> 00:41:39,050\n>> Yeah, that third isn't gonna die.\n\n872\n00:41:39,050 --> 00:41:40,920\n>> It does evenly distribute that too.\n\n873\n00:41:40,920 --> 00:41:43,710\nIt turns these into scaled\npercentages to do it.\n\n874\n00:41:43,710 --> 00:41:44,230\nRight.\n\n875\n00:41:44,230 --> 00:41:48,170\nSo, this is one method of going about\nit where I have a single server\n\n876\n00:41:48,170 --> 00:41:50,090\nfront ending for\nmultiple servers on the backend.\n\n877\n00:41:51,550 --> 00:41:55,717\nAnother variation is what I mentioned\nearlier where I have Priority 1 and\n\n878\n00:41:55,717 --> 00:41:56,530\nPriority 2.\n\n879\n00:41:56,530 --> 00:41:59,050\nSo on my first server here\nwith the green lines,\n\n880\n00:41:59,050 --> 00:42:03,410\nyou'll see that I've got Priority 1,\nsend 100% of the load to this server.\n\n881\n00:42:04,530 --> 00:42:09,140\nAnd then Priority 2,\nsend 100% of the load to this server.\n\n882\n00:42:09,140 --> 00:42:12,920\nI am going to send all my\ntraffic to this first server.\n\n883\n00:42:12,920 --> 00:42:13,930\nUnless it fails.\n\n884\n00:42:13,930 --> 00:42:18,180\nIf it fails, I'll then send all of\nmy traffic down to this server.\n\n885\n00:42:18,180 --> 00:42:19,660\nNo load balancing.\n\n886\n00:42:19,660 --> 00:42:20,950\nJust reliability.\n\n887\n00:42:22,760 --> 00:42:27,100\nThen I take my other RRAS server and\nI just set it the other way around.\n\n888\n00:42:27,100 --> 00:42:28,060\nRight?\n\n889\n00:42:28,060 --> 00:42:31,640\nPriority 1, 100% of my traffic\nis going to this server.\n\n890\n00:42:31,640 --> 00:42:35,250\nPriority 2, 100% of my traffic\nis going to this server.\n\n891\n00:42:35,250 --> 00:42:38,510\nSo, unless this server fails,\nI won't send any traffic up here.\n\n892\n00:42:38,510 --> 00:42:42,210\nRight?\nThis server will use this HPS exclusively\n\n893\n00:42:42,210 --> 00:42:42,850\nand the other one, too.\n\n894\n00:42:42,850 --> 00:42:46,894\nSo, they each basically have their\nown dedicated HPS that they use,\n\n895\n00:42:46,894 --> 00:42:48,380\ndistributing the load.\n\n896\n00:42:48,380 --> 00:42:53,020\nBut, I also get high availability, if one\nfails, the other one's still running and\n\n897\n00:42:53,020 --> 00:42:54,450\nthey'll both just use it.\n\n898\n00:42:54,450 --> 00:43:00,350\nSo if this HPS here, I knew I'd find a use\nfor this squiggly line icon at some point.\n\n899\n00:43:01,500 --> 00:43:02,820\n>> Wow, that one died.\n\n900\n00:43:02,820 --> 00:43:06,110\n>> We've joked about this icon before\nbecause I have no idea what it is.\n\n901\n00:43:06,110 --> 00:43:09,620\nBut if that node dies.\n\n902\n00:43:09,620 --> 00:43:10,710\nWe'll make it purple.\n\n903\n00:43:10,710 --> 00:43:12,860\nSo if it dies, well no big deal, right?\n\n904\n00:43:12,860 --> 00:43:15,440\nThis guy just starts\nusing this one down here.\n\n905\n00:43:15,440 --> 00:43:17,565\nSo 100% of the workload from\nthis server is coming down here.\n\n906\n00:43:17,565 --> 00:43:20,300\n100% of the workload from this\nserver is coming down here.\n\n907\n00:43:20,300 --> 00:43:25,280\nThat one server is now carrying a full\nload, but it could probably do it just\n\n908\n00:43:25,280 --> 00:43:31,300\nfine because we're not normally talking\nabout vast amounts of traffic, all right.\n\n909\n00:43:31,300 --> 00:43:35,220\nAnd, at 50,000 potential clients on a\nsingle node, we've got some room to scale.\n\n910\n00:43:35,220 --> 00:43:38,850\nYou've gotta have a pretty big network\nto warrant breaking this stuff out.\n\n911\n00:43:39,900 --> 00:43:42,050\nYeah, so even on the exam,\n\n912\n00:43:42,050 --> 00:43:46,300\nit's usually a pretty rare\nquestion when they go beyond that.\n\n913\n00:43:46,300 --> 00:43:50,728\nSo most of what we're talking about is\ngonna be built around the idea of high\n\n914\n00:43:50,728 --> 00:43:52,711\navailability and reliability.\n\n915\n00:43:53,795 --> 00:43:54,330\nAll right.\n\n916\n00:43:54,330 --> 00:43:56,000\nSo keep that in mind\nas you do your design.\n\n917\n00:43:56,000 --> 00:43:57,970\nYou can bring in multiple components.\n\n918\n00:43:57,970 --> 00:43:59,960\nYou're already gonna have multiple\ncomponents just with your\n\n919\n00:43:59,960 --> 00:44:01,060\ngeneral network, right?\n\n920\n00:44:01,060 --> 00:44:04,520\nYou'll have multiple switches, you'll\nhave multiple wireless access points.\n\n921\n00:44:04,520 --> 00:44:05,820\nAnd they're all reaching in.\n\n922\n00:44:05,820 --> 00:44:09,530\nYou probably have multiple domain\ncontrollers just to handle logon requests.\n\n923\n00:44:09,530 --> 00:44:14,450\nNow domain controllers are actually\nbusier than network policy servers.\n\n924\n00:44:14,450 --> 00:44:18,520\nCuz network policy servers only do\nwork when you connect to the network.\n\n925\n00:44:18,520 --> 00:44:20,930\nBut a domain controller is authenticating\n\n926\n00:44:20,930 --> 00:44:23,335\nevery time you ask as a network\nas a network resource.\n\n927\n00:44:23,335 --> 00:44:25,740\nYou get that token, and\nit's gotta validate that.\n\n928\n00:44:25,740 --> 00:44:31,270\nSo your DCs are likely much busier\nthan HPS boxes, your policy servers.\n\n929\n00:44:31,270 --> 00:44:37,240\nNow if you deployed your policy server\non your DC, it's not a very good mix.\n\n930\n00:44:37,240 --> 00:44:39,550\nSo they do contend with\neach other a good bit.\n\n931\n00:44:39,550 --> 00:44:42,100\nCPU, both of them are CPU intensive.\n\n932\n00:44:42,100 --> 00:44:45,100\nSo it'll start to bring that number down.\n\n933\n00:44:45,100 --> 00:44:46,000\nBut that's okay.\n\n934\n00:44:46,000 --> 00:44:48,900\nYou know, you can deploy more\nservers to meet that need.\n\n935\n00:44:48,900 --> 00:44:51,990\nI prefer to separate them out, but you\nknow, there's licensing costs with that.\n\n936\n00:44:51,990 --> 00:44:55,230\nSo your environment may or\nmay not be able to foot the bill for\n\n937\n00:44:55,230 --> 00:44:56,140\ndoing too many of those.\n\n938\n00:44:57,830 --> 00:44:58,470\nAll right.\n\n939\n00:44:58,470 --> 00:45:03,700\nJust keep in mind that redundancy and\nload balancing is pretty straightforward.\n\n940\n00:45:03,700 --> 00:45:04,600\nIf you go and\n\n941\n00:45:04,600 --> 00:45:09,290\nread each of the capacity articles they've\ngot, they all pretty much read the same.\n\n942\n00:45:09,290 --> 00:45:11,630\nSo if we go to health policy servers, and\n\n943\n00:45:11,630 --> 00:45:15,040\nwe start to read what they're\nrecommending, we can see it right here.\n\n944\n00:45:15,040 --> 00:45:18,099\nHere's the NAP enforcement server,\nwhich is probably your routing and\n\n945\n00:45:18,099 --> 00:45:19,390\nremote access box.\n\n946\n00:45:19,390 --> 00:45:21,930\nHere they're just doing two servers.\n\n947\n00:45:21,930 --> 00:45:26,125\nThey've got Priority 1, Weight 50,\nPriority 1, Weight 50, so they're sending\n\n948\n00:45:26,125 --> 00:45:29,580\n50% of the load to the two servers,\nand they're achieving that balancing.\n\n949\n00:45:29,580 --> 00:45:32,751\nEven here they don't give\nyou a number of clients,\n\n950\n00:45:32,751 --> 00:45:35,450\na tipping point to where you go to two.\n\n951\n00:45:35,450 --> 00:45:38,300\nIt's really just being done here for\nreliability.\n\n952\n00:45:38,300 --> 00:45:39,640\nThey're replicating their policies.\n\n953\n00:45:39,640 --> 00:45:44,560\nIf one fails, the other one takes over.\n\n954\n00:45:44,560 --> 00:45:46,730\nSo that's the health policy server.\n\n955\n00:45:46,730 --> 00:45:49,690\nIf we go to enforcement side,\nwell enforcement,\n\n956\n00:45:49,690 --> 00:45:54,210\nthat's where we start to get into\nour IPsec, VPN, DACP, those guys.\n\n957\n00:45:54,210 --> 00:45:58,190\nSo it's just whatever\nredundancy you have on them.\n\n958\n00:45:58,190 --> 00:46:03,770\nSo like here's our NAP clients, connecting\nto, they just show them as HRAs right?\n\n959\n00:46:03,770 --> 00:46:06,880\nSo these might be our routing\nremote access or whatever.\n\n960\n00:46:06,880 --> 00:46:10,760\nYou just deploy more than one of them,\nit's basically that.\n\n961\n00:46:11,990 --> 00:46:16,105\n>> That a lot of times is more a normal\nworkload than anything to do with\n\n962\n00:46:16,105 --> 00:46:17,640\nNAP really.\n\n963\n00:46:17,640 --> 00:46:20,390\nAnd we're deploying more than\none remote access server.\n\n964\n00:46:20,390 --> 00:46:21,990\nWe look at a lot of clients\ntrying to connect and\n\n965\n00:46:21,990 --> 00:46:24,110\nnot really anything to do with net.\n\n966\n00:46:24,110 --> 00:46:27,210\n>> The hardest one to plan for\nare the remediation servers.\n\n967\n00:46:28,370 --> 00:46:30,790\nHow many servers do you need\nin your remediation network?\n\n968\n00:46:30,790 --> 00:46:32,960\nI don't know, right?\n\n969\n00:46:32,960 --> 00:46:35,780\nHow many of your clients are going\nto fail their health checks?\n\n970\n00:46:35,780 --> 00:46:39,025\n>> Hopefully not too many, but-\n>> If none of your clients fail\n\n971\n00:46:39,025 --> 00:46:41,930\nthe health check, then nobody ever goes\nin your remediation quarantine area,\n\n972\n00:46:41,930 --> 00:46:43,840\nand you don't really need much in there.\n\n973\n00:46:43,840 --> 00:46:44,470\nRight?\n\n974\n00:46:44,470 --> 00:46:47,350\n>> Or your SUS server fails, and all of a\nsudden none of your clients have got their\n\n975\n00:46:47,350 --> 00:46:50,070\nupdates in the last two days,\nand they all dump over in there.\n\n976\n00:46:50,070 --> 00:46:52,330\n>> Yeah, that would be a nightmare,\nwouldn't it?\n\n977\n00:46:52,330 --> 00:46:53,430\nVery possible though, right?\n\n978\n00:46:53,430 --> 00:46:55,270\nRealistic things that we need to plan for.\n\n979\n00:46:55,270 --> 00:46:58,010\nSo the remediation one, that's\nthe one that's the most up in the air.\n\n980\n00:46:58,010 --> 00:47:00,230\nYou may not even bother with\nhigh availability in there,\n\n981\n00:47:00,230 --> 00:47:03,110\nbecause these are already clients\nthat have failed compliance.\n\n982\n00:47:03,110 --> 00:47:06,790\nAnd so you might not worry about their\nconnectivity to any high degree.\n\n983\n00:47:06,790 --> 00:47:12,069\nSo, that's actually the shortest of the\nMicrosoft articles just like one screen.\n\n984\n00:47:12,069 --> 00:47:13,440\n[LAUGH] And that's it.\n\n985\n00:47:13,440 --> 00:47:15,420\nBut they do have some\ninteresting notes here,\n\n986\n00:47:15,420 --> 00:47:18,900\nlike do remediation servers perform\nother functions on your network?\n\n987\n00:47:18,900 --> 00:47:20,803\nAnd you might ask yourself, wait a minute,\n\n988\n00:47:20,803 --> 00:47:22,920\nhow could it perform\nfunctions other than this?\n\n989\n00:47:22,920 --> 00:47:28,411\nWell, if you have a WSUS server,\nit might be servicing the quarantine,\n\n990\n00:47:28,411 --> 00:47:31,820\nbut also servicing the regular network.\n\n991\n00:47:31,820 --> 00:47:35,670\nBecause we use IP filters to create\nthat remediation zone normally.\n\n992\n00:47:35,670 --> 00:47:37,810\nTie them into that individual network.\n\n993\n00:47:37,810 --> 00:47:40,980\nAnd so they might not have full\naccess to what that server offers.\n\n994\n00:47:40,980 --> 00:47:43,520\nThe server might be offering\nother services that have been\n\n995\n00:47:45,760 --> 00:47:47,880\nblocked from the beginning.\n\n996\n00:47:47,880 --> 00:47:52,250\nCertificate authorities, these guys depend\non our rates of issuance of certificates.\n\n997\n00:47:52,250 --> 00:47:55,600\nMost certificates that we issue are good\nfor, one year is the default, isn't it?\n\n998\n00:47:55,600 --> 00:47:56,960\n>> One year is the default.\n\n999\n00:47:56,960 --> 00:47:58,895\n>> Used to be two, but now it's one.\n\n1000\n00:47:58,895 --> 00:48:02,937\nSo when people are just checking in\nonce a year, are your CAs very busy?\n\n1001\n00:48:02,937 --> 00:48:03,873\n>> No.\n\n1002\n00:48:03,873 --> 00:48:07,022\n>> Again, it's not even,\nwell, I will say this.\n\n1003\n00:48:07,022 --> 00:48:11,674\nIf you have a massive network, and you\npush out a new GPO that says I want all my\n\n1004\n00:48:11,674 --> 00:48:14,610\nmachines to register in and\nget certificates.\n\n1005\n00:48:14,610 --> 00:48:18,122\nThat night things\nare gonna be pretty busy.\n\n1006\n00:48:18,122 --> 00:48:22,250\nBut on a routine basis,\nyour CAs are not very busy.\n\n1007\n00:48:22,250 --> 00:48:23,970\nIn fact, the busiest part for\n\n1008\n00:48:23,970 --> 00:48:27,250\nthem is all the people verifying\nthe certificate revocation list.\n\n1009\n00:48:27,250 --> 00:48:29,450\n>> Yeah, checking to see if\nit's still valid, exactly.\n\n1010\n00:48:29,450 --> 00:48:31,980\n>> Cuz you might request\na certificate once a year, but\n\n1011\n00:48:31,980 --> 00:48:36,020\nyou request that CRL all the time\nwhen you're accessing resources.\n\n1012\n00:48:36,020 --> 00:48:40,100\nSo it's easy to mix up what you\nshould be looking for on the CAs.\n\n1013\n00:48:40,100 --> 00:48:41,480\nAnd your health policy servers,\n\n1014\n00:48:41,480 --> 00:48:44,300\nthey're checking that certificate\nrevocation list too, right.\n\n1015\n00:48:44,300 --> 00:48:47,450\nCuz they're having to reach out and\nsay is this certificate valid?\n\n1016\n00:48:47,450 --> 00:48:49,180\nAnd it's the CRL that does it.\n\n1017\n00:48:49,180 --> 00:48:51,570\nSo, we've got be able to\nmonitor that on the CA.\n\n1018\n00:48:51,570 --> 00:48:58,140\nGenerally, my rule of thumb Is that, when\nwe have a health policy server in place.\n\n1019\n00:48:58,140 --> 00:49:03,290\nIf I have two health policy servers,\nI want to have at least two CAs behind it.\n\n1020\n00:49:03,290 --> 00:49:06,650\nIf I have five health policy servers,\nI usually want five CAs behind it.\n\n1021\n00:49:06,650 --> 00:49:10,310\nKind of keep the numbers even because\nthey're doing a similar workload.\n\n1022\n00:49:10,310 --> 00:49:11,730\n>> Right.\n>> One's talking to the other and\n\n1023\n00:49:11,730 --> 00:49:12,710\ndoing it pretty frequently.\n\n1024\n00:49:13,870 --> 00:49:16,070\nBut you might find that's overkill for\nyour environment.\n\n1025\n00:49:16,070 --> 00:49:17,581\nYou've got to monitor the CPUs.\n\n1026\n00:49:17,581 --> 00:49:19,280\nRight, you know monitor\nthat process utilization.\n\n1027\n00:49:22,090 --> 00:49:25,800\nNow in this case when it\ncomes to multiple CAs,\n\n1028\n00:49:25,800 --> 00:49:28,530\nit's a little bit more tricky to\nspecify who you're going to connect to.\n\n1029\n00:49:28,530 --> 00:49:29,420\nBecause for\n\n1030\n00:49:29,420 --> 00:49:33,160\nexample with a certificate replication\nlist, it's just a single URL, right?\n\n1031\n00:49:33,160 --> 00:49:36,000\nCan't really specify more than one server.\n\n1032\n00:49:36,000 --> 00:49:40,370\nSo, you're almost always gonna couple this\nwith network load balancing; with NLB.\n\n1033\n00:49:40,370 --> 00:49:45,630\nSo that you'll have one URL but\nit actually points to more than one CA.\n\n1034\n00:49:45,630 --> 00:49:48,660\nYou could do Round Robin DNS but\nthat's a lot less reliable than NLB.\n\n1035\n00:49:50,590 --> 00:49:52,320\nThat Round Robin DNS, I don't know.\n\n1036\n00:49:52,320 --> 00:49:53,690\nI don't know why that's still around.\n\n1037\n00:49:53,690 --> 00:49:55,544\n[LAUGH]\n>> [LAUGH] It served its purpose for\n\n1038\n00:49:55,544 --> 00:49:56,843\na little while, I think.\n\n1039\n00:49:56,843 --> 00:49:59,675\n>> [LAUGH] Younger and\nmore innocent Internet.\n\n1040\n00:49:59,675 --> 00:50:01,920\n>> [LAUGH]\n>> All right.\n\n1041\n00:50:01,920 --> 00:50:04,710\nAnd then the last one is just\nthe health requirement servers.\n\n1042\n00:50:04,710 --> 00:50:08,780\nYou know, this is Is where we're\ndefining our policies, and typically,\n\n1043\n00:50:08,780 --> 00:50:11,540\nthis is the same as our\nhealth policy server.\n\n1044\n00:50:11,540 --> 00:50:14,530\nIf you split it off,\nthis becomes like your management station.\n\n1045\n00:50:14,530 --> 00:50:16,650\nIt's rarely something you\nneed to make redundant,\n\n1046\n00:50:16,650 --> 00:50:19,950\nbecause if it goes down,\nyour policies are all stored in the AD.\n\n1047\n00:50:19,950 --> 00:50:20,810\nThey still run.\n\n1048\n00:50:20,810 --> 00:50:24,530\nIt's fine, so in this case we don't\nreally even sweat that too much.\n\n1049\n00:50:24,530 --> 00:50:27,630\nSo, it just comes down to down\nto whether you're performing\n\n1050\n00:50:27,630 --> 00:50:30,520\nother functions on the network or not.\n\n1051\n00:50:30,520 --> 00:50:31,177\nBut, planning for\n\n1052\n00:50:31,177 --> 00:50:33,795\ncapacity on this is really going to\nvary from environment to environment.\n\n1053\n00:50:33,795 --> 00:50:35,685\nJust remember Microsoft's rule of thumb,\n\n1054\n00:50:35,685 --> 00:50:37,992\non the exam they always stick\nto their rules of thumb.\n\n1055\n00:50:37,992 --> 00:50:42,064\nSo, 20 requests per second,\nthe equivalent of 50,000 machines,\n\n1056\n00:50:42,064 --> 00:50:45,450\nas long as you get that standard\n24 hour SoH validity period.\n\n1057\n00:50:45,450 --> 00:50:48,310\nSo, that's our litmus test.\n\n1058\n00:50:48,310 --> 00:50:52,420\nBut otherwise, it just boils down\nto bring in multiple servers, and\n\n1059\n00:50:52,420 --> 00:50:55,715\nyou can use priorities and weights or\nyou can use network load balancing and\n\n1060\n00:50:55,715 --> 00:50:57,325\nthat'll be to achieve the same goal.\n\n1061\n00:50:57,325 --> 00:50:59,995\nAll right.\n\n1062\n00:50:59,995 --> 00:51:02,005\nMike, can you think of\nanything else to throw in?\n\n1063\n00:51:02,005 --> 00:51:02,925\n>> Let's see.\n\n1064\n00:51:02,925 --> 00:51:06,765\nI think one more thing they call out\non there is monitoring for compliance.\n\n1065\n00:51:06,765 --> 00:51:08,785\nThere's a couple of things we can do for\nthere.\n\n1066\n00:51:08,785 --> 00:51:13,565\nIt all ties back into system center\nconfiguration manager basically.\n\n1067\n00:51:13,565 --> 00:51:14,795\nThere's a Microsoft pack.\n\n1068\n00:51:14,795 --> 00:51:15,985\nI think we talked about it the other day.\n\n1069\n00:51:15,985 --> 00:51:19,440\nI can't remember what we were,\nwhat was it we were doing in that episode?\n\n1070\n00:51:19,440 --> 00:51:21,422\nBut anyway, there's different\npacks you can download for\n\n1071\n00:51:21,422 --> 00:51:23,718\nconfiguration manager-\n>> Oh the DHCP monitor is what we\n\n1072\n00:51:23,718 --> 00:51:24,235\nwere doing.\n\n1073\n00:51:24,235 --> 00:51:26,160\nYep, talking about SCOM.\n\n1074\n00:51:26,160 --> 00:51:28,540\n>> Yeah.\nSo you can download that for NAP.\n\n1075\n00:51:28,540 --> 00:51:31,990\nThere's one that we will install in\nsystem center configuration manager,\n\n1076\n00:51:31,990 --> 00:51:34,680\nand it gives us access to\na couple of different things.\n\n1077\n00:51:34,680 --> 00:51:37,270\nOne is gonna be all\nthe reports we can generate.\n\n1078\n00:51:37,270 --> 00:51:38,316\nTons of reports.\n\n1079\n00:51:38,316 --> 00:51:41,440\nThere's planning reports and\ndeployment reports and\n\n1080\n00:51:41,440 --> 00:51:43,720\nmonitoring reports that we can look at.\n\n1081\n00:51:43,720 --> 00:51:47,690\nLike the planning reports might show you\nhow many computers are out there right\n\n1082\n00:51:47,690 --> 00:51:51,770\nnow, that if you implemented\nthis particular set of\n\n1083\n00:51:51,770 --> 00:51:53,580\nhealth requirements would be compliant.\n\n1084\n00:51:53,580 --> 00:51:55,570\nOr would be non-compliant.\n\n1085\n00:51:55,570 --> 00:51:57,040\nMonitoring wise,\n\n1086\n00:51:57,040 --> 00:52:01,560\nyou know how many nodes have been sent\nout to remediation in the last 24 hours?\n\n1087\n00:52:01,560 --> 00:52:05,680\nHow many nodes have failed remediation in\na period of time and things like that.\n\n1088\n00:52:05,680 --> 00:52:10,174\nSo, a few different reports that we can\nget as well as some performance counters\n\n1089\n00:52:10,174 --> 00:52:12,260\nthat we can get through there.\n\n1090\n00:52:12,260 --> 00:52:14,610\nStill monitored through the system\ncenter configuration manager.\n\n1091\n00:52:14,610 --> 00:52:19,640\nDoesn't add it to our perfmon console\nlike a lot of the other ones do.\n\n1092\n00:52:19,640 --> 00:52:21,060\nSo it ties into there.\n\n1093\n00:52:21,060 --> 00:52:23,792\nBut we can take a look\nat how its performing,\n\n1094\n00:52:23,792 --> 00:52:27,660\nis it what we've been talking about all of\nthis planning and we were doing this so\n\n1095\n00:52:27,660 --> 00:52:30,640\nwe could make sure that we've\nmaintained that level of performance.\n\n1096\n00:52:30,640 --> 00:52:34,470\nAnd that our network access protection\nisn't slowing everything down and\n\n1097\n00:52:34,470 --> 00:52:37,880\ncausing delays in our normal,\nour users ability to do their job.\n\n1098\n00:52:39,300 --> 00:52:41,740\nSo there's a few different\ncounters to talk about.\n\n1099\n00:52:43,640 --> 00:52:48,310\nCompliance being out of date, or\nsoftware updates not installed, and\n\n1100\n00:52:48,310 --> 00:52:48,950\nthings like that.\n\n1101\n00:52:48,950 --> 00:52:49,980\nSo you just have to go.\n\n1102\n00:52:49,980 --> 00:52:51,125\nIt's a free download.\n\n1103\n00:52:51,125 --> 00:52:54,810\nConfiguration manager's not free, but\nthe pack is a free download that you can\n\n1104\n00:52:54,810 --> 00:52:57,739\nimport into there and then give you\naccess to all that information.\n\n1105\n00:52:59,640 --> 00:53:03,530\n>> That is incredibly useful,\ncuz when you're deploying this technology,\n\n1106\n00:53:03,530 --> 00:53:06,190\nyou need to know how many people\nare in remediation and so on.\n\n1107\n00:53:06,190 --> 00:53:08,730\nSo, you can keep an eye on that and\nSCOM will help you do that.\n\n1108\n00:53:08,730 --> 00:53:10,990\n>> And it can help you keep\nan eye on your capacity planning.\n\n1109\n00:53:10,990 --> 00:53:13,780\nYou might find that yeah,\nwhat you set up initially was great, but\n\n1110\n00:53:13,780 --> 00:53:15,130\nour network has grown.\n\n1111\n00:53:15,130 --> 00:53:16,560\nAnd things are slowing down.\n\n1112\n00:53:16,560 --> 00:53:21,320\nWhich component is it in my NAP\nsolution that's being my bottleneck?\n\n1113\n00:53:21,320 --> 00:53:23,855\nSo I can use this information\nto see where I need to upgrade,\n\n1114\n00:53:23,855 --> 00:53:27,190\nwhere maybe I need to add another\nserver to one of those components.\n\n1115\n00:53:27,190 --> 00:53:28,740\n>> You know,\nI'm glad you mentioned bottleneck,\n\n1116\n00:53:28,740 --> 00:53:31,420\nit just made me think of something\nthat I forgot to mention earlier.\n\n1117\n00:53:31,420 --> 00:53:34,630\nIn the network design that I was using,\nthis diagram here that I\n\n1118\n00:53:34,630 --> 00:53:39,470\nused to kind of show NAP, I was designing\nit around the idea of a headquarters.\n\n1119\n00:53:39,470 --> 00:53:40,280\nAll right?\n\n1120\n00:53:40,280 --> 00:53:43,640\nBut what if we have branch offices, right?\n\n1121\n00:53:43,640 --> 00:53:46,330\nAnd we wanna provide NAP\nat the branch offices too.\n\n1122\n00:53:46,330 --> 00:53:51,040\nWe might have 802.1x capable switches and\naccess points out at the branches and so\n\n1123\n00:53:51,040 --> 00:53:53,060\nwe wanna provide that kind\nof authentication there.\n\n1124\n00:53:53,060 --> 00:53:53,610\nYou can.\nRight.\n\n1125\n00:53:53,610 --> 00:53:54,950\nYou certainly can.\n\n1126\n00:53:54,950 --> 00:54:01,020\nAnd they can even tie back to the HRAs and\nHPSs that are here set your headquarters.\n\n1127\n00:54:01,020 --> 00:54:05,430\nBut you may find that if you\nhave an unreliable link,\n\n1128\n00:54:05,430 --> 00:54:09,240\nthat people have problems getting\nconnected to the network.\n\n1129\n00:54:09,240 --> 00:54:12,330\nOr if it's an overwhelmed link,\nif bandwidth is low,\n\n1130\n00:54:12,330 --> 00:54:15,720\nthat people take a long time to\nget connected to the network.\n\n1131\n00:54:15,720 --> 00:54:19,010\nSo that's another scenario where we\nmight need to deploy more systems,\n\n1132\n00:54:19,010 --> 00:54:21,466\neven though our systems that\nwe have aren't at load.\n\n1133\n00:54:21,466 --> 00:54:24,350\nIf we don't have the WAN\ninfrastructure to support it,\n\n1134\n00:54:24,350 --> 00:54:28,080\nwe may need to deploy more\nsystems at our branch offices.\n\n1135\n00:54:28,080 --> 00:54:29,660\n>> Right.\n>> Hopefully you don't, right?\n\n1136\n00:54:29,660 --> 00:54:32,410\nCuz you hate to create more\ninfrastructure if you don't need to.\n\n1137\n00:54:32,410 --> 00:54:35,970\nBut if you've got branch offices,\nI don't think I have, yeah, here.\n\n1138\n00:54:35,970 --> 00:54:39,910\nSo, if you have a branch office, and when\nthese people fire up, they boot up and\n\n1139\n00:54:39,910 --> 00:54:41,090\nthey hit a switch.\n\n1140\n00:54:41,090 --> 00:54:42,690\nRight, like this guy.\n\n1141\n00:54:42,690 --> 00:54:46,500\nAnd then the switch has to\nphone home across a VPN tunnel,\n\n1142\n00:54:46,500 --> 00:54:49,010\nback here to get to an HRA, and so on.\n\n1143\n00:54:49,010 --> 00:54:52,050\nIf that's having to happen\nevery time somebody plugs in,\n\n1144\n00:54:52,050 --> 00:54:56,650\nthe longer that takes the more likely you\nare to miss their DHCP request window and\n\n1145\n00:54:56,650 --> 00:55:00,200\nother things like that, and you start\ngetting connectivity issues, right?\n\n1146\n00:55:00,200 --> 00:55:05,496\nSo in those scenarios we may\nneed to deploy an actual HRA and\n\n1147\n00:55:05,496 --> 00:55:08,190\nHPS right there at the branch office.\n\n1148\n00:55:08,190 --> 00:55:11,210\nAnd it can share a configuration with\nwhat you have at the home office so\n\n1149\n00:55:11,210 --> 00:55:14,880\nit's not like you're having to\nreinvent the wheel out there, but\n\n1150\n00:55:14,880 --> 00:55:18,400\nit would be additional infrastructure\nto be able to support that client.\n\n1151\n00:55:18,400 --> 00:55:21,210\nIf we didn't have that,\nit's gotta phone home,\n\n1152\n00:55:21,210 --> 00:55:24,400\nif the WAN link goes down,\nit can't phone home.\n\n1153\n00:55:24,400 --> 00:55:27,870\nAnd then you're in that situation where,\ndo you allow non-compliant\n\n1154\n00:55:27,870 --> 00:55:31,500\nmachines on your network, or\ndo you just shut the network down, right?\n\n1155\n00:55:31,500 --> 00:55:33,450\nWe don't know, it depends on your company.\n\n1156\n00:55:33,450 --> 00:55:36,300\n>> I know that branch office workers\nare saying, just shut it down,\n\n1157\n00:55:36,300 --> 00:55:37,325\nI'm taking the day off.\n\n1158\n00:55:37,325 --> 00:55:39,114\n[LAUGH]\n>> [LAUGH] Until they don't get\n\n1159\n00:55:39,114 --> 00:55:39,760\npaid for that day.\n\n1160\n00:55:39,760 --> 00:55:42,010\nThen they're not so happy about it.\n\n1161\n00:55:42,010 --> 00:55:45,760\nThose are some of the different concerns\nwe have when we start planning for\n\n1162\n00:55:45,760 --> 00:55:50,970\nplacement on this stuff, just remember\nyour primary concern is redundancy.\n\n1163\n00:55:50,970 --> 00:55:53,420\nRedundancy to ensure the system\nis always available, and\n\n1164\n00:55:53,420 --> 00:55:57,040\nthat only compliant systems\nare allowed on the network.\n\n1165\n00:55:57,040 --> 00:56:00,180\nBut you could have significant load,\nin which case you're gonna\n\n1166\n00:56:00,180 --> 00:56:03,540\nneed to start increasing the amount\nof servers to handle that load.\n\n1167\n00:56:03,540 --> 00:56:04,580\nAll right.\n\n1168\n00:56:04,580 --> 00:56:09,350\nWell, I know it's a short episode, but\nthat's pretty much NAP in a nutshell.\n\n1169\n00:56:09,350 --> 00:56:10,860\n>> It is.\n>> The other part of this objective\n\n1170\n00:56:10,860 --> 00:56:13,320\njumps into implementation,\nwe get a little more hands-on.\n\n1171\n00:56:13,320 --> 00:56:15,850\nSo we'll save that for the next episode.\n\n1172\n00:56:15,850 --> 00:56:19,990\nBut for today, that's a pretty good\nstopping point for us right there.\n\n1173\n00:56:19,990 --> 00:56:21,220\n>> I think so.\n\n1174\n00:56:21,220 --> 00:56:24,847\n>> All right, well let me just remind you\nguys if you have questions on any of this,\n\n1175\n00:56:24,847 --> 00:56:26,540\nyou're always free to ask.\n\n1176\n00:56:26,540 --> 00:56:27,390\nLive during the show,\n\n1177\n00:56:27,390 --> 00:56:31,710\nyou can go to itpro.tv/live, and\nyou'll see the chat box beneath the video.\n\n1178\n00:56:31,710 --> 00:56:34,860\nPost your questions there,\nwe monitor and answer during the show.\n\n1179\n00:56:34,860 --> 00:56:38,560\nIf you have questions after the show,\nuse our Q and A forums.\n\n1180\n00:56:38,560 --> 00:56:42,270\nThere's a link at the top of every page\non the ITProTV site that says Q and A.\n\n1181\n00:56:42,270 --> 00:56:46,380\nClick on it, it'll take you to our forums,\nand you can post your question there.\n\n1182\n00:56:46,380 --> 00:56:47,200\nWe monitor and answer.\n\n1183\n00:56:48,260 --> 00:56:50,500\nAll right,\nwell I hope you guys enjoyed today's show.\n\n1184\n00:56:50,500 --> 00:56:53,610\nSigning off for ITProvTV, I'm Don Pezet\n>> And I'm Mike Rodrick.\n\n1185\n00:56:53,610 --> 00:56:55,350\n>> And we will see you next time.\n\n1186\n00:56:55,350 --> 00:57:05,350\n[MUSIC]\n\n1187\n00:57:07,621 --> 00:57:13,560\n[SOUND]\n\n",
          "vimeoId": "107698635"
        },
        {
          "description": "",
          "length": "6038",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/008-Planning-Network-Access-Pt3.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/008-Planning-Network-Access-Pt3-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/008-Planning-Network-Access-Pt3-sm.jpg",
          "title": "Planning Network Access Part 3",
          "transcript": "1\n00:00:00,378 --> 00:00:10,378\n[MUSIC]\n\n2\n00:00:14,824 --> 00:00:20,034\n[NOISE]\n\n3\n00:00:20,034 --> 00:00:29,486\n[MUSIC]\n\n4\n00:00:29,486 --> 00:00:32,180\nAll right good morning,\ngood afternoon and good evening.\n\n5\n00:00:32,180 --> 00:00:34,430\nWelcome back to another\nepisode of ITProTV.\n\n6\n00:00:34,430 --> 00:00:37,500\nI'm your host Don Pezet back with Mr.\nMike Rodrick.\n\n7\n00:00:37,500 --> 00:00:38,230\nHow's it going, Mike?\n\n8\n00:00:38,230 --> 00:00:39,610\n>> Great.\nHow are you doing today, Don?\n\n9\n00:00:39,610 --> 00:00:40,900\n>> I am doing swell.\n\n10\n00:00:40,900 --> 00:00:43,040\nI'm kind of excited about today's episode.\n\n11\n00:00:43,040 --> 00:00:47,180\nWe're doing planning for\nnetwork access part three,\n\n12\n00:00:47,180 --> 00:00:48,491\nwe're really branching out here.\n\n13\n00:00:48,491 --> 00:00:52,350\nI think this is First Blood Part Two,\nThe Return of Rambo.\n\n14\n00:00:52,350 --> 00:00:57,674\nAnyhow, so we kind of continued\nanonymous for however many episodes\n\n15\n00:00:57,674 --> 00:01:03,280\nwe have done now they've all been\nabout planning, conceptual, why.\n\n16\n00:01:03,280 --> 00:01:04,943\nNow we're hitting this little section,\n\n17\n00:01:04,943 --> 00:01:08,002\nthis little island of implement that\nfalls in the middle of the objectives.\n\n18\n00:01:08,002 --> 00:01:12,357\nSo, here's where we get to the part where\nMicrosoft specifically calls out some\n\n19\n00:01:12,357 --> 00:01:14,160\nthings you need to know how to do.\n\n20\n00:01:14,160 --> 00:01:19,490\nNow, the bulk of it we already covered\nin the 410, 411, and 412 shows.\n\n21\n00:01:19,490 --> 00:01:22,360\nThose guys you know,\nbecause it's all about how in there.\n\n22\n00:01:22,360 --> 00:01:25,270\nSo a lot of this is not going to be new,\nbut there's a few little bells and\n\n23\n00:01:25,270 --> 00:01:29,660\nwhistles that we want to point out and in\nparticular, some that we have to plan for\n\n24\n00:01:29,660 --> 00:01:32,930\nbefore you implement it and\nthat's why it makes it into this exam.\n\n25\n00:01:32,930 --> 00:01:33,760\n>> Exactly.\n\n26\n00:01:33,760 --> 00:01:35,620\n>> So that's what we're going\nto take a look at today,\n\n27\n00:01:35,620 --> 00:01:37,240\na little more hands on which is cool.\n\n28\n00:01:38,280 --> 00:01:40,980\nSome of the stuff that we're using\nrequires complex lab setup, so\n\n29\n00:01:40,980 --> 00:01:45,170\nthis is gonna be a shorter show to\ncover that, and then we'll do a part\n\n30\n00:01:45,170 --> 00:01:49,610\nfour that has some additional stuff on\nremote access, but let's get started.\n\n31\n00:01:49,610 --> 00:01:50,840\n>> Let's do it.\n\n32\n00:01:50,840 --> 00:01:54,100\n>> We talked about remote access VPNs, and\n\n33\n00:01:54,100 --> 00:01:57,380\nparticularly site to site\nVPNs in earlier episodes.\n\n34\n00:01:57,380 --> 00:02:00,110\nSite to site VPNs were not something\nthat was very commonly done between\n\n35\n00:02:00,110 --> 00:02:04,270\nWindows servers in the past, because you\nnormally use your firewalls to do it.\n\n36\n00:02:05,320 --> 00:02:09,800\nBut there's this new scenario with\nWindows Azure, where site to site VPNs\n\n37\n00:02:09,800 --> 00:02:13,790\nbecome a lot more popular and\nwe covered that back in the 410 show.\n\n38\n00:02:13,790 --> 00:02:17,810\nHow to run through the Windows Azure\nwizard to create your VPN configuration\n\n39\n00:02:17,810 --> 00:02:23,190\nand import it down on your server in your\nlocation, build that site to site VPN.\n\n40\n00:02:23,190 --> 00:02:24,680\nBut it doesn't stop there,\n\n41\n00:02:24,680 --> 00:02:27,280\nthere are some other things you\nmight want to do with that.\n\n42\n00:02:27,280 --> 00:02:32,040\nNow if you're using the Windows Azure\nwizard hen it's super easy,\n\n43\n00:02:32,040 --> 00:02:33,380\nyou saw it in the Four Ten show,\n\n44\n00:02:33,380 --> 00:02:37,140\nwhere we just generated a config\nfile from up on the server side and\n\n45\n00:02:37,140 --> 00:02:41,580\nimported that in and it tells you all\nthe settings to use and you're done.\n\n46\n00:02:41,580 --> 00:02:44,880\nBut you can create your own custom\nsite to site VPN by hand, or\n\n47\n00:02:44,880 --> 00:02:48,850\neven the connection to Windows Azure,\nyou can create that by hand if you want.\n\n48\n00:02:48,850 --> 00:02:52,020\nThere's some reasons you might\nwant to do that, in particular,\n\n49\n00:02:52,020 --> 00:02:53,600\npacket filtering, right?\n\n50\n00:02:53,600 --> 00:02:58,990\nWhen you build a site-to-site VPN,\nthe default config allows all traffic\n\n51\n00:02:58,990 --> 00:03:02,070\nto flow across that link, or traffic\nthat wants to flow across the link can.\n\n52\n00:03:02,070 --> 00:03:04,220\nIt doesn't block anybody.\n\n53\n00:03:04,220 --> 00:03:06,460\nYou might not want that, right?\n\n54\n00:03:06,460 --> 00:03:09,370\nYou might want a private\nconnection up to Windows Azure so\n\n55\n00:03:09,370 --> 00:03:11,850\nthat you can reach out to\nthose servers and manage them.\n\n56\n00:03:11,850 --> 00:03:14,810\nYou might not want those Windows EDGE\nservers to be able to reach back into\n\n57\n00:03:14,810 --> 00:03:19,840\nyour private environment, because what\nif your Azure Cloud gets compromised?\n\n58\n00:03:19,840 --> 00:03:22,500\nYou're giving somebody a back\ndoor into your network that goes\n\n59\n00:03:22,500 --> 00:03:25,015\nbehind your firewall, right,\npassing across that tunnel.\n\n60\n00:03:25,015 --> 00:03:27,465\nSo we may want to tweak and\nconfigure that a little bit and\n\n61\n00:03:27,465 --> 00:03:29,755\nthat's what we're gonna take a look at\nhere in the beginning of the episode.\n\n62\n00:03:29,755 --> 00:03:31,175\n>> Nice.\n\n63\n00:03:31,175 --> 00:03:34,995\n>> All right, let's start with just how\nwe would create a site to site VPN.\n\n64\n00:03:34,995 --> 00:03:37,670\nI'm gonna bring up this server here and\nI'm not going\n\n65\n00:03:37,670 --> 00:03:41,400\nto do a full connection up to Azure, but\nI'll show you the steps involved and\n\n66\n00:03:41,400 --> 00:03:44,260\nthen we'll take look at what we\nreally need to know for the exam.\n\n67\n00:03:44,260 --> 00:03:48,390\nSo I'm going to fire up my server manager,\nand get into good old routing and\n\n68\n00:03:48,390 --> 00:03:50,110\nremote access.\n\n69\n00:03:50,110 --> 00:03:51,550\nSo, I will find that in here.\n\n70\n00:03:52,980 --> 00:03:55,180\nNow I've got the routing and\nremote access roll installed, but\n\n71\n00:03:55,180 --> 00:03:56,560\nyou can see I haven't configured it.\n\n72\n00:03:56,560 --> 00:03:59,160\nThis server's got the little red,\nwhat is that?\n\n73\n00:03:59,160 --> 00:04:01,400\nA square, or an arrow, or something there.\n\n74\n00:04:01,400 --> 00:04:02,020\n>> Something, yeah.\n\n75\n00:04:02,020 --> 00:04:03,390\n>> I think it might be a turtle.\n\n76\n00:04:03,390 --> 00:04:07,069\n[LAUGH] And it's a red something on there\nthat's letting me know the server's not\n\n77\n00:04:07,069 --> 00:04:08,290\nconfigured yet.\n\n78\n00:04:08,290 --> 00:04:10,772\nSo I'm just going to run\nthrough a quick configuration.\n\n79\n00:04:10,772 --> 00:04:14,280\nI'll right-click on it, choose configure\nand enable, routing and remote access.\n\n80\n00:04:14,280 --> 00:04:18,890\nNow when you're building a site to site\nVPN, when you hit next here you'll notice\n\n81\n00:04:18,890 --> 00:04:24,970\nthat none of these really fit\nthe needs for a true site to site VPN.\n\n82\n00:04:24,970 --> 00:04:26,790\nThe closest one is this guy right here,\n\n83\n00:04:26,790 --> 00:04:29,760\nsecure connection between\ntwo private networks.\n\n84\n00:04:29,760 --> 00:04:33,240\nYou know, connect this network to\na remote network such as a branch office.\n\n85\n00:04:33,240 --> 00:04:36,850\nWell that particular connection type,\nit's fine.\n\n86\n00:04:36,850 --> 00:04:39,330\nYou can run with it, but\nwhen you choose that option,\n\n87\n00:04:39,330 --> 00:04:42,920\nyou'll notice in the wizard, it doesn't\nask you a whole lot of questions.\n\n88\n00:04:42,920 --> 00:04:47,530\nIt doesn't ask you the right\nquestions to get it configured.\n\n89\n00:04:47,530 --> 00:04:51,690\nSo when I build a site to site VPN,\nI usually forgo this wizard.\n\n90\n00:04:51,690 --> 00:04:53,540\nI don't normally use it.\n\n91\n00:04:53,540 --> 00:04:56,760\nSo, you can go back here and tell it\nyou want a custom configuration and\n\n92\n00:04:56,760 --> 00:04:59,770\nthat's like telling it, hey leave\nme alone, I'll tell you what to do.\n\n93\n00:04:59,770 --> 00:05:02,985\n>> It shows you all the options and then\nyou can configure anything that you want.\n\n94\n00:05:02,985 --> 00:05:04,190\n>> Mm-hm.\n\n95\n00:05:04,190 --> 00:05:07,910\nAnd often times I won't even do that,\nI'll choose a custom configuration and\n\n96\n00:05:07,910 --> 00:05:09,460\njust not configure anything.\n\n97\n00:05:09,460 --> 00:05:12,140\nYou know,\nyou can check off things you might want,\n\n98\n00:05:12,140 --> 00:05:16,500\nmaybe you want to do VPN access,\ndial up, demand dial, whatever.\n\n99\n00:05:16,500 --> 00:05:18,890\nThe one that we need is demand dial.\n\n100\n00:05:20,200 --> 00:05:23,530\nDemand dial connections,\nin the old days, they were dial-up.\n\n101\n00:05:23,530 --> 00:05:25,990\nIt meant that when your computer\ntried to get to the internet,\n\n102\n00:05:25,990 --> 00:05:27,560\nit would grab its modem and\n\n103\n00:05:27,560 --> 00:05:30,520\nit would call your internet service\nprovider to get you out on the internet.\n\n104\n00:05:30,520 --> 00:05:31,346\nWe don't do that anymore.\n\n105\n00:05:31,346 --> 00:05:32,200\n>> Thank god.\n[LAUGH]\n\n106\n00:05:32,200 --> 00:05:33,120\n>> [LAUGH] Absolutely.\n\n107\n00:05:33,120 --> 00:05:36,110\nBut you can use VPN tunnels the same way.\n\n108\n00:05:36,110 --> 00:05:40,300\nYou want to contact this remote\nnetwork you bring up a VPN tunnel, and\n\n109\n00:05:40,300 --> 00:05:42,330\nthen you connect it and get to work.\n\n110\n00:05:42,330 --> 00:05:44,235\nAnd so when we reach out Windows Azure,\n\n111\n00:05:44,235 --> 00:05:47,481\nthat's basically what we're doing\nis a demand dial connection.\n\n112\n00:05:47,481 --> 00:05:51,454\nThis is used for branch office routing,\nbut basically, Windows Azure,\n\n113\n00:05:51,454 --> 00:05:53,770\nthat cloud becomes a branch office to you.\n\n114\n00:05:53,770 --> 00:05:54,702\nIt's just another data center.\n\n115\n00:05:54,702 --> 00:05:58,430\nAll right, so\nI'll choose that and hit next and\n\n116\n00:05:58,430 --> 00:06:00,870\nnotice it doesn't ask me anything else.\n\n117\n00:06:00,870 --> 00:06:04,680\nIt says yeah,\nyou want to do demand dial and it's done.\n\n118\n00:06:04,680 --> 00:06:06,550\nAnd, like I said,\nthat's kind of what I want.\n\n119\n00:06:06,550 --> 00:06:07,940\nI want it to leave me alone so\n\n120\n00:06:07,940 --> 00:06:10,620\nI can go in and put the settings in\nthat are going to be appropriate for me.\n\n121\n00:06:10,620 --> 00:06:13,970\nIt's just warning me here that it's going\nto have to restart the service to do it.\n\n122\n00:06:13,970 --> 00:06:16,500\nServices are not running in\nthe first place, so I don't care.\n\n123\n00:06:16,500 --> 00:06:18,970\nHit OK.\nIt will come up.\n\n124\n00:06:18,970 --> 00:06:23,810\nNow the decisions that we made right\nthere, you can override those later on.\n\n125\n00:06:23,810 --> 00:06:26,910\nSo if we want to turn on other\nfunctionality, it's really easy to do.\n\n126\n00:06:26,910 --> 00:06:28,416\nI'll show you that in a second.\n\n127\n00:06:28,416 --> 00:06:31,940\nIt looks like I got a warning here about\nnot being able to register in the active\n\n128\n00:06:31,940 --> 00:06:32,500\ndirectory.\n\n129\n00:06:34,240 --> 00:06:36,050\nThe domain administrator\nmust complete this task.\n\n130\n00:06:36,050 --> 00:06:37,650\nYeah, so it didn't register with the AD,\nI wonder why.\n\n131\n00:06:37,650 --> 00:06:39,005\nProbably because it's already registered.\n\n132\n00:06:39,005 --> 00:06:40,919\n>> Mm-hm.\n>> I am going to go ahead and start it up.\n\n133\n00:06:42,140 --> 00:06:42,920\nI'm not so worried about that.\n\n134\n00:06:42,920 --> 00:06:46,080\nWe don't need to be registered in the\nactive directory for that functionality,\n\n135\n00:06:46,080 --> 00:06:48,060\nfor site to site VPNs and stuff.\n\n136\n00:06:48,060 --> 00:06:51,570\nWhen we need to be registered in the AD\nis when we're reaching out to do\n\n137\n00:06:51,570 --> 00:06:55,510\nactual active directory authentication,\nwhich very few people do\n\n138\n00:06:55,510 --> 00:06:58,570\nbecause we're normally gonna use Radius\nand we'll see that later in this episode.\n\n139\n00:06:59,610 --> 00:07:01,540\nAll right so now I'm in here.\n\n140\n00:07:01,540 --> 00:07:03,000\nI've got my little green arrow, so\n\n141\n00:07:03,000 --> 00:07:06,870\nI know I'm an active routing in remote\naccess server, but what am I doing?\n\n142\n00:07:06,870 --> 00:07:11,800\nI told it I wanna do demand dial\nconnections, but it never asked me even\n\n143\n00:07:11,800 --> 00:07:14,980\nquestion number one about that,\nso I know that's not configured.\n\n144\n00:07:14,980 --> 00:07:18,100\nSo even on an active routing\nin remote access server\n\n145\n00:07:18,100 --> 00:07:21,990\nI'm not really doing anything,\nI'm not routing, it's just sitting here.\n\n146\n00:07:23,230 --> 00:07:26,860\nBut at least now we can get in here and\nstart to configure various things.\n\n147\n00:07:26,860 --> 00:07:29,640\nThe demand dial stuff that we use for\nsite-to-site,\n\n148\n00:07:29,640 --> 00:07:32,450\nthat's actually done right\nhere under Network Interfaces.\n\n149\n00:07:32,450 --> 00:07:35,930\nBut before I go there, I'm assuming\nthis was a server that had never been\n\n150\n00:07:35,930 --> 00:07:38,170\nconfigured before and\nwe were just setting it up.\n\n151\n00:07:38,170 --> 00:07:41,190\nWhat if you already have a server\nrunning a routing or remote access, and\n\n152\n00:07:41,190 --> 00:07:42,870\nyou wanna add the functionality to it?\n\n153\n00:07:44,040 --> 00:07:46,620\nIt's the same basic process, but\nwe have to go a different way.\n\n154\n00:07:46,620 --> 00:07:48,430\nLet me just decommission this real quick.\n\n155\n00:07:48,430 --> 00:07:50,576\nI'll disable routing and remote access.\n\n156\n00:07:50,576 --> 00:07:56,834\nAnd maybe I've already got this server up\nas a NAP router or something like that.\n\n157\n00:07:56,834 --> 00:07:58,611\nSo maybe I went through the wizard and\n\n158\n00:07:58,611 --> 00:08:01,432\njust chose options that didn't\nmatch up to what I wanted.\n\n159\n00:08:01,432 --> 00:08:03,092\nAll right.\n\n160\n00:08:03,092 --> 00:08:04,660\nSo I'll just rerun that wizard.\n\n161\n00:08:04,660 --> 00:08:07,340\nIt loves it when you do this\nrapidly without waiting.\n\n162\n00:08:07,340 --> 00:08:08,474\n>> [LAUGH]\n>> So\n\n163\n00:08:08,474 --> 00:08:11,710\nI'm gonna set this up as a NAT router,\nI'll just choose that NAT option.\n\n164\n00:08:11,710 --> 00:08:15,000\nAnd, oh,\nI've only got one network interface.\n\n165\n00:08:15,000 --> 00:08:16,460\n[LAUGH]\n>> [LAUGH]\n\n166\n00:08:16,460 --> 00:08:17,226\n>> Let me choose something that it\n\n167\n00:08:17,226 --> 00:08:17,730\nwon't care about.\n\n168\n00:08:17,730 --> 00:08:19,950\nHere, maybe just Remote Access VPN.\n\n169\n00:08:19,950 --> 00:08:23,540\nRight, so I'm gonna allow\npeople to PPTP or whatever.\n\n170\n00:08:23,540 --> 00:08:26,150\nI'll choose that VPN connectivity.\n\n171\n00:08:26,150 --> 00:08:28,740\nIt's warning me about having only\none network interface, but again,\n\n172\n00:08:28,740 --> 00:08:31,090\nI'm not too worried about that.\n\n173\n00:08:31,090 --> 00:08:32,185\nOh, it's gonna force me.\n\n174\n00:08:32,185 --> 00:08:37,300\nOh, shoot, it is hard to route when\nyou've only got one interface.\n\n175\n00:08:37,300 --> 00:08:40,294\nWell, I guess maybe I\nwon't configure that then.\n\n176\n00:08:40,294 --> 00:08:46,370\nHere, let's do, we'll just say custom and\nnot check anything.\n\n177\n00:08:46,370 --> 00:08:48,630\nIt makes you check at least one.\n\n178\n00:08:48,630 --> 00:08:49,870\nRouting, fine, there, okay.\n\n179\n00:08:49,870 --> 00:08:50,590\n>> There we go.\n\n180\n00:08:50,590 --> 00:08:53,695\n>> So, regardless of what you've chosen,\nif you've gone in there and\n\n181\n00:08:53,695 --> 00:08:56,261\nconfigured it for one thing and\nnot the one that you want,\n\n182\n00:08:56,261 --> 00:08:58,100\nyou can always change it after the fact.\n\n183\n00:08:58,100 --> 00:09:01,050\nYou can't run that wizard again, you\nsaw what I had to do to run the wizard.\n\n184\n00:09:01,050 --> 00:09:03,860\nI had to disable routing and\nroute access, which wipes out my config.\n\n185\n00:09:03,860 --> 00:09:04,930\n>> It throws everything out, yep.\n\n186\n00:09:04,930 --> 00:09:08,510\n>> I mean, that could be a good thing\nif that's what you wanted to do.\n\n187\n00:09:08,510 --> 00:09:10,590\nBut if you need to preserve\nwhat you've already got,\n\n188\n00:09:10,590 --> 00:09:12,518\nyou just pull up\nthe properties of the server.\n\n189\n00:09:12,518 --> 00:09:15,572\nIf you right-click on the server and\ngo to Properties, you'll see on\n\n190\n00:09:15,572 --> 00:09:18,750\nthe Server Property screen where\nyou'll be able to choose that option.\n\n191\n00:09:18,750 --> 00:09:21,540\nAnd, you know,\nit's gonna do this little bug.\n\n192\n00:09:21,540 --> 00:09:26,840\nThere is a bug in Windows Server 2012 R2,\nit drives me crazy.\n\n193\n00:09:26,840 --> 00:09:29,848\nNotice how I right-clicked here and\nchose Properties,\n\n194\n00:09:29,848 --> 00:09:32,120\nand nothing came up, all right.\n\n195\n00:09:32,120 --> 00:09:34,100\nI have seen this multiple times.\n\n196\n00:09:34,100 --> 00:09:36,350\nAnd see there, my MMC is crashing.\n\n197\n00:09:36,350 --> 00:09:40,570\nSometimes it's as simple as,\nlet me just shut this down.\n\n198\n00:09:40,570 --> 00:09:44,580\nIt's as simple as relaunching the MMC,\nand then that will start working.\n\n199\n00:09:44,580 --> 00:09:49,150\nOther times I've actually had to reboot\nto get around it, which is frustrating.\n\n200\n00:09:49,150 --> 00:09:51,375\nSo let's see which scenario\nI'm gonna be in here.\n\n201\n00:09:51,375 --> 00:09:53,960\nIf I pull up the properties,\nthere it goes.\n\n202\n00:09:53,960 --> 00:09:54,940\nOkay.\n\n203\n00:09:54,940 --> 00:09:58,074\nI have seen that where you actually had to\nreboot before the Properties screens will\n\n204\n00:09:58,074 --> 00:09:58,710\ncome up before.\n\n205\n00:09:58,710 --> 00:09:59,370\n>> Wow.\n\n206\n00:09:59,370 --> 00:10:03,790\n>> Yeah, I'm sure they'll fix it in\nWindows Server 2016 or whatever, but for\n\n207\n00:10:03,790 --> 00:10:05,830\nnow, that bug is there.\n\n208\n00:10:05,830 --> 00:10:08,860\nAll right, but see right here on\nthe General Properties screen,\n\n209\n00:10:08,860 --> 00:10:15,430\nit's got IPv4 Router turned on and you'll\nsee IPv6 Router, Remote Access Server.\n\n210\n00:10:15,430 --> 00:10:18,640\nHere's the options where you can\nstart to pick and choose to put that\n\n211\n00:10:18,640 --> 00:10:22,700\nother behavior back in if you've changed\nyour mind about what you want to do.\n\n212\n00:10:22,700 --> 00:10:26,880\nI didn't choose to do demand dial,\nsite-to-site VPN,\n\n213\n00:10:26,880 --> 00:10:28,780\nI didn't choose that option.\n\n214\n00:10:28,780 --> 00:10:31,670\nSo that's not really configured,\nbut I can come in here and set it,\n\n215\n00:10:31,670 --> 00:10:34,430\neven though that's not what I picked,\nall right?\n\n216\n00:10:34,430 --> 00:10:36,380\nSo to do it,\nwe just go under Network Interfaces and\n\n217\n00:10:36,380 --> 00:10:38,790\nwe add a New Demand Dial Interface.\n\n218\n00:10:38,790 --> 00:10:40,400\nYou'll see that option right there.\n\n219\n00:10:40,400 --> 00:10:44,650\nRegardless of which of the wizard choices\nyou made, you'll see that option and\n\n220\n00:10:44,650 --> 00:10:46,990\nyou can pick it to add\nin that new interface.\n\n221\n00:10:46,990 --> 00:10:47,940\nAnd when you go to add it,\n\n222\n00:10:47,940 --> 00:10:51,510\nit's just warning me here I need to\nenable domain dial routing on the server.\n\n223\n00:10:51,510 --> 00:10:54,860\nI haven't done it so\nI need to go back to my General tab, and\n\n224\n00:10:54,860 --> 00:10:56,380\nunder the LAN settings I can turn it on.\n\n225\n00:10:56,380 --> 00:10:59,130\nSo I'll just go right back there and\ndo that.\n\n226\n00:10:59,130 --> 00:11:03,400\nSo, right in here we'll see that I've\ngot local area network routing only,\n\n227\n00:11:03,400 --> 00:11:07,070\nI need to switch that to LAN and\ndemand dial routing.\n\n228\n00:11:07,070 --> 00:11:10,373\nAnd once that's done, there we go,\nit's gonna restart the service, and\n\n229\n00:11:10,373 --> 00:11:12,745\nnow we'll be able to add\nthat demand dial interface.\n\n230\n00:11:12,745 --> 00:11:13,545\n>> Nice.\n\n231\n00:11:13,545 --> 00:11:16,569\n>> So don't feel like you have to blow\nyour config away just to add this, cuz you\n\n232\n00:11:16,569 --> 00:11:19,695\nmight need to mix and match in a way that\nthe wizard just doesn't account for.\n\n233\n00:11:19,695 --> 00:11:21,210\n>> Mm-hm.\n\n234\n00:11:21,210 --> 00:11:23,750\n>> All right, so I'll go in and\nadd that new demand dial interface.\n\n235\n00:11:23,750 --> 00:11:27,214\nAnd when we do it,\nit's going to ask us simple questions, but\n\n236\n00:11:27,214 --> 00:11:31,520\nthese are the real questions we need to\nbe able to connect to that other site.\n\n237\n00:11:31,520 --> 00:11:34,740\nSo, maybe this will be my\nWindows Azure connection.\n\n238\n00:11:34,740 --> 00:11:35,900\nSo I'll just give that name.\n\n239\n00:11:37,090 --> 00:11:39,880\nAnd then we can say whether we\nconnecting via VPN or PPPOE.\n\n240\n00:11:39,880 --> 00:11:41,230\nWe're doing a VPN.\n\n241\n00:11:42,750 --> 00:11:44,840\nAnd now we're specifying\nwhat protocol we're using.\n\n242\n00:11:44,840 --> 00:11:47,807\nNow, if you're connecting to\nWindows Azure, you're gonna use IKEv2.\n\n243\n00:11:47,807 --> 00:11:51,860\nAnd if you're building a site-to-site\nconnection you're gonna use IKEv2.\n\n244\n00:11:51,860 --> 00:11:53,600\nBut if you're just doing remote access for\n\n245\n00:11:53,600 --> 00:11:57,630\nthis server to be able to connect to some\nother network, you might use PPTP or L2TP.\n\n246\n00:11:57,630 --> 00:11:59,760\nSo you'll pick the appropriate protocol.\n\n247\n00:11:59,760 --> 00:12:02,310\nThis is one of the nice parts where if you\n\n248\n00:12:02,310 --> 00:12:05,720\nget the config file from the Windows Azure\nsite that it makes for you,\n\n249\n00:12:05,720 --> 00:12:09,900\nit's just a series of scripts that it runs\nthat it sets all this stuff up for you.\n\n250\n00:12:09,900 --> 00:12:11,760\nBut if you're building it by hand,\n\n251\n00:12:11,760 --> 00:12:15,030\nit's just gonna ask us all\nthe various information we need.\n\n252\n00:12:15,030 --> 00:12:15,920\nWho are we connecting to?\n\n253\n00:12:15,920 --> 00:12:22,640\nI can punch in an IP address\nthat I'm gonna be connecting to.\n\n254\n00:12:22,640 --> 00:12:25,377\nSo if I'm at the home office this\nwould be the IP of the branch, or\n\n255\n00:12:25,377 --> 00:12:28,500\nif I'm at a branch office this would\nbe the IP of the home office, right.\n\n256\n00:12:28,500 --> 00:12:33,042\nOr more commonly this is gonna be\nthe IP address assigned to your private\n\n257\n00:12:33,042 --> 00:12:35,250\nnetwork inside of Windows Azure.\n\n258\n00:12:35,250 --> 00:12:37,517\nAnd then, what we're sending over,\nI'm gonna say,\n\n259\n00:12:37,517 --> 00:12:39,010\nroute IP packets on the interface.\n\n260\n00:12:39,010 --> 00:12:42,330\nYou'll see, add a user account so\na remote user can dial in.\n\n261\n00:12:42,330 --> 00:12:44,780\nIf I wanted remote users to be\nable to connect with IKEv2,\n\n262\n00:12:44,780 --> 00:12:46,010\nI can choose that option.\n\n263\n00:12:46,010 --> 00:12:49,145\nThat's not the point of this, we're\ndoing site-to-site, not client-to-site.\n\n264\n00:12:49,145 --> 00:12:53,252\n>> [COUGH]\n>> And then the IP addresses,\n\n265\n00:12:53,252 --> 00:12:56,420\nthe network ranges that are on\nthe other end of that tunnel.\n\n266\n00:12:56,420 --> 00:12:58,570\nWhen you build a private\nnetwork in Windows Azure,\n\n267\n00:12:58,570 --> 00:13:00,450\nyou pick an IP address range.\n\n268\n00:13:00,450 --> 00:13:04,520\nIf this is another remote location\nin your building, or your company,\n\n269\n00:13:04,520 --> 00:13:07,170\nyou've got a network range that exists\non the other side of the tunnel.\n\n270\n00:13:07,170 --> 00:13:09,020\nAnd so\nwe need to specify what that network is.\n\n271\n00:13:09,020 --> 00:13:13,420\nMaybe it's 192.168.5.0,\nand it's a class C.\n\n272\n00:13:13,420 --> 00:13:16,130\nSo I'll just punch that network in here.\n\n273\n00:13:16,130 --> 00:13:17,311\nAnd you give it a metric,\n\n274\n00:13:17,311 --> 00:13:20,420\nbecause you might have more than\none route to get to that network.\n\n275\n00:13:20,420 --> 00:13:22,110\nAnd so\nyou've gotta set a preference value.\n\n276\n00:13:22,110 --> 00:13:25,270\nI normally set one, which is pretty\nmuch as good as you're gonna get.\n\n277\n00:13:25,270 --> 00:13:28,240\nZero's actually a little bit better,\nbut that means your directly connected.\n\n278\n00:13:28,240 --> 00:13:31,260\nOne just means you know\na way to get there, right.\n\n279\n00:13:31,260 --> 00:13:35,820\nAnything higher, and a route with a metric\nof one would be preferred, right.\n\n280\n00:13:35,820 --> 00:13:39,340\nAnd so the higher the number,\nthe less preferred the route.\n\n281\n00:13:39,340 --> 00:13:40,760\nBut you might have more\nthan one way to get there.\n\n282\n00:13:43,070 --> 00:13:44,882\nAnd you can add in more than one network.\n\n283\n00:13:44,882 --> 00:13:49,537\nWith a demand dial connection the VPN's\ngonna stay down until it sees\n\n284\n00:13:49,537 --> 00:13:52,835\ntraffic destined for\nthe networks in this list.\n\n285\n00:13:52,835 --> 00:13:55,166\nWhen it sees traffic destined for\nthe networks in this list,\n\n286\n00:13:55,166 --> 00:13:57,790\nit'll bring the VPN tunnel up and\nsend the traffic.\n\n287\n00:13:57,790 --> 00:14:01,288\nAnd if the tunnel idles for\na long time, it'll tear it down.\n\n288\n00:14:01,288 --> 00:14:02,708\nRight, that's what it does.\n\n289\n00:14:02,708 --> 00:14:05,500\nNow we might want to make it persistent\nand have it stay up all the time.\n\n290\n00:14:05,500 --> 00:14:08,320\nI'm pretty sure the wizard\ndoesn't let us do that, but\n\n291\n00:14:08,320 --> 00:14:11,090\nwe can modify the settings\nafter the fact to change it.\n\n292\n00:14:11,090 --> 00:14:13,487\n>> Maybe you don't deal with the lag\nif you're pulling the connection\n\n293\n00:14:13,487 --> 00:14:14,040\nup every time.\n\n294\n00:14:14,040 --> 00:14:17,160\n>> It takes a second, you lose a few\npings while it comes up, absolutely.\n\n295\n00:14:18,670 --> 00:14:23,070\nAll right, now with IKEv2, we do use\na user name and password as well as,\n\n296\n00:14:23,070 --> 00:14:25,910\nwe'll see later where we can set\na pre-shared key in a certificate.\n\n297\n00:14:25,910 --> 00:14:28,520\nSo I'm just gonna specify\na fake account here,\n\n298\n00:14:28,520 --> 00:14:32,020\nwhatever it is that we've got that's\ngonna authenticate us on the other side.\n\n299\n00:14:32,020 --> 00:14:34,090\nAll right.\n\n300\n00:14:34,090 --> 00:14:35,900\nAnd then we'll finish up.\n\n301\n00:14:35,900 --> 00:14:37,820\nSo there's my VPN tunnel.\n\n302\n00:14:37,820 --> 00:14:40,180\nNow, I'm usually not done.\n\n303\n00:14:40,180 --> 00:14:43,922\nWith IPsec we're typically doing\ncertificate based authentication,\n\n304\n00:14:43,922 --> 00:14:44,540\nall right.\n\n305\n00:14:44,540 --> 00:14:46,115\nSo I need to pull up\nthe properties of this and\n\n306\n00:14:46,115 --> 00:14:48,130\nmake sure it knows about the certificate.\n\n307\n00:14:48,130 --> 00:14:51,360\nOr if you don't have a PKI,\nyou might choose to do a pre-shared key.\n\n308\n00:14:51,360 --> 00:14:53,910\nAnd so I'll need to edit this\nto put the pre-shared key in.\n\n309\n00:14:53,910 --> 00:14:57,370\nSo while it looks like its done,\nit rarely works from there.\n\n310\n00:14:57,370 --> 00:14:59,500\nSo I'm gonna pull up\nthe properties of that.\n\n311\n00:14:59,500 --> 00:15:02,330\nAnd so\nthere's the IP that I'm connecting to.\n\n312\n00:15:02,330 --> 00:15:06,350\nUnder options, here's where I can set\nit to be a persistent connection.\n\n313\n00:15:06,350 --> 00:15:08,830\nYou'll see the default is\nfive minutes of idle time.\n\n314\n00:15:08,830 --> 00:15:10,590\nYou can bump that up even more.\n\n315\n00:15:10,590 --> 00:15:14,500\nBut persistence says, once it comes up,\njust keep it up all the time.\n\n316\n00:15:14,500 --> 00:15:15,420\nDon't let it tear down.\n\n317\n00:15:17,510 --> 00:15:22,990\nUnder Security is where we can specify\nthe type of VPN and how we authenticate.\n\n318\n00:15:22,990 --> 00:15:24,070\nAll right?\n\n319\n00:15:24,070 --> 00:15:27,620\nThe default is to use machine\ncertificates, and that's great.\n\n320\n00:15:27,620 --> 00:15:30,960\nIf both of your systems have certificates\nthat were issued by the same CA,\n\n321\n00:15:30,960 --> 00:15:32,820\nif you've got that PKI in place.\n\n322\n00:15:32,820 --> 00:15:33,720\nAll right?\n\n323\n00:15:33,720 --> 00:15:36,320\nIf the other end of this\ntunnel is something\n\n324\n00:15:36,320 --> 00:15:41,000\ncompletely unrelated to you though, then\nyou may not trust their root cert, and\n\n325\n00:15:41,000 --> 00:15:42,300\nthe certificates start to break down.\n\n326\n00:15:42,300 --> 00:15:44,421\nSo if you want to do\ncertificate authentication,\n\n327\n00:15:44,421 --> 00:15:46,750\nyou've got to make sure\nyou've got that PKI in place.\n\n328\n00:15:46,750 --> 00:15:50,242\nAnd you can do EAP and\nstart to customize it even further.\n\n329\n00:15:50,242 --> 00:15:53,378\nBut machine certificates\nare the typical method, all right?\n\n330\n00:15:53,378 --> 00:15:56,756\nBut, you could use a pre-shared key.\n\n331\n00:15:56,756 --> 00:16:00,675\nAnd just punch that in, preshared\nkeys are a little less secure because\n\n332\n00:16:00,675 --> 00:16:05,270\nthey're harder to revoke, they have to be\nchanged on both ends, stuff like that.\n\n333\n00:16:05,270 --> 00:16:09,680\nA lot of issues can arise there,\ncertificates are better, but\n\n334\n00:16:09,680 --> 00:16:12,960\nit's better than nothing,\nyou know the alternative, unencrypted.\n\n335\n00:16:12,960 --> 00:16:15,790\n>> You know it might be a situation\nwhere you don't want to go\n\n336\n00:16:15,790 --> 00:16:19,290\nthrough the trouble of setting across\nTrust hierarchy between their PKI or\n\n337\n00:16:19,290 --> 00:16:22,450\nthey don't want to import\nyour Root CA certificate and\n\n338\n00:16:22,450 --> 00:16:25,560\ntrust everything you're doing or\nsomething like that.\n\n339\n00:16:25,560 --> 00:16:26,500\n>> And that is not uncommon.\n\n340\n00:16:27,740 --> 00:16:30,294\nAll right, you've also got\nsome advanced setting in here,\n\n341\n00:16:30,294 --> 00:16:32,348\nwhich really doesn't have\na whole heck of a lot,\n\n342\n00:16:32,348 --> 00:16:35,025\nlike how long do you wait before\nyou decide the network is down?\n\n343\n00:16:35,025 --> 00:16:37,755\n15 seconds, that may be too much,\ntoo little.\n\n344\n00:16:37,755 --> 00:16:39,705\nJust depends, all right?\n\n345\n00:16:39,705 --> 00:16:41,385\nAnd then, yeah,\nwe can adjust our networking settings.\n\n346\n00:16:41,385 --> 00:16:42,745\nWe rarely have to do that.\n\n347\n00:16:42,745 --> 00:16:46,665\nBut at this point,\nI've now got my demand dial interface.\n\n348\n00:16:46,665 --> 00:16:49,490\nAnybody who's using this\nserver is a default gateway.\n\n349\n00:16:49,490 --> 00:16:53,308\nIf they generate traffic\nto go to 192.160.5.\n\n350\n00:16:53,308 --> 00:16:59,050\nWhatever, it'll wake up this VPN tunnel\nand it'll send traffic across it.\n\n351\n00:16:59,050 --> 00:17:01,420\nThat is a site to site VPN.\n\n352\n00:17:01,420 --> 00:17:04,710\nAnd on the exam you're likely only going\nto see it in reference to connecting\n\n353\n00:17:04,710 --> 00:17:05,760\nto Window's Azure.\n\n354\n00:17:05,760 --> 00:17:06,650\nRight.\nAnd so\n\n355\n00:17:06,650 --> 00:17:11,160\nif you haven't watched the 7410 episode\nwe did on connecting to Window's Azure,\n\n356\n00:17:11,160 --> 00:17:12,530\ngo and check that out.\n\n357\n00:17:12,530 --> 00:17:14,410\nBecause we would go\nthrough the process and\n\n358\n00:17:14,410 --> 00:17:19,210\nbuild one up and bring up a domain\ncontroller and all that good stuff.\n\n359\n00:17:19,210 --> 00:17:20,090\nSo it's covered in there.\n\n360\n00:17:20,090 --> 00:17:23,580\nBut the reason we bring it up here is,\nin that show,\n\n361\n00:17:23,580 --> 00:17:24,790\nthis is kind of where we stopped.\n\n362\n00:17:24,790 --> 00:17:28,020\nWe built up that VPN tunnel but\nwe didn't go beyond it.\n\n363\n00:17:28,020 --> 00:17:30,620\nBut there is more stuff\nthat you might want to do.\n\n364\n00:17:30,620 --> 00:17:35,180\nFor example, you might want to filter\nthe traffic that's passing over that link.\n\n365\n00:17:35,180 --> 00:17:39,590\nYou may not want full access between your\nlocal network and Azure or vice versa.\n\n366\n00:17:40,850 --> 00:17:44,140\nSo we can implement IP filters\non this demand dial interface.\n\n367\n00:17:44,140 --> 00:17:45,400\nNow this is a confusing one for\n\n368\n00:17:45,400 --> 00:17:50,120\npeople because did you see any settings\non there that talked about IP filters?\n\n369\n00:17:50,120 --> 00:17:51,020\nI sure didn't.\n\n370\n00:17:51,020 --> 00:17:51,520\nRight.\n\n371\n00:17:51,520 --> 00:17:53,680\nI think we went though every setting.\n\n372\n00:17:53,680 --> 00:17:58,430\nSo there's just not anything in here\nthat really references the filters.\n\n373\n00:17:58,430 --> 00:18:02,370\nAnd if you're an old-school Windows user,\nback in NT4 and\n\n374\n00:18:02,370 --> 00:18:06,940\nWindows 2000, when you pulled up\nthe IP settings under IPv4 you\n\n375\n00:18:06,940 --> 00:18:10,460\nactually had a filter option there,\nand you'll see that that's not here.\n\n376\n00:18:10,460 --> 00:18:14,410\nSo if you're a new user you didn't see\nthe option, if you're an old user,\n\n377\n00:18:14,410 --> 00:18:18,300\nthe option that was there is gone, so\nwhere the heck are the IP filters?\n\n378\n00:18:18,300 --> 00:18:21,890\nWell Microsoft moved them,\nthey're actually down here.\n\n379\n00:18:21,890 --> 00:18:25,350\nNotice these folders I've got for\nIPv4 and IPv6.\n\n380\n00:18:25,350 --> 00:18:29,790\nWhen you go under general for\neither one, you'll see your interfaces.\n\n381\n00:18:29,790 --> 00:18:33,520\nAnd there's that Windows Azure\ndemand dialer interface I created.\n\n382\n00:18:33,520 --> 00:18:38,360\nAnd if you pull up the properties of that\ninterface, you'll see inbound filters and\n\n383\n00:18:38,360 --> 00:18:40,120\noutbound filters right here.\n\n384\n00:18:40,120 --> 00:18:43,940\nThis is where we can tweak what traffic\nis allowed to pass over the line.\n\n385\n00:18:45,690 --> 00:18:47,120\nInbound, right?\n\n386\n00:18:47,120 --> 00:18:51,930\nThis is traffic that's coming\nfrom Windows Azure to us.\n\n387\n00:18:51,930 --> 00:18:52,980\nAnd then outbound.\n\n388\n00:18:52,980 --> 00:18:55,660\nThat's traffic from us\ngoing to Windows Azure.\n\n389\n00:18:55,660 --> 00:18:57,910\nGoing out of our network and\nover to theirs.\n\n390\n00:18:57,910 --> 00:18:58,500\nAll right?\n\n391\n00:18:58,500 --> 00:19:00,400\nSo we can start to modify this.\n\n392\n00:19:00,400 --> 00:19:04,050\nFor outbound, we probably wanna just let\nall of our traffic go over that link.\n\n393\n00:19:04,050 --> 00:19:05,050\nRight?\n\n394\n00:19:05,050 --> 00:19:08,560\nSo transmit all packets except\nthose that meet the criteria below.\n\n395\n00:19:08,560 --> 00:19:12,620\nThat's kinda the default, and\nyou can just add in any exceptions,\n\n396\n00:19:12,620 --> 00:19:13,680\nanything that you wanna block there.\n\n397\n00:19:15,010 --> 00:19:18,690\nOn the inbound side though, we might\nwanna be a little more aggressive.\n\n398\n00:19:18,690 --> 00:19:22,060\nReceive all packets except those\nthat meet the criteria below.\n\n399\n00:19:22,060 --> 00:19:25,960\nWe can start to specify all sorts\nof blocks in there to define\n\n400\n00:19:25,960 --> 00:19:29,060\nwhat we don't want to\nallow to cross the link.\n\n401\n00:19:29,060 --> 00:19:33,810\nSo you might have a domain\ncontroller that's out there and\n\n402\n00:19:33,810 --> 00:19:37,970\nso, if you know that domain controller\nis going to use certain port ranges or\n\n403\n00:19:37,970 --> 00:19:39,940\nwhatever, you can start\nto put filters in there.\n\n404\n00:19:39,940 --> 00:19:42,840\nOr if you want somebody\nto be able to connect to\n\n405\n00:19:42,840 --> 00:19:47,740\nan FTP server on your local network then\nyou might create a rule here that blocks\n\n406\n00:19:47,740 --> 00:19:50,480\neverything except the ports for FTP.\n\n407\n00:19:50,480 --> 00:19:52,370\n>> Right.\nBecause we've got that other option.\n\n408\n00:19:52,370 --> 00:19:55,392\nOnce we set up our filter then\nyou can choose the other option,\n\n409\n00:19:55,392 --> 00:19:57,323\ndrop all packets except those listed.\n\n410\n00:19:57,323 --> 00:19:58,656\nYou can do it either way you want to go.\n\n411\n00:19:58,656 --> 00:20:02,001\n>> So the source network I don't normally\nbother to specify cause there's only one\n\n412\n00:20:02,001 --> 00:20:04,017\nthing on the other side of\nthis when it's Azure so\n\n413\n00:20:04,017 --> 00:20:05,610\nwe don't necessarily need a source.\n\n414\n00:20:05,610 --> 00:20:08,335\nBut the destination, we can say, you know,\n\n415\n00:20:08,335 --> 00:20:12,156\nmy local server might be 10.1.230.200,\nright.\n\n416\n00:20:12,156 --> 00:20:17,644\nAnd, you know, we can put in\na really small network mask so\n\n417\n00:20:17,644 --> 00:20:23,020\nit's just that IP, and for\nthe protocol we can come in and\n\n418\n00:20:23,020 --> 00:20:25,823\nsay TCP port 1 through 19.\n\n419\n00:20:28,073 --> 00:20:28,630\nAll right?\n\n420\n00:20:28,630 --> 00:20:31,130\nAnd then create another rule the same way.\n\n421\n00:20:31,130 --> 00:20:33,370\nYou'll see where this\nis a little bit kludgy.\n\n422\n00:20:33,370 --> 00:20:34,340\nWhat did I say?\n\n423\n00:20:34,340 --> 00:20:35,030\n100, 200?\n\n424\n00:20:35,030 --> 00:20:36,220\nWhatever that IP was.\n\n425\n00:20:36,220 --> 00:20:36,780\n>> 200, yep.\n\n426\n00:20:36,780 --> 00:20:41,740\n>> And now I can go TCP.\n\n427\n00:20:41,740 --> 00:20:47,031\n>> And specify 22 through 65535, okay.\n\n428\n00:20:47,031 --> 00:20:52,323\nSo we're saying receive all packets except\nthose that meet the criteria below.\n\n429\n00:20:52,323 --> 00:20:57,344\nSo I'm saying anybody can get to\n10.1.230.200, but if they're on port\n\n430\n00:20:57,344 --> 00:21:02,380\n1 through 19 or 22 through 65535,\nthey're going to get blocked, right.\n\n431\n00:21:03,550 --> 00:21:05,300\nThat's a hard way to write that.\n\n432\n00:21:05,300 --> 00:21:06,830\nIf I'd done what Mike said and\n\n433\n00:21:06,830 --> 00:21:10,323\njust did drop all packets except I\ncould have made this a lot easier.\n\n434\n00:21:10,323 --> 00:21:15,656\nI could have edited this\nto say ports 20 through 21.\n\n435\n00:21:15,656 --> 00:21:18,573\nAnd now I'm dropping everything.\n\n436\n00:21:18,573 --> 00:21:20,200\nCan't stretch out this window, can you?\n\n437\n00:21:20,200 --> 00:21:22,720\n>> No,\none of the windows you can not resize.\n\n438\n00:21:22,720 --> 00:21:27,910\n>> I'm dropping everything except for\ntraffic destined to that IP on port 20 or\n\n439\n00:21:27,910 --> 00:21:31,300\n21, which is what FTP is\ngoing to be targeting on.\n\n440\n00:21:31,300 --> 00:21:34,130\nNow, you do get complexities if\nyou're doing things like passive mode\n\n441\n00:21:34,130 --> 00:21:34,870\ntransfer or whatever.\n\n442\n00:21:34,870 --> 00:21:36,620\nSo you have gotta\nunderstand your protocols.\n\n443\n00:21:36,620 --> 00:21:41,550\nBut here we can really restrict how people\nare getting connected to our network.\n\n444\n00:21:41,550 --> 00:21:43,640\nWhat traffic will we allow\nto flow over that link?\n\n445\n00:21:43,640 --> 00:21:44,540\nVery important.\n\n446\n00:21:44,540 --> 00:21:48,120\n>> So, as you build your design,\nthis is something you have to think about,\n\n447\n00:21:48,120 --> 00:21:48,870\nall right?\n\n448\n00:21:48,870 --> 00:21:54,780\nWhen you build that Windows Azure\nconnection, it is a wide open gateway.\n\n449\n00:21:54,780 --> 00:21:58,600\nAll traffic is allowed to pass over\nthat link, this is the way to filter it.\n\n450\n00:21:58,600 --> 00:21:59,870\nNot the Windows firewall.\n\n451\n00:21:59,870 --> 00:22:02,740\nRight, the Windows firewalls applying\nyour physical interfaces and\n\n452\n00:22:02,740 --> 00:22:05,090\nit's not really filtering this link,\n>> Right.\n\n453\n00:22:05,090 --> 00:22:07,112\n>> IP filters that's the way to do it.\n\n454\n00:22:07,112 --> 00:22:09,990\nAll right, so there's a lot of power in\nthere, a lot of neat stuff that you can\n\n455\n00:22:09,990 --> 00:22:13,710\nuse to control that traffic and\nensure that it doesn't go crazy.\n\n456\n00:22:13,710 --> 00:22:18,410\nDon't mix this up with there's\nanother type of ip filter you'll see\n\n457\n00:22:18,410 --> 00:22:20,470\non your network policy server.\n\n458\n00:22:20,470 --> 00:22:23,574\nWhen you set up a NAP,\nnetwork access protection.\n\n459\n00:22:23,574 --> 00:22:26,503\nOne of the things with NAP is you\ncan set up IP filters there, and\n\n460\n00:22:26,503 --> 00:22:29,282\nthat's how you create your\nremediation network, right?\n\n461\n00:22:29,282 --> 00:22:29,990\n>> Exactly.\n\n462\n00:22:29,990 --> 00:22:31,370\n>> You filter what people can get to.\n\n463\n00:22:31,370 --> 00:22:35,690\nIt's the same concept, but it's done\nnot here in routing and remote access,\n\n464\n00:22:35,690 --> 00:22:37,900\nthat's done over in\nthe network policy server.\n\n465\n00:22:37,900 --> 00:22:40,480\nLet me I think I have that on this server.\n\n466\n00:22:40,480 --> 00:22:41,645\nI'd better have it.\nI need it for later.\n\n467\n00:22:41,645 --> 00:22:44,840\n[LAUGH] So in your network policy server.\n\n468\n00:22:44,840 --> 00:22:46,140\nLet me see if I can find this real quick.\n\n469\n00:22:46,140 --> 00:22:48,250\nIn your network policy server,\n\n470\n00:22:48,250 --> 00:22:52,615\nif you go to policies and\nConnection Request Policies.\n\n471\n00:22:52,615 --> 00:22:55,895\nOr is it under network policies?\n\n472\n00:22:55,895 --> 00:22:57,095\nIs it network policies?\n\n473\n00:22:57,095 --> 00:22:57,835\nOkay.\n\n474\n00:22:57,835 --> 00:23:01,565\nUnder network policies,\nwhen you define your policy that says,\n\n475\n00:23:01,565 --> 00:23:03,975\nthe connection request is\nwho's allowed to connect, and\n\n476\n00:23:03,975 --> 00:23:07,060\nthen the network policy is what they're\nallowed to do once they get connected.\n\n477\n00:23:07,060 --> 00:23:10,500\nSo if we go into the Network Policy and\nI'll just pick one at random here.\n\n478\n00:23:10,500 --> 00:23:13,330\nI will try and pick one at random.\n\n479\n00:23:13,330 --> 00:23:18,440\nWhen you go under the Settings for that\npolicy, you'll see IP Filters right there.\n\n480\n00:23:18,440 --> 00:23:21,660\nAnd you'll see input and\noutput filters for IPv4 and IPv6.\n\n481\n00:23:21,660 --> 00:23:25,670\nThey work exactly the same as\nthe filters surrounding remote access.\n\n482\n00:23:25,670 --> 00:23:27,220\n>> Yeah.\nI think it's the same wizard that pops up\n\n483\n00:23:27,220 --> 00:23:28,030\nwhen you click it.\n\n484\n00:23:28,030 --> 00:23:28,530\n>> Oh is it?\n\n485\n00:23:29,820 --> 00:23:32,020\nIt sure is, yeah,\nit is basically the same.\n\n486\n00:23:32,020 --> 00:23:35,670\nIt's already got a little bit of data\npumped in there just by default, but\n\n487\n00:23:35,670 --> 00:23:36,950\n>> That default policy,\n\n488\n00:23:36,950 --> 00:23:39,420\nthat one that it creates and\ndrops everything just in case.\n\n489\n00:23:39,420 --> 00:23:40,131\n>> Yep.\n\n490\n00:23:40,131 --> 00:23:42,809\nSo you can tweak that to\nyour heart's content, but\n\n491\n00:23:42,809 --> 00:23:46,610\nthat's only gonna apply to people\nthat are connecting through the NPS,\n\n492\n00:23:46,610 --> 00:23:49,244\nwhich your site to site\nVPNs don't do by default.\n\n493\n00:23:49,244 --> 00:23:53,662\nSo, These filters don't really\napply to a site-to-site VPN,\n\n494\n00:23:53,662 --> 00:23:56,000\nthey apply to remote access VPNs.\n\n495\n00:23:56,000 --> 00:24:00,860\nWhen somebody's using PPTP, L2TP,\nyou can filter their access right here.\n\n496\n00:24:01,940 --> 00:24:05,610\nSo different IP filters are available for\ndifferent needs.\n\n497\n00:24:05,610 --> 00:24:08,790\nIf it's remote access VPNs,\nyou're gonna come in here to NPS.\n\n498\n00:24:08,790 --> 00:24:10,740\nBut for site-to-site VPNs,\n\n499\n00:24:10,740 --> 00:24:13,829\nyou do it through packet filters right\nthere in routing and remote access.\n\n500\n00:24:15,870 --> 00:24:19,640\nAlright, the next thing I wanna take\na look at is when you start to get this\n\n501\n00:24:19,640 --> 00:24:23,020\nstuff configured,\nhow do you know it's really working?\n\n502\n00:24:23,020 --> 00:24:24,620\n>> Right.\n[LAUGH] >> How do you really know?\n\n503\n00:24:24,620 --> 00:24:26,465\n>> I'm pretty sure I set it up correctly.\n\n504\n00:24:26,465 --> 00:24:31,910\n>> [LAUGH] So one of the things we like\nto do is we like to fire up a sniffer,\n\n505\n00:24:31,910 --> 00:24:35,430\nand capture traffic and\nlook at what's going on there.\n\n506\n00:24:35,430 --> 00:24:37,600\nOne of the problems with\ntroubleshooting a VPM,\n\n507\n00:24:37,600 --> 00:24:41,360\nthough, is how do you use\na sniffer on encrypted traffic?\n\n508\n00:24:41,360 --> 00:24:42,030\n>> Right.\n\n509\n00:24:42,030 --> 00:24:43,570\n>> It's encrypted, right?\n\n510\n00:24:43,570 --> 00:24:46,750\nSo how do you know what ports of\ntraffic are allowed to pass over?\n\n511\n00:24:46,750 --> 00:24:47,950\nYou don't.\n\n512\n00:24:47,950 --> 00:24:49,700\nAnd so\nwhat we need to do is if we're gonna run\n\n513\n00:24:49,700 --> 00:24:52,530\na sniffer to capture this traffic we\ngotta run the sniffer at a place where\n\n514\n00:24:52,530 --> 00:24:53,940\nthe traffic's not encrypted yet.\n\n515\n00:24:53,940 --> 00:24:57,380\nAnd the only place that happens\nis right on the server itself.\n\n516\n00:24:57,380 --> 00:25:02,530\nIn other words, we need to run a sniffer,\nor a packet capture, on the server itself.\n\n517\n00:25:02,530 --> 00:25:04,430\nNow I know a lot of people\nthat'll go out there and\n\n518\n00:25:04,430 --> 00:25:09,150\nthey'll install wire shark or\nsomething like that on their server,\n\n519\n00:25:09,150 --> 00:25:12,010\non their routing and mode access server\nto be able to capture that traffic.\n\n520\n00:25:12,010 --> 00:25:13,840\nThere's problems with that, right?\n\n521\n00:25:13,840 --> 00:25:17,480\nA routing or remote access server is\nalmost always exposed to the Internet.\n\n522\n00:25:17,480 --> 00:25:20,780\nAnd when you have a server that's exposed\nto the Internet you want to minimize\n\n523\n00:25:20,780 --> 00:25:22,090\nthe security footprint, right?\n\n524\n00:25:22,090 --> 00:25:23,650\nYou don't want to install\na bunch of extra junk.\n\n525\n00:25:24,840 --> 00:25:27,420\nAnd when you install software,\nespecially open source software,\n\n526\n00:25:27,420 --> 00:25:29,860\nit normally depends on a lot\nof extra libraries and\n\n527\n00:25:29,860 --> 00:25:34,120\nextra software that may not have undergone\nthe most stringent of security reviews.\n\n528\n00:25:34,120 --> 00:25:37,690\nEven if it has, it's gonna be adding\nfunctionality with a server that's\n\n529\n00:25:37,690 --> 00:25:40,420\nnot actually increasing functionality.\n\n530\n00:25:40,420 --> 00:25:41,300\nRight?\n\n531\n00:25:41,300 --> 00:25:43,770\nIf you have a routing remote\naccess where people VPN into it,\n\n532\n00:25:43,770 --> 00:25:46,020\nthat's what you need functionality for.\n\n533\n00:25:46,020 --> 00:25:48,740\nThis packet sniffer,\nthat's helping you, but\n\n534\n00:25:48,740 --> 00:25:51,640\nit's not improving what that\nservers actual purpose is.\n\n535\n00:25:51,640 --> 00:25:55,910\nSo any time we can avoid installing\nsoftware on the server the better.\n\n536\n00:25:55,910 --> 00:26:00,100\nAnd one of the neat things that a lot of\npeople don't know is that Windows actually\n\n537\n00:26:00,100 --> 00:26:04,690\nhas a packet [LAUGH] capture\ndriver built into it.\n\n538\n00:26:04,690 --> 00:26:05,650\n>> Right.\n>> And it's actually got\n\n539\n00:26:05,650 --> 00:26:10,620\nit built in where it can generate dumps of\nnetwork traffic and then we can read and\n\n540\n00:26:10,620 --> 00:26:12,005\ninterpret them and do whatever we want.\n\n541\n00:26:12,005 --> 00:26:12,800\n>> Mm-hm.\n\n542\n00:26:12,800 --> 00:26:14,390\n>> So let me give you an example,\n\n543\n00:26:14,390 --> 00:26:17,000\nI know we're a little short on time on\nthis segment, but I'm going to push it.\n\n544\n00:26:17,000 --> 00:26:17,990\n>> Let's do it.\n>> So let\n\n545\n00:26:17,990 --> 00:26:19,980\nme show you what I'm talking about.\n\n546\n00:26:19,980 --> 00:26:22,500\nLet's say this was my\nremote access server.\n\n547\n00:26:22,500 --> 00:26:23,390\nOkay.\n\n548\n00:26:23,390 --> 00:26:26,210\nAnd I want to troubleshoot and\n\n549\n00:26:26,210 --> 00:26:30,980\nverify that traffic that I put an IP\nfilter in is actually being filtered.\n\n550\n00:26:30,980 --> 00:26:33,900\nOr I just want to look at the types of\ntraffic that are on there right now to\n\n551\n00:26:33,900 --> 00:26:34,870\nplan my filters.\n\n552\n00:26:34,870 --> 00:26:36,890\n>> Maybe you missed something\nthat you want to try to filter,\n\n553\n00:26:36,890 --> 00:26:38,290\nput a filter in place for.\n\n554\n00:26:38,290 --> 00:26:40,650\n>> Yeah.\nIf you're an all new employee for\n\n555\n00:26:40,650 --> 00:26:41,480\na company, they tell you hey,\n\n556\n00:26:41,480 --> 00:26:44,010\nwe really need to filter\nthe connections on those links.\n\n557\n00:26:44,010 --> 00:26:45,780\nYou might know what type\nof traffic is normal.\n\n558\n00:26:45,780 --> 00:26:48,260\nSo, how do we even see what is normal?\n\n559\n00:26:48,260 --> 00:26:52,260\nSo I want to capture the traffic on my\nnetwork interfaces for a period of time so\n\n560\n00:26:52,260 --> 00:26:53,542\nI can analyze it and look at the traffic.\n\n561\n00:26:53,542 --> 00:26:58,330\nAlright, so the first thing I'm gonna do\nis I'm going to fire up a command prompt,\n\n562\n00:26:58,330 --> 00:27:01,560\nand in order to do this it does need\nto be an elevated command prompt.\n\n563\n00:27:01,560 --> 00:27:04,380\nSo I'm going to do the old\nrun as administrator action.\n\n564\n00:27:06,170 --> 00:27:09,985\nAlright, and I'm gonna just make\na directory for me to work in.\n\n565\n00:27:09,985 --> 00:27:13,045\nLet me just make a directory called temp.\n\n566\n00:27:14,635 --> 00:27:15,715\nWhoops.\n\n567\n00:27:15,715 --> 00:27:17,115\nThere we go, alright.\n\n568\n00:27:17,115 --> 00:27:18,585\nSo I got a directory, and it's empty,\n\n569\n00:27:18,585 --> 00:27:22,105\nthis is where I'm going to\nput my what's called a trace.\n\n570\n00:27:22,105 --> 00:27:26,085\nIn Microsoft land when you do a packet\ncapture, when you gather this data,\n\n571\n00:27:26,085 --> 00:27:28,350\nit's called a trace or a network trace.\n\n572\n00:27:28,350 --> 00:27:31,010\nWe're gonna gather that information and\nstore it in a file.\n\n573\n00:27:31,010 --> 00:27:34,100\nAnd, so, while this is running, it's\nbasically just going to harvest all of\n\n574\n00:27:34,100 --> 00:27:36,840\nthe traffic that's hitting\nthat network adapter and\n\n575\n00:27:36,840 --> 00:27:38,510\ndump it into a file that I can then go and\nlook at.\n\n576\n00:27:38,510 --> 00:27:40,150\n>> Yep.\n>> Alright?\n\n577\n00:27:40,150 --> 00:27:42,140\nTo turn it on, we use NetSH.\n\n578\n00:27:43,430 --> 00:27:46,379\nAnd with NetSH,\nit's a very powerful command, right?\n\n579\n00:27:46,379 --> 00:27:47,860\n>> [LAUGH]\n>> The network shell command.\n\n580\n00:27:47,860 --> 00:27:49,150\nIt does a ton of stuff.\n\n581\n00:27:50,200 --> 00:27:54,450\nAnd we're going to be using\nthe NetSH Trace functionality.\n\n582\n00:27:54,450 --> 00:27:57,890\nNow when you turn on the trace,\nMicrosoft has designed it for\n\n583\n00:27:57,890 --> 00:28:01,410\ntroubleshooting and it's got\na number of different modes it can\n\n584\n00:28:01,410 --> 00:28:05,160\nrun in to help you with troubleshooting\nand those modes are called scenarios.\n\n585\n00:28:05,160 --> 00:28:09,789\nSo I usually start with NetSH\ntrace show scenarios, alright?\n\n586\n00:28:09,789 --> 00:28:14,110\nAnd that will give me a list of\nthe scenarios that I can use.\n\n587\n00:28:14,110 --> 00:28:17,510\nAnd you'll see the list over\nhere of what we can do.\n\n588\n00:28:17,510 --> 00:28:21,340\nAnd, let me,\nI guess I can't make it look wider.\n\n589\n00:28:21,340 --> 00:28:24,550\nBut you'll see like address\nacquisition and so on.\n\n590\n00:28:24,550 --> 00:28:29,100\nAddress acquisition, that's great for\ntrouble-shooting things like DHP or\n\n591\n00:28:29,100 --> 00:28:30,280\nIPV6 for that matter.\n\n592\n00:28:30,280 --> 00:28:31,680\nRight?\nHow you get your address.\n\n593\n00:28:31,680 --> 00:28:33,110\n>> Picking up that advertisement.\n\n594\n00:28:33,110 --> 00:28:34,280\n>> Direct access.\n\n595\n00:28:34,280 --> 00:28:35,350\nHaving problems with direct access?\n\n596\n00:28:35,350 --> 00:28:39,250\nThis will start to dump the direct\naccess negotiation process that happens.\n\n597\n00:28:39,250 --> 00:28:41,040\nReally good for troubleshooting.\n\n598\n00:28:41,040 --> 00:28:44,040\nFile sharing, internet client,\ninternet server, and so on.\n\n599\n00:28:44,040 --> 00:28:47,380\nEach of these, and they give you little\ndescriptions here of what each one does,\n\n600\n00:28:47,380 --> 00:28:51,210\nfor being able to see\nwhat's actually happening.\n\n601\n00:28:51,210 --> 00:28:55,860\nNow, the one I go to almost 100%\nof the time is net connection.\n\n602\n00:28:55,860 --> 00:28:56,490\nAll right.\n\n603\n00:28:56,490 --> 00:28:59,250\nNet connection is\nthe most generic of them.\n\n604\n00:28:59,250 --> 00:29:02,460\nSee what it says, troubleshoot\nissues with network connections.\n\n605\n00:29:02,460 --> 00:29:06,220\nJust shows when people are establishing\nconnections, and starting to communicate.\n\n606\n00:29:06,220 --> 00:29:09,280\nSo it's really general, and if you're just\ntrying to see the types of traffic on\n\n607\n00:29:09,280 --> 00:29:10,821\nthe network, this is a great one to use.\n\n608\n00:29:12,742 --> 00:29:16,585\nAll right, so that's the scenario\nI'm gonna use, is net connection.\n\n609\n00:29:16,585 --> 00:29:18,765\nAnd the command that we're\ngonna use to turn this on,\n\n610\n00:29:18,765 --> 00:29:20,170\nit's actually kind of a long one.\n\n611\n00:29:20,170 --> 00:29:23,410\n[LAUGH] Some of the options\nyou could leave off I\n\n612\n00:29:23,410 --> 00:29:25,730\nhave the ones that I typically use.\n\n613\n00:29:25,730 --> 00:29:32,510\nSo I'm gonna say NetHS, trace, and\nyou know, this is a pretty long.\n\n614\n00:29:32,510 --> 00:29:33,380\nI'm gonna screen wrap.\n\n615\n00:29:33,380 --> 00:29:37,700\nI was thinking I could maybe\nmake my prompt a little wider.\n\n616\n00:29:37,700 --> 00:29:40,310\nLet's do that.\nI'll make the window size,\n\n617\n00:29:40,310 --> 00:29:43,090\nlet's see our width is 80,\nlet's go to 100.\n\n618\n00:29:43,090 --> 00:29:44,830\nAll right.\n\n619\n00:29:44,830 --> 00:29:45,666\nThat'll buy me a little more room.\n\n620\n00:29:45,666 --> 00:29:48,999\nSo I'm gonna do an NetSH trace, and\n\n621\n00:29:48,999 --> 00:29:54,453\nI'm gonna say start\nscenario=netConnection, right?\n\n622\n00:29:54,453 --> 00:29:58,250\nThat's my scenario that I'm picking so\nit knows what type of traffic to get.\n\n623\n00:29:58,250 --> 00:30:04,400\nI'm gonna say capture equals yes because\nI want it to save this to a file.\n\n624\n00:30:04,400 --> 00:30:06,540\nYou can actually tell it to\noutput to the screen if you want.\n\n625\n00:30:06,540 --> 00:30:09,120\nYou'd be crazy if you did that but\nyou can.\n\n626\n00:30:09,120 --> 00:30:10,448\n>> Just watching those packets scroll by.\n\n627\n00:30:10,448 --> 00:30:13,470\n>> I'll say report=yes.\n\n628\n00:30:13,470 --> 00:30:16,710\nIf I don't do that, I actually don't\nget any visual confirmation of what's\n\n629\n00:30:16,710 --> 00:30:20,555\ngoing on, but if I say report yes, when it\nfinishes it'll actually give me a little\n\n630\n00:30:20,555 --> 00:30:24,975\nbit of output about the summary\nof the data it connected.\n\n631\n00:30:24,975 --> 00:30:27,770\nI'm going to say persistent=no.\n\n632\n00:30:29,795 --> 00:30:32,345\nThat way if I forget about this and\nI reboot the server,\n\n633\n00:30:32,345 --> 00:30:33,600\nit's not going to keep capturing.\n\n634\n00:30:33,600 --> 00:30:34,455\n>> [LAUGH]\n>> You know,\n\n635\n00:30:34,455 --> 00:30:36,435\nI don't want it to survive a reboot.\n\n636\n00:30:37,895 --> 00:30:41,095\nCorrelation=yes.\n\n637\n00:30:41,095 --> 00:30:47,650\nWhen you start capturing data you're\nreally capturing PCs talking to other PCs.\n\n638\n00:30:47,650 --> 00:30:52,510\nAnd so it can correlate that\ntogether into communications.\n\n639\n00:30:52,510 --> 00:30:55,890\nIt can do it for you, or whatever\nsoftware you use to view this can do it.\n\n640\n00:30:55,890 --> 00:30:57,570\nI usually just like to have\nit do it ahead of time.\n\n641\n00:30:57,570 --> 00:30:59,440\nSo I'll say correlation equals yes.\n\n642\n00:30:59,440 --> 00:31:02,920\nWhen we stop this capture it's gonna\ntake it a moment to correlate that data.\n\n643\n00:31:02,920 --> 00:31:03,680\nWe'll see that happen.\n\n644\n00:31:03,680 --> 00:31:06,460\n>> It is nice, though, to put those\nconversations back together cause those\n\n645\n00:31:06,460 --> 00:31:09,070\npackets are coming in at a different\ntime but everybody's talking.\n\n646\n00:31:09,070 --> 00:31:11,600\nAnd so you don't know which packets\ngo with which conversation.\n\n647\n00:31:11,600 --> 00:31:14,750\n>> And then the last t hing I need to do\nis just to tell it where to store this\n\n648\n00:31:14,750 --> 00:31:17,450\njunk so I'll say trace file equals.\n\n649\n00:31:17,450 --> 00:31:23,030\nAnd, then,\nI'm going to put in C:\\temp\\trace.etl.\n\n650\n00:31:23,030 --> 00:31:23,780\nAlright.\n\n651\n00:31:23,780 --> 00:31:27,340\nThe ETL format--that's\nthe Event Trace Log.\n\n652\n00:31:27,340 --> 00:31:30,930\nIt's part of the performance\nmonitor in Windows.\n\n653\n00:31:30,930 --> 00:31:34,025\nIf you set up a data collector set.\n\n654\n00:31:34,025 --> 00:31:36,333\n>> Mm-hm.\n>> You'll know that the data collector set\n\n655\n00:31:36,333 --> 00:31:39,223\nwill generate ETL files that\ncontain Windows events and\n\n656\n00:31:39,223 --> 00:31:41,572\nall sorts of other actions and\ndata in there.\n\n657\n00:31:41,572 --> 00:31:43,104\nThis is that same format.\n\n658\n00:31:43,104 --> 00:31:44,986\nAll right, so I'm gonna start that up.\n\n659\n00:31:44,986 --> 00:31:50,000\nNow, while it's running, there's my little\nsummary as it gives me my configuration.\n\n660\n00:31:50,000 --> 00:31:53,620\nWhile it's running, it's gathering\ndata and it's writing it to that file.\n\n661\n00:31:53,620 --> 00:31:56,360\nIt's got a default max\nsize of 250 megabytes.\n\n662\n00:31:56,360 --> 00:32:00,090\nWhen it hits 250 megabytes,\nit's circular, so\n\n663\n00:32:00,090 --> 00:32:04,520\nit will go back and overwrite the old\nstuff to replace it with new stuff.\n\n664\n00:32:04,520 --> 00:32:07,300\nSo I'll have the last\n250 megabytes of stuff.\n\n665\n00:32:07,300 --> 00:32:09,360\nI could have done the command\nline options to override that.\n\n666\n00:32:09,360 --> 00:32:13,020\nI could have disabled the maximum size or\ndisabled circular logging.\n\n667\n00:32:13,020 --> 00:32:15,350\nThere's all sorts of\nadditional options here.\n\n668\n00:32:15,350 --> 00:32:17,300\nI'm just showing you the ones\nthat I normally use.\n\n669\n00:32:17,300 --> 00:32:20,480\nI normally only run this for a few minutes\nto gather troubleshooting data, so\n\n670\n00:32:20,480 --> 00:32:24,520\n250 megs of data is more than enough for\nme, all right?\n\n671\n00:32:24,520 --> 00:32:25,390\nSo that's gonna run.\n\n672\n00:32:25,390 --> 00:32:29,268\nNow while it's running it's building\nthis ETL file and the ETL file,\n\n673\n00:32:29,268 --> 00:32:31,843\nit's not really human readable, all right?\n\n674\n00:32:31,843 --> 00:32:36,700\nSo we're going to need some other software\nto come in here and help us interpret it.\n\n675\n00:32:36,700 --> 00:32:39,400\nWell, Microsoft has an utility\ncalled the Microsoft\n\n676\n00:32:39,400 --> 00:32:42,470\nnetwork monitor that can specifically\nopen and view this file.\n\n677\n00:32:42,470 --> 00:32:43,840\nWe can look at the data in it.\n\n678\n00:32:44,850 --> 00:32:45,790\nSo we can use that.\n\n679\n00:32:46,870 --> 00:32:50,910\nYou might be saying well, Don, that's all\nfine and good, but I like my Wireshark.\n\n680\n00:32:50,910 --> 00:32:53,240\nIs there a way we can read\nthis ETL file in Wireshark.\n\n681\n00:32:53,240 --> 00:32:55,120\nAnd the short answer is no.\n\n682\n00:32:55,120 --> 00:32:57,000\nWireshark doesn't support ETL.\n\n683\n00:32:57,000 --> 00:32:59,240\nBut the long answer is, yes,\n\n684\n00:32:59,240 --> 00:33:02,900\nyou can convert the ETL to\nthe standard capture file.\n\n685\n00:33:02,900 --> 00:33:06,310\nAnd you know, ETL has more in it\nthan just regular network captures.\n\n686\n00:33:06,310 --> 00:33:10,330\nSo Microsoft actually has a product\ncalled the Microsoft Message Analyzer.\n\n687\n00:33:10,330 --> 00:33:12,240\nYou can go and download it from Microsoft.\n\n688\n00:33:12,240 --> 00:33:15,400\nThen it'll open this ETL and\nyou can do a file and save as.\n\n689\n00:33:15,400 --> 00:33:17,232\nAnd you can save it as a cap file.\n\n690\n00:33:17,232 --> 00:33:19,220\nAnd then you can open that\nright up in Wireshark.\n\n691\n00:33:19,220 --> 00:33:20,540\nIt's pretty handy.\n\n692\n00:33:20,540 --> 00:33:22,400\nSo I know I've mentioned two products so\nfar.\n\n693\n00:33:22,400 --> 00:33:24,640\nThe first one is\nthe Microsoft Network Monitor, right?\n\n694\n00:33:24,640 --> 00:33:26,050\nThe current version is 3.4.\n\n695\n00:33:26,050 --> 00:33:28,890\nYou can download it right\nfrom Microsoft's website.\n\n696\n00:33:28,890 --> 00:33:32,090\nIn Windows server 2003 and earlier,\nit was actually included with the OS.\n\n697\n00:33:32,090 --> 00:33:34,040\nYou just had to add it as a feature.\n\n698\n00:33:34,040 --> 00:33:36,800\nBut in 2008 and newer, you've got to\ngo and download it from Microsoft.\n\n699\n00:33:36,800 --> 00:33:39,020\nSo, that's product number one\nthat we're talking about.\n\n700\n00:33:39,020 --> 00:33:41,580\nAnd I'll post the links\nwith the show notes.\n\n701\n00:33:41,580 --> 00:33:47,020\nAnd the other one is the Microsoft\nMessage Analyzer, which is in Beta.\n\n702\n00:33:48,890 --> 00:33:50,950\nAnd, let's see if we can find it here.\n\n703\n00:33:50,950 --> 00:33:51,940\nAnd, here we go.\n\n704\n00:33:51,940 --> 00:33:54,790\nThe Microsoft Message Analyzer, so you can\ngo and download it from their website.\n\n705\n00:33:54,790 --> 00:33:56,190\nActually, it doesn't say beta anymore.\n\n706\n00:33:56,190 --> 00:33:56,870\nDid it come out of beta?\n\n707\n00:33:58,480 --> 00:34:01,084\nI swear it was in beta ,just last week.\n\n708\n00:34:01,084 --> 00:34:05,688\nAll right,well anyhow, the Microsoft\nMessage Analyzer, it's a neat utility cuz\n\n709\n00:34:05,688 --> 00:34:08,655\nit's really designed to help you\nview event and performance logs.\n\n710\n00:34:08,655 --> 00:34:10,100\n>> Mm-hmm.\n>> But it has that\n\n711\n00:34:10,100 --> 00:34:12,920\nextra functionality of being able to\nexport into a standard capture file.\n\n712\n00:34:14,460 --> 00:34:18,290\nAll right, so if you want to use Wireshark\nto interpret your data, you can.\n\n713\n00:34:18,290 --> 00:34:19,450\nYou won't see that on the exam, right?\n\n714\n00:34:19,450 --> 00:34:22,170\nOn the exam it's going to be\nthe Microsoft Network Monitor.\n\n715\n00:34:22,170 --> 00:34:23,480\nAnd I've already downloaded it and\n\n716\n00:34:23,480 --> 00:34:26,360\ninstalled it so I've got my little\nicon right here on the desktop.\n\n717\n00:34:26,360 --> 00:34:28,100\nThat's what I'm going to use\nto read that capture file.\n\n718\n00:34:29,240 --> 00:34:31,980\nSo I probably need to stop that trace.\n\n719\n00:34:31,980 --> 00:34:34,338\nSo I'll go back to my command prompt and\nI'll do a netsh.\n\n720\n00:34:34,338 --> 00:34:37,442\nTrace, stop and it's going to stop it.\n\n721\n00:34:37,442 --> 00:34:40,260\nNow, notice it doesn't just stop and\nthat's it.\n\n722\n00:34:40,260 --> 00:34:42,535\nIt's gotta correlate the trace, all right?\n\n723\n00:34:42,535 --> 00:34:45,731\nSo it's correlating,\nmerging it, generating data and\n\n724\n00:34:45,731 --> 00:34:48,604\nthen it's gonna dump into an ETL file,\nall right?\n\n725\n00:34:48,604 --> 00:34:52,650\nThe more data you have and\nthe longer you're in this capture folder,\n\n726\n00:34:52,650 --> 00:34:55,740\nThe longer it's going to take to save,\nright?\n\n727\n00:34:55,740 --> 00:34:58,950\nOn a really busy network, you may have\nonly run it for a few seconds, but\n\n728\n00:34:58,950 --> 00:35:01,750\nit caught so much data that\nit takes a while to dump it.\n\n729\n00:35:01,750 --> 00:35:02,870\nSo, there we go.\n\n730\n00:35:02,870 --> 00:35:03,960\nSo, I gathered it.\n\n731\n00:35:03,960 --> 00:35:04,870\nI dumped the data.\n\n732\n00:35:04,870 --> 00:35:06,270\nAnd there's my ETL file,\n\n733\n00:35:06,270 --> 00:35:10,660\nit looks like I captured about six\nmegabytes of data in that time, right?\n\n734\n00:35:10,660 --> 00:35:12,990\nNow I can take my network monitor and\nI can open that up and\n\n735\n00:35:12,990 --> 00:35:16,580\nI can actually see the traffic\nthat was on the network.\n\n736\n00:35:16,580 --> 00:35:17,770\nSo I'll fire up the network monitor.\n\n737\n00:35:17,770 --> 00:35:20,790\nIt'll just ask me if I want to do Windows\nupdates or whatever; I'll say no.\n\n738\n00:35:22,608 --> 00:35:26,200\nAll right, if it's been a while since\nyou've used the network monitor,\n\n739\n00:35:26,200 --> 00:35:27,390\nit has changed a little bit.\n\n740\n00:35:27,390 --> 00:35:29,890\nNot much, it's still kind of crusty.\n\n741\n00:35:29,890 --> 00:35:31,610\n>> Rearranged the layout and everything.\n\n742\n00:35:31,610 --> 00:35:32,770\n>> It's never been the greatest.\n\n743\n00:35:32,770 --> 00:35:36,670\nI've always preferred Wireshark to it,\nbut it has changed a little bit.\n\n744\n00:35:36,670 --> 00:35:39,840\nIt is designed to do live captures.\n\n745\n00:35:39,840 --> 00:35:41,560\nWell, if I already have it\ninstalled in the server,\n\n746\n00:35:41,560 --> 00:35:43,115\nwhy not use this instead of Netsh?\n\n747\n00:35:43,115 --> 00:35:44,080\n>> Mm-hm.\n>> And you're right.\n\n748\n00:35:44,080 --> 00:35:46,480\nI could've just used this and\nbeen done, right?\n\n749\n00:35:46,480 --> 00:35:50,380\nBut the idea is you use Netsh to do the\ncapture on any of your servers cuz it's\n\n750\n00:35:50,380 --> 00:35:51,740\nbuilt in.\n\n751\n00:35:51,740 --> 00:35:54,540\nThen you take the ETL file and\nyou copy it to your desktop.\n\n752\n00:35:54,540 --> 00:35:57,410\nAnd on your desktop you run the network\nmonitor, or you run Wireshark.\n\n753\n00:35:57,410 --> 00:36:00,650\nSee you're installing stuff on\nyour client, not on the server.\n\n754\n00:36:00,650 --> 00:36:03,580\nSo that's the real take home lesson here,\n\n755\n00:36:03,580 --> 00:36:05,400\nis don't install stuff on your\nserver if you don't have to.\n\n756\n00:36:06,560 --> 00:36:09,010\nWell you'll see right here where\nI can open up a capture file and\n\n757\n00:36:09,010 --> 00:36:10,650\nI'll go ahead and choose that and\n\n758\n00:36:10,650 --> 00:36:13,830\nI'm gonna browse to that C:/temp\nfolder that I made a moment ago.\n\n759\n00:36:14,850 --> 00:36:15,700\nThere it is.\n\n760\n00:36:15,700 --> 00:36:19,070\nAnd there's my trace.etl file and\nI'll crack that open.\n\n761\n00:36:19,070 --> 00:36:20,610\nNow, this part can take a minute.\n\n762\n00:36:21,700 --> 00:36:25,500\nWhen it opens it up,\nwhat it's doing is called parsing.\n\n763\n00:36:25,500 --> 00:36:28,790\nIt's parsing all of the packets\nthat it gathered, and\n\n764\n00:36:28,790 --> 00:36:31,770\ngetting that information ready to display,\nall right?\n\n765\n00:36:31,770 --> 00:36:32,400\nOn the left side,\n\n766\n00:36:32,400 --> 00:36:36,890\nI can see my network conversations, this\nis where it correlated that data together.\n\n767\n00:36:36,890 --> 00:36:41,810\nSo during that time it recorded 412\ndifferent conversations And then in\n\n768\n00:36:41,810 --> 00:36:46,960\neach conversation, you have the actual\npackets that it gathered all right here.\n\n769\n00:36:46,960 --> 00:36:50,070\nAnd while there were 412 conversations,\n\n770\n00:36:50,070 --> 00:36:54,620\nthere were 29,000 packets or\nframes that it actually gathered, right?\n\n771\n00:36:54,620 --> 00:36:56,710\nSo I'll see all of those right in here.\n\n772\n00:36:56,710 --> 00:36:58,983\nThere's a lot, all right?\n\n773\n00:36:58,983 --> 00:37:02,870\nNow, one of the things they've changed in\nthe newer versions of the network monitor,\n\n774\n00:37:02,870 --> 00:37:05,670\nis you have what are called\nParser profiles and\n\n775\n00:37:05,670 --> 00:37:09,610\nthese dictate how much information\nyou see on each of these frames.\n\n776\n00:37:09,610 --> 00:37:13,950\nIf I pick a frame, down here it starts\nto give me information about it, and\n\n777\n00:37:13,950 --> 00:37:17,160\nI can expand it out and\nsee what was going on in there.\n\n778\n00:37:17,160 --> 00:37:22,050\nWell, when you run these,\nthe first time you go in here,\n\n779\n00:37:22,050 --> 00:37:24,760\nyou'll start to see this\nerror message a lot.\n\n780\n00:37:24,760 --> 00:37:31,110\nSee how it says system trace Windows stub\nparser requires full common parsers,\n\n781\n00:37:31,110 --> 00:37:36,610\nsee blah blah blah, it references some\ntext file that I've never actually seen.\n\n782\n00:37:36,610 --> 00:37:43,100\nSo, what it's telling you is, here's\nthe frame, here's this raw hexadecimal\n\n783\n00:37:43,100 --> 00:37:47,285\ndata that was in the frame, and here's\na basic breakdown of what was in there.\n\n784\n00:37:47,285 --> 00:37:47,970\n>> Mm-Hm.\n\n785\n00:37:47,970 --> 00:37:50,450\n>> But it's not very detailed, is it?\n\n786\n00:37:50,450 --> 00:37:53,115\nOr maybe super detailed,\nnot human readable.\n\n787\n00:37:53,115 --> 00:37:54,050\n>> Right.\n\n788\n00:37:54,050 --> 00:37:58,240\n>> So what you'll want to do is up\ntop you've got parser profiles, and\n\n789\n00:37:58,240 --> 00:38:03,390\njust drop that down and under network\nmonitor parsers you'll see Windows.\n\n790\n00:38:03,390 --> 00:38:06,230\nAnd there's third parties out there\nthat'll publish parsers just for\n\n791\n00:38:06,230 --> 00:38:09,040\ntheir software, that'll help with\ntroubleshooting their software.\n\n792\n00:38:09,040 --> 00:38:11,670\nBut in my case we're just doing Windows,\nso I'll choose that.\n\n793\n00:38:11,670 --> 00:38:17,220\nAnd it's gonna reparse all that junk,\nI mean data, I shouldn't call it junk.\n\n794\n00:38:17,220 --> 00:38:21,490\nIt's gonna reparse all that, and\nnow I'll get more informative information,\n\n795\n00:38:21,490 --> 00:38:25,080\nmore plain English speak,\nbut it does take a while\n\n796\n00:38:25,080 --> 00:38:29,570\nbecause of 30,000 frames that's going\nthrough and it's churning along.\n\n797\n00:38:29,570 --> 00:38:32,380\nBut now we'll see a little\nbit better information and\n\n798\n00:38:32,380 --> 00:38:34,620\nI'll stop getting that warning.\n\n799\n00:38:34,620 --> 00:38:36,605\nSo, you know,\nhere I am on that same frame.\n\n800\n00:38:36,605 --> 00:38:37,180\n>> Mm-hm.\n\n801\n00:38:37,180 --> 00:38:40,730\n>> And when I go down here,\nI don't see that parser warning anymore.\n\n802\n00:38:40,730 --> 00:38:44,740\nNow I actually just see the data\nassociated with the frame, and\n\n803\n00:38:44,740 --> 00:38:47,140\neither it's useful information or\nit's not.\n\n804\n00:38:47,140 --> 00:38:49,290\nIt doesn't bog me down\nwith anything else crazy.\n\n805\n00:38:49,290 --> 00:38:49,790\n>> Right.\n\n806\n00:38:50,850 --> 00:38:54,690\n>> But you can break this down and you can\nlook at the layer two, layer three network\n\n807\n00:38:54,690 --> 00:38:58,030\ndata and you can start to evaluate\nwhich traffic actually went through.\n\n808\n00:38:58,030 --> 00:38:58,970\nYou can customize this.\n\n809\n00:38:58,970 --> 00:39:03,070\nYou can do all sorts of filters\nto interpret that information.\n\n810\n00:39:03,070 --> 00:39:05,110\nThere's a ton of power here\nin the network monitor.\n\n811\n00:39:06,450 --> 00:39:09,640\nOn the exam, they're not gonna expect\nyou to use the Network Monitor to break\n\n812\n00:39:09,640 --> 00:39:12,820\nsomething down, but they want you to\nknow this is the tool that you'd use.\n\n813\n00:39:12,820 --> 00:39:15,520\nYou need to be familiar with\nthat to understand how we can go\n\n814\n00:39:15,520 --> 00:39:16,480\nand break that down.\n\n815\n00:39:16,480 --> 00:39:18,785\nAnd when you're designing\nthe network Network,\n\n816\n00:39:18,785 --> 00:39:23,775\nthe network monitor's a great way to see\nwhat types of traffic are out there.\n\n817\n00:39:23,775 --> 00:39:28,325\nThen you can start to get that view or\nwhatever of what was happening.\n\n818\n00:39:28,325 --> 00:39:30,977\nAnd you'll see where you've got\nthese summary views up top,\n\n819\n00:39:30,977 --> 00:39:32,511\nwhich are pretty handy, you know.\n\n820\n00:39:32,511 --> 00:39:34,392\nIf we go to frame summaries.\n\n821\n00:39:34,392 --> 00:39:38,258\nLet's see, network conversation.\n\n822\n00:39:38,258 --> 00:39:41,693\nWhich one actually There's one\nview in here in particular\n\n823\n00:39:41,693 --> 00:39:45,617\nthat really breaks it down and\ngives you a nice, this is my fault for\n\n824\n00:39:45,617 --> 00:39:48,580\nusing, cuz I use Wireshark\nalmost exclusively.\n\n825\n00:39:48,580 --> 00:39:51,390\nBut there is a view in here\nwhere it gives you a summary of\n\n826\n00:39:51,390 --> 00:39:53,140\nthe top protocols and stuff.\n\n827\n00:39:53,140 --> 00:39:54,170\nI'm just not seeing it.\n\n828\n00:39:54,170 --> 00:39:56,160\nBut, it's buried away in here.\n\n829\n00:39:56,160 --> 00:39:58,920\nBut you can start to break that\nstuff down and really see things.\n\n830\n00:39:58,920 --> 00:40:01,750\nIt doesn't help that I was monitoring on\na server that had next to no traffic.\n\n831\n00:40:01,750 --> 00:40:02,300\n>> Right.\n\n832\n00:40:02,300 --> 00:40:04,720\n>> But you can see the source and\ndestination IPs.\n\n833\n00:40:04,720 --> 00:40:08,550\nYou can modify these columns to add in\nthe port numbers that were being used.\n\n834\n00:40:08,550 --> 00:40:10,518\nYou can break the protocols\ndown from there.\n\n835\n00:40:10,518 --> 00:40:14,500\nI see TCP/IP and UDP, and it's trying\nto figure out what the stuff is, too.\n\n836\n00:40:14,500 --> 00:40:17,290\nSo you'll see where it\ninterprets it a little bit.\n\n837\n00:40:17,290 --> 00:40:21,550\nThere should be some HTTP traffic in\nhere from when i was browsing the web.\n\n838\n00:40:21,550 --> 00:40:23,720\nYeah there is so\nmuch stuff in here though.\n\n839\n00:40:23,720 --> 00:40:26,765\n>> Yeah, that's where those filters really\ncome in handy cuz they can eliminate or\n\n840\n00:40:26,765 --> 00:40:29,115\njust look for a particular type or\nwhatever I'm looking for.\n\n841\n00:40:29,115 --> 00:40:32,880\n>> Yep, so, neat utility,\nneat functionality,\n\n842\n00:40:32,880 --> 00:40:36,350\na lot of people don't know you can do a\npacket capture on a Windows server without\n\n843\n00:40:36,350 --> 00:40:40,590\ninstalling WinPcap or third party\nsoftware for doing captures like that.\n\n844\n00:40:40,590 --> 00:40:41,490\nIt's just built in.\n\n845\n00:40:41,490 --> 00:40:42,610\nYour system will do it.\n\n846\n00:40:42,610 --> 00:40:46,230\nDon't install software on\nthe server if you don't have to.\n\n847\n00:40:46,230 --> 00:40:48,162\nAll right, well, I know we ran\na little long in this segment but\n\n848\n00:40:48,162 --> 00:40:50,090\nI wanted to get through that\n>> Good stuff.\n\n849\n00:40:50,090 --> 00:40:53,010\n>> We've got a few other things\nto talk about on this one.\n\n850\n00:40:53,010 --> 00:40:55,759\nWe need to talk a little\nbit about RADIUS servers,\n\n851\n00:40:55,759 --> 00:40:57,792\nweb application proxies and stuff.\n\n852\n00:40:57,792 --> 00:41:01,134\nSo we got a few more odds and ends that we\nare going to cover in the next second, so\n\n853\n00:41:01,134 --> 00:41:03,276\nstay tuned,\nwe'll be back with more after this.\n\n854\n00:41:03,276 --> 00:41:10,448\n[SOUND]\nAll right.\n\n855\n00:41:10,448 --> 00:41:12,360\nWelcome back everybody.\n\n856\n00:41:12,360 --> 00:41:17,340\nSo, in our previous episode in part two,\none of the things that I talked about\n\n857\n00:41:17,340 --> 00:41:22,360\nin there was how you could have\nmore than one RADIUS server.\n\n858\n00:41:22,360 --> 00:41:23,180\nAnd how that was\n\n859\n00:41:23,180 --> 00:41:26,180\nreally handy if you were doing\nNetwork Access Protection, you know NAP.\n\n860\n00:41:26,180 --> 00:41:26,780\n>> Right.\n>> That,\n\n861\n00:41:26,780 --> 00:41:30,300\nyou didn't want an environment where\nif your RADIUS server goes down,\n\n862\n00:41:30,300 --> 00:41:34,480\nall of the sudden non-healthy machines\nare being allowed on your network, right?\n\n863\n00:41:34,480 --> 00:41:36,460\nBut it actually goes even beyond NAP.\n\n864\n00:41:36,460 --> 00:41:38,940\nIf you're just doing regular VPN access or\n\n865\n00:41:38,940 --> 00:41:41,890\nwhatever, when people VPN in\nthey gotta get authenticated.\n\n866\n00:41:41,890 --> 00:41:44,670\nAnd you're typically going to use\nyour RADIUS server to do that.\n\n867\n00:41:44,670 --> 00:41:47,220\nIf it goes down, you're in trouble, right?\n\n868\n00:41:47,220 --> 00:41:50,774\nSo I talked about how we can have more\nthan one RADIUS server to provide\n\n869\n00:41:50,774 --> 00:41:53,606\nredundancy and availability and\nall that good stuff.\n\n870\n00:41:53,606 --> 00:41:55,455\nBut we didn't actually show how to do it.\n\n871\n00:41:55,455 --> 00:41:58,909\nAnd if you went back checking the 7410 or\n411, 412 show,\n\n872\n00:41:58,909 --> 00:42:01,010\nwd didn't really do it there either.\n\n873\n00:42:01,010 --> 00:42:02,560\n>> Nope.\n>> And the reason is this is one of\n\n874\n00:42:02,560 --> 00:42:06,627\nthe few implementing ones that\nthey sneak in on the 4-13 exam.\n\n875\n00:42:06,627 --> 00:42:08,880\nSo I wanted to talk to you, or\nnot just talk you through it, but\n\n876\n00:42:08,880 --> 00:42:12,860\nactually show you the process of setting\nup that kind of redundant infrastructure\n\n877\n00:42:12,860 --> 00:42:14,550\nif you've got more than one RADIUS box.\n\n878\n00:42:15,792 --> 00:42:19,440\nAll right now, the first thing we need\nto remember is where to set this up.\n\n879\n00:42:19,440 --> 00:42:22,180\nSo if you jump into your\nnetwork policy server.\n\n880\n00:42:22,180 --> 00:42:25,500\nActually let me get out of this,\nwe'll start from scratch right?\n\n881\n00:42:25,500 --> 00:42:29,470\nSo here's my server that's running\nrouting and remote access and\n\n882\n00:42:29,470 --> 00:42:32,970\nI've also got the network\npolicy server installed on it.\n\n883\n00:42:32,970 --> 00:42:36,640\nAnd remember when you're setting up\nan authentication server for NAP or\n\n884\n00:42:36,640 --> 00:42:41,370\nanything else, it's the NPS, the network\npolicy server, that acts as RADIUS.\n\n885\n00:42:41,370 --> 00:42:46,190\nNow you can split that up, so you've got\none policy server versus a separate RADIUS\n\n886\n00:42:46,190 --> 00:42:47,760\nserver, and that's pretty common.\n\n887\n00:42:47,760 --> 00:42:48,600\nYou can do that.\n\n888\n00:42:48,600 --> 00:42:53,060\nI know what a lot of people will do is\nthey'll take their domain controllers and\n\n889\n00:42:53,060 --> 00:42:56,570\nmake them RADIUS servers so\nthey can do both types of authentication,\n\n890\n00:42:56,570 --> 00:42:57,550\nand that's fine.\n\n891\n00:42:57,550 --> 00:43:01,040\nOr you can do separate servers\nif you're worrying about scale.\n\n892\n00:43:01,040 --> 00:43:04,660\nWell, when we go inside of\nour network policy server,\n\n893\n00:43:04,660 --> 00:43:06,530\nyou'll see RADIUS clients and servers.\n\n894\n00:43:06,530 --> 00:43:10,170\nIf you're going to be the RADIUS client,\nyou can go in and\n\n895\n00:43:10,170 --> 00:43:13,090\nspecify what servers you're using\nin your remote server groups.\n\n896\n00:43:13,090 --> 00:43:14,062\nActually I got one sitting right there.\n\n897\n00:43:14,062 --> 00:43:15,710\nLet me just get that guy out of there.\n\n898\n00:43:15,710 --> 00:43:16,790\nThere we go.\n\n899\n00:43:16,790 --> 00:43:18,870\nBut you'll also see your RADIUS clients.\n\n900\n00:43:18,870 --> 00:43:22,480\nIf you're the server, these are the people\nthat are allowed to connect to you.\n\n901\n00:43:22,480 --> 00:43:24,280\nWhen you install NPS,\n\n902\n00:43:24,280 --> 00:43:29,110\nyou have the capability of being both\na RADIUS server or a RADIUS client, right.\n\n903\n00:43:29,110 --> 00:43:30,150\nYou can actually.\n\n904\n00:43:30,150 --> 00:43:31,580\nYou could actually be\nboth at the same time.\n\n905\n00:43:31,580 --> 00:43:35,000\nThere's not really any reason to do that,\nbut you could.\n\n906\n00:43:35,000 --> 00:43:37,740\nSo having NPS,\nthat's the first step, right?\n\n907\n00:43:37,740 --> 00:43:40,530\nWe get the network policy server\ninstalled and that's just, you know,\n\n908\n00:43:40,530 --> 00:43:41,820\na role that we have in our system.\n\n909\n00:43:41,820 --> 00:43:42,660\nWe've seen that before.\n\n910\n00:43:43,880 --> 00:43:48,220\nWhere it gets a little tricky is getting\nourselves configured to use these servers.\n\n911\n00:43:48,220 --> 00:43:53,270\nWhen we go in here and create RADIUS\nservers, you can specify a RADIUS group or\n\n912\n00:43:53,270 --> 00:43:55,560\ncollection of servers, right?\n\n913\n00:43:55,560 --> 00:43:59,735\nYou can do it here or you can do it\nmanually on your connection policies.\n\n914\n00:43:59,735 --> 00:44:02,620\nNow remember earlier in the show,\nwe did IP filters.\n\n915\n00:44:02,620 --> 00:44:05,540\nWe went under network policies and\nmodified our network policies here.\n\n916\n00:44:05,540 --> 00:44:09,200\nThat's after somebody's connected and\nwe apply limits.\n\n917\n00:44:09,200 --> 00:44:11,290\nBut RADIUS, that's when they connect.\n\n918\n00:44:11,290 --> 00:44:13,980\nSo, we need to go to our\nconnection request policy.\n\n919\n00:44:13,980 --> 00:44:18,850\nAnd in here you'll have your policies for\nremote access server VPN dialup or\n\n920\n00:44:18,850 --> 00:44:20,260\nwhatever it is you are providing.\n\n921\n00:44:21,440 --> 00:44:26,540\nAnd if you pull up the properties of\nthat policy, you'll see under Settings,\n\n922\n00:44:26,540 --> 00:44:29,310\nthat's where we've got our\nauthentication methods, all right?\n\n923\n00:44:29,310 --> 00:44:32,260\nAnd here's where we can specify the\ndifferent ways that people authenticate.\n\n924\n00:44:32,260 --> 00:44:35,180\nAnd the default is just to go with\nwhatever the system supports,\n\n925\n00:44:35,180 --> 00:44:38,870\nwhich is usually EAP and MS-CHAP version\n2, unless you've messed with it.\n\n926\n00:44:38,870 --> 00:44:41,240\n>> A lot of times we'll specify\nthose in our network policies.\n\n927\n00:44:43,070 --> 00:44:45,070\n>> But, if you go beneath that,\n\n928\n00:44:45,070 --> 00:44:48,890\nyou'll see Forwarding Connection Request\n> Authentication, right.\n\n929\n00:44:48,890 --> 00:44:51,745\nAnd right here where it says, how are we\ngoing to authenticate these users.\n\n930\n00:44:51,745 --> 00:44:55,010\nThe default is to authenticate\nright here on this server.\n\n931\n00:44:55,010 --> 00:44:57,880\nSo that means anybody who connects\nhas to have a user account and\n\n932\n00:44:57,880 --> 00:45:00,230\npassword right here on the server.\n\n933\n00:45:00,230 --> 00:45:01,621\nNow if this server is a domain controller,\n\n934\n00:45:01,621 --> 00:45:03,540\nthat means then you'd\nhave a domain account.\n\n935\n00:45:03,540 --> 00:45:06,050\nBut if they're a member\nserver like this one is for\n\n936\n00:45:06,050 --> 00:45:08,340\nme, then it's just our\nlocal user database.\n\n937\n00:45:08,340 --> 00:45:09,790\nWe don't typically wanna use that.\n\n938\n00:45:09,790 --> 00:45:14,390\nAnd that's cuz we don't want people to\nhave multiple accounts and all that mess.\n\n939\n00:45:14,390 --> 00:45:16,040\nBut you'll see right here,\n\n940\n00:45:16,040 --> 00:45:20,340\nforward request to the following remote\nRADIUS server group for authentication.\n\n941\n00:45:20,340 --> 00:45:20,940\nAll right.\n\n942\n00:45:20,940 --> 00:45:24,800\nNow, I don't have any groups cuz I deleted\nit, and I can't click on that box,\n\n943\n00:45:24,800 --> 00:45:26,200\nI can't even pick the radio button.\n\n944\n00:45:26,200 --> 00:45:30,240\nSo at first glance it looks like you're\nstuck, but you can hit the New button and\n\n945\n00:45:30,240 --> 00:45:32,370\ncreate that group right here, all right.\n\n946\n00:45:32,370 --> 00:45:36,530\nSo when I create a group, I might create\na group called ITProTV Lab, right,\n\n947\n00:45:36,530 --> 00:45:41,140\nand then in here I can start to define\nwhat RADIUS servers are in that lab.\n\n948\n00:45:41,140 --> 00:45:43,220\nAnd here's where we get the priority and\n\n949\n00:45:43,220 --> 00:45:45,990\nweight that I talked about\nin the previous show, right?\n\n950\n00:45:45,990 --> 00:45:49,704\nI think I did two examples, one where it\nwas just like even load balancing, so I\n\n951\n00:45:49,704 --> 00:45:53,810\nhad two servers, both with a priority of-\n>> One and then a 33, 33, 33 I think.\n\n952\n00:45:53,810 --> 00:45:55,700\n>> Oh that's right, I had three servers.\n\n953\n00:45:55,700 --> 00:45:56,230\n>> Yep.\n\n954\n00:45:56,230 --> 00:45:57,910\n>> So, if they all have the same priority,\n\n955\n00:45:57,910 --> 00:46:01,840\nthe weight will influence which\none you load balance across.\n\n956\n00:46:01,840 --> 00:46:04,100\nRight?\nI also did another example though,\n\n957\n00:46:04,100 --> 00:46:08,200\nwhere I had two servers, and I gave one a\npriority of one and one a priority of two.\n\n958\n00:46:08,200 --> 00:46:12,200\nBy doing that, you'll always go to\nthe number one server first, and\n\n959\n00:46:12,200 --> 00:46:14,170\nonly go to the number two\nif the number one fails.\n\n960\n00:46:14,170 --> 00:46:16,080\nRight?\nSo, here's where we define that.\n\n961\n00:46:16,080 --> 00:46:18,520\nRight, so, we can go in and\nadd a RADIUS server.\n\n962\n00:46:18,520 --> 00:46:19,903\nSo I'm gonna come in and\npunch in a server.\n\n963\n00:46:19,903 --> 00:46:22,510\nI'll do 192.168.5.5.\n\n964\n00:46:22,510 --> 00:46:25,900\nI don't know, 5.5.\nI'll just make something up.\n\n965\n00:46:25,900 --> 00:46:30,780\nUnder authentication and accounting,\nI can specify the shared secret for\n\n966\n00:46:30,780 --> 00:46:32,460\nconnecting to that server.\n\n967\n00:46:32,460 --> 00:46:35,660\nRight, any time you connect to a RADIUS\nserver, you have to have a shared secret.\n\n968\n00:46:35,660 --> 00:46:38,560\nI can modify my port numbers and so on.\n\n969\n00:46:38,560 --> 00:46:42,030\nAnd here I can override\nthe load balancing, right?\n\n970\n00:46:42,030 --> 00:46:43,830\nDefault priority of one.\n\n971\n00:46:43,830 --> 00:46:45,030\nDefault weight of 50.\n\n972\n00:46:45,030 --> 00:46:49,750\nThen we'll see some of the advanced\nsettings, which are how we\n\n973\n00:46:49,750 --> 00:46:53,900\ndetermine if a server fails, right, number\nof seconds without a response before we\n\n974\n00:46:53,900 --> 00:46:57,960\nconsider it to be dropped,\nnumber of drops before we flip over.\n\n975\n00:46:57,960 --> 00:47:00,720\nSo I've got it set right here\nthat it will take five seconds,\n\n976\n00:47:00,720 --> 00:47:04,290\nor three seconds before I decide\nthat a connection has dropped.\n\n977\n00:47:04,290 --> 00:47:06,780\nAnd, I'll allow five drops.\n\n978\n00:47:06,780 --> 00:47:10,100\nSo that means a 15 second period before I\n\n979\n00:47:10,100 --> 00:47:13,580\nactually decide that a RADIUS server\nis down and go to the next one.\n\n980\n00:47:13,580 --> 00:47:14,880\nThat might be too long for you.\n\n981\n00:47:14,880 --> 00:47:16,978\nThat might be just right,\nit depends on the organization.\n\n982\n00:47:16,978 --> 00:47:18,078\n>> Mm-hm.\n\n983\n00:47:18,078 --> 00:47:22,480\n>> All right, we can punch those in and\nsay OK, and there's my server.\n\n984\n00:47:22,480 --> 00:47:23,720\nAll right?\n\n985\n00:47:23,720 --> 00:47:26,260\nAnd then I can add another server,\nif I want.\n\n986\n00:47:26,260 --> 00:47:31,861\nSo, I'll punch in 192.168.5.6 this time,\n\n987\n00:47:31,861 --> 00:47:35,019\nand punch in the shared secret.\n\n988\n00:47:35,019 --> 00:47:37,113\nAll right, and then under load balancing,\n\n989\n00:47:37,113 --> 00:47:39,383\nmaybe I give this one a priority of two,\nright?\n\n990\n00:47:39,383 --> 00:47:41,821\nAnd I'll just set that weight to 100.\n\n991\n00:47:41,821 --> 00:47:42,401\nAll right.\n\n992\n00:47:42,401 --> 00:47:44,907\nPriority of two, weight, 100.\n\n993\n00:47:44,907 --> 00:47:50,240\nAll right and I'll edit this other\nguy to give his weight, 100 also.\n\n994\n00:47:50,240 --> 00:47:51,770\nAll right.\n\n995\n00:47:51,770 --> 00:47:55,740\nSince I've got one server with\nthe priority of one we're gonna use it.\n\n996\n00:47:55,740 --> 00:47:58,540\nUnless it's unavailable,\nwe get that 15 second window.\n\n997\n00:47:58,540 --> 00:47:59,040\nRight.\n>> Yeah.\n\n998\n00:47:59,040 --> 00:48:00,410\n>> Where we lose those drops.\n\n999\n00:48:00,410 --> 00:48:03,440\nThen we jump over to number two and\nwe'll use it.\n\n1000\n00:48:03,440 --> 00:48:05,850\nBut a 100% of our workload is\nbeing sent to that first server.\n\n1001\n00:48:05,850 --> 00:48:07,900\nUnless it fails, right?\n\n1002\n00:48:07,900 --> 00:48:13,720\nMy other example is to have three servers,\nso if we say 5.7 for\n\n1003\n00:48:13,720 --> 00:48:18,940\nthis one, and we punch in\nthe shared secret, super secret.\n\n1004\n00:48:18,940 --> 00:48:23,820\nSame password I use in all these shows,\nand so we can punch it in.\n\n1005\n00:48:23,820 --> 00:48:26,090\nYou know what,\nI'm going to put that priority to 1.\n\n1006\n00:48:26,090 --> 00:48:30,330\nSet that weight to 33 and then I can\ngo back and edit these other guys and\n\n1007\n00:48:30,330 --> 00:48:31,780\nput them in that same way.\n\n1008\n00:48:31,780 --> 00:48:34,190\nPriority of 1, weight of 33.\n\n1009\n00:48:34,190 --> 00:48:36,190\nSo, just modifying that.\n\n1010\n00:48:37,650 --> 00:48:40,660\nAnd if your numbers don't add up,\nif the system actually corrects for\n\n1011\n00:48:40,660 --> 00:48:41,960\nthat a little bit.\n\n1012\n00:48:41,960 --> 00:48:44,710\nSo it won't allow you to screw up too bad.\n\n1013\n00:48:44,710 --> 00:48:46,620\n>> Right.\n>> But right there since they all have\n\n1014\n00:48:46,620 --> 00:48:49,570\na priority of one I'm now gonna load\nbalance across all three of them.\n\n1015\n00:48:49,570 --> 00:48:51,080\n>> Right.\nThat first scenario really gave you\n\n1016\n00:48:51,080 --> 00:48:52,560\nthat fault tolerance you were looking for.\n\n1017\n00:48:52,560 --> 00:48:53,500\nBut it didn't do anything for\n\n1018\n00:48:53,500 --> 00:48:55,740\nload balancing cuz everything\nwas going to that one server.\n\n1019\n00:48:55,740 --> 00:48:58,920\nNow we're truly getting load\nbalancing as well as Multons.\n\n1020\n00:48:58,920 --> 00:49:02,350\n>> And a lot of people don't bother\nwith low bouncing radius because it's so\n\n1021\n00:49:02,350 --> 00:49:04,740\nlow on the Resource Intensity Scale.\n\n1022\n00:49:04,740 --> 00:49:06,930\n>> It's just that initial dedication,\nright.\n\n1023\n00:49:06,930 --> 00:49:09,250\nIt's not the entire connection\nthat's going through there.\n\n1024\n00:49:09,250 --> 00:49:11,700\n>> And it's mostly CPU intensive and\nthat's it.\n\n1025\n00:49:11,700 --> 00:49:16,240\nSo you may have one radius server\nthat's able to handle tons and\n\n1026\n00:49:16,240 --> 00:49:20,960\ntons of connections and not have a need\nfor multiple other than redundancy.\n\n1027\n00:49:20,960 --> 00:49:21,610\nAlright?\n\n1028\n00:49:21,610 --> 00:49:22,790\nBut it's nice that we can do that.\n\n1029\n00:49:22,790 --> 00:49:26,140\nNow here's the biggest problem\nwith this configuration.\n\n1030\n00:49:26,140 --> 00:49:27,140\nWhen I say okay to that.\n\n1031\n00:49:28,180 --> 00:49:32,800\nNow I've got my group created right there,\nthere it is.\n\n1032\n00:49:32,800 --> 00:49:36,330\nAnd this policy is going to\nuse those systems, great,\n\n1033\n00:49:36,330 --> 00:49:38,680\nso it's there, wonderfully, all right?\n\n1034\n00:49:38,680 --> 00:49:40,610\nWhat about all of my other policies?\n\n1035\n00:49:40,610 --> 00:49:43,370\nWell, it's set on a per policy basis, so\n\n1036\n00:49:43,370 --> 00:49:48,370\nif I go into one of my other policies,\nit's not set to use that group, all right?\n\n1037\n00:49:48,370 --> 00:49:50,490\nBut you can reuse your group,\nso there it is.\n\n1038\n00:49:50,490 --> 00:49:53,640\nI can come in here and\npick that group, and now,\n\n1039\n00:49:53,640 --> 00:49:56,650\nI'll benefit from having\nthat same configuration.\n\n1040\n00:49:56,650 --> 00:50:00,320\nThat both of these policies are now going\nto be load balancing across those three\n\n1041\n00:50:00,320 --> 00:50:00,880\nservers.\n\n1042\n00:50:00,880 --> 00:50:05,970\nSo, you do have to go through each of your\npolicies though to reflect that setting.\n\n1043\n00:50:05,970 --> 00:50:07,110\n>> Where planning comes into place.\n\n1044\n00:50:07,110 --> 00:50:09,980\nIf you set that group up before you\nstart creating all your policies,\n\n1045\n00:50:09,980 --> 00:50:12,200\nyou wouldn't have to go back and\ndo all that.\n\n1046\n00:50:12,200 --> 00:50:13,360\n>> And now that I've got the group,\n\n1047\n00:50:13,360 --> 00:50:17,160\nif I ever want to modify it I don't\nhave to go to each policy to modify it.\n\n1048\n00:50:17,160 --> 00:50:20,310\nI can just go up here to my\nremote RADIUS server groups and\n\n1049\n00:50:20,310 --> 00:50:23,690\nI can pull up the properties\nof that group, and here it is.\n\n1050\n00:50:23,690 --> 00:50:28,030\nI can modify, and this is gonna modify\nit for every policy that uses it.\n\n1051\n00:50:28,030 --> 00:50:31,240\nSo it becomes much more centralized and\neasier to manage,\n\n1052\n00:50:31,240 --> 00:50:35,530\nbecause you'll add in new servers, take\nout old servers as your system updates.\n\n1053\n00:50:36,960 --> 00:50:39,320\nSo we've got that flexibility\nthe groups really hand out.\n\n1054\n00:50:39,320 --> 00:50:42,650\nAnd like Mike said we could've\ncreated this group ahead of time.\n\n1055\n00:50:42,650 --> 00:50:45,980\nRight, and then we would have just had to\nhave picked that in our policy wizard.\n\n1056\n00:50:48,000 --> 00:50:50,230\nThere is another thing you can use.\n\n1057\n00:50:50,230 --> 00:50:54,900\nIf you're creating a lot of groups or\na lot of different policies with specific\n\n1058\n00:50:54,900 --> 00:50:59,490\nneeds, you might find that you're reusing\ncertain elements over and over again, and\n\n1059\n00:50:59,490 --> 00:51:04,300\nso there's a templating system in here\nthat we can use to save some time.\n\n1060\n00:51:06,450 --> 00:51:08,820\nI've worked in some large environments.\n\n1061\n00:51:08,820 --> 00:51:14,730\nEven in the larger environments like\na 10,000 system environment, right?\n\n1062\n00:51:14,730 --> 00:51:19,130\nSo in an environment where you had 10,000\nusers that all had RSA secure ID tokens,\n\n1063\n00:51:19,130 --> 00:51:20,662\nand we were doing radius like crazy.\n\n1064\n00:51:20,662 --> 00:51:24,250\n>> Even there we really only\nhad four radius servers.\n\n1065\n00:51:24,250 --> 00:51:27,210\nWe had two at the home office and\ntwo at our Disaster Recovery Centers.\n\n1066\n00:51:27,210 --> 00:51:30,450\nSo, four radius servers\nhandling 10,000 users, and\n\n1067\n00:51:30,450 --> 00:51:33,650\nthose were mostly sitting\nidle throughout the day.\n\n1068\n00:51:33,650 --> 00:51:35,505\nIt's just not a heavy burden.\n\n1069\n00:51:35,505 --> 00:51:38,395\nSo I've never really felt\nthe need to do templates\n\n1070\n00:51:38,395 --> 00:51:40,145\ncuz there were just so few servers.\n\n1071\n00:51:40,145 --> 00:51:41,695\nBut if you work for an ISP or\n\n1072\n00:51:41,695 --> 00:51:45,235\nsomebody like that where you\nhave hundreds of radius servers,\n\n1073\n00:51:45,235 --> 00:51:48,515\nit can be annoying having to go in and\nput in all these various values.\n\n1074\n00:51:48,515 --> 00:51:50,025\nSo under Template Management,\n\n1075\n00:51:50,025 --> 00:51:54,700\nyou'll see where you can create\nremote radius server templates.\n\n1076\n00:51:54,700 --> 00:51:57,290\n>> And shared secret templates so\n\n1077\n00:51:57,290 --> 00:52:01,530\nthat you can reuse these instead of\nhaving to type them in every time.\n\n1078\n00:52:01,530 --> 00:52:04,190\nSo if I'm gonna have more than one group,\nand\n\n1079\n00:52:04,190 --> 00:52:07,540\nthose groups are gonna be made\nup of the same basic servers,\n\n1080\n00:52:07,540 --> 00:52:12,270\nI can go down here to my remote\nRADIUS server templates.\n\n1081\n00:52:12,270 --> 00:52:14,590\nAnd I can come in here and\ncreate a new entry.\n\n1082\n00:52:14,590 --> 00:52:20,990\nAnd I'll create an entry here that\nmight say this is radio server one.\n\n1083\n00:52:20,990 --> 00:52:27,520\nAnd I'll punch in it's IP address, okay.\n\n1084\n00:52:27,520 --> 00:52:28,890\nSo here's gonna be radius server one.\n\n1085\n00:52:28,890 --> 00:52:34,680\nAnd I can specify things like\nwhatever its shared secret is and\n\n1086\n00:52:34,680 --> 00:52:37,790\nall the information related\nto that particular server.\n\n1087\n00:52:38,910 --> 00:52:39,610\nAll right.\n\n1088\n00:52:39,610 --> 00:52:43,690\nEven priorities and weights for\nthat particular server.\n\n1089\n00:52:43,690 --> 00:52:46,930\nOn that previous screen if you had chosen,\nif we had already created a shared secret\n\n1090\n00:52:46,930 --> 00:52:49,320\ntemplate, you could have just hit\nit from the drop down that's there.\n\n1091\n00:52:49,320 --> 00:52:53,090\n>> Yeah, cuz even the shared secrets get\nannoying after a while typing those.\n\n1092\n00:52:53,090 --> 00:52:56,500\nSo basically you can create\nthat server ahead of time.\n\n1093\n00:52:56,500 --> 00:52:59,560\nAnd now we've got a template for\nthat server sitting right here.\n\n1094\n00:52:59,560 --> 00:53:02,490\nAnd let's go the extra step and\ndo the shared secret template.\n\n1095\n00:53:02,490 --> 00:53:05,430\nI see that, maybe like you said,\nISP or service provider,\n\n1096\n00:53:05,430 --> 00:53:09,450\nsomebody that has to whip out new groups\nall the time when they get a new client.\n\n1097\n00:53:09,450 --> 00:53:11,540\nThat they're going to be the ones\nthat provide the remote access for\n\n1098\n00:53:11,540 --> 00:53:12,520\ntheir network.\n\n1099\n00:53:12,520 --> 00:53:14,930\nYou're not having these\ntemplates pre-built.\n\n1100\n00:53:14,930 --> 00:53:18,300\nI go this is the password for company abc\nor their shared secret that we use for\n\n1101\n00:53:18,300 --> 00:53:20,000\ncompany abc and things like that.\n\n1102\n00:53:20,000 --> 00:53:23,740\nSo, it can be very handy again,\nif you're doing it all the time.\n\n1103\n00:53:25,030 --> 00:53:28,040\n>> So here I'm just creating\na new shared secret template and\n\n1104\n00:53:28,040 --> 00:53:28,950\nI gave it a name, right?\n\n1105\n00:53:28,950 --> 00:53:32,980\nHomeofficeradiusPSK, or\nI might wanna call that.\n\n1106\n00:53:32,980 --> 00:53:34,490\nMaybe I'll name it after my servers.\n\n1107\n00:53:34,490 --> 00:53:38,480\nLike, this will be Radius1-PSK, and\nit can generate a nice long one.\n\n1108\n00:53:38,480 --> 00:53:41,915\n>> Yeah, and there's another good\nreason to use that template, right?\n\n1109\n00:53:41,915 --> 00:53:43,170\n[LAUGH]\n>> So, yeah,\n\n1110\n00:53:43,170 --> 00:53:44,190\nthat one gets punched in there.\n\n1111\n00:53:44,190 --> 00:53:45,070\nA nice long one.\n\n1112\n00:53:45,070 --> 00:53:47,140\nOr, you can do it manual and\nenter in whatever you wanted.\n\n1113\n00:53:47,140 --> 00:53:49,460\nI'll go with our craziness here.\n\n1114\n00:53:49,460 --> 00:53:50,120\nAll right.\n\n1115\n00:53:50,120 --> 00:53:53,140\nAnd so now I've got that one, and\nI can generate different secrets for\n\n1116\n00:53:53,140 --> 00:53:54,440\nthe different servers, right?\n\n1117\n00:53:54,440 --> 00:53:56,000\nSo like radius 2 PSK.\n\n1118\n00:53:58,560 --> 00:54:01,750\n>> And radius 3 for\nmy three servers that I've got, right?\n\n1119\n00:54:01,750 --> 00:54:03,944\nSo I'm just kinda creating\nthese new policies.\n\n1120\n00:54:06,565 --> 00:54:07,630\nVia this template.\n\n1121\n00:54:09,440 --> 00:54:11,040\nAnd so we'll have those right there.\n\n1122\n00:54:11,040 --> 00:54:13,050\nAnd now when we start\nadding these servers.\n\n1123\n00:54:13,050 --> 00:54:15,500\nI already added RadiusServer1.\n\n1124\n00:54:15,500 --> 00:54:17,420\nSo I'll come in here and\nadd RadiusServer2.\n\n1125\n00:54:19,356 --> 00:54:25,170\nAnd it'll be 192.168.5.6.\n\n1126\n00:54:25,170 --> 00:54:28,920\nAnd for the shared secret,\ninstead of typing one in,\n\n1127\n00:54:28,920 --> 00:54:30,510\nnow I can come and\npick from those templates.\n\n1128\n00:54:30,510 --> 00:54:33,880\nAnd this is server two, so I'll pick\nit's template that I've already defined.\n\n1129\n00:54:33,880 --> 00:54:36,870\nIf you're using the same\nPSK on all of your servers\n\n1130\n00:54:36,870 --> 00:54:38,320\nIt's not the greatest idea, first off.\n\n1131\n00:54:38,320 --> 00:54:40,480\nBut if you do,\nyou could create this template and\n\n1132\n00:54:40,480 --> 00:54:41,990\njust reuse it over and over again.\n\n1133\n00:54:43,090 --> 00:54:44,550\nOne less thing to type, right?\n\n1134\n00:54:44,550 --> 00:54:46,290\nActually, I don't really have\nto type anything at this point,\n\n1135\n00:54:46,290 --> 00:54:48,340\njust the IP address.\n\n1136\n00:54:48,340 --> 00:54:49,750\nAnd now I can go into that last server.\n\n1137\n00:54:49,750 --> 00:54:53,651\nSo this will be radius server three.\n\n1138\n00:54:53,651 --> 00:54:57,834\nIt will be 192.160.5.7.\n\n1139\n00:54:59,420 --> 00:55:02,450\nAnd I'll pick the template for that one.\n\n1140\n00:55:02,450 --> 00:55:05,910\nLess chance to fat finger or\nmake a mistake when we enter the names.\n\n1141\n00:55:05,910 --> 00:55:06,870\nSo that works out pretty well.\n\n1142\n00:55:06,870 --> 00:55:11,120\nAnd we'll go for defaults there.\n\n1143\n00:55:11,120 --> 00:55:13,310\nSo now that I've defined those.\n\n1144\n00:55:13,310 --> 00:55:15,160\nI've created this template.\n\n1145\n00:55:15,160 --> 00:55:18,490\nThis template set of radius servers.\n\n1146\n00:55:18,490 --> 00:55:22,530\nSo when I go in to find a network policy,\ninstead of having to punch all\n\n1147\n00:55:22,530 --> 00:55:25,960\nthat stuff in, if I edit this\nnetwork policy and go to settings.\n\n1148\n00:55:25,960 --> 00:55:27,170\nAnd go to.\n\n1149\n00:55:27,170 --> 00:55:27,800\nLet's see.\n\n1150\n00:55:27,800 --> 00:55:29,030\nNope.\nSorry, wrong place.\n\n1151\n00:55:29,030 --> 00:55:31,960\nConnection request policies and edit it.\n\n1152\n00:55:31,960 --> 00:55:34,955\nAnd go to settings and authentication.\n\n1153\n00:55:34,955 --> 00:55:36,927\nNow I've got the groups, right?\n\n1154\n00:55:36,927 --> 00:55:41,380\nBut if I choose to do a new group\nInstead of creating things from scratch,\n\n1155\n00:55:41,380 --> 00:55:46,150\nwhen I go to add servers in I can now\npick from my templates that we defined.\n\n1156\n00:55:46,150 --> 00:55:47,920\nAnd it'll have all the server information.\n\n1157\n00:55:47,920 --> 00:55:48,810\nAnd that's really handy.\n\n1158\n00:55:48,810 --> 00:55:50,390\nLet me just cancel out of this.\n\n1159\n00:55:50,390 --> 00:55:53,280\nIf we go back here to the remote\nRADIUS server groups.\n\n1160\n00:55:53,280 --> 00:55:55,200\nAnd we create a new group right.\n\n1161\n00:55:55,200 --> 00:55:59,080\nI might wanna have a group that\ncontains server one and server two, but\n\n1162\n00:55:59,080 --> 00:55:59,970\nnot server three.\n\n1163\n00:56:01,120 --> 00:56:03,740\nSo I can come in here and\nI can use these templates to pick.\n\n1164\n00:56:03,740 --> 00:56:07,340\nHere's server one and here's server two.\n\n1165\n00:56:07,340 --> 00:56:09,840\nWhoops, helps if I pick the right one.\n\n1166\n00:56:09,840 --> 00:56:10,560\nThere we go.\n\n1167\n00:56:10,560 --> 00:56:11,740\nThere's server one and server two.\n\n1168\n00:56:11,740 --> 00:56:13,860\nNice and easy, they're already defined.\n\n1169\n00:56:13,860 --> 00:56:15,580\nNow they're in there and\nI've created that group, and\n\n1170\n00:56:15,580 --> 00:56:17,384\nI can create another one with\nserver two and server three.\n\n1171\n00:56:19,903 --> 00:56:21,640\nQuickly and easily.\n\n1172\n00:56:21,640 --> 00:56:25,290\nSo not something-\n>> It reduces that administrative effort.\n\n1173\n00:56:25,290 --> 00:56:26,740\nBut if you've got a need for that.\n\n1174\n00:56:26,740 --> 00:56:29,280\nLike say if you do it a lot.\n\n1175\n00:56:29,280 --> 00:56:32,160\n>> That's really what it comes down to.\n\n1176\n00:56:32,160 --> 00:56:37,330\nMost of the environments I've worked\nin your normal large organization,\n\n1177\n00:56:37,330 --> 00:56:39,010\nenterprise organization,\n\n1178\n00:56:39,010 --> 00:56:42,400\nthey're not gonna have enough RADIUS\nservers to really benefit from doing this.\n\n1179\n00:56:42,400 --> 00:56:46,410\nWhere it does come in handy though is\nif you have multiple NPS servers, and\n\n1180\n00:56:46,410 --> 00:56:48,970\nyou're synchronizing your\nsettings between them.\n\n1181\n00:56:48,970 --> 00:56:52,380\nThese templates that you create will\nget synchronized between the servers.\n\n1182\n00:56:52,380 --> 00:56:55,370\nSo when you go in to find that\nRADIUS group on each of them,\n\n1183\n00:56:55,370 --> 00:56:58,400\nwell it's kind of nice to have\nthe templates that are there and\n\n1184\n00:56:58,400 --> 00:57:01,860\nready to rock, but for most of us we\nwon't really make use of a lot of that.\n\n1185\n00:57:01,860 --> 00:57:04,930\nThere are some other templates in here\nlike IP filter templates which are kinda\n\n1186\n00:57:04,930 --> 00:57:07,940\nnice to be able to reuse again for\ndifferent policies.\n\n1187\n00:57:07,940 --> 00:57:09,930\nHealth policies and\nremediation server groups.\n\n1188\n00:57:09,930 --> 00:57:11,250\nAgain, same idea.\n\n1189\n00:57:11,250 --> 00:57:13,200\nYou create these templates, and\nyou can reuse them over and\n\n1190\n00:57:13,200 --> 00:57:14,880\nover again in all your different policies.\n\n1191\n00:57:16,170 --> 00:57:19,000\n>> Gives you that consistency you're\nlooking for across your servers.\n\n1192\n00:57:20,140 --> 00:57:22,100\n>> Nice and convenient,\ndoes make life easy.\n\n1193\n00:57:22,100 --> 00:57:23,470\nNow a couple things to be careful of.\n\n1194\n00:57:23,470 --> 00:57:25,840\nIf I go into my remote\nRADIUS servers here, and\n\n1195\n00:57:25,840 --> 00:57:28,460\nI'm gonna modify RADIUS server three.\n\n1196\n00:57:28,460 --> 00:57:32,820\nI'm gonna modify it to be\na different IP address.\n\n1197\n00:57:32,820 --> 00:57:35,570\nSo I'm gonna change it from .7 to .8.\n\n1198\n00:57:35,570 --> 00:57:37,360\nWhen you do that, you'll get a warning.\n\n1199\n00:57:37,360 --> 00:57:40,900\nSee how it says the template is active.\n\n1200\n00:57:40,900 --> 00:57:43,121\nDo you want to save or\ncancel the changes to the active template?\n\n1201\n00:57:43,121 --> 00:57:48,060\nSo it's warning us that this server\ngroup contains this particular entity.\n\n1202\n00:57:48,060 --> 00:57:50,520\nAnd you know, I'm kind of curious why\nit's only showing, did I not, oh,\n\n1203\n00:57:50,520 --> 00:57:51,550\nI didn't put in the other one.\n\n1204\n00:57:51,550 --> 00:57:52,450\n>> Oh that's right.\n\n1205\n00:57:52,450 --> 00:57:53,548\n>> All right.\n\n1206\n00:57:53,548 --> 00:57:56,700\nIf I had picked the server two it\nwould have been in both of them.\n\n1207\n00:57:56,700 --> 00:57:59,320\nSo, I can go and\nhit Save on that and it updates it.\n\n1208\n00:57:59,320 --> 00:58:01,867\nAnd if I go back up here to\nmy remote server groups and\n\n1209\n00:58:01,867 --> 00:58:03,800\nI take a look at this group.\n\n1210\n00:58:03,800 --> 00:58:05,560\nIt's updated it there, all right?\n\n1211\n00:58:05,560 --> 00:58:10,100\nSo if we modify the template you've gotta\nbe careful because it is gonna modify all\n\n1212\n00:58:10,100 --> 00:58:12,400\nthe elements that depend on it.\n\n1213\n00:58:12,400 --> 00:58:14,940\nThat's a good thing and a bad thing.\n\n1214\n00:58:14,940 --> 00:58:16,562\n>> It really could be something you want,\n\n1215\n00:58:16,562 --> 00:58:19,200\nbut you could hurt yourself if\nyou're not paying attention.\n\n1216\n00:58:19,200 --> 00:58:19,760\n>> Yeah.\n\n1217\n00:58:19,760 --> 00:58:22,810\nAnd the reality is, if you need\nseparate configurations like that,\n\n1218\n00:58:22,810 --> 00:58:24,620\nyou probably shouldn't be\nusing templates anyway, right?\n\n1219\n00:58:24,620 --> 00:58:25,180\n>> Right, yep.\n\n1220\n00:58:25,180 --> 00:58:29,170\n>> But if you're in a fully templated\nenvironment, then what you'll need to do\n\n1221\n00:58:29,170 --> 00:58:33,580\nis either create different templates to\nuse or just go to those elements that need\n\n1222\n00:58:33,580 --> 00:58:37,380\nthe custom settings and manually override\nthem there, just remove the template.\n\n1223\n00:58:38,430 --> 00:58:39,500\nAll right.\n\n1224\n00:58:39,500 --> 00:58:43,160\nSo, that's how we set up the redundant\nRADIUS type configuration.\n\n1225\n00:58:43,160 --> 00:58:47,000\nIt's not hard, we just need to go in and\ndefine it and then we'll have it in place.\n\n1226\n00:58:48,590 --> 00:58:50,290\nAll right, so\nthat's about all I've got on RADIUS,\n\n1227\n00:58:50,290 --> 00:58:51,480\nyou got anything else\nto throw in on there?\n\n1228\n00:58:51,480 --> 00:58:52,157\n>> No, that's about it.\n\n1229\n00:58:52,157 --> 00:58:53,570\n>> Okay.\n\n1230\n00:58:53,570 --> 00:58:56,600\nThe last topic that Microsoft\nhas on our objective list for\n\n1231\n00:58:56,600 --> 00:58:59,330\nthis one is the Web Application Proxy,\n\n1232\n00:58:59,330 --> 00:59:04,340\nwhich is completely unrelated to all of\nthe other topics that we've talked about.\n\n1233\n00:59:04,340 --> 00:59:05,290\n>> [LAUGH] right?\n>> It's\n\n1234\n00:59:05,290 --> 00:59:08,370\nkind of bizarre that they just stick\nit right here into this section.\n\n1235\n00:59:08,370 --> 00:59:11,130\nI mean, it is a type of remote\nnetwork access, so that's.\n\n1236\n00:59:11,130 --> 00:59:13,650\n>> Right.\n>> That's the tangential connection they\n\n1237\n00:59:13,650 --> 00:59:16,960\nmake, but we've only got about\nfive minutes left in this segment,\n\n1238\n00:59:16,960 --> 00:59:19,250\nthough, and\nit's a much bigger topic than that.\n\n1239\n00:59:19,250 --> 00:59:20,430\n>> A little more than five minutes.\n\n1240\n00:59:20,430 --> 00:59:21,510\nSo why don't we stop here and\n\n1241\n00:59:21,510 --> 00:59:25,350\ntake a break, and when we get back we'll\njump into the Web Application Proxy.\n\n1242\n00:59:25,350 --> 00:59:26,850\nWe'll see what it does, how it works,\n\n1243\n00:59:26,850 --> 00:59:29,280\nand then I'll show you guys how to\nconfigure it and get it up and running.\n\n1244\n00:59:29,280 --> 00:59:30,130\nIt's pretty neat.\n\n1245\n00:59:30,130 --> 00:59:32,290\nSo stay tuned, we'll be back after this.\n\n1246\n00:59:32,290 --> 00:59:36,862\n[SOUND]\n\n1247\n00:59:40,113 --> 00:59:42,060\nAll right, welcome back everybody.\n\n1248\n00:59:42,060 --> 00:59:45,770\nSo what we're gonna talk about here in\nthis last segment is a technology that's\n\n1249\n00:59:45,770 --> 00:59:49,660\nactually been around a good while\nwith Microsoft, but it's undergone so\n\n1250\n00:59:49,660 --> 00:59:53,350\nmany name changes that most people don't\nremember that they already know it.\n\n1251\n00:59:53,350 --> 00:59:54,510\n>> I think they do that\non purpose somtimes.\n\n1252\n00:59:54,510 --> 00:59:55,895\n>> Sometimes I wonder.\n\n1253\n00:59:55,895 --> 00:59:57,680\n[LAUGH]\n>> It's a new product, woo-hoo.\n\n1254\n00:59:57,680 --> 00:59:59,320\n[LAUGH]\n>> Maybe that's the secret.\n\n1255\n00:59:59,320 --> 01:00:01,780\nThey can announce it as something\nnew by changing the name.\n\n1256\n01:00:01,780 --> 01:00:05,780\nBut what we're gonna talk about\nis the Web Application Proxy.\n\n1257\n01:00:05,780 --> 01:00:10,870\nNow, the Web Application Proxy is a key\npiece of the active directory federation\n\n1258\n01:00:10,870 --> 01:00:16,300\nservices, which means in previous versions\nof Windows it did have a different name.\n\n1259\n01:00:16,300 --> 01:00:19,100\nIt used to be the Active Directory\nFederation Services Proxy,\n\n1260\n01:00:19,100 --> 01:00:21,290\na little bit longer of a name.\n\n1261\n01:00:21,290 --> 01:00:24,590\nBefore that, it was\nthe Microsoft Identity Integration Server.\n\n1262\n01:00:24,590 --> 01:00:28,040\nIt's had these different kinda\nnames over the years, but\n\n1263\n01:00:28,040 --> 01:00:29,370\nit's always worked the same way.\n\n1264\n01:00:30,610 --> 01:00:35,970\nBasically what happened is Microsoft\nrecognized a spot where there was a need.\n\n1265\n01:00:35,970 --> 01:00:36,960\nFor some companies.\n\n1266\n01:00:36,960 --> 01:00:38,780\nNot most,\nmost companies don't have a need for this.\n\n1267\n01:00:38,780 --> 01:00:42,070\nBut some companies wanted\nto have a website, or\n\n1268\n01:00:42,070 --> 01:00:44,350\na web application of some sort.\n\n1269\n01:00:44,350 --> 01:00:48,600\nAnd they wanted users to be able to\nauthenticate against that website\n\n1270\n01:00:48,600 --> 01:00:50,600\nusing their Windows credentials, right?\n\n1271\n01:00:50,600 --> 01:00:55,010\nSo credentials from the inside of\nthe Active Directory on this website.\n\n1272\n01:00:55,010 --> 01:00:58,403\nBut the problem is if your website\nis exposed to the internet,\n\n1273\n01:00:58,403 --> 01:01:01,356\nthat means the web server\nis exposed to the internet.\n\n1274\n01:01:01,356 --> 01:01:05,120\nAnd if you're authenticating users against\nthe active directory, that means this\n\n1275\n01:01:05,120 --> 01:01:09,650\nweb server that's exposed to the internet\nhas to have access to a domain controller.\n\n1276\n01:01:09,650 --> 01:01:10,580\n>> Not a good idea!\n\n1277\n01:01:10,580 --> 01:01:12,490\n>> Yeah,\nif somebody hacks your domain controller,\n\n1278\n01:01:12,490 --> 01:01:16,610\nif somebody hacks your web server,\nwhat do they now have access to?\n\n1279\n01:01:16,610 --> 01:01:17,830\n>> Right into your active directory.\n\n1280\n01:01:17,830 --> 01:01:18,600\n>> Exactly.\n\n1281\n01:01:18,600 --> 01:01:20,640\nSo, that's a problem right?\n\n1282\n01:01:20,640 --> 01:01:22,230\nIt's definitely not a good thing.\n\n1283\n01:01:22,230 --> 01:01:25,620\nSo people started coming up\nwith all sorts of crazy ideas.\n\n1284\n01:01:25,620 --> 01:01:29,310\nNow, I remember, I used to work for\na company where we had very strict rules.\n\n1285\n01:01:29,310 --> 01:01:31,910\nNo domain controller access from the DMZ.\n\n1286\n01:01:31,910 --> 01:01:35,180\nSo anything in the DMZ could not\ncontact the domain controller.\n\n1287\n01:01:35,180 --> 01:01:35,870\nRight?\nWe just,\n\n1288\n01:01:35,870 --> 01:01:38,290\nwe wouldn't punch holes\nin the firewall for that.\n\n1289\n01:01:38,290 --> 01:01:40,170\nSo how do you authenticate it.\n\n1290\n01:01:40,170 --> 01:01:44,210\nAnd back then we had these developers who\nwere like just give us a RADIUS server.\n\n1291\n01:01:44,210 --> 01:01:47,890\nAnd so we did this whole RADIUS thing and\nit was a mess.\n\n1292\n01:01:47,890 --> 01:01:50,874\nSo Microsoft stepped in and\nsaid all right you know what,\n\n1293\n01:01:50,874 --> 01:01:52,564\nlet's come up with a solution.\n\n1294\n01:01:52,564 --> 01:01:57,420\nAnd what they did is they\ncreated a reverse proxy, right?\n\n1295\n01:01:57,420 --> 01:02:00,970\nWell let's think of a forward proxy first,\nwhat is a forward proxy?\n\n1296\n01:02:00,970 --> 01:02:02,810\nA normal proxy?\n\n1297\n01:02:02,810 --> 01:02:05,946\nWell the idea is that you\nmight have hundreds of PCs or\n\n1298\n01:02:05,946 --> 01:02:10,741\nthousands of PCs that can't get to\nthe internet, that can't get to CNN.com.\n\n1299\n01:02:10,741 --> 01:02:15,547\nBut, instead, when they want to get to a\nwebsite like CNN, they go to the proxy and\n\n1300\n01:02:15,547 --> 01:02:19,111\nthey say, hey, could you please go and\nget CNN.com for me?\n\n1301\n01:02:19,111 --> 01:02:23,025\nAnd the proxy server reaches out on\nthe internet, gets a copy of CNN,\n\n1302\n01:02:23,025 --> 01:02:26,283\nbrings it back and\nhands it off to the PC that asked for it.\n\n1303\n01:02:26,283 --> 01:02:27,888\nThat's a proxy server.\n\n1304\n01:02:27,888 --> 01:02:28,985\nA lot of schools and\n\n1305\n01:02:28,985 --> 01:02:33,110\nbusinesses uses proxies because you\ncan filter people's web access.\n\n1306\n01:02:33,110 --> 01:02:34,511\nThat's a big reason.\n\n1307\n01:02:34,511 --> 01:02:36,262\nYou can log their access.\n\n1308\n01:02:36,262 --> 01:02:38,380\nBut also the security you get out of it.\n\n1309\n01:02:38,380 --> 01:02:41,010\nBecause only the proxy\ngoes out to the internet.\n\n1310\n01:02:41,010 --> 01:02:43,960\nThe other people's computers never\nactually touch the internet.\n\n1311\n01:02:43,960 --> 01:02:46,170\n>> You gotta hide your\ninfrastructure back there.\n\n1312\n01:02:46,170 --> 01:02:47,430\n>> And that's exactly what it does.\n\n1313\n01:02:47,430 --> 01:02:48,630\nAnd it works out really really well.\n\n1314\n01:02:48,630 --> 01:02:50,190\nIt's a very mature technology.\n\n1315\n01:02:50,190 --> 01:02:51,940\nIt's been around for a long time.\n\n1316\n01:02:51,940 --> 01:02:55,620\nWell, a reverse proxy is the opposite.\n\n1317\n01:02:55,620 --> 01:02:58,600\nSomebody out there on\nthe internet wants to\n\n1318\n01:02:58,600 --> 01:03:01,200\naccess a resource on your private network.\n\n1319\n01:03:01,200 --> 01:03:02,650\nBut they can't get to it.\n\n1320\n01:03:02,650 --> 01:03:04,750\nSo instead they ask a proxy.\n\n1321\n01:03:04,750 --> 01:03:08,190\nAnd they say, hey I need to access\nthis resource inside your network.\n\n1322\n01:03:08,190 --> 01:03:09,720\nCan you get it for me?\n\n1323\n01:03:09,720 --> 01:03:12,230\nAnd the proxy will reach\ninside the network,\n\n1324\n01:03:12,230 --> 01:03:16,090\nget whatever it is, bring it back out and\ngive it to that person.\n\n1325\n01:03:16,090 --> 01:03:17,500\nAll right?\n\n1326\n01:03:17,500 --> 01:03:20,230\nThe Web Application Proxy,\nwhat it's doing is,\n\n1327\n01:03:20,230 --> 01:03:23,420\nit's not actually proxying your web app,\nright?\n\n1328\n01:03:23,420 --> 01:03:26,750\nWhat it's proxying is\nthe authentication mechanism.\n\n1329\n01:03:26,750 --> 01:03:30,340\nSomeone on the internet is not allowed\nto talk to the Web Application Proxy.\n\n1330\n01:03:30,340 --> 01:03:33,346\nSomeone on the internet is allowed\nto talk to your web server.\n\n1331\n01:03:33,346 --> 01:03:36,945\nAnd your web server is\nallowed to talk to the proxy.\n\n1332\n01:03:36,945 --> 01:03:40,963\nAnd it can reach out to the proxy and\nsay hey I need to authenticate this user.\n\n1333\n01:03:40,963 --> 01:03:45,330\nHere is the credentials they gave me,\ncan you find out for me if these are okay?\n\n1334\n01:03:45,330 --> 01:03:49,830\nAnd the proxy will turn around and\nreach out to the domain controller\n\n1335\n01:03:49,830 --> 01:03:54,240\non behalf of the web server, and get that\ninformation and turn back around with\n\n1336\n01:03:54,240 --> 01:03:57,830\na token that authenticates that user and\nhand it off to the proxy,\n\n1337\n01:03:57,830 --> 01:04:02,580\nthe proxy hands it off to the web\napplication and the web application then\n\n1338\n01:04:02,580 --> 01:04:06,730\nsays okay, I know who you are,\nyou're valid, you're now logged in, right?\n\n1339\n01:04:06,730 --> 01:04:08,850\nThat whole process happens and\n\n1340\n01:04:08,850 --> 01:04:12,590\nthe web application is completely\nisolated from the domain controllers.\n\n1341\n01:04:12,590 --> 01:04:14,110\nThey never talk, right?\n\n1342\n01:04:14,110 --> 01:04:18,820\nSo that means the web server, it doesn't\neven have to be joined to your domain.\n\n1343\n01:04:18,820 --> 01:04:20,400\nIt can be, it certainly can be.\n\n1344\n01:04:20,400 --> 01:04:21,520\nBut it doesn't have to be.\n\n1345\n01:04:21,520 --> 01:04:24,440\nSo it can just be sitting out there\nin the middle of nowhere by itself.\n\n1346\n01:04:24,440 --> 01:04:28,730\nAnd the proxy is that intermediary, that\ngo-between, that extra layer of security.\n\n1347\n01:04:28,730 --> 01:04:31,550\nNow, Microsoft has tried\nthis functionality\n\n1348\n01:04:31,550 --> 01:04:33,050\nout in a number of different products.\n\n1349\n01:04:33,050 --> 01:04:35,980\nAs part of Microsoft identity and\nintegration services.\n\n1350\n01:04:35,980 --> 01:04:39,500\nIt was part of\nthe Forefront Threat Management Gateway.\n\n1351\n01:04:39,500 --> 01:04:42,010\nIt's been a part of\nseveral other products.\n\n1352\n01:04:42,010 --> 01:04:44,500\nBut now, It's just built into the OS.\n\n1353\n01:04:44,500 --> 01:04:48,870\nThe web app proxy, it's built into\nthe OS as a role that we can install,\n\n1354\n01:04:48,870 --> 01:04:50,950\nand we'll have it.\n\n1355\n01:04:50,950 --> 01:04:52,430\nAnd we're kinda ready to rock with it.\n\n1356\n01:04:52,430 --> 01:04:54,360\nIt's pretty straight forward.\n\n1357\n01:04:54,360 --> 01:04:56,350\nSo how do we use it?\n\n1358\n01:04:56,350 --> 01:04:58,540\nWell, the design.\n\n1359\n01:04:58,540 --> 01:05:00,660\nThat part of it's pretty straight forward.\n\n1360\n01:05:00,660 --> 01:05:05,120\nYou have a web server that has\nan application that's written to support\n\n1361\n01:05:05,120 --> 01:05:08,740\na claims based authentication method,\nright?\n\n1362\n01:05:08,740 --> 01:05:11,090\nNow that's well beyond\nthe scope of this exam.\n\n1363\n01:05:11,090 --> 01:05:13,130\nThere's no development on this exam,\n\n1364\n01:05:13,130 --> 01:05:16,720\nso writing the application itself,\nthat's not up to us, right?\n\n1365\n01:05:16,720 --> 01:05:17,830\nThat's a developer thing.\n\n1366\n01:05:18,960 --> 01:05:20,468\nYou can get Mike to do it.\n\n1367\n01:05:20,468 --> 01:05:23,230\n[LAUGH] Have you ever\nwritten about the business?\n\n1368\n01:05:23,230 --> 01:05:23,920\n>> No.\n\n1369\n01:05:23,920 --> 01:05:25,610\n>> I know you dabble in development.\n\n1370\n01:05:25,610 --> 01:05:27,630\n>> Haven't gotten any claims yet.\n\n1371\n01:05:27,630 --> 01:05:28,380\n>> It's a big deal.\n\n1372\n01:05:28,380 --> 01:05:31,380\nI've never down it either but\ndevelopers can do it.\n\n1373\n01:05:31,380 --> 01:05:33,380\nMicrosoft publishes all\nthe information for them to do it.\n\n1374\n01:05:33,380 --> 01:05:34,440\n>> Powerful stuff, really.\n\n1375\n01:05:34,440 --> 01:05:35,070\n>> It really is.\n\n1376\n01:05:35,070 --> 01:05:39,850\nAnd they can do ASP, or P/ PHP or whatever\nthey want to be able to reach in and\n\n1377\n01:05:39,850 --> 01:05:41,490\nevaluate that data, you know?\n\n1378\n01:05:41,490 --> 01:05:44,510\nWhich is pretty straightforward for\nthem, but if you're not a developer,\n\n1379\n01:05:44,510 --> 01:05:46,000\nthat side of it doesn't\nreally make a lot of sense.\n\n1380\n01:05:46,000 --> 01:05:48,230\n>> Right.\n>> So what we're responsible for\n\n1381\n01:05:48,230 --> 01:05:53,480\nas an administrator is really setting\nup the proxy side of it, right?\n\n1382\n01:05:53,480 --> 01:05:56,910\nWe need to set that up, so when the web\ndeveloper writes their web app,\n\n1383\n01:05:56,910 --> 01:05:59,810\nthey can say,\nhey guys What proxy server should I use?\n\n1384\n01:05:59,810 --> 01:06:03,390\nWhat web proxy am I gonna point to for\ngetting authentication?\n\n1385\n01:06:03,390 --> 01:06:05,830\nSo we need to worry more\nabout the back end.\n\n1386\n01:06:05,830 --> 01:06:09,600\nSo I'm gonna show you that process of\nhow we go through and get that set up so\n\n1387\n01:06:09,600 --> 01:06:11,210\nyou get an idea of how it works.\n\n1388\n01:06:12,720 --> 01:06:13,220\nAll right, so\n\n1389\n01:06:13,220 --> 01:06:17,160\nthat's what we're gonna be taking a look\nat as we move through this next segment.\n\n1390\n01:06:17,160 --> 01:06:20,807\nNow I do wanna mention a few other\nlittle things that kinda come into play.\n\n1391\n01:06:20,807 --> 01:06:25,641\nWhich is, as we work with this stuff,\nthe design side how\n\n1392\n01:06:25,641 --> 01:06:30,750\nmany of these web application\nproxies do we need and so on?\n\n1393\n01:06:30,750 --> 01:06:34,480\nWell, the web application proxies really\ndepends on the size of your your website.\n\n1394\n01:06:34,480 --> 01:06:37,789\nThey can be under a lot of burden, right?\n\n1395\n01:06:37,789 --> 01:06:42,724\nDepending on exactly how many clients you\nhave hitting the website at a particular\n\n1396\n01:06:42,724 --> 01:06:46,810\ntime, you can create more than\none web application proxy.\n\n1397\n01:06:46,810 --> 01:06:50,030\nMore commonly,\nwe're gonna do that in a cluster.\n\n1398\n01:06:50,030 --> 01:06:54,810\nAnd so, as I run through my wizard,\nI'm not running on top of a cluster.\n\n1399\n01:06:54,810 --> 01:06:58,950\nI'm just running a straight and normal\nconfiguration here, a single server.\n\n1400\n01:06:58,950 --> 01:07:03,490\nBut as we go through, I'm gonna show you\neach of the different pieces that are kind\n\n1401\n01:07:03,490 --> 01:07:07,670\nof involved with this being in a cluster\nenvironment, and how we modify that.\n\n1402\n01:07:07,670 --> 01:07:10,242\nAnd once you're in a cluster environment,\n\n1403\n01:07:10,242 --> 01:07:13,089\nyou can scale out to add\nas many of the different,\n\n1404\n01:07:13,089 --> 01:07:17,690\nthe different nodes that you need to\nhandle the workload in your environment.\n\n1405\n01:07:17,690 --> 01:07:21,265\nSo as soon as I can remember how to get\nInternet Explorer to go full screen,\n\n1406\n01:07:21,265 --> 01:07:22,310\nthen we'll do that.\n\n1407\n01:07:22,310 --> 01:07:23,820\nI thought it was F11?\n\n1408\n01:07:23,820 --> 01:07:25,530\n>> F11 should be a keyboard shortcut.\n\n1409\n01:07:25,530 --> 01:07:29,350\n>> Apparently, I don't get to do that.\n\n1410\n01:07:29,350 --> 01:07:30,500\nThought there was a full.\n\n1411\n01:07:30,500 --> 01:07:33,550\nYou know my Internet Explorer knowledge\nis apparently, oh there it is.\n\n1412\n01:07:33,550 --> 01:07:35,010\nThere we go, all right.\n\n1413\n01:07:35,010 --> 01:07:39,660\nSo, what I'm doing is I'm actually\nfiring up a Microsoft Tech Net View App.\n\n1414\n01:07:39,660 --> 01:07:42,510\nMicrosoft has a View App\nout there that is called,\n\n1415\n01:07:42,510 --> 01:07:45,660\nI think it's actually called New Feature,\noh I have the name right here.\n\n1416\n01:07:45,660 --> 01:07:48,790\nIt's called New Features in\nActive Directory Federation Services.\n\n1417\n01:07:48,790 --> 01:07:50,310\nThat's what this VLab is called.\n\n1418\n01:07:50,310 --> 01:07:51,520\nIt is a really good v lab.\n\n1419\n01:07:51,520 --> 01:07:53,520\nIf you haven't done it you should do it.\n\n1420\n01:07:53,520 --> 01:07:57,460\nThe instructions, the step by step to go\nthrough it are about thirty pages long.\n\n1421\n01:07:57,460 --> 01:07:59,600\nI'm not actually going\nto follow their steps,\n\n1422\n01:07:59,600 --> 01:08:03,580\nI guess I might mirror some of their\nsteps, but I'm just using their machines\n\n1423\n01:08:03,580 --> 01:08:06,150\nbecause they have got a really\ngood infrastructure set up.\n\n1424\n01:08:06,150 --> 01:08:10,330\nTo see a proxy in action, you actually\nneed a handful of machines to do it.\n\n1425\n01:08:10,330 --> 01:08:13,050\nYou'll see there are six\nmachines in this environment.\n\n1426\n01:08:13,050 --> 01:08:15,930\nWe've got a domain controller,\nwhich I'm not really gonna mess with.\n\n1427\n01:08:15,930 --> 01:08:20,570\nWe've got SERVER2 which is where my\nfederation services are gonna be running.\n\n1428\n01:08:20,570 --> 01:08:24,250\nI've got proxy that's gonna\nbe my web application proxy.\n\n1429\n01:08:24,250 --> 01:08:27,990\nI've got SERVER3, that's where my web\napplication is going to be running.\n\n1430\n01:08:27,990 --> 01:08:31,460\nSo the web app is sitting\nout there on SERVER3.\n\n1431\n01:08:31,460 --> 01:08:33,260\nFederation services\nare running on SERVER2.\n\n1432\n01:08:33,260 --> 01:08:36,300\nBut the two servers are not\nallowed to talk to each other\n\n1433\n01:08:36,300 --> 01:08:38,470\nbecause SERVER3's in the DMZ.\n\n1434\n01:08:38,470 --> 01:08:39,705\nSERVER2's on the inside.\n\n1435\n01:08:39,705 --> 01:08:40,850\n>> Mm-hm.\n>> Right?\n\n1436\n01:08:40,850 --> 01:08:45,610\nThe proxy is gonna sit in between to\nallow SERVER3 to talk to SERVER2 by\n\n1437\n01:08:45,610 --> 01:08:47,200\npassing through it.\n\n1438\n01:08:47,200 --> 01:08:50,260\nAnd then I've got a couple of clients that\nare sitting on the outside to be able to\n\n1439\n01:08:50,260 --> 01:08:51,015\ntest with.\n\n1440\n01:08:51,015 --> 01:08:52,320\n>> Mm-hm.\n>> And mess around, all right?\n\n1441\n01:08:52,320 --> 01:08:56,000\n>> Nice.\nSo,it's a lot of different components and\n\n1442\n01:08:56,000 --> 01:08:58,110\nthat's why I'm using their view lab.\n\n1443\n01:08:58,110 --> 01:09:01,930\nEverything that I do is in their bigger\nview lab, the view lab just goes over some\n\n1444\n01:09:01,930 --> 01:09:05,530\nother things that I think you guys have\nalready seen from some of the other show,\n\n1445\n01:09:05,530 --> 01:09:06,710\nin fact you might have already done this.\n\n1446\n01:09:06,710 --> 01:09:10,570\nSo I'll post a link to this\nview lab in the show notes so\n\n1447\n01:09:10,570 --> 01:09:12,160\nyou guys can go through and do it.\n\n1448\n01:09:12,160 --> 01:09:16,840\nIf you're going to do it make sure you set\naside a good hour and a half to two hours.\n\n1449\n01:09:16,840 --> 01:09:19,310\nIt's a long lab to do there.\n\n1450\n01:09:19,310 --> 01:09:21,040\nI'm just doing the web\napplication proxy piece.\n\n1451\n01:09:22,560 --> 01:09:26,060\nAll right, so I'm gonna get\nstarted right here on server two.\n\n1452\n01:09:26,060 --> 01:09:29,590\nServer two is where my active directory\nfederation services are running.\n\n1453\n01:09:29,590 --> 01:09:32,120\nAnd this is where I'm gonna\nstart setting up my system.\n\n1454\n01:09:32,120 --> 01:09:36,640\nOne of the things we can do with our\nexternal users, the people who are out\n\n1455\n01:09:36,640 --> 01:09:40,570\nthere on the internet, you may want\nthem to just browse to the web app and\n\n1456\n01:09:40,570 --> 01:09:42,775\nlog in with their credentials,\nall right, that's fine.\n\n1457\n01:09:42,775 --> 01:09:43,450\n>> Mm-hm.\n\n1458\n01:09:43,450 --> 01:09:47,740\n>> But, with Windows 8,\nactually with Windows 7, too, and\n\n1459\n01:09:47,740 --> 01:09:53,880\nwith our Windows Server 2012, we can have\nit where people use a Workplace Join.\n\n1460\n01:09:53,880 --> 01:09:57,750\nAll right, I know we've talked about\nWorkplace Joins in other shows.\n\n1461\n01:09:57,750 --> 01:10:02,560\nBut if you don't remember it, Workplace\nJoin is where you have a machine that is\n\n1462\n01:10:02,560 --> 01:10:07,300\nnot joined to your domain, but\nit's not un-joined from your domain.\n\n1463\n01:10:07,300 --> 01:10:08,340\nIt's kind of in-between.\n\n1464\n01:10:08,340 --> 01:10:12,160\nA normal machine is either joined to\na domain or in a work group, one or\n\n1465\n01:10:12,160 --> 01:10:13,580\nthe other, right?\n\n1466\n01:10:13,580 --> 01:10:17,860\nBut a machine that's workplace joined,\nit's in a workgroup, but\n\n1467\n01:10:17,860 --> 01:10:21,000\nits also got this\nconnection to your domain.\n\n1468\n01:10:21,000 --> 01:10:25,430\nIt's not joined to the domain, so GPOs\ndon't apply to it, administrators don't\n\n1469\n01:10:25,430 --> 01:10:31,070\nhave access to it, but for authentication\npurposes, it's joined to your worksign.\n\n1470\n01:10:31,070 --> 01:10:35,820\nIf you do a workplace join, when an\nexternal user on a workplace join machine\n\n1471\n01:10:35,820 --> 01:10:40,310\ngoes to connect, you can do Windows\nauthentication where if they're already\n\n1472\n01:10:40,310 --> 01:10:43,040\nlogged in with that Windows account in\none window and they go and launch this\n\n1473\n01:10:43,040 --> 01:10:46,200\napplication it will automatically log\nthem in and pass them through, all right?\n\n1474\n01:10:46,200 --> 01:10:50,040\nIt's a neat system if you've got more than\none web application you'll want to do\n\n1475\n01:10:50,040 --> 01:10:51,500\na workplace join.\n\n1476\n01:10:51,500 --> 01:10:55,564\nIn my scenario I've only got one web\napplication, so any time I go to a net I\n\n1477\n01:10:55,564 --> 01:10:58,870\nhave to log in anyway cause it's not like\nI'm already logged in in some other app.\n\n1478\n01:10:58,870 --> 01:11:00,430\nI've only got one app, right?\n\n1479\n01:11:00,430 --> 01:11:04,580\nSo for me it's not really going to matter\nwhether I'm workplace joined or not, but\n\n1480\n01:11:04,580 --> 01:11:07,660\nI want to show you that workplace joined\ntoo, just so you can get expose to it.\n\n1481\n01:11:07,660 --> 01:11:10,908\nEven though it's not, I don't think it's\nactually mentioned in the objectives,\n\n1482\n01:11:10,908 --> 01:11:13,787\nin real life land it's a good thing to\nsee, and I think it will really help,\n\n1483\n01:11:13,787 --> 01:11:16,802\nactually help me with a part of this lab\nbecause I want to show you the token, and\n\n1484\n01:11:16,802 --> 01:11:19,399\nyou can't really see the token\nunless you're workplace joined.\n\n1485\n01:11:19,399 --> 01:11:22,252\nSo I'm going to make sure we do that.\n\n1486\n01:11:22,252 --> 01:11:24,394\nAll right, so\nI'm going to start here on SERVER2, and\n\n1487\n01:11:24,394 --> 01:11:26,819\nI'm going to get that device\nregistration service turned on.\n\n1488\n01:11:26,819 --> 01:11:30,980\nI need to get a power shell fired up, and\nI need to run it as an administrator,\n\n1489\n01:11:30,980 --> 01:11:31,962\nso let me do that.\n\n1490\n01:11:31,962 --> 01:11:35,701\nAnd that is a gigantic window there,\nso let me shrink that down a bit.\n\n1491\n01:11:35,701 --> 01:11:39,124\nAll right, so let's get this,\nget this show on the road.\n\n1492\n01:11:39,124 --> 01:11:44,070\nSo I'm gonna do some initialize,\nif I spell it right.\n\n1493\n01:11:44,070 --> 01:11:47,254\nMy tab auto complete doesn't\nfix bad spelling, does it?\n\n1494\n01:11:47,254 --> 01:11:48,398\n>> [LAUGH]\n>> So\n\n1495\n01:11:48,398 --> 01:11:52,860\nI'm gonna do\nInitialize-ADDeviceRegistration.\n\n1496\n01:11:52,860 --> 01:11:55,530\nAnd then I'm gonna give it\na service account name to use.\n\n1497\n01:11:55,530 --> 01:11:59,592\nThe account I've created\nis Contoso\\ FsGmsa$,\n\n1498\n01:11:59,592 --> 01:12:04,126\nit's a managed service account, that's\nwhy I've got the $ at the end of it.\n\n1499\n01:12:04,126 --> 01:12:08,130\nSo I am gonna do that to turn that on,\nit's just prompting me,\n\n1500\n01:12:08,130 --> 01:12:09,680\ngetting me know that it's about to do it.\n\n1501\n01:12:09,680 --> 01:12:12,485\nThis is a change that effects the forest.\n\n1502\n01:12:12,485 --> 01:12:12,985\n>> Mm-hm\n>> Right?\n\n1503\n01:12:12,985 --> 01:12:14,455\nSo that's why it's giving me such\n\n1504\n01:12:14,455 --> 01:12:16,030\na big warning there.\n\n1505\n01:12:16,030 --> 01:12:16,550\n>> All right.\n\n1506\n01:12:16,550 --> 01:12:18,280\n>> So\nthat's gonna turn on device registration.\n\n1507\n01:12:18,280 --> 01:12:20,900\nThat's gonna facilitate workplace Join.\n\n1508\n01:12:20,900 --> 01:12:29,835\nAnd then I need to follow that up\nwith Enable-AdfsDeviceRegistration.\n\n1509\n01:12:29,835 --> 01:12:31,725\nAnd that will turn on also.\n\n1510\n01:12:31,725 --> 01:12:33,195\nOkay?\n\n1511\n01:12:33,195 --> 01:12:36,799\nIn real life land, you wanna turn that on,\nand then take a break.\n\n1512\n01:12:36,799 --> 01:12:37,665\n>> [LAUGH]\n>> Wait!\n\n1513\n01:12:37,665 --> 01:12:42,245\nMake sure that replicates out\nto all you domain controllers.\n\n1514\n01:12:42,245 --> 01:12:43,530\nI only have one VC here.\n\n1515\n01:12:43,530 --> 01:12:44,485\nRight?\nSo it's already gone.\n\n1516\n01:12:44,485 --> 01:12:45,600\nI can move one right away.\n\n1517\n01:12:45,600 --> 01:12:46,135\n>> Right.\n\n1518\n01:12:46,135 --> 01:12:47,095\n>> But in real life land,\n\n1519\n01:12:47,095 --> 01:12:49,980\nyou have 20 domain controllers\nspread across five states.\n\n1520\n01:12:49,980 --> 01:12:51,780\n>> Mm-hm\n>> It may take.\n\n1521\n01:12:51,780 --> 01:12:55,410\nWell, it should take less than 120\nminutes, but it could take 90,\n\n1522\n01:12:55,410 --> 01:12:56,905\nit could take a day.\n\n1523\n01:12:56,905 --> 01:12:58,260\n>> [INAUDIBLE]\n>> Whatever your topology allows.\n\n1524\n01:12:58,260 --> 01:13:00,410\nSo, patience, right?\n\n1525\n01:13:00,410 --> 01:13:05,350\nAll right.\nBut once that's done, it's now turned on.\n\n1526\n01:13:05,350 --> 01:13:07,440\nIt's pretty well ready to rock.\n\n1527\n01:13:07,440 --> 01:13:10,158\nSo now I can start to use work\nplace joint functionality.\n\n1528\n01:13:10,158 --> 01:13:12,970\nI am gonna jump over to my proxy server.\n\n1529\n01:13:14,570 --> 01:13:17,660\nAnd on the proxy server,\nthis is the one, I named it proxy,\n\n1530\n01:13:17,660 --> 01:13:19,400\nthat doesn't matter though.\n\n1531\n01:13:19,400 --> 01:13:21,915\nI need to install the web\napplication proxy on it.\n\n1532\n01:13:21,915 --> 01:13:22,505\nOkay.\n\n1533\n01:13:22,505 --> 01:13:27,925\nNow the web application proxy itself,\nit's a part of the remote access role.\n\n1534\n01:13:27,925 --> 01:13:30,955\nSo if you've already installed\nremote access management,\n\n1535\n01:13:30,955 --> 01:13:32,073\nit should already be there, right.\n\n1536\n01:13:32,073 --> 01:13:34,410\nSo I'm gonna go into my Server Manager.\n\n1537\n01:13:34,410 --> 01:13:36,635\nMm-hm.\n\n1538\n01:13:36,635 --> 01:13:40,085\nAnd if we go up here under Tools,\nyou'll see all the various things.\n\n1539\n01:13:40,085 --> 01:13:41,665\nAnd you'll see remote\naccess management there.\n\n1540\n01:13:41,665 --> 01:13:42,300\nAnd now.\n\n1541\n01:13:42,300 --> 01:13:45,950\nVery common mistake I make is going\nto routing and remote access.\n\n1542\n01:13:45,950 --> 01:13:47,393\n>> Routing and remote access [LAUGH].\n\n1543\n01:13:47,393 --> 01:13:48,520\nDone that once or twice.Yep.\n\n1544\n01:13:48,520 --> 01:13:51,230\n>> But if you go to remote access\nmanagement it's pretty easy to spot.\n\n1545\n01:13:51,230 --> 01:13:54,125\nThat you're in the wrong place cuz it\ndoesn't have all the other routing stuff.\n\n1546\n01:13:54,125 --> 01:13:55,150\n>> Right\n>> But\n\n1547\n01:13:55,150 --> 01:13:58,860\nif we go to this remote access management,\nwhat you'll see is something like this,\n\n1548\n01:13:58,860 --> 01:13:59,880\nWeb Application Proxy.\n\n1549\n01:13:59,880 --> 01:14:02,455\nThat's really what this\ntool is built around.\n\n1550\n01:14:02,455 --> 01:14:03,280\n>> Mm-hm\n>> And\n\n1551\n01:14:03,280 --> 01:14:07,700\nif you add that Web Application Proxy\nroll, this is what it's adding on.\n\n1552\n01:14:07,700 --> 01:14:08,570\nIt's just not configure.\n\n1553\n01:14:08,570 --> 01:14:10,620\nIt's not actually doing anything yet.\n\n1554\n01:14:10,620 --> 01:14:12,075\nSo I need to get it configured.\n\n1555\n01:14:12,075 --> 01:14:12,970\n>> Mm-hm\n>> So\n\n1556\n01:14:12,970 --> 01:14:14,600\nI'll click on Web Application Proxy here.\n\n1557\n01:14:14,600 --> 01:14:18,280\nAnd you'll see the Run the Web\nApplication Proxy Configuration Wizard.\n\n1558\n01:14:18,280 --> 01:14:22,470\nAnd this will be us getting\nthat first stage kinda set up.\n\n1559\n01:14:22,470 --> 01:14:24,330\nNow the wizard itself is\npretty straightforward, but\n\n1560\n01:14:24,330 --> 01:14:27,830\nthere is some information we need to know,\nall right.\n\n1561\n01:14:27,830 --> 01:14:33,150\nFirst off, we need a valid certificate\nto authenticate the web front end.\n\n1562\n01:14:33,150 --> 01:14:33,870\nAll right.\n\n1563\n01:14:33,870 --> 01:14:38,230\nWhen this web app reaches out to us,\nit's expecting a certain certificate to be\n\n1564\n01:14:38,230 --> 01:14:41,380\npresent that identifies\nus as who we say we are.\n\n1565\n01:14:41,380 --> 01:14:44,630\nAnd we expect them to have a certificate\nthat identifies that they are who\n\n1566\n01:14:44,630 --> 01:14:45,179\nthey say they are.\n\n1567\n01:14:46,340 --> 01:14:47,970\nSo certificates are a key piece and\n\n1568\n01:14:47,970 --> 01:14:53,660\nthe part where people make mistakes is\nin the common name of the certificate.\n\n1569\n01:14:53,660 --> 01:14:55,400\nWhen you reference a server,\n\n1570\n01:14:55,400 --> 01:14:59,340\nthe name you connect to needs\nto match that certificate name.\n\n1571\n01:14:59,340 --> 01:15:02,260\nAnd they don't always match, right?\n\n1572\n01:15:02,260 --> 01:15:04,850\nMy server might be called Server3.\n\n1573\n01:15:04,850 --> 01:15:09,206\nBut when my end users go to that web app,\nthat might be www.company.net.\n\n1574\n01:15:09,206 --> 01:15:09,718\n>> Mm-hm.\n\n1575\n01:15:09,718 --> 01:15:10,560\n>> You know?\n\n1576\n01:15:10,560 --> 01:15:12,480\nSo and they have a different\nname on that certificate.\n\n1577\n01:15:12,480 --> 01:15:15,960\nSo we need to make sure when we configure\nthis that we're using that common name.\n\n1578\n01:15:15,960 --> 01:15:19,480\nThe name that's on the cert,\nnot necessarily the name of the server.\n\n1579\n01:15:19,480 --> 01:15:20,040\n>> Right.\nOtherwise,\n\n1580\n01:15:20,040 --> 01:15:21,430\nyou get that name mismatch error, and\n\n1581\n01:15:21,430 --> 01:15:23,245\nall of a sudden the certificates\naren't trusted.\n\n1582\n01:15:23,245 --> 01:15:24,520\n>> Mm-hm.\n>> It's a pain in the butt.\n\n1583\n01:15:24,520 --> 01:15:25,930\n>> And then, the whole thing breaks.\n\n1584\n01:15:25,930 --> 01:15:28,280\n>> Yeah.\n>> [LAUGH] It breaks down from there.\n\n1585\n01:15:28,280 --> 01:15:31,703\nAll right so, I'm gonna go in here and\nlaunch that wizard, and\n\n1586\n01:15:31,703 --> 01:15:35,160\nas we move forward it's gonna\nstart asking us questions.\n\n1587\n01:15:35,160 --> 01:15:38,920\nOur Federation service name, which is\njust what we're gonna call this thing.\n\n1588\n01:15:38,920 --> 01:15:40,060\n>> Yes.\n>> Then we've got a username and\n\n1589\n01:15:40,060 --> 01:15:42,320\na password which will\nbe the credentials for\n\n1590\n01:15:42,320 --> 01:15:44,910\na local admin on the federation server.\n\n1591\n01:15:44,910 --> 01:15:46,710\nSo I'm gonna go and specify that.\n\n1592\n01:15:46,710 --> 01:15:50,539\nMy Federation service is adfs.contoso.com.\n\n1593\n01:15:50,539 --> 01:15:52,570\n>> [INAUDIBLE]\n>> And\n\n1594\n01:15:52,570 --> 01:15:58,250\nthe username is contorso/administrator.\n\n1595\n01:15:58,250 --> 01:16:01,330\nAnd I'll punch in the credentials.\n\n1596\n01:16:02,780 --> 01:16:06,060\nAll right, and now it asks about\nthat certificate, all right?\n\n1597\n01:16:06,060 --> 01:16:07,500\nSo you have to make sure\nyou pick the right one.\n\n1598\n01:16:07,500 --> 01:16:13,347\nWhen look here I've got a certificate for\nadfs.contoso.com I loaded it before hand.\n\n1599\n01:16:13,347 --> 01:16:15,480\n>> Mm-hm\n>> You need to do this in real life.\n\n1600\n01:16:15,480 --> 01:16:17,590\nYou need to get the certificate for\nidentity and\n\n1601\n01:16:17,590 --> 01:16:20,150\nload it into certificate\nsort to have that.\n\n1602\n01:16:20,150 --> 01:16:23,438\nKnowing that there can actually\nbe more than one name on a cert,\n\n1603\n01:16:23,438 --> 01:16:24,503\npeople do that now.\n\n1604\n01:16:24,503 --> 01:16:25,283\n>> Right.\n>> What is it\n\n1605\n01:16:25,283 --> 01:16:26,990\ncalled The subject alternative.\n\n1606\n01:16:26,990 --> 01:16:27,960\n>> There we go.\nThat's the one.\n\n1607\n01:16:27,960 --> 01:16:29,370\nIf the subject alternative names.\n\n1608\n01:16:30,550 --> 01:16:32,240\nAll right.\nSo if your not sure it's the right one\n\n1609\n01:16:32,240 --> 01:16:34,710\nyou can always hit the view\nbutton to look at that serve and\n\n1610\n01:16:34,710 --> 01:16:38,695\nmake sure if there's alternative names\nthey'll be stuffed away in here.\n\n1611\n01:16:38,695 --> 01:16:41,130\n>> Mm-hm\n>> Subject alternative name.\n\n1612\n01:16:41,130 --> 01:16:44,042\nAnd actually you can see right\nhere I've got more than one.\n\n1613\n01:16:44,042 --> 01:16:45,780\n>> Mm-hm\n>> Adfs.contoso.com.\n\n1614\n01:16:45,780 --> 01:16:48,350\nEnterprise registration.contoso.\n\n1615\n01:16:48,350 --> 01:16:51,260\n>> Work place joins there,\nthat's the URL they would look for.\n\n1616\n01:16:51,260 --> 01:16:54,610\n>> So each of those names that are in\nthere, and server3.contoso.com,\n\n1617\n01:16:54,610 --> 01:16:57,080\nwhich would be like the internal\nname that I use to get to it, or\n\n1618\n01:16:57,080 --> 01:16:58,278\nI can make that public too.\n\n1619\n01:16:58,278 --> 01:17:01,870\n>> [COUGH]\n>> All right, and\n\n1620\n01:17:01,870 --> 01:17:03,650\nthen it's just gonna\ngive me the confirmation.\n\n1621\n01:17:03,650 --> 01:17:05,660\nNow when I hit configure.\n\n1622\n01:17:05,660 --> 01:17:07,766\nIt is gonna create the proxy and\n\n1623\n01:17:07,766 --> 01:17:11,740\nas far as the web application\nproxy itself, we're done.\n\n1624\n01:17:11,740 --> 01:17:17,670\nThat was easy, but have you seen it work,\nhow do you know it is working and so on.\n\n1625\n01:17:17,670 --> 01:17:21,140\nNow I do wanna throw a couple\nof other comments in here.\n\n1626\n01:17:21,140 --> 01:17:24,940\nThe web application proxy itself,\nif that seemed easy, it really is.\n\n1627\n01:17:24,940 --> 01:17:27,385\nThe hardest part is just knowing\nwhat information to put in there.\n\n1628\n01:17:27,385 --> 01:17:28,050\n>> Mm-hm\n>> And\n\n1629\n01:17:28,050 --> 01:17:30,980\nthat's where it is important if\nyou're dealing with a cluster.\n\n1630\n01:17:30,980 --> 01:17:36,410\nAll right, if you've got\na clustered set of web front ends.\n\n1631\n01:17:36,410 --> 01:17:40,380\nThen you will have a common name that's\nshared across all of those front ends, so\n\n1632\n01:17:40,380 --> 01:17:44,000\nit will be one certificate that they\nall share and it's that common name,\n\n1633\n01:17:44,000 --> 01:17:46,590\nthat shared cluster name,\nfor the web front ends.\n\n1634\n01:17:46,590 --> 01:17:49,030\nThat is what you are gonna want to\nuse as you run through this Wizard.\n\n1635\n01:17:49,030 --> 01:17:54,090\nYou won't set up one entry for\neach front end, you'll have one entry for\n\n1636\n01:17:54,090 --> 01:17:56,168\nthe cluster as a whole.\n\n1637\n01:17:56,168 --> 01:17:57,320\n>> Mm-hm.\n>> All right?\n\n1638\n01:17:57,320 --> 01:18:00,650\nAnd then vice versa,\nwhen the web application developer,\n\n1639\n01:18:00,650 --> 01:18:05,360\nwhoever's writing that web app, when\nthey specify the web proxy to talk to.\n\n1640\n01:18:05,360 --> 01:18:08,480\nIf you have more than\none proxy in a cluster,\n\n1641\n01:18:08,480 --> 01:18:13,400\ndon't specify an individual cluster node,\nyou specify the cluster as a whole.\n\n1642\n01:18:13,400 --> 01:18:16,930\nAnd you'll need to have a shared\ncertificate across all those cluster nodes\n\n1643\n01:18:16,930 --> 01:18:19,580\nthat matches that common name, right?\n\n1644\n01:18:19,580 --> 01:18:21,010\nThat name and shared IP.\n\n1645\n01:18:22,360 --> 01:18:25,580\nSo that's really the only difference\nas far as deploying on a cluster\n\n1646\n01:18:25,580 --> 01:18:27,715\nversus deploying on a single node.\n\n1647\n01:18:27,715 --> 01:18:30,575\nOn a single node you're putting the name,\n\n1648\n01:18:30,575 --> 01:18:33,075\nthe fully qualified name for\nthat single node in there.\n\n1649\n01:18:33,075 --> 01:18:34,750\nIn a cluster,\nyou just put the cluster name.\n\n1650\n01:18:34,750 --> 01:18:36,635\n>> Right.\n\n1651\n01:18:36,635 --> 01:18:39,072\n>> All right, so we've got that in place.\n\n1652\n01:18:39,072 --> 01:18:40,082\nThat's pretty much that.\n\n1653\n01:18:40,082 --> 01:18:41,542\nLet's see,\nwe don't need to verify our certificate.\n\n1654\n01:18:41,542 --> 01:18:42,962\nWe're good there.\n\n1655\n01:18:42,962 --> 01:18:47,067\nWe should be good to go and\ndo like a workplace drawing at this point.\n\n1656\n01:18:47,067 --> 01:18:47,992\n>> Mm-hm\n>> The workplace drawing,\n\n1657\n01:18:47,992 --> 01:18:52,202\nlike I said that middle ground\nthat we create for a remote user.\n\n1658\n01:18:52,202 --> 01:18:54,272\nI'll take client two here.\n\n1659\n01:18:54,272 --> 01:18:55,832\nSo this is a Windows 8.1 machine.\n\n1660\n01:18:55,832 --> 01:18:59,350\nYou can see right here it's\nin a work-group, right?\n\n1661\n01:18:59,350 --> 01:19:02,590\n>> Mm-hm\n>> So it's not joined to my domain, and\n\n1662\n01:19:02,590 --> 01:19:06,530\nI'll just bring up my old start menu and\ntype workplace, and\n\n1663\n01:19:06,530 --> 01:19:08,290\nthere we go workplace\nsettings are right there.\n\n1664\n01:19:08,290 --> 01:19:11,540\nAnd it's gonna do\nthe workplace join wizard.\n\n1665\n01:19:11,540 --> 01:19:14,265\nNow, what it asks for is your user ID.\n\n1666\n01:19:14,265 --> 01:19:15,110\n>> Mm-hm\n>> And\n\n1667\n01:19:15,110 --> 01:19:17,520\nMike you made a comment about\nthis just a second ago.\n\n1668\n01:19:17,520 --> 01:19:18,960\nWhen you punch in your ID.\n\n1669\n01:19:20,560 --> 01:19:23,608\nIt look sat that ID and\nsays oh, you're on contosa.com,\n\n1670\n01:19:23,608 --> 01:19:24,132\n>> Mm-hm.\n\n1671\n01:19:24,132 --> 01:19:26,418\n>> Right.\nLet me go look at the contosa.com\n\n1672\n01:19:26,418 --> 01:19:30,642\nDNS range, and let me look for\nenterpriseregistration.contosa.com and\n\n1673\n01:19:30,642 --> 01:19:31,964\nsee where that points.\n\n1674\n01:19:31,964 --> 01:19:35,278\nAnd it's gonna find that and\nsee it pointing to my federation server,\n\n1675\n01:19:35,278 --> 01:19:39,058\nthe federation server we turned on this\ndevice registration a few moments ago.\n\n1676\n01:19:39,058 --> 01:19:42,633\nAnd then it's gonna reach out to that one,\nand it's gonna try and join.\n\n1677\n01:19:42,633 --> 01:19:45,030\nSo I'll go ahead and hit join.\n\n1678\n01:19:45,030 --> 01:19:50,040\nNow the problem is I'm logged in with my\njust regular old Windows user account.\n\n1679\n01:19:50,040 --> 01:19:51,805\nSo when it goes to join.\n\n1680\n01:19:51,805 --> 01:19:54,345\nHere it asks for\nmy active directory account.\n\n1681\n01:19:54,345 --> 01:19:55,875\nSo I can punch that in.\n\n1682\n01:19:55,875 --> 01:19:59,635\nSo this will be my work account and\nI will sign in.\n\n1683\n01:19:59,635 --> 01:20:02,825\nWhen that's done,\nI'm now workplace joined.\n\n1684\n01:20:02,825 --> 01:20:06,275\nI'm in between a workgroup and\njoined to a domain.\n\n1685\n01:20:07,605 --> 01:20:09,970\nDomain group policy\nobjects don't apply to me.\n\n1686\n01:20:09,970 --> 01:20:13,180\nDomain password reset policies\ndon't apply to my local accounts.\n\n1687\n01:20:13,180 --> 01:20:15,560\nThey do apply to my active\ndirectory accounts, right.\n\n1688\n01:20:15,560 --> 01:20:18,490\nSo some things apply, some things don't.\n\n1689\n01:20:18,490 --> 01:20:22,300\nBut most importantly, it's really just\nthe ability to share those credentials.\n\n1690\n01:20:22,300 --> 01:20:25,669\nI now have my active directory\ncredentials right here on file.\n\n1691\n01:20:26,910 --> 01:20:30,430\nSo when I log into one web application,\nwhen I go to log into the next one and\n\n1692\n01:20:30,430 --> 01:20:33,690\nthe next one and the next one,\nit can just do Windows authentication\n\n1693\n01:20:33,690 --> 01:20:36,460\nwhich doesn't normally pass\nover the Internet, now it can.\n\n1694\n01:20:37,910 --> 01:20:40,300\nWe won't see that for mine because\nwe just have the one web app, but\n\n1695\n01:20:40,300 --> 01:20:42,360\nif we had more you'd see that.\n\n1696\n01:20:42,360 --> 01:20:43,150\nAll right.\n\n1697\n01:20:43,150 --> 01:20:44,540\nSo there we go, it's in place.\n\n1698\n01:20:44,540 --> 01:20:47,100\nI can leave that workplace\njoin whenever I want.\n\n1699\n01:20:47,100 --> 01:20:48,750\nBut it's on, I knew that.\n\n1700\n01:20:51,040 --> 01:20:51,860\nOkay.\n\n1701\n01:20:51,860 --> 01:20:57,750\nThe next thing is to get the web\napplication talking to our web proxy.\n\n1702\n01:20:57,750 --> 01:20:58,350\nAll right.\n\n1703\n01:20:58,350 --> 01:21:00,601\nSo the web application itself,\nwe do need to define it.\n\n1704\n01:21:00,601 --> 01:21:02,664\nNow the proxy's actually\nrunning right now.\n\n1705\n01:21:02,664 --> 01:21:07,730\nAnd any web application could start\nsending claims to that proxy.\n\n1706\n01:21:07,730 --> 01:21:09,580\nThe proxy is gonna look at it, though, and\n\n1707\n01:21:09,580 --> 01:21:14,070\nit's got a certificate attached to it for\nadfs.cintosa.com.\n\n1708\n01:21:14,070 --> 01:21:17,220\nSo if any claim comes in signed by\na certificate other than that one,\n\n1709\n01:21:17,220 --> 01:21:18,540\nwe're just going to throw it away.\n\n1710\n01:21:18,540 --> 01:21:20,791\nAll right?\nBut I could have 5,000 servers out there\n\n1711\n01:21:20,791 --> 01:21:23,719\nthat are all signing claims that want\ncert, and the web proxy is going\n\n1712\n01:21:23,719 --> 01:21:26,369\nto receive it and be happy about it and\nsend it to the backside.\n\n1713\n01:21:26,369 --> 01:21:29,254\nSend it to my federation\nserver on server two.\n\n1714\n01:21:29,254 --> 01:21:33,024\nSo what I need to do is on server two,\nI need to set it up to listen for\n\n1715\n01:21:33,024 --> 01:21:34,201\nmy web app, right?\n\n1716\n01:21:34,201 --> 01:21:36,950\nTo listen for\nthose connections that are coming in.\n\n1717\n01:21:36,950 --> 01:21:38,260\nSo I'll jump over to server two.\n\n1718\n01:21:39,570 --> 01:21:42,120\nAnd we'll get that set up, all right.\n\n1719\n01:21:42,120 --> 01:21:45,479\nSo here I am on good old server two, and\nI'm gonna fire up my server manager,\n\n1720\n01:21:45,479 --> 01:21:47,754\nwhich I thought I had running but\nI guess I didn't.\n\n1721\n01:21:51,046 --> 01:21:54,459\nAll right, and I'll go to Tools and\nADFS management.\n\n1722\n01:21:59,620 --> 01:22:00,120\nAll right.\n\n1723\n01:22:01,240 --> 01:22:03,830\nWhenever I manage to get in there\n>> Wait for it.\n\n1724\n01:22:03,830 --> 01:22:05,860\n>> Yeah.\nWhenever I manage to get in there,\n\n1725\n01:22:05,860 --> 01:22:12,060\nwhat I'm looking to do is to set up\nwhat's called a relying party trust.\n\n1726\n01:22:12,060 --> 01:22:12,730\nAll right?\n\n1727\n01:22:12,730 --> 01:22:16,810\nA relying party trust, this is\nwhere I say, there's a third party.\n\n1728\n01:22:16,810 --> 01:22:21,710\nSomebody is out there that\nrelies on me for authentication.\n\n1729\n01:22:21,710 --> 01:22:23,860\nAnd I'm waiting for their requests and\n\n1730\n01:22:23,860 --> 01:22:27,140\nwhen they come to me, I'll determine\nwhether they can authenticate the user and\n\n1731\n01:22:27,140 --> 01:22:29,170\nthen I'll send a token back to them,\nall right?\n\n1732\n01:22:29,170 --> 01:22:30,860\nSo we're just establishing who we trust.\n\n1733\n01:22:30,860 --> 01:22:34,490\nNow, we don't actually need\nthe proxy to be involved in this.\n\n1734\n01:22:34,490 --> 01:22:38,620\nWe could let that third party\ntalk directly to our ADFS.\n\n1735\n01:22:38,620 --> 01:22:42,910\nIf we had VPN tunnel, like a extranet\nsetup we might do that, right?\n\n1736\n01:22:42,910 --> 01:22:46,670\nBut because my web application is on the\ninternet, I don't wanna do that, right?\n\n1737\n01:22:46,670 --> 01:22:50,730\n>> You don't wanna expose that federation\nserver directly to the internet like that.\n\n1738\n01:22:50,730 --> 01:22:52,700\n>> Yep.\nSo the difference here is just that we're\n\n1739\n01:22:52,700 --> 01:22:55,160\ninterjecting a proxy into\nthe middle of this, right?\n\n1740\n01:22:55,160 --> 01:22:56,730\nWhich it's gonna understand and\n\n1741\n01:22:56,730 --> 01:23:00,200\nknow what to do because it's\nactually smart like that.\n\n1742\n01:23:00,200 --> 01:23:02,550\nI say that, and then it won't work, right.\n\n1743\n01:23:02,550 --> 01:23:03,600\n>> Slow, but smart.\n\n1744\n01:23:03,600 --> 01:23:04,750\n>> Did my tool never come up?\n\n1745\n01:23:04,750 --> 01:23:05,520\n>> Did it hide behind?\n\n1746\n01:23:05,520 --> 01:23:08,780\nIt forgot what you asked for.\n\n1747\n01:23:08,780 --> 01:23:10,290\n>> Let's try this again.\n\n1748\n01:23:10,290 --> 01:23:12,237\nADFS management.\n\n1749\n01:23:12,237 --> 01:23:13,046\nThink positive thoughts.\n\n1750\n01:23:13,046 --> 01:23:15,100\nThere we go.\n\n1751\n01:23:15,100 --> 01:23:16,240\nSo here's ADFS management.\n\n1752\n01:23:16,240 --> 01:23:19,980\nAnd you'll see when you get in here you've\ngot configuration for the service itself,\n\n1753\n01:23:19,980 --> 01:23:21,350\nendpoints and so on.\n\n1754\n01:23:21,350 --> 01:23:23,690\nBut you've got trust relationships.\n\n1755\n01:23:23,690 --> 01:23:26,650\nAnd in here you'll see\nthe relying party trusts.\n\n1756\n01:23:26,650 --> 01:23:29,380\nNow, I've already got one for\nthe device registration service.\n\n1757\n01:23:29,380 --> 01:23:31,060\nThat was set up automatically.\n\n1758\n01:23:31,060 --> 01:23:34,610\nNow, I'm going to add one for\nthis third party web app.\n\n1759\n01:23:34,610 --> 01:23:35,110\nRight?\n\n1760\n01:23:36,270 --> 01:23:39,510\nSo I need to get in here and\ndefine one and put that in place.\n\n1761\n01:23:39,510 --> 01:23:43,280\nSo I'll just right click on this and\nchoose to add a relying party trust.\n\n1762\n01:23:46,130 --> 01:23:47,030\nAnd we'll get a wizard.\n\n1763\n01:23:47,030 --> 01:23:49,760\nAnd this is another one where\nthe wizard is not terribly hard\n\n1764\n01:23:49,760 --> 01:23:51,860\nif you know what information to put where.\n\n1765\n01:23:51,860 --> 01:23:52,650\nThat's the hard part.\n\n1766\n01:23:52,650 --> 01:23:54,980\nI guess you could say\nthat's true of anything.\n\n1767\n01:23:54,980 --> 01:23:57,230\nBut we'll go ahead and get it configured.\n\n1768\n01:23:57,230 --> 01:23:58,520\nThe first thing it's doing is asking for\n\n1769\n01:23:58,520 --> 01:24:04,140\nwhether I'm going to be importing data\nabout a relying party from the URL or\n\n1770\n01:24:04,140 --> 01:24:07,010\nwhether I'm going to be bringing\nit from a file or so on.\n\n1771\n01:24:07,010 --> 01:24:11,030\nWhoever wrote the web application as\npart of their design schematics they've\n\n1772\n01:24:11,030 --> 01:24:14,680\nactually got in there where they create\nthe configuration files for us to attach.\n\n1773\n01:24:14,680 --> 01:24:15,700\nSo as an administrator\n\n1774\n01:24:15,700 --> 01:24:18,030\nthis is the part that saves us\nfrom having to be a developer.\n\n1775\n01:24:18,030 --> 01:24:19,280\nWe don't have to go and\nread their code and\n\n1776\n01:24:19,280 --> 01:24:21,100\nfigure out where the stuff is coming from.\n\n1777\n01:24:21,100 --> 01:24:22,610\nThey have a file.\n\n1778\n01:24:22,610 --> 01:24:27,270\nNow, they can email you the file in which\ncase you'll import it right here, or\n\n1779\n01:24:27,270 --> 01:24:30,770\nmore commonly they'll just host it on\na URL so that you can reach out and\n\n1780\n01:24:30,770 --> 01:24:33,790\ngrab it automatically, and\nif they ever want to make changes,\n\n1781\n01:24:33,790 --> 01:24:35,370\nyou know you can pull it that way.\n\n1782\n01:24:35,370 --> 01:24:36,980\nSo that's how this one is set up, so\n\n1783\n01:24:36,980 --> 01:24:41,390\nI'm just gonna point to where\nthat happens to be stored so\n\n1784\n01:24:41,390 --> 01:24:47,780\nI want to put in https://server3 right I'm\nreaching out to server3 that web server.\n\n1785\n01:24:49,420 --> 01:24:53,380\nAnd it's just in the claims app folder.\n\n1786\n01:24:53,380 --> 01:24:54,800\nSo I'm just going to point to that.\n\n1787\n01:24:54,800 --> 01:24:57,280\nAnd this will be information\nthat your developer tells you.\n\n1788\n01:24:57,280 --> 01:24:59,042\nHere's where you can get that file.\n\n1789\n01:24:59,042 --> 01:25:04,640\nAll right, then it's going to ask\nwhether I want to specify a name.\n\n1790\n01:25:04,640 --> 01:25:07,990\nIt's going to ask in a second whether I\nwant to do multi factor authentication and\n\n1791\n01:25:07,990 --> 01:25:09,730\nsome of these other settings.\n\n1792\n01:25:09,730 --> 01:25:11,600\nA lot of this you can\nchange after the fact.\n\n1793\n01:25:11,600 --> 01:25:14,060\nIn fact,\nmost of it you can change after the fact.\n\n1794\n01:25:14,060 --> 01:25:16,650\nSo you're not set in stone if you\npick one wave versus another.\n\n1795\n01:25:16,650 --> 01:25:19,200\nBut some of these are more\nimportant than others.\n\n1796\n01:25:19,200 --> 01:25:22,390\nDisplay name you just put whatever you\nwant in there to be able to recognize it.\n\n1797\n01:25:23,410 --> 01:25:25,950\n>> There you might have more than\none real line party trust in there,\n\n1798\n01:25:25,950 --> 01:25:28,430\njust administratively tell the difference.\n\n1799\n01:25:28,430 --> 01:25:31,050\n>> If you have more than one web\napp running on the same server,\n\n1800\n01:25:31,050 --> 01:25:33,290\nyou might want to designate\nthat there display name.\n\n1801\n01:25:33,290 --> 01:25:35,700\nYou can certainly do that.\n\n1802\n01:25:35,700 --> 01:25:39,930\nOn the next screen, it's gonna ask if I\nwanna do Multi-Factor Authentication.\n\n1803\n01:25:39,930 --> 01:25:40,454\nI'm not gonna do that.\n\n1804\n01:25:40,454 --> 01:25:43,370\nWe could always go and\nturn it on later if we we wanted it.\n\n1805\n01:25:43,370 --> 01:25:47,713\nAll right, and in fact, if you do the full\nV-Lab that Microsoft has posted on their\n\n1806\n01:25:47,713 --> 01:25:51,390\nsite, they actually show doing\nthe Multi-Factor Authentication.\n\n1807\n01:25:51,390 --> 01:25:52,470\nYou'll see that they go through that.\n\n1808\n01:25:53,620 --> 01:25:54,460\nAll right.\n\n1809\n01:25:54,460 --> 01:25:57,940\nThen we've got whether we're gonna allow\nall users to access the relying party,\n\n1810\n01:25:57,940 --> 01:25:59,770\nor deny all users.\n\n1811\n01:25:59,770 --> 01:26:02,100\nThis is just determining how our\npermissions are going to be.\n\n1812\n01:26:02,100 --> 01:26:05,449\nDo we block everybody and\nthen open it up for certain people later?\n\n1813\n01:26:05,449 --> 01:26:08,323\nOr do we just allow everybody now and\nblock certain people later?\n\n1814\n01:26:08,323 --> 01:26:09,492\nIt's up to us.\n\n1815\n01:26:09,492 --> 01:26:12,096\nI'll leave it as permil.\n\n1816\n01:26:12,096 --> 01:26:13,590\nAnd then it's ready to add.\n\n1817\n01:26:13,590 --> 01:26:16,190\nI get this nice little summary\nscreen where I can go through and\n\n1818\n01:26:16,190 --> 01:26:18,250\nlook at all the various\nthings that we chose.\n\n1819\n01:26:18,250 --> 01:26:21,590\nYou can't really edit anything on here,\nyou just kind of see the information.\n\n1820\n01:26:21,590 --> 01:26:24,624\nAnd we'll hit Next and Finish, all right.\n\n1821\n01:26:24,624 --> 01:26:28,207\nThe majority of the data was actually\npulled from that URL that we specified, so\n\n1822\n01:26:28,207 --> 01:26:30,414\nthat's why there's not\na lot to enter in there.\n\n1823\n01:26:30,414 --> 01:26:32,880\n>> No typos, yay.\n\n1824\n01:26:32,880 --> 01:26:33,750\n[LAUGH]\n>> [LAUGH] One of the few times.\n\n1825\n01:26:33,750 --> 01:26:34,810\n>> Right.\n\n1826\n01:26:34,810 --> 01:26:38,710\n>> But on this last screen it does say do\nwe want to edit the claims rule dialog?\n\n1827\n01:26:38,710 --> 01:26:40,160\nAll right?\n\n1828\n01:26:40,160 --> 01:26:42,300\nYou probably don't have to.\n\n1829\n01:26:42,300 --> 01:26:45,340\nIn most production environments, you\nrun on what's called pass-through mode,\n\n1830\n01:26:45,340 --> 01:26:48,740\nwhich just means if you get\nan authentication claim, you go ahead and\n\n1831\n01:26:48,740 --> 01:26:51,820\nprocess it and determine whether\nsomebody's authenticated.\n\n1832\n01:26:51,820 --> 01:26:54,130\nYou let the front end\nworry about whether or\n\n1833\n01:26:54,130 --> 01:26:55,920\nnot that person should be allowed in,\nright?\n\n1834\n01:26:55,920 --> 01:26:57,200\nLet me give you a scenario.\n\n1835\n01:26:57,200 --> 01:26:59,750\nThe account might be\na perfectly valid account.\n\n1836\n01:26:59,750 --> 01:27:01,520\nBut somebody might not\nhave paid their bill.\n\n1837\n01:27:01,520 --> 01:27:02,110\nAll right.\n\n1838\n01:27:02,110 --> 01:27:05,050\nDoes your active directory know whether\nsomebody's paid their bill or not?\n\n1839\n01:27:05,050 --> 01:27:05,968\nNo.\n\n1840\n01:27:05,968 --> 01:27:08,560\nSo in pasture mode we just say all\nright we're going to look at it and\n\n1841\n01:27:08,560 --> 01:27:11,515\nbased on the credentials we'll\ntell you if those are good or bad.\n\n1842\n01:27:11,515 --> 01:27:16,165\nThen the front end can figure out however\nthey figure out whether that person's\n\n1843\n01:27:16,165 --> 01:27:17,165\npaid their bill.\n\n1844\n01:27:17,165 --> 01:27:19,025\nThat's what most of us want.\n\n1845\n01:27:19,025 --> 01:27:22,065\nBut you can override that behavior and\nactually have checks and\n\n1846\n01:27:22,065 --> 01:27:23,815\nthings like that happen right here.\n\n1847\n01:27:23,815 --> 01:27:27,790\nThat's what it's asking me to do, is it's\nsaying do I want to edit the claims rules\n\n1848\n01:27:27,790 --> 01:27:31,660\nto determine how somebody's going\nto get authenticated or not.\n\n1849\n01:27:31,660 --> 01:27:33,880\nA lot of times, I would uncheck that,\njust leave it be.\n\n1850\n01:27:33,880 --> 01:27:35,862\nBut I'll leave it checked there so\nwe can edit it.\n\n1851\n01:27:35,862 --> 01:27:40,350\n>> And I see they use lot two when you're\nsetting up FS with other organizations or\n\n1852\n01:27:40,350 --> 01:27:43,955\nsomething like that,\nmaybe from a different app on their end.\n\n1853\n01:27:43,955 --> 01:27:49,000\nThey might submit a claim called,\nI don't know, Department.\n\n1854\n01:27:49,000 --> 01:27:51,420\nYou might call it D-E-P-T on your side.\n\n1855\n01:27:51,420 --> 01:27:54,250\nSo sometimes you have to do a little\nmodification on that claim to get your\n\n1856\n01:27:54,250 --> 01:27:56,120\nside to understand what\nthey're sending over.\n\n1857\n01:27:57,375 --> 01:27:59,205\n>> Yep.\nAll right, so we've got that,\n\n1858\n01:27:59,205 --> 01:28:00,175\nwe are in business.\n\n1859\n01:28:00,175 --> 01:28:02,375\nNow we're editing the rules and\nI'll go ahead and add a rule.\n\n1860\n01:28:02,375 --> 01:28:06,475\nI'm gonna add a rule in that you\nwouldn't want to use in production.\n\n1861\n01:28:06,475 --> 01:28:09,325\nIn production,\nyou probably add at least one rule and\n\n1862\n01:28:09,325 --> 01:28:13,635\nin here you'll see we've got pass\nthrough or filter an incoming claim and\n\n1863\n01:28:13,635 --> 01:28:17,570\nyou can just pass them through,\ndo the authentication and that's that.\n\n1864\n01:28:17,570 --> 01:28:19,970\nBut, I'm gonna a custom one.\n\n1865\n01:28:19,970 --> 01:28:23,510\nAnd the reason is the web\napp that I'm using,\n\n1866\n01:28:23,510 --> 01:28:25,880\nit's actually not doing\nanything too fancy.\n\n1867\n01:28:25,880 --> 01:28:28,800\nWhat it's going to do is it's\ngoing to display our token to us.\n\n1868\n01:28:28,800 --> 01:28:31,380\nThat token I was talking about,\nit's going to show us that token.\n\n1869\n01:28:31,380 --> 01:28:34,060\nWell, you don't normally\nget to see that token, so\n\n1870\n01:28:34,060 --> 01:28:37,430\nI'm gonna put a custom role in\nhere that will display that token.\n\n1871\n01:28:37,430 --> 01:28:38,900\nNow, in real life land,\n\n1872\n01:28:38,900 --> 01:28:42,430\nis there ever a time you'd wanna show the\nsecurity token to one of your customers?\n\n1873\n01:28:42,430 --> 01:28:43,170\nNo.\n>> I don't think so.\n\n1874\n01:28:43,170 --> 01:28:44,990\n>> So this isn't something\nyou do in production, but\n\n1875\n01:28:44,990 --> 01:28:47,000\nI'm doing it here as an example.\n\n1876\n01:28:47,000 --> 01:28:50,510\nSo on the next screen I'll\ncreate a claims rule and\n\n1877\n01:28:50,510 --> 01:28:53,610\nwe can call it whatever in the lab,\nthey just call it all claims.\n\n1878\n01:28:53,610 --> 01:28:58,500\nAnd we punch in a custom rule,\nand the rule is an odd one.\n\n1879\n01:28:58,500 --> 01:29:03,910\nIt's basically just saying well we'll\nissue any claim and what we're going to\n\n1880\n01:29:03,910 --> 01:29:09,830\ndo is we're going to create a variable\nthat will store the claim and it's answer.\n\n1881\n01:29:09,830 --> 01:29:11,940\nSo that's how we'll be able\nto query that token, so\n\n1882\n01:29:11,940 --> 01:29:13,140\nwe'll actually be able to see the value.\n\n1883\n01:29:13,140 --> 01:29:14,730\nAll right.\n\n1884\n01:29:14,730 --> 01:29:17,590\nSo again, that's not something you'd\ndo in a production environment.\n\n1885\n01:29:17,590 --> 01:29:19,390\nIn a production environment,\nyou'd go back to that other screen and\n\n1886\n01:29:19,390 --> 01:29:20,370\nchoose Pass Through.\n\n1887\n01:29:20,370 --> 01:29:21,410\nAnd that's usually that.\n\n1888\n01:29:21,410 --> 01:29:24,625\nSo all right, so we'll put that in place.\n\n1889\n01:29:24,625 --> 01:29:26,215\nAnd now I've got that one rule in.\n\n1890\n01:29:26,215 --> 01:29:29,915\nBut you can see where you can create many,\nmany rules based on different criteria.\n\n1891\n01:29:29,915 --> 01:29:31,985\nSome people get authenticated\nin different ways, or\n\n1892\n01:29:31,985 --> 01:29:33,675\nhave different values that you pull.\n\n1893\n01:29:33,675 --> 01:29:34,505\nYou can specify all that.\n\n1894\n01:29:36,650 --> 01:29:37,710\nOkay.\n\n1895\n01:29:37,710 --> 01:29:40,300\nSo now I've got my relying party trust.\n\n1896\n01:29:40,300 --> 01:29:43,210\nI've got server3.contoso.com in my list.\n\n1897\n01:29:43,210 --> 01:29:46,510\nAnd we're pretty close to done.\n\n1898\n01:29:46,510 --> 01:29:49,222\nTechnically, the web app proxy's\nbeen done for a while now.\n\n1899\n01:29:49,222 --> 01:29:49,977\n>> [LAUGH] Right.\n\n1900\n01:29:49,977 --> 01:29:51,170\n>> But, but.\n>> We wanna see it work.\n\n1901\n01:29:51,170 --> 01:29:52,250\n[LAUGH]\n>> Yeah.\n\n1902\n01:29:52,250 --> 01:29:55,690\nNow another thing I wanna do\nis when I go to the web app.\n\n1903\n01:29:55,690 --> 01:29:58,680\nThe web app wants to authenticate\nyou in a form on the webpage.\n\n1904\n01:30:00,120 --> 01:30:03,330\nThe web application proxy and\nactive directory federation services,\n\n1905\n01:30:03,330 --> 01:30:05,870\nthey don't default to that\ntype of authentication.\n\n1906\n01:30:05,870 --> 01:30:09,990\nThey expect you to be workplace joined and\nauto sending your credentials in, so\n\n1907\n01:30:09,990 --> 01:30:12,760\nwe need to turn on forms\nbased authentication.\n\n1908\n01:30:12,760 --> 01:30:14,770\nWell, forms-based authentication,\n\n1909\n01:30:14,770 --> 01:30:17,160\nit's actually turned on for\nexternal users by default.\n\n1910\n01:30:17,160 --> 01:30:19,080\nBut technically all my VMs are internal,\nso\n\n1911\n01:30:19,080 --> 01:30:20,850\nthat's where we're gonna\nkinda hit a speed bump.\n\n1912\n01:30:20,850 --> 01:30:23,350\nSo I'm gonna set it to do\nforms-based authentication for\n\n1913\n01:30:23,350 --> 01:30:25,360\ninternal and external users.\n\n1914\n01:30:25,360 --> 01:30:29,819\nI kinda like to do that anyway,\neven in production environments, but\n\n1915\n01:30:29,819 --> 01:30:33,458\nwe'll do it here in the lab to\nmake sure we can see things.\n\n1916\n01:30:33,458 --> 01:30:35,837\nSo what I'm gonna do is,\non the left side here,\n\n1917\n01:30:35,837 --> 01:30:38,960\nI'm gonna go to authentication policies.\n\n1918\n01:30:38,960 --> 01:30:44,280\nAnd you'll see my primary authentication\nfor external people is forms based.\n\n1919\n01:30:44,280 --> 01:30:45,400\nThat's what I want.\n\n1920\n01:30:45,400 --> 01:30:48,590\nBut for internal people,\nit's Windows authentication.\n\n1921\n01:30:48,590 --> 01:30:52,750\nAnd for my people who are workplace joined\nor not workplace joined, or whatever,\n\n1922\n01:30:52,750 --> 01:30:54,570\nif they are not joined to the domain-.\n\n1923\n01:30:54,570 --> 01:30:56,550\nThey are not going to be\ndoing Windows authentication.\n\n1924\n01:30:56,550 --> 01:30:57,840\nThey are going to be\ndoing the other types.\n\n1925\n01:30:57,840 --> 01:31:00,490\nSo I'm just going to modify that and\n\n1926\n01:31:00,490 --> 01:31:04,190\nI'm going to change them both\nto be forms based and that's it.\n\n1927\n01:31:04,190 --> 01:31:06,803\nAgain, that's another one that I\nprobably would not do in production but\n\n1928\n01:31:06,803 --> 01:31:09,010\nI'm doing here in the lab to make\nsure you can see the example.\n\n1929\n01:31:11,448 --> 01:31:13,230\nAll right, so there, that one is set.\n\n1930\n01:31:13,230 --> 01:31:17,400\nAnd that should be all I need to do there,\nlet me see if I missed anything else.\n\n1931\n01:31:17,400 --> 01:31:19,410\nYeah, all right.\n\n1932\n01:31:19,410 --> 01:31:24,180\nSo now the last thing I need to do,\nthe proxy's in place the proxy's running.\n\n1933\n01:31:24,180 --> 01:31:29,310\nThe Active Directory Federation server has\nit's relying party of trust, it's running.\n\n1934\n01:31:29,310 --> 01:31:33,220\nI need to publish the web\napp to the proxy.\n\n1935\n01:31:33,220 --> 01:31:36,460\nNow the proxy should be fully aware,\nknow about that app and\n\n1936\n01:31:36,460 --> 01:31:37,890\nbe ready to do the communications.\n\n1937\n01:31:37,890 --> 01:31:40,800\nThis is really the last puzzle piece.\n\n1938\n01:31:40,800 --> 01:31:42,610\nSo I'm gonna jump back\nover to my proxy server.\n\n1939\n01:31:44,600 --> 01:31:45,460\nHere we go.\n\n1940\n01:31:45,460 --> 01:31:48,580\nAnd I've got my web application proxy and\nsee published web applications?\n\n1941\n01:31:48,580 --> 01:31:50,595\nNow it's just a big empty space.\n\n1942\n01:31:50,595 --> 01:31:53,344\nSo I'm gonna go over and hit Publish and\n\n1943\n01:31:53,344 --> 01:31:57,490\nnow we're gonna enter it\nour web application data.\n\n1944\n01:31:57,490 --> 01:32:01,060\nSo it's going to ask me what kind\nof pre-authentication we're doing.\n\n1945\n01:32:01,060 --> 01:32:03,180\nAnd on the pre-authentication for\nthis one,\n\n1946\n01:32:03,180 --> 01:32:06,200\nI'm gonna stick with\nthe Active Directory Federation Services.\n\n1947\n01:32:07,890 --> 01:32:11,580\nFor the relying party,\nthere's server three showing up, right?\n\n1948\n01:32:11,580 --> 01:32:13,350\nIt's pulling that from ADFS.\n\n1949\n01:32:16,080 --> 01:32:20,290\nFor my publishing settings, I can give\nit a name, whatever we want to call it.\n\n1950\n01:32:20,290 --> 01:32:25,890\nI'll just call this one\nserver3.contosa.com.\n\n1951\n01:32:25,890 --> 01:32:33,680\nAnd then the external URL, and my\nexternal URL is just server3.contosa.com.\n\n1952\n01:32:33,680 --> 01:32:36,500\nYou'd punch in whatever your\nexternal users are browsing to,\n\n1953\n01:32:36,500 --> 01:32:40,020\nwhat address it is they're punching to,\nand you pick the appropriate certificate.\n\n1954\n01:32:40,020 --> 01:32:43,570\nNow I'm going to pick the certificate,\nadfs.contoso.com and\n\n1955\n01:32:43,570 --> 01:32:47,050\nyou might be saying to yourself,\nDon, that doesn't match.\n\n1956\n01:32:47,050 --> 01:32:50,105\nBut remember,\nthat one had the alternate names in it and\n\n1957\n01:32:50,105 --> 01:32:52,530\nserverthree.contoso.com was\none of those names.\n\n1958\n01:32:52,530 --> 01:32:53,940\nSo that's why I am using that server.\n\n1959\n01:32:56,120 --> 01:33:00,740\nThe back end server URL, for us it's\nthe same, but you might have a different\n\n1960\n01:33:00,740 --> 01:33:04,130\nURL you use for back end communications,\nfor internal communications.\n\n1961\n01:33:05,170 --> 01:33:13,325\nBut we'll leave that be and\nwe'll publish it.\n\n1962\n01:33:13,325 --> 01:33:16,295\nOnce that's done, that's it.\n\n1963\n01:33:16,295 --> 01:33:18,615\nOur web application proxy is running.\n\n1964\n01:33:18,615 --> 01:33:22,415\nThis external web app can\nnow talk to the proxy.\n\n1965\n01:33:22,415 --> 01:33:26,785\nThe proxy will talk to ADFS, which in\nturn talks to the Active Directory,\n\n1966\n01:33:26,785 --> 01:33:29,225\nauthenticates the users, returns a token.\n\n1967\n01:33:29,225 --> 01:33:32,760\nThe token passes through the proxy\nback to the web application.\n\n1968\n01:33:32,760 --> 01:33:35,930\nPeople should now be able to\nlog in to that web application,\n\n1969\n01:33:35,930 --> 01:33:40,260\neven when they're outside on the internet\nwithout exposing our domain controllers.\n\n1970\n01:33:40,260 --> 01:33:41,750\nThat's really the whole point of this.\n\n1971\n01:33:43,490 --> 01:33:46,344\nSo let's test that out,\nnow if it seems like I'm stalling, I am.\n\n1972\n01:33:46,344 --> 01:33:49,690\n>> [LAUGH]\n>> When you publish an app\n\n1973\n01:33:49,690 --> 01:33:53,480\nin the web app proxy it can take a second\nto activate because it's gotta reach\n\n1974\n01:33:53,480 --> 01:33:54,425\nout to that other server unit.\n\n1975\n01:33:54,425 --> 01:33:58,400\nThere's a few little things, so\nif you go too fast you may bump into it.\n\n1976\n01:33:58,400 --> 01:34:01,239\nIn real life land it's never a problem\nright, if your in an a lab it is.\n\n1977\n01:34:02,240 --> 01:34:05,055\nSo I'm jump over to Client2.\n\n1978\n01:34:05,055 --> 01:34:08,940\nClient2, this is that home user\nthat I workplace joined earlier.\n\n1979\n01:34:08,940 --> 01:34:12,600\nIt actually doesn't matter whether I'm\nworkplace joined or not in this scenario.\n\n1980\n01:34:12,600 --> 01:34:15,490\nI could go and unjoin it.\n\n1981\n01:34:15,490 --> 01:34:17,461\nBut, you know this.\n\n1982\n01:34:17,461 --> 01:34:18,960\n>> I was going to say that's\ngoing to be fun isn't it?\n\n1983\n01:34:18,960 --> 01:34:20,220\n>> Hard time getting out of that.\n\n1984\n01:34:20,220 --> 01:34:24,317\nYeah the The lab-\n>> I don't think this key's gonna let\n\n1985\n01:34:24,317 --> 01:34:25,680\nyou do it either.\n\n1986\n01:34:25,680 --> 01:34:26,770\nMaybe-\n>> Oh well, there we go.\n\n1987\n01:34:26,770 --> 01:34:27,280\nGood, perfect.\n\n1988\n01:34:27,280 --> 01:34:28,450\nAll right, so here I am.\n\n1989\n01:34:28,450 --> 01:34:29,663\nSo here I am on Client2.\n\n1990\n01:34:29,663 --> 01:34:31,971\n>> [LAUGH]\n>> The good old modern UI screen getting\n\n1991\n01:34:31,971 --> 01:34:32,710\nin the way.\n\n1992\n01:34:32,710 --> 01:34:33,430\n>> Modern UI.\n\n1993\n01:34:33,430 --> 01:34:34,130\n>> All right.\n\n1994\n01:34:34,130 --> 01:34:36,538\nSo I'm gonna fire up good\nold Internet Explorer and\n\n1995\n01:34:36,538 --> 01:34:38,169\nI'm gonna browse to this web app.\n\n1996\n01:34:41,488 --> 01:34:46,905\nAll right, so that's https://server3,\noops, it's already in my address bar.\n\n1997\n01:34:46,905 --> 01:34:50,060\nServer3.contosa.com/claimsapp, right?\n\n1998\n01:34:50,060 --> 01:34:50,945\nSo, I'm gonna browse to it.\n\n1999\n01:34:50,945 --> 01:34:54,700\nHere's my forms-based authentication.\n\n2000\n01:34:54,700 --> 01:35:00,280\nAnd so, I'm gonna log in as old\nBen Smith@contoso.com with his password.\n\n2001\n01:35:00,280 --> 01:35:03,710\nNow this is not who I'm logged\ninto the workstation as, right?\n\n2002\n01:35:03,710 --> 01:35:06,420\nCuz the workstation isn't\njoined to the domain.\n\n2003\n01:35:06,420 --> 01:35:10,100\nOn the workstation I'm logged\nin as Home User, right?\n\n2004\n01:35:10,100 --> 01:35:13,960\nBut in this form I'm putting in\nmy active directory credentials.\n\n2005\n01:35:13,960 --> 01:35:17,560\nAnd when I hit sign in,\nit's reaching out to the proxy.\n\n2006\n01:35:17,560 --> 01:35:20,210\nThe proxy is reaching out to ADFS.\n\n2007\n01:35:20,210 --> 01:35:25,570\nADFS is reaching back through\nto the domain controller and\n\n2008\n01:35:25,570 --> 01:35:27,860\nverifying that my credentials are valid.\n\n2009\n01:35:27,860 --> 01:35:30,858\n>> It then issues a token,\nthe token goes to the proxy and\n\n2010\n01:35:30,858 --> 01:35:33,537\nthen the proxy sends\nthe token to server three.\n\n2011\n01:35:33,537 --> 01:35:36,997\nIt determines I am allowed in and\nnow I see this page.\n\n2012\n01:35:36,997 --> 01:35:37,740\n>> Nice.\n>> All right?\n\n2013\n01:35:37,740 --> 01:35:39,863\nSo here's what this web app does,\nit creates this link,\n\n2014\n01:35:39,863 --> 01:35:40,980\nit says Contoso sign in page.\n\n2015\n01:35:40,980 --> 01:35:44,555\nWhen I click this,\nI am already logged in, right?\n\n2016\n01:35:44,555 --> 01:35:48,510\nSo I authenticate it\nonce I've got my token.\n\n2017\n01:35:48,510 --> 01:35:52,292\nNow as I continue to access web resources,\nI don't have to log in again,\n\n2018\n01:35:52,292 --> 01:35:55,210\nI don't have to continually\nlog in over and over again.\n\n2019\n01:35:55,210 --> 01:35:58,510\nSo when I go to the Contoso sign\nin page and I'm already signed in.\n\n2020\n01:35:58,510 --> 01:36:03,030\nIt's gonna pass right through and\nthen here is my claim.\n\n2021\n01:36:03,030 --> 01:36:05,270\nMy claim that was sent to that server.\n\n2022\n01:36:05,270 --> 01:36:11,160\nAnd so I can get in here and I can start\nto see all the information that was passed\n\n2023\n01:36:11,160 --> 01:36:16,110\nbetween the active directory federation\nserver and the web app, all right.\n\n2024\n01:36:16,110 --> 01:36:18,740\nSo I can see my account SID,\nmy groups, right.\n\n2025\n01:36:18,740 --> 01:36:22,790\nThese are all the Active Directory\ngroups that I'm in.\n\n2026\n01:36:22,790 --> 01:36:26,550\nI can see my own individual\naccount SID right here.\n\n2027\n01:36:26,550 --> 01:36:28,590\nMy user account, CONTOSO\\BenSmith.\n\n2028\n01:36:28,590 --> 01:36:33,110\nThis is all part of my token, a part of\nwhat's authenticating me as being myself.\n\n2029\n01:36:33,110 --> 01:36:33,820\nRight.\n\n2030\n01:36:33,820 --> 01:36:39,840\nBut right down here I can see,\nwhere I was proxied, right?\n\n2031\n01:36:39,840 --> 01:36:43,760\nThis token was not directly handed to me,\nby ADFS,\n\n2032\n01:36:43,760 --> 01:36:46,710\nit was handed to me through a proxy.\n\n2033\n01:36:46,710 --> 01:36:49,670\nThat's what the web application\nproxy does, all right?\n\n2034\n01:36:49,670 --> 01:36:54,842\nSo now that we've seen how to do it,\nwhat's the design piece?\n\n2035\n01:36:54,842 --> 01:36:56,920\nThe design piece is really simple.\n\n2036\n01:36:56,920 --> 01:37:00,250\nIf you're going to be having\na web application in a DMZ,\n\n2037\n01:37:01,250 --> 01:37:05,740\nyou do not want to expose your ADFS\nto the DMZ if you can avoid it.\n\n2038\n01:37:05,740 --> 01:37:08,280\nSo, the proxy sits on the border.\n\n2039\n01:37:08,280 --> 01:37:11,860\nIt sits in between the DMZ and\nyour internal network.\n\n2040\n01:37:11,860 --> 01:37:13,410\nAnd, it's the gatekeeper.\n\n2041\n01:37:13,410 --> 01:37:15,520\nTo determine what comes in and\nwhat goes out.\n\n2042\n01:37:15,520 --> 01:37:19,460\nAnd on that proxy,\nyou should have IP filters on it.\n\n2043\n01:37:19,460 --> 01:37:21,190\nAnd a firewall, whatever.\n\n2044\n01:37:21,190 --> 01:37:25,950\nSo that only these web claims can\npass through it and nothing else.\n\n2045\n01:37:25,950 --> 01:37:28,150\nAnd it does certificate\nbased authentication.\n\n2046\n01:37:28,150 --> 01:37:31,700\nSo in order for\nsomebody to break through that web proxy,\n\n2047\n01:37:31,700 --> 01:37:33,950\nthey would have to\ncompromise your private key.\n\n2048\n01:37:33,950 --> 01:37:36,040\nAnd if they do that,\nyou've got bigger problems,\n\n2049\n01:37:36,040 --> 01:37:38,410\nbecause now they can just\ndecode stuff in transit.\n\n2050\n01:37:38,410 --> 01:37:40,200\nSo they'll have credentials\nbefore you know it.\n\n2051\n01:37:40,200 --> 01:37:43,060\nSo this is where it falls in the design.\n\n2052\n01:37:43,060 --> 01:37:48,270\nYou have a DMZ, you have your internal\nLAN, the web app proxy sits in between.\n\n2053\n01:37:48,270 --> 01:37:49,720\nAnd it's just a Windows server.\n\n2054\n01:37:49,720 --> 01:37:52,940\nAny old Windows server can\nrun the web app proxy.\n\n2055\n01:37:52,940 --> 01:37:55,180\nYou fill that role on there.\n\n2056\n01:37:55,180 --> 01:37:55,710\nAnd that's it.\n\n2057\n01:37:55,710 --> 01:37:57,840\nSo it's pretty straightforward.\n\n2058\n01:37:57,840 --> 01:37:59,750\nIt's not something people do a lot though,\nso\n\n2059\n01:37:59,750 --> 01:38:02,630\nit's easy to kinda get confused or\nforget it.\n\n2060\n01:38:02,630 --> 01:38:05,080\nRemembering those steps is the hard part,\nbut\n\n2061\n01:38:05,080 --> 01:38:07,820\ndesign wise the need is pretty obvious.\n\n2062\n01:38:07,820 --> 01:38:12,820\nNow if your web apps are stored in\nMicrosoft Azure or somewhere like that and\n\n2063\n01:38:12,820 --> 01:38:16,880\nthey've got their own domain controller on\nthe back end, then you may not need this.\n\n2064\n01:38:16,880 --> 01:38:17,520\nRight?\n\n2065\n01:38:17,520 --> 01:38:20,770\nBut if they are authenticating\nit's your DC's,\n\n2066\n01:38:20,770 --> 01:38:25,682\nthe web app proxy is the way to handle it.\n\n2067\n01:38:25,682 --> 01:38:28,160\nAll right, Mike I know I kind of\nsteamrolled and talked a lot on this one.\n\n2068\n01:38:28,160 --> 01:38:29,510\n>> No that was good stuff, good stuff.\n\n2069\n01:38:29,510 --> 01:38:30,760\n>> Can you think of\nanything that I missed?\n\n2070\n01:38:30,760 --> 01:38:32,380\n>> No, I can't.\n\n2071\n01:38:32,380 --> 01:38:34,670\n>> Now, I know I say it's kind of easy.\n\n2072\n01:38:34,670 --> 01:38:37,170\nThis is just a small piece of ADFS.\n\n2073\n01:38:37,170 --> 01:38:40,150\nADFS is able to do a ton more.\n\n2074\n01:38:40,150 --> 01:38:42,550\nSo don't underestimate that.\n\n2075\n01:38:42,550 --> 01:38:44,540\nI do encourage you to do this V-Lab.\n\n2076\n01:38:44,540 --> 01:38:46,700\nThe full, I kind of bastardized it right.\n\n2077\n01:38:46,700 --> 01:38:48,990\nI just did what I wanted to do in it.\n\n2078\n01:38:48,990 --> 01:38:51,000\nBut the full lab.\n\n2079\n01:38:51,000 --> 01:38:52,686\nIt's kind of like a 30\npage instruction manual.\n\n2080\n01:38:52,686 --> 01:38:54,120\n>> [LAUGH]\n>> And it takes an hour and a half.\n\n2081\n01:38:54,120 --> 01:38:57,220\nAnd you'll see all these\ndifferent facets of it.\n\n2082\n01:38:57,220 --> 01:39:02,190\nFor the 7412 exam it's a good idea to\nhave seen how on all of that stuff.\n\n2083\n01:39:02,190 --> 01:39:05,120\nBut this exam they fixate\nmore on the what if proxy,\n\n2084\n01:39:05,120 --> 01:39:07,540\nbecause that's how it\neffects our network design.\n\n2085\n01:39:07,540 --> 01:39:11,800\nOtherwise the rest of it's just capacity.\n\n2086\n01:39:11,800 --> 01:39:15,240\nWe've definitely shot way past\nour break time on this one so-\n\n2087\n01:39:15,240 --> 01:39:16,080\n>> I was having so much fun,\n\n2088\n01:39:16,080 --> 01:39:16,880\nI didn't even notice.\n\n2089\n01:39:16,880 --> 01:39:19,580\n>> I'm talking about break time, that was\nthe last objective we had for this one.\n\n2090\n01:39:19,580 --> 01:39:21,300\n>> That was it, yeah.\n\n2091\n01:39:21,300 --> 01:39:25,220\n>> So\nwe still have the multi-site VPN stuff.\n\n2092\n01:39:25,220 --> 01:39:27,070\nWe'll tackle that in the next episode.\n\n2093\n01:39:27,070 --> 01:39:29,790\nBut for this episode,\nit's a pretty good spot to wrap it, right?\n\n2094\n01:39:29,790 --> 01:39:30,710\n>> I think so.\n\n2095\n01:39:30,710 --> 01:39:33,330\n>> All right, well,\nlet me just remind you guys.\n\n2096\n01:39:33,330 --> 01:39:36,400\nIf you have question on any of this,\nplease feel free to ask.\n\n2097\n01:39:36,400 --> 01:39:39,520\nLive during the show,\nyou can go to itpro.tv/live.\n\n2098\n01:39:39,520 --> 01:39:41,360\nYou'll see the chat\nright beneath the video.\n\n2099\n01:39:41,360 --> 01:39:42,440\nPost your questions there.\n\n2100\n01:39:42,440 --> 01:39:43,990\nWe monitor and answer during the show.\n\n2101\n01:39:43,990 --> 01:39:47,890\nIf you have questions after the show,\nuse our Q and A forums.\n\n2102\n01:39:47,890 --> 01:39:51,853\nOn the top of every page at itpro.tv,\nyou'll see a link that says Q and\n\n2103\n01:39:51,853 --> 01:39:54,770\nA, it'll take you into the forums and\nyou can post your questions there.\n\n2104\n01:39:54,770 --> 01:39:57,720\nWe monitor and\nanswer pretty frequently right?\n\n2105\n01:39:57,720 --> 01:39:58,760\n>> Pretty frequently.\n\n2106\n01:39:58,760 --> 01:40:01,130\n>> I know Ronnie's there every\nsingle [LAUGH] beats me anyhow.\n\n2107\n01:40:01,130 --> 01:40:02,430\n>> You're never gonna catch up with it.\n\n2108\n01:40:02,430 --> 01:40:04,720\n[LAUGH]\n>> [LAUGH] He's got more points.\n\n2109\n01:40:04,720 --> 01:40:08,389\nSo definitely post your questions,\nwe want to make you guys have answers,\n\n2110\n01:40:08,389 --> 01:40:09,620\nnot questions, right.\n\n2111\n01:40:09,620 --> 01:40:10,750\nThat's kind of the whole\npoint of learning.\n\n2112\n01:40:10,750 --> 01:40:12,944\n>> [LAUGH]\n>> All right,\n\n2113\n01:40:12,944 --> 01:40:16,790\nwell I hope you guys enjoyed the show,\nsigning off for ITProTV, I'm Don Pezet.\n\n2114\n01:40:16,790 --> 01:40:17,590\n>> And I'm Mike Rodrick.\n\n2115\n01:40:17,590 --> 01:40:19,380\n>> And we'll see you next time.\n\n2116\n01:40:19,380 --> 01:40:29,380\n[MUSIC]\n\n",
          "vimeoId": "107807715"
        }
      ],
      "title": "Design and implement network access services"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "5167",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical-sm.jpg",
          "title": "Planning For AD (Logical)",
          "transcript": "1\n00:00:00,006 --> 00:00:10,006\n>> [MUSIC]\n\n2\n00:00:33,638 --> 00:00:36,776\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:36,776 --> 00:00:38,880\nwelcome back to another\nepisode of IT Pro TV.\n\n4\n00:00:38,880 --> 00:00:41,760\nI'm your host Don Pizette,\nback with Mr. Mike Rodrick.\n\n5\n00:00:41,760 --> 00:00:42,580\nHow's it going, Mike?\n\n6\n00:00:42,580 --> 00:00:43,795\n>> Another day in paradise,\nDon, how you doing?\n\n7\n00:00:43,795 --> 00:00:46,370\n>> [LAUGH] Doing just swell.\n\n8\n00:00:46,370 --> 00:00:51,270\nYou know, we're moving into the later\nobjectives of this show and I gotta say,\n\n9\n00:00:51,270 --> 00:00:54,070\nhere's where we start to\nget into my favorite parts.\n\n10\n00:00:54,070 --> 00:00:57,450\nBecause when people think of MCSE's,\n\n11\n00:00:57,450 --> 00:01:01,920\nwhen people think of designing Windows\nenvironments, what do they think of?\n\n12\n00:01:01,920 --> 00:01:04,150\n>> Setting up my domain,\nsetting up my force, right?\n\n13\n00:01:04,150 --> 00:01:07,010\nGetting all my group policies ready and\nall that good stuff.\n\n14\n00:01:07,010 --> 00:01:09,620\n>> Cuz all the other stuff that we do,\nDNS,\n\n15\n00:01:09,620 --> 00:01:14,650\nDHCP, authentication,\nthose aren't really unique to Windows.\n\n16\n00:01:14,650 --> 00:01:17,200\nYou do that stuff with\nany operating system.\n\n17\n00:01:17,200 --> 00:01:21,196\n>> But the active directory, that's\nthe real complex piece that lays on top of\n\n18\n00:01:21,196 --> 00:01:23,450\nthis that builds your computer network.\n\n19\n00:01:23,450 --> 00:01:27,270\nThat is the front face of what your\nend users see when they sign in,\n\n20\n00:01:27,270 --> 00:01:29,080\nwhen they connect computers.\n\n21\n00:01:29,080 --> 00:01:31,756\nIt's all It's all powered\nby the active directory.\n\n22\n00:01:31,756 --> 00:01:36,047\nSo the last couple of objectives for this\ncertification are really my favorites,\n\n23\n00:01:36,047 --> 00:01:37,500\nall right?\n\n24\n00:01:37,500 --> 00:01:42,320\nNow they do divide it half, so we've got\nplanning for the active directory design,\n\n25\n00:01:42,320 --> 00:01:47,270\nlogical design, and planning for the\nactive directory design, physical, right?\n\n26\n00:01:47,270 --> 00:01:48,940\nWe're gonna tackle logical right here.\n\n27\n00:01:48,940 --> 00:01:52,490\nSo we're not worried so\nmuch about how many servers we have,\n\n28\n00:01:52,490 --> 00:01:54,370\nor where the physical servers are located,\nor\n\n29\n00:01:54,370 --> 00:01:56,300\neven whether we have more\nthan one physical location.\n\n30\n00:01:56,300 --> 00:01:58,530\nWe're not worried about\nthat stuff right now,\n\n31\n00:01:58,530 --> 00:02:00,545\nwe're just worried about\nthe logical design.\n\n32\n00:02:00,545 --> 00:02:05,425\nAnd in real life land, it makes sense to\nplan for the logical design first because\n\n33\n00:02:05,425 --> 00:02:08,015\nthe logical design is basically\nwhat you want to have.\n\n34\n00:02:08,015 --> 00:02:11,593\nAnd then you design your\nphysical design to provide that.\n\n35\n00:02:11,593 --> 00:02:12,495\n[CROSSTALK]\n>> Yeah,\n\n36\n00:02:12,495 --> 00:02:14,515\n[CROSSTALK] that logical design, exactly.\n\n37\n00:02:14,515 --> 00:02:17,519\n>> And you'll find where\noftentimes things don't match up,\n\n38\n00:02:17,519 --> 00:02:21,195\nthat your logical design might not\nmatch up with your physical design.\n\n39\n00:02:21,195 --> 00:02:27,370\nFor example, you might have more than one\ndomain in a single geographic location.\n\n40\n00:02:27,370 --> 00:02:32,180\nAnd so it's not a one to one\nrelationship like we'd expect,\n\n41\n00:02:32,180 --> 00:02:34,180\nand things can get a little weird.\n\n42\n00:02:35,580 --> 00:02:39,020\nSo that's what we're gonna take a look at\ntoday, is the logical design of an active\n\n43\n00:02:39,020 --> 00:02:42,880\ndirectory And we'll take a look at it\nfrom really two different perspectives.\n\n44\n00:02:42,880 --> 00:02:46,040\nOne perspective being\nthe brand new person,\n\n45\n00:02:46,040 --> 00:02:50,160\nthe person who's designing, sorry, not\na brand new person, a brand new network.\n\n46\n00:02:50,160 --> 00:02:53,108\nA brand new person should be\ndesigning your interactive directory,\n\n47\n00:02:53,108 --> 00:02:55,260\n[LAUGH] a brand new network.\n\n48\n00:02:55,260 --> 00:03:00,080\nMaybe you've been hired on as\na network admin or manager and\n\n49\n00:03:00,080 --> 00:03:04,369\nit's your job to deploy the active\ndirectory for the first time.\n\n50\n00:03:04,369 --> 00:03:07,520\n>> Yeah, they're growing and they've\ndecided hey, we're gonna move out of this\n\n51\n00:03:07,520 --> 00:03:10,000\ngroup environment and\nwe're gonna bring up a domain.\n\n52\n00:03:10,000 --> 00:03:13,020\nWe're gonna start taking advantage of\nsome of these cool things that we can get\n\n53\n00:03:13,020 --> 00:03:14,950\nby being in that domain environment.\n\n54\n00:03:14,950 --> 00:03:18,930\nWhat a fun place to be, right,where you're\nstarting from scratch and it's your baby.\n\n55\n00:03:18,930 --> 00:03:21,740\n>> It is a lot of fun,\nit's not very common.\n\n56\n00:03:21,740 --> 00:03:25,366\nMost people aren't going to be in that\nscenario where you get to design something\n\n57\n00:03:25,366 --> 00:03:26,927\nfrom scratch, not at this point.\n\n58\n00:03:26,927 --> 00:03:29,543\nIf this was 1999 or 2000,or whenever,\n\n59\n00:03:29,543 --> 00:03:33,450\nwhen active directory was first\ncoming out, different story, right?\n\n60\n00:03:33,450 --> 00:03:35,640\nYou got to design an active\ndirectory from scratch.\n\n61\n00:03:35,640 --> 00:03:39,493\nBut it's been 15 years since\nthe active directory came out, and so\n\n62\n00:03:39,493 --> 00:03:43,990\nmost organizations are going to have\nan active directory, already do.\n\n63\n00:03:43,990 --> 00:03:45,134\n>> Unless they're a start up or something.\n\n64\n00:03:45,134 --> 00:03:46,840\n>> Yeah, I guess that's possible.\n\n65\n00:03:46,840 --> 00:03:49,396\nWell yeah,\nwe kind of do that with IT Pro Tv.\n\n66\n00:03:49,396 --> 00:03:53,176\nActually wait a minute, because you see\nthe active directory stuff that we built,\n\n67\n00:03:53,176 --> 00:03:54,372\nwhich is non-existent.\n\n68\n00:03:54,372 --> 00:04:00,220\n[LAUGH] If you go out to work somewhere,\nand you are the network manager,\n\n69\n00:04:00,220 --> 00:04:03,480\ndesigner, engineer, R&D,\nwhatever it is that your role is.\n\n70\n00:04:03,480 --> 00:04:06,320\nIf you're put in charge of\na the design of an active directory,\n\n71\n00:04:06,320 --> 00:04:07,890\nit probably already exists.\n\n72\n00:04:07,890 --> 00:04:11,300\nAnd so you're not focused on creating\nsomething brand new from scratch,\n\n73\n00:04:11,300 --> 00:04:14,380\nyou're focused on working\nwith what you've got.\n\n74\n00:04:14,380 --> 00:04:17,530\nAnd depending on your resources you may or\nmay not be able to change that.\n\n75\n00:04:17,530 --> 00:04:22,070\nAnd in the old days you were really\nlimited in what changes you could even do.\n\n76\n00:04:22,070 --> 00:04:25,927\nThat's changed now, now we have a lot more\nflexibility with our active directories.\n\n77\n00:04:25,927 --> 00:04:30,549\nIt's not easy to change, but\nyou can change and that's kind of nice.\n\n78\n00:04:30,549 --> 00:04:33,690\n>> I remember back in the day, you changed\nthe name of a domain controller and\n\n79\n00:04:33,690 --> 00:04:36,170\nholy smokes you were going\nto have some major issues.\n\n80\n00:04:36,170 --> 00:04:38,129\n>> Yeah.\nI mean, it could be done but\n\n81\n00:04:38,129 --> 00:04:40,510\nyou really didn't wanna do it.\n\n82\n00:04:40,510 --> 00:04:43,630\nAnd things like changing the name of a\ndomain well you didn't even mess with that\n\n83\n00:04:43,630 --> 00:04:44,387\nin the early days.\n\n84\n00:04:44,387 --> 00:04:46,875\n>> Yeah, you make another domain and\nyou just move things.\n\n85\n00:04:46,875 --> 00:04:48,200\n[LAUGH]\n>> But\n\n86\n00:04:48,200 --> 00:04:50,880\nthere are some things we have to\nbe aware of that you can't change,\n\n87\n00:04:50,880 --> 00:04:53,320\nchanges that you put in place that\nare just going to be there forever.\n\n88\n00:04:53,320 --> 00:04:55,770\nSo there's areas we need to be really,\nreally careful,\n\n89\n00:04:55,770 --> 00:04:58,130\nlike anything having to do\nwith the schema, right?\n\n90\n00:04:58,130 --> 00:05:01,940\nBecause you can add new schema values and\nschema attributes, and\n\n91\n00:05:01,940 --> 00:05:06,200\nthings like that into your schema,\nbut you can't delete them.\n\n92\n00:05:06,200 --> 00:05:11,140\nYou can tombstone them so they show\nas inactive, but they're still there.\n\n93\n00:05:11,140 --> 00:05:14,160\nSo you do have to be careful with a lot\nof that, and at this higher level,\n\n94\n00:05:14,160 --> 00:05:18,000\nwhen we're talking about networks that\naffect tens of thousands of users,\n\n95\n00:05:18,000 --> 00:05:18,730\nthat's a big deal, right?\n\n96\n00:05:19,750 --> 00:05:23,190\nSo let's run down our laundry list,\nand really,\n\n97\n00:05:23,190 --> 00:05:27,730\nif you look at the Microsoft objectives,\nit is a laundry list of technologies.\n\n98\n00:05:27,730 --> 00:05:32,516\nBut these are things that we're gonna\nfactor into to figuring out our network\n\n99\n00:05:32,516 --> 00:05:33,580\ndesign, all right?\n\n100\n00:05:33,580 --> 00:05:39,280\nSo the first thing that I wanna start\nout with is a forest architecture.\n\n101\n00:05:39,280 --> 00:05:43,070\nWhen we build up an active directory,\nwe usually start with one thing.\n\n102\n00:05:43,070 --> 00:05:45,720\nAnd I'm gonna use VIZIO today cuz\nthey have some nice little active\n\n103\n00:05:45,720 --> 00:05:46,780\ndirectory icons.\n\n104\n00:05:46,780 --> 00:05:47,660\nAnd on the exam,\n\n105\n00:05:47,660 --> 00:05:50,530\nthese are the icons they'll use,\nso it kinda sets the expectation.\n\n106\n00:05:50,530 --> 00:05:52,870\nBut when we start to build\nan active directory,\n\n107\n00:05:52,870 --> 00:05:54,400\nwe normally start with a single domain.\n\n108\n00:05:54,400 --> 00:05:58,690\nAnd that single domain, that's where\nour user accounts are gonna be and\n\n109\n00:05:58,690 --> 00:06:00,650\nour computers and so on.\n\n110\n00:06:00,650 --> 00:06:06,410\nMost organizations will go with a single\ndomain, just one domain, and that's it.\n\n111\n00:06:06,410 --> 00:06:10,720\nAnd the main reason is convenience, right.\n\n112\n00:06:10,720 --> 00:06:14,390\n>> If you don't have a really good\nreason to start breaking out into\n\n113\n00:06:14,390 --> 00:06:17,650\nmultiple domains, or as we're going to\nget into, multiple forests, why do it?\n\n114\n00:06:17,650 --> 00:06:21,590\nYou're adding extra equipment, extra\nadministrative overhead, extra complexity.\n\n115\n00:06:21,590 --> 00:06:23,990\n>> When you've got a single domain,\n\n116\n00:06:23,990 --> 00:06:27,530\nyou don't have to worry about things like\nglobal catalogs and universal groups.\n\n117\n00:06:27,530 --> 00:06:31,730\nBecause all of your domain controllers\nhave the same domain partition,\n\n118\n00:06:31,730 --> 00:06:34,910\nthey've got the full information\nabout the domain right there.\n\n119\n00:06:34,910 --> 00:06:36,480\nRemember that in the active directory,\n\n120\n00:06:36,480 --> 00:06:40,740\nyour domain controllers are replicating\nthe active directory in partitions, right?\n\n121\n00:06:40,740 --> 00:06:43,620\nAnd there's three main partitions\nyou're gonna have in a minimum,\n\n122\n00:06:43,620 --> 00:06:45,490\nyou may well have many, many more,\n\n123\n00:06:45,490 --> 00:06:49,700\nright, like DNS adds another two,\nbut the minimum you've got three.\n\n124\n00:06:49,700 --> 00:06:53,840\nThere's the domain, the configuration and\nthe schema partition.\n\n125\n00:06:53,840 --> 00:06:56,000\nWell, the configuration and\nschema partitions,\n\n126\n00:06:56,000 --> 00:06:58,030\nthose are replicated throughout\nyour entire forest, right.\n\n127\n00:06:58,030 --> 00:06:59,936\nThey're all your domain,\nso those are the same.\n\n128\n00:06:59,936 --> 00:07:04,767\nBut the domain partition, that one is\nIs unique to each individual domain,\n\n129\n00:07:04,767 --> 00:07:08,625\nand it contains the lists of users and\ngroups in that domain.\n\n130\n00:07:08,625 --> 00:07:11,725\n>> Yeah, all your domain specific objects,\nthat's where they're going to be.\n\n131\n00:07:11,725 --> 00:07:14,795\nAnd so those only replicate to the domain\ncontrollers in that same domain.\n\n132\n00:07:14,795 --> 00:07:17,635\nBut if we've got one domain,\nthen that's all the domain controllers.\n\n133\n00:07:17,635 --> 00:07:20,945\n>> But if I've got Domain1 and\nI've got Domain2.\n\n134\n00:07:22,190 --> 00:07:26,240\nThey'll have the same configuration and\nschema partitions but\n\n135\n00:07:26,240 --> 00:07:28,200\nthey'll have different domain partitions.\n\n136\n00:07:28,200 --> 00:07:30,890\nAnd so\nto speed up authentication between them,\n\n137\n00:07:30,890 --> 00:07:33,520\nthat's where we use our global catalog and\nuniversal groups.\n\n138\n00:07:33,520 --> 00:07:36,280\nAnd you guys should already have\nexperience with using those.\n\n139\n00:07:36,280 --> 00:07:40,620\nSo in a single domain environment\nwe don't even worry about those.\n\n140\n00:07:40,620 --> 00:07:44,680\nThat whole part of the design is not\nimportant to us, it's much more simple.\n\n141\n00:07:45,920 --> 00:07:49,030\nBut why would I want to\ngo to multiple domains?\n\n142\n00:07:49,030 --> 00:07:51,240\nIf I know that multiple domains\nare gonna make things more complex,\n\n143\n00:07:51,240 --> 00:07:52,260\nwhy would I do that, right?\n\n144\n00:07:52,260 --> 00:07:55,040\nWhat is my motivating factor for doing it?\n\n145\n00:07:55,040 --> 00:07:59,544\nWell, today, there's actually not\na whole lot of motivating factors.\n\n146\n00:07:59,544 --> 00:08:01,962\nThere used to be a ton, right, and so\n\n147\n00:08:01,962 --> 00:08:06,098\nwhat you'll find is that when you\ngo out to a existing network.\n\n148\n00:08:06,098 --> 00:08:11,150\nThey may already have multiple domains\nbecause of some preexisting need, right?\n\n149\n00:08:11,150 --> 00:08:12,690\nBut if you're designing\na network from scratch,\n\n150\n00:08:12,690 --> 00:08:14,760\nyou're probably going to go\nwith a single domain, right?\n\n151\n00:08:14,760 --> 00:08:18,370\nSo what are some of the reasons\nwhy we might do multiple domains?\n\n152\n00:08:18,370 --> 00:08:20,660\n>> Could be as simple as just name spaces.\n\n153\n00:08:20,660 --> 00:08:22,880\n>> Yeah.\n>> Wanting to just separate that out or\n\n154\n00:08:22,880 --> 00:08:23,580\nsomething like that.\n\n155\n00:08:23,580 --> 00:08:26,740\nAnd depending if we're not\ndoing a contiguous name space,\n\n156\n00:08:26,740 --> 00:08:28,260\nyou might buy a company.\n\n157\n00:08:28,260 --> 00:08:32,352\nAnd you want to bring their domain into\nyour forest and you want to maintain that\n\n158\n00:08:32,352 --> 00:08:36,273\nname space, they already have brand\nrecognition or something like that.\n\n159\n00:08:36,273 --> 00:08:38,131\nCould be for administrative purposes,\n\n160\n00:08:38,131 --> 00:08:40,981\nsevering out some of\nthe administrative responsibilities.\n\n161\n00:08:40,981 --> 00:08:44,474\n>> Yeah,\nthe biggest motivating factor in the old\n\n162\n00:08:44,474 --> 00:08:45,185\ndays-\n>> Uh-huh.\n\n163\n00:08:45,185 --> 00:08:46,425\n>> Was a password policy.\n\n164\n00:08:46,425 --> 00:08:46,950\n>> Yes.\n>> Right.\n\n165\n00:08:46,950 --> 00:08:47,475\n>> [LAUGH]\n\n166\n00:08:47,475 --> 00:08:49,585\n>> That the password policy was set as\n\n167\n00:08:49,585 --> 00:08:52,585\npart of your default domain policy.\nOr it was set at the domain level,\n\n168\n00:08:52,585 --> 00:08:53,865\nyou could move it out if you wanted to\n\n169\n00:08:53,865 --> 00:08:54,885\nanother policy.\n>> Uh-huh.\n\n170\n00:08:54,885 --> 00:08:55,895\n>> But it was in the default\n\n171\n00:08:55,895 --> 00:08:59,945\ndomain policy, it was the default location\nfor it and if you wanted to have different\n\n172\n00:08:59,945 --> 00:09:01,915\nusers with different password policies-\n>> Uh-huh.\n\n173\n00:09:01,915 --> 00:09:03,975\n>> Like how often they had\nto reset their password?\n\n174\n00:09:03,975 --> 00:09:05,670\nHow complex their password had to be?\n\n175\n00:09:05,670 --> 00:09:07,840\nThe only way to do it\nwas multiple domains.\n\n176\n00:09:07,840 --> 00:09:12,000\nAnd that really stunk for\na reason to do it but that was a reason.\n\n177\n00:09:12,000 --> 00:09:15,210\n>> But you know, you wanted your typical\nend users to use maybe an eight character\n\n178\n00:09:15,210 --> 00:09:16,740\npassword, change it every day.\n\n179\n00:09:16,740 --> 00:09:17,600\nBut you want those guys,\n\n180\n00:09:17,600 --> 00:09:20,770\nthose administrative accounts\nto be required to have a 10 or\n\n181\n00:09:20,770 --> 00:09:24,260\n12 character password and change it every\ntwo weeks and you just couldn't do it.\n\n182\n00:09:24,260 --> 00:09:29,379\n>> So you might have somebody who\nhas a domain called itpro.tv,\n\n183\n00:09:29,379 --> 00:09:35,877\nand then maybe they've got a child domain\nthat is underneath it that is just for\n\n184\n00:09:35,877 --> 00:09:40,120\nthose users that have a greater need for\nsecurity.\n\n185\n00:09:40,120 --> 00:09:44,703\nSo we might have maybe our hosts\n.itpro.tv versus regular itpro.tv, and\n\n186\n00:09:44,703 --> 00:09:49,069\nthen that way if we have our regular\nemployees, they go into itpro.tv,\n\n187\n00:09:49,069 --> 00:09:53,293\nthey would get the eight character\npassword and then if you are a host,\n\n188\n00:09:53,293 --> 00:09:59,010\nyou'd go in this other domain where you'd\nhave a much stronger password requirement.\n\n189\n00:09:59,010 --> 00:10:00,740\nYou can do that, all right.\n\n190\n00:10:00,740 --> 00:10:02,680\nBut we don't have to do that anymore.\n\n191\n00:10:02,680 --> 00:10:05,080\nIt was in, what was it 2008 or 2002?\n\n192\n00:10:05,080 --> 00:10:09,500\n>> 2008 I think brought in the-\n>> Fine grain password policies.\n\n193\n00:10:09,500 --> 00:10:13,650\nSo you've got these new ways to handle\npassword policies where you can do more\n\n194\n00:10:13,650 --> 00:10:17,200\nthan one password policy\ninside of a single domain.\n\n195\n00:10:17,200 --> 00:10:18,700\nSo you're probably asking yourself,\n\n196\n00:10:18,700 --> 00:10:20,830\nwell Don, if that's not a need\nanymore why talk about it?\n\n197\n00:10:20,830 --> 00:10:25,520\nWell the reason is if an organization\nwent through the trouble to deploy two\n\n198\n00:10:25,520 --> 00:10:29,820\ndomains in the past, just because\nthat new feature is available,\n\n199\n00:10:29,820 --> 00:10:31,580\nthey may not have moved to that yet.\n\n200\n00:10:31,580 --> 00:10:35,375\nSo you may go work somewhere where they\nhave multiple domains specifically because\n\n201\n00:10:35,375 --> 00:10:38,856\nof password policies, and you can now\nlook at it and you say, you know what?\n\n202\n00:10:38,856 --> 00:10:44,535\nLet's implement some fine-grain password\npolicies up here in our main domain,\n\n203\n00:10:44,535 --> 00:10:49,639\nshift these users over to the other\ndomain and then phase this domain out,\n\n204\n00:10:49,639 --> 00:10:54,273\ngetting rid of it and going back\ndown to just a single environment.\n\n205\n00:10:54,273 --> 00:10:54,898\n>> If you can.\n\n206\n00:10:54,898 --> 00:10:56,373\nI think it's there forever now.\n\n207\n00:10:56,373 --> 00:10:59,463\n[LAUGH]\n>> You know my problem, and\n\n208\n00:10:59,463 --> 00:11:04,523\nthis is my own fault here, is my keyboard\nmappings are a little messed up.\n\n209\n00:11:04,523 --> 00:11:06,356\nAnyhow, so yeah, so\nwe'll just get rid of this.\n\n210\n00:11:06,356 --> 00:11:10,707\nWe'll just move it somewhere else.\n\n211\n00:11:10,707 --> 00:11:13,640\n[LAUGH] So we can do that,\nI don't know, it is there forever.\n\n212\n00:11:13,640 --> 00:11:14,550\nThere we go.\n\n213\n00:11:14,550 --> 00:11:16,440\nSo we can move it off.\n\n214\n00:11:16,440 --> 00:11:19,470\nBasically we have our itpro.tv and\nit's a single domain.\n\n215\n00:11:19,470 --> 00:11:21,490\nSo for most people,\nthat's going to work out great.\n\n216\n00:11:21,490 --> 00:11:24,550\nBut there are some other reasons\nthat we might go multiple domain.\n\n217\n00:11:24,550 --> 00:11:25,110\nAll right.\n\n218\n00:11:25,110 --> 00:11:27,990\nMike you mentioned separating\nadministrative duties.\n\n219\n00:11:27,990 --> 00:11:29,160\n>> Right.\n>> Right.\n\n220\n00:11:29,160 --> 00:11:35,120\nWhat if my company is, an example I like\nto use is maybe you're multinational.\n\n221\n00:11:35,120 --> 00:11:38,780\nSo you've got offices in the US,\nand you've got offices in Europe.\n\n222\n00:11:38,780 --> 00:11:44,510\nAnd you don't want the IT guys in the US\ntrying to support the machines in Europe,\n\n223\n00:11:44,510 --> 00:11:46,680\ndifferent time zones,\nit would be a whole mess.\n\n224\n00:11:46,680 --> 00:11:49,065\nSo maybe you have separate IT departments.\n\n225\n00:11:49,065 --> 00:11:52,328\nOne IT department for Europe as\na continent, and one IT department for\n\n226\n00:11:52,328 --> 00:11:53,135\nNorth America.\n\n227\n00:11:53,135 --> 00:11:58,767\nSo in that scenario, maybe I've got\nthese two different IT departments and\n\n228\n00:11:58,767 --> 00:12:01,760\nI don't want one treading on the other.\n\n229\n00:12:01,760 --> 00:12:04,838\nIf I have to make them domain admins and\nthey're in the same domain,\n\n230\n00:12:04,838 --> 00:12:08,456\nthen the European admins could mess with\nthe American admins, and vice versa,\n\n231\n00:12:08,456 --> 00:12:09,960\nor mess with the users.\n\n232\n00:12:09,960 --> 00:12:13,646\nSo we might want to separate that out and\nhave like,\n\n233\n00:12:13,646 --> 00:12:18,731\na Na.itpro.tv and auto-capitalization\nhas been driving me nuts.\n\n234\n00:12:18,731 --> 00:12:23,077\nAnd then we might have an Eu.itpro.tv,\nright,\n\n235\n00:12:23,077 --> 00:12:26,850\nto be able to handle the European users.\n\n236\n00:12:26,850 --> 00:12:30,830\nAnd now, if I make Mike a domain admin for\nNorth America and\n\n237\n00:12:30,830 --> 00:12:35,210\nI make myself a domain admin for Europe,\nwe can't step on each others toes.\n\n238\n00:12:35,210 --> 00:12:37,049\nRight?\nWe can't work with each other's stuff.\n\n239\n00:12:38,510 --> 00:12:43,365\nSo that starts to solve that problem but\nit does open up another can of worms.\n\n240\n00:12:43,365 --> 00:12:44,920\n>> Mm-hm.\n\n241\n00:12:44,920 --> 00:12:50,750\n>> The very first domain you create\nis what's called the forest root.\n\n242\n00:12:50,750 --> 00:12:55,010\nThese guys are all in a forest,\nI didn't really draw that.\n\n243\n00:12:55,010 --> 00:12:58,050\nI don't think I get a fancy container for\nforests or\n\n244\n00:12:58,050 --> 00:13:03,000\nanything but, basically,\nthese guys are all in a forest.\n\n245\n00:13:03,000 --> 00:13:03,606\nRight?\n\n246\n00:13:03,606 --> 00:13:08,898\nAnd that forest, it defines a few things.\n\n247\n00:13:08,898 --> 00:13:10,070\nA few things that are important.\n\n248\n00:13:10,070 --> 00:13:12,700\nWhere is the send a back on this thing?\n\n249\n00:13:13,750 --> 00:13:14,560\nWell, you know what?\n\n250\n00:13:14,560 --> 00:13:17,260\nThis is just gonna be my day right here.\n\n251\n00:13:17,260 --> 00:13:18,980\nMastery of Visio is gonna slow me down.\n\n252\n00:13:18,980 --> 00:13:22,110\n>> But yeah, so\nwhen you set up that first domain,\n\n253\n00:13:22,110 --> 00:13:24,200\nyou start with nothing if\nyou're starting from scratch.\n\n254\n00:13:24,200 --> 00:13:28,420\nWhen you create that first domain, you're\nalso creating a forest at the same time.\n\n255\n00:13:28,420 --> 00:13:29,230\nIt's a small forest.\n\n256\n00:13:29,230 --> 00:13:31,590\nIt's got a single tree,\na single domain in there.\n\n257\n00:13:31,590 --> 00:13:33,836\nBut that forest, as Don was saying,\n\n258\n00:13:33,836 --> 00:13:37,690\nin that forest root,\nthat's a special domain in your forest.\n\n259\n00:13:39,110 --> 00:13:42,510\nIt's gonna have a couple of groups in\nthere, that are not gonna be located in\n\n260\n00:13:42,510 --> 00:13:45,108\nany, no matter how many domains\nyou have in your forest.\n\n261\n00:13:45,108 --> 00:13:49,190\nIn that forest root is where you're gonna\nfind things like the enterprise admins.\n\n262\n00:13:49,190 --> 00:13:51,480\nIt's where you're gonna find\nthe schema admins group.\n\n263\n00:13:51,480 --> 00:13:53,760\nAnd we've talked about those\ngroups in other classes.\n\n264\n00:13:53,760 --> 00:13:56,760\nIt's also where a couple\nof the forest wide FSMOs,\n\n265\n00:13:56,760 --> 00:14:00,010\nor the flexible single master\noperations are gonna be located.\n\n266\n00:14:00,010 --> 00:14:03,860\nIt is the only place that has the writable\ncopy by default, the only place that has\n\n267\n00:14:03,860 --> 00:14:06,990\nthe writable copy of the schema\nif I wanna make changes to it.\n\n268\n00:14:06,990 --> 00:14:09,600\nSo there are few special\nthings we wanna keep in mind,\n\n269\n00:14:09,600 --> 00:14:14,050\ndealing with that forest root or\nthat first domain that we create.\n\n270\n00:14:14,050 --> 00:14:18,240\n>> Yeah, but the big deal there is going\nto be that schema admins group, and\n\n271\n00:14:18,240 --> 00:14:20,850\nthe enterprise admins group.\n\n272\n00:14:20,850 --> 00:14:25,170\nSchema changes, schema, it's the same\nacross your entire forest, so\n\n273\n00:14:25,170 --> 00:14:30,090\nif the North American domain is\nthe first one that I made, right, and\n\n274\n00:14:30,090 --> 00:14:34,080\nso that's the forest root,\nit's got the schema admins group.\n\n275\n00:14:34,080 --> 00:14:39,480\nAnd if Mike is a North American admin,\na domain admin in that domain,\n\n276\n00:14:39,480 --> 00:14:42,270\nhe could put himself in\nthe enterprise admins group, right.\n\n277\n00:14:42,270 --> 00:14:43,670\nIt will let him do it.\n\n278\n00:14:43,670 --> 00:14:45,880\nOr he could put himself in\nthe scheme admins group, right.\n\n279\n00:14:45,880 --> 00:14:47,560\nStart making changes, that breaks Europe.\n\n280\n00:14:47,560 --> 00:14:52,180\nSo my separation that I tried to create,\nI've kind of lost for\n\n281\n00:14:52,180 --> 00:14:54,910\nthat one because they can\nbe enterprise admins.\n\n282\n00:14:54,910 --> 00:14:59,420\nSo if you're breaking up the network for\nadministrative purposes,\n\n283\n00:14:59,420 --> 00:15:04,145\nit is very,\nvery common to use an empty root model.\n\n284\n00:15:04,145 --> 00:15:04,720\n>> Mm-hm.\n>> And\n\n285\n00:15:04,720 --> 00:15:07,700\nI know I've talked about empty roots\nin some of the other shows, or\n\n286\n00:15:07,700 --> 00:15:08,755\nat least I feel like I have.\n\n287\n00:15:08,755 --> 00:15:09,940\n>> Mm-hm.\n>> Sometimes I talk to myself,\n\n288\n00:15:09,940 --> 00:15:11,600\nso maybe it didn't make it out of my mind.\n\n289\n00:15:11,600 --> 00:15:13,302\n>> We were listening,\nthat was in an early episode,\n\n290\n00:15:13,302 --> 00:15:15,260\nI think this week we talked\na little bit about it.\n\n291\n00:15:15,260 --> 00:15:16,130\n>> Okay.\n>> Mm-hm.\n\n292\n00:15:16,130 --> 00:15:22,170\nBut just to kinda recap it, an empty\nroot is where we create another domain.\n\n293\n00:15:22,170 --> 00:15:23,940\nBecause you can never have too many,\nright?\n\n294\n00:15:23,940 --> 00:15:30,330\nSo, we create another domain, and it's\ntypically going to be a parent, like this.\n\n295\n00:15:30,330 --> 00:15:34,440\nRight, so, I've got ITPro TV, and\nunderneath it, I've got eu and na.\n\n296\n00:15:35,570 --> 00:15:42,220\nAnd by doing that, we have this\nkind of relationship put in place,\n\n297\n00:15:42,220 --> 00:15:47,550\nboy a blue line on a blue shape\nis not really gonna cut it is it,\n\n298\n00:15:47,550 --> 00:15:51,470\nbut basically what it allows us to\ndo is that this empty root which\n\n299\n00:15:51,470 --> 00:15:56,170\nis the root of our forest,\nit contains the enterprise admins and\n\n300\n00:15:56,170 --> 00:16:01,395\nit contains the schema admins group but\nmy IT guys aren't in there.\n\n301\n00:16:01,395 --> 00:16:06,277\n>> Mm-hm. Right. >> My IT guys\nare in their respective domains.\n\n302\n00:16:06,277 --> 00:16:08,274\nThey're in North America or EU.\n\n303\n00:16:08,274 --> 00:16:09,900\nThey're in one of these other domains.\n\n304\n00:16:09,900 --> 00:16:10,979\nThey no longer have access to that.\n\n305\n00:16:10,979 --> 00:16:12,477\nNow who does have access to that.\n\n306\n00:16:12,477 --> 00:16:13,600\n>> Mm-hm\n>> Well,\n\n307\n00:16:13,600 --> 00:16:16,598\nsomewhere in my organization\nI need to have a CIO.\n\n308\n00:16:16,598 --> 00:16:17,900\nA chief Information Officer.\n\n309\n00:16:17,900 --> 00:16:21,380\nOr an IT director or\nwhatever their position is.\n\n310\n00:16:21,380 --> 00:16:24,920\nAnd they're the ones who are in\ncharge of the whole shebang, right?\n\n311\n00:16:24,920 --> 00:16:28,095\nThey need to have administrative\naccess in this root domain.\n\n312\n00:16:28,095 --> 00:16:30,120\n>> Mm-hm.\n>> The root domain is not gonna contain\n\n313\n00:16:30,120 --> 00:16:32,610\nany other user accounts.\n\n314\n00:16:32,610 --> 00:16:35,290\nAnd when it comes time for\nsomebody to make a schema change or\n\n315\n00:16:35,290 --> 00:16:37,775\nsome kind of change that would\neffect the organization as a whole.\n\n316\n00:16:37,775 --> 00:16:40,060\n>> Mm-hm\n>> They'll have to go through the approval\n\n317\n00:16:40,060 --> 00:16:43,260\nprocess and talk to whoever that\nperson is that's in charge.\n\n318\n00:16:43,260 --> 00:16:46,120\nAnd they're the one's that\nare going to approve the change and\n\n319\n00:16:46,120 --> 00:16:47,850\nallow it to happen up here.\n\n320\n00:16:47,850 --> 00:16:49,360\nBut you've now got some kinda checks and\n\n321\n00:16:49,360 --> 00:16:53,135\nbalances that are stopping these\nadmins from messing with each other.\n\n322\n00:16:53,135 --> 00:16:55,310\n>> [LAUGH] It's like\na war we've go going on.\n\n323\n00:16:55,310 --> 00:16:56,300\n>> It can be, right?\n\n324\n00:16:56,300 --> 00:17:01,005\nYou know, there's a lot of politics\nin Corporate hierarchy, I suppose.\n\n325\n00:17:01,005 --> 00:17:02,550\n>> [LAUGH]\n>> So,\n\n326\n00:17:02,550 --> 00:17:05,770\nseparating out administrative roles,\n\n327\n00:17:05,770 --> 00:17:10,065\nright, that's one reason why we might go\nto multiple domains inside of our forest.\n\n328\n00:17:10,065 --> 00:17:10,810\n>> Right.\n\n329\n00:17:10,810 --> 00:17:12,057\n>> There are other reasons too.\n\n330\n00:17:12,057 --> 00:17:13,835\nPerformance.\n\n331\n00:17:13,835 --> 00:17:18,250\n>> Mm-hm\n>> If my North American domain is massive.\n\n332\n00:17:18,250 --> 00:17:20,580\nIf I have millions of users.\n\n333\n00:17:20,580 --> 00:17:21,375\nAll right?\n\n334\n00:17:21,375 --> 00:17:24,650\nAnd my European domain is massive.\n\n335\n00:17:24,650 --> 00:17:25,780\nAnd it's got millions of users.\n\n336\n00:17:25,780 --> 00:17:27,850\nOr let's think of this in terms\nof a single domain, right?\n\n337\n00:17:27,850 --> 00:17:29,370\n>> Right.\n>> Let's say that my North American and\n\n338\n00:17:29,370 --> 00:17:31,530\nEuropean users are all in one domain.\n\n339\n00:17:31,530 --> 00:17:34,080\nAnd so now we're talking about\nmillions upon millions of users.\n\n340\n00:17:34,080 --> 00:17:36,610\nThat's a big database,\nbig Active Directory Database.\n\n341\n00:17:36,610 --> 00:17:38,985\nAnd to synchronize that across the ocean.\n\n342\n00:17:38,985 --> 00:17:41,740\n>> [LAUGH]\n>> That's a lot of bandwidth.\n\n343\n00:17:41,740 --> 00:17:42,540\n>> Yes.\n\n344\n00:17:42,540 --> 00:17:44,120\n>> And it creates a lot of latency.\n\n345\n00:17:44,120 --> 00:17:47,620\nYou disable an account, it take a while\nfor the other dc's to find out.\n\n346\n00:17:47,620 --> 00:17:53,030\nSo for performance reasons I might\nchoose to break into two domains,\n\n347\n00:17:53,030 --> 00:17:55,740\na North American domain that has\nall my North American users and\n\n348\n00:17:55,740 --> 00:17:57,805\nall those servers are right\nhere on this continent.\n\n349\n00:17:57,805 --> 00:17:58,350\n>> Mm-hm\n>> And\n\n350\n00:17:58,350 --> 00:18:02,350\nthen a European domain that has all of\nthose users and is on that continent.\n\n351\n00:18:02,350 --> 00:18:05,900\nAnd the only thing that gets\nreplicated between, the Global Catalog.\n\n352\n00:18:05,900 --> 00:18:06,820\n>> Right.\n>> Right?\n\n353\n00:18:06,820 --> 00:18:09,575\nSo we know about all the millions\nof users in the other continent.\n\n354\n00:18:09,575 --> 00:18:11,630\n>> Mm-hm\n>> But we don't have all of there data.\n\n355\n00:18:11,630 --> 00:18:13,240\nWe just have that summary of data.\n\n356\n00:18:13,240 --> 00:18:15,240\n>> Right.\nThat partial attribute set.\n\n357\n00:18:15,240 --> 00:18:18,355\n>> Yeah.\nI always describe it like the phone book.\n\n358\n00:18:18,355 --> 00:18:20,520\n>> Mm-hm\n>> Well, for our younger viewers,\n\n359\n00:18:20,520 --> 00:18:24,740\na phone book is [LAUGH],\na lot of people might not remember.\n\n360\n00:18:24,740 --> 00:18:29,410\nBut that big paper index they drop-off to\nyour door once a year and make you angry.\n\n361\n00:18:29,410 --> 00:18:30,960\nBut you crack it open and\nwhat does it have?\n\n362\n00:18:30,960 --> 00:18:33,540\nIt has a list of everyone in your city.\n\n363\n00:18:33,540 --> 00:18:37,980\nWrite all their names and their phone\nnumber and their street address.\n\n364\n00:18:37,980 --> 00:18:40,920\nNot their city and ZIP code,\nbecause you already know that, right?\n\n365\n00:18:40,920 --> 00:18:41,470\n>> Right.\n\n366\n00:18:41,470 --> 00:18:42,840\n>> But their street address.\n\n367\n00:18:42,840 --> 00:18:44,120\nAnd that's it.\n\n368\n00:18:44,120 --> 00:18:47,200\nNow if you take somebody like me,\nthere's a lot of information about me.\n\n369\n00:18:47,200 --> 00:18:50,840\nHow tall I am, how much I weigh,\nwhat color my eyes are.\n\n370\n00:18:50,840 --> 00:18:53,780\nThat's a lot of metadata about me.\n\n371\n00:18:53,780 --> 00:18:54,950\nBut that's not in the phone book.\n\n372\n00:18:54,950 --> 00:18:56,030\n>> Right.\n>> The phone book has\n\n373\n00:18:56,030 --> 00:18:59,320\njust the information needed\nto get a hold of me.\n\n374\n00:18:59,320 --> 00:19:00,910\nThat's how the Global Catalog is.\n\n375\n00:19:00,910 --> 00:19:02,650\nJust enough information to\nget ahold of that person.\n\n376\n00:19:02,650 --> 00:19:04,560\nSo much much smaller set of data.\n\n377\n00:19:04,560 --> 00:19:05,915\nMuch less to replicate.\n\n378\n00:19:05,915 --> 00:19:09,800\n>> Right\n>> So, in extremely large environments,\n\n379\n00:19:09,800 --> 00:19:12,939\nminimizing replication traffic is\na reason to go to more than one domain.\n\n380\n00:19:14,660 --> 00:19:19,800\nSo, those are a few scenarios, there\nare other scenarios that are out there.\n\n381\n00:19:19,800 --> 00:19:23,460\nMaybe you have like an R&D department,\nfor research and development, and\n\n382\n00:19:23,460 --> 00:19:26,950\nyou just don't want that to be a part\nof your production infrastructure.\n\n383\n00:19:26,950 --> 00:19:29,050\n>> Staging area or something as well.\n\n384\n00:19:29,050 --> 00:19:32,898\n>> Yeah, any kind of separation\nthat you wanna make.\n\n385\n00:19:32,898 --> 00:19:37,422\nI think Mike you mentioned, even more than\none name space, or more than one company.\n\n386\n00:19:37,422 --> 00:19:43,395\nSo, ITProTV, that's our show, that's\nthe site you guys are watching this on.\n\n387\n00:19:43,395 --> 00:19:45,620\n>> Mm-hm\n>> But the actual parent company\n\n388\n00:19:45,620 --> 00:19:47,611\nis a company called Edutainment Live.\n\n389\n00:19:47,611 --> 00:19:48,124\n>> Mm-hm\n>> Right?\n\n390\n00:19:48,124 --> 00:19:49,974\n>> So when we get our paychecks they're\n\n391\n00:19:49,974 --> 00:19:51,394\nassigned by Edutainment Live.\n>> Mm-hm\n\n392\n00:19:51,394 --> 00:19:53,084\n>> So you guys may or\n\n393\n00:19:53,084 --> 00:19:57,081\nmay not know that name.\nBut that, we may wanna split that off as\n\n394\n00:19:57,081 --> 00:20:00,570\na separate entity.\nNow why would we do that?\n\n395\n00:20:00,570 --> 00:20:07,029\nWell, Edutainment Live is a producer\nof entertaining educational content.\n\n396\n00:20:07,029 --> 00:20:10,420\n>> Mm-hm\n>> Not necessarily IT content.\n\n397\n00:20:10,420 --> 00:20:13,290\nSure, on ITProTV, we just do IT.\n\n398\n00:20:13,290 --> 00:20:14,677\nMaybe they wanna start\ndoing cooking shows.\n\n399\n00:20:14,677 --> 00:20:15,780\nRight?\nThey can!\n\n400\n00:20:15,780 --> 00:20:18,150\nI'd just let them do whatever they want.\n\n401\n00:20:18,150 --> 00:20:20,950\nSo if they do that, it doesn't make\nsense to have that as part of our\n\n402\n00:20:20,950 --> 00:20:23,792\ninfrastructure, or these IT guys\nthat do all sort of techy stuff.\n\n403\n00:20:23,792 --> 00:20:25,350\n>> All right\n>> But that cooking show,\n\n404\n00:20:25,350 --> 00:20:28,890\nthey might need email accounts,\nand exchange, and whatever.\n\n405\n00:20:28,890 --> 00:20:33,040\nSo we may branch Edutainment Live\noff into its own entity.\n\n406\n00:20:33,040 --> 00:20:34,090\nAnd since they're the parent company,\n\n407\n00:20:34,090 --> 00:20:36,570\nit would actually make sense to\nhave them as like the forest root.\n\n408\n00:20:36,570 --> 00:20:37,080\nRight?\n>> As the root.\n\n409\n00:20:37,080 --> 00:20:38,580\nYeah, exactly.\nAnd then they can spawn off little\n\n410\n00:20:38,580 --> 00:20:40,070\nsubsidiaries and things like that.\n\n411\n00:20:40,070 --> 00:20:41,735\nAnd we just add more domains for them.\n\n412\n00:20:41,735 --> 00:20:42,720\n>> Mm-hm.\n\n413\n00:20:42,720 --> 00:20:46,750\nAnd they could be additional\ndomains that are,\n\n414\n00:20:46,750 --> 00:20:49,180\nseparate name spaces or underneath this.\n\n415\n00:20:49,180 --> 00:20:49,795\nRight?\nSo we might have\n\n416\n00:20:49,795 --> 00:20:54,080\nCooking.EDUtainmentLive.com or whatever\nthe kind of branch out beneath it.\n\n417\n00:20:54,080 --> 00:20:55,680\nRemember, when you set\nup these hierarchies,\n\n418\n00:20:55,680 --> 00:20:58,220\nwhat you're setting up are trees.\n\n419\n00:20:58,220 --> 00:21:01,760\nAnd Microsoft normally\ndenotes that with a triangle.\n\n420\n00:21:01,760 --> 00:21:04,890\nAnd what you'll do is.\n\n421\n00:21:04,890 --> 00:21:07,240\nLet me see if I can send\nthis back one level.\n\n422\n00:21:07,240 --> 00:21:08,910\nThat's not far enough.\n\n423\n00:21:08,910 --> 00:21:13,455\nLet me fight with my icons.\n\n424\n00:21:13,455 --> 00:21:14,581\n>> [LAUGH]\n>> There we go.\n\n425\n00:21:14,581 --> 00:21:17,600\nSo what you're doing is\nyou're creating a tree.\n\n426\n00:21:19,210 --> 00:21:21,260\nThat contains these domains.\n\n427\n00:21:21,260 --> 00:21:24,230\nAnd you can create as\nmany trees as you want.\n\n428\n00:21:24,230 --> 00:21:29,230\nBut effectively we've got this\ntree of ITProTV and its children.\n\n429\n00:21:29,230 --> 00:21:30,110\nRight?\n>> [COUGH]\n\n430\n00:21:30,110 --> 00:21:31,890\n>> And then you've got this tree for\n\n431\n00:21:31,890 --> 00:21:32,540\nEdutainment Live.\n\n432\n00:21:32,540 --> 00:21:34,365\nNow the Edutainment Live\ntree is much smaller.\n\n433\n00:21:34,365 --> 00:21:35,500\n>> Right.\n>> And it doesn't have any\n\n434\n00:21:35,500 --> 00:21:36,250\nchildren underneath it.\n\n435\n00:21:36,250 --> 00:21:39,360\nBut you got to get the idea of\nhow that's kind of related, and\n\n436\n00:21:39,360 --> 00:21:41,155\nyou can build as many trees as you want.\n\n437\n00:21:41,155 --> 00:21:42,360\n>> Mm-hm\n>> You've always got at least\n\n438\n00:21:42,360 --> 00:21:43,100\none tree, right.\n\n439\n00:21:43,100 --> 00:21:43,780\n>> Right.\n\n440\n00:21:43,780 --> 00:21:48,600\n>> The most common active directory\nmodel is single forest, single tree,\n\n441\n00:21:48,600 --> 00:21:49,255\nsingle domain.\n\n442\n00:21:49,255 --> 00:21:50,270\n>> Mm-hm\n>> Right?\n\n443\n00:21:50,270 --> 00:21:52,835\nThat's just one of each, so\nyou have a forest of one.\n\n444\n00:21:52,835 --> 00:21:53,690\n>> [LAUGH]\n>> And\n\n445\n00:21:53,690 --> 00:21:56,410\nit really does make life\neasier as far as management.\n\n446\n00:21:56,410 --> 00:21:59,565\nYou can still do a lot of complex\nthings in a single domain environment.\n\n447\n00:21:59,565 --> 00:22:00,430\n>> Mm-hm.\n>> So, for\n\n448\n00:22:00,430 --> 00:22:02,570\nmost people that's the model you want.\n\n449\n00:22:02,570 --> 00:22:05,470\nBut, I think we've covered\nthe various scenarios where people\n\n450\n00:22:05,470 --> 00:22:06,995\nmight have more than one domain.\n\n451\n00:22:06,995 --> 00:22:07,960\n>> Mm-hm.\n\n452\n00:22:07,960 --> 00:22:10,170\n>> The only one I left\nout was an acquisition.\n\n453\n00:22:10,170 --> 00:22:11,700\n>> That's right.\n\n454\n00:22:11,700 --> 00:22:14,540\n>> The reason I didn't mention acquisition\nis acquisitions normally take a slightly\n\n455\n00:22:14,540 --> 00:22:17,345\ndifferent form and if you.\n\n456\n00:22:17,345 --> 00:22:19,854\nLet's say EdutainmentLive.com, right?\n\n457\n00:22:19,854 --> 00:22:21,760\n>> Mm-hm\n>> That's our parent company.\n\n458\n00:22:21,760 --> 00:22:25,115\nAnd they go out and they find another\ncompany that's out there they really like.\n\n459\n00:22:25,115 --> 00:22:25,615\n>> Mm-hm\n>> Right?\n\n460\n00:22:25,615 --> 00:22:27,670\nAnd we decide to acquire them.\n\n461\n00:22:27,670 --> 00:22:29,160\nWe purchase the company.\n\n462\n00:22:29,160 --> 00:22:32,708\nWell, that other company may\nalready have their own domain.\n\n463\n00:22:32,708 --> 00:22:33,960\n>> Mm-hm\n>> All right?\n\n464\n00:22:33,960 --> 00:22:37,680\nIf they already have their own domain, we\nmight wanna bring them under our umbrella,\n\n465\n00:22:37,680 --> 00:22:39,110\nbut there's no way to.\n\n466\n00:22:40,130 --> 00:22:42,250\nTake an external domain and\n\n467\n00:22:42,250 --> 00:22:45,344\nbring it into your forest,\nthat other domain it's in its own forest.\n\n468\n00:22:45,344 --> 00:22:46,030\n>> Mm-hm\n>> And\n\n469\n00:22:46,030 --> 00:22:51,400\nforests create the absolute\nboundary between environments.\n\n470\n00:22:51,400 --> 00:22:56,720\nSo when you acquire a company, you'll more\nthan likely end up with multiple forests,\n\n471\n00:22:56,720 --> 00:22:58,100\nbut even if you don't acquire a company,\n\n472\n00:22:58,100 --> 00:23:00,180\nyou might choose to do multiple\nforests anyways, right.\n\n473\n00:23:00,180 --> 00:23:00,870\n>> Absolutely.\n\n474\n00:23:00,870 --> 00:23:04,660\n>> Why would we want to do more then one\nforest, if we were a single company?\n\n475\n00:23:04,660 --> 00:23:06,070\n>> It really comes back\nto what you just said.\n\n476\n00:23:06,070 --> 00:23:08,710\nIt's that administrative boundary,\ncuz within a forest,\n\n477\n00:23:08,710 --> 00:23:10,710\nI mean our domains are administrative\nboundaries in a way, right?\n\n478\n00:23:10,710 --> 00:23:14,690\nOur domain admins have full control of\neverything, inside that domain, but\n\n479\n00:23:14,690 --> 00:23:17,230\nnothing outside of the domain,\nwithout being given that permission.\n\n480\n00:23:18,330 --> 00:23:21,410\nBut there's still the enterprise admins,\nright, up there in that forest root, and\n\n481\n00:23:21,410 --> 00:23:23,360\nthey have control over the entire forest.\n\n482\n00:23:23,360 --> 00:23:27,710\nAnd so, if I really need true\nadministrative separation,\n\n483\n00:23:27,710 --> 00:23:30,520\nthat's when we start moving into\nthat multiple forest model.\n\n484\n00:23:30,520 --> 00:23:34,736\nAnd you might have a scenario where you\njust can't,maybe there's a conflict of\n\n485\n00:23:34,736 --> 00:23:37,278\ninterest, and\nyou cannot have the potential for\n\n486\n00:23:37,278 --> 00:23:41,380\nsomebody to make changes in both of\nthose organizations or in their domains.\n\n487\n00:23:41,380 --> 00:23:44,830\nThere's also sometimes some legal\nrequirements where you've got.\n\n488\n00:23:44,830 --> 00:23:49,630\nPart of your company is in another\ncontinent, and that country or\n\n489\n00:23:49,630 --> 00:23:53,110\nthat organization cannot have\nsomebody that resides in the U.S.\n\n490\n00:23:53,110 --> 00:23:57,130\nbeing in an administrator over a domain\nover there, that's over in Europe.\n\n491\n00:23:57,130 --> 00:23:59,530\nSo, that's usually the biggest reason,\nI think,\n\n492\n00:23:59,530 --> 00:24:01,780\nis that true separation of administration.\n\n493\n00:24:03,910 --> 00:24:06,094\n>> Yeah, and it's a burden\n>> Mm-hm\n\n494\n00:24:06,094 --> 00:24:07,558\n>> To have to do more than one forest\n\n495\n00:24:07,558 --> 00:24:10,930\nbecause there's absolutely no\nauthentication between those forests.\n\n496\n00:24:10,930 --> 00:24:13,169\n>> Right.\n>> They are completely separate entities.\n\n497\n00:24:13,169 --> 00:24:16,769\nBut it doesn't mean that you\ncan't get them to work together.\n\n498\n00:24:16,769 --> 00:24:18,773\n>> Mm-hm.\n>> So when we acquire a company, or\n\n499\n00:24:18,773 --> 00:24:20,638\nwhen we build more than one forest,\n\n500\n00:24:20,638 --> 00:24:24,693\nthe first thing we need to think about\nis how we're going to set up our trusts.\n\n501\n00:24:24,693 --> 00:24:25,640\n>> Right.\n>> Right.\n\n502\n00:24:25,640 --> 00:24:26,560\n>> So, trusts.\n\n503\n00:24:26,560 --> 00:24:28,735\nWhile you were talking I was able\nto sort out my visio-diagram woes.\n\n504\n00:24:28,735 --> 00:24:29,726\n>> [NOISE] Nice.\nLook at that!\n\n505\n00:24:29,726 --> 00:24:30,550\n>> Look at this, it's all colorful.\n\n506\n00:24:30,550 --> 00:24:32,460\nI guess this isn't quite as\nbig as I want it but, there.\n\n507\n00:24:32,460 --> 00:24:33,530\nAll right!\n\n508\n00:24:33,530 --> 00:24:37,260\nSo when we start building out our forests,\n\n509\n00:24:37,260 --> 00:24:42,215\nthere are trusts that are put in\nplace automatically for us, right?\n\n510\n00:24:42,215 --> 00:24:43,220\n>> Mm-hm.\n\n511\n00:24:43,220 --> 00:24:46,730\n>> Every domain in a forest\nautomatically has a two\n\n512\n00:24:46,730 --> 00:24:50,380\nway transitive of trust with every domain,\nI know we've covered this in other shows.\n\n513\n00:24:50,380 --> 00:24:54,130\nSo when we're dealing with one forest, we\nreally don't even think about the trust.\n\n514\n00:24:54,130 --> 00:24:55,770\n>> No.\n>> Just because they're already\n\n515\n00:24:55,770 --> 00:24:56,510\nthere, right?\n\n516\n00:24:56,510 --> 00:25:00,980\n>> So It just worked its magic.\n\n517\n00:25:00,980 --> 00:25:02,645\n>> Now we sound like an Apple commercial.\n\n518\n00:25:02,645 --> 00:25:06,830\n[LAUGH]\nSo basically these trusts,\n\n519\n00:25:06,830 --> 00:25:09,620\nthe way they work,\nthe default way that they work.\n\n520\n00:25:09,620 --> 00:25:12,320\nWell, when they don't have giant\narrows stuck on them like that.\n\n521\n00:25:12,320 --> 00:25:13,910\n>> That's a one way.\n\n522\n00:25:13,910 --> 00:25:15,615\n>> There's probably someway for\nme to fix that.\n\n523\n00:25:15,615 --> 00:25:17,480\n>> As he's getting that\nall straightened out.\n\n524\n00:25:17,480 --> 00:25:18,932\nWhen you set up your first\ndomain that's all you've got.\n\n525\n00:25:18,932 --> 00:25:23,123\nAnd then as you add child domains,\nthere's that automatic two way transit of\n\n526\n00:25:23,123 --> 00:25:26,101\ntrust that gets created\nbetween that parent-child.\n\n527\n00:25:26,101 --> 00:25:30,480\nWhen you start adding new trees into your\nforest, there's an automatic two-way\n\n528\n00:25:30,480 --> 00:25:33,531\ntransitive trust between all trees and\nthe forest root.\n\n529\n00:25:33,531 --> 00:25:36,492\nAnd as you say,\nwe've talked about other shows,\n\n530\n00:25:36,492 --> 00:25:40,803\nwhere transitivity means if A trusts B,\nand B trusts C, then A trusts C.\n\n531\n00:25:40,803 --> 00:25:45,490\nSo because of that automatic two-way\ntransitive trust created between\n\n532\n00:25:45,490 --> 00:25:49,270\nevery child domain and\nevery tree back to the forest root.\n\n533\n00:25:49,270 --> 00:25:54,090\nThat means, in the end,\nall domains trust all other domains.\n\n534\n00:25:54,090 --> 00:25:56,450\nIt's done automatically\nas you set them up.\n\n535\n00:25:56,450 --> 00:25:59,446\nYou can do it in if you needed to or\nmake changes to them but\n\n536\n00:25:59,446 --> 00:26:00,730\nit makes life very simple.\n\n537\n00:26:00,730 --> 00:26:03,222\nIt makes it very easy for\nme to give access.\n\n538\n00:26:03,222 --> 00:26:07,896\nI've got a user down in that child domain\nand I wanna give them access to a resource\n\n539\n00:26:07,896 --> 00:26:11,843\nin a parent domain, or even a resource\nin another tree in my forest.\n\n540\n00:26:11,843 --> 00:26:14,740\nIt's easy because\nthe trust is already there.\n\n541\n00:26:14,740 --> 00:26:17,360\nAnd really what the trust\nis doing is it's saying,\n\n542\n00:26:17,360 --> 00:26:20,080\nI trust your authentication process,\nalright?\n\n543\n00:26:20,080 --> 00:26:22,385\nWithin my domain,\nI've got my domain controllers.\n\n544\n00:26:22,385 --> 00:26:25,120\nThey're authenticating my users and\nmy computers, and\n\n545\n00:26:25,120 --> 00:26:26,830\nthey're issuing tokens, right?\n\n546\n00:26:26,830 --> 00:26:29,290\nMy access tokens or my security tokens.\n\n547\n00:26:29,290 --> 00:26:31,200\nAnd everything within that domain,\n\n548\n00:26:31,200 --> 00:26:34,870\ntrusts that token because they\ntrust the domain controller.\n\n549\n00:26:34,870 --> 00:26:37,470\nWell that other domain has it's own\ndomain controllers that's doing\n\n550\n00:26:37,470 --> 00:26:39,430\nthe authentication for those users.\n\n551\n00:26:39,430 --> 00:26:42,020\nSo when that user tries to come\ninto a different domain and\n\n552\n00:26:42,020 --> 00:26:45,040\naccess a resource it\npresents this access token.\n\n553\n00:26:45,040 --> 00:26:47,640\nThat domain controller didn't\nissue that access token.\n\n554\n00:26:47,640 --> 00:26:49,480\nBut because of that trust we're saying,\nokay.\n\n555\n00:26:49,480 --> 00:26:52,960\nI trust the fact that the domain\ncontroller in your domain,\n\n556\n00:26:52,960 --> 00:26:56,570\nverified your password,\nwent through the authentication process.\n\n557\n00:26:56,570 --> 00:27:00,920\nAnd I'll just accept the fact, or trust\nthe fact that you've been authenticated.\n\n558\n00:27:00,920 --> 00:27:03,160\n>> Yeah, and\nthat's all done automatically.\n\n559\n00:27:03,160 --> 00:27:06,010\n>> Mm hm.\n>> Right, so, as we build up a forest, and\n\n560\n00:27:06,010 --> 00:27:09,290\nas we continue to add more domains\nto the forest, those trusts\n\n561\n00:27:09,290 --> 00:27:12,419\nare automatically being built up, and so\n>> For example,\n\n562\n00:27:12,419 --> 00:27:16,856\nif I throw in another domain here\ninto my growing company, right.\n\n563\n00:27:16,856 --> 00:27:20,170\nSo, companies do this,\nthey don't stay stagnate.\n\n564\n00:27:20,170 --> 00:27:21,466\nWell, hopefully they don't stay stagnate.\n\n565\n00:27:21,466 --> 00:27:22,090\n>> [LAUGH].\n\n566\n00:27:22,090 --> 00:27:26,560\n>> So, as the company grows you'll start\nadding new domains and so maybe we buy,\n\n567\n00:27:26,560 --> 00:27:29,965\nmaybe we go out and we buy pets.com,right?\n\n568\n00:27:29,965 --> 00:27:35,000\nIt's not in use, I don't think,\nand so we buy pets.com.\n\n569\n00:27:35,000 --> 00:27:37,910\nWell, when you buy that domain or\nthat company and\n\n570\n00:27:37,910 --> 00:27:39,830\nyou go to integrate\nthem into your network.\n\n571\n00:27:39,830 --> 00:27:44,660\nWell you're tying them into your network\nand the trusts are automatically\n\n572\n00:27:44,660 --> 00:27:48,470\nestablished the moment that you\nbring them into your forest.\n\n573\n00:27:48,470 --> 00:27:55,145\nWhen you build that domain, and all this\nstuff starts to kinda fall into place.\n\n574\n00:27:55,145 --> 00:27:57,016\n>> Mm-hm.\n>> So we get that and\n\n575\n00:27:57,016 --> 00:28:01,594\nif edutainmentlive.com trusts pets.com,\nand\n\n576\n00:28:01,594 --> 00:28:08,750\npets.com trusts a subdomain right some\nkind of child domain that it's got.\n\n577\n00:28:08,750 --> 00:28:12,947\nSo if it's got a domain\nthat is maybe like R&D,\n\n578\n00:28:12,947 --> 00:28:17,370\nr&d.pets.com, right?\n\n579\n00:28:17,370 --> 00:28:20,124\nSo, it's gonna trust it because that's\na parent, child relationship, right?\n\n580\n00:28:20,124 --> 00:28:22,254\nRight, parent, child, today,\nthey always do the two way trust.\n\n581\n00:28:22,254 --> 00:28:25,341\nSo, edutainmentlive.com trusts pets.com.\n\n582\n00:28:25,341 --> 00:28:27,888\npets.com trusts the r&d.pets.com.\n\n583\n00:28:27,888 --> 00:28:29,414\nSo edutainmentlive.com trusts r&d.\n\n584\n00:28:29,414 --> 00:28:30,820\nI just name it live trusts r n d.\n\n585\n00:28:30,820 --> 00:28:32,478\nAnd NA, way over here trusts r&d, right.\n\n586\n00:28:32,478 --> 00:28:36,372\nSo that trust relationship is there,\nand it's automatic.\n\n587\n00:28:36,372 --> 00:28:37,400\n>> Yep.\n\n588\n00:28:37,400 --> 00:28:41,540\nWe really don't worry about trust inside\na forest, cuz these are built up and\n\n589\n00:28:41,540 --> 00:28:43,142\nautomatically put in place.\n\n590\n00:28:43,142 --> 00:28:45,330\nThe exception would be short cut trusts.\n\n591\n00:28:45,330 --> 00:28:46,540\n>> Yeah cuz sometimes the,\n\n592\n00:28:46,540 --> 00:28:49,640\nwhat John's drawing there is\nwhat's known as a trust path.\n\n593\n00:28:49,640 --> 00:28:54,010\nAnd what's gonna happen is if\na user over there in na.ITPro.TV\n\n594\n00:28:54,010 --> 00:28:58,650\nwants to access a resource in\nr&d.pets.com we can do that.\n\n595\n00:28:58,650 --> 00:29:00,560\nBut it's gonna have to\ngo through a process.\n\n596\n00:29:00,560 --> 00:29:01,630\nHe's got his authentication,\n\n597\n00:29:01,630 --> 00:29:05,440\nthe user's got the authentication token\nfrom the domain controllers in na.\n\n598\n00:29:05,440 --> 00:29:08,398\nAnd when he goes to access the resource,\nthat domain controller in,\n\n599\n00:29:08,398 --> 00:29:13,025\nna, is gonna say well that's not in\nmy domain, but I do have a trust,\n\n600\n00:29:13,025 --> 00:29:16,950\nitpro.tv, and\nI can forward you up to there.\n\n601\n00:29:16,950 --> 00:29:18,850\nOr, you know, it can give me a referral.\n\n602\n00:29:18,850 --> 00:29:21,698\nAnd so I'm gonna get referred\nup to itpro.tv, which is then,\n\n603\n00:29:21,698 --> 00:29:25,680\nthere's gonna be a follow up by\na referral over to edutainmentlive.com.\n\n604\n00:29:25,680 --> 00:29:31,270\nAnother referral back over to pets.com,\na final referral over to R&D.Pets.com.\n\n605\n00:29:31,270 --> 00:29:34,950\nNow I'm talking to the domain\ncontroller that hosts the resource and\n\n606\n00:29:34,950 --> 00:29:37,330\nI can be given access or denied access.\n\n607\n00:29:37,330 --> 00:29:40,200\nBut what if there's some latency\nthere between talking to all of\n\n608\n00:29:40,200 --> 00:29:41,560\nthose different domain controllers.\n\n609\n00:29:41,560 --> 00:29:43,340\nIf there was any connectivity issues or\n\n610\n00:29:43,340 --> 00:29:46,456\ndomain controllers were unavailable\nin say edutainment live.\n\n611\n00:29:46,456 --> 00:29:50,200\nI wouldn't be able to follow that\ntrust path and get access to resource.\n\n612\n00:29:50,200 --> 00:29:53,250\nSo we can create shortcut trusts that\nwill shortcut that entire process.\n\n613\n00:29:53,250 --> 00:29:56,290\nThese are not created automatically.\n\n614\n00:29:56,290 --> 00:29:59,070\nWe're gonna have to manually create them.\n\n615\n00:29:59,070 --> 00:30:02,840\nYou can make them one way or\ntwo way and they are transitive.\n\n616\n00:30:02,840 --> 00:30:06,080\nSo some of the keys that we really wanna\nthink about when we're referring to these\n\n617\n00:30:06,080 --> 00:30:10,240\ndifferent trusts is the direction of the\ntrust and whether or not it's transitive.\n\n618\n00:30:10,240 --> 00:30:14,020\nSo that short cut trust, now I can go\nright across there and talk directly to\n\n619\n00:30:14,020 --> 00:30:19,670\nthose domain controllers without having\nto follow that entire trust path.\n\n620\n00:30:19,670 --> 00:30:23,040\nLike I said, when you set those up,\nthey're gonna be a one way trust, but\n\n621\n00:30:23,040 --> 00:30:26,270\nI can set up a short cut\ntrust in both directions.\n\n622\n00:30:27,360 --> 00:30:34,650\nThey are transitive so if another If\nthere was a child domain of Na.ITPro.tv.\n\n623\n00:30:34,650 --> 00:30:35,260\nAll right?\n\n624\n00:30:35,260 --> 00:30:39,500\nBut the shortcut was between Na and\nRND.pets.com.\n\n625\n00:30:39,500 --> 00:30:42,260\nFrom that child domain of Na,\nI could move up one and\n\n626\n00:30:42,260 --> 00:30:44,130\nthen across that shortcut trust.\n\n627\n00:30:44,130 --> 00:30:49,480\n>> If we, and this is the design part,\nthis is what we have to think about.\n\n628\n00:30:49,480 --> 00:30:51,447\nYou have to look at your network and\nsay all right,\n\n629\n00:30:51,447 --> 00:30:57,140\nIs there a frequent access between two\ndomains that are not in the same tree?\n\n630\n00:30:58,490 --> 00:31:02,250\nIf there is ever frequent access between\ntwo domains not in the same tree,\n\n631\n00:31:02,250 --> 00:31:03,886\nit makes sense to have a shortcut trust.\n\n632\n00:31:03,886 --> 00:31:05,990\n>> Right.\n>> If it's infrequent access,\n\n633\n00:31:05,990 --> 00:31:11,750\nif users every now and\nthen access resource in that other tree,\n\n634\n00:31:11,750 --> 00:31:14,470\nthen it's probably not worth\nit to make a shortcut trust.\n\n635\n00:31:14,470 --> 00:31:19,630\nBut if every single day you know that\n\n636\n00:31:19,630 --> 00:31:24,740\nusers over here in North America\nare going to be accessing r&d.pets.com.\n\n637\n00:31:24,740 --> 00:31:27,690\nThen it makes sense to take\nthis shortcut trust and\n\n638\n00:31:27,690 --> 00:31:30,690\nI'll actually move it up here cuz,\nlike you said, if we map it to the parent,\n\n639\n00:31:30,690 --> 00:31:34,920\nthe children can use that parent to\njust jump right over to r&d, right.\n\n640\n00:31:34,920 --> 00:31:37,020\nBut if I know it's just North America,\n\n641\n00:31:37,020 --> 00:31:40,920\njust North America's gonna be doing it,\nI can put that shortcut trust here.\n\n642\n00:31:40,920 --> 00:31:45,160\nAnd when a user in North America\ngoes to access a resource in r&d,\n\n643\n00:31:45,160 --> 00:31:49,630\nthey'll hit their domain controller and\njump right over to r&d.\n\n644\n00:31:49,630 --> 00:31:51,530\nOr really it's going to\nbe the other way around.\n\n645\n00:31:51,530 --> 00:31:54,899\nWhen a North American user\naccesses a resource in r&d,\n\n646\n00:31:54,899 --> 00:31:57,200\nan r&d server goes to validate them.\n\n647\n00:31:57,200 --> 00:31:59,058\nIt validates against their DC and\n\n648\n00:31:59,058 --> 00:32:03,516\nthen it takes the shortcut right over to\nNA to find out the scheming on that user.\n\n649\n00:32:03,516 --> 00:32:05,698\nWhether they're allowed in and so on.\n\n650\n00:32:05,698 --> 00:32:07,718\nThis cuts out.\n\n651\n00:32:07,718 --> 00:32:10,829\nThree domain controllers in this design\nright, but it can cut out more or\n\n652\n00:32:10,829 --> 00:32:13,400\nless depending on how your\nnetwork is structured.\n\n653\n00:32:13,400 --> 00:32:16,595\nBut it really shrinks things down, you get\nthat communication happening a lot faster.\n\n654\n00:32:16,595 --> 00:32:17,210\n>> Mm-hm.\n\n655\n00:32:17,210 --> 00:32:19,770\n>> This is really the only\nconsideration when it comes to trusts\n\n656\n00:32:19,770 --> 00:32:20,920\ninside of a forest.\n\n657\n00:32:20,920 --> 00:32:21,530\n>> Right.\n>> And\n\n658\n00:32:21,530 --> 00:32:24,200\nit only is a consideration\nif you have frequent\n\n659\n00:32:24,200 --> 00:32:26,585\naccess between domains you\ncan speed up authentication.\n\n660\n00:32:26,585 --> 00:32:27,440\n>> Mm-hm.\n\n661\n00:32:27,440 --> 00:32:28,590\n>> All right.\n\n662\n00:32:28,590 --> 00:32:31,480\nTrusts outside of the forest, though.\n\n663\n00:32:31,480 --> 00:32:33,140\n>> Right.\n>> That's a different story.\n\n664\n00:32:33,140 --> 00:32:35,510\nBut, looking at the clock,\nI think we're out of time on this segment.\n\n665\n00:32:35,510 --> 00:32:39,080\nSo, let's stop and\ntake a break and when we get back,\n\n666\n00:32:39,080 --> 00:32:41,790\nwe'll talk about trusts\noutside of our forests,\n\n667\n00:32:41,790 --> 00:32:44,550\nas we kind of reach out to other\nenvironments that are out there.\n\n668\n00:32:44,550 --> 00:32:45,600\nSo, stay tuned.\n\n669\n00:32:45,600 --> 00:32:46,948\nWe'll be back after this.\n\n670\n00:32:46,948 --> 00:32:54,689\n[MUSIC].\n\n671\n00:32:54,689 --> 00:32:56,395\nAll right, welcome back everybody.\n\n672\n00:32:56,395 --> 00:33:01,109\nSo before the break, we were talking\nabout domain trusts within a forest.\n\n673\n00:33:01,109 --> 00:33:01,778\n>> Mm-hm.\n\n674\n00:33:01,778 --> 00:33:02,700\n>> Right?\n>> Right.\n\n675\n00:33:02,700 --> 00:33:04,605\nNow let's think outside of the box, right.\n\n676\n00:33:04,605 --> 00:33:06,330\n>> [LAUGH] Outside of the box, literally.\n\n677\n00:33:06,330 --> 00:33:08,190\n>> Let's get outside of our forest.\n\n678\n00:33:08,190 --> 00:33:08,890\nRight?\n\n679\n00:33:08,890 --> 00:33:11,150\nIf we're working with another company,\n\n680\n00:33:11,150 --> 00:33:14,600\nand this might be a temporary relationship\nwe have with the contracting company,\n\n681\n00:33:14,600 --> 00:33:17,850\nit might be a long-term relationship\nwith a business partner,\n\n682\n00:33:17,850 --> 00:33:20,680\nor it might be an acquisition where\nwe've acquired another company and\n\n683\n00:33:20,680 --> 00:33:22,940\nthey just have their forest already.\n\n684\n00:33:22,940 --> 00:33:24,230\nThey're all really handled the same way.\n\n685\n00:33:24,230 --> 00:33:26,720\nThe difference is just how long\nwe leave the trust in place.\n\n686\n00:33:26,720 --> 00:33:30,630\nBut, you'll probably want to establish\na trust between you and the other forest.\n\n687\n00:33:30,630 --> 00:33:33,890\n>> Yeah, because unlike within our forest\nwhere they have that automatic trust\n\n688\n00:33:33,890 --> 00:33:37,660\nthat gets created, there's no automatic\ntrust created between forests.\n\n689\n00:33:37,660 --> 00:33:40,830\nEverything has to be done manually\nbecause that forest really is\n\n690\n00:33:40,830 --> 00:33:42,060\na true security boundary.\n\n691\n00:33:42,060 --> 00:33:46,030\nThere's no, anybody outside the forest\ndoes not have access to anything\n\n692\n00:33:46,030 --> 00:33:49,500\ninside the forest,\nunless we choose to do so.\n\n693\n00:33:49,500 --> 00:33:52,621\n>> So let's say, that at ITProTV,\n\n694\n00:33:52,621 --> 00:33:58,115\nwe entered into some kind of\npartnership with Microsoft.\n\n695\n00:33:58,115 --> 00:33:58,710\n>> Mm-hm.\n\n696\n00:33:58,710 --> 00:34:01,430\n>> And so we wanna start using\n\n697\n00:34:01,430 --> 00:34:04,630\nour user accounts when we access\nresources at Microsoft, or vice versa.\n\n698\n00:34:04,630 --> 00:34:07,340\nWe want them to be able to use their user\naccounts when they're accessing resources\n\n699\n00:34:07,340 --> 00:34:07,860\nat ITProTV.\n\n700\n00:34:08,980 --> 00:34:10,850\nSo they have their own forest.\n\n701\n00:34:10,850 --> 00:34:13,350\nI imagine they have one of\nthe largest forests in the world, but\n\n702\n00:34:13,350 --> 00:34:14,450\nthey've got their own forest.\n\n703\n00:34:14,450 --> 00:34:17,890\nAnd so, I just kind of sketched\nup something a little quick,\n\n704\n00:34:17,890 --> 00:34:20,130\nI have no idea what their actual\nforest structure is like.\n\n705\n00:34:20,130 --> 00:34:22,940\nSo we've got microsoft.com,\nand technet.microsoft.com, and\n\n706\n00:34:22,940 --> 00:34:26,610\nwe've got live.com, you know,\ntheir different stuff over there.\n\n707\n00:34:26,610 --> 00:34:28,980\nWe wanna be able to share accounts,\nto be able to access resources.\n\n708\n00:34:28,980 --> 00:34:31,150\nSo how do we go about that?\n\n709\n00:34:31,150 --> 00:34:33,630\nWell, we've gotta figure\nout a few different things.\n\n710\n00:34:33,630 --> 00:34:36,450\nThe first thing is there's\nmore than one type of trust,\n\n711\n00:34:36,450 --> 00:34:38,940\nwhen we trust somebody\noutside the organization.\n\n712\n00:34:38,940 --> 00:34:42,080\nEven at a bare functional level,\nthere's a big difference.\n\n713\n00:34:42,080 --> 00:34:44,880\nFor example,\nall of these trusts we've talked about so\n\n714\n00:34:44,880 --> 00:34:46,550\nfar, well I guess not all of them.\n\n715\n00:34:46,550 --> 00:34:51,290\nBut all these default trusts in\nhere are two way transitive trusts.\n\n716\n00:34:51,290 --> 00:34:54,910\nWith the exception of shortcut\ntrusts which are one way.\n\n717\n00:34:54,910 --> 00:34:57,500\nYou can cram both ways if you want.\n\n718\n00:34:57,500 --> 00:34:59,220\nBut these are two way transitive up here.\n\n719\n00:35:00,390 --> 00:35:04,830\nWhen we do a trust to an external entity,\nit's one way.\n\n720\n00:35:04,830 --> 00:35:07,260\nNot only that, it's non-transitive.\n\n721\n00:35:07,260 --> 00:35:10,300\nSo one way non-transitive\ntrust by default.\n\n722\n00:35:10,300 --> 00:35:12,980\nNow, there are some variations we\ncould do there to change that.\n\n723\n00:35:12,980 --> 00:35:14,220\n>> There are a couple that are transitive.\n\n724\n00:35:14,220 --> 00:35:16,850\nBut when we talk about\ntransitivity between forest,\n\n725\n00:35:16,850 --> 00:35:21,710\nwe want to keep in mind if we set up\na trust between two forest, it's gonna be\n\n726\n00:35:21,710 --> 00:35:26,190\ntransitive to all the domains that\nexist within those two forests.\n\n727\n00:35:26,190 --> 00:35:29,640\nBut Microsoft might have a trust\nwith another forest, right?\n\n728\n00:35:29,640 --> 00:35:32,990\nSome other company, they've got\nother partners that they work with,\n\n729\n00:35:32,990 --> 00:35:36,190\nthe transitivity does not\nextend to that other forest, so\n\n730\n00:35:36,190 --> 00:35:41,050\nthe trust that we set up between\nMicrosoft and us is not going to be.\n\n731\n00:35:41,050 --> 00:35:44,280\nMy user accounts couldn't go through\nthat trust, through Microsoft.\n\n732\n00:35:44,280 --> 00:35:46,560\nAnd then on to another business partner,\nMicrosoft.\n\n733\n00:35:46,560 --> 00:35:51,390\n>> Right, so one of the earliest\ndecisions we need to make is\n\n734\n00:35:51,390 --> 00:35:55,880\nare we going to trust their entire forest?\n\n735\n00:35:55,880 --> 00:35:58,750\nOr do we just want to trust\ncertain domains in their forest?\n\n736\n00:35:58,750 --> 00:36:03,360\nAll right and if this is an acquisition\nif we're acquiring them, or\n\n737\n00:36:03,360 --> 00:36:06,960\nthey're acquiring us,\nif we acquire Microsoft, yeah?\n\n738\n00:36:06,960 --> 00:36:08,435\n>> It is in the works.\n\n739\n00:36:08,435 --> 00:36:11,120\n>> [LAUGH]\n>> Don't let the SEC know.\n\n740\n00:36:11,120 --> 00:36:17,141\nBut if one of us were acquiring the other,\nthen this is going to be whole hog.\n\n741\n00:36:17,141 --> 00:36:19,270\nYou're going to trust the full forest.\n\n742\n00:36:19,270 --> 00:36:22,300\nSo you'll do a forest level trust.\n\n743\n00:36:22,300 --> 00:36:25,960\nAnd a forest level trust is\ntransitive within the forest.\n\n744\n00:36:25,960 --> 00:36:28,132\nSo that means Live.com, Microsoft.com,\n\n745\n00:36:28,132 --> 00:36:32,300\ntechnet.Microsoft.com, all of those\ndomains will trust all of my domains.\n\n746\n00:36:32,300 --> 00:36:34,720\nAnd if we go two ways,\nit's vice versa too.\n\n747\n00:36:34,720 --> 00:36:37,600\nRight?\nSo a forest level trust is what we use\n\n748\n00:36:37,600 --> 00:36:40,620\ntypically when we're representing\nsome kind of permanent\n\n749\n00:36:40,620 --> 00:36:42,280\nconnection between the companies.\n\n750\n00:36:42,280 --> 00:36:45,700\nNow it doesn't have to be permanent, you\ncan delete that trust whenever you want.\n\n751\n00:36:45,700 --> 00:36:48,550\nBut it's usually representative\nof an acquisition.\n\n752\n00:36:50,150 --> 00:36:53,410\nIf this is just a partnership,\nthough, right?\n\n753\n00:36:53,410 --> 00:36:57,070\nThen it's not normally the whole\norganization that we want to connect up\n\n754\n00:36:57,070 --> 00:36:58,260\nwith, right?\n\n755\n00:36:58,260 --> 00:37:00,420\nIt's normally particular elements.\n\n756\n00:37:00,420 --> 00:37:05,050\nSo for example,\nmaybe the North American ITProTV office\n\n757\n00:37:05,050 --> 00:37:09,560\nis working on virtual labs with\nMicrosoft TechNet, all right?\n\n758\n00:37:09,560 --> 00:37:12,730\nSo not all of Microsoft,\nnot even Live.com, and\n\n759\n00:37:12,730 --> 00:37:16,120\nall the other pieces they have but\njust TechNet.\n\n760\n00:37:16,120 --> 00:37:22,030\nSo we might build a trust\nbetween just those two domains.\n\n761\n00:37:22,030 --> 00:37:22,750\nAll right.\n\n762\n00:37:22,750 --> 00:37:26,930\nAnd if we do that, it's non-transitive.\n\n763\n00:37:26,930 --> 00:37:31,100\nSo North America would trust TechNet,\nor vice versa, or both ways.\n\n764\n00:37:31,100 --> 00:37:34,490\nWe could create two trusts and then it\nwould be both directions at that point.\n\n765\n00:37:34,490 --> 00:37:38,430\nBut North America trust TechNet,\nTechNet trust Microsoft,\n\n766\n00:37:38,430 --> 00:37:42,390\nNorth America would not trust Microsoft,\nall right.\n\n767\n00:37:42,390 --> 00:37:46,290\nIt's not a transitive\ntrust in that aspect.\n\n768\n00:37:46,290 --> 00:37:52,890\nSo if I wanted North America and\nEurope to trust Technet, but not ITProTV.\n\n769\n00:37:52,890 --> 00:37:56,140\nI would have to build two sets of trusts,\none from this domain and\n\n770\n00:37:56,140 --> 00:37:58,030\none from this domain.\n\n771\n00:37:58,030 --> 00:38:02,310\nSo keep that in mind with\ntrusts that go between forests.\n\n772\n00:38:02,310 --> 00:38:05,790\nIf it's a forest level trust,\nyou'll trust the whole forest and\n\n773\n00:38:05,790 --> 00:38:07,540\nit's transitive throughout it.\n\n774\n00:38:07,540 --> 00:38:12,180\nBut if it's a domain trust, it's just\na relationship between those two domains.\n\n775\n00:38:12,180 --> 00:38:13,040\n>> What do they call those?\n\n776\n00:38:13,040 --> 00:38:16,280\nThe external trusts\n>> Yes, external trusts.\n\n777\n00:38:16,280 --> 00:38:18,400\nThe official term, sorry.\n\n778\n00:38:18,400 --> 00:38:20,030\nSo, when we create an external trust,\n\n779\n00:38:20,030 --> 00:38:22,280\nwe need to decide which\ndirection it's going to be.\n\n780\n00:38:22,280 --> 00:38:24,490\nIs it us trusting their user accounts?\n\n781\n00:38:24,490 --> 00:38:27,110\nOr is it them trusting our user accounts,\nright?\n\n782\n00:38:27,110 --> 00:38:29,470\nSo we need to figure out the direction and\nit might be bi-directional.\n\n783\n00:38:29,470 --> 00:38:33,460\nAnd so you create the two trusts and\nthe wizard just offers to create both for\n\n784\n00:38:33,460 --> 00:38:34,940\nyou at the same time.\n\n785\n00:38:34,940 --> 00:38:37,370\nBut you can create that trust,\nand then it's in place, and\n\n786\n00:38:37,370 --> 00:38:38,780\nyou can tear it down whenever you need.\n\n787\n00:38:40,000 --> 00:38:43,790\nSo, forest trusts, external trusts, and\n\n788\n00:38:43,790 --> 00:38:46,870\nthere's one more,\nwhich is called a realm trust.\n\n789\n00:38:46,870 --> 00:38:49,210\nAll right,\nnow what the heck is a realm trust?\n\n790\n00:38:49,210 --> 00:38:51,380\n>> You know I don't know.\n\n791\n00:38:51,380 --> 00:38:53,200\n>> That would be funny.\n\n792\n00:38:53,200 --> 00:38:57,360\nNow, you know, all of this technology,\nActive Directory,\n\n793\n00:38:57,360 --> 00:39:03,020\nits authentication scheme, it's all\nbuilt on top of Kerberos Version 5.\n\n794\n00:39:03,020 --> 00:39:07,340\nMaybe we've got this long standing debate\nover how you're supposed to say Kerberos,\n\n795\n00:39:07,340 --> 00:39:09,050\nKerberos, whatever it is.\n\n796\n00:39:09,050 --> 00:39:11,309\nThere's debate over how\nto pronounce it but\n\n797\n00:39:11,309 --> 00:39:14,800\nit's all built on top of\nKerberos Version 5, all right?\n\n798\n00:39:14,800 --> 00:39:17,660\nThat is a standard authentication model.\n\n799\n00:39:17,660 --> 00:39:21,910\nIt was developed under Unix, and so many,\nmany different operating systems and\n\n800\n00:39:21,910 --> 00:39:23,310\nproducts support it.\n\n801\n00:39:23,310 --> 00:39:26,890\nNow Microsoft kind of bastardized\ntheirs a little bit, right?\n\n802\n00:39:26,890 --> 00:39:28,085\n>> [LAUGH]\n>> They tweaked it a bit, so\n\n803\n00:39:28,085 --> 00:39:32,205\nit's not 100% compatible with\nthe traditional Kerberos Version 5.\n\n804\n00:39:32,205 --> 00:39:33,675\nBut it is based on that.\n\n805\n00:39:33,675 --> 00:39:36,345\nAnd so when we build a trust like this,\n\n806\n00:39:36,345 --> 00:39:41,120\nyou can actually build a trust to\na non-Microsoft system, right?\n\n807\n00:39:41,120 --> 00:39:42,680\nAll this talk about domains and forests,\n\n808\n00:39:42,680 --> 00:39:45,085\nwe're assuming this is\nActive Directory to Active Directory.\n\n809\n00:39:45,085 --> 00:39:45,720\n>> Mm-hm.\n\n810\n00:39:45,720 --> 00:39:47,540\n>> But, what if your partner\ndoesn't have an Active Directory?\n\n811\n00:39:47,540 --> 00:39:49,737\nWhat if they've got a you know.\n\n812\n00:39:49,737 --> 00:39:50,252\n>> A Linux realm, or.\n\n813\n00:39:50,252 --> 00:39:53,845\n>> Yeah, Solaris servers with a NIS+\ndomain, or something like that.\n\n814\n00:39:53,845 --> 00:39:56,588\n>> Mm-hm.\nWell that's not Active Directory, so\n\n815\n00:39:56,588 --> 00:39:59,070\nthe regular trusts aren't going to work.\n\n816\n00:39:59,070 --> 00:40:03,948\nBut a realm trust can, so we can build\nup a realm trust to connect out of\n\n817\n00:40:03,948 --> 00:40:07,997\nthe system to be able to synchronize and\ntrust accounts.\n\n818\n00:40:07,997 --> 00:40:09,832\nIt was originally developed.\n\n819\n00:40:09,832 --> 00:40:11,538\nTo support web applications.\n\n820\n00:40:11,538 --> 00:40:16,376\nYou might have web applications running\non a frontend which is on top of\n\n821\n00:40:16,376 --> 00:40:18,880\nsome type of Unix system.\n\n822\n00:40:18,880 --> 00:40:21,420\nAnd you want user accounts\nthat can authenticate and\n\n823\n00:40:21,420 --> 00:40:23,740\naccess resources back in your\nactive directory domain.\n\n824\n00:40:23,740 --> 00:40:26,570\nAnd it kinda stems from way back\nwhen Microsoft acquired Hotmail.\n\n825\n00:40:26,570 --> 00:40:28,960\nYou know Hotmail use to\nbe its own product, and\n\n826\n00:40:28,960 --> 00:40:31,690\nit was all run on BSD servers.\n\n827\n00:40:31,690 --> 00:40:34,835\nAnd so when Microsoft acquired it,\nthat was like job number one was, oh,\n\n828\n00:40:34,835 --> 00:40:36,280\nwe gotta get these off BSD.\n\n829\n00:40:36,280 --> 00:40:38,650\nAnd so they did that over the years.\n\n830\n00:40:38,650 --> 00:40:41,840\nBut setting up that realm trust\nwas part of what facilitated that,\n\n831\n00:40:41,840 --> 00:40:47,100\nto handle the user authentication between\nthese Unix like environments in Windows.\n\n832\n00:40:47,100 --> 00:40:53,340\nSo that external forest doesn't have\nto be an active directory environment.\n\n833\n00:40:53,340 --> 00:40:59,040\nAnything that's compatible with a Kerberos\nrealm, you can build a trust with.\n\n834\n00:40:59,040 --> 00:41:00,876\nSo, when we start to do our design,\n\n835\n00:41:00,876 --> 00:41:05,110\nthinking about where these trusts\nare gonna fall is important, all right.\n\n836\n00:41:05,110 --> 00:41:07,400\nYou don't want to do a forest trust,\n\n837\n00:41:07,400 --> 00:41:10,920\nwhen an external domain trust\nwould have been just fine, right.\n\n838\n00:41:10,920 --> 00:41:12,730\nPrinciple of least privilege.\n\n839\n00:41:12,730 --> 00:41:13,370\n>> Exactly.\n\n840\n00:41:13,370 --> 00:41:15,770\n>> Never give more access than you need.\n\n841\n00:41:15,770 --> 00:41:19,020\nAnd in fact,when you do a realm trust,\ndo we talk about it in this show?\n\n842\n00:41:19,020 --> 00:41:20,930\nThe constrained delegation?\n\n843\n00:41:20,930 --> 00:41:21,875\n>> Yeah, I was wondering if we did.\n\n844\n00:41:21,875 --> 00:41:23,281\nI think we do.\n\n845\n00:41:23,281 --> 00:41:25,785\n>> It is the very last note\non page four of my notes.\n\n846\n00:41:25,785 --> 00:41:26,780\n>> Is it really?\n\n847\n00:41:26,780 --> 00:41:27,890\nI'm gonna mention it now though.\n\n848\n00:41:27,890 --> 00:41:28,920\n>> Let's do it.\n\n849\n00:41:28,920 --> 00:41:30,418\n>> Screw it, didn't order stuff.\n[LAUGH]\n\n850\n00:41:30,418 --> 00:41:31,083\n>> [LAUGH]\n\n851\n00:41:31,083 --> 00:41:33,357\n>> So when you build a realm trust, or\n\n852\n00:41:33,357 --> 00:41:36,967\neven your regular forest trusts,\nand domain trusts,\n\n853\n00:41:36,967 --> 00:41:40,905\nsometimes you don't want\nto trust the entire domain.\n\n854\n00:41:40,905 --> 00:41:41,465\nRight.\n\n855\n00:41:41,465 --> 00:41:44,685\nYeah, it might be a relationship\nbetween ITProTV and TechNet, but\n\n856\n00:41:44,685 --> 00:41:47,485\nI don't wanna trust\nthe entire TechNet domain.\n\n857\n00:41:47,485 --> 00:41:48,025\n>> Right.\n\n858\n00:41:48,025 --> 00:41:51,015\n>> Instead, I just want to trust a couple\nof accounts for some users that are over\n\n859\n00:41:51,015 --> 00:41:52,941\nthere who are going to be doing\nsome work with us, right.\n\n860\n00:41:52,941 --> 00:41:58,100\nSo, in that scenario,\nif I do a domain trust,\n\n861\n00:41:58,100 --> 00:42:02,070\nI'm trusting the whole thing and I might\nbe giving out more access than is needed.\n\n862\n00:42:02,070 --> 00:42:05,200\nSo, you can do a constrained delegation.\n\n863\n00:42:05,200 --> 00:42:08,750\nI'm using my air quotes,\nRichard Nixon mode.\n\n864\n00:42:08,750 --> 00:42:09,647\nAnd with that,\n\n865\n00:42:09,647 --> 00:42:13,605\nyou can specify which accounts\nare allowed to use that trust right?\n\n866\n00:42:13,605 --> 00:42:15,040\nAllowed to pass over it.\n\n867\n00:42:15,040 --> 00:42:19,270\nAnd now we can get really, really super\nspecific down to an organizational unit or\n\n868\n00:42:19,270 --> 00:42:20,780\ndown to individual users if we want.\n\n869\n00:42:20,780 --> 00:42:22,680\n>> Absolutely,\nthat's another thing to think about within\n\n870\n00:42:22,680 --> 00:42:24,540\nWindows with the forest trust.\n\n871\n00:42:24,540 --> 00:42:28,690\nWhen you set up that forest trust, it gets\ncreated between the two forest roots.\n\n872\n00:42:28,690 --> 00:42:31,480\nSo the forest root from one forest and\nthe forest root from the other and\n\n873\n00:42:31,480 --> 00:42:34,430\nremember it's transitive down\nthrough all the domains.\n\n874\n00:42:34,430 --> 00:42:35,900\nWhen you set up that forest trust,\n\n875\n00:42:35,900 --> 00:42:39,000\nyou've got two options as far as\nyour authentication models go.\n\n876\n00:42:39,000 --> 00:42:41,490\nYou have the full-on forest trust and\n\n877\n00:42:41,490 --> 00:42:44,980\nthen you have what they call\na selective forest trust.\n\n878\n00:42:44,980 --> 00:42:46,502\nAnd you've gotta be\nreally careful with that.\n\n879\n00:42:46,502 --> 00:42:48,300\nIf you're doing a business merger or\nsomething like that and\n\n880\n00:42:48,300 --> 00:42:52,290\nyou bought this network you might\nwant that full-on forest trust.\n\n881\n00:42:52,290 --> 00:42:55,270\nWhat we wanna think about is,\nwhen you set up a trust like that you're\n\n882\n00:42:55,270 --> 00:42:59,180\nbasically saying,\nokay we trust your authentication process.\n\n883\n00:42:59,180 --> 00:43:03,600\nAll the users in that other forest are now\na part of your authenticated users group.\n\n884\n00:43:03,600 --> 00:43:07,150\nSo any resources that you had\ngiven before this happened,\n\n885\n00:43:07,150 --> 00:43:10,620\nyou might not have thought about it,\nyou might have given a lot of permissions\n\n886\n00:43:10,620 --> 00:43:13,230\nover resources, using\nthe authenticated users group, right?\n\n887\n00:43:13,230 --> 00:43:16,640\nIt's an easy way to make sure\nthat everybody in my domain or\n\n888\n00:43:16,640 --> 00:43:18,780\nwhatever has access to the resource.\n\n889\n00:43:18,780 --> 00:43:20,460\nWell once I set up that trust,\n\n890\n00:43:20,460 --> 00:43:24,360\nthey are immediately now considered\na trusted user and they would also have\n\n891\n00:43:24,360 --> 00:43:27,942\naccess to every place you had used\nthat authenticated user script.\n\n892\n00:43:27,942 --> 00:43:30,420\nWhich is typically not what we want to do,\nand\n\n893\n00:43:30,420 --> 00:43:33,040\nthat's where we get to do\nselective forest trust.\n\n894\n00:43:33,040 --> 00:43:37,400\nAnd in that case, you set up the forest\ntrust, you choose the selective model and\n\n895\n00:43:37,400 --> 00:43:40,210\nthen you have to go back and\npick and choose\n\n896\n00:43:40,210 --> 00:43:44,730\nwhat servers the people coming across that\ntrust are allowed to authenticate with.\n\n897\n00:43:44,730 --> 00:43:49,010\nSo it gives me a way to restrict\nwhat they're accessing.\n\n898\n00:43:49,010 --> 00:43:52,510\n>> Yeah, you know the alternative is\nto just create them a new user account,\n\n899\n00:43:52,510 --> 00:43:54,940\nright, make a user account\nunder your own domain [LAUGH].\n\n900\n00:43:54,940 --> 00:43:57,640\nBut even that can sometimes\ngive away more than we want.\n\n901\n00:43:57,640 --> 00:44:00,510\nAnd you don't want people to have\nmultiple accounts if they don't need it.\n\n902\n00:44:00,510 --> 00:44:03,910\nIf this is going to be a long term\nrelationship, you build a trust and\n\n903\n00:44:03,910 --> 00:44:05,450\nit makes life a lot easier.\n\n904\n00:44:05,450 --> 00:44:07,800\nNow Mike,\nwe didn't always have forest trust right?\n\n905\n00:44:07,800 --> 00:44:09,291\nWhich version of Windows introduced that?\n\n906\n00:44:09,291 --> 00:44:10,791\nWas it, it was 2003?\n\n907\n00:44:10,791 --> 00:44:12,160\n>> It was 2003 I think?\n\n908\n00:44:12,160 --> 00:44:14,120\n>> Pretty sure it was Windows Server 2003.\n\n909\n00:44:14,120 --> 00:44:17,570\nSo you may encounter\nenvironments that are out there\n\n910\n00:44:17,570 --> 00:44:21,670\nthat are old school active directory\nshops that were deployed back in Windows\n\n911\n00:44:21,670 --> 00:44:24,550\n2000 when the AD first came out and\nwe didn't have forest trust.\n\n912\n00:44:24,550 --> 00:44:28,430\nAnd so you may go somewhere they\nhave a ton of domain trusts,\n\n913\n00:44:28,430 --> 00:44:30,380\nbecause that was just\nall they had back then.\n\n914\n00:44:30,380 --> 00:44:34,870\nAnd as they've upgraded to newer versions\nof Windows new functionalities come in but\n\n915\n00:44:34,870 --> 00:44:36,950\nthey haven't taken advantage of it yet,\nright.\n\n916\n00:44:36,950 --> 00:44:40,460\nSo, there may be times when you need\nto switch to supporting new things.\n\n917\n00:44:40,460 --> 00:44:43,730\nBut just keep in mind that some of the\nfeatures available in the active directory\n\n918\n00:44:43,730 --> 00:44:46,410\nare tied to particular\nversions of Windows Server.\n\n919\n00:44:46,410 --> 00:44:48,970\nAnd if your domain controllers\naren't at the right level.\n\n920\n00:44:48,970 --> 00:44:52,600\nAnd if you're forest and domain functional\nlevels aren't set to the right level,\n\n921\n00:44:52,600 --> 00:44:54,950\nyou may not have that capability.\n\n922\n00:44:54,950 --> 00:44:59,340\nAnd that's actually the very next\nnote I've got in my show notes here.\n\n923\n00:44:59,340 --> 00:45:00,590\n>> That was a great segue.\n\n924\n00:45:00,590 --> 00:45:01,730\n>> I know, I try.\n\n925\n00:45:01,730 --> 00:45:03,430\nWhich is right here.\n\n926\n00:45:03,430 --> 00:45:05,555\nThat we need to make\nsure when we design for\n\n927\n00:45:05,555 --> 00:45:08,575\nall this stuff that we understand\nthe functional levels.\n\n928\n00:45:08,575 --> 00:45:10,020\n>> Mm-hm.\n>> And this is one of the biggest\n\n929\n00:45:10,020 --> 00:45:13,040\nchallenges of the design exam,\nbecause you'll get questions.\n\n930\n00:45:13,040 --> 00:45:17,629\nAnd, in the question, when it's\ndescribing the topology, it'll tell you,\n\n931\n00:45:17,629 --> 00:45:20,917\nthis server is running\nWindows Server 2008 R2, and\n\n932\n00:45:20,917 --> 00:45:24,500\nyour forest functional level\nis at Windows Server 2003.\n\n933\n00:45:24,500 --> 00:45:26,360\nAnd your domain functional level\nis at Windows Server 2003.\n\n934\n00:45:26,360 --> 00:45:27,815\nAnd you want to do this.\n\n935\n00:45:27,815 --> 00:45:28,440\n>> Mm-hm.\n\n936\n00:45:28,440 --> 00:45:29,920\n>> What's your first step?\n\n937\n00:45:29,920 --> 00:45:33,420\nAnd your first step might be to\nchange the functional level, or\n\n938\n00:45:33,420 --> 00:45:36,250\nit might not be based on whether or\nnot it's needed.\n\n939\n00:45:36,250 --> 00:45:39,380\nSo, for the exam you've got to have\na good understanding of the differences\n\n940\n00:45:39,380 --> 00:45:40,680\nbetween them.\n\n941\n00:45:40,680 --> 00:45:44,140\nAnd Microsoft has a great article\nwhich I'll post with the show notes.\n\n942\n00:45:44,140 --> 00:45:46,040\nLet me bring this guy up.\n\n943\n00:45:46,040 --> 00:45:50,810\nThat breaks down all the functional levels\nsince the beginning of Windows 2000,\n\n944\n00:45:50,810 --> 00:45:52,210\nall right?\n\n945\n00:45:52,210 --> 00:45:54,770\nWindows 2000 is when the active\ndirectory was created.\n\n946\n00:45:54,770 --> 00:45:56,740\nIt didn't exist prior to that.\n\n947\n00:45:56,740 --> 00:45:59,232\nAnd so, back then you didn't\nhave functional levels,\n\n948\n00:45:59,232 --> 00:46:01,340\nit was just Windows 2000.\n\n949\n00:46:01,340 --> 00:46:04,770\nBut when Windows Server 2003 came out,\nthey had to change that.\n\n950\n00:46:04,770 --> 00:46:06,070\nThey introduced new features.\n\n951\n00:46:06,070 --> 00:46:10,375\nAnd so you had the native mode,\nwhich was Windows 2000.\n\n952\n00:46:10,375 --> 00:46:15,310\nAnd there was actually a hybrid mode too,\nwhich was Windows 2000 mixed with NT4.\n\n953\n00:46:15,310 --> 00:46:16,900\nYeah.\nHopefully, you never see that.\n\n954\n00:46:18,710 --> 00:46:21,541\nBut then you had the 2003 level, right?\n\n955\n00:46:21,541 --> 00:46:25,477\nWell, in 2008,\nwe started to have forest levels and\n\n956\n00:46:25,477 --> 00:46:28,810\ndomain levels that were really separate.\n\n957\n00:46:28,810 --> 00:46:33,560\nAnd in 2012, we've seen an extension\nof that, each one adding a little more.\n\n958\n00:46:33,560 --> 00:46:39,310\nAnd where it gets really confusing is\nthat you have domain functional levels,\n\n959\n00:46:39,310 --> 00:46:42,450\nwhich apparently is a hot\nlink that I can't highlight.\n\n960\n00:46:42,450 --> 00:46:43,560\n>> Yeah.\nOh because it collapses that\n\n961\n00:46:43,560 --> 00:46:44,340\nsection, yeah.\n\n962\n00:46:44,340 --> 00:46:47,060\n>> So there's domain functional levels and\n\n963\n00:46:47,060 --> 00:46:50,120\nthere's forest functional levels,\nall right?\n\n964\n00:46:50,120 --> 00:46:54,550\nAnd so, the two,\nthey kind of have to go together.\n\n965\n00:46:54,550 --> 00:46:58,960\nIf your forest functional level is set\nhigh, then your domain level normally has\n\n966\n00:46:58,960 --> 00:47:01,210\nto keep up, but your domains\nmight be higher than the forest,\n\n967\n00:47:01,210 --> 00:47:02,780\nit does get a little bit confusing.\n\n968\n00:47:02,780 --> 00:47:03,400\n>> Yeah.\n\n969\n00:47:03,400 --> 00:47:05,440\n>> But,\ndepending on what feature you want,\n\n970\n00:47:05,440 --> 00:47:06,810\nyou may need to move to a new version.\n\n971\n00:47:07,960 --> 00:47:08,760\nFor your design,\n\n972\n00:47:08,760 --> 00:47:13,870\nthe key thing to remember is that when\nyou go to a particular functional level,\n\n973\n00:47:13,870 --> 00:47:18,110\nall of your domain controllers need to\nbe at at least that version of Windows.\n\n974\n00:47:19,140 --> 00:47:21,610\nSo, raising your functional\nlevel may necessitate\n\n975\n00:47:21,610 --> 00:47:23,480\nupgrading some of your domain controllers.\n\n976\n00:47:23,480 --> 00:47:25,550\n>> In fact you can't\nraise it until you do.\n\n977\n00:47:25,550 --> 00:47:29,920\nLike if you want to take advantage\nof the active directory recycle bin,\n\n978\n00:47:29,920 --> 00:47:31,360\nthat came out in 2008 R2.\n\n979\n00:47:31,360 --> 00:47:35,510\nThat meant you had to be at 2008\nR2 domain functional level.\n\n980\n00:47:35,510 --> 00:47:40,200\nReally what that is saying is, all of your\ndomain controllers have to be running\n\n981\n00:47:40,200 --> 00:47:44,180\n2008 R2 because that's a feature\nthat 2003 domain controllers,\n\n982\n00:47:44,180 --> 00:47:46,730\n2008 domain controllers\nare not gonna understand.\n\n983\n00:47:46,730 --> 00:47:50,980\nSo I have to first upgrade all\nof my servers to that particular\n\n984\n00:47:50,980 --> 00:47:52,560\nversion of the operating system.\n\n985\n00:47:52,560 --> 00:47:55,420\nThen I can raise my, say,\ndomain functional level.\n\n986\n00:47:55,420 --> 00:47:57,390\nThe other thing you want\nto keep in mind is,\n\n987\n00:47:57,390 --> 00:48:00,000\nonce you do that you get to take\nadvantage of the new features.\n\n988\n00:48:00,000 --> 00:48:02,267\nYou'll never be able to\nintroduce a older or\n\n989\n00:48:02,267 --> 00:48:05,035\ndown level operating system\nas a domain controller.\n\n990\n00:48:05,035 --> 00:48:08,660\nRight, it doesn't matter about your\nprint servers, your file servers,\n\n991\n00:48:08,660 --> 00:48:12,525\nthings like that but it's something you've\ngot to keep in mind in your design.\n\n992\n00:48:12,525 --> 00:48:14,347\nBecause, okay, great, I want to upgrade.\n\n993\n00:48:14,347 --> 00:48:16,157\nI want to go to this\nnew functional level so\n\n994\n00:48:16,157 --> 00:48:18,550\nI can take advantage of this new feature.\n\n995\n00:48:18,550 --> 00:48:20,900\nBut I might have some domain controllers\nthat I don't have licenses or\n\n996\n00:48:20,900 --> 00:48:24,390\nthat I can't upgrade, or we're getting\nready to merge something else in and\n\n997\n00:48:24,390 --> 00:48:26,380\nthey're running older domain controllers.\n\n998\n00:48:26,380 --> 00:48:28,150\nAnd that would end up preventing that.\n\n999\n00:48:28,150 --> 00:48:29,140\n>> Yeah, absolutely.\n\n1000\n00:48:29,140 --> 00:48:32,040\nAnd you might be asking yourself, Is this\nsomething I really need to worry about.\n\n1001\n00:48:32,040 --> 00:48:33,870\nIf I go to a workplace and\n\n1002\n00:48:33,870 --> 00:48:37,000\nall of their domain controllers are\nWindows Server 2012, do I care about this?\n\n1003\n00:48:37,000 --> 00:48:38,410\nAnd the answer is yes you do.\n\n1004\n00:48:38,410 --> 00:48:40,170\nAnd here's why.\n\n1005\n00:48:40,170 --> 00:48:45,880\nJust literally two months ago, I went\nto help out a former student of mine.\n\n1006\n00:48:45,880 --> 00:48:46,980\nAnd I went to their network, and\n\n1007\n00:48:46,980 --> 00:48:48,980\nthey had Windows Server 2012\ndomain controllers, all right?\n\n1008\n00:48:50,110 --> 00:48:53,050\nBut when I looked at\ntheir functional levels,\n\n1009\n00:48:53,050 --> 00:48:56,110\nthey were still set to\nWindows Server 2003.\n\n1010\n00:48:56,110 --> 00:49:00,590\nAnd the reason is they kept promoting\ntheir domain controllers but you don't\n\n1011\n00:49:00,590 --> 00:49:04,610\nhave to raise your functional level just\nto put newer domain controllers on there.\n\n1012\n00:49:04,610 --> 00:49:07,280\nSo they were running without\nsome of these new features and\n\n1013\n00:49:07,280 --> 00:49:09,550\nhe was trying to figure out why\nthese features weren't working and\n\n1014\n00:49:09,550 --> 00:49:11,950\nthat's what it was is\nthe functional level is wrong.\n\n1015\n00:49:11,950 --> 00:49:16,370\nSo just because somebody's moved to newer\ndomain controller, newer operating systems\n\n1016\n00:49:16,370 --> 00:49:19,360\non their DCs doesn't mean they've\nraised the functional level.\n\n1017\n00:49:19,360 --> 00:49:22,782\nSo especially on old networks, mature\nnetworks that have been around a while,\n\n1018\n00:49:22,782 --> 00:49:24,531\nthey may still be at those older levels.\n\n1019\n00:49:24,531 --> 00:49:28,970\nSo now you might ask yourself,\nwhy wouldn't I want to raise the level?\n\n1020\n00:49:28,970 --> 00:49:31,290\nIf I'm all 2012, why not raise it?\n\n1021\n00:49:31,290 --> 00:49:33,980\nThe main reason that you\nmight not want to raise it\n\n1022\n00:49:33,980 --> 00:49:36,590\nis that you can't lower\nit once it's been raised.\n\n1023\n00:49:36,590 --> 00:49:41,260\nIf you raise your functional level to\na higher edition, and then all of a sudden\n\n1024\n00:49:41,260 --> 00:49:46,400\nsomething happens where you need, maybe\nyou raised it to the 2012 functional level\n\n1025\n00:49:46,400 --> 00:49:49,280\nand all of a sudden you need a 2008\ndomain controller for some reason.\n\n1026\n00:49:49,280 --> 00:49:50,670\n>> Right.\n>> All right?\n\n1027\n00:49:50,670 --> 00:49:51,230\nYou can't.\n\n1028\n00:49:51,230 --> 00:49:52,170\n>> You're stuck.\n\n1029\n00:49:52,170 --> 00:49:54,405\n>> You can't bring up a 2008 domain\ncontroller when you're at the 2012\n\n1030\n00:49:54,405 --> 00:49:57,440\nfunctional level, and\nyou can't lower your functional level.\n\n1031\n00:49:57,440 --> 00:50:00,220\nThe only way to lower it\nis to restore all of your\n\n1032\n00:50:00,220 --> 00:50:02,398\ndomain controllers from backup, right?\n\n1033\n00:50:02,398 --> 00:50:02,907\n[LAUGH]\n>> [LAUGH] Mm-hm.\n\n1034\n00:50:02,907 --> 00:50:03,754\n>> That's it, and\n\n1035\n00:50:03,754 --> 00:50:06,950\nthat's not a realistic solution.\n>> No, no.\n\n1036\n00:50:06,950 --> 00:50:11,370\n>> So definitely not something you're\ngoing wanna do on any given day.\n\n1037\n00:50:11,370 --> 00:50:15,180\nNow, so a lot of people are hesitant\nto raise the functional level.\n\n1038\n00:50:15,180 --> 00:50:16,240\nThey wait until the last possible chance.\n\n1039\n00:50:16,240 --> 00:50:17,620\n>> Yeah, right, exactly.\n\n1040\n00:50:17,620 --> 00:50:18,850\n>> I can give you a great scenario.\n\n1041\n00:50:18,850 --> 00:50:25,220\nI remember, and Mike you might remember\nthis, when we initially deployed\n\n1042\n00:50:25,220 --> 00:50:31,440\nWindows Server 2003, we took that into, we\nwent right to that 2003 functional level,\n\n1043\n00:50:31,440 --> 00:50:35,860\nand we had a Nas Box,\nit was from Buffalo storage, and\n\n1044\n00:50:35,860 --> 00:50:39,470\nit supported active directory integration,\nso it would do authentication.\n\n1045\n00:50:39,470 --> 00:50:41,300\nWell, it worked great under Windows 2000.\n\n1046\n00:50:41,300 --> 00:50:43,850\n>> Yep.\n>> But when we went to 2003 domain\n\n1047\n00:50:43,850 --> 00:50:45,715\ncontrollers, it would\njust not talk to them.\n\n1048\n00:50:45,715 --> 00:50:46,420\n>> Mm-mm, not at all.\n\n1049\n00:50:46,420 --> 00:50:49,430\n>> And so\nthe tech support solution was well,\n\n1050\n00:50:49,430 --> 00:50:51,670\njust bring up a Windows\n2000 domain controller.\n\n1051\n00:50:51,670 --> 00:50:52,740\nAnd we're like, well we can't.\n\n1052\n00:50:52,740 --> 00:50:54,710\n>> Yeah.\n>> We've all ready moved beyond that, so\n\n1053\n00:50:54,710 --> 00:50:55,740\nwe can't bring it up.\n\n1054\n00:50:55,740 --> 00:50:58,350\nSo we weren't able to use domain\nauthentication on that box.\n\n1055\n00:50:58,350 --> 00:50:59,670\n>> That's right.\nI remember that.\n\n1056\n00:50:59,670 --> 00:51:02,050\n>> That was a problem that plagued\nthat box until we got rid of it.\n\n1057\n00:51:02,050 --> 00:51:06,100\nSo that's a scenario and\nhopefully that doesn't happen to you but\n\n1058\n00:51:06,100 --> 00:51:07,570\nthat kind of thing can happen.\n\n1059\n00:51:07,570 --> 00:51:10,900\nSo let's look at some of the features\nthat we get with each one.\n\n1060\n00:51:10,900 --> 00:51:14,239\nNow you'll notice this article\nstarts with Windows 2000 Native, and\n\n1061\n00:51:14,239 --> 00:51:17,531\nthere's no mention of that mixed mode\nthat Mike and I were talking about.\n\n1062\n00:51:17,531 --> 00:51:21,905\n>> And that's because NT4 is 100% off\nof Microsoft's support model and so\n\n1063\n00:51:21,905 --> 00:51:24,070\nthey don't even address it anymore.\n\n1064\n00:51:24,070 --> 00:51:28,050\nBut there is a mixed mode that's\njust not being shown here.\n\n1065\n00:51:29,200 --> 00:51:33,640\nAll right, at the domain functional level,\nWindows 2000 was the beginning one.\n\n1066\n00:51:33,640 --> 00:51:38,450\nThat's what gave us active directory\nfunctionality and universal group nesting.\n\n1067\n00:51:38,450 --> 00:51:41,720\nWe don't have to remember this one because\nit's what gives us functionality, right.\n\n1068\n00:51:41,720 --> 00:51:42,280\n>> Yes.\n\n1069\n00:51:42,280 --> 00:51:43,480\nIt makes it all work.\n\n1070\n00:51:43,480 --> 00:51:46,640\n>> Windows 2003 though,\nyou'll see it started to add things.\n\n1071\n00:51:47,770 --> 00:51:50,670\nAdding things like the NetDom tool for\n\n1072\n00:51:50,670 --> 00:51:55,365\nmanually creating user accounts, domains,\nand so forth from the command line.\n\n1073\n00:51:55,365 --> 00:51:58,795\nBut it also gave us renaming\ndomain controllers and\n\n1074\n00:51:58,795 --> 00:52:03,825\nthat's a specific exam objective on\nthe list, so expect to see that.\n\n1075\n00:52:03,825 --> 00:52:07,735\nIf you want to rename a domain controller,\nyou've got to be at the Windows Server\n\n1076\n00:52:07,735 --> 00:52:11,065\n2003 domain functional level or\nyou won't be able to do it, remember that.\n\n1077\n00:52:12,270 --> 00:52:16,550\nAll right, some of the other one,\nthings like setting the user password from\n\n1078\n00:52:16,550 --> 00:52:18,840\na script,\nin the past you couldn't do that.\n\n1079\n00:52:18,840 --> 00:52:21,385\n>> And other things, redirecting users.\n\n1080\n00:52:21,385 --> 00:52:22,282\n>> EMP, yep.\n\n1081\n00:52:22,282 --> 00:52:25,940\n>> Constrain delegation of trusts,\nthis is where that came in,\n\n1082\n00:52:25,940 --> 00:52:30,460\nin the 2003 model and I think that's\nthe main thing, selective authentication.\n\n1083\n00:52:30,460 --> 00:52:32,365\nSo those are the main bells and\nwhistles there.\n\n1084\n00:52:32,365 --> 00:52:35,600\nNow, let's roll back our clock ten years.\n\n1085\n00:52:35,600 --> 00:52:40,000\nSo let's say the year is 2004 and\nWindows Server 2003 has been out for\n\n1086\n00:52:40,000 --> 00:52:43,369\na year now, you're getting ready to\ndeploy it and you look at that list.\n\n1087\n00:52:44,560 --> 00:52:46,940\nIf you look at those options and\nyou say, you know what?\n\n1088\n00:52:46,940 --> 00:52:49,100\nI don't need any of those features.\n\n1089\n00:52:49,100 --> 00:52:51,689\nIf you don't need those features,\nis there any reason to go ahead and\n\n1090\n00:52:51,689 --> 00:52:52,906\nupgrade the functional level?\n\n1091\n00:52:52,906 --> 00:52:53,448\n>> Nope.\n\n1092\n00:52:53,448 --> 00:52:54,074\nI would not.\n\n1093\n00:52:54,074 --> 00:52:55,657\n>> No.\n>> Then all you're doing is putting\n\n1094\n00:52:55,657 --> 00:52:56,950\na constraint on yourself.\n\n1095\n00:52:56,950 --> 00:52:58,670\nNow you're not going to\nbe able to roll back,\n\n1096\n00:52:58,670 --> 00:53:01,640\nyou're never going to be able to add\nthat old 2000 to main controller.\n\n1097\n00:53:01,640 --> 00:53:05,220\nSo you really want to look at what you're\ngoing to get by going to that level.\n\n1098\n00:53:05,220 --> 00:53:08,250\nThere's some forced functional levels\nthat we're going to talk about later,\n\n1099\n00:53:08,250 --> 00:53:09,300\nthat provide nothing.\n\n1100\n00:53:09,300 --> 00:53:13,730\nThere's no new features introduced by\ngoing to that particular functional level,\n\n1101\n00:53:13,730 --> 00:53:15,700\nso why would you?\n\n1102\n00:53:15,700 --> 00:53:18,670\nMaybe you want to prevent,\nmaybe you really want to make sure\n\n1103\n00:53:18,670 --> 00:53:22,020\nsomebody never introduces a 2000 main\ncontroller, that might be a reason.\n\n1104\n00:53:22,020 --> 00:53:25,380\nBut yeah, if you don't need the features,\nyou might as well not do them.\n\n1105\n00:53:25,380 --> 00:53:29,840\n>> And that's what you'll see on the exam\nis you need to pick the lowest functional\n\n1106\n00:53:29,840 --> 00:53:33,030\nlevel that gives you\nthe functions you need, right?\n\n1107\n00:53:33,030 --> 00:53:34,189\nAnd that is kinda challenging.\n\n1108\n00:53:35,560 --> 00:53:38,402\nNow, in this document you'll\nsee on the right side here,\n\n1109\n00:53:38,402 --> 00:53:42,115\nwhat they're listing is supported\ndomain controller operating systems.\n\n1110\n00:53:42,115 --> 00:53:46,484\n>> So, when we talk about Windows\n2000 native, see how it does 2000,\n\n1111\n00:53:46,484 --> 00:53:49,366\n2003, 2008, it doesn't do 2012.\n\n1112\n00:53:49,366 --> 00:53:50,814\n>> Right.\n>> So you actually can't have\n\n1113\n00:53:50,814 --> 00:53:53,390\n2012 domain controllers on\na 2000 native environment.\n\n1114\n00:53:53,390 --> 00:53:57,240\nYou'll need to at least\nbump up to Windows 2003.\n\n1115\n00:53:57,240 --> 00:54:01,238\nSo notice the 2003 functional level,\nyou can have 2012 domain controllers.\n\n1116\n00:54:01,238 --> 00:54:05,060\nAnd that was exactly what I ran into\nat this place a few months ago.\n\n1117\n00:54:05,060 --> 00:54:08,450\nThey had 2012 domain controllers and\na 2003 functional level.\n\n1118\n00:54:08,450 --> 00:54:09,360\nYou can do it.\n\n1119\n00:54:09,360 --> 00:54:11,950\n>> Yeah, cuz as Don said,\nyou bring in that new domain controller,\n\n1120\n00:54:11,950 --> 00:54:15,620\nit's gonna dumb itself down\nto whatever you already have.\n\n1121\n00:54:15,620 --> 00:54:20,660\nSo if you start with scratch and you\ninstall 2012 R2 on it when you go through\n\n1122\n00:54:20,660 --> 00:54:25,300\nthat wizard, when you do your DC promo,\nyou can pick your functional level.\n\n1123\n00:54:25,300 --> 00:54:27,030\nBut it's going to default to 2012 or\n\n1124\n00:54:27,030 --> 00:54:30,590\n2012 R2 if that's what you're installing\ncuz there's nothing else on the network.\n\n1125\n00:54:30,590 --> 00:54:33,630\nIf you've already got a network,\nas Don said, and you bring in that domain\n\n1126\n00:54:33,630 --> 00:54:37,210\ncontroller, it's got to dumb\nitself down to that current level.\n\n1127\n00:54:37,210 --> 00:54:38,906\nAnd it's not gonna raise\nitself automatically.\n\n1128\n00:54:38,906 --> 00:54:40,031\n>> Yep.\n\n1129\n00:54:40,031 --> 00:54:43,947\nAll right now, if we go up to the 2008\ndomain functional level, and again,\n\n1130\n00:54:43,947 --> 00:54:45,823\nthis is domain, not forest, right?\n\n1131\n00:54:45,823 --> 00:54:48,306\n>> Mm-hm.\n>> So the 2008 domain controller,\n\n1132\n00:54:48,306 --> 00:54:49,910\nwe got DFS support, right?\n\n1133\n00:54:49,910 --> 00:54:51,330\nOr DFSR, right?\n\n1134\n00:54:51,330 --> 00:54:55,690\nThat's a big deal, that's a motivator for\nme to 2008, because FRS,\n\n1135\n00:54:55,690 --> 00:54:57,540\nthe old file replication service?\n\n1136\n00:54:57,540 --> 00:54:59,902\nIt sucked, it was really bad.\n\n1137\n00:54:59,902 --> 00:55:00,764\n>> [LAUGH]\n>> And\n\n1138\n00:55:00,764 --> 00:55:05,280\nactive directory synchronization\nwould break down at random intervals.\n\n1139\n00:55:05,280 --> 00:55:06,640\nIt was just a mess.\n\n1140\n00:55:06,640 --> 00:55:10,545\nWell, the 2008 domain functional level\nbrought in DFSR to replace that.\n\n1141\n00:55:10,545 --> 00:55:13,360\nLight-years ahead of FRS.\n\n1142\n00:55:13,360 --> 00:55:15,980\nAnd so that was a big motivator, and\n\n1143\n00:55:15,980 --> 00:55:20,370\nthis is normally the functional level that\nI'll go to, and I usually stop right here.\n\n1144\n00:55:20,370 --> 00:55:24,610\nSo most of the systems that I manage,\nthat's kind of my level of choice.\n\n1145\n00:55:24,610 --> 00:55:27,760\nBut you'll see domain\nbased DFS name spaces.\n\n1146\n00:55:27,760 --> 00:55:32,640\nAES 128 and 256 support for\nauthentication, so stronger encryption.\n\n1147\n00:55:32,640 --> 00:55:35,180\nThat's always a good thing.\n\n1148\n00:55:35,180 --> 00:55:37,165\nInformation about the last\ninteractive log in.\n\n1149\n00:55:37,165 --> 00:55:40,360\nFine-grained password policies.\n\n1150\n00:55:40,360 --> 00:55:41,170\nWe talk about those.\n\n1151\n00:55:41,170 --> 00:55:43,824\nPersonal virtual desktops\nI'm not a big fan of, but\n\n1152\n00:55:43,824 --> 00:55:45,948\nyou see that's a big update right there.\n\n1153\n00:55:45,948 --> 00:55:46,610\n>> It's huge, yeah.\n\n1154\n00:55:46,610 --> 00:55:49,865\n>> A lot of features that people\nwould really like to have.\n\n1155\n00:55:49,865 --> 00:55:52,320\nThen you get to 2008 R2.\n\n1156\n00:55:52,320 --> 00:55:54,080\nWhat is that functional level at?\n\n1157\n00:55:54,080 --> 00:55:55,830\nWell, not much.\n\n1158\n00:55:55,830 --> 00:56:00,790\nAn authentication mechanism update for\nactive directory federation services.\n\n1159\n00:56:00,790 --> 00:56:05,073\nIf you don't use federation services,\nyou don't care, right?\n\n1160\n00:56:05,073 --> 00:56:09,507\nAnd then automatic SPN management for\nservices on a particular computer blah,\n\n1161\n00:56:09,507 --> 00:56:10,335\nblah, blah.\n\n1162\n00:56:10,335 --> 00:56:12,240\n>> Woo-hoo!\n>> Well, if you're like me,\n\n1163\n00:56:12,240 --> 00:56:16,036\nyou've been doing manual SPN\nmanagement for the longest time, so\n\n1164\n00:56:16,036 --> 00:56:20,597\nThe fact that it's automatic, that's nice,\nbut how often do you change SPN?\n\n1165\n00:56:20,597 --> 00:56:23,290\nThat's service principle names.\n\n1166\n00:56:23,290 --> 00:56:26,200\nYou can have more than one\nname attached to a system and\n\n1167\n00:56:26,200 --> 00:56:31,660\nin the past you used the set SPN\ncommand line utility when you did it.\n\n1168\n00:56:31,660 --> 00:56:33,410\nBut this one gives you\nautomatic functionality.\n\n1169\n00:56:33,410 --> 00:56:35,940\nSo if that's something you want, great.\n\n1170\n00:56:35,940 --> 00:56:36,990\nGo to 2008 R2.\n\n1171\n00:56:36,990 --> 00:56:38,860\nBut to me it's not normally\na motivating factor.\n\n1172\n00:56:38,860 --> 00:56:42,560\nAnd if you go to the 2008\nR2 model functional level,\n\n1173\n00:56:42,560 --> 00:56:44,210\nnow you can't have 2008\ndomain controllers.\n\n1174\n00:56:44,210 --> 00:56:45,080\nThey've got to be R2.\n\n1175\n00:56:45,080 --> 00:56:48,550\nAll right, 2012 even less.\n\n1176\n00:56:48,550 --> 00:56:53,195\nGo into that 2012 and\nyou get this KDC support for\n\n1177\n00:56:53,195 --> 00:56:56,280\nclaims, and some different changes there.\n\n1178\n00:56:56,280 --> 00:57:00,880\nYou actually had KDC support for\nclaims before, this is just extending it.\n\n1179\n00:57:00,880 --> 00:57:02,410\nCompound authentication.\n\n1180\n00:57:02,410 --> 00:57:04,790\n>> Dynamic access control,\nthings like that.\n\n1181\n00:57:04,790 --> 00:57:08,800\nAnd if you're not really using that\nMight not be a reason to go to that.\n\n1182\n00:57:08,800 --> 00:57:09,540\n>> Yep.\n\n1183\n00:57:09,540 --> 00:57:12,280\nBut then in R2 they got back to\nadding some better features.\n\n1184\n00:57:12,280 --> 00:57:14,390\nYou'll some increased security.\n\n1185\n00:57:14,390 --> 00:57:14,940\nRight.\n\n1186\n00:57:14,940 --> 00:57:19,557\nAnd notice how it's using DES or\nRC4 for Kerberos preauthentication.\n\n1187\n00:57:19,557 --> 00:57:23,940\nWhich does a really week\nencryption standards right.\n\n1188\n00:57:23,940 --> 00:57:29,590\nAnd so you'll see here it says protected\nusers authenticating can no longer.\n\n1189\n00:57:29,590 --> 00:57:31,910\nIt's actually blocking those off.\n\n1190\n00:57:31,910 --> 00:57:33,580\nFor those users, for protected users.\n\n1191\n00:57:33,580 --> 00:57:38,730\nSo increasing security, we get\nauthentication policies and policy silos.\n\n1192\n00:57:38,730 --> 00:57:41,850\nNew features that if you need those,\n\n1193\n00:57:41,850 --> 00:57:44,680\nif you need to set up\nspecial authentication silos.\n\n1194\n00:57:44,680 --> 00:57:49,290\nThis is really dealing with\nthose managed services accounts.\n\n1195\n00:57:49,290 --> 00:57:50,590\nThat if you're gonna need that,\n\n1196\n00:57:50,590 --> 00:57:53,640\nYou'll want to bump up that\n2012 R2 function level.\n\n1197\n00:57:53,640 --> 00:57:54,810\nNotice on the right side,\n\n1198\n00:57:54,810 --> 00:57:57,680\nwhat domain controllers can you\nhave when you go to 2012 R2?\n\n1199\n00:57:57,680 --> 00:57:59,160\nJust 2012 R2.\n\n1200\n00:57:59,160 --> 00:58:01,080\nThat list gets smaller and\n\n1201\n00:58:01,080 --> 00:58:04,650\nsmaller with each level as it\nprunes off the previous versions.\n\n1202\n00:58:04,650 --> 00:58:09,030\nSo a lot of people are not in\na hurry to get to that newest one.\n\n1203\n00:58:09,030 --> 00:58:09,850\nBut on the exam,\n\n1204\n00:58:09,850 --> 00:58:13,220\nif they're talking about you needing a\nparticular feature, it's gonna be part of\n\n1205\n00:58:13,220 --> 00:58:16,360\nyour design that you'll need to go to\na certain function level to support that.\n\n1206\n00:58:16,360 --> 00:58:17,290\n>> An easy step to forget,\n\n1207\n00:58:17,290 --> 00:58:19,470\nbecause you're really worried about\nimplementing that feature and\n\n1208\n00:58:19,470 --> 00:58:22,580\nyou're going through and you're dragging\nall the steps in the right order.\n\n1209\n00:58:22,580 --> 00:58:23,860\nYou forgot the most important one.\n\n1210\n00:58:23,860 --> 00:58:26,548\nYou can't do any of it if you didn't\nraise that functional level first.\n\n1211\n00:58:26,548 --> 00:58:31,163\n>> Yup, all right, so,\nthat's our domain functional levels.\n\n1212\n00:58:31,163 --> 00:58:33,590\nWe'll take a look at the forest\nfunctional levels in just a moment.\n\n1213\n00:58:33,590 --> 00:58:36,130\nWe're looking at the clock,\nit's a good spot for us to stop.\n\n1214\n00:58:36,130 --> 00:58:39,730\nSo, we'll take a pause right here and\ncatch some breaths.\n\n1215\n00:58:39,730 --> 00:58:42,715\nWhen we get back we'll take a look\nat forest functional levels, so\n\n1216\n00:58:42,715 --> 00:58:45,896\nstay tuned we'll be back in a few.\n\n1217\n00:58:45,896 --> 00:58:53,440\n[NOISE] All right, welcome back everybody.\n\n1218\n00:58:53,440 --> 00:58:56,710\nSo before the break we were talking\nabout domain functional levels.\n\n1219\n00:58:56,710 --> 00:58:59,970\nAnd one thing that's really easy to forget\nis that you've got a domain functional\n\n1220\n00:58:59,970 --> 00:59:03,510\nlevel and\nyou've got a forest functional level.\n\n1221\n00:59:03,510 --> 00:59:06,190\nAnd just because you've\nbeen raising your domain\n\n1222\n00:59:06,190 --> 00:59:08,170\ndoesn't mean the forest is at that level.\n\n1223\n00:59:08,170 --> 00:59:12,530\nSo you might have one domain that's at a\nWindow's server 2012 functional level and\n\n1224\n00:59:12,530 --> 00:59:14,660\nonly has 2012 domain controllers.\n\n1225\n00:59:14,660 --> 00:59:18,670\nMeanwhile you've got another domain that's\nstill the 2008 functional level and\n\n1226\n00:59:18,670 --> 00:59:20,530\nhas 2008 domain controllers.\n\n1227\n00:59:20,530 --> 00:59:25,070\nSo that's almost a reason to have\nmultiple domains if you need that kind of\n\n1228\n00:59:25,070 --> 00:59:26,930\nseparation you could do that.\n\n1229\n00:59:26,930 --> 00:59:29,790\nBut just keep in mind\nas you raise one domain\n\n1230\n00:59:29,790 --> 00:59:33,760\nit doesn't effect the other domains,\neach domain is tracking independently.\n\n1231\n00:59:33,760 --> 00:59:38,720\nBut the forest functional level,\nthat effects all of the domains.\n\n1232\n00:59:38,720 --> 00:59:42,500\nSo prior to upgrading your forest\nfunctional level, you've got to make sure\n\n1233\n00:59:42,500 --> 00:59:46,270\nthat the domain controllers in all\nof your domains, have been upgraded\n\n1234\n00:59:46,270 --> 00:59:50,190\nto the operating system that's required\nby that functional level, all right?\n\n1235\n00:59:50,190 --> 00:59:53,000\nDomains are tied to just the domain,\nforest is every domain.\n\n1236\n00:59:53,000 --> 00:59:55,740\n>> Exactly, yeah so your domain\nfunctional level's determined by\n\n1237\n00:59:55,740 --> 00:59:59,760\nthe lowest version of your operating\nsystem on your domain controllers,\n\n1238\n00:59:59,760 --> 01:00:04,035\nyour forest functional level is limited\nby your lowest domain functional level.\n\n1239\n01:00:04,035 --> 01:00:05,650\n>> Mm-hm.\n\n1240\n01:00:05,650 --> 01:00:08,310\nSo when we want to bump up\nour forest functional level,\n\n1241\n01:00:08,310 --> 01:00:10,560\nthis is an even bigger decision.\n\n1242\n01:00:10,560 --> 01:00:12,680\nSomething we're gonna be\neven more hesitant to do.\n\n1243\n01:00:12,680 --> 01:00:13,880\n>> Absolutely.\n>> Because, you know,\n\n1244\n01:00:13,880 --> 01:00:16,030\nyou can't undo it, right?\n\n1245\n01:00:16,030 --> 01:00:18,730\nSo before doing this we need to make\nsure the features that we're selecting\n\n1246\n01:00:18,730 --> 01:00:20,540\nare something that we absolutely need.\n\n1247\n01:00:20,540 --> 01:00:23,230\nLet's take a look at those\nforest functional levels.\n\n1248\n01:00:23,230 --> 01:00:26,350\nJust like the domain levels we\nstart with with Windows 2000 and\n\n1249\n01:00:26,350 --> 01:00:31,610\nat the Windows 2000 functional level we\ndidn't really get much more in there.\n\n1250\n01:00:31,610 --> 01:00:36,580\nYou know I was going to try and zoom in\nbut it's doing this crazy screen thing.\n\n1251\n01:00:36,580 --> 01:00:37,810\nAll right we'll leave it be.\n\n1252\n01:00:37,810 --> 01:00:40,910\nSo in Windows 2000 you have your normal\n\n1253\n01:00:40,910 --> 01:00:43,730\nactive directory functions\nnothing to special there.\n\n1254\n01:00:43,730 --> 01:00:47,589\nIn Windows server 2003 that's\nwhere we got forest trusts.\n\n1255\n01:00:47,589 --> 01:00:49,371\nYou know we mentioned that earlier, so\n\n1256\n01:00:49,371 --> 01:00:53,810\nif you want forest trusts you've gotta be\nat Windows server 2003 functional level.\n\n1257\n01:00:53,810 --> 01:00:55,040\nYou should probably be there anyway.\n\n1258\n01:00:55,040 --> 01:00:57,810\nWindows 2000 is no longer\nsupported by Microsoft, so\n\n1259\n01:00:57,810 --> 01:01:00,390\nif you're running Windows\n2000 you're in a bad spot.\n\n1260\n01:01:00,390 --> 01:01:03,060\nSo, you should at least be at 2003.\n\n1261\n01:01:03,060 --> 01:01:05,500\nAnd actually on 2003 they\nstill support 2003 R2.\n\n1262\n01:01:05,500 --> 01:01:08,210\nI don't think they support base 2003,\ndo they?\n\n1263\n01:01:08,210 --> 01:01:10,660\n>> I'm not sure on that.\n\n1264\n01:01:10,660 --> 01:01:13,570\n>> I guess it doesn't really matter cuz\nthe functional level doesn't differentiate\n\n1265\n01:01:13,570 --> 01:01:15,920\nbetween R2 or not with 2003.\n\n1266\n01:01:15,920 --> 01:01:19,150\nBut forest trusts, domain renames, Right?\n\n1267\n01:01:19,150 --> 01:01:20,370\nThose are big deals.\n\n1268\n01:01:20,370 --> 01:01:22,940\nRead only domain controller functionality.\n\n1269\n01:01:22,940 --> 01:01:26,310\nThat was new in the 2003 functional level.\n\n1270\n01:01:26,310 --> 01:01:27,090\nThis one.\n\n1271\n01:01:27,090 --> 01:01:29,820\nImproved knowledge consistency checker.\n\n1272\n01:01:29,820 --> 01:01:33,520\nThere's actually some\nbugs in the original KCC\n\n1273\n01:01:33,520 --> 01:01:37,310\nthat would make it choke\nunder large environments.\n\n1274\n01:01:37,310 --> 01:01:39,530\nIt was actually, if you had more\nthan 1500 domain controllers.\n\n1275\n01:01:39,530 --> 01:01:40,370\n>> Right.\n\n1276\n01:01:40,370 --> 01:01:41,215\n>> Most of us don't.\n\n1277\n01:01:41,215 --> 01:01:44,210\n[LAUGH] But if you did,\nthere were some quirks, and\n\n1278\n01:01:44,210 --> 01:01:46,739\nthe 2003 functional level solved that.\n\n1279\n01:01:46,739 --> 01:01:52,580\n[COUGH] We've got some other things in\nhere that are a little bit less prominent.\n\n1280\n01:01:52,580 --> 01:01:57,420\nYou know, dynamic auxiliary classes for\ncreating classes inside of your schema.\n\n1281\n01:01:57,420 --> 01:02:02,440\nThe inetOrgPerson value which helped\nout a lot with exchange migrations.\n\n1282\n01:02:02,440 --> 01:02:05,410\nIf you're not running exchange\nyou don't care about that.\n\n1283\n01:02:05,410 --> 01:02:08,280\nOther things,\njust roll based authorization,\n\n1284\n01:02:08,280 --> 01:02:10,910\ndeactivation of OIDs and stuff.\n\n1285\n01:02:10,910 --> 01:02:16,110\nThese were lesser needed features, but\nthe big ones were these guys up here.\n\n1286\n01:02:16,110 --> 01:02:17,500\nDomain rename.\n\n1287\n01:02:17,500 --> 01:02:19,800\nAnd read-only domain controller.\n\n1288\n01:02:19,800 --> 01:02:21,610\nThere was also a little bit on DFS.\n\n1289\n01:02:21,610 --> 01:02:23,940\nDFS Namespace is getting\na bit of a bump there.\n\n1290\n01:02:23,940 --> 01:02:25,450\n>> Yeah, you get that new 2008 mode.\n\n1291\n01:02:25,450 --> 01:02:26,685\nIt just made it more scalable.\n\n1292\n01:02:26,685 --> 01:02:28,080\n>> Mm-hm.\n\n1293\n01:02:28,080 --> 01:02:32,150\nSo, those were some reasons to go to\nthe 2003 functional level on your forest,\n\n1294\n01:02:32,150 --> 01:02:34,450\nand that's where a lot of people stopped.\n\n1295\n01:02:34,450 --> 01:02:35,510\nBecause, look at 2008.\n\n1296\n01:02:35,510 --> 01:02:39,390\nWhat does the 2008 forest\nfunctional level add?\n\n1297\n01:02:39,390 --> 01:02:40,550\nNothing.\n>> Absolutely nothing.\n\n1298\n01:02:40,550 --> 01:02:41,130\n>> Absolutely nothing.\n\n1299\n01:02:41,130 --> 01:02:43,310\nIt says all the features\nwere available in 2003.\n\n1300\n01:02:43,310 --> 01:02:47,720\nSo was there any reason to go to the 2008\nfunctional level on your forest?\n\n1301\n01:02:47,720 --> 01:02:49,370\nThe only reason was\nwhat Mike said earlier.\n\n1302\n01:02:49,370 --> 01:02:53,360\nIf you wanted to absolutely prevent\n2003 domain controllers from\n\n1303\n01:02:53,360 --> 01:02:56,230\nbeing on your forest,\nyou'd go to that 2008 functional level.\n\n1304\n01:02:56,230 --> 01:03:02,950\nSo notice It doesn't add any features but\n2003 is out of the list of supported OS's.\n\n1305\n01:03:02,950 --> 01:03:03,860\n>> And you know what's going to happen?\n\n1306\n01:03:03,860 --> 01:03:06,631\nAs soon as you do that upgrade,\nyou got no new features out of it and\n\n1307\n01:03:06,631 --> 01:03:08,391\nthen they're going to come to you and\nthey're going to say.\n\n1308\n01:03:08,391 --> 01:03:10,030\nYeah, we're gonna plan\non doing this merger and\n\n1309\n01:03:10,030 --> 01:03:11,800\nwe're gonna bring their\nnetworks into ours.\n\n1310\n01:03:11,800 --> 01:03:14,140\nAnd now you're gonna have to\nexplain to the boss, yeah,\n\n1311\n01:03:14,140 --> 01:03:16,870\nwe're gonna have to upgrade all of their\ndomain controllers before this can happen.\n\n1312\n01:03:18,820 --> 01:03:23,690\n>> Now they didn't do it with 2003,\nbut in 2008 they did differentiate\n\n1313\n01:03:23,690 --> 01:03:29,230\nbetween the RTM2008 and\nthe R2, the updated version.\n\n1314\n01:03:29,230 --> 01:03:32,510\nSo the R2 functional level\ndoes add a little bit more,\n\n1315\n01:03:32,510 --> 01:03:33,940\none that Mike, you mentioned.\n\n1316\n01:03:33,940 --> 01:03:36,150\nThe active directory recycle bin.\n\n1317\n01:03:36,150 --> 01:03:38,770\nIf you want to take advantage of that\nrecycle bin you'll have to bump up\n\n1318\n01:03:38,770 --> 01:03:39,840\nto the 2008 R2 mode.\n\n1319\n01:03:39,840 --> 01:03:43,610\n2008 domain controllers are not supported,\nright.\n\n1320\n01:03:43,610 --> 01:03:47,950\nWe've got to make sure that we\nget all of our DCs up to 2008 R2.\n\n1321\n01:03:47,950 --> 01:03:50,750\nAll right, other things.\n\n1322\n01:03:50,750 --> 01:03:52,920\nReally that's about it, right?\n\n1323\n01:03:52,920 --> 01:03:55,385\n>> Yeah, the rest of them don't\nreally bring a whole lot.\n\n1324\n01:03:55,385 --> 01:03:59,254\n>> Yeah, 2012, it tells you here all\nthe features are available in 2008 R2.\n\n1325\n01:03:59,254 --> 01:04:03,890\nAnd the new Windows Server 2012 R2 mode,\nwell it's all there in 2012.\n\n1326\n01:04:03,890 --> 01:04:06,400\nNo additional features, right.\n\n1327\n01:04:06,400 --> 01:04:07,295\nThat's what it's saying.\n\n1328\n01:04:07,295 --> 01:04:12,136\nSo that's why a lot of people are not\non the highest functional level.\n\n1329\n01:04:12,136 --> 01:04:13,378\nYou can't undo it.\n\n1330\n01:04:13,378 --> 01:04:16,384\nAnd if you don't get any benefit from it,\nthe only reason to do it,\n\n1331\n01:04:16,384 --> 01:04:19,140\nwould be to prevent lower version\nDCs from being brought up.\n\n1332\n01:04:19,140 --> 01:04:19,720\n>> Exactly.\n\n1333\n01:04:19,720 --> 01:04:22,070\nAnd you can still raise your domain\nfunctional level up to that.\n\n1334\n01:04:22,070 --> 01:04:25,318\nYou can just leave\nthe forest at 2008 R2 mode.\n\n1335\n01:04:25,318 --> 01:04:26,110\n>> Yep.\nAll right,\n\n1336\n01:04:26,110 --> 01:04:29,560\nso, those are some of the different\nlevels that we might be at.\n\n1337\n01:04:30,590 --> 01:04:31,650\nRemember them for the exam.\n\n1338\n01:04:31,650 --> 01:04:33,410\nEspecially the big features.\n\n1339\n01:04:33,410 --> 01:04:35,095\nThose are the ones that\nyou're going to see.\n\n1340\n01:04:35,095 --> 01:04:36,790\n>> Mm-hm.\n>> As part of your active directory\n\n1341\n01:04:36,790 --> 01:04:41,180\ndesign, they're requiring you to have\nthe Active Directory Recycle Bin, right?\n\n1342\n01:04:41,180 --> 01:04:42,360\nYou wanna take advantage of that feature.\n\n1343\n01:04:42,360 --> 01:04:43,520\nSo what do you need to do?\n\n1344\n01:04:43,520 --> 01:04:46,950\nWell, the Active Directory Recycle Bin\nwas added here in the 2008 R2 mode.\n\n1345\n01:04:46,950 --> 01:04:51,700\nSo you'll need to upgrade any\ndomain controllers that are older\n\n1346\n01:04:51,700 --> 01:04:54,940\nthan 2008 R2 to at least 2008 R2,\npreferably 2012, right?\n\n1347\n01:04:56,460 --> 01:04:58,600\nThat's the forest functional level.\n\n1348\n01:04:58,600 --> 01:05:01,040\nIf you're forest functional\nlevel is 2008 R2,\n\n1349\n01:05:01,040 --> 01:05:04,730\nall of your domain function levels\nneed to at least be 2008 R2.\n\n1350\n01:05:04,730 --> 01:05:08,320\nIt's what Mike was saying, you know,\nthat lowest domain function level.\n\n1351\n01:05:08,320 --> 01:05:10,270\nSo we've gotta get all\nof those upgraded too.\n\n1352\n01:05:10,270 --> 01:05:11,740\nSo that's part of the process.\n\n1353\n01:05:11,740 --> 01:05:13,190\nYou raise your domains first.\n\n1354\n01:05:13,190 --> 01:05:15,100\nYou raise your forests second,\nand then [INAUDIBLE]\n\n1355\n01:05:15,100 --> 01:05:16,060\n>> And it'll tell you.\n\n1356\n01:05:16,060 --> 01:05:19,550\nYou know, if you try to raise that domain\nlevel or that forest functional level, and\n\n1357\n01:05:19,550 --> 01:05:22,660\nyou've still gotta domain out there\nthat's in domain 2003 functional level,\n\n1358\n01:05:22,660 --> 01:05:23,890\nthat won't let you do it.\n\n1359\n01:05:23,890 --> 01:05:25,270\nSo it's going to fail.\n\n1360\n01:05:25,270 --> 01:05:28,520\nAnd then you go, That's right, I forgot\nabout that domain go to your upgrades.\n\n1361\n01:05:28,520 --> 01:05:30,520\nOr maybe you've- or\nyour servers are already at 2008 R2.\n\n1362\n01:05:30,520 --> 01:05:34,390\nSo you're trying to raise the forest and\nyou can't figure out why it's not letting\n\n1363\n01:05:34,390 --> 01:05:37,050\nyou, it's because you didn't raise\nthe domain function level first.\n\n1364\n01:05:37,050 --> 01:05:37,930\nJust because they're running,\n\n1365\n01:05:37,930 --> 01:05:42,030\nas Don said earlier, just because they're\nrunning 2008 R2, doesn't mean your domain\n\n1366\n01:05:42,030 --> 01:05:44,530\nfunctional level is going to\nautomatically jump up to that level.\n\n1367\n01:05:44,530 --> 01:05:45,670\nSo you've got to do both.\n\n1368\n01:05:45,670 --> 01:05:49,380\nAnd you've got to let that replicator out,\nbefore we can start updating that forest.\n\n1369\n01:05:50,820 --> 01:05:53,630\n>> So that brings us to\nthe subject of upgrades, right?\n\n1370\n01:05:53,630 --> 01:05:55,610\nIf I'm going to raise\nmy functional level for\n\n1371\n01:05:55,610 --> 01:05:58,580\nsome particular need, I got to get\nmy domain controllers upgraded.\n\n1372\n01:05:58,580 --> 01:06:01,980\nSo what is the upgrade process?\n\n1373\n01:06:01,980 --> 01:06:03,630\nFortunately upgrades\nare pretty straightforward.\n\n1374\n01:06:03,630 --> 01:06:06,180\nWell, I guess, it kinda depends\non how you want to go about it.\n\n1375\n01:06:06,180 --> 01:06:07,230\n>> Right.\n>> Because remember,\n\n1376\n01:06:07,230 --> 01:06:11,870\nthere is a difference in Microsoft land\nbetween doing an upgrade and a migration.\n\n1377\n01:06:11,870 --> 01:06:12,750\n>> Migration exactly.\n\n1378\n01:06:12,750 --> 01:06:15,430\n>> And Microsoft always recommends\na migration over an upgrade,\n\n1379\n01:06:15,430 --> 01:06:16,218\nif you can do it.\n\n1380\n01:06:16,218 --> 01:06:17,420\nRight?\nSo what's the difference?\n\n1381\n01:06:17,420 --> 01:06:19,200\nWell, when we talk about an upgrade,\n\n1382\n01:06:19,200 --> 01:06:22,700\nwhat we're really talking\nabout is an in place upgrade.\n\n1383\n01:06:22,700 --> 01:06:25,200\nYou've got a server running\nWindows server 2008.\n\n1384\n01:06:25,200 --> 01:06:27,010\nYou take your 2012 DVD.\n\n1385\n01:06:27,010 --> 01:06:30,400\nYou pop it in the drive, and\na little wizard pops up says,\n\n1386\n01:06:30,400 --> 01:06:31,380\ndo you want to upgrade?\n\n1387\n01:06:31,380 --> 01:06:33,520\nAnd it runs you through the upgrade right?\n\n1388\n01:06:33,520 --> 01:06:36,260\nIt upgrades that server in place.\n\n1389\n01:06:36,260 --> 01:06:40,120\nAnd when it boots back up, it's got the\nsame name, same IP, same configuration.\n\n1390\n01:06:40,120 --> 01:06:42,960\nBut running the newer operating system,\nall right?\n\n1391\n01:06:42,960 --> 01:06:45,450\nIt's great, but it's limited.\n\n1392\n01:06:45,450 --> 01:06:50,215\nYou have to have, like a lot of times,\nyou can't skip OS versions.\n\n1393\n01:06:50,215 --> 01:06:52,730\n>> Mm-hm.\n>> So if you're running Windows Server\n\n1394\n01:06:52,730 --> 01:06:56,310\n2003, you might not be able to go\ndirectly to Windows Server 2012 R2.\n\n1395\n01:06:56,310 --> 01:07:00,640\n>> Now, all of a sudden, you've got to\ndo two upgrades to get to the 2012 R2.\n\n1396\n01:07:00,640 --> 01:07:04,210\n>> And the thing I've always said was,\nif you had a problem under the old OS,\n\n1397\n01:07:04,210 --> 01:07:06,522\nwhen you upgrade,\nyou're just upgrading your problem, right?\n\n1398\n01:07:06,522 --> 01:07:08,560\n>> Exactly.\n[LAUGH] >> It's gonna follow you along.\n\n1399\n01:07:08,560 --> 01:07:12,420\nSo you get a lot of legacy files and\nstuff left over.\n\n1400\n01:07:12,420 --> 01:07:14,460\nFile permissions that aren't updated.\n\n1401\n01:07:14,460 --> 01:07:17,650\nYou know, things have changed,\nsince those older versions of the OS.\n\n1402\n01:07:17,650 --> 01:07:18,570\nThe other thing is.\n\n1403\n01:07:18,570 --> 01:07:20,330\nIf you have a domain controller\nthat running Windows server 2003.\n\n1404\n01:07:20,330 --> 01:07:24,910\nYou probably have a pretty old domain\ncontroller as far as physical hardware.\n\n1405\n01:07:24,910 --> 01:07:27,700\nSo you may not want to\ndo an in place upgrade.\n\n1406\n01:07:27,700 --> 01:07:30,420\nInstead, you'll probably do a migration.\n\n1407\n01:07:30,420 --> 01:07:34,920\nAnd that's where you bring up an all\nnew domain controllers side by side.\n\n1408\n01:07:34,920 --> 01:07:38,340\nSo you've got that 2003 domain\ncontroller sitting there or 2008,\n\n1409\n01:07:38,340 --> 01:07:42,640\nand you bring up this nice shiny new 2012\none that's sitting right next to it.\n\n1410\n01:07:42,640 --> 01:07:44,180\nAnd they're both running at the same time.\n\n1411\n01:07:44,180 --> 01:07:47,090\nYou transfer your\nresponsibilities to the new one.\n\n1412\n01:07:47,090 --> 01:07:50,240\nAnd you decommission the old one,\nchuck it in the trash.\n\n1413\n01:07:50,240 --> 01:07:52,000\nWell, you know, you sanitize it first,\n>> [LAUGH]\n\n1414\n01:07:52,000 --> 01:07:53,090\n>> And then chuck it in the trash.\n\n1415\n01:07:53,090 --> 01:07:54,910\n>> And recycle it he means,\nthat what he means recycle it.\n\n1416\n01:07:54,910 --> 01:07:56,500\n>> Well you've got to get\nyour data off of there.\n\n1417\n01:07:56,500 --> 01:07:59,008\nYou don't want somebody dumpster\ndiving and pulling your ID.\n\n1418\n01:07:59,008 --> 01:08:01,610\n>> Definitely\n>> [LAUGH] That would be disastrous.\n\n1419\n01:08:01,610 --> 01:08:03,258\nThat's the kind of thing, well nevermind.\n\n1420\n01:08:03,258 --> 01:08:07,380\n[LAUGH] I was gonna say, that's the kind\nof thing that our government would do.\n\n1421\n01:08:07,380 --> 01:08:09,750\nYou know? [LAUGH] >> Pretty much,\npretty much.\n\n1422\n01:08:09,750 --> 01:08:11,410\n>> But yeah so.\n\n1423\n01:08:11,410 --> 01:08:16,160\nSo, you've got a, a lot of steps\ninvolved with doing an upgrade.\n\n1424\n01:08:16,160 --> 01:08:18,880\nAnd another thing is when\nyou start to do an upgrade,\n\n1425\n01:08:18,880 --> 01:08:21,050\nhow do you do it without\nimpacting your users?\n\n1426\n01:08:21,050 --> 01:08:23,060\n>> Right.\n>> Because you wanna make sure that your\n\n1427\n01:08:23,060 --> 01:08:25,790\nusers have a smooth transition too.\n\n1428\n01:08:25,790 --> 01:08:30,380\nAnd if you do an in place upgrade, at a\nminimum, your sever's gotta reboot twice.\n\n1429\n01:08:30,380 --> 01:08:32,340\nIt's gonna be offline during that upgrade.\n\n1430\n01:08:33,490 --> 01:08:35,520\nIn a massive environment,\nthat's not normally a big deal,\n\n1431\n01:08:35,520 --> 01:08:37,160\ncuz you have a lot of domain controllers.\n\n1432\n01:08:37,160 --> 01:08:39,215\n>> You bring one at a time and\nkind of take it slow.\n\n1433\n01:08:39,215 --> 01:08:41,150\n>> Mm-hm.\nBut in a small environment,\n\n1434\n01:08:41,150 --> 01:08:43,440\nwhere you might only have one domain\ncontroller, that is a big deal.\n\n1435\n01:08:43,440 --> 01:08:45,740\nIt takes authentication\noffline while you do it.\n\n1436\n01:08:45,740 --> 01:08:49,030\nThe other thing is, an in place upgrade.\n\n1437\n01:08:49,030 --> 01:08:52,610\nIt's near impossible to roll\nit back if a problem happens.\n\n1438\n01:08:52,610 --> 01:08:53,200\nRight?\n\n1439\n01:08:53,200 --> 01:08:57,590\nSo, you've got to take a really good\nbackup first, then do your upgrade.\n\n1440\n01:08:57,590 --> 01:09:02,480\nAnd if something goes wrong, you just\nblow it away and restore from a backup.\n\n1441\n01:09:02,480 --> 01:09:06,070\nBut if you've got multiple domain\ncontrollers, a lot of its settings and\n\n1442\n01:09:06,070 --> 01:09:08,510\ninformation starts replicating\nin the active directory.\n\n1443\n01:09:08,510 --> 01:09:11,580\nSo even restoring from a backup becomes,\nnot possible.\n\n1444\n01:09:11,580 --> 01:09:14,127\nSo recovering from a failed\nin place upgrade of\n\n1445\n01:09:14,127 --> 01:09:18,780\na domain controller is very difficult and\nnot something that I usually choose to do.\n\n1446\n01:09:18,780 --> 01:09:21,490\n>> No.\n>> I almost always do a migration.\n\n1447\n01:09:21,490 --> 01:09:23,620\nNow the argument against\na migration was well,\n\n1448\n01:09:23,620 --> 01:09:24,880\nnow I've got to buy all new hardware.\n\n1449\n01:09:24,880 --> 01:09:26,390\nThis stinks, right?\n\n1450\n01:09:26,390 --> 01:09:30,190\nAnd that's about our virtual machine you\nmay not have the budget or resources for\n\n1451\n01:09:30,190 --> 01:09:32,300\nthat and\nyou want to use your existing hardware.\n\n1452\n01:09:32,300 --> 01:09:35,376\nGreat, but with virtual machines today,\n\n1453\n01:09:35,376 --> 01:09:38,810\nthe argument over\nhardware kinda goes away.\n\n1454\n01:09:38,810 --> 01:09:39,530\nIt's a virtual machine.\n\n1455\n01:09:39,530 --> 01:09:40,762\nYou spawn up a new virtual machine.\n\n1456\n01:09:40,762 --> 01:09:42,710\nYou can remove the old one, and so on.\n\n1457\n01:09:42,710 --> 01:09:45,020\nSo in a virtualized environment,\nthat's not so much of a big deal.\n\n1458\n01:09:45,020 --> 01:09:48,280\nBut in a physical environment,\nyou may have limited hardware resources.\n\n1459\n01:09:48,280 --> 01:09:49,600\nAnd so you've gotta plan for that.\n\n1460\n01:09:50,810 --> 01:09:54,590\nAnd what I'll typically do,\nis I'll take the old domain controller.\n\n1461\n01:09:54,590 --> 01:09:57,730\nIf I have limited hardware, right,\nand so I need to use this DC.\n\n1462\n01:09:57,730 --> 01:10:01,860\nYou always have, you should always have,\nat least two domain controllers.\n\n1463\n01:10:01,860 --> 01:10:02,550\n>> Right.\n\n1464\n01:10:02,550 --> 01:10:05,662\n>> So I'll take the domain control,\nI am going to upgrade and\n\n1465\n01:10:05,662 --> 01:10:07,130\nI will actually demote it.\n\n1466\n01:10:07,130 --> 01:10:09,870\nI will demote it so,\nit's not a domain controller anymore.\n\n1467\n01:10:09,870 --> 01:10:14,352\nThen, I effectively bring up a new\ndomain controller on that same hardware.\n\n1468\n01:10:14,352 --> 01:10:18,190\nYou know, format and reinstall and\nthen, bring it up and promote it again.\n\n1469\n01:10:18,190 --> 01:10:21,130\nThat way, if it gets messed up\nanywhere along the process,\n\n1470\n01:10:21,130 --> 01:10:24,860\nIt's not like I've got bad entries in\nthe AD, it's all tied to this new entity.\n\n1471\n01:10:24,860 --> 01:10:27,690\nI can just format it and\nre-promote it again.\n\n1472\n01:10:27,690 --> 01:10:29,680\nSo it gives you a little\nbit of a safety net there.\n\n1473\n01:10:29,680 --> 01:10:32,880\nBut you know, these are things we have\nto think about as we do the upgrade.\n\n1474\n01:10:32,880 --> 01:10:34,150\n>> Right.\n\n1475\n01:10:34,150 --> 01:10:38,940\n>> Now, for the show notes, before\nthe show, I whipped up some quick steps.\n\n1476\n01:10:38,940 --> 01:10:41,710\nIf we're doing an upgrade, right?\n\n1477\n01:10:41,710 --> 01:10:45,490\nWhen you upgrade a domain controller,\nyou're normally doing that migration.\n\n1478\n01:10:45,490 --> 01:10:46,980\nYou're normally bringing\nup that new system.\n\n1479\n01:10:46,980 --> 01:10:50,920\nBut, I went ahead and kinda threw\nin both sides of the story, right?\n\n1480\n01:10:50,920 --> 01:10:55,090\nWhat if we're running\nan all 2008 R2 environment?\n\n1481\n01:10:55,090 --> 01:10:55,610\nOkay?\n\n1482\n01:10:55,610 --> 01:10:59,100\nSo all of my domain controllers\nare Windows server 2008 r2.\n\n1483\n01:10:59,100 --> 01:11:01,250\nMy domain functional levels are 2008 r2.\n\n1484\n01:11:01,250 --> 01:11:03,591\nMy forest functional levels 2008 r2.\n\n1485\n01:11:03,591 --> 01:11:04,957\nSo I'm all in, right?\n\n1486\n01:11:04,957 --> 01:11:09,640\nAnd now, I'm bringing up my first\nWindows server 2012 r2 box, or not r2.\n\n1487\n01:11:09,640 --> 01:11:11,430\nIt doesn't matter, right?\n\n1488\n01:11:11,430 --> 01:11:14,210\nSo I'm bringing up this new version,\nall right?\n\n1489\n01:11:14,210 --> 01:11:18,200\nWell, if I'm gonna do an upgrade,\nthe first thing I need to do is,\n\n1490\n01:11:18,200 --> 01:11:21,050\nI need to make sure I've got\nthe credentials to do it, right?\n\n1491\n01:11:21,050 --> 01:11:23,830\nI need to be, well since I'm doing\nthis on a domain controller,\n\n1492\n01:11:23,830 --> 01:11:26,030\nI'm going to need to be a domain\nadmin to pull this off, all right.\n\n1493\n01:11:26,030 --> 01:11:29,350\nSo I'm going to have to have\nthe credentials to pull off this upgrade.\n\n1494\n01:11:29,350 --> 01:11:33,130\nThen, I need to look at the software and\n\n1495\n01:11:33,130 --> 01:11:37,160\nhardware on that server to determine\nwhether I can even upgrade it, right.\n\n1496\n01:11:37,160 --> 01:11:40,200\nIf it doesn't meet the minimum\nhardware requirements or\n\n1497\n01:11:40,200 --> 01:11:43,430\nif there aren't drivers available\nfrom Windows server 2012.\n\n1498\n01:11:43,430 --> 01:11:45,220\nEspecially for rave controllers.\n\n1499\n01:11:45,220 --> 01:11:47,890\nThat's your number one gotcha.\n\n1500\n01:11:47,890 --> 01:11:51,710\nIf that support is not there, I might\nnot be able to do an upgrade at all.\n\n1501\n01:11:51,710 --> 01:11:54,150\nSo I need to check that out and\nmake sure I meet those.\n\n1502\n01:11:54,150 --> 01:11:56,630\nSo that's step two and three.\n\n1503\n01:11:56,630 --> 01:11:57,980\nAnd then step four.\n\n1504\n01:11:57,980 --> 01:11:59,745\nI need to figure out my domain\ncontroller upgrade order.\n\n1505\n01:11:59,745 --> 01:12:01,278\nNow, what am I talking about there?\n\n1506\n01:12:01,278 --> 01:12:05,070\nWell, when I go to upgrade my domain\ncontrollers, if I'm doing in-place\n\n1507\n01:12:05,070 --> 01:12:08,939\nupgrades, I will more than likely want\nto upgrade all of them at some point.\n\n1508\n01:12:08,939 --> 01:12:11,517\n>> Right.\nSo what order do I do them in?\n\n1509\n01:12:11,517 --> 01:12:14,198\nAnd it does make a difference.\n\n1510\n01:12:14,198 --> 01:12:18,945\nI know in all the textbooks they\nsay that in active directory we've\n\n1511\n01:12:18,945 --> 01:12:21,290\ngot a multi-master model.\n\n1512\n01:12:21,290 --> 01:12:23,270\nRight?\nAll domain controllers are equal.\n\n1513\n01:12:23,270 --> 01:12:24,910\nBut they aren't, are they?\n\n1514\n01:12:24,910 --> 01:12:26,182\n>> Always an exception of the rule, right?\n\n1515\n01:12:26,182 --> 01:12:27,560\n[LAUGH]\n>> Yeah.\n\n1516\n01:12:27,560 --> 01:12:29,540\nSo we've got those FSMO roles.\n\n1517\n01:12:29,540 --> 01:12:32,210\n>> Exactly.\n>> Right, the flexible or floating.\n\n1518\n01:12:32,210 --> 01:12:34,200\nThey changed the definition later on.\n\n1519\n01:12:34,200 --> 01:12:39,726\nSo the floating single master operation\nrole holders, those guys right there.\n\n1520\n01:12:39,726 --> 01:12:45,153\nWe're talking about your schema master,\nyour domain naming master, your\n\n1521\n01:12:45,153 --> 01:12:49,520\nrid master, your PDC emulator, and your-\n>> Infrastructure management.\n\n1522\n01:12:49,520 --> 01:12:51,420\n>> There we go,\ninfrastructure management, so those five.\n\n1523\n01:12:52,480 --> 01:12:55,730\nYour domain controllers, you may just\nhave one that possesses all five\n\n1524\n01:12:55,730 --> 01:12:58,780\nof those of those roles or they might\nbe spread out across several servers,\n\n1525\n01:12:58,780 --> 01:13:00,160\ndepending on what you're doing, right.\n\n1526\n01:13:00,160 --> 01:13:03,080\nSo when you go to do upgrades\nthose guys are kinda special.\n\n1527\n01:13:03,080 --> 01:13:03,630\n>> Right.\n\n1528\n01:13:03,630 --> 01:13:07,380\n>> If I'm upgrading my\ndomain naming master,\n\n1529\n01:13:07,380 --> 01:13:11,175\nand I'm rebooting and doing stuff like\nthat, how does that affect my network.\n\n1530\n01:13:11,175 --> 01:13:14,160\n>> Now all of a sudden that guy\ncomes into play anytime you add or\n\n1531\n01:13:14,160 --> 01:13:15,530\nremove a domain from your forest.\n\n1532\n01:13:15,530 --> 01:13:18,670\nSo if somebody was planning on\ndoing that this afternoon and\n\n1533\n01:13:18,670 --> 01:13:22,340\nyou just took down that role holder,\nthey're not gonna be able to do that.\n\n1534\n01:13:22,340 --> 01:13:24,420\n>> So you've got two choices, all right?\n\n1535\n01:13:24,420 --> 01:13:26,510\nChoice number one,\nschedule the upgrade for\n\n1536\n01:13:26,510 --> 01:13:28,180\nthat server while nobody's adding domains.\n\n1537\n01:13:28,180 --> 01:13:30,290\nWe don't normally add\ndomains every single day, so\n\n1538\n01:13:30,290 --> 01:13:32,150\nit's hopefully not that big of a deal.\n\n1539\n01:13:32,150 --> 01:13:33,476\nThe RID master would be a better example.\n\n1540\n01:13:33,476 --> 01:13:35,186\n>> The RID master or\nthat [INAUDIBLE], yeah.\n\n1541\n01:13:35,186 --> 01:13:38,127\n>> Your PDCs, they use the rid.\n\n1542\n01:13:38,127 --> 01:13:42,353\nThe RID is the unique part of a SID, the\nsecurity identifier for a user account or\n\n1543\n01:13:42,353 --> 01:13:43,310\na group.\n\n1544\n01:13:43,310 --> 01:13:45,600\nAnd the PC generates 20 at a time.\n\n1545\n01:13:45,600 --> 01:13:49,170\nSo it'll create a pool of 20 RIDS,\nand start to draw from them.\n\n1546\n01:13:49,170 --> 01:13:53,299\nSo if you take the rid master offline,\nyou can only create 20 user accounts, or\n\n1547\n01:13:53,299 --> 01:13:57,500\n20 groups, or 10 user accounts and\n10 groups, just 20 total.\n\n1548\n01:13:57,500 --> 01:14:00,540\nSo when that 20 runs out you\ncan't create anymore accounts.\n\n1549\n01:14:00,540 --> 01:14:02,030\nThat's a big problem.\n\n1550\n01:14:02,030 --> 01:14:07,430\nSo we can schedule the upgrade of that\nRID Master or domain naming master or\n\n1551\n01:14:07,430 --> 01:14:09,990\nwhatever for a time when you know that\npeople aren't going to be creating stuff.\n\n1552\n01:14:11,450 --> 01:14:15,860\nOr you can transfer that role,\nmove the role to somebody else so\n\n1553\n01:14:15,860 --> 01:14:19,830\nthat that role is up and running while you\nupgrade the server that you're working on.\n\n1554\n01:14:19,830 --> 01:14:23,720\nSo as we plan the order of upgrades,\nwhich servers we're gonna upgrade first,\n\n1555\n01:14:23,720 --> 01:14:24,600\nthat's what we need to look at.\n\n1556\n01:14:24,600 --> 01:14:26,030\n>> Right.\n>> Where are those roles and\n\n1557\n01:14:26,030 --> 01:14:28,250\nhow are they gonna impact this?\n\n1558\n01:14:28,250 --> 01:14:33,940\nAlso you've got your schema master and\nyour domain master.\n\n1559\n01:14:33,940 --> 01:14:35,830\nThey're in the forest root.\n\n1560\n01:14:35,830 --> 01:14:39,570\nAnd so typically that's where we want to\nstart our upgrade is in the forest root.\n\n1561\n01:14:39,570 --> 01:14:41,170\nYou don't have to.\n\n1562\n01:14:41,170 --> 01:14:44,510\nYou can actually start in one of\nyour other domains in the forest.\n\n1563\n01:14:44,510 --> 01:14:47,180\nBut typically we start in that forest\nroot because that's what gives us that\n\n1564\n01:14:47,180 --> 01:14:49,400\nvisibility across the entire forest.\n\n1565\n01:14:49,400 --> 01:14:52,880\nAny kind of schema update is gonna have\nto happen in the forest group and so\n\n1566\n01:14:52,880 --> 01:14:56,040\nthat's why we normally start there,\nall right?\n\n1567\n01:14:56,040 --> 01:14:58,970\nThen, develop a test plan, all right?\n\n1568\n01:14:58,970 --> 01:15:00,070\nA lot of people don't do this.\n\n1569\n01:15:00,070 --> 01:15:03,890\nThey just throw that server right\ninto production and that's bad news.\n\n1570\n01:15:03,890 --> 01:15:06,330\nA test environment is super handy.\n\n1571\n01:15:06,330 --> 01:15:07,100\n>> Yes.\n\n1572\n01:15:07,100 --> 01:15:13,830\n>> Take a backup of at least one domain\ncontroller in every one of your domains.\n\n1573\n01:15:13,830 --> 01:15:17,730\nAnd take a backup of whoever's\ngot your FSMO roles.\n\n1574\n01:15:17,730 --> 01:15:19,790\nRestore those backups to virtual machines.\n\n1575\n01:15:19,790 --> 01:15:23,960\nCreate an isolated virtual machine\nnetwork and restore these DCs into it.\n\n1576\n01:15:23,960 --> 01:15:27,850\nSo now, you've got your active directory\ninfrastructure in an isolated virtual\n\n1577\n01:15:27,850 --> 01:15:30,840\nmachine network, and\nrun through the upgrade.\n\n1578\n01:15:30,840 --> 01:15:33,060\nThere is no substitute for\nactually seeing it happen.\n\n1579\n01:15:33,060 --> 01:15:35,904\nAnd since a lot of this stuff\nis super difficult to undo,\n\n1580\n01:15:35,904 --> 01:15:37,852\nyou wanna do it in a test environment.\n\n1581\n01:15:37,852 --> 01:15:38,560\n>> Absolutely.\n\n1582\n01:15:38,560 --> 01:15:41,510\nAnd back before we add the virtualization,\nthat was a pain.\n\n1583\n01:15:41,510 --> 01:15:44,140\nIt was a lot of equipment,\na lot of setup to get that done.\n\n1584\n01:15:44,140 --> 01:15:47,210\nBut with a virtual environment,\nthere's really no reason not to, is there?\n\n1585\n01:15:47,210 --> 01:15:48,820\nI mean you want to make sure you test it.\n\n1586\n01:15:48,820 --> 01:15:50,320\nYou don't wanna tear down\nyour production network.\n\n1587\n01:15:50,320 --> 01:15:53,140\nSo easy to do, really should be done.\n\n1588\n01:15:53,140 --> 01:15:54,550\n>> Yeah, absolutely right.\n\n1589\n01:15:54,550 --> 01:15:57,880\nYou do a test, and you'll find all\nsorts of stuff when you do the test,\n\n1590\n01:15:57,880 --> 01:15:58,470\nproblems that happen.\n\n1591\n01:15:58,470 --> 01:16:01,350\nAnd you're like, whew, thank goodness\nI didn't do that on a production box.\n\n1592\n01:16:01,350 --> 01:16:01,890\n>> Right.\n\n1593\n01:16:01,890 --> 01:16:04,970\n>> So, that's the kind of thing that\nyou'll find when you do a test.\n\n1594\n01:16:04,970 --> 01:16:06,953\nAll right.\nAnother thing.\n\n1595\n01:16:06,953 --> 01:16:10,150\nIf an in-place upgrade is supported,\n\n1596\n01:16:10,150 --> 01:16:12,990\noftentimes it'll require\na certain service pack level.\n\n1597\n01:16:12,990 --> 01:16:13,640\n>> Right.\n\n1598\n01:16:13,640 --> 01:16:15,215\n>> So to go from 2008 to 2012,\n\n1599\n01:16:15,215 --> 01:16:19,980\nyou actually need Service Pack 1 or\nhigher, right?\n\n1600\n01:16:19,980 --> 01:16:22,160\nSo you got to make sure you've already\ngot those service packs in place.\n\n1601\n01:16:22,160 --> 01:16:25,150\nAnd Microsoft's recommendation is\nnot to fixate on the minimum but\n\n1602\n01:16:25,150 --> 01:16:26,510\ndo all-\n>> Everything.\n\n1603\n01:16:26,510 --> 01:16:27,290\n>> Of the Windows updates.\n\n1604\n01:16:27,290 --> 01:16:31,890\nGet that system completely up-to-date\nbefore doing the in place upgrade.\n\n1605\n01:16:31,890 --> 01:16:32,885\nAnd I tend to agree.\n\n1606\n01:16:32,885 --> 01:16:33,760\n>> Mm-hm.\n\n1607\n01:16:33,760 --> 01:16:35,090\n>> I go a step further though.\n\n1608\n01:16:35,090 --> 01:16:35,780\nYour hardware drivers.\n\n1609\n01:16:35,780 --> 01:16:36,370\n>> Right.\n\n1610\n01:16:36,370 --> 01:16:39,430\n>> Make sure that all of your\nhardware drivers are up-to-date.\n\n1611\n01:16:39,430 --> 01:16:40,750\nThe latest version.\n\n1612\n01:16:40,750 --> 01:16:42,910\nBecause the newest versions\nwill typically support 2012 and\n\n1613\n01:16:42,910 --> 01:16:44,610\nthey'll have that functionality added.\n\n1614\n01:16:46,190 --> 01:16:47,940\nThen back up your data,\nnow notice what it says here,\n\n1615\n01:16:47,940 --> 01:16:51,920\nit doesn't say back up your server,\nback up your domain data.\n\n1616\n01:16:51,920 --> 01:16:55,130\nWhen you upgrade a domain controller it\nstarts pushing settings into the active\n\n1617\n01:16:55,130 --> 01:16:58,480\ndirectory and\nthat replicates to your other DCs, so\n\n1618\n01:16:58,480 --> 01:17:01,760\njust restoring the back up of one domain\ncontroller is not enough because the other\n\n1619\n01:17:01,760 --> 01:17:03,500\nDC's will just push\nthe changes right back to it.\n\n1620\n01:17:03,500 --> 01:17:05,292\nIt's called backfilling,\n\n1621\n01:17:05,292 --> 01:17:09,405\nwhen a DC comes up from a restore\nit asks everybody else to update.\n\n1622\n01:17:09,405 --> 01:17:10,345\nHey catch me up to speed.\n\n1623\n01:17:10,345 --> 01:17:11,735\nWhat did I miss since my back-up?\n\n1624\n01:17:11,735 --> 01:17:12,865\n>> And that's usually a good thing.\n\n1625\n01:17:12,865 --> 01:17:13,935\nWe want that to happen.\n\n1626\n01:17:13,935 --> 01:17:15,726\n>> Unless they were trying to\nmake these changes go away.\n\n1627\n01:17:15,726 --> 01:17:16,435\n>> Right.\n\n1628\n01:17:16,435 --> 01:17:18,275\n[LAUGH]\n>> Because then we'll need to do an\n\n1629\n01:17:18,275 --> 01:17:22,015\nauthoritative restore to wipe out the fact\nthat this domain controller was upgraded.\n\n1630\n01:17:22,015 --> 01:17:23,195\nThat's a pain in the butt.\n\n1631\n01:17:23,195 --> 01:17:24,545\n>> It is.\n>> We don't want to do that if we\n\n1632\n01:17:24,545 --> 01:17:25,585\ndon't have to.\n\n1633\n01:17:25,585 --> 01:17:27,992\nBut having a back-up of the active\ndirectory, that domain,\n\n1634\n01:17:27,992 --> 01:17:29,485\nthat's going to make that possible.\n\n1635\n01:17:31,190 --> 01:17:33,595\nAll right,\nthen we need to find any upgrade and\n\n1636\n01:17:33,595 --> 01:17:37,360\napplication compatibility problems\nit might have encountered.\n\n1637\n01:17:37,360 --> 01:17:41,080\nYou'll find issues with,\nhardware drivers was already mentioned,\n\n1638\n01:17:41,080 --> 01:17:42,950\nyou might have software\nmanagement drivers,\n\n1639\n01:17:42,950 --> 01:17:46,093\nlike Dell Open Manage or\nHP Insight, that kind of stuff.\n\n1640\n01:17:46,093 --> 01:17:46,600\n>> Mm-hm.\n\n1641\n01:17:46,600 --> 01:17:48,400\n>> That might have some\nproblems with the upgrade, so\n\n1642\n01:17:48,400 --> 01:17:49,720\nyou'll need to double check that.\n\n1643\n01:17:50,840 --> 01:17:55,760\nBut assuming everything's on the up and\nup, then we're ready to do the upgrade.\n\n1644\n01:17:55,760 --> 01:17:59,060\nThe first step of introducing\nany new OS is not to go and\n\n1645\n01:17:59,060 --> 01:18:03,100\ninstall the OS, but to do ADPrep, right?\n\n1646\n01:18:03,100 --> 01:18:05,070\nAnd I know we've shown\nthis in other shows, but\n\n1647\n01:18:05,070 --> 01:18:10,040\nthis is the active directory preparation\nutility, and it will prepare your forest\n\n1648\n01:18:10,040 --> 01:18:14,940\nand your domains to possess domain\ncontrollers of that newer version OS.\n\n1649\n01:18:14,940 --> 01:18:20,260\nYou can have member servers of that new OS\nwithout preparing the active directory.\n\n1650\n01:18:20,260 --> 01:18:22,768\nBut domain controllers,\nthat's what ADPrep does.\n\n1651\n01:18:22,768 --> 01:18:23,601\nAnd you've got to do it.\n\n1652\n01:18:23,601 --> 01:18:28,527\nIf you're a 2008 R2 environment and you're\nabout to bring your first 2012 server,\n\n1653\n01:18:28,527 --> 01:18:31,019\nyou need to get ADPrep\nfrom the 2012 disk and\n\n1654\n01:18:31,019 --> 01:18:34,258\nrun it on one of your 2008 domain\ncontrollers so that it can\n\n1655\n01:18:34,258 --> 01:18:37,100\nprepare the forest and get it up to-\n>> It's really all about getting that\n\n1656\n01:18:37,100 --> 01:18:37,700\nschema ready.\n\n1657\n01:18:37,700 --> 01:18:40,694\nRight?\nGetting that schema updated with new\n\n1658\n01:18:40,694 --> 01:18:46,185\nclasses and attributes that 2012 is\ngonna need or want to see there.\n\n1659\n01:18:46,185 --> 01:18:49,083\nAs you said, there's the ADPrep,\nDomain prep,\n\n1660\n01:18:49,083 --> 01:18:53,775\nthere's the forest prep we run first,\nthen we run the ADPrep, domain prep, and\n\n1661\n01:18:53,775 --> 01:18:56,060\nthen you can run that ADPrep, GPPrep.\n\n1662\n01:18:56,060 --> 01:18:58,643\nNow the cool thing about 2012,\nis it actually does that for us.\n\n1663\n01:18:58,643 --> 01:19:01,740\nThere used to be a separate\nstep that we would have to do.\n\n1664\n01:19:01,740 --> 01:19:05,800\nYou had to go get it and to do the forest\nprep, you have to be an enterprise admin,\n\n1665\n01:19:05,800 --> 01:19:09,650\nbecause you're modifying the schema,\nwhich is a forest wide thing.\n\n1666\n01:19:09,650 --> 01:19:14,280\nSo if I'm a domain admin in my domain and\nI want to bring up this\n\n1667\n01:19:14,280 --> 01:19:18,610\nnew 2012 server, I have to be in\nthe enterprise admins group to do that or\n\n1668\n01:19:18,610 --> 01:19:21,780\nI need to get an enterprise\nadmin to manually run it.\n\n1669\n01:19:21,780 --> 01:19:23,250\nBecause, like I said, 2012 will do it for\n\n1670\n01:19:23,250 --> 01:19:26,290\nyou, assuming you're logged on\nwith the appropriate credentials.\n\n1671\n01:19:26,290 --> 01:19:29,726\nOtherwise you've gotta get\nthe enterprise admin to do that first.\n\n1672\n01:19:29,726 --> 01:19:32,435\nThen you can go and\nyou can install your 2012 R2.\n\n1673\n01:19:32,435 --> 01:19:36,281\n>> Yep, and then I kind of left to step\nout, or implied it, or whatever, but\n\n1674\n01:19:36,281 --> 01:19:40,563\nyou've really got, you know install,\noh no, we're doing in-place upgrade,\n\n1675\n01:19:40,563 --> 01:19:41,945\nthat's why I left it out.\n\n1676\n01:19:41,945 --> 01:19:45,285\nI was about to say, normally I would\ninstall a member sever at this point.\n\n1677\n01:19:45,285 --> 01:19:46,535\nAnd then we would promote it.\n\n1678\n01:19:46,535 --> 01:19:49,905\nBut in this case, we're not really\ndoing a member server and a promotion,\n\n1679\n01:19:49,905 --> 01:19:51,765\nwe're doing the upgrade, right?\n\n1680\n01:19:51,765 --> 01:19:54,752\nAnd so we would upgrade\nthe new domain controller,\n\n1681\n01:19:54,752 --> 01:19:59,490\nwe'd pop that DVD into the drive on that\ndomain controller and we do the upgrade.\n\n1682\n01:19:59,490 --> 01:20:02,220\nNow notice I'm saying pop the DVD in it.\n\n1683\n01:20:02,220 --> 01:20:04,718\nI know in other shows we have all\nthese automated scripted installs and\n\n1684\n01:20:04,718 --> 01:20:05,361\nstuff like that.\n\n1685\n01:20:05,361 --> 01:20:06,838\n>> Right.\n>> But with this one,\n\n1686\n01:20:06,838 --> 01:20:09,271\nit's a unique one-time upgrade process.\n\n1687\n01:20:09,271 --> 01:20:11,083\nIt's not something that\nyou'll typically script.\n\n1688\n01:20:11,083 --> 01:20:12,186\nRight?\nI mean you'd have to\n\n1689\n01:20:12,186 --> 01:20:14,991\nreally Know your environment\nintimately to write these scripts and\n\n1690\n01:20:14,991 --> 01:20:16,575\nit's just not worth the time to do it.\n\n1691\n01:20:16,575 --> 01:20:18,248\n>> It's really not.\nAnd for the most part,\n\n1692\n01:20:18,248 --> 01:20:22,431\nI think that setup.exe, it has to be\nrun from the existing operating system.\n\n1693\n01:20:22,431 --> 01:20:24,400\n>> Mm-hm.\n>> So it makes it a little more difficult,\n\n1694\n01:20:24,400 --> 01:20:25,960\nas you said, to try to automate that.\n\n1695\n01:20:25,960 --> 01:20:26,850\n>> Yep.\n\n1696\n01:20:26,850 --> 01:20:28,190\nSo, that's the process.\n\n1697\n01:20:28,190 --> 01:20:29,260\nWe run through the upgrade.\n\n1698\n01:20:29,260 --> 01:20:30,615\nNow hopefully the upgrade is successful.\n\n1699\n01:20:30,615 --> 01:20:32,754\nBecause we tested, we panned for\nthe eventualities.\n\n1700\n01:20:32,754 --> 01:20:34,860\n>> Mm-hm.\n>> It comes up, and you're in business.\n\n1701\n01:20:34,860 --> 01:20:39,160\nBut, if you've been in this business for a\nwhile, which most of you should have been.\n\n1702\n01:20:39,160 --> 01:20:43,165\nIf you've dealt with this you know\nthat upgrades rarely go as planned.\n\n1703\n01:20:43,165 --> 01:20:44,330\n>> Right.\n>> Anything going wrong\n\n1704\n01:20:44,330 --> 01:20:47,630\nalong the way can result in a blue\nscreen and now the upgrades dead.\n\n1705\n01:20:47,630 --> 01:20:49,650\nAnd your DC is hosed.\n\n1706\n01:20:49,650 --> 01:20:53,167\nAnd that's one of the reasons why I\ndefinitely prefer not to do in place\n\n1707\n01:20:53,167 --> 01:20:53,770\nupgrades.\n\n1708\n01:20:53,770 --> 01:20:56,500\n>> I don't even like doing upgrades\non my client operating system.\n\n1709\n01:20:56,500 --> 01:20:58,250\n>> Yeah.\n>> Not on my domain controllers.\n\n1710\n01:20:58,250 --> 01:20:59,130\nHeck no.\n[LAUGH]\n\n1711\n01:20:59,130 --> 01:21:00,820\n>> That is absolutely true.\n\n1712\n01:21:00,820 --> 01:21:04,585\nSo instead what a lot of us\nare going to do is a migration.\n\n1713\n01:21:04,585 --> 01:21:06,050\n>> Mm-hm.\n\n1714\n01:21:06,050 --> 01:21:08,540\n>> When we do a domain migration\na lot of the steps are the same.\n\n1715\n01:21:08,540 --> 01:21:09,360\nRight?\nWe've gotta\n\n1716\n01:21:09,360 --> 01:21:11,150\nmake sure we have the right credentials.\n\n1717\n01:21:11,150 --> 01:21:11,860\nOkay?\n>> Mm-hm.\n\n1718\n01:21:11,860 --> 01:21:16,110\n>> But instead of upgrading somebody else,\nwe're gonna bring in a member server.\n\n1719\n01:21:16,110 --> 01:21:18,820\nWe're gonna bring in a new server\nthat's running this new OS and\n\n1720\n01:21:18,820 --> 01:21:21,700\nyou can do it right away without prepping\nyour domain or anything like that.\n\n1721\n01:21:21,700 --> 01:21:24,120\nYou just bring up this new server\nrunning Windows Server 2012 R2, but\n\n1722\n01:21:24,120 --> 01:21:24,845\nas a member server.\n\n1723\n01:21:24,845 --> 01:21:27,030\n>> Right.\n>> Join it to the new domain,\n\n1724\n01:21:27,030 --> 01:21:29,080\nget it happy, right?\n\n1725\n01:21:29,080 --> 01:21:32,430\nOnce it's there, Then we run ADPrep, and\n\n1726\n01:21:32,430 --> 01:21:35,300\nthen we promote the new domain controller,\nright?\n\n1727\n01:21:35,300 --> 01:21:39,470\nWe have to install the AD services, and\nthen we promote the domain controller.\n\n1728\n01:21:39,470 --> 01:21:43,350\nWhen it comes up, it's now an additional\ndomain controller in our forest,\n\n1729\n01:21:43,350 --> 01:21:45,120\nand it's up and running, right?\n\n1730\n01:21:45,120 --> 01:21:45,810\n>> Yeah.\n\n1731\n01:21:45,810 --> 01:21:49,290\n>> If we want, we can then transfer\nthe FSMO roles over to it, but\n\n1732\n01:21:49,290 --> 01:21:49,870\nyou don't have to.\n\n1733\n01:21:49,870 --> 01:21:52,020\nYou can leave the FSMO Roles\nwhere they are.\n\n1734\n01:21:52,020 --> 01:21:53,910\nBut if you're getting\nrid of that old server,\n\n1735\n01:21:53,910 --> 01:21:57,140\nyou'll wanna move whatever roles\nit had to this new server.\n\n1736\n01:21:57,140 --> 01:21:58,680\nAnd then you can decommission the old one.\n\n1737\n01:21:58,680 --> 01:22:00,950\nI'm gonna add that as a step.\n\n1738\n01:22:00,950 --> 01:22:04,665\nBecause if we're migrating, you're\nnormally getting rid of the old server.\n\n1739\n01:22:04,665 --> 01:22:05,300\n>> Right.\n>> And so\n\n1740\n01:22:05,300 --> 01:22:08,975\nyou'll want to make sure that\nyou demote the old server.\n\n1741\n01:22:08,975 --> 01:22:13,526\n[CROSSTALK]\n>> Is bring up that new server,\n\n1742\n01:22:13,526 --> 01:22:16,410\nput your 2012 on it.\n\n1743\n01:22:16,410 --> 01:22:17,880\nAnd install active directory.\n\n1744\n01:22:17,880 --> 01:22:19,520\nAnd then migrate the roles over to that.\n\n1745\n01:22:19,520 --> 01:22:20,530\nNow you're good to go with that.\n\n1746\n01:22:20,530 --> 01:22:22,810\nAll your roles are sitting\non that shiny new server.\n\n1747\n01:22:22,810 --> 01:22:25,750\nNow I can do the rest of the domain\ncontrollers on my network.\n\n1748\n01:22:25,750 --> 01:22:26,700\n>> Yeah.\n\n1749\n01:22:26,700 --> 01:22:31,110\nSo that's the upgrade process when\nwe're planning for the upgrade.\n\n1750\n01:22:31,110 --> 01:22:33,100\nWe're just remembering these steps.\n\n1751\n01:22:33,100 --> 01:22:35,330\nWhat needs to be done and where.\n\n1752\n01:22:35,330 --> 01:22:38,020\nThe actual execution of it's\nnot that big of a deal.\n\n1753\n01:22:38,020 --> 01:22:42,280\nIt is a little risky especially in the\nlarger environments because these mistakes\n\n1754\n01:22:42,280 --> 01:22:44,040\nwith the active directory, they replicate.\n\n1755\n01:22:44,040 --> 01:22:45,620\nThey spread throughout the network and\n\n1756\n01:22:45,620 --> 01:22:47,731\nthat's where you can start\nto get into trouble.\n\n1757\n01:22:47,731 --> 01:22:49,772\n[CROSSTALK]\n>> That step six,\n\n1758\n01:22:49,772 --> 01:22:52,510\nmake sure you demote it properly, right.\n\n1759\n01:22:52,510 --> 01:22:54,000\nJust something to stress.\n\n1760\n01:22:54,000 --> 01:22:58,235\nDon't just unplug it and take it off\nthe network, cuz all your other domain\n\n1761\n01:22:58,235 --> 01:23:03,122\ncontroller; the KCC, the ISTG, they've\nmade replication partners with that and\n\n1762\n01:23:03,122 --> 01:23:05,297\neverybody's gonna be looking for\nit and he's just gone.\n\n1763\n01:23:05,297 --> 01:23:06,340\n>> Yeah.\n>> And that's gonna\n\n1764\n01:23:06,340 --> 01:23:09,580\nleave you with some metadata that you\"re\ngoing to have to go in there and clean up.\n\n1765\n01:23:09,580 --> 01:23:12,675\nSo make sure you run through DC,\nwell it's not dcpomo anymore.\n\n1766\n01:23:12,675 --> 01:23:15,430\nBut the same tool you used\nto install Active Directory,\n\n1767\n01:23:15,430 --> 01:23:17,960\nis the wizard that you're gonna\nuse to remove Active Directory.\n\n1768\n01:23:17,960 --> 01:23:19,858\nSo do it properly,\nthat let's the network know that, hey,\n\n1769\n01:23:19,858 --> 01:23:21,510\nthis guy's no longer domain controller.\n\n1770\n01:23:21,510 --> 01:23:25,080\nWe're not gonna need to find him for\nreplication or anything like that.\n\n1771\n01:23:25,080 --> 01:23:27,964\n>> Yeah and I do know some people that,\nespecially with virtual machines,\n\n1772\n01:23:27,964 --> 01:23:31,150\nwhen they decommission a server, they\njust shut it down and leave the VM there.\n\n1773\n01:23:31,150 --> 01:23:33,060\nIt's shut down so\nit's not eating up resources.\n\n1774\n01:23:33,060 --> 01:23:35,875\nAnd they just leave it so if they ever\nneed something they bring it back.\n\n1775\n01:23:35,875 --> 01:23:38,160\n>> Right.\n>> Well that's fine on a web server or\n\n1776\n01:23:38,160 --> 01:23:39,395\na file server or whatever.\n\n1777\n01:23:39,395 --> 01:23:39,920\n>> Mm-hm.\n>> But\n\n1778\n01:23:39,920 --> 01:23:42,010\non a domain control there's\nsome problems with that.\n\n1779\n01:23:42,010 --> 01:23:44,750\nProblem number one is just\nbecause the server is off,\n\n1780\n01:23:44,750 --> 01:23:46,835\ndoesn't mean other people aren't\ngonna try and replicate to it.\n\n1781\n01:23:46,835 --> 01:23:48,630\n>> Right.\n>> So you're gonna have replication errors\n\n1782\n01:23:48,630 --> 01:23:51,610\non all your other DCs while\nthat server is shut off.\n\n1783\n01:23:51,610 --> 01:23:55,420\nProblem number two,\na domain controller cannot be offline for\n\n1784\n01:23:55,420 --> 01:23:56,820\nmore than six months.\n\n1785\n01:23:56,820 --> 01:24:00,570\nSo if you hit six months,\nthat domain controller,\n\n1786\n01:24:00,570 --> 01:24:02,560\neven if you bring it back online,\nwill not function.\n\n1787\n01:24:02,560 --> 01:24:03,810\nIt will not bring itself back up.\n\n1788\n01:24:03,810 --> 01:24:05,790\nYou have to format and reinstall.\n\n1789\n01:24:05,790 --> 01:24:07,550\nYou can't even restore a backup.\n\n1790\n01:24:07,550 --> 01:24:10,065\nBackups of domain controllers,\nthat's another caveat right there.\n\n1791\n01:24:10,065 --> 01:24:11,360\n>> Mm-hm.\n>> If you have a backup for\n\n1792\n01:24:11,360 --> 01:24:13,810\na domain controller that's over\nsix months old, it's worthless.\n\n1793\n01:24:13,810 --> 01:24:14,945\nYou can't restore it.\n\n1794\n01:24:14,945 --> 01:24:19,130\nSo that's a limitation there,\nbecause it's just too old,\n\n1795\n01:24:19,130 --> 01:24:21,300\nit's too far back dated,\nyou just need to bring up a new DC.\n\n1796\n01:24:21,300 --> 01:24:22,835\n>> Yeah, that's that tomb stone lifetime.\n\n1797\n01:24:22,835 --> 01:24:25,710\n>> Mm-hm, so kind of little caveats there.\n\n1798\n01:24:25,710 --> 01:24:29,120\nSo when you're getting rid of that old DC,\nyou might shut it off for a day or\n\n1799\n01:24:29,120 --> 01:24:32,860\ntwo just to make sure everything is cool,\nbut you should be fine, right?\n\n1800\n01:24:32,860 --> 01:24:36,520\nYour infrastructure, you can check to make\nsure your replication is running smoothly.\n\n1801\n01:24:36,520 --> 01:24:38,520\nWhen you shut that DC off,\neven for a day or two,\n\n1802\n01:24:38,520 --> 01:24:40,330\nyou'll get a bunch of replication errors.\n\n1803\n01:24:40,330 --> 01:24:45,020\nBut then, you need to bring it back\nonline, let it fully synchronize, and\n\n1804\n01:24:45,020 --> 01:24:45,850\nthen demote it.\n\n1805\n01:24:45,850 --> 01:24:51,070\nRight, demote it properly before unjoining\nit from the domain and getting rid of it.\n\n1806\n01:24:51,070 --> 01:24:54,100\nAll right, well, Mike, that is a pretty\ngood spot for us to wrap up this show.\n\n1807\n01:24:54,100 --> 01:24:56,090\nWe've got some more stuff to talk about-\n>> Mm hm.\n\n1808\n01:24:56,090 --> 01:24:58,840\n>> On this one, which we thought\nwe could get in one show, but\n\n1809\n01:24:58,840 --> 01:25:00,360\nwe aren't even halfway through our notes.\n\n1810\n01:25:00,360 --> 01:25:00,930\n>> Yeah.\n>> So\n\n1811\n01:25:00,930 --> 01:25:05,050\nwe still have like domain restructuring\nhow we can change the structure after it's\n\n1812\n01:25:05,050 --> 01:25:06,140\nalready defined,\n>> Right.\n\n1813\n01:25:06,140 --> 01:25:07,150\n>> Which is kind of fun.\n\n1814\n01:25:07,150 --> 01:25:11,280\nSo we've got a lot of other things to talk\nabout but we'll save that for part two.\n\n1815\n01:25:11,280 --> 01:25:11,850\n>> Sounds like a plan.\n\n1816\n01:25:11,850 --> 01:25:12,995\n>> We'll end this with a cliff hanger.\n\n1817\n01:25:12,995 --> 01:25:13,922\n>> [LAUGH].\n\n1818\n01:25:13,922 --> 01:25:17,300\n>> All right well let me remind you guys\nthat if you have questions on any of this\n\n1819\n01:25:17,300 --> 01:25:18,230\nfeel free to ask.\n\n1820\n01:25:18,230 --> 01:25:22,280\nIf you go to itpro.tv/live you'll\nsee the chat box beneath the video,\n\n1821\n01:25:22,280 --> 01:25:25,490\npost your questions there we monitor and\nanswer during the show.\n\n1822\n01:25:25,490 --> 01:25:28,650\nIf you have questions after the show,\nuse our Q&A forums.\n\n1823\n01:25:28,650 --> 01:25:32,650\nYou'll see that link that says Q&A at\nthe top of the page, every page really.\n\n1824\n01:25:32,650 --> 01:25:34,940\nIt'll take you into our forums and\nyou can post your questions there.\n\n1825\n01:25:34,940 --> 01:25:37,010\nWe monitor and\nanswer that after the show, right?\n\n1826\n01:25:37,010 --> 01:25:39,960\nSo there's always an avenue for\nyou to ask your questions and\n\n1827\n01:25:39,960 --> 01:25:41,090\nget the answers you need.\n\n1828\n01:25:42,120 --> 01:25:43,960\nAll right,\nwell I hope you guys enjoyed the show.\n\n1829\n01:25:43,960 --> 01:25:45,930\nSigning off for ITProTV, I'm Don Pezet.\n\n1830\n01:25:45,930 --> 01:25:46,980\n>> And I'm Mike Rodrick.\n\n1831\n01:25:46,980 --> 01:25:47,736\n>> And we will see you next time.\n\n1832\n01:25:47,736 --> 01:25:57,736\n[MUSIC]\n\n",
          "vimeoId": "107935425"
        },
        {
          "description": null,
          "length": "5167",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/009-Planning-For-AD-Logical-sm.jpg",
          "title": "Planning For AD (Logical)",
          "transcript": "WEBVTT\n\n1\n00:00:00.006 --> 00:00:10.006\n>> [MUSIC]\n\n2\n00:00:33.638 --> 00:00:36.776\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:36.776 --> 00:00:38.880\nwelcome back to another\nepisode of IT Pro TV.\n\n4\n00:00:38.880 --> 00:00:41.760\nI'm your host Don Pizette,\nback with Mr. Mike Rodrick.\n\n5\n00:00:41.760 --> 00:00:42.580\nHow's it going, Mike?\n\n6\n00:00:42.580 --> 00:00:43.795\n>> Another day in paradise,\nDon, how you doing?\n\n7\n00:00:43.795 --> 00:00:46.370\n>> [LAUGH] Doing just swell.\n\n8\n00:00:46.370 --> 00:00:51.270\nYou know, we're moving into the later\nobjectives of this show and I gotta say,\n\n9\n00:00:51.270 --> 00:00:54.070\nhere's where we start to\nget into my favorite parts.\n\n10\n00:00:54.070 --> 00:00:57.450\nBecause when people think of MCSE's,\n\n11\n00:00:57.450 --> 00:01:01.920\nwhen people think of designing Windows\nenvironments, what do they think of?\n\n12\n00:01:01.920 --> 00:01:04.150\n>> Setting up my domain,\nsetting up my force, right?\n\n13\n00:01:04.150 --> 00:01:07.010\nGetting all my group policies ready and\nall that good stuff.\n\n14\n00:01:07.010 --> 00:01:09.620\n>> Cuz all the other stuff that we do,\nDNS,\n\n15\n00:01:09.620 --> 00:01:14.650\nDHCP, authentication,\nthose aren't really unique to Windows.\n\n16\n00:01:14.650 --> 00:01:17.200\nYou do that stuff with\nany operating system.\n\n17\n00:01:17.200 --> 00:01:21.196\n>> But the active directory, that's\nthe real complex piece that lays on top of\n\n18\n00:01:21.196 --> 00:01:23.450\nthis that builds your computer network.\n\n19\n00:01:23.450 --> 00:01:27.270\nThat is the front face of what your\nend users see when they sign in,\n\n20\n00:01:27.270 --> 00:01:29.080\nwhen they connect computers.\n\n21\n00:01:29.080 --> 00:01:31.756\nIt's all It's all powered\nby the active directory.\n\n22\n00:01:31.756 --> 00:01:36.047\nSo the last couple of objectives for this\ncertification are really my favorites,\n\n23\n00:01:36.047 --> 00:01:37.500\nall right?\n\n24\n00:01:37.500 --> 00:01:42.320\nNow they do divide it half, so we've got\nplanning for the active directory design,\n\n25\n00:01:42.320 --> 00:01:47.270\nlogical design, and planning for the\nactive directory design, physical, right?\n\n26\n00:01:47.270 --> 00:01:48.940\nWe're gonna tackle logical right here.\n\n27\n00:01:48.940 --> 00:01:52.490\nSo we're not worried so\nmuch about how many servers we have,\n\n28\n00:01:52.490 --> 00:01:54.370\nor where the physical servers are located,\nor\n\n29\n00:01:54.370 --> 00:01:56.300\neven whether we have more\nthan one physical location.\n\n30\n00:01:56.300 --> 00:01:58.530\nWe're not worried about\nthat stuff right now,\n\n31\n00:01:58.530 --> 00:02:00.545\nwe're just worried about\nthe logical design.\n\n32\n00:02:00.545 --> 00:02:05.425\nAnd in real life land, it makes sense to\nplan for the logical design first because\n\n33\n00:02:05.425 --> 00:02:08.015\nthe logical design is basically\nwhat you want to have.\n\n34\n00:02:08.015 --> 00:02:11.593\nAnd then you design your\nphysical design to provide that.\n\n35\n00:02:11.593 --> 00:02:12.495\n[CROSSTALK]\n>> Yeah,\n\n36\n00:02:12.495 --> 00:02:14.515\n[CROSSTALK] that logical design, exactly.\n\n37\n00:02:14.515 --> 00:02:17.519\n>> And you'll find where\noftentimes things don't match up,\n\n38\n00:02:17.519 --> 00:02:21.195\nthat your logical design might not\nmatch up with your physical design.\n\n39\n00:02:21.195 --> 00:02:27.370\nFor example, you might have more than one\ndomain in a single geographic location.\n\n40\n00:02:27.370 --> 00:02:32.180\nAnd so it's not a one to one\nrelationship like we'd expect,\n\n41\n00:02:32.180 --> 00:02:34.180\nand things can get a little weird.\n\n42\n00:02:35.580 --> 00:02:39.020\nSo that's what we're gonna take a look at\ntoday, is the logical design of an active\n\n43\n00:02:39.020 --> 00:02:42.880\ndirectory And we'll take a look at it\nfrom really two different perspectives.\n\n44\n00:02:42.880 --> 00:02:46.040\nOne perspective being\nthe brand new person,\n\n45\n00:02:46.040 --> 00:02:50.160\nthe person who's designing, sorry, not\na brand new person, a brand new network.\n\n46\n00:02:50.160 --> 00:02:53.108\nA brand new person should be\ndesigning your interactive directory,\n\n47\n00:02:53.108 --> 00:02:55.260\n[LAUGH] a brand new network.\n\n48\n00:02:55.260 --> 00:03:00.080\nMaybe you've been hired on as\na network admin or manager and\n\n49\n00:03:00.080 --> 00:03:04.369\nit's your job to deploy the active\ndirectory for the first time.\n\n50\n00:03:04.369 --> 00:03:07.520\n>> Yeah, they're growing and they've\ndecided hey, we're gonna move out of this\n\n51\n00:03:07.520 --> 00:03:10.000\ngroup environment and\nwe're gonna bring up a domain.\n\n52\n00:03:10.000 --> 00:03:13.020\nWe're gonna start taking advantage of\nsome of these cool things that we can get\n\n53\n00:03:13.020 --> 00:03:14.950\nby being in that domain environment.\n\n54\n00:03:14.950 --> 00:03:18.930\nWhat a fun place to be, right,where you're\nstarting from scratch and it's your baby.\n\n55\n00:03:18.930 --> 00:03:21.740\n>> It is a lot of fun,\nit's not very common.\n\n56\n00:03:21.740 --> 00:03:25.366\nMost people aren't going to be in that\nscenario where you get to design something\n\n57\n00:03:25.366 --> 00:03:26.927\nfrom scratch, not at this point.\n\n58\n00:03:26.927 --> 00:03:29.543\nIf this was 1999 or 2000,or whenever,\n\n59\n00:03:29.543 --> 00:03:33.450\nwhen active directory was first\ncoming out, different story, right?\n\n60\n00:03:33.450 --> 00:03:35.640\nYou got to design an active\ndirectory from scratch.\n\n61\n00:03:35.640 --> 00:03:39.493\nBut it's been 15 years since\nthe active directory came out, and so\n\n62\n00:03:39.493 --> 00:03:43.990\nmost organizations are going to have\nan active directory, already do.\n\n63\n00:03:43.990 --> 00:03:45.134\n>> Unless they're a start up or something.\n\n64\n00:03:45.134 --> 00:03:46.840\n>> Yeah, I guess that's possible.\n\n65\n00:03:46.840 --> 00:03:49.396\nWell yeah,\nwe kind of do that with IT Pro Tv.\n\n66\n00:03:49.396 --> 00:03:53.176\nActually wait a minute, because you see\nthe active directory stuff that we built,\n\n67\n00:03:53.176 --> 00:03:54.372\nwhich is non-existent.\n\n68\n00:03:54.372 --> 00:04:00.220\n[LAUGH] If you go out to work somewhere,\nand you are the network manager,\n\n69\n00:04:00.220 --> 00:04:03.480\ndesigner, engineer, R&D,\nwhatever it is that your role is.\n\n70\n00:04:03.480 --> 00:04:06.320\nIf you're put in charge of\na the design of an active directory,\n\n71\n00:04:06.320 --> 00:04:07.890\nit probably already exists.\n\n72\n00:04:07.890 --> 00:04:11.300\nAnd so you're not focused on creating\nsomething brand new from scratch,\n\n73\n00:04:11.300 --> 00:04:14.380\nyou're focused on working\nwith what you've got.\n\n74\n00:04:14.380 --> 00:04:17.530\nAnd depending on your resources you may or\nmay not be able to change that.\n\n75\n00:04:17.530 --> 00:04:22.070\nAnd in the old days you were really\nlimited in what changes you could even do.\n\n76\n00:04:22.070 --> 00:04:25.927\nThat's changed now, now we have a lot more\nflexibility with our active directories.\n\n77\n00:04:25.927 --> 00:04:30.549\nIt's not easy to change, but\nyou can change and that's kind of nice.\n\n78\n00:04:30.549 --> 00:04:33.690\n>> I remember back in the day, you changed\nthe name of a domain controller and\n\n79\n00:04:33.690 --> 00:04:36.170\nholy smokes you were going\nto have some major issues.\n\n80\n00:04:36.170 --> 00:04:38.129\n>> Yeah.\nI mean, it could be done but\n\n81\n00:04:38.129 --> 00:04:40.510\nyou really didn't wanna do it.\n\n82\n00:04:40.510 --> 00:04:43.630\nAnd things like changing the name of a\ndomain well you didn't even mess with that\n\n83\n00:04:43.630 --> 00:04:44.387\nin the early days.\n\n84\n00:04:44.387 --> 00:04:46.875\n>> Yeah, you make another domain and\nyou just move things.\n\n85\n00:04:46.875 --> 00:04:48.200\n[LAUGH]\n>> But\n\n86\n00:04:48.200 --> 00:04:50.880\nthere are some things we have to\nbe aware of that you can't change,\n\n87\n00:04:50.880 --> 00:04:53.320\nchanges that you put in place that\nare just going to be there forever.\n\n88\n00:04:53.320 --> 00:04:55.770\nSo there's areas we need to be really,\nreally careful,\n\n89\n00:04:55.770 --> 00:04:58.130\nlike anything having to do\nwith the schema, right?\n\n90\n00:04:58.130 --> 00:05:01.940\nBecause you can add new schema values and\nschema attributes, and\n\n91\n00:05:01.940 --> 00:05:06.200\nthings like that into your schema,\nbut you can't delete them.\n\n92\n00:05:06.200 --> 00:05:11.140\nYou can tombstone them so they show\nas inactive, but they're still there.\n\n93\n00:05:11.140 --> 00:05:14.160\nSo you do have to be careful with a lot\nof that, and at this higher level,\n\n94\n00:05:14.160 --> 00:05:18.000\nwhen we're talking about networks that\naffect tens of thousands of users,\n\n95\n00:05:18.000 --> 00:05:18.730\nthat's a big deal, right?\n\n96\n00:05:19.750 --> 00:05:23.190\nSo let's run down our laundry list,\nand really,\n\n97\n00:05:23.190 --> 00:05:27.730\nif you look at the Microsoft objectives,\nit is a laundry list of technologies.\n\n98\n00:05:27.730 --> 00:05:32.516\nBut these are things that we're gonna\nfactor into to figuring out our network\n\n99\n00:05:32.516 --> 00:05:33.580\ndesign, all right?\n\n100\n00:05:33.580 --> 00:05:39.280\nSo the first thing that I wanna start\nout with is a forest architecture.\n\n101\n00:05:39.280 --> 00:05:43.070\nWhen we build up an active directory,\nwe usually start with one thing.\n\n102\n00:05:43.070 --> 00:05:45.720\nAnd I'm gonna use VIZIO today cuz\nthey have some nice little active\n\n103\n00:05:45.720 --> 00:05:46.780\ndirectory icons.\n\n104\n00:05:46.780 --> 00:05:47.660\nAnd on the exam,\n\n105\n00:05:47.660 --> 00:05:50.530\nthese are the icons they'll use,\nso it kinda sets the expectation.\n\n106\n00:05:50.530 --> 00:05:52.870\nBut when we start to build\nan active directory,\n\n107\n00:05:52.870 --> 00:05:54.400\nwe normally start with a single domain.\n\n108\n00:05:54.400 --> 00:05:58.690\nAnd that single domain, that's where\nour user accounts are gonna be and\n\n109\n00:05:58.690 --> 00:06:00.650\nour computers and so on.\n\n110\n00:06:00.650 --> 00:06:06.410\nMost organizations will go with a single\ndomain, just one domain, and that's it.\n\n111\n00:06:06.410 --> 00:06:10.720\nAnd the main reason is convenience, right.\n\n112\n00:06:10.720 --> 00:06:14.390\n>> If you don't have a really good\nreason to start breaking out into\n\n113\n00:06:14.390 --> 00:06:17.650\nmultiple domains, or as we're going to\nget into, multiple forests, why do it?\n\n114\n00:06:17.650 --> 00:06:21.590\nYou're adding extra equipment, extra\nadministrative overhead, extra complexity.\n\n115\n00:06:21.590 --> 00:06:23.990\n>> When you've got a single domain,\n\n116\n00:06:23.990 --> 00:06:27.530\nyou don't have to worry about things like\nglobal catalogs and universal groups.\n\n117\n00:06:27.530 --> 00:06:31.730\nBecause all of your domain controllers\nhave the same domain partition,\n\n118\n00:06:31.730 --> 00:06:34.910\nthey've got the full information\nabout the domain right there.\n\n119\n00:06:34.910 --> 00:06:36.480\nRemember that in the active directory,\n\n120\n00:06:36.480 --> 00:06:40.740\nyour domain controllers are replicating\nthe active directory in partitions, right?\n\n121\n00:06:40.740 --> 00:06:43.620\nAnd there's three main partitions\nyou're gonna have in a minimum,\n\n122\n00:06:43.620 --> 00:06:45.490\nyou may well have many, many more,\n\n123\n00:06:45.490 --> 00:06:49.700\nright, like DNS adds another two,\nbut the minimum you've got three.\n\n124\n00:06:49.700 --> 00:06:53.840\nThere's the domain, the configuration and\nthe schema partition.\n\n125\n00:06:53.840 --> 00:06:56.000\nWell, the configuration and\nschema partitions,\n\n126\n00:06:56.000 --> 00:06:58.030\nthose are replicated throughout\nyour entire forest, right.\n\n127\n00:06:58.030 --> 00:06:59.936\nThey're all your domain,\nso those are the same.\n\n128\n00:06:59.936 --> 00:07:04.767\nBut the domain partition, that one is\nIs unique to each individual domain,\n\n129\n00:07:04.767 --> 00:07:08.625\nand it contains the lists of users and\ngroups in that domain.\n\n130\n00:07:08.625 --> 00:07:11.725\n>> Yeah, all your domain specific objects,\nthat's where they're going to be.\n\n131\n00:07:11.725 --> 00:07:14.795\nAnd so those only replicate to the domain\ncontrollers in that same domain.\n\n132\n00:07:14.795 --> 00:07:17.635\nBut if we've got one domain,\nthen that's all the domain controllers.\n\n133\n00:07:17.635 --> 00:07:20.945\n>> But if I've got Domain1 and\nI've got Domain2.\n\n134\n00:07:22.190 --> 00:07:26.240\nThey'll have the same configuration and\nschema partitions but\n\n135\n00:07:26.240 --> 00:07:28.200\nthey'll have different domain partitions.\n\n136\n00:07:28.200 --> 00:07:30.890\nAnd so\nto speed up authentication between them,\n\n137\n00:07:30.890 --> 00:07:33.520\nthat's where we use our global catalog and\nuniversal groups.\n\n138\n00:07:33.520 --> 00:07:36.280\nAnd you guys should already have\nexperience with using those.\n\n139\n00:07:36.280 --> 00:07:40.620\nSo in a single domain environment\nwe don't even worry about those.\n\n140\n00:07:40.620 --> 00:07:44.680\nThat whole part of the design is not\nimportant to us, it's much more simple.\n\n141\n00:07:45.920 --> 00:07:49.030\nBut why would I want to\ngo to multiple domains?\n\n142\n00:07:49.030 --> 00:07:51.240\nIf I know that multiple domains\nare gonna make things more complex,\n\n143\n00:07:51.240 --> 00:07:52.260\nwhy would I do that, right?\n\n144\n00:07:52.260 --> 00:07:55.040\nWhat is my motivating factor for doing it?\n\n145\n00:07:55.040 --> 00:07:59.544\nWell, today, there's actually not\na whole lot of motivating factors.\n\n146\n00:07:59.544 --> 00:08:01.962\nThere used to be a ton, right, and so\n\n147\n00:08:01.962 --> 00:08:06.098\nwhat you'll find is that when you\ngo out to a existing network.\n\n148\n00:08:06.098 --> 00:08:11.150\nThey may already have multiple domains\nbecause of some preexisting need, right?\n\n149\n00:08:11.150 --> 00:08:12.690\nBut if you're designing\na network from scratch,\n\n150\n00:08:12.690 --> 00:08:14.760\nyou're probably going to go\nwith a single domain, right?\n\n151\n00:08:14.760 --> 00:08:18.370\nSo what are some of the reasons\nwhy we might do multiple domains?\n\n152\n00:08:18.370 --> 00:08:20.660\n>> Could be as simple as just name spaces.\n\n153\n00:08:20.660 --> 00:08:22.880\n>> Yeah.\n>> Wanting to just separate that out or\n\n154\n00:08:22.880 --> 00:08:23.580\nsomething like that.\n\n155\n00:08:23.580 --> 00:08:26.740\nAnd depending if we're not\ndoing a contiguous name space,\n\n156\n00:08:26.740 --> 00:08:28.260\nyou might buy a company.\n\n157\n00:08:28.260 --> 00:08:32.352\nAnd you want to bring their domain into\nyour forest and you want to maintain that\n\n158\n00:08:32.352 --> 00:08:36.273\nname space, they already have brand\nrecognition or something like that.\n\n159\n00:08:36.273 --> 00:08:38.131\nCould be for administrative purposes,\n\n160\n00:08:38.131 --> 00:08:40.981\nsevering out some of\nthe administrative responsibilities.\n\n161\n00:08:40.981 --> 00:08:44.474\n>> Yeah,\nthe biggest motivating factor in the old\n\n162\n00:08:44.474 --> 00:08:45.185\ndays-\n>> Uh-huh.\n\n163\n00:08:45.185 --> 00:08:46.425\n>> Was a password policy.\n\n164\n00:08:46.425 --> 00:08:46.950\n>> Yes.\n>> Right.\n\n165\n00:08:46.950 --> 00:08:47.475\n>> [LAUGH]\n\n166\n00:08:47.475 --> 00:08:49.585\n>> That the password policy was set as\n\n167\n00:08:49.585 --> 00:08:52.585\npart of your default domain policy.\nOr it was set at the domain level,\n\n168\n00:08:52.585 --> 00:08:53.865\nyou could move it out if you wanted to\n\n169\n00:08:53.865 --> 00:08:54.885\nanother policy.\n>> Uh-huh.\n\n170\n00:08:54.885 --> 00:08:55.895\n>> But it was in the default\n\n171\n00:08:55.895 --> 00:08:59.945\ndomain policy, it was the default location\nfor it and if you wanted to have different\n\n172\n00:08:59.945 --> 00:09:01.915\nusers with different password policies-\n>> Uh-huh.\n\n173\n00:09:01.915 --> 00:09:03.975\n>> Like how often they had\nto reset their password?\n\n174\n00:09:03.975 --> 00:09:05.670\nHow complex their password had to be?\n\n175\n00:09:05.670 --> 00:09:07.840\nThe only way to do it\nwas multiple domains.\n\n176\n00:09:07.840 --> 00:09:12.000\nAnd that really stunk for\na reason to do it but that was a reason.\n\n177\n00:09:12.000 --> 00:09:15.210\n>> But you know, you wanted your typical\nend users to use maybe an eight character\n\n178\n00:09:15.210 --> 00:09:16.740\npassword, change it every day.\n\n179\n00:09:16.740 --> 00:09:17.600\nBut you want those guys,\n\n180\n00:09:17.600 --> 00:09:20.770\nthose administrative accounts\nto be required to have a 10 or\n\n181\n00:09:20.770 --> 00:09:24.260\n12 character password and change it every\ntwo weeks and you just couldn't do it.\n\n182\n00:09:24.260 --> 00:09:29.379\n>> So you might have somebody who\nhas a domain called itpro.tv,\n\n183\n00:09:29.379 --> 00:09:35.877\nand then maybe they've got a child domain\nthat is underneath it that is just for\n\n184\n00:09:35.877 --> 00:09:40.120\nthose users that have a greater need for\nsecurity.\n\n185\n00:09:40.120 --> 00:09:44.703\nSo we might have maybe our hosts\n.itpro.tv versus regular itpro.tv, and\n\n186\n00:09:44.703 --> 00:09:49.069\nthen that way if we have our regular\nemployees, they go into itpro.tv,\n\n187\n00:09:49.069 --> 00:09:53.293\nthey would get the eight character\npassword and then if you are a host,\n\n188\n00:09:53.293 --> 00:09:59.010\nyou'd go in this other domain where you'd\nhave a much stronger password requirement.\n\n189\n00:09:59.010 --> 00:10:00.740\nYou can do that, all right.\n\n190\n00:10:00.740 --> 00:10:02.680\nBut we don't have to do that anymore.\n\n191\n00:10:02.680 --> 00:10:05.080\nIt was in, what was it 2008 or 2002?\n\n192\n00:10:05.080 --> 00:10:09.500\n>> 2008 I think brought in the-\n>> Fine grain password policies.\n\n193\n00:10:09.500 --> 00:10:13.650\nSo you've got these new ways to handle\npassword policies where you can do more\n\n194\n00:10:13.650 --> 00:10:17.200\nthan one password policy\ninside of a single domain.\n\n195\n00:10:17.200 --> 00:10:18.700\nSo you're probably asking yourself,\n\n196\n00:10:18.700 --> 00:10:20.830\nwell Don, if that's not a need\nanymore why talk about it?\n\n197\n00:10:20.830 --> 00:10:25.520\nWell the reason is if an organization\nwent through the trouble to deploy two\n\n198\n00:10:25.520 --> 00:10:29.820\ndomains in the past, just because\nthat new feature is available,\n\n199\n00:10:29.820 --> 00:10:31.580\nthey may not have moved to that yet.\n\n200\n00:10:31.580 --> 00:10:35.375\nSo you may go work somewhere where they\nhave multiple domains specifically because\n\n201\n00:10:35.375 --> 00:10:38.856\nof password policies, and you can now\nlook at it and you say, you know what?\n\n202\n00:10:38.856 --> 00:10:44.535\nLet's implement some fine-grain password\npolicies up here in our main domain,\n\n203\n00:10:44.535 --> 00:10:49.639\nshift these users over to the other\ndomain and then phase this domain out,\n\n204\n00:10:49.639 --> 00:10:54.273\ngetting rid of it and going back\ndown to just a single environment.\n\n205\n00:10:54.273 --> 00:10:54.898\n>> If you can.\n\n206\n00:10:54.898 --> 00:10:56.373\nI think it's there forever now.\n\n207\n00:10:56.373 --> 00:10:59.463\n[LAUGH]\n>> You know my problem, and\n\n208\n00:10:59.463 --> 00:11:04.523\nthis is my own fault here, is my keyboard\nmappings are a little messed up.\n\n209\n00:11:04.523 --> 00:11:06.356\nAnyhow, so yeah, so\nwe'll just get rid of this.\n\n210\n00:11:06.356 --> 00:11:10.707\nWe'll just move it somewhere else.\n\n211\n00:11:10.707 --> 00:11:13.640\n[LAUGH] So we can do that,\nI don't know, it is there forever.\n\n212\n00:11:13.640 --> 00:11:14.550\nThere we go.\n\n213\n00:11:14.550 --> 00:11:16.440\nSo we can move it off.\n\n214\n00:11:16.440 --> 00:11:19.470\nBasically we have our itpro.tv and\nit's a single domain.\n\n215\n00:11:19.470 --> 00:11:21.490\nSo for most people,\nthat's going to work out great.\n\n216\n00:11:21.490 --> 00:11:24.550\nBut there are some other reasons\nthat we might go multiple domain.\n\n217\n00:11:24.550 --> 00:11:25.110\nAll right.\n\n218\n00:11:25.110 --> 00:11:27.990\nMike you mentioned separating\nadministrative duties.\n\n219\n00:11:27.990 --> 00:11:29.160\n>> Right.\n>> Right.\n\n220\n00:11:29.160 --> 00:11:35.120\nWhat if my company is, an example I like\nto use is maybe you're multinational.\n\n221\n00:11:35.120 --> 00:11:38.780\nSo you've got offices in the US,\nand you've got offices in Europe.\n\n222\n00:11:38.780 --> 00:11:44.510\nAnd you don't want the IT guys in the US\ntrying to support the machines in Europe,\n\n223\n00:11:44.510 --> 00:11:46.680\ndifferent time zones,\nit would be a whole mess.\n\n224\n00:11:46.680 --> 00:11:49.065\nSo maybe you have separate IT departments.\n\n225\n00:11:49.065 --> 00:11:52.328\nOne IT department for Europe as\na continent, and one IT department for\n\n226\n00:11:52.328 --> 00:11:53.135\nNorth America.\n\n227\n00:11:53.135 --> 00:11:58.767\nSo in that scenario, maybe I've got\nthese two different IT departments and\n\n228\n00:11:58.767 --> 00:12:01.760\nI don't want one treading on the other.\n\n229\n00:12:01.760 --> 00:12:04.838\nIf I have to make them domain admins and\nthey're in the same domain,\n\n230\n00:12:04.838 --> 00:12:08.456\nthen the European admins could mess with\nthe American admins, and vice versa,\n\n231\n00:12:08.456 --> 00:12:09.960\nor mess with the users.\n\n232\n00:12:09.960 --> 00:12:13.646\nSo we might want to separate that out and\nhave like,\n\n233\n00:12:13.646 --> 00:12:18.731\na Na.itpro.tv and auto-capitalization\nhas been driving me nuts.\n\n234\n00:12:18.731 --> 00:12:23.077\nAnd then we might have an Eu.itpro.tv,\nright,\n\n235\n00:12:23.077 --> 00:12:26.850\nto be able to handle the European users.\n\n236\n00:12:26.850 --> 00:12:30.830\nAnd now, if I make Mike a domain admin for\nNorth America and\n\n237\n00:12:30.830 --> 00:12:35.210\nI make myself a domain admin for Europe,\nwe can't step on each others toes.\n\n238\n00:12:35.210 --> 00:12:37.049\nRight?\nWe can't work with each other's stuff.\n\n239\n00:12:38.510 --> 00:12:43.365\nSo that starts to solve that problem but\nit does open up another can of worms.\n\n240\n00:12:43.365 --> 00:12:44.920\n>> Mm-hm.\n\n241\n00:12:44.920 --> 00:12:50.750\n>> The very first domain you create\nis what's called the forest root.\n\n242\n00:12:50.750 --> 00:12:55.010\nThese guys are all in a forest,\nI didn't really draw that.\n\n243\n00:12:55.010 --> 00:12:58.050\nI don't think I get a fancy container for\nforests or\n\n244\n00:12:58.050 --> 00:13:03.000\nanything but, basically,\nthese guys are all in a forest.\n\n245\n00:13:03.000 --> 00:13:03.606\nRight?\n\n246\n00:13:03.606 --> 00:13:08.898\nAnd that forest, it defines a few things.\n\n247\n00:13:08.898 --> 00:13:10.070\nA few things that are important.\n\n248\n00:13:10.070 --> 00:13:12.700\nWhere is the send a back on this thing?\n\n249\n00:13:13.750 --> 00:13:14.560\nWell, you know what?\n\n250\n00:13:14.560 --> 00:13:17.260\nThis is just gonna be my day right here.\n\n251\n00:13:17.260 --> 00:13:18.980\nMastery of Visio is gonna slow me down.\n\n252\n00:13:18.980 --> 00:13:22.110\n>> But yeah, so\nwhen you set up that first domain,\n\n253\n00:13:22.110 --> 00:13:24.200\nyou start with nothing if\nyou're starting from scratch.\n\n254\n00:13:24.200 --> 00:13:28.420\nWhen you create that first domain, you're\nalso creating a forest at the same time.\n\n255\n00:13:28.420 --> 00:13:29.230\nIt's a small forest.\n\n256\n00:13:29.230 --> 00:13:31.590\nIt's got a single tree,\na single domain in there.\n\n257\n00:13:31.590 --> 00:13:33.836\nBut that forest, as Don was saying,\n\n258\n00:13:33.836 --> 00:13:37.690\nin that forest root,\nthat's a special domain in your forest.\n\n259\n00:13:39.110 --> 00:13:42.510\nIt's gonna have a couple of groups in\nthere, that are not gonna be located in\n\n260\n00:13:42.510 --> 00:13:45.108\nany, no matter how many domains\nyou have in your forest.\n\n261\n00:13:45.108 --> 00:13:49.190\nIn that forest root is where you're gonna\nfind things like the enterprise admins.\n\n262\n00:13:49.190 --> 00:13:51.480\nIt's where you're gonna find\nthe schema admins group.\n\n263\n00:13:51.480 --> 00:13:53.760\nAnd we've talked about those\ngroups in other classes.\n\n264\n00:13:53.760 --> 00:13:56.760\nIt's also where a couple\nof the forest wide FSMOs,\n\n265\n00:13:56.760 --> 00:14:00.010\nor the flexible single master\noperations are gonna be located.\n\n266\n00:14:00.010 --> 00:14:03.860\nIt is the only place that has the writable\ncopy by default, the only place that has\n\n267\n00:14:03.860 --> 00:14:06.990\nthe writable copy of the schema\nif I wanna make changes to it.\n\n268\n00:14:06.990 --> 00:14:09.600\nSo there are few special\nthings we wanna keep in mind,\n\n269\n00:14:09.600 --> 00:14:14.050\ndealing with that forest root or\nthat first domain that we create.\n\n270\n00:14:14.050 --> 00:14:18.240\n>> Yeah, but the big deal there is going\nto be that schema admins group, and\n\n271\n00:14:18.240 --> 00:14:20.850\nthe enterprise admins group.\n\n272\n00:14:20.850 --> 00:14:25.170\nSchema changes, schema, it's the same\nacross your entire forest, so\n\n273\n00:14:25.170 --> 00:14:30.090\nif the North American domain is\nthe first one that I made, right, and\n\n274\n00:14:30.090 --> 00:14:34.080\nso that's the forest root,\nit's got the schema admins group.\n\n275\n00:14:34.080 --> 00:14:39.480\nAnd if Mike is a North American admin,\na domain admin in that domain,\n\n276\n00:14:39.480 --> 00:14:42.270\nhe could put himself in\nthe enterprise admins group, right.\n\n277\n00:14:42.270 --> 00:14:43.670\nIt will let him do it.\n\n278\n00:14:43.670 --> 00:14:45.880\nOr he could put himself in\nthe scheme admins group, right.\n\n279\n00:14:45.880 --> 00:14:47.560\nStart making changes, that breaks Europe.\n\n280\n00:14:47.560 --> 00:14:52.180\nSo my separation that I tried to create,\nI've kind of lost for\n\n281\n00:14:52.180 --> 00:14:54.910\nthat one because they can\nbe enterprise admins.\n\n282\n00:14:54.910 --> 00:14:59.420\nSo if you're breaking up the network for\nadministrative purposes,\n\n283\n00:14:59.420 --> 00:15:04.145\nit is very,\nvery common to use an empty root model.\n\n284\n00:15:04.145 --> 00:15:04.720\n>> Mm-hm.\n>> And\n\n285\n00:15:04.720 --> 00:15:07.700\nI know I've talked about empty roots\nin some of the other shows, or\n\n286\n00:15:07.700 --> 00:15:08.755\nat least I feel like I have.\n\n287\n00:15:08.755 --> 00:15:09.940\n>> Mm-hm.\n>> Sometimes I talk to myself,\n\n288\n00:15:09.940 --> 00:15:11.600\nso maybe it didn't make it out of my mind.\n\n289\n00:15:11.600 --> 00:15:13.302\n>> We were listening,\nthat was in an early episode,\n\n290\n00:15:13.302 --> 00:15:15.260\nI think this week we talked\na little bit about it.\n\n291\n00:15:15.260 --> 00:15:16.130\n>> Okay.\n>> Mm-hm.\n\n292\n00:15:16.130 --> 00:15:22.170\nBut just to kinda recap it, an empty\nroot is where we create another domain.\n\n293\n00:15:22.170 --> 00:15:23.940\nBecause you can never have too many,\nright?\n\n294\n00:15:23.940 --> 00:15:30.330\nSo, we create another domain, and it's\ntypically going to be a parent, like this.\n\n295\n00:15:30.330 --> 00:15:34.440\nRight, so, I've got ITPro TV, and\nunderneath it, I've got eu and na.\n\n296\n00:15:35.570 --> 00:15:42.220\nAnd by doing that, we have this\nkind of relationship put in place,\n\n297\n00:15:42.220 --> 00:15:47.550\nboy a blue line on a blue shape\nis not really gonna cut it is it,\n\n298\n00:15:47.550 --> 00:15:51.470\nbut basically what it allows us to\ndo is that this empty root which\n\n299\n00:15:51.470 --> 00:15:56.170\nis the root of our forest,\nit contains the enterprise admins and\n\n300\n00:15:56.170 --> 00:16:01.395\nit contains the schema admins group but\nmy IT guys aren't in there.\n\n301\n00:16:01.395 --> 00:16:06.277\n>> Mm-hm. Right. >> My IT guys\nare in their respective domains.\n\n302\n00:16:06.277 --> 00:16:08.274\nThey're in North America or EU.\n\n303\n00:16:08.274 --> 00:16:09.900\nThey're in one of these other domains.\n\n304\n00:16:09.900 --> 00:16:10.979\nThey no longer have access to that.\n\n305\n00:16:10.979 --> 00:16:12.477\nNow who does have access to that.\n\n306\n00:16:12.477 --> 00:16:13.600\n>> Mm-hm\n>> Well,\n\n307\n00:16:13.600 --> 00:16:16.598\nsomewhere in my organization\nI need to have a CIO.\n\n308\n00:16:16.598 --> 00:16:17.900\nA chief Information Officer.\n\n309\n00:16:17.900 --> 00:16:21.380\nOr an IT director or\nwhatever their position is.\n\n310\n00:16:21.380 --> 00:16:24.920\nAnd they're the ones who are in\ncharge of the whole shebang, right?\n\n311\n00:16:24.920 --> 00:16:28.095\nThey need to have administrative\naccess in this root domain.\n\n312\n00:16:28.095 --> 00:16:30.120\n>> Mm-hm.\n>> The root domain is not gonna contain\n\n313\n00:16:30.120 --> 00:16:32.610\nany other user accounts.\n\n314\n00:16:32.610 --> 00:16:35.290\nAnd when it comes time for\nsomebody to make a schema change or\n\n315\n00:16:35.290 --> 00:16:37.775\nsome kind of change that would\neffect the organization as a whole.\n\n316\n00:16:37.775 --> 00:16:40.060\n>> Mm-hm\n>> They'll have to go through the approval\n\n317\n00:16:40.060 --> 00:16:43.260\nprocess and talk to whoever that\nperson is that's in charge.\n\n318\n00:16:43.260 --> 00:16:46.120\nAnd they're the one's that\nare going to approve the change and\n\n319\n00:16:46.120 --> 00:16:47.850\nallow it to happen up here.\n\n320\n00:16:47.850 --> 00:16:49.360\nBut you've now got some kinda checks and\n\n321\n00:16:49.360 --> 00:16:53.135\nbalances that are stopping these\nadmins from messing with each other.\n\n322\n00:16:53.135 --> 00:16:55.310\n>> [LAUGH] It's like\na war we've go going on.\n\n323\n00:16:55.310 --> 00:16:56.300\n>> It can be, right?\n\n324\n00:16:56.300 --> 00:17:01.005\nYou know, there's a lot of politics\nin Corporate hierarchy, I suppose.\n\n325\n00:17:01.005 --> 00:17:02.550\n>> [LAUGH]\n>> So,\n\n326\n00:17:02.550 --> 00:17:05.770\nseparating out administrative roles,\n\n327\n00:17:05.770 --> 00:17:10.065\nright, that's one reason why we might go\nto multiple domains inside of our forest.\n\n328\n00:17:10.065 --> 00:17:10.810\n>> Right.\n\n329\n00:17:10.810 --> 00:17:12.057\n>> There are other reasons too.\n\n330\n00:17:12.057 --> 00:17:13.835\nPerformance.\n\n331\n00:17:13.835 --> 00:17:18.250\n>> Mm-hm\n>> If my North American domain is massive.\n\n332\n00:17:18.250 --> 00:17:20.580\nIf I have millions of users.\n\n333\n00:17:20.580 --> 00:17:21.375\nAll right?\n\n334\n00:17:21.375 --> 00:17:24.650\nAnd my European domain is massive.\n\n335\n00:17:24.650 --> 00:17:25.780\nAnd it's got millions of users.\n\n336\n00:17:25.780 --> 00:17:27.850\nOr let's think of this in terms\nof a single domain, right?\n\n337\n00:17:27.850 --> 00:17:29.370\n>> Right.\n>> Let's say that my North American and\n\n338\n00:17:29.370 --> 00:17:31.530\nEuropean users are all in one domain.\n\n339\n00:17:31.530 --> 00:17:34.080\nAnd so now we're talking about\nmillions upon millions of users.\n\n340\n00:17:34.080 --> 00:17:36.610\nThat's a big database,\nbig Active Directory Database.\n\n341\n00:17:36.610 --> 00:17:38.985\nAnd to synchronize that across the ocean.\n\n342\n00:17:38.985 --> 00:17:41.740\n>> [LAUGH]\n>> That's a lot of bandwidth.\n\n343\n00:17:41.740 --> 00:17:42.540\n>> Yes.\n\n344\n00:17:42.540 --> 00:17:44.120\n>> And it creates a lot of latency.\n\n345\n00:17:44.120 --> 00:17:47.620\nYou disable an account, it take a while\nfor the other dc's to find out.\n\n346\n00:17:47.620 --> 00:17:53.030\nSo for performance reasons I might\nchoose to break into two domains,\n\n347\n00:17:53.030 --> 00:17:55.740\na North American domain that has\nall my North American users and\n\n348\n00:17:55.740 --> 00:17:57.805\nall those servers are right\nhere on this continent.\n\n349\n00:17:57.805 --> 00:17:58.350\n>> Mm-hm\n>> And\n\n350\n00:17:58.350 --> 00:18:02.350\nthen a European domain that has all of\nthose users and is on that continent.\n\n351\n00:18:02.350 --> 00:18:05.900\nAnd the only thing that gets\nreplicated between, the Global Catalog.\n\n352\n00:18:05.900 --> 00:18:06.820\n>> Right.\n>> Right?\n\n353\n00:18:06.820 --> 00:18:09.575\nSo we know about all the millions\nof users in the other continent.\n\n354\n00:18:09.575 --> 00:18:11.630\n>> Mm-hm\n>> But we don't have all of there data.\n\n355\n00:18:11.630 --> 00:18:13.240\nWe just have that summary of data.\n\n356\n00:18:13.240 --> 00:18:15.240\n>> Right.\nThat partial attribute set.\n\n357\n00:18:15.240 --> 00:18:18.355\n>> Yeah.\nI always describe it like the phone book.\n\n358\n00:18:18.355 --> 00:18:20.520\n>> Mm-hm\n>> Well, for our younger viewers,\n\n359\n00:18:20.520 --> 00:18:24.740\na phone book is [LAUGH],\na lot of people might not remember.\n\n360\n00:18:24.740 --> 00:18:29.410\nBut that big paper index they drop-off to\nyour door once a year and make you angry.\n\n361\n00:18:29.410 --> 00:18:30.960\nBut you crack it open and\nwhat does it have?\n\n362\n00:18:30.960 --> 00:18:33.540\nIt has a list of everyone in your city.\n\n363\n00:18:33.540 --> 00:18:37.980\nWrite all their names and their phone\nnumber and their street address.\n\n364\n00:18:37.980 --> 00:18:40.920\nNot their city and ZIP code,\nbecause you already know that, right?\n\n365\n00:18:40.920 --> 00:18:41.470\n>> Right.\n\n366\n00:18:41.470 --> 00:18:42.840\n>> But their street address.\n\n367\n00:18:42.840 --> 00:18:44.120\nAnd that's it.\n\n368\n00:18:44.120 --> 00:18:47.200\nNow if you take somebody like me,\nthere's a lot of information about me.\n\n369\n00:18:47.200 --> 00:18:50.840\nHow tall I am, how much I weigh,\nwhat color my eyes are.\n\n370\n00:18:50.840 --> 00:18:53.780\nThat's a lot of metadata about me.\n\n371\n00:18:53.780 --> 00:18:54.950\nBut that's not in the phone book.\n\n372\n00:18:54.950 --> 00:18:56.030\n>> Right.\n>> The phone book has\n\n373\n00:18:56.030 --> 00:18:59.320\njust the information needed\nto get a hold of me.\n\n374\n00:18:59.320 --> 00:19:00.910\nThat's how the Global Catalog is.\n\n375\n00:19:00.910 --> 00:19:02.650\nJust enough information to\nget ahold of that person.\n\n376\n00:19:02.650 --> 00:19:04.560\nSo much much smaller set of data.\n\n377\n00:19:04.560 --> 00:19:05.915\nMuch less to replicate.\n\n378\n00:19:05.915 --> 00:19:09.800\n>> Right\n>> So, in extremely large environments,\n\n379\n00:19:09.800 --> 00:19:12.939\nminimizing replication traffic is\na reason to go to more than one domain.\n\n380\n00:19:14.660 --> 00:19:19.800\nSo, those are a few scenarios, there\nare other scenarios that are out there.\n\n381\n00:19:19.800 --> 00:19:23.460\nMaybe you have like an R&D department,\nfor research and development, and\n\n382\n00:19:23.460 --> 00:19:26.950\nyou just don't want that to be a part\nof your production infrastructure.\n\n383\n00:19:26.950 --> 00:19:29.050\n>> Staging area or something as well.\n\n384\n00:19:29.050 --> 00:19:32.898\n>> Yeah, any kind of separation\nthat you wanna make.\n\n385\n00:19:32.898 --> 00:19:37.422\nI think Mike you mentioned, even more than\none name space, or more than one company.\n\n386\n00:19:37.422 --> 00:19:43.395\nSo, ITProTV, that's our show, that's\nthe site you guys are watching this on.\n\n387\n00:19:43.395 --> 00:19:45.620\n>> Mm-hm\n>> But the actual parent company\n\n388\n00:19:45.620 --> 00:19:47.611\nis a company called Edutainment Live.\n\n389\n00:19:47.611 --> 00:19:48.124\n>> Mm-hm\n>> Right?\n\n390\n00:19:48.124 --> 00:19:49.974\n>> So when we get our paychecks they're\n\n391\n00:19:49.974 --> 00:19:51.394\nassigned by Edutainment Live.\n>> Mm-hm\n\n392\n00:19:51.394 --> 00:19:53.084\n>> So you guys may or\n\n393\n00:19:53.084 --> 00:19:57.081\nmay not know that name.\nBut that, we may wanna split that off as\n\n394\n00:19:57.081 --> 00:20:00.570\na separate entity.\nNow why would we do that?\n\n395\n00:20:00.570 --> 00:20:07.029\nWell, Edutainment Live is a producer\nof entertaining educational content.\n\n396\n00:20:07.029 --> 00:20:10.420\n>> Mm-hm\n>> Not necessarily IT content.\n\n397\n00:20:10.420 --> 00:20:13.290\nSure, on ITProTV, we just do IT.\n\n398\n00:20:13.290 --> 00:20:14.677\nMaybe they wanna start\ndoing cooking shows.\n\n399\n00:20:14.677 --> 00:20:15.780\nRight?\nThey can!\n\n400\n00:20:15.780 --> 00:20:18.150\nI'd just let them do whatever they want.\n\n401\n00:20:18.150 --> 00:20:20.950\nSo if they do that, it doesn't make\nsense to have that as part of our\n\n402\n00:20:20.950 --> 00:20:23.792\ninfrastructure, or these IT guys\nthat do all sort of techy stuff.\n\n403\n00:20:23.792 --> 00:20:25.350\n>> All right\n>> But that cooking show,\n\n404\n00:20:25.350 --> 00:20:28.890\nthey might need email accounts,\nand exchange, and whatever.\n\n405\n00:20:28.890 --> 00:20:33.040\nSo we may branch Edutainment Live\noff into its own entity.\n\n406\n00:20:33.040 --> 00:20:34.090\nAnd since they're the parent company,\n\n407\n00:20:34.090 --> 00:20:36.570\nit would actually make sense to\nhave them as like the forest root.\n\n408\n00:20:36.570 --> 00:20:37.080\nRight?\n>> As the root.\n\n409\n00:20:37.080 --> 00:20:38.580\nYeah, exactly.\nAnd then they can spawn off little\n\n410\n00:20:38.580 --> 00:20:40.070\nsubsidiaries and things like that.\n\n411\n00:20:40.070 --> 00:20:41.735\nAnd we just add more domains for them.\n\n412\n00:20:41.735 --> 00:20:42.720\n>> Mm-hm.\n\n413\n00:20:42.720 --> 00:20:46.750\nAnd they could be additional\ndomains that are,\n\n414\n00:20:46.750 --> 00:20:49.180\nseparate name spaces or underneath this.\n\n415\n00:20:49.180 --> 00:20:49.795\nRight?\nSo we might have\n\n416\n00:20:49.795 --> 00:20:54.080\nCooking.EDUtainmentLive.com or whatever\nthe kind of branch out beneath it.\n\n417\n00:20:54.080 --> 00:20:55.680\nRemember, when you set\nup these hierarchies,\n\n418\n00:20:55.680 --> 00:20:58.220\nwhat you're setting up are trees.\n\n419\n00:20:58.220 --> 00:21:01.760\nAnd Microsoft normally\ndenotes that with a triangle.\n\n420\n00:21:01.760 --> 00:21:04.890\nAnd what you'll do is.\n\n421\n00:21:04.890 --> 00:21:07.240\nLet me see if I can send\nthis back one level.\n\n422\n00:21:07.240 --> 00:21:08.910\nThat's not far enough.\n\n423\n00:21:08.910 --> 00:21:13.455\nLet me fight with my icons.\n\n424\n00:21:13.455 --> 00:21:14.581\n>> [LAUGH]\n>> There we go.\n\n425\n00:21:14.581 --> 00:21:17.600\nSo what you're doing is\nyou're creating a tree.\n\n426\n00:21:19.210 --> 00:21:21.260\nThat contains these domains.\n\n427\n00:21:21.260 --> 00:21:24.230\nAnd you can create as\nmany trees as you want.\n\n428\n00:21:24.230 --> 00:21:29.230\nBut effectively we've got this\ntree of ITProTV and its children.\n\n429\n00:21:29.230 --> 00:21:30.110\nRight?\n>> [COUGH]\n\n430\n00:21:30.110 --> 00:21:31.890\n>> And then you've got this tree for\n\n431\n00:21:31.890 --> 00:21:32.540\nEdutainment Live.\n\n432\n00:21:32.540 --> 00:21:34.365\nNow the Edutainment Live\ntree is much smaller.\n\n433\n00:21:34.365 --> 00:21:35.500\n>> Right.\n>> And it doesn't have any\n\n434\n00:21:35.500 --> 00:21:36.250\nchildren underneath it.\n\n435\n00:21:36.250 --> 00:21:39.360\nBut you got to get the idea of\nhow that's kind of related, and\n\n436\n00:21:39.360 --> 00:21:41.155\nyou can build as many trees as you want.\n\n437\n00:21:41.155 --> 00:21:42.360\n>> Mm-hm\n>> You've always got at least\n\n438\n00:21:42.360 --> 00:21:43.100\none tree, right.\n\n439\n00:21:43.100 --> 00:21:43.780\n>> Right.\n\n440\n00:21:43.780 --> 00:21:48.600\n>> The most common active directory\nmodel is single forest, single tree,\n\n441\n00:21:48.600 --> 00:21:49.255\nsingle domain.\n\n442\n00:21:49.255 --> 00:21:50.270\n>> Mm-hm\n>> Right?\n\n443\n00:21:50.270 --> 00:21:52.835\nThat's just one of each, so\nyou have a forest of one.\n\n444\n00:21:52.835 --> 00:21:53.690\n>> [LAUGH]\n>> And\n\n445\n00:21:53.690 --> 00:21:56.410\nit really does make life\neasier as far as management.\n\n446\n00:21:56.410 --> 00:21:59.565\nYou can still do a lot of complex\nthings in a single domain environment.\n\n447\n00:21:59.565 --> 00:22:00.430\n>> Mm-hm.\n>> So, for\n\n448\n00:22:00.430 --> 00:22:02.570\nmost people that's the model you want.\n\n449\n00:22:02.570 --> 00:22:05.470\nBut, I think we've covered\nthe various scenarios where people\n\n450\n00:22:05.470 --> 00:22:06.995\nmight have more than one domain.\n\n451\n00:22:06.995 --> 00:22:07.960\n>> Mm-hm.\n\n452\n00:22:07.960 --> 00:22:10.170\n>> The only one I left\nout was an acquisition.\n\n453\n00:22:10.170 --> 00:22:11.700\n>> That's right.\n\n454\n00:22:11.700 --> 00:22:14.540\n>> The reason I didn't mention acquisition\nis acquisitions normally take a slightly\n\n455\n00:22:14.540 --> 00:22:17.345\ndifferent form and if you.\n\n456\n00:22:17.345 --> 00:22:19.854\nLet's say EdutainmentLive.com, right?\n\n457\n00:22:19.854 --> 00:22:21.760\n>> Mm-hm\n>> That's our parent company.\n\n458\n00:22:21.760 --> 00:22:25.115\nAnd they go out and they find another\ncompany that's out there they really like.\n\n459\n00:22:25.115 --> 00:22:25.615\n>> Mm-hm\n>> Right?\n\n460\n00:22:25.615 --> 00:22:27.670\nAnd we decide to acquire them.\n\n461\n00:22:27.670 --> 00:22:29.160\nWe purchase the company.\n\n462\n00:22:29.160 --> 00:22:32.708\nWell, that other company may\nalready have their own domain.\n\n463\n00:22:32.708 --> 00:22:33.960\n>> Mm-hm\n>> All right?\n\n464\n00:22:33.960 --> 00:22:37.680\nIf they already have their own domain, we\nmight wanna bring them under our umbrella,\n\n465\n00:22:37.680 --> 00:22:39.110\nbut there's no way to.\n\n466\n00:22:40.130 --> 00:22:42.250\nTake an external domain and\n\n467\n00:22:42.250 --> 00:22:45.344\nbring it into your forest,\nthat other domain it's in its own forest.\n\n468\n00:22:45.344 --> 00:22:46.030\n>> Mm-hm\n>> And\n\n469\n00:22:46.030 --> 00:22:51.400\nforests create the absolute\nboundary between environments.\n\n470\n00:22:51.400 --> 00:22:56.720\nSo when you acquire a company, you'll more\nthan likely end up with multiple forests,\n\n471\n00:22:56.720 --> 00:22:58.100\nbut even if you don't acquire a company,\n\n472\n00:22:58.100 --> 00:23:00.180\nyou might choose to do multiple\nforests anyways, right.\n\n473\n00:23:00.180 --> 00:23:00.870\n>> Absolutely.\n\n474\n00:23:00.870 --> 00:23:04.660\n>> Why would we want to do more then one\nforest, if we were a single company?\n\n475\n00:23:04.660 --> 00:23:06.070\n>> It really comes back\nto what you just said.\n\n476\n00:23:06.070 --> 00:23:08.710\nIt's that administrative boundary,\ncuz within a forest,\n\n477\n00:23:08.710 --> 00:23:10.710\nI mean our domains are administrative\nboundaries in a way, right?\n\n478\n00:23:10.710 --> 00:23:14.690\nOur domain admins have full control of\neverything, inside that domain, but\n\n479\n00:23:14.690 --> 00:23:17.230\nnothing outside of the domain,\nwithout being given that permission.\n\n480\n00:23:18.330 --> 00:23:21.410\nBut there's still the enterprise admins,\nright, up there in that forest root, and\n\n481\n00:23:21.410 --> 00:23:23.360\nthey have control over the entire forest.\n\n482\n00:23:23.360 --> 00:23:27.710\nAnd so, if I really need true\nadministrative separation,\n\n483\n00:23:27.710 --> 00:23:30.520\nthat's when we start moving into\nthat multiple forest model.\n\n484\n00:23:30.520 --> 00:23:34.736\nAnd you might have a scenario where you\njust can't,maybe there's a conflict of\n\n485\n00:23:34.736 --> 00:23:37.278\ninterest, and\nyou cannot have the potential for\n\n486\n00:23:37.278 --> 00:23:41.380\nsomebody to make changes in both of\nthose organizations or in their domains.\n\n487\n00:23:41.380 --> 00:23:44.830\nThere's also sometimes some legal\nrequirements where you've got.\n\n488\n00:23:44.830 --> 00:23:49.630\nPart of your company is in another\ncontinent, and that country or\n\n489\n00:23:49.630 --> 00:23:53.110\nthat organization cannot have\nsomebody that resides in the U.S.\n\n490\n00:23:53.110 --> 00:23:57.130\nbeing in an administrator over a domain\nover there, that's over in Europe.\n\n491\n00:23:57.130 --> 00:23:59.530\nSo, that's usually the biggest reason,\nI think,\n\n492\n00:23:59.530 --> 00:24:01.780\nis that true separation of administration.\n\n493\n00:24:03.910 --> 00:24:06.094\n>> Yeah, and it's a burden\n>> Mm-hm\n\n494\n00:24:06.094 --> 00:24:07.558\n>> To have to do more than one forest\n\n495\n00:24:07.558 --> 00:24:10.930\nbecause there's absolutely no\nauthentication between those forests.\n\n496\n00:24:10.930 --> 00:24:13.169\n>> Right.\n>> They are completely separate entities.\n\n497\n00:24:13.169 --> 00:24:16.769\nBut it doesn't mean that you\ncan't get them to work together.\n\n498\n00:24:16.769 --> 00:24:18.773\n>> Mm-hm.\n>> So when we acquire a company, or\n\n499\n00:24:18.773 --> 00:24:20.638\nwhen we build more than one forest,\n\n500\n00:24:20.638 --> 00:24:24.693\nthe first thing we need to think about\nis how we're going to set up our trusts.\n\n501\n00:24:24.693 --> 00:24:25.640\n>> Right.\n>> Right.\n\n502\n00:24:25.640 --> 00:24:26.560\n>> So, trusts.\n\n503\n00:24:26.560 --> 00:24:28.735\nWhile you were talking I was able\nto sort out my visio-diagram woes.\n\n504\n00:24:28.735 --> 00:24:29.726\n>> [NOISE] Nice.\nLook at that!\n\n505\n00:24:29.726 --> 00:24:30.550\n>> Look at this, it's all colorful.\n\n506\n00:24:30.550 --> 00:24:32.460\nI guess this isn't quite as\nbig as I want it but, there.\n\n507\n00:24:32.460 --> 00:24:33.530\nAll right!\n\n508\n00:24:33.530 --> 00:24:37.260\nSo when we start building out our forests,\n\n509\n00:24:37.260 --> 00:24:42.215\nthere are trusts that are put in\nplace automatically for us, right?\n\n510\n00:24:42.215 --> 00:24:43.220\n>> Mm-hm.\n\n511\n00:24:43.220 --> 00:24:46.730\n>> Every domain in a forest\nautomatically has a two\n\n512\n00:24:46.730 --> 00:24:50.380\nway transitive of trust with every domain,\nI know we've covered this in other shows.\n\n513\n00:24:50.380 --> 00:24:54.130\nSo when we're dealing with one forest, we\nreally don't even think about the trust.\n\n514\n00:24:54.130 --> 00:24:55.770\n>> No.\n>> Just because they're already\n\n515\n00:24:55.770 --> 00:24:56.510\nthere, right?\n\n516\n00:24:56.510 --> 00:25:00.980\n>> So It just worked its magic.\n\n517\n00:25:00.980 --> 00:25:02.645\n>> Now we sound like an Apple commercial.\n\n518\n00:25:02.645 --> 00:25:06.830\n[LAUGH]\nSo basically these trusts,\n\n519\n00:25:06.830 --> 00:25:09.620\nthe way they work,\nthe default way that they work.\n\n520\n00:25:09.620 --> 00:25:12.320\nWell, when they don't have giant\narrows stuck on them like that.\n\n521\n00:25:12.320 --> 00:25:13.910\n>> That's a one way.\n\n522\n00:25:13.910 --> 00:25:15.615\n>> There's probably someway for\nme to fix that.\n\n523\n00:25:15.615 --> 00:25:17.480\n>> As he's getting that\nall straightened out.\n\n524\n00:25:17.480 --> 00:25:18.932\nWhen you set up your first\ndomain that's all you've got.\n\n525\n00:25:18.932 --> 00:25:23.123\nAnd then as you add child domains,\nthere's that automatic two way transit of\n\n526\n00:25:23.123 --> 00:25:26.101\ntrust that gets created\nbetween that parent-child.\n\n527\n00:25:26.101 --> 00:25:30.480\nWhen you start adding new trees into your\nforest, there's an automatic two-way\n\n528\n00:25:30.480 --> 00:25:33.531\ntransitive trust between all trees and\nthe forest root.\n\n529\n00:25:33.531 --> 00:25:36.492\nAnd as you say,\nwe've talked about other shows,\n\n530\n00:25:36.492 --> 00:25:40.803\nwhere transitivity means if A trusts B,\nand B trusts C, then A trusts C.\n\n531\n00:25:40.803 --> 00:25:45.490\nSo because of that automatic two-way\ntransitive trust created between\n\n532\n00:25:45.490 --> 00:25:49.270\nevery child domain and\nevery tree back to the forest root.\n\n533\n00:25:49.270 --> 00:25:54.090\nThat means, in the end,\nall domains trust all other domains.\n\n534\n00:25:54.090 --> 00:25:56.450\nIt's done automatically\nas you set them up.\n\n535\n00:25:56.450 --> 00:25:59.446\nYou can do it in if you needed to or\nmake changes to them but\n\n536\n00:25:59.446 --> 00:26:00.730\nit makes life very simple.\n\n537\n00:26:00.730 --> 00:26:03.222\nIt makes it very easy for\nme to give access.\n\n538\n00:26:03.222 --> 00:26:07.896\nI've got a user down in that child domain\nand I wanna give them access to a resource\n\n539\n00:26:07.896 --> 00:26:11.843\nin a parent domain, or even a resource\nin another tree in my forest.\n\n540\n00:26:11.843 --> 00:26:14.740\nIt's easy because\nthe trust is already there.\n\n541\n00:26:14.740 --> 00:26:17.360\nAnd really what the trust\nis doing is it's saying,\n\n542\n00:26:17.360 --> 00:26:20.080\nI trust your authentication process,\nalright?\n\n543\n00:26:20.080 --> 00:26:22.385\nWithin my domain,\nI've got my domain controllers.\n\n544\n00:26:22.385 --> 00:26:25.120\nThey're authenticating my users and\nmy computers, and\n\n545\n00:26:25.120 --> 00:26:26.830\nthey're issuing tokens, right?\n\n546\n00:26:26.830 --> 00:26:29.290\nMy access tokens or my security tokens.\n\n547\n00:26:29.290 --> 00:26:31.200\nAnd everything within that domain,\n\n548\n00:26:31.200 --> 00:26:34.870\ntrusts that token because they\ntrust the domain controller.\n\n549\n00:26:34.870 --> 00:26:37.470\nWell that other domain has it's own\ndomain controllers that's doing\n\n550\n00:26:37.470 --> 00:26:39.430\nthe authentication for those users.\n\n551\n00:26:39.430 --> 00:26:42.020\nSo when that user tries to come\ninto a different domain and\n\n552\n00:26:42.020 --> 00:26:45.040\naccess a resource it\npresents this access token.\n\n553\n00:26:45.040 --> 00:26:47.640\nThat domain controller didn't\nissue that access token.\n\n554\n00:26:47.640 --> 00:26:49.480\nBut because of that trust we're saying,\nokay.\n\n555\n00:26:49.480 --> 00:26:52.960\nI trust the fact that the domain\ncontroller in your domain,\n\n556\n00:26:52.960 --> 00:26:56.570\nverified your password,\nwent through the authentication process.\n\n557\n00:26:56.570 --> 00:27:00.920\nAnd I'll just accept the fact, or trust\nthe fact that you've been authenticated.\n\n558\n00:27:00.920 --> 00:27:03.160\n>> Yeah, and\nthat's all done automatically.\n\n559\n00:27:03.160 --> 00:27:06.010\n>> Mm hm.\n>> Right, so, as we build up a forest, and\n\n560\n00:27:06.010 --> 00:27:09.290\nas we continue to add more domains\nto the forest, those trusts\n\n561\n00:27:09.290 --> 00:27:12.419\nare automatically being built up, and so\n>> For example,\n\n562\n00:27:12.419 --> 00:27:16.856\nif I throw in another domain here\ninto my growing company, right.\n\n563\n00:27:16.856 --> 00:27:20.170\nSo, companies do this,\nthey don't stay stagnate.\n\n564\n00:27:20.170 --> 00:27:21.466\nWell, hopefully they don't stay stagnate.\n\n565\n00:27:21.466 --> 00:27:22.090\n>> [LAUGH].\n\n566\n00:27:22.090 --> 00:27:26.560\n>> So, as the company grows you'll start\nadding new domains and so maybe we buy,\n\n567\n00:27:26.560 --> 00:27:29.965\nmaybe we go out and we buy pets.com,right?\n\n568\n00:27:29.965 --> 00:27:35.000\nIt's not in use, I don't think,\nand so we buy pets.com.\n\n569\n00:27:35.000 --> 00:27:37.910\nWell, when you buy that domain or\nthat company and\n\n570\n00:27:37.910 --> 00:27:39.830\nyou go to integrate\nthem into your network.\n\n571\n00:27:39.830 --> 00:27:44.660\nWell you're tying them into your network\nand the trusts are automatically\n\n572\n00:27:44.660 --> 00:27:48.470\nestablished the moment that you\nbring them into your forest.\n\n573\n00:27:48.470 --> 00:27:55.145\nWhen you build that domain, and all this\nstuff starts to kinda fall into place.\n\n574\n00:27:55.145 --> 00:27:57.016\n>> Mm-hm.\n>> So we get that and\n\n575\n00:27:57.016 --> 00:28:01.594\nif edutainmentlive.com trusts pets.com,\nand\n\n576\n00:28:01.594 --> 00:28:08.750\npets.com trusts a subdomain right some\nkind of child domain that it's got.\n\n577\n00:28:08.750 --> 00:28:12.947\nSo if it's got a domain\nthat is maybe like R&D,\n\n578\n00:28:12.947 --> 00:28:17.370\nr&d.pets.com, right?\n\n579\n00:28:17.370 --> 00:28:20.124\nSo, it's gonna trust it because that's\na parent, child relationship, right?\n\n580\n00:28:20.124 --> 00:28:22.254\nRight, parent, child, today,\nthey always do the two way trust.\n\n581\n00:28:22.254 --> 00:28:25.341\nSo, edutainmentlive.com trusts pets.com.\n\n582\n00:28:25.341 --> 00:28:27.888\npets.com trusts the r&d.pets.com.\n\n583\n00:28:27.888 --> 00:28:29.414\nSo edutainmentlive.com trusts r&d.\n\n584\n00:28:29.414 --> 00:28:30.820\nI just name it live trusts r n d.\n\n585\n00:28:30.820 --> 00:28:32.478\nAnd NA, way over here trusts r&d, right.\n\n586\n00:28:32.478 --> 00:28:36.372\nSo that trust relationship is there,\nand it's automatic.\n\n587\n00:28:36.372 --> 00:28:37.400\n>> Yep.\n\n588\n00:28:37.400 --> 00:28:41.540\nWe really don't worry about trust inside\na forest, cuz these are built up and\n\n589\n00:28:41.540 --> 00:28:43.142\nautomatically put in place.\n\n590\n00:28:43.142 --> 00:28:45.330\nThe exception would be short cut trusts.\n\n591\n00:28:45.330 --> 00:28:46.540\n>> Yeah cuz sometimes the,\n\n592\n00:28:46.540 --> 00:28:49.640\nwhat John's drawing there is\nwhat's known as a trust path.\n\n593\n00:28:49.640 --> 00:28:54.010\nAnd what's gonna happen is if\na user over there in na.ITPro.TV\n\n594\n00:28:54.010 --> 00:28:58.650\nwants to access a resource in\nr&d.pets.com we can do that.\n\n595\n00:28:58.650 --> 00:29:00.560\nBut it's gonna have to\ngo through a process.\n\n596\n00:29:00.560 --> 00:29:01.630\nHe's got his authentication,\n\n597\n00:29:01.630 --> 00:29:05.440\nthe user's got the authentication token\nfrom the domain controllers in na.\n\n598\n00:29:05.440 --> 00:29:08.398\nAnd when he goes to access the resource,\nthat domain controller in,\n\n599\n00:29:08.398 --> 00:29:13.025\nna, is gonna say well that's not in\nmy domain, but I do have a trust,\n\n600\n00:29:13.025 --> 00:29:16.950\nitpro.tv, and\nI can forward you up to there.\n\n601\n00:29:16.950 --> 00:29:18.850\nOr, you know, it can give me a referral.\n\n602\n00:29:18.850 --> 00:29:21.698\nAnd so I'm gonna get referred\nup to itpro.tv, which is then,\n\n603\n00:29:21.698 --> 00:29:25.680\nthere's gonna be a follow up by\na referral over to edutainmentlive.com.\n\n604\n00:29:25.680 --> 00:29:31.270\nAnother referral back over to pets.com,\na final referral over to R&D.Pets.com.\n\n605\n00:29:31.270 --> 00:29:34.950\nNow I'm talking to the domain\ncontroller that hosts the resource and\n\n606\n00:29:34.950 --> 00:29:37.330\nI can be given access or denied access.\n\n607\n00:29:37.330 --> 00:29:40.200\nBut what if there's some latency\nthere between talking to all of\n\n608\n00:29:40.200 --> 00:29:41.560\nthose different domain controllers.\n\n609\n00:29:41.560 --> 00:29:43.340\nIf there was any connectivity issues or\n\n610\n00:29:43.340 --> 00:29:46.456\ndomain controllers were unavailable\nin say edutainment live.\n\n611\n00:29:46.456 --> 00:29:50.200\nI wouldn't be able to follow that\ntrust path and get access to resource.\n\n612\n00:29:50.200 --> 00:29:53.250\nSo we can create shortcut trusts that\nwill shortcut that entire process.\n\n613\n00:29:53.250 --> 00:29:56.290\nThese are not created automatically.\n\n614\n00:29:56.290 --> 00:29:59.070\nWe're gonna have to manually create them.\n\n615\n00:29:59.070 --> 00:30:02.840\nYou can make them one way or\ntwo way and they are transitive.\n\n616\n00:30:02.840 --> 00:30:06.080\nSo some of the keys that we really wanna\nthink about when we're referring to these\n\n617\n00:30:06.080 --> 00:30:10.240\ndifferent trusts is the direction of the\ntrust and whether or not it's transitive.\n\n618\n00:30:10.240 --> 00:30:14.020\nSo that short cut trust, now I can go\nright across there and talk directly to\n\n619\n00:30:14.020 --> 00:30:19.670\nthose domain controllers without having\nto follow that entire trust path.\n\n620\n00:30:19.670 --> 00:30:23.040\nLike I said, when you set those up,\nthey're gonna be a one way trust, but\n\n621\n00:30:23.040 --> 00:30:26.270\nI can set up a short cut\ntrust in both directions.\n\n622\n00:30:27.360 --> 00:30:34.650\nThey are transitive so if another If\nthere was a child domain of Na.ITPro.tv.\n\n623\n00:30:34.650 --> 00:30:35.260\nAll right?\n\n624\n00:30:35.260 --> 00:30:39.500\nBut the shortcut was between Na and\nRND.pets.com.\n\n625\n00:30:39.500 --> 00:30:42.260\nFrom that child domain of Na,\nI could move up one and\n\n626\n00:30:42.260 --> 00:30:44.130\nthen across that shortcut trust.\n\n627\n00:30:44.130 --> 00:30:49.480\n>> If we, and this is the design part,\nthis is what we have to think about.\n\n628\n00:30:49.480 --> 00:30:51.447\nYou have to look at your network and\nsay all right,\n\n629\n00:30:51.447 --> 00:30:57.140\nIs there a frequent access between two\ndomains that are not in the same tree?\n\n630\n00:30:58.490 --> 00:31:02.250\nIf there is ever frequent access between\ntwo domains not in the same tree,\n\n631\n00:31:02.250 --> 00:31:03.886\nit makes sense to have a shortcut trust.\n\n632\n00:31:03.886 --> 00:31:05.990\n>> Right.\n>> If it's infrequent access,\n\n633\n00:31:05.990 --> 00:31:11.750\nif users every now and\nthen access resource in that other tree,\n\n634\n00:31:11.750 --> 00:31:14.470\nthen it's probably not worth\nit to make a shortcut trust.\n\n635\n00:31:14.470 --> 00:31:19.630\nBut if every single day you know that\n\n636\n00:31:19.630 --> 00:31:24.740\nusers over here in North America\nare going to be accessing r&d.pets.com.\n\n637\n00:31:24.740 --> 00:31:27.690\nThen it makes sense to take\nthis shortcut trust and\n\n638\n00:31:27.690 --> 00:31:30.690\nI'll actually move it up here cuz,\nlike you said, if we map it to the parent,\n\n639\n00:31:30.690 --> 00:31:34.920\nthe children can use that parent to\njust jump right over to r&d, right.\n\n640\n00:31:34.920 --> 00:31:37.020\nBut if I know it's just North America,\n\n641\n00:31:37.020 --> 00:31:40.920\njust North America's gonna be doing it,\nI can put that shortcut trust here.\n\n642\n00:31:40.920 --> 00:31:45.160\nAnd when a user in North America\ngoes to access a resource in r&d,\n\n643\n00:31:45.160 --> 00:31:49.630\nthey'll hit their domain controller and\njump right over to r&d.\n\n644\n00:31:49.630 --> 00:31:51.530\nOr really it's going to\nbe the other way around.\n\n645\n00:31:51.530 --> 00:31:54.899\nWhen a North American user\naccesses a resource in r&d,\n\n646\n00:31:54.899 --> 00:31:57.200\nan r&d server goes to validate them.\n\n647\n00:31:57.200 --> 00:31:59.058\nIt validates against their DC and\n\n648\n00:31:59.058 --> 00:32:03.516\nthen it takes the shortcut right over to\nNA to find out the scheming on that user.\n\n649\n00:32:03.516 --> 00:32:05.698\nWhether they're allowed in and so on.\n\n650\n00:32:05.698 --> 00:32:07.718\nThis cuts out.\n\n651\n00:32:07.718 --> 00:32:10.829\nThree domain controllers in this design\nright, but it can cut out more or\n\n652\n00:32:10.829 --> 00:32:13.400\nless depending on how your\nnetwork is structured.\n\n653\n00:32:13.400 --> 00:32:16.595\nBut it really shrinks things down, you get\nthat communication happening a lot faster.\n\n654\n00:32:16.595 --> 00:32:17.210\n>> Mm-hm.\n\n655\n00:32:17.210 --> 00:32:19.770\n>> This is really the only\nconsideration when it comes to trusts\n\n656\n00:32:19.770 --> 00:32:20.920\ninside of a forest.\n\n657\n00:32:20.920 --> 00:32:21.530\n>> Right.\n>> And\n\n658\n00:32:21.530 --> 00:32:24.200\nit only is a consideration\nif you have frequent\n\n659\n00:32:24.200 --> 00:32:26.585\naccess between domains you\ncan speed up authentication.\n\n660\n00:32:26.585 --> 00:32:27.440\n>> Mm-hm.\n\n661\n00:32:27.440 --> 00:32:28.590\n>> All right.\n\n662\n00:32:28.590 --> 00:32:31.480\nTrusts outside of the forest, though.\n\n663\n00:32:31.480 --> 00:32:33.140\n>> Right.\n>> That's a different story.\n\n664\n00:32:33.140 --> 00:32:35.510\nBut, looking at the clock,\nI think we're out of time on this segment.\n\n665\n00:32:35.510 --> 00:32:39.080\nSo, let's stop and\ntake a break and when we get back,\n\n666\n00:32:39.080 --> 00:32:41.790\nwe'll talk about trusts\noutside of our forests,\n\n667\n00:32:41.790 --> 00:32:44.550\nas we kind of reach out to other\nenvironments that are out there.\n\n668\n00:32:44.550 --> 00:32:45.600\nSo, stay tuned.\n\n669\n00:32:45.600 --> 00:32:46.948\nWe'll be back after this.\n\n670\n00:32:46.948 --> 00:32:54.689\n[MUSIC].\n\n671\n00:32:54.689 --> 00:32:56.395\nAll right, welcome back everybody.\n\n672\n00:32:56.395 --> 00:33:01.109\nSo before the break, we were talking\nabout domain trusts within a forest.\n\n673\n00:33:01.109 --> 00:33:01.778\n>> Mm-hm.\n\n674\n00:33:01.778 --> 00:33:02.700\n>> Right?\n>> Right.\n\n675\n00:33:02.700 --> 00:33:04.605\nNow let's think outside of the box, right.\n\n676\n00:33:04.605 --> 00:33:06.330\n>> [LAUGH] Outside of the box, literally.\n\n677\n00:33:06.330 --> 00:33:08.190\n>> Let's get outside of our forest.\n\n678\n00:33:08.190 --> 00:33:08.890\nRight?\n\n679\n00:33:08.890 --> 00:33:11.150\nIf we're working with another company,\n\n680\n00:33:11.150 --> 00:33:14.600\nand this might be a temporary relationship\nwe have with the contracting company,\n\n681\n00:33:14.600 --> 00:33:17.850\nit might be a long-term relationship\nwith a business partner,\n\n682\n00:33:17.850 --> 00:33:20.680\nor it might be an acquisition where\nwe've acquired another company and\n\n683\n00:33:20.680 --> 00:33:22.940\nthey just have their forest already.\n\n684\n00:33:22.940 --> 00:33:24.230\nThey're all really handled the same way.\n\n685\n00:33:24.230 --> 00:33:26.720\nThe difference is just how long\nwe leave the trust in place.\n\n686\n00:33:26.720 --> 00:33:30.630\nBut, you'll probably want to establish\na trust between you and the other forest.\n\n687\n00:33:30.630 --> 00:33:33.890\n>> Yeah, because unlike within our forest\nwhere they have that automatic trust\n\n688\n00:33:33.890 --> 00:33:37.660\nthat gets created, there's no automatic\ntrust created between forests.\n\n689\n00:33:37.660 --> 00:33:40.830\nEverything has to be done manually\nbecause that forest really is\n\n690\n00:33:40.830 --> 00:33:42.060\na true security boundary.\n\n691\n00:33:42.060 --> 00:33:46.030\nThere's no, anybody outside the forest\ndoes not have access to anything\n\n692\n00:33:46.030 --> 00:33:49.500\ninside the forest,\nunless we choose to do so.\n\n693\n00:33:49.500 --> 00:33:52.621\n>> So let's say, that at ITProTV,\n\n694\n00:33:52.621 --> 00:33:58.115\nwe entered into some kind of\npartnership with Microsoft.\n\n695\n00:33:58.115 --> 00:33:58.710\n>> Mm-hm.\n\n696\n00:33:58.710 --> 00:34:01.430\n>> And so we wanna start using\n\n697\n00:34:01.430 --> 00:34:04.630\nour user accounts when we access\nresources at Microsoft, or vice versa.\n\n698\n00:34:04.630 --> 00:34:07.340\nWe want them to be able to use their user\naccounts when they're accessing resources\n\n699\n00:34:07.340 --> 00:34:07.860\nat ITProTV.\n\n700\n00:34:08.980 --> 00:34:10.850\nSo they have their own forest.\n\n701\n00:34:10.850 --> 00:34:13.350\nI imagine they have one of\nthe largest forests in the world, but\n\n702\n00:34:13.350 --> 00:34:14.450\nthey've got their own forest.\n\n703\n00:34:14.450 --> 00:34:17.890\nAnd so, I just kind of sketched\nup something a little quick,\n\n704\n00:34:17.890 --> 00:34:20.130\nI have no idea what their actual\nforest structure is like.\n\n705\n00:34:20.130 --> 00:34:22.940\nSo we've got microsoft.com,\nand technet.microsoft.com, and\n\n706\n00:34:22.940 --> 00:34:26.610\nwe've got live.com, you know,\ntheir different stuff over there.\n\n707\n00:34:26.610 --> 00:34:28.980\nWe wanna be able to share accounts,\nto be able to access resources.\n\n708\n00:34:28.980 --> 00:34:31.150\nSo how do we go about that?\n\n709\n00:34:31.150 --> 00:34:33.630\nWell, we've gotta figure\nout a few different things.\n\n710\n00:34:33.630 --> 00:34:36.450\nThe first thing is there's\nmore than one type of trust,\n\n711\n00:34:36.450 --> 00:34:38.940\nwhen we trust somebody\noutside the organization.\n\n712\n00:34:38.940 --> 00:34:42.080\nEven at a bare functional level,\nthere's a big difference.\n\n713\n00:34:42.080 --> 00:34:44.880\nFor example,\nall of these trusts we've talked about so\n\n714\n00:34:44.880 --> 00:34:46.550\nfar, well I guess not all of them.\n\n715\n00:34:46.550 --> 00:34:51.290\nBut all these default trusts in\nhere are two way transitive trusts.\n\n716\n00:34:51.290 --> 00:34:54.910\nWith the exception of shortcut\ntrusts which are one way.\n\n717\n00:34:54.910 --> 00:34:57.500\nYou can cram both ways if you want.\n\n718\n00:34:57.500 --> 00:34:59.220\nBut these are two way transitive up here.\n\n719\n00:35:00.390 --> 00:35:04.830\nWhen we do a trust to an external entity,\nit's one way.\n\n720\n00:35:04.830 --> 00:35:07.260\nNot only that, it's non-transitive.\n\n721\n00:35:07.260 --> 00:35:10.300\nSo one way non-transitive\ntrust by default.\n\n722\n00:35:10.300 --> 00:35:12.980\nNow, there are some variations we\ncould do there to change that.\n\n723\n00:35:12.980 --> 00:35:14.220\n>> There are a couple that are transitive.\n\n724\n00:35:14.220 --> 00:35:16.850\nBut when we talk about\ntransitivity between forest,\n\n725\n00:35:16.850 --> 00:35:21.710\nwe want to keep in mind if we set up\na trust between two forest, it's gonna be\n\n726\n00:35:21.710 --> 00:35:26.190\ntransitive to all the domains that\nexist within those two forests.\n\n727\n00:35:26.190 --> 00:35:29.640\nBut Microsoft might have a trust\nwith another forest, right?\n\n728\n00:35:29.640 --> 00:35:32.990\nSome other company, they've got\nother partners that they work with,\n\n729\n00:35:32.990 --> 00:35:36.190\nthe transitivity does not\nextend to that other forest, so\n\n730\n00:35:36.190 --> 00:35:41.050\nthe trust that we set up between\nMicrosoft and us is not going to be.\n\n731\n00:35:41.050 --> 00:35:44.280\nMy user accounts couldn't go through\nthat trust, through Microsoft.\n\n732\n00:35:44.280 --> 00:35:46.560\nAnd then on to another business partner,\nMicrosoft.\n\n733\n00:35:46.560 --> 00:35:51.390\n>> Right, so one of the earliest\ndecisions we need to make is\n\n734\n00:35:51.390 --> 00:35:55.880\nare we going to trust their entire forest?\n\n735\n00:35:55.880 --> 00:35:58.750\nOr do we just want to trust\ncertain domains in their forest?\n\n736\n00:35:58.750 --> 00:36:03.360\nAll right and if this is an acquisition\nif we're acquiring them, or\n\n737\n00:36:03.360 --> 00:36:06.960\nthey're acquiring us,\nif we acquire Microsoft, yeah?\n\n738\n00:36:06.960 --> 00:36:08.435\n>> It is in the works.\n\n739\n00:36:08.435 --> 00:36:11.120\n>> [LAUGH]\n>> Don't let the SEC know.\n\n740\n00:36:11.120 --> 00:36:17.141\nBut if one of us were acquiring the other,\nthen this is going to be whole hog.\n\n741\n00:36:17.141 --> 00:36:19.270\nYou're going to trust the full forest.\n\n742\n00:36:19.270 --> 00:36:22.300\nSo you'll do a forest level trust.\n\n743\n00:36:22.300 --> 00:36:25.960\nAnd a forest level trust is\ntransitive within the forest.\n\n744\n00:36:25.960 --> 00:36:28.132\nSo that means Live.com, Microsoft.com,\n\n745\n00:36:28.132 --> 00:36:32.300\ntechnet.Microsoft.com, all of those\ndomains will trust all of my domains.\n\n746\n00:36:32.300 --> 00:36:34.720\nAnd if we go two ways,\nit's vice versa too.\n\n747\n00:36:34.720 --> 00:36:37.600\nRight?\nSo a forest level trust is what we use\n\n748\n00:36:37.600 --> 00:36:40.620\ntypically when we're representing\nsome kind of permanent\n\n749\n00:36:40.620 --> 00:36:42.280\nconnection between the companies.\n\n750\n00:36:42.280 --> 00:36:45.700\nNow it doesn't have to be permanent, you\ncan delete that trust whenever you want.\n\n751\n00:36:45.700 --> 00:36:48.550\nBut it's usually representative\nof an acquisition.\n\n752\n00:36:50.150 --> 00:36:53.410\nIf this is just a partnership,\nthough, right?\n\n753\n00:36:53.410 --> 00:36:57.070\nThen it's not normally the whole\norganization that we want to connect up\n\n754\n00:36:57.070 --> 00:36:58.260\nwith, right?\n\n755\n00:36:58.260 --> 00:37:00.420\nIt's normally particular elements.\n\n756\n00:37:00.420 --> 00:37:05.050\nSo for example,\nmaybe the North American ITProTV office\n\n757\n00:37:05.050 --> 00:37:09.560\nis working on virtual labs with\nMicrosoft TechNet, all right?\n\n758\n00:37:09.560 --> 00:37:12.730\nSo not all of Microsoft,\nnot even Live.com, and\n\n759\n00:37:12.730 --> 00:37:16.120\nall the other pieces they have but\njust TechNet.\n\n760\n00:37:16.120 --> 00:37:22.030\nSo we might build a trust\nbetween just those two domains.\n\n761\n00:37:22.030 --> 00:37:22.750\nAll right.\n\n762\n00:37:22.750 --> 00:37:26.930\nAnd if we do that, it's non-transitive.\n\n763\n00:37:26.930 --> 00:37:31.100\nSo North America would trust TechNet,\nor vice versa, or both ways.\n\n764\n00:37:31.100 --> 00:37:34.490\nWe could create two trusts and then it\nwould be both directions at that point.\n\n765\n00:37:34.490 --> 00:37:38.430\nBut North America trust TechNet,\nTechNet trust Microsoft,\n\n766\n00:37:38.430 --> 00:37:42.390\nNorth America would not trust Microsoft,\nall right.\n\n767\n00:37:42.390 --> 00:37:46.290\nIt's not a transitive\ntrust in that aspect.\n\n768\n00:37:46.290 --> 00:37:52.890\nSo if I wanted North America and\nEurope to trust Technet, but not ITProTV.\n\n769\n00:37:52.890 --> 00:37:56.140\nI would have to build two sets of trusts,\none from this domain and\n\n770\n00:37:56.140 --> 00:37:58.030\none from this domain.\n\n771\n00:37:58.030 --> 00:38:02.310\nSo keep that in mind with\ntrusts that go between forests.\n\n772\n00:38:02.310 --> 00:38:05.790\nIf it's a forest level trust,\nyou'll trust the whole forest and\n\n773\n00:38:05.790 --> 00:38:07.540\nit's transitive throughout it.\n\n774\n00:38:07.540 --> 00:38:12.180\nBut if it's a domain trust, it's just\na relationship between those two domains.\n\n775\n00:38:12.180 --> 00:38:13.040\n>> What do they call those?\n\n776\n00:38:13.040 --> 00:38:16.280\nThe external trusts\n>> Yes, external trusts.\n\n777\n00:38:16.280 --> 00:38:18.400\nThe official term, sorry.\n\n778\n00:38:18.400 --> 00:38:20.030\nSo, when we create an external trust,\n\n779\n00:38:20.030 --> 00:38:22.280\nwe need to decide which\ndirection it's going to be.\n\n780\n00:38:22.280 --> 00:38:24.490\nIs it us trusting their user accounts?\n\n781\n00:38:24.490 --> 00:38:27.110\nOr is it them trusting our user accounts,\nright?\n\n782\n00:38:27.110 --> 00:38:29.470\nSo we need to figure out the direction and\nit might be bi-directional.\n\n783\n00:38:29.470 --> 00:38:33.460\nAnd so you create the two trusts and\nthe wizard just offers to create both for\n\n784\n00:38:33.460 --> 00:38:34.940\nyou at the same time.\n\n785\n00:38:34.940 --> 00:38:37.370\nBut you can create that trust,\nand then it's in place, and\n\n786\n00:38:37.370 --> 00:38:38.780\nyou can tear it down whenever you need.\n\n787\n00:38:40.000 --> 00:38:43.790\nSo, forest trusts, external trusts, and\n\n788\n00:38:43.790 --> 00:38:46.870\nthere's one more,\nwhich is called a realm trust.\n\n789\n00:38:46.870 --> 00:38:49.210\nAll right,\nnow what the heck is a realm trust?\n\n790\n00:38:49.210 --> 00:38:51.380\n>> You know I don't know.\n\n791\n00:38:51.380 --> 00:38:53.200\n>> That would be funny.\n\n792\n00:38:53.200 --> 00:38:57.360\nNow, you know, all of this technology,\nActive Directory,\n\n793\n00:38:57.360 --> 00:39:03.020\nits authentication scheme, it's all\nbuilt on top of Kerberos Version 5.\n\n794\n00:39:03.020 --> 00:39:07.340\nMaybe we've got this long standing debate\nover how you're supposed to say Kerberos,\n\n795\n00:39:07.340 --> 00:39:09.050\nKerberos, whatever it is.\n\n796\n00:39:09.050 --> 00:39:11.309\nThere's debate over how\nto pronounce it but\n\n797\n00:39:11.309 --> 00:39:14.800\nit's all built on top of\nKerberos Version 5, all right?\n\n798\n00:39:14.800 --> 00:39:17.660\nThat is a standard authentication model.\n\n799\n00:39:17.660 --> 00:39:21.910\nIt was developed under Unix, and so many,\nmany different operating systems and\n\n800\n00:39:21.910 --> 00:39:23.310\nproducts support it.\n\n801\n00:39:23.310 --> 00:39:26.890\nNow Microsoft kind of bastardized\ntheirs a little bit, right?\n\n802\n00:39:26.890 --> 00:39:28.085\n>> [LAUGH]\n>> They tweaked it a bit, so\n\n803\n00:39:28.085 --> 00:39:32.205\nit's not 100% compatible with\nthe traditional Kerberos Version 5.\n\n804\n00:39:32.205 --> 00:39:33.675\nBut it is based on that.\n\n805\n00:39:33.675 --> 00:39:36.345\nAnd so when we build a trust like this,\n\n806\n00:39:36.345 --> 00:39:41.120\nyou can actually build a trust to\na non-Microsoft system, right?\n\n807\n00:39:41.120 --> 00:39:42.680\nAll this talk about domains and forests,\n\n808\n00:39:42.680 --> 00:39:45.085\nwe're assuming this is\nActive Directory to Active Directory.\n\n809\n00:39:45.085 --> 00:39:45.720\n>> Mm-hm.\n\n810\n00:39:45.720 --> 00:39:47.540\n>> But, what if your partner\ndoesn't have an Active Directory?\n\n811\n00:39:47.540 --> 00:39:49.737\nWhat if they've got a you know.\n\n812\n00:39:49.737 --> 00:39:50.252\n>> A Linux realm, or.\n\n813\n00:39:50.252 --> 00:39:53.845\n>> Yeah, Solaris servers with a NIS+\ndomain, or something like that.\n\n814\n00:39:53.845 --> 00:39:56.588\n>> Mm-hm.\nWell that's not Active Directory, so\n\n815\n00:39:56.588 --> 00:39:59.070\nthe regular trusts aren't going to work.\n\n816\n00:39:59.070 --> 00:40:03.948\nBut a realm trust can, so we can build\nup a realm trust to connect out of\n\n817\n00:40:03.948 --> 00:40:07.997\nthe system to be able to synchronize and\ntrust accounts.\n\n818\n00:40:07.997 --> 00:40:09.832\nIt was originally developed.\n\n819\n00:40:09.832 --> 00:40:11.538\nTo support web applications.\n\n820\n00:40:11.538 --> 00:40:16.376\nYou might have web applications running\non a frontend which is on top of\n\n821\n00:40:16.376 --> 00:40:18.880\nsome type of Unix system.\n\n822\n00:40:18.880 --> 00:40:21.420\nAnd you want user accounts\nthat can authenticate and\n\n823\n00:40:21.420 --> 00:40:23.740\naccess resources back in your\nactive directory domain.\n\n824\n00:40:23.740 --> 00:40:26.570\nAnd it kinda stems from way back\nwhen Microsoft acquired Hotmail.\n\n825\n00:40:26.570 --> 00:40:28.960\nYou know Hotmail use to\nbe its own product, and\n\n826\n00:40:28.960 --> 00:40:31.690\nit was all run on BSD servers.\n\n827\n00:40:31.690 --> 00:40:33.213\nAnd so when Microsoft acquired it,\n\n828\n00:40:33.213 --> 00:40:36.280\nthat was like job number one was,\nwe gotta get these off BSD.\n\n829\n00:40:36.280 --> 00:40:38.650\nAnd so they did that over the years.\n\n830\n00:40:38.650 --> 00:40:41.840\nBut setting up that realm trust\nwas part of what facilitated that,\n\n831\n00:40:41.840 --> 00:40:47.100\nto handle the user authentication between\nthese Unix like environments in Windows.\n\n832\n00:40:47.100 --> 00:40:53.340\nSo that external forest doesn't have\nto be an active directory environment.\n\n833\n00:40:53.340 --> 00:40:59.040\nAnything that's compatible with a Kerberos\nrealm, you can build a trust with.\n\n834\n00:40:59.040 --> 00:41:00.876\nSo, when we start to do our design,\n\n835\n00:41:00.876 --> 00:41:05.110\nthinking about where these trusts\nare gonna fall is important, all right.\n\n836\n00:41:05.110 --> 00:41:07.400\nYou don't want to do a forest trust,\n\n837\n00:41:07.400 --> 00:41:10.920\nwhen an external domain trust\nwould have been just fine, right.\n\n838\n00:41:10.920 --> 00:41:12.730\nPrinciple of least privilege.\n\n839\n00:41:12.730 --> 00:41:13.370\n>> Exactly.\n\n840\n00:41:13.370 --> 00:41:15.770\n>> Never give more access than you need.\n\n841\n00:41:15.770 --> 00:41:19.020\nAnd in fact,when you do a realm trust,\ndo we talk about it in this show?\n\n842\n00:41:19.020 --> 00:41:20.930\nThe constrained delegation?\n\n843\n00:41:20.930 --> 00:41:21.875\n>> Yeah, I was wondering if we did.\n\n844\n00:41:21.875 --> 00:41:23.281\nI think we do.\n\n845\n00:41:23.281 --> 00:41:25.785\n>> It is the very last note\non page four of my notes.\n\n846\n00:41:25.785 --> 00:41:26.780\n>> Is it really?\n\n847\n00:41:26.780 --> 00:41:27.890\nI'm gonna mention it now though.\n\n848\n00:41:27.890 --> 00:41:28.920\n>> Let's do it.\n\n849\n00:41:28.920 --> 00:41:30.418\n>> Screw it, didn't order stuff.\n[LAUGH]\n\n850\n00:41:30.418 --> 00:41:31.083\n>> [LAUGH]\n\n851\n00:41:31.083 --> 00:41:33.357\n>> So when you build a realm trust, or\n\n852\n00:41:33.357 --> 00:41:36.967\neven your regular forest trusts,\nand domain trusts,\n\n853\n00:41:36.967 --> 00:41:40.905\nsometimes you don't want\nto trust the entire domain.\n\n854\n00:41:40.905 --> 00:41:41.465\nRight.\n\n855\n00:41:41.465 --> 00:41:44.685\nYeah, it might be a relationship\nbetween ITProTV and TechNet, but\n\n856\n00:41:44.685 --> 00:41:47.485\nI don't wanna trust\nthe entire TechNet domain.\n\n857\n00:41:47.485 --> 00:41:48.025\n>> Right.\n\n858\n00:41:48.025 --> 00:41:51.015\n>> Instead, I just want to trust a couple\nof accounts for some users that are over\n\n859\n00:41:51.015 --> 00:41:52.941\nthere who are going to be doing\nsome work with us, right.\n\n860\n00:41:52.941 --> 00:41:58.100\nSo, in that scenario,\nif I do a domain trust,\n\n861\n00:41:58.100 --> 00:42:02.070\nI'm trusting the whole thing and I might\nbe giving out more access than is needed.\n\n862\n00:42:02.070 --> 00:42:05.200\nSo, you can do a constrained delegation.\n\n863\n00:42:05.200 --> 00:42:08.750\nI'm using my air quotes,\nRichard Nixon mode.\n\n864\n00:42:08.750 --> 00:42:09.647\nAnd with that,\n\n865\n00:42:09.647 --> 00:42:13.605\nyou can specify which accounts\nare allowed to use that trust right?\n\n866\n00:42:13.605 --> 00:42:15.040\nAllowed to pass over it.\n\n867\n00:42:15.040 --> 00:42:19.270\nAnd now we can get really, really super\nspecific down to an organizational unit or\n\n868\n00:42:19.270 --> 00:42:20.780\ndown to individual users if we want.\n\n869\n00:42:20.780 --> 00:42:22.680\n>> Absolutely,\nthat's another thing to think about within\n\n870\n00:42:22.680 --> 00:42:24.540\nWindows with the forest trust.\n\n871\n00:42:24.540 --> 00:42:28.690\nWhen you set up that forest trust, it gets\ncreated between the two forest roots.\n\n872\n00:42:28.690 --> 00:42:31.480\nSo the forest root from one forest and\nthe forest root from the other and\n\n873\n00:42:31.480 --> 00:42:34.430\nremember it's transitive down\nthrough all the domains.\n\n874\n00:42:34.430 --> 00:42:35.900\nWhen you set up that forest trust,\n\n875\n00:42:35.900 --> 00:42:39.000\nyou've got two options as far as\nyour authentication models go.\n\n876\n00:42:39.000 --> 00:42:41.490\nYou have the full-on forest trust and\n\n877\n00:42:41.490 --> 00:42:44.980\nthen you have what they call\na selective forest trust.\n\n878\n00:42:44.980 --> 00:42:46.502\nAnd you've gotta be\nreally careful with that.\n\n879\n00:42:46.502 --> 00:42:48.300\nIf you're doing a business merger or\nsomething like that and\n\n880\n00:42:48.300 --> 00:42:52.290\nyou bought this network you might\nwant that full-on forest trust.\n\n881\n00:42:52.290 --> 00:42:55.270\nWhat we wanna think about is,\nwhen you set up a trust like that you're\n\n882\n00:42:55.270 --> 00:42:59.180\nbasically saying,\nokay we trust your authentication process.\n\n883\n00:42:59.180 --> 00:43:03.600\nAll the users in that other forest are now\na part of your authenticated users group.\n\n884\n00:43:03.600 --> 00:43:07.150\nSo any resources that you had\ngiven before this happened,\n\n885\n00:43:07.150 --> 00:43:10.620\nyou might not have thought about it,\nyou might have given a lot of permissions\n\n886\n00:43:10.620 --> 00:43:13.230\nover resources, using\nthe authenticated users group, right?\n\n887\n00:43:13.230 --> 00:43:16.640\nIt's an easy way to make sure\nthat everybody in my domain or\n\n888\n00:43:16.640 --> 00:43:18.780\nwhatever has access to the resource.\n\n889\n00:43:18.780 --> 00:43:20.460\nWell once I set up that trust,\n\n890\n00:43:20.460 --> 00:43:24.360\nthey are immediately now considered\na trusted user and they would also have\n\n891\n00:43:24.360 --> 00:43:27.942\naccess to every place you had used\nthat authenticated user script.\n\n892\n00:43:27.942 --> 00:43:30.420\nWhich is typically not what we want to do,\nand\n\n893\n00:43:30.420 --> 00:43:33.040\nthat's where we get to do\nselective forest trust.\n\n894\n00:43:33.040 --> 00:43:37.400\nAnd in that case, you set up the forest\ntrust, you choose the selective model and\n\n895\n00:43:37.400 --> 00:43:40.210\nthen you have to go back and\npick and choose\n\n896\n00:43:40.210 --> 00:43:44.730\nwhat servers the people coming across that\ntrust are allowed to authenticate with.\n\n897\n00:43:44.730 --> 00:43:49.010\nSo it gives me a way to restrict\nwhat they're accessing.\n\n898\n00:43:49.010 --> 00:43:52.510\n>> Yeah, you know the alternative is\nto just create them a new user account,\n\n899\n00:43:52.510 --> 00:43:54.940\nright, make a user account\nunder your own domain [LAUGH].\n\n900\n00:43:54.940 --> 00:43:57.640\nBut even that can sometimes\ngive away more than we want.\n\n901\n00:43:57.640 --> 00:44:00.510\nAnd you don't want people to have\nmultiple accounts if they don't need it.\n\n902\n00:44:00.510 --> 00:44:03.910\nIf this is going to be a long term\nrelationship, you build a trust and\n\n903\n00:44:03.910 --> 00:44:05.450\nit makes life a lot easier.\n\n904\n00:44:05.450 --> 00:44:07.800\nNow Mike,\nwe didn't always have forest trust right?\n\n905\n00:44:07.800 --> 00:44:09.291\nWhich version of Windows introduced that?\n\n906\n00:44:09.291 --> 00:44:10.791\nWas it, it was 2003?\n\n907\n00:44:10.791 --> 00:44:12.160\n>> It was 2003 I think?\n\n908\n00:44:12.160 --> 00:44:14.120\n>> Pretty sure it was Windows Server 2003.\n\n909\n00:44:14.120 --> 00:44:17.570\nSo you may encounter\nenvironments that are out there\n\n910\n00:44:17.570 --> 00:44:21.670\nthat are old school active directory\nshops that were deployed back in Windows\n\n911\n00:44:21.670 --> 00:44:24.550\n2000 when the AD first came out and\nwe didn't have forest trust.\n\n912\n00:44:24.550 --> 00:44:28.430\nAnd so you may go somewhere they\nhave a ton of domain trusts,\n\n913\n00:44:28.430 --> 00:44:30.380\nbecause that was just\nall they had back then.\n\n914\n00:44:30.380 --> 00:44:34.870\nAnd as they've upgraded to newer versions\nof Windows new functionalities come in but\n\n915\n00:44:34.870 --> 00:44:36.950\nthey haven't taken advantage of it yet,\nright.\n\n916\n00:44:36.950 --> 00:44:40.460\nSo, there may be times when you need\nto switch to supporting new things.\n\n917\n00:44:40.460 --> 00:44:43.730\nBut just keep in mind that some of the\nfeatures available in the active directory\n\n918\n00:44:43.730 --> 00:44:46.410\nare tied to particular\nversions of Windows Server.\n\n919\n00:44:46.410 --> 00:44:48.970\nAnd if your domain controllers\naren't at the right level.\n\n920\n00:44:48.970 --> 00:44:52.600\nAnd if you're forest and domain functional\nlevels aren't set to the right level,\n\n921\n00:44:52.600 --> 00:44:54.950\nyou may not have that capability.\n\n922\n00:44:54.950 --> 00:44:59.340\nAnd that's actually the very next\nnote I've got in my show notes here.\n\n923\n00:44:59.340 --> 00:45:00.590\n>> That was a great segue.\n\n924\n00:45:00.590 --> 00:45:01.730\n>> I know, I try.\n\n925\n00:45:01.730 --> 00:45:03.430\nWhich is right here.\n\n926\n00:45:03.430 --> 00:45:05.555\nThat we need to make\nsure when we design for\n\n927\n00:45:05.555 --> 00:45:08.575\nall this stuff that we understand\nthe functional levels.\n\n928\n00:45:08.575 --> 00:45:10.020\n>> Mm-hm.\n>> And this is one of the biggest\n\n929\n00:45:10.020 --> 00:45:13.040\nchallenges of the design exam,\nbecause you'll get questions.\n\n930\n00:45:13.040 --> 00:45:17.629\nAnd, in the question, when it's\ndescribing the topology, it'll tell you,\n\n931\n00:45:17.629 --> 00:45:20.917\nthis server is running\nWindows Server 2008 R2, and\n\n932\n00:45:20.917 --> 00:45:24.500\nyour forest functional level\nis at Windows Server 2003.\n\n933\n00:45:24.500 --> 00:45:26.360\nAnd your domain functional level\nis at Windows Server 2003.\n\n934\n00:45:26.360 --> 00:45:27.815\nAnd you want to do this.\n\n935\n00:45:27.815 --> 00:45:28.440\n>> Mm-hm.\n\n936\n00:45:28.440 --> 00:45:29.920\n>> What's your first step?\n\n937\n00:45:29.920 --> 00:45:33.420\nAnd your first step might be to\nchange the functional level, or\n\n938\n00:45:33.420 --> 00:45:36.250\nit might not be based on whether or\nnot it's needed.\n\n939\n00:45:36.250 --> 00:45:39.380\nSo, for the exam you've got to have\na good understanding of the differences\n\n940\n00:45:39.380 --> 00:45:40.680\nbetween them.\n\n941\n00:45:40.680 --> 00:45:44.140\nAnd Microsoft has a great article\nwhich I'll post with the show notes.\n\n942\n00:45:44.140 --> 00:45:46.040\nLet me bring this guy up.\n\n943\n00:45:46.040 --> 00:45:50.810\nThat breaks down all the functional levels\nsince the beginning of Windows 2000,\n\n944\n00:45:50.810 --> 00:45:52.210\nall right?\n\n945\n00:45:52.210 --> 00:45:54.770\nWindows 2000 is when the active\ndirectory was created.\n\n946\n00:45:54.770 --> 00:45:56.740\nIt didn't exist prior to that.\n\n947\n00:45:56.740 --> 00:45:59.232\nAnd so, back then you didn't\nhave functional levels,\n\n948\n00:45:59.232 --> 00:46:01.340\nit was just Windows 2000.\n\n949\n00:46:01.340 --> 00:46:04.770\nBut when Windows Server 2003 came out,\nthey had to change that.\n\n950\n00:46:04.770 --> 00:46:06.070\nThey introduced new features.\n\n951\n00:46:06.070 --> 00:46:10.375\nAnd so you had the native mode,\nwhich was Windows 2000.\n\n952\n00:46:10.375 --> 00:46:15.310\nAnd there was actually a hybrid mode too,\nwhich was Windows 2000 mixed with NT4.\n\n953\n00:46:15.310 --> 00:46:16.900\nYeah.\nHopefully, you never see that.\n\n954\n00:46:18.710 --> 00:46:21.541\nBut then you had the 2003 level, right?\n\n955\n00:46:21.541 --> 00:46:25.477\nWell, in 2008,\nwe started to have forest levels and\n\n956\n00:46:25.477 --> 00:46:28.810\ndomain levels that were really separate.\n\n957\n00:46:28.810 --> 00:46:33.560\nAnd in 2012, we've seen an extension\nof that, each one adding a little more.\n\n958\n00:46:33.560 --> 00:46:39.310\nAnd where it gets really confusing is\nthat you have domain functional levels,\n\n959\n00:46:39.310 --> 00:46:42.450\nwhich apparently is a hot\nlink that I can't highlight.\n\n960\n00:46:42.450 --> 00:46:44.340\n>> Yeah.\nBecause it collapses that section, yeah.\n\n961\n00:46:44.340 --> 00:46:47.060\n>> So there's domain functional levels and\n\n962\n00:46:47.060 --> 00:46:50.120\nthere's forest functional levels,\nall right?\n\n963\n00:46:50.120 --> 00:46:54.550\nAnd so, the two,\nthey kind of have to go together.\n\n964\n00:46:54.550 --> 00:46:58.960\nIf your forest functional level is set\nhigh, then your domain level normally has\n\n965\n00:46:58.960 --> 00:47:01.210\nto keep up, but your domains\nmight be higher than the forest,\n\n966\n00:47:01.210 --> 00:47:02.780\nit does get a little bit confusing.\n\n967\n00:47:02.780 --> 00:47:03.400\n>> Yeah.\n\n968\n00:47:03.400 --> 00:47:05.440\n>> But,\ndepending on what feature you want,\n\n969\n00:47:05.440 --> 00:47:06.810\nyou may need to move to a new version.\n\n970\n00:47:07.960 --> 00:47:08.760\nFor your design,\n\n971\n00:47:08.760 --> 00:47:13.870\nthe key thing to remember is that when\nyou go to a particular functional level,\n\n972\n00:47:13.870 --> 00:47:18.110\nall of your domain controllers need to\nbe at at least that version of Windows.\n\n973\n00:47:19.140 --> 00:47:21.610\nSo, raising your functional\nlevel may necessitate\n\n974\n00:47:21.610 --> 00:47:23.480\nupgrading some of your domain controllers.\n\n975\n00:47:23.480 --> 00:47:25.550\n>> In fact you can't\nraise it until you do.\n\n976\n00:47:25.550 --> 00:47:29.920\nLike if you want to take advantage\nof the active directory recycle bin,\n\n977\n00:47:29.920 --> 00:47:31.360\nthat came out in 2008 R2.\n\n978\n00:47:31.360 --> 00:47:35.510\nThat meant you had to be at 2008\nR2 domain functional level.\n\n979\n00:47:35.510 --> 00:47:40.200\nReally what that is saying is, all of your\ndomain controllers have to be running\n\n980\n00:47:40.200 --> 00:47:44.180\n2008 R2 because that's a feature\nthat 2003 domain controllers,\n\n981\n00:47:44.180 --> 00:47:46.730\n2008 domain controllers\nare not gonna understand.\n\n982\n00:47:46.730 --> 00:47:50.980\nSo I have to first upgrade all\nof my servers to that particular\n\n983\n00:47:50.980 --> 00:47:52.560\nversion of the operating system.\n\n984\n00:47:52.560 --> 00:47:55.420\nThen I can raise my, say,\ndomain functional level.\n\n985\n00:47:55.420 --> 00:47:57.390\nThe other thing you want\nto keep in mind is,\n\n986\n00:47:57.390 --> 00:48:00.000\nonce you do that you get to take\nadvantage of the new features.\n\n987\n00:48:00.000 --> 00:48:02.267\nYou'll never be able to\nintroduce a older or\n\n988\n00:48:02.267 --> 00:48:05.035\ndown level operating system\nas a domain controller.\n\n989\n00:48:05.035 --> 00:48:08.660\nRight, it doesn't matter about your\nprint servers, your file servers,\n\n990\n00:48:08.660 --> 00:48:12.525\nthings like that but it's something you've\ngot to keep in mind in your design.\n\n991\n00:48:12.525 --> 00:48:14.347\nBecause, okay, great, I want to upgrade.\n\n992\n00:48:14.347 --> 00:48:16.157\nI want to go to this\nnew functional level so\n\n993\n00:48:16.157 --> 00:48:18.550\nI can take advantage of this new feature.\n\n994\n00:48:18.550 --> 00:48:20.900\nBut I might have some domain controllers\nthat I don't have licenses or\n\n995\n00:48:20.900 --> 00:48:24.390\nthat I can't upgrade, or we're getting\nready to merge something else in and\n\n996\n00:48:24.390 --> 00:48:26.380\nthey're running older domain controllers.\n\n997\n00:48:26.380 --> 00:48:28.150\nAnd that would end up preventing that.\n\n998\n00:48:28.150 --> 00:48:29.140\n>> Yeah, absolutely.\n\n999\n00:48:29.140 --> 00:48:32.040\nAnd you might be asking yourself, Is this\nsomething I really need to worry about.\n\n1000\n00:48:32.040 --> 00:48:33.870\nIf I go to a workplace and\n\n1001\n00:48:33.870 --> 00:48:37.000\nall of their domain controllers are\nWindows Server 2012, do I care about this?\n\n1002\n00:48:37.000 --> 00:48:38.410\nAnd the answer is yes you do.\n\n1003\n00:48:38.410 --> 00:48:40.170\nAnd here's why.\n\n1004\n00:48:40.170 --> 00:48:45.880\nJust literally two months ago, I went\nto help out a former student of mine.\n\n1005\n00:48:45.880 --> 00:48:46.980\nAnd I went to their network, and\n\n1006\n00:48:46.980 --> 00:48:48.980\nthey had Windows Server 2012\ndomain controllers, all right?\n\n1007\n00:48:50.110 --> 00:48:53.050\nBut when I looked at\ntheir functional levels,\n\n1008\n00:48:53.050 --> 00:48:56.110\nthey were still set to\nWindows Server 2003.\n\n1009\n00:48:56.110 --> 00:49:00.590\nAnd the reason is they kept promoting\ntheir domain controllers but you don't\n\n1010\n00:49:00.590 --> 00:49:04.610\nhave to raise your functional level just\nto put newer domain controllers on there.\n\n1011\n00:49:04.610 --> 00:49:07.280\nSo they were running without\nsome of these new features and\n\n1012\n00:49:07.280 --> 00:49:09.550\nhe was trying to figure out why\nthese features weren't working and\n\n1013\n00:49:09.550 --> 00:49:11.950\nthat's what it was is\nthe functional level is wrong.\n\n1014\n00:49:11.950 --> 00:49:16.370\nSo just because somebody's moved to newer\ndomain controller, newer operating systems\n\n1015\n00:49:16.370 --> 00:49:19.360\non their DCs doesn't mean they've\nraised the functional level.\n\n1016\n00:49:19.360 --> 00:49:22.782\nSo especially on old networks, mature\nnetworks that have been around a while,\n\n1017\n00:49:22.782 --> 00:49:24.531\nthey may still be at those older levels.\n\n1018\n00:49:24.531 --> 00:49:28.970\nSo now you might ask yourself,\nwhy wouldn't I want to raise the level?\n\n1019\n00:49:28.970 --> 00:49:31.290\nIf I'm all 2012, why not raise it?\n\n1020\n00:49:31.290 --> 00:49:33.980\nThe main reason that you\nmight not want to raise it\n\n1021\n00:49:33.980 --> 00:49:36.590\nis that you can't lower\nit once it's been raised.\n\n1022\n00:49:36.590 --> 00:49:41.260\nIf you raise your functional level to\na higher edition, and then all of a sudden\n\n1023\n00:49:41.260 --> 00:49:46.400\nsomething happens where you need, maybe\nyou raised it to the 2012 functional level\n\n1024\n00:49:46.400 --> 00:49:49.280\nand all of a sudden you need a 2008\ndomain controller for some reason.\n\n1025\n00:49:49.280 --> 00:49:50.670\n>> Right.\n>> All right?\n\n1026\n00:49:50.670 --> 00:49:51.230\nYou can't.\n\n1027\n00:49:51.230 --> 00:49:52.170\n>> You're stuck.\n\n1028\n00:49:52.170 --> 00:49:54.405\n>> You can't bring up a 2008 domain\ncontroller when you're at the 2012\n\n1029\n00:49:54.405 --> 00:49:57.440\nfunctional level, and\nyou can't lower your functional level.\n\n1030\n00:49:57.440 --> 00:50:00.220\nThe only way to lower it\nis to restore all of your\n\n1031\n00:50:00.220 --> 00:50:02.398\ndomain controllers from backup, right?\n\n1032\n00:50:02.398 --> 00:50:02.907\n[LAUGH]\n>> [LAUGH] Mm-hm.\n\n1033\n00:50:02.907 --> 00:50:03.754\n>> That's it, and\n\n1034\n00:50:03.754 --> 00:50:06.950\nthat's not a realistic solution.\n>> No, no.\n\n1035\n00:50:06.950 --> 00:50:11.370\n>> So definitely not something you're\ngoing wanna do on any given day.\n\n1036\n00:50:11.370 --> 00:50:15.180\nNow, so a lot of people are hesitant\nto raise the functional level.\n\n1037\n00:50:15.180 --> 00:50:16.240\nThey wait until the last possible chance.\n\n1038\n00:50:16.240 --> 00:50:17.620\n>> Yeah, right, exactly.\n\n1039\n00:50:17.620 --> 00:50:18.850\n>> I can give you a great scenario.\n\n1040\n00:50:18.850 --> 00:50:25.220\nI remember, and Mike you might remember\nthis, when we initially deployed\n\n1041\n00:50:25.220 --> 00:50:31.440\nWindows Server 2003, we took that into, we\nwent right to that 2003 functional level,\n\n1042\n00:50:31.440 --> 00:50:35.860\nand we had a Nas Box,\nit was from Buffalo storage, and\n\n1043\n00:50:35.860 --> 00:50:39.470\nit supported active directory integration,\nso it would do authentication.\n\n1044\n00:50:39.470 --> 00:50:41.300\nWell, it worked great under Windows 2000.\n\n1045\n00:50:41.300 --> 00:50:43.850\n>> Yep.\n>> But when we went to 2003 domain\n\n1046\n00:50:43.850 --> 00:50:45.715\ncontrollers, it would\njust not talk to them.\n\n1047\n00:50:45.715 --> 00:50:46.420\n>> Mm-mm, not at all.\n\n1048\n00:50:46.420 --> 00:50:49.430\n>> And so\nthe tech support solution was well,\n\n1049\n00:50:49.430 --> 00:50:51.670\njust bring up a Windows\n2000 domain controller.\n\n1050\n00:50:51.670 --> 00:50:52.740\nAnd we're like, well we can't.\n\n1051\n00:50:52.740 --> 00:50:54.710\n>> Yeah.\n>> We've all ready moved beyond that, so\n\n1052\n00:50:54.710 --> 00:50:55.740\nwe can't bring it up.\n\n1053\n00:50:55.740 --> 00:50:58.350\nSo we weren't able to use domain\nauthentication on that box.\n\n1054\n00:50:58.350 --> 00:50:59.670\n>> That's right.\nI remember that.\n\n1055\n00:50:59.670 --> 00:51:02.050\n>> That was a problem that plagued\nthat box until we got rid of it.\n\n1056\n00:51:02.050 --> 00:51:06.100\nSo that's a scenario and\nhopefully that doesn't happen to you but\n\n1057\n00:51:06.100 --> 00:51:07.570\nthat kind of thing can happen.\n\n1058\n00:51:07.570 --> 00:51:10.900\nSo let's look at some of the features\nthat we get with each one.\n\n1059\n00:51:10.900 --> 00:51:14.239\nNow you'll notice this article\nstarts with Windows 2000 Native, and\n\n1060\n00:51:14.239 --> 00:51:17.531\nthere's no mention of that mixed mode\nthat Mike and I were talking about.\n\n1061\n00:51:17.531 --> 00:51:21.905\n>> And that's because NT4 is 100% off\nof Microsoft's support model and so\n\n1062\n00:51:21.905 --> 00:51:24.070\nthey don't even address it anymore.\n\n1063\n00:51:24.070 --> 00:51:28.050\nBut there is a mixed mode that's\njust not being shown here.\n\n1064\n00:51:29.200 --> 00:51:33.640\nAll right, at the domain functional level,\nWindows 2000 was the beginning one.\n\n1065\n00:51:33.640 --> 00:51:38.450\nThat's what gave us active directory\nfunctionality and universal group nesting.\n\n1066\n00:51:38.450 --> 00:51:41.720\nWe don't have to remember this one because\nit's what gives us functionality, right.\n\n1067\n00:51:41.720 --> 00:51:42.280\n>> Yes.\n\n1068\n00:51:42.280 --> 00:51:43.480\nIt makes it all work.\n\n1069\n00:51:43.480 --> 00:51:46.640\n>> Windows 2003 though,\nyou'll see it started to add things.\n\n1070\n00:51:47.770 --> 00:51:50.670\nAdding things like the NetDom tool for\n\n1071\n00:51:50.670 --> 00:51:55.365\nmanually creating user accounts, domains,\nand so forth from the command line.\n\n1072\n00:51:55.365 --> 00:51:58.795\nBut it also gave us renaming\ndomain controllers and\n\n1073\n00:51:58.795 --> 00:52:03.825\nthat's a specific exam objective on\nthe list, so expect to see that.\n\n1074\n00:52:03.825 --> 00:52:07.735\nIf you want to rename a domain controller,\nyou've got to be at the Windows Server\n\n1075\n00:52:07.735 --> 00:52:11.065\n2003 domain functional level or\nyou won't be able to do it, remember that.\n\n1076\n00:52:12.270 --> 00:52:16.550\nAll right, some of the other one,\nthings like setting the user password from\n\n1077\n00:52:16.550 --> 00:52:18.840\na script,\nin the past you couldn't do that.\n\n1078\n00:52:18.840 --> 00:52:21.385\n>> And other things, redirecting users.\n\n1079\n00:52:21.385 --> 00:52:22.282\n>> EMP, yep.\n\n1080\n00:52:22.282 --> 00:52:25.940\n>> Constrain delegation of trusts,\nthis is where that came in,\n\n1081\n00:52:25.940 --> 00:52:30.460\nin the 2003 model and I think that's\nthe main thing, selective authentication.\n\n1082\n00:52:30.460 --> 00:52:32.365\nSo those are the main bells and\nwhistles there.\n\n1083\n00:52:32.365 --> 00:52:35.600\nNow, let's roll back our clock ten years.\n\n1084\n00:52:35.600 --> 00:52:40.000\nSo let's say the year is 2004 and\nWindows Server 2003 has been out for\n\n1085\n00:52:40.000 --> 00:52:43.369\na year now, you're getting ready to\ndeploy it and you look at that list.\n\n1086\n00:52:44.560 --> 00:52:46.940\nIf you look at those options and\nyou say, you know what?\n\n1087\n00:52:46.940 --> 00:52:49.100\nI don't need any of those features.\n\n1088\n00:52:49.100 --> 00:52:51.689\nIf you don't need those features,\nis there any reason to go ahead and\n\n1089\n00:52:51.689 --> 00:52:52.906\nupgrade the functional level?\n\n1090\n00:52:52.906 --> 00:52:53.448\n>> Nope.\n\n1091\n00:52:53.448 --> 00:52:54.074\nI would not.\n\n1092\n00:52:54.074 --> 00:52:55.657\n>> No.\n>> Then all you're doing is putting\n\n1093\n00:52:55.657 --> 00:52:56.950\na constraint on yourself.\n\n1094\n00:52:56.950 --> 00:52:58.670\nNow you're not going to\nbe able to roll back,\n\n1095\n00:52:58.670 --> 00:53:01.640\nyou're never going to be able to add\nthat old 2000 to main controller.\n\n1096\n00:53:01.640 --> 00:53:05.220\nSo you really want to look at what you're\ngoing to get by going to that level.\n\n1097\n00:53:05.220 --> 00:53:08.250\nThere's some forced functional levels\nthat we're going to talk about later,\n\n1098\n00:53:08.250 --> 00:53:09.300\nthat provide nothing.\n\n1099\n00:53:09.300 --> 00:53:13.730\nThere's no new features introduced by\ngoing to that particular functional level,\n\n1100\n00:53:13.730 --> 00:53:15.700\nso why would you?\n\n1101\n00:53:15.700 --> 00:53:18.670\nMaybe you want to prevent,\nmaybe you really want to make sure\n\n1102\n00:53:18.670 --> 00:53:22.020\nsomebody never introduces a 2000 main\ncontroller, that might be a reason.\n\n1103\n00:53:22.020 --> 00:53:25.380\nBut yeah, if you don't need the features,\nyou might as well not do them.\n\n1104\n00:53:25.380 --> 00:53:29.840\n>> And that's what you'll see on the exam\nis you need to pick the lowest functional\n\n1105\n00:53:29.840 --> 00:53:33.030\nlevel that gives you\nthe functions you need, right?\n\n1106\n00:53:33.030 --> 00:53:34.189\nAnd that is kinda challenging.\n\n1107\n00:53:35.560 --> 00:53:38.402\nNow, in this document you'll\nsee on the right side here,\n\n1108\n00:53:38.402 --> 00:53:42.115\nwhat they're listing is supported\ndomain controller operating systems.\n\n1109\n00:53:42.115 --> 00:53:46.484\n>> So, when we talk about Windows\n2000 native, see how it does 2000,\n\n1110\n00:53:46.484 --> 00:53:49.366\n2003, 2008, it doesn't do 2012.\n\n1111\n00:53:49.366 --> 00:53:50.814\n>> Right.\n>> So you actually can't have\n\n1112\n00:53:50.814 --> 00:53:53.390\n2012 domain controllers on\na 2000 native environment.\n\n1113\n00:53:53.390 --> 00:53:57.240\nYou'll need to at least\nbump up to Windows 2003.\n\n1114\n00:53:57.240 --> 00:54:01.238\nSo notice the 2003 functional level,\nyou can have 2012 domain controllers.\n\n1115\n00:54:01.238 --> 00:54:05.060\nAnd that was exactly what I ran into\nat this place a few months ago.\n\n1116\n00:54:05.060 --> 00:54:08.450\nThey had 2012 domain controllers and\na 2003 functional level.\n\n1117\n00:54:08.450 --> 00:54:09.360\nYou can do it.\n\n1118\n00:54:09.360 --> 00:54:11.950\n>> Yeah, cuz as Don said,\nyou bring in that new domain controller,\n\n1119\n00:54:11.950 --> 00:54:15.620\nit's gonna dumb itself down\nto whatever you already have.\n\n1120\n00:54:15.620 --> 00:54:20.660\nSo if you start with scratch and you\ninstall 2012 R2 on it when you go through\n\n1121\n00:54:20.660 --> 00:54:25.300\nthat wizard, when you do your DC promo,\nyou can pick your functional level.\n\n1122\n00:54:25.300 --> 00:54:27.030\nBut it's going to default to 2012 or\n\n1123\n00:54:27.030 --> 00:54:30.590\n2012 R2 if that's what you're installing\ncuz there's nothing else on the network.\n\n1124\n00:54:30.590 --> 00:54:33.630\nIf you've already got a network,\nas Don said, and you bring in that domain\n\n1125\n00:54:33.630 --> 00:54:37.210\ncontroller, it's got to dumb\nitself down to that current level.\n\n1126\n00:54:37.210 --> 00:54:38.906\nAnd it's not gonna raise\nitself automatically.\n\n1127\n00:54:38.906 --> 00:54:40.031\n>> Yep.\n\n1128\n00:54:40.031 --> 00:54:43.947\nAll right now, if we go up to the 2008\ndomain functional level, and again,\n\n1129\n00:54:43.947 --> 00:54:45.823\nthis is domain, not forest, right?\n\n1130\n00:54:45.823 --> 00:54:48.306\n>> Mm-hm.\n>> So the 2008 domain controller,\n\n1131\n00:54:48.306 --> 00:54:49.910\nwe got DFS support, right?\n\n1132\n00:54:49.910 --> 00:54:51.330\nOr DFSR, right?\n\n1133\n00:54:51.330 --> 00:54:55.690\nThat's a big deal, that's a motivator for\nme to 2008, because FRS,\n\n1134\n00:54:55.690 --> 00:54:57.540\nthe old file replication service?\n\n1135\n00:54:57.540 --> 00:54:59.902\nIt sucked, it was really bad.\n\n1136\n00:54:59.902 --> 00:55:00.764\n>> [LAUGH]\n>> And\n\n1137\n00:55:00.764 --> 00:55:05.280\nactive directory synchronization\nwould break down at random intervals.\n\n1138\n00:55:05.280 --> 00:55:06.640\nIt was just a mess.\n\n1139\n00:55:06.640 --> 00:55:10.545\nWell, the 2008 domain functional level\nbrought in DFSR to replace that.\n\n1140\n00:55:10.545 --> 00:55:13.360\nLight-years ahead of FRS.\n\n1141\n00:55:13.360 --> 00:55:15.980\nAnd so that was a big motivator, and\n\n1142\n00:55:15.980 --> 00:55:20.370\nthis is normally the functional level that\nI'll go to, and I usually stop right here.\n\n1143\n00:55:20.370 --> 00:55:24.610\nSo most of the systems that I manage,\nthat's kind of my level of choice.\n\n1144\n00:55:24.610 --> 00:55:27.760\nBut you'll see domain\nbased DFS name spaces.\n\n1145\n00:55:27.760 --> 00:55:32.640\nAES 128 and 256 support for\nauthentication, so stronger encryption.\n\n1146\n00:55:32.640 --> 00:55:35.180\nThat's always a good thing.\n\n1147\n00:55:35.180 --> 00:55:37.165\nInformation about the last\ninteractive log in.\n\n1148\n00:55:37.165 --> 00:55:40.360\nFine-grained password policies.\n\n1149\n00:55:40.360 --> 00:55:41.170\nWe talk about those.\n\n1150\n00:55:41.170 --> 00:55:43.824\nPersonal virtual desktops\nI'm not a big fan of, but\n\n1151\n00:55:43.824 --> 00:55:45.948\nyou see that's a big update right there.\n\n1152\n00:55:45.948 --> 00:55:46.610\n>> It's huge, yeah.\n\n1153\n00:55:46.610 --> 00:55:49.865\n>> A lot of features that people\nwould really like to have.\n\n1154\n00:55:49.865 --> 00:55:52.320\nThen you get to 2008 R2.\n\n1155\n00:55:52.320 --> 00:55:54.080\nWhat is that functional level at?\n\n1156\n00:55:54.080 --> 00:55:55.830\nWell, not much.\n\n1157\n00:55:55.830 --> 00:56:00.790\nAn authentication mechanism update for\nactive directory federation services.\n\n1158\n00:56:00.790 --> 00:56:05.073\nIf you don't use federation services,\nyou don't care, right?\n\n1159\n00:56:05.073 --> 00:56:09.507\nAnd then automatic SPN management for\nservices on a particular computer blah,\n\n1160\n00:56:09.507 --> 00:56:10.335\nblah, blah.\n\n1161\n00:56:10.335 --> 00:56:12.240\n>> Woo-hoo!\n>> Well, if you're like me,\n\n1162\n00:56:12.240 --> 00:56:16.036\nyou've been doing manual SPN\nmanagement for the longest time, so\n\n1163\n00:56:16.036 --> 00:56:20.597\nThe fact that it's automatic, that's nice,\nbut how often do you change SPN?\n\n1164\n00:56:20.597 --> 00:56:23.290\nThat's service principle names.\n\n1165\n00:56:23.290 --> 00:56:26.200\nYou can have more than one\nname attached to a system and\n\n1166\n00:56:26.200 --> 00:56:31.660\nin the past you used the set SPN\ncommand line utility when you did it.\n\n1167\n00:56:31.660 --> 00:56:33.410\nBut this one gives you\nautomatic functionality.\n\n1168\n00:56:33.410 --> 00:56:35.940\nSo if that's something you want, great.\n\n1169\n00:56:35.940 --> 00:56:36.990\nGo to 2008 R2.\n\n1170\n00:56:36.990 --> 00:56:38.860\nBut to me it's not normally\na motivating factor.\n\n1171\n00:56:38.860 --> 00:56:42.560\nAnd if you go to the 2008\nR2 model functional level,\n\n1172\n00:56:42.560 --> 00:56:44.210\nnow you can't have 2008\ndomain controllers.\n\n1173\n00:56:44.210 --> 00:56:45.080\nThey've got to be R2.\n\n1174\n00:56:45.080 --> 00:56:48.550\nAll right, 2012 even less.\n\n1175\n00:56:48.550 --> 00:56:53.195\nGo into that 2012 and\nyou get this KDC support for\n\n1176\n00:56:53.195 --> 00:56:56.280\nclaims, and some different changes there.\n\n1177\n00:56:56.280 --> 00:57:00.880\nYou actually had KDC support for\nclaims before, this is just extending it.\n\n1178\n00:57:00.880 --> 00:57:02.410\nCompound authentication.\n\n1179\n00:57:02.410 --> 00:57:04.790\n>> Dynamic access control,\nthings like that.\n\n1180\n00:57:04.790 --> 00:57:08.800\nAnd if you're not really using that\nMight not be a reason to go to that.\n\n1181\n00:57:08.800 --> 00:57:09.540\n>> Yep.\n\n1182\n00:57:09.540 --> 00:57:12.280\nBut then in R2 they got back to\nadding some better features.\n\n1183\n00:57:12.280 --> 00:57:14.390\nYou'll some increased security.\n\n1184\n00:57:14.390 --> 00:57:14.940\nRight.\n\n1185\n00:57:14.940 --> 00:57:19.557\nAnd notice how it's using DES or\nRC4 for Kerberos preauthentication.\n\n1186\n00:57:19.557 --> 00:57:23.940\nWhich does a really week\nencryption standards right.\n\n1187\n00:57:23.940 --> 00:57:29.590\nAnd so you'll see here it says protected\nusers authenticating can no longer.\n\n1188\n00:57:29.590 --> 00:57:31.910\nIt's actually blocking those off.\n\n1189\n00:57:31.910 --> 00:57:33.580\nFor those users, for protected users.\n\n1190\n00:57:33.580 --> 00:57:38.730\nSo increasing security, we get\nauthentication policies and policy silos.\n\n1191\n00:57:38.730 --> 00:57:41.850\nNew features that if you need those,\n\n1192\n00:57:41.850 --> 00:57:44.680\nif you need to set up\nspecial authentication silos.\n\n1193\n00:57:44.680 --> 00:57:49.290\nThis is really dealing with\nthose managed services accounts.\n\n1194\n00:57:49.290 --> 00:57:50.590\nThat if you're gonna need that,\n\n1195\n00:57:50.590 --> 00:57:53.640\nYou'll want to bump up that\n2012 R2 function level.\n\n1196\n00:57:53.640 --> 00:57:54.810\nNotice on the right side,\n\n1197\n00:57:54.810 --> 00:57:57.680\nwhat domain controllers can you\nhave when you go to 2012 R2?\n\n1198\n00:57:57.680 --> 00:57:59.160\nJust 2012 R2.\n\n1199\n00:57:59.160 --> 00:58:01.080\nThat list gets smaller and\n\n1200\n00:58:01.080 --> 00:58:04.650\nsmaller with each level as it\nprunes off the previous versions.\n\n1201\n00:58:04.650 --> 00:58:09.030\nSo a lot of people are not in\na hurry to get to that newest one.\n\n1202\n00:58:09.030 --> 00:58:09.850\nBut on the exam,\n\n1203\n00:58:09.850 --> 00:58:13.220\nif they're talking about you needing a\nparticular feature, it's gonna be part of\n\n1204\n00:58:13.220 --> 00:58:16.360\nyour design that you'll need to go to\na certain function level to support that.\n\n1205\n00:58:16.360 --> 00:58:17.290\n>> An easy step to forget,\n\n1206\n00:58:17.290 --> 00:58:19.470\nbecause you're really worried about\nimplementing that feature and\n\n1207\n00:58:19.470 --> 00:58:22.580\nyou're going through and you're dragging\nall the steps in the right order.\n\n1208\n00:58:22.580 --> 00:58:23.860\nYou forgot the most important one.\n\n1209\n00:58:23.860 --> 00:58:26.548\nYou can't do any of it if you didn't\nraise that functional level first.\n\n1210\n00:58:26.548 --> 00:58:31.163\n>> Yup, all right, so,\nthat's our domain functional levels.\n\n1211\n00:58:31.163 --> 00:58:33.590\nWe'll take a look at the forest\nfunctional levels in just a moment.\n\n1212\n00:58:33.590 --> 00:58:36.130\nWe're looking at the clock,\nit's a good spot for us to stop.\n\n1213\n00:58:36.130 --> 00:58:39.730\nSo, we'll take a pause right here and\ncatch some breaths.\n\n1214\n00:58:39.730 --> 00:58:42.715\nWhen we get back we'll take a look\nat forest functional levels, so\n\n1215\n00:58:42.715 --> 00:58:45.896\nstay tuned we'll be back in a few.\n\n1216\n00:58:45.896 --> 00:58:53.440\n[NOISE] All right, welcome back everybody.\n\n1217\n00:58:53.440 --> 00:58:56.710\nSo before the break we were talking\nabout domain functional levels.\n\n1218\n00:58:56.710 --> 00:58:59.970\nAnd one thing that's really easy to forget\nis that you've got a domain functional\n\n1219\n00:58:59.970 --> 00:59:03.510\nlevel and\nyou've got a forest functional level.\n\n1220\n00:59:03.510 --> 00:59:06.190\nAnd just because you've\nbeen raising your domain\n\n1221\n00:59:06.190 --> 00:59:08.170\ndoesn't mean the forest is at that level.\n\n1222\n00:59:08.170 --> 00:59:12.530\nSo you might have one domain that's at a\nWindow's server 2012 functional level and\n\n1223\n00:59:12.530 --> 00:59:14.660\nonly has 2012 domain controllers.\n\n1224\n00:59:14.660 --> 00:59:18.670\nMeanwhile you've got another domain that's\nstill the 2008 functional level and\n\n1225\n00:59:18.670 --> 00:59:20.530\nhas 2008 domain controllers.\n\n1226\n00:59:20.530 --> 00:59:25.070\nSo that's almost a reason to have\nmultiple domains if you need that kind of\n\n1227\n00:59:25.070 --> 00:59:26.930\nseparation you could do that.\n\n1228\n00:59:26.930 --> 00:59:29.790\nBut just keep in mind\nas you raise one domain\n\n1229\n00:59:29.790 --> 00:59:33.760\nit doesn't effect the other domains,\neach domain is tracking independently.\n\n1230\n00:59:33.760 --> 00:59:38.720\nBut the forest functional level,\nthat effects all of the domains.\n\n1231\n00:59:38.720 --> 00:59:42.500\nSo prior to upgrading your forest\nfunctional level, you've got to make sure\n\n1232\n00:59:42.500 --> 00:59:46.270\nthat the domain controllers in all\nof your domains, have been upgraded\n\n1233\n00:59:46.270 --> 00:59:50.190\nto the operating system that's required\nby that functional level, all right?\n\n1234\n00:59:50.190 --> 00:59:53.000\nDomains are tied to just the domain,\nforest is every domain.\n\n1235\n00:59:53.000 --> 00:59:55.740\n>> Exactly, yeah so your domain\nfunctional level's determined by\n\n1236\n00:59:55.740 --> 00:59:59.760\nthe lowest version of your operating\nsystem on your domain controllers,\n\n1237\n00:59:59.760 --> 01:00:04.035\nyour forest functional level is limited\nby your lowest domain functional level.\n\n1238\n01:00:04.035 --> 01:00:05.650\n>> Mm-hm.\n\n1239\n01:00:05.650 --> 01:00:08.310\nSo when we want to bump up\nour forest functional level,\n\n1240\n01:00:08.310 --> 01:00:10.560\nthis is an even bigger decision.\n\n1241\n01:00:10.560 --> 01:00:12.680\nSomething we're gonna be\neven more hesitant to do.\n\n1242\n01:00:12.680 --> 01:00:13.880\n>> Absolutely.\n>> Because, you know,\n\n1243\n01:00:13.880 --> 01:00:16.030\nyou can't undo it, right?\n\n1244\n01:00:16.030 --> 01:00:18.730\nSo before doing this we need to make\nsure the features that we're selecting\n\n1245\n01:00:18.730 --> 01:00:20.540\nare something that we absolutely need.\n\n1246\n01:00:20.540 --> 01:00:23.230\nLet's take a look at those\nforest functional levels.\n\n1247\n01:00:23.230 --> 01:00:26.350\nJust like the domain levels we\nstart with with Windows 2000 and\n\n1248\n01:00:26.350 --> 01:00:31.610\nat the Windows 2000 functional level we\ndidn't really get much more in there.\n\n1249\n01:00:31.610 --> 01:00:36.580\nYou know I was going to try and zoom in\nbut it's doing this crazy screen thing.\n\n1250\n01:00:36.580 --> 01:00:37.810\nAll right we'll leave it be.\n\n1251\n01:00:37.810 --> 01:00:40.910\nSo in Windows 2000 you have your normal\n\n1252\n01:00:40.910 --> 01:00:43.730\nactive directory functions\nnothing to special there.\n\n1253\n01:00:43.730 --> 01:00:47.589\nIn Windows server 2003 that's\nwhere we got forest trusts.\n\n1254\n01:00:47.589 --> 01:00:49.371\nYou know we mentioned that earlier, so\n\n1255\n01:00:49.371 --> 01:00:53.810\nif you want forest trusts you've gotta be\nat Windows server 2003 functional level.\n\n1256\n01:00:53.810 --> 01:00:55.040\nYou should probably be there anyway.\n\n1257\n01:00:55.040 --> 01:00:57.810\nWindows 2000 is no longer\nsupported by Microsoft, so\n\n1258\n01:00:57.810 --> 01:01:00.390\nif you're running Windows\n2000 you're in a bad spot.\n\n1259\n01:01:00.390 --> 01:01:03.060\nSo, you should at least be at 2003.\n\n1260\n01:01:03.060 --> 01:01:05.500\nAnd actually on 2003 they\nstill support 2003 R2.\n\n1261\n01:01:05.500 --> 01:01:08.210\nI don't think they support base 2003,\ndo they?\n\n1262\n01:01:08.210 --> 01:01:10.660\n>> I'm not sure on that.\n\n1263\n01:01:10.660 --> 01:01:13.570\n>> I guess it doesn't really matter cuz\nthe functional level doesn't differentiate\n\n1264\n01:01:13.570 --> 01:01:15.920\nbetween R2 or not with 2003.\n\n1265\n01:01:15.920 --> 01:01:19.150\nBut forest trusts, domain renames, Right?\n\n1266\n01:01:19.150 --> 01:01:20.370\nThose are big deals.\n\n1267\n01:01:20.370 --> 01:01:22.940\nRead only domain controller functionality.\n\n1268\n01:01:22.940 --> 01:01:26.310\nThat was new in the 2003 functional level.\n\n1269\n01:01:26.310 --> 01:01:27.090\nThis one.\n\n1270\n01:01:27.090 --> 01:01:29.820\nImproved knowledge consistency checker.\n\n1271\n01:01:29.820 --> 01:01:33.520\nThere's actually some\nbugs in the original KCC\n\n1272\n01:01:33.520 --> 01:01:37.310\nthat would make it choke\nunder large environments.\n\n1273\n01:01:37.310 --> 01:01:39.530\nIt was actually, if you had more\nthan 1500 domain controllers.\n\n1274\n01:01:39.530 --> 01:01:40.370\n>> Right.\n\n1275\n01:01:40.370 --> 01:01:41.215\n>> Most of us don't.\n\n1276\n01:01:41.215 --> 01:01:44.210\n[LAUGH] But if you did,\nthere were some quirks, and\n\n1277\n01:01:44.210 --> 01:01:46.739\nthe 2003 functional level solved that.\n\n1278\n01:01:46.739 --> 01:01:52.580\n[COUGH] We've got some other things in\nhere that are a little bit less prominent.\n\n1279\n01:01:52.580 --> 01:01:57.420\nYou know, dynamic auxiliary classes for\ncreating classes inside of your schema.\n\n1280\n01:01:57.420 --> 01:02:02.440\nThe inetOrgPerson value which helped\nout a lot with exchange migrations.\n\n1281\n01:02:02.440 --> 01:02:05.410\nIf you're not running exchange\nyou don't care about that.\n\n1282\n01:02:05.410 --> 01:02:08.280\nOther things,\njust roll based authorization,\n\n1283\n01:02:08.280 --> 01:02:10.910\ndeactivation of OIDs and stuff.\n\n1284\n01:02:10.910 --> 01:02:16.110\nThese were lesser needed features, but\nthe big ones were these guys up here.\n\n1285\n01:02:16.110 --> 01:02:17.500\nDomain rename.\n\n1286\n01:02:17.500 --> 01:02:19.800\nAnd read-only domain controller.\n\n1287\n01:02:19.800 --> 01:02:21.610\nThere was also a little bit on DFS.\n\n1288\n01:02:21.610 --> 01:02:23.940\nDFS Namespace is getting\na bit of a bump there.\n\n1289\n01:02:23.940 --> 01:02:25.450\n>> Yeah, you get that new 2008 mode.\n\n1290\n01:02:25.450 --> 01:02:26.685\nIt just made it more scalable.\n\n1291\n01:02:26.685 --> 01:02:28.080\n>> Mm-hm.\n\n1292\n01:02:28.080 --> 01:02:32.150\nSo, those were some reasons to go to\nthe 2003 functional level on your forest,\n\n1293\n01:02:32.150 --> 01:02:34.450\nand that's where a lot of people stopped.\n\n1294\n01:02:34.450 --> 01:02:35.510\nBecause, look at 2008.\n\n1295\n01:02:35.510 --> 01:02:39.390\nWhat does the 2008 forest\nfunctional level add?\n\n1296\n01:02:39.390 --> 01:02:40.550\nNothing.\n>> Absolutely nothing.\n\n1297\n01:02:40.550 --> 01:02:41.130\n>> Absolutely nothing.\n\n1298\n01:02:41.130 --> 01:02:43.310\nIt says all the features\nwere available in 2003.\n\n1299\n01:02:43.310 --> 01:02:47.720\nSo was there any reason to go to the 2008\nfunctional level on your forest?\n\n1300\n01:02:47.720 --> 01:02:49.370\nThe only reason was\nwhat Mike said earlier.\n\n1301\n01:02:49.370 --> 01:02:53.360\nIf you wanted to absolutely prevent\n2003 domain controllers from\n\n1302\n01:02:53.360 --> 01:02:56.230\nbeing on your forest,\nyou'd go to that 2008 functional level.\n\n1303\n01:02:56.230 --> 01:03:02.950\nSo notice It doesn't add any features but\n2003 is out of the list of supported OS's.\n\n1304\n01:03:02.950 --> 01:03:03.860\n>> And you know what's going to happen?\n\n1305\n01:03:03.860 --> 01:03:06.631\nAs soon as you do that upgrade,\nyou got no new features out of it and\n\n1306\n01:03:06.631 --> 01:03:08.391\nthen they're going to come to you and\nthey're going to say.\n\n1307\n01:03:08.391 --> 01:03:10.030\nYeah, we're gonna plan\non doing this merger and\n\n1308\n01:03:10.030 --> 01:03:11.800\nwe're gonna bring their\nnetworks into ours.\n\n1309\n01:03:11.800 --> 01:03:14.140\nAnd now you're gonna have to\nexplain to the boss, yeah,\n\n1310\n01:03:14.140 --> 01:03:16.870\nwe're gonna have to upgrade all of their\ndomain controllers before this can happen.\n\n1311\n01:03:18.820 --> 01:03:23.690\n>> Now they didn't do it with 2003,\nbut in 2008 they did differentiate\n\n1312\n01:03:23.690 --> 01:03:29.230\nbetween the RTM2008 and\nthe R2, the updated version.\n\n1313\n01:03:29.230 --> 01:03:32.510\nSo the R2 functional level\ndoes add a little bit more,\n\n1314\n01:03:32.510 --> 01:03:33.940\none that Mike, you mentioned.\n\n1315\n01:03:33.940 --> 01:03:36.150\nThe active directory recycle bin.\n\n1316\n01:03:36.150 --> 01:03:38.770\nIf you want to take advantage of that\nrecycle bin you'll have to bump up\n\n1317\n01:03:38.770 --> 01:03:39.840\nto the 2008 R2 mode.\n\n1318\n01:03:39.840 --> 01:03:43.610\n2008 domain controllers are not supported,\nright.\n\n1319\n01:03:43.610 --> 01:03:47.950\nWe've got to make sure that we\nget all of our DCs up to 2008 R2.\n\n1320\n01:03:47.950 --> 01:03:50.750\nAll right, other things.\n\n1321\n01:03:50.750 --> 01:03:52.920\nReally that's about it, right?\n\n1322\n01:03:52.920 --> 01:03:55.385\n>> Yeah, the rest of them don't\nreally bring a whole lot.\n\n1323\n01:03:55.385 --> 01:03:59.254\n>> Yeah, 2012, it tells you here all\nthe features are available in 2008 R2.\n\n1324\n01:03:59.254 --> 01:04:03.890\nAnd the new Windows Server 2012 R2 mode,\nwell it's all there in 2012.\n\n1325\n01:04:03.890 --> 01:04:06.400\nNo additional features, right.\n\n1326\n01:04:06.400 --> 01:04:07.295\nThat's what it's saying.\n\n1327\n01:04:07.295 --> 01:04:12.136\nSo that's why a lot of people are not\non the highest functional level.\n\n1328\n01:04:12.136 --> 01:04:13.378\nYou can't undo it.\n\n1329\n01:04:13.378 --> 01:04:16.384\nAnd if you don't get any benefit from it,\nthe only reason to do it,\n\n1330\n01:04:16.384 --> 01:04:19.140\nwould be to prevent lower version\nDCs from being brought up.\n\n1331\n01:04:19.140 --> 01:04:19.720\n>> Exactly.\n\n1332\n01:04:19.720 --> 01:04:22.070\nAnd you can still raise your domain\nfunctional level up to that.\n\n1333\n01:04:22.070 --> 01:04:25.318\nYou can just leave\nthe forest at 2008 R2 mode.\n\n1334\n01:04:25.318 --> 01:04:26.110\n>> Yep.\nAll right,\n\n1335\n01:04:26.110 --> 01:04:29.560\nso, those are some of the different\nlevels that we might be at.\n\n1336\n01:04:30.590 --> 01:04:31.650\nRemember them for the exam.\n\n1337\n01:04:31.650 --> 01:04:33.410\nEspecially the big features.\n\n1338\n01:04:33.410 --> 01:04:35.095\nThose are the ones that\nyou're going to see.\n\n1339\n01:04:35.095 --> 01:04:36.790\n>> Mm-hm.\n>> As part of your active directory\n\n1340\n01:04:36.790 --> 01:04:41.180\ndesign, they're requiring you to have\nthe Active Directory Recycle Bin, right?\n\n1341\n01:04:41.180 --> 01:04:42.360\nYou wanna take advantage of that feature.\n\n1342\n01:04:42.360 --> 01:04:43.520\nSo what do you need to do?\n\n1343\n01:04:43.520 --> 01:04:46.950\nWell, the Active Directory Recycle Bin\nwas added here in the 2008 R2 mode.\n\n1344\n01:04:46.950 --> 01:04:51.700\nSo you'll need to upgrade any\ndomain controllers that are older\n\n1345\n01:04:51.700 --> 01:04:54.940\nthan 2008 R2 to at least 2008 R2,\npreferably 2012, right?\n\n1346\n01:04:56.460 --> 01:04:58.600\nThat's the forest functional level.\n\n1347\n01:04:58.600 --> 01:05:01.040\nIf you're forest functional\nlevel is 2008 R2,\n\n1348\n01:05:01.040 --> 01:05:04.730\nall of your domain function levels\nneed to at least be 2008 R2.\n\n1349\n01:05:04.730 --> 01:05:08.320\nIt's what Mike was saying, you know,\nthat lowest domain function level.\n\n1350\n01:05:08.320 --> 01:05:10.270\nSo we've gotta get all\nof those upgraded too.\n\n1351\n01:05:10.270 --> 01:05:11.740\nSo that's part of the process.\n\n1352\n01:05:11.740 --> 01:05:13.190\nYou raise your domains first.\n\n1353\n01:05:13.190 --> 01:05:15.100\nYou raise your forests second,\nand then [INAUDIBLE]\n\n1354\n01:05:15.100 --> 01:05:16.060\n>> And it'll tell you.\n\n1355\n01:05:16.060 --> 01:05:19.550\nYou know, if you try to raise that domain\nlevel or that forest functional level, and\n\n1356\n01:05:19.550 --> 01:05:22.660\nyou've still gotta domain out there\nthat's in domain 2003 functional level,\n\n1357\n01:05:22.660 --> 01:05:23.890\nthat won't let you do it.\n\n1358\n01:05:23.890 --> 01:05:25.270\nSo it's going to fail.\n\n1359\n01:05:25.270 --> 01:05:28.520\nAnd then you go, That's right, I forgot\nabout that domain go to your upgrades.\n\n1360\n01:05:28.520 --> 01:05:30.520\nOr maybe you've- or\nyour servers are already at 2008 R2.\n\n1361\n01:05:30.520 --> 01:05:34.390\nSo you're trying to raise the forest and\nyou can't figure out why it's not letting\n\n1362\n01:05:34.390 --> 01:05:37.050\nyou, it's because you didn't raise\nthe domain function level first.\n\n1363\n01:05:37.050 --> 01:05:37.930\nJust because they're running,\n\n1364\n01:05:37.930 --> 01:05:42.030\nas Don said earlier, just because they're\nrunning 2008 R2, doesn't mean your domain\n\n1365\n01:05:42.030 --> 01:05:44.530\nfunctional level is going to\nautomatically jump up to that level.\n\n1366\n01:05:44.530 --> 01:05:45.670\nSo you've got to do both.\n\n1367\n01:05:45.670 --> 01:05:49.380\nAnd you've got to let that replicator out,\nbefore we can start updating that forest.\n\n1368\n01:05:50.820 --> 01:05:53.630\n>> So that brings us to\nthe subject of upgrades, right?\n\n1369\n01:05:53.630 --> 01:05:55.610\nIf I'm going to raise\nmy functional level for\n\n1370\n01:05:55.610 --> 01:05:58.580\nsome particular need, I got to get\nmy domain controllers upgraded.\n\n1371\n01:05:58.580 --> 01:06:01.980\nSo what is the upgrade process?\n\n1372\n01:06:01.980 --> 01:06:03.630\nFortunately upgrades\nare pretty straightforward.\n\n1373\n01:06:03.630 --> 01:06:06.180\nWell, I guess, it kinda depends\non how you want to go about it.\n\n1374\n01:06:06.180 --> 01:06:07.230\n>> Right.\n>> Because remember,\n\n1375\n01:06:07.230 --> 01:06:11.870\nthere is a difference in Microsoft land\nbetween doing an upgrade and a migration.\n\n1376\n01:06:11.870 --> 01:06:12.750\n>> Migration exactly.\n\n1377\n01:06:12.750 --> 01:06:15.430\n>> And Microsoft always recommends\na migration over an upgrade,\n\n1378\n01:06:15.430 --> 01:06:16.218\nif you can do it.\n\n1379\n01:06:16.218 --> 01:06:17.420\nRight?\nSo what's the difference?\n\n1380\n01:06:17.420 --> 01:06:19.200\nWell, when we talk about an upgrade,\n\n1381\n01:06:19.200 --> 01:06:22.700\nwhat we're really talking\nabout is an in place upgrade.\n\n1382\n01:06:22.700 --> 01:06:25.200\nYou've got a server running\nWindows server 2008.\n\n1383\n01:06:25.200 --> 01:06:27.010\nYou take your 2012 DVD.\n\n1384\n01:06:27.010 --> 01:06:30.400\nYou pop it in the drive, and\na little wizard pops up says,\n\n1385\n01:06:30.400 --> 01:06:31.380\ndo you want to upgrade?\n\n1386\n01:06:31.380 --> 01:06:33.520\nAnd it runs you through the upgrade right?\n\n1387\n01:06:33.520 --> 01:06:36.260\nIt upgrades that server in place.\n\n1388\n01:06:36.260 --> 01:06:40.120\nAnd when it boots back up, it's got the\nsame name, same IP, same configuration.\n\n1389\n01:06:40.120 --> 01:06:42.960\nBut running the newer operating system,\nall right?\n\n1390\n01:06:42.960 --> 01:06:45.450\nIt's great, but it's limited.\n\n1391\n01:06:45.450 --> 01:06:50.215\nYou have to have, like a lot of times,\nyou can't skip OS versions.\n\n1392\n01:06:50.215 --> 01:06:52.730\n>> Mm-hm.\n>> So if you're running Windows Server\n\n1393\n01:06:52.730 --> 01:06:56.310\n2003, you might not be able to go\ndirectly to Windows Server 2012 R2.\n\n1394\n01:06:56.310 --> 01:07:00.640\n>> Now, all of a sudden, you've got to\ndo two upgrades to get to the 2012 R2.\n\n1395\n01:07:00.640 --> 01:07:04.210\n>> And the thing I've always said was,\nif you had a problem under the old OS,\n\n1396\n01:07:04.210 --> 01:07:06.522\nwhen you upgrade,\nyou're just upgrading your problem, right?\n\n1397\n01:07:06.522 --> 01:07:08.560\n>> Exactly.\n[LAUGH] >> It's gonna follow you along.\n\n1398\n01:07:08.560 --> 01:07:12.420\nSo you get a lot of legacy files and\nstuff left over.\n\n1399\n01:07:12.420 --> 01:07:14.460\nFile permissions that aren't updated.\n\n1400\n01:07:14.460 --> 01:07:17.650\nYou know, things have changed,\nsince those older versions of the OS.\n\n1401\n01:07:17.650 --> 01:07:18.570\nThe other thing is.\n\n1402\n01:07:18.570 --> 01:07:20.330\nIf you have a domain controller\nthat running Windows server 2003.\n\n1403\n01:07:20.330 --> 01:07:24.910\nYou probably have a pretty old domain\ncontroller as far as physical hardware.\n\n1404\n01:07:24.910 --> 01:07:27.700\nSo you may not want to\ndo an in place upgrade.\n\n1405\n01:07:27.700 --> 01:07:30.420\nInstead, you'll probably do a migration.\n\n1406\n01:07:30.420 --> 01:07:34.920\nAnd that's where you bring up an all\nnew domain controllers side by side.\n\n1407\n01:07:34.920 --> 01:07:38.340\nSo you've got that 2003 domain\ncontroller sitting there or 2008,\n\n1408\n01:07:38.340 --> 01:07:42.640\nand you bring up this nice shiny new 2012\none that's sitting right next to it.\n\n1409\n01:07:42.640 --> 01:07:44.180\nAnd they're both running at the same time.\n\n1410\n01:07:44.180 --> 01:07:47.090\nYou transfer your\nresponsibilities to the new one.\n\n1411\n01:07:47.090 --> 01:07:50.240\nAnd you decommission the old one,\nchuck it in the trash.\n\n1412\n01:07:50.240 --> 01:07:52.000\nWell, you know, you sanitize it first,\n>> [LAUGH]\n\n1413\n01:07:52.000 --> 01:07:53.090\n>> And then chuck it in the trash.\n\n1414\n01:07:53.090 --> 01:07:54.910\n>> And recycle it he means,\nthat what he means recycle it.\n\n1415\n01:07:54.910 --> 01:07:56.500\n>> Well you've got to get\nyour data off of there.\n\n1416\n01:07:56.500 --> 01:07:59.008\nYou don't want somebody dumpster\ndiving and pulling your ID.\n\n1417\n01:07:59.008 --> 01:08:01.610\n>> Definitely\n>> [LAUGH] That would be disastrous.\n\n1418\n01:08:01.610 --> 01:08:03.258\nThat's the kind of thing, well nevermind.\n\n1419\n01:08:03.258 --> 01:08:07.380\n[LAUGH] I was gonna say, that's the kind\nof thing that our government would do.\n\n1420\n01:08:07.380 --> 01:08:09.750\nYou know? [LAUGH] >> Pretty much,\npretty much.\n\n1421\n01:08:09.750 --> 01:08:11.410\n>> But yeah so.\n\n1422\n01:08:11.410 --> 01:08:16.160\nSo, you've got a, a lot of steps\ninvolved with doing an upgrade.\n\n1423\n01:08:16.160 --> 01:08:18.880\nAnd another thing is when\nyou start to do an upgrade,\n\n1424\n01:08:18.880 --> 01:08:21.050\nhow do you do it without\nimpacting your users?\n\n1425\n01:08:21.050 --> 01:08:23.060\n>> Right.\n>> Because you wanna make sure that your\n\n1426\n01:08:23.060 --> 01:08:25.790\nusers have a smooth transition too.\n\n1427\n01:08:25.790 --> 01:08:30.380\nAnd if you do an in place upgrade, at a\nminimum, your sever's gotta reboot twice.\n\n1428\n01:08:30.380 --> 01:08:32.340\nIt's gonna be offline during that upgrade.\n\n1429\n01:08:33.490 --> 01:08:35.520\nIn a massive environment,\nthat's not normally a big deal,\n\n1430\n01:08:35.520 --> 01:08:37.160\ncuz you have a lot of domain controllers.\n\n1431\n01:08:37.160 --> 01:08:39.215\n>> You bring one at a time and\nkind of take it slow.\n\n1432\n01:08:39.215 --> 01:08:41.150\n>> Mm-hm.\nBut in a small environment,\n\n1433\n01:08:41.150 --> 01:08:43.440\nwhere you might only have one domain\ncontroller, that is a big deal.\n\n1434\n01:08:43.440 --> 01:08:45.740\nIt takes authentication\noffline while you do it.\n\n1435\n01:08:45.740 --> 01:08:49.030\nThe other thing is, an in place upgrade.\n\n1436\n01:08:49.030 --> 01:08:52.610\nIt's near impossible to roll\nit back if a problem happens.\n\n1437\n01:08:52.610 --> 01:08:53.200\nRight?\n\n1438\n01:08:53.200 --> 01:08:57.590\nSo, you've got to take a really good\nbackup first, then do your upgrade.\n\n1439\n01:08:57.590 --> 01:09:02.480\nAnd if something goes wrong, you just\nblow it away and restore from a backup.\n\n1440\n01:09:02.480 --> 01:09:06.070\nBut if you've got multiple domain\ncontrollers, a lot of its settings and\n\n1441\n01:09:06.070 --> 01:09:08.510\ninformation starts replicating\nin the active directory.\n\n1442\n01:09:08.510 --> 01:09:11.580\nSo even restoring from a backup becomes,\nnot possible.\n\n1443\n01:09:11.580 --> 01:09:14.127\nSo recovering from a failed\nin place upgrade of\n\n1444\n01:09:14.127 --> 01:09:18.780\na domain controller is very difficult and\nnot something that I usually choose to do.\n\n1445\n01:09:18.780 --> 01:09:21.490\n>> No.\n>> I almost always do a migration.\n\n1446\n01:09:21.490 --> 01:09:23.620\nNow the argument against\na migration was well,\n\n1447\n01:09:23.620 --> 01:09:24.880\nnow I've got to buy all new hardware.\n\n1448\n01:09:24.880 --> 01:09:26.390\nThis stinks, right?\n\n1449\n01:09:26.390 --> 01:09:30.190\nAnd that's about our virtual machine you\nmay not have the budget or resources for\n\n1450\n01:09:30.190 --> 01:09:32.300\nthat and\nyou want to use your existing hardware.\n\n1451\n01:09:32.300 --> 01:09:35.376\nGreat, but with virtual machines today,\n\n1452\n01:09:35.376 --> 01:09:38.810\nthe argument over\nhardware kinda goes away.\n\n1453\n01:09:38.810 --> 01:09:39.530\nIt's a virtual machine.\n\n1454\n01:09:39.530 --> 01:09:40.762\nYou spawn up a new virtual machine.\n\n1455\n01:09:40.762 --> 01:09:42.710\nYou can remove the old one, and so on.\n\n1456\n01:09:42.710 --> 01:09:45.020\nSo in a virtualized environment,\nthat's not so much of a big deal.\n\n1457\n01:09:45.020 --> 01:09:48.280\nBut in a physical environment,\nyou may have limited hardware resources.\n\n1458\n01:09:48.280 --> 01:09:49.600\nAnd so you've gotta plan for that.\n\n1459\n01:09:50.810 --> 01:09:54.590\nAnd what I'll typically do,\nis I'll take the old domain controller.\n\n1460\n01:09:54.590 --> 01:09:57.730\nIf I have limited hardware, right,\nand so I need to use this DC.\n\n1461\n01:09:57.730 --> 01:10:01.860\nYou always have, you should always have,\nat least two domain controllers.\n\n1462\n01:10:01.860 --> 01:10:02.550\n>> Right.\n\n1463\n01:10:02.550 --> 01:10:05.662\n>> So I'll take the domain control,\nI am going to upgrade and\n\n1464\n01:10:05.662 --> 01:10:07.130\nI will actually demote it.\n\n1465\n01:10:07.130 --> 01:10:09.870\nI will demote it so,\nit's not a domain controller anymore.\n\n1466\n01:10:09.870 --> 01:10:14.352\nThen, I effectively bring up a new\ndomain controller on that same hardware.\n\n1467\n01:10:14.352 --> 01:10:18.190\nYou know, format and reinstall and\nthen, bring it up and promote it again.\n\n1468\n01:10:18.190 --> 01:10:21.130\nThat way, if it gets messed up\nanywhere along the process,\n\n1469\n01:10:21.130 --> 01:10:24.860\nIt's not like I've got bad entries in\nthe AD, it's all tied to this new entity.\n\n1470\n01:10:24.860 --> 01:10:27.690\nI can just format it and\nre-promote it again.\n\n1471\n01:10:27.690 --> 01:10:29.680\nSo it gives you a little\nbit of a safety net there.\n\n1472\n01:10:29.680 --> 01:10:32.880\nBut you know, these are things we have\nto think about as we do the upgrade.\n\n1473\n01:10:32.880 --> 01:10:34.150\n>> Right.\n\n1474\n01:10:34.150 --> 01:10:38.940\n>> Now, for the show notes, before\nthe show, I whipped up some quick steps.\n\n1475\n01:10:38.940 --> 01:10:41.710\nIf we're doing an upgrade, right?\n\n1476\n01:10:41.710 --> 01:10:45.490\nWhen you upgrade a domain controller,\nyou're normally doing that migration.\n\n1477\n01:10:45.490 --> 01:10:46.980\nYou're normally bringing\nup that new system.\n\n1478\n01:10:46.980 --> 01:10:50.920\nBut, I went ahead and kinda threw\nin both sides of the story, right?\n\n1479\n01:10:50.920 --> 01:10:55.090\nWhat if we're running\nan all 2008 R2 environment?\n\n1480\n01:10:55.090 --> 01:10:55.610\nOkay?\n\n1481\n01:10:55.610 --> 01:10:59.100\nSo all of my domain controllers\nare Windows server 2008 r2.\n\n1482\n01:10:59.100 --> 01:11:01.250\nMy domain functional levels are 2008 r2.\n\n1483\n01:11:01.250 --> 01:11:03.591\nMy forest functional levels 2008 r2.\n\n1484\n01:11:03.591 --> 01:11:04.957\nSo I'm all in, right?\n\n1485\n01:11:04.957 --> 01:11:09.640\nAnd now, I'm bringing up my first\nWindows server 2012 r2 box, or not r2.\n\n1486\n01:11:09.640 --> 01:11:11.430\nIt doesn't matter, right?\n\n1487\n01:11:11.430 --> 01:11:14.210\nSo I'm bringing up this new version,\nall right?\n\n1488\n01:11:14.210 --> 01:11:18.200\nWell, if I'm gonna do an upgrade,\nthe first thing I need to do is,\n\n1489\n01:11:18.200 --> 01:11:21.050\nI need to make sure I've got\nthe credentials to do it, right?\n\n1490\n01:11:21.050 --> 01:11:23.830\nI need to be, well since I'm doing\nthis on a domain controller,\n\n1491\n01:11:23.830 --> 01:11:26.030\nI'm going to need to be a domain\nadmin to pull this off, all right.\n\n1492\n01:11:26.030 --> 01:11:29.350\nSo I'm going to have to have\nthe credentials to pull off this upgrade.\n\n1493\n01:11:29.350 --> 01:11:33.130\nThen, I need to look at the software and\n\n1494\n01:11:33.130 --> 01:11:37.160\nhardware on that server to determine\nwhether I can even upgrade it, right.\n\n1495\n01:11:37.160 --> 01:11:40.200\nIf it doesn't meet the minimum\nhardware requirements or\n\n1496\n01:11:40.200 --> 01:11:43.430\nif there aren't drivers available\nfrom Windows server 2012.\n\n1497\n01:11:43.430 --> 01:11:45.220\nEspecially for rave controllers.\n\n1498\n01:11:45.220 --> 01:11:47.890\nThat's your number one gotcha.\n\n1499\n01:11:47.890 --> 01:11:51.710\nIf that support is not there, I might\nnot be able to do an upgrade at all.\n\n1500\n01:11:51.710 --> 01:11:54.150\nSo I need to check that out and\nmake sure I meet those.\n\n1501\n01:11:54.150 --> 01:11:56.630\nSo that's step two and three.\n\n1502\n01:11:56.630 --> 01:11:57.980\nAnd then step four.\n\n1503\n01:11:57.980 --> 01:11:59.745\nI need to figure out my domain\ncontroller upgrade order.\n\n1504\n01:11:59.745 --> 01:12:01.278\nNow, what am I talking about there?\n\n1505\n01:12:01.278 --> 01:12:05.070\nWell, when I go to upgrade my domain\ncontrollers, if I'm doing in-place\n\n1506\n01:12:05.070 --> 01:12:08.939\nupgrades, I will more than likely want\nto upgrade all of them at some point.\n\n1507\n01:12:08.939 --> 01:12:11.517\n>> Right.\nSo what order do I do them in?\n\n1508\n01:12:11.517 --> 01:12:14.198\nAnd it does make a difference.\n\n1509\n01:12:14.198 --> 01:12:18.945\nI know in all the textbooks they\nsay that in active directory we've\n\n1510\n01:12:18.945 --> 01:12:21.290\ngot a multi-master model.\n\n1511\n01:12:21.290 --> 01:12:23.270\nRight?\nAll domain controllers are equal.\n\n1512\n01:12:23.270 --> 01:12:24.910\nBut they aren't, are they?\n\n1513\n01:12:24.910 --> 01:12:26.182\n>> Always an exception of the rule, right?\n\n1514\n01:12:26.182 --> 01:12:27.560\n[LAUGH]\n>> Yeah.\n\n1515\n01:12:27.560 --> 01:12:29.540\nSo we've got those FSMO roles.\n\n1516\n01:12:29.540 --> 01:12:32.210\n>> Exactly.\n>> Right, the flexible or floating.\n\n1517\n01:12:32.210 --> 01:12:34.200\nThey changed the definition later on.\n\n1518\n01:12:34.200 --> 01:12:39.726\nSo the floating single master operation\nrole holders, those guys right there.\n\n1519\n01:12:39.726 --> 01:12:45.153\nWe're talking about your schema master,\nyour domain naming master, your\n\n1520\n01:12:45.153 --> 01:12:49.520\nrid master, your PDC emulator, and your-\n>> Infrastructure management.\n\n1521\n01:12:49.520 --> 01:12:51.420\n>> There we go,\ninfrastructure management, so those five.\n\n1522\n01:12:52.480 --> 01:12:55.730\nYour domain controllers, you may just\nhave one that possesses all five\n\n1523\n01:12:55.730 --> 01:12:58.780\nof those of those roles or they might\nbe spread out across several servers,\n\n1524\n01:12:58.780 --> 01:13:00.160\ndepending on what you're doing, right.\n\n1525\n01:13:00.160 --> 01:13:03.080\nSo when you go to do upgrades\nthose guys are kinda special.\n\n1526\n01:13:03.080 --> 01:13:03.630\n>> Right.\n\n1527\n01:13:03.630 --> 01:13:07.380\n>> If I'm upgrading my\ndomain naming master,\n\n1528\n01:13:07.380 --> 01:13:11.175\nand I'm rebooting and doing stuff like\nthat, how does that affect my network.\n\n1529\n01:13:11.175 --> 01:13:14.160\n>> Now all of a sudden that guy\ncomes into play anytime you add or\n\n1530\n01:13:14.160 --> 01:13:15.530\nremove a domain from your forest.\n\n1531\n01:13:15.530 --> 01:13:18.670\nSo if somebody was planning on\ndoing that this afternoon and\n\n1532\n01:13:18.670 --> 01:13:22.340\nyou just took down that role holder,\nthey're not gonna be able to do that.\n\n1533\n01:13:22.340 --> 01:13:24.420\n>> So you've got two choices, all right?\n\n1534\n01:13:24.420 --> 01:13:26.510\nChoice number one,\nschedule the upgrade for\n\n1535\n01:13:26.510 --> 01:13:28.180\nthat server while nobody's adding domains.\n\n1536\n01:13:28.180 --> 01:13:30.290\nWe don't normally add\ndomains every single day, so\n\n1537\n01:13:30.290 --> 01:13:32.150\nit's hopefully not that big of a deal.\n\n1538\n01:13:32.150 --> 01:13:33.476\nThe RID master would be a better example.\n\n1539\n01:13:33.476 --> 01:13:35.186\n>> The RID master or\nthat [INAUDIBLE], yeah.\n\n1540\n01:13:35.186 --> 01:13:38.127\n>> Your PDCs, they use the rid.\n\n1541\n01:13:38.127 --> 01:13:42.353\nThe RID is the unique part of a SID, the\nsecurity identifier for a user account or\n\n1542\n01:13:42.353 --> 01:13:43.310\na group.\n\n1543\n01:13:43.310 --> 01:13:45.600\nAnd the PC generates 20 at a time.\n\n1544\n01:13:45.600 --> 01:13:49.170\nSo it'll create a pool of 20 RIDS,\nand start to draw from them.\n\n1545\n01:13:49.170 --> 01:13:53.299\nSo if you take the rid master offline,\nyou can only create 20 user accounts, or\n\n1546\n01:13:53.299 --> 01:13:57.500\n20 groups, or 10 user accounts and\n10 groups, just 20 total.\n\n1547\n01:13:57.500 --> 01:14:00.540\nSo when that 20 runs out you\ncan't create anymore accounts.\n\n1548\n01:14:00.540 --> 01:14:02.030\nThat's a big problem.\n\n1549\n01:14:02.030 --> 01:14:07.430\nSo we can schedule the upgrade of that\nRID Master or domain naming master or\n\n1550\n01:14:07.430 --> 01:14:09.990\nwhatever for a time when you know that\npeople aren't going to be creating stuff.\n\n1551\n01:14:11.450 --> 01:14:15.860\nOr you can transfer that role,\nmove the role to somebody else so\n\n1552\n01:14:15.860 --> 01:14:19.830\nthat that role is up and running while you\nupgrade the server that you're working on.\n\n1553\n01:14:19.830 --> 01:14:23.720\nSo as we plan the order of upgrades,\nwhich servers we're gonna upgrade first,\n\n1554\n01:14:23.720 --> 01:14:24.600\nthat's what we need to look at.\n\n1555\n01:14:24.600 --> 01:14:26.030\n>> Right.\n>> Where are those roles and\n\n1556\n01:14:26.030 --> 01:14:28.250\nhow are they gonna impact this?\n\n1557\n01:14:28.250 --> 01:14:33.940\nAlso you've got your schema master and\nyour domain master.\n\n1558\n01:14:33.940 --> 01:14:35.830\nThey're in the forest root.\n\n1559\n01:14:35.830 --> 01:14:39.570\nAnd so typically that's where we want to\nstart our upgrade is in the forest root.\n\n1560\n01:14:39.570 --> 01:14:41.170\nYou don't have to.\n\n1561\n01:14:41.170 --> 01:14:44.510\nYou can actually start in one of\nyour other domains in the forest.\n\n1562\n01:14:44.510 --> 01:14:47.180\nBut typically we start in that forest\nroot because that's what gives us that\n\n1563\n01:14:47.180 --> 01:14:49.400\nvisibility across the entire forest.\n\n1564\n01:14:49.400 --> 01:14:52.880\nAny kind of schema update is gonna have\nto happen in the forest group and so\n\n1565\n01:14:52.880 --> 01:14:56.040\nthat's why we normally start there,\nall right?\n\n1566\n01:14:56.040 --> 01:14:58.970\nThen, develop a test plan, all right?\n\n1567\n01:14:58.970 --> 01:15:00.070\nA lot of people don't do this.\n\n1568\n01:15:00.070 --> 01:15:03.890\nThey just throw that server right\ninto production and that's bad news.\n\n1569\n01:15:03.890 --> 01:15:06.330\nA test environment is super handy.\n\n1570\n01:15:06.330 --> 01:15:07.100\n>> Yes.\n\n1571\n01:15:07.100 --> 01:15:13.830\n>> Take a backup of at least one domain\ncontroller in every one of your domains.\n\n1572\n01:15:13.830 --> 01:15:17.730\nAnd take a backup of whoever's\ngot your FSMO roles.\n\n1573\n01:15:17.730 --> 01:15:19.790\nRestore those backups to virtual machines.\n\n1574\n01:15:19.790 --> 01:15:23.960\nCreate an isolated virtual machine\nnetwork and restore these DCs into it.\n\n1575\n01:15:23.960 --> 01:15:27.850\nSo now, you've got your active directory\ninfrastructure in an isolated virtual\n\n1576\n01:15:27.850 --> 01:15:30.840\nmachine network, and\nrun through the upgrade.\n\n1577\n01:15:30.840 --> 01:15:33.060\nThere is no substitute for\nactually seeing it happen.\n\n1578\n01:15:33.060 --> 01:15:35.904\nAnd since a lot of this stuff\nis super difficult to undo,\n\n1579\n01:15:35.904 --> 01:15:37.852\nyou wanna do it in a test environment.\n\n1580\n01:15:37.852 --> 01:15:38.560\n>> Absolutely.\n\n1581\n01:15:38.560 --> 01:15:41.510\nAnd back before we add the virtualization,\nthat was a pain.\n\n1582\n01:15:41.510 --> 01:15:44.140\nIt was a lot of equipment,\na lot of setup to get that done.\n\n1583\n01:15:44.140 --> 01:15:47.210\nBut with a virtual environment,\nthere's really no reason not to, is there?\n\n1584\n01:15:47.210 --> 01:15:48.820\nI mean you want to make sure you test it.\n\n1585\n01:15:48.820 --> 01:15:50.320\nYou don't wanna tear down\nyour production network.\n\n1586\n01:15:50.320 --> 01:15:53.140\nSo easy to do, really should be done.\n\n1587\n01:15:53.140 --> 01:15:54.550\n>> Yeah, absolutely right.\n\n1588\n01:15:54.550 --> 01:15:57.880\nYou do a test, and you'll find all\nsorts of stuff when you do the test,\n\n1589\n01:15:57.880 --> 01:15:58.470\nproblems that happen.\n\n1590\n01:15:58.470 --> 01:16:01.350\nAnd you're like, whew, thank goodness\nI didn't do that on a production box.\n\n1591\n01:16:01.350 --> 01:16:01.890\n>> Right.\n\n1592\n01:16:01.890 --> 01:16:04.970\n>> So, that's the kind of thing that\nyou'll find when you do a test.\n\n1593\n01:16:04.970 --> 01:16:06.953\nAll right.\nAnother thing.\n\n1594\n01:16:06.953 --> 01:16:10.150\nIf an in-place upgrade is supported,\n\n1595\n01:16:10.150 --> 01:16:12.990\noftentimes it'll require\na certain service pack level.\n\n1596\n01:16:12.990 --> 01:16:13.640\n>> Right.\n\n1597\n01:16:13.640 --> 01:16:15.215\n>> So to go from 2008 to 2012,\n\n1598\n01:16:15.215 --> 01:16:19.980\nyou actually need Service Pack 1 or\nhigher, right?\n\n1599\n01:16:19.980 --> 01:16:22.160\nSo you got to make sure you've already\ngot those service packs in place.\n\n1600\n01:16:22.160 --> 01:16:25.150\nAnd Microsoft's recommendation is\nnot to fixate on the minimum but\n\n1601\n01:16:25.150 --> 01:16:26.510\ndo all-\n>> Everything.\n\n1602\n01:16:26.510 --> 01:16:27.290\n>> Of the Windows updates.\n\n1603\n01:16:27.290 --> 01:16:31.890\nGet that system completely up-to-date\nbefore doing the in place upgrade.\n\n1604\n01:16:31.890 --> 01:16:32.885\nAnd I tend to agree.\n\n1605\n01:16:32.885 --> 01:16:33.760\n>> Mm-hm.\n\n1606\n01:16:33.760 --> 01:16:35.090\n>> I go a step further though.\n\n1607\n01:16:35.090 --> 01:16:35.780\nYour hardware drivers.\n\n1608\n01:16:35.780 --> 01:16:36.370\n>> Right.\n\n1609\n01:16:36.370 --> 01:16:39.430\n>> Make sure that all of your\nhardware drivers are up-to-date.\n\n1610\n01:16:39.430 --> 01:16:40.750\nThe latest version.\n\n1611\n01:16:40.750 --> 01:16:42.910\nBecause the newest versions\nwill typically support 2012 and\n\n1612\n01:16:42.910 --> 01:16:44.610\nthey'll have that functionality added.\n\n1613\n01:16:46.190 --> 01:16:47.940\nThen back up your data,\nnow notice what it says here,\n\n1614\n01:16:47.940 --> 01:16:51.920\nit doesn't say back up your server,\nback up your domain data.\n\n1615\n01:16:51.920 --> 01:16:55.130\nWhen you upgrade a domain controller it\nstarts pushing settings into the active\n\n1616\n01:16:55.130 --> 01:16:58.480\ndirectory and\nthat replicates to your other DCs, so\n\n1617\n01:16:58.480 --> 01:17:01.760\njust restoring the back up of one domain\ncontroller is not enough because the other\n\n1618\n01:17:01.760 --> 01:17:03.500\nDC's will just push\nthe changes right back to it.\n\n1619\n01:17:03.500 --> 01:17:05.292\nIt's called backfilling,\n\n1620\n01:17:05.292 --> 01:17:09.405\nwhen a DC comes up from a restore\nit asks everybody else to update.\n\n1621\n01:17:09.405 --> 01:17:10.345\nHey catch me up to speed.\n\n1622\n01:17:10.345 --> 01:17:11.735\nWhat did I miss since my back-up?\n\n1623\n01:17:11.735 --> 01:17:12.865\n>> And that's usually a good thing.\n\n1624\n01:17:12.865 --> 01:17:13.935\nWe want that to happen.\n\n1625\n01:17:13.935 --> 01:17:15.726\n>> Unless they were trying to\nmake these changes go away.\n\n1626\n01:17:15.726 --> 01:17:16.435\n>> Right.\n\n1627\n01:17:16.435 --> 01:17:18.275\n[LAUGH]\n>> Because then we'll need to do an\n\n1628\n01:17:18.275 --> 01:17:22.015\nauthoritative restore to wipe out the fact\nthat this domain controller was upgraded.\n\n1629\n01:17:22.015 --> 01:17:23.195\nThat's a pain in the butt.\n\n1630\n01:17:23.195 --> 01:17:24.545\n>> It is.\n>> We don't want to do that if we\n\n1631\n01:17:24.545 --> 01:17:25.585\ndon't have to.\n\n1632\n01:17:25.585 --> 01:17:27.992\nBut having a back-up of the active\ndirectory, that domain,\n\n1633\n01:17:27.992 --> 01:17:29.485\nthat's going to make that possible.\n\n1634\n01:17:31.190 --> 01:17:33.595\nAll right,\nthen we need to find any upgrade and\n\n1635\n01:17:33.595 --> 01:17:37.360\napplication compatibility problems\nit might have encountered.\n\n1636\n01:17:37.360 --> 01:17:41.080\nYou'll find issues with,\nhardware drivers was already mentioned,\n\n1637\n01:17:41.080 --> 01:17:42.950\nyou might have software\nmanagement drivers,\n\n1638\n01:17:42.950 --> 01:17:46.093\nlike Dell Open Manage or\nHP Insight, that kind of stuff.\n\n1639\n01:17:46.093 --> 01:17:46.600\n>> Mm-hm.\n\n1640\n01:17:46.600 --> 01:17:48.400\n>> That might have some\nproblems with the upgrade, so\n\n1641\n01:17:48.400 --> 01:17:49.720\nyou'll need to double check that.\n\n1642\n01:17:50.840 --> 01:17:55.760\nBut assuming everything's on the up and\nup, then we're ready to do the upgrade.\n\n1643\n01:17:55.760 --> 01:17:59.060\nThe first step of introducing\nany new OS is not to go and\n\n1644\n01:17:59.060 --> 01:18:03.100\ninstall the OS, but to do ADPrep, right?\n\n1645\n01:18:03.100 --> 01:18:05.070\nAnd I know we've shown\nthis in other shows, but\n\n1646\n01:18:05.070 --> 01:18:10.040\nthis is the active directory preparation\nutility, and it will prepare your forest\n\n1647\n01:18:10.040 --> 01:18:14.940\nand your domains to possess domain\ncontrollers of that newer version OS.\n\n1648\n01:18:14.940 --> 01:18:20.260\nYou can have member servers of that new OS\nwithout preparing the active directory.\n\n1649\n01:18:20.260 --> 01:18:22.768\nBut domain controllers,\nthat's what ADPrep does.\n\n1650\n01:18:22.768 --> 01:18:23.601\nAnd you've got to do it.\n\n1651\n01:18:23.601 --> 01:18:28.527\nIf you're a 2008 R2 environment and you're\nabout to bring your first 2012 server,\n\n1652\n01:18:28.527 --> 01:18:31.019\nyou need to get ADPrep\nfrom the 2012 disk and\n\n1653\n01:18:31.019 --> 01:18:34.258\nrun it on one of your 2008 domain\ncontrollers so that it can\n\n1654\n01:18:34.258 --> 01:18:37.100\nprepare the forest and get it up to-\n>> It's really all about getting that\n\n1655\n01:18:37.100 --> 01:18:37.700\nschema ready.\n\n1656\n01:18:37.700 --> 01:18:40.694\nRight?\nGetting that schema updated with new\n\n1657\n01:18:40.694 --> 01:18:46.185\nclasses and attributes that 2012 is\ngonna need or want to see there.\n\n1658\n01:18:46.185 --> 01:18:49.083\nAs you said, there's the ADPrep,\nDomain prep,\n\n1659\n01:18:49.083 --> 01:18:53.775\nthere's the forest prep we run first,\nthen we run the ADPrep, domain prep, and\n\n1660\n01:18:53.775 --> 01:18:56.060\nthen you can run that ADPrep, GPPrep.\n\n1661\n01:18:56.060 --> 01:18:58.643\nNow the cool thing about 2012,\nis it actually does that for us.\n\n1662\n01:18:58.643 --> 01:19:01.740\nThere used to be a separate\nstep that we would have to do.\n\n1663\n01:19:01.740 --> 01:19:05.800\nYou had to go get it and to do the forest\nprep, you have to be an enterprise admin,\n\n1664\n01:19:05.800 --> 01:19:09.650\nbecause you're modifying the schema,\nwhich is a forest wide thing.\n\n1665\n01:19:09.650 --> 01:19:14.280\nSo if I'm a domain admin in my domain and\nI want to bring up this\n\n1666\n01:19:14.280 --> 01:19:18.610\nnew 2012 server, I have to be in\nthe enterprise admins group to do that or\n\n1667\n01:19:18.610 --> 01:19:21.780\nI need to get an enterprise\nadmin to manually run it.\n\n1668\n01:19:21.780 --> 01:19:23.250\nBecause, like I said, 2012 will do it for\n\n1669\n01:19:23.250 --> 01:19:26.290\nyou, assuming you're logged on\nwith the appropriate credentials.\n\n1670\n01:19:26.290 --> 01:19:29.726\nOtherwise you've gotta get\nthe enterprise admin to do that first.\n\n1671\n01:19:29.726 --> 01:19:32.435\nThen you can go and\nyou can install your 2012 R2.\n\n1672\n01:19:32.435 --> 01:19:36.281\n>> Yep, and then I kind of left to step\nout, or implied it, or whatever, but\n\n1673\n01:19:36.281 --> 01:19:40.563\nyou've really got, you know install,\nno, we're doing in-place upgrade,\n\n1674\n01:19:40.563 --> 01:19:41.945\nthat's why I left it out.\n\n1675\n01:19:41.945 --> 01:19:45.285\nI was about to say, normally I would\ninstall a member sever at this point.\n\n1676\n01:19:45.285 --> 01:19:46.535\nAnd then we would promote it.\n\n1677\n01:19:46.535 --> 01:19:49.905\nBut in this case, we're not really\ndoing a member server and a promotion,\n\n1678\n01:19:49.905 --> 01:19:51.765\nwe're doing the upgrade, right?\n\n1679\n01:19:51.765 --> 01:19:54.752\nAnd so we would upgrade\nthe new domain controller,\n\n1680\n01:19:54.752 --> 01:19:59.490\nwe'd pop that DVD into the drive on that\ndomain controller and we do the upgrade.\n\n1681\n01:19:59.490 --> 01:20:02.220\nNow notice I'm saying pop the DVD in it.\n\n1682\n01:20:02.220 --> 01:20:04.718\nI know in other shows we have all\nthese automated scripted installs and\n\n1683\n01:20:04.718 --> 01:20:05.361\nstuff like that.\n\n1684\n01:20:05.361 --> 01:20:06.838\n>> Right.\n>> But with this one,\n\n1685\n01:20:06.838 --> 01:20:09.271\nit's a unique one-time upgrade process.\n\n1686\n01:20:09.271 --> 01:20:11.083\nIt's not something that\nyou'll typically script.\n\n1687\n01:20:11.083 --> 01:20:12.186\nRight?\nI mean you'd have to\n\n1688\n01:20:12.186 --> 01:20:14.991\nreally Know your environment\nintimately to write these scripts and\n\n1689\n01:20:14.991 --> 01:20:16.575\nit's just not worth the time to do it.\n\n1690\n01:20:16.575 --> 01:20:18.248\n>> It's really not.\nAnd for the most part,\n\n1691\n01:20:18.248 --> 01:20:22.431\nI think that setup.exe, it has to be\nrun from the existing operating system.\n\n1692\n01:20:22.431 --> 01:20:24.400\n>> Mm-hm.\n>> So it makes it a little more difficult,\n\n1693\n01:20:24.400 --> 01:20:25.960\nas you said, to try to automate that.\n\n1694\n01:20:25.960 --> 01:20:26.850\n>> Yep.\n\n1695\n01:20:26.850 --> 01:20:28.190\nSo, that's the process.\n\n1696\n01:20:28.190 --> 01:20:29.260\nWe run through the upgrade.\n\n1697\n01:20:29.260 --> 01:20:30.615\nNow hopefully the upgrade is successful.\n\n1698\n01:20:30.615 --> 01:20:32.754\nBecause we tested, we panned for\nthe eventualities.\n\n1699\n01:20:32.754 --> 01:20:34.860\n>> Mm-hm.\n>> It comes up, and you're in business.\n\n1700\n01:20:34.860 --> 01:20:39.160\nBut, if you've been in this business for a\nwhile, which most of you should have been.\n\n1701\n01:20:39.160 --> 01:20:43.165\nIf you've dealt with this you know\nthat upgrades rarely go as planned.\n\n1702\n01:20:43.165 --> 01:20:44.330\n>> Right.\n>> Anything going wrong\n\n1703\n01:20:44.330 --> 01:20:47.630\nalong the way can result in a blue\nscreen and now the upgrades dead.\n\n1704\n01:20:47.630 --> 01:20:49.650\nAnd your DC is hosed.\n\n1705\n01:20:49.650 --> 01:20:53.167\nAnd that's one of the reasons why I\ndefinitely prefer not to do in place\n\n1706\n01:20:53.167 --> 01:20:53.770\nupgrades.\n\n1707\n01:20:53.770 --> 01:20:56.500\n>> I don't even like doing upgrades\non my client operating system.\n\n1708\n01:20:56.500 --> 01:20:58.250\n>> Yeah.\n>> Not on my domain controllers.\n\n1709\n01:20:58.250 --> 01:20:59.130\nHeck no.\n[LAUGH]\n\n1710\n01:20:59.130 --> 01:21:00.820\n>> That is absolutely true.\n\n1711\n01:21:00.820 --> 01:21:04.585\nSo instead what a lot of us\nare going to do is a migration.\n\n1712\n01:21:04.585 --> 01:21:06.050\n>> Mm-hm.\n\n1713\n01:21:06.050 --> 01:21:08.540\n>> When we do a domain migration\na lot of the steps are the same.\n\n1714\n01:21:08.540 --> 01:21:09.360\nRight?\nWe've gotta\n\n1715\n01:21:09.360 --> 01:21:11.150\nmake sure we have the right credentials.\n\n1716\n01:21:11.150 --> 01:21:11.860\nOkay?\n>> Mm-hm.\n\n1717\n01:21:11.860 --> 01:21:16.110\n>> But instead of upgrading somebody else,\nwe're gonna bring in a member server.\n\n1718\n01:21:16.110 --> 01:21:18.820\nWe're gonna bring in a new server\nthat's running this new OS and\n\n1719\n01:21:18.820 --> 01:21:21.700\nyou can do it right away without prepping\nyour domain or anything like that.\n\n1720\n01:21:21.700 --> 01:21:24.120\nYou just bring up this new server\nrunning Windows Server 2012 R2, but\n\n1721\n01:21:24.120 --> 01:21:24.845\nas a member server.\n\n1722\n01:21:24.845 --> 01:21:27.030\n>> Right.\n>> Join it to the new domain,\n\n1723\n01:21:27.030 --> 01:21:29.080\nget it happy, right?\n\n1724\n01:21:29.080 --> 01:21:32.430\nOnce it's there, Then we run ADPrep, and\n\n1725\n01:21:32.430 --> 01:21:35.300\nthen we promote the new domain controller,\nright?\n\n1726\n01:21:35.300 --> 01:21:39.470\nWe have to install the AD services, and\nthen we promote the domain controller.\n\n1727\n01:21:39.470 --> 01:21:43.350\nWhen it comes up, it's now an additional\ndomain controller in our forest,\n\n1728\n01:21:43.350 --> 01:21:45.120\nand it's up and running, right?\n\n1729\n01:21:45.120 --> 01:21:45.810\n>> Yeah.\n\n1730\n01:21:45.810 --> 01:21:49.290\n>> If we want, we can then transfer\nthe FSMO roles over to it, but\n\n1731\n01:21:49.290 --> 01:21:49.870\nyou don't have to.\n\n1732\n01:21:49.870 --> 01:21:52.020\nYou can leave the FSMO Roles\nwhere they are.\n\n1733\n01:21:52.020 --> 01:21:53.910\nBut if you're getting\nrid of that old server,\n\n1734\n01:21:53.910 --> 01:21:57.140\nyou'll wanna move whatever roles\nit had to this new server.\n\n1735\n01:21:57.140 --> 01:21:58.680\nAnd then you can decommission the old one.\n\n1736\n01:21:58.680 --> 01:22:00.950\nI'm gonna add that as a step.\n\n1737\n01:22:00.950 --> 01:22:04.665\nBecause if we're migrating, you're\nnormally getting rid of the old server.\n\n1738\n01:22:04.665 --> 01:22:05.300\n>> Right.\n>> And so\n\n1739\n01:22:05.300 --> 01:22:08.975\nyou'll want to make sure that\nyou demote the old server.\n\n1740\n01:22:08.975 --> 01:22:13.526\n[CROSSTALK]\n>> Is bring up that new server,\n\n1741\n01:22:13.526 --> 01:22:16.410\nput your 2012 on it.\n\n1742\n01:22:16.410 --> 01:22:17.880\nAnd install active directory.\n\n1743\n01:22:17.880 --> 01:22:19.520\nAnd then migrate the roles over to that.\n\n1744\n01:22:19.520 --> 01:22:20.530\nNow you're good to go with that.\n\n1745\n01:22:20.530 --> 01:22:22.810\nAll your roles are sitting\non that shiny new server.\n\n1746\n01:22:22.810 --> 01:22:25.750\nNow I can do the rest of the domain\ncontrollers on my network.\n\n1747\n01:22:25.750 --> 01:22:26.700\n>> Yeah.\n\n1748\n01:22:26.700 --> 01:22:31.110\nSo that's the upgrade process when\nwe're planning for the upgrade.\n\n1749\n01:22:31.110 --> 01:22:33.100\nWe're just remembering these steps.\n\n1750\n01:22:33.100 --> 01:22:35.330\nWhat needs to be done and where.\n\n1751\n01:22:35.330 --> 01:22:38.020\nThe actual execution of it's\nnot that big of a deal.\n\n1752\n01:22:38.020 --> 01:22:42.280\nIt is a little risky especially in the\nlarger environments because these mistakes\n\n1753\n01:22:42.280 --> 01:22:44.040\nwith the active directory, they replicate.\n\n1754\n01:22:44.040 --> 01:22:45.620\nThey spread throughout the network and\n\n1755\n01:22:45.620 --> 01:22:47.731\nthat's where you can start\nto get into trouble.\n\n1756\n01:22:47.731 --> 01:22:49.772\n[CROSSTALK]\n>> That step six,\n\n1757\n01:22:49.772 --> 01:22:52.510\nmake sure you demote it properly, right.\n\n1758\n01:22:52.510 --> 01:22:54.000\nJust something to stress.\n\n1759\n01:22:54.000 --> 01:22:58.235\nDon't just unplug it and take it off\nthe network, cuz all your other domain\n\n1760\n01:22:58.235 --> 01:23:03.122\ncontroller; the KCC, the ISTG, they've\nmade replication partners with that and\n\n1761\n01:23:03.122 --> 01:23:05.297\neverybody's gonna be looking for\nit and he's just gone.\n\n1762\n01:23:05.297 --> 01:23:06.340\n>> Yeah.\n>> And that's gonna\n\n1763\n01:23:06.340 --> 01:23:09.580\nleave you with some metadata that you\"re\ngoing to have to go in there and clean up.\n\n1764\n01:23:09.580 --> 01:23:12.675\nSo make sure you run through DC,\nwell it's not dcpomo anymore.\n\n1765\n01:23:12.675 --> 01:23:15.430\nBut the same tool you used\nto install Active Directory,\n\n1766\n01:23:15.430 --> 01:23:17.960\nis the wizard that you're gonna\nuse to remove Active Directory.\n\n1767\n01:23:17.960 --> 01:23:19.858\nSo do it properly,\nthat let's the network know that, hey,\n\n1768\n01:23:19.858 --> 01:23:21.510\nthis guy's no longer domain controller.\n\n1769\n01:23:21.510 --> 01:23:25.080\nWe're not gonna need to find him for\nreplication or anything like that.\n\n1770\n01:23:25.080 --> 01:23:27.964\n>> Yeah and I do know some people that,\nespecially with virtual machines,\n\n1771\n01:23:27.964 --> 01:23:31.150\nwhen they decommission a server, they\njust shut it down and leave the VM there.\n\n1772\n01:23:31.150 --> 01:23:33.060\nIt's shut down so\nit's not eating up resources.\n\n1773\n01:23:33.060 --> 01:23:35.875\nAnd they just leave it so if they ever\nneed something they bring it back.\n\n1774\n01:23:35.875 --> 01:23:38.160\n>> Right.\n>> Well that's fine on a web server or\n\n1775\n01:23:38.160 --> 01:23:39.395\na file server or whatever.\n\n1776\n01:23:39.395 --> 01:23:39.920\n>> Mm-hm.\n>> But\n\n1777\n01:23:39.920 --> 01:23:42.010\non a domain control there's\nsome problems with that.\n\n1778\n01:23:42.010 --> 01:23:44.750\nProblem number one is just\nbecause the server is off,\n\n1779\n01:23:44.750 --> 01:23:46.835\ndoesn't mean other people aren't\ngonna try and replicate to it.\n\n1780\n01:23:46.835 --> 01:23:48.630\n>> Right.\n>> So you're gonna have replication errors\n\n1781\n01:23:48.630 --> 01:23:51.610\non all your other DCs while\nthat server is shut off.\n\n1782\n01:23:51.610 --> 01:23:55.420\nProblem number two,\na domain controller cannot be offline for\n\n1783\n01:23:55.420 --> 01:23:56.820\nmore than six months.\n\n1784\n01:23:56.820 --> 01:24:00.570\nSo if you hit six months,\nthat domain controller,\n\n1785\n01:24:00.570 --> 01:24:02.560\neven if you bring it back online,\nwill not function.\n\n1786\n01:24:02.560 --> 01:24:03.810\nIt will not bring itself back up.\n\n1787\n01:24:03.810 --> 01:24:05.790\nYou have to format and reinstall.\n\n1788\n01:24:05.790 --> 01:24:07.550\nYou can't even restore a backup.\n\n1789\n01:24:07.550 --> 01:24:10.065\nBackups of domain controllers,\nthat's another caveat right there.\n\n1790\n01:24:10.065 --> 01:24:11.360\n>> Mm-hm.\n>> If you have a backup for\n\n1791\n01:24:11.360 --> 01:24:13.810\na domain controller that's over\nsix months old, it's worthless.\n\n1792\n01:24:13.810 --> 01:24:14.945\nYou can't restore it.\n\n1793\n01:24:14.945 --> 01:24:19.130\nSo that's a limitation there,\nbecause it's just too old,\n\n1794\n01:24:19.130 --> 01:24:21.300\nit's too far back dated,\nyou just need to bring up a new DC.\n\n1795\n01:24:21.300 --> 01:24:22.835\n>> Yeah, that's that tomb stone lifetime.\n\n1796\n01:24:22.835 --> 01:24:25.710\n>> Mm-hm, so kind of little caveats there.\n\n1797\n01:24:25.710 --> 01:24:29.120\nSo when you're getting rid of that old DC,\nyou might shut it off for a day or\n\n1798\n01:24:29.120 --> 01:24:32.860\ntwo just to make sure everything is cool,\nbut you should be fine, right?\n\n1799\n01:24:32.860 --> 01:24:36.520\nYour infrastructure, you can check to make\nsure your replication is running smoothly.\n\n1800\n01:24:36.520 --> 01:24:38.520\nWhen you shut that DC off,\neven for a day or two,\n\n1801\n01:24:38.520 --> 01:24:40.330\nyou'll get a bunch of replication errors.\n\n1802\n01:24:40.330 --> 01:24:45.020\nBut then, you need to bring it back\nonline, let it fully synchronize, and\n\n1803\n01:24:45.020 --> 01:24:45.850\nthen demote it.\n\n1804\n01:24:45.850 --> 01:24:51.070\nRight, demote it properly before unjoining\nit from the domain and getting rid of it.\n\n1805\n01:24:51.070 --> 01:24:54.100\nAll right, well, Mike, that is a pretty\ngood spot for us to wrap up this show.\n\n1806\n01:24:54.100 --> 01:24:56.090\nWe've got some more stuff to talk about-\n>> Mm hm.\n\n1807\n01:24:56.090 --> 01:24:58.840\n>> On this one, which we thought\nwe could get in one show, but\n\n1808\n01:24:58.840 --> 01:25:00.360\nwe aren't even halfway through our notes.\n\n1809\n01:25:00.360 --> 01:25:00.930\n>> Yeah.\n>> So\n\n1810\n01:25:00.930 --> 01:25:05.050\nwe still have like domain restructuring\nhow we can change the structure after it's\n\n1811\n01:25:05.050 --> 01:25:06.140\nalready defined,\n>> Right.\n\n1812\n01:25:06.140 --> 01:25:07.150\n>> Which is kind of fun.\n\n1813\n01:25:07.150 --> 01:25:11.280\nSo we've got a lot of other things to talk\nabout but we'll save that for part two.\n\n1814\n01:25:11.280 --> 01:25:11.850\n>> Sounds like a plan.\n\n1815\n01:25:11.850 --> 01:25:12.995\n>> We'll end this with a cliff hanger.\n\n1816\n01:25:12.995 --> 01:25:13.922\n>> [LAUGH].\n\n1817\n01:25:13.922 --> 01:25:17.300\n>> All right well let me remind you guys\nthat if you have questions on any of this\n\n1818\n01:25:17.300 --> 01:25:18.230\nfeel free to ask.\n\n1819\n01:25:18.230 --> 01:25:22.280\nIf you go to itpro.tv/live you'll\nsee the chat box beneath the video,\n\n1820\n01:25:22.280 --> 01:25:25.490\npost your questions there we monitor and\nanswer during the show.\n\n1821\n01:25:25.490 --> 01:25:28.650\nIf you have questions after the show,\nuse our Q&A forums.\n\n1822\n01:25:28.650 --> 01:25:32.650\nYou'll see that link that says Q&A at\nthe top of the page, every page really.\n\n1823\n01:25:32.650 --> 01:25:34.940\nIt'll take you into our forums and\nyou can post your questions there.\n\n1824\n01:25:34.940 --> 01:25:37.010\nWe monitor and\nanswer that after the show, right?\n\n1825\n01:25:37.010 --> 01:25:39.960\nSo there's always an avenue for\nyou to ask your questions and\n\n1826\n01:25:39.960 --> 01:25:41.090\nget the answers you need.\n\n1827\n01:25:42.120 --> 01:25:43.960\nAll right,\nwell I hope you guys enjoyed the show.\n\n1828\n01:25:43.960 --> 01:25:45.930\nSigning off for ITProTV, I'm Don Pezet.\n\n1829\n01:25:45.930 --> 01:25:46.980\n>> And I'm Mike Rodrick.\n\n1830\n01:25:46.980 --> 01:25:47.736\n>> And we will see you next time.\n\n1831\n01:25:47.736 --> 01:25:57.736\n[MUSIC]\n\n",
          "vimeoId": "107935425"
        },
        {
          "description": "",
          "length": "6378",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/010-Planning-For-AD-Logical-pt2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/010-Planning-For-AD-Logical-pt2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/010-Planning-For-AD-Logical-pt2-sm.jpg",
          "title": "Planning For AD (Logical) Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC].\n\n2\n00:00:15,212 --> 00:00:22,588\n[SOUND].\n\n3\n00:00:22,588 --> 00:00:32,588\n[MUSIC]\n\n4\n00:00:33,711 --> 00:00:36,736\nAll right good morning,\ngood afternoon, and good evening.\n\n5\n00:00:36,736 --> 00:00:39,296\nWelcome back to another\nepisode of IT Pro TV.\n\n6\n00:00:39,296 --> 00:00:42,201\nI'm your host Don Pezet,\nback again with Mr. Mike Rodrick.\n\n7\n00:00:42,201 --> 00:00:42,890\nHow's it going Mike?\n\n8\n00:00:42,890 --> 00:00:43,460\n>> Fantastic.\n\n9\n00:00:43,460 --> 00:00:44,240\nHow are you doing Don?\n\n10\n00:00:44,240 --> 00:00:45,770\n>> I'm doing just well.\n\n11\n00:00:45,770 --> 00:00:46,500\n>> Good, good.\n\n12\n00:00:46,500 --> 00:00:47,355\n>> It's one of those days.\n\n13\n00:00:47,355 --> 00:00:50,220\n>> [LAUGH]\n>> All right, so in our last episode we\n\n14\n00:00:50,220 --> 00:00:54,940\njumped into planning the logical\nstructure of our active directory.\n\n15\n00:00:54,940 --> 00:00:58,560\nAnd we talked a little longer\nthan I planned, which is good.\n\n16\n00:00:58,560 --> 00:01:01,940\nIt means we covered everything\nin depth and all that.\n\n17\n00:01:01,940 --> 00:01:05,650\nSo I had about four pages of notes\nto get through in that episode and\n\n18\n00:01:05,650 --> 00:01:09,828\nwe got through about a page and\na half so, so here's part two!\n\n19\n00:01:09,828 --> 00:01:14,680\n[LAUGH] So we're gonna jump right\nback into that logical design, now.\n\n20\n00:01:14,680 --> 00:01:18,970\nWe spent the last one talking about\nforest level stuff and domains and\n\n21\n00:01:18,970 --> 00:01:21,470\ntrusts and all that higher level.\n\n22\n00:01:21,470 --> 00:01:25,380\nNow we're going to go to the smaller\nelements inside of our active directory.\n\n23\n00:01:25,380 --> 00:01:29,110\nBut before we do that I wanna double back\non one topic that we didn't touch on in\n\n24\n00:01:29,110 --> 00:01:29,810\nthe last episode.\n\n25\n00:01:31,080 --> 00:01:34,920\nAnd that was,\nif you build a network from scratch,\n\n26\n00:01:34,920 --> 00:01:37,190\nyou can design it however you want.\n\n27\n00:01:37,190 --> 00:01:39,067\nBut if you go to work somewhere and\n\n28\n00:01:39,067 --> 00:01:41,961\nthey've already got a domain\nhierarchy in place.\n\n29\n00:01:41,961 --> 00:01:42,545\n>> Right.\n\n30\n00:01:42,545 --> 00:01:45,860\n>> That is let's say,\nwhat is the politically correct word?\n\n31\n00:01:45,860 --> 00:01:46,488\n>> Inefficient?\n\n32\n00:01:46,488 --> 00:01:47,239\n>> Sub-optimal.\n\n33\n00:01:47,239 --> 00:01:48,060\n>> Yeah.\n[LAUGH]\n\n34\n00:01:48,060 --> 00:01:50,300\n>> If it's got a crappy design,\n\n35\n00:01:50,300 --> 00:01:51,910\nand obviously an idiot designed it.\n\n36\n00:01:51,910 --> 00:01:53,010\nWhat do you do?\n\n37\n00:01:53,010 --> 00:01:54,120\nAre you just stuck?\n\n38\n00:01:54,120 --> 00:01:55,900\nDo you have to redesign it from scratch?\n\n39\n00:01:55,900 --> 00:01:58,490\nWell in the old days yeah,\nyou had to just restart.\n\n40\n00:01:58,490 --> 00:02:02,890\nIt was a mess, but\nin our newer versions of active directory,\n\n41\n00:02:02,890 --> 00:02:07,780\nwe can actually change the structure\nof the AD after the fact, all right?\n\n42\n00:02:07,780 --> 00:02:09,930\nThere are certain things\nthat you cannot change.\n\n43\n00:02:09,930 --> 00:02:13,220\nYou can not change who the forest root is.\n\n44\n00:02:13,220 --> 00:02:17,430\nSo that first domain, that you\nbrought up that one's the forest root.\n\n45\n00:02:17,430 --> 00:02:19,330\nIt's got the enterprise admin and\nscheme admins.\n\n46\n00:02:19,330 --> 00:02:20,380\nYou can't change that.\n\n47\n00:02:20,380 --> 00:02:21,220\nAll right.\n\n48\n00:02:21,220 --> 00:02:24,660\nBut pretty much everything\nelse you can change.\n\n49\n00:02:24,660 --> 00:02:25,470\n>> It's amazing.\n\n50\n00:02:25,470 --> 00:02:26,920\n>> Yeah, you can change a domains name.\n\n51\n00:02:26,920 --> 00:02:28,910\nYou can change the forest\nroots name if you want,\n\n52\n00:02:28,910 --> 00:02:30,800\nyou just can't change which domain it is.\n\n53\n00:02:30,800 --> 00:02:32,200\nSo you can change their name.\n\n54\n00:02:32,200 --> 00:02:34,830\nYou can change their\nparent/child relationships.\n\n55\n00:02:34,830 --> 00:02:36,570\nYou can change a lot of that.\n\n56\n00:02:36,570 --> 00:02:37,965\nNow it's not for the faint of heart.\n\n57\n00:02:37,965 --> 00:02:40,110\n>> [LAUGH]\n>> There's a lot that can go wrong.\n\n58\n00:02:40,110 --> 00:02:43,210\nAnd when it does go wrong it replicates\nacross the DCs and it breaks everything.\n\n59\n00:02:43,210 --> 00:02:44,300\n>> Breaks everything.\n\n60\n00:02:44,300 --> 00:02:47,702\n>> So this does require\na high degree of testing.\n\n61\n00:02:47,702 --> 00:02:50,390\nYou wanna run through this procedure\na few times before you implement\n\n62\n00:02:50,390 --> 00:02:50,980\nit in production.\n\n63\n00:02:50,980 --> 00:02:52,150\nIt's a big deal.\n\n64\n00:02:52,150 --> 00:02:53,740\n>> It is.\n>> Right, anytime you change\n\n65\n00:02:53,740 --> 00:02:56,522\nyour directory structure it\neffects the entire forest.\n\n66\n00:02:56,522 --> 00:02:59,838\nAll right, but\nthe process is fairly straight forward.\n\n67\n00:02:59,838 --> 00:03:02,920\nThere is a amazing article\non Microsoft's tech net that\n\n68\n00:03:02,920 --> 00:03:04,180\nkind of breaks this process down.\n\n69\n00:03:04,180 --> 00:03:05,130\nAnd I wanna show you guys that.\n\n70\n00:03:05,130 --> 00:03:08,350\nI'll post the link to\nit in the show notes.\n\n71\n00:03:08,350 --> 00:03:12,340\nBut it's explaining what is domain rename.\n\n72\n00:03:12,340 --> 00:03:15,156\nThere is a utility called RENDOM.\n\n73\n00:03:15,156 --> 00:03:17,260\nR-E-N-D-O-M.\n\n74\n00:03:17,260 --> 00:03:19,586\nAnd that's the rename domain utility.\n\n75\n00:03:19,586 --> 00:03:24,140\nAnd based on that it sounds\nlike it renames domains.\n\n76\n00:03:24,140 --> 00:03:25,210\n>> Yeah I like that.\n\n77\n00:03:25,210 --> 00:03:28,610\n>> But it actually does a lot more\nbecause a domain's name is what kind of\n\n78\n00:03:28,610 --> 00:03:30,210\nbuilds the structure, so\n\n79\n00:03:30,210 --> 00:03:33,720\nby renaming a domain you can actually\nmove where it is in your forest.\n\n80\n00:03:33,720 --> 00:03:35,250\nSo it's a very powerful utility.\n\n81\n00:03:35,250 --> 00:03:36,430\n>> Absolutely.\n\n82\n00:03:36,430 --> 00:03:39,360\n>> An it's capable of\ndoing all sorts of magic.\n\n83\n00:03:39,360 --> 00:03:43,650\nAt it's most basic,\nit can change the name of a domain.\n\n84\n00:03:43,650 --> 00:03:46,220\nSo, maybe somebody built a new domain.\n\n85\n00:03:46,220 --> 00:03:53,180\nI've seen this before, where in Windows\nMT, the default domain's name was Domain.\n\n86\n00:03:53,180 --> 00:03:54,540\n>> Domain.\n>> That was it.\n\n87\n00:03:54,540 --> 00:03:57,705\nI almost made you spit your water out.\n\n88\n00:03:57,705 --> 00:03:58,580\n[LAUGH] And so\n\n89\n00:03:58,580 --> 00:04:03,410\nI always know I'm in trouble when I go\nto a network, somebody asks for help and\n\n90\n00:04:03,410 --> 00:04:06,300\nI come to look at the network and\nI see the domain name is domain.\n\n91\n00:04:06,300 --> 00:04:07,480\nI'm like, oh great.\n\n92\n00:04:07,480 --> 00:04:10,060\nHere's somebody who did\na default install of NT4 and\n\n93\n00:04:10,060 --> 00:04:13,900\nthen they've just upgraded year after\nyear after year and you see that and\n\n94\n00:04:13,900 --> 00:04:16,290\nthen when they bring out\ntheir second domain in NT 4,\n\n95\n00:04:16,290 --> 00:04:20,670\nthey call it domain one and domain two and\nyou just, you knew you were in trouble.\n\n96\n00:04:20,670 --> 00:04:22,070\nWell, that happens.\n\n97\n00:04:22,070 --> 00:04:22,940\nYou get these bad names.\n\n98\n00:04:22,940 --> 00:04:25,250\n>> Right.\n>> And those are the old net BIOS names.\n\n99\n00:04:25,250 --> 00:04:27,650\nAnd then once you went to Windows\n2000 in the active directory,\n\n100\n00:04:27,650 --> 00:04:29,950\nthen you had the fully qualified DNS name.\n\n101\n00:04:29,950 --> 00:04:34,920\nSo you might have corp.company.net\nas the fully qualified name and\n\n102\n00:04:34,920 --> 00:04:36,830\nthen that BIOS name might be domain.\n\n103\n00:04:36,830 --> 00:04:38,870\nYou know, like completely unrelated.\n\n104\n00:04:38,870 --> 00:04:41,780\nAnd that happens or maybe they did\nsomething dumb and called it like,\n\n105\n00:04:41,780 --> 00:04:42,820\nI shouldn't say dumb.\n\n106\n00:04:42,820 --> 00:04:45,520\nMaybe they did something uninformed and\n\n107\n00:04:45,520 --> 00:04:48,120\ncreated it,\ncreated a domain called NT4 domain.\n\n108\n00:04:48,120 --> 00:04:52,330\nWell now you're on Windows Server 2012 and\nyour domain's still called NT4 domain.\n\n109\n00:04:52,330 --> 00:04:54,030\nAn so it happens.\n\n110\n00:04:54,030 --> 00:04:58,139\nWe wanna change the name of a domain and\nthe RENDOM utility will do that,\n\n111\n00:04:58,139 --> 00:05:00,010\nall right, we can change that.\n\n112\n00:05:00,010 --> 00:05:01,490\nBut we can go so much further.\n\n113\n00:05:01,490 --> 00:05:04,850\nLet me show you this article because it\nlays out the different scenarios where we\n\n114\n00:05:04,850 --> 00:05:05,970\nmight need to do this.\n\n115\n00:05:05,970 --> 00:05:08,150\nSo changing a single domain name is great.\n\n116\n00:05:08,150 --> 00:05:09,870\nThat's one scenario.\n\n117\n00:05:09,870 --> 00:05:11,960\nAnother scenario is right here.\n\n118\n00:05:13,090 --> 00:05:15,490\nMaybe I'm not just\nchanging a single domain.\n\n119\n00:05:15,490 --> 00:05:16,830\nMaybe it's multiple.\n\n120\n00:05:16,830 --> 00:05:21,421\nHere you see I've got cohovineyard.com,\nand under it eu.cohovineyard,\n\n121\n00:05:21,421 --> 00:05:24,678\nhr.cohovineyard, sales.cohovineyard,\nright?\n\n122\n00:05:24,678 --> 00:05:26,380\nSo four domains.\n\n123\n00:05:26,380 --> 00:05:28,180\nWe can change them all at once.\n\n124\n00:05:28,180 --> 00:05:30,910\nYou can change and be cohowinery.com.\n\n125\n00:05:30,910 --> 00:05:33,750\nSo here are the issues in\nthe rename functionality.\n\n126\n00:05:33,750 --> 00:05:35,680\nNot changing the infrastructure,\n\n127\n00:05:35,680 --> 00:05:38,670\nit's still the same parent\nchild relationships as before.\n\n128\n00:05:38,670 --> 00:05:41,040\nNothings changing there,\njust the name is changing.\n\n129\n00:05:41,040 --> 00:05:44,320\nAll right,that's the most\nsimple of our solutions.\n\n130\n00:05:44,320 --> 00:05:46,150\nYou can go more advanced though.\n\n131\n00:05:46,150 --> 00:05:50,530\nHere, they've got this domain products\nwhich is a child of the sales domain,\n\n132\n00:05:50,530 --> 00:05:52,830\nwhich is a child of coho winery.\n\n133\n00:05:52,830 --> 00:05:55,368\nWe can move it out from\nunder another domain, so\n\n134\n00:05:55,368 --> 00:05:59,628\ninstead of being products.about sales\nit can just be products.cohowinery.\n\n135\n00:05:59,628 --> 00:06:00,425\nRight?\n\n136\n00:06:00,425 --> 00:06:03,005\nSo changing the actual location\n\n137\n00:06:03,005 --> 00:06:04,845\nof that domain moving it-\n>> Right.\n\n138\n00:06:04,845 --> 00:06:06,135\n>> But still within the same tree.\n\n139\n00:06:07,220 --> 00:06:09,628\nWe can move it to it's own tree.\n\n140\n00:06:09,628 --> 00:06:11,633\nHere there's eu.cohowinery and\n\n141\n00:06:11,633 --> 00:06:15,643\nthey're moving it out to be\ncohovineyardandwinery.com, right,\n\n142\n00:06:15,643 --> 00:06:19,345\nmoving it into it's own tree out\nfrom under the existing tree.\n\n143\n00:06:19,345 --> 00:06:20,480\nAll right?\n\n144\n00:06:20,480 --> 00:06:23,579\nSo those are a few different\nscenarios that are available.\n\n145\n00:06:24,700 --> 00:06:28,960\nAnd oh, and one more,\nmoving from one tree to another tree.\n\n146\n00:06:28,960 --> 00:06:32,390\nSo in this example here,\nwe're making it its own tree and\n\n147\n00:06:32,390 --> 00:06:34,760\nhere they're just moving it\nfrom one tree to another.\n\n148\n00:06:34,760 --> 00:06:38,990\nSo those are some of the scenarios that\nwe can go through when we start to\n\n149\n00:06:38,990 --> 00:06:40,770\nchange our infrastructure.\n\n150\n00:06:40,770 --> 00:06:41,850\nAll right.\n\n151\n00:06:41,850 --> 00:06:46,130\nThe thing about your computers and\nstuff, when they're joined to a domain,\n\n152\n00:06:46,130 --> 00:06:50,100\nthey join using domain SID,\nthe security identifier.\n\n153\n00:06:50,100 --> 00:06:53,620\nSo, they don't actually care\nwhat the domain is called.\n\n154\n00:06:53,620 --> 00:06:55,465\nThe name doesn't really matter.\n\n155\n00:06:55,465 --> 00:06:57,155\nThey care about the security identifier.\n\n156\n00:06:57,155 --> 00:06:59,285\nAnd when we change the name\nthe SID doesn't change.\n\n157\n00:06:59,285 --> 00:07:00,795\nSo that's nice, right?\n\n158\n00:07:00,795 --> 00:07:01,485\n>> Yep.\n\n159\n00:07:01,485 --> 00:07:05,098\n>> And when you move it out from under\nanother domain or whatever, the SID for\n\n160\n00:07:05,098 --> 00:07:07,610\nthe domain itself doesn't change either.\n\n161\n00:07:07,610 --> 00:07:10,390\nSo that's how your PCs\nare able to still find it.\n\n162\n00:07:10,390 --> 00:07:13,730\nBut for a brief while, you're gonna have\nto operate with both domain names, and\n\n163\n00:07:13,730 --> 00:07:16,290\nyour clients as they connect\nwill update themselves.\n\n164\n00:07:16,290 --> 00:07:20,120\nSo your Windows 7 and Windows 8 machines,\nthey'll update to reflect that new name,\n\n165\n00:07:20,120 --> 00:07:23,430\nand you don't have to go and un-join\nthem and rejoin them from the domain,\n\n166\n00:07:23,430 --> 00:07:25,800\nwhich was the old way of doing things.\n\n167\n00:07:25,800 --> 00:07:27,879\nSo RENDOM, really powerful.\n\n168\n00:07:27,879 --> 00:07:29,030\n>> Mm-hm.\n>> Okay, but\n\n169\n00:07:29,030 --> 00:07:32,819\nlike most utilities like this,\nit has no GUI, all right.\n\n170\n00:07:32,819 --> 00:07:37,249\nMicrosoft doesn't want you naming\ndomains unless you absolutely know what\n\n171\n00:07:37,249 --> 00:07:38,250\nyou're doing.\n\n172\n00:07:38,250 --> 00:07:39,619\nIt's a big deal, all right.\n\n173\n00:07:39,619 --> 00:07:41,067\nDuring the rename process,\n\n174\n00:07:41,067 --> 00:07:44,760\nyou're going to have to reboot every\none of your domain controllers.\n\n175\n00:07:44,760 --> 00:07:45,730\nAll of them.\n\n176\n00:07:45,730 --> 00:07:47,362\nSo you're gonna deal with some down time.\n\n177\n00:07:47,362 --> 00:07:47,980\nAll right.\n\n178\n00:07:47,980 --> 00:07:49,430\nThis will affect all of your systems.\n\n179\n00:07:49,430 --> 00:07:51,690\nThis is not something you just do in\nthe middle of the day willy nilly.\n\n180\n00:07:51,690 --> 00:07:55,833\nThis is, a lot of planning needs to\ngo into this and a lot of effort.\n\n181\n00:07:55,833 --> 00:08:00,618\nBut the moral of the story is that just\nbecause somebody made bad decisions\n\n182\n00:08:00,618 --> 00:08:01,398\nyears ago.\n\n183\n00:08:01,398 --> 00:08:02,821\nDoesn't mean you have to suffer for it.\n\n184\n00:08:02,821 --> 00:08:04,913\nYou can fix the problems.\n\n185\n00:08:04,913 --> 00:08:06,780\n>> And that's going to happen.\n\n186\n00:08:06,780 --> 00:08:09,970\nEven if, you know, normally it is\nsomebody setting up something maybe\n\n187\n00:08:09,970 --> 00:08:11,400\nnot the way you would've done it.\n\n188\n00:08:11,400 --> 00:08:12,900\nBut over time companies change too,\n\n189\n00:08:12,900 --> 00:08:14,730\nlike that little example they\nwere using in there, you know,\n\n190\n00:08:14,730 --> 00:08:19,000\nthey were Covo Vineyard and now their\nCovo Winery or which ever way it went.\n\n191\n00:08:19,000 --> 00:08:22,430\nAnd maybe our business model has changed,\nor we've incorporated new things and\n\n192\n00:08:22,430 --> 00:08:24,080\nwe want our name to reflect that.\n\n193\n00:08:24,080 --> 00:08:27,170\nSo there might be other reasons we need\nto, or think we want to go in there and\n\n194\n00:08:27,170 --> 00:08:28,210\nchange those things.\n\n195\n00:08:28,210 --> 00:08:31,750\n>> You know, you're actually seeing\nthat right now where a lot of people\n\n196\n00:08:31,750 --> 00:08:36,330\ncreated these domains that were called\nsomething like Coho Vineyard dot local.\n\n197\n00:08:36,330 --> 00:08:38,130\nLike yeah, let's use dot local!\n\n198\n00:08:38,130 --> 00:08:42,960\nWell, that TLD got approved, and so\non the internet dot local didn't exist.\n\n199\n00:08:42,960 --> 00:08:46,790\nNow that you're actually able to buy these\n.local, I'm not sure if you can buy them\n\n200\n00:08:46,790 --> 00:08:50,150\nyet, but it's definitely coming, where you\ncan buy something that ends in .local.\n\n201\n00:08:50,150 --> 00:08:52,190\nSo what people all thought were safe,\n\n202\n00:08:52,190 --> 00:08:55,600\nfake address to use internally\nare no longer safe and fake.\n\n203\n00:08:55,600 --> 00:08:59,340\n>> Yeah, so now somebody's going to\nbuy it and they're going to have to.\n\n204\n00:08:59,340 --> 00:09:02,420\n>> So these are all examples of when\nwe might need to do the rename process.\n\n205\n00:09:02,420 --> 00:09:05,950\nNow the rename process is\nfairly straightforward, but\n\n206\n00:09:05,950 --> 00:09:07,690\nit does require a couple of steps.\n\n207\n00:09:07,690 --> 00:09:08,660\nAll right.\n\n208\n00:09:08,660 --> 00:09:12,230\nWhat you have to do is\nthe rename domain utility,\n\n209\n00:09:12,230 --> 00:09:15,520\nit works off of an XML file\nthat defines your structure.\n\n210\n00:09:15,520 --> 00:09:18,480\nSo the first thing that you do\nis to create an XML file that\n\n211\n00:09:18,480 --> 00:09:21,540\ndocuments your structure\nas it is right now.\n\n212\n00:09:21,540 --> 00:09:24,089\nOkay?\nLet me show you an example on just\n\n213\n00:09:24,089 --> 00:09:25,390\na simple domain.\n\n214\n00:09:25,390 --> 00:09:29,068\nSo here I'm on a domain controller and\nI'm going to fire up a command prompt,\n\n215\n00:09:29,068 --> 00:09:31,296\nI'll do it with administrative privileges.\n\n216\n00:09:31,296 --> 00:09:32,258\nWoo hoo.\n\n217\n00:09:32,258 --> 00:09:34,140\n>> All right and\n\n218\n00:09:34,140 --> 00:09:39,740\nI'm just going to make a little\ntemporary folder here to use, alright?\n\n219\n00:09:39,740 --> 00:09:41,910\nAnd I'm going to say random.\n\n220\n00:09:41,910 --> 00:09:43,510\nActually if I'm going to do random/?\n\n221\n00:09:43,510 --> 00:09:45,670\nYou'll get to see some\nof the different things.\n\n222\n00:09:45,670 --> 00:09:48,430\nThe first one we want is random/list.\n\n223\n00:09:48,430 --> 00:09:49,770\nThis guy right here.\n\n224\n00:09:49,770 --> 00:09:55,090\nAnd that's going to generate the XML file\nwe need to work with renaming the domain.\n\n225\n00:09:55,090 --> 00:09:55,640\n>> Right.\n\n226\n00:09:55,640 --> 00:09:59,460\n>> Right, and so, this is step one, and\nthis is something you can do in the middle\n\n227\n00:09:59,460 --> 00:10:01,740\nof the day, this is not really\ngoing to make any changes.\n\n228\n00:10:01,740 --> 00:10:03,660\n>> Just reading that configuration\npartition information?\n\n229\n00:10:04,820 --> 00:10:07,360\n>> So, we run random/list.\n\n230\n00:10:07,360 --> 00:10:09,990\nOperation completed successfully,\nthat's it, right?\n\n231\n00:10:09,990 --> 00:10:14,350\nWell what it did is,\nit created Domainlist.xml, right?\n\n232\n00:10:14,350 --> 00:10:19,770\nThat little file right there,\nand if I open that up in Notepad,\n\n233\n00:10:21,070 --> 00:10:24,360\nyou can see it's a straight\nforward XML document.\n\n234\n00:10:24,360 --> 00:10:28,070\nLet me make that font a little bit\nbigger so we can see some more of that.\n\n235\n00:10:29,120 --> 00:10:32,020\nWhoa, that's not the screen I thought\nwould take a while to come up.\n\n236\n00:10:32,020 --> 00:10:32,930\nThere we go.\n\n237\n00:10:32,930 --> 00:10:37,190\nSo what you'll see is where it\nbreaks down your forest and\n\n238\n00:10:37,190 --> 00:10:39,550\nthen your domains inside of it, okay?\n\n239\n00:10:39,550 --> 00:10:41,920\nNow notice my first two here\naren't actually domains.\n\n240\n00:10:41,920 --> 00:10:46,210\nI've got forest DNS zones and\ndomain DNS zones, right?\n\n241\n00:10:46,210 --> 00:10:48,090\nThose are actually application partitions.\n\n242\n00:10:48,090 --> 00:10:48,630\n>> Right.\n\n243\n00:10:48,630 --> 00:10:50,125\n>> But you might need to rename those,\n\n244\n00:10:50,125 --> 00:10:52,100\nrandom will do it,\nnormally we don't mess with those.\n\n245\n00:10:52,100 --> 00:10:53,860\n>> Yep, part of the name of\nthat does include, you can see,\n\n246\n00:10:53,860 --> 00:10:55,720\nit's for his DnsZone.lab.itpro.tv.\n\n247\n00:10:55,720 --> 00:10:57,770\nSo if we're gonna change\nthe name of the domain,\n\n248\n00:10:57,770 --> 00:10:59,680\nthat's gonna have to change as well.\n\n249\n00:10:59,680 --> 00:11:03,560\n>> And then after that we start\nseeing our other domains.\n\n250\n00:11:03,560 --> 00:11:06,220\nAnd you'll see this one is\nflagged as the forest root.\n\n251\n00:11:06,220 --> 00:11:08,430\nVersus other ones wouldn't have that flag.\n\n252\n00:11:08,430 --> 00:11:10,590\nAnd then you get the GUID.\n\n253\n00:11:10,590 --> 00:11:13,280\nThat security identifier for the domain.\n\n254\n00:11:13,280 --> 00:11:16,490\nAnd then you've got the actual\ndomain name, lab.itpro.tv.\n\n255\n00:11:16,490 --> 00:11:19,240\nAnd then here's the net bios name, lab.\n\n256\n00:11:19,240 --> 00:11:20,620\nAll right.\n\n257\n00:11:20,620 --> 00:11:24,480\nSo maybe I see corp.company.com here and\n\n258\n00:11:24,480 --> 00:11:29,360\nI see domain one or\nwhatever super lameness is right there.\n\n259\n00:11:29,360 --> 00:11:30,880\nSo we can take a look at that.\n\n260\n00:11:30,880 --> 00:11:33,520\nHere is the configuration for\nour current forest.\n\n261\n00:11:33,520 --> 00:11:35,630\nAnd if there were more,\nthey'd all be listed right here.\n\n262\n00:11:35,630 --> 00:11:37,450\nEach of the different\ndomains inside your forest.\n\n263\n00:11:38,670 --> 00:11:40,840\nStep one, back up this file.\n\n264\n00:11:40,840 --> 00:11:43,870\nThis file is the documentation for\nhow you are right now.\n\n265\n00:11:43,870 --> 00:11:44,576\nAll right.\n\n266\n00:11:44,576 --> 00:11:46,980\nStep two, edit the file.\n\n267\n00:11:46,980 --> 00:11:50,300\nYou edit this file to\nreflect what you want.\n\n268\n00:11:50,300 --> 00:11:52,000\nThis is gonna serve as a script.\n\n269\n00:11:52,000 --> 00:11:54,890\nA script that will run on\nthe servers to go in and\n\n270\n00:11:54,890 --> 00:11:57,730\nput these changes in place and\nmake them happen.\n\n271\n00:11:57,730 --> 00:12:02,711\nOkay, so if I wanted to\nchange this from lab.itpro.tv\n\n272\n00:12:02,711 --> 00:12:07,820\nto lab2.itpro.tv and I'm gonna\nchange that net bios name to lab2.\n\n273\n00:12:07,820 --> 00:12:13,300\nI would go and\nspecify those variations right here.\n\n274\n00:12:13,300 --> 00:12:16,100\nSo you modify this XML file\nto reflect what you want.\n\n275\n00:12:18,080 --> 00:12:23,660\nThen you take the modified XML file and\nyou feed it into your domain controllers.\n\n276\n00:12:23,660 --> 00:12:27,470\nNow you're gonna have to do this\non all of your domain controllers.\n\n277\n00:12:27,470 --> 00:12:30,990\nThey've all got to be aware of\nthis change, so you're going to\n\n278\n00:12:30,990 --> 00:12:33,290\ngo to each of your domain controllers,\nyou're going to upload this file,\n\n279\n00:12:33,290 --> 00:12:38,080\nyou're going to execute it and it's going\nto run and make the changes, all right?\n\n280\n00:12:38,080 --> 00:12:42,450\n>> You can't really do it on one and\nexpect the change to replicate out.\n\n281\n00:12:42,450 --> 00:12:44,300\nBecause you're changing\nthe name of the domain.\n\n282\n00:12:44,300 --> 00:12:47,870\nSo those other guys are no longer\ngonna be replicating with him anymore.\n\n283\n00:12:47,870 --> 00:12:49,430\n>> Right.\nYour replication will break.\n\n284\n00:12:49,430 --> 00:12:51,970\nAnd that goes back to the whole downtime.\n\n285\n00:12:51,970 --> 00:12:53,340\nAnd you have to reboot.\n\n286\n00:12:53,340 --> 00:12:54,960\nIt actually makes you reboot so\n\n287\n00:12:54,960 --> 00:12:58,230\nthere's a couple of parts that are gonna\nget you out of phase real fast.\n\n288\n00:12:58,230 --> 00:12:59,260\nAll right.\n\n289\n00:12:59,260 --> 00:13:00,400\nSo we need to do that.\n\n290\n00:13:00,400 --> 00:13:04,480\nWe modify this script and there's some\nother things you can do in the script.\n\n291\n00:13:04,480 --> 00:13:10,010\nThat same article that I pointed to,\nit's got an entry in here somewhere\n\n292\n00:13:10,010 --> 00:13:13,980\nwhere it talks about additional\nstuff you can do in that.\n\n293\n00:13:13,980 --> 00:13:16,160\nIt might be in this\nHow Domain Rename Works.\n\n294\n00:13:17,760 --> 00:13:18,730\nLet me just go to my notes.\n\n295\n00:13:18,730 --> 00:13:20,750\nI've got the actual link right here.\n\n296\n00:13:20,750 --> 00:13:23,360\nSo they've got a little\nbit here on some of\n\n297\n00:13:23,360 --> 00:13:25,690\nthe extra stuff that you\ncan do in that script file.\n\n298\n00:13:26,820 --> 00:13:28,020\nThey called it a script file, but\n\n299\n00:13:28,020 --> 00:13:31,180\nat the end of the day it\nreally is just a XML file.\n\n300\n00:13:31,180 --> 00:13:37,086\nYou know, I thought I had a different one.\n\n301\n00:13:37,086 --> 00:13:38,260\nWell.\n\n302\n00:13:38,260 --> 00:13:40,540\nThere's some additional\nstuff you can do in there.\n\n303\n00:13:40,540 --> 00:13:42,690\nMostly, we're just kind of\nediting what's already in there.\n\n304\n00:13:44,252 --> 00:13:48,550\nAll right, then, we need to upload\nthat XML file into our system.\n\n305\n00:13:49,640 --> 00:13:52,570\nIt's a couple of step that\nwe have to go through.\n\n306\n00:13:52,570 --> 00:13:57,480\nBefore we do it, this is important,\nyou need to make sure your domain is\n\n307\n00:13:57,480 --> 00:14:01,150\nhealthy before you start messing\naround with your domain, right.\n\n308\n00:14:01,150 --> 00:14:02,810\nAnd not just your domain, your forest.\n\n309\n00:14:02,810 --> 00:14:06,180\nSo you need to check that all of your\ndomain controllers are replicating,\n\n310\n00:14:06,180 --> 00:14:07,930\nthat everybody is happy.\n\n311\n00:14:07,930 --> 00:14:10,910\nIf they're not happy now, when you\nstart making a big change like this\n\n312\n00:14:10,910 --> 00:14:12,310\nyou're going to lose\nsome domain controllers.\n\n313\n00:14:12,310 --> 00:14:14,260\nThey're not going to come back up.\n\n314\n00:14:14,260 --> 00:14:17,540\nSo make sure you've resolved\nany outstanding issues.\n\n315\n00:14:17,540 --> 00:14:20,460\nIn other words, check the event logs\non all your domain controllers.\n\n316\n00:14:20,460 --> 00:14:22,040\nAnd use DCDIAG.\n\n317\n00:14:22,040 --> 00:14:23,810\nIf you're not familiar with that utility,\n\n318\n00:14:23,810 --> 00:14:27,640\nit's a neat utility that you can use\nto scan your domain controllers.\n\n319\n00:14:27,640 --> 00:14:30,620\nAnd it'll check their replication and\nso on.\n\n320\n00:14:30,620 --> 00:14:33,532\nAnd report back if any of\nyour DCs have any errors.\n\n321\n00:14:33,532 --> 00:14:36,490\nAll right, I'm in a domain with only\none domain controller right now.\n\n322\n00:14:36,490 --> 00:14:38,060\nSo it ran super fast.\n\n323\n00:14:38,060 --> 00:14:39,680\nAnd it gave me all passes.\n\n324\n00:14:39,680 --> 00:14:42,840\nBut you'll find in real life land,\nthat this could take a while to run, and\n\n325\n00:14:42,840 --> 00:14:43,950\nyou may get some failures.\n\n326\n00:14:43,950 --> 00:14:48,636\nAnd if you do, you need to go resolve\nthose, prior to doing the rename.\n\n327\n00:14:48,636 --> 00:14:50,614\n>> Kind of what we were talking\nabout with upgrading a server.\n\n328\n00:14:50,614 --> 00:14:52,797\nYou start changing these things,\nyou're not fixing the problem,\n\n329\n00:14:52,797 --> 00:14:56,070\nyou're gonna bring that problem right\nalong with you, or it's gonna be worse.\n\n330\n00:14:56,070 --> 00:14:56,620\n>> Yeah, yeah.\n\n331\n00:14:56,620 --> 00:14:58,070\nAbsolutely.\n\n332\n00:14:58,070 --> 00:15:02,550\nAll right, next some of the other\nthings that I need to do.\n\n333\n00:15:02,550 --> 00:15:03,990\nI didn't save that file did I?\n\n334\n00:15:03,990 --> 00:15:04,930\nLet me fire this back up.\n\n335\n00:15:04,930 --> 00:15:07,220\nAll right so we're going to rename this.\n\n336\n00:15:07,220 --> 00:15:11,370\nWe're going to make this lab2.itpro.tv so\nI'm just gonna punch that in here.\n\n337\n00:15:11,370 --> 00:15:13,020\nJust so we can kind of see that process.\n\n338\n00:15:13,020 --> 00:15:14,920\nLet me just save that.\n\n339\n00:15:14,920 --> 00:15:16,860\nAll right, so I've modified that.\n\n340\n00:15:16,860 --> 00:15:21,110\nSo now we're gonna go in here and\njust use random.\n\n341\n00:15:21,110 --> 00:15:25,760\nAnd I'm on the domain controller,\nso I'm gonna upload that file.\n\n342\n00:15:25,760 --> 00:15:27,860\nSo we just run random/upload.\n\n343\n00:15:27,860 --> 00:15:33,880\nAnd it just uploaded that Domainlist.xml\ninto your Active Directory.\n\n344\n00:15:33,880 --> 00:15:37,070\nThe Domain Rename Utility has a special\nlittle folder that it creates\n\n345\n00:15:37,070 --> 00:15:38,770\nwhere it stores its own data.\n\n346\n00:15:38,770 --> 00:15:40,780\nAnd you can see it in ADSI edit.\n\n347\n00:15:40,780 --> 00:15:42,540\nYou normally don't see it,\nit's kind of invisible.\n\n348\n00:15:42,540 --> 00:15:43,660\nBut it's now been uploaded.\n\n349\n00:15:44,890 --> 00:15:50,100\nIf I wait, this gets replicated\nacross my various systems, all right.\n\n350\n00:15:50,100 --> 00:15:52,260\nIf you're in hurry,\nyou can go to each one and\n\n351\n00:15:52,260 --> 00:15:56,630\nrun random/upload, but\notherwise it will replicate on its own.\n\n352\n00:15:56,630 --> 00:15:57,363\nAll right.\n\n353\n00:15:57,363 --> 00:16:00,309\nThen we're ready to actually\nexecute this stuff, all right.\n\n354\n00:16:00,309 --> 00:16:04,616\nWe need to run random/prepare.\n\n355\n00:16:04,616 --> 00:16:07,765\nThat's gonna get the system\nprepared to rename, all right.\n\n356\n00:16:07,765 --> 00:16:09,850\nAnd this one can take a little while.\n\n357\n00:16:09,850 --> 00:16:11,040\nIt may even spit out an error.\n\n358\n00:16:11,040 --> 00:16:13,240\nSee how it says waiting for DCs to reply.\n\n359\n00:16:13,240 --> 00:16:16,430\nIt's waiting for all of your\ndomain controllers to answer back.\n\n360\n00:16:16,430 --> 00:16:19,420\nThe more DCs you have\nthe longer that will take.\n\n361\n00:16:19,420 --> 00:16:22,880\nAnd even one of them fails\nit's going to stop you.\n\n362\n00:16:22,880 --> 00:16:23,650\nBut I've only got one.\n\n363\n00:16:23,650 --> 00:16:27,980\nI can see one server contacted, zero\nreturned errors, now I'm ready to run.\n\n364\n00:16:27,980 --> 00:16:32,080\nOkay, now so far I've done everything\nright here in this one DC.\n\n365\n00:16:32,080 --> 00:16:35,150\nThis next part I have to\ndo from all of my DCs.\n\n366\n00:16:35,150 --> 00:16:39,053\nI need to run rendom/execute.\n\n367\n00:16:39,053 --> 00:16:42,470\nThis is actually gonna do the rename,\nall right?\n\n368\n00:16:42,470 --> 00:16:44,030\nAnd so I can run that.\n\n369\n00:16:44,030 --> 00:16:47,520\nAnd then it's going to make me reboot, and\nI'll go to the next domain controller, and\n\n370\n00:16:47,520 --> 00:16:48,770\nthe next one, and do the same thing.\n\n371\n00:16:48,770 --> 00:16:50,260\nJust running rendom/execute.\n\n372\n00:16:50,260 --> 00:16:52,400\nGetting that done.\n\n373\n00:16:52,400 --> 00:16:54,240\nAnd that will move it along.\n\n374\n00:16:54,240 --> 00:16:54,920\nOkay?\n\n375\n00:16:54,920 --> 00:16:55,450\nSo there we go.\n\n376\n00:16:55,450 --> 00:16:57,960\nOne server contacted,\nzero servers returned errors.\n\n377\n00:16:57,960 --> 00:16:58,810\nIt's done.\n\n378\n00:16:58,810 --> 00:17:00,250\nIt's executed.\n\n379\n00:17:00,250 --> 00:17:02,260\nAnd it's trying to shut me out.\n\n380\n00:17:02,260 --> 00:17:03,100\nAll right?\n\n381\n00:17:03,100 --> 00:17:05,140\nThe directory service is shutting down.\n\n382\n00:17:05,140 --> 00:17:06,500\nIt's going to reboot.\n\n383\n00:17:06,500 --> 00:17:09,190\nSo as of right now, my domain is broken.\n\n384\n00:17:09,190 --> 00:17:09,790\n>> Right.\n\n385\n00:17:09,790 --> 00:17:10,490\nYeah.\n\n386\n00:17:10,490 --> 00:17:12,820\n>> So people aren't getting in and\nthey're probably unhappy.\n\n387\n00:17:12,820 --> 00:17:16,140\nBut, if we've scheduled this,\nif we've planned it, then that's fine.\n\n388\n00:17:16,140 --> 00:17:18,150\nWe'll give it a moment while it does that.\n\n389\n00:17:18,150 --> 00:17:21,230\nYou know, I might have interrupted\nit because I was typing a command\n\n390\n00:17:21,230 --> 00:17:22,310\nwhen that happened.\n\n391\n00:17:22,310 --> 00:17:22,860\nWe'll give it a second.\n\n392\n00:17:22,860 --> 00:17:24,220\nIf it doesn't reboot on its own,\nI'll do it.\n\n393\n00:17:24,220 --> 00:17:27,310\nOr really we don't, doesn't\nnecessarily need to do a whole reboot.\n\n394\n00:17:27,310 --> 00:17:28,980\nNow, there are a few\nlittle problems with this.\n\n395\n00:17:28,980 --> 00:17:31,220\nTechnically, our domain\nis renamed right now.\n\n396\n00:17:31,220 --> 00:17:32,060\nAll right?\n\n397\n00:17:32,060 --> 00:17:37,785\nBut, there's a few more things we might\nneed to do as part of our house-cleaning.\n\n398\n00:17:37,785 --> 00:17:38,541\nRight?\n\n399\n00:17:38,541 --> 00:17:43,300\nOne, we probably don't have DNS4 look\nup zones for our new name, right?\n\n400\n00:17:43,300 --> 00:17:45,290\nSo I did lab2.itpro.tv.\n\n401\n00:17:45,290 --> 00:17:49,790\nThis server is the DNS server, so\nit's probably missing some records,\n\n402\n00:17:49,790 --> 00:17:52,310\nwhich means when I reboot,\nit's probably gonna take a really long\n\n403\n00:17:52,310 --> 00:17:56,410\ntime to boot up and DNS registration\nis gonna fail and all that good stuff.\n\n404\n00:17:56,410 --> 00:18:00,030\nSo we need to double check to make sure\nthat we've got a new forward lookup zone.\n\n405\n00:18:00,030 --> 00:18:01,010\nThere it goes restarting.\n\n406\n00:18:01,010 --> 00:18:01,955\n>> Nice.\n>> That we've got a new\n\n407\n00:18:01,955 --> 00:18:04,940\nforward lookup zone for lab2.itpro.tv.\n\n408\n00:18:04,940 --> 00:18:08,530\nIn fact, it would have been a good\nidea to create that ahead of time but\n\n409\n00:18:08,530 --> 00:18:10,590\nI didn't so now we'll wait.\n\n410\n00:18:10,590 --> 00:18:11,261\n>> Lack of planning.\n\n411\n00:18:11,261 --> 00:18:14,640\n>> [LAUGH] See, in a test environment\nyou would have put this in your list.\n\n412\n00:18:14,640 --> 00:18:18,360\nSo, anyhow, we need to create that.\n\n413\n00:18:18,360 --> 00:18:20,990\nWhen this is all said and done,\nanother thing we'll need to do is go and\n\n414\n00:18:20,990 --> 00:18:23,060\ndelete the old forward lookup zone.\n\n415\n00:18:23,060 --> 00:18:24,461\nWe won't need it.\nOr you could leave it,\n\n416\n00:18:24,461 --> 00:18:28,320\njust as a safety net, but you really\ndon't need it anymore, all right.\n\n417\n00:18:28,320 --> 00:18:32,668\nThen, the next thing that we need to\ndo is, once we've got that cleaned up,\n\n418\n00:18:32,668 --> 00:18:34,340\nyour group policy objects.\n\n419\n00:18:34,340 --> 00:18:36,950\n>> Right.\n>> A lot of your GPOs will actually have\n\n420\n00:18:36,950 --> 00:18:38,920\ndomain name references in them.\n\n421\n00:18:38,920 --> 00:18:43,110\nSo, Microsoft made a utility that will\nactually go and clean those up, so\n\n422\n00:18:43,110 --> 00:18:47,970\nI'll just kind of show\nthis on my laptop here.\n\n423\n00:18:47,970 --> 00:18:54,010\nSo, what you would need to do\nis run gpfixup, is the utility.\n\n424\n00:18:54,010 --> 00:19:00,710\nSo gpfixup, then you specify /olddns,\nand what it was called.\n\n425\n00:19:00,710 --> 00:19:04,642\nSo mine was lab.itpro.tv, all right?\n\n426\n00:19:04,642 --> 00:19:11,910\nAnd then you say /newdns, and\nthen what you named it, right?\n\n427\n00:19:11,910 --> 00:19:14,850\nSo lab2.itpro.tv, all right?\n\n428\n00:19:14,850 --> 00:19:18,540\nSo that will update those DNS records.\n\n429\n00:19:18,540 --> 00:19:22,005\nThen you do the same thing, but\nfor NetBIOS, and so you say,\n\n430\n00:19:22,005 --> 00:19:26,740\n/oldnb.\n\n431\n00:19:26,740 --> 00:19:30,160\nThat's the old NetBIOS name.\n\n432\n00:19:30,160 --> 00:19:36,450\nSo my old NetBIOS name was lab, and my new\nNB, that's my new NetBIOS name, is lab2.\n\n433\n00:19:36,450 --> 00:19:39,850\nAnd that'll scan the group policies and\n\n434\n00:19:39,850 --> 00:19:42,990\nupdate any references to\nreflect the new NetBIOS name.\n\n435\n00:19:42,990 --> 00:19:45,880\nIf you don't do this you'll find that\na lot of your group policy objects\n\n436\n00:19:45,880 --> 00:19:46,900\nwill fail.\n\n437\n00:19:46,900 --> 00:19:50,820\nEspecially your default domain policy and\nthat's not a good thing.\n\n438\n00:19:50,820 --> 00:19:53,670\n>> And within your GPOs,\nlike if you do a folder redirection or\n\n439\n00:19:53,670 --> 00:19:57,710\nyou're pointing your clients to who their\nWSUS server is, or something like that,\n\n440\n00:19:57,710 --> 00:19:59,660\nit references that computer's name.\n\n441\n00:19:59,660 --> 00:20:02,340\nAnd that's gonna need to be fixed or\nit's not gonna be able to find it, right?\n\n442\n00:20:02,340 --> 00:20:04,600\nIt goes to look for\nthat File02.contoso.com,\n\n443\n00:20:04,600 --> 00:20:08,150\nand it's not there anymore cuz\nyou've renamed it contoso2.com.\n\n444\n00:20:08,150 --> 00:20:08,650\n>> Yep.\n\n445\n00:20:10,290 --> 00:20:11,580\nAll right.\nSo I'm gonna go and\n\n446\n00:20:11,580 --> 00:20:13,530\njust log back into that domain controller.\n\n447\n00:20:17,086 --> 00:20:18,290\nThere we go.\n\n448\n00:20:18,290 --> 00:20:20,450\nAll right, so it's back up.\n\n449\n00:20:20,450 --> 00:20:21,510\nThere we are.\n\n450\n00:20:21,510 --> 00:20:24,830\nAnd I'll go and fix that DNS entry.\n\n451\n00:20:24,830 --> 00:20:26,340\nSo I'll put that forward lookup zone in.\n\n452\n00:20:26,340 --> 00:20:29,840\nAnd if you're renaming multiple domains or\nwhatever, you're gonna have to go in and\n\n453\n00:20:29,840 --> 00:20:32,760\nmake multiple forward lookup zones\nto get that all squared away right,\n\n454\n00:20:32,760 --> 00:20:33,599\nthat's kind of important.\n\n455\n00:20:34,720 --> 00:20:37,100\nAll right, the gpfixup is another piece.\n\n456\n00:20:37,100 --> 00:20:42,040\nAnd then the other thing is,\nour domain controllers will often times\n\n457\n00:20:42,040 --> 00:20:44,700\nnot rename themselves to\nmatch the new domain.\n\n458\n00:20:44,700 --> 00:20:46,930\nSo we're gonna have to rename\nthe domain controller itself.\n\n459\n00:20:46,930 --> 00:20:50,010\nYour clients and your member servers\nwill pick that up automatically, but\n\n460\n00:20:50,010 --> 00:20:52,240\nyour domain controllers often times won't.\n\n461\n00:20:52,240 --> 00:20:54,660\nSo let's go through and\nkinda clean some of this stuff up.\n\n462\n00:20:54,660 --> 00:20:55,910\nHere are more four lookup zones.\n\n463\n00:20:55,910 --> 00:21:01,930\nI'll just do a new zone, which I will do\nas a primary to all DNS services, fine.\n\n464\n00:21:01,930 --> 00:21:02,740\nAnd actually notice,\n\n465\n00:21:02,740 --> 00:21:07,060\nback here, to all the main controllers\nin this domain, lab2.itpro.tv.\n\n466\n00:21:07,060 --> 00:21:12,390\nSee, so it's already picked up that new\nname, it's just missing its entries.\n\n467\n00:21:12,390 --> 00:21:15,181\nSo I'm going to put in lab2.itpro.tv.\n\n468\n00:21:15,181 --> 00:21:22,350\nAnd we'll allow secure updates,\nand it's warning me, why is that?\n\n469\n00:21:22,350 --> 00:21:25,660\nOh, just because of\nthe zone difference there.\n\n470\n00:21:25,660 --> 00:21:26,210\nOr, wait a minute.\n\n471\n00:21:26,210 --> 00:21:29,520\n>> I think it was for older 2003.\n\n472\n00:21:29,520 --> 00:21:33,210\n>> Oh the partition is, oh, the partition.\n\n473\n00:21:33,210 --> 00:21:35,710\nOh.\n>> So, my DNS partition,\n\n474\n00:21:35,710 --> 00:21:37,000\nMike, you even told me.\n\n475\n00:21:37,000 --> 00:21:37,910\n>> Yep.\n>> And I didn't do it.\n\n476\n00:21:37,910 --> 00:21:38,420\nDaggumit.\n\n477\n00:21:38,420 --> 00:21:39,683\nSo.\n>> I saw it in that file, and\n\n478\n00:21:39,683 --> 00:21:40,370\nI didn't-\n>> Yeah.\n\n479\n00:21:40,370 --> 00:21:41,530\nI made a mistake.\n\n480\n00:21:41,530 --> 00:21:47,360\nSo, in that XML file,\nyou'll remember the two DNS partitions.\n\n481\n00:21:47,360 --> 00:21:50,810\nAnd I kind of ignored them because\nthey're not part of our domain, right?\n\n482\n00:21:50,810 --> 00:21:56,280\nBut if we go in here notice\nit's forestDnsZones.lab.it.\n\n483\n00:21:56,280 --> 00:21:58,850\nI should have done lab2 right there and\n\n484\n00:21:58,850 --> 00:22:01,050\nI should have done the same\nthing down here and I didn't.\n\n485\n00:22:01,050 --> 00:22:02,620\nSo I need to fix that.\n\n486\n00:22:02,620 --> 00:22:03,160\nBut you know what?\n\n487\n00:22:03,160 --> 00:22:05,730\nI'll just do a standard primary for\nnow to get around that.\n\n488\n00:22:05,730 --> 00:22:08,910\nSo I'm not gonna do an active\ndirectory integrated zone.\n\n489\n00:22:08,910 --> 00:22:10,980\nBut you know, that's obviously not ideal.\n\n490\n00:22:10,980 --> 00:22:11,750\n>> Right.\n\n491\n00:22:11,750 --> 00:22:12,990\n>> But you know easy to fix.\n\n492\n00:22:12,990 --> 00:22:17,897\nI could just rerun the rendom command and\nfix it.\n\n493\n00:22:17,897 --> 00:22:18,850\nBut, I'm not going to.\n\n494\n00:22:18,850 --> 00:22:20,820\nSo all right so\nwe'll go ahead and store that.\n\n495\n00:22:20,820 --> 00:22:23,220\nI'll allow nonsecure updates.\n\n496\n00:22:23,220 --> 00:22:24,910\nThat'll get me around that.\n\n497\n00:22:24,910 --> 00:22:28,140\nNow, I don't have anything registered\nin there, that's not a big deal yet.\n\n498\n00:22:28,140 --> 00:22:30,330\nIn a minute,\nI'll restart the net logon service, and\n\n499\n00:22:30,330 --> 00:22:33,390\nthat'll create my MSDCS and all the other\ngood stuff that we need in there.\n\n500\n00:22:33,390 --> 00:22:35,320\n>> Yeah most of our records\nare dynamically created so\n\n501\n00:22:35,320 --> 00:22:36,620\nwe really don't have to worry about that,\nright?\n\n502\n00:22:36,620 --> 00:22:39,090\nEventually they're gonna reboot,\nthey're gonna reregister themselves.\n\n503\n00:22:39,090 --> 00:22:40,650\nSame thing with all your clients.\n\n504\n00:22:40,650 --> 00:22:42,720\nUnless you've got any static\nentries that you've made.\n\n505\n00:22:42,720 --> 00:22:45,570\nNow, if you've got any static entries,\nyou might have to go through there,\n\n506\n00:22:45,570 --> 00:22:49,590\ndo your filter on your DNS zone,\nfind what static entries are in there, and\n\n507\n00:22:49,590 --> 00:22:51,640\nthen recreate those in\nthat new zone as well.\n\n508\n00:22:53,130 --> 00:22:54,020\n>> All right.\nSo\n\n509\n00:22:54,020 --> 00:22:57,590\nnow, let's take a look\nat that gpfixup action.\n\n510\n00:22:57,590 --> 00:23:00,020\nAll right, so gpfixup.\n\n511\n00:23:00,020 --> 00:23:02,630\nIf I run that you'll see some\nof the different commands.\n\n512\n00:23:02,630 --> 00:23:04,880\nOld NB, new NB.\n\n513\n00:23:04,880 --> 00:23:08,320\nYou'll see old DNS right there,\nnew DNS, right?\n\n514\n00:23:08,320 --> 00:23:11,370\nSo we're just telling it the information\nthat we want it to update.\n\n515\n00:23:11,370 --> 00:23:18,855\nSo I'll do some gpfixup/olddns,\nwhich was lab.itpro.tv,\n\n516\n00:23:18,855 --> 00:23:23,460\nnewdns, which is lab2.itpro.tv.\n\n517\n00:23:23,460 --> 00:23:25,200\nAll right.\n\n518\n00:23:25,200 --> 00:23:25,880\nSo that's gonna run.\n\n519\n00:23:25,880 --> 00:23:29,780\nYou'll see it just scans across\nthe group policies and fixes them.\n\n520\n00:23:29,780 --> 00:23:34,645\nAnd then we'll change this to newnb, and\n\n521\n00:23:34,645 --> 00:23:38,120\noldnb for the NetBIOS names.\n\n522\n00:23:40,230 --> 00:23:43,580\nAll right, and it's possible that maybe\nyou're not changing the DNS name at all,\n\n523\n00:23:43,580 --> 00:23:46,310\nthat you're only changing\nthe NetBIOS name.\n\n524\n00:23:46,310 --> 00:23:50,900\nIn which case, you wouldn't have to\nrecreate those DNS zones and you wouldn't\n\n525\n00:23:50,900 --> 00:23:55,750\nhave to run the fix up for\nthe DNS side, just the NetBIOS side.\n\n526\n00:23:55,750 --> 00:23:56,560\nAll right.\n\n527\n00:23:56,560 --> 00:23:57,343\nSo that's done.\n\n528\n00:23:57,343 --> 00:24:00,126\nThe next thing I'm going to do is\nrename this domain controller.\n\n529\n00:24:00,126 --> 00:24:01,203\nSo, which,\nactually I don't remember its name.\n\n530\n00:24:01,203 --> 00:24:01,995\nWhat is it?\n\n531\n00:24:01,995 --> 00:24:03,784\nIt is ITProTV dash DC2.\n\n532\n00:24:03,784 --> 00:24:06,140\nI wonder what happened to DC1.\n\n533\n00:24:06,140 --> 00:24:09,411\n[LAUGH]\n>> I think Nate-\n\n534\n00:24:09,411 --> 00:24:11,150\n>> Melted it down in a show or something?\n\n535\n00:24:11,150 --> 00:24:11,858\n>> [LAUGH]\n>> All right.\n\n536\n00:24:11,858 --> 00:24:17,775\nSo we'll do netdom and then I'll\nspecify this server so itprotv-dc2.\n\n537\n00:24:17,775 --> 00:24:24,388\nAnd I'm gonna rename it\nitprotv-dc2.lab2.itpro.tv.\n\n538\n00:24:24,388 --> 00:24:25,700\nAll right?\n\n539\n00:24:25,700 --> 00:24:29,400\nSo I'll run that and\ndid I leave something out?\n\n540\n00:24:29,400 --> 00:24:32,350\n>> Did you need the FQDN on\nthe first one too or just the-\n\n541\n00:24:32,350 --> 00:24:33,038\n>> You know what?\n\n542\n00:24:33,038 --> 00:24:38,942\nActually I think I just need to\ntype the key word computer name.\n\n543\n00:24:38,942 --> 00:24:43,400\nNope, I am messing something up,\nwhat am I forgetting here.\n\n544\n00:24:43,400 --> 00:24:45,195\nNet Dom.\n\n545\n00:24:45,195 --> 00:24:47,830\n[CROSSTALK] Computer name, machine.\n\n546\n00:24:49,771 --> 00:24:51,940\nAnd then, oh slash add.\n\n547\n00:24:51,940 --> 00:24:53,220\nYeah I'm not doing the /add.\n\n548\n00:24:53,220 --> 00:24:54,120\nI'm leaving that part off.\n\n549\n00:24:54,120 --> 00:24:56,066\nOkay, let me change that here.\n\n550\n00:24:56,066 --> 00:25:00,066\nSo I'll say ne dom, computer name.\n\n551\n00:25:00,066 --> 00:25:01,025\n>> Then the old computer name.\n\n552\n00:25:01,025 --> 00:25:05,590\n>> Then the old name which is\nlab.itpro.tv, there we go.\n\n553\n00:25:05,590 --> 00:25:08,316\nAnd then I need to add\nonto that doing a /add.\n\n554\n00:25:08,316 --> 00:25:16,066\nSo I'm adding the additional name\nwhich is itprotv-dc2.lab2.itpro.tv.\n\n555\n00:25:16,066 --> 00:25:16,943\nThis is getting long.\n\n556\n00:25:16,943 --> 00:25:21,440\nAll right, so I'm adding this to the list\nof names attached to this system,\n\n557\n00:25:21,440 --> 00:25:22,370\nso there we go.\n\n558\n00:25:22,370 --> 00:25:25,100\nSo it's added as an extra address.\n\n559\n00:25:25,100 --> 00:25:28,858\nNow I need to go an extra step further and\nmake it the primary.\n\n560\n00:25:28,858 --> 00:25:35,775\nSo instead of /add, I'm gonna change\nthat to say /makeprimary, all right?\n\n561\n00:25:35,775 --> 00:25:38,895\n>> Mm-hm.\n>> So technically my system has two names\n\n562\n00:25:38,895 --> 00:25:42,645\nnow, the old name and the new name, but\nthe new name is flagged as the primary.\n\n563\n00:25:42,645 --> 00:25:46,405\nSo if anybody's trying to reach the old\nname, it'll still answer to it, and\n\n564\n00:25:46,405 --> 00:25:47,885\nthen they'll get bumped\nover to the new one,\n\n565\n00:25:47,885 --> 00:25:50,287\nso that's a nice little foot\nhold to leave in there.\n\n566\n00:25:50,287 --> 00:25:54,057\nNow I could do do a /remove and\nthat'll take away the old name, but\n\n567\n00:25:54,057 --> 00:25:56,717\nyou normally want to let this ride for a\nlittle while because you might have people\n\n568\n00:25:56,717 --> 00:25:59,477\nout of the office or\nwhatever that can benefit from that.\n\n569\n00:25:59,477 --> 00:26:01,937\nAll right, now it does require a reboot.\n\n570\n00:26:01,937 --> 00:26:04,590\nThe last thing that I need to do\n\n571\n00:26:04,590 --> 00:26:08,880\nis remove the meta data that\nthe rendom command made.\n\n572\n00:26:08,880 --> 00:26:11,190\nAnd so you do that with rendom/clean.\n\n573\n00:26:11,190 --> 00:26:15,270\nBut you don't wanna do that until\nyou've updated all your DCs.\n\n574\n00:26:15,270 --> 00:26:20,415\nWhen all the domain controllers\nare updated you run rendom/clean and\n\n575\n00:26:20,415 --> 00:26:21,915\nit'll clean up its information.\n\n576\n00:26:21,915 --> 00:26:23,045\nNow I'm in the middle of a rename.\n\n577\n00:26:23,045 --> 00:26:24,855\nSo it's still giving me an error, right?\n\n578\n00:26:24,855 --> 00:26:25,855\nSo it can't find it.\n\n579\n00:26:25,855 --> 00:26:28,925\nOh, I haven't restarted NetBIOS either.\n\n580\n00:26:28,925 --> 00:26:32,410\n>> Oh.\n>> So, or not NetBIOS, Net login.\n\n581\n00:26:32,410 --> 00:26:37,840\nSo if I go into DNS, its querying for\nrecords that aren't there yet.\n\n582\n00:26:37,840 --> 00:26:38,860\nWell, they're trickling in.\n\n583\n00:26:38,860 --> 00:26:41,220\nBut you'll see my DC isn't listed.\n\n584\n00:26:41,220 --> 00:26:42,610\nI don't have an A record for it yet.\n\n585\n00:26:42,610 --> 00:26:44,690\nIt's because I just did the rename.\n\n586\n00:26:44,690 --> 00:26:49,040\nSo, I could force it,\ndo a little IP-config slash register DNS.\n\n587\n00:26:49,040 --> 00:26:53,130\nAnd we'll give that a moment.\n\n588\n00:26:53,130 --> 00:26:56,960\nAlthough it'll probably require a reboot\nhere, so let's see if that picks up.\n\n589\n00:26:56,960 --> 00:26:59,190\nYeah, still no so I'll have to reboot.\n\n590\n00:26:59,190 --> 00:27:02,250\nBut then I'll run that rendom/clean and\nthat'll remove that metadata.\n\n591\n00:27:03,270 --> 00:27:06,110\nNow, none of those commands\nwere particularly hard, well,\n\n592\n00:27:06,110 --> 00:27:08,075\nthere was one I messed up,\nbut other than that.\n\n593\n00:27:08,075 --> 00:27:09,600\n>> [LAUGH]\n>> They weren't very hard.\n\n594\n00:27:09,600 --> 00:27:10,790\nBut, it is a lot to do.\n\n595\n00:27:10,790 --> 00:27:11,640\n>> Right.\n\n596\n00:27:11,640 --> 00:27:14,420\n>> And I don't want to downplay this,\nhere on the show,\n\n597\n00:27:14,420 --> 00:27:15,720\nI'm doing this is a lab environment.\n\n598\n00:27:15,720 --> 00:27:16,830\nIf I hose it, what do I care, right?\n\n599\n00:27:16,830 --> 00:27:18,950\n>> Right.\n>> And it's just one domain controller,\n\n600\n00:27:18,950 --> 00:27:21,890\nbut if you've got 50\ndomain controllers and\n\n601\n00:27:21,890 --> 00:27:26,045\nten different domains this\nis a major undertaking.\n\n602\n00:27:26,045 --> 00:27:28,165\nAnd it needs to be planned and scheduled.\n\n603\n00:27:28,165 --> 00:27:32,395\nAnd you need to test it out to insure\nthat there's no bumps in the road.\n\n604\n00:27:32,395 --> 00:27:36,608\nCuz little mistakes like my mistake about\nthe DNS [CROSSTALK] partitions, right?\n\n605\n00:27:36,608 --> 00:27:39,387\nYou don't want that to happen when\nyou got a massive XML file with\n\n606\n00:27:39,387 --> 00:27:43,065\na ton of systems that you're modifying,\nand now you've slowed this process down.\n\n607\n00:27:43,065 --> 00:27:44,045\nMeanwhile, you got people\n\n608\n00:27:44,045 --> 00:27:45,955\nwaiting to get back into their computers,-\n>> Right.\n\n609\n00:27:45,955 --> 00:27:46,570\n>> Right.\n\n610\n00:27:46,570 --> 00:27:49,040\n>> When you wanna keep the down\ntime as small as possible,\n\n611\n00:27:49,040 --> 00:27:51,040\nyou've gotta run through\nthis in a test environment.\n\n612\n00:27:52,300 --> 00:27:53,040\nAll right, but you know what?\n\n613\n00:27:53,040 --> 00:27:57,570\nI'll give this guy a little reboot,\nand when he comes back up,\n\n614\n00:27:57,570 --> 00:27:59,002\nhe'll have his new name.\n\n615\n00:27:59,002 --> 00:28:03,020\nHe should register with DNS and\nI should see an A record in there and\n\n616\n00:28:03,020 --> 00:28:05,380\nI'll be able to run rendom/clean and\nwe'll be back in business.\n\n617\n00:28:05,380 --> 00:28:06,260\n>> Nice.\n\n618\n00:28:06,260 --> 00:28:11,680\n>> So the moral of this story is, while\nthere are some things you can't change,\n\n619\n00:28:11,680 --> 00:28:13,520\nactive directory structure\nis not one of them.\n\n620\n00:28:13,520 --> 00:28:15,420\nYou can change it after the fact.\n\n621\n00:28:15,420 --> 00:28:16,880\nNot the easiest.\n\n622\n00:28:16,880 --> 00:28:17,870\nBut it does work.\n\n623\n00:28:17,870 --> 00:28:20,490\nAnd I know I've made the comment\nyou can't change your forest root.\n\n624\n00:28:21,630 --> 00:28:25,730\nSo if you had a single domain and then\nyour company makes the decision to go to\n\n625\n00:28:25,730 --> 00:28:30,270\ndouble, two domains, and you decide you\nwant to do an empty root at that point,\n\n626\n00:28:30,270 --> 00:28:34,070\nwhat you have to do is convert your\ncurrent domain to the be the empty root.\n\n627\n00:28:34,070 --> 00:28:36,380\nSo you end up creating two new domains,\nand\n\n628\n00:28:36,380 --> 00:28:39,004\nmoving your user accounts\nfrom one domain to another.\n\n629\n00:28:39,004 --> 00:28:40,700\n>> [CROSSTALK]\n>> You migrate your accounts.\n\n630\n00:28:40,700 --> 00:28:43,760\nAnd then that way you're basically\nemptying out your current domain so\n\n631\n00:28:43,760 --> 00:28:45,580\nthat it can become the empty root.\n\n632\n00:28:45,580 --> 00:28:48,310\nAgain, not an easy undertaking.\n\n633\n00:28:48,310 --> 00:28:52,410\nSo I know some companies where they're\ndeploying a single domain model but\n\n634\n00:28:52,410 --> 00:28:55,880\nthey go ahead and\ndo an empty root even though they have one\n\n635\n00:28:55,880 --> 00:28:59,270\njust to get that in there now so\nthey don't have to worry about it later.\n\n636\n00:28:59,270 --> 00:29:01,860\nOn a negative, you gotta maintain domain\ncontrollers for this empty root but\n\n637\n00:29:01,860 --> 00:29:04,860\non a positive side,\nthat infrastructure's already there and\n\n638\n00:29:04,860 --> 00:29:06,210\nit'll save you trouble down the road.\n\n639\n00:29:07,720 --> 00:29:11,580\nAll right, so as far as changing our DNS,\nI mean our domain structure, so\n\n640\n00:29:11,580 --> 00:29:13,140\nthat's about all I've got on that one.\n\n641\n00:29:13,140 --> 00:29:14,760\nMike, can you think of\nanything I left out?\n\n642\n00:29:14,760 --> 00:29:15,450\n>> Nope.\n\n643\n00:29:15,450 --> 00:29:16,390\nI think you got it all.\n\n644\n00:29:16,390 --> 00:29:19,560\nGetting ready to do Azure next.\n\n645\n00:29:19,560 --> 00:29:21,070\n>> Yeah, look into that.\n\n646\n00:29:21,070 --> 00:29:23,610\nLet's let that server reboot and\nmaybe we'll stop to take a break.\n\n647\n00:29:23,610 --> 00:29:25,012\n>> Okay.\n>> And when we get back,\n\n648\n00:29:25,012 --> 00:29:28,713\nwe'll finish the cleanup on that system so\nit'll be back in business and\n\n649\n00:29:28,713 --> 00:29:32,984\nthen we'll talk a little bit about Windows\nAzure, cuz that's always a good time.\n\n650\n00:29:32,984 --> 00:29:35,941\nAll right so stay tuned,\nwe'll be back in a minute.\n\n651\n00:29:35,941 --> 00:29:43,483\n[MUSIC]\n\n652\n00:29:43,483 --> 00:29:45,200\nAll right welcome back.\n\n653\n00:29:45,200 --> 00:29:47,820\nSo during the break I let\nthe server reboot and\n\n654\n00:29:47,820 --> 00:29:50,820\nI went ahead and\nfixed the DNS partition zone names.\n\n655\n00:29:51,840 --> 00:29:55,080\nTechnically I didn't have to because\nit'll just rebuild them, but\n\n656\n00:29:55,080 --> 00:29:57,610\nif you had domains that already existed,\nkind of a hassle.\n\n657\n00:29:57,610 --> 00:29:59,240\nSo I did go ahead and fix those.\n\n658\n00:29:59,240 --> 00:30:02,840\nBut now it's rebooted and\nreally all that's left is for\n\n659\n00:30:02,840 --> 00:30:05,370\nme to kind of test to make\nsure everything's working.\n\n660\n00:30:05,370 --> 00:30:06,830\nIt's a good idea to verify, right?\n\n661\n00:30:06,830 --> 00:30:07,481\n>> Yes.\n>> And\n\n662\n00:30:07,481 --> 00:30:10,608\nyou run your dcdiag after you've\nupdated your domain controllers.\n\n663\n00:30:10,608 --> 00:30:14,620\nI already know I'm sort of\nworking because when I logged in,\n\n664\n00:30:14,620 --> 00:30:17,775\nI logged in as lab2/Don\ninstead of lab/Don.\n\n665\n00:30:17,775 --> 00:30:19,340\nSo I know the netBIOS name is working.\n\n666\n00:30:21,360 --> 00:30:22,980\nSo we're pretty good there.\n\n667\n00:30:22,980 --> 00:30:25,260\nThe domain should be all squared away.\n\n668\n00:30:25,260 --> 00:30:27,680\nWe can fire up active directory users or\ncomputers.\n\n669\n00:30:27,680 --> 00:30:32,100\nOr actually, active directory domains and\ntrusts would be even better.\n\n670\n00:30:32,100 --> 00:30:32,983\nAnd go in there and look.\n\n671\n00:30:32,983 --> 00:30:35,901\nAnd I can see lab2.itpro.tv.\n\n672\n00:30:35,901 --> 00:30:39,526\nSo my rename took effect, or\nany restructuring that I might have done.\n\n673\n00:30:39,526 --> 00:30:40,207\n>> Right.\nGo in there and\n\n674\n00:30:40,207 --> 00:30:42,925\nmake sure your trust [INAUDIBLE]\nstill exists and all of that.\n\n675\n00:30:42,925 --> 00:30:43,800\n>> Mm-hm.\n\n676\n00:30:43,800 --> 00:30:48,110\nSo, last thing that I need to do\nis go in and clean up my mess.\n\n677\n00:30:48,110 --> 00:30:52,874\nAnd so I'll do a little random/cleanup and\nthat's going to remove the metadata\n\n678\n00:30:52,874 --> 00:30:57,510\nfrom the active directory and that's\nthe message you should see right there.\n\n679\n00:30:57,510 --> 00:31:01,330\nSo, we're cool there and\nif I check my DNS I\n\n680\n00:31:01,330 --> 00:31:06,240\nhad DNS records before the reboot but\nI was just missing my A record.\n\n681\n00:31:06,240 --> 00:31:09,160\nAnd if I go in here and\nlook now I should have my A record.\n\n682\n00:31:09,160 --> 00:31:12,990\nlab2.itpro.tv, there we go,\nthere's my A record.\n\n683\n00:31:12,990 --> 00:31:15,640\nSo it's healthy, happy, and renamed.\n\n684\n00:31:15,640 --> 00:31:17,420\nOr restructured.\n\n685\n00:31:17,420 --> 00:31:21,150\nBut it is a good idea to create that DNS\nstructure ahead of time, so it's there and\n\n686\n00:31:21,150 --> 00:31:22,240\nwaiting for you.\n\n687\n00:31:22,240 --> 00:31:23,733\nAnd make sure you reconnect-\n>> [LAUGH]\n\n688\n00:31:23,733 --> 00:31:26,853\n>> Rename those DNS partitions.\n\n689\n00:31:26,853 --> 00:31:27,607\nAll right.\n\n690\n00:31:27,607 --> 00:31:30,670\nSo that's a really cool tool for\nchanging your design.\n\n691\n00:31:30,670 --> 00:31:34,600\nSo always keep that in the back of your\nmind, you can change after the fact.\n\n692\n00:31:36,010 --> 00:31:41,270\nAlright, the next thing is kind of\nstaying on the side of domain trusts,\n\n693\n00:31:41,270 --> 00:31:45,060\nrenames, and\nall that is that its not uncommon today to\n\n694\n00:31:45,060 --> 00:31:48,030\nhave your domains stretch beyond\nthe boundaries of your company.\n\n695\n00:31:48,030 --> 00:31:51,610\nAnd where we see that most commonly\nis with Microsoft Windows Azure.\n\n696\n00:31:51,610 --> 00:31:52,220\nAll right?\n\n697\n00:31:52,220 --> 00:31:55,905\nWith Azure you have servers hosted\nup in Microsoft's cloud, and\n\n698\n00:31:55,905 --> 00:31:59,123\nyou probably want them to be\npart of your domain, right?\n\n699\n00:31:59,123 --> 00:32:03,608\nAnd so we talked in other, I know in the\n74 10 show I actually showed a, Nate and\n\n700\n00:32:03,608 --> 00:32:07,573\nI did it, where we could bring a domain\ncontroller up in Windows Azure and\n\n701\n00:32:07,573 --> 00:32:09,729\nJust extend our domain right in there.\n\n702\n00:32:09,729 --> 00:32:10,643\n>> Mm-hm.\n\n703\n00:32:10,643 --> 00:32:13,741\n>> But Windows Azure, when you create\na new installation environment,\n\n704\n00:32:13,741 --> 00:32:17,830\nit actually builds an active directory for\nyou, that's actually hosted by them.\n\n705\n00:32:17,830 --> 00:32:20,390\nAnd you can do a forest\ntrust with that if you want.\n\n706\n00:32:20,390 --> 00:32:21,210\n>> Right.\n>> Or you can use active\n\n707\n00:32:21,210 --> 00:32:24,590\ndirectory federation service, these are\nall sorts of ways you can connect to it.\n\n708\n00:32:24,590 --> 00:32:27,890\nBut sometimes,\nwe don't need to go all out.\n\n709\n00:32:27,890 --> 00:32:29,574\nSometimes you don't-\n>> A little overkill.\n\n710\n00:32:29,574 --> 00:32:31,429\n>> It really is.If you're a small company\n>> Mm-hm\n\n711\n00:32:31,429 --> 00:32:32,340\n>> You may not need all that.\n\n712\n00:32:32,340 --> 00:32:33,830\nRight?\n\n713\n00:32:33,830 --> 00:32:37,230\nOne of the best scenarios\nof that is Office 365.\n\n714\n00:32:37,230 --> 00:32:39,610\nMaybe your company's decided\nyou wanna go Office 365.\n\n715\n00:32:39,610 --> 00:32:41,422\nYou're not gonna need new hosted servers.\n\n716\n00:32:41,422 --> 00:32:41,935\n>> Mm-hm\n>> Right?\n\n717\n00:32:41,935 --> 00:32:42,976\nYou're not gonna put a bunch of\n\n718\n00:32:42,976 --> 00:32:43,920\nservers in Windows Azure.\n\n719\n00:32:43,920 --> 00:32:49,540\nBut you want hosted email and Word,\nExcel and all that stuff in Office 365.\n\n720\n00:32:49,540 --> 00:32:54,970\nBut you don't want your end users to have\none log in for the domain at your office.\n\n721\n00:32:54,970 --> 00:32:57,290\n>> They have enough trouble\nremember that password.\n\n722\n00:32:57,290 --> 00:33:00,280\n>> And then you combine that with\na username and password for Office 365.\n\n723\n00:33:00,280 --> 00:33:02,730\n>> Hey if you want to use Excel,\nyou've got to log in with this account.\n\n724\n00:33:02,730 --> 00:33:04,120\nAnd yeah, not gonna work.\n\n725\n00:33:04,120 --> 00:33:05,800\n>> And every time you hire a new employee,\nyou gotta go and\n\n726\n00:33:05,800 --> 00:33:07,045\ncreate an account in two places.\n\n727\n00:33:07,045 --> 00:33:07,750\n>> Mm-hm.\n>> So\n\n728\n00:33:07,750 --> 00:33:12,875\none solution is to connect your active\ndirectory to the Office 365 environment.\n\n729\n00:33:12,875 --> 00:33:13,640\n>> Mm-hm.\n>> You can do federated\n\n730\n00:33:13,640 --> 00:33:15,110\nservices and do that.\n\n731\n00:33:15,110 --> 00:33:16,422\nWell that's pretty challenging.\n\n732\n00:33:16,422 --> 00:33:18,510\n>> Right.\n>> And for a lot of organizations,\n\n733\n00:33:18,510 --> 00:33:21,720\nit's significant overkill for\nwhat they want to achieve.\n\n734\n00:33:21,720 --> 00:33:23,990\nSo instead Microsoft has utility and\n\n735\n00:33:23,990 --> 00:33:26,570\nI've got the webpage pulled up I think,\nlet's see.\n\n736\n00:33:27,680 --> 00:33:32,310\nThey have a utility that's called DirSync,\nright, or directory synchronization.\n\n737\n00:33:32,310 --> 00:33:33,450\nWhat DirSync does,\n\n738\n00:33:33,450 --> 00:33:35,626\nit's a little application you\nrun on your domain controller.\n\n739\n00:33:35,626 --> 00:33:41,110\nAnd it's synchronize it the user accounts\nyou have in your active directory\n\n740\n00:33:41,110 --> 00:33:41,950\nwith Office 365.\n\n741\n00:33:41,950 --> 00:33:45,680\nSo you're not actually connecting\nyour active directory,\n\n742\n00:33:45,680 --> 00:33:47,895\nyou're not extending your domain or\nwhatever.\n\n743\n00:33:47,895 --> 00:33:49,840\n>> Mm-hm\n>> Just every time you create an account\n\n744\n00:33:49,840 --> 00:33:53,230\nin the Active Directory,\nit links it to an account in Office 365.\n\n745\n00:33:53,230 --> 00:33:55,215\nAnd it synchronizes the password, right?\n\n746\n00:33:55,215 --> 00:33:57,560\nCuz it just hashes so\nit can do that securely.\n\n747\n00:33:57,560 --> 00:34:02,153\nSo it synchronizes that data that is\nconsiderably easier if that's what you\n\n748\n00:34:02,153 --> 00:34:07,411\nwant to achieve, because you don't even,\nyou don't have to do too much crazy stuff.\n\n749\n00:34:07,411 --> 00:34:12,189\nYou have your network, your on premises\nnetwork, you build a VPN tunnel up to\n\n750\n00:34:12,189 --> 00:34:15,953\nOffice 365, and\nthey give you the config for doing that.\n\n751\n00:34:15,953 --> 00:34:20,058\nAnd then you just run DirSync right in\nyour active directory and it taps in and\n\n752\n00:34:20,058 --> 00:34:21,286\nyou have access to it.\n\n753\n00:34:21,286 --> 00:34:23,245\nSee the site to site\nvpn that it shows here.\n\n754\n00:34:23,245 --> 00:34:23,749\n>> Mm-hm.\n>> So\n\n755\n00:34:23,749 --> 00:34:27,049\nyou're active directory\nsynchronizing to the system, and\n\n756\n00:34:27,049 --> 00:34:30,620\nhere they're running DirSync on\na virtual machine in the cloud.\n\n757\n00:34:30,620 --> 00:34:34,078\nThat's an easy way to get that where\nit's not dependent on your location.\n\n758\n00:34:34,078 --> 00:34:34,860\n>> Right.\n\n759\n00:34:34,860 --> 00:34:36,100\n>> And when it's there,\n\n760\n00:34:36,100 --> 00:34:38,620\ncreation of accounts will be\nsynchronized between the two.\n\n761\n00:34:38,620 --> 00:34:40,470\nSo really cool system.\n\n762\n00:34:40,470 --> 00:34:44,130\nMakes life a lot easier without a huge\namount of administrative overhead.\n\n763\n00:34:44,130 --> 00:34:44,800\nAll right.\n\n764\n00:34:44,800 --> 00:34:48,440\nSo on the exam when you're\nreading about network designs and\n\n765\n00:34:48,440 --> 00:34:50,870\nthey're talking about\ngoing into Windows Azure.\n\n766\n00:34:50,870 --> 00:34:52,912\nA lot of times, you're gonna need to\nput a domain controller up there.\n\n767\n00:34:52,912 --> 00:34:54,000\nRight?\n>> Mm-hm\n\n768\n00:34:54,000 --> 00:34:55,560\n>> But if they say that you're\n\n769\n00:34:55,560 --> 00:34:57,315\njust doing Office 365.\n\n770\n00:34:57,315 --> 00:35:00,100\n>> Mm-hm\n>> Then there's really not a whole lot of\n\n771\n00:35:00,100 --> 00:35:01,875\npoint in doubling up that infrastructure.\n\n772\n00:35:01,875 --> 00:35:05,200\nDirSync is the way to go.\n\n773\n00:35:05,200 --> 00:35:08,206\nAll right, and that utility is free,\nif you run it on a virtual machine in\n\n774\n00:35:08,206 --> 00:35:11,087\nthe cloud, you've gotta pay to\nhave that virtual machine running.\n\n775\n00:35:11,087 --> 00:35:11,587\nRight?\n>> Mm-hm\n\n776\n00:35:11,587 --> 00:35:12,959\n>> But it's real low utilization,\n\n777\n00:35:12,959 --> 00:35:15,780\ncuz it's just when accounts change,\nso it synchronizes them up.\n\n778\n00:35:15,780 --> 00:35:20,132\nSo, even in a massive organization,\nhow many employees are you adding per day?\n\n779\n00:35:20,132 --> 00:35:20,696\n>> Right\n>> Right\n\n780\n00:35:20,696 --> 00:35:22,622\n>> You take somebody like McDonald's.\n\n781\n00:35:22,622 --> 00:35:23,708\n>> Mm-hm\n>> McDonald's,\n\n782\n00:35:23,708 --> 00:35:25,374\nthey probably add an employee,\n\n783\n00:35:25,374 --> 00:35:28,287\nthey probably add a couple\nthousand employees per day.\n\n784\n00:35:28,287 --> 00:35:28,990\n>> All right\n>> But\n\n785\n00:35:28,990 --> 00:35:33,903\nwhen you're talking about the text records\nof employees that they add, and remove.\n\n786\n00:35:33,903 --> 00:35:35,748\nIt's not a huge amount of data.\n\n787\n00:35:35,748 --> 00:35:38,000\nSo it's not a very intensive thing.\n\n788\n00:35:38,000 --> 00:35:40,352\nI don't know if McDonald's\nuses Office 365.\n\n789\n00:35:40,352 --> 00:35:42,120\n>> [LAUGH]\n>> Probably not so.\n\n790\n00:35:42,120 --> 00:35:44,040\nOr at least not for\nthe person at the drive through window.\n\n791\n00:35:44,040 --> 00:35:45,750\n>> Yeah, not for\nall their employees, right?\n\n792\n00:35:47,120 --> 00:35:49,824\n>> All right so that's DirSync,\nand that's basically that.\n\n793\n00:35:49,824 --> 00:35:50,969\n>> Mm-hm\n>> All right, so\n\n794\n00:35:50,969 --> 00:35:55,480\nthat's enough about talking\nabout the domain enforced side.\n\n795\n00:35:55,480 --> 00:35:57,014\nNow, let's dig deeper.\n\n796\n00:35:57,014 --> 00:35:58,606\n>> Mm-hm\n>> And\n\n797\n00:35:58,606 --> 00:36:03,530\nwhat we're gonna look at\nnext is going to be our\n\n798\n00:36:03,530 --> 00:36:09,030\ngroup policy and organizational unity\nstructure inside of the directory.\n\n799\n00:36:09,030 --> 00:36:13,370\nSo they really go hand in hand, and\nwe usually design one around the other.\n\n800\n00:36:13,370 --> 00:36:14,680\nSo when we're planning for\n\n801\n00:36:14,680 --> 00:36:17,430\nour organizational units,\nwe're normally planning for\n\n802\n00:36:17,430 --> 00:36:21,620\nour group policies at the same time and\ndesigning the two to work together.\n\n803\n00:36:21,620 --> 00:36:23,023\nNot everybody's done that, though.\n\n804\n00:36:23,023 --> 00:36:24,870\n>> [LAUGH]\n>> And so you might have a poorly designed\n\n805\n00:36:24,870 --> 00:36:26,040\nactive directory.\n\n806\n00:36:26,040 --> 00:36:27,410\nThese are easy to fix.\n\n807\n00:36:27,410 --> 00:36:27,940\n>> They really are.\n\n808\n00:36:27,940 --> 00:36:30,493\n>> Drag and\ndrop,then your problem solved, right?\n\n809\n00:36:30,493 --> 00:36:34,020\n>> Mm-hm\n>> So let's take a look at some of that.\n\n810\n00:36:34,020 --> 00:36:37,531\nI wanna start with just the basic\norganizational unit structure you can\n\n811\n00:36:37,531 --> 00:36:39,884\nexpect when you Install\nthe active directory.\n\n812\n00:36:39,884 --> 00:36:40,410\n>> All right?\n\n813\n00:36:40,410 --> 00:36:41,085\n>> Mm-hm.\n\n814\n00:36:41,085 --> 00:36:44,255\n>> Which is this guy right here,\nwhen you install a fresh and\n\n815\n00:36:44,255 --> 00:36:47,025\nclean active directory,\nthis is what you get.\n\n816\n00:36:47,025 --> 00:36:49,275\nYou get your domain, all right?\n\n817\n00:36:49,275 --> 00:36:55,295\nAnd your domain,\nthere we go, inside of it,\n\n818\n00:36:55,295 --> 00:37:00,015\nwe'll have a couple of folders and\na couple of policies created by default.\n\n819\n00:37:00,015 --> 00:37:01,050\n>> Right.\n>> All right?\n\n820\n00:37:01,050 --> 00:37:04,140\nAt the domain level there's\nyour default domain policy.\n\n821\n00:37:04,140 --> 00:37:04,960\nAll right.\n\n822\n00:37:04,960 --> 00:37:08,620\nAnd then inside of there\nyou'll see a series of folders\n\n823\n00:37:08,620 --> 00:37:11,000\nthat are all containing various things.\n\n824\n00:37:11,000 --> 00:37:11,760\n>> Mm-hm\n>> But there's two\n\n825\n00:37:11,760 --> 00:37:12,840\ndifferent types of folders.\n\n826\n00:37:12,840 --> 00:37:15,760\nThere are folders that look like this.\n\n827\n00:37:15,760 --> 00:37:18,650\n>> Plain old yellow folders\nwith no icon on them.\n\n828\n00:37:18,650 --> 00:37:19,910\n>> And folders that look like this.\n\n829\n00:37:21,210 --> 00:37:24,045\nWhich have a little,\nphone book I think it's supposed to be?\n\n830\n00:37:24,045 --> 00:37:27,620\n[CROSSTALK] Actually, it looks more\nlike a phone book in the actual program.\n\n831\n00:37:27,620 --> 00:37:28,152\n>> Yeah.\n\n832\n00:37:28,152 --> 00:37:30,040\n>> But the difference here is that.\n\n833\n00:37:30,040 --> 00:37:31,630\nThe ones that are just folders?\n\n834\n00:37:31,630 --> 00:37:33,155\nThose are what are called Containers.\n\n835\n00:37:33,155 --> 00:37:33,730\n>> Mm-hm.\n>> And\n\n836\n00:37:33,730 --> 00:37:37,620\na container cannot have a group\npolicy object applied to it.\n\n837\n00:37:37,620 --> 00:37:39,755\n>> Right.\n>> It can contain things, but that's it.\n\n838\n00:37:39,755 --> 00:37:40,860\n>> Mm-hm.\n\n839\n00:37:40,860 --> 00:37:43,850\n>> Versus an organizational unit,\nlike this one.\n\n840\n00:37:43,850 --> 00:37:47,570\nAn organizational unit\ncan contain things and\n\n841\n00:37:47,570 --> 00:37:49,580\nit can have group policy\nobjects applied to it.\n\n842\n00:37:49,580 --> 00:37:51,290\nSo it's a little bit different.\n\n843\n00:37:51,290 --> 00:37:52,220\nWhy is my yellow?\n\n844\n00:37:52,220 --> 00:37:54,670\n>> I was gonna say they\nlook really good as you.\n\n845\n00:37:54,670 --> 00:37:56,300\nScroll [LAUGH]\n>> Well any how.\n\n846\n00:37:56,300 --> 00:37:59,128\nThe color doesn't matter.\n\n847\n00:37:59,128 --> 00:38:01,840\nSo [LAUGH] you'll see when you created\nit's kind of interesting because\n\n848\n00:38:01,840 --> 00:38:03,545\nthe domain's controllers folder.\n\n849\n00:38:03,545 --> 00:38:04,660\n>> Mm-hm\n>> That\n\n850\n00:38:04,660 --> 00:38:05,420\nis an OU\n>> Right\n\n851\n00:38:05,420 --> 00:38:07,820\n>> And it's an OU because they want\n\n852\n00:38:07,820 --> 00:38:11,350\nthe default domain controller\npolicy to apply there all right.\n\n853\n00:38:11,350 --> 00:38:14,588\nBut you'll see things like the Users and\nComputers folders those are containers.\n\n854\n00:38:14,588 --> 00:38:15,264\nRight?\n>> Right\n\n855\n00:38:15,264 --> 00:38:16,490\n>> And the reason they do\n\n856\n00:38:16,490 --> 00:38:20,420\nthat actually stems a way\nback to the NT4 days.\n\n857\n00:38:20,420 --> 00:38:22,920\nIn the NT4 days you didn't have OUs.\n\n858\n00:38:22,920 --> 00:38:27,160\nAll you had were containers, and you just\nhad a User, and a Computer container.\n\n859\n00:38:27,160 --> 00:38:30,820\nSo those are there for\nbackwards compatibility with NT4.\n\n860\n00:38:30,820 --> 00:38:31,805\nWho's running NT4 anymore?\n\n861\n00:38:31,805 --> 00:38:33,530\n>> [LAUGH]\n>> Nobody.\n\n862\n00:38:33,530 --> 00:38:37,330\nSo almost everybody,\nwhen you create a new active directory,\n\n863\n00:38:37,330 --> 00:38:40,970\nyou're gonna create new places for\nyour computers and users to go.\n\n864\n00:38:40,970 --> 00:38:43,510\nAnd you're basically gonna\nabandon these folders altogether.\n\n865\n00:38:43,510 --> 00:38:46,260\n>> I like using that\nbuilt-in users container.\n\n866\n00:38:46,260 --> 00:38:48,780\nThere's a lot of built in\ngroups that start out in there.\n\n867\n00:38:48,780 --> 00:38:50,439\nAnd I dump a lot of my groups in there.\n\n868\n00:38:50,439 --> 00:38:52,310\n>> Mm-hm\n>> Because we don't need our group policy.\n\n869\n00:38:52,310 --> 00:38:53,530\nIt doesn't really apply to groups.\n\n870\n00:38:53,530 --> 00:38:55,350\nSo, It's there for some things.\n\n871\n00:38:55,350 --> 00:38:58,350\nBut yeah as Don said,\nyou can attach group policy to them.\n\n872\n00:38:58,350 --> 00:39:00,960\nYou can't create nested OUs inside them.\n\n873\n00:39:00,960 --> 00:39:04,655\nAnd you can't delegate control over\nthem either which is really problematic.\n\n874\n00:39:04,655 --> 00:39:05,700\nCuz normally we want to.\n\n875\n00:39:05,700 --> 00:39:09,175\nAnd we're gonna talk about good design,\nand we wanna make these nested OUs.\n\n876\n00:39:09,175 --> 00:39:11,230\nSo we can start breaking things down.\n\n877\n00:39:11,230 --> 00:39:14,110\nAnd it's all about being able\nto apply group policy and\n\n878\n00:39:14,110 --> 00:39:15,710\ndelegate administrative control.\n\n879\n00:39:15,710 --> 00:39:18,590\nNeither of which I can do\nthose built in containers so.\n\n880\n00:39:18,590 --> 00:39:21,690\n>> Yeah, so what you see right here,\n\n881\n00:39:21,690 --> 00:39:24,765\nthis is pretty much what you're\ngoing to see when you do an install.\n\n882\n00:39:24,765 --> 00:39:25,330\n[CROSSTALK]\n>> Yep.\n\n883\n00:39:25,330 --> 00:39:27,900\n>> Yep, so\nit creates the user's computers, it\n\n884\n00:39:27,900 --> 00:39:32,840\ncreates the domain controllers, it creates\nthese two policies for us, and that's it.\n\n885\n00:39:32,840 --> 00:39:34,670\nAnd then we come behind it.\n\n886\n00:39:34,670 --> 00:39:36,490\nAnd start to create our own policies.\n\n887\n00:39:36,490 --> 00:39:40,000\nAnd you'll see down here where I've\ngot these other organizational units,\n\n888\n00:39:40,000 --> 00:39:44,480\nthese are, we just create these and\ndefine them as needed and there they are.\n\n889\n00:39:44,480 --> 00:39:45,510\nTerribly exciting.\n\n890\n00:39:45,510 --> 00:39:46,870\nSo [LAUGH]\n>> [LAUGH]\n\n891\n00:39:46,870 --> 00:39:48,360\n>> What should we do?\n\n892\n00:39:48,360 --> 00:39:52,110\nHow do we determine what structure we want\nto create for these organizational units?\n\n893\n00:39:52,110 --> 00:39:54,032\nThere's a lot of decisions to make here.\n\n894\n00:39:54,032 --> 00:39:54,550\n>> Mm-hm\n>> Right.\n\n895\n00:39:54,550 --> 00:39:57,920\nSo, at a minimum,\nwe don't really have to do anything.\n\n896\n00:39:57,920 --> 00:40:00,493\nWe could just delete these two guys out of\nhere, and just run with what they gave us.\n\n897\n00:40:00,493 --> 00:40:03,322\nPut our users up here, our computers here,\n\n898\n00:40:03,322 --> 00:40:07,156\nand have a global default policy,\nand that's it, right?\n\n899\n00:40:07,156 --> 00:40:10,536\nBut the larger your organization,\nthe more complex it gets,\n\n900\n00:40:10,536 --> 00:40:12,622\nthe more complex this is going to get.\n\n901\n00:40:12,622 --> 00:40:15,553\nSo what we have to think about\nwhen you go to create or use,\n\n902\n00:40:15,553 --> 00:40:20,380\nis not how your company is arranged, cuz\nthat often times doesn't matter, right?\n\n903\n00:40:20,380 --> 00:40:25,820\nWhat it comes down to is, what policies\nare you going to be applying, all right?\n\n904\n00:40:25,820 --> 00:40:27,460\nLet's create a scenario.\n\n905\n00:40:27,460 --> 00:40:28,000\n>> Okay.\n\n906\n00:40:28,000 --> 00:40:32,490\n>> Let's say, well,\nI made a joke about McDonald's, right?\n\n907\n00:40:32,490 --> 00:40:33,210\n>> Right.\nLet's go with it.\n\n908\n00:40:33,210 --> 00:40:34,460\n>> Let's say you work for McDonald's.\n\n909\n00:40:34,460 --> 00:40:35,090\nRight?\n\n910\n00:40:35,090 --> 00:40:39,710\nAnd they have fast food restaurants in\nevery city across the United States and\n\n911\n00:40:39,710 --> 00:40:40,910\nmany other countries too\n>> Right\n\n912\n00:40:40,910 --> 00:40:41,760\n>> But here in the US,\n\n913\n00:40:41,760 --> 00:40:43,495\nyou can't throw a rock\nwithout hitting a McDonald's.\n\n914\n00:40:43,495 --> 00:40:49,830\n[LAUGH] Now, for each of those stores,\nthey might have different policies.\n\n915\n00:40:49,830 --> 00:40:54,130\nFor example, when the employees\nof the store save a document,\n\n916\n00:40:54,130 --> 00:40:58,090\nthey might want them to save it to\na network share in a particular location.\n\n917\n00:40:58,090 --> 00:41:03,250\nSo they might have a logon script or\na group policy preference,\n\n918\n00:41:03,250 --> 00:41:06,490\nwhere every time they boot up, it maps\ntheir F drive to a particular location.\n\n919\n00:41:07,720 --> 00:41:11,910\nEach store might have a different\nlocation, they map that drive to.\n\n920\n00:41:11,910 --> 00:41:16,100\nSo I might want to have a different\npolicy for each store that lets them map\n\n921\n00:41:16,100 --> 00:41:20,300\ntheir home directory or\nwhatever to a different location.\n\n922\n00:41:20,300 --> 00:41:22,960\nSo if I want a different\npolicy to apply to each store,\n\n923\n00:41:22,960 --> 00:41:26,918\nI really need to create a separate OU for\neach store.\n\n924\n00:41:26,918 --> 00:41:30,230\n>> Right, yeah there's a lot more,\nI mean you could technically,\n\n925\n00:41:30,230 --> 00:41:31,930\nI suppose dump them all in one.\n\n926\n00:41:31,930 --> 00:41:34,760\nAnd then, go through and\ndo security filtering on your GPOs and\n\n927\n00:41:34,760 --> 00:41:35,380\nthings like that.\n\n928\n00:41:35,380 --> 00:41:38,620\nBut that's a lot more administrative\neffort, cuz there's gonna be other things\n\n929\n00:41:38,620 --> 00:41:40,570\nthat you're gonna want to do\nprobably by store as well.\n\n930\n00:41:40,570 --> 00:41:44,140\nMaybe you want to give the administrator\ncontrol over the computer objects for\n\n931\n00:41:44,140 --> 00:41:46,610\nhis store, but not other stores?\n\n932\n00:41:46,610 --> 00:41:49,180\nAll right, and so\nif they're all in the same OU.\n\n933\n00:41:49,180 --> 00:41:50,680\nMuch more difficult to try and\nbreak that out.\n\n934\n00:41:50,680 --> 00:41:55,130\nWhereas, if stores computer accounts are\nin its own OU, they can run my delegation\n\n935\n00:41:55,130 --> 00:41:59,880\nwizard, and give informations\nover just those computers.\n\n936\n00:41:59,880 --> 00:42:03,600\n>> Now, what if I want to apply\na policy to all of the stores?\n\n937\n00:42:03,600 --> 00:42:06,920\nSo I decide when somebody logs in on\na computer throughout any of my stores,\n\n938\n00:42:06,920 --> 00:42:10,140\nI want a message to pop up on the screen\nletting them know that this is a corporate\n\n939\n00:42:10,140 --> 00:42:12,120\ncontrolled machine, all right?\n\n940\n00:42:12,120 --> 00:42:14,340\nAnd I want that to apply\nto all the stores.\n\n941\n00:42:14,340 --> 00:42:17,760\nWell, if I create a separate OU for\neach store.\n\n942\n00:42:17,760 --> 00:42:21,110\nI don't want to put that GPO on each and\neveryone of those OUs.\n\n943\n00:42:21,110 --> 00:42:24,650\nI could, I mean we could link it and\nlink it all over the place if we wanted.\n\n944\n00:42:24,650 --> 00:42:26,090\nBut what would be better is,\n\n945\n00:42:26,090 --> 00:42:31,040\nif I add all of those store OUs\ninside of one big OU, right?\n\n946\n00:42:31,040 --> 00:42:35,570\nSo I might create one\nmaster OU called stores.\n\n947\n00:42:36,590 --> 00:42:41,109\nAnd underneath it,\nI might start creating additional OUs\n\n948\n00:42:42,390 --> 00:42:45,520\nto represent each store underneath.\n\n949\n00:42:45,520 --> 00:42:47,650\nRight?\nEach one that's out there and about.\n\n950\n00:42:49,060 --> 00:42:51,440\n>> So now, if you've got a policy\nthat applies to all stores,\n\n951\n00:42:51,440 --> 00:42:52,940\nyou got one place to link it.\n\n952\n00:42:52,940 --> 00:42:54,660\nIt inherits down everything inside there.\n\n953\n00:42:54,660 --> 00:42:55,480\nAnd you're done.\n\n954\n00:42:55,480 --> 00:42:58,360\nIf you've got a policy that only\napplies to a particular store,\n\n955\n00:42:58,360 --> 00:43:01,330\nyou've got an OU that contains\njust that store's computers.\n\n956\n00:43:01,330 --> 00:43:04,500\nAnd you don't have to worry about trying\nto filter it, doing security filtering, or\n\n957\n00:43:04,500 --> 00:43:07,670\nanything like that, but makes it much,\nmuch easier to work with.\n\n958\n00:43:07,670 --> 00:43:09,600\nAnd this is where\nplanning comes into play.\n\n959\n00:43:09,600 --> 00:43:12,120\nYou know, how do you apply your policies?\n\n960\n00:43:12,120 --> 00:43:17,300\nAgain, a lot of companies that will first\ndivide their computers up by location, and\n\n961\n00:43:17,300 --> 00:43:19,760\nthen maybe by desktop or laptop.\n\n962\n00:43:19,760 --> 00:43:24,310\nOther companies might find it\neasier to go desktop, laptop first.\n\n963\n00:43:24,310 --> 00:43:27,580\nAnd then within desktops,\nthe different geographical locations.\n\n964\n00:43:27,580 --> 00:43:31,240\nIt really depends on how you plan\non applying your policies and\n\n965\n00:43:31,240 --> 00:43:33,520\ndelegating that administrative control.\n\n966\n00:43:33,520 --> 00:43:39,700\n>> Yeah, and maybe you have a need to do\nthings on a variation based on geography.\n\n967\n00:43:39,700 --> 00:43:45,100\nSo maybe stores in Florida have\ncertain laws that make the message\n\n968\n00:43:45,100 --> 00:43:49,480\nthat I want to pop up be a little bit\ndifferent than stores in New York or\n\n969\n00:43:49,480 --> 00:43:51,360\nWashington, or wherever.\n\n970\n00:43:51,360 --> 00:43:54,240\nSo I might choose to break\nmy stores up by state.\n\n971\n00:43:54,240 --> 00:43:56,070\nSo I might wanna add an extra layer.\n\n972\n00:43:56,070 --> 00:43:58,570\nWell, let's say that you just got hired.\n\n973\n00:43:58,570 --> 00:44:00,830\nAnd you go in here and\nthere's the store's OU.\n\n974\n00:44:00,830 --> 00:44:03,210\nAnd then there's 2000 stores,\nand McDonald's,\n\n975\n00:44:03,210 --> 00:44:06,960\nthey gotta have a ton more than that,\nbut let's say there's 2000 stores here.\n\n976\n00:44:06,960 --> 00:44:09,880\nAnd you're like, oh crap,\nI need to divide this up by state.\n\n977\n00:44:09,880 --> 00:44:11,250\nThis is gonna be a nightmare.\n\n978\n00:44:11,250 --> 00:44:16,530\nWell it really isn't, because you can\ncome in and create these state OUs.\n\n979\n00:44:16,530 --> 00:44:20,360\nAnd then, just drag and drop these OUs\nto put them in the other location.\n\n980\n00:44:20,360 --> 00:44:22,890\nNow that assumes that,\nwe don't have the copy protection.\n\n981\n00:44:22,890 --> 00:44:25,960\n>> Right, and we have to worry about\nthe way our group policies are laying.\n\n982\n00:44:25,960 --> 00:44:27,663\nSo there's a couple of\nthings we've got to look at.\n\n983\n00:44:27,663 --> 00:44:29,500\nBut yeah, really easy to go in there and\nchange things.\n\n984\n00:44:29,500 --> 00:44:30,450\nSo you're not stuck.\n\n985\n00:44:30,450 --> 00:44:31,710\nI always tell people.\n\n986\n00:44:31,710 --> 00:44:34,530\nAnd there's no right way or\nwrong way, per se.\n\n987\n00:44:34,530 --> 00:44:38,000\nThere's better ways and worse ways to\ndo it, but you're not stuck with it.\n\n988\n00:44:38,000 --> 00:44:41,040\nYou can always go back in there and\nmake changes.\n\n989\n00:44:41,040 --> 00:44:42,600\nSo it's very easy to work with.\n\n990\n00:44:42,600 --> 00:44:44,350\nIt's pretty darn cool.\n\n991\n00:44:44,350 --> 00:44:49,130\n>> So what I can do is,\nI can just like copy these stores here.\n\n992\n00:44:50,530 --> 00:44:53,650\nAnd so\nwhat I'll do is I'll take these, and\n\n993\n00:44:53,650 --> 00:44:59,130\nI'm just gonna change that to be\na Florida and a Georgia, right.\n\n994\n00:44:59,130 --> 00:45:01,370\nSo each of these guys that are out here.\n\n995\n00:45:01,370 --> 00:45:04,660\nAnd then, we can bring them over here.\n\n996\n00:45:06,280 --> 00:45:08,820\nAnd let's just get that linked.\n\n997\n00:45:08,820 --> 00:45:11,285\nThere we go,\noh that didn't quite work out did it?\n\n998\n00:45:11,285 --> 00:45:14,160\n[LAUGH] But we can go in here and\nchange these guys so they're linked up.\n\n999\n00:45:14,160 --> 00:45:15,150\nThere we go.\n\n1000\n00:45:15,150 --> 00:45:18,120\nSo now, I've got where I'm\nbreaking it up by state.\n\n1001\n00:45:18,120 --> 00:45:19,740\nI would have all my Florida stores here.\n\n1002\n00:45:19,740 --> 00:45:24,000\nAnd I would be able to apply policies\nthat just effected the stores in Florida.\n\n1003\n00:45:24,000 --> 00:45:27,030\nOr I could apply a policy that\njust effected store number 101.\n\n1004\n00:45:27,030 --> 00:45:32,430\nOr I could apply policies that\neffect all of my stores as a whole.\n\n1005\n00:45:32,430 --> 00:45:34,720\n>> Right.\n>> Now, I've got enough functionality.\n\n1006\n00:45:34,720 --> 00:45:36,150\nSo what am I dividing up?\n\n1007\n00:45:36,150 --> 00:45:37,890\nWhat's determining the structure?\n\n1008\n00:45:37,890 --> 00:45:38,955\nWell, it's a mixture.\n\n1009\n00:45:38,955 --> 00:45:39,470\n>> Mm-hm.\n\n1010\n00:45:39,470 --> 00:45:41,835\n>> I'm mixing business divisions.\n\n1011\n00:45:41,835 --> 00:45:44,450\n>> Mm-hm.\n>> With geographic divisions.\n\n1012\n00:45:44,450 --> 00:45:46,530\n>> Right.\n>> And notice the order that I did it in.\n\n1013\n00:45:46,530 --> 00:45:49,289\nI did geography first and\nthen business division.\n\n1014\n00:45:50,580 --> 00:45:52,910\nYou may have a situation where\nthat needs to be reversed.\n\n1015\n00:45:52,910 --> 00:45:53,780\n>> Right.\n>> Okay.\n\n1016\n00:45:53,780 --> 00:45:59,860\nMaybe you're like the Salvation Army,\nright?\n\n1017\n00:45:59,860 --> 00:46:03,210\nThe Salvation Army,\nthey have their charity organizations,\n\n1018\n00:46:03,210 --> 00:46:05,200\nwhich are spread all across the country.\n\n1019\n00:46:05,200 --> 00:46:07,820\nAnd then, they've got their\nthrift shop organizations,\n\n1020\n00:46:07,820 --> 00:46:09,320\nwhich are spread across the country.\n\n1021\n00:46:09,320 --> 00:46:14,330\nAnd so they might do a division\nbased on thrift shop versus charity.\n\n1022\n00:46:14,330 --> 00:46:17,370\nAnd then under that,\nbreak down into individual stores or\n\n1023\n00:46:17,370 --> 00:46:18,760\neven from there break down to states.\n\n1024\n00:46:18,760 --> 00:46:23,190\nSo you might have multiple depending\non the needs of your organization.\n\n1025\n00:46:23,190 --> 00:46:26,720\nBut it's not necessarily going to match\n\n1026\n00:46:26,720 --> 00:46:28,820\nwhat you would consider\nas your organization.\n\n1027\n00:46:28,820 --> 00:46:32,470\nIt's all built around\nthe policies you want to apply.\n\n1028\n00:46:32,470 --> 00:46:34,580\nBecause end users,\nthey never see this structure.\n\n1029\n00:46:34,580 --> 00:46:35,820\nThey don't even know it's there.\n\n1030\n00:46:35,820 --> 00:46:37,880\nThey don't care about this, right?\n\n1031\n00:46:37,880 --> 00:46:40,200\nSo it's all about you\nas the administrator.\n\n1032\n00:46:40,200 --> 00:46:41,540\nAnd the policies you want to apply.\n\n1033\n00:46:41,540 --> 00:46:44,168\nHow you think you're going to divide\nthe network up to handle that.\n\n1034\n00:46:44,168 --> 00:46:45,430\nAll right?\n\n1035\n00:46:45,430 --> 00:46:47,540\nSo this is one way.\n\n1036\n00:46:47,540 --> 00:46:48,921\nAnd this works out pretty well,\n\n1037\n00:46:48,921 --> 00:46:51,545\nalthough what if I have\nsomething that's not a store?\n\n1038\n00:46:51,545 --> 00:46:53,045\n>> Where does that fit in?\n\n1039\n00:46:53,045 --> 00:46:54,925\n>> What about their headquarters?\n\n1040\n00:46:54,925 --> 00:46:58,905\nTheir home offices, I have no idea\nwhere McDonald's is based out of, but\n\n1041\n00:46:58,905 --> 00:47:01,285\nI gotta imagine,\nthey have a big headquarters, and\n\n1042\n00:47:01,285 --> 00:47:03,505\nsome regional headquarters or\nsomething like that.\n\n1043\n00:47:03,505 --> 00:47:07,595\nSo those aren't stores.\n\n1044\n00:47:07,595 --> 00:47:11,720\nAnd if I put them in here and I start\napplying policies up here at the store\n\n1045\n00:47:11,720 --> 00:47:13,120\nlevel, it's going to\napply to headquarters.\n\n1046\n00:47:13,120 --> 00:47:14,120\nI might not want that.\n\n1047\n00:47:14,120 --> 00:47:15,070\n>> Right.\n>> So now,\n\n1048\n00:47:15,070 --> 00:47:17,920\nmy company starts to get\na little bit bigger, right?\n\n1049\n00:47:17,920 --> 00:47:18,770\nA little bit weirder.\n\n1050\n00:47:18,770 --> 00:47:23,580\n[LAUGH] So I may need to divide\nthis even further and take,\n\n1051\n00:47:23,580 --> 00:47:28,878\nlike this one up here and actually,\nmake a home office unit, right?\n\n1052\n00:47:28,878 --> 00:47:29,550\n>> Mm-hm.\n\n1053\n00:47:29,550 --> 00:47:34,575\n>> Or maybe these are something different,\nlike my corporate offices.\n\n1054\n00:47:34,575 --> 00:47:36,300\n>> Mm-hm.\n\n1055\n00:47:36,300 --> 00:47:36,920\n>> Right?\n\n1056\n00:47:36,920 --> 00:47:41,970\nAnd that way, underneath it, I can have\nmy headquarter and my regional offices.\n\n1057\n00:47:41,970 --> 00:47:42,470\n>> Right.\n>> Right?\n\n1058\n00:47:42,470 --> 00:47:44,180\nAnd start branching that out based on\n\n1059\n00:47:44,180 --> 00:47:47,155\nhow I might wan to apply a policy.\nAll right.\n\n1060\n00:47:47,155 --> 00:47:49,285\nNow I did leave one thing out which is,\n\n1061\n00:47:49,285 --> 00:47:53,055\nwhat if I want to push a group policy\nobject that applies to all of this?\n\n1062\n00:47:54,395 --> 00:47:56,745\nWell, I can always go up here\nto the domain level, right?\n\n1063\n00:47:56,745 --> 00:47:57,445\n>> Right?\n\n1064\n00:47:57,445 --> 00:47:59,475\n>> Pick one up here,\nmodify the default domain policy.\n\n1065\n00:47:59,475 --> 00:48:03,165\nThat will apply to all of it, but\nthere's a big problem with that.\n\n1066\n00:48:03,165 --> 00:48:04,695\nThe default domain policy, and\n\n1067\n00:48:04,695 --> 00:48:08,810\nany policy you put at the domain level,\nwhere else does it apply?\n\n1068\n00:48:08,810 --> 00:48:10,219\nUsers, computers.\n\n1069\n00:48:10,219 --> 00:48:13,612\n>> Oh your domain controllers,\nyour member servers and things like that.\n\n1070\n00:48:13,612 --> 00:48:15,075\nAnd these might be settings\nthat you don't want.\n\n1071\n00:48:15,075 --> 00:48:17,817\nSo you're thinking yeah,\nI want to affect every computer.\n\n1072\n00:48:17,817 --> 00:48:20,235\nDo you really mean every computer?\n\n1073\n00:48:20,235 --> 00:48:23,480\n>> A lot of times, you don't, right?\n\n1074\n00:48:23,480 --> 00:48:25,030\n>> Nope.\n>> So it's gonna basically\n\n1075\n00:48:25,030 --> 00:48:28,230\nwreak some havoc that you probably\ndon't want to get involved in.\n\n1076\n00:48:28,230 --> 00:48:33,340\nSo instead, what you might wanna do is\nbreak things up a little bit more, right?\n\n1077\n00:48:33,340 --> 00:48:39,123\nSo let me take these guys and copy them.\n\n1078\n00:48:39,123 --> 00:48:44,650\nAnd then what I'm going to do is\njust delete these guys out of here.\n\n1079\n00:48:44,650 --> 00:48:48,460\nTake that out, too.\n\n1080\n00:48:48,460 --> 00:48:49,600\nI'm going to rename this.\n\n1081\n00:48:49,600 --> 00:48:53,030\nI'm just going to call this corporate.\n\n1082\n00:48:54,100 --> 00:48:59,350\nThis is my entire company right here\nin this OU as far as I'm concerned.\n\n1083\n00:48:59,350 --> 00:49:03,290\nThen I can bring these guys-\ncorporate office and stores and\n\n1084\n00:49:03,290 --> 00:49:06,240\nnest them underneath it, okay?\n\n1085\n00:49:06,240 --> 00:49:11,190\nBy doing this, now I can start to build\na structure that allows the application of\n\n1086\n00:49:11,190 --> 00:49:17,990\nGPO's to my company, but\nnot affecting my domain controllers,\n\n1087\n00:49:17,990 --> 00:49:22,220\nand other servers, service accounts,\nand things of that nature.\n\n1088\n00:49:22,220 --> 00:49:24,380\nSo I've got this overall entity,\n\n1089\n00:49:24,380 --> 00:49:28,590\nit may seem like a waste because I've got\na domain that's my corporate domain but\n\n1090\n00:49:28,590 --> 00:49:31,710\nit's going to affect those other\nsystems and I probably don't want that.\n\n1091\n00:49:31,710 --> 00:49:32,520\n>> Right.\n\n1092\n00:49:32,520 --> 00:49:35,970\n>> All right so this is a great\nway to be able to handle this.\n\n1093\n00:49:35,970 --> 00:49:38,880\nOne problem your going to have though is\nas you add new computers to the domain\n\n1094\n00:49:38,880 --> 00:49:39,824\nwhere do they go by default.\n\n1095\n00:49:39,824 --> 00:49:42,032\n>> Into the computer's container.\n\n1096\n00:49:42,032 --> 00:49:46,300\nYou know again, as Don was kind of saying\nleft over from the NT days and now\n\n1097\n00:49:46,300 --> 00:49:50,390\nthe problem becomes, wait all my policies\nthat I need to apply to those machines,\n\n1098\n00:49:50,390 --> 00:49:55,010\nwe whip out 10, 20 new clients,\nthey're not getting those settings.\n\n1099\n00:49:55,010 --> 00:49:59,100\nSo now we have to go in and move those\ncomputers into the appropriate view.\n\n1100\n00:49:59,100 --> 00:50:01,220\nThere's a couple of cool\ncommands we can use.\n\n1101\n00:50:01,220 --> 00:50:04,785\nThere's redir CMP or\nredirect computers and\n\n1102\n00:50:04,785 --> 00:50:09,120\nthere's a redir user which will change\nthe default location of where they go.\n\n1103\n00:50:09,120 --> 00:50:11,470\nBut you can only have one default right.\n\n1104\n00:50:11,470 --> 00:50:16,530\nSo I can't have store 101 as the default\nas well as store 1205 as the default or\n\n1105\n00:50:16,530 --> 00:50:17,550\nanything like that.\n\n1106\n00:50:17,550 --> 00:50:21,930\nBut what I can do is at least get them\nclose to where they belong in the end.\n\n1107\n00:50:21,930 --> 00:50:23,980\nSo, maybe we put them in that,\n\n1108\n00:50:23,980 --> 00:50:26,010\nI forget what we've got there\nunderneath there under corporate.\n\n1109\n00:50:26,010 --> 00:50:29,170\nI put them in that stores folder.\n\n1110\n00:50:29,170 --> 00:50:32,710\nMaybe that becomes the default for\nmy new computer accounts.\n\n1111\n00:50:32,710 --> 00:50:36,210\nIt's got some policies that apply\nto all the different stores.\n\n1112\n00:50:36,210 --> 00:50:40,060\nDoesn't have the Florida specific policies\nor the Georgia specific policies but\n\n1113\n00:50:40,060 --> 00:50:41,450\nit's closer.\n\n1114\n00:50:41,450 --> 00:50:43,560\nIt's better than going into\nthat default container,\n\n1115\n00:50:43,560 --> 00:50:44,910\nsame thing with your user accounts.\n\n1116\n00:50:44,910 --> 00:50:47,050\nYou can change where\nthat default is as well.\n\n1117\n00:50:47,050 --> 00:50:50,040\nYeah, I'll normally like,\ngo under corporate and\n\n1118\n00:50:50,040 --> 00:50:54,400\ncreate an unassigned user and\nunassigned computer OU.\n\n1119\n00:50:54,400 --> 00:50:55,510\n>> Special one for it.\n\n1120\n00:50:55,510 --> 00:50:56,950\n>> OU, Yep, and\nI'll set those to the default, and\n\n1121\n00:50:56,950 --> 00:50:59,735\nthat way they're getting\nmy corporate policies.\n\n1122\n00:50:59,735 --> 00:51:03,875\nAt least get those and then I can\nmove them where they need to go,\n\n1123\n00:51:03,875 --> 00:51:07,865\nso they get the rest of the policies,\nso that's a good approach to take, but\n\n1124\n00:51:07,865 --> 00:51:10,125\nyou do need educated people on that.\n\n1125\n00:51:10,125 --> 00:51:14,115\nThe thing is, as you build this topology,\nagain, not really thinking about our\n\n1126\n00:51:14,115 --> 00:51:16,845\ncorporate hierarchy, not thinking about\nwho is the vice president of what,\n\n1127\n00:51:16,845 --> 00:51:18,805\nthat's stuff we don't care about, right?\n\n1128\n00:51:18,805 --> 00:51:20,735\nBut thinking about the policies\nthat we're going to apply.\n\n1129\n00:51:21,840 --> 00:51:27,180\nIf you don't have a need for applying\na policy at each individual store, if\n\n1130\n00:51:27,180 --> 00:51:31,110\nwe don't have a need for that, then don't\nwaste your time creating all these OUs.\n\n1131\n00:51:31,110 --> 00:51:34,720\nYou can always create them later if you\nall of a sudden get the need for that.\n\n1132\n00:51:34,720 --> 00:51:37,920\n>> Honestly, it's not much more difficult\nthan what we're doing here in Vizio.\n\n1133\n00:51:37,920 --> 00:51:41,880\nI mean, it's about that simple,\nright-click new OU As you said drag and\n\n1134\n00:51:41,880 --> 00:51:44,490\ndrop or\nright click move whatever you need to do.\n\n1135\n00:51:44,490 --> 00:51:45,640\nVery, very flexible.\n\n1136\n00:51:45,640 --> 00:51:48,050\n>> I guess it can be a little bit more\ndifficult if you have like hundreds or\n\n1137\n00:51:48,050 --> 00:51:52,190\nthousands of users in each store, and\nyou've got to go and find those users and\n\n1138\n00:51:52,190 --> 00:51:54,920\nmove them into the individual OU that\nbecomes a little bit of a hassle.\n\n1139\n00:51:54,920 --> 00:51:57,106\n>> That's where PowerShell comes in.\n\n1140\n00:51:57,106 --> 00:52:01,540\n>> Yeah cuz as an attribute of\nthe users you should be storing what\n\n1141\n00:52:01,540 --> 00:52:03,160\nstore they work at, right.\n\n1142\n00:52:03,160 --> 00:52:05,760\nAnd so you can query on that and\nmove people appropriately.\n\n1143\n00:52:05,760 --> 00:52:07,480\nYou can really do that.\n\n1144\n00:52:07,480 --> 00:52:12,015\nBut don't waste your time designing\nan overly complex strategy.\n\n1145\n00:52:12,015 --> 00:52:14,295\nIf you're not actually gonna use it.\n\n1146\n00:52:14,295 --> 00:52:17,045\nEach OU is not just your\ncorporate organization.\n\n1147\n00:52:17,045 --> 00:52:19,475\nIt's not even designed to help\nyou just see less on the screen.\n\n1148\n00:52:19,475 --> 00:52:20,795\nThat's what the search button is for.\n\n1149\n00:52:20,795 --> 00:52:22,915\nThese are to help you apply policies.\n\n1150\n00:52:22,915 --> 00:52:27,685\nSo if you have an OU that doesn't have a\nGPO attached to it, it's a waste of an OU.\n\n1151\n00:52:27,685 --> 00:52:28,695\nYou shouldn't have it.\n\n1152\n00:52:28,695 --> 00:52:31,305\nRight?\nThat is the only, the sole,\n\n1153\n00:52:31,305 --> 00:52:32,505\nwell I shouldn't say that.\n\n1154\n00:52:32,505 --> 00:52:33,315\nThere is one other purpose.\n\n1155\n00:52:33,315 --> 00:52:36,180\nBut it is the primary\npurpose of an object,\n\n1156\n00:52:36,180 --> 00:52:38,550\nthe other purpose being\ndelegating permissions.\n\n1157\n00:52:38,550 --> 00:52:42,720\nYou might wanna give somebody permissions\nto manage the users in store 101 but\n\n1158\n00:52:42,720 --> 00:52:43,620\nnot store 1205.\n\n1159\n00:52:43,620 --> 00:52:45,460\nThat's another reason to have OUs.\n\n1160\n00:52:45,460 --> 00:52:49,570\n>> And really that same logic of what we\napplied to dividing that up by corporate,\n\n1161\n00:52:49,570 --> 00:52:50,500\nthen by state,\n\n1162\n00:52:50,500 --> 00:52:54,870\nthen by store, applies to the delegation\nof administrative control as well.\n\n1163\n00:52:54,870 --> 00:52:57,660\nBecause now I have the ability\nto give that store manager\n\n1164\n00:52:57,660 --> 00:53:02,570\npermissions overall the user's accounts at\nhis store, but not the store in Georgia or\n\n1165\n00:53:02,570 --> 00:53:03,770\nsomething like that.\n\n1166\n00:53:03,770 --> 00:53:06,010\nAgain, if they were all in one,\nthat would be much more difficult,\n\n1167\n00:53:06,010 --> 00:53:08,100\nso really the same principle applies.\n\n1168\n00:53:08,100 --> 00:53:09,420\n>> Yeah.\n\n1169\n00:53:09,420 --> 00:53:13,720\nNow sometimes we have certain needs\nto create a group policy object and\n\n1170\n00:53:13,720 --> 00:53:17,520\nour group policy architecture\njust doesn't fit that need.\n\n1171\n00:53:17,520 --> 00:53:21,450\nAnd maybe in our minds we just can't come\nup with a good solution that encompasses\n\n1172\n00:53:21,450 --> 00:53:22,870\neverything we want.\n\n1173\n00:53:22,870 --> 00:53:27,260\nOr, maybe it's just a one off thing, and\nmost of the time, we need this structure,\n\n1174\n00:53:27,260 --> 00:53:31,020\nbut right now, we need to do one thing\nthat's a little bit different, all right?\n\n1175\n00:53:31,020 --> 00:53:34,420\nWhen that happens, we've gotta come\nup with some kind of alternative,\n\n1176\n00:53:34,420 --> 00:53:35,860\nsome kind of stop gap measure, and\n\n1177\n00:53:35,860 --> 00:53:39,590\nwe've got a suite of options that\nwe can pick from to do that.\n\n1178\n00:53:39,590 --> 00:53:42,290\nBut we're running a little bit\nlow on time in this segment so\n\n1179\n00:53:42,290 --> 00:53:43,380\nit's probably a good spot to stop.\n\n1180\n00:53:43,380 --> 00:53:46,540\nWhen we get back,\nwe've seen the normal way to do things.\n\n1181\n00:53:46,540 --> 00:53:49,664\nWhen we get back,\nwe'll see the abnormal way to kind\n\n1182\n00:53:49,664 --> 00:53:53,864\nof work around some of the limitations\nof our structure so stay tuned.\n\n1183\n00:53:53,864 --> 00:53:55,196\nWe'll be back in a few.\n\n1184\n00:53:55,196 --> 00:54:02,905\n[MUSIC]\n\n1185\n00:54:02,905 --> 00:54:04,900\nAll right welcome back everybody.\n\n1186\n00:54:04,900 --> 00:54:08,750\nSo now what we're gonna do is we're gonna\nsay all right in a perfect world we could\n\n1187\n00:54:08,750 --> 00:54:13,295\ndesign our OU structure to match the group\npolicy objects we wanna push out and\n\n1188\n00:54:13,295 --> 00:54:15,455\neverything's gonna be perfect and\nwonderful, right?\n\n1189\n00:54:15,455 --> 00:54:16,455\n>> Right, yep.\n\n1190\n00:54:16,455 --> 00:54:20,535\n>> But it's rarely a perfect world and\nso often times we\n\n1191\n00:54:20,535 --> 00:54:24,520\nhave to make do with what we have and\nkinda retrofit it to suit our environment.\n\n1192\n00:54:24,520 --> 00:54:27,160\nSo we got a couple of neat little\nutilities that will let us do that.\n\n1193\n00:54:27,160 --> 00:54:28,670\nAll right?\nOne of the first ones that we're\n\n1194\n00:54:28,670 --> 00:54:31,550\ngonna talk about is inheritance blocking.\n\n1195\n00:54:32,920 --> 00:54:35,310\nWhen we set up a group policy like this,\n\n1196\n00:54:35,310 --> 00:54:40,040\nwe do the structure as best we can to\nmeet the needs of most of our GPOs.\n\n1197\n00:54:40,040 --> 00:54:41,990\nBut sometimes we have a problem.\n\n1198\n00:54:41,990 --> 00:54:47,590\nMaybe I've got a group policy object that\nI want to apply to the bulk of my systems.\n\n1199\n00:54:47,590 --> 00:54:50,660\nI want it to apply to all of my stores,\nand\n\n1200\n00:54:50,660 --> 00:54:55,440\nI want it to apply to all of my\nstuff at the corporate offices.\n\n1201\n00:54:55,440 --> 00:54:59,910\nBut maybe at my corporate offices,\nI have a research and\n\n1202\n00:54:59,910 --> 00:55:02,070\ndevelopment department, okay?\n\n1203\n00:55:02,070 --> 00:55:07,205\nSo up there, I've got this R&D department,\nand I don't want certain group\n\n1204\n00:55:07,205 --> 00:55:11,956\npolicy objects to apply to R&D,\nthat the R&Ddepartment is special.\n\n1205\n00:55:11,956 --> 00:55:16,700\nThey're doing things that aren't quite\nYou know, aren't quite normal [LAUGH].\n\n1206\n00:55:16,700 --> 00:55:20,670\n>> Yeah, we don't want our normal\npolicies applying to that R&D\n\n1207\n00:55:20,670 --> 00:55:23,540\nbecause they have to be able to test and\ntry things out and\n\n1208\n00:55:23,540 --> 00:55:27,510\nwe don't want our normal policies\nconflicting with what they're doing.\n\n1209\n00:55:27,510 --> 00:55:30,840\nAnd when we link a policy, we always\ntry to link it, remember the policy\n\n1210\n00:55:32,050 --> 00:55:36,300\nof least administrative effort,\nwe link it as high as we can and\n\n1211\n00:55:36,300 --> 00:55:38,540\nwe let inheritance take care\nof all the work, right.\n\n1212\n00:55:38,540 --> 00:55:43,023\nSo as Don was saying, if I've got 1,000 or\n2,000 stores, I don't want to link that\n\n1213\n00:55:43,023 --> 00:55:47,165\npolicy 2,000 times, I'll link it once and\nlet it inherit down, or in this case,\n\n1214\n00:55:47,165 --> 00:55:50,760\nit links into that corporate OU and\nthen we let it inherit down.\n\n1215\n00:55:50,760 --> 00:55:54,290\nBut somehow I want to prevent\nit from going into RND.\n\n1216\n00:55:54,290 --> 00:55:54,890\n>> Yep.\n\n1217\n00:55:54,890 --> 00:55:57,680\nSo what we can do is we can to the RNDOU,\nand\n\n1218\n00:55:57,680 --> 00:56:00,770\non that OU we can turn on\ninheritance blocking, right.\n\n1219\n00:56:00,770 --> 00:56:02,120\nYou can block inheritance, and\n\n1220\n00:56:02,120 --> 00:56:07,315\nthat will say don't allow GPOs upstream\nto trickle down to the RNDOU, alright?\n\n1221\n00:56:08,625 --> 00:56:10,998\nWe need to remember a few\nthings when we do that.\n\n1222\n00:56:10,998 --> 00:56:13,009\nThe main thing we need to remember,\n\n1223\n00:56:13,009 --> 00:56:16,910\nis that when you turn on blocked\ninheritance it blocks, all GPO's.\n\n1224\n00:56:16,910 --> 00:56:19,348\n>> Right,\nyou can't selectively block a GPO.\n\n1225\n00:56:19,348 --> 00:56:25,830\nYep, so no GPOs from the corporate level,\nfrom the corporate offices level, right?\n\n1226\n00:56:25,830 --> 00:56:29,220\nOr even way up here my\ndefault domain policy,\n\n1227\n00:56:29,220 --> 00:56:31,490\neven that is not going to trickle down.\n\n1228\n00:56:31,490 --> 00:56:36,590\nIf I block inheritance on the RNDOU and\nI don't attach any GPOs here,\n\n1229\n00:56:36,590 --> 00:56:40,131\nthen no GPOs will apply to users and\ncomputers in that folder.\n\n1230\n00:56:40,131 --> 00:56:43,705\nAll right, you've gotta remember that,\nthat it blocks everything.\n\n1231\n00:56:43,705 --> 00:56:44,420\n>> Right.\n\n1232\n00:56:44,420 --> 00:56:47,260\n>> So\nwhat if we don't wanna block everything?\n\n1233\n00:56:47,260 --> 00:56:49,990\nWhat if we just wanna block\nsome of the policies?\n\n1234\n00:56:49,990 --> 00:56:51,080\nWe wanna be selective.\n\n1235\n00:56:51,080 --> 00:56:53,310\nMike, you just said we can't be selective,\nbut what if I want that?\n\n1236\n00:56:53,310 --> 00:56:54,660\n>> Right, exactly.\n>> Right, that's my favorite feature.\n\n1237\n00:56:54,660 --> 00:56:55,870\n>> How can we do that?\n\n1238\n00:56:55,870 --> 00:56:59,030\nA cool thing that we can do\nis we can enforce a policy,\n\n1239\n00:56:59,030 --> 00:57:00,960\nnow enforcement is actually done.\n\n1240\n00:57:00,960 --> 00:57:03,800\nWhereas blocking is a property of the OU,\n\n1241\n00:57:03,800 --> 00:57:06,530\nenforcement is done as\na property of the link itself.\n\n1242\n00:57:06,530 --> 00:57:10,480\nAnd we've talked about that I think\nin 411, we got into group policy.\n\n1243\n00:57:10,480 --> 00:57:14,950\nWe go to the link and we choose to\nenforce that particular policy, and\n\n1244\n00:57:14,950 --> 00:57:17,270\nwhen you enforce a policy,\nit does two things.\n\n1245\n00:57:17,270 --> 00:57:19,780\nIt's going to first blast through\n\n1246\n00:57:19,780 --> 00:57:23,370\nany blocks that it occurs on\nthe way down on its inheritance,\n\n1247\n00:57:23,370 --> 00:57:28,610\nas well as get the highest priority,\nthe lowest number, the highest priority.\n\n1248\n00:57:28,610 --> 00:57:31,200\nWhen we look at the way the group\npolicies, the order that the group\n\n1249\n00:57:31,200 --> 00:57:33,410\npolicies are applied, so\nwe get a couple things out of it.\n\n1250\n00:57:33,410 --> 00:57:37,555\nBut now that lets me block policies, so I\ncan stop all that stuff from going down to\n\n1251\n00:57:37,555 --> 00:57:41,555\nRND, yet still have some\nof my policies get through.\n\n1252\n00:57:41,555 --> 00:57:46,010\n>> Yeah, maybe my default domain policy,\nmaybe the only thing I'm using it for\n\n1253\n00:57:46,010 --> 00:57:47,780\nis password complexity requirements.\n\n1254\n00:57:47,780 --> 00:57:49,120\nThat's all I've got in there.\n\n1255\n00:57:49,120 --> 00:57:53,585\nSo even though RND is not gonna be\ngetting GPOs that I apply down here,\n\n1256\n00:57:53,585 --> 00:57:55,720\nI still want them to get\nthat password policy.\n\n1257\n00:57:55,720 --> 00:57:57,125\n>> Right.\n>> Just because they're RND doesn't\n\n1258\n00:57:57,125 --> 00:57:59,727\nmean they can be lax on the passwords,\nI want to make sure they follow that.\n\n1259\n00:57:59,727 --> 00:58:01,155\n>> Right. [LAUGH] >> So we could go up and\n\n1260\n00:58:01,155 --> 00:58:06,405\nflag the default domain policy as\nan enforced policy and now it'll break\n\n1261\n00:58:06,405 --> 00:58:11,005\nthrough that boundary that you put in\nwhen you turn off enforcement for RND.\n\n1262\n00:58:11,005 --> 00:58:14,010\nRight, really handy way to continue\nto get those to pass through.\n\n1263\n00:58:14,010 --> 00:58:18,375\nSo anything that absolutely must apply,\nyou can flag as enforced.\n\n1264\n00:58:18,375 --> 00:58:19,440\n>> Yep.\n\n1265\n00:58:19,440 --> 00:58:21,150\n>> But, let's get even more complex.\n\n1266\n00:58:21,150 --> 00:58:22,410\n>> All right.\n>> Let's go crazy Mike.\n\n1267\n00:58:22,410 --> 00:58:23,370\n>> Love it.\n\n1268\n00:58:23,370 --> 00:58:26,970\n>> Let's say that I'm blocking\nenforcement for RND and\n\n1269\n00:58:26,970 --> 00:58:28,990\nI'm blocking enforcement for Florida.\n\n1270\n00:58:28,990 --> 00:58:33,200\nAll right, so I'm blocking enforcement, I\nmean blocking inheritance for both, sorry.\n\n1271\n00:58:33,200 --> 00:58:38,285\nAnd I want the default domain policy\nto apply to Florida but not to RND.\n\n1272\n00:58:38,285 --> 00:58:39,390\n>> Right.\n\n1273\n00:58:39,390 --> 00:58:42,720\n>> If we turn on enforcement up\nin the default domain policy,\n\n1274\n00:58:42,720 --> 00:58:46,600\nit's going to break through both blocks,\nit'll apply to both.\n\n1275\n00:58:46,600 --> 00:58:52,040\nSo sometimes enforcing the policy is not\nan option because it'll break through\n\n1276\n00:58:52,040 --> 00:58:55,751\neverywhere, not just where\nyou necessarily want it.\n\n1277\n00:58:55,751 --> 00:58:56,551\n>> All the blocks.\n\n1278\n00:58:56,551 --> 00:59:00,310\n>> Okay so, in that scenario\nyou don't turn on enforcement,\n\n1279\n00:59:00,310 --> 00:59:04,380\nbecause you don't want it to break all\nthe blocks, but instead you do links.\n\n1280\n00:59:04,380 --> 00:59:07,870\nYou can link a group policy object\nas many places as you want.\n\n1281\n00:59:07,870 --> 00:59:12,760\nSo if I've blocked inheritance on\nthe RND OU and I blocked inheritance on\n\n1282\n00:59:12,760 --> 00:59:17,170\nthe Florida OU but I want that default\ndomain policy to still apply to Florida.\n\n1283\n00:59:17,170 --> 00:59:23,780\nI can just link the default domain policy\nand link it down here to Florida and\n\n1284\n00:59:23,780 --> 00:59:28,260\nthat way it is applying in Florida but\nit's not applying to RND.\n\n1285\n00:59:28,260 --> 00:59:30,910\n>> Exactly because you got that\nblock going on at Florida,\n\n1286\n00:59:30,910 --> 00:59:34,108\nthat blocking of inheritance but\nwhat you've done is you've jumped over to\n\n1287\n00:59:34,108 --> 00:59:36,653\nthe other side of the block and\nlink that policy again.\n\n1288\n00:59:36,653 --> 00:59:39,875\nSo it doesn't have to be enforced you're\nalready on the other side of the block.\n\n1289\n00:59:39,875 --> 00:59:43,490\n>> Yep, so keep that mind on the exam,\n\n1290\n00:59:43,490 --> 00:59:47,560\nthat's a decision you're gonna have to\nmake at least once is choosing between,\n\n1291\n00:59:47,560 --> 00:59:52,440\ndo I do an enforced policy, or do I just\nlink, to skip over that block, right?\n\n1292\n00:59:52,440 --> 00:59:54,910\nThe enforced policy will\nbreak right through, and\n\n1293\n00:59:54,910 --> 00:59:58,270\nthat works if you want\nit to apply everywhere.\n\n1294\n00:59:58,270 --> 01:00:03,060\nA linked policy will jump over the block,\nand that's useful if you want to pick and\n\n1295\n01:00:03,060 --> 01:00:06,860\nchoose the policies, and pick and\nchoose the OUs where they apply.\n\n1296\n01:00:06,860 --> 01:00:08,750\nLinked policies can be\na lot more flexible.\n\n1297\n01:00:08,750 --> 01:00:09,900\n>> Yep.\n\n1298\n01:00:09,900 --> 01:00:13,890\n>> All right, so those are two tools\nthat we've got to be able to kinda\n\n1299\n01:00:13,890 --> 01:00:17,470\nget around the odd scenarios\nthat might pop up.\n\n1300\n01:00:17,470 --> 01:00:19,550\nSome of the other things that we've got,\n\n1301\n01:00:19,550 --> 01:00:21,160\nloop back processing\n>> Loop back.\n\n1302\n01:00:21,160 --> 01:00:24,140\n>> This is one of my favorites because\nit really kinda bends your mind.\n\n1303\n01:00:24,140 --> 01:00:24,885\n>> It does.\n\n1304\n01:00:24,885 --> 01:00:26,595\n[LAUGH]\n>> And people can have a hard time getting\n\n1305\n01:00:26,595 --> 01:00:29,490\nkinda to the terms on this one.\n\n1306\n01:00:29,490 --> 01:00:34,130\nNormally when you open up a GPO, there's\na section in there that pertains to users.\n\n1307\n01:00:34,130 --> 01:00:37,300\nAnd there's a section in there\nthat pertains to computers, right?\n\n1308\n01:00:37,300 --> 01:00:40,890\nThat's what we expect to see and\nwhen you go to an OU,\n\n1309\n01:00:40,890 --> 01:00:45,450\nlike if I take this one,\nand do I even have like?\n\n1310\n01:00:45,450 --> 01:00:46,955\n>> Like a user?\n>> I do have users, look at this.\n\n1311\n01:00:46,955 --> 01:00:49,050\n>> Nice.\n>> So inside of an OU,\n\n1312\n01:00:49,050 --> 01:00:53,630\nI might have some users, I might have\nsome groups, I might have some computers.\n\n1313\n01:00:53,630 --> 01:00:56,180\nI might have all sorts of\ngood stuff in here, right,\n\n1314\n01:00:56,180 --> 01:00:59,440\njust depending on what I've\nchosen to put in here.\n\n1315\n01:01:00,490 --> 01:01:06,174\nAll right now, when I take a group policy\nobject and I apply it to this OU, okay?\n\n1316\n01:01:06,174 --> 01:01:10,956\nWhen I do that, the group policy object\napplies to all these guys, the user,\n\n1317\n01:01:10,956 --> 01:01:13,880\nthe group, the computers, all right.\n\n1318\n01:01:13,880 --> 01:01:19,100\nBut in that policy,\ninside of the GPO, you'll see where\n\n1319\n01:01:19,100 --> 01:01:24,115\nhalf the settings apply just to users, and\nhalf the settings apply to just computers.\n\n1320\n01:01:24,115 --> 01:01:30,030\nOkay well, if the users and\ncomputers are both in Store 1205, right?\n\n1321\n01:01:30,030 --> 01:01:31,220\nAnd that policy applies to both,\n\n1322\n01:01:31,220 --> 01:01:34,680\nthen it works great,\nall the setting apply the way that I want.\n\n1323\n01:01:34,680 --> 01:01:37,746\nBut what if they aren't\nall in the same place?\n\n1324\n01:01:37,746 --> 01:01:38,575\n>> Right.\n\n1325\n01:01:38,575 --> 01:01:43,350\n>> Okay, what if in this structure\nI've got my computers, so\n\n1326\n01:01:43,350 --> 01:01:47,160\nin the store here is where\nI've got my various computers.\n\n1327\n01:01:47,160 --> 01:01:50,710\nBut maybe my users\nare stored a different way.\n\n1328\n01:01:50,710 --> 01:01:55,970\nOkay, so maybe my users are stored in some\nkind of separate OU structure somewhere,\n\n1329\n01:01:55,970 --> 01:01:58,026\nwell even inside of the store.\n\n1330\n01:01:58,026 --> 01:02:01,270\n>> Within store, yeah, within OU,\nyou might have an employee's OU and\n\n1331\n01:02:01,270 --> 01:02:03,850\nthen a terminal's OU or\nsomething like that.\n\n1332\n01:02:03,850 --> 01:02:06,620\nOr you might do it completely separate\nas he's got it all broken down by\n\n1333\n01:02:06,620 --> 01:02:07,610\nstate and store.\n\n1334\n01:02:07,610 --> 01:02:10,670\nYou might do the same thing for\nuser accounts, whatever,\n\n1335\n01:02:10,670 --> 01:02:11,980\nhowever you choose to do it.\n\n1336\n01:02:11,980 --> 01:02:13,750\n>> Yeah, I'll just, I'll kinda redo this,\n\n1337\n01:02:13,750 --> 01:02:18,742\nso maybe I've got a user's, well actually\nlet me go, I'll go this way, whatever.\n\n1338\n01:02:18,742 --> 01:02:24,040\nI'm flexible, so I'll have my user's\nOU and my computer's OU here.\n\n1339\n01:02:24,040 --> 01:02:30,230\nAnd I'll take all of my computers and move\nthem down here inside of computers, right?\n\n1340\n01:02:30,230 --> 01:02:35,410\nAnd I'll take all my users and\nmove them here inside of users, right?\n\n1341\n01:02:35,410 --> 01:02:38,200\nSo that's exciting, so\nI've got them kinda lined up.\n\n1342\n01:02:38,200 --> 01:02:41,860\nNow I might have a policy\nthat I want to apply to both.\n\n1343\n01:02:41,860 --> 01:02:44,980\nNow the easy solution would be to\nstick it right up here on this store.\n\n1344\n01:02:44,980 --> 01:02:45,685\n>> Right.\n\n1345\n01:02:45,685 --> 01:02:48,880\n>> But let's say that, well actually\nI'll give you a great example here.\n\n1346\n01:02:48,880 --> 01:02:50,190\n>> Yeah.\n\n1347\n01:02:50,190 --> 01:02:56,960\n>> If I were to apply a policy and I want\nthat policy to apply when one of my users,\n\n1348\n01:02:56,960 --> 01:03:03,800\nnot just anywhere, but when that user\nlogs into a particular computer, okay?\n\n1349\n01:03:03,800 --> 01:03:07,760\nSo if the user, let's, I'm trying to think\nof a real world scenario that makes a ton\n\n1350\n01:03:07,760 --> 01:03:08,740\nof sense and I've got one.\n\n1351\n01:03:08,740 --> 01:03:10,420\n>> Yeah, I, you've got it?\n\n1352\n01:03:10,420 --> 01:03:12,900\n>> Yep, I've got an idea,\nI got an idea, it happens sometimes.\n\n1353\n01:03:12,900 --> 01:03:16,630\n>> I always talk about kiosks, because you\ndon't want software being installed when\n\n1354\n01:03:16,630 --> 01:03:18,860\nthey log on to kiosk,\nor something like that.\n\n1355\n01:03:18,860 --> 01:03:22,430\n>> Let's say back here at the corporate\noffice, at the corporate office,\n\n1356\n01:03:22,430 --> 01:03:24,650\nI have a terminal server, all right?\n\n1357\n01:03:24,650 --> 01:03:29,400\nA terminal server, or\na remote desktop server, an RDS box, so\n\n1358\n01:03:29,400 --> 01:03:33,740\nI'll have a server up here and\nlet me just kinda stick this guy up here.\n\n1359\n01:03:33,740 --> 01:03:38,370\nSo at my corporate office, I have\na server and that is my terminal server.\n\n1360\n01:03:39,980 --> 01:03:41,064\nAll right, and\n\n1361\n01:03:41,064 --> 01:03:47,530\nI want a GPO that applies user settings\nwhen a user logs into the terminal server.\n\n1362\n01:03:47,530 --> 01:03:52,071\nI know that way down here at the store,\nwhen user, we'll make this just, Bob.\n\n1363\n01:03:52,071 --> 01:03:52,720\n, ll right.\n\n1364\n01:03:52,720 --> 01:03:57,140\nAll right so here's Bob, and we've got Tom\nand whoever else is in that store, right?\n\n1365\n01:03:57,140 --> 01:04:01,340\nWhen Bob logs into his computer at\nthe store, I don't care what he does.\n\n1366\n01:04:01,340 --> 01:04:04,080\nMaybe I'll make him a full admin,\nhe can have all the access he wants.\n\n1367\n01:04:04,080 --> 01:04:04,790\n>> Right.\n\n1368\n01:04:04,790 --> 01:04:07,191\n>> But to work on his corporate software,\n\n1369\n01:04:07,191 --> 01:04:10,553\nhe's gonna remote in to this\nterminal server up here.\n\n1370\n01:04:10,553 --> 01:04:12,497\nAnd when he logs in to\nthe terminal server,\n\n1371\n01:04:12,497 --> 01:04:14,393\nI want his start menu to be super limited.\n\n1372\n01:04:14,393 --> 01:04:15,929\nI don't want him to be\nable to shut it down,\n\n1373\n01:04:15,929 --> 01:04:18,131\nI don't want him to be able to\nbrowse through the hard drive.\n\n1374\n01:04:18,131 --> 01:04:23,780\nI want him to be super restricted when\nhe logs into that terminal server.\n\n1375\n01:04:23,780 --> 01:04:25,720\nWhen he logs into his own computer,\nhe can have at it.\n\n1376\n01:04:26,880 --> 01:04:30,200\nSo I wanna restrict his user account, so\n\n1377\n01:04:30,200 --> 01:04:33,610\nI'm gonna write a GPO that\nhas a bunch of user settings.\n\n1378\n01:04:33,610 --> 01:04:37,470\nIf I put that GPO right here on his store,\n\n1379\n01:04:37,470 --> 01:04:42,020\nthe user settings will apply to him\neven when he logs into his own computer.\n\n1380\n01:04:42,020 --> 01:04:43,010\nI don't want that.\n\n1381\n01:04:44,510 --> 01:04:50,320\nIf I take that same policy and I apply\nit up here, by the terminal server.\n\n1382\n01:04:50,320 --> 01:04:53,370\nOkay, so if I put it up here on this OU,\n\n1383\n01:04:53,370 --> 01:04:56,190\nwhen I do that that seems to\nsolve the problem, right?\n\n1384\n01:04:56,190 --> 01:04:59,090\nOh hey, when Bob logs in,\nthis is going to apply.\n\n1385\n01:04:59,090 --> 01:05:04,000\nBut the problem is, that GPO Contains both\n\n1386\n01:05:04,000 --> 01:05:08,440\ncomputer and user settings and\nI'm applying user settings.\n\n1387\n01:05:08,440 --> 01:05:10,100\nWell, are there any users in that OU?\n\n1388\n01:05:10,100 --> 01:05:12,310\nNo, just a server.\n\n1389\n01:05:12,310 --> 01:05:16,120\n>> When you logon, your client goes and\ntalks to active directory and it retrieves\n\n1390\n01:05:16,120 --> 01:05:20,880\nan ordered list of policies it's supposed\nto apply based where your user account is.\n\n1391\n01:05:20,880 --> 01:05:24,380\nSo it's gonna go down three, look where\nyour user account is in active directory,\n\n1392\n01:05:24,380 --> 01:05:27,480\nfigure out what policies apply and\nyour user account is\n\n1393\n01:05:27,480 --> 01:05:30,920\nnot in that corporate office's OU, so it's\nnot going to apply those user settings.\n\n1394\n01:05:30,920 --> 01:05:34,140\n>> Yep, so the computer settings will\napply, whatever computer settings that\n\n1395\n01:05:34,140 --> 01:05:36,890\nare in this policy will apply\nto the terminal server.\n\n1396\n01:05:36,890 --> 01:05:38,750\nBut the user settings won't and\nunfortunately,\n\n1397\n01:05:38,750 --> 01:05:42,130\nall of the restricted shell stuff\nis all user settings, you know?\n\n1398\n01:05:42,130 --> 01:05:44,860\nChanging somebody's start menu and\nall of that, it's in the user settings.\n\n1399\n01:05:44,860 --> 01:05:49,640\nSo I need user settings\nto apply to a computer.\n\n1400\n01:05:49,640 --> 01:05:51,260\nThat's weird, right?\n\n1401\n01:05:51,260 --> 01:05:53,130\nBut it's not normally possible.\n\n1402\n01:05:53,130 --> 01:05:55,430\nLoopback processing allows it, right?\n\n1403\n01:05:55,430 --> 01:05:58,030\nAnd I know we showed loopback\nprocessing back in 411?\n\n1404\n01:05:58,030 --> 01:06:01,190\n>> I think it was 411, yeah,\nwhen we first did group policy, yeah.\n\n1405\n01:06:01,190 --> 01:06:02,350\n>> In one of the other shows.\n\n1406\n01:06:02,350 --> 01:06:06,420\nBut we didn't necessarily get into\nthe why so much, why you may do it.\n\n1407\n01:06:06,420 --> 01:06:08,100\nAnd here's a great example.\n\n1408\n01:06:08,100 --> 01:06:12,140\nWe may want certain user restrictions\nto only apply when you log into\n\n1409\n01:06:12,140 --> 01:06:13,400\na particular computer.\n\n1410\n01:06:13,400 --> 01:06:16,390\nNot every, computer but\nthis computer in particular this group.\n\n1411\n01:06:16,390 --> 01:06:20,080\nMaybe when you're in the lab you\nget really restrictive stuff, but\n\n1412\n01:06:20,080 --> 01:06:22,490\nwhen you're on your laptop you\nget whatever you want right?\n\n1413\n01:06:22,490 --> 01:06:25,580\nSo loopback policies allow us to do that.\n\n1414\n01:06:25,580 --> 01:06:28,720\nIf I flag this policy\nas a loopback policy,\n\n1415\n01:06:28,720 --> 01:06:33,300\nthen the computer and user settings\nwill apply to this terminal server.\n\n1416\n01:06:34,500 --> 01:06:39,730\nBut you gotta be careful because if I\ncreate a super restrictive policy and\n\n1417\n01:06:39,730 --> 01:06:42,430\napply it to this terminal server,\nand then I come along and\n\n1418\n01:06:42,430 --> 01:06:46,350\nI'm a domain admin and I log into that\nterminal server, what am I gonna get?\n\n1419\n01:06:46,350 --> 01:06:47,980\n>> That super restrictive policy.\n\n1420\n01:06:47,980 --> 01:06:48,540\n>> Yeah.\n>> Mm-hm\n\n1421\n01:06:48,540 --> 01:06:49,420\n>> You'll lock,\n\n1422\n01:06:49,420 --> 01:06:51,020\nwell not necessary lock yourself out.\n\n1423\n01:06:51,020 --> 01:06:54,210\nBut you'll get it where you log in and you\ncan't do your work, you can't be an admin.\n\n1424\n01:06:55,400 --> 01:06:59,120\nSo, whenever you do loop back processing\nit's great, it does exactly what,\n\n1425\n01:06:59,120 --> 01:07:01,860\nit's perfect for\nterminal service, for kiosks.\n\n1426\n01:07:01,860 --> 01:07:05,710\nFor shared computers where you\nwant it to apply the computer.\n\n1427\n01:07:05,710 --> 01:07:10,250\nBut we've got to put exceptions in for\nus as administrators.\n\n1428\n01:07:10,250 --> 01:07:15,580\nWe've got to make it to where that\npolicy doesn't apply to us, but\n\n1429\n01:07:15,580 --> 01:07:20,090\nsince it's applying to the computer,\nhow do you exclude a user from that?\n\n1430\n01:07:20,090 --> 01:07:24,550\nWell, what you've got to do is you've got\nto change the permissions on that policy\n\n1431\n01:07:24,550 --> 01:07:28,340\nto exclude domain admins,\nor exclude whoever it is.\n\n1432\n01:07:28,340 --> 01:07:31,910\nBasically take them and\ndeny them the right to apply the policy.\n\n1433\n01:07:31,910 --> 01:07:34,900\nSo you have to do a permissions based\nexclusion to make not it apply to\n\n1434\n01:07:34,900 --> 01:07:36,340\nan administrator, otherwise it will.\n\n1435\n01:07:37,830 --> 01:07:39,600\nBut that's the idea\n>> I was going to say,\n\n1436\n01:07:39,600 --> 01:07:42,710\nthere's a, actually I forgot where\nI was going to go with that.\n\n1437\n01:07:42,710 --> 01:07:44,300\nBut yeah there's two ways you can do that.\n\n1438\n01:07:44,300 --> 01:07:45,470\n>> [LAUGH] Good story Mike, good story.\n\n1439\n01:07:45,470 --> 01:07:46,410\n>> Yeah you like that one.\n\n1440\n01:07:46,410 --> 01:07:49,600\nYou know when you do that\nsecurity filtering by default and\n\n1441\n01:07:49,600 --> 01:07:52,530\nI'm pretty sure we've talked about this\nbefore but by default a group policy\n\n1442\n01:07:52,530 --> 01:07:56,040\napplies to everybody because when we\nlook at the scope tab of that GPO\n\n1443\n01:07:56,040 --> 01:07:59,520\nit's gonna say this policy can only\napply to the following groups users or\n\n1444\n01:07:59,520 --> 01:08:02,680\ncomputers in the authenticated\nusers listed there.\n\n1445\n01:08:02,680 --> 01:08:06,790\nSo we can do it one of two ways, if I\nwanted to apply it to everybody or if I\n\n1446\n01:08:06,790 --> 01:08:11,040\nwanted to apply to just certain people,\nI could remove the authenticated users and\n\n1447\n01:08:11,040 --> 01:08:14,326\nI could add that global group and\nthen it would only apply to them.\n\n1448\n01:08:14,326 --> 01:08:17,830\nIf I want it to apply to\neveryone except certain people\n\n1449\n01:08:17,830 --> 01:08:21,910\nI can't do that on that on that Scope tab,\nso I leave the authenticated users there.\n\n1450\n01:08:21,910 --> 01:08:24,520\nWe go over to,\nI think it's the delegation tab and\n\n1451\n01:08:24,520 --> 01:08:27,080\nthere is an advanced button in\nthe bottom right-hand corner.\n\n1452\n01:08:27,080 --> 01:08:30,400\nAnd, there, I can actually pull up\nthe access control list for the GPO.\n\n1453\n01:08:30,400 --> 01:08:33,680\nAnd, as Don said, there's two\npermissions you need to apply policy.\n\n1454\n01:08:33,680 --> 01:08:36,820\nYou've gotta have read and\nyou've gotta have allow by group policy.\n\n1455\n01:08:36,820 --> 01:08:39,550\nWe just add the group to\nthe access control list, and\n\n1456\n01:08:39,550 --> 01:08:42,720\nthen we deny them that apply\ngroup policy permission.\n\n1457\n01:08:42,720 --> 01:08:43,940\n>> They can have read.\n\n1458\n01:08:43,940 --> 01:08:45,218\nThat's fine, that doesn't matter.\n\n1459\n01:08:45,218 --> 01:08:47,390\nIt's just the apply one we needed\n>> And\n\n1460\n01:08:47,390 --> 01:08:50,710\nit's one of the few times where the deny,\nit's pretty un-evasive.\n\n1461\n01:08:50,710 --> 01:08:54,770\nAnd you'll probably wanna deny\ndomain admins at a minimum, but\n\n1462\n01:08:54,770 --> 01:08:57,430\nprobably deny the local admins for\nthat server and so\n\n1463\n01:08:57,430 --> 01:09:00,510\non and it's because you don't want\nthose restrictions to apply there.\n\n1464\n01:09:00,510 --> 01:09:03,700\nAnd anytime you use a deny you need\nto document that you did it but\n\n1465\n01:09:03,700 --> 01:09:05,740\nGPOs are pretty safe.\n\n1466\n01:09:05,740 --> 01:09:09,680\nDefinitely keep that in mind, loopback\nprocessing allows us to get around\n\n1467\n01:09:09,680 --> 01:09:13,900\nthe fact that user settings normally\nonly apply to users in the same OU,\n\n1468\n01:09:13,900 --> 01:09:15,550\ncause your users might\nnot be in the same OU.\n\n1469\n01:09:16,570 --> 01:09:20,340\nSome of the other things we got actually\nled into our next one which was security\n\n1470\n01:09:20,340 --> 01:09:20,940\nfiltering.\n\n1471\n01:09:20,940 --> 01:09:22,130\n>> Yeah, security filtering.\n\n1472\n01:09:22,130 --> 01:09:23,680\n>> There is another one\nwhich is WMI filtering.\n\n1473\n01:09:24,960 --> 01:09:30,860\nWMI filtering is where we can look into\nthe Windows management instrumentation and\n\n1474\n01:09:30,860 --> 01:09:34,030\nreach in there and\ndetermine other criteria.\n\n1475\n01:09:34,030 --> 01:09:39,715\nYou might have a policy that you just\nwant to apply to Windows XP machines.\n\n1476\n01:09:39,715 --> 01:09:44,255\nMaybe you think you don't have any more\nWindows XP machines in your network.\n\n1477\n01:09:44,255 --> 01:09:46,950\n[LAUGH] This is always a funny one.\n\n1478\n01:09:46,950 --> 01:09:49,940\nYou think there aren't any, but\nthen there turned out to be a few.\n\n1479\n01:09:49,940 --> 01:09:54,390\nSo what you could do is you could whip up\na GPO and stick it at the domain level and\n\n1480\n01:09:54,390 --> 01:09:59,110\nhave it set to display a message that\nsays warning you're running Windows XP,\n\n1481\n01:09:59,110 --> 01:10:00,485\ncontact the help desk immediately.\n\n1482\n01:10:00,485 --> 01:10:01,510\n>> [LAUGH]\n>> Right, so\n\n1483\n01:10:01,510 --> 01:10:04,270\njust some kind of logon message or\nwhatever.\n\n1484\n01:10:04,270 --> 01:10:07,440\nWell if you stick it at the domain\nlevel everybody is going to see it.\n\n1485\n01:10:07,440 --> 01:10:09,379\nWouldn't it be nice if\nwe could filter that so\n\n1486\n01:10:09,379 --> 01:10:11,735\nthat it only applied to\ncomputers running Windows XP?\n\n1487\n01:10:11,735 --> 01:10:15,291\nYou can and you do it with a wmi filter.\n\n1488\n01:10:15,291 --> 01:10:18,182\nWMI filters they kind of use\ntheir own little language,\n\n1489\n01:10:18,182 --> 01:10:20,654\nMicrosoft has some examples\non their site if I.\n\n1490\n01:10:20,654 --> 01:10:26,729\n>> It's very similar to Transact-SQL it's\nactually called w-h-u-l I think, Windows.\n\n1491\n01:10:26,729 --> 01:10:28,598\nWhat is it called, Windows Query Language?\n\n1492\n01:10:28,598 --> 01:10:29,360\nWindows Hardware Query Language.\n\n1493\n01:10:29,360 --> 01:10:31,050\n>> Silly language.\n\n1494\n01:10:31,050 --> 01:10:32,000\n>> Yeah, it's similar.\n\n1495\n01:10:32,000 --> 01:10:35,710\nYou'll recognize it if you\nwrite any Transact-SQL stuff.\n\n1496\n01:10:35,710 --> 01:10:38,370\nThe name spaces are going to\nbe a little bit different.\n\n1497\n01:10:38,370 --> 01:10:41,960\nI have to go and look it up every time.\n\n1498\n01:10:41,960 --> 01:10:43,880\n>> Yeah, here they show exactly\nwhat I was talking about.\n\n1499\n01:10:43,880 --> 01:10:45,940\nThey're using Windows 6.2 which is not,\nwhat is Windows XP?\n\n1500\n01:10:45,940 --> 01:10:46,834\nIt's 6.-.\n\n1501\n01:10:46,834 --> 01:10:48,358\n>> It's 6.2.\n\n1502\n01:10:48,358 --> 01:10:49,191\nNo, no, no, no.\n\n1503\n01:10:49,191 --> 01:10:50,735\nWindows Vista was 6.1.\n\n1504\n01:10:50,735 --> 01:10:51,872\nWindows 7 was 6.2.\n\n1505\n01:10:51,872 --> 01:10:53,010\nWindows 8 was 6.3.\n\n1506\n01:10:53,010 --> 01:10:53,762\n>> Okay.\n\n1507\n01:10:53,762 --> 01:10:56,774\nSo if we wanted to find Windows XP we\nwould just have to remember like what\n\n1508\n01:10:56,774 --> 01:10:57,710\nthe version was.\n\n1509\n01:10:57,710 --> 01:11:02,960\nAnd so you could say select star from Win\n32 operating system where version like.\n\n1510\n01:11:02,960 --> 01:11:06,280\nAnd then the version number you're\nlooking for to specify Windows XP's.\n\n1511\n01:11:06,280 --> 01:11:12,436\n>> And when you do that, now this policy\nwill only apply to Windows XP machines.\n\n1512\n01:11:12,436 --> 01:11:15,463\nAnd WMI filters, they can be used for\na lot more than that, right?\n\n1513\n01:11:15,463 --> 01:11:17,110\nThis is just one example.\n\n1514\n01:11:17,110 --> 01:11:18,060\nYou might, oh go ahead.\n\n1515\n01:11:18,060 --> 01:11:19,040\n>> Installing Office, you know.\n\n1516\n01:11:19,040 --> 01:11:19,770\n>> Oh yeah.\n>> You've got to have so\n\n1517\n01:11:19,770 --> 01:11:21,810\nmuch free disk space to install Office.\n\n1518\n01:11:21,810 --> 01:11:24,690\nSo I create a policy and I install Office,\n\n1519\n01:11:24,690 --> 01:11:27,020\nwhat if that machine didn't\nhave enough hard drive space?\n\n1520\n01:11:27,020 --> 01:11:29,130\nAnd all of a sudden,\nthe install failed but\n\n1521\n01:11:29,130 --> 01:11:31,245\nit also gobbled up what was\nleft of the hard drive space.\n\n1522\n01:11:31,245 --> 01:11:32,110\n>> [LAUGH]\n>> You know, and\n\n1523\n01:11:32,110 --> 01:11:34,650\nnow their machine is sluggish and\ncrashing.\n\n1524\n01:11:34,650 --> 01:11:38,260\nWouldn't it be nice if I could\ncheck before the policy applied,\n\n1525\n01:11:38,260 --> 01:11:39,440\ndo they have enough disk space?\n\n1526\n01:11:39,440 --> 01:11:42,676\nAnd that's something I\ncan do with WMI filters.\n\n1527\n01:11:42,676 --> 01:11:44,370\nSo it's really powerful.\n\n1528\n01:11:44,370 --> 01:11:48,078\nIt's another way to kind of break the\ntraditional mold, where we have a policy\n\n1529\n01:11:48,078 --> 01:11:51,730\nthat we want to apply to some computers,\nbut not necessarily others.\n\n1530\n01:11:51,730 --> 01:11:54,880\nYou could achieve something similar if\nyou had groups that the computers were\n\n1531\n01:11:54,880 --> 01:11:56,940\nin to do security filtering, but\n\n1532\n01:11:56,940 --> 01:12:00,380\nWMI filtering supports things that\ngroups don't, like disk space right?\n\n1533\n01:12:00,380 --> 01:12:03,923\n>> You can look at how much RAM is in\nthat machine, what processor it has,\n\n1534\n01:12:03,923 --> 01:12:06,584\njust about anything that\nyou can query through WMI.\n\n1535\n01:12:06,584 --> 01:12:09,631\n>> And another cool thing about them is\nthey're reusable, they're not associated.\n\n1536\n01:12:09,631 --> 01:12:13,839\nThey're not built inside the GPO itself,\nthey're actually built outside the GPO And\n\n1537\n01:12:13,839 --> 01:12:15,163\nthen in your group policy,\n\n1538\n01:12:15,163 --> 01:12:18,062\nhit a drop down list to pick\nthe WMI filter you want to apply.\n\n1539\n01:12:18,062 --> 01:12:20,246\nSo you can write it once and then,\n\n1540\n01:12:20,246 --> 01:12:24,150\nuse that same WMI filter across\nseveral different GPO's.\n\n1541\n01:12:25,882 --> 01:12:29,000\n>> All right,\nanother thing that we need to remember,\n\n1542\n01:12:29,000 --> 01:12:32,950\nand this was something I didn't address\nback when we were doing this diagram here.\n\n1543\n01:12:32,950 --> 01:12:34,970\nIs that, when we talk about GPOs,\n\n1544\n01:12:34,970 --> 01:12:37,770\nwe're normally talking about\nattaching them to OUs.\n\n1545\n01:12:37,770 --> 01:12:38,310\nRight.\n\n1546\n01:12:38,310 --> 01:12:40,450\nWell, you've got domain level GPOs.\n\n1547\n01:12:40,450 --> 01:12:42,790\n>> Right.\n>> Like the default domain policy here.\n\n1548\n01:12:42,790 --> 01:12:44,840\nYou've got OU based ones.\n\n1549\n01:12:44,840 --> 01:12:46,340\nYou've got child OU, right?\n\n1550\n01:12:46,340 --> 01:12:50,270\nSo it's kinda like four levels, where you\nmight apply these organizational units.\n\n1551\n01:12:50,270 --> 01:12:53,960\nBut there is one more place\nwhere we might apply an OU.\n\n1552\n01:12:53,960 --> 01:12:56,760\nAnd that's the implied site level.\n\n1553\n01:12:56,760 --> 01:13:00,140\nThe site level is where\nwe can attach a GPO and\n\n1554\n01:13:00,140 --> 01:13:03,870\nit applies to computers in\nparticular geographic region.\n\n1555\n01:13:03,870 --> 01:13:07,085\nNow, that's very similar to\nwhat I've got right here.\n\n1556\n01:13:07,085 --> 01:13:09,915\nSo here I've got Florida and Georgia.\n\n1557\n01:13:09,915 --> 01:13:11,865\nAnd you know, maybe I go and\ncreate the other states too.\n\n1558\n01:13:11,865 --> 01:13:15,945\nSo I've got all these different\nstates that I'm filtering by.\n\n1559\n01:13:15,945 --> 01:13:19,425\nWell here, I have to drag and drop\nthe machines to put them in Florida or\n\n1560\n01:13:19,425 --> 01:13:21,040\nGeorgia or whatever.\n\n1561\n01:13:21,040 --> 01:13:25,890\nBut I could go into active directory\nsites and services, and define sites.\n\n1562\n01:13:25,890 --> 01:13:29,640\nGeographic locations\nthere based on subnets.\n\n1563\n01:13:29,640 --> 01:13:32,080\nAnd now, when I bring up a new computer,\nI don't have to put it in a particular OU.\n\n1564\n01:13:32,080 --> 01:13:34,500\nThey can all be lumped in the same OU for\nall I care.\n\n1565\n01:13:34,500 --> 01:13:35,380\n>> Right.\n\n1566\n01:13:35,380 --> 01:13:38,720\n>> But when they have an IP\naddress in a certain city.\n\n1567\n01:13:38,720 --> 01:13:40,400\nThat IP address will match up with a site.\n\n1568\n01:13:40,400 --> 01:13:44,800\nAnd they'll get any GPO\nthat applies to that site.\n\n1569\n01:13:44,800 --> 01:13:46,800\nIt's a great way to handle this.\n\n1570\n01:13:46,800 --> 01:13:50,490\nExcept there's some interesting caveats\nthat are a little bit different, right.\n\n1571\n01:13:50,490 --> 01:13:55,770\nThe biggest one being, that you can\nhave more than one domain in a site.\n\n1572\n01:13:56,780 --> 01:13:59,530\nWhen I do it this way,\nthis is all in one domain.\n\n1573\n01:13:59,530 --> 01:14:01,420\nSo you would have to be\njoined to my domain,\n\n1574\n01:14:01,420 --> 01:14:02,910\nwhich is called,\nwhat did I call this thing?\n\n1575\n01:14:02,910 --> 01:14:03,590\nOh, domain.\n>> Domain.\n\n1576\n01:14:03,590 --> 01:14:04,500\n>> Very creative.\n\n1577\n01:14:04,500 --> 01:14:07,210\nSo if your computer was joined to domain,\n\n1578\n01:14:07,210 --> 01:14:11,240\nthen these are the policies that\nwould apply to you right here.\n\n1579\n01:14:11,240 --> 01:14:16,550\nIf you just happen to be in Florida, but\nnot be joined to the domain domain, right?\n\n1580\n01:14:16,550 --> 01:14:20,710\nJoined to some other domain in my forest,\nthen these policies wouldn't apply to you.\n\n1581\n01:14:20,710 --> 01:14:25,050\nBut if I wanted to apply a policy that\naffected any computer in the entire state\n\n1582\n01:14:25,050 --> 01:14:30,230\nof Florida, then regardless of domain,\nthis isn't gonna work.\n\n1583\n01:14:30,230 --> 01:14:30,890\nRight.\n\n1584\n01:14:30,890 --> 01:14:33,630\nSo if I have a laptop and\nI'm working at the home office,\n\n1585\n01:14:33,630 --> 01:14:38,230\nand I travel down to Florida,\nmy laptop Is in the home office folder.\n\n1586\n01:14:38,230 --> 01:14:39,920\nIt's not in the Florida folder.\n\n1587\n01:14:39,920 --> 01:14:42,770\nSo the Florida policies,\naren't gonna apply to me.\n\n1588\n01:14:42,770 --> 01:14:45,960\nBut if I travel to the Florida\nlocation and I get an IP\n\n1589\n01:14:45,960 --> 01:14:50,580\naddress that's on their network, now, I'm\nin their site and their site policy will.\n\n1590\n01:14:50,580 --> 01:14:53,940\nSo a site policy will apply to you based\non where you're at geographically.\n\n1591\n01:14:53,940 --> 01:14:55,280\nIt's perfect for use.\n\n1592\n01:14:55,280 --> 01:14:58,420\nSo we may not even need\nthese GPOs right here.\n\n1593\n01:14:58,420 --> 01:15:04,160\nLike Florida, Georgia, and so on, if I\nhave a good site structure defined for it.\n\n1594\n01:15:04,160 --> 01:15:08,860\nKey things to remember for the exam,\nMike if I'm a domain admin,\n\n1595\n01:15:08,860 --> 01:15:10,770\nhow many site GPOs can I create?\n\n1596\n01:15:10,770 --> 01:15:11,930\n>> Absolutely 0.\n\n1597\n01:15:11,930 --> 01:15:12,500\nRight?\n\n1598\n01:15:12,500 --> 01:15:17,000\nBecause remember, a domain admin\nhas control over his or her domain.\n\n1599\n01:15:17,000 --> 01:15:19,890\nAnd if you're linking a policy to a site,\n\n1600\n01:15:19,890 --> 01:15:22,580\nyou could potentially be\naffecting more than one domain.\n\n1601\n01:15:22,580 --> 01:15:25,640\nSo when you go into your group policy,\nconsole, sites is way down at the bottom.\n\n1602\n01:15:25,640 --> 01:15:29,120\nBut you've got to be an enterprise\nadmin to be able to work with policies\n\n1603\n01:15:29,120 --> 01:15:29,930\nat the site level.\n\n1604\n01:15:29,930 --> 01:15:32,465\nCuz now, we're talking about\neffecting more than one domain.\n\n1605\n01:15:32,465 --> 01:15:33,790\n>> Yep.\n\n1606\n01:15:33,790 --> 01:15:36,330\nBut it is easy to lose sight of,\nyou know, people sit here and\n\n1607\n01:15:36,330 --> 01:15:39,170\napply GPOs all day long\ninside of their domain.\n\n1608\n01:15:39,170 --> 01:15:42,040\nNot remembering that oh yeah,\nthere's those site level GPOs too.\n\n1609\n01:15:42,040 --> 01:15:43,160\nWe can do those.\n\n1610\n01:15:43,160 --> 01:15:44,020\nThey're pretty high level.\n\n1611\n01:15:44,020 --> 01:15:46,690\nThey're easy to override at\nthe domain level, if you want.\n\n1612\n01:15:46,690 --> 01:15:51,290\nBut really useful when you have things\nyou want to apply to a particular state.\n\n1613\n01:15:51,290 --> 01:15:53,870\nVarious states have various laws.\n\n1614\n01:15:53,870 --> 01:15:57,740\nOr accusing states, maybe it's countries,\nmay it's continents.\n\n1615\n01:15:57,740 --> 01:16:00,490\nSo you can define sites that are wrapped\n\n1616\n01:16:00,490 --> 01:16:03,720\naround whatever geographic regions\nyou need to separate things on.\n\n1617\n01:16:03,720 --> 01:16:06,620\nAnd a good site design\nis really important.\n\n1618\n01:16:06,620 --> 01:16:09,420\nIt's another thing that's easy\nto correct down the road.\n\n1619\n01:16:09,420 --> 01:16:13,030\nAnd you'll hear a lot of people say,\nthat you should only define sites, if\n\n1620\n01:16:13,030 --> 01:16:15,670\nyou've got domain controllers in the site,\n>> Right.\n\n1621\n01:16:15,670 --> 01:16:16,925\n>> And that's not true, right.\n\n1622\n01:16:16,925 --> 01:16:17,690\n>> Mm-hm.\n\n1623\n01:16:17,690 --> 01:16:19,020\n>> That is a piece of it,\n>> Part of it.\n\n1624\n01:16:19,020 --> 01:16:22,630\n>> A site helps to optimize replication\nbetween geographic regions.\n\n1625\n01:16:22,630 --> 01:16:25,750\nSo normally, you're going to have at\nleast one domain controller in a site.\n\n1626\n01:16:25,750 --> 01:16:29,020\nBut there is one scenario, where you might\nhave a site with no domain controllers.\n\n1627\n01:16:29,020 --> 01:16:32,680\nAnd that's where you're using\nthe site to manage group policies.\n\n1628\n01:16:32,680 --> 01:16:35,560\nNot necessarily replication and\nauthentication traffic, but\n\n1629\n01:16:35,560 --> 01:16:38,310\nyou want these policies\nto apply to this country.\n\n1630\n01:16:38,310 --> 01:16:40,790\nWell, you don't want to stick a D.C.\nin that country.\n\n1631\n01:16:40,790 --> 01:16:42,170\nRight?\nMaybe you just don't have enough\n\n1632\n01:16:42,170 --> 01:16:43,050\nemployees there.\n\n1633\n01:16:43,050 --> 01:16:44,510\nSo that's where you can benefit from that.\n\n1634\n01:16:44,510 --> 01:16:46,280\nAnd the IP address subnets,\n\n1635\n01:16:46,280 --> 01:16:48,960\nthat's what you're using to\ncatalog who's in what site.\n\n1636\n01:16:51,410 --> 01:16:53,940\nWell, I know we've got a handful of\nother things to talk about Mike, but\n\n1637\n01:16:53,940 --> 01:16:55,430\nwhy don't we stop and take a break here?\n\n1638\n01:16:55,430 --> 01:16:56,570\n>> Okay.\n>> And when we get back,\n\n1639\n01:16:56,570 --> 01:16:58,060\nwe'll pick back up with our final segment.\n\n1640\n01:16:58,060 --> 01:17:00,210\nWe've got a few other\npieces to talk about.\n\n1641\n01:17:00,210 --> 01:17:03,420\nAnd then, we'll wind things down\ntalking about permissions a little bit.\n\n1642\n01:17:03,420 --> 01:17:05,050\nSo, stay tuned.\n\n1643\n01:17:05,050 --> 01:17:05,919\nWe'll be back after this.\n\n1644\n01:17:05,919 --> 01:17:08,967\n[MUSIC]\n\n1645\n01:17:08,967 --> 01:17:15,021\n[SOUND] All right, welcome back everybody.\n\n1646\n01:17:15,021 --> 01:17:18,800\nSo we got a little bit of a grab bag\nof things here for the last segment.\n\n1647\n01:17:18,800 --> 01:17:22,650\nWe're gonna take a look at permissions and\na few other pieces, but\n\n1648\n01:17:22,650 --> 01:17:25,720\njust continuing down our laundry list.\n\n1649\n01:17:25,720 --> 01:17:29,630\nThe very next one is slow link processing.\n\n1650\n01:17:29,630 --> 01:17:30,240\n>> Your favorite.\n\n1651\n01:17:30,240 --> 01:17:34,540\n[LAUGH] It's something that a lot of\nus don't even worry about anymore.\n\n1652\n01:17:36,030 --> 01:17:37,950\nBut it's still somewhat relevant.\n\n1653\n01:17:37,950 --> 01:17:40,230\nLet's go back to your example earlier of,\n\n1654\n01:17:40,230 --> 01:17:44,160\nmaybe we've written a policy,\nthat installs Microsoft Office.\n\n1655\n01:17:44,160 --> 01:17:46,040\nSo you get a new computer at the office,\n\n1656\n01:17:46,040 --> 01:17:48,970\na brand new laptop,\nyou hook it up on your network.\n\n1657\n01:17:48,970 --> 01:17:50,840\nYou join it to the domain.\n\n1658\n01:17:50,840 --> 01:17:53,520\nAnd it automatically installs\nMicrosoft Office on there, works great.\n\n1659\n01:17:53,520 --> 01:17:54,380\n>> Beautiful, love it.\n\n1660\n01:17:55,750 --> 01:18:01,290\n>> What if however, somebody gets that\nnew laptop, we join it to the domain,\n\n1661\n01:18:01,290 --> 01:18:02,520\nbut we're in a bit of a hurry, right?\n\n1662\n01:18:02,520 --> 01:18:04,520\nSo we just join it reall quick and\ntake it off the domain.\n\n1663\n01:18:04,520 --> 01:18:06,940\nWe give it to that user and\nwe say here you go, good luck.\n\n1664\n01:18:06,940 --> 01:18:09,410\nAnd the user goes out in the field.\n\n1665\n01:18:09,410 --> 01:18:12,400\nAnd they're on one of those\ncellular wireless cards.\n\n1666\n01:18:12,400 --> 01:18:13,550\nThey jump on the wireless network.\n\n1667\n01:18:14,720 --> 01:18:16,860\nVP that into your office.\n\n1668\n01:18:16,860 --> 01:18:20,130\nAnd then they call you and say,\nwhat is wrong with the cellular card?\n\n1669\n01:18:20,130 --> 01:18:22,050\nIt is so slow.\n\n1670\n01:18:22,050 --> 01:18:24,940\nWell, the system might actually\nbe installing Microsoft Office\n\n1671\n01:18:24,940 --> 01:18:28,030\nover the cellular wireless\ncard over a VPN tunnel.\n\n1672\n01:18:28,030 --> 01:18:28,575\nThat would be bad.\n\n1673\n01:18:28,575 --> 01:18:29,390\n>> Mm-hm.\n\n1674\n01:18:29,390 --> 01:18:32,970\n>> So there's certain group policy albums\nthat we don't want to apply when people\n\n1675\n01:18:32,970 --> 01:18:34,520\nare on slow links.\n\n1676\n01:18:34,520 --> 01:18:36,600\nNow if you work in\na corporate environment,\n\n1677\n01:18:36,600 --> 01:18:38,580\nwhere you control all of the machines,\nthis is not an issue.\n\n1678\n01:18:38,580 --> 01:18:40,610\nAnd you don't worry about it, and\nyou don't even think about it.\n\n1679\n01:18:40,610 --> 01:18:44,450\nBut if you've got remote users that are\nusing systems and you've got GPO's that do\n\n1680\n01:18:44,450 --> 01:18:47,990\nbig, sweeping things, like copy\nlarge files and things like that.\n\n1681\n01:18:47,990 --> 01:18:50,720\nYou don't want those to\napply while they're remote.\n\n1682\n01:18:50,720 --> 01:18:54,420\nAnd so, you can use slow link\nprocessing to prevent that.\n\n1683\n01:18:54,420 --> 01:18:56,880\nThe default value is 500 kilobytes.\n\n1684\n01:18:56,880 --> 01:18:57,530\nSo 500 k per second.\n\n1685\n01:18:57,530 --> 01:18:59,360\nActually it's kilobits, isn't it?\n\n1686\n01:18:59,360 --> 01:19:00,000\n>> Kilobits.\n\n1687\n01:19:00,000 --> 01:19:01,560\n>> Yeah, it's kilobits per second.\n\n1688\n01:19:01,560 --> 01:19:05,190\nSo when somebody connects, Windows gauges\nthe amount of bandwidth that it has to\n\n1689\n01:19:05,190 --> 01:19:06,430\nconnect up to that domain controller.\n\n1690\n01:19:06,430 --> 01:19:10,480\nAnd it says, all right, if I'm on\na line that is below 500 k in size,\n\n1691\n01:19:10,480 --> 01:19:13,310\nthen I'm going to take a pass\non installing software.\n\n1692\n01:19:13,310 --> 01:19:16,260\nI'm going to take a pass on some of\nthose high bandwidth things, and\n\n1693\n01:19:16,260 --> 01:19:17,220\nit does that automatically.\n\n1694\n01:19:17,220 --> 01:19:18,350\nThat's the default setting.\n\n1695\n01:19:18,350 --> 01:19:21,610\n>> Some of that software installation\nfolder redirection is another\n\n1696\n01:19:21,610 --> 01:19:22,430\none that it skips.\n\n1697\n01:19:22,430 --> 01:19:26,280\nAnd some of those like you said,\nbandwidth intensive types of settings.\n\n1698\n01:19:26,280 --> 01:19:29,810\nCertain ones are always going to apply,\nwhether it's a slow link or not.\n\n1699\n01:19:29,810 --> 01:19:31,730\nYou're administrative\ntemplates will always apply.\n\n1700\n01:19:31,730 --> 01:19:33,320\nYou can't change that.\n\n1701\n01:19:33,320 --> 01:19:36,490\nAnd your security settings will always\napply and you can't change that.\n\n1702\n01:19:36,490 --> 01:19:37,620\nThe other ones.\n\n1703\n01:19:37,620 --> 01:19:40,780\nYou know, they're either going to sync or\nthey're not.\n\n1704\n01:19:40,780 --> 01:19:43,670\nAnd you can change it\none of two ways really.\n\n1705\n01:19:43,670 --> 01:19:46,280\nYou can change what they\nwould consider a slow link.\n\n1706\n01:19:46,280 --> 01:19:48,240\nYou can actually go into the GPO.\n\n1707\n01:19:48,240 --> 01:19:50,590\nAnd say, all right, you know what?\n\n1708\n01:19:50,590 --> 01:19:54,140\nAs long as they've got 1.544 megabytes\nper second, we're okay with that.\n\n1709\n01:19:54,140 --> 01:19:56,190\nSo you can change what a slow link is.\n\n1710\n01:19:56,190 --> 01:19:59,880\nYou can also change,\nhow the CSEs handle a slow link.\n\n1711\n01:19:59,880 --> 01:20:03,010\nNormally, folder redirection\ndoes not occur over a slow link.\n\n1712\n01:20:03,010 --> 01:20:03,890\nI could go in there and force it.\n\n1713\n01:20:03,890 --> 01:20:04,740\nI could say you know what?\n\n1714\n01:20:04,740 --> 01:20:06,956\nI don't care.\nSlow link or not, let's do it.\n\n1715\n01:20:06,956 --> 01:20:08,216\nSo you can change that in one of two ways.\n\n1716\n01:20:08,216 --> 01:20:10,153\nBut you can't turn off\nadministrative templates and\n\n1717\n01:20:10,153 --> 01:20:11,710\nyou can't turn off the security setting.\n\n1718\n01:20:11,710 --> 01:20:12,543\n>> Yep.\n\n1719\n01:20:12,543 --> 01:20:16,302\nSo when it comes to our plan,\nthere's not much to plan on.\n\n1720\n01:20:16,302 --> 01:20:19,730\nWe planned for\nwhat we consider to be a slow link.\n\n1721\n01:20:19,730 --> 01:20:21,590\nOr whether we care about\nslow links at all.\n\n1722\n01:20:21,590 --> 01:20:22,098\nRight?\nAnd\n\n1723\n01:20:22,098 --> 01:20:24,049\nwe might change slow\nlink to be 1 kilobit and\n\n1724\n01:20:24,049 --> 01:20:26,599\nthen just know that things\nare gonna apply to everybody.\n\n1725\n01:20:26,599 --> 01:20:29,634\nSo you could manipulate those values\na little bit to change it to suit\n\n1726\n01:20:29,634 --> 01:20:30,230\nyour needs.\n\n1727\n01:20:31,910 --> 01:20:33,990\nSo that's really all there is on soloing.\n\n1728\n01:20:33,990 --> 01:20:35,390\nNot too much there.\n\n1729\n01:20:35,390 --> 01:20:38,930\nAnother thing they call out is\nadvanced group policy management.\n\n1730\n01:20:38,930 --> 01:20:40,450\nNow you might be thinking to yourself,\n\n1731\n01:20:40,450 --> 01:20:42,810\nwell this group policy stuff\nis already pretty advanced.\n\n1732\n01:20:42,810 --> 01:20:44,430\nHow much further are we gonna go?\n\n1733\n01:20:44,430 --> 01:20:46,655\n>> Right.\nWell by advanced group policy management,\n\n1734\n01:20:46,655 --> 01:20:48,500\nthey're actually referring to a utility.\n\n1735\n01:20:48,500 --> 01:20:50,890\nThere is a software package\nfrom Microsoft called\n\n1736\n01:20:50,890 --> 01:20:53,490\nthe Advanced Group Policy\nManagement Console.\n\n1737\n01:20:53,490 --> 01:20:57,370\nAnd it's very, very similar to the GPMC,\nthe Group Policy Management Console,\n\n1738\n01:20:57,370 --> 01:20:59,530\nthat we all know and love, right?\n\n1739\n01:20:59,530 --> 01:21:01,300\nThat's our favorite tool, so\n\n1740\n01:21:01,300 --> 01:21:05,030\nif you work with GPOs you'll\nspend a ton of time in the GPMC.\n\n1741\n01:21:05,030 --> 01:21:06,720\nThere's some problems with the GPMC.\n\n1742\n01:21:07,940 --> 01:21:10,760\nProblem number one is if you have\n\n1743\n01:21:10,760 --> 01:21:15,200\ntwo people editing the same GPO\nat the same time, do you know it?\n\n1744\n01:21:15,200 --> 01:21:15,790\nNo!\n>> Right, right.\n\n1745\n01:21:15,790 --> 01:21:18,490\n>> You have no idea if somebody else\nis editing the same GPO as you.\n\n1746\n01:21:18,490 --> 01:21:19,970\nYou don't know.\n\n1747\n01:21:19,970 --> 01:21:24,150\nProblem number two, if somebody makes\na change, do you know who did it?\n\n1748\n01:21:24,150 --> 01:21:24,830\n>> Nope.\n\n1749\n01:21:24,830 --> 01:21:26,530\n>> No,\nthere's no change control whatsoever,\n\n1750\n01:21:26,530 --> 01:21:28,580\nyou don't know who made a change,\nwhen they made the change,\n\n1751\n01:21:28,580 --> 01:21:31,410\nwhat they changed, you don't know\nany of that stuff, all right?\n\n1752\n01:21:31,410 --> 01:21:35,150\nProblem number three,\nif you make a mistake in a group policy,\n\n1753\n01:21:35,150 --> 01:21:36,290\ncan you undo your change?\n\n1754\n01:21:36,290 --> 01:21:41,130\nThere's no undo, when you make a change,\nit takes effect right away [COUGH].\n\n1755\n01:21:41,130 --> 01:21:45,810\nSo there's a lot of areas where the group\npolicy management console is lacking.\n\n1756\n01:21:45,810 --> 01:21:46,360\nRight.\n\n1757\n01:21:46,360 --> 01:21:48,130\nBut for most of us, it's fine.\n\n1758\n01:21:48,130 --> 01:21:49,720\nIt does its job, right.\n\n1759\n01:21:49,720 --> 01:21:51,420\nAnd that's it.\n\n1760\n01:21:51,420 --> 01:21:55,020\nThe advanced group policy\nmanagement console adds\n\n1761\n01:21:55,020 --> 01:21:58,590\nteam functionality to\nthe group policy editor.\n\n1762\n01:21:58,590 --> 01:21:59,490\nRight.\n\n1763\n01:21:59,490 --> 01:22:00,810\nIt's a utility.\n\n1764\n01:22:00,810 --> 01:22:02,260\nYou can't download it form Microsoft.\n\n1765\n01:22:02,260 --> 01:22:04,388\nOr at least I'm pretty certain you can't,\n\n1766\n01:22:04,388 --> 01:22:06,700\nup until the last time\nI checked you couldn't.\n\n1767\n01:22:06,700 --> 01:22:08,080\n>> Yeah, not individually you mean?\n\n1768\n01:22:08,080 --> 01:22:13,003\n>> Right, it's a part of the Microsoft\nDesktop Optimization Pack, the MDOP.\n\n1769\n01:22:13,003 --> 01:22:16,957\nSo, if you are a volume licensed\npartner with Microsoft, so,\n\n1770\n01:22:16,957 --> 01:22:21,285\nif you have an enterprise agreement or\nany of the EAs then you can go and\n\n1771\n01:22:21,285 --> 01:22:24,513\ndownload the MDOP,\nit's part of your agreement.\n\n1772\n01:22:24,513 --> 01:22:27,690\nAnd the MDOP,\nits got a suite of utilities in it, right.\n\n1773\n01:22:27,690 --> 01:22:30,670\nThere's the disaster and\nrecovery toolkit and a few other things.\n\n1774\n01:22:30,670 --> 01:22:34,250\nBut the advanced group policy unit\nmanagement is one of those tools and\n\n1775\n01:22:34,250 --> 01:22:37,200\nwhat it is is a modified\nversion of the GPMC that\n\n1776\n01:22:38,650 --> 01:22:40,730\nadds some really cool things, all right.\n\n1777\n01:22:40,730 --> 01:22:43,590\nFirst off, it adds change tracking.\n\n1778\n01:22:43,590 --> 01:22:46,900\nYou can see who made what changes when.\n\n1779\n01:22:46,900 --> 01:22:49,060\nAnd you can see exactly what they changed.\n\n1780\n01:22:49,060 --> 01:22:53,120\nAnd it maintains versions of the GPOs.\n\n1781\n01:22:53,120 --> 01:22:54,990\nSo if you see a problem you can roll back.\n\n1782\n01:22:54,990 --> 01:22:57,010\nAnd you can say this problem\nwasn't here yesterday.\n\n1783\n01:22:57,010 --> 01:23:01,010\nLet me just quick roll back to yesterday's\nversion of the GPO, problem solved.\n\n1784\n01:23:01,010 --> 01:23:03,330\nSave the day,\ngo kick your feet up on the desk.\n\n1785\n01:23:03,330 --> 01:23:05,740\nSo that's kind of a nice thing to have.\n\n1786\n01:23:05,740 --> 01:23:10,210\nMultiple versions, change tracking,\nyou can see when someone else is editing\n\n1787\n01:23:10,210 --> 01:23:14,100\na GPO, so you know if it's checked out and\nyou can check them out yourself, so\n\n1788\n01:23:14,100 --> 01:23:15,840\nyou know other people aren't messing\nwith it and when you're done,\n\n1789\n01:23:15,840 --> 01:23:17,080\nyou check it back in.\n\n1790\n01:23:17,080 --> 01:23:19,190\nSo you get that team functionality.\n\n1791\n01:23:19,190 --> 01:23:21,120\nYou also get change control.\n\n1792\n01:23:21,120 --> 01:23:25,810\nYou get it where somebody can\nmodify a GPO but not publish it.\n\n1793\n01:23:25,810 --> 01:23:28,040\nAnd then it has to go for approval, and\n\n1794\n01:23:28,040 --> 01:23:31,710\nwhoever's on the approving board can look\nat and then approve it and publish it.\n\n1795\n01:23:31,710 --> 01:23:37,320\nSo it separates out the editing and\npublishing roles of modifying a GPO.\n\n1796\n01:23:37,320 --> 01:23:38,990\nAll right, so\n\n1797\n01:23:38,990 --> 01:23:43,070\nthat starts to solve a lot of the problems\nthat we had with the regular GPMC.\n\n1798\n01:23:43,070 --> 01:23:46,570\nAnd I say problems, in a small shop\nthose probably aren't problems at all.\n\n1799\n01:23:46,570 --> 01:23:47,530\n>> Yeah, not really.\n\n1800\n01:23:47,530 --> 01:23:48,715\n>> But in an enterprise environment.\n\n1801\n01:23:48,715 --> 01:23:52,989\nThe more network admins you have,\nthe bigger a problem this becomes,\n\n1802\n01:23:52,989 --> 01:23:55,460\nthe AGMP solves that, or AGPM, sorry.\n\n1803\n01:23:55,460 --> 01:23:56,600\n>> Yep.\n>> Get my acronym right.\n\n1804\n01:23:56,600 --> 01:23:59,827\n>> [LAUGH]\n>> So, when you're planning and designing,\n\n1805\n01:23:59,827 --> 01:24:04,391\nif you know there's gonna be multiple\nusers working inside of group policies,\n\n1806\n01:24:04,391 --> 01:24:07,251\nediting the settings,\nmaking changes and so on,\n\n1807\n01:24:07,251 --> 01:24:11,830\nyou may need to look into doing\nadvanced group policy management.\n\n1808\n01:24:11,830 --> 01:24:13,590\nBut if you're not a volume\nlicensed partner,\n\n1809\n01:24:14,710 --> 01:24:15,620\nit shouldn't even be on your radar.\n\n1810\n01:24:15,620 --> 01:24:17,070\nYou don't have access to that product.\n\n1811\n01:24:17,070 --> 01:24:19,520\nYou can't just go to Microsoft and\ndownload it.\n\n1812\n01:24:19,520 --> 01:24:20,593\nUnless they've had a big change of heart.\n\n1813\n01:24:20,593 --> 01:24:21,422\nBut I'm pretty certain they haven't.\n\n1814\n01:24:21,422 --> 01:24:23,050\n>> Yeah, probably not [LAUGH].\n\n1815\n01:24:23,050 --> 01:24:25,530\n>> All right, so that's the AGMP.\n\n1816\n01:24:25,530 --> 01:24:27,450\nThat's basically it.\n\n1817\n01:24:27,450 --> 01:24:30,450\nThe only other group policy\nthing we need to talk about\n\n1818\n01:24:30,450 --> 01:24:33,180\nis group policy caching, right?\n\n1819\n01:24:33,180 --> 01:24:37,430\nWhen you log in to an active directory\ndomain your computer reaches out, and\n\n1820\n01:24:37,430 --> 01:24:38,240\nit builds a list.\n\n1821\n01:24:38,240 --> 01:24:39,950\nAnd I think you said this earlier,\nright, Mike?\n\n1822\n01:24:39,950 --> 01:24:42,750\nSo, it builds a list of all the group\npolicies you're supposed to apply.\n\n1823\n01:24:42,750 --> 01:24:46,090\nIt combines them into one super policy,\nand then applies it.\n\n1824\n01:24:46,090 --> 01:24:49,540\nWell, what happens if you unplug\nyour network cable and reboot?\n\n1825\n01:24:49,540 --> 01:24:51,470\nDo all the policies\njust revert themselves?\n\n1826\n01:24:51,470 --> 01:24:52,930\n>> Hey,\nnow I don't have any of those settings.\n\n1827\n01:24:52,930 --> 01:24:53,810\nI can do what I want.\n\n1828\n01:24:53,810 --> 01:24:54,446\nSweet.\n>> Time to install some\n\n1829\n01:24:54,446 --> 01:24:55,052\nMinesweeper and Freecell.\n\n1830\n01:24:55,052 --> 01:24:56,785\n>> Yeah.\n\n1831\n01:24:56,785 --> 01:24:57,730\n[LAUGH]\n>> Well.\n\n1832\n01:24:57,730 --> 01:24:58,310\n>> No.\n\n1833\n01:24:58,310 --> 01:24:58,905\n>> Fortunately, no.\n\n1834\n01:24:58,905 --> 01:24:59,730\n>> [LAUGH]\n>> Yep.\n\n1835\n01:24:59,730 --> 01:25:01,720\nYour system will cache the GPO.\n\n1836\n01:25:01,720 --> 01:25:03,800\nSo it'll store a copy of it.\n\n1837\n01:25:03,800 --> 01:25:07,900\nAnd then that way when you log back in or\nreboot or your network connectivity\n\n1838\n01:25:07,900 --> 01:25:10,660\nis gone, it'll continue to\nmaintain those settings for you.\n\n1839\n01:25:10,660 --> 01:25:13,038\nAnd that's good and bad.\n\n1840\n01:25:13,038 --> 01:25:17,000\nIt's good cuz you know the system\nwill be secure if you push\n\n1841\n01:25:17,000 --> 01:25:18,630\nsecurity settings to it.\n\n1842\n01:25:18,630 --> 01:25:21,800\nIt's bad if you've made\nchanges in production and\n\n1843\n01:25:21,800 --> 01:25:23,720\nthe client hasn't seen it yet.\n\n1844\n01:25:23,720 --> 01:25:27,310\nYou might have a client who is still\noperating in a weaker state than what you\n\n1845\n01:25:27,310 --> 01:25:29,440\nmay be enforcing now\nin your domain policy.\n\n1846\n01:25:29,440 --> 01:25:32,730\nAnd, if they don't get proper\nconnectivity, they might not ever update.\n\n1847\n01:25:32,730 --> 01:25:36,340\nSo, like, if they've overridden their DNS\nservers, well, they can still connect to\n\n1848\n01:25:36,340 --> 01:25:39,110\nyour network and and\nmaybe browse to file servers and stuff.\n\n1849\n01:25:39,110 --> 01:25:42,170\nBut they're not finding domain controllers\nto be able to update their GPOs so\n\n1850\n01:25:42,170 --> 01:25:46,090\nthey're still acting under these older\nGPOs, and that can be problematic.\n\n1851\n01:25:46,090 --> 01:25:48,520\n>> It can mask some connectivity\nproblems either, right?\n\n1852\n01:25:48,520 --> 01:25:50,030\nBecause we've got our\ncached credentials so\n\n1853\n01:25:50,030 --> 01:25:54,490\nwe can still log in, we've got cached GPOs\napplying so it might not even realize at\n\n1854\n01:25:54,490 --> 01:25:56,480\nfirst that I'm having some\nnetwork connectivity issues.\n\n1855\n01:25:57,560 --> 01:25:59,670\n>> And then they launch Outlook.\n\n1856\n01:25:59,670 --> 01:26:00,680\nAnd it doesn't connect to a server.\n\n1857\n01:26:00,680 --> 01:26:02,302\nAnd they call and\nthey're like Outlook is broken.\n\n1858\n01:26:02,302 --> 01:26:03,632\nAnd it's like it's not actually Outlook.\n\n1859\n01:26:03,632 --> 01:26:05,600\nIt's your whole computer.\n\n1860\n01:26:05,600 --> 01:26:07,190\nYou're not on the network.\n\n1861\n01:26:07,190 --> 01:26:09,070\nAnd users don't see that, right.\n\n1862\n01:26:09,070 --> 01:26:10,000\n>> Exactly.\n\n1863\n01:26:10,000 --> 01:26:11,870\n>> Our precious low end users.\n\n1864\n01:26:11,870 --> 01:26:12,410\nAll right.\n\n1865\n01:26:12,410 --> 01:26:16,530\nSo as far as group policy objects,\nthese are all the little bells and\n\n1866\n01:26:16,530 --> 01:26:20,950\nwhistles we need to plan for when we\ndesign our active directory structure.\n\n1867\n01:26:20,950 --> 01:26:26,320\nWhen it comes to arranging your OUs,\nthere's more than one right answer.\n\n1868\n01:26:26,320 --> 01:26:27,000\n>> Right.\n\n1869\n01:26:27,000 --> 01:26:30,230\n>> So on the exam,\nyou're gonna see a lot of questions about\n\n1870\n01:26:30,230 --> 01:26:33,430\nif you wanna deploy this policy,\nthis policy, and this policy,\n\n1871\n01:26:33,430 --> 01:26:38,150\nwhat's the best OU structure to\naccommodate that need, right?\n\n1872\n01:26:38,150 --> 01:26:40,380\nThe one with the least\nadministrative effort, right?\n\n1873\n01:26:40,380 --> 01:26:42,450\n>> Exactly.\n>> That's what you've gotta keep in mind.\n\n1874\n01:26:42,450 --> 01:26:44,300\nWhat's gonna be the best structure.\n\n1875\n01:26:44,300 --> 01:26:47,450\n>> If I can link that policy once,\nversus linking that policy 20 times,\n\n1876\n01:26:47,450 --> 01:26:49,230\nI wanna link it once.\n\n1877\n01:26:49,230 --> 01:26:52,440\n>> Yeah, and that may mean\nrearranging your OUs for it, right?\n\n1878\n01:26:52,440 --> 01:26:56,720\nAnd don't be afraid if your OU structure\ndoes not match your company structure.\n\n1879\n01:26:56,720 --> 01:26:57,763\nThey don't have to, right?\n\n1880\n01:26:57,763 --> 01:27:01,036\nIt's really being built\naround how you apply policy,\n\n1881\n01:27:01,036 --> 01:27:03,177\nit's not how your employees work.\n\n1882\n01:27:03,177 --> 01:27:05,740\n>> Exactly.\n\n1883\n01:27:05,740 --> 01:27:08,770\n>> The very last section for\nthe objectives on this one for\n\n1884\n01:27:08,770 --> 01:27:12,300\nour logical design,\nis active directory permissions and\n\n1885\n01:27:12,300 --> 01:27:15,830\nhow we set our permissions\nmodel inside of Windows.\n\n1886\n01:27:16,870 --> 01:27:20,083\nLesson number one, I know we've said\nthis in more than one episode, and\n\n1887\n01:27:20,083 --> 01:27:23,666\nyou've got your MCSA at the point, or you\nshould have your MCSA at this point, so\n\n1888\n01:27:23,666 --> 01:27:26,588\nyou've definitely seen it,\nis the rule of thumb is very simple.\n\n1889\n01:27:26,588 --> 01:27:33,425\nThere's an acronym that Microsoft has\nwhich is IGUDL, wait, DLA, there we go.\n\n1890\n01:27:33,425 --> 01:27:34,269\n[LAUGH]\n>> I know,\n\n1891\n01:27:34,269 --> 01:27:37,020\ncuz we were both talking about it\nearlier and we got the old model.\n\n1892\n01:27:37,020 --> 01:27:38,685\nThey changes the letters\naround a little bit.\n\n1893\n01:27:38,685 --> 01:27:40,572\nIt's still the exact same thing.\n\n1894\n01:27:40,572 --> 01:27:41,790\nBut identities,\n\n1895\n01:27:41,790 --> 01:27:47,070\nit used be accounts are now identities and\nthen, what, DLA and DLP.\n\n1896\n01:27:47,070 --> 01:27:49,930\nSo, permissions are now access.\n\n1897\n01:27:51,220 --> 01:27:53,250\n>> So, it was,\nhere I'll just write them out,\n\n1898\n01:27:53,250 --> 01:27:56,210\nboth here just because some\nof our users are old school.\n\n1899\n01:27:56,210 --> 01:28:01,290\nSo it used to be that your user\naccounts went into global groups.\n\n1900\n01:28:01,290 --> 01:28:05,445\nYour global groups went\ninto universal groups.\n\n1901\n01:28:05,445 --> 01:28:06,115\nRight.\n\n1902\n01:28:06,115 --> 01:28:07,294\nUnless you were in a single domain.\n\n1903\n01:28:07,294 --> 01:28:09,000\nYou might skip the universals.\n\n1904\n01:28:09,000 --> 01:28:13,694\nAnd then the universal groups who\nwould go into domain local groups.\n\n1905\n01:28:13,694 --> 01:28:16,760\nAnd it was the domain local groups\nthat actually got the permissions\n\n1906\n01:28:16,760 --> 01:28:17,630\nassigned to them.\n\n1907\n01:28:17,630 --> 01:28:18,810\nThat was the old model, right?\n\n1908\n01:28:18,810 --> 01:28:23,069\nAnd so for me, I was telling Mike\nbefore the show, for 10 years,\n\n1909\n01:28:23,069 --> 01:28:25,597\nMicrosoft beat in AGUDLP into my head.\n\n1910\n01:28:25,597 --> 01:28:32,540\nRIght?\nWell now it is IGU D, A, all right?\n\n1911\n01:28:32,540 --> 01:28:36,130\nSo, it's very similar, and what I'm gonna\ndo is I'm just gonna copy and paste and\n\n1912\n01:28:36,130 --> 01:28:37,350\nmodify cuz I'm lazy.\n\n1913\n01:28:37,350 --> 01:28:38,640\nI'm a lazy typer.\n\n1914\n01:28:38,640 --> 01:28:39,520\nThere we go.\n\n1915\n01:28:39,520 --> 01:28:42,485\nSo, accounts aren't accounts anymore.\n\n1916\n01:28:42,485 --> 01:28:45,795\nNow their identities, all right?\n\n1917\n01:28:45,795 --> 01:28:47,185\nWhy is that?\n\n1918\n01:28:47,185 --> 01:28:51,575\nWell, thanks to Active Directory Federated\nServices, you might have users getting\n\n1919\n01:28:51,575 --> 01:28:56,015\ntokens for authentication onto your system\nthat don't actually have a user account.\n\n1920\n01:28:56,015 --> 01:29:00,495\nSo an identity can refer to an external\nuser, not just an internal user\n\n1921\n01:29:00,495 --> 01:29:02,870\nwhen you start bringing in\nthings like Federated Services.\n\n1922\n01:29:02,870 --> 01:29:05,150\nSo that's why they updated\nto the identities.\n\n1923\n01:29:05,150 --> 01:29:10,390\nYour identities go into Global Groups,\nand your identities could also be other\n\n1924\n01:29:10,390 --> 01:29:13,840\ngroups or they could be computer accounts,\nall right?\n\n1925\n01:29:13,840 --> 01:29:14,960\nThose go into Global Groups.\n\n1926\n01:29:14,960 --> 01:29:18,110\nGlobal groups go into universal,\nuniversal goes into domain local, and\n\n1927\n01:29:18,110 --> 01:29:22,930\ndomain local groups get access, right,\nso they changed permissions to be\n\n1928\n01:29:22,930 --> 01:29:27,280\naccess because we might not be giving them\npermissions to access a file or a folder.\n\n1929\n01:29:27,280 --> 01:29:30,070\nWe might be giving them\npermission to VPN in or\n\n1930\n01:29:30,070 --> 01:29:32,580\npermission to log into a Web app, right.\n\n1931\n01:29:32,580 --> 01:29:34,650\nNot necessarily access to a file.\n\n1932\n01:29:34,650 --> 01:29:37,330\nSo they're just updating it\nto reflect some of the newer\n\n1933\n01:29:37,330 --> 01:29:39,230\ntechnologies that are out there.\n\n1934\n01:29:39,230 --> 01:29:43,530\nBut this is the model right here so\nany time you see an exam question\n\n1935\n01:29:43,530 --> 01:29:48,080\nthat's talking about group structure,\nit really boils down to this.\n\n1936\n01:29:48,080 --> 01:29:53,090\nThe Global Group will normally correspond\nto your business decisions, okay.\n\n1937\n01:29:53,090 --> 01:29:56,080\nSo the jobs that people perform.\n\n1938\n01:29:56,080 --> 01:30:00,050\nYou might have an accountant's Global\nGroup, or a sales people Global Group,\n\n1939\n01:30:00,050 --> 01:30:02,150\na marketing department Global Group,\nright.\n\n1940\n01:30:02,150 --> 01:30:07,148\nThat's the type of job they perform,\ntheir role within the company.\n\n1941\n01:30:07,148 --> 01:30:09,120\n>> I like to think of it as roles really,\n\n1942\n01:30:09,120 --> 01:30:12,490\nit's all the people that are going to\nneed the same types of permissions.\n\n1943\n01:30:12,490 --> 01:30:14,010\nI have fifty sales people,\n\n1944\n01:30:14,010 --> 01:30:16,590\nthey all need the same level of\naccess to different resources.\n\n1945\n01:30:16,590 --> 01:30:17,560\nI'm not going to do that fifty times,\n\n1946\n01:30:17,560 --> 01:30:20,140\nput them in a group,\ngather them all up, treat them as one.\n\n1947\n01:30:21,260 --> 01:30:27,370\n>> Versus the domain local group which\nreflects the access they require.\n\n1948\n01:30:28,630 --> 01:30:32,550\nSo if I want somebody to have\naccess to the sales floor printer,\n\n1949\n01:30:32,550 --> 01:30:35,980\nI might create a group called\naccess to the sales floor printer.\n\n1950\n01:30:35,980 --> 01:30:38,090\nIt's a long name, but\nit really makes sense, right?\n\n1951\n01:30:38,090 --> 01:30:39,500\nOr printer access.\n\n1952\n01:30:39,500 --> 01:30:44,300\nSo, I could take my sales\npeople Global Group, and\n\n1953\n01:30:44,300 --> 01:30:48,920\nI could put that Global Group in\nthe printer access domain local group.\n\n1954\n01:30:48,920 --> 01:30:50,512\n>> It seems like an extra step, but\n\n1955\n01:30:50,512 --> 01:30:54,580\nmy salespeople aren't the only ones\nthat need access to that printer, right?\n\n1956\n01:30:54,580 --> 01:30:58,590\nSo, if I've got another Global Group with\nall of my marketing people in there,\n\n1957\n01:30:58,590 --> 01:31:01,880\nit's easy now, just to take that marketing\ngroup, dump it into that domain local\n\n1958\n01:31:01,880 --> 01:31:04,080\ngroup, and now they can print\nto that printer as well.\n\n1959\n01:31:04,080 --> 01:31:08,200\nBut just, sometimes it does seem like\nan extra step initially, but you'll\n\n1960\n01:31:08,200 --> 01:31:12,680\nfind that the scalability and the ease of\nmanagement is gonna be much, much better.\n\n1961\n01:31:13,960 --> 01:31:18,870\nAll right, so if I have printer access and\n\n1962\n01:31:18,870 --> 01:31:22,780\nthen access there would be\npermissions on sales floor printer.\n\n1963\n01:31:22,780 --> 01:31:23,530\nAll right.\n\n1964\n01:31:23,530 --> 01:31:27,080\nSo here I've got Bob Smith\nwho is a sales person.\n\n1965\n01:31:27,080 --> 01:31:31,048\nAnd Bob Smith gets put into\nthese sales people Global Group.\n\n1966\n01:31:31,048 --> 01:31:34,069\nAnd the sales people Global Group\ncan get put into the printer access\n\n1967\n01:31:34,069 --> 01:31:35,570\ndomain local group.\n\n1968\n01:31:35,570 --> 01:31:39,350\nAs well as the marketing people might\ngo into that domain local group\n\n1969\n01:31:39,350 --> 01:31:40,340\ntoo and so on.\n\n1970\n01:31:40,340 --> 01:31:42,640\nI might have more then one\ngroup that's allowed to print.\n\n1971\n01:31:42,640 --> 01:31:46,280\nThey go into printer access and when I\npull up the properties of the printer and\n\n1972\n01:31:46,280 --> 01:31:51,090\nI go to the security tab, I'm going to add\nin printer access so that they get access.\n\n1973\n01:31:51,090 --> 01:31:53,090\nThat printer group gets the access.\n\n1974\n01:31:53,090 --> 01:31:54,130\nSo that's how we structure that.\n\n1975\n01:31:54,130 --> 01:31:56,840\nNow, where does the universal\ngroup fall in all that?\n\n1976\n01:31:56,840 --> 01:31:59,000\nWell, if I have just one domain,\n\n1977\n01:31:59,000 --> 01:32:00,510\nthe universal group really\ndoesn't fall into that.\n\n1978\n01:32:00,510 --> 01:32:01,210\n>> Right.\n\n1979\n01:32:01,210 --> 01:32:05,740\n>> But if I have more than one domain, the\nuniversal group is stored in the global\n\n1980\n01:32:05,740 --> 01:32:08,740\ncatalog, so\nit's common across all of my domains.\n\n1981\n01:32:08,740 --> 01:32:14,350\nSo this sales people group, this might\nactually be my Domain1, sales people.\n\n1982\n01:32:14,350 --> 01:32:16,830\nOr domain2 sales people, whatever.\n\n1983\n01:32:16,830 --> 01:32:20,970\nAnd my universal group\nmight be all sales people.\n\n1984\n01:32:22,460 --> 01:32:26,400\nSo it'll have all sales people from\nall of my domains in that, right?\n\n1985\n01:32:26,400 --> 01:32:29,150\nSo it encompasses a much grander scale.\n\n1986\n01:32:29,150 --> 01:32:32,650\nAnd now when other domains go to\nquery against us to find membership,\n\n1987\n01:32:32,650 --> 01:32:35,290\nthey don't have to reach out to\ndomain controllers in other domains,\n\n1988\n01:32:35,290 --> 01:32:36,360\nthey just go to the global catalog.\n\n1989\n01:32:36,360 --> 01:32:38,030\nAnd that's where the universal\ngroup is stored.\n\n1990\n01:32:40,500 --> 01:32:44,480\nSo that's our structure and I know we've\nseen it before so none of that should have\n\n1991\n01:32:44,480 --> 01:32:47,750\nbeen new for you guys, but\nit's such an easy question to get right.\n\n1992\n01:32:47,750 --> 01:32:50,830\nAny time they talk about group structures,\nit should match this.\n\n1993\n01:32:50,830 --> 01:32:54,350\nEither IGDLA is a single\ndomain environment or\n\n1994\n01:32:54,350 --> 01:32:57,790\nIGUDLA in a multi-domain environment.\n\n1995\n01:32:57,790 --> 01:33:00,470\nAnd it's easy after\nthe fact to add the U's,\n\n1996\n01:33:00,470 --> 01:33:03,340\nadd those universal groups if\nyou need to down the road.\n\n1997\n01:33:03,340 --> 01:33:03,840\n>> Very good.\n\n1998\n01:33:05,370 --> 01:33:07,760\n>> All right.\nSome of the other things we need to be\n\n1999\n01:33:07,760 --> 01:33:10,960\naware of, permissions in\nthe Active Directory itself.\n\n2000\n01:33:10,960 --> 01:33:11,730\n>> Right.\n\n2001\n01:33:11,730 --> 01:33:14,660\n>> I know we talked about\ndelegating security earlier.\n\n2002\n01:33:14,660 --> 01:33:18,720\nI may have somebody,\nlet me go back to my OU structure here.\n\n2003\n01:33:18,720 --> 01:33:19,780\nWhat if its store 101,\n\n2004\n01:33:19,780 --> 01:33:23,640\nwe have enough computers that we\ndecide to put an IT guy there?\n\n2005\n01:33:23,640 --> 01:33:24,270\n>> Right?\n\n2006\n01:33:24,270 --> 01:33:29,190\n>> So I want that IT guy to be able to\nreset user passwords and do other things,\n\n2007\n01:33:29,190 --> 01:33:31,320\nbut just for store 101.\n\n2008\n01:33:31,320 --> 01:33:32,180\nRight?\n\n2009\n01:33:32,180 --> 01:33:34,870\nWell, I could put store\n101 in its own domain.\n\n2010\n01:33:34,870 --> 01:33:36,762\n>> Right.\n>> And make that IT guy domain admin of\n\n2011\n01:33:36,762 --> 01:33:38,040\nstore 101's domain.\n\n2012\n01:33:38,040 --> 01:33:39,498\nYou certainly could do that.\n\n2013\n01:33:39,498 --> 01:33:40,045\n>> Sure.\n\n2014\n01:33:40,045 --> 01:33:41,655\n>> But that's a little overkill.\n\n2015\n01:33:41,655 --> 01:33:46,745\nSo instead, I may take the Store\n101 OU and in Active Directory\n\n2016\n01:33:46,745 --> 01:33:50,365\nusing the computer, you can right-click on\nand launch the Delegate Control Wizard.\n\n2017\n01:33:50,365 --> 01:33:53,700\nAnd I can delegate him\ncontrol of just that OU.\n\n2018\n01:33:53,700 --> 01:33:56,110\nAnd you can give them the access\nto manage those systems.\n\n2019\n01:33:56,110 --> 01:33:59,490\n>> Yeah, with our Active Directory\nobjects, they really, I always say,\n\n2020\n01:33:59,490 --> 01:34:02,930\nat this point, you guys are very\nfamiliar with NTFS permissions, right?\n\n2021\n01:34:02,930 --> 01:34:04,210\nAnd it works almost the same way.\n\n2022\n01:34:04,210 --> 01:34:08,480\nEach object, you have an Active Directory,\nan OU, a computer account, a user account,\n\n2023\n01:34:08,480 --> 01:34:12,180\na group, a printer, whatever it is,\nthey have an access control list or\n\n2024\n01:34:12,180 --> 01:34:13,970\na DACL associated with them.\n\n2025\n01:34:13,970 --> 01:34:15,440\nAnd I can go to that DACL and\n\n2026\n01:34:15,440 --> 01:34:18,870\nI can control the permissions\nover that particular object.\n\n2027\n01:34:18,870 --> 01:34:21,360\nNow it works in the same way.\n\n2028\n01:34:21,360 --> 01:34:24,690\nIt inherits down from the parent\nobject to child objects.\n\n2029\n01:34:24,690 --> 01:34:29,080\nSo if I apply a permission at an OU level\nit can inherit down to the objects inside.\n\n2030\n01:34:29,080 --> 01:34:32,240\nBut it goes a lot further\nthan the NTSF permissions do.\n\n2031\n01:34:32,240 --> 01:34:35,090\nFirst of all,\nthere's dozens of permissions.\n\n2032\n01:34:35,090 --> 01:34:39,440\nThere's not just read, write, modify,\nfull control, read and execute.\n\n2033\n01:34:39,440 --> 01:34:45,458\nEach object or each individual attribute,\nyou can set permissions.\n\n2034\n01:34:45,458 --> 01:34:49,510\nI could give Don the ability to\nchange that user's phone number, but\n\n2035\n01:34:49,510 --> 01:34:50,700\nnot their address.\n\n2036\n01:34:50,700 --> 01:34:52,510\nSo we can be very specific, or\n\n2037\n01:34:52,510 --> 01:34:55,060\nI could give Don permissions\nover the entire object.\n\n2038\n01:34:55,060 --> 01:34:57,540\nBut the inheritance part works the same,\nbut\n\n2039\n01:34:57,540 --> 01:34:59,600\nwe have more control over the inheritance.\n\n2040\n01:34:59,600 --> 01:35:03,820\nLet's say I wanna give, Don's that IT\nguy out there at the branch office, and\n\n2041\n01:35:03,820 --> 01:35:07,220\nI want him to be able to manage\nthose computers out there.\n\n2042\n01:35:07,220 --> 01:35:10,630\nI can assign the permission at\nthe OU level, but I can go in and\n\n2043\n01:35:10,630 --> 01:35:13,820\nI can choose things like\nover just child objects.\n\n2044\n01:35:13,820 --> 01:35:16,190\nI don't want Don to have any\npermissions over the OU itself,\n\n2045\n01:35:16,190 --> 01:35:18,580\nI don't want him deleting that or\nchanging it, but\n\n2046\n01:35:18,580 --> 01:35:21,960\nI need him to have permissions over the\nobjects inside of it, but I don't want to\n\n2047\n01:35:21,960 --> 01:35:26,460\nhave to go to each individual object\nin there and assign those permissions.\n\n2048\n01:35:26,460 --> 01:35:28,350\nSo I can still do it at the OU level, but\n\n2049\n01:35:28,350 --> 01:35:31,180\nsay don't give him\nthe permissions over the OU.\n\n2050\n01:35:31,180 --> 01:35:33,370\nJust the objects inside there.\n\n2051\n01:35:33,370 --> 01:35:37,430\nAnd we can do these permissions manually,\nI mean, I can go in, but they're complex.\n\n2052\n01:35:37,430 --> 01:35:41,700\nThere's a lot of permissions, and\nif you look at resetting passwords,\n\n2053\n01:35:41,700 --> 01:35:45,480\nwhat permission do I need to give\nsomebody to be able to reset passwords.\n\n2054\n01:35:45,480 --> 01:35:48,860\nIt's not as, there are several different\npermissions they're going to need.\n\n2055\n01:35:48,860 --> 01:35:52,870\nAnd that, to me, that's where the\ndelegation wizard really comes in handy.\n\n2056\n01:35:52,870 --> 01:35:57,355\nBecause the wizard knows what permissions\nare needed to reset passwords or\n\n2057\n01:35:57,355 --> 01:36:00,784\nto create computer accounts or\nwhatever the case may be.\n\n2058\n01:36:00,784 --> 01:36:03,721\nSo I can run through this delegation,\nit's a very simple wizard,\n\n2059\n01:36:03,721 --> 01:36:06,880\nyou pick who you want to delegate to,\na group, never to a user, right.\n\n2060\n01:36:06,880 --> 01:36:11,926\nAnd then you chose what permission you're\ntrying to delegate to them It's got\n\n2061\n01:36:11,926 --> 01:36:17,430\nI think, 12 or 13 built-in tasks that you\ncan do and then there's a custom way you\n\n2062\n01:36:17,430 --> 01:36:22,990\ncan go where you can pick and choose\nthe custom permissions you want to assign.\n\n2063\n01:36:22,990 --> 01:36:26,220\nThere's actually a really cool\nfile you can get from Microsoft\n\n2064\n01:36:26,220 --> 01:36:30,500\nbecause all those pre-built tasks\nare pulled from an INF file.\n\n2065\n01:36:30,500 --> 01:36:34,180\nYou can go out to Microsoft and\nyou can download this\n\n2066\n01:36:34,180 --> 01:36:38,590\nfile that adds like 70\ndifferent pre-built tasks.\n\n2067\n01:36:38,590 --> 01:36:39,130\nSo really cool.\n\n2068\n01:36:39,130 --> 01:36:43,520\nSo we can extend the functionality of that\ndelegation wizard, and it's very specific.\n\n2069\n01:36:43,520 --> 01:36:48,400\nIf Don right-clicks on that Store 101,\nand he delegates to that person\n\n2070\n01:36:48,400 --> 01:36:53,000\npermission to create new computer\naccounts in that OU, they can.\n\n2071\n01:36:53,000 --> 01:36:55,450\nThey can go to that OU,\nright-click new computer account.\n\n2072\n01:36:55,450 --> 01:37:00,012\nThey cannot go to 1205 and right-click and\nchoose new computer account.\n\n2073\n01:37:00,012 --> 01:37:02,780\nSo it's a very specific\nwhere we delegate it.\n\n2074\n01:37:02,780 --> 01:37:04,990\nIt'll delegate from there and\nthen inherit down.\n\n2075\n01:37:04,990 --> 01:37:05,860\n>> Yeah.\n\n2076\n01:37:05,860 --> 01:37:07,350\nNow on that same idea,\n\n2077\n01:37:07,350 --> 01:37:11,000\nlet's say we wanted that IT guy to have\ntotal control over that OU for store 101.\n\n2078\n01:37:11,000 --> 01:37:13,140\nI want them to be able to do everything.\n\n2079\n01:37:13,140 --> 01:37:14,180\nManage the user accounts,\n\n2080\n01:37:14,180 --> 01:37:17,500\nmanage the computers I want them\nto be able to add new computers.\n\n2081\n01:37:17,500 --> 01:37:20,460\nSo if they buy a new computer at\nstore 101 I want them to be able\n\n2082\n01:37:20,460 --> 01:37:23,330\nto join it to the domain and\nhave it in that OU.\n\n2083\n01:37:23,330 --> 01:37:25,780\nWell, if he's got full control of the OU,\nhe can do it.\n\n2084\n01:37:25,780 --> 01:37:29,840\nAnd when you do a join to the domain,\nwhen you do it in the GUI you cant, but\n\n2085\n01:37:29,840 --> 01:37:31,570\nfrom the command line you\ncan join in the domain and\n\n2086\n01:37:31,570 --> 01:37:33,280\nspecify exactly what OU it goes in.\n\n2087\n01:37:33,280 --> 01:37:35,230\nSo he can add info in there.\n\n2088\n01:37:35,230 --> 01:37:37,270\nWell there's on little thing\nwe need to remember and\n\n2089\n01:37:37,270 --> 01:37:42,580\nthat is by default in the active\ndirectory a user is only allowed to add\n\n2090\n01:37:42,580 --> 01:37:45,610\nten computers to the domain.\n\n2091\n01:37:45,610 --> 01:37:47,150\nMost people never add any, right?\n\n2092\n01:37:47,150 --> 01:37:49,470\nBut you might have a domain admin\nwhoever's adding a ton of them.\n\n2093\n01:37:49,470 --> 01:37:52,158\n>> I want to take it away form\nmost of my people [LAUGH].\n\n2094\n01:37:52,158 --> 01:37:52,741\n>> Yeah.\nYeah.\n\n2095\n01:37:52,741 --> 01:37:56,150\nBut any user is actually able\nto join a machine to the domain.\n\n2096\n01:37:56,150 --> 01:37:58,960\nA lot of people don't realize that,\nyou don't have be a domain admin, but\n\n2097\n01:37:58,960 --> 01:38:00,170\nthe limit is ten.\n\n2098\n01:38:00,170 --> 01:38:04,415\nSo if that admin is at Store 101, and\nthe're adding new computers to the domain,\n\n2099\n01:38:04,415 --> 01:38:08,930\nthey're gonna run out, they're gonna hit\ntheir quota in short amount of time.\n\n2100\n01:38:08,930 --> 01:38:13,210\nSo we have these active directory\nquotas that we can manipulate and\n\n2101\n01:38:13,210 --> 01:38:16,070\ncreating computer accounts\nis the most common one.\n\n2102\n01:38:16,070 --> 01:38:19,138\nAn active directory quota dictates\nhow many accounts you can create or\n\n2103\n01:38:19,138 --> 01:38:20,440\njoin machines to the domain.\n\n2104\n01:38:21,490 --> 01:38:24,890\nIt also controls how many objects\nyou can create and be the owner of.\n\n2105\n01:38:24,890 --> 01:38:27,450\nSo if this person is\ncreating user accounts and\n\n2106\n01:38:27,450 --> 01:38:30,590\ngroups you can set a limit to manage that.\n\n2107\n01:38:30,590 --> 01:38:34,580\nSo there's some command line tools\nyou can use to manage those quotas,\n\n2108\n01:38:34,580 --> 01:38:36,900\nwhich I think I put in my notes,\nyeah right here.\n\n2109\n01:38:36,900 --> 01:38:41,100\nSo they're built off of that DS add\ncommand so you can come through and\n\n2110\n01:38:41,100 --> 01:38:42,270\nspecify the quota.\n\n2111\n01:38:42,270 --> 01:38:46,300\nAnd so here's an example I grabbed from\nMicrosoft's website which is changing\n\n2112\n01:38:46,300 --> 01:38:49,580\nthe Q limits, so the limit of a machine\naccount so they can create for\n\n2113\n01:38:49,580 --> 01:38:51,310\nthis Ben Smith.\n\n2114\n01:38:51,310 --> 01:38:53,430\nSo it's set to ten.\n\n2115\n01:38:53,430 --> 01:38:55,650\nYou could bump it up or lower it.\n\n2116\n01:38:55,650 --> 01:39:00,170\nAnd you can use DS get to find out what\ntheir cue limit is right now and how much\n\n2117\n01:39:00,170 --> 01:39:04,140\nof it they've used cause his limit\nmight be ten but he's already at nine.\n\n2118\n01:39:04,140 --> 01:39:08,170\nAnd so I put the commands for that in the\nnotes in a link to the tech net article\n\n2119\n01:39:08,170 --> 01:39:11,910\nthat covers it, but\nyou can do it from the GUI also.\n\n2120\n01:39:11,910 --> 01:39:16,300\nIf you pull up the properties of that user\nand you go into their attributes tab,\n\n2121\n01:39:16,300 --> 01:39:19,040\nyou'll see all the attributes and\nyou'll find the queue limit and\n\n2122\n01:39:19,040 --> 01:39:21,190\nother things that are in there.\n\n2123\n01:39:21,190 --> 01:39:26,220\nAnd kind of see what it's set to and\nbe able to manipulate that.\n\n2124\n01:39:26,220 --> 01:39:30,240\nSo that's just the quota limit for\nthat system or that person and\n\n2125\n01:39:30,240 --> 01:39:33,270\nis able to be overwritten\non a per user basis.\n\n2126\n01:39:33,270 --> 01:39:37,760\nSo the guy in Store 101 might\nhave a higher limit or a lower\n\n2127\n01:39:37,760 --> 01:39:41,600\nlimit than the lady that's running Store\n102 based on whatever it is that you need.\n\n2128\n01:39:43,420 --> 01:39:49,510\n>> Good old MSDS machine account quota\nis that value that we're changing there.\n\n2129\n01:39:49,510 --> 01:39:51,600\nAnd I did mention,\nremember with that delegation wizard,\n\n2130\n01:39:51,600 --> 01:39:54,900\nbest practice says always delegate\nto a group, not to a user.\n\n2131\n01:39:54,900 --> 01:39:58,050\nBecause if I delegate those permissions\ndirectly to a user account,\n\n2132\n01:39:58,050 --> 01:40:01,620\nwhat happens when I do not want them\nto have those permissions anymore?\n\n2133\n01:40:01,620 --> 01:40:03,230\nThere's no undelegation wizard.\n\n2134\n01:40:03,230 --> 01:40:07,360\nYou have to go back and manually undo\nall those permissions, whereas if\n\n2135\n01:40:07,360 --> 01:40:10,680\nI delegate to a group all I have to do\nis pull that user out of the group,\n\n2136\n01:40:10,680 --> 01:40:12,660\nthey no longer have those permissions.\n\n2137\n01:40:12,660 --> 01:40:15,020\nNext week, we decide somebody\nelse needs those permissions.\n\n2138\n01:40:15,020 --> 01:40:16,530\nI've already got a group\nthat has them delegated.\n\n2139\n01:40:16,530 --> 01:40:18,470\nSo, I can just add them to the group,\nand I'm good to go.\n\n2140\n01:40:20,260 --> 01:40:24,560\n>> The very last thing we've got is\nthis guy right here the Admin SDHolder.\n\n2141\n01:40:24,560 --> 01:40:26,380\nSo, let's talk about that for\na little bit.\n\n2142\n01:40:26,380 --> 01:40:30,560\nIn the early days of the active directory\nthere was this super frustrating thing.\n\n2143\n01:40:30,560 --> 01:40:34,350\nWhich was if you were working in Active\nDirectory users and computers it was\n\n2144\n01:40:34,350 --> 01:40:39,290\nreally easy to accidentally drag and\ndrop somebody to the wrong place.\n\n2145\n01:40:39,290 --> 01:40:42,680\nYou'd be in here working and\nsomething would happen and\n\n2146\n01:40:42,680 --> 01:40:48,100\nyou'd accidentally drag a user maybe from\nGainesville to Jonesville by accident.\n\n2147\n01:40:48,100 --> 01:40:50,566\nSo you'd just whoops and off you'd go.\n\n2148\n01:40:50,566 --> 01:40:53,244\nSo they added some little\nprompts like this to protect us.\n\n2149\n01:40:53,244 --> 01:40:57,300\nSo here's a warning, it's just saying are\nyou sure you want to do this because when\n\n2150\n01:40:57,300 --> 01:41:00,390\nyou move from one OU to another,\n>> You're changing a lot.\n\n2151\n01:41:00,390 --> 01:41:02,820\n>> Yeah the GPO is\napplied to the U change.\n\n2152\n01:41:02,820 --> 01:41:04,090\nThat's a big deal.\n\n2153\n01:41:04,090 --> 01:41:07,000\nSo we get a warning, that's nice.\n\n2154\n01:41:07,000 --> 01:41:10,270\nBut see this, don't show this\nwarning while the snap in is open,\n\n2155\n01:41:10,270 --> 01:41:14,023\nif you say yes don't show me that\nwarning anymore, I don't want to see it.\n\n2156\n01:41:14,023 --> 01:41:17,144\nWell now I can start doing it and it's not\neven going to warn me and I'll go in and\n\n2157\n01:41:17,144 --> 01:41:18,490\naccidentally move it.\n\n2158\n01:41:18,490 --> 01:41:21,100\nAll right, I'm getting access denied\nright now for some strange reasons.\n\n2159\n01:41:21,100 --> 01:41:26,920\nBut one of the things that we can\ndo is we can protect the objects.\n\n2160\n01:41:26,920 --> 01:41:28,250\nYou can create protected groups but\n\n2161\n01:41:28,250 --> 01:41:31,510\nyou can also flag objects to\nprevent accidental deletion and\n\n2162\n01:41:31,510 --> 01:41:34,910\nthese help us to ensure they don't\nget modified inappropriately.\n\n2163\n01:41:36,210 --> 01:41:39,580\nThis one right here is just protecting\nme from actually going in here and\n\n2164\n01:41:39,580 --> 01:41:40,760\ndeleting it.\n\n2165\n01:41:40,760 --> 01:41:42,470\nIf I pull up the properties for that,\n\n2166\n01:41:42,470 --> 01:41:45,070\nI won't see anything in\nhere that mentions it.\n\n2167\n01:41:45,070 --> 01:41:49,870\nBut if I go up to view and\nturn on the advanced features and\n\n2168\n01:41:49,870 --> 01:41:52,360\nthen I go right back in there and\npull up the properties.\n\n2169\n01:41:52,360 --> 01:41:54,040\nWe'll see some extra tabs in here.\n\n2170\n01:41:54,040 --> 01:41:55,750\n>> Mm hm, like that attribute editor.\n\n2171\n01:41:55,750 --> 01:42:00,590\n>> And under object, we'll see protect\nobject from accidental deletion.\n\n2172\n01:42:00,590 --> 01:42:03,630\nThat's why I'm not able to drag and\ndrop it cuz that's It's turned on,\n\n2173\n01:42:03,630 --> 01:42:08,200\nand if I turn it off,\nthat's gonna protect me or unprotect me.\n\n2174\n01:42:08,200 --> 01:42:09,630\nNow, see how it let me move it?\n\n2175\n01:42:09,630 --> 01:42:11,500\nNo more access denied.\n\n2176\n01:42:11,500 --> 01:42:16,200\nThat's on by default in the newer\nversions of Windows server.\n\n2177\n01:42:16,200 --> 01:42:18,400\nIt's off by default in the older ones.\n\n2178\n01:42:18,400 --> 01:42:22,030\nSo if you're working on a mature Active\nDirectory, one that's been around for\n\n2179\n01:42:22,030 --> 01:42:26,300\nten years or more, that's probably not\nturned on and you're still at risk for\n\n2180\n01:42:26,300 --> 01:42:27,560\naccidental movement.\n\n2181\n01:42:27,560 --> 01:42:29,995\nSo when you start designing\nyour active directory solution,\n\n2182\n01:42:29,995 --> 01:42:33,470\na part of that may be to go in and turn\nthat on and it's super easy, you just-\n\n2183\n01:42:33,470 --> 01:42:34,390\n>> Just a little check mark or\n\n2184\n01:42:34,390 --> 01:42:35,390\nwe could script that out too.\n\n2185\n01:42:35,390 --> 01:42:39,270\n>> And then scripting is probably what\nyou'd wanna do if you had a big directory,\n\n2186\n01:42:39,270 --> 01:42:40,040\nbut just coming in and\n\n2187\n01:42:40,040 --> 01:42:43,340\nturning that on, it doesn't really\nchange permissions inside of it.\n\n2188\n01:42:43,340 --> 01:42:46,910\nPeople can still create accounts and\nall but if they try and drag and\n\n2189\n01:42:46,910 --> 01:42:50,410\ndrop that somewhere else or\ndelete it, it's protected.\n\n2190\n01:42:50,410 --> 01:42:52,105\nThat gives you some protection there.\n\n2191\n01:42:52,105 --> 01:42:53,985\n>> By default on those OUs that we make,\n\n2192\n01:42:53,985 --> 01:42:55,685\nwell as you say with our\nlater operating systems.\n\n2193\n01:42:55,685 --> 01:42:58,635\nI want groups though so that's something\nyou might have to go in and turn on or\n\n2194\n01:42:58,635 --> 01:42:59,545\nscript as well.\n\n2195\n01:42:59,545 --> 01:43:03,445\n>> Yep.\nAnd then protected groups.\n\n2196\n01:43:03,445 --> 01:43:07,785\nYou can create a GPO that defines a\nprotected group and if you haven't worked\n\n2197\n01:43:07,785 --> 01:43:10,255\nwith them, I know we covered them\nin other shows but just to recap,\n\n2198\n01:43:10,255 --> 01:43:14,620\na protected group is a group where\nyou manually define the membership.\n\n2199\n01:43:14,620 --> 01:43:18,380\nAnd if anybody tries to change the\nmembership, take a user out or put a user\n\n2200\n01:43:18,380 --> 01:43:22,410\nin, you can have the GPO override it and\nput it back to the way it was.\n\n2201\n01:43:22,410 --> 01:43:25,420\nI do this all of the time with a local\nadministrator's group on a computer.\n\n2202\n01:43:25,420 --> 01:43:29,830\nIf a user finds some way to add\nthemselves into the local admin group.\n\n2203\n01:43:29,830 --> 01:43:32,170\nIf you make it a protected group,\nit'll just remove them.\n\n2204\n01:43:32,170 --> 01:43:33,810\nIt'll take it right back\nout the next time the GPO-\n\n2205\n01:43:33,810 --> 01:43:35,270\n>> It might be in there for 90 minutes or\n\n2206\n01:43:35,270 --> 01:43:37,350\nsomething or\nwhenever our refresh cycle is, but\n\n2207\n01:43:37,350 --> 01:43:39,270\nit's gonna take them right back out.\n\n2208\n01:43:39,270 --> 01:43:42,300\n>> Or vice versa,\nif they take out domain admins,\n\n2209\n01:43:42,300 --> 01:43:43,710\nthey'll just put them right back in again.\n\n2210\n01:43:43,710 --> 01:43:45,510\n>> Locked out of my machine.\n\n2211\n01:43:45,510 --> 01:43:47,700\n>> So, it does happen.\n\n2212\n01:43:47,700 --> 01:43:48,290\n>> They tried.\n\n2213\n01:43:48,290 --> 01:43:49,000\nThey tried.\n\n2214\n01:43:49,000 --> 01:43:50,490\n>> So that's a useful thing to do.\n\n2215\n01:43:50,490 --> 01:43:54,790\nA protective group we define in a GPO, so\nyou just go into a group policy object and\n\n2216\n01:43:54,790 --> 01:43:55,400\nyou define it there.\n\n2217\n01:43:55,400 --> 01:43:57,160\nWe've seen how to do it in other shows,\nbut\n\n2218\n01:43:57,160 --> 01:44:00,300\nthat'll need to be part of your design\ntoo if you're gonna enforce restrictions.\n\n2219\n01:44:00,300 --> 01:44:04,690\nIf one of the requirements of your design\nis to ensure that the membership of\n\n2220\n01:44:04,690 --> 01:44:08,980\na particular group is controlled,\nthen you want to do protected groups.\n\n2221\n01:44:08,980 --> 01:44:12,720\nAnd that's just activating\nthat admin SD holder\n\n2222\n01:44:12,720 --> 01:44:17,410\nattribute inside of the object to say, the\nmembership of this is controlled by a GPO.\n\n2223\n01:44:17,410 --> 01:44:20,315\nAnd if it differs in any way from the GPO,\nput it back.\n\n2224\n01:44:20,315 --> 01:44:21,330\n>> Change it.\n>> Yep so,\n\n2225\n01:44:21,330 --> 01:44:24,520\nthat's the last little entry there.\n\n2226\n01:44:24,520 --> 01:44:26,490\nYou see where there's a ton of options.\n\n2227\n01:44:26,490 --> 01:44:28,200\nI don't think any of these were new.\n\n2228\n01:44:28,200 --> 01:44:31,010\nI don't think we should have shocked\nyou with anything new this episode.\n\n2229\n01:44:31,010 --> 01:44:34,970\nBut when you get on that exam and\nthey start listing the requirements for\n\n2230\n01:44:34,970 --> 01:44:37,360\nthe active directory\ndesign you're designing,\n\n2231\n01:44:37,360 --> 01:44:39,220\nyou need to know what are my tools?\n\n2232\n01:44:39,220 --> 01:44:41,770\nWhat do I have available,\nwhat are my options that I can use?\n\n2233\n01:44:41,770 --> 01:44:44,760\nAnd you mix and match them to create\nthe solution they're requesting.\n\n2234\n01:44:44,760 --> 01:44:49,080\n>> Particularly the one that has\nthe least administrative effort, right?\n\n2235\n01:44:49,080 --> 01:44:50,590\n>> Yeah that is what it boils down to.\n\n2236\n01:44:51,590 --> 01:44:55,480\nAll right, well I will post my show notes\nfor this episode just like I always do\n\n2237\n01:44:55,480 --> 01:44:58,130\nbecause there's a couple of good\nlinks in there for you to read up on.\n\n2238\n01:44:58,130 --> 01:45:02,290\nBut, for the most part, I think we've\ncovered all the logical design.\n\n2239\n01:45:02,290 --> 01:45:04,270\nWe still have the physical side left,\nright?\n\n2240\n01:45:04,270 --> 01:45:05,970\nSo, we were supposed to cover\nthat this afternoon, but\n\n2241\n01:45:05,970 --> 01:45:07,245\nwe went two parts on logical.\n\n2242\n01:45:07,245 --> 01:45:10,360\n>> [LAUGHTER] So, we'll come back\nwith physical and who knows,\n\n2243\n01:45:10,360 --> 01:45:13,050\nwe'll probably do two\nparts in that one too.\n\n2244\n01:45:13,050 --> 01:45:14,805\nIf I can't shut up for a while.\n\n2245\n01:45:14,805 --> 01:45:19,290\n[LAUGH] All right,\nwell let's go ahead and wrap it up here.\n\n2246\n01:45:19,290 --> 01:45:21,650\nI think we overshot our time anyways.\n\n2247\n01:45:21,650 --> 01:45:26,340\nLet me remind you guys, if you have\nquestions on any of this feel free to ask.\n\n2248\n01:45:26,340 --> 01:45:29,110\nLive during the show you\ncan go to itpro.tv/live and\n\n2249\n01:45:29,110 --> 01:45:31,790\nyou'll see the chat box\nright beneath the video.\n\n2250\n01:45:31,790 --> 01:45:34,410\n>> Post your questions there,\nwe monitor and answer during the show.\n\n2251\n01:45:34,410 --> 01:45:38,690\nIf you have a question after the show,\ntake advantage of our Q and A forums.\n\n2252\n01:45:38,690 --> 01:45:42,100\nAt the top of every page on the ITProTV\nsite you'll see a link that says Q and\n\n2253\n01:45:42,100 --> 01:45:44,190\nA, click on it, right?\n\n2254\n01:45:44,190 --> 01:45:47,810\nTake you to the forums,you can post your\nquestions there, we monitor and answer.\n\n2255\n01:45:47,810 --> 01:45:50,760\nWe wanna make sure you guys have\nthe information you need to be successful.\n\n2256\n01:45:51,790 --> 01:45:53,260\nAll right well I hope you\nguys enjoyed the show.\n\n2257\n01:45:53,260 --> 01:45:54,529\nThank you for watching.\n\n2258\n01:45:54,529 --> 01:45:56,731\nSigning off for ITProTV, I'm Don Pezet.\n\n2259\n01:45:56,731 --> 01:45:57,606\n>> And I'm Mike Roderick.\n\n2260\n01:45:57,606 --> 01:45:59,106\n>> And we will see you next time.\n\n2261\n01:45:59,106 --> 01:46:09,106\n>> [MUSIC]\n\n",
          "vimeoId": "107935426"
        }
      ],
      "title": "Design and implement an Active Directory infrastructure (logical)"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "6122",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/011-Planning-For-AD-Physical.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/011-Planning-For-AD-Physical-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/011-Planning-For-AD-Physical-sm.jpg",
          "title": "Planning For AD (Physical)",
          "transcript": "1\n00:00:00,050 --> 00:00:10,050\n[MUSIC]\n\n2\n00:00:15,130 --> 00:00:22,340\n[SOUND]\n\n3\n00:00:22,340 --> 00:00:32,340\n[MUSIC]\n\n4\n00:00:33,840 --> 00:00:36,829\nAll right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:36,829 --> 00:00:40,160\nwelcome everybody to another\nexciting episode of ITProTV.\n\n6\n00:00:40,160 --> 00:00:41,600\nI'm going to be your host today,\n\n7\n00:00:41,600 --> 00:00:46,570\nMike Rodrick, and\nwith me is no one, unfortunately.\n\n8\n00:00:46,570 --> 00:00:47,330\nYeah, Don is out.\n\n9\n00:00:47,330 --> 00:00:52,160\nHe's having some dental work done today so\nall our condolences to poor Don there.\n\n10\n00:00:52,160 --> 00:00:55,320\nI know he's loving his life right now.\n\n11\n00:00:55,320 --> 00:00:58,070\nBut anyway, we've got a good show today.\n\n12\n00:00:58,070 --> 00:01:01,680\nOur episode from yesterday, or if you are\nwatching these recorded the last episode\n\n13\n00:01:01,680 --> 00:01:06,970\nthat we did we went in, we went through\nan active directory infrastructure.\n\n14\n00:01:06,970 --> 00:01:11,570\nWe went over the logical part of\nthe active directory design process.\n\n15\n00:01:11,570 --> 00:01:14,390\nBecause Active Directories are, you know,\nit's really got two components.\n\n16\n00:01:14,390 --> 00:01:17,070\nYou've got your logical\nside of active directory.\n\n17\n00:01:17,070 --> 00:01:19,900\nAnd then you got your physical\nside of active directory.\n\n18\n00:01:19,900 --> 00:01:22,320\nSo, yesterday, we went over the logical\npart of the design, you know,\n\n19\n00:01:22,320 --> 00:01:29,000\nlaying out our domains, our OU structure\nwithin there to support our group policy,\n\n20\n00:01:29,000 --> 00:01:32,220\nand our delegation of administrative\ncontrol, and things like that.\n\n21\n00:01:32,220 --> 00:01:35,970\nAnd that's a really good place to start\nwhen you're doing your design for\n\n22\n00:01:35,970 --> 00:01:37,190\nyour Active Directory.\n\n23\n00:01:37,190 --> 00:01:38,220\nIt is the logical part.\n\n24\n00:01:38,220 --> 00:01:40,070\nYou know, the logical part is more about.\n\n25\n00:01:40,070 --> 00:01:41,480\nHow you want it to function.\n\n26\n00:01:41,480 --> 00:01:44,250\nRight, how you want things to work.\n\n27\n00:01:44,250 --> 00:01:46,600\nAnd then once you got that laid out,\n\n28\n00:01:46,600 --> 00:01:49,730\nthen we switch over to that\nphysical part of our design.\n\n29\n00:01:49,730 --> 00:01:52,200\nHow do we actually make\nthat logical part work?\n\n30\n00:01:52,200 --> 00:01:56,480\nHow do we support what they've\ndesigned in that logical design?\n\n31\n00:01:56,480 --> 00:01:59,140\nAnd that's the actual implementation,\n\n32\n00:01:59,140 --> 00:02:03,310\nthe installation of the domain\ncontrollers the creation of the sites and\n\n33\n00:02:03,310 --> 00:02:07,020\nthe site links, and things like that,\nall the stuff that we need to actually\n\n34\n00:02:07,020 --> 00:02:10,950\ntie it all together, and\nimplement our logical design.\n\n35\n00:02:10,950 --> 00:02:14,810\nSo that's what we're going to be doing\ntoday is going over that physical portion.\n\n36\n00:02:14,810 --> 00:02:18,850\nAnd I've got the objectives pulled up\nhere so we can take a peek at that.\n\n37\n00:02:18,850 --> 00:02:22,680\nWe're going to start this episode with\ndesigning an Active Directory site\n\n38\n00:02:22,680 --> 00:02:24,780\ntopology or site's topology.\n\n39\n00:02:24,780 --> 00:02:29,310\nLooking at things like our\ndomain controller placement,\n\n40\n00:02:29,310 --> 00:02:32,720\nreplication optimization,\nsite links and monitoring and\n\n41\n00:02:32,720 --> 00:02:36,079\nresolving active directory\nreplication conflicts.\n\n42\n00:02:37,290 --> 00:02:37,870\nAll right.\nSo\n\n43\n00:02:37,870 --> 00:02:40,110\nlet's get you guys ready to rock and roll.\n\n44\n00:02:40,110 --> 00:02:41,910\nLet's get this baby underway.\n\n45\n00:02:43,060 --> 00:02:47,340\nI somewhere in here have\nsome notes pulled up.\n\n46\n00:02:47,340 --> 00:02:48,460\nThere we go.\n\n47\n00:02:48,460 --> 00:02:51,740\nSo, you know, first thing we're\ntalking about is the proximity\n\n48\n00:02:51,740 --> 00:02:53,550\nof our domain controllers.\n\n49\n00:02:53,550 --> 00:02:56,400\nWhere do we actually put\nthe domain controllers?\n\n50\n00:02:56,400 --> 00:02:58,510\nI've got a good link here for you guys.\n\n51\n00:02:58,510 --> 00:03:01,380\nI'll make sure that gets\nposted up in the show notes.\n\n52\n00:03:01,380 --> 00:03:03,920\nBut let's take a look at it real quick.\n\n53\n00:03:10,210 --> 00:03:12,790\nI say real quick, but as fast as\nmy Internet connection's gonna go.\n\n54\n00:03:12,790 --> 00:03:16,070\nBut anyways, I'll give you guys this link\nbecause there's really four things you\n\n55\n00:03:16,070 --> 00:03:20,130\nwanna think about when you're looking\nat your domain controller placement,\n\n56\n00:03:20,130 --> 00:03:22,790\nor forced root domain control replacement,\nright?\n\n57\n00:03:22,790 --> 00:03:27,690\nWhere are those guys going to be,\nour regional domain controller placement,\n\n58\n00:03:27,690 --> 00:03:32,487\nour global catalog servers as well\nas our operations master rolls.\n\n59\n00:03:32,487 --> 00:03:34,705\nAll right,\nnow when we talk about the forest room.\n\n60\n00:03:34,705 --> 00:03:37,105\nRemember we said yesterday\nthat that forest root,\n\n61\n00:03:37,105 --> 00:03:41,945\nwhen you start from nothing you've got\nnothing at all that very first domain\n\n62\n00:03:41,945 --> 00:03:46,395\nthat you create is going to be known\nas your forest root domain all right.\n\n63\n00:03:46,395 --> 00:03:50,980\nAnd that first domain controller that you\nset up is what starts the whole thing.\n\n64\n00:03:50,980 --> 00:03:54,480\nYou start with nothing,\nyou take a server, install 2012 R2 on it,\n\n65\n00:03:54,480 --> 00:03:59,020\nyou install Active Directory,\nyou've created your first domain, and\n\n66\n00:03:59,020 --> 00:04:01,790\nthat's going to be the domain root,\nand you've also created a forest,\n\n67\n00:04:01,790 --> 00:04:04,920\na very small forest,\na forest of one domain.\n\n68\n00:04:04,920 --> 00:04:09,000\nAnd in that forest root as we said\nyesterday is kind of a special domain in\n\n69\n00:04:09,000 --> 00:04:10,100\nour environment.\n\n70\n00:04:10,100 --> 00:04:13,100\nIt has some things in there\nthat we're not going to find\n\n71\n00:04:13,100 --> 00:04:16,390\nin any other domains no\nmatter how many we have.\n\n72\n00:04:16,390 --> 00:04:19,840\nEnterprise admins group is one of them,\n\n73\n00:04:19,840 --> 00:04:23,820\nremember the enterprise admins have\nfull control over the entire forest.\n\n74\n00:04:23,820 --> 00:04:26,020\nThen you've got the schema admins group.\n\n75\n00:04:26,020 --> 00:04:30,120\nThe schema admins group are the ones\nthat can make changes to the schema.\n\n76\n00:04:30,120 --> 00:04:33,310\nThose are only located\nin that forest root.\n\n77\n00:04:33,310 --> 00:04:38,560\nAnother important thing about that forest\nroute is it's really what starts the whole\n\n78\n00:04:38,560 --> 00:04:41,210\ntrust path establishment, right?\n\n79\n00:04:41,210 --> 00:04:43,270\nWhen we create that forest route,\nthat's all that we've got.\n\n80\n00:04:43,270 --> 00:04:48,200\nAnd then as we add other domains, they\nend up tying back to that forest route.\n\n81\n00:04:48,200 --> 00:04:53,130\nWe might have child domains of that forest\nroute and there's gonna be that automatic\n\n82\n00:04:53,130 --> 00:04:57,410\ntwo way transitive trust that gets\ncreated between that force root and\n\n83\n00:04:57,410 --> 00:05:02,500\nthose child domains if it's a contiguous\nnamespace, if it's a single tree.\n\n84\n00:05:02,500 --> 00:05:07,990\nThen we might add other trees to our\nforest, a discontinuous namespace.\n\n85\n00:05:07,990 --> 00:05:12,340\nAnd there's gonna be a trust that\ngets created from those tree roots\n\n86\n00:05:12,340 --> 00:05:14,340\nback to that forest root.\n\n87\n00:05:14,340 --> 00:05:19,350\nAnd that's what's going to allow\nwe said yesterday how in a forest,\n\n88\n00:05:19,350 --> 00:05:22,980\nall domains trust all\nother domains in a forest.\n\n89\n00:05:22,980 --> 00:05:25,790\nAnd it's because of those trusts\nthat are getting created.\n\n90\n00:05:25,790 --> 00:05:26,860\nBack to that forester.\n\n91\n00:05:26,860 --> 00:05:31,710\nSo it really does facilitate the trust\nthat gets established which then gives me\n\n92\n00:05:31,710 --> 00:05:37,580\nthe ability to give users in one domain\naccess to resources in another domain.\n\n93\n00:05:37,580 --> 00:05:41,590\nSo it enables to access to\nresources between domains by\n\n94\n00:05:41,590 --> 00:05:43,369\ncreating those trust paths.\n\n95\n00:05:44,550 --> 00:05:45,180\nAll right.\n\n96\n00:05:45,180 --> 00:05:49,170\nNow where you place those\nforest root domains they're\n\n97\n00:05:49,170 --> 00:05:51,070\nmost likely going to be back\nat the corporate office.\n\n98\n00:05:51,070 --> 00:05:55,240\nThat's where we're going to set up that's\nusually where we see our forest root.\n\n99\n00:05:55,240 --> 00:05:58,560\nThat doesn't mean that I can't place\nsome of those domain controllers\n\n100\n00:05:58,560 --> 00:06:01,300\nin other location and I probably want to.\n\n101\n00:06:01,300 --> 00:06:06,050\nWe want to look at our layout of\nour network our physical layout.\n\n102\n00:06:06,050 --> 00:06:11,250\nI've got my corporate office here in\nGainesville Florida, and I've got some\n\n103\n00:06:11,250 --> 00:06:17,260\nbranch offices over in Jacksonville and\nTampa or whatever the case may be.\n\n104\n00:06:17,260 --> 00:06:22,120\nAnd when my users over there in\nthose remote offices go to log in,\n\n105\n00:06:22,120 --> 00:06:23,920\nif there's no domain controller there,\n\n106\n00:06:23,920 --> 00:06:28,200\nthat means they're gonna be going across\nthat WAN link to get access to the domain\n\n107\n00:06:28,200 --> 00:06:32,020\ncontrollers to be able to log in every\ntime they go to access a resources, right.\n\n108\n00:06:32,020 --> 00:06:34,670\nWindows supports Kerberos and\nsupports single sign on.\n\n109\n00:06:34,670 --> 00:06:36,190\nYou sign in once.\n\n110\n00:06:36,190 --> 00:06:39,960\nAnd you get your access token, but every\ntime you go to access a resource you've\n\n111\n00:06:39,960 --> 00:06:43,480\ngot to go back to the domain controller\nand get that session ticket right?\n\n112\n00:06:43,480 --> 00:06:45,620\nSo you can go and access that resource.\n\n113\n00:06:45,620 --> 00:06:50,550\nWhich means there's going to be a lot of\ntraffic back to that domain controller.\n\n114\n00:06:50,550 --> 00:06:54,140\nAnd if that WAN link is slow or\nunreliable,\n\n115\n00:06:54,140 --> 00:06:58,450\nthat's gonna cause a delay in their\nability to get to those resources and\n\n116\n00:06:58,450 --> 00:07:02,470\nthat's probably not something we want\ndepending on how big that delay is.\n\n117\n00:07:02,470 --> 00:07:05,080\nSo we can put some of\nthose domain controllers.\n\n118\n00:07:05,080 --> 00:07:06,810\nOut there at those remote locations.\n\n119\n00:07:07,900 --> 00:07:09,410\nIf there's enough users, right?\n\n120\n00:07:09,410 --> 00:07:10,870\nI mean how do I decide?\n\n121\n00:07:10,870 --> 00:07:12,910\nDo I put a domain controller out there or\nnot?\n\n122\n00:07:12,910 --> 00:07:16,660\nBecause if I put a domain controller out\nthere, we are introducing new things.\n\n123\n00:07:16,660 --> 00:07:19,510\nRight now all of a sudden our domain\ncontrollers have to replicate\n\n124\n00:07:19,510 --> 00:07:20,360\nwith each other.\n\n125\n00:07:20,360 --> 00:07:21,920\nThey've got to share that information.\n\n126\n00:07:21,920 --> 00:07:25,460\nSo if I make a change in\nthat Active Directory,\n\n127\n00:07:25,460 --> 00:07:29,100\nthat change has to be replicated out\nto all the other domain controllers.\n\n128\n00:07:29,100 --> 00:07:31,196\nIf we've got a slow, unreliable WAN link,\n\n129\n00:07:31,196 --> 00:07:34,720\nnow I'm pushing that replication across\nthat which is not gonna be good.\n\n130\n00:07:34,720 --> 00:07:38,718\nSo you've gotta try to figure out does\nit warrant a domain controller, and if\n\n131\n00:07:38,718 --> 00:07:43,470\nthere's enough users out there, Microsoft\nusually likes to throw out the number 100.\n\n132\n00:07:43,470 --> 00:07:48,439\nBut it really is something that you're\ngonna have to look at and monitor, and\n\n133\n00:07:48,439 --> 00:07:52,650\ndecide if that location warrants\na domain controller out there.\n\n134\n00:07:52,650 --> 00:07:55,430\nSo you've got your forest\nroot domain controllers.\n\n135\n00:07:55,430 --> 00:07:58,391\nYou've got your regional, they call\nthem regional domain controllers and\n\n136\n00:07:58,391 --> 00:08:00,017\nreally that's what I'm talking about.\n\n137\n00:08:00,017 --> 00:08:07,228\nMy hub sites like Jacksonville,\nTampa, Miami might be my regionals.\n\n138\n00:08:07,228 --> 00:08:09,491\nAnd then you might have satellite offices,\n\n139\n00:08:09,491 --> 00:08:12,680\nLike in Jacksonville I might\nhave more than one office there.\n\n140\n00:08:12,680 --> 00:08:15,490\nSo I've got my hub location\nthere in Jacksonville and\n\n141\n00:08:15,490 --> 00:08:19,300\nthen I've got little satellite\noffices around town in Jacksonville.\n\n142\n00:08:19,300 --> 00:08:22,940\nThose might not warrant a domain\ncontroller, maybe a little smaller,\n\n143\n00:08:22,940 --> 00:08:25,290\n10, 15 people at each one of those.\n\n144\n00:08:25,290 --> 00:08:28,790\nSo they can go back to that\nhub site in Jacksonville and\n\n145\n00:08:28,790 --> 00:08:32,040\nin that hub site in Jacksonville has\na domain controller, which replicates back\n\n146\n00:08:32,040 --> 00:08:37,990\nwith my domain controller back at\nthe headquarters, at the primary location.\n\n147\n00:08:39,170 --> 00:08:43,680\nSo just things we've gotta try to think\nabout while we're doing our design,\n\n148\n00:08:43,680 --> 00:08:46,730\ndoes that location warrant\na domain controller?\n\n149\n00:08:46,730 --> 00:08:50,910\nAnd we're usually looking at the number\nof users that are at that location.\n\n150\n00:08:50,910 --> 00:08:55,650\nBecause of the logon traffic that's gonna\nbe generated, or the need to log on\n\n151\n00:08:56,720 --> 00:09:03,260\nis really gonna determine whether or\nnot I put a domain controller out there.\n\n152\n00:09:03,260 --> 00:09:05,370\nThen we get to the global\ncatalog server and\n\n153\n00:09:05,370 --> 00:09:07,490\nthat's another thing that we're\ngonna have to think about.\n\n154\n00:09:07,490 --> 00:09:12,920\nI've got another link here, let me go grab\nfor that for some additional reading.\n\n155\n00:09:12,920 --> 00:09:16,865\nBut our global catalog server is the,\nI thought I did,\n\n156\n00:09:16,865 --> 00:09:19,655\nmaybe I don't, I'll find something for\nyou guys later.\n\n157\n00:09:19,655 --> 00:09:21,435\nBut we've talked about it before, right?\n\n158\n00:09:21,435 --> 00:09:25,225\nWe know that an active directory,\nwe've got that active directory database.\n\n159\n00:09:25,225 --> 00:09:29,275\nThat active directory database,\nNTDS.DIT SQL and\n\n160\n00:09:29,275 --> 00:09:34,365\nWindows system 32, NTDS is where\nit's located, is a single file but\n\n161\n00:09:34,365 --> 00:09:37,730\nit's broken up into these\nlogical partitions.\n\n162\n00:09:37,730 --> 00:09:41,700\nAnd we've got the schema partition,\nwe've got the configuration partition and\n\n163\n00:09:41,700 --> 00:09:44,450\nthen I've got that domain partition,\nalright?\n\n164\n00:09:44,450 --> 00:09:46,260\nThe schema and\nthe configuration partition,\n\n165\n00:09:46,260 --> 00:09:49,390\nthose are shared by all domain\ncontrollers in a forest.\n\n166\n00:09:49,390 --> 00:09:51,760\nAnd then you've got your domain partition,\n\n167\n00:09:51,760 --> 00:09:55,365\nwhich is where all of your domain\nspecific objects are going to be stored.\n\n168\n00:09:55,365 --> 00:09:58,440\nAll my user accounts,\nmy computer accounts,\n\n169\n00:09:58,440 --> 00:10:03,970\nmy groups, my GPOs, my OUs and\nall of that stuff gets stored in there.\n\n170\n00:10:03,970 --> 00:10:07,060\nAnd that's going to be replicated all of\nthe domain controllers that are part of\n\n171\n00:10:07,060 --> 00:10:07,940\nthat domain.\n\n172\n00:10:07,940 --> 00:10:11,150\nSo the domain partition is domain wide,\n\n173\n00:10:11,150 --> 00:10:14,160\nreplicates to all domain\ncontrollers in the domain.\n\n174\n00:10:14,160 --> 00:10:16,050\nThe configuration, the schema partition,\n\n175\n00:10:16,050 --> 00:10:20,430\nour forest wide replicates to all\nthe main controllers in the forest.\n\n176\n00:10:20,430 --> 00:10:26,110\nBut if I'm in, let's say domain A, and\nI want to search through active directory,\n\n177\n00:10:26,110 --> 00:10:29,390\nwell, I'm gonna reach out and\nI'm gonna talk to my domain controller.\n\n178\n00:10:29,390 --> 00:10:32,790\nAnd it can search through that domain\npartition and find another user.\n\n179\n00:10:32,790 --> 00:10:37,330\nMaybe I wanna find Bob's certificate so\nthat I can send him a secure email or\n\n180\n00:10:37,330 --> 00:10:38,520\nsomething like that.\n\n181\n00:10:38,520 --> 00:10:41,260\nI can search the active directory and\nI can find that, but\n\n182\n00:10:41,260 --> 00:10:44,750\nI'm searching my domain's\ndomain partition.\n\n183\n00:10:44,750 --> 00:10:47,550\nAnd in a single domain environment,\nthat's fine, right.\n\n184\n00:10:47,550 --> 00:10:51,920\nI'm gonna be able to find everything I\nneed by searching that domain partition.\n\n185\n00:10:51,920 --> 00:10:58,040\nAs soon as we introduce a second domain,\nnow we've got a separate domain partition.\n\n186\n00:10:58,040 --> 00:11:03,610\nDomain B has its own domain partition\nwith its domain specific objects,\n\n187\n00:11:03,610 --> 00:11:06,430\nthe user accounts from Domain B\nin the groups and etc., etc.\n\n188\n00:11:07,430 --> 00:11:11,860\nAnd when I search through Domain A's\ndomain partition I'm not going to be able\n\n189\n00:11:11,860 --> 00:11:17,150\nto find any of those users or\nanything like that from Domain B.\n\n190\n00:11:17,150 --> 00:11:19,540\nThat's where the global catalog comes in,\nall right.\n\n191\n00:11:19,540 --> 00:11:22,410\nAnd I know we've talked about\nsome of this before, but\n\n192\n00:11:22,410 --> 00:11:24,630\nit's good to refresh this information.\n\n193\n00:11:24,630 --> 00:11:30,570\nThat global catalog really acts like\nan index, it's an index for my forest.\n\n194\n00:11:30,570 --> 00:11:35,070\nWhen a global catalog on a domain\ncontroller, global catalog server,\n\n195\n00:11:36,240 --> 00:11:41,100\nhas its own domain's, domain partition,\nhas the complete domain partition.\n\n196\n00:11:41,100 --> 00:11:46,641\nBut then it also gets a copy of\nthe other domain's domain partition.\n\n197\n00:11:47,860 --> 00:11:54,190\nSo now, I'll be able to search and\nfind objects from those other domains.\n\n198\n00:11:54,190 --> 00:11:58,060\nBut it's not a complete copy of\ntheir domain partition, right?\n\n199\n00:11:58,060 --> 00:12:03,750\nWe've used this term before,\nit's what we call a partial attribute set.\n\n200\n00:12:03,750 --> 00:12:07,500\nBecause I really don't wanna\nreplicate their entire partition,\n\n201\n00:12:07,500 --> 00:12:08,540\ntheir domain partition.\n\n202\n00:12:08,540 --> 00:12:11,460\nAnd user accounts have dozens and\ndozens of attributes.\n\n203\n00:12:11,460 --> 00:12:17,910\nI never search for a user based off their\nMSDS machine account quota, right?.\n\n204\n00:12:17,910 --> 00:12:21,510\nIf I'm looking for a user I'm\ngonna be looking by last name or\n\n205\n00:12:21,510 --> 00:12:24,530\ndepartment or manager or\nsomething like that.\n\n206\n00:12:24,530 --> 00:12:27,590\nSo I don't need every single attribute for\n\n207\n00:12:27,590 --> 00:12:32,460\nevery object in Domain B stored on\nthat global catalog in Domain A.\n\n208\n00:12:32,460 --> 00:12:37,290\nI just the most commonly searched for\nattributes, and that's what it does.\n\n209\n00:12:37,290 --> 00:12:42,600\nThat partial attribute set only includes\nthe most commonly searched attributes.\n\n210\n00:12:42,600 --> 00:12:47,250\nEvery object but not every attribute\nthat describes those objects,and\n\n211\n00:12:47,250 --> 00:12:50,580\nthat limits the amount of data\nthat I'm having to replicate.\n\n212\n00:12:50,580 --> 00:12:54,040\nImagine if I've got 15\ndomains in my forest,\n\n213\n00:12:54,040 --> 00:13:00,100\nthat means that global catalog sever has\nits own domain's domain partition and\n\n214\n00:13:00,100 --> 00:13:03,200\nthen 14 other domains' domain partition.\n\n215\n00:13:03,200 --> 00:13:08,030\nAnd that can generate a lot of\nreplication, so we limit how much we're\n\n216\n00:13:08,030 --> 00:13:13,280\nreplicating by creating or\nby using those partial attributes sets.\n\n217\n00:13:13,280 --> 00:13:17,470\nLater on in my show, we're going to\ntalk about how we can actually see and\n\n218\n00:13:17,470 --> 00:13:21,970\neven change what attributes\nare replicated for that global catalog.\n\n219\n00:13:21,970 --> 00:13:24,740\nWe can adjust, we can decide that hey,\nyou know what?\n\n220\n00:13:24,740 --> 00:13:27,190\nI want to be able to search\nby this attribute and\n\n221\n00:13:27,190 --> 00:13:30,190\nit's not normally part\nof the global catalog.\n\n222\n00:13:30,190 --> 00:13:34,660\nI can change that, I can say now include\nthis attribute in the global catalog so\n\n223\n00:13:34,660 --> 00:13:37,140\nthat I can search by it.\n\n224\n00:13:37,140 --> 00:13:40,210\nNow where do we put these\nglobal catalog servers?\n\n225\n00:13:40,210 --> 00:13:42,110\nAnd actually let me back up for\njust a second,\n\n226\n00:13:42,110 --> 00:13:45,990\nbecause there's another thing that global\ncatalogs, that sometimes gets overlooked.\n\n227\n00:13:45,990 --> 00:13:47,680\nWhen we look, global catalogs,\n\n228\n00:13:47,680 --> 00:13:52,680\npartial attribute set lets me search\nthrough an entire forest for an object.\n\n229\n00:13:52,680 --> 00:13:55,490\nBut another thing that\nthese global catalogs do,\n\n230\n00:13:55,490 --> 00:13:58,232\nthey store my universal group membership.\n\n231\n00:13:58,232 --> 00:14:04,050\nBack in, gosh,\n4-11 maybe when we first started\n\n232\n00:14:04,050 --> 00:14:09,130\ngetting into active directory, we talked\nabout different groups and group scopes.\n\n233\n00:14:09,130 --> 00:14:12,200\nAnd we've got our security groups,\nyou've got your global groups,\n\n234\n00:14:12,200 --> 00:14:14,300\nyou've got your domain local groups.\n\n235\n00:14:14,300 --> 00:14:17,325\nBoth of those those are stored\nin the domain partition.\n\n236\n00:14:17,325 --> 00:14:19,925\nSo when you create a new\ngroup in that domain,\n\n237\n00:14:19,925 --> 00:14:24,495\nthey're gonna be stored\nin that domain partition.\n\n238\n00:14:24,495 --> 00:14:30,144\nUniversal groups are actually\nstored in the global catalog, and\n\n239\n00:14:30,144 --> 00:14:35,810\nso couple things that that brings out\nis first, when you go to log on, you're\n\n240\n00:14:35,810 --> 00:14:39,540\ngonna have to get an access token or\nsecurity token from the domain controller.\n\n241\n00:14:39,540 --> 00:14:43,580\nThat domain controller builds your token,\nwhich includes the SID for\n\n242\n00:14:43,580 --> 00:14:48,960\nthe user account itself for DSID for\nall the groups you belong to.\n\n243\n00:14:48,960 --> 00:14:53,690\nSo it needs to be able to parse or\nfigure out what groups you belong to.\n\n244\n00:14:53,690 --> 00:14:55,500\nWell your global group membership,\n\n245\n00:14:55,500 --> 00:14:59,390\nyour domain local membership is all stored\nright there on that domain controller.\n\n246\n00:14:59,390 --> 00:15:01,110\nSo he can figure out what\ngroups you belong to,\n\n247\n00:15:01,110 --> 00:15:04,700\nand he can add those SIDs\nto your security token.\n\n248\n00:15:04,700 --> 00:15:07,250\nBut your universal group's\nnot stored there, so\n\n249\n00:15:07,250 --> 00:15:12,030\nthe domain controller has to reach out and\ntalk to a global catalog server and figure\n\n250\n00:15:12,030 --> 00:15:16,570\nout what universal groups you belong to so\nthat it can add that to your access token.\n\n251\n00:15:16,570 --> 00:15:19,260\nAnd you will not be able to log on\n\n252\n00:15:19,260 --> 00:15:23,390\nif your domain controller cannot\ncontact a global catalog server.\n\n253\n00:15:23,390 --> 00:15:27,440\nBecause it's not gonna build you\nan access token that doesn't include\n\n254\n00:15:27,440 --> 00:15:29,350\nall the groups you belong to.\n\n255\n00:15:29,350 --> 00:15:32,330\nIf I give you an access token,\nif I can only get your global and\n\n256\n00:15:32,330 --> 00:15:36,080\nyour domain local membership, I can't\ndetermine your universal group membership,\n\n257\n00:15:36,080 --> 00:15:38,660\nbut I say pff, whatever,\nhere's your access token.\n\n258\n00:15:38,660 --> 00:15:40,370\nYou can go ahead and log on.\n\n259\n00:15:40,370 --> 00:15:43,100\nWell, a couple things,\nif I don't include your universal group,\n\n260\n00:15:43,100 --> 00:15:46,460\nwhat if one of the universal\ngroups that you belong to\n\n261\n00:15:46,460 --> 00:15:50,460\nIs giving you access to a resource\nthat you need to do your job.\n\n262\n00:15:50,460 --> 00:15:53,290\nWell it's not on your security token,\n\n263\n00:15:53,290 --> 00:15:55,260\nyou're not going to get\naccess to the resource.\n\n264\n00:15:55,260 --> 00:15:58,835\nOr even worse, what if one of\nthe universal groups you belong to is\n\n265\n00:15:58,835 --> 00:16:01,820\nbeing denied access to a certain resource.\n\n266\n00:16:01,820 --> 00:16:03,860\nNow if I build you that security token and\n\n267\n00:16:03,860 --> 00:16:06,807\nI don't include that universal\ngroup that you belong to.\n\n268\n00:16:06,807 --> 00:16:10,408\nYou could potentially get access to\na resource that you should not have\n\n269\n00:16:10,408 --> 00:16:11,710\naccess to.\n\n270\n00:16:11,710 --> 00:16:15,603\nSo gotta be able to contact\nthe global catalog server.\n\n271\n00:16:15,603 --> 00:16:18,230\nSo where do we put these\nguys in our design?\n\n272\n00:16:18,230 --> 00:16:23,878\nWell best practice says to make every\ndomain controller a global catalog server.\n\n273\n00:16:23,878 --> 00:16:26,250\nIf every domain controller\nis a global catalog server,\n\n274\n00:16:26,250 --> 00:16:30,830\nthen you don't have that issue of being\nable to contact a global catalog server.\n\n275\n00:16:30,830 --> 00:16:34,600\nSo Microsoft will tell you,\njust make them all global catalog servers.\n\n276\n00:16:34,600 --> 00:16:37,660\nAnd in small environments,\nthat might not be a problem.\n\n277\n00:16:37,660 --> 00:16:41,420\nBut as I just discussed a few minutes\nago those global catalog servers have\n\n278\n00:16:41,420 --> 00:16:44,760\na domain part,\na copy of every domain's domain partition.\n\n279\n00:16:44,760 --> 00:16:50,970\nSo as our environment grows, as the number\nof domains in my forest increases,\n\n280\n00:16:50,970 --> 00:16:54,310\nthat's increasing that replication for\nthat global catalog.\n\n281\n00:16:54,310 --> 00:16:58,160\nAnd if I've got a domain controller\nsitting out there in that Jacksonville\n\n282\n00:16:58,160 --> 00:17:03,300\nhub location, and\nif I make it a global catalog server,\n\n283\n00:17:03,300 --> 00:17:07,530\nthen I'm going to be replicating all\nof that global catalog information,\n\n284\n00:17:07,530 --> 00:17:11,440\nacross that WAN link out to Jacksonville,\nand that might be an issue.\n\n285\n00:17:13,320 --> 00:17:15,420\nThat's the kind of thing that\nwe've gotta kinda look at.\n\n286\n00:17:15,420 --> 00:17:17,690\nHow big is our global catalog?\n\n287\n00:17:17,690 --> 00:17:21,540\nDo I really wanna replicate it\nout to that remote location.\n\n288\n00:17:22,860 --> 00:17:24,870\nIdeally you would, right?\n\n289\n00:17:24,870 --> 00:17:28,170\nLet's say you put a domain control\nout there in Jacksonville.\n\n290\n00:17:28,170 --> 00:17:32,070\nSo that the users in Jacksonville office\ncan log in without going across the wan\n\n291\n00:17:32,070 --> 00:17:36,120\nlink back to Gainesville,\n\n292\n00:17:36,120 --> 00:17:41,070\nwell they can contact the domain\ncontroller, they can go to log on, but\n\n293\n00:17:41,070 --> 00:17:43,890\nif it's not a global catalog sever,\nguess what it's gonna have to do?\n\n294\n00:17:43,890 --> 00:17:48,890\nIt's gonna have to go across the wan Lank\nto talk to the global catalog sever back\n\n295\n00:17:48,890 --> 00:17:53,440\nin Gainesville, so that it can properly\nbuild your security token, all right?\n\n296\n00:17:53,440 --> 00:17:58,430\nSo I wanna put that global catalog\nserver out there, but I can't do\n\n297\n00:17:58,430 --> 00:18:02,920\nit because I don't want all that\nadditional replication traffic going on.\n\n298\n00:18:02,920 --> 00:18:04,580\nWe have another option.\n\n299\n00:18:04,580 --> 00:18:09,425\nOne of the things we can do is we can\nenable universal group membership caching\n\n300\n00:18:09,425 --> 00:18:11,325\nat that Jacksonville site.\n\n301\n00:18:11,325 --> 00:18:14,115\nAnd what's going to happen is\nthe first time you go to log on.\n\n302\n00:18:14,115 --> 00:18:18,865\nIt is going to have to go across the WAN\nlink to talk to a global catalog server.\n\n303\n00:18:18,865 --> 00:18:22,285\nTo find out what your\nuniversal group membership is.\n\n304\n00:18:22,285 --> 00:18:24,655\nBut then it's going to\ncache that information.\n\n305\n00:18:24,655 --> 00:18:27,040\nAnd then the next time you go to log on.\n\n306\n00:18:27,040 --> 00:18:29,260\nIt can just use that cached information,\nand\n\n307\n00:18:29,260 --> 00:18:30,960\nit doesn't have to go\nacross that WAN length.\n\n308\n00:18:30,960 --> 00:18:35,390\nSo if the WAN length is down, I'll still\nbe able to log on, because it knows what\n\n309\n00:18:35,390 --> 00:18:40,360\nuniversal group membership I belong to,\nand it can properly build my access token.\n\n310\n00:18:40,360 --> 00:18:42,560\nAnd that information gets updated,\nif I remember right,\n\n311\n00:18:42,560 --> 00:18:46,930\nit's 24 hours just to cache that\nuniversal group membership information,\n\n312\n00:18:46,930 --> 00:18:52,220\nso if it changes it will eventually get\nthat updated information, all right.\n\n313\n00:18:52,220 --> 00:18:55,850\nSo those are the kind of things we want to\nthink about when we're placing our domain\n\n314\n00:18:55,850 --> 00:19:01,419\ncontrollers, we're looking at\nthe number of users at a location.\n\n315\n00:19:01,419 --> 00:19:04,945\nWe're looking at where we wanna\nput those global catalogs, and\n\n316\n00:19:04,945 --> 00:19:09,275\nthe replication traffic that's gonna be\ngenerated by placing those out there.\n\n317\n00:19:09,275 --> 00:19:12,625\nAnother little option that we have is\na read only domain controller, but\n\n318\n00:19:12,625 --> 00:19:15,835\nI think we'll hit those a little\nbit later in our show, all right?\n\n319\n00:19:17,055 --> 00:19:20,875\nAs we talked about, where we want\nto put our domain controllers,\n\n320\n00:19:20,875 --> 00:19:25,790\ntalked about our global catalog\nlet's take a look at replication.\n\n321\n00:19:25,790 --> 00:19:29,280\nWhich we've already kind of\nmentioned a couple times here.\n\n322\n00:19:29,280 --> 00:19:33,674\nI've got a link that I'll\nagain put in our show notes.\n\n323\n00:19:35,473 --> 00:19:37,855\nThat way we can take a peek at that.\n\n324\n00:19:41,162 --> 00:19:47,397\n[NOISE] If I can get my IE to play along.\n\n325\n00:19:47,397 --> 00:19:50,070\nThere we go.\n\n326\n00:19:50,070 --> 00:19:50,870\nIt is a really good link.\n\n327\n00:19:50,870 --> 00:19:54,350\nIt goes back up to TechNet, and\nit talks about some of the different\n\n328\n00:19:54,350 --> 00:19:57,500\nreplication concepts we\nneed to be familiar with.\n\n329\n00:19:57,500 --> 00:20:00,410\nThey go into a little more depth\nthan we really need for the exam,\n\n330\n00:20:00,410 --> 00:20:04,190\nbut a good reference to have, all right?\n\n331\n00:20:04,190 --> 00:20:10,230\nBut when we look at replication, and I\nknow, again, we've talked about the what.\n\n332\n00:20:10,230 --> 00:20:13,380\nNow we're looking at that why,\nright, in our design.\n\n333\n00:20:13,380 --> 00:20:15,000\nWe've talked about replication before.\n\n334\n00:20:15,000 --> 00:20:18,150\nWe know that within\nan active directory site.\n\n335\n00:20:18,150 --> 00:20:23,560\nThough our replication occurs often\nit assumes a highly available,\n\n336\n00:20:23,560 --> 00:20:26,770\nfast network connection between\nthose domain controllers.\n\n337\n00:20:26,770 --> 00:20:30,890\nSo the replication between the domain\ncontrollers within a single site.\n\n338\n00:20:30,890 --> 00:20:33,990\nIs going to be uncompressed and frequent.\n\n339\n00:20:33,990 --> 00:20:36,240\nIt works on a change notification.\n\n340\n00:20:36,240 --> 00:20:40,640\nIt's going to, as soon as a change is\nmade, that domain controller is going to\n\n341\n00:20:40,640 --> 00:20:45,780\nnotify it's replication partners, and then\nthey're going to request that replication.\n\n342\n00:20:45,780 --> 00:20:48,930\nAnd that's going to\noccur within 15 seconds.\n\n343\n00:20:48,930 --> 00:20:54,050\nAnd because that KCC makes sure that\nthere's no more than three hops\n\n344\n00:20:54,050 --> 00:20:58,270\nbetween any two domain controllers,\nthat means 15 seconds,\n\n345\n00:20:58,270 --> 00:21:02,740\n15 seconds, 15 seconds in under a minute,\nthat change\n\n346\n00:21:02,740 --> 00:21:07,630\nwill have replicated to all the domain\ncontrollers within that site, all right?\n\n347\n00:21:07,630 --> 00:21:12,250\nBetween sites,\nreplication is a little more controlled.\n\n348\n00:21:12,250 --> 00:21:15,580\nNow we're okay with\nthe replication occurring.\n\n349\n00:21:15,580 --> 00:21:19,720\nFrequently within my sight,\nbecause I've got gigabyte LAN speeds.\n\n350\n00:21:19,720 --> 00:21:22,550\nBut when my data is replicating\nbetween Gainesville and\n\n351\n00:21:22,550 --> 00:21:26,720\nJacksonville, I don't have\nthat same bandwidth available.\n\n352\n00:21:26,720 --> 00:21:31,390\nThat bandwidth is being used by employees\nthat are accessing resources and\n\n353\n00:21:31,390 --> 00:21:32,650\nthings like that.\n\n354\n00:21:32,650 --> 00:21:36,170\nWe wanna try to limit\nthe amount of replication.\n\n355\n00:21:36,170 --> 00:21:41,530\nBy default, when we look at\nthe replication between sites,\n\n356\n00:21:41,530 --> 00:21:46,260\nit's a hundred and, if I can do my math,\n180 minutes, right?\n\n357\n00:21:46,260 --> 00:21:50,860\nThree hours is gonna be the default when\nyou set up that replication between those\n\n358\n00:21:50,860 --> 00:21:51,630\nsites.\n\n359\n00:21:51,630 --> 00:21:53,230\nIt's configurable, you can change it.\n\n360\n00:21:53,230 --> 00:21:55,990\nYou can drop it all the way\ndown to the minimum.\n\n361\n00:21:55,990 --> 00:21:57,610\nIs gonna be 15 minutes.\n\n362\n00:21:57,610 --> 00:22:01,880\nMicrosoft will actually recommend that you\nturn it down to 15 minutes, all right?\n\n363\n00:22:01,880 --> 00:22:04,670\nAnd that's just because I\ndon't want that latency.\n\n364\n00:22:04,670 --> 00:22:08,540\nIf I make a change here in Gainesville,\nI really want that change to get out to\n\n365\n00:22:08,540 --> 00:22:10,690\nJacksonville and\nTampa as soon as possible.\n\n366\n00:22:12,360 --> 00:22:17,180\nBut, the reason I've got sites is because\nI've got slow bandwidth between there.\n\n367\n00:22:17,180 --> 00:22:18,070\nSo 15 minutes,\n\n368\n00:22:18,070 --> 00:22:22,430\nwhile ideal and recommended,\nmight be a little too frequent.\n\n369\n00:22:22,430 --> 00:22:24,210\nSo again, the default is three hours and\n\n370\n00:22:24,210 --> 00:22:28,530\nyou can adjust that all\nthe way down to 15 minutes.\n\n371\n00:22:28,530 --> 00:22:33,160\nReplication between sites does not use\nchange notification by default either,\n\n372\n00:22:33,160 --> 00:22:35,040\nit's on that schedule.\n\n373\n00:22:35,040 --> 00:22:42,400\nSo we can adjust the schedule, we can\nadjust the cost for the replication.\n\n374\n00:22:42,400 --> 00:22:46,100\nIf we have more than one path that that\nreplication could potentially go over.\n\n375\n00:22:46,100 --> 00:22:50,920\nAnd we can adjust\nthe schedule in the interval.\n\n376\n00:22:50,920 --> 00:22:54,250\nSo we got a couple of big things we\ncan really control with that inter\n\n377\n00:22:54,250 --> 00:22:55,850\nsite replication.\n\n378\n00:22:55,850 --> 00:22:59,290\nAnd that is how often and\nwhen it's allowed.\n\n379\n00:22:59,290 --> 00:23:00,850\nI can set it to replicate every hour.\n\n380\n00:23:00,850 --> 00:23:03,860\nI can say, all right,\nevery 60 minutes we're going to replicate.\n\n381\n00:23:03,860 --> 00:23:05,520\nAgain no change notification.\n\n382\n00:23:05,520 --> 00:23:11,140\nThey don't get a notice when something\nhas changed they just wait 60 minutes or\n\n383\n00:23:11,140 --> 00:23:14,620\nwhatever you set that replication interval\nto and then they reach out and they say,\n\n384\n00:23:14,620 --> 00:23:17,660\nhey, do you have any changes\nthat I need to replicate?\n\n385\n00:23:17,660 --> 00:23:20,850\nSo that limits the amount\nof replications going on,\n\n386\n00:23:20,850 --> 00:23:23,890\nwe can also control when\nthey're allowed to do that.\n\n387\n00:23:23,890 --> 00:23:28,690\nSo we can say do it every hour,\nbut not between 8 AM and\n\n388\n00:23:28,690 --> 00:23:32,440\n10 AM, because I've got a lot of\nlogon traffic incoming at that point.\n\n389\n00:23:32,440 --> 00:23:35,940\nThat's when everybody's getting in and\ngetting started and they're all busy, so\n\n390\n00:23:35,940 --> 00:23:39,720\nI don't want that replication\ngoing across that site link.\n\n391\n00:23:39,720 --> 00:23:41,440\nAt that point, between those hours.\n\n392\n00:23:41,440 --> 00:23:44,150\nSo we can control how often, and\n\n393\n00:23:44,150 --> 00:23:48,590\nwhen they are allowed to replicate,\nwhen we look at intersite replication.\n\n394\n00:23:48,590 --> 00:23:53,190\nIntersite being between sites,\nintrasite being replication\n\n395\n00:23:53,190 --> 00:23:56,430\nthat occurs at the domain controllers\nwithin a single location.\n\n396\n00:23:59,220 --> 00:24:04,900\nNow do we make,\nlet me flip back over to my notes here.\n\n397\n00:24:04,900 --> 00:24:09,983\nAnd when we're looking at setting up\nour physical portion of our network,\n\n398\n00:24:09,983 --> 00:24:13,061\ndo we want to make\nJacksonville its own site?\n\n399\n00:24:13,061 --> 00:24:16,370\nDo we want to make Tampa its own site?\n\n400\n00:24:16,370 --> 00:24:20,029\nAgain, previous episodes, we've talked\nabout how we create sites, right?\n\n401\n00:24:20,029 --> 00:24:25,340\nThey're based on subnet objects, so we've\ngot to lay out our domain properly, right?\n\n402\n00:24:25,340 --> 00:24:30,510\nIf I wanna make Jacksonville its own site,\nthen I have to pick a subnet or\n\n403\n00:24:30,510 --> 00:24:32,240\nsubnets, can be more than one.\n\n404\n00:24:32,240 --> 00:24:34,720\nThat I'm gonna use at that\nJacksonville location.\n\n405\n00:24:34,720 --> 00:24:36,240\nDifferent subnet in Gainesville, or\n\n406\n00:24:36,240 --> 00:24:39,540\nsubnets in Gainesville,\ndifferent subnets in Tampa\n\n407\n00:24:39,540 --> 00:24:44,580\nbecause that's how active directory\ndetermines what site a node is in.\n\n408\n00:24:44,580 --> 00:24:46,680\nIs based on their IP address,\n\n409\n00:24:46,680 --> 00:24:52,570\nit knows what subnets are associated with\nthat Jacksonville site, and then when you,\n\n410\n00:24:52,570 --> 00:24:57,430\nwhen a computer is making a request,\nit can look at it's IP address, and\n\n411\n00:24:57,430 --> 00:25:02,022\nit can determine what site it's in,\nall right?\n\n412\n00:25:02,022 --> 00:25:06,760\nI'm gonna see if I can pull up a, I don't\nreally have any sites set up here but,\n\n413\n00:25:06,760 --> 00:25:10,665\nand I am pretty sure, I know we've\ngone over this in either 411 or\n\n414\n00:25:10,665 --> 00:25:12,830\n412 But just to show you guys.\n\n415\n00:25:12,830 --> 00:25:15,810\nWhen you come into your\ndomain controllers,\n\n416\n00:25:15,810 --> 00:25:18,080\nwe can open up active directory sites and\nservices.\n\n417\n00:25:18,080 --> 00:25:20,680\nThat's gonna be where\nwe work with our sites.\n\n418\n00:25:20,680 --> 00:25:22,790\nAnd when you first set up your domain,\nright.\n\n419\n00:25:22,790 --> 00:25:25,880\nYou first set up your network,\nyou get one site by default.\n\n420\n00:25:25,880 --> 00:25:28,350\nYou get the default first site name.\n\n421\n00:25:28,350 --> 00:25:29,250\nSo if I come in here,\n\n422\n00:25:29,250 --> 00:25:32,430\nI've got a couple domain controllers\non this little test network.\n\n423\n00:25:32,430 --> 00:25:36,810\nAnd I can see that I have\nmy default first site name.\n\n424\n00:25:36,810 --> 00:25:40,480\nThat's a little small up there but\nthere is my default first site name.\n\n425\n00:25:40,480 --> 00:25:42,610\nThat's what I get out of the box.\n\n426\n00:25:42,610 --> 00:25:48,130\nUnderneath there I can see my servers,\nand I can see DCO1 and DCO2.\n\n427\n00:25:48,130 --> 00:25:52,580\nSo I've got two domain controllers, and\nlike I said, when you first start out,\n\n428\n00:25:52,580 --> 00:25:55,860\nyou get one site and\neverything gets dumped into that site.\n\n429\n00:25:55,860 --> 00:26:00,740\nAnd if you've got one physical location,\nthen you probably don't care.\n\n430\n00:26:00,740 --> 00:26:03,118\nYou're never even gonna come in here and\nlook at this.\n\n431\n00:26:03,118 --> 00:26:07,720\nEverything is gonna go into that default\nfirst site name, and that's fine.\n\n432\n00:26:07,720 --> 00:26:12,800\nAs we grow, when I go and\nput that office out in Jacksonville,\n\n433\n00:26:12,800 --> 00:26:17,300\nI put that office out in Tampa,\nthese hub or remote locations,\n\n434\n00:26:17,300 --> 00:26:20,970\nthat's when I'm gonna have to come back\nin here and start making some decisions.\n\n435\n00:26:20,970 --> 00:26:22,730\nAnd this should have been decided.\n\n436\n00:26:22,730 --> 00:26:25,250\nIn my logical design, all right?\n\n437\n00:26:25,250 --> 00:26:29,590\nWhen we looked at that, this is where we\nstart implementing that logical design and\n\n438\n00:26:29,590 --> 00:26:31,800\nactually creating those sites.\n\n439\n00:26:31,800 --> 00:26:34,410\nSo sites, again,\nare based on subnet objects.\n\n440\n00:26:34,410 --> 00:26:37,460\nSo I come over here,\nI don't have any subnet objects.\n\n441\n00:26:37,460 --> 00:26:40,550\nSo I'm going to just create\na new subnet object.\n\n442\n00:26:42,120 --> 00:26:47,281\nAnd you just type in your prefix\nMy keyboard to play along.\n\n443\n00:26:50,485 --> 00:26:51,490\nAll right.\n\n444\n00:26:51,490 --> 00:26:53,250\nAnd I'm gonna put that\nright there in that.\n\n445\n00:26:53,250 --> 00:26:55,550\nMade a little typo in there I think.\n\n446\n00:26:59,810 --> 00:27:02,720\nAll right, so I've got my prefix,\nI've got my one site to choose from.\n\n447\n00:27:02,720 --> 00:27:03,970\nI click OK.\n\n448\n00:27:03,970 --> 00:27:07,770\nAnd now I've got a new subnet object\nassociated with that particular site.\n\n449\n00:27:07,770 --> 00:27:10,590\nI'm gonna go ahead and create one,\nlet's say in Jacksonville, so\n\n450\n00:27:10,590 --> 00:27:13,890\nthat might be my Gainesville network,\nthe 10.2.2 network.\n\n451\n00:27:13,890 --> 00:27:19,215\nOut in Jacksonville,\nwe're gonna use 10.3.3.\n\n452\n00:27:21,410 --> 00:27:21,910\nAll right?\n\n453\n00:27:23,530 --> 00:27:30,350\nAnd I'll put that guy out there, and maybe\nJacksonville, did I make a typo in there?\n\n454\n00:27:30,350 --> 00:27:34,490\nNo, we're good, and maybe Jacksonville is\na little bit bigger maybe I want to create\n\n455\n00:27:34,490 --> 00:27:37,680\nanother, I'm gonna have a couple\nsubnets out there in Jacksonville.\n\n456\n00:27:37,680 --> 00:27:44,030\nSo 10.4.4.0/24 All right.\n\n457\n00:27:44,030 --> 00:27:46,290\nSo now I've got my subnet objects.\n\n458\n00:27:46,290 --> 00:27:49,560\nNext thing I would do then is\nactually create the sites.\n\n459\n00:27:50,890 --> 00:27:55,150\nFor that, first think I typically do,\nand you don't have to do this first.\n\n460\n00:27:55,150 --> 00:27:58,970\nYou can do it in any order you want, but\nI just renamed this default first site.\n\n461\n00:27:58,970 --> 00:28:00,500\nWe're not stuck with that.\n\n462\n00:28:00,500 --> 00:28:03,670\nI'm just gonna right click on it and\nchoose rename, and\n\n463\n00:28:03,670 --> 00:28:05,160\nI'm gonna call that GNV.\n\n464\n00:28:06,930 --> 00:28:10,230\nRight, then I'm gonna make another site.\n\n465\n00:28:11,612 --> 00:28:13,582\nI'm gonna right click up here and\nchoose new site.\n\n466\n00:28:13,582 --> 00:28:18,270\nI'm gonna make one called Jacks,\n\n467\n00:28:21,640 --> 00:28:23,380\nI do have to associate\nit with a site link,\n\n468\n00:28:23,380 --> 00:28:25,335\nwe'll talk about those\nin just a little bit.\n\n469\n00:28:25,335 --> 00:28:28,370\n[COUGH]\nSo\n\n470\n00:28:28,370 --> 00:28:33,350\nwe'll create that site, and now what I\nneed to do is I need to associate these\n\n471\n00:28:33,350 --> 00:28:36,300\nsubnet objects with\nthose particular sites.\n\n472\n00:28:36,300 --> 00:28:38,894\nSo if I come back here, it'll see,\n\n473\n00:28:38,894 --> 00:28:44,290\nwe said 2.2 was gonna be GMV 3.3,\npull up the properties here.\n\n474\n00:28:44,290 --> 00:28:46,320\nAnd I can see that is in\nthe Gainesville site.\n\n475\n00:28:46,320 --> 00:28:50,610\nAnd I'm just gonna switch that\nover to Jacksonville, right?\n\n476\n00:28:50,610 --> 00:28:55,010\nAnd the same thing with 4.4,\nwe're gonna pull up the properties, and\n\n477\n00:28:55,010 --> 00:28:59,030\nassociate that with, and you can see my\ndrop-down list has the sites that exist,\n\n478\n00:28:59,030 --> 00:29:01,040\nand I drop it over there\nin that Jacksonville site.\n\n479\n00:29:02,700 --> 00:29:06,840\nNow when I take a look at my subnets,\nI can see, and that hasn't actually\n\n480\n00:29:06,840 --> 00:29:12,360\nrefreshed yet, there we go,\nnow I can see that my 2.2 network\n\n481\n00:29:12,360 --> 00:29:18,490\nis in the GNV location, my 3.3 and\nmy 4.4 are in my Jacksonville location.\n\n482\n00:29:18,490 --> 00:29:21,490\nThe only other thing I really\nneed to do at this point,\n\n483\n00:29:21,490 --> 00:29:25,190\nbefore we get into our site links and\nstuff, is to move my domain controllers.\n\n484\n00:29:25,190 --> 00:29:26,880\nNow, we're just about out of time.\n\n485\n00:29:26,880 --> 00:29:28,670\nLet me finish up this thought here.\n\n486\n00:29:28,670 --> 00:29:32,870\nWhen we add a new domain\ncontroller during that DC promo,\n\n487\n00:29:32,870 --> 00:29:36,650\nduring the active directory\nconfiguration wizard, we get to choose.\n\n488\n00:29:36,650 --> 00:29:38,300\nPart of that wizard is you can,\n\n489\n00:29:38,300 --> 00:29:41,090\nyou get a drop-down list to\nput it in what site you want.\n\n490\n00:29:41,090 --> 00:29:44,040\nSo you can choose what site\nthe domain controller is in\n\n491\n00:29:44,040 --> 00:29:46,010\nwhen you install Active Directory.\n\n492\n00:29:46,010 --> 00:29:49,060\nIf you had a single site when\nyou installed Active Directory,\n\n493\n00:29:49,060 --> 00:29:50,560\nthen they all end up in that site.\n\n494\n00:29:50,560 --> 00:29:52,620\nAnd then you just have to\nmove it after the fact.\n\n495\n00:29:52,620 --> 00:29:53,450\nAnd it's easy enough.\n\n496\n00:29:53,450 --> 00:29:57,660\nI just gonna come over here to DC2, and\nI'm gonna right click and choose, Move.\n\n497\n00:29:58,960 --> 00:30:00,479\nAnd I'm gonna move it to\nthe Jacksonville site.\n\n498\n00:30:02,100 --> 00:30:05,260\nAnd now when I look under Jacksonville,\nI'm good to go.\n\n499\n00:30:05,260 --> 00:30:08,850\nThis console is only worried\nabout your domain controllers.\n\n500\n00:30:08,850 --> 00:30:12,010\nWe're not seeing our member servers,\nour print servers, our file servers,\n\n501\n00:30:12,010 --> 00:30:13,410\nanything like that.\n\n502\n00:30:13,410 --> 00:30:15,622\nJust our domain controllers.\n\n503\n00:30:15,622 --> 00:30:19,040\nAll right, so ladies and gentlemen,\nthat is probably a good place for\n\n504\n00:30:19,040 --> 00:30:20,190\nus to stop and take a break.\n\n505\n00:30:20,190 --> 00:30:21,900\nWe've got a couple sites set up,\n\n506\n00:30:21,900 --> 00:30:24,910\nwhen we come back we'll go\nin a little bit further.\n\n507\n00:30:24,910 --> 00:30:26,820\nWe'll start looking at site links,\n\n508\n00:30:26,820 --> 00:30:30,990\nwhich is gonna allow that replication\nto occur between those sites.\n\n509\n00:30:30,990 --> 00:30:32,625\nSo stay tuned we'll be right back.\n\n510\n00:30:32,625 --> 00:30:37,534\n[SOUND].\n\n511\n00:30:39,693 --> 00:30:41,950\nAll right, welcome back everybody.\n\n512\n00:30:41,950 --> 00:30:44,570\nSo we left off talking\nabout some sites and\n\n513\n00:30:44,570 --> 00:30:47,450\nwe created a couple new\nsubnet objects in there.\n\n514\n00:30:47,450 --> 00:30:52,070\nCreated one additional site, and\nthen I showed you guys moving that server,\n\n515\n00:30:52,070 --> 00:30:55,440\nthat domain controller\ninto that other site.\n\n516\n00:30:55,440 --> 00:31:00,450\nNext thing I want to take a look at while\nwe're in here is our site links all right.\n\n517\n00:31:00,450 --> 00:31:02,780\nNow, replication within a site,\n\n518\n00:31:02,780 --> 00:31:06,490\nas we've said earlier,\nintra site replication, frequent.\n\n519\n00:31:06,490 --> 00:31:10,430\nAssumes a high speed reliable connection.\n\n520\n00:31:10,430 --> 00:31:14,940\nBetween sites, that's where we\nassume that it's unreliable and\n\n521\n00:31:14,940 --> 00:31:17,410\nslow so\nreplication is gonna be compressed.\n\n522\n00:31:18,950 --> 00:31:20,780\nIt's gonna be on our schedule, right.\n\n523\n00:31:20,780 --> 00:31:22,450\nWe can say how often.\n\n524\n00:31:22,450 --> 00:31:23,910\nAnd when they're allowed.\n\n525\n00:31:23,910 --> 00:31:24,630\nWhere do we do that?\n\n526\n00:31:24,630 --> 00:31:25,160\nRight?\n\n527\n00:31:25,160 --> 00:31:28,280\nOnce we were laying out our physical,\nwe decided to make that a site.\n\n528\n00:31:28,280 --> 00:31:29,460\nWe've done that,\n\n529\n00:31:29,460 --> 00:31:33,790\nnow I want to control that replication\nthat's occurring between those sites.\n\n530\n00:31:33,790 --> 00:31:35,090\nHow do we do that?\n\n531\n00:31:35,090 --> 00:31:36,040\nSo let's take a look here.\n\n532\n00:31:36,040 --> 00:31:39,070\nI've still got active directory sites and\nservices open.\n\n533\n00:31:39,070 --> 00:31:41,320\nAnd we've got our subnets\nthat we've created here.\n\n534\n00:31:41,320 --> 00:31:45,500\nSo my subnets for my Jacksonville office\nas well as my Gainesville office,\n\n535\n00:31:45,500 --> 00:31:49,270\nI've moved my domain controller\ndown into that Jacksonville office.\n\n536\n00:31:49,270 --> 00:31:53,910\nBut when we think about the replication,\nthere's two real,\n\n537\n00:31:53,910 --> 00:31:57,360\nwe'll call the utility services\nthat control replication.\n\n538\n00:31:57,360 --> 00:32:00,292\nThe KCC,\nthe knowledge consistency checker,\n\n539\n00:32:00,292 --> 00:32:05,361\nthat's the one that actually generates\nthese replication links within my site.\n\n540\n00:32:05,361 --> 00:32:08,513\nSo the domain controllers all\nhere in the Gainesville location,\n\n541\n00:32:08,513 --> 00:32:09,665\nthe KCC is the one that.\n\n542\n00:32:09,665 --> 00:32:14,548\nUses an algorithm to determine the best\nreplication topology, making sure\n\n543\n00:32:14,548 --> 00:32:19,736\nthere's no more then three hops between\nany two domain controllers, as we add or\n\n544\n00:32:19,736 --> 00:32:25,180\nremove domain controllers or things change\nthat KCC detects that and it readjusts.\n\n545\n00:32:25,180 --> 00:32:32,160\nThe replication partners to maintain that\nreliable two way replication typology.\n\n546\n00:32:32,160 --> 00:32:35,333\nBetween sites, this is where we're going\n\n547\n00:32:35,333 --> 00:32:39,925\nto jump over to the intersite\ntypology generator or the ISTG.\n\n548\n00:32:39,925 --> 00:32:46,864\nThis guy's gonna help us create these\nreplication links between our sites and\n\n549\n00:32:46,864 --> 00:32:50,975\nthe ISTG is limited by\nwhat we call site links.\n\n550\n00:32:52,035 --> 00:32:55,971\nWhen we first start out, as you can see\nand I'll show you here on my screen,\n\n551\n00:32:55,971 --> 00:32:58,675\nyou've got this intersite\ntransport container.\n\n552\n00:32:58,675 --> 00:33:02,233\nThis is where we're gonna create\nthose site links and by default,\n\n553\n00:33:02,233 --> 00:33:06,190\njust like we started with one site,\nthe default first site name.\n\n554\n00:33:06,190 --> 00:33:10,914\nWe also have one default site link and\nit's called, surprise,\n\n555\n00:33:10,914 --> 00:33:13,460\nsurprise, default IP site link.\n\n556\n00:33:13,460 --> 00:33:18,244\nThere's really two protocols I can use\nwhen I'm replicating data between sites,\n\n557\n00:33:18,244 --> 00:33:19,894\nI've got IP and I have SMTP.\n\n558\n00:33:19,894 --> 00:33:24,373\nBut I will tell you that I don't\nthink I have ever in the decade that\n\n559\n00:33:24,373 --> 00:33:27,644\nI've been doing this,\nseen anybody use SMTP.\n\n560\n00:33:27,644 --> 00:33:29,435\nSMTP has some issues.\n\n561\n00:33:29,435 --> 00:33:33,811\nOne of the big problems with SMTP is the\nfact that it cannot replicate the domain\n\n562\n00:33:33,811 --> 00:33:34,552\npartition.\n\n563\n00:33:34,552 --> 00:33:40,852\nI mean,\nit can do the configuration partition.\n\n564\n00:33:40,852 --> 00:33:46,930\nIt can do the schema partition,\nit cannot replicate the domain partition.\n\n565\n00:33:46,930 --> 00:33:51,107\nSo that means if you got two domain\ncontrollers that are in different domains\n\n566\n00:33:51,107 --> 00:33:54,956\non different sites, I could use SMTP\nto replicate between those two,\n\n567\n00:33:54,956 --> 00:33:58,300\nbecause they're not replicating\nin the domain partition.\n\n568\n00:33:58,300 --> 00:34:01,464\nThey're in different domains, they're just\nsharing the different configuration and\n\n569\n00:34:01,464 --> 00:34:02,550\nschema partition.\n\n570\n00:34:02,550 --> 00:34:06,080\nBut if they're in the same domain, they\nhave to be able to replicate that domain\n\n571\n00:34:06,080 --> 00:34:07,936\npartition and SMTP is not going to cut it.\n\n572\n00:34:07,936 --> 00:34:13,480\nSo, IP is really the only\none I've ever seen used.\n\n573\n00:34:13,480 --> 00:34:14,880\nSMTP is there.\n\n574\n00:34:14,880 --> 00:34:16,840\nWe don't even get\na default SMTP link though,\n\n575\n00:34:16,840 --> 00:34:19,010\nyou could create one if you needed to.\n\n576\n00:34:19,010 --> 00:34:22,900\nSo IP is the way we're going to go and\nwe've got this default IP site link.\n\n577\n00:34:22,900 --> 00:34:27,257\nBut at this point, if I take a look\nat the properties of this guy,\n\n578\n00:34:27,257 --> 00:34:31,720\nyou're gonna see all my sites\nare located in this one site link.\n\n579\n00:34:31,720 --> 00:34:35,370\nAnd really to see this,\nI'm gonna make another site real quick.\n\n580\n00:34:35,370 --> 00:34:40,235\nLet's say, we add one more site,\nI'll call it the,\n\n581\n00:34:40,235 --> 00:34:46,090\nI don't know, NYC, we'll do New York or\nsomething like that.\n\n582\n00:34:49,470 --> 00:34:51,310\nThen I did capitalize the other ones so.\n\n583\n00:34:52,930 --> 00:34:55,933\nLet me be consistent,\nwe'll make a new little NYC site and\n\n584\n00:34:55,933 --> 00:34:59,182\nthen I’m gonna go real quick and\nmake another subnet object and\n\n585\n00:34:59,182 --> 00:35:02,450\nassociate it with that site, so\nI have something to play with.\n\n586\n00:35:06,530 --> 00:35:11,023\nNotice this time, last time I created the\nsubnets and there was only that default\n\n587\n00:35:11,023 --> 00:35:14,080\nfirst site name and\nI just dumped everything in there.\n\n588\n00:35:14,080 --> 00:35:17,050\nNow that I’ve created my sites and\nI just create that New York and\n\n589\n00:35:17,050 --> 00:35:18,755\nI can actually pick it at this point.\n\n590\n00:35:18,755 --> 00:35:23,265\nI don't have to go back to properties and\nchange that after the fact.\n\n591\n00:35:23,265 --> 00:35:26,715\nSo I'm just gonna add one subnet\nthere just to speed things up.\n\n592\n00:35:26,715 --> 00:35:31,060\nI don't actually have any domain\ncontrollers down there, that's okay.\n\n593\n00:35:31,060 --> 00:35:34,605\nSo I've got three sites now backup here.\n\n594\n00:35:34,605 --> 00:35:39,008\nSo if I go back into the properties of\nthe default IP site link, you'll see\n\n595\n00:35:39,008 --> 00:35:43,780\nthat all three sites are actually located\ninside that one default IP site link.\n\n596\n00:35:43,780 --> 00:35:48,164\nWhat that means is the ISTG can\ncreate replication partnerships\n\n597\n00:35:48,164 --> 00:35:52,464\nbetween any of the domain controls\nin any of those locations and\n\n598\n00:35:52,464 --> 00:35:54,669\nthat might not be what you want.\n\n599\n00:35:54,669 --> 00:35:59,575\nUsually, we kinda what we've\ngot our corporate office.\n\n600\n00:35:59,575 --> 00:36:03,700\nWe like that to be in the center,\nkind of like the hub and\n\n601\n00:36:03,700 --> 00:36:09,190\nour regional offices or our hub locations\nare gonna be out on the spokes.\n\n602\n00:36:09,190 --> 00:36:11,317\nSo I would really like, in this case,\n\n603\n00:36:11,317 --> 00:36:14,550\nlet's say that Gainesville\nis my corporate office.\n\n604\n00:36:14,550 --> 00:36:18,510\nI want Gainesville and Jacksonville\nto make a controllers to replicate.\n\n605\n00:36:18,510 --> 00:36:23,318\nI want Gainesville and NYC, New York City\nto make controllers to replicate.\n\n606\n00:36:23,318 --> 00:36:28,710\nI really don't need New York and\nJacksonville replicating with each other.\n\n607\n00:36:28,710 --> 00:36:32,800\nBut in this case, the way it's\nsetup right now that could happen.\n\n608\n00:36:32,800 --> 00:36:37,810\nIt could create any replication\npartnership that it wants.\n\n609\n00:36:37,810 --> 00:36:41,351\nSo what we end up doing is we\ncreate these site links and\n\n610\n00:36:41,351 --> 00:36:44,510\nthen we choose what sites\nare located in there.\n\n611\n00:36:44,510 --> 00:36:46,624\nBut I think I am not Don Pezet,\n\n612\n00:36:46,624 --> 00:36:51,290\nhe's got the mad skills when it\ncomes to drawing with this thing.\n\n613\n00:36:51,290 --> 00:36:54,720\nI'll see if I can try to\nwhip something up here.\n\n614\n00:36:54,720 --> 00:36:55,540\nLet's see what I can do.\n\n615\n00:36:56,860 --> 00:37:01,595\nThis might be laughable and I might just,\nyeah, go ahead and save that.\n\n616\n00:37:01,595 --> 00:37:07,223\n[SOUND] So what I'm gonna do here is let's\n\n617\n00:37:07,223 --> 00:37:12,860\nsay that this is my default IP site link.\n\n618\n00:37:15,785 --> 00:37:20,690\nSo by default, everything is inside there.\n\n619\n00:37:20,690 --> 00:37:26,840\nSo my Jacksonville site\nis gonna be in there.\n\n620\n00:37:29,620 --> 00:37:31,948\nSo yeah, this is where I don't.\n\n621\n00:37:31,948 --> 00:37:37,019\n[SOUND] Good enough,\nyou guys can see that I think.\n\n622\n00:37:39,486 --> 00:37:42,552\nSee if I can change that\ncolor a little bit there and\n\n623\n00:37:42,552 --> 00:37:46,130\nlet's center line it,\nI'll get all fancy like Don does.\n\n624\n00:37:48,020 --> 00:37:52,356\nSo I've got my Jacksonville site,\n\n625\n00:37:52,356 --> 00:37:56,402\nI've got my Gainesville site and\n\n626\n00:37:56,402 --> 00:38:00,311\nI've got my New York City site.\n\n627\n00:38:00,311 --> 00:38:01,810\nWe'll go in there and change these up.\n\n628\n00:38:01,810 --> 00:38:06,852\nWe'll say that's NYC and\nwe'll say that this is GNB.\n\n629\n00:38:10,840 --> 00:38:13,200\nSo there's my three different sites.\n\n630\n00:38:13,200 --> 00:38:17,050\nAnd currently, they're all inside\nthis one default IP site link.\n\n631\n00:38:17,050 --> 00:38:22,243\nAnd what that means is\nthe ISTG could create\n\n632\n00:38:22,243 --> 00:38:28,020\nreplication links any way\nit wants to in there.\n\n633\n00:38:28,020 --> 00:38:32,185\nSo let's say,\nit can create a link between here.\n\n634\n00:38:32,185 --> 00:38:35,476\nIt's really making the links into\nthe main controllers themselves,\n\n635\n00:38:35,476 --> 00:38:38,220\nI'm not going to draw out each\nof the domain controllers.\n\n636\n00:38:38,220 --> 00:38:42,446\nIt could make a link between domain\ncontrollers in New York and Jacksonville,\n\n637\n00:38:42,446 --> 00:38:46,360\nit could make links this way and\nwhat's so bad about that, Mike?\n\n638\n00:38:46,360 --> 00:38:48,220\nWell, why is that a problem?\n\n639\n00:38:48,220 --> 00:38:52,687\nWell, the thing is if I make\na change here in Gainesville,\n\n640\n00:38:52,687 --> 00:38:56,530\nthat could, in this case,\nit really wouldn't.\n\n641\n00:38:56,530 --> 00:38:58,870\nWith three sites, it wouldn't be that bad.\n\n642\n00:38:58,870 --> 00:39:03,173\nBut as we grow rather\nthan having just a loop,\n\n643\n00:39:03,173 --> 00:39:06,920\nif I just for giggles, let's do this.\n\n644\n00:39:08,290 --> 00:39:10,820\nI'm not gonna go and\nmake all this inactive directory, but\n\n645\n00:39:10,820 --> 00:39:16,439\njust pretend with me for a second,\nif you will that we have many, many sites.\n\n646\n00:39:19,820 --> 00:39:25,700\nAnd now what ends up happening is\nthe ISTG, because we have it all inside\n\n647\n00:39:25,700 --> 00:39:30,750\nthis one default IP site link,\nit's gonna end up creating links.\n\n648\n00:39:31,900 --> 00:39:34,420\nIt's got an algorithm that it uses.\n\n649\n00:39:34,420 --> 00:39:38,331\nI'm not gonna pretend to tell you I\nknow exactly what it would do, but\n\n650\n00:39:38,331 --> 00:39:41,029\nit's gonna figure out what\nit thinks is best and\n\n651\n00:39:41,029 --> 00:39:45,019\nit's gonna link domain controllers\nbetween these different sites.\n\n652\n00:39:45,019 --> 00:39:47,520\nBut if it did something like this,\nimagine this.\n\n653\n00:39:47,520 --> 00:39:49,372\nI make a change here in Gainesville,\n\n654\n00:39:49,372 --> 00:39:52,977\nthat's gotta then replicate out to\nJacksonville domain controller.\n\n655\n00:39:52,977 --> 00:39:55,219\nAnd I don't know,\nwe'll make up some other.\n\n656\n00:39:55,219 --> 00:40:00,951\nWe'll say, LA or let's say,\n\n657\n00:40:00,951 --> 00:40:05,589\nTokyo and I don't know.\n\n658\n00:40:05,589 --> 00:40:12,530\nPerth, some of the old things they used\nto use in all the Microsoft classes.\n\n659\n00:40:14,300 --> 00:40:16,630\nSo, anyway, what's gonna happen is my\nchange is going to have to replicate to\n\n660\n00:40:16,630 --> 00:40:21,130\nJacksonville, replicate to Tokyo and\nthen once it gets replicated to Tokyo,\n\n661\n00:40:21,130 --> 00:40:24,780\nthen it can replicated to Perth,\nthen it replicate to New York City.\n\n662\n00:40:24,780 --> 00:40:29,100\nSo you can see that there's\ngonna be quite a bit of latency\n\n663\n00:40:29,100 --> 00:40:33,170\nhere before that change gets\nreplicated out to all the other\n\n664\n00:40:33,170 --> 00:40:35,450\ndomain controllers\nacross the organization.\n\n665\n00:40:35,450 --> 00:40:39,010\nWhat I would rather have\nhappen is something like this.\n\n666\n00:40:39,010 --> 00:40:43,440\nAnd let's get rid of some of these\nlittle guys for just a moment.\n\n667\n00:40:47,800 --> 00:40:50,800\nWhat I'd rather see is\nsomething like this.\n\n668\n00:40:53,380 --> 00:41:01,830\nWhere I've got my default IP site\nlink that started like this.\n\n669\n00:41:01,830 --> 00:41:05,432\nWhat I'm gonna do is I'm gonna\nrename that default IP site link.\n\n670\n00:41:05,432 --> 00:41:11,030\nI'm gonna rename it and then I'm gonna\nremove most of the sites from it and\n\n671\n00:41:11,030 --> 00:41:16,130\nI'm gonna end up with, I don't know if\nit will let me rotate this bad boy.\n\n672\n00:41:16,130 --> 00:41:18,140\nYeah, there we go.\n\n673\n00:41:18,140 --> 00:41:20,040\nWe'll end up with something like this.\n\n674\n00:41:20,040 --> 00:41:26,470\nLet's say I take everybody out and\nI make that site link just include.\n\n675\n00:41:29,230 --> 00:41:31,790\nHe is on Perth, right.\n\n676\n00:41:31,790 --> 00:41:34,630\nAnd then I'll make another site link\n\n677\n00:41:38,290 --> 00:41:40,610\nthat's going to include Gainesville,\nNew York.\n\n678\n00:41:40,610 --> 00:41:45,588\nAnd then I create another site\nlink that's gonna include\n\n679\n00:41:45,588 --> 00:41:48,500\nGainesville and Jacksonville.\n\n680\n00:41:49,730 --> 00:41:51,320\nRight, and\nyou can kind of see what I'll do,\n\n681\n00:41:51,320 --> 00:41:56,020\nI might as well do the last\none while I'm here.\n\n682\n00:41:56,020 --> 00:41:58,280\nIn Gainesville and in Tokyo, right.\n\n683\n00:41:58,280 --> 00:41:59,870\nSo now you can see more of a hub and\n\n684\n00:41:59,870 --> 00:42:03,360\nspoke design,\nwhere the ISTG is gonna be limited.\n\n685\n00:42:03,360 --> 00:42:08,260\nIt's only gonna be able to create\nreplication links between the Tokyo and\n\n686\n00:42:08,260 --> 00:42:09,730\nGainesville domain controllers.\n\n687\n00:42:09,730 --> 00:42:16,630\nAnd between the Gainesville and\nPerth, or whatever the case may be.\n\n688\n00:42:16,630 --> 00:42:18,686\nSo now if I make a change in Gainesville,\n\n689\n00:42:18,686 --> 00:42:23,050\nit can replicate out to all those other\nremote locations kinda at the same time.\n\n690\n00:42:23,050 --> 00:42:26,360\nNot necessarily at the exact same time,\nbut I don't have to wait for\n\n691\n00:42:26,360 --> 00:42:30,240\nit to replicate from one location and then\nto another and then to another, right.\n\n692\n00:42:30,240 --> 00:42:31,710\nSo a lot more efficient.\n\n693\n00:42:31,710 --> 00:42:36,860\nThat's what we do with our site links.\n\n694\n00:42:36,860 --> 00:42:41,310\nThat's how we can control\nthat replication.\n\n695\n00:42:41,310 --> 00:42:46,133\nNow, I'm pretty sure we've talked about\nthis, but again just to make sure we\n\n696\n00:42:46,133 --> 00:42:50,920\nremember, by default, transitivity\nis turned on on my site links.\n\n697\n00:42:50,920 --> 00:42:53,390\nSo even though I say,\nwe're gonna create these site links, and\n\n698\n00:42:53,390 --> 00:42:57,110\nthis is gonna control the ISTG, and it\ncontrol where it's allowed to make those\n\n699\n00:42:57,110 --> 00:42:59,930\nreplication links, it really doesn't.\n\n700\n00:42:59,930 --> 00:43:02,980\nBecause what can happen is,\nbecause of the transitivity,\n\n701\n00:43:02,980 --> 00:43:05,150\nI've got a link between Tokyo and\nGainesville.\n\n702\n00:43:05,150 --> 00:43:06,590\nI've got a link between Gainesville and\n\n703\n00:43:06,590 --> 00:43:11,071\nPerth, so the ISTG could end\nup doing something like this.\n\n704\n00:43:11,071 --> 00:43:15,540\nAll right,\nwhere it's actually going through\n\n705\n00:43:19,480 --> 00:43:20,770\nstay on there little fellow.\n\n706\n00:43:20,770 --> 00:43:22,454\nLet me get those guys locked on.\n\n707\n00:43:26,620 --> 00:43:28,610\nWhere it's actually doing\nsomething like that.\n\n708\n00:43:28,610 --> 00:43:31,770\nIt's using the transitivity\nof those two other links\n\n709\n00:43:31,770 --> 00:43:35,690\nto create one replication path\nright across there like that.\n\n710\n00:43:35,690 --> 00:43:41,180\nSo usually what we'll do is we'll turn\noff the transitivity on those site links.\n\n711\n00:43:41,180 --> 00:43:43,990\nThat's how we're going to be able to\n\n712\n00:43:45,020 --> 00:43:49,410\ncurtail what that ISTG\nis actually doing there.\n\n713\n00:43:49,410 --> 00:43:53,290\nTurn off the transitivity and\nthen if we really need it,\n\n714\n00:43:53,290 --> 00:43:57,830\nwe can go back and we can set up\nthe cycling bridges, all right.\n\n715\n00:43:57,830 --> 00:44:01,200\nSo maybe I want that replication\nto go like this hub and spoke but\n\n716\n00:44:01,200 --> 00:44:02,570\nwhat if Gainesville is down?\n\n717\n00:44:02,570 --> 00:44:04,940\nWhat if Gainesville is unavailable for\nsome reason?\n\n718\n00:44:04,940 --> 00:44:08,990\nNow no replication is occurring\nbetween Tokyo and Perth.\n\n719\n00:44:08,990 --> 00:44:12,940\nIf Tokyo makes a change, normally that\nwould replicate back to Gainesville, and\n\n720\n00:44:12,940 --> 00:44:15,190\nthen out to all the other locations.\n\n721\n00:44:15,190 --> 00:44:18,910\nIf Gainesville is unavailable for\nsome reason, it can't.\n\n722\n00:44:18,910 --> 00:44:23,892\nSo if we set up a site link\nbridge we can create a basically\n\n723\n00:44:23,892 --> 00:44:27,610\ntransitivity for just this one, right?\n\n724\n00:44:27,610 --> 00:44:32,720\nWe disabled transitivity and then we are\ngoing to create a site link bridge, right?\n\n725\n00:44:32,720 --> 00:44:36,148\nAnd let's give that guy a little\ndifferent color there, alright?\n\n726\n00:44:36,148 --> 00:44:39,650\nAnd that's gonna basically be the same\nthing as the transitivity, but\n\n727\n00:44:39,650 --> 00:44:42,930\nwe are now in control of\nwhere that's occurring.\n\n728\n00:44:42,930 --> 00:44:47,200\nAnd we can set up cost on\nthese site links, all right.\n\n729\n00:44:47,200 --> 00:44:50,750\nWe can control which one it uses first.\n\n730\n00:44:50,750 --> 00:44:54,080\nSo we're gonna set the cost on that\nbridge that I just made, that red one,\n\n731\n00:44:54,080 --> 00:44:56,010\nwe're gonna set that higher.\n\n732\n00:44:56,010 --> 00:44:59,480\nThat way it's always gonna use\nthe one with the lowest cost.\n\n733\n00:44:59,480 --> 00:45:03,018\nSo if this cost over\nhere between Tokyo and\n\n734\n00:45:03,018 --> 00:45:07,410\nGainesville is 50 and if this cost\nover here between Gainesville and\n\n735\n00:45:07,410 --> 00:45:11,890\nPerth is 150 that means that's\ngonna be a cost of 100 total.\n\n736\n00:45:11,890 --> 00:45:16,500\nMy red link down here, I might set\nthat cost to 200, so it's 100 to\n\n737\n00:45:16,500 --> 00:45:20,390\ngo through Gainesville to get to Perth,\nit's 200 to go straight to Perth.\n\n738\n00:45:20,390 --> 00:45:24,030\nNow it's always gonna try to go through\nGainesville, and only if that's\n\n739\n00:45:24,030 --> 00:45:28,990\nunavailable would it attempt to use\nthat path directly to Perth, alright?\n\n740\n00:45:28,990 --> 00:45:31,630\nSo if we take a look at that in\nmy sites and services console,\n\n741\n00:45:31,630 --> 00:45:33,330\nhow do we do all this?\n\n742\n00:45:33,330 --> 00:45:37,668\nWell, first thing I'm gonna do is I'm\ngonna rename this default IP site link.\n\n743\n00:45:37,668 --> 00:45:41,822\nI'm just gonna come in here and rename and\n\n744\n00:45:41,822 --> 00:45:47,160\nI'm gonna call this, let's say,\nG and V [SOUND] GV and\n\n745\n00:45:47,160 --> 00:45:52,161\nwhat was one of my sites there,\nJackson, right?\n\n746\n00:45:52,161 --> 00:45:56,804\nThen what I need to do is I need to go\ninto the properties of this guy and\n\n747\n00:45:56,804 --> 00:45:59,340\nI need to get rid of New York, right.\n\n748\n00:45:59,340 --> 00:46:02,180\nI need to remove him.\n\n749\n00:46:02,180 --> 00:46:04,920\nThen I'm going to create\nanother site link.\n\n750\n00:46:04,920 --> 00:46:07,680\nRight click over here in IP and\nnew site link.\n\n751\n00:46:08,700 --> 00:46:13,783\nAnd I can call this one\nsomething like G and V NYC and\n\n752\n00:46:13,783 --> 00:46:19,240\nI'm gonna add Gainesville,\nand I'm gonna add NYC.\n\n753\n00:46:21,280 --> 00:46:26,690\nAll right, so now I've got that hoov and\nspoke design that I wanted all right.\n\n754\n00:46:26,690 --> 00:46:29,290\nWhere I can now have Gainesville to\nJacksonville, Gainesville to New York, so\n\n755\n00:46:29,290 --> 00:46:30,050\nvery easy to do.\n\n756\n00:46:30,050 --> 00:46:32,070\nYou come in here right\nclick new site link and\n\n757\n00:46:32,070 --> 00:46:35,170\nyou just put your site in\nthe appropriate site link.\n\n758\n00:46:35,170 --> 00:46:36,960\nNow I'm gonna pull up\nthe properties in one of these.\n\n759\n00:46:36,960 --> 00:46:38,750\nAnd we've already talked\na little bit about this but\n\n760\n00:46:38,750 --> 00:46:40,490\nthis is where you actually do it.\n\n761\n00:46:40,490 --> 00:46:44,980\nWe say we can control the cost\nof these site links, all right?\n\n762\n00:46:44,980 --> 00:46:48,090\nSo here I can see the cost of\nthe default is gonna be 100.\n\n763\n00:46:48,090 --> 00:46:50,940\nRemember, the cost is just a metric,\nit's something you're making up.\n\n764\n00:46:50,940 --> 00:46:53,780\nIt's not anything where you,\nthere's no algorithm or\n\n765\n00:46:53,780 --> 00:46:57,160\nformula to generate this metric.\n\n766\n00:46:57,160 --> 00:46:59,170\nYou pick whatever you want.\n\n767\n00:46:59,170 --> 00:47:01,950\nI typically use numbers like ten,\n20, 30, or 100, 200, 300.\n\n768\n00:47:01,950 --> 00:47:05,490\nYou could do one, two, and three, but\n\n769\n00:47:05,490 --> 00:47:09,470\nthen the problem is, what if you\nwant something between one and two.\n\n770\n00:47:09,470 --> 00:47:10,890\nYou're kinda stuck, you can't do 1.5.\n\n771\n00:47:10,890 --> 00:47:15,720\nIf I do things like 20, 30, 40, and I find\nthat I've got a site link that I want to\n\n772\n00:47:15,720 --> 00:47:19,120\nbe between the 20 and\nthe 30, I can do 25, right.\n\n773\n00:47:19,120 --> 00:47:22,380\nSo give yourself a little room,\na little flexibility there, all right.\n\n774\n00:47:22,380 --> 00:47:26,890\nRight below that I can see my Replicate\nEvery there's that default 180 minutes\n\n775\n00:47:26,890 --> 00:47:31,280\nof three hours, that's how often they're\ngonna check to see if there's any changes,\n\n776\n00:47:31,280 --> 00:47:32,760\nor did anything replicate.\n\n777\n00:47:32,760 --> 00:47:36,440\nIf I click on change schedule,\nthis is where I can control.\n\n778\n00:47:36,440 --> 00:47:41,297\nRemember I said, well you know what,\nfrom Monday through Friday from 8:00 AM\n\n779\n00:47:41,297 --> 00:47:45,659\nuntil 10:00 AM,\nI don't want any replication occurring.\n\n780\n00:47:47,990 --> 00:47:50,870\nSo I can come in here and turn that off.\n\n781\n00:47:50,870 --> 00:47:54,570\nMaybe in the middle of the night I've got\nsome back up procedures that are running\n\n782\n00:47:54,570 --> 00:47:57,170\nand I don't want any\nreplication occurring there.\n\n783\n00:47:57,170 --> 00:48:02,913\nSo I can come in and I can limit when that\nreplication is actually allowed to occur.\n\n784\n00:48:02,913 --> 00:48:04,343\nAll right, so.\n\n785\n00:48:04,343 --> 00:48:06,031\nThere's my site links.\n\n786\n00:48:06,031 --> 00:48:08,725\nWe saw how to create those site links.\n\n787\n00:48:08,725 --> 00:48:12,050\nCreate the sites first and\nthen link those guys together.\n\n788\n00:48:14,140 --> 00:48:16,840\nThere's really nothing else I don't\nthink I want to show in here.\n\n789\n00:48:17,890 --> 00:48:19,120\nNothing too exciting.\n\n790\n00:48:20,990 --> 00:48:22,210\nOops.\n\n791\n00:48:22,210 --> 00:48:23,550\nI think I just blew away my changes.\n\n792\n00:48:23,550 --> 00:48:26,820\nAnyway, nothing too exciting there.\n\n793\n00:48:26,820 --> 00:48:30,620\nYou've got the site links that you\ncreated, we created our subnets.\n\n794\n00:48:30,620 --> 00:48:32,850\nWe associate those with sites, and\n\n795\n00:48:32,850 --> 00:48:37,330\nthen we put our sites in the site links,\nthen we configure the site links\n\n796\n00:48:37,330 --> 00:48:41,530\nto control where the ISTG is\nmaking those replication links.\n\n797\n00:48:41,530 --> 00:48:45,410\nHow it's picking what domain controls\nare replicating with what, all right?\n\n798\n00:48:45,410 --> 00:48:48,889\nAlso remember another term we mentioned\nway back when in our other episodes.\n\n799\n00:48:50,330 --> 00:48:52,960\nIf I've got five domain\ncontrollers in Gainesville,\n\n800\n00:48:52,960 --> 00:48:55,600\nI've got five domain controllers\nout there in Jacksonville,\n\n801\n00:48:55,600 --> 00:48:59,150\nI don't need every one of the domain\ncontrollers in Gainesville replicating\n\n802\n00:48:59,150 --> 00:49:01,700\nwith every one of the domain\ncontrollers in Jacksonville.\n\n803\n00:49:01,700 --> 00:49:02,410\nAll right?\n\n804\n00:49:02,410 --> 00:49:03,100\nAll I need to do,\n\n805\n00:49:03,100 --> 00:49:08,340\nif I make a change in Gainesville I\nneed to get that change to Jacksonville.\n\n806\n00:49:08,340 --> 00:49:11,470\nOnce it gets to Jacksonville, one of\nthe domain controllers in Jacksonville,\n\n807\n00:49:11,470 --> 00:49:14,170\nthey can use their\nintrust site replication\n\n808\n00:49:14,170 --> 00:49:17,260\nto replicate it to all the other\ndomain controllers in Jacksonville.\n\n809\n00:49:17,260 --> 00:49:21,955\nSo I just need one domain controller to\nget it over, to one domain controller in\n\n810\n00:49:21,955 --> 00:49:25,940\nanother location, and\nthen they can use their fast, high speed,\n\n811\n00:49:25,940 --> 00:49:30,300\nreplication to get it to the other\ndomain controllers in that location.\n\n812\n00:49:30,300 --> 00:49:31,916\nThat server,\nthe one that's responsible for\n\n813\n00:49:31,916 --> 00:49:33,705\nreplicating the change from\none site to the other.\n\n814\n00:49:33,705 --> 00:49:35,780\nThat was known as the bridge head server.\n\n815\n00:49:35,780 --> 00:49:39,330\nThe ISTG will pick your\nbridge head server for you.\n\n816\n00:49:39,330 --> 00:49:42,890\nYou can manually, if you've got\na particular domain controller that's not\n\n817\n00:49:42,890 --> 00:49:47,650\ndoing as much, he's not as busy, or he's\ngot a good connection out to the Internet,\n\n818\n00:49:47,650 --> 00:49:50,040\nhe's got firewall rules\nthat allow him to go out.\n\n819\n00:49:50,040 --> 00:49:53,620\nYou might want to manually pick\nwhat your bridge head server is or\n\n820\n00:49:53,620 --> 00:49:54,940\nyou can just let the ISTG do it.\n\n821\n00:49:54,940 --> 00:49:59,190\nIf you pick it, the ISTG will respect\nyour choice and it will use it.\n\n822\n00:49:59,190 --> 00:50:02,190\nIf not, it will pick one for\nyou and it can change.\n\n823\n00:50:02,190 --> 00:50:05,650\nIt might not be the same one all the time.\n\n824\n00:50:05,650 --> 00:50:08,880\nAll right, so those are our site links.\n\n825\n00:50:08,880 --> 00:50:11,920\nWhen it comes to the planing,\nwe talked a lot about, you know,\n\n826\n00:50:11,920 --> 00:50:15,510\nhow you want to think about,\nhow do I want this replication to occur?\n\n827\n00:50:15,510 --> 00:50:19,410\nRight, how do I wanna control which domain\ncontrollers are replicating with which?\n\n828\n00:50:19,410 --> 00:50:22,430\nHow often it's occurring,\nwhen it's allowed to occur.\n\n829\n00:50:23,670 --> 00:50:24,860\nOther things we wanna consider.\n\n830\n00:50:24,860 --> 00:50:27,320\nYou know, kinda common sense.\n\n831\n00:50:27,320 --> 00:50:31,140\nBut make sure all of your\nsites are connected, right?\n\n832\n00:50:31,140 --> 00:50:34,230\nIf you've got a,\nwhen we go to troubleshoot replication.\n\n833\n00:50:34,230 --> 00:50:39,760\nIf there's no site link out to that site,\nthere's no replication going to occur.\n\n834\n00:50:39,760 --> 00:50:44,160\nThe ISTG cannot create a link between\na domain controller in the one site and\n\n835\n00:50:44,160 --> 00:50:47,810\nthe other if there's no\nsite link to go across.\n\n836\n00:50:47,810 --> 00:50:52,410\nSo we've got to make sure all of\nour sites are part of a site link.\n\n837\n00:50:52,410 --> 00:50:55,980\nWhether it's a single\nbig default site link or\n\n838\n00:50:55,980 --> 00:50:59,690\nwhether we're doing our hub or\nhowever we've decided to lay that out,\n\n839\n00:50:59,690 --> 00:51:02,450\nit's got to be part of a site so\nthat it can replicate.\n\n840\n00:51:02,450 --> 00:51:07,230\nSo when it comes to monitoring and\nresolving active directory replication\n\n841\n00:51:07,230 --> 00:51:10,470\nconflicts, a few different tools\nwe can take a look at here.\n\n842\n00:51:10,470 --> 00:51:11,720\nI've got a good link.\n\n843\n00:51:11,720 --> 00:51:14,040\nI thought I did.\n\n844\n00:51:15,730 --> 00:51:17,330\nDid I lie to you again?\n\n845\n00:51:21,590 --> 00:51:22,140\nWhere did it go?\n\n846\n00:51:22,140 --> 00:51:24,190\nThere we go.\nDo Do Do.\n\n847\n00:51:25,740 --> 00:51:29,100\nI've gotta couple other links that I\ndidn't pull up for like the site links,\n\n848\n00:51:29,100 --> 00:51:31,240\nI'll make sure again\nthese are in the notes.\n\n849\n00:51:31,240 --> 00:51:33,400\nReplication optimization,\nthings like that.\n\n850\n00:51:33,400 --> 00:51:36,440\nThere's a couple good links there that\nwe didn't actually take a look at,\n\n851\n00:51:36,440 --> 00:51:38,690\ncause we looked directly at our server.\n\n852\n00:51:38,690 --> 00:51:41,060\nLet me pull up this link here.\n\n853\n00:51:45,643 --> 00:51:48,670\nAnd this one was for\ntroubleshooting replication, right?\n\n854\n00:51:48,670 --> 00:51:51,370\nA whole bunch of different\nlinks in here that you can\n\n855\n00:51:51,370 --> 00:51:52,980\nuse depending on what your problem is.\n\n856\n00:51:52,980 --> 00:51:55,050\nIf you just want to monitor replication,\nand\n\n857\n00:51:55,050 --> 00:51:56,700\nthat's a very important part of this,\nright?\n\n858\n00:51:56,700 --> 00:52:01,050\nIf I don't know that something is not\nreplicating, then I don't have a problem,\n\n859\n00:52:01,050 --> 00:52:02,340\nI don't know that I've got a problem and\n\n860\n00:52:02,340 --> 00:52:03,760\nI'm not doing anything about it,\nall right?\n\n861\n00:52:03,760 --> 00:52:07,580\nIf I create, let's say we hire a new user,\nout there in the Jacksonville office.\n\n862\n00:52:07,580 --> 00:52:10,270\nI am here at the corporate office, they\ncall me up and they say hey, we need a new\n\n863\n00:52:10,270 --> 00:52:14,380\nuser account for so and so, he starts\non Monday, or he starts this afternoon.\n\n864\n00:52:14,380 --> 00:52:16,890\nI go and I create that new user.\n\n865\n00:52:16,890 --> 00:52:19,460\nThat afternoon, that user walks\nin the Jacksonville office.\n\n866\n00:52:19,460 --> 00:52:20,830\nThey give him the user name and password.\n\n867\n00:52:20,830 --> 00:52:22,569\nHe goes to log on and he says uh-oh.\n\n868\n00:52:22,569 --> 00:52:23,430\nRight?.\n\n869\n00:52:23,430 --> 00:52:26,510\nBecause their user out there in\nJacksonville is connecting to\n\n870\n00:52:26,510 --> 00:52:28,550\na domain controller in Jacksonville.\n\n871\n00:52:28,550 --> 00:52:32,670\nIf that user account hasn't replicated out\nto that Jacksonville domain controller,\n\n872\n00:52:32,670 --> 00:52:33,850\nthen it doesn't know about it yet.\n\n873\n00:52:33,850 --> 00:52:35,890\nSo he's not gonna be able to log on.\n\n874\n00:52:35,890 --> 00:52:38,520\nSo those are the kind of things\nthat we were gonna worry about,\n\n875\n00:52:38,520 --> 00:52:42,060\njust keeping everything up to date.\n\n876\n00:52:42,060 --> 00:52:45,260\nSo again, a couple of different tools for\nmonitoring.\n\n877\n00:52:45,260 --> 00:52:47,780\nRepadmin is a good one.\n\n878\n00:52:47,780 --> 00:52:51,390\nI've got a domain controller here\nthat I can pull up for you guys.\n\n879\n00:52:54,490 --> 00:52:56,435\nWell same one were using\nto make those sites there.\n\n880\n00:52:56,435 --> 00:52:57,180\nRepadmin.\n\n881\n00:52:57,180 --> 00:52:59,030\nThat's awfully bright blue.\n\n882\n00:52:59,030 --> 00:52:59,530\nIsn't it?\n\n883\n00:53:00,860 --> 00:53:02,290\nIs that blinding you guys out there?\n\n884\n00:53:02,290 --> 00:53:05,290\nI don't know, Jason's not screaming at me.\n\n885\n00:53:05,290 --> 00:53:06,570\nSo maybe it's not too bad.\n\n886\n00:53:08,130 --> 00:53:09,726\nHere's something a little more subtle.\n\n887\n00:53:15,351 --> 00:53:18,110\nEh, not really worth goofing around,\nI guess.\n\n888\n00:53:20,940 --> 00:53:21,890\nOof, that's even worse.\n\n889\n00:53:21,890 --> 00:53:22,850\nAll right, never mind.\n\n890\n00:53:22,850 --> 00:53:23,640\nBack to the default.\n\n891\n00:53:23,640 --> 00:53:26,116\nLet's just go with a little bit of black.\n\n892\n00:53:26,116 --> 00:53:28,249\nThat'll work.\n\n893\n00:53:28,249 --> 00:53:34,160\nSo Repadmin, is one of the tools\nwe can use to monitor replication.\n\n894\n00:53:34,160 --> 00:53:39,010\nI'll just do a /?, show you some of the\ndifferent switches you can use with this,\n\n895\n00:53:39,010 --> 00:53:40,900\nas you can see them scroll by.\n\n896\n00:53:40,900 --> 00:53:42,400\nThere's quite a few.\n\n897\n00:53:42,400 --> 00:53:45,650\nOne of the basic ones that we're\ngoing to use is this one right here.\n\n898\n00:53:45,650 --> 00:53:46,650\nShow reple.\n\n899\n00:53:46,650 --> 00:53:48,910\nThat's gonna show me my\ncurrent replication.\n\n900\n00:53:48,910 --> 00:53:52,040\nDisplays replication status when\nspecified domain controller.\n\n901\n00:53:52,040 --> 00:53:55,850\nLast attempted to inbound replicate\nactive directory partitions.\n\n902\n00:53:55,850 --> 00:53:57,150\nYou can get very specific.\n\n903\n00:53:57,150 --> 00:54:00,900\nI can look for replication information\nabout a particular object.\n\n904\n00:54:02,150 --> 00:54:05,590\nIf I'm trying to figure out why this\none user account or this group, or\n\n905\n00:54:05,590 --> 00:54:08,190\nsomething like that,\nhasn't replicated over.\n\n906\n00:54:08,190 --> 00:54:10,070\nSo we can get very specific with this.\n\n907\n00:54:10,070 --> 00:54:12,180\nIt's got a lot of different options.\n\n908\n00:54:12,180 --> 00:54:16,198\nI'll show you the results of just doing\nthat first one, repadmin showrepl.\n\n909\n00:54:16,198 --> 00:54:18,450\nRepadmin showrepl.\n\n910\n00:54:20,050 --> 00:54:23,810\nAnd here I can see I've got two domain\ncontrollers currently on this little test\n\n911\n00:54:23,810 --> 00:54:26,120\nnetwork and I can see them replicating.\n\n912\n00:54:26,120 --> 00:54:32,290\nSo here's the DC, that's my domain\npartition right there for my little test.\n\n913\n00:54:32,290 --> 00:54:34,420\nDomain or a lab.\n\n914\n00:54:34,420 --> 00:54:41,070\nAnd I can see that it's replicating to\nJack's last attempt and it was successful.\n\n915\n00:54:41,070 --> 00:54:44,270\nHere's my configuration partition\nthat's getting replicated.\n\n916\n00:54:44,270 --> 00:54:46,130\nHere's my schema partition.\n\n917\n00:54:46,130 --> 00:54:49,720\nThere's my domain DNS zone and\nthe forced DNS zone.\n\n918\n00:54:49,720 --> 00:54:51,220\nSo and really,\nI'm just looking right here.\n\n919\n00:54:51,220 --> 00:54:53,110\nIf I can see success, success, success,\n\n920\n00:54:53,110 --> 00:54:56,080\nsuccess, success,\neverything looks fine, right?\n\n921\n00:54:56,080 --> 00:55:00,180\nIf I was having an issue, I would see\nthat it maybe wasn't successful trying to\n\n922\n00:55:00,180 --> 00:55:01,490\nreplicate one of those.\n\n923\n00:55:01,490 --> 00:55:04,560\nAnd then I would dive in further and\ntry to figure out why.\n\n924\n00:55:04,560 --> 00:55:07,160\nIt could be because I don't\nhave a site link for you, or\n\n925\n00:55:07,160 --> 00:55:11,780\nit could be something more inner workings.\n\n926\n00:55:11,780 --> 00:55:13,590\nSo, we'll start there.\n\n927\n00:55:13,590 --> 00:55:17,070\nAlways start simple right, and\nwork your way through your problem.\n\n928\n00:55:17,070 --> 00:55:25,850\nAnother good tool we could use is\nDcdiag Dcdiag is a cool little tool.\n\n929\n00:55:25,850 --> 00:55:28,960\nIt has a bunch of different\nreports that we can run.\n\n930\n00:55:28,960 --> 00:55:31,101\nLet me see if I can get\nyou a list of those guys.\n\n931\n00:55:38,670 --> 00:55:39,880\nIt's awful, whoa.\n\n932\n00:55:41,053 --> 00:55:41,935\nHm.\n\n933\n00:55:41,935 --> 00:55:44,081\nThat might have gone\nright out of my buffer,\n\n934\n00:55:44,081 --> 00:55:46,990\nlet me see if I can make it back\nup to that list of tests there.\n\n935\n00:55:46,990 --> 00:55:49,601\nThere we go.\n\n936\n00:55:49,601 --> 00:55:56,257\nThese are the different tests you can run,\nadvertising, checks,\n\n937\n00:55:56,257 --> 00:56:02,650\ndrefdom, security error connectivity,\nDC promo, DNS.\n\n938\n00:56:02,650 --> 00:56:03,915\nSo a lot of different things.\n\n939\n00:56:03,915 --> 00:56:07,820\nKCC event when we're looking at\nreplication that might be one we use.\n\n940\n00:56:07,820 --> 00:56:10,581\nIntersite Checks for\nfailures that will prevent or\n\n941\n00:56:10,581 --> 00:56:13,095\ntemporarily hold up intersite replication.\n\n942\n00:56:13,095 --> 00:56:17,820\nWhy is that information not making\nit out to that Jacksonville office?\n\n943\n00:56:17,820 --> 00:56:21,745\nOne quick, I'll show you one real quick\nand then we'll take our break here.\n\n944\n00:56:21,745 --> 00:56:28,880\nDCdiag, the way you run this tool\nis you do a forward/test: and\n\n945\n00:56:28,880 --> 00:56:32,610\nthen the name of the tests\nthat you wanna run.\n\n946\n00:56:36,880 --> 00:56:37,910\nAll right.\n\n947\n00:56:37,910 --> 00:56:40,910\nAnd I think Don, I think we went through I\nthink you guys might of saw this yesterday\n\n948\n00:56:40,910 --> 00:56:43,230\nor if you were watching\nthe previous episode.\n\n949\n00:56:43,230 --> 00:56:46,560\nBut here I can see running partition,\nor running partition test on and\n\n950\n00:56:46,560 --> 00:56:52,960\nthere’s all those different partitions and\nI can see past test replications.\n\n951\n00:56:52,960 --> 00:56:56,960\nAnd that'll be different depending on\nwhich domain controllers we're looking at.\n\n952\n00:56:56,960 --> 00:56:58,660\nIn this case, two domain controllers,\n\n953\n00:56:58,660 --> 00:57:03,110\nsingle domain, both part of the same\nforest, it's replicating everything.\n\n954\n00:57:03,110 --> 00:57:05,870\nThe domain partition, the schema\npartition, the configuration partition,\n\n955\n00:57:05,870 --> 00:57:08,230\nthe domain DNS, the forest DNS zones.\n\n956\n00:57:08,230 --> 00:57:11,780\nIf these guys were in different domains\nI wouldn't see the domain partition\n\n957\n00:57:11,780 --> 00:57:13,170\nbeing replicated.\n\n958\n00:57:13,170 --> 00:57:16,780\nSo it depends on what we're\nrunning these tests on.\n\n959\n00:57:16,780 --> 00:57:19,770\nAll right, but I think that's\nprobably a good place to stop and\n\n960\n00:57:19,770 --> 00:57:24,310\ntake a little break, get up, stretch the\nlegs, refill the caffeine of your choice.\n\n961\n00:57:24,310 --> 00:57:28,600\nWhen we get back,\nwe'll dive a little more into,\n\n962\n00:57:28,600 --> 00:57:31,010\nI think we're up to designing\na domain controller strategy,\n\n963\n00:57:31,010 --> 00:57:35,090\ntake a look at global catalogs a little\nbit deeper and some other stuff like that.\n\n964\n00:57:35,090 --> 00:57:38,181\nSo you guys enjoy your break and\nI'll see you back here in a few.\n\n965\n00:57:38,181 --> 00:57:45,692\n[MUSIC]\n\n966\n00:57:45,692 --> 00:57:48,400\nAll right, welcome back ladies and\ngentlemen.\n\n967\n00:57:48,400 --> 00:57:51,730\nWe left off going through some of\nthe different things in our sites and\n\n968\n00:57:51,730 --> 00:57:52,770\nservices console.\n\n969\n00:57:52,770 --> 00:57:55,895\nSo we're talking about\nimplementing our physical design,\n\n970\n00:57:55,895 --> 00:57:59,825\ntaking that logical design that we\ndeveloped in our previous episode,\n\n971\n00:57:59,825 --> 00:58:03,995\nand then starting to implement that in\nthe physical part of active directory,\n\n972\n00:58:03,995 --> 00:58:09,525\nactually, how we're gonna make\nthat logical design function.\n\n973\n00:58:09,525 --> 00:58:12,395\nNext thing I want to talk about is,\n\n974\n00:58:12,395 --> 00:58:16,585\nyou know I just said I was gonna\ndo this and I lost my place again.\n\n975\n00:58:16,585 --> 00:58:19,680\nSo we talked about\nmonitoring active directory.\n\n976\n00:58:19,680 --> 00:58:23,390\nWe took a look at Repadmin, a really\ngood tool to use command line utility.\n\n977\n00:58:23,390 --> 00:58:27,250\nAnd we saw the DC diagnostics, and there's\na few different reports that we can get\n\n978\n00:58:27,250 --> 00:58:30,680\nback there when we're trying\nto troubleshoot replication.\n\n979\n00:58:30,680 --> 00:58:34,030\nAnother thing they mentioned in\nthere is resolving Active Directory\n\n980\n00:58:34,030 --> 00:58:35,550\nreplication conflicts.\n\n981\n00:58:36,920 --> 00:58:39,380\nAnd a couple different\nthings they call out here.\n\n982\n00:58:39,380 --> 00:58:43,540\nWhen we look at the objectives,\nthey just say monitor and\n\n983\n00:58:43,540 --> 00:58:46,810\nresolve application or\nactive directory replication complex.\n\n984\n00:58:49,340 --> 00:58:53,600\nOne thing they're talking about\nis a lack of replication, right?\n\n985\n00:58:53,600 --> 00:58:56,020\nIf I'm not replicating\nout to a particular,\n\n986\n00:58:56,020 --> 00:58:59,590\nif one of the domain controllers is not\nreplicating properly, objects aren't\n\n987\n00:58:59,590 --> 00:59:03,160\nshowing up on that particular domain\ncontroller or something like that.\n\n988\n00:59:03,160 --> 00:59:05,910\nThat's definitely something that\nwe've gotta troubleshoot and look at.\n\n989\n00:59:05,910 --> 00:59:09,900\nThat's where we use that Repadmin and\nthat DC Diagnostics to try and\n\n990\n00:59:09,900 --> 00:59:14,020\nfigure out what's preventing that\nreplication, making sure that, one,\n\n991\n00:59:14,020 --> 00:59:16,870\nthe first thing we've gotta do is\nmake sure I've got a site link.\n\n992\n00:59:16,870 --> 00:59:20,580\nIf that domain controller is not in a site\nthat doesn't have a site linked to it,\n\n993\n00:59:20,580 --> 00:59:22,340\nreplication is not gonna occur at all.\n\n994\n00:59:22,340 --> 00:59:26,140\nOtherwise, we've got to start\ndiving into those tools and\n\n995\n00:59:26,140 --> 00:59:29,170\ntry to figure out why\nit's not replicating.\n\n996\n00:59:30,270 --> 00:59:34,730\nBut really when it comes to replication,\nto me conflicts are more about\n\n997\n00:59:34,730 --> 00:59:39,570\nWhen replication is working and\nthere's a problem because,\n\n998\n00:59:39,570 --> 00:59:43,111\nremember, active directory is\na multi-master replication.\n\n999\n00:59:43,111 --> 00:59:47,660\nIt's multi-master with loose convergences,\ntheir technical term.\n\n1000\n00:59:47,660 --> 00:59:51,170\nAnd that just means that they're all\nwritable, except for the RDCs, right,\n\n1001\n00:59:51,170 --> 00:59:52,480\nthey're a special beast.\n\n1002\n00:59:52,480 --> 00:59:56,380\nBut all our domain controllers are\nwritable so we can make changes at any one\n\n1003\n00:59:56,380 --> 01:00:02,930\nof our writable domain controllers,\nand active directory, let's back up.\n\n1004\n01:00:02,930 --> 01:00:05,670\nAny time you've got two\ndifferent places or\n\n1005\n01:00:05,670 --> 01:00:11,050\nmore than one place that I can make\nchanges at, we run the risk of conflict.\n\n1006\n01:00:11,050 --> 01:00:15,370\nI could have two different administrators\non two different domain controllers\n\n1007\n01:00:15,370 --> 01:00:20,250\nMaking changes and when those changes\nreplicate, we can end up with a conflict.\n\n1008\n01:00:20,250 --> 01:00:23,510\nNow first thing that Active Directory\ndoes to limit the number of replication\n\n1009\n01:00:23,510 --> 01:00:28,480\nconflicts we're gonna have is it\nreplicates on a per attribute basis,\n\n1010\n01:00:28,480 --> 01:00:30,830\nnot on an object basis.\n\n1011\n01:00:30,830 --> 01:00:35,200\nSo in other words, if two different\nadmins, two different domain controllers,\n\n1012\n01:00:35,200 --> 01:00:40,120\nboth modifying my user account,\none of them is changing my phone number,\n\n1013\n01:00:40,120 --> 01:00:42,830\nthe other one is changing my address.\n\n1014\n01:00:42,830 --> 01:00:45,790\nThey're both modifying the same object but\n\n1015\n01:00:45,790 --> 01:00:48,600\nthey're modifying different attributes for\nthat object.\n\n1016\n01:00:48,600 --> 01:00:51,210\nSo when they replicate there's\nnot going to be a conflict\n\n1017\n01:00:51,210 --> 01:00:54,330\nbecause it does it on\na per attribute basis.\n\n1018\n01:00:54,330 --> 01:00:55,870\nSo, this changed a phone number.\n\n1019\n01:00:55,870 --> 01:00:58,200\nThis guy changed the address, no problems.\n\n1020\n01:00:58,200 --> 01:00:58,810\nIt'll replicate.\n\n1021\n01:00:58,810 --> 01:01:00,140\nHey, here's his new phone number.\n\n1022\n01:01:00,140 --> 01:01:02,790\nOh, cool I got his new phone number,\nOh, here's his new address.\n\n1023\n01:01:02,790 --> 01:01:03,970\nOk, cool, thanks.\n\n1024\n01:01:03,970 --> 01:01:05,570\nSo, that's no problem.\n\n1025\n01:01:05,570 --> 01:01:07,720\nBut, what if I have two different admins,\n\n1026\n01:01:07,720 --> 01:01:10,770\ntwo different domain controllers\nboth modifying my phone number?\n\n1027\n01:01:11,860 --> 01:01:13,920\nThat's going to cause\na replication conflict.\n\n1028\n01:01:13,920 --> 01:01:16,270\nWhen they go to replicate\nthe domain controller,\n\n1029\n01:01:16,270 --> 01:01:19,010\none domain controller is going to say\nhey I've got Mike's new phone number,\n\n1030\n01:01:19,010 --> 01:01:22,730\nthe other domain controller says no\nI've got Mike's new phone number.\n\n1031\n01:01:22,730 --> 01:01:25,030\nWhats going to happen?\n\n1032\n01:01:25,030 --> 01:01:28,630\nThat's one of the replication conflicts\nthat we can run into with active directory\n\n1033\n01:01:28,630 --> 01:01:31,500\nand what it does it\nit's just a time stamp.\n\n1034\n01:01:31,500 --> 01:01:34,410\nIt's basically the last writer wins,\nall right?\n\n1035\n01:01:34,410 --> 01:01:35,780\nIt looks at the time stamp and\n\n1036\n01:01:35,780 --> 01:01:40,050\nan update sequence number to figure\nout which change was made last.\n\n1037\n01:01:40,050 --> 01:01:43,010\nThat's the one that's going to be kept,\nthe other one is going to be lost.\n\n1038\n01:01:44,110 --> 01:01:47,330\nSecond type of conflict we can\nrun into in Active Directory\n\n1039\n01:01:47,330 --> 01:01:50,820\nis moving an object into\na deleted container.\n\n1040\n01:01:52,920 --> 01:01:58,660\nLet's say that I'm on one domain\ncontroller and I make it or\n\n1041\n01:01:58,660 --> 01:02:02,960\nI move a user account into the RNDOU,\n\n1042\n01:02:02,960 --> 01:02:08,160\nthen on another domain controller,\nanother admin deletes the RNDOU.\n\n1043\n01:02:08,160 --> 01:02:10,990\nNow when they replicate one domain\n\n1044\n01:02:10,990 --> 01:02:14,210\ncontrollers going to be saying hey we're\ngoing to move this object into the RNDOU.\n\n1045\n01:02:14,210 --> 01:02:18,215\nThe other domain controller says\nno the RNDOU is being deleted.\n\n1046\n01:02:19,795 --> 01:02:22,585\nSecond type of replication\nconflict we can run into,\n\n1047\n01:02:22,585 --> 01:02:25,045\nmoving an object into a deleted container.\n\n1048\n01:02:25,045 --> 01:02:29,802\nAnd for that one, Active Directory\nis going to move that object into\n\n1049\n01:02:29,802 --> 01:02:32,312\nwhat's called the lost and found.\n\n1050\n01:02:32,312 --> 01:02:35,485\nYou can really think of it just like\nthat box they have at the restaurant,\n\n1051\n01:02:35,485 --> 01:02:37,670\nup at the front, you know, at the podium.\n\n1052\n01:02:37,670 --> 01:02:41,810\nPeople leave sweaters and jackets and\nthings like that and they leave and\n\n1053\n01:02:41,810 --> 01:02:45,090\nthey just put it in this box,\nthen it's just the lost and found.\n\n1054\n01:02:45,090 --> 01:02:45,800\nSame thing here.\n\n1055\n01:02:45,800 --> 01:02:47,440\nYour object is gonna\nget moved into lost and\n\n1056\n01:02:47,440 --> 01:02:50,880\nfound because there is no container\nto move it to, somebody deleted it.\n\n1057\n01:02:50,880 --> 01:02:54,310\nAnd what happens is we\nhave to manually go in and\n\n1058\n01:02:54,310 --> 01:02:56,260\nthen move that object into whatever OU.\n\n1059\n01:02:56,260 --> 01:02:58,470\nEither recreate the OU or\n\n1060\n01:02:58,470 --> 01:03:01,810\ndecide somewhere else to put it,\nor whatever our decision is.\n\n1061\n01:03:01,810 --> 01:03:05,380\nThe point is active directory\ncan't really fix it\n\n1062\n01:03:05,380 --> 01:03:08,910\nbecause the object you said to\nmove it into no longer exists.\n\n1063\n01:03:08,910 --> 01:03:13,010\nSo it dumps it into the lost and\nfound and then you have to go in and\n\n1064\n01:03:13,010 --> 01:03:16,090\nmove it into the appropriate location or\nmove it back to where it came from or\n\n1065\n01:03:16,090 --> 01:03:18,020\nwhatever you choose to do.\n\n1066\n01:03:18,020 --> 01:03:20,600\nThat's the second replication\nconflict we can have.\n\n1067\n01:03:20,600 --> 01:03:23,340\nThe third replication conflict is\n\n1068\n01:03:23,340 --> 01:03:26,950\ntwo objects with the same\nrelative distinguish name.\n\n1069\n01:03:26,950 --> 01:03:30,576\nI know we've talked about\nrelative distinguish names and\n\n1070\n01:03:30,576 --> 01:03:33,980\ndistinguish names in general\nin previous episodes and\n\n1071\n01:03:33,980 --> 01:03:38,503\nI don't want to draw all that out again,\nbut let's refresh ourselves.\n\n1072\n01:03:38,503 --> 01:03:41,680\nRemember objects have what is\ncalled a distinguished name.\n\n1073\n01:03:41,680 --> 01:03:44,460\nWhen you look at an LDP\ncompliant database,\n\n1074\n01:03:44,460 --> 01:03:49,200\nthe distinguished name is basically the\npath to the object in Active Directory.\n\n1075\n01:03:49,200 --> 01:03:50,930\nI can't just talk about it, can I?\n\n1076\n01:03:50,930 --> 01:03:51,890\nLet's do a little here.\n\n1077\n01:03:53,090 --> 01:03:55,190\nLet me just pull out a new thing.\n\n1078\n01:03:55,190 --> 01:03:56,560\nI'm not going to draw it all out or\n\n1079\n01:03:56,560 --> 01:04:01,060\nanything like that, but a distinguished\nname again is the path to the object.\n\n1080\n01:04:01,060 --> 01:04:06,652\nSo, if I had a user account named Mike for\nexample, it's going to be cn=mike,\n\n1081\n01:04:06,652 --> 01:04:11,173\nand then where is that object in\nthe active directory database?\n\n1082\n01:04:11,173 --> 01:04:17,141\nMaybe it's in an OU called I don't know,\n\n1083\n01:04:17,141 --> 01:04:21,410\nIT admins, if I could spell.\n\n1084\n01:04:21,410 --> 01:04:25,850\nWhich is inside an OU called employees,\n\n1085\n01:04:28,040 --> 01:04:32,860\nwhich is in my domain DC=.\n\n1086\n01:04:32,860 --> 01:04:35,100\nI'm gonna do a really short one so\nI don't have to type a lot out.\n\n1087\n01:04:35,100 --> 01:04:41,570\nJust say itpro,dc=tv.\n\n1088\n01:04:41,570 --> 01:04:42,680\nAll right.\n\n1089\n01:04:42,680 --> 01:04:45,290\nSo that would be the distinguished\nname for that object.\n\n1090\n01:04:45,290 --> 01:04:46,440\nThat's the path to it.\n\n1091\n01:04:46,440 --> 01:04:51,040\nIf you read it backwards,\nthe domain itpro.tv, inside the domain is\n\n1092\n01:04:51,040 --> 01:04:56,010\nan OU called employees, inside\nemployees is an OU called IT admins.\n\n1093\n01:04:56,010 --> 01:04:59,570\nInside IT admins is a user\naccount named Mike, right?\n\n1094\n01:05:00,610 --> 01:05:03,000\nI have other objects in that same OU.\n\n1095\n01:05:03,000 --> 01:05:07,490\nAnd just to keep it short and\nsweet, I'm gonna cheat.\n\n1096\n01:05:10,600 --> 01:05:15,050\nAnd let's say I have another\nobject in here called Sue,\n\n1097\n01:05:15,050 --> 01:05:19,510\nall right, so we have two user\naccounts both in that same ou.\n\n1098\n01:05:19,510 --> 01:05:22,670\nMost of their name is common, right?\n\n1099\n01:05:22,670 --> 01:05:26,230\nThe whole, everything past this\npoint really is the same for\n\n1100\n01:05:26,230 --> 01:05:29,490\nboth of these all right, and\nthat distinguished name.\n\n1101\n01:05:29,490 --> 01:05:34,330\nThe relative distinguished name is what\nmakes the name of that object unique, so\n\n1102\n01:05:34,330 --> 01:05:35,950\nwe can tell the difference, right?\n\n1103\n01:05:35,950 --> 01:05:37,740\nThis one has a CN of Mike.\n\n1104\n01:05:37,740 --> 01:05:39,930\nThis one has a CN of Sue, all right?\n\n1105\n01:05:39,930 --> 01:05:45,210\nSo it's kind of like, a really easy\nanalogy would be like family names, right?\n\n1106\n01:05:45,210 --> 01:05:50,010\nAnd you know, here everybody has the same\nlast name that belongs to a family, right?\n\n1107\n01:05:50,010 --> 01:05:52,380\nSo my last name is Rodrick.\n\n1108\n01:05:52,380 --> 01:05:57,220\nSo my father, my brother,\nwe all have the last name Rodrick but\n\n1109\n01:05:57,220 --> 01:06:00,500\nhow do I differentiate between\nthe individuals within that family,\n\n1110\n01:06:00,500 --> 01:06:02,100\nwe give them unique first names.\n\n1111\n01:06:02,100 --> 01:06:04,510\nSame thing that's going on here.\n\n1112\n01:06:04,510 --> 01:06:08,510\nThese objects inside that OU, they've\ngot a common last name if you will, but\n\n1113\n01:06:08,510 --> 01:06:11,360\nthey've each got a unique first name.\n\n1114\n01:06:11,360 --> 01:06:15,220\nKind of an analogy that we can use to\nunderstand what we're talking about here.\n\n1115\n01:06:16,600 --> 01:06:20,110\nWhat can happen in Active Directory is,\nwhat if I got another object and\n\n1116\n01:06:20,110 --> 01:06:21,680\ni'm gonna cheat again.\n\n1117\n01:06:21,680 --> 01:06:23,820\nI'm just gonna copy one\nof these guys here.\n\n1118\n01:06:25,170 --> 01:06:33,260\nAnd let's say i've got a object Mike\ninside another OU called help desk.\n\n1119\n01:06:33,260 --> 01:06:34,460\nAll right?\n\n1120\n01:06:34,460 --> 01:06:38,010\nSo, I've got a user account named Mike and\nan OU called help desk which is inside\n\n1121\n01:06:38,010 --> 01:06:43,526\nemployees, which is inside\nthe domain itpro.tv right?\n\n1122\n01:06:43,526 --> 01:06:48,370\nAt this point,\nthe distinguished names are different.\n\n1123\n01:06:48,370 --> 01:06:49,267\nRight?\nSo we can tell\n\n1124\n01:06:49,267 --> 01:06:52,640\nthe difference between this\nobjectand this object.\n\n1125\n01:06:52,640 --> 01:06:53,970\nBecause they're in different OUs.\n\n1126\n01:06:55,030 --> 01:06:58,495\nWhat if an administrator moved.\n\n1127\n01:07:00,950 --> 01:07:05,400\nThis, really, you don't see this that\noften because if I tried to move this user\n\n1128\n01:07:05,400 --> 01:07:07,910\naccount into that IT admin's OU,\n\n1129\n01:07:07,910 --> 01:07:12,340\nit's not going to let me because it sees\nthe fact that there's gonna be a problem.\n\n1130\n01:07:12,340 --> 01:07:17,500\nIf I move it into itadmins, now\n\n1131\n01:07:17,500 --> 01:07:22,840\nhow do I distinguish between\nthis object and this object?\n\n1132\n01:07:22,840 --> 01:07:25,380\nThey've got the exact\nsame distinguished name.\n\n1133\n01:07:25,380 --> 01:07:27,860\nTheir relative distinguished\nname no longer\n\n1134\n01:07:27,860 --> 01:07:29,910\ndifferentiates between those two objects.\n\n1135\n01:07:29,910 --> 01:07:31,690\nSo if you try to move it.\n\n1136\n01:07:31,690 --> 01:07:34,250\nIt's not gonna work,\nit's not gonna let you, all right.\n\n1137\n01:07:34,250 --> 01:07:35,950\nBut let's say we do something like this.\n\n1138\n01:07:35,950 --> 01:07:38,420\nAll right.\n\n1139\n01:07:38,420 --> 01:07:42,440\nWhat if there's another OU,\nsay we're restructuring things.\n\n1140\n01:07:42,440 --> 01:07:48,920\nAnd there's an OU inside employees called,\nI don't know, just IT in general.\n\n1141\n01:07:48,920 --> 01:07:49,910\nAll right.\n\n1142\n01:07:49,910 --> 01:07:54,860\nAnd so what if one administrator\nmoves this account\n\n1143\n01:07:54,860 --> 01:07:57,740\nInto the OU call that,\nlet's do something different from IT.\n\n1144\n01:08:00,380 --> 01:08:03,740\nI don't know, we'll call it IT for\nsimplicity, all right?\n\n1145\n01:08:03,740 --> 01:08:06,450\nSo let's say I on one domain controller,\n\n1146\n01:08:06,450 --> 01:08:09,950\nmove that user account out\nof IT admins and into IT.\n\n1147\n01:08:09,950 --> 01:08:15,060\nAnother admin on another domain controller\nmoves this user account out of help desk\n\n1148\n01:08:15,060 --> 01:08:16,140\ninto an OU called IT.\n\n1149\n01:08:16,140 --> 01:08:21,120\nAll right, now it wasn't able to detect\nthe conflict because they haven't\n\n1150\n01:08:21,120 --> 01:08:24,300\ntalked to each other yet, we're doing\nthis on two different domain controllers.\n\n1151\n01:08:24,300 --> 01:08:27,410\nAnd so it's perfectly fine with\nme moving this object in IT.\n\n1152\n01:08:27,410 --> 01:08:31,070\nThe other domain controller has no\nproblem moving this guy into IT.\n\n1153\n01:08:31,070 --> 01:08:34,510\nBut now when they replicate we're\ngoing to have a problem, right.\n\n1154\n01:08:34,510 --> 01:08:38,600\nNow I've got two objects inside\nthat IT OU and they're both saying,\n\n1155\n01:08:38,600 --> 01:08:40,820\nhey I'm moving this object into IT.\n\n1156\n01:08:40,820 --> 01:08:42,555\nI'm moving this object into IT as well.\n\n1157\n01:08:42,555 --> 01:08:45,250\nUh-oh, we've got a problem.\n\n1158\n01:08:45,250 --> 01:08:49,640\nAnd so what active directory is going to\ndo is actually going to add to the end of\n\n1159\n01:08:49,640 --> 01:08:54,120\nthis some big, crazy,\nit's actually the GUID for the object.\n\n1160\n01:08:54,120 --> 01:08:57,850\nIt's going to be like CNF and\nthen a special character, and\n\n1161\n01:08:57,850 --> 01:09:01,070\nthen this big long GUID that's\ngoing to come after that.\n\n1162\n01:09:01,070 --> 01:09:03,900\nThat way, and I should put a comma there.\n\n1163\n01:09:05,290 --> 01:09:07,330\nNow the names are unique, right.\n\n1164\n01:09:07,330 --> 01:09:10,200\nSo now we can distinguish\nbetween this Mike and\n\n1165\n01:09:10,200 --> 01:09:13,980\nthis Mike even though\nthey're in the same OU.\n\n1166\n01:09:13,980 --> 01:09:18,540\nWhat you have to do as an admin is go\nback in and find the object that has this\n\n1167\n01:09:18,540 --> 01:09:23,090\nadded to its name and rename it,\ndo something, whatever.\n\n1168\n01:09:24,240 --> 01:09:28,110\nThen I can get rid of this\npart that is added here.\n\n1169\n01:09:29,932 --> 01:09:33,570\nAll right, and so\nagain Active Directory can't fix it for\n\n1170\n01:09:33,570 --> 01:09:38,920\nme like it can with the timestamp fixing\nthose kind of replication conflicts but\n\n1171\n01:09:38,920 --> 01:09:42,220\nit just adds something to\nthe name to make it unique and\n\n1172\n01:09:42,220 --> 01:09:46,480\nthen I have to go back in and\nfix it after the fact.\n\n1173\n01:09:46,480 --> 01:09:49,410\nSo those are the three different\ntypes of replication conflict we can\n\n1174\n01:09:49,410 --> 01:09:50,870\nrun into in Active Directory.\n\n1175\n01:09:51,920 --> 01:09:56,530\nTwo admins, different domain controllers,\nmaking changes to the same attribute.\n\n1176\n01:09:56,530 --> 01:10:00,870\nNot the same object, the same attribute\non the same object at the same time.\n\n1177\n01:10:00,870 --> 01:10:06,680\nMoving an object into a deleted container,\nor moving two objects,\n\n1178\n01:10:06,680 --> 01:10:14,765\nor ending up with a duplicate relative\ndistinguished name, all right?\n\n1179\n01:10:14,765 --> 01:10:20,495\nSo that covers our replication conflict so\nlet's go back over to my objectives here.\n\n1180\n01:10:20,495 --> 01:10:23,965\nNext thing I want to talk about is,\nthey go back into,\n\n1181\n01:10:23,965 --> 01:10:26,515\nlet me find my actual objectives.\n\n1182\n01:10:26,515 --> 01:10:30,700\nGo back into, well, I lost my place.\n\n1183\n01:10:30,700 --> 01:10:33,600\nDesign considerations\nincluding global catalog, and\n\n1184\n01:10:33,600 --> 01:10:34,900\nI've really already discussed that.\n\n1185\n01:10:34,900 --> 01:10:40,610\nI might have jumped the gun a little bit\nearlier talking about that global catalog,\n\n1186\n01:10:40,610 --> 01:10:43,600\nbut the global catalog again,\nis that index for\n\n1187\n01:10:43,600 --> 01:10:46,200\nall of the objects throughout my forest.\n\n1188\n01:10:46,200 --> 01:10:52,060\nIt has that partial attribute set for all\nof the other domains, domain partition.\n\n1189\n01:10:52,060 --> 01:10:55,900\nIf it's a single domain,\nin a single forest,\n\n1190\n01:10:55,900 --> 01:10:59,690\nthen I can really make all of my domain\ncontrollers global catalog service.\n\n1191\n01:10:59,690 --> 01:11:02,310\nBecause I'm not increasing the size.\n\n1192\n01:11:02,310 --> 01:11:06,808\nIf I've got one domain,\nthere's only one domain partition.\n\n1193\n01:11:06,808 --> 01:11:10,580\nSo I might as well just make all the\ndomain controllers global catalog servers.\n\n1194\n01:11:10,580 --> 01:11:14,160\nI'm not increasing any replications or\nanything like that.\n\n1195\n01:11:14,160 --> 01:11:18,250\nWhen I go to multiple domains that's when\nwe've got to consider what's going to\n\n1196\n01:11:18,250 --> 01:11:23,965\nhappen with that replication because it is\ngonna have that partial attribute set for\n\n1197\n01:11:23,965 --> 01:11:28,665\nall of the domains in that forest,\nall right?\n\n1198\n01:11:28,665 --> 01:11:29,795\nLet's see.\nSo again,\n\n1199\n01:11:29,795 --> 01:11:31,525\nI think we've covered that pretty well.\n\n1200\n01:11:33,325 --> 01:11:36,975\nNext thing I wanna talk about is the,\noh, and I did mention, remember,\n\n1201\n01:11:36,975 --> 01:11:39,595\nwe talked about the universal\ngroup membership caching.\n\n1202\n01:11:39,595 --> 01:11:44,000\nIf you've got a scenario\nwhere in my design,\n\n1203\n01:11:44,000 --> 01:11:47,920\nI wanna put a domain controller out\nthere at that branch office, but\n\n1204\n01:11:47,920 --> 01:11:50,360\nI've got limited bandwidth\nout to that branch office.\n\n1205\n01:11:50,360 --> 01:11:53,720\nI might not want to make that to\nmain controller catalog server.\n\n1206\n01:11:53,720 --> 01:11:56,830\nMicrosoft's gonna recommend that we try\nto make all our domain controllers global\n\n1207\n01:11:56,830 --> 01:12:01,460\ncatalog servers, but there are situations\nwhen that's just not appropriate.\n\n1208\n01:12:01,460 --> 01:12:04,450\nLow bandwidth being the big one.\n\n1209\n01:12:04,450 --> 01:12:07,360\nSo in that case, we do that\nuniversal group membership caching.\n\n1210\n01:12:07,360 --> 01:12:10,258\nI didn't show you guys that,\nlet me pull up my sites and\n\n1211\n01:12:10,258 --> 01:12:12,845\nservices console because\nit's very easy to do.\n\n1212\n01:12:12,845 --> 01:12:16,806\nOne of these machines\nhere Back in sites and\n\n1213\n01:12:16,806 --> 01:12:21,980\nservices, this is actually\ndone at the site level.\n\n1214\n01:12:21,980 --> 01:12:25,100\nWhen you enable universal\ngroup membership caching,\n\n1215\n01:12:25,100 --> 01:12:29,260\nit's gonna be done at the site level\nnot an individual domain controller.\n\n1216\n01:12:29,260 --> 01:12:33,530\nSo in other words, if I've got three\ndomain controllers out there at that\n\n1217\n01:12:33,530 --> 01:12:35,800\nbranch office, well let's say two.\n\n1218\n01:12:35,800 --> 01:12:38,050\nIt's a branch office\nwith limited bandwidth.\n\n1219\n01:12:38,050 --> 01:12:40,100\nI've got more than one for\nfall tolerances,\n\n1220\n01:12:40,100 --> 01:12:42,610\nlet's say I've got two domain\ncontrollers out there.\n\n1221\n01:12:42,610 --> 01:12:45,590\nI don't enable universal\ngroup membership caching on\n\n1222\n01:12:45,590 --> 01:12:48,910\nan individual domain controller,\nit's actually done at the site level.\n\n1223\n01:12:48,910 --> 01:12:51,620\nSo, if I come in here and\nI take a look at Jacksonville.\n\n1224\n01:12:51,620 --> 01:12:54,810\nI've got my NTDS site settings out here.\n\n1225\n01:12:54,810 --> 01:12:57,130\nAnd if I pull up my NTDS site settings for\n\n1226\n01:12:57,130 --> 01:12:59,960\nthe Jacksonville site,\nit's just a check mark right here.\n\n1227\n01:12:59,960 --> 01:13:02,950\nEnable universal group membership caching.\n\n1228\n01:13:02,950 --> 01:13:04,670\nIf I put a check mark in there.\n\n1229\n01:13:04,670 --> 01:13:05,220\nI click OK.\n\n1230\n01:13:05,220 --> 01:13:06,420\nAnd now,\n\n1231\n01:13:06,420 --> 01:13:10,370\nall domain controllers at that site will\ndo the universal group membership caching.\n\n1232\n01:13:10,370 --> 01:13:14,020\nAnd that way I don't have\na global catalog out there, but\n\n1233\n01:13:14,020 --> 01:13:17,850\nmy users can still log on\nwhen that WAN link is down.\n\n1234\n01:13:17,850 --> 01:13:19,840\nBecause there's a domain controller, and\n\n1235\n01:13:19,840 --> 01:13:22,810\nit has cached their universal\ngroup membership information.\n\n1236\n01:13:22,810 --> 01:13:28,090\nSo, it can properly build that access\ntoken and allow them to log on.\n\n1237\n01:13:29,730 --> 01:13:30,369\nAll right.\n\n1238\n01:13:30,369 --> 01:13:32,190\nSo, that takes care of that.\n\n1239\n01:13:32,190 --> 01:13:33,960\nNext thing we want to look at then,\n\n1240\n01:13:33,960 --> 01:13:38,150\nI really gotta do a better job\nof printing out my own notes.\n\n1241\n01:13:38,150 --> 01:13:43,785\nWere going to take a peak\nat Operations master roles.\n\n1242\n01:13:43,785 --> 01:13:48,075\nAnd, again, this is another thing that\nwe've talked about in our other episodes,\n\n1243\n01:13:48,075 --> 01:13:51,845\nin 410, I think 411 or 412, one of those.\n\n1244\n01:13:51,845 --> 01:13:53,755\nI think it was 411.\n\n1245\n01:13:53,755 --> 01:13:57,154\nWhere we talked about the FSMOs,\nor the F-S-M-O,\n\n1246\n01:13:57,154 --> 01:13:59,807\nthe Flexible Single Master Operations.\n\n1247\n01:13:59,807 --> 01:14:01,338\nThe Operation Masters.\n\n1248\n01:14:01,338 --> 01:14:03,437\nThe Single Operations Masters.\n\n1249\n01:14:03,437 --> 01:14:06,260\nI mean, there's several different\nnames and acronyms they use.\n\n1250\n01:14:06,260 --> 01:14:08,460\nThey're all talking about the same thing.\n\n1251\n01:14:08,460 --> 01:14:09,710\nAnd there's five of them.\n\n1252\n01:14:09,710 --> 01:14:13,930\nIf you remember from our previous shows,\nthere's five FSMOs.\n\n1253\n01:14:13,930 --> 01:14:17,760\nThere's two that are forest-wide.\n\n1254\n01:14:17,760 --> 01:14:24,340\nWe've got our, if I can remember them, the\nScema Master and the Domain Naming Master.\n\n1255\n01:14:24,340 --> 01:14:25,910\nThese guys are forest-wide.\n\n1256\n01:14:25,910 --> 01:14:31,240\nWhat that means is there is one\nschema master for the entire forest.\n\n1257\n01:14:31,240 --> 01:14:31,840\nLet's back up.\n\n1258\n01:14:31,840 --> 01:14:35,810\nLet's refresh about what these FSMOs\nare real quick before we dive into them.\n\n1259\n01:14:35,810 --> 01:14:39,710\nRemember, Active Directory is\na multi-master replication model.\n\n1260\n01:14:39,710 --> 01:14:42,250\nThat means they're all the same, right?\n\n1261\n01:14:42,250 --> 01:14:44,650\nThey've all got the same information.\n\n1262\n01:14:44,650 --> 01:14:47,050\nThey can all make changes.\n\n1263\n01:14:47,050 --> 01:14:51,380\nThere are certain things in active\ndirectory that I cannot take a chance.\n\n1264\n01:14:51,380 --> 01:14:53,700\nAnytime you've got more\nthan one writable copy,\n\n1265\n01:14:53,700 --> 01:14:56,120\nwe've got the possibility of conflict.\n\n1266\n01:14:56,120 --> 01:14:58,960\nThere are some things that I\ncan't take that chance with.\n\n1267\n01:14:58,960 --> 01:15:02,260\nI cannot take a chance on\na replication conflict.\n\n1268\n01:15:02,260 --> 01:15:03,440\nThose other things we talked about,\n\n1269\n01:15:03,440 --> 01:15:07,540\nmoving a user into a deleted container,\nnot the end of the world.\n\n1270\n01:15:07,540 --> 01:15:11,580\nIt puts it in lost and found,\nwe go fix it, no big deal.\n\n1271\n01:15:11,580 --> 01:15:13,850\nSome things though,\nI can't take that chance.\n\n1272\n01:15:13,850 --> 01:15:15,690\nThat's what my FSMOs are for.\n\n1273\n01:15:15,690 --> 01:15:19,390\nThose are the ones where only\none domain controller can do it.\n\n1274\n01:15:19,390 --> 01:15:21,620\nOnly one guy can be in charge of it.\n\n1275\n01:15:21,620 --> 01:15:25,398\nThere are the two forest wide, the Schema\nMaster and the Domain Naming Master.\n\n1276\n01:15:25,398 --> 01:15:26,340\nThose are forest wide,\n\n1277\n01:15:26,340 --> 01:15:29,700\nmeaning there's only one domain\ncontrolling the entire forest.\n\n1278\n01:15:29,700 --> 01:15:30,990\nThat's the Schema Master.\n\n1279\n01:15:30,990 --> 01:15:33,150\nOnly one.\nNo matter how many domains you have.\n\n1280\n01:15:33,150 --> 01:15:35,410\nNo matter how many domain\ncontrollers you have.\n\n1281\n01:15:35,410 --> 01:15:37,130\nThere's one Schema Master.\n\n1282\n01:15:37,130 --> 01:15:40,429\nThere's one Domain Naming Master\nin your entire forest.\n\n1283\n01:15:41,590 --> 01:15:44,660\nThe other three are domain wide rules.\n\n1284\n01:15:44,660 --> 01:15:46,630\nMeaning there's gonna be one per domain.\n\n1285\n01:15:46,630 --> 01:15:49,790\nMy RID master,\nmy relative identifier master.\n\n1286\n01:15:49,790 --> 01:15:53,820\nMy PDC emulator,\nmy primary domain controller emulator.\n\n1287\n01:15:53,820 --> 01:15:56,350\nAnd my infrastructure master.\n\n1288\n01:15:56,350 --> 01:16:01,950\nThose three are domain wide, meaning\neach domain has it's own RID master,\n\n1289\n01:16:01,950 --> 01:16:06,420\nPDC emulator and infrastructure master but\nthere's only one in that domain.\n\n1290\n01:16:06,420 --> 01:16:11,400\nSeparate domain has it's own rid master,\ninfrastructure master and\n\n1291\n01:16:11,400 --> 01:16:14,740\nPDC emulator.\n\n1292\n01:16:14,740 --> 01:16:17,190\nAll right.\nAnd again, I think we probably,\n\n1293\n01:16:17,190 --> 01:16:20,430\nif you're unfamiliar with\nwhat those FSMO's are doing,\n\n1294\n01:16:20,430 --> 01:16:24,160\nprobably go check out 411 and\nrefresh there.\n\n1295\n01:16:24,160 --> 01:16:25,770\nJust a real quick refresher for\n\n1296\n01:16:25,770 --> 01:16:29,870\nyou guys for here, the schema master is\nthe only writable copy of the schema.\n\n1297\n01:16:29,870 --> 01:16:34,490\nIf I wanna make changes to the schema, I\nhave to find the schema master to do that.\n\n1298\n01:16:34,490 --> 01:16:37,240\nHe's got the only writable\ncopy of the schema.\n\n1299\n01:16:37,240 --> 01:16:40,470\nThe domain naming master\nis responsible for that.\n\n1300\n01:16:40,470 --> 01:16:44,350\nHe reads information from\nthe configuration partition of active\n\n1301\n01:16:44,350 --> 01:16:49,940\ndirectory, and he's responsible for when\nwe add new domains to the dope forest.\n\n1302\n01:16:49,940 --> 01:16:52,030\nHe has to make sure that name is unique.\n\n1303\n01:16:52,030 --> 01:16:55,830\nAnd keep track of when we\nremove domains from our forest.\n\n1304\n01:16:55,830 --> 01:16:57,190\nYou've got the rid master,\n\n1305\n01:16:57,190 --> 01:16:59,990\nwhich is the one that generates\nthe relative identifiers.\n\n1306\n01:16:59,990 --> 01:17:03,020\nRemember a SID, a security identifier.\n\n1307\n01:17:03,020 --> 01:17:04,810\nEvery object and active directory,\n\n1308\n01:17:04,810 --> 01:17:08,980\nevery security principle I should say,\nhas an SID associated with it.\n\n1309\n01:17:08,980 --> 01:17:12,710\nAnd that number has to be unique.\n\n1310\n01:17:12,710 --> 01:17:14,660\nThe SID is actually made up of two parts.\n\n1311\n01:17:14,660 --> 01:17:17,940\nThe domain identifier and\nthe relative identifier.\n\n1312\n01:17:17,940 --> 01:17:23,760\nIf more than one domain controller was\ncoming up with these relative identifiers,\n\n1313\n01:17:23,760 --> 01:17:26,260\nthere's a chance we could end\nup with a conflict, right?\n\n1314\n01:17:26,260 --> 01:17:28,640\nThey weren't talking to each other,\none of them said, hey,\n\n1315\n01:17:28,640 --> 01:17:31,270\nthe next number you can use when\nyou create an object is 1025.\n\n1316\n01:17:31,270 --> 01:17:34,220\nA different domain controller says, yeah.\n\n1317\n01:17:34,220 --> 01:17:38,480\nI'm gonna use RID number 1025 for\nthat new user account that you made.\n\n1318\n01:17:38,480 --> 01:17:41,080\nNow, I've got two objects with\nthe same relative identifier and\n\n1319\n01:17:41,080 --> 01:17:42,570\nthat is not going to work.\n\n1320\n01:17:42,570 --> 01:17:46,070\nSo, that's why there's only one\ndomain controller in charge of\n\n1321\n01:17:46,070 --> 01:17:48,300\ngenerating those relative identifiers.\n\n1322\n01:17:48,300 --> 01:17:51,980\nSo that he knows which ones he's used and\nwhich ones he hasn't used and\n\n1323\n01:17:51,980 --> 01:17:53,710\nthere's no chance at conflict.\n\n1324\n01:17:53,710 --> 01:17:55,840\nThe PDC emulator, one per domain.\n\n1325\n01:17:55,840 --> 01:17:58,440\nThat's where my password\nchanges go through.\n\n1326\n01:17:58,440 --> 01:17:59,930\nIt's that single point.\n\n1327\n01:18:00,950 --> 01:18:02,830\nThat's a good way to say it.\n\n1328\n01:18:02,830 --> 01:18:05,010\nThe problem is that when\nyou change your password,\n\n1329\n01:18:05,010 --> 01:18:08,950\nyou talk to a domain controller and\nyou update your password.\n\n1330\n01:18:08,950 --> 01:18:13,000\nAnd that update, that password change\nis eventually gonna replicate to all\n\n1331\n01:18:13,000 --> 01:18:15,270\nthe other domain\ncontrollers in your domain.\n\n1332\n01:18:15,270 --> 01:18:18,470\nBut what if I change my password and\nthen log off?\n\n1333\n01:18:18,470 --> 01:18:20,060\nAnd then I log back on.\n\n1334\n01:18:20,060 --> 01:18:22,510\nBut this time I have to talk to\na different domain controller, right?\n\n1335\n01:18:22,510 --> 01:18:25,130\nAny one of the domain controllers\nin my domain can authenticate me.\n\n1336\n01:18:25,130 --> 01:18:27,430\nThey all know my username and password.\n\n1337\n01:18:27,430 --> 01:18:30,960\nSo, I might end up talking to\na different domain controller and\n\n1338\n01:18:30,960 --> 01:18:33,630\nnow he doesn't know about\nmy new password yet.\n\n1339\n01:18:33,630 --> 01:18:35,310\nIt hasn't replicated over to him yet.\n\n1340\n01:18:35,310 --> 01:18:36,960\nAnd he's going to deny my authentication.\n\n1341\n01:18:38,560 --> 01:18:43,120\nSo, in order to alleviate that type\nof situation, as soon as I change my\n\n1342\n01:18:43,120 --> 01:18:48,020\npassword with one domain controller,\nhe immediately notifies the PDC emulator.\n\n1343\n01:18:48,020 --> 01:18:50,810\nAnd then eventually it's gonna replicate\nto all of the other domain controllers\n\n1344\n01:18:50,810 --> 01:18:52,140\nthrough the normal process.\n\n1345\n01:18:52,140 --> 01:18:55,380\nBut he's going to immediately\nnotify the PDC emulator.\n\n1346\n01:18:55,380 --> 01:18:59,430\nThat way if I go to change my password,\nlog off, log back on and\n\n1347\n01:18:59,430 --> 01:19:01,010\ntalk to another domain controller.\n\n1348\n01:19:01,010 --> 01:19:03,840\nType in my new password\nbefore he denies me.\n\n1349\n01:19:03,840 --> 01:19:05,990\nBefore he says that's not your password.\n\n1350\n01:19:05,990 --> 01:19:07,900\nHe goes and checks with the PDC emulator.\n\n1351\n01:19:07,900 --> 01:19:12,180\nHey, has this guy changed his password and\nit just hasn't replicated over to me yet?\n\n1352\n01:19:12,180 --> 01:19:13,120\nOh, he has?\n\n1353\n01:19:13,120 --> 01:19:13,860\nGreat, cool.\n\n1354\n01:19:13,860 --> 01:19:15,720\nThen he's going to allow me to log on.\n\n1355\n01:19:15,720 --> 01:19:20,010\nSo, it's that single point where he's the\none that knows about all password changes\n\n1356\n01:19:20,010 --> 01:19:23,900\nso that we don't have to wait for\nthat replication of that password change.\n\n1357\n01:19:23,900 --> 01:19:24,810\nAnd he does other things.\n\n1358\n01:19:24,810 --> 01:19:28,810\nHe's also the time synchronization\nsource for my domain.\n\n1359\n01:19:28,810 --> 01:19:30,910\nTrying to think of what else he does.\n\n1360\n01:19:30,910 --> 01:19:34,710\nHe's the default location for\nediting group policies.\n\n1361\n01:19:34,710 --> 01:19:37,640\nSo, he's a very important, very busy role.\n\n1362\n01:19:37,640 --> 01:19:38,650\nWhich one did I leave out?\n\n1363\n01:19:39,710 --> 01:19:41,410\nThe infrastructure master.\n\n1364\n01:19:41,410 --> 01:19:43,650\nThe infrastructure master,\nit's a weird one.\n\n1365\n01:19:43,650 --> 01:19:46,030\nIt's kind of difficult,\nalmost, to describe.\n\n1366\n01:19:46,030 --> 01:19:49,680\nThe infrastructure master\nis responsible for\n\n1367\n01:19:49,680 --> 01:19:52,580\nmaintaining references to\nobjects from other domains.\n\n1368\n01:19:53,610 --> 01:19:58,890\nLike, if I create a universal group, I can\ntake a global group from another domain\n\n1369\n01:19:58,890 --> 01:20:01,470\nand add it as a member\nto that universal group.\n\n1370\n01:20:01,470 --> 01:20:04,630\nWell my domain controllers don't\nhave that global group, right?\n\n1371\n01:20:04,630 --> 01:20:07,760\nThat's in the domain partition\nof that other domain.\n\n1372\n01:20:07,760 --> 01:20:09,529\nSo, if there's changes\nto that global group,\n\n1373\n01:20:09,529 --> 01:20:11,577\nmy domain controllers aren't\ngoing to be aware of it.\n\n1374\n01:20:11,577 --> 01:20:14,054\nThe infrastructure master\nis what's responsible for\n\n1375\n01:20:14,054 --> 01:20:15,680\ntracking that kind of thing.\n\n1376\n01:20:15,680 --> 01:20:21,623\nTracking changes to objects that\nare referenced In other domains, right?\n\n1377\n01:20:21,623 --> 01:20:24,916\nNow interesting about\nthe Infrastructure Master,\n\n1378\n01:20:24,916 --> 01:20:29,980\nI don't wanna put the Infrastructure\nMaster on a global catalog server.\n\n1379\n01:20:29,980 --> 01:20:33,160\nBecause his job is to check\nreferences to foreign objects,\n\n1380\n01:20:33,160 --> 01:20:35,270\nobjects from other domains.\n\n1381\n01:20:35,270 --> 01:20:38,860\nBut a Global Catalog server\nhas the domain partition for\n\n1382\n01:20:38,860 --> 01:20:40,840\nall the domains in my forest.\n\n1383\n01:20:40,840 --> 01:20:42,550\nSo nothing looks foreign to him.\n\n1384\n01:20:42,550 --> 01:20:45,680\nHe's got access to every single\nobject in the entire forest.\n\n1385\n01:20:45,680 --> 01:20:49,090\nSo the Infrastructure Master says I ain't\ngot nothing to do, and he won't run.\n\n1386\n01:20:49,090 --> 01:20:51,410\nHe won't do his job properly.\n\n1387\n01:20:51,410 --> 01:20:53,610\nSo two ways we handle this.\n\n1388\n01:20:53,610 --> 01:20:58,000\nOne, don't put the Infrastructure Master\non a Global Catalog server.\n\n1389\n01:20:58,000 --> 01:20:58,810\nSimple enough, right?\n\n1390\n01:20:58,810 --> 01:21:00,970\nThat way he does his job.\n\n1391\n01:21:00,970 --> 01:21:04,660\nBut wait, Mike, didn't you just say\na little bit ago that Microsoft says make\n\n1392\n01:21:04,660 --> 01:21:07,890\nall your domain controllers\nGlobal Catalog servers?\n\n1393\n01:21:07,890 --> 01:21:08,520\nYes.\n\n1394\n01:21:08,520 --> 01:21:11,225\nAnd if you do that,\nthe Infrastructure Master,\n\n1395\n01:21:11,225 --> 01:21:13,655\nto roll at that point is pretty\nmuch unnecessary, right?\n\n1396\n01:21:13,655 --> 01:21:17,105\nBecause every domain controller knows\nabout every object in the forest,\n\n1397\n01:21:17,105 --> 01:21:21,975\nand there's no need for anybody to track\nreferences to these foreign objects.\n\n1398\n01:21:21,975 --> 01:21:25,175\nSo if you make all your domain\ncontrollers Global Catalog servers,\n\n1399\n01:21:25,175 --> 01:21:26,985\nthen you don't need\nthe Infrastructure Master roll.\n\n1400\n01:21:26,985 --> 01:21:30,909\nIt's gonna be there, but it just won't\nstart up, it won't do anything, all right?\n\n1401\n01:21:31,970 --> 01:21:35,010\nOne of the important things\nwe need to be able to do is\n\n1402\n01:21:35,010 --> 01:21:36,710\nfigure out where these guys are.\n\n1403\n01:21:36,710 --> 01:21:37,380\nAll right?\n\n1404\n01:21:37,380 --> 01:21:39,750\nWho are my role holders?\n\n1405\n01:21:39,750 --> 01:21:41,760\nI really need to be aware of that.\n\n1406\n01:21:41,760 --> 01:21:45,910\nRemember, there's only one PDC\nemulator in my entire domain.\n\n1407\n01:21:45,910 --> 01:21:48,580\nIf that particular domain\ncontroller goes down.\n\n1408\n01:21:48,580 --> 01:21:52,070\nYou know, if a Domain Controller goes\ndown in general, no big deal, right?\n\n1409\n01:21:52,070 --> 01:21:54,130\nI've got more Domain Controllers for\nfault tolerance.\n\n1410\n01:21:54,130 --> 01:21:58,000\nThey all have the same information, we're\nokay, except for the fact that that guy\n\n1411\n01:21:58,000 --> 01:22:01,382\nwas a role holder, and he was the only\none doing that particular job.\n\n1412\n01:22:01,382 --> 01:22:03,090\nAll right?\n\n1413\n01:22:03,090 --> 01:22:06,010\nSo I need to make sure which\nones are the role holders.\n\n1414\n01:22:06,010 --> 01:22:08,770\nAnd I might need to plan\nin my design which ones.\n\n1415\n01:22:08,770 --> 01:22:10,350\nI might wanna move them.\n\n1416\n01:22:10,350 --> 01:22:13,880\nWhen you first set up your very\nfirst domain controller and\n\n1417\n01:22:13,880 --> 01:22:17,760\nyour very first domain, right,\nyou're starting from scratch.\n\n1418\n01:22:17,760 --> 01:22:19,700\nYou created that first domain controller.\n\n1419\n01:22:19,700 --> 01:22:21,030\nThere aren't any others.\n\n1420\n01:22:21,030 --> 01:22:24,360\nThat guy has all five roles, right?\n\n1421\n01:22:24,360 --> 01:22:26,010\nSo we take our domain.\n\n1422\n01:22:26,010 --> 01:22:30,750\nI don't know if I wanna try\nto draw that out on the fly.\n\n1423\n01:22:30,750 --> 01:22:32,820\nWe set up that very\nfirst domain controller.\n\n1424\n01:22:32,820 --> 01:22:35,850\nHe's gonna have all five roles,\nthe two forest wide roles\n\n1425\n01:22:35,850 --> 01:22:40,070\nas well as the three domain wide roles for\nthat new domain.\n\n1426\n01:22:40,070 --> 01:22:44,070\nAs I add other domain\ncontrollers to that forest route\n\n1427\n01:22:44,070 --> 01:22:48,310\nI could choose to move some of those\nroles onto different domain controllers.\n\n1428\n01:22:48,310 --> 01:22:54,510\nMaybe I wanna spread that workload out\na little bit, or something like that.\n\n1429\n01:22:54,510 --> 01:22:58,610\nThen when I add a second domain,\nthe first domain controller in\n\n1430\n01:22:58,610 --> 01:23:03,050\nthat second domain is gonna have\nall three domain-wide roles.\n\n1431\n01:23:03,050 --> 01:23:05,930\nDoesn't get the forest wide roles\nThere's only one per forest,\n\n1432\n01:23:05,930 --> 01:23:08,140\nand I've already got\nthat in the forest root.\n\n1433\n01:23:08,140 --> 01:23:11,270\nBut he would have all three\nof the domain wide rules and\n\n1434\n01:23:11,270 --> 01:23:13,480\nthen I can choose to move them if I want.\n\n1435\n01:23:13,480 --> 01:23:16,660\nAnd I'm pretty sure we talked\nabout that back in 411.\n\n1436\n01:23:16,660 --> 01:23:19,140\nWe talked about transferring.\n\n1437\n01:23:19,140 --> 01:23:20,880\nOr seizing those roles.\n\n1438\n01:23:20,880 --> 01:23:25,150\nI think we talked about\nfinding out who they are, but\n\n1439\n01:23:25,150 --> 01:23:27,980\nI'll show you one more time just in case.\n\n1440\n01:23:27,980 --> 01:23:30,900\nNow, there's a couple different\nways you can do this.\n\n1441\n01:23:30,900 --> 01:23:32,240\nAll right?\n\n1442\n01:23:32,240 --> 01:23:33,810\nYou can go to different consoles.\n\n1443\n01:23:33,810 --> 01:23:36,380\nLike, here's Active Directory Sites and\nServices.\n\n1444\n01:23:36,380 --> 01:23:40,130\nAnd I can come up here and actually\nit's not gonna be in this one, is it.\n\n1445\n01:23:40,130 --> 01:23:42,790\nI can go into Domains and Trusts.\n\n1446\n01:23:42,790 --> 01:23:46,500\nSo if I go Tools and\nthen Active Directory Domains and Trusts.\n\n1447\n01:23:48,300 --> 01:23:51,710\nI can pull up the properties here for\nmy, or\n\n1448\n01:23:51,710 --> 01:23:54,100\nI can right-click on Active\ndirectory domains and trusts itself.\n\n1449\n01:23:54,100 --> 01:23:54,790\nUp here at the top.\n\n1450\n01:23:56,650 --> 01:23:59,100\nAnd I can see Operations Master.\n\n1451\n01:23:59,100 --> 01:24:04,390\nIf I click on that I'm gonna see who\nthe domain naming master currently is.\n\n1452\n01:24:04,390 --> 01:24:07,290\nAnd who I'm planning\non transferring it to.\n\n1453\n01:24:07,290 --> 01:24:09,680\nAnd so there's my domain naming master.\n\n1454\n01:24:09,680 --> 01:24:12,670\nThat's done in\nActive Directory Domains and Trusts.\n\n1455\n01:24:12,670 --> 01:24:18,040\nIf I wanna see my three domain wide rolls,\nright?\n\n1456\n01:24:18,040 --> 01:24:21,120\nThen I'm gonna use\nActive Directory Users and Computers.\n\n1457\n01:24:22,770 --> 01:24:25,600\nSame thing, I go into\nActive Directory Users and Computers,\n\n1458\n01:24:25,600 --> 01:24:30,960\nI'm gonna right-click on my domain and\nchoose Operations Masters.\n\n1459\n01:24:30,960 --> 01:24:34,880\nAnd here I can see my RID master,\nmy PDC emulator.\n\n1460\n01:24:34,880 --> 01:24:35,875\nAnd my Infrastructure Master.\n\n1461\n01:24:35,875 --> 01:24:36,440\nRight?\n\n1462\n01:24:36,440 --> 01:24:41,815\nAnd the one I cannot do by default\nout of the GUI, is the Schema Master.\n\n1463\n01:24:41,815 --> 01:24:44,580\nRight?\nIf we look over here in tools, there is no\n\n1464\n01:24:44,580 --> 01:24:50,860\nactive directory schema snap-in by default\nbecause the schema is extremely protected.\n\n1465\n01:24:50,860 --> 01:24:54,390\nThey don't want anybody accidentally or\ngoofing around in there.\n\n1466\n01:24:54,390 --> 01:25:00,350\nSo what I need to do in order to see that\nis I need to register the schema snap-in.\n\n1467\n01:25:00,350 --> 01:25:03,310\nRight, if I go into\na Microsoft management console.\n\n1468\n01:25:05,490 --> 01:25:07,907\nAnd I do a little file, add/remove,\n\n1469\n01:25:07,907 --> 01:25:10,310\nsnap-in, there is no\nactive directory schema.\n\n1470\n01:25:10,310 --> 01:25:11,410\nAll right?\n\n1471\n01:25:11,410 --> 01:25:15,190\nI don't have a snap-in for\nthat tool, all right?\n\n1472\n01:25:15,190 --> 01:25:18,610\nSo what need to do is\npull-up a command prompt.\n\n1473\n01:25:18,610 --> 01:25:19,860\nAnd run a little.\n\n1474\n01:25:19,860 --> 01:25:21,520\nAnd that's awfully small.\n\n1475\n01:25:21,520 --> 01:25:22,879\nLet me fix that for you guys.\n\n1476\n01:25:28,057 --> 01:25:33,875\nAll right,\nwe'll make that a little bit easier for\n\n1477\n01:25:33,875 --> 01:25:37,750\nyou guys to see out there.\n\n1478\n01:25:37,750 --> 01:25:40,345\nI'm gonna do a regsvr32 schmmgmt.dll.\n\n1479\n01:25:40,345 --> 01:25:43,190\nAnd I always get that backwards.\n\n1480\n01:25:43,190 --> 01:25:44,770\nMicrosoft, they switched this.\n\n1481\n01:25:44,770 --> 01:25:47,960\nSometimes it's SRV, sometimes its SVR.\n\n1482\n01:25:47,960 --> 01:25:51,862\nAnd I just try one and\nthen try the other one.\n\n1483\n01:25:51,862 --> 01:25:57,700\nSo regsvr32,schm for schema,\nmgmt for management.dll.\n\n1484\n01:25:57,700 --> 01:26:01,390\nAnd it tells me that my schema\nmanagement snap-in was registered,\n\n1485\n01:26:01,390 --> 01:26:05,270\nnow that it's registered I\ncan come back over to my MMC,\n\n1486\n01:26:05,270 --> 01:26:10,675\ndo a file Add/Remove snap-in and now I\nsee my active directory schema snap-in.\n\n1487\n01:26:10,675 --> 01:26:11,480\nAll right?\n\n1488\n01:26:11,480 --> 01:26:13,030\nSo I add that guy over here.\n\n1489\n01:26:13,030 --> 01:26:13,920\nI'll click OK.\n\n1490\n01:26:13,920 --> 01:26:16,770\nAnd now I've got my\nactive directory schema.\n\n1491\n01:26:16,770 --> 01:26:18,190\nAnd we're gonna come back and\n\n1492\n01:26:18,190 --> 01:26:21,280\nuse this a little bit later\nin our episode after lunch.\n\n1493\n01:26:21,280 --> 01:26:26,340\nWe'll probably talk about making some\nchanges to some of these attributes.\n\n1494\n01:26:26,340 --> 01:26:27,636\nBut I am going to.\n\n1495\n01:26:27,636 --> 01:26:32,960\nOh yeah so the schema master now that\nI've got this snap-in registered.\n\n1496\n01:26:32,960 --> 01:26:34,960\nI can right-click in here.\n\n1497\n01:26:34,960 --> 01:26:39,460\nOperations master and\nI can see who my current schema master is.\n\n1498\n01:26:39,460 --> 01:26:42,925\nAnd you might have noticed as I opened\neach one of these up everyone of them was\n\n1499\n01:26:42,925 --> 01:26:47,460\nDC1 because that was the first domain\ncontroller I created in my forest.\n\n1500\n01:26:47,460 --> 01:26:50,030\nAnd I haven't bothered to move\nthose rolls anywhere else,\n\n1501\n01:26:50,030 --> 01:26:52,730\nso all five of them are currently on DC1.\n\n1502\n01:26:52,730 --> 01:26:57,230\nLet me save this so\nI don't have to recreate this later.\n\n1503\n01:27:05,775 --> 01:27:07,625\nDump that out on my desktop.\n\n1504\n01:27:07,625 --> 01:27:09,965\nThat was how we can do it through the GUI,\nbut\n\n1505\n01:27:09,965 --> 01:27:11,695\nnotice I had to go to three\ndifferent places, right?\n\n1506\n01:27:11,695 --> 01:27:15,755\nThe schema console to figure out who\nthe schema master was, domains and\n\n1507\n01:27:15,755 --> 01:27:19,665\ntrusts to figure out who the domain naming\nmaster was, those two four swipe rules.\n\n1508\n01:27:19,665 --> 01:27:21,095\nAnd then Active Directory users and\n\n1509\n01:27:21,095 --> 01:27:24,780\ncomputers to figure out who\nthe three domain wide rules were.\n\n1510\n01:27:24,780 --> 01:27:27,353\nI prefer a good old netdom command.\n\n1511\n01:27:27,353 --> 01:27:32,903\nNetdom query fsmo\n\n1512\n01:27:36,955 --> 01:27:38,058\nAnd eventually.\n\n1513\n01:27:45,609 --> 01:27:46,710\nOr maybe not.\n\n1514\n01:27:46,710 --> 01:27:50,150\nMy virtual machines are a little\ntaxed on memory right now.\n\n1515\n01:27:50,150 --> 01:27:51,090\nThere we go.\n\n1516\n01:27:51,090 --> 01:27:55,370\nSo there I can see all five of them\nin one easy quick shot, right?\n\n1517\n01:27:55,370 --> 01:27:58,750\nYou can see the schema master,\nthe domain naming master.\n\n1518\n01:28:00,220 --> 01:28:03,020\nI won't read them all to you\nguys know what they are by now.\n\n1519\n01:28:03,020 --> 01:28:04,200\nSo there's all five of them.\n\n1520\n01:28:04,200 --> 01:28:05,370\nI only had to go to one place.\n\n1521\n01:28:05,370 --> 01:28:07,940\nOpen up command prompt,\nrun that little command and\n\n1522\n01:28:07,940 --> 01:28:09,260\nI can see all five of them at once.\n\n1523\n01:28:09,260 --> 01:28:11,968\nI can actually move them and\ntransfer them and\n\n1524\n01:28:11,968 --> 01:28:14,612\nseize them using netdom\nas well if I need to.\n\n1525\n01:28:14,612 --> 01:28:19,860\nAll right so where do we put\nthose as far as our design goes?\n\n1526\n01:28:19,860 --> 01:28:21,613\nIt depends on the role, kind of.\n\n1527\n01:28:21,613 --> 01:28:23,553\nSome of the roles are not that busy.\n\n1528\n01:28:23,553 --> 01:28:25,642\nYou look at the schema master.\n\n1529\n01:28:25,642 --> 01:28:27,778\nThat's where I can make\nchanges to the schema.\n\n1530\n01:28:27,778 --> 01:28:29,970\nHow often do I make changes to the schema?\n\n1531\n01:28:31,410 --> 01:28:34,360\nWell, when I bring in a brand\nnew operating system on a domain\n\n1532\n01:28:34,360 --> 01:28:34,890\ncontroller right?\n\n1533\n01:28:34,890 --> 01:28:39,310\nWhen we introduce a 2012\nR2 domain controller,\n\n1534\n01:28:39,310 --> 01:28:40,670\nI'm gonna have to update the schema.\n\n1535\n01:28:40,670 --> 01:28:44,115\nWe talked about in our previous episode\nabout running ADprep forestprep,\n\n1536\n01:28:44,115 --> 01:28:46,670\nyou're making changes to the schema.\n\n1537\n01:28:46,670 --> 01:28:50,255\nSo if I'm bringing in, if we're\nswitching operating system versions on\n\n1538\n01:28:50,255 --> 01:28:53,505\ndomain controllers,\nhow often we do that, right?\n\n1539\n01:28:53,505 --> 01:28:57,253\nI mean Microsoft releases a new\nserver OS every couple years, right?\n\n1540\n01:28:57,253 --> 01:29:00,253\n2012, 2012R2, 2014, whatever.\n\n1541\n01:29:00,253 --> 01:29:05,170\nSo that's one time I make\nchanges to the schema.\n\n1542\n01:29:05,170 --> 01:29:07,675\nOther times,\nmaybe like installing Exchange.\n\n1543\n01:29:07,675 --> 01:29:10,495\nWhen you install Exchange,\nit has to update the schema.\n\n1544\n01:29:10,495 --> 01:29:14,130\nIt has to change the user\naccount attributes to include\n\n1545\n01:29:14,130 --> 01:29:16,150\nExchange information.\n\n1546\n01:29:16,150 --> 01:29:17,990\nBut again how often do I do that?\n\n1547\n01:29:17,990 --> 01:29:19,845\nIt's probably already been done years ago.\n\n1548\n01:29:19,845 --> 01:29:24,260\nSo if the schema master goes down I\nmight not be too worried about it.\n\n1549\n01:29:24,260 --> 01:29:27,240\nAnd he's not that busy it's not\nputting a very big workload on it.\n\n1550\n01:29:27,240 --> 01:29:30,939\nThe domain naming master, how often do you\nadd or remove domains from your forest?\n\n1551\n01:29:31,950 --> 01:29:34,320\nThe RID master, important,\nbut not that busy.\n\n1552\n01:29:34,320 --> 01:29:36,710\nHe generates them a block at a time and\n\n1553\n01:29:36,710 --> 01:29:39,410\nhands the different domain\ncontrollers a block of RIDs.\n\n1554\n01:29:39,410 --> 01:29:42,890\nHey here's ten RIDs for you, here's\nten RIDs for you, here's ten RIDs for\n\n1555\n01:29:42,890 --> 01:29:43,870\nyou, all right.\n\n1556\n01:29:43,870 --> 01:29:47,220\nAnd then as I go to those different\ndomain controllers and make new objects,\n\n1557\n01:29:47,220 --> 01:29:50,800\nthey burn through their pool of RIDs and\nthey just go back to the RID master.\n\n1558\n01:29:50,800 --> 01:29:52,880\nHey, I'm out of RIDs can\nyou give me some more?\n\n1559\n01:29:52,880 --> 01:29:55,170\nSo unless you're making\nhundreds of objects,\n\n1560\n01:29:55,170 --> 01:29:58,180\nif the RID master goes down,\nit's not the end of the world.\n\n1561\n01:29:58,180 --> 01:30:01,790\nYou might not be able to make any more\nobjects but it's not that busy of a role.\n\n1562\n01:30:01,790 --> 01:30:05,620\nAnd I know, again, I know we talked\nabout these in other episodes so\n\n1563\n01:30:05,620 --> 01:30:07,610\nI'll do the shorter version.\n\n1564\n01:30:07,610 --> 01:30:11,010\nReally the biggest one\nis that PDCA emulator.\n\n1565\n01:30:11,010 --> 01:30:13,910\nHe's pretty busy because he's\ndoing time synchronization,\n\n1566\n01:30:13,910 --> 01:30:17,530\npassword changes,\ngroup policy changes are being done there.\n\n1567\n01:30:18,630 --> 01:30:22,810\nThat's one that I cannot have\ndown too long and if it's down,\n\n1568\n01:30:22,810 --> 01:30:26,210\nI'm usually in a hurry to get\nit back up and it's a busy role.\n\n1569\n01:30:26,210 --> 01:30:29,440\nSo that might be one that in my design\n\n1570\n01:30:29,440 --> 01:30:32,110\nI want to move off of that\nfirst domain controller.\n\n1571\n01:30:32,110 --> 01:30:35,800\nAnd put it all by itself on a different\ndomain controller that's maybe\n\n1572\n01:30:35,800 --> 01:30:37,430\nnot doing the HTTP.\n\n1573\n01:30:37,430 --> 01:30:38,870\nAnd not doing DNS so\n\n1574\n01:30:38,870 --> 01:30:42,071\nit's got a little more resources free\nto handle that PDCA emulator role.\n\n1575\n01:30:43,370 --> 01:30:46,730\nSo that's the kind of thing we're\nthinking about in our design process.\n\n1576\n01:30:46,730 --> 01:30:49,810\nDo I need to move these roles to\na different domain controller?\n\n1577\n01:30:49,810 --> 01:30:52,790\nWhat kind of workload are those\ndomain controllers under?\n\n1578\n01:30:52,790 --> 01:30:55,450\nCan they handle that role or\nall those roles or\n\n1579\n01:30:55,450 --> 01:30:57,700\ndo I want to move them somewhere else?\n\n1580\n01:30:57,700 --> 01:30:59,810\nAll right.\n\n1581\n01:30:59,810 --> 01:31:02,220\nSo let's go back over to our objectives.\n\n1582\n01:31:05,590 --> 01:31:07,360\nSo that's our operation masters.\n\n1583\n01:31:07,360 --> 01:31:08,740\nI'm going to skip the RODC.\n\n1584\n01:31:08,740 --> 01:31:12,253\nI've got another domain controller\nbeing fired up right now.\n\n1585\n01:31:12,253 --> 01:31:15,044\nAnd I'll make an RODC out of\nhim in just a little bit,\n\n1586\n01:31:15,044 --> 01:31:17,336\nI got to go grab my product key for\nthat guy.\n\n1587\n01:31:17,336 --> 01:31:22,264\nSo we'll come back and\nwe'll talk about RODC's,\n\n1588\n01:31:22,264 --> 01:31:26,860\nbut we can look at this\npartial attributes set.\n\n1589\n01:31:26,860 --> 01:31:27,720\nLet's take a look at that.\n\n1590\n01:31:28,760 --> 01:31:35,510\nAll right, so back over to my DC, and we\nknow now who my schema master was, right.\n\n1591\n01:31:35,510 --> 01:31:36,150\nThis is DC1.\n\n1592\n01:31:36,150 --> 01:31:40,520\nAnd I've got my console registered,\nso that I can go in and\n\n1593\n01:31:40,520 --> 01:31:42,250\nI can work with the schema.\n\n1594\n01:31:42,250 --> 01:31:45,620\nSo here is my schema console,\nthat one I just registered.\n\n1595\n01:31:45,620 --> 01:31:47,960\nExpand this out a little bit.\n\n1596\n01:31:47,960 --> 01:31:50,550\nAnd we've talked about\nthis before as well.\n\n1597\n01:31:50,550 --> 01:31:54,420\nThe schema is made up of classes and\nattributes.\n\n1598\n01:31:54,420 --> 01:31:59,770\nClasses are my objects and attributes\nare what describe those objects.\n\n1599\n01:31:59,770 --> 01:32:07,690\nSo in my classes I might have a class\ncalled, if I can get down there, user.\n\n1600\n01:32:07,690 --> 01:32:10,220\nSo here is my user class object.\n\n1601\n01:32:10,220 --> 01:32:11,250\nThis is how Active Directory,\n\n1602\n01:32:11,250 --> 01:32:14,650\nwhen I right-click New User,\nhow does it know what a new user is?\n\n1603\n01:32:14,650 --> 01:32:16,020\nIt's defined here in the schema.\n\n1604\n01:32:16,020 --> 01:32:17,190\nThese are my blueprints for\n\n1605\n01:32:17,190 --> 01:32:20,282\nthe objects that I can create\nin Active Directory, right?\n\n1606\n01:32:20,282 --> 01:32:23,670\nAnd you'll see over here,\nit's got an attributes tab.\n\n1607\n01:32:23,670 --> 01:32:27,220\nThese are all the attributes that\nare associated with a user object.\n\n1608\n01:32:27,220 --> 01:32:31,290\nSo when I make a new user,\nit gives it all of these attributes.\n\n1609\n01:32:31,290 --> 01:32:37,220\nPassword, username,\ndepartment, all of this stuff.\n\n1610\n01:32:37,220 --> 01:32:41,610\nThe attributes are defined separately\nfrom the classes because the computer has\n\n1611\n01:32:41,610 --> 01:32:46,210\na name, a user has a name, there's no\npoint in defining the attribute twice.\n\n1612\n01:32:46,210 --> 01:32:49,090\nSo attributes are defined separately and\n\n1613\n01:32:49,090 --> 01:32:52,380\nthen linked back to that class object,\nall right?\n\n1614\n01:32:53,960 --> 01:32:56,180\nDown here are my attributes.\n\n1615\n01:32:56,180 --> 01:32:59,470\nSo these are all of\nthe different attributes\n\n1616\n01:32:59,470 --> 01:33:01,830\nthat can be associated with\nthose different objects.\n\n1617\n01:33:03,580 --> 01:33:04,680\nWhere was I going with this?\n\n1618\n01:33:04,680 --> 01:33:08,280\nSo we talked about that\npartial attribute set, right?\n\n1619\n01:33:08,280 --> 01:33:11,720\nWe said that when we create\na global catalog server\n\n1620\n01:33:11,720 --> 01:33:13,800\nit has a partial attribute set.\n\n1621\n01:33:13,800 --> 01:33:17,970\nIt has a copy of all the other\ndomains domain partition but\n\n1622\n01:33:17,970 --> 01:33:19,240\nit's not a complete copy.\n\n1623\n01:33:19,240 --> 01:33:25,040\nIt's just certain attributes, the most\ncommonly searched attributes, all right.\n\n1624\n01:33:25,040 --> 01:33:27,830\nWell, what if I wanna\nmake a new attribute?\n\n1625\n01:33:27,830 --> 01:33:28,980\nRight, I can.\nI can come in here and\n\n1626\n01:33:28,980 --> 01:33:29,680\nmake a new attribute.\n\n1627\n01:33:29,680 --> 01:33:33,870\nLet's say I'm I use this silly example,\n\n1628\n01:33:33,870 --> 01:33:36,250\nback when I used to teach\nthese mock classes.\n\n1629\n01:33:36,250 --> 01:33:40,170\nLet's say I'm Nike, and\nI want to give you.\n\n1630\n01:33:40,170 --> 01:33:43,310\nI think most of you know\nNike is a shoe company.\n\n1631\n01:33:43,310 --> 01:33:48,510\nI want to give my users every Christmas,\nwe give our users new shoes, all right?\n\n1632\n01:33:48,510 --> 01:33:49,660\nA new pair of shoes.\n\n1633\n01:33:49,660 --> 01:33:53,380\nMaybe in Active Directory,\nI wanna track their shoe size, right?\n\n1634\n01:33:53,380 --> 01:33:56,000\nThere's no attribute in\nthere to track shoe size.\n\n1635\n01:33:56,000 --> 01:33:57,910\nI can come in here and\nI can make a new attribute and\n\n1636\n01:33:57,910 --> 01:33:59,440\nI can call it shoe size, right?\n\n1637\n01:33:59,440 --> 01:34:03,010\nAnd now I've got something that I can\nactually track their shoe size with.\n\n1638\n01:34:03,010 --> 01:34:06,020\nWhat if I want to search by that?\n\n1639\n01:34:06,020 --> 01:34:09,250\nThat's not part of my partial\nattribute set, there's a predefined\n\n1640\n01:34:09,250 --> 01:34:13,800\nset of attributes that are included\nin that partial attribute set.\n\n1641\n01:34:13,800 --> 01:34:17,800\nI can come in here and\nI can control that, I can add or remove\n\n1642\n01:34:18,810 --> 01:34:23,460\nwhich attributes are included\nwith that partial attribute set.\n\n1643\n01:34:24,770 --> 01:34:27,940\nLet me see if I can find\nan example in here.\n\n1644\n01:34:27,940 --> 01:34:32,128\nBuilding name is probably not one.\n\n1645\n01:34:32,128 --> 01:34:36,003\nSo building name is an attribute, right?\n\n1646\n01:34:36,003 --> 01:34:38,370\nYou can see that the attribute is active,\n\n1647\n01:34:38,370 --> 01:34:42,832\nit doesn't show me what objects it's\nassociated with but notice right here,\n\n1648\n01:34:42,832 --> 01:34:46,200\nreplicate the attribute\nto the global catalog.\n\n1649\n01:34:46,200 --> 01:34:48,460\nThat is what's determining whether or\n\n1650\n01:34:48,460 --> 01:34:52,440\nnot this attribute is a part\nof that partial attribute set.\n\n1651\n01:34:52,440 --> 01:34:55,200\nAnd as you can see here, it is not, right?\n\n1652\n01:34:55,200 --> 01:34:59,860\nSo in that partial attribute set,\nI do not get the building name so\n\n1653\n01:34:59,860 --> 01:35:02,860\nI couldn't search by that for\nobjects throughout my forest.\n\n1654\n01:35:02,860 --> 01:35:07,030\nIf I want to include it, it's as\neasy as putting a check mark there.\n\n1655\n01:35:07,030 --> 01:35:09,310\nReplicate this attribute\nto the global catalog.\n\n1656\n01:35:09,310 --> 01:35:13,800\nIt is now considered part of\nthat partial attribute set and\n\n1657\n01:35:13,800 --> 01:35:16,240\nit will be searchable\nthrough that global catalog.\n\n1658\n01:35:16,240 --> 01:35:17,250\nAll right?\n\n1659\n01:35:17,250 --> 01:35:18,330\nOne thing to keep in mind,\n\n1660\n01:35:18,330 --> 01:35:23,040\nyou start making changes in the schema,\nyou are going to trigger replication.\n\n1661\n01:35:23,040 --> 01:35:25,840\nIt's gonna replicate\nthe full global catalog.\n\n1662\n01:35:25,840 --> 01:35:28,200\nAll right?\nIt's got to replicate that out to,\n\n1663\n01:35:28,200 --> 01:35:31,320\nall of those global catalog\nservers throughout my domain.\n\n1664\n01:35:31,320 --> 01:35:34,210\nSo you might not want to do this\nin the middle of the day, right?\n\n1665\n01:35:34,210 --> 01:35:35,642\nSomething we've gotta keep in mind.\n\n1666\n01:35:35,642 --> 01:35:39,310\nWe can make changes to this but the impact\nthat it's going to have on my network.\n\n1667\n01:35:39,310 --> 01:35:42,380\nThe replication bandwidth that's going to\nbe generated that's going to be generated\n\n1668\n01:35:42,380 --> 01:35:45,690\nwhen I start making these changes is\nsomething that I've got to plan for.\n\n1669\n01:35:45,690 --> 01:35:48,180\nAnd so I might do this during off hours,\nright?\n\n1670\n01:35:48,180 --> 01:35:50,798\nAfter hours, weekends,\nsomething like that.\n\n1671\n01:35:50,798 --> 01:35:54,211\nAll right.\n\n1672\n01:35:57,920 --> 01:36:01,710\nSo that's probably good for at least for\nthis exam, for that partial attribute set.\n\n1673\n01:36:01,710 --> 01:36:03,480\nNow understanding what it is, and\n\n1674\n01:36:03,480 --> 01:36:07,660\nunderstanding how we can control\nwhat attributes are included\n\n1675\n01:36:07,660 --> 01:36:10,680\nin that partial attribute set,\nthat's gotta be part of my design.\n\n1676\n01:36:10,680 --> 01:36:14,800\nIf they tell me we're gonna need to\nbe able to search by building name,\n\n1677\n01:36:14,800 --> 01:36:16,600\nthis is what I've got to do.\n\n1678\n01:36:18,230 --> 01:36:21,347\nAll right, domain controller cloning, and\n\n1679\n01:36:21,347 --> 01:36:26,115\nJason I failed to start that clock,\nso can you give me a heads up when?\n\n1680\n01:36:26,115 --> 01:36:30,488\nSo domain controller cloning You\nknow it is a way that we can quickly\n\n1681\n01:36:30,488 --> 01:36:33,250\nimplement new domain controllers.\n\n1682\n01:36:33,250 --> 01:36:38,544\nIn our virtual environment, virtualization\nhas made so much a lot easier to\n\n1683\n01:36:38,544 --> 01:36:44,185\ndeal with, but our domain controller we\nwant to put out new domain controllers.\n\n1684\n01:36:44,185 --> 01:36:49,782\n2012 R 2 is, has been updated to\nsupport domain controller cloning and\n\n1685\n01:36:49,782 --> 01:36:56,340\nit gives me the ability, again, to push\nout new domain controllers very rapidly.\n\n1686\n01:36:56,340 --> 01:37:00,600\nThere are some issues, you know we can't\njust go and copy a domain controller,\n\n1687\n01:37:00,600 --> 01:37:01,846\nmake a copy of it.\n\n1688\n01:37:01,846 --> 01:37:06,670\nI don't really wanna run Sysprep cuz\nI'm gonna lose a lot of the information\n\n1689\n01:37:06,670 --> 01:37:09,210\nthat I want to be in\nthat domain controller.\n\n1690\n01:37:09,210 --> 01:37:14,820\nSo with 2012,\nif I can find my notes over here,\n\n1691\n01:37:14,820 --> 01:37:19,880\nour 2012 R2 I should say, you know,\nno longer requires the use of Sysprep\n\n1692\n01:37:19,880 --> 01:37:24,240\nwhen I'm cloning these virtual machines,\nor a virtual domain controller.\n\n1693\n01:37:24,240 --> 01:37:27,460\nThere's a brand new\nattribute that's been added.\n\n1694\n01:37:27,460 --> 01:37:30,770\nIt's called the invocation ID, alright?\n\n1695\n01:37:30,770 --> 01:37:35,625\nActually, I take that back, it's not the\ninvocation ID, that's always been there.\n\n1696\n01:37:35,625 --> 01:37:37,912\nIt's the VM generation ID.\n\n1697\n01:37:37,912 --> 01:37:42,324\nThat is a new attribute called\nthe MSDS generation ID, and\n\n1698\n01:37:42,324 --> 01:37:46,748\nit's part of the domain\ncontroller's computer object.\n\n1699\n01:37:46,748 --> 01:37:51,476\nAnd what's going to happen, is basically,\nif we take a step back when we\n\n1700\n01:37:51,476 --> 01:37:56,439\nreplicate active directory it uses\ninformation and it uses a combination of\n\n1701\n01:37:56,439 --> 01:38:01,090\nwhat's called the update sequence number,\nand the invocation ID.\n\n1702\n01:38:01,090 --> 01:38:05,460\nThe invocation ID is a unique number that\nidentifies my domain controllers for\n\n1703\n01:38:05,460 --> 01:38:07,080\nreplication purposes.\n\n1704\n01:38:07,080 --> 01:38:12,070\nAnd the update sequence number is\nbasically a time stamp for these updates.\n\n1705\n01:38:12,070 --> 01:38:16,650\nSo when they replicate they can tell\nwhat domain controller initiated this\n\n1706\n01:38:16,650 --> 01:38:22,110\nupdate by that invocation ID and\nwhen it occurred from that USN, all right?\n\n1707\n01:38:22,110 --> 01:38:26,430\nAnd remember we talked about replication\nconflicts, If two people making changes on\n\n1708\n01:38:26,430 --> 01:38:30,370\ntwo different domain controllers\nat the same time, same attribute.\n\n1709\n01:38:30,370 --> 01:38:31,420\nThey replicate,\n\n1710\n01:38:31,420 --> 01:38:34,680\nthey look at that time stamp information\nto determine which one to keep.\n\n1711\n01:38:34,680 --> 01:38:38,810\nThis is what we're talking about it\nis that update sequence number and\n\n1712\n01:38:38,810 --> 01:38:40,360\ninvocation ID.\n\n1713\n01:38:40,360 --> 01:38:46,780\nIf I've got a virtual domain controller\nand I roll that domain controller back.\n\n1714\n01:38:46,780 --> 01:38:50,640\nIf I've traded a snap shot and I've had an\nissue on that domain controller I might be\n\n1715\n01:38:50,640 --> 01:38:52,610\ntempted to roll it back\nto that previous point,\n\n1716\n01:38:52,610 --> 01:38:56,530\nor check point as it's called now they\nchanged that in the hyper v console.\n\n1717\n01:38:57,710 --> 01:39:02,800\nThe problem is if I do that on a domain\ncontroller it's going to cause\n\n1718\n01:39:02,800 --> 01:39:08,600\na world of issues with replication because\nwe're rolling him back in time right?\n\n1719\n01:39:08,600 --> 01:39:12,860\nSo all of the sudden, he's going back\nto these update sequence numbers,\n\n1720\n01:39:12,860 --> 01:39:15,040\nthese old time stamp information.\n\n1721\n01:39:15,040 --> 01:39:17,200\nAll his information is\ngonna look out-of-date,\n\n1722\n01:39:17,200 --> 01:39:22,150\nit's gonna start this replication storm,\nit's gonna cause problems.\n\n1723\n01:39:22,150 --> 01:39:28,180\nSo what's gonna happen now is with that\nnew attribute, with that VM Generation ID,\n\n1724\n01:39:28,180 --> 01:39:32,240\nit's again just a number that\ngets assigned to that VM and\n\n1725\n01:39:32,240 --> 01:39:38,750\nwhen we roll it back, it's gonna\ntake a look at that VM Generation ID\n\n1726\n01:39:38,750 --> 01:39:43,120\non that machine and it’s gonna compare it\nwith that VM Generation ID that's stored\n\n1727\n01:39:43,120 --> 01:39:45,360\nin active directory on that\ndomain controllers object.\n\n1728\n01:39:45,360 --> 01:39:49,640\nIf those don't match it’s going to end up\n\n1729\n01:39:49,640 --> 01:39:54,440\nresetting the indication ID which\nwill then make that domain controller\n\n1730\n01:39:54,440 --> 01:39:58,710\nlook to its replication partners\nlike a new domain controller, and\n\n1731\n01:39:58,710 --> 01:40:02,480\nthey'll go head and replicate\nanything that he's out of date on.\n\n1732\n01:40:02,480 --> 01:40:04,660\nSo it fixes the problem that we have.\n\n1733\n01:40:04,660 --> 01:40:05,690\nIt's still not recommended.\n\n1734\n01:40:05,690 --> 01:40:09,500\nI'm going to tell you, Microsoft\nwill tell you it's not recommended.\n\n1735\n01:40:09,500 --> 01:40:12,680\nI would never create snapshots\non domain controllers and\n\n1736\n01:40:12,680 --> 01:40:14,890\ntry to roll them back in time.\n\n1737\n01:40:14,890 --> 01:40:18,650\nIt's just not a good idea,\nbut we can now do it, right?\n\n1738\n01:40:18,650 --> 01:40:21,439\nSo again,\nMicrosoft says not recommended but\n\n1739\n01:40:21,439 --> 01:40:25,872\nthe addition of this VM Generation ID\ndoes make it possible to roll a domain\n\n1740\n01:40:25,872 --> 01:40:29,177\ncontroller back in time to a snapshot or\na check point.\n\n1741\n01:40:29,177 --> 01:40:34,410\nAll right so let's see here.\n\n1742\n01:40:37,690 --> 01:40:39,730\nI think we're,\nHow am I doing on time there Jason?\n\n1743\n01:40:40,820 --> 01:40:42,330\nKeep on trucking?\n\n1744\n01:40:42,330 --> 01:40:42,840\nWrap it up.\n\n1745\n01:40:42,840 --> 01:40:44,170\nAll right, I'm getting the signal.\n\n1746\n01:40:44,170 --> 01:40:46,360\nI'm still learning my hand signals\nover here from my director.\n\n1747\n01:40:46,360 --> 01:40:47,990\nAll right ladies and gentleman.\n\n1748\n01:40:47,990 --> 01:40:51,460\nSo I tell you what, that brings us\nto a really good stopping point.\n\n1749\n01:40:51,460 --> 01:40:53,640\nSo I think we'll stop there.\n\n1750\n01:40:53,640 --> 01:40:56,370\nWe're gonna yeah.\n\n1751\n01:40:56,370 --> 01:40:59,650\nI think we'll just go ahead\ncall it another episode there.\n\n1752\n01:41:00,770 --> 01:41:05,770\nRemember, let me remind you guys during\nthe show if you've got any questions,\n\n1753\n01:41:05,770 --> 01:41:07,310\nyou've got access to that chat room.\n\n1754\n01:41:07,310 --> 01:41:08,940\nRight below the live video feed,\n\n1755\n01:41:08,940 --> 01:41:11,880\nyou've got our chat room,\nif you've got questions, ask, right?\n\n1756\n01:41:11,880 --> 01:41:13,460\nThat's what we're here for.\n\n1757\n01:41:13,460 --> 01:41:15,690\nYeah, ask us real time.\n\n1758\n01:41:15,690 --> 01:41:19,590\nIf you guys are watching the recording\nup at the top of every page\n\n1759\n01:41:19,590 --> 01:41:21,560\nis going to be a Q&A link.\n\n1760\n01:41:21,560 --> 01:41:25,260\nYou can click on that link and\nyou can post questions in our forum.\n\n1761\n01:41:25,260 --> 01:41:28,710\nAll the hosts here monitor that forum and\nwe can answer your question.\n\n1762\n01:41:28,710 --> 01:41:31,880\nWe want to make sure you have\nwhat you need to be successful,\n\n1763\n01:41:31,880 --> 01:41:36,430\nget your certifications, pass these exams.\n\n1764\n01:41:36,430 --> 01:41:39,020\nAll right, signing off for\nITProTV, I am Mike Rodrick.\n\n1765\n01:41:39,020 --> 01:41:42,182\nYou guys have a good day,\nmorning, afternoon.\n\n1766\n01:41:42,182 --> 01:41:42,914\nPeace.\n\n1767\n01:41:42,914 --> 01:41:52,914\n[MUSIC]\n\n1768\n01:41:55,435 --> 01:42:01,710\n[SOUND]\n\n",
          "vimeoId": "108116128"
        },
        {
          "description": "",
          "length": "3162",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/012-Planning-For-AD-Physical-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/012-Planning-For-AD-Physical-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70413/012-Planning-For-AD-Physical-Pt-2-sm.jpg",
          "title": "Planning For AD (Physical) Part 2",
          "transcript": "1\n00:00:00,266 --> 00:00:10,266\n[MUSIC]\n\n2\n00:00:15,172 --> 00:00:22,347\n[SOUND]\n\n3\n00:00:22,347 --> 00:00:32,347\n[MUSIC]\n\n4\n00:00:33,770 --> 00:00:36,956\nAll right, good morning,\ngood afternoon, and good evening,\n\n5\n00:00:36,956 --> 00:00:39,620\nand welcome to another\nexciting episode of ITProTV.\n\n6\n00:00:39,620 --> 00:00:42,557\nI'll be your host today and\nmy name is Mike Roderick.\n\n7\n00:00:42,557 --> 00:00:47,242\nWe're continuing on with our 74-13 series.\n\n8\n00:00:47,242 --> 00:00:52,167\nIn the earlier episodes, we have made\nour way up through our active directory\n\n9\n00:00:52,167 --> 00:00:56,050\nlogical, and we did some of\nour active directory physical.\n\n10\n00:00:56,050 --> 00:00:57,430\nSo that's where we're\ngoing to continue on.\n\n11\n00:00:57,430 --> 00:01:00,290\nWe didn't quite make it through\nall of those objectives.\n\n12\n00:01:00,290 --> 00:01:03,640\nSo let's jump right into it.\n\n13\n00:01:03,640 --> 00:01:05,170\nI've got my objectives pulled up.\n\n14\n00:01:05,170 --> 00:01:09,130\nAnd as I said we've had another episode\nearlier where we went through some these\n\n15\n00:01:11,500 --> 00:01:12,490\nobjectives.\n\n16\n00:01:12,490 --> 00:01:14,660\nNow we are down here designing and\n\n17\n00:01:14,660 --> 00:01:17,810\nimplementing a branch\noffice infrastructure.\n\n18\n00:01:17,810 --> 00:01:20,990\nSo we are going to take\na look at things like RODCs,\n\n19\n00:01:20,990 --> 00:01:25,610\nuniversal group membership caching, global\ncatalog, some of the different services\n\n20\n00:01:25,610 --> 00:01:31,200\nthat we might want to be running out\nthere at those branch offices, DNS, DHCP,\n\n21\n00:01:31,200 --> 00:01:35,850\nand some of the things we can do with\nan RODC to keep that guy secure like\n\n22\n00:01:35,850 --> 00:01:41,250\ndelegation of administration on those\nRODCs, modifying filtered attribute sets,\n\n23\n00:01:41,250 --> 00:01:45,000\npassword replication policies and\nhash publications.\n\n24\n00:01:45,000 --> 00:01:48,640\nThere's lots of fun stuff that we\nare gonna go over, so let's dive into it.\n\n25\n00:01:48,640 --> 00:01:49,960\nWe'll get started.\n\n26\n00:01:49,960 --> 00:01:52,260\nFirst thing we're gonna talk about,\n\n27\n00:01:52,260 --> 00:01:56,420\nwhen we talk about our branch offices,\nwhy do we differentiate?\n\n28\n00:01:56,420 --> 00:01:59,010\nWhat's so\nspecial about that branch office?\n\n29\n00:01:59,010 --> 00:02:01,170\nWhat makes it different from,\n\n30\n00:02:01,170 --> 00:02:04,140\nsay, our headquarters or\nour data center or our corporate office?\n\n31\n00:02:04,140 --> 00:02:08,580\nAnd typically with our branch offices,\nthey're a little bit smaller,\n\n32\n00:02:08,580 --> 00:02:13,730\nmaybe, don't have as many users, and\n\n33\n00:02:13,730 --> 00:02:18,670\na lot of times they're separated from\nour corporate office or our data center\n\n34\n00:02:18,670 --> 00:02:24,430\nby a WAN link, and a lot of times that\ncan be a little bit slower or unreliable.\n\n35\n00:02:24,430 --> 00:02:29,160\nSo in our design considerations,\nwe've gotta keep things like that in mind.\n\n36\n00:02:29,160 --> 00:02:33,620\nI wanna make sure that these\nusers out at these branch offices\n\n37\n00:02:33,620 --> 00:02:36,590\nare able to do their job, right?\n\n38\n00:02:36,590 --> 00:02:41,250\nThat they can get the services that they\nneed to do their job without interruption,\n\n39\n00:02:41,250 --> 00:02:43,490\njust like if they were back\nat the corporate office.\n\n40\n00:02:43,490 --> 00:02:46,680\nSo that's the kind of thing\nthat we've gotta think about.\n\n41\n00:02:46,680 --> 00:02:52,310\nAnd one of the first things on our list of\nobjectives is considerations like RODCs.\n\n42\n00:02:52,310 --> 00:02:56,100\nRODC is a read only domain controller.\n\n43\n00:02:56,100 --> 00:03:00,060\nAnd I know we've covered this\nin some of MCSA episodes.\n\n44\n00:03:00,060 --> 00:03:03,160\nWe're gonna go over some of it and\nwe're gonna add a little bit to it.\n\n45\n00:03:03,160 --> 00:03:08,190\nSo if you're unfamiliar with what an RODC\nis, I'm gonna do a little rehash, but if\n\n46\n00:03:08,190 --> 00:03:12,860\nyou want some information, make sure you\ngo back and check out those MCSA episodes.\n\n47\n00:03:12,860 --> 00:03:16,586\nThis being our MCSE track, we probably\nshould be familiar with that already.\n\n48\n00:03:16,586 --> 00:03:20,420\nSo an RODC again,\nread only the main controller.\n\n49\n00:03:20,420 --> 00:03:24,400\nAnd when we talk about active\ndirectory and our domain controllers,\n\n50\n00:03:24,400 --> 00:03:28,310\nwe've said that it is a multi master\nreplication with loose conversions.\n\n51\n00:03:28,310 --> 00:03:31,900\nAnd we've said that all of\nthe copies are writable, right?\n\n52\n00:03:31,900 --> 00:03:36,010\nAny one of those domain controllers, I can\nmake a change, I can create a new user\n\n53\n00:03:36,010 --> 00:03:40,805\naccount, I can update my password,\nwhatever the case may be.\n\n54\n00:03:40,805 --> 00:03:44,510\nBut out at that branch office,\nwe know that in order for\n\n55\n00:03:44,510 --> 00:03:47,420\nme to authenticate, I have to be\nable to talk to a domain controller.\n\n56\n00:03:48,660 --> 00:03:52,060\nSo I could put a domain controller\nout there at that branch office to\n\n57\n00:03:52,060 --> 00:03:53,000\nfacilitate that.\n\n58\n00:03:53,000 --> 00:03:53,630\nRight?\n\n59\n00:03:53,630 --> 00:03:56,020\nThe problem is that the branch office,\n\n60\n00:03:56,020 --> 00:03:59,230\na lot of times we don't\nhave the same security.\n\n61\n00:03:59,230 --> 00:04:01,040\nEspecially physical security.\n\n62\n00:04:01,040 --> 00:04:05,140\nAt my corporate office,\nI have a server closet.\n\n63\n00:04:05,140 --> 00:04:08,070\nAnd it's got a separate lock on\nit that's different from say,\n\n64\n00:04:08,070 --> 00:04:09,830\nthe front doors of the building and\nthings like that.\n\n65\n00:04:09,830 --> 00:04:13,690\nSo most people might be able to get\nInto the office, into the building, but\n\n66\n00:04:13,690 --> 00:04:16,160\nfew people have access to\nthe actual server closet.\n\n67\n00:04:16,160 --> 00:04:21,780\nI've got that extra layer of physical\nsecurity on those servers and\n\n68\n00:04:21,780 --> 00:04:23,870\nespecially on my domain controllers.\n\n69\n00:04:23,870 --> 00:04:26,460\nBut at the branch office,\nI don't have a server closet.\n\n70\n00:04:26,460 --> 00:04:27,570\nI've got five users,\n\n71\n00:04:27,570 --> 00:04:31,800\nthey've got some cubicles and\nthere is no special server closet.\n\n72\n00:04:31,800 --> 00:04:36,650\nSo any server I put out there Is gonna be\nunder Bob's desk or something like that,\n\n73\n00:04:36,650 --> 00:04:39,420\nor in a closet that's maybe not so secure.\n\n74\n00:04:39,420 --> 00:04:44,750\nSo I don't want to put, if I can help it,\na full blown domain controller out there,\n\n75\n00:04:44,750 --> 00:04:46,380\nbecause I don't have\nthat physical security.\n\n76\n00:04:46,380 --> 00:04:50,450\nSomebody could potentially gain access\nto that domain controller, make\n\n77\n00:04:50,450 --> 00:04:54,530\nchanges to active directory, create a new\nuser account, like a backdoor account or\n\n78\n00:04:54,530 --> 00:04:59,410\nsomething, and then have that replicate to\nall my domain controllers in my domain.\n\n79\n00:04:59,410 --> 00:05:00,780\nThat would be a bad thing.\n\n80\n00:05:00,780 --> 00:05:03,770\nOr they could just walk out\nwith my hard drives, right?\n\n81\n00:05:03,770 --> 00:05:05,810\nAnd that's my active directory database.\n\n82\n00:05:05,810 --> 00:05:10,430\nThat has all of my user accounts, all of\ntheir passwords, and things like that.\n\n83\n00:05:10,430 --> 00:05:14,490\nA lot of sensitive information on those\ndomain controllers, and if they can walk\n\n84\n00:05:14,490 --> 00:05:18,400\nin and steal my hard drives, they could\nthen use that, take it home with them or\n\n85\n00:05:18,400 --> 00:05:22,100\nwhatever, and take their time and\ntry to break into that information.\n\n86\n00:05:22,100 --> 00:05:23,050\nSo not ideal.\n\n87\n00:05:23,050 --> 00:05:26,550\nI don't want to put a domain\ncontroller out there for those reasons.\n\n88\n00:05:26,550 --> 00:05:29,830\nBut, if I don't put a domain\ncontroller out there,\n\n89\n00:05:29,830 --> 00:05:33,510\nnow my users are at\nthe mercy of my WAN length.\n\n90\n00:05:33,510 --> 00:05:37,340\nThey get in to work and the WAN link\nis down, they can't authenticate,\n\n91\n00:05:37,340 --> 00:05:39,445\nthey can't log on,\ntheir machines can't log on.\n\n92\n00:05:39,445 --> 00:05:41,680\nThey're not going to get any work done.\n\n93\n00:05:41,680 --> 00:05:43,050\nSo what do we do?\n\n94\n00:05:43,050 --> 00:05:45,210\nWe do a read only domain controller.\n\n95\n00:05:45,210 --> 00:05:47,730\nWhich is just like the name implies,\n\n96\n00:05:47,730 --> 00:05:53,180\nit's a read only copy of\nthe active directory database.\n\n97\n00:05:53,180 --> 00:05:56,500\nNow that already see,\nagain, it's a read-only.\n\n98\n00:05:56,500 --> 00:06:03,200\nA couple things we wanna remember, keep\nin mind, when we think about the RODCs.\n\n99\n00:06:03,200 --> 00:06:04,400\nOne, it's read only.\n\n100\n00:06:04,400 --> 00:06:06,630\nIt's in the name,\nshould be pretty easy to remember.\n\n101\n00:06:07,900 --> 00:06:12,790\nTwo, it doesn't have a complete copy\nof the Active Directory database.\n\n102\n00:06:12,790 --> 00:06:16,832\nThere are going to be certain\nattributes that are left out.\n\n103\n00:06:16,832 --> 00:06:20,040\nThat's why it's little more or\n\n104\n00:06:20,040 --> 00:06:24,730\nit's a better option when I have\nthat reduced physical security.\n\n105\n00:06:24,730 --> 00:06:28,550\nOne of the biggest things is it\ndoesn't contain any secrets.\n\n106\n00:06:28,550 --> 00:06:34,510\nIn other words, no passwords are stored\non that RODC by default, right?\n\n107\n00:06:34,510 --> 00:06:37,520\nWe'll talk about how we can change\nthat here in just a minute.\n\n108\n00:06:37,520 --> 00:06:41,320\nSo that means if somebody is able to\nget access to that domain controller,\n\n109\n00:06:41,320 --> 00:06:44,980\nthey can't make any changes that are gonna\nreplicate back to the corporate office.\n\n110\n00:06:44,980 --> 00:06:48,230\nBecause it's read only,\nyou can't make changes there, all right?\n\n111\n00:06:48,230 --> 00:06:51,600\nThe KCC, remember we talked\nabout in a previous episode?\n\n112\n00:06:51,600 --> 00:06:54,750\nThe knowledge consistency checker,\nthat's what's going to create\n\n113\n00:06:54,750 --> 00:06:58,310\nthose replication links\nbetween my domain controllers.\n\n114\n00:06:58,310 --> 00:07:02,200\nThe KCC sees that as an RODC, a read only,\n\n115\n00:07:02,200 --> 00:07:07,130\nand he's gonna create\na one way replication link\n\n116\n00:07:07,130 --> 00:07:12,160\nfrom a writable copy or writable\ndomain controller out to the RODC.\n\n117\n00:07:12,160 --> 00:07:14,040\nSo the RODC will be kept up to date.\n\n118\n00:07:14,040 --> 00:07:16,060\nAny changes made back at\nthe corporate office for\n\n119\n00:07:16,060 --> 00:07:20,650\nexample will replicate out to the RODC,\nbut nothing is replicated back.\n\n120\n00:07:20,650 --> 00:07:25,350\nThere's not even a link from\nthat RODC back to a writable\n\n121\n00:07:25,350 --> 00:07:27,060\ncopy of Active Directory.\n\n122\n00:07:28,350 --> 00:07:30,870\nAnd there's no passwords.\n\n123\n00:07:30,870 --> 00:07:34,280\nSo if somebody steals that\nhard drive out of that RODC,\n\n124\n00:07:35,690 --> 00:07:38,400\nthere's not as much sensitive\ninformation on there, right?\n\n125\n00:07:38,400 --> 00:07:42,385\nThey don't have the hash values from my\npasswords that they can attempt to run\n\n126\n00:07:42,385 --> 00:07:45,330\nbrute force or rainbow tables against or\nsomething like that.\n\n127\n00:07:45,330 --> 00:07:49,409\nSo it give us a good option for\nfacilitating that log on process and\n\n128\n00:07:49,409 --> 00:07:52,449\nthings like that out there\nat the branch office,\n\n129\n00:07:52,449 --> 00:07:55,585\nwhere I've got that\nreduced physical security.\n\n130\n00:07:55,585 --> 00:08:00,052\nNow I'm gonna kinda jump around a little\nbit, I think, in the objectives here and\n\n131\n00:08:00,052 --> 00:08:04,351\ntry to go through I don't know, to me\nthey have got them in an illogical order.\n\n132\n00:08:04,351 --> 00:08:08,240\nI want to stick with some of\nthese RODC type topics at first.\n\n133\n00:08:08,240 --> 00:08:09,620\nSo the next thing we are talking about,\n\n134\n00:08:09,620 --> 00:08:14,830\nthat is a little bit about what an RODC\nwas, a little refresher for you guys.\n\n135\n00:08:14,830 --> 00:08:18,380\nNext thing I really want to talk\nabout in our objectives here is,\n\n136\n00:08:19,500 --> 00:08:24,410\noh where is that, the password\nreplication policy, all right.\n\n137\n00:08:24,410 --> 00:08:28,490\nSo as I said the RDCs don't\nstore any passwords by default.\n\n138\n00:08:29,800 --> 00:08:34,670\nWell, Mike if it doesn't have my password,\nhow the heck am I gonna log on?\n\n139\n00:08:34,670 --> 00:08:40,030\nWhat it's gonna do is it's going to\nhave to reach out to a writable copy,\n\n140\n00:08:40,030 --> 00:08:43,930\nto a domain controller\nthat has your password,\n\n141\n00:08:43,930 --> 00:08:45,950\nso that it can verify that information.\n\n142\n00:08:45,950 --> 00:08:50,030\nAnd then it will send back to the RODC\nthat fact that yes you typed in the right\n\n143\n00:08:50,030 --> 00:08:53,570\npassword and allow that user to log on.\n\n144\n00:08:53,570 --> 00:08:57,480\nWhat we are going to do is we are going\nto allow certain passwords to be\n\n145\n00:08:57,480 --> 00:08:58,550\ncached out there.\n\n146\n00:08:58,550 --> 00:09:02,334\nIf I don't set up any passwords, if I\ndon't allow any passwords to be cached,\n\n147\n00:09:02,334 --> 00:09:06,480\nthen every time you log on,\nit's gonna have to go across the WAN link.\n\n148\n00:09:06,480 --> 00:09:08,410\nSo we really didn't solve\nanything at that point, right?\n\n149\n00:09:08,410 --> 00:09:12,652\nWe didn't solve our problem of being\nreliant on that WAN link being up to\n\n150\n00:09:12,652 --> 00:09:13,662\nauthenticate.\n\n151\n00:09:13,662 --> 00:09:18,070\nSo I'm gonna cache some out there, but it\nstarts out with none and I get to pick and\n\n152\n00:09:18,070 --> 00:09:21,450\nchoose which passwords are gonna\nbe allowed to cached out there.\n\n153\n00:09:21,450 --> 00:09:24,810\nNow there is two different\nplaces that I can control this\n\n154\n00:09:24,810 --> 00:09:26,790\nwhich passwords are gonna be cached?\n\n155\n00:09:26,790 --> 00:09:30,990\nIt's done with what we call our\npassword replication policy and\n\n156\n00:09:30,990 --> 00:09:34,060\nif I flip over here over\nto my domain controller.\n\n157\n00:09:34,060 --> 00:09:39,180\nI pulled up an already seen\nhere during our lunch break and\n\n158\n00:09:39,180 --> 00:09:41,730\nlet's take a look at both sides of this.\n\n159\n00:09:41,730 --> 00:09:45,740\nFirst of all if I go into active\ndirectory users and computers.\n\n160\n00:09:45,740 --> 00:09:50,740\nThere are two groups that get created\nwhen I install my first RODC.\n\n161\n00:09:50,740 --> 00:09:55,100\nOne is this allowed RODC\npassword replication group.\n\n162\n00:09:55,100 --> 00:09:59,120\nThe other one is the denied RODC\npassword replication group.\n\n163\n00:09:59,120 --> 00:10:01,830\nIf I pull up this membership list for\nthe allowed,\n\n164\n00:10:01,830 --> 00:10:04,930\nyou'll see that by default\nthere's nobody in there.\n\n165\n00:10:04,930 --> 00:10:08,060\nAll right, no passwords are going\nto be cached by default.\n\n166\n00:10:09,390 --> 00:10:13,850\nIf I pull up the denied,\nyou'll see that there are several\n\n167\n00:10:13,850 --> 00:10:17,730\nthat are going to prevented from being\ncached out of the box, by default.\n\n168\n00:10:17,730 --> 00:10:19,430\nI didn't add any of these.\n\n169\n00:10:19,430 --> 00:10:23,600\nI've got my cert publishers,\nmy domain admins, my enterprise admins,\n\n170\n00:10:23,600 --> 00:10:29,900\nthe domain controllers, ticket granting\nticket service for schema admins.\n\n171\n00:10:29,900 --> 00:10:33,290\nSome of those very privileged accounts.\n\n172\n00:10:33,290 --> 00:10:35,850\nI don't want those passwords\nbeing cached out there.\n\n173\n00:10:36,950 --> 00:10:38,330\nSo that's all done.\n\n174\n00:10:38,330 --> 00:10:39,720\nOut of the box alright.\n\n175\n00:10:39,720 --> 00:10:44,180\nNow these two groups are what\nI like to think of as my\n\n176\n00:10:44,180 --> 00:10:47,210\nglobal password replication policy groups.\n\n177\n00:10:47,210 --> 00:10:50,740\nBecause what you'll see is\nwhen I go to my RODC itself,\n\n178\n00:10:50,740 --> 00:10:53,840\nI'm going to go into my\ndomain controllers OU.\n\n179\n00:10:53,840 --> 00:10:55,990\nThere's my read only domain\ncontroller computer account.\n\n180\n00:10:55,990 --> 00:10:59,760\nI'm going to pull up the properties for\nthat RODC and\n\n181\n00:10:59,760 --> 00:11:03,260\nI'll see that I have\na Password Replication Policy tab.\n\n182\n00:11:03,260 --> 00:11:06,480\nOn here, are those two groups.\n\n183\n00:11:06,480 --> 00:11:09,210\nThey have added, this is all by default,\nagain, this is a default install.\n\n184\n00:11:09,210 --> 00:11:10,990\nI haven't done anything to it yet.\n\n185\n00:11:10,990 --> 00:11:16,000\nThey allowed RODC Password Replication\ngroup is already added to this\n\n186\n00:11:16,000 --> 00:11:21,830\nindividual RODCs password replication\npolicy, and you can see it's set to allow.\n\n187\n00:11:22,890 --> 00:11:26,430\nThe denied already see password\nreplication group is already added to my\n\n188\n00:11:26,430 --> 00:11:29,200\npassword replication policy,\nand it is set to deny.\n\n189\n00:11:29,200 --> 00:11:34,390\nAnd it's gonna be like that on\nall RODCs that I have, all right?\n\n190\n00:11:34,390 --> 00:11:37,280\nSo if I bring up,\nmaybe I've got four branch offices, and\n\n191\n00:11:37,280 --> 00:11:40,490\neach one of those branch\noffices has an RODC on it.\n\n192\n00:11:40,490 --> 00:11:45,950\nThese groups will be added to the password\nreplication policy tab on all of,\n\n193\n00:11:45,950 --> 00:11:48,950\nall four in this case, of those RODCs.\n\n194\n00:11:48,950 --> 00:11:54,160\nSo if I want to allow somebody's password\nto be cached at all my RODCs, I don't have\n\n195\n00:11:54,160 --> 00:11:58,880\nto go to each RODC, I can pull up that\ngroup and I can add them to that group.\n\n196\n00:11:58,880 --> 00:12:01,310\nThat group is already\nadded to all of my RODCs.\n\n197\n00:12:01,310 --> 00:12:02,390\nSo I'm good to go.\n\n198\n00:12:02,390 --> 00:12:03,470\nSame thing with the deny, right.\n\n199\n00:12:03,470 --> 00:12:06,910\nIf I want to make sure that that\npassword is never cached on any RODCs,\n\n200\n00:12:06,910 --> 00:12:12,850\nthen I'm going to put them in that denied\nRODC password replication group and\n\n201\n00:12:12,850 --> 00:12:15,740\nthat's going to affect or\nbe in place on all of my RODCs.\n\n202\n00:12:15,740 --> 00:12:17,639\nSo that's why I say I like\nto call them globals.\n\n203\n00:12:18,710 --> 00:12:22,800\nThat's why the domain admins, the\nenterprise admins, the schema admins, and\n\n204\n00:12:22,800 --> 00:12:27,290\nall those privileged accounts are added\nto that group, or the deny group,\n\n205\n00:12:27,290 --> 00:12:31,740\ncuz that takes care of all of\nthose RODCs in one easy move.\n\n206\n00:12:31,740 --> 00:12:35,280\nYou know, the allowed I might put, like,\n\n207\n00:12:35,280 --> 00:12:39,460\nmy corporate help desk people in there,\nall right?\n\n208\n00:12:39,460 --> 00:12:42,640\nWhat if a problem occurs at\none of these branches and\n\n209\n00:12:42,640 --> 00:12:45,780\nI have to send somebody out\nthere to fix this problem?\n\n210\n00:12:45,780 --> 00:12:48,330\nThey get out there, that corporate\nhelp desk person gets out there,\n\n211\n00:12:48,330 --> 00:12:50,720\nthey've never been to\nthe branch office before.\n\n212\n00:12:50,720 --> 00:12:51,990\nThey've never logged on.\n\n213\n00:12:51,990 --> 00:12:53,670\nTheir password is not cached out there.\n\n214\n00:12:53,670 --> 00:12:56,390\nThe problem happens to be the WAN link,\n\n215\n00:12:56,390 --> 00:12:58,400\nthey won't be able to log\non when they get there.\n\n216\n00:12:58,400 --> 00:13:01,100\nSo I can go ahead and\nallow their passwords to be cached and\n\n217\n00:13:01,100 --> 00:13:03,590\nI'll talk about how we can\nactually pre-populate.\n\n218\n00:13:03,590 --> 00:13:06,780\nWe can push those cached passwords out for\nsituations like that.\n\n219\n00:13:06,780 --> 00:13:09,170\nBut that might be an example\nof somebody that I\n\n220\n00:13:09,170 --> 00:13:13,760\nwanna allow to all RODCs\nlike my corporate help desk.\n\n221\n00:13:13,760 --> 00:13:19,340\nBut then we can still go to each RODC and\nwe can add, I can click add here and\n\n222\n00:13:19,340 --> 00:13:24,680\nI can add either as an allow or\ndeny an individual user.\n\n223\n00:13:24,680 --> 00:13:29,010\nTypically though as we've learned best\npractices we're gonna be doing groups.\n\n224\n00:13:29,010 --> 00:13:31,265\nSo what I would probably do.\n\n225\n00:13:31,265 --> 00:13:34,230\nLet's say this RODC was out at branch one.\n\n226\n00:13:34,230 --> 00:13:36,380\nAll right and we'll call it branch one.\n\n227\n00:13:36,380 --> 00:13:41,566\nSo I might make a group called branch one,\n\n228\n00:13:41,566 --> 00:13:44,920\nand then what I would end up doing, and\n\n229\n00:13:44,920 --> 00:13:48,340\nI don't have too many accounts to\nplay with in here, I don't think.\n\n230\n00:13:48,340 --> 00:13:53,300\nWhat I would do is I would add all\nof my users that work at branch\n\n231\n00:13:53,300 --> 00:13:56,150\none to that branch one group.\n\n232\n00:13:56,150 --> 00:13:58,880\nAnd don't forget,\nthis is an important part.\n\n233\n00:13:58,880 --> 00:14:01,310\nI need to add the computer accounts for\n\n234\n00:14:01,310 --> 00:14:03,470\nall the computers out\nthere branch one as well.\n\n235\n00:14:03,470 --> 00:14:05,130\nBecause remember the computer\nhas to authenticate.\n\n236\n00:14:05,130 --> 00:14:08,250\nWhen you power that machine up,\nright, that's when it reaches out and\n\n237\n00:14:08,250 --> 00:14:11,745\nauthenticates and then you get your\nlogon screen and you authenticate.\n\n238\n00:14:11,745 --> 00:14:14,145\nSo if I remember to cache the users, but\n\n239\n00:14:14,145 --> 00:14:17,765\nI don't cache the computer accounts,\nnot gonna do them any good, all right.\n\n240\n00:14:17,765 --> 00:14:21,235\nSo in that branch one group,\nI would end up putting all of the worker,\n\n241\n00:14:21,235 --> 00:14:23,975\nall the users,\nthat work at that particular branch and\n\n242\n00:14:23,975 --> 00:14:27,305\nall of the computers that exist\nat that particular branch.\n\n243\n00:14:27,305 --> 00:14:31,519\nThen I would go to my branch one RODC and\n\n244\n00:14:31,519 --> 00:14:36,527\nI could then add to that\npassword application\n\n245\n00:14:36,527 --> 00:14:41,684\npolicy,as an allow, that branch one group.\n\n246\n00:14:44,752 --> 00:14:48,672\nAnd so now, anybody that's in that branch\none group would be allowed to cache their\n\n247\n00:14:48,672 --> 00:14:52,760\npassword, but only on that particular RODC\nright, not at branch two or branch three,\n\n248\n00:14:52,760 --> 00:14:54,960\nbecause I didn't do the global groups.\n\n249\n00:14:54,960 --> 00:14:58,500\nHere I'm adding it directly\nto this individual RODCs\n\n250\n00:14:58,500 --> 00:15:01,843\npassword replication group, all right?\n\n251\n00:15:01,843 --> 00:15:05,580\nAnd we do obviously,\nwe could do the same thing for our denied.\n\n252\n00:15:05,580 --> 00:15:08,280\nNow while I'm in here and while I've got\nthis dialog box open, let's just take\n\n253\n00:15:08,280 --> 00:15:12,240\na peak at what I was mentioning earlier,\nbecause that help desk person.\n\n254\n00:15:12,240 --> 00:15:13,630\nThat corporate help desk\nI was talking about.\n\n255\n00:15:13,630 --> 00:15:15,390\nThey're going to go out there and\ntry to fix it, but\n\n256\n00:15:15,390 --> 00:15:19,250\nthey've never been out there before,\nso their password is not cached yet.\n\n257\n00:15:20,840 --> 00:15:24,110\nSo what I can do is I can click advance,\nlet me make a group so\n\n258\n00:15:24,110 --> 00:15:25,420\nwe'll have something to play with here.\n\n259\n00:15:27,030 --> 00:15:33,290\nI'll just create a new group real\nquick and call it corp help desk.\n\n260\n00:15:35,390 --> 00:15:40,758\nThen what I can do is go back into\nthe properties of that RODC and\n\n261\n00:15:40,758 --> 00:15:44,587\nI can add them to the allow list,\nall right.\n\n262\n00:15:48,183 --> 00:15:50,519\nNow Corphelpdesk is in my allow list.\n\n263\n00:15:50,519 --> 00:15:54,494\nThen I'm gonna click advanced and\nthere's no users in there so\n\n264\n00:15:54,494 --> 00:15:58,994\nI don't know if this is really gonna\nplay along very nicely with me, but\n\n265\n00:15:58,994 --> 00:16:02,969\nI can click pre-populate passwords and\nI can find that group.\n\n266\n00:16:02,969 --> 00:16:06,940\nI wanna call them corp.\n\n267\n00:16:06,940 --> 00:16:11,080\n[SOUND] It's not gonna let me do a group,\nis it?\n\n268\n00:16:11,080 --> 00:16:13,080\nLet me make a new user real quick.\n\n269\n00:16:16,100 --> 00:16:18,330\nJust for giggles so\nwe'll have something to play with here.\n\n270\n00:16:23,830 --> 00:16:26,788\nI'll just make a real quick user.\n\n271\n00:16:35,663 --> 00:16:40,690\nThen, I go back over to my RODC,\npassword replication policy.\n\n272\n00:16:40,690 --> 00:16:43,245\nI click Advanced and prepopulat.\n\n273\n00:16:43,245 --> 00:16:46,730\nI find that account,\nand it's gonna ask me,\n\n274\n00:16:46,730 --> 00:16:51,660\nare you sure you wanna push\nthese credentials out there?\n\n275\n00:16:51,660 --> 00:16:52,529\nI say yes.\n\n276\n00:16:52,529 --> 00:16:53,283\nAll right?\n\n277\n00:16:53,283 --> 00:16:58,810\nAnd now, it's been added to the allow\nlist and it has been pre-populated.\n\n278\n00:16:58,810 --> 00:17:02,950\nSo if I take a look at my tabs here, I can\nsee accounts who's passwords are stored.\n\n279\n00:17:02,950 --> 00:17:06,750\nThat would be people that had\nalready logged in at the branch, and\n\n280\n00:17:06,750 --> 00:17:10,280\npasswords were ended up cached\nbecause they were on the allow list.\n\n281\n00:17:10,280 --> 00:17:13,400\nIf I change this drop down list,\naccounts that have been authenticated.\n\n282\n00:17:13,400 --> 00:17:16,360\nThese are people that have\nactually logged on out there.\n\n283\n00:17:16,360 --> 00:17:20,360\nBut if I look at my result and\npolicy, and I click add, and\n\n284\n00:17:21,430 --> 00:17:28,360\nI type in my user account,\nI can see that I'm still under deny, nice.\n\n285\n00:17:29,550 --> 00:17:31,520\nWell, that's not the way\nthat's supposed to work.\n\n286\n00:17:31,520 --> 00:17:32,445\nDidn't I push that?\n\n287\n00:17:32,445 --> 00:17:34,440\nOh, I did not add, I'm not in that group.\n\n288\n00:17:35,680 --> 00:17:40,496\nSo let me add that real quick.\n\n289\n00:17:40,496 --> 00:17:41,580\nWhere'd I make that account?\n\n290\n00:17:41,580 --> 00:17:50,200\n[SOUND] Let's add this account\nto that group real quick.\n\n291\n00:17:50,200 --> 00:17:53,260\nThat was a good example of what would\nhappen if you're not on that list, right?\n\n292\n00:17:53,260 --> 00:17:58,370\nIt's not gonna allow my user account\nto cache it's password out there.\n\n293\n00:17:58,370 --> 00:18:03,540\nSo now that I am a part of that group,\nI can go back over here to my RODC.\n\n294\n00:18:05,310 --> 00:18:11,595\nPassword replication policy in advanced,\nand result and policy,\n\n295\n00:18:11,595 --> 00:18:18,528\nfind Mike, And I probably need\nto log on with my account, it\n\n296\n00:18:18,528 --> 00:18:22,750\ndoesn't know that I'm in that group yet,\nso I'm not gonna bother with all of that.\n\n297\n00:18:22,750 --> 00:18:25,710\nBut that's the idea,\nI can pre-populate all of those, and\n\n298\n00:18:25,710 --> 00:18:27,490\nthen this is just a result and policy.\n\n299\n00:18:27,490 --> 00:18:30,340\nWhat if I wanted to see what\nwould happen if this user\n\n300\n00:18:30,340 --> 00:18:31,870\nlogged in out there at the branch office?\n\n301\n00:18:31,870 --> 00:18:34,040\nWould their password be cached or not?\n\n302\n00:18:34,040 --> 00:18:37,140\nSince I just made that change and haven't\nreally given it a chance to replicate\n\n303\n00:18:37,140 --> 00:18:39,700\naround it, it's not showing up here.\n\n304\n00:18:39,700 --> 00:18:41,810\nBut that's okay, I think we get the idea.\n\n305\n00:18:41,810 --> 00:18:44,340\nNow, keep in mind that if my password,\n\n306\n00:18:44,340 --> 00:18:48,692\nif I'm on that deny list, that doesn't\nmean I cannot log in at the branch office.\n\n307\n00:18:48,692 --> 00:18:49,350\nAll right?\n\n308\n00:18:49,350 --> 00:18:53,030\nThat just means when I do log in,\nI'm gonna have to go across the WAN link,\n\n309\n00:18:53,030 --> 00:18:55,620\ntalk to a writable copy\nof Active Directory.\n\n310\n00:18:55,620 --> 00:18:58,110\nI can authenticate, but\nthen if I log off and\n\n311\n00:18:58,110 --> 00:19:01,063\nlog in again, I'm gonna have to\ngo across the WAN link again.\n\n312\n00:19:01,063 --> 00:19:03,820\nRight?\nIt's not gonna remember my password.\n\n313\n00:19:03,820 --> 00:19:07,460\nSo in other words, a domain admin could\ngo out to the branch office and log in.\n\n314\n00:19:07,460 --> 00:19:09,620\nIt's not gonna stop them from logging in,\n\n315\n00:19:09,620 --> 00:19:11,882\nit's just gonna prevent their\npassword from being cached.\n\n316\n00:19:11,882 --> 00:19:16,480\nSo that if somebody steals that hard\ndrive or gains access to that DC,\n\n317\n00:19:16,480 --> 00:19:19,600\nthen we don't have to worry about them\ngetting my domain admin password.\n\n318\n00:19:19,600 --> 00:19:20,100\nAll right?\n\n319\n00:19:21,550 --> 00:19:24,060\nAll right.\nSo that is a look at those password\n\n320\n00:19:24,060 --> 00:19:25,770\nreplication policies.\n\n321\n00:19:25,770 --> 00:19:28,390\nAgain, I like to think of it\nas you get two ways to do it.\n\n322\n00:19:28,390 --> 00:19:32,920\nYou can do it on each individual RODC\nwith that password replication policy tab\n\n323\n00:19:32,920 --> 00:19:37,620\non the properties of that RODC in\nActive Directory Users and Computers.\n\n324\n00:19:37,620 --> 00:19:41,380\nOr I can use those two groups\nthat get created, the allowed and\n\n325\n00:19:41,380 --> 00:19:46,090\ndenied RODC password replication groups,\nto do kind of a global thing.\n\n326\n00:19:46,090 --> 00:19:50,136\nWhere that applies to all of\nthe RODCs in my organization.\n\n327\n00:19:50,136 --> 00:19:51,037\nAll right?\n\n328\n00:19:51,037 --> 00:19:55,433\nAll right, so\nthat is our first brief look at RODC,\n\n329\n00:19:55,433 --> 00:20:00,625\nas well as setting up that\npassword replication policy.\n\n330\n00:20:00,625 --> 00:20:04,855\nA couple other things that I\nwant to look at with my RODCs is\n\n331\n00:20:04,855 --> 00:20:08,371\ngoing to be my delegation\nof administration.\n\n332\n00:20:08,371 --> 00:20:09,390\nAll right?\n\n333\n00:20:09,390 --> 00:20:14,630\nSo here, we got this branch office and\nI've put this domain controller out there.\n\n334\n00:20:14,630 --> 00:20:17,910\nSo that we can facilitate that\nauthentication process even though they've\n\n335\n00:20:17,910 --> 00:20:21,230\ngot a slow or unreliable WAN link.\n\n336\n00:20:21,230 --> 00:20:24,140\nThe problem is if that's\nat that branch office,\n\n337\n00:20:24,140 --> 00:20:26,010\nthey don't have a ton of service mode.\n\n338\n00:20:26,010 --> 00:20:28,650\nThey've probably got one service\nsitting out there maybe, right?\n\n339\n00:20:28,650 --> 00:20:30,540\nOur RODC is the only one, and\n\n340\n00:20:30,540 --> 00:20:34,285\nit might have to do more than\njust act as a domain controller.\n\n341\n00:20:34,285 --> 00:20:36,860\nRight?\nThey also need a print server out there.\n\n342\n00:20:36,860 --> 00:20:39,890\nThey need a file server out there,\nand things like that.\n\n343\n00:20:39,890 --> 00:20:45,530\nAnd I need somebody at the branch office\nto be able to log onto that machine and\n\n344\n00:20:45,530 --> 00:20:49,550\nwork there, create new shares,\nor flush out the print queue, or\n\n345\n00:20:49,550 --> 00:20:50,470\nsomething like that.\n\n346\n00:20:52,530 --> 00:20:55,130\nBut in order to log on\nto a domain controller,\n\n347\n00:20:55,130 --> 00:20:59,650\nI need to be either an enterprise admin,\ndomain admin, account operator.\n\n348\n00:20:59,650 --> 00:21:01,190\nWho else can log on there?\n\n349\n00:21:01,190 --> 00:21:04,300\nAccount operator, server operator.\n\n350\n00:21:04,300 --> 00:21:08,560\nThere's a few groups that are actually\nallowed to log on to a domain controller.\n\n351\n00:21:09,600 --> 00:21:14,160\nI don't wanna add Joe Worker out\nthere at that branch office to\n\n352\n00:21:14,160 --> 00:21:17,730\nthe domain admins group just so\nhe can log on to that RODC.\n\n353\n00:21:19,340 --> 00:21:23,850\nBecause if I make him a domain admin, he's\ngot full control over the entire domain.\n\n354\n00:21:23,850 --> 00:21:27,560\nThis is not somebody that's\ntrained as an IT admin, so\n\n355\n00:21:27,560 --> 00:21:29,780\nthat's not the way you wanna go.\n\n356\n00:21:29,780 --> 00:21:33,540\nWho will think about an RODC\nis they give us the ability to\n\n357\n00:21:33,540 --> 00:21:35,450\ndelegate administrative control.\n\n358\n00:21:36,850 --> 00:21:41,030\nNormally with the main controllers, you\nlose access to the security combat, right?\n\n359\n00:21:41,030 --> 00:21:46,200\nThe local groups you can only\nlog on with domain accounts.\n\n360\n00:21:46,200 --> 00:21:49,150\nWith RODCs however, we get that back.\n\n361\n00:21:49,150 --> 00:21:53,200\nWe can create local admins on that RODC so\n\n362\n00:21:53,200 --> 00:21:58,630\nthat somebody can log onto that RODC and\ndo Windows Updates, or create a new share.\n\n363\n00:21:58,630 --> 00:22:01,450\nOr things like that without giving them\n\n364\n00:22:01,450 --> 00:22:04,510\nadministrative control\nover active directory.\n\n365\n00:22:04,510 --> 00:22:08,790\nNow a couple places we can\ncontrol who has that capability.\n\n366\n00:22:08,790 --> 00:22:11,730\nAlways wanna do groups.We've\nacted in Microsoft,\n\n367\n00:22:11,730 --> 00:22:14,910\nwe've stressed it several times\nin several different episodes.\n\n368\n00:22:14,910 --> 00:22:18,980\nWe always delegate permissions to groups,\nnot to individual users.\n\n369\n00:22:18,980 --> 00:22:23,540\nSo you're gonna end up create a group in\nactive directory, like I've done here.\n\n370\n00:22:23,540 --> 00:22:28,555\nI've got a group called,\nsomewhere in here, branch admins.\n\n371\n00:22:28,555 --> 00:22:30,010\nRight?\n\n372\n00:22:30,010 --> 00:22:35,230\nSo I could add some users to, user or\nusers, to this branch admin group.\n\n373\n00:22:35,230 --> 00:22:40,430\nYou can then give them administrative\ncontrol over the RODC one of two ways.\n\n374\n00:22:40,430 --> 00:22:44,990\nWhen you first install the RODC,\nwhich is what I did.\n\n375\n00:22:44,990 --> 00:22:50,150\nI was able to pick who I wanted to\ndelegate administrative control to and\n\n376\n00:22:50,150 --> 00:22:52,640\nI chose that branch, Admins Group.\n\n377\n00:22:52,640 --> 00:22:54,780\nSo I can do it when I install the RODC.\n\n378\n00:22:54,780 --> 00:22:59,780\nBut I'm not stuck if I wanna change\nthat or add, or something like that.\n\n379\n00:22:59,780 --> 00:23:03,430\nI can always go back into\nthe properties of that RODC.\n\n380\n00:23:03,430 --> 00:23:09,420\nAnd on my managed by tab, there you\ncan see where during the installation,\n\n381\n00:23:09,420 --> 00:23:11,480\nI chose that Branch Admin's group.\n\n382\n00:23:11,480 --> 00:23:14,820\nSo at this point, they have the ability\nto administer that machine.\n\n383\n00:23:14,820 --> 00:23:17,996\nThey're an admin, a local admin,\nnot a domain admin.\n\n384\n00:23:17,996 --> 00:23:18,955\nRight?\n\n385\n00:23:18,955 --> 00:23:21,580\nI can change this if I need to.\n\n386\n00:23:21,580 --> 00:23:24,700\nI can just go in and\nbrowse and find another group.\n\n387\n00:23:24,700 --> 00:23:29,530\nBut because I followed the best practice\nand I did a group instead of a user.\n\n388\n00:23:29,530 --> 00:23:33,650\nThat means I can really change who has\nadministrative control over that machine\n\n389\n00:23:33,650 --> 00:23:35,570\njust by modifying that group membership.\n\n390\n00:23:35,570 --> 00:23:38,150\nI don't have to come in here and\nactually go through and\n\n391\n00:23:38,150 --> 00:23:42,170\nchange who this has been delegated to.\n\n392\n00:23:42,170 --> 00:23:46,930\nI can just go to the branch admin's group\nand modify my group membership, right?\n\n393\n00:23:46,930 --> 00:23:50,844\nSo that's how we're gonna go about\ndelegating administrative control over\n\n394\n00:23:50,844 --> 00:23:54,225\nthese RODCs, either during\nthe installation of the RODC itself.\n\n395\n00:23:54,225 --> 00:24:01,527\nOr after the fact, by using\nthe computer account for that RODC.\n\n396\n00:24:01,527 --> 00:24:04,556\nAll right so that, well let me\nflip back over to my objectives,\n\n397\n00:24:04,556 --> 00:24:06,340\nmake sure I don't lose my spot here.\n\n398\n00:24:06,340 --> 00:24:08,870\nWe've got a little bit\nbefore we go on our break.\n\n399\n00:24:08,870 --> 00:24:12,080\nSo we talked about what an RODC is,\nwhy we would use it.\n\n400\n00:24:12,080 --> 00:24:13,880\nRight?\nIn your design,\n\n401\n00:24:13,880 --> 00:24:16,040\nyou've got to think\nabout things like this.\n\n402\n00:24:16,040 --> 00:24:17,810\nI've got a branch office.\n\n403\n00:24:17,810 --> 00:24:21,780\nI know that the link out there to\nthat branch office is unreliable.\n\n404\n00:24:21,780 --> 00:24:25,500\nI don't want to have to worry about\nthose users not being able to log in and\n\n405\n00:24:25,500 --> 00:24:26,800\nget anything done.\n\n406\n00:24:26,800 --> 00:24:29,930\nSo I want to put a domain\ncontroller out there but\n\n407\n00:24:29,930 --> 00:24:32,410\nI don't have good physical\nsecurity out there.\n\n408\n00:24:32,410 --> 00:24:35,390\nSo I don't want to put a full\nblown domain controller out there.\n\n409\n00:24:35,390 --> 00:24:37,930\nThat is where the RODC\ncomes into our design.\n\n410\n00:24:37,930 --> 00:24:38,910\nThat is what it's for.\n\n411\n00:24:38,910 --> 00:24:43,070\nFor places where I need a domain\ncontroller that I don't have really good\n\n412\n00:24:43,070 --> 00:24:44,168\nphysical security.\n\n413\n00:24:44,168 --> 00:24:45,134\nAll right.\n\n414\n00:24:45,134 --> 00:24:47,690\nSo, that's why we put that in our design.\n\n415\n00:24:47,690 --> 00:24:49,390\nThat's what we've got to be thinking.\n\n416\n00:24:49,390 --> 00:24:52,336\nI want a domain controller but\nI'm worried about security.\n\n417\n00:24:52,336 --> 00:24:52,890\nAll right.\nAnd then\n\n418\n00:24:52,890 --> 00:24:56,430\nthe other things we talked about\nwere what I can do with that RODC?\n\n419\n00:24:56,430 --> 00:24:59,460\nHow I can control whose\npasswords are cached out there?\n\n420\n00:24:59,460 --> 00:25:01,780\nWhose passwords are not cached out there?\n\n421\n00:25:01,780 --> 00:25:03,170\nFor an individual RODC.\n\n422\n00:25:03,170 --> 00:25:05,530\nFor all of my RODCs.\n\n423\n00:25:05,530 --> 00:25:07,560\nAnd how we can delegate administration?\n\n424\n00:25:09,050 --> 00:25:10,470\nAll right?\n\n425\n00:25:10,470 --> 00:25:13,650\nNow, another thing that I wanna mention\nwhile we're on the RODC subject,\n\n426\n00:25:13,650 --> 00:25:17,150\nreal quick,\nis the Filtered Attributes Set.\n\n427\n00:25:17,150 --> 00:25:22,170\nIn my notes I've got a,\noops, that is not my notes.\n\n428\n00:25:22,170 --> 00:25:26,830\nI've got a link out here that I'll make\nsure is in the show notes for you guys.\n\n429\n00:25:26,830 --> 00:25:30,310\nThis filtered attribute set\ngoes back over to TechNet here.\n\n430\n00:25:33,510 --> 00:25:38,463\n[SOUND] All right, and\nbasically what this is,\n\n431\n00:25:38,463 --> 00:25:46,220\nis the list of attributes that are not\nbeing replicated out to that RODC.\n\n432\n00:25:46,220 --> 00:25:49,010\nI told you earlier it's the passwords,\nthe secrets.\n\n433\n00:25:49,010 --> 00:25:52,850\nBut that's not the only attributes\nthat are not replicated to the RODC.\n\n434\n00:25:52,850 --> 00:25:56,240\nThere are a few others as well,\nMaster Keys,\n\n435\n00:25:56,240 --> 00:25:59,900\nAccount Credentials,\nRecovery Password and things like that.\n\n436\n00:25:59,900 --> 00:26:01,700\nThis is the list of attributes.\n\n437\n00:26:01,700 --> 00:26:06,380\nIt's called\nthe RODC Filtered Attribute Set.\n\n438\n00:26:06,380 --> 00:26:09,580\nThese are the ones that\ndo not replicate out.\n\n439\n00:26:09,580 --> 00:26:12,780\nI might have other attributes\nthat I do not want to be stored.\n\n440\n00:26:12,780 --> 00:26:15,390\nAgain, I'm thinking about\nsecurity in my design.\n\n441\n00:26:15,390 --> 00:26:19,810\nIf somebody gets a hold of that RODC,\nare there any attributes that have\n\n442\n00:26:19,810 --> 00:26:23,230\nconfidential or\nsecret information that I don't want them,\n\n443\n00:26:23,230 --> 00:26:27,060\nI don't wanna take a chance on\nsomebody gaining access to?\n\n444\n00:26:27,060 --> 00:26:29,969\nSo I can modify the filtered\nattributes set.\n\n445\n00:26:29,969 --> 00:26:31,050\nAll right.\n\n446\n00:26:31,050 --> 00:26:33,790\nIt's not the easiest,\nthere's not gooey front end to do it.\n\n447\n00:26:33,790 --> 00:26:39,060\nYou have to break out ADSI edit and\nyour LDIV DE to make\n\n448\n00:26:39,060 --> 00:26:44,460\nthose changes to that\nfiltered attribute set.\n\n449\n00:26:44,460 --> 00:26:46,590\nSo just know that you're not\nstuck with the defaults.\n\n450\n00:26:46,590 --> 00:26:47,680\nYou can always go in and\n\n451\n00:26:47,680 --> 00:26:51,300\nchange what attributes are being\ncached out there at that RODC.\n\n452\n00:26:52,770 --> 00:26:53,990\nAll right, tell you what ladies and\ngentlemen.\n\n453\n00:26:53,990 --> 00:26:58,240\nThat is probably a good place for us to\nstop and take a quick break and get up and\n\n454\n00:26:58,240 --> 00:27:00,800\nstretch the legs,\nget the blood flowing again.\n\n455\n00:27:00,800 --> 00:27:06,975\nSo we're gonna take a short break and\nI'll meet you back here in a few.\n\n456\n00:27:06,975 --> 00:27:14,060\n[SOUND] All right,\nwelcome back ladies and gentlemen.\n\n457\n00:27:14,060 --> 00:27:18,432\nSo we've been talking about some of our\ndesign considerations for our branch off,\n\n458\n00:27:18,432 --> 00:27:22,120\nas it is we left off that last\nsegment talking about RODC's.\n\n459\n00:27:22,120 --> 00:27:26,130\nAnd we're gonna continue on talking about\nthings that we need to worry about in our\n\n460\n00:27:26,130 --> 00:27:29,270\ndesign for our branch offices,\nour satellite offices.\n\n461\n00:27:29,270 --> 00:27:31,090\nRight?\nOur remote offices.\n\n462\n00:27:31,090 --> 00:27:33,640\nOther things, when we look at our\nobjectives, some other things they're\n\n463\n00:27:33,640 --> 00:27:38,810\ngonna call out are things like\nthe global catalog DNS and DHCP.\n\n464\n00:27:38,810 --> 00:27:40,900\nThese are services that we obviously need.\n\n465\n00:27:40,900 --> 00:27:41,780\nRight?\n\n466\n00:27:41,780 --> 00:27:46,620\nWe've talked about the global catalog,\nthe ability to search for\n\n467\n00:27:46,620 --> 00:27:51,010\nobjects throughout my entire forest\nwhen I'm in a multi-domain environment.\n\n468\n00:27:51,010 --> 00:27:53,140\nAnd we've kind of already talked\nabout it in this episode,\n\n469\n00:27:53,140 --> 00:27:54,620\nbut just to rehash that a little bit.\n\n470\n00:27:54,620 --> 00:27:59,620\nRemember, that global catalog can add\na lot to our replication because that\n\n471\n00:27:59,620 --> 00:28:04,900\nincludes that partial attribute set for\nall of the domains in my force.\n\n472\n00:28:04,900 --> 00:28:10,230\nIf I'm a single domain, then that domain\ncontroller out there at the branch\n\n473\n00:28:10,230 --> 00:28:14,600\noff that's read only or not, already\nhas a copy of the domain partition.\n\n474\n00:28:14,600 --> 00:28:16,060\nSo it's not gonna increase,\n\n475\n00:28:16,060 --> 00:28:18,130\nthere's really no need for\nthe global catalog at that point.\n\n476\n00:28:18,130 --> 00:28:19,810\nYou search your domain partition.\n\n477\n00:28:19,810 --> 00:28:21,418\nyou're searching all objects.\n\n478\n00:28:21,418 --> 00:28:22,830\nIn a multi-domain environment though,\n\n479\n00:28:22,830 --> 00:28:26,590\nnow I gotta think about do I wanna\nput a catalog server out there\n\n480\n00:28:26,590 --> 00:28:30,770\nto facilitate searching for\nobjects throughout the entire course?\n\n481\n00:28:30,770 --> 00:28:34,810\nAnd the answer kinda\ndepends on what kind of\n\n482\n00:28:34,810 --> 00:28:39,530\nbandwidth I have out there to that\nbranch office, because if I have ten,\n\n483\n00:28:39,530 --> 00:28:44,640\n20 different domains, that global catalog\ncan add a lot to the replication.\n\n484\n00:28:44,640 --> 00:28:46,750\nSo if I've got the bandwidth\nto support it, great.\n\n485\n00:28:46,750 --> 00:28:50,360\nI can put that global catalog service\non that domain controller out there.\n\n486\n00:28:50,360 --> 00:28:55,100\nIf I don't, then that's when we do that\nuniversal group membership caching.\n\n487\n00:28:55,100 --> 00:28:57,734\nAll right, because we know,\nwe've talked about it,\n\n488\n00:28:57,734 --> 00:29:01,310\nthat universal group membership\nis not in the domain partition.\n\n489\n00:29:01,310 --> 00:29:04,030\nIt's in the global catalog.\n\n490\n00:29:04,030 --> 00:29:06,751\nSo, in order, if I,\nlet's say I put an RODC out there.\n\n491\n00:29:06,751 --> 00:29:08,387\nRight?\nBut I don't make it a global\n\n492\n00:29:08,387 --> 00:29:12,510\ncatalog server and I don't enable\nuniversal group membership caching.\n\n493\n00:29:12,510 --> 00:29:13,158\nOkay, great.\n\n494\n00:29:13,158 --> 00:29:16,950\nI go to log on that already see\nthat it has my credentials cached.\n\n495\n00:29:16,950 --> 00:29:21,500\nSo I can I can get my authentication\ntoken or I can start building my token.\n\n496\n00:29:21,500 --> 00:29:24,390\nIt can list all my global groups and\nmy domain local groups,\n\n497\n00:29:25,750 --> 00:29:30,720\nif the WAN link is down it can't reach\nout and find a global catalog server\n\n498\n00:29:30,720 --> 00:29:34,320\nto include my universal group\nmembership to that access token.\n\n499\n00:29:34,320 --> 00:29:38,550\nSo the option is put a global\ncatalog server out there.\n\n500\n00:29:38,550 --> 00:29:41,250\nIf that's not possible cause\nwe'll band with limitations.\n\n501\n00:29:41,250 --> 00:29:43,400\nThen we do with universal\nmembership cache.\n\n502\n00:29:43,400 --> 00:29:45,210\nThat way the main controllers out there.\n\n503\n00:29:45,210 --> 00:29:49,580\nThe first time, the read only domain\ncontroller will have to go across the WAN\n\n504\n00:29:49,580 --> 00:29:52,380\nlink talk to a global catalog server.\n\n505\n00:29:52,380 --> 00:29:55,790\nGet my user accounts universal\ngroup membership, but\n\n506\n00:29:55,790 --> 00:29:59,960\nthen it's gonna cache it so that in\nthe future if the WAN link is down,\n\n507\n00:29:59,960 --> 00:30:04,570\nit can still build a proper access\ntoken for me and allow me to log on.\n\n508\n00:30:04,570 --> 00:30:06,680\nAnd I showed you guys that\nearlier in the episode.\n\n509\n00:30:06,680 --> 00:30:08,600\nAll I did was go into\nactive directory sites and\n\n510\n00:30:08,600 --> 00:30:11,653\nservices, pull up the NTDS site settings.\n\n511\n00:30:11,653 --> 00:30:13,750\nRight?\nNot the individual domain controllers.\n\n512\n00:30:13,750 --> 00:30:15,850\nThe NTDS settings for the entire site.\n\n513\n00:30:15,850 --> 00:30:20,192\nAnd it was just a little check mark,\nenable universal group membership caching.\n\n514\n00:30:20,192 --> 00:30:20,780\nAll right.\n\n515\n00:30:20,780 --> 00:30:22,750\nSo easy enough there.\n\n516\n00:30:22,750 --> 00:30:27,040\nBut again, something we've gotta think\nabout when we're implementing our design.\n\n517\n00:30:27,040 --> 00:30:29,760\nOther things they call out, DNS and DHTP.\n\n518\n00:30:29,760 --> 00:30:31,260\nDNS is kind of a no brainer.\n\n519\n00:30:31,260 --> 00:30:33,930\nRight?\nI mean active directory relies on DNS.\n\n520\n00:30:33,930 --> 00:30:35,992\nIt's got a one to one relationship.\n\n521\n00:30:35,992 --> 00:30:38,390\nI mean it has to have it.\n\n522\n00:30:38,390 --> 00:30:41,360\nSo we're most likely gonna\nwant to put DNS out there.\n\n523\n00:30:41,360 --> 00:30:45,150\nI think all of the main controllers\nshould be DNS servers in the end.\n\n524\n00:30:45,150 --> 00:30:46,990\nOne thing to keep in mind though.\n\n525\n00:30:46,990 --> 00:30:51,690\nIs that if I implement\nan Active Directory Integrated Zone on\n\n526\n00:30:51,690 --> 00:30:57,370\na read-only domain controller,\nthen that zone is also gonna be read only.\n\n527\n00:30:57,370 --> 00:30:58,990\nSo we can still do lookups.\n\n528\n00:30:58,990 --> 00:31:01,522\nIt won't be able to make\nany changes to the zone.\n\n529\n00:31:01,522 --> 00:31:02,050\nAll right.\n\n530\n00:31:02,050 --> 00:31:04,580\nNow that doesn't mean things can't change.\n\n531\n00:31:04,580 --> 00:31:08,470\nIf my computer gets a new\nIP address from DHCP,\n\n532\n00:31:08,470 --> 00:31:11,510\nI need to update my record\nin DNS to reflect that.\n\n533\n00:31:11,510 --> 00:31:16,080\nWhat's gonna happen is if my\ncomputer is configured in its\n\n534\n00:31:16,080 --> 00:31:21,040\nTCPIP settings to use that RODC\nas his primary DNS server,\n\n535\n00:31:21,040 --> 00:31:24,040\nhe's gonna still send\nthe change request to the RODC.\n\n536\n00:31:24,040 --> 00:31:26,210\nThe RODC is gonna get that request.\n\n537\n00:31:26,210 --> 00:31:29,850\nAnd he's gonna say, wait,\nI can't make this change, it's read only.\n\n538\n00:31:29,850 --> 00:31:34,580\nAnd he will forward the change\nrequest on to a writable copy,\n\n539\n00:31:34,580 --> 00:31:37,580\nwherever that may be,\nback at the corporate office.\n\n540\n00:31:37,580 --> 00:31:41,130\nThe other thing that he's going to do,\nis he's going to request a, oh, gosh,\n\n541\n00:31:41,130 --> 00:31:44,620\nI can't think of the exact term for this.\n\n542\n00:31:44,620 --> 00:31:48,640\nA replicate single change request.\n\n543\n00:31:48,640 --> 00:31:51,180\nI'll get the exact term\nhere in just a minute.\n\n544\n00:31:51,180 --> 00:31:52,190\nBut he knows.\n\n545\n00:31:52,190 --> 00:31:54,892\nRight?\nThe RODC just got this request for\n\n546\n00:31:54,892 --> 00:31:57,088\nan update to that DNS record.\n\n547\n00:31:57,088 --> 00:32:00,583\nHe had to forward it on to somebody else\nbecause he couldn't make the change.\n\n548\n00:32:00,583 --> 00:32:03,079\nBut he knows something is being changed,\nright?\n\n549\n00:32:03,079 --> 00:32:04,821\nHe just couldn't do it himself.\n\n550\n00:32:04,821 --> 00:32:08,854\nSo he's gonna send that request over to\nallow somebody else to make the change and\n\n551\n00:32:08,854 --> 00:32:11,970\nthen he's gonna say, hey,\ncan you send that back to me?\n\n552\n00:32:11,970 --> 00:32:14,700\nAs soon as you make that change,\ncan you update me?\n\n553\n00:32:14,700 --> 00:32:16,361\nSo that I have the current information.\n\n554\n00:32:16,361 --> 00:32:19,150\nAll right.\n\n555\n00:32:19,150 --> 00:32:23,570\nSo for DNS, again, the thing I want you\nguys to remember is that if you implement\n\n556\n00:32:23,570 --> 00:32:28,660\nan active directory integrated zone on an\nRODC, that zone will be read only as well.\n\n557\n00:32:28,660 --> 00:32:30,060\nIt can still do all the lookups.\n\n558\n00:32:30,060 --> 00:32:35,290\nEverything else is fine, just can't make\nnew records or change existing records.\n\n559\n00:32:35,290 --> 00:32:36,500\nBut it doesn't break things.\n\n560\n00:32:36,500 --> 00:32:39,300\nIt will forward it on to a writable copy.\n\n561\n00:32:39,300 --> 00:32:40,570\nJust like a password change.\n\n562\n00:32:40,570 --> 00:32:42,050\nWhat if I want to change my password?\n\n563\n00:32:42,050 --> 00:32:46,170\nIt's been 30 days, password policy\nsays I've gotta change my password.\n\n564\n00:32:46,170 --> 00:32:48,130\nThe RODC cannot change my password.\n\n565\n00:32:48,130 --> 00:32:52,134\nHe might have my password cached, but\nhe can't change it because it's read only.\n\n566\n00:32:52,134 --> 00:32:53,739\nSame thing is gonna happen.\n\n567\n00:32:53,739 --> 00:32:56,079\nHe's gonna forward that change request,\n\n568\n00:32:56,079 --> 00:32:59,719\nthat password change request over\nto a writable copy and then he's\n\n569\n00:32:59,719 --> 00:33:04,141\ngonna do a replicate single object that's\nwhat popped back into my brain there.\n\n570\n00:33:04,141 --> 00:33:09,480\nReplicate single object and that as\nsoon as that password gets changed,\n\n571\n00:33:09,480 --> 00:33:14,483\nit'll get replicated back out so\nthat he has the current password.\n\n572\n00:33:14,483 --> 00:33:18,000\nDHCP, is another service\nthat we rely heavily on.\n\n573\n00:33:18,000 --> 00:33:23,450\nAll my client machines are typically set\nto obtain an IP address automatically.\n\n574\n00:33:23,450 --> 00:33:29,370\nWell if there's no DHCP sever out there,\nhow am I gonna get an IP address, right?\n\n575\n00:33:29,370 --> 00:33:34,110\nWe've talked about it, in the MCSA track,\nas well as in network plus.\n\n576\n00:33:35,380 --> 00:33:39,630\nDHCP is all done by broadcast,\nright that DORA process.\n\n577\n00:33:39,630 --> 00:33:42,290\nDiscover offer request acknowledgement.\n\n578\n00:33:42,290 --> 00:33:44,360\nWell if I'm sitting out\nhere at the branch office,\n\n579\n00:33:44,360 --> 00:33:47,260\nthat broadcast is not gonna\ngo through my router or\n\n580\n00:33:47,260 --> 00:33:50,320\nanything like that over to the other side,\nwithout a little help.\n\n581\n00:33:50,320 --> 00:33:53,420\nGuys, remember what we call that,\nor what we can set up?\n\n582\n00:33:53,420 --> 00:33:55,260\nIt was that relay agent.\n\n583\n00:33:55,260 --> 00:34:00,320\nI can set up a relay agent to\nforward those broadcasts on.\n\n584\n00:34:00,320 --> 00:34:02,270\nWell I shouldn't say\nforward the broadcast.\n\n585\n00:34:02,270 --> 00:34:04,040\nConverted into a unicast.\n\n586\n00:34:04,040 --> 00:34:07,880\nSend that back over the DH server\nback at the corporate office.\n\n587\n00:34:07,880 --> 00:34:12,450\nIt will reply to the relay agent who will\nthen rebroadcast that out to the subnet at\n\n588\n00:34:12,450 --> 00:34:14,270\nmy branch office.\n\n589\n00:34:14,270 --> 00:34:18,350\nBut that's probably,\nthat's a little clunky, right?\n\n590\n00:34:18,350 --> 00:34:23,300\nI mean, if that WAN link is down, I'm\nnot gonna be able to get an IP address.\n\n591\n00:34:23,300 --> 00:34:27,700\nSo, most likely we're gonna put a DHCP\nserver out there at that branch office.\n\n592\n00:34:27,700 --> 00:34:29,490\nAt least most of the designs\nI've come up with,\n\n593\n00:34:29,490 --> 00:34:33,390\nI want a DHCP server,\nin each one of my broadcast domains.\n\n594\n00:34:34,460 --> 00:34:36,920\nBut if not, we could do a relay agent.\n\n595\n00:34:38,790 --> 00:34:40,340\nAll right, so let's see.\n\n596\n00:34:40,340 --> 00:34:41,940\nSo back in our objectives here.\n\n597\n00:34:41,940 --> 00:34:44,225\nWe've talked about our RODCs.\n\n598\n00:34:44,225 --> 00:34:48,295\nWe've talked about our universal\ngroup membership caching,\n\n599\n00:34:48,295 --> 00:34:49,615\nour global catalog, DNS, DHCP.\n\n600\n00:34:49,615 --> 00:34:53,355\nWhat else can we talk about?\n\n601\n00:34:53,355 --> 00:34:58,015\nWe talked about delegating\nadministration over those RODCs.\n\n602\n00:34:58,015 --> 00:35:01,125\nWe can do that during the installation\nof the RODC itself or\n\n603\n00:35:01,125 --> 00:35:07,870\nwe can go to the computer account for the\nRODC in active directory after the fact.\n\n604\n00:35:07,870 --> 00:35:09,940\nTalked about that filtered attribute set.\n\n605\n00:35:09,940 --> 00:35:14,330\nThat's the attributes that\nare being prevented from being\n\n606\n00:35:14,330 --> 00:35:16,860\nreplicated out to that RODC.\n\n607\n00:35:16,860 --> 00:35:21,825\nWe can make changes to that\nusing ADSI edit and LDIFDE.\n\n608\n00:35:21,825 --> 00:35:27,855\nWe talked about the password\nreplication policy as well.\n\n609\n00:35:27,855 --> 00:35:29,685\nSo I think the next thing\nwe've got on our oh,\n\n610\n00:35:29,685 --> 00:35:33,815\nlet me talk about those implementing\nconfidential attributes, right?\n\n611\n00:35:33,815 --> 00:35:37,335\nImplementing confidential attributes,\nwhat they're referring to here\n\n612\n00:35:37,335 --> 00:35:41,540\nis the fact that we can mark\ncertain attributes as confidential.\n\n613\n00:35:41,540 --> 00:35:42,770\nIf we need to prevent,\n\n614\n00:35:42,770 --> 00:35:46,750\nmaybe we some of these attributes\ncontain sensitive information.\n\n615\n00:35:46,750 --> 00:35:49,820\nI don't know, maybe we've made a new\nattribute in our schema that stores\n\n616\n00:35:49,820 --> 00:35:53,830\na social security number\non a user account, or\n\n617\n00:35:53,830 --> 00:35:56,010\nsome other type of sensitive information.\n\n618\n00:35:57,150 --> 00:36:00,480\nWe can flag those as confidential.\n\n619\n00:36:00,480 --> 00:36:07,780\nWe end up going into our schema,\ninto our schema snap in.\n\n620\n00:36:07,780 --> 00:36:10,130\nWe make the changes to\nthe attribute in the schema.\n\n621\n00:36:10,130 --> 00:36:12,926\nWe're just changing a flag in there.\n\n622\n00:36:12,926 --> 00:36:17,430\nI don't think I actually wrote\nthat particular flag down but\n\n623\n00:36:17,430 --> 00:36:21,890\nhere's what I want you guys to remember\nabout it is the filtered attribute set\n\n624\n00:36:21,890 --> 00:36:26,750\nthat is what's controlling what attributes\nare being replicated out to the RODC.\n\n625\n00:36:26,750 --> 00:36:32,530\nThe confidential attributes affects all\ndomain controllers, as well as, RODCs.\n\n626\n00:36:32,530 --> 00:36:33,321\nAnd it's doing,\n\n627\n00:36:33,321 --> 00:36:36,690\nit's not preventing the domain\ncontroller from storing the attributes.\n\n628\n00:36:36,690 --> 00:36:40,520\nThey're going to store that attribute,\nthe confidential attributes.\n\n629\n00:36:40,520 --> 00:36:41,880\nBut it won't be searchable, right?\n\n630\n00:36:41,880 --> 00:36:47,330\nIt won't show up in search lists because\nit contains that confidential information,\n\n631\n00:36:47,330 --> 00:36:49,860\nall right?\n\n632\n00:36:49,860 --> 00:36:50,470\nAll right.\n\n633\n00:36:50,470 --> 00:36:51,860\nSo let's see.\n\n634\n00:36:51,860 --> 00:36:56,220\nThe only thing I think we've really\ngot left is gonna be branch cache.\n\n635\n00:36:56,220 --> 00:37:00,580\nAnother thing that we worry\nabout with our branch offices.\n\n636\n00:37:00,580 --> 00:37:05,250\nAnd we've seen how to set it\nup in some previous episodes,\n\n637\n00:37:05,250 --> 00:37:09,280\nin our, gosh I want to say that one\nwas in 412, if I remember correctly.\n\n638\n00:37:09,280 --> 00:37:12,000\nBut it was in the MCSA track.\n\n639\n00:37:12,000 --> 00:37:15,880\nLet's refresh talk about\nwhat that branch cache is.\n\n640\n00:37:15,880 --> 00:37:20,260\nYou know, branch cache, but\nlet's back up for a second,\n\n641\n00:37:20,260 --> 00:37:22,440\nlet's talk about why we want\none there in the first place.\n\n642\n00:37:22,440 --> 00:37:26,680\nWhen we're designing our network,\nwe've got people working at these remote\n\n643\n00:37:26,680 --> 00:37:31,650\noffices, and they need access to\nresources that are stored back at\n\n644\n00:37:31,650 --> 00:37:36,200\nthe corporate office,\nfile shares, could be websites.\n\n645\n00:37:36,200 --> 00:37:40,490\nMaybe we're running a corporate intranet\nsite back at the corporate office\n\n646\n00:37:40,490 --> 00:37:45,403\nthat has our calendar of upcoming events\nand meetings and things like that.\n\n647\n00:37:45,403 --> 00:37:48,570\nAnd if the WAN link down those\n\n648\n00:37:48,570 --> 00:37:53,200\nusers are not going to be able to\naccess that information or file shares.\n\n649\n00:37:53,200 --> 00:37:57,800\nYou know every time they go to access that\nfile they've got to go across the WAN link\n\n650\n00:37:57,800 --> 00:38:00,350\nto do that and\nthat could be slow or unreliable.\n\n651\n00:38:00,350 --> 00:38:01,490\nAnd every individual user.\n\n652\n00:38:01,490 --> 00:38:04,190\nWhat if I have ten,\nfifteen users out there, and\n\n653\n00:38:04,190 --> 00:38:07,130\nthey're all accessing this\nsame information, each one of\n\n654\n00:38:07,130 --> 00:38:11,520\nthem is sending a request across that\nWAN link, and returning that data.\n\n655\n00:38:11,520 --> 00:38:16,570\nAnd I've, it's a branch office, I probably\nhave a limited bandwidth available, so\n\n656\n00:38:16,570 --> 00:38:19,870\nin order to, or\none way we can help with that\n\n657\n00:38:19,870 --> 00:38:23,970\nis to cache some of that content\nout their other branch office.\n\n658\n00:38:25,180 --> 00:38:27,870\nThat is what branch cache is all about.\n\n659\n00:38:27,870 --> 00:38:31,815\nAnd we can cache file shares and\nwe can cache websites.\n\n660\n00:38:31,815 --> 00:38:36,720\nNow on this particular set objectives,\n\n661\n00:38:36,720 --> 00:38:42,110\none of the big things they call out\nis understanding the different modes\n\n662\n00:38:42,110 --> 00:38:47,360\nin branch cache, cuz there's really two\ndifferent ways we can set up branch cache.\n\n663\n00:38:47,360 --> 00:38:52,270\nWe've got what we call branch\ncache in hosted cache mode, and\n\n664\n00:38:52,270 --> 00:38:55,870\nwe've got branch cache in\ndistributed cache mode.\n\n665\n00:38:55,870 --> 00:38:57,470\nIt's really all about,\n\n666\n00:38:57,470 --> 00:39:01,810\nwhere do I wanna cash the content\nout there in the branch office.\n\n667\n00:39:01,810 --> 00:39:05,670\nIf the branch office is large\nenough to have a server out there,\n\n668\n00:39:05,670 --> 00:39:07,860\nthen I can do hosted cache move,\n\n669\n00:39:07,860 --> 00:39:12,290\nwhere that server at the branch\noffice becomes the cache location.\n\n670\n00:39:12,290 --> 00:39:14,130\nIt's all gonna be cash there.\n\n671\n00:39:14,130 --> 00:39:17,760\nAnd then those users are going\nto access that information,\n\n672\n00:39:17,760 --> 00:39:22,630\nfrom that server at the branch office,\nrather than going across the WAN link.\n\n673\n00:39:22,630 --> 00:39:28,340\nSo a central location, at that remote\noffice to cash that information up,\n\n674\n00:39:28,340 --> 00:39:33,390\nif it's a smaller branch office and I do\nnot have a server out there that I can use\n\n675\n00:39:33,390 --> 00:39:38,600\nto host that cache information, I can\ndo what we call distributed cache mode.\n\n676\n00:39:38,600 --> 00:39:40,189\nDistributive cache mode,\n\n677\n00:39:40,189 --> 00:39:44,481\nis we're gonna borrow a little portion\nof all the client's hard drives.\n\n678\n00:39:44,481 --> 00:39:48,492\nBy default it's set to 5%,\nyou can adjust that value, and\n\n679\n00:39:48,492 --> 00:39:50,703\nI'm gonna use that as the cache.\n\n680\n00:39:50,703 --> 00:39:55,359\nSo I'll actually distribute\nthe cache across the client nodes.\n\n681\n00:39:55,359 --> 00:39:56,984\nOut there at that branch office.\n\n682\n00:39:56,984 --> 00:39:59,445\nSo easy to remember, hosted cache.\n\n683\n00:39:59,445 --> 00:40:02,700\nI have a server to host\nthe cached information.\n\n684\n00:40:02,700 --> 00:40:06,730\nThe distributed cache mode,\nI don't have a server, so I'm gonna\n\n685\n00:40:06,730 --> 00:40:11,110\ndistribute the cache across the client\nnodes out there at that branch office.\n\n686\n00:40:11,110 --> 00:40:15,030\nSo when we're planning our design,\nthat's what we think about.\n\n687\n00:40:15,030 --> 00:40:17,120\nDo we have a server out there or not.\n\n688\n00:40:17,120 --> 00:40:20,770\nIf I wanna implement branch cache,\nI've gotta plan for\n\n689\n00:40:20,770 --> 00:40:24,850\nwhat mode I'm gonna set this up in, and\nthat's all gonna be based on whether or\n\n690\n00:40:24,850 --> 00:40:28,936\nnot I have a server out there to\ninstall that branch cache feature on.\n\n691\n00:40:28,936 --> 00:40:31,207\nAll right.\n\n692\n00:40:33,560 --> 00:40:36,960\nSo that's one of the things again,\nthat we want to think about.\n\n693\n00:40:36,960 --> 00:40:39,700\nNow with our branch cache,\na couple of things.\n\n694\n00:40:39,700 --> 00:40:43,940\nAgain, I can't remember if we actually\nshowed you guys how to do that branch\n\n695\n00:40:43,940 --> 00:40:49,050\ncache, but I wanna show you a couple\nthings with branch cache, but\n\n696\n00:40:49,050 --> 00:40:54,830\nI, oh, we've still got ten minutes, so why\ndon't we go ahead and take a peak at it.\n\n697\n00:40:54,830 --> 00:41:00,940\nOne of the primary things that they\ncall out is, other than first, knowing\n\n698\n00:41:00,940 --> 00:41:04,970\nthe difference between those two modes,\nbecause that's a big design consideration.\n\n699\n00:41:04,970 --> 00:41:07,640\nWhich mode am I gonna be doing this in?\n\n700\n00:41:07,640 --> 00:41:09,210\nThat's gonna change a few things, right?\n\n701\n00:41:09,210 --> 00:41:13,490\nIn order to do the hosted cache mode,\nI've got to have a server out there, and\n\n702\n00:41:13,490 --> 00:41:20,010\nI've got to install that,\nthe branch cache feature, on that server.\n\n703\n00:41:20,010 --> 00:41:22,770\nIf I'm doing distributing cache mode,\nI don't have a server,\n\n704\n00:41:22,770 --> 00:41:26,030\nI don't have to install that feature, but\nnow I've got other things I've got to do.\n\n705\n00:41:26,030 --> 00:41:29,740\nI've got to set up firewall rules,\non those nodes out there,\n\n706\n00:41:29,740 --> 00:41:32,460\nbecause their gonna be accessing\neach others hard drives, right?\n\n707\n00:41:32,460 --> 00:41:35,640\nThey have to be able to see\nwhat content is cached, and\n\n708\n00:41:35,640 --> 00:41:40,580\nthen retrieve that cached information\nfrom the other nodes on their sub-net.\n\n709\n00:41:40,580 --> 00:41:46,918\nSo we open up these peer to peer firewall\nrules to allow that to happen, all right.\n\n710\n00:41:46,918 --> 00:41:51,020\nNow, the way branch cache works is\n\n711\n00:41:51,020 --> 00:41:55,160\nit doesn't prevent all traffic from\ngoing back across that WAN link.\n\n712\n00:41:55,160 --> 00:41:59,970\nSo it reduces the amount of traffic that\nwould have to go across that WAN link.\n\n713\n00:41:59,970 --> 00:42:03,370\nIf I'm out there in the branch office and\nI go to access a share,\n\n714\n00:42:03,370 --> 00:42:08,160\nI want a file that's located in a share\nback at the corporate office, I'm gonna\n\n715\n00:42:08,160 --> 00:42:14,130\ntype in my UNC path, //file01/corpdocs or\nwhatever the case may be.\n\n716\n00:42:14,130 --> 00:42:19,340\nI'm gonna go across the WAN length, and\nretrieve that file, just like normal.\n\n717\n00:42:19,340 --> 00:42:21,700\nJust like if I wasn't\nrunning branch cache.\n\n718\n00:42:22,820 --> 00:42:26,520\nOnce I retrieve that file, however,\nthat's when things change.\n\n719\n00:42:26,520 --> 00:42:32,080\nNow my client is going to either,\nif I'm in hosted cache mode,\n\n720\n00:42:32,080 --> 00:42:37,990\nis going to put a copy of that file up\nthere on that hosting cache server.\n\n721\n00:42:37,990 --> 00:42:42,610\nIf I'm in distributed cache mode, then\nhe's gonna store it on his hard drive and\n\n722\n00:42:42,610 --> 00:42:45,400\nthat percentage of the hard\ndrive that's been reserved for\n\n723\n00:42:45,400 --> 00:42:47,590\nthis distributed cache mode.\n\n724\n00:42:47,590 --> 00:42:52,860\nThen the next person that goes\nto get that file is going to,\n\n725\n00:42:52,860 --> 00:42:54,730\nthey're gonna access it\nthe same way we normally do.\n\n726\n00:42:54,730 --> 00:42:58,855\nThey don't know if it's cached or not,\nand they just type in the normal path,\n\n727\n00:42:58,855 --> 00:43:05,380\n\\\\file01\\corpdocs, but what's happening in\nthe background is their computer's gonna\n\n728\n00:43:05,380 --> 00:43:11,720\nretrieve it from the cache location,\ninstead of going across the WAN link.\n\n729\n00:43:11,720 --> 00:43:15,880\nThat's where we see that reduction in\nthe amount of bandwidth used between our\n\n730\n00:43:15,880 --> 00:43:20,530\nbranch office and our corporate office, is\nthe first person that accesses that file\n\n731\n00:43:20,530 --> 00:43:23,930\nis gonna have to go across the WAN\nlink and get it, but after that,\n\n732\n00:43:23,930 --> 00:43:27,280\neverybody else that accesses that\nfile is gonna retrieve it locally.\n\n733\n00:43:27,280 --> 00:43:31,780\nThey're gonna be staying on their local\nsubnet and accessing the information.\n\n734\n00:43:31,780 --> 00:43:36,850\nIt's gonna be much, much faster.\n\n735\n00:43:36,850 --> 00:43:40,413\nWhat else do I wanna show you?\n\n736\n00:43:40,413 --> 00:43:44,884\nWhen they go to get that file, when they\ngo to retrieve that cached information,\n\n737\n00:43:44,884 --> 00:43:49,000\nI want to make sure that they've got\nthe latest version of that, right.\n\n738\n00:43:49,000 --> 00:43:53,590\nWhat if that user in the morning\naccessed that file, it got cached, but\n\n739\n00:43:53,590 --> 00:43:55,580\nthe file has changed since then?\n\n740\n00:43:55,580 --> 00:43:58,420\nI don't want to be\nreading that stale data.\n\n741\n00:43:58,420 --> 00:44:02,150\nMaybe somebody at the corporate office\nupdated that calendar on the website.\n\n742\n00:44:02,150 --> 00:44:06,590\nOr made a change to whatever document\nI'm retrieving from that file share.\n\n743\n00:44:06,590 --> 00:44:11,240\nI want to make sure that they're always\ngetting the latest version of that file.\n\n744\n00:44:11,240 --> 00:44:15,720\nAnd if it was cached hours ago, it very\nwell could be out of date or stale.\n\n745\n00:44:15,720 --> 00:44:18,730\nSo what's gonna happen\nis when that second,\n\n746\n00:44:18,730 --> 00:44:21,700\nthird, fourth person goes\nto access the resource,\n\n747\n00:44:21,700 --> 00:44:26,280\nthere is still some traffic that's\ngonna go across the WAN link, right.\n\n748\n00:44:26,280 --> 00:44:30,980\nAnd what they're gonna do is they're\ngonna retrieve a hash value for the file,\n\n749\n00:44:30,980 --> 00:44:32,060\nall right.\n\n750\n00:44:32,060 --> 00:44:33,860\nSo instead of retrieving the entire file,\n\n751\n00:44:33,860 --> 00:44:35,670\nthey're just retrieving\nthis tiny hash value.\n\n752\n00:44:35,670 --> 00:44:38,810\nAnd then they're gonna\ntake that hash value, and\n\n753\n00:44:38,810 --> 00:44:43,910\ncompare it to the hash value for the file\nor resource that exists in the cache.\n\n754\n00:44:43,910 --> 00:44:46,630\nIf those two values match exactly,\n\n755\n00:44:46,630 --> 00:44:49,760\nthen I know that those two\ndocuments are exactly the same.\n\n756\n00:44:49,760 --> 00:44:51,840\nBecause we've talked about hashes before.\n\n757\n00:44:51,840 --> 00:44:56,350\nYou run a document through a hashing\nalgorithm, the output is a hash value and\n\n758\n00:44:56,350 --> 00:44:59,090\nevery time you run that document\nthrough that hashing algorithm,\n\n759\n00:44:59,090 --> 00:45:02,120\nit always generates\nthe exact same hash value.\n\n760\n00:45:02,120 --> 00:45:06,560\nMake a single change to that document,\nand you're gonna change the hash value.\n\n761\n00:45:06,560 --> 00:45:12,150\nSo I can tell whether or\nnot that document has been changed.\n\n762\n00:45:12,150 --> 00:45:15,730\nSo if the document hasn't been changed,\nthen I just pull it right from the cache.\n\n763\n00:45:15,730 --> 00:45:18,010\nAnd I've got my copy and I'm good to go.\n\n764\n00:45:18,010 --> 00:45:22,650\nIf the document has been modified since it\nhad been cached, if those two hash values\n\n765\n00:45:22,650 --> 00:45:25,880\ndon't match, then I'm gonna have to\nretrieve the document from the corporate\n\n766\n00:45:25,880 --> 00:45:29,160\noffice, I'm gonna have to go across\nthe WAN link, get the document,\n\n767\n00:45:29,160 --> 00:45:33,610\nbring it back, and then I'm going to\nupdate the cache with that latest version.\n\n768\n00:45:33,610 --> 00:45:35,770\nSo the next person that goes to get it,\n\n769\n00:45:35,770 --> 00:45:38,530\nhopefully won't have to\ngo across that WAN link.\n\n770\n00:45:38,530 --> 00:45:41,908\nSo you see how I say it\ndoesn't eliminate the traffic.\n\n771\n00:45:41,908 --> 00:45:47,628\nI mean if WAN link is down, you're gonna\nhave a problem accessing those documents,\n\n772\n00:45:47,628 --> 00:45:52,624\nbut if, assuming the WAN link is up,\nit just reduces the amount of traffic\n\n773\n00:45:52,624 --> 00:45:57,722\nthat's being sent back across that WAN\nlink back to the corporate office.\n\n774\n00:45:57,722 --> 00:46:01,627\nAll right, so let me show you\nguys one other thing in here,\n\n775\n00:46:01,627 --> 00:46:03,400\nwhat was I gonna show you?\n\n776\n00:46:03,400 --> 00:46:04,010\nOh.\n\n777\n00:46:04,010 --> 00:46:07,080\nOne of the things we're gonna need to be\nable to do is to make sure that those hash\n\n778\n00:46:07,080 --> 00:46:07,960\nvalues are published.\n\n779\n00:46:09,140 --> 00:46:11,810\nSo back at the corporate office,\nand again I'm not gonna go back\n\n780\n00:46:11,810 --> 00:46:15,700\nthrough setting up branch cache,\nI think we've done that a couple of times.\n\n781\n00:46:15,700 --> 00:46:20,910\nJust as a refresher, you've got the branch\ncache for network files roll service\n\n782\n00:46:20,910 --> 00:46:23,930\nthat gets installed on the file\nserver back at the corporate office.\n\n783\n00:46:23,930 --> 00:46:27,300\nYou've got the branch cache feature\nthat gets installed on the hosted\n\n784\n00:46:27,300 --> 00:46:30,260\ncache server out at the branch office.\n\n785\n00:46:30,260 --> 00:46:33,740\nIf you've got a website back at the\ncorporate office, then you're installing\n\n786\n00:46:33,740 --> 00:46:37,419\nthe branch cache feature on the web\nserver back at the corporate office.\n\n787\n00:46:39,720 --> 00:46:44,370\nAlso remember that if you're going to do\nit on a web server, you cannot select,\n\n788\n00:46:44,370 --> 00:46:46,850\nyou can't choose which website to cache.\n\n789\n00:46:46,850 --> 00:46:48,300\nYou cache all the websites.\n\n790\n00:46:48,300 --> 00:46:51,720\nSo if that web server back at\nthe corporate office was hosting multiple\n\n791\n00:46:51,720 --> 00:46:57,130\nwebsites, all of the websites on that web\nserver would end up being cached out there\n\n792\n00:46:57,130 --> 00:47:00,600\nat that server at the branch office.\n\n793\n00:47:00,600 --> 00:47:03,560\nSo in order for them to be able to\nverify that that is the current\n\n794\n00:47:03,560 --> 00:47:08,280\nversion of the file, they're gonna\nneed to retrieve that hash value.\n\n795\n00:47:10,070 --> 00:47:12,240\nAnd so\nlet's take a peek at where we can do that.\n\n796\n00:47:12,240 --> 00:47:14,850\nWe're gonna do that\nthrough our group policy.\n\n797\n00:47:14,850 --> 00:47:18,690\nSo let me open up active directory, or\nnot active directory, or group policy and\n\n798\n00:47:18,690 --> 00:47:20,860\nshow you where that is.\n\n799\n00:47:23,010 --> 00:47:28,020\nI'm just gonna modify,\nactually I'll use this guy down here.\n\n800\n00:47:28,020 --> 00:47:32,937\nIn our GPO,\nI'm gonna go down underneath Policies,\n\n801\n00:47:32,937 --> 00:47:40,300\nAdministrative templates,\nNetwork, and then LAN WAN server.\n\n802\n00:47:41,500 --> 00:47:42,462\nAll right?\nAnd in here,\n\n803\n00:47:42,462 --> 00:47:46,298\nI can see I've got these options\nhash publications for branch cache,\n\n804\n00:47:46,298 --> 00:47:48,516\nhash version support for branch cache.\n\n805\n00:47:48,516 --> 00:47:51,448\nBut really the only one I'm worried\nabout is this one right here,\n\n806\n00:47:51,448 --> 00:47:53,113\nhash publication for branch cache.\n\n807\n00:47:53,113 --> 00:47:58,620\nI'm gonna turn that on, I'm gonna come in\nhere and double click on it, all right?\n\n808\n00:47:58,620 --> 00:48:03,060\nAnd then I can choose to either enable it,\nor disable it, or leave it not configured.\n\n809\n00:48:03,060 --> 00:48:04,825\nTo turn it on, we're gonna choose enabled.\n\n810\n00:48:04,825 --> 00:48:08,525\nOnce I do that,\nmy options down here light up,\n\n811\n00:48:08,525 --> 00:48:10,945\nand I've got a couple of options of here.\n\n812\n00:48:10,945 --> 00:48:16,115\nAllow hash publications for all shared\nfolders, allow hash publications only for\n\n813\n00:48:16,115 --> 00:48:19,645\nshared folders on which\nthe branch cache is enabled or\n\n814\n00:48:19,645 --> 00:48:23,140\ndisallow hash publication\non all shared folders.\n\n815\n00:48:23,140 --> 00:48:27,570\nSo typically what I do in my designs,\nallow hash publication only for\n\n816\n00:48:27,570 --> 00:48:30,460\nshared folders on which\nbranch cache is enabled.\n\n817\n00:48:30,460 --> 00:48:33,820\nRemember when we talked about implementing\nbranch cache in the MCSA track?\n\n818\n00:48:34,870 --> 00:48:36,600\nOnce you've installed branch cache for\n\n819\n00:48:36,600 --> 00:48:39,930\nnetwork files on that file server\nback at the corporate office.\n\n820\n00:48:39,930 --> 00:48:43,030\nThat doesn't automatically enable\nbranch cache for all shares.\n\n821\n00:48:43,030 --> 00:48:45,600\nYou still have to go to\nthe individual shares and\n\n822\n00:48:45,600 --> 00:48:49,720\ndetermine which ones are allowed to be\ncached out there at that branch office.\n\n823\n00:48:49,720 --> 00:48:52,710\nI might have some information\nthat's too sensitive,\n\n824\n00:48:52,710 --> 00:48:56,180\nthat I don't want cached out\nthere at that branch server.\n\n825\n00:48:56,180 --> 00:49:00,110\nYou know,\nthe branch cache information is secure.\n\n826\n00:49:00,110 --> 00:49:01,830\nIt's encrypted.\n\n827\n00:49:01,830 --> 00:49:04,220\nAccess control list are still maintained.\n\n828\n00:49:04,220 --> 00:49:07,080\nIf you don't have access\nto the actual resource\n\n829\n00:49:07,080 --> 00:49:10,110\nyou don't get access to\nthe cached copy of that resource.\n\n830\n00:49:10,110 --> 00:49:19,090\nSo we're not too worried there but,\nwhere I was going with that.\n\n831\n00:49:19,090 --> 00:49:22,990\nOh, some of the shares I might not\nwant to allow to cash out there.\n\n832\n00:49:22,990 --> 00:49:26,790\nJust because it maybe governmental\nregulations or something like that.\n\n833\n00:49:26,790 --> 00:49:32,160\nThat says this information has to be\nmaintained on a highly secure server and\n\n834\n00:49:32,160 --> 00:49:36,570\nI can have that information cached,\neither distributed across client nodes.\n\n835\n00:49:36,570 --> 00:49:37,970\nThey got laptops out there.\n\n836\n00:49:37,970 --> 00:49:40,830\nThey could end up with some of that cache\ncontent, if we're doing distributive cache\n\n837\n00:49:40,830 --> 00:49:44,060\nmode, they could have some of that\ncontent cached on their laptop.\n\n838\n00:49:44,060 --> 00:49:45,290\nThey take that laptop home.\n\n839\n00:49:45,290 --> 00:49:46,300\nThe leave it in the cab.\n\n840\n00:49:46,300 --> 00:49:50,250\nSomebody steals it from Starbucks, or\nwhatever, and there's the potential for\n\n841\n00:49:50,250 --> 00:49:54,850\nsomeone to gain access\nto that sensitive data.\n\n842\n00:49:54,850 --> 00:49:56,630\nSo, we can typically pick and\n\n843\n00:49:56,630 --> 00:50:01,060\nchoose which shares we allow that\nbranch cache to be turned on.\n\n844\n00:50:03,690 --> 00:50:08,640\nAll right, and that, gosh, I thought we\nwere going to go for another segment.\n\n845\n00:50:08,640 --> 00:50:12,740\nBut I think we have pretty much covered\nall of our objectives for design and\n\n846\n00:50:12,740 --> 00:50:15,120\nimplementing an active\ndirectory infrastructure.\n\n847\n00:50:15,120 --> 00:50:18,890\nNow, we've gone through a lot of things\nhere over the last couple of episodes.\n\n848\n00:50:18,890 --> 00:50:23,080\nWe started with that logical\ndesign laying everything out,\n\n849\n00:50:23,080 --> 00:50:27,330\nhow we wanted things to\nfunction logically, and\n\n850\n00:50:27,330 --> 00:50:31,230\nthen we implemented our physical design\nwhere we took that logical design, and\n\n851\n00:50:31,230 --> 00:50:35,090\nstarted actually putting the pieces\nin place to support that design.\n\n852\n00:50:35,090 --> 00:50:39,300\nSo, a lot of things we've gotta think\nabout when we're doing this physically.\n\n853\n00:50:39,300 --> 00:50:41,720\nWe've talked about our sites.\n\n854\n00:50:41,720 --> 00:50:45,110\nThat's a big one because sites\nare allowing me to control.\n\n855\n00:50:46,290 --> 00:50:50,180\nReplication is a big part of sites.\n\n856\n00:50:50,180 --> 00:50:54,930\nIntrasites assumes fast reliable\nconnections and it occurs frequently,\n\n857\n00:50:54,930 --> 00:50:56,410\nchange notification.\n\n858\n00:50:56,410 --> 00:51:00,520\nIntersite replication occurs when I say.\n\n859\n00:51:00,520 --> 00:51:05,030\nWe can control how often and\nwhen it's allowed to occur.\n\n860\n00:51:05,030 --> 00:51:10,300\nWe talk about active directory conflicts\nand replication optimization and\n\n861\n00:51:10,300 --> 00:51:15,160\nwe led into domain controller\nplacements and RODCs and\n\n862\n00:51:15,160 --> 00:51:18,570\nglobal catalogs and\nthat partial attributes set and\n\n863\n00:51:18,570 --> 00:51:24,860\nthen we ended it up with some more RODCs\nand that branch cache, so a lot of things\n\n864\n00:51:24,860 --> 00:51:30,145\nto think about when we're designing the\nphysical layout of our active directory.\n\n865\n00:51:30,145 --> 00:51:33,147\n[SOUND] All right.\n\n866\n00:51:33,147 --> 00:51:36,590\nWell ladies and gentlemen,\nI hope you all enjoyed the show.\n\n867\n00:51:36,590 --> 00:51:41,570\nRemember, as always, during the show, if\nyou've got questions, you can ask, right?\n\n868\n00:51:41,570 --> 00:51:43,900\nYou're not stuck out there on\nan island all by yourself.\n\n869\n00:51:43,900 --> 00:51:48,840\nWe've got that chatroom that, it sits\nright down below our live video stream.\n\n870\n00:51:48,840 --> 00:51:49,570\nDuring the show,\n\n871\n00:51:49,570 --> 00:51:52,730\nif you've got a question you want one\nof the hosts to ask, punch it in there.\n\n872\n00:51:52,730 --> 00:51:54,790\nLove to hear from you\nguys during the show.\n\n873\n00:51:54,790 --> 00:51:58,500\nIf you're watching this recorded\nafter the fact, you're not stuck.\n\n874\n00:51:58,500 --> 00:52:01,570\nUp at the top of every page is a Q&A link.\n\n875\n00:52:01,570 --> 00:52:04,030\nYou can click on that,\nit'll take you over to our forums.\n\n876\n00:52:04,030 --> 00:52:08,030\nYou can post your questions there, and\nall the hosts here monitor that and\n\n877\n00:52:08,030 --> 00:52:09,610\nwill answer your questions.\n\n878\n00:52:09,610 --> 00:52:11,630\nWe want to make sure that\nyou guys are successful.\n\n879\n00:52:11,630 --> 00:52:15,280\nThat you have the information you need\nto go out and get those certifications.\n\n880\n00:52:16,800 --> 00:52:22,632\nAll right, so signing of for ITproTV I'm\nMike Rodrick and I will see you next time.\n\n881\n00:52:22,632 --> 00:52:32,632\n[MUSIC]\n\n",
          "vimeoId": "108116129"
        }
      ],
      "title": "Design and implement an Active Directory infrastructure (physical)"
    }
  ],
  "url": "mcse-windows-server-2012",
  "vLab": false
}
