{
  "description": "The Implementing an Advanced Server Infrastructure exam is the second of two exams required to obtain the Microsoft Certified Solutions Expert (MCSE) certification and shows one knows how to manage and maintain a server infrastructure and implement a data center according to Microsoftâ€™s best practices. This exam moves into significantly more complex topics and configurations than those covered in the previous examinations. The topics covered range from high availability to identity and access solutions. The typical viewer would be anyone operating as a senior systems administrator in a large or enterprise level business and also focuses on.",
  "descriptionMD": "",
  "length": "98108",
  "name": "MCSE Windows Server 2012 - 70-414",
  "practiceExam": true,
  "subtitle": "Implementing an Advanced Server Infrastructure",
  "tagUrl": "microsoft-technical",
  "topics": [
    {
      "episodes": [
        {
          "description": "The Implementing an Advanced Server Infrastructure exam is the second of two exams required to obtain the Microsoft Certified Solutions Expert (MCSE) certification. This exam moves into significantly more complex topics and configurations than those covered in the previous examinations. The topics covered range from high availability to identity and access solutions. The typical viewer would be anyone operating as a senior systems administrator in a large or enterprise level business.",
          "length": "1053",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-0-0-overview-102714.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-0-0-overview-102714-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-0-0-overview-102714-sm.jpg",
          "title": "Overview of MCSE Windows Server 2012 (70-414)",
          "transcript": "1\n00:00:00,006 --> 00:00:06,105\n[SOUND] The 70-414 exam\nis the final step for\n\n2\n00:00:06,105 --> 00:00:12,056\ncandidates that are looking\nto achieve the MCSE\n\n3\n00:00:12,056 --> 00:00:17,275\nserver infrastructure certification.\n\n4\n00:00:17,275 --> 00:00:18,885\nIt's a long road.\n\n5\n00:00:18,885 --> 00:00:20,320\n>> Mm-hm.\n>> There's a lot of stuff that you gotta\n\n6\n00:00:20,320 --> 00:00:21,540\nlearn along the way.\n\n7\n00:00:21,540 --> 00:00:22,900\nAnd this is kinda the end.\n\n8\n00:00:22,900 --> 00:00:26,220\nSo let's take a minute and\njust look at what this entails, and\n\n9\n00:00:26,220 --> 00:00:27,530\nlet's start really high level.\n\n10\n00:00:27,530 --> 00:00:29,100\nBy the time you've gotten to this point,\n\n11\n00:00:29,100 --> 00:00:33,250\nyou more than likely know what\nthe MCSE server infrastructure is.\n\n12\n00:00:33,250 --> 00:00:36,050\nBut let's just take a glance at it\nreal quick, do a quick overview, and\n\n13\n00:00:36,050 --> 00:00:39,800\nthen we'll dive into exactly what\nthis exam and certification entail.\n\n14\n00:00:39,800 --> 00:00:41,002\n>> Cool.\n\n15\n00:00:41,002 --> 00:00:45,930\nAll right now the MCSE server\ninfrastructure it actually starts out\n\n16\n00:00:45,930 --> 00:00:48,220\nas the MCSA server infrastructure.\n\n17\n00:00:48,220 --> 00:00:52,551\nSo, by the time you're at this point, you\nshould have already completed the 7410,\n\n18\n00:00:52,551 --> 00:00:56,830\n411 and 412 examinations,\nonce you've achieved those,\n\n19\n00:00:56,830 --> 00:01:00,430\nyou get the MCSA Server\nAdministrator Certification.\n\n20\n00:01:00,430 --> 00:01:03,860\nIt's the Microsoft Certified\nSolutions Associate.\n\n21\n00:01:03,860 --> 00:01:05,777\nThat's MCSA.\n>> I love the way that they changed\n\n22\n00:01:05,777 --> 00:01:07,700\nthe name, and left the acronym the same.\n\n23\n00:01:07,700 --> 00:01:09,794\nIt's a really good for all of us,] right?\n\n24\n00:01:09,794 --> 00:01:12,391\n>> It's a lot better than the way\nit used to be, you know, for\n\n25\n00:01:12,391 --> 00:01:16,190\na little while it became the MCTS, and\nthe MCITP, and everyone hated that.\n\n26\n00:01:16,190 --> 00:01:19,660\nSo at least it's back to the original\nacronyms that people like.\n\n27\n00:01:19,660 --> 00:01:23,735\nYou should already have your MCSA\nbefore moving into the MCSE.\n\n28\n00:01:23,735 --> 00:01:24,270\n>> Mm-hm.\n\n29\n00:01:24,270 --> 00:01:25,540\n>> Right?\nIt kinda goes without saying.\n\n30\n00:01:25,540 --> 00:01:28,040\n>> Yep.\n>> And the main reason is the MCSA\n\n31\n00:01:28,040 --> 00:01:31,360\nreally focuses on the how to do things.\n\n32\n00:01:31,360 --> 00:01:32,920\nHow to implement active directory.\n\n33\n00:01:32,920 --> 00:01:34,610\nHow to install DNS.\n\n34\n00:01:34,610 --> 00:01:37,490\nHow to set up file replication services.\n\n35\n00:01:37,490 --> 00:01:39,358\nHow to do all these different things.\n\n36\n00:01:39,358 --> 00:01:40,530\n>> Mm-hm.\n>> All right.\n\n37\n00:01:40,530 --> 00:01:42,390\nBut you don't get the why side of it.\n\n38\n00:01:42,390 --> 00:01:42,940\nRight?\nAnd\n\n39\n00:01:42,940 --> 00:01:45,850\nthat's because somebody at the MCSA\nlevel is not doing designs,\n\n40\n00:01:45,850 --> 00:01:47,550\nthey're doing implementation.\n\n41\n00:01:47,550 --> 00:01:48,790\n>> Right.\n>> They're the grunt-workers,\n\n42\n00:01:48,790 --> 00:01:51,480\nthe people in the field\nactually making things happen,\n\n43\n00:01:51,480 --> 00:01:52,860\nwhich is really important work.\n\n44\n00:01:52,860 --> 00:01:53,680\n>> Right.\n>> Don't let me\n\n45\n00:01:53,680 --> 00:01:55,520\nsound like that's not important.\n\n46\n00:01:55,520 --> 00:01:58,720\nWhat they do is extremely important, but\n\n47\n00:01:58,720 --> 00:02:02,650\nsomebody has to be behind the scenes\ngoverning our overall design.\n\n48\n00:02:02,650 --> 00:02:03,960\n>> Right.\n\n49\n00:02:03,960 --> 00:02:06,100\nAnd that's when the MCSE comes in.\n\n50\n00:02:06,100 --> 00:02:11,210\nWhoever has that role,\nthe Microsoft Certified Solutions Expert,\n\n51\n00:02:11,210 --> 00:02:15,160\nthey're the person that's coming up with\nthe overall, the big picture, all right?\n\n52\n00:02:15,160 --> 00:02:17,380\nNot necessarily going into the field and\ndoing the work.\n\n53\n00:02:17,380 --> 00:02:20,530\nNow, you need to already have that\nexperience because how do you a design if\n\n54\n00:02:20,530 --> 00:02:22,760\nyou don't know how something works.\n\n55\n00:02:22,760 --> 00:02:24,530\nBut they need to understand the why.\n\n56\n00:02:25,630 --> 00:02:30,200\nAnd at this point, you also should\nhave completed the 7413 exam,\n\n57\n00:02:30,200 --> 00:02:34,730\nwhich was the first one that really\ndived straight into designing and\n\n58\n00:02:34,730 --> 00:02:36,910\nimplementing a server infrastructure.\n\n59\n00:02:36,910 --> 00:02:41,510\nWe rehash all of the things in 410,\n411, and 412.\n\n60\n00:02:41,510 --> 00:02:46,360\nRight here on 413 we're looking at the why\nyou do these things why you might need\n\n61\n00:02:46,360 --> 00:02:49,730\nfive servers as opposed to four servers\nwhere you would put those servers in\n\n62\n00:02:49,730 --> 00:02:50,340\nthe global design.\n\n63\n00:02:52,340 --> 00:02:56,890\nThat leads us to the last one which is\n7414 the show that we're getting prepared\n\n64\n00:02:56,890 --> 00:03:00,800\nfor right here with\nthis one we dive not so\n\n65\n00:03:00,800 --> 00:03:06,410\nmuch into the why of our server\ninfrastructure but how we manage and\n\n66\n00:03:06,410 --> 00:03:10,140\nmaintain that server infrastructure,\nhow you keep your data center operational?\n\n67\n00:03:10,140 --> 00:03:12,970\nAnd it really does build\naround the data center.\n\n68\n00:03:12,970 --> 00:03:14,870\nWe kind of put workstations\nout of our mind.\n\n69\n00:03:14,870 --> 00:03:17,270\nAny workstation stuff on this one?\n\n70\n00:03:17,270 --> 00:03:18,290\n>> I don't think so at all.\n\n71\n00:03:18,290 --> 00:03:21,430\nReally in your SAs,\nyou're learning how to monitor and\n\n72\n00:03:21,430 --> 00:03:23,880\nmanage your individual\nservers you're setting up.\n\n73\n00:03:23,880 --> 00:03:27,110\nYou're the DHCP admin or that DNS admin.\n\n74\n00:03:27,110 --> 00:03:30,870\nNow you're talking about monitoring your\nwhole solution, and your data center, and\n\n75\n00:03:30,870 --> 00:03:34,100\nyour virtual machine infrastructure and\nall of that.\n\n76\n00:03:34,100 --> 00:03:37,350\n>> So whenever it comes to monitoring\nthese days the Microsoft monitoring\n\n77\n00:03:37,350 --> 00:03:40,270\nmanaging, they have their\nsystem center suite.\n\n78\n00:03:40,270 --> 00:03:42,980\nAnd so what we're gonna do is\nlook at if you're running your\n\n79\n00:03:42,980 --> 00:03:45,560\nown data center even if its\ncloud data center right.\n\n80\n00:03:45,560 --> 00:03:47,830\nYou tied a Windows Azure or whatever.\n\n81\n00:03:47,830 --> 00:03:50,290\nYou need to monitor and\nmanage those systems and\n\n82\n00:03:50,290 --> 00:03:53,660\nthere are a number of system center\nsolutions that deal with that.\n\n83\n00:03:53,660 --> 00:03:55,210\nAnd that's what we're\ngonna take a look at.\n\n84\n00:03:55,210 --> 00:03:58,880\nThe general best practices for\nhow you should be running your environment\n\n85\n00:03:58,880 --> 00:04:02,440\nas well as the tools from\nMicrosoft that you can use.\n\n86\n00:04:02,440 --> 00:04:04,230\nRight?\nYou don't have to in real life.\n\n87\n00:04:04,230 --> 00:04:05,230\nYou can use whatever you want.\n\n88\n00:04:05,230 --> 00:04:08,740\nBut if you wanna pass this exam you\nneed to know the system center stuff.\n\n89\n00:04:08,740 --> 00:04:12,380\nSo we're kinda shifting and\nthat's why this one was designing and\n\n90\n00:04:12,380 --> 00:04:14,280\nthis one is just implementing.\n\n91\n00:04:14,280 --> 00:04:15,750\nRight?\nImplementing in advanced server\n\n92\n00:04:15,750 --> 00:04:19,541\ninfrastructure because we're gonna see,\nwe are going to see a lot of design,\n\n93\n00:04:19,541 --> 00:04:21,440\nwe'll get to that with\nthe exam objectives.\n\n94\n00:04:21,440 --> 00:04:25,500\nIt is focused more on what\nyou need to put in place to\n\n95\n00:04:25,500 --> 00:04:30,460\nkeep your data center running nice and\nsmooth and keep an eye on it.\n\n96\n00:04:30,460 --> 00:04:34,730\nWhen you've completed that fifth exam,\nyou'll be awarded the MCSE,\n\n97\n00:04:34,730 --> 00:04:37,090\nthe Microsoft Certified Solutions Expert.\n\n98\n00:04:37,090 --> 00:04:42,790\nAnd that will designate that you are an\nexpert, that you know how to implement\n\n99\n00:04:42,790 --> 00:04:45,700\na data center according to\nMicrosoft's best practices, right,\n\n100\n00:04:45,700 --> 00:04:46,790\na server infrastructure.\n\n101\n00:04:46,790 --> 00:04:50,780\nAll right, so\nlet's take a look at the exam itself.\n\n102\n00:04:50,780 --> 00:04:53,340\nAll right.\nIf I jump over here to the 7414\n\n103\n00:04:53,340 --> 00:04:54,250\nexam, it's $150.\n\n104\n00:04:54,250 --> 00:04:55,060\nRight?\n\n105\n00:04:55,060 --> 00:04:57,720\nMicrosoft exams are really reasonably\n\n106\n00:04:57,720 --> 00:05:00,340\npriced compared to other\nvendors these days.\n\n107\n00:05:00,340 --> 00:05:02,380\nAlthough you do have to\ntake a lot of the exams.\n\n108\n00:05:02,380 --> 00:05:04,880\n>> And then again every three years or\nsomething.\n\n109\n00:05:04,880 --> 00:05:06,170\nSo they get their money.\n\n110\n00:05:06,170 --> 00:05:08,919\n>> Yep.\nSo we do have a new exam, 70-414.\n\n111\n00:05:08,919 --> 00:05:10,170\nIt's $150.00 to take it.\n\n112\n00:05:10,170 --> 00:05:14,090\nYou can take it at any\nPearson View Center.\n\n113\n00:05:15,590 --> 00:05:19,970\nRight today, while we're taping this,\nyou can still take the exam at Sylvan for\n\n114\n00:05:19,970 --> 00:05:21,010\nMetrics Centers also.\n\n115\n00:05:22,010 --> 00:05:26,790\nThat ends, I think they make a note of\nthat right here, yeah, January 1st, 2015.\n\n116\n00:05:26,790 --> 00:05:30,350\nSo, if you're watching this\nJanuary 1st 2015 or later,\n\n117\n00:05:30,350 --> 00:05:32,750\nwhich is only, two months away.\n\n118\n00:05:32,750 --> 00:05:36,230\nThen, after that point, you won't be able\nto take it at Prometric anymore, right?\n\n119\n00:05:36,230 --> 00:05:39,260\nSo you'll need to take it at view, and\n\n120\n00:05:39,260 --> 00:05:42,341\nI would just plan on taking\nit at view right now.\n\n121\n00:05:42,341 --> 00:05:43,930\n>> Yea, and\nyou look at there where it says,\n\n122\n00:05:43,930 --> 00:05:47,700\nI think with Prometric it takes five\nto seven business days I think.\n\n123\n00:05:47,700 --> 00:05:48,610\nSo they're just not.\n\n124\n00:05:49,690 --> 00:05:53,000\nVery quick with that stuff or Pearson VUE\nyou can find out that day or the next day,\n\n125\n00:05:54,040 --> 00:05:58,480\nand get your transcript updated,\nthings like that.\n\n126\n00:05:58,480 --> 00:06:02,120\n>> You'll always find your pass or fail\nscore right at the end of the exam, so\n\n127\n00:06:02,120 --> 00:06:02,990\nthey do that.\n\n128\n00:06:02,990 --> 00:06:04,090\nWhat Mike's talking about is they\n\n129\n00:06:04,090 --> 00:06:05,970\nhave to get that information\nback to Microsoft, right.\n\n130\n00:06:05,970 --> 00:06:09,022\nAnd yeah,\nthat's what's pretty bad about that.\n\n131\n00:06:09,022 --> 00:06:11,450\nAll right, so\nthat's why we see both of them here, but\n\n132\n00:06:11,450 --> 00:06:15,010\nif I were you I would just plan on view\nand not worry about the record so much.\n\n133\n00:06:15,010 --> 00:06:17,720\nAll right, so that's the exam cost.\n\n134\n00:06:17,720 --> 00:06:21,840\nThey give you some basic information but\nthey aren't really detailed about things\n\n135\n00:06:21,840 --> 00:06:27,270\nlike how many questions you have and\nwhat's the passing score, and so on.\n\n136\n00:06:27,270 --> 00:06:30,900\nThat's because Microsoft does\nthese performance based exams, and\n\n137\n00:06:30,900 --> 00:06:34,587\nthat means you could have several\ndifferent amounts of questions.\n\n138\n00:06:34,587 --> 00:06:37,560\nSo, Mike, you and I could go and\ntake this exam right now and\n\n139\n00:06:37,560 --> 00:06:39,820\nI might have 50 more questions than you.\n\n140\n00:06:39,820 --> 00:06:42,200\nThat doesn't mean that\nMike got an easier exam,\n\n141\n00:06:42,200 --> 00:06:46,980\njust means maybe you got\nmore simulations that I did.\n\n142\n00:06:46,980 --> 00:06:48,210\n>> Right.\nAn old, drag and drop,\n\n143\n00:06:48,210 --> 00:06:50,760\nput them in place type questions,\nthings like that.\n\n144\n00:06:50,760 --> 00:06:53,860\n>> And they do full, it's not flash based.\n\n145\n00:06:53,860 --> 00:06:56,010\nI forget what they built it on.\n\n146\n00:06:56,010 --> 00:06:56,950\nProbably silverlight.\n\n147\n00:06:56,950 --> 00:07:01,535\nThey do these imbedded plug ins that\nactually give you a fake Windows UI so\n\n148\n00:07:01,535 --> 00:07:03,585\nyou can go through and\nconfigure some things.\n\n149\n00:07:03,585 --> 00:07:05,235\nThey're awkward and I\n>> They are.\n\n150\n00:07:05,235 --> 00:07:06,004\n>> But they're in there.\n\n151\n00:07:06,004 --> 00:07:07,975\n>> [LAUGH]\n>> It's supposed to show that you actually\n\n152\n00:07:07,975 --> 00:07:09,185\nhave that experience.\n\n153\n00:07:09,185 --> 00:07:12,810\nOn a design exam, though,\none like this you're gonna have a lot more\n\n154\n00:07:12,810 --> 00:07:17,020\nword problems, a lot of where\nthey describe an environment and\n\n155\n00:07:17,020 --> 00:07:19,080\nyou make recommended changes\nbased on your knowledge.\n\n156\n00:07:19,080 --> 00:07:20,950\n>> Yeah, bring your reading\nglasses if you need them.\n\n157\n00:07:20,950 --> 00:07:23,720\nIt's like reading an essay in there and\nthen going back and\n\n158\n00:07:23,720 --> 00:07:26,115\nanswering ten questions on\nthis essay they've given you.\n\n159\n00:07:26,115 --> 00:07:27,650\nMm-hm.\n\n160\n00:07:27,650 --> 00:07:31,770\nAll right, so some of the other things we\nneed to know, the exam objectives, right?\n\n161\n00:07:31,770 --> 00:07:35,720\nThis one covers what doesn't look\nlike all that much in the beginning.\n\n162\n00:07:35,720 --> 00:07:38,790\nReally just four objectives,\nnice and small.\n\n163\n00:07:38,790 --> 00:07:41,370\nWe've got manage and\nmaintain a server infrastructure.\n\n164\n00:07:41,370 --> 00:07:44,870\nAnd notice how each of these\nare listed as 25 to 30%.\n\n165\n00:07:44,870 --> 00:07:46,310\nExcept the last one's 20 to 25%.\n\n166\n00:07:46,310 --> 00:07:51,270\nSo the exam's pretty evenly\ndivided across these four.\n\n167\n00:07:51,270 --> 00:07:53,660\nAnd the first one is just straight\nup server infrastructure.\n\n168\n00:07:53,660 --> 00:07:57,160\nSo we're talking about, you've got\na data center, you've got servers,\n\n169\n00:07:57,160 --> 00:07:59,610\nyou've got physical servers and\nvirtual servers.\n\n170\n00:07:59,610 --> 00:08:02,440\nWe need to maintain that infrastructure.\n\n171\n00:08:02,440 --> 00:08:06,700\nAnd if we break that out you'll see they\nbreak it down into quite a few things,\n\n172\n00:08:06,700 --> 00:08:08,170\nstarting with an administrative model.\n\n173\n00:08:08,170 --> 00:08:12,070\nRight?\nAdministrative models are how we\n\n174\n00:08:12,070 --> 00:08:12,990\nimplement management.\n\n175\n00:08:12,990 --> 00:08:15,110\nIs it just one person,\nis it multiple people,\n\n176\n00:08:15,110 --> 00:08:16,720\ndo people have different levels of access?\n\n177\n00:08:16,720 --> 00:08:19,519\nThose are all different things we think\nabout in our administrative model.\n\n178\n00:08:21,410 --> 00:08:23,280\nThen we've got our\nmonitoring strategy right?\n\n179\n00:08:23,280 --> 00:08:24,348\nHow are we going to monitor this.\n\n180\n00:08:24,348 --> 00:08:27,500\nIf a server fails, if an issue happens,\nhow do we get information?\n\n181\n00:08:27,500 --> 00:08:30,460\nIf we're troubleshooting what historical\ndata do we have to collect to be able\n\n182\n00:08:30,460 --> 00:08:33,150\nto look at and what tools and\nresources are available to us?\n\n183\n00:08:33,150 --> 00:08:35,760\nAnd that's when we start introducing\nthe viewers into System Center 2012.\n\n184\n00:08:35,760 --> 00:08:38,720\nAnd we're going to be doing\nSystem Center 2012 R2,\n\n185\n00:08:38,720 --> 00:08:42,380\nbecause that's what's on\nthe new version of the exam.\n\n186\n00:08:42,380 --> 00:08:45,070\nSo we'll be using that\nthroughout the whole show,\n\n187\n00:08:45,070 --> 00:08:49,630\nbut in real life, most of what's\nin 2012 is the same in 2012 R2.\n\n188\n00:08:49,630 --> 00:08:53,220\nBut there will be a few additional\nfeatures we cover that are new in R2.\n\n189\n00:08:53,220 --> 00:08:55,800\nAnd then we got plan and\n\n190\n00:08:55,800 --> 00:09:00,770\nimplement automated remediation, so when\nsomething goes wrong, how can we fix it?\n\n191\n00:09:00,770 --> 00:09:02,330\nRight?\nWhat's our backup plan?\n\n192\n00:09:02,330 --> 00:09:04,260\nAnd can we automate that, right?\n\n193\n00:09:04,260 --> 00:09:06,170\nCan we automate taking\ncare of the problems, and\n\n194\n00:09:06,170 --> 00:09:08,160\ngetting things back up and running?\n\n195\n00:09:08,160 --> 00:09:12,920\nSo it's a pretty heavy topic for\njust being one part of the exam.\n\n196\n00:09:14,600 --> 00:09:16,030\nAfter that we break into plan and\n\n197\n00:09:16,030 --> 00:09:18,810\nimplement a highly available\nenterprise infrastructure.\n\n198\n00:09:20,000 --> 00:09:22,620\nA better way to deal with failures is to\n>> [LAUGH]\n\n199\n00:09:22,620 --> 00:09:24,040\n>> Avoid them in the first place.\n\n200\n00:09:24,040 --> 00:09:24,730\n>> Exactly.\n>> Right,\n\n201\n00:09:24,730 --> 00:09:28,490\nso what kind of infrastructure can we put\nin place to make it where failures don't\n\n202\n00:09:28,490 --> 00:09:29,750\naffect our services.\n\n203\n00:09:29,750 --> 00:09:33,770\nSo we'll talk about clustering,\nnetwork services, network load balancing,\n\n204\n00:09:33,770 --> 00:09:34,810\nand other things.\n\n205\n00:09:34,810 --> 00:09:37,600\nAnd then we'll talk about storage,\nwhich is a big deal.\n\n206\n00:09:37,600 --> 00:09:40,758\nA lot of people don't properly plan for\nstorage failures.\n\n207\n00:09:40,758 --> 00:09:45,225\nThen we'll take a look at other roles\nthat we might need to make redundant.\n\n208\n00:09:45,225 --> 00:09:48,154\nAnd, by roles,\nI mean things like DHCP, DNS,\n\n209\n00:09:48,154 --> 00:09:51,189\nthey mention [CROSSTALK]\n>> Basic infrastructure that really keeps\n\n210\n00:09:51,189 --> 00:09:52,270\neverything else running.\n\n211\n00:09:52,270 --> 00:09:55,160\n>> Mm-hm.\nAnd then lastly we've got\n\n212\n00:09:55,160 --> 00:09:59,370\na business continuity and\ndisaster recovery solution, all right?\n\n213\n00:09:59,370 --> 00:10:02,780\nAnd I know it kind of sounds the same,\nbut business continuity,\n\n214\n00:10:02,780 --> 00:10:07,720\nthat means making sure that we can keep\nworking, even when there's a failure.\n\n215\n00:10:07,720 --> 00:10:11,100\nDuring the failure we might not be at\nfull capacity, but we're still working.\n\n216\n00:10:11,100 --> 00:10:11,720\nRight.\n>> Huh.\n\n217\n00:10:11,720 --> 00:10:15,210\n>> Disaster recovery's getting\nus back to peak performance.\n\n218\n00:10:15,210 --> 00:10:15,870\n>> Right.\n\n219\n00:10:15,870 --> 00:10:20,000\n>> So, you know, if on a good day you're\nat 100% and then a failure happens,\n\n220\n00:10:20,000 --> 00:10:21,260\ninstead of dropping to 0%,\n>> Right\n\n221\n00:10:21,260 --> 00:10:23,660\n>> Then you drop to 50% or something.\n\n222\n00:10:23,660 --> 00:10:25,530\n>> Huh.\n>> So you're running at half capacity.\n\n223\n00:10:25,530 --> 00:10:27,630\nAnd then after you fix the problem\nyou come back up to a 100,\n\n224\n00:10:27,630 --> 00:10:31,410\nso staying at that 50%,\nthat's business continuity.\n\n225\n00:10:31,410 --> 00:10:34,420\nYou're continuing to do\nbusiness during the failure,\n\n226\n00:10:34,420 --> 00:10:38,010\nand after we get back up to 100%,\nthat's disaster recovery, we're recovered.\n\n227\n00:10:39,940 --> 00:10:43,410\nThat's one of those sections right\nthere that in, real life land.\n\n228\n00:10:43,410 --> 00:10:45,830\nIt's not a skill you use every day but\n\n229\n00:10:45,830 --> 00:10:47,640\non the day you do use it\n>> [LAUGH]\n\n230\n00:10:47,640 --> 00:10:49,000\n>> You are glad you have it.\n\n231\n00:10:49,000 --> 00:10:49,680\n>> Absolutely.\n\n232\n00:10:49,680 --> 00:10:51,365\n>> I have been there.\n\n233\n00:10:51,365 --> 00:10:56,200\n>> [LAUGH]\n>> All right now, I know on most of these\n\n234\n00:10:56,200 --> 00:11:01,365\nthey say 25 to 30%, but this next one,\nit's pretty much guaranteed to be 30%.\n\n235\n00:11:01,365 --> 00:11:05,415\nThe virtualization push\nis huge at Microsoft.\n\n236\n00:11:05,415 --> 00:11:08,465\nAnd I'm not just talking about HyperV,\nbut Windows Azure also,\n\n237\n00:11:08,465 --> 00:11:11,970\nwhich is built on HyperV, so\nI guess it's kind of the same, but,\n\n238\n00:11:11,970 --> 00:11:17,160\nthey pretty much expect every environment\nto use virtualization tools now.\n\n239\n00:11:17,160 --> 00:11:19,720\nSo we've got a big section on it, and\n\n240\n00:11:19,720 --> 00:11:23,300\nthis'll actually make up a decent part\nof our show because it is so important.\n\n241\n00:11:24,510 --> 00:11:27,290\nBut you'll see in here we've got\na plan for our virtualization host.\n\n242\n00:11:27,290 --> 00:11:28,770\nThat's the physical machines.\n\n243\n00:11:28,770 --> 00:11:30,190\nWe got a plan for our virtual machines.\n\n244\n00:11:30,190 --> 00:11:32,920\nThe VM's.\nWe'll take a look at networking and\n\n245\n00:11:32,920 --> 00:11:37,380\nstorage under virtualization and\ndesign considerations and plans.\n\n246\n00:11:37,380 --> 00:11:40,030\nNotice how a lot of these say plan and\nimplement.\n\n247\n00:11:40,030 --> 00:11:43,130\nThe plan side,\nwe've gotta come up with our design.\n\n248\n00:11:43,130 --> 00:11:43,880\nWe gotta plan and\n\n249\n00:11:43,880 --> 00:11:47,440\nfigure out exactly what we need to provide\nour network the resources it needs.\n\n250\n00:11:47,440 --> 00:11:50,740\nBut the implement side,\nwe've usually already learned.\n\n251\n00:11:50,740 --> 00:11:54,100\nOn the implement side, we've already\nlearned how to implement HyperV.\n\n252\n00:11:54,100 --> 00:11:55,460\nWe already know how to bring up VMs.\n\n253\n00:11:55,460 --> 00:11:56,910\nThat's not new.\n\n254\n00:11:56,910 --> 00:12:00,490\nSo what we're adding on are some\nof the System Center Utilities.\n\n255\n00:12:00,490 --> 00:12:03,100\nThings like\nthe System Center Virtual Machine Manager.\n\n256\n00:12:03,100 --> 00:12:04,100\nSCVMM.\n\n257\n00:12:04,100 --> 00:12:05,810\nAnd so we'll see some additional things.\n\n258\n00:12:05,810 --> 00:12:07,660\nYeah, right here.\nVirtual Machine Manager.\n\n259\n00:12:07,660 --> 00:12:11,100\nSo we'll see bringing system center\ninto the mix to implement these.\n\n260\n00:12:11,100 --> 00:12:14,450\nWhereas before we might have\ndone it directly in HyperV.\n\n261\n00:12:14,450 --> 00:12:15,350\nAnd that's essential.\n\n262\n00:12:15,350 --> 00:12:16,950\nThe larger your data center gets,\n\n263\n00:12:16,950 --> 00:12:20,610\nthe less practical it is to manage\nthings on an individual server basis.\n\n264\n00:12:22,690 --> 00:12:26,750\nAnd our last section is design and\nimplement identity and access solutions.\n\n265\n00:12:26,750 --> 00:12:27,770\n>> Mm.\n>> Mike, this is your favorite section.\n\n266\n00:12:27,770 --> 00:12:28,990\n>> Oh yeah, we love this stuff.\n\n267\n00:12:28,990 --> 00:12:30,080\nCertificate services.\n\n268\n00:12:30,080 --> 00:12:30,780\nLove those.\n\n269\n00:12:30,780 --> 00:12:32,500\nWe get to dive into that.\n\n270\n00:12:32,500 --> 00:12:33,700\nSetting up the whole hierarchy.\n\n271\n00:12:33,700 --> 00:12:37,700\nIt's not just setting up a certificate\nserver, but planning for that the root and\n\n272\n00:12:37,700 --> 00:12:40,950\nthen your subordinates and\ndeciding how you want to play that out.\n\n273\n00:12:40,950 --> 00:12:43,570\nAre you doing different subordinates for\ndifferent locations or\n\n274\n00:12:43,570 --> 00:12:45,790\ndifferent purposes and things like that?\n\n275\n00:12:45,790 --> 00:12:49,450\nAnd I think we'll end up tying into\nmanaging the certificates themselves and\n\n276\n00:12:49,450 --> 00:12:52,740\nthen extending our authentication\nbeyond our boundaries.\n\n277\n00:12:52,740 --> 00:12:55,260\nTaking it out into the cloud or\nwith extranets.\n\n278\n00:12:55,260 --> 00:12:59,030\nOur business partners doing,\nour federation identity solution.\n\n279\n00:12:59,030 --> 00:13:01,590\nWe'll take a peak at how\nwe set that up either\n\n280\n00:13:01,590 --> 00:13:03,170\nwith a business partner or Microsoft.\n\n281\n00:13:03,170 --> 00:13:07,060\nMicrosoft provides that federation\nservices that we can tie into there.\n\n282\n00:13:07,060 --> 00:13:10,930\nThen getting into RMS and\neverybody uses RMS right Don?\n\n283\n00:13:10,930 --> 00:13:12,150\nOh yeah.\nAbsolutely.\n\n284\n00:13:12,150 --> 00:13:13,545\nIt's widely deployed.\n\n285\n00:13:13,545 --> 00:13:15,880\n[LAUGH]\n>> We make fun of it.\n\n286\n00:13:15,880 --> 00:13:20,800\nThe right's management service, it's\n>> It is good because we've talked\n\n287\n00:13:20,800 --> 00:13:23,720\na little bit about it before, but\nit does give you the ability to take those\n\n288\n00:13:23,720 --> 00:13:28,510\npermissions and tie them to the document\nitself, not to the file system.\n\n289\n00:13:28,510 --> 00:13:33,330\nSo we can extend our control over those\nresources beyond our boundaries and\n\n290\n00:13:33,330 --> 00:13:34,920\nbeyond our file systems.\n\n291\n00:13:34,920 --> 00:13:36,870\n>> It does have a good place in it.\n\n292\n00:13:36,870 --> 00:13:38,990\n>> Yeah.\nIf you're an all Microsoft shop,\n\n293\n00:13:38,990 --> 00:13:42,940\nRMS is a great way to do\ndigital rights management, DRM.\n\n294\n00:13:42,940 --> 00:13:44,130\nRight?\n\n295\n00:13:44,130 --> 00:13:47,850\nBut if you've got users that are external\nto your organization there's a good bit of\n\n296\n00:13:47,850 --> 00:13:49,360\nplanning that has to go into that.\n\n297\n00:13:49,360 --> 00:13:52,770\nAnd if you're not a Microsoft shop,\nif you have a mixture of platforms,\n\n298\n00:13:52,770 --> 00:13:54,340\nthere's a lot of planning\nthat has to go in there.\n\n299\n00:13:54,340 --> 00:13:58,640\nSo So we kinda tackled that, but this last\nsection here, they do downplay a bit,\n\n300\n00:13:58,640 --> 00:14:02,470\nsee how they say 20%- 25%, so a smaller\nportion of the exam comes from there, but\n\n301\n00:14:02,470 --> 00:14:06,350\nit is important, it's good information\nto know, especially if you're gonna be\n\n302\n00:14:06,350 --> 00:14:10,810\nextending your data center into the cloud,\ninto Windows Azure or\n\n303\n00:14:10,810 --> 00:14:14,320\nwhatever, you'll want to be able\nto link credentials between those.\n\n304\n00:14:14,320 --> 00:14:17,890\nAnd that's the type of stuff\nthat we'll tackle down there.\n\n305\n00:14:17,890 --> 00:14:22,500\nSo those are the overall objectives that's\ngonna be covered in this certification.\n\n306\n00:14:22,500 --> 00:14:25,340\nEven if you're not seeking\nthe certification a lot of this is good\n\n307\n00:14:25,340 --> 00:14:26,840\nknowledge to have.\n\n308\n00:14:26,840 --> 00:14:27,520\nBut I will say this.\n\n309\n00:14:27,520 --> 00:14:30,880\nIf you're just getting\nstarted in IT the MCSE is\n\n310\n00:14:30,880 --> 00:14:33,070\nnot the certification\nyou should be seeking.\n\n311\n00:14:33,070 --> 00:14:37,450\nThe MCSE is designed for\npeople who have been in the field for\n\n312\n00:14:37,450 --> 00:14:39,150\nmany years at this point.\n\n313\n00:14:39,150 --> 00:14:41,200\nThat have already implemented\nthe technologies,\n\n314\n00:14:41,200 --> 00:14:43,730\nthey already understand the how's and\nso on, and\n\n315\n00:14:43,730 --> 00:14:48,070\nthey've seen enough different environments\nto start to understand the why's.\n\n316\n00:14:48,070 --> 00:14:52,850\nSo what we're really doing is applying\nMicrosoft's best practices to those why's\n\n317\n00:14:52,850 --> 00:14:55,850\nand getting ready for\nthat more of a management position.\n\n318\n00:14:55,850 --> 00:14:57,160\nSo if you are,\n\n319\n00:14:57,160 --> 00:15:02,505\nif you have a goal of becoming a system\nadmin manager or a network manager.\n\n320\n00:15:02,505 --> 00:15:04,300\n>> Mm-hm.\n>> Or something like that.\n\n321\n00:15:04,300 --> 00:15:07,910\nThat is the type of person that the MCSE\nis really designed for and consultants.\n\n322\n00:15:07,910 --> 00:15:10,720\nRight, people that are roaming\nconsultants, need to have these\n\n323\n00:15:10,720 --> 00:15:13,210\nskills because you're dealing with so\nmany different environments.\n\n324\n00:15:13,210 --> 00:15:17,130\nHow do you make sure they are properly\nset up and ready to grow in scale.\n\n325\n00:15:17,130 --> 00:15:20,410\nYou don't want a solution for today,\nyou need a solution that lasts for\n\n326\n00:15:20,410 --> 00:15:21,610\ntomorrow and beyond.\n\n327\n00:15:22,920 --> 00:15:25,280\nThat sounds like marketing.\n\n328\n00:15:25,280 --> 00:15:27,160\nTomorrow and beyond.\n\n329\n00:15:27,160 --> 00:15:29,960\nAll right, so\ndefinitely keep that in mind.\n\n330\n00:15:29,960 --> 00:15:32,690\nThe exam itself is a pretty\nfair exam I think.\n\n331\n00:15:32,690 --> 00:15:35,340\nMicrosoft of all the exam\nvendors out there.\n\n332\n00:15:35,340 --> 00:15:38,276\nMicrosoft has one of\nthe best grammar checkers.\n\n333\n00:15:38,276 --> 00:15:38,857\n>> Right.\n\n334\n00:15:38,857 --> 00:15:42,290\n>> I know I get so frustrated\nsometimes at the other vendors when,\n\n335\n00:15:42,290 --> 00:15:45,080\nyou read the question and\nyou're like, this makes no sense,\n\n336\n00:15:45,080 --> 00:15:47,290\nit doesn't matter if I know\nthe technology or not.\n\n337\n00:15:47,290 --> 00:15:50,220\nI just can't decipher what\nthis person is saying.\n\n338\n00:15:50,220 --> 00:15:53,100\nAnd Microsoft is really good about that.\n\n339\n00:15:53,100 --> 00:15:57,180\nYou will see though,\nbecause this is a design exam.\n\n340\n00:15:57,180 --> 00:15:59,325\nThat there will often times be\nmore than one right answer.\n\n341\n00:15:59,325 --> 00:16:00,320\n>> Mm-hm.\n\n342\n00:16:00,320 --> 00:16:05,670\n>> If they're asking you to select the\nappropriate design model for a solution,\n\n343\n00:16:05,670 --> 00:16:08,990\nit's not uncommon that all of the design\nmodels they recommend would work.\n\n344\n00:16:08,990 --> 00:16:11,260\n>> Right.\n>> That everyone of them would work.\n\n345\n00:16:11,260 --> 00:16:14,890\nBut one of them will best\nmatch the scenario, right?\n\n346\n00:16:14,890 --> 00:16:19,140\nThat client's needs or future expansion or\nleast administrative effort,\n\n347\n00:16:19,140 --> 00:16:20,830\nwhatever it is that they're asking for.\n\n348\n00:16:20,830 --> 00:16:22,410\nSo, be ready for that.\n\n349\n00:16:22,410 --> 00:16:27,080\nThese are a little bit more, I don't want\nto call them subjective, you know, but\n\n350\n00:16:27,080 --> 00:16:30,870\nthey do require a little bit of\nindependent thought to make sure you pick\n\n351\n00:16:30,870 --> 00:16:33,290\nthe best answer cell.\n\n352\n00:16:33,290 --> 00:16:38,030\nI know for me, on this exam, the old mark\nfor review button, I'd probably use that\n\n353\n00:16:38,030 --> 00:16:41,810\nmore than any other exam, just because\nthere's different ways to do things.\n\n354\n00:16:43,170 --> 00:16:48,000\nAll right, but all that being said,\nit's a pretty exciting certification.\n\n355\n00:16:48,000 --> 00:16:52,350\nIt's a nice change from the 413 which\nwas very design heavy, you know.\n\n356\n00:16:52,350 --> 00:16:55,500\nThis one we get into a lot of design,\nbut we're seeing some new stuff,\n\n357\n00:16:55,500 --> 00:16:58,150\nwe're seeing the system centered tools and\nthat's a lot of fun.\n\n358\n00:16:59,382 --> 00:17:02,650\nAll right, so Mike can you think of\nanything we have left off here for\n\n359\n00:17:02,650 --> 00:17:03,280\nour review?\n\n360\n00:17:03,280 --> 00:17:07,134\n>> No I think we covered it all,\nwe talked about the objectives and\n\n361\n00:17:07,134 --> 00:17:08,747\nthe track that we're on.\n\n362\n00:17:08,747 --> 00:17:10,572\n>> That's basically it.\n\n363\n00:17:10,572 --> 00:17:14,530\nAll right, well, ladies and gentlemen,\nif that stuff sounds exciting to you, and\n\n364\n00:17:14,530 --> 00:17:17,100\nthat's what you want to learn,\nthey you are in the right place.\n\n365\n00:17:17,100 --> 00:17:20,810\nThis was just our little overview to\nintroduce you to the certification, but\n\n366\n00:17:20,810 --> 00:17:24,121\nstay tuned because we have episodes\ncovering the actual exam content\n\n367\n00:17:24,121 --> 00:17:24,704\ncoming up.\n\n368\n00:17:24,704 --> 00:17:31,290\nI hope to see you then.\n\n369\n00:17:31,290 --> 00:17:33,259\n[SOUND]\n\n",
          "vimeoId": "110244913"
        }
      ],
      "title": "Overview of MCSE Windows Server 2012 (70-414)"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "492",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-0-manage-server-infrastructure-102714.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-0-manage-server-infrastructure-102714-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-0-manage-server-infrastructure-102714-sm.jpg",
          "title": "Manage and Maintain Server Infrastructure",
          "transcript": "1\n00:00:00,025 --> 00:00:04,520\n[SOUND] The first objective for\n\n2\n00:00:04,520 --> 00:00:10,273\nthe 70-414 exam is to manage and\n\n3\n00:00:10,273 --> 00:00:15,863\nmaintain a server infrastructure.\n\n4\n00:00:15,863 --> 00:00:21,750\nAnd if that sounds kind of similar\nto the 70-413 exam, it really is.\n\n5\n00:00:21,750 --> 00:00:25,650\nThis first objective builds on\nsome of the stuff we saw in\n\n6\n00:00:25,650 --> 00:00:29,450\nthe 70-413 which focused on designing\nthat server infrastructure.\n\n7\n00:00:29,450 --> 00:00:30,590\nNow we're managing it.\n\n8\n00:00:30,590 --> 00:00:31,290\nRight.\n\n9\n00:00:31,290 --> 00:00:32,300\nYou've designed it.\n\n10\n00:00:32,300 --> 00:00:33,250\nYou've put it in place.\n\n11\n00:00:33,250 --> 00:00:34,250\nRight.\nThe implementing for\n\n12\n00:00:34,250 --> 00:00:37,320\nall of that stuff in 413 was\ncovered in the MCSA track.\n\n13\n00:00:37,320 --> 00:00:38,610\nSo it's all in place.\n\n14\n00:00:38,610 --> 00:00:39,771\nNow you gotta deal with it, right.\n\n15\n00:00:39,771 --> 00:00:40,720\n[LAUGH]\n>> Now you gotta take care of it.\n\n16\n00:00:40,720 --> 00:00:42,160\nMake sure it stays up and running.\n\n17\n00:00:42,160 --> 00:00:42,860\nRight.\n[LAUGH]\n\n18\n00:00:42,860 --> 00:00:44,150\n>> It's like when you buy a new car.\n\n19\n00:00:44,150 --> 00:00:45,890\nYou do all this shopping.\n\n20\n00:00:45,890 --> 00:00:46,990\nYou look at the different models.\n\n21\n00:00:46,990 --> 00:00:48,410\nYou do all your research.\n\n22\n00:00:48,410 --> 00:00:49,590\nAnd then you buy the car, and\n\n23\n00:00:49,590 --> 00:00:52,010\nonce you've got it,\nnow you got to keep it running, right?\n\n24\n00:00:52,010 --> 00:00:53,390\nYou got to do your oil changes and\n\n25\n00:00:53,390 --> 00:00:55,890\nall that other stuff to keep\nit healthy and running.\n\n26\n00:00:55,890 --> 00:00:59,030\nAnd that's really what this\nfirst section is all about.\n\n27\n00:00:59,030 --> 00:01:04,285\nHow do you keep your infrastructure\nhealthy, happy, and operational, right?\n\n28\n00:01:04,285 --> 00:01:07,205\nSo it gets broken down\ninto three sections.\n\n29\n00:01:07,205 --> 00:01:10,285\nAnd we're gonna be starting off\nright here at the beginning, which,\n\n30\n00:01:10,285 --> 00:01:15,265\nI guess, makes sense, [LAUGH] so\nthat'll be design an administrative model.\n\n31\n00:01:15,265 --> 00:01:19,660\nThat refers to how we're gonna\nhave people work in the system.\n\n32\n00:01:19,660 --> 00:01:24,100\nYou might be a one-person IT shop, and\nthis is not gonna make a whole lot of\n\n33\n00:01:24,100 --> 00:01:26,300\nsense to you, cuz that's not what\nthis training is designed for.\n\n34\n00:01:26,300 --> 00:01:28,287\nWe're talking about advanced\nserver infrastructures.\n\n35\n00:01:28,287 --> 00:01:30,945\nThese are companies that\nhave large data centers.\n\n36\n00:01:30,945 --> 00:01:32,150\n>> Massive, yeah.\n\n37\n00:01:32,150 --> 00:01:33,960\n>> Usually multiple data centers.\n\n38\n00:01:33,960 --> 00:01:35,390\n>> Distributed wherever.\n\n39\n00:01:35,390 --> 00:01:37,050\n>> Yeah,\nit could be all over the globe, right?\n\n40\n00:01:37,050 --> 00:01:37,700\n>> Mm-hm.\n\n41\n00:01:37,700 --> 00:01:40,780\n>> So, you might have IT personnel here\nin one country and in another country and\n\n42\n00:01:40,780 --> 00:01:43,220\nso how do we arrange that so\n\n43\n00:01:43,220 --> 00:01:46,484\nthat the personnel is not tripping\nover each other's feet right?\n\n44\n00:01:46,484 --> 00:01:49,010\nYou don't want somebody to make\na change in one country and\n\n45\n00:01:49,010 --> 00:01:52,720\nhave a whole another country affected\nby that and it becomes a giant mess.\n\n46\n00:01:52,720 --> 00:01:55,820\nEspecially when you're dealing with\ntens of thousands of employees,\n\n47\n00:01:55,820 --> 00:01:57,920\nthat becomes really, really sensitive.\n\n48\n00:01:57,920 --> 00:02:00,282\nSo that's what we're gonna\nbe taking a look at and\n\n49\n00:02:00,282 --> 00:02:03,670\nwe'll see some of the different\ntools that are available for us.\n\n50\n00:02:03,670 --> 00:02:05,520\nThings like our built in services and\n\n51\n00:02:05,520 --> 00:02:10,750\ngroups that we've got as well as\nMicrosoft System Center 2012 R2.\n\n52\n00:02:10,750 --> 00:02:15,570\nIt is possible that you have made it\nthis far in your certification and\n\n53\n00:02:15,570 --> 00:02:20,340\ntraining practices and\nhave not touched System Center 2012 R2,\n\n54\n00:02:20,340 --> 00:02:22,350\nor System Center at all, right?\n\n55\n00:02:22,350 --> 00:02:24,890\nSo, if you haven't, don't freak out.\n\n56\n00:02:24,890 --> 00:02:26,450\nIt's definitely possible.\n\n57\n00:02:26,450 --> 00:02:28,430\nThe other exams really don't hit on it,\nbut\n\n58\n00:02:28,430 --> 00:02:32,500\nin this one, in 4-14,\nit's practically a System Center exam.\n\n59\n00:02:32,500 --> 00:02:33,620\n>> It really is.\n\n60\n00:02:33,620 --> 00:02:37,670\n>> So we're gonna look at all the\ndifferent pieces that System Center has\n\n61\n00:02:37,670 --> 00:02:39,130\nand what each one does.\n\n62\n00:02:39,130 --> 00:02:41,153\nWe're just gonna do\na high level right here.\n\n63\n00:02:41,153 --> 00:02:46,210\nIn later sections, we'll actually start\nto dive into those little more deeply and\n\n64\n00:02:46,210 --> 00:02:48,965\ntry to implement them,\nwhich is kinda nice.\n\n65\n00:02:48,965 --> 00:02:51,851\nBecause it means we're gonna be\nimplementing some stuff in this show\n\n66\n00:02:51,851 --> 00:02:53,103\nversus like our design show.\n\n67\n00:02:53,103 --> 00:02:53,961\n>> [CROSSTALK] seeing, yeah.\n\n68\n00:02:53,961 --> 00:02:54,473\n>> You remember, Mike.\n\n69\n00:02:54,473 --> 00:02:55,101\n>> Oh yeah.\n\n70\n00:02:55,101 --> 00:02:56,915\n>> It was a lot of lecture almost.\n\n71\n00:02:56,915 --> 00:02:58,095\nSo this gets to be a little more fun.\n\n72\n00:02:58,095 --> 00:02:58,847\n>> Yep.\nAbsolutely.\n\n73\n00:02:58,847 --> 00:03:02,355\n>> All right, the next section is\ndesigning a monitoring strategy.\n\n74\n00:03:02,355 --> 00:03:03,865\nSo how do we keep an eye on those servers?\n\n75\n00:03:03,865 --> 00:03:06,615\nHow do we get alerted if we\nknow that a server fails?\n\n76\n00:03:06,615 --> 00:03:09,495\nOr more importantly, how do we\npredict the failure before it happens?\n\n77\n00:03:09,495 --> 00:03:13,620\nHow do we gauge performance, and\nlook at historical data, and so on?\n\n78\n00:03:13,620 --> 00:03:17,670\nAnd we'll find there's a number of\nreally cool tools that do that.\n\n79\n00:03:17,670 --> 00:03:20,410\nSystem Center Operations Manager\nbeing the biggest.\n\n80\n00:03:20,410 --> 00:03:25,360\nIt's been around awhile, but we'll look\nat the audit collection services which-\n\n81\n00:03:25,360 --> 00:03:26,375\n>> Relatively new?\n\n82\n00:03:26,375 --> 00:03:29,440\n>> Yeah, it's relatively new, it's a neat\nsystem, a lot of people don't even know\n\n83\n00:03:29,440 --> 00:03:33,210\nabout it, but it makes managing\nthose audit logs really easy.\n\n84\n00:03:33,210 --> 00:03:36,090\nAnd then\nthe System Center Global Service Monitor.\n\n85\n00:03:36,090 --> 00:03:40,015\nWhich gives us some additional monitoring\nthat we can do that interacts with\n\n86\n00:03:40,015 --> 00:03:45,490\nWindows Azure lets you better see\nwhat end user experience will be.\n\n87\n00:03:45,490 --> 00:03:48,130\nIt's a different type of monitoring\nthan what we might be used to.\n\n88\n00:03:48,130 --> 00:03:53,440\nSo some really cool stuff in there to keep\nour system operating the way that we want.\n\n89\n00:03:53,440 --> 00:03:57,300\nAnd then the last section on this one,\nplan and\n\n90\n00:03:57,300 --> 00:04:00,310\nimplement automated remediation, right?\n\n91\n00:04:00,310 --> 00:04:02,080\nIt's nice to know that there's a failure.\n\n92\n00:04:02,080 --> 00:04:02,700\nHey, something failed.\n\n93\n00:04:02,700 --> 00:04:03,215\nI know.\n\n94\n00:04:03,215 --> 00:04:03,950\n>> [LAUGH]\n>> Right,\n\n95\n00:04:03,950 --> 00:04:07,025\nbut if you're in IT what does that mean?\n\n96\n00:04:07,025 --> 00:04:10,525\nSo Mike, if I tell you hey,\nthe email server, email's not coming in.\n\n97\n00:04:10,525 --> 00:04:13,152\n>> That means my phones are lighting up,\nthe help desk is going crazy and\n\n98\n00:04:13,152 --> 00:04:14,250\nI've got a lot of work to do.\n\n99\n00:04:14,250 --> 00:04:15,725\n>> And, if it's two in the morning?\n\n100\n00:04:15,725 --> 00:04:17,152\n>> Yeah, guess where I'm going?\n\n101\n00:04:17,152 --> 00:04:19,200\n>> It doesn't matter, right?\n\n102\n00:04:19,200 --> 00:04:19,870\nYou gotta deal with it.\n\n103\n00:04:19,870 --> 00:04:22,740\nSo that is a reality for IT workers.\n\n104\n00:04:22,740 --> 00:04:24,160\nThis is how it is.\n\n105\n00:04:24,160 --> 00:04:28,394\nAnd I don't know that I could even count\nthe amount of times that I've had to get\n\n106\n00:04:28,394 --> 00:04:32,178\nup at 3AM and head into the office or\nat least fire up a VPN [CROSSTALK] and\n\n107\n00:04:32,178 --> 00:04:32,901\nget to work.\n\n108\n00:04:32,901 --> 00:04:34,039\n>> If that part's still up, hopefully.\n\n109\n00:04:34,039 --> 00:04:37,022\n>> [LAUGH] [CROSSTALK] VPN server's down,\ngreat.\n\n110\n00:04:37,022 --> 00:04:38,104\nAll right.\n\n111\n00:04:38,104 --> 00:04:43,200\n[LAUGH] So wouldn't it be nice if\nwe could have systems in place\n\n112\n00:04:43,200 --> 00:04:46,010\nthat remediated failures for us?\n\n113\n00:04:46,010 --> 00:04:49,270\nA failure happens and it takes care of it.\n\n114\n00:04:49,270 --> 00:04:52,470\nNow don't get that confused\nwith high availability, right?\n\n115\n00:04:52,470 --> 00:04:57,090\nHigh availability, if a failure happens,\nit doesn't fix the failure.\n\n116\n00:04:57,090 --> 00:05:00,390\nIt just moves over to other\nresources that haven't failed.\n\n117\n00:05:00,390 --> 00:05:01,648\nIt hides the failure.\n\n118\n00:05:01,648 --> 00:05:03,418\n>> [LAUGH]\n>> We call that-\n\n119\n00:05:03,418 --> 00:05:04,704\n>> Like we were talking about\n\n120\n00:05:04,704 --> 00:05:06,110\nwith business continuity.\n\n121\n00:05:06,110 --> 00:05:06,720\nWe're still up.\n\n122\n00:05:06,720 --> 00:05:07,650\nWe're running.\nWe're not\n\n123\n00:05:07,650 --> 00:05:09,590\nmaybe at that peak\nperformance we want to be.\n\n124\n00:05:09,590 --> 00:05:12,285\nBut hey, we're still going and\nit gives me a chance to get in there and\n\n125\n00:05:12,285 --> 00:05:14,795\nfix it before we hit the bottom and\ndisaster.\n\n126\n00:05:14,795 --> 00:05:15,905\n>> Yeah, absolutely.\n\n127\n00:05:15,905 --> 00:05:20,737\nAnd so that high availability, that is\ntreating the symptom not the cause.\n\n128\n00:05:20,737 --> 00:05:23,642\nAll right,\nto put in the medical terminology.\n\n129\n00:05:23,642 --> 00:05:27,712\nSo if I have a two node cluster, and\none node fails, the other node takes over,\n\n130\n00:05:27,712 --> 00:05:29,442\nI'm still in business.\n\n131\n00:05:29,442 --> 00:05:31,532\nBut when I come in in the morning,\nthat first node, it still failed.\n\n132\n00:05:31,532 --> 00:05:33,542\n>> Right. [LAUGH] >> You know, it's\nstill sitting there dead in the water.\n\n133\n00:05:33,542 --> 00:05:36,842\nAnd it'll stay that way forever\nunless I do something about it.\n\n134\n00:05:36,842 --> 00:05:38,752\nWhen we talk about automated remediation,\n\n135\n00:05:38,752 --> 00:05:42,502\nthat's where the system fixes itself,\nall right?\n\n136\n00:05:42,502 --> 00:05:46,172\nIt sees a problem, and it takes some\nkind of action to correct for it.\n\n137\n00:05:46,172 --> 00:05:50,280\nSo not only did a failure occur,\nnot only did we stay online, but\n\n138\n00:05:50,280 --> 00:05:55,700\nit's also repaired so that, when we\ncome in, we don't have to do anything.\n\n139\n00:05:55,700 --> 00:05:57,560\nAnd that is really nice.\n\n140\n00:05:57,560 --> 00:05:59,284\nNow we need to be aware of\nwhat the cause was and so on.\n\n141\n00:05:59,284 --> 00:06:03,077\nBut part of what you're paying for\nwhen you get something like System Center,\n\n142\n00:06:03,077 --> 00:06:06,306\nis the fact that Microsoft has\na huge amount of error log analysis.\n\n143\n00:06:06,306 --> 00:06:10,239\nThat's backed up in their super secret\nknowledge based articles they don't make\n\n144\n00:06:10,239 --> 00:06:12,920\navailable to the public that\nSystem Center is aware of.\n\n145\n00:06:12,920 --> 00:06:15,350\nAnd so it's able to see this stuff and\ntake some actions.\n\n146\n00:06:15,350 --> 00:06:16,400\n>> Nice.\n\n147\n00:06:16,400 --> 00:06:19,980\n>> But we'll also take a look at\nsome other cool things like the DCM,\n\n148\n00:06:19,980 --> 00:06:24,110\nthe Desired Configuration Management tool,\nwhich is a part of PowerShell.\n\n149\n00:06:24,110 --> 00:06:29,300\nWhich means if I have a server fail, we\ncan actually spin up an all new server and\n\n150\n00:06:29,300 --> 00:06:32,510\nrestore a back up and throw our data and\nget a back up on operational to our\n\n151\n00:06:32,510 --> 00:06:35,340\ndesired state,\nwithout even getting involved.\n\n152\n00:06:36,600 --> 00:06:38,380\nThat's really cool.\n\n153\n00:06:38,380 --> 00:06:41,870\nIf it's a virtual machine,\nthe entire VM can be rebuilt and\n\n154\n00:06:41,870 --> 00:06:46,980\nback online in short order without\nus having to get involved.\n\n155\n00:06:46,980 --> 00:06:49,304\nNow, if it's a physical,\nlike a hardware failure,\n\n156\n00:06:49,304 --> 00:06:51,225\nyou really can't automate repair of that.\n\n157\n00:06:51,225 --> 00:06:53,570\nYou know, it's not gonna\nchange a hard drive for you.\n\n158\n00:06:53,570 --> 00:06:56,975\nBut on the software side it can\nreally take care of things,\n\n159\n00:06:56,975 --> 00:06:59,337\nand when we've got web applications and\n\n160\n00:06:59,337 --> 00:07:03,740\nsoftware services like that this type\nof solution is really important.\n\n161\n00:07:03,740 --> 00:07:04,940\nYou want to keep it online.\n\n162\n00:07:04,940 --> 00:07:07,620\nYou can be hemorrhaging cash,\nright, losing money for\n\n163\n00:07:07,620 --> 00:07:08,900\nevery moment that application is down.\n\n164\n00:07:10,260 --> 00:07:13,570\nAll right, so we're gonna get a chance to\nsee that and kind of work around with it.\n\n165\n00:07:13,570 --> 00:07:17,390\nAnd notice, it is talking in here like,\nusing VMM to move a virtual\n\n166\n00:07:17,390 --> 00:07:20,940\nmachine dynamically based on policies and\nother things.\n\n167\n00:07:20,940 --> 00:07:26,170\nAnd that's gonna talk about, like,\nwhen we have our virtual machine hosts.\n\n168\n00:07:26,170 --> 00:07:28,210\nAnd they're starting to\nrun low on resources,\n\n169\n00:07:28,210 --> 00:07:32,020\nstarting to get to peg out their CPU,\nor run out of RAM, or whatever.\n\n170\n00:07:32,020 --> 00:07:34,150\nThat it can automatically\nshift VMs around,\n\n171\n00:07:34,150 --> 00:07:38,030\nmove them to other hosts to avoid\nthe failure before it happens.\n\n172\n00:07:38,030 --> 00:07:39,440\nAll about automated remediation.\n\n173\n00:07:39,440 --> 00:07:42,980\nReally, really cool stuff there.\n\n174\n00:07:42,980 --> 00:07:47,020\nThat's our quick overview of what we're\ngonna be seeing in our first objective,\n\n175\n00:07:47,020 --> 00:07:50,080\nmanage and\nmaintain a server infrastructure.\n\n176\n00:07:50,080 --> 00:07:50,680\nAll right.\n\n177\n00:07:50,680 --> 00:07:51,970\nThat sounds exciting to you?\n\n178\n00:07:51,970 --> 00:07:53,310\nIt should.\nIt's really cool stuff.\n\n179\n00:07:53,310 --> 00:07:54,050\n>> It's good stuff.\n\n180\n00:07:54,050 --> 00:07:58,800\n>> And, if you can get it implemented\ncorrectly, it'll make you rest easier.\n\n181\n00:07:58,800 --> 00:08:02,160\nSo, if that sounds good, stay tuned\nbecause you're in the right place.\n\n182\n00:08:02,160 --> 00:08:05,771\nWe're gonna be diving into this\nin our episodes coming up next.\n\n183\n00:08:05,771 --> 00:08:12,169\n[MUSIC]\n\n",
          "vimeoId": "110244912"
        },
        {
          "description": "",
          "length": "5488",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-1-Design-an-admin-model-102714.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-1-Design-an-admin-model-102714-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-1-Design-an-admin-model-102714-sm.jpg",
          "title": "Design an Admin Model",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,102 --> 00:00:36,621\nAll right good morning,\ngood afternoon, and good evening.\n\n3\n00:00:36,621 --> 00:00:38,900\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,900 --> 00:00:40,468\nI'm your host Don Pezet.\n\n5\n00:00:40,468 --> 00:00:42,210\nToday with Mr. Mike Rodrick.\n\n6\n00:00:42,210 --> 00:00:42,860\nHow's it going, Mike?\n\n7\n00:00:42,860 --> 00:00:44,290\n>> Fantastic, Don,\nhow are you doing today?\n\n8\n00:00:44,290 --> 00:00:44,930\n>> I am doing swell.\n\n9\n00:00:44,930 --> 00:00:50,380\nI am pumped up and excited about our first\nepisode diving into the 70-414 exam,\n\n10\n00:00:50,380 --> 00:00:54,214\nwhich, let me look at\nmy official you know,\n\n11\n00:00:54,214 --> 00:00:57,480\n[INAUDIBLE]\n>> Which we're gonna be doing.\n\n12\n00:00:57,480 --> 00:01:01,280\nThe manage and\nmaintain a server infrastructure.\n\n13\n00:01:01,280 --> 00:01:02,580\nYou know, actually, here.\n\n14\n00:01:02,580 --> 00:01:03,450\n>> There we go.\n>> Manage and\n\n15\n00:01:03,450 --> 00:01:06,000\nmaintain a server infrastructure is\nwhat we're gonna be diving into today.\n\n16\n00:01:06,000 --> 00:01:11,070\nThis is all part of the 70-414\nimplementing an advanced\n\n17\n00:01:11,070 --> 00:01:14,130\nserver infrastructure certification so\n\n18\n00:01:14,130 --> 00:01:18,140\nwhat we're going to be taking a look\nat here in this section is that initial\n\n19\n00:01:18,140 --> 00:01:21,860\nmanagement of our server infrastructure\nin other words our data centers right.\n\n20\n00:01:21,860 --> 00:01:26,030\n>> Where we've got our servers, databases,\nfile storage, all that other good stuff.\n\n21\n00:01:26,030 --> 00:01:28,390\nHow we can kind of manage that.\n\n22\n00:01:28,390 --> 00:01:32,730\nAnd we're going to start out\nkind of a little sales-y,\n\n23\n00:01:32,730 --> 00:01:33,870\nI guess that's what you'd call it.\n\n24\n00:01:33,870 --> 00:01:34,792\n>> Yeah, maybe a little bit.\n\n25\n00:01:34,792 --> 00:01:36,640\nImportant, huh.\n\n26\n00:01:36,640 --> 00:01:37,940\n>> It is important.\n\n27\n00:01:37,940 --> 00:01:40,080\nIt's almost like Microsoft marketing,\nthough.\n\n28\n00:01:40,080 --> 00:01:42,770\nBecause what we're going to be talking\nabout are some best practices and\n\n29\n00:01:42,770 --> 00:01:46,530\nthings that you need to do in your\nenvironment and then we're gonna show you\n\n30\n00:01:46,530 --> 00:01:49,820\nthe Microsoft software that will\nhelp you achieve that, all right.\n\n31\n00:01:49,820 --> 00:01:54,500\nOn the exam you're using\nMicrosoft Solutions to fit that need.\n\n32\n00:01:54,500 --> 00:01:55,990\nIn real life you can use\nwhatever you want, right.\n\n33\n00:01:55,990 --> 00:01:57,050\nBut before the exam,\n\n34\n00:01:57,050 --> 00:01:59,680\nwe need to make sure we know\nthe Microsoft way to solve the problem.\n\n35\n00:01:59,680 --> 00:02:01,040\n>> Right.\nAnd,\n\n36\n00:02:01,040 --> 00:02:02,480\nyou'll see it's actually not that bad.\n\n37\n00:02:02,480 --> 00:02:03,960\nI shouldn't say it's not that bad.\n\n38\n00:02:03,960 --> 00:02:04,770\nIt's actually really good.\n\n39\n00:02:04,770 --> 00:02:05,420\n>> It really is.\n\n40\n00:02:05,420 --> 00:02:07,261\nIt's got some really\ngood products in there.\n\n41\n00:02:07,261 --> 00:02:10,030\n>> The system center suite that\nwe'll see a little bit later.\n\n42\n00:02:10,030 --> 00:02:11,020\nIt's fairly complex.\n\n43\n00:02:11,020 --> 00:02:12,320\nIt's big.\nIt's heavy.\n\n44\n00:02:12,320 --> 00:02:15,340\nBut if you have a large\nenvironment there really isn't\n\n45\n00:02:15,340 --> 00:02:16,720\na better way to manage\n>> Yeah.\n\n46\n00:02:16,720 --> 00:02:19,320\n>> Microsoft servers than\nthe Systems Center Suite.\n\n47\n00:02:19,320 --> 00:02:20,270\n>> Yeah.\nYeah, absolutely.\n\n48\n00:02:20,270 --> 00:02:23,742\n>> All right, so let's start with\nthe best practice side of things.\n\n49\n00:02:23,742 --> 00:02:27,600\nAll right, when you're dealing with data\ncenters, your needs are a little bit\n\n50\n00:02:27,600 --> 00:02:31,210\ndifferent than the small mom and\npop shops where they have one or\n\n51\n00:02:31,210 --> 00:02:35,510\ntwo IT guys and a couple of servers\nall dedicated to one company.\n\n52\n00:02:35,510 --> 00:02:37,940\nWhen you have a large data center,\n\n53\n00:02:37,940 --> 00:02:41,430\nyou may have some equipment\nthat's dedicated to one company.\n\n54\n00:02:41,430 --> 00:02:44,190\nAnd some equipment that's\ndedicated to a different company.\n\n55\n00:02:44,190 --> 00:02:47,750\nYou may have a mixture\nof different entities or\n\n56\n00:02:47,750 --> 00:02:49,759\ncompanies operating inside\nof the same data center.\n\n57\n00:02:50,760 --> 00:02:55,220\nYou also likely have a large\nquantity of IT personnel right.\n\n58\n00:02:55,220 --> 00:02:58,702\nWhats the old saying, too many chefs\nin the kitchen ruins the soup.\n\n59\n00:02:58,702 --> 00:02:59,885\n>> [LAUGH] That's right.\n\n60\n00:02:59,885 --> 00:03:02,840\n>> That's what we have\nin large IT departments\n\n61\n00:03:02,840 --> 00:03:04,220\n>> If you're the only IT person and\n\n62\n00:03:04,220 --> 00:03:06,740\nyou want to make a change, you make it.\n\n63\n00:03:06,740 --> 00:03:08,170\nEverybody knows right,\ncuz you are everyone.\n\n64\n00:03:08,170 --> 00:03:08,935\n>> Because you are everyone.\n\n65\n00:03:08,935 --> 00:03:12,480\n[LAUGH]\n>> But when you've got 30 people and\n\n66\n00:03:12,480 --> 00:03:15,190\nI make a change and\nI don't tell Mike, what happens?\n\n67\n00:03:15,190 --> 00:03:17,090\n>> That can really affect\nsomething I was planning or\n\n68\n00:03:17,090 --> 00:03:20,770\ndoing or break something somewhere else\nthat we've gotta stop and think about.\n\n69\n00:03:20,770 --> 00:03:24,300\n>> Yeah, or worse case scenario, you're\ntrying to solve a problem and I know\n\n70\n00:03:24,300 --> 00:03:28,060\nthe answer because I'm the one who caused\nit, but you don't know I did it, but\n\n71\n00:03:28,060 --> 00:03:31,940\nyou you are going to have to work harder\nbecause I did not bother let you know.\n\n72\n00:03:33,150 --> 00:03:37,030\nThese are real common problems\nin enterprise environments.\n\n73\n00:03:38,040 --> 00:03:42,720\nRemember that the MCSE, the certification,\nis not designed for small and\n\n74\n00:03:42,720 --> 00:03:43,500\nmedium shops.\n\n75\n00:03:43,500 --> 00:03:46,140\nWe're really talking\nabout large environments,\n\n76\n00:03:46,140 --> 00:03:49,890\nenvironments where we have many IT\nadministrators, large data centers.\n\n77\n00:03:49,890 --> 00:03:54,070\nSo if this sounds like bureaucracy, sounds\nlike we're making harder, we're not.\n\n78\n00:03:54,070 --> 00:03:57,180\nIt's just you have to do\nit when you're that size.\n\n79\n00:03:57,180 --> 00:03:58,750\nThere's practices that you have to follow.\n\n80\n00:04:00,350 --> 00:04:03,810\nSo, the first thing we need to figure\nout when we do a design like this is\n\n81\n00:04:03,810 --> 00:04:05,960\nwhat our administrative\nmodel is going to be.\n\n82\n00:04:05,960 --> 00:04:11,630\nAnd administrative models what that\nmeans is just what your hierarchy is.\n\n83\n00:04:11,630 --> 00:04:15,370\nHow do people go about\nimplementing new technologies,\n\n84\n00:04:15,370 --> 00:04:18,360\nchanging existing technologies,\ndoing maintenance?\n\n85\n00:04:18,360 --> 00:04:22,730\nHow do we do our normal operations and\nwhat's that chain of command look like?\n\n86\n00:04:22,730 --> 00:04:25,850\n>> How are we going to delegate that out\nbecause it gets to the point as we get so\n\n87\n00:04:25,850 --> 00:04:28,480\nlarge, you know,\none person just can't manage it.\n\n88\n00:04:28,480 --> 00:04:30,780\nEven a couple people\nreally can't manage it.\n\n89\n00:04:30,780 --> 00:04:34,790\nSo we've gotta have that ability to\ndelegate part of that job to a certain\n\n90\n00:04:34,790 --> 00:04:36,410\npeople or staff.\n\n91\n00:04:36,410 --> 00:04:37,610\nThey take care of that part,\n\n92\n00:04:37,610 --> 00:04:40,230\nyou've got another group that's\ndelegated certain permissions, and\n\n93\n00:04:40,230 --> 00:04:44,270\nwe spread that administrative\ncontrol out across multiple people.\n\n94\n00:04:44,270 --> 00:04:47,325\n>> And even if,\neven if we had one super person\n\n95\n00:04:47,325 --> 00:04:47,903\n>> [COUGH]\n\n96\n00:04:47,903 --> 00:04:48,847\n>> Like a super idea,\n\n97\n00:04:48,847 --> 00:04:50,320\nthat could do it all-\n>> Mm-hm\n\n98\n00:04:50,320 --> 00:04:51,130\n>> You wouldn't want that,\n\n99\n00:04:51,130 --> 00:04:54,220\nyou don't wanna become\ndependent on a single person.\n\n100\n00:04:54,220 --> 00:04:54,790\n>> Right.\n>> For\n\n101\n00:04:54,790 --> 00:04:57,580\nany aspect of your organization right,\nthat's bad.\n\n102\n00:04:57,580 --> 00:05:00,210\nSo we always need to do cross training.\n\n103\n00:05:00,210 --> 00:05:03,590\nWe need to have multiple employees\ntrained to do various activities.\n\n104\n00:05:03,590 --> 00:05:05,350\nIt's just a standard best practice.\n\n105\n00:05:05,350 --> 00:05:07,000\nYou need that.\n>> Separation of duties.\n\n106\n00:05:07,000 --> 00:05:07,680\n>> Yeah.\n\n107\n00:05:07,680 --> 00:05:11,240\nBut now that you have more than one\nperson who can do the same thing,\n\n108\n00:05:11,240 --> 00:05:13,740\nthat's people that can\nstep on each other's toes.\n\n109\n00:05:13,740 --> 00:05:14,690\n>> Mm hm.\n>> Right?\n\n110\n00:05:14,690 --> 00:05:17,790\nSo, looks like there's\na problem on the DNS server,\n\n111\n00:05:17,790 --> 00:05:22,650\nand it's not replicating, and so I jump\nin there, and I start looking at it, and\n\n112\n00:05:22,650 --> 00:05:27,330\nI'm like, okay, well we're going to\nrestart the DNS service all right,\n\n113\n00:05:27,330 --> 00:05:32,500\nwell maybe the problem was with just the\nzone I was responsible for and there were\n\n114\n00:05:32,500 --> 00:05:36,910\nother zones on the DNS server when I\nrestart that service who does that effect\n\n115\n00:05:36,910 --> 00:05:41,270\neveryone on there all the zones right even\nthe zones that I'm not responsible for and\n\n116\n00:05:41,270 --> 00:05:45,430\nso now just because I had\na problem I caused an outage for\n\n117\n00:05:45,430 --> 00:05:49,780\nother people that didn't have a problem\nand while you can get away with stuff like\n\n118\n00:05:49,780 --> 00:05:53,590\nthat in a small shop, in an enterprise\nenvironment you cannot do that.\n\n119\n00:05:53,590 --> 00:05:56,170\nYou cannot cause outages\nif they're avoidable.\n\n120\n00:05:56,170 --> 00:05:59,910\nWe've got to have a good\nhierarchy in place for that.\n\n121\n00:05:59,910 --> 00:06:03,540\nWhat it really boils down to\nis what our structure is.\n\n122\n00:06:03,540 --> 00:06:05,760\nMicrosoft calls out three\nspecific structures.\n\n123\n00:06:05,760 --> 00:06:10,000\nThere's centralized,\ndecentralized and hybrid.\n\n124\n00:06:11,520 --> 00:06:17,840\nA centralized IT model is where you\nhave all of your IT eggs in one basket.\n\n125\n00:06:17,840 --> 00:06:22,070\nAnd an example of that would be,\nI I had a globe.\n\n126\n00:06:22,070 --> 00:06:23,150\nThere we go.\n\n127\n00:06:23,150 --> 00:06:25,310\nLet's say that this is\nmy global operation.\n\n128\n00:06:25,310 --> 00:06:29,600\nAnd maybe,\nI have branches all across the world.\n\n129\n00:06:29,600 --> 00:06:32,450\nSo my company, maybe I'm a store right?\n\n130\n00:06:32,450 --> 00:06:37,880\nSo I have retail branches,\nwell that didn't work did it?\n\n131\n00:06:37,880 --> 00:06:40,950\nSo I've got retail branches\nwhich I'll just call BRs right?\n\n132\n00:06:40,950 --> 00:06:44,720\nAnd maybe I've got them all over\nthe world just tons of employees.\n\n133\n00:06:44,720 --> 00:06:46,160\nMaybe these are call centers.\n\n134\n00:06:46,160 --> 00:06:49,580\nIf we're some kind of\norder by phone business or\n\n135\n00:06:49,580 --> 00:06:52,710\nmaybe these are car dealerships.\n\n136\n00:06:52,710 --> 00:06:55,290\nOr whatever it is that your\ncompany does to make money.\n\n137\n00:06:55,290 --> 00:06:58,520\nSo you might have branches\nall over the place.\n\n138\n00:06:58,520 --> 00:06:59,450\nRight.\n\n139\n00:06:59,450 --> 00:07:02,980\nBut your headquarters is right here and\n\n140\n00:07:02,980 --> 00:07:08,140\nall of your IT personnel is right there,\nright at your\n\n141\n00:07:08,140 --> 00:07:13,820\nheadquarters where all your servers and\nother infrastructure reside so.\n\n142\n00:07:13,820 --> 00:07:16,260\nThis is whats called\na centralized model and\n\n143\n00:07:16,260 --> 00:07:21,780\ncentralized models are nice\nbecause it makes life a lot easier\n\n144\n00:07:21,780 --> 00:07:25,560\nI'm about to change a web server, the web\ndevelopers are right there next to me.\n\n145\n00:07:25,560 --> 00:07:29,350\nMaybe they're on a different floor,\nsame building, but they're right there.\n\n146\n00:07:29,350 --> 00:07:31,550\nOr if there's a problem with the DNS zone,\n\n147\n00:07:31,550 --> 00:07:35,090\nI can just yell out,\nhey,anybody working on DNS right now?\n\n148\n00:07:35,090 --> 00:07:37,800\nAnd we can get the idea that if\neverything is centrally managed\n\n149\n00:07:37,800 --> 00:07:42,090\nall right in one place,\nlife becomes very, very easy.\n\n150\n00:07:42,090 --> 00:07:43,720\nAnd your branches all know who to contact,\nright?\n\n151\n00:07:43,720 --> 00:07:45,010\nCuz it's all done from one place.\n\n152\n00:07:45,010 --> 00:07:48,197\nBut anytime they've got a problem they\nall call back to headquarters, and\n\n153\n00:07:48,197 --> 00:07:49,573\nthey get their problem solved.\n\n154\n00:07:49,573 --> 00:07:54,867\n>> Now where that starts to break down is\nas your company grows and gets bigger and\n\n155\n00:07:54,867 --> 00:07:59,275\nbigger, your IT department has\nto grow to compensate for that.\n\n156\n00:07:59,275 --> 00:08:02,571\nAnd when your entire IT\ndepartment is in one area,\n\n157\n00:08:02,571 --> 00:08:05,680\nthe remotes can start to suffer, right?\n\n158\n00:08:05,680 --> 00:08:09,680\nBecause they're having to come back across\nWAN links to get your headquarters, and\n\n159\n00:08:09,680 --> 00:08:12,080\nWAN links are never as fast as LAN.\n\n160\n00:08:12,080 --> 00:08:17,570\nAnd if you've got someone here in the US\nthat's trying to support somebody\n\n161\n00:08:17,570 --> 00:08:25,100\nin say Singapore, or Vietnam,\nor Australia for that matter.\n\n162\n00:08:25,100 --> 00:08:29,920\nWay down here, China, any of these other\nplaces, now you've got time zone problems.\n\n163\n00:08:30,970 --> 00:08:34,694\nAnd now you've got to have employees\nworking at different shifts to be\n\n164\n00:08:34,694 --> 00:08:37,674\navailable to cover those times,\nand they're remote.\n\n165\n00:08:37,674 --> 00:08:39,137\nWhat if the problem is\nthat the WIN link is down?\n\n166\n00:08:39,137 --> 00:08:40,457\n>> Exactly.\n\n167\n00:08:40,457 --> 00:08:44,434\nThat becomes a huge problem because now it\nreally needs somebody at that other end\n\n168\n00:08:44,434 --> 00:08:46,300\nthat can help me fix that problem.\n\n169\n00:08:46,300 --> 00:08:50,430\nSo, I'm trying to pick the one person\nI know that works in that office that\n\n170\n00:08:50,430 --> 00:08:51,970\nmight have a little bit of skills.\n\n171\n00:08:51,970 --> 00:08:54,210\nI'm trying to walk them through something.\n\n172\n00:08:54,210 --> 00:08:55,600\nBecomes a real problem.\n\n173\n00:08:55,600 --> 00:08:59,790\n>> So, as your organization grows, the\ncentralized IT model starts to break down\n\n174\n00:09:01,020 --> 00:09:05,680\nand at that point, you'll start\nto go to a decentralized model.\n\n175\n00:09:05,680 --> 00:09:10,614\nWhere you might have some IT\nresources here at your headquarters,\n\n176\n00:09:10,614 --> 00:09:15,474\nbut you've got IT resources out\nat your various other areas too.\n\n177\n00:09:15,474 --> 00:09:20,733\nAnd what you may do is not have\na centralized IT department at all,\n\n178\n00:09:20,733 --> 00:09:26,758\nbut that each branch maintains their\nown IT personnel responsible just for\n\n179\n00:09:26,758 --> 00:09:27,920\nthat branch.\n\n180\n00:09:29,430 --> 00:09:33,290\nAnd when we have somebody responsible for\njust one branch,\n\n181\n00:09:33,290 --> 00:09:37,780\nwe need to make sure that no changes\nthey make affect any other branch.\n\n182\n00:09:39,160 --> 00:09:45,490\nIf I have one domain, and that domain\nspans across all of my branches\n\n183\n00:09:46,920 --> 00:09:50,700\nand a user over here in\nthe Australia branch decides,\n\n184\n00:09:50,700 --> 00:09:54,932\nhey, that default administrator account,\nI wanna rename it.\n\n185\n00:09:54,932 --> 00:09:58,340\nI'm follow security best practice,\nI'm gonna rename it to something else so\n\n186\n00:09:58,340 --> 00:10:00,350\nit's not a predictable user account name.\n\n187\n00:10:00,350 --> 00:10:01,770\nWhich is a good idea.\n\n188\n00:10:01,770 --> 00:10:03,318\nSo, they make that change.\n\n189\n00:10:03,318 --> 00:10:06,589\nWell, it's one domain\nacross all the branches.\n\n190\n00:10:06,589 --> 00:10:11,099\nAnd so, all the other branches, if they've\nbroken the rules and did something bad\n\n191\n00:10:11,099 --> 00:10:15,561\nlike use that administrator account\nsomewhere ,that's going to stop working.\n\n192\n00:10:15,561 --> 00:10:17,670\nThey're not gonna be able to\nlog in as that account anymore.\n\n193\n00:10:17,670 --> 00:10:20,959\nThat change has affected\nmore than one branch.\n\n194\n00:10:20,959 --> 00:10:26,156\nSo, in a decentralized model like this,\nwe have to take extra precautions\n\n195\n00:10:26,156 --> 00:10:31,590\nwhen we apply what's called,\nThe Principle of Lease Privileged.\n\n196\n00:10:31,590 --> 00:10:33,105\n>> Favorite of Microsoft's, eh?\n\n197\n00:10:33,105 --> 00:10:34,730\n[LAUGH]\n>> Yeah, they push that from there,\n\n198\n00:10:34,730 --> 00:10:37,500\ntheir low end classes all the way\nto their high end classes,\n\n199\n00:10:37,500 --> 00:10:39,400\nit's a concept you hear repeatedly.\n\n200\n00:10:39,400 --> 00:10:43,630\nNever give someone more access\nthan they absolutely need.\n\n201\n00:10:43,630 --> 00:10:47,940\nSo, if I have somebody who I want to be\nan administrator over just Australia,\n\n202\n00:10:49,280 --> 00:10:50,420\nI need a plan for\n\n203\n00:10:50,420 --> 00:10:54,280\nhow I'm gonna handle those permissions,\nhow I'm gonna give them that access.\n\n204\n00:10:54,280 --> 00:10:56,580\nAnd you have choices.\n\n205\n00:10:56,580 --> 00:11:00,332\nWe could have one domain and\nuse organizational units and\n\n206\n00:11:00,332 --> 00:11:05,036\njust give them administrative control\nover the organizational unit.\n\n207\n00:11:05,036 --> 00:11:08,432\n>> Yeah, most likely at this point we're\nnot using any of those built in groups or\n\n208\n00:11:08,432 --> 00:11:09,370\nanything like that.\n\n209\n00:11:09,370 --> 00:11:10,637\nWe're creating our own groups and\n\n210\n00:11:10,637 --> 00:11:13,089\nwe're giving them just the permission\nthey need to do their jobs.\n\n211\n00:11:13,089 --> 00:11:16,147\n>> Yeah, and if we deploy any\nservers out of that branch,\n\n212\n00:11:16,147 --> 00:11:20,471\nwe just make sure that those are in that\nsame organizational unit structure so\n\n213\n00:11:20,471 --> 00:11:25,279\nthe IT department down here in Australia\nhas control over the Australian resources.\n\n214\n00:11:26,480 --> 00:11:29,650\nBut, because it's a shared domain,\n\n215\n00:11:29,650 --> 00:11:34,530\nwe probably wouldn't allow them access\nto domain administer credentials\n\n216\n00:11:34,530 --> 00:11:37,630\nbecause then they could make\na change across the entire board.\n\n217\n00:11:37,630 --> 00:11:42,190\nSo, what we would maintain in that\ntype of an environment is where our\n\n218\n00:11:42,190 --> 00:11:47,330\nheadquarters still has control\nof the domain itself and\n\n219\n00:11:47,330 --> 00:11:50,530\nour branches have control\nof the smaller pieces.\n\n220\n00:11:50,530 --> 00:11:52,970\nThat is called a hybrid model, right?\n\n221\n00:11:52,970 --> 00:11:56,750\nBecause it's centralized in terms\nof managing the active directory,\n\n222\n00:11:56,750 --> 00:12:00,530\nit's decentralized in terms of managing\nuser accounts and servers and so on,\n\n223\n00:12:00,530 --> 00:12:02,140\nin each of the different locations.\n\n224\n00:12:02,140 --> 00:12:04,670\nWe have IT personnel at\nthe branch that does that.\n\n225\n00:12:04,670 --> 00:12:05,810\nSo it's hybrid, all right?\n\n226\n00:12:05,810 --> 00:12:08,690\n>> Yeah, it's almost like\nsetting up a hierarchy of IT.\n\n227\n00:12:08,690 --> 00:12:11,210\nSo you got your each\nlocation has their IT that's\n\n228\n00:12:11,210 --> 00:12:14,980\nmaybe full control over that particular\nlocation, no control anywhere else.\n\n229\n00:12:14,980 --> 00:12:18,470\nBut then at headquarters you've\ngot your top level IT group and\n\n230\n00:12:18,470 --> 00:12:20,820\nthey've got full control over\nthe entire organization.\n\n231\n00:12:22,400 --> 00:12:25,740\n>> Now if we wanted to go\ntrue decentralized, right?\n\n232\n00:12:25,740 --> 00:12:28,550\nWhere the IT administrator\nin Australia can do whatever\n\n233\n00:12:28,550 --> 00:12:31,870\nthe heck they want with their machines and\nhave full administrative access and\n\n234\n00:12:31,870 --> 00:12:35,040\nall of that, but\nnot be able to affect the other branches.\n\n235\n00:12:35,040 --> 00:12:37,500\nWell, we can't achieve that, or\n\n236\n00:12:37,500 --> 00:12:40,450\nat least you can't achieve it easily,\nwith a single domain.\n\n237\n00:12:40,450 --> 00:12:43,540\n>> That's when you're moving\nthat multi-domain forest.\n\n238\n00:12:43,540 --> 00:12:46,400\n>> You go multiple domain based on\nyour administrative boundaries.\n\n239\n00:12:46,400 --> 00:12:49,589\nReally, administrative boundaries are\nthe only reason to have domains anymore.\n\n240\n00:12:49,589 --> 00:12:50,952\nThere used to be other reasons,\n\n241\n00:12:50,952 --> 00:12:53,510\nnow it really just boils\ndown to these boundaries.\n\n242\n00:12:53,510 --> 00:12:55,360\nSo if I want them to have full control,\n\n243\n00:12:55,360 --> 00:12:58,530\nif they wanna ruin their network they\ncan they have total access to everything\n\n244\n00:12:58,530 --> 00:13:00,630\nthey need,\nI would put them in their own domain.\n\n245\n00:13:01,770 --> 00:13:04,870\nAnd then the other areas I would\ndivide up into their own domains.\n\n246\n00:13:04,870 --> 00:13:08,950\nNow, that might be done\non a per-branch basis, so\n\n247\n00:13:08,950 --> 00:13:12,650\nif I have five branches in Australia I\nmight have five different domains.\n\n248\n00:13:12,650 --> 00:13:17,901\nIf there's IT personnel at every branch,\nbut often times, that's not the case.\n\n249\n00:13:17,901 --> 00:13:22,337\nFor example,\nmaybe to better support South America,\n\n250\n00:13:22,337 --> 00:13:25,290\nI put a data center here in Brazil.\n\n251\n00:13:25,290 --> 00:13:28,110\nIt'll be our branch, but\nI'll put it in Brazil.\n\n252\n00:13:28,110 --> 00:13:29,380\n>> Right.\n>> And\n\n253\n00:13:29,380 --> 00:13:33,340\nthe reason I'm picking Brazil is it's\na really big country first off, and\n\n254\n00:13:33,340 --> 00:13:36,320\nI know that most of the people\nthere speak Spanish and Portuguese.\n\n255\n00:13:36,320 --> 00:13:39,190\nAnd since the rest of\nSouth America speaks Spanish,\n\n256\n00:13:39,190 --> 00:13:44,130\nnow I can get native language IT personnel\nright there to support this continent.\n\n257\n00:13:44,130 --> 00:13:47,930\nAnd that's gonna be better than whatever\nI could provide out of my headquarters.\n\n258\n00:13:47,930 --> 00:13:49,772\n>> Right.\n>> All right, although in Florida,\n\n259\n00:13:49,772 --> 00:13:53,470\nthere's no shortage of people who speak\nSpanish here but Portuguese not so much.\n\n260\n00:13:53,470 --> 00:13:54,500\n>> Not so much.\n\n261\n00:13:54,500 --> 00:13:56,740\n>> So that'd be a great place\nto stick a data center.\n\n262\n00:13:56,740 --> 00:14:00,830\nI could even put servers down there,\ndomain controllers, DNS,\n\n263\n00:14:00,830 --> 00:14:03,900\nDFS, all the various resources\nin my organization, and\n\n264\n00:14:03,900 --> 00:14:08,170\nnow people are just accessing servers\nright there on the same continent\n\n265\n00:14:08,170 --> 00:14:12,790\ninstead of having to jump up here to\nthe US or somewhere else to get at them.\n\n266\n00:14:12,790 --> 00:14:15,830\nSo, it makes sense to put\na data center down there.\n\n267\n00:14:15,830 --> 00:14:22,170\nSo, let's say as an example that anywhere\nyou see a circle is a data center.\n\n268\n00:14:22,170 --> 00:14:27,620\nSo, some of my remote branches might be\na data center and some of them might not.\n\n269\n00:14:27,620 --> 00:14:32,311\nSo maybe I've got five data\ncenters that are spread\n\n270\n00:14:32,311 --> 00:14:35,922\nacross my primary continents, okay.\n\n271\n00:14:35,922 --> 00:14:41,220\nYou know, Africa is one of the largest,\nor is it the largest continent?\n\n272\n00:14:41,220 --> 00:14:43,703\n>> It's close, I think Asia tops\nout there, I think, pretty close.\n\n273\n00:14:43,703 --> 00:14:47,161\n>> It's pretty big but there's not\na lot of IT infrastructure there, so\n\n274\n00:14:47,161 --> 00:14:49,982\nmost organizations don't put\na data assignment there.\n\n275\n00:14:49,982 --> 00:14:53,612\nBut even if you do, it's usually up\nhere in North Africa or Kenya, actually,\n\n276\n00:14:53,612 --> 00:14:56,967\nhas a really good IT infrastructure,\nso you can go into Kenya there, but\n\n277\n00:14:56,967 --> 00:15:00,380\nwe'll just put these down here for\nnow, because this is pretty typical.\n\n278\n00:15:01,380 --> 00:15:04,160\nSo now,\nregardless of which continent you're in,\n\n279\n00:15:04,160 --> 00:15:08,091\nyou've got a pretty good connection\nto a data center that isn't nearby.\n\n280\n00:15:08,091 --> 00:15:11,006\nAnd, at that data center,\nI could remotely manage it,\n\n281\n00:15:11,006 --> 00:15:14,120\nbut I'll probably want to have\nIT personnel that is there.\n\n282\n00:15:15,440 --> 00:15:19,440\nSo, this branch in Brazil is\nprobably pretty well staffed, but\n\n283\n00:15:19,440 --> 00:15:24,380\nmaybe I have a branch down in Argentina or\nChile or somewhere like that and\n\n284\n00:15:24,380 --> 00:15:27,640\nI don't necessarily want to\nhave a full IT staff there.\n\n285\n00:15:27,640 --> 00:15:30,310\nBut I want to allow the Argentinian,\n\n286\n00:15:30,310 --> 00:15:33,560\nI mean the Brazilian branch\nto be able to manage that.\n\n287\n00:15:33,560 --> 00:15:36,210\nSo I might divide things up into regions.\n\n288\n00:15:36,210 --> 00:15:41,483\nI might say, for example, that,\nlet's see, where is something I can use?\n\n289\n00:15:41,483 --> 00:15:42,993\n[LAUGH] It's like it Mike.\n\n290\n00:15:42,993 --> 00:15:45,247\n>> [LAUGH]\n>> So there we go.\n\n291\n00:15:45,247 --> 00:15:50,347\nSo if I say, for example, that I\ndefine this region of South America,\n\n292\n00:15:50,347 --> 00:15:54,150\nthat dropped nowhere near\nwhere I tried to put it, so\n\n293\n00:15:54,150 --> 00:15:59,856\nI'll define this down here as a region,\nand in that region, I may have it set so\n\n294\n00:15:59,856 --> 00:16:04,805\nthat You know the Brazilian data\ncenter is in charge of that, okay.\n\n295\n00:16:04,805 --> 00:16:08,530\nAnd now I might have one domain that spans\nSouth America with multiple branches in\n\n296\n00:16:08,530 --> 00:16:11,040\nit, and\nthis IT department is running the show.\n\n297\n00:16:11,040 --> 00:16:12,880\nThey have full control of their domain.\n\n298\n00:16:12,880 --> 00:16:13,910\nThey are domain admins.\n\n299\n00:16:13,910 --> 00:16:14,950\nThey can do whatever the heck they want.\n\n300\n00:16:16,860 --> 00:16:17,980\nRight?\n\n301\n00:16:17,980 --> 00:16:22,910\nBut over here in Australia,\nthey have their own domain, right?\n\n302\n00:16:22,910 --> 00:16:27,300\nAnd I take Asia and\ndo the same thing, and Europe right?\n\n303\n00:16:27,300 --> 00:16:32,035\nSo I'm just kinda dividing things\nup into administrative regions.\n\n304\n00:16:32,035 --> 00:16:38,215\nAnd these administrative regions allow me\nto insulate changes to particular areas.\n\n305\n00:16:38,215 --> 00:16:43,910\nAnd that's gonna be very valuable to me,\nto ensure that false don't happen.\n\n306\n00:16:43,910 --> 00:16:48,390\nSo, we may manage this one just right\nout in the bar [INAUDIBLE] there, and\n\n307\n00:16:48,390 --> 00:16:53,080\nnow I'm divided my company up\ninto five regions, five domains.\n\n308\n00:16:53,080 --> 00:16:55,860\nNow, I might have a parent domain for\nNorth America,\n\n309\n00:16:55,860 --> 00:16:59,800\nsince that's where my headquarters is,\nand then do child domains for all these.\n\n310\n00:16:59,800 --> 00:17:00,750\nRight.\n\n311\n00:17:00,750 --> 00:17:04,540\nOr, I might just have\nfive trees in the forest.\n\n312\n00:17:04,540 --> 00:17:07,350\nI might even go a little bit further, and\n\n313\n00:17:07,350 --> 00:17:12,220\nsay HQ will actually have its own domain.\n\n314\n00:17:13,370 --> 00:17:15,979\nSo, it may be the enterprise route.\n\n315\n00:17:18,270 --> 00:17:22,640\nAnd then you've got this other\ndomain that covers North America.\n\n316\n00:17:22,640 --> 00:17:28,120\nThat's really common where you've got a\ncompany that has a IT department just for\n\n317\n00:17:28,120 --> 00:17:30,050\nthe data center at headquarters.\n\n318\n00:17:30,050 --> 00:17:32,850\nAnd then a separate IT department\n\n319\n00:17:32,850 --> 00:17:35,660\nthat's managing the branches\nout there in the country.\n\n320\n00:17:35,660 --> 00:17:37,660\nIf you've got a large organization\nthat's a pretty common model.\n\n321\n00:17:37,660 --> 00:17:40,520\n>> Yeah, I remember we talked\nabout in the MCSA track that\n\n322\n00:17:40,520 --> 00:17:41,780\nfour screws kind of special.\n\n323\n00:17:41,780 --> 00:17:46,000\nIt's got those enterprise admins, and they\nhave full control over that entire forest,\n\n324\n00:17:46,000 --> 00:17:47,920\nso we might want to segregate that out.\n\n325\n00:17:47,920 --> 00:17:48,640\n>> Yeah.\n\n326\n00:17:48,640 --> 00:17:50,270\nAnd you know, we're going big scale here.\n\n327\n00:17:50,270 --> 00:17:51,340\nGlobal, right?\n\n328\n00:17:51,340 --> 00:17:54,090\nLet's look at this from\nthe perspective of a smaller scale.\n\n329\n00:17:54,090 --> 00:17:57,940\nHere in the United States, most of our\nstates are divided up into counties.\n\n330\n00:17:57,940 --> 00:17:59,810\n>> Right.\n>> And the school boards for\n\n331\n00:17:59,810 --> 00:18:04,270\nour public education system\nis managed at a county level.\n\n332\n00:18:04,270 --> 00:18:06,220\nSo every county runs their own schools,\nand\n\n333\n00:18:06,220 --> 00:18:10,050\nevery county has their own IT\ninfrastructure that's at the county level.\n\n334\n00:18:10,050 --> 00:18:12,760\nAll right, so\nthey run the county services.\n\n335\n00:18:12,760 --> 00:18:16,680\nBut then, they might have a hundred,\ntwo hundred schools in that county, and\n\n336\n00:18:16,680 --> 00:18:21,830\nif they do, what they'll have are teams\nof IT personnel that will cover four or\n\n337\n00:18:21,830 --> 00:18:22,920\nfive schools.\n\n338\n00:18:22,920 --> 00:18:26,070\nAnd those rotate between the schools\neach day doing their IT work.\n\n339\n00:18:26,070 --> 00:18:30,510\nAnd so we can have divisions like these\nwithin something as small as a county.\n\n340\n00:18:30,510 --> 00:18:31,150\nRight?\n\n341\n00:18:31,150 --> 00:18:36,850\nAnd a county might span three or\nfour major cities, maybe ten minor cities.\n\n342\n00:18:36,850 --> 00:18:39,220\nIt's not a giant area.\n\n343\n00:18:39,220 --> 00:18:40,865\nSo In an environment like that,\n\n344\n00:18:40,865 --> 00:18:44,165\nit would be very similar to what I've\ndrawn here, you have one IT department for\n\n345\n00:18:44,165 --> 00:18:48,345\nthat county office, and then you have IT\npersonnel that roamed around the branches.\n\n346\n00:18:48,345 --> 00:18:49,815\nTwo separate teams.\n\n347\n00:18:49,815 --> 00:18:53,675\nAnd the branch people need to\nhave control at the branches, but\n\n348\n00:18:53,675 --> 00:18:54,995\nnot back at headquarters.\n\n349\n00:18:54,995 --> 00:18:57,345\nAnd having that separate\ndomain lets us do that.\n\n350\n00:18:57,345 --> 00:19:01,225\nWe also need to remember that we've got\nthat first domain in the active directory,\n\n351\n00:19:01,225 --> 00:19:06,970\nwhich is our forest root that has\nenterprise admins, game admins,\n\n352\n00:19:06,970 --> 00:19:12,860\nthat special stuff ,and I might not want\nthe north america guys to have that.\n\n353\n00:19:12,860 --> 00:19:14,500\nJust because the headquarters\nis in North America,\n\n354\n00:19:14,500 --> 00:19:17,540\ndoesn't mean I want the North American\nguys running the whole organization.\n\n355\n00:19:18,730 --> 00:19:22,780\nSo, that's another reason we might\nbranch that out into it's own domain.\n\n356\n00:19:22,780 --> 00:19:26,930\nAll of this is built for\ndelegation, right?\n\n357\n00:19:26,930 --> 00:19:31,070\nAnd it's all about giving\nadditional people access.\n\n358\n00:19:31,070 --> 00:19:35,560\nSo in a truly decentralized environment,\nwe've got separate domains and\n\n359\n00:19:35,560 --> 00:19:38,520\nwe will likely have separate servers.\n\n360\n00:19:38,520 --> 00:19:47,500\nIf you have a share point environment that\nhas a, some kind of work flow software,\n\n361\n00:19:47,500 --> 00:19:51,615\noffice automation, whatever your primary\nbusiness use scenario is, right?\n\n362\n00:19:51,615 --> 00:19:54,520\n>> [LAUGHS]\n>> That I want everybody to be able to use\n\n363\n00:19:54,520 --> 00:19:56,030\nthis application.\n\n364\n00:19:56,030 --> 00:19:59,280\nBut I want them to access it from servers\nthat are geographically close to them, so\n\n365\n00:19:59,280 --> 00:19:59,845\nit's faster.\n\n366\n00:19:59,845 --> 00:20:00,390\n>> Mm-hm.\n\n367\n00:20:00,390 --> 00:20:03,790\n>> So, my SharePoint installation\nmight be distributed.\n\n368\n00:20:03,790 --> 00:20:07,620\nI might have SharePoint servers\nat each of these datacenters.\n\n369\n00:20:07,620 --> 00:20:11,360\nPeople are accessing that, and\nthat particular SharePoint server,\n\n370\n00:20:11,360 --> 00:20:12,810\ndown here in Australia.\n\n371\n00:20:12,810 --> 00:20:13,805\nThose guys can manage it.\n\n372\n00:20:13,805 --> 00:20:15,000\n>> Mm-hm.\n\n373\n00:20:15,000 --> 00:20:17,029\n>> But\nnow I have an additional problem which is.\n\n374\n00:20:18,210 --> 00:20:21,790\nIf it's all the same SharePoint\nenvironment, if it's replicating between\n\n375\n00:20:21,790 --> 00:20:26,190\nthem, and somebody makes a change in\none area, will that affect the others?\n\n376\n00:20:26,190 --> 00:20:27,620\nIt can.\n>> Yes.\n\n377\n00:20:27,620 --> 00:20:30,940\n>> So often times you want them to be\nan administrator on the physical server,\n\n378\n00:20:30,940 --> 00:20:34,040\nso that they can reboot it,\ndo updates and stuff like that.\n\n379\n00:20:36,228 --> 00:20:38,973\n>> But you don't want them to be\nan administrator Inside of Share-point,\n\n380\n00:20:38,973 --> 00:20:41,480\nwhere they can cause damage\nthat would spread out.\n\n381\n00:20:41,480 --> 00:20:43,360\nThat's where things get\nreally challenging.\n\n382\n00:20:43,360 --> 00:20:45,420\nThis domain model here is\nreally simple to understand.\n\n383\n00:20:45,420 --> 00:20:46,820\nIt's kind of common sense, right?\n\n384\n00:20:46,820 --> 00:20:54,620\nBut we've gotta remember to go into our\napplications, and tune security there too.\n\n385\n00:20:54,620 --> 00:20:59,260\n>> I am a modest person, but\nI am willing to say something,\n\n386\n00:20:59,260 --> 00:21:02,840\nI am pretty good when it\ncomes to active directory.\n\n387\n00:21:02,840 --> 00:21:07,090\nI know my way around the active directory,\nfrom years and years of working with it\n\n388\n00:21:07,090 --> 00:21:12,140\nnow, and It's pretty safe to give\nme control of an active directory.\n\n389\n00:21:12,140 --> 00:21:13,150\nRight?\n\n390\n00:21:13,150 --> 00:21:15,300\nBut you take a technology like SharePoint.\n\n391\n00:21:16,430 --> 00:21:16,980\n>> Right.\n\n392\n00:21:16,980 --> 00:21:22,880\n>> I can build you a scalable, stable,\nreliable, SharePoint deployment from\n\n393\n00:21:22,880 --> 00:21:26,260\none to 100 servers, I can deal with that\n>> But\n\n394\n00:21:26,260 --> 00:21:29,320\nyou put me in that user interface for\nSharePoint, right?\n\n395\n00:21:29,320 --> 00:21:30,010\nI can't do crap.\n\n396\n00:21:30,010 --> 00:21:34,330\nI can't make the first form,\nI can't integrate Excel data into it.\n\n397\n00:21:34,330 --> 00:21:38,735\nThat gets out of my domain,\nmy knowledge area.\n\n398\n00:21:38,735 --> 00:21:41,665\nAnd so, while yeah I can run\nyour SharePoint servers.\n\n399\n00:21:41,665 --> 00:21:42,715\nI can run your active directory.\n\n400\n00:21:42,715 --> 00:21:44,075\nI can get that infrastructure in place.\n\n401\n00:21:44,075 --> 00:21:45,075\nI'm good at that.\n\n402\n00:21:46,665 --> 00:21:49,815\nI'm not good at actually\nusing the real application,\n\n403\n00:21:49,815 --> 00:21:51,980\nyou know the SharePoint client side.\n\n404\n00:21:51,980 --> 00:21:54,660\nThat user interface, out of my skill set.\n\n405\n00:21:54,660 --> 00:21:59,270\nSo we need to remember that just because\nyou might make me a domain administrator\n\n406\n00:21:59,270 --> 00:22:01,290\nright, so I can manage the domain.\n\n407\n00:22:01,290 --> 00:22:05,500\nI don't need to have full rights and\npermissions inside a SharePoint.\n\n408\n00:22:05,500 --> 00:22:07,760\nI might need permissions\nto do backups of it.\n\n409\n00:22:07,760 --> 00:22:10,100\n>> Right.\n>> And restores and tune the SQL server,\n\n410\n00:22:10,100 --> 00:22:10,672\nor whatever.\n\n411\n00:22:10,672 --> 00:22:13,380\nBut I don't need access\nto the data itself.\n\n412\n00:22:13,380 --> 00:22:16,480\nSo, don't just worry about\npermissions at the high level,\n\n413\n00:22:16,480 --> 00:22:19,192\nlike at the domain, worry about\nthem inside of the applications.\n\n414\n00:22:19,192 --> 00:22:20,660\nUm-huh, right.\n\n415\n00:22:20,660 --> 00:22:23,570\nSo, we're gonna see it as kind\nof a recurring theme throughout\n\n416\n00:22:23,570 --> 00:22:25,180\nthis whole certification.\n\n417\n00:22:25,180 --> 00:22:29,240\nThat we'll talk about all the amazing\nthings that System Center can do, and\n\n418\n00:22:29,240 --> 00:22:32,590\nall the amazing ways that we can\nmanage and control our environment.\n\n419\n00:22:32,590 --> 00:22:37,070\nBut at the end of the day, you don't want\neverybody to have access to everything, so\n\n420\n00:22:37,070 --> 00:22:41,960\nyou've got to dole it out piecemeal, and\nsay, if you're SharePoint admin, I want\n\n421\n00:22:41,960 --> 00:22:45,620\nyou to be able to monitor SharePpoint\nservers, and not any other circumstance.\n\n422\n00:22:45,620 --> 00:22:48,370\nYou need to be able to designate that.\n\n423\n00:22:48,370 --> 00:22:50,860\nSo, that's what Microsoft is basically\nhitting on when they talk about\n\n424\n00:22:50,860 --> 00:22:52,070\nthe administrative models.\n\n425\n00:22:52,070 --> 00:22:58,090\nRght, whether your\ncentralized,de-centralized, or a hybrid.\n\n426\n00:22:58,090 --> 00:23:00,750\nMost organizations do start\nout as centralized, and\n\n427\n00:23:00,750 --> 00:23:03,950\nthey grow and start expanding and\nstaying centralized, and\n\n428\n00:23:03,950 --> 00:23:07,910\nthen they grow enough that they\nmove into a hybrid type model.\n\n429\n00:23:07,910 --> 00:23:11,150\nA fully decentralized\nmodel is pretty uncommon.\n\n430\n00:23:11,150 --> 00:23:12,980\n>> You don't see that very often.\n\n431\n00:23:12,980 --> 00:23:16,750\n>> Yeah.\nThere's too much discordance I suppose.\n\n432\n00:23:16,750 --> 00:23:19,250\nYou'll see a true decentralized model,\n\n433\n00:23:19,250 --> 00:23:21,209\nusually in companies where there\nhave been a lot of acquisitions.\n\n434\n00:23:22,440 --> 00:23:28,160\nSo you take somebody like Symantec, where\nthey buy all of these other companies, and\n\n435\n00:23:28,160 --> 00:23:31,900\nit can be difficult to incorporate those\ntwo networks together, to merge them.\n\n436\n00:23:31,900 --> 00:23:34,270\nSo sometimes they just leave\nthem separate, separate teams,\n\n437\n00:23:34,270 --> 00:23:35,160\njust leave it separate, right?\n\n438\n00:23:35,160 --> 00:23:37,710\nYou get a lot of redundant\nemployees that way though, and\n\n439\n00:23:37,710 --> 00:23:42,030\nthat's why a lot of\norganizations don't do it.\n\n440\n00:23:42,030 --> 00:23:44,690\nSo, those are three primary\nadministrative models, and\n\n441\n00:23:44,690 --> 00:23:46,550\nthat's just something we need to\nstick in the back of our mind, and\n\n442\n00:23:46,550 --> 00:23:50,350\nyou can keep it there as we go\nthrough the rest of the training.\n\n443\n00:23:50,350 --> 00:23:52,506\nWe've got some more things that\nwe need to talk about, but\n\n444\n00:23:52,506 --> 00:23:54,410\nwe are running a little low\non time in this segment.\n\n445\n00:23:54,410 --> 00:23:58,539\nSo, we'll stop here and take a break,\nand when we get back we're going to talk\n\n446\n00:23:58,539 --> 00:24:01,746\na little bit more about delegations,\nand our plan for that.\n\n447\n00:24:01,746 --> 00:24:03,764\nSo stay tuned, we'll be back after this.\n\n448\n00:24:03,764 --> 00:24:11,969\n[MUSIC]\n\n449\n00:24:11,969 --> 00:24:16,219\nAll right, so in our first segment we took\na look at the administrative models and\n\n450\n00:24:16,219 --> 00:24:19,611\nI kind of led into the whole idea\nof delegating permissions out.\n\n451\n00:24:19,611 --> 00:24:23,960\nAnd I'm pretty sure I even threw in\na warning about default groups in there.\n\n452\n00:24:23,960 --> 00:24:25,690\n>> Yes.\n>> Which in part is me\n\n453\n00:24:25,690 --> 00:24:28,820\ngetting ahead of myself because that's the\nnext thing that we're gonna talk about.\n\n454\n00:24:28,820 --> 00:24:31,560\nWhen we start designing our structure,\n\n455\n00:24:31,560 --> 00:24:34,790\nwe have to plan to basically\nhand out permissions to people.\n\n456\n00:24:34,790 --> 00:24:37,550\nBut you've gotta be careful\nabout how you do that and\n\n457\n00:24:37,550 --> 00:24:40,020\nthere's two main things that\nwe need to worry about.\n\n458\n00:24:40,020 --> 00:24:43,700\nThe first thing we need to worry about\nare what's called user rights assignments.\n\n459\n00:24:44,980 --> 00:24:49,210\nInside of Windows, we have permissions and\npermissions normally apply to files,\n\n460\n00:24:49,210 --> 00:24:51,338\nfolders, printers.\n\n461\n00:24:51,338 --> 00:24:55,740\n>> I always say permissions apply over\na single object of some kind, like I can\n\n462\n00:24:55,740 --> 00:25:00,370\nread this file or delete that folder,\nor whatever, install a printer driver.\n\n463\n00:25:00,370 --> 00:25:02,439\n>> Yeah,\nthose are our securable objects and\n\n464\n00:25:02,439 --> 00:25:05,760\nthat's what we normally think\nabout when we do permissions.\n\n465\n00:25:05,760 --> 00:25:09,810\nBut there's also user rights,\nwhich a right is not so\n\n466\n00:25:09,810 --> 00:25:15,410\nmuch something that you have access to,\nbut like an ability that you can perform.\n\n467\n00:25:15,410 --> 00:25:19,380\n>> Yeah, it's usually a system-wide\npermission, if you wanna say that word.\n\n468\n00:25:19,380 --> 00:25:22,150\nBut yeah, I usually think permissions\nare over single objects and\n\n469\n00:25:22,150 --> 00:25:23,480\nthen rights are usually system-wide.\n\n470\n00:25:23,480 --> 00:25:25,850\nLike I have the ability to log on locally,\nor\n\n471\n00:25:25,850 --> 00:25:28,690\nI have the ability to reboot that server.\n\n472\n00:25:28,690 --> 00:25:31,030\n>> So, let's run with that one,\nreboot a server.\n\n473\n00:25:31,030 --> 00:25:32,360\nReboot a server's a pretty big deal.\n\n474\n00:25:32,360 --> 00:25:36,540\nNow if you're responsible for a physical\nserver you will likely need permission to\n\n475\n00:25:36,540 --> 00:25:38,170\nreboot at some point or another.\n\n476\n00:25:38,170 --> 00:25:40,390\nMaybe you made some hardware change to it.\n\n477\n00:25:40,390 --> 00:25:42,870\nYou installed an updated driver and\nit says you must reboot for\n\n478\n00:25:42,870 --> 00:25:43,970\nthis to take effect.\n\n479\n00:25:43,970 --> 00:25:48,010\nWell if you don't have the user right\nto reboot it then you're not going to\n\n480\n00:25:48,010 --> 00:25:49,070\nbe able to do that.\n\n481\n00:25:49,070 --> 00:25:51,700\nNow we can issue out those\nrights individually.\n\n482\n00:25:51,700 --> 00:25:56,850\nSo you can be very, very specific\nabout the rights that we give, but\n\n483\n00:25:56,850 --> 00:25:58,010\nwe don't normally do that, right?\n\n484\n00:25:58,010 --> 00:26:02,090\nWe normally give people permissions\nby using some of the built in groups\n\n485\n00:26:02,090 --> 00:26:05,130\nthat comer along with\nthe Active Directory in Windows Server.\n\n486\n00:26:05,130 --> 00:26:09,219\nAnd those groups in turn will give people\nthe right to be able to perform things.\n\n487\n00:26:09,219 --> 00:26:14,233\nThe two I always worry about are, well\nthere's reboot server, but log on locally,\n\n488\n00:26:14,233 --> 00:26:18,413\nnow that's another one and\nchange the time on the server, all right?\n\n489\n00:26:18,413 --> 00:26:21,121\nBecause changing the time\non the server can result\n\n490\n00:26:21,121 --> 00:26:24,613\nin all sorts of bad things happening\nif it's not done properly.\n\n491\n00:26:24,613 --> 00:26:30,499\nI can't tell you how many times\nI've see a server that was set for\n\n492\n00:26:30,499 --> 00:26:36,630\nthe Pacific time zone in the US,\nwhich is GMT minus eight, right?\n\n493\n00:26:36,630 --> 00:26:40,730\nAnd the server's over here on the East\nCoast, which is in the Eastern time zone\n\n494\n00:26:40,730 --> 00:26:44,810\nshould be GMT minus five, so\nthe clock's off by three hours.\n\n495\n00:26:44,810 --> 00:26:47,347\nHow do you fix that?\nYou just change the timezone.\n\n496\n00:26:47,347 --> 00:26:50,381\nYou don't need to be a crazy admin to\ndo something like that on a client,\n\n497\n00:26:50,381 --> 00:26:52,364\non a server you need to be\nable to get in to do it.\n\n498\n00:26:52,364 --> 00:26:56,673\nBut you just change the timezone, but\nI can't tell you how many times I've seen\n\n499\n00:26:56,673 --> 00:26:59,770\nan actual administrator set\nthe clock back three hours.\n\n500\n00:26:59,770 --> 00:27:03,866\nAnd all of a sudden you can't log into\nthe domain you know any IPsec you're doing\n\n501\n00:27:03,866 --> 00:27:05,900\nfails and it wreaks all sorts of havoc.\n\n502\n00:27:05,900 --> 00:27:11,572\nSo I guess the moral of the story is don't\ngive user rights to idiots [LAUGH] but\n\n503\n00:27:11,572 --> 00:27:14,691\nsometimes that's beyond your control.\n\n504\n00:27:14,691 --> 00:27:18,450\nSo we just need to make sure\nwe're very specific about it.\n\n505\n00:27:18,450 --> 00:27:22,283\nThat if you have somebody who's\nresponsible for one server, and\n\n506\n00:27:22,283 --> 00:27:27,160\nthey need to be able to reboot the server,\ndon't put them in some kind of domain role\n\n507\n00:27:27,160 --> 00:27:31,550\nthat would let them reboot any server,\nput them in a role that just lets them\n\n508\n00:27:31,550 --> 00:27:36,410\nreboot that one particular server, the\nservers that falls under their purview.\n\n509\n00:27:36,410 --> 00:27:40,900\nYou just don't want to go crazy with these\ntypes of things cuz it's heavy access.\n\n510\n00:27:40,900 --> 00:27:44,250\n>> It really all comes back to again\nto that principle of least privilege.\n\n511\n00:27:44,250 --> 00:27:47,360\nGiving them what they need to do their\njob but not giving them anything\n\n512\n00:27:47,360 --> 00:27:51,570\nelse because either accidentally or\nmaliciously somethings gonna go wrong.\n\n513\n00:27:51,570 --> 00:27:53,470\n>> Now Mike,\nyou've got a web page that you swear by.\n\n514\n00:27:53,470 --> 00:27:54,670\nI'm gonna bring this up here.\n\n515\n00:27:54,670 --> 00:27:56,235\nThis is one of Mike's favorite web pages.\n\n516\n00:27:56,235 --> 00:27:57,594\n>> [LAUGH]\n>> Well, favorite one we're\n\n517\n00:27:57,594 --> 00:27:58,557\nallowed to show on-\n>> I\n\n518\n00:27:58,557 --> 00:28:00,260\nwas gonna say the ones we\ncan show on TV here, yeah.\n\n519\n00:28:00,260 --> 00:28:03,245\n[LAUGH] Microsoft has always stressed,\n\n520\n00:28:03,245 --> 00:28:08,950\nthey've got these built in groups and\nthe built in groups are great.\n\n521\n00:28:08,950 --> 00:28:11,760\nIf you need to assign the permissions\nthat come along, or the rights I\n\n522\n00:28:11,760 --> 00:28:14,850\nshould say that come along with these\ngroups, then use them by all means.\n\n523\n00:28:14,850 --> 00:28:17,570\nBut we want to follow that principle\nof least privilege which means I\n\n524\n00:28:17,570 --> 00:28:22,300\nreally need to understand what comes\nalong with those built in groups.\n\n525\n00:28:22,300 --> 00:28:24,960\nBecause I think one of the first\nones they list in that list there is\n\n526\n00:28:24,960 --> 00:28:26,400\nthe account operators group.\n\n527\n00:28:26,400 --> 00:28:29,190\nSo maybe want to delegate\nto some administrator\n\n528\n00:28:29,190 --> 00:28:33,720\nthe ability to create new accounts and\nmaybe even limit it to a particular OU And\n\n529\n00:28:33,720 --> 00:28:37,200\noh hey, I want that sales manager but\nthey turn and burn sales people so\n\n530\n00:28:37,200 --> 00:28:40,040\nfast, I'm gonna let them\ncreate those accounts.\n\n531\n00:28:40,040 --> 00:28:43,910\nAnd I don't have to deal with the phone\ncalls of hey, we hired ten new people,\n\n532\n00:28:43,910 --> 00:28:46,180\noh we fired these three people,\nwhat have you.\n\n533\n00:28:46,180 --> 00:28:47,840\nSo I add them to the account\noperators group.\n\n534\n00:28:47,840 --> 00:28:51,090\nBut if we start looking at what\ncomes along with that group,\n\n535\n00:28:51,090 --> 00:28:55,020\nall of sudden they can log on\nto a domain controller locally.\n\n536\n00:28:55,020 --> 00:28:57,790\nAnd that's probably not\nsomething I was thinking of.\n\n537\n00:28:57,790 --> 00:29:02,410\nI was gonna build them a custom console,\na little MMC on their desktop that gave\n\n538\n00:29:02,410 --> 00:29:06,370\nthem access to a certain part of Active\nDirectory and limited what they could do.\n\n539\n00:29:06,370 --> 00:29:09,150\nNow all of a sudden they can go in and\nlog on to my domain controller.\n\n540\n00:29:09,150 --> 00:29:11,920\nIf they can log on, they can probably\nreboot the domain controller,\n\n541\n00:29:11,920 --> 00:29:13,890\nas a matter of fact, so not a good thing.\n\n542\n00:29:13,890 --> 00:29:17,300\n>> So the built in groups,\nthey're purpose built, right?\n\n543\n00:29:17,300 --> 00:29:20,056\nSo just like you said Mike, you want\nthem to be in an account operator,\n\n544\n00:29:20,056 --> 00:29:22,060\nyou want them to create accounts,\nsounds great.\n\n545\n00:29:22,060 --> 00:29:24,230\nBut there's other permissions\nthat come along with it.\n\n546\n00:29:24,230 --> 00:29:28,590\nAnd so Microsoft's best practice of\nthe principle of least privilege\n\n547\n00:29:28,590 --> 00:29:33,250\nis not always followed in the default\ngroups that are there, all right?\n\n548\n00:29:33,250 --> 00:29:34,730\nAnd you might have noticed\nat the very beginning,\n\n549\n00:29:34,730 --> 00:29:37,910\nthis article it's actually\nfrom Windows Server 2003.\n\n550\n00:29:37,910 --> 00:29:42,720\nBut these haven't changed, these default\ngroups are the same today in 2012 and\n\n551\n00:29:42,720 --> 00:29:45,760\nthey were the same before 2003 too.\n\n552\n00:29:45,760 --> 00:29:48,020\nSo, these are things that\nhave been around a while and\n\n553\n00:29:48,020 --> 00:29:53,650\nwe need to understand the built-in groups\nmay not be suitable for what we want.\n\n554\n00:29:53,650 --> 00:29:57,530\nWe might need to make our own that\nare far more specific, right?\n\n555\n00:29:57,530 --> 00:30:01,675\n>> That backup operators, there's another\none that you always see people using and\n\n556\n00:30:01,675 --> 00:30:05,090\nreally in most large organizations,\nwe split that responsibility.\n\n557\n00:30:05,090 --> 00:30:08,150\nWe don't want the same person\nto be able to do a backup and\n\n558\n00:30:08,150 --> 00:30:09,150\nbe able to do a restore.\n\n559\n00:30:09,150 --> 00:30:12,920\nToo many things they could do with that\npower, so we don't use that group.\n\n560\n00:30:12,920 --> 00:30:17,550\nWe create our own groups, and\nthen we delegate to those groups just\n\n561\n00:30:17,550 --> 00:30:21,000\nthe specific rights,\nthat we want that group to have.\n\n562\n00:30:21,000 --> 00:30:25,430\n>> Yeah, in Windows Remote Management has\ncome so far in really, just the last five\n\n563\n00:30:25,430 --> 00:30:29,338\nyears, with all of the WinRM, and\nthe the Powershell functionality,\n\n564\n00:30:29,338 --> 00:30:32,840\neven just the remote MMCs that\nwere introduced years ago.\n\n565\n00:30:32,840 --> 00:30:37,850\nThat makes it where people really have no\nbusiness logging into a domain controller.\n\n566\n00:30:37,850 --> 00:30:40,530\nEven administrators really shouldn't\nbe logging in locally to domain\n\n567\n00:30:40,530 --> 00:30:42,800\ncontrollers unless something\nhas really gone wrong.\n\n568\n00:30:42,800 --> 00:30:46,860\nThat we almost do everything from\nclients running on our desktop, so\n\n569\n00:30:46,860 --> 00:30:50,000\nwe don't need login locally,\nwe don't need to shut down a server.\n\n570\n00:30:50,000 --> 00:30:52,850\nYour typical help desk\npersonnel doesn't need that.\n\n571\n00:30:52,850 --> 00:30:55,813\nThey might need the ability\nto reset people's passwords,\n\n572\n00:30:55,813 --> 00:30:58,656\nbut not to actually go through and\ndo things like this, so\n\n573\n00:30:58,656 --> 00:31:01,694\nbe careful with these default groups,\nthese built in ones.\n\n574\n00:31:01,694 --> 00:31:06,153\nAnd this page lists the ones that are\nbuilt in with Active Directory, all right?\n\n575\n00:31:06,153 --> 00:31:07,906\nSo it's listing them there, but\n\n576\n00:31:07,906 --> 00:31:11,590\nwe have built in groups just\nin Windows Server also, right?\n\n577\n00:31:11,590 --> 00:31:13,060\nThe nice thing about those guys,\n\n578\n00:31:13,060 --> 00:31:15,880\nthe default groups that are built into the\nserver is that when you put somebody in\n\n579\n00:31:15,880 --> 00:31:19,570\nthere, they're just getting that\npermission on a single server, right?\n\n580\n00:31:19,570 --> 00:31:23,320\nAnd if you need to delegate\nauthority out to a single server,\n\n581\n00:31:23,320 --> 00:31:25,840\nthose built in groups\nare a lot safer to use.\n\n582\n00:31:25,840 --> 00:31:28,830\nBut let's say you have\na SharePoint environment, and\n\n583\n00:31:28,830 --> 00:31:33,130\nyou've got five SharePoint front ends, and\nyou've got redundant database servers, so\n\n584\n00:31:33,130 --> 00:31:36,730\nyou've got two database servers on\nthe back-end, and maybe you've got one or\n\n585\n00:31:36,730 --> 00:31:38,080\ntwo reporting servers.\n\n586\n00:31:38,080 --> 00:31:43,160\nSo all said and done, you've got nine\nservers for your SharePoint environment.\n\n587\n00:31:43,160 --> 00:31:46,571\nAnd you want to allow somebody\nto be able to do backups or\n\n588\n00:31:46,571 --> 00:31:49,551\nwhatever to manage those\nSharePoint servers.\n\n589\n00:31:49,551 --> 00:31:53,611\nWell, now the idea of going and\nputting this person in all these\n\n590\n00:31:53,611 --> 00:31:56,830\nindividual servers becomes\na bit of a nightmare,\n\n591\n00:31:56,830 --> 00:32:00,676\nso In our design,\nwe can do a few different things, right?\n\n592\n00:32:00,676 --> 00:32:03,719\nWe could be super heavy-handed and\nput SharePoint in its own domain and\n\n593\n00:32:03,719 --> 00:32:06,630\nisolate it that way, but\nthat's usually overkill.\n\n594\n00:32:06,630 --> 00:32:07,920\nBut we can create our own custom groups.\n\n595\n00:32:07,920 --> 00:32:08,791\nAnd we go in and\n\n596\n00:32:08,791 --> 00:32:13,460\nwe assign the custom groups whatever\naccess is necessary on those servers.\n\n597\n00:32:13,460 --> 00:32:15,465\nThen when we hire new SharePoint admins,\n\n598\n00:32:15,465 --> 00:32:19,390\nwe just put them in that one group and\nthey get access to all those servers.\n\n599\n00:32:19,390 --> 00:32:21,342\nAnd as we add more SharePoint servers,\n\n600\n00:32:21,342 --> 00:32:25,580\nwe just make sure to add that group to\nhave permissions inside the system.\n\n601\n00:32:25,580 --> 00:32:29,440\nThat creates a little island of\npermissions inside of what might be\n\n602\n00:32:29,440 --> 00:32:32,010\na thousand server, server farm.\n\n603\n00:32:32,010 --> 00:32:34,230\nIt's just these nine servers\nthat they're getting access to.\n\n604\n00:32:34,230 --> 00:32:37,800\nSo, that's an important\nprinciple as we go through\n\n605\n00:32:37,800 --> 00:32:40,960\nmaking sure that we give people\njust the access that they need.\n\n606\n00:32:42,515 --> 00:32:43,785\nAll right.\n\n607\n00:32:43,785 --> 00:32:48,225\nAnother one that I specifically want to\ncall out is something I mentioned briefly\n\n608\n00:32:48,225 --> 00:32:53,195\nearlier, in the active directory we have\nschema admins and enterprise admins.\n\n609\n00:32:53,195 --> 00:32:57,812\nThose two groups that are created in\nthe very first domain you create.\n\n610\n00:32:57,812 --> 00:33:00,612\nSo when you create that first\nactive directory domain,\n\n611\n00:33:00,612 --> 00:33:04,652\nwhich build your forest,\nthat first domain is your forest root.\n\n612\n00:33:04,652 --> 00:33:05,872\nAnd it's got enterprise admins and\n\n613\n00:33:05,872 --> 00:33:08,492\nschema admins,\nschema admins being the most critical.\n\n614\n00:33:08,492 --> 00:33:11,322\nThat one can change the schema and\n\n615\n00:33:11,322 --> 00:33:14,862\nthe schema's the same\nacross your entire forest.\n\n616\n00:33:14,862 --> 00:33:18,880\nSo, even if you've got separate\ndomains for different regions,\n\n617\n00:33:18,880 --> 00:33:23,950\nwhoever's in that root domain actually\ndoes have control over the other domains.\n\n618\n00:33:23,950 --> 00:33:26,504\nSo, if you're trying to get\ntrue decentralization and\n\n619\n00:33:26,504 --> 00:33:29,110\nseparation, those groups are going\nto cause you a bit of a problem.\n\n620\n00:33:30,640 --> 00:33:34,995\nNow, it might be that you have one area\nthat it is in control of everything,\n\n621\n00:33:34,995 --> 00:33:35,625\nand you want that.\n\n622\n00:33:35,625 --> 00:33:37,775\nRight?\nSo fine, that model works out.\n\n623\n00:33:37,775 --> 00:33:39,935\nBut if you're really trying to be fair,\nright?\n\n624\n00:33:39,935 --> 00:33:44,335\nMaybe your company has a North American\noperations and a European operations.\n\n625\n00:33:44,335 --> 00:33:46,505\nSo there's two separate entities,\nseparate IT departments,\n\n626\n00:33:46,505 --> 00:33:51,190\nseparate management, same company,\nthough, so we share information.\n\n627\n00:33:51,190 --> 00:33:53,450\nWell, because they're truly separate,\n\n628\n00:33:53,450 --> 00:33:55,840\nyou wouldn't want either one\nof them to be the forest root.\n\n629\n00:33:55,840 --> 00:33:58,460\nBecause they would then be\nable to modify the schema,\n\n630\n00:33:58,460 --> 00:33:59,340\nwhich would effect the other one.\n\n631\n00:33:59,340 --> 00:34:02,250\nAnd as an enterprise admin you could\nmake yourself a domain admin in\n\n632\n00:34:02,250 --> 00:34:02,780\nthe other domain.\n\n633\n00:34:02,780 --> 00:34:03,520\n>> Yeah.\nAbsolutely.\n\n634\n00:34:03,520 --> 00:34:05,180\n>> You cross that boundary.\n\n635\n00:34:05,180 --> 00:34:07,540\nSo that's what we have\nkind of two choices for\n\n636\n00:34:07,540 --> 00:34:09,660\nour domain model to solve that problem.\n\n637\n00:34:09,660 --> 00:34:11,980\nWell I guess there's three choices,\naren't there?\n\n638\n00:34:11,980 --> 00:34:14,160\nI always forget the hard one.\n\n639\n00:34:14,160 --> 00:34:19,600\nThe way we're supposed to do it is to\nuse a third domain, an empty route.\n\n640\n00:34:19,600 --> 00:34:22,830\nAnd many organizations are switching\nto this model these days where\n\n641\n00:34:22,830 --> 00:34:24,220\nyour root domain is actually empty.\n\n642\n00:34:24,220 --> 00:34:25,510\nThere's no user accounts in it, right?\n\n643\n00:34:25,510 --> 00:34:29,270\nNo computer accounts, there'll be usually\ntwo domain controllers for redundancy.\n\n644\n00:34:29,270 --> 00:34:32,184\nAnd then whoever's in\ncharge at the schema level,\n\n645\n00:34:32,184 --> 00:34:34,504\nwhoever that authorized personnel is.\n\n646\n00:34:34,504 --> 00:34:36,377\nAnd it's normally like\na change advisory board,\n\n647\n00:34:36,377 --> 00:34:38,796\nthey are the ones that have access\nto that domain and that's it.\n\n648\n00:34:38,796 --> 00:34:41,760\nAnd then the other domains\nare just child domains off of it.\n\n649\n00:34:41,760 --> 00:34:43,840\nOr other trees in the forest, right?\n\n650\n00:34:43,840 --> 00:34:45,550\nBut they're their own separate entities.\n\n651\n00:34:45,550 --> 00:34:47,874\nAnd that way no one domain\nhas control over the others.\n\n652\n00:34:47,874 --> 00:34:50,515\nExcept for\nthis empty one that's highly controlled.\n\n653\n00:34:50,515 --> 00:34:52,750\nAll right.\n\n654\n00:34:52,750 --> 00:34:55,220\nAnother solution would be to go ahead and\n\n655\n00:34:55,220 --> 00:34:57,700\ngive one side control which\nwe don't necessarily want.\n\n656\n00:34:57,700 --> 00:35:02,290\nA third solution though, the one that I\nforget, is you could do multiple forests.\n\n657\n00:35:02,290 --> 00:35:02,920\n>> Separate forests.\n\n658\n00:35:02,920 --> 00:35:03,650\nYep.\n\n659\n00:35:03,650 --> 00:35:07,480\n>> Separate forest brings about\na whole extra level of burden, though.\n\n660\n00:35:07,480 --> 00:35:09,885\nBecause now you're having\nto do forest trusts or\n\n661\n00:35:09,885 --> 00:35:13,670\nat least domain trusts in between\nthe domains that are important.\n\n662\n00:35:13,670 --> 00:35:17,315\nAnd now you get less synchronization\nbetween them, right.\n\n663\n00:35:17,315 --> 00:35:21,680\n>> So lookups aren't getting cached,\nhaving to be sent to the other DCs.\n\n664\n00:35:21,680 --> 00:35:24,570\nIt does create a lot of extra\nadministrative effort, but\n\n665\n00:35:24,570 --> 00:35:26,270\nit does give you true separation.\n\n666\n00:35:26,270 --> 00:35:30,025\n>> And you might have legal things that\nsay you have to have that separation.\n\n667\n00:35:30,025 --> 00:35:35,015\nOr you can't have people from one country\nthat has administrative rights or\n\n668\n00:35:35,015 --> 00:35:37,555\nthat level of administrative\nrights over an organization that's\n\n669\n00:35:37,555 --> 00:35:38,755\nbased in another country.\n\n670\n00:35:38,755 --> 00:35:41,215\nSo in that case our only choice\nis to go separate forest.\n\n671\n00:35:41,215 --> 00:35:43,502\nTo truly separate out that administration.\n\n672\n00:35:43,502 --> 00:35:46,022\n>> And you know as a technical person for\n\n673\n00:35:46,022 --> 00:35:49,441\nme I hate doing multiple\nforests if I can avoid it.\n\n674\n00:35:49,441 --> 00:35:53,250\nI'd much rather have it be in one forest,\nmakes things a lot simpler.\n\n675\n00:35:53,250 --> 00:35:57,180\n>> But sometimes it's not the IT\nguys that get to make the decision.\n\n676\n00:35:57,180 --> 00:36:02,230\nFor example, your company might be ISO\n9001 certified, or ISO 9000, either one.\n\n677\n00:36:02,230 --> 00:36:07,930\nSo you have a certain, set way of doing\nbusiness, and if there are components\n\n678\n00:36:07,930 --> 00:36:11,480\nof your business that you plan on\nselling off or spinning off, right?\n\n679\n00:36:11,480 --> 00:36:13,280\nThat happens all the time.\n\n680\n00:36:13,280 --> 00:36:16,670\nEven big companies like HP just announced\nlast week that they're gonna be dividing\n\n681\n00:36:16,670 --> 00:36:21,840\ntheir company in half to where\nhalf of it is servers and\n\n682\n00:36:21,840 --> 00:36:24,880\nservice and\nthe other half is desktops and laptops.\n\n683\n00:36:24,880 --> 00:36:28,960\nKind of going business and\nconsumer, separate organizations.\n\n684\n00:36:28,960 --> 00:36:31,060\nThere's other companies, like IBM, where,\n\n685\n00:36:31,060 --> 00:36:34,040\nIBM has been piecemealing itself\nout over the last ten years.\n\n686\n00:36:34,040 --> 00:36:37,680\nThey sold their laptop division to Lenovo,\nthen their desktop division,\n\n687\n00:36:37,680 --> 00:36:38,370\nnow the server division.\n\n688\n00:36:38,370 --> 00:36:40,480\nYou see this piece by\npiece they're eroding.\n\n689\n00:36:40,480 --> 00:36:43,083\nWell if your environment\nis all in one forest,\n\n690\n00:36:43,083 --> 00:36:46,372\ncan you just sell off part of\nyour forest to somebody else?\n\n691\n00:36:46,372 --> 00:36:47,777\nNot really, no.\n\n692\n00:36:47,777 --> 00:36:48,514\n>> Not so easily, no.\n\n693\n00:36:48,514 --> 00:36:50,900\n>> So from a business standpoint,\nyour CEO,\n\n694\n00:36:50,900 --> 00:36:53,818\nwhoever it is that's in\ncharge of your direction for\n\n695\n00:36:53,818 --> 00:36:58,088\nthe company as a whole might say,\nyou know what let's do separate forests.\n\n696\n00:36:58,088 --> 00:37:00,764\nBecause you can easily\nsell off the forest.\n\n697\n00:37:00,764 --> 00:37:03,190\nAnd it doesn't effect\nthe rest of your environment.\n\n698\n00:37:03,190 --> 00:37:07,750\nSo, if you've got very distinct business\nunits and the potential to be releasing\n\n699\n00:37:07,750 --> 00:37:12,690\nthem you know to some kind of piecemeal\nsale, you might need multiple forests.\n\n700\n00:37:12,690 --> 00:37:15,795\nI think I said forestses, so\nI'm making new words today.\n\n701\n00:37:15,795 --> 00:37:16,555\n>> [LAUGH]\n>> But\n\n702\n00:37:16,555 --> 00:37:19,780\nyou might need to have more\nthan one forest how about that?\n\n703\n00:37:19,780 --> 00:37:22,290\n[LAUGH] I'm good with\nthe active directory, not so\n\n704\n00:37:22,290 --> 00:37:24,890\nmuch with the English language.\n\n705\n00:37:24,890 --> 00:37:26,750\n[LAUGH] Alright so\n\n706\n00:37:26,750 --> 00:37:31,911\nthese are all things that can impact\nhow we start to handle our delegations.\n\n707\n00:37:31,911 --> 00:37:34,230\nNow, what's the right solution for you?\n\n708\n00:37:35,410 --> 00:37:36,050\nWho knows?\n\n709\n00:37:36,050 --> 00:37:38,860\nIt really does depend\non your business model.\n\n710\n00:37:38,860 --> 00:37:42,770\nAnd, in the exam, the questions\nthat you get will tell you that,\n\n711\n00:37:42,770 --> 00:37:44,900\nthey'll tell you that structure\nthat they're looking for,\n\n712\n00:37:44,900 --> 00:37:47,520\nwhat you need to achieve\nwith the delegation.\n\n713\n00:37:47,520 --> 00:37:50,310\n>> Lot of times I've noticed\nthose essay questions.\n\n714\n00:37:50,310 --> 00:37:53,450\nThey'll have a part where you\ngot the CEO or the higher ups,\n\n715\n00:37:53,450 --> 00:37:56,070\nthey've got that five year,\nten year outlook.\n\n716\n00:37:56,070 --> 00:37:58,950\nYou've got your IT admins\nthat have a shorter one year,\n\n717\n00:37:58,950 --> 00:38:01,090\ntwo year outlook and so\nyou've got to read all of that.\n\n718\n00:38:01,090 --> 00:38:03,540\nAnd when you're looking at that\nfive year plan as you were saying.\n\n719\n00:38:03,540 --> 00:38:05,549\nIf there's the The possibly of merging or\n\n720\n00:38:05,549 --> 00:38:08,710\ndivestitures, then you've gotta\ninclude that in your answer.\n\n721\n00:38:08,710 --> 00:38:09,610\n>> Yeah.\n\n722\n00:38:09,610 --> 00:38:11,690\nAll right, so\nlet's break our delegations down here.\n\n723\n00:38:11,690 --> 00:38:13,770\nNow, we're just talking about\ndelegation in active directory.\n\n724\n00:38:13,770 --> 00:38:16,080\nRemember, there's also\ndelegations inside applications.\n\n725\n00:38:16,080 --> 00:38:16,915\nWe'll talk about that.\n\n726\n00:38:16,915 --> 00:38:20,985\nAfter the break, but\nlet's recap the active directory ones.\n\n727\n00:38:20,985 --> 00:38:24,854\nSo, in a single forest,\nsingle domain model,\n\n728\n00:38:24,854 --> 00:38:30,756\nthe way you delegate out access is\neither on a per physical server basis,\n\n729\n00:38:30,756 --> 00:38:36,401\nor through the use of Organizational Units\nin the Active Directory.\n\n730\n00:38:36,401 --> 00:38:39,995\nThat will allow you to give granular\ncontrol to physical servers.\n\n731\n00:38:39,995 --> 00:38:42,156\nBut the domain is shared and so\n\n732\n00:38:42,156 --> 00:38:47,610\nthere will be people that have access\nto everything, your domain admins.\n\n733\n00:38:48,700 --> 00:38:51,090\nSo it's not as granular as what\nsome organizations may need.\n\n734\n00:38:52,730 --> 00:38:57,990\nThe next level up Is to perform\ndelegations at the domain level.\n\n735\n00:38:57,990 --> 00:39:02,100\nYou can have more than one domain,\nand give people access based on that.\n\n736\n00:39:02,100 --> 00:39:06,730\nThis gives us a lot better separation but\nthere's still that shared schema.\n\n737\n00:39:06,730 --> 00:39:09,040\nThere's that shared active\ndirectory forest infrastructure.\n\n738\n00:39:10,620 --> 00:39:13,300\nNot to mention some of\nthe two way transitive\n\n739\n00:39:13,300 --> 00:39:14,540\ntrusts that are automatically created.\n\n740\n00:39:14,540 --> 00:39:17,120\nSo, there's a certain level of\naccess that's automatically given,\n\n741\n00:39:17,120 --> 00:39:19,170\neven in a multi domain environment.\n\n742\n00:39:19,170 --> 00:39:24,550\nFor example, a user in one domain\ncould get up, walk over to a computer\n\n743\n00:39:24,550 --> 00:39:28,330\nthat's in another domain and still log\nin cuz of the two way transitive trust.\n\n744\n00:39:28,330 --> 00:39:31,610\nSo there's some separation that we still\ndon't get even with separate domains.\n\n745\n00:39:32,750 --> 00:39:37,270\nAnd then separate forests,\nthat gives us true complete isolation.\n\n746\n00:39:37,270 --> 00:39:38,879\nYou can delegate out authority\nbased on the forest.\n\n747\n00:39:38,879 --> 00:39:43,458\nAnd people have whatever access they need\ncompletely compartmentalized in that\n\n748\n00:39:43,458 --> 00:39:47,711\nforest at the sacrifice of losing\ninteroperability between the forests.\n\n749\n00:39:47,711 --> 00:39:50,686\nNow you've got to do trusts,\neither forest trusts or\n\n750\n00:39:50,686 --> 00:39:52,745\ndomain trusts to bring that back in.\n\n751\n00:39:52,745 --> 00:39:56,043\nYou've go to pick which model's gonna\nwork in your environment and as an IT guy\n\n752\n00:39:56,043 --> 00:39:58,252\n>> Your first thought should always be,\n\n753\n00:39:58,252 --> 00:40:01,242\nOK, how am I going to get\na single domain to do this?\n\n754\n00:40:01,242 --> 00:40:03,260\nRight.\n>> [LAUGH] Because if you can do a single\n\n755\n00:40:03,260 --> 00:40:06,750\ndomain, it's easy to go from\na single domain to a multi-domain.\n\n756\n00:40:06,750 --> 00:40:07,940\nIt's easy to grow it.\n\n757\n00:40:07,940 --> 00:40:10,730\nIt's hard to go the other\ndirection around.\n\n758\n00:40:10,730 --> 00:40:15,690\nYou always want to try and go for the\nsimplest solution first, single domain.\n\n759\n00:40:15,690 --> 00:40:18,993\n>> Absolutely.\nAnd the administrative overhead that you\n\n760\n00:40:18,993 --> 00:40:22,440\nsave if you can keep it all\nin one domain it is good.\n\n761\n00:40:22,440 --> 00:40:25,950\n>> Yeah, in the early days, one of the\nreasons you might wanna go multiple domain\n\n762\n00:40:25,950 --> 00:40:28,470\nwas because of the replication traffic.\n\n763\n00:40:28,470 --> 00:40:32,230\nAnd you could minimize that replication\ntraffic if you did separate domains.\n\n764\n00:40:32,230 --> 00:40:36,952\nBut, in today's world where bandwidth is\nfar greater than it was 15 years ago.\n\n765\n00:40:36,952 --> 00:40:38,780\n>> Yeah, absolutely.\n>> That's really not a reason anymore, and\n\n766\n00:40:38,780 --> 00:40:40,780\nso it really does come down\nto security boundaries.\n\n767\n00:40:40,780 --> 00:40:42,760\nAll various divisions in the AD do.\n\n768\n00:40:44,590 --> 00:40:48,850\nAlright well, Mike, the next thing that we\nwant to tackle is some of the delegation\n\n769\n00:40:48,850 --> 00:40:51,815\ninside of applications, and\nsome of the applications that we can use.\n\n770\n00:40:51,815 --> 00:40:53,360\n>> OK.\n>> But there's not really enough time in\n\n771\n00:40:53,360 --> 00:40:56,550\nthis segment to tackle it, so\nlet's stop and take a break.\n\n772\n00:40:56,550 --> 00:40:59,130\nAnd when we get back, we're gonna take\na look at some of the applications.\n\n773\n00:40:59,130 --> 00:41:02,882\nAnd by applications, I'm really gonna\nbe talking about system center.\n\n774\n00:41:02,882 --> 00:41:03,480\n>> Mm-hm.\n[LAUGH]\n\n775\n00:41:03,480 --> 00:41:04,500\n>> So we're gonna take a quick\n\n776\n00:41:04,500 --> 00:41:06,160\ntour of the system center product suite.\n\n777\n00:41:06,160 --> 00:41:08,280\nWhat the different offerings do.\n\n778\n00:41:08,280 --> 00:41:11,595\nAnd talk about the types of access\nthat each one requires to do its job.\n\n779\n00:41:11,595 --> 00:41:13,532\n>> Mm-hm.\n>> It's definitely good knowledge to have,\n\n780\n00:41:13,532 --> 00:41:14,419\ngood knowledge to know.\n\n781\n00:41:14,419 --> 00:41:16,090\nAnd if you haven't seen system center,\n\n782\n00:41:16,090 --> 00:41:18,215\nthis will be your chance\nto kind of preview it, so.\n\n783\n00:41:18,215 --> 00:41:21,918\nAll right, well stay tuned,\nwe'll be back in a few.\n\n784\n00:41:21,918 --> 00:41:30,132\n[MUSIC]\n\n785\n00:41:30,132 --> 00:41:32,080\nAll right, welcome back everybody.\n\n786\n00:41:32,080 --> 00:41:35,920\nIn the last segment we started talking\nabout delegating out permissions and\n\n787\n00:41:35,920 --> 00:41:39,500\nthen we kind of discussed as we have\nan active directory in our server spread\n\n788\n00:41:39,500 --> 00:41:40,380\nacross an environment,\n\n789\n00:41:40,380 --> 00:41:44,130\nhow we might want to give people\ndifferent levels of access to the system.\n\n790\n00:41:44,130 --> 00:41:49,260\nAnd I was really talking about all\nthat from the server level, right,\n\n791\n00:41:49,260 --> 00:41:52,250\nbut that's not the only place\nthat we delegate out access.\n\n792\n00:41:52,250 --> 00:41:56,220\nAnd we may need to break things\ndown more to achieve the goals and\n\n793\n00:41:56,220 --> 00:41:57,370\nthe limited access that we need.\n\n794\n00:41:58,690 --> 00:42:02,330\nSo there's a few different areas where\nwe might be providing delegation,\n\n795\n00:42:02,330 --> 00:42:04,010\nthese permissions assignments.\n\n796\n00:42:04,010 --> 00:42:07,960\nAnd the physical server is certainly our\none, but there's also virtual servers.\n\n797\n00:42:07,960 --> 00:42:08,690\n>> Right.\n\n798\n00:42:08,690 --> 00:42:12,240\n>> Almost everybody uses virtualization\nin one method or another nowaday, and so\n\n799\n00:42:12,240 --> 00:42:16,300\nyou may have plenty of people that need\naccess to a particular virtual machine,\n\n800\n00:42:16,300 --> 00:42:18,700\nbut not to the virtual host itself.\n\n801\n00:42:18,700 --> 00:42:19,360\n>> Exactly.\n\n802\n00:42:19,360 --> 00:42:22,750\n>> Especially if you're doing\na multitenancy environment.\n\n803\n00:42:22,750 --> 00:42:25,260\nI'm gonna through that word\nout early on this show.\n\n804\n00:42:25,260 --> 00:42:30,030\nOn the exam, you're gonna see the term\nmultitenant referenced more than once.\n\n805\n00:42:30,030 --> 00:42:33,650\nAnd what that's talking about is\nwhen you have a shared data center.\n\n806\n00:42:33,650 --> 00:42:36,960\nA data center with not just more\nthan one service or server in it,\n\n807\n00:42:36,960 --> 00:42:39,730\nbut with more than one customer.\n\n808\n00:42:39,730 --> 00:42:44,040\nSo you might not be the only company\nhosting servers in that data center.\n\n809\n00:42:44,040 --> 00:42:49,260\nSo if it's, you know, Amazon Web Services\nor Windows Azure or whatever,\n\n810\n00:42:49,260 --> 00:42:52,750\nthere are other people out there running\non the same physical servers as you.\n\n811\n00:42:52,750 --> 00:42:55,480\nSo you do not get access\nto the physical server.\n\n812\n00:42:55,480 --> 00:42:58,460\nYou just get access to\nthe virtual servers on top of it.\n\n813\n00:42:58,460 --> 00:43:00,290\nBut the flip side is also true, and\n\n814\n00:43:00,290 --> 00:43:05,340\nwe'll see this towards the end of the\nseries, that when you bring up your own\n\n815\n00:43:05,340 --> 00:43:09,650\nprivate cloud you might be\nreselling access to your systems.\n\n816\n00:43:09,650 --> 00:43:14,680\nAnd so you can create a multitenant data\ncenter privately within your organization.\n\n817\n00:43:14,680 --> 00:43:16,605\nAnd that is something\nthat is fairly common.\n\n818\n00:43:16,605 --> 00:43:17,710\n>> Mm-hm.\n\n819\n00:43:17,710 --> 00:43:19,532\n>> All right.\nSo when we go to delegate out authority,\n\n820\n00:43:19,532 --> 00:43:23,350\nwell there's the physical servers and\nthe virtual servers.\n\n821\n00:43:23,350 --> 00:43:25,780\nAnd so\nI think we've kind of talked about those.\n\n822\n00:43:25,780 --> 00:43:28,260\nBut there's also our applications.\n\n823\n00:43:28,260 --> 00:43:29,900\nThe software that we're running.\n\n824\n00:43:29,900 --> 00:43:32,230\nAnd that could be anything.\n\n825\n00:43:32,230 --> 00:43:33,120\n>> DNS, DHTP,\n\n826\n00:43:33,120 --> 00:43:37,470\nyou might be able to just administer\nthat DHTP console and nothing else.\n\n827\n00:43:37,470 --> 00:43:41,810\n>> Yeah, I gave the example earlier\nof share point where you might have,\n\n828\n00:43:41,810 --> 00:43:44,260\nsystem admins like myself\nthat set up the servers, and\n\n829\n00:43:44,260 --> 00:43:46,180\nthe databases in the back end.\n\n830\n00:43:46,180 --> 00:43:50,006\nBut then you'll probably have dedicated\nshare point admins, people who do know\n\n831\n00:43:50,006 --> 00:43:53,382\nthat front end, or developers that\nneed full access into the system but\n\n832\n00:43:53,382 --> 00:43:55,932\nnot necessarily to\nthe underlying infrastructure.\n\n833\n00:43:55,932 --> 00:44:01,040\nSo, we have to start dividing that access\nup, and when we start talking about\n\n834\n00:44:01,040 --> 00:44:06,326\nmanaging and monitoring our equipment,\nthe management software that we use.\n\n835\n00:44:06,326 --> 00:44:07,312\nThat's a big deal.\n\n836\n00:44:07,312 --> 00:44:10,528\nThat's something that you absolutely\nneed to use delegation for\n\n837\n00:44:10,528 --> 00:44:14,739\nbecause you don't necessarily want a bunch\nof employees in your organization to have\n\n838\n00:44:14,739 --> 00:44:18,500\naccess to your systems through\nthe management software.\n\n839\n00:44:18,500 --> 00:44:22,430\nManagement software has this nasty habit\nof bypassing things like Windows Firewall\n\n840\n00:44:22,430 --> 00:44:23,490\nand stuff.\n\n841\n00:44:23,490 --> 00:44:27,790\nSo you don't want to end up in a situation\nwhere you increase your attack surface.\n\n842\n00:44:27,790 --> 00:44:30,220\nWhere you make your servers\nvulnerable because of that.\n\n843\n00:44:30,220 --> 00:44:33,480\nSo we absolutely have to\ncontrol delegation there.\n\n844\n00:44:33,480 --> 00:44:37,210\nThe only problem is it's done\ndifferently in every system, and\n\n845\n00:44:37,210 --> 00:44:40,380\nso that's where it starts\nto get really challenging.\n\n846\n00:44:40,380 --> 00:44:44,090\nAnd that's where Microsoft tries to\nhelp us with their System Center suite\n\n847\n00:44:44,090 --> 00:44:45,280\nof software.\n\n848\n00:44:45,280 --> 00:44:46,550\n>> Yeah.\nHad all them together,\n\n849\n00:44:46,550 --> 00:44:47,930\nbringing under one umbrella.\n\n850\n00:44:47,930 --> 00:44:50,625\nYou learn that interface and\nyou know it all.\n\n851\n00:44:50,625 --> 00:44:53,310\n>> Mm-hm.\nAnd who knows how to better monitor their\n\n852\n00:44:53,310 --> 00:44:55,150\nsystems than the people who wrote it,\nright?\n\n853\n00:44:55,150 --> 00:44:57,430\nOr at least we hope that's the case,\nright?\n\n854\n00:44:57,430 --> 00:44:58,380\nWe can always hope, yes.\n\n855\n00:44:58,380 --> 00:45:00,700\nNow when it comes to\nmonitoring Microsoft software,\n\n856\n00:45:00,700 --> 00:45:05,280\nMicrosoft servers, that Microsoft probably\nhas a pretty good idea of how it works and\n\n857\n00:45:05,280 --> 00:45:07,960\nSystem Center is able to take advantage\nof all that inherent knowledge.\n\n858\n00:45:07,960 --> 00:45:11,960\nSo that's Microsoft's recommendation\nis that when you go to manage\n\n859\n00:45:11,960 --> 00:45:16,460\nyour systems that if you use\nSystem Center, you can do that.\n\n860\n00:45:16,460 --> 00:45:20,170\nAnd the same delegation powers that you\nhave inside of the Active Directory and\n\n861\n00:45:20,170 --> 00:45:21,860\nyour regular local servers.\n\n862\n00:45:21,860 --> 00:45:25,930\nYou also have inside of\nthe System Center suite of software.\n\n863\n00:45:25,930 --> 00:45:27,070\n>> Right, right.\n\n864\n00:45:27,070 --> 00:45:29,320\n>> So when you go with a third party,\nthat's fine.\n\n865\n00:45:29,320 --> 00:45:31,685\nBut you don't necessarily\nhave all these features.\n\n866\n00:45:31,685 --> 00:45:35,830\nBecause you gotta make sure that you\nhave the same level of security and\n\n867\n00:45:35,830 --> 00:45:37,800\ncompatibility with the other systems.\n\n868\n00:45:37,800 --> 00:45:40,820\nNow if you've never worked\nwith System Center before,\n\n869\n00:45:40,820 --> 00:45:43,515\nwhat I wanna do is take a minute and\njust do a little bit of a product tour.\n\n870\n00:45:43,515 --> 00:45:44,130\nOK.\n\n871\n00:45:44,130 --> 00:45:47,450\nI wanna show you guys system center,\nwhat it is,\n\n872\n00:45:47,450 --> 00:45:50,940\nwhat the different components are and\njust take a real high level tour.\n\n873\n00:45:50,940 --> 00:45:53,840\nI'm not gonna worry about diving in and\nconfiguring things just yet.\n\n874\n00:45:53,840 --> 00:45:55,740\nBut just give you that high level view.\n\n875\n00:45:55,740 --> 00:45:59,150\nAnd then I'll highlight some of the\ndelegation stuff that pops up in there.\n\n876\n00:45:59,150 --> 00:46:00,780\n>> And\nit's pretty complex suite of utilities.\n\n877\n00:46:00,780 --> 00:46:04,050\nI mean there's a lot of very powerful,\na lot you can do.\n\n878\n00:46:04,050 --> 00:46:05,210\n>> It has evolved.\n\n879\n00:46:05,210 --> 00:46:07,060\nYou know, a lot of people tell\nyou that System Center just\n\n880\n00:46:07,060 --> 00:46:08,250\ncame out a handful of years ago.\n\n881\n00:46:08,250 --> 00:46:08,950\n>> Right.\n>> But\n\n882\n00:46:08,950 --> 00:46:11,120\nit's actually an evolution of\nsoftware that's been around for\n\n883\n00:46:11,120 --> 00:46:12,500\nover twenty years now.\n\n884\n00:46:12,500 --> 00:46:14,760\nYou know, this all started I don't know.\n\n885\n00:46:14,760 --> 00:46:16,720\nMike did you ever work with SMS?\n\n886\n00:46:16,720 --> 00:46:19,155\n>> Yes, unfortunately.\n\n887\n00:46:19,155 --> 00:46:23,040\n>> [LAUGH] Microsoft SMS is\nwhere a lot of this started, and\n\n888\n00:46:23,040 --> 00:46:25,780\nSMS was Server Management Service.\n\n889\n00:46:25,780 --> 00:46:26,582\n>> Service, yeah exactly.\n\n890\n00:46:26,582 --> 00:46:27,479\n>> [CROSSTALK] Systems,\nsomething like that.\n\n891\n00:46:27,479 --> 00:46:30,521\nBut they're very very old product and\nback in the day,\n\n892\n00:46:30,521 --> 00:46:34,370\nit was the most powerful thing around,\nbut it was insanely complex.\n\n893\n00:46:34,370 --> 00:46:36,920\nYou had to write all sorts of scripts and\nthings.\n\n894\n00:46:36,920 --> 00:46:40,870\nAnd it's evolved and expanded and new\nproducts have come out with Microsoft and\n\n895\n00:46:40,870 --> 00:46:42,540\nthey've merged it into that,\n\n896\n00:46:42,540 --> 00:46:47,810\nuntil we've reached this new environment\nwhere we have System Center 2012 R2.\n\n897\n00:46:47,810 --> 00:46:50,920\nRight, and I'm just on Microsoft's\nproduct page here for it.\n\n898\n00:46:50,920 --> 00:46:55,220\nAnd, the neat thing about System Center\n2012 R2, or I'm gonna say it's neat, other\n\n899\n00:46:55,220 --> 00:47:00,770\npeople might say it's not neat, is that\nSystem Center 2012 R2 is not a program.\n\n900\n00:47:00,770 --> 00:47:01,920\nIt's not a software package.\n\n901\n00:47:01,920 --> 00:47:03,500\nIt's not something you install.\n\n902\n00:47:03,500 --> 00:47:07,000\n>> Right.\n>> This is the overall title for\n\n903\n00:47:07,000 --> 00:47:12,390\na collection of individual software pieces\nand those are the things that you use.\n\n904\n00:47:12,390 --> 00:47:15,870\nOn a positive side that means you can pick\nand choose the elements that you want.\n\n905\n00:47:15,870 --> 00:47:16,880\nYou don't have to use it all.\n\n906\n00:47:17,980 --> 00:47:21,440\nAnd that's good because\nit's kind of expensive.\n\n907\n00:47:21,440 --> 00:47:23,050\n>> Right.\n>> If you're, like a government or\n\n908\n00:47:23,050 --> 00:47:26,250\neducation entity, System Center is\nactually not very expensive at all.\n\n909\n00:47:26,250 --> 00:47:29,970\nIf you're a private sector entity though,\nit can get expensive.\n\n910\n00:47:29,970 --> 00:47:35,030\nBut it's kind of like having system\nadmins and network engineers that work 24\n\n911\n00:47:35,030 --> 00:47:38,250\nhours a day, seven days a week, monitoring\nyour system, and does a great job.\n\n912\n00:47:38,250 --> 00:47:41,995\nSo if you look at it that way,\nit's actually a pretty reasonable price.\n\n913\n00:47:41,995 --> 00:47:43,680\n>> Absolutely.\n\n914\n00:47:43,680 --> 00:47:45,130\n>> All right so\nlet's look at the components.\n\n915\n00:47:45,130 --> 00:47:49,640\nSo I'm just gonna scroll down here on\nthe System Center 2012 R2 product page and\n\n916\n00:47:49,640 --> 00:47:52,165\ndown here a bit they've\ngot our list right here.\n\n917\n00:47:52,165 --> 00:47:54,343\nHere's the five main products.\n\n918\n00:47:54,343 --> 00:47:57,386\nNow there are some others\nthat are considered, you know\n\n919\n00:47:57,386 --> 00:48:01,866\nlike smaller more utility packages,\nnot necessarily an entire software suite.\n\n920\n00:48:01,866 --> 00:48:03,747\nBut these are the main ones, and\n\n921\n00:48:03,747 --> 00:48:08,635\nwhen most people talk about System Center\nthey're talking about these first two.\n\n922\n00:48:08,635 --> 00:48:14,438\nSystem Center Operations Manager, or\nSCOM, System Center Operations Manager\n\n923\n00:48:14,438 --> 00:48:20,130\nis the software package that's\ndesigned to monitor our servers.\n\n924\n00:48:20,130 --> 00:48:23,717\nIt can push out a little agent, a little\nsoftware package that you install on your\n\n925\n00:48:23,717 --> 00:48:27,178\nphysical and your virtual servers and\nit will monitor them for performance.\n\n926\n00:48:27,178 --> 00:48:31,116\nIt can give you RAM,\nCPU utilization, disc utilization,\n\n927\n00:48:31,116 --> 00:48:34,504\nperformance metrics for\nvarious times of the day,\n\n928\n00:48:34,504 --> 00:48:40,100\nall sorts of good information on your\nservers, and it can report back on it.\n\n929\n00:48:40,100 --> 00:48:41,600\nIt gives you a full reporting,\n\n930\n00:48:41,600 --> 00:48:45,480\nas the System Center Operations Manager\nReporting Service that generates great\n\n931\n00:48:45,480 --> 00:48:49,890\nreports, and you can see things like which\nsystems have outstanding Windows updates,\n\n932\n00:48:49,890 --> 00:48:51,690\nand which systems have\nrebooted in the last 24 hours.\n\n933\n00:48:51,690 --> 00:48:55,780\nYou can do all sorts of really cool stuff\nwith it, which is important because\n\n934\n00:48:55,780 --> 00:48:59,910\nif you have thousands of servers,\nyou can't just go around and check.\n\n935\n00:49:00,970 --> 00:49:05,030\nI remember I used to work for a company\nthat had a pretty small data center and\n\n936\n00:49:05,030 --> 00:49:07,200\nwe had a, it was under 100 servers and\n\n937\n00:49:07,200 --> 00:49:09,590\nwe had made a webpage that\nwould monitor our servers.\n\n938\n00:49:09,590 --> 00:49:13,360\nAnd it gave us this high level view and\nyou'd see a little green dot basically for\n\n939\n00:49:13,360 --> 00:49:16,100\nthe 100 servers, and if any one of them\nwas down it would turn into a red dot and\n\n940\n00:49:16,100 --> 00:49:18,380\nyou could see it right\nthere on one the screen.\n\n941\n00:49:18,380 --> 00:49:21,970\nThat's great if you have 100 servers,\nbut what if you have 1000 servers?\n\n942\n00:49:21,970 --> 00:49:23,070\n>> That's a lot of dots to look at.\n\n943\n00:49:23,070 --> 00:49:26,370\n>> It really is, you just can't\nmake a screen that shows that.\n\n944\n00:49:26,370 --> 00:49:29,210\nSo, System Center Operations Manager\ndoes that work for us.\n\n945\n00:49:29,210 --> 00:49:31,920\nIt can alert us when it detects problems,\nand\n\n946\n00:49:31,920 --> 00:49:36,230\nit can take all sorts of other\nactions based on what we define.\n\n947\n00:49:36,230 --> 00:49:40,260\nIt's a very, very powerful software\npackage designed for monitoring.\n\n948\n00:49:42,660 --> 00:49:47,210\nThe other one, the very first one,\nis System Center Configuration Manager.\n\n949\n00:49:47,210 --> 00:49:48,931\nAnd MIke, this is your favorite, right?\n\n950\n00:49:48,931 --> 00:49:50,430\n>> Yeah,\nI spent a little bit of time in there.\n\n951\n00:49:50,430 --> 00:49:51,846\nI don't know if I'd say\nit was my favorite but-\n\n952\n00:49:51,846 --> 00:49:53,680\n>> [LAUGH]\n\n953\n00:49:53,680 --> 00:49:55,000\n>> You know, it is very powerful,\n\n954\n00:49:55,000 --> 00:49:58,950\nit lets you do things like if you\nwanna take your deployment services,\n\n955\n00:49:58,950 --> 00:49:59,690\nto the next level.\n\n956\n00:49:59,690 --> 00:50:06,375\nWe've talked about Windows Deployment\nServices, WDS, and we get our light touch.\n\n957\n00:50:06,375 --> 00:50:09,045\nWith System Center configuration\nManagement we can move in to what we call\n\n958\n00:50:09,045 --> 00:50:10,705\nzero touch installation,\n\n959\n00:50:10,705 --> 00:50:13,365\nwhere I can start automating\nthe process of doing these installs.\n\n960\n00:50:13,365 --> 00:50:14,065\nI don't have to be there.\n\n961\n00:50:14,065 --> 00:50:19,307\nI schedule it to happen at 2 o'clock in\nthe morning and it can push out software,\n\n962\n00:50:19,307 --> 00:50:23,337\ndrivers, very, very powerful, complex.\n\n963\n00:50:23,337 --> 00:50:28,267\n>> Yeah, you can, let's say you're about\nto buy a batch of 100 computers from Dell.\n\n964\n00:50:28,267 --> 00:50:31,736\nYou can talk to your sales rep, and say\nbefore you guys send those computers out,\n\n965\n00:50:31,736 --> 00:50:34,299\ncan you send me a spreadsheet\nwith all their Mac addresses?\n\n966\n00:50:34,299 --> 00:50:36,623\nOr there GUID's which ever\none they'll give you,\n\n967\n00:50:36,623 --> 00:50:38,880\nthey'll usually give you the choice.\n\n968\n00:50:38,880 --> 00:50:41,730\nAnd once you have that information\nwhen they give you that spreadsheet,\n\n969\n00:50:41,730 --> 00:50:44,930\nyou can go into STCM and you can say\nalright, when these machines show up\n\n970\n00:50:44,930 --> 00:50:48,220\nI need you to deploy Windows 7 to\nthem with this software package and\n\n971\n00:50:48,220 --> 00:50:51,982\nour license, put that on there,\nand give the computer this name.\n\n972\n00:50:51,982 --> 00:50:56,474\nYou pre-stage them all, and then when\nthose computers actually show up somebody\n\n973\n00:50:56,474 --> 00:50:59,222\nplugs them into the network and\nit just installs.\n\n974\n00:50:59,222 --> 00:51:00,840\n>> And that's it.\n>> All set up the way you need it,\n\n975\n00:51:00,840 --> 00:51:01,900\nreally powerful stuff.\n\n976\n00:51:01,900 --> 00:51:03,210\nReally, really cool.\n\n977\n00:51:03,210 --> 00:51:07,850\nIt also does software updates,\nit can replace WSUS if you wanna do that.\n\n978\n00:51:07,850 --> 00:51:11,050\nYou can push updates for\nnon Microsoft applications with SCCM.\n\n979\n00:51:11,050 --> 00:51:12,467\nYou can install.\n\n980\n00:51:12,467 --> 00:51:13,036\n>> You can try.\n\n981\n00:51:13,036 --> 00:51:16,744\n[LAUGH]\n>> It does require the vendor to properly\n\n982\n00:51:16,744 --> 00:51:17,314\nsupport it.\n\n983\n00:51:17,314 --> 00:51:18,062\n>> No, it does work, yes.\n\n984\n00:51:18,062 --> 00:51:20,770\n>> Yeah, so I've definitely had some\nmixed results with that over they years.\n\n985\n00:51:20,770 --> 00:51:21,653\nI know you have, Mike.\n\n986\n00:51:21,653 --> 00:51:22,222\n>> Yep.\n\n987\n00:51:22,222 --> 00:51:26,860\n>> So, the reason I'm teasing Mike is,\nit was a couple of years ago.\n\n988\n00:51:26,860 --> 00:51:29,950\nMike was tasked with\na particular SCCM project that,\n\n989\n00:51:29,950 --> 00:51:32,795\nboy, that kind of got out\nof scope really fast.\n\n990\n00:51:32,795 --> 00:51:33,295\nThat's the-\n>> Very nice.\n\n991\n00:51:33,295 --> 00:51:33,883\n>> It turned into\n\n992\n00:51:33,883 --> 00:51:34,595\na beast.\n>> Yeah.\n\n993\n00:51:34,595 --> 00:51:36,071\n>> But SCCM really is limitless\n\n994\n00:51:36,071 --> 00:51:39,575\npossibilities cuz it can do all\nsorts of scripting and automation,\n\n995\n00:51:39,575 --> 00:51:43,214\nfile copying, really powerful stuff for\nconfiguring your systems.\n\n996\n00:51:43,214 --> 00:51:46,158\nAnd the idea is you use SCCM to build out\n\n997\n00:51:46,158 --> 00:51:50,445\nyour network, and\nthen you use SCOM to monitor it.\n\n998\n00:51:50,445 --> 00:51:52,116\nSo, there's our two pieces\nof the deployment cycle.\n\n999\n00:51:52,116 --> 00:51:58,720\nBut SSCM, it just does really great\nstuff and it is a very powerful product.\n\n1000\n00:51:58,720 --> 00:52:00,640\nSo, you see some things that it can do.\n\n1001\n00:52:00,640 --> 00:52:04,300\nIt can even do monitoring and remediation,\nwhich we'll see more of later.\n\n1002\n00:52:04,300 --> 00:52:08,630\nIt can do remote administration so you can\npull up the screens of remote computers\n\n1003\n00:52:08,630 --> 00:52:12,130\nthrough the agent that's installed,\nwhich makes it a good support utility.\n\n1004\n00:52:12,130 --> 00:52:13,200\nReally neat stuff there.\n\n1005\n00:52:14,920 --> 00:52:18,450\nAll right, the next piece is\nSystem Center Data Protection Manager,\n\n1006\n00:52:18,450 --> 00:52:23,190\nSCDPM, and I find this is probably the\nleast used of them, which is surprising.\n\n1007\n00:52:23,190 --> 00:52:24,219\n>> Kind of surprising, right?\n\n1008\n00:52:24,219 --> 00:52:26,749\n>> Yeah.\nA lot of people have been critical of\n\n1009\n00:52:26,749 --> 00:52:30,470\nMicrosoft for\nnot having a good backup solution.\n\n1010\n00:52:30,470 --> 00:52:31,390\n>> Right.\n>> If you look\n\n1011\n00:52:31,390 --> 00:52:35,380\nat like the Windows Server backup,\nit gets weaker in every version.\n\n1012\n00:52:35,380 --> 00:52:36,820\nThey pull features out of it and\n\n1013\n00:52:36,820 --> 00:52:41,450\nout of it until you get this crippled\nthing that we have now, in Server 2012.\n\n1014\n00:52:41,450 --> 00:52:44,480\n>> And, it wasn't ever meant to be,\nI don't think, an enterprise solution.\n\n1015\n00:52:44,480 --> 00:52:47,090\nIt was a single server backup utility,\nand for\n\n1016\n00:52:47,090 --> 00:52:50,000\nthat purpose it does\na pretty good job of that.\n\n1017\n00:52:50,000 --> 00:52:51,760\nBut Data Protection Manager,\n\n1018\n00:52:51,760 --> 00:52:54,050\nnow we're talking about\nan enterprise level solution.\n\n1019\n00:52:55,090 --> 00:52:58,260\n>> And I think it's adoption rate is so\nlow just cuz people don't know about it.\n\n1020\n00:52:58,260 --> 00:53:01,610\n>> Right.\n>> SDPM is Microsoft's answer to products\n\n1021\n00:53:01,610 --> 00:53:06,260\nSymantec Backup Exec or\nCommVault or Arcserve, right?\n\n1022\n00:53:06,260 --> 00:53:08,526\nAll the various backup system\nsoftwares that are out there.\n\n1023\n00:53:08,526 --> 00:53:13,352\nIt will take care of backing up your\nsystems and basically backing them up to\n\n1024\n00:53:13,352 --> 00:53:17,970\na centralized server and\nmaintaining historical data and so on.\n\n1025\n00:53:17,970 --> 00:53:20,792\nIt leverages the volume shadow copy\nservice so it's very efficient.\n\n1026\n00:53:20,792 --> 00:53:21,890\n>> Right.\n\n1027\n00:53:21,890 --> 00:53:25,540\n>> And one of the reasons I know\nthat some people don't like it\n\n1028\n00:53:25,540 --> 00:53:29,870\nis that it does store the backups\nusing data deduplication.\n\n1029\n00:53:29,870 --> 00:53:33,085\nAnd so it partitions the drives\nout of proprietary manner, and\n\n1030\n00:53:33,085 --> 00:53:36,908\nthat means back ups you take with SEDPM\nare only restorable with SEDPM, and\n\n1031\n00:53:36,908 --> 00:53:38,929\nthey don't work with other software.\n\n1032\n00:53:38,929 --> 00:53:42,706\nSo some people don't like that,\nbeing locked into the Microsoft world, but\n\n1033\n00:53:42,706 --> 00:53:43,995\nI'll be honest with you.\n\n1034\n00:53:43,995 --> 00:53:46,192\nIf you have a Symantec backup exec backup,\n\n1035\n00:53:46,192 --> 00:53:50,281\nyou can't restore that with any other\nsoftware and Combolt's the same way, so\n\n1036\n00:53:50,281 --> 00:53:54,785\neverybody is pretty much storing it\nproprietary, one method for another.\n\n1037\n00:53:54,785 --> 00:53:58,244\nSEDPM just does it through a hard drive\nformat which is different than a lot of\n\n1038\n00:53:58,244 --> 00:53:59,282\nother software does.\n\n1039\n00:53:59,282 --> 00:54:00,775\n>> And with that data deduplication,\n\n1040\n00:54:00,775 --> 00:54:03,705\nI mean the amount of space we can\nsave in storing those backups.\n\n1041\n00:54:03,705 --> 00:54:06,115\nThat means I can save more backups, right?\n\n1042\n00:54:06,115 --> 00:54:09,980\nI could have less space to save more\nbackups, so I can go further back in time.\n\n1043\n00:54:09,980 --> 00:54:13,750\nNow my recovery time objective\ncan be much further back.\n\n1044\n00:54:13,750 --> 00:54:16,315\n>> Now, it obviously wants to do\ndisc-based backup, but it does support\n\n1045\n00:54:16,315 --> 00:54:20,730\ntape-based, so it can completely\nreplace your tape-based solutions.\n\n1046\n00:54:20,730 --> 00:54:24,288\nIt has SQL server, exchange, SharePoint,\nand other backup software built into it.\n\n1047\n00:54:24,288 --> 00:54:26,820\nYou can backup entire virtual machines.\n\n1048\n00:54:26,820 --> 00:54:31,720\nIt's really powerful and because it's\npart of the System Center Suite,\n\n1049\n00:54:31,720 --> 00:54:33,700\nit can be managed together\nwith the other ones.\n\n1050\n00:54:33,700 --> 00:54:37,952\nSo if a backup job fails or something like\nthat happens, you can get notifications\n\n1051\n00:54:37,952 --> 00:54:40,970\nof it in SCOM and\nif there's a problem that SCOM detects and\n\n1052\n00:54:40,970 --> 00:54:44,234\nyou need to recover from a backup,\nyou can it pull from STDPM and\n\n1053\n00:54:44,234 --> 00:54:47,840\nthat's one of the first steps of\nsetting up automated remediation.\n\n1054\n00:54:47,840 --> 00:54:49,630\nI mentioned that early in the show.\n\n1055\n00:54:49,630 --> 00:54:53,820\nIf you have a virtual machine fail, or\na server acts up, to be able to really\n\n1056\n00:54:53,820 --> 00:54:58,140\nquickly provision new VM and restore a\nbackup to it, a CDPN makes that possible.\n\n1057\n00:55:00,812 --> 00:55:02,910\nAll right,\nnext one is probably the newest,\n\n1058\n00:55:02,910 --> 00:55:04,510\nactually I think it is\nthe newest of all five.\n\n1059\n00:55:04,510 --> 00:55:10,090\nThe System Center Service Manager,\nand this one is really neat.\n\n1060\n00:55:10,090 --> 00:55:13,340\nMicrosoft, let's see how\ndo I wanna go about this.\n\n1061\n00:55:13,340 --> 00:55:17,810\nSo, in the IT industry there's\nthis general trend to implement\n\n1062\n00:55:17,810 --> 00:55:22,750\nsomething called ITILL and ITILL is the\nInformation Technology Industry Library.\n\n1063\n00:55:22,750 --> 00:55:28,130\nIt was a UK initiative to create\na standard methodology for\n\n1064\n00:55:28,130 --> 00:55:32,230\ndoing service operation, for\noperating an IT department.\n\n1065\n00:55:32,230 --> 00:55:36,715\nAnd by operating I just mean,\nevery aspect of running an IT department,\n\n1066\n00:55:36,715 --> 00:55:40,025\nfrom purchasing equipment\nto deploying equipment,\n\n1067\n00:55:40,025 --> 00:55:43,701\nemployees taking sick days,\nhow to do change management,\n\n1068\n00:55:43,701 --> 00:55:48,798\nhow to handle payroll, all the different\naspects of operating an IT department.\n\n1069\n00:55:48,798 --> 00:55:54,235\nAnd they laid out a proven methodology, a\nmethodology that said if you follow this,\n\n1070\n00:55:54,235 --> 00:55:57,830\nthis is a successful way\nto run an IT department.\n\n1071\n00:55:57,830 --> 00:55:58,595\nYour company might fail.\n\n1072\n00:55:58,595 --> 00:56:01,907\n>> But\nat least the IT department was run right.\n\n1073\n00:56:01,907 --> 00:56:04,299\nYou've got the documentation and\ninfrastructure in place for it.\n\n1074\n00:56:04,299 --> 00:56:05,400\n>> [LAUGH]\n>> So\n\n1075\n00:56:05,400 --> 00:56:06,621\nyou can never guarantee success for\nyour company.\n\n1076\n00:56:06,621 --> 00:56:07,735\n>> Right.\n\n1077\n00:56:07,735 --> 00:56:11,775\nBut iTel, even though it was a UK\ninitiative, it's received global\n\n1078\n00:56:11,775 --> 00:56:15,900\nacceptance and so you see it deployed\nin quite a few different places.\n\n1079\n00:56:15,900 --> 00:56:18,790\nI know, I used to live on the West Coast,\nand work for\n\n1080\n00:56:18,790 --> 00:56:21,010\nsome organizations out there,\nand we were iTel based.\n\n1081\n00:56:21,010 --> 00:56:23,960\nAnd so it's becoming more and more common.\n\n1082\n00:56:23,960 --> 00:56:27,190\nSo Microsoft likes iTel.\n\n1083\n00:56:27,190 --> 00:56:30,400\nBut Microsoft deals with\nlarge customers and\n\n1084\n00:56:30,400 --> 00:56:33,840\nsmall customers, and iTel is a bit\noverkill for small customers.\n\n1085\n00:56:33,840 --> 00:56:38,120\nSo they created this Microsoft\noperation framework MLF,\n\n1086\n00:56:38,120 --> 00:56:39,735\nwhich is really like ill light.\n\n1087\n00:56:39,735 --> 00:56:44,110\nIt's Itel paired down just for\nsmaller businesses.\n\n1088\n00:56:44,110 --> 00:56:47,530\nAnd so they've been promoting that to\nsmall businesses while they promote iTel\n\n1089\n00:56:47,530 --> 00:56:48,260\nto big businesses.\n\n1090\n00:56:48,260 --> 00:56:51,310\nAnd you can easily move from one\nto another cuz they're compatible.\n\n1091\n00:56:51,310 --> 00:56:55,475\nSo they created the System Center\nService Manager to provide\n\n1092\n00:56:55,475 --> 00:57:01,010\niTel based management functionality\nto large IT companies, right.\n\n1093\n00:57:01,010 --> 00:57:02,020\nThis is not for the small guys.\n\n1094\n00:57:02,020 --> 00:57:05,980\nThe small guys can just use the MOF,\nthe Microsoft operation framework and\n\n1095\n00:57:05,980 --> 00:57:09,120\nuse normal small level tools.\n\n1096\n00:57:09,120 --> 00:57:11,740\nBut for an enterprise you\ncan use this to manage every\n\n1097\n00:57:11,740 --> 00:57:13,545\naspect of your organization from...\n\n1098\n00:57:13,545 --> 00:57:14,815\nHelp desk support tickets.\n\n1099\n00:57:14,815 --> 00:57:18,155\nIt's got a full ticketing system,\nto bug tracking,\n\n1100\n00:57:18,155 --> 00:57:22,255\nto software version tracking,\nas you do software updates.\n\n1101\n00:57:22,255 --> 00:57:24,945\nIt can do some application\nperformance monitoring.\n\n1102\n00:57:24,945 --> 00:57:27,700\nIt does some really, really cool stuff.\n\n1103\n00:57:27,700 --> 00:57:32,750\nAnd we're gonna see this later because\nit's got some self-service portals\n\n1104\n00:57:32,750 --> 00:57:34,880\nthat are awesome.\n\n1105\n00:57:34,880 --> 00:57:38,720\nThe self-service portals let people login\nto create service tickets or whatever, but\n\n1106\n00:57:38,720 --> 00:57:41,060\nthey can also login to\nrequest a virtual machine.\n\n1107\n00:57:41,060 --> 00:57:41,640\n>> Right.\nSo\n\n1108\n00:57:41,640 --> 00:57:45,510\nmaybe you have developers that need\nvirtual machines to do testing on.\n\n1109\n00:57:45,510 --> 00:57:48,790\nAnd so they can log into the self service\nportal and say can you give me a VM?\n\n1110\n00:57:48,790 --> 00:57:52,190\nAnd it'll provision a virtual machine out,\nassign it to them, and\n\n1111\n00:57:52,190 --> 00:57:53,530\ngive them the access to it.\n\n1112\n00:57:53,530 --> 00:57:54,960\nAll from within the service manager.\n\n1113\n00:57:54,960 --> 00:57:56,000\nIt's really neat stuff.\n\n1114\n00:57:57,100 --> 00:57:59,490\nSo very, very powerful product.\n\n1115\n00:57:59,490 --> 00:58:03,270\nAnd you'll see right here, you know, built\naround the MOF, and built around iTel.\n\n1116\n00:58:03,270 --> 00:58:05,300\nAnd then they just kind\nof lay out some of the.\n\n1117\n00:58:05,300 --> 00:58:08,220\nIt is one of the newer products\ninside a system center,\n\n1118\n00:58:08,220 --> 00:58:12,560\nso you'll find that it's not\ndeployed as widely as the others.\n\n1119\n00:58:12,560 --> 00:58:15,142\nBut it will as time goes on,\nit's a great product.\n\n1120\n00:58:15,142 --> 00:58:19,690\nAll right and\nthe last component of system center,\n\n1121\n00:58:19,690 --> 00:58:24,220\nis the system center virtual\nmachine manager the SCVMM, right?\n\n1122\n00:58:24,220 --> 00:58:30,960\nAfter SCCM and SCOM, the SCVMM is probably\nthe next most widely deployed one.\n\n1123\n00:58:30,960 --> 00:58:35,020\nAnd it's designed for\nmanaging your virtual machine environment.\n\n1124\n00:58:35,020 --> 00:58:36,090\nYour virtualization servers.\n\n1125\n00:58:37,560 --> 00:58:40,870\nAnd Microsoft isn't just\nmanaging Hyper-v with this one.\n\n1126\n00:58:40,870 --> 00:58:43,440\nIt actually supports VMware also.\n\n1127\n00:58:43,440 --> 00:58:47,270\nSo if you have a mixed environment\nof Hyper-v and VMware,\n\n1128\n00:58:47,270 --> 00:58:51,850\nyou can use just the SCVMM to\nmanage both sets of environments.\n\n1129\n00:58:51,850 --> 00:58:53,810\nYou'll see all of your physical\nservers right there together,\n\n1130\n00:58:53,810 --> 00:58:55,470\nall your virtual machines there together.\n\n1131\n00:58:55,470 --> 00:58:58,050\nAnd you can even move\nVM's in between the two.\n\n1132\n00:58:58,050 --> 00:58:59,500\n>> That's impressive.\n\n1133\n00:58:59,500 --> 00:59:02,543\n>> Yeah, if you're gonna migrate\nfrom Hyper V to VMWare, or\n\n1134\n00:59:02,543 --> 00:59:06,469\nVMWare back to Hyper V,\nwhich I think Mike would appreciate more.\n\n1135\n00:59:06,469 --> 00:59:08,600\n>> [LAUGH]\n>> [LAUGH] If you did either of those,\n\n1136\n00:59:08,600 --> 00:59:12,570\nyes SCVM can handle it.M It\ncan import VM's from like\n\n1137\n00:59:12,570 --> 00:59:13,785\nthe old Virtual Server 2005.\n\n1138\n00:59:13,785 --> 00:59:15,900\n>> Mm-hm.\n>> Virtual PC and stuff.\n\n1139\n00:59:15,900 --> 00:59:17,190\nIt can convert those.\n\n1140\n00:59:17,190 --> 00:59:17,860\nAnd convert them.\n\n1141\n00:59:17,860 --> 00:59:22,080\nAnd it gives you the centralized\nmanagement of your virtualization\n\n1142\n00:59:23,460 --> 00:59:23,960\nenvironment.\n\n1143\n00:59:23,960 --> 00:59:25,370\nYou can use SCOM for\n\n1144\n00:59:25,370 --> 00:59:28,990\nmonitoring your virtual machines,\nbut theres a little problem.\n\n1145\n00:59:28,990 --> 00:59:33,200\nThe problem is that SCOM\ndoesn't make the connection\n\n1146\n00:59:33,200 --> 00:59:37,220\nbetween a virtual machine and\nthe host that it's running on.\n\n1147\n00:59:37,220 --> 00:59:39,760\nSo for example, it knows that there's\nthis physical host out there.\n\n1148\n00:59:40,900 --> 00:59:42,790\nAnd it knows that there's\nthis virtual machine, but\n\n1149\n00:59:42,790 --> 00:59:45,040\nit doesn't even think it's a virtual\nmachine, it just sees it as another host.\n\n1150\n00:59:45,040 --> 00:59:45,740\n>> Right.\n\n1151\n00:59:45,740 --> 00:59:51,360\nAnd it doesn't necessarily connect the two\ntogether, versus the SCVMM that does.\n\n1152\n00:59:51,360 --> 00:59:54,500\nIt knows hey, that's a virtual machine\nrunning on top of this host, and\n\n1153\n00:59:54,500 --> 00:59:57,900\nhere's five other virtual machines that\nare also running on top of that host.\n\n1154\n00:59:57,900 --> 01:00:02,590\nAnd so when I look at the host, and I see\nits CPU utilization is high, I need to\n\n1155\n01:00:02,590 --> 01:00:05,410\nlook at these five VMs, and figure\nout which one of them is causing it.\n\n1156\n01:00:05,410 --> 01:00:07,460\nAnd then when I figure out who it is,\n\n1157\n01:00:07,460 --> 01:00:10,840\nI need to start moving VMs\naround to optimize my hardware.\n\n1158\n01:00:11,915 --> 01:00:17,030\nSCVMM is very powerful,\ncombined with SCOM, it's near magical,\n\n1159\n01:00:17,030 --> 01:00:19,330\nit's really impressive.\n\n1160\n01:00:19,330 --> 01:00:23,370\nYeah, I've seen some really,\nreally neat things come out of it,\n\n1161\n01:00:23,370 --> 01:00:27,720\nI used to joke around about this, but the\ndata center that I worked on in Seattle.\n\n1162\n01:00:27,720 --> 01:00:34,088\nWe had, oh I don't know,\nabout 100 physical hosts.\n\n1163\n01:00:34,088 --> 01:00:35,880\n>> Mm-hm.\n>> For virtualization.\n\n1164\n01:00:35,880 --> 01:00:39,640\nAnd on top of those we had a number\nof virtual machines, you know.\n\n1165\n01:00:39,640 --> 01:00:43,330\nSo, there'd be between 8 and 12 virtual\nmachines on each of those hosts.\n\n1166\n01:00:43,330 --> 01:00:48,020\nSo you're getting to like 800 virtual\nmachines that are spread all around all\n\n1167\n01:00:48,020 --> 01:00:49,430\nthese physical hosts.\n\n1168\n01:00:49,430 --> 01:00:51,890\nAnd we used dynamic resource balancing.\n\n1169\n01:00:51,890 --> 01:00:55,300\nAnd so you'd come in in the morning and\nyou'd look for a VM.\n\n1170\n01:00:55,300 --> 01:00:58,300\nSo I'd say, all right, I need to find\nthe virtual machine that's the exchange\n\n1171\n01:00:58,300 --> 01:01:00,910\nfront end server, or client access server.\n\n1172\n01:01:00,910 --> 01:01:01,970\n>> There you go.\n[LAUGH]\n\n1173\n01:01:01,970 --> 01:01:02,560\n>> New terms.\n\n1174\n01:01:02,560 --> 01:01:04,820\nSo I gotta find the exchange\nplan access server.\n\n1175\n01:01:04,820 --> 01:01:08,010\nWell, I know the server's up,\nI can remote desktop into it,\n\n1176\n01:01:08,010 --> 01:01:10,290\nbut which physical host is it?\n\n1177\n01:01:10,290 --> 01:01:11,065\n>> Which host is it?\n\n1178\n01:01:11,065 --> 01:01:12,420\n[LAUGH]\n>> And you can have all these different\n\n1179\n01:01:12,420 --> 01:01:13,160\nones to pick from.\n\n1180\n01:01:13,160 --> 01:01:13,870\nYou didn't know.\n>> You\n\n1181\n01:01:13,870 --> 01:01:17,571\nstart expanding each one of them out going\nokay, it's gotta be on one of these.\n\n1182\n01:01:17,571 --> 01:01:19,281\n>> [LAUGH] So at night, or at peak time,\n\n1183\n01:01:19,281 --> 01:01:23,020\nyou start moving the virtual machines\naround to get the most optimization.\n\n1184\n01:01:23,020 --> 01:01:24,805\n>> To get the best bang for\nyour buck out of your hardware.\n\n1185\n01:01:24,805 --> 01:01:26,470\n>> Mm-hm.\n>> Which is awesome.\n\n1186\n01:01:26,470 --> 01:01:27,040\n>> Yes.\n\n1187\n01:01:27,040 --> 01:01:28,290\n>> But\nif you're gonna do something like that,\n\n1188\n01:01:28,290 --> 01:01:30,790\nyou do need a centralized\nmanagement software.\n\n1189\n01:01:30,790 --> 01:01:33,730\nSo I wouldn't even go poking around\nthe physical servers anymore.\n\n1190\n01:01:33,730 --> 01:01:35,180\n>> Right.\n>> I would just fire up the SCVMM,\n\n1191\n01:01:35,180 --> 01:01:39,150\nand say, all right give me my virtual\nmachine view, and here it is, and\n\n1192\n01:01:39,150 --> 01:01:40,200\noh this is the host that it's on.\n\n1193\n01:01:40,200 --> 01:01:43,450\nAnd you find it right off like that,\nSCVMM helps you to manage that.\n\n1194\n01:01:43,450 --> 01:01:47,180\nIt also lets you do virtual\nmachine templates and cloning.\n\n1195\n01:01:47,180 --> 01:01:49,080\nSo, if you need to\ndeploy five web servers,\n\n1196\n01:01:49,080 --> 01:01:52,290\nyou can just quickly just bang them\nout and now you have five web servers.\n\n1197\n01:01:52,290 --> 01:01:55,320\nSo, it gives you a lot\nof automation there.\n\n1198\n01:01:55,320 --> 01:02:00,900\nThe SCVMM though, it is really just\nfocused purely on virtual machines.\n\n1199\n01:02:00,900 --> 01:02:03,660\nIf you want to manage other things,\nlike your physical servers and\n\n1200\n01:02:03,660 --> 01:02:07,720\nsoftware deployment and so on,\nyou need to bring in SCCM, and\n\n1201\n01:02:07,720 --> 01:02:12,210\nSCCM will integrate with SCVMM\nto help deploy and configure.\n\n1202\n01:02:12,210 --> 01:02:14,220\nA lot of acronyms\n>> it is.\n\n1203\n01:02:15,320 --> 01:02:18,540\n>> All right, so\nwe bring up System Center, and\n\n1204\n01:02:18,540 --> 01:02:20,505\nhouse this total package for management.\n\n1205\n01:02:20,505 --> 01:02:21,490\n>> Mm-hm.\n\n1206\n01:02:21,490 --> 01:02:25,750\n>> Now, when you have total\nmanagement capabilities,\n\n1207\n01:02:25,750 --> 01:02:28,440\nif you give somebody administrative\naccess inside of SCOM, or\n\n1208\n01:02:28,440 --> 01:02:30,060\ninside of any of\nthe System Center utilities,\n\n1209\n01:02:30,060 --> 01:02:36,020\nthey now have control to manipulate\nsystems all across your environment.\n\n1210\n01:02:36,020 --> 01:02:37,580\nAnd that's not good.\n\n1211\n01:02:37,580 --> 01:02:38,320\nAll right?\n\n1212\n01:02:38,320 --> 01:02:40,230\nSo when we use the system center, and\n\n1213\n01:02:40,230 --> 01:02:42,560\nwe're gonna use it all through\nthe rest of this show.\n\n1214\n01:02:42,560 --> 01:02:46,030\nWhen we deploy it ,you need to\nplan from the very beginning\n\n1215\n01:02:46,030 --> 01:02:49,140\nhow you want to control that access.\n\n1216\n01:02:49,140 --> 01:02:51,880\nEach of the software products has\nits own different way of doing it.\n\n1217\n01:02:51,880 --> 01:02:55,510\nBut for the most part it's all\ndone with roles, all right?\n\n1218\n01:02:55,510 --> 01:02:58,230\nLet me just give me you a kind\nof a high level tour here.\n\n1219\n01:02:58,230 --> 01:03:00,290\nWe're gonna work with it more, also,\n\n1220\n01:03:00,290 --> 01:03:02,430\nyou know let me mention\nthis while I\"m on the page.\n\n1221\n01:03:02,430 --> 01:03:05,550\nIf this is your absolute first\ntime being exposed to this,\n\n1222\n01:03:05,550 --> 01:03:08,910\nI encourage you to go to the system\ncenter 2012 R2 product page.\n\n1223\n01:03:08,910 --> 01:03:10,970\nSo it's on Microsoft's website.\n\n1224\n01:03:10,970 --> 01:03:13,405\nI'll push the link with the episode notes.\n\n1225\n01:03:13,405 --> 01:03:15,895\nBut down here at the bottom they\nhave a link for a free eBook.\n\n1226\n01:03:15,895 --> 01:03:21,015\nThe Microsoft Systems Center Integrated\nCloud Platform Introduction book, and\n\n1227\n01:03:21,015 --> 01:03:23,385\nif you go and download that,\nI've got to pull out right here,\n\n1228\n01:03:23,385 --> 01:03:26,195\nintroducing Microsoft System Center\n2012 R2 Technical Overview.\n\n1229\n01:03:27,305 --> 01:03:31,645\nAnd it gives you a breakdown of\nwhat each of these things do.\n\n1230\n01:03:31,645 --> 01:03:35,135\nSo here's the breakdown on Virtual\nMachine Manager, and what it does and\n\n1231\n01:03:35,135 --> 01:03:39,250\nhow it works, then they'd go\ninto things like self-service.\n\n1232\n01:03:39,250 --> 01:03:44,500\nWe've got the SCCM, the configuration\nmanager, data protection manager, real\n\n1233\n01:03:44,500 --> 01:03:47,230\ntime monitoring with operations manager,\n>> Uh-huh.\n\n1234\n01:03:47,230 --> 01:03:48,930\n>> And the software advisor.\n\n1235\n01:03:48,930 --> 01:03:50,300\nSo it breaks all this stuff down.\n\n1236\n01:03:50,300 --> 01:03:51,490\nHere's service manager.\n\n1237\n01:03:51,490 --> 01:03:52,687\nThere's those components.\n\n1238\n01:03:52,687 --> 01:03:55,295\nAnd it gives you four, five pages on each,\n\n1239\n01:03:55,295 --> 01:03:58,201\njust kind of describing\ntheir functionality.\n\n1240\n01:03:58,201 --> 01:04:01,639\nAnd then a quick visual tour of how\nyou would configure some basic things.\n\n1241\n01:04:01,639 --> 01:04:03,357\nIt's a hundred and eighty pages.\n\n1242\n01:04:03,357 --> 01:04:07,196\nYou could probably read it in one, or\ntwo evenings just kind of sitting down and\n\n1243\n01:04:07,196 --> 01:04:08,300\nreading.\n\n1244\n01:04:08,300 --> 01:04:12,130\nIt's a very good thing to read if you have\nnot been exposed to system center before,\n\n1245\n01:04:12,130 --> 01:04:14,750\nI do recommend that you read that e-book,\nand the link for\n\n1246\n01:04:14,750 --> 01:04:17,160\nit is right there on\nthe system center page.\n\n1247\n01:04:18,290 --> 01:04:19,170\n>> Yep.\n>> All right well\n\n1248\n01:04:19,170 --> 01:04:23,040\nlet me pull up some system\ncenter servers real quick.\n\n1249\n01:04:23,040 --> 01:04:27,030\nAnd I just want to show you an example of\nhow we handle delegation inside of these.\n\n1250\n01:04:27,030 --> 01:04:30,100\nI'm gonna go to SCCM,\nthe configuration manager.\n\n1251\n01:04:30,100 --> 01:04:32,320\nConfiguring manager's\nprobably the most dangerous.\n\n1252\n01:04:32,320 --> 01:04:33,130\nRight.\n>> Correct.\n\n1253\n01:04:33,130 --> 01:04:36,235\n>> Because, let's say that, Mike,\nyou and I would work together.\n\n1254\n01:04:36,235 --> 01:04:38,800\n>> Mm-hm.\n>> And we've got a data center.\n\n1255\n01:04:38,800 --> 01:04:41,670\n>> Right.\n>> And we decide to divide it in half.\n\n1256\n01:04:41,670 --> 01:04:43,570\nSo you take 50 servers,\nI'll take 50 servers.\n\n1257\n01:04:43,570 --> 01:04:44,940\nThat's how we're gonna manage it.\n\n1258\n01:04:44,940 --> 01:04:45,863\n>> Right.\n[LAUGH]\n\n1259\n01:04:45,863 --> 01:04:46,520\n>> Well,\n\n1260\n01:04:46,520 --> 01:04:47,300\n>> So we set them up.\n\n1261\n01:04:47,300 --> 01:04:50,760\nYou know, Mike builds these amazing\nSTCM packages to deploy software and\n\n1262\n01:04:50,760 --> 01:04:51,850\ncontrol them.\n\n1263\n01:04:51,850 --> 01:04:54,662\nAnd one day I decided you know what,\nI wanna make Mike look bad.\n\n1264\n01:04:54,662 --> 01:04:55,240\n>> [LAUGH]\n>> But\n\n1265\n01:04:55,240 --> 01:04:58,220\nI need administrative access to some\nof his servers, so what can I do?\n\n1266\n01:04:58,220 --> 01:05:01,260\nI could go and\nmodify one of his deployment packages.\n\n1267\n01:05:01,260 --> 01:05:04,720\nAnd I could add an additional\nuser account in there.\n\n1268\n01:05:04,720 --> 01:05:07,530\nAnd now when he deploys his servers I\nget this extra user account in there.\n\n1269\n01:05:07,530 --> 01:05:11,333\nThen I can log in and\nput a reboot every six hours script, or\n\n1270\n01:05:11,333 --> 01:05:12,173\nsomething like that in there.\n\n1271\n01:05:12,173 --> 01:05:12,900\nAnd all of the sudden,\n\n1272\n01:05:12,900 --> 01:05:16,290\nMike looks like the bad guy because\nhis servers can't stay online.\n\n1273\n01:05:16,290 --> 01:05:18,618\nMeanwhile my fifty are doing just fine.\n\n1274\n01:05:18,618 --> 01:05:19,329\n>> Right.\n\n1275\n01:05:19,329 --> 01:05:22,710\n>> So, SCCM gives you the power\nto do things like that.\n\n1276\n01:05:22,710 --> 01:05:25,620\nUse you power for the forces of good.\n\n1277\n01:05:25,620 --> 01:05:27,470\nBut we definitely want to project on that.\n\n1278\n01:05:27,470 --> 01:05:32,330\nSo, when you go to configure any of\nthe SCCM stuff, you'll have an SCCM panel,\n\n1279\n01:05:32,330 --> 01:05:34,590\nlike the one that I'm\nlooking at right here.\n\n1280\n01:05:34,590 --> 01:05:38,890\nSo, this is my system center\noperations manager window, and\n\n1281\n01:05:38,890 --> 01:05:41,440\ndown here at the bottom\nI've got administration.\n\n1282\n01:05:41,440 --> 01:05:44,570\nInside of administration\nyou will have security, and\n\n1283\n01:05:44,570 --> 01:05:46,240\nhere is where you can start\nto break things down.\n\n1284\n01:05:46,240 --> 01:05:48,640\nYou've got administrative users.\n\n1285\n01:05:48,640 --> 01:05:51,797\nThese are user accounts that\nare allowed to use the SCCM.\n\n1286\n01:05:53,110 --> 01:05:56,060\nBut there is different\nroles they fall under.\n\n1287\n01:05:56,060 --> 01:05:58,730\nThe roles are like those\nbuilt in security groups.\n\n1288\n01:05:58,730 --> 01:06:00,440\nEach one has different\nlevels of permissions.\n\n1289\n01:06:00,440 --> 01:06:03,830\nSo you will see like full administrator,\nwho can do everything.\n\n1290\n01:06:03,830 --> 01:06:05,240\nOperations administrator,\n\n1291\n01:06:05,240 --> 01:06:09,390\nsecurity administrator, application:\nthese are different levels of control.\n\n1292\n01:06:09,390 --> 01:06:13,670\nThe default ones though,\nare rarely suitable for production use.\n\n1293\n01:06:13,670 --> 01:06:16,520\nBecause they cover the entire SCCM.\n\n1294\n01:06:16,520 --> 01:06:19,870\nSo we're normally gonna divide our\nenvironment up into what are call\n\n1295\n01:06:19,870 --> 01:06:21,000\ncollections.\n\n1296\n01:06:21,000 --> 01:06:22,630\nYour servers get divided into collections.\n\n1297\n01:06:22,630 --> 01:06:25,510\nYou might have noticed it back\nhere under assets and compliance.\n\n1298\n01:06:25,510 --> 01:06:28,450\nUp here is where I have\ndevice collections.\n\n1299\n01:06:28,450 --> 01:06:30,780\nAnd I can take my computers and\ngroup them together.\n\n1300\n01:06:30,780 --> 01:06:33,790\nSo you'll see like here,\nthey've got the Contoso Data Center.\n\n1301\n01:06:33,790 --> 01:06:38,310\nAnd system center servers, and I might\nhave like Gainesville work stations, and\n\n1302\n01:06:38,310 --> 01:06:39,840\nNew York data center and whatever.\n\n1303\n01:06:39,840 --> 01:06:41,590\nAnd you start laying out each of these.\n\n1304\n01:06:41,590 --> 01:06:46,630\nAnd when you give somebody access\ninto SCCM you only give them access\n\n1305\n01:06:46,630 --> 01:06:51,310\nto that particular collection, and\nthat's going to restrict what servers and\n\n1306\n01:06:51,310 --> 01:06:53,380\nsystems they're actually\nallowed to manage.\n\n1307\n01:06:53,380 --> 01:06:56,300\nAnd that's definitely an important thing.\n\n1308\n01:06:56,300 --> 01:06:59,160\nAnd when they deploy to it they're\ndeploying operating systems, and software,\n\n1309\n01:06:59,160 --> 01:07:00,560\nand applications, and\n\n1310\n01:07:00,560 --> 01:07:04,660\nwe have packages that get defined\nhere in our software library.\n\n1311\n01:07:04,660 --> 01:07:08,240\nThese are our applications and packages,\nthis is the software we deploy.\n\n1312\n01:07:08,240 --> 01:07:12,540\nSo you'll see like \"Notepad Plus Plus\",\n\"Skype\" and \"SyncToy\" and\n\n1313\n01:07:12,540 --> 01:07:15,050\nwe can assign permissions there too.\n\n1314\n01:07:15,050 --> 01:07:18,820\nMaybe Mike is allowed to\ndeploy \"Skype\" but I'm not.\n\n1315\n01:07:18,820 --> 01:07:20,150\nAnd so we need to be able to limit that.\n\n1316\n01:07:20,150 --> 01:07:23,854\nOtherwise, I can't deploy \"Skype\"\nwhatever, I'll just log into SCCM, and\n\n1317\n01:07:23,854 --> 01:07:26,267\npush it out to my machine,\nnow I've got it, right?\n\n1318\n01:07:26,267 --> 01:07:31,910\nSo, we need those limits And\nwe do that through these security rules.\n\n1319\n01:07:31,910 --> 01:07:34,410\nAnd these are the built in security rules,\nright here.\n\n1320\n01:07:34,410 --> 01:07:38,250\nYou'll see there's a bunch of them,\nbut you can easily customize them.\n\n1321\n01:07:38,250 --> 01:07:40,130\n>> Right.\n>> If you take any one of these,\n\n1322\n01:07:40,130 --> 01:07:43,370\nI'll take infrastructure administrator,\nall right.\n\n1323\n01:07:43,370 --> 01:07:47,530\nIf I double click on that,\nI'll see a basic summary of what it is,\n\n1324\n01:07:47,530 --> 01:07:50,520\nwho is in it right now, and\nwhat the permissions are.\n\n1325\n01:07:50,520 --> 01:07:51,920\nOkay, so here's the permissions.\n\n1326\n01:07:51,920 --> 01:07:53,740\nAnd see how they're all grayed out, right?\n\n1327\n01:07:53,740 --> 01:07:55,750\nI'm not supposed to change these.\n\n1328\n01:07:55,750 --> 01:07:57,270\nBut, what you can do.\n\n1329\n01:07:57,270 --> 01:08:00,110\nIs you can take an infrastructure\nadministrator, and\n\n1330\n01:08:00,110 --> 01:08:01,850\nmaybe I have a New York data center.\n\n1331\n01:08:01,850 --> 01:08:02,600\nRight?\n\n1332\n01:08:02,600 --> 01:08:06,430\nSo I could right-click and\ncopy it, and create my own.\n\n1333\n01:08:06,430 --> 01:08:09,870\nSo here is gonna be a copy of that\ninfrastructure administrator, and\n\n1334\n01:08:09,870 --> 01:08:14,570\nI'm gonna call this my\nNew York Infrastructure Administrator.\n\n1335\n01:08:15,680 --> 01:08:16,390\nRight?\n\n1336\n01:08:16,390 --> 01:08:19,330\nAnd, I can start to go and\nadjust permissions down here.\n\n1337\n01:08:20,950 --> 01:08:23,850\nAnd now I'll have an infrastructure\nposition that is just for\n\n1338\n01:08:23,850 --> 01:08:25,450\nthe New York side.\n\n1339\n01:08:25,450 --> 01:08:28,560\nAnd I'll turn around and\nset a security scope for that,\n\n1340\n01:08:28,560 --> 01:08:33,150\nbecause you have to limit this\nrole to the servers in New York.\n\n1341\n01:08:33,150 --> 01:08:35,170\n>> Yeah, cuz calling in New York\nis not gonna do that, so.\n\n1342\n01:08:35,170 --> 01:08:36,750\nAnd you don't even have\nto change the permission.\n\n1343\n01:08:36,750 --> 01:08:38,700\nYou might be happy with\nthe permissions in that role, but\n\n1344\n01:08:38,700 --> 01:08:40,470\nyou just wanna focus the scope of that.\n\n1345\n01:08:40,470 --> 01:08:42,010\nYou just wanna manage New York.\n\n1346\n01:08:42,010 --> 01:08:42,648\n>> That's [CROSSTALK].\n>> Or you\n\n1347\n01:08:42,648 --> 01:08:46,559\nmight copy a role because you\ndon't want all those permissions.\n\n1348\n01:08:46,559 --> 01:08:49,187\nYou wanna make your own\ninfrastructure administrator role, but\n\n1349\n01:08:49,187 --> 01:08:51,980\nmaybe you some of those permissions\nyou don't want them to have.\n\n1350\n01:08:51,980 --> 01:08:54,130\nSo you can just copy that,\nduplicate that role and\n\n1351\n01:08:54,130 --> 01:08:56,380\nthen customize it to what you need.\n\n1352\n01:08:56,380 --> 01:09:00,310\n>> Yeah, actually I don't think it will\nlet you create a role from scratch,\n\n1353\n01:09:00,310 --> 01:09:03,870\nyou can import a role if\nsomebody's exported one,\n\n1354\n01:09:03,870 --> 01:09:07,320\nbut you can't\n>> You can't add one just from scratch,\n\n1355\n01:09:07,320 --> 01:09:08,010\nit won't let you.\n\n1356\n01:09:08,010 --> 01:09:10,110\nBut you can import somebody else's.\n\n1357\n01:09:10,110 --> 01:09:14,120\nBut we define those, and\nthen down here under our security scopes\n\n1358\n01:09:14,120 --> 01:09:16,610\nis where we start to tie\nthese things together.\n\n1359\n01:09:16,610 --> 01:09:21,039\nSo I could create a security scope here,\ncalled New York.\n\n1360\n01:09:23,230 --> 01:09:25,577\nAnd by default your\nadministrators are thrown in it.\n\n1361\n01:09:25,577 --> 01:09:29,300\nI never understood why they don't\nlet you edit this stuff right here.\n\n1362\n01:09:29,300 --> 01:09:32,690\nBut once you've got it\ncreated then you can edit it.\n\n1363\n01:09:32,690 --> 01:09:36,074\nAnd you know what it's not going to\nlet me edit it here either, is it.\n\n1364\n01:09:36,074 --> 01:09:37,820\nI have to go to the other screen.\n\n1365\n01:09:37,820 --> 01:09:41,490\nBut you can edit it to change\nwhat's inside of that scope.\n\n1366\n01:09:41,490 --> 01:09:45,500\nAnd you can start to define all\nsorts of stuff that's in that scope.\n\n1367\n01:09:45,500 --> 01:09:47,150\nUsually collections, right?\n\n1368\n01:09:47,150 --> 01:09:50,930\nSo I want to put a collection that I\ncreate called \"New York\" into that scope,\n\n1369\n01:09:50,930 --> 01:09:54,280\nand then I limit the security\nrole to that scope.\n\n1370\n01:09:54,280 --> 01:09:56,380\nSo you have a lot of control over that.\n\n1371\n01:09:56,380 --> 01:09:59,990\nYou can divide it up based on server\ncollections, you can divide it up based\n\n1372\n01:09:59,990 --> 01:10:03,210\non applications, you can divide it\nup based on all sorts of things.\n\n1373\n01:10:03,210 --> 01:10:04,590\nBut you have to do it, right?\n\n1374\n01:10:04,590 --> 01:10:07,420\nMicrosoft has no idea what your\ninfrastructure is like and so\n\n1375\n01:10:07,420 --> 01:10:10,010\nit's up to you to design that.\n\n1376\n01:10:10,010 --> 01:10:10,680\n>> Right.\n\n1377\n01:10:10,680 --> 01:10:13,170\n>> So when we go to plan RM structure,\n\n1378\n01:10:13,170 --> 01:10:15,850\nit goes back to what we said in\nthe very first segment of the show.\n\n1379\n01:10:15,850 --> 01:10:20,750\nWe need to find out what employees\nneed access to what resources.\n\n1380\n01:10:20,750 --> 01:10:23,220\nWhat their management scope needs to be.\n\n1381\n01:10:23,220 --> 01:10:27,370\nAnd then we need to define a policy\nthat gives them the least amount\n\n1382\n01:10:27,370 --> 01:10:31,550\nof access necessary to do their job,\nand we always,\n\n1383\n01:10:31,550 --> 01:10:36,760\nalways need to assign those permissions\nbased on groups, not individual users.\n\n1384\n01:10:36,760 --> 01:10:37,760\n>> Right.\n\n1385\n01:10:37,760 --> 01:10:40,840\n>> Don't get into that hole where your\nassigning permissions to a person.\n\n1386\n01:10:40,840 --> 01:10:45,080\nWe've always gotta follow Microsoft's\nbest practice for permissions, right.\n\n1387\n01:10:45,080 --> 01:10:47,196\nAnd let's see if i can remember\nthis from scratch, Mikey.\n\n1388\n01:10:47,196 --> 01:10:48,630\n>> [LAUGH]\n>> Back me up here if I'm wrong.\n\n1389\n01:10:48,630 --> 01:10:50,899\n>> All right.\n>> But our user accounts are identities,\n\n1390\n01:10:50,899 --> 01:10:54,860\nand we take our identities and\nwe put them in to global groups.\n\n1391\n01:10:54,860 --> 01:10:58,683\nAnd the global groups generally identify\nwhat their Their job position is.\n\n1392\n01:10:58,683 --> 01:11:01,710\n>> Is that kind of like\na role in the company or?\n\n1393\n01:11:01,710 --> 01:11:04,250\n>> Yeah, so\nmaybe their IT administrator,or sales\n\n1394\n01:11:04,250 --> 01:11:05,720\nperson, or whatever.\n\n1395\n01:11:05,720 --> 01:11:11,020\nWe take the global group, and\nif we have a multi domain environment.\n\n1396\n01:11:11,020 --> 01:11:15,700\nWe then put it in a universal group for\nglobal catalog caching.\n\n1397\n01:11:15,700 --> 01:11:16,830\nBut if we don't have multiple domains,\n\n1398\n01:11:16,830 --> 01:11:19,860\nwe can just put it directly\ninto a domain local group.\n\n1399\n01:11:19,860 --> 01:11:24,290\nAnd the domain local group is usually\nname based on some kind of permission.\n\n1400\n01:11:24,290 --> 01:11:29,160\nSo this is the New York SCCM\n\n1401\n01:11:29,160 --> 01:11:33,770\nmanagers group, and so\nI take my New York admin, or whatever.\n\n1402\n01:11:33,770 --> 01:11:38,850\nAnd I'd put them in that group, and put\nthem in the New York SCCM admin's group.\n\n1403\n01:11:38,850 --> 01:11:41,810\nAnd then that domain local group\nis what would get permissions.\n\n1404\n01:11:41,810 --> 01:11:46,710\nI would come in here and\nassign that into one of my security roles.\n\n1405\n01:11:46,710 --> 01:11:49,010\nSo that those users would have that role.\n\n1406\n01:11:49,010 --> 01:11:49,770\nThey'd have that management.\n\n1407\n01:11:50,920 --> 01:11:53,299\nThat makes it easier for\nadding and removing employees.\n\n1408\n01:11:53,299 --> 01:11:56,217\nAnd again, keeping them limited\nto just the area that they need.\n\n1409\n01:11:56,217 --> 01:11:58,495\n>> Yeah, it really does for\ndocumentation purposes,\n\n1410\n01:11:58,495 --> 01:12:00,420\nkeeping track of who has what permissions.\n\n1411\n01:12:00,420 --> 01:12:02,045\nAnd And things change, right?\n\n1412\n01:12:02,045 --> 01:12:04,195\nYou hire new admins,\nadmins change departments,\n\n1413\n01:12:04,195 --> 01:12:07,080\ndon't need those sets of rights and\nprivileges anymore.\n\n1414\n01:12:07,080 --> 01:12:10,430\nAnd if I do it by groups, all I'm\ndoing is changing group membership.\n\n1415\n01:12:10,430 --> 01:12:13,500\nI don't have to go in and\ntry to undelegate permissions or\n\n1416\n01:12:13,500 --> 01:12:16,390\nremove permissions directly\nfrom user account.\n\n1417\n01:12:16,390 --> 01:12:18,350\nMuch better way to go.\n\n1418\n01:12:18,350 --> 01:12:22,020\n>> Now, for this exam objective,\nthey just want us to design, right?\n\n1419\n01:12:22,020 --> 01:12:25,090\nThey want us to know\nthe various influences in\n\n1420\n01:12:25,090 --> 01:12:26,410\ncreating a delegation structure.\n\n1421\n01:12:26,410 --> 01:12:27,860\nThey don't necessarily\nwant us to implement.\n\n1422\n01:12:27,860 --> 01:12:31,330\nWe're just implementing later in the show,\nbut if you want to jump the gun on that,\n\n1423\n01:12:31,330 --> 01:12:35,190\nMicrosoft actually has a TechNet V-Lab,\nand I'll post the link to this.\n\n1424\n01:12:35,190 --> 01:12:36,360\nThe Microsoft TechNet V Labs.\n\n1425\n01:12:36,360 --> 01:12:38,180\nThat's actually what I'm\nlogged into right there.\n\n1426\n01:12:38,180 --> 01:12:40,260\nThey're really good technology for free.\n\n1427\n01:12:40,260 --> 01:12:42,100\nYou go to Microsoft's web page and\nyou launch it and\n\n1428\n01:12:42,100 --> 01:12:43,920\nit's got virtual machines\nthat are configured.\n\n1429\n01:12:43,920 --> 01:12:47,400\nAnd they have a great one which\nis role based administration\n\n1430\n01:12:47,400 --> 01:12:49,330\nin System Center 2012 R2.\n\n1431\n01:12:49,330 --> 01:12:51,360\nAnd specifically\nthe configuration manager.\n\n1432\n01:12:51,360 --> 01:12:53,930\nAnd so they'll walk you through\nan example of that where you\n\n1433\n01:12:53,930 --> 01:12:56,640\ncreate a few administrators,\nyou stick them in different roles and\n\n1434\n01:12:56,640 --> 01:13:00,250\nyou see their limited access\nthey get based on their role.\n\n1435\n01:13:00,250 --> 01:13:02,190\nSo that's what they're talking about.\n\n1436\n01:13:03,230 --> 01:13:06,210\nFor this exam though,\nwe're worried more about the design.\n\n1437\n01:13:06,210 --> 01:13:10,710\nSo when they start to tell you, here's an\nemployee that needs this level of access.\n\n1438\n01:13:10,710 --> 01:13:15,140\nYou've got to choose the answer that\nprovides the most restrictive solution\n\n1439\n01:13:15,140 --> 01:13:16,930\nwhere they're still able to function.\n\n1440\n01:13:16,930 --> 01:13:18,085\n>> Exactly.\nI'm either gonna use one of those\n\n1441\n01:13:18,085 --> 01:13:22,460\npre-built roles or I'm gonna create my own\nand customize those rights and privileges.\n\n1442\n01:13:22,460 --> 01:13:23,552\n>> Yeah.\n\n1443\n01:13:23,552 --> 01:13:26,870\nAll right, so that is probably\na pretty good stopping point for us.\n\n1444\n01:13:26,870 --> 01:13:28,630\nMike, I know we shot\npast our little break.\n\n1445\n01:13:28,630 --> 01:13:30,080\n>> We were having so much fun.\n\n1446\n01:13:30,080 --> 01:13:33,320\n>> Ladies and gentlemen, stay tuned.\n\n1447\n01:13:33,320 --> 01:13:37,560\nWhen we get back, it'll be our final\nsegment as we dive into some of\n\n1448\n01:13:37,560 --> 01:13:40,160\nthe self service portal design and\n\n1449\n01:13:40,160 --> 01:13:45,450\nwe wrap up talking about delegating,\nbut delegating into our private cloud.\n\n1450\n01:13:45,450 --> 01:13:47,010\nSo stay tuned.\n\n1451\n01:13:47,010 --> 01:13:48,495\nWe'll be back in just a moment.\n\n1452\n01:13:48,495 --> 01:13:56,430\n[MUSIC]\n\n1453\n01:13:56,430 --> 01:14:00,940\nFor our last segment we're gonna\ntake a look at self service portals.\n\n1454\n01:14:00,940 --> 01:14:05,550\nAnd it's the first time we've mentioned\nthem, this episode at least I think it is.\n\n1455\n01:14:05,550 --> 01:14:08,660\nAnd you might be asking yourself what the\nheck does this have to do with delegation\n\n1456\n01:14:08,660 --> 01:14:10,820\nwhich is really what we've been\ntalking about this whole time.\n\n1457\n01:14:10,820 --> 01:14:11,320\n>> Right.\n\n1458\n01:14:12,600 --> 01:14:16,220\n>> So far, we've been talking about\ndelegation in terms of administrators.\n\n1459\n01:14:16,220 --> 01:14:17,750\nYou've got people that work in your I.T.\n\n1460\n01:14:17,750 --> 01:14:21,440\ninfrastructure and you need to basically\npartition your infrastructure to stop\n\n1461\n01:14:21,440 --> 01:14:24,170\npeople from bumping into each other and\nhaving access to things they shouldn't.\n\n1462\n01:14:25,170 --> 01:14:28,460\nBut do to the nature of\ncloud based networks,\n\n1463\n01:14:28,460 --> 01:14:30,600\nprivate or public cloud it doesn't matter.\n\n1464\n01:14:30,600 --> 01:14:33,740\nBecause we can rapidly deploy machines and\nbring them up and take them down and\n\n1465\n01:14:33,740 --> 01:14:35,520\ndo all this interesting stuff.\n\n1466\n01:14:35,520 --> 01:14:39,110\nWe can actually get it\nwhere our regular end users\n\n1467\n01:14:39,110 --> 01:14:40,740\nare involved in our IT infrastructure.\n\n1468\n01:14:40,740 --> 01:14:42,480\nNow\n>> Crazy as it may seem.\n\n1469\n01:14:42,480 --> 01:14:43,050\n>> I know.\n\n1470\n01:14:43,050 --> 01:14:44,170\n>> Ten years ago it was red flag.\n\n1471\n01:14:44,170 --> 01:14:45,020\n>> What?\n\n1472\n01:14:45,020 --> 01:14:46,090\nNo way.\n\n1473\n01:14:46,090 --> 01:14:49,530\n>> You want me to take somebody who\ndoesn't understand the difference between\n\n1474\n01:14:49,530 --> 01:14:52,245\na left-click and a right-click and give\nthem some kind of access to my servers.\n\n1475\n01:14:52,245 --> 01:14:56,440\n>> Well,\nthe way it kinda really takes form is, but\n\n1476\n01:14:56,440 --> 01:15:00,520\nyou have people like developers and\nsales people\n\n1477\n01:15:00,520 --> 01:15:03,840\nwho might need virtual machines\nspun up for a brief period of time.\n\n1478\n01:15:03,840 --> 01:15:07,292\nDevelopers use it frequently for\ntesting and developing software.\n\n1479\n01:15:07,292 --> 01:15:11,430\nSales people,\nif your company sells a product,\n\n1480\n01:15:11,430 --> 01:15:16,190\nyou might want your sales personnel to\nbe able to go out to a customer site and\n\n1481\n01:15:16,190 --> 01:15:18,730\nsay here,\nlet me spin you up a demo environment and\n\n1482\n01:15:18,730 --> 01:15:21,420\nyou can see our software in action\nin fact, try it out for a few days.\n\n1483\n01:15:21,420 --> 01:15:24,690\nJust remote into our farmed access and\nhere you go, right?\n\n1484\n01:15:24,690 --> 01:15:29,050\nNow what you need is the sales person\nto be able to create these temporary\n\n1485\n01:15:29,050 --> 01:15:34,040\nenvironments and an external person\nto be able to have access to it.\n\n1486\n01:15:34,040 --> 01:15:36,370\nThis is where things start\nto get really complex.\n\n1487\n01:15:36,370 --> 01:15:40,240\nAnd in the past it meant that\nthe sales person would have to days or\n\n1488\n01:15:40,240 --> 01:15:44,070\neven weeks before going out to that\ncustomer site, send in a ticket to the IT\n\n1489\n01:15:44,070 --> 01:15:47,590\ndepartment saying can you guys please\ncreate this environment and set this and\n\n1490\n01:15:47,590 --> 01:15:50,270\nthis and this and have it ready for\nme when I go out to my customers.\n\n1491\n01:15:50,270 --> 01:15:52,610\n>> And they give you about\n24 hour notice typically.\n\n1492\n01:15:52,610 --> 01:15:53,270\n>> If even.\n\n1493\n01:15:53,270 --> 01:15:55,370\n>> Yeah.\n>> They call you from the customer site.\n\n1494\n01:15:55,370 --> 01:15:57,230\nYeah.\n>> And is this ready?\n\n1495\n01:15:57,230 --> 01:15:59,070\nAnd well, you never asked.\n\n1496\n01:15:59,070 --> 01:16:00,905\nSo it is frustrating, right?\n\n1497\n01:16:00,905 --> 01:16:01,545\n>> Mm-hm.\n>> But\n\n1498\n01:16:01,545 --> 01:16:03,830\nsales people are what keeps\nour companies in business.\n\n1499\n01:16:03,830 --> 01:16:08,110\n>> Absolutely.\n>> So we don't wanna upset them too much.\n\n1500\n01:16:08,110 --> 01:16:12,990\nBut if we have the System Center\nservice manager and\n\n1501\n01:16:12,990 --> 01:16:16,530\nif we have other components like\nthe System Center configuration manager.\n\n1502\n01:16:16,530 --> 01:16:18,260\nWe can automate this process.\n\n1503\n01:16:18,260 --> 01:16:21,590\nWe can make it very easy to\ndeploy machines quickly and\n\n1504\n01:16:21,590 --> 01:16:22,810\neven in combination right?\n\n1505\n01:16:23,830 --> 01:16:29,280\nToday, you don't normally see applications\non stand alone servers like you used to.\n\n1506\n01:16:29,280 --> 01:16:31,920\nUsed to be that if I wanted to\nwhip up a database server that was\n\n1507\n01:16:31,920 --> 01:16:32,540\nall it was you know.\n\n1508\n01:16:32,540 --> 01:16:35,380\nI just brought up a single server\nthat was running that database.\n\n1509\n01:16:35,380 --> 01:16:37,690\nBut today most applications are web based.\n\n1510\n01:16:37,690 --> 01:16:39,690\nAnd so we have web stacks,\n>> Mm-hm.\n\n1511\n01:16:39,690 --> 01:16:41,280\n>> Or application stacks or silos.\n\n1512\n01:16:41,280 --> 01:16:42,660\nThere's all sorts of different names for\nit.\n\n1513\n01:16:42,660 --> 01:16:43,210\n>> Right.\n\n1514\n01:16:43,210 --> 01:16:45,920\n>> Where it's more than one server.\n\n1515\n01:16:45,920 --> 01:16:48,910\nSo, sure, there's a data base server, but\nthere's probably a web server also, and\n\n1516\n01:16:48,910 --> 01:16:50,420\nthere's probably an authentication server.\n\n1517\n01:16:50,420 --> 01:16:53,300\nAnd you need the three different\npieces for the thing to work.\n\n1518\n01:16:53,300 --> 01:16:55,280\nAnd if one piece is missing,\nthe whole thing doesn't work.\n\n1519\n01:16:55,280 --> 01:16:55,980\n>> Right.\n\n1520\n01:16:55,980 --> 01:16:58,550\nSo we're no longer deploying\nsingle virtual machines,\n\n1521\n01:16:58,550 --> 01:17:03,510\nwe're deploying groups of virtual machines\nthat work together as a cohesive unit.\n\n1522\n01:17:03,510 --> 01:17:06,700\nSo when we go to deploy these\nsolutions we have to understand that,\n\n1523\n01:17:06,700 --> 01:17:08,860\nwe have to understand what\nmakes up our application.\n\n1524\n01:17:08,860 --> 01:17:13,260\nAnd that's where that package\nterminology come from we saw earlier.\n\n1525\n01:17:13,260 --> 01:17:16,960\nYou can package things together and we see\nthat in terms of like software drivers and\n\n1526\n01:17:16,960 --> 01:17:19,320\nstuff but it can be entire servers.\n\n1527\n01:17:19,320 --> 01:17:23,960\nFor example, well let's just go to\nthe most complex model first, right?\n\n1528\n01:17:23,960 --> 01:17:25,630\nBecause it's the fun one.\n\n1529\n01:17:25,630 --> 01:17:27,030\nHadoop clusters,\n\n1530\n01:17:27,030 --> 01:17:30,180\nsome of you guys might have heard of\nHadoop clusters if you haven't you'll see\n\n1531\n01:17:30,180 --> 01:17:33,400\nthe terminology inside of the system\ncenter software as you work with it,\n\n1532\n01:17:33,400 --> 01:17:36,940\nwhen you go to setup various templates and\nstuff, you'll see Hadoop clusters.\n\n1533\n01:17:36,940 --> 01:17:38,145\nWhat the heck is that?\n\n1534\n01:17:38,145 --> 01:17:40,940\n>> [LAUGH]\n>> Hadoop clusters are designed for\n\n1535\n01:17:40,940 --> 01:17:43,160\nscaling out.\n\n1536\n01:17:43,160 --> 01:17:45,670\nIf you have a server that's running slow,\nyou got two choices.\n\n1537\n01:17:45,670 --> 01:17:48,350\nYou can scale up or you can scale out.\n\n1538\n01:17:48,350 --> 01:17:51,300\nScale up, we add a faster processor.\n\n1539\n01:17:51,300 --> 01:17:52,300\n>> Beef it up a little bit.\n\n1540\n01:17:52,300 --> 01:17:53,300\n>> Add more RAM.\n\n1541\n01:17:53,300 --> 01:17:55,210\nAdd faster hard drives.\n\n1542\n01:17:55,210 --> 01:17:57,620\nBut there's a limit to\nhow far you can scale up.\n\n1543\n01:17:57,620 --> 01:17:58,410\nRight?\n>> Right.\n\n1544\n01:17:58,410 --> 01:18:01,630\n>> Eventually, you have the fastest\nprocessor on the market.\n\n1545\n01:18:01,630 --> 01:18:04,660\nAnd eventually, you have as much RAM\nas your motherboard can support.\n\n1546\n01:18:04,660 --> 01:18:07,530\nAnd eventually you have the fastest\nhard drive that you can buy.\n\n1547\n01:18:08,550 --> 01:18:11,460\nWhat do you do then when\nyour server is slow?\n\n1548\n01:18:11,460 --> 01:18:12,405\nWait for new technology?\n\n1549\n01:18:12,405 --> 01:18:14,300\n>> [LAUGH]\n>> It's not really an option.\n\n1550\n01:18:14,300 --> 01:18:14,990\nRight?\n\n1551\n01:18:14,990 --> 01:18:15,610\n>> Right.\n\n1552\n01:18:15,610 --> 01:18:17,590\n>> So instead, we scale out.\n\n1553\n01:18:17,590 --> 01:18:21,200\nAnd scaling out is where we\nsay one server's not enough.\n\n1554\n01:18:21,200 --> 01:18:23,010\nLets add more, all right?\n\n1555\n01:18:23,010 --> 01:18:26,650\nHey, I'm busy, my web server's busy,\nlet me add a second web server.\n\n1556\n01:18:26,650 --> 01:18:29,570\nI just doubled my bandwidth,\nor doubled my capacity.\n\n1557\n01:18:29,570 --> 01:18:30,360\nStill busy?\n\n1558\n01:18:30,360 --> 01:18:33,270\nSo add a third one and\nforth one and so on, right?\n\n1559\n01:18:33,270 --> 01:18:36,556\nNow, if those web servers\nwork against a database,\n\n1560\n01:18:36,556 --> 01:18:41,054\nas I add more web servers,\nwhat's happening to that database server?\n\n1561\n01:18:41,054 --> 01:18:42,239\n>> It's getting busier and busier.\n\n1562\n01:18:42,239 --> 01:18:45,070\n>> So, we need a plan for\nthat to scale out, too.\n\n1563\n01:18:45,070 --> 01:18:46,250\nI need more database servers.\n\n1564\n01:18:46,250 --> 01:18:50,930\nMaybe read only copies, or whatever,\nfor my OLAP versus OLTP and\n\n1565\n01:18:50,930 --> 01:18:53,230\nall that database stuff.\n\n1566\n01:18:53,230 --> 01:18:54,440\nI can do that, right?\n\n1567\n01:18:54,440 --> 01:18:56,210\nWell that's what a Hadoop cluster does.\n\n1568\n01:18:56,210 --> 01:18:58,930\nA Hadoop cluster says, we're gonna\nmake it where your web front and\n\n1569\n01:18:58,930 --> 01:19:00,930\nyour database are designed to scale out.\n\n1570\n01:19:00,930 --> 01:19:04,380\nAnd so in the beginning, yes,\nyou might have just one web server and\n\n1571\n01:19:04,380 --> 01:19:05,620\none database server.\n\n1572\n01:19:05,620 --> 01:19:08,450\nBut as they get busier,\nwe can clone the web server,\n\n1573\n01:19:08,450 --> 01:19:11,130\nwe can clone the database server,\nbecause they're designed to handle that.\n\n1574\n01:19:11,130 --> 01:19:12,950\nYou can't just clone a database server.\n\n1575\n01:19:12,950 --> 01:19:14,800\nBecause, what if you make\nchange to one of them?\n\n1576\n01:19:15,990 --> 01:19:17,670\nChange has happened to\nthe other ones too right?\n\n1577\n01:19:17,670 --> 01:19:21,460\nSo databases have special needs,\nand that's a challenge.\n\n1578\n01:19:21,460 --> 01:19:24,020\nBut when we go to deploy\na package like this,\n\n1579\n01:19:24,020 --> 01:19:25,820\nthat may be exactly what\nwe're dealing with.\n\n1580\n01:19:25,820 --> 01:19:31,520\nSo we need to define that inside of the\nSCCM and inside of the SCSM, the surface\n\n1581\n01:19:31,520 --> 01:19:35,030\nmanager, to make sure that it understands\nthe relationship of these items.\n\n1582\n01:19:35,030 --> 01:19:40,790\nSo deployment can be very complex\nin those type of environments.\n\n1583\n01:19:40,790 --> 01:19:42,997\nHow can we automate this?\n\n1584\n01:19:42,997 --> 01:19:48,575\nIf it is just virtual machines, we used\nto have a technology inside the SCVMM.\n\n1585\n01:19:48,575 --> 01:19:53,150\nThe SCVMM had its own self-service portal,\na web page people could go to and\n\n1586\n01:19:53,150 --> 01:19:54,020\nAnd full VMs.\n\n1587\n01:19:54,020 --> 01:19:55,946\nIt was pretty neat.\n\n1588\n01:19:55,946 --> 01:19:57,688\nMike, you work it,\nright, with the old one?\n\n1589\n01:19:57,688 --> 01:19:58,408\n>> Mm-hm.\n\n1590\n01:19:58,408 --> 01:19:59,870\nIt was pretty easy.\nRelatively easy to set up.\n\n1591\n01:19:59,870 --> 01:20:02,530\nYour end users could just\ngo to this web page and\n\n1592\n01:20:02,530 --> 01:20:04,840\nfire up some new virtual\nmachines based off templates.\n\n1593\n01:20:04,840 --> 01:20:06,700\n>> And they had these quotas, right?\n\n1594\n01:20:06,700 --> 01:20:08,300\n>> Mm-hm.\n>> They had points that would spend, so\n\n1595\n01:20:08,300 --> 01:20:10,420\nevery VM they spun up ate some points up,\nand\n\n1596\n01:20:10,420 --> 01:20:12,540\nthen they could remove\nVM's to free up points.\n\n1597\n01:20:12,540 --> 01:20:13,990\nIt was a good system.\n\n1598\n01:20:13,990 --> 01:20:14,910\nRight?\n\n1599\n01:20:14,910 --> 01:20:18,680\nBut it was fairly limited, and\nit was basically tied into SCVNM, and\n\n1600\n01:20:18,680 --> 01:20:23,060\nthat meant that for somebody to access\nit they really had to access SCVNM,\n\n1601\n01:20:23,060 --> 01:20:24,770\nwhich we don't always want.\n\n1602\n01:20:24,770 --> 01:20:27,090\n>> And if it was a complex app\nlike you were talking about,\n\n1603\n01:20:27,090 --> 01:20:28,480\nthey had to have that knowledge as well,\n\n1604\n01:20:28,480 --> 01:20:32,160\nbecause they were just, ended up one\nvertical machine off of a template.\n\n1605\n01:20:32,160 --> 01:20:33,626\n>> Yeah it just wasn't very advanced.\n\n1606\n01:20:33,626 --> 01:20:37,820\nSo now they've rolled it into\na separate set of products, and\n\n1607\n01:20:37,820 --> 01:20:40,780\nthere's actually two different products\nyou'll see in the exam objectives.\n\n1608\n01:20:40,780 --> 01:20:46,010\nOne is the app controller, and the other\none is the service manager itself.\n\n1609\n01:20:47,070 --> 01:20:49,860\nBoth of these are capable\ncreating self service portals.\n\n1610\n01:20:49,860 --> 01:20:54,270\nThe app controller is the replacement for\nthe old SCVNM self service portal.\n\n1611\n01:20:54,270 --> 01:20:57,700\nIt is designed for just virtual machines.\n\n1612\n01:20:57,700 --> 01:20:59,700\nIf you want an end user to be able\nto browse through a web page and\n\n1613\n01:20:59,700 --> 01:21:03,860\nstart spinning out virtual machines,\nwith the app controller, they can.\n\n1614\n01:21:03,860 --> 01:21:09,627\nAnd it's smart enough to understand\nclusters and tied together VM's and stuff.\n\n1615\n01:21:09,627 --> 01:21:12,732\nIt is very good for just virtual machines.\n\n1616\n01:21:12,732 --> 01:21:17,544\nAlright, the self service portal created\nby the app controller is actually a silver\n\n1617\n01:21:17,544 --> 01:21:18,773\nlight application.\n\n1618\n01:21:18,773 --> 01:21:19,786\nThis is where we cringe, right.\n\n1619\n01:21:19,786 --> 01:21:20,440\n>> Yeah, just a little.\n\n1620\n01:21:20,440 --> 01:21:22,860\n>> [LAUGH] It's a silver light application\nthat is built on top of share points.\n\n1621\n01:21:22,860 --> 01:21:24,389\nAnd what that means.\n\n1622\n01:21:24,389 --> 01:21:27,627\n[LAUGH] This is one of my favorite things.\n\n1623\n01:21:27,627 --> 01:21:33,930\nBut what it means is that, It's not\nthe end user accessing your SCVNM anymore.\n\n1624\n01:21:33,930 --> 01:21:35,120\nAccessing Share Point.\n\n1625\n01:21:35,120 --> 01:21:37,440\nAnd Share Point's designed for\nend users, and so\n\n1626\n01:21:37,440 --> 01:21:40,300\nit's putting user access where it\nshould have been in the first place.\n\n1627\n01:21:40,300 --> 01:21:40,800\nRight?\n\n1628\n01:21:40,800 --> 01:21:45,605\nNot on your management server, but\non these dedicated client type servers.\n\n1629\n01:21:45,605 --> 01:21:46,975\nSo it's all run inside a Share point.\n\n1630\n01:21:46,975 --> 01:21:50,215\nThe users log in and then they have\nthese forms that they have access to and\n\n1631\n01:21:50,215 --> 01:21:51,745\nthey get this consistent experience and\n\n1632\n01:21:51,745 --> 01:21:54,545\nare able to work with virtual machines\nin an environment they're used to.\n\n1633\n01:21:56,005 --> 01:21:59,004\nIf you want to go beyond just\nvirtual machines, though,\n\n1634\n01:21:59,004 --> 01:22:02,745\nthat's where the System Center\nService Manager comes in.\n\n1635\n01:22:02,745 --> 01:22:05,355\nThe Service Manager can\ncreate self service\n\n1636\n01:22:05,355 --> 01:22:08,390\nportals that go beyond\njust virtual machines.\n\n1637\n01:22:08,390 --> 01:22:14,280\nIt can do support tickets, bug tracking,\nfrequently asked question list.\n\n1638\n01:22:14,280 --> 01:22:17,180\nYou can do all sorts of\nother types of forums.\n\n1639\n01:22:17,180 --> 01:22:19,620\nAnd so people can go to it and they can\nsay, all right, let me go to this forum.\n\n1640\n01:22:19,620 --> 01:22:21,050\nI'm gonna spin up a VM.\n\n1641\n01:22:21,050 --> 01:22:22,800\nAnd they can do that, all right?\n\n1642\n01:22:22,800 --> 01:22:25,780\nAnd so they'd say, I'd need a web server,\nand they go through a little form,\n\n1643\n01:22:25,780 --> 01:22:29,270\nthey fill it out, and on the back end\nit generates those virtual machines and\n\n1644\n01:22:29,270 --> 01:22:31,390\nit gives them the ability\nto console into it.\n\n1645\n01:22:31,390 --> 01:22:33,812\nDone.\nBut then the virtual machine crashes.\n\n1646\n01:22:33,812 --> 01:22:37,780\nSo they just go down to the next\ntab to submit a support ticket.\n\n1647\n01:22:37,780 --> 01:22:39,260\nRight.\nAnd they fill that ticket out and\n\n1648\n01:22:39,260 --> 01:22:42,700\nit goes right into the system center\nservice manager and we see that ticket and\n\n1649\n01:22:42,700 --> 01:22:44,030\nwe can act on it.\n\n1650\n01:22:44,030 --> 01:22:46,120\nOr they're ready to get\nrid of the VM's and so\n\n1651\n01:22:46,120 --> 01:22:48,980\nthey can submit a cancellation request and\nthey can remove it.\n\n1652\n01:22:48,980 --> 01:22:51,290\nIt can even go beyond that and\nstart doing billing.\n\n1653\n01:22:51,290 --> 01:22:55,480\nWe can bill the people actual\ndollar amounts for the CPU and\n\n1654\n01:22:55,480 --> 01:22:57,460\nRAM they consume per hour.\n\n1655\n01:22:57,460 --> 01:23:00,440\nYou can basically run\nyour own Windows Azure.\n\n1656\n01:23:00,440 --> 01:23:04,620\nby using Systems Center Service Manager's\nself service portals.\n\n1657\n01:23:04,620 --> 01:23:06,490\nThat was really hard to say.\n\n1658\n01:23:06,490 --> 01:23:07,935\n>> You got that on the first try though,\nthat was good.\n\n1659\n01:23:07,935 --> 01:23:09,480\n[LAUGH]\n>> I had to slow down right there\n\n1660\n01:23:09,480 --> 01:23:09,980\ntowards the end.\n\n1661\n01:23:09,980 --> 01:23:12,120\nI didn't think I was going to make it.\n\n1662\n01:23:12,120 --> 01:23:14,400\nBut you could really build\nsome impressive stuff.\n\n1663\n01:23:14,400 --> 01:23:16,795\nLet me show you something really,\nreally simple.\n\n1664\n01:23:16,795 --> 01:23:19,470\nJust a real basic self service portal.\n\n1665\n01:23:19,470 --> 01:23:22,668\nHere's a SharePoint site\nthat I've logged into.\n\n1666\n01:23:22,668 --> 01:23:26,240\nIt's got the service management\nportal basically added to it.\n\n1667\n01:23:26,240 --> 01:23:29,340\nAnd this is just a real simple\nSharePoint site designed for\n\n1668\n01:23:29,340 --> 01:23:31,530\nsupporting support tickets.\n\n1669\n01:23:31,530 --> 01:23:35,380\nAn end user can browse through here and\nthey see their existing support tickets.\n\n1670\n01:23:35,380 --> 01:23:37,890\nAnd they have a link to\nbe able to search through\n\n1671\n01:23:37,890 --> 01:23:40,060\nthe frequently asked questions or\nwhatever.\n\n1672\n01:23:40,060 --> 01:23:43,800\nAnd they can come down here and\nchoose to create a request.\n\n1673\n01:23:43,800 --> 01:23:44,430\nAll right?\n\n1674\n01:23:44,430 --> 01:23:47,870\nAnd so they can create a support request\nright here, and it's gonna fire up.\n\n1675\n01:23:47,870 --> 01:23:52,810\nAnd so here it's asking me to, or allowing\nme to submit a ticket for an incident.\n\n1676\n01:23:52,810 --> 01:23:55,130\nAnd I can go to the request and\nI can fill it out.\n\n1677\n01:23:55,130 --> 01:23:55,640\nRight?\n\n1678\n01:23:55,640 --> 01:23:58,860\nSo I can say like,\nWeb Server VM is freezing.\n\n1679\n01:24:01,240 --> 01:24:03,760\nAnd then I can specify the symptoms.\n\n1680\n01:24:03,760 --> 01:24:07,800\nServer runs out of RAM,\nwhatever it is that I need to submit.\n\n1681\n01:24:07,800 --> 01:24:10,460\nAnd then you can go through and\nspecify any additional information.\n\n1682\n01:24:10,460 --> 01:24:15,030\nYou completely design these forms so you\ncan ask for whatever it is that you want.\n\n1683\n01:24:15,030 --> 01:24:17,220\nI'll set my priority to medium.\n\n1684\n01:24:17,220 --> 01:24:18,310\nI'll connect contact info.\n\n1685\n01:24:18,310 --> 01:24:21,920\nWe'll just say reach me, Don@ITPro.TV.\n\n1686\n01:24:21,920 --> 01:24:25,880\nAlright, we've got review and submit, I\ncan see my settings, and then I submit and\n\n1687\n01:24:25,880 --> 01:24:26,740\nthere goes my ticket.\n\n1688\n01:24:26,740 --> 01:24:28,210\nNow, where's my ticket go?\n\n1689\n01:24:28,210 --> 01:24:33,200\nNot to nowhere, right, it just goes here,\nand when I go to view my request\n\n1690\n01:24:33,200 --> 01:24:36,380\nI can see that request and\nit'll just be sitting right there.\n\n1691\n01:24:36,380 --> 01:24:40,620\nWeb server is freezing and so\nfar it's just sitting here and\n\n1692\n01:24:40,620 --> 01:24:42,410\nthat's the end of it, right.\n\n1693\n01:24:42,410 --> 01:24:47,680\nMeanwhile, for us on the back end,\nwe log into our service manager.\n\n1694\n01:24:47,680 --> 01:24:53,326\nAnd inside of our service manager\nwe can browse into our library.\n\n1695\n01:24:55,239 --> 01:24:57,160\nAnd our, whoops.\n\n1696\n01:24:57,160 --> 01:24:58,240\nI've going to the wrong spot.\n\n1697\n01:24:58,240 --> 01:24:58,870\nShoot.\n\n1698\n01:24:58,870 --> 01:25:01,560\nLet's see,\nwhere is that one buried away at?\n\n1699\n01:25:01,560 --> 01:25:02,930\nBack under administration and live.\n\n1700\n01:25:02,930 --> 01:25:03,430\n>> Notifications?\n\n1701\n01:25:06,320 --> 01:25:07,260\n>> You know what I forgot.\n\n1702\n01:25:07,260 --> 01:25:08,030\nOh work items.\n\n1703\n01:25:08,030 --> 01:25:09,440\nDaggonit I'm in the wrong spot.\n\n1704\n01:25:09,440 --> 01:25:11,720\nI go into my work items and\nit will actually show up in here.\n\n1705\n01:25:11,720 --> 01:25:14,390\nAnd you know I didn't write this form so\nI don't know if it's.\n\n1706\n01:25:14,390 --> 01:25:16,230\nIt looks like it is an incident.\n\n1707\n01:25:16,230 --> 01:25:19,560\nWhen you create a form like that,\nit can be an incident, or a problem, or\n\n1708\n01:25:19,560 --> 01:25:20,460\na service request.\n\n1709\n01:25:20,460 --> 01:25:22,320\nIt depends on what they're asking for.\n\n1710\n01:25:22,320 --> 01:25:24,348\nNormally, if they're like\nrequesting some VM or\n\n1711\n01:25:24,348 --> 01:25:26,386\nsomething that would be\na service request right.\n\n1712\n01:25:26,386 --> 01:25:28,710\nThey're asking you do do something for\nthem.\n\n1713\n01:25:28,710 --> 01:25:32,200\nBut a problem or an incident is\nwhat we're normally dealing with,\n\n1714\n01:25:32,200 --> 01:25:33,880\nand this one apparently\nbecame an incident.\n\n1715\n01:25:33,880 --> 01:25:35,940\nSo let's go here to All Incidents, and\n\n1716\n01:25:35,940 --> 01:25:39,560\nit'll show up in here because\nthat's where it was submitted to.\n\n1717\n01:25:39,560 --> 01:25:41,010\nSo, it's been deployed.\n\n1718\n01:25:41,010 --> 01:25:46,140\nAnd you know, this is going to give\nme that resolution problem, isn't it.\n\n1719\n01:25:46,140 --> 01:25:47,100\n>> Yeah.\n>> There's\n\n1720\n01:25:47,100 --> 01:25:50,240\nsome little quirks with the virtual\nmachine when you're viewing,\n\n1721\n01:25:50,240 --> 01:25:53,702\nthere we go, when you're viewing in\nthis little window like I'm doing.\n\n1722\n01:25:53,702 --> 01:25:54,370\nThere it is.\nSo\n\n1723\n01:25:54,370 --> 01:25:56,280\nI can see this incident\nrequest right here.\n\n1724\n01:25:56,280 --> 01:26:00,210\nWeb server is freezing, I can see\nthe information down here about it,\n\n1725\n01:26:00,210 --> 01:26:05,180\nthe detailed block of data\nthat the user submitted, and\n\n1726\n01:26:05,180 --> 01:26:05,990\nwe can start to work with it.\n\n1727\n01:26:05,990 --> 01:26:08,720\nAnd you'll see there's a lot more fields\nin here the user didn't provide, but\n\n1728\n01:26:08,720 --> 01:26:10,130\nwe can fill these in.\n\n1729\n01:26:10,130 --> 01:26:12,880\nWe can assign it to a person\nto work the ticket.\n\n1730\n01:26:12,880 --> 01:26:17,250\nWe can change the status as we work with\nit, and if we find that it's tied to\n\n1731\n01:26:17,250 --> 01:26:21,630\na bug in our software,\nthat's when we can create a problem.\n\n1732\n01:26:21,630 --> 01:26:24,480\nThat'll create a problem that flags\nthe developers to say, hey, you guys,\n\n1733\n01:26:24,480 --> 01:26:27,270\nthere's an issue that you\nguys need to take a look at.\n\n1734\n01:26:27,270 --> 01:26:30,850\nOr if we need to do a change request to\nfix it, we can create it from right here.\n\n1735\n01:26:30,850 --> 01:26:35,120\nSo we have this full workflow,\nall built into the service manager, and\n\n1736\n01:26:35,120 --> 01:26:38,580\nthe end user sees it through\nthe SharePoint side.\n\n1737\n01:26:38,580 --> 01:26:42,500\nNow on the planning and\ndelegation side of things,\n\n1738\n01:26:42,500 --> 01:26:47,480\nour main obstacle here is that this\ndoes require a SharePoint plan.\n\n1739\n01:26:48,920 --> 01:26:51,590\nWith SharePoint,\nyou've got your web front end,\n\n1740\n01:26:51,590 --> 01:26:56,774\nright the actual SharePoint server,\nyou've got your operation database and\n\n1741\n01:26:56,774 --> 01:27:00,165\nso that's where all of your data\nis stored in this database.\n\n1742\n01:27:00,165 --> 01:27:04,545\nAnd when people log into SharePoint,\nthey're also accessing this database and\n\n1743\n01:27:04,545 --> 01:27:06,585\nthe backend to actually get\ntheir pages and other data.\n\n1744\n01:27:06,585 --> 01:27:09,185\nAnd then there's some kind of\nauthentication server in the mix too.\n\n1745\n01:27:09,185 --> 01:27:12,465\nSo you've got these various\ncomponents that are involved and\n\n1746\n01:27:12,465 --> 01:27:17,575\nthat means you more than likely don't\nwant to expose it to the internet.\n\n1747\n01:27:17,575 --> 01:27:18,325\nRight?\n>> Mm-hm.\n\n1748\n01:27:18,325 --> 01:27:21,825\n>> SharePoint sites are best\nnot exposed to the internet.\n\n1749\n01:27:21,825 --> 01:27:25,260\nIf you do,\nyou absolutely need to use SSL, right.\n\n1750\n01:27:25,260 --> 01:27:28,150\nYou got to Secure Sequel Layer,\nyou've got to encrypt that data.\n\n1751\n01:27:28,150 --> 01:27:32,580\nBut even better would be to\nuse a VPN tunnel or a proxied\n\n1752\n01:27:32,580 --> 01:27:36,660\nconnection through something like\nthe Threat Management Gateway, the TMG.\n\n1753\n01:27:36,660 --> 01:27:40,140\nWhich is, what's the suite\nthat that's a part of, Mike?\n\n1754\n01:27:40,140 --> 01:27:40,740\nWhat's that called?\n\n1755\n01:27:40,740 --> 01:27:41,240\nShoot.\n\n1756\n01:27:42,950 --> 01:27:43,650\nForgot the name of it now.\n\n1757\n01:27:43,650 --> 01:27:45,610\n>> It's not in Forefront anymore.\n\n1758\n01:27:45,610 --> 01:27:46,700\nIt's changed, hasn't it?\n\n1759\n01:27:46,700 --> 01:27:50,215\n>> Yeah, it's part of their new, it's\na product that's been around a long time.\n\n1760\n01:27:50,215 --> 01:27:53,235\nIt used to be the Internet Security\nAcceleration or ISA server.\n\n1761\n01:27:53,235 --> 01:27:56,531\nNow it's the threat management gateway and\nthey moved it into another.\n\n1762\n01:27:56,531 --> 01:27:59,015\nPackage, but it's still called\na threat management gateway.\n\n1763\n01:27:59,015 --> 01:28:02,621\nBut you can use that to proxy your\nconnections or other appliances, but\n\n1764\n01:28:02,621 --> 01:28:05,625\nyou typically don't want to\nexpose this to the Internet and\n\n1765\n01:28:05,625 --> 01:28:08,420\nthat needs to be a part of\nyour design practices, too.\n\n1766\n01:28:08,420 --> 01:28:10,390\nAll of these self service portals.\n\n1767\n01:28:10,390 --> 01:28:15,190\nIt's good software, but\nit's really designed for internal use.\n\n1768\n01:28:15,190 --> 01:28:18,510\nActually, it can become\na little bit dangerous.\n\n1769\n01:28:19,890 --> 01:28:21,793\nAll right, so these self service portals,\n\n1770\n01:28:21,793 --> 01:28:24,089\nI showed you right here,\nwhich is a support ticket.\n\n1771\n01:28:24,089 --> 01:28:27,410\nBut we can go beyond that with things\nlike Service Request that'll request\n\n1772\n01:28:27,410 --> 01:28:30,390\nspawning virtual machines on demand and\nso on.\n\n1773\n01:28:30,390 --> 01:28:32,720\nWe'll see some of that as\nwe go through other labs.\n\n1774\n01:28:32,720 --> 01:28:37,610\nIf you've worked with the SCVMM\nyou've probably seen it there, too.\n\n1775\n01:28:37,610 --> 01:28:41,510\nApp Controller is not much different,\nexcept it doesn't have all the support\n\n1776\n01:28:41,510 --> 01:28:48,110\nticket side, and all these other different\ncomponents that the Service Manager does.\n\n1777\n01:28:48,110 --> 01:28:50,190\nSo let's see, did we leave anything out?\n\n1778\n01:28:50,190 --> 01:28:54,750\nI think that pretty much gets us\nright through to the end there.\n\n1779\n01:28:54,750 --> 01:28:58,810\nIf you wanna get exposed to creating\nthese self-service portals and so\n\n1780\n01:28:58,810 --> 01:29:03,200\non, Microsoft does have a nice little V\nLab that focuses specifically on this one.\n\n1781\n01:29:03,200 --> 01:29:07,030\nI'll post a link to it but we're gonna\ndo an episode later where we're actually\n\n1782\n01:29:07,030 --> 01:29:08,639\ngonna take you through that lab.\n\n1783\n01:29:08,639 --> 01:29:12,040\nAnd we'll go through implementing it and\nhow that process works.\n\n1784\n01:29:12,040 --> 01:29:15,600\nI know the exam doesn't technically\nrequire it but it's good information to\n\n1785\n01:29:15,600 --> 01:29:19,480\nknow and seeing how to do it helps\nyou remember and understand.\n\n1786\n01:29:21,388 --> 01:29:25,580\nAll right, we've kind of gone\nthe long way around it but that\n\n1787\n01:29:26,600 --> 01:29:31,720\nin a nutshell is building up\nour administrative model.\n\n1788\n01:29:31,720 --> 01:29:35,360\nSo, doubling all the way back to the\nbeginning, all of this kind of fell under\n\n1789\n01:29:35,360 --> 01:29:38,680\nthe helm of that administrative model and\nunderstanding that\n\n1790\n01:29:38,680 --> 01:29:43,460\nas we build out our infrastructure you've\ngotta restrict the access people have.\n\n1791\n01:29:43,460 --> 01:29:46,950\nEither by their region,\ntheir office, their job role or\n\n1792\n01:29:46,950 --> 01:29:49,200\nwhatever their responsibilities are.\n\n1793\n01:29:49,200 --> 01:29:50,180\nPartitioning your network so\n\n1794\n01:29:50,180 --> 01:29:53,150\nthey only have access to\nthe resources they absolutely need.\n\n1795\n01:29:53,150 --> 01:29:56,162\n>> Really is an important part of\nour design process because that,\n\n1796\n01:29:56,162 --> 01:29:59,509\nhow we decide to delegate that\nadministration really has a big impact on\n\n1797\n01:29:59,509 --> 01:30:01,827\nhow we implement things and\nhow we set things up.\n\n1798\n01:30:01,827 --> 01:30:04,279\nCreating those collections,\ndeciding whether or\n\n1799\n01:30:04,279 --> 01:30:08,384\nnot we're gonna let those branches have\ncontrol, or it's gonna be centralized, so\n\n1800\n01:30:08,384 --> 01:30:10,224\nthis all has to be that big first step.\n\n1801\n01:30:10,224 --> 01:30:11,025\n>> All right.\n\n1802\n01:30:11,025 --> 01:30:14,950\nWell, I think that pretty much\nwraps it up for this one.\n\n1803\n01:30:14,950 --> 01:30:18,370\nI know it wasn't the most nail-biting,\nedge of your seat,\n\n1804\n01:30:18,370 --> 01:30:20,350\nexciting episode as far as hands-on labs.\n\n1805\n01:30:20,350 --> 01:30:21,680\nWe'll see more of those\na little bit later,\n\n1806\n01:30:21,680 --> 01:30:25,090\nbut the design aspects are what we\ngotta hit right up here up front.\n\n1807\n01:30:25,090 --> 01:30:27,641\nAnd it is an important part of the exam,\nso.\n\n1808\n01:30:27,641 --> 01:30:31,312\nAll right, well let me remind you guys,\nif you have questions on any of this,\n\n1809\n01:30:31,312 --> 01:30:34,760\nlive during the show you can jump\nover to http://itpro.tv/live and\n\n1810\n01:30:34,760 --> 01:30:37,630\nyou'll see the chat box\nright beneath the video.\n\n1811\n01:30:37,630 --> 01:30:38,580\nPost your questions there.\n\n1812\n01:30:38,580 --> 01:30:41,160\nWe monitor and answer during the show.\n\n1813\n01:30:41,160 --> 01:30:45,550\nIf you have any questions after the show,\nwell, check out our Q & A forms.\n\n1814\n01:30:45,550 --> 01:30:49,162\nAt the top of every page on the ITProTV\nsite you'll see a link that says Q&A.\n\n1815\n01:30:49,162 --> 01:30:50,240\nClick on it.\n\n1816\n01:30:50,240 --> 01:30:51,910\nHope on in there and post a question.\n\n1817\n01:30:51,910 --> 01:30:52,551\nWe monitor and\n\n1818\n01:30:52,551 --> 01:30:55,980\nanswer that too which is a great way to\ninteract with us when we're not live.\n\n1819\n01:30:55,980 --> 01:30:56,749\n>> That's right.\n>> Because,\n\n1820\n01:30:56,749 --> 01:30:57,952\nwell, we're not live all the time, right?\n\n1821\n01:30:57,952 --> 01:31:03,940\n[LAUGH] So, be sure to check that out,\nit is a resource there for you.\n\n1822\n01:31:03,940 --> 01:31:05,940\nAll right,\nwell I hope you guys enjoyed the show.\n\n1823\n01:31:05,940 --> 01:31:08,070\nSigning off for ITProTV I'm Don Pezet.\n\n1824\n01:31:08,070 --> 01:31:09,270\n>> And I'm Mike Rodrick.\n\n1825\n01:31:09,270 --> 01:31:10,790\n>> And we'll see you next time.\n\n1826\n01:31:10,790 --> 01:31:20,790\n[MUSIC]\n\n1827\n01:31:22,364 --> 01:31:28,220\n>> [NOISE]\n\n",
          "vimeoId": "110244914"
        },
        {
          "description": "",
          "length": "4016",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-2-design-a-monitoring-strategy-102814.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-2-design-a-monitoring-strategy-102814-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-2-design-a-monitoring-strategy-102814-sm.jpg",
          "title": "Design A Monitoring Strategy",
          "transcript": "1\n00:00:00,012 --> 00:00:10,012\n[SOUND]\n\n2\n00:00:15,012 --> 00:00:20,132\n[MUSIC]\n\n3\n00:00:22,492 --> 00:00:32,492\n[MUSIC]\n\n4\n00:00:33,524 --> 00:00:36,548\nAll right, good morning,\ngood afternoon, and good evening,\n\n5\n00:00:36,548 --> 00:00:38,850\nand welcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,850 --> 00:00:40,150\nI'm your host, Don Pezet.\n\n7\n00:00:40,150 --> 00:00:41,950\nBack again with Mr. Mike Broderick.\n\n8\n00:00:41,950 --> 00:00:42,690\nHow's it going, Mike?\n\n9\n00:00:42,690 --> 00:00:43,970\n>> Very good.\nHow are you doing, Dom?\n\n10\n00:00:43,970 --> 00:00:44,960\n>> I am doing swell.\n\n11\n00:00:44,960 --> 00:00:45,840\n>> Excited for today?\n\n12\n00:00:45,840 --> 00:00:46,490\n>> Absolutely.\n\n13\n00:00:46,490 --> 00:00:49,820\nYou know, we're going to be diving\ninto designing a monitoring strategy.\n\n14\n00:00:49,820 --> 00:00:51,870\nAnd with all the things that we've\ntalked about in the previous segments,\n\n15\n00:00:51,870 --> 00:00:53,770\nyou'd think that's what this whole exam-\n>> [LAUGH]\n\n16\n00:00:53,770 --> 00:00:54,800\n>> Was about.\n\n17\n00:00:54,800 --> 00:00:56,530\nIt's one of the more important things.\n\n18\n00:00:56,530 --> 00:00:57,894\nRight?\nMonitoring your system to keep\n\n19\n00:00:57,894 --> 00:00:58,620\nit available.\n\n20\n00:00:58,620 --> 00:01:00,640\n>> Especially as our networks get more and\nmore complex.\n\n21\n00:01:00,640 --> 00:01:03,950\nIt's very important that we know that all\nthe different pieces are working together,\n\n22\n00:01:03,950 --> 00:01:07,440\nworking properly, and giving us\nthat performance level that we need\n\n23\n00:01:07,440 --> 00:01:10,270\nto support our end users and\nour customers.\n\n24\n00:01:10,270 --> 00:01:12,640\n>> Yeah,\neven in environments that are centralized,\n\n25\n00:01:12,640 --> 00:01:15,500\nwhere you've got like a single IT\ndepartment and a single data center.\n\n26\n00:01:15,500 --> 00:01:19,030\nThat used to be real easy to monitor,\nbecause you were in the building with your\n\n27\n00:01:19,030 --> 00:01:23,210\nequipment, and it was incredibly expensive\nto go to a multi-datacenter model.\n\n28\n00:01:23,210 --> 00:01:24,870\nSo a lot of people kept it simple.\n\n29\n00:01:24,870 --> 00:01:28,500\nBut today, thanks to services like\nWindows Azure and Amazon Web Services and\n\n30\n00:01:28,500 --> 00:01:33,150\nthose guys, it's really inexpensive\nto bring up a complete mirror\n\n31\n00:01:33,150 --> 00:01:37,230\noperation in a data center across\nthe country, across the world.\n\n32\n00:01:37,230 --> 00:01:37,860\nAnd now,\n\n33\n00:01:37,860 --> 00:01:41,830\nyou're having to monitor servers that\naren't even in the same continent as you.\n\n34\n00:01:41,830 --> 00:01:43,520\nAnd that really does create a challenge.\n\n35\n00:01:43,520 --> 00:01:44,470\n>> And that is a big challenge.\n\n36\n00:01:44,470 --> 00:01:47,160\nExcept for now that we've got all these\nfantastic tools that we're gonna teach you\n\n37\n00:01:47,160 --> 00:01:48,830\nguys about today.\n\n38\n00:01:48,830 --> 00:01:50,052\nWe've got you covered.\n\n39\n00:01:50,052 --> 00:01:50,970\n[LAUGH]\n>> Yeah.\n\n40\n00:01:50,970 --> 00:01:51,590\nAll right.\nSo\n\n41\n00:01:51,590 --> 00:01:54,400\nthe official exam objective\nthat we're tackling here,\n\n42\n00:01:54,400 --> 00:01:59,760\nwe're still in the manage and maintain\na server infrastructure kind of area.\n\n43\n00:01:59,760 --> 00:02:03,035\nAnd we're gonna be breaking down\ninto design a monitoring strategy.\n\n44\n00:02:03,035 --> 00:02:03,950\n>> Mm-hm.\n\n45\n00:02:03,950 --> 00:02:06,030\n>> When you have a network environment,\n\n46\n00:02:06,030 --> 00:02:09,070\nyou've got all sorts of stuff\nthat you need to monitor.\n\n47\n00:02:09,070 --> 00:02:12,230\nAnd you've gotta choose\nthe appropriate tools for the job.\n\n48\n00:02:12,230 --> 00:02:14,170\nAnd I'm not just talking Microsoft here,\nright.\n\n49\n00:02:14,170 --> 00:02:16,540\nBecause you've got switches,\nrouters, firewalls,\n\n50\n00:02:16,540 --> 00:02:19,480\nall sorts of other gear that's\ninvolved in your communications.\n\n51\n00:02:19,480 --> 00:02:22,390\nYou may have Linux servers that\nare balanced in with your Windows servers.\n\n52\n00:02:22,390 --> 00:02:25,740\nAnd so now, you've got to be able\nto keep an eye on all of that.\n\n53\n00:02:25,740 --> 00:02:27,070\nAnd there's, I mean,\n\n54\n00:02:27,070 --> 00:02:30,850\na limitless supply of tools out\nthere that can be used absolutely.\n\n55\n00:02:30,850 --> 00:02:33,940\nBefore the exam, we're going to\nfocus on the Microsoft ones.\n\n56\n00:02:33,940 --> 00:02:37,650\nAnd so let's start talking\nabout the independent tools.\n\n57\n00:02:37,650 --> 00:02:41,800\nThere's the, a large number of tools, just\nbuilt into Windows that are designed for\n\n58\n00:02:41,800 --> 00:02:43,300\nsmall and medium environments.\n\n59\n00:02:43,300 --> 00:02:44,430\nSo start there.\n\n60\n00:02:44,430 --> 00:02:45,800\nAnd we'll work our way up big.\n\n61\n00:02:45,800 --> 00:02:46,630\n>> Sounds good.\n\n62\n00:02:46,630 --> 00:02:49,600\nYeah you get a lot of tools that I think\nwe're probably already familiar with\n\n63\n00:02:49,600 --> 00:02:51,260\nfrom the NCSA track and there.\n\n64\n00:02:51,260 --> 00:02:53,335\nYou know, things like event viewer.\n\n65\n00:02:53,335 --> 00:02:53,850\n>> Mm-hm.\n\n66\n00:02:53,850 --> 00:02:55,630\n>> One of your most common things you use,\nright?\n\n67\n00:02:55,630 --> 00:02:57,580\nOne of the first places we go\nwhen we're troubleshooting.\n\n68\n00:02:57,580 --> 00:03:00,650\nCuz your system's trying to\ntell you what's going on.\n\n69\n00:03:00,650 --> 00:03:02,760\nSo we go there,\nwe've got our different default logs.\n\n70\n00:03:02,760 --> 00:03:04,030\nYour security log.\n\n71\n00:03:04,030 --> 00:03:04,730\nYour application log.\n\n72\n00:03:04,730 --> 00:03:06,080\nYour system log.\n\n73\n00:03:06,080 --> 00:03:08,500\nAnd then, there is dozens and\ndozens of other ones,\n\n74\n00:03:08,500 --> 00:03:11,100\nwhen you start drilling\ndown into the event viewer.\n\n75\n00:03:11,100 --> 00:03:13,232\nAnd I tell ya, I'm impressed with\nwhat they've done with the event\n\n76\n00:03:13,232 --> 00:03:15,880\nviewer over the last few renditions\nof the operating system.\n\n77\n00:03:15,880 --> 00:03:17,710\nThey've really added a lot more control,\n\n78\n00:03:17,710 --> 00:03:22,410\nfiltering capabilities,\nability to attach tasks to certain events.\n\n79\n00:03:22,410 --> 00:03:23,630\nReally cool stuff.\n\n80\n00:03:23,630 --> 00:03:24,150\n>> Yeah and you know,\n\n81\n00:03:24,150 --> 00:03:27,060\none of the big limitations of\nthe event viewer in the past was\n\n82\n00:03:27,060 --> 00:03:29,260\nthat the events are stored\non each machine.\n\n83\n00:03:29,260 --> 00:03:33,530\nSo if you're monitoring five servers, you\ncan go and look at their five event logs.\n\n84\n00:03:33,530 --> 00:03:36,800\nBut if you have 500 servers,\nyou don't have time to go and\n\n85\n00:03:36,800 --> 00:03:38,610\ncheck 500 separate event logs.\n\n86\n00:03:38,610 --> 00:03:41,500\nAnd so some of the advancements that\nwe've seen in there allow us to make\n\n87\n00:03:41,500 --> 00:03:43,230\nthat a little more useful.\n\n88\n00:03:43,230 --> 00:03:45,410\nSo we have things like\nthe tasks you mentioned, right?\n\n89\n00:03:45,410 --> 00:03:49,440\nSo we can have it email us, when there's\nan alert or an error or whatever.\n\n90\n00:03:49,440 --> 00:03:51,600\nBut one of the ones,\nI really like are the event subscriptions.\n\n91\n00:03:51,600 --> 00:03:52,825\n>> That's a beauty.\nBeautiful aren't they?\n\n92\n00:03:52,825 --> 00:03:56,625\n>> Yeah, you can take your events on\nall the servers in your environment and\n\n93\n00:03:56,625 --> 00:03:58,985\npool them into one central location.\n\n94\n00:03:58,985 --> 00:04:00,335\nA what's that called?\n\n95\n00:04:00,335 --> 00:04:01,475\n>> It is event subscriptions.\n\n96\n00:04:01,475 --> 00:04:02,365\n>> Okay.\n>> And\n\n97\n00:04:02,365 --> 00:04:06,180\nif my job is to monitor say\nthe 10 DNS servers we have.\n\n98\n00:04:06,180 --> 00:04:09,280\nRather than me trying to remote into\neach one and look at them one at a time,\n\n99\n00:04:09,280 --> 00:04:13,180\nI can create this subscription,\nhave it sent right back to my Windows 8,\n\n100\n00:04:13,180 --> 00:04:14,940\nmy client machine if I want to.\n\n101\n00:04:14,940 --> 00:04:18,540\nAnd then, we can apply those same\nfiltering capabilities that we have.\n\n102\n00:04:18,540 --> 00:04:21,160\nSo we can just see the events\nwe're looking for and\n\n103\n00:04:21,160 --> 00:04:22,360\nit can save you a lot of time.\n\n104\n00:04:22,360 --> 00:04:23,660\n>> Yeah, yeah-\n>> And not to mention,\n\n105\n00:04:23,660 --> 00:04:25,920\nit's a really good security\nthing as well I think.\n\n106\n00:04:25,920 --> 00:04:28,330\nIt's something that Windows lacked for\na long time.\n\n107\n00:04:28,330 --> 00:04:32,400\nWhen we look at the hacking process, one\nof the last steps is to cover your tracks,\n\n108\n00:04:32,400 --> 00:04:36,960\nwhich means clearing out the evidence\nthat you were there, right?\n\n109\n00:04:36,960 --> 00:04:40,070\nIf the logs are being shipped\nout somewhere else, you might\n\n110\n00:04:40,070 --> 00:04:44,080\nclear them of that server, but I still got\na record of what went on that machine.\n\n111\n00:04:44,080 --> 00:04:47,216\n>> Yeah and you know, that's something\nif you've learned Cisco equipment or\n\n112\n00:04:47,216 --> 00:04:47,856\nLinux, Unix.\n\n113\n00:04:47,856 --> 00:04:50,058\nThat's something that's\npretty common over there.\n\n114\n00:04:50,058 --> 00:04:51,262\nThey use Sis log to export.\n\n115\n00:04:51,262 --> 00:04:52,847\nSince Windows doesn't use Sislog,\n\n116\n00:04:52,847 --> 00:04:56,500\nit had to have it's own system in\nthe event subscriptions are hit.\n\n117\n00:04:56,500 --> 00:04:59,140\nAnother tool,\nwe've got is the performance monitor.\n\n118\n00:04:59,140 --> 00:05:01,835\nIf I want to take a look at my system.\n\n119\n00:05:01,835 --> 00:05:05,045\nAnd I guess we can group\nthe Task Manager kind of into this also.\n\n120\n00:05:05,045 --> 00:05:09,895\nBut if I wanna take a look at a server and\nsee what it's performance is like, right?\n\n121\n00:05:09,895 --> 00:05:11,305\nWhat it's disk I/O is?\n\n122\n00:05:11,305 --> 00:05:14,730\nCPU utilization, RAM consumption,\nnetwork bandwidth.\n\n123\n00:05:14,730 --> 00:05:17,890\nEach of those different aspects\nof a system's performance,\n\n124\n00:05:17,890 --> 00:05:19,345\nI can use the performance\nmonitor to do it.\n\n125\n00:05:19,345 --> 00:05:20,770\n>> Mm-hm, it's a beautiful console.\n\n126\n00:05:20,770 --> 00:05:22,640\nIt's got hundreds of counters in there.\n\n127\n00:05:22,640 --> 00:05:25,930\nI mean, you can get very detailed,\nyou can see any information you wanna see.\n\n128\n00:05:27,340 --> 00:05:29,030\nAnd as you add different services,\n\n129\n00:05:29,030 --> 00:05:31,270\nit typically adds additional\ncounters that you can add.\n\n130\n00:05:31,270 --> 00:05:35,880\nSo when we add DNS or GHTP,\nyou get those DNS specific counters and\n\n131\n00:05:35,880 --> 00:05:36,840\nthings like that.\n\n132\n00:05:36,840 --> 00:05:40,600\nAnd you can do some remote monitoring,\nI mean you can sit at one machine,\n\n133\n00:05:40,600 --> 00:05:43,460\npop open performance console,\nor performance monitoring.\n\n134\n00:05:43,460 --> 00:05:45,450\nYou can monitor a machine remotely.\n\n135\n00:05:45,450 --> 00:05:48,440\nStill not a very centralized solution,\nthough.\n\n136\n00:05:48,440 --> 00:05:51,050\n>> Yeah, one of the challenges,\nI always have with it is,\n\n137\n00:05:51,050 --> 00:05:55,720\nI'll sit down on one server and\ncreate this perfect data collector's set.\n\n138\n00:05:55,720 --> 00:05:57,720\nYou know, that has all\nthe information I want to gather.\n\n139\n00:05:57,720 --> 00:05:59,290\nThe particular events that I want.\n\n140\n00:05:59,290 --> 00:06:01,210\nThe performance counters that I want.\n\n141\n00:06:01,210 --> 00:06:02,450\nYou get all that stuff set up.\n\n142\n00:06:02,450 --> 00:06:05,541\nAnd then you go to the next server,\nand none of that's there, right?\n\n143\n00:06:05,541 --> 00:06:07,820\n>> [LAUGH] Right.\n>> So you gotta export your configuration,\n\n144\n00:06:07,820 --> 00:06:08,660\nand import it.\n\n145\n00:06:08,660 --> 00:06:10,050\nThere's no easy way to synchronize it.\n\n146\n00:06:10,050 --> 00:06:14,460\nSo if I decide, hey, I want to add\nthis new counter to all of my servers,\n\n147\n00:06:14,460 --> 00:06:15,880\nand I've got a thousand servers.\n\n148\n00:06:15,880 --> 00:06:18,650\nNow, I've gotta sit down and write some\nkind of script to go in and do that and\n\n149\n00:06:18,650 --> 00:06:19,470\nmodify it.\n\n150\n00:06:19,470 --> 00:06:21,480\nAnd it becomes really difficult.\n\n151\n00:06:21,480 --> 00:06:26,090\nSo the performance monitor's really good\nif you're looking at an individual server.\n\n152\n00:06:26,090 --> 00:06:30,420\nIf you're just trying to collect\nsome basic information in real time.\n\n153\n00:06:30,420 --> 00:06:31,900\nI mean, it can do historical, right?\n\n154\n00:06:31,900 --> 00:06:33,600\nWe use it for baselining servers, right?\n\n155\n00:06:33,600 --> 00:06:34,720\nSo that's pretty handy.\n\n156\n00:06:34,720 --> 00:06:37,350\nBut when you're looking at\na single server that's ideal,\n\n157\n00:06:37,350 --> 00:06:39,760\nlarge environments doesn't really pan out.\n\n158\n00:06:39,760 --> 00:06:40,980\nWhat's next on our list?\n\n159\n00:06:40,980 --> 00:06:42,240\nI guess, that's last of the base.\n\n160\n00:06:42,240 --> 00:06:44,300\nI mean, there's other basic tools, too.\n\n161\n00:06:44,300 --> 00:06:46,480\n>> We've talked about\nthe resource monitor before,\n\n162\n00:06:46,480 --> 00:06:48,310\nwhich is like Task Manager on steroids.\n\n163\n00:06:48,310 --> 00:06:49,800\nWe got the Task Manager itself.\n\n164\n00:06:49,800 --> 00:06:52,670\nYou got the reliability\nmonitor that you can use.\n\n165\n00:06:52,670 --> 00:06:54,730\nWhich is a pretty cool tool in of itself,\n\n166\n00:06:54,730 --> 00:06:56,930\nto take a look at how\nyou're system's moving.\n\n167\n00:06:56,930 --> 00:07:02,230\nBeen behaving over time, but\nagain single server small environment.\n\n168\n00:07:02,230 --> 00:07:03,372\n>> Yeah.\n\n169\n00:07:03,372 --> 00:07:06,430\nAll right, so some of the other tools\nthat are available we might not heard of.\n\n170\n00:07:06,430 --> 00:07:08,340\nOr might not have heard of.\n\n171\n00:07:08,340 --> 00:07:11,170\nOne of the ones that we need to\ntalk about is the ACS which is\n\n172\n00:07:11,170 --> 00:07:12,710\nthe Audit Collection Service.\n\n173\n00:07:12,710 --> 00:07:19,680\nAnd Audit Collection Services is actually\na part of the System Center Suite.\n\n174\n00:07:19,680 --> 00:07:21,530\nBut it can be deployed independently.\n\n175\n00:07:21,530 --> 00:07:24,290\nYou don't have to have\nSystem Center to use ACS.\n\n176\n00:07:24,290 --> 00:07:26,360\nSo, that's why I wanted\nto talk about it first.\n\n177\n00:07:26,360 --> 00:07:29,550\nKind of separate from\nthe system center conversation.\n\n178\n00:07:29,550 --> 00:07:32,830\nWhat the audit collection service\ndoes is something kind of neat.\n\n179\n00:07:32,830 --> 00:07:36,070\nIf you have ever turned on auditing,\nso file or\n\n180\n00:07:36,070 --> 00:07:40,620\nobject access auditing,\nlog on auditing, network log on.\n\n181\n00:07:40,620 --> 00:07:43,610\nAll that kind of auditing that we\ncan turn on inside of Windows.\n\n182\n00:07:43,610 --> 00:07:44,257\nIt generates a lot of\n\n183\n00:07:44,257 --> 00:07:44,780\n>> [LAUGH]\n>> Doesn't it?\n\n184\n00:07:44,780 --> 00:07:46,510\n>> You can go in and\nlook at that security log,\n\n185\n00:07:46,510 --> 00:07:48,160\nbecause that's where all\nof our auditing goes.\n\n186\n00:07:48,160 --> 00:07:50,800\nAnd you've got 50,000 events\nfrom the last day or something.\n\n187\n00:07:50,800 --> 00:07:52,410\n>> From the last minute.\n\n188\n00:07:52,410 --> 00:07:54,799\nOn a busy file server, it goes crazy.\n\n189\n00:07:54,799 --> 00:07:57,265\n>> Yeah. Absolutely.\nWhen you start looking at the way Windows,\n\n190\n00:07:57,265 --> 00:08:00,051\none person accesses one file and\nit generates 15 events.\n\n191\n00:08:00,051 --> 00:08:02,710\nAs you've listed the directory for\nthe folder, itself.\n\n192\n00:08:02,710 --> 00:08:04,643\nAnd then clicked on the file and\nall of that.\n\n193\n00:08:04,643 --> 00:08:06,680\n>> Inquiry the permissions.\n\n194\n00:08:06,680 --> 00:08:08,150\n>> Yeah.\nSo, it generates\n\n195\n00:08:08,150 --> 00:08:10,250\na lot of information really quickly.\n\n196\n00:08:10,250 --> 00:08:12,950\n>> So those audit logs,\neven on a single server,\n\n197\n00:08:12,950 --> 00:08:14,950\nthey're pretty challenging to work with.\n\n198\n00:08:14,950 --> 00:08:16,860\nAnd you can use the event\nviewer to view them and\n\n199\n00:08:16,860 --> 00:08:18,950\nyou can filter right there on your screen.\n\n200\n00:08:18,950 --> 00:08:24,210\nBut what ACS does is it lets you\nharvest all that audit data and\n\n201\n00:08:24,210 --> 00:08:26,000\nput it into central location.\n\n202\n00:08:26,000 --> 00:08:30,100\nSo ACS connects to a SQL database,\nyour Microsoft SQL and\n\n203\n00:08:30,100 --> 00:08:33,610\nyou store the data in there versus,\nlike, event subscriptions.\n\n204\n00:08:33,610 --> 00:08:36,770\nCuz you can use event subscriptions to\nsend your audit logs somewhere else, too.\n\n205\n00:08:36,770 --> 00:08:39,180\nBut those are being\nstored in the event log,\n\n206\n00:08:39,180 --> 00:08:42,770\nthe binary event logs of a server\nsomewhere and as they grow and grow and\n\n207\n00:08:42,770 --> 00:08:47,880\ngrow, it becomes really, really\nperformance intensive to query that.\n\n208\n00:08:47,880 --> 00:08:51,010\n>> Yeah and one of the beautiful things I\nthink about that ACS is the way when it\n\n209\n00:08:51,010 --> 00:08:56,350\ndumps it into that SQL database,\nit can break that event into little pieces\n\n210\n00:08:56,350 --> 00:09:00,190\nto store in different tables which is\ngoing to give me that relational database,\n\n211\n00:09:00,190 --> 00:09:02,410\nso I can pull back some\nreally neat reports.\n\n212\n00:09:02,410 --> 00:09:05,400\nAs well as eliminate a lot\nof duplicate information.\n\n213\n00:09:05,400 --> 00:09:08,840\nWhen you're talking about hundreds\nof thousands of events like that,\n\n214\n00:09:08,840 --> 00:09:12,110\nit doesn't have to store all of the\nduplicate information that you're getting.\n\n215\n00:09:12,110 --> 00:09:13,420\nAnd it'll look at certain events, and\n\n216\n00:09:13,420 --> 00:09:17,050\nsay okay, I don't need to put this in\nthere twice and things like that so.\n\n217\n00:09:17,050 --> 00:09:18,000\n>> Yep, very efficient.\n\n218\n00:09:18,000 --> 00:09:20,500\nNow if you install the ACS by itself,\n\n219\n00:09:20,500 --> 00:09:25,320\nas a standalone entity without\nSystem Center, it harvests the audit logs,\n\n220\n00:09:25,320 --> 00:09:29,855\nit throws them into a database, and\nit makes the database available to you.\n\n221\n00:09:29,855 --> 00:09:32,415\nIt doesn't provide reporting services.\n\n222\n00:09:32,415 --> 00:09:34,525\nAs a standalone entity, it doesn't.\n\n223\n00:09:34,525 --> 00:09:39,515\nIt's up to you to deploy\nthe Microsoft SQL reporting services or\n\n224\n00:09:39,515 --> 00:09:42,325\nuse a third-party utility like\nCrystal Reports or whatever.\n\n225\n00:09:42,325 --> 00:09:45,435\nTo develop your own reports like\nthat query on that information and\n\n226\n00:09:45,435 --> 00:09:46,125\nreport it back.\n\n227\n00:09:46,125 --> 00:09:48,655\nWhich is pretty intensive.\n\n228\n00:09:48,655 --> 00:09:51,012\nAnd so\nbecause reporting is the whole point,\n\n229\n00:09:51,012 --> 00:09:53,640\nmost people don't deploy\nACS independently.\n\n230\n00:09:53,640 --> 00:09:54,889\n>> Right.\n>> So while you can,\n\n231\n00:09:54,889 --> 00:09:58,185\nmost people don't because\nif we deploy it with SCOM,\n\n232\n00:09:58,185 --> 00:10:00,971\nwith the system center operations manager,\n\n233\n00:10:00,971 --> 00:10:05,608\nthe SCOM reporting services have a ton\nof pre-built reports just for ACS.\n\n234\n00:10:05,608 --> 00:10:06,119\n>> Right.\n\n235\n00:10:06,119 --> 00:10:10,000\n>> It integrates completely and it\ngenerates some really, really nice data.\n\n236\n00:10:10,000 --> 00:10:11,310\nIt's actually human readable for\n\n237\n00:10:11,310 --> 00:10:14,650\na change versus the other raw\naudit logs which are a nightmare.\n\n238\n00:10:16,310 --> 00:10:17,820\nIt's a good product.\n\n239\n00:10:17,820 --> 00:10:21,630\nIt, I don't wanna call it free,\n\n240\n00:10:21,630 --> 00:10:26,910\ntechnically it's free but it's included\nwith the SCOM installation media.\n\n241\n00:10:26,910 --> 00:10:28,830\nSo you don't go and\ndownload it from Microsoft.\n\n242\n00:10:28,830 --> 00:10:31,350\nYou get the System Center\nOperations Manager install media,\n\n243\n00:10:31,350 --> 00:10:34,030\nwhich you can download\nthe ISO from Microsoft.\n\n244\n00:10:34,030 --> 00:10:37,720\nAnd it's right there on the media,\nyou can install it standalone if you want.\n\n245\n00:10:37,720 --> 00:10:39,550\nIn that implementation it's free, but\n\n246\n00:10:39,550 --> 00:10:41,680\ncoupled with SCOM you have\nthe SCOM licensing fees.\n\n247\n00:10:43,190 --> 00:10:46,110\nAll right, now ACS, it's a good utility,\n\n248\n00:10:46,110 --> 00:10:48,500\nit definitely works,\ntakes care of some of that stuff.\n\n249\n00:10:48,500 --> 00:10:52,450\nI feel like we've pretty much covered\neverything we need to cover on it.\n\n250\n00:10:52,450 --> 00:10:58,370\nIn the exam objectives they specifically\ncall out just being aware of ACS but\n\n251\n00:10:58,370 --> 00:11:01,590\nin my show notes,\nI'm going to post two URLs and actually,\n\n252\n00:11:01,590 --> 00:11:03,250\nI have them pulled up right here.\n\n253\n00:11:03,250 --> 00:11:06,820\nSo, I'm going to post these two pages\nstarting with this first page that I've\n\n254\n00:11:06,820 --> 00:11:11,020\ngot pulled up here which is,\ncollecting security events using ACS.\n\n255\n00:11:11,020 --> 00:11:16,360\nAnd this is an article that Microsoft put\nout that details exactly how to use ACS.\n\n256\n00:11:16,360 --> 00:11:18,710\nAnd so it goes through and\nit references it, and\n\n257\n00:11:18,710 --> 00:11:21,740\nI wanted to bring this up because of\nthese different components that we have.\n\n258\n00:11:21,740 --> 00:11:22,530\nRight?\n\n259\n00:11:22,530 --> 00:11:25,220\nYour ACS server where\nactually running ACS,\n\n260\n00:11:25,220 --> 00:11:29,300\nhas two pieces, the ACS collector and\nthe ACS database.\n\n261\n00:11:29,300 --> 00:11:33,490\nThe collector is what's receiving those\naudit logs that are coming to it and\n\n262\n00:11:33,490 --> 00:11:35,022\nthen it stores it in the database.\n\n263\n00:11:35,022 --> 00:11:37,500\nThey don't have to be on the same server.\n\n264\n00:11:37,500 --> 00:11:40,030\nIf you have a massive environment,\n\n265\n00:11:40,030 --> 00:11:45,030\nif you're monitoring tens of thousands of\nservers, you may need more than one ACS\n\n266\n00:11:45,030 --> 00:11:49,160\ncollector to be gathering the audit logs\nand then dumping them into your database.\n\n267\n00:11:49,160 --> 00:11:51,420\nSo that's kind of a server side.\n\n268\n00:11:51,420 --> 00:11:55,368\nAnd then on our clients, the people\nthat we're getting the audits from,\n\n269\n00:11:55,368 --> 00:11:59,887\nwe install the ACS forwarder, and that's\na little agent that runs on their system,\n\n270\n00:11:59,887 --> 00:12:03,660\nand when an audit log is generated\nit forwards it to the ACS collector.\n\n271\n00:12:03,660 --> 00:12:06,320\nSo those are the pieces that ere involved,\nand\n\n272\n00:12:06,320 --> 00:12:10,470\nthis article gives just a great overview\nof how each of those components work,\n\n273\n00:12:10,470 --> 00:12:13,530\nwhat the minimum requirements are,\nand how you can provide that access.\n\n274\n00:12:13,530 --> 00:12:16,840\nEven how to integrate it into Unix and\nLinux environments.\n\n275\n00:12:16,840 --> 00:12:18,220\nSo there's good information there.\n\n276\n00:12:18,220 --> 00:12:20,010\nAnd I'm gonna post that\nwith the show notes.\n\n277\n00:12:20,010 --> 00:12:23,600\nAnd I'm also gonna post this one,\nwhich are the installation steps.\n\n278\n00:12:23,600 --> 00:12:26,170\nSo if you want to deploy ACS, and\n\n279\n00:12:26,170 --> 00:12:31,730\nif you want to do ACS reporting it goes\nahead and lays out how to do that.\n\n280\n00:12:31,730 --> 00:12:36,000\nSo it details it but notice how\nits kinda calling in using SCOM.\n\n281\n00:12:36,000 --> 00:12:41,230\nSo here's the deploying it and using\nthe System Center Operations Manager.\n\n282\n00:12:41,230 --> 00:12:44,970\nAnd then here's deploying it\nwithout Operations Manager.\n\n283\n00:12:44,970 --> 00:12:48,600\nAnd instead using the SQL\nreporting services.\n\n284\n00:12:48,600 --> 00:12:51,690\nSo it lays out how to do\nthat in the actual steps.\n\n285\n00:12:51,690 --> 00:12:54,360\nYou won't really see that on the exam.\n\n286\n00:12:54,360 --> 00:12:57,640\nBut we're gonna do a lab later on\nwhere we'll show setting up ACS and\n\n287\n00:12:57,640 --> 00:12:59,420\nactually pushing some of those.\n\n288\n00:12:59,420 --> 00:13:01,510\nIt won't be in this episode\nit will be a follow up.\n\n289\n00:13:01,510 --> 00:13:04,200\nYou'll see we're gonna\ndo several lab episodes.\n\n290\n00:13:04,200 --> 00:13:06,740\nBut yeah, so\nthat's basically it about the ACS.\n\n291\n00:13:06,740 --> 00:13:08,980\nJust wanted to make sure you guys\nare familiar with that technology so\n\n292\n00:13:08,980 --> 00:13:12,520\nit doesn't surprise you on the exam.\n\n293\n00:13:12,520 --> 00:13:13,900\n>> Right.\n>> The last one that we're gonna talk\n\n294\n00:13:13,900 --> 00:13:18,260\nabout before we start diving into\nour system center conversation\n\n295\n00:13:18,260 --> 00:13:23,120\nis the Global Services Monitor,\nor Global Service Monitor, GSM.\n\n296\n00:13:23,120 --> 00:13:26,280\nGlobal Service Monitor is a new product\nfrom Microsoft, that we can use for\n\n297\n00:13:26,280 --> 00:13:29,710\nmonitoring our systems, and\nit does some really, really cool stuff.\n\n298\n00:13:31,370 --> 00:13:34,740\nFirst off, there's no installation for\nit, there's no software.\n\n299\n00:13:34,740 --> 00:13:38,690\nThe global service monitor\nruns in Windows Azure.\n\n300\n00:13:38,690 --> 00:13:41,270\nIt runs in the Microsoft cloud, and\n\n301\n00:13:41,270 --> 00:13:44,270\nthere's no, well there's no way\nthat I know of to write locally.\n\n302\n00:13:44,270 --> 00:13:48,630\nYou have to run it in\nMicrosoft's Internet facing cloud.\n\n303\n00:13:48,630 --> 00:13:53,388\nAnd the reason is it monitors your\napplications from the customer's\n\n304\n00:13:53,388 --> 00:13:55,040\nperspective.\n\n305\n00:13:55,040 --> 00:13:55,870\nIt's designed for\n\n306\n00:13:55,870 --> 00:13:59,600\ncompanies that have public facing\nwebsites, retail outlets whatever.\n\n307\n00:13:59,600 --> 00:14:01,140\nAnd your end users go to it.\n\n308\n00:14:01,140 --> 00:14:06,570\nAnd it's able to monitor not things\nlike disc I/O or network bandwidth.\n\n309\n00:14:06,570 --> 00:14:09,330\nIt's monitoring response time on webpages.\n\n310\n00:14:09,330 --> 00:14:10,380\nAvailability.\n\n311\n00:14:10,380 --> 00:14:12,400\nWhat your actual customer experience is.\n\n312\n00:14:12,400 --> 00:14:16,570\nYour customer doesn't care, whether your\nserver's on an SSD or magnetic storage,\n\n313\n00:14:16,570 --> 00:14:18,060\nwhatever, they don't care about that.\n\n314\n00:14:18,060 --> 00:14:20,390\nThey just want to know when they\nclick buy that it happens quickly.\n\n315\n00:14:20,390 --> 00:14:23,320\n>> Yeah, why is it taking 15 seconds for\nthis page to load up?\n\n316\n00:14:23,320 --> 00:14:25,960\nSo you're really getting that\nperspective of your customer.\n\n317\n00:14:25,960 --> 00:14:30,090\nCuz you can monitor it from 15\ndifferent locations around the world\n\n318\n00:14:30,090 --> 00:14:31,420\nthat they give us.\n\n319\n00:14:31,420 --> 00:14:35,170\nAnd we can plug in our URLs,\nour public facing URLs and\n\n320\n00:14:35,170 --> 00:14:37,870\nit can give us that perspective of\nwhat the customer's experiencing\n\n321\n00:14:39,080 --> 00:14:42,040\nfrom their side and\nfrom different locations.\n\n322\n00:14:42,040 --> 00:14:45,100\nIt might be okay for people in the US,\nthey're not having a problem hitting\n\n323\n00:14:45,100 --> 00:14:50,220\nthe site, but our customers over in Europe\nare having trouble hitting that location.\n\n324\n00:14:50,220 --> 00:14:53,737\nSo it can give us that perspective from\nthose different places like I said about\n\n325\n00:14:53,737 --> 00:14:55,348\n15 different locations I think.\n\n326\n00:14:55,348 --> 00:14:59,320\n>> Yeah it's really slick and\nit's fully customizable.\n\n327\n00:14:59,320 --> 00:15:00,840\nYou have to set up\na Windows Azure account.\n\n328\n00:15:00,840 --> 00:15:05,170\nAnd, when you get in there you can\nenable the Global Service Monitor, and\n\n329\n00:15:05,170 --> 00:15:09,250\nyou specify the various things that you\nwant to monitor and it's all customizable.\n\n330\n00:15:09,250 --> 00:15:12,540\nYou can tailor all of the configuration\noptions inside of it.\n\n331\n00:15:12,540 --> 00:15:16,080\nSo, you'll actually dictate,\nwhere is it, here we go,\n\n332\n00:15:16,080 --> 00:15:18,300\nwhat are called the test parameters.\n\n333\n00:15:18,300 --> 00:15:20,940\nAnd, the test parameters\nare defining things like how\n\n334\n00:15:20,940 --> 00:15:23,340\nfrequently you're gonna be\ndoing your test, right.\n\n335\n00:15:23,340 --> 00:15:26,890\nHow much you're gonna test your system,\nhow often you're gonna wait, when you send\n\n336\n00:15:26,890 --> 00:15:30,920\nrequests to the site how many requests\ndo you wanna send simultaneously.\n\n337\n00:15:30,920 --> 00:15:35,290\nAnd they're listing minimums and\nmaximums here, and test files and so on.\n\n338\n00:15:35,290 --> 00:15:39,160\nSo here they're saying like if we wanna\nretrieve a test file, well we can retrieve\n\n339\n00:15:39,160 --> 00:15:43,030\na file the maximum size of that test\nfile needs to be 100 kilobytes and\n\n340\n00:15:43,030 --> 00:15:46,590\nit can test going out and retrieving\nthat file and measuring that speed for\n\n341\n00:15:46,590 --> 00:15:47,940\ndownloading the file.\n\n342\n00:15:47,940 --> 00:15:49,854\nAnd you'll see other things\nlike the intervals here,\n\n343\n00:15:49,854 --> 00:15:52,359\nthe minimum interval needs to be\ngreater than or equal to five minutes.\n\n344\n00:15:52,359 --> 00:15:55,559\nSo it can test your site every five\nminutes, checking net performance or\n\n345\n00:15:55,559 --> 00:15:56,299\nresponse time.\n\n346\n00:15:56,299 --> 00:15:58,280\nIt will report to you if the site is down,\nor\n\n347\n00:15:58,280 --> 00:16:00,166\nit will report to you if the site is slow.\n\n348\n00:16:00,166 --> 00:16:03,527\nAnd the geographic regions,\nthat's the really cool part.\n\n349\n00:16:03,527 --> 00:16:04,433\nWhat you were talking about, Mike.\n\n350\n00:16:04,433 --> 00:16:08,657\n>> In fact, just a little bit further down\non that page you can see the different\n\n351\n00:16:08,657 --> 00:16:11,840\nlocations that you can\nrun these tests from.\n\n352\n00:16:11,840 --> 00:16:12,565\n>> Yup.\n\n353\n00:16:12,565 --> 00:16:15,390\n>> So\nwe can test from 15 different locations.\n\n354\n00:16:15,390 --> 00:16:17,460\nNow they don't list 15 locations here.\n\n355\n00:16:17,460 --> 00:16:18,500\nWell, actually I guess they do,\ndon't they?\n\n356\n00:16:18,500 --> 00:16:20,370\nThey break it down into individual cities.\n\n357\n00:16:20,370 --> 00:16:22,190\nSo it's broken down by continent and\n\n358\n00:16:22,190 --> 00:16:24,800\nthen we've got multiple cities\nin each continent there.\n\n359\n00:16:24,800 --> 00:16:25,500\nSo you can set it up.\n\n360\n00:16:25,500 --> 00:16:27,190\nYou don't have to monitor from all 15.\n\n361\n00:16:27,190 --> 00:16:32,470\nIf you have a US-only business,\nyou might not care about response\n\n362\n00:16:32,470 --> 00:16:36,300\ntimes in in Singapore, so you can pick and\nchoose where you wanna monitor it from.\n\n363\n00:16:36,300 --> 00:16:41,540\nBut if your a global website,\nthen it makes sense to get that view and\n\n364\n00:16:41,540 --> 00:16:42,820\nbe able to see that.\n\n365\n00:16:42,820 --> 00:16:45,480\nSo it is really neat, it's pretty cool.\n\n366\n00:16:46,610 --> 00:16:49,170\nIt's monitoring response\ntime from the outside.\n\n367\n00:16:49,170 --> 00:16:53,430\nIt can also pull the performance\ndata from the backend, so\n\n368\n00:16:53,430 --> 00:16:55,230\nthat it can correlate it together.\n\n369\n00:16:55,230 --> 00:16:57,170\nAnd that's where we get this\nlittle note right here,\n\n370\n00:16:57,170 --> 00:16:59,240\nwhich is to use\nthe Global Service Monitor,\n\n371\n00:16:59,240 --> 00:17:03,390\nyou must have System Center 2012\nOperations Manager installed.\n\n372\n00:17:03,390 --> 00:17:08,710\nThe GSM is not a stand-alone product,\nit integrates with System Center.\n\n373\n00:17:08,710 --> 00:17:14,340\nMuch like ACS, it can be stand-alone, but\nit's not full functionality that way.\n\n374\n00:17:14,340 --> 00:17:17,560\nWith GSM, you've gotta have the System\nCenter Operations Manager to be able to\n\n375\n00:17:17,560 --> 00:17:21,840\ntap into that data so that it can\ncorrelate while the site was slow,\n\n376\n00:17:21,840 --> 00:17:24,730\nCPU utilization was high,\nor disk IO was high.\n\n377\n00:17:24,730 --> 00:17:27,530\nAnd you can start to figure\nout what the issue was that\n\n378\n00:17:27,530 --> 00:17:29,380\ncaused the site to perform\nslow at that time.\n\n379\n00:17:30,980 --> 00:17:35,260\nSo definitely important, and\nyou can go even crazier with the test.\n\n380\n00:17:35,260 --> 00:17:38,290\nThey allow you to do what\nare called visual studio web tests.\n\n381\n00:17:38,290 --> 00:17:41,710\nAnd your developers can actually\ncreate complex scenarios.\n\n382\n00:17:41,710 --> 00:17:43,860\nSo it's not just querying\na single web page.\n\n383\n00:17:43,860 --> 00:17:45,630\nIt'll actually send in variables, and\n\n384\n00:17:45,630 --> 00:17:48,190\nactually start to perform\nactions in the site.\n\n385\n00:17:48,190 --> 00:17:51,130\nSo you could even have it run\nthrough an entire transaction.\n\n386\n00:17:51,130 --> 00:17:52,720\n>> Like an order process, or something.\n\n387\n00:17:52,720 --> 00:17:56,430\n>> And that's important because just\nbecause your website is available doesn't\n\n388\n00:17:56,430 --> 00:17:58,540\nmean the web applications\nrunning behind it are.\n\n389\n00:17:58,540 --> 00:18:00,350\nAnd we need to test for that.\n\n390\n00:18:00,350 --> 00:18:02,760\nSo, really cool stuff there.\n\n391\n00:18:02,760 --> 00:18:06,140\nThis is another one where, on the exam,\nthey don't necessarily want you to\n\n392\n00:18:06,140 --> 00:18:12,860\nimplement it because there's no way to do\na Azure-based service inside of an exam.\n\n393\n00:18:12,860 --> 00:18:15,760\nBut in real life land, it's pretty cool.\n\n394\n00:18:15,760 --> 00:18:17,835\nIt is a newer feature, it's a neat system.\n\n395\n00:18:17,835 --> 00:18:21,300\nI know HP, Hewlett Packard,\nused to have something like this,\n\n396\n00:18:21,300 --> 00:18:24,260\nI'm sure they still do,\nwhere you can contract them.\n\n397\n00:18:24,260 --> 00:18:26,590\nSo other people have provided\nservices like this, but\n\n398\n00:18:26,590 --> 00:18:28,960\nthe advantage here is that\nit's completely virtual.\n\n399\n00:18:28,960 --> 00:18:32,070\nAnd it's using the Azure data\ncenters all across the world.\n\n400\n00:18:32,070 --> 00:18:33,800\nIt's really neat stuff for GSM.\n\n401\n00:18:35,250 --> 00:18:38,790\nAll right, now what GSM gives us\n\n402\n00:18:38,790 --> 00:18:42,360\nis something a little more than the\nutilities we were talking about before.\n\n403\n00:18:42,360 --> 00:18:46,530\nThe other utilities like the Performance\nMonitor, Task Manager, Event Viewer.\n\n404\n00:18:46,530 --> 00:18:51,140\nThey're really reporting on your\nserver and the server's health.\n\n405\n00:18:51,140 --> 00:18:54,980\nBut the GSM starts moving us from\njust regular server performance\n\n406\n00:18:54,980 --> 00:18:57,630\nto application performance.\n\n407\n00:18:57,630 --> 00:19:01,580\nAnd that application performance\npiece is really important because\n\n408\n00:19:01,580 --> 00:19:05,830\nyour server might be cruising at 10% CPU,\nwhich is well within tolerance, but\n\n409\n00:19:05,830 --> 00:19:09,540\nif your web page is responding slowly,\nthere's a problem.\n\n410\n00:19:09,540 --> 00:19:13,260\nAnd you might not necessarily know that\nbecause your CPU utilization looks low.\n\n411\n00:19:13,260 --> 00:19:16,350\nIt could turn out that there's some kind\nof process governor assigned to IS, or\n\n412\n00:19:16,350 --> 00:19:18,180\nsomething like that that\nyou're just not aware of,\n\n413\n00:19:18,180 --> 00:19:20,470\nand it doesn't show up with\ntraditional monitoring.\n\n414\n00:19:20,470 --> 00:19:25,026\nSo being able to monitor the applications\nthemselves, really handy.\n\n415\n00:19:25,026 --> 00:19:26,620\n>> Absolutely.\n\n416\n00:19:26,620 --> 00:19:29,310\n>> Now the other thing to remember is\nthat all of these tools that we've talked\n\n417\n00:19:29,310 --> 00:19:30,200\nabout, they're great.\n\n418\n00:19:30,200 --> 00:19:32,850\nAnd you guys out there in TV land,\nyou're probably thinking right now, oh,\n\n419\n00:19:32,850 --> 00:19:35,080\nyou know, I use this tool, and\nthis tool, these other ones,\n\n420\n00:19:35,080 --> 00:19:37,740\nthere's a ton of them they're out there,\nand they're all good.\n\n421\n00:19:39,020 --> 00:19:43,760\nBut Microsoft wants you to have the best\nmonitoring experience possible.\n\n422\n00:19:43,760 --> 00:19:47,820\nAnd because of their intimate knowledge\nof the products that they make,\n\n423\n00:19:47,820 --> 00:19:49,640\nthey make a really good monitoring system.\n\n424\n00:19:49,640 --> 00:19:52,850\nThat monitoring system is\nSystems Center Operations Manager.\n\n425\n00:19:52,850 --> 00:19:57,000\nAnd SCOM is capable of doing\nour server monitoring,\n\n426\n00:19:57,000 --> 00:19:59,980\nas far as the physical servers,\nour virtual server monitoring.\n\n427\n00:19:59,980 --> 00:20:04,560\nIt can also monitor our applications,\nand it's very extensible.\n\n428\n00:20:04,560 --> 00:20:08,940\nSo we can add functionality for\njust tons of other software.\n\n429\n00:20:08,940 --> 00:20:13,990\nSo SCOM is really the recommended\nmethod for monitoring our systems.\n\n430\n00:20:13,990 --> 00:20:19,240\nAnd that's why when we talk about ACS and\nGSM, they integrate with SCOM.\n\n431\n00:20:19,240 --> 00:20:21,305\nThat's that direction that\nMicrosoft is pushing things.\n\n432\n00:20:21,305 --> 00:20:26,110\nBut we only have so\nmuch time left in this segment.\n\n433\n00:20:26,110 --> 00:20:27,280\nWhy don't we stop here and\n\n434\n00:20:27,280 --> 00:20:31,610\ntake a break, and when we get back\nwe're gonna take a look at SCOM.\n\n435\n00:20:31,610 --> 00:20:35,332\nSome of the things that it can do,\nand its basically overall layout, and\n\n436\n00:20:35,332 --> 00:20:39,727\nwhat Systems Center Operations Manager can\nmean in a production environment as far as\n\n437\n00:20:39,727 --> 00:20:42,613\nbeing able to monitor every\naspect of your data center.\n\n438\n00:20:42,613 --> 00:20:43,940\n>> Sounds like a plan.\n\n439\n00:20:43,940 --> 00:20:44,710\n>> All right, stay tuned.\n\n440\n00:20:44,710 --> 00:20:47,856\nWe'll be back after this.\n\n441\n00:20:47,856 --> 00:20:50,817\n[SOUND] All right,\n\n442\n00:20:50,817 --> 00:20:55,559\nwelcome back, everybody.\n\n443\n00:20:55,559 --> 00:20:59,200\nSo we did a little bit of a lead-in\nthere before the break about\n\n444\n00:20:59,200 --> 00:21:02,090\nSystems Center Operations Manager.\n\n445\n00:21:02,090 --> 00:21:05,180\nAnd in this segment we're\ngonna take a look at it.\n\n446\n00:21:05,180 --> 00:21:09,180\nThe Systems Center Operations Manager,\nif you're a small or medium shop,\n\n447\n00:21:09,180 --> 00:21:13,260\nit is a heavy piece of infrastructure.\n\n448\n00:21:13,260 --> 00:21:16,510\nIt's a little bit beyond what a smaller,\nmedium shop would need.\n\n449\n00:21:16,510 --> 00:21:18,620\nBut if you're a large organization,\nor an enterprise,\n\n450\n00:21:18,620 --> 00:21:22,010\nif you have hundreds of servers, or\nthousands of servers spread across\n\n451\n00:21:22,010 --> 00:21:25,610\nmultiple geographic areas,\nSCOM is a godsend.\n\n452\n00:21:25,610 --> 00:21:31,380\nIt is an amazing software package that\nlets you consolidate all the data for\n\n453\n00:21:31,380 --> 00:21:35,420\nthat massive amount of servers\ninto a centralized location, and\n\n454\n00:21:35,420 --> 00:21:37,110\nit does it in a way.\n\n455\n00:21:37,110 --> 00:21:38,540\nIt's not just making it easier for\nyou, but\n\n456\n00:21:38,540 --> 00:21:42,720\nyou could have an entire team\nof people all working together\n\n457\n00:21:42,720 --> 00:21:47,220\nwithout butting into each other, and\nthat is worth its weight in gold.\n\n458\n00:21:47,220 --> 00:21:49,730\nSCOM is a really good product.\n\n459\n00:21:49,730 --> 00:21:52,550\nOut on the Internet, you'll find\nwhere people talk about it, and\n\n460\n00:21:52,550 --> 00:21:53,620\nlike I don't use that.\n\n461\n00:21:53,620 --> 00:21:55,720\nI use this other tool\ncuz it's a lot easier.\n\n462\n00:21:55,720 --> 00:21:57,970\nWell, those people are usually\nrunning small and medium shops, and\n\n463\n00:21:57,970 --> 00:21:59,580\nyou know what, they're right.\n\n464\n00:21:59,580 --> 00:22:01,380\nFor a small or medium shop,\nthey are right.\n\n465\n00:22:01,380 --> 00:22:06,810\nSCOM is not designed for that,\nand it can be a little too heavy.\n\n466\n00:22:06,810 --> 00:22:12,380\nAt its minimum,\nSCOM really needs two servers, all right?\n\n467\n00:22:12,380 --> 00:22:16,230\nYou've got the Systems Center\nOperations Manager server itself,\n\n468\n00:22:16,230 --> 00:22:21,260\nwhich is our web front end, our console,\nthe actual operations manager.\n\n469\n00:22:21,260 --> 00:22:24,830\nAnd then you need a Microsoft SQL server\non the backend, a database server.\n\n470\n00:22:24,830 --> 00:22:29,060\nSo if you have five servers\nin your environment,\n\n471\n00:22:29,060 --> 00:22:34,310\nthe idea of adding two more servers just\nto monitor it is pretty unreasonable.\n\n472\n00:22:34,310 --> 00:22:35,300\n>> A little overkill, right?\n\n473\n00:22:35,300 --> 00:22:38,430\n>> But if you got a thousand servers,\nand you could just add two more\n\n474\n00:22:38,430 --> 00:22:42,630\nservers to monitor all that and have\nall these benefits, it's a no-brainer.\n\n475\n00:22:42,630 --> 00:22:44,080\nIt makes sense.\n\n476\n00:22:44,080 --> 00:22:46,970\nIt's also very resource intensive.\n\n477\n00:22:46,970 --> 00:22:50,380\nIt's collecting performance data and\nall sorts of\n\n478\n00:22:50,380 --> 00:22:54,970\nother information about your systems, and\naggregating it into one big database.\n\n479\n00:22:54,970 --> 00:22:59,070\nThe collection aspect alone\nis pretty intensive, and\n\n480\n00:22:59,070 --> 00:23:02,600\nthen the database side, when we run our\nqueries and generate our reports and\n\n481\n00:23:02,600 --> 00:23:05,490\nall of that stuff,\ncan be equally intensive.\n\n482\n00:23:05,490 --> 00:23:08,140\nThat's why we need\nthe two separate servers.\n\n483\n00:23:08,140 --> 00:23:10,590\nThe larger your environment becomes,\n\n484\n00:23:10,590 --> 00:23:13,040\nthe more of these servers\nyou might need to deploy.\n\n485\n00:23:13,040 --> 00:23:17,910\nSo it is designed to scale to\nthe largest possible environments.\n\n486\n00:23:17,910 --> 00:23:21,790\nMicrosoft uses SCOM to\nmonitor Windows Azure.\n\n487\n00:23:21,790 --> 00:23:25,600\nSo you're talking about hundreds of\nthousands of virtual servers running\n\n488\n00:23:25,600 --> 00:23:28,920\nacross tens of thousands of Hyper-V hosts,\n\n489\n00:23:28,920 --> 00:23:32,950\nall being monitored with SCOM,\nand it works really well.\n\n490\n00:23:34,250 --> 00:23:37,210\nRemember, the key secret to why SCOM\nworks really well is it's developed by\n\n491\n00:23:37,210 --> 00:23:40,050\nMicrosoft and you're typically\nmonitoring Microsoft systems.\n\n492\n00:23:40,050 --> 00:23:41,800\nIt makes sense.\n\n493\n00:23:41,800 --> 00:23:46,120\nBut it's very extendable, or extensible,\nor whatever the right word is there.\n\n494\n00:23:46,120 --> 00:23:49,950\nAnd that means that we can monitor our\nLinux systems, our routers, our switches.\n\n495\n00:23:49,950 --> 00:23:54,528\nYou can monitor pretty much everything in\nyour network from inside a desktop, so\n\n496\n00:23:54,528 --> 00:23:59,330\nthat it does become the central point of\nyour network operations center, your NOC.\n\n497\n00:23:59,330 --> 00:24:04,166\nSo let's just take a quick little view.\n\n498\n00:24:04,166 --> 00:24:06,454\nI'm looking at the example\nobjectives down here and\n\n499\n00:24:06,454 --> 00:24:08,898\nthey've got some specific\nthings they want us to hit But\n\n500\n00:24:08,898 --> 00:24:12,486\nlet's just start real high level because\nI know, while some of you may have worked\n\n501\n00:24:12,486 --> 00:24:16,110\nwith SCOM a good bit,\nsome of you may have never seen it before.\n\n502\n00:24:16,110 --> 00:24:21,040\nSo, if you were to install\nSCOM in a typical environment,\n\n503\n00:24:21,040 --> 00:24:23,420\nwhen you launch the operations manager,\n\n504\n00:24:23,420 --> 00:24:26,780\nthis is the management console,\nthis is what you're gonna see right here.\n\n505\n00:24:26,780 --> 00:24:29,100\nAnd it's designed to\nbe this central panel.\n\n506\n00:24:29,100 --> 00:24:32,350\nAnd this operation's manager,\nyou can install it on your own laptop.\n\n507\n00:24:32,350 --> 00:24:34,980\nYou don't have to remote\nto a server to do it.\n\n508\n00:24:34,980 --> 00:24:36,610\nIn fact, that's usually a bad idea.\n\n509\n00:24:36,610 --> 00:24:38,910\nSo, for each of your network admins,\n\n510\n00:24:38,910 --> 00:24:41,230\nwhoever's going to be\nmanaging your data center.\n\n511\n00:24:41,230 --> 00:24:43,240\nThey would run the operation's manager.\n\n512\n00:24:43,240 --> 00:24:45,890\nAnd it lets them connect in and\n\n513\n00:24:45,890 --> 00:24:50,270\nthey can see all of the monitoring\ninformation, as well as, active alerts.\n\n514\n00:24:50,270 --> 00:24:54,910\nAnd this little panel right here\nis normally our go to guy for\n\n515\n00:24:54,910 --> 00:24:56,560\nreactive troubleshooting.\n\n516\n00:24:56,560 --> 00:24:59,250\nA problem happens we're reacting to it.\n\n517\n00:25:00,300 --> 00:25:02,330\nBut it's always better to be proactive.\n\n518\n00:25:02,330 --> 00:25:03,890\nTo see a problem that's\nabout to happen and\n\n519\n00:25:03,890 --> 00:25:05,800\nstop it from happening in the first place.\n\n520\n00:25:05,800 --> 00:25:09,230\nSo, we can go through monitoring and\nfind all sorts of data for\n\n521\n00:25:09,230 --> 00:25:11,190\nour proactive troubleshooting.\n\n522\n00:25:11,190 --> 00:25:13,580\nBut over here our active alerts,\nthat's our reactive side.\n\n523\n00:25:13,580 --> 00:25:15,800\nThese are problems that\nneed to be dealt with.\n\n524\n00:25:15,800 --> 00:25:17,710\nAnd you'll see I've got quite\na few that are sitting in here.\n\n525\n00:25:19,100 --> 00:25:20,650\nSo, we'll just take this very first one.\n\n526\n00:25:20,650 --> 00:25:24,580\nI've got my host parent\npartition CPU utilization high.\n\n527\n00:25:24,580 --> 00:25:27,760\nSo, I have a virtual\nmachine called SCVMMO1.\n\n528\n00:25:29,090 --> 00:25:29,860\nIt's a virtual machine.\n\n529\n00:25:29,860 --> 00:25:32,600\nIt's running my system center virtual\nmachine manager, but it is a VM,\n\n530\n00:25:32,600 --> 00:25:35,830\nand the host parent partition,\n\n531\n00:25:35,830 --> 00:25:39,948\nthe Hyper-V server that's underneath it,\nis having high CPU utilization.\n\n532\n00:25:39,948 --> 00:25:46,320\nSo, this VM by itself might be perfectly\nfine, but the host is under a burden.\n\n533\n00:25:46,320 --> 00:25:49,060\nAnd that may mean I have too\nmany guests on top of it.\n\n534\n00:25:49,060 --> 00:25:52,930\nOr I might have another guest that's\nrunning away, that's going crazy.\n\n535\n00:25:52,930 --> 00:25:57,180\nAnd I can see my SCCM01 is also\nshowing host parent partition\n\n536\n00:25:57,180 --> 00:25:58,400\nCPO utilization high.\n\n537\n00:25:58,400 --> 00:26:01,379\nThey're more than likely\nrunning on the same server.\n\n538\n00:26:01,379 --> 00:26:03,759\nI say more than likely,\nbut, I know they are.\n\n539\n00:26:03,759 --> 00:26:04,770\nThey're right there.\n\n540\n00:26:05,880 --> 00:26:06,640\nSo, I can see that alert.\n\n541\n00:26:06,640 --> 00:26:09,390\nAnd then, notice how one just went away.\n\n542\n00:26:09,390 --> 00:26:11,770\nI didn't click on anything,\nthat just happened.\n\n543\n00:26:11,770 --> 00:26:14,580\nThis is a dynamic real time display.\n\n544\n00:26:14,580 --> 00:26:17,640\nSo, that alert that I was on there\na moment ago, cleared and went away.\n\n545\n00:26:17,640 --> 00:26:19,290\nActually, popped back up didn't it?\n\n546\n00:26:19,290 --> 00:26:20,280\nThat little stinker.\n\n547\n00:26:20,280 --> 00:26:20,880\nAll right.\nSo,\n\n548\n00:26:20,880 --> 00:26:23,450\nsometimes they'll go away if\nthey've been resolved, and\n\n549\n00:26:23,450 --> 00:26:25,400\nthey could be resolved through\na few different means.\n\n550\n00:26:25,400 --> 00:26:28,710\nThrough, they're just done,\nthey fix themselves.\n\n551\n00:26:28,710 --> 00:26:33,830\nOr maybe somebody else was working in the\nsystem and they're troubleshooting it now.\n\n552\n00:26:33,830 --> 00:26:36,920\nSo, they don't want us to deal with it,\nit's now up there and\n\n553\n00:26:36,920 --> 00:26:37,920\nready for somebody else to work.\n\n554\n00:26:37,920 --> 00:26:40,890\nSo, when you start to look at these\ncolumns, you'll see resolution state,\n\n555\n00:26:40,890 --> 00:26:42,860\nand these all show as new.\n\n556\n00:26:42,860 --> 00:26:45,170\nNobody has messed with these.\n\n557\n00:26:45,170 --> 00:26:47,240\nAnd then,\nas you look along you'll see the age.\n\n558\n00:26:47,240 --> 00:26:48,530\nHow long they've been there.\n\n559\n00:26:48,530 --> 00:26:50,460\nSo, the one that I've got highlighted\nright now has been around for\n\n560\n00:26:50,460 --> 00:26:51,760\nfive minutes.\n\n561\n00:26:51,760 --> 00:26:53,690\nI can see the details down here about it.\n\n562\n00:26:53,690 --> 00:26:57,650\nAnd it's telling me what the alert was and\nthe servers that were involved.\n\n563\n00:26:57,650 --> 00:27:00,900\nSo I can click on that and\nright to that server's page if I want.\n\n564\n00:27:00,900 --> 00:27:02,550\nI get a description of the alert.\n\n565\n00:27:02,550 --> 00:27:03,990\nNow, this is the nice part.\n\n566\n00:27:03,990 --> 00:27:05,290\nMicrosoft made these alerts,\n\n567\n00:27:05,290 --> 00:27:09,570\nand they spend a lot of time\ndetailing explanations about it.\n\n568\n00:27:09,570 --> 00:27:11,990\nNot just that, but when we go\ninto some of our detailed views,\n\n569\n00:27:11,990 --> 00:27:15,380\nit will have recommended corrective\nactions that you can take.\n\n570\n00:27:15,380 --> 00:27:18,640\nIt'll tell ways to fix that problem,\nand that's really awesome.\n\n571\n00:27:18,640 --> 00:27:19,350\n>> Yeah it is.\n\n572\n00:27:19,350 --> 00:27:21,860\nNo more just that event ID,\nblah, blah, blah.\n\n573\n00:27:21,860 --> 00:27:24,954\nAnd you gotta Google, I mean Bing it or\nsomething like that, right?\n\n574\n00:27:24,954 --> 00:27:26,200\n[LAUGH]\n>> So Google event ID .Net,\n\n575\n00:27:26,200 --> 00:27:27,615\none of those sites.\n\n576\n00:27:27,615 --> 00:27:29,840\n>> [LAUGH]\n>> Spend all day on Bing and\n\n577\n00:27:29,840 --> 00:27:31,142\nnot find something.\n\n578\n00:27:31,142 --> 00:27:33,664\n>> [LAUGH]\n>> But you get a lot of information that's\n\n579\n00:27:33,664 --> 00:27:36,439\nabout that, and I'll just kinda\nscroll down here, and you'll see.\n\n580\n00:27:36,439 --> 00:27:40,710\nHere's link to a knowledge base\narticle for this particular alert.\n\n581\n00:27:40,710 --> 00:27:42,030\nHere's the summary.\n\n582\n00:27:42,030 --> 00:27:45,780\nHere's potential causes and\npotential resolutions.\n\n583\n00:27:45,780 --> 00:27:50,330\nRight here it's telling me some of\nthe things that I can do to correct that.\n\n584\n00:27:50,330 --> 00:27:52,260\nAnd that is a lot of value.\n\n585\n00:27:52,260 --> 00:27:57,270\nYou have a built in knowledge\nbase right inside of SComm.\n\n586\n00:27:57,270 --> 00:28:00,890\nYou'll also notice that it integrates\nwith the products underneath it.\n\n587\n00:28:00,890 --> 00:28:04,760\nSo for example, this is a virtual machine,\nand it's running on top of a host.\n\n588\n00:28:04,760 --> 00:28:06,370\nAnd if I right-click on it,\n\n589\n00:28:06,370 --> 00:28:10,640\nI'll see options in here that pertain\nto what I want to do with it, and.\n\n590\n00:28:10,640 --> 00:28:11,170\nOops.\n\n591\n00:28:11,170 --> 00:28:12,390\nNot what I wanted.\n\n592\n00:28:12,390 --> 00:28:15,290\nBut you'll see things like\nset resolution state.\n\n593\n00:28:15,290 --> 00:28:15,890\nOkay.\n\n594\n00:28:15,890 --> 00:28:20,350\nIf I'm gonna start working on this,\nI don't want another person to jump in and\n\n595\n00:28:20,350 --> 00:28:21,700\nstart working on it too.\n\n596\n00:28:21,700 --> 00:28:25,700\nSo the first thing that I would do is\ncome in here to set resolution state and\n\n597\n00:28:25,700 --> 00:28:26,280\nsay acknowledge.\n\n598\n00:28:27,330 --> 00:28:31,220\nAcknowledge, that means I've seen it,\nand I'm gonna start working on it.\n\n599\n00:28:31,220 --> 00:28:32,500\n>> That's huge, isn't it?\n\n600\n00:28:32,500 --> 00:28:33,790\n>> It is.\n>> I mean, really.\n\n601\n00:28:33,790 --> 00:28:35,300\n>> If you're a single man IT department,\n\n602\n00:28:35,300 --> 00:28:38,185\nor single woman IT department,\nit doesn't matter, right?\n\n603\n00:28:38,185 --> 00:28:39,420\n>> Mm-hm.\n>> It doesn't help you.\n\n604\n00:28:39,420 --> 00:28:41,340\nBut if you've got 20 people,\nor even just 2.\n\n605\n00:28:41,340 --> 00:28:43,010\nYou know, Mike, you and me, right?\n\n606\n00:28:43,010 --> 00:28:45,860\n>> Sitting in different offices, and\nwe both start working on the same problem.\n\n607\n00:28:45,860 --> 00:28:49,960\nAnd all of a sudden we're either running\ninto each other on trying to fix it, or\n\n608\n00:28:49,960 --> 00:28:51,000\nwe're just wasting our time,\n\n609\n00:28:51,000 --> 00:28:55,190\nwhere I could be doing something else\nwhile Don's handling that problem.\n\n610\n00:28:55,190 --> 00:28:56,450\n>> Yeah.\nOr maybe you say like oh,\n\n611\n00:28:56,450 --> 00:28:57,740\nI'll just reboot the server.\n\n612\n00:28:57,740 --> 00:29:00,649\nWell I'm looking at it like oh, crap,\nthe server just rebooted for no reason.\n\n613\n00:29:00,649 --> 00:29:02,410\n>> [LAUGH]\n>> And I gotta wait for\n\n614\n00:29:02,410 --> 00:29:05,360\nit to come back up so I can look at\nthe event logs and see who did it.\n\n615\n00:29:05,360 --> 00:29:07,230\nAnd that's the kind of thing that happens.\n\n616\n00:29:07,230 --> 00:29:08,600\nThis helps to avoid that.\n\n617\n00:29:08,600 --> 00:29:11,880\nSo this alert now shows as acknowledged,\nright.\n\n618\n00:29:11,880 --> 00:29:14,710\nSomebody is aware of it and\nsomebody's already working on it.\n\n619\n00:29:14,710 --> 00:29:16,290\nI don't have to step on their toes.\n\n620\n00:29:16,290 --> 00:29:19,140\nAnd somewhere buried in here it\nactually says who acknowledged it.\n\n621\n00:29:19,140 --> 00:29:21,290\nI think I have to refresh\nmy screen to see it.\n\n622\n00:29:21,290 --> 00:29:23,320\n>> If you right-click on prop and\nchoose properties,\n\n623\n00:29:23,320 --> 00:29:26,720\ndoesn't it pull up a-\n>> Is it in there?\n\n624\n00:29:26,720 --> 00:29:28,690\n>> I think so\ncuz there we can start doing tickets.\n\n625\n00:29:28,690 --> 00:29:30,376\n>> I don't know if it tells me who did it.\n\n626\n00:29:30,376 --> 00:29:31,871\n>> Let's go into our history,\n\n627\n00:29:31,871 --> 00:29:35,210\noh I guess here you can see\nlike alert modified by user.\n\n628\n00:29:35,210 --> 00:29:37,530\nI'm logged in as a generic administrator.\n\n629\n00:29:37,530 --> 00:29:41,210\nIt doesn't actually say, there is\nsomewhere in here though where it says\n\n630\n00:29:41,210 --> 00:29:44,460\nlike, this is the person that acknowledged\nit, so you know who's working on it\n\n631\n00:29:44,460 --> 00:29:47,582\nIt doesn't help when I'm logging\nin as a generic account.\n\n632\n00:29:47,582 --> 00:29:49,040\n>> [LAUGH]\n>> But basically,\n\n633\n00:29:49,040 --> 00:29:51,270\nyou get this information,\nyou can track all of that,\n\n634\n00:29:51,270 --> 00:29:54,110\nhow long that alert took to be resolved.\n\n635\n00:29:54,110 --> 00:29:55,310\nIf you're tracking service level\n\n636\n00:29:55,310 --> 00:29:56,040\nagreements-\n>> Right.\n\n637\n00:29:56,040 --> 00:29:57,040\n>> SLAs?\n\n638\n00:29:57,040 --> 00:30:00,209\nYou might have a SLA with\nyour customer that says,\n\n639\n00:30:00,209 --> 00:30:04,288\nwe will have someone working on\nyour issue within 30 minutes.\n\n640\n00:30:04,288 --> 00:30:07,186\nAnd so I can look here and\nsay okay this one's acknowledged and\n\n641\n00:30:07,186 --> 00:30:10,865\nit's aged eight minutes so I know they\nacknowledged it within a short period of\n\n642\n00:30:10,865 --> 00:30:14,220\ntime where you can see when\nsomething's gone beyond that.\n\n643\n00:30:14,220 --> 00:30:17,020\nSo, really good information\nto be found in here.\n\n644\n00:30:17,020 --> 00:30:19,500\nThe other integrations that we have,\nthough.\n\n645\n00:30:19,500 --> 00:30:24,540\nIf you right-click on it,\nyou'll see things like Maintenance Mode.\n\n646\n00:30:24,540 --> 00:30:26,900\nIf I'm having a problem with\none of my Hyper-V hosts,\n\n647\n00:30:26,900 --> 00:30:30,070\nI could put it into maintenance mode.\n\n648\n00:30:30,070 --> 00:30:33,385\nAnd What that'll do is if there's\nany running virtual machines on it,\n\n649\n00:30:33,385 --> 00:30:36,835\nit'll try and\nlive migrate them to other Hyper-V hosts.\n\n650\n00:30:36,835 --> 00:30:38,075\nIt'll move them off for me.\n\n651\n00:30:38,075 --> 00:30:41,285\nAnd then once they're off,\nit'll put Hyper-V and\n\n652\n00:30:41,285 --> 00:30:45,535\nthat server in general into maintenance\nmode so that no new VMs come over to it.\n\n653\n00:30:45,535 --> 00:30:47,765\nAnd now I can go and\ntroubleshoot and work with it but\n\n654\n00:30:47,765 --> 00:30:51,065\nI know my VMs were okay because\nI moved them somewhere else.\n\n655\n00:30:51,065 --> 00:30:53,760\nCPU utilization wouldn't be\na scenario where I'd use that.\n\n656\n00:30:53,760 --> 00:30:58,710\nBut if it lost connectivity to ISCSI,\nSAN or something like that,\n\n657\n00:30:58,710 --> 00:31:03,400\nif it had an issue there, then we'd\nuse this maintenance mode option.\n\n658\n00:31:03,400 --> 00:31:06,400\nBut there's a lot of neat\nstuff that we can do in here.\n\n659\n00:31:06,400 --> 00:31:09,962\nThe Open menu is one of the most powerful.\n\n660\n00:31:09,962 --> 00:31:12,290\nYou right-click on any alert that\nyou have and you go to Open.\n\n661\n00:31:12,290 --> 00:31:15,280\nAnd you'll see you can\ncreate a diagram view.\n\n662\n00:31:15,280 --> 00:31:19,820\nSome alerts involve more than one server\nand the diagram view will show that.\n\n663\n00:31:19,820 --> 00:31:24,670\nIf it's part of a cluster or if it's an\napplication that we've entered in and so\n\n664\n00:31:24,670 --> 00:31:27,130\nit knows the servers that\nrun the application and\n\n665\n00:31:27,130 --> 00:31:28,670\nthe databases that back end it or\nwhatever.\n\n666\n00:31:28,670 --> 00:31:31,000\nIt can map it out and you get an idea.\n\n667\n00:31:31,000 --> 00:31:32,260\nThere's the event view,\n\n668\n00:31:32,260 --> 00:31:35,940\nthat'll actually show the event logs that\nwe're generating related to that error.\n\n669\n00:31:35,940 --> 00:31:39,930\nThe state view so you can see\nthe current status of that system.\n\n670\n00:31:39,930 --> 00:31:42,090\nAnd the one that I like\nwhich is performance view.\n\n671\n00:31:42,090 --> 00:31:45,260\nIt'll take you into\na performance monitor screen and\n\n672\n00:31:45,260 --> 00:31:48,380\nyou can actually start to monitor\nthe performance of that system.\n\n673\n00:31:48,380 --> 00:31:51,497\nNow, I didn't pull each of these up\nbecause the system that I am on here has\n\n674\n00:31:51,497 --> 00:31:52,418\nonly so much memory.\n\n675\n00:31:52,418 --> 00:31:57,504\nThe systems center operations manager\nis really CPU and RAM intensive.\n\n676\n00:31:57,504 --> 00:31:59,444\nSo for\nme it's going to run a little slow, so\n\n677\n00:31:59,444 --> 00:32:02,075\nI actually pulled up the performance\nview before the show.\n\n678\n00:32:02,075 --> 00:32:05,256\nSo I could have it just kind of sitting,\nand we wouldn't have to wait on it.\n\n679\n00:32:05,256 --> 00:32:10,140\nBut here I've got a server, and\nI've pulled up a range of time for it.\n\n680\n00:32:10,140 --> 00:32:13,510\nWhen you go to that performance view,\nthis is the screen you see.\n\n681\n00:32:13,510 --> 00:32:15,120\nAnd over here,\nyou can select a time range.\n\n682\n00:32:15,120 --> 00:32:18,495\nSo you can tell it what range you want\nto see the default shows you the last\n\n683\n00:32:18,495 --> 00:32:20,245\none day, the last 24 hours.\n\n684\n00:32:20,245 --> 00:32:21,095\nAll right.\n\n685\n00:32:21,095 --> 00:32:26,705\nAnd then, down here, you'lll see all\nthe data that S comm has logged for it.\n\n686\n00:32:26,705 --> 00:32:29,095\nThis is not real time data.\n\n687\n00:32:29,095 --> 00:32:31,735\nThis is pulled from the s comm database.\n\n688\n00:32:31,735 --> 00:32:34,635\nSo even if the server is powered off,\n\n689\n00:32:34,635 --> 00:32:36,765\nwe can still access its\nhistorical information.\n\n690\n00:32:36,765 --> 00:32:39,340\nBecause it's stored in\nthe s comm database, right?\n\n691\n00:32:39,340 --> 00:32:40,295\nThat's really awesome.\n\n692\n00:32:40,295 --> 00:32:41,790\n>> Mm-hm.\n>> Because it's hard to troubleshoot\n\n693\n00:32:41,790 --> 00:32:43,410\na server that just\nwinked out of existence.\n\n694\n00:32:43,410 --> 00:32:44,380\n>> Right.\n\n695\n00:32:44,380 --> 00:32:46,720\n>> And so\nhere we can see that information.\n\n696\n00:32:46,720 --> 00:32:49,500\nAnd so when I look at this, I can just\npick and choose what I wanna see.\n\n697\n00:32:49,500 --> 00:32:50,840\nProcessor was what the alert was.\n\n698\n00:32:50,840 --> 00:32:52,020\nSo I've got that mapped.\n\n699\n00:32:52,020 --> 00:32:53,770\nBut I could add in other things.\n\n700\n00:32:53,770 --> 00:32:56,040\nYou see, all the objects and\ncounters in here.\n\n701\n00:32:57,150 --> 00:33:01,810\nSo I might want to query,\nlet's see, I did processor time.\n\n702\n00:33:01,810 --> 00:33:05,050\nThis is processor time from\nMicrosoft Windows, but you'll see,\n\n703\n00:33:05,050 --> 00:33:06,220\nit's running other things.\n\n704\n00:33:06,220 --> 00:33:09,620\nIt's got like the VEEM VMware\ncollector installed on it.\n\n705\n00:33:09,620 --> 00:33:12,050\nAnd it's got a few other applications.\n\n706\n00:33:12,050 --> 00:33:14,950\nAnd so, I could come in and\nmap it based on the application itself.\n\n707\n00:33:14,950 --> 00:33:17,730\nAnd I could say, throw that on there,\nand it just did.\n\n708\n00:33:17,730 --> 00:33:18,490\nIt's flat-lined, right?\n\n709\n00:33:18,490 --> 00:33:20,390\nThat purple line across the bottom.\n\n710\n00:33:20,390 --> 00:33:21,620\nWell, it's not completely flat-lined.\n\n711\n00:33:21,620 --> 00:33:22,610\nIt's trying to load.\n\n712\n00:33:22,610 --> 00:33:27,130\nBut I can see that this particular\napplication really, wasn't responsible for\n\n713\n00:33:27,130 --> 00:33:30,250\nthe high CP-utilization\nthat I was getting.\n\n714\n00:33:30,250 --> 00:33:31,280\nYou know, I've got it monitored here.\n\n715\n00:33:31,280 --> 00:33:32,860\nAnd i can start to break that down.\n\n716\n00:33:32,860 --> 00:33:36,160\nSo you just pick the various\nones that you want to monitor.\n\n717\n00:33:36,160 --> 00:33:36,960\nAnd I'm sure,\n\n718\n00:33:36,960 --> 00:33:41,150\nif I poked around in here, this'll\nactually be tied to something like SQL.\n\n719\n00:33:41,150 --> 00:33:43,610\nIt usually ends up being SQL on this one.\n\n720\n00:33:43,610 --> 00:33:46,970\nSo if I break that down and then go in and\nfind it, I can start to locate that.\n\n721\n00:33:46,970 --> 00:33:50,860\nBut having this information right here,\nextremely useful.\n\n722\n00:33:50,860 --> 00:33:53,970\nYou can export the images for\nyour reports, and so on.\n\n723\n00:33:53,970 --> 00:33:58,740\nAnd you can easily jump to the other views\nthat we saw on that open menu earlier.\n\n724\n00:33:58,740 --> 00:34:02,140\nSo if I want to jump to my alert view,\nmy event view, or whatever.\n\n725\n00:34:02,140 --> 00:34:02,960\nWe can do that.\n\n726\n00:34:02,960 --> 00:34:04,420\nI don't think I have a diagram for\nthis one.\n\n727\n00:34:04,420 --> 00:34:05,060\nLet's see.\n\n728\n00:34:06,560 --> 00:34:07,640\nI don't want to wait to long either.\n\n729\n00:34:07,640 --> 00:34:09,840\n>> Right\n>> I'm a terribly impatient person lately.\n\n730\n00:34:09,840 --> 00:34:11,690\nSo we'll give it a second to load there.\n\n731\n00:34:11,690 --> 00:34:13,230\nIt is a little slow on my system,\n\n732\n00:34:13,230 --> 00:34:15,560\nbecause I've only got four\ngigs of RAM assigned to it.\n\n733\n00:34:15,560 --> 00:34:18,060\nAnd even for\nmonitoring a small environment,\n\n734\n00:34:18,060 --> 00:34:22,310\nthat's really not enough memory for it\nto cache all the tables it needs in RAM.\n\n735\n00:34:22,310 --> 00:34:26,680\nI'm also running my database\non the same server as SCOM,\n\n736\n00:34:26,680 --> 00:34:30,010\nwhich is not the greatest thing for\nperformance, but anyhow.\n\n737\n00:34:30,010 --> 00:34:32,440\nEventually, that'll come up.\n\n738\n00:34:32,440 --> 00:34:36,760\nBut basically, that's what the SCOM\nadministration panel is like.\n\n739\n00:34:36,760 --> 00:34:38,300\nThat's what it does.\n\n740\n00:34:38,300 --> 00:34:40,470\nAnd it gives us that central point.\n\n741\n00:34:41,910 --> 00:34:46,270\nNow, where it goes beyond typical\nmonitoring is, it doesn't just have to\n\n742\n00:34:46,270 --> 00:34:50,770\nmonitor performance like this,\nlike CPU, memory, disk I/O, right?\n\n743\n00:34:52,860 --> 00:34:55,180\nEarliest Microsoft courses were\ntaught about the big four.\n\n744\n00:34:55,180 --> 00:34:57,010\n>> Right.\nThe four main setup systems, yup.\n\n745\n00:34:57,010 --> 00:34:59,470\n>> So, those are the things that we\nare definitely going to want to monitor.\n\n746\n00:34:59,470 --> 00:35:02,110\nWe'll use this instead of the performance\nmonitor on individual machines.\n\n747\n00:35:02,110 --> 00:35:04,090\nHere, we get centralized monitoring.\n\n748\n00:35:05,320 --> 00:35:08,930\nBut, we can also, monitor other things,\nlike applications.\n\n749\n00:35:08,930 --> 00:35:11,810\nIt can actually test whether\na particular application is running and\n\n750\n00:35:11,810 --> 00:35:12,980\nanswering calls.\n\n751\n00:35:12,980 --> 00:35:14,910\nIt can test performance for\nthe application,\n\n752\n00:35:14,910 --> 00:35:18,130\nlike how long it takes a web\nserver to respond and so on.\n\n753\n00:35:18,130 --> 00:35:18,910\n>> Right.\n\n754\n00:35:18,910 --> 00:35:22,940\n>> We talked about the GSM, the Global\nService Monitor in the first segment.\n\n755\n00:35:22,940 --> 00:35:24,890\nAnd how that runs in\nthe Windows Azure Cloud and\n\n756\n00:35:24,890 --> 00:35:26,870\nit can monitor your applications.\n\n757\n00:35:26,870 --> 00:35:29,130\nWell, S com can do that too.\n\n758\n00:35:29,130 --> 00:35:32,350\nSo why not just use S com instead of GSM?\n\n759\n00:35:32,350 --> 00:35:34,960\nWell GSM's power is the fact\nthat it's monitoring from\n\n760\n00:35:34,960 --> 00:35:37,130\nall those data centers around the world.\n\n761\n00:35:37,130 --> 00:35:41,580\nVersus S comm that's monitoring\nfrom either the S comm server or\n\n762\n00:35:41,580 --> 00:35:43,850\nfrom the agent running\non the server itself.\n\n763\n00:35:43,850 --> 00:35:46,985\nAnd that's not a real world view\nof what your end users see.\n\n764\n00:35:46,985 --> 00:35:51,060\nSo GSM gives you that real world view.\n\n765\n00:35:51,060 --> 00:35:54,600\nBut for internal tracking, we can use s\ncomm just fine to track the application,\n\n766\n00:35:54,600 --> 00:35:56,590\nmake sure it's running, working.\n\n767\n00:35:56,590 --> 00:36:00,690\nIf it's not working, it's easy to\ncorrelate the performance data and\n\n768\n00:36:00,690 --> 00:36:03,410\nevent data with the time of that failure.\n\n769\n00:36:03,410 --> 00:36:06,890\nAnd we can track it, cuz it's all right\nhere in our centralized database.\n\n770\n00:36:08,940 --> 00:36:11,650\nNow on the application side,\nthere's some advanced functionality too.\n\n771\n00:36:11,650 --> 00:36:12,840\nWhen you install s comm,\n\n772\n00:36:12,840 --> 00:36:15,600\nthere's a couple of additional\ntools that come along with it.\n\n773\n00:36:15,600 --> 00:36:18,040\nOne of them is called\nthe Application Advisor.\n\n774\n00:36:18,040 --> 00:36:19,570\nAnd let me just bring it up.\n\n775\n00:36:19,570 --> 00:36:20,410\nHere we go.\n\n776\n00:36:20,410 --> 00:36:22,160\nThis is the Application Advisor.\n\n777\n00:36:22,160 --> 00:36:26,920\nAnd this is what takes the place\nof GSM on the internal network.\n\n778\n00:36:26,920 --> 00:36:29,210\nIt lets you enter in your applications.\n\n779\n00:36:29,210 --> 00:36:30,520\nYou define your applications.\n\n780\n00:36:30,520 --> 00:36:32,790\nMicrosoft doesn't know what you're using.\n\n781\n00:36:32,790 --> 00:36:36,280\nAnd you tell it how to access the\napplication, what databases are involved,\n\n782\n00:36:36,280 --> 00:36:38,850\nall the different systems that\nare a part of that application.\n\n783\n00:36:38,850 --> 00:36:40,430\nAnd then, it starts monitoring it.\n\n784\n00:36:40,430 --> 00:36:44,740\nAnd the application advisor will\ngive you recommendations, right?\n\n785\n00:36:44,740 --> 00:36:48,020\nRecommendations on where\nyou might want to move\n\n786\n00:36:48,020 --> 00:36:51,370\nthose VMs to another physical\nserver with better performance.\n\n787\n00:36:51,370 --> 00:36:52,750\nHow to better balance them.\n\n788\n00:36:52,750 --> 00:36:57,330\nSuggestions on adding more web servers or\nmoving up resources.\n\n789\n00:36:57,330 --> 00:36:59,980\nIt gives you a lot of good information.\n\n790\n00:36:59,980 --> 00:37:04,540\nAnd it breaks things down based on status,\nperformance, and even failures.\n\n791\n00:37:04,540 --> 00:37:07,970\nIt can break that down and\ngive you some really good information.\n\n792\n00:37:07,970 --> 00:37:10,470\nBut it's a only as powerful as\nthe information you put in it.\n\n793\n00:37:10,470 --> 00:37:13,510\nYou have to define your applications for\nit to be aware.\n\n794\n00:37:13,510 --> 00:37:17,800\nSo it really is more\nlike a reporting service.\n\n795\n00:37:17,800 --> 00:37:21,350\nSo it's reporting on information\nthat you've feed into it.\n\n796\n00:37:21,350 --> 00:37:24,120\nSo I guess, you could argue that is\nreally what s comm is in general.\n\n797\n00:37:24,120 --> 00:37:25,230\n>> Yeah, pretty much.\n\n798\n00:37:25,230 --> 00:37:28,590\nBut it is nice how it breaks it out\nwhere you can look at that application.\n\n799\n00:37:28,590 --> 00:37:31,140\nYou can look at the infrastructures,\nas you were saying,\n\n800\n00:37:31,140 --> 00:37:32,450\nyour key subsets and things like that.\n\n801\n00:37:32,450 --> 00:37:35,690\nYou can look at the client side\nperformance of that application.\n\n802\n00:37:35,690 --> 00:37:36,350\nThe server side.\n\n803\n00:37:36,350 --> 00:37:37,137\nA lot of these applications,\n\n804\n00:37:37,137 --> 00:37:39,430\nyou know, it's not just one\napplication running on a machine.\n\n805\n00:37:39,430 --> 00:37:43,030\nIt's got to hit other resources,\ndatabase back end, things like that.\n\n806\n00:37:43,030 --> 00:37:44,800\nSo, you can monitor each\none of those pieces.\n\n807\n00:37:44,800 --> 00:37:46,070\nYou can see where is the trouble.\n\n808\n00:37:46,070 --> 00:37:47,770\nIs it on the client part?\n\n809\n00:37:47,770 --> 00:37:48,970\nThe application part?\n\n810\n00:37:48,970 --> 00:37:54,810\nIs it back on the infrastructure, or\nthe server side of the application?\n\n811\n00:37:54,810 --> 00:37:59,710\nIt can even let us throw in\nsome synthetic transactions.\n\n812\n00:37:59,710 --> 00:38:02,800\nTo where we can run that\napplication through a workload and\n\n813\n00:38:02,800 --> 00:38:04,290\nsee where that problem is lying.\n\n814\n00:38:04,290 --> 00:38:07,610\nAnd then, give us these beautiful\ncustomizable dashboards that we\n\n815\n00:38:07,610 --> 00:38:08,650\ncan create.\n\n816\n00:38:08,650 --> 00:38:11,230\nAnd see all that information\nin a nice graphical view or\n\n817\n00:38:11,230 --> 00:38:13,500\nbeautiful reports that it makes.\n\n818\n00:38:13,500 --> 00:38:16,725\n>> Yeah, those reports,\nthat's really what your CIO wants.\n\n819\n00:38:16,725 --> 00:38:18,300\n>> Mm-hm, yeah.\n>> When you're doing trouble analysis,\n\n820\n00:38:18,300 --> 00:38:20,290\nthey don't wanna look at spreadsheets and\nnumbers.\n\n821\n00:38:20,290 --> 00:38:21,730\nThey want a nice little bar graph, right?\n\n822\n00:38:21,730 --> 00:38:23,220\n>> Right, yeah.\n>> And so they can map that out.\n\n823\n00:38:23,220 --> 00:38:25,310\nIt does really cool things.\n\n824\n00:38:25,310 --> 00:38:26,980\nIf you're into project management and\n\n825\n00:38:26,980 --> 00:38:29,390\nyou end up having to do\nthings like Pareto diagrams.\n\n826\n00:38:29,390 --> 00:38:30,920\nIt actually generates those for you.\n\n827\n00:38:30,920 --> 00:38:33,050\nMapping where your\nfailures are coming from.\n\n828\n00:38:33,050 --> 00:38:35,730\nSo you can put your focus on\nthe most important areas.\n\n829\n00:38:37,050 --> 00:38:39,960\nThere's another tool that's closely\nrelated to this called the application\n\n830\n00:38:39,960 --> 00:38:40,780\ndiagnostic tool.\n\n831\n00:38:42,470 --> 00:38:46,650\nWhat it does,\nis it takes failures, errors.\n\n832\n00:38:46,650 --> 00:38:49,120\nAnd it correlates all the data together.\n\n833\n00:38:49,120 --> 00:38:52,770\nPerformance data,\nevent log data, alert history.\n\n834\n00:38:52,770 --> 00:38:54,120\nIt puts it all in one place.\n\n835\n00:38:54,120 --> 00:38:56,320\nSo when we're troubleshooting\na problem with an application,\n\n836\n00:38:56,320 --> 00:38:58,630\nwe can jump over to the diagnostic screen.\n\n837\n00:38:58,630 --> 00:39:01,260\nWe can pull up whichever\napplication it is.\n\n838\n00:39:01,260 --> 00:39:03,140\nAnd again,\nwe have to define our application.\n\n839\n00:39:03,140 --> 00:39:05,220\nYou need to define them in\nthese application groups.\n\n840\n00:39:05,220 --> 00:39:08,640\nAnd we define our application,\nand then it maps it all out.\n\n841\n00:39:08,640 --> 00:39:11,300\nWe can see our monitored requests and\nperformance events.\n\n842\n00:39:11,300 --> 00:39:12,790\nYou see your basic information here.\n\n843\n00:39:12,790 --> 00:39:14,610\nAnd then, you start drilling down into it.\n\n844\n00:39:14,610 --> 00:39:18,630\nGetting into your events and the actual\ndata that was happening when that error\n\n845\n00:39:18,630 --> 00:39:21,520\noccurred makes it a lot easier\nto troubleshoot an application.\n\n846\n00:39:21,520 --> 00:39:25,050\nNow, I find that as\na systems administrator,\n\n847\n00:39:25,050 --> 00:39:26,860\nthis tool's not terribly useful.\n\n848\n00:39:26,860 --> 00:39:30,210\nBut as a developer, it's very handy.\n\n849\n00:39:30,210 --> 00:39:33,860\nThe developer of a web app can look at\nthis data and use it to troubleshoot\n\n850\n00:39:33,860 --> 00:39:36,860\nwhat's causing the most failures,\nand then take corrective action.\n\n851\n00:39:36,860 --> 00:39:38,730\nSo, a lot of times as\na System Administrator,\n\n852\n00:39:38,730 --> 00:39:42,730\nwe're gathering this data and then,\nhanding it off to our development team.\n\n853\n00:39:42,730 --> 00:39:46,625\n>> You know, one of the things, I laugh,\nbecause it prevents the finger pointing,\n\n854\n00:39:46,625 --> 00:39:48,330\nwhen you got your different teams.\n\n855\n00:39:48,330 --> 00:39:49,565\nYour infrastructure team.\n\n856\n00:39:49,565 --> 00:39:50,763\nYour developer tea.\n\n857\n00:39:50,763 --> 00:39:52,390\nTheir always saying, no, no, no.\n\n858\n00:39:52,390 --> 00:39:53,480\nMy application's running fine.\n\n859\n00:39:53,480 --> 00:39:55,710\nThere's got to be something\nup with the network.\n\n860\n00:39:55,710 --> 00:39:56,690\nNo, no, no, the network's fine.\n\n861\n00:39:56,690 --> 00:39:58,200\nit's got to be the server guys.\n\n862\n00:39:58,200 --> 00:39:59,544\nThey're not giving us enough resources.\n\n863\n00:39:59,544 --> 00:40:05,838\nThis lets me pinpoint where that problem\nis, and I can solve our problem All right.\n\n864\n00:40:05,838 --> 00:40:08,863\nNow while they don't expect\nyou to know it on the exam.\n\n865\n00:40:08,863 --> 00:40:12,950\nIn the show notes I'll post the URL to\nMicrosoft's page that explains how to set\n\n866\n00:40:12,950 --> 00:40:16,915\nup your application for monitoring\ninside of the application diagnostic and\n\n867\n00:40:16,915 --> 00:40:18,200\napp adviser utilities.\n\n868\n00:40:18,200 --> 00:40:21,260\nSo it's pretty easy to get them\nmapped in and put in to place.\n\n869\n00:40:21,260 --> 00:40:24,110\nSo, feel free to browse\nthrough that in your own time\n\n870\n00:40:24,110 --> 00:40:25,990\nif you want to check it out and\nmake use of it.\n\n871\n00:40:25,990 --> 00:40:26,540\nIt is really neat.\n\n872\n00:40:27,840 --> 00:40:31,810\nBut you guys get an idea\nof what SCOM is capable of.\n\n873\n00:40:31,810 --> 00:40:34,160\nRight?\nThat it's able to monitor these systems,\n\n874\n00:40:34,160 --> 00:40:37,410\nand I have barely scratched\nthe surface with what you can do.\n\n875\n00:40:37,410 --> 00:40:40,860\nYou'll see over here all the different\nthings that it's monitoring and\n\n876\n00:40:40,860 --> 00:40:42,660\nyou can set up automatic discovery.\n\n877\n00:40:42,660 --> 00:40:45,540\nSo, as you add new servers,\nthose automatically find them and\n\n878\n00:40:45,540 --> 00:40:47,740\nbring them into SCOM and\nstart monitoring them.\n\n879\n00:40:47,740 --> 00:40:50,590\nYou can pull up all sorts\nof reporting information.\n\n880\n00:40:50,590 --> 00:40:52,520\nAnd Mike you mentioned dashboards.\n\n881\n00:40:52,520 --> 00:40:54,850\nYou've got this my workspace.\n\n882\n00:40:54,850 --> 00:40:59,040\nYou might only be responsible for\na particular portion of the data center.\n\n883\n00:40:59,040 --> 00:41:03,960\nAnd so you can create your own workspace\nwith dashboard widgets, that identify\n\n884\n00:41:03,960 --> 00:41:08,050\nthe status of the systems that you monitor\nand gives you a much more filtered view.\n\n885\n00:41:08,050 --> 00:41:11,025\nBecause this can get really big with\nall the data that gets thrown in there.\n\n886\n00:41:11,025 --> 00:41:12,490\n>> Right.\n\n887\n00:41:12,490 --> 00:41:18,300\n>> Now, the neat thing about SCOM, is that\nit does create a centralized place for\n\n888\n00:41:18,300 --> 00:41:20,210\nall of your monitoring and\ntroubleshooting.\n\n889\n00:41:20,210 --> 00:41:23,220\nSo if you've got 20 IT admins,\nthey're all going to this one place.\n\n890\n00:41:23,220 --> 00:41:26,892\nThey're all using the same data, and\nit really does make life better.\n\n891\n00:41:26,892 --> 00:41:28,300\nAll right?\n\n892\n00:41:28,300 --> 00:41:29,800\nSome of the things we\nneed to keep in mind.\n\n893\n00:41:29,800 --> 00:41:32,072\nFirst off,\nSCOM is pretty resource intensive.\n\n894\n00:41:32,072 --> 00:41:32,900\nAll right.\n\n895\n00:41:32,900 --> 00:41:35,530\nYou really need a minimum of two servers.\n\n896\n00:41:35,530 --> 00:41:37,190\nOne for\nhandling the operation advantage room.\n\n897\n00:41:37,190 --> 00:41:37,900\nOne for the database.\n\n898\n00:41:37,900 --> 00:41:39,827\nThey really do need to be separate.\n\n899\n00:41:39,827 --> 00:41:42,640\nAnd then you may need to add\nmore based on utilization.\n\n900\n00:41:42,640 --> 00:41:47,690\nIf nothing else, you might need\nto scale them up hardware-wise.\n\n901\n00:41:47,690 --> 00:41:51,720\nThe second thing to remember is,\nit is centralized.\n\n902\n00:41:51,720 --> 00:41:54,280\nSo, what happens if it fails?\n\n903\n00:41:54,280 --> 00:41:56,890\nNow all your monitoring is offline,\nso that would be pretty bad.\n\n904\n00:41:56,890 --> 00:41:57,430\nRight?\n\n905\n00:41:57,430 --> 00:42:02,510\nSo, if you're going to rely upon SCOM for\ndoing your operations and\n\n906\n00:42:02,510 --> 00:42:05,830\nmonitoring, you probably need\nto build in some redundancy.\n\n907\n00:42:05,830 --> 00:42:06,640\n>> Right.\n\n908\n00:42:06,640 --> 00:42:09,740\n>> And in SCOM you have what\nare called resource pools.\n\n909\n00:42:09,740 --> 00:42:14,430\nLike if I go under administration here,\nwe'll find them buried in here somewhere.\n\n910\n00:42:14,430 --> 00:42:16,860\nBut basically you create\nthis resource pools and\n\n911\n00:42:16,860 --> 00:42:22,010\nwhat a resource pool is, there it is,\nis a collection of SCOM systems.\n\n912\n00:42:22,010 --> 00:42:22,580\nRight?\nAnd\n\n913\n00:42:22,580 --> 00:42:24,430\nthese will be your operations manager for\n\n914\n00:42:24,430 --> 00:42:27,230\nyour front end as well as database\nservices for that back end.\n\n915\n00:42:27,230 --> 00:42:30,690\nThat becomes your resource pool,\nreally on the database side,\n\n916\n00:42:30,690 --> 00:42:34,030\nyou used the SQL replication and\nredundancy functionality there.\n\n917\n00:42:34,030 --> 00:42:36,350\nSo you can put your SQL\ndatabase on a cluster.\n\n918\n00:42:36,350 --> 00:42:38,060\nIt's kind of got it all built in.\n\n919\n00:42:38,060 --> 00:42:41,400\nBut in the operations manager you bring up\n\n920\n00:42:41,400 --> 00:42:46,070\nmultiple operation manager severs which\noperate independently by default.\n\n921\n00:42:46,070 --> 00:42:49,110\nAnd then you put them in\na resource pool together.\n\n922\n00:42:49,110 --> 00:42:51,990\nSo if one fails, people just\nstart reporting to the other one.\n\n923\n00:42:51,990 --> 00:42:55,060\nIt gets you that redundancy and\nin scalability.\n\n924\n00:42:55,060 --> 00:42:58,280\nSo you've got that functionality\nto build redundancy.\n\n925\n00:42:58,280 --> 00:43:02,680\nAnd notice here, we've kinda got it set\nup different pools for different things.\n\n926\n00:43:02,680 --> 00:43:03,200\nRight?\n\n927\n00:43:03,200 --> 00:43:06,010\nSo we've got this all management\nservers resource pool, and\n\n928\n00:43:06,010 --> 00:43:08,390\na notifications resource pool.\n\n929\n00:43:08,390 --> 00:43:11,470\nWe might be splitting up our\nmanagement servers to say,\n\n930\n00:43:11,470 --> 00:43:14,410\nthis management server is just for\nreporting.\n\n931\n00:43:14,410 --> 00:43:18,070\nAnd then these other management servers\nare for receiving notifications and\n\n932\n00:43:18,070 --> 00:43:18,810\nupdates.\n\n933\n00:43:18,810 --> 00:43:21,640\nSo the data collectors are all\npushing to those other nodes.\n\n934\n00:43:21,640 --> 00:43:23,480\nSo you can really start to split it out.\n\n935\n00:43:23,480 --> 00:43:26,110\nIf you're managing 10,000 servers,\n\n936\n00:43:26,110 --> 00:43:28,860\nit's way more than a single\nserver's gonna be able to handle.\n\n937\n00:43:28,860 --> 00:43:33,960\nI don't care how much RAM and CPU you\nstick in it, it's gonna get overrun.\n\n938\n00:43:33,960 --> 00:43:37,280\nSo resource pools allow\nus that redundancy.\n\n939\n00:43:37,280 --> 00:43:39,930\nPlan for redundancy with SCOM.\n\n940\n00:43:39,930 --> 00:43:40,930\nAll right?\n\n941\n00:43:40,930 --> 00:43:43,080\nNow if we break the components\ndown with SCOM,\n\n942\n00:43:43,080 --> 00:43:47,450\nthere's a couple of components you need\nto be aware of, really four components.\n\n943\n00:43:47,450 --> 00:43:48,830\nWe talked about the Operation Manager.\n\n944\n00:43:48,830 --> 00:43:49,640\nThat's component number one.\n\n945\n00:43:49,640 --> 00:43:53,120\nAnd we talked about the database and\nI referred to it as one.\n\n946\n00:43:53,120 --> 00:43:55,030\nThere's actually two databases.\n\n947\n00:43:55,030 --> 00:43:59,180\nThere's the Operational Database and\nthe Reporting Database.\n\n948\n00:43:59,180 --> 00:44:01,170\nThe operational database is the live,\n\n949\n00:44:01,170 --> 00:44:03,510\nhere's what's coming in\nfrom the field data.\n\n950\n00:44:03,510 --> 00:44:06,100\nAll the data we harvest from our\nclients is going right here into this\n\n951\n00:44:06,100 --> 00:44:07,820\noperational database.\n\n952\n00:44:07,820 --> 00:44:12,630\nThat operational database is then\nmirrored to a reporting database.\n\n953\n00:44:12,630 --> 00:44:16,860\nThe reporting database will have\neverything the operational database has\n\n954\n00:44:16,860 --> 00:44:18,250\nand some more.\n\n955\n00:44:18,250 --> 00:44:20,740\nIt'll actually aggregate\nsome of the data together.\n\n956\n00:44:20,740 --> 00:44:25,530\nSo you might be reporting CPU utilization\nevery five minutes for 24 hours.\n\n957\n00:44:25,530 --> 00:44:29,760\nAnd it will also store the aggregates\nof what it was like once an hour or\n\n958\n00:44:29,760 --> 00:44:30,520\nonce every six hours.\n\n959\n00:44:30,520 --> 00:44:34,160\nIt kind of aggregates that data\ndown to speed up reporting.\n\n960\n00:44:34,160 --> 00:44:36,720\nAnd when you generate a report,\n\n961\n00:44:36,720 --> 00:44:39,030\nthe report is not generated\nfrom the operational database.\n\n962\n00:44:39,030 --> 00:44:40,870\nIt is generated from\nthe reporting database.\n\n963\n00:44:40,870 --> 00:44:43,822\nSo that lets you split them up for\nperformance reasons.\n\n964\n00:44:43,822 --> 00:44:47,565\nIf you're running a lot of reports you\ndon't want to miss notifications that\n\n965\n00:44:47,565 --> 00:44:49,189\nare coming in from your clients.\n\n966\n00:44:49,189 --> 00:44:50,290\n>> Right.\n>> All right?\n\n967\n00:44:50,290 --> 00:44:52,035\nSo we got the operation manager front end.\n\n968\n00:44:52,035 --> 00:44:52,900\nRight?\nThat's\n\n969\n00:44:52,900 --> 00:44:55,260\nwhat we normally think\nof as the SCOM server.\n\n970\n00:44:55,260 --> 00:44:59,750\nYou've got the operational database\ninside of Microsoft sequel and\n\n971\n00:44:59,750 --> 00:45:02,740\nyou've got the reporting database\ninside of Microsoft sequel.\n\n972\n00:45:02,740 --> 00:45:05,510\nAnd the fourth component\nare the collector agents.\n\n973\n00:45:06,525 --> 00:45:11,720\nSCOM uses an agent installed on your\nmachines to be able to monitor them.\n\n974\n00:45:11,720 --> 00:45:14,210\nIt can do agent list monitoring.\n\n975\n00:45:14,210 --> 00:45:17,800\nSo it can monitor like a standard windows\nmachine without deploying the agent but\n\n976\n00:45:17,800 --> 00:45:19,820\nit's limited in what it can get.\n\n977\n00:45:19,820 --> 00:45:21,650\nIt's gonna get basically\nlike performance counters,\n\n978\n00:45:21,650 --> 00:45:23,840\nstuff that you can get\nwith WinRM normally.\n\n979\n00:45:23,840 --> 00:45:24,670\nRight?\n\n980\n00:45:24,670 --> 00:45:26,730\nBut if you want advanced monitoring,\n\n981\n00:45:26,730 --> 00:45:30,900\neven with the full functionality inside\nof SCOM, you have to deploy the agent.\n\n982\n00:45:30,900 --> 00:45:32,980\nAnd so what we normally do is\nwe do something like a GPO,\n\n983\n00:45:32,980 --> 00:45:34,035\na Group Policy Object.\n\n984\n00:45:34,035 --> 00:45:35,540\n>> Right.\n>> To push that agent out to all of our\n\n985\n00:45:35,540 --> 00:45:37,070\nmachines that we're gonna monitor.\n\n986\n00:45:37,070 --> 00:45:40,390\nYou don't necessarily wanna push to\nall your workstations cuz workstations\n\n987\n00:45:40,390 --> 00:45:41,240\nare a nightmare to monitor.\n\n988\n00:45:41,240 --> 00:45:42,425\nIt's constantly being turned off.\n\n989\n00:45:42,425 --> 00:45:43,690\n>> [LAUGH]\n>> But to your servers.\n\n990\n00:45:43,690 --> 00:45:45,110\nRight?\nYou push out to your servers and\n\n991\n00:45:45,110 --> 00:45:46,150\nyou can monitor them.\n\n992\n00:45:46,150 --> 00:45:48,110\nThat agent, you'll want it.\n\n993\n00:45:48,110 --> 00:45:49,070\nRight?\nEven though agent\n\n994\n00:45:49,070 --> 00:45:51,130\nlist sounds better cuz\nit's got less to it,\n\n995\n00:45:51,130 --> 00:45:56,030\nwith agent list, the servers don't\nknow to push the stuff to you.\n\n996\n00:45:56,030 --> 00:45:58,070\nRight?\nYou have to reach out and pull it.\n\n997\n00:45:58,070 --> 00:46:01,150\nAnd so\nyou're gathering data at set intervals.\n\n998\n00:46:01,150 --> 00:46:03,330\nAnd that means it can take\nlonger to detect something.\n\n999\n00:46:03,330 --> 00:46:07,840\nWith the agent, as soon as an event\nhappens, it pushes it back to you, and so\n\n1000\n00:46:07,840 --> 00:46:10,040\nyou're getting the data\nin closer to real time.\n\n1001\n00:46:10,040 --> 00:46:10,575\n>> Closer real time.\n\n1002\n00:46:10,575 --> 00:46:15,020\nYeah, and we can use a configuration\nmanager to push that agent out as well.\n\n1003\n00:46:15,020 --> 00:46:15,790\n>> Yeah, absolutely, absolutely.\n\n1004\n00:46:15,790 --> 00:46:18,350\nSo, those are some of\nthe different components.\n\n1005\n00:46:18,350 --> 00:46:20,320\nI'm just glancing out of the corner\nof my eye here to make sure I didn't\n\n1006\n00:46:20,320 --> 00:46:21,120\nmiss anything on that.\n\n1007\n00:46:21,120 --> 00:46:24,320\nWe talked about the two databases and\nSCOM itself.\n\n1008\n00:46:24,320 --> 00:46:27,910\nIt is really impressive software.\n\n1009\n00:46:27,910 --> 00:46:30,950\nIt's got a lot of built in stuff into it,\nbut\n\n1010\n00:46:30,950 --> 00:46:33,470\nwe're gonna talk in the next segment\nhow we can go even beyond that.\n\n1011\n00:46:33,470 --> 00:46:34,210\nRight Mike?\n\n1012\n00:46:34,210 --> 00:46:35,090\n>> Yep.\n\n1013\n00:46:35,090 --> 00:46:37,620\n>> So actually now that I've said,\nI just looked at the time,\n\n1014\n00:46:37,620 --> 00:46:39,510\nwe're probably at a good spot to stop and\ntake a break.\n\n1015\n00:46:39,510 --> 00:46:40,810\n>> We're having so much fun, though.\n\n1016\n00:46:40,810 --> 00:46:44,000\n>> So, SCOM out of the box\n\n1017\n00:46:44,000 --> 00:46:47,670\nis not necessarily gonna do all\nthe magic that I just said.\n\n1018\n00:46:47,670 --> 00:46:50,020\nIt's not gonna monitor\nall of your equipment.\n\n1019\n00:46:50,020 --> 00:46:52,750\nWe've got to customize it a bit,\nand that's what we're gonna take\n\n1020\n00:46:52,750 --> 00:46:54,970\na look at in the last segment of the show,\nwhich is coming up next.\n\n1021\n00:46:54,970 --> 00:46:59,042\nSo stay tuned, we'll be back in a few.\n\n1022\n00:46:59,042 --> 00:47:05,625\n[SOUND]\nAll right.\n\n1023\n00:47:05,625 --> 00:47:07,050\nWelcome back, everybody.\n\n1024\n00:47:07,050 --> 00:47:12,160\nSo in the last segment we talked about\nSCOM, the System Center Operation Manager.\n\n1025\n00:47:12,160 --> 00:47:15,420\nAnd we talked about some of\nthe neat things that it can do, and\n\n1026\n00:47:15,420 --> 00:47:18,025\nout of the box,\nit can do most of what I said.\n\n1027\n00:47:18,025 --> 00:47:18,868\n>> [LAUGH]\n>> But,\n\n1028\n00:47:18,868 --> 00:47:21,027\nas far as like the application\nmonitoring and stuff.\n\n1029\n00:47:21,027 --> 00:47:23,257\n>> Right.\n>> It can do this kind of generic\n\n1030\n00:47:23,257 --> 00:47:25,190\napplication monitoring.\n\n1031\n00:47:25,190 --> 00:47:28,900\nAnd the server monitoring,\nit does this generic server monitoring.\n\n1032\n00:47:28,900 --> 00:47:32,320\nBut what we can do is we can extend SCOM\n\n1033\n00:47:32,320 --> 00:47:35,520\nto do super mega awesome\nadvanced monitoring.\n\n1034\n00:47:35,520 --> 00:47:36,160\n>> [LAUGH]\n>> Right?\n\n1035\n00:47:36,160 --> 00:47:41,940\nAnd this is, it's an optional thing,\nbut you're a fool if you don't do it.\n\n1036\n00:47:41,940 --> 00:47:42,660\nRight?\n\n1037\n00:47:42,660 --> 00:47:45,820\nIn SCOM,\nwe have what are called management packs.\n\n1038\n00:47:45,820 --> 00:47:46,870\nAnd what management packs are,\n\n1039\n00:47:46,870 --> 00:47:52,310\nis they are extensions that\nadd on to what SCOM looks at.\n\n1040\n00:47:52,310 --> 00:47:55,172\nAnd a management pack,\nreally all it is an XML file.\n\n1041\n00:47:55,172 --> 00:47:57,271\nRight?\nOr maybe more than one file if it's\n\n1042\n00:47:57,271 --> 00:47:58,193\na really big one.\n\n1043\n00:47:58,193 --> 00:48:01,295\nAnd it just contains a list of\ndefinitions that says, hey,\n\n1044\n00:48:01,295 --> 00:48:04,597\nif you grab this performance counter,\nhere's what it means.\n\n1045\n00:48:04,597 --> 00:48:07,349\nHere's the description that you\ncan display on your screen.\n\n1046\n00:48:07,349 --> 00:48:09,473\nHere's a good value versus a bad value.\n\n1047\n00:48:09,473 --> 00:48:10,158\nHere's an alert.\n\n1048\n00:48:10,158 --> 00:48:13,720\nSo, if something goes wrong,\nthis is the alert that triggers.\n\n1049\n00:48:13,720 --> 00:48:16,940\nAnd, oh, here's some extra tools\nyou can fire up from the GUI.\n\n1050\n00:48:18,222 --> 00:48:24,110\nAll custom-built around a particular\napplication or hardware piece.\n\n1051\n00:48:24,110 --> 00:48:27,400\n>> Yeah, because those agents that we have\nthat are built into SCOM, those understand\n\n1052\n00:48:27,400 --> 00:48:30,610\nWindows servers and they know all the\ndifferent counters and things like that,\n\n1053\n00:48:30,610 --> 00:48:34,120\nbut what about your other solutions, your\nDell, your backplane, things like that?\n\n1054\n00:48:34,120 --> 00:48:36,960\nIt doesn't understand that stuff.\n\n1055\n00:48:36,960 --> 00:48:40,220\nAnd I don't want a separate\nmonitoring solution for those.\n\n1056\n00:48:40,220 --> 00:48:43,620\nThe whole idea of SCOM is\nto bring it all together.\n\n1057\n00:48:43,620 --> 00:48:45,300\n>> And the management packs themselves,\n\n1058\n00:48:45,300 --> 00:48:49,350\nbecause they're defining a lot of alerts\nand things that need to be checked, if you\n\n1059\n00:48:49,350 --> 00:48:53,170\nhave too many of them it does increase the\nperformance requirements of the system.\n\n1060\n00:48:53,170 --> 00:48:55,370\nSo Microsoft instead says, all right,\n\n1061\n00:48:55,370 --> 00:49:00,990\nwe're gonna roll out SCOM with\na basic set of alerts and\n\n1062\n00:49:00,990 --> 00:49:06,010\nreporting information and knowledge-based\narticles for stuff that everyone needs.\n\n1063\n00:49:06,010 --> 00:49:08,770\nAnd then after that, you pick and\nchoose what you want from there.\n\n1064\n00:49:08,770 --> 00:49:10,140\nThis page that I'm listing here.\n\n1065\n00:49:10,140 --> 00:49:12,340\nThis is a unofficial page.\n\n1066\n00:49:12,340 --> 00:49:18,370\nMicrosoft does not have an official page\nthat lists all of their management packs.\n\n1067\n00:49:18,370 --> 00:49:22,010\nBut, the TechNet community\nhas aggregated this list.\n\n1068\n00:49:22,010 --> 00:49:26,340\nI'll put this link in the show notes so,\nyou guys will have it.\n\n1069\n00:49:26,340 --> 00:49:30,400\nBasically, this is a list of all\nthe management packs that Microsoft\n\n1070\n00:49:30,400 --> 00:49:32,390\nthemselves have released.\n\n1071\n00:49:32,390 --> 00:49:34,960\nSo if you're running BizTalk Server,\nfor example,\n\n1072\n00:49:34,960 --> 00:49:38,000\nthey have manager packs\nbuilt to monitor that one.\n\n1073\n00:49:38,000 --> 00:49:41,950\nAnd even really specific technologies\nlike DFS, DFS namespaces and\n\n1074\n00:49:41,950 --> 00:49:45,840\nDFS replication,\nMicrosoft Dynamics, Forefront.\n\n1075\n00:49:45,840 --> 00:49:47,370\nAll the Forefront pieces.\n\n1076\n00:49:47,370 --> 00:49:49,565\nForefront, that's the name I was trying\nto remember in that other episode.\n\n1077\n00:49:49,565 --> 00:49:51,520\n[LAUGH]\n>> Look for an identity manager.\n\n1078\n00:49:51,520 --> 00:49:53,680\n>> Okay, it was on this show, so if you\nguys watched an earlier episode, and\n\n1079\n00:49:53,680 --> 00:49:56,060\nI couldn't remember the name of the\nproduct the threat management Gateway was\n\n1080\n00:49:56,060 --> 00:49:57,880\nin, it was Forefront, dad gum it.\n\n1081\n00:49:57,880 --> 00:49:59,690\nAll right, so some of the other\nstuff you'll see in here.\n\n1082\n00:49:59,690 --> 00:50:02,160\nSome of it's old software\nlike Host Integration Server.\n\n1083\n00:50:02,160 --> 00:50:03,820\nHopefully you guys aren't\nrunning that anymore.\n\n1084\n00:50:03,820 --> 00:50:08,920\nBut you'll see a lot of the newer stuff\nin here too, like Lync Server 2013,\n\n1085\n00:50:08,920 --> 00:50:09,850\nOffice 365.\n\n1086\n00:50:09,850 --> 00:50:12,920\nThere's some really good stuff in here.\n\n1087\n00:50:12,920 --> 00:50:13,540\nSQL server.\n\n1088\n00:50:13,540 --> 00:50:15,150\nI use that one almost all the time.\n\n1089\n00:50:15,150 --> 00:50:18,780\nAnd there's different ones for\ndifferent version of SQL,\n\n1090\n00:50:18,780 --> 00:50:20,810\nbecause there's different\nways to troubleshoot them,\n\n1091\n00:50:20,810 --> 00:50:24,790\ndifferent tools and information, and\nso it's gotta be version specific.\n\n1092\n00:50:24,790 --> 00:50:26,140\nIf you're still running SQL 2008, well,\n\n1093\n00:50:26,140 --> 00:50:29,170\nthat's the one you need\nto get right there.\n\n1094\n00:50:29,170 --> 00:50:31,730\nAnd they've got analysis services and\nreporting services and\n\n1095\n00:50:31,730 --> 00:50:33,550\nthen the base SQL server.\n\n1096\n00:50:33,550 --> 00:50:37,390\nThis is parallel data warehouse, so\ndifferent components right here.\n\n1097\n00:50:37,390 --> 00:50:40,430\nIf something is missing from this list,\n\n1098\n00:50:40,430 --> 00:50:43,420\nthen it usually indicated\nthat it was built in to SCOM.\n\n1099\n00:50:43,420 --> 00:50:44,530\nCuz there are some,\n\n1100\n00:50:44,530 --> 00:50:48,920\nlike the Windows Server one that\nis built in to SCOM, all right.\n\n1101\n00:50:48,920 --> 00:50:51,520\nBut just because the Windows Server\none is built in doesn't mean\n\n1102\n00:50:51,520 --> 00:50:52,960\nevery aspect of it is.\n\n1103\n00:50:52,960 --> 00:50:56,820\nThere are roles that you might\ninstall on top of that Windows server.\n\n1104\n00:50:56,820 --> 00:50:58,800\nAnd Microsoft doesn't know what\nroles you're gonna install.\n\n1105\n00:50:58,800 --> 00:51:00,350\nSo they don't include them.\n\n1106\n00:51:00,350 --> 00:51:04,180\nThings like, well DFS was one of them,\nthe distributed file system.\n\n1107\n00:51:04,180 --> 00:51:05,920\nThat's a role you might install.\n\n1108\n00:51:05,920 --> 00:51:08,930\nAnd you can choose to add\nthose management packs.\n\n1109\n00:51:08,930 --> 00:51:11,500\nAnd if we look at things\nlike the active directory.\n\n1110\n00:51:11,500 --> 00:51:13,590\nThey'll be buried in here somewhere.\n\n1111\n00:51:13,590 --> 00:51:14,661\nThere's the Azure stuff.\n\n1112\n00:51:14,661 --> 00:51:19,314\nAnd here, Windows Server Active Directory\nCertificate Services, Federation Services,\n\n1113\n00:51:19,314 --> 00:51:23,050\nRights Management, and right here,\nWindows Server Active Directory.\n\n1114\n00:51:23,050 --> 00:51:27,360\nWell, you'd think that Active Directory\nwould be built into SCOM by default, but\n\n1115\n00:51:27,360 --> 00:51:29,525\nMicrosoft doesn't know if you're actually\nusing the Active Directory or not.\n\n1116\n00:51:29,525 --> 00:51:31,155\nMaybe you're not.\n\n1117\n00:51:31,155 --> 00:51:36,495\nMaybe you're doing some kind of federated\nID service that connects to shibboleth or\n\n1118\n00:51:36,495 --> 00:51:38,831\nor you just use RADIUS authentication.\n\n1119\n00:51:38,831 --> 00:51:40,995\nYou can use whatever you want.\n\n1120\n00:51:40,995 --> 00:51:43,505\nMaybe you have standalone\nsystems that don't use it.\n\n1121\n00:51:43,505 --> 00:51:46,314\nMaybe you're just monitoring\nLinux systems and so\n\n1122\n00:51:46,314 --> 00:51:48,870\nyou don't need\nthe Active Directory module.\n\n1123\n00:51:48,870 --> 00:51:50,578\nSo these are management packs.\n\n1124\n00:51:50,578 --> 00:51:51,953\nWe download them.\nThey're pretty small.\n\n1125\n00:51:51,953 --> 00:51:54,328\nI think the biggest one I ever\ndownloaded was, like, four megs.\n\n1126\n00:51:54,328 --> 00:51:54,911\n>> Right.\n\n1127\n00:51:54,911 --> 00:51:58,046\n>> But if you think of that\nin terms of XML files,\n\n1128\n00:51:58,046 --> 00:52:03,160\nfour megs of XML files is actually a ton\nof data and that's because it has to\n\n1129\n00:52:03,160 --> 00:52:08,193\nhave not just information on what\nperformance counters to collect, but\n\n1130\n00:52:08,193 --> 00:52:13,580\nall the thresholds for when we set off\nan alert, as well as the explanations.\n\n1131\n00:52:13,580 --> 00:52:14,954\nRemember that one I showed\nearlier in the show?\n\n1132\n00:52:14,954 --> 00:52:17,868\nIt told me what potential\ncauses the problem had and\n\n1133\n00:52:17,868 --> 00:52:20,480\nwhat potential solutions there were.\n\n1134\n00:52:20,480 --> 00:52:25,400\nThat's going to be detailed for every\nsingle event type error that might be\n\n1135\n00:52:25,400 --> 00:52:29,290\ngenerated for that application, and\nthat's why these contain so much data.\n\n1136\n00:52:31,000 --> 00:52:33,830\nSo you basically just pick and\nchoose what it is you want to monitor.\n\n1137\n00:52:33,830 --> 00:52:38,140\nYou got DNS, file server, Hyper-V,\nall sorts of different components.\n\n1138\n00:52:38,140 --> 00:52:41,080\nAnd these are all\nofficially from Microsoft.\n\n1139\n00:52:41,080 --> 00:52:42,225\nMicrosoft developed these.\n\n1140\n00:52:42,225 --> 00:52:43,340\nThey're very detailed.\n\n1141\n00:52:43,340 --> 00:52:45,140\nThey are great management packs.\n\n1142\n00:52:45,140 --> 00:52:45,810\nYou add in what you need.\n\n1143\n00:52:47,030 --> 00:52:48,930\nSo, for example,\nif I add in that active directory.\n\n1144\n00:52:48,930 --> 00:52:51,340\nLet me go to there,\nthey have a documentation page for it.\n\n1145\n00:52:51,340 --> 00:52:54,330\nSo here's that Active Directory\nDomain Services Management Pack.\n\n1146\n00:52:54,330 --> 00:52:56,980\nAnd it shows some of the different\nthings that are inside of it.\n\n1147\n00:52:56,980 --> 00:52:58,400\nAlerts, right?\n\n1148\n00:52:58,400 --> 00:53:00,750\nIt's got the ability to\npull computer groups and\n\n1149\n00:53:00,750 --> 00:53:04,260\ncomputers right out of the active\ndirectory for reporting information.\n\n1150\n00:53:04,260 --> 00:53:06,640\nYou can even do some neat stuff,\nlet me scroll down here and\n\n1151\n00:53:06,640 --> 00:53:07,420\nfind the one I'm looking for.\n\n1152\n00:53:07,420 --> 00:53:09,380\nWhere is ADSI edit?\n\n1153\n00:53:09,380 --> 00:53:10,490\nRight there.\n\n1154\n00:53:10,490 --> 00:53:15,030\nFrom the GUI, from the SCOM Operations\nmanager, from that management panel,\n\n1155\n00:53:15,030 --> 00:53:19,683\nyou can right-click on an active directory\ndomain controller and in your right-click.\n\n1156\n00:53:19,683 --> 00:53:20,880\n>> Context menu.\n\n1157\n00:53:20,880 --> 00:53:24,920\n>> Context menu, thank you Mike,\nyou can choose to launch ADSI edit and\n\n1158\n00:53:24,920 --> 00:53:28,300\nyou'll be directly editing the active\ndirectory from that domain controller\n\n1159\n00:53:28,300 --> 00:53:29,530\nright there in the GUI.\n\n1160\n00:53:29,530 --> 00:53:32,950\nWe're extending the functionality\nof the operation manager console.\n\n1161\n00:53:32,950 --> 00:53:34,030\n>> That's impressive.\n\n1162\n00:53:34,030 --> 00:53:36,120\n>> Yeah, I mean you see all\nthe other tools here, netdiag,\n\n1163\n00:53:36,120 --> 00:53:40,410\ndcdiag, all these ones that we use\nthough regular troubleshooting the AD\n\n1164\n00:53:40,410 --> 00:53:44,530\nnow become integrated in\nthe user interface, alright?\n\n1165\n00:53:44,530 --> 00:53:47,420\nNow it does require you have this\nutilities installed in your machine, so\n\n1166\n00:53:47,420 --> 00:53:52,945\nyou'd still need to install the remote\nserver administration tool kit.\n\n1167\n00:53:52,945 --> 00:53:53,750\n>> Mm-hm.\n\n1168\n00:53:53,750 --> 00:53:55,750\n>> [LAUGH] These things we\nhave to remember, the RSAT.\n\n1169\n00:53:55,750 --> 00:53:58,735\nSo you would have to install that.\n\n1170\n00:53:58,735 --> 00:53:59,630\n>> Mm-hm.\n\n1171\n00:53:59,630 --> 00:54:02,290\n>> But if you're running the operations\nmanager on your desktop and your client,\n\n1172\n00:54:02,290 --> 00:54:05,150\nlike you should, then you install\nthose tools on your client, and\n\n1173\n00:54:05,150 --> 00:54:07,260\nnow you have this extensibility.\n\n1174\n00:54:07,260 --> 00:54:07,760\nAlright.\n\n1175\n00:54:07,760 --> 00:54:09,530\nSo, really, really powerful stuff.\n\n1176\n00:54:09,530 --> 00:54:10,660\nI'll post the link to this too.\n\n1177\n00:54:10,660 --> 00:54:13,960\nBut to just give you an idea of\nwhat a management pack adds.\n\n1178\n00:54:15,180 --> 00:54:19,730\nNow, there are plenty of\nthird-party management packs, also.\n\n1179\n00:54:19,730 --> 00:54:22,820\nAnd you mentioned Dell.\n\n1180\n00:54:22,820 --> 00:54:25,455\nSo, Dell, they make servers,\nPowerEdge servers, HP they make ProLiants.\n\n1181\n00:54:25,455 --> 00:54:26,500\nBoth of them do it.\n\n1182\n00:54:26,500 --> 00:54:30,660\nDell and HP, they both have their own\nmanagement pack that you can go and\n\n1183\n00:54:30,660 --> 00:54:34,850\ndownload and it contains all sorts\nof really awesome integrations\n\n1184\n00:54:34,850 --> 00:54:39,460\nwith their management software.\n\n1185\n00:54:39,460 --> 00:54:44,275\nIf you are running Dell PowerEdge\nservers they have Dell OpenManage.\n\n1186\n00:54:44,275 --> 00:54:47,920\nOpenManage is there little management and\ninstrumentation system that they have.\n\n1187\n00:54:47,920 --> 00:54:51,680\nAnd you can run their OpenManage\ncentralized monitoring, but\n\n1188\n00:54:51,680 --> 00:54:54,320\nit's designed just for Dell stuff, right.\n\n1189\n00:54:54,320 --> 00:54:56,950\nYou can use their management pack,\nthough, to add it to SCOM, and\n\n1190\n00:54:56,950 --> 00:54:59,920\nnow you can manage your Dell\nservers alongside other things.\n\n1191\n00:54:59,920 --> 00:55:02,410\nAnd you can start to see things\nlike motherboard temperature,\n\n1192\n00:55:02,410 --> 00:55:04,340\nsmart alerts on a hard drive.\n\n1193\n00:55:04,340 --> 00:55:07,970\nAll sorts of hardware reporting that\nSCOM doesn't normally have access to.\n\n1194\n00:55:07,970 --> 00:55:09,590\n>> Again, that's just centralizing.\n\n1195\n00:55:09,590 --> 00:55:13,720\nGetting it all into that one console\nmakes our life a whole lot easier.\n\n1196\n00:55:13,720 --> 00:55:16,902\n>> Yep, and on HP's side, you have\nthe HP Insight or Insight Manager.\n\n1197\n00:55:17,945 --> 00:55:22,005\nSo that service that you run on your HP\nservice gives you that same visibility\n\n1198\n00:55:22,005 --> 00:55:26,365\ninto the ProLiant hardware and you get\nthat reporting back into SCOM again.\n\n1199\n00:55:26,365 --> 00:55:30,055\nReally neat stuff, and\nthose vendors provide it directly.\n\n1200\n00:55:30,055 --> 00:55:33,172\nSo you'll find where Dell, HP, Oracle,\n\n1201\n00:55:33,172 --> 00:55:37,362\na lot of the other guys of there release\ntheir own management packs for that.\n\n1202\n00:55:37,362 --> 00:55:38,842\nAnd Microsoft has a page.\n\n1203\n00:55:38,842 --> 00:55:39,872\nLet me show you here.\n\n1204\n00:55:39,872 --> 00:55:41,712\nIf we wanted we could\njust go straight to Dell.\n\n1205\n00:55:41,712 --> 00:55:44,940\nSo I did a quick Google search for\nDell Server management pack.\n\n1206\n00:55:44,940 --> 00:55:45,530\nAll right?\n\n1207\n00:55:45,530 --> 00:55:46,170\nAnd turn it up.\n\n1208\n00:55:46,170 --> 00:55:47,690\nBe careful when you do this.\n\n1209\n00:55:47,690 --> 00:55:49,246\nBecause the management packs\nhave changed over the years.\n\n1210\n00:55:49,246 --> 00:55:52,998\nAnd so, when I search for Dell,\nthe very first link was for\n\n1211\n00:55:52,998 --> 00:55:57,824\nlike an older version of SCOM and it was\nthe third link before I finally found\n\n1212\n00:55:57,824 --> 00:56:01,060\nthe one that actually\nsupport SCOM 2012 R2.\n\n1213\n00:56:01,060 --> 00:56:03,806\nSo you gotta make sure that\nit's designed for 2012 R2.\n\n1214\n00:56:03,806 --> 00:56:07,585\nHere's where I can download it, their\nversion of 5.2 for their service pack.\n\n1215\n00:56:07,585 --> 00:56:12,180\nIt shows all the hardware that\nit's capable of monitoring.\n\n1216\n00:56:12,180 --> 00:56:13,855\nTheir power vault storage.\n\n1217\n00:56:13,855 --> 00:56:17,840\nTheir power edge servers, and it gives\na list of all the models right there.\n\n1218\n00:56:17,840 --> 00:56:21,130\nAnd it contains hardware\ninformation reporting.\n\n1219\n00:56:21,130 --> 00:56:24,390\nThey only support the Windows operating\nsystem on their hardware though.\n\n1220\n00:56:24,390 --> 00:56:27,630\nSo if you are running Lenox\non the power edge server,\n\n1221\n00:56:27,630 --> 00:56:31,020\nthe open in this thing doesn't work,\nand this stuff breaks down.\n\n1222\n00:56:31,020 --> 00:56:34,270\nSo, you do have to kind of\nconform to their requirements.\n\n1223\n00:56:34,270 --> 00:56:37,130\nGetting them from the actual vendor\nis the best thing to do, right?\n\n1224\n00:56:37,130 --> 00:56:38,930\nMicrosoft, that needs\nto be your first stop.\n\n1225\n00:56:38,930 --> 00:56:42,180\nBecause if Microsoft has a management\npack, you know it's gonna work great.\n\n1226\n00:56:42,180 --> 00:56:44,810\nThen, the actual manufacturer\nof the hardware or\n\n1227\n00:56:44,810 --> 00:56:45,990\nsoftware that you're trying to monitor.\n\n1228\n00:56:45,990 --> 00:56:48,240\nThat's the next step for management pack.\n\n1229\n00:56:48,240 --> 00:56:52,010\nIf they don't have it,\nthen you can go to the third parties.\n\n1230\n00:56:52,010 --> 00:56:54,610\nThere's a number of just\n\n1231\n00:56:54,610 --> 00:56:58,680\nregular old Joe Schmo network people\nthat make their own management packs.\n\n1232\n00:56:58,680 --> 00:57:02,790\nAnd there's professional companies that\nmake management packs that are out there,\n\n1233\n00:57:02,790 --> 00:57:05,340\nand you can download them and use them.\n\n1234\n00:57:05,340 --> 00:57:06,110\nBe careful though.\n\n1235\n00:57:06,110 --> 00:57:09,070\nYou need to test those, and you need to\nmake sure that they're being updated and\n\n1236\n00:57:09,070 --> 00:57:10,570\nsupported.\n\n1237\n00:57:10,570 --> 00:57:11,870\nHere's a few examples.\n\n1238\n00:57:11,870 --> 00:57:13,880\nMicrosoft actually has a website,\n\n1239\n00:57:13,880 --> 00:57:18,150\nthe Pinpoint site, that allows\nyou to find Microsoft partners.\n\n1240\n00:57:18,150 --> 00:57:20,230\nNow, it's partner for\nall sorts of stuff, but\n\n1241\n00:57:20,230 --> 00:57:25,390\nthe System Center partners are usually\nthe ones that release management packs.\n\n1242\n00:57:25,390 --> 00:57:27,750\nAnd so, you'll see some of them,\nlike here's the Agile IT guys.\n\n1243\n00:57:27,750 --> 00:57:30,985\nThat's adding on Agile to\nthe system center service manager.\n\n1244\n00:57:30,985 --> 00:57:34,850\nSo that's not really a management pact,\nbut some of these other ones like Dell,\n\n1245\n00:57:34,850 --> 00:57:36,960\nand so on, you'll find in here\nwill release management packs.\n\n1246\n00:57:36,960 --> 00:57:40,450\nSo you can browse and find it, you can\nactually search through this and try and\n\n1247\n00:57:40,450 --> 00:57:45,765\nfind ones that specifically\nfocus in on it.\n\n1248\n00:57:45,765 --> 00:57:50,395\nOne name that you'll come across sooner or\nlater is a company called Bridgeways.\n\n1249\n00:57:50,395 --> 00:57:52,215\nBridgeways is a third party company, and\n\n1250\n00:57:52,215 --> 00:57:54,475\nthey make some very\nrobust management packs.\n\n1251\n00:57:54,475 --> 00:57:55,615\nThey're good stuff.\n\n1252\n00:57:55,615 --> 00:57:57,517\nIt's not free, you got to pay for them.\n\n1253\n00:57:57,517 --> 00:57:59,927\nBut, they really do a good job.\n\n1254\n00:57:59,927 --> 00:58:05,397\nAnd so, they've got VMWare, Oracle,\nApache, JBoss, MySQL, IBM DB2.\n\n1255\n00:58:05,397 --> 00:58:08,357\nThese are a lot of different\nopen source products, but\n\n1256\n00:58:08,357 --> 00:58:10,482\nthere's closed source ones\ntoo like IBM WebSphere.\n\n1257\n00:58:10,482 --> 00:58:13,390\nThat you can monitor and\npull performance and\n\n1258\n00:58:13,390 --> 00:58:16,480\nother data into SCOM extending\nthat functionality out.\n\n1259\n00:58:18,280 --> 00:58:21,800\nIf you can't find it there, so\nyou've exhausted Microsoft,\n\n1260\n00:58:21,800 --> 00:58:26,140\nthe original vendor, and professional\nthird parties, then we go unprofessional.\n\n1261\n00:58:26,140 --> 00:58:29,590\nAnd you'll find where people write\ntheir own SCOM management packs.\n\n1262\n00:58:29,590 --> 00:58:32,130\nI don't like to use them because\nyou don't know if they are going to\n\n1263\n00:58:32,130 --> 00:58:32,710\nkeep them up to date.\n\n1264\n00:58:32,710 --> 00:58:34,150\nYou don't know how thorough they are.\n\n1265\n00:58:34,150 --> 00:58:36,900\nThere are oftentimes missing pieces,\nusually the knowledge base.\n\n1266\n00:58:36,900 --> 00:58:38,760\nThe knowledge base is almost\nalways left out of on those.\n\n1267\n00:58:38,760 --> 00:58:43,570\nSo they'll let you monitor performance,\nbut then there's no possible cause or\n\n1268\n00:58:43,570 --> 00:58:44,860\nsolution, or whatever.\n\n1269\n00:58:44,860 --> 00:58:47,780\nNone of that extra data\nthat you like to have.\n\n1270\n00:58:47,780 --> 00:58:53,480\nHere's a blog that does a really\ngood job by Nathan Lesnowski.\n\n1271\n00:58:53,480 --> 00:58:56,190\nAnd what he does is he just\ncollects a list of all\n\n1272\n00:58:56,190 --> 00:58:57,980\nthe management packages he's ever found.\n\n1273\n00:58:57,980 --> 00:59:01,510\nAnd some of them are official, so\nyou'll see links back to like Microsoft.\n\n1274\n00:59:01,510 --> 00:59:04,140\nBut other ones are a little more generic.\n\n1275\n00:59:04,140 --> 00:59:07,460\nAnd so, you'll see ones that\nare linked to just generic people.\n\n1276\n00:59:07,460 --> 00:59:10,500\nBrocade, and VM, those guys are good.\n\n1277\n00:59:10,500 --> 00:59:12,140\nOr VM, however you want to say that.\n\n1278\n00:59:13,220 --> 00:59:15,570\nQuest is another great\ncompany that makes them.\n\n1279\n00:59:15,570 --> 00:59:17,565\nBut some of the other ones down\nhere as you go down the line,\n\n1280\n00:59:17,565 --> 00:59:19,410\nthey'll start to be independent people.\n\n1281\n00:59:19,410 --> 00:59:22,330\nActually, it was Cisco for\nUnified Communications Server.\n\n1282\n00:59:22,330 --> 00:59:25,510\nYou'll see a few others EMC,\nHitachi, so a good list.\n\n1283\n00:59:25,510 --> 00:59:27,730\nI'll post this link in the page too.\n\n1284\n00:59:27,730 --> 00:59:30,950\nObviously this won't be on the exam, but\nin real life you might find that useful.\n\n1285\n00:59:33,080 --> 00:59:34,430\nAll right.\nNow, when you\n\n1286\n00:59:34,430 --> 00:59:37,870\nfind a management pack that you want,\nwe've gotta add it into SCOM.\n\n1287\n00:59:37,870 --> 00:59:38,910\nAll right?\n\n1288\n00:59:38,910 --> 00:59:42,650\nSCOM already has several management packs\nthat are part of the default install, and\n\n1289\n00:59:42,650 --> 00:59:43,470\nyou add in the new ones.\n\n1290\n00:59:44,700 --> 00:59:49,280\nWith Microsoft, they always recommend, and\nthis is what you're gonna see on the exam.\n\n1291\n00:59:49,280 --> 00:59:53,060\nThey recommend that you do\nnot add new management packs\n\n1292\n00:59:53,060 --> 00:59:54,708\ndirectly into your production SCOM.\n\n1293\n00:59:54,708 --> 00:59:55,690\nAll right?\n\n1294\n00:59:55,690 --> 01:00:00,160\nAnd the reason is, the management pack\nwill include a list of alerts, and\n\n1295\n01:00:00,160 --> 01:00:03,880\nthose alerts have not been tuned and\noptimized for your environment.\n\n1296\n01:00:03,880 --> 01:00:05,620\nAnd so for\nthe first few days of running it,\n\n1297\n01:00:05,620 --> 01:00:08,402\nyou're going to get a lot\nof false positives.\n\n1298\n01:00:08,402 --> 01:00:08,915\n>> Mm-mm.\n>> Right?\n\n1299\n01:00:08,915 --> 01:00:09,960\nA lot of alerts for\n\n1300\n01:00:09,960 --> 01:00:12,630\nstatus messages that\nneed to be disregarded.\n\n1301\n01:00:12,630 --> 01:00:15,780\nOr, it'll include alerts for\nsystems you don't run.\n\n1302\n01:00:15,780 --> 01:00:17,930\nAnd so now, you're monitoring for\nthings that aren't useful, so\n\n1303\n01:00:17,930 --> 01:00:19,890\nyou're wasting resources.\n\n1304\n01:00:19,890 --> 01:00:23,360\nSo when you deploy a management pack,\nMicrosoft's recommendation is to have\n\n1305\n01:00:23,360 --> 01:00:29,100\ntest environment, a test SCOM environment\nthat you'll load the main pack into.\n\n1306\n01:00:29,100 --> 01:00:33,000\nAnd then, you find out what alerts work,\nwhat alerts don't,\n\n1307\n01:00:33,000 --> 01:00:35,140\nwhat kind of quirks you have in there.\n\n1308\n01:00:35,140 --> 01:00:39,330\nAnd with a management pack, you can\nput in it what are called overrides.\n\n1309\n01:00:39,330 --> 01:00:41,500\nAnd overrides are where\nyou change the thresholds,\n\n1310\n01:00:41,500 --> 01:00:46,110\nand you disable some of the alerts,\nyou manipulate that functionality.\n\n1311\n01:00:46,110 --> 01:00:46,860\nRight?\n\n1312\n01:00:46,860 --> 01:00:50,320\nNow, you can edit\nthe management pack itself.\n\n1313\n01:00:50,320 --> 01:00:52,380\nYou have to have Visual Studio installed,\nbut you can edit it.\n\n1314\n01:00:52,380 --> 01:00:55,160\nIt's just XML,\nyou get in there and work with it.\n\n1315\n01:00:55,160 --> 01:00:58,070\nBut Microsoft again\nrecommends you don't do that.\n\n1316\n01:00:58,070 --> 01:01:00,370\nAnd the reason is if you\nmodify the management pack,\n\n1317\n01:01:00,370 --> 01:01:02,560\nwhat happens if an update comes out for\nit?\n\n1318\n01:01:02,560 --> 01:01:03,810\nNow you got to go modify the update.\n\n1319\n01:01:03,810 --> 01:01:05,450\nYou don't want to do that.\n\n1320\n01:01:05,450 --> 01:01:10,550\nSo instead, what you should do\nis create a new management pack\n\n1321\n01:01:10,550 --> 01:01:13,770\nthat just contains your overrides.\n\n1322\n01:01:13,770 --> 01:01:16,310\nSo you've got the management\npack from the vendor.\n\n1323\n01:01:16,310 --> 01:01:19,390\nAnd a new custom management pack\nwith just your overrides, and\n\n1324\n01:01:19,390 --> 01:01:22,460\nyou deploy those two\ntogether into production.\n\n1325\n01:01:22,460 --> 01:01:23,710\nAnd that way when an update comes out,\n\n1326\n01:01:23,710 --> 01:01:26,645\nyou can update the underlying management\npack and your overrides stay there.\n\n1327\n01:01:26,645 --> 01:01:29,500\nRight?\nAnd now, you get that flexibility.\n\n1328\n01:01:29,500 --> 01:01:33,040\nSo in the exam objectives when they\nmention tuning your management pack,\n\n1329\n01:01:33,040 --> 01:01:34,670\nthat's what they're talking about.\n\n1330\n01:01:34,670 --> 01:01:38,340\nRight?\nThat separate stages of deployment.\n\n1331\n01:01:38,340 --> 01:01:40,300\nAnd you can't do that\nfrom the server itself.\n\n1332\n01:01:40,300 --> 01:01:43,404\nLet me show you the server console because\nwe haven't even pulled that up, have we?\n\n1333\n01:01:43,404 --> 01:01:46,740\n>> Mm-mm.\n>> So let me bring up my SCOM here.\n\n1334\n01:01:46,740 --> 01:01:47,620\nSo here is my SCON.\n\n1335\n01:01:47,620 --> 01:01:48,680\nHere are all these alerts and stuff.\n\n1336\n01:01:48,680 --> 01:01:51,030\nThis is all things that\nare kind of built in to it.\n\n1337\n01:01:51,030 --> 01:01:52,210\nI'm gonna go down to administration.\n\n1338\n01:01:53,990 --> 01:01:55,210\nAnd inside administration,\n\n1339\n01:01:55,210 --> 01:01:58,310\nI'll have a menu tree item that\nwill say management packs.\n\n1340\n01:01:58,310 --> 01:02:00,310\nAnd we just have to find it.\n\n1341\n01:02:00,310 --> 01:02:01,760\nRight there.\n\n1342\n01:02:01,760 --> 01:02:04,460\nAnd here's my list of management packs,\nokay?\n\n1343\n01:02:04,460 --> 01:02:06,400\nAnd a lot of these are built in, and so\n\n1344\n01:02:06,400 --> 01:02:10,850\nwe'll see things like active directory\nserver discovery and monitoring.\n\n1345\n01:02:10,850 --> 01:02:13,635\nWe'll see other ones that\nare built around our web servers.\n\n1346\n01:02:13,635 --> 01:02:15,770\nSome of these we've\ninstalled after the fact, so\n\n1347\n01:02:15,770 --> 01:02:17,720\nsome of these aren't native to the system.\n\n1348\n01:02:17,720 --> 01:02:19,910\nBut, you'll see a lot of\nthem that are in here.\n\n1349\n01:02:19,910 --> 01:02:22,510\nThe things we might want to monitor and\ncontrol.\n\n1350\n01:02:22,510 --> 01:02:24,540\nNow if one of these is\nsomething that I imported,\n\n1351\n01:02:24,540 --> 01:02:26,660\nlike I'll take this DHCP one here.\n\n1352\n01:02:26,660 --> 01:02:27,290\nAll right?\n\n1353\n01:02:27,290 --> 01:02:30,390\nSo let's say that we imported this one,\nand\n\n1354\n01:02:30,390 --> 01:02:32,090\nthere's some stuff that we\nwant to override on it.\n\n1355\n01:02:32,090 --> 01:02:35,440\nWell when I right click on that,\nI have a properties screen.\n\n1356\n01:02:35,440 --> 01:02:38,790\nAnd if I pull up its properties,\nI really can't change-\n\n1357\n01:02:38,790 --> 01:02:39,990\n>> You don't get a whole lot there.\n\n1358\n01:02:39,990 --> 01:02:40,860\n>> Much in here.\n\n1359\n01:02:40,860 --> 01:02:44,310\nHere's some basic knowledge,\nwhatever, dependencies and that's it.\n\n1360\n01:02:44,310 --> 01:02:45,660\nI can't modify it.\n\n1361\n01:02:45,660 --> 01:02:48,250\nAnd that's because modifying\nit requires Visual Studio.\n\n1362\n01:02:48,250 --> 01:02:50,910\nIt actually uses that to\ndo the IntelliSense and\n\n1363\n01:02:50,910 --> 01:02:53,030\nall that other stuff while\nyou fill out the forms.\n\n1364\n01:02:53,030 --> 01:02:54,460\nSo it won't let me modify it.\n\n1365\n01:02:54,460 --> 01:02:58,980\nI have to basically export it, and then\ntake it and modify it in Visual Studio and\n\n1366\n01:02:58,980 --> 01:03:00,450\nbring it back in.\n\n1367\n01:03:00,450 --> 01:03:02,950\nAnd, when you do that,\nthat's when you can create your\n\n1368\n01:03:02,950 --> 01:03:05,670\ncustom one that just contains\nthe overrides and bring that in too.\n\n1369\n01:03:05,670 --> 01:03:07,016\nSo, you'll have two entries,\n\n1370\n01:03:07,016 --> 01:03:09,730\none that's the overrides,\none that's the name different pack.\n\n1371\n01:03:09,730 --> 01:03:10,550\nAll right?\n\n1372\n01:03:10,550 --> 01:03:14,135\nIf you choose to create a management pack,\nit'll make an empty one for you.\n\n1373\n01:03:14,135 --> 01:03:15,745\nBut again, it won't let you edit it.\n\n1374\n01:03:15,745 --> 01:03:16,985\nSo you can't add much to it.\n\n1375\n01:03:16,985 --> 01:03:18,785\nIt's not particularly useful.\n\n1376\n01:03:18,785 --> 01:03:21,440\nBut at least it builds the pack,\nit has it entered in your UI.\n\n1377\n01:03:21,440 --> 01:03:22,865\nAll right?\n\n1378\n01:03:22,865 --> 01:03:24,775\nOther things you can do,\nif you hit download management packs,\n\n1379\n01:03:24,775 --> 01:03:25,947\nthat's how you import new ones.\n\n1380\n01:03:25,947 --> 01:03:29,637\nI know it sounds like, oh, we're gonna go\nto the web and download it, but it's not-\n\n1381\n01:03:29,637 --> 01:03:30,527\n>> [INAUDIBLE] Yeah.\n\n1382\n01:03:30,527 --> 01:03:32,587\n>> You specify it, you browse and\nfind it, and it brings it in.\n\n1383\n01:03:32,587 --> 01:03:36,067\nBut that's how we import\na management pack.\n\n1384\n01:03:36,067 --> 01:03:38,592\nYou can also use the import\nmanagement packs option,\n\n1385\n01:03:38,592 --> 01:03:40,848\nwhich is basically the same thing.\n\n1386\n01:03:40,848 --> 01:03:41,648\nRight?\nThe difference\n\n1387\n01:03:41,648 --> 01:03:46,038\nhere is we use this add button, and we can\nadd from a catalog, as well as the disc.\n\n1388\n01:03:46,038 --> 01:03:50,148\nSo it might already be present on another\nSCOM server on our environment, and\n\n1389\n01:03:50,148 --> 01:03:52,150\nwe can import from there,\nbringing in via catalog.\n\n1390\n01:03:52,150 --> 01:03:52,820\nAll right.\n\n1391\n01:03:52,820 --> 01:03:54,310\nSo that's kind of the difference.\n\n1392\n01:03:54,310 --> 01:03:55,730\nBut, these are the management packs.\n\n1393\n01:03:55,730 --> 01:03:59,620\nAnd you can go crazy, you can add a ton\nof them in there, but you don't want to.\n\n1394\n01:03:59,620 --> 01:04:02,394\nYou don't want to have a bunch\nof management packs for\n\n1395\n01:04:02,394 --> 01:04:06,042\nsystems you're not monitoring\nbecause it is wasteful to resources.\n\n1396\n01:04:06,042 --> 01:04:08,683\nAll right.\nSo I don't really have too much more to\n\n1397\n01:04:08,683 --> 01:04:13,174\nsay on management packs I I made a just a\nquick list in the notes of vendors that I\n\n1398\n01:04:13,174 --> 01:04:16,215\nknew released management packs,\npeople like HP and\n\n1399\n01:04:16,215 --> 01:04:20,291\nDell, Symantec, for their backup\nexec product is a great one to use,\n\n1400\n01:04:20,291 --> 01:04:25,600\nI've used that one in the past, and\nthere's other management packs out there.\n\n1401\n01:04:25,600 --> 01:04:29,110\nThese are what extends us, Tom, to become\nreally powerful and this is how you can\n\n1402\n01:04:29,110 --> 01:04:33,710\nmonitor non Microsoft operating systems,\nright, and non Microsoft software.\n\n1403\n01:04:33,710 --> 01:04:37,724\nEven your custom applications by\ncreating management packs that do that.\n\n1404\n01:04:37,724 --> 01:04:42,158\nSo, to a lot of people SCOM wouldn't\nhave been successful if it weren't for\n\n1405\n01:04:42,158 --> 01:04:45,363\nthe management packs, so\nthat is an important piece.\n\n1406\n01:04:45,363 --> 01:04:48,309\nAll right so\nI think that pretty much wraps up our,\n\n1407\n01:04:48,309 --> 01:04:51,265\nI'm just making sure I'm\nnot missing anything.\n\n1408\n01:04:51,265 --> 01:04:52,225\n>> Cuz we did active directory, yep.\n\n1409\n01:04:52,225 --> 01:04:57,430\n>> So that pretty much wraps up our\nquick first time overview of SCOM.\n\n1410\n01:04:57,430 --> 01:05:00,160\nRemember we're gonna do a few lab episodes\nwhere I'll actually show implementing\n\n1411\n01:05:00,160 --> 01:05:02,410\na lot of this stuff and\ngive you a chance to see it, but\n\n1412\n01:05:02,410 --> 01:05:04,870\nfor now, those are the concepts\nwe need to be aware of\n\n1413\n01:05:04,870 --> 01:05:07,860\nwhen we design our monitoring strategy,\nright.\n\n1414\n01:05:07,860 --> 01:05:08,590\nSo let's recap.\n\n1415\n01:05:08,590 --> 01:05:12,030\nWay back to the beginning, we needed\nto determine whether we were gonna use\n\n1416\n01:05:12,030 --> 01:05:15,310\nIndividual monitoring tools\non single servers, or\n\n1417\n01:05:15,310 --> 01:05:19,020\nif we want centralized monitoring\nthrough something like SCOM.\n\n1418\n01:05:19,020 --> 01:05:21,930\nAnd keep in mind that a lot of\nthe individual tools like ACS,\n\n1419\n01:05:21,930 --> 01:05:26,540\nright, the Audit Collection Service or\nGSM the Global Service Monitor,\n\n1420\n01:05:26,540 --> 01:05:31,490\neven though they run outside of SCOM,\nthey integrate with SCOM so\n\n1421\n01:05:31,490 --> 01:05:34,450\nwe can bring that in and\ncentralize it again.\n\n1422\n01:05:34,450 --> 01:05:37,320\nIf we go centralized,\nwe'll probably want redundancy and\n\n1423\n01:05:37,320 --> 01:05:40,820\nwe have resource pools available\nto have more then one front end,\n\n1424\n01:05:40,820 --> 01:05:44,890\nand we have sequels ability to replicate,\nto create a redundant back end.\n\n1425\n01:05:44,890 --> 01:05:48,160\nSo make sure you plan for\nredundancy in that environment.\n\n1426\n01:05:48,160 --> 01:05:53,240\nAnd then lastly, selecting the appropriate\nmanagement packs to manage\n\n1427\n01:05:53,240 --> 01:05:55,590\njust the systems in your environment,\nright?\n\n1428\n01:05:55,590 --> 01:05:58,930\nBe very specific, don't monitor\nthings that you're not gonna need,\n\n1429\n01:05:58,930 --> 01:06:00,618\neach one creates a bit\nof a performance per.\n\n1430\n01:06:00,618 --> 01:06:01,816\nAll right,\n\n1431\n01:06:01,816 --> 01:06:05,590\nso with that in hand, that's pretty\nmuch designing our monitoring solution.\n\n1432\n01:06:06,800 --> 01:06:09,825\nAll right, well, keep in ind if\nyou have any questions on this,\n\n1433\n01:06:09,825 --> 01:06:10,789\nyou are free to ask.\n\n1434\n01:06:10,789 --> 01:06:13,821\nRight, live during the show,\nyou can go to ITPro.tv/live and\n\n1435\n01:06:13,821 --> 01:06:17,280\nyou'll see the chat box beneath the video,\npost your questions there.\n\n1436\n01:06:17,280 --> 01:06:19,530\nWe monitor and answer during the show.\n\n1437\n01:06:19,530 --> 01:06:22,810\nIf you have questions after the show,\nuse our Q and A forums, right?\n\n1438\n01:06:22,810 --> 01:06:25,320\nAt the top of every page,\nyou'll see a link that says Q and A.\n\n1439\n01:06:25,320 --> 01:06:26,970\nClick on it and\nit will take you into the forums.\n\n1440\n01:06:26,970 --> 01:06:31,410\nYou can post your question there,\nand again, we monitor and answer.\n\n1441\n01:06:31,410 --> 01:06:33,180\nAll right,\nwell I hope you guys enjoyed the show.\n\n1442\n01:06:33,180 --> 01:06:35,070\nSigning off for ITProTV, I'm Don Pezet.\n\n1443\n01:06:35,070 --> 01:06:36,200\n>> And I'm Mike Rodrick.\n\n1444\n01:06:36,200 --> 01:06:38,109\n>> And we will see you next time.\n\n1445\n01:06:38,109 --> 01:06:48,109\n[MUSIC]\n\n1446\n01:06:53,180 --> 01:06:56,800\n[SOUND]\n\n",
          "vimeoId": "110354320"
        },
        {
          "description": "",
          "length": "4878",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-3-automated-remediation-102814.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-3-automated-remediation-102814-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-1-3-automated-remediation-102814-sm.jpg",
          "title": "Automated Remediation",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,628 --> 00:00:34,214\nAll right.\n\n3\n00:00:34,214 --> 00:00:36,391\nGood morning, good afternoon and\ngood evening.\n\n4\n00:00:36,391 --> 00:00:40,370\nWelcome back to another episode of\nITProTV, I'm your host Don Pezet.\n\n5\n00:00:40,370 --> 00:00:41,390\nBack with Mr. Mike Rodrick.\n\n6\n00:00:41,390 --> 00:00:42,000\nHow's it going Mike?\n\n7\n00:00:42,000 --> 00:00:43,700\n>> Fantastic, how you doing today Don?\n\n8\n00:00:43,700 --> 00:00:45,086\n>> Doing just well.\n\n9\n00:00:45,086 --> 00:00:50,336\nWe've got another exciting MCSE episode\nbefore us as we cover the 70-414 exam.\n\n10\n00:00:50,336 --> 00:00:53,560\nI don't why I said that before,\nI was like a minister or something.\n\n11\n00:00:53,560 --> 00:00:57,660\nWe are gathered here today to\ndiscuss server monitoring.\n\n12\n00:00:57,660 --> 00:01:02,700\nSo [LAUGH] we are continuing to move on\nwith objective one which was manage and\n\n13\n00:01:02,700 --> 00:01:07,900\nmaintain a server infrastructure, and\nwe're tackling that last objective\n\n14\n00:01:07,900 --> 00:01:12,545\nin this episode which is plan and\nimplement automated remediation.\n\n15\n00:01:12,545 --> 00:01:14,328\n>> I like the sounds of that.\n\n16\n00:01:14,328 --> 00:01:15,811\n>> Yeah [LAUGH].\n>> Remediation that I don't have\n\n17\n00:01:15,811 --> 00:01:16,420\nto do [LAUGH].\n\n18\n00:01:16,420 --> 00:01:18,660\n>> [LAUGH] Automated rehibilitation.\n\n19\n00:01:18,660 --> 00:01:22,480\nSo with automated remediation.\n\n20\n00:01:22,480 --> 00:01:24,760\nI'll have that in my mind\nthe whole rest of the episode.\n\n21\n00:01:24,760 --> 00:01:30,250\nWhat we're talking about is, wouldn't\nit be nice if when a problem happened,\n\n22\n00:01:30,250 --> 00:01:32,670\nthe system just fixed itself.\n\n23\n00:01:32,670 --> 00:01:37,028\nOr if somebody didn't follow the rules\nthat it just fixed itself and\n\n24\n00:01:37,028 --> 00:01:39,254\nwe didn't have to worry about it.\n\n25\n00:01:39,254 --> 00:01:43,573\nSo, for example, we might have\na policy in our company that says,\n\n26\n00:01:43,573 --> 00:01:48,836\nif anyone deploys Microsoft SQL server,\nthey have to have Service Pack 2 on it.\n\n27\n00:01:48,836 --> 00:01:49,730\nThat's our requirement.\n\n28\n00:01:50,850 --> 00:01:55,700\nOr, if anybody brings up a new domain that\nit's got to have a minimum password policy\n\n29\n00:01:55,700 --> 00:01:57,959\nof 10 characters in length,\nchanges every 30 days.\n\n30\n00:01:59,040 --> 00:02:02,040\nAnd if somebody breaks the rules and\nbrings up a system that doesn't follow\n\n31\n00:02:02,040 --> 00:02:05,910\nthat, wouldn't it be nice if the system\njust stepped right in and fixed it.\n\n32\n00:02:05,910 --> 00:02:06,820\nAnd forced it.\n\n33\n00:02:06,820 --> 00:02:11,520\nOh you didn't do service pack 2,\nlet me push that on there for you.\n\n34\n00:02:11,520 --> 00:02:14,280\nOr oh, you changed this registry\nsetting to enable auto log on?\n\n35\n00:02:14,280 --> 00:02:15,010\nLet me turn that off.\n\n36\n00:02:15,010 --> 00:02:15,920\n>> Right.\n>> Right?\n\n37\n00:02:15,920 --> 00:02:20,378\nSo we can do that through a number\nof different tools of Microsoft.\n\n38\n00:02:20,378 --> 00:02:23,670\nBut mostly we can do it\nthrough System Center 2012 R2.\n\n39\n00:02:23,670 --> 00:02:24,588\n>> Mm-hm.\n\n40\n00:02:24,588 --> 00:02:25,660\n>> All right.\nNow\n\n41\n00:02:25,660 --> 00:02:27,515\nautomator remediation takes\na lot of different forms.\n\n42\n00:02:27,515 --> 00:02:29,675\nAnd so we're gonna talk about\nfour different methods here.\n\n43\n00:02:29,675 --> 00:02:33,475\nThere are other ones too and I just\nwanna make sure we avoid confusion here.\n\n44\n00:02:33,475 --> 00:02:40,505\nOne of the things that I hear from viewers\nis doesn't a cluster count as remediation?\n\n45\n00:02:40,505 --> 00:02:42,525\nAnd it really doesn't, all right?\n\n46\n00:02:42,525 --> 00:02:45,545\nWhen we talk about remediation,\nthere's a problem, and\n\n47\n00:02:45,545 --> 00:02:51,090\nthe problem actually gets fixed, fully\ncorrected and no more action is required.\n\n48\n00:02:51,090 --> 00:02:54,920\nIn a cluster, when you have one node fail,\nthe other nodes make up for it, right?\n\n49\n00:02:54,920 --> 00:02:56,670\nYour system stays online.\n\n50\n00:02:56,670 --> 00:03:00,336\nBut the node that failed is still failed.\n\n51\n00:03:00,336 --> 00:03:01,780\nSo there's an action we've gotta take.\n\n52\n00:03:01,780 --> 00:03:03,310\nWe have to come and\nfix that failed node and\n\n53\n00:03:03,310 --> 00:03:05,880\nbring it back online whenever\nwe get a chance, right.\n\n54\n00:03:05,880 --> 00:03:09,340\nSo that's not remediation,\nthat's just business continuity, right?\n\n55\n00:03:09,340 --> 00:03:11,680\nKeeping ourselves running even\nthough there was a failure.\n\n56\n00:03:12,960 --> 00:03:15,410\nSo when we look at these technologies\nwe got to remember that, right,\n\n57\n00:03:15,410 --> 00:03:18,410\nremember exactly what we're looking at and\nthere's only so much that we can fix.\n\n58\n00:03:18,410 --> 00:03:20,005\nYou'll find it's mostly software issues.\n\n59\n00:03:20,005 --> 00:03:24,260\nRight, can't replace a hard\ndrive with a script, or\n\n60\n00:03:24,260 --> 00:03:27,295\nchange out RAM sticks, or whatever.\n\n61\n00:03:27,295 --> 00:03:28,294\n>> Right.\n\n62\n00:03:28,294 --> 00:03:29,810\n>> There are limits.\n\n63\n00:03:29,810 --> 00:03:31,690\nThat's coming, I think,\nin the next version.\n\n64\n00:03:31,690 --> 00:03:32,325\n>> That's right.\n[LAUGH]\n\n65\n00:03:32,325 --> 00:03:33,920\n>> [LAUGH] But for this\n\n66\n00:03:33,920 --> 00:03:36,720\none we're just going to take a look at\nsome of the stuff we've got built in, and\n\n67\n00:03:36,720 --> 00:03:40,460\nremember there's a lot of different\nproducts inside of System Center.\n\n68\n00:03:40,460 --> 00:03:43,530\nSo let me just do a quick kind of\nrundown of the products that we're gonna\n\n69\n00:03:43,530 --> 00:03:44,830\nbe talking about here.\n\n70\n00:03:44,830 --> 00:03:48,280\nThe first one was SCOM,\nthe system center operations manager.\n\n71\n00:03:48,280 --> 00:03:51,430\nI know we've talked about that in\nother segments now, but basically,\n\n72\n00:03:51,430 --> 00:03:56,440\nit allows us to monitor and\nevaluate our systems to detect when\n\n73\n00:03:56,440 --> 00:03:59,740\nwe're out of compliance, when we've got\nan issue that needs to be remediated.\n\n74\n00:04:01,100 --> 00:04:03,990\nAnd that term compliance,\nthat's our baseline, what we set.\n\n75\n00:04:03,990 --> 00:04:07,270\nWe establish a set of rules, and\npeople have to follow the rules, and\n\n76\n00:04:07,270 --> 00:04:10,200\nif they don't, they're not in compliance,\nand we need to fix them, and\n\n77\n00:04:10,200 --> 00:04:13,380\nthat's the process of remediation,\nis making them compliant.\n\n78\n00:04:13,380 --> 00:04:16,750\nSo SCOM is the firs piece of the puzzle,\nit does the detection.\n\n79\n00:04:18,480 --> 00:04:20,230\nBut who does the fixing?\n\n80\n00:04:20,230 --> 00:04:21,990\nWell, the SCVMM is the next one.\n\n81\n00:04:23,050 --> 00:04:25,000\nThe system center virtual machine manager.\n\n82\n00:04:25,000 --> 00:04:27,850\nIt's what's keeping track of\nour virtualization hosts and\n\n83\n00:04:27,850 --> 00:04:29,250\nthe VM's on top of it.\n\n84\n00:04:29,250 --> 00:04:31,640\nAnd because it's integrated\nin that solution,\n\n85\n00:04:31,640 --> 00:04:36,210\nit's able to take actions, moving virtual\nmachines doing other things applying\n\n86\n00:04:36,210 --> 00:04:38,990\nupdates all sorts of interesting stuff and\nwe'll get a chance to see that.\n\n87\n00:04:40,530 --> 00:04:46,220\nAnd then we've also got the system center\nservice manager, the SCSM, kind of hard\n\n88\n00:04:46,220 --> 00:04:50,680\nto say, where we've got our centralized\nticketing and management software.\n\n89\n00:04:50,680 --> 00:04:52,565\nRight?\nSo, anytime there's an incident or\n\n90\n00:04:52,565 --> 00:04:55,970\nan alert it can throw it right up there\nin the SM, and we can look at it and\n\n91\n00:04:55,970 --> 00:04:58,544\nsee it, and then go and handle it, or\n\n92\n00:04:58,544 --> 00:05:01,810\nin the SM you can actually have\nsolutions scripted and automated.\n\n93\n00:05:01,810 --> 00:05:04,880\nSo when an event is triggered,\nit takes an action.\n\n94\n00:05:04,880 --> 00:05:09,490\nSo, for example, your SQL server has\na transaction log that grows too large,\n\n95\n00:05:09,490 --> 00:05:13,370\nthey can kick in and take a backup, which\nwill then flush the transaction logs and\n\n96\n00:05:13,370 --> 00:05:14,660\nshrink them back down.\n\n97\n00:05:14,660 --> 00:05:19,420\nSo you can automate activities like\nthat through the Service Manager.\n\n98\n00:05:19,420 --> 00:05:21,829\nAnd then lastly we've\ngot the Orchestrator,\n\n99\n00:05:21,829 --> 00:05:23,628\nthe System Center Orchestrator.\n\n100\n00:05:23,628 --> 00:05:28,660\nIt's not one of the big products,\nit's not SCOM or SCCM or whatever.\n\n101\n00:05:28,660 --> 00:05:32,250\nBut the Orchestrator is the underlying\nautomation and scripting tool.\n\n102\n00:05:33,350 --> 00:05:37,590\nWhen any of the system center utilities or\npackages takes an action, what they're\n\n103\n00:05:37,590 --> 00:05:41,560\nactually doing is using the Orchestrator\nwhich Scripts the activity, right?\n\n104\n00:05:41,560 --> 00:05:46,470\nSo it's really, very complex power shell\nscripts and activities that reach out and\n\n105\n00:05:46,470 --> 00:05:50,290\ntake the action of remediating.\n\n106\n00:05:50,290 --> 00:05:51,180\nSo as we go through and\n\n107\n00:05:51,180 --> 00:05:53,230\nstart to work with some of the other\ntechnology in this episode,\n\n108\n00:05:53,230 --> 00:05:57,110\nin the background, the Orchestrator is\nactually doing a decent bit of this work.\n\n109\n00:05:57,110 --> 00:05:58,310\n>> And it hides a lot of the complexity.\n\n110\n00:05:58,310 --> 00:06:01,630\nIt makes it where we don't have to\nwrite some of those scripts and\n\n111\n00:06:01,630 --> 00:06:02,330\nthings like that.\n\n112\n00:06:02,330 --> 00:06:03,760\nWe can tell it what we need it to do and\n\n113\n00:06:03,760 --> 00:06:08,500\nit can create those jobs or\nthe run time books that we'll talk about.\n\n114\n00:06:08,500 --> 00:06:10,510\n>> Yeah, and\nwe'll see those throughout the show.\n\n115\n00:06:10,510 --> 00:06:11,660\nActually, not just this show,\n\n116\n00:06:11,660 --> 00:06:14,230\nthrough the entire series you'll\nsee that kind of creep back up.\n\n117\n00:06:14,230 --> 00:06:17,550\nWell, Mike mentioned the run time\nbooks which are the work flow or\n\n118\n00:06:17,550 --> 00:06:20,870\nthe step-by-step that we go through\nto remediate and it can be very,\n\n119\n00:06:20,870 --> 00:06:22,570\nvery complex if you want.\n\n120\n00:06:22,570 --> 00:06:26,550\nActually I'll post some links in the show\nnotes to Microsoft's configuration page\n\n121\n00:06:26,550 --> 00:06:30,560\nwhere you can create your own Orchestrator\npackages that do all sort of really,\n\n122\n00:06:30,560 --> 00:06:32,040\nreally impressive stuff.\n\n123\n00:06:32,040 --> 00:06:34,720\nYou can even deal with non\nMicrosoft systems with it.\n\n124\n00:06:34,720 --> 00:06:35,510\nThe sky's the limit.\n\n125\n00:06:37,040 --> 00:06:41,090\nAll right, but let's take a look at some\nof the other things inside of our system.\n\n126\n00:06:41,090 --> 00:06:44,990\nAnd the first one that we want to talk\nabout is what's called an update baseline.\n\n127\n00:06:44,990 --> 00:06:48,515\nAll right, and the exam is objective,\nit specifically states to create an update\n\n128\n00:06:48,515 --> 00:06:51,750\nbaseline in virtual machine manager,\nright?\n\n129\n00:06:51,750 --> 00:06:55,900\nNow before we do that,\nwhat is an update baseline?\n\n130\n00:06:55,900 --> 00:06:59,540\nWell, Microsoft, believe it or\nnot, when they release a product,\n\n131\n00:06:59,540 --> 00:07:00,740\nit's not necessarily perfect.\n\n132\n00:07:00,740 --> 00:07:02,070\nSo we get, what?\n\n133\n00:07:02,070 --> 00:07:03,170\nI know, it's shocking.\n\n134\n00:07:03,170 --> 00:07:04,337\n>> Shut the front door [LAUGH].\n\n135\n00:07:04,337 --> 00:07:09,844\n>> But we get updates, we get hot fixes,\npatches, service patch, roll ups,\n\n136\n00:07:09,844 --> 00:07:14,920\nthose things that come out at least\non that Super Tuesday every month or\n\n137\n00:07:14,920 --> 00:07:21,480\nspread throughout and we get those updates\nand we need to apply them to our servers.\n\n138\n00:07:21,480 --> 00:07:26,750\nYou likely use WSUS,\nWindows Server Update Services, and\n\n139\n00:07:26,750 --> 00:07:31,070\nthat let's you control which updates\nget applied to your machines.\n\n140\n00:07:31,070 --> 00:07:32,400\nBut there's a problem with WSUS.\n\n141\n00:07:33,550 --> 00:07:37,300\nWSUS does not understand\nyour infrastructure.\n\n142\n00:07:37,300 --> 00:07:38,895\nIt just says here's some updates.\n\n143\n00:07:38,895 --> 00:07:41,670\nHere's the server that needs the updates.\n\n144\n00:07:41,670 --> 00:07:43,550\nLet's apply it in whatever\nmaintenance window we set.\n\n145\n00:07:44,650 --> 00:07:48,420\nBut what if that server's running hyper\nV and on it are 20 virtual machines?\n\n146\n00:07:49,610 --> 00:07:51,510\nWSUS doesn't see that.\n\n147\n00:07:51,510 --> 00:07:53,840\nIt's updating the 20 virtual machines,\nsure.\n\n148\n00:07:53,840 --> 00:07:55,070\nBut it also updates the host.\n\n149\n00:07:55,070 --> 00:07:58,995\nAnd when it updates the host, if you\nhaven't messed with the configuration,\n\n150\n00:07:58,995 --> 00:08:01,977\nall the virtual machines get frozen,\nthey do a save state.\n\n151\n00:08:01,977 --> 00:08:04,838\nIt reboots to apply the updates, and\nthen it starts the VMs again, but\n\n152\n00:08:04,838 --> 00:08:07,180\nservice is interrupted for\nall those virtual machines.\n\n153\n00:08:07,180 --> 00:08:10,558\nBecause WSUS doesn't know about them,\nright.\n\n154\n00:08:10,558 --> 00:08:12,062\nDoesn't know, doesn't care.\n\n155\n00:08:12,062 --> 00:08:14,500\nThat's how WSUS is.\n\n156\n00:08:14,500 --> 00:08:17,660\nSo when we have a System Center\nenvironment, and\n\n157\n00:08:17,660 --> 00:08:23,940\nI'm talking about all of the System Center\nproducts, SCOM, SCCM, SCSM those servers,\n\n158\n00:08:23,940 --> 00:08:30,330\nas well as the SCVMM and the underlying\nHyper-V hosts and virtual machines.\n\n159\n00:08:30,330 --> 00:08:34,400\nWhen you have that kind of infrastructure,\nyou do not want to use\n\n160\n00:08:34,400 --> 00:08:38,432\nnormal WSUS with those hosts, because\nthe impact it can create on your network.\n\n161\n00:08:38,432 --> 00:08:45,370\nAll right,\ninstead what we can do is we can tie WSUS\n\n162\n00:08:45,370 --> 00:08:51,540\ninto the SCVMM and the SCVMM can act\nas an in-between, as a middle man.\n\n163\n00:08:51,540 --> 00:08:52,158\nAnd it says,\n\n164\n00:08:52,158 --> 00:08:55,960\nall right these updates are available,\nI need to apply it to this host.\n\n165\n00:08:55,960 --> 00:08:57,930\nOh, look this host isn't a cluster.\n\n166\n00:08:57,930 --> 00:09:02,190\nSo let me do this, let me take all the VMs\nand I'll move them to another host.\n\n167\n00:09:02,190 --> 00:09:05,640\nAnd now when this first host is empty,\nI can apply the updates,\n\n168\n00:09:05,640 --> 00:09:10,130\nI can reboot, bring it back online, and\nthen I can move the VMs back on to it.\n\n169\n00:09:10,130 --> 00:09:14,290\nDuring the whole process,\nwe have zero down time for our VM's, and\n\n170\n00:09:14,290 --> 00:09:16,220\nthe host gets the update.\n\n171\n00:09:16,220 --> 00:09:19,470\nSCVMM can do that because it\nknows the cluster structure,\n\n172\n00:09:19,470 --> 00:09:20,960\nit knows that infrastructure.\n\n173\n00:09:20,960 --> 00:09:21,970\nWhereas WSUS doesn't, right.\n\n174\n00:09:23,530 --> 00:09:26,890\nSo an update baseline is\nsimply an approval list.\n\n175\n00:09:26,890 --> 00:09:32,210\nA list of updates that we've approved\nthat we want our Hyper-V hosts to have.\n\n176\n00:09:32,210 --> 00:09:36,125\nAnd the other servers that\nare inside of our System Center and\n\n177\n00:09:36,125 --> 00:09:37,290\nHyper-V infrastructure.\n\n178\n00:09:37,290 --> 00:09:40,270\nAnd you just pick the updates\nthat you've approved.\n\n179\n00:09:40,270 --> 00:09:41,050\nYou gotta test them, right.\n\n180\n00:09:41,050 --> 00:09:42,110\n>> Right.\n>> You definitely\n\n181\n00:09:42,110 --> 00:09:43,750\ndon't want to screw something\nup on your host, right.\n\n182\n00:09:43,750 --> 00:09:47,730\nAnd so we test them,\nwe make sure they're the ones we want.\n\n183\n00:09:47,730 --> 00:09:49,250\nAnd then we approve them and\nroll them out.\n\n184\n00:09:49,250 --> 00:09:53,450\nSo, it's kind of like mini\nSUS inside of SCVMM, but\n\n185\n00:09:53,450 --> 00:09:58,390\nSCVMM doesn't have the full feature set,\nso you actually do need WSUS.\n\n186\n00:09:58,390 --> 00:09:59,920\nIt's just not talking\ndirectly to those hosts.\n\n187\n00:09:59,920 --> 00:10:04,490\nNow, for the VMs, you go ahead and\nstill use WSUS like normal, right?\n\n188\n00:10:04,490 --> 00:10:07,580\nYou treat your virtual machines\nlike your other physical servers.\n\n189\n00:10:07,580 --> 00:10:12,410\nSo, we're really just talking about\nour Hyper-V infrastructure, all right?\n\n190\n00:10:12,410 --> 00:10:17,720\nThe Hyper-V hosts, the SCVMM servers and\nour System Center, right.\n\n191\n00:10:17,720 --> 00:10:20,920\nSo those are the pieces that we want\nto manage with the update baseline.\n\n192\n00:10:22,370 --> 00:10:25,020\nAll right, so an update baseline\nis pretty easy to work with.\n\n193\n00:10:25,020 --> 00:10:28,080\nMicrosoft does recommend that you create\n\n194\n00:10:28,080 --> 00:10:32,590\na dedicated WSUS server just for\nthis purpose.\n\n195\n00:10:32,590 --> 00:10:37,360\nSo you might already have a WSUS or\nmultiple ones to support your desktops and\n\n196\n00:10:37,360 --> 00:10:38,760\nyour servers and all that.\n\n197\n00:10:38,760 --> 00:10:41,140\nThey recommend doing\na dedicated one just for this.\n\n198\n00:10:41,140 --> 00:10:43,480\nYou can shrink the updates\ndown when you do that.\n\n199\n00:10:43,480 --> 00:10:44,330\nRight.\nYou're just saying,\n\n200\n00:10:44,330 --> 00:10:48,040\nhey I just need updates for\nmy server OSs and that's it and so\n\n201\n00:10:48,040 --> 00:10:49,880\nit's not such a big burden.\n\n202\n00:10:49,880 --> 00:10:52,740\nBut that way, you can approve and\ndecline updates just for\n\n203\n00:10:52,740 --> 00:10:54,120\nyour virtualization infrastructure.\n\n204\n00:10:54,120 --> 00:10:56,220\n>> And independently from\nthe rest of your infrastructure.\n\n205\n00:10:56,220 --> 00:10:57,830\n>> Yeah and that's really important.\n\n206\n00:10:57,830 --> 00:11:01,330\nSo that's kind of our first step,\nis we get a WSUS server.\n\n207\n00:11:01,330 --> 00:11:05,440\nThen, inside of the SCVMM,\nwe link them together, all right.\n\n208\n00:11:05,440 --> 00:11:06,790\nLet me show you an example here.\n\n209\n00:11:06,790 --> 00:11:11,300\nI'm gonna pull up my SCVMM, and\nso I've got that right here.\n\n210\n00:11:11,300 --> 00:11:14,765\nSo here's my SCVMM and\nI'm in my fabric right now.\n\n211\n00:11:14,765 --> 00:11:17,940\nAnd so when I look at my fabric,\nyou'll see things like my hosts and\n\n212\n00:11:17,940 --> 00:11:19,995\nhow I've got a Hyper-V cluster here.\n\n213\n00:11:19,995 --> 00:11:22,005\nIt recognizes that I've got a cluster,\nright.\n\n214\n00:11:23,055 --> 00:11:26,007\nSo here's my cluster, and here's some\nof the nodes that are inside it,\n\n215\n00:11:26,007 --> 00:11:29,457\nI guess some kind of job failed there,\nbut the hosts are up and okay.\n\n216\n00:11:29,457 --> 00:11:33,777\n[LAUGH] So it recognizes that I've got\nthat cluster and that it exists, but\n\n217\n00:11:33,777 --> 00:11:37,947\nif I go up it also recognizes that\nI have other systems in place too,\n\n218\n00:11:37,947 --> 00:11:41,693\nincluding an update server, right,\nthat's one that's running WSUS.\n\n219\n00:11:41,693 --> 00:11:44,174\nSo it recognizes that I've got\nthose components inside of my\n\n220\n00:11:44,174 --> 00:11:45,303\nenvironment, all right.\n\n221\n00:11:46,803 --> 00:11:52,150\nWhat I need to do is I need to tell it\nthat we're going to be linked to an SCVMM.\n\n222\n00:11:52,150 --> 00:11:56,100\nAnd that process is fairly\nstraightforward, right?\n\n223\n00:11:56,100 --> 00:11:59,550\nSo, what we need to do is,\nbasically inside of our SCVMM,\n\n224\n00:11:59,550 --> 00:12:04,460\nif we browse in here to our fabric,\nour servers,\n\n225\n00:12:04,460 --> 00:12:07,652\nour infrastructure, and our update server.\n\n226\n00:12:07,652 --> 00:12:11,200\nAll right, here's where that\nupdate server is defined.\n\n227\n00:12:11,200 --> 00:12:14,290\nNow how did it know we\nhad an update server?\n\n228\n00:12:14,290 --> 00:12:18,290\nWell because we came in here and we hit\nthis big fat Add Resources button, right.\n\n229\n00:12:18,290 --> 00:12:22,620\nAnd we added the update server in here.\n\n230\n00:12:22,620 --> 00:12:24,830\nSo we added it and\nit was put into the list.\n\n231\n00:12:24,830 --> 00:12:27,270\nAnd that's how we know we\nhave an update server.\n\n232\n00:12:27,270 --> 00:12:31,680\nAnd when that happens,\nnow the SCVMM has a WSUS server that it\n\n233\n00:12:31,680 --> 00:12:36,108\ncan communicate to learn about\nwhat updates are available.\n\n234\n00:12:36,108 --> 00:12:38,298\nAll right, and\nI can see that it's updated,\n\n235\n00:12:38,298 --> 00:12:40,151\nthe synchronization is successful.\n\n236\n00:12:40,151 --> 00:12:42,757\nIf you just added it,\nit should do a scan, but if it doesn't,\n\n237\n00:12:42,757 --> 00:12:44,276\nyou can always hit the Scan button.\n\n238\n00:12:44,276 --> 00:12:48,066\nBut it should synchronize on its own and\nit's going to be available.\n\n239\n00:12:48,066 --> 00:12:50,608\nNow we've got some updates listed,\nall right.\n\n240\n00:12:50,608 --> 00:12:52,734\nSo that's kind of our first step.\n\n241\n00:12:52,734 --> 00:12:55,630\nAfter that we have to do what\nthe exam objective is talking about.\n\n242\n00:12:55,630 --> 00:12:57,870\nThe objective wants us to\ncreate an update baseline.\n\n243\n00:12:57,870 --> 00:13:02,610\nIn other words, pick the updates\nthat we want to apply, all right.\n\n244\n00:13:02,610 --> 00:13:04,810\nAnd to do that,\nwe go down here to our Library,\n\n245\n00:13:04,810 --> 00:13:08,190\nbecause what we're really creating\nis what's called a catalog.\n\n246\n00:13:08,190 --> 00:13:10,360\nRight?\nA catalog of updates,\n\n247\n00:13:10,360 --> 00:13:13,610\na subset of updates out of\nthe total that are available.\n\n248\n00:13:13,610 --> 00:13:15,130\nSo I can go down here to Library.\n\n249\n00:13:15,130 --> 00:13:17,648\nAnd my library's a bit of a mess,\nisn't it?\n\n250\n00:13:17,648 --> 00:13:24,190\n[LAUGH] But if I scroll down in here, we\ncan find Update, Catalog, and Baselines.\n\n251\n00:13:24,190 --> 00:13:25,820\nAnd then right here,\nwe've got Update Baselines.\n\n252\n00:13:25,820 --> 00:13:28,900\nThe Update Catalog,\nthat is all the updates.\n\n253\n00:13:28,900 --> 00:13:30,980\nSo it indexed that from WSUS and\n\n254\n00:13:30,980 --> 00:13:34,270\ngot a full catalog of\nthe updates that are available.\n\n255\n00:13:34,270 --> 00:13:39,740\nAnd then Update Baselines, that's\nwhere we create selections of updates.\n\n256\n00:13:39,740 --> 00:13:42,180\nAnd you might have different needs for\ndifferent servers.\n\n257\n00:13:42,180 --> 00:13:45,750\nAnd inside of WSUS, you'd create\nlittle groups in there and approve or\n\n258\n00:13:45,750 --> 00:13:47,200\ndecline updates by that.\n\n259\n00:13:47,200 --> 00:13:50,760\nBut here in the SCVMM,\nwe do it based on these baselines.\n\n260\n00:13:50,760 --> 00:13:54,400\nSo just think of it in your mind\nas like a group of servers, and\n\n261\n00:13:54,400 --> 00:13:57,180\nthen what updates they're going to get.\n\n262\n00:13:57,180 --> 00:14:00,630\nThere's a few baselines that are already\nmade here, but I'm gonna create my own.\n\n263\n00:14:00,630 --> 00:14:03,800\nAnd, so\nI'll just use to create a baseline.\n\n264\n00:14:03,800 --> 00:14:06,120\nIf I go to create the baseline,\nand my updates aren't showing up,\n\n265\n00:14:06,120 --> 00:14:09,100\nyou'll see that I can synchronize\nthat server right here also, right?\n\n266\n00:14:09,100 --> 00:14:11,280\nI mentioned it should've\nalready synchronized, but\n\n267\n00:14:11,280 --> 00:14:12,420\nif it didn't you can do it there.\n\n268\n00:14:12,420 --> 00:14:15,470\nI'm go ahead and create a baseline,\nand I'll give it a name.\n\n269\n00:14:15,470 --> 00:14:19,410\nSo, I'm gonna call this my,\nmaybe this will be like my Cluster Hosts.\n\n270\n00:14:22,000 --> 00:14:25,480\nRight, and then on the next page,\nis where I pick my updates.\n\n271\n00:14:25,480 --> 00:14:26,180\nAll right, and\n\n272\n00:14:26,180 --> 00:14:29,000\nhere's where I'm gonna see all the updates\nthat are available on the server.\n\n273\n00:14:29,000 --> 00:14:32,670\nAnd if you look at mine, Updates to\napply with this baseline, I got none.\n\n274\n00:14:32,670 --> 00:14:38,320\nAnd I can hit my Add button and here's\nthe list of updates that are available.\n\n275\n00:14:38,320 --> 00:14:41,680\nSo we go through and we pick the ones\nthat we've chosen to approve.\n\n276\n00:14:41,680 --> 00:14:45,940\nIt's a little bit of a list\n[LAUGH] as we kinda look, right?\n\n277\n00:14:45,940 --> 00:14:49,080\nI could choose them all and add them in,\nbut I don't wanna be here all day.\n\n278\n00:14:49,080 --> 00:14:53,140\nSo I'm gonna pick, let's pick something\nthat I know we'll need, let's see,\n\n279\n00:14:53,140 --> 00:14:55,080\nI don't wanna do a system center update.\n\n280\n00:14:55,080 --> 00:14:57,390\nLet's see if I can find\na good Windows one.\n\n281\n00:14:57,390 --> 00:14:58,910\nUpdate for Windows Server 2012 R2, right.\n\n282\n00:14:58,910 --> 00:15:01,970\nSo, there's just a Windows update.\n\n283\n00:15:01,970 --> 00:15:05,080\nI'm not sure what that one is, but\nI know it applies to Windows Server.\n\n284\n00:15:05,080 --> 00:15:07,180\nActually I could pick,\nI'll pick these two.\n\n285\n00:15:07,180 --> 00:15:09,660\nRight, so there's two different\nupdates that I want to grab for\n\n286\n00:15:09,660 --> 00:15:13,520\nWindows Server 2012 R2, and I'll add\nthose into my list, and there they go.\n\n287\n00:15:13,520 --> 00:15:16,960\nAnd if I hit Add and that list was empty,\nthat's that queue that I need to go and\n\n288\n00:15:16,960 --> 00:15:17,520\nsynchronize.\n\n289\n00:15:17,520 --> 00:15:22,530\nBut in my case I've now\napproved these two updates.\n\n290\n00:15:22,530 --> 00:15:27,160\nAny server that I apply this baseline\nto should have these updates.\n\n291\n00:15:27,160 --> 00:15:30,130\nIf they do, they'll show as compliant.\n\n292\n00:15:30,130 --> 00:15:33,750\nIf they don't,\nthey'll show as non-compliant, and\n\n293\n00:15:33,750 --> 00:15:37,610\nthe baseline can be applied to\nthem to apply these updates.\n\n294\n00:15:37,610 --> 00:15:38,790\nAnd when it applies the updates,\n\n295\n00:15:38,790 --> 00:15:42,690\nit'll do it gracefully,\nmoving the VMs to make that possible.\n\n296\n00:15:45,350 --> 00:15:47,500\nAll right, I'll go ahead and hit Next and\nhere's where I pick my assignment scope.\n\n297\n00:15:47,500 --> 00:15:48,710\nWho does it effect?\n\n298\n00:15:48,710 --> 00:15:51,790\nAnd I can pick from any mixture\nof my servers in here and\n\n299\n00:15:51,790 --> 00:15:54,740\nyou'll notice it's not giving me\nmy full active directory list.\n\n300\n00:15:54,740 --> 00:15:57,220\nIt's not listing my\nvirtual machine guests.\n\n301\n00:15:57,220 --> 00:16:00,055\nIt's listing my Hyper-V infrastructure.\n\n302\n00:16:00,055 --> 00:16:04,425\nThose hosts and clusters along with\nmy System Center infrastructure.\n\n303\n00:16:04,425 --> 00:16:05,651\nRight.\nThat's what we manage with\n\n304\n00:16:05,651 --> 00:16:06,223\nupdate baselines.\n\n305\n00:16:06,223 --> 00:16:08,436\nSo, it's not a replacement for WSUS,\n\n306\n00:16:08,436 --> 00:16:11,732\nyou'll still need WSUS to\nmanage the rest of your system.\n\n307\n00:16:11,732 --> 00:16:15,734\nAll right, I called this cluster host,\nso I'm just gonna pick my cluster, and\n\n308\n00:16:15,734 --> 00:16:18,559\nthere's the two nodes that\nare inside of that cluster.\n\n309\n00:16:18,559 --> 00:16:20,190\nSo that's what I'm gonna choose.\n\n310\n00:16:21,650 --> 00:16:26,280\nAnd I'll hit Next, and so there it goes,\nit's set to apply to those guys, and\n\n311\n00:16:26,280 --> 00:16:30,390\nI'll just finish that up, and\nnow I've got an update baseline.\n\n312\n00:16:30,390 --> 00:16:31,455\nVery, very exciting.\n\n313\n00:16:31,455 --> 00:16:34,900\n>> [LAUGH]\n>> I'll have it here in just a moment when\n\n314\n00:16:34,900 --> 00:16:35,820\nthat finishes creating.\n\n315\n00:16:35,820 --> 00:16:36,870\nIt does take it just-\n>> [LAUGH]\n\n316\n00:16:36,870 --> 00:16:39,460\n>> A moment, so we'll give it a second.\n\n317\n00:16:39,460 --> 00:16:43,600\nOnce that's done, we can go and\ncheck the compliance of our servers.\n\n318\n00:16:43,600 --> 00:16:45,040\nThey might already have these updates.\n\n319\n00:16:45,040 --> 00:16:46,660\nIf they do,\nthen there's nothing thing to do.\n\n320\n00:16:47,930 --> 00:16:52,680\nBut if they're missing the updates, we can\napply it through the application of this,\n\n321\n00:16:52,680 --> 00:16:55,760\nand so\nthis is part of automated remediation,\n\n322\n00:16:55,760 --> 00:16:57,780\nwhen the baseline is in\nplace the server is now,\n\n323\n00:16:57,780 --> 00:17:01,430\nchecking to make sure they're compliant,\nif they aren't it brings them compliant.\n\n324\n00:17:01,430 --> 00:17:05,260\nAnd this is now in place forever.\n\n325\n00:17:05,260 --> 00:17:09,020\nIf I add a new node to that cluster,\nit will automatically have this\n\n326\n00:17:09,020 --> 00:17:11,990\nbaseline applied to it cuz I\napplied it to the cluster.\n\n327\n00:17:11,990 --> 00:17:15,070\nSo new nodes that cluster, this baseline\nwill run against them and if they're\n\n328\n00:17:15,070 --> 00:17:17,980\nmissing these updates it will apply them,\nI don't have to worry about it.\n\n329\n00:17:17,980 --> 00:17:18,585\nIt's automatic.\n\n330\n00:17:18,585 --> 00:17:21,710\n>> It really the only thing left at\nthat point is to make sure you keep that\n\n331\n00:17:21,710 --> 00:17:22,540\nbaseline up to date,\n\n332\n00:17:22,540 --> 00:17:25,450\nas new updates come out,\nyou're going to want to decide test them.\n\n333\n00:17:25,450 --> 00:17:27,490\nMake sure that they're appropriate for\nyour environment, and\n\n334\n00:17:27,490 --> 00:17:28,840\nthen add them to your baseline.\n\n335\n00:17:28,840 --> 00:17:29,530\n>> Yeah.\n\n336\n00:17:29,530 --> 00:17:33,770\nAnd we don't even have to tell it do\nto the like moving VMs and stuff.\n\n337\n00:17:33,770 --> 00:17:36,690\nIt knows to do that, and\nit's going to take care of it.\n\n338\n00:17:36,690 --> 00:17:39,480\nSo it shows that I've assigned it to one\nthing, I assigned it to the cluster.\n\n339\n00:17:39,480 --> 00:17:40,960\nNow, the cluster has more than one node.\n\n340\n00:17:40,960 --> 00:17:43,260\nBut the cluster object itself\nis what I applied it to.\n\n341\n00:17:43,260 --> 00:17:45,650\nThat's why it says one,\nand the updates are two.\n\n342\n00:17:45,650 --> 00:17:48,970\nAnd we can come and edit this whenever\nwe need to by going into its Properties.\n\n343\n00:17:48,970 --> 00:17:51,270\nAnd here's where we can start to\nmanipulate those updates again,\n\n344\n00:17:51,270 --> 00:17:52,230\nif we need to.\n\n345\n00:17:52,230 --> 00:17:56,160\nAnd even increase the assignment scope if\nwe have a new cluster we wanna add it too.\n\n346\n00:17:56,160 --> 00:17:59,786\nWe can do that, I shouldn't have\ndone that, now it's thinking.\n\n347\n00:17:59,786 --> 00:18:00,706\n>> [LAUGH]\n>> [LAUGH] So\n\n348\n00:18:00,706 --> 00:18:04,090\nyou want to click assignments, it's now\npolling the environment to see what\n\n349\n00:18:04,090 --> 00:18:07,780\nnew servers I've added, and sometimes that\ntakes more, you want me to ignore that?\n\n350\n00:18:07,780 --> 00:18:08,288\nNo.\n>> No.\n\n351\n00:18:08,288 --> 00:18:10,272\n[LAUGH]\n\n352\n00:18:10,272 --> 00:18:11,387\n>> [LAUGH] So now, I gotta sit and wait.\n\n353\n00:18:11,387 --> 00:18:12,153\nWell, dang it.\n\n354\n00:18:12,153 --> 00:18:12,710\nAll right.\n\n355\n00:18:12,710 --> 00:18:14,773\nWell, while we're waiting on that,\n\n356\n00:18:14,773 --> 00:18:16,795\nthe next step is well, not much.\n\n357\n00:18:16,795 --> 00:18:19,205\nIt's put it in place in and\ntechnically, I could just walk off.\n\n358\n00:18:19,205 --> 00:18:20,645\nAnd at some point in the next day,\n\n359\n00:18:20,645 --> 00:18:22,997\nit's gonna check the servers and\ntake care of it.\n\n360\n00:18:22,997 --> 00:18:27,277\nBut if I want to be certain,\nI can go back to my fabric,\n\n361\n00:18:27,277 --> 00:18:30,607\nI can go back into my servers and\nI can check the compliance.\n\n362\n00:18:30,607 --> 00:18:31,167\nAll right.\n\n363\n00:18:31,167 --> 00:18:34,507\nRemember that scan button up in\nthe toolbar, that I pointed out.\n\n364\n00:18:34,507 --> 00:18:39,045\nWhen you select a host and you hit Scan,\nit will check that host for compliance,\n\n365\n00:18:39,045 --> 00:18:43,133\nand if it's compliant it will just\nshow that in the compliance column.\n\n366\n00:18:43,133 --> 00:18:46,058\nAnd then, if it's not compliant,\nit'll show that.\n\n367\n00:18:46,058 --> 00:18:47,986\nAll right,\nlet's see if it'll let me out of this now.\n\n368\n00:18:47,986 --> 00:18:48,520\nThere we go.\n\n369\n00:18:48,520 --> 00:18:51,153\nAll right.\nSo I'm gonna go back to my fabric.\n\n370\n00:18:51,153 --> 00:18:56,617\nAnd I'll go back up here to my cluster and\nhere's my hosts, and if I come in and\n\n371\n00:18:56,617 --> 00:19:01,480\nI pick some of these hosts which\nsee what it's thinking about.\n\n372\n00:19:01,480 --> 00:19:04,140\nBut if I come in and pick some of these\nhosts, I can hit that Scan button and\n\n373\n00:19:04,140 --> 00:19:07,030\nit'll tell us, whether or\nnot we are compliant.\n\n374\n00:19:07,030 --> 00:19:10,700\nAnd I thought,\nthat column showed up by default, but\n\n375\n00:19:10,700 --> 00:19:13,820\napparently it doesn't,\nthe compliance column.\n\n376\n00:19:13,820 --> 00:19:15,390\nBut it will show up after I run my scans.\n\n377\n00:19:15,390 --> 00:19:20,430\nSo let's go in here and, let's see-\n>> I see it down\n\n378\n00:19:22,220 --> 00:19:23,890\nin the status in the bottom.\n\n379\n00:19:23,890 --> 00:19:25,940\n>> It's kind of flipping\nover here to home.\n\n380\n00:19:25,940 --> 00:19:26,640\nOh, you see it down there?\n\n381\n00:19:26,640 --> 00:19:27,360\nWhere is it down there?\n\n382\n00:19:27,360 --> 00:19:28,150\n>> Bottom right.\n\n383\n00:19:28,150 --> 00:19:30,600\n>> Right there, that big\nCompliance section right there, so\n\n384\n00:19:30,600 --> 00:19:33,850\nI can see pending scan compliance or\nMike can see it, since I didn't.\n\n385\n00:19:33,850 --> 00:19:34,950\n[LAUGH]\n>> [LAUGH]\n\n386\n00:19:34,950 --> 00:19:36,000\n>> But there it is, and\n\n387\n00:19:36,000 --> 00:19:39,230\nit's status is unknown, so\nI'm just selecting the hosts, and\n\n388\n00:19:39,230 --> 00:19:40,460\nI'm going back to my home tab here.\n\n389\n00:19:40,460 --> 00:19:44,430\nSo I can hit the scan button,\nand it's gonna scan those guys.\n\n390\n00:19:44,430 --> 00:19:49,060\nNow, when it find them compliant,\nthere's no action to take.\n\n391\n00:19:49,060 --> 00:19:53,900\nIf it finds them non-compliant we need\nto remediate them, and the remediation,\n\n392\n00:19:53,900 --> 00:19:58,210\nwe can wait and let it do it itself or\nwe can force remediation right there.\n\n393\n00:19:58,210 --> 00:20:02,070\nSo it'll go and take care of applying\nthat, and the rest of it is automated,\n\n394\n00:20:02,070 --> 00:20:05,910\nit will move the VMs, apply the updates,\nreboot the server if necessary,\n\n395\n00:20:05,910 --> 00:20:08,680\nmove the VMs back, it takes care of that.\n\n396\n00:20:08,680 --> 00:20:11,860\n>> And in a cluster like this, it's gonna\ntake care of taking that one node out of\n\n397\n00:20:11,860 --> 00:20:15,350\nthe cluster and doing the updates,\nany reboots necessary for those updates.\n\n398\n00:20:15,350 --> 00:20:18,110\nPut it back in the cluster and\nthen take the next one out basically,\n\n399\n00:20:18,110 --> 00:20:20,430\ndo a rolling update right\nthrough that cluster.\n\n400\n00:20:20,430 --> 00:20:21,000\nAll in some.\n\n401\n00:20:22,000 --> 00:20:26,570\n>> All right, in fact looking at scomo1\nhere, my first one down at the bottom,\n\n402\n00:20:26,570 --> 00:20:27,990\nI see compliance status.\n\n403\n00:20:27,990 --> 00:20:30,060\nIt is compliant.\n\n404\n00:20:30,060 --> 00:20:33,020\nAnd if I take a look at SCDPM\nthat one is compliant also.\n\n405\n00:20:33,020 --> 00:20:37,050\nSo my two nodes are compliant,\nthey're healthy, I'm in business.\n\n406\n00:20:37,050 --> 00:20:41,665\nSo I don't really need to add much more,\nand I'm trying to find that column,\n\n407\n00:20:41,665 --> 00:20:45,573\ncuz I know, I normally have\nthe display for compliance in there.\n\n408\n00:20:45,573 --> 00:20:48,521\nIt's in here somewhere, but\n[CROSSTALK] well, we'll worry about it,\n\n409\n00:20:48,521 --> 00:20:49,660\nit's in it's down there.\n\n410\n00:20:49,660 --> 00:20:52,028\nSo we can see we're compliant and\nwe're healthy.\n\n411\n00:20:52,028 --> 00:20:57,068\nThat's an update baseline,\nand all your really doing is\n\n412\n00:20:57,068 --> 00:21:02,320\nletting SEVMM interact on behalf\nof our servers with WSUS.\n\n413\n00:21:03,500 --> 00:21:06,540\nGives you better control,\nmore stable update application and\n\n414\n00:21:06,540 --> 00:21:10,920\nthe baseline ensures that future\nservers conform to the same rules.\n\n415\n00:21:10,920 --> 00:21:13,343\nAnd if somebody uninstalls an update,\nright?\n\n416\n00:21:13,343 --> 00:21:15,160\n>> Right.\n>> It'll put it back again.\n\n417\n00:21:15,160 --> 00:21:16,904\n>> [LAUGH]\n>> So be aware that it's really going to\n\n418\n00:21:16,904 --> 00:21:17,900\nenforce that baseline.\n\n419\n00:21:17,900 --> 00:21:21,340\nThat's why they call it the baseline.\n\n420\n00:21:21,340 --> 00:21:24,320\nSo that's basically it,\nfor update baselines.\n\n421\n00:21:24,320 --> 00:21:25,660\nDid I leave anything out on that one?\n\n422\n00:21:25,660 --> 00:21:26,400\nI don't think so.\n\n423\n00:21:26,400 --> 00:21:27,030\n>> No, I don't think so.\n\n424\n00:21:27,030 --> 00:21:30,070\nWe mentioned all the different,\nthere's the manage for\n\n425\n00:21:30,070 --> 00:21:33,790\nbasically all of our nodes that\nare part of our RSC suite,\n\n426\n00:21:33,790 --> 00:21:36,680\nour library servers and\nthings like that as well.\n\n427\n00:21:36,680 --> 00:21:38,010\n>> Yeah.\nPretty much,\n\n428\n00:21:38,010 --> 00:21:41,387\nany server that shows up under your fabric\nis something you'll be able to update with\n\n429\n00:21:41,387 --> 00:21:42,780\nthe update baseline.\n\n430\n00:21:42,780 --> 00:21:45,650\nRemember, that your virtual machines\ndon't show up on your fabric cuz\n\n431\n00:21:45,650 --> 00:21:50,000\nthey're actually, tied to the hosts and\nnot to the virtual infrastructure itself.\n\n432\n00:21:50,000 --> 00:21:55,640\nSo it's really just that infrastructure\npiece and all of our SCOM stuff.\n\n433\n00:21:55,640 --> 00:21:58,900\nSo that in a nutshell,\nis an update baseline.\n\n434\n00:21:58,900 --> 00:22:00,780\nWe've got a few more\ntechnologies to talk about.\n\n435\n00:22:00,780 --> 00:22:03,390\nSome of them are Command Line,\nsome of them are GUIs, and\n\n436\n00:22:03,390 --> 00:22:05,470\nwe're gonna get a chance\nto see some other stuff.\n\n437\n00:22:05,470 --> 00:22:07,660\nThis is just the first one,\nand we'll continue with more.\n\n438\n00:22:07,660 --> 00:22:10,350\nBut looking at the clock, we're\na little low on time on this segment.\n\n439\n00:22:10,350 --> 00:22:12,250\n>> All right.\n>> So why don't we stop and take a break.\n\n440\n00:22:12,250 --> 00:22:16,250\nAnd when we get back, we're gonna take\na look at, what have we got next?\n\n441\n00:22:16,250 --> 00:22:17,610\nDesired configuration.\n\n442\n00:22:17,610 --> 00:22:18,394\n>> Yeah.\n\n443\n00:22:18,394 --> 00:22:19,554\n>> So stay tuned.\n\n444\n00:22:19,554 --> 00:22:20,669\nWe'll be back in just a minute.\n\n445\n00:22:20,669 --> 00:22:29,097\n[MUSIC]\n\n446\n00:22:29,097 --> 00:22:29,980\nAll right.\nWelcome back everybody.\n\n447\n00:22:29,980 --> 00:22:32,749\nSo in the last segment we\ngot a chance to look at,\n\n448\n00:22:32,749 --> 00:22:37,510\nthe update baseline functionality in\nSCVMM, which was pretty cool, right?\n\n449\n00:22:37,510 --> 00:22:38,680\n>> I like it.\n\n450\n00:22:38,680 --> 00:22:40,080\n>> But it does have some limitations.\n\n451\n00:22:40,080 --> 00:22:41,640\nThe first limitation\nwe already know about,\n\n452\n00:22:41,640 --> 00:22:46,709\nit only applies to our Hyper-V\nInfrastructure and System Center servers.\n\n453\n00:22:48,390 --> 00:22:51,600\nIt also is just limited to updates.\n\n454\n00:22:51,600 --> 00:22:52,980\n>> Right, are there any Windows updates?\n\n455\n00:22:52,980 --> 00:22:55,610\n>> What if we want to check other\nthings like just configuration values?\n\n456\n00:22:55,610 --> 00:23:00,925\nI want to check the membership of\nthe local administrators group.\n\n457\n00:23:00,925 --> 00:23:05,415\nOr I wanna check for the presence\nof a file or I wanna check for\n\n458\n00:23:05,415 --> 00:23:08,005\nwhether a particular service is\nset to start automatically or not.\n\n459\n00:23:09,225 --> 00:23:12,905\nThose kind of things, the update baseline\ncan't take care of, it's just updates.\n\n460\n00:23:14,175 --> 00:23:21,020\nSo to work around that we have another\ntool that can be equally useful.\n\n461\n00:23:21,020 --> 00:23:24,040\nActually, even more useful cuz it\ndoesn't have those same limitations.\n\n462\n00:23:24,040 --> 00:23:27,480\nAnd it's caused the Desired\nConfiguration Management or DCM.\n\n463\n00:23:28,530 --> 00:23:32,470\nDCM is a part of the System Center\nConfiguration Manager, SCCM.\n\n464\n00:23:32,470 --> 00:23:36,850\nSo if you have the SCCM,\nyou can leverage that DCM.\n\n465\n00:23:36,850 --> 00:23:37,748\nWe'll go acronym-\n>> [LAUGH]\n\n466\n00:23:37,748 --> 00:23:38,800\n>> Crazy here.\n\n467\n00:23:38,800 --> 00:23:42,240\nAnd what the DCM does is very\nsimilar to the update baseline.\n\n468\n00:23:42,240 --> 00:23:46,980\nWe define what are called\nConfiguration Items or CIs.\n\n469\n00:23:46,980 --> 00:23:50,440\nAnd each Configuration Item\nis checking for something.\n\n470\n00:23:50,440 --> 00:23:51,810\nThe presence of a file.\n\n471\n00:23:51,810 --> 00:23:53,810\nThe value of a registry key.\n\n472\n00:23:53,810 --> 00:23:57,140\nThe updates applied to a software package.\n\n473\n00:23:57,140 --> 00:23:58,280\nThe software that is installed.\n\n474\n00:23:58,280 --> 00:24:00,140\nThe rolls of features that are installed.\n\n475\n00:24:00,140 --> 00:24:05,463\nIt checks for these things, and\nalerts us if they're not compliant.\n\n476\n00:24:05,463 --> 00:24:11,087\nThe DCM in the old version of SCCM, under\nSystem Center Configuration Management\n\n477\n00:24:11,087 --> 00:24:13,868\n2007, it would just do detection.\n\n478\n00:24:13,868 --> 00:24:16,172\nIt would just detect that\nthese things were missing.\n\n479\n00:24:16,172 --> 00:24:19,737\nSo a lot of people that are familiar\nwith the DCM- Look at it that way, and\n\n480\n00:24:19,737 --> 00:24:21,382\nthat's only so useful, right?\n\n481\n00:24:21,382 --> 00:24:24,371\nIt alerts you, and\nthen you get to go and fix it.\n\n482\n00:24:24,371 --> 00:24:29,420\nBut in 2012, they've added\nsome new functionality to it.\n\n483\n00:24:29,420 --> 00:24:34,440\nAnd now the DCM is actually\nable to remediate some things.\n\n484\n00:24:34,440 --> 00:24:35,475\nNotice, I say some things.\n\n485\n00:24:35,475 --> 00:24:37,250\nThere's only so many things it can do.\n\n486\n00:24:37,250 --> 00:24:39,880\nIf there's software missing,\nit can deploy it.\n\n487\n00:24:39,880 --> 00:24:42,810\nIf there's a roller feature that's\nnot installed, it can install it.\n\n488\n00:24:42,810 --> 00:24:45,768\nIf there's a registry key that's sent\nto the wrong value, it can put it back.\n\n489\n00:24:45,768 --> 00:24:47,046\nAll right?\n\n490\n00:24:47,046 --> 00:24:50,278\nIf there's a file it's missing,\nit can't do much about that.\n\n491\n00:24:50,278 --> 00:24:51,000\nAll right?\n\n492\n00:24:51,000 --> 00:24:54,860\nSo, there's some things that it can\nremediate, and some things that it can't.\n\n493\n00:24:54,860 --> 00:24:58,430\nBut it's really nice, because when\nyou have it turned on to remediate,\n\n494\n00:24:58,430 --> 00:25:02,180\nit detects that somebody's not compliant,\nand then it fixes the problem.\n\n495\n00:25:02,180 --> 00:25:03,840\nAnd that's pretty awesome.\n\n496\n00:25:03,840 --> 00:25:04,440\nRight?\n\n497\n00:25:04,440 --> 00:25:07,690\nSo maybe we check for that registry key\nthat says the Windows firewall server\n\n498\n00:25:07,690 --> 00:25:09,430\nshould set to start automatically.\n\n499\n00:25:09,430 --> 00:25:10,020\nRight?\n\n500\n00:25:10,020 --> 00:25:12,510\nAnd if somebody has it set to disabled,\nwell,\n\n501\n00:25:12,510 --> 00:25:14,600\nit'll put it back to start automatically.\n\n502\n00:25:14,600 --> 00:25:15,440\nAutomatic remediation.\n\n503\n00:25:16,830 --> 00:25:19,230\nBy default, it's checking your\nsystems every ten minutes.\n\n504\n00:25:19,230 --> 00:25:21,290\nAnd so\nit's looking to see if they conform and\n\n505\n00:25:21,290 --> 00:25:23,580\nyou can always run it on\nyour own if you want.\n\n506\n00:25:23,580 --> 00:25:26,280\nBut it's checking your systems and\nautomatic remediating.\n\n507\n00:25:26,280 --> 00:25:31,610\nThat makes it more powerful than\nthe update baseline, all right?\n\n508\n00:25:31,610 --> 00:25:34,330\nBut, much like WSUS,\n\n509\n00:25:34,330 --> 00:25:39,320\nthe SSCM isn't necessarily aware of\nthe host to virtual machine relationship.\n\n510\n00:25:39,320 --> 00:25:43,200\nAnd so you typically don't wanna use\nthe DCM against your host, but instead,\n\n511\n00:25:43,200 --> 00:25:45,060\nagainst your virtual machines.\n\n512\n00:25:45,060 --> 00:25:49,850\nOr you can use it against your hosts, just\ndon't have it initiate any kind of reboot.\n\n513\n00:25:49,850 --> 00:25:52,240\nMakes a change to the registry key and\nthen leaves it be, and\n\n514\n00:25:52,240 --> 00:25:53,390\nthe next time you reboot it takes effect.\n\n515\n00:25:53,390 --> 00:25:54,360\nThat kind of thing.\n\n516\n00:25:54,360 --> 00:25:57,086\nSo you just have to get\ninvolved a little bit there.\n\n517\n00:25:57,086 --> 00:25:59,840\nBut its built in remediation is pretty\nslick and if you don't like it,\n\n518\n00:25:59,840 --> 00:26:01,750\nyou can always have it\ncall the orchestrator and\n\n519\n00:26:01,750 --> 00:26:04,450\nyou can write whatever you want to\nhappen when somebody's not compliant.\n\n520\n00:26:05,710 --> 00:26:10,200\nSo really powerful functionality and\nsome of the examples that I've used before\n\n521\n00:26:10,200 --> 00:26:14,430\nare things like sequels service packs or\neven updates and service packs for\n\n522\n00:26:14,430 --> 00:26:16,654\nsoftware that's not managed by WSUS,\nright?\n\n523\n00:26:16,654 --> 00:26:17,370\nThird party stuff.\n\n524\n00:26:17,370 --> 00:26:19,290\nYou can push updates for that.\n\n525\n00:26:19,290 --> 00:26:24,010\nRegistry settings, presence of a file,\npushing up certificates,\n\n526\n00:26:24,010 --> 00:26:25,015\nother things like that.\n\n527\n00:26:25,015 --> 00:26:30,032\nThose are all things that we can push,\nusing the desired configuration manager.\n\n528\n00:26:30,032 --> 00:26:31,630\nAll right?\n\n529\n00:26:31,630 --> 00:26:34,770\nSo, lets take a look at the DCM in action.\n\n530\n00:26:34,770 --> 00:26:36,990\nWhat we're looking at here,\nthis is console for\n\n531\n00:26:36,990 --> 00:26:40,880\nthe system center configuration manager,\nand like, I'm just logged in.\n\n532\n00:26:40,880 --> 00:26:41,715\nNothing special here.\n\n533\n00:26:41,715 --> 00:26:45,670\nAnd normally, when we log in,\nwe're actually right here under Assets and\n\n534\n00:26:45,670 --> 00:26:46,280\nCompliance.\n\n535\n00:26:46,280 --> 00:26:48,100\nAnd this is where we get our overview.\n\n536\n00:26:48,100 --> 00:26:51,750\nWe see our users, our devices, all of\nthe different things that we're managing,\n\n537\n00:26:51,750 --> 00:26:53,270\nthe computers that are out there.\n\n538\n00:26:53,270 --> 00:26:56,140\nThis is the SCCM.\n\n539\n00:26:56,140 --> 00:26:56,970\nAll right?\n\n540\n00:26:56,970 --> 00:27:00,780\nAnd we can come in here and we start\nby creating our configuration items\n\n541\n00:27:00,780 --> 00:27:03,110\nwhich are what we're going to check for.\n\n542\n00:27:03,110 --> 00:27:06,690\nAnd then we specify who we're gonna\ncheck against, and we let it ride.\n\n543\n00:27:06,690 --> 00:27:07,790\nThat's how it works.\n\n544\n00:27:07,790 --> 00:27:09,605\n>> Create our rules and we're good to go.\n\n545\n00:27:09,605 --> 00:27:12,030\n>> Yeah, so it's really not that painful.\n\n546\n00:27:12,030 --> 00:27:14,460\nWell, compared to some of the other\nthings that we configure.\n\n547\n00:27:14,460 --> 00:27:15,850\nSo, let's get a chance to see that here.\n\n548\n00:27:15,850 --> 00:27:18,730\nSo, I'm gonna go under my Assets and\nCompliance and\n\n549\n00:27:18,730 --> 00:27:22,520\nin here you'll see the compliance settings\nfolder, so it's kinda obvious where to go.\n\n550\n00:27:22,520 --> 00:27:24,980\nAnd here we've got our\nconfiguration items.\n\n551\n00:27:24,980 --> 00:27:26,207\nAnd our configuration baselines.\n\n552\n00:27:26,207 --> 00:27:27,690\nAll right?\n\n553\n00:27:27,690 --> 00:27:29,560\nThat's kind of like our update baselines.\n\n554\n00:27:29,560 --> 00:27:33,080\nWe're saying what configuration\nitems apply to what systems.\n\n555\n00:27:33,080 --> 00:27:36,210\nAnd so I can go here under configuration\nitems and I can start to define those.\n\n556\n00:27:36,210 --> 00:27:39,370\nNow, you may or\nmay not already have some of these.\n\n557\n00:27:39,370 --> 00:27:43,720\nAs you import things like management\npacks into SCOM things get created.\n\n558\n00:27:43,720 --> 00:27:47,160\nWhen you install SCCM some\nthings get created there too.\n\n559\n00:27:47,160 --> 00:27:48,640\nSo you may already have some.\n\n560\n00:27:48,640 --> 00:27:52,070\nAnd you'll see some of the ones that\nI've got here like Internet Explorer 10,\n\n561\n00:27:52,070 --> 00:27:54,740\ncomputer security settings and nine.\n\n562\n00:27:54,740 --> 00:27:55,610\nWindows 7.\n\n563\n00:27:55,610 --> 00:27:59,550\nSo several different ones in here\nthat might be perfectly fine for\n\n564\n00:27:59,550 --> 00:28:02,110\nmy needs or for\nwhatever it is that I've got.\n\n565\n00:28:02,110 --> 00:28:04,530\nSo you can always recycle\nthese if you want.\n\n566\n00:28:04,530 --> 00:28:06,910\nOr you can create your own.\n\n567\n00:28:06,910 --> 00:28:09,670\nIf you take a look at, we'll just\npick this one as an example here.\n\n568\n00:28:09,670 --> 00:28:13,428\nWindows Server 2012\nHyper-V Security Systems Services.\n\n569\n00:28:13,428 --> 00:28:14,650\nAll right?\n\n570\n00:28:14,650 --> 00:28:19,380\nIf I pull up the properties on that and\ntake a look at it,\n\n571\n00:28:19,380 --> 00:28:24,560\nit's gonna have a list of settings that\nit's verifying as part of this CI.\n\n572\n00:28:24,560 --> 00:28:28,680\nAnd you'll find those here under Settings.\n\n573\n00:28:28,680 --> 00:28:30,470\nSo here's the settings that\nit's checking for, and\n\n574\n00:28:30,470 --> 00:28:32,980\nyou'll see most of these\nare registry values, right?\n\n575\n00:28:32,980 --> 00:28:38,600\nIt's looking to see if these values are\npresent and set to a certain entry, right?\n\n576\n00:28:38,600 --> 00:28:40,880\nNow, we've got this inherited.\n\n577\n00:28:40,880 --> 00:28:44,250\nWhen you create these you can\ncreate nested environments.\n\n578\n00:28:44,250 --> 00:28:48,120\nAnd so you can have settings at\na parent level and at a child level.\n\n579\n00:28:48,120 --> 00:28:50,555\nThis one is at the parent level so\neverything's set to no.\n\n580\n00:28:50,555 --> 00:28:51,890\nRight?\n\n581\n00:28:51,890 --> 00:28:54,620\nSo these are all the different\nthings that it is checking for\n\n582\n00:28:54,620 --> 00:28:56,430\nthis Hyper-V Security System.\n\n583\n00:28:56,430 --> 00:29:00,390\nAnd if we edit one of those we can take a\nlook at it, just this registry value here.\n\n584\n00:29:00,390 --> 00:29:02,900\nAnd it'll show, here's the registry key.\n\n585\n00:29:02,900 --> 00:29:05,500\nAnd here's the value\nthat it's looking for.\n\n586\n00:29:05,500 --> 00:29:09,920\nSo it's basically checking on this one\nto check for the browser service and\n\n587\n00:29:09,920 --> 00:29:11,990\nmake sure it's set to start.\n\n588\n00:29:11,990 --> 00:29:15,480\nIf somebody's changed it to disable,\nthen they're not compliant and\n\n589\n00:29:15,480 --> 00:29:17,350\nwe need to flip it back to start, right?\n\n590\n00:29:17,350 --> 00:29:20,792\nSo this is the check that we're making.\n\n591\n00:29:20,792 --> 00:29:22,400\nAll right?\n\n592\n00:29:22,400 --> 00:29:24,150\nAnd up here,\nyou'll see the compliance rule.\n\n593\n00:29:24,150 --> 00:29:26,560\nThis is just where it gives us\nthe little summary here, and\n\n594\n00:29:26,560 --> 00:29:30,615\nit just shows computer browser,\nit's checking for a condition, and\n\n595\n00:29:30,615 --> 00:29:34,205\nthen whether or\nnot we want to remediate it.\n\n596\n00:29:34,205 --> 00:29:34,770\nOkay?\n\n597\n00:29:34,770 --> 00:29:39,400\nNow notice here that it's got these\ndifferent states and equals four,\n\n598\n00:29:39,400 --> 00:29:41,870\nthat means that we are set to start.\n\n599\n00:29:41,870 --> 00:29:45,440\nThere's four different states for\na service cuz you have disabled,\n\n600\n00:29:45,440 --> 00:29:49,160\nstart immediately, start delayed,\nand start automatically.\n\n601\n00:29:49,160 --> 00:29:51,380\nSo those are kinda our different ones.\n\n602\n00:29:51,380 --> 00:29:55,180\nAnd it's set to four which is\nthe one that we want them to start.\n\n603\n00:29:55,180 --> 00:29:58,220\nAnything else, right, so\na count greater than zero.\n\n604\n00:29:58,220 --> 00:30:01,100\nWe need to figure out what to do and\nthis one is set to remediate no.\n\n605\n00:30:01,100 --> 00:30:01,660\nRight.\n\n606\n00:30:01,660 --> 00:30:05,780\nThat means if somebody isn't matching\nthis we'll flag them as non-compliant and\n\n607\n00:30:05,780 --> 00:30:06,810\nwe won't do anything about it.\n\n608\n00:30:06,810 --> 00:30:07,940\n>> Right.\n>> Right.\n\n609\n00:30:07,940 --> 00:30:10,470\nOn a mission critical server\nyou might want that if you're\n\n610\n00:30:10,470 --> 00:30:13,210\nworried about the ramifications of what\nwould happen if that changed in the middle\n\n611\n00:30:13,210 --> 00:30:14,570\nof the business day.\n\n612\n00:30:14,570 --> 00:30:17,410\nBut you could also argue if it's\na mission critical server and\n\n613\n00:30:17,410 --> 00:30:19,910\nit's not configured right,\nyou want that to fix right away.\n\n614\n00:30:19,910 --> 00:30:20,990\n>> Right.\n>> Right.\n\n615\n00:30:20,990 --> 00:30:25,200\nSo, you need to understand what will\nhappen when that change occurs.\n\n616\n00:30:25,200 --> 00:30:26,380\nWhen it fixes the problem.\n\n617\n00:30:26,380 --> 00:30:29,210\nAnd as long as you're okay\nwith that you can edit it and\n\n618\n00:30:29,210 --> 00:30:32,490\nyou can change that\nremediate option to yes.\n\n619\n00:30:32,490 --> 00:30:33,230\nAll right?\n\n620\n00:30:33,230 --> 00:30:35,260\nNow in this one let's see here.\n\n621\n00:30:35,260 --> 00:30:36,430\nNon-compliant severity.\n\n622\n00:30:36,430 --> 00:30:38,459\nActually this one doesn't\nhave the remediation option.\n\n623\n00:30:39,460 --> 00:30:42,500\nNot everyone has the remediation option,\nso\n\n624\n00:30:42,500 --> 00:30:44,970\nit's normally right down here\nin this little check mark.\n\n625\n00:30:44,970 --> 00:30:46,720\nIf you've chosen something\nlike a missing file,\n\n626\n00:30:46,720 --> 00:30:49,070\nyou may not have that check\nmark to be able to apply.\n\n627\n00:30:49,070 --> 00:30:54,010\nAnd in this case, we're basically\nsaying the registry value exists\n\n628\n00:30:54,010 --> 00:30:57,400\nthe following number of, oh, that's cuz\nthey're just checking to make sure that it\n\n629\n00:30:57,400 --> 00:31:00,360\nexists more than once or\nyeah, if it's missing.\n\n630\n00:31:00,360 --> 00:31:04,410\nSo if we say the registry\nvalue must exist.\n\n631\n00:31:04,410 --> 00:31:06,130\nWell even that we wouldn't\nbe able to remediate.\n\n632\n00:31:06,130 --> 00:31:06,830\nIt would be the value.\n\n633\n00:31:06,830 --> 00:31:09,000\nSo let's just take this one and edit it.\n\n634\n00:31:09,000 --> 00:31:10,200\nAnd yeah, here we go.\n\n635\n00:31:10,200 --> 00:31:12,890\nSee how this one we're actually\nsetting that value to something.\n\n636\n00:31:12,890 --> 00:31:17,680\nIf computer browser equals four,\nthen we're happy.\n\n637\n00:31:17,680 --> 00:31:19,060\nIf it equals anything else, we're not.\n\n638\n00:31:19,060 --> 00:31:24,410\nAnd if I choose this remediate\nnon-compliant rules when supported,\n\n639\n00:31:24,410 --> 00:31:27,160\nif somebody's not set to a four,\nif they're set to zero, one, two, or\n\n640\n00:31:27,160 --> 00:31:30,140\nthree, then we'll make it a four.\n\n641\n00:31:30,140 --> 00:31:32,040\nRight?\nSo we'll make it that value, and\n\n642\n00:31:32,040 --> 00:31:33,050\nthat'll fix it.\n\n643\n00:31:33,050 --> 00:31:37,090\nAnd we've got report non-compliance if\nthis setting instance is not found.\n\n644\n00:31:37,090 --> 00:31:41,810\nIf the registry key is completely missing,\nwe can go ahead and report that too.\n\n645\n00:31:41,810 --> 00:31:44,600\nSo we've got a few different choices\nof how we wanna handle that, but\n\n646\n00:31:44,600 --> 00:31:46,630\nthat's the automatic remediation piece.\n\n647\n00:31:49,380 --> 00:31:51,321\nNow, let me show you creating one\nof these from scratch though.\n\n648\n00:31:51,321 --> 00:31:54,350\nAs we've kind of seen that,\nbut if I go in and\n\n649\n00:31:54,350 --> 00:31:58,761\na I do a new CI,\nwe'll get a drop-down box.\n\n650\n00:31:58,761 --> 00:32:01,590\nIt let's pick from all the different\nthings that we wanna check.\n\n651\n00:32:01,590 --> 00:32:04,710\nSo we give it a name, and so\nmaybe I want to do the presence of a file.\n\n652\n00:32:06,020 --> 00:32:08,492\nSo I'm looking for a particular file\nto be present on the hard drive.\n\n653\n00:32:08,492 --> 00:32:12,038\nAnd we'll say this is Windows, but\nyou'll see you've got Mac OS and\n\n654\n00:32:12,038 --> 00:32:14,989\nmobile device you can pick from,\nso I'm cool with that.\n\n655\n00:32:14,989 --> 00:32:16,620\nAnd I'll hit next.\n\n656\n00:32:16,620 --> 00:32:19,865\nI pick my platforms, well,\nwe'll just check them all.\n\n657\n00:32:19,865 --> 00:32:23,464\nAnd then I specify the setting.\n\n658\n00:32:23,464 --> 00:32:27,030\nNow the setting that I wanna look for\nis the presence of the file.\n\n659\n00:32:27,030 --> 00:32:31,660\nAnd so I'll hit New, and\nhere's where I get to set that up.\n\n660\n00:32:31,660 --> 00:32:35,370\nAnd this should look similar to that other\nscreen that we saw just a moment ago.\n\n661\n00:32:35,370 --> 00:32:38,600\nIt defaults to Registry Value cuz that's\nwhat we're normally looking for, but\n\n662\n00:32:38,600 --> 00:32:39,340\nwe can change that.\n\n663\n00:32:39,340 --> 00:32:42,310\nAnd here you'll see we can\ndo Active Directory Queries.\n\n664\n00:32:42,310 --> 00:32:45,680\nWe can do Assembly,\nwe can do File System checks.\n\n665\n00:32:45,680 --> 00:32:49,450\nIIS Metabase, registry keys,\nscripts, SQL queries.\n\n666\n00:32:49,450 --> 00:32:53,430\nWe can do all sorts of\ndifferent things for our check.\n\n667\n00:32:53,430 --> 00:32:56,030\nI wanna do File System, okay?\n\n668\n00:32:56,030 --> 00:33:00,370\nAnd the rest of your screen will change\nto reflect whatever option you chose.\n\n669\n00:33:00,370 --> 00:33:03,910\nAnd so I'm looking for either a file or\na folder, I'll say a File, and\n\n670\n00:33:03,910 --> 00:33:05,170\nI can specify a path.\n\n671\n00:33:05,170 --> 00:33:09,100\nI'll just do C:\\ and I'm looking for\na file called test.txt.\n\n672\n00:33:09,100 --> 00:33:14,170\nI expect that file to be in the root\ndrive of all of my computers, all right.\n\n673\n00:33:14,170 --> 00:33:15,960\nSo I can look for that and check.\n\n674\n00:33:17,100 --> 00:33:20,390\nAnd under compliance rules, oops,\nI've got to give it a name.\n\n675\n00:33:20,390 --> 00:33:23,720\nSo I'll call this test.txt.\n\n676\n00:33:23,720 --> 00:33:26,660\nUnder compliance rules, where I can\nstate what other actions to take and\n\n677\n00:33:26,660 --> 00:33:27,720\nwhether I want to remediate.\n\n678\n00:33:27,720 --> 00:33:31,990\nNow, if I'm missing the file,\nit can't create the file for me.\n\n679\n00:33:31,990 --> 00:33:34,160\nIt can create registry settings and\nstuff, but it can't make a file.\n\n680\n00:33:34,160 --> 00:33:35,600\nIt doesn't know what to put in it.\n\n681\n00:33:35,600 --> 00:33:38,540\nSo, I don't have a whole lot of\nremediation options in here.\n\n682\n00:33:38,540 --> 00:33:40,740\nWhen I go into New, here's my new rule.\n\n683\n00:33:40,740 --> 00:33:44,800\nI can specify the Value and\njust basic things.\n\n684\n00:33:44,800 --> 00:33:50,520\nI can check for the Date Modified on that\nfile, the size of the file, file version.\n\n685\n00:33:50,520 --> 00:33:53,720\nThere's all sorts of stuff that\nI can check in addition to just\n\n686\n00:33:53,720 --> 00:33:54,980\nthe presence of the file.\n\n687\n00:33:54,980 --> 00:33:58,750\n>> To see if somebody has modified or\nmade some inappropriate changes to it.\n\n688\n00:33:58,750 --> 00:33:59,490\n>> Yeah.\n\n689\n00:33:59,490 --> 00:34:01,950\nSo on the other one,\nthe example I showed before,\n\n690\n00:34:01,950 --> 00:34:04,810\nthe first tab was checking to make sure\nthat the registry key was there, and\n\n691\n00:34:04,810 --> 00:34:07,640\nthe second tab was checking\nthe registry key's value.\n\n692\n00:34:07,640 --> 00:34:11,260\nSo my first tab here identified\na check that the file was there, and\n\n693\n00:34:11,260 --> 00:34:16,080\nnow with this second one,\nI'm picking information about it, right.\n\n694\n00:34:16,080 --> 00:34:20,570\nSo maybe I expect to have some kind of\npermissions assigned to it or whatever.\n\n695\n00:34:20,570 --> 00:34:24,940\nAnd so I can check the permissions and\nI can come in here and I can say that I\n\n696\n00:34:24,940 --> 00:34:30,020\nexpect it to be everyone, read only.\n\n697\n00:34:30,020 --> 00:34:32,361\nOh it won't let me do everyone, will it?\n\n698\n00:34:32,361 --> 00:34:33,180\nLet's just go.\n\n699\n00:34:33,180 --> 00:34:34,760\n>> Out of your domain.\n\n700\n00:34:34,760 --> 00:34:36,010\n>> Yeah.\n\n701\n00:34:36,010 --> 00:34:39,030\nYou know actually,\ndo I even remember what my domain name is?\n\n702\n00:34:39,030 --> 00:34:41,790\nThat's, that'll be problem number one,\nhere.\n\n703\n00:34:41,790 --> 00:34:44,900\nLet's figure out what my domain\nname is here real quick.\n\n704\n00:34:44,900 --> 00:34:48,275\nOur domain is contoso.com.\n\n705\n00:34:48,275 --> 00:34:54,910\nSo, we'll go back here, and\nwe'll say contoso/authenticatedusers.\n\n706\n00:34:54,910 --> 00:34:56,510\nAnd I'll say Allow.\n\n707\n00:34:56,510 --> 00:34:59,060\nAnd, I'm gonna make sure\nthat authenticated users\n\n708\n00:34:59,060 --> 00:35:02,420\nare allowed Read permissions on this file,\nright?\n\n709\n00:35:02,420 --> 00:35:03,500\nThat's what I'm looking for.\n\n710\n00:35:03,500 --> 00:35:07,340\nAnd if I say Exclusive, that means these\nare the only permissions on the file.\n\n711\n00:35:07,340 --> 00:35:11,940\nIf I say Nonexclusive that means it\ncould have other permissions too, but\n\n712\n00:35:11,940 --> 00:35:13,990\nI need to see at least this basic one,\nall right.\n\n713\n00:35:15,570 --> 00:35:19,660\nAnd notice I don't have the option\nto bring it into compliance if it\n\n714\n00:35:19,660 --> 00:35:20,980\nisn't already.\n\n715\n00:35:20,980 --> 00:35:23,990\nI can choose to report noncompliance,\nbut that's about it.\n\n716\n00:35:23,990 --> 00:35:27,900\nAnd then I can pick the severity\nof that alert, if it's not set.\n\n717\n00:35:27,900 --> 00:35:31,000\nIs it a warning, critical, critical event?\n\n718\n00:35:31,000 --> 00:35:33,120\nI might just do a warning, right.\n\n719\n00:35:33,120 --> 00:35:35,930\nMaybe this is my simple way of tracking\n\n720\n00:35:35,930 --> 00:35:38,832\nwhether a computer is actually one\nof my company issued computers.\n\n721\n00:35:38,832 --> 00:35:41,830\nIf it's a company issued computer, maybe\nI put a file in a directory with certain\n\n722\n00:35:41,830 --> 00:35:44,390\npermissions, and that's how I identify it.\n\n723\n00:35:44,390 --> 00:35:47,818\nSo, it's not a great way to do it,\ncuz people could copy the file, but\n\n724\n00:35:47,818 --> 00:35:52,450\nthis might be one step of a multi step way\nof verifying computers are mine, right.\n\n725\n00:35:52,450 --> 00:35:56,202\nSo you can define that stuff in here, you\nset it however you want, some will have\n\n726\n00:35:56,202 --> 00:36:00,304\nthe option to remediate, and there's our\nautomatic remediation, and some won't.\n\n727\n00:36:00,304 --> 00:36:03,880\nWith those,\nit would require manual intervention.\n\n728\n00:36:03,880 --> 00:36:05,284\nAll right.\n\n729\n00:36:05,284 --> 00:36:09,072\nOnce that's defined, right, so\nhere's my compliance rule, and\n\n730\n00:36:09,072 --> 00:36:12,208\nwe get our little summary,\nand we finish up from there.\n\n731\n00:36:12,208 --> 00:36:14,890\nOnce it's defined,\nit's now a part of the system.\n\n732\n00:36:14,890 --> 00:36:16,660\nIt's got a configuration item, a CI.\n\n733\n00:36:16,660 --> 00:36:19,890\nAnd we just tell it what\nservice to apply that to.\n\n734\n00:36:19,890 --> 00:36:22,440\nSo that's kind of our last step\n\n735\n00:36:23,550 --> 00:36:27,095\nin applying the desired\nconfiguration manager.\n\n736\n00:36:27,095 --> 00:36:29,875\n>> It's nice that those are defined\nindependently cuz that gives us that\n\n737\n00:36:29,875 --> 00:36:30,585\nreusability.\n\n738\n00:36:30,585 --> 00:36:34,845\nI might have some that I wanna\nreuse on different rules and\n\n739\n00:36:34,845 --> 00:36:37,065\napply to different servers, and I don't\nhave to create it two or three times.\n\n740\n00:36:38,785 --> 00:36:42,475\n>> Yeah, and so once that's done,\njust like with our update baselines,\n\n741\n00:36:42,475 --> 00:36:44,213\nhere you've got configuration baselines.\n\n742\n00:36:44,213 --> 00:36:47,885\nAnd here's where you can define your\nbaseline, and you'll see the automatic\n\n743\n00:36:47,885 --> 00:36:51,840\nones that they've made, or\nyou can create your own custom ones.\n\n744\n00:36:51,840 --> 00:36:53,422\nAnd so we can come in and\nwhip up a new baseline.\n\n745\n00:36:53,422 --> 00:36:57,560\nAnd guess I don't get a button there,\nI can use this one.\n\n746\n00:36:57,560 --> 00:36:59,920\nSo I'll create a configuration baseline.\n\n747\n00:36:59,920 --> 00:37:01,090\nAnd I'll whip one up, and\n\n748\n00:37:01,090 --> 00:37:06,135\nyou Add right here the configuration\nitems that you want to deal with, right.\n\n749\n00:37:06,135 --> 00:37:08,845\nSo you also see software\nupdates right there.\n\n750\n00:37:08,845 --> 00:37:12,355\nSoftware updates that we can do,\nour regular Windows updates, too.\n\n751\n00:37:12,355 --> 00:37:13,975\nConfiguration baselines.\n\n752\n00:37:13,975 --> 00:37:15,925\nYou can actually nest them together, and\n\n753\n00:37:15,925 --> 00:37:18,695\nthat's where your parent-child,\nyour inherited settings start to come in.\n\n754\n00:37:18,695 --> 00:37:22,205\nAnd I can bring in my configuration items,\nand I just go through and I pick.\n\n755\n00:37:22,205 --> 00:37:25,390\nAnd, you know,\nI really don't remember what I named mine.\n\n756\n00:37:25,390 --> 00:37:26,644\n>> Test.txt?\n\n757\n00:37:28,990 --> 00:37:30,900\n>> Presence of a file, there we go.\n\n758\n00:37:30,900 --> 00:37:31,640\nSo I can add that one in.\n\n759\n00:37:31,640 --> 00:37:34,110\nI can pick other things, too,\nif there was something in particular.\n\n760\n00:37:34,110 --> 00:37:39,080\nThere was that Hyper-V security\nsettings one, wherever that went.\n\n761\n00:37:39,080 --> 00:37:41,760\nSo you just go through and\nyou pick whatever it is that you need.\n\n762\n00:37:41,760 --> 00:37:42,410\nWe'll add those in.\n\n763\n00:37:43,680 --> 00:37:48,880\nAnd, so now those, maybe this is\ngoing to be my standard DNS server.\n\n764\n00:37:51,330 --> 00:37:52,800\nAll right.\n\n765\n00:37:52,800 --> 00:37:56,850\nSo we can define those settings right\nthere and now I've got my baseline and\n\n766\n00:37:56,850 --> 00:38:00,640\nI just need to assign servers to\nthe baseline and they'll start to check.\n\n767\n00:38:00,640 --> 00:38:02,140\nIt's gonna check routinely and\n\n768\n00:38:02,140 --> 00:38:04,710\nautomatically, it's gonna make\nsure our systems are compliant.\n\n769\n00:38:04,710 --> 00:38:06,700\nIf they aren't,\nwe'll get a warning, right?\n\n770\n00:38:06,700 --> 00:38:10,670\nWe'll see that in SCOM and\nthe Service Manager if we're using it.\n\n771\n00:38:10,670 --> 00:38:14,560\nAnd if we've got remediation\nturned on it'll fix the problem.\n\n772\n00:38:14,560 --> 00:38:17,350\nSo we'll have a message, we'll have\nan event that says it was fixed.\n\n773\n00:38:17,350 --> 00:38:19,520\nBut we'll also know that it\nhas indeed been fixed, right.\n\n774\n00:38:21,190 --> 00:38:23,161\nSo pretty straightforward,\n\n775\n00:38:23,161 --> 00:38:28,365\nnot too much different than the update\nbaselines that we saw before.\n\n776\n00:38:28,365 --> 00:38:31,005\nAnd there is my baseline right there.\n\n777\n00:38:31,005 --> 00:38:33,895\nAnd I can see that I've got this\ncompliance, non-compliance, and\n\n778\n00:38:33,895 --> 00:38:34,405\nfailure account.\n\n779\n00:38:34,405 --> 00:38:37,875\nIt's all 0 right now because I\ndon't have anybody applied to it.\n\n780\n00:38:37,875 --> 00:38:42,445\nBut you can pull up the members,\nsee who it applies to, slowly but surely.\n\n781\n00:38:42,445 --> 00:38:46,061\nAnd then you can add additional\npeople to it if necessary.\n\n782\n00:38:46,061 --> 00:38:50,610\nSo, right now there's the numbers which\nare just the configuration items, and\n\n783\n00:38:50,610 --> 00:38:52,490\nnow I need to go and\nstart to deal with it.\n\n784\n00:38:52,490 --> 00:38:55,760\nSo, I would start to create collections\nand attach it to a collection.\n\n785\n00:38:55,760 --> 00:38:58,800\nSo I'd have a collection that contained\nall my DNS servers, and apply it there.\n\n786\n00:39:00,050 --> 00:39:02,780\nSo, desired configuration\nmanager pretty easy to use.\n\n787\n00:39:02,780 --> 00:39:10,160\nReally like a sister product to the update\nbaselines we saw in the first segment.\n\n788\n00:39:10,160 --> 00:39:10,730\n>> Right.\n\n789\n00:39:10,730 --> 00:39:13,280\n>> Big caveat though because some of you\nhave worked with previous versions of\n\n790\n00:39:13,280 --> 00:39:13,840\nSystem Center.\n\n791\n00:39:13,840 --> 00:39:14,970\nJust remember,\n\n792\n00:39:14,970 --> 00:39:20,050\nin System Center Configuration Manager\n2007 that Remediate option wasn't there.\n\n793\n00:39:20,050 --> 00:39:21,510\nSo it just did detection.\n\n794\n00:39:21,510 --> 00:39:24,450\nWe still have that functionality,\nbut they've added remediation.\n\n795\n00:39:24,450 --> 00:39:29,060\nAll right, so that's about it for\nthe desired configuration manager and\n\n796\n00:39:29,060 --> 00:39:31,280\nthat's a pretty good spot for\nus to stop there.\n\n797\n00:39:31,280 --> 00:39:35,090\nWe've got two more systems that we're\ngonna be talking about for automation.\n\n798\n00:39:35,090 --> 00:39:37,130\nBut for right now,\nlet's stop and take a break.\n\n799\n00:39:37,130 --> 00:39:40,920\nWhen we get back, we're gonna\ndive into dynamic optimization,\n\n800\n00:39:40,920 --> 00:39:42,180\nwhich is one of my favorites.\n\n801\n00:39:42,180 --> 00:39:44,839\nSo we'll get a chance to\nsee that in just a few.\n\n802\n00:39:44,839 --> 00:39:48,592\n[SOUND] All right,\n\n803\n00:39:48,592 --> 00:39:54,103\nwelcome back everybody.\n\n804\n00:39:54,103 --> 00:39:58,020\nSo, in this segment, we're gonna\ncontinue with our automated remediation,\n\n805\n00:39:58,020 --> 00:40:02,760\nand we're going to talk about some more\ntechnologies back in SCVMM, right.\n\n806\n00:40:02,760 --> 00:40:06,130\nWe started in SCVMM with\nthe update baselines, and\n\n807\n00:40:06,130 --> 00:40:08,930\nwe kinda moved over to SCCM, and\nnow we're going back to SCVMM.\n\n808\n00:40:08,930 --> 00:40:10,220\nSo, I don't know, it's kind of all over.\n\n809\n00:40:10,220 --> 00:40:11,603\nBut this is how\nthe objectives were written.\n\n810\n00:40:11,603 --> 00:40:15,632\nSo, the next thing that we're gonna talk\nabout is actually one that I don't like\n\n811\n00:40:15,632 --> 00:40:16,830\nmuch at all, which is.\n\n812\n00:40:16,830 --> 00:40:18,653\n>> [LAUGH]\n>> Yeah, I know,\n\n813\n00:40:18,653 --> 00:40:19,664\nit's a great way to start this segment.\n\n814\n00:40:19,664 --> 00:40:25,218\nThe SCVMM can respond and react to\na lot of different situations based\n\n815\n00:40:25,218 --> 00:40:31,746\non information it gets from SCOM, from\nthe Systems Center Operations Manager.\n\n816\n00:40:31,746 --> 00:40:35,106\nSo if you have both\nthe Virtual Machine Manager and\n\n817\n00:40:35,106 --> 00:40:39,110\nthe Operations Manager,\nthey can work together, right?\n\n818\n00:40:39,110 --> 00:40:42,460\nWonder twin powers unite, and\nthey can work together, and\n\n819\n00:40:42,460 --> 00:40:45,320\nactually do all sorts\nof really cool stuff.\n\n820\n00:40:45,320 --> 00:40:46,150\nNow this is not new.\n\n821\n00:40:46,150 --> 00:40:47,840\nIt's been around in Systems Center for\nawhile.\n\n822\n00:40:47,840 --> 00:40:51,510\nIt's been around in Systems Center\nVirtual Machine Manager for a while.\n\n823\n00:40:51,510 --> 00:40:56,970\nAnd the way it worked is the SCVMM would\nwatch the performance counters in SCOM and\n\n824\n00:40:56,970 --> 00:40:57,980\nit would look at the host.\n\n825\n00:40:57,980 --> 00:41:02,190\nAnd if it saw a host getting really busy,\nit would look at the VMs and\n\n826\n00:41:02,190 --> 00:41:06,860\nit would figure out where to move them to\nbalance out your resource utilization.\n\n827\n00:41:06,860 --> 00:41:09,599\nAnd it did a really good job of it.\n\n828\n00:41:09,599 --> 00:41:13,900\nThe main problem with it\nwas it required SCOM.\n\n829\n00:41:13,900 --> 00:41:18,490\n[LAUGH] So the SCVMM by itself\nreally couldn't make any decisions.\n\n830\n00:41:18,490 --> 00:41:20,020\nIt required SCOM.\n\n831\n00:41:20,020 --> 00:41:24,590\nSo when you deployed the SCVMM by default,\nthis functionality was turned off.\n\n832\n00:41:24,590 --> 00:41:28,606\nAnd it was hidden under some menus\nthat were called PRO or P-R-O,\n\n833\n00:41:28,606 --> 00:41:30,750\nthese were called PRO Tips.\n\n834\n00:41:30,750 --> 00:41:35,670\nAnd PRO, that just stands for\nthe Performance and Resource Optimization.\n\n835\n00:41:35,670 --> 00:41:37,792\nPerformance and\nResource Optimization tips.\n\n836\n00:41:37,792 --> 00:41:40,490\nAnd so you'd integrate with SCOM,\nand as soon as you did,\n\n837\n00:41:40,490 --> 00:41:42,200\nthat would enable PRO Tips.\n\n838\n00:41:42,200 --> 00:41:44,830\nAnd then any time you created\na new virtual machine,\n\n839\n00:41:44,830 --> 00:41:48,060\nit would give you these great\nrecommendations on where to put it.\n\n840\n00:41:48,060 --> 00:41:51,290\nOr any time your servers got bogged down,\nit would look at it and\n\n841\n00:41:51,290 --> 00:41:54,000\nfigure out the problem, and start to\nshift things around to correct for it.\n\n842\n00:41:54,000 --> 00:41:58,170\nAnd it worked really well,\nif you had both technologies.\n\n843\n00:41:58,170 --> 00:42:00,000\nSo, that functionality is still there.\n\n844\n00:42:00,000 --> 00:42:02,810\nIf you rely on PRO, it's still there.\n\n845\n00:42:02,810 --> 00:42:05,240\nBut Microsoft acknowledged\nthat it wasn't the greatest,\n\n846\n00:42:05,240 --> 00:42:08,240\nbecause it had these two\ndifferent systems interacting, and\n\n847\n00:42:08,240 --> 00:42:11,075\nit's always more efficient to\nhave stuff inside of one system.\n\n848\n00:42:11,075 --> 00:42:16,590\nSo starting with System Center 2012,\nor SCVMM 2012, really,\n\n849\n00:42:16,590 --> 00:42:21,770\nwe've got a new system called\nDynamic Optimization that is\n\n850\n00:42:21,770 --> 00:42:28,500\nbuilt right into SCVMM and does the same\nthing as PRO, but doesn't require SCOM.\n\n851\n00:42:30,010 --> 00:42:35,250\nDynamic Optimization, or DO,\nis the replacement for PRO, all right?\n\n852\n00:42:35,250 --> 00:42:37,476\nSo the old PRO Tips,\nthat's exactly what it is,\n\n853\n00:42:37,476 --> 00:42:39,330\nthe old PRO Tips, they're going away.\n\n854\n00:42:39,330 --> 00:42:41,460\nIt's still here for\nbackwards compatibility, though.\n\n855\n00:42:41,460 --> 00:42:43,190\nSo if you rely on it, it's there.\n\n856\n00:42:43,190 --> 00:42:46,860\nBut if you're doing a new deployment, DO\nis your new choice, your new way to do it,\n\n857\n00:42:46,860 --> 00:42:48,459\nand it's significantly\neasier to deal with.\n\n858\n00:42:49,540 --> 00:42:52,620\nBut let's just kinda walk\nthrough the paces of both.\n\n859\n00:42:52,620 --> 00:42:56,650\nI do wanna show you guys how to activate\nPRO in case you do need to do that.\n\n860\n00:42:56,650 --> 00:42:58,740\nYou likely won't on the exam.\n\n861\n00:42:58,740 --> 00:43:00,420\nOn the exam objectives,\nwell, they do call out.\n\n862\n00:43:00,420 --> 00:43:05,200\nThey say, integrate the SCVMM\nwith the Operations Manager.\n\n863\n00:43:05,200 --> 00:43:07,330\nAnd what they're talking\nabout is enabling PRO Tips.\n\n864\n00:43:07,330 --> 00:43:09,040\nSo, how do we go about doing that.\n\n865\n00:43:09,040 --> 00:43:10,481\nWell let me show you how.\n\n866\n00:43:10,481 --> 00:43:13,640\nStep one, you have an operations manager.\n\n867\n00:43:13,640 --> 00:43:15,960\nYou do need to have\nthe Systems Center Operations Manager.\n\n868\n00:43:15,960 --> 00:43:17,570\nSo we gotta have that.\n\n869\n00:43:17,570 --> 00:43:18,840\nI do.\n\n870\n00:43:18,840 --> 00:43:20,340\nThen we've gotta have an SCVMM.\n\n871\n00:43:20,340 --> 00:43:24,235\nIf we're gonna integrate the two systems,\nwe gotta have the two systems.\n\n872\n00:43:24,235 --> 00:43:26,275\n[LAUGH] Hopefully, this isn't shocking.\n\n873\n00:43:26,275 --> 00:43:29,630\n[LAUGH] All right, but\nnow here's where things get weird.\n\n874\n00:43:29,630 --> 00:43:33,740\nIn order for\nthe SCVMM to integrate with it, first off,\n\n875\n00:43:33,740 --> 00:43:37,620\nwe need to install\nthe Operations Manager Console.\n\n876\n00:43:37,620 --> 00:43:42,480\nThe client, you've gotta install\nthe client on your SCVMM server.\n\n877\n00:43:42,480 --> 00:43:44,390\nAll right, this is where it gets weird.\n\n878\n00:43:44,390 --> 00:43:46,730\nAnd it's because when\nthe SCOM was written,\n\n879\n00:43:46,730 --> 00:43:49,540\nit wasn't fully like\nPowerShell integrated.\n\n880\n00:43:49,540 --> 00:43:51,880\nMicrosoft started that\ninitiative a little bit later.\n\n881\n00:43:51,880 --> 00:43:54,760\nAnd so the SCVMM is actually relying on\n\n882\n00:43:54,760 --> 00:43:57,920\nparts of that console to interact\nwith the database and the data.\n\n883\n00:43:57,920 --> 00:44:01,820\nSo you've gotta install the Systems\nCenter Operations Manager Console\n\n884\n00:44:01,820 --> 00:44:05,290\non this actual server,\non the SCVMM server.\n\n885\n00:44:05,290 --> 00:44:10,700\nAnd so, if I pull up my Systems Center,\n\n886\n00:44:10,700 --> 00:44:14,870\nI'll actually see that, well,\nif my little search anywhere would work.\n\n887\n00:44:16,450 --> 00:44:22,420\nYou know, I have this never ending battle,\nthere it is, my Operations Console.\n\n888\n00:44:22,420 --> 00:44:24,032\n>> And they wonder why Bing works so well.\n\n889\n00:44:24,032 --> 00:44:27,219\n>> Yeah, [LAUGH] I have this never-ending\nbattle with this thing finding\n\n890\n00:44:27,219 --> 00:44:27,820\nwhat I want.\n\n891\n00:44:27,820 --> 00:44:28,450\nBut there it is.\n\n892\n00:44:28,450 --> 00:44:31,610\nSo you can see I've got that\nOperations Console already installed.\n\n893\n00:44:31,610 --> 00:44:33,970\nOnce it's installed,\nthe last step is super easy.\n\n894\n00:44:33,970 --> 00:44:37,590\nWe just go into the SCVMM, and\n\n895\n00:44:37,590 --> 00:44:41,250\ninside of the SCVMM we can\nturn on that functionality.\n\n896\n00:44:41,250 --> 00:44:43,930\nSo, [COUGH] excuse me.\n\n897\n00:44:43,930 --> 00:44:45,270\nThe way we go about that.\n\n898\n00:44:45,270 --> 00:44:47,510\nOh, you know,\nI'm actually leaving out one little step.\n\n899\n00:44:47,510 --> 00:44:49,450\nI'm glad I looked down here at my notes.\n\n900\n00:44:49,450 --> 00:44:50,840\nThere is one more thing\nthat we need to do.\n\n901\n00:44:51,960 --> 00:44:56,140\nBy default it's got the functionality for\nmanaging Hyper-V\n\n902\n00:44:56,140 --> 00:45:00,020\nservers that are running Windows Server\n2012, R2, and pulling their data.\n\n903\n00:45:00,020 --> 00:45:01,870\nBut you might be supporting older servers,\nand so\n\n904\n00:45:01,870 --> 00:45:04,470\nthere's two management packs\nthat you have to have installed.\n\n905\n00:45:04,470 --> 00:45:07,730\nThey're the IIS Management Packs for\nIIS 6 and 7.\n\n906\n00:45:07,730 --> 00:45:10,660\nThat's for Windows Server 2003 and\nWindows Server 2008.\n\n907\n00:45:10,660 --> 00:45:14,890\nSo if you're gonna be managing\nservers that are running those,\n\n908\n00:45:14,890 --> 00:45:17,590\nand Windows Server 2008,\nI can understand that.\n\n909\n00:45:17,590 --> 00:45:21,300\nBut you might ask yourself,\nwhy 2003, it didn't have Hyper-V?\n\n910\n00:45:21,300 --> 00:45:25,460\nWell, it had this awesome program called\n\n911\n00:45:25,460 --> 00:45:30,630\nMicrosoft Virtual Server 2005,\nand SCVMM will manage it.\n\n912\n00:45:30,630 --> 00:45:31,780\nIt's terrible, you shouldn't have it.\n\n913\n00:45:31,780 --> 00:45:33,910\nYou definitely should not be\nrunning that in production.\n\n914\n00:45:33,910 --> 00:45:35,160\nBut if you are, it'll manage it.\n\n915\n00:45:35,160 --> 00:45:36,910\nSo those management packs\nneed to be installed.\n\n916\n00:45:36,910 --> 00:45:39,960\nJust the ones for managing IIS because\nthat's what's gonna let them reach out and\n\n917\n00:45:39,960 --> 00:45:40,960\ntap into that.\n\n918\n00:45:40,960 --> 00:45:43,020\nIf you don't have those servers you\ndon't have to worry about it, but\n\n919\n00:45:43,020 --> 00:45:46,170\nthat's a little note I put in my own\ninstallation notes here just to remember\n\n920\n00:45:46,170 --> 00:45:48,110\nto mention that.\n\n921\n00:45:48,110 --> 00:45:52,960\nBut once that's done, now we can go in and\nwe can actually do this integration.\n\n922\n00:45:52,960 --> 00:45:57,800\nAnd so, what you do is you go into your\nSCVMM Console right here where I am, and\n\n923\n00:45:57,800 --> 00:46:00,040\ndown at the bottom we're\njust gonna go into Settings.\n\n924\n00:46:01,500 --> 00:46:06,320\nAnd inside of our Settings,\nyou can find Systems Center Settings.\n\n925\n00:46:06,320 --> 00:46:09,430\nAnd you'll see your\nOperations Management Server.\n\n926\n00:46:09,430 --> 00:46:11,790\nNow it might be empty\nif you don't have one.\n\n927\n00:46:11,790 --> 00:46:13,750\nWell actually,\nI think the icon always shows up.\n\n928\n00:46:13,750 --> 00:46:15,220\nIt's if you double-click on it,\n\n929\n00:46:15,220 --> 00:46:18,230\nhere's where you'll see that it won't\nhave information for a connection.\n\n930\n00:46:19,240 --> 00:46:21,390\nBut if you are connected,\nyou'll see data on your server,\n\n931\n00:46:21,390 --> 00:46:25,490\nand mine is taking an unusually long\ntime to start, so we'll wait a second.\n\n932\n00:46:25,490 --> 00:46:26,800\nBut you'll see your server.\n\n933\n00:46:26,800 --> 00:46:29,600\nIf you don't have a server when\nyou double-click on that icon,\n\n934\n00:46:29,600 --> 00:46:33,580\nit'll just ask you to put in the server\nname and some credentials to connect, and\n\n935\n00:46:33,580 --> 00:46:37,210\nit'll connect to SCOM and start working.\n\n936\n00:46:37,210 --> 00:46:41,790\nWhen that's done, you can hit Test PRO\nto make sure it works, but in my case,\n\n937\n00:46:41,790 --> 00:46:43,890\nmine's already connected, so\nI don't need to test PRO.\n\n938\n00:46:45,420 --> 00:46:49,850\nOnce it's connected, you can enable the\nconnection to the Operations Manager and\n\n939\n00:46:49,850 --> 00:46:50,630\nenable PRO.\n\n940\n00:46:51,710 --> 00:46:52,845\nIf you turn those on,\n\n941\n00:46:52,845 --> 00:46:58,090\nHyper-V will now automatically be\nmonitoring performance results in SCOM,\n\n942\n00:46:58,090 --> 00:47:03,190\nand start moving your virtual machines\nbased on actual live performance data.\n\n943\n00:47:04,860 --> 00:47:06,410\nPretty cool stuff.\n\n944\n00:47:06,410 --> 00:47:08,950\nAnd now, once that's turned on,\n\n945\n00:47:08,950 --> 00:47:13,090\nall the other little things inside\nof our UI that mention PRO.\n\n946\n00:47:13,090 --> 00:47:16,200\nSo like right here where I've\ngot this PRO Tips button, right.\n\n947\n00:47:16,200 --> 00:47:21,290\nWhen I open up that PRO window, in a\nnormal system this is empty all the time,\n\n948\n00:47:21,290 --> 00:47:23,640\nbut once we connect it with SCOM,\n\n949\n00:47:23,640 --> 00:47:26,020\nnow it'll start to show any\nevents that are going on.\n\n950\n00:47:26,020 --> 00:47:28,900\nAny PRO Tips,\nany recommendations that it has.\n\n951\n00:47:28,900 --> 00:47:32,100\nAnd as I do things like\ncreating new virtual machines.\n\n952\n00:47:32,100 --> 00:47:37,820\nSo if I go up, and I start to create a new\nVM, I can go up here and create one.\n\n953\n00:47:37,820 --> 00:47:42,490\nWhen I run through the wizard, when I\nget to my placement, select Destination,\n\n954\n00:47:42,490 --> 00:47:45,520\nit'll start to give me recommendations\nbased on my hardware choices.\n\n955\n00:47:45,520 --> 00:47:49,280\nSo you can do all sorts of really\ninteresting things in here\n\n956\n00:47:49,280 --> 00:47:50,950\nonce you have PRO enabled.\n\n957\n00:47:50,950 --> 00:47:53,020\nSo if I just whip up a test machine.\n\n958\n00:47:55,290 --> 00:47:58,170\nWe've got these windows nice and\nscaled giant, don't they?\n\n959\n00:47:58,170 --> 00:48:02,120\nSo if I take something, if I start bumping\nmy memory up really high, I'm gonna go\n\n960\n00:48:02,120 --> 00:48:06,815\nto 4096, huge amounts of memory, that's\nnot really huge, but for this lab, it is.\n\n961\n00:48:06,815 --> 00:48:07,516\nThat's all the memory on my server.\n\n962\n00:48:07,516 --> 00:48:10,454\n[LAUGH] And so\nI start specifying these things,\n\n963\n00:48:10,454 --> 00:48:14,068\nwhen I specify higher hardware\nrequirements like that,\n\n964\n00:48:14,068 --> 00:48:18,828\nwhen I get later on into this wizard,\nit's gonna ask for a host to put it on.\n\n965\n00:48:18,828 --> 00:48:20,738\nAnd you'll see where I can deploy it,\n\n966\n00:48:20,738 --> 00:48:22,957\nI can place it on\nparticular hosts if I want.\n\n967\n00:48:22,957 --> 00:48:27,383\nAnd PRO is going to kick in and start\nkind of getting involved in this and so,\n\n968\n00:48:27,383 --> 00:48:30,490\nI'm gonna say,\nI want to send it into this cluster.\n\n969\n00:48:30,490 --> 00:48:33,550\nOr, you know, I guess I'm not\ngoing to get a lot of choices,\n\n970\n00:48:33,550 --> 00:48:35,180\ncuz I just have the one cluster.\n\n971\n00:48:35,180 --> 00:48:36,750\n>> Yeah, not a lot to choose from,\nis there?\n\n972\n00:48:36,750 --> 00:48:38,610\n>> Yeah, oh, here we go.\n\n973\n00:48:38,610 --> 00:48:41,220\nSo see how it's giving me these servers\nand it's giving me these ratings.\n\n974\n00:48:42,400 --> 00:48:46,910\nIf you don't have ProEnable, these\nratings are based solely on the available\n\n975\n00:48:46,910 --> 00:48:50,460\nmemory and available hard drive space.\n\n976\n00:48:50,460 --> 00:48:51,930\nIf it's got enough hard drive Space and\n\n977\n00:48:51,930 --> 00:48:54,690\nenough memory,\nyou'll get five stars, all right.\n\n978\n00:48:54,690 --> 00:48:57,870\nIf it doesn't have enough space,\nyou'll get one star.\n\n979\n00:48:57,870 --> 00:49:01,430\nBut with PRO, it doesn't just look at\navailable memory, it looks at disk I/O and\n\n980\n00:49:01,430 --> 00:49:02,450\nnetwork utilization.\n\n981\n00:49:02,450 --> 00:49:05,700\nIt looks at how much the CPU\nis currently being used and\n\n982\n00:49:05,700 --> 00:49:08,750\nthese star ratings map out to what I need.\n\n983\n00:49:08,750 --> 00:49:10,150\nI've got no stars on these guys,\n\n984\n00:49:10,150 --> 00:49:12,830\nthat means they probably don't\nhave enough memory, right.\n\n985\n00:49:12,830 --> 00:49:15,830\nBut this guy, I get two and\na half stars, that's all right.\n\n986\n00:49:15,830 --> 00:49:18,070\nAnd if I go down here to rating\nexplanations it will tell me why.\n\n987\n00:49:18,070 --> 00:49:21,120\nIt says it meets all the requirements but\nI'm only getting two and\n\n988\n00:49:21,120 --> 00:49:24,100\na half stars so that server is\nkinda bogged down right now.\n\n989\n00:49:24,100 --> 00:49:28,840\nBut PRO is making these stars a lot more\nmeaningful than they are without PRO.\n\n990\n00:49:28,840 --> 00:49:32,310\nAll right, cancel out of that.\n\n991\n00:49:32,310 --> 00:49:35,040\nAnd then just in pretty much in every\nwindow you got you'll see that pro and\n\n992\n00:49:35,040 --> 00:49:37,830\nif it ever sees a sub dot\noptimal communication or\n\n993\n00:49:37,830 --> 00:49:42,230\nconfiguration it'll bring that up,\nshow it to you and let you take action.\n\n994\n00:49:42,230 --> 00:49:45,190\nAll right, now PRO requires SCOM and\n\n995\n00:49:45,190 --> 00:49:48,170\nif you don't have SCOM if you just\nhave the SCVMM that's not very useful.\n\n996\n00:49:48,170 --> 00:49:48,830\n>> Right.\n\n997\n00:49:48,830 --> 00:49:51,150\n>> So\nMicrosoft overhauled this whole thing and\n\n998\n00:49:51,150 --> 00:49:55,370\nthey created dynamic optimization and\nthat's the one that we really wanna use.\n\n999\n00:49:55,370 --> 00:50:00,130\nVery similar to PRO except it has\na few extra bells and whistles now.\n\n1000\n00:50:00,130 --> 00:50:01,710\nSo it really is the replacement.\n\n1001\n00:50:01,710 --> 00:50:04,410\nIf you're currently using PRO\nyou should consider moving over\n\n1002\n00:50:04,410 --> 00:50:05,570\nto dynamic optimization.\n\n1003\n00:50:06,890 --> 00:50:09,900\nAll right, so let's take a look at\ndynamic optimization, all right.\n\n1004\n00:50:09,900 --> 00:50:11,590\nIf we wanna see it,\n\n1005\n00:50:11,590 --> 00:50:14,520\nbasically to get it configured we\ngo back down here to our fabric.\n\n1006\n00:50:17,000 --> 00:50:22,090\nSo I'm here in my fabric and in my fabric,\nI'm just gonna go into my servers and\n\n1007\n00:50:22,090 --> 00:50:25,350\nthey're all hosts and\nfind my desired server group.\n\n1008\n00:50:25,350 --> 00:50:27,300\nSo in this case,\nI've got this cluster here.\n\n1009\n00:50:27,300 --> 00:50:30,370\nThis is the one that I'm gonna\nturn DO on for, all right.\n\n1010\n00:50:30,370 --> 00:50:31,990\nYou'll turn it on based\non your server groups.\n\n1011\n00:50:31,990 --> 00:50:33,850\nI could turn it on way up here.\n\n1012\n00:50:33,850 --> 00:50:36,270\nBut DO works with inside a cluster.\n\n1013\n00:50:36,270 --> 00:50:40,290\nSo you can't live migrate between\nsystems that aren't clustered together.\n\n1014\n00:50:40,290 --> 00:50:43,330\nYou can migrate certainly,\nbut not live, right.\n\n1015\n00:50:43,330 --> 00:50:47,775\nSo I'm gonna turn it on right here\non this server group, all right.\n\n1016\n00:50:47,775 --> 00:50:51,955\nAnd once I'm on that server group, all\nI have to do is pull up its properties.\n\n1017\n00:50:54,835 --> 00:50:58,015\nAnd in the configuration, you'll see\nright here, Dynamic Optimization.\n\n1018\n00:50:58,015 --> 00:50:59,725\nYou'll also see PRO, right.\n\n1019\n00:50:59,725 --> 00:51:02,835\nSo here's the pro configuration,\nwe can override things and\n\n1020\n00:51:02,835 --> 00:51:06,915\nyou'll see it's just inheriting from\nup above, monitor and remediate.\n\n1021\n00:51:06,915 --> 00:51:10,840\nMonitor just means check for\npoor configuration or poor performance.\n\n1022\n00:51:10,840 --> 00:51:12,590\nRemediate means, do something about it.\n\n1023\n00:51:12,590 --> 00:51:14,980\nSo we can configure that for PRO.\n\n1024\n00:51:14,980 --> 00:51:17,700\nBut for DO, we just go in here and\nwe turn it on.\n\n1025\n00:51:17,700 --> 00:51:20,940\nWe say, use Dynamic Optimization,\nall right.\n\n1026\n00:51:20,940 --> 00:51:23,470\nSo I'm gonna turn that optimization on,\nuse it, and\n\n1027\n00:51:23,470 --> 00:51:26,180\nthen I can specify how\naggressive we want it to be.\n\n1028\n00:51:26,180 --> 00:51:27,230\nWhat you don't want is,\n\n1029\n00:51:27,230 --> 00:51:30,117\nyou don't want your VMs to constantly\nbe moving around your data center.\n\n1030\n00:51:30,117 --> 00:51:30,860\n>> [LAUGH]\n>> Right?\n\n1031\n00:51:30,860 --> 00:51:34,170\nSo, you need to allow a certain\namount of time in between\n\n1032\n00:51:34,170 --> 00:51:35,420\nThe default is every ten minutes.\n\n1033\n00:51:35,420 --> 00:51:38,210\nThat might be a little too aggressive for\nyou, right.\n\n1034\n00:51:38,210 --> 00:51:41,020\nSo you could always come in and\nadjust that time and\n\n1035\n00:51:41,020 --> 00:51:42,710\nbump it to something lower or higher.\n\n1036\n00:51:42,710 --> 00:51:45,190\nI might set mine to 30 minutes, right.\n\n1037\n00:51:45,190 --> 00:51:48,480\nSo every half hour,\ntake a look at this cluster and\n\n1038\n00:51:48,480 --> 00:51:51,699\nrebalance the VM's to create\nan even distribution.\n\n1039\n00:51:53,460 --> 00:51:55,060\nAnd then down here,\nyou can set the thresholds.\n\n1040\n00:51:56,140 --> 00:51:58,960\nAt what point do I need\nto consider moving them?\n\n1041\n00:51:58,960 --> 00:52:00,930\nCuz if I have a heavy CPU VM,\n\n1042\n00:52:00,930 --> 00:52:05,920\nbut it's on a host that's only\nrunning at 30% CPU, I don't care.\n\n1043\n00:52:05,920 --> 00:52:07,440\nMoving it's not gonna help it.\n\n1044\n00:52:07,440 --> 00:52:12,160\nSo we set kind of the minimums and notice\nthat by default it's just doing CPU and\n\n1045\n00:52:12,160 --> 00:52:13,850\nmemory, all right.\n\n1046\n00:52:13,850 --> 00:52:16,880\nCPU and memory because that's\nwhat PRO tips used to do and so\n\n1047\n00:52:16,880 --> 00:52:18,450\nthat's what it's kind of doing here.\n\n1048\n00:52:18,450 --> 00:52:22,120\nBut we can add in disk I/O and network.\n\n1049\n00:52:22,120 --> 00:52:25,230\nSo if you've got a file server,\nsome heavy bandwidth type item,\n\n1050\n00:52:25,230 --> 00:52:29,440\nit's not generating a CPU and memory\nutilization but it is generating disk I/O.\n\n1051\n00:52:29,440 --> 00:52:30,200\nSo you can come in and\n\n1052\n00:52:30,200 --> 00:52:33,100\nspecify that as a criteria to\npotentially move it between servers.\n\n1053\n00:52:35,200 --> 00:52:40,890\nNow dynamic optimization or DO is\nthe one we're normally referring to but\n\n1054\n00:52:40,890 --> 00:52:43,040\nthere's a second piece to it called PO.\n\n1055\n00:52:43,040 --> 00:52:47,765\nNow you could argue that you've been PO'ed\nin your data center for a long time.\n\n1056\n00:52:47,765 --> 00:52:50,590\n>> [LAUGH]\n>> But it is a new feature here and\n\n1057\n00:52:50,590 --> 00:52:54,110\nit's power optimization, all right.\n\n1058\n00:52:54,110 --> 00:52:57,950\nLet's say that I've got ten\nphysical hosts, all right.\n\n1059\n00:52:57,950 --> 00:53:01,600\nAnd I've got ten VMs on each, so\na total of 100 VMs on 10 hosts.\n\n1060\n00:53:01,600 --> 00:53:06,180\nAnd a lot of those VMs are idle\nin the middle of the night.\n\n1061\n00:53:06,180 --> 00:53:08,300\nThey're not doing anything, okay.\n\n1062\n00:53:08,300 --> 00:53:09,410\nWell, if they're not doing anything,\n\n1063\n00:53:09,410 --> 00:53:13,630\nif they're idle, in theory I could\nshut some of them down, right.\n\n1064\n00:53:13,630 --> 00:53:16,730\nOr I could move more onto\na physical host than normal.\n\n1065\n00:53:16,730 --> 00:53:18,650\n>> Free up some resources on\none of those other hosts.\n\n1066\n00:53:18,650 --> 00:53:21,660\n>> Mm-hm.\nAnd if we can empty out a host,\n\n1067\n00:53:21,660 --> 00:53:25,830\nif I can move those 100 VMs across\neight of the physical hosts,\n\n1068\n00:53:25,830 --> 00:53:28,520\nthen the two remaining hosts,\nare just sitting there empty.\n\n1069\n00:53:28,520 --> 00:53:30,120\nNo VMs, whatsoever.\n\n1070\n00:53:30,120 --> 00:53:34,160\nAnd if that's the case,\ncouldn't I put those to sleep, right?\n\n1071\n00:53:34,160 --> 00:53:36,210\nYou could, you could shut them down.\n\n1072\n00:53:36,210 --> 00:53:37,800\nAnd then when you needed them,\n\n1073\n00:53:37,800 --> 00:53:42,250\nyou could use wake on land to bring them\nback up, and now you're saving power.\n\n1074\n00:53:42,250 --> 00:53:44,430\nYou might have a massive data center, and\n\n1075\n00:53:44,430 --> 00:53:47,640\nduring peak time you need\nevery physical server running.\n\n1076\n00:53:48,760 --> 00:53:51,410\nBut in the middle of the night\nyou only need half your capacity.\n\n1077\n00:53:52,680 --> 00:53:55,480\nAnd so at that time you could\nactually power those hosts down and\n\n1078\n00:53:55,480 --> 00:53:57,090\nsave electricity,\nthat's power optimization.\n\n1079\n00:53:58,370 --> 00:54:00,330\nSo you'll see it down here,\nwe can go in and configure it.\n\n1080\n00:54:00,330 --> 00:54:02,100\nI'll go into my settings and\n\n1081\n00:54:02,100 --> 00:54:06,290\nhere's where we can define when we\nwanna consider kicking this in.\n\n1082\n00:54:06,290 --> 00:54:10,390\nWhen a server is below 40% CPU,\nwhen it's below this level of memory or\n\n1083\n00:54:10,390 --> 00:54:13,270\nwhatever, consider removing\nthe VMs off of it and\n\n1084\n00:54:13,270 --> 00:54:15,550\nthen where will allow\nit to power optimize.\n\n1085\n00:54:16,660 --> 00:54:18,930\nAnd see how they've got it set,\nlike Tuesday and\n\n1086\n00:54:18,930 --> 00:54:22,240\nWednesday during these times,\ndon't do power optimization.\n\n1087\n00:54:22,240 --> 00:54:25,110\nI might wanna widen that and\ncome through and\n\n1088\n00:54:25,110 --> 00:54:29,430\nsay, during business hours\ndon't do power optimization.\n\n1089\n00:54:29,430 --> 00:54:31,690\nSo you can kind of adjust that and\n\n1090\n00:54:31,690 --> 00:54:35,630\nthen, during those times, it will leave\nyour service be, it will let them run.\n\n1091\n00:54:35,630 --> 00:54:37,820\nBut then after hours on Sunday or\nSaturday or\n\n1092\n00:54:37,820 --> 00:54:41,770\nwhatever you can start powering\nsystems down and save some money,\n\n1093\n00:54:41,770 --> 00:54:44,114\nsave the environment,\nwhatever it is that you're trying to do.\n\n1094\n00:54:44,114 --> 00:54:46,090\n>> [LAUGH]\n>> Now you might've noticed a lot of my\n\n1095\n00:54:46,090 --> 00:54:48,250\noptions are grayed out\nthat I can't change.\n\n1096\n00:54:48,250 --> 00:54:52,330\nSo some of these settings,\nlike this check mark here, and\n\n1097\n00:54:52,330 --> 00:54:55,090\nthat's because I'm inheriting\nthese settings from up above.\n\n1098\n00:54:55,090 --> 00:55:00,000\nIf I cancel out of that and I go up higher\nto like all hosts we can go in here and\n\n1099\n00:55:00,000 --> 00:55:02,040\nwe'll find dynamic optimization.\n\n1100\n00:55:02,040 --> 00:55:06,400\nAnd now these are checkmarks that\nI can mess around with, right.\n\n1101\n00:55:06,400 --> 00:55:10,290\nAnd I can turn on power optimization and\nI can go and\n\n1102\n00:55:10,290 --> 00:55:12,210\nnow I can start poking around, right.\n\n1103\n00:55:12,210 --> 00:55:17,810\nSo if you see an option that you can't\nadjust it's typically because of\n\n1104\n00:55:17,810 --> 00:55:21,085\nBeing set at a higher level and\nwe can draw pictures.\n\n1105\n00:55:21,085 --> 00:55:24,310\nFun little break there, right\n>> It looks like Tetris.\n\n1106\n00:55:24,310 --> 00:55:25,094\n>> And now it's a dog, right.\n\n1107\n00:55:25,094 --> 00:55:26,270\nSo it's I don't know.\n\n1108\n00:55:26,270 --> 00:55:27,006\nIt's a sad little dog.\n\n1109\n00:55:27,006 --> 00:55:29,914\n>> [LAUGH] Almost as good as your pony.\n\n1110\n00:55:29,914 --> 00:55:34,750\n>> [LAUGH] Yeah, I had a pony,\nthat was a debacle.\n\n1111\n00:55:34,750 --> 00:55:36,630\nAll right, so that's dynamic optimization.\n\n1112\n00:55:36,630 --> 00:55:38,300\nSuper easy to turn on.\n\n1113\n00:55:38,300 --> 00:55:40,570\nThe default is that it\nruns every ten minutes, so\n\n1114\n00:55:40,570 --> 00:55:45,022\nwe can crank it on and let it go, and\nit's going to handle that migration.\n\n1115\n00:55:45,022 --> 00:55:46,840\nI'm gonna go and\nactually turn it on down here.\n\n1116\n00:55:48,030 --> 00:55:50,190\nNow, I kind of have a small cluster, so\n\n1117\n00:55:50,190 --> 00:55:53,050\nit's not like there's really any\noptimization that I'm gonna be able to do.\n\n1118\n00:55:53,050 --> 00:55:55,430\nBut I'll turn it on anyways, why not?\n\n1119\n00:55:55,430 --> 00:55:56,890\nAnd I'll say every 30 minutes.\n\n1120\n00:55:58,020 --> 00:56:01,131\nAnd now, every 30 minutes,\nit's gonna look, and it's gonna try and\n\n1121\n00:56:01,131 --> 00:56:03,030\nfind systems that are over this threshold.\n\n1122\n00:56:03,030 --> 00:56:05,350\nAnd if they are, I'll try and\nmove some things around.\n\n1123\n00:56:05,350 --> 00:56:08,410\nIf people are under that threshold\nthey're considered a good target, right.\n\n1124\n00:56:08,410 --> 00:56:11,670\nSomebody who we can move resources\nto as part of our balance so\n\n1125\n00:56:11,670 --> 00:56:13,505\nthis is the tipping point, right.\n\n1126\n00:56:13,505 --> 00:56:17,830\nAnd I'm gonna say OK on that,\nand that's going to kick in and\n\n1127\n00:56:17,830 --> 00:56:19,970\nnow it's going to start watching, right.\n\n1128\n00:56:19,970 --> 00:56:23,127\nSuper easy to turn on,\ndoesn't require SCOM.\n\n1129\n00:56:23,127 --> 00:56:25,862\nDidn't require me to do anything\nsuper magic or special and\n\n1130\n00:56:25,862 --> 00:56:28,333\nif I've got all 2012\nservers I won't even need.\n\n1131\n00:56:28,333 --> 00:56:30,788\nThings like those management packs and\nstuff.\n\n1132\n00:56:30,788 --> 00:56:34,311\nI just don't need any of that stuff\nthat we had to deal with in pro.\n\n1133\n00:56:34,311 --> 00:56:38,362\nIt's just right here, and you're done.\n\n1134\n00:56:38,362 --> 00:56:41,270\nAll right,\nyou can force it run if you need to.\n\n1135\n00:56:41,270 --> 00:56:43,290\nMaybe you want it to balance right now.\n\n1136\n00:56:43,290 --> 00:56:44,770\nI need it to balance.\n\n1137\n00:56:44,770 --> 00:56:48,430\nAnd if we want to do that, you can just\ngo through and find your server group.\n\n1138\n00:56:48,430 --> 00:56:49,850\nAnd when you right-click on it and\n\n1139\n00:56:49,850 --> 00:56:53,310\nlook at your different options,\nwe've got it buried away in here.\n\n1140\n00:56:53,310 --> 00:56:53,860\nOh, shoot.\n\n1141\n00:56:53,860 --> 00:56:56,380\nNot on the group,\nwe have to do it on the cluster itself.\n\n1142\n00:56:56,380 --> 00:56:59,225\nSo I can go to my cluster here,\nand I can right-click on it, and\n\n1143\n00:56:59,225 --> 00:57:00,915\nthere it is, Optimize Hosts.\n\n1144\n00:57:00,915 --> 00:57:05,245\nAnd when you choose Optimize Hosts,\nit's gonna look at the hosts, look for\n\n1145\n00:57:05,245 --> 00:57:08,255\nany hosts that's below that threshold,\nand say here's a target.\n\n1146\n00:57:08,255 --> 00:57:12,992\nLet me find some VMs and move it, and I'll\nstart moving them around and there we go.\n\n1147\n00:57:12,992 --> 00:57:16,407\nNow in my case, no optimizations are\navailable probably cuz I'm out of room.\n\n1148\n00:57:16,407 --> 00:57:18,652\n>> [LAUGH]\n>> And it's done.\n\n1149\n00:57:18,652 --> 00:57:19,352\nAll right.\n\n1150\n00:57:19,352 --> 00:57:20,672\nSo that's it, that's basically DO.\n\n1151\n00:57:20,672 --> 00:57:22,652\nOne of the easier things\nthat we deal with.\n\n1152\n00:57:22,652 --> 00:57:24,075\nOnce you turn it on and walk away.\n\n1153\n00:57:24,075 --> 00:57:25,389\nThis is self-remediation.\n\n1154\n00:57:25,389 --> 00:57:27,120\nRight?\nOr automatic remediation.\n\n1155\n00:57:27,120 --> 00:57:30,310\nIf one server starts\nmaxing out its resources,\n\n1156\n00:57:30,310 --> 00:57:32,120\nit'll move VMs around to level that out.\n\n1157\n00:57:32,120 --> 00:57:33,170\nAll right?\n\n1158\n00:57:33,170 --> 00:57:37,100\nAnd it's dynamic, every ten minutes or\n30 minutes in my environment.\n\n1159\n00:57:37,100 --> 00:57:41,290\nSo every so often it's running,\nyou don't have to touch it.\n\n1160\n00:57:41,290 --> 00:57:44,860\nAll right, now we still have one more\nutility that we need to take a look at but\n\n1161\n00:57:44,860 --> 00:57:47,240\nthis is pretty good spot to stop and\ntake a break.\n\n1162\n00:57:47,240 --> 00:57:48,570\nSo why don't we pause here, and\n\n1163\n00:57:48,570 --> 00:57:52,080\nwhen we get back we'll look at\nthe desired state configuration.\n\n1164\n00:57:52,080 --> 00:57:53,395\nWe'll go a little power shell crazy.\n\n1165\n00:57:53,395 --> 00:57:55,330\n>> [LAUGH]\n>> And have some fun there.\n\n1166\n00:57:55,330 --> 00:58:00,570\nSo stay tuned, we'll be back after this.\n\n1167\n00:58:00,570 --> 00:58:07,262\n[SOUND] All right, welcome back everybody.\n\n1168\n00:58:07,262 --> 00:58:09,314\nSo in our first three segments,\nwe've seen a lot of stuff.\n\n1169\n00:58:09,314 --> 00:58:09,900\nAll right.\n\n1170\n00:58:09,900 --> 00:58:14,180\nA lot of different tools across\nvarious systems that we can use to do\n\n1171\n00:58:14,180 --> 00:58:15,448\nautomated remediation.\n\n1172\n00:58:15,448 --> 00:58:17,740\nGood stuff.\n\n1173\n00:58:17,740 --> 00:58:20,770\nA lot of it is really not that\nbig of a deal to implement.\n\n1174\n00:58:20,770 --> 00:58:23,570\nBut each one kind of had their limits.\n\n1175\n00:58:23,570 --> 00:58:25,210\nAnd if you were looking at this and\n\n1176\n00:58:25,210 --> 00:58:28,761\nthrough the whole episode going man\nthat's almost exactly what I need.\n\n1177\n00:58:28,761 --> 00:58:30,896\n>> [LAUGH]\n>> That almost did what I wanted.\n\n1178\n00:58:30,896 --> 00:58:32,518\nOh it was so close to what I needed.\n\n1179\n00:58:32,518 --> 00:58:34,160\nBut it wasn't quite right.\n\n1180\n00:58:34,160 --> 00:58:35,242\nThen this last tool is the one for you.\n\n1181\n00:58:35,242 --> 00:58:35,950\nAll right.\n\n1182\n00:58:35,950 --> 00:58:40,517\nThe last tool is the hardest of them all\nto use, but it's the most, flexible.\n\n1183\n00:58:40,517 --> 00:58:41,890\nAll right.\n\n1184\n00:58:41,890 --> 00:58:46,910\nIt's a tool called\nthe Desired State Configuration, or DSC.\n\n1185\n00:58:46,910 --> 00:58:51,070\nAnd the DSC, what it does is it\nallows us to use these special files,\n\n1186\n00:58:51,070 --> 00:58:52,650\nthey're called MOF files.\n\n1187\n00:58:52,650 --> 00:58:58,340\nAnd we can define a list of criteria\nthat a system needs to match.\n\n1188\n00:58:58,340 --> 00:59:02,460\nAnd we can take actions based on whether\nor not somebody matches those criteria.\n\n1189\n00:59:02,460 --> 00:59:03,940\nWe can either correct it.\n\n1190\n00:59:03,940 --> 00:59:06,260\nRight?\nDo remediation, we can run scripts,\n\n1191\n00:59:06,260 --> 00:59:07,670\nwe can copy files.\n\n1192\n00:59:07,670 --> 00:59:10,600\nAny limitation that we talked about\nin any of the other software,\n\n1193\n00:59:10,600 --> 00:59:14,190\nwe override here because we can\nautomate it with scripting.\n\n1194\n00:59:14,190 --> 00:59:14,700\nRight?\n\n1195\n00:59:14,700 --> 00:59:15,640\nNow scripting,\n\n1196\n00:59:15,640 --> 00:59:19,230\nthat means that we're gonna have to work\na little harder here to write this stuff.\n\n1197\n00:59:19,230 --> 00:59:21,930\nBut the overall implementation is not so\nbad.\n\n1198\n00:59:21,930 --> 00:59:25,590\nAnd you really do get full flexibility.\n\n1199\n00:59:25,590 --> 00:59:27,090\nRight?\nThe ability to do whatever you need.\n\n1200\n00:59:27,090 --> 00:59:30,330\nNow the DSC is part of\nthe Windows Power Shell,\n\n1201\n00:59:30,330 --> 00:59:33,290\npart of the Operations Manager Shell\nthat's installed with SCOM.\n\n1202\n00:59:33,290 --> 00:59:35,860\nAnd it lets you really\ndo a lot of neat stuff.\n\n1203\n00:59:35,860 --> 00:59:38,470\nSo like any power shell utility out there,\n\n1204\n00:59:38,470 --> 00:59:41,880\nyou're really just limited by\nyour knowledge of the tools.\n\n1205\n00:59:41,880 --> 00:59:43,610\n>> Your creativity, exactly.\n\n1206\n00:59:43,610 --> 00:59:45,742\n>> Your ability to read the documentation.\n\n1207\n00:59:45,742 --> 00:59:46,870\n>> [LAUGH] Right,\n>> So\n\n1208\n00:59:46,870 --> 00:59:50,140\nI'll post with the show notes the link\nthat goes right to Microsoft's page or\n\n1209\n00:59:50,140 --> 00:59:51,680\nhere, let me just bring\nthat up real quick.\n\n1210\n00:59:51,680 --> 00:59:53,600\nWhere is, where is?\n\n1211\n00:59:53,600 --> 00:59:54,650\nWhere are my notes.\n\n1212\n00:59:54,650 --> 00:59:55,480\nHere we go.\n\n1213\n00:59:55,480 --> 00:59:58,010\nSo let me just bring this up real quick.\n\n1214\n00:59:58,010 --> 01:00:04,260\nSo you guys can see an example of kinda\nlike what's involved in configuring that.\n\n1215\n01:00:04,260 --> 01:00:09,270\nAnd basically the way it works with\nthe desired state configuration is that\n\n1216\n01:00:09,270 --> 01:00:15,635\nyou create this file, this framework\nthat identifies what you want to check.\n\n1217\n01:00:15,635 --> 01:00:17,110\nRight?\nWhat it is that you're going to be\n\n1218\n01:00:17,110 --> 01:00:19,260\nverifying on a system.\n\n1219\n01:00:19,260 --> 01:00:22,570\nAnd so they break that down here\nwith how to build that file,\n\n1220\n01:00:22,570 --> 01:00:26,140\nhow to actually get it running and\ndoing its work.\n\n1221\n01:00:26,140 --> 01:00:27,652\nAnd let me just go in here, and so\n\n1222\n01:00:27,652 --> 01:00:31,480\nwe've got like this build custom\npower shell desired state resources.\n\n1223\n01:00:31,480 --> 01:00:33,354\nAnd they're kinda showing the example.\n\n1224\n01:00:33,354 --> 01:00:36,038\nActually, that's not the one that I want,\nwhere's one,\n\n1225\n01:00:36,038 --> 01:00:38,358\nwell this is the raw format but\nwhat does that help.\n\n1226\n01:00:38,358 --> 01:00:40,670\n>> [LAUGH]\n>> So here's a good one.\n\n1227\n01:00:40,670 --> 01:00:42,800\nAll right, so\nhere they actually showing the example.\n\n1228\n01:00:42,800 --> 01:00:46,150\nThey're fetching the status of\na resource and checking for information.\n\n1229\n01:00:46,150 --> 01:00:48,320\nSo they're pulling some kind of parameter.\n\n1230\n01:00:48,320 --> 01:00:50,200\nAnd they're verifying the status of it.\n\n1231\n01:00:50,200 --> 01:00:53,050\nThat's not really a real world example.\n\n1232\n01:00:53,050 --> 01:00:57,860\n>> If you go back over to the NAV tree,\nI think under Getting Started,\n\n1233\n01:00:57,860 --> 01:00:58,910\nthere's a good one to show.\n\n1234\n01:00:58,910 --> 01:01:00,210\n>> Get started?\n\n1235\n01:01:00,210 --> 01:01:01,595\nOh, just under the actual, Get it started.\n\n1236\n01:01:01,595 --> 01:01:03,580\n>> Yeah.\nI think it's got that WEP on you.\n\n1237\n01:01:03,580 --> 01:01:04,710\n>> Oh there we go.\nYeah.\n\n1238\n01:01:04,710 --> 01:01:08,550\nSo here's one where basically it's\nchecking to verify that a configuration\n\n1239\n01:01:08,550 --> 01:01:10,890\nblock has zero or more node blocks.\n\n1240\n01:01:10,890 --> 01:01:14,690\nRight now,\na node in the DSC is a computer.\n\n1241\n01:01:14,690 --> 01:01:16,530\nSo when we do a configuration,\n\n1242\n01:01:16,530 --> 01:01:20,160\nthe configuration doesn't have to be\ngeneric for a bunch of computers.\n\n1243\n01:01:20,160 --> 01:01:22,680\nYou can actually have more than\none configuration in here for\n\n1244\n01:01:22,680 --> 01:01:24,700\nseveral different computers.\n\n1245\n01:01:24,700 --> 01:01:27,820\nSo here they're identifying\na server named server001.\n\n1246\n01:01:28,870 --> 01:01:32,380\nAnd in this configuration the file\nthey're saying we look to server001,\n\n1247\n01:01:32,380 --> 01:01:37,960\nit needs to have the web\nserver role installed.\n\n1248\n01:01:37,960 --> 01:01:38,630\nAll right?\n\n1249\n01:01:38,630 --> 01:01:40,619\nIf it's present, great.\n\n1250\n01:01:40,619 --> 01:01:41,144\nRight?\n\n1251\n01:01:41,144 --> 01:01:44,420\nIf it's not present, add it back.\n\n1252\n01:01:44,420 --> 01:01:46,050\nAnd you'll where they even tell\nyou right there if you want\n\n1253\n01:01:46,050 --> 01:01:48,170\nto uninstall it you would\nchange that to absent.\n\n1254\n01:01:48,170 --> 01:01:52,410\nAnd if it's not absent, in other words,\nif it's present we'll make it absent.\n\n1255\n01:01:52,410 --> 01:01:53,717\nAnd we'll take everything.\n\n1256\n01:01:53,717 --> 01:01:55,578\nIf it is absent then we're compliant.\n\n1257\n01:01:55,578 --> 01:01:56,210\nRight?\n\n1258\n01:01:56,210 --> 01:01:58,990\nSo that's a real simple\nexample of a check, and\n\n1259\n01:01:58,990 --> 01:02:00,070\ndown here they're checking for a file.\n\n1260\n01:02:00,070 --> 01:02:05,460\nThey're looking to see if\nc:/inetpub/wwwroot exists.\n\n1261\n01:02:05,460 --> 01:02:08,200\nAnd if it does they're gonna specify\n\n1262\n01:02:08,200 --> 01:02:10,650\nwhere we can copy the files\nfrom to put in there.\n\n1263\n01:02:10,650 --> 01:02:12,340\nRight?\nSo we have a default website we wanna lay\n\n1264\n01:02:12,340 --> 01:02:13,460\non them or whatever.\n\n1265\n01:02:13,460 --> 01:02:18,180\nIf you're spitting up more web servers to\nwork in some kind of like load balancing\n\n1266\n01:02:18,180 --> 01:02:19,210\ncluster for a web front end.\n\n1267\n01:02:19,210 --> 01:02:21,345\nWhen you bring up a new one,\n\n1268\n01:02:21,345 --> 01:02:23,925\nyou wanna make sure it has\nthe most up to date web files.\n\n1269\n01:02:23,925 --> 01:02:27,495\nAnd so you might run this kind of a check\nand specify a source path of where\n\n1270\n01:02:27,495 --> 01:02:31,085\nthe current website is, and point it at\nthis new server that just got spun up, and\n\n1271\n01:02:31,085 --> 01:02:33,175\nif it's missing files, it updates them.\n\n1272\n01:02:33,175 --> 01:02:33,690\nRight?\n\n1273\n01:02:33,690 --> 01:02:35,050\nThat's the way that we can use this.\n\n1274\n01:02:35,050 --> 01:02:40,110\nIt's really powerful stuff, and like Mike\nsaid, you're limited by your scales.\n\n1275\n01:02:40,110 --> 01:02:42,070\n>> Yeah, and\nyou can have different node blocks.\n\n1276\n01:02:42,070 --> 01:02:45,220\nIf you had different servers that needed\nslightly different configurations,\n\n1277\n01:02:45,220 --> 01:02:49,000\nyou can specify the name of that server\nin there, and just add different blocks\n\n1278\n01:02:49,000 --> 01:02:52,150\nwithin that one configuration block,\nyou can have several node blocks.\n\n1279\n01:02:52,150 --> 01:02:54,260\nAnd then further down,\nif we wanna go back to that page,\n\n1280\n01:02:54,260 --> 01:02:57,470\nwhere it really starts getting powerful,\nI think, is with the parameters.\n\n1281\n01:02:57,470 --> 01:03:02,800\nWhere we can start throwing in, we can\nwrite the script, kind of genericise it.\n\n1282\n01:03:02,800 --> 01:03:05,950\nAnd then when we call it we can\nspecify the name of the server.\n\n1283\n01:03:05,950 --> 01:03:07,270\n>> Yeah, that's what they're doing here.\n\n1284\n01:03:07,270 --> 01:03:10,310\nThey've got a parameter\ncalled My Target Node Name.\n\n1285\n01:03:10,310 --> 01:03:10,940\nRight?\n\n1286\n01:03:10,940 --> 01:03:14,410\nAnd so when they call this script,\nwhich is really a function, but\n\n1287\n01:03:14,410 --> 01:03:17,580\nwhen they call this function,\nthey're gonna specify that node name.\n\n1288\n01:03:17,580 --> 01:03:21,180\nSo, instead of node followed by a server\nname, they just say my target node name.\n\n1289\n01:03:21,180 --> 01:03:24,370\nSo now, every time they call the function,\nthey can specify a different server.\n\n1290\n01:03:24,370 --> 01:03:29,430\nAnd it will generate these MLF files these\nconfiguration files for each server.\n\n1291\n01:03:29,430 --> 01:03:31,230\nRight?\nNow you can edit the MLF files\n\n1292\n01:03:31,230 --> 01:03:32,120\nyourself if you want but\n\n1293\n01:03:32,120 --> 01:03:36,780\nthey're really complex these simple\nfunctions right here generate it for you.\n\n1294\n01:03:36,780 --> 01:03:40,540\nThat's part of what makes life really easy\nwith these and if you're a developer you\n\n1295\n01:03:40,540 --> 01:03:43,810\ncan leverage this to quickly and\ndynamically generate the MLF files.\n\n1296\n01:03:43,810 --> 01:03:45,160\nAnd then you just turn around and\n\n1297\n01:03:45,160 --> 01:03:49,540\nyou apply the MLF file against the host\nto verify and take care of that.\n\n1298\n01:03:49,540 --> 01:03:53,310\nSo pretty straight-forward.\n\n1299\n01:03:53,310 --> 01:03:55,860\nThe documentation,\nit shows how to build this.\n\n1300\n01:03:55,860 --> 01:04:00,999\nThey never actually show in complete\nclarity how to call that function.\n\n1301\n01:04:00,999 --> 01:04:03,240\n>> Right.\n>> So I do wanna show an example of it so\n\n1302\n01:04:03,240 --> 01:04:04,880\nyou guys can get a chance\nto see this in action.\n\n1303\n01:04:04,880 --> 01:04:08,890\nBut before we do that, just keep in\nmind this is really powerful stuff, and\n\n1304\n01:04:08,890 --> 01:04:12,460\nthis is really just tip of\nthe iceberg here with what it can do.\n\n1305\n01:04:12,460 --> 01:04:16,010\nThey've got a ton of documentation on the\nwebsite, and we'll post a link to this.\n\n1306\n01:04:16,010 --> 01:04:19,564\nBut I made a just like kind of a quick\nlittle list of some of the things that\n\n1307\n01:04:19,564 --> 01:04:21,550\nyou can do with DSC.\n\n1308\n01:04:21,550 --> 01:04:23,426\nWe can, set environment variables.\n\n1309\n01:04:23,426 --> 01:04:26,979\nWe can test for configuration status,\nverifying current settings.\n\n1310\n01:04:26,979 --> 01:04:29,568\nWe can remediate the non compliant system.\n\n1311\n01:04:29,568 --> 01:04:32,836\nWe can install software or\nuninstall software.\n\n1312\n01:04:32,836 --> 01:04:35,401\nWe can install or\nuninstall roles and features.\n\n1313\n01:04:35,401 --> 01:04:42,950\nWe can add, modify, or delete files,\ngroups, user accounts.\n\n1314\n01:04:42,950 --> 01:04:46,900\nWe can actually do PowerShell scripts,\nwhich can then go and do whatever.\n\n1315\n01:04:46,900 --> 01:04:49,140\nWe can start and stop services.\n\n1316\n01:04:49,140 --> 01:04:52,440\nAnd those are just a handful\nof the things that it can do.\n\n1317\n01:04:52,440 --> 01:04:54,090\nThere is just a ton of stuff available.\n\n1318\n01:04:55,200 --> 01:05:00,850\nNow, the way it does all of this is\nthrough WinRM, Windows Remote Management.\n\n1319\n01:05:00,850 --> 01:05:04,900\nSo, in order to use DSC, you do need\nto have WinRM enabled on your servers.\n\n1320\n01:05:04,900 --> 01:05:07,380\nMost of us do anyway,\nbecause if you're doing\n\n1321\n01:05:07,380 --> 01:05:10,660\ncore services installs you need\nWinRM to remote manage it.\n\n1322\n01:05:10,660 --> 01:05:12,250\nSo, you've probably got that in place.\n\n1323\n01:05:12,250 --> 01:05:15,270\nIf you don't, or if you have\nthe Windows firewall blocking WinRM,\n\n1324\n01:05:15,270 --> 01:05:17,320\nyou can pretty much expect DSC to fail.\n\n1325\n01:05:17,320 --> 01:05:18,250\nAll right.\n\n1326\n01:05:18,250 --> 01:05:19,340\nJust to throw that caveat-\n>> Right.\n\n1327\n01:05:19,340 --> 01:05:21,520\nWe could use one of our other tools we\ntalked about earlier to enable that.\n\n1328\n01:05:21,520 --> 01:05:25,980\nWe could create that baseline and\nmake sure that WinRM is up and running.\n\n1329\n01:05:25,980 --> 01:05:28,390\n>> Yeah.\nOr a GPO if they're domain joined.\n\n1330\n01:05:28,390 --> 01:05:32,330\nThere's a lot of different things that\nwe can come up to solve that problem.\n\n1331\n01:05:32,330 --> 01:05:34,830\nAll right, so\nlet's see an example of this.\n\n1332\n01:05:34,830 --> 01:05:35,560\nRight?\n\n1333\n01:05:35,560 --> 01:05:37,970\nWe'll use kind of a hybrid of\nthe two examples we just saw.\n\n1334\n01:05:37,970 --> 01:05:40,660\nThe example that installed the web server,\nand\n\n1335\n01:05:40,660 --> 01:05:43,400\nthe example that used\na modular server name.\n\n1336\n01:05:43,400 --> 01:05:44,230\nRight?\nA parameterized.\n\n1337\n01:05:44,230 --> 01:05:45,160\n>> Parameter.\nYep.\n\n1338\n01:05:45,160 --> 01:05:46,170\nSo, we'll do that.\n\n1339\n01:05:46,170 --> 01:05:48,530\nI'm gonna switch back\nover to my SCOM server.\n\n1340\n01:05:48,530 --> 01:05:50,560\nSo, here's my SCOM box.\n\n1341\n01:05:50,560 --> 01:05:52,770\nAnd on SCOM I'm just gonna go ahead and\n\n1342\n01:05:52,770 --> 01:05:56,230\nbring up my operations manager shell,\nright?\n\n1343\n01:05:56,230 --> 01:05:58,360\nAnd that's just the power shell but\n\n1344\n01:05:58,360 --> 01:06:02,070\nwith all the operations managers\nstuff added onto it, right?\n\n1345\n01:06:02,070 --> 01:06:04,520\nThe DSC is part of system center.\n\n1346\n01:06:04,520 --> 01:06:07,570\nSo, I need to run that to have\nmy extension, so here I am.\n\n1347\n01:06:07,570 --> 01:06:11,000\nAnd I'm in my operations\nmanager command shell.\n\n1348\n01:06:11,000 --> 01:06:12,010\nAll right.\n\n1349\n01:06:12,010 --> 01:06:16,120\nMy first step is going to\nbe to create the MOF file.\n\n1350\n01:06:16,120 --> 01:06:19,500\nAn MOF file is what stores\nthe server's configurations.\n\n1351\n01:06:19,500 --> 01:06:23,505\nAnd we've got that nice little\nfunction that we can call to do it.\n\n1352\n01:06:23,505 --> 01:06:26,500\nNormally, you'd write it in that\nnice big format like they did and\n\n1353\n01:06:26,500 --> 01:06:30,450\nstick it in a PowerShell script and have\nthe PowerShell script generate it all.\n\n1354\n01:06:30,450 --> 01:06:33,872\nBut since I'm kinda doing this in real\ntime, I'm going to write it right here.\n\n1355\n01:06:33,872 --> 01:06:39,810\nAnd when we write it in line that\nwhole function gets stuck in one line.\n\n1356\n01:06:39,810 --> 01:06:43,750\nSo, it's going to look a little different\nformatting wise than what they did.\n\n1357\n01:06:43,750 --> 01:06:48,171\nSo, I'm just going to come in here and say\nconfiguration, right, that's the key word\n\n1358\n01:06:48,171 --> 01:06:52,400\nthat knows that we're going to be\ncreating a function to define MOF's.\n\n1359\n01:06:52,400 --> 01:06:52,940\nAnd I give it a name.\n\n1360\n01:06:52,940 --> 01:06:55,040\nI'm going to call this web server.\n\n1361\n01:06:55,040 --> 01:06:58,430\nSo, for any web server that I make I\ncan apply this configuration to it,\n\n1362\n01:06:58,430 --> 01:07:00,420\nto generate that configuration.\n\n1363\n01:07:00,420 --> 01:07:02,540\nAlright?\nAnd I'm going to say that I have\n\n1364\n01:07:02,540 --> 01:07:05,780\na parameter which will be\ndollar sign machine name.\n\n1365\n01:07:05,780 --> 01:07:08,560\nSo, this is right out of that\nexample we saw a minute ago.\n\n1366\n01:07:10,290 --> 01:07:11,550\nAll right.\n\n1367\n01:07:11,550 --> 01:07:16,720\nAnd in addition to that parameter I now\nneed to specify my various other settings.\n\n1368\n01:07:16,720 --> 01:07:21,664\nSo, I'm gonna go to my first node,\nand that node will be $MachineName.\n\n1369\n01:07:21,664 --> 01:07:24,280\nRight.\nI'm gonna provide it the node name when I\n\n1370\n01:07:24,280 --> 01:07:28,200\nrun the function, and\nthen in that function,\n\n1371\n01:07:28,200 --> 01:07:32,710\nI'm gonna say windows feature IIS.\n\n1372\n01:07:32,710 --> 01:07:34,400\nI know it says windows feature, but\n\n1373\n01:07:34,400 --> 01:07:38,260\nthe roles are still treated as feature\nin PowerShell for whatever reason.\n\n1374\n01:07:38,260 --> 01:07:40,500\nSo Windows feature IIS.\n\n1375\n01:07:41,670 --> 01:07:48,830\nAnd then inside of that, I'm gonna\nsay ensure equals present, all right?\n\n1376\n01:07:48,830 --> 01:07:54,140\nI wanna make sure that this is a web\nserver, that it's running IIS, all right?\n\n1377\n01:07:54,140 --> 01:07:58,060\nAnd then I'm gonna say name equals,\nweb-server.\n\n1378\n01:07:58,060 --> 01:07:59,280\nThat's the actual role.\n\n1379\n01:07:59,280 --> 01:08:03,240\nAll right, and\nI just need to close out my parentheses.\n\n1380\n01:08:03,240 --> 01:08:05,210\nNow, that's basically the same\nthing we saw in the example.\n\n1381\n01:08:05,210 --> 01:08:08,580\nI just put it all in one line\ninstead of breaking it up.\n\n1382\n01:08:08,580 --> 01:08:12,530\nIf I had just typed, configuration\nweb server open bracket enter.\n\n1383\n01:08:12,530 --> 01:08:16,120\nIt gets a little confused sometimes\nas far as knowing where we're at and\n\n1384\n01:08:16,120 --> 01:08:17,520\nwhether we're actually done.\n\n1385\n01:08:17,520 --> 01:08:20,470\nSo, I'll run that, and\napparently I've got a typo.\n\n1386\n01:08:20,470 --> 01:08:22,780\nLet's see where my mistake is here.\n\n1387\n01:08:23,800 --> 01:08:26,240\nOh, you know what, it doesn't\nlike the two different variables.\n\n1388\n01:08:26,240 --> 01:08:30,930\nI'm gonna leave ensure equals present off,\nbecause they didn't say it in the example,\n\n1389\n01:08:30,930 --> 01:08:32,460\nbut that's actually the default.\n\n1390\n01:08:32,460 --> 01:08:35,570\nThe default is to make sure it's present,\nso and not absent.\n\n1391\n01:08:35,570 --> 01:08:37,120\nSo, it just didn't like that\nI had them on the same line.\n\n1392\n01:08:37,120 --> 01:08:39,610\nI should've put a comma in there,\nbut I'll just wipe that one out.\n\n1393\n01:08:39,610 --> 01:08:41,690\nThat'll make it happy, there we go.\n\n1394\n01:08:41,690 --> 01:08:43,121\nAll right, so now,\n\n1395\n01:08:43,121 --> 01:08:49,850\nthis function says generate an MOF file\nthat verifies the web server is present.\n\n1396\n01:08:49,850 --> 01:08:51,640\nBut it doesn't actually generate the MOF\n\n1397\n01:08:51,640 --> 01:08:53,350\nfile because it didn't\nknow the server name.\n\n1398\n01:08:53,350 --> 01:08:54,950\nEven if I put it in there,\nit wouldn't know.\n\n1399\n01:08:54,950 --> 01:08:56,780\nIt's calling the function that does it.\n\n1400\n01:08:56,780 --> 01:08:58,500\nSo, now, I need to call that function.\n\n1401\n01:08:58,500 --> 01:09:01,480\nSo, the way we do it is we say web server,\nright?\n\n1402\n01:09:01,480 --> 01:09:04,150\nThat's what I was really putting\nright here when I said web server.\n\n1403\n01:09:04,150 --> 01:09:05,320\nThat's the name of the function.\n\n1404\n01:09:05,320 --> 01:09:07,015\nSo, you can call it whatever you want.\n\n1405\n01:09:07,015 --> 01:09:08,253\nCall it Bob.\n\n1406\n01:09:08,253 --> 01:09:12,355\nBut I cal it web server, and the only\nparameter I have is the machine name, so\n\n1407\n01:09:12,355 --> 01:09:15,955\nI say -machinename, and\nwhatever the name is.\n\n1408\n01:09:15,955 --> 01:09:18,855\nSo, I'll test this box, I'll say s,1.\n\n1409\n01:09:18,855 --> 01:09:21,735\nIf you leave it out,\nit'll default to a local host, and\n\n1410\n01:09:21,735 --> 01:09:25,170\nso it'll create one for\nyour local host, but I wanna do s,1.\n\n1411\n01:09:25,170 --> 01:09:27,100\nAll right, so I'll run that.\n\n1412\n01:09:27,100 --> 01:09:28,990\nIt's gonna call the function.\n\n1413\n01:09:28,990 --> 01:09:34,350\nThe function says to look for\nwhether IAS is installed on S,1 right?\n\n1414\n01:09:34,350 --> 01:09:36,190\nIt's just plugging that parameter in.\n\n1415\n01:09:36,190 --> 01:09:38,150\nAnd when it's done,\nit'll generate the MOF file.\n\n1416\n01:09:38,150 --> 01:09:40,350\nNow, notice how it's taking a minute?\n\n1417\n01:09:40,350 --> 01:09:43,570\nIt's not exactly the fastest\nthing on the planet.\n\n1418\n01:09:43,570 --> 01:09:47,640\nSo, it has to generate this file, and\nthe MOF file is considerably larger\n\n1419\n01:09:47,640 --> 01:09:50,430\nthan the function that we\nwrote just a moment ago.\n\n1420\n01:09:50,430 --> 01:09:53,670\nAnd I could then proceed to go and\nadd other servers in here.\n\n1421\n01:09:53,670 --> 01:09:56,860\nRight.\nMaybe I want to do SCCM01 also.\n\n1422\n01:09:56,860 --> 01:09:58,520\nI want that one to run the web server.\n\n1423\n01:09:58,520 --> 01:10:00,740\nAnd so, I can generate that one.\n\n1424\n01:10:00,740 --> 01:10:04,680\nThat one's going to run faster\nbecause it's already generated\n\n1425\n01:10:04,680 --> 01:10:07,680\none MOF this way and the only thing\nthat's different is the name.\n\n1426\n01:10:07,680 --> 01:10:10,332\n>> And so now,\nit creates it really quick so\n\n1427\n01:10:10,332 --> 01:10:13,350\nbuilding that first MOF\ndoes take some time.\n\n1428\n01:10:13,350 --> 01:10:14,530\nAll right.\n\n1429\n01:10:14,530 --> 01:10:18,020\nNow, it created separate MOF files for\neach server.\n\n1430\n01:10:18,020 --> 01:10:19,250\nThat's what it does, right?\n\n1431\n01:10:19,250 --> 01:10:20,340\nWhen you run that function,\n\n1432\n01:10:20,340 --> 01:10:24,360\nit creates separate MOF files for\neach node that was named in the system.\n\n1433\n01:10:24,360 --> 01:10:26,750\nAnd it puts them into subdirectories.\n\n1434\n01:10:26,750 --> 01:10:29,450\nThe subdirectory is named\nafter the function.\n\n1435\n01:10:29,450 --> 01:10:31,810\nSo, if I go into that subdirectory, and\n\n1436\n01:10:31,810 --> 01:10:33,920\ntake a look in there,\nthere's my MOF files.\n\n1437\n01:10:33,920 --> 01:10:34,450\nRight?\n\n1438\n01:10:34,450 --> 01:10:38,490\nAnd if I crack one open,\nlet me just pull one of those open.\n\n1439\n01:10:38,490 --> 01:10:41,260\nAll right,\nwhat you're gonna see is that here it's\n\n1440\n01:10:41,260 --> 01:10:44,420\ntalking about that Windows IIS feature and\nchecking it.\n\n1441\n01:10:44,420 --> 01:10:45,370\nThere's the web server.\n\n1442\n01:10:45,370 --> 01:10:46,710\nThat's what I told it.\n\n1443\n01:10:46,710 --> 01:10:49,460\nBut it's putting a lot of\nother stuff in here too.\n\n1444\n01:10:49,460 --> 01:10:53,470\nWho is the author, what date it\nwas generated, the target node.\n\n1445\n01:10:53,470 --> 01:10:56,840\nAnd some of this other information\nthat goes along with it.\n\n1446\n01:10:56,840 --> 01:10:59,960\nAnd there's a ton more you can put in\nhere if you wanted to natively write\n\n1447\n01:10:59,960 --> 01:11:01,240\nthe MOF file.\n\n1448\n01:11:01,240 --> 01:11:03,588\nThis way it just makes it automatic.\n\n1449\n01:11:05,546 --> 01:11:06,353\nAll right,\n\n1450\n01:11:06,353 --> 01:11:11,620\nnow that I've got my configuration I\njust need to run it against the machine.\n\n1451\n01:11:11,620 --> 01:11:14,170\nAnd when you're running against the\nmachine if it's already compliant then it\n\n1452\n01:11:14,170 --> 01:11:15,000\njust tells you that.\n\n1453\n01:11:15,000 --> 01:11:15,890\nYou're compliant.\n\n1454\n01:11:15,890 --> 01:11:17,070\nWork is done.\n\n1455\n01:11:17,070 --> 01:11:20,460\nBut if its not,\nthen it will take corrective action.\n\n1456\n01:11:20,460 --> 01:11:23,720\nSo, if it's missing the web server\nit's going to install it, and\n\n1457\n01:11:23,720 --> 01:11:25,116\nso that's what I'll do.\n\n1458\n01:11:25,116 --> 01:11:28,970\nI'm gonna say, Start-DscConfiguration.\n\n1459\n01:11:28,970 --> 01:11:31,720\nSo, that's how it knows I'm\nabout to start a configuration.\n\n1460\n01:11:31,720 --> 01:11:35,060\nAnd then I tell it the file\nthat I want it to bring in.\n\n1461\n01:11:35,060 --> 01:11:40,290\nAnd so, the file I want is right\nhere in this particular path.\n\n1462\n01:11:40,290 --> 01:11:41,620\nAnd you don't actually\nspecify the file name.\n\n1463\n01:11:41,620 --> 01:11:44,920\nIt's going to run all of\nthe MOFs in that directory.\n\n1464\n01:11:44,920 --> 01:11:47,600\nI'm saying dot slash,\nthat means my current directory.\n\n1465\n01:11:47,600 --> 01:11:50,160\nI could say d colon slash webserver.\n\n1466\n01:11:50,160 --> 01:11:51,300\nBecause that's where those files are.\n\n1467\n01:11:52,320 --> 01:11:54,700\nBut I'll just specify that,\nI don't think I need the trailing slash.\n\n1468\n01:11:55,880 --> 01:11:58,120\nNow, the default is that it'll\njust run in the background but\n\n1469\n01:11:58,120 --> 01:12:00,510\nI'm gonna tell it that I wanna see it.\n\n1470\n01:12:00,510 --> 01:12:03,160\nAnd I want it to be verbose so\nthat I know exactly what's going on.\n\n1471\n01:12:04,390 --> 01:12:07,120\nThat's gonna pull the directory for\nthe MOFs.\n\n1472\n01:12:07,120 --> 01:12:10,530\nIt's then gonna reach out to those two\nservers and see if they're running IIS.\n\n1473\n01:12:10,530 --> 01:12:14,590\nIf they have a web server role installed\nand if they do, it'll let me know.\n\n1474\n01:12:14,590 --> 01:12:16,120\nAnd if they don't, well, it'll install it.\n\n1475\n01:12:16,120 --> 01:12:16,880\n>> It'll install it.\n\n1476\n01:12:18,040 --> 01:12:21,270\n>> All right, so there it goes,\nit's running, and it ran.\n\n1477\n01:12:21,270 --> 01:12:22,833\nAll right so very exciting.\n\n1478\n01:12:22,833 --> 01:12:26,334\nSo, if we go up here and\njust double check kind of what it's doing.\n\n1479\n01:12:26,334 --> 01:12:27,883\nIt shows that it's kicking off.\n\n1480\n01:12:27,883 --> 01:12:31,242\nAnd you'll notice with each\nmessage that it displays,\n\n1481\n01:12:31,242 --> 01:12:33,748\nit kind of prefixes it with which server.\n\n1482\n01:12:33,748 --> 01:12:36,550\nSo here's SCCM01, right?\n\n1483\n01:12:36,550 --> 01:12:38,780\nSo it's starting, and it runs its test.\n\n1484\n01:12:38,780 --> 01:12:42,640\nSo here it is testing it, and\nthen it says the operation started, and\n\n1485\n01:12:42,640 --> 01:12:44,740\nit's letting me know the LCM call arrived.\n\n1486\n01:12:44,740 --> 01:12:47,510\nSo it reached out to that system,\nand here it's testing S, 1.\n\n1487\n01:12:47,510 --> 01:12:52,036\nSo it's reaching out to those, and\nit's performing the get Windows feature.\n\n1488\n01:12:52,036 --> 01:12:53,318\nAll right?\n\n1489\n01:12:53,318 --> 01:12:57,810\nAfter that, I can see that\nit's ending the test, right?\n\n1490\n01:12:57,810 --> 01:13:01,230\nAnd the get Windows feature succeeded, so\n\n1491\n01:13:01,230 --> 01:13:05,280\nthat's letting me know that it does\nhave the web server installed.\n\n1492\n01:13:05,280 --> 01:13:07,000\nAnd I should see two of those,\nwhere's the other one?\n\n1493\n01:13:07,000 --> 01:13:07,770\nOh, there it is.\n\n1494\n01:13:07,770 --> 01:13:08,850\nThere's the other one.\n\n1495\n01:13:08,850 --> 01:13:12,840\nSo I do know that both servers\nare already running IIS.\n\n1496\n01:13:12,840 --> 01:13:16,110\nIt didn't have to take any action,\nand it's done.\n\n1497\n01:13:16,110 --> 01:13:19,200\nAll right, so I can now set this to run.\n\n1498\n01:13:19,200 --> 01:13:21,760\nI can schedule it in task scheduler, or\n\n1499\n01:13:21,760 --> 01:13:26,030\nI can set it up as some kind of\nlike automated test in ESCROM.\n\n1500\n01:13:26,030 --> 01:13:30,070\nSo any time we discover a new server\nthat fits these criteria, run this.\n\n1501\n01:13:30,070 --> 01:13:32,050\nAnd generate it and go.\n\n1502\n01:13:32,050 --> 01:13:33,040\nAnd this can reach in and\n\n1503\n01:13:33,040 --> 01:13:37,990\ndo all sorts of advanced functionality\nbecause it's in the Power Shell.\n\n1504\n01:13:37,990 --> 01:13:42,700\nI wonder, I guess I'm probably running IIS\non all of my different servers, aren't I?\n\n1505\n01:13:42,700 --> 01:13:45,870\nWhich one of these wouldn't require IIS?\n\n1506\n01:13:45,870 --> 01:13:48,880\nYou'd think pretty much\nall of system center does.\n\n1507\n01:13:48,880 --> 01:13:50,230\nYeah, maybe let's see.\n\n1508\n01:13:50,230 --> 01:13:53,150\nLet's see if the domain controller\ndoesn't or I guess I could test for\n\n1509\n01:13:53,150 --> 01:13:55,570\nanother service like DHCP.\n\n1510\n01:13:55,570 --> 01:14:00,570\nYou have to remember the official\nMicrosoft role name.\n\n1511\n01:14:00,570 --> 01:14:01,590\nAnd I think that one's what?\n\n1512\n01:14:01,590 --> 01:14:02,710\nA DHCP-server.\n\n1513\n01:14:02,710 --> 01:14:04,566\n>> I think it's a DHCP-server.\n\n1514\n01:14:04,566 --> 01:14:06,480\nDHCP all capitalized.\n\n1515\n01:14:06,480 --> 01:14:08,130\n>> I guess we'd know if it was wrong.\n\n1516\n01:14:08,130 --> 01:14:10,458\n>> You could do a get-windowsfeature\nfrom powershell there and\n\n1517\n01:14:10,458 --> 01:14:11,360\njust host them anyway.\n\n1518\n01:14:11,360 --> 01:14:11,860\n>> Oh yeah.\n\n1519\n01:14:13,600 --> 01:14:17,440\nWindows.\nIt would've been faster to type it.\n\n1520\n01:14:17,440 --> 01:14:19,030\nSo let's go in and find out.\n\n1521\n01:14:19,030 --> 01:14:22,240\nWe'll test for something like\nDHCP that I know they don't have.\n\n1522\n01:14:22,240 --> 01:14:23,250\nAnd then we can test.\n\n1523\n01:14:23,250 --> 01:14:25,925\nAnd it'll basically see that\nit's not compliant, and\n\n1524\n01:14:25,925 --> 01:14:27,545\ntakes the action to correct it.\n\n1525\n01:14:27,545 --> 01:14:30,125\nSo apparently we can just sit here and\nwait.\n\n1526\n01:14:32,335 --> 01:14:33,385\nThere we go.\n\n1527\n01:14:33,385 --> 01:14:36,712\nSo we're gonna find DHCP in this list.\n\n1528\n01:14:36,712 --> 01:14:37,792\nMaybe.\n\n1529\n01:14:40,695 --> 01:14:43,485\n>> [LAUGH] Wait, go back down, I think I\n>> Did I go too fast?\n\n1530\n01:14:43,485 --> 01:14:45,685\n>> Thought I saw it, little further.\n\n1531\n01:14:47,070 --> 01:14:51,520\nThought I saw something, role,\nthat was role of administration tools,\n\n1532\n01:14:51,520 --> 01:14:53,500\nsorry, yep, keep going.\n\n1533\n01:14:53,500 --> 01:14:58,030\n>> Yeah, a lot of these are just\nthe features, there is IIS right there,\n\n1534\n01:14:58,030 --> 01:14:59,560\nthat giant thing.\n\n1535\n01:14:59,560 --> 01:15:00,910\nSo it shouldn't be too far.\n\n1536\n01:15:00,910 --> 01:15:03,215\nThere DHCP, oh it's just plain DHCP.\n\n1537\n01:15:03,215 --> 01:15:03,855\nAll right.\n\n1538\n01:15:03,855 --> 01:15:06,108\nSo what we'll take DHCP, right?\n\n1539\n01:15:06,108 --> 01:15:12,640\nAnd let me go way back to that function\nthat I wrote way back in the beginning.\n\n1540\n01:15:12,640 --> 01:15:14,170\nThis guy right here.\n\n1541\n01:15:14,170 --> 01:15:16,358\nAnd I'm going to change that to be DHCP.\n\n1542\n01:15:16,358 --> 01:15:21,160\nAll right,\nthat's what I'm looking for now and\n\n1543\n01:15:21,160 --> 01:15:26,400\nactually the feature is I believe call\nDHCP also so nothing too special there.\n\n1544\n01:15:26,400 --> 01:15:29,080\nActually wait, is that true?\n\n1545\n01:15:29,080 --> 01:15:30,320\nShoot.\n\n1546\n01:15:30,320 --> 01:15:31,170\nI didn't check the name.\n\n1547\n01:15:31,170 --> 01:15:32,594\nWell I'm pretty sure that's true,\nwe'll find out.\n\n1548\n01:15:32,594 --> 01:15:33,600\n>> We'll find out.\n\n1549\n01:15:33,600 --> 01:15:35,420\n[LAUGH]\n>> [LAUGH] Yeah it will let you know.\n\n1550\n01:15:35,420 --> 01:15:37,429\nAw man, and then I lost it.\n\n1551\n01:15:37,429 --> 01:15:39,010\n[LAUGH]\n>> [LAUGH]\n\n1552\n01:15:39,010 --> 01:15:40,540\n>> Alright well let me just retype that\n\n1553\n01:15:40,540 --> 01:15:44,610\nreal quick, okay so that's going to\nbe called DHCP and we'll get rid of\n\n1554\n01:15:44,610 --> 01:15:49,250\nthis present bit so that goes back so\nI'm just going to modify this slightly.\n\n1555\n01:15:49,250 --> 01:15:52,300\nAnd get that punched in.\n\n1556\n01:15:52,300 --> 01:15:56,095\nAnd for the machine name, instead of doing\na parameter, because I'm kind of lazy\n\n1557\n01:15:56,095 --> 01:15:59,230\nhere, we'll just go ahead and\ntype in the server name this time, so\n\n1558\n01:15:59,230 --> 01:16:02,540\nI'll call SCOM01, and\nI'll just get rid of that parameter.\n\n1559\n01:16:02,540 --> 01:16:07,260\nSo, now, I'm creating a function\nwhich I'll just call DHCP Server and\n\n1560\n01:16:07,260 --> 01:16:08,640\nit's tied to SCOM01.\n\n1561\n01:16:08,640 --> 01:16:10,380\nThis is not so flexible anymore, right?\n\n1562\n01:16:10,380 --> 01:16:12,490\nIt's just gonna work for\nthat one server and\n\n1563\n01:16:12,490 --> 01:16:16,480\nit's gonna check to make sure DHCP is\ninstalled and take care of it, all right?\n\n1564\n01:16:16,480 --> 01:16:19,205\nSo now when I run DHCP server.\n\n1565\n01:16:19,205 --> 01:16:20,985\nThat's gonna call that function.\n\n1566\n01:16:20,985 --> 01:16:23,935\nIt writes that file,\nso now I've got it, and\n\n1567\n01:16:23,935 --> 01:16:30,325\nif I go into that directory I can see it\nright there, and if I type that file out.\n\n1568\n01:16:30,325 --> 01:16:31,155\nThere it is.\n\n1569\n01:16:31,155 --> 01:16:34,535\nAnd there's that windows featured DHCP\nthat it's going to be double checking.\n\n1570\n01:16:34,535 --> 01:16:41,020\nAnd now I can apply it by going\nback to my start dash, there we go.\n\n1571\n01:16:41,020 --> 01:16:45,728\nAnd I just need to point it\nto that different directory,\n\n1572\n01:16:45,728 --> 01:16:49,250\nand I'll say dash wait and dash verbose.\n\n1573\n01:16:49,250 --> 01:16:52,990\nAll right, so this time I don't have\nDHCP installed on that server, and so\n\n1574\n01:16:52,990 --> 01:16:55,520\nwhen this runs it's gonna reach out and\ncheck.\n\n1575\n01:16:55,520 --> 01:16:57,400\nAnd it's gonna see that it's missing.\n\n1576\n01:16:57,400 --> 01:17:01,460\nAnd what we should see this\ntime is it takes a lot longer.\n\n1577\n01:17:01,460 --> 01:17:03,282\nOr it totally screws up\nif I type the name wrong.\n\n1578\n01:17:03,282 --> 01:17:05,520\n[LAUGH] So one or\nthe other is gonna happen.\n\n1579\n01:17:05,520 --> 01:17:09,150\nSo it's querying for it right here and\nit should happen, right?\n\n1580\n01:17:09,150 --> 01:17:11,130\nIt's already taken longer\nthan the other one, right?\n\n1581\n01:17:11,130 --> 01:17:13,090\nJust testing for success is easy.\n\n1582\n01:17:13,090 --> 01:17:16,010\nRemediating it though,\nit's gotta install the roll.\n\n1583\n01:17:16,010 --> 01:17:18,650\n>> Yeah you can see it doing\npre-req checks right now.\n\n1584\n01:17:18,650 --> 01:17:19,970\n>> Yep.\nSo there it goes.\n\n1585\n01:17:19,970 --> 01:17:21,330\nAnd now it's remediating.\n\n1586\n01:17:21,330 --> 01:17:22,860\nI can set this to run periodically.\n\n1587\n01:17:22,860 --> 01:17:27,930\nAnd if anybody ever removed DHCP from\nthat server it would put it back, right?\n\n1588\n01:17:27,930 --> 01:17:30,168\nIt would just put it right\nback since they removed it.\n\n1589\n01:17:30,168 --> 01:17:32,535\nNow with rolls you don't normally\nwant to mess around with that, but\n\n1590\n01:17:32,535 --> 01:17:34,415\nwith something like an update you would.\n\n1591\n01:17:34,415 --> 01:17:36,855\nRight?\nMaybe you have monitoring software and\n\n1592\n01:17:36,855 --> 01:17:38,935\nsomebody uninstalls it trying to be slick.\n\n1593\n01:17:38,935 --> 01:17:41,545\nYou just put that monitoring software\nright back on there, you know,\n\n1594\n01:17:41,545 --> 01:17:44,415\nthat kind of thing becomes really easy.\n\n1595\n01:17:44,415 --> 01:17:48,735\nYou can even do things like deploying\nthe SCOM agent, that collection agent,\n\n1596\n01:17:48,735 --> 01:17:51,635\nor the ACS agent for\nthe audit collection service.\n\n1597\n01:17:51,635 --> 01:17:53,025\nYou can push those out with this.\n\n1598\n01:17:53,025 --> 01:17:54,440\nYou can do all sorts of magic with it.\n\n1599\n01:17:54,440 --> 01:17:56,200\nRight?\n\n1600\n01:17:56,200 --> 01:18:00,590\nBut the goal is basically that it's\ncommand line driven and really flexible.\n\n1601\n01:18:00,590 --> 01:18:05,720\nIf I jump over to my domain\ncontroller now I should see that I\n\n1602\n01:18:05,720 --> 01:18:09,080\nnow have DHCP installed and, you know what\nI'm not gonna wait on that stupid search.\n\n1603\n01:18:09,080 --> 01:18:11,700\nLet me go to my server manager and\nsee if the role is present.\n\n1604\n01:18:11,700 --> 01:18:14,780\nI should have the DHCP\nrole on this server now.\n\n1605\n01:18:14,780 --> 01:18:16,880\nAnd soon as it inventories,\nwe'll find that out.\n\n1606\n01:18:18,240 --> 01:18:19,990\nThere it is and there's the role.\n\n1607\n01:18:19,990 --> 01:18:20,630\nAll right.\n\n1608\n01:18:20,630 --> 01:18:22,420\nSo, pretty easy to throw out there.\n\n1609\n01:18:22,420 --> 01:18:23,940\nIt does show configuration required,\nright,\n\n1610\n01:18:23,940 --> 01:18:25,210\ncuz we haven't done an official set up.\n\n1611\n01:18:25,210 --> 01:18:26,590\nWe just installed the rolls.\n\n1612\n01:18:26,590 --> 01:18:28,260\nYou'll normally follow it up, all right.\n\n1613\n01:18:29,440 --> 01:18:32,800\nOkay, so that's another great tool\nwe have for automated remediation.\n\n1614\n01:18:32,800 --> 01:18:34,100\nIt does take some work, though.\n\n1615\n01:18:34,100 --> 01:18:36,740\nRight, it's not completely automated,\nright?\n\n1616\n01:18:36,740 --> 01:18:39,830\n>> Once you get it set up, once you\ntake the time to write those scripts,\n\n1617\n01:18:39,830 --> 01:18:42,720\nget everything configured where you want,\nthen you can kind of automate it.\n\n1618\n01:18:42,720 --> 01:18:45,000\nBut it's a little more powerful\nthan some of the other solutions.\n\n1619\n01:18:45,000 --> 01:18:48,130\nA little more work, a little more power.\n\n1620\n01:18:48,130 --> 01:18:50,805\n>> Yeah.\nAnd the idea is that you classify your\n\n1621\n01:18:50,805 --> 01:18:55,335\ndifferent servers, you create these\nDSC definitions, these mock files.\n\n1622\n01:18:55,335 --> 01:18:57,275\nFor each of the different\nclass of server that you have.\n\n1623\n01:18:57,275 --> 01:18:59,805\nSo when you're spawning\nmultiple web servers,\n\n1624\n01:18:59,805 --> 01:19:03,195\nyou got a consistent configuration\nthat just gets thrown on it.\n\n1625\n01:19:03,195 --> 01:19:07,290\nYou could go into SCCM,\nand use packages and so\n\n1626\n01:19:07,290 --> 01:19:10,200\non, and deploy out that way,\nbut SCCM is really designed for\n\n1627\n01:19:10,200 --> 01:19:13,640\ndoing the initial deployment,\nnot necessarily maintaining it,\n\n1628\n01:19:13,640 --> 01:19:17,480\nwhereas the DSC, that'll maintain that\nconfiguration even after deployment.\n\n1629\n01:19:17,480 --> 01:19:20,970\nSo if people start to modify the configs,\nit puts them back again.\n\n1630\n01:19:20,970 --> 01:19:24,203\nSo, some of this you can\nachieve with other tools, but\n\n1631\n01:19:24,203 --> 01:19:27,450\nthe DSC is definitely one\nthat should be on your radar.\n\n1632\n01:19:27,450 --> 01:19:30,390\nAll right, well that pretty\nmuch wraps up this episode.\n\n1633\n01:19:30,390 --> 01:19:34,060\nWe covered a lot of different stuff for\nautomated remediation.\n\n1634\n01:19:34,060 --> 01:19:34,650\nRight?\n\n1635\n01:19:34,650 --> 01:19:37,860\nWe started with update\nbaselines in the SCVMM,\n\n1636\n01:19:37,860 --> 01:19:42,550\njust applying Windows updates to our\nHyper v infrastructure, right, and\n\n1637\n01:19:42,550 --> 01:19:45,000\ndoing it smartly and\npreserving our cluster health.\n\n1638\n01:19:45,000 --> 01:19:45,730\n>> Right.\n\n1639\n01:19:45,730 --> 01:19:49,750\n>> We then took a look at the desired\nconfiguration manager, VCM.\n\n1640\n01:19:49,750 --> 01:19:51,500\n>> Configuration basis, yeah.\n\n1641\n01:19:51,500 --> 01:19:52,570\n>> Which was pretty cool too.\n\n1642\n01:19:52,570 --> 01:19:53,380\nIt was pretty flexible.\n\n1643\n01:19:53,380 --> 01:19:55,220\nIt was a part of SCOM.\n\n1644\n01:19:55,220 --> 01:19:58,590\nAnd part of the system's\ncenter configuration manager.\n\n1645\n01:19:58,590 --> 01:20:01,160\nIt could remediate some things but\nnot everything.\n\n1646\n01:20:01,160 --> 01:20:03,100\nRight?\nThere are some limits there.\n\n1647\n01:20:03,100 --> 01:20:05,630\nWe also got a chance to take a look at.\n\n1648\n01:20:05,630 --> 01:20:06,570\nWe did the DSC.\n\n1649\n01:20:06,570 --> 01:20:08,410\nOh, dynamic optimization, DO MPO.\n\n1650\n01:20:08,410 --> 01:20:09,710\n>> DO MPO.\n\n1651\n01:20:09,710 --> 01:20:13,770\n>> So the automatically moving our\nresources in a Hyper v cluster based on\n\n1652\n01:20:13,770 --> 01:20:15,390\nresource utilization.\n\n1653\n01:20:15,390 --> 01:20:17,480\nAnd we wrapped up with good old DSC,\nright?\n\n1654\n01:20:17,480 --> 01:20:20,890\nWhich is really the most\npowerful of all the tools.\n\n1655\n01:20:20,890 --> 01:20:23,220\nAll right,\nwell I think that's about it for us today.\n\n1656\n01:20:23,220 --> 01:20:26,580\nLet me remind you guys if you\nhave questions on any of this,\n\n1657\n01:20:26,580 --> 01:20:27,790\nfeel free to ask.\n\n1658\n01:20:27,790 --> 01:20:30,310\nLive during the show you\ncan go to itpro.tv/live and\n\n1659\n01:20:30,310 --> 01:20:32,450\nyou'll see the chat box made for video.\n\n1660\n01:20:32,450 --> 01:20:33,290\nPost your questions there.\n\n1661\n01:20:33,290 --> 01:20:34,980\nWe monitor and answer during the show.\n\n1662\n01:20:34,980 --> 01:20:39,100\nIf you have questions after the show,\nwell we're not live.\n\n1663\n01:20:39,100 --> 01:20:41,360\nSo check us out in the Q&A forums.\n\n1664\n01:20:41,360 --> 01:20:44,490\nAt the top of every page on the IT Pro TV\nsite you'll see a link that says Q&A.\n\n1665\n01:20:44,490 --> 01:20:46,810\nIt'll take you into the forums and\nyou can post there.\n\n1666\n01:20:46,810 --> 01:20:49,020\nAnd we'll get back to you as\nsoon as we check it out, right?\n\n1667\n01:20:49,020 --> 01:20:51,170\nWe constantly monitor the forums.\n\n1668\n01:20:51,170 --> 01:20:53,080\nSo take advantage of those resources.\n\n1669\n01:20:53,080 --> 01:20:54,090\nThey are there for you.\n\n1670\n01:20:54,090 --> 01:20:56,960\nAll right,\nwell I hope you guys enjoy the show.\n\n1671\n01:20:56,960 --> 01:20:58,990\nSigning off for ITpro TV, I'm Don Pezet.\n\n1672\n01:20:58,990 --> 01:20:59,900\n>> And I'm Mike Rodrick.\n\n1673\n01:20:59,900 --> 01:21:01,529\n>> And we will see you next time.\n\n1674\n01:21:01,529 --> 01:21:05,819\n[MUSIC]\n\n",
          "vimeoId": "110354323"
        }
      ],
      "title": "Manage and maintain a server infrastructure"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "173",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-0-overview-102814.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-0-overview-102814-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-0-overview-102814-sm.jpg",
          "title": "Highly Available Infrastructure",
          "transcript": "1\n00:00:00,800 --> 00:00:10,120\nIn our second objective group,\n\n2\n00:00:10,120 --> 00:00:12,200\nwe're going to take a look at planning and\n\n3\n00:00:12,200 --> 00:00:16,380\nimplementing a highly available\nenterprise infrastructure.\n\n4\n00:00:16,380 --> 00:00:21,130\nThis entire section Is about\nredundancy and resiliency,\n\n5\n00:00:21,130 --> 00:00:25,205\nsurviving failure in an environment\nto keep your business up and running.\n\n6\n00:00:25,205 --> 00:00:27,620\nThere's a lot of different ways to do it.\n\n7\n00:00:27,620 --> 00:00:30,290\nMicrosoft divides it up into\nseveral different sections and\n\n8\n00:00:30,290 --> 00:00:32,200\nlets us break that down.\n\n9\n00:00:32,200 --> 00:00:37,470\nThe first section in that objective is\nplan and implement failover clustering.\n\n10\n00:00:37,470 --> 00:00:41,560\nIt's probably one of the most useful tools\nfor providing availability in failure.\n\n11\n00:00:41,560 --> 00:00:44,640\nYou can have more than one\nserver performing the same job.\n\n12\n00:00:44,640 --> 00:00:47,640\nSo if one server fails,\nthe other one just takes over.\n\n13\n00:00:47,640 --> 00:00:50,320\nIt's ready to go to replace that role.\n\n14\n00:00:50,320 --> 00:00:51,700\nYou've had a physical server fail,\n\n15\n00:00:51,700 --> 00:00:55,620\nbut your end users don't know it cuz\nsomebody's there to pick up the slack.\n\n16\n00:00:55,620 --> 00:00:58,355\nAnd that's a key component in\nmaintaining high availability.\n\n17\n00:00:58,355 --> 00:00:59,510\n>> Mm-hm.\n\n18\n00:00:59,510 --> 00:01:02,540\nAnd that second we're gonna talk about,\nplanning and implementing a highly\n\n19\n00:01:02,540 --> 00:01:05,800\navailable network service or\nhighly available network services.\n\n20\n00:01:05,800 --> 00:01:08,840\nSpecifically we're gonna look at\nthings like network load balancing.\n\n21\n00:01:08,840 --> 00:01:12,050\nHow we can implement that,\nincluding fault tolerant networks.\n\n22\n00:01:12,050 --> 00:01:15,510\nAnd specifically implementing that through\nour SCVMM that we've been looking at.\n\n23\n00:01:15,510 --> 00:01:16,010\n>> Mm hm.\n\n24\n00:01:17,820 --> 00:01:19,480\nThe third thing we'll cover is plan and\n\n25\n00:01:19,480 --> 00:01:22,700\nimplement highly available\nstorage solutions.\n\n26\n00:01:22,700 --> 00:01:26,690\nWhen you've got virtual machines\nstored somewhere, right [LAUGH],\n\n27\n00:01:26,690 --> 00:01:29,952\nif that storage fails you're going to be\nin big trouble even if you've got multiple\n\n28\n00:01:29,952 --> 00:01:30,980\nfront-end servers.\n\n29\n00:01:30,980 --> 00:01:33,310\nSo we need some way to make\nour storage redundant and\n\n30\n00:01:33,310 --> 00:01:35,300\nbe able to survive those\nkinds of failures.\n\n31\n00:01:35,300 --> 00:01:37,540\nWe're gonna talk about some of the\ndifferent solutions that are out there and\n\n32\n00:01:37,540 --> 00:01:39,680\nwhat we can use to achieve that.\n\n33\n00:01:39,680 --> 00:01:42,970\n>> Then we'll head on over to planning and\nimplementing highly available roles,\n\n34\n00:01:42,970 --> 00:01:47,140\nthings like DHCP, Hyper-V clustering,\nthings like that,\n\n35\n00:01:47,140 --> 00:01:51,070\nmaking sure that all of our primary\ninfrastructure roles are redundant and\n\n36\n00:01:51,070 --> 00:01:53,520\nwe can survive any types\nof failures there.\n\n37\n00:01:53,520 --> 00:01:59,639\nAlso doing a little redundancy on scripts\nand generic service clustering roles.\n\n38\n00:02:01,090 --> 00:02:04,730\n>> And then last part, well, it's plan and\nimplement a business continuity and\n\n39\n00:02:04,730 --> 00:02:06,780\ndisaster recovery solution.\n\n40\n00:02:06,780 --> 00:02:08,770\nThis is the full package.\n\n41\n00:02:08,770 --> 00:02:11,390\nWe take a look at business continuity,\n\n42\n00:02:11,390 --> 00:02:14,530\nwhich is staying in business\nwhile we have a failure.\n\n43\n00:02:14,530 --> 00:02:18,370\nWe are not running at 100% but\nwe are at least still operational.\n\n44\n00:02:18,370 --> 00:02:22,200\nAnd then disaster recovery\nwhich is getting back to 100%.\n\n45\n00:02:22,200 --> 00:02:27,910\nThey're two separate plans, but we need\nto have a good handle on each of them.\n\n46\n00:02:27,910 --> 00:02:30,675\nOtherwise, when a failure does occur,\nwe're going to be scrambling.\n\n47\n00:02:30,675 --> 00:02:35,130\nIt's a real important section there as\nwe group it all together into a full\n\n48\n00:02:35,130 --> 00:02:38,580\nstrategy, using all the different\ncomponents from the rest of the section.\n\n49\n00:02:39,660 --> 00:02:41,780\nAll right, so\nif that sounds exciting to you,\n\n50\n00:02:41,780 --> 00:02:44,950\nthen you are in the absolute right place.\n\n51\n00:02:44,950 --> 00:02:48,113\nWe're ready to get started,\nso we'll see you then.\n\n52\n00:02:48,113 --> 00:02:53,214\n[SOUND]\n\n",
          "vimeoId": "110354327"
        },
        {
          "description": "",
          "length": "4604",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-102914.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-102914-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-102914-sm.jpg",
          "title": "Failover Clustering",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,503 --> 00:00:36,212\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:36,212 --> 00:00:38,671\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,671 --> 00:00:40,254\nI'm your host Don Pezet.\n\n5\n00:00:40,254 --> 00:00:41,611\nBack again with Mr. Mike Rodrick.\n\n6\n00:00:41,611 --> 00:00:42,260\nHow's it going Mike?\n\n7\n00:00:42,260 --> 00:00:42,780\nFantastic.\n\n8\n00:00:42,780 --> 00:00:43,760\nHow you doing today Don?\n\n9\n00:00:43,760 --> 00:00:45,680\nDoing swell as always.\n\n10\n00:00:45,680 --> 00:00:48,270\nI'm in my perpetual state of swellness.\n\n11\n00:00:48,270 --> 00:00:49,210\nOr I'm swelling.\n\n12\n00:00:49,210 --> 00:00:51,070\nShould I take an anti-inflammatory?\n\n13\n00:00:51,070 --> 00:00:53,000\nYeah, a little ibuprofen there.\n\n14\n00:00:53,000 --> 00:00:55,220\nWell, medical conditions aside.\n\n15\n00:00:55,220 --> 00:00:59,800\nToday, we're gonna be diving into\nthe world of Microsoft clustering.\n\n16\n00:00:59,800 --> 00:01:04,250\nAnd we've kind of talked about clustering\nin some of the earlier episodes already.\n\n17\n00:01:04,250 --> 00:01:08,120\nBut in this one we're going to focus\nspecifically on fail over clustering.\n\n18\n00:01:08,120 --> 00:01:11,470\nAnd if you want to provide high\navailability in your enterprise\n\n19\n00:01:11,470 --> 00:01:14,710\nenvironment, clustering is\ntypically your go to guy.\n\n20\n00:01:14,710 --> 00:01:15,590\nNot always, right?\n\n21\n00:01:15,590 --> 00:01:19,330\nSometimes our software has it's own built\nin redundancies that we can make use of\n\n22\n00:01:19,330 --> 00:01:20,550\nthat don't require clustering.\n\n23\n00:01:20,550 --> 00:01:23,640\nMicrosoft Exchange is\na great example of that.\n\n24\n00:01:23,640 --> 00:01:27,680\nBut, there's other products that can fully\nintegrate with fail over clustering and\n\n25\n00:01:27,680 --> 00:01:28,740\ntake advantage of that.\n\n26\n00:01:28,740 --> 00:01:30,950\nSo that if a physical server fails,\n\n27\n00:01:30,950 --> 00:01:35,270\nanother server is standing by ready to\ntake over that role and jump to it.\n\n28\n00:01:36,880 --> 00:01:40,632\nNow, in the old days,\nwe clustered- Way back then.\n\n29\n00:01:40,632 --> 00:01:42,210\n[LAUGH] Yeah.\nWe clustered based on,\n\n30\n00:01:42,210 --> 00:01:45,642\nwhen I say the old days,\nI'm really talking three, four years ago.\n\n31\n00:01:45,642 --> 00:01:48,470\n[LAUGH] Maybe eight years\nif it's really old.\n\n32\n00:01:48,470 --> 00:01:51,320\nThat's the days of antiquity.\n\n33\n00:01:51,320 --> 00:01:53,820\nSo, just a handful of years ago, really.\n\n34\n00:01:53,820 --> 00:01:58,370\nWe'd start clustering by figuring out what\napplication we were going to cluster.\n\n35\n00:01:58,370 --> 00:02:00,860\nAnd then figuring out how to make\nthat application cluster friendly.\n\n36\n00:02:00,860 --> 00:02:02,780\nSo that it would be able\nto fail from node to node.\n\n37\n00:02:02,780 --> 00:02:04,070\nThat's the old model.\n\n38\n00:02:04,070 --> 00:02:06,530\nThe new model is that we\nuse virtual machines.\n\n39\n00:02:06,530 --> 00:02:10,420\nAnd it's the virtual machines\nthat fail over from node to node.\n\n40\n00:02:10,420 --> 00:02:12,940\nAnd the reason that model\nis a lot more accepted is,\n\n41\n00:02:12,940 --> 00:02:17,460\nbecause your software doesn't even\nhave to know that the cluster exists.\n\n42\n00:02:17,460 --> 00:02:19,790\nIt's invisible to the software.\n\n43\n00:02:19,790 --> 00:02:22,640\nAnd so now,\nyou can run non clusterware software,\n\n44\n00:02:22,640 --> 00:02:25,860\non top of the cluster, and\nyou get that hardware fail over.\n\n45\n00:02:25,860 --> 00:02:29,450\nOne note fails, the other note takes\nover for the VM and off you go.\n\n46\n00:02:29,450 --> 00:02:35,520\nSo it's real easy to pigeonhole our\nvision to just looking at virtualization.\n\n47\n00:02:35,520 --> 00:02:38,020\nBut you can still do\nclustering the old model two.\n\n48\n00:02:38,020 --> 00:02:40,940\nAnd there's plenty of viable\nreasons why you'd do that.\n\n49\n00:02:40,940 --> 00:02:44,350\nMicrosoft SQL comes to mind as one of the\ngreat examples where you might do that.\n\n50\n00:02:45,660 --> 00:02:48,020\nAll right, so\nlet's start out real high level.\n\n51\n00:02:48,020 --> 00:02:51,150\nNow, we're not going to dive into the\nnitty gritty of how to create a cluster.\n\n52\n00:02:51,150 --> 00:02:54,070\nWe've already seen that\nback in the DMCSA training.\n\n53\n00:02:54,070 --> 00:02:56,680\nYou should already be familiar\nwith that process by this point.\n\n54\n00:02:56,680 --> 00:02:59,520\nIf you're not, jump back over and\ncheck those out, was it the 7412, or\n\n55\n00:02:59,520 --> 00:03:01,049\n7411 did that.\n\n56\n00:03:01,049 --> 00:03:02,490\nI believe it was 12.\n\n57\n00:03:02,490 --> 00:03:03,200\nOkay, yeah, yeah.\n\n58\n00:03:03,200 --> 00:03:05,770\nI know we have a whole episode\non Microsoft clustering\n\n59\n00:03:05,770 --> 00:03:07,955\nback in the EMCA track where\nwe covered the how to.\n\n60\n00:03:07,955 --> 00:03:10,940\nWell, let's talk a little bit\nabout the design, all right?\n\n61\n00:03:10,940 --> 00:03:13,390\nOn the design side,\nwe do need to remember some of the,\n\n62\n00:03:13,390 --> 00:03:15,260\nI'm going to call them limitations, right?\n\n63\n00:03:15,260 --> 00:03:17,635\nSome of the limitations of clustering.\n\n64\n00:03:17,635 --> 00:03:20,385\nOne of the biggest limits is\nhow many nodes we can have.\n\n65\n00:03:20,385 --> 00:03:22,695\nYou can only have up to 64 nodes.\n\n66\n00:03:22,695 --> 00:03:25,155\nI know what your thinking.\n\n67\n00:03:25,155 --> 00:03:26,135\nThat stinks right.\n\n68\n00:03:26,135 --> 00:03:29,047\nI know Gosh darn it How do you get\nredundancy with just 64 nodes?\n\n69\n00:03:29,047 --> 00:03:32,667\n[LAUGH] 64 is a pretty big number.\n\n70\n00:03:32,667 --> 00:03:37,997\nJust to compare it back to Windows server\n2008, it only supported 16 nodes, right?\n\n71\n00:03:37,997 --> 00:03:40,147\nIf we go back even further,\nlike back to the NT4 days,\n\n72\n00:03:40,147 --> 00:03:42,047\nwhere you're down to 4 nodes.\n\n73\n00:03:42,047 --> 00:03:48,830\nSo having more nodes means that we\ncan better utilize our hardware.\n\n74\n00:03:48,830 --> 00:03:50,980\nIf you think of it in terms\nof just a two node cluster.\n\n75\n00:03:50,980 --> 00:03:52,070\nSo I've got two nodes.\n\n76\n00:03:52,070 --> 00:03:52,680\nRight?\n\n77\n00:03:52,680 --> 00:03:54,590\nAnd I've got these two nodes right here.\n\n78\n00:03:54,590 --> 00:03:59,020\nAnd one of them goes offline, the other\none is standing by ready to take over.\n\n79\n00:03:59,020 --> 00:04:00,630\nThere's really two configurations here.\n\n80\n00:04:00,630 --> 00:04:02,964\nActive-active and active-passive.\n\n81\n00:04:02,964 --> 00:04:07,840\nIn active-passive or active-standby, the\nactive is running 100% of your functions\n\n82\n00:04:07,840 --> 00:04:10,630\nRight And the standby is doing nothing.\n\n83\n00:04:10,630 --> 00:04:12,770\nIt's just sitting there watching, waiting.\n\n84\n00:04:12,770 --> 00:04:16,410\nIt's hardware just sitting\nthere not being used.\n\n85\n00:04:16,410 --> 00:04:18,770\nYou're effectively wasting\n50% of your hardware.\n\n86\n00:04:18,770 --> 00:04:21,630\nAnd then if one server fails,\nthe other one standing by jumps in,\n\n87\n00:04:21,630 --> 00:04:23,080\ntakes over, and off you go.\n\n88\n00:04:23,080 --> 00:04:23,710\nIt works.\n\n89\n00:04:23,710 --> 00:04:26,019\nIt's a good model, but\nit is a little inefficient.\n\n90\n00:04:27,390 --> 00:04:30,360\nAll right.\nActive active is where we split our\n\n91\n00:04:30,360 --> 00:04:32,280\nfunctions in half.\n\n92\n00:04:32,280 --> 00:04:37,520\nAnd we put 50% of our functions,\nyou know maybe like SQL, on one node.\n\n93\n00:04:37,520 --> 00:04:40,920\nAnd then, we take the other 50% of our\nfunctions, maybe Web or file services or\n\n94\n00:04:40,920 --> 00:04:42,390\nwhatever, and put that on the other node.\n\n95\n00:04:42,390 --> 00:04:44,700\nSo they're both performing\ndifferent functions.\n\n96\n00:04:44,700 --> 00:04:46,870\nAnd they're a standby for each other.\n\n97\n00:04:46,870 --> 00:04:51,850\nSo if one node fails, the first node\ntakes over for both sets of functions.\n\n98\n00:04:51,850 --> 00:04:55,185\nBut even in this model, you're\nreally wasting 50% of your hardware.\n\n99\n00:04:55,185 --> 00:04:57,870\nCuz you have to leave enough space for\n\n100\n00:04:57,870 --> 00:05:01,260\none node to be able to handle\nthe workload of both, right?\n\n101\n00:05:01,260 --> 00:05:03,460\nAnd so it's a little bit wasteful.\n\n102\n00:05:03,460 --> 00:05:08,130\nBut when you go into a multinode model,\nif I have three nodes.\n\n103\n00:05:08,130 --> 00:05:10,310\nI can have two nodes that were active.\n\n104\n00:05:10,310 --> 00:05:14,250\nAnd one node that was standing by,\nstanding by ready to take over for\n\n105\n00:05:14,250 --> 00:05:15,550\nthe first node that failed.\n\n106\n00:05:15,550 --> 00:05:18,400\nIt doesn't care if it's node one or\nnode two, it'll take over for\n\n107\n00:05:18,400 --> 00:05:19,440\neither one of them.\n\n108\n00:05:19,440 --> 00:05:20,460\nRight?\n\n109\n00:05:20,460 --> 00:05:24,990\nNow, I'm only wasting a third of my\nhardware or if I go to 4 nodes or\n\n110\n00:05:24,990 --> 00:05:29,210\n10 nodes, it's reducing the amount of\nhardware that is standing there wasted.\n\n111\n00:05:29,210 --> 00:05:30,690\nBut you can have more\nthan one standby too.\n\n112\n00:05:30,690 --> 00:05:33,470\nYou can have more than one\nnode in a standby cluster.\n\n113\n00:05:33,470 --> 00:05:37,010\nSo if you have a 64 node cluster,\nyou might have 10 nodes in there.\n\n114\n00:05:37,010 --> 00:05:38,970\nThat are all just standbys, but it's now,\n\n115\n00:05:38,970 --> 00:05:40,460\na much smaller percentage\nof your hardware.\n\n116\n00:05:40,460 --> 00:05:41,440\nSo it's more efficient.\n\n117\n00:05:41,440 --> 00:05:42,730\nYes, absolutely.\n\n118\n00:05:42,730 --> 00:05:45,230\nSo, keep that in mind,\nour maximum node is 64.\n\n119\n00:05:45,230 --> 00:05:46,870\nThat is our maximum node count.\n\n120\n00:05:46,870 --> 00:05:47,880\nMost people aren't going to hit that.\n\n121\n00:05:49,030 --> 00:05:52,610\nInside of that, if you're doing\nvirtual machine virtualization,\n\n122\n00:05:52,610 --> 00:05:54,490\nthere's a actually\na maximum number there too.\n\n123\n00:05:54,490 --> 00:05:59,940\nIf you're doing a hyper v cluster, you can\nonly manage up to 4,000 virtual machines.\n\n124\n00:05:59,940 --> 00:06:03,350\nSo that also is a pretty big number.\n\n125\n00:06:03,350 --> 00:06:05,290\nIt's also an unusually even number.\n\n126\n00:06:05,290 --> 00:06:06,020\nIt is isn't it?\n\n127\n00:06:06,020 --> 00:06:09,440\nWhy not 496 or you know something\nusually that we're dealing with?\n\n128\n00:06:09,440 --> 00:06:10,360\nThat's what you'd think.\n\n129\n00:06:10,360 --> 00:06:12,720\nI don't actually know the history\non that number, you know,\n\n130\n00:06:12,720 --> 00:06:15,540\n64 it makes sense it's\nlike a binary number.\n\n131\n00:06:15,540 --> 00:06:17,310\nIt only takes a couple\nof bits to write that.\n\n132\n00:06:17,310 --> 00:06:19,074\nAnd we see, where they get the 64.\n\n133\n00:06:19,074 --> 00:06:21,390\nBut 4000, yeah, that's a weird one.\n\n134\n00:06:21,390 --> 00:06:26,080\nSo, I'm sure there's some story\nthere that Microsoft knows.\n\n135\n00:06:26,080 --> 00:06:28,746\nThat might just be sometimes\nMicrosoft does this,\n\n136\n00:06:28,746 --> 00:06:33,220\nwhere it can actually handle way more, but\nthey only test it up to a certain level.\n\n137\n00:06:33,220 --> 00:06:35,260\nSo they maybe just tested up to 4,000 and\nstopped.\n\n138\n00:06:35,260 --> 00:06:39,080\nAnd said, nobody's gonna have more\nthan 4,000 VMs in a 64 node cluster.\n\n139\n00:06:39,080 --> 00:06:40,590\nBut what does the math work out on that?\n\n140\n00:06:40,590 --> 00:06:42,980\nLet me fire up the calculator here.\n\n141\n00:06:42,980 --> 00:06:46,970\nIf we do 4,000 VMs\ndivided across 64 nodes.\n\n142\n00:06:46,970 --> 00:06:49,380\n128, 256.\nThat'll be 62 VMs per host,\n\n143\n00:06:49,380 --> 00:06:50,810\nif none of them are in standby.\n\n144\n00:06:50,810 --> 00:06:52,820\nIf they're all active, 62 per host.\n\n145\n00:06:52,820 --> 00:06:54,860\nThat's well beyond most people's limit.\n\n146\n00:06:55,940 --> 00:07:00,890\nSo those are the things that, that we need\nto keep in mind as we start designing our\n\n147\n00:07:00,890 --> 00:07:03,440\ncluster, and kind of planning for that.\n\n148\n00:07:03,440 --> 00:07:05,890\nThese simple limits.\n\n149\n00:07:05,890 --> 00:07:10,330\nThere's a few other limits we need to\nbe aware of, the clustering software,\n\n150\n00:07:10,330 --> 00:07:14,080\nit stores it's configuration\nin the active directory.\n\n151\n00:07:14,080 --> 00:07:15,961\nWhen we talk about a cluster database,\n\n152\n00:07:15,961 --> 00:07:19,410\nthe cluster database is actually\nstored on the individual nodes.\n\n153\n00:07:19,410 --> 00:07:22,280\nBut, the configuration for\nthe cluster itself,\n\n154\n00:07:22,280 --> 00:07:25,260\nhow they know what other nodes are out\nthere and all that other information.\n\n155\n00:07:25,260 --> 00:07:28,050\nThat's actually stored\nin the active directory.\n\n156\n00:07:28,050 --> 00:07:34,160\nSo, if your active directory goes down,\nif it fails, what happens to your cluster?\n\n157\n00:07:34,160 --> 00:07:35,920\nIt stops functioning, right.\n\n158\n00:07:35,920 --> 00:07:37,200\nThe stuff that's running on it right now.\n\n159\n00:07:37,200 --> 00:07:41,160\nStays running, but if a failure happens,\nit's unable to recover from it.\n\n160\n00:07:41,160 --> 00:07:44,460\nAnd if you try and boot up a cluster\nwith the AD not being available,\n\n161\n00:07:44,460 --> 00:07:46,420\nit just doesn't work, all right?\n\n162\n00:07:46,420 --> 00:07:47,997\nSo we've got a plan for\n\n163\n00:07:47,997 --> 00:07:52,481\nactive directory redundancy while\nwe plan for our cluster too.\n\n164\n00:07:52,481 --> 00:07:53,489\nAnd you typically,\n\n165\n00:07:53,489 --> 00:07:57,229\ndon't want your domain controllers\nrunning on a clustered environment.\n\n166\n00:07:57,229 --> 00:07:59,209\nNow, AD doesn't support clustering,\n\n167\n00:07:59,209 --> 00:08:01,722\nbecause it does that\nmulti-master replication.\n\n168\n00:08:01,722 --> 00:08:04,730\nBut you could have a domain\ncontroller that's a virtual machine,\n\n169\n00:08:04,730 --> 00:08:07,470\nand it could be on top of a cluster and\nnot even know it.\n\n170\n00:08:07,470 --> 00:08:10,870\nAnd that's where we run into that\nsituation where the cluster can't bring up\n\n171\n00:08:10,870 --> 00:08:13,080\nthe VM because it can't access the AD.\n\n172\n00:08:13,080 --> 00:08:16,048\nAnd it can't access the AD because\nthe VM's not up, it's this circle.\n\n173\n00:08:16,048 --> 00:08:17,770\nRight, that little circular, yeah.\n\n174\n00:08:17,770 --> 00:08:20,930\nSo that's definitely stuff that we have\nto plan for as we design this out,\n\n175\n00:08:20,930 --> 00:08:23,822\nand you can have domain\ncontrollers that are virtualized.\n\n176\n00:08:23,822 --> 00:08:26,728\nBut, it's a good idea to at least\nhave one somewhere that's physical.\n\n177\n00:08:26,728 --> 00:08:30,770\nOr have two separate clusters so\nthat they can rely on each other for\n\n178\n00:08:30,770 --> 00:08:33,992\ndomain controls, or something\nlike that to get that redundancy.\n\n179\n00:08:33,992 --> 00:08:38,230\nAll right,\nI do want to mention a little side thing,\n\n180\n00:08:38,230 --> 00:08:40,470\nI don't know if this'll\ncome up on the exam or not.\n\n181\n00:08:40,470 --> 00:08:46,640\nBut it is actually possible to do\nwhat's called an AD separated cluster,\n\n182\n00:08:46,640 --> 00:08:49,452\nwhere the cluster doesn't\ndepend on the Active Directory.\n\n183\n00:08:49,452 --> 00:08:52,477\nIt's kinda weird, and\nit's got some problems,\n\n184\n00:08:52,477 --> 00:08:54,990\nand I thought I put it in my notes but\nI don't see it, so.\n\n185\n00:08:54,990 --> 00:08:56,455\nYeah, you did, and\nnot recommended, I think.\n\n186\n00:08:56,455 --> 00:08:58,790\n[LAUGH] Okay, it's not recommended.\n\n187\n00:08:58,790 --> 00:09:04,120\nMicrosoft, they put the functionality\nthere but they don't really support it.\n\n188\n00:09:04,120 --> 00:09:08,750\nIf you have to deploy a cluster and you\ndon't want to risk your Active Directory,\n\n189\n00:09:08,750 --> 00:09:11,070\nyou don't want to expose\nthe Active Directory to it.\n\n190\n00:09:11,070 --> 00:09:16,380\nWhat you do is you bring up your\ncluster in an AD separated model,\n\n191\n00:09:16,380 --> 00:09:20,470\nand then you're able to move it off so\nthat it doesn't see the Active Directory.\n\n192\n00:09:20,470 --> 00:09:23,645\nAnd it's still storing its configuration\nin the Active Directory, but\n\n193\n00:09:23,645 --> 00:09:25,245\nit just never goes back to get it.\n\n194\n00:09:25,245 --> 00:09:27,615\nSo, it's got its own local\ndatabase that it's tracking,\n\n195\n00:09:27,615 --> 00:09:31,335\nand it acts upon that without\nlooking at the Active Directory.\n\n196\n00:09:31,335 --> 00:09:34,775\nYou don't have computer objects in\nthe Active Directory for these nodes,\n\n197\n00:09:34,775 --> 00:09:39,657\ncuz it's AD separated, and that's\nthe main problem with AD separation.\n\n198\n00:09:39,657 --> 00:09:40,917\nWhen you have it separated from AD,\n\n199\n00:09:40,917 --> 00:09:45,347\nthe nodes no longer support\nKerberos authentication.\n\n200\n00:09:45,347 --> 00:09:48,980\nThey only support NTLM,\nthat old land management.\n\n201\n00:09:48,980 --> 00:09:52,550\nAnd, I think we all know it's pretty weak,\nit's easy to break these days.\n\n202\n00:09:52,550 --> 00:09:54,400\nSo, that's why it's not recommended,\n\n203\n00:09:54,400 --> 00:09:57,740\nyou're basically weakening security\nto create that separation.\n\n204\n00:09:57,740 --> 00:10:02,640\nThe Active Directory is what's gonna\nlet us do that Kerberos authentication,\n\n205\n00:10:02,640 --> 00:10:06,610\nso that we can validate our users against\nthe cluster and do full authentication.\n\n206\n00:10:06,610 --> 00:10:10,910\nSo you really do need to just plan on\nit being Active Directory deployed.\n\n207\n00:10:10,910 --> 00:10:14,370\nAll right, speaking of support,\nthere's cluster validation too.\n\n208\n00:10:14,370 --> 00:10:15,398\nWe gotta worry about that, right, Mike?\n\n209\n00:10:15,398 --> 00:10:16,410\nRight, yeah, you've gotta run through it.\n\n210\n00:10:16,410 --> 00:10:18,390\nWhen you're setting up that cluster,\nyou're gonna through,\n\n211\n00:10:18,390 --> 00:10:19,840\nI think we did this in our other episodes,\n\n212\n00:10:19,840 --> 00:10:22,440\nwhere you're gonna have to go through\nthat cluster validation wizard.\n\n213\n00:10:22,440 --> 00:10:26,610\nAnd it's gonna compare all of your\nhardware against these lists that\n\n214\n00:10:26,610 --> 00:10:30,310\nMicrosoft maintains, and\nif your hardware is not on their list,\n\n215\n00:10:30,310 --> 00:10:31,950\nyou're not gonna get\nsupport from Microsoft.\n\n216\n00:10:31,950 --> 00:10:35,070\nSo if you wanna be able to call them up,\nget support with your cluster,\n\n217\n00:10:35,070 --> 00:10:36,336\nit has to be validated.\n\n218\n00:10:36,336 --> 00:10:41,210\nYeah, and I'm gonna show you\nan example later in the show\n\n219\n00:10:41,210 --> 00:10:46,340\nwhere cluster validation can fail,\nand Microsoft will still support you.\n\n220\n00:10:46,340 --> 00:10:49,820\nThere are some times where that happens,\nright?\n\n221\n00:10:49,820 --> 00:10:53,526\nBut for the most part, if you don't\npass that validation and you get\n\n222\n00:10:53,526 --> 00:10:58,350\non the phone with that support engineer,\nthey're gonna ask you if you're validated.\n\n223\n00:10:58,350 --> 00:11:00,047\nAnd you can say yes,\neven though you didn't, right?\n\n224\n00:11:00,047 --> 00:11:02,283\nBut when they remote into your system,\nand see that it's not validated,\n\n225\n00:11:02,283 --> 00:11:03,270\nthey'll stop supporting you.\n\n226\n00:11:03,270 --> 00:11:05,666\nYeah, when they see some of those network\nadapters that aren't on their list or\n\n227\n00:11:05,666 --> 00:11:07,900\nsomething like that, and\nthey're not gonna like it.\n\n228\n00:11:07,900 --> 00:11:09,890\nNow in Windows Server 2012 and earlier,\n\n229\n00:11:09,890 --> 00:11:13,600\nI know I used to get frustrated\nwith the validation wizard because.\n\n230\n00:11:13,600 --> 00:11:14,550\nIt took forever.\n\n231\n00:11:14,550 --> 00:11:17,485\nAnd the more nodes you had,\nthe longer it took.\n\n232\n00:11:17,485 --> 00:11:21,760\nLike in the show,\nwe usually just do two nodes,\n\n233\n00:11:21,760 --> 00:11:23,930\nmaybe three nodes in our little labs.\n\n234\n00:11:23,930 --> 00:11:26,410\nBut in production,\nif you've got a 32 node cluster,\n\n235\n00:11:26,410 --> 00:11:30,340\nthat validation wizard takes forever\nto run, it's super annoying.\n\n236\n00:11:30,340 --> 00:11:34,510\nIn 2012 R2, they've actually improved it\nso the validation wizard runs faster.\n\n237\n00:11:34,510 --> 00:11:36,265\nSo, it's not such a big deal anymore.\n\n238\n00:11:36,265 --> 00:11:41,120\nBasically, they just want to make\nsure that your hardware is supported,\n\n239\n00:11:41,120 --> 00:11:44,060\nand they're not saying you've gotta\nuse Dell, or you've gotta use HP.\n\n240\n00:11:44,060 --> 00:11:46,750\nThey're checking really\nyour network adapter,\n\n241\n00:11:46,750 --> 00:11:50,370\nyour CPU, and all the vendors\nbuy their network adapters and\n\n242\n00:11:50,370 --> 00:11:53,570\nCPUs from the same places, so\nthe odds are, you're gonna pass.\n\n243\n00:11:53,570 --> 00:11:55,800\nWhere it's really strict\nthough is on the SAN side.\n\n244\n00:11:55,800 --> 00:11:59,920\nWhen you've got a fiber-channel storage\ndevice, it's gonna look at those HBAs and\n\n245\n00:11:59,920 --> 00:12:02,970\nthe SAN to verify it\nmeets the requirements.\n\n246\n00:12:02,970 --> 00:12:06,760\nIt's a good opportunity for you too to\nmake sure that all your hardware, and\n\n247\n00:12:06,760 --> 00:12:09,780\nyou might find a configuration\nthat you didn't setup properly and\n\n248\n00:12:09,780 --> 00:12:10,810\nthat's gonna cause a problem.\n\n249\n00:12:10,810 --> 00:12:14,090\nSo it It gives you a nice report\nat the end, very clickable,\n\n250\n00:12:14,090 --> 00:12:17,320\ndrill down capable, and it might be\nsomething that you didn't realize.\n\n251\n00:12:17,320 --> 00:12:20,222\nSo it is a good thing to go through.\n\n252\n00:12:20,222 --> 00:12:22,220\nYeah, all right so,\nwhen we go to design our cluster,\n\n253\n00:12:22,220 --> 00:12:24,870\nselecting our hardware is gonna\nbe kind of important, right?\n\n254\n00:12:24,870 --> 00:12:28,680\nWe need to pick hardware that's supported\nby the Windows Hardware Quality Labs,\n\n255\n00:12:28,680 --> 00:12:31,095\nWHQL, I'm surprised I\nremembered that acronym.\n\n256\n00:12:31,095 --> 00:12:35,320\n[LAUGH] But we need to choose that,\nthe hardware that's support, and\n\n257\n00:12:35,320 --> 00:12:36,030\nget it deployed.\n\n258\n00:12:36,030 --> 00:12:40,490\nNow the hardware we pick is gonna\nvary based on our needs, all right?\n\n259\n00:12:40,490 --> 00:12:42,710\nYou're gonna have server,\na minimum of two,\n\n260\n00:12:42,710 --> 00:12:45,610\nthe whole point of a cluster is\nredundancy, so you kinda need to.\n\n261\n00:12:45,610 --> 00:12:49,160\nSo we'll need a minimum of two servers,\nwhatever our cluster design is.\n\n262\n00:12:49,160 --> 00:12:55,500\nAnd what you want is for those servers\nto be as close to identical as possible.\n\n263\n00:12:55,500 --> 00:12:59,455\nThey don't have to be identical, you can\nhave one Dell and one HP, all right?\n\n264\n00:12:59,455 --> 00:13:01,850\nAnd you could have your cluster\nresources on there, and\n\n265\n00:13:01,850 --> 00:13:03,385\na lot of software will be\nperfectly fine with that.\n\n266\n00:13:03,385 --> 00:13:08,450\nBut where things start to get tricky\nis if the processors are different,\n\n267\n00:13:08,450 --> 00:13:10,410\nif the processors don't match, right?\n\n268\n00:13:10,410 --> 00:13:13,760\nIf it's a big difference,\nlike one has Intel processors and\n\n269\n00:13:13,760 --> 00:13:15,555\none has AMD processors, right?\n\n270\n00:13:15,555 --> 00:13:16,300\nMm-hm.\n\n271\n00:13:16,300 --> 00:13:19,520\nWhen a resource fails over\nfrom one side to the other,\n\n272\n00:13:19,520 --> 00:13:21,765\nfrom one node to another,\nthe resource will have to reboot.\n\n273\n00:13:21,765 --> 00:13:22,480\nRight.\n\n274\n00:13:22,480 --> 00:13:25,220\nWell, a lot of times resources\nhave to reboot anyway, so\n\n275\n00:13:25,220 --> 00:13:26,310\nthat's just part of the plan.\n\n276\n00:13:26,310 --> 00:13:28,430\nAnd we're not worried about that,\nand it comes up on the other side,\n\n277\n00:13:28,430 --> 00:13:30,890\nand you're done,\nthey don't have to be identical.\n\n278\n00:13:30,890 --> 00:13:36,200\nBut there are times like with virtual,\nI almost said v-motion, right?\n\n279\n00:13:36,200 --> 00:13:37,595\nI've been in the VM ware world too long.\n\n280\n00:13:37,595 --> 00:13:40,190\n[LAUGH] With Microsoft we\nhave live migrations, right?\n\n281\n00:13:40,190 --> 00:13:43,270\nWe can live migrate a virtual machine\nfrom one physical host to another, and\n\n282\n00:13:43,270 --> 00:13:45,690\nthat's part of the cluster functionality,\nright?\n\n283\n00:13:45,690 --> 00:13:50,055\nBut if you take a host that's actively\nrunning, sorry not a host a guest,\n\n284\n00:13:50,055 --> 00:13:50,595\nright, a node.\n\n285\n00:13:50,595 --> 00:13:52,225\nI'm screwing up all my\nterminologies today.\n\n286\n00:13:52,225 --> 00:13:55,255\nA virtual machine, let's go that way,\nthat's the simplest.\n\n287\n00:13:55,255 --> 00:13:57,695\n[LAUGH] There you go.\nIf we take a VM that's running,\n\n288\n00:13:57,695 --> 00:14:00,490\nthat's doing stuff right now,\nand I live migrate it,\n\n289\n00:14:00,490 --> 00:14:04,790\nand it goes from an AMD processor to\nan Intel processor, what's it gonna do?\n\n290\n00:14:04,790 --> 00:14:05,910\nIt's gonna freak out, right?\n\n291\n00:14:05,910 --> 00:14:07,110\nYeah, it's gonna, yeah, absolutely.\n\n292\n00:14:07,110 --> 00:14:10,050\nIt's either gonna blue screen or\njust outright freeze, and\n\n293\n00:14:10,050 --> 00:14:11,910\nnot even be able to\ngenerate the blue screen.\n\n294\n00:14:11,910 --> 00:14:15,240\nSo Hyper-V stops you from doing that,\nright?.\n\n295\n00:14:15,240 --> 00:14:19,020\nBut if you have identical CPUs,\nwhen you move from one to the other,\n\n296\n00:14:19,020 --> 00:14:21,380\nit's perfectly happy,\ncontinues on, doesn't miss a beat.\n\n297\n00:14:21,380 --> 00:14:22,120\nRight.\n\n298\n00:14:22,120 --> 00:14:25,030\nThe CPUs can actually\neven be off a little bit,\n\n299\n00:14:25,030 --> 00:14:26,932\nthey can be different\nwhat they call steppings.\n\n300\n00:14:26,932 --> 00:14:29,420\nMm-hm.\nAnd when Intel makes processors,\n\n301\n00:14:29,420 --> 00:14:32,292\nthey usually make several different\nversions of it as they retool their dials\n\n302\n00:14:32,292 --> 00:14:33,000\nfor efficiency.\n\n303\n00:14:33,000 --> 00:14:36,075\nAnd so it can be off a little\nbit like that, and it'd be fine.\n\n304\n00:14:36,075 --> 00:14:41,265\nBut the features of that CPU\nneed to be identical, and\n\n305\n00:14:41,265 --> 00:14:42,625\nthis used to be just really simple.\n\n306\n00:14:42,625 --> 00:14:47,305\nLike, oh this process supports SSE3, so\ndoes this one, they're compatible, right?\n\n307\n00:14:47,305 --> 00:14:48,263\nRight.\nBut nowadays they cram so\n\n308\n00:14:48,263 --> 00:14:49,045\nmuch extra stuff, right?\n\n309\n00:14:51,130 --> 00:14:52,011\nStuff, right.\n\n310\n00:14:52,011 --> 00:14:54,339\n[LAUGH] Instructions, yeah.\n\n311\n00:14:54,339 --> 00:14:59,590\nDRM, and vPro, and all these extra little\nbells and whistles, Slat and so on.\n\n312\n00:14:59,590 --> 00:15:04,100\nAnd so you can have two processors\nthat are the same family, right?\n\n313\n00:15:04,100 --> 00:15:05,780\nThey might both be i7s.\n\n314\n00:15:05,780 --> 00:15:08,480\nRight.\nAnd they might both be quad core two\n\n315\n00:15:08,480 --> 00:15:14,005\ngigahertz, but then one is a Xeon and\nhas a little bit of extra L2 cache, right?\n\n316\n00:15:14,005 --> 00:15:15,780\nMm-hm.\nAnd the other one is not, so or\n\n317\n00:15:15,780 --> 00:15:17,803\nthey just have different sizes of cache.\n\n318\n00:15:17,803 --> 00:15:21,790\nAnd now when that VM moves from one to\nthe other, things don't match up quite so\n\n319\n00:15:21,790 --> 00:15:24,670\nwell anymore, and it crashes, right?\n\n320\n00:15:24,670 --> 00:15:27,430\nOr the worst is when it doesn't crash,\nand it limps along, and\n\n321\n00:15:27,430 --> 00:15:29,662\nstuff starts going wrong,\nthat's even worse.\n\n322\n00:15:29,662 --> 00:15:33,100\n[LAUGH] Mm-hm.\nSo as we choose our hardware, if you want\n\n323\n00:15:33,100 --> 00:15:38,430\nto do live migration, you really wanna\nhave identical processors, okay?\n\n324\n00:15:38,430 --> 00:15:40,970\nNow that doesn't mean that every\nnode in your cluster needs to have\n\n325\n00:15:40,970 --> 00:15:41,840\nidentical processors.\n\n326\n00:15:41,840 --> 00:15:44,860\nYou might have 32 nodes in the cluster and\n\n327\n00:15:44,860 --> 00:15:49,380\n16 of them you bought at once,\nand 16 you bought later.\n\n328\n00:15:49,380 --> 00:15:51,688\nSo those first 16 you gotta\nhave one type of processor,\n\n329\n00:15:51,688 --> 00:15:54,539\nand the second 16 you've gotta have\na different type of processor.\n\n330\n00:15:54,539 --> 00:15:57,256\nSo when you set up your\nvirtual machine migrations,\n\n331\n00:15:57,256 --> 00:16:01,824\nwhat you'll do is you'll set boundaries to\nthat, and say, This one can live migrate,\n\n332\n00:16:01,824 --> 00:16:05,157\nbut only to these servers, and\nthat will limit it to those CPUs or\n\n333\n00:16:05,157 --> 00:16:07,960\nto these other servers and\nit will limit to those.\n\n334\n00:16:07,960 --> 00:16:10,630\nSo it kind of creates a partition\ninside of your clusters.\n\n335\n00:16:10,630 --> 00:16:11,945\nStill one big cluster but\n\n336\n00:16:11,945 --> 00:16:15,480\nyour VMs will have preferences\nto what nodes they go to right?\n\n337\n00:16:15,480 --> 00:16:17,780\nAnd we do that by setting\nthe priorities and weights.\n\n338\n00:16:17,780 --> 00:16:19,810\nAnd you don't have exclude the other 16.\n\n339\n00:16:19,810 --> 00:16:25,120\nIf all 16 systems with one CPU fail,\nthen the virtual\n\n340\n00:16:25,120 --> 00:16:27,850\nmachine can jump over to the others,\nit's just gonna have to reboot to do it.\n\n341\n00:16:27,850 --> 00:16:32,060\nYou lose that quick live\nmigration capability.\n\n342\n00:16:32,060 --> 00:16:34,240\nYeah.\nI'm glad you mentioned quick right there.\n\n343\n00:16:34,240 --> 00:16:36,580\nLive migration is not always quick.\n\n344\n00:16:36,580 --> 00:16:39,210\nThat's another thing\nthat we have to plan for.\n\n345\n00:16:39,210 --> 00:16:43,242\nWhen we live migrate, think about what\nall is having to move between the nodes,\n\n346\n00:16:43,242 --> 00:16:44,320\nall right.\n\n347\n00:16:44,320 --> 00:16:46,020\nIt really boils down to storage.\n\n348\n00:16:47,050 --> 00:16:50,400\nIf your nodes all have shared storage,\nif they're all connected to a SAN, and\n\n349\n00:16:50,400 --> 00:16:53,340\nthat SAN is where we're storing that\nvirtual hard drive, how long does\n\n350\n00:16:53,340 --> 00:16:56,100\nit take to transition that virtual\nhard drive from one node to another?\n\n351\n00:16:57,100 --> 00:16:57,620\nInstant.\n\n352\n00:16:57,620 --> 00:17:00,674\nYeah, all you've got is a little bit\nof state that's going on and that's it.\n\n353\n00:17:00,674 --> 00:17:03,570\nMm-hm, and that used to be more\nchallenging when we had to have separate\n\n354\n00:17:03,570 --> 00:17:07,890\nstorage for each node, but\nnow we have cluster shared volumes, CSVs.\n\n355\n00:17:07,890 --> 00:17:11,200\nAnd so each of our Hyper-V hosts\ncan see that storage real easy.\n\n356\n00:17:11,200 --> 00:17:15,240\nIt's no big deal, right,\nbut RAM is the problem.\n\n357\n00:17:15,240 --> 00:17:19,149\nWe have RAM for that virtual machine\nthat's running on a particular host and\n\n358\n00:17:19,149 --> 00:17:22,997\nif we want that virtual machine to jump\nto another host without rebooting,\n\n359\n00:17:22,997 --> 00:17:26,190\nif we wanted to do it live,\nwe're gonna synchronize the RAM.\n\n360\n00:17:27,640 --> 00:17:31,540\nThe RAM synchronization\nhappens across your network,\n\n361\n00:17:31,540 --> 00:17:34,740\nnot across your SAN,\nit doesn't go across your Fibre Channel,\n\n362\n00:17:34,740 --> 00:17:38,180\nit goes across your regular,\ntraditional network.\n\n363\n00:17:38,180 --> 00:17:41,580\nThe more bandwidth you have,\nthe faster that RAM can synchronize.\n\n364\n00:17:41,580 --> 00:17:45,180\nThe less bandwidth you have, you have a\ncongested network, the longer it takes to\n\n365\n00:17:45,180 --> 00:17:49,250\nsynchronize, and the more RAM\nyou have will impact that too.\n\n366\n00:17:49,250 --> 00:17:52,810\nSo if you have a virtual machine with 8\ngigs of RAM, you've gotta synchronize 8\n\n367\n00:17:52,810 --> 00:17:56,970\ngigs of data, and if that virtual machine\nis busy that 8 gigs is constantly\n\n368\n00:17:56,970 --> 00:18:01,770\nchanging, and so Hyper-V slows\nthe machine down a bit, right?\n\n369\n00:18:01,770 --> 00:18:06,550\nSlows it down to try and stay caught up,\nbut it can take an hour to live migrate,\n\n370\n00:18:06,550 --> 00:18:09,220\nfor it to get everything in sync\nget the two in lockstep and\n\n371\n00:18:09,220 --> 00:18:10,830\nthen flip over to the other node.\n\n372\n00:18:10,830 --> 00:18:15,060\nSo if you're in a hurry,\nthat's not a good situation to be in.\n\n373\n00:18:15,060 --> 00:18:19,300\nAnd there's some special technologies\nthat are out there that HP and\n\n374\n00:18:19,300 --> 00:18:22,580\nDell have been pushing,\nthe whole NUMA nodes And\n\n375\n00:18:22,580 --> 00:18:25,710\nall that fancy stuff,\nwhich I won't really dive into here.\n\n376\n00:18:25,710 --> 00:18:28,300\nBut where you can do remote RAM\nsynchronization is actually done\n\n377\n00:18:28,300 --> 00:18:29,330\nin hardware.\n\n378\n00:18:29,330 --> 00:18:31,750\nAnd that can really speed that stuff up.\n\n379\n00:18:31,750 --> 00:18:33,160\nBut most people don't have that, and\n\n380\n00:18:33,160 --> 00:18:36,820\nyou're gonna rely on Hyper-V,\nthe software side handling it.\n\n381\n00:18:36,820 --> 00:18:41,020\nAnd synchronizing RAM is tough,\nwe measure RAM speed in nanoseconds,\n\n382\n00:18:41,020 --> 00:18:44,850\nthat's how fast we're accessing it, and a\nvirtual machine is live, it's doing stuff,\n\n383\n00:18:44,850 --> 00:18:49,510\nso it's changing, so you might have 8 gigs\nof RAM but it actually ends up having\n\n384\n00:18:49,510 --> 00:18:53,172\nto synchronize 16, 20 gigs of\ndata cuz it just keeps changing.\n\n385\n00:18:53,172 --> 00:18:54,890\nAnd all that stuff that's paged, exactly.\n\n386\n00:18:54,890 --> 00:18:56,100\nAnd so\n\n387\n00:18:56,100 --> 00:18:59,880\nthat's all stuff we need to be considerate\nof as we're selecting our hardware.\n\n388\n00:18:59,880 --> 00:19:01,730\nYou wanna have adequate network bandwidth.\n\n389\n00:19:01,730 --> 00:19:05,030\nYou typically need to have at\nleast two network adaptors.\n\n390\n00:19:06,500 --> 00:19:09,280\nOne network adaptor just for\ncluster communications and\n\n391\n00:19:09,280 --> 00:19:11,930\none network adaptor for\nclient communications.\n\n392\n00:19:11,930 --> 00:19:15,380\nBut odds are you'll want more\nthan two network adaptors.\n\n393\n00:19:15,380 --> 00:19:19,920\nIf you have an iSCSI SAN, you'll want\na dedicated adaptor just for that, and\n\n394\n00:19:19,920 --> 00:19:21,870\nyou probably want redundancy on all these.\n\n395\n00:19:21,870 --> 00:19:24,380\nSo you'll start adding more\nadaptors to take care of that.\n\n396\n00:19:24,380 --> 00:19:25,870\nAnd that's why a lot of servers,\n\n397\n00:19:25,870 --> 00:19:28,940\nwell almost every server these days comes\nwith two network ports on them right?\n\n398\n00:19:28,940 --> 00:19:29,640\nYeah.\n\n399\n00:19:29,640 --> 00:19:33,060\nBut you can buy those quad port network\ncards or whatever to start increasing your\n\n400\n00:19:33,060 --> 00:19:36,790\nport density, and that way you can\nhave redundancy, switch redundancy.\n\n401\n00:19:36,790 --> 00:19:41,250\nYou have two cables coming out of that\nserver that run to two different switches.\n\n402\n00:19:41,250 --> 00:19:42,530\nOne switch fails, the other takes over.\n\n403\n00:19:43,770 --> 00:19:46,090\nWell you don't have to, right?\n\n404\n00:19:46,090 --> 00:19:50,550\nYou could just have one network\nconnection that faces the LAN\n\n405\n00:19:50,550 --> 00:19:53,880\ncoming out of that server, and it's\nnot redundant, but if that node fails,\n\n406\n00:19:53,880 --> 00:19:55,390\nwe have a whole other node.\n\n407\n00:19:55,390 --> 00:19:57,860\nSo, our redundancy is kind\nof covered by the cluster.\n\n408\n00:19:57,860 --> 00:20:00,350\nSo you can make it double redundant,\nor triple,\n\n409\n00:20:00,350 --> 00:20:01,970\nsuper mega crazy redundant if you want.\n\n410\n00:20:01,970 --> 00:20:06,510\nYou throw as much cache at it as you need\nto create the level of availability that\n\n411\n00:20:06,510 --> 00:20:07,190\nyou're trying to achieve.\n\n412\n00:20:09,000 --> 00:20:13,440\nJust remember that just because\na cluster can survive a node failing,\n\n413\n00:20:13,440 --> 00:20:15,350\ndoesn't mean you want that to happen,\nright?\n\n414\n00:20:15,350 --> 00:20:16,070\nRight.\nSo\n\n415\n00:20:16,070 --> 00:20:19,580\nanything you can do to avoid that node\nfailing is something you want to do.\n\n416\n00:20:19,580 --> 00:20:21,129\nIt's something we lose sight of sometimes.\n\n417\n00:20:22,260 --> 00:20:25,860\nAll right, now, I also mentioned\nat the beginning of the show that\n\n418\n00:20:25,860 --> 00:20:27,070\nclustering is not always necessary.\n\n419\n00:20:28,330 --> 00:20:32,040\nOn the exam and in real life,\nyou need to be able to determine\n\n420\n00:20:32,040 --> 00:20:34,940\nwhen clustering is the right choice and\nwhen it isn't.\n\n421\n00:20:36,290 --> 00:20:42,370\nThere are some times where\nclustering is just the best choice,\n\n422\n00:20:42,370 --> 00:20:44,530\njust the best way to handle something.\n\n423\n00:20:44,530 --> 00:20:49,360\nSo I've got a, Boy,\n\n424\n00:20:49,360 --> 00:20:53,260\nI'm having a hard time trying to think of\nwhen we absolutely need one these days.\n\n425\n00:20:53,260 --> 00:20:55,050\nActually, you could use DFS.\n\n426\n00:20:55,050 --> 00:20:57,810\nThat's it.\nThere's always another solution, yeah.\n\n427\n00:20:57,810 --> 00:20:59,770\nClustering has so many limitations around.\n\n428\n00:20:59,770 --> 00:21:03,890\nAll this required hardware and technology\nthat's expensive and difficult to deploy.\n\n429\n00:21:03,890 --> 00:21:06,400\nAnd a lot of times,\nit requires rebooting the resource, so\n\n430\n00:21:06,400 --> 00:21:09,010\nit's not truly seamless failover.\n\n431\n00:21:09,010 --> 00:21:13,880\nYour downtime is very, very minimal,\nbut, it's not seamless.\n\n432\n00:21:13,880 --> 00:21:17,500\nA lot of software has something\nbuilt in for redundancy.\n\n433\n00:21:17,500 --> 00:21:19,660\nMike, you mentioned DFS, right?\n\n434\n00:21:19,660 --> 00:21:21,470\nThe distributed file system.\n\n435\n00:21:21,470 --> 00:21:23,810\nIf you have a file server,\nyou can cluster.\n\n436\n00:21:23,810 --> 00:21:26,190\nYou can cluster a file share,\nit works really well.\n\n437\n00:21:26,190 --> 00:21:30,290\nBut if somebody is connecting to\na file share, we could use DFS.\n\n438\n00:21:30,290 --> 00:21:34,700\nAnd DFS will take care of\ndirecting them to different nodes.\n\n439\n00:21:34,700 --> 00:21:38,310\nAnd now we don't have to worry\nabout all the cluster hardware.\n\n440\n00:21:38,310 --> 00:21:40,230\nWe do have to store our data\nin more than one place.\n\n441\n00:21:40,230 --> 00:21:41,350\nYou have more than one copy.\n\n442\n00:21:41,350 --> 00:21:42,790\nCluster just has one copy.\n\n443\n00:21:42,790 --> 00:21:47,212\nBut it gives you synchronization, you can\nhave people accessing resources on their\n\n444\n00:21:47,212 --> 00:21:51,133\nlocal network instead of going over a LAN,\nthere's a lot of reasons why you\n\n445\n00:21:51,133 --> 00:21:54,100\nmight choose to use DFS,\nas opposed to using a cluster.\n\n446\n00:21:54,100 --> 00:21:56,340\nSo whatever it is you're trying\nto make highly available,\n\n447\n00:21:56,340 --> 00:21:57,390\nyou might need to evaluate that.\n\n448\n00:21:58,400 --> 00:22:02,020\nA web server,\nwe can make a web server highly available.\n\n449\n00:22:03,460 --> 00:22:05,680\nBut, do I need to as a web server?\n\n450\n00:22:05,680 --> 00:22:07,840\nI could just stick it behind\na network load balancer.\n\n451\n00:22:07,840 --> 00:22:10,550\nExactly, a lot less equipment,\na lot less setup, and\n\n452\n00:22:10,550 --> 00:22:12,170\nyou get the same fault tolerance.\n\n453\n00:22:12,170 --> 00:22:13,470\nAbsolutely.\n\n454\n00:22:13,470 --> 00:22:17,030\nThere's other technologies that\ndon't cluster very well at all.\n\n455\n00:22:17,030 --> 00:22:20,360\nRemote desktop servers, terminal services.\n\n456\n00:22:20,360 --> 00:22:23,318\nThose kind of things, they don't do so\nwell on a cluster, so\n\n457\n00:22:23,318 --> 00:22:26,570\nthose are better being stand alone and\nusing an LB in front of them.\n\n458\n00:22:26,570 --> 00:22:30,276\nSometimes we don't need an LB,\neven, a DNS.\n\n459\n00:22:30,276 --> 00:22:31,960\nYeah, do some round-robin.\n\n460\n00:22:31,960 --> 00:22:35,650\nDNS does it's own zone synchronization,\nright?\n\n461\n00:22:35,650 --> 00:22:38,270\nIf it's active directory integrated\nit uses that, right, but\n\n462\n00:22:38,270 --> 00:22:41,786\nif it's not active directory integrated\nit uses- Standard, primary and secondary.\n\n463\n00:22:41,786 --> 00:22:42,633\nYep, thank you.\n\n464\n00:22:42,633 --> 00:22:43,320\n[LAUGH] Feels like old school.\n\n465\n00:22:43,320 --> 00:22:44,875\nIt's been a while since\nwe go back to those.\n\n466\n00:22:44,875 --> 00:22:46,225\n[LAUGH] It really is!\n\n467\n00:22:46,225 --> 00:22:48,180\nSo, it does that and\nour clients, what do we do?\n\n468\n00:22:48,180 --> 00:22:49,760\nWe put in two IPs.\n\n469\n00:22:49,760 --> 00:22:54,600\nWe say here's DNS server one and\nhere's DNS server two.\n\n470\n00:22:54,600 --> 00:22:57,830\nIn that scenario you're taken care of.\n\n471\n00:22:57,830 --> 00:22:59,900\nYou don't need a cluster for that.\n\n472\n00:22:59,900 --> 00:23:02,510\nKeep that in mind as you\nplan your technology.\n\n473\n00:23:02,510 --> 00:23:05,730\nOver the years more and\nmore technologies will move that way.\n\n474\n00:23:05,730 --> 00:23:06,590\nLook at Microsoft SQL.\n\n475\n00:23:07,640 --> 00:23:09,630\nMicrosoft SQL, it used to be a given.\n\n476\n00:23:09,630 --> 00:23:11,753\nIf you were gonna have a SQL database\nyou were gonna put it on a cluster.\n\n477\n00:23:11,753 --> 00:23:14,500\nThat was it, that was what you did.\n\n478\n00:23:14,500 --> 00:23:17,570\nNow, you might stick SQL\nin a virtual machine and\n\n479\n00:23:17,570 --> 00:23:19,490\nthe virtual machine is on a cluster.\n\n480\n00:23:19,490 --> 00:23:23,540\nOr, you might take SQL and\njust set up a transaction log shipping, so\n\n481\n00:23:23,540 --> 00:23:29,230\nit's got a replicated database and\nyou have more control over it, right?\n\n482\n00:23:29,230 --> 00:23:30,660\nSo there's different steps we can take.\n\n483\n00:23:30,660 --> 00:23:32,210\nAnd the SQL Native Client for\n\n484\n00:23:32,210 --> 00:23:35,980\nthe newer versions of SQL, it supports\nhaving more than one entry for the server.\n\n485\n00:23:35,980 --> 00:23:37,560\nSo if it can't get to one,\nit goes to the other.\n\n486\n00:23:37,560 --> 00:23:39,950\nSo the client is handling the failover.\n\n487\n00:23:41,640 --> 00:23:45,880\nBut there are times when the client can't\nhandle a failover, like a web browser.\n\n488\n00:23:45,880 --> 00:23:49,360\nYour web browser, it gets an IP\naddress and that's what it goes to.\n\n489\n00:23:49,360 --> 00:23:50,390\nThat's pretty much it.\n\n490\n00:23:50,390 --> 00:23:51,630\nSo it doesn't support that fail over.\n\n491\n00:23:51,630 --> 00:23:56,510\nSo we need a cluster to solve that\nsolution but NLB works there too.\n\n492\n00:23:56,510 --> 00:24:01,152\nThe problem with NLB, here's how I always\nmake my decision between using NLB and\n\n493\n00:24:01,152 --> 00:24:01,977\nclustering.\n\n494\n00:24:01,977 --> 00:24:04,694\nWith clustering,\nyour servers have shared storage.\n\n495\n00:24:04,694 --> 00:24:08,090\nIt's the same storage, right?\n\n496\n00:24:08,090 --> 00:24:11,110\nBut only one node is active for\nthat storage at a time.\n\n497\n00:24:11,110 --> 00:24:15,200\nSo if I've got a web server that's on\na cluster and the website is stored as\n\n498\n00:24:15,200 --> 00:24:19,320\ncluster storage, I've only got one\nweb server that's handling it.\n\n499\n00:24:19,320 --> 00:24:23,700\nIf I wanna bring a second web\nserver up to handle that same data.\n\n500\n00:24:23,700 --> 00:24:26,770\nWell it had to store it a second time,\nright.\n\n501\n00:24:26,770 --> 00:24:29,400\nBut in a cluster I could have that\none web server fail between nodes and\n\n502\n00:24:29,400 --> 00:24:31,160\nwe'd be taken care of, right?\n\n503\n00:24:31,160 --> 00:24:34,990\nBut I don't get a lot of performance\nbenefit, I get availability.\n\n504\n00:24:34,990 --> 00:24:35,720\nRight.\nIf I want performance.\n\n505\n00:24:35,720 --> 00:24:40,850\nIf I want multiple web servers\ndoing work now I just go ahead and\n\n506\n00:24:40,850 --> 00:24:43,290\nstore the data separately\non each one of them.\n\n507\n00:24:43,290 --> 00:24:46,010\nAnd now I can use NLB and\nspread people across these servers, and\n\n508\n00:24:46,010 --> 00:24:47,470\nI get performance.\n\n509\n00:24:47,470 --> 00:24:51,540\nBut if a node goes down, well NLB\nmasks that so people don't see it.\n\n510\n00:24:51,540 --> 00:24:54,050\nSo I still get that availability too.\n\n511\n00:24:54,050 --> 00:24:58,310\nBut, I have to find a way to synchronize\nmy data between those web servers.\n\n512\n00:24:58,310 --> 00:25:02,410\nIf I've got ten web servers, they've gotta\nhave ten copies of the same exact data.\n\n513\n00:25:03,670 --> 00:25:05,305\nYeah, and\nif you're worried about state, too,\n\n514\n00:25:05,305 --> 00:25:08,935\nNLB can do some staple applications,\nbut it's really not designed for that.\n\n515\n00:25:08,935 --> 00:25:13,150\nWhen you go to a website,\nyou send your HTTP GET you get\n\n516\n00:25:13,150 --> 00:25:15,850\nyour web page back there's no\nstate being maintained there.\n\n517\n00:25:15,850 --> 00:25:19,090\nSo if it flops over to another\nnode when you click on a link or\n\n518\n00:25:19,090 --> 00:25:22,550\nsomething like that it doesn't matter that\nyou're talking to a different server.\n\n519\n00:25:22,550 --> 00:25:25,500\nBut if you've got some application\nwhere it is maintaining that state like\n\n520\n00:25:25,500 --> 00:25:29,420\na database or something like that,\nthat's when NLB really doesn't cut it.\n\n521\n00:25:29,420 --> 00:25:31,270\nYeah, and web developers plan for that.\n\n522\n00:25:31,270 --> 00:25:33,870\nThey store a cookie on your\nsystem to identify you.\n\n523\n00:25:33,870 --> 00:25:37,170\nSo if you hit a different server,\nthe next time you open a new tab or\n\n524\n00:25:37,170 --> 00:25:39,230\nwhatever, it sees the cookie and\nit remembers you,\n\n525\n00:25:39,230 --> 00:25:41,970\nit remembers what you were doing, what\nyour shopping cart was and all of that.\n\n526\n00:25:41,970 --> 00:25:44,060\nIt's handled by the client.\n\n527\n00:25:44,060 --> 00:25:47,980\nSo in scenarios like that,\na cluster is not needed.\n\n528\n00:25:47,980 --> 00:25:48,980\nRight?\n\n529\n00:25:48,980 --> 00:25:49,850\nDon't assume it.\n\n530\n00:25:49,850 --> 00:25:52,860\nAnd there's some times where a cluster\nis absolutely not compatible.\n\n531\n00:25:52,860 --> 00:25:56,470\nFor example, a cluster node can not be\nan active directory domain controller.\n\n532\n00:25:56,470 --> 00:25:59,340\nYou can't have a domain controller\nas a clustered resource.\n\n533\n00:25:59,340 --> 00:26:01,060\nAnd that's because you don't need it.\n\n534\n00:26:01,060 --> 00:26:03,040\nActive directory have multiple masters.\n\n535\n00:26:03,040 --> 00:26:05,150\nSo, as long as you have more\nthan one domain controller,\n\n536\n00:26:05,150 --> 00:26:07,170\nwhen you lose one, big deal.\n\n537\n00:26:07,170 --> 00:26:08,190\nThe others take over.\n\n538\n00:26:08,190 --> 00:26:09,260\nYou don't need a cluster for that.\n\n539\n00:26:09,260 --> 00:26:11,280\nAnd they synchronize their data for you.\n\n540\n00:26:11,280 --> 00:26:15,520\nSo, always be aware of that,\nthat there are technologies like DHCP.\n\n541\n00:26:15,520 --> 00:26:18,830\nWhere you'll find documentation\nall over Microsoft's site.\n\n542\n00:26:18,830 --> 00:26:23,770\nAnd in real life land, where people\ntell you, hey, DHCP, cluster it.\n\n543\n00:26:23,770 --> 00:26:25,570\nThat way- Yeah, it's one of the rules.\n\n544\n00:26:25,570 --> 00:26:26,800\nCuz you can right-click and\nadd to the cluster.\n\n545\n00:26:26,800 --> 00:26:28,320\nSo it's right there at\nthe top of the list.\n\n546\n00:26:28,320 --> 00:26:30,140\nAnd it's one of most common ones, right?\n\n547\n00:26:30,140 --> 00:26:33,940\nBut in Windows Server 2012 R2, we have\nsomething called DHCP failover, where you\n\n548\n00:26:33,940 --> 00:26:38,120\ncan have more than one DHCP server and\nthey synchronize with themselves.\n\n549\n00:26:38,120 --> 00:26:40,100\nNo cluster hardware needed, right?\n\n550\n00:26:40,100 --> 00:26:42,350\nNone of that, so- I think we've done\nit in one of our other classes.\n\n551\n00:26:42,350 --> 00:26:45,290\nI mean, it's a right-click,\nadd failover partner, and you're done.\n\n552\n00:26:45,290 --> 00:26:49,260\nAnd then they handle it all themselves,\nno extra hardware, none of that.\n\n553\n00:26:49,260 --> 00:26:52,674\nSo, after all that,\nyou might be asking yourself, well crap.\n\n554\n00:26:52,674 --> 00:26:54,905\n[LAUGH] I'm about to hit\nthe skip button on this episode.\n\n555\n00:26:54,905 --> 00:26:57,660\n[LAUGH] Why would I even\nbother using a cluster?\n\n556\n00:26:57,660 --> 00:26:59,390\nThere are some benefits\nto having a cluster.\n\n557\n00:26:59,390 --> 00:27:05,160\nThere are some technologies that we\nwant to have rapid failover, right?\n\n558\n00:27:05,160 --> 00:27:08,510\nClusters do pretty rapid\nfailover when necessary.\n\n559\n00:27:08,510 --> 00:27:11,960\nAnd there's one big scenario where\nit's really handy, and that's Hyper-V.\n\n560\n00:27:11,960 --> 00:27:16,400\nIf I want to do a live migration of\na virtual machine between nodes and\n\n561\n00:27:16,400 --> 00:27:22,065\nsynchronize RAM and have all of that\nhappen, a cluster is the way to do it.\n\n562\n00:27:22,065 --> 00:27:22,565\nRight?\n\n563\n00:27:22,565 --> 00:27:24,520\nThat's going to be one\nof your best solutions.\n\n564\n00:27:24,520 --> 00:27:27,807\nHyper-V does not have a built-in\nmechanism for doing that, and\n\n565\n00:27:27,807 --> 00:27:31,275\nit's really the main technology\nthat's keeping clusters alive today.\n\n566\n00:27:31,275 --> 00:27:31,875\nAll right?\n\n567\n00:27:31,875 --> 00:27:34,255\nAnd if you're sitting there and\nyou're saying to yourself, Don,\n\n568\n00:27:34,255 --> 00:27:38,140\nI think you're on the wrong track here,\nclustering, it's still a big deal.\n\n569\n00:27:38,140 --> 00:27:39,940\nJust look at what Microsoft\nis doing with the pricing.\n\n570\n00:27:39,940 --> 00:27:41,900\nIn previous versions of Windows,\n\n571\n00:27:41,900 --> 00:27:44,960\nif you wanted to do clustering you had\nto go up to Enterprise Edition, right.\n\n572\n00:27:44,960 --> 00:27:48,700\nBut the value of clustering is decreased\nenough, that in Windows Server 2012 R2,\n\n573\n00:27:48,700 --> 00:27:52,150\nyou've got failover clustering\nin Standard and Enterprise.\n\n574\n00:27:52,150 --> 00:27:53,720\nSo you don't even have to\ngo to Enterprise anymore,\n\n575\n00:27:53,720 --> 00:27:55,200\nit's just right there in Standard.\n\n576\n00:27:55,200 --> 00:27:57,630\nYou can fire up the cluster and\ndo what you need.\n\n577\n00:27:57,630 --> 00:28:00,530\nSo the writing is on the wall for\ntraditional clusters.\n\n578\n00:28:00,530 --> 00:28:05,870\nBut when it comes to synchronized data,\nclustering is the main thing.\n\n579\n00:28:05,870 --> 00:28:08,498\nBecause everyone is sharing the same data.\n\n580\n00:28:08,498 --> 00:28:12,960\nAnd rapid failover synchronized RAM, those\nare the things that a cluster gives us.\n\n581\n00:28:12,960 --> 00:28:16,020\nIt's just not everybody needs that.\n\n582\n00:28:16,020 --> 00:28:19,320\nSo, that's definitely important as we go\ninto our plan just determining whether or\n\n583\n00:28:19,320 --> 00:28:21,412\nnot clustering is even the right thing for\nus.\n\n584\n00:28:21,412 --> 00:28:24,250\nAll right.\n\n585\n00:28:24,250 --> 00:28:26,670\nAfter that we start planning for\nsome other things.\n\n586\n00:28:26,670 --> 00:28:28,280\nI've mentioned storage more than once,\nright.\n\n587\n00:28:28,280 --> 00:28:29,960\nSo we need to take a look at that, but\n\n588\n00:28:29,960 --> 00:28:33,230\nlooking at the time on the clock we\nare a little short on this segment.\n\n589\n00:28:33,230 --> 00:28:35,180\nSo, let's stop here and take a break and\n\n590\n00:28:35,180 --> 00:28:38,270\nwhen we get back we're going to talk\nabout cluster storage designs and\n\n591\n00:28:38,270 --> 00:28:40,970\nsome of the different solutions there and\nhow we pick between those.\n\n592\n00:28:40,970 --> 00:28:41,884\nSo stay tuned.\n\n593\n00:28:41,884 --> 00:28:43,584\nWe'll be back in a few.\n\n594\n00:28:43,584 --> 00:28:51,039\n[MUSIC]\n\n595\n00:28:51,039 --> 00:28:51,650\nAll right.\n\n596\n00:28:51,650 --> 00:28:52,970\nWelcome back everybody.\n\n597\n00:28:52,970 --> 00:28:56,160\nSo, what I wanna do now is\nswitch gears just a little bit.\n\n598\n00:28:56,160 --> 00:28:58,070\nRight?\nWe're still talking about clustering, but\n\n599\n00:28:58,070 --> 00:29:01,890\nI wanna talk about the storage\npiece of clustering.\n\n600\n00:29:01,890 --> 00:29:04,430\nOne of the big advantages we talked\nabout in the first segment was how\n\n601\n00:29:04,430 --> 00:29:08,510\nwe don't have to synchronize our storage\nwith the SAN because it's shared storage.\n\n602\n00:29:08,510 --> 00:29:09,690\nEverybody sees the same stuff.\n\n603\n00:29:09,690 --> 00:29:13,520\nAll right, well, when we design our SAN,\n\n604\n00:29:13,520 --> 00:29:16,000\nthat's one of the things that\nwe've gotta think about.\n\n605\n00:29:16,000 --> 00:29:18,410\nTypically, storage is not shared.\n\n606\n00:29:18,410 --> 00:29:20,670\nWhen I take a hard drive, and\nI put it inside of a computer,\n\n607\n00:29:20,670 --> 00:29:21,779\nhow many ports does it have on it?\n\n608\n00:29:22,860 --> 00:29:23,490\nJust that one.\n\n609\n00:29:23,490 --> 00:29:26,400\nJust one, right,\nit connects to one system.\n\n610\n00:29:26,400 --> 00:29:28,140\nIt's not like it's got daisy\nchain functionality or\n\n611\n00:29:28,140 --> 00:29:31,370\nwhatever, to run it to\ndifferent computers.\n\n612\n00:29:31,370 --> 00:29:35,480\nThere were some Bluetooth devices and\nstuff that did that early on, or\n\n613\n00:29:35,480 --> 00:29:37,240\neven some SCSI stuff.\n\n614\n00:29:37,240 --> 00:29:37,770\nSCSI, yeah.\nBut,\n\n615\n00:29:37,770 --> 00:29:40,570\nfor the most part these days you\nget these storage devices that\n\n616\n00:29:40,570 --> 00:29:42,920\nare designed to connect to one system.\n\n617\n00:29:42,920 --> 00:29:46,520\nIf that one system fails,\nI was the only person to have the storage.\n\n618\n00:29:46,520 --> 00:29:48,540\nExactly you lose access\nto all that storage.\n\n619\n00:29:48,540 --> 00:29:51,660\nSprint into the server, rip those hard\ndrives out, stick them in another box.\n\n620\n00:29:51,660 --> 00:29:52,950\nYou can do it.\n\n621\n00:29:52,950 --> 00:29:56,980\nBut with shared storage we have hard\ndrives that are stored in some kind of\n\n622\n00:29:56,980 --> 00:30:02,810\nmagical device where more than one\nphysical server can connect and see them.\n\n623\n00:30:02,810 --> 00:30:03,520\nAnd if one server fails, big deal.\nThe other ones have\n\n624\n00:30:03,520 --> 00:30:06,190\naccess to the same storage immediately.\n\n625\n00:30:06,190 --> 00:30:09,870\nNo synchronization, no anything like that,\nthey can just grab it.\n\n626\n00:30:09,870 --> 00:30:13,610\nAll right, but if we think back\nto our early principles, like for\n\n627\n00:30:13,610 --> 00:30:16,330\nthose of you that are A+ certified,\nif we go all the way back in time,\n\n628\n00:30:17,600 --> 00:30:21,420\nhow many heads does a hard drive have?\n\n629\n00:30:21,420 --> 00:30:23,460\nWell, you have one per platter, right.\n\n630\n00:30:23,460 --> 00:30:26,830\nSo a hard drive can really only read or\nwrite from one place at a time.\n\n631\n00:30:27,990 --> 00:30:31,370\nIf you have two servers trying to access\nthe same hard drive at the same time,\n\n632\n00:30:31,370 --> 00:30:32,290\nwhat happens?\n\n633\n00:30:32,290 --> 00:30:33,020\nA lot of thrashing.\n\n634\n00:30:34,290 --> 00:30:39,850\nAnd it is almost always\nguaranteed data corruption.\n\n635\n00:30:39,850 --> 00:30:44,180\nIf two servers access the same storage at\nthe same time, it's like in Ghostbusters.\n\n636\n00:30:44,180 --> 00:30:48,310\nYou cross the stream, it's total\nprotonic reversal, all that good stuff.\n\n637\n00:30:48,310 --> 00:30:49,621\nSo that's not something we want.\n\n638\n00:30:49,621 --> 00:30:54,195\nSo part of the job of a cluster is to\nallow more than one server to connect\n\n639\n00:30:54,195 --> 00:30:57,435\nto the same storage, but\nact like a traffic cop, and\n\n640\n00:30:57,435 --> 00:31:01,925\nsay, node number seven, you're allowed\nto access this drive, no one else can.\n\n641\n00:31:01,925 --> 00:31:03,265\nNode number seven just failed!\n\n642\n00:31:03,265 --> 00:31:04,790\nNumber eight, you now have permission.\n\n643\n00:31:04,790 --> 00:31:05,310\nRight?\n\n644\n00:31:05,310 --> 00:31:06,570\nAnd let them go.\n\n645\n00:31:06,570 --> 00:31:08,100\nAll the servers connect.\n\n646\n00:31:08,100 --> 00:31:09,400\nRight?\nThat way we don't have connection\n\n647\n00:31:09,400 --> 00:31:10,760\nlatency as we build up connections.\n\n648\n00:31:10,760 --> 00:31:11,410\nThey all connect.\n\n649\n00:31:12,470 --> 00:31:16,230\nBut they put that drive in a standby,\na hold-down.\n\n650\n00:31:16,230 --> 00:31:17,540\nRight?\nIt's disabled.\n\n651\n00:31:17,540 --> 00:31:19,160\nAnd it's there and I know about the drive.\n\n652\n00:31:19,160 --> 00:31:21,930\nI'm connected to it, but I'm not going to\ntouch it, I'm not going to read from it,\n\n653\n00:31:21,930 --> 00:31:22,890\nI'm not going to write to it,\n\n654\n00:31:22,890 --> 00:31:27,060\nI'm going to completely ignore that drive\nuntil the cluster tells me it's okay.\n\n655\n00:31:27,060 --> 00:31:30,290\nOh yeah, that active node in that\ncluster really becomes the owner of that\n\n656\n00:31:30,290 --> 00:31:33,120\nresource at that point and\nonly that one node has access to it.\n\n657\n00:31:34,470 --> 00:31:37,930\nSo that's one of the key\nprinciples about shared storage.\n\n658\n00:31:37,930 --> 00:31:42,080\nWhen you deal with shared storage,\nit's breaking the rules, and\n\n659\n00:31:42,080 --> 00:31:45,010\nthe cluster is what solves that\nproblem and enforces the rules.\n\n660\n00:31:45,010 --> 00:31:45,870\nSo they work together.\n\n661\n00:31:45,870 --> 00:31:50,497\nAnd that's a big part of why Microsoft\nwants you to have supported hardware.\n\n662\n00:31:50,497 --> 00:31:54,572\nTo know that it's all obeying the rules\nand you won't have data corruption.\n\n663\n00:31:54,572 --> 00:31:57,950\nWhen we go to get a shared SAN,\nthere's a few choices that we can make.\n\n664\n00:31:57,950 --> 00:31:58,797\nAll right?\n\n665\n00:31:58,797 --> 00:32:02,419\nLet's go through these in terms of cost,\nall right?\n\n666\n00:32:02,419 --> 00:32:07,660\nThe least expensive option is to\ndo shared serial attached SCSI.\n\n667\n00:32:07,660 --> 00:32:09,140\nShared SAS.\n\n668\n00:32:09,140 --> 00:32:12,550\nSAS drives are pretty much what you have\nin most servers these days when you buy\n\n669\n00:32:12,550 --> 00:32:14,390\nthem, the internal hard drives.\n\n670\n00:32:14,390 --> 00:32:19,860\nAnd shared SAS is usually just an external\nenclosure that will have between eight and\n\n671\n00:32:19,860 --> 00:32:21,390\n24 hard drives in it normally.\n\n672\n00:32:21,390 --> 00:32:26,270\nIt's, you know, a 3 U rack\nenclosure bunch of drives in it.\n\n673\n00:32:26,270 --> 00:32:30,480\nAnd it'll have more than one, you know,\n\n674\n00:32:30,480 --> 00:32:34,490\nconnector on the back, right, it's SCSI so\n\n675\n00:32:34,490 --> 00:32:39,290\nit'll be a usually a proprietary connector\nor some kind of standard SCSI connector.\n\n676\n00:32:39,290 --> 00:32:42,500\nAnd we'll have more than one so\nit can run to more than one server.\n\n677\n00:32:42,500 --> 00:32:46,590\nAnd each server will have a physical\nconnection run back to this shared device.\n\n678\n00:32:48,098 --> 00:32:50,290\nIt's inexpensive, cause it's not\na lot of crazy technology there,\n\n679\n00:32:50,290 --> 00:32:52,800\nit's just two different drive\nbuses in the same amount of time.\n\n680\n00:32:52,800 --> 00:32:54,600\nReally an extension of your\ninternal drives at that point.\n\n681\n00:32:54,600 --> 00:32:57,940\nThey just don't happen to be\nphysically located in that machine.\n\n682\n00:32:57,940 --> 00:33:01,060\nSo these come in at a low price point,\nbut there's some problems.\n\n683\n00:33:02,520 --> 00:33:06,590\nProblem number one is they\ndon't scale very well.\n\n684\n00:33:07,770 --> 00:33:10,930\nAs we add more and more hard drives,\n\n685\n00:33:10,930 --> 00:33:15,390\nwe fill it up, now you got to add more and\nmore of these arrays, right?\n\n686\n00:33:15,390 --> 00:33:18,370\nAnd the more arrays you run, well,\nyou can try and daisy chain them, but\n\n687\n00:33:18,370 --> 00:33:20,820\nthe bus begins to saturate, all right?\n\n688\n00:33:20,820 --> 00:33:23,910\nOr you can run them back to separate\nconnectors on the servers, but\n\n689\n00:33:23,910 --> 00:33:25,980\nnow you got to have multiple\nconnectors on the servers.\n\n690\n00:33:25,980 --> 00:33:28,810\nAnd so you really can only go so far.\n\n691\n00:33:28,810 --> 00:33:32,550\nIf you're doing a two-node cluster, shared\nSAS storage is a great option, right?\n\n692\n00:33:32,550 --> 00:33:33,100\nReally works out.\n\n693\n00:33:33,100 --> 00:33:36,400\nThere's a lot of people that sell\nwhat's called a cluster in a box,\n\n694\n00:33:36,400 --> 00:33:41,100\nwhere you basically get this 8U thing,\nand it looks like one big server, but\n\n695\n00:33:41,100 --> 00:33:43,740\ninside of it it's actually two separate\nservers and some shared storage.\n\n696\n00:33:43,740 --> 00:33:46,100\nIt's usually using shared\nshare a task like this and\n\n697\n00:33:46,100 --> 00:33:48,750\nit's all enclosed in one big thing, right?\n\n698\n00:33:48,750 --> 00:33:52,170\nSolutions like that, small and\nmedium businesses, that makes sense.\n\n699\n00:33:52,170 --> 00:33:53,600\nYup.\n\n700\n00:33:53,600 --> 00:33:56,340\nBut when you go bigger,\nwhen you need lots of storage, or\n\n701\n00:33:56,340 --> 00:33:59,170\nyou have lots of servers,\nShared SAS doesn't scale.\n\n702\n00:34:00,520 --> 00:34:02,530\nThe other problem with it is proximity.\n\n703\n00:34:02,530 --> 00:34:03,850\nThe cables are only so long.\n\n704\n00:34:03,850 --> 00:34:05,650\nRight?\nSo with shared SAS,\n\n705\n00:34:05,650 --> 00:34:08,090\nyou're expecting your service to\nbe right there next to each other.\n\n706\n00:34:08,090 --> 00:34:10,320\nUsing the same racks in the same room.\n\n707\n00:34:10,320 --> 00:34:13,805\nSo, you don't get a lot of\ngrowth room there, either.\n\n708\n00:34:15,925 --> 00:34:19,335\nSo while it is an option,\nit isn't expensive, it's a good option.\n\n709\n00:34:19,335 --> 00:34:21,765\nIt's not great for large deployments.\n\n710\n00:34:21,765 --> 00:34:23,405\nRight.\nSo that's where we move into some of our\n\n711\n00:34:23,405 --> 00:34:24,820\nother technologies.\n\n712\n00:34:24,820 --> 00:34:27,810\nThe other technologies\nuse networking instead.\n\n713\n00:34:27,810 --> 00:34:28,460\nAll right?\n\n714\n00:34:28,460 --> 00:34:30,500\nAnd that has pros and cons.\n\n715\n00:34:30,500 --> 00:34:31,910\nRight.\nSo let's talk about iSCSI,\n\n716\n00:34:31,910 --> 00:34:34,260\nwhich would be like the next\nlevel in our price tier.\n\n717\n00:34:35,390 --> 00:34:37,389\nSo, Mike,\nyou've worked a lot with iSCSI, right?\n\n718\n00:34:37,389 --> 00:34:39,140\nYeah.\niSCSI is pretty nice because you're\n\n719\n00:34:39,140 --> 00:34:43,110\nbasically using your\nstandard ethernet cabling.\n\n720\n00:34:43,110 --> 00:34:46,210\nRelatively fast and\nrelatively inexpensive so\n\n721\n00:34:46,210 --> 00:34:49,000\na good solution as we\nmove up in our needs.\n\n722\n00:34:49,000 --> 00:34:51,800\nThey're easily to scale out.\n\n723\n00:34:51,800 --> 00:34:55,460\nMicrosoft has built in\niSCSI target support.\n\n724\n00:34:55,460 --> 00:34:58,870\nYour clients have iSCSI\ninitiators built in to them.\n\n725\n00:34:58,870 --> 00:34:59,910\nSo a pretty good solution.\n\n726\n00:35:00,920 --> 00:35:02,700\nThe nice thing about iSCSI\nis if you're a small or\n\n727\n00:35:02,700 --> 00:35:06,660\na medium business The iSCSI is saying\nit's just going over your TCP IP network.\n\n728\n00:35:06,660 --> 00:35:09,060\nSo your servers have a regular\nnetwork card in them and\n\n729\n00:35:09,060 --> 00:35:12,680\nit connects via the regular TCP IP\nnetwork to that Icecast is saying,\n\n730\n00:35:12,680 --> 00:35:14,940\nbut this comes at a price, right?\n\n731\n00:35:14,940 --> 00:35:19,300\nThe main price is how fast\nis your local area network?\n\n732\n00:35:19,300 --> 00:35:19,880\nRight.\n\n733\n00:35:19,880 --> 00:35:22,760\nIt's probably a gigabyte network,\nmost networks are these days.\n\n734\n00:35:22,760 --> 00:35:23,620\nRight?\n\n735\n00:35:23,620 --> 00:35:25,072\nIt could be a hundred megabyte, though.\n\n736\n00:35:25,072 --> 00:35:25,800\n[LAUGH] All right.\n\n737\n00:35:25,800 --> 00:35:27,400\nIt could be ten gigs, for\nthat matter, I don't know.\n\n738\n00:35:27,400 --> 00:35:29,770\nBut most people aren't ten gigs these\ndays, and maybe it's a gigabyte.\n\n739\n00:35:29,770 --> 00:35:30,365\nRight?\n\n740\n00:35:30,365 --> 00:35:34,725\nSo now all of your disk IO\nis being sent across this\n\n741\n00:35:34,725 --> 00:35:39,385\none gigabyte link and that gets\nsaturated pretty fast, all right.\n\n742\n00:35:39,385 --> 00:35:41,825\nIt's also the same LAN as\nyour regular traffic so\n\n743\n00:35:41,825 --> 00:35:43,940\nnow you've got contention, all right.\n\n744\n00:35:43,940 --> 00:35:46,220\nAnd so\nthat creates a bit of a problem too.\n\n745\n00:35:46,220 --> 00:35:50,912\nAnd that makes iSCSI you not so viable for\nthings like verbal machine live migration\n\n746\n00:35:50,912 --> 00:35:54,867\nbecause it's just difficult to run\nthese host OSs right from the iSCSI\n\n747\n00:35:54,867 --> 00:35:59,047\nconstantly making changes and\nkeeping all that synchronized and happy.\n\n748\n00:35:59,047 --> 00:36:03,090\nSo iSCSI cause he has some\nperformance issues to worry about.\n\n749\n00:36:03,090 --> 00:36:05,380\nThat doesn't mean it's not viable right?\n\n750\n00:36:05,380 --> 00:36:08,070\nThere's steps we can\ntake to improve iSCSI.\n\n751\n00:36:08,070 --> 00:36:11,590\nIf you're going to use it, first off,\njust I mean right off the bat, and\n\n752\n00:36:11,590 --> 00:36:13,386\nyou should probably do this\neven in a small environment,\n\n753\n00:36:13,386 --> 00:36:17,300\nyou should have a dedicated\nphysical network just for iSCSI.\n\n754\n00:36:17,300 --> 00:36:19,300\nSegregate that traffic out.\n\n755\n00:36:19,300 --> 00:36:22,660\nGet that normal network traffic\ncompletely off of your data network.\n\n756\n00:36:22,660 --> 00:36:23,200\nYep, yeah.\n\n757\n00:36:23,200 --> 00:36:26,060\nDon't buy you'll hear people\nsay oh I do quality of service,\n\n758\n00:36:26,060 --> 00:36:27,640\nI prioritize the storage and stuff.\n\n759\n00:36:27,640 --> 00:36:28,860\nWell that's great.\n\n760\n00:36:28,860 --> 00:36:31,230\nDo it separate now, all right.\n\n761\n00:36:31,230 --> 00:36:33,160\nWhen you do a separate network,\n\n762\n00:36:33,160 --> 00:36:35,720\nit's going to make it where you can even\ngo further than your normal network.\n\n763\n00:36:35,720 --> 00:36:38,930\nYour normal network might have hundreds of\nports and you have a gigabyte on those.\n\n764\n00:36:38,930 --> 00:36:41,520\nIt would be too expensive\nto go to ten gig.\n\n765\n00:36:41,520 --> 00:36:44,570\nBut when you deploy iSCSI, maybe\nyou've got eight servers in this node.\n\n766\n00:36:44,570 --> 00:36:49,340\nYou can get an eight port, ten gig switch\nfor a lot less expensive than you would to\n\n767\n00:36:49,340 --> 00:36:51,640\nupgrade all the hundreds of\nports in your environment.\n\n768\n00:36:51,640 --> 00:36:55,710\nSo you can create a much faster\ndedicated network just for iSCSI.\n\n769\n00:36:55,710 --> 00:37:00,620\nYou absolutely want to do that, the other\nthing is you're dealing with TCPIP here,\n\n770\n00:37:00,620 --> 00:37:02,850\nand TCPIP has a lot of overhead.\n\n771\n00:37:02,850 --> 00:37:03,520\nYep.\n\n772\n00:37:03,520 --> 00:37:08,630\nWhen you have a gigabyte connection,\nafter you take in all the overhead and\n\n773\n00:37:08,630 --> 00:37:12,025\nextra stuff,\nyou're lucky to get 60% of that bandwidth.\n\n774\n00:37:12,025 --> 00:37:13,865\nBecause it goes to half sometimes.\n\n775\n00:37:13,865 --> 00:37:15,995\nYeah, it really does consume quite a bit.\n\n776\n00:37:15,995 --> 00:37:19,295\nAll the different check sums and\nheaders and the acknowledgements,\n\n777\n00:37:19,295 --> 00:37:20,075\nthe window sizes.\n\n778\n00:37:20,075 --> 00:37:24,630\nBut that all impacts the communications\nthat we send, and a normal network.\n\n779\n00:37:24,630 --> 00:37:29,390\nIs sending data in frames that\nare fifteen hundred bytes in size.\n\n780\n00:37:29,390 --> 00:37:34,380\nAnd of that fifteen hundred bytes,\nover half of it is header data.\n\n781\n00:37:34,380 --> 00:37:35,370\nAll right.\n\n782\n00:37:35,370 --> 00:37:38,420\nIf you do any of our networking shows\nwe break into this in real detail,\n\n783\n00:37:38,420 --> 00:37:41,390\nbut, over half your data sitting\non the network is header data,\n\n784\n00:37:41,390 --> 00:37:43,660\nand that's not your actual payload.\n\n785\n00:37:43,660 --> 00:37:49,070\nSo, out of that fifteen hundred byte\nframe, it's usually just under 500 bytes,\n\n786\n00:37:49,070 --> 00:37:52,340\nusually 462 bytes,\nanother weird number, but right in\n\n787\n00:37:52,340 --> 00:37:56,150\nthere is the actual amount of data\npayload that you can carry in that frame.\n\n788\n00:37:56,150 --> 00:37:57,820\nIt's not very efficient.\n\n789\n00:37:57,820 --> 00:38:01,480\nIf we do a dedicated iSCSI network,\nwe can use something called Superframes.\n\n790\n00:38:01,480 --> 00:38:04,490\nAnd we can bump up to 9,000 byte frames.\n\n791\n00:38:04,490 --> 00:38:09,260\nNow, in that 9,000 byte frame,\nyou can have considerably more data in it,\n\n792\n00:38:09,260 --> 00:38:13,810\nwhich means less check sums and\nless headers, a more efficient network.\n\n793\n00:38:13,810 --> 00:38:15,180\nBut your workstations aren't\ngoing to support that.\n\n794\n00:38:15,180 --> 00:38:16,520\nYour traditional network\nisn't going to support that.\n\n795\n00:38:16,520 --> 00:38:18,495\nSo, you need to do a dedicated for that.\n\n796\n00:38:18,495 --> 00:38:19,403\nSo, that's kind of rule number one.\n\n797\n00:38:21,000 --> 00:38:21,530\nAll right.\n\n798\n00:38:21,530 --> 00:38:23,340\nRule number two.\n\n799\n00:38:23,340 --> 00:38:28,560\nYou can use a standard network adaptor for\nyour iSCSI network.\n\n800\n00:38:28,560 --> 00:38:29,950\nBut you don't want to.\n\n801\n00:38:29,950 --> 00:38:35,490\nThey make, specifically designed for\niSCSI's special network adaptors\n\n802\n00:38:35,490 --> 00:38:39,250\nthat have accelerators and\nhardware processors on them.\n\n803\n00:38:39,250 --> 00:38:43,610\nFor doing the translation between\na standard SCSI call and TCPIP.\n\n804\n00:38:43,610 --> 00:38:48,120\nAnd it will do that conversion in hardware\nversus having the Windows OS do it for\n\n805\n00:38:48,120 --> 00:38:49,730\nyou in software.\n\n806\n00:38:49,730 --> 00:38:52,240\nThat'll create more\nefficient communications.\n\n807\n00:38:52,240 --> 00:38:55,240\nIt'll reduce the latency on your reads and\nwrites.\n\n808\n00:38:55,240 --> 00:38:58,150\nAnd if you have a dedicated network, and\n\n809\n00:38:58,150 --> 00:39:01,930\nadapters that are specifically designed\nfor iSCSI, you can have communications\n\n810\n00:39:01,930 --> 00:39:07,270\nthat are not the same but close to local\nhard drive write speeds, all right.\n\n811\n00:39:07,270 --> 00:39:10,575\nSo iSCSI can be very viable\nin that environment.\n\n812\n00:39:10,575 --> 00:39:11,770\nUh-hm.\n\n813\n00:39:11,770 --> 00:39:13,410\nBut again it doesn't scale very well.\n\n814\n00:39:13,410 --> 00:39:16,370\nAs we grow, as we add more and\nmore of these iSCSI SANS, it's more and\n\n815\n00:39:16,370 --> 00:39:17,480\nmore traffic.\n\n816\n00:39:17,480 --> 00:39:18,555\nAnd things start to become challenging.\n\n817\n00:39:18,555 --> 00:39:21,504\nSo iSCSI SANs,\n\n818\n00:39:21,504 --> 00:39:26,270\nthey work but\nwe just need to keep that in mind.\n\n819\n00:39:26,270 --> 00:39:30,220\nAll right, now the real goal if you're\na large or enterprise business.\n\n820\n00:39:30,220 --> 00:39:34,080\nYou're going to skip shared SAS,\nyou're going to skip iSCSI and\n\n821\n00:39:34,080 --> 00:39:37,250\nyou're going to go right to what\nthe creators of all this stuff intended.\n\n822\n00:39:37,250 --> 00:39:38,510\nWhich is a fiber channel SAN.\n\n823\n00:39:38,510 --> 00:39:42,810\nI've got a little diagram here that kind\nof shows how a fiber channel SAN works.\n\n824\n00:39:42,810 --> 00:39:44,390\nThey can work a few different ways.\n\n825\n00:39:44,390 --> 00:39:48,720\nIf it's a small cluster, your SAN,\nwhatever SAN you go out and\n\n826\n00:39:48,720 --> 00:39:52,412\npurchase, may have fiber\nchannel ports right on it.\n\n827\n00:39:52,412 --> 00:39:55,714\nA lot of the ones you get from HP,\nthe E series and stuff,\n\n828\n00:39:55,714 --> 00:39:58,402\nthey'll come with four\nfiber ports on them.\n\n829\n00:39:58,402 --> 00:40:01,943\nSo you can take four nodes and\nplug them right into the SAN.\n\n830\n00:40:01,943 --> 00:40:07,332\nOkay, so, that's a fiber optic\nconnection that is not running TCP/IP.\n\n831\n00:40:07,332 --> 00:40:13,310\nAll right, it is actually sending SCSI\ncalls over the fiber optic line and\n\n832\n00:40:13,310 --> 00:40:17,975\neven the slowest ones,\nthe cheap ones, run at 8 gigabits.\n\n833\n00:40:17,975 --> 00:40:21,595\nSo you're talking about faster than your\nregular network connections without all\n\n834\n00:40:21,595 --> 00:40:25,893\nthe TCP/IP overhead,\nyou get far better performance.\n\n835\n00:40:25,893 --> 00:40:30,861\nAll right, the other thing is when you\nstart connecting these nodes up, well,\n\n836\n00:40:30,861 --> 00:40:33,802\nthey're being plugged into your server.\n\n837\n00:40:33,802 --> 00:40:37,672\nNot into a traditional network adapter,\nbut to an HBA, a host bus adapter.\n\n838\n00:40:37,672 --> 00:40:41,192\nAnd that shows up to the server\nas a hard drive controller.\n\n839\n00:40:41,192 --> 00:40:43,342\nIt sees it not as a network card,\nbut a hard drive controller so\n\n840\n00:40:43,342 --> 00:40:46,490\nit's sending traditional SCSI calls to it.\n\n841\n00:40:46,490 --> 00:40:50,982\nAnd then that adapter handles that\ntranslation to send it across the fiber\n\n842\n00:40:50,982 --> 00:40:55,764\nline, which is a very light translation,\nit doesn't have to do much at all and\n\n843\n00:40:55,764 --> 00:40:58,816\nshoots it over to the SAN and\noff we go, all right?\n\n844\n00:40:58,816 --> 00:41:00,500\nThis only scales so far.\n\n845\n00:41:00,500 --> 00:41:03,405\nIf we have like four ports here in\nthe SAN, you kind of have a limit, so\n\n846\n00:41:03,405 --> 00:41:08,670\nwe'll almost always deploy this way\nwith a SAN switch in the middle.\n\n847\n00:41:08,670 --> 00:41:10,320\nAll right,\nthis is called creating a SAN fabric.\n\n848\n00:41:10,320 --> 00:41:12,880\nRight, that's what would be referred\nto on the exam and in real life.\n\n849\n00:41:12,880 --> 00:41:17,330\nThat fabric is what's connecting\nour nodes to the SAN.\n\n850\n00:41:17,330 --> 00:41:21,600\nAnd when you bring a switch in you can get\na 24 port, a 48 port switch, whatever.\n\n851\n00:41:21,600 --> 00:41:26,500\nAnd I know I only drew one link here but\nyou'll normally have two or three cables,\n\n852\n00:41:26,500 --> 00:41:30,270\nyou'll take that SAN and you'll give it\nmultiple connections into that switch\n\n853\n00:41:30,270 --> 00:41:34,360\nto provide your nodes redundant\nconnections and more bandwidth.\n\n854\n00:41:34,360 --> 00:41:35,574\nRight?\nIf you start adding these\n\n855\n00:41:35,574 --> 00:41:36,403\nadditional links.\n\n856\n00:41:36,403 --> 00:41:37,598\nAggregating that up, yeah, absolutely.\n\n857\n00:41:37,598 --> 00:41:39,764\nSo you take this SAN\nhere that had four links,\n\n858\n00:41:39,764 --> 00:41:41,702\nwe can run all four into this switch, and\n\n859\n00:41:41,702 --> 00:41:45,590\nI can have different nodes coming in on\ndifferent links to really optimize that.\n\n860\n00:41:45,590 --> 00:41:47,850\nAnd if one link fails,\nthe others just take over, right?\n\n861\n00:41:47,850 --> 00:41:49,280\nYou have a lot of flexibility.\n\n862\n00:41:49,280 --> 00:41:51,770\nIt is not a normal switch,\nthough, it is a SAN switch.\n\n863\n00:41:51,770 --> 00:41:54,370\nAnd when you go out and\nbuy them it's gotta be that specifically.\n\n864\n00:41:54,370 --> 00:41:56,160\nAnd they used to be incredibly expensive.\n\n865\n00:41:56,160 --> 00:41:58,150\nBack in the days when Brocade and\n\n866\n00:41:58,150 --> 00:42:03,110\nMcDATA had the monopoly on SAN switches,\nthey were pretty expensive.\n\n867\n00:42:03,110 --> 00:42:05,362\nCisco entered the market about six or\n\n868\n00:42:05,362 --> 00:42:09,510\nseven years ago and they decided they\nwere gonna become the king by offering\n\n869\n00:42:09,510 --> 00:42:13,080\ngreat switches with a lot\nof features on the cheap.\n\n870\n00:42:13,080 --> 00:42:15,300\nAnd by cheap,\nI mean half the price of the other guys.\n\n871\n00:42:15,300 --> 00:42:16,370\nAnd they slaughtered the market.\n\n872\n00:42:16,370 --> 00:42:19,880\nSo now these switches are really\ninexpensive and Brocade and McDATA,\n\n873\n00:42:19,880 --> 00:42:21,360\ntheirs came down.\n\n874\n00:42:21,360 --> 00:42:26,648\nSo now these are not that big of a deal\nto throw in, and you get scaleability.\n\n875\n00:42:26,648 --> 00:42:29,507\nNot just scaleability as far\nas multiple nodes connecting,\n\n876\n00:42:29,507 --> 00:42:32,205\ncuz you can go to as many ports\nas you have, but more SANs.\n\n877\n00:42:32,205 --> 00:42:35,718\nYou can have more than one SAN\nconnected to the same switch, and\n\n878\n00:42:35,718 --> 00:42:39,640\nnow your nodes use their HBA and\nhave connections to more than one SAN.\n\n879\n00:42:39,640 --> 00:42:41,918\nAll right, so,\nthis is the ideal deployment.\n\n880\n00:42:41,918 --> 00:42:44,350\nIt does require fiber optic cabling,\nright?\n\n881\n00:42:44,350 --> 00:42:46,490\nThis is fiber optics, right?\n\n882\n00:42:46,490 --> 00:42:49,150\nIt requires specialized switches,\nspecialized hardware.\n\n883\n00:42:49,150 --> 00:42:51,360\nSo anytime we say specialized,\nthat equals dollar signs.\n\n884\n00:42:51,360 --> 00:42:52,890\nAnd I think I said it four times there.\n\n885\n00:42:52,890 --> 00:42:53,890\nSo it's four dollar signs.\n\n886\n00:42:53,890 --> 00:42:59,470\nThis is not inexpensive technologies,\nright?\n\n887\n00:42:59,470 --> 00:43:02,130\nI'm trying to think of the lowest\ncost fiber channel SAN I've done in\n\n888\n00:43:02,130 --> 00:43:02,990\na production environment.\n\n889\n00:43:02,990 --> 00:43:07,620\nYou can go on the cheap and build one\nat home and not break $2000, right?\n\n890\n00:43:07,620 --> 00:43:11,150\nBut in a production environment,\nyou know, tax,\n\n891\n00:43:11,150 --> 00:43:15,220\ntag, and title, all the support and stuff,\nI think the least expensive fiber channel\n\n892\n00:43:15,220 --> 00:43:18,410\nSAN I worked on was just\na hair under $50,000.\n\n893\n00:43:18,410 --> 00:43:18,910\nRight?\n\n894\n00:43:20,270 --> 00:43:23,610\nSo this is not a small or medium\nbusiness thing, this is an enterprise.\n\n895\n00:43:23,610 --> 00:43:28,600\nBut, if you want redundant storage,\nand clustering capabilities,\n\n896\n00:43:28,600 --> 00:43:31,450\nrapid failover,\nlive virtual machine migration,\n\n897\n00:43:31,450 --> 00:43:34,740\nall that fancy stuff, fiber channel\nSANs really are the way to go.\n\n898\n00:43:34,740 --> 00:43:35,510\nAbsolutely.\n\n899\n00:43:35,510 --> 00:43:36,480\nRight.\n\n900\n00:43:36,480 --> 00:43:39,300\nNow if we have multiple SANs, whoops.\n\n901\n00:43:39,300 --> 00:43:40,157\nOr if we launch PuTTY.\n\n902\n00:43:40,157 --> 00:43:44,679\nSo if we have multiple SANs,\nwe can do separate SANs like this, or\n\n903\n00:43:44,679 --> 00:43:49,617\nwe could run the SANs into the same\nswitch to create where we have clients\n\n904\n00:43:49,617 --> 00:43:52,774\nconnecting to more than one SAN,\nall right?\n\n905\n00:43:52,774 --> 00:43:54,935\nBut we've gotta plan for redundancy here.\n\n906\n00:43:54,935 --> 00:43:59,915\nSo when we plan for redundancy, you might\nchoose to have more than one SAN, and\n\n907\n00:43:59,915 --> 00:44:05,060\nyour nodes kind of, map there, but your\nnodes may have connections in between.\n\n908\n00:44:05,060 --> 00:44:07,330\nWe start to create a redundancy.\n\n909\n00:44:07,330 --> 00:44:09,940\nAnd you may create\nan environment like this.\n\n910\n00:44:09,940 --> 00:44:14,490\nNotice I've got SAN number 2 is basically\nrunning off of these red links, and\n\n911\n00:44:14,490 --> 00:44:16,750\nSAN number 1 is running\noff the orange links.\n\n912\n00:44:16,750 --> 00:44:19,610\nBut everybody has two links.\n\n913\n00:44:19,610 --> 00:44:23,930\nSo, if this switch fails, or\nthis cable fails, or this cable fails, or\n\n914\n00:44:23,930 --> 00:44:27,620\nthis SAN fails,\nwe're able to jump over to the other one.\n\n915\n00:44:27,620 --> 00:44:31,885\nWe have a full mesh switch fabric and\nyou actually have two meshes here, right?\n\n916\n00:44:31,885 --> 00:44:33,890\nCuz there's really two separate fabrics,\nso\n\n917\n00:44:33,890 --> 00:44:37,020\nthis gives us a high level of redundancy.\n\n918\n00:44:37,020 --> 00:44:40,440\nYou can't do this with shared SANS and\niSCSI, I guess you come\n\n919\n00:44:40,440 --> 00:44:46,030\na little close with MPIO, we don't talk\nabout MPIO in this show Later on, yep.\n\n920\n00:44:46,030 --> 00:44:49,390\nSo we'll get into multipath input output,\nsome ways that we can try and\n\n921\n00:44:49,390 --> 00:44:52,240\nachieve this with iSCSI and\nFibre Channel 2.\n\n922\n00:44:52,240 --> 00:44:54,550\nBut with physical cabling,\nthat's the best.\n\n923\n00:44:54,550 --> 00:44:55,890\nWe get that full redundancy.\n\n924\n00:44:57,610 --> 00:45:01,580\nAll right, so as we design our SAN, these\nare the things we need to think about.\n\n925\n00:45:01,580 --> 00:45:04,280\nWhat level of redundancy\ndo we need in our hardware?\n\n926\n00:45:04,280 --> 00:45:07,950\nWhat level of performance do I\nneed out of my SAN equipment?\n\n927\n00:45:07,950 --> 00:45:11,100\nWhen do I need to make that\ntransition between them?\n\n928\n00:45:11,100 --> 00:45:13,752\nRight, and my rule of thumb is\nif this is going in production,\n\n929\n00:45:13,752 --> 00:45:14,880\nyou need fiber channel.\n\n930\n00:45:14,880 --> 00:45:16,660\nRight?\nIt is as simple as that.\n\n931\n00:45:16,660 --> 00:45:20,370\nIf it's only gonna be two nodes,\nor maybe three nodes, right?\n\n932\n00:45:20,370 --> 00:45:21,960\nMaybe four nodes, tops.\n\n933\n00:45:21,960 --> 00:45:23,685\nYou can go with shared SANs, right?\n\n934\n00:45:23,685 --> 00:45:28,470\nIt'd be a lot less expensive, but it's all\nlimited to one building, one data center.\n\n935\n00:45:28,470 --> 00:45:30,640\nWhen you go fiber channel, you can have\nthese servers in different places in\n\n936\n00:45:30,640 --> 00:45:34,390\nthe building connected via fibers, so\nyou can get a lot more flexibility there.\n\n937\n00:45:34,390 --> 00:45:36,500\nSo you may still wanna go fiber channel.\n\n938\n00:45:36,500 --> 00:45:39,630\nIf you're in a test or\ndevelopment environment, iSCSI is great.\n\n939\n00:45:39,630 --> 00:45:43,736\nYou don't even have to buy an iSCI SAN,\nyou can take a Windows Server and\n\n940\n00:45:43,736 --> 00:45:45,790\ninstall the iSCSI target on it.\n\n941\n00:45:45,790 --> 00:45:47,510\nAnd then it can serve\nas that iSCSI target,\n\n942\n00:45:47,510 --> 00:45:50,000\nyou put the iSCSI initiator on\nthese guys and they connect up.\n\n943\n00:45:50,000 --> 00:45:53,090\nSo you don't even have to have\nSAN hardware to do that, but\n\n944\n00:45:53,090 --> 00:45:55,760\nyour performance is not gonna be great,\nright, so.\n\n945\n00:45:55,760 --> 00:45:58,390\nSo, keep that in mind as you\nstart to design your SAN.\n\n946\n00:45:58,390 --> 00:46:01,829\nAnd just know that, as far as\nfailover clustering is concerned,\n\n947\n00:46:01,829 --> 00:46:04,392\nas far as what we're\ntalking about in this show,\n\n948\n00:46:04,392 --> 00:46:07,159\nit doesn't really care which one you have,\nright?\n\n949\n00:46:07,159 --> 00:46:10,919\nThe failover cluster just wants\nto know you have shared storage.\n\n950\n00:46:10,919 --> 00:46:15,197\nIt doesn't care how you achieve it, so you\npick whichever option is right for you and\n\n951\n00:46:15,197 --> 00:46:17,258\njust make sure it's listed by the WHQL.\n\n952\n00:46:17,258 --> 00:46:23,980\nAll right, now we probably do want\na few extra features in our SAN, right?\n\n953\n00:46:23,980 --> 00:46:25,537\nSecurity is the main thing.\n\n954\n00:46:25,537 --> 00:46:30,081\nI said that no server should be\nable to access the same hard drive\n\n955\n00:46:30,081 --> 00:46:31,376\nat the same time.\n\n956\n00:46:31,376 --> 00:46:35,683\nAnd If I have a cluster attached to a SAN,\nthe cluster will manage that.\n\n957\n00:46:35,683 --> 00:46:40,240\nBut what if I have more than one\ncluster attached to the SAN, right?\n\n958\n00:46:40,240 --> 00:46:43,782\nLet me go back to one of my pictures,\nthis one would show it but\n\n959\n00:46:43,782 --> 00:46:48,000\nit's a little too complex,\nso let's go here, all right?\n\n960\n00:46:48,000 --> 00:46:51,725\nLet's say that I have an environment\nlike this, all right?\n\n961\n00:46:51,725 --> 00:46:59,790\nAnd I'm just gonna make this\none centralized system, right?\n\n962\n00:46:59,790 --> 00:47:02,110\nSo I've got this switch here.\n\n963\n00:47:02,110 --> 00:47:05,130\nI've got two SANs attached to it.\n\n964\n00:47:05,130 --> 00:47:08,755\nAnd I've got these various nodes, they're\nconnected into the switch too, right.\n\n965\n00:47:08,755 --> 00:47:11,228\nSo everybody's gonna be\nconnected right here, okay.\n\n966\n00:47:11,228 --> 00:47:14,106\nBut, what I've actually got\nare two different clusters.\n\n967\n00:47:14,106 --> 00:47:19,440\nSo, maybe the nodes on the left\nare in cluster number one.\n\n968\n00:47:19,440 --> 00:47:23,790\nSo I'll just kinda circle those so\nI can remember, all right.\n\n969\n00:47:23,790 --> 00:47:26,170\nSo this is gonna be cluster number one.\n\n970\n00:47:26,170 --> 00:47:29,010\nAnd the nodes on the right will\nbe in a different cluster.\n\n971\n00:47:29,010 --> 00:47:30,720\nThey'll be in cluster number two, right?\n\n972\n00:47:31,980 --> 00:47:34,770\nBecause I guess that's what's next if\nwe're going with the whole number thing.\n\n973\n00:47:34,770 --> 00:47:38,264\nSo these guys will be in\nthe next cluster over, right?\n\n974\n00:47:38,264 --> 00:47:39,623\nSo really, two different clusters.\n\n975\n00:47:39,623 --> 00:47:44,016\nWell, the failover clustering\nsoftware will make sure that Node 1\n\n976\n00:47:44,016 --> 00:47:48,050\nnever accesses a hard drive\nthat Node 2 is using.\n\n977\n00:47:48,050 --> 00:47:51,200\nAnd Node 2 will never access\na hard drive that Node 1 is using.\n\n978\n00:47:51,200 --> 00:47:55,797\nBut the failover cluster manager is\nnot looking at Node 3 and Node 4.\n\n979\n00:47:55,797 --> 00:47:57,308\nThese guys are in the wrong cluster.\n\n980\n00:47:57,308 --> 00:48:00,531\nAnd over there, it's making sure that Node\n3 ad Node 4 don't access the same hard\n\n981\n00:48:00,531 --> 00:48:01,465\ndrive at the same time.\n\n982\n00:48:01,465 --> 00:48:05,898\nBut how do I make sure that cluster one\ndoesn't access a hard drive that cluster\n\n983\n00:48:05,898 --> 00:48:06,980\ntwo is accessing?\n\n984\n00:48:08,140 --> 00:48:09,760\nIt doesn't handle that.\n\n985\n00:48:09,760 --> 00:48:14,500\nSo whichever SAN solution we go with,\nwe'll more than likely want to implement\n\n986\n00:48:14,500 --> 00:48:18,800\nsome technologies to stop that\nfrom happening, to protect it.\n\n987\n00:48:18,800 --> 00:48:21,300\nSo, here's a few of the ones\nwe might want to look for.\n\n988\n00:48:21,300 --> 00:48:26,370\nAn easy one is to do, like if it's iSCSI\nSAN, you can do CAC authentication.\n\n989\n00:48:26,370 --> 00:48:31,150\nSo you can require a username and password\nto connect that LUN to that logical unit,\n\n990\n00:48:31,150 --> 00:48:33,630\nthat virtual hard drive in the SAN.\n\n991\n00:48:33,630 --> 00:48:37,500\nAnd you can put the username and password\non these servers, but not on these.\n\n992\n00:48:37,500 --> 00:48:39,290\nSo now these servers can't\nconnect because they just don't\n\n993\n00:48:39,290 --> 00:48:40,273\nhave the username and password.\n\n994\n00:48:40,273 --> 00:48:40,888\nAll right.\n\n995\n00:48:40,888 --> 00:48:42,501\nThat works with iSCSI SANs.\n\n996\n00:48:42,501 --> 00:48:45,970\nBut it doesn't work with\nfiber channel because you're\n\n997\n00:48:45,970 --> 00:48:47,240\nseeing these local hard drives.\n\n998\n00:48:47,240 --> 00:48:48,535\nYou're not authenticating\nthese local hard drives.\n\n999\n00:48:48,535 --> 00:48:49,653\n[CROSSTALK] authentication\nprocess going on there.\n\n1000\n00:48:49,653 --> 00:48:53,280\nSo instead we're going to rely\non something else to do it.\n\n1001\n00:48:54,320 --> 00:48:58,500\nOn your SAN, you'll likely have\nsupport for what's called LUN masking.\n\n1002\n00:48:59,680 --> 00:49:02,486\nEach of these servers has an HBA,\na host bus adaptor and\n\n1003\n00:49:02,486 --> 00:49:04,200\nthe HBA has an address tied to it.\n\n1004\n00:49:04,200 --> 00:49:06,512\nAnd that address is just\nthe identifier for that adapter.\n\n1005\n00:49:06,512 --> 00:49:08,070\nIt's kinda like the MAC\naddress on a network card.\n\n1006\n00:49:08,070 --> 00:49:11,230\nAnd when LUN masking\non the SAN you can say\n\n1007\n00:49:11,230 --> 00:49:15,900\nthis particular ID is\nallowed to access this LUN.\n\n1008\n00:49:15,900 --> 00:49:21,250\nOr these two ID's are allowed\nto access this LUN right here.\n\n1009\n00:49:21,250 --> 00:49:24,030\nThese two IDs are allowed\nto access this one, and\n\n1010\n00:49:24,030 --> 00:49:27,330\nyou can start to specify\nvirtual drive by virtual drive,\n\n1011\n00:49:27,330 --> 00:49:30,930\nwhat hosts are allowed to connect that,\nand that creates that separation.\n\n1012\n00:49:30,930 --> 00:49:32,450\nLUN masking is one of\nthe easiest ways to do it.\n\n1013\n00:49:33,600 --> 00:49:36,220\nA lot of security professionals\ndon't like LUN masking\n\n1014\n00:49:36,220 --> 00:49:40,220\nbecause you can spoof your HBA's address.\n\n1015\n00:49:40,220 --> 00:49:43,920\nSo a hacker can get into this server,\nstart spoofing the address and\n\n1016\n00:49:43,920 --> 00:49:45,700\naccessing other LUNs.\n\n1017\n00:49:45,700 --> 00:49:47,130\nSo there are other technologies out there.\n\n1018\n00:49:48,360 --> 00:49:52,440\nAnother one that we have is a SAN zone.\n\n1019\n00:49:52,440 --> 00:49:57,460\nYou can create zones where you divide\nup multiple ones to create zones.\n\n1020\n00:49:57,460 --> 00:50:00,980\nAnd you tie that typically to the HBA ID.\n\n1021\n00:50:00,980 --> 00:50:05,186\nSo now node one might have access\nto these two LUNs, versus,\n\n1022\n00:50:05,186 --> 00:50:07,990\nnode three,\nthat might only have access to this one.\n\n1023\n00:50:07,990 --> 00:50:10,200\nYou create zones inside of the SAN.\n\n1024\n00:50:10,200 --> 00:50:13,350\nSo they kind of suffer from\nthe same thing as the.\n\n1025\n00:50:13,350 --> 00:50:19,850\nA third option is to use,\nwhat are called, VSAN's.\n\n1026\n00:50:19,850 --> 00:50:23,770\nVSAN's are virtual storage area networks\nand it's a function of the switch.\n\n1027\n00:50:24,890 --> 00:50:28,720\nThe switch knows that there's\ntwo SANs back here, but\n\n1028\n00:50:28,720 --> 00:50:32,410\nthe switch could actually create virtual\nSANs, could create five of them.\n\n1029\n00:50:32,410 --> 00:50:35,860\nSo the clients think that\nthere's five different SANs and\n\n1030\n00:50:35,860 --> 00:50:38,220\nyou could say that Node 1 and 2 here.\n\n1031\n00:50:38,220 --> 00:50:39,850\nHave access to virtual SAN1.\n\n1032\n00:50:40,940 --> 00:50:49,433\nAnd virtual SAN1 might be made up of just\na subset of a particular entry on the SAN.\n\n1033\n00:50:49,433 --> 00:50:53,931\nSo virtual SAN1 might just have\nthese lungs right here, all right or\n\n1034\n00:50:53,931 --> 00:50:58,260\nvirtual SAN1 might have these\nlungs over here or In theory,\n\n1035\n00:50:58,260 --> 00:51:00,100\nif we wanted because it's\nall massed on the back end.\n\n1036\n00:51:00,100 --> 00:51:00,710\nRight.\n\n1037\n00:51:00,710 --> 00:51:04,940\nVirtual SAN1 could contain\nLUNs on two different SANs.\n\n1038\n00:51:04,940 --> 00:51:06,930\nYour clients don't know that,\nthey only see virtual SAN1.\n\n1039\n00:51:06,930 --> 00:51:09,820\nThey think it's one SAN,\nand it's multiple lapses.\n\n1040\n00:51:09,820 --> 00:51:12,990\nIt's really cool because it makes\nmigrating between physical SANs super\n\n1041\n00:51:12,990 --> 00:51:14,280\neasy, it's awesome stuff.\n\n1042\n00:51:14,280 --> 00:51:17,010\nAll right.\nBut from a security stand point.\n\n1043\n00:51:17,010 --> 00:51:19,620\nYou only see that SAN,\nyou don't see the other SANs.\n\n1044\n00:51:19,620 --> 00:51:21,360\nSo even if you start spoofing\nyour ID it doesn't matter.\n\n1045\n00:51:21,360 --> 00:51:23,250\nYou're spoofing your ID against\nthe one SAN that you see.\n\n1046\n00:51:23,250 --> 00:51:24,560\nThe only one you see, yeah.\n\n1047\n00:51:24,560 --> 00:51:27,500\nAnd Ed that's really good for\nwhen we have to do multi-tenants.\n\n1048\n00:51:27,500 --> 00:51:30,820\nIf we're providing support for\nmore than one customer,\n\n1049\n00:51:30,820 --> 00:51:34,220\nI've gotta make sure that that one\ncustomer can't spoof something and\n\n1050\n00:51:34,220 --> 00:51:35,920\nget access to this other customer's data.\n\n1051\n00:51:37,690 --> 00:51:38,580\nIt's a great technology.\n\n1052\n00:51:38,580 --> 00:51:41,800\nIt is a function of the switch though, so\nyou've got to make sure when you purchase\n\n1053\n00:51:41,800 --> 00:51:45,010\nyour switch if you want to use VSANS,\nit's got to have support for it.\n\n1054\n00:51:45,010 --> 00:51:47,680\nIt's not a vendor by vendor thing,\nmost vendors do support it,\n\n1055\n00:51:47,680 --> 00:51:49,970\nbut they'll have really cheap\nswitches that don't, and\n\n1056\n00:51:49,970 --> 00:51:53,872\nyou usually have to move up a little\nbit in their tiered model to get to it.\n\n1057\n00:51:53,872 --> 00:51:57,350\nThere are switches in VLANs,\nwhich is really same concept.\n\n1058\n00:51:57,350 --> 00:52:00,230\nIt's identical to VLANs, yeah,\njust implemented it in the SAN world.\n\n1059\n00:52:01,300 --> 00:52:02,700\nSo those are a couple of different things.\n\n1060\n00:52:02,700 --> 00:52:06,600\nThere's also ones that filter based on a\nworldwide name instead of filtering based\n\n1061\n00:52:06,600 --> 00:52:08,030\non the host bus adapter ID.\n\n1062\n00:52:08,030 --> 00:52:10,590\nYou can spoof a host adapter ID but\n\n1063\n00:52:10,590 --> 00:52:13,065\none of the things you can't\nspoof is what port you plug in.\n\n1064\n00:52:13,065 --> 00:52:16,685\nAnd so some switches will assign\na worldwide name to a node that basically\n\n1065\n00:52:16,685 --> 00:52:19,615\ntracks what port it's on, and\nyou can filter based on the port.\n\n1066\n00:52:19,615 --> 00:52:21,015\nAnd now if an attacker wanted to spoof,\n\n1067\n00:52:21,015 --> 00:52:23,795\nthey'd have to go unplug and\nplug in to another port.\n\n1068\n00:52:23,795 --> 00:52:26,285\nAnd if an attacker is there this\nis the least of your problems.\n\n1069\n00:52:26,285 --> 00:52:29,216\nIf they get physical access your\ndone anyway [LAUGH] [LAUGH] So\n\n1070\n00:52:29,216 --> 00:52:30,690\nthere are other options.\n\n1071\n00:52:30,690 --> 00:52:33,180\nJust be aware that when you're when\nyou're selecting your SAN solution,\n\n1072\n00:52:33,180 --> 00:52:34,920\nall of these are options.\n\n1073\n00:52:34,920 --> 00:52:36,480\nYou've got to pick the one that works for\nyou.\n\n1074\n00:52:36,480 --> 00:52:38,540\nRight.\nIf you've got good physical security and\n\n1075\n00:52:38,540 --> 00:52:43,680\nthese are private internal servers, then\nthings like LUN masking and SAN zoning.\n\n1076\n00:52:43,680 --> 00:52:44,320\nThose work great.\n\n1077\n00:52:44,320 --> 00:52:45,390\nThey're done right on the SAN.\n\n1078\n00:52:45,390 --> 00:52:47,320\nEvery SAN I've ever\ntouched supported those.\n\n1079\n00:52:47,320 --> 00:52:48,890\nAnd so, no big deal deal there.\n\n1080\n00:52:48,890 --> 00:52:49,770\nRight?\n\n1081\n00:52:49,770 --> 00:52:53,384\nBut, if you want stronger security and\nmore flexible features,\n\n1082\n00:52:53,384 --> 00:52:55,359\nthings like VCN's really come in.\n\n1083\n00:52:55,359 --> 00:52:59,005\nAll right, so there is one\nother thing we need to mention.\n\n1084\n00:52:59,005 --> 00:53:00,921\nOh shoot, wow, we have talked\nway too long in this segment.\n\n1085\n00:53:00,921 --> 00:53:01,641\nI know.\n\n1086\n00:53:01,641 --> 00:53:05,016\nSo, all right, well,\nwe're out of time on this segment,\n\n1087\n00:53:05,016 --> 00:53:07,550\nI was about to jump into something neat.\n\n1088\n00:53:07,550 --> 00:53:09,920\nSo, let's stop here and\ntake a break, when we get back.\n\n1089\n00:53:09,920 --> 00:53:11,870\nThink about the suspense that\nI'm building right here.\n\n1090\n00:53:11,870 --> 00:53:12,770\nRight, exactly.\n\n1091\n00:53:12,770 --> 00:53:13,830\nWhat could be better?\n\n1092\n00:53:13,830 --> 00:53:17,000\nI know, something so exciting that\nwe've got to wait until after this.\n\n1093\n00:53:17,000 --> 00:53:17,550\nSo, stay tuned.\n\n1094\n00:53:17,550 --> 00:53:18,824\nWe'll be back in just a moment.\n\n1095\n00:53:18,824 --> 00:53:26,593\n[MUSIC]\n\n1096\n00:53:26,593 --> 00:53:27,650\nAll right, welcome back everybody.\n\n1097\n00:53:27,650 --> 00:53:31,535\nSo, boy, cliffhanger of an ending\nthere for that last segment.\n\n1098\n00:53:31,535 --> 00:53:34,875\nI mentioned there was something really\ncool that we wanted to talk about here.\n\n1099\n00:53:34,875 --> 00:53:39,132\nAnd what it is, is something called\na CSV or a cluster shared volume.\n\n1100\n00:53:39,132 --> 00:53:40,297\nWoo!\n\n1101\n00:53:40,297 --> 00:53:43,077\nRemember all that stuff I said in the last\nsegment about how two servers should\n\n1102\n00:53:43,077 --> 00:53:46,277\nnever access the same job at the same\ntime or all hell breaks loose?\n\n1103\n00:53:46,277 --> 00:53:48,477\nData corruption,\ncrossing streams, I mean, yeah.\n\n1104\n00:53:48,477 --> 00:53:49,417\nBad, bad, bad.\n\n1105\n00:53:49,417 --> 00:53:53,547\nThat's absolutely true when we're\ntalking about a physical drive.\n\n1106\n00:53:53,547 --> 00:53:56,697\nBut when we start talking about\nthings like a LUN, a logical drive or\n\n1107\n00:53:56,697 --> 00:54:02,050\na virtual drive that's on our SAN, well,\nthere is actually a way to do that.\n\n1108\n00:54:02,050 --> 00:54:05,750\nThe way we do it is with a CSV,\na cluster shared volumes.\n\n1109\n00:54:05,750 --> 00:54:09,690\nCSVs were originally developed for\nuse just be Hyper-V.\n\n1110\n00:54:09,690 --> 00:54:13,880\nThe problem with Hyper-V is, if you\nwanted a virtual machine to be redundant,\n\n1111\n00:54:13,880 --> 00:54:17,810\nmore than one server had to be able to\nsee the VHD, the virtual hard drive.\n\n1112\n00:54:17,810 --> 00:54:22,364\nAnd if we were going to do fail over from\none node to another, we need it to happen\n\n1113\n00:54:22,364 --> 00:54:27,428\ninstantly without the VM being aware of\nit, to switch from one node to the other.\n\n1114\n00:54:27,428 --> 00:54:29,840\nSo, you couldn't do that\nif one node was in standby,\n\n1115\n00:54:29,840 --> 00:54:32,350\nbecause it would have to bring\nthe drive up and connect.\n\n1116\n00:54:32,350 --> 00:54:34,955\nSo, the way we achieved that originally,\n\n1117\n00:54:34,955 --> 00:54:40,595\nwas that every single VHD had\nto be stored in its own LUN.\n\n1118\n00:54:40,595 --> 00:54:43,445\nSo if you had ten VM's,\nyou had to have ten LUNs.\n\n1119\n00:54:43,445 --> 00:54:47,305\nYou have one for each VM, so\nthe LUNs could fail over individually.\n\n1120\n00:54:47,305 --> 00:54:52,260\nIf you didn't, if you put all your VHD's\non the same LUN, when one VM failed over,\n\n1121\n00:54:52,260 --> 00:54:53,480\nthey all had to fail over.\n\n1122\n00:54:53,480 --> 00:54:54,890\nShe had to fail all ten\nof them over at once.\n\n1123\n00:54:54,890 --> 00:54:57,050\nAnd that's just not practical.\n\n1124\n00:54:57,050 --> 00:54:59,780\nSo CSVs were the stopgap for that.\n\n1125\n00:54:59,780 --> 00:55:03,650\nWhat they allowed you to\ndo was to have one LUN and\n\n1126\n00:55:03,650 --> 00:55:06,778\neach VHD was controlled\nby the fail over cluster.\n\n1127\n00:55:06,778 --> 00:55:11,660\nSo node one might be able to\naccess VHDs one, two and three.\n\n1128\n00:55:11,660 --> 00:55:16,580\nAnd node two might be able to\naccess VHDs four, five, and six.\n\n1129\n00:55:17,640 --> 00:55:19,800\nBoth servers are accessing\nthe same LUN at the same time, but\n\n1130\n00:55:19,800 --> 00:55:22,910\nthey're writing to different VHDs,\nso they don't conflict.\n\n1131\n00:55:22,910 --> 00:55:25,020\nThey are competing for disk I/O, right?\n\n1132\n00:55:25,020 --> 00:55:29,010\nSo they gotta take their turns getting to\nwrite to the disk or read the disk, but\n\n1133\n00:55:29,010 --> 00:55:30,650\nit is all on the same LUN.\n\n1134\n00:55:30,650 --> 00:55:33,580\nAnd your virtual machines can fail over\nindividually without having to create\n\n1135\n00:55:33,580 --> 00:55:36,390\na ton of logical drives.\n\n1136\n00:55:36,390 --> 00:55:38,860\nThat's how CSVs were originally developed.\n\n1137\n00:55:38,860 --> 00:55:42,940\nThey've expanded that functionality in\n2012 R2 to add some other neat stuff.\n\n1138\n00:55:42,940 --> 00:55:45,910\nAnd this may turn up on the exam\nwhich is why I mention it here.\n\n1139\n00:55:45,910 --> 00:55:49,734\nIn addition to that, that CSV\nfunctionality was present in 2012.\n\n1140\n00:55:49,734 --> 00:55:53,752\nIn R2, they added what's called\na scale out file server.\n\n1141\n00:55:53,752 --> 00:55:58,013\nA scale out file server is where\nwe can setup a file server.\n\n1142\n00:55:58,013 --> 00:56:02,325\nWhich is Windows Server that has a LUN\non the SAN that it's connected to,\n\n1143\n00:56:02,325 --> 00:56:04,520\nthat it's sharing out.\n\n1144\n00:56:04,520 --> 00:56:09,630\nAnd we can then connect our Hyper-V\nservers not directly to the LUN,\n\n1145\n00:56:09,630 --> 00:56:10,990\nbut to this file server.\n\n1146\n00:56:10,990 --> 00:56:11,520\nAll right?\n\n1147\n00:56:11,520 --> 00:56:17,410\nSo your nodes, not your nodes but\nyour Hyper-V virtual machines.\n\n1148\n00:56:17,410 --> 00:56:17,930\nRight?\nAnd\n\n1149\n00:56:17,930 --> 00:56:20,230\nthe Hyper-V host that\nthey're running on the host.\n\n1150\n00:56:20,230 --> 00:56:22,630\nReaches to this file server and\n\n1151\n00:56:22,630 --> 00:56:25,540\nthe file server gives them\naccess to VHD on the back end.\n\n1152\n00:56:25,540 --> 00:56:26,860\nAll right.\n\n1153\n00:56:26,860 --> 00:56:30,385\nThis extra layer, you might be asking\nyourself, why would I want to do that?\n\n1154\n00:56:30,385 --> 00:56:31,228\nRight?\nWell,\n\n1155\n00:56:31,228 --> 00:56:36,078\nthe idea is you could have more than\none of these file servers scaling out.\n\n1156\n00:56:36,078 --> 00:56:36,599\nRight?\n\n1157\n00:56:36,599 --> 00:56:41,021\nSo if I'm running low on bandwidth or CPU\nor whatever, I can start adding more and\n\n1158\n00:56:41,021 --> 00:56:44,481\nmore of these file servers,\nall back ending the same storage.\n\n1159\n00:56:44,481 --> 00:56:48,870\nRight?\nAnd they're all providing access to VHDs.\n\n1160\n00:56:48,870 --> 00:56:53,590\nIn the future, this will expand out to\ngeneral purpose shares like file shares.\n\n1161\n00:56:53,590 --> 00:56:57,940\nAnd then, you'll have really\nsuper easy scalability for\n\n1162\n00:56:57,940 --> 00:57:00,423\nfile servers,\nalthough most people don't need that.\n\n1163\n00:57:00,423 --> 00:57:01,730\n[LAUGH] So that'll probably come.\n\n1164\n00:57:01,730 --> 00:57:05,675\nBut for right now, it is a function of a\nvirtual hard drive or really just Hyper-V.\n\n1165\n00:57:05,675 --> 00:57:06,480\nAll right?\n\n1166\n00:57:06,480 --> 00:57:08,950\nSo, cluster shared volumes.\n\n1167\n00:57:08,950 --> 00:57:11,510\nMore than one server can access\nthe same LUN, and it's designed for\n\n1168\n00:57:11,510 --> 00:57:13,670\nstoring VHDs for Hyper V.\n\n1169\n00:57:13,670 --> 00:57:15,920\nScale out file servers.\n\n1170\n00:57:15,920 --> 00:57:17,500\nThat's just where we put an intermediary.\n\n1171\n00:57:17,500 --> 00:57:20,260\nA file server in the middle,\nand we can add more and\n\n1172\n00:57:20,260 --> 00:57:21,840\nmore file servers as we scale out.\n\n1173\n00:57:21,840 --> 00:57:24,060\nAs we increase the amount\nof hyper v hosts.\n\n1174\n00:57:24,060 --> 00:57:26,220\nWe can increase the amount\nof file servers and\n\n1175\n00:57:26,220 --> 00:57:29,160\nthey're all simultaneously\nwriting to the back end.\n\n1176\n00:57:29,160 --> 00:57:31,020\nYou still have all your disc IO and\n\n1177\n00:57:31,020 --> 00:57:33,920\nother issues that get involved in there so\nyou've got to be aware of that.\n\n1178\n00:57:33,920 --> 00:57:36,000\nBut that's what a scale\nout file server is.\n\n1179\n00:57:36,000 --> 00:57:38,230\nSo you might see that mentioned as\nyou read through the documentation,\n\n1180\n00:57:38,230 --> 00:57:40,069\nthese new little features that\nkinda get thrown in there.\n\n1181\n00:57:41,680 --> 00:57:42,310\nAlright so\n\n1182\n00:57:43,680 --> 00:57:47,710\nthe next thing that we're going to talk\nabout is another new feature in R2.\n\n1183\n00:57:49,040 --> 00:57:51,690\nEver since the beginning\nof Microsoft clustering.\n\n1184\n00:57:51,690 --> 00:57:54,880\nSo way back even in the NT4 days,\n\n1185\n00:57:54,880 --> 00:57:59,320\nthe cluster worked on a very simple\nprinciple There's a cluster database.\n\n1186\n00:57:59,320 --> 00:58:02,940\nAnd the database has the status\nof all of the other nodes.\n\n1187\n00:58:02,940 --> 00:58:04,590\nOkay?\nAnd that database is synchronized\n\n1188\n00:58:04,590 --> 00:58:05,560\nbetween the nodes.\n\n1189\n00:58:05,560 --> 00:58:08,760\nSo if you have five nodes,\nyou've got five copies of the database.\n\n1190\n00:58:08,760 --> 00:58:12,560\nAnd when somebody's status changes,\na node goes down, or\n\n1191\n00:58:12,560 --> 00:58:16,000\na node comes up,\nan entry gets written to the database.\n\n1192\n00:58:16,000 --> 00:58:19,720\nThe database is then synchronized\nacross the nodes and\n\n1193\n00:58:19,720 --> 00:58:23,270\nonce the nodes are all in\nagreement an action is taken.\n\n1194\n00:58:23,270 --> 00:58:24,980\nRight?\nSo a new node comes up,\n\n1195\n00:58:24,980 --> 00:58:27,220\nit becomes healthy,\nit's allowed to join the cluster.\n\n1196\n00:58:27,220 --> 00:58:30,270\nThat's the, the action that's taken,\nand then we can move resources to it.\n\n1197\n00:58:30,270 --> 00:58:34,270\nIf a node is unhealthy,\neverybody agrees that it's unhealthy, and\n\n1198\n00:58:34,270 --> 00:58:38,010\nsomebody else takes over the roles\nthat node handled, right?\n\n1199\n00:58:38,010 --> 00:58:40,430\nBut it's that database that's powering it.\n\n1200\n00:58:40,430 --> 00:58:44,100\nOur configuration is stored\nin the Active Directory.\n\n1201\n00:58:44,100 --> 00:58:48,570\nBut the status database is\nstored on the individual hosts,\n\n1202\n00:58:48,570 --> 00:58:50,120\non the individual cluster nodes.\n\n1203\n00:58:51,130 --> 00:58:55,782\nNow that is a part of what's\ncalled the Global Update Manager,\n\n1204\n00:58:55,782 --> 00:58:58,830\nG-U-M, gum, kind of a lame acronym.\n\n1205\n00:58:58,830 --> 00:59:01,630\nBut that's a part of\nthe global update manager.\n\n1206\n00:59:01,630 --> 00:59:04,460\nAnd it's the one responsible for\nsynchronizing the database and\n\n1207\n00:59:04,460 --> 00:59:05,840\ndetermining how we make these decisions.\n\n1208\n00:59:05,840 --> 00:59:09,090\nAnd the decisions are made\noff of a vote process.\n\n1209\n00:59:09,090 --> 00:59:10,640\nAnd we'll talk more about quorums and\n\n1210\n00:59:10,640 --> 00:59:13,900\nvotes later on, but\nthis vote process happens.\n\n1211\n00:59:13,900 --> 00:59:17,400\nWhen the databases are synchronized,\nall right?\n\n1212\n00:59:17,400 --> 00:59:18,990\nBut what if the databases\naren't synchronized?\n\n1213\n00:59:18,990 --> 00:59:21,690\nIf you're having a failure they\nvery well might not be, right?\n\n1214\n00:59:21,690 --> 00:59:25,270\nSo sometimes decisions have to\nbe made that aren't unanimous.\n\n1215\n00:59:25,270 --> 00:59:27,680\nWhere we don't have every node voting in.\n\n1216\n00:59:27,680 --> 00:59:32,160\nAnd the global update manager is how we\ndetermine what happens with that, okay.\n\n1217\n00:59:32,160 --> 00:59:35,120\nSo, in the past Microsoft had\nthe Global Update Manager\n\n1218\n00:59:35,120 --> 00:59:37,890\nfixed to run a specific way.\n\n1219\n00:59:37,890 --> 00:59:38,560\nThey still do, right.\n\n1220\n00:59:38,560 --> 00:59:41,000\nIt's still running that same way, but\n\n1221\n00:59:41,000 --> 00:59:44,050\nyou can actually modify\nthe behavior of it, right.\n\n1222\n00:59:44,050 --> 00:59:46,620\nThere's three different modes,\nlet me bring up my show notes so\n\n1223\n00:59:46,620 --> 00:59:51,040\nI can show those three different\nmodes that I've got right here, okay.\n\n1224\n00:59:51,040 --> 00:59:54,700\nThese are the three different modes right,\nMajority Read/Write.\n\n1225\n00:59:54,700 --> 00:59:59,370\nAll Write and Local Read,\nMajority Write and Local Read, okay?\n\n1226\n00:59:59,370 --> 01:00:03,330\nThis one right here is the first one, it's\nthe default, Majority Read/Write, okay?\n\n1227\n01:00:03,330 --> 01:00:08,420\nWhat that means is that there is\na database that's synchronized across our\n\n1228\n01:00:08,420 --> 01:00:14,320\nnodes, and when a status update changes,\nwhen something changes\n\n1229\n01:00:14,320 --> 01:00:21,380\nWe will not make a decision until a\nmajority, more than fifty percent, right?\n\n1230\n01:00:21,380 --> 01:00:25,520\nSo 51% or higher of our nodes\nhave the same identical database.\n\n1231\n01:00:25,520 --> 01:00:28,460\nSo we don't have to wait for\neverybody to synchronize the database.\n\n1232\n01:00:28,460 --> 01:00:31,920\nIf a little more than half of our people\nand have synchronized the database and\n\n1233\n01:00:31,920 --> 01:00:34,540\nare all current, we can make a decision.\n\n1234\n01:00:34,540 --> 01:00:35,150\nAll right?\n\n1235\n01:00:35,150 --> 01:00:38,470\nSo the database works in\nthis majority principle.\n\n1236\n01:00:38,470 --> 01:00:39,720\nAnd we normally want that.\n\n1237\n01:00:39,720 --> 01:00:41,260\nWe don't want to wait.\n\n1238\n01:00:41,260 --> 01:00:44,760\nFor everybody to synchronize, but we don't\nwant to make a decision too early, too.\n\n1239\n01:00:44,760 --> 01:00:46,390\nIt could be the wrong decision.\n\n1240\n01:00:46,390 --> 01:00:47,320\nSo we wait for a majority.\n\n1241\n01:00:48,350 --> 01:00:50,910\nFor most people,\nthat's exactly what we want.\n\n1242\n01:00:50,910 --> 01:00:55,470\nWe read from this common database\nshared across the nodes, and\n\n1243\n01:00:55,470 --> 01:00:58,430\nwe write that common database\nshared across the nodes.\n\n1244\n01:00:58,430 --> 01:01:00,420\nAnd, it's just the majority\nthat's needed for the decisions.\n\n1245\n01:01:00,420 --> 01:01:01,100\nThat's the default.\n\n1246\n01:01:02,140 --> 01:01:06,550\nThat's good for almost everyone,\nso we don't normally mess with it.\n\n1247\n01:01:06,550 --> 01:01:08,570\nBut, there are two other modes.\n\n1248\n01:01:08,570 --> 01:01:11,540\nWe've got all right and local read.\n\n1249\n01:01:11,540 --> 01:01:13,750\nWhat the heck is this?\n\n1250\n01:01:13,750 --> 01:01:17,780\nWhat this says is we\nwill not make a decision.\n\n1251\n01:01:17,780 --> 01:01:20,910\nUntil everyone is synchronized.\n\n1252\n01:01:20,910 --> 01:01:23,090\nWe need a unanimous decision.\n\n1253\n01:01:23,090 --> 01:01:27,290\nEverybody, 100%,\neverybody needs to have the same database.\n\n1254\n01:01:27,290 --> 01:01:30,440\nSo if a status change happens,\nyou bring up a new node.\n\n1255\n01:01:30,440 --> 01:01:32,680\nSo this new node is trying\nto join our cluster.\n\n1256\n01:01:32,680 --> 01:01:35,500\nWell, somebody detects it and\nwrites it to their database.\n\n1257\n01:01:35,500 --> 01:01:38,220\nThe other guys detect it and\nwrite it to theirs, too.\n\n1258\n01:01:38,220 --> 01:01:43,680\nAnd when everybody's got the same data,\nthen we make a decision.\n\n1259\n01:01:43,680 --> 01:01:48,120\nSince the database is the same\nacross all the servers,\n\n1260\n01:01:48,120 --> 01:01:50,770\nthey do their writes and reads locally.\n\n1261\n01:01:50,770 --> 01:01:51,910\nLocally.\nSee how I've got this word\n\n1262\n01:01:51,910 --> 01:01:52,920\nlocal right here?\n\n1263\n01:01:52,920 --> 01:01:53,710\nThat means they just read and\n\n1264\n01:01:53,710 --> 01:01:56,518\nwrite from the database that\nthey've got right on their system.\n\n1265\n01:01:56,518 --> 01:02:00,410\nThe majority read write one,\nit's a little different.\n\n1266\n01:02:00,410 --> 01:02:02,020\nIt's not looking at the local database.\n\n1267\n01:02:02,020 --> 01:02:04,260\nIt looks across all the nodes.\n\n1268\n01:02:04,260 --> 01:02:06,680\nAnd it says, who's got the newest one?\n\n1269\n01:02:06,680 --> 01:02:08,310\nWho was the last person\nto make this change?\n\n1270\n01:02:08,310 --> 01:02:09,840\nWho's got the newest data?\n\n1271\n01:02:09,840 --> 01:02:12,110\nAnd that's the one that we'll read and\nwrite from.\n\n1272\n01:02:12,110 --> 01:02:12,740\nOkay.\n\n1273\n01:02:12,740 --> 01:02:14,010\nSo, they might be reading and\n\n1274\n01:02:14,010 --> 01:02:17,010\nwriting from a copy of the database\nstored on a different node.\n\n1275\n01:02:17,010 --> 01:02:20,190\nBut in all rights, since everybody's in\nlockstep, everybody's got the same data,\n\n1276\n01:02:20,190 --> 01:02:21,390\nwe don't have to do that.\n\n1277\n01:02:21,390 --> 01:02:24,160\nThey can just read locally so you get\na little bit better performance on that\n\n1278\n01:02:24,160 --> 01:02:27,430\nread, and you make your decision, right.\n\n1279\n01:02:27,430 --> 01:02:32,020\nThis gets a faster reaction time,\nwhich some people really, really want.\n\n1280\n01:02:32,020 --> 01:02:36,540\nBut it does not react well if you have\nsomething like a networking issue that can\n\n1281\n01:02:36,540 --> 01:02:39,980\nsegregate your nodes, and\nnow you never get that majority.\n\n1282\n01:02:39,980 --> 01:02:40,530\nRight?\n\n1283\n01:02:40,530 --> 01:02:44,890\nNow you start to have problems, and\nin that case, the cluster doesn't fail.\n\n1284\n01:02:44,890 --> 01:02:46,420\nThe cluster is still running.\n\n1285\n01:02:46,420 --> 01:02:48,570\nIt just stops making decisions.\n\n1286\n01:02:48,570 --> 01:02:50,990\nSo you try and\njoin this new node to the cluster, and\n\n1287\n01:02:50,990 --> 01:02:55,270\nit won't let you because it can't get\nthe unanimous decision to let it in.\n\n1288\n01:02:55,270 --> 01:02:59,070\nOr a node goes unhealthy, and\nit can't decide to move the resources,\n\n1289\n01:02:59,070 --> 01:03:01,060\nbecause it's not got enough information.\n\n1290\n01:03:01,060 --> 01:03:03,820\nSo in that scenario, you have to go in and\nmanually move the resources, or\n\n1291\n01:03:03,820 --> 01:03:06,460\nmanually bring that node up, or whatever.\n\n1292\n01:03:06,460 --> 01:03:07,980\nYou lose that automation.\n\n1293\n01:03:07,980 --> 01:03:08,620\nAll right?\n\n1294\n01:03:08,620 --> 01:03:11,130\nBut when there is a unanimous decision,\nit is fast.\n\n1295\n01:03:11,130 --> 01:03:12,000\nRight?\n\n1296\n01:03:12,000 --> 01:03:13,830\nBut obviously not ideal for most people.\n\n1297\n01:03:14,830 --> 01:03:19,210\nThe last one tries to make kind of\na hybrid, like a mix between the two.\n\n1298\n01:03:19,210 --> 01:03:21,470\nAnd it's Majority Write and Local Read.\n\n1299\n01:03:21,470 --> 01:03:25,860\nThis one says we do a majority right,\nlike up here.\n\n1300\n01:03:25,860 --> 01:03:31,500\nWe make a change, and\nwe wait until most of our servers\n\n1301\n01:03:31,500 --> 01:03:36,800\nhave the same data, 51% of our servers,\nour nodes, have the same database.\n\n1302\n01:03:36,800 --> 01:03:38,810\nAnd then we go to make a decision.\n\n1303\n01:03:38,810 --> 01:03:41,560\nBut instead of reading\nfrom whoever is newest\n\n1304\n01:03:41,560 --> 01:03:43,250\nThe majority all have the same data base.\n\n1305\n01:03:43,250 --> 01:03:44,670\nSo we just go ahead and read local.\n\n1306\n01:03:44,670 --> 01:03:47,377\nRight?\nSo we kind of get the best of both worlds.\n\n1307\n01:03:47,377 --> 01:03:49,142\nWe get the majority action.\n\n1308\n01:03:49,142 --> 01:03:51,265\nWe don't have to wait for unanimity.\n\n1309\n01:03:51,265 --> 01:03:54,400\nAnd we get the local read for\na little bit better performance.\n\n1310\n01:03:54,400 --> 01:03:55,979\nThere's a little risk here.\n\n1311\n01:03:55,979 --> 01:03:58,417\nThere's a little risk that you're\nreading off your local copy.\n\n1312\n01:03:58,417 --> 01:04:01,742\nWhoever's got the newest data might\nactually be receiving new updates and\n\n1313\n01:04:01,742 --> 01:04:03,970\nnow you don't have that and\nthings get confused.\n\n1314\n01:04:05,210 --> 01:04:08,220\nSo there is a risk, not a big risk, but\n\n1315\n01:04:08,220 --> 01:04:10,430\nthere is a risk,\nthat a bad decision can be made.\n\n1316\n01:04:11,670 --> 01:04:15,430\nSo, while this is probably the most\noptimal of the three models,\n\n1317\n01:04:15,430 --> 01:04:18,000\nbecause of that risk,\nMicrosoft doesn't go with it.\n\n1318\n01:04:18,000 --> 01:04:21,540\nMicrosoft goes with the safest one and\nthat's what most of us want.\n\n1319\n01:04:21,540 --> 01:04:23,270\nSo this is the default right here.\n\n1320\n01:04:23,270 --> 01:04:24,920\nMajority read and write.\n\n1321\n01:04:26,400 --> 01:04:29,110\nIn the past, that's it.\n\n1322\n01:04:29,110 --> 01:04:32,010\nThat's the one you had and\nyou were stuck and you couldn't modify it.\n\n1323\n01:04:32,010 --> 01:04:33,140\nNow we can.\n\n1324\n01:04:33,140 --> 01:04:35,666\nThey don't put it in the GUI but\nit's done through the PowerShell,\n\n1325\n01:04:35,666 --> 01:04:36,877\nwe can go through and modify it.\n\n1326\n01:04:36,877 --> 01:04:39,610\nEach of these guys has\na number assigned to them.\n\n1327\n01:04:39,610 --> 01:04:42,530\nAnd I didn't put it on here,\nbut I really should.\n\n1328\n01:04:42,530 --> 01:04:43,910\nThis guy is number one.\n\n1329\n01:04:43,910 --> 01:04:47,630\nLet me just kind of add\nthat here to the end.\n\n1330\n01:04:47,630 --> 01:04:50,440\nAll write and local read is actually 0.\n\n1331\n01:04:50,440 --> 01:04:53,520\nAnd this guy down here is 2, so\nI kind of put them out of order,\n\n1332\n01:04:53,520 --> 01:04:54,950\nbut I put the default first.\n\n1333\n01:04:54,950 --> 01:04:57,210\nThose are the numbers\nassociated with each and\n\n1334\n01:04:57,210 --> 01:04:59,690\nwe can drop to our PowerShell to set that.\n\n1335\n01:04:59,690 --> 01:05:03,081\nSo If I jump over to one of my\nvirtual machines, like this guy, oh,\n\n1336\n01:05:03,081 --> 01:05:05,720\nwhere I already have\nthe PowerShell fired up.\n\n1337\n01:05:05,720 --> 01:05:07,630\nHandy.\nSo here is a guy, and\n\n1338\n01:05:07,630 --> 01:05:09,650\nI'm gonna just make that font\na little bit bigger for us, so\n\n1339\n01:05:09,650 --> 01:05:12,820\nwe can actually read what's going on here.\n\n1340\n01:05:12,820 --> 01:05:16,230\nAnd, yeah, you know, stuff.\n\n1341\n01:05:16,230 --> 01:05:16,850\nThis is always fun.\n\n1342\n01:05:16,850 --> 01:05:17,890\nJust changing my junk.\n\n1343\n01:05:17,890 --> 01:05:20,820\nAll right, so there we go, so,\nwow, that's not bigger at all.\n\n1344\n01:05:20,820 --> 01:05:22,410\nThat didnt't change at all.\n\n1345\n01:05:22,410 --> 01:05:26,550\nSo basically we dropped to our PowerShell\nand in the PowerShell, we can go in and\n\n1346\n01:05:26,550 --> 01:05:30,000\nstart to manipulate what that's gonna be,\n\n1347\n01:05:30,000 --> 01:05:33,260\nand apparently no matter what I change\nthe font to, it's not getting much bigger.\n\n1348\n01:05:33,260 --> 01:05:36,720\nBut if we wanna see what\nwe're set to right now,\n\n1349\n01:05:36,720 --> 01:05:39,425\nwe can use the Get- Cluster command.\n\n1350\n01:05:39,425 --> 01:05:43,470\nGet-Cluster will return all sorts of\ninformation about your clustering, but\n\n1351\n01:05:43,470 --> 01:05:46,800\nnotice the massive amount\nof data that it gives you.\n\n1352\n01:05:46,800 --> 01:05:48,920\nMost of the data is not\ndisplayed automatically so\n\n1353\n01:05:48,920 --> 01:05:53,720\nI actually have to basically\nreference an object inside of it.\n\n1354\n01:05:53,720 --> 01:05:58,300\nSo I'm gonna do, (Get-Cluster)\nin parentheses and add a dot,\n\n1355\n01:05:58,300 --> 01:06:01,060\nwhich is telling me that I'm\ncalling a function inside of it.\n\n1356\n01:06:01,060 --> 01:06:07,410\nAnd I'm gonna call\nthe DatabaseRead Write mode.\n\n1357\n01:06:07,410 --> 01:06:09,020\nThat's the global update manager.\n\n1358\n01:06:09,020 --> 01:06:10,550\nThat's what I'm interacting\nwith right there.\n\n1359\n01:06:10,550 --> 01:06:13,258\nSo DatabaseRead Write mode and\nit's returning a 1.\n\n1360\n01:06:13,258 --> 01:06:16,990\nOkay, so I'm getting a value of 1.\n\n1361\n01:06:16,990 --> 01:06:22,540\nThat means that I'm in\nthe majority rights- By default.\n\n1362\n01:06:22,540 --> 01:06:24,400\nAnd read default.\n\n1363\n01:06:24,400 --> 01:06:26,890\nAnd if I want to change that, I can\njust use Set-Cluster and I can go and\n\n1364\n01:06:26,890 --> 01:06:27,590\nmodify that value.\n\n1365\n01:06:27,590 --> 01:06:31,230\nAnd if I change it to a 0, or if I change\nit to a 2, that moves to the other modes.\n\n1366\n01:06:32,390 --> 01:06:35,750\nSo, no GUI, you've gotta use PowerShell,\nbut it's not that big of a deal.\n\n1367\n01:06:35,750 --> 01:06:38,654\nBut, it's not one that you'll get,\nlike if you do a Get-Help,\n\n1368\n01:06:38,654 --> 01:06:43,010\nGet-Cluster, it doesn't show up because\nit's not actually a part of Get-Cluster,\n\n1369\n01:06:43,010 --> 01:06:45,470\nit's a function inside of it.\n\n1370\n01:06:45,470 --> 01:06:48,360\nSo you're not included in here.\n\n1371\n01:06:48,360 --> 01:06:52,730\nOh shoot, I just told it to update,\n[INAUDIBLE] all right, well, forget it.\n\n1372\n01:06:52,730 --> 01:06:54,740\nSo that's basically\nthe way that we modify it.\n\n1373\n01:06:54,740 --> 01:06:57,770\nThat's the global update manager.\n\n1374\n01:06:57,770 --> 01:07:00,270\nIt's a little confusing cuz the command\nnever says global update manager.\n\n1375\n01:07:00,270 --> 01:07:01,930\nYou don't see it in the GUI.\n\n1376\n01:07:01,930 --> 01:07:04,590\nSo on the exam they can surprise\nyou with that one, right?\n\n1377\n01:07:04,590 --> 01:07:07,227\nAsking you about an optimal mode for\nthe global update manager and you're like,\n\n1378\n01:07:07,227 --> 01:07:08,390\nwell, what the heck is that?\n\n1379\n01:07:08,390 --> 01:07:11,670\nNot realizing that it's this\ndatabase where read/write mode.\n\n1380\n01:07:11,670 --> 01:07:13,970\nSo I definitely wanted to\ndraw some attention to that.\n\n1381\n01:07:15,652 --> 01:07:18,580\nAll right, that's just a decision\nthat we need to make early on.\n\n1382\n01:07:18,580 --> 01:07:21,510\nWe make that setting change, and\nit's in place, and off we go.\n\n1383\n01:07:21,510 --> 01:07:24,710\nIt is a cluster level change, so\nall the nodes will be set the same, right?\n\n1384\n01:07:24,710 --> 01:07:27,354\nYou can't have different\nnodes set different ways,\n\n1385\n01:07:27,354 --> 01:07:29,185\nthat would wreak all sorts of havoc.\n\n1386\n01:07:29,185 --> 01:07:33,128\nAll right, the next thing on my little\nlaundry list of stuff to cover here,\n\n1387\n01:07:33,128 --> 01:07:34,580\nis redundant networking.\n\n1388\n01:07:36,100 --> 01:07:39,210\nI kind of already mentioned this, that\nyou'll want more than one network adapter\n\n1389\n01:07:39,210 --> 01:07:42,910\nin your sever,\nespecially if you have stuff like iSCSI.\n\n1390\n01:07:42,910 --> 01:07:45,340\nYou definitely want redundancy there for\nyour storage.\n\n1391\n01:07:45,340 --> 01:07:48,360\nBut even on your network side, you'll more\nthan likely want redundant networking.\n\n1392\n01:07:49,490 --> 01:07:52,096\nYou may want multiple networks because\nyou're doing Hyper-V and you have\n\n1393\n01:07:52,096 --> 01:07:54,962\nmultiple v switches, and you have each\none tied to a different physical adapter.\n\n1394\n01:07:54,962 --> 01:07:59,136\nOr you might just wanna have physical\nadapters that are redundant just for\n\n1395\n01:07:59,136 --> 01:08:02,918\nyour regular LAN communications\non that node, it's a good idea.\n\n1396\n01:08:02,918 --> 01:08:03,459\nWhen you do it,\n\n1397\n01:08:03,459 --> 01:08:06,008\nyou can create redundancy through\nthings like network load balancing.\n\n1398\n01:08:06,008 --> 01:08:10,793\nBut you can also do NIC teaming, right,\nwhere you bond two network adapters and\n\n1399\n01:08:10,793 --> 01:08:12,150\ncombine them.\n\n1400\n01:08:12,150 --> 01:08:15,640\nMost networking software these days,\nIntel, Broadcom, Threecom,\n\n1401\n01:08:15,640 --> 01:08:19,180\nthose guys, they all have teaming\nsoftware that comes with it.\n\n1402\n01:08:19,180 --> 01:08:20,380\nIt's kind of independent of the cluster.\n\n1403\n01:08:21,740 --> 01:08:24,700\nBut the main thing we need to remember\nis that our clusters need to be\n\n1404\n01:08:24,700 --> 01:08:26,130\nconfigured identically.\n\n1405\n01:08:26,130 --> 01:08:29,530\nSo if you've got teamed\nNICs on one server,\n\n1406\n01:08:29,530 --> 01:08:33,150\nyou really need teamed NICs on all of\nyour servers that are in that cluster.\n\n1407\n01:08:33,150 --> 01:08:36,530\nSo definitely keep that aware as you\nstart to plan your redundant storage.\n\n1408\n01:08:36,530 --> 01:08:39,410\nYou gotta have that identical\nconfiguration between the cluster nodes.\n\n1409\n01:08:40,640 --> 01:08:42,980\nThe adapters don't have\nto be the same vendor.\n\n1410\n01:08:42,980 --> 01:08:44,300\nThey can be different vendors.\n\n1411\n01:08:44,300 --> 01:08:47,740\nAlthough you can get into a bit of mess\nif one has a TCP off-load engine and\n\n1412\n01:08:47,740 --> 01:08:48,370\none doesn't.\n\n1413\n01:08:48,370 --> 01:08:50,550\nYou do wanna balance features like that.\n\n1414\n01:08:50,550 --> 01:08:53,480\nIf they're different, you have to\ndumb them down to the same level, so\n\n1415\n01:08:53,480 --> 01:08:55,410\nyou'll lose some functionality.\n\n1416\n01:08:55,410 --> 01:08:58,320\nBut you do assign a name to the adapters\nand you can set the names to be the same\n\n1417\n01:08:58,320 --> 01:09:01,760\neven though they're different vendors and\nnow failover is pretty seamless.\n\n1418\n01:09:03,000 --> 01:09:06,850\nAll right, so redundant storage,\nnot too much to worry about there.\n\n1419\n01:09:06,850 --> 01:09:09,740\nAnd I mentioned things,\nI'm sorry, redundant networking,\n\n1420\n01:09:09,740 --> 01:09:11,330\nnot too much to worry about there.\n\n1421\n01:09:11,330 --> 01:09:14,320\nYeah, that's really about it on that one.\n\n1422\n01:09:14,320 --> 01:09:18,807\nFew other things to think about\nas we design our cluster.\n\n1423\n01:09:18,807 --> 01:09:21,918\nBy default when you setup\na cluster resource,\n\n1424\n01:09:21,918 --> 01:09:27,196\nif the node it's running on fails,\nit'll fail over to another node, right?\n\n1425\n01:09:27,196 --> 01:09:30,890\nWhat happens when that\noriginal node comes back up?\n\n1426\n01:09:30,890 --> 01:09:33,860\nWell, it doesn't fail back by default.\n\n1427\n01:09:34,960 --> 01:09:37,450\nAnd you might be wondering,\nwhy does Microsoft do that?\n\n1428\n01:09:37,450 --> 01:09:39,280\nWhy not fail it back when\nthe original node comes healthy?\n\n1429\n01:09:39,280 --> 01:09:42,670\nAnd there's two reasons for that, and\nwe just need to be aware of whether or\n\n1430\n01:09:42,670 --> 01:09:45,290\nnot we care about these two reasons.\n\n1431\n01:09:45,290 --> 01:09:47,580\nReason number one is just\nbecause the node's up,\n\n1432\n01:09:47,580 --> 01:09:49,440\ndoesn't mean it's truly healthy.\n\n1433\n01:09:49,440 --> 01:09:52,130\nSometimes you have a situation\nwhere the node is unstable.\n\n1434\n01:09:52,130 --> 01:09:55,110\nAnd so it comes up, stays up for\na second, and then reboots.\n\n1435\n01:09:55,110 --> 01:09:57,430\nAnd then comes up, stays up for\na second, and then reboots.\n\n1436\n01:09:57,430 --> 01:10:01,370\nSo they don't do automatic fail back,\nbecause you've been alerted to the error,\n\n1437\n01:10:01,370 --> 01:10:03,790\nit's already mitigated\nit by moving the system,\n\n1438\n01:10:03,790 --> 01:10:08,030\nthe resources off to other nodes, and\nnow you can validate the health, and\n\n1439\n01:10:08,030 --> 01:10:11,440\nmake sure it's healthy, and\nmove resources back to it.\n\n1440\n01:10:11,440 --> 01:10:13,110\nThat's reason number one.\n\n1441\n01:10:13,110 --> 01:10:17,050\nReason number two is\nmany cluster resources,\n\n1442\n01:10:17,050 --> 01:10:20,110\nwhen they move from one node to another,\nrequire a reboot.\n\n1443\n01:10:20,110 --> 01:10:22,140\nThey basically reboot that resource,\n\n1444\n01:10:22,140 --> 01:10:25,360\nor if it's a virtual machine, they may\nneed to reboot as it moves between them.\n\n1445\n01:10:25,360 --> 01:10:29,590\nAnd if that's the case, you had\nan outage when you had the failure.\n\n1446\n01:10:29,590 --> 01:10:30,830\nThat goes without saying.\n\n1447\n01:10:30,830 --> 01:10:33,440\nWhen you have a failure,\nyou lose what's in RAM, so\n\n1448\n01:10:33,440 --> 01:10:36,646\nyou can't synchronize, your system's\ngonna reboot when it fails over.\n\n1449\n01:10:36,646 --> 01:10:39,920\nWhen you fail back,\nit might have to reboot again, and\n\n1450\n01:10:39,920 --> 01:10:42,550\nMicrosoft doesn't wanna create\na second outage for you.\n\n1451\n01:10:42,550 --> 01:10:46,390\nSo that's why the Automatic Failback\nis disabled by default, and\n\n1452\n01:10:46,390 --> 01:10:48,450\nyou can adjust that on\na per resource basis.\n\n1453\n01:10:48,450 --> 01:10:51,390\nYou can set whether you have\na preferred server, and\n\n1454\n01:10:51,390 --> 01:10:53,770\nwhether you want to have\nAutomatic Failback.\n\n1455\n01:10:53,770 --> 01:10:55,324\nFor failback to work,\nyou do have to have a preferred server.\n\n1456\n01:10:55,324 --> 01:10:57,618\nIf you don't have a preferred server,\nthere's no way to do failback,\n\n1457\n01:10:57,618 --> 01:10:59,005\ndon't necessarily know where to move it.\n\n1458\n01:10:59,005 --> 01:11:02,293\nSo you can set that in your individual\nresources if you need to, but\n\n1459\n01:11:02,293 --> 01:11:04,230\nbe aware of that as part of your design,\n\n1460\n01:11:04,230 --> 01:11:06,897\nthat Automatic Failback is\nnot turned on by default.\n\n1461\n01:11:06,897 --> 01:11:10,315\nAnd we can set how long it takes to\nfailback too, to kind of alleviate what\n\n1462\n01:11:10,315 --> 01:11:13,398\nyou were talking about,\nwhere I don't wanna failback too soon,\n\n1463\n01:11:13,398 --> 01:11:17,140\nI've gotta make sure that that node\nis healthy and is gonna remain up.\n\n1464\n01:11:17,140 --> 01:11:21,070\nSo we can put a delay in there on how long\nit waits before it actually fails back,\n\n1465\n01:11:21,070 --> 01:11:22,310\nnot as soon as it comes back up.\n\n1466\n01:11:22,310 --> 01:11:28,420\nA few other little nuts and bolts that we\nneed to take account for in our design.\n\n1467\n01:11:28,420 --> 01:11:31,190\nThe nodes, they monitor each other.\n\n1468\n01:11:31,190 --> 01:11:34,210\nThey're checking each other to make\nsure that they're up and online.\n\n1469\n01:11:34,210 --> 01:11:35,870\nAnd they do that through a heartbeat.\n\n1470\n01:11:35,870 --> 01:11:39,630\nThe default settings where they\nsend a heartbeat every one second.\n\n1471\n01:11:39,630 --> 01:11:42,590\nIt says 1,000 milliseconds in the config,\nbut it's every one second.\n\n1472\n01:11:42,590 --> 01:11:46,646\nAnd if there are five missed heartbeats,\nthen a node is considered down.\n\n1473\n01:11:46,646 --> 01:11:49,885\nSo that's the primary way\nof monitoring health.\n\n1474\n01:11:49,885 --> 01:11:54,485\nAnd that means in order to have\na cluster Each node needs to be able\n\n1475\n01:11:54,485 --> 01:11:56,711\nto see each other, all right?\n\n1476\n01:11:56,711 --> 01:12:00,706\nNow when you do a cluster,\nyou're creating a shared IP across them.\n\n1477\n01:12:00,706 --> 01:12:02,865\nAnd so,\nthey can't use that shared IP to talk.\n\n1478\n01:12:02,865 --> 01:12:06,015\nSo they use their individual, their\nunique ID to talk to each other and so\n\n1479\n01:12:06,015 --> 01:12:07,371\nwe need to have connectivity.\n\n1480\n01:12:07,371 --> 01:12:10,701\nIf you've got firewalls,\naccess control lists, anything like that,\n\n1481\n01:12:10,701 --> 01:12:14,140\nyou've got to make sure you've got\nthat connectivity between the nodes so\n\n1482\n01:12:14,140 --> 01:12:15,900\nthey can monitor each others health.\n\n1483\n01:12:17,040 --> 01:12:19,580\nYou can do a dedicated network adaptor for\nthis if you want, or\n\n1484\n01:12:19,580 --> 01:12:21,220\nyou could use your standard network.\n\n1485\n01:12:21,220 --> 01:12:23,350\nJust understand if you do\nyour standard network,\n\n1486\n01:12:23,350 --> 01:12:26,880\na really busy network could create enough\nlatency to interfere with heartbeats.\n\n1487\n01:12:26,880 --> 01:12:28,090\nIt's pretty uncommon,\nthese things are small.\n\n1488\n01:12:29,140 --> 01:12:31,990\nBut they do go very frequently,\nyou've only got a second.\n\n1489\n01:12:31,990 --> 01:12:35,510\nBut 1,000 milliseconds of\nlatency is pretty significant.\n\n1490\n01:12:35,510 --> 01:12:37,750\nYou don't even get that on the Internet.\n\n1491\n01:12:37,750 --> 01:12:41,700\nAcross the Internet, you're normally\nunder 100, so it's not likely to happen.\n\n1492\n01:12:43,300 --> 01:12:47,260\nWhen they communicate with each other,\nthough, they do it by DNS name, all right?\n\n1493\n01:12:47,260 --> 01:12:48,760\nThey do a DNS look up.\n\n1494\n01:12:48,760 --> 01:12:52,770\nBecause the IP address of\nan individual node, we can change it.\n\n1495\n01:12:52,770 --> 01:12:54,480\nNobody cares about that, right?\n\n1496\n01:12:54,480 --> 01:12:56,460\nThe clients don't connect\nto the individual node,\n\n1497\n01:12:56,460 --> 01:12:58,280\nthey connect to that shared IP.\n\n1498\n01:12:58,280 --> 01:13:01,145\nSo, you can have your cluster\nnodes at the DHCP if you want.\n\n1499\n01:13:01,145 --> 01:13:04,510\nSo when the nodes monitor each other,\nthey do DNS look-ups.\n\n1500\n01:13:04,510 --> 01:13:07,790\nAnd that means, we have to have\na reliable DNS infrastructure so,\n\n1501\n01:13:07,790 --> 01:13:09,350\nthe nodes can find each other.\n\n1502\n01:13:09,350 --> 01:13:13,170\nThey know the names,\nthat's stored in the cluster database.\n\n1503\n01:13:13,170 --> 01:13:17,910\nThey'll do a name look-up, find the IP,\nstart sending the heartbeats.\n\n1504\n01:13:17,910 --> 01:13:20,680\nAnd if it can't do a name look-up,\nit can't find the IP, it can't send\n\n1505\n01:13:20,680 --> 01:13:24,180\nthe heartbeat, considers the node down,\nand that's definitely a problem.\n\n1506\n01:13:25,180 --> 01:13:28,770\nSo, we already mentioned Active Directory\nas an external service we're kinda\n\n1507\n01:13:28,770 --> 01:13:32,630\ndependent on, unless we go AD detached.\n\n1508\n01:13:32,630 --> 01:13:35,590\nBut if that's there we need\nto have a redundant AD.\n\n1509\n01:13:35,590 --> 01:13:38,920\nAD relies on DNS anyway so\nyou kinda already need that redundant AD.\n\n1510\n01:13:40,880 --> 01:13:44,654\nThe other thing is when a resource fails\nover in some scenarios the resources IP\n\n1511\n01:13:44,654 --> 01:13:45,806\naddress might change.\n\n1512\n01:13:45,806 --> 01:13:48,870\nAnd if that happens the failover\npusher needs to reach out to DNS and\n\n1513\n01:13:48,870 --> 01:13:49,865\nupdate that record.\n\n1514\n01:13:49,865 --> 01:13:54,596\nSo when it does that its going to have\nto modify that entry its gotta be\n\n1515\n01:13:54,596 --> 01:13:56,810\nable to talk to DNS to do that.\n\n1516\n01:13:56,810 --> 01:13:59,120\nSo we definitely have to plan for DNS.\n\n1517\n01:14:01,000 --> 01:14:05,130\nAll right, so those are a couple of little\nnuts and bolts to worry about there.\n\n1518\n01:14:05,130 --> 01:14:08,120\nWhat else do I have?\n\n1519\n01:14:08,120 --> 01:14:10,800\nWe have a couple of other\nneat things to talk about.\n\n1520\n01:14:10,800 --> 01:14:13,244\nWe have quorums to talk about.\n\n1521\n01:14:13,244 --> 01:14:17,660\nI'm kinda wondering maybe we should\nbump those off to the next show.\n\n1522\n01:14:17,660 --> 01:14:19,880\nRight.\nWe've covered a lot of things here.\n\n1523\n01:14:19,880 --> 01:14:21,270\nI know I went longer on some things.\n\n1524\n01:14:21,270 --> 01:14:23,460\nI'm not sure we can get everything\ndone in the last segment.\n\n1525\n01:14:23,460 --> 01:14:25,860\nLet's see if there's anything\nelse here that we can mention\n\n1526\n01:14:25,860 --> 01:14:26,700\nin the time that we've got.\n\n1527\n01:14:26,700 --> 01:14:29,443\nWe still have quorum to go through.\n\n1528\n01:14:29,443 --> 01:14:31,793\nWe still have to go over heartbeat and\nDNS.\n\n1529\n01:14:31,793 --> 01:14:33,250\nLet's stop here, Mike.\n\n1530\n01:14:33,250 --> 01:14:34,990\nOkay.\nLet's break this into a two parter.\n\n1531\n01:14:34,990 --> 01:14:38,160\nI'm going to make it audible here,\nan on the fly call.\n\n1532\n01:14:38,160 --> 01:14:41,610\nWe've gone through a lot of stuff, and\nwe still have a lot more to talk about.\n\n1533\n01:14:41,610 --> 01:14:45,640\nWe've got quorum,\nwhich is the actual vote system in between\n\n1534\n01:14:45,640 --> 01:14:47,810\nthe nodes when they determine\nhow the failover happens.\n\n1535\n01:14:47,810 --> 01:14:49,350\nWe need to have a good\nunderstanding of that.\n\n1536\n01:14:49,350 --> 01:14:52,960\nSo I wanna take my time on that and\nit's different modes.\n\n1537\n01:14:52,960 --> 01:14:56,260\nWe've also got multi-site clusters\nwe haven't addressed yet.\n\n1538\n01:14:56,260 --> 01:15:01,520\nThere's a lot of design considerations\nthere and the- Cluster aware updating.\n\n1539\n01:15:01,520 --> 01:15:04,220\nCluster aware updating,\nreally cool new feature to tackle.\n\n1540\n01:15:04,220 --> 01:15:07,060\nSo but for\nright now in this episode, well,\n\n1541\n01:15:07,060 --> 01:15:09,840\nlet's kinda recap\nthe stuff we talked about.\n\n1542\n01:15:09,840 --> 01:15:12,720\nWe started very basic with\nhardware considerations,\n\n1543\n01:15:12,720 --> 01:15:15,720\nwhat hardware we need in a cluster.\n\n1544\n01:15:15,720 --> 01:15:18,090\nAnd then we talked about some\nof the storage considerations,\n\n1545\n01:15:18,090 --> 01:15:22,430\ndifferent models there, iSCSI, fiber\nchannels, shared SAS, all that good stuff.\n\n1546\n01:15:22,430 --> 01:15:25,150\nWe got a change to look at\nsome of the other cluster\n\n1547\n01:15:25,150 --> 01:15:29,580\nconfiguration settings like the global\nupdate manager, so a few things there and\n\n1548\n01:15:29,580 --> 01:15:31,820\nsome of the other things\nlike cluster shared volumes.\n\n1549\n01:15:31,820 --> 01:15:34,950\nNeat bells and\nwhistles in Windows Server 2012 R2.\n\n1550\n01:15:36,050 --> 01:15:37,000\nAll good stuff.\n\n1551\n01:15:37,000 --> 01:15:41,509\nAll that factors into our design is we\nplan to implement that high availability.\n\n1552\n01:15:42,790 --> 01:15:45,190\nAll right, well like I said this\nis a good spot for us to stop.\n\n1553\n01:15:45,190 --> 01:15:49,180\nSo let me just remind you guys if\nyou have questions on any of this,\n\n1554\n01:15:49,180 --> 01:15:50,390\nfeel free to ask.\n\n1555\n01:15:50,390 --> 01:15:52,560\nLive during the show you\ncan go to itpro.tv/live,\n\n1556\n01:15:52,560 --> 01:15:54,920\nyou'll see the chat box\nright beneath the video.\n\n1557\n01:15:54,920 --> 01:15:57,770\nPost your question there,\nwe monitor and answer during the show.\n\n1558\n01:15:57,770 --> 01:16:01,010\nIf you have questions after the show,\nuse our Q and A forms.\n\n1559\n01:16:01,010 --> 01:16:03,608\nAt the top of every page on itpro.tv\nyou'll see a link that says Q and A.\n\n1560\n01:16:03,608 --> 01:16:06,267\nIt'll take you to the forums,\nyou can post your questions there.\n\n1561\n01:16:06,267 --> 01:16:09,690\nWe monitor and answer during,\nnot during the show.\n\n1562\n01:16:09,690 --> 01:16:11,880\nWe might not answer after the show, right?\n\n1563\n01:16:11,880 --> 01:16:12,570\nThroughout the week.\n\n1564\n01:16:12,570 --> 01:16:13,390\nWe're not live.\n\n1565\n01:16:13,390 --> 01:16:15,960\nThat's right,\nwant to get you taken care of.\n\n1566\n01:16:15,960 --> 01:16:18,430\nSo take advantage of that,\nit is there for you.\n\n1567\n01:16:18,430 --> 01:16:21,750\nAll right, well,\nI hope you guys enjoyed the show today.\n\n1568\n01:16:21,750 --> 01:16:23,610\nSigning off for ITProTV, I'm Don Pezet.\n\n1569\n01:16:23,610 --> 01:16:24,700\nAnd I'm Mike Rodrick.\n\n1570\n01:16:24,700 --> 01:16:25,625\nAnd we will see you next time.\n\n1571\n01:16:25,625 --> 01:16:35,625\n[MUSIC]\n\n",
          "vimeoId": "110609346"
        },
        {
          "description": "",
          "length": "3634",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-pt2-102914.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-pt2-102914-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-1-failover-clustering-pt2-102914-sm.jpg",
          "title": "Failover Clustering Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:34,045 --> 00:00:37,186\nAll right good morning,\ngood afternoon and good evening and\n\n3\n00:00:37,186 --> 00:00:39,560\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:39,560 --> 00:00:42,830\nI'm your host Dom Pezet,\nacting on Mr. Mike Roddard.\n\n5\n00:00:42,830 --> 00:00:44,070\nHow's going Mike?\n>> I'm doing great, Dom,\n\n6\n00:00:44,070 --> 00:00:45,080\nhow are you doing today?\n\n7\n00:00:45,080 --> 00:00:47,110\n>> I am pumped up and excited.\n\n8\n00:00:47,110 --> 00:00:47,870\n>> Woo hoo!\n\n9\n00:00:47,870 --> 00:00:50,350\n>> Mostly because it is the same\nday as our previous episode.\n\n10\n00:00:50,350 --> 00:00:58,210\n[LAUGHTER] We were very excited about our\nfailover and high availability episode.\n\n11\n00:00:58,210 --> 00:00:59,873\nSo excited that we talk too much.\n\n12\n00:00:59,873 --> 00:01:01,735\n>> How the tongue just doesn't work.\n\n13\n00:01:01,735 --> 00:01:02,980\n>> And we ran out of time.\n\n14\n00:01:02,980 --> 00:01:05,180\nSo, we're jumping into part two.\n\n15\n00:01:05,180 --> 00:01:08,270\nSo, now we're gonna pick up where we\nleft off in the previous episode and\n\n16\n00:01:08,270 --> 00:01:12,230\ncontinue on with our high availability\nplanning for an enterprise environment.\n\n17\n00:01:12,230 --> 00:01:16,330\nAnd what we're going to start off with\nis actually a really important concept\n\n18\n00:01:16,330 --> 00:01:17,600\ninside of clustering.\n\n19\n00:01:17,600 --> 00:01:20,360\nIt's one of those decisions\nthat you don't have to make.\n\n20\n00:01:20,360 --> 00:01:22,510\nYou can let the system figure it out for\nyou.\n\n21\n00:01:22,510 --> 00:01:23,990\nBut there are times when\nyou want to influence it.\n\n22\n00:01:23,990 --> 00:01:26,840\nAnd what I'm talking about\nis a cluster quorum.\n\n23\n00:01:28,110 --> 00:01:30,788\nQuorum is one of those funny words that\nyou really don't use anywhere else.\n\n24\n00:01:30,788 --> 00:01:31,522\n>> Right.\n>> But\n\n25\n00:01:31,522 --> 00:01:35,340\nit refers to the voting system that\nhappens inside of your cluster\n\n26\n00:01:35,340 --> 00:01:39,470\nto determine whether a node\nis actually healthy or not.\n\n27\n00:01:39,470 --> 00:01:44,220\nAnd if it's not healthy,\nthen we go ahead and take action on it.\n\n28\n00:01:44,220 --> 00:01:47,400\nClusters, they're kind of a democracy,\nright?\n\n29\n00:01:47,400 --> 00:01:50,910\nThere's this vote system that happens,\nand everybody gets a vote, and\n\n30\n00:01:50,910 --> 00:01:55,030\nthe majority typically wins\nwhen a decision is made.\n\n31\n00:01:55,030 --> 00:01:56,360\nThe problem is,\n\n32\n00:01:56,360 --> 00:02:00,560\nsome cluster configurations don't\nreally lend themselves well to that.\n\n33\n00:02:00,560 --> 00:02:01,440\n>> Right.\n\n34\n00:02:01,440 --> 00:02:02,950\n>> Think about it this way.\n\n35\n00:02:02,950 --> 00:02:07,440\nLet's say that I have a two node cluster.\n\n36\n00:02:07,440 --> 00:02:12,410\nWell in a two node cluster you've got two\nservers that are voting in the quorum.\n\n37\n00:02:12,410 --> 00:02:16,120\nAnd that means that potentially,\none could vote yes,\n\n38\n00:02:16,120 --> 00:02:17,480\nthe other could vote no,\nnow you have a tie.\n\n39\n00:02:17,480 --> 00:02:21,550\n>> Yeah, you've got a deadlock,\ngotta have some way to kind of break that.\n\n40\n00:02:21,550 --> 00:02:25,660\n>> So, in a odd number environment, you\nnever have a tie, and quorums no big deal.\n\n41\n00:02:25,660 --> 00:02:29,010\nIn an odd number environment,\nit's impossible to have a tie.\n\n42\n00:02:29,010 --> 00:02:32,540\nSo, it's either unanimous or\nsome variation in the middle but\n\n43\n00:02:32,540 --> 00:02:34,070\nthere's always a clearer winner.\n\n44\n00:02:34,070 --> 00:02:38,460\nSo, odd numbered clusters are more\ncommon for that specific reason.\n\n45\n00:02:38,460 --> 00:02:42,930\nThat people will bring up a three note\ncluster or a five, seven, nine node,\n\n46\n00:02:42,930 --> 00:02:44,410\nto get that odd number.\n\n47\n00:02:45,720 --> 00:02:48,800\nBut, you don't have to do an odd number.\n\n48\n00:02:48,800 --> 00:02:51,710\nIt doesn't make sense just to\nmake the stupid vote work, right?\n\n49\n00:02:51,710 --> 00:02:54,440\nIf I need four servers to do my workload,\n\n50\n00:02:54,440 --> 00:02:58,372\nI don't want to buy a fifth\nserver just for some silly vote.\n\n51\n00:02:58,372 --> 00:03:03,120\nSo, there's a few different modes that\nQuorum can run in to make up for that.\n\n52\n00:03:03,120 --> 00:03:04,820\nTo handle that extra node.\n\n53\n00:03:04,820 --> 00:03:07,180\nSome of these are old and so\nthey shouldn't be new to you.\n\n54\n00:03:07,180 --> 00:03:09,770\n>> Right.\n>> There are some that are new though that\n\n55\n00:03:09,770 --> 00:03:13,250\nmay actually be new to you, so\nyou need to be aware of them.\n\n56\n00:03:13,250 --> 00:03:15,150\nRight?\n>> Yeah, 2012 R2 really kind of changes\n\n57\n00:03:15,150 --> 00:03:17,380\nthe whole game.\n\n58\n00:03:17,380 --> 00:03:19,390\n>> Yeah.\nSo, the first one is the most common which\n\n59\n00:03:19,390 --> 00:03:21,830\nis the standard majority quorum mode.\n\n60\n00:03:21,830 --> 00:03:22,800\nAll right.\n\n61\n00:03:22,800 --> 00:03:25,290\nThat's where you have\nan odd number of nodes.\n\n62\n00:03:25,290 --> 00:03:27,010\nAnd you don't have to worry about ties.\n\n63\n00:03:27,010 --> 00:03:29,230\nThere's always a majority and\nthat's how we run.\n\n64\n00:03:29,230 --> 00:03:31,630\nAnd that's the standard forum mode.\n\n65\n00:03:33,170 --> 00:03:35,850\nBut if you have an even\nnumber that doesn't work and\n\n66\n00:03:35,850 --> 00:03:37,280\nwe need somebody to pick up the slack.\n\n67\n00:03:38,670 --> 00:03:42,030\nAnd so here's where we get into\nour next two quorum modes.\n\n68\n00:03:42,030 --> 00:03:46,850\nThe first of the two I guess,\nmode number two,\n\n69\n00:03:46,850 --> 00:03:50,050\nis called a disk witness.\n\n70\n00:03:51,370 --> 00:03:54,380\nIn a cluster all of your servers\nare accessing shared storage.\n\n71\n00:03:54,380 --> 00:03:57,080\nAnd they are accessing\nthe same shared storage.\n\n72\n00:03:57,080 --> 00:04:00,050\nSo, we need our storage available\nto fail over between the clusters.\n\n73\n00:04:00,050 --> 00:04:05,010\nAnd so with a disc witness, what happens\nis your clustered nodes, each node,\n\n74\n00:04:05,010 --> 00:04:08,760\nwill write a little file\nto this disc witness.\n\n75\n00:04:08,760 --> 00:04:11,830\nThat little file they write has\na timestamp that basically says when they\n\n76\n00:04:11,830 --> 00:04:13,100\nchecked in.\n\n77\n00:04:13,100 --> 00:04:15,580\nIf they fail,\nthey're gonna stop writing that file,\n\n78\n00:04:15,580 --> 00:04:17,280\nthey're not gonna be healthy anymore.\n\n79\n00:04:17,280 --> 00:04:21,600\nAnd so, the nodes,\nthey vote amongst themselves, and\n\n80\n00:04:21,600 --> 00:04:26,340\nthen if it's an even number of nodes,\nthen we've got the disk\n\n81\n00:04:26,340 --> 00:04:30,620\nthat weighs in with a vote of its own,\nand now we've got an odd number.\n\n82\n00:04:30,620 --> 00:04:33,170\n>> Really in the end all you're doing\nis changing the total number of\n\n83\n00:04:33,170 --> 00:04:34,750\nvotes you have to an odd number.\n\n84\n00:04:34,750 --> 00:04:36,440\nYep.\n>> That node and disk majority.\n\n85\n00:04:36,440 --> 00:04:38,600\nBy choosing a disk,\nyou're giving it a vote.\n\n86\n00:04:38,600 --> 00:04:40,890\n>> And the votes are all treated equally,\nright?\n\n87\n00:04:40,890 --> 00:04:45,680\nSo, the disk vote carries the same\nweight as any of the individual nodes.\n\n88\n00:04:45,680 --> 00:04:48,090\nWe're really just adding another vote.\n\n89\n00:04:48,090 --> 00:04:51,230\nThere's some little problems\nwith disk majority though.\n\n90\n00:04:51,230 --> 00:04:52,260\nIt sounds like a good idea.\n\n91\n00:04:52,260 --> 00:04:55,610\nHey, I can have an even number of nodes\nand here's my disk majority, right?\n\n92\n00:04:55,610 --> 00:04:59,930\nWell, let's say that I've\ngot a four node cluster.\n\n93\n00:04:59,930 --> 00:05:03,610\nAnd so I'm using the disk majority\nto make it a five node cluster.\n\n94\n00:05:03,610 --> 00:05:06,190\nAnd then one of my nodes fails.\n\n95\n00:05:06,190 --> 00:05:08,890\nAlright, it goes offline, we detect it,\nwe move our resources over.\n\n96\n00:05:08,890 --> 00:05:11,590\nNow, we're a four node cluster, right?\n\n97\n00:05:11,590 --> 00:05:13,810\nWell, we were a four,\nnow we're a three node cluster.\n\n98\n00:05:13,810 --> 00:05:14,560\nRight?\n>> Mm-hm.\n\n99\n00:05:14,560 --> 00:05:15,640\n>> Now we're a three node cluster and\n\n100\n00:05:15,640 --> 00:05:18,760\nwe still have this disk majority\nsitting there or this disk witness.\n\n101\n00:05:18,760 --> 00:05:20,950\n>> Right.\n>> Now, I've got four votes and\n\n102\n00:05:20,950 --> 00:05:21,680\nI can have a tie again.\n\n103\n00:05:21,680 --> 00:05:22,450\n>> Yep.\n\n104\n00:05:22,450 --> 00:05:26,968\n>> And since all the votes are treated\nequally, I now end up in an even quorum.\n\n105\n00:05:26,968 --> 00:05:27,660\n>> Mm-hm.\n\n106\n00:05:27,660 --> 00:05:28,980\n>> All right.\n\n107\n00:05:28,980 --> 00:05:30,950\nThat can happen with\nthe standard model too.\n\n108\n00:05:30,950 --> 00:05:32,360\nI might have a five node cluster.\n\n109\n00:05:32,360 --> 00:05:34,840\nI'm doing standard quorum with no witness.\n\n110\n00:05:34,840 --> 00:05:37,970\nIn that model I got five,\nif a node fails, now I've got four.\n\n111\n00:05:38,980 --> 00:05:42,280\nSo, what we really need is some kind\nof system that allows us to move\n\n112\n00:05:42,280 --> 00:05:45,060\nbetween the quorum models, right?\n\n113\n00:05:45,060 --> 00:05:46,310\nAnd not have us do it manually.\n\n114\n00:05:46,310 --> 00:05:50,030\nYou can do it manually if you want,\nbut Windows Server 2012 R2 does that.\n\n115\n00:05:50,030 --> 00:05:53,090\nIt will automatically move\nbetween the quorum models.\n\n116\n00:05:53,090 --> 00:05:58,010\nSo, if you've got a disk witness set\nup and you've got a four-node cluster,\n\n117\n00:05:58,010 --> 00:06:01,960\nthe disk witness is your tiebreaker,\nbasically.\n\n118\n00:06:01,960 --> 00:06:03,380\nBut if one of the nodes fails and\n\n119\n00:06:03,380 --> 00:06:06,860\nyou go down to three nodes,\nthen it stops using the disk witness.\n\n120\n00:06:06,860 --> 00:06:09,830\nAnd now you've just got your three nodes,\nand you've got an odd numbered quorum.\n\n121\n00:06:09,830 --> 00:06:13,579\nSo, it'll move in between\nthose quorum nodes for you.\n\n122\n00:06:13,579 --> 00:06:14,950\n>> Dynamic quorum.\n\n123\n00:06:14,950 --> 00:06:16,950\nAnd it'll grab,\nwhen you first set up that cluster,\n\n124\n00:06:16,950 --> 00:06:20,710\nit'll grab that disk witness automatically\n>> It might not use it, depending on how\n\n125\n00:06:20,710 --> 00:06:24,020\nmany nodes you have in your cluster,\nand then it can determine if and\n\n126\n00:06:24,020 --> 00:06:30,580\nwhen it needs to allow that\ndisc to include its vote.\n\n127\n00:06:30,580 --> 00:06:32,830\n>> The other problem\nwith that disc witness.\n\n128\n00:06:32,830 --> 00:06:36,410\nSo, the first thing is, if we end up with\nan even number thanks to the disc witness,\n\n129\n00:06:36,410 --> 00:06:38,760\nand that's solved by the dynamic quorum.\n\n130\n00:06:38,760 --> 00:06:43,950\nThe other problem is, if stored on a disk,\nwhat if that disk fails?\n\n131\n00:06:43,950 --> 00:06:47,505\nWell, you better not let it.\n\n132\n00:06:47,505 --> 00:06:51,180\n>> [LAUGH]\n>> The disk witness needs to be redundant.\n\n133\n00:06:51,180 --> 00:06:55,560\nIt's on a SAN so it should be\nredundant unless the SAN itself fails.\n\n134\n00:06:55,560 --> 00:07:02,220\nIf the disk witness goes offline,\nthe dynamic forum can't react to that.\n\n135\n00:07:02,220 --> 00:07:03,770\nIt freaks out, all right.\n\n136\n00:07:03,770 --> 00:07:06,450\nAnd basically, what happens is\nthe instance the disk witness fails\n\n137\n00:07:07,450 --> 00:07:11,230\nyou're cluster,\nthey call it the cluster fails.\n\n138\n00:07:11,230 --> 00:07:12,380\nBut it doesn't actually fail.\n\n139\n00:07:12,380 --> 00:07:14,070\nYou're resources are still up.\n\n140\n00:07:14,070 --> 00:07:16,480\nThe cluster just stops making decisions.\n\n141\n00:07:16,480 --> 00:07:19,800\nIt says, I don't know anymore, I'm so\nconfused, I don't know what to do.\n\n142\n00:07:19,800 --> 00:07:23,260\nAnd so when a node fails, it just lets\nit fail and those resources go offline.\n\n143\n00:07:23,260 --> 00:07:24,260\nThe other resources are on.\n\n144\n00:07:24,260 --> 00:07:26,640\nYou could come in and\nmanually fail them over.\n\n145\n00:07:26,640 --> 00:07:28,800\nBut you've lost the automatic piece.\n\n146\n00:07:28,800 --> 00:07:29,400\nRight?\n\n147\n00:07:29,400 --> 00:07:33,020\nSo, when you do a disk witness,\nyou've got to have redundancy.\n\n148\n00:07:33,020 --> 00:07:37,940\nAnd there are some situations where you\njust can't have a redundant disk witness.\n\n149\n00:07:37,940 --> 00:07:40,460\nOne of those situations we'll\ntalk about later in the show,\n\n150\n00:07:40,460 --> 00:07:42,620\nwhich is a multi-site cluster.\n\n151\n00:07:42,620 --> 00:07:46,345\nBecause you can't have that witness\nbe in each of the locations.\n\n152\n00:07:46,345 --> 00:07:52,005\nSo, there's a different type of witness we\ncan use which is called a share witness.\n\n153\n00:07:52,005 --> 00:07:54,253\nWith a share witness,\ninstead of using a disk on the SAN, right?\n\n154\n00:07:54,253 --> 00:07:56,843\nUsing shared source there,\nwe use a file share.\n\n155\n00:07:56,843 --> 00:08:00,221\nSo, you probably have a file share,\nsomewhere in your network, right?\n\n156\n00:08:00,221 --> 00:08:03,941\nA file server or something, or Or you can\ncreate a file share on domain controller.\n\n157\n00:08:03,941 --> 00:08:09,930\nSo stick one out there somewhere, and\nit'll use that file share as the quorum.\n\n158\n00:08:09,930 --> 00:08:12,780\nAnd you can make that\nfile share redundant.\n\n159\n00:08:12,780 --> 00:08:16,350\nAnd that file share can be available\nacross more than one location, and so\n\n160\n00:08:16,350 --> 00:08:20,343\nyou kinda overcome those limitations\nby using the file share, right?\n\n161\n00:08:20,343 --> 00:08:25,100\nSo that's, a lot of people view\nthe disk-based witness as being the best\n\n162\n00:08:25,100 --> 00:08:28,390\noption, and it is if all your stuff is\nright there in the same environment.\n\n163\n00:08:28,390 --> 00:08:29,780\nBut in a more complex model,\n\n164\n00:08:29,780 --> 00:08:32,250\nthe share witness actually does\nwork out a little bit better.\n\n165\n00:08:34,170 --> 00:08:36,680\nSo those are really the three models.\n\n166\n00:08:36,680 --> 00:08:40,600\nThere is kind of like a fourth model,\nwhich did I even bother to write it?\n\n167\n00:08:40,600 --> 00:08:41,680\n>> I think you did, yeah.\nBut nobody ever uses that one.\n\n168\n00:08:41,680 --> 00:08:42,850\n>> Yeah, I did.\n\n169\n00:08:42,850 --> 00:08:45,330\nSo, the fourth one, yeah,\nyou really don't see.\n\n170\n00:08:45,330 --> 00:08:48,188\nIt's the no majority disk only.\n\n171\n00:08:48,188 --> 00:08:49,590\nAll right.\n\n172\n00:08:49,590 --> 00:08:53,340\nIn this one, the nodes don't get a vote.\n\n173\n00:08:53,340 --> 00:08:54,920\nThere is no vote.\n\n174\n00:08:54,920 --> 00:08:58,110\nThe disk is simply who\nmakes the decisions.\n\n175\n00:08:58,110 --> 00:09:01,560\nIf a node can see the disk,\nthen it's healthy and\n\n176\n00:09:01,560 --> 00:09:03,300\nit's allowed to join the cluster.\n\n177\n00:09:03,300 --> 00:09:05,980\nIf a node can't see the disk,\nthen it's unhealthy and\n\n178\n00:09:05,980 --> 00:09:08,020\nit's kicked out of the cluster, all right?\n\n179\n00:09:08,020 --> 00:09:08,800\nAnd that's it.\n\n180\n00:09:08,800 --> 00:09:11,300\nThat's how the decision is made.\n\n181\n00:09:11,300 --> 00:09:12,460\nThis is 100% dependent on the disk.\n\n182\n00:09:12,460 --> 00:09:15,790\nIf the disk fails,\nyour cluster will actually fail.\n\n183\n00:09:15,790 --> 00:09:20,140\nYour cluster will take all the resources\noffline, and so that's really bad.\n\n184\n00:09:20,140 --> 00:09:24,840\nAnd for most people you don't want this,\nbut it does result in faster decisions.\n\n185\n00:09:24,840 --> 00:09:27,130\nBecause as soon as you see\nthe disc you go healthy.\n\n186\n00:09:27,130 --> 00:09:29,380\nSo if you're looking to\nhave nodes that come and\n\n187\n00:09:29,380 --> 00:09:33,360\ngo, like you're deploying in\nWindows Azure or something like that, and\n\n188\n00:09:33,360 --> 00:09:38,220\nyou want your cloud cluster to be\nable to expand and shrink on demand.\n\n189\n00:09:38,220 --> 00:09:42,580\nDisk only can actually create you\nsome pretty fast response times, but\n\n190\n00:09:42,580 --> 00:09:43,970\nit's a little riskier.\n\n191\n00:09:43,970 --> 00:09:45,300\nYour nodes don't get a vote.\n\n192\n00:09:45,300 --> 00:09:46,560\nThere's no tie with this,\n\n193\n00:09:46,560 --> 00:09:48,110\nit's more of a dictatorship,\n>> Right.\n\n194\n00:09:48,110 --> 00:09:48,660\n>> Right?\n>> Yep.\n\n195\n00:09:48,660 --> 00:09:50,980\n>> The disk witness is the dictator.\n\n196\n00:09:50,980 --> 00:09:54,260\nAnd that'll knock that out, all right.\n\n197\n00:09:54,260 --> 00:09:55,900\nThis mode is very uncommon.\n\n198\n00:09:55,900 --> 00:09:57,230\nI've never used it in production.\n\n199\n00:09:57,230 --> 00:09:59,060\nI've done it in a lab just to see it.\n\n200\n00:09:59,060 --> 00:10:00,650\nBut it is there, it is a fourth mode.\n\n201\n00:10:01,770 --> 00:10:03,170\nAll right.\nSo let's recap those, right.\n\n202\n00:10:03,170 --> 00:10:09,630\nSo we had the the majority, just straight\nup quorum majority with no witness.\n\n203\n00:10:09,630 --> 00:10:12,250\nThe nodes vote and\nthat works in an odd number.\n\n204\n00:10:13,540 --> 00:10:16,790\nThen there was majority with a witness,\nwhich works in an even number.\n\n205\n00:10:16,790 --> 00:10:22,290\nThe witness is the tie breaker and\nthat works with either a disk witness or\n\n206\n00:10:22,290 --> 00:10:25,330\na share witness, a shared folder or\nan actual disk on the same.\n\n207\n00:10:25,330 --> 00:10:28,460\nAnd then the fourth model was.\n\n208\n00:10:28,460 --> 00:10:31,860\nNo majority, disk only,\njust the disk votes.\n\n209\n00:10:33,480 --> 00:10:35,300\nJust keep in mind dynamic\nforum is running.\n\n210\n00:10:35,300 --> 00:10:38,050\nIt'll flip between these\nnodes based on what it has.\n\n211\n00:10:38,050 --> 00:10:40,696\nIf you do get down to one node,\nyou don't need quorum anymore, so\n\n212\n00:10:40,696 --> 00:10:42,960\nthe quorum actually\ndisables at this point.\n\n213\n00:10:42,960 --> 00:10:46,020\nSo you can pick a default\nquorum level if you want.\n\n214\n00:10:46,020 --> 00:10:48,375\nBut it will change thanks\nto dynamic quorum.\n\n215\n00:10:48,375 --> 00:10:49,590\n>> Yeah.\n\n216\n00:10:49,590 --> 00:10:54,200\n>> All right, let me just kind of show,\ndo I actually have a cluster pulled up?\n\n217\n00:10:54,200 --> 00:10:56,580\nWell in the background,\nI'll pull up a cluster somewhere.\n\n218\n00:10:56,580 --> 00:10:59,350\nLet me find a cluster somewhere.\n\n219\n00:10:59,350 --> 00:11:01,740\nI'll pull one up and\nshow you guys that setting.\n\n220\n00:11:01,740 --> 00:11:04,900\nBut while I'm firing that up,\nlet me mention a few other things.\n\n221\n00:11:04,900 --> 00:11:08,130\nThere are some neat little features\nthat are built into 2012 R2.\n\n222\n00:11:08,130 --> 00:11:11,320\nOne of them that's really cool has\na long name, I never remember.\n\n223\n00:11:11,320 --> 00:11:14,100\nI always just call it the tie breaker but\nthe official name for\n\n224\n00:11:14,100 --> 00:11:17,930\nit is something like a tiebreaker for\n50% split.\n\n225\n00:11:17,930 --> 00:11:20,990\nI think is the official name for it.\n\n226\n00:11:20,990 --> 00:11:26,050\nIf something happens, just something\nweird and unheard of happens,\n\n227\n00:11:26,050 --> 00:11:29,570\nand you end up with an even number for\nyour quorum, right?\n\n228\n00:11:29,570 --> 00:11:31,080\nJust through whatever mix, right?\n\n229\n00:11:31,080 --> 00:11:33,250\nMaybe you've turned off dynamic quorum and\n\n230\n00:11:33,250 --> 00:11:36,110\nyou're forcing just regular\nquorum with no witness.\n\n231\n00:11:36,110 --> 00:11:39,080\nAnd you end up in\na situation with even nodes.\n\n232\n00:11:39,080 --> 00:11:42,790\nWindows server 2012 R2 and the fail\nover cluster service will kick in and\n\n233\n00:11:42,790 --> 00:11:44,260\nit will pick a node.\n\n234\n00:11:44,260 --> 00:11:45,690\nBasically at random.\n\n235\n00:11:45,690 --> 00:11:50,340\nIt will pick a node and\nit will deprioritize this vote.\n\n236\n00:11:50,340 --> 00:11:51,670\nIt'll reduce it's vote.\n\n237\n00:11:51,670 --> 00:11:54,880\nNow all votes are created equally so\nit could be doing this to the witness, or\n\n238\n00:11:54,880 --> 00:11:56,930\nit could be doing this to\none of the actual nodes.\n\n239\n00:11:56,930 --> 00:11:58,560\nIt's hard to say, right?\n\n240\n00:11:58,560 --> 00:12:00,390\nIt's really just gonna grab one of them.\n\n241\n00:12:00,390 --> 00:12:01,830\nAnd deprioritize their vote.\n\n242\n00:12:01,830 --> 00:12:06,450\nIt'll basically force an odd number,\neven though you've got an even number,\n\n243\n00:12:06,450 --> 00:12:08,180\nand that's a pretty neat feature.\n\n244\n00:12:08,180 --> 00:12:10,470\nSo, it's protecting you from yourself.\n\n245\n00:12:10,470 --> 00:12:13,405\nIf you disable dynamic quorum\nIt won't let you get stuck.\n\n246\n00:12:13,405 --> 00:12:17,580\nSo it is going to make that decision,\nand I always just remember it\n\n247\n00:12:17,580 --> 00:12:21,350\nas a tie breaker, but the official\nname for it is just long and silly.\n\n248\n00:12:21,350 --> 00:12:23,942\nTie Breaker for Fifty Percent Split.\n\n249\n00:12:23,942 --> 00:12:29,220\nAnd the reason they give it that name\nis there is a particular scenario\n\n250\n00:12:29,220 --> 00:12:32,020\nwhen we're dealing with a multi-site SAN.\n\n251\n00:12:32,020 --> 00:12:37,180\nWhere maybe the WAN length between\nthe two sites goes down, right?\n\n252\n00:12:37,180 --> 00:12:41,105\nAnd so I might have 50% of my\nservers in one location, and\n\n253\n00:12:41,105 --> 00:12:42,700\n50% in the other location.\n\n254\n00:12:42,700 --> 00:12:44,080\nMy network is divided in half.\n\n255\n00:12:44,080 --> 00:12:47,010\nThe cluster is now divided in half.\n\n256\n00:12:47,010 --> 00:12:49,000\nPortions of my cluster separated.\n\n257\n00:12:49,000 --> 00:12:52,410\nWell, when you have a separation\nlike that, the remaining nodes,\n\n258\n00:12:52,410 --> 00:12:56,670\nthey don't really know, did the other\nnodes go offline or are they still online?\n\n259\n00:12:56,670 --> 00:12:57,580\nWe don't know.\n\n260\n00:12:57,580 --> 00:13:01,740\nAnd so, both sides might try and\ncome up and that 50:50.\n\n261\n00:13:01,740 --> 00:13:04,480\nThat's what's gonna kick in to try and\nhelp influence that decision.\n\n262\n00:13:04,480 --> 00:13:07,480\nSo they can determine whether or\nnot to bring the resources happy.\n\n263\n00:13:07,480 --> 00:13:08,460\nAll right?\n\n264\n00:13:08,460 --> 00:13:11,630\nThat really doesn't happen in a local\nstand, but it could in theory,\n\n265\n00:13:11,630 --> 00:13:13,620\nif you did a weird switch fabric or\nwhatever and\n\n266\n00:13:13,620 --> 00:13:17,340\na particular switch failed,\nsomething like that could happen.\n\n267\n00:13:18,840 --> 00:13:20,510\nBut pretty, pretty uncommon.\n\n268\n00:13:20,510 --> 00:13:23,880\nAll right, here's another\nlittle fancy thing, let's see,\n\n269\n00:13:23,880 --> 00:13:25,800\nI mentioned the being redundant.\n\n270\n00:13:25,800 --> 00:13:29,350\nWe talked about dynamic quorum,\ndynamic witness, right?\n\n271\n00:13:30,540 --> 00:13:34,470\nPart of that whole 50:50 split thing and\npart of the making sure you have an odd\n\n272\n00:13:34,470 --> 00:13:36,760\nnumber, is that it will\ndetermine whether or\n\n273\n00:13:36,760 --> 00:13:39,175\nnot should you even pay attention\nto the disk witness at all.\n\n274\n00:13:39,175 --> 00:13:42,370\nRight?\nAnd I think you already said that.\n\n275\n00:13:42,370 --> 00:13:44,210\n>> Yeah.\n>> So, if it's got the disk witness and\n\n276\n00:13:44,210 --> 00:13:45,570\nit doesn't need it, it just ignores it.\n\n277\n00:13:45,570 --> 00:13:47,280\nAnd that's that.\n\n278\n00:13:47,280 --> 00:13:49,190\nSo a lot of flexible options there.\n\n279\n00:13:49,190 --> 00:13:50,170\nit's pretty neat.\n\n280\n00:13:50,170 --> 00:13:54,970\nFor me, I do find that I do disk witnesses\na lot because they're very reliable.\n\n281\n00:13:54,970 --> 00:13:55,900\nAnd that's your sand.\n\n282\n00:13:55,900 --> 00:13:56,830\nThat's where your storage is.\n\n283\n00:13:56,830 --> 00:13:58,890\nIf the sand goes down, you're\nprobably using your resources anyway.\n\n284\n00:13:58,890 --> 00:14:01,880\n>> Right.\n>> So I usually do disk witnesses and\n\n285\n00:14:01,880 --> 00:14:04,230\nI usually just create a dedicated LAN for\nthem.\n\n286\n00:14:04,230 --> 00:14:07,430\nThe files that it writes are extremely\nsmall, so it doesn't need much space.\n\n287\n00:14:07,430 --> 00:14:10,770\nI'll normally create like a one gig LAN,\nwhich is super overkill, right?\n\n288\n00:14:10,770 --> 00:14:11,650\n>> Way too much, yeah.\n\n289\n00:14:11,650 --> 00:14:15,300\n>> But I'll normally do that,\nand use that as my quorum disk.\n\n290\n00:14:15,300 --> 00:14:17,650\nBut if you use a shared folder,\nthat works too.\n\n291\n00:14:17,650 --> 00:14:21,780\nYou can put it out there just remember to\nmake sure your shared folder is redundant.\n\n292\n00:14:21,780 --> 00:14:26,240\nYou can use DFS, you can use all sorts\nof stuff to handle that redundancy and\n\n293\n00:14:26,240 --> 00:14:29,360\nin fact,\nif you're doing a multi-site SAN and\n\n294\n00:14:29,360 --> 00:14:32,766\nyou're doing a shared,\na shared write like that.\n\n295\n00:14:32,766 --> 00:14:35,070\nBecause the time stamps on\nthese heartbeats are so\n\n296\n00:14:35,070 --> 00:14:39,330\nshort, it's a good idea to replicate the\nshared witness over to the other side so\n\n297\n00:14:39,330 --> 00:14:40,780\npeople are writing locally.\n\n298\n00:14:40,780 --> 00:14:42,520\nAnd now you've got\na replication to deal with.\n\n299\n00:14:42,520 --> 00:14:45,477\nWe'll talk more about that when\nwe get to multi-site SANS.\n\n300\n00:14:45,477 --> 00:14:46,346\nAll right.\n\n301\n00:14:46,346 --> 00:14:48,680\nSo those are a couple of\nthings we need to set up.\n\n302\n00:14:48,680 --> 00:14:53,410\nWhen you run the cluster wizard it\nwill allow you to pick that quorum.\n\n303\n00:14:53,410 --> 00:14:57,690\nBut you can really easily change it just\nby going into your cluster properties and\n\n304\n00:14:57,690 --> 00:15:01,450\nas soon as my lab fires up here,\nI'll show you guys.\n\n305\n00:15:01,450 --> 00:15:02,830\nAw, shoot.\n\n306\n00:15:02,830 --> 00:15:06,540\nI just clicked the close button and\nnow I killed it.\n\n307\n00:15:06,540 --> 00:15:08,910\nAll right.\nWell, let's do this.\n\n308\n00:15:08,910 --> 00:15:10,780\nLet's stop and take a little break.\n\n309\n00:15:10,780 --> 00:15:13,700\n>> Okay.\n>> And I'll get my cluster fired up here,\n\n310\n00:15:13,700 --> 00:15:17,070\nand when we get back, I'll just\nquickly show you the quorum setting.\n\n311\n00:15:17,070 --> 00:15:19,640\nYou guys have probably already\nseen it from the other shows.\n\n312\n00:15:19,640 --> 00:15:20,888\nWe'll take a look at that.\n\n313\n00:15:20,888 --> 00:15:24,200\nAnd now we're going to move in to\nsomething neat called cluster aware\n\n314\n00:15:24,200 --> 00:15:25,920\nupdates which are pretty slick.\n\n315\n00:15:25,920 --> 00:15:27,630\nSo let's stop and take a break.\n\n316\n00:15:27,630 --> 00:15:30,400\nI know we have only been in the show for\n15 minutes or whatever.\n\n317\n00:15:30,400 --> 00:15:31,856\nWe'll stop and take a break and\n\n318\n00:15:31,856 --> 00:15:34,658\nthen when we pick back up we'll\nsee adjusting our quorums.\n\n319\n00:15:34,658 --> 00:15:35,680\nSo stay tuned.\n\n320\n00:15:35,680 --> 00:15:36,771\nWe'll be back after this.\n\n321\n00:15:36,771 --> 00:15:44,395\n[MUSIC]\n\n322\n00:15:44,395 --> 00:15:46,080\nAll right, welcome back everybody.\n\n323\n00:15:46,080 --> 00:15:48,910\nSo during the break I went ahead and\nfired up that lab again and\n\n324\n00:15:48,910 --> 00:15:50,922\nI didn't close it accidentally.\n\n325\n00:15:50,922 --> 00:15:54,429\nAnd so we just wanna take a quick look at\nhow to adjust that quorum inside of one of\n\n326\n00:15:54,429 --> 00:15:55,666\nour clusters if we need to.\n\n327\n00:15:55,666 --> 00:15:58,220\nThe default configuration might\nbe perfectly fine for us,\n\n328\n00:15:58,220 --> 00:16:01,600\nbut from time to time we wanna manipulate,\nso let me show you how that's done.\n\n329\n00:16:01,600 --> 00:16:05,333\nI've got my fail over cluster\nmanager pulled up right here.\n\n330\n00:16:05,333 --> 00:16:08,470\nAnd I'm looking at this\ncluster that I've got.\n\n331\n00:16:08,470 --> 00:16:13,200\nAnd I'll just right-click on that,\nand go to more actions and\n\n332\n00:16:13,200 --> 00:16:15,890\nconfigure cluster quorum settings,\nright there.\n\n333\n00:16:15,890 --> 00:16:18,140\nSo that's where we go to adjust,\nit's kind of buries a menu deep.\n\n334\n00:16:19,370 --> 00:16:22,250\nIt is done on the cluster itself cuz\nit's shared across all the different\n\n335\n00:16:22,250 --> 00:16:23,140\ncluster nodes.\n\n336\n00:16:23,140 --> 00:16:26,610\nIf you have more than one cluster, each\none can use a different quorum mode, but\n\n337\n00:16:26,610 --> 00:16:28,800\na single cluster obviously,\njust has one mode.\n\n338\n00:16:29,810 --> 00:16:32,450\nWhen we pull up the properties for\nthat, it's gonna start just basically,\n\n339\n00:16:32,450 --> 00:16:33,520\na little wizard.\n\n340\n00:16:33,520 --> 00:16:37,600\nAnd the most simple configurations\nare right here at the beginning,\n\n341\n00:16:37,600 --> 00:16:40,020\nuse the default configuration.\n\n342\n00:16:40,020 --> 00:16:42,780\nThe default is do majority\nwith a disk witness,\n\n343\n00:16:42,780 --> 00:16:46,000\nso it's kinda just saying that's what\nwe're gonna do and run with that.\n\n344\n00:16:46,000 --> 00:16:48,760\nNow, it can modify that if necessary.\n\n345\n00:16:48,760 --> 00:16:51,969\nIf you have an odd number of hosts it can\nleave off the witness or do whatever.\n\n346\n00:16:51,969 --> 00:16:53,950\nIt will just go with the default.\n\n347\n00:16:53,950 --> 00:16:57,180\n>> And if you have a specific disc that\nyou wanna use, because when you set up\n\n348\n00:16:57,180 --> 00:17:00,310\nthat cluster, it's gonna grab one of\nthe discs and set it up as a witness.\n\n349\n00:17:00,310 --> 00:17:03,760\nIf you wanna change that,\nlike Don was saying, make a smaller one or\n\n350\n00:17:03,760 --> 00:17:04,360\nsomething like that.\n\n351\n00:17:04,360 --> 00:17:06,620\nCuz when you set it up it adds\nall your available storage, and\n\n352\n00:17:06,620 --> 00:17:09,220\nit might pick one of your drives you\nwanted to use for something else.\n\n353\n00:17:09,220 --> 00:17:11,810\nSo you'd have to come back in here,\nafter you set up the cluster.\n\n354\n00:17:11,810 --> 00:17:15,480\nRun through this wizard and you get\nthat option select the quorum witness.\n\n355\n00:17:16,850 --> 00:17:17,940\n>> Yep.\nSo that's the second option.\n\n356\n00:17:17,940 --> 00:17:20,750\nThe last option is\nAdvanced Quorum Configuration.\n\n357\n00:17:20,750 --> 00:17:24,010\nSo all the other ones that we talked\nabout are buried here under Advanced,\n\n358\n00:17:24,010 --> 00:17:25,190\nthe good ones and the bad ones.\n\n359\n00:17:25,190 --> 00:17:27,000\n>> [LAUGH]\n>> And so we can pick from the full model.\n\n360\n00:17:27,000 --> 00:17:29,420\nNow, it doesn't just lay it out the way,\nI described it.\n\n361\n00:17:29,420 --> 00:17:31,270\nI described it as there\nbeing these four modes.\n\n362\n00:17:31,270 --> 00:17:32,900\nSo it doesn't just show the four modes.\n\n363\n00:17:32,900 --> 00:17:34,170\nYou're picking the components, and\n\n364\n00:17:34,170 --> 00:17:37,740\nthose components add up\nto one of the four modes.\n\n365\n00:17:37,740 --> 00:17:39,010\nSo let's go advanced.\n\n366\n00:17:39,010 --> 00:17:39,982\nWe're advanced people today.\n\n367\n00:17:39,982 --> 00:17:40,706\n>> We are.\n\n368\n00:17:40,706 --> 00:17:44,189\n>> The first thing we do is, we pick\nwhich nodes are involved in quorum.\n\n369\n00:17:44,189 --> 00:17:46,429\nIf you have an even number of servers,\n\n370\n00:17:46,429 --> 00:17:49,309\nyou might just choose to\nexclude one right here.\n\n371\n00:17:49,309 --> 00:17:51,833\nAnd now, that server that you\nexcluded doesn't get a vote, and\n\n372\n00:17:51,833 --> 00:17:53,705\nyou've got an odd number of servers.\n\n373\n00:17:53,705 --> 00:17:59,425\nSo we can pick and choose amongst our\nnodes and basically, make that ourselves.\n\n374\n00:17:59,425 --> 00:18:02,805\nSo kind of a neat way to influence that if\nwe don't wanna deal with the witness and\n\n375\n00:18:02,805 --> 00:18:05,065\nwe wanna ensure we have\nan odd number of votes.\n\n376\n00:18:05,065 --> 00:18:10,255\nThe default is all nodes, and you'll see\nI have two, so I run the risk of a tie.\n\n377\n00:18:10,255 --> 00:18:12,660\nThere is another option down here,\nwhich is no nodes.\n\n378\n00:18:12,660 --> 00:18:19,250\nIf we want to do the no nodes,\nthe no majority disk only mode.\n\n379\n00:18:19,250 --> 00:18:23,500\nThat's the one that's going to use\nthe disk witness and no voting whatsoever,\n\n380\n00:18:23,500 --> 00:18:26,060\nthe disk witness becomes the dictator.\n\n381\n00:18:26,060 --> 00:18:27,970\nSo that's effectively what\nthat option is right there.\n\n382\n00:18:29,040 --> 00:18:32,225\nBut I'll leave mine at my dual nodes and\nmove forward.\n\n383\n00:18:32,225 --> 00:18:34,890\nAnd now it's gonna ask\nme to pick my witness.\n\n384\n00:18:34,890 --> 00:18:36,740\nI can say no witness.\n\n385\n00:18:36,740 --> 00:18:40,348\nI've got an odd number of servers,\nI don't need a witness.\n\n386\n00:18:40,348 --> 00:18:43,631\nBut if I've got an even number like I do,\nI need to pick, and\n\n387\n00:18:43,631 --> 00:18:46,305\nI can pick between a disk or a file share.\n\n388\n00:18:46,305 --> 00:18:50,715\nAnd notice as I choose that, my menu\noptions over here are changing from\n\n389\n00:18:50,715 --> 00:18:55,255\nconfigure storage witness to\nconfigure file share witness.\n\n390\n00:18:55,255 --> 00:18:59,405\nIf I leave it at file share and hit next,\nit's gonna ask me to pick the file share.\n\n391\n00:18:59,405 --> 00:19:04,310\nAnd so\nI would put in here //fileserver/folder.\n\n392\n00:19:04,310 --> 00:19:08,220\nThat's gonna be my file share witness,\neverybody's gonna reach out to that UNC.\n\n393\n00:19:08,220 --> 00:19:12,250\nThat's the part I mentioned earlier\nthat you need to make sure is redundant.\n\n394\n00:19:12,250 --> 00:19:15,892\nUse DFS, use whatever, use a cluster\nfile server, a different cluster.\n\n395\n00:19:15,892 --> 00:19:16,631\n[LAUGH]\n>> [LAUGH]\n\n396\n00:19:16,631 --> 00:19:18,180\n>> And so you don't want the cluster to\n\n397\n00:19:18,180 --> 00:19:19,170\ndepend on itself.\n\n398\n00:19:19,170 --> 00:19:24,750\nSo use some redundant resource like that,\nfor that witness.\n\n399\n00:19:24,750 --> 00:19:27,810\nIf we go back and change it to\ndisk though on that next screen,\n\n400\n00:19:27,810 --> 00:19:29,750\nthat's where it asks us to pick the disk.\n\n401\n00:19:29,750 --> 00:19:32,790\nAnd it'll list all your available disks\nand you can pick which one you want.\n\n402\n00:19:32,790 --> 00:19:34,650\nI'll just pick number three.\n\n403\n00:19:34,650 --> 00:19:35,685\nLucky number three.\n\n404\n00:19:35,685 --> 00:19:37,310\n>> [LAUGH]\n>> It doesn't need much space.\n\n405\n00:19:37,310 --> 00:19:38,888\nI actually don't know how\nbig these things are.\n\n406\n00:19:38,888 --> 00:19:45,200\nThat one's 80 gigs which is pretty big,\nthat one's 70 gigs, that one is 90 gigs.\n\n407\n00:19:45,200 --> 00:19:49,905\nWow so really, you only need I think,\nthe minimum size is only like\n\n408\n00:19:49,905 --> 00:19:52,880\n200 megabytes and it really only\nneeds an even smaller part than that.\n\n409\n00:19:52,880 --> 00:19:55,400\nSo I usually make a 1 gig quorum disk,\n\n410\n00:19:55,400 --> 00:19:57,600\nbut I'll just choose number\n3 because it's there.\n\n411\n00:19:59,100 --> 00:20:02,260\nAnd that's all it needs, we can finish\nup and we've picked a particular mode.\n\n412\n00:20:02,260 --> 00:20:06,830\nWe are now,\ngoing to be in basically the majority mode\n\n413\n00:20:06,830 --> 00:20:09,710\nwith a disk witness because\nof the options that I chose.\n\n414\n00:20:09,710 --> 00:20:11,650\nSo it just gives me the summary, and\n\n415\n00:20:11,650 --> 00:20:15,200\nthen it's gonna implement it and\nput it in place.\n\n416\n00:20:15,200 --> 00:20:18,173\nAnd when it's done,\nI don't see much difference, but\n\n417\n00:20:18,173 --> 00:20:19,887\nI am running in the quorum mode.\n\n418\n00:20:19,887 --> 00:20:23,583\nIf I go down to my disks,\nI can see Disk 3 is right here, and\n\n419\n00:20:23,583 --> 00:20:26,410\nshows as a disk witness in quorum.\n\n420\n00:20:26,410 --> 00:20:30,398\nSo Disk 3 has been pulled away and\nis now being used for quorum.\n\n421\n00:20:30,398 --> 00:20:32,030\nNice.\n\n422\n00:20:32,030 --> 00:20:33,610\nSo that's basically it for the quorum.\n\n423\n00:20:33,610 --> 00:20:37,370\nNot too big of a deal there, easy to\nchange and we can manipulate behavior.\n\n424\n00:20:37,370 --> 00:20:40,330\nNow, just because I set it that way,\ndoesn't mean I'm gonna stay that way.\n\n425\n00:20:40,330 --> 00:20:43,590\nIf I have a failure,\nDynamic Quorum is gonna kick in and\n\n426\n00:20:43,590 --> 00:20:46,060\nadjust that to meet the needs\nof the new scenario.\n\n427\n00:20:46,060 --> 00:20:47,360\nSo it's doing that already.\n\n428\n00:20:48,820 --> 00:20:50,330\nAll right, so we're pretty good there.\n\n429\n00:20:50,330 --> 00:20:52,820\nThat's pretty much all I've got in Quorum.\n\n430\n00:20:52,820 --> 00:20:53,890\nAnything else Mike?\n\n431\n00:20:53,890 --> 00:20:55,680\n>> Not really.\nI mean, it's nice with 2012 R2,\n\n432\n00:20:55,680 --> 00:20:58,970\nthat we really don't have to\npay as much attention to it,\n\n433\n00:20:58,970 --> 00:21:00,970\nbecause it does most of it for us.\n\n434\n00:21:00,970 --> 00:21:03,802\nIt picks a disk, it might or\nmight not use it, and\n\n435\n00:21:03,802 --> 00:21:06,369\nit handles the tie\nbreakers we were saying.\n\n436\n00:21:06,369 --> 00:21:11,820\nSo I don't have to, I guess there's less,\nI guess it's much more flexible.\n\n437\n00:21:11,820 --> 00:21:15,610\nOnce you went to the old 2012,\nbefore you pick that quorum mode and\n\n438\n00:21:15,610 --> 00:21:18,660\nthat's kind of what you're\ngoing with unless you go in and\n\n439\n00:21:18,660 --> 00:21:20,442\nchange it with 2012 R2\nwith that dynamic forum.\n\n440\n00:21:20,442 --> 00:21:22,880\nIt can take away votes\nfrom individual nodes,\n\n441\n00:21:22,880 --> 00:21:26,200\nit can add a disk witness if it needs to.\n\n442\n00:21:26,200 --> 00:21:29,140\nSo it always makes sure you've got that\nmajority and you can maintain that forum.\n\n443\n00:21:29,140 --> 00:21:31,000\nSo it's really doing a lot of it for us.\n\n444\n00:21:32,550 --> 00:21:34,720\n>> All right, so the second technology\nwe want to talk about in this\n\n445\n00:21:34,720 --> 00:21:36,080\nsegment is a new one.\n\n446\n00:21:36,080 --> 00:21:40,010\nAnd it's a CAU, Cluster Aware Updates.\n\n447\n00:21:40,010 --> 00:21:43,950\nOne of the problems we have in a cluster\nenvironment is when you deploy a Windows\n\n448\n00:21:43,950 --> 00:21:49,140\nupdate, the Windows updates really\ndon't know that you're Cluster or\n\n449\n00:21:49,140 --> 00:21:50,250\nat least not normally.\n\n450\n00:21:50,250 --> 00:21:53,090\nAnd so what happens is if you've got\na cluster that's up and running and\n\n451\n00:21:53,090 --> 00:21:56,130\nyou need to apply updates to it,\nyou need to drain that node.\n\n452\n00:21:56,130 --> 00:21:59,440\nSo you need to go node by node and\nyou'll pick one node first.\n\n453\n00:21:59,440 --> 00:22:03,110\nYou move the resources off of it,\nthen you do all the various updates.\n\n454\n00:22:04,270 --> 00:22:05,980\nOnce the updates are done,\nyou're done rebooting,\n\n455\n00:22:05,980 --> 00:22:10,470\nyou bring it back online, then you\nmove your resources back over to it.\n\n456\n00:22:10,470 --> 00:22:13,860\nAnd then you do the same thing over and\nover and over again, for each node.\n\n457\n00:22:13,860 --> 00:22:16,790\nIt's time consuming, it's manual,\nand it's some what annoying.\n\n458\n00:22:16,790 --> 00:22:18,135\n>> Yeah, it is very tedious,\n\n459\n00:22:18,135 --> 00:22:21,790\ncuz half of these updates require one or\ntwo reboots to go through.\n\n460\n00:22:21,790 --> 00:22:23,780\nSo if you've got a 16 node cluster,\n\n461\n00:22:23,780 --> 00:22:26,100\nthat could take you a few hours\nto go through each one of those.\n\n462\n00:22:26,100 --> 00:22:26,715\n>> Yeah.\n\n463\n00:22:26,715 --> 00:22:28,570\nAnd you're not coming in on a Saturday.\n\n464\n00:22:28,570 --> 00:22:30,185\nSo at least there's that, right?\n\n465\n00:22:30,185 --> 00:22:31,880\n>> Right.\n>> But it is still kind of a pain.\n\n466\n00:22:31,880 --> 00:22:32,980\nSo what Microsoft did is,\n\n467\n00:22:32,980 --> 00:22:36,890\nthey built us a tool called\nthe Cluster Aware Update Utility.\n\n468\n00:22:36,890 --> 00:22:43,330\nAnd what it allows us to do is to apply\nhot fixes and patches to our cluster.\n\n469\n00:22:43,330 --> 00:22:47,040\nAnd the utility manages connecting to\nthe nodes, moving the resources off,\n\n470\n00:22:47,040 --> 00:22:48,590\napplying it, moving them back.\n\n471\n00:22:48,590 --> 00:22:51,080\nIt basically takes care of all of that for\nus.\n\n472\n00:22:51,080 --> 00:22:53,780\nIt's a really straightforward utility, but\n\n473\n00:22:53,780 --> 00:22:57,380\nit's not part of\nthe Failover Cluster Manager.\n\n474\n00:22:57,380 --> 00:23:00,094\nSo I'm remember when I first heard\nabout this utility, I was like aw,\n\n475\n00:23:00,094 --> 00:23:00,794\nit sounds-\n>> Right.\n\n476\n00:23:00,794 --> 00:23:01,310\n>> Pretty sweet.\n\n477\n00:23:01,310 --> 00:23:02,510\nLet me go try that out.\n\n478\n00:23:02,510 --> 00:23:05,144\nAnd I didn't read the documentation-\n\n479\n00:23:05,144 --> 00:23:05,711\n>> [LAUGH]\n>> Because why would I?\n\n480\n00:23:05,711 --> 00:23:07,440\n>> [LAUGH]\n>> So\n\n481\n00:23:07,440 --> 00:23:10,880\nI fire up the Failover Cluster Manager and\nI'm like, I don't see anything.\n\n482\n00:23:10,880 --> 00:23:12,530\n>> Where did they hide this option.\n\n483\n00:23:12,530 --> 00:23:14,170\n>> I just browsed around\nright-clicking and\n\n484\n00:23:14,170 --> 00:23:16,910\nstuff and there is actually\na spot in here that does show it.\n\n485\n00:23:16,910 --> 00:23:18,230\nI don't remember where it is now.\n\n486\n00:23:18,230 --> 00:23:20,610\nI didn't find it that first time,\nI had to look it up.\n\n487\n00:23:20,610 --> 00:23:23,790\nBut what happens is as\nyou browse around and\n\n488\n00:23:23,790 --> 00:23:28,200\npoke around, the Cluster Aware Updates\ndon't really show up in here.\n\n489\n00:23:28,200 --> 00:23:31,960\nAnd there is a separate utility for it.\n\n490\n00:23:31,960 --> 00:23:33,390\n>> If you right-click on that guy,\nI think.\n\n491\n00:23:33,390 --> 00:23:36,540\n>> I'm trying, there is one,\nthere it is Cluster Aware Updating.\n\n492\n00:23:36,540 --> 00:23:38,580\nRight on the Cluster's homepage.\n\n493\n00:23:39,590 --> 00:23:45,250\nSo you can launch it from there or what\nI always do is just use that Start menu.\n\n494\n00:23:45,250 --> 00:23:46,500\n>> The server manager.\n\n495\n00:23:46,500 --> 00:23:50,203\n>> Yeah, it's its own utility,\nso if you just type in Cluster,\n\n496\n00:23:50,203 --> 00:23:53,348\nit'll turn up\nCluster Aware Updating right there.\n\n497\n00:23:53,348 --> 00:23:56,023\nSo either way that you wanna get into it,\nthey both go the same place.\n\n498\n00:23:56,023 --> 00:23:59,216\n>> And it'll show up in your Tools\nmenu and that Server Manager as well.\n\n499\n00:23:59,216 --> 00:24:04,139\nSo, once we're in here,\nwe basically connect to a cluster.\n\n500\n00:24:04,139 --> 00:24:06,760\nYou pick which cluster\nyou're gonna connect to.\n\n501\n00:24:06,760 --> 00:24:07,960\nIt should find it.\n\n502\n00:24:07,960 --> 00:24:09,790\nIt's parsing the active\ndirectory to find that.\n\n503\n00:24:09,790 --> 00:24:10,980\nSo, it should find it.\n\n504\n00:24:10,980 --> 00:24:15,355\nWe can connect, and it'll connect and\nshow the nodes inside of the cluster.\n\n505\n00:24:15,355 --> 00:24:18,575\nOnce its got it, it'll just show\nwhat the last summary was and,\n\n506\n00:24:18,575 --> 00:24:19,825\nI haven't done a summary.\n\n507\n00:24:19,825 --> 00:24:21,345\nI haven't actually done these at all.\n\n508\n00:24:21,345 --> 00:24:24,885\nSo when it grabs them, there's not gonna\nbe a whole lot of information here.\n\n509\n00:24:24,885 --> 00:24:27,125\nBut on the right side,\nyou'll see the actions we can take.\n\n510\n00:24:27,125 --> 00:24:29,205\nWe can apply an update to the cluster.\n\n511\n00:24:29,205 --> 00:24:31,565\nInstead of going node by node by hand,\n\n512\n00:24:31,565 --> 00:24:34,660\nit will apply the update\nto the cluster for us.\n\n513\n00:24:34,660 --> 00:24:37,260\nWe can preview updates that cluster.\n\n514\n00:24:37,260 --> 00:24:40,302\nWe might be applying an update that's\nalready present on some of the nodes.\n\n515\n00:24:40,302 --> 00:24:43,680\nSo it'll give us a preview of where it\nhas to be applied and where it doesn't.\n\n516\n00:24:43,680 --> 00:24:46,920\n>> That preview can give you that initial\nlist of updates that are available too, so\n\n517\n00:24:46,920 --> 00:24:48,990\nthat you can go and\nsee which ones you wanna actually apply.\n\n518\n00:24:50,250 --> 00:24:53,558\n>> We can create or\nmodify our updating run profile.\n\n519\n00:24:53,558 --> 00:24:56,270\nSo that's gonna dictate things\nlike when these apply, and\n\n520\n00:24:56,270 --> 00:24:59,190\nthe order that we move in,\nall sorts of different variations.\n\n521\n00:24:59,190 --> 00:25:01,640\nWe've got reporting processes in here.\n\n522\n00:25:01,640 --> 00:25:05,250\nWe've got cluster self-updating options,\nright.\n\n523\n00:25:05,250 --> 00:25:08,310\nIf you want it to automatically\nupdate without you getting involved,\n\n524\n00:25:08,310 --> 00:25:12,270\nyou can do that, and then we can\njust look at our updating readiness.\n\n525\n00:25:12,270 --> 00:25:13,900\nSo that's usually where I start.\n\n526\n00:25:13,900 --> 00:25:17,460\nYou just do a quick analysis to make sure\nthat everything is good to go before we\n\n527\n00:25:17,460 --> 00:25:19,710\nstart kicking off these updates.\n\n528\n00:25:19,710 --> 00:25:22,820\nIt is one of the more straightforward\nutilities that's out there, so\n\n529\n00:25:22,820 --> 00:25:24,660\nyou definitely wanna make use of it,\n\n530\n00:25:24,660 --> 00:25:26,465\nespecially for\nkeeping those nodes up to date.\n\n531\n00:25:26,465 --> 00:25:30,570\n>> Absolutely, and as you were saying,\nreally what we're doing here, you can\n\n532\n00:25:30,570 --> 00:25:35,340\nactually install these cluster tools on\nyour work station or wherever you sit.\n\n533\n00:25:35,340 --> 00:25:38,130\nAnd what Microsoft calls this\nis using an orchestrator.\n\n534\n00:25:38,130 --> 00:25:43,390\nWhere you're running this from a separate\nnode and you're managing that cluster.\n\n535\n00:25:43,390 --> 00:25:45,820\nAnd doing it this way I can\nsee the different updates.\n\n536\n00:25:45,820 --> 00:25:47,830\nI can kinda watch the progress.\n\n537\n00:25:47,830 --> 00:25:49,460\nYou'll actually see it in this console.\n\n538\n00:25:49,460 --> 00:25:52,570\nYou'll see the node pop out, and\nit'll say pending or waiting for\n\n539\n00:25:52,570 --> 00:25:55,570\nthe updates to download,\nand then waiting to apply.\n\n540\n00:25:55,570 --> 00:25:58,010\nIt'll reboot,\nit'll go back into the cluster.\n\n541\n00:25:58,010 --> 00:25:59,520\nThe next one will drop out.\n\n542\n00:25:59,520 --> 00:26:03,620\nOr, as Don was saying,\nyou can get into the self-updating,\n\n543\n00:26:03,620 --> 00:26:07,050\nwhich is where you set a schedule, and\nthen the cluster just does it on its own\n\n544\n00:26:07,050 --> 00:26:10,510\nevery night at 3 o'clock in the morning or\nwhenever you schedule it to run.\n\n545\n00:26:11,890 --> 00:26:15,250\n>> So I just did my analysis and\nyou can see I have a few errors, right?\n\n546\n00:26:15,250 --> 00:26:18,330\nOne error is that the firewall rule\nhasn't been opened up on at least one of\n\n547\n00:26:18,330 --> 00:26:21,842\nthe nodes, actually it looks like both\nof them, to allow the remote shutdown.\n\n548\n00:26:21,842 --> 00:26:24,560\nWe're gonna apply the update and\nwe need to reboot the machine,\n\n549\n00:26:24,560 --> 00:26:26,660\nand it's doing it through WinRM and\nit's blocked.\n\n550\n00:26:26,660 --> 00:26:28,480\nSo I need to go to my nodes and\nopen that up so\n\n551\n00:26:28,480 --> 00:26:32,845\nthat the CAU will be able to reach out and\ndo that, to be able to reboot the nodes.\n\n552\n00:26:32,845 --> 00:26:34,375\nIt's complaining about a proxy server.\n\n553\n00:26:34,375 --> 00:26:35,355\nYou can actually ignore that one.\n\n554\n00:26:35,355 --> 00:26:37,835\nWe don't use a proxy server,\nmost people don't.\n\n555\n00:26:37,835 --> 00:26:41,235\nAnd then the last one here is warning me\nthat you really shouldn't run the CAU\n\n556\n00:26:41,235 --> 00:26:43,685\non the cluster itself,\nwhich is exactly what I'm doing.\n\n557\n00:26:43,685 --> 00:26:45,400\nI'm running it in a server on the cluster.\n\n558\n00:26:45,400 --> 00:26:47,656\nCuz what's gonna happen\nwhen we reboot that server?\n\n559\n00:26:47,656 --> 00:26:51,650\nWell, the CAU's gonna stop running, so\nit's not gonna be able to finish its job.\n\n560\n00:26:51,650 --> 00:26:54,280\nYou're supposed to do what Mike said,\nrun it on your desktop.\n\n561\n00:26:54,280 --> 00:26:55,718\nSo I'm getting some little warnings.\n\n562\n00:26:55,718 --> 00:26:58,754\nI think it'll still let me mess\naround with it a little bit, but\n\n563\n00:26:58,754 --> 00:27:01,260\nit is gonna be unhappy about that.\n\n564\n00:27:01,260 --> 00:27:04,385\nI won't be able to do self-updating\nbecause I'm running it on the same node.\n\n565\n00:27:04,385 --> 00:27:07,803\nBut if I click on that self-update, you'll\nsee here where we can go through and\n\n566\n00:27:07,803 --> 00:27:09,240\nwe can pick what we're gonna do.\n\n567\n00:27:09,240 --> 00:27:11,939\nWhen you do self-update,\nwhat it actually does is\n\n568\n00:27:11,939 --> 00:27:16,490\nit creates a clustered resource just for\nthe cluster aware updating service.\n\n569\n00:27:16,490 --> 00:27:19,720\nAnd so it's now redundant and\nit can bounce between the nodes.\n\n570\n00:27:19,720 --> 00:27:22,480\nAnd that doubles back to what\nI said just a moment ago.\n\n571\n00:27:22,480 --> 00:27:25,100\nIf the node running CAU reboots,\nwhat does it do?\n\n572\n00:27:25,100 --> 00:27:25,700\nIt dies out.\n\n573\n00:27:25,700 --> 00:27:26,440\n>> Kills it, yeah.\n\n574\n00:27:26,440 --> 00:27:31,245\n>> So it basically clusters itself so it\nso it can move between the nodes, and so\n\n575\n00:27:31,245 --> 00:27:34,865\nthat's part of the self-updating process,\nand you can also set your schedule.\n\n576\n00:27:34,865 --> 00:27:36,515\nWhen do we go out and do the updates?\n\n577\n00:27:36,515 --> 00:27:37,515\nJust like Windows updates.\n\n578\n00:27:37,515 --> 00:27:38,915\nYou tell it when you wanna update.\n\n579\n00:27:38,915 --> 00:27:41,560\nYou do the same thing for\nyour cluster, all right?\n\n580\n00:27:41,560 --> 00:27:45,200\nAnd while we're not gonna take our cluster\noffline, it's gonna go node by node,\n\n581\n00:27:45,200 --> 00:27:49,320\nit's still nice to schedule it in not-peak\ntime just in case something happens.\n\n582\n00:27:50,926 --> 00:27:52,370\nSo if I kinda wander through here,\n\n583\n00:27:52,370 --> 00:27:54,900\nyou'll see where I can add\nthat CAU clustered role.\n\n584\n00:27:54,900 --> 00:27:58,090\nAnd that's what's gonna\nenable self-updating.\n\n585\n00:27:58,090 --> 00:28:01,280\nWe can say that we've already\ngot a resource built for it.\n\n586\n00:28:01,280 --> 00:28:04,520\nSee how it says, prestaged computer\nobject for the CAU clustered role?\n\n587\n00:28:04,520 --> 00:28:07,020\nIf you've prestaged one\nin active directory.\n\n588\n00:28:07,020 --> 00:28:09,830\nI haven't, so it'll create one for me.\n\n589\n00:28:09,830 --> 00:28:10,700\nWe set the schedule.\n\n590\n00:28:10,700 --> 00:28:12,770\nWe can say to run monthly,\nor weekly, daily.\n\n591\n00:28:12,770 --> 00:28:14,860\nAnd I'll just leave it\nat the defaults here.\n\n592\n00:28:16,560 --> 00:28:19,270\nAnd then any other special\ncustom options we want,\n\n593\n00:28:19,270 --> 00:28:22,520\nretries per node,\nthe order that we want it to go in.\n\n594\n00:28:22,520 --> 00:28:25,430\nYou'll see different options\nthat you can specify in here.\n\n595\n00:28:25,430 --> 00:28:28,220\nPre- and post-update scripts if you\nwanna send yourself notifications,\n\n596\n00:28:28,220 --> 00:28:31,295\na lot of different things in\nthere that you can work with.\n\n597\n00:28:31,295 --> 00:28:34,165\n>> And it's a nice little XML file\nthat you can actually export and\n\n598\n00:28:34,165 --> 00:28:35,725\ntake to another cluster if you needed to,\nor\n\n599\n00:28:35,725 --> 00:28:37,685\nsomething like that,\nto use those same options.\n\n600\n00:28:37,685 --> 00:28:38,665\n>> Yeah why reinvent the wheel?\n\n601\n00:28:40,155 --> 00:28:43,465\nAll right, then on our last screen,\nwe just get some recommended updates.\n\n602\n00:28:45,010 --> 00:28:46,840\nNormally you just get\nyour critical updates.\n\n603\n00:28:46,840 --> 00:28:48,430\nHere we can get the recommended ones also.\n\n604\n00:28:48,430 --> 00:28:50,710\nThat means you're gonna be\npulling more updates than normal.\n\n605\n00:28:50,710 --> 00:28:53,590\nAnd it seems like the recommended ones\nare the ones that normally require\n\n606\n00:28:53,590 --> 00:28:55,460\nreboots more frequently than criticals.\n\n607\n00:28:55,460 --> 00:28:58,020\n>> I think a little more testing\nsometimes too, than the criticals and\n\n608\n00:28:58,020 --> 00:28:59,130\nthe securities.\n\n609\n00:28:59,130 --> 00:29:00,230\n>> So you may or may not want those.\n\n610\n00:29:00,230 --> 00:29:01,770\nI'll leave that out.\n\n611\n00:29:01,770 --> 00:29:03,720\nAll right, and then we'll go ahead and\nfinish that up.\n\n612\n00:29:03,720 --> 00:29:05,570\nSo it's got the information there.\n\n613\n00:29:05,570 --> 00:29:06,510\nAnd we'll apply it.\n\n614\n00:29:06,510 --> 00:29:09,340\nNow notice it never mentioned WSUS.\n\n615\n00:29:10,640 --> 00:29:15,640\nYou can use cluster aware updating with or\nwithout WSUS.\n\n616\n00:29:15,640 --> 00:29:19,655\nSo it didn't ask, it's basically gonna\nuse whatever the system is set to use.\n\n617\n00:29:19,655 --> 00:29:22,120\nSo if the node is set to use WSUS,\n\n618\n00:29:22,120 --> 00:29:26,055\nthen once a month this one's now\ngonna check with WSUS for updates.\n\n619\n00:29:26,055 --> 00:29:30,254\nIf the node is not set to use WSUS,\nthen once a month,\n\n620\n00:29:30,254 --> 00:29:33,219\nthis is gonna check with Microsoft.\n\n621\n00:29:33,219 --> 00:29:36,137\n>> That means you're not testing\nthem before you roll them out, and\n\n622\n00:29:36,137 --> 00:29:37,315\nthat's not a good thing.\n\n623\n00:29:37,315 --> 00:29:39,930\n>> Not on a cluster environment\n>> No.\n\n624\n00:29:39,930 --> 00:29:41,480\n>> Normally,\nif you're gonna bother building a cluster,\n\n625\n00:29:41,480 --> 00:29:44,820\nit's pretty important software\nyou're trying to make available.\n\n626\n00:29:44,820 --> 00:29:45,730\nAll right, so that's done.\n\n627\n00:29:45,730 --> 00:29:47,060\nAnd I, well I say it's done.\n\n628\n00:29:47,060 --> 00:29:48,080\nIt's thinking.\n\n629\n00:29:48,080 --> 00:29:49,370\nBut it's almost done.\n\n630\n00:29:49,370 --> 00:29:51,820\nIt's gonna add that in, and\nthen we'll be self-updating.\n\n631\n00:29:51,820 --> 00:29:53,900\nIt's building that cluster\nresource in the background.\n\n632\n00:29:53,900 --> 00:29:58,119\nActually, I should probably be able to\nsee that if I go back to my roles and\n\n633\n00:29:58,119 --> 00:30:02,770\nrefresh that.\n\n634\n00:30:02,770 --> 00:30:07,170\nEventually, I'll see a resource in\nhere that'll be that CAU resource, but\n\n635\n00:30:07,170 --> 00:30:09,165\nit's thinking about it.\n\n636\n00:30:09,165 --> 00:30:10,640\nIt'll take it a minute.\n\n637\n00:30:10,640 --> 00:30:13,180\nSo that's cluster aware updating.\n\n638\n00:30:13,180 --> 00:30:14,920\nYou don't have to do it automatic.\n\n639\n00:30:14,920 --> 00:30:18,260\nAutomatic is nice sometimes,\nbut you can do it manually.\n\n640\n00:30:18,260 --> 00:30:22,650\nIt is just a tool that we run, and\nwe go through and we specify what we want.\n\n641\n00:30:22,650 --> 00:30:25,872\nSo if you wanted it manually,\nyou would just do the apply updates.\n\n642\n00:30:25,872 --> 00:30:28,635\nAnd you'd go and pick the updates\nthat you wanted to apply, and\n\n643\n00:30:28,635 --> 00:30:30,650\nthrow them onto the server.\n\n644\n00:30:30,650 --> 00:30:33,520\nIt's as simple as that,\nif you wanna go manual.\n\n645\n00:30:33,520 --> 00:30:35,420\nAnd you can generate your\nreports to see what's going on.\n\n646\n00:30:35,420 --> 00:30:36,860\n>> Yeah, and\nthey're not mutually exclusive, either.\n\n647\n00:30:36,860 --> 00:30:40,160\nSo if you had it scheduled\nto do it once a month, but\n\n648\n00:30:40,160 --> 00:30:43,390\nlet's say some big important updates came\nout and you wanted to go ahead and do that\n\n649\n00:30:43,390 --> 00:30:46,990\nright now, you can always fire up that\ntool and go through that manual process.\n\n650\n00:30:46,990 --> 00:30:50,790\nAnd it's not gonna effect your\nschedule with the self aware updating.\n\n651\n00:30:50,790 --> 00:30:53,370\n>> Yeah, and these days, it seems like\nthere's at least one a month now,\n\n652\n00:30:53,370 --> 00:30:57,806\nwhere there's a critical exploit, and\nMicrosoft rushes that update out the door.\n\n653\n00:30:57,806 --> 00:30:59,760\nAnd you don't wanna wait for\nthat next maintenance window,\n\n654\n00:30:59,760 --> 00:31:03,122\nyou wanna get that critical update\nout fast for your critical systems.\n\n655\n00:31:03,122 --> 00:31:06,780\nAll right, well that is gonna\ntake its time, isn't it?\n\n656\n00:31:06,780 --> 00:31:09,710\nWell I guess I can't\nreally do any updates.\n\n657\n00:31:09,710 --> 00:31:14,260\nI don't think this system is\nconnected to the Internet, anyway.\n\n658\n00:31:14,260 --> 00:31:17,446\nOnce you do your updates, you can\nmaintain and monitor all from here,\n\n659\n00:31:17,446 --> 00:31:19,160\nrun this from your own desktop.\n\n660\n00:31:19,160 --> 00:31:20,920\nIt's a neat function.\n\n661\n00:31:20,920 --> 00:31:23,220\nIn the past,\nthis was a very manual process.\n\n662\n00:31:23,220 --> 00:31:26,780\nYou had to go through and\ndo it by hand and that was frustrating.\n\n663\n00:31:26,780 --> 00:31:29,350\nNow it's automated, so\nthat definitely makes life easier.\n\n664\n00:31:30,670 --> 00:31:33,960\nAll right, I think that's about it for\ncluster aware updates.\n\n665\n00:31:33,960 --> 00:31:36,210\nI can't think of anything\nelse to mention on them.\n\n666\n00:31:36,210 --> 00:31:38,240\nIn the show notes I'll post\n\n667\n00:31:40,150 --> 00:31:44,090\na link that goes to Microsoft's page where\nthey detail the cluster aware updates.\n\n668\n00:31:44,090 --> 00:31:46,620\nThey just have basic information\non there about how it works and\n\n669\n00:31:46,620 --> 00:31:48,100\nsome recommendations.\n\n670\n00:31:48,100 --> 00:31:49,760\nBut we've pretty much seen it.\n\n671\n00:31:49,760 --> 00:31:52,010\nIt's not the most complex of utilities.\n\n672\n00:31:52,010 --> 00:31:57,540\nAll right, so the next thing that we're\ngonna be taking a look at is, let's see.\n\n673\n00:31:57,540 --> 00:31:58,240\nWhat are we up to?\n\n674\n00:31:58,240 --> 00:32:00,609\nMulti-site failover clusters.\n\n675\n00:32:00,609 --> 00:32:04,312\nSo the clusters we've really been talking\nabout up until this point have all been\n\n676\n00:32:04,312 --> 00:32:05,847\nbasically in the same facility.\n\n677\n00:32:05,847 --> 00:32:09,429\nThere does come a time, though, where we\nmight wanna spread it across multiple\n\n678\n00:32:09,429 --> 00:32:12,540\ngeographic areas and so\nthat's what we're gonna talk about next.\n\n679\n00:32:12,540 --> 00:32:15,100\nBut let's stop here and take a break, and\n\n680\n00:32:15,100 --> 00:32:18,255\nwhen we get back we'll\nsee multi-site clusters.\n\n681\n00:32:18,255 --> 00:32:19,921\nSo stay tuned, we'll be back after this.\n\n682\n00:32:19,921 --> 00:32:27,463\n[MUSIC]\n\n683\n00:32:27,463 --> 00:32:29,260\nAll right, welcome back everybody.\n\n684\n00:32:29,260 --> 00:32:33,970\nFor our final segment, we're going to be\ntaking a look at multi0site clustering.\n\n685\n00:32:35,000 --> 00:32:39,400\nThe clustering that most people think of\nis traditionally deployed in one location.\n\n686\n00:32:39,400 --> 00:32:43,310\nSo, you've got your headquarters office,\nand you've got an email server, or\n\n687\n00:32:43,310 --> 00:32:46,740\nsomething like that that needs to be\nclustered, and so you bring up a couple of\n\n688\n00:32:46,740 --> 00:32:51,320\nservers with some shared storage, and\nyou start to cluster right there.\n\n689\n00:32:51,320 --> 00:32:52,420\nThat works.\n\n690\n00:32:52,420 --> 00:32:54,630\nAnd it gives you full hardware redundancy.\n\n691\n00:32:54,630 --> 00:32:57,850\nIf your server fails, one of your nodes\nfails, the other nodes take over.\n\n692\n00:32:57,850 --> 00:33:01,570\nWe get availability in terms\nof the servers themselves.\n\n693\n00:33:03,230 --> 00:33:07,920\nBut the missing piece is you\ndon't get facility redundancy.\n\n694\n00:33:07,920 --> 00:33:10,470\nIf your headquarters gets destroyed for\nsome reason, or\n\n695\n00:33:10,470 --> 00:33:14,240\neven something a lot less painful,\nlike loses its internet connection, well,\n\n696\n00:33:14,240 --> 00:33:18,210\nall your remote branches can't connect\nto it, and you're effectively down.\n\n697\n00:33:18,210 --> 00:33:21,642\nIt doesn't matter that you had a cluster\nif all of the nodes in the clusters lose\n\n698\n00:33:21,642 --> 00:33:22,630\ntheir connectivity.\n\n699\n00:33:23,950 --> 00:33:26,210\nSo sometimes we want that.\n\n700\n00:33:26,210 --> 00:33:28,320\nWe want facility redundancy.\n\n701\n00:33:28,320 --> 00:33:31,410\nNot just rythmizicay\ninside of our cluster.\n\n702\n00:33:32,610 --> 00:33:33,590\nI mentioned SAN.\n\n703\n00:33:33,590 --> 00:33:37,850\nYou do need redundancy on the SAN side,\ntoo, just in case that fails.\n\n704\n00:33:37,850 --> 00:33:42,870\nSo you can eliminate all the single points\nof failure in your SAN in one location.\n\n705\n00:33:42,870 --> 00:33:44,672\nBut that location is still\nyour single point failure.\n\n706\n00:33:44,672 --> 00:33:50,770\nNow multi-site failover clusters,\nright, where we have them spread\n\n707\n00:33:50,770 --> 00:33:54,540\nacross various areas, start to bring in\na lot more complexities into our design.\n\n708\n00:33:55,580 --> 00:33:56,990\nHere's a few of the problems.\n\n709\n00:33:56,990 --> 00:33:59,560\nFirst off, you can't do shared storage.\n\n710\n00:33:59,560 --> 00:34:02,200\nRight?\nHow How are you going to attach a SAN\n\n711\n00:34:03,250 --> 00:34:06,130\nto servers that are in two\ncompletely different cities, or\n\n712\n00:34:06,130 --> 00:34:07,330\ntwo different buildings?\n\n713\n00:34:07,330 --> 00:34:11,810\nMaybe if the buildings are close enough\ntogether you could run some fiber to it\n\n714\n00:34:11,810 --> 00:34:15,580\nbut you wouldn't want fiber lengths\nthat long for your storage data.\n\n715\n00:34:15,580 --> 00:34:17,790\nSo, it's not practical.\n\n716\n00:34:17,790 --> 00:34:23,360\nSo, if shared storage is\na critical component of a cluster,\n\n717\n00:34:23,360 --> 00:34:26,290\nthen how are you supposed to be\nable to build up a multi-site\n\n718\n00:34:26,290 --> 00:34:27,580\ncluster if you can't have shared storage?\n\n719\n00:34:29,000 --> 00:34:33,550\nAnd the answer is that you have to cheat\nthe system a little bit, all right.\n\n720\n00:34:33,550 --> 00:34:35,770\nYou can't do shared storage, so\n\n721\n00:34:35,770 --> 00:34:39,610\nyou're going to have to do\nmultiple copies of your storage.\n\n722\n00:34:39,610 --> 00:34:45,750\nWhen you do a multi-site cluster you\nhave to have a copy of your storage for\n\n723\n00:34:45,750 --> 00:34:47,060\neach node in the cluster.\n\n724\n00:34:48,310 --> 00:34:51,160\nThe nodes can't share like normal.\n\n725\n00:34:51,160 --> 00:34:55,030\nAnd if we do that,\nif we start having where each node has\n\n726\n00:34:55,030 --> 00:34:59,922\ntheir own storage I've got to\nsynchronize that storage [CROSSTALK].\n\n727\n00:34:59,922 --> 00:35:03,660\nWell, it does vary a little bit.\n\n728\n00:35:03,660 --> 00:35:06,780\nIf it's the Hyper V stuff, yeah, they\ncan share, but some of the other ones,\n\n729\n00:35:06,780 --> 00:35:07,860\nit won't even let them share.\n\n730\n00:35:07,860 --> 00:35:11,300\nThe nodes have to go individual, so there\ncan be special needs for special software,\n\n731\n00:35:11,300 --> 00:35:14,230\nbut let's use HyperV as an example,\nbecause that's probably the most common.\n\n732\n00:35:14,230 --> 00:35:14,960\nYep, so\n\n733\n00:35:14,960 --> 00:35:20,010\nthat's kinda like the diagram that I've\ndrawn here where I've got some servers.\n\n734\n00:35:20,010 --> 00:35:22,550\n>> Nice.\n>> And I've got two nodes over here in one\n\n735\n00:35:22,550 --> 00:35:23,650\nbuilding and\n\n736\n00:35:23,650 --> 00:35:26,830\ntwo nodes over here in a completely\ndifferent network somewhere else.\n\n737\n00:35:26,830 --> 00:35:30,050\n>> Now in the Microsoft documentation\nthey always refer to these as subnets.\n\n738\n00:35:30,050 --> 00:35:31,580\nSeparate subnets, all right.\n\n739\n00:35:31,580 --> 00:35:34,060\nSo this is one IP subnet over here.\n\n740\n00:35:34,060 --> 00:35:36,850\nAnd this is a different\nIP subnet over here.\n\n741\n00:35:36,850 --> 00:35:41,010\nSo for example, maybe this is my\nheadquarters office over here, and\n\n742\n00:35:41,010 --> 00:35:48,180\nin my headquarters office, I might\nuse something like, for my network,\n\n743\n00:35:48,180 --> 00:35:54,450\nthis might actually be 192.168.,\nlet's see if I can get in here.\n\n744\n00:35:54,450 --> 00:35:55,190\nThere we go.\n\n745\n00:35:55,190 --> 00:35:57,590\n.0.0, right?\n\n746\n00:35:57,590 --> 00:36:02,000\nSo all of my IP addresses fall\nin that range right there, but\n\n747\n00:36:02,000 --> 00:36:05,450\nat my other location I'm not\ngoing to use that same IP\n\n748\n00:36:05,450 --> 00:36:10,080\nrange because I need to know when the\nroute trafficked to one versus the other.\n\n749\n00:36:10,080 --> 00:36:11,290\nSo maybe I used 192.168.1.0 over there,\n\n750\n00:36:11,290 --> 00:36:16,970\ntwo different subnets, now these subnets\ncould be in the same building, could\n\n751\n00:36:16,970 --> 00:36:20,260\nhave one on one story of the building and\none on another story of the building.\n\n752\n00:36:21,890 --> 00:36:25,045\nOr one can be here in Florida, and\nthe other could be over in California.\n\n753\n00:36:25,045 --> 00:36:27,015\nThese can be in completely\ndifferent states,\n\n754\n00:36:27,015 --> 00:36:29,535\ncompletely different cities,\nthey could be wherever.\n\n755\n00:36:29,535 --> 00:36:34,085\nSo, Microsoft, just to be able to grab all\nof the scenarios into one description,\n\n756\n00:36:34,085 --> 00:36:36,002\nrefers to it based on the subnets.\n\n757\n00:36:36,002 --> 00:36:40,455\nWhen we have nodes in multiple\nIP subnets like this,\n\n758\n00:36:40,455 --> 00:36:43,735\nwe have these extra\nconsiderations to deal with.\n\n759\n00:36:43,735 --> 00:36:47,090\nStorage is the big one,\nwe need separate copies of the storage.\n\n760\n00:36:47,090 --> 00:36:51,030\nAnd if it's something like Hyper-V, when\nyou do this, you actually can have where\n\n761\n00:36:51,030 --> 00:36:54,200\nNode 1 and Node 2 are connected\nto some kind of storage here.\n\n762\n00:36:54,200 --> 00:36:56,860\nNode 3 and Node 4 are connected\nto some kind of storage here.\n\n763\n00:36:56,860 --> 00:36:57,630\nAll right.\n\n764\n00:36:57,630 --> 00:37:01,170\nThere are some roles, however,\nthat don't even allow that,\n\n765\n00:37:01,170 --> 00:37:03,480\nthat actually require you to have\nseparate storage for each one.\n\n766\n00:37:03,480 --> 00:37:05,310\nDoesn't mean you have\nto have a separate SAN.\n\n767\n00:37:05,310 --> 00:37:09,580\nWhat I could do is I could say Node\n1 is connected to this LAN and\n\n768\n00:37:09,580 --> 00:37:13,718\nNode 2 is connected to this LAN and Node 3\nis connected to this LAN and then Node 4\n\n769\n00:37:13,718 --> 00:37:17,850\nis this one, so they all have their own\nseparate LANs and then we replicate those.\n\n770\n00:37:17,850 --> 00:37:21,288\nSo even though there's four different LANs\nat that point, they're all identical.\n\n771\n00:37:21,288 --> 00:37:24,110\nBut with Hyper-V for\nyour virtual machine storage,\n\n772\n00:37:24,110 --> 00:37:28,030\nyou can do a cluster shared volume and\nit's perfectly happy with that and\n\n773\n00:37:28,030 --> 00:37:31,850\nyou can actually have them where like\nthese two nodes are connected to this LAN,\n\n774\n00:37:31,850 --> 00:37:33,390\nand these two nodes\nare connected to this LAN.\n\n775\n00:37:33,390 --> 00:37:35,240\nSo, it becomes a little bit smaller,\nall right.\n\n776\n00:37:36,270 --> 00:37:39,410\nHere's the key piece to deal with on this,\nall right.\n\n777\n00:37:39,410 --> 00:37:42,870\nOur main problem, I guess there's\nreally two problems, all right.\n\n778\n00:37:42,870 --> 00:37:48,400\nOur biggest problem with\na multi-site cluster Is latency.\n\n779\n00:37:49,410 --> 00:37:51,740\nWe're used to everything being\nright here in one building,\n\n780\n00:37:51,740 --> 00:37:54,150\nwe can talk lickety split,\neverybody's sharing storage.\n\n781\n00:37:54,150 --> 00:37:56,240\nThere's no delay in flipping or\n\n782\n00:37:56,240 --> 00:37:57,780\nreplication cuz there is no replication,\nright?\n\n783\n00:37:57,780 --> 00:37:58,450\nIt's all the same data.\n\n784\n00:37:59,530 --> 00:38:03,810\nWhen we go multi-site, not only do we\nhave latency just from the replication of\n\n785\n00:38:03,810 --> 00:38:06,748\nstorage, but\nwe also have latency because of this line.\n\n786\n00:38:06,748 --> 00:38:07,760\nOur WAN lines,\n\n787\n00:38:07,760 --> 00:38:11,880\nour wide area network lines, are never\nas beefy as our local area networks.\n\n788\n00:38:11,880 --> 00:38:15,713\nUnless you're in some kind of bizzaro land\nwhere your expenses are all messed up.\n\n789\n00:38:15,713 --> 00:38:20,172\nBut normally your wide area network,\nit might be 20 megabit or 40 megabit,\n\n790\n00:38:20,172 --> 00:38:23,713\nsomething like that,\nversus your LAN that might be a gigabit.\n\n791\n00:38:23,713 --> 00:38:27,817\nSo things are a lot slower over the WAN,\nand let me tell you,\n\n792\n00:38:27,817 --> 00:38:30,370\nclusters don't like slow.\n\n793\n00:38:30,370 --> 00:38:31,920\nCluster like fast.\n\n794\n00:38:31,920 --> 00:38:35,850\nSo, we've got to plan for a lot of this.\n\n795\n00:38:35,850 --> 00:38:38,750\nSo let's break this up piecemeal,\nand we'll start with storage.\n\n796\n00:38:38,750 --> 00:38:42,560\nSo if I've got my cluster nodes,\nsome are in one subnet,\n\n797\n00:38:42,560 --> 00:38:47,520\nsome are in another subset, and\nI need to have available storage for them,\n\n798\n00:38:47,520 --> 00:38:50,010\nI bring up the storage and\nI get them connected.\n\n799\n00:38:50,010 --> 00:38:50,800\nOkay.\n\n800\n00:38:50,800 --> 00:38:54,265\nNow with the cluster\nit's gonna make sure that\n\n801\n00:38:54,265 --> 00:38:57,973\nonly one of the nodes is accessing\na particular resource at a time.\n\n802\n00:38:57,973 --> 00:39:02,631\nSo if it's a CSV with a bunch of virtual\nmachines in it, only Node 1 can access\n\n803\n00:39:02,631 --> 00:39:07,435\nthe virtual hard drive for one server and\nonly Node 2 can access the virtual hard\n\n804\n00:39:07,435 --> 00:39:11,547\ndrive for a second server and\nnode three has a third server and so on.\n\n805\n00:39:11,547 --> 00:39:15,012\nAnd if one of them fails any\none of them could jump in and\n\n806\n00:39:15,012 --> 00:39:18,260\ntake over that virtual\nmachine that was running.\n\n807\n00:39:18,260 --> 00:39:22,457\nSo I've got to make sure that\nthe virtual hard drive for\n\n808\n00:39:22,457 --> 00:39:27,110\nthat VM is stored not only over here,\nbut also over here, and\n\n809\n00:39:27,110 --> 00:39:31,315\nthat they are as close to\nidentical as possible.\n\n810\n00:39:31,315 --> 00:39:35,315\nAll right, now if that replication\npiece starts to cause us a problem,\n\n811\n00:39:35,315 --> 00:39:38,885\nbecause well,\nlet's do the quick quiz here, Mike.\n\n812\n00:39:38,885 --> 00:39:43,185\nSo Mike, which tool does Microsoft gives\nus to use to synchronize storage between\n\n813\n00:39:43,185 --> 00:39:43,845\nlocations?\n\n814\n00:39:43,845 --> 00:39:44,755\n>> Absolutely nothing.\n\n815\n00:39:44,755 --> 00:39:47,355\n[LAUGH]\n>> Nothing, they give us nothing.\n\n816\n00:39:47,355 --> 00:39:48,955\nSo what tool can you use?\n\n817\n00:39:50,060 --> 00:39:51,170\nIt's up to you, right?\n\n818\n00:39:51,170 --> 00:39:52,020\nFigure it out, right?\n\n819\n00:39:52,020 --> 00:39:52,880\nThat's Microsoft's approach.\n\n820\n00:39:52,880 --> 00:39:55,131\n>> [INAUDIBLE] You go\nfind a solution [LAUGH].\n\n821\n00:39:55,131 --> 00:39:59,007\n>> [LAUGH] Microsoft knows that a lot\nof these networks are different and\n\n822\n00:39:59,007 --> 00:40:00,843\neverybody has special needs and\n\n823\n00:40:00,843 --> 00:40:05,005\nthis is such a rare configuration\ntype that they just don't provide it.\n\n824\n00:40:05,005 --> 00:40:07,560\nThey don't give you a way\nto replicate that data.\n\n825\n00:40:07,560 --> 00:40:11,542\nNow I know some of you are saying,\nwell what about like SyncToy and stuff?\n\n826\n00:40:11,542 --> 00:40:13,440\nIt's got toy in the name.\n\n827\n00:40:13,440 --> 00:40:16,099\n>> [LAUGH]\n>> A lot of their stuff is just not\n\n828\n00:40:16,099 --> 00:40:17,300\ndesigned for this.\n\n829\n00:40:17,300 --> 00:40:23,174\nYou could maybe try and finagle DFS, or\nwhatever, but a lot of the replication\n\n830\n00:40:23,174 --> 00:40:28,340\ntechnologies that Microsoft has\ndon't take into account latency.\n\n831\n00:40:28,340 --> 00:40:30,900\nThey say you know it make take a little\nwhile to replicate to the other side,\n\n832\n00:40:30,900 --> 00:40:33,170\nand a cluster can't tolerate that.\n\n833\n00:40:33,170 --> 00:40:36,300\nSo we have to have\nreplication that understands\n\n834\n00:40:36,300 --> 00:40:38,440\nlatency is unacceptable, all right?\n\n835\n00:40:38,440 --> 00:40:40,310\nAnd the number one solution for\n\n836\n00:40:40,310 --> 00:40:44,910\nthat is not to use software at all,\nbut to use your SAN.\n\n837\n00:40:44,910 --> 00:40:49,269\nIf you have an EMC SAN,\nor an HP E-Series, or\n\n838\n00:40:49,269 --> 00:40:54,350\na high-end SAN, a fiber channel\nSAN built in to the hardware\n\n839\n00:40:54,350 --> 00:40:57,450\ncontroller on that SAN, it will typically\nhave a replication feature set.\n\n840\n00:40:58,480 --> 00:41:03,210\nIt's almost never free if it's almost\nalways a licensed feature to enable it.\n\n841\n00:41:03,210 --> 00:41:08,500\nBut once you enable it, it allows\nyou to do a few different things.\n\n842\n00:41:08,500 --> 00:41:13,380\nSometimes there's IFC,\nwhich is fiber channel over ethernet, so\n\n843\n00:41:13,380 --> 00:41:16,010\nyou may be able to do that, where it's\nsending the fiber channel communications\n\n844\n00:41:16,010 --> 00:41:18,190\nacross to replicate the two.\n\n845\n00:41:18,190 --> 00:41:21,800\nOther times, it uses a proprietary\ntechnology, so that when a change is made\n\n846\n00:41:21,800 --> 00:41:25,940\nover here, it's replicated to\nthe other side, and vice versa.\n\n847\n00:41:25,940 --> 00:41:27,988\nSometimes, it supports two-way.\n\n848\n00:41:27,988 --> 00:41:30,445\nSometimes only supports one-way.\n\n849\n00:41:30,445 --> 00:41:34,985\nIf it only supports one-way,\nyou've gotta be really careful.\n\n850\n00:41:34,985 --> 00:41:38,125\nYou've gotta make sure you\nset your node priorities.\n\n851\n00:41:38,125 --> 00:41:40,589\nSo that if it's only one-way,\nlet's say the SAN1 here,\n\n852\n00:41:40,589 --> 00:41:42,505\nthis is my live environment.\n\n853\n00:41:42,505 --> 00:41:43,935\nAnd this is my backup environment, right?\n\n854\n00:41:45,365 --> 00:41:49,705\nIf my SAN only does one-way replication,\nso it's replicating from live to backup,\n\n855\n00:41:50,885 --> 00:41:54,420\nI never want to fail over the backup.\n\n856\n00:41:54,420 --> 00:41:57,860\nUnless everything is dead over here,\nright?\n\n857\n00:41:57,860 --> 00:42:00,490\nSo if I have a VM running on node 1 and\n\n858\n00:42:00,490 --> 00:42:03,580\nnode 1 dies,\nI need that VM to jump to node 2.\n\n859\n00:42:03,580 --> 00:42:06,330\nNot to jump over here, okay.\n\n860\n00:42:06,330 --> 00:42:08,590\nCuz I'm doing one-way replication,\nso if it jumps over here and\n\n861\n00:42:08,590 --> 00:42:12,339\nstarts making changes those changes\ndon't come back again, right?\n\n862\n00:42:12,339 --> 00:42:16,070\nAnd so if I have some resources running\nover here, and some resources running over\n\n863\n00:42:16,070 --> 00:42:19,340\nhere, now things are getting mixed and\nI'm only doing one-way replication.\n\n864\n00:42:19,340 --> 00:42:23,780\nSo instead we set up our priorities so\nthat all the resources stay over here\n\n865\n00:42:23,780 --> 00:42:27,830\nunless these nodes are dead, and\nthen they go to the other side.\n\n866\n00:42:27,830 --> 00:42:30,410\nAnd when that happens we have to\nrebuild this environment anyway.\n\n867\n00:42:30,410 --> 00:42:32,925\nSo we just turn synchronization on but\nin the opposite direction and\n\n868\n00:42:32,925 --> 00:42:36,610\nrepopulates production and then you\ngo through and you do your fail back.\n\n869\n00:42:36,610 --> 00:42:40,200\nBut it's all dependent on your hardware,\nall right.\n\n870\n00:42:40,200 --> 00:42:42,980\nI've worked with the stuff with EMC,\nit's really impressive.\n\n871\n00:42:42,980 --> 00:42:46,590\nYou do need to have the bandwidth\nto support this, right?\n\n872\n00:42:47,640 --> 00:42:50,890\nYou can also set up latency\nintentionally with it.\n\n873\n00:42:50,890 --> 00:42:53,950\nYou could say for example that I\nwant my disaster recovery site to be\n\n874\n00:42:53,950 --> 00:42:57,670\nan hour behind so that you could\nhave copies of this data that were\n\n875\n00:42:57,670 --> 00:43:00,450\nbehind if a virus broke\nout in your system.\n\n876\n00:43:00,450 --> 00:43:03,280\nYou might not want that virus to\nimmediately replicate to the other side.\n\n877\n00:43:03,280 --> 00:43:05,130\nSo you got like this hour\nwindow if you wanted.\n\n878\n00:43:05,130 --> 00:43:08,370\nBut you just have to remember that\nlatency if you have a failure that's data\n\n879\n00:43:08,370 --> 00:43:08,888\nyou lost.\n\n880\n00:43:08,888 --> 00:43:10,860\nSo if the remote is an hour behind and\n\n881\n00:43:10,860 --> 00:43:13,890\nyou have a failure right now\nyou just lost an hour of data.\n\n882\n00:43:13,890 --> 00:43:16,770\nSo hardware replication\nis the recommendation.\n\n883\n00:43:16,770 --> 00:43:20,160\nThat's what Microsoft wants you to use,\nthat's why they don't give us a product.\n\n884\n00:43:20,160 --> 00:43:21,670\nThat's why they're not really pushing for\nthat.\n\n885\n00:43:21,670 --> 00:43:25,310\nThey're saying whatever hardware you\nhave likely has the best option for\n\n886\n00:43:25,310 --> 00:43:27,140\nyou, all right.\n\n887\n00:43:27,140 --> 00:43:29,280\nNow maybe you don't have hardware.\n\n888\n00:43:29,280 --> 00:43:33,910\nSo if you're using like SCSI targets\nthat are actually running on software,\n\n889\n00:43:33,910 --> 00:43:36,560\nif you've built them yourself or\nsomething like that,\n\n890\n00:43:36,560 --> 00:43:40,400\nwell if you've done all that your\nsystem's probably not mission critical.\n\n891\n00:43:40,400 --> 00:43:42,320\nIf it is you should probably\ninvest more in it, right,\n\n892\n00:43:42,320 --> 00:43:43,559\nthat would be my first recommendation.\n\n893\n00:43:44,770 --> 00:43:46,100\nBut if that's not an option and\n\n894\n00:43:46,100 --> 00:43:49,650\nyou're going in software, there are\nsoftware products out there that you can\n\n895\n00:43:49,650 --> 00:43:54,150\nuse that will handle this replication\nbetween the two systems, all right?\n\n896\n00:43:54,150 --> 00:43:55,060\nThere's a few of them.\n\n897\n00:43:55,060 --> 00:43:58,490\nEven the EMC guys,\nthey have a product called RepliStor,\n\n898\n00:43:58,490 --> 00:44:02,130\nwhich is a software based replication\nsoftware that'll do this.\n\n899\n00:44:02,130 --> 00:44:06,720\nI've had not good results with any of the\nproducts, and I've tried a ton of them.\n\n900\n00:44:06,720 --> 00:44:08,920\nAnd I've never had great results,\nin a lab,\n\n901\n00:44:08,920 --> 00:44:10,780\nin a test environment, they work fine.\n\n902\n00:44:10,780 --> 00:44:14,855\nIn a production environment,\nalways hardware.\n\n903\n00:44:14,855 --> 00:44:16,731\nSo those are some options there.\n\n904\n00:44:16,731 --> 00:44:21,417\nThere is a third option Microsoft doesn't\nlike to talk about which is where you\n\n905\n00:44:21,417 --> 00:44:23,481\nmanually do the update yourself.\n\n906\n00:44:23,481 --> 00:44:26,258\nIf you have a lot of virtual\nmachines whose state doesn't change,\n\n907\n00:44:26,258 --> 00:44:28,932\nall right,\nlike maybe you have a Web server.\n\n908\n00:44:28,932 --> 00:44:30,392\nAnd the Web server just never changes.\n\n909\n00:44:30,392 --> 00:44:33,092\nIt's got the same Web page,\ndata's not being updated.\n\n910\n00:44:33,092 --> 00:44:35,522\nIn theory, you could clone that\nVHD to the other side, and\n\n911\n00:44:35,522 --> 00:44:37,932\nhave it available and just not update it.\n\n912\n00:44:37,932 --> 00:44:41,882\nAnd so, if that one ever has to spin up,\nit might be days or weeks old.\n\n913\n00:44:41,882 --> 00:44:45,400\nBut that's okay,\nbecause no changes have happened, right?\n\n914\n00:44:45,400 --> 00:44:46,790\nBut again,\n\n915\n00:44:46,790 --> 00:44:50,175\nin my experience, at a minimum there's\nprobably been some Windows updates.\n\n916\n00:44:50,175 --> 00:44:54,700\n[LAUGH] So you don't wanna bring up\na potentially compromised VHD, right?\n\n917\n00:44:54,700 --> 00:44:58,550\nSo you gotta be careful with that but\nthose are three solutions that are out\n\n918\n00:44:58,550 --> 00:45:04,010\nthere, hardware application,\nsoftware application, manual replication.\n\n919\n00:45:04,010 --> 00:45:06,020\nTo get the data between the two sites but\nyou gotta do it.\n\n920\n00:45:06,020 --> 00:45:07,390\nAnd I say two sites, you could have more.\n\n921\n00:45:07,390 --> 00:45:09,040\nYou could have more sites.\n\n922\n00:45:09,040 --> 00:45:11,174\nThe more sites you have,\nthe more complex this gets though and\n\n923\n00:45:11,174 --> 00:45:12,508\nthe more prone to failure it becomes.\n\n924\n00:45:12,508 --> 00:45:18,920\nAll right, so at a minimum, when we start\nto do a multisite-cluster like this,\n\n925\n00:45:18,920 --> 00:45:23,440\nyou will wanna start manipulating your\nvotes, you wanna manipulate your quorum.\n\n926\n00:45:23,440 --> 00:45:25,720\nQuorum is a big deal, right?\n\n927\n00:45:25,720 --> 00:45:27,600\nThink about disk quorum.\n\n928\n00:45:27,600 --> 00:45:31,900\nIf we have disk quorum, and\nthese guys on the left, node 1 and node 2,\n\n929\n00:45:31,900 --> 00:45:33,980\nthese guys are connected to one SAN.\n\n930\n00:45:33,980 --> 00:45:37,180\nAnd these guys over here are connected to\na completely different SAN, they're not\n\n931\n00:45:37,180 --> 00:45:41,045\ngonna be able to see each other go\nthrough that disk witness, all right?\n\n932\n00:45:41,045 --> 00:45:44,205\nSo that's not gonna work,\nthat's gonna fail.\n\n933\n00:45:44,205 --> 00:45:46,945\nAnd actually there's\na neat little caveat here.\n\n934\n00:45:46,945 --> 00:45:51,775\nThis is one of the few scenarios where the\nserver validation wizard will fail you and\n\n935\n00:45:51,775 --> 00:45:53,345\nMicrosoft will still support you.\n\n936\n00:45:53,345 --> 00:45:59,190\nIn a multi-site SAN the validation\nwizard for the cluster always fails.\n\n937\n00:45:59,190 --> 00:46:05,190\nIt always reports back your servers or\nyour nodes can't all see the same storage.\n\n938\n00:46:05,190 --> 00:46:08,226\nAnd if they don't all see the same\nstorage, you've got connectivity problems,\n\n939\n00:46:08,226 --> 00:46:09,110\nyou're unsupported.\n\n940\n00:46:09,110 --> 00:46:09,980\nSo it will tell you that.\n\n941\n00:46:09,980 --> 00:46:13,470\nYou will fail validation in a mutli-sites,\nguaranteed, right?\n\n942\n00:46:13,470 --> 00:46:18,160\nUnless you've done something\ncrazy to trick it, it will fail.\n\n943\n00:46:18,160 --> 00:46:21,460\nBut when you call Microsoft and they see\nthat, and they say we don't support it,\n\n944\n00:46:21,460 --> 00:46:24,600\nit's not validated, and\nyou say well, let me just clarify.\n\n945\n00:46:24,600 --> 00:46:25,500\nThese are in one subnet.\n\n946\n00:46:25,500 --> 00:46:26,100\nThese are in another.\n\n947\n00:46:26,100 --> 00:46:28,970\nSo, I've got a multi-site cluster.\n\n948\n00:46:28,970 --> 00:46:30,460\nAnd, they'll say, oh, okay.\n\n949\n00:46:30,460 --> 00:46:31,630\nLet's take a look at then.\n\n950\n00:46:31,630 --> 00:46:32,590\nAnd, they will support it.\n\n951\n00:46:32,590 --> 00:46:35,360\nSo, it's the only time that I'm aware of\n\n952\n00:46:35,360 --> 00:46:39,157\nthat they'll help you with\na cluster that failed validation.\n\n953\n00:46:39,157 --> 00:46:42,010\nAll right, so disk witnesses are out.\n\n954\n00:46:42,010 --> 00:46:43,300\nWe just can't even use disk witness.\n\n955\n00:46:43,300 --> 00:46:44,340\nIt's not even a choice.\n\n956\n00:46:44,340 --> 00:46:48,190\nThere are some people that do try\nto replicate the disk witness.\n\n957\n00:46:48,190 --> 00:46:49,920\nBut the latency is too tough.\n\n958\n00:46:49,920 --> 00:46:53,700\nRemember, you're writing to that disk\nspace every second, every single second.\n\n959\n00:46:53,700 --> 00:46:55,020\nAnd all of your nodes are doing it.\n\n960\n00:46:55,020 --> 00:46:57,505\nThat's tough to keep that up-to-date.\n\n961\n00:46:58,530 --> 00:47:01,080\nWe could do a File Share Witness, right?\n\n962\n00:47:01,080 --> 00:47:05,000\nIf we do a File Share Witness everybody\ncan see the file share regardless of where\n\n963\n00:47:05,000 --> 00:47:06,990\nthey are and\nthey can write directly to it.\n\n964\n00:47:06,990 --> 00:47:08,252\nThe problem is where does that witness go.\n\n965\n00:47:08,252 --> 00:47:10,860\nDo you stick it over here, right?\n\n966\n00:47:10,860 --> 00:47:12,130\n>> Sure that looks good.\n\n967\n00:47:12,130 --> 00:47:14,345\nUntil that stuff, that goes down.\n\n968\n00:47:14,345 --> 00:47:15,780\n[LAUGH]\n>> Yeah, so\n\n969\n00:47:15,780 --> 00:47:19,040\nnow when this site goes down we\nlose the witness also, right, and\n\n970\n00:47:19,040 --> 00:47:21,610\nmaybe it's the WAM length that goes down,\nright?\n\n971\n00:47:21,610 --> 00:47:25,080\nAnd so the cluster is actually up and they\ncan still see the file share witness they\n\n972\n00:47:25,080 --> 00:47:27,240\nthink they're up and\nthey just keep running.\n\n973\n00:47:27,240 --> 00:47:29,820\nMeanwhile, over here there's\na couple of servers that\n\n974\n00:47:29,820 --> 00:47:31,810\nwe need our customers to go to.\n\n975\n00:47:31,810 --> 00:47:34,100\nBut they can't see\nthe File Share Witness anymore.\n\n976\n00:47:34,100 --> 00:47:36,130\nAnd so they say wow,\nit must be our problem.\n\n977\n00:47:36,130 --> 00:47:38,430\nWe can't see the witness anymore, and\n\n978\n00:47:38,430 --> 00:47:41,490\nthey stay down, even though this is\nwhen we want them to come up, all right?\n\n979\n00:47:42,580 --> 00:47:44,320\nSo that File Share Witness\nbecomes a problem.\n\n980\n00:47:44,320 --> 00:47:50,030\nYou can't stick it in one particular site\nand expect it to function, all right?\n\n981\n00:47:50,030 --> 00:47:51,960\nSo, you have two choices.\n\n982\n00:47:51,960 --> 00:47:56,550\nChoice number one is to stick it in one\nsite and replicate it to the other.\n\n983\n00:47:56,550 --> 00:47:59,023\nSo now you've got two copies\nof that File Share Witness.\n\n984\n00:47:59,023 --> 00:47:59,940\nI'm gonna get motion sickness.\n\n985\n00:47:59,940 --> 00:48:03,636\n>> [LAUGH]\n>> There is another option though,\n\n986\n00:48:03,636 --> 00:48:05,811\nwhich is to put it in a third site,\nall right?\n\n987\n00:48:05,811 --> 00:48:07,935\nYou could actually have another site.\n\n988\n00:48:07,935 --> 00:48:10,007\nSomething like Windows Azure, for example.\n\n989\n00:48:10,007 --> 00:48:12,561\nYou could stick the File Share Witness\nup in Windows Azure.\n\n990\n00:48:12,561 --> 00:48:14,930\nAnd now your sites\nare reaching out to that,\n\n991\n00:48:14,930 --> 00:48:18,515\nthat has the added benefit that if\nthe WAN link goes down for a site,\n\n992\n00:48:18,515 --> 00:48:22,551\neven though the nodes are completely\nhealthy they can't see the file share\n\n993\n00:48:22,551 --> 00:48:25,960\nwitness anymore and\nthey'll view that as a failure.\n\n994\n00:48:25,960 --> 00:48:27,930\nThe other side can still see it.\n\n995\n00:48:27,930 --> 00:48:30,740\nThey'll see that the first side is no\nlonger writing to that witness and\n\n996\n00:48:30,740 --> 00:48:33,020\nthey'll know the other side is down and\nthey'll come active.\n\n997\n00:48:33,020 --> 00:48:36,178\nSo now we kinda have like\npseudo WAN link monitoring,\n\n998\n00:48:36,178 --> 00:48:36,710\n>> Mm-hm\n\n999\n00:48:36,710 --> 00:48:38,290\n>> Because that file share was external.\n\n1000\n00:48:39,570 --> 00:48:41,550\nAll right,\nthat's another option there too.\n\n1001\n00:48:41,550 --> 00:48:44,260\nLots of options based on what\nit is we want to achieve.\n\n1002\n00:48:45,800 --> 00:48:49,380\nDo remember that if you choose to use\nWindows Azure or Amazon Web service, or\n\n1003\n00:48:49,380 --> 00:48:53,610\nwhatever that you really need to\nestablish a VPN tunnel to that or\n\n1004\n00:48:53,610 --> 00:48:55,090\nat a minimum an IP sack.\n\n1005\n00:48:55,090 --> 00:48:57,540\nBecause there are a number of attacks that\n\n1006\n00:48:57,540 --> 00:49:01,630\nsomebody could pull off against your file\nshare witness to manipulate things and\n\n1007\n00:49:01,630 --> 00:49:03,520\nthe attacks are a result of\neither one of two things.\n\n1008\n00:49:03,520 --> 00:49:08,890\nEither one, nodes failing over,\nwhich you don't want or two,\n\n1009\n00:49:08,890 --> 00:49:13,290\nthey can actually bring up their\nown node without authenticating.\n\n1010\n00:49:13,290 --> 00:49:15,650\nIf they can manipulate that file share\nwhen there's some attacks that allow\n\n1011\n00:49:15,650 --> 00:49:16,940\nthat to happen.\n\n1012\n00:49:16,940 --> 00:49:20,940\nIt's not something we normally worry about\nbecause these witnesses are protected and\n\n1013\n00:49:20,940 --> 00:49:22,790\nwe protect access on that.\n\n1014\n00:49:22,790 --> 00:49:25,670\nBut, if it's out there in\nthe Cloud all of a sudden\n\n1015\n00:49:25,670 --> 00:49:27,740\nwe're kind of hanging it out there and\nyou gotta be careful.\n\n1016\n00:49:27,740 --> 00:49:31,390\nSo make sure that that is protected and\nnot just available to the whole internet.\n\n1017\n00:49:32,700 --> 00:49:33,235\nThat would be bad.\n\n1018\n00:49:33,235 --> 00:49:35,115\n>> [LAUGH] That would be bad.\n\n1019\n00:49:35,115 --> 00:49:38,465\n>> Okay so, multi site clusters,\nabsolutely possible.\n\n1020\n00:49:38,465 --> 00:49:39,788\n>> Mm-hm.\n>> And they do give us that cyber\n\n1021\n00:49:39,788 --> 00:49:43,090\nredundancy but a lot of extra\nplanning has to go into them.\n\n1022\n00:49:43,090 --> 00:49:46,990\nAnd in the show notes I have a,\nactually, do I have the link?\n\n1023\n00:49:49,190 --> 00:49:53,140\nI thought I put a note in their to the\nMicrosoft configuration recommendation.\n\n1024\n00:49:53,140 --> 00:49:57,110\nBut I'll look for\nthat later and put it in there.\n\n1025\n00:49:57,110 --> 00:49:59,100\nBut basically I put in those,\n\n1026\n00:49:59,100 --> 00:50:01,770\na couple of different other\nconsiderations we have to worry about.\n\n1027\n00:50:01,770 --> 00:50:04,650\nSo let's just kinda run down the list\nof other things we need to plan for\n\n1028\n00:50:04,650 --> 00:50:06,010\nin multi-site.\n\n1029\n00:50:06,010 --> 00:50:08,680\nNumber one, the heartbeat interval.\n\n1030\n00:50:08,680 --> 00:50:13,280\nThe default heartbeat interval is once\na second, every 1,000 milliseconds.\n\n1031\n00:50:13,280 --> 00:50:17,090\nAnd five misses means the node is offline,\nokay.\n\n1032\n00:50:17,090 --> 00:50:22,739\nSo, once a second over a WAN link\nmight be a little aggressive, okay?\n\n1033\n00:50:22,739 --> 00:50:26,740\nAnd that Period of time that we wait,\nright.\n\n1034\n00:50:26,740 --> 00:50:29,580\nYou know basically you've\ngot five seconds to respond.\n\n1035\n00:50:29,580 --> 00:50:31,790\nThat's pretty long in\nthe generally term of things.\n\n1036\n00:50:31,790 --> 00:50:34,720\nIf you think about how\nlong five seconds is, but\n\n1037\n00:50:34,720 --> 00:50:37,040\nyou may find that that's not suitable for\nyour environment.\n\n1038\n00:50:37,040 --> 00:50:39,630\nSo you might need to go and\nmodify the heartbeat interval, and\n\n1039\n00:50:39,630 --> 00:50:41,920\nyou can do that through Powershell.\n\n1040\n00:50:41,920 --> 00:50:45,450\nActually, I think that one\nhas a GUI entry, doesn't it?\n\n1041\n00:50:45,450 --> 00:50:47,560\n>> I don't know.\n>> There's a few different things,\n\n1042\n00:50:47,560 --> 00:50:52,010\nmy CAU failed because I'm running\nit from the system itself.\n\n1043\n00:50:52,010 --> 00:50:55,780\nBut I can't remember if we actually\nhad that option in the GUI or not.\n\n1044\n00:50:55,780 --> 00:50:57,350\nI know you can do it from the PowerShell.\n\n1045\n00:50:57,350 --> 00:50:58,480\n>> Yeah, I was thinking.\n\n1046\n00:50:58,480 --> 00:51:00,560\n>> But you can go manipulate\nthat heartbeat interval and\n\n1047\n00:51:00,560 --> 00:51:02,910\nthat will kind of square that away.\n\n1048\n00:51:02,910 --> 00:51:07,490\nYeah, I don't see it in here,\nso it must be PowerShell.\n\n1049\n00:51:07,490 --> 00:51:11,101\nBut you might need to adjust that to take\ninto account the latency of your WAN.\n\n1050\n00:51:11,101 --> 00:51:15,000\nAll right,\nsome of the other things to worry about.\n\n1051\n00:51:15,000 --> 00:51:19,680\nWhen we talk about that file replication,\nwhen you set up file\n\n1052\n00:51:19,680 --> 00:51:23,600\nreplication in your sand, it's got like\nhardware replication built into it,\n\n1053\n00:51:23,600 --> 00:51:29,042\nit usually has two different modes it can\noperate in, synchronous and asynchronous.\n\n1054\n00:51:29,042 --> 00:51:32,890\nAll right, and let me tell you what\nthose are and tell you when to use each.\n\n1055\n00:51:32,890 --> 00:51:33,920\nWhere was my diagram?\n\n1056\n00:51:33,920 --> 00:51:34,910\nWhat have I done here?\n\n1057\n00:51:35,960 --> 00:51:37,500\nThere, okay.\n\n1058\n00:51:37,500 --> 00:51:42,125\nSo, let's say I've got these two SANS and\nwe'll say they're both HP SANS.\n\n1059\n00:51:42,125 --> 00:51:45,385\nAnd I'm using their hardware based\nreplication to clone them, so\n\n1060\n00:51:45,385 --> 00:51:48,935\nthese two SANs are basically identical,\nall right.\n\n1061\n00:51:48,935 --> 00:51:53,295\nOver here, at site one that's going\nto be my production environment and\n\n1062\n00:51:53,295 --> 00:51:55,345\nthis is my disaster recovery environment.\n\n1063\n00:51:55,345 --> 00:51:57,985\nSo I'm not normally running from DR,\nbut if there's a failure,\n\n1064\n00:51:57,985 --> 00:52:00,505\nwe'll jump over to DR, okay.\n\n1065\n00:52:00,505 --> 00:52:04,335\nIn this situation when I\nset up that replication,\n\n1066\n00:52:04,335 --> 00:52:07,280\nI can pick between synchronous and\nasynchronous.\n\n1067\n00:52:07,280 --> 00:52:11,550\nIn synchronous mode,\nanytime a change is made to the SAN here,\n\n1068\n00:52:12,600 --> 00:52:17,970\nthe change is queued, it's held,\nsent to the other side and\n\n1069\n00:52:17,970 --> 00:52:21,150\nqueued, and\nthen applied at the exact same time.\n\n1070\n00:52:21,150 --> 00:52:25,690\nThe two SANs will roll that change\nin at the same time, right.\n\n1071\n00:52:25,690 --> 00:52:30,710\nThat basically creates a few\ndifferent benefits and negatives.\n\n1072\n00:52:30,710 --> 00:52:32,410\nOn a positive side,\n\n1073\n00:52:32,410 --> 00:52:37,520\nwhen you do synchronous replication,\nyour two SANs will always be identical.\n\n1074\n00:52:37,520 --> 00:52:41,080\nThey'll be identical because they're\napplying the changes at the same time.\n\n1075\n00:52:41,080 --> 00:52:45,140\nIt's called lock step, the two SANs\nare in lock step they are identical.\n\n1076\n00:52:46,340 --> 00:52:49,560\nIf you have a failure you lose no\ndata because both sans are identical.\n\n1077\n00:52:51,220 --> 00:52:53,490\nSo that's good, that's awesome.\n\n1078\n00:52:53,490 --> 00:52:57,620\nOn a negative side every\ntime you write to the SAN\n\n1079\n00:52:57,620 --> 00:53:00,100\nit's gonna be shifted to\nthe other side and applied too.\n\n1080\n00:53:00,100 --> 00:53:03,424\nThat's gonna make your right\noperations go more slowly.\n\n1081\n00:53:03,424 --> 00:53:04,391\n>> It's gotta wait.\n\n1082\n00:53:04,391 --> 00:53:07,170\n>> Yeah, it reads are still full-speed,\nbut writes aren't.\n\n1083\n00:53:07,170 --> 00:53:09,200\nYou're waiting on the other\nside to phone home,\n\n1084\n00:53:09,200 --> 00:53:12,740\nso the longer it takes to get that right,\nto ship it over to the other side and\n\n1085\n00:53:12,740 --> 00:53:16,620\nget it applied, the more you're moving,\nthe longer it takes to commit.\n\n1086\n00:53:16,620 --> 00:53:18,780\nSo your write performance\nstarts to degrade.\n\n1087\n00:53:20,440 --> 00:53:25,190\nIf performance is what you're looking for,\nsynchronous is not the way to go.\n\n1088\n00:53:25,190 --> 00:53:30,460\nAsynchronous says whenever a change is\nmade here, the change happens immediately.\n\n1089\n00:53:30,460 --> 00:53:34,950\nIt happens right now and\nthen it's also sent to the other side and\n\n1090\n00:53:34,950 --> 00:53:36,760\nthe other side applies it too.\n\n1091\n00:53:36,760 --> 00:53:40,860\nNot at the same time but close enough, it\nships it to the other side and applies it.\n\n1092\n00:53:40,860 --> 00:53:42,250\nThe production memory just doesn't wait.\n\n1093\n00:53:43,920 --> 00:53:45,220\nOn a positive side,\n\n1094\n00:53:45,220 --> 00:53:48,130\nI get some better performance out of that,\nwrites happen in real time.\n\n1095\n00:53:49,170 --> 00:53:52,680\nBut on the negative side,\nif I have a failure, anything that had\n\n1096\n00:53:52,680 --> 00:53:57,660\nchanged here but Not been shipped\nto the other side yet, gets lost.\n\n1097\n00:53:57,660 --> 00:54:01,720\nNow, that may not be a big deal because\nif your replication window is as\n\n1098\n00:54:01,720 --> 00:54:06,810\nsmall as a few seconds then it's not a ton\nof data depending on the data, all right.\n\n1099\n00:54:06,810 --> 00:54:11,220\nLet's say you are a stock brokerage and\nyou're processing stock trades.\n\n1100\n00:54:11,220 --> 00:54:14,940\nYou get a $1 million stock\ntrade that comes in and\n\n1101\n00:54:14,940 --> 00:54:17,620\nit's been written to the database here,\nand then you have a failure.\n\n1102\n00:54:18,710 --> 00:54:22,880\nWell, the customer has already been\ntold that that trade was committed.\n\n1103\n00:54:22,880 --> 00:54:27,090\nMeanwhile, it didn't replicate to the\nother side and at the other side when we\n\n1104\n00:54:27,090 --> 00:54:30,880\nfail over the system comes back and\nthe trade didn't go through.\n\n1105\n00:54:30,880 --> 00:54:34,930\nBut they got a committment notice and\nnow you are on the hook for\n\n1106\n00:54:34,930 --> 00:54:39,370\nthat So, if data is not able to be lost,\n\n1107\n00:54:39,370 --> 00:54:43,140\nif it is not acceptable to lose any dat,\ndo not run asynchronous, right.\n\n1108\n00:54:43,140 --> 00:54:48,040\nYou've gotta run synchronous to guarantee\ndata identity across the two, all right.\n\n1109\n00:54:48,040 --> 00:54:49,580\nIf you're a stockbroker or\nsomebody like that,\n\n1110\n00:54:49,580 --> 00:54:52,069\na trading floor,\nyou'll definitely do synchronous.\n\n1111\n00:54:53,160 --> 00:54:56,510\nSo that's a choice that we make in\nour replication in the hardware.\n\n1112\n00:54:56,510 --> 00:54:58,090\nWindows doesn't really\nget involved with that.\n\n1113\n00:54:58,090 --> 00:55:01,480\nThat's done back on the hardware.\n\n1114\n00:55:01,480 --> 00:55:05,020\nAll right, so that is a big deal,\nthat's something that's important.\n\n1115\n00:55:05,020 --> 00:55:06,610\nQuorum I already talk about a little bit,\nright.\n\n1116\n00:55:06,610 --> 00:55:11,250\nThat's harder across the nodes here\nbecause of where we have to stick our\n\n1117\n00:55:11,250 --> 00:55:14,310\nfile share witness and the disk\nwitness is just not even an option.\n\n1118\n00:55:14,310 --> 00:55:16,890\nIf you have an odd number of nodes,\nyou could go ahead and\n\n1119\n00:55:16,890 --> 00:55:19,680\ndo the just the standard majority stuff.\n\n1120\n00:55:19,680 --> 00:55:23,790\nBut, the problem with doing the standard\nmajority, even with an odd set of nodes,\n\n1121\n00:55:23,790 --> 00:55:29,600\nis if the WAN link goes down, the systems\nare gonna look at the remaining nodes.\n\n1122\n00:55:29,600 --> 00:55:32,710\nAnd over here on the left, these guys are\ngonna day well the other guys are gone so\n\n1123\n00:55:32,710 --> 00:55:35,430\ntwo of us We must be good, right.\n\n1124\n00:55:35,430 --> 00:55:38,370\nAnd the other site is saying,\nthose two guys are gone, it's just us,\n\n1125\n00:55:38,370 --> 00:55:39,080\nwe're good, right.\n\n1126\n00:55:39,080 --> 00:55:41,470\nAnd they're both gonna go active, so\n\n1127\n00:55:41,470 --> 00:55:45,250\nyou really do need a witness when\nyou're dealing with a multi-site SAN.\n\n1128\n00:55:45,250 --> 00:55:46,910\nIt's definitely a good idea to have that.\n\n1129\n00:55:48,850 --> 00:55:50,720\nBut if you've got production and\n\n1130\n00:55:50,720 --> 00:55:54,570\nback up, then you could just\nstick it all here in production.\n\n1131\n00:55:54,570 --> 00:55:57,541\nKnowing that if this file share witness\nfailed, or whatever that really your\n\n1132\n00:55:57,541 --> 00:56:00,344\nproduction site gonna be gone anyway and\nit's okay for the DR to come up.\n\n1133\n00:56:00,344 --> 00:56:03,364\nBut this will require manual failover\nbecause the DR is going to lose sight of\n\n1134\n00:56:03,364 --> 00:56:03,987\nthat witness.\n\n1135\n00:56:03,987 --> 00:56:07,000\nAnd so now,\nyou'll have to manually fail it over.\n\n1136\n00:56:07,000 --> 00:56:10,960\nYou could, Pop it over here in the backup\nand now the backup would always\n\n1137\n00:56:10,960 --> 00:56:15,448\nhave that visibility and the production\nwould get lost when it had a failure, but\n\n1138\n00:56:15,448 --> 00:56:19,680\nyou know now you've got latency to\nthe fileshare with this to worry about.\n\n1139\n00:56:19,680 --> 00:56:21,750\nSo you got to kind of weigh all of\nthat when you make your decision.\n\n1140\n00:56:23,870 --> 00:56:27,511\nAll right so we talked about network\nlatency, we talked about quorum,\n\n1141\n00:56:27,511 --> 00:56:30,561\ntalked about asynchronous and\nsynchronous replication.\n\n1142\n00:56:30,561 --> 00:56:31,198\n>> Services.\n\n1143\n00:56:31,198 --> 00:56:33,090\nWe should probably talk about\ninfrastructure services.\n\n1144\n00:56:33,090 --> 00:56:35,140\nActive directory and DNS as well.\n\n1145\n00:56:35,140 --> 00:56:35,980\n>> Oh yeah, yeah.\n\n1146\n00:56:35,980 --> 00:56:39,150\n>> Making sure that when you're\ngonna have that multi site,\n\n1147\n00:56:39,150 --> 00:56:43,060\nyou gotta have those resources, or those\nservices available at both locations.\n\n1148\n00:56:43,060 --> 00:56:46,520\nIf it's just sitting at that corporate\nsite and it fails over to that\n\n1149\n00:56:46,520 --> 00:56:49,860\ndisaster recovery site, and\nI've got to have active directory there.\n\n1150\n00:56:49,860 --> 00:56:52,790\nI've got to have DNS there\nto make sure when that\n\n1151\n00:56:52,790 --> 00:56:55,210\nfail over occurs like we\nsaid earlier in our show,\n\n1152\n00:56:55,210 --> 00:56:59,290\ndo they do their heartbeats by looking at\nthat name via DNS to get that IP address.\n\n1153\n00:56:59,290 --> 00:57:01,420\nSo that's got to be available.\n\n1154\n00:57:01,420 --> 00:57:04,320\nAnd then our DNS records\nthemselves have to be updated\n\n1155\n00:57:04,320 --> 00:57:05,950\nas well when we do a fail over.\n\n1156\n00:57:05,950 --> 00:57:09,050\nBecause you've got that virtual IP address\nthat gets assigned to the cluster, and\n\n1157\n00:57:09,050 --> 00:57:12,580\nthat's how your clients are connecting\nthat clustered resource.\n\n1158\n00:57:12,580 --> 00:57:16,390\nWhen you fail over, there's a good chance\nthat's going to be a different IP address.\n\n1159\n00:57:16,390 --> 00:57:21,500\nSo those DNS records are going to have to\nbe updated, which the cluster will do,\n\n1160\n00:57:21,500 --> 00:57:23,480\nbut there could be some caching going on.\n\n1161\n00:57:23,480 --> 00:57:27,910\nOur clients might have cached that IP\naddress depending on what our TTLs are, so\n\n1162\n00:57:27,910 --> 00:57:31,540\nit might be a little bit\nbefore they flush that out and\n\n1163\n00:57:31,540 --> 00:57:33,760\nare able to connect to\nthat resource again.\n\n1164\n00:57:33,760 --> 00:57:37,070\n>> Yeah, so in those situations you\nwant to set the TTL really low for\n\n1165\n00:57:37,070 --> 00:57:41,230\nour clustered resource so that it\nwill replicate, or not get cached for\n\n1166\n00:57:41,230 --> 00:57:43,030\nvery long to be able to\nhandle that fail over.\n\n1167\n00:57:43,030 --> 00:57:45,890\nBut also, if you think about it\nthat resource is going to fail\n\n1168\n00:57:45,890 --> 00:57:48,430\nover to the other side its\nIP is going to change.\n\n1169\n00:57:48,430 --> 00:57:50,400\nIf your software is set to look for\n\n1170\n00:57:50,400 --> 00:57:54,110\na particular IP,\nthat's not gonna work, right?\n\n1171\n00:57:54,110 --> 00:57:57,170\nSo, there are some systems like in SQL,\n\n1172\n00:57:57,170 --> 00:58:01,460\nwhere the SQL native client supports\nputting in more than one IP for a server.\n\n1173\n00:58:01,460 --> 00:58:03,790\nSo, now we've come a little\nbit more independent of DNS,\n\n1174\n00:58:03,790 --> 00:58:05,840\nthat we can reach out and\nconnect to one IP.\n\n1175\n00:58:05,840 --> 00:58:07,990\nAnd if it fails,\nit just goes to the next one.\n\n1176\n00:58:07,990 --> 00:58:11,780\nSo that there are things like that but\na lot of clients don't support that.\n\n1177\n00:58:11,780 --> 00:58:16,340\nAnd so making sure that you use DNS names,\nand the fail over cluster updates\n\n1178\n00:58:16,340 --> 00:58:20,050\nthe DNS names that kind of takes care\nof it and provides that connectivity.\n\n1179\n00:58:20,050 --> 00:58:22,360\nYeah definitely something\nimportant to plan for.\n\n1180\n00:58:24,190 --> 00:58:28,730\nAll right, but otherwise that's\nbasically it for a multi site cluster.\n\n1181\n00:58:28,730 --> 00:58:31,670\nYou set it up pretty much the same\nway as a regular cluster,\n\n1182\n00:58:31,670 --> 00:58:33,990\nas far as adding your nodes in and\nbuilding that up.\n\n1183\n00:58:33,990 --> 00:58:38,690\nJust keep in mind you will fail\nvalidation and you have to manually\n\n1184\n00:58:38,690 --> 00:58:43,070\nreplicate the storage so they're\nboth seeing identical sets of data.\n\n1185\n00:58:43,070 --> 00:58:45,670\nAll right, so that's pretty much it.\n\n1186\n00:58:45,670 --> 00:58:47,490\nWe covered a lot in this episode.\n\n1187\n00:58:47,490 --> 00:58:49,070\nOur little second part here.\n\n1188\n00:58:49,070 --> 00:58:51,130\nSo let's just recap that real quick.\n\n1189\n00:58:51,130 --> 00:58:55,070\nWe started off talking about our\nquorums and our different quorum modes.\n\n1190\n00:58:55,070 --> 00:58:58,830\nAnd for the exam you definitely want\nto be aware of the different modes and\n\n1191\n00:58:58,830 --> 00:59:00,410\nwhen to use them.\n\n1192\n00:59:00,410 --> 00:59:04,140\nWe follow that up with the cluster\naware updates, cau, and\n\n1193\n00:59:04,140 --> 00:59:07,420\nhow that can help us to ease\nupdates in on a cluster.\n\n1194\n00:59:07,420 --> 00:59:11,950\nAnd then lastly we talked\nabout multisite clusters and\n\n1195\n00:59:11,950 --> 00:59:15,570\nhow we deal with that and\nall the considerations we have there.\n\n1196\n00:59:15,570 --> 00:59:17,810\nWe are not done with clustering for\nthis exam.\n\n1197\n00:59:17,810 --> 00:59:21,556\nWe are going to see some more of it\nespecially when we talk about Hyper-V and\n\n1198\n00:59:21,556 --> 00:59:22,997\nlive migrations and stuff.\n\n1199\n00:59:22,997 --> 00:59:25,145\nYou'll see clustering again, but\n\n1200\n00:59:25,145 --> 00:59:28,230\non the design side of things\nthis is pretty much it.\n\n1201\n00:59:29,442 --> 00:59:31,960\nAll right well let me just\nremind you guys if you have\n\n1202\n00:59:31,960 --> 00:59:36,140\nquestions on any of this you are always\nwelcome to ask live during the show.\n\n1203\n00:59:36,140 --> 00:59:37,950\nYou can go to ITPro.tv/live.\n\n1204\n00:59:37,950 --> 00:59:40,055\n>> [LAUGH]\n>> Whatever our website is.\n\n1205\n00:59:40,055 --> 00:59:41,760\nITPro.tv/live.\n\n1206\n00:59:41,760 --> 00:59:44,072\n>> It's at the bottom of\nthe screen right down there.\n\n1207\n00:59:44,072 --> 00:59:46,670\n[LAUGH]\n>> [LAUGH] You'll see the chat right there\n\n1208\n00:59:46,670 --> 00:59:48,520\non the screen, right beneath the video.\n\n1209\n00:59:48,520 --> 00:59:50,910\nYou can post your questions there and\nwe monitor and answer.\n\n1210\n00:59:50,910 --> 00:59:54,820\nWe had some good discussions about\nwireless pixie boot during the break.\n\n1211\n00:59:54,820 --> 00:59:58,740\nIf you have questions after the show,\nyou can always use our Q&A forums, right?\n\n1212\n00:59:58,740 --> 01:00:00,845\nAt the top of every page you'll\nsee a link that says Q&A.\n\n1213\n01:00:00,845 --> 01:00:02,320\nIt'll take you right in there.\n\n1214\n01:00:02,320 --> 01:00:03,820\nYou can go and post your questions.\n\n1215\n01:00:03,820 --> 01:00:06,810\nWe monitor and answer.\n\n1216\n01:00:06,810 --> 01:00:08,740\nAside from that,\nthat's about it for this one.\n\n1217\n01:00:08,740 --> 01:00:10,980\nSo, hope you guys enjoyed the show.\n\n1218\n01:00:10,980 --> 01:00:12,930\nSigning off for ITProTV, I'm Don Pezet.\n\n1219\n01:00:12,930 --> 01:00:14,049\n>> And I'm Mike Rodrick.\n\n1220\n01:00:14,049 --> 01:00:16,069\n>> And we'll see you next time.\n\n1221\n01:00:16,069 --> 01:00:21,869\n>> [MUSIC]\n\n",
          "vimeoId": "110602518"
        },
        {
          "description": "",
          "length": "2128",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-2-ha-with-network-services-102914.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-2-ha-with-network-services-102914-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-2-ha-with-network-services-102914-sm.jpg",
          "title": "HA With Network Services",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC].\n\n2\n00:00:15,296 --> 00:00:22,379\n[SOUND].\n\n3\n00:00:22,379 --> 00:00:32,379\n[MUSIC]\n\n4\n00:00:33,628 --> 00:00:35,741\nAll right, good morning,\ngood afternoon and good evening.\n\n5\n00:00:35,741 --> 00:00:39,690\nWelcome back to another episode of\nITProTV, I'm your host Don Pezet,\n\n6\n00:00:39,690 --> 00:00:42,070\nback again with Mr.\nMike Roderick, how's it going Mike?\n\n7\n00:00:42,070 --> 00:00:43,420\n>> Very good Don, how are you doing today?\n\n8\n00:00:43,420 --> 00:00:44,810\n>> Doing awesome.\n\n9\n00:00:44,810 --> 00:00:45,660\n>> Good, good.\n\n10\n00:00:45,660 --> 00:00:49,610\n>> So we finished our multi-part\nseries on failover clusters.\n\n11\n00:00:49,610 --> 00:00:51,690\n>> There were quite\na few parts to that one.\n\n12\n00:00:51,690 --> 00:00:54,380\n>> And now we're going to continue\ntalking about high availability, but\n\n13\n00:00:54,380 --> 00:00:57,500\nwe're going to switch to something\nthat's a little more low-cost.\n\n14\n00:00:57,500 --> 00:01:04,880\nWe're going to talk about providing\nhigh availability with network services.\n\n15\n00:01:04,880 --> 00:01:06,480\nI think the official title is Plan and\n\n16\n00:01:06,480 --> 00:01:09,050\nImplement Highly Available\nNetwork Services.\n\n17\n00:01:09,050 --> 00:01:12,080\nAnd, what they're saying is that\nyou might have some services.\n\n18\n00:01:12,080 --> 00:01:16,190\nThat don't have their own\nHA system built into them.\n\n19\n00:01:16,190 --> 00:01:19,810\nSo, they don't have cluster support, and\nthey don't have replication support.\n\n20\n00:01:19,810 --> 00:01:21,003\nThey don't have anything.\n\n21\n00:01:21,003 --> 00:01:24,893\nSo, we need to find some way to make\nthem highly available even though they\n\n22\n00:01:24,893 --> 00:01:26,797\ndon't do clustering themselves.\n\n23\n00:01:26,797 --> 00:01:32,045\nAnd, one of the best ways to do that\nis with NLB, Network Load Balancing.\n\n24\n00:01:32,045 --> 00:01:36,591\nNLB lets us create a shared IP address\nthat can then point to multiple\n\n25\n00:01:36,591 --> 00:01:40,658\nhosts that are running that service,\nand if one host fails,\n\n26\n00:01:40,658 --> 00:01:45,310\nit just stops sending people there and\nit sends them to the other one.\n\n27\n00:01:45,310 --> 00:01:49,150\nAnd so it's like a poor man's cluster\nis what it's usually described as but\n\n28\n00:01:49,150 --> 00:01:52,270\nwe shouldn't equate it that\nbecause it's very useful in many\n\n29\n00:01:52,270 --> 00:01:55,080\nplaces where a cluster\nmight not be needed.\n\n30\n00:01:55,080 --> 00:02:00,630\nAnd it allows you to have cluster-like\nbehavior without the shared storage,\n\n31\n00:02:00,630 --> 00:02:02,480\nwithout all that craziness.\n\n32\n00:02:02,480 --> 00:02:06,250\nAnd it is really suitable in some\nenvironments, for particular use cases.\n\n33\n00:02:06,250 --> 00:02:09,300\n>> And you get the scalability,\nbecause you can start adding nodes, and\n\n34\n00:02:09,300 --> 00:02:12,010\neach one of those nodes can actually\nbe performing a job, whereas in our\n\n35\n00:02:12,010 --> 00:02:16,440\ncluster usually one of those nodes is\nthe owner of that particular role and\n\n36\n00:02:16,440 --> 00:02:18,710\nthen when it fails over,\nit fails over to another one so\n\n37\n00:02:18,710 --> 00:02:22,680\nyou dont get that same scalability\nwith a cluster usually.\n\n38\n00:02:22,680 --> 00:02:26,910\n>> Let's think of a scenario where\nwe might use network load balance.\n\n39\n00:02:26,910 --> 00:02:30,300\nOne, the most recent examples that I've\nworked on, I know we use it here but\n\n40\n00:02:30,300 --> 00:02:34,320\nI've used it in several places that\nI've worked over my career is with\n\n41\n00:02:34,320 --> 00:02:38,160\nremote desktop services or terminal\nservices, as it used to be called.\n\n42\n00:02:38,160 --> 00:02:41,870\nWith terminal services, somebody\nfires up a client on their computer.\n\n43\n00:02:41,870 --> 00:02:42,840\nAnd they connect to a server.\n\n44\n00:02:42,840 --> 00:02:46,660\nAnd they're given a desktop that\nhas all of their applications and\n\n45\n00:02:46,660 --> 00:02:48,810\nsoftware needed for work.\n\n46\n00:02:48,810 --> 00:02:50,450\nThe nice thing about doing that is,\n\n47\n00:02:50,450 --> 00:02:52,020\nyou don't have to install\nsoftware on their machine.\n\n48\n00:02:52,020 --> 00:02:54,590\nIf they get a new laptop,\na new desktop, you don't care.\n\n49\n00:02:54,590 --> 00:02:56,780\nBecause they remote in to\nthe centralized server.\n\n50\n00:02:56,780 --> 00:02:58,240\nIt's kind of like the old main frame days.\n\n51\n00:02:58,240 --> 00:03:01,840\nAnd when we wanna update somebody's\nsoftware, we just update it on the server,\n\n52\n00:03:01,840 --> 00:03:04,140\nand now everybody who connects\nto it has the new software.\n\n53\n00:03:04,140 --> 00:03:06,490\nSo it makes management a breeze.\n\n54\n00:03:06,490 --> 00:03:08,080\nReally nice.\n\n55\n00:03:08,080 --> 00:03:10,170\nBut the problem is that terminal servers,\n\n56\n00:03:10,170 --> 00:03:13,770\nremote desktop, they don't have\nany redundancy built into them.\n\n57\n00:03:13,770 --> 00:03:15,270\nWhen somebody connects,\nthey connect to one IP.\n\n58\n00:03:15,270 --> 00:03:18,610\nAnd if that one IP isn't available,\nit just doesn't connect.\n\n59\n00:03:19,720 --> 00:03:22,670\nAnd so we need some way to make\nthat a little more redundant.\n\n60\n00:03:22,670 --> 00:03:26,402\nIf I have more than one remote\ndesktop server, or terminal server,\n\n61\n00:03:26,402 --> 00:03:30,787\nif I have more than one of those guys, how\ndo I distribute my users across that and\n\n62\n00:03:30,787 --> 00:03:34,070\nprovide redundancy and\nnetwork load balancing does that.\n\n63\n00:03:34,070 --> 00:03:36,260\nLet me just show you a quick diagram here.\n\n64\n00:03:36,260 --> 00:03:39,997\nLet's say that I've got a client and\nthe client needs to connect to a terminal\n\n65\n00:03:39,997 --> 00:03:42,430\nserver so\nthat terminal server might be node one.\n\n66\n00:03:42,430 --> 00:03:44,670\nAnd so they remote in and\nconnect to node one.\n\n67\n00:03:44,670 --> 00:03:47,590\nBut so do 30 other people, and so\nthe server starts getting busy.\n\n68\n00:03:47,590 --> 00:03:49,700\nAnd I wanna add another server.\n\n69\n00:03:49,700 --> 00:03:52,870\nMaybe I'm adding another server to\nhandle performance, I'm scaling out.\n\n70\n00:03:52,870 --> 00:03:54,080\nRight?\nTo handle more users.\n\n71\n00:03:54,080 --> 00:03:55,190\nOr maybe I just want redundancy.\n\n72\n00:03:55,190 --> 00:03:57,580\nI want a second server in\ncase the first one fails.\n\n73\n00:03:57,580 --> 00:04:00,080\nFor whatever reason,\nI wanna add more servers.\n\n74\n00:04:00,080 --> 00:04:04,470\nWith network load balancing,\nIt provides zero synchronization.\n\n75\n00:04:04,470 --> 00:04:06,910\nThere's no synchronization\nbetween these nodes.\n\n76\n00:04:06,910 --> 00:04:10,120\nSo I need to go and\nset these up to be identical, right?\n\n77\n00:04:10,120 --> 00:04:12,940\nSame software loaded,\nsame basic functions.\n\n78\n00:04:12,940 --> 00:04:16,325\nIf these are web servers, I just need\nto copy my web page to each one, but\n\n79\n00:04:16,325 --> 00:04:19,325\na terminal server and a web server for\n\n80\n00:04:19,325 --> 00:04:22,325\nexample, we don't change their\ncontent very often at all.\n\n81\n00:04:22,325 --> 00:04:24,645\nWe normally set them up and\nthen they just run, right?\n\n82\n00:04:24,645 --> 00:04:26,945\nThey've got the software we need or\nwhatever.\n\n83\n00:04:26,945 --> 00:04:31,185\nIf we apply an update to a software,\nwe need to apply the update to each node.\n\n84\n00:04:31,185 --> 00:04:34,715\nSo all I really need in that\nenvironment is a way to tell the user,\n\n85\n00:04:34,715 --> 00:04:38,120\nhey, if you can't connect to this first\none, connect to the second one, or\n\n86\n00:04:38,120 --> 00:04:39,620\nthe third one, or the fourth one.\n\n87\n00:04:39,620 --> 00:04:42,695\nOr even better,\nit'd be nice if we had a system that said,\n\n88\n00:04:42,695 --> 00:04:45,760\n25% of our users go to Node 1.\n\n89\n00:04:45,760 --> 00:04:50,080\nAnd 25% to Node 2, and\n25 to Node 3, and 25% to Node 4.\n\n90\n00:04:50,080 --> 00:04:56,753\nAnd if Node 4 fails, then redistribute so\nit's now 33% here, 33% here, 33% here.\n\n91\n00:04:56,753 --> 00:05:00,003\nDividing our users up amongst\nthe available servers.\n\n92\n00:05:00,003 --> 00:05:01,770\nNow, there's hardware\nboxes that'll do this.\n\n93\n00:05:01,770 --> 00:05:06,160\nYou can go out and buy an F5 big IP box,\nor something like that for 20 or 30 grand,\n\n94\n00:05:06,160 --> 00:05:07,190\nand it will do that just fine.\n\n95\n00:05:08,740 --> 00:05:11,630\nBut, in the Windows operating system,\nwe have network load balancing and\n\n96\n00:05:11,630 --> 00:05:12,480\nit does it too.\n\n97\n00:05:12,480 --> 00:05:13,810\nI know we've covered it in other shows,\nbut\n\n98\n00:05:13,810 --> 00:05:17,010\nI kind of just wanted to\nrecap the way that functions.\n\n99\n00:05:17,010 --> 00:05:20,410\nIt functions by creating\na shared IP address.\n\n100\n00:05:21,540 --> 00:05:25,320\nOne IP address that is shared\namongst all these nodes, so\n\n101\n00:05:25,320 --> 00:05:30,520\nthe client is connected to that one IP and\nthen through various mechanisms.\n\n102\n00:05:30,520 --> 00:05:35,090\nThe nodes will see that communication and\nthen divide it up, okay?\n\n103\n00:05:35,090 --> 00:05:38,968\nWell, those mechanisms are what we need\nto understand as part of our design.\n\n104\n00:05:38,968 --> 00:05:42,520\nImplementing NLB is really easy,\nwe did that, gosh,\n\n105\n00:05:42,520 --> 00:05:45,580\nI don't remember which show anymore oh,\none of the early MCSA ones.\n\n106\n00:05:45,580 --> 00:05:49,370\nSo you've been exposed to network\nload balancing prior to this but,\n\n107\n00:05:49,370 --> 00:05:52,180\non the design side, there's a few\nconsiderations we have to worry about.\n\n108\n00:05:54,180 --> 00:05:55,660\nFirst off, there's the configuration side.\n\n109\n00:05:55,660 --> 00:05:58,370\nHow do we make sure these nodes\nare all configured the same?\n\n110\n00:05:58,370 --> 00:06:00,460\nWell if we use something like\nSystem Center Configuration Manager it\n\n111\n00:06:00,460 --> 00:06:01,247\ncan do that for us, right?\n\n112\n00:06:01,247 --> 00:06:02,535\nI deploy these nodes.\n\n113\n00:06:02,535 --> 00:06:05,455\nIf I need three more,\nwe can just deploy three more.\n\n114\n00:06:05,455 --> 00:06:07,195\nThey're configured identical,\nand off you go.\n\n115\n00:06:07,195 --> 00:06:08,885\nSo that's nice and easy.\n\n116\n00:06:08,885 --> 00:06:11,275\nWe can actually do that from\ninside of the SCVMM also.\n\n117\n00:06:11,275 --> 00:06:14,765\nIt handles doing clones of VMs,\nand so you can create\n\n118\n00:06:14,765 --> 00:06:19,495\nwhat's called a scale out application, and\nthat'll spawn more front ends as needed.\n\n119\n00:06:19,495 --> 00:06:21,505\nAnd you can even have it dynamic,\nwhere it adds more,\n\n120\n00:06:21,505 --> 00:06:23,530\nremoves them on an ongoing basis.\n\n121\n00:06:25,570 --> 00:06:28,100\nSo the only other thing I really need\nto think about is the mechanism that\n\n122\n00:06:28,100 --> 00:06:29,690\ndrives this.\n\n123\n00:06:29,690 --> 00:06:31,930\nI said that when the client connects,\nit connects to the shared IP.\n\n124\n00:06:33,320 --> 00:06:40,680\nWell, that shared IP can function in\none of two modes, unicast or multicast.\n\n125\n00:06:40,680 --> 00:06:44,730\nEach one has their pros and cons,\nand there's different benefits or\n\n126\n00:06:44,730 --> 00:06:46,990\nreasons why we might go\nwith one over the other.\n\n127\n00:06:46,990 --> 00:06:49,380\nSo we need to make sure we know\nwhich one to use, and when.\n\n128\n00:06:50,800 --> 00:06:53,810\nThe default mode is the unicast mode.\n\n129\n00:06:53,810 --> 00:06:56,550\nYour client generates a unicast packet.\n\n130\n00:06:56,550 --> 00:07:01,080\nSo a packet that has one source,\none destination and it goes to that IP.\n\n131\n00:07:01,080 --> 00:07:05,330\nAnd that IP has a virtual MAC address.\n\n132\n00:07:05,330 --> 00:07:07,753\nA MAC address that was created\nwhen we installed NLB.\n\n133\n00:07:07,753 --> 00:07:10,753\nIt's made up,\nit's pulled out of a hat, okay?\n\n134\n00:07:10,753 --> 00:07:14,495\nAnd that's the MAC address that\nyour client is communicating to.\n\n135\n00:07:14,495 --> 00:07:15,461\nAnd the switch knows that.\n\n136\n00:07:15,461 --> 00:07:18,961\nIt sees that MAC address, and\nthe communication comes in.\n\n137\n00:07:18,961 --> 00:07:21,835\nYour nodes will all see\nthat communication.\n\n138\n00:07:22,895 --> 00:07:26,515\nThey all see it, but\nthey don't all answer.\n\n139\n00:07:26,515 --> 00:07:28,135\nThey take turns.\n\n140\n00:07:28,135 --> 00:07:28,895\nIt's rotating through.\n\n141\n00:07:28,895 --> 00:07:31,885\nThat's what NLB does, it balances.\n\n142\n00:07:31,885 --> 00:07:34,490\nSo if one person is really busy,\nthey stop answering.\n\n143\n00:07:34,490 --> 00:07:36,860\nAnd if one person is not busy at all,\nthey start answering.\n\n144\n00:07:36,860 --> 00:07:38,270\nRight?\nThey're each taking turns to\n\n145\n00:07:38,270 --> 00:07:39,120\ndistribute the load.\n\n146\n00:07:40,160 --> 00:07:44,567\nWhen they receive that communication,\nthey then respond, but when they respond,\n\n147\n00:07:44,567 --> 00:07:46,753\nthey modify the Mac address a little bit.\n\n148\n00:07:46,753 --> 00:07:51,003\nYou know, a standard MAC address\nlooks something like this.\n\n149\n00:07:51,003 --> 00:07:55,424\nSo it might be 0, some crazy fonts.\n\n150\n00:07:55,424 --> 00:08:01,464\nSo it might be something like,\nthere we go,\n\n151\n00:08:01,464 --> 00:08:08,832\n0AF1.CD81.1234, something like this.\n\n152\n00:08:08,832 --> 00:08:11,970\nThat's the what a MAC address look like.\n\n153\n00:08:11,970 --> 00:08:14,031\nThe way Microsoft writes it\nis with a bunch of colons.\n\n154\n00:08:14,031 --> 00:08:17,096\n>> I was going to say, you can tell your\nCISCO people from your Microsoft people.\n\n155\n00:08:17,096 --> 00:08:19,916\n>> By how they write a MAC address?\n\n156\n00:08:19,916 --> 00:08:23,272\n[LAUGH] All right so there, so that's\nkind of how Microsoft would write it, or\n\n157\n00:08:23,272 --> 00:08:24,680\nsometimes they do the hyphens.\n\n158\n00:08:24,680 --> 00:08:25,790\n>> The dashes yeah.\n\n159\n00:08:25,790 --> 00:08:26,770\n>> Whatever.\n\n160\n00:08:26,770 --> 00:08:28,820\nSo there's a MAC address.\n\n161\n00:08:28,820 --> 00:08:33,130\nLet's say that that is the virtual MAC\naddress associated with this virtual IP.\n\n162\n00:08:33,130 --> 00:08:34,960\nSo that's kind of what your\nclient is reaching out to.\n\n163\n00:08:34,960 --> 00:08:38,330\nWell, really the first time your client\ngoes to talk it sends a broadcast out and\n\n164\n00:08:38,330 --> 00:08:40,260\nsays hey what is the MAC address?\n\n165\n00:08:40,260 --> 00:08:43,950\nAnd so one these nodes is going to respond\nand it takes this virtual MAC address and\n\n166\n00:08:43,950 --> 00:08:46,570\nit modifies the last two digits, okay.\n\n167\n00:08:46,570 --> 00:08:49,530\nIt takes those last two digits,\nand if it's node number one,\n\n168\n00:08:49,530 --> 00:08:51,310\nit makes those digits 01.\n\n169\n00:08:51,310 --> 00:08:54,260\nAnd if it's node number five,\nit makes them 05.\n\n170\n00:08:54,260 --> 00:08:56,280\nSo, you can actually look\nat those MAC addresses,\n\n171\n00:08:56,280 --> 00:08:58,870\nif you run a network sniffer,\nand based on the last two digits,\n\n172\n00:08:58,870 --> 00:09:01,065\nyou can figure out which\nnode it is that's talking.\n\n173\n00:09:01,065 --> 00:09:02,550\nCause they all show as having the same IP.\n\n174\n00:09:02,550 --> 00:09:03,820\nHow do you know who's talking?\n\n175\n00:09:03,820 --> 00:09:05,980\nIt's those last two digits that change.\n\n176\n00:09:05,980 --> 00:09:08,640\nThat's what Unicast does and\nit has to do that for two reasons.\n\n177\n00:09:08,640 --> 00:09:09,340\nAll right?\n\n178\n00:09:09,340 --> 00:09:12,620\nReason number one is\nwhen the client responds,\n\n179\n00:09:12,620 --> 00:09:14,630\nwe need the client always\nresponding to the same node.\n\n180\n00:09:14,630 --> 00:09:16,340\nRight?\nThey started on one node they need to stay\n\n181\n00:09:16,340 --> 00:09:17,680\non that node, right?\n\n182\n00:09:17,680 --> 00:09:21,720\nSo they're going to cache that arc\nrequest with that different two digits,\n\n183\n00:09:21,720 --> 00:09:23,860\nand now they know who to talk to,\nall right?\n\n184\n00:09:23,860 --> 00:09:25,650\nSo that's reason number one.\n\n185\n00:09:25,650 --> 00:09:30,830\nReason number two, these four nodes\nare all plugged into the same switch.\n\n186\n00:09:30,830 --> 00:09:34,300\nAnd the switch assumes that a Mac\naddress is tied to one network card.\n\n187\n00:09:34,300 --> 00:09:36,800\nAnd a network card can only\nbe plugged into one port.\n\n188\n00:09:36,800 --> 00:09:39,010\nIf I see the same Mac address\non more than one port,\n\n189\n00:09:40,190 --> 00:09:42,708\nthe most likely scenario\nis that we have a loop.\n\n190\n00:09:42,708 --> 00:09:43,931\n>> Spoofing, yeah. [CROSSTALK], yeah.\n>> It could be spoofing,\n\n191\n00:09:43,931 --> 00:09:45,834\nright, so we set off our attack stuff.\n\n192\n00:09:45,834 --> 00:09:49,000\nOr it could be a loop, looped cables.\n\n193\n00:09:49,000 --> 00:09:53,290\nSo a lot of your good switches,\nyour Cisco, Juniper,\n\n194\n00:09:53,290 --> 00:09:56,883\nHP, they'll block loops, and still shut\noff ports and those will go offline.\n\n195\n00:09:56,883 --> 00:09:58,320\n>> [LAUGH]\n>> And you don't want that.\n\n196\n00:09:58,320 --> 00:10:01,990\nSo in Unicast mode they\nhandle that by making sure to\n\n197\n00:10:01,990 --> 00:10:04,200\nmodify those last two digits.\n\n198\n00:10:04,200 --> 00:10:08,252\nThat's the way Unicast communications\nwork, and that's ideal for most people.\n\n199\n00:10:08,252 --> 00:10:09,610\nAll right?\n\n200\n00:10:09,610 --> 00:10:11,800\nThere's a little bit of\na negative with this though.\n\n201\n00:10:11,800 --> 00:10:15,190\nYour client caches that arc look up.\n\n202\n00:10:15,190 --> 00:10:17,250\nCaches that Mac address\nin their arc cable.\n\n203\n00:10:17,250 --> 00:10:20,250\nIf a node goes down,\nthey still have a cache and\n\n204\n00:10:20,250 --> 00:10:22,470\nthe default cache in\nWindows is five minutes.\n\n205\n00:10:22,470 --> 00:10:24,990\nSo, if the node goes down,\n\n206\n00:10:24,990 --> 00:10:28,380\nthat client could take up to five minutes\nto then move over to the other node.\n\n207\n00:10:29,470 --> 00:10:31,490\nAll your new people that connect are fine.\n\n208\n00:10:31,490 --> 00:10:33,570\nThey'll just go to the remaining nodes.\n\n209\n00:10:33,570 --> 00:10:36,170\nAnd your existing people on the other\nnodes, like node two, three, and\n\n210\n00:10:36,170 --> 00:10:38,290\nfour, they'll stay up and happy.\n\n211\n00:10:38,290 --> 00:10:41,530\nBut anybody who is currently\nconnected to Node 1, when it fails,\n\n212\n00:10:41,530 --> 00:10:43,170\nit could be five minutes before it fails.\n\n213\n00:10:44,290 --> 00:10:49,050\nSo this is the default configuration,\nbecause it's compatible everywhere.\n\n214\n00:10:49,050 --> 00:10:51,980\nThis one always works, and so\nthat's why Microsoft sticks with it.\n\n215\n00:10:53,230 --> 00:10:57,820\nBut if you want to save even that five\nminutes to have faster fail over,\n\n216\n00:10:57,820 --> 00:11:03,149\nthere is a second mode, okay, and\nthat second mode is the Multicast mode.\n\n217\n00:11:03,149 --> 00:11:08,960\nIn Multicast, you also have a single\naddress like this, all right?\n\n218\n00:11:08,960 --> 00:11:14,100\nBut when the client communicates in,\nit's going to hit that IP address,\n\n219\n00:11:14,100 --> 00:11:18,200\nand the routers that are in\nyour environment, and\n\n220\n00:11:18,200 --> 00:11:20,150\nthe switches that are in your environment.\n\n221\n00:11:20,150 --> 00:11:23,610\nThey'll see this IP in what\nwould normally be a Unicast, and\n\n222\n00:11:23,610 --> 00:11:25,950\nwill register that as a Multicast.\n\n223\n00:11:25,950 --> 00:11:28,670\nAnd then, a Multicast, it's one IP, and\n\n224\n00:11:28,670 --> 00:11:31,480\nmore than one person can\nhear the traffic on it.\n\n225\n00:11:31,480 --> 00:11:34,410\nAnd so, they'll all hear the traffic,\nand then, they can start responding.\n\n226\n00:11:34,410 --> 00:11:37,110\nThey can join in to that\nMulticast communication, and\n\n227\n00:11:37,110 --> 00:11:38,800\nrespond back to the client.\n\n228\n00:11:38,800 --> 00:11:39,980\nThe client only sees one IP.\n\n229\n00:11:39,980 --> 00:11:43,070\nThe client only sees one MAC address.\n\n230\n00:11:43,070 --> 00:11:47,230\nAnd now, if node 1 fails, the other\nguys are still seeing the traffic.\n\n231\n00:11:47,230 --> 00:11:51,180\nEven though it's coming in destined for\nthis old host before.\n\n232\n00:11:51,180 --> 00:11:53,290\nSince it's all the same MAC,\nthey can see it and they can respond.\n\n233\n00:11:53,290 --> 00:11:55,540\nYou get instant fail over, right?\n\n234\n00:11:55,540 --> 00:11:57,900\nSo Multicast is faster.\n\n235\n00:11:57,900 --> 00:12:03,670\nThe problem is,\nwe're mapping a normal IP to a Multicast.\n\n236\n00:12:03,670 --> 00:12:09,590\nYou can usually spot a Multicast because\nthe first number is between 224 and 240.\n\n237\n00:12:09,590 --> 00:12:14,020\nWell that number is not in that range.\n\n238\n00:12:14,020 --> 00:12:16,700\nSo this is not a Multicast\naddress normally.\n\n239\n00:12:16,700 --> 00:12:19,100\nBut NLB can use it that way.\n\n240\n00:12:19,100 --> 00:12:21,450\nSome routers, hate that.\n\n241\n00:12:21,450 --> 00:12:22,700\nAbsolutely hate that.\n\n242\n00:12:22,700 --> 00:12:23,820\nAnd it won't work.\n\n243\n00:12:23,820 --> 00:12:24,430\nAll right.\n\n244\n00:12:24,430 --> 00:12:27,340\nAnd some switches don't recognize IGMP,\n\n245\n00:12:27,340 --> 00:12:29,810\nwhich is the protocol\nthat manages Multicast.\n\n246\n00:12:29,810 --> 00:12:31,250\nAnd, they hate that.\n\n247\n00:12:31,250 --> 00:12:33,630\nAnd so Multicast doesn't always work.\n\n248\n00:12:33,630 --> 00:12:37,970\nIt's a great solution, it works really\nwell if you can use it you should, but\n\n249\n00:12:37,970 --> 00:12:39,180\nmost people can't.\n\n250\n00:12:39,180 --> 00:12:39,700\nRight.\n\n251\n00:12:39,700 --> 00:12:42,980\nAnd there's also problems if you have more\nthan one switch involved you know for\n\n252\n00:12:42,980 --> 00:12:46,210\nredundancy that kind of thing, there's\nother little ports that happen there.\n\n253\n00:12:46,210 --> 00:12:50,770\nSo when Multicast sounds great,\nit's not always possible, and that's why\n\n254\n00:12:50,770 --> 00:12:54,770\nUnicast is the default and that's\nwhere most of us will stay, all right?\n\n255\n00:12:54,770 --> 00:12:58,280\nJust remember with Unicast, that you\ncan have a little bit of an outage for\n\n256\n00:12:58,280 --> 00:13:01,040\nclients that were currently\nconnected to the node that failed.\n\n257\n00:13:02,910 --> 00:13:05,950\nSo that's one big thing that we\nhave to think about with NLB.\n\n258\n00:13:05,950 --> 00:13:08,328\nAnother thing is synchronizing our data,\nright?\n\n259\n00:13:08,328 --> 00:13:11,170\nIt's the same joke I did\nin the last episode.\n\n260\n00:13:11,170 --> 00:13:14,690\nHey Mike, what tools does Microsoft give\nus to synchronize our data between nodes?\n\n261\n00:13:14,690 --> 00:13:16,710\n>> It's really\n>> Oh, wait, nothing.\n\n262\n00:13:16,710 --> 00:13:17,370\nAbsolutely nothing.\n\n263\n00:13:19,000 --> 00:13:22,090\n>> So, depending on your software,\nyou've got to find what works, right?\n\n264\n00:13:22,090 --> 00:13:26,470\nIf these are going to be web servers, and\nyou need to make a change to your webpage,\n\n265\n00:13:26,470 --> 00:13:28,250\nyou want that change to\ngo across all of them.\n\n266\n00:13:28,250 --> 00:13:32,236\nSo, you can pick something that you want,\nthere's Microsoft SyncToy,\n\n267\n00:13:32,236 --> 00:13:36,705\nthere's RepliStor,\nthere's Sunbelt Software has one,\n\n268\n00:13:36,705 --> 00:13:38,915\nI can't never remember the name of it.\n\n269\n00:13:38,915 --> 00:13:39,585\nThere's a couple of\n\n270\n00:13:39,585 --> 00:13:42,345\ndifferent software packages that\nare out there that can do it.\n\n271\n00:13:42,345 --> 00:13:44,835\nYou can fire up Cygwin and use rsync.\n\n272\n00:13:44,835 --> 00:13:46,485\nI mean, you can do whatever you want.\n\n273\n00:13:46,485 --> 00:13:48,235\nYou can manually copy them,\nfor that matter.\n\n274\n00:13:48,235 --> 00:13:50,460\nCopy the webpage over, just copy.\n\n275\n00:13:50,460 --> 00:13:54,130\nSo there's different things that you can\ndo to get that data the same across them.\n\n276\n00:13:54,130 --> 00:13:56,860\nYou can use DFS to do replications.\n\n277\n00:13:56,860 --> 00:13:58,710\nOr FRS if they're older servers.\n\n278\n00:13:58,710 --> 00:14:00,920\nSo there's different\nways you can replicate.\n\n279\n00:14:00,920 --> 00:14:04,460\nBut basically you put something in place\nso that if all got the same data, and\n\n280\n00:14:04,460 --> 00:14:07,830\nthat way our clients can fail\nover between them, all right?\n\n281\n00:14:07,830 --> 00:14:12,010\nSo replication is one part, but there's\none other thing we need to remember, and\n\n282\n00:14:12,010 --> 00:14:13,100\nthat's state.\n\n283\n00:14:14,150 --> 00:14:16,830\nWhen a user connects,\nthey're creating a state.\n\n284\n00:14:17,880 --> 00:14:20,440\nAnd when it's something like a simple\nweb server we really don't care about it\n\n285\n00:14:20,440 --> 00:14:21,620\nmuch, right?\n\n286\n00:14:21,620 --> 00:14:24,520\nSo they come in and they connect to\nnode one, they get our home page.\n\n287\n00:14:24,520 --> 00:14:25,840\nGreat.\n\n288\n00:14:25,840 --> 00:14:30,840\nNode 1 fails, they connect again and they\ngo to Node 3, and they get our home page.\n\n289\n00:14:30,840 --> 00:14:31,740\nNo big deal, right?\n\n290\n00:14:31,740 --> 00:14:34,840\nSo we don't care, for a static web page.\n\n291\n00:14:34,840 --> 00:14:36,620\nBut what if it's a dynamic web page?\n\n292\n00:14:36,620 --> 00:14:38,680\nWhat if they access Node 1,\nand they log in?\n\n293\n00:14:38,680 --> 00:14:40,990\nThey put in their username and\npassword, and they go through and\n\n294\n00:14:40,990 --> 00:14:44,010\nthey start picking some items and\nputting them in their shopping cart.\n\n295\n00:14:44,010 --> 00:14:45,910\nAnd then Node 1 fails.\n\n296\n00:14:45,910 --> 00:14:48,250\nNow, they come in and connect to Node 3.\n\n297\n00:14:48,250 --> 00:14:50,910\nAnd they're logged out and\ntheir shopping cart is empty.\n\n298\n00:14:50,910 --> 00:14:53,310\nAnd they got to log in again, right?\n\n299\n00:14:53,310 --> 00:14:54,560\nThey lost their state.\n\n300\n00:14:54,560 --> 00:14:57,870\nTheir session with those servers in the\nstate that had of already being logged in.\n\n301\n00:14:57,870 --> 00:14:58,910\nThey lost that.\n\n302\n00:14:58,910 --> 00:14:59,760\nAll right?\n\n303\n00:14:59,760 --> 00:15:01,340\nSo we need a way to manage that.\n\n304\n00:15:01,340 --> 00:15:03,460\nTo make sure that they\nstay on the same server or\n\n305\n00:15:03,460 --> 00:15:04,669\nthat we can handle them when they move.\n\n306\n00:15:06,370 --> 00:15:08,550\nWith a web server we normally\ndo this through cookies.\n\n307\n00:15:08,550 --> 00:15:11,180\nWhoever your web developer is,\nwhen they write that application,\n\n308\n00:15:11,180 --> 00:15:13,040\nthey'll store a cookie on the client.\n\n309\n00:15:13,040 --> 00:15:15,850\nSo no matter which node they end up\non we can recognize who they are and\n\n310\n00:15:15,850 --> 00:15:16,940\nwhat they were doing.\n\n311\n00:15:16,940 --> 00:15:18,790\nThat's what cookies do.\n\n312\n00:15:18,790 --> 00:15:20,540\nBut let's say it's from a desktop.\n\n313\n00:15:20,540 --> 00:15:23,750\nLet's say they logged in on node 1,\nand they fired up Microsoft Word,\n\n314\n00:15:23,750 --> 00:15:26,720\nand they were halfway through writing\nan article and they got disconnected.\n\n315\n00:15:26,720 --> 00:15:27,390\nMm Hmm.\n\n316\n00:15:27,390 --> 00:15:30,190\n>> When they reconnect,\nwe need to get them to node 1.\n\n317\n00:15:30,190 --> 00:15:33,540\nSo, we need to find some\nway to manage that.\n\n318\n00:15:33,540 --> 00:15:35,610\nFor remote desktop we have\na very specific tool.\n\n319\n00:15:35,610 --> 00:15:38,290\nThere's the remote desktop session broker.\n\n320\n00:15:38,290 --> 00:15:41,610\nAnd the session broker is a little service\nthat runs on all of your nodes, and\n\n321\n00:15:41,610 --> 00:15:43,320\nthey talk to each other.\n\n322\n00:15:43,320 --> 00:15:46,694\nAnd they talk to each other and let\neach other know what sessions they have,\n\n323\n00:15:46,694 --> 00:15:47,942\nwhat users are connected.\n\n324\n00:15:47,942 --> 00:15:51,582\nSo if a user was on Node 1 and they get\ndisconnected and they come back in and\n\n325\n00:15:51,582 --> 00:15:55,221\nthey get Node 3, Node 3 will say oh,\nyou're supposed to be on Node 1 and\n\n326\n00:15:55,221 --> 00:15:58,558\nit will forward them over and\nget them put back onto the right node.\n\n327\n00:15:58,558 --> 00:16:01,972\nThat's a specific function\nof remote desktop services.\n\n328\n00:16:01,972 --> 00:16:04,730\nSo, that doesn't work with a web server.\n\n329\n00:16:04,730 --> 00:16:06,030\nSo each solution,\n\n330\n00:16:06,030 --> 00:16:09,890\neach service that you use NLB with, you\ngotta find a different way to handle that.\n\n331\n00:16:09,890 --> 00:16:13,630\nIf state is important,\nstate's not always important, all right?\n\n332\n00:16:13,630 --> 00:16:16,982\nSo that's another consideration that we\nhave with NLB that we have to think about.\n\n333\n00:16:16,982 --> 00:16:20,840\nAll right.\n\n334\n00:16:20,840 --> 00:16:23,670\nThe last thing that Microsoft\ncalls out in this objective, and\n\n335\n00:16:23,670 --> 00:16:26,614\nthis is one of the shorter objectives.\n\n336\n00:16:26,614 --> 00:16:29,210\nThe last thing they call out\nis that we can integrate NLB\n\n337\n00:16:30,280 --> 00:16:33,570\nright into\nthe System Center Virtual Machine Manager.\n\n338\n00:16:33,570 --> 00:16:36,550\nYou can make it when you\ndeploy an application\n\n339\n00:16:36,550 --> 00:16:40,010\nthat It will automatically\nhave NLB as a part of it.\n\n340\n00:16:40,010 --> 00:16:43,040\nNow, in the SEVMM, we're normally\ndealing with virtual machines.\n\n341\n00:16:43,040 --> 00:16:44,819\nYou deploy independent virtual machines,\nbut\n\n342\n00:16:44,819 --> 00:16:48,740\nwhere it's real power comes is\nwhen you map an application.\n\n343\n00:16:48,740 --> 00:16:52,120\nAn application might consist\nof more than one server.\n\n344\n00:16:52,120 --> 00:16:55,410\nI might have a web application that\nhas a web server front-end and\n\n345\n00:16:55,410 --> 00:16:56,821\na database back-end.\n\n346\n00:16:56,821 --> 00:16:57,360\nRight?\n\n347\n00:16:57,360 --> 00:16:59,430\nAnd so I can create that application so\nwhen I deploy it,\n\n348\n00:16:59,430 --> 00:17:00,920\nit deploys two virtual machines.\n\n349\n00:17:02,200 --> 00:17:04,730\nAnd I can configure that\napplication to be scalable.\n\n350\n00:17:04,730 --> 00:17:08,510\nSo I can say, \"Hey, if it gets really\nbusy,\" Spin up another front end, or\n\n351\n00:17:08,510 --> 00:17:09,780\na third front end, or a fourth front end.\n\n352\n00:17:09,780 --> 00:17:12,200\nI can define that stuff so\nit can start to branch out and\n\n353\n00:17:12,200 --> 00:17:14,040\nbuild these really cool applications.\n\n354\n00:17:14,040 --> 00:17:16,490\nThat's some of the awesome\nstuff that SCVMM can do.\n\n355\n00:17:16,490 --> 00:17:18,522\nWell, you can tie NLB into that also.\n\n356\n00:17:18,522 --> 00:17:19,620\nAll right.\n\n357\n00:17:19,620 --> 00:17:22,760\nNow that's something we haven't seen in\nany of the other shows, so I do wanna do\n\n358\n00:17:22,760 --> 00:17:25,830\na demonstration of that, kinda how\nit works and what you can expect.\n\n359\n00:17:25,830 --> 00:17:27,910\nSo, let me show you that process.\n\n360\n00:17:27,910 --> 00:17:29,190\nIt is kind of an interesting one.\n\n361\n00:17:29,190 --> 00:17:31,258\nSo let me jump over to my lab machine.\n\n362\n00:17:31,258 --> 00:17:33,152\nAll right.\n\n363\n00:17:33,152 --> 00:17:37,001\nHere I am in\nthe System Center Virtual Machine Manager.\n\n364\n00:17:37,001 --> 00:17:37,790\nAll right.\n\n365\n00:17:37,790 --> 00:17:43,910\nAnd what I want to do is first I need to\nlet it know that I'm gonna be doing NLB.\n\n366\n00:17:43,910 --> 00:17:47,020\nAnd that I wanna make this\na part of my environment.\n\n367\n00:17:47,020 --> 00:17:51,790\nThe main thing that NLB needs\nis a virtual IP address, okay?\n\n368\n00:17:51,790 --> 00:17:55,010\nThey call them VIPs inside of a CVMM.\n\n369\n00:17:55,010 --> 00:17:58,790\nSo I need to create a VIP,\na virtual IP, for it to use.\n\n370\n00:17:58,790 --> 00:18:02,390\nAnd the VIP actually comes\nfrom a pool of addresses.\n\n371\n00:18:02,390 --> 00:18:04,980\nSo, my first step is to create\nthat pool of addresses,\n\n372\n00:18:04,980 --> 00:18:07,610\nkinda like a fake DHCP server.\n\n373\n00:18:07,610 --> 00:18:10,990\nBecause as I spawn new\ninstances of this application,\n\n374\n00:18:10,990 --> 00:18:12,860\nthey each need to be able\nto get an IP address.\n\n375\n00:18:12,860 --> 00:18:14,440\nAnd so I have to create a pool.\n\n376\n00:18:14,440 --> 00:18:16,143\nIf you're only going to do it once,\nyou just do it by hand.\n\n377\n00:18:16,143 --> 00:18:17,475\nRight?\nThis is something we're going to do over\n\n378\n00:18:17,475 --> 00:18:18,650\nand over and over again.\n\n379\n00:18:18,650 --> 00:18:23,460\nSo we created a pool of IP's and\nthen we create this VIP, this item,\n\n380\n00:18:23,460 --> 00:18:27,040\nthis virtual IP that we'll be\nable to attach to an application.\n\n381\n00:18:27,040 --> 00:18:29,450\nAnd then whenever we spin up the\napplication it'll know to grab an IP from\n\n382\n00:18:29,450 --> 00:18:32,362\nthe pool, configure network load\nbalancing and put it in place.\n\n383\n00:18:32,362 --> 00:18:33,590\nAll right.\n\n384\n00:18:33,590 --> 00:18:35,110\nSo let's see that process.\n\n385\n00:18:35,110 --> 00:18:37,296\nI'm gonna start up by creating that pool,\nall right.\n\n386\n00:18:37,296 --> 00:18:41,210\nSo I need to go down here into my\nfabric which is where I already am.\n\n387\n00:18:41,210 --> 00:18:42,150\nAnd I'll go under networking,\n\n388\n00:18:42,150 --> 00:18:46,184\nand you'll see all of these different\ncomponents that are inside of here.\n\n389\n00:18:46,184 --> 00:18:47,840\nLike there's my VIP templates, right?\n\n390\n00:18:47,840 --> 00:18:53,020\nAnd that's actually where I'm going,\nand inside of my VIP templates,\n\n391\n00:18:53,020 --> 00:18:56,890\nI'll see up here where I\ncan create an IP pool.\n\n392\n00:18:56,890 --> 00:19:00,508\nI can create a Macadress pool also,\nbut I'm not really worried about that.\n\n393\n00:19:00,508 --> 00:19:01,510\nMacadress isn't unroutable.\n\n394\n00:19:01,510 --> 00:19:05,370\nIt can just generate those on it's own so\nI'm not going to worry about it.\n\n395\n00:19:05,370 --> 00:19:08,860\nBut IP addresses, it's gotta know\nthe IP range that this falls in.\n\n396\n00:19:08,860 --> 00:19:13,050\nIt can't just figure that out on its own,\nso I'm gonna create an IP pool.\n\n397\n00:19:13,050 --> 00:19:14,460\nNow, IP pools can be used for\n\n398\n00:19:14,460 --> 00:19:19,105\nthings other than NLB, so\nthis could be used for other stuff, and\n\n399\n00:19:19,105 --> 00:19:24,645\nin here we'll have the option to reserve\nsome of the IPs specifically for VIP use.\n\n400\n00:19:24,645 --> 00:19:26,115\nOkay, so what we'll see out here.\n\n401\n00:19:26,115 --> 00:19:26,965\nSo I'm gonna create this,\n\n402\n00:19:26,965 --> 00:19:31,286\nand let's just say this is a,\nI'll call it Webapp1, right?\n\n403\n00:19:31,286 --> 00:19:32,295\nSo it's gonna be Webapp1.\n\n404\n00:19:32,295 --> 00:19:36,375\nIP pool.\nSo we're just gonna give it a name so\n\n405\n00:19:36,375 --> 00:19:38,530\nI can recognize it, all right.\n\n406\n00:19:38,530 --> 00:19:40,740\nAnd then it's gonna ask for\nthe logical network that it connects to.\n\n407\n00:19:40,740 --> 00:19:43,250\nYou may have more than one network\nin your environment, right?\n\n408\n00:19:43,250 --> 00:19:44,420\nThese are the virtual networks on mine.\n\n409\n00:19:44,420 --> 00:19:46,470\nI'm gonna pick my corporate network.\n\n410\n00:19:46,470 --> 00:19:48,760\nYou can load balance on the front\nend where your customers see it but\n\n411\n00:19:48,760 --> 00:19:51,420\nyou can also load balance on the back\nend if it's like internal services.\n\n412\n00:19:51,420 --> 00:19:53,230\nSo you got to pick\nthe appropriate network.\n\n413\n00:19:55,520 --> 00:20:00,210\nThen we specify the site that it's\nattached to, in my case, Contoso Corp.\n\n414\n00:20:00,210 --> 00:20:02,530\nIt already knows the subnet so\nI'm not gonna mess with that.\n\n415\n00:20:02,530 --> 00:20:04,350\nBut if we had different V Lans, or\n\n416\n00:20:04,350 --> 00:20:07,540\ndifferent hosts we wanted to limit\nto we could specify that in here.\n\n417\n00:20:08,860 --> 00:20:09,360\nAll right?\n\n418\n00:20:10,910 --> 00:20:11,660\nThen we set the range.\n\n419\n00:20:11,660 --> 00:20:14,970\nAnd the range you just do a beginning and\nan ending IP address.\n\n420\n00:20:14,970 --> 00:20:16,870\nI'm going to do something\nmuch smaller than this.\n\n421\n00:20:16,870 --> 00:20:18,640\nI'll do 10.0.0.170 through 175.\n\n422\n00:20:18,640 --> 00:20:21,810\nSo I'm gonna create a six address pool.\n\n423\n00:20:21,810 --> 00:20:26,670\nThat means I'll be able to deploy\nthis application six times.\n\n424\n00:20:26,670 --> 00:20:29,190\nA seventh time I'm out of IPs,\nso that'd be bad.\n\n425\n00:20:29,190 --> 00:20:31,910\nYou wanna make this as big as\nyou're gonna need to roll it out.\n\n426\n00:20:32,950 --> 00:20:34,160\nAll right.\n\n427\n00:20:34,160 --> 00:20:40,310\nThen right down here IP addresses\nreserved for load balancer VIPs, okay?\n\n428\n00:20:40,310 --> 00:20:44,299\nI need to designate which of\nthose IPs are gonna be reserved.\n\n429\n00:20:44,299 --> 00:20:45,031\nI wouldn't reserve them all.\n\n430\n00:20:45,031 --> 00:20:46,155\nThat's what these are going to be for, so.\n\n431\n00:20:46,155 --> 00:20:46,690\n>> Mm-hm.\n\n432\n00:20:46,690 --> 00:20:49,690\n>> That's what these are gonna be for,\nso I'm gonna put 10.0.0.170.\n\n433\n00:20:49,690 --> 00:20:53,940\nThrough ten dot zero dot zero dot 175,\njust that whole range.\n\n434\n00:20:53,940 --> 00:20:56,390\nI'm gonna reserve the whole thing.\n\n435\n00:20:56,390 --> 00:20:59,380\nAnd then, I haven't really found a use for\nthis bottom option here, right.\n\n436\n00:20:59,380 --> 00:21:02,680\nIP addresses have to be reserved for\nother uses.\n\n437\n00:21:02,680 --> 00:21:04,700\nI don't know what other\nuses I'd reserve it for.\n\n438\n00:21:04,700 --> 00:21:06,145\nSo, I just ignore that.\n\n439\n00:21:06,145 --> 00:21:11,918\n[LAUGH] I'm sure there's a use for it,\notherwise they wouldn't have put it there.\n\n440\n00:21:11,918 --> 00:21:13,710\nAll right.\nNow, because we're acting like a DACP\n\n441\n00:21:13,710 --> 00:21:17,760\nserver, here's where I can give it\na default gateway so I can specify that.\n\n442\n00:21:19,100 --> 00:21:23,610\nSo I'll punch that in, I can specify\nthings like DNS servers to use.\n\n443\n00:21:23,610 --> 00:21:27,020\nSo if I've got a DNS server at that one or\n\n444\n00:21:27,020 --> 00:21:32,830\nyou know whatever my DNS servers are,\nmy DNS suffixes.\n\n445\n00:21:32,830 --> 00:21:34,180\nSo my network's toasted up.\n\n446\n00:21:34,180 --> 00:21:36,470\nSo I'm just kinda filling\nall that stuff in.\n\n447\n00:21:36,470 --> 00:21:40,760\nOn my Win server if you have\none of those God forbid.\n\n448\n00:21:40,760 --> 00:21:41,930\n>> Yeah we still use those a lot.\n\n449\n00:21:41,930 --> 00:21:45,430\n>> And we'll finish that up.\n\n450\n00:21:45,430 --> 00:21:48,350\nNow, nothing in there really\nmentioned NLB specifically right,\n\n451\n00:21:48,350 --> 00:21:50,639\nI'm just creating an IP\npool to be able to use.\n\n452\n00:21:51,780 --> 00:21:55,090\nSo my next step, oh,\nthat finished pretty quick.\n\n453\n00:21:55,090 --> 00:21:58,260\nNow that I've got that pool,\nI can actually come down here and\n\n454\n00:21:58,260 --> 00:22:00,980\ncreate the VIP template.\n\n455\n00:22:00,980 --> 00:22:03,410\nThe VIP template is what this\napp is going to use, and\n\n456\n00:22:03,410 --> 00:22:07,040\nevery time it spawns this template it's\ngoing to grab an IP from that pool.\n\n457\n00:22:07,040 --> 00:22:09,090\nSo I'll create the template and\n\n458\n00:22:09,090 --> 00:22:12,977\nI'm gonna call this Web App\none VIP template, all right.\n\n459\n00:22:14,230 --> 00:22:17,770\nAnd give it a description and\na virtual IP port.\n\n460\n00:22:17,770 --> 00:22:19,990\nNow the port's important, all right.\n\n461\n00:22:19,990 --> 00:22:23,840\nWhen you're doing NLB,\nyou're load balancing an application and\n\n462\n00:22:23,840 --> 00:22:25,720\nthe application has to\nuse some kind of a port.\n\n463\n00:22:25,720 --> 00:22:28,040\nThis is what is normally our listener and\n\n464\n00:22:28,040 --> 00:22:31,320\nso here's where I get to specify the port\nthat we're going to be balancing.\n\n465\n00:22:31,320 --> 00:22:32,942\nIf it's a web server,\nit's gonna be port A.\n\n466\n00:22:32,942 --> 00:22:37,417\nIf its terminal services it's gonna be\n3389, you put in whatever that port is.\n\n467\n00:22:40,876 --> 00:22:41,890\nAll right.\n\n468\n00:22:41,890 --> 00:22:44,360\nThen the template type\nif it's just generic or\n\n469\n00:22:44,360 --> 00:22:48,200\nif we have a specific VIP template\nthat we're gonna be working with.\n\n470\n00:22:48,200 --> 00:22:50,090\nNow, what the heck is this all about?\n\n471\n00:22:50,090 --> 00:22:53,890\nWell, we're normally building this for\nNLB.\n\n472\n00:22:53,890 --> 00:22:54,810\nRight?\n\n473\n00:22:54,810 --> 00:22:57,630\nBut it actually does support\nhardware load balancers.\n\n474\n00:22:57,630 --> 00:23:01,150\nYou could, in theory, have hardware load\nbalancers out there and it'll tie to them.\n\n475\n00:23:01,150 --> 00:23:04,000\nAnd if you do you can register\nthem here in the system and\n\n476\n00:23:04,000 --> 00:23:06,150\nthen you'll see them in\nthese drop down boxes.\n\n477\n00:23:06,150 --> 00:23:07,330\nAll right, I don't have that.\n\n478\n00:23:07,330 --> 00:23:10,820\nMicrosoft NLB is the only thing that I'm\ngonna see that's available everywhere and\n\n479\n00:23:10,820 --> 00:23:12,240\nthat's the only one that's on the exam.\n\n480\n00:23:12,240 --> 00:23:15,403\nRight, but be aware that we could use\na hardware load balancer inside of this.\n\n481\n00:23:17,655 --> 00:23:19,080\nI'll kind of show you\nthat here in a minute.\n\n482\n00:23:20,280 --> 00:23:22,080\nAll right, next it's gonna ask for\nthe protocol.\n\n483\n00:23:22,080 --> 00:23:22,830\nI gave it a port.\n\n484\n00:23:22,830 --> 00:23:25,330\nNow it needs to know,\nis it TCP, UDP, or both?\n\n485\n00:23:25,330 --> 00:23:31,200\nI'm doing a web server, so it's just\nTCP and then my persistence, right?\n\n486\n00:23:31,200 --> 00:23:32,420\nThis is state.\n\n487\n00:23:32,420 --> 00:23:36,110\nDo I want people to always\nconnect back to the same machine?\n\n488\n00:23:36,110 --> 00:23:38,520\nIf this was RDP, I'd say yes.\n\n489\n00:23:38,520 --> 00:23:41,750\nIf it was a terminal server, if I did\na web server then the cookies are going to\n\n490\n00:23:41,750 --> 00:23:43,230\ndeal with it so I don't need that.\n\n491\n00:23:43,230 --> 00:23:46,765\nI could still turn it on if I felt like\nit, but when you turn it on you can end up\n\n492\n00:23:46,765 --> 00:23:50,360\nwith unbalanced servers where you have\nmore people on one than the other just\n\n493\n00:23:50,360 --> 00:23:53,919\nbased on how long people stay connected,\nso I'm not going to turn that on.\n\n494\n00:23:53,919 --> 00:23:56,798\nAnd I'll let that finish.\n\n495\n00:23:56,798 --> 00:24:00,240\nSo now I've got a template, and\nthere really wasn't much to it.\n\n496\n00:24:00,240 --> 00:24:04,180\nI've got this template that says, here's\nthe protocols that we're going to listen\n\n497\n00:24:04,180 --> 00:24:11,230\nfor and load balance, and that's basically\nthat, and that we're gonna use MLB.\n\n498\n00:24:11,230 --> 00:24:14,220\nNow, I've got load balancers right here,\nand\n\n499\n00:24:14,220 --> 00:24:17,630\nthat's where I see Microsoft Network Load\nBalancing entered in as a load balancer.\n\n500\n00:24:17,630 --> 00:24:21,640\nBut you can actually come in here and add\nload balancers, you can register them into\n\n501\n00:24:21,640 --> 00:24:25,830\nthe system, and once they're registered\nin, you can make use of them.\n\n502\n00:24:25,830 --> 00:24:28,667\nAnd they might be a hardware\nload balancer, and well,\n\n503\n00:24:28,667 --> 00:24:31,378\nhere's it's gonna tell me\nI can't quite do it, but\n\n504\n00:24:31,378 --> 00:24:34,645\nyou can register them in the system and\nmake use of them.\n\n505\n00:24:34,645 --> 00:24:38,078\nIt is challenging because you've gotta\nbasically synchronize a configuration,\n\n506\n00:24:38,078 --> 00:24:39,605\nwhich most systems don't support.\n\n507\n00:24:39,605 --> 00:24:42,577\nSo you do have to be a little careful\nwith that, but you can make use of those.\n\n508\n00:24:45,040 --> 00:24:48,790\nSo now that I've got that in place, I'm\nready to use it inside of my application.\n\n509\n00:24:48,790 --> 00:24:53,020\nNow, because this is an application that\nI'm cloning, I'll have an application\n\n510\n00:24:53,020 --> 00:24:55,970\ntemplate that I use, and I just need to\nadd the load balancer to that template.\n\n511\n00:24:57,220 --> 00:24:59,560\nAgain, if we were just doing this one\ntime, we wouldn't bother with this,\n\n512\n00:24:59,560 --> 00:25:00,650\nwe could just do it by hand.\n\n513\n00:25:00,650 --> 00:25:04,850\nBut if it's something that we're spawning\nfrequently, this comes in really handy.\n\n514\n00:25:06,540 --> 00:25:09,860\nSo, for the last part here,\nI need to jump over and\n\n515\n00:25:09,860 --> 00:25:11,820\ntake a look at my service templates.\n\n516\n00:25:11,820 --> 00:25:15,360\nSo down here,\nI'm gonna go to my library, and\n\n517\n00:25:15,360 --> 00:25:21,030\nin my library, I got a ton of stuff, but\nI'm looking for the service templates.\n\n518\n00:25:21,030 --> 00:25:23,130\nAnd when somebody in my\ncompany makes an application,\n\n519\n00:25:23,130 --> 00:25:26,390\nthey're gonna come in here and\ndefine the template, right?\n\n520\n00:25:26,390 --> 00:25:30,120\nWhat servers are necessary,\nwhat their relationship is, and so on.\n\n521\n00:25:30,120 --> 00:25:33,280\nAnd so you'll see here,\nthey've got enterprise application.\n\n522\n00:25:33,280 --> 00:25:33,998\nWe'll take that one.\n\n523\n00:25:33,998 --> 00:25:38,960\nIf I double-click on that,\nI can see some basic information about it,\n\n524\n00:25:38,960 --> 00:25:41,180\nand I really don't want to mess\nwith too much in here, but\n\n525\n00:25:41,180 --> 00:25:42,850\nthis is just telling me\na little bit more about it.\n\n526\n00:25:42,850 --> 00:25:45,630\nThis is a Dual Web Server\nservice template,\n\n527\n00:25:45,630 --> 00:25:49,000\nwhere the front-end web\nserver is scalable via NLB.\n\n528\n00:25:50,100 --> 00:25:53,220\nThe web front end,\nwe can add more web front ends and\n\n529\n00:25:53,220 --> 00:25:55,650\nuse NLB to balance across that.\n\n530\n00:25:55,650 --> 00:25:56,630\nNow it says dual.\n\n531\n00:25:56,630 --> 00:25:59,170\nWe'll see that in a minute that\nit's kinda limited to two, and\n\n532\n00:25:59,170 --> 00:26:00,434\nwe can always adjust that.\n\n533\n00:26:00,434 --> 00:26:04,930\nIf you right-click on that application,\nyou can go into the designer, though, and\n\n534\n00:26:04,930 --> 00:26:06,420\nthis is where the real action is.\n\n535\n00:26:06,420 --> 00:26:08,020\nLet me get in this designer.\n\n536\n00:26:08,020 --> 00:26:08,780\nIt's kinda neat.\n\n537\n00:26:08,780 --> 00:26:09,480\n>> I like it.\n\n538\n00:26:09,480 --> 00:26:12,020\n>> My resolution is low, so I'll probably\nhave to manipulate this a little bit.\n\n539\n00:26:13,660 --> 00:26:14,700\nGive that a second while it loads.\n\n540\n00:26:14,700 --> 00:26:17,980\nThere we go.\n\n541\n00:26:17,980 --> 00:26:23,860\nAnd what I'm looking at here is basically\nthis application that someone has defined.\n\n542\n00:26:25,210 --> 00:26:26,920\nAnd, looking at the application itself,\n\n543\n00:26:26,920 --> 00:26:31,740\nlet me bump up my zoom a good bit here,\nso we can see it all.\n\n544\n00:26:31,740 --> 00:26:37,100\nOn the back end is the application,\nand this entity, it really is nothing.\n\n545\n00:26:37,100 --> 00:26:38,870\nIt's just this placeholder.\n\n546\n00:26:38,870 --> 00:26:42,860\nFor the application to work,\nIt needs a few pieces.\n\n547\n00:26:42,860 --> 00:26:47,206\nAnd those pieces are what I'm\nseeing over here, and if we\n\n548\n00:26:47,206 --> 00:26:52,150\nkinda browse around a bit, you'll see\nthere's a SQL Tier, that's the database.\n\n549\n00:26:52,150 --> 00:26:55,360\nSo this application requires a database.\n\n550\n00:26:55,360 --> 00:27:00,190\nThe middle tier is a web server,\nso here's a web server.\n\n551\n00:27:00,190 --> 00:27:04,190\nAnd then over here I've got\na front end web server.\n\n552\n00:27:04,190 --> 00:27:07,830\nSo I've got multiple web tiers for\none reason or another,\n\n553\n00:27:07,830 --> 00:27:09,480\nthis application apparently needs it.\n\n554\n00:27:09,480 --> 00:27:13,410\nBut notice this one,\nScalable Front End Web Tier.\n\n555\n00:27:13,410 --> 00:27:17,788\nIt's got an initial of one,\nminimum of one, maximum of two.\n\n556\n00:27:17,788 --> 00:27:22,280\nAs my servers get busier and\nbusier, It can spawn a second one.\n\n557\n00:27:22,280 --> 00:27:24,860\nWhen I first employ this application,\nit will have one web front end.\n\n558\n00:27:24,860 --> 00:27:26,920\nAs it gets busier, it will spawn more, and\n\n559\n00:27:26,920 --> 00:27:29,040\nyou'll see down here\nwhere I can change that.\n\n560\n00:27:29,040 --> 00:27:32,100\nMaybe I want to bump that up to five.\n\n561\n00:27:32,100 --> 00:27:34,000\nSo I'm going to bump that up to five,\nsaying, hey,\n\n562\n00:27:34,000 --> 00:27:37,410\nif we get busy,\nbring up up to five more servers.\n\n563\n00:27:38,850 --> 00:27:41,760\nAnd, you know what,\nmy OK button seems to be buried.\n\n564\n00:27:43,810 --> 00:27:48,230\nThe SCVMM, if you run it full screen\n\n565\n00:27:48,230 --> 00:27:52,380\non a low-resolution machine, there's\na lot of options that you can't see.\n\n566\n00:27:52,380 --> 00:27:55,888\nSo let me just kind of move this around\nand see if I can't get that to show up.\n\n567\n00:27:59,940 --> 00:28:01,552\nThat's as close as I'm gonna get.\n\n568\n00:28:01,552 --> 00:28:04,780\nAll right, so we bumped it up and\nit already shows five there, and\n\n569\n00:28:04,780 --> 00:28:06,660\nI can save it here when I'm done.\n\n570\n00:28:06,660 --> 00:28:09,460\nI'll hold off on that cuz it takes a\nminute, but now it's got that minimum one,\n\n571\n00:28:09,460 --> 00:28:10,030\nmaximum five.\n\n572\n00:28:11,350 --> 00:28:14,940\nOn the front end, things start to\nget really kind of messy here, but\n\n573\n00:28:14,940 --> 00:28:16,400\nif you look at it, it's not so bad.\n\n574\n00:28:16,400 --> 00:28:18,510\nThere's these physical network adapters.\n\n575\n00:28:18,510 --> 00:28:22,030\nThese are the network adapters\ntied to the different machines, so\n\n576\n00:28:22,030 --> 00:28:25,380\nthe SQL tier, the middle tier,\nand the web front end, right?\n\n577\n00:28:25,380 --> 00:28:26,588\nSo three network adapters for that.\n\n578\n00:28:26,588 --> 00:28:32,730\nAnd, let me delete this real quick, there.\n\n579\n00:28:32,730 --> 00:28:34,640\nSo this is what you would normally see.\n\n580\n00:28:34,640 --> 00:28:38,060\nAnd the end users could connect\ndirectly to these different nodes.\n\n581\n00:28:38,060 --> 00:28:40,930\nSo a user is coming from\nthe Contoso network.\n\n582\n00:28:40,930 --> 00:28:42,850\nAnd via one of these network adapters,\n\n583\n00:28:42,850 --> 00:28:44,940\nthey connect to the various\nsystems in there.\n\n584\n00:28:45,980 --> 00:28:48,040\nAnd so that's how they'd get\nto that web front end here,\n\n585\n00:28:48,040 --> 00:28:50,380\nwhich is really what they would access.\n\n586\n00:28:50,380 --> 00:28:52,740\nSo my network load balancer.\n\n587\n00:28:52,740 --> 00:28:54,990\nIt actually needs to go in between these.\n\n588\n00:28:54,990 --> 00:29:02,330\nIt needs to sit in between the client and\nthe actual NIC of that server.\n\n589\n00:29:02,330 --> 00:29:05,340\nSo, up top here, you'll see where\nI can add a load balancer, and\n\n590\n00:29:05,340 --> 00:29:06,250\nthat's what I'm gonna do.\n\n591\n00:29:06,250 --> 00:29:09,129\nLet me just kind of move the screen\naround a little bit here.\n\n592\n00:29:10,470 --> 00:29:12,440\nI need to zoom this out because\nit's gonna get messy if I don't,\n\n593\n00:29:12,440 --> 00:29:15,550\nso that we can kinda see what's going on.\n\n594\n00:29:15,550 --> 00:29:19,470\nAll right, so this purple box here,\nthat's my web front end.\n\n595\n00:29:19,470 --> 00:29:21,760\nHere's my network card for that one, and\n\n596\n00:29:21,760 --> 00:29:25,070\nthen here is the Contoso network\nwhere my users are coming from.\n\n597\n00:29:25,070 --> 00:29:27,050\nI'm gonna add a load balancer.\n\n598\n00:29:27,050 --> 00:29:28,890\nNow when you add a load balancer,\n\n599\n00:29:28,890 --> 00:29:31,885\nit makes absolutely no effort to\nmake it visible on the screen.\n\n600\n00:29:31,885 --> 00:29:33,840\n>> [LAUGH]\n>> I can't tell you how often for\n\n601\n00:29:33,840 --> 00:29:36,190\nme it appears behind stuff, and\nyou have to hunt to find it, but\n\n602\n00:29:36,190 --> 00:29:37,555\nsomewhere in your screen this will appear.\n\n603\n00:29:37,555 --> 00:29:39,470\n>> [LAUGH]\n>> It's super annoying.\n\n604\n00:29:39,470 --> 00:29:43,070\nAnd you'll just see these three pieces,\nokay.\n\n605\n00:29:43,070 --> 00:29:46,240\nThe server connection is what's\ngonna connect to this web server.\n\n606\n00:29:47,250 --> 00:29:51,520\nThe client connection, that's what's\ngonna connect to your corporate network.\n\n607\n00:29:51,520 --> 00:29:55,870\nYour clients come in here, and\nthey're trying to get to the server.\n\n608\n00:29:55,870 --> 00:29:59,660\nAnd in between that is the virtual IP,\nright?\n\n609\n00:29:59,660 --> 00:30:00,660\nThere's that virtual IP.\n\n610\n00:30:00,660 --> 00:30:03,750\nAnd if I click on virtual IP,\nright down here's where I can pick it.\n\n611\n00:30:03,750 --> 00:30:07,780\nI can choose, there's my web\napp one VIP template, right?\n\n612\n00:30:07,780 --> 00:30:08,400\nSo I'll pick that.\n\n613\n00:30:08,400 --> 00:30:11,580\nThat's the template that I wanna use.\n\n614\n00:30:11,580 --> 00:30:15,061\nNow, I just need to tell the system\nthat that connection exists, and so\n\n615\n00:30:15,061 --> 00:30:16,290\nI can go to my connector.\n\n616\n00:30:17,580 --> 00:30:23,380\nAnd I can draw a line from\nContoso Corp to the client connection\n\n617\n00:30:23,380 --> 00:30:27,720\nand from this server connection to\nthe network card for that server.\n\n618\n00:30:27,720 --> 00:30:30,000\nOkay, that's connecting it.\n\n619\n00:30:30,000 --> 00:30:32,300\nNotice I still have the direct connection.\n\n620\n00:30:32,300 --> 00:30:35,870\nIf somebody knows the IP address\nof a server specifically,\n\n621\n00:30:35,870 --> 00:30:37,620\nthey could still go to it.\n\n622\n00:30:37,620 --> 00:30:38,710\nThat's how NLB is.\n\n623\n00:30:38,710 --> 00:30:42,200\nNLB, you have local IPs for each machine.\n\n624\n00:30:42,200 --> 00:30:47,870\nBut if we have this load-balanced IP,\nthat's the one we want people to go to.\n\n625\n00:30:47,870 --> 00:30:49,320\nSo this is the one we'll register in DNS.\n\n626\n00:30:49,320 --> 00:30:51,250\nThe other one will exist for management.\n\n627\n00:30:51,250 --> 00:30:54,856\nThis one will exist for\nour actual load balancing.\n\n628\n00:30:54,856 --> 00:30:59,376\nAll right,\nnow you might ask yourself, well Don,\n\n629\n00:30:59,376 --> 00:31:04,000\nNLB is about load balancing, and you've\njust connected it to one network card.\n\n630\n00:31:04,000 --> 00:31:05,980\nWhat's the point in that?\n\n631\n00:31:05,980 --> 00:31:07,600\nRemember the scalability.\n\n632\n00:31:07,600 --> 00:31:13,550\nUp here at the top, I now have a web\ntier that can scale up to five machines.\n\n633\n00:31:13,550 --> 00:31:16,840\nThat means there's actually going to\nbe five connections coming out of here.\n\n634\n00:31:16,840 --> 00:31:20,360\nWe don't see it,right,\ncuz you only see the one entity here.\n\n635\n00:31:20,360 --> 00:31:23,260\nBut in production,\nas those other nodes spin out,\n\n636\n00:31:23,260 --> 00:31:26,200\nthey're all being connected to\nweb app one, that virtual IP.\n\n637\n00:31:26,200 --> 00:31:29,570\nWhatever virtual IP this one gets,\nit's just gonna grab from that pool.\n\n638\n00:31:29,570 --> 00:31:33,880\nWhatever IP it gets will then be shared\nacross each of these five nodes.\n\n639\n00:31:33,880 --> 00:31:37,510\nAs we add and remove, and add and\nremove, it's always that one IP.\n\n640\n00:31:38,880 --> 00:31:41,815\nThat is how we implement\nthe load balancing in a template.\n\n641\n00:31:41,815 --> 00:31:45,864\nAnd now I can deploy this, load\nbalancing will already be enabled, and\n\n642\n00:31:45,864 --> 00:31:49,721\nall we have to do is let it scale\nup under performance, or manually.\n\n643\n00:31:49,721 --> 00:31:50,580\nAnd.\n\n644\n00:31:50,580 --> 00:31:52,276\nOur load balancing is fully in place.\n\n645\n00:31:52,276 --> 00:31:56,380\nCompletely automated once\nour template is defined.\n\n646\n00:31:56,380 --> 00:31:57,110\nIt's pretty cool stuff.\n\n647\n00:31:57,110 --> 00:31:58,070\n>> It really is.\n\n648\n00:31:58,070 --> 00:31:59,070\nIt really is.\n\n649\n00:31:59,070 --> 00:32:00,860\n>> And\nthis model is becoming a lot more common.\n\n650\n00:32:00,860 --> 00:32:03,640\nIf you've working in the cloud, if\nyou've got Windows Azure deployments, or\n\n651\n00:32:03,640 --> 00:32:06,350\neven your private cloud\nin your own environment.\n\n652\n00:32:06,350 --> 00:32:09,150\nYou might have a production, a dev,\na staging, a test environment,\n\n653\n00:32:09,150 --> 00:32:10,540\nall these different environments.\n\n654\n00:32:10,540 --> 00:32:13,240\nAnd so, you're constantly deploying\nout the same application.\n\n655\n00:32:13,240 --> 00:32:15,380\nAnd, that application has multiple pieces.\n\n656\n00:32:15,380 --> 00:32:18,500\nAnd here, we can bake it all\ninto one big deployment.\n\n657\n00:32:18,500 --> 00:32:20,610\nWhen that's done, we can save it.\n\n658\n00:32:20,610 --> 00:32:21,170\nRight?\n\n659\n00:32:21,170 --> 00:32:24,260\nSo, it's gonna save that template,\nand now anytime I deploy it,\n\n660\n00:32:24,260 --> 00:32:27,360\nall these pieces will come along,\nincluding the load balancing.\n\n661\n00:32:27,360 --> 00:32:28,120\nRight?\n\n662\n00:32:28,120 --> 00:32:29,450\nSo, that's done.\n\n663\n00:32:29,450 --> 00:32:34,230\nAnd now, I've got that enterprise\napplication, and I can publish it, and\n\n664\n00:32:34,230 --> 00:32:36,150\nmake it available to my end users.\n\n665\n00:32:36,150 --> 00:32:40,260\nAnd then, they can start to deploy\napplications based on that.\n\n666\n00:32:40,260 --> 00:32:43,170\nCouple this with the self service plan\nportals we'll talk about in another show,\n\n667\n00:32:43,170 --> 00:32:44,550\nand you really have some power.\n\n668\n00:32:44,550 --> 00:32:45,050\n>> Absolutely.\n\n669\n00:32:46,750 --> 00:32:49,510\n>> All right, so\nthat in a nutshell is NLB.\n\n670\n00:32:51,240 --> 00:32:52,740\nYou know?\nI just thought of something I didn't\n\n671\n00:32:52,740 --> 00:32:54,940\nmention at the beginning of the show,\nso let me double back.\n\n672\n00:32:54,940 --> 00:32:57,170\nWhen I was talking about multicast,\n\n673\n00:32:57,170 --> 00:33:02,520\nI forgot to mention one of the things\nto remember with multicast.\n\n674\n00:33:02,520 --> 00:33:06,963\nWith multicast, you have a little bit of\n\n675\n00:33:06,963 --> 00:33:12,200\na benefit over unicast\nthat I didn't mention.\n\n676\n00:33:12,200 --> 00:33:16,690\nIn a Unicast environment,\nyour NLB nodes have to have two NICs.\n\n677\n00:33:17,730 --> 00:33:23,210\nOne NIC for the shared IP, and one NIC for\nindividual access to the machine.\n\n678\n00:33:23,210 --> 00:33:24,280\nIt was right there,\n\n679\n00:33:24,280 --> 00:33:26,730\nwhen I said individual access to\nthe machine it made me think of that.\n\n680\n00:33:26,730 --> 00:33:29,150\nAnd, that's because of\nthe spoof MAC address.\n\n681\n00:33:29,150 --> 00:33:30,720\nSo, they all kinda look\nthe same on one NIC,\n\n682\n00:33:30,720 --> 00:33:32,566\nthere's no way to connect\nto an individual host.\n\n683\n00:33:32,566 --> 00:33:34,033\nSo, you need a second NIC for management.\n\n684\n00:33:34,033 --> 00:33:37,320\nYou need two NICs when you do unicast\nmode, and that is the default.\n\n685\n00:33:38,430 --> 00:33:41,340\n>> If you go multicast,\nbecause it's a multicast address and\n\n686\n00:33:41,340 --> 00:33:43,940\nit's separate,\nthey maintain their original address.\n\n687\n00:33:43,940 --> 00:33:47,670\nSo, you still have both on the same NIC,\nand you can get by with one network card.\n\n688\n00:33:47,670 --> 00:33:52,070\nSo, not the end of the world,\nbut it is a design change.\n\n689\n00:33:52,070 --> 00:33:53,770\nAnd so, just be aware that on the exam,\n\n690\n00:33:53,770 --> 00:33:56,940\nif they ask you a question\nabout one NIC versus two NICs,\n\n691\n00:33:56,940 --> 00:34:00,490\nif you only have one NIC, then\nmulticast is the only one that'll work.\n\n692\n00:34:00,490 --> 00:34:03,260\nYou won't be able to use unicast.\n\n693\n00:34:03,260 --> 00:34:04,116\nSorry, little out of order there.\n\n694\n00:34:04,116 --> 00:34:07,378\nJust popped into my head right while\nI was looking at that template.\n\n695\n00:34:07,378 --> 00:34:10,970\nAll right, Mike?\n\n696\n00:34:10,970 --> 00:34:12,390\nI think I've run out of\nstuff to talk about on NOB.\n\n697\n00:34:12,390 --> 00:34:15,920\n>> I think you covered it all,\nI think we got it.\n\n698\n00:34:15,920 --> 00:34:17,830\n>> Yeah, looking at my list,\nthere's pretty much it.\n\n699\n00:34:17,830 --> 00:34:19,380\nAs always, I'll post the show notes so\n\n700\n00:34:19,380 --> 00:34:22,010\nyou can kind of see that\nprocess that you go through.\n\n701\n00:34:22,010 --> 00:34:25,070\nIt's pretty straight forward,\nand it will be manually.\n\n702\n00:34:25,070 --> 00:34:27,640\nWe've seen that in the other shows,\nthat's no big deal.\n\n703\n00:34:27,640 --> 00:34:29,940\nAutomated like this does require\na little bit of extra design.\n\n704\n00:34:31,870 --> 00:34:35,760\nWell, as always, if you have\nquestions on this, feel free to ask.\n\n705\n00:34:35,760 --> 00:34:38,950\nLive during the show,\nyou go to itpro.tv/live.\n\n706\n00:34:38,950 --> 00:34:40,950\nYou'll see the chat box,\nright beneath the video.\n\n707\n00:34:40,950 --> 00:34:43,940\nYou can post your questions there,\nwe monitor and answer during the show.\n\n708\n00:34:43,940 --> 00:34:47,509\nIf you have questions after the show,\ntake a look at our Q&A forums.\n\n709\n00:34:47,509 --> 00:34:52,075\nAt the top of every page on the itpro.tv\nwebsite, you'll see a link that says Q&A.\n\n710\n00:34:52,075 --> 00:34:55,050\nIt'll take you right into the forums,\nand you can post your questions there.\n\n711\n00:34:55,050 --> 00:34:59,280\nAgain, we monitor and\nanswer after the show.\n\n712\n00:34:59,280 --> 00:35:01,560\nEither way, we wanna make sure\nthat your questions get answered.\n\n713\n00:35:02,692 --> 00:35:04,350\nAll right, well,\nI hope you guys enjoyed the show.\n\n714\n00:35:04,350 --> 00:35:06,240\nSigning off for ITProTV, I'm Don Pezet.\n\n715\n00:35:06,240 --> 00:35:07,430\n>> And I'm Mike Rodrick.\n\n716\n00:35:07,430 --> 00:35:09,325\n>> And, we will see you next time.\n\n717\n00:35:09,325 --> 00:35:14,419\n[MUSIC]\n\n",
          "vimeoId": "110603433"
        },
        {
          "description": "",
          "length": "3984",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-3-ha-storage-solutions-103014.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-3-ha-storage-solutions-103014-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-3-ha-storage-solutions-103014-sm.jpg",
          "title": "HA Storage Solutions",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,212 --> 00:00:22,378\n[SOUND]\n\n3\n00:00:22,378 --> 00:00:32,378\n[MUSIC]\n\n4\n00:00:33,753 --> 00:00:36,839\nAll right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:36,839 --> 00:00:38,911\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,911 --> 00:00:41,755\nI'm your host, Don Pezet,\nback again with Mr. Mike Rodrick.\n\n7\n00:00:41,755 --> 00:00:42,590\nHow's it going, Mike?\n\n8\n00:00:42,590 --> 00:00:43,690\n>> Great, how you doing, Don?\n\n9\n00:00:43,690 --> 00:00:46,450\n>> Oh, pumped up and excited, as always.\n\n10\n00:00:46,450 --> 00:00:47,040\n>> Good.\n\n11\n00:00:47,040 --> 00:00:50,590\n>> All right, well today,\nwe're going to be continuing on with our,\n\n12\n00:00:50,590 --> 00:00:53,170\nI just filled in the second objective,\nright?\n\n13\n00:00:53,170 --> 00:00:57,170\nPlan and implement a highly\navailable enterprise infrastructure,\n\n14\n00:00:58,200 --> 00:01:00,020\nthere's just a lot to clear right?\n\n15\n00:01:00,020 --> 00:01:02,220\nSo we want to make sure that\nwe get it all in depth.\n\n16\n00:01:02,220 --> 00:01:05,420\nAnd in this episode, we're going to\nbe tackling specifically plan and\n\n17\n00:01:05,420 --> 00:01:08,970\nimplement highly available\nstorage solutions.\n\n18\n00:01:08,970 --> 00:01:12,500\nIn other episodes we've covered things\nlike virtualization, and server, and\n\n19\n00:01:12,500 --> 00:01:15,860\nhigh availability there but now we're just\ngonna look at the storage side of things.\n\n20\n00:01:16,960 --> 00:01:20,030\nAll right, so inside of the storage\nworld with Windows Server\n\n21\n00:01:20,030 --> 00:01:21,900\n2012 R2 we've got a lot of neat stuff.\n\n22\n00:01:21,900 --> 00:01:23,970\nSome of this is stuff that's\nbeen around for a while, and so\n\n23\n00:01:23,970 --> 00:01:26,880\nyou'll see it all over the place\nout there in production.\n\n24\n00:01:26,880 --> 00:01:32,980\nSome of this is very, very new, just in\nWindows Server 2012 R2 not even in 2012.\n\n25\n00:01:32,980 --> 00:01:36,760\nSo we're gonna kinda cross\nthe gamut of what's out there and\n\n26\n00:01:36,760 --> 00:01:39,660\nas we discuss each one of these,\nwhat you need to be thinking is,\n\n27\n00:01:39,660 --> 00:01:43,030\nwhat scenario would I use one of\nthese technologies versus another?\n\n28\n00:01:43,030 --> 00:01:47,660\nAnd you'll find that sometimes one has\na specific purpose that meets a need\n\n29\n00:01:47,660 --> 00:01:49,580\nthat another one doesn't quite meet.\n\n30\n00:01:49,580 --> 00:01:52,660\nOr there might be two that\nachieve the same goal and\n\n31\n00:01:52,660 --> 00:01:55,090\nit's up to you to figure out\nwhich one is better for you.\n\n32\n00:01:55,090 --> 00:01:59,780\nEither dollar wise, or performance wise,\nor whatever you main criteria for\n\n33\n00:01:59,780 --> 00:02:01,300\nyour solution is.\n\n34\n00:02:01,300 --> 00:02:03,020\nWhich I know for\nmost people is dollars, right?\n\n35\n00:02:03,020 --> 00:02:05,790\nSo we'll be playing high availability,\n\n36\n00:02:05,790 --> 00:02:11,080\nunfortunately budget really shouldn't be\nthe thing steering our planning because\n\n37\n00:02:11,080 --> 00:02:13,030\nit's expensive to make\nthings highly available.\n\n38\n00:02:13,030 --> 00:02:15,520\n>> Some of those solutions\ncan get very expensive.\n\n39\n00:02:15,520 --> 00:02:18,140\n>> And on the storage side\nit's especially true, right?\n\n40\n00:02:18,140 --> 00:02:19,770\nSo we really see that.\n\n41\n00:02:19,770 --> 00:02:21,770\nSo let's dive into some of this.\n\n42\n00:02:21,770 --> 00:02:24,080\nSo Microsoft has a couple of\ntechnologies available for\n\n43\n00:02:24,080 --> 00:02:28,910\nus to use, specifically we've got\nStorage Spaces and Storage Pools.\n\n44\n00:02:28,910 --> 00:02:33,850\nNow, I don't do it during the show but if\nany of you guys have heard me talk during\n\n45\n00:02:33,850 --> 00:02:36,528\nthe breaks, these are two technologies\nthat I do tend to make fun of.\n\n46\n00:02:36,528 --> 00:02:39,030\n>> [LAUGH]\n>> And, [LAUGH], and it's not because they\n\n47\n00:02:39,030 --> 00:02:42,240\naren't good, it's because aren't,\nthey weren't originally designed for\n\n48\n00:02:42,240 --> 00:02:47,490\nreal servers, they were kinda designed for\nthese home server type environments.\n\n49\n00:02:47,490 --> 00:02:50,730\nAnd Microsoft has been bolstering them up,\nadding more and\n\n50\n00:02:50,730 --> 00:02:52,340\nmore functionality to them.\n\n51\n00:02:52,340 --> 00:02:57,170\nBut even as recently as Windows Server\n2012, I was still making fun of them,\n\n52\n00:02:57,170 --> 00:02:59,360\nlike who would use this in production?\n\n53\n00:02:59,360 --> 00:03:02,720\nBut there's actually\nbeen something new in R2\n\n54\n00:03:02,720 --> 00:03:05,230\nthat makes the jump that allows\nthese storage spaces and\n\n55\n00:03:05,230 --> 00:03:09,580\nstorage pools to become something\nwe can use for high availability.\n\n56\n00:03:09,580 --> 00:03:14,410\nAnd that thing is the support for\nshared serial-attached SCSI.\n\n57\n00:03:14,410 --> 00:03:19,430\nSo we can have the shared arrays,\nan external SAS array that can connect to\n\n58\n00:03:19,430 --> 00:03:23,930\ntwo servers and\nthey see it as direct storage and\n\n59\n00:03:23,930 --> 00:03:28,080\nwe can use storage spaces and\nstorage pools to manage that storage.\n\n60\n00:03:28,080 --> 00:03:30,340\nNow I can use it for cluster storage.\n\n61\n00:03:30,340 --> 00:03:34,480\nAnd you can build a cluster for\nfar less money than you had to before to\n\n62\n00:03:34,480 --> 00:03:37,880\nget high availability in small and\nmedium environments.\n\n63\n00:03:37,880 --> 00:03:38,520\nIn a large or\n\n64\n00:03:38,520 --> 00:03:41,230\nenterprise environment that's not gonna\nfly because it doesn't scale well.\n\n65\n00:03:41,230 --> 00:03:43,280\nI think we've talked about\nthat in other episodes too.\n\n66\n00:03:43,280 --> 00:03:46,590\nSo, in those environments, you're\nstill gonna talk about fiber channel.\n\n67\n00:03:46,590 --> 00:03:50,400\nYou're gonna go for those more\ncomplex technologies, more expensive.\n\n68\n00:03:50,400 --> 00:03:56,430\nBut, these two little ones, that I\nadmittedly have made fun of have grown,\n\n69\n00:03:56,430 --> 00:03:58,210\nand now they actually do have a use case.\n\n70\n00:03:58,210 --> 00:04:01,470\nAnd it's, if you need that high\navailability that the cluster can give\n\n71\n00:04:01,470 --> 00:04:06,220\nyou, but you don't have the budget\nto run a full Fiber Channel SAN,\n\n72\n00:04:06,220 --> 00:04:10,110\nthen this is a great stepping stone that's\neven better than iSCSI cuz I know iSCSI is\n\n73\n00:04:10,110 --> 00:04:11,850\nthe old, low-cost alternative.\n\n74\n00:04:11,850 --> 00:04:15,290\nNow this shared SAS becomes\na very viable one too.\n\n75\n00:04:15,290 --> 00:04:16,060\n>> Yeah, it really does.\n\n76\n00:04:16,060 --> 00:04:20,220\nRelatively inexpensive disk cuz we can use\nour industry standard drives in there.\n\n77\n00:04:20,220 --> 00:04:22,360\nWe can get those large enclosures and and\n\n78\n00:04:22,360 --> 00:04:24,790\nwhat's really cool I think is\nthe flexibility that you get with it,\n\n79\n00:04:24,790 --> 00:04:28,470\nthe ability to grow as\nyour storage needs grow.\n\n80\n00:04:28,470 --> 00:04:31,510\nWith RAID you know,\nwe're kinda fixed once we set that up.\n\n81\n00:04:31,510 --> 00:04:32,956\nIn order to add additional drives and\n\n82\n00:04:32,956 --> 00:04:34,920\nthings like that there's\na lot of work involved.\n\n83\n00:04:34,920 --> 00:04:39,283\nWith storage spaces and storage pools, we\ncan do things like thin provision, where\n\n84\n00:04:39,283 --> 00:04:43,338\nwe, all right, I know that in the future,\nlooking down the road in two years,\n\n85\n00:04:43,338 --> 00:04:46,655\nthree years, I might need 100\nterabytes worth of space, but\n\n86\n00:04:46,655 --> 00:04:50,660\nat this point, I'm really only using say,\nless than 10 terabytes.\n\n87\n00:04:50,660 --> 00:04:54,290\nSo I can go ahead and\nprovision out a 100 terabyte volume, but\n\n88\n00:04:54,290 --> 00:04:58,720\nthen I can only have physically\nten terabytes of space.\n\n89\n00:04:58,720 --> 00:05:02,060\nAnd then as I need more space,\nI can just go in and add drives.\n\n90\n00:05:02,060 --> 00:05:06,850\nAnd there's no backing it all up, blowing\nit all away, and then restoring that data.\n\n91\n00:05:06,850 --> 00:05:12,030\nSo very flexible when it comes\nto growing as our needs change.\n\n92\n00:05:12,030 --> 00:05:15,630\nAnd then, as you were saying,\na couple new features that they've added,\n\n93\n00:05:15,630 --> 00:05:20,080\nthat really make it a little more\ngeared toward that enterprise level.\n\n94\n00:05:20,080 --> 00:05:23,490\nThings like storage tiers are pretty cool.\n\n95\n00:05:23,490 --> 00:05:25,100\nA lot of us are starting to move,\n\n96\n00:05:25,100 --> 00:05:29,350\nwe're seeing a move toward solid state,\na lot more expensive.\n\n97\n00:05:29,350 --> 00:05:32,660\nBut the performance we get is just\nmind boggling with those things.\n\n98\n00:05:32,660 --> 00:05:34,090\nSo we want to go that way,\n\n99\n00:05:34,090 --> 00:05:38,970\nbut maybe we don't want to invest\nin that much in solid state.\n\n100\n00:05:38,970 --> 00:05:39,800\nSo we can combine them.\n\n101\n00:05:39,800 --> 00:05:44,870\nWe can use, with storage tiers,\nwe can set up a storage pool that\n\n102\n00:05:44,870 --> 00:05:49,870\nactually uses a combination\nof solid state drives and\n\n103\n00:05:49,870 --> 00:05:53,420\nyour mechanical drives and then it\nwill dynamically move things around.\n\n104\n00:05:53,420 --> 00:05:56,890\nIt'll move the highly,\nthe files we access more often,\n\n105\n00:05:56,890 --> 00:05:58,530\nit'll move it out to\nthat solid state part.\n\n106\n00:05:58,530 --> 00:06:02,270\nIt'll be what they call a fast tier and\na standard tier, so\n\n107\n00:06:02,270 --> 00:06:04,600\nit'll move things out there\nthat we use more often.\n\n108\n00:06:04,600 --> 00:06:07,120\nWe can even manually pin stuff out there\n\n109\n00:06:07,120 --> 00:06:09,670\nas we get that performance\nthat we like from solid state,\n\n110\n00:06:09,670 --> 00:06:14,820\nbut we can still have the capacity that we\ncan afford from those mechanical drives.\n\n111\n00:06:14,820 --> 00:06:16,610\n>> Yeah, and that is very valuable.\n\n112\n00:06:16,610 --> 00:06:19,070\nEven if you have the budget to do all SSD,\n\n113\n00:06:19,070 --> 00:06:23,110\noften times it's not worth it if you've\ngot archive data, data that's infrequently\n\n114\n00:06:23,110 --> 00:06:27,510\ntouched you're kind of wasting\nresources by putting it on SSD.\n\n115\n00:06:27,510 --> 00:06:30,430\nSSD which does have a shorter life\ntime due to the amount of writes.\n\n116\n00:06:30,430 --> 00:06:34,340\nNow that for the most part on the new\nSSD is not something that we worry about\n\n117\n00:06:34,340 --> 00:06:37,790\nanymore because they do millions\nof writes and re-writes.\n\n118\n00:06:37,790 --> 00:06:41,850\nSo that pretty much exceeds the lifetime\nof a magnetic drive anyway.\n\n119\n00:06:41,850 --> 00:06:44,795\nBut magnetic drives are kind of\nour tried and true technology.\n\n120\n00:06:44,795 --> 00:06:47,340\nThey're inexpensive, They're slower, but\n\n121\n00:06:47,340 --> 00:06:50,120\nif it's archived data we're talking\nabout it makes sense to have it there.\n\n122\n00:06:50,120 --> 00:06:51,600\nStorage tiers lets you do that.\n\n123\n00:06:51,600 --> 00:06:54,740\nWhen you connect to a normal fiber\nchannel saying you see the storage,\n\n124\n00:06:54,740 --> 00:06:58,140\nyou don't necessarily see like\nwhat type of storage that is.\n\n125\n00:06:58,140 --> 00:07:02,010\nBut with this technology because\nit is technically local storage.\n\n126\n00:07:02,010 --> 00:07:07,003\nIt's right there into your SAS bus,\nor really your SCSI bus.\n\n127\n00:07:07,003 --> 00:07:11,101\nSo when you see that you know exactly what\ntype of drive it is Windows recognizes,\n\n128\n00:07:11,101 --> 00:07:12,972\nthese are SDS these are magnetics and\n\n129\n00:07:12,972 --> 00:07:16,100\nit can then start to\nhandle them automatically.\n\n130\n00:07:16,100 --> 00:07:19,620\nAssuming that we get supported hardware.\n\n131\n00:07:19,620 --> 00:07:20,270\n>> Right.\nYeah.\n\n132\n00:07:20,270 --> 00:07:24,540\n>> And that is a big part, if you're\ngoing to be using storage pools and\n\n133\n00:07:24,540 --> 00:07:29,100\nstorage bases that if you want things\nlike automatic tiered storage,\n\n134\n00:07:29,100 --> 00:07:31,020\nit's gotta be something that\nMicrosoft has authorized.\n\n135\n00:07:31,020 --> 00:07:32,010\nIt's gotta be compatible.\n\n136\n00:07:32,010 --> 00:07:34,760\nAnd when you go out and\nyou buy shared SAS arrays,\n\n137\n00:07:34,760 --> 00:07:39,470\na lot of times they aren't compatible\nbecause anybody can make these things.\n\n138\n00:07:39,470 --> 00:07:42,398\nBut if you get them from vendors\nlike Dell and HP and those guys,\n\n139\n00:07:42,398 --> 00:07:46,323\nthey get them certified with Microsoft,\nthey report back information in Windows,\n\n140\n00:07:46,323 --> 00:07:49,715\nand Windows will recognize what they are,\nand treat them accordingly.\n\n141\n00:07:49,715 --> 00:07:51,294\nSo that's a pretty important thing.\n\n142\n00:07:51,294 --> 00:07:55,851\nAll right, so when we get one of these\narrays and we hook it up to our systems,\n\n143\n00:07:55,851 --> 00:07:58,570\nThey show up as what's called JBOD, right?\n\n144\n00:07:58,570 --> 00:08:00,038\n>> Right.\n>> Just a bunch of disks.\n\n145\n00:08:00,038 --> 00:08:04,670\nAnd then we start to build\non our storage on them.\n\n146\n00:08:04,670 --> 00:08:06,060\nWe kind of partition it out.\n\n147\n00:08:06,060 --> 00:08:10,650\nThey're not really partitions,\nwe're creating our logical drives.\n\n148\n00:08:10,650 --> 00:08:14,110\nAnd on a regular system,\nwe might be considering, well,\n\n149\n00:08:14,110 --> 00:08:18,170\nall right, I need to do RAID 5,\nor RAID 10, or whatever.\n\n150\n00:08:18,170 --> 00:08:21,740\nBut the storage spaces and\nstorage pools can actually use.\n\n151\n00:08:21,740 --> 00:08:25,610\nSpecial types of redundancy that are\ninside of it to optimize performance for\n\n152\n00:08:25,610 --> 00:08:29,760\nfiles that frequently accessed and\nfiles that are less frequently accessed.\n\n153\n00:08:29,760 --> 00:08:31,140\nAnd rearrange them upon our needs, so\n\n154\n00:08:31,140 --> 00:08:35,565\nit gives us a much more dynamic\naspect that is pretty powerful thing.\n\n155\n00:08:35,565 --> 00:08:36,770\n>> Mm-hm.\nAbsolutely.\n\n156\n00:08:36,770 --> 00:08:39,710\nAnd another one of the new\nfeatures that they've added...\n\n157\n00:08:39,710 --> 00:08:42,960\nStarts getting us a little more\ntowards that enterprise level.\n\n158\n00:08:42,960 --> 00:08:44,730\nIt's like that rank back cache.\n\n159\n00:08:44,730 --> 00:08:51,140\nThe ability to, if you've got that tiered\nstorage, it recognizes that faster part.\n\n160\n00:08:51,140 --> 00:08:51,780\nAnd it'll use that.\n\n161\n00:08:51,780 --> 00:08:55,900\nWhen you're doing a lot of small writes,\na lot of times it gets backed\n\n162\n00:08:55,900 --> 00:08:59,780\nup because you gotta spin the disk and get\nthe read write end to the right location.\n\n163\n00:08:59,780 --> 00:09:03,390\nWe can actually use some of that\nsolid state to buffer those rights,\n\n164\n00:09:03,390 --> 00:09:05,270\nwhich will speed up your performance.\n\n165\n00:09:05,270 --> 00:09:06,610\nThey've also added some parody,\n\n166\n00:09:06,610 --> 00:09:09,650\nwhich was one of the big\nthings that before with 2012.\n\n167\n00:09:09,650 --> 00:09:12,190\nAnd we've gone over storage pools,\n\n168\n00:09:12,190 --> 00:09:17,260\nso we should be familiar with\nsimple volume vs a mirrored volume.\n\n169\n00:09:17,260 --> 00:09:19,270\nVersus a parity volume, and\n\n170\n00:09:19,270 --> 00:09:24,000\npreviously with our cluster support,\nyou could not do the parity in 2012.\n\n171\n00:09:24,000 --> 00:09:28,620\nNow they've added the ability to do those\nparity volumes, which is a big deal, and\n\n172\n00:09:28,620 --> 00:09:33,440\nwe can even do dual parity, where I can\nsurvive the failure of multiple disks, or\n\n173\n00:09:33,440 --> 00:09:34,800\nup to two drives.\n\n174\n00:09:34,800 --> 00:09:38,355\n>> Let's talk about that for\na second in our design scenario.\n\n175\n00:09:38,355 --> 00:09:40,650\n>> Mm-hm\n>> When do we go ahead and\n\n176\n00:09:40,650 --> 00:09:43,890\npick to do dual parity\ninstead of single parity?\n\n177\n00:09:43,890 --> 00:09:46,440\nAnd there's something that\npeople forget pretty often.\n\n178\n00:09:46,440 --> 00:09:50,580\nWhen you build an array and you've got\nparity enabled, what does that mean?\n\n179\n00:09:50,580 --> 00:09:52,450\nWell it means we can lose a disk.\n\n180\n00:09:52,450 --> 00:09:55,320\nAnd even though we just lost\nall the data on that disk,\n\n181\n00:09:55,320 --> 00:09:58,905\nwe can use parity to recalculate\nwhat was there, right?\n\n182\n00:09:58,905 --> 00:10:00,250\n>> Mm-hm\n>> So even though the data's gone,\n\n183\n00:10:00,250 --> 00:10:01,420\nwe can figure out what was there.\n\n184\n00:10:01,420 --> 00:10:05,120\nAnd we can slap in a replacement disk,\nand then it can\n\n185\n00:10:05,120 --> 00:10:10,090\nrebuild the disk putting all the data back\nto where it was, and we're back in place.\n\n186\n00:10:10,090 --> 00:10:10,750\nAll right.\n\n187\n00:10:10,750 --> 00:10:12,980\nBut there's a few problems with this.\n\n188\n00:10:12,980 --> 00:10:16,190\nYes, it does give us\nsingle disk redundancy.\n\n189\n00:10:16,190 --> 00:10:18,550\nAll right, but what about dual disk.\n\n190\n00:10:18,550 --> 00:10:19,505\nWhat if I lose two disks?\n\n191\n00:10:19,505 --> 00:10:20,100\n>> Right.\n\n192\n00:10:20,100 --> 00:10:21,070\n>> Parity is not enough for that.\n\n193\n00:10:21,070 --> 00:10:22,502\nSo it does just give us one disk.\n\n194\n00:10:22,502 --> 00:10:23,490\nAll right.\n\n195\n00:10:23,490 --> 00:10:28,385\nThe other thing is, when that disk fails,\nour system runs slower.\n\n196\n00:10:28,385 --> 00:10:30,860\n>> Mm-hm\n>> Every time we read from that missing\n\n197\n00:10:30,860 --> 00:10:32,510\ndisk, we're having to do\na parity calculation.\n\n198\n00:10:32,510 --> 00:10:34,390\nSo things slow down.\n\n199\n00:10:34,390 --> 00:10:36,610\nAnd while it rebuilds.\n\n200\n00:10:36,610 --> 00:10:39,680\nYou're waiting and\nyour system is running slower.\n\n201\n00:10:39,680 --> 00:10:42,915\nSo performance degrades when\nyou just have a single parody.\n\n202\n00:10:42,915 --> 00:10:43,960\nRight?\n\n203\n00:10:43,960 --> 00:10:45,930\nNow, beyond that.\n\n204\n00:10:45,930 --> 00:10:48,540\nLet's say you planned for this and\nyou're like well, I wanna plan for\n\n205\n00:10:48,540 --> 00:10:50,535\nmultiple discs so\nI'm gonna throw in an extra spare.\n\n206\n00:10:50,535 --> 00:10:52,064\nLike a standby spare sitting there.\n\n207\n00:10:52,064 --> 00:10:54,500\n>> Mm-hm\n>> Well when your first disk fails,\n\n208\n00:10:54,500 --> 00:10:59,220\nnow you're running on parity, the spare\njumps right in, and it starts rebuilding.\n\n209\n00:10:59,220 --> 00:11:02,554\nIf that was a terabyte drive,\nthe rebuild could take hours, right?\n\n210\n00:11:02,554 --> 00:11:03,230\n>> Mm-hm.\n\n211\n00:11:03,230 --> 00:11:07,370\n>> It can take a long time to rebuild,\nand during that entire rebuild window,\n\n212\n00:11:07,370 --> 00:11:09,440\nyou have zero redundancy.\n\n213\n00:11:09,440 --> 00:11:12,570\nIf you were to lose one\ndrive during that rebuild.\n\n214\n00:11:12,570 --> 00:11:13,600\nYou'd lose all your data.\n\n215\n00:11:13,600 --> 00:11:14,540\nEven though you had a spare.\n\n216\n00:11:14,540 --> 00:11:17,410\nEven though the spare was\njumping in place right there.\n\n217\n00:11:17,410 --> 00:11:18,835\nDuring that rebuild time,\nyou're vulnerable.\n\n218\n00:11:18,835 --> 00:11:20,430\n>> Mm-hm\n>> As a result,\n\n219\n00:11:20,430 --> 00:11:23,970\nmost people have moved away\nfrom single parity solutions.\n\n220\n00:11:23,970 --> 00:11:24,707\nSolutions like Raid 5.\n\n221\n00:11:24,707 --> 00:11:25,720\nRight?\nYou're really\n\n222\n00:11:25,720 --> 00:11:29,120\nseeing Raid 5 a lot less frequently\nnow than what you used to.\n\n223\n00:11:29,120 --> 00:11:33,700\nPeople are moving to things like Raid 10\nthat don't require parity calculations but\n\n224\n00:11:33,700 --> 00:11:35,920\ndo give you multi-disk redundancy.\n\n225\n00:11:35,920 --> 00:11:40,730\nBut in dual parity, now I've got it\nwhere if we lose one disk, yeah,\n\n226\n00:11:40,730 --> 00:11:43,170\nit's gotta rebuild and\nit can rebuild from parity.\n\n227\n00:11:43,170 --> 00:11:46,590\nBut if I lose a second disk\nwhile the rebuild is occurring,\n\n228\n00:11:46,590 --> 00:11:48,730\nI've still got parity\ncalculations in place.\n\n229\n00:11:48,730 --> 00:11:51,880\nAnd so I can survive that extra failure.\n\n230\n00:11:51,880 --> 00:11:56,780\nSome people call this RAID 6, but\nthat's not like an official standard term,\n\n231\n00:11:56,780 --> 00:11:58,870\nMicrosoft it's just a part\nof their storage pools,\n\n232\n00:11:58,870 --> 00:12:00,300\nit's one of the options as dual parity.\n\n233\n00:12:02,020 --> 00:12:03,690\nAll right, so neat stuff in there.\n\n234\n00:12:03,690 --> 00:12:07,730\n>> Yeah and I think another thing they've\nadded with R2 is the ability to use,\n\n235\n00:12:07,730 --> 00:12:10,250\nlike if you've got a storage pool,\nor storage space,\n\n236\n00:12:10,250 --> 00:12:12,840\nI should say, that has free space on it.\n\n237\n00:12:12,840 --> 00:12:16,780\nIt can actually take advantage of that,\nwhereas if it brings in the hot spare and\n\n238\n00:12:16,780 --> 00:12:18,510\nit's trying to rebuild that drive.\n\n239\n00:12:18,510 --> 00:12:21,630\nWe're writing to that single drive which,\nlike Don was saying,\n\n240\n00:12:21,630 --> 00:12:25,600\nis really gonna slow it down and\ntake a long time, it can now actually use\n\n241\n00:12:25,600 --> 00:12:30,230\nthe free space in your storage\nspace to rebuild that drive.\n\n242\n00:12:30,230 --> 00:12:33,470\nSo now we can spread that IO\nacross multiple read/write heads.\n\n243\n00:12:33,470 --> 00:12:36,990\nAnd speed up that process of\nrecovery after a dry failure.\n\n244\n00:12:36,990 --> 00:12:39,280\n>> Yeah.\nA couple little caveats if you're gonna\n\n245\n00:12:39,280 --> 00:12:40,230\nroll this out.\n\n246\n00:12:40,230 --> 00:12:45,490\nFirst off, when we talk about redundancy,\nit is the storage spaces and\n\n247\n00:12:45,490 --> 00:12:48,510\nstorage pool that's actually\ndoing the redundancy.\n\n248\n00:12:48,510 --> 00:12:49,720\nNot the array.\n\n249\n00:12:49,720 --> 00:12:54,015\nSo a shared SAS Array when you connect it\nup, it needs to be just a bunch of disks.\n\n250\n00:12:54,015 --> 00:12:55,490\n>> Mm-hm\n>> Some of them have built-in\n\n251\n00:12:55,490 --> 00:12:58,960\ntechnology where they can do RAID5 or\nRAID1 or\n\n252\n00:12:58,960 --> 00:13:00,614\nwhatever it is that you want\nright there on the array.\n\n253\n00:13:00,614 --> 00:13:01,890\n>> Mm-hm\n>> You don't wanna do that.\n\n254\n00:13:01,890 --> 00:13:03,930\nYou wanna let the storage pool handle it.\n\n255\n00:13:03,930 --> 00:13:04,520\nAll right?\n\n256\n00:13:04,520 --> 00:13:06,710\nAnd that part of why it has to\nbe certified with Microsoft so\n\n257\n00:13:06,710 --> 00:13:09,540\nit'll know how to talk and\nuse those disks.\n\n258\n00:13:09,540 --> 00:13:13,280\nThe second thing is this is designed for\nthat shared SAS storage.\n\n259\n00:13:13,280 --> 00:13:18,110\nSo if you have a Fibre channel SAN or\nan iSCSI SAN, well storage pools\n\n260\n00:13:18,110 --> 00:13:22,270\ndoesn't talk directly to iSCSI it\ndoesn't talk directly to Fibre channel.\n\n261\n00:13:22,270 --> 00:13:25,280\nSo it doesn't support those\nconnectivity methods.\n\n262\n00:13:25,280 --> 00:13:29,180\nWhat you would have to do if you wanted\nto use those types of storage with it.\n\n263\n00:13:29,180 --> 00:13:32,720\nYou would have to connect to your iSCSI\nSAN or connect to your Fibre channel,\n\n264\n00:13:32,720 --> 00:13:34,630\nthat means you'd already have\nto have those LUNs made.\n\n265\n00:13:34,630 --> 00:13:38,470\nAnd then you would add the LUNs\ninto the storage pool,\n\n266\n00:13:38,470 --> 00:13:41,790\nbut on the back-end the array's\nalready handling the LUN.\n\n267\n00:13:41,790 --> 00:13:43,720\nAnd so\nyou're kind of doubling up the work.\n\n268\n00:13:43,720 --> 00:13:47,620\nAnd not getting a lot of benefit out of\nit, and the storage pools won't be aware\n\n269\n00:13:47,620 --> 00:13:51,980\nof what is SSD, what is magnetic,\ncuz they're just seeing that logical unit,\n\n270\n00:13:51,980 --> 00:13:54,520\nthey're not actually seeing\nthe physical discs anymore.\n\n271\n00:13:54,520 --> 00:13:56,690\nWith shared test,\nyou see the physical discs.\n\n272\n00:13:56,690 --> 00:13:59,100\nSo it's a different way\nof thinking about it and\n\n273\n00:13:59,100 --> 00:14:01,450\nwe're letting the storage\npool handle that management.\n\n274\n00:14:01,450 --> 00:14:02,830\n>> Right.\n\n275\n00:14:02,830 --> 00:14:03,470\n>> All right.\n\n276\n00:14:03,470 --> 00:14:07,240\nSo one of the things we can do to ensure\nthat we make the right decision on this\n\n277\n00:14:07,240 --> 00:14:09,735\nstuff is to choose\nhardware that's supported.\n\n278\n00:14:09,735 --> 00:14:11,560\n>> Mm-hm.\n>> And Microsoft does publish that, right?\n\n279\n00:14:11,560 --> 00:14:15,420\nThey've got the Windows Server Catalog\nwhere they list a lot of that.\n\n280\n00:14:15,420 --> 00:14:18,542\nAnd, Mike, you've got a link from\nthat [CROSSTALK] which is right here.\n\n281\n00:14:18,542 --> 00:14:19,186\nOkay.\n\n282\n00:14:19,186 --> 00:14:19,841\n>> There you go.\n\n283\n00:14:19,841 --> 00:14:21,460\n>> And so you can go to their website and\n\n284\n00:14:21,460 --> 00:14:25,030\nthey show the different certifications\nthat they have and you'll see how\n\n285\n00:14:25,030 --> 00:14:30,420\nthere is actually a different\ncertification between Windows server 2012.\n\n286\n00:14:30,420 --> 00:14:32,007\nAnd Windows server 2012 R2.\n\n287\n00:14:32,007 --> 00:14:34,413\nRight?\nSo other ones, if you look at 2003 and\n\n288\n00:14:34,413 --> 00:14:38,004\n2008, there was a 2008 R2,\nseparate certifications there.\n\n289\n00:14:38,004 --> 00:14:42,423\nAnd it was super hard cuz the only\ndifference was that [LAUGH] little orange\n\n290\n00:14:42,423 --> 00:14:43,129\nblip\n>> [LAUGH]\n\n291\n00:14:43,129 --> 00:14:45,330\n>> So they actually reversed the colors\n\n292\n00:14:45,330 --> 00:14:47,822\nthis time around to make it more obvious.\n\n293\n00:14:47,822 --> 00:14:50,950\nSo you could recognize that happen.\n\n294\n00:14:50,950 --> 00:14:55,740\nAnd when you go to buy that hardware,\nyou need to make sure that's supported.\n\n295\n00:14:55,740 --> 00:14:58,470\nYou can do unsupported\nhardware if you want, but\n\n296\n00:14:58,470 --> 00:15:00,385\nMicrosoft is not gonna support\nyou if you have a problem.\n\n297\n00:15:00,385 --> 00:15:01,750\n>> Right.\n>> And communications aren't\n\n298\n00:15:01,750 --> 00:15:02,930\nguaranteed to be reliable.\n\n299\n00:15:02,930 --> 00:15:06,930\nAnd while this is a solution really for\nsmaller environments, that doesn't mean\n\n300\n00:15:06,930 --> 00:15:10,760\nthat your data's not any less important\nthan it would be to an enterprise.\n\n301\n00:15:10,760 --> 00:15:13,160\nSo you want to make\nsure your data is safe.\n\n302\n00:15:13,160 --> 00:15:16,090\nAnd we do that by making sure\nwe use authorized hardware.\n\n303\n00:15:16,090 --> 00:15:19,430\nAnd when you shop for this stuff\nlike here's Dell's website, right?\n\n304\n00:15:19,430 --> 00:15:22,203\nSo these are Dell's shared SAS boxes, and\n\n305\n00:15:22,203 --> 00:15:27,830\nsome of these you'll see a PowerVault\nMD3 Serial Attached iSCSI storage array.\n\n306\n00:15:27,830 --> 00:15:30,160\nSo these are the ones that\nare designed to be able to connect up.\n\n307\n00:15:30,160 --> 00:15:32,940\nHere's one that says highly available,\nexternal storage rate,\n\n308\n00:15:32,940 --> 00:15:35,890\nideal for two node clusters, right?\n\n309\n00:15:35,890 --> 00:15:39,300\nSo we can break into one of these, and\nconnect it up, actually is this one,\n\n310\n00:15:39,300 --> 00:15:42,520\nlet's make sure this one's\nactually a shared SAS not.\n\n311\n00:15:44,350 --> 00:15:45,370\nYeah it is.\nAll right.\n\n312\n00:15:45,370 --> 00:15:48,313\nSo you can pick from these, and basically\nwhat your picking is how may disks you\n\n313\n00:15:48,313 --> 00:15:50,108\nwant and\nhow many nodes you wanna connect to it.\n\n314\n00:15:50,108 --> 00:15:53,509\nSome of the really cheap ones will only\nhave connection to one node and so\n\n315\n00:15:53,509 --> 00:15:56,238\nnow you can have that one node and\nit can do storage pools.\n\n316\n00:15:56,238 --> 00:15:56,778\nRight?\n\n317\n00:15:56,778 --> 00:15:58,554\nSo it can do it.\n\n318\n00:15:58,554 --> 00:16:00,078\nI'll have redundant storage whatever,\nbut it's only connected to one node.\n\n319\n00:16:00,078 --> 00:16:03,601\nIf you're wanting to use this storage for\ncluster shared volumes.\n\n320\n00:16:03,601 --> 00:16:04,536\nRight?\n\n321\n00:16:04,536 --> 00:16:07,080\nFor shared storage in a cluster.\n\n322\n00:16:07,080 --> 00:16:10,430\nThen this is gonna support\nconnections to two nodes.\n\n323\n00:16:10,430 --> 00:16:11,900\nOr more, right?\n\n324\n00:16:11,900 --> 00:16:13,370\nSo we've got to make sure that's there and\n\n325\n00:16:13,370 --> 00:16:16,925\nwe can see this one has with\nhigh availability data access.\n\n326\n00:16:16,925 --> 00:16:17,440\nRight?\n\n327\n00:16:17,440 --> 00:16:20,190\nThat's usually like key word that\nlets you know you can connect more.\n\n328\n00:16:20,190 --> 00:16:24,550\nAnd if we look here, consolidate up to\nfour servers in a clustered environment.\n\n329\n00:16:24,550 --> 00:16:26,070\nSo, this one has four connectors on it,\n\n330\n00:16:26,070 --> 00:16:30,420\nI can have a four-node cluster all\nsharing this storage right here,\n\n331\n00:16:30,420 --> 00:16:33,630\nif it's supported by Microsoft,\nif it's authorized with them.\n\n332\n00:16:33,630 --> 00:16:35,650\nThen this is a solution that we could use.\n\n333\n00:16:35,650 --> 00:16:40,770\nAnd you know, the big thing on these\nis the cost is a little bit low,\n\n334\n00:16:40,770 --> 00:16:44,930\ncompared to things like Fibre Channel SAN,\nI won't, oh that didn't work,\n\n335\n00:16:44,930 --> 00:16:49,110\nI don't wanna bore us by going and\ntrying to price one of these out.\n\n336\n00:16:49,110 --> 00:16:50,332\nApparently they're not gonna let me.\n\n337\n00:16:50,332 --> 00:16:52,340\n>> [LAUGH]\n>> So if you wanna buy one you can't.\n\n338\n00:16:52,340 --> 00:16:54,820\n>> That's right.\nWe can show you a picture but\n\n339\n00:16:54,820 --> 00:16:56,960\nyou can't have it.\n\n340\n00:16:56,960 --> 00:16:57,720\n>> That's awesome.\n\n341\n00:16:57,720 --> 00:16:58,940\nBut anyhow, you get one and\n\n342\n00:16:58,940 --> 00:17:01,615\nhopefully the storage is more\nredundant than the website.\n\n343\n00:17:01,615 --> 00:17:05,880\n[LAUGH] But basically that's\nwhat will solve that solution.\n\n344\n00:17:05,880 --> 00:17:09,170\nIt makes it work out well for the small\nand medium businesses that need a cluster,\n\n345\n00:17:09,170 --> 00:17:10,800\nbut don't wanna buy that.\n\n346\n00:17:10,800 --> 00:17:13,990\nThe really expensive SANs and\nthey're great technologies.\n\n347\n00:17:13,990 --> 00:17:17,710\nEven in Enterprises,\nyou might use these for\n\n348\n00:17:17,710 --> 00:17:19,186\nareas where you don't\nwanna deploy a full SAN.\n\n349\n00:17:19,186 --> 00:17:21,210\n>> Right\n>> So, in your production environment,\n\n350\n00:17:21,210 --> 00:17:25,460\nyeah, you might have full Fibre Channel\nSANs in your home office data center.\n\n351\n00:17:25,460 --> 00:17:28,250\nBut at all of your branch\noffices where you deploy,\n\n352\n00:17:28,250 --> 00:17:30,980\na lot of people put one Hyper-V\nserver out at the branch offices and\n\n353\n00:17:30,980 --> 00:17:35,800\nthey run a domain controller, it may\nbe like a DFS server so they can have.\n\n354\n00:17:35,800 --> 00:17:37,010\nLocal file access for\n\n355\n00:17:37,010 --> 00:17:39,850\nthe branch office instead of having\nto come back to headquarters.\n\n356\n00:17:39,850 --> 00:17:43,246\nWell those systems are not normally\nredundant they are in a branch.\n\n357\n00:17:43,246 --> 00:17:45,050\n>> Mm-hm\n>> And if the branch server fails they\n\n358\n00:17:45,050 --> 00:17:48,070\njust go back to the WAN link back to\nthe home office which isn't ideal.\n\n359\n00:17:48,070 --> 00:17:50,780\nBut you can get a simple solution\nlike this two servers and\n\n360\n00:17:50,780 --> 00:17:52,600\none of theses shared arrays.\n\n361\n00:17:52,600 --> 00:17:53,760\nThrow it out there.\n\n362\n00:17:53,760 --> 00:17:55,460\nNow you've got clustered\nserver redundancy.\n\n363\n00:17:55,460 --> 00:17:58,880\nYou throw Hyper-V on it, and\nnow you can have virtual machines that\n\n364\n00:17:58,880 --> 00:18:03,345\nbounce between the two nodes all in\na branch office for a relatively low cost.\n\n365\n00:18:03,345 --> 00:18:05,340\n>> Mm-hm\n>> That's really what this\n\n366\n00:18:05,340 --> 00:18:07,010\nis kind of designed for.\n\n367\n00:18:07,010 --> 00:18:08,240\n>> Yeah they gave it in their guide there.\n\n368\n00:18:08,240 --> 00:18:11,160\nThey recommend like two to\nfour nodes in your cluster.\n\n369\n00:18:11,160 --> 00:18:16,770\nSo it's not meant to be used with a 64\nnode cluster or anything like that.\n\n370\n00:18:16,770 --> 00:18:19,460\n>> Yeah.\nNow storage spaces they run on top of\n\n371\n00:18:19,460 --> 00:18:20,190\nfile services.\n\n372\n00:18:20,190 --> 00:18:22,920\nWe can do that on top of\na clustered environment.\n\n373\n00:18:22,920 --> 00:18:26,510\nSo if you've got a failover cluster,\nyou can set that up and go that route.\n\n374\n00:18:26,510 --> 00:18:28,205\nThere's other ways to deploy it too.\n\n375\n00:18:28,205 --> 00:18:29,110\n>> Mm-hm\n>> Mike,\n\n376\n00:18:29,110 --> 00:18:33,510\nyou've got a link here in the notes for\nthe consideration page on that.\n\n377\n00:18:33,510 --> 00:18:35,060\nI've got it pulled up here.\n\n378\n00:18:35,060 --> 00:18:38,100\nSo the Deploy Clustered Storage Spaces.\n\n379\n00:18:38,100 --> 00:18:40,820\nWhich is really just a pretty\nsimple setup, right?\n\n380\n00:18:40,820 --> 00:18:43,660\nYou've got your file shares that\nare running on top of that storage and\n\n381\n00:18:43,660 --> 00:18:45,310\nyou've got your cluster\nnodes that connect to it,\n\n382\n00:18:45,310 --> 00:18:47,615\nso they're showing that exact\nenvironment that we're describing.\n\n383\n00:18:47,615 --> 00:18:49,530\n>> Mm-hm\n>> Here they've got three servers,\n\n384\n00:18:49,530 --> 00:18:50,945\nbut two is kind of the minimum.\n\n385\n00:18:50,945 --> 00:18:53,210\n>> Mm-hm.\n>> So they're saying two to four servers.\n\n386\n00:18:53,210 --> 00:18:54,640\nConnect to the physical.\n\n387\n00:18:54,640 --> 00:18:55,720\nNow why do they stop at four?\n\n388\n00:18:56,860 --> 00:19:00,840\nWindows Server 2012 R2 supports\nup to a 64 node cluster.\n\n389\n00:19:00,840 --> 00:19:01,400\nWhy stop at four?\n\n390\n00:19:01,400 --> 00:19:04,300\nYou're gonna be hard\npressed to find arrays\n\n391\n00:19:04,300 --> 00:19:06,060\nthat have more than four\nconnectors on them.\n\n392\n00:19:06,060 --> 00:19:06,640\n>> Exactly.\n\n393\n00:19:06,640 --> 00:19:09,240\n>> If you need more than four, you\nreally need to go to Fibre Channel, and\n\n394\n00:19:09,240 --> 00:19:11,750\nthen you'll have Fibre Channel switches\nwhich provide the connectivity\n\n395\n00:19:11,750 --> 00:19:12,440\nout to the devices.\n\n396\n00:19:14,140 --> 00:19:16,330\nBut that'll give you a high\nlevel of redundancy.\n\n397\n00:19:16,330 --> 00:19:17,880\nYou can have disk failures,\nyou'll survive it,\n\n398\n00:19:17,880 --> 00:19:21,620\nyou can have physical server failures and\nyou'll survive there.\n\n399\n00:19:21,620 --> 00:19:24,270\nNetwork failures, it does give you\na great level of redundancy and\n\n400\n00:19:24,270 --> 00:19:24,918\ndoesn't run you broke.\n\n401\n00:19:24,918 --> 00:19:25,591\n>> Exactly.\n\n402\n00:19:25,591 --> 00:19:28,470\n[LAUGH]\n>> [LAUGH] All right, so.\n\n403\n00:19:28,470 --> 00:19:30,750\nThat's some of the options\nthat we have there.\n\n404\n00:19:30,750 --> 00:19:32,160\nNow that's not where\nwe're gonna stop right?\n\n405\n00:19:32,160 --> 00:19:34,920\nWe've got a lot of other\nthings to talk about.\n\n406\n00:19:34,920 --> 00:19:37,550\nLet's talk a little bit about,\nwhere were we at?\n\n407\n00:19:37,550 --> 00:19:39,110\nMPIO?\n>> Kinda switched gears.\n\n408\n00:19:39,110 --> 00:19:42,435\nYou want to jump over to MPIO, then\nwe'll do, we've got DFS, and then MPIO\n\n409\n00:19:42,435 --> 00:19:45,595\n>> Okay, let's talk about,\n\n410\n00:19:45,595 --> 00:19:47,910\n[LAUGH] let's do DFS.\n\n411\n00:19:47,910 --> 00:19:51,380\nWe won't,\nI don't think we have enough time for.\n\n412\n00:19:51,380 --> 00:19:52,328\nSo, DFS, right?\n\n413\n00:19:52,328 --> 00:19:54,850\n>> Mm-hm\n>> Distributed File System.\n\n414\n00:19:54,850 --> 00:19:56,660\nYou learned it in the MCSA track.\n\n415\n00:19:56,660 --> 00:19:58,280\nYou saw how to implement it.\n\n416\n00:19:58,280 --> 00:20:01,120\nIt's pretty straight forward and,\nif you go back and watch that episode,\n\n417\n00:20:01,120 --> 00:20:01,670\nI'll say something.\n\n418\n00:20:01,670 --> 00:20:03,130\nI'm gonna say it again.\n\n419\n00:20:03,130 --> 00:20:06,820\nI think DFS is one of the most\nunderrated technologies from Microsoft.\n\n420\n00:20:06,820 --> 00:20:07,908\n>> I would be with you there.\n\n421\n00:20:07,908 --> 00:20:09,033\n>> It's awesome.\n\n422\n00:20:09,033 --> 00:20:10,930\n>> Yes\n>> It's easy to configure.\n\n423\n00:20:10,930 --> 00:20:13,555\nIt works really well,\ndoesn't require crazy hardware.\n\n424\n00:20:13,555 --> 00:20:14,580\n>> Mm-hm\n>> I don't know why more\n\n425\n00:20:14,580 --> 00:20:15,130\npeople don't use it.\n\n426\n00:20:15,130 --> 00:20:15,800\n>> Absolutely.\n\n427\n00:20:15,800 --> 00:20:16,530\nAbsolutely.\n\n428\n00:20:16,530 --> 00:20:21,200\nI mean even from the end users perspective\nof trying to remember 15 different or\n\n429\n00:20:21,200 --> 00:20:23,300\n30 different UNC paths.\n\n430\n00:20:23,300 --> 00:20:24,360\nLike where is that share?\n\n431\n00:20:24,360 --> 00:20:27,092\nIt's on file server 01,\nbackslash [INAUDIBLE].\n\n432\n00:20:27,092 --> 00:20:31,090\nSo just the ability to take all those\nshares from all of our different servers,\n\n433\n00:20:31,090 --> 00:20:32,910\nphysically located different servers.\n\n434\n00:20:32,910 --> 00:20:34,260\nAnd bring it under that one logical view.\n\n435\n00:20:34,260 --> 00:20:37,440\nI mean I think that's fantastic for\nour end users.\n\n436\n00:20:37,440 --> 00:20:39,990\n>> Yeah.\nAnd the fact that you have your data\n\n437\n00:20:39,990 --> 00:20:41,465\nable to be stored in\nmore then one location.\n\n438\n00:20:41,465 --> 00:20:43,430\n>> Mm-hm\n>> And when a client connects they do\n\n439\n00:20:43,430 --> 00:20:45,650\na look up against the name server\nto figure out where they should go.\n\n440\n00:20:45,650 --> 00:20:49,135\nThey steer to the geographically\nclosest location to access that file.\n\n441\n00:20:49,135 --> 00:20:49,920\n>> Mm-hm\n>> Right?\n\n442\n00:20:49,920 --> 00:20:52,950\nSo they hit usually a DFS\nserver in the same site.\n\n443\n00:20:52,950 --> 00:20:53,510\nIs them right?\n\n444\n00:20:53,510 --> 00:20:55,230\nSo they hit that server,\nthey get the data.\n\n445\n00:20:55,230 --> 00:20:58,190\nBut if that server fails,\nthey just do another lookup and say hey,\n\n446\n00:20:58,190 --> 00:20:59,180\nis there another server out there?\n\n447\n00:20:59,180 --> 00:21:00,810\nAnd then they get another one and\nthey connect.\n\n448\n00:21:00,810 --> 00:21:02,470\nAll transparent to the end-user.\n\n449\n00:21:02,470 --> 00:21:06,850\nSo the redundancy with DFS,\nit's part of the product.\n\n450\n00:21:06,850 --> 00:21:10,890\nYou bring up a namespace server,\nyou register each of your shares.\n\n451\n00:21:10,890 --> 00:21:13,500\nAnd then in your shares you set\nup each of the replicas of it.\n\n452\n00:21:13,500 --> 00:21:14,790\nWhere it's gonna be stored.\n\n453\n00:21:14,790 --> 00:21:18,360\nAnd you can define whether there's just\none copy or you can have 100 copies of it.\n\n454\n00:21:18,360 --> 00:21:20,990\nYou spread across branches\nall across your environment.\n\n455\n00:21:20,990 --> 00:21:22,500\nAnd it's there.\n\n456\n00:21:22,500 --> 00:21:24,170\nThe redundancy's built in.\n\n457\n00:21:24,170 --> 00:21:26,260\nYou don't need anything too fancy.\n\n458\n00:21:26,260 --> 00:21:28,750\n>> With that DFS replication\nmake sure that those\n\n459\n00:21:28,750 --> 00:21:30,800\nchanges are getting propagated\nto all the other servers.\n\n460\n00:21:30,800 --> 00:21:33,330\nSo if I change a file here,\nand you go connect to that,\n\n461\n00:21:33,330 --> 00:21:35,890\nyou might be connecting over there in\nthe London office, you're connecting to\n\n462\n00:21:35,890 --> 00:21:39,870\na different DFS server, you're still\ngonna see the change in that document.\n\n463\n00:21:39,870 --> 00:21:41,950\nSo, the redundancy with the DFSR,\n\n464\n00:21:41,950 --> 00:21:46,280\nthe DFS replication, that gives me that\nredundancy I need with the actual data.\n\n465\n00:21:46,280 --> 00:21:49,045\nWith the shared folders,\nI've got it stored in multiple locations.\n\n466\n00:21:49,045 --> 00:21:52,568\nBut one part we don't want to forget\nabout Is the namespace itself.\n\n467\n00:21:52,568 --> 00:21:53,480\n>> Mm-hm\n>> All right?\n\n468\n00:21:53,480 --> 00:21:55,126\nBecause we're connecting to one server.\n\n469\n00:21:55,126 --> 00:21:58,940\nAnd there's a server that's hosting that\nnamespace, that's giving us that logical\n\n470\n00:21:58,940 --> 00:22:01,810\nview where we've got all of our,\nwe've got our root namespace.\n\n471\n00:22:01,810 --> 00:22:03,990\nAnd we've got our folders\nwith our folder targets,\n\n472\n00:22:03,990 --> 00:22:06,500\nthe pointers to all of\nthose different locations.\n\n473\n00:22:06,500 --> 00:22:08,340\nSo if that server does down,\n\n474\n00:22:08,340 --> 00:22:12,120\nwhile we might have multiple\ncopies of that data spread out.\n\n475\n00:22:12,120 --> 00:22:13,458\nI can't get to it anymore.\n\n476\n00:22:13,458 --> 00:22:15,211\nRight.\nI mean I can still go to the old\n\n477\n00:22:15,211 --> 00:22:17,958\nschool UNC path,\nif I still remember what that was, but\n\n478\n00:22:17,958 --> 00:22:20,540\nI've lost that logical view of that share.\n\n479\n00:22:20,540 --> 00:22:23,310\nSo that's where we need to\nprovide some type of redundancy\n\n480\n00:22:23,310 --> 00:22:26,750\nat the namespace server level itself.\n\n481\n00:22:26,750 --> 00:22:29,275\nAnd we got a couple of different\noptions we can use there.\n\n482\n00:22:29,275 --> 00:22:31,340\n>> Yeah and this is one I\nknow a lot of people confuse.\n\n483\n00:22:31,340 --> 00:22:35,160\nBecause when you browse on\na network to a DFS share,\n\n484\n00:22:35,160 --> 00:22:38,655\nyou don't browse to slash slash,\nserver name, slash whatever.\n\n485\n00:22:38,655 --> 00:22:40,480\n>> Mm-hm\n>> You browse to slash slash,\n\n486\n00:22:40,480 --> 00:22:44,550\nyour active directory domain name,\nslash and the share name right.\n\n487\n00:22:44,550 --> 00:22:46,120\nSo you're browsing to the domain.\n\n488\n00:22:46,120 --> 00:22:50,040\nAnd a lot of people look at that and\nthey say well, DFS, when I install it,\n\n489\n00:22:50,040 --> 00:22:52,890\nI have that choice between\nan enterprise or a stand-alone right?\n\n490\n00:22:52,890 --> 00:22:57,850\nAnd if you enterprise DFS it stores the\nconfiguration in the active directory so\n\n491\n00:22:57,850 --> 00:23:01,300\nIf I'm browsing with a domain then I just\nneed to have a domain controller that's\n\n492\n00:23:01,300 --> 00:23:01,900\navailable.\n\n493\n00:23:01,900 --> 00:23:03,594\nIf I have more than one\ndomain it's safe isn't it?\n\n494\n00:23:03,594 --> 00:23:05,090\n>> Mm-hm\n>> And the answer is no it's not.\n\n495\n00:23:05,090 --> 00:23:05,810\n>> Not so much.\n\n496\n00:23:05,810 --> 00:23:07,830\n>> The configuration is stored there.\n\n497\n00:23:07,830 --> 00:23:11,355\nIt is being replicated along and\nso the configuration is there.\n\n498\n00:23:11,355 --> 00:23:12,310\n>> Mm-hm\n>> But\n\n499\n00:23:12,310 --> 00:23:16,040\nyou need a server that's actually\nable to respond to the look-ups.\n\n500\n00:23:16,040 --> 00:23:18,870\nAnd a domain controller,\nit doesn't do that, right?\n\n501\n00:23:18,870 --> 00:23:22,820\nIt does LDAP queries for\nActive Directory objects and that's it.\n\n502\n00:23:22,820 --> 00:23:26,410\nSo, if we wanna be able to respond with\nhey, here's the right file server for you.\n\n503\n00:23:26,410 --> 00:23:27,280\nHere's where you need to go.\n\n504\n00:23:27,280 --> 00:23:28,565\nHere's where you need to go.\n\n505\n00:23:28,565 --> 00:23:30,925\nIf we want that we need\na namespace server.\n\n506\n00:23:30,925 --> 00:23:33,910\nAnd if you do an enterprise\nCA to make it redundant.\n\n507\n00:23:33,910 --> 00:23:35,805\n>> Mm-hm\n>> You just add a second one.\n\n508\n00:23:35,805 --> 00:23:38,255\nIt's not rocket science on that one.\n\n509\n00:23:38,255 --> 00:23:41,205\n>> Yeah it's really pretty easy\nI mean you don't even have to\n\n510\n00:23:41,205 --> 00:23:43,917\ninstall DFS on that second or\nthird server.\n\n511\n00:23:43,917 --> 00:23:47,827\nGo back to your first server that's got\nthat DFS management console on there.\n\n512\n00:23:47,827 --> 00:23:48,797\nGo up to the top right.\n\n513\n00:23:48,797 --> 00:23:51,107\nClick add namespace server,\nand it brings it in.\n\n514\n00:23:51,107 --> 00:23:54,397\nAnd now you've got more than\none copy of that logical view.\n\n515\n00:23:54,397 --> 00:23:57,404\n>> And if you've got a headquarters and\na disaster recovery location.\n\n516\n00:23:57,404 --> 00:24:00,224\nIt's a great idea to stick one\nof the namespace servers over in\n\n517\n00:24:00,224 --> 00:24:01,265\nthat other location.\n\n518\n00:24:01,265 --> 00:24:03,528\nThat way if you lose your headquarters,\nWell,\n\n519\n00:24:03,528 --> 00:24:06,706\nthe disaster recovery location\nstill has a DFS name space server.\n\n520\n00:24:06,706 --> 00:24:08,790\nIt's able to answer the lookups.\n\n521\n00:24:08,790 --> 00:24:11,740\nAnd it'll start pointing to\nthe other copies of the folder that\n\n522\n00:24:11,740 --> 00:24:14,540\naren't at the home office and\nyou stay online.\n\n523\n00:24:14,540 --> 00:24:18,695\nSo, high availability for\nDFS is kind of a no brainer.\n\n524\n00:24:18,695 --> 00:24:19,285\n>> Right.\n\n525\n00:24:19,285 --> 00:24:20,815\n>> Except for one scenario.\n\n526\n00:24:20,815 --> 00:24:21,525\nRight?\n\n527\n00:24:21,525 --> 00:24:26,715\nIf you do the install and you choose\nto do a stand alone name space server.\n\n528\n00:24:26,715 --> 00:24:30,945\nIn a stand alone name space server\nthe configuration is not stored\n\n529\n00:24:30,945 --> 00:24:32,215\nin the active directory.\n\n530\n00:24:32,215 --> 00:24:34,785\nThis is a little pointer put in but\nthat things worthless.\n\n531\n00:24:34,785 --> 00:24:36,046\nSo [LAUGH] it just says that it exists.\n\n532\n00:24:36,046 --> 00:24:36,940\n>> [LAUGH] Right.\n\n533\n00:24:36,940 --> 00:24:40,200\n>> So\nall the real data of our DFS is stored\n\n534\n00:24:40,200 --> 00:24:42,820\nright there on that name space server.\n\n535\n00:24:42,820 --> 00:24:45,730\nThat's something people do when\nthey deploy it in a DMZ and\n\n536\n00:24:45,730 --> 00:24:48,530\nthey don't want it to be tied\nto active directory or whatever.\n\n537\n00:24:48,530 --> 00:24:50,740\nSo there's use scenarios for\n\n538\n00:24:50,740 --> 00:24:54,280\nthat where people might want to do\na stand alone name space server.\n\n539\n00:24:54,280 --> 00:24:57,120\nBut, our simple solution\nwith an enterprise\n\n540\n00:24:57,120 --> 00:24:59,040\nname space server was\njust to add a second one.\n\n541\n00:24:59,040 --> 00:25:00,600\nThat doesn't work with a standalone.\n\n542\n00:25:00,600 --> 00:25:02,430\nIf you add a second one,\nit's got it's own database.\n\n543\n00:25:02,430 --> 00:25:03,700\nIt's separate from the other one.\n\n544\n00:25:03,700 --> 00:25:05,180\nIt doesn't help us at all.\n\n545\n00:25:05,180 --> 00:25:06,816\nWell I guess if you're bored.\n\n546\n00:25:06,816 --> 00:25:07,871\n>> [LAUGH]\n>> You can go and\n\n547\n00:25:07,871 --> 00:25:10,167\ncompletely duplicate your configuration.\n\n548\n00:25:10,167 --> 00:25:11,780\n>> Right.\n>> And that would work, but.\n\n549\n00:25:11,780 --> 00:25:13,020\n>> So, it kinda work.\nYeah.\n\n550\n00:25:13,020 --> 00:25:14,340\n>> Yeah, any tiny minute change on one,\n\n551\n00:25:14,340 --> 00:25:16,830\nyou have to make on the other,\nit's definitely not an ideal solution.\n\n552\n00:25:16,830 --> 00:25:17,900\n>> Right.\n\n553\n00:25:17,900 --> 00:25:21,980\n>> So, a standalone DFS namespace server,\n\n554\n00:25:21,980 --> 00:25:26,500\nthat is actually a supported Cluster Role\nin Microsoft Failover Clustering.\n\n555\n00:25:26,500 --> 00:25:28,820\nSo you can fire up a failover cluster, and\n\n556\n00:25:28,820 --> 00:25:32,540\nin the roles that are supported\nyou can add a DFS namespace.\n\n557\n00:25:32,540 --> 00:25:35,130\nAnd for an enterprise namespace\nit's not really necessary, but for\n\n558\n00:25:35,130 --> 00:25:37,720\na standalone, that's what you want.\n\n559\n00:25:37,720 --> 00:25:40,860\nAnd that's how you create that high\navailability from a standalone namespace\n\n560\n00:25:40,860 --> 00:25:42,365\nserver, is with failover cluster.\n\n561\n00:25:42,365 --> 00:25:42,870\n>> Right.\n\n562\n00:25:42,870 --> 00:25:45,210\nNow we've got that shared configuration so\n\n563\n00:25:45,210 --> 00:25:47,950\nas you add more servers to\nthat standalone namespace,\n\n564\n00:25:47,950 --> 00:25:52,910\nwe're all sharing the same information so\nwe get that high availability.\n\n565\n00:25:52,910 --> 00:25:55,790\n>> Yeah, like I said,\nthat is something that people overlook.\n\n566\n00:25:55,790 --> 00:25:58,630\nThey don't realize that while we have\nall this redundant storage if that\n\n567\n00:25:58,630 --> 00:26:01,434\nname space ever goes away\nwe can't find the storage.\n\n568\n00:26:01,434 --> 00:26:02,830\n>> Right.\n>> And, Mike,\n\n569\n00:26:02,830 --> 00:26:06,165\nyou mentioned, if you remember the UNCs,\nyou could go that way.\n\n570\n00:26:06,165 --> 00:26:08,260\n>> Right.\n>> But our end users,\n\n571\n00:26:08,260 --> 00:26:09,520\nthey're not gonna know those UNCs.\n\n572\n00:26:09,520 --> 00:26:11,026\nThey're usually gonna have,\nit's a map drive.\n\n573\n00:26:11,026 --> 00:26:12,290\nRight?\nSo they've got a Q drive.\n\n574\n00:26:12,290 --> 00:26:14,105\nAnd they're like my Q drive's not working.\n\n575\n00:26:14,105 --> 00:26:14,770\n>> [LAUGH]\n>> And\n\n576\n00:26:14,770 --> 00:26:17,085\nthey don't know to re-map\nthat somewhere else.\n\n577\n00:26:17,085 --> 00:26:17,630\n>> Right.\n\n578\n00:26:17,630 --> 00:26:21,100\n>> And DFS handles that so\nwe definitely want to keep it operational.\n\n579\n00:26:21,100 --> 00:26:25,870\nSo if your doing a stand alone DFS\nnamespace, fire up a failover cluster and\n\n580\n00:26:25,870 --> 00:26:26,980\nthen throw it on there.\n\n581\n00:26:26,980 --> 00:26:29,940\nEven if you don't have a lot of\nexpensive clustering hardware,\n\n582\n00:26:29,940 --> 00:26:32,195\nyou could fire up two VMs.\n\n583\n00:26:32,195 --> 00:26:33,475\nAnd you could do the cluster there, but\n\n584\n00:26:33,475 --> 00:26:36,415\nthe important part would be to\nhave the VMs on separate hardware.\n\n585\n00:26:36,415 --> 00:26:37,075\nRight?\n\n586\n00:26:37,075 --> 00:26:38,925\nAnd then you can set that up and\n\n587\n00:26:38,925 --> 00:26:41,595\ngo through that using shared VHDs or\nwhatever.\n\n588\n00:26:41,595 --> 00:26:46,395\nYou can create that connectivity and build\na virtual cluster for that name space.\n\n589\n00:26:46,395 --> 00:26:48,235\nSo, there's different ways to go about it.\n\n590\n00:26:48,235 --> 00:26:52,458\nThere is no point in doing two virtual\nmachines in a cluster on top of the same\n\n591\n00:26:52,458 --> 00:26:53,101\nHyper-V host.\n\n592\n00:26:53,101 --> 00:26:55,515\n>> [LAUGH]\n>> Cuz that doesn't gain you anything.\n\n593\n00:26:55,515 --> 00:26:57,215\n>> Yeah.\n>> Except a headache.\n\n594\n00:26:57,215 --> 00:26:58,670\n>> [LAUGH]\n>> So definitely not something to\n\n595\n00:26:58,670 --> 00:27:00,300\neven bother with messing with.\n\n596\n00:27:00,300 --> 00:27:03,110\nBut those are some of the things that\nwe need to think about with DFS.\n\n597\n00:27:03,110 --> 00:27:04,885\nWe don't have a whole heck of\na lot to talk on this one,\n\n598\n00:27:04,885 --> 00:27:06,620\nbecause most of\nthe redundancy is built in.\n\n599\n00:27:06,620 --> 00:27:07,962\nIt's kind of the point of the protocol.\n\n600\n00:27:07,962 --> 00:27:09,443\n>> Yeah.\n\n601\n00:27:09,443 --> 00:27:11,880\n>> So, now,\nI just want to show you guys real quick,\n\n602\n00:27:11,880 --> 00:27:16,480\nhere I'm kinda firing up the,\nthis is the fail over custom manager.\n\n603\n00:27:16,480 --> 00:27:19,450\nAnd I'm just going under roles here,\nand configure role.\n\n604\n00:27:19,450 --> 00:27:23,860\nAnd when you go into configure role,\nit lists DFS names based server, and\n\n605\n00:27:23,860 --> 00:27:27,290\nit doesn't really call out in\nhere that it's a standalone.\n\n606\n00:27:27,290 --> 00:27:27,890\nRight?\n\n607\n00:27:27,890 --> 00:27:30,850\nAnd, so that's why I kinda wanted to\nbring this up is to show it to you.\n\n608\n00:27:32,250 --> 00:27:36,330\nThe first time I saw this I was\nlike why would wanna cluster DFS?\n\n609\n00:27:36,330 --> 00:27:38,720\nAnd I just wasn't thinking\nabout the standalone.\n\n610\n00:27:38,720 --> 00:27:40,060\nSo it doesn't call it out right here.\n\n611\n00:27:40,060 --> 00:27:43,622\nSo it's easy to forget that,\nbut that is the purpose of it.\n\n612\n00:27:43,622 --> 00:27:46,410\nAll right, so, as far as that,\nthat's pretty much it for DFS.\n\n613\n00:27:46,410 --> 00:27:47,670\nSo,\n>> I think so\n\n614\n00:27:47,670 --> 00:27:49,260\n>> In this segment we've taken a look at\n\n615\n00:27:49,260 --> 00:27:53,010\nwe did our storage pools and\nstorage spaces, which really\n\n616\n00:27:53,010 --> 00:27:54,590\ncentered around picking the right hardware\n>> Right\n\n617\n00:27:54,590 --> 00:27:55,910\n>> That was our redundancy there.\n\n618\n00:27:57,180 --> 00:28:01,220\nWe all stuck on DFS, and\nanother technology we need to talk about\n\n619\n00:28:01,220 --> 00:28:04,310\nis kind of linked back to\nthe storage pools is MPIO.\n\n620\n00:28:04,310 --> 00:28:06,390\nBut it actually applies to\na lot of different things.\n\n621\n00:28:06,390 --> 00:28:09,510\nSo we're gonna save that and\ntalk about it after the break.\n\n622\n00:28:09,510 --> 00:28:10,560\nStay tuned.\n\n623\n00:28:10,560 --> 00:28:15,440\nWe'll be back with more highly\navailable storage after this.\n\n624\n00:28:18,055 --> 00:28:23,213\n[SOUND] All right, welcome back everybody.\n\n625\n00:28:23,213 --> 00:28:27,259\nSo in the last segment we got a chance\nto see some of the basic ideas behind\n\n626\n00:28:27,259 --> 00:28:29,480\nstorage, high availability.\n\n627\n00:28:29,480 --> 00:28:33,670\nAnd now we want to move into a different\nthing that I know we've mentioned it\n\n628\n00:28:33,670 --> 00:28:36,290\nbriefly in other episodes, but\nwe want to cover it in depth here.\n\n629\n00:28:36,290 --> 00:28:41,066\nWhich is MPIO, or Multipath Input/Output.\n\n630\n00:28:41,066 --> 00:28:41,960\nRight?\n\n631\n00:28:41,960 --> 00:28:44,580\nTypically, back in the old days,\n\n632\n00:28:44,580 --> 00:28:46,270\nyour computer would expect\nto have a hard drive.\n\n633\n00:28:46,270 --> 00:28:50,030\nAnd it would expect to have a single\nconnection to that hard drive.\n\n634\n00:28:50,030 --> 00:28:53,090\nMaybe IDE, maybe SCSI, whatever it was.\n\n635\n00:28:53,090 --> 00:28:56,280\nAnd as things have advanced most\ncomputer still follow that same model.\n\n636\n00:28:56,280 --> 00:28:58,250\nThey expect to have one\nconnection to the hard drive.\n\n637\n00:28:59,318 --> 00:29:01,990\nBut if we want good redundancy,\n\n638\n00:29:01,990 --> 00:29:03,770\nwouldn't it be nice to have two\nconnections to the hard drive?\n\n639\n00:29:03,770 --> 00:29:06,388\nAnd that way if one connection\nfailed the other could kick in.\n\n640\n00:29:06,388 --> 00:29:07,620\n>> Right.\n>> Wouldn't be\n\n641\n00:29:07,620 --> 00:29:11,660\neven nicer if we had two connection to the\nhard drive and we could use them both and\n\n642\n00:29:11,660 --> 00:29:14,150\neffectively double our access through put.\n\n643\n00:29:14,150 --> 00:29:14,960\nRight?\n\n644\n00:29:14,960 --> 00:29:18,460\nThese are ideas that just aren't possible\nin the traditional storage model.\n\n645\n00:29:18,460 --> 00:29:20,625\nMPIO works to correct that.\n\n646\n00:29:20,625 --> 00:29:23,530\nRight?\nMultiple paths to our storage.\n\n647\n00:29:23,530 --> 00:29:26,878\nNow in my example, I said it\nwould have been nice to have two?\n\n648\n00:29:26,878 --> 00:29:28,435\n>> [LAUGH]\n>> MPIO says well why stop at two?\n\n649\n00:29:28,435 --> 00:29:28,935\n>> [LAUGH]\n>> Right?\n\n650\n00:29:28,935 --> 00:29:31,420\nWe can give you a whole\n\n651\n00:29:31,420 --> 00:29:32,750\nplethora of numbers to select from.\n\n652\n00:29:32,750 --> 00:29:34,030\n>> Yeah.\nIt goes to 32, I think with MPIO.\n\n653\n00:29:34,030 --> 00:29:35,800\n>> 32 different paths.\n\n654\n00:29:35,800 --> 00:29:37,690\nI've never come even close to that.\n\n655\n00:29:37,690 --> 00:29:38,215\n>> Yeah, all right.\n\n656\n00:29:38,215 --> 00:29:42,970\n[LAUGH]\n>> Now if in your mind you're envisioning\n\n657\n00:29:42,970 --> 00:29:46,730\na hard drive with like 32 ports on it,\nthat's not quite how it works.\n\n658\n00:29:46,730 --> 00:29:47,660\nRight?\nAll this is built around\n\n659\n00:29:47,660 --> 00:29:48,820\nstandard hard drives.\n\n660\n00:29:48,820 --> 00:29:52,790\nSo where we really see it is\nwith our external storage.\n\n661\n00:29:52,790 --> 00:29:56,820\nTypically when we're talking about\niSCSI and Fiber Channel Sands.\n\n662\n00:29:56,820 --> 00:29:57,470\nAll right?\n\n663\n00:29:57,470 --> 00:30:00,910\nWith Fiber Channel SANs, you're typically\ngonna have a fiber channel switch.\n\n664\n00:30:00,910 --> 00:30:04,810\nSo you might have one connection that\ncomes out of you server, and runs to\n\n665\n00:30:04,810 --> 00:30:08,310\na 48 port switch that then connects to\nthe SANs and the other nodes, and so on.\n\n666\n00:30:09,400 --> 00:30:13,100\nYou could add a second HBA,\na second host bus adapter,\n\n667\n00:30:13,100 --> 00:30:17,090\nor many people sell single host\nbus adapters with two ports.\n\n668\n00:30:17,090 --> 00:30:19,850\nAnd you could run two\nconnections to that switch.\n\n669\n00:30:19,850 --> 00:30:23,860\nNow you've got two paths to be\nable to get to that storage.\n\n670\n00:30:23,860 --> 00:30:26,529\nWith iSCSI you could have more\nthan one network adapter.\n\n671\n00:30:26,529 --> 00:30:29,090\nRight?\nAnd thanks to various subnets and\n\n672\n00:30:29,090 --> 00:30:30,340\nroutes and other things on the network,\n\n673\n00:30:30,340 --> 00:30:33,930\nyou may have more than one method to\nbe able to get to that iSCSI SAN.\n\n674\n00:30:33,930 --> 00:30:36,690\nBy default,\nyour system will take advantage of that.\n\n675\n00:30:36,690 --> 00:30:39,540\nRight?\nSingle path IO is the default model for\n\n676\n00:30:39,540 --> 00:30:40,220\nstandard computing.\n\n677\n00:30:41,330 --> 00:30:44,750\nBut for high availability\nwe could really use MPIO.\n\n678\n00:30:44,750 --> 00:30:45,290\n>> Absolutely.\n\n679\n00:30:45,290 --> 00:30:45,950\nAbsolutely.\n\n680\n00:30:45,950 --> 00:30:47,870\nCuz we can use it, as you were saying,\nfor a couple of things.\n\n681\n00:30:47,870 --> 00:30:51,570\nWe can double up on that bandwidth,\ntake advantage of those multiple routes.\n\n682\n00:30:51,570 --> 00:30:56,210\nCuz we've talked about when we set\nup a SAN or that fiber channel SAN.\n\n683\n00:30:56,210 --> 00:30:57,920\nWe've got that high\navailability back there but\n\n684\n00:30:57,920 --> 00:31:00,980\nwe want to make sure we have the high\navailability fabric to get to that.\n\n685\n00:31:00,980 --> 00:31:04,310\nSo multiple routes, two fiver\nchannel switches or what have you,\n\n686\n00:31:04,310 --> 00:31:05,750\ndifferent sub-nets, so\n\n687\n00:31:05,750 --> 00:31:09,320\nthat if a router goes down that's not\ngonna give us a single point of failure.\n\n688\n00:31:09,320 --> 00:31:11,290\nSo we've got multiple routes we can go.\n\n689\n00:31:11,290 --> 00:31:14,720\nI might have a server that has\nnetwork adapters that are on\n\n690\n00:31:14,720 --> 00:31:16,070\ntwo different subnets.\n\n691\n00:31:16,070 --> 00:31:19,250\nAnd without MPIO it's gonna take one or\nthe other.\n\n692\n00:31:19,250 --> 00:31:21,560\nNow with MPIO I can take\nadvantage of both of those.\n\n693\n00:31:21,560 --> 00:31:24,980\nAs you were saying we can\ndouble up on our bandwidth and\n\n694\n00:31:24,980 --> 00:31:27,700\nthen if one of them fails we can\njust flop over to the other one.\n\n695\n00:31:27,700 --> 00:31:29,570\nSo very advantageous.\n\n696\n00:31:29,570 --> 00:31:32,680\nGives us again just another\nlevel of redundancy.\n\n697\n00:31:32,680 --> 00:31:36,500\nNow we're talking about adding redundancy\nto our network connection on top of\n\n698\n00:31:36,500 --> 00:31:40,370\nthe redundancy that we've already provided\nwith say that fiber channel SAN or\n\n699\n00:31:40,370 --> 00:31:41,970\nclustering or something like that.\n\n700\n00:31:41,970 --> 00:31:43,050\n>> Yeah, absolutely.\n\n701\n00:31:43,050 --> 00:31:45,300\nNow, we do get two benefits out of it,\nRight?\n\n702\n00:31:45,300 --> 00:31:49,820\nSo we get redundancy, as well as\nthe potential to double our bandwidth.\n\n703\n00:31:49,820 --> 00:31:51,750\nRight?\nIf we're doing load balancing across these\n\n704\n00:31:51,750 --> 00:31:54,770\ntwo links, we could get a lot\nof extra bandwidth with that.\n\n705\n00:31:54,770 --> 00:31:56,992\nAnd I know a lot of people look\nat their system and say, well,\n\n706\n00:31:56,992 --> 00:31:59,564\nI've got two cards in here,\nI've got two connections in my storage,\n\n707\n00:31:59,564 --> 00:32:01,018\nlet's go ahead and do load balancing.\n\n708\n00:32:01,018 --> 00:32:04,064\nBut while on the networking\nside we do typically do that,\n\n709\n00:32:04,064 --> 00:32:06,290\non the storage side we typically don't.\n\n710\n00:32:06,290 --> 00:32:10,857\nAnd the reason if you are doubling your\nstorage bandwidth on each of your nodes,\n\n711\n00:32:10,857 --> 00:32:15,490\nthat means you are going to saturate\nyour SANs bandwidth that much faster.\n\n712\n00:32:15,490 --> 00:32:18,560\nA SANs, it's shared storage.\n\n713\n00:32:18,560 --> 00:32:19,250\nSo all of these.\n\n714\n00:32:19,250 --> 00:32:21,110\nThese servers.\nAll these nodes are connecting to the same\n\n715\n00:32:21,110 --> 00:32:24,460\nset of storage and as you start\ndoubling the bandwidth of each node,\n\n716\n00:32:24,460 --> 00:32:28,090\nyou are going to exceed the available\nbandwidth that is on that SAN.\n\n717\n00:32:28,090 --> 00:32:32,180\nSo in those scenarios we will typically\noperate in more like a fail over mode.\n\n718\n00:32:32,180 --> 00:32:33,540\nA redundancy mode.\n\n719\n00:32:33,540 --> 00:32:35,910\nOne of the paths will be up and running.\n\n720\n00:32:35,910 --> 00:32:39,100\nAnd if something should happen\nto take that path down.\n\n721\n00:32:39,100 --> 00:32:42,320\nThe other path is there and\nready to rock to take its space, and\n\n722\n00:32:42,320 --> 00:32:45,540\nthat happens seamlessly\nwithout interaction.\n\n723\n00:32:45,540 --> 00:32:46,650\n>> Yeah, that's nice with MPIO.\n\n724\n00:32:46,650 --> 00:32:49,690\nI mean, you might not even\nnotice that the one has failed.\n\n725\n00:32:49,690 --> 00:32:51,050\nAnd it'll flip right over.\n\n726\n00:32:51,050 --> 00:32:54,010\nThe application isn't even aware of that.\n\n727\n00:32:54,010 --> 00:32:59,150\n>> Yeah, the other scenario, though, would\nbe, maybe I'm not talking about a SAN.\n\n728\n00:32:59,150 --> 00:33:02,590\nMaybe I'm talking about just a stand\nalone server with an external array.\n\n729\n00:33:02,590 --> 00:33:06,130\nMaybe I've got some kind of external\narray that this server is using that's\n\n730\n00:33:06,130 --> 00:33:07,030\ndedicated.\n\n731\n00:33:07,030 --> 00:33:08,360\nAnd I do want to double the bandwidth.\n\n732\n00:33:08,360 --> 00:33:11,130\nI want to get that extra storage\naccess cause the server has\n\n733\n00:33:11,130 --> 00:33:12,370\nthe dedicated storage.\n\n734\n00:33:12,370 --> 00:33:14,370\nAnd that's, you know, you use NPIO also.\n\n735\n00:33:14,370 --> 00:33:18,150\nAnd when you put it in load\nbalancing you still get redundancy.\n\n736\n00:33:18,150 --> 00:33:21,410\nIf one path died you just stepped\ndown to do a single path.\n\n737\n00:33:21,410 --> 00:33:25,150\nYou go down to 50% of your bandwidth or\nreally 100% of one connection.\n\n738\n00:33:25,150 --> 00:33:27,452\nBut when both connections\nare up you've got 200%.\n\n739\n00:33:27,452 --> 00:33:30,000\nAll right 100% of two connections.\n\n740\n00:33:30,000 --> 00:33:32,930\nSo that's kind of the idea with MPIO.\n\n741\n00:33:32,930 --> 00:33:39,360\nNow you might ask yourself, isn't NPIO\njust kind of a straight forward thing?\n\n742\n00:33:39,360 --> 00:33:42,680\nIf I have two connections to the storage,\nwouldn't the server just see that?\n\n743\n00:33:42,680 --> 00:33:44,830\nWell, let's talk about\nthat just a little bit.\n\n744\n00:33:44,830 --> 00:33:47,370\nWhat would normally happen without NPIO.\n\n745\n00:33:47,370 --> 00:33:50,140\nI got a little diagram here.\n\n746\n00:33:50,140 --> 00:33:52,578\nAnd, actually can I hide these?\n\n747\n00:33:52,578 --> 00:33:54,710\nYes.\nAll right.\n\n748\n00:33:54,710 --> 00:34:00,420\nThis is an example right here of\na fully redundant switch fabric, right?\n\n749\n00:34:00,420 --> 00:34:01,540\nSo I've got a SAN,\n\n750\n00:34:01,540 --> 00:34:05,770\nwhich is a fiber channel SAN and\nI've got four nodes that are connected.\n\n751\n00:34:05,770 --> 00:34:08,460\nAnd I wanted full redundancy.\n\n752\n00:34:08,460 --> 00:34:10,890\nA lot of fiber channels SANs will have\nat least four connectors on them so\n\n753\n00:34:10,890 --> 00:34:14,930\nI could have run these four nodes\ndirectly into the SAN and been happy.\n\n754\n00:34:14,930 --> 00:34:20,430\nThat would be something like you know,\nI thought I'd.\n\n755\n00:34:20,430 --> 00:34:23,480\nIt's something like this here where I've\ngot the two nodes plugged directly in.\n\n756\n00:34:23,480 --> 00:34:26,600\nBut putting a switch in place,\nI can scale out more,\n\n757\n00:34:26,600 --> 00:34:31,540\nI can add more nodes and it's a rare SAN\nthat has more than four connectors on it.\n\n758\n00:34:31,540 --> 00:34:34,320\nI have seen some with eight but\nit's pretty rare.\n\n759\n00:34:34,320 --> 00:34:38,720\nAll right, so, if we want to have more\nthan that amount of nodes, we'll need\n\n760\n00:34:38,720 --> 00:34:42,610\na switch and if you have a switch, you're\nputting in a single point of failure.\n\n761\n00:34:42,610 --> 00:34:49,250\nIf the switch fails, all of your nodes\ndrop off the SAN, and that's bad.\n\n762\n00:34:49,250 --> 00:34:50,050\n>> Very bad.\n\n763\n00:34:50,050 --> 00:34:52,825\n>> That's not necessarily a\nresume-generating event, but it could be.\n\n764\n00:34:52,825 --> 00:34:55,250\n>> [LAUGH]\n>> So, we want redundancy.\n\n765\n00:34:55,250 --> 00:34:57,090\nWe bring in a second switch.\n\n766\n00:34:57,090 --> 00:35:01,350\nWell, if I've got two switches, and\na node is only plugged into one switch and\n\n767\n00:35:01,350 --> 00:35:03,980\nthat switch fails, it dies out.\n\n768\n00:35:03,980 --> 00:35:06,940\nSo, if I plug half of my\nnodes into one switch and\n\n769\n00:35:06,940 --> 00:35:10,380\nhalf into the other switch, now if a\nswitch failed, I just lost half my nodes.\n\n770\n00:35:10,380 --> 00:35:11,130\nAll right.\n\n771\n00:35:11,130 --> 00:35:15,400\nBut I could have avoided that by\nadding a second adapter into each one.\n\n772\n00:35:15,400 --> 00:35:21,020\nWith that second adapter, now Node 1\nhas a connection that runs through this\n\n773\n00:35:21,020 --> 00:35:25,730\nswitch up to the SAN and a connection that\nruns from the other switch to the SAN.\n\n774\n00:35:25,730 --> 00:35:29,140\nI've got two halves to get to that SAN.\n\n775\n00:35:29,140 --> 00:35:33,600\nAnd it doesn't matter here if it's one\nHPA that has two connectors on it, or\n\n776\n00:35:33,600 --> 00:35:36,650\nif it's two HPAs with separate connectors.\n\n777\n00:35:36,650 --> 00:35:39,230\nThat's more ideal,\nbecause what if you HPA fails?\n\n778\n00:35:39,230 --> 00:35:42,120\nYou try to eliminate as many\npoints of failure as possible,\n\n779\n00:35:42,120 --> 00:35:45,550\nbut it gets expensive, and some of\nthese just aren't that big of a deal.\n\n780\n00:35:45,550 --> 00:35:48,570\nFor example, if node 1 and\nnode 2 are clustered and\n\n781\n00:35:48,570 --> 00:35:51,970\nnode 1 fails, I'm not really worried\nabout that because node 2 takes over.\n\n782\n00:35:51,970 --> 00:35:56,260\nSo I might not go with two HBAs here and\njust do one HBA with two connectors.\n\n783\n00:35:56,260 --> 00:36:00,210\nIt's all about figuring out which device\nyou're trying to provide redundancy for.\n\n784\n00:36:00,210 --> 00:36:04,920\nBut with this in place, node 1 has\ntwo pathways it can take to get to,\n\n785\n00:36:04,920 --> 00:36:09,500\nlet's say, this LAN right here.\n\n786\n00:36:09,500 --> 00:36:11,060\nWithout MPIO.\n\n787\n00:36:11,060 --> 00:36:13,830\nSo just going on the standard model,\nif we go and set this up and\n\n788\n00:36:13,830 --> 00:36:15,580\nwe build these two connections.\n\n789\n00:36:15,580 --> 00:36:17,650\nAnd we reach out and connect to that LAN,\n\n790\n00:36:17,650 --> 00:36:22,030\nwhat Windows is going to do is see\nthat as two different hard drives.\n\n791\n00:36:22,030 --> 00:36:22,610\nRight?\n\n792\n00:36:22,610 --> 00:36:23,900\nThe LAN ID is the same.\n\n793\n00:36:23,900 --> 00:36:27,080\nIt is the same virtual hard\ndrive here in the SAN, but\n\n794\n00:36:27,080 --> 00:36:30,050\nWindows will see it as\ntwo separate hard drives.\n\n795\n00:36:30,050 --> 00:36:34,700\n>> Just doesn't understand how it can have\nmore than one path to the same device, so\n\n796\n00:36:34,700 --> 00:36:36,890\nit's gotta be two separate devices.\n\n797\n00:36:36,890 --> 00:36:40,798\n>> And that's just that throwback to\nthat old style of storage handling.\n\n798\n00:36:40,798 --> 00:36:42,250\nThat's what you'd expect.\n\n799\n00:36:42,250 --> 00:36:45,700\nThere never was a scenario before where\nyou'd have two connections to the same\n\n800\n00:36:45,700 --> 00:36:47,230\nstorage, it just doesn't happen, right?\n\n801\n00:36:47,230 --> 00:36:50,250\nSo, that's how Windows acts by default.\n\n802\n00:36:50,250 --> 00:36:52,660\nMPIO overrides that behavior.\n\n803\n00:36:52,660 --> 00:36:55,550\nIt steps in and it says,\nhey, look at LAN ID,\n\n804\n00:36:55,550 --> 00:36:58,040\nit's the same line, it's the same drive.\n\n805\n00:36:58,040 --> 00:37:00,990\nIt's got our drive signature stuck on it,\nwe know what it is.\n\n806\n00:37:00,990 --> 00:37:04,370\nIt's the same one,\nyou just have more than one path.\n\n807\n00:37:04,370 --> 00:37:08,450\nThat's the feature, that's the thing\nthat activates that ability\n\n808\n00:37:08,450 --> 00:37:10,090\nto be able to reach out and\nsee it that way.\n\n809\n00:37:11,380 --> 00:37:13,080\nNow, Microsoft did not come up with this.\n\n810\n00:37:14,530 --> 00:37:18,250\nOriginally, it was up to\nthe vendors that did it.\n\n811\n00:37:18,250 --> 00:37:21,140\nI deployed several SANs before\nMicrosoft got involved in this,\n\n812\n00:37:21,140 --> 00:37:25,800\nand, what you would do is if you had\nan HP SAN, you'd go out and you'd buy\n\n813\n00:37:27,410 --> 00:37:32,020\nHP HBA's, your host bus adapters,\nyou get them from HP and the driver for\n\n814\n00:37:32,020 --> 00:37:34,810\nthat adapter would have the MPIO\nfunctionality in it and\n\n815\n00:37:34,810 --> 00:37:38,790\nyou'd enable it and\nit would mask the drive from Windows.\n\n816\n00:37:38,790 --> 00:37:40,820\nSo that Windows only saw one drive and\n\n817\n00:37:40,820 --> 00:37:45,280\nthe HBA would handle the split, all\ninvisible to Windows but that meant that\n\n818\n00:37:45,280 --> 00:37:49,020\nevery hardware vendor that wanted to do\nthis was basically reinventing the wheel.\n\n819\n00:37:49,020 --> 00:37:50,300\nThey were creating their own technologies.\n\n820\n00:37:51,320 --> 00:37:54,870\nAnd so, that's when Microsoft stepped in.\n\n821\n00:37:54,870 --> 00:37:58,240\n>> Yeah, Microsoft now provides a generic,\nwhat they call DSM or\n\n822\n00:37:58,240 --> 00:38:01,680\nDevice Specific Module, that allows\nto connect to our different types,\n\n823\n00:38:01,680 --> 00:38:04,230\nto fiber, to SAN, or to.\n\n824\n00:38:04,230 --> 00:38:07,600\nSCSI or SAS I should say and iSCSI.\n\n825\n00:38:07,600 --> 00:38:11,900\nSo it might not get you all of the\nfeatures that that vendor specific module\n\n826\n00:38:11,900 --> 00:38:15,870\nwould get you, but for things like iSCSI\nwhere you're doing logical drives and\n\n827\n00:38:15,870 --> 00:38:18,360\nthings like that, it works really well.\n\n828\n00:38:18,360 --> 00:38:22,430\nIt's relatively easy to install.\n\n829\n00:38:22,430 --> 00:38:27,360\nWe just go into our and features\ncheck of MPIO and we're good to go.\n\n830\n00:38:27,360 --> 00:38:29,260\nAnd if we're doing like with iScuzzy.\n\n831\n00:38:29,260 --> 00:38:34,770\nWe'll go back into our iScuzzy\ninitiator and we can turn on that MPIO.\n\n832\n00:38:34,770 --> 00:38:37,100\nYou have to add the capabilities.\n\n833\n00:38:37,100 --> 00:38:39,100\nSo you go in there when you\nfirst install that MPIO.\n\n834\n00:38:39,100 --> 00:38:43,770\nYou'll go and\ntake a look at the MPIO dialog box.\n\n835\n00:38:43,770 --> 00:38:48,470\nAnd you won't have any modules in there,\nso you have to enable the one for iSCSI,\n\n836\n00:38:48,470 --> 00:38:50,330\nor the Microsoft generic one.\n\n837\n00:38:50,330 --> 00:38:53,670\nOnce you do that,\nyou go back into the iSCSI initiator, and\n\n838\n00:38:53,670 --> 00:38:56,500\ncheck a little check mark that says,\ndo you want to do NPIO?\n\n839\n00:38:56,500 --> 00:38:58,100\nAnd now it can see those\nmultiple paths and\n\n840\n00:38:58,100 --> 00:39:02,050\nthey'll just show up as multiple\nconnections right to that same drive.\n\n841\n00:39:02,050 --> 00:39:05,930\n>> And, you know, Microsoft did something\na little uncharacteristic with this one.\n\n842\n00:39:05,930 --> 00:39:10,820\nThe DSM, the Device Specific Modules\nMicrosoft created this MPIO framework and\n\n843\n00:39:10,820 --> 00:39:15,030\nthey said, hey, as a vendor, if you want,\nyou can design your hardware to be\n\n844\n00:39:15,030 --> 00:39:18,090\ncompatible with our framework and then you\ncan just use what's built into Windows.\n\n845\n00:39:18,090 --> 00:39:22,190\nAnd then people don't have to have\nspecial HBAs or special drivers.\n\n846\n00:39:22,190 --> 00:39:24,280\nThey can just use what's\nbuilt into Windows.\n\n847\n00:39:24,280 --> 00:39:25,360\nAnd some of the vendors did that.\n\n848\n00:39:25,360 --> 00:39:27,290\nThey just made their hardware compatible.\n\n849\n00:39:27,290 --> 00:39:30,710\nAnd what Microsoft would normally do\nis say, this is how you're gonna do it.\n\n850\n00:39:30,710 --> 00:39:33,530\nYou either do it this way or\nyour way's not gonna work anymore.\n\n851\n00:39:33,530 --> 00:39:35,170\nBut on this one they said, you know what?\n\n852\n00:39:35,170 --> 00:39:37,835\nWe'll still allow you to write\nyour own proprietary drivers.\n\n853\n00:39:37,835 --> 00:39:41,785\nAnd here's how you can link\nyour driver into our framework.\n\n854\n00:39:41,785 --> 00:39:43,205\nAnd so Windows see it one way.\n\n855\n00:39:43,205 --> 00:39:46,235\nWindows always see its\nown NPIO framework and\n\n856\n00:39:46,235 --> 00:39:49,985\nthen the vendor can stick in\ntheir own driver if they need.\n\n857\n00:39:49,985 --> 00:39:53,755\nThat means for us, the end user,\nthe configuration's always the same.\n\n858\n00:39:53,755 --> 00:39:54,955\nWhich is nice, right?\n\n859\n00:39:54,955 --> 00:39:56,015\n>> Absolutely.\n>> We don't have to worry about\n\n860\n00:39:56,015 --> 00:39:58,015\nconfiguring it differently for HP vs.\n\n861\n00:39:58,015 --> 00:39:58,585\nDell vs.\n\n862\n00:39:58,585 --> 00:39:59,485\nwhatever.\nIt's all done through\n\n863\n00:39:59,485 --> 00:40:00,415\nthe Windows framework.\n\n864\n00:40:00,415 --> 00:40:04,745\nIt's very compatible, so just like\nyou said, Mike, you install the role.\n\n865\n00:40:04,745 --> 00:40:07,773\nI don't have a fiber HBA, so\nI can't show it on there, but you'd\n\n866\n00:40:07,773 --> 00:40:11,533\npull up the properties of your fiber HBA,\nand you have the option to turn on NPIO.\n\n867\n00:40:11,533 --> 00:40:13,094\nI do iSCSI, though.\n\n868\n00:40:13,094 --> 00:40:14,830\nLet me show that one.\n\n869\n00:40:14,830 --> 00:40:16,270\n>> There we go.\n\n870\n00:40:16,270 --> 00:40:22,540\n>> So\nthis server is connected to iSCSI target.\n\n871\n00:40:22,540 --> 00:40:25,080\nSo I'm gonna fire up it's iSCSI initiator.\n\n872\n00:40:25,080 --> 00:40:28,910\nAnd in here I can see,\nhere's this target that I'm connected to.\n\n873\n00:40:28,910 --> 00:40:29,450\nAll right?\nSo there's\n\n874\n00:40:29,450 --> 00:40:32,400\nan iSCSI drive that's out there and\nI'm connected to it.\n\n875\n00:40:32,400 --> 00:40:34,470\nIf I take a look at the properties for\nthat connection, or\n\n876\n00:40:34,470 --> 00:40:36,010\nactually it's not in the properties,\nis it?\n\n877\n00:40:36,010 --> 00:40:37,420\nIt's when we connect.\n\n878\n00:40:37,420 --> 00:40:39,330\n>> Yep, when you connect.\n>> So I'm gonna hit my connect button.\n\n879\n00:40:39,330 --> 00:40:42,215\nI'm already connected to it, but\nyou'll see the option right there.\n\n880\n00:40:42,215 --> 00:40:44,075\nEnable multipath.\n\n881\n00:40:44,075 --> 00:40:45,325\nNow, it's not turned on.\n\n882\n00:40:45,325 --> 00:40:48,815\nEven it you've installed NPIO,\nit's still off by default.\n\n883\n00:40:48,815 --> 00:40:54,195\nIf I turn that on, that says there might\nbe more than one path to get to this node.\n\n884\n00:40:54,195 --> 00:40:55,550\nI'm not guaranteeing there is.\n\n885\n00:40:55,550 --> 00:40:56,760\nBut there might be.\n\n886\n00:40:56,760 --> 00:41:03,500\nAnd if there is, recognize it, and\ntreat that as one Disp, one connection.\n\n887\n00:41:03,500 --> 00:41:05,910\nDon't treat it as two\ncompletely separate Disps.\n\n888\n00:41:05,910 --> 00:41:07,120\nIt's as simple as checking that off.\n\n889\n00:41:07,120 --> 00:41:07,660\n>> Ya, that's great.\n\n890\n00:41:07,660 --> 00:41:09,820\nI think that Disp's gonna go out,\ndiscover it on its own, and\n\n891\n00:41:09,820 --> 00:41:10,600\nwe don't have to do anything.\n\n892\n00:41:10,600 --> 00:41:13,020\nAll of a sudden,\nyou'll go over to your targets, and\n\n893\n00:41:13,020 --> 00:41:14,140\ntake a look at what drives you see.\n\n894\n00:41:14,140 --> 00:41:16,470\nAnd you'll see two paths\nto that same drive.\n\n895\n00:41:17,680 --> 00:41:18,420\nVery good.\n\n896\n00:41:18,420 --> 00:41:19,620\n>> So it is a great technology.\n\n897\n00:41:20,800 --> 00:41:25,690\nAs far as customizing it on the load\nbalancing versus failover side,\n\n898\n00:41:25,690 --> 00:41:28,520\na lot of that does come down to\nthe driver that you're choosing.\n\n899\n00:41:28,520 --> 00:41:31,720\nYou do need to make sure that if\nyou're doing MPIO that your SAN\n\n900\n00:41:31,720 --> 00:41:33,770\nneeds to support it also.\n\n901\n00:41:33,770 --> 00:41:36,970\nAlmost every iSCSI SAN\nthat's out there does.\n\n902\n00:41:36,970 --> 00:41:39,610\nFiber channel SANs can be a little\nbit of a different story.\n\n903\n00:41:39,610 --> 00:41:41,070\nMost of the time, they do.\n\n904\n00:41:41,070 --> 00:41:45,160\nBut I have seen some really cheap ones,\nlike the generic brand fiber SANs.\n\n905\n00:41:45,160 --> 00:41:48,750\nThey don't have that support,\nand they get confused.\n\n906\n00:41:48,750 --> 00:41:52,100\nThey might have two adaptors on them for\nredundancy, but\n\n907\n00:41:52,100 --> 00:41:53,670\nit's not actually two different paths.\n\n908\n00:41:53,670 --> 00:41:58,950\nThey might be using it just as\nidentical HPAs on their side.\n\n909\n00:41:58,950 --> 00:42:02,290\nAnd so it's not truly acting\nas two different HPAs.\n\n910\n00:42:02,290 --> 00:42:03,800\nI've seen that a few times.\n\n911\n00:42:03,800 --> 00:42:05,260\nSo be careful with that.\n\n912\n00:42:05,260 --> 00:42:06,830\nIt all comes down to hardware selection.\n\n913\n00:42:06,830 --> 00:42:10,230\nAnd you know, you want to pick\nhardware that is rated by Microsoft.\n\n914\n00:42:10,230 --> 00:42:14,662\nIt's part of their Windows\nstore catalog or the WH2L.\n\n915\n00:42:14,662 --> 00:42:20,000\nAll right,\nI think that is probably about it.\n\n916\n00:42:20,000 --> 00:42:21,750\nA couple of other things i guess,\n\n917\n00:42:21,750 --> 00:42:27,030\nthat I think are worth mentioning is MPIO\nplays along really nicely with clustering.\n\n918\n00:42:28,070 --> 00:42:30,205\nSo if you've got a fail over cluster,\n\n919\n00:42:30,205 --> 00:42:32,670\nyou've got your connections\nto your cluster disk, right?\n\n920\n00:42:32,670 --> 00:42:35,230\nYour shared storage for the cluster.\n\n921\n00:42:35,230 --> 00:42:37,260\nAnd you can use MPIO for that.\n\n922\n00:42:37,260 --> 00:42:39,270\nAnd that will create resiliency.\n\n923\n00:42:39,270 --> 00:42:44,690\nIf your fiber HBA dies or the link dies or\none of your switches dies, you\n\n924\n00:42:44,690 --> 00:42:47,630\ngot another connection to that storage and\nyour cluster doesn't have to fail over.\n\n925\n00:42:47,630 --> 00:42:50,220\nYou don't have to move your\nresources to another node.\n\n926\n00:42:50,220 --> 00:42:53,150\nVersus, if you actually\ndid lose your connection,\n\n927\n00:42:53,150 --> 00:42:56,460\nanother node would have to step in and\ntake over for that role.\n\n928\n00:42:56,460 --> 00:42:57,830\nBecause your connection is gone.\n\n929\n00:42:57,830 --> 00:43:00,820\nSo it's increasing\nthe redundancy of that cluster.\n\n930\n00:43:02,110 --> 00:43:03,260\nBut it's doing it at cost, right?\n\n931\n00:43:03,260 --> 00:43:04,850\nAll this extra hardware.\n\n932\n00:43:04,850 --> 00:43:09,960\nIf you weren't so worried about that,\nif you felt that the cluster fail over,\n\n933\n00:43:09,960 --> 00:43:13,190\nthat little down time that's created\nby a fail over, if that's acceptable.\n\n934\n00:43:13,190 --> 00:43:16,090\nThen, it might be overkill to start\nthrowing in a bunch of extra links,\n\n935\n00:43:16,090 --> 00:43:18,980\nand building out this\nfull mesh redundancy.\n\n936\n00:43:18,980 --> 00:43:21,300\nIt gets more expensive with\nthe more servers you add.\n\n937\n00:43:21,300 --> 00:43:22,080\n>> Yep.\n\n938\n00:43:22,080 --> 00:43:25,120\n>> But I will say that, the dual\nconnection HBAs are a lot cheaper now,\n\n939\n00:43:25,120 --> 00:43:26,150\nthan they used to be.\n\n940\n00:43:26,150 --> 00:43:27,690\nSo that cost isn't so great.\n\n941\n00:43:27,690 --> 00:43:30,040\nAnd even the fiber cabling has\nbecome a lot less expensive.\n\n942\n00:43:30,040 --> 00:43:31,000\n>> Right.\n>> So\n\n943\n00:43:31,000 --> 00:43:33,660\nit boils down to the multiple switches.\n\n944\n00:43:33,660 --> 00:43:35,360\nAnd a SAN that can handle that traffic,\nright?\n\n945\n00:43:37,530 --> 00:43:40,390\nSo, all right, so that's basically MPIO.\n\n946\n00:43:40,390 --> 00:43:42,050\nMike we see it with iSCSI.\n\n947\n00:43:42,050 --> 00:43:43,330\nWe see it with Fiber Channel.\n\n948\n00:43:45,190 --> 00:43:48,920\nDoes MPIO work with shared SAS,\nI don't think it does, does it?\n\n949\n00:43:48,920 --> 00:43:52,070\n>> I don't think so, it was straight\nup I don't I think it does, but\n\n950\n00:43:52,070 --> 00:43:53,050\nnot with the shared.\n\n951\n00:43:53,050 --> 00:43:53,550\n>> All right.\n\n952\n00:43:53,550 --> 00:43:57,070\nSo, in production environments,\nby the time you get to MPIO,\n\n953\n00:43:57,070 --> 00:43:59,710\nyou're normally up in the higher\nfiber channel storage.\n\n954\n00:43:59,710 --> 00:44:01,490\nThat's how I've always implemented it.\n\n955\n00:44:01,490 --> 00:44:03,160\nI've played around with it in I SCSI.\n\n956\n00:44:03,160 --> 00:44:04,989\nI've never seen it with shared SAS.\n\n957\n00:44:04,989 --> 00:44:06,375\nSo I'm pretty sure you can't do it there.\n\n958\n00:44:06,375 --> 00:44:09,160\nAnd that makes sense,\ncuz it is directly attached to the server.\n\n959\n00:44:09,160 --> 00:44:11,680\nVersus something that's\nlogically attached.\n\n960\n00:44:13,240 --> 00:44:15,250\nAll right, so that's about it for MPIO.\n\n961\n00:44:15,250 --> 00:44:17,370\nWhat else is on our list.\n\n962\n00:44:17,370 --> 00:44:18,970\n>> Got good old iSCSI and iSNS.\n\n963\n00:44:18,970 --> 00:44:21,090\n>> Yeah?\nLet's run with that,\n\n964\n00:44:21,090 --> 00:44:23,930\ncuz there's not a whole\nheck of a lot there too.\n\n965\n00:44:23,930 --> 00:44:27,590\nI mentioned, how my server here is\nconnected to an iSCSI target, right?\n\n966\n00:44:27,590 --> 00:44:28,710\nAnd if I look at it,\n\n967\n00:44:28,710 --> 00:44:32,350\nthat iSCSI target I'm connected to\nis actually my domain controller.\n\n968\n00:44:32,350 --> 00:44:35,940\nSo on my domain controller,\nI'm running the iSCSI target.\n\n969\n00:44:35,940 --> 00:44:37,770\nRemember with iSCSI, you have two pieces.\n\n970\n00:44:37,770 --> 00:44:39,100\nYou have the iSCSI target.\n\n971\n00:44:39,100 --> 00:44:39,950\nThat's like the server.\n\n972\n00:44:39,950 --> 00:44:41,680\nThat's where the storage is.\n\n973\n00:44:41,680 --> 00:44:43,630\nAnd then you have the iSCSI initiator.\n\n974\n00:44:43,630 --> 00:44:46,100\nThat's the client,\nthe person that's connecting.\n\n975\n00:44:46,100 --> 00:44:48,345\nThe target is normally gonna\nbe a hardware appliance.\n\n976\n00:44:48,345 --> 00:44:48,880\n>> Mm-hm.\n\n977\n00:44:48,880 --> 00:44:50,970\n>> There are many companies like Dell and\nHP.\n\n978\n00:44:50,970 --> 00:44:55,210\nYou've got,\neven EMC makes some iSCSI stuff.\n\n979\n00:44:55,210 --> 00:44:58,370\nDrobo, there's a lot of different\ncompanies out there that do.\n\n980\n00:44:58,370 --> 00:45:01,190\nAnd those are your iSCSI targets.\n\n981\n00:45:01,190 --> 00:45:03,470\nMicrosoft has a software iSCSI target too.\n\n982\n00:45:03,470 --> 00:45:06,100\nSo it could just be a Windows\nserver that's running and\n\n983\n00:45:06,100 --> 00:45:08,210\nthat's exactly what I've got in my DC.\n\n984\n00:45:08,210 --> 00:45:09,170\nAll right.\n\n985\n00:45:09,170 --> 00:45:11,270\nNow it's up, it's running.\n\n986\n00:45:11,270 --> 00:45:13,640\nIt's got storage connected to it.\n\n987\n00:45:13,640 --> 00:45:15,740\nWhat happens if this DC goes offline?\n\n988\n00:45:15,740 --> 00:45:16,890\n>> Yeah, exactly.\n\n989\n00:45:16,890 --> 00:45:19,620\nCuz we could have, that DC could have\nmultiple network adaptors in it,\n\n990\n00:45:19,620 --> 00:45:21,550\nconnected to different subnets.\n\n991\n00:45:21,550 --> 00:45:24,300\nSo my initiators could have MPIO enabled,\nand\n\n992\n00:45:24,300 --> 00:45:26,380\nconnecting to that with multiple routes.\n\n993\n00:45:26,380 --> 00:45:27,580\nBut the target itself.\n\n994\n00:45:27,580 --> 00:45:29,100\nIf it's not available,\n\n995\n00:45:29,100 --> 00:45:32,290\nnow it's not serving up those targets\nthat my initiator can go connect to.\n\n996\n00:45:32,290 --> 00:45:34,610\nNo matter how many paths,\nI have to get to it.\n\n997\n00:45:34,610 --> 00:45:37,330\nSo, we want to provide\nsome redundancy there.\n\n998\n00:45:37,330 --> 00:45:41,050\nIt's actually pretty easy with iSCSI,\nwith iSCSI targets, anyway.\n\n999\n00:45:41,050 --> 00:45:44,050\nIt's one of our built-in\nroles that we can add\n\n1000\n00:45:44,050 --> 00:45:45,990\nto our Windows Server Failover Cluster.\n\n1001\n00:45:45,990 --> 00:45:48,060\n>> Yeah, and\nyou definitely want to do that.\n\n1002\n00:45:48,060 --> 00:45:50,430\nThis is something you're depending on.\n\n1003\n00:45:50,430 --> 00:45:52,900\nEven if you're not using it for,\n\n1004\n00:45:52,900 --> 00:45:56,140\nall the examples on Microsoft's site\nare like Hyper-V, Hyper-V, Hyper-V, right.\n\n1005\n00:45:56,140 --> 00:45:59,860\nSo you got a cluster shared volume stored\non an iSCSI SAN, and you want, or,\n\n1006\n00:45:59,860 --> 00:46:03,220\nyou know, stored on a Windows server\nthat's running the iSCSI target, and\n\n1007\n00:46:03,220 --> 00:46:04,590\nyou want to put in redundancy there.\n\n1008\n00:46:04,590 --> 00:46:05,920\nThrow in the cluster and go.\n\n1009\n00:46:05,920 --> 00:46:10,570\nBut even if it's just a simple file\nserver that storage is on the iSCSI side.\n\n1010\n00:46:10,570 --> 00:46:13,860\nAnd that iSCSI storage is really\nimportant to you, it's your file server.\n\n1011\n00:46:13,860 --> 00:46:15,610\n>> Right.\n>> So you'll still want that redundancy.\n\n1012\n00:46:15,610 --> 00:46:18,790\nIt doesn't have to be virtual machines\neven though Microsoft's site kind of\n\n1013\n00:46:18,790 --> 00:46:20,000\npaints it out that way.\n\n1014\n00:46:20,000 --> 00:46:22,520\nSo, this is my iSCSI target.\n\n1015\n00:46:22,520 --> 00:46:23,580\nI can see I'm running it.\n\n1016\n00:46:23,580 --> 00:46:26,730\nAnd here's all the iSCSI\ndisks that I'm publishing.\n\n1017\n00:46:26,730 --> 00:46:28,740\nAnd many of them are connected,\nsome aren't.\n\n1018\n00:46:28,740 --> 00:46:29,570\nRight?\nSo,\n\n1019\n00:46:29,570 --> 00:46:32,500\none of these is going to be the one that\nwas connected to that server I was on.\n\n1020\n00:46:32,500 --> 00:46:36,970\nI was on s comma one,\nwhich is conveniently not in the list.\n\n1021\n00:46:36,970 --> 00:46:38,420\nI've got multiple connections.\n\n1022\n00:46:38,420 --> 00:46:40,700\nSo it's going to be masked in here.\n\n1023\n00:46:40,700 --> 00:46:41,772\nSo anyhow, it'll be in here somewhere.\n\n1024\n00:46:41,772 --> 00:46:45,830\nBut [LAUGH] so that server's connected\nto one of these pieces of storage.\n\n1025\n00:46:45,830 --> 00:46:46,860\nI don't know which one.\n\n1026\n00:46:46,860 --> 00:46:50,400\nAnd each one is stored on\na drive here on this server.\n\n1027\n00:46:50,400 --> 00:46:54,600\nWell, that drive,\nthat can be shared storage, right?\n\n1028\n00:46:54,600 --> 00:46:56,605\nThat can be a,\nit can be a cluster shared volume.\n\n1029\n00:46:56,605 --> 00:46:57,905\nAlthough, it doesn't have to be.\n\n1030\n00:46:57,905 --> 00:47:00,935\nIt can just be traditional\nstorage inside of the cluster.\n\n1031\n00:47:00,935 --> 00:47:03,835\nSo a cluster resource storage.\n\n1032\n00:47:03,835 --> 00:47:08,155\nAnd then the iSCSI roll, instead of\nrunning it right here on the server like\n\n1033\n00:47:08,155 --> 00:47:11,855\nI'm doing, we can add that into\nour failover cluster manager.\n\n1034\n00:47:11,855 --> 00:47:13,935\nAnd this one is actually not in a cluster.\n\n1035\n00:47:13,935 --> 00:47:16,470\nLet me jump over to a server that is.\n\n1036\n00:47:16,470 --> 00:47:18,570\nSo here,\nI'm in my Failover Cluster Manager.\n\n1037\n00:47:18,570 --> 00:47:20,124\nAnd what you would do is,\n\n1038\n00:47:20,124 --> 00:47:24,820\nyou would take two servers that both\nhad a path to get to that storage.\n\n1039\n00:47:24,820 --> 00:47:26,665\nTo wherever that storage was being placed.\n\n1040\n00:47:26,665 --> 00:47:31,050\nYou would install the iSCSI\ntarget roll on them.\n\n1041\n00:47:31,050 --> 00:47:33,250\nAnd then,\nhere in the Failover Cluster Manager,\n\n1042\n00:47:33,250 --> 00:47:36,450\nyou would just go to Configure Roll and\nyou'd choose iSCSI.\n\n1043\n00:47:36,450 --> 00:47:39,420\nAnd you would set up the iSCSI\ntarget as a clustered\n\n1044\n00:47:39,420 --> 00:47:42,030\nresource that could move\nbetween the two systems.\n\n1045\n00:47:42,030 --> 00:47:44,990\nI'm going to get an error, because I'm\nnot running the target on this system.\n\n1046\n00:47:44,990 --> 00:47:45,670\nBut that's it.\n\n1047\n00:47:45,670 --> 00:47:48,460\nIt's just another cluster roll\nthat we can make redundant.\n\n1048\n00:47:48,460 --> 00:47:51,160\nAnd now we take all of\nour iSCSI initiatora.\n\n1049\n00:47:51,160 --> 00:47:53,760\nAnd instead of pointing them at a single\nserver, we point them at a cluster roll.\n\n1050\n00:47:53,760 --> 00:47:55,640\n>> Yeah, a logical address.\n\n1051\n00:47:55,640 --> 00:47:57,750\n>> And it's able to fail\nover between the systems.\n\n1052\n00:47:57,750 --> 00:47:59,898\nNow, we have a highly\navailable iSCSI target.\n\n1053\n00:47:59,898 --> 00:48:03,953\nNow, I always get a kick out of this,\nbecause for me,\n\n1054\n00:48:03,953 --> 00:48:10,015\npretty much the only time I use iSCSI Is\nwhen Fibre Channel is cost prohibitive.\n\n1055\n00:48:10,015 --> 00:48:11,361\nRight?\nIt always comes down to cost.\n\n1056\n00:48:11,361 --> 00:48:17,430\nBecause Fibre Channel is better than ISCSI\nin every single way except for cost.\n\n1057\n00:48:17,430 --> 00:48:18,030\nRight?\n\n1058\n00:48:18,030 --> 00:48:23,100\nSo when I'm deploying ISCSI,\nit's usually budget constrained and,\n\n1059\n00:48:23,100 --> 00:48:26,590\nif I'm gonna be deploying a cluster For\n\n1060\n00:48:26,590 --> 00:48:30,100\nthese Windows servers that\nare acting as ISCSI targets, right?\n\n1061\n00:48:30,100 --> 00:48:31,620\nTheir storage needs to be shared.\n\n1062\n00:48:31,620 --> 00:48:36,340\nSo that's gonna either be shared SASS or\nit's going to be a Fibre Channel SAN,\n\n1063\n00:48:36,340 --> 00:48:38,120\nwhich we already said we\ndidn't have the money for.\n\n1064\n00:48:38,120 --> 00:48:41,215\nSo the back end could actually be\nanother ISCSI connection, right?\n\n1065\n00:48:41,215 --> 00:48:43,915\nBut, that's not necessarily what we want.\n\n1066\n00:48:43,915 --> 00:48:46,455\nSo if you already had an iSCSI\nconnection on the back end,\n\n1067\n00:48:46,455 --> 00:48:48,115\nyou would just connect directly to it.\n\n1068\n00:48:48,115 --> 00:48:51,065\nSo there's not a lot of scenarios\nwhere this works out really well.\n\n1069\n00:48:51,065 --> 00:48:56,332\nWhat you'd normally see,\nis where you had shared SASS storage and\n\n1070\n00:48:56,332 --> 00:48:59,425\nyou had to use iSCSI for\na particular purpose so\n\n1071\n00:48:59,425 --> 00:49:02,765\nyou connected to your two nodes, you build\na cluster, you bring up iSCSI as a cluster\n\n1072\n00:49:02,765 --> 00:49:07,530\nrole, and now people can connect to\nthat shared SASS storage via iSCSI.\n\n1073\n00:49:07,530 --> 00:49:11,230\nSo you're basically constructing\nyour own iSCSI cluster.\n\n1074\n00:49:13,520 --> 00:49:17,620\nThe other role that\nMicrosoft calls out is ISNS.\n\n1075\n00:49:17,620 --> 00:49:18,558\n>> Your favorite, right?\n\n1076\n00:49:18,558 --> 00:49:19,630\n[LAUGH]\n>> It is my favorite.\n\n1077\n00:49:19,630 --> 00:49:21,890\nThis is another one I've made fun of.\n\n1078\n00:49:21,890 --> 00:49:23,405\nI've got to stop making\nfun of all these things.\n\n1079\n00:49:23,405 --> 00:49:28,150\n>> [LAUGH]\n>> ISNS is one of those little roles that,\n\n1080\n00:49:28,150 --> 00:49:30,690\nit's actually been in Windows for\na little while now, but\n\n1081\n00:49:30,690 --> 00:49:34,220\nit's under the radar because\nnot many people use it.\n\n1082\n00:49:34,220 --> 00:49:36,848\nAnd Mike, I know you and I were talking\nabout it before the show, and I said,\n\n1083\n00:49:36,848 --> 00:49:42,230\nI have never ever used ISNS in production.\n\n1084\n00:49:42,230 --> 00:49:44,990\nAnd I don't know anyone\nelse who has either.\n\n1085\n00:49:44,990 --> 00:49:46,462\nBut Microsoft's been kind of pushing it,\n\n1086\n00:49:46,462 --> 00:49:48,750\nso it makes me wonder,\nare a lot of people using it?\n\n1087\n00:49:48,750 --> 00:49:49,460\nMaybe I'm under a rock.\n\n1088\n00:49:49,460 --> 00:49:50,780\n>> Maybe I'm missing something,\nI don't know.\n\n1089\n00:49:50,780 --> 00:49:54,430\n>> Yeah, if you don't remember\nwhat ISNS is, don't worry.\n\n1090\n00:49:54,430 --> 00:49:57,310\nIt's basically the iSCSI naming system.\n\n1091\n00:49:57,310 --> 00:50:00,390\nAnd it's like DNS For iSCSI.\n\n1092\n00:50:00,390 --> 00:50:03,520\nWhen you have a bunch of iSCSI\ntargets that are out there,\n\n1093\n00:50:03,520 --> 00:50:05,240\nyou kind of lose track of them, right?\n\n1094\n00:50:05,240 --> 00:50:08,420\n>> That list you just pulled up\nwith all those IQNs that we've got.\n\n1095\n00:50:08,420 --> 00:50:10,760\nThose iSCSI qualifying names they're long,\n\n1096\n00:50:10,760 --> 00:50:13,770\nthey're nasty,\nthey're not really easy to remember.\n\n1097\n00:50:13,770 --> 00:50:16,792\nSo when we implement that ISNS,\nit acts like DNS.\n\n1098\n00:50:16,792 --> 00:50:19,850\nIt makes it very easy\nto find those different\n\n1099\n00:50:19,850 --> 00:50:21,750\ntargets that we need to connect to.\n\n1100\n00:50:21,750 --> 00:50:26,370\n>> Yeah, and so basically, when we add\nan iSCSI target, we register it with ISNS,\n\n1101\n00:50:26,370 --> 00:50:29,520\nand then it shows up in\nbasically like a mini directory.\n\n1102\n00:50:29,520 --> 00:50:31,140\nRight?\n>> Yeah, like a master browser for\n\n1103\n00:50:31,140 --> 00:50:32,190\nyour iSCSIs.\n\n1104\n00:50:32,190 --> 00:50:34,610\nWithout ISNS,\nlet me show you what happens.\n\n1105\n00:50:34,610 --> 00:50:39,280\nBasically, you fire up your server, and\nyou fire up your iSCSI initiator, and\n\n1106\n00:50:39,280 --> 00:50:41,610\nI know I need to go and\nconnect to some storage, right.\n\n1107\n00:50:41,610 --> 00:50:44,850\nSo I'm gonna go in here and\nI'll go to discovery.\n\n1108\n00:50:44,850 --> 00:50:46,760\nAnd I'm gonna go and discover a portal.\n\n1109\n00:50:46,760 --> 00:50:50,250\nI'm gonna go and discover my iSCSI target.\n\n1110\n00:50:50,250 --> 00:50:52,400\nWell, what IP address does it use?\n\n1111\n00:50:52,400 --> 00:50:54,110\nWhat port number does it use?\n\n1112\n00:50:54,110 --> 00:50:55,247\nI don't remember, all right?\n\n1113\n00:50:55,247 --> 00:50:56,100\n>> [LAUGH]\n>> I don't know.\n\n1114\n00:50:56,100 --> 00:50:59,660\nMaybe I know the DNS name of it, but\nif I have a bunch of iSCSI targets,\n\n1115\n00:50:59,660 --> 00:51:00,940\nI might not remember.\n\n1116\n00:51:00,940 --> 00:51:04,560\nAnd so it becomes difficult\nthe larger your environment gets.\n\n1117\n00:51:04,560 --> 00:51:07,390\nSo this discovery becomes\nkind of challenging, right?\n\n1118\n00:51:07,390 --> 00:51:10,060\nAnd there's other information,\nmight need to populate, but\n\n1119\n00:51:10,060 --> 00:51:11,980\njust that part right there\nbecomes challenging.\n\n1120\n00:51:11,980 --> 00:51:14,400\nSo, instead what you can do is,\n\n1121\n00:51:14,400 --> 00:51:18,300\nright down here, you can register\nwith the ISNS server, right?\n\n1122\n00:51:18,300 --> 00:51:22,930\nI can add a server and I can plug that in\nwhatever it's IP address happens to be.\n\n1123\n00:51:22,930 --> 00:51:27,320\nAnd, then my targets can\nregister with the ISNS server and\n\n1124\n00:51:27,320 --> 00:51:31,640\nmy initiators register and now everybody's\nright there in this little directory.\n\n1125\n00:51:31,640 --> 00:51:33,340\nSo, when I go to targets.\n\n1126\n00:51:33,340 --> 00:51:35,860\nI'll see each of the targets in here and\n\n1127\n00:51:35,860 --> 00:51:39,660\nI can connect to resources\nthat are inside of them, and\n\n1128\n00:51:39,660 --> 00:51:44,155\nit gives me a nice, concise place as long\nas you use reasonable names for your IQNs.\n\n1129\n00:51:44,155 --> 00:51:45,330\n>> [LAUGH] Right.\n>> Then you'll be able to find\n\n1130\n00:51:45,330 --> 00:51:45,990\nthins pretty easy.\n\n1131\n00:51:47,190 --> 00:51:50,210\nSo you might be asking\nyourself two questions, right?\n\n1132\n00:51:50,210 --> 00:51:52,530\nSo question number one is why\ndoes Don make fun of it right?\n\n1133\n00:51:52,530 --> 00:51:56,160\nAnd the reason I make fun of\nit is The iSCSI initiator\n\n1134\n00:51:56,160 --> 00:52:00,020\nthat Microsoft has will register with\niSNS just fine, you just saw that.\n\n1135\n00:52:00,020 --> 00:52:03,380\nBut the iSCSI target\nthat Microsoft includes\n\n1136\n00:52:03,380 --> 00:52:05,245\nactually doesn't support\nregistering with iSNS.\n\n1137\n00:52:05,245 --> 00:52:05,750\n>> [LAUGH]\n>> So,\n\n1138\n00:52:05,750 --> 00:52:07,140\n>> Sorry, that just makes me laugh.\n\n1139\n00:52:07,140 --> 00:52:07,640\n>> I know.\n>> [LAUGH]\n\n1140\n00:52:07,640 --> 00:52:08,890\n>> You'd think they'd have that\n\n1141\n00:52:08,890 --> 00:52:11,382\nsupport but, so\nif you have a bunch of Windows servers.\n\n1142\n00:52:11,382 --> 00:52:13,220\nThat are running the iSCSI Target,\n\n1143\n00:52:13,220 --> 00:52:16,620\nthey can't register, and\nISNS doesn't help you.\n\n1144\n00:52:16,620 --> 00:52:19,640\nBut, if you have\na third-party iSCSI device,\n\n1145\n00:52:19,640 --> 00:52:24,590\nfrom Dell, HP, Drobo, whoever,\nthey al support ISNS.\n\n1146\n00:52:24,590 --> 00:52:28,040\nEvery one of them that I've seen,\nreleased in the last few years, so\n\n1147\n00:52:28,040 --> 00:52:29,800\nthose can get registered, and\nit works out really well.\n\n1148\n00:52:29,800 --> 00:52:32,330\nSo, on the client side, Microsoft supports\nit, and on the server side, they don't.\n\n1149\n00:52:33,510 --> 00:52:36,340\nThat's probably the main\nreason I'm in front of it.\n\n1150\n00:52:36,340 --> 00:52:37,980\n>> Correct. [LAUGH] >> But\nit is a good technology.\n\n1151\n00:52:37,980 --> 00:52:39,160\nIf Microsoft supported it better,\n\n1152\n00:52:39,160 --> 00:52:41,540\nit'd probably be something a lot\nof people would probably use.\n\n1153\n00:52:41,540 --> 00:52:44,690\nSo if we have it,\nwe do become dependent on it.\n\n1154\n00:52:44,690 --> 00:52:46,625\nAll right?\nJust like Like DNS servers.\n\n1155\n00:52:46,625 --> 00:52:49,705\nBut ISNS doesn't really have\nany redundancy like DNS does.\n\n1156\n00:52:49,705 --> 00:52:52,875\nDNS, you have zone replication,\nISNS you don't.\n\n1157\n00:52:52,875 --> 00:52:56,275\nSo if you're gonna be deploying ISNS and\ndepending on it,\n\n1158\n00:52:56,275 --> 00:53:00,615\nyou need to make it redundant, and you\ndo that with failover clustering, right?\n\n1159\n00:53:00,615 --> 00:53:04,810\nIf I jump back over to my failover\ncluster here and go to my rolls and\n\n1160\n00:53:04,810 --> 00:53:11,620\nconfigure roll, you'll see that ISNS is\nin the list as a roll that I can add in.\n\n1161\n00:53:11,620 --> 00:53:15,990\nSo instead of having an individual\nISNS server setup on a single host.\n\n1162\n00:53:15,990 --> 00:53:19,770\nI could have two nodes in a cluster,\nand put ISNS there in that role.\n\n1163\n00:53:19,770 --> 00:53:22,140\nAnd now I can fail over\nbetween the systems.\n\n1164\n00:53:22,140 --> 00:53:26,080\nSo that's how we make ISNS, we're done.\n\n1165\n00:53:26,080 --> 00:53:28,650\nAnd as far as iSCSI, and\nall that good stuff goes,\n\n1166\n00:53:28,650 --> 00:53:30,010\nI think that's about all\nwe've got on that one right?\n\n1167\n00:53:30,010 --> 00:53:30,510\n>> I think so.\n\n1168\n00:53:31,770 --> 00:53:35,260\nWell, we've got another really cool\nfeature that came out in R2 that we need\n\n1169\n00:53:35,260 --> 00:53:38,380\nto talk about, but we're out of time\nin this segment, so stay tuned,\n\n1170\n00:53:38,380 --> 00:53:45,118\nwe'll pick back up in just a moment with\nsome of the new features in SMB 3.0.\n\n1171\n00:53:45,118 --> 00:53:47,416\nStay Tuned.\n\n1172\n00:53:47,416 --> 00:53:54,670\n[NOISE] All right, welcome back everybody.\n\n1173\n00:53:54,670 --> 00:53:59,430\nFor our last objective, we're going to\ntake a look at some neat new features that\n\n1174\n00:53:59,430 --> 00:54:04,040\nwe have in Windows Server 2012 and 2012 R2\nthat are kind of built into the system.\n\n1175\n00:54:04,040 --> 00:54:06,390\nThe actual objective name is, Plan for\n\n1176\n00:54:06,390 --> 00:54:10,080\nand implement storage using RDMA and\nSMB multichannels.\n\n1177\n00:54:10,080 --> 00:54:11,090\n>> Sounds fancy anyway.\n\n1178\n00:54:11,090 --> 00:54:12,493\n>> What the heck are they talking about?\n\n1179\n00:54:12,493 --> 00:54:15,070\n>> [LAUGH]\n>> Well, let's talk about our problem\n\n1180\n00:54:15,070 --> 00:54:17,980\nfirst, and then we'll talk about these\nguys and how they provide a solution.\n\n1181\n00:54:17,980 --> 00:54:23,640\nSo, if you have a shared folder, then\nwhen people access that shared folder,\n\n1182\n00:54:23,640 --> 00:54:26,860\nthey're using SMB,\nthe Server Message Block protocol.\n\n1183\n00:54:26,860 --> 00:54:30,290\nIt is an old protocol,\nit's been around a long time.\n\n1184\n00:54:30,290 --> 00:54:32,530\nAnd so it's been revised a few times.\n\n1185\n00:54:32,530 --> 00:54:35,380\nYou had SNB 1.0 and Windows Server 2008.\n\n1186\n00:54:35,380 --> 00:54:39,340\nThat's gonna be 2.X I think\nis the version in that.\n\n1187\n00:54:39,340 --> 00:54:40,800\nAnd now we have SNB 3.0.\n\n1188\n00:54:40,800 --> 00:54:44,440\nSo SNB is kind of revised over the years.\n\n1189\n00:54:44,440 --> 00:54:47,260\nBut one of the main problems with SNB is\nthat it didn't really have any redundancy\n\n1190\n00:54:47,260 --> 00:54:47,800\nbuilt into it.\n\n1191\n00:54:47,800 --> 00:54:48,440\n>> Right.\nWhen\n\n1192\n00:54:48,440 --> 00:54:51,640\nyou connected to a share you just\naw the share and that was that.\n\n1193\n00:54:51,640 --> 00:54:56,730\n>> Kinda what you were saying earlier\nwith MPIO, you know it wasn't typical for\n\n1194\n00:54:56,730 --> 00:55:00,930\na client to have more than one connection\nto a network so there is really no need\n\n1195\n00:55:00,930 --> 00:55:05,820\nfor anything like that\n>> So Microsoft has been improving that.\n\n1196\n00:55:05,820 --> 00:55:09,030\nWith SMB 2.0, that is where\nthey built in the DFS support.\n\n1197\n00:55:09,030 --> 00:55:11,380\nTo be able to do to look-ups\nto find the destination and\n\n1198\n00:55:11,380 --> 00:55:12,940\nthen connect directly to the destination.\n\n1199\n00:55:12,940 --> 00:55:15,510\nIf the destination is gone,\nto do another look-up.\n\n1200\n00:55:15,510 --> 00:55:18,856\nIt's SMB that's doing that,\nand that was a part of 2.0.\n\n1201\n00:55:18,856 --> 00:55:23,750\nSo in 3.0, they've continued to improve\nit and they've improved it with some neat\n\n1202\n00:55:23,750 --> 00:55:29,890\nfeatures that actually make it viable\nto use SMB for virtual machine storage.\n\n1203\n00:55:29,890 --> 00:55:32,450\nI know, in the past it would\nbe absolutely ludicrous to it,\n\n1204\n00:55:32,450 --> 00:55:33,650\nwhy the hell would you do that?\n\n1205\n00:55:33,650 --> 00:55:36,390\n[LAUGH] We think like oh,\nif I need shared storage for\n\n1206\n00:55:36,390 --> 00:55:40,808\nvirtual machines like a cluster, I'm going\nto use iSCSI or a [INAUDIBLE] [CROSSTALK]\n\n1207\n00:55:40,808 --> 00:55:41,666\n>> Minimum, yep\n\n1208\n00:55:41,666 --> 00:55:43,408\n>> But you can use just a regular\n\n1209\n00:55:43,408 --> 00:55:45,300\nold shared folder if you want.\n\n1210\n00:55:45,300 --> 00:55:46,940\nYou can store your VMs there.\n\n1211\n00:55:46,940 --> 00:55:49,520\nAnd it'll be able to run\njust like shared storage.\n\n1212\n00:55:49,520 --> 00:55:50,675\nBut far, far lower cost.\n\n1213\n00:55:50,675 --> 00:55:54,430\nCuz you don't actually have a SAN or\ndedicated storage behind it.\n\n1214\n00:55:54,430 --> 00:55:56,470\nIt's just a shared folder, right?\n\n1215\n00:55:56,470 --> 00:56:00,240\nSo, interesting technology\nthere to be able to use that.\n\n1216\n00:56:00,240 --> 00:56:04,720\nWhat did they do to make SMB,\nI don't want to say make it not suck.\n\n1217\n00:56:04,720 --> 00:56:06,118\nRight?\nCuz it's not like it sucked,\n\n1218\n00:56:06,118 --> 00:56:07,649\nit just didn't have some\nof the [CROSSTALK].\n\n1219\n00:56:07,649 --> 00:56:08,160\n>> Purpose.\n\n1220\n00:56:08,160 --> 00:56:09,444\nYeah.\n>> So what did they do that all of\n\n1221\n00:56:09,444 --> 00:56:12,210\na sudden made this thing suitable for\nreally reliable fast and\n\n1222\n00:56:12,210 --> 00:56:14,248\namazing access to virtual machine storage?\n\n1223\n00:56:14,248 --> 00:56:16,274\nStorage, and now I sound like a sales ad.\n\n1224\n00:56:16,274 --> 00:56:19,294\n>> [LAUGH]\n>> I went from being too critical to too\n\n1225\n00:56:19,294 --> 00:56:20,459\npromotional.\n\n1226\n00:56:20,459 --> 00:56:23,390\nAnyhow, well, they did a couple of things.\n\n1227\n00:56:23,390 --> 00:56:25,274\nFirst off,\nthey changed the version number, right?\n\n1228\n00:56:25,274 --> 00:56:26,598\nIt's a new version number, it's gotta be.\n\n1229\n00:56:26,598 --> 00:56:27,645\n>> It's gotta be better.\n\n1230\n00:56:27,645 --> 00:56:33,340\n>> SMB 3.0, but SMB 3,\nis a part of Windows server 2012 and R2.\n\n1231\n00:56:33,340 --> 00:56:36,200\nThe features are about,\nthey're actually unenabled by default.\n\n1232\n00:56:36,200 --> 00:56:37,620\nSo this isn't something\nwe have to configure,\n\n1233\n00:56:37,620 --> 00:56:39,500\njust something we need to be aware of.\n\n1234\n00:56:39,500 --> 00:56:44,090\nThey added support for\nwhat's called SMB multichannel.\n\n1235\n00:56:44,090 --> 00:56:47,670\nIt's effectively MPIO for SMB.\n\n1236\n00:56:47,670 --> 00:56:52,330\nSo now with server message block,\nwhen you connect to a share SMB\n\n1237\n00:56:52,330 --> 00:56:54,970\nwill actually look to see if\nthere is a second path available.\n\n1238\n00:56:54,970 --> 00:56:59,110\nAnd if there is, it will automatically\nuse it, and if there isn't it won't.\n\n1239\n00:56:59,110 --> 00:57:01,580\nWe don't have to configure it,\nwe don't have to turn it on.\n\n1240\n00:57:01,580 --> 00:57:02,490\nIt just does, and\n\n1241\n00:57:02,490 --> 00:57:05,590\nin fact, the only configuration options\nyou can really find are how disable it.\n\n1242\n00:57:05,590 --> 00:57:08,770\nThere are some powershell commands that\nyou can use to disable it but otherwise,\n\n1243\n00:57:08,770 --> 00:57:09,890\nit's running on its own.\n\n1244\n00:57:09,890 --> 00:57:13,950\nSo if you just stick two network adapters\nin a server, or even in a workstation,\n\n1245\n00:57:13,950 --> 00:57:15,390\nWindows 8 supports this.\n\n1246\n00:57:15,390 --> 00:57:19,050\nIf you throw two adapters in there and you\ngive them IP address on the same network,\n\n1247\n00:57:19,050 --> 00:57:24,140\nand it sees its got these two connections\nto the same network, SMB will use both.\n\n1248\n00:57:24,140 --> 00:57:28,390\nNow we can start to scale for\neasy redundancy,\n\n1249\n00:57:28,390 --> 00:57:31,585\neasy load balancing,\nit's all right there inside of SMB.\n\n1250\n00:57:31,585 --> 00:57:37,250\n>> Yeah, it really has about four\nconfigurations that it will recognize.\n\n1251\n00:57:37,250 --> 00:57:41,140\nIf you have multiple network\nadapters in a same node.\n\n1252\n00:57:41,140 --> 00:57:45,300\nIf you've got network adapters that\nare teamed together, it'll see that and\n\n1253\n00:57:45,300 --> 00:57:48,130\nit can start using that SMB multichannel.\n\n1254\n00:57:48,130 --> 00:57:49,480\nIt also has one where, if you have one or\n\n1255\n00:57:49,480 --> 00:57:52,900\nmore network adapters that support\nsomething called Receive Side Scaling or\n\n1256\n00:57:52,900 --> 00:57:59,070\nRSS, which is where the network adapter,\nwhen the data is coming through,\n\n1257\n00:57:59,070 --> 00:58:03,920\nthe network adapter can take advantage of\nhaving multiple processors in a system.\n\n1258\n00:58:03,920 --> 00:58:07,360\nSo instead of sending all of that to that\nsingle processor even though you've got\n\n1259\n00:58:07,360 --> 00:58:10,630\nmore back before this, before\nmultichannel, even if you had multiple\n\n1260\n00:58:10,630 --> 00:58:13,850\nprocessors, one of them would be\nreceiving that information and\n\n1261\n00:58:13,850 --> 00:58:15,075\ndoing all of the processing on it.\n\n1262\n00:58:15,075 --> 00:58:18,303\nNow with RSS,\nyou can split that across there and\n\n1263\n00:58:18,303 --> 00:58:21,910\nSMB multichannel will detect that and\nkick in.\n\n1264\n00:58:21,910 --> 00:58:24,620\nOr, if you have network\nadapters that support RDMA or\n\n1265\n00:58:24,620 --> 00:58:29,700\nmy Remote Direct Memory Access, it'll see\nthat, and take advantage of that SNB.\n\n1266\n00:58:29,700 --> 00:58:32,730\nIt actually kicks in to that other feature\nthat I think we're gonna talk about.\n\n1267\n00:58:32,730 --> 00:58:37,800\nSMB direct is what it is called, when\nit detects those RDMA network adapters.\n\n1268\n00:58:37,800 --> 00:58:39,740\n>> So what the heck is RDMA?\n\n1269\n00:58:39,740 --> 00:58:43,550\nWell, SMB is fairly software intensive.\n\n1270\n00:58:43,550 --> 00:58:44,710\nIn the older versions of SMB,\n\n1271\n00:58:44,710 --> 00:58:49,170\neverything was done just like Mike said,\nin the general purpose CPU.\n\n1272\n00:58:49,170 --> 00:58:52,570\nSo you'd get this communications in, and\nyour processor would have to kick in and\n\n1273\n00:58:52,570 --> 00:58:53,490\ndeal with it.\n\n1274\n00:58:53,490 --> 00:58:56,970\nAnd it wasn't really fully\nmulti-threaded or whatever.\n\n1275\n00:58:56,970 --> 00:59:00,960\nSo it did normally end up just on one\ncore and didn't take advantage of that.\n\n1276\n00:59:00,960 --> 00:59:04,860\nSo, with some of these technologies, we're\nable to step in and solve that, right?\n\n1277\n00:59:04,860 --> 00:59:08,400\nSo being able to go to more than\none core to handle that now,\n\n1278\n00:59:08,400 --> 00:59:12,680\nthat definitely speeds up access,\nthat makes SMB a lot more useful.\n\n1279\n00:59:12,680 --> 00:59:16,170\nBut, what if you've got\nmore than one server?\n\n1280\n00:59:16,170 --> 00:59:19,160\nWhat if you've got a clustered file share?\n\n1281\n00:59:19,160 --> 00:59:21,618\nIn that scenario, you've got more than\none server that can provide access.\n\n1282\n00:59:21,618 --> 00:59:24,140\nOr, if you're doing\na scale out file server,\n\n1283\n00:59:24,140 --> 00:59:26,695\nI know we have talked about those\nin other shows, where you've\n\n1284\n00:59:26,695 --> 00:59:31,745\ngot more than one file server connected to\nshared storage, and they're both active,\n\n1285\n00:59:31,745 --> 00:59:34,953\naccessing the same storage at the same\ntime and they're both active.\n\n1286\n00:59:34,953 --> 00:59:36,455\nI say both, but it can be three, four,\n\n1287\n00:59:36,455 --> 00:59:40,205\nsixteen of these servers all\nfront-ending the same storage.\n\n1288\n00:59:40,205 --> 00:59:45,330\nBut when communications come in, RDMA,\nRemote Direct Memory Access It's\n\n1289\n00:59:45,330 --> 00:59:49,150\nan extension of DMA,\nregular direct memory accessing.\n\n1290\n00:59:49,150 --> 00:59:52,690\nAnd what DMA does is,\nit allows things like your network adapter\n\n1291\n00:59:52,690 --> 00:59:56,680\nto talk to memory without\ngoing through your CPU.\n\n1292\n00:59:56,680 --> 00:59:58,790\nNormally, if your network\nadapter wanted to access memory,\n\n1293\n00:59:58,790 --> 01:00:00,600\nit would have to go through\nthe CPU to do it, and\n\n1294\n01:00:00,600 --> 01:00:05,240\nthat takes away processor cycles,\nbut with DMA, you skip it.\n\n1295\n01:00:05,240 --> 01:00:11,870\nRDMA means that a network adapter on\none server could actually jump and\n\n1296\n01:00:11,870 --> 01:00:17,210\ntalk to the memory of another\nserver without impacting its CPU or\n\n1297\n01:00:17,210 --> 01:00:21,490\ncache or any of that stuff which\nmakes it really, really fast.\n\n1298\n01:00:21,490 --> 01:00:24,900\nI mean, you still have storage\nnetwork involved in this.\n\n1299\n01:00:24,900 --> 01:00:29,560\nBut that communication doesn't create\nthe CPU utilization that it did before.\n\n1300\n01:00:29,560 --> 01:00:32,550\nAnd that was always the thing\nthat held SMB back.\n\n1301\n01:00:32,550 --> 01:00:34,930\nThat was what made it where we wouldn't\nwant to put our virtual machines in it.\n\n1302\n01:00:34,930 --> 01:00:38,640\nWe would rather use iSCSI cuz\niSCSI was less CPU intensive.\n\n1303\n01:00:38,640 --> 01:00:41,420\nYou could get adapters that were\nspecifically designed to do iSCSI\n\n1304\n01:00:41,420 --> 01:00:44,450\nprocessing and\nthe CPU didn't even know about it, right?\n\n1305\n01:00:44,450 --> 01:00:51,100\nNow, SMB can do the same thing,\nbut RDMA is really, really new.\n\n1306\n01:00:51,100 --> 01:00:55,610\nAnd, so the adapters in your servers\nright now, probably don't support it.\n\n1307\n01:00:55,610 --> 01:01:01,030\nSo if you're gonna be building out a file\nserver cluster and you wanted to take\n\n1308\n01:01:01,030 --> 01:01:04,040\nadvantage of this technology, you gotta\nmake sure your network adapter support\n\n1309\n01:01:04,040 --> 01:01:08,500\nRDMA to be able to take advantage of that,\nand Windows will grab that and use it.\n\n1310\n01:01:08,500 --> 01:01:12,220\nI'm not aware of any other\nvendors using RDMA yet, it's new.\n\n1311\n01:01:12,220 --> 01:01:15,750\nBut other people will start to adopt\nit and it will become common place.\n\n1312\n01:01:15,750 --> 01:01:18,940\nIt will be like TCP offload engine.\n\n1313\n01:01:18,940 --> 01:01:20,220\n>> Right.\n>> When they first came out,\n\n1314\n01:01:20,220 --> 01:01:21,470\nthey were really rare.\n\n1315\n01:01:21,470 --> 01:01:23,640\nYou have to pay a lot more for\nthose adapters.\n\n1316\n01:01:23,640 --> 01:01:28,060\nNowadays, even the cheap ones will have\nTOE on them and that's how it goes.\n\n1317\n01:01:28,060 --> 01:01:29,320\nSo, RDMA will be the same way.\n\n1318\n01:01:29,320 --> 01:01:31,410\nFive years from now,\nevery adapter will have it.\n\n1319\n01:01:31,410 --> 01:01:35,160\nBut right now, you do have to shop\na little bit, find the right adapters or\n\n1320\n01:01:35,160 --> 01:01:38,790\njust talk to your server vendor and\nmake sure that they're shipping.\n\n1321\n01:01:38,790 --> 01:01:41,070\n>> One thing we do want to keep in mind,\nif we do go out and\n\n1322\n01:01:41,070 --> 01:01:43,550\nget those RDMA adapters, don't team them.\n\n1323\n01:01:43,550 --> 01:01:45,220\nIf we team those network adapters,\n\n1324\n01:01:45,220 --> 01:01:48,478\nwe might be tempted to take,\nwe're gonna use RDMA, that's great.\n\n1325\n01:01:48,478 --> 01:01:51,470\nWe're also gonna team them, we can\ndouble up bandwidth, things like that.\n\n1326\n01:01:51,470 --> 01:01:55,350\nIf you use the teaming,\nnick teaming with the RDMA adapters,\n\n1327\n01:01:55,350 --> 01:01:59,120\nthen that SMB will detect it as,\nit won't kick in.\n\n1328\n01:01:59,120 --> 01:02:02,500\nIt won't see it as RDMA and\nit'll treat them as a team, and\n\n1329\n01:02:02,500 --> 01:02:05,480\nit won't take advantage of the SMB direct.\n\n1330\n01:02:05,480 --> 01:02:09,760\n>> When you team your adapters, you're\neffectively creating a virtual adapter,\n\n1331\n01:02:09,760 --> 01:02:12,020\nthat's then mapped to these\ntwo physical adapters.\n\n1332\n01:02:12,020 --> 01:02:15,720\nAnd a virtual adapter doesn't\nhave a hardware to do RDMA, so\n\n1333\n01:02:15,720 --> 01:02:16,840\nyou lose that piece.\n\n1334\n01:02:16,840 --> 01:02:20,660\nIt's definitely something to keep in mind,\nand you really don't need teams anymore\n\n1335\n01:02:20,660 --> 01:02:24,330\nbecause SMB 3 it knows\nto use both adapters.\n\n1336\n01:02:24,330 --> 01:02:28,630\nAnd a connection might come in on one,\nand the Receive-Side Scaling,\n\n1337\n01:02:28,630 --> 01:02:31,280\nwhere we start to spread this\nstuff across processors,\n\n1338\n01:02:31,280 --> 01:02:34,610\nit's also gonna be spreading it across\nthe NICs to be able to reply back.\n\n1339\n01:02:34,610 --> 01:02:39,548\nIt is a function of the client and the\nserver, is the other thing to remember.\n\n1340\n01:02:39,548 --> 01:02:44,160\nSo SMB 3 is only supported\non Windows Server 2012,\n\n1341\n01:02:44,160 --> 01:02:47,280\nWindow Server 2012 R2 and Windows 8.\n\n1342\n01:02:47,280 --> 01:02:53,100\nSo, if you have a shop that is full of\nWindows 7 clients, even if you deploy\n\n1343\n01:02:53,100 --> 01:02:56,660\na server that's got this functionality\nyou're not gonna be able to use it, right.\n\n1344\n01:02:56,660 --> 01:02:57,750\nSo be aware of that too.\n\n1345\n01:02:57,750 --> 01:02:59,850\nThis is cutting edge stuff, right?\n\n1346\n01:02:59,850 --> 01:03:02,630\nSo we need to be aware that it exists,\nthat we can use it in our network but\n\n1347\n01:03:02,630 --> 01:03:04,350\nit's really planning for the future.\n\n1348\n01:03:06,610 --> 01:03:09,180\nAll right, so\nthat's one of the new things in SMB 3.\n\n1349\n01:03:09,180 --> 01:03:10,840\nWe factor that in to our design,\n\n1350\n01:03:10,840 --> 01:03:13,170\nwe might be able to take\nadvantage of that, we might not.\n\n1351\n01:03:13,170 --> 01:03:16,250\nThis is one of those where on the exam,\nyou'll see a question.\n\n1352\n01:03:16,250 --> 01:03:19,990\nIt will be asking something about\nproviding redundant paths to get to\n\n1353\n01:03:19,990 --> 01:03:24,410\nthe storage, and\nyou've got Windows server 2012,\n\n1354\n01:03:24,410 --> 01:03:27,830\nR2 file server, and\nyou've got Windows 8 clients.\n\n1355\n01:03:27,830 --> 01:03:30,685\nWhat would be the best option?\n\n1356\n01:03:30,685 --> 01:03:32,600\nRight, SMB 3, but\n\n1357\n01:03:32,600 --> 01:03:36,510\nif they say you've got Windows 7 clients,\nall of the sudden your solution changes.\n\n1358\n01:03:36,510 --> 01:03:41,900\nNow, we'd want to do like a fail over\ncluster for our file storage and\n\n1359\n01:03:41,900 --> 01:03:45,600\nwe'd want to make sure that we have MPIO\nor whatever for that kind of access.\n\n1360\n01:03:45,600 --> 01:03:47,740\nSo, you basically have to kinda pick and\n\n1361\n01:03:47,740 --> 01:03:50,974\nchoose based on the client\nin this scenario.\n\n1362\n01:03:50,974 --> 01:03:55,201\nAll right, well,\nMike I think that's about it for SMB 3.\n\n1363\n01:03:55,201 --> 01:04:01,170\n>> Yeah, not a lot to add to it,\nit's a great little technology and\n\n1364\n01:04:01,170 --> 01:04:05,390\nit's definitely gonna help with\nour solutions but that's about it.\n\n1365\n01:04:05,390 --> 01:04:07,880\n>> Yeah, I remember when 2012 was coming\nout and they were talking about some\n\n1366\n01:04:07,880 --> 01:04:12,120\nof this stuff, I was surprised they\neven had the option to store VM\n\n1367\n01:04:12,120 --> 01:04:16,406\non a shared folder so that is crazy,\nso whoever is doing that is just nuts.\n\n1368\n01:04:16,406 --> 01:04:18,520\nMaybe test the lab environment.\n\n1369\n01:04:18,520 --> 01:04:19,830\n>> Even in a test environment,\n\n1370\n01:04:19,830 --> 01:04:21,900\nI'd be getting mad at\nthe performance on that thing.\n\n1371\n01:04:21,900 --> 01:04:23,940\n>> But once I started reading\nabout the hardware acceleration.\n\n1372\n01:04:23,940 --> 01:04:26,800\nIf you've got the right hardware in place,\nit's really, really viable.\n\n1373\n01:04:26,800 --> 01:04:30,390\nAnd it's a little more efficient that\ndealing with things like that scuzzy,\n\n1374\n01:04:30,390 --> 01:04:32,180\nwe gotta have that.\n\n1375\n01:04:32,180 --> 01:04:35,010\nAll right, well that's a pretty\ngood spot for us to wrap this up.\n\n1376\n01:04:35,010 --> 01:04:37,600\nI think we looked at a lot of the new\ntechnologies available with storage and\n\n1377\n01:04:37,600 --> 01:04:40,540\nwe got a chance to see how to\nmake them highly available.\n\n1378\n01:04:40,540 --> 01:04:43,502\nSo we started out with storage spaces and\nstorage pools.\n\n1379\n01:04:43,502 --> 01:04:46,210\nThere's another technologies that\nwe usually discount thinking that\n\n1380\n01:04:46,210 --> 01:04:50,810\nit's a home user type environment but we\ngot to see where we can couple those with\n\n1381\n01:04:50,810 --> 01:04:54,720\nshared SAS to make them enterprise\nlevel for building small clusters.\n\n1382\n01:04:54,720 --> 01:04:58,260\nWe also looked at, what was after that?\n\n1383\n01:04:58,260 --> 01:04:58,970\n>> DFS\n>> So\n\n1384\n01:04:58,970 --> 01:05:02,975\nwe talked about DFS\n>> The different concerns there,\n\n1385\n01:05:02,975 --> 01:05:06,385\nwhen we have an enterprise name space\nversus a stand alone name space and\n\n1386\n01:05:06,385 --> 01:05:08,405\nhow we handle redundancy on those.\n\n1387\n01:05:08,405 --> 01:05:12,865\nThen we tackle the NPIO, multipath,\nwhich is a really sweet feature.\n\n1388\n01:05:12,865 --> 01:05:14,685\nAnd then lastly, SMB 3.\n\n1389\n01:05:14,685 --> 01:05:17,305\nAnd SMB 3, zero configuration, right?\n\n1390\n01:05:17,305 --> 01:05:18,805\nIt's just on or it's not.\n\n1391\n01:05:18,805 --> 01:05:21,085\nIt just detects itself\nbased on your hardware.\n\n1392\n01:05:21,085 --> 01:05:24,060\nSo, cool technologies, mix and match them.\n\n1393\n01:05:24,060 --> 01:05:27,310\nOr, you can actually use all of them\ncombined if you wanted to go super crazy,\n\n1394\n01:05:27,310 --> 01:05:30,080\nbut usually, you pick one or\ntwo that meet your needs.\n\n1395\n01:05:31,370 --> 01:05:33,150\nAll right, well,\nlet me just remind you guys,\n\n1396\n01:05:33,150 --> 01:05:37,060\nif you have questions on any of this,\nfeel free to ask.\n\n1397\n01:05:37,060 --> 01:05:39,250\nLive during the show,\nyou can go to itpro.tv/live, and\n\n1398\n01:05:39,250 --> 01:05:43,330\nyou'll see the chat box below the video,\npost your questions there.\n\n1399\n01:05:43,330 --> 01:05:44,760\nWe monitor and answer during the show.\n\n1400\n01:05:44,760 --> 01:05:48,740\nIf you have questions after the show,\njump into our Q&A forums.\n\n1401\n01:05:48,740 --> 01:05:49,520\nAt the top of every page,\n\n1402\n01:05:49,520 --> 01:05:52,270\nyou'll see a link that says Q&A,\nit'll take you to the forums.\n\n1403\n01:05:52,270 --> 01:05:56,310\nYou can post your questions there and\nwe monitor and answer after the show.\n\n1404\n01:05:56,310 --> 01:05:57,790\nSo, great way to reach out to us and\n\n1405\n01:05:57,790 --> 01:06:01,060\nget answers to the questions\nthat you might have.\n\n1406\n01:06:01,060 --> 01:06:03,598\nAll right, I hope you guys enjoyed\nthe show today, signing off for ITProTV,\n\n1407\n01:06:03,598 --> 01:06:04,958\nI'm Don Pezet\n>> I'm Mike Rodrick\n\n1408\n01:06:04,958 --> 01:06:06,978\n>> And, we will see you next time.\n\n1409\n01:06:06,978 --> 01:06:16,969\n[MUSIC]\n\n",
          "vimeoId": "110604283"
        },
        {
          "description": "",
          "length": "4488",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-5-bc-and-dr-solutions-103014.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-5-bc-and-dr-solutions-103014-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-2-5-bc-and-dr-solutions-103014-sm.jpg",
          "title": "BC and DR Solutions",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,173 --> 00:00:25,596\n[SOUND]\n\n3\n00:00:25,596 --> 00:00:33,429\n[MUSIC]\n\n4\n00:00:33,429 --> 00:00:34,147\nAll right.\n\n5\n00:00:34,147 --> 00:00:36,669\nGood morning, good afternoon and\ngood evening, and\n\n6\n00:00:36,669 --> 00:00:38,810\nwelcome back to another\nepisode of ITProTV.\n\n7\n00:00:38,810 --> 00:00:41,711\nI'm your host Don Pezet,\nback again with Mr.Mike Rider.\n\n8\n00:00:41,711 --> 00:00:42,311\nHow's it going Mike?\n\n9\n00:00:42,311 --> 00:00:42,831\n>> Fantastic.\n\n10\n00:00:42,831 --> 00:00:43,720\nHow are you doing Don?\n\n11\n00:00:43,720 --> 00:00:44,630\n>> Doing just swell.\n\n12\n00:00:45,760 --> 00:00:49,465\nI'm completely failing at writing\nemoticons in our chat room right now.\n\n13\n00:00:49,465 --> 00:00:51,481\n>> [LAUGH]\n>> So if you're watching live you\n\n14\n00:00:51,481 --> 00:00:52,544\ncan enjoy that.\n\n15\n00:00:52,544 --> 00:00:54,205\n>> [LAUGH]\n>> But for everybody else,\n\n16\n00:00:54,205 --> 00:01:00,180\nwe are back again with another episode\nof MCSC, particularly the 70-414 exam.\n\n17\n00:01:00,180 --> 00:01:04,440\nAnd we're gonna be diving into\nanother high availability objective.\n\n18\n00:01:04,440 --> 00:01:06,950\nI know, we're going available crazy here.\n\n19\n00:01:06,950 --> 00:01:10,320\nBut this is the last one, so\nwe're kind of down here at the end.\n\n20\n00:01:10,320 --> 00:01:16,185\nAnd it is plan and implement a business\ncontinuity and disaster recovery solution.\n\n21\n00:01:16,185 --> 00:01:17,165\n>> Important stuff.\n\n22\n00:01:17,165 --> 00:01:20,965\n>> It really is, and a lot of people don't\naddress these as two separate entities.\n\n23\n00:01:20,965 --> 00:01:23,665\nSo it's important that we take a look\na the two different components and\n\n24\n00:01:23,665 --> 00:01:24,905\nwhat they are and what they do?\n\n25\n00:01:26,450 --> 00:01:29,620\nThe first one is Business Continuity.\n\n26\n00:01:29,620 --> 00:01:32,250\nBusiness continuity is really something\nwe've been talking about in all\n\n27\n00:01:32,250 --> 00:01:34,450\nthe previous objectives.\n\n28\n00:01:34,450 --> 00:01:37,820\nIt's ensuring that your operations,\n\n29\n00:01:37,820 --> 00:01:42,610\nyour day to day operations, are able to\nbe performed, even when a failure occurs.\n\n30\n00:01:43,640 --> 00:01:47,260\nSo some kind of failure happens,\nbut people can still work.\n\n31\n00:01:47,260 --> 00:01:52,380\nThat term, business continuity,\nit mean continuing to do business,\n\n32\n00:01:52,380 --> 00:01:56,350\nand we want to continue doing\nbusiness even when there's a failure.\n\n33\n00:01:56,350 --> 00:01:59,750\n>> Maybe not at 100%, but at least we can\nlimp along, until we can go through our\n\n34\n00:01:59,750 --> 00:02:02,070\nrecovery methods and\nget everything back up to speed.\n\n35\n00:02:02,070 --> 00:02:04,440\n>> Yeah.\nSo for example, if you have a cluster.\n\n36\n00:02:04,440 --> 00:02:06,300\nYou have an active, active cluster.\n\n37\n00:02:06,300 --> 00:02:11,380\nSo two nodes, and they're both active,\nthey're both running at 50% utilization.\n\n38\n00:02:11,380 --> 00:02:16,050\nIf one fails, the other node will\ntake over all responsibility,\n\n39\n00:02:16,050 --> 00:02:17,770\nnow it's at a 100% utilization.\n\n40\n00:02:17,770 --> 00:02:20,670\nYou're still online, you're still\ndoing business, you're still working.\n\n41\n00:02:21,700 --> 00:02:24,830\nBut you couldn't grow anymore\nbecause you're out of room.\n\n42\n00:02:24,830 --> 00:02:26,170\nThe other node is down.\n\n43\n00:02:26,170 --> 00:02:29,420\nThe failure still exists,\nthe failure's not gone, it's there.\n\n44\n00:02:29,420 --> 00:02:31,925\nAnd now,\nyou're running at a reduced capacity.\n\n45\n00:02:31,925 --> 00:02:34,270\nThat's what business\ncontinuity is all about.\n\n46\n00:02:34,270 --> 00:02:37,270\nSo when we talk about\na business continuity solution,\n\n47\n00:02:38,470 --> 00:02:43,680\nit's any kind of technology we can\nimplement that makes failures invisible.\n\n48\n00:02:43,680 --> 00:02:44,922\nDoesn't erase a failure,\n\n49\n00:02:44,922 --> 00:02:48,432\nalthough sometimes you can kind of\neliminate certain points of failure, but\n\n50\n00:02:48,432 --> 00:02:52,060\nit usually just kind of sets up,\nsome kind of redundancy or backup.\n\n51\n00:02:52,060 --> 00:02:55,230\nSo we've talked about a lot of this.\n\n52\n00:02:55,230 --> 00:02:59,230\nMPIO, Multipath Input Output for\ndisk storage access.\n\n53\n00:02:59,230 --> 00:03:02,910\nIf one path goes down, a switch goes down\nwhatever, you just go the other route and\n\n54\n00:03:02,910 --> 00:03:04,480\nyou get your connectivity.\n\n55\n00:03:04,480 --> 00:03:08,420\nWe talked about storage pools, where\nyou could have multiple hard drives in\n\n56\n00:03:08,420 --> 00:03:11,490\nan array with parity and\nif a drive fails, you're covered.\n\n57\n00:03:12,570 --> 00:03:14,280\nWe've talked about clustering.\n\n58\n00:03:14,280 --> 00:03:16,500\nWe have multiple servers in a cluster and\n\n59\n00:03:16,500 --> 00:03:19,540\nif one entire server\nfails the others kick in.\n\n60\n00:03:19,540 --> 00:03:23,640\nWe even talked about multi-site\nclusters where you've got\n\n61\n00:03:23,640 --> 00:03:25,680\nservers in two different\ngeographic locations.\n\n62\n00:03:25,680 --> 00:03:30,420\nSo if an entire location fails the other\nlocation kicks in and takes over.\n\n63\n00:03:30,420 --> 00:03:33,620\nThese are all ways to\nprovide business continuity.\n\n64\n00:03:33,620 --> 00:03:35,950\nSo really the first four\nobjectives that we've covered for\n\n65\n00:03:35,950 --> 00:03:40,150\nthis major objective,\nwe're all tied to business continuity.\n\n66\n00:03:40,150 --> 00:03:42,940\nSo it's one of the easier things for\nus to deal with,\n\n67\n00:03:42,940 --> 00:03:44,881\nbecause we've kind of already seen it.\n\n68\n00:03:44,881 --> 00:03:47,267\n>> Right.\n>> But what we need to think about now is,\n\n69\n00:03:47,267 --> 00:03:49,670\nwhen is it appropriate?\n\n70\n00:03:49,670 --> 00:03:51,850\nWhen do we need to plan for that?\n\n71\n00:03:51,850 --> 00:03:55,300\nWhat drives us to want to ensure that\nwe have good business continuity?\n\n72\n00:03:55,300 --> 00:03:57,080\nCuz sometimes it's expensive to do it.\n\n73\n00:03:58,570 --> 00:04:02,160\nAnd the other concept is Disaster ecovery.\n\n74\n00:04:02,160 --> 00:04:06,160\nWhen you have a failure,\nyou're running at limited capacity.\n\n75\n00:04:06,160 --> 00:04:08,664\nOr you're not running at all, maybe\nyou're just completely shut down, and\n\n76\n00:04:08,664 --> 00:04:09,173\nthat happens.\n\n77\n00:04:09,173 --> 00:04:10,060\n>> [LAUGH]\n>> So\n\n78\n00:04:10,060 --> 00:04:13,500\ndisaster recovery is getting\nyourself back to 100%.\n\n79\n00:04:13,500 --> 00:04:16,340\nGetting all the way back\nto fully operational.\n\n80\n00:04:16,340 --> 00:04:19,800\nIf a server failed, it's the process for\nrecovering that server.\n\n81\n00:04:19,800 --> 00:04:23,530\nIf your network connection went down,\nthe process for recovering that and\n\n82\n00:04:23,530 --> 00:04:25,260\ngetting your network back up and\noperational.\n\n83\n00:04:26,280 --> 00:04:30,220\nThat process isn't one that\nwe can just shirk off.\n\n84\n00:04:30,220 --> 00:04:32,930\nYou've gotta have a disaster\nrecovery plan no matter what.\n\n85\n00:04:32,930 --> 00:04:36,120\nYou might not even put the first bit\nof business continuity in place.\n\n86\n00:04:36,120 --> 00:04:38,080\nYou might just say hey, if I have\na failure, we shut down, that's it.\n\n87\n00:04:39,260 --> 00:04:42,500\nBut you will have a disaster recovery\nplan, how to recover to get back up and\n\n88\n00:04:42,500 --> 00:04:43,710\noperational?\n\n89\n00:04:43,710 --> 00:04:46,035\nUnless you're a fly by night company and\nyou just don't care.\n\n90\n00:04:46,035 --> 00:04:46,860\n>> [LAUGH]\n>> Just change the name,\n\n91\n00:04:46,860 --> 00:04:47,535\nwe'll start all over.\n\n92\n00:04:47,535 --> 00:04:49,610\n>> [LAUGH]\n>> I'm gonna ride this up to the IPO and\n\n93\n00:04:49,610 --> 00:04:50,782\nthen I'm out of here.\n\n94\n00:04:50,782 --> 00:04:54,460\n>> [LAUGH]\n>> [LAUGH] The Silicon Valley model.\n\n95\n00:04:54,460 --> 00:04:57,890\nSo these are the two different concepts\nthat we're looking at here in this module\n\n96\n00:04:57,890 --> 00:05:00,480\nor in this objective,\nwhatever the heck this thing is.\n\n97\n00:05:00,480 --> 00:05:03,890\nAll right, so when we start to plan this,\nhow do we determine when we even bother?\n\n98\n00:05:05,840 --> 00:05:10,440\nUsually we, at a minimum,\nat an absolute minimum,\n\n99\n00:05:10,440 --> 00:05:15,290\nwe put these measures in place\nas a service to our customers.\n\n100\n00:05:15,290 --> 00:05:17,180\nTake ITProTV as an example.\n\n101\n00:05:17,180 --> 00:05:21,330\nWe want to make sure that our\nwebsite is available all the time.\n\n102\n00:05:21,330 --> 00:05:22,230\nWe don't want down time.\n\n103\n00:05:22,230 --> 00:05:24,080\nWe wanna make sure that our\nepisodes are able to be watched and\n\n104\n00:05:24,080 --> 00:05:27,780\nour stream is able to be run,\nwhenever our customers wanted.\n\n105\n00:05:27,780 --> 00:05:30,130\nWe feel like that's the right thing to do.\n\n106\n00:05:30,130 --> 00:05:31,640\nWe want that to happen.\n\n107\n00:05:31,640 --> 00:05:34,660\nThe reality is,\nif our site went down for six hours.\n\n108\n00:05:36,500 --> 00:05:38,426\nWe probably wouldn't get\nmany complaints about that.\n\n109\n00:05:38,426 --> 00:05:40,215\nIt just comes back up, people jump in.\n\n110\n00:05:40,215 --> 00:05:41,890\nAnd we would probably get about 1 or\n2 complaints.\n\n111\n00:05:41,890 --> 00:05:43,730\nIt wouldn't be that much.\n\n112\n00:05:43,730 --> 00:05:45,970\nBut if we were down for a few days\nwe would get a lot of complaints.\n\n113\n00:05:45,970 --> 00:05:46,890\nWe would start losing customers.\n\n114\n00:05:46,890 --> 00:05:50,730\nWe would be doing a disservice,\nand so there are people.\n\n115\n00:05:50,730 --> 00:05:52,005\nThey're called risk managers.\n\n116\n00:05:52,005 --> 00:05:53,500\n>> [LAUGH]\n>> That will do the math.\n\n117\n00:05:53,500 --> 00:05:57,020\nThey'll say, how long can you be down,\nbefore you get so\n\n118\n00:05:57,020 --> 00:05:58,740\nmany complaints that you\nstart losing business?\n\n119\n00:05:58,740 --> 00:06:02,210\nThey can calculate it out and do all\nthe finances on it and figure that out.\n\n120\n00:06:02,210 --> 00:06:02,800\nAnd they say, okay.\n\n121\n00:06:02,800 --> 00:06:03,630\nHere's what we need to do.\n\n122\n00:06:03,630 --> 00:06:08,190\nWe need to put just enough measures in\nplace to make sure our down time is no\n\n123\n00:06:08,190 --> 00:06:10,110\nmore than ten hours,\nthat way we don't lose customers.\n\n124\n00:06:10,110 --> 00:06:12,095\nAll right,\nit's a very cynical way to look at things.\n\n125\n00:06:12,095 --> 00:06:15,900\n>> [LAUGH]\n>> So what happens is, there's normally\n\n126\n00:06:15,900 --> 00:06:20,270\nother factors that step in that influence\nwhen we put these measures in place.\n\n127\n00:06:20,270 --> 00:06:21,310\nAll right.\n\n128\n00:06:21,310 --> 00:06:24,000\nNow, those factors can be internal or\nexternal.\n\n129\n00:06:25,300 --> 00:06:29,620\nExternal is where somebody,\nlike a government agency, steps in.\n\n130\n00:06:29,620 --> 00:06:34,570\nAnd says, you can't be trusted to provide\nthe level of service that we need.\n\n131\n00:06:34,570 --> 00:06:35,770\nIt's not really about trust, right?\n\n132\n00:06:35,770 --> 00:06:36,560\n>> Right.\n\n133\n00:06:36,560 --> 00:06:39,770\n>> Some companies are very honest and\ndo the right thing, some aren't.\n\n134\n00:06:39,770 --> 00:06:42,792\nSo your city, county, state,\n\n135\n00:06:42,792 --> 00:06:47,770\nnational government, federal government\nmay step in and say, here is a regulation.\n\n136\n00:06:47,770 --> 00:06:49,610\nYou have to follow this.\n\n137\n00:06:49,610 --> 00:06:54,562\nYou've gotta make sure that your systems\nare available this amount of time.\n\n138\n00:06:54,562 --> 00:06:58,810\nYou might have a standard\nthat you choose to follow,\n\n139\n00:06:58,810 --> 00:07:03,155\nmaybe you're ISO 9000 certified, and then\nthat designates that you've got to take\n\n140\n00:07:03,155 --> 00:07:05,895\ncertain measures for\nbusiness resumption and disaster recovery.\n\n141\n00:07:07,045 --> 00:07:10,645\nOr it might be something else altogether,\nsomething like other laws that are in\n\n142\n00:07:10,645 --> 00:07:12,595\nplace that might dictate,\nhow you function?\n\n143\n00:07:12,595 --> 00:07:15,195\nSo it depends on\nthe industry that you're in.\n\n144\n00:07:15,195 --> 00:07:17,745\nI worked for a bank, and\nwe were FDIC insured,\n\n145\n00:07:17,745 --> 00:07:22,080\nwhich in the US is a financial\ninstitution insurance plan.\n\n146\n00:07:22,080 --> 00:07:25,093\nAnd it means if your bank goes bankrupt-\n>> [LAUGH]\n\n147\n00:07:25,093 --> 00:07:26,380\n>> In which happens.\n\n148\n00:07:26,380 --> 00:07:31,300\nIf that happens, the FDIC will step in and\ninsure all the depositors and\n\n149\n00:07:31,300 --> 00:07:33,460\nmake sure they don't lose their money.\n\n150\n00:07:33,460 --> 00:07:36,940\nBut to the FDIC insured,\nwe had to meet their requirements.\n\n151\n00:07:36,940 --> 00:07:40,950\nAnd they had requirements like if\nour bank ever had to shut down,\n\n152\n00:07:40,950 --> 00:07:43,470\nif we had the headquarters destroyed.\n\n153\n00:07:44,700 --> 00:07:48,800\nWe had to be up and\noperational again within 72 hours.\n\n154\n00:07:48,800 --> 00:07:50,599\nSo we had 72 hours, 3 days,\n\n155\n00:07:50,599 --> 00:07:54,840\nthat we had to make our customers\nfunds available to them within 3 days.\n\n156\n00:07:54,840 --> 00:07:58,540\nOr the FDIC will step in and take over.\n\n157\n00:07:58,540 --> 00:08:02,550\nSo, all of our planning was centered\naround this idea of three days.\n\n158\n00:08:02,550 --> 00:08:06,220\nWe had to be back online in three days and\nthat's not even being 100%,\n\n159\n00:08:06,220 --> 00:08:09,190\nwe just had to make it so people could\ndo deposits and withdrawals, right.\n\n160\n00:08:09,190 --> 00:08:12,560\nWe didn't exactly have to issue mortgages\nand that stuff within three days.\n\n161\n00:08:12,560 --> 00:08:16,960\nBut deposits and withdrawals within\nthree days, well that's a long time.\n\n162\n00:08:16,960 --> 00:08:22,020\nI didn't wanna be the person to tell\nsomebody hey, you can't have your money,\n\n163\n00:08:22,020 --> 00:08:24,154\nand check back in three days.\n\n164\n00:08:24,154 --> 00:08:26,380\n>> [LAUGH]\n>> Nobody wants to do that.\n\n165\n00:08:26,380 --> 00:08:31,300\nSo our DR plan and our BC,\nall of that stuff, we got our BCP,\n\n166\n00:08:31,300 --> 00:08:32,445\nthe Business Continuity Plan.\n\n167\n00:08:32,445 --> 00:08:38,000\nThose our fail over really,\nwhen we did our fail over test.\n\n168\n00:08:38,000 --> 00:08:42,630\nIt would take us about 30 minutes\nto have our entire operation\n\n169\n00:08:42,630 --> 00:08:47,520\ntransitioned from our headquarter\nover to our disaster recovery setup.\n\n170\n00:08:47,520 --> 00:08:49,400\nSo we had to do three days.\n\n171\n00:08:49,400 --> 00:08:51,280\nThat's what was required of us, but\n\n172\n00:08:51,280 --> 00:08:54,030\nwe chose to do something much smaller\nto take care of the customers.\n\n173\n00:08:54,030 --> 00:08:57,800\nSo that you have to evaluate,\nis which is it?\n\n174\n00:08:57,800 --> 00:08:59,670\nYou have no choice but\nto follow the laws, right.\n\n175\n00:08:59,670 --> 00:09:02,920\nSo if there are regulations, standards,\nwhatever, you've got to follow them.\n\n176\n00:09:02,920 --> 00:09:05,662\nYou've got no choice, you've got to do\nthose that should be your minimum bar,\n\n177\n00:09:05,662 --> 00:09:08,640\nthat shouldn't be your target,\nthat should be your minimum.\n\n178\n00:09:08,640 --> 00:09:11,270\nBut anything you go beyond that\nis going to cost money and so\n\n179\n00:09:11,270 --> 00:09:15,350\nyou've got to start working\non that balance, right.\n\n180\n00:09:15,350 --> 00:09:19,020\nWhen is it actually worth it to put that\nredundancy in versus when would it be\n\n181\n00:09:19,020 --> 00:09:23,030\nworth it just to save that money and\nput that to stronger infrastructure or\n\n182\n00:09:23,030 --> 00:09:24,600\nsomething like that, right.\n\n183\n00:09:25,740 --> 00:09:27,920\nThen there's internal\nrequirements that you have.\n\n184\n00:09:27,920 --> 00:09:29,790\nThese are ones that don't come\nfrom an external agency but\n\n185\n00:09:29,790 --> 00:09:31,600\ncome from within yourselves so\n\n186\n00:09:31,600 --> 00:09:34,850\nyour company might have SLAs,\nService Level Agreements.\n\n187\n00:09:34,850 --> 00:09:37,010\nSo, you'd tell your customer, right.\n\n188\n00:09:37,010 --> 00:09:40,860\nLike, I have high-speed cable at home.\n\n189\n00:09:40,860 --> 00:09:43,730\nI'll call it high-speed,\nit's not actually very fast at all.\n\n190\n00:09:43,730 --> 00:09:45,680\nBut I have cable internet at home and\n\n191\n00:09:45,680 --> 00:09:51,300\nthe cable company told me that they\naim to provide 98% uptime right.\n\n192\n00:09:51,300 --> 00:09:53,890\nSo throughout the year that's\nthe service level agreement I have.\n\n193\n00:09:53,890 --> 00:09:55,955\nIs that 98% of the time\nmy internet should work.\n\n194\n00:09:55,955 --> 00:09:58,510\n>> Mm-hm.\n>> And 2% of the time it won't and\n\n195\n00:09:58,510 --> 00:10:02,750\nthat's acceptable but if it goes beyond\nthat but they're discount my bill.\n\n196\n00:10:02,750 --> 00:10:05,850\nSo they have a service level\nagreement with me that they follow.\n\n197\n00:10:05,850 --> 00:10:06,790\nI didn't ask for SOA,\n\n198\n00:10:06,790 --> 00:10:10,775\nit was just part of the contract,\nand they frequently don't meet it.\n\n199\n00:10:10,775 --> 00:10:11,820\n>> [LAUGH]\n>> [LAUGH] So there's that.\n\n200\n00:10:11,820 --> 00:10:14,990\nBut it does exist, and\nthat's something that they aim for, or\n\n201\n00:10:14,990 --> 00:10:17,670\nthey say they aim for, I don't know.\n\n202\n00:10:17,670 --> 00:10:21,009\n[LAUGH] I haven't hit 98%\nin a few months now, so.\n\n203\n00:10:21,009 --> 00:10:21,509\n>> Right.\n\n204\n00:10:22,760 --> 00:10:24,940\n>> So\nthat's one source that it may come from.\n\n205\n00:10:24,940 --> 00:10:28,420\nThe other one are contracts, that you\nmight be in a business that enters into\n\n206\n00:10:28,420 --> 00:10:30,310\ncontracts with other businesses and so\n\n207\n00:10:30,310 --> 00:10:32,760\nyou have these different\nlevels that you need to meet.\n\n208\n00:10:32,760 --> 00:10:36,776\nSo these are all things that make it why\nwe have to have a business continuity\n\n209\n00:10:36,776 --> 00:10:40,500\nplan and a disaster recovery plan and\nwhat they do for organization.\n\n210\n00:10:42,350 --> 00:10:46,320\nAll right, so some of the things\nthat get really tricky here is,\n\n211\n00:10:46,320 --> 00:10:49,960\nas an IT guy,\nI know the technologies to put in place.\n\n212\n00:10:49,960 --> 00:10:51,300\nMike, you know the technologies, right.\n\n213\n00:10:51,300 --> 00:10:52,660\n>> Right.\n>> We've been talking about them these\n\n214\n00:10:52,660 --> 00:10:57,310\nlast several shows, it's the money\nside that becomes a problem, right?\n\n215\n00:10:57,310 --> 00:11:00,080\nHow do we know what point to stop?\n\n216\n00:11:00,080 --> 00:11:04,958\nAnd we don't, so most companies\nwill engage in a third party\n\n217\n00:11:04,958 --> 00:11:08,580\nbringing an auditor to\ndo what's called a BIA.\n\n218\n00:11:08,580 --> 00:11:11,530\nA business impact analysis and\n\n219\n00:11:11,530 --> 00:11:16,280\nthe Business Impact Analysis it's\na risk manager that comes in and\n\n220\n00:11:16,280 --> 00:11:18,940\neverybody talks bad about risk\nmanagers but they're really valuable.\n\n221\n00:11:18,940 --> 00:11:21,230\nThey've got a set of knowledge\nthat's really important.\n\n222\n00:11:21,230 --> 00:11:24,410\nWhat they do is they look at all\nthe risks in your organization.\n\n223\n00:11:24,410 --> 00:11:26,610\nAnd for us, think of risks as.\n\n224\n00:11:28,240 --> 00:11:30,160\n>> Power failures, hurricanes.\n\n225\n00:11:30,160 --> 00:11:32,770\n>> Any kind of security vulnerability,\nright.\n\n226\n00:11:32,770 --> 00:11:35,645\nAnything that could cause your\nIT infrastructure to stop.\n\n227\n00:11:35,645 --> 00:11:38,445\nThey look at them, and\nthey calculate two things.\n\n228\n00:11:38,445 --> 00:11:42,095\nThey calculate the probability,\nwhat's the likelihood of it occurring,\n\n229\n00:11:42,095 --> 00:11:46,095\nprobability, and they measure the impact.\n\n230\n00:11:46,095 --> 00:11:49,615\nIf it were to happen, how much of\na disruption would this create?\n\n231\n00:11:49,615 --> 00:11:53,325\nAll right, because there might be\nsomething that's very highly probable.\n\n232\n00:11:53,325 --> 00:11:57,200\nA hard drive failing, if you're\nin a data center with 300 servers\n\n233\n00:11:57,200 --> 00:12:01,340\nyou probably have a hard\ndrive fail every other day.\n\n234\n00:12:01,340 --> 00:12:02,580\nThey fail that frequently, right?\n\n235\n00:12:02,580 --> 00:12:03,640\nMagnetic hard drives.\n\n236\n00:12:03,640 --> 00:12:05,770\nThey fail pretty frequently.\n\n237\n00:12:05,770 --> 00:12:09,100\nIn your laptop at home it's just one and\nso you probably go far longer than that.\n\n238\n00:12:09,100 --> 00:12:11,610\nBut in a data center, it's a common\noccurrence to have hard drive fails.\n\n239\n00:12:11,610 --> 00:12:12,840\nSo highly probable.\n\n240\n00:12:12,840 --> 00:12:14,350\nBut what's the impact?\n\n241\n00:12:14,350 --> 00:12:18,140\nWell if we've got RAID arrays or\nif we've got redundancy or whatever,\n\n242\n00:12:18,140 --> 00:12:19,930\nthe impact is next to nothing.\n\n243\n00:12:19,930 --> 00:12:23,770\nIf we don't have the RAID arrays though,\nimpact is whatever server that was,\n\n244\n00:12:23,770 --> 00:12:25,020\njust went offline.\n\n245\n00:12:25,020 --> 00:12:28,420\nAnd now that software or\napplication is offline,\n\n246\n00:12:28,420 --> 00:12:33,600\nso is it worth it to go ahead and\npay to put that redundancy in.\n\n247\n00:12:33,600 --> 00:12:34,330\nWell what's the impact?\n\n248\n00:12:35,360 --> 00:12:40,740\nLet's use Amazon as an example Amazon.com\nIf Amazon.com's website were to go down,\n\n249\n00:12:40,740 --> 00:12:43,255\nthey lose a million dollars per hour.\n\n250\n00:12:43,255 --> 00:12:45,960\n>> Mm-hm\n>> Every hour, right?\n\n251\n00:12:45,960 --> 00:12:49,440\nThat's a monetary value they can assign to\nthat, and it's part of the business impact\n\n252\n00:12:49,440 --> 00:12:52,520\nanalysis, that's exactly what they do,\nthey figure out what that dollar sign is.\n\n253\n00:12:52,520 --> 00:12:56,530\nFor every hour that that item is down,\nhow much money are you losing?\n\n254\n00:12:56,530 --> 00:12:58,160\nAnd that's how you can\njustify what to spend.\n\n255\n00:12:59,270 --> 00:13:02,980\nCuz if you have to spend\n25% of that to prevent it,\n\n256\n00:13:02,980 --> 00:13:05,050\nthen you view it as saving 75%.\n\n257\n00:13:05,050 --> 00:13:10,730\nBut what if it's so improbable\nthat it's not worth doing there,\n\n258\n00:13:10,730 --> 00:13:12,620\nand the project management\nshows that we've done.\n\n259\n00:13:12,620 --> 00:13:15,480\nI've always joke around\nabout our insurance here.\n\n260\n00:13:15,480 --> 00:13:19,170\nSo the ITVProTV studios,\nwe have insurance on the building.\n\n261\n00:13:19,170 --> 00:13:20,580\nIf a fire were to break out,\n\n262\n00:13:21,590 --> 00:13:24,000\nthe insurance company will pay\nto replace all of our equipment.\n\n263\n00:13:24,000 --> 00:13:26,330\nWe can easily build out in\na new place somewhere and\n\n264\n00:13:26,330 --> 00:13:28,450\nbe up again in a handful of days.\n\n265\n00:13:28,450 --> 00:13:31,500\nSo that's something we've planned for,\nwe have flood insurance.\n\n266\n00:13:31,500 --> 00:13:34,810\nIf big rains come in and\nit floods, again, we're covered.\n\n267\n00:13:34,810 --> 00:13:37,410\nBut we don't have meteor insurance.\n\n268\n00:13:37,410 --> 00:13:39,700\nWe took a pass on that one.\n\n269\n00:13:39,700 --> 00:13:46,380\nSo a meteor could come down, smash into\nthe studio, obliterate everything, and.\n\n270\n00:13:46,380 --> 00:13:47,070\n>> We'd be SOL.\n\n271\n00:13:47,070 --> 00:13:47,710\n>> We're out of luck.\n\n272\n00:13:47,710 --> 00:13:48,235\n>> Yeah.\n>> [LAUGH]\n\n273\n00:13:48,235 --> 00:13:48,780\n>> Yeah, so\n\n274\n00:13:48,780 --> 00:13:52,300\nnow we gotta come up with the capital\nto be able to build a new studio and\n\n275\n00:13:52,300 --> 00:13:55,110\nget back online because the insurance\ncompany isn't gonna give us a dime.\n\n276\n00:13:55,110 --> 00:13:57,110\nWe took a pass on meteor insurance.\n\n277\n00:13:57,110 --> 00:14:00,140\nWell, we feel okay doing that,\n\n278\n00:14:00,140 --> 00:14:04,720\nbecause what are the odds of\na meteor hitting this building?\n\n279\n00:14:04,720 --> 00:14:08,750\nOkay, what are the odds of\na meteor hitting this state?\n\n280\n00:14:08,750 --> 00:14:09,990\n>> Yeah, even Florida, yeah.\n\n281\n00:14:09,990 --> 00:14:11,840\nUnless it's right in\nthe middle of our building.\n\n282\n00:14:11,840 --> 00:14:12,740\n>> Exactly.\n\n283\n00:14:12,740 --> 00:14:17,560\nThe probability is so low, that while\nwe could have paid for insurance,\n\n284\n00:14:17,560 --> 00:14:20,210\nor put a giant metal shield up,\nor something.\n\n285\n00:14:20,210 --> 00:14:22,860\n>> Lasers, they shoot them out of the sky.\n\n286\n00:14:22,860 --> 00:14:24,768\n>> [LAUGH] While we could\nhave done all these things,\n\n287\n00:14:24,768 --> 00:14:27,486\nit's kind of a waste of money,\nbecause it's just not gonna happen.\n\n288\n00:14:27,486 --> 00:14:31,925\nAnd so finding that balance,\nthat's what a risk manager does,\n\n289\n00:14:31,925 --> 00:14:35,095\nthat's what an auditor can do when they\nbuild that business impact analysis.\n\n290\n00:14:35,095 --> 00:14:36,755\nThey get the dollar values.\n\n291\n00:14:36,755 --> 00:14:38,875\nWhat's the likelihood that\nit's gonna occur, and\n\n292\n00:14:38,875 --> 00:14:40,930\nhow much it's gonna cost\nyou to deal with it?\n\n293\n00:14:40,930 --> 00:14:46,270\nAnd then they create this thing called\na risk register that lists them,\n\n294\n00:14:46,270 --> 00:14:49,980\nand they quantify all of this stuff\nby just taking that probability and\n\n295\n00:14:49,980 --> 00:14:53,120\nmultiplying it by the impact,\nthe dollar signs.\n\n296\n00:14:53,120 --> 00:14:56,400\nAnd that resulting number gives a number\nthat you can compare all your risks\n\n297\n00:14:56,400 --> 00:14:57,500\nand sort it.\n\n298\n00:14:57,500 --> 00:15:00,970\nAnd you can figure out which\none is the most risky, right?\n\n299\n00:15:00,970 --> 00:15:01,570\n>> Right.\n\n300\n00:15:01,570 --> 00:15:03,600\n>> Which is a combination of the two.\n\n301\n00:15:03,600 --> 00:15:07,900\nIf it's maybe mid-level probability but\n\n302\n00:15:07,900 --> 00:15:11,835\na high impact, that's probably\nsomething you need to deal with.\n\n303\n00:15:11,835 --> 00:15:14,555\nIf it's a high probability and a mid-level\nimpact you need to deal with it,\n\n304\n00:15:14,555 --> 00:15:18,075\nif it's high on both you\nabsolutely have to deal with it.\n\n305\n00:15:18,075 --> 00:15:21,415\nBut if it's low probability,\neven at a high impact,\n\n306\n00:15:21,415 --> 00:15:23,137\nyou might not need to worry about it.\n\n307\n00:15:23,137 --> 00:15:26,047\n>> That good old risk matrix\nthat we'll see drawn up.\n\n308\n00:15:26,047 --> 00:15:27,467\n>> Yeah.\nSo, that's what they do and\n\n309\n00:15:27,467 --> 00:15:29,657\nthat's not what they're gonna hit us for\non the exam.\n\n310\n00:15:29,657 --> 00:15:31,277\nBut, we need to be aware of that process.\n\n311\n00:15:31,277 --> 00:15:34,757\nLike that's how we figure out the areas\nwhere we need to protect our systems.\n\n312\n00:15:34,757 --> 00:15:36,347\n>> And each one of our eyes.\n\n313\n00:15:36,347 --> 00:15:37,867\nOne of the first things we do is define.\n\n314\n00:15:37,867 --> 00:15:40,417\nWhat assets do we have\nthat are worth protecting?\n\n315\n00:15:40,417 --> 00:15:42,927\nCuz each asset's gonna have\ndifferent risks associated with it.\n\n316\n00:15:42,927 --> 00:15:46,143\nYour servers have certain set of risks\nversus the building has different\n\n317\n00:15:46,143 --> 00:15:47,840\nrisks and so, it's all calculated.\n\n318\n00:15:47,840 --> 00:15:49,523\nWe have to take each one individually, and\n\n319\n00:15:49,523 --> 00:15:52,630\nlook at what the odds of it happening are\nand what the impact is on our business.\n\n320\n00:15:52,630 --> 00:15:53,830\n>> Yeah.\n\n321\n00:15:53,830 --> 00:15:56,210\nLet's continue with the ITProTV example.\n\n322\n00:15:56,210 --> 00:16:00,537\nSo, you guys, when you access our website,\nyou go to ITPro.tv,\n\n323\n00:16:00,537 --> 00:16:04,130\nthat's on servers that\nare out there in the cloud.\n\n324\n00:16:04,130 --> 00:16:06,410\nThose aren't actually here\nin the building with us.\n\n325\n00:16:06,410 --> 00:16:09,320\nWe put them out there in the cloud\nbecause you get tons of redundancy, and\n\n326\n00:16:09,320 --> 00:16:11,828\nall sorts of extra stuff that If we\njust don't wanna pay for it here.\n\n327\n00:16:11,828 --> 00:16:12,930\n[LAUGH]\n>> Right. [LAUGH] >> But\n\n328\n00:16:12,930 --> 00:16:19,380\nwe do have a server room here and we've\ngot a cluster of virtualization servers\n\n329\n00:16:19,380 --> 00:16:25,040\nand we've got about 35 VMs on\nthere that support our business.\n\n330\n00:16:25,040 --> 00:16:29,160\nAnd they range form things like\nemail servers, and test web servers,\n\n331\n00:16:29,160 --> 00:16:30,920\nfile servers, stuff like that.\n\n332\n00:16:30,920 --> 00:16:32,840\nSo various components.\n\n333\n00:16:32,840 --> 00:16:34,490\nThere's about 35 VM's.\n\n334\n00:16:34,490 --> 00:16:37,750\nWe only back up eight of them, all right.\n\n335\n00:16:37,750 --> 00:16:42,310\nWe don't even bother backing\nup the other 27 servers.\n\n336\n00:16:42,310 --> 00:16:45,350\n27 VM's that I don't\neven bother to back up.\n\n337\n00:16:45,350 --> 00:16:47,730\nNow, why is that?\n\n338\n00:16:47,730 --> 00:16:50,490\nWell because, they're non-critical.\n\n339\n00:16:50,490 --> 00:16:52,340\n>> Right,\n>> And they're not even essential,\n\n340\n00:16:52,340 --> 00:16:53,580\nbetter yet non-critical.\n\n341\n00:16:53,580 --> 00:16:57,380\nIf I lose my test web server,\nbig deal, it was a test server.\n\n342\n00:16:57,380 --> 00:16:58,170\nWho cares?\n\n343\n00:16:58,170 --> 00:16:58,810\nRight?\n\n344\n00:16:58,810 --> 00:16:59,600\n>> Versus the cost.\n\n345\n00:16:59,600 --> 00:17:01,590\nThe time that it would\ntake to back that up.\n\n346\n00:17:01,590 --> 00:17:04,850\nThe storage space it would require to\nstore those backups and things like that.\n\n347\n00:17:04,850 --> 00:17:06,330\nSo it's really not worth it.\n\n348\n00:17:06,330 --> 00:17:07,950\nWe look at that risk and we say okay.\n\n349\n00:17:07,950 --> 00:17:11,560\nWe're going to go ahead and\njust accept that risk and deal with it.\n\n350\n00:17:11,560 --> 00:17:12,290\n>> Yeah.\n\n351\n00:17:12,290 --> 00:17:16,560\nWe have a SharePoint server and\na Microsoft CRM server.\n\n352\n00:17:16,560 --> 00:17:18,465\nI don't back either one of those up.\n\n353\n00:17:18,465 --> 00:17:20,610\n>> That' s cause of your love for\nSharePoint, I know.\n\n354\n00:17:20,610 --> 00:17:22,660\n>> There is that, right.\n\n355\n00:17:22,660 --> 00:17:24,990\nYou know you guys out there in TV land\nare saying, oh Don, you're stupid.\n\n356\n00:17:26,130 --> 00:17:31,340\nBut what I do backup is the SQL\nserver that's behind it all, right.\n\n357\n00:17:31,340 --> 00:17:34,930\nSharePoint and\nCRM have very powerful web front ends, but\n\n358\n00:17:34,930 --> 00:17:37,330\nall your data is in\nthe database on the back end.\n\n359\n00:17:37,330 --> 00:17:40,290\nSo we backup that database server,\nbelieve me.\n\n360\n00:17:40,290 --> 00:17:41,630\nBut, the CRM and SharePoint,\n\n361\n00:17:41,630 --> 00:17:47,190\nthe front ends, if those fail I can just\nbring up a new server and re-install it.\n\n362\n00:17:47,190 --> 00:17:50,070\nThe time it would take me to reinstall\nit is about the same time as\n\n363\n00:17:50,070 --> 00:17:53,550\nit would take me to restore the backup so\nyou have to evaluate that,\n\n364\n00:17:53,550 --> 00:17:57,200\nfigure out when its actually\nnecessary to put measures in place.\n\n365\n00:17:57,200 --> 00:18:00,980\nThose other ones like our domain\ncontrollers, file server those guys,\n\n366\n00:18:00,980 --> 00:18:05,040\noh we back those up, I would hate to lose\nthat data, that would be a nightmare.\n\n367\n00:18:05,040 --> 00:18:09,200\nBut other parts are not critical so\nyou got to classify those servers.\n\n368\n00:18:09,200 --> 00:18:11,940\nAnd you may not have the big picture.\n\n369\n00:18:11,940 --> 00:18:14,510\nThis is where your CIO\nis gonna get involved.\n\n370\n00:18:14,510 --> 00:18:17,790\nThey're the ones that understand which\npieces are the critical components of\n\n371\n00:18:17,790 --> 00:18:18,880\nyour business.\n\n372\n00:18:18,880 --> 00:18:19,890\nI mentioned I worked at a bank.\n\n373\n00:18:19,890 --> 00:18:22,480\nSo some the servers ran\nour mortgage software.\n\n374\n00:18:22,480 --> 00:18:23,920\nThat was pretty important.\n\n375\n00:18:23,920 --> 00:18:25,460\nIt's how banks make money.\n\n376\n00:18:25,460 --> 00:18:27,020\nOther servers ran email.\n\n377\n00:18:27,020 --> 00:18:28,450\nThat was pretty important.\n\n378\n00:18:28,450 --> 00:18:32,080\nBut other servers still ran services\nthat I wasn't familiar with.\n\n379\n00:18:32,080 --> 00:18:33,800\nAnd I didn't know how critical they were.\n\n380\n00:18:33,800 --> 00:18:35,460\nSo, for example, we had a fax server.\n\n381\n00:18:35,460 --> 00:18:37,260\nI knew the fax server was there.\n\n382\n00:18:37,260 --> 00:18:38,070\nI'd seen it.\n\n383\n00:18:38,070 --> 00:18:40,610\nI don't think I logged into it a single\ntime I worked for that company.\n\n384\n00:18:40,610 --> 00:18:41,230\nI never touched it.\n\n385\n00:18:41,230 --> 00:18:42,220\nOther people managed that thing.\n\n386\n00:18:43,580 --> 00:18:46,480\nWe didn't back it up and\nI never really asked about it,\n\n387\n00:18:46,480 --> 00:18:48,630\nbut we had this meeting and\nit came out in there.\n\n388\n00:18:48,630 --> 00:18:50,909\nThey were talking about\ntheir critical servers and\n\n389\n00:18:50,909 --> 00:18:52,630\nthe fax services are non-critical.\n\n390\n00:18:52,630 --> 00:18:56,260\nIt wasn't something that we relied\nupon and if it went down it went down.\n\n391\n00:18:56,260 --> 00:18:57,280\nIt was just no big deal.\n\n392\n00:18:57,280 --> 00:19:01,520\nBut there were other things that we\ndid rely upon that we had to have.\n\n393\n00:19:01,520 --> 00:19:04,370\nAnd so those were the ones I was aware of,\nthose are the ones that I was involved in.\n\n394\n00:19:04,370 --> 00:19:08,410\nSo that happens you've got to gauge\nyour devices, gauge your systems and\n\n395\n00:19:08,410 --> 00:19:10,528\ntheir actions, what's important.\n\n396\n00:19:10,528 --> 00:19:15,750\nAll right so it's all in a BIA if you\nget you get one performed for you or\n\n397\n00:19:15,750 --> 00:19:18,860\nyou can kind of do your own unofficial one\nwhere you just try and rank everything.\n\n398\n00:19:18,860 --> 00:19:20,310\nBusiness Impact Analysis.\n\n399\n00:19:21,770 --> 00:19:25,460\nAll right, the last thing that I\nwant to mention on the concept\n\n400\n00:19:25,460 --> 00:19:31,070\nside before we dive into other\nthings is when we setup our plan,\n\n401\n00:19:31,070 --> 00:19:35,180\nwe are planning for\nBusiness continuity, right?\n\n402\n00:19:35,180 --> 00:19:40,090\nSo keeping ourselves operational during\na failure and that's when we have\n\n403\n00:19:40,090 --> 00:19:44,230\nclustering, rate arrays, redundant\nstorage, redundant networks, right?\n\n404\n00:19:44,230 --> 00:19:49,050\nThose kind of things keep us online\neven during a failure, all right?\n\n405\n00:19:49,050 --> 00:19:50,350\nBut they don't help us recover.\n\n406\n00:19:51,370 --> 00:19:54,690\nIf that two node cluster had a node fail,\n\n407\n00:19:54,690 --> 00:19:59,270\nthe cluster keeps it online but\nthe cluster can't fix that other server.\n\n408\n00:19:59,270 --> 00:20:03,450\nIf a hard drive fails, the RAID5 array or\nwhatever keeps us online but\n\n409\n00:20:03,450 --> 00:20:05,620\nit can't fix a failed hard drive.\n\n410\n00:20:05,620 --> 00:20:10,930\nSo our business continuity,\nthat is like being proactive.\n\n411\n00:20:10,930 --> 00:20:13,420\nPlanning before the failure\nbefore it happens.\n\n412\n00:20:13,420 --> 00:20:18,480\nDisaster recovery, that's what\nwe do when the failure happens.\n\n413\n00:20:18,480 --> 00:20:23,450\nAnd so we need documents,\ninstructions that say, if a hard drive\n\n414\n00:20:23,450 --> 00:20:27,685\nfails in this array, here's what you do\nto fix it, here's the steps you follow.\n\n415\n00:20:27,685 --> 00:20:31,955\nFollow and it needs to be documented\nbecause depending on the type of failure\n\n416\n00:20:31,955 --> 00:20:33,225\nyou might not be available.\n\n417\n00:20:33,225 --> 00:20:34,015\nRight?\n\n418\n00:20:34,015 --> 00:20:36,060\nWe always called this the bus clause.\n\n419\n00:20:36,060 --> 00:20:38,635\n>> [LAUGH]\n>> If I got hit by a bus on the way into\n\n420\n00:20:38,635 --> 00:20:42,585\nwork and somebody else had to do this,\nmy documentation had to be written\n\n421\n00:20:42,585 --> 00:20:45,245\nwell enough that somebody\nelse could follow it and\n\n422\n00:20:45,245 --> 00:20:47,505\ndo it even though they hadn't\nworked on the system before.\n\n423\n00:20:47,505 --> 00:20:48,075\nRight.\nSo\n\n424\n00:20:48,075 --> 00:20:50,045\nwe had these run books\nall through the company.\n\n425\n00:20:50,045 --> 00:20:51,730\nAll of the IT guys did.\n\n426\n00:20:51,730 --> 00:20:52,920\nWhich were basically your job.\n\n427\n00:20:52,920 --> 00:20:55,440\nIt would say here's how I do my job.\n\n428\n00:20:55,440 --> 00:20:57,730\nIf this happens here's\nthe steps that I take.\n\n429\n00:20:57,730 --> 00:20:59,180\nAnd there's two benefits for this.\n\n430\n00:20:59,180 --> 00:21:00,750\nOne if your not available\nsomebody else can do it.\n\n431\n00:21:00,750 --> 00:21:03,540\nRight?\nSo we have that guaranteed assurance.\n\n432\n00:21:03,540 --> 00:21:08,855\nBut the other thing is when a failure\nhappens, people have a tendency to panic.\n\n433\n00:21:08,855 --> 00:21:12,350\nPeople panic, they get flustered,\nand they can't think straight.\n\n434\n00:21:12,350 --> 00:21:15,455\n>> Decision-making is\njust not too good then.\n\n435\n00:21:15,455 --> 00:21:18,212\n>> And my favorite is the whole time\nyou're trying to fix the problem\n\n436\n00:21:18,212 --> 00:21:19,462\nwhat's your CIO doing?\n\n437\n00:21:19,462 --> 00:21:20,712\nWhat are the other VPs doing?\n\n438\n00:21:20,712 --> 00:21:22,902\n>> Trying to get access to that server.\n\n439\n00:21:22,902 --> 00:21:25,412\n>> Or walking over to you and\nsaying how much longer?\n\n440\n00:21:25,412 --> 00:21:26,102\nHow much longer?\n\n441\n00:21:26,102 --> 00:21:27,132\nIs it ready yet?\nIs it back up yet?\n\n442\n00:21:27,132 --> 00:21:27,762\nYou know, how much longer?\n\n443\n00:21:27,762 --> 00:21:29,592\nAnd they'll drive you nuts.\n\n444\n00:21:29,592 --> 00:21:32,662\nAnd I remember I had this very rude\nconversation with a vice president a few\n\n445\n00:21:32,662 --> 00:21:37,102\nyears back where it was an email\nserver that was down and\n\n446\n00:21:37,102 --> 00:21:39,622\nI was working on it and\nthe help desk forwarded him up to me,\n\n447\n00:21:39,622 --> 00:21:41,340\nwhich they shouldn't have done but\nthey did.\n\n448\n00:21:41,340 --> 00:21:46,180\nAnd so I answered the phone, and he said,\nhey, I'm calling about the mail server.\n\n449\n00:21:46,180 --> 00:21:47,220\nWhat's the current status?\n\n450\n00:21:47,220 --> 00:21:48,250\nHow's it looking?\n\n451\n00:21:48,250 --> 00:21:49,260\nAnd I said, well, I don't know.\n\n452\n00:21:49,260 --> 00:21:52,292\nI'm not in the room with the mail server\nanymore cuz I'm on the phone with you.\n\n453\n00:21:52,292 --> 00:21:54,270\n>> [LAUGH]\n>> And he said, okay, understood.\n\n454\n00:21:54,270 --> 00:21:55,560\nGo ahead and get back to it.\n\n455\n00:21:55,560 --> 00:21:59,430\nAnd so, that's what happens is,\nyou get these people that just,\n\n456\n00:21:59,430 --> 00:22:01,190\nthey want a status update, all right.\n\n457\n00:22:01,190 --> 00:22:06,070\nSo, your disaster recovery plan, it\nneeds to contain a few different pieces.\n\n458\n00:22:06,070 --> 00:22:08,140\nOne, it need to have steps\nto solve the problem, right?\n\n459\n00:22:08,140 --> 00:22:11,990\nSo almost every problem is predictable,\nthere's always some unpredictable stuff,\n\n460\n00:22:11,990 --> 00:22:14,090\nbut you know the types of\nproblems that can happen, so\n\n461\n00:22:14,090 --> 00:22:17,260\nsetting up that plan is not that big\nof a deal, you just need to do it.\n\n462\n00:22:17,260 --> 00:22:18,990\nSo that's piece number one.\n\n463\n00:22:18,990 --> 00:22:21,450\nPiece number two is that it needs\nto have a communications plan.\n\n464\n00:22:21,450 --> 00:22:24,600\nYou need to say, alright, a failure\nhappened, who needs to be notified?\n\n465\n00:22:24,600 --> 00:22:28,110\nHow do we relay status updates, what is\nour, do we have a phone tree, do we do,\n\n466\n00:22:28,110 --> 00:22:30,600\nyou don't wanna do email if\nthe email server is down, right?\n\n467\n00:22:30,600 --> 00:22:32,945\nSo what's your communication plan?\n\n468\n00:22:32,945 --> 00:22:36,829\nAnd in that story, we didn't have\na good communication plan for that and\n\n469\n00:22:36,829 --> 00:22:37,855\nafter that we did.\n\n470\n00:22:37,855 --> 00:22:41,895\nAfter that, my manager became the like-\n>> Liaison, yeah.\n\n471\n00:22:41,895 --> 00:22:44,045\n>> Communications funnel for that, yeah.\n\n472\n00:22:44,045 --> 00:22:45,937\nTo keep people off of the text.\n\n473\n00:22:45,937 --> 00:22:49,127\nSo you have that communications plan.\n\n474\n00:22:49,127 --> 00:22:50,877\nAnd then the third piece\nis the most important and\n\n475\n00:22:50,877 --> 00:22:52,607\nits the one most people leave off.\n\n476\n00:22:52,607 --> 00:22:55,377\nWhen you have a plan,\nyou can test it, right?\n\n477\n00:22:55,377 --> 00:22:57,460\nSo you test it out periodically.\n\n478\n00:22:57,460 --> 00:23:02,380\n>> And when you test your plan,\nyou should document how long things took.\n\n479\n00:23:02,380 --> 00:23:05,950\nAnd that way, when people ask you that\nquestion, how much longer is it gonna be?\n\n480\n00:23:05,950 --> 00:23:08,010\nOur normal answer is, well, I don't know.\n\n481\n00:23:08,010 --> 00:23:09,360\nI'm restoring, I'm waiting on this tape.\n\n482\n00:23:09,360 --> 00:23:12,940\nIt says two hours, but you know Microsoft\ntimers, they don't mean anything, right?\n\n483\n00:23:12,940 --> 00:23:17,140\nTwo hours to them, the next minute,\nit's three seconds.\n\n484\n00:23:17,140 --> 00:23:18,030\nIt's all over.\n\n485\n00:23:18,030 --> 00:23:22,930\nSo, but\nif you've done it In a test environment.\n\n486\n00:23:22,930 --> 00:23:24,110\nYou know how long it will take.\n\n487\n00:23:24,110 --> 00:23:27,650\nYou'll say well the last time I ran\nthrough this scenario it took 3 hours.\n\n488\n00:23:27,650 --> 00:23:30,150\nI am currently an hour and a half in,\nso we should be back up in about and\n\n489\n00:23:30,150 --> 00:23:31,000\nhour and a half.\n\n490\n00:23:31,000 --> 00:23:32,580\nThat's my target time.\n\n491\n00:23:32,580 --> 00:23:35,230\nSubject to change, but\nthat's the target time.\n\n492\n00:23:35,230 --> 00:23:37,680\nSo you're able to reassure people and\ncommunicate.\n\n493\n00:23:37,680 --> 00:23:38,720\nPeople leave that out.\n\n494\n00:23:38,720 --> 00:23:43,191\nAnd IT guys admittedly, we can be\nbad with communicating sometimes.\n\n495\n00:23:43,191 --> 00:23:45,700\nI didn't have to be rude with\nthat guy on the phone call.\n\n496\n00:23:45,700 --> 00:23:47,570\nJust got me at the very wrong time.\n\n497\n00:23:47,570 --> 00:23:50,231\nSo that's stuff that we shouldn't do.\n\n498\n00:23:50,231 --> 00:23:51,607\n>> [LAUGH]\n>> Your DR plan,\n\n499\n00:23:51,607 --> 00:23:53,875\nthat's what's gonna cover that, right?\n\n500\n00:23:53,875 --> 00:23:56,255\nBut the steps are really\nthe most important.\n\n501\n00:23:56,255 --> 00:23:58,569\nAll right, so as we plan for this stuff,\n\n502\n00:23:58,569 --> 00:24:02,260\nthere's a few other little terms\nwe need to talk about, right?\n\n503\n00:24:02,260 --> 00:24:05,380\nRTO, and RPO, all right?\n\n504\n00:24:05,380 --> 00:24:09,450\nLet's do RPO first, right?\n\n505\n00:24:09,450 --> 00:24:11,030\n>> The Recovery Point Objective.\n\n506\n00:24:11,030 --> 00:24:12,510\n>> The Recovery Point Objective.\n\n507\n00:24:12,510 --> 00:24:17,600\nThat is, when a failure occurs,\nhow much data can I afford to lose?\n\n508\n00:24:19,450 --> 00:24:24,050\nFor our servers here in the building\nwith us we back them up every night.\n\n509\n00:24:24,050 --> 00:24:26,552\nSo every night we do a full backup.\n\n510\n00:24:26,552 --> 00:24:30,190\nThe backups start a midnight\nsometime around 4 AM I think,\n\n511\n00:24:30,190 --> 00:24:31,220\nsomewhere around there.\n\n512\n00:24:31,220 --> 00:24:35,636\nBut they run every night and they back up\nall of our servers, our internal ones.\n\n513\n00:24:35,636 --> 00:24:38,030\nThe website, the stuff that you guys go,\nto that thing's backing up,\n\n514\n00:24:39,110 --> 00:24:41,652\nit's like every 15 minutes or\nsomething ridiculous like that.\n\n515\n00:24:41,652 --> 00:24:43,015\nYeah, it's really fast.\n\n516\n00:24:43,015 --> 00:24:45,970\nBut for\nones in-house we do once every 24 hours.\n\n517\n00:24:45,970 --> 00:24:48,833\nWhat that means if I had\na failure right now, so\n\n518\n00:24:48,833 --> 00:24:52,300\nit is just after 2 PM\non the clock over here.\n\n519\n00:24:52,300 --> 00:24:56,500\nSo if I had a failure right now,\nthe backup started around midnight.\n\n520\n00:24:56,500 --> 00:24:59,700\nSo let's just say midnight is when\nit started and finished, right?\n\n521\n00:24:59,700 --> 00:25:03,050\nYou don't know where in the backup\nsomething was actually backed up.\n\n522\n00:25:03,050 --> 00:25:07,060\nSo if it was midnight, now it's 2 PM,\nthat was 14 hours ago.\n\n523\n00:25:07,060 --> 00:25:12,430\nSo if I have a failure right now,\nI just lost 14 hours of data, right?\n\n524\n00:25:12,430 --> 00:25:18,620\nIf the failure happened at 11:30 PM, then\nyou just lost 23 and a half hours of data.\n\n525\n00:25:18,620 --> 00:25:21,570\nSo when we say we're gonna\nbackup every night at midnight,\n\n526\n00:25:21,570 --> 00:25:26,430\nwhat we're really saying\nis our RPO is 24 hours.\n\n527\n00:25:26,430 --> 00:25:30,380\nWe can afford to lose 24 hours of data,\nall right?\n\n528\n00:25:30,380 --> 00:25:32,690\nAnd for these servers in here,\nthat's absolutely true,\n\n529\n00:25:32,690 --> 00:25:34,220\nwe could probably lose more, right?\n\n530\n00:25:34,220 --> 00:25:37,830\nAnd that's important too because\nwhat if the backups fail tonight?\n\n531\n00:25:37,830 --> 00:25:40,070\nI come in in the morning and\nI see oh look, the backups failed.\n\n532\n00:25:40,070 --> 00:25:41,980\nSo what do I do?\nI rerun them, right?\n\n533\n00:25:41,980 --> 00:25:46,510\nBut now my RPO just got even bigger\ncuz the backups didn't run last night.\n\n534\n00:25:46,510 --> 00:25:49,488\nSo now my timer is ticking and\nthat window is growing and\n\n535\n00:25:49,488 --> 00:25:51,380\nI might lose more than 24 hours.\n\n536\n00:25:51,380 --> 00:25:55,266\nIf I just say, well, we'll let them\nrerun tonight and see what happens,\n\n537\n00:25:55,266 --> 00:25:57,470\nnow my RPO just became 48 hours, right?\n\n538\n00:25:57,470 --> 00:26:03,340\nSo RPO, Recovery Point Objective,\nhow much data you can afford to lose.\n\n539\n00:26:03,340 --> 00:26:05,260\nAnd it may not be much.\n\n540\n00:26:05,260 --> 00:26:09,297\nIf you're a stock brokerage and\nyou're handling stock trades, and\n\n541\n00:26:09,297 --> 00:26:14,010\nyou've told the customer the trade\nwent through, you can't lose that.\n\n542\n00:26:14,010 --> 00:26:15,370\nYour RPO is zero.\n\n543\n00:26:15,370 --> 00:26:16,850\nYou cannot afford to lose data.\n\n544\n00:26:16,850 --> 00:26:19,940\nAnd that's where you've gotta have\ntrue data synchronization and so on.\n\n545\n00:26:19,940 --> 00:26:23,280\nTraditional backup's not suited for that.\n\n546\n00:26:23,280 --> 00:26:26,390\nBut most people can afford to\nlose a little bit of data.\n\n547\n00:26:26,390 --> 00:26:28,830\nThat little bit,\nit might only be five minutes.\n\n548\n00:26:28,830 --> 00:26:32,050\nIf you're Amazon.com you probably\ndon't want to lose hardly any.\n\n549\n00:26:32,050 --> 00:26:35,800\nSo, really trying to keep that\nwindow as small as possible.\n\n550\n00:26:35,800 --> 00:26:38,250\nBut again,\nyou might be able to have a bigger window.\n\n551\n00:26:38,250 --> 00:26:40,400\nAnd different servers may\nhave different windows.\n\n552\n00:26:40,400 --> 00:26:43,530\nYou might have some servers that you're\nbacking up every 15 minutes, and\n\n553\n00:26:43,530 --> 00:26:45,400\nother servers that you back\nup once every 24 hours.\n\n554\n00:26:45,400 --> 00:26:48,280\nAnd other servers still that you\nmight only back up once a month,\n\n555\n00:26:48,280 --> 00:26:49,440\ndepending on what the RPO is.\n\n556\n00:26:51,082 --> 00:26:53,970\nAll right, so that's an important\nthing as we start to build our plan.\n\n557\n00:26:53,970 --> 00:26:55,470\nHow much time is allowed to pass?\n\n558\n00:26:55,470 --> 00:26:58,180\nAnd it usually isn't us that\nmakes that decision, right?\n\n559\n00:26:58,180 --> 00:27:00,330\nIt's normally the business arm.\n\n560\n00:27:02,030 --> 00:27:04,130\nThe other par is, RTO,\nRecovery Time Objective.\n\n561\n00:27:05,360 --> 00:27:09,850\nOnce a failure happens, how much time\nis it gonna take to fix it, right?\n\n562\n00:27:09,850 --> 00:27:12,510\nOur recovery time, how much time\ncan pass before we get back online?\n\n563\n00:27:13,620 --> 00:27:16,960\nAnd in my story about the FDIC,\nthat's what they were giving us.\n\n564\n00:27:16,960 --> 00:27:18,840\nThey were giving us a three day RTO.\n\n565\n00:27:18,840 --> 00:27:22,500\nIf we ever had a failure,\nthey didn't care how we fixed it,\n\n566\n00:27:22,500 --> 00:27:26,100\nyou fix it whatever way you want, but\nyour RTO is three days, 72 hours.\n\n567\n00:27:26,100 --> 00:27:29,050\nYou have got to be back up in 72 hours.\n\n568\n00:27:29,050 --> 00:27:31,010\nAnd that is what we planned on.\n\n569\n00:27:31,010 --> 00:27:37,545\nSo, I have this long, sordid history with\nthis one where I'll go to an executive and\n\n570\n00:27:37,545 --> 00:27:41,890\nI'll say okay,\nwe're redoing our backup system.\n\n571\n00:27:41,890 --> 00:27:43,820\nWe want to make it a little bit better.\n\n572\n00:27:43,820 --> 00:27:45,322\nWhat should our RTO be?\n\n573\n00:27:45,322 --> 00:27:48,750\nAnd unfortunately, sometimes they'll say,\nwell what's an RTO?\n\n574\n00:27:48,750 --> 00:27:50,090\nThen you explain it to them.\n\n575\n00:27:50,090 --> 00:27:53,960\nThen they say, okay, so\nhow much time before we're back online?\n\n576\n00:27:53,960 --> 00:27:56,010\nHow about instant?\n\n577\n00:27:56,010 --> 00:27:58,260\n>> Yeah [LAUGH] I mean,\nwhy wouldn't they, right?\n\n578\n00:27:58,260 --> 00:27:59,050\n>> That's what they say.\n\n579\n00:27:59,050 --> 00:28:01,810\nAnd then you ask them,\nhow much data can we lose?\n\n580\n00:28:01,810 --> 00:28:03,550\nAnd they'll say, how about none?\n\n581\n00:28:03,550 --> 00:28:07,422\nI want us to lose no data,\nbe back up instantly.\n\n582\n00:28:07,422 --> 00:28:13,250\nAnd [LAUGH] so when that happens,\nyou try not to laugh.\n\n583\n00:28:13,250 --> 00:28:16,150\nAnd you say well, all right,\nI can do that, absolutely.\n\n584\n00:28:16,150 --> 00:28:16,990\nI can make that happen.\n\n585\n00:28:16,990 --> 00:28:17,630\n>> Give me your checkbook.\n\n586\n00:28:17,630 --> 00:28:20,220\n>> Yeah,\nwe're gonna need a few million, right?\n\n587\n00:28:20,220 --> 00:28:22,313\n>> [LAUGH]\n>> And it gets expensive fast.\n\n588\n00:28:22,313 --> 00:28:27,322\nTo eliminate every single point of\nfailure, to have high availability,\n\n589\n00:28:27,322 --> 00:28:32,500\nto have even just five-nines of\navailability, 99.999% up time.\n\n590\n00:28:32,500 --> 00:28:35,860\nEven just to do that,\nit's gonna cost a lot of money.\n\n591\n00:28:35,860 --> 00:28:39,280\nAnd so that's the part that's\nmissing in that conversation.\n\n592\n00:28:39,280 --> 00:28:43,500\nWe need to say, okay,\nhow much is that downtime worth to you?\n\n593\n00:28:44,910 --> 00:28:48,590\nWe can get our system where we'll have\nno more than 15 minutes of downtime.\n\n594\n00:28:48,590 --> 00:28:50,660\nBut it's gonna cost x amount of dollars.\n\n595\n00:28:50,660 --> 00:28:54,920\nIf we take that to 1 hour of down time it\nbecomes cheaper, if it becomes 6 hours,\n\n596\n00:28:54,920 --> 00:28:56,246\n12 hours, 24 hours.\n\n597\n00:28:56,246 --> 00:28:59,830\nAs we grow that window, our cost of\nproviding that solution comes down.\n\n598\n00:29:00,840 --> 00:29:05,280\nAnd that is how we determine the level\nof availability, is what you can afford.\n\n599\n00:29:05,280 --> 00:29:06,790\nAnd where that balance is.\n\n600\n00:29:06,790 --> 00:29:10,830\nAnd your risk manager, whoever does\nyour business impact analysis.\n\n601\n00:29:10,830 --> 00:29:14,680\nThey're the one to help you find that\nbalancing point to know where to go.\n\n602\n00:29:14,680 --> 00:29:15,270\nAll right.\n\n603\n00:29:15,270 --> 00:29:16,630\nSo that's kinda what we rely on.\n\n604\n00:29:19,180 --> 00:29:21,924\nAll right, so that's the boring, business,\n\n605\n00:29:21,924 --> 00:29:25,430\npaperwork kinda side of this\nstuff that we have to deal with.\n\n606\n00:29:25,430 --> 00:29:29,690\nBut be aware of those concepts, they\nare on the exam, we do need to know this.\n\n607\n00:29:29,690 --> 00:29:33,320\nFor the rest of this show,\nwhich really isn't all that much more.\n\n608\n00:29:33,320 --> 00:29:34,590\nSo we'll probably just\nhave one more segment.\n\n609\n00:29:34,590 --> 00:29:38,280\nBut for the rest of it, we're gonna\ntalk about a few other solutions\n\n610\n00:29:38,280 --> 00:29:40,270\nthat just weren't addressed\nin the other show.\n\n611\n00:29:40,270 --> 00:29:42,400\nSo there's a few other little\npieces of the puzzle, and\n\n612\n00:29:42,400 --> 00:29:45,620\nsome planning things that we need to\nput in place for different stuff.\n\n613\n00:29:45,620 --> 00:29:48,900\nSo we'll talk a little bit about those\nbefore wrapping it up after that.\n\n614\n00:29:48,900 --> 00:29:51,880\nSo yeah, it's a pretty good spot to stop.\n\n615\n00:29:51,880 --> 00:29:53,680\nAll right, so ladies and\ngentlemen, let's take a break.\n\n616\n00:29:53,680 --> 00:29:58,130\nAnd when we get back, more business\ncontinuity and disaster recovery.\n\n617\n00:29:58,130 --> 00:30:05,930\n[SOUND].\n\n618\n00:30:05,930 --> 00:30:07,680\nAll right, welcome back everybody.\n\n619\n00:30:07,680 --> 00:30:11,645\nSo, one of the next things that we want\nto talk about is a real critical area for\n\n620\n00:30:11,645 --> 00:30:15,110\nMicrosoft environment and\nthat is your Active Directory.\n\n621\n00:30:15,110 --> 00:30:18,930\nNow the Active Directory has a lot\nof redundancy built into it.\n\n622\n00:30:18,930 --> 00:30:22,610\nSo, when we talk about planning for\nbusiness continuity,\n\n623\n00:30:22,610 --> 00:30:24,100\nthere's not all that much we have to do.\n\n624\n00:30:24,100 --> 00:30:26,010\nYou just have more than\none domain control.\n\n625\n00:30:26,010 --> 00:30:27,500\n>> Make sure you have, yeah,\nat least more than one.\n\n626\n00:30:27,500 --> 00:30:30,501\n>> And you stick at least one of them\nin a separate geographic location from\n\n627\n00:30:30,501 --> 00:30:32,410\nthe others and you've got redundancy.\n\n628\n00:30:32,410 --> 00:30:36,970\nThe multimaster model in Active Directory\nmakes it a dream, right?\n\n629\n00:30:36,970 --> 00:30:39,502\nYou do need to have\nredundant DNS servers also,\n\n630\n00:30:39,502 --> 00:30:41,340\ncuz we DNS to find the Active Directory.\n\n631\n00:30:41,340 --> 00:30:45,010\nBut aside from that, it's super easy\nto keep it running even during failure.\n\n632\n00:30:46,650 --> 00:30:49,590\nBut, if there's an absolute disaster,\n\n633\n00:30:49,590 --> 00:30:53,200\nthe Active Directory is usually going\nto be the first thing that we restore.\n\n634\n00:30:53,200 --> 00:30:56,300\nYou don't wanna start restoring your SQL,\nand Exchange, and so\n\n635\n00:30:56,300 --> 00:30:59,100\non when there's no Active Directory for\nthem to tie into.\n\n636\n00:31:00,270 --> 00:31:03,290\nSo this is one of the first things, and\nit's considered a critical piece of\n\n637\n00:31:03,290 --> 00:31:06,140\ninfrastructure that you need\nto have good backups for.\n\n638\n00:31:06,140 --> 00:31:09,000\nSo, what do we need to think about?\n\n639\n00:31:09,000 --> 00:31:10,570\nWhat are some of the concerns\nwe have with the AD?\n\n640\n00:31:11,670 --> 00:31:13,060\nAll sorts of stuff.\n\n641\n00:31:13,060 --> 00:31:14,530\nFirst off, you need to back it up.\n\n642\n00:31:14,530 --> 00:31:18,700\nAnd they've made the backup process for\nActive Directory a little bit\n\n643\n00:31:18,700 --> 00:31:23,350\ndifferent in newer versions of Windows,\nreally since Windows Server 2008.\n\n644\n00:31:23,350 --> 00:31:27,520\nUsed to be that you would just back\nup the system state for the server.\n\n645\n00:31:27,520 --> 00:31:29,420\nAnd that would include the registry for\n\n646\n00:31:29,420 --> 00:31:33,420\nthat server,\nas well as the Active Directory database.\n\n647\n00:31:33,420 --> 00:31:34,090\nAll right.\n\n648\n00:31:34,090 --> 00:31:37,210\nYou'd get both of those together,\nthat was your system state backup.\n\n649\n00:31:37,210 --> 00:31:40,430\nWell, [LAUGH] I remember the first time\nI ran a backup on Windows Server 2008.\n\n650\n00:31:40,430 --> 00:31:45,080\nAnd the backup was insanely large,\ncuz they used to be 500 to 600 megs and\n\n651\n00:31:45,080 --> 00:31:47,770\nnow it was like 30 gigs.\n\n652\n00:31:47,770 --> 00:31:49,550\nI was like what the heck happened?\n\n653\n00:31:49,550 --> 00:31:52,523\nWell, starting in Windows Server 2008,\n\n654\n00:31:52,523 --> 00:31:56,880\nthe system state for a domain\ncontroller includes the boot volume.\n\n655\n00:31:56,880 --> 00:32:01,535\nSo if you only have a single drive letter\non your domain controller, like a C drive,\n\n656\n00:32:01,535 --> 00:32:03,910\nit's what a lot of us stick with.\n\n657\n00:32:03,910 --> 00:32:06,860\nThen it's gonna back up\nthe whole C drive too.\n\n658\n00:32:06,860 --> 00:32:09,260\nSo when you do the system\nsave of a domain controller,\n\n659\n00:32:09,260 --> 00:32:13,025\nit's basically a bare metal\nbackup of that server.\n\n660\n00:32:13,025 --> 00:32:15,645\n>> In fact it'll include any volumes\nthat are required for active vector.\n\n661\n00:32:15,645 --> 00:32:19,575\nSo if you had moved those log files or\nif you had moved sys file folder structure\n\n662\n00:32:19,575 --> 00:32:23,510\noff to another drive that volume's gonna\nbe included in that backup as well.\n\n663\n00:32:23,510 --> 00:32:25,940\n>> So pros and cons with that.\n\n664\n00:32:25,940 --> 00:32:27,740\nRight?\nOn a negative side,\n\n665\n00:32:27,740 --> 00:32:30,960\nthe backups are larger, so\nthey take longer to run, and\n\n666\n00:32:30,960 --> 00:32:34,390\nthat means you can't necessarily run\nthem as frequently as you used to.\n\n667\n00:32:34,390 --> 00:32:38,750\nOn a positive side, you get the whole\nthing backed up, so if you ever have\n\n668\n00:32:38,750 --> 00:32:43,050\na domain controller fail, you've got your\nfull backup, you can restore and bring in.\n\n669\n00:32:43,050 --> 00:32:45,480\n>> If you've integrated DNS with that,\nor anything like that,\n\n670\n00:32:45,480 --> 00:32:46,570\nthat's all gonna be included in there.\n\n671\n00:32:46,570 --> 00:32:49,030\n>> The thing to remember\nwith active directory is,\n\n672\n00:32:49,030 --> 00:32:52,150\nwe don't actually have to back\nit up all that frequently.\n\n673\n00:32:52,150 --> 00:32:56,430\nIf you have more than one domain\ncontroller, if one fails,\n\n674\n00:32:56,430 --> 00:32:59,880\nyou don't even have to restore, you can\nbring up an all new domain controller.\n\n675\n00:32:59,880 --> 00:33:03,790\nAnd it'll just grab a copy of\nthe database from the other servers, and\n\n676\n00:33:03,790 --> 00:33:07,125\nyou're back up and you're running and\nback to your original level.\n\n677\n00:33:07,125 --> 00:33:08,910\nRight?\n\n678\n00:33:08,910 --> 00:33:12,910\nThe other thing is,\nif the backup is old and we restore it,\n\n679\n00:33:12,910 --> 00:33:16,480\nwhen the server comes up, there's\na little process called Back Filling.\n\n680\n00:33:16,480 --> 00:33:20,565\nWhen you restore a backup\nthat is even one second old.\n\n681\n00:33:20,565 --> 00:33:23,510\nRight?\nThat domain controller is gonna come up,\n\n682\n00:33:23,510 --> 00:33:27,360\nand every other domain controller\nthat still exists is newer\n\n683\n00:33:27,360 --> 00:33:28,920\nthan the one we just restored.\n\n684\n00:33:28,920 --> 00:33:29,650\nRight?\n\n685\n00:33:29,650 --> 00:33:30,880\nSo it's gonna look at that and\nit's gonna say,\n\n686\n00:33:30,880 --> 00:33:33,010\nhey you guys are newer,\ncan you catch me up?\n\n687\n00:33:33,010 --> 00:33:35,080\nCan you give me the changes\nthat happened while I was gone?\n\n688\n00:33:35,080 --> 00:33:37,545\nAnd they're gonna bring\nyou backup to current.\n\n689\n00:33:37,545 --> 00:33:40,314\nAll right, it's called back fill,\nand that's a good thing.\n\n690\n00:33:40,314 --> 00:33:41,000\nRight?\n\n691\n00:33:41,000 --> 00:33:44,690\nThat way if we have a backup that's\nfive days old we can restore it to a DC,\n\n692\n00:33:44,690 --> 00:33:47,750\nit comes up and then it just gets\ncaught up from the other guys.\n\n693\n00:33:47,750 --> 00:33:48,620\nAnd now we're back in business.\n\n694\n00:33:49,770 --> 00:33:51,930\nBut it does cause one little scenario,\nproblem.\n\n695\n00:33:51,930 --> 00:33:52,990\nRight?\n\n696\n00:33:52,990 --> 00:33:56,150\nWhat if you accidentally delete a user?\n\n697\n00:33:56,150 --> 00:33:57,250\n>> All right.\n>> Or maybe it's not accidental,\n\n698\n00:33:57,250 --> 00:33:58,100\nmaybe it's on purpose.\n\n699\n00:33:58,100 --> 00:33:58,830\nYou delete a user.\n\n700\n00:33:58,830 --> 00:34:00,070\nRight?\nThey're fired.\n\n701\n00:34:00,070 --> 00:34:02,250\n>> That's no problem,\nwe'll go get a backup, we'll restore it,\n\n702\n00:34:02,250 --> 00:34:04,100\nand there's that user account again.\n\n703\n00:34:04,100 --> 00:34:05,380\nIt's gonna put it right back.\n\n704\n00:34:05,380 --> 00:34:07,390\n>> It'll be there for a few seconds.\n\n705\n00:34:07,390 --> 00:34:08,980\n>> Right, if you're quick.\n\n706\n00:34:08,980 --> 00:34:13,240\n>> So you deleted this user, so you go and\nyou restore a backup from three days ago.\n\n707\n00:34:13,240 --> 00:34:16,140\nAnd the backup restores,\nthe server comes up, the user's there and\n\n708\n00:34:16,140 --> 00:34:16,905\nthen the user's gone.\n\n709\n00:34:16,905 --> 00:34:17,780\nRight?\n\n710\n00:34:17,780 --> 00:34:19,800\nWhat happened?Well,\n\n711\n00:34:19,800 --> 00:34:24,370\nthe deletion was logged in the active\ndirectory, it happened after your backup.\n\n712\n00:34:24,370 --> 00:34:25,250\nRight?\nThat's why your\n\n713\n00:34:25,250 --> 00:34:26,910\nbackup still contains that user.\n\n714\n00:34:26,910 --> 00:34:28,710\nAnd the other servers back fill you.\n\n715\n00:34:28,710 --> 00:34:30,120\nRight?\nThey back fill you and say,\n\n716\n00:34:30,120 --> 00:34:31,800\noh yeah you're supposed\nto delete that guy.\n\n717\n00:34:31,800 --> 00:34:33,990\n>> That guy was deleted an hour ago,\nyou're just way behind,\n\n718\n00:34:33,990 --> 00:34:35,060\nwe're going to catch you up.\n\n719\n00:34:35,060 --> 00:34:35,820\nAnd here you go.\n\n720\n00:34:35,820 --> 00:34:37,520\nAnd there it goes again, it's gone.\n\n721\n00:34:37,520 --> 00:34:38,890\n>> So backups for\n\n722\n00:34:38,890 --> 00:34:43,070\nthe Active Directory aren't particularly\nuseful from that perspective.\n\n723\n00:34:43,070 --> 00:34:44,229\nRight?\nFrom recovering from like\n\n724\n00:34:44,229 --> 00:34:45,160\nan accidental deletion.\n\n725\n00:34:45,160 --> 00:34:48,540\nIf you have a server fail,\nbad hard drive, whatever,\n\n726\n00:34:48,540 --> 00:34:51,940\nyou can restore from the backup and bring\nit back online, and it will get caught up.\n\n727\n00:34:51,940 --> 00:34:55,190\nEven if you didn't, you can just wipe\nthat DC out, bring up an all new one,\n\n728\n00:34:55,190 --> 00:34:57,130\nit'll just clone off the other DCs.\n\n729\n00:34:57,130 --> 00:35:01,410\nSo the primary reason we'd go\nto one of those backups is\n\n730\n00:35:01,410 --> 00:35:04,060\nif we only had one domain controller.\n\n731\n00:35:04,060 --> 00:35:05,040\nAnd it went down.\n\n732\n00:35:05,040 --> 00:35:07,700\nRight now we need that backup\nto be able to restore.\n\n733\n00:35:07,700 --> 00:35:09,510\nBut you should never have\njust one domain controller.\n\n734\n00:35:09,510 --> 00:35:10,890\nRight?\nYou should never put yourself\n\n735\n00:35:10,890 --> 00:35:11,780\nin that situation.\n\n736\n00:35:11,780 --> 00:35:12,990\nBut it does happen.\n\n737\n00:35:12,990 --> 00:35:15,910\nSo that's really where we start\nreaching out to that backup.\n\n738\n00:35:15,910 --> 00:35:19,130\nMaybe you have an empty root domain.\n\n739\n00:35:19,130 --> 00:35:22,120\nAnd so you just have one domain\ncontroller in that empty root.\n\n740\n00:35:22,120 --> 00:35:24,980\nAnd you don't necessarily build\na bunch of redundancy in there and\n\n741\n00:35:24,980 --> 00:35:26,280\nyou back it up once every 24 hours.\n\n742\n00:35:26,280 --> 00:35:28,780\nNow if that server fails,\nthen yeah, you can just go and\n\n743\n00:35:28,780 --> 00:35:30,205\nrestore it from backup and it'll be fine.\n\n744\n00:35:30,205 --> 00:35:31,710\nSo, you don't want to,\n\n745\n00:35:31,710 --> 00:35:36,600\nyou definitely want do the backups but\nthe backups aren't gonna be your\n\n746\n00:35:36,600 --> 00:35:39,370\nfirst line of defense when it comes to\nrestoring things like deleted objects.\n\n747\n00:35:39,370 --> 00:35:42,470\nWe have a couple of other\ntools we can use for that.\n\n748\n00:35:43,480 --> 00:35:46,970\nOne of the ones that we've talked about in\nthe MCSA track was the active directory\n\n749\n00:35:46,970 --> 00:35:47,510\nrecycle bin.\n\n750\n00:35:48,570 --> 00:35:52,280\nAnd what that does is it says hey if you\ndelete an object in the active directory,\n\n751\n00:35:52,280 --> 00:35:56,060\ninstead of actually deleting it,\nwe will tombstone it and\n\n752\n00:35:56,060 --> 00:35:59,530\nwe're just gonna stick it aside in\nthis little deleted items folder.\n\n753\n00:35:59,530 --> 00:36:00,610\nAnd we'll let it sit there for a while.\n\n754\n00:36:00,610 --> 00:36:01,110\n>> That is so nice.\n\n755\n00:36:02,230 --> 00:36:04,620\n>> And what's the default interval, is it?\n\n756\n00:36:04,620 --> 00:36:08,500\n>> It's whatever your tombstone lifetime\nis, which by default is 180 days, so\n\n757\n00:36:08,500 --> 00:36:11,280\nit gives you an extra 180 days basically.\n\n758\n00:36:11,280 --> 00:36:15,010\nYou can think of it where in the past what\nwould happen you delete that object and\n\n759\n00:36:15,010 --> 00:36:17,890\nit would get tombstone as he said,\nmarked for deletion.\n\n760\n00:36:17,890 --> 00:36:21,400\nBut it would sit there for 180 days, but\nit'd be hidden from active directory.\n\n761\n00:36:21,400 --> 00:36:25,900\nIt would be in that, a hidden container is\ndeleted, you wouldn't be able to see it,\n\n762\n00:36:25,900 --> 00:36:27,390\nand it would get mangled.\n\n763\n00:36:27,390 --> 00:36:29,154\nSo everything, all the attributes.\n\n764\n00:36:29,154 --> 00:36:33,270\nLike if it was a user account, first name,\nlast name, manager, passwords.\n\n765\n00:36:33,270 --> 00:36:34,750\nAll that stuff is gone.\n\n766\n00:36:34,750 --> 00:36:37,610\nYou're left with like a good and\na last known parent.\n\n767\n00:36:37,610 --> 00:36:39,410\nAnd it was sitting there.\n\n768\n00:36:39,410 --> 00:36:41,690\nAnd then after 180 days,\nthe next recycle or\n\n769\n00:36:41,690 --> 00:36:44,350\nthe next garbage collecting\nprocess would clean it out.\n\n770\n00:36:44,350 --> 00:36:49,370\nThe recycle bin now, if we set that in it,\nit basically puts another 180 day phase.\n\n771\n00:36:49,370 --> 00:36:51,560\nIt just copies your tombstone lifetime.\n\n772\n00:36:51,560 --> 00:36:54,210\nYou can actually change\nthat if you need to.\n\n773\n00:36:54,210 --> 00:36:56,282\nAnd now you've got 180 days\nwhere it's not mangled.\n\n774\n00:36:56,282 --> 00:37:00,320\nStill gonna be hidden but\nit goes into this recycled container.\n\n775\n00:37:01,610 --> 00:37:03,370\nJust like the recycle bin on your desktop.\n\n776\n00:37:03,370 --> 00:37:06,130\nSo now it's sitting there,\nit's not mangled, and\n\n777\n00:37:06,130 --> 00:37:09,720\nI can just like the recycle bin on\nmy desktop I can go into that using\n\n778\n00:37:09,720 --> 00:37:12,610\nlike the Active Directory Administrative\nCenter or PowerShell, and\n\n779\n00:37:12,610 --> 00:37:13,850\nI can restore that object.\n\n780\n00:37:13,850 --> 00:37:15,510\nAnd it's as good as new.\n\n781\n00:37:15,510 --> 00:37:16,140\n>> Yeah.\n\n782\n00:37:16,140 --> 00:37:19,650\nSo, for simple deletions,\naccidental deletion of a user, group,\n\n783\n00:37:19,650 --> 00:37:23,130\ncomputer object, it's gonna be that Active\nDirectory Recycle Bin that we go for.\n\n784\n00:37:23,130 --> 00:37:24,100\nRight?\n\n785\n00:37:24,100 --> 00:37:27,470\nSo our actual backup of\nthe Active Directory,\n\n786\n00:37:27,470 --> 00:37:30,900\nwe're not gonna rely on that much\nunless we actually lose a server.\n\n787\n00:37:30,900 --> 00:37:33,910\n>> Yeah, or if we'd missed that 180 day\nwindow before we realize something was\n\n788\n00:37:33,910 --> 00:37:35,380\ndeleted and or something like that.\n\n789\n00:37:37,330 --> 00:37:40,700\n>> Well there's actually\na little problem with that.\n\n790\n00:37:40,700 --> 00:37:43,050\nSo, what happens after 180 days?\n\n791\n00:37:43,050 --> 00:37:45,880\nWell after 180 days, that account is gone.\n\n792\n00:37:45,880 --> 00:37:46,610\nRight?\nIt's removed.\n\n793\n00:37:47,660 --> 00:37:50,620\nSo you might think to yourself, all right,\nif I'm gonna get that account back\n\n794\n00:37:50,620 --> 00:37:54,032\nmaybe I'll just go grab one of my\nbackups from over 180 days ago.\n\n795\n00:37:54,032 --> 00:37:55,360\nAll right?\n\n796\n00:37:55,360 --> 00:37:57,660\nUnfortunately, it doesn't work\nthat way a domain controller.\n\n797\n00:37:57,660 --> 00:38:01,343\nYou cannot restore a domain controller\nbackup that's over six months old.\n\n798\n00:38:01,343 --> 00:38:02,100\nAll right?\n\n799\n00:38:02,100 --> 00:38:06,640\nAnd the reason is, it's been disconnected\nfrom the active directory too long.\n\n800\n00:38:06,640 --> 00:38:11,360\nIt's so far behind, it's sequence\nnumbers are wrong the password for\n\n801\n00:38:11,360 --> 00:38:13,290\nit's computer account is wrong.\n\n802\n00:38:13,290 --> 00:38:14,900\nAnd, it's unable to communicate.\n\n803\n00:38:14,900 --> 00:38:19,200\nSo, if you try and restore a backup of\na domain controller that's over six months\n\n804\n00:38:19,200 --> 00:38:20,730\nold, it's going to fail.\n\n805\n00:38:20,730 --> 00:38:21,570\nIt's not going to work.\n\n806\n00:38:21,570 --> 00:38:22,892\nYou won't be able to recover that object.\n\n807\n00:38:22,892 --> 00:38:24,300\nAll right?\n\n808\n00:38:24,300 --> 00:38:29,455\nBut, if I have a backup\nfrom four days ago.\n\n809\n00:38:29,455 --> 00:38:32,195\nAnd the 180th day of that\nuser account just expired and\n\n810\n00:38:32,195 --> 00:38:34,395\nthey're now gone from the AD.\n\n811\n00:38:34,395 --> 00:38:37,985\nWell my backup was from four days\nago when they were 176 days deleted.\n\n812\n00:38:37,985 --> 00:38:41,035\nAnd that's where you can go and\nrecover it.\n\n813\n00:38:41,035 --> 00:38:41,975\nAll right?\n\n814\n00:38:41,975 --> 00:38:45,615\nSo when a failure like this happens, when\nan account is accidentally deleted and\n\n815\n00:38:45,615 --> 00:38:48,500\nit's been a few months and\nyou wanna go restore it.\n\n816\n00:38:48,500 --> 00:38:51,090\nDon't go way back for\nyour domain controllers.\n\n817\n00:38:51,090 --> 00:38:54,380\nAnd in fact, it's not even worth keeping\nbackups of your DCs beyond six months\n\n818\n00:38:54,380 --> 00:38:55,630\nbecause they're useless.\n\n819\n00:38:55,630 --> 00:38:57,200\nSo don't go that far back.\n\n820\n00:38:57,200 --> 00:39:01,570\nYou just need to go back far enough\nto where that missing object was\n\n821\n00:39:01,570 --> 00:39:04,580\nall ready deleted, but\nwithin that 180 day window.\n\n822\n00:39:04,580 --> 00:39:05,240\nSo that you can go and\n\n823\n00:39:05,240 --> 00:39:10,158\ngrab it and restore it, so it's not\na true six month old backup on a DC.\n\n824\n00:39:10,158 --> 00:39:12,700\n>> Right, and\nI know you've gone through the joy of\n\n825\n00:39:12,700 --> 00:39:16,720\ntrying to fix a domain controller that's\nbeen out of the loop for 180 days.\n\n826\n00:39:16,720 --> 00:39:18,910\nTrying to clean all that\nup is just a nightmare.\n\n827\n00:39:19,930 --> 00:39:23,686\n>> The absolute worst one that I dealt\nwith was a multi-national company.\n\n828\n00:39:23,686 --> 00:39:27,119\nAnd they had offices here in the US,\nand offices in Germany, and\n\n829\n00:39:27,119 --> 00:39:31,930\na couple other countries, and something\nhad happened to the offices in Germany.\n\n830\n00:39:31,930 --> 00:39:34,330\nWhere they had a VPN tunnel between\nthe locations and it went down.\n\n831\n00:39:35,670 --> 00:39:37,120\nAnd they didn't fix it right away.\n\n832\n00:39:37,120 --> 00:39:39,580\nAnd they kinda let it sit and\nafter a while,\n\n833\n00:39:39,580 --> 00:39:42,180\nthey called me to see if I can come and\nhelp get it back up.\n\n834\n00:39:42,180 --> 00:39:45,711\nAnd so I went out there and\nI brought the tunnel back up and so\n\n835\n00:39:45,711 --> 00:39:47,380\nI got them communicating.\n\n836\n00:39:47,380 --> 00:39:49,590\nThe thing was, the tunnel had\nbeen down for over six months.\n\n837\n00:39:49,590 --> 00:39:50,250\n>> Wow.\n\n838\n00:39:50,250 --> 00:39:53,550\n>> So for six months, they just\ndidn't worry about the VPN tunnel.\n\n839\n00:39:53,550 --> 00:39:55,501\nI guess they were using RDP for\nsome things or\n\n840\n00:39:55,501 --> 00:39:59,520\njust emailing each other documents,\nand they were just limping by.\n\n841\n00:39:59,520 --> 00:40:04,270\nSo because that tunnel was down for\nsix months, the domain\n\n842\n00:40:04,270 --> 00:40:08,770\ncontrollers in Germany were out of sync\nwith the domain controllers in the US.\n\n843\n00:40:08,770 --> 00:40:11,360\nAnd so they would not replicate,\n\n844\n00:40:11,360 --> 00:40:14,940\nthey would not communicate with each\nother because they were both out of sync.\n\n845\n00:40:14,940 --> 00:40:18,320\nAnd when that happens, you get a real\nproblem and what we had to do was look at\n\n846\n00:40:18,320 --> 00:40:21,530\nthe two locations and say, all right,\nwho has the most computers?\n\n847\n00:40:21,530 --> 00:40:26,312\nAnd there were more computers in Germany\nthan there were here for this company.\n\n848\n00:40:26,312 --> 00:40:30,510\nAnd so in Germany there were some,\n200 and, like,\n\n849\n00:40:30,510 --> 00:40:33,490\n210 computers, but\nhere in the US there were only 40.\n\n850\n00:40:33,490 --> 00:40:38,430\nAnd, so what we did is we basically\njust shut the DCs down here,\n\n851\n00:40:38,430 --> 00:40:42,130\nbrought up all new ones,\nthat synchronized against Germany, and\n\n852\n00:40:42,130 --> 00:40:45,470\nthen re-joined the computers here\nto the domain to kinda repair that.\n\n853\n00:40:45,470 --> 00:40:50,370\nThe problem is any change they made to the\nactive directory here in the US was lost.\n\n854\n00:40:50,370 --> 00:40:51,860\nBecause they were just out of sync.\n\n855\n00:40:51,860 --> 00:40:54,420\nThere was no way to bring\nthose two back in sync again.\n\n856\n00:40:54,420 --> 00:40:57,640\nSo we had to make a list of all\nthe new users that had been hired, all\n\n857\n00:40:57,640 --> 00:41:00,740\nthe employees that were added in the last\nsix months to be able to correct that.\n\n858\n00:41:00,740 --> 00:41:01,510\nIt was not fun.\n\n859\n00:41:02,980 --> 00:41:04,190\nDon't let that happen.\n\n860\n00:41:04,190 --> 00:41:06,100\nAnd they waited six months.\n\n861\n00:41:06,100 --> 00:41:08,050\nI mean, it actually was longer.\n\n862\n00:41:08,050 --> 00:41:10,640\nBut that's what leads\nto that kind of thing.\n\n863\n00:41:12,250 --> 00:41:13,250\nAll right, so,\n\n864\n00:41:13,250 --> 00:41:15,480\nthose are some of things we need to\nthink about with the active directory.\n\n865\n00:41:15,480 --> 00:41:17,700\nI think that's pretty much it for those.\n\n866\n00:41:17,700 --> 00:41:20,690\nThe system state backup though,\nthat's how we back up the AD.\n\n867\n00:41:20,690 --> 00:41:21,870\nIt is important.\n\n868\n00:41:21,870 --> 00:41:23,400\nAnd I always tell people,\n\n869\n00:41:23,400 --> 00:41:26,050\nmake sure you backup at least\ntwo of your domain controllers.\n\n870\n00:41:26,050 --> 00:41:28,980\nYou don't have to backup\nevery domain controller, but\n\n871\n00:41:28,980 --> 00:41:33,340\nmake sure you backup at least two domain\ncontrollers in each domain that you have.\n\n872\n00:41:33,340 --> 00:41:35,130\nIf you have one domain,\nthen that's it just pick two.\n\n873\n00:41:35,130 --> 00:41:38,750\nBut if you have ten domains you should\nbe backing up two DC's in each domain.\n\n874\n00:41:38,750 --> 00:41:43,380\nI always say two because of\nthings like that 180 day window.\n\n875\n00:41:43,380 --> 00:41:46,290\nIf you have a backup fail on one, you've\ngot the backup running on the other.\n\n876\n00:41:46,290 --> 00:41:49,040\nIt kind of gives you that redundancy and\nsafety.\n\n877\n00:41:49,040 --> 00:41:51,690\nAnd if your network ever\nbecomes segregated,\n\n878\n00:41:51,690 --> 00:41:56,550\nif your replication is failing, you've got\nthe two different views of that network.\n\n879\n00:41:56,550 --> 00:41:57,180\nRight?\n\n880\n00:41:57,180 --> 00:41:58,880\nOne that replicated and one that didn't.\n\n881\n00:41:58,880 --> 00:42:01,420\nAnd you can use that to kind\nof do things piecemeal.\n\n882\n00:42:01,420 --> 00:42:03,220\n>> Do we want to talk about\nauthoritative restore?\n\n883\n00:42:03,220 --> 00:42:04,623\n>> Oh yeah, we probably should huh?\n\n884\n00:42:04,623 --> 00:42:06,630\n[LAUGH] This was kind of a part of this.\n\n885\n00:42:08,072 --> 00:42:10,770\nAll right,\nactually this is next to the notes.\n\n886\n00:42:10,770 --> 00:42:13,230\nWe talked about recycle bin,\nwe talked about backfills, so yeah,\n\n887\n00:42:13,230 --> 00:42:14,080\nauthoritative restore.\n\n888\n00:42:15,270 --> 00:42:19,610\nIf you deleted a user account, and\nIt's not just there in the recycle bin, or\n\n889\n00:42:19,610 --> 00:42:21,530\nmaybe you didn't return\nthe recycle bin on,\n\n890\n00:42:21,530 --> 00:42:22,615\nbecause you've got to turn it on, right?\n\n891\n00:42:22,615 --> 00:42:25,250\n>> Yeah, you've got to turn it on,\nand you've got to be at your forest,\n\n892\n00:42:25,250 --> 00:42:28,540\nactually has to be 2008 R2\nfunctional level, at least.\n\n893\n00:42:28,540 --> 00:42:33,390\nSo every domain controller in the entire\nforest is at least 2008 R2 before you\n\n894\n00:42:33,390 --> 00:42:34,510\ncan enable that feature.\n\n895\n00:42:34,510 --> 00:42:38,480\nSo if you don't have that, you don't\nhave that, you haven't turned it on,\n\n896\n00:42:38,480 --> 00:42:40,890\nor you're not ale to get\nto that functional level,\n\n897\n00:42:40,890 --> 00:42:43,670\ncan't take advantage of\nthat nice recycle bin.\n\n898\n00:42:43,670 --> 00:42:46,120\nIf we have to restore\nan object from a back up,\n\n899\n00:42:46,120 --> 00:42:48,950\nwe don't want to have happen\nwhat we just talked about right?\n\n900\n00:42:48,950 --> 00:42:49,900\nI restore the object.\n\n901\n00:42:49,900 --> 00:42:52,110\nI take all the time to\nget the back up tape out.\n\n902\n00:42:52,110 --> 00:42:56,610\nI go and I restore that object, and within\na minute, the object is removed again\n\n903\n00:42:56,610 --> 00:42:59,550\nbecause these back filled from\nthese other domain controllers.\n\n904\n00:42:59,550 --> 00:43:01,900\nWhat we can do a special type of restore.\n\n905\n00:43:01,900 --> 00:43:04,350\nWe do what's called\nan authoritative restore\n\n906\n00:43:04,350 --> 00:43:08,720\nwhere we're going to go into\nusing Ntdsutil and we're going to\n\n907\n00:43:08,720 --> 00:43:13,770\nmark certain objects within that backup\nthat we're restoring as authoritative.\n\n908\n00:43:13,770 --> 00:43:15,730\nSo we kinda cheat the system.\n\n909\n00:43:15,730 --> 00:43:19,620\nWe're gonna go in and we're gonna, they\nlook at things like the FA sequence number\n\n910\n00:43:19,620 --> 00:43:22,170\non these objects, and\nthe one from the backup\n\n911\n00:43:22,170 --> 00:43:25,960\nis gonna be lower than the one that's\non those current to main controllers.\n\n912\n00:43:25,960 --> 00:43:27,400\nBecause every time a change is made,\n\n913\n00:43:27,400 --> 00:43:30,850\nthings like that, that sequence\nnumber is gonna get incremented.\n\n914\n00:43:30,850 --> 00:43:34,750\nSo what we can do,\nis when can go in using Ntdsutil and\n\n915\n00:43:34,750 --> 00:43:37,110\nwe can mark that object as authoritative.\n\n916\n00:43:37,110 --> 00:43:41,290\nAnd really, all we're doing is we're just\nincreasing that update sequence number\n\n917\n00:43:41,290 --> 00:43:44,825\nto where the one we're\nrestoring is now much higher\n\n918\n00:43:44,825 --> 00:43:46,915\nthan what all the current\ndomain controllers have.\n\n919\n00:43:46,915 --> 00:43:50,045\nSo when they go to replicate with this\ndomain controller that's been restored\n\n920\n00:43:50,045 --> 00:43:53,175\nfrom a backup,\nthey'll back fill most of the objects.\n\n921\n00:43:53,175 --> 00:43:56,645\nThey'll say now your stuff is old,\nand here's the current version.\n\n922\n00:43:56,645 --> 00:43:59,535\nBut for that one or two objects or\nwhatever you've marked as authoritative is\n\n923\n00:43:59,535 --> 00:44:02,380\ngoing to go, oh, wait,\nyour version is newer than ours.\n\n924\n00:44:02,380 --> 00:44:05,480\nAnd it'll replicate it back out to\nthe rest of those domain controllers, and\n\n925\n00:44:05,480 --> 00:44:07,360\nit'll just go and wipe it out again.\n\n926\n00:44:07,360 --> 00:44:10,250\n>> Mike, do you know the actual\nincrement that it uses?\n\n927\n00:44:10,250 --> 00:44:13,394\n>> I wanna say it's like 100,000 per day.\n\n928\n00:44:13,394 --> 00:44:15,470\n>> 100,000 per day.\n\n929\n00:44:15,470 --> 00:44:19,605\nIf you make a single change to an object,\nthe sequence number increments by one.\n\n930\n00:44:19,605 --> 00:44:20,220\n>> [LAUGH] Right?\n\n931\n00:44:20,220 --> 00:44:24,400\n>> When you do an authoritative restore\n>> For every day old your backup is,\n\n932\n00:44:24,400 --> 00:44:28,110\nif your backup is five days old,\nit will increment it 100,000 for each day,\n\n933\n00:44:28,110 --> 00:44:29,872\nso 500,000.\n\n934\n00:44:29,872 --> 00:44:36,005\n>> Just in case you made 498,000 changes\nto that object in the last five days.\n\n935\n00:44:36,005 --> 00:44:37,065\n>> You never know, right?\n\n936\n00:44:37,065 --> 00:44:41,615\nSo they went the better safe than sorry\nroute, and they absolutely did that.\n\n937\n00:44:41,615 --> 00:44:45,745\nIn a massive environment where you've got\nsome kind of dynamic user data that's\n\n938\n00:44:45,745 --> 00:44:46,915\nbeing stored in the active directory,\n\n939\n00:44:46,915 --> 00:44:49,258\nin theory you could have\na decent amount of changes.\n\n940\n00:44:49,258 --> 00:44:53,260\nProbably not 100,000 per day though, so\nthat's what the authoritative restore is,\n\n941\n00:44:53,260 --> 00:44:55,530\nit bumps it up a huge amount.\n\n942\n00:44:55,530 --> 00:44:57,900\nEveryone else is gonna say wow,\nnot only is yours newer,\n\n943\n00:44:57,900 --> 00:44:59,405\nit's like way super mega newer.\n\n944\n00:44:59,405 --> 00:45:01,230\n>> [LAUGH]\n>> I definitely want that.\n\n945\n00:45:01,230 --> 00:45:04,300\nAnd then you're gonna override\nthe other people, right?\n\n946\n00:45:04,300 --> 00:45:06,200\nIt does require you to be very specific,\nthough.\n\n947\n00:45:06,200 --> 00:45:11,090\nWhen you do an authoritative restore,\nyou're actually specifying the full DN,\n\n948\n00:45:11,090 --> 00:45:14,300\nthe distinguished name for that object,\nso you've gotta know the domain name,\n\n949\n00:45:14,300 --> 00:45:18,240\nthe organizational unit structure,\nand then the actual object name.\n\n950\n00:45:18,240 --> 00:45:21,620\nYou've got to know that name to be\nable to specify it to restore it.\n\n951\n00:45:21,620 --> 00:45:25,370\nIf you don't remember the name,\nit's kinda hard to restore it.\n\n952\n00:45:25,370 --> 00:45:29,420\nIf you don't remember the name, one of the\ntricks that I use is, whip up a virtual\n\n953\n00:45:29,420 --> 00:45:33,590\nmachine, and isolate it, and\nrestore the DC to that virtual machine so\n\n954\n00:45:33,590 --> 00:45:36,980\nit's isolated, and that'll give you time\nto look in the active directory on it,\n\n955\n00:45:36,980 --> 00:45:40,250\nand find the account, and\nyou can get the DN out of it.\n\n956\n00:45:40,250 --> 00:45:43,390\nAnd then you can go back into production\nand do your real restore, and\n\n957\n00:45:43,390 --> 00:45:45,600\nnow you've got the DN to do and\nflag that authoritative.\n\n958\n00:45:45,600 --> 00:45:46,950\n>> Clever, I like that one.\n\n959\n00:45:46,950 --> 00:45:47,970\n>> Yes, I've had to do that,\n\n960\n00:45:47,970 --> 00:45:51,380\nbecause sometimes you don't know\nhow people spell their names, or\n\n961\n00:45:51,380 --> 00:45:54,490\nwhat it was actually entered in the system\nas and you can find the object.\n\n962\n00:45:56,510 --> 00:45:59,120\nIf they were deleted out of the system,\n\n963\n00:45:59,120 --> 00:46:01,000\nit's probably not an account\nthat I remember so.\n\n964\n00:46:01,000 --> 00:46:02,480\n>> Right.\n[LAUGH]\n\n965\n00:46:02,480 --> 00:46:03,110\n>> All right, so\n\n966\n00:46:03,110 --> 00:46:05,870\nthose are some of the considerations\nwe need with the Active Directory.\n\n967\n00:46:05,870 --> 00:46:07,390\nI think that is basically it.\n\n968\n00:46:07,390 --> 00:46:11,070\nI think I got enough time to\ntalk about this next one.\n\n969\n00:46:11,070 --> 00:46:14,130\nThe next thing I want to talk\nabout are virtual machines.\n\n970\n00:46:14,130 --> 00:46:15,810\nAll right, are VMs.\n\n971\n00:46:15,810 --> 00:46:20,630\nYou can back up Hyper-V VMs\njust like anything else, right?\n\n972\n00:46:20,630 --> 00:46:25,540\nYou can use volume shadow copy\nsnapshots to be able to grab a copy of\n\n973\n00:46:25,540 --> 00:46:27,840\nthe VM file itself, the VHDs and so on.\n\n974\n00:46:28,900 --> 00:46:31,260\nBut, we typically don't want to,\nall right.\n\n975\n00:46:31,260 --> 00:46:34,310\nYou typically don't want to cuz\nif you grab one of those VHDs\n\n976\n00:46:34,310 --> 00:46:38,920\nwhile a write is occurring inside of it,\nthen you don't know that.\n\n977\n00:46:38,920 --> 00:46:43,460\nAnd that's because Volume Shadow Copy on\nthe Hyper-V host, it just sees a VHD,\n\n978\n00:46:43,460 --> 00:46:45,430\nit doesn't know what's\ngoing on inside of it.\n\n979\n00:46:45,430 --> 00:46:49,540\nAnd so Volume Shadow Copy takes\na snapshot of it as it is at that moment.\n\n980\n00:46:49,540 --> 00:46:51,444\nWhich might be mid-write, all right?\n\n981\n00:46:51,444 --> 00:46:52,040\n>> Mm-hm.\n>> But\n\n982\n00:46:52,040 --> 00:46:55,560\nif you do the backup from within\nthe virtual machine itself,\n\n983\n00:46:55,560 --> 00:46:56,420\nthat's a different story.\n\n984\n00:46:57,850 --> 00:47:01,310\nNow Volume Shadow Copy's\nrunning inside of the VM and\n\n985\n00:47:01,310 --> 00:47:03,200\nif it's halfway through a write.\n\n986\n00:47:03,200 --> 00:47:05,820\nIt takes the snapshot and\nexcludes that write, and so\n\n987\n00:47:05,820 --> 00:47:09,000\nit ensures a consistent\nstate of that backup.\n\n988\n00:47:09,000 --> 00:47:11,960\nSo when we backup virtual machines,\nwe normally want to do it from within\n\n989\n00:47:11,960 --> 00:47:14,010\nthe VMs,\nyou just treat them like physical servers.\n\n990\n00:47:14,010 --> 00:47:15,750\nYou know,\nyou back each one up individually.\n\n991\n00:47:16,960 --> 00:47:19,080\nBut you can do a backup\nfrom the Hyper-V host,\n\n992\n00:47:19,080 --> 00:47:22,950\nyou just run that little risk of having\nsome data corrupted on the drive, and\n\n993\n00:47:22,950 --> 00:47:25,600\nthat's usually enough of a risk\nthat we don't want to take it.\n\n994\n00:47:25,600 --> 00:47:26,240\nAll right.\n\n995\n00:47:26,240 --> 00:47:28,670\nSo backing up Hyper-V can\nbe pretty straightforward.\n\n996\n00:47:28,670 --> 00:47:32,830\nThere are a couple of different solutions\nthat Microsoft has for handling that.\n\n997\n00:47:32,830 --> 00:47:36,859\nIf you want a real time synchronized\nbackup of a virtual machine,\n\n998\n00:47:36,859 --> 00:47:41,710\nthere's actually a neat little feature\nwe can use called a Hyper-V replica.\n\n999\n00:47:41,710 --> 00:47:46,196\nYou can tell a Hyper-V server that,\nto take a virtual machine and\n\n1000\n00:47:46,196 --> 00:47:48,805\nstore a copy of it on another post, and\n\n1001\n00:47:48,805 --> 00:47:53,880\nanytime you make a change to this one\nReplicate the changes to the others.\n\n1002\n00:47:53,880 --> 00:47:57,432\nIt's perfect if you want\nto have a headquarters and\n\n1003\n00:47:57,432 --> 00:47:59,970\na disaster recovery location.\n\n1004\n00:47:59,970 --> 00:48:03,340\nYou can have a copy of your virtual\nmachine sitting at that disaster recovery\n\n1005\n00:48:03,340 --> 00:48:05,560\nlocation, ready to start\nat a moments notice.\n\n1006\n00:48:05,560 --> 00:48:07,080\nYou have a failure at your main location.\n\n1007\n00:48:07,080 --> 00:48:07,930\nYour headquarter's gone.\n\n1008\n00:48:07,930 --> 00:48:10,530\nYou can just go to the other side,\nand start up you VMs.\n\n1009\n00:48:10,530 --> 00:48:11,110\nRight.\n\n1010\n00:48:11,110 --> 00:48:12,760\nIt's like a multi-site cluster but\n\n1011\n00:48:12,760 --> 00:48:15,070\nwithout all the crazy\nhardware requirements, right.\n\n1012\n00:48:15,070 --> 00:48:16,980\nWe just have a virtual machine and\n\n1013\n00:48:16,980 --> 00:48:19,380\nwe tell it to replicate at the other side,\nall right.\n\n1014\n00:48:19,380 --> 00:48:21,630\nThe process is really straightforward.\n\n1015\n00:48:21,630 --> 00:48:24,270\nOn the Hyper-V server\nthat set the destination,\n\n1016\n00:48:24,270 --> 00:48:26,580\nyou tell it that it's\ngonna be a replica server.\n\n1017\n00:48:26,580 --> 00:48:29,630\nAnd that's gonna get it listening,\nready for connections.\n\n1018\n00:48:29,630 --> 00:48:33,860\nAnd then you go to wherever your\nsource VM is, and on the VM,\n\n1019\n00:48:33,860 --> 00:48:35,260\nyou just tell it it's gonna replicate.\n\n1020\n00:48:35,260 --> 00:48:35,770\nAll right?\n\n1021\n00:48:35,770 --> 00:48:37,040\nI can show you the options real quick.\n\n1022\n00:48:37,040 --> 00:48:42,050\nLet me bring up a Hyper-V server and\nI will show you.\n\n1023\n00:48:43,700 --> 00:48:45,239\nPretty sure this is a Hyper-V host.\n\n1024\n00:48:46,440 --> 00:48:49,420\nSome of my systems aren't Hyper V hosts,\nso\n\n1025\n00:48:49,420 --> 00:48:52,290\nI'll just put one up here real quick here,\nHyper V manager.\n\n1026\n00:48:52,290 --> 00:48:54,960\nAll right, so, the first thing I\nwanna do is in the Hyper V manager,\n\n1027\n00:48:54,960 --> 00:48:58,960\nI'm gonna tell it that this system\nis going to be a replica server.\n\n1028\n00:48:58,960 --> 00:49:03,000\nSo, I go in my Hyper V manager and\nI just right-click on the server and\n\n1029\n00:49:03,000 --> 00:49:04,199\nI go to my Hyper V settings.\n\n1030\n00:49:05,450 --> 00:49:08,230\nAnd inside of the Hyper-V settings\nyou'll see all the various stuff.\n\n1031\n00:49:08,230 --> 00:49:11,130\nAnd right here is\nreplication configuration.\n\n1032\n00:49:11,130 --> 00:49:15,290\nAnd here we've got enable this computer\nas a replica server, all right?\n\n1033\n00:49:15,290 --> 00:49:19,360\nYou can turn that on and then you'll\nsee the ports that it listens on,\n\n1034\n00:49:19,360 --> 00:49:21,670\nthe certificate it uses for\nauthentication.\n\n1035\n00:49:21,670 --> 00:49:24,870\nYou don't want just anybody connecting\nto this, that would be bad, right?\n\n1036\n00:49:24,870 --> 00:49:28,790\nAnd then the storage where you're\nactually gonna be putting the replica, so\n\n1037\n00:49:28,790 --> 00:49:30,090\nthe information about that.\n\n1038\n00:49:31,210 --> 00:49:33,810\nSo, we can set all of that right here.\n\n1039\n00:49:33,810 --> 00:49:36,020\nAnd this is all grayed\nout cuz I'm in a cluster.\n\n1040\n00:49:36,020 --> 00:49:38,080\nI'll explain that in a second.\n\n1041\n00:49:38,080 --> 00:49:39,260\nBut, you can set all that right here.\n\n1042\n00:49:39,260 --> 00:49:42,120\nNow, we're ready to receive\na copy of a virtual machine.\n\n1043\n00:49:43,120 --> 00:49:45,160\nAnd after that,\nyou just go and find the VM.\n\n1044\n00:49:45,160 --> 00:49:49,340\nAnd when you right-click on it,\nyou'll see Enable Replication.\n\n1045\n00:49:49,340 --> 00:49:51,050\nAnd you can turn on replication.\n\n1046\n00:49:51,050 --> 00:49:55,176\nAnd it's just a simple wizard where\nyou specify who the replica server is,\n\n1047\n00:49:55,176 --> 00:49:59,763\nyou specify the certificate that you're\ngonna be using to authenticate with, and\n\n1048\n00:49:59,763 --> 00:50:03,060\nyou specify the VHDs that\nyou're gonna replicate across.\n\n1049\n00:50:03,060 --> 00:50:05,150\nYou also define the frequency.\n\n1050\n00:50:05,150 --> 00:50:07,959\nYou can do it in real time, but that\nmight be overkill for your environment.\n\n1051\n00:50:07,959 --> 00:50:10,692\nSo, you could shrink it\ndown between latency and\n\n1052\n00:50:10,692 --> 00:50:12,500\nreduce the load on the network.\n\n1053\n00:50:12,500 --> 00:50:15,500\nAnd so you set that replication up and\nthen it runs.\n\n1054\n00:50:15,500 --> 00:50:18,380\nIt's gonna be replicating out\nto that other side, all right?\n\n1055\n00:50:18,380 --> 00:50:21,600\nNow it's not gonna work for\nme here because I'm in a cluster.\n\n1056\n00:50:21,600 --> 00:50:27,060\nWhen you're in a cluster, this virtual\nmachine might be on this server right now,\n\n1057\n00:50:27,060 --> 00:50:28,420\nbut it might jump to another server later.\n\n1058\n00:50:29,480 --> 00:50:32,060\nSo, I can't set up the replication here.\n\n1059\n00:50:32,060 --> 00:50:35,125\nInstead, you do it in your\nFailover Cluster Manager.\n\n1060\n00:50:35,125 --> 00:50:38,791\nIn your Failover Cluster Manager,\nwhich I am not running.\n\n1061\n00:50:38,791 --> 00:50:40,291\nLet me just bring that up.\n\n1062\n00:50:40,291 --> 00:50:42,630\nI'll bring up my Failover Cluster Manager.\n\n1063\n00:50:42,630 --> 00:50:44,260\nIn here,\nthere's two things we want to deal with.\n\n1064\n00:50:44,260 --> 00:50:45,940\nFirst off, there's the virtual machines.\n\n1065\n00:50:45,940 --> 00:50:48,860\nAnd so you can go into the virtual\nmachines that are in here because\n\n1066\n00:50:48,860 --> 00:50:49,810\nthere'll be cluster roles.\n\n1067\n00:50:49,810 --> 00:50:51,330\nSo, you'll find your virtual\nmachines in here and\n\n1068\n00:50:51,330 --> 00:50:54,260\nyou can turn on replication for the VMs.\n\n1069\n00:50:55,700 --> 00:50:58,300\nBut the other thing is,\nthe replica server,\n\n1070\n00:50:59,510 --> 00:51:02,870\nif it's being deployed on a cluster,\nit needs to be a clustered role.\n\n1071\n00:51:02,870 --> 00:51:04,140\nAnd there's a role for that.\n\n1072\n00:51:04,140 --> 00:51:05,400\nIf I look at my roles here and\n\n1073\n00:51:05,400 --> 00:51:08,870\ngo to configure role, I'll find it\nhere in my role list somewhere.\n\n1074\n00:51:10,160 --> 00:51:11,508\nLet's see, right there.\n\n1075\n00:51:11,508 --> 00:51:14,210\nHyper-V replica broker.\n\n1076\n00:51:14,210 --> 00:51:18,240\nThat will let me create a replica\nserver on top of a cluster.\n\n1077\n00:51:18,240 --> 00:51:20,770\nSo, if one node fails,\nthe other node takes over, and\n\n1078\n00:51:20,770 --> 00:51:22,570\nmy replicas continue going.\n\n1079\n00:51:22,570 --> 00:51:24,310\nSo, that's why those\noptions were greyed out for\n\n1080\n00:51:24,310 --> 00:51:27,190\nme a moment ago because I'm on a cluster,\nso I have to do it this way.\n\n1081\n00:51:27,190 --> 00:51:29,470\nIt's a neat system that's\nbuilt right into Hyper-V.\n\n1082\n00:51:29,470 --> 00:51:32,360\nIf you've got a cluster,\nit's got functionality for that.\n\n1083\n00:51:32,360 --> 00:51:34,260\nA great way to replicate your VMs.\n\n1084\n00:51:34,260 --> 00:51:36,310\nSo, you take your mission critical ones.\n\n1085\n00:51:36,310 --> 00:51:40,390\nYour mission critical VMs, and you set\nthem to replicate to your other site.\n\n1086\n00:51:40,390 --> 00:51:44,260\nAnd that way, when you have a failure,\nyou're not saying, oh, how do I go and\n\n1087\n00:51:44,260 --> 00:51:47,070\nrestore my critical VMs from backup?\n\n1088\n00:51:47,070 --> 00:51:48,333\nYou don't have to.\nYou just go and start the VMs.\n\n1089\n00:51:48,333 --> 00:51:50,480\nThey're already there,\nthey're already there ready to go.\n\n1090\n00:51:50,480 --> 00:51:51,430\nJust turn them on.\n\n1091\n00:51:51,430 --> 00:51:52,080\nAll right.\n\n1092\n00:51:52,080 --> 00:51:55,490\nAnd, now you just, ok, well, you know\nwhat, I can kick my feet up on the desk.\n\n1093\n00:51:55,490 --> 00:51:56,660\nI can relax.\n\n1094\n00:51:56,660 --> 00:51:58,730\nNow, I need to start restoring\nmy non-critical servers.\n\n1095\n00:51:58,730 --> 00:51:59,870\nI can go to my backup tapes.\n\n1096\n00:51:59,870 --> 00:52:02,270\nAnd yeah, it might six hours,\nit might take five days.\n\n1097\n00:52:02,270 --> 00:52:05,500\nBut, it's okay cuz your critical stuff\nis already up and running, all right?\n\n1098\n00:52:05,500 --> 00:52:08,083\nThat is super cool.\n\n1099\n00:52:08,083 --> 00:52:09,875\nWhat's even cooler.\n\n1100\n00:52:09,875 --> 00:52:12,100\nThis is assuming I have\na disaster recovery center.\n\n1101\n00:52:12,100 --> 00:52:16,150\nI've got another facility somewhere\nelse that I'm paying for to use, right?\n\n1102\n00:52:16,150 --> 00:52:17,970\nI could just use Windows Azure.\n\n1103\n00:52:19,290 --> 00:52:21,010\nWindows Azure has a service.\n\n1104\n00:52:21,010 --> 00:52:22,300\nThey call it the Azure Site Backup.\n\n1105\n00:52:22,300 --> 00:52:26,050\nAnd with Azure Site Backup,\nyou do the same thing.\n\n1106\n00:52:26,050 --> 00:52:30,040\nYou're replicating your virtual machines,\nbut instead of replicating them to another\n\n1107\n00:52:30,040 --> 00:52:33,520\ndata center,\nyou're replicating them to Azure.\n\n1108\n00:52:33,520 --> 00:52:35,900\nSo it's like a virtual data center that\nyou don't have to pay the rent on.\n\n1109\n00:52:35,900 --> 00:52:38,430\nYou pay for the servers you use.\n\n1110\n00:52:38,430 --> 00:52:40,170\nNow, while you're replicating,\nyou're just paying storage.\n\n1111\n00:52:40,170 --> 00:52:40,980\nSo, they're not actually running.\n\n1112\n00:52:40,980 --> 00:52:43,900\nAnd then when you have a failure,\nyou can flip Azure on,\n\n1113\n00:52:43,900 --> 00:52:48,770\nand your new data center is up, and now\nyou're paying storage and CPU, RAM costs,\n\n1114\n00:52:48,770 --> 00:52:51,810\nyour hourly rates, that you pay for that.\n\n1115\n00:52:51,810 --> 00:52:55,565\nBut that's nice, because most people\nnever have to use their disaster\n\n1116\n00:52:55,565 --> 00:52:58,833\nrecovery center, but they pay for\nit cuz they got it, right?\n\n1117\n00:52:58,833 --> 00:53:00,530\nBut with Azure,\nyou're just paying for the storage.\n\n1118\n00:53:00,530 --> 00:53:04,300\nSo, it makes it really affordable to have,\nand when you need it, it's there.\n\n1119\n00:53:04,300 --> 00:53:05,600\nAnd it does some other cool stuff.\n\n1120\n00:53:05,600 --> 00:53:06,480\nI think I've got their product page.\n\n1121\n00:53:06,480 --> 00:53:08,405\nI sound like an advertisement, I know.\n\n1122\n00:53:08,405 --> 00:53:11,670\nBut, this is the Azure site recovery page.\n\n1123\n00:53:11,670 --> 00:53:14,040\nThey do some other neat stuff,\nI like this one.\n\n1124\n00:53:14,040 --> 00:53:17,000\nNo impact recovery plan testing.\n\n1125\n00:53:17,000 --> 00:53:22,450\nYou can actually bring a workstation up in\nAzure, and tell it to do a test recovery.\n\n1126\n00:53:22,450 --> 00:53:25,430\nIt'll flip all your servers on, and\nyou can use that workstation and\n\n1127\n00:53:25,430 --> 00:53:27,590\ntest all your access,\nmake sure everything's working.\n\n1128\n00:53:27,590 --> 00:53:29,870\nAnd if something's not working,\nyou can go and fix it.\n\n1129\n00:53:29,870 --> 00:53:33,920\nBetter to fix it on your schedule than\nto have a failure flip over to Azure and\n\n1130\n00:53:33,920 --> 00:53:35,580\nstuff isn't working, right?\n\n1131\n00:53:35,580 --> 00:53:37,780\nSo, you can test a lot of that stuff.\n\n1132\n00:53:37,780 --> 00:53:41,800\nYou can replicate to Azure, you can\nrecover, and it's all done right there.\n\n1133\n00:53:41,800 --> 00:53:43,780\nSo, that's called Azure Site Recovery.\n\n1134\n00:53:43,780 --> 00:53:47,990\nIt's basically a entire\ndisaster recovery center\n\n1135\n00:53:47,990 --> 00:53:50,670\nthat cost far less than you\nsetting up your own physical one.\n\n1136\n00:53:51,790 --> 00:53:55,590\nSo, those are some things to think\nabout when it comes to virtualization,\n\n1137\n00:53:55,590 --> 00:53:58,410\nbacking systems up to other areas,\nand so on.\n\n1138\n00:53:58,410 --> 00:54:01,780\nI think that's all I've got for\nthat one, as far as site redundancy.\n\n1139\n00:54:02,920 --> 00:54:04,800\nWe do have some other stuff to talk about,\nthough.\n\n1140\n00:54:04,800 --> 00:54:06,430\nAnd we're kind of out of\ntime on this segment.\n\n1141\n00:54:06,430 --> 00:54:08,560\nSo, let's stop and take a break.\n\n1142\n00:54:08,560 --> 00:54:12,900\nAnd when we get back we're gonna dive into\nthe system center data protection manager,\n\n1143\n00:54:12,900 --> 00:54:14,150\nwhich I don't think we've seen yet.\n\n1144\n00:54:14,150 --> 00:54:16,380\nSo, that'll be a little new for us.\n\n1145\n00:54:16,380 --> 00:54:18,250\nStay tuned, we'll be back after this.\n\n1146\n00:54:18,250 --> 00:54:25,708\n[MUSIC]\n\n1147\n00:54:25,708 --> 00:54:27,541\nAll right, welcome back everybody.\n\n1148\n00:54:27,541 --> 00:54:29,453\nIn our final segment of this episode,\n\n1149\n00:54:29,453 --> 00:54:33,183\nwe're going to take a look at the system\ncenter data protection manager.\n\n1150\n00:54:33,183 --> 00:54:33,881\n>> Woo-hoo.\n\n1151\n00:54:33,881 --> 00:54:35,979\n>> SCDPM.\nIt's quite a mouthful.\n\n1152\n00:54:35,979 --> 00:54:38,580\n>> [LAUGH]\n>> So, a lot of people are critical of\n\n1153\n00:54:38,580 --> 00:54:41,780\nMicrosoft, about how the Windows\nServer Backup Utility has been getting\n\n1154\n00:54:41,780 --> 00:54:45,810\nincreasingly more crippled\nwith each version of windows.\n\n1155\n00:54:45,810 --> 00:54:48,540\nAs opposed to improving it\nlike they do other things.\n\n1156\n00:54:48,540 --> 00:54:52,580\nAnd the reason is Microsoft knows\nthat most enterprises don't use it.\n\n1157\n00:54:52,580 --> 00:54:54,310\nThey use third-party backup utilities.\n\n1158\n00:54:54,310 --> 00:54:57,844\nThings like Symantec, Backup Exec, and\nCommVault, ARCserve, Tivoli backup,\n\n1159\n00:54:57,844 --> 00:54:58,350\nwhatever.\n\n1160\n00:54:59,760 --> 00:55:01,080\nThat's really common.\n\n1161\n00:55:01,080 --> 00:55:03,550\nEvery place I've worked we've always\nused third party backup solutions.\n\n1162\n00:55:04,640 --> 00:55:07,210\nSo, what Microsoft did is they said\nwe want to give people the choice.\n\n1163\n00:55:07,210 --> 00:55:10,970\nThey can use the third party\nbackups if they want, or\n\n1164\n00:55:10,970 --> 00:55:13,345\nthey can purchase the system\ncenter data protection manager.\n\n1165\n00:55:14,695 --> 00:55:17,325\nIt's a centralized backup solution.\n\n1166\n00:55:17,325 --> 00:55:20,305\nThe Windows server backup runs\non each individual server.\n\n1167\n00:55:20,305 --> 00:55:22,895\nSo, if you wanna use it and\nyou have 1,000 servers, you've\n\n1168\n00:55:22,895 --> 00:55:26,615\ngot 1,000 different systems you've got to\nmaintain, it's not very reasonable, right?\n\n1169\n00:55:26,615 --> 00:55:29,675\nSo, small and medium businesses can take\nadvantage of that Windows server backup\n\n1170\n00:55:29,675 --> 00:55:31,305\nand not pay an extra dime.\n\n1171\n00:55:31,305 --> 00:55:35,670\nBut a larger enterprise organization\nis going to need a centralized backup.\n\n1172\n00:55:35,670 --> 00:55:37,740\nAnd the SCDPM will do it.\n\n1173\n00:55:37,740 --> 00:55:41,370\nNow, there's a couple of real\nbig advantages that the SCDPM\n\n1174\n00:55:41,370 --> 00:55:42,690\nhas over the other vendors.\n\n1175\n00:55:42,690 --> 00:55:45,585\nThe biggest advantage being that\nit's developed by Microsoft.\n\n1176\n00:55:45,585 --> 00:55:49,255\nSo, they know how their products work and\nthey know how to interact with them.\n\n1177\n00:55:49,255 --> 00:55:54,215\nSo, if you're an all Microsoft\nshop SCDPM is awesome.\n\n1178\n00:55:54,215 --> 00:55:58,540\nIf you're a mixed shop with some Linux\nservers, different things like that,\n\n1179\n00:55:58,540 --> 00:56:01,020\nSCDPM's not so great anymore.\n\n1180\n00:56:01,020 --> 00:56:03,950\nAnd that's where you end up still\nhaving those third party solutions.\n\n1181\n00:56:03,950 --> 00:56:06,140\nBut on the Microsoft side,\nit is really good.\n\n1182\n00:56:06,140 --> 00:56:08,810\nThe SCDPM server is\npretty simple to set up.\n\n1183\n00:56:08,810 --> 00:56:11,540\nIt has an agent that\nit deploys out to each\n\n1184\n00:56:11,540 --> 00:56:13,160\nof the systems that you're\ngonna be backing up,\n\n1185\n00:56:13,160 --> 00:56:16,200\nand you really back up servers with it,\nbut you can back up work stations.\n\n1186\n00:56:16,200 --> 00:56:18,700\nIt does have that support, but\nit's really intended for servers.\n\n1187\n00:56:19,850 --> 00:56:20,845\nSo you've got an agent you deploy.\n\n1188\n00:56:20,845 --> 00:56:23,495\nYou've got the SCDPM that\nruns on a server, and\n\n1189\n00:56:23,495 --> 00:56:26,595\nthere's a SQL database it uses\nto store all of its information.\n\n1190\n00:56:26,595 --> 00:56:29,985\nNow you can use SQL Express on\nthe server itself if you want, but\n\n1191\n00:56:29,985 --> 00:56:33,285\nthe bigger your environment is, the more\nlikely you'll use an actual SQL server.\n\n1192\n00:56:35,037 --> 00:56:36,297\nAfter that, it backs up your data.\n\n1193\n00:56:36,297 --> 00:56:38,247\nAnd where does it back it up to?\n\n1194\n00:56:38,247 --> 00:56:39,607\nWell, it can back up to tape.\n\n1195\n00:56:39,607 --> 00:56:41,027\nIt does support that.\n\n1196\n00:56:41,027 --> 00:56:43,487\nI know a lot of people say,\nwell, why still use tape?\n\n1197\n00:56:43,487 --> 00:56:44,237\nTape, for\n\n1198\n00:56:44,237 --> 00:56:49,387\nthe amount of storage you get, is more\naffordable than magnetic hard drives.\n\n1199\n00:56:49,387 --> 00:56:52,710\nSo we prefer to back up to hard\ndrives if we can cuz it's faster.\n\n1200\n00:56:52,710 --> 00:56:56,830\nBut tapes are less expensive, and\nyou can take them out of the office.\n\n1201\n00:56:56,830 --> 00:57:00,630\nYou can send them off site for off site\nstorage, and that helps with redundancies.\n\n1202\n00:57:00,630 --> 00:57:02,790\nIt's harder to do that with a hard drive.\n\n1203\n00:57:02,790 --> 00:57:04,370\nThrow it in the trunk of your car, and\n\n1204\n00:57:04,370 --> 00:57:06,660\nyou'll have a head crash\nby the time you get home.\n\n1205\n00:57:06,660 --> 00:57:08,520\nYou don't wanna leave\nthem in your car anyway.\n\n1206\n00:57:08,520 --> 00:57:11,290\n>> I was gonna say, wait,\nthat's my off site, is my trunk.\n\n1207\n00:57:12,420 --> 00:57:17,390\n>> The other neat thing that the SCDPM\ndoes, is when you back up to it,\n\n1208\n00:57:17,390 --> 00:57:21,310\nthe SCDPM actually supports\nbacking up other SCDPM servers.\n\n1209\n00:57:21,310 --> 00:57:25,440\nAnd I know that sounds silly, but what you\ncan do is you can have an SCDPM in your\n\n1210\n00:57:25,440 --> 00:57:27,850\nheadquarters that's backing\nup all your critical servers.\n\n1211\n00:57:27,850 --> 00:57:32,010\nAnd then you can have another\nSCDPM in your disaster recovery\n\n1212\n00:57:32,010 --> 00:57:34,480\nthat's backing up your headquarters SCDPM.\n\n1213\n00:57:34,480 --> 00:57:38,130\nSo instead of having to reach out to all\nthe machines again, it just reaches out to\n\n1214\n00:57:38,130 --> 00:57:42,270\nthat one server, and basically\nreplicates the backup to the other site.\n\n1215\n00:57:42,270 --> 00:57:45,350\nSo now you've got a copy of all\nyour backups at the other site.\n\n1216\n00:57:46,470 --> 00:57:49,800\nNow, SCDPM backs up in\na really ingenious way.\n\n1217\n00:57:49,800 --> 00:57:51,730\nWhat it does is it leverages\nvolume shadow copy.\n\n1218\n00:57:51,730 --> 00:57:56,410\nThis agent's running on your system, and\nit takes a full backup of your data.\n\n1219\n00:57:57,440 --> 00:58:03,950\nAnd then what it does is every 15 minutes,\nit takes a volume shadow copy snapshot,\n\n1220\n00:58:03,950 --> 00:58:08,420\npulls the changes out, and\ntransmits them up to the SCDPM.\n\n1221\n00:58:08,420 --> 00:58:12,610\nSo by default,\nthe SCDPM gives you a 15 minute RPO.\n\n1222\n00:58:12,610 --> 00:58:14,160\nIt's backing your servers\nup every 15 minutes.\n\n1223\n00:58:15,630 --> 00:58:20,630\nAnd because after the first backup it's\nonly getting changes, it's pretty fast.\n\n1224\n00:58:20,630 --> 00:58:23,730\nAnd that replication that happens to\nyour other site, that's pretty fast too.\n\n1225\n00:58:23,730 --> 00:58:25,280\nAnd that's really pretty sweet.\n\n1226\n00:58:25,280 --> 00:58:26,320\n>> Yeah.\n\n1227\n00:58:26,320 --> 00:58:28,307\n>> Well if you're backing up to tape,\nit's not very fast at all.\n\n1228\n00:58:28,307 --> 00:58:30,780\n[LAUGH] So normally we're gonna\nbe backing up the hard drive.\n\n1229\n00:58:30,780 --> 00:58:33,950\nSo you'll have a drive array\nattached to the SCDPM.\n\n1230\n00:58:33,950 --> 00:58:37,620\nYou can install it in a virtual machine\nand have the virtual machine clustered,\n\n1231\n00:58:37,620 --> 00:58:40,840\nand then provide it access, or you can\nhave it on a stand alone box if you want.\n\n1232\n00:58:40,840 --> 00:58:42,810\nBut you'll need enough storage available.\n\n1233\n00:58:42,810 --> 00:58:44,520\nAnd when it grabs that storage,\n\n1234\n00:58:44,520 --> 00:58:46,310\nthis is not storage you can\nshare with anything else.\n\n1235\n00:58:46,310 --> 00:58:50,040\nIt partitions it out in a proprietary\nmanner to be able to have redundant\n\n1236\n00:58:50,040 --> 00:58:54,390\ncopies of that data stored, and to be able\nto handle the volume shadow calculation.\n\n1237\n00:58:54,390 --> 00:58:57,170\nSo it does some really interesting\nthings with the storage.\n\n1238\n00:58:57,170 --> 00:58:59,750\nYou'll want dedicated drives for\nit, all right?\n\n1239\n00:58:59,750 --> 00:59:02,705\nIf you're using a SAN, you'll just\ndo a dedicated LUN just for SCDPM.\n\n1240\n00:59:04,180 --> 00:59:06,960\nNow the other thing that it can do,\n\n1241\n00:59:06,960 --> 00:59:10,540\nsince we can replicate to another\nSCDPM server somewhere else,\n\n1242\n00:59:10,540 --> 00:59:14,110\ndoesn't it make sense that we can put\nthe other SCDPM server in the cloud?\n\n1243\n00:59:14,110 --> 00:59:15,930\nIt does.\nAnd so Microsoft actually,\n\n1244\n00:59:15,930 --> 00:59:19,670\nas part of Windows Azure or\nMicrosoft Azure, they will host that for\n\n1245\n00:59:19,670 --> 00:59:24,490\nyou, so you can take a backup of your\nSCDPM server up to Windows Azure.\n\n1246\n00:59:24,490 --> 00:59:26,760\nAnd it'll be sitting up there waiting for\nyou.\n\n1247\n00:59:26,760 --> 00:59:28,950\nIf you ever have a failure,\nit's just kinda sitting up there.\n\n1248\n00:59:28,950 --> 00:59:29,990\nIf you choose to do that, right?\n\n1249\n00:59:29,990 --> 00:59:33,100\nSome people, for regulatory reasons,\nare not allowed to use Windows Azure for\n\n1250\n00:59:33,100 --> 00:59:34,070\nthat stuff.\n\n1251\n00:59:34,070 --> 00:59:37,960\nIn which case, you'll do your own\nbackup server somewhere else.\n\n1252\n00:59:37,960 --> 00:59:39,000\nSo it's a neat product.\n\n1253\n00:59:39,000 --> 00:59:41,360\nI wanna give you guys just\na quick little tour of it.\n\n1254\n00:59:41,360 --> 00:59:42,840\nHow it works, what it does.\n\n1255\n00:59:42,840 --> 00:59:44,660\nAnd just kind of show it to you.\n\n1256\n00:59:44,660 --> 00:59:48,870\nBut the key thing to remember is\nit leverages volume shadow copy.\n\n1257\n00:59:48,870 --> 00:59:53,550\nIt backs up every 15 minutes, grabbing\njust the changes, really short RPO.\n\n1258\n00:59:53,550 --> 00:59:55,660\nAnd it uses an agent.\n\n1259\n00:59:55,660 --> 00:59:58,610\nAn agent that we have to install\non every machine we wanna backup.\n\n1260\n00:59:58,610 --> 01:00:01,750\nAnd the agent has some really\nspecial utilities in it.\n\n1261\n01:00:01,750 --> 01:00:09,735\nThings that are designed to optimize\nit for backing up Microsoft SharePoint,\n\n1262\n01:00:09,735 --> 01:00:15,010\nSQL, Exchange, Active Directory,\nand just the Windows server itself.\n\n1263\n01:00:15,010 --> 01:00:17,258\nSo the agent is aware of\nthose technologies and\n\n1264\n01:00:17,258 --> 01:00:19,370\nunderstands how to back them up.\n\n1265\n01:00:19,370 --> 01:00:21,350\nFor example,\nwhen you back up a SQL database,\n\n1266\n01:00:21,350 --> 01:00:24,200\nwhen you're done you need to\nflush the transaction logs.\n\n1267\n01:00:24,200 --> 01:00:27,100\nIf you don't do that, they grow and they\nfill up the hard drive and that's bad.\n\n1268\n01:00:27,100 --> 01:00:29,980\nThe SCDPM agent knows to do that, right.\n\n1269\n01:00:29,980 --> 01:00:32,100\nSo it's really pretty slick stuff.\n\n1270\n01:00:32,100 --> 01:00:33,670\nAnd to implement it in your environment,\n\n1271\n01:00:33,670 --> 01:00:38,940\nyou just bring up an SCDPM server, you\npush out the agent to your machines, and\n\n1272\n01:00:38,940 --> 01:00:42,530\nyou add the machines to what's\ncalled a data protection group.\n\n1273\n01:00:42,530 --> 01:00:46,030\nA data protection group is how you\ndefine how often it backs up and so on.\n\n1274\n01:00:46,030 --> 01:00:48,130\nLet me show you that process.\n\n1275\n01:00:48,130 --> 01:00:51,170\nAll right, so I have pulled up\nright here an SCDPM server.\n\n1276\n01:00:51,170 --> 01:00:53,500\nThis is it,\nthis is the Administrator Console.\n\n1277\n01:00:53,500 --> 01:00:55,870\nAnd when you come into it,\nyou're on the Monitoring tab, so\n\n1278\n01:00:55,870 --> 01:00:59,120\nyou're seeing any kind of alerts or\nother information that you might have.\n\n1279\n01:00:59,120 --> 01:01:01,650\nMine's kind of empty, all right.\n\n1280\n01:01:01,650 --> 01:01:04,080\nAnd then down here we'll start to\nsee some of the various settings,\n\n1281\n01:01:04,080 --> 01:01:08,650\nlike Protection, and here's where it's\ngonna show the host that I'm protecting,\n\n1282\n01:01:08,650 --> 01:01:10,380\nand I'm not protecting\nany hosts right now.\n\n1283\n01:01:10,380 --> 01:01:12,870\nSo I don't have anybody,\nit's showing my protection group.\n\n1284\n01:01:12,870 --> 01:01:16,220\nBut even if I go to Computer,\nI don't have any computers, all right.\n\n1285\n01:01:17,320 --> 01:01:19,750\nIf we go to Recovery, well,\nthat's where you'd go to restore things.\n\n1286\n01:01:19,750 --> 01:01:22,030\nIt can do bare metal restores.\n\n1287\n01:01:22,030 --> 01:01:25,460\nIt can actually bring your server back\nfrom the dead, just complete bare metal.\n\n1288\n01:01:25,460 --> 01:01:28,624\nWith SCDPM, you don't go and pick and\nchoose which files you wanna back up,\n\n1289\n01:01:28,624 --> 01:01:30,840\nyou give it the whole server.\n\n1290\n01:01:30,840 --> 01:01:35,200\nYou can restore individual files if you\nwant, but it's got the full shebang, so\n\n1291\n01:01:35,200 --> 01:01:37,760\nif you wanna do a total server restore,\nyou can.\n\n1292\n01:01:37,760 --> 01:01:39,330\nOr you can restore individual files.\n\n1293\n01:01:40,430 --> 01:01:42,790\nIt's got Reporting where you\ncan check your backup history,\n\n1294\n01:01:42,790 --> 01:01:45,440\nany events that have occurred,\nor logs, and other things.\n\n1295\n01:01:45,440 --> 01:01:46,830\nMy reporting isn't initialized yet.\n\n1296\n01:01:46,830 --> 01:01:49,000\nAnd then lastly, we've got Management.\n\n1297\n01:01:49,000 --> 01:01:51,620\nHere's where we go and configure things.\n\n1298\n01:01:51,620 --> 01:01:54,730\nI've got four systems out there\nthat I've deployed the agent on.\n\n1299\n01:01:54,730 --> 01:01:56,870\nSo I just push the agent up to them.\n\n1300\n01:01:56,870 --> 01:01:59,340\nAnd so here they are, DC01 and so on.\n\n1301\n01:01:59,340 --> 01:02:00,620\nThey're right there.\n\n1302\n01:02:00,620 --> 01:02:02,730\nYou push the agents with this\nnice little install button and\n\n1303\n01:02:02,730 --> 01:02:03,590\nit walks you through a wizard.\n\n1304\n01:02:03,590 --> 01:02:07,490\nAnd you just specify who you wanna get it,\nand it remotely pushes it out.\n\n1305\n01:02:07,490 --> 01:02:11,470\nSo these guys are running the agent,\nbut they're not protected.\n\n1306\n01:02:11,470 --> 01:02:12,840\nThese are not protected nodes.\n\n1307\n01:02:12,840 --> 01:02:16,020\nSo over here if I look under agents,\nI've got four unprotected.\n\n1308\n01:02:16,020 --> 01:02:20,040\nWhen you add them in, SCDPM is aware of\nthem, but it's not actually backing it up.\n\n1309\n01:02:20,040 --> 01:02:22,950\nWe have to create our data\nprotection groups to do that.\n\n1310\n01:02:24,370 --> 01:02:26,450\nAnd it also shows me my disk.\n\n1311\n01:02:26,450 --> 01:02:29,070\nI've got a just a 100 gig disk\nattached to it right now.\n\n1312\n01:02:29,070 --> 01:02:30,960\nYou'll likely want much more than that.\n\n1313\n01:02:30,960 --> 01:02:32,270\nBut it's showing how much we're using.\n\n1314\n01:02:32,270 --> 01:02:33,160\nI'm not using any.\n\n1315\n01:02:34,660 --> 01:02:36,600\nIt also shows this right here.\n\n1316\n01:02:36,600 --> 01:02:38,860\nThis is the Azure synchronization.\n\n1317\n01:02:40,030 --> 01:02:43,240\nIf you've signed up for Windows Azure or\nMicrosoft Azure and you're\n\n1318\n01:02:43,240 --> 01:02:48,080\nreplicating your SCDPM up there, you come\nin here and you register that account.\n\n1319\n01:02:48,080 --> 01:02:49,330\nSo you tie it to your account so\n\n1320\n01:02:49,330 --> 01:02:51,730\nit knows where to reach, and\nit'll show you right here.\n\n1321\n01:02:51,730 --> 01:02:53,470\nHow's your Azure backup running?\n\n1322\n01:02:53,470 --> 01:02:55,314\nWhen you sign up for it on their website,\n\n1323\n01:02:55,314 --> 01:02:58,085\nthey'll give you a special Azure\nagent that you download and\n\n1324\n01:02:58,085 --> 01:03:01,467\nyou install right on your SCDPM server,\nand that's what connects this.\n\n1325\n01:03:01,467 --> 01:03:04,479\nSo there's no set up now button here\ncuz you don't set it up from here,\n\n1326\n01:03:04,479 --> 01:03:06,760\nyou set it up from your Azure account.\n\n1327\n01:03:06,760 --> 01:03:10,250\nLog in on the website, you sign up for\nit, there's a price you pay for\n\n1328\n01:03:10,250 --> 01:03:10,960\nstorage and bandwidth.\n\n1329\n01:03:10,960 --> 01:03:13,390\nYou sign up for that, and\nthen you download the agent and\n\n1330\n01:03:13,390 --> 01:03:14,959\nyou install it here and\nit's all automatically sent.\n\n1331\n01:03:16,460 --> 01:03:17,620\nDown here we have our Libraries.\n\n1332\n01:03:17,620 --> 01:03:20,170\nIf you're backing up to tapes,\nthat's where it's tracking that.\n\n1333\n01:03:20,170 --> 01:03:21,680\nOur libraries, our tape drives,\n\n1334\n01:03:21,680 --> 01:03:25,680\nour free tapes,\neach of those are indicated right there.\n\n1335\n01:03:25,680 --> 01:03:29,260\nSo, this is kind of the system in review.\n\n1336\n01:03:29,260 --> 01:03:34,610\nWhat we've got in here, what's available\nto us, and what we need to do.\n\n1337\n01:03:34,610 --> 01:03:37,050\nSo to get started,\nwe wanna back up some of these guys.\n\n1338\n01:03:37,050 --> 01:03:40,720\nAnd looking at them right here,\nwell, if they show up, right.\n\n1339\n01:03:40,720 --> 01:03:43,560\nI could disable Protection, but none of\nthese guys are actually protected anyway.\n\n1340\n01:03:43,560 --> 01:03:46,680\nI could uninstall, but\nlooking at the nodes themselves,\n\n1341\n01:03:46,680 --> 01:03:49,090\nthere's not too much to do from here.\n\n1342\n01:03:49,090 --> 01:03:52,670\nAnd what I need to do is I need to go\nin and create my protection group.\n\n1343\n01:03:52,670 --> 01:03:56,671\nAnd if I go back here under Protection,\nI'll see my protection groups, and\n\n1344\n01:03:56,671 --> 01:03:58,918\nI don't have any, but\nI can come in here and\n\n1345\n01:03:58,918 --> 01:04:01,500\nCreate protection groups\nto get those in place.\n\n1346\n01:04:01,500 --> 01:04:04,310\nNow, the new protection button.\n\n1347\n01:04:04,310 --> 01:04:05,740\nI always have a hard\ntime finding this one,\n\n1348\n01:04:05,740 --> 01:04:09,500\ncuz you expect it to say create\na protection group, and it doesn't.\n\n1349\n01:04:09,500 --> 01:04:10,730\nBut it just is a new button up here.\n\n1350\n01:04:10,730 --> 01:04:12,110\nSo I'll hit this.\n\n1351\n01:04:12,110 --> 01:04:14,490\nAnd I'll create a protection group.\n\n1352\n01:04:14,490 --> 01:04:17,860\nNow, what you want to do\nis create protection groups\n\n1353\n01:04:17,860 --> 01:04:20,940\nthat are based on the types\nof backups you wanna do.\n\n1354\n01:04:20,940 --> 01:04:23,140\nDifferent servers,\nI wanna back up differently.\n\n1355\n01:04:23,140 --> 01:04:26,720\nSo I might have one protection group for\nmy domain controllers and\n\n1356\n01:04:26,720 --> 01:04:30,260\na different one for my SQL Servers and\na different one for my file servers.\n\n1357\n01:04:30,260 --> 01:04:33,040\nAnd I might have different intervals set\nup for them, different settings, right?\n\n1358\n01:04:33,040 --> 01:04:33,800\nYou can customize that.\n\n1359\n01:04:33,800 --> 01:04:36,370\nYou create as many protection\ngroups as you need to\n\n1360\n01:04:36,370 --> 01:04:37,720\nmatch the needs of your servers.\n\n1361\n01:04:39,252 --> 01:04:41,460\nAll right, it's going to ask\nme what I'm backing up with,\n\n1362\n01:04:41,460 --> 01:04:42,880\nbecause the servers are clients.\n\n1363\n01:04:42,880 --> 01:04:44,380\nClients are special, right?\n\n1364\n01:04:44,380 --> 01:04:48,220\nWith clients, it doesn't assume that\nthey're always going to be on, right?\n\n1365\n01:04:48,220 --> 01:04:50,700\nIt knows that a client might\nbe turned off or be gone.\n\n1366\n01:04:50,700 --> 01:04:52,330\nSo it's not gonna alert us on that.\n\n1367\n01:04:52,330 --> 01:04:54,610\nBut a server, if a server is turned off,\nit's gonna alert us.\n\n1368\n01:04:54,610 --> 01:04:57,520\nHey I can't back it up, the server's\noffline, you got a problem, right?\n\n1369\n01:04:57,520 --> 01:04:58,910\nSo I'm gonna tell the servers.\n\n1370\n01:05:00,050 --> 01:05:01,330\nThen, who's gonna be in the group?\n\n1371\n01:05:01,330 --> 01:05:02,590\nWell, I wanna do my domain controller.\n\n1372\n01:05:02,590 --> 01:05:05,580\nSo I would just go down the list and\nI would find my domain controllers.\n\n1373\n01:05:05,580 --> 01:05:08,100\nYou can do entire clusters if you want.\n\n1374\n01:05:08,100 --> 01:05:10,680\nIf you do a cluster then,\nanytime you add a node to that cluster,\n\n1375\n01:05:10,680 --> 01:05:12,470\nit'll become a part of the backup.\n\n1376\n01:05:12,470 --> 01:05:14,740\nOr, you could do the individual\nvirtual machines.\n\n1377\n01:05:14,740 --> 01:05:18,180\nSome of these are actually VM's\non top of this cluster, right.\n\n1378\n01:05:18,180 --> 01:05:20,210\nIf I expand it, it'll inventory it.\n\n1379\n01:05:20,210 --> 01:05:22,720\nAnd I'll see some of\nthese virtual machines.\n\n1380\n01:05:22,720 --> 01:05:24,620\nAnd if I look at my cluster group,\n\n1381\n01:05:25,820 --> 01:05:27,680\nI should see the nodes\nthat are inside of it.\n\n1382\n01:05:27,680 --> 01:05:31,350\nAnd, I'm pretty sure SCCMO1 is\nactually inside of that cluster.\n\n1383\n01:05:31,350 --> 01:05:33,330\nSo you'll see them individually\nas well as in cluster.\n\n1384\n01:05:34,420 --> 01:05:36,280\nBut I want my domain controllers.\n\n1385\n01:05:36,280 --> 01:05:36,890\nThat's what I want.\nSo\n\n1386\n01:05:36,890 --> 01:05:39,950\nI'm going to chose this guy and\nthat's DCO1.\n\n1387\n01:05:39,950 --> 01:05:43,870\nAnd I'm just going to go ahead and\nadd them in to my group.\n\n1388\n01:05:43,870 --> 01:05:44,910\nWell whenever, it lets me.\n\n1389\n01:05:44,910 --> 01:05:47,100\nNow, you don't just add the whole server.\n\n1390\n01:05:47,100 --> 01:05:48,160\nYou do get to pick.\n\n1391\n01:05:48,160 --> 01:05:51,320\nAnd I can pick whether I want to\ndo just the shared folders on it.\n\n1392\n01:05:51,320 --> 01:05:54,840\nOr whether I want to do the volumes or\nsystem protection.\n\n1393\n01:05:54,840 --> 01:05:56,070\nAnd this is what we normally want.\n\n1394\n01:05:56,070 --> 01:05:59,110\nIf we choose system protection,\nit's going to get the whole server.\n\n1395\n01:05:59,110 --> 01:06:00,940\nAnd I can restore individual\nfiles if I want, but\n\n1396\n01:06:00,940 --> 01:06:02,030\nthis is going to get the whole server.\n\n1397\n01:06:02,030 --> 01:06:03,860\nThat's what we normally want.\n\n1398\n01:06:03,860 --> 01:06:06,660\nBut you'll see where you actually\ncan go and specify the volume, and\n\n1399\n01:06:06,660 --> 01:06:08,010\nit will actually let you drill down.\n\n1400\n01:06:08,010 --> 01:06:10,260\nBut that's not really how\nthis is intended to be used.\n\n1401\n01:06:10,260 --> 01:06:12,220\nWe want to get the whole server.\n\n1402\n01:06:12,220 --> 01:06:15,360\nA lot of people don't like to do the whole\nserver, because it makes the back up big.\n\n1403\n01:06:15,360 --> 01:06:17,940\nBut it only backs up once and\nthen it's just changes.\n\n1404\n01:06:17,940 --> 01:06:21,590\nRight, so,\nyeah your first backup might be 70 gigs.\n\n1405\n01:06:21,590 --> 01:06:25,540\nBut after that the changes will be much\nsmaller and it's a drop in the bucket and\n\n1406\n01:06:25,540 --> 01:06:26,651\nit makes recovery a lot easier.\n\n1407\n01:06:26,651 --> 01:06:30,150\nAll right, so\nI'm going to do a system protection.\n\n1408\n01:06:30,150 --> 01:06:35,250\nAnd that's going to get the system\nstate and a bare metal recovery.\n\n1409\n01:06:35,250 --> 01:06:37,960\nSo this is basically, the equivalent\nof choosing all these above, too.\n\n1410\n01:06:37,960 --> 01:06:39,870\nThere's no point in checking all of them.\n\n1411\n01:06:39,870 --> 01:06:40,929\nI'll just use system protection.\n\n1412\n01:06:44,230 --> 01:06:45,010\nThen I can give it a name.\n\n1413\n01:06:45,010 --> 01:06:46,940\nI'm going to call this domain controllers.\n\n1414\n01:06:46,940 --> 01:06:49,940\nAnd as I add new domain controllers\nto my network, I'll just come and\n\n1415\n01:06:49,940 --> 01:06:51,960\nadd them to this data protection group.\n\n1416\n01:06:51,960 --> 01:06:53,430\nAnd here's where I tell them\nwhere I want to back up.\n\n1417\n01:06:53,430 --> 01:06:54,910\nDo I want to back up to disk?\n\n1418\n01:06:54,910 --> 01:06:56,370\nSure.\nOr do I want to back up to tape?\n\n1419\n01:06:56,370 --> 01:06:58,610\nI don't have a tape drive,\nso that's grayed out.\n\n1420\n01:06:58,610 --> 01:07:00,780\nIf I'm backing up to disk and\nI'm connected to Azarak,\n\n1421\n01:07:00,780 --> 01:07:03,000\nwhich used to synchronize up to Azure too.\n\n1422\n01:07:03,000 --> 01:07:06,080\nIf it's a critical server,\nI probably want to synch it to Azure.\n\n1423\n01:07:06,080 --> 01:07:08,950\nIf it's not a critical server, I might\njust choose to keep it right here and\n\n1424\n01:07:08,950 --> 01:07:10,660\nnot pay the extra Azure cost.\n\n1425\n01:07:11,860 --> 01:07:15,620\nSo I'll stick with it's going to disk.\n\n1426\n01:07:15,620 --> 01:07:18,380\nThen, my short term goal, right?\n\n1427\n01:07:18,380 --> 01:07:19,900\nWhen I do a recovery,\n\n1428\n01:07:19,900 --> 01:07:23,460\nwhat are the odds of me needing to go back\nfurther than a certain period of time?\n\n1429\n01:07:23,460 --> 01:07:25,170\nSo how far back do I\nwant to set a retention?\n\n1430\n01:07:26,190 --> 01:07:30,060\nAs long as there's room,\nSCDPM action won't remove backup.\n\n1431\n01:07:30,060 --> 01:07:32,370\nSo it could be far greater than this.\n\n1432\n01:07:32,370 --> 01:07:35,430\nWe're saying, at a minimum,\nwe wanna retain five days.\n\n1433\n01:07:35,430 --> 01:07:36,190\nThat's kind of, the default.\n\n1434\n01:07:36,190 --> 01:07:36,790\nYou can bump it up.\n\n1435\n01:07:36,790 --> 01:07:39,790\nIf you wanna retain 30 days or\nwhatever, you just specify it in there.\n\n1436\n01:07:39,790 --> 01:07:43,490\nAnd then, you specify when you\nwant the backup to happen.\n\n1437\n01:07:43,490 --> 01:07:45,470\nThe first backup that will happen.\n\n1438\n01:07:45,470 --> 01:07:48,160\nIt's gonna jump in and you basically,\nset when you want it to happen.\n\n1439\n01:07:48,160 --> 01:07:50,360\nHere, it's set to 8 p.m every day.\n\n1440\n01:07:50,360 --> 01:07:54,850\nSo after the first backup at 8 PM,\nit's going to run an express fallback.\n\n1441\n01:07:54,850 --> 01:07:55,870\nWhat's that mean?\n\n1442\n01:07:55,870 --> 01:07:56,950\nIt's not a true fullback.\n\n1443\n01:07:56,950 --> 01:08:00,420\nIf it doesn't get the whole hard drive,\nit just gets what changed, right?\n\n1444\n01:08:00,420 --> 01:08:02,740\nIt does data de-duplication.\n\n1445\n01:08:02,740 --> 01:08:04,450\nSo for files unchanged,\nit doesn't back it up again.\n\n1446\n01:08:04,450 --> 01:08:05,540\nIt just leaves it the same and\n\n1447\n01:08:05,540 --> 01:08:08,890\nit removes the archive bit\nif that was sent on a file.\n\n1448\n01:08:08,890 --> 01:08:12,960\nSo, it's a full back-up, but it's much\nfaster than a normal full back-up.\n\n1449\n01:08:12,960 --> 01:08:15,770\nBut you can go and modify that time\nslot and move it to different areas.\n\n1450\n01:08:15,770 --> 01:08:18,940\nYou can add in more than one time\nslot if you want it to be running\n\n1451\n01:08:18,940 --> 01:08:19,960\nmultiple times a day.\n\n1452\n01:08:19,960 --> 01:08:21,920\nRemember, this is the full back-up.\n\n1453\n01:08:21,920 --> 01:08:24,490\nIt's doing those little back-ups\nevery 15 minutes on the server.\n\n1454\n01:08:24,490 --> 01:08:25,980\nSo we'll be protected there.\n\n1455\n01:08:27,900 --> 01:08:30,010\nThen we've got our disk allocation right?\n\n1456\n01:08:30,010 --> 01:08:31,400\nSo how much of that disk\nis laid out right now?\n\n1457\n01:08:31,400 --> 01:08:34,470\nHow much disk space its\ngonna need in the BPM.\n\n1458\n01:08:34,470 --> 01:08:39,220\nAnd we can choose to co locate,\nif we have more DPM storage pools,\n\n1459\n01:08:39,220 --> 01:08:41,060\nI can store it in more then one pool.\n\n1460\n01:08:41,060 --> 01:08:43,260\nSo we can specify how we want to do that.\n\n1461\n01:08:43,260 --> 01:08:49,230\nThese kind of work like expanding hard\ndrives or dynamic disks in hyper v.\n\n1462\n01:08:49,230 --> 01:08:52,720\nSo this size, it's not actually\ngonna use 30 gigs right now.\n\n1463\n01:08:52,720 --> 01:08:55,610\nIt's going to grow to fill\nthat to make the information.\n\n1464\n01:08:55,610 --> 01:08:57,780\nSo you've got this total data size here,\nit's only 20 gigs.\n\n1465\n01:08:57,780 --> 01:09:00,450\nSo that's all the space\nit's actually going to use.\n\n1466\n01:09:00,450 --> 01:09:01,900\nBut as it starts logging changes,\n\n1467\n01:09:01,900 --> 01:09:05,550\nit's assuming that five days worth of\nchanges will be less than 13 gigs.\n\n1468\n01:09:05,550 --> 01:09:07,490\nSo that's what it's setting aside now.\n\n1469\n01:09:07,490 --> 01:09:08,600\nBut, it can grow, if necessary.\n\n1470\n01:09:08,600 --> 01:09:12,910\nOr, you can bump it up, too.\n\n1471\n01:09:12,910 --> 01:09:16,080\nThen, if I want to\nreplicate the DPM server.\n\n1472\n01:09:16,080 --> 01:09:18,440\nIf I want to store a replica\non another DPM server,\n\n1473\n01:09:18,440 --> 01:09:20,010\nI can set when I want to do that.\n\n1474\n01:09:20,010 --> 01:09:21,670\nI can have it go automatically\nover the network, or\n\n1475\n01:09:21,670 --> 01:09:24,320\nI can set it to manually replicate.\n\n1476\n01:09:24,320 --> 01:09:25,950\nI don't have another server,\nso I'll just say manual.\n\n1477\n01:09:28,290 --> 01:09:29,250\nAnd then a consistency check.\n\n1478\n01:09:29,250 --> 01:09:33,170\nA lot of people don't do this,\nand I understand why.\n\n1479\n01:09:33,170 --> 01:09:36,160\nWhen you do a backup,\nlet's say your backup takes an hour.\n\n1480\n01:09:36,160 --> 01:09:36,870\nIf you then go and\n\n1481\n01:09:36,870 --> 01:09:40,430\nverify the backup to make sure that\nit's intact, It takes another hour.\n\n1482\n01:09:40,430 --> 01:09:42,580\nIt's gotta check to make\nsure the data is the same.\n\n1483\n01:09:42,580 --> 01:09:45,090\nSo a lot of people won't do that,\nto save time.\n\n1484\n01:09:45,090 --> 01:09:48,260\nWell, SCDPM does that a more efficient\nway, it backs up the data and\n\n1485\n01:09:48,260 --> 01:09:50,200\nit checks its consistency.\n\n1486\n01:09:50,200 --> 01:09:51,780\nAnd it just checks it on the backend.\n\n1487\n01:09:51,780 --> 01:09:54,330\nIt just looks through the files to\nmake sure the files aren't corrupt.\n\n1488\n01:09:54,330 --> 01:09:55,320\nAnd it does that check on it's own.\n\n1489\n01:09:55,320 --> 01:09:56,410\nSo there's no reason not to do that.\n\n1490\n01:09:56,410 --> 01:09:58,270\nYou definitely want to do it.\n\n1491\n01:09:58,270 --> 01:10:00,620\nAnd you can even set it to do it daily.\n\n1492\n01:10:00,620 --> 01:10:04,380\nIf you're backing up to SSDs, everybody\nworries about hitting too many writes and\n\n1493\n01:10:04,380 --> 01:10:05,670\nthe drive degrades.\n\n1494\n01:10:05,670 --> 01:10:07,300\nSo how do you know that happens?\n\n1495\n01:10:07,300 --> 01:10:09,710\nWell, if you run a daily\nconsistency check,\n\n1496\n01:10:09,710 --> 01:10:12,280\nWhen that drive actually starts\nto degrade, it'll find it.\n\n1497\n01:10:12,280 --> 01:10:13,190\nAnd it'll let you know.\n\n1498\n01:10:13,190 --> 01:10:15,120\nAnd it'll say, hey,\nthis backup is not safe.\n\n1499\n01:10:15,120 --> 01:10:17,300\nThere's a problem with this backup,\nyou need to redo it.\n\n1500\n01:10:17,300 --> 01:10:18,440\nAnd if there's a problem with it,\n\n1501\n01:10:18,440 --> 01:10:20,920\nit's probably because your\ndisks are dying, right?\n\n1502\n01:10:20,920 --> 01:10:22,660\nSo we need to address it,\nso I'm gonna turn that off.\n\n1503\n01:10:24,270 --> 01:10:26,210\nAnd then, we finish it up.\n\n1504\n01:10:26,210 --> 01:10:28,270\nAnd now that server.\n\n1505\n01:10:28,270 --> 01:10:32,350\nNow that DC01, that domain controller,\nis in a protection group.\n\n1506\n01:10:32,350 --> 01:10:33,610\nNow it's protected.\n\n1507\n01:10:33,610 --> 01:10:35,920\nEvery day at 8:00 PM,\nit's gonna do a full back up.\n\n1508\n01:10:35,920 --> 01:10:36,780\nEvery 15 minutes for\n\n1509\n01:10:36,780 --> 01:10:39,930\nthe rest of the day, it's gonna do\na snapshot back up of the changes.\n\n1510\n01:10:39,930 --> 01:10:42,820\nSo, it is backing up\nall throughout the day.\n\n1511\n01:10:42,820 --> 01:10:44,400\nAll right, and that server's covered.\n\n1512\n01:10:44,400 --> 01:10:47,260\nI can restore that server\nat a moment's notice.\n\n1513\n01:10:47,260 --> 01:10:48,140\nSo, if something happens,\n\n1514\n01:10:48,140 --> 01:10:51,040\nsomething gets damaged on that server,\nI'll be able to tackle it.\n\n1515\n01:10:51,040 --> 01:10:52,280\nI go back up to monitoring.\n\n1516\n01:10:52,280 --> 01:10:54,130\nOr not monitoring,\nif I go down to management.\n\n1517\n01:10:54,130 --> 01:10:54,970\nThere we go.\n\n1518\n01:10:54,970 --> 01:10:58,440\nI can see I now have one protected agent,\nand three still unprotected.\n\n1519\n01:10:58,440 --> 01:11:00,930\nI need to go and create more\nprotection groups for the other guys.\n\n1520\n01:11:00,930 --> 01:11:01,780\nBut now, it's going to back up.\n\n1521\n01:11:01,780 --> 01:11:04,800\nI see my disk usage is already\nflagged as being used.\n\n1522\n01:11:04,800 --> 01:11:05,660\nBut it is ready to rock.\n\n1523\n01:11:05,660 --> 01:11:07,820\nDCO1 is just sitting right here.\n\n1524\n01:11:07,820 --> 01:11:10,640\nI can go in and disable that,\nif I want or throttle it,\n\n1525\n01:11:10,640 --> 01:11:13,440\nto make the backups go a little\nslower to free up bandwidth.\n\n1526\n01:11:13,440 --> 01:11:15,380\nYou know, do whatever we need there.\n\n1527\n01:11:15,380 --> 01:11:17,980\nAnd we're ready to rock, right?\n\n1528\n01:11:17,980 --> 01:11:18,930\nI've got my protection group.\n\n1529\n01:11:18,930 --> 01:11:21,270\nI can check on its status\nat any given time.\n\n1530\n01:11:21,270 --> 01:11:22,430\nSee how those numbers are doing?\n\n1531\n01:11:22,430 --> 01:11:24,900\nI'm in computer view here but\nlet me to go to protection group.\n\n1532\n01:11:24,900 --> 01:11:27,440\nSo here's that group domain controller and\nthe one server that's in it.\n\n1533\n01:11:27,440 --> 01:11:30,265\nI could've added more,\nand, that's basically it.\n\n1534\n01:11:32,155 --> 01:11:34,565\nThere are some advanced\nfeatures in the STVPM,\n\n1535\n01:11:34,565 --> 01:11:36,785\nlike you can set up self service recovery.\n\n1536\n01:11:36,785 --> 01:11:39,065\nWhere your end users,\nif they're responsible for that machine,\n\n1537\n01:11:39,065 --> 01:11:40,615\nthey can actually go and restore stuff.\n\n1538\n01:11:40,615 --> 01:11:43,935\nWe only really use that with clients, but,\nit could be used with servers too if you\n\n1539\n01:11:43,935 --> 01:11:45,705\nwanted your help desk to be\nable to restore stuff, but\n\n1540\n01:11:45,705 --> 01:11:48,405\nyou didn't want to make them like,\na backup operator, right?\n\n1541\n01:11:48,405 --> 01:11:50,615\nSo they would be able to\nleverage the STVPM to do it.\n\n1542\n01:11:50,615 --> 01:11:52,250\nSo there's some real power in there.\n\n1543\n01:11:52,250 --> 01:11:55,800\nBut otherwise, that's basically it.\n\n1544\n01:11:55,800 --> 01:11:57,550\nIt's a pretty simple product to use.\n\n1545\n01:11:57,550 --> 01:12:00,130\nBut, it is really advanced.\n\n1546\n01:12:00,130 --> 01:12:03,350\nIt's not terribly expensive,\nit's licensed on a per server basis.\n\n1547\n01:12:03,350 --> 01:12:05,670\nIf you have a Volume License Agreement,\nyou might actually get it for free.\n\n1548\n01:12:05,670 --> 01:12:08,843\nThere are some levels that include that,\nso you might already even have it.\n\n1549\n01:12:08,843 --> 01:12:10,580\nBut, it is a good product.\n\n1550\n01:12:10,580 --> 01:12:13,810\nIf you have a third-party product and\nyou're happy with it,\n\n1551\n01:12:13,810 --> 01:12:16,890\nyou can stay with it, there's no\nreason to force you over to this one.\n\n1552\n01:12:16,890 --> 01:12:19,781\nBut, if you're in the market for\nchoosing a new one,\n\n1553\n01:12:19,781 --> 01:12:22,230\nit's definitely one\nworth taking a look at.\n\n1554\n01:12:22,230 --> 01:12:25,450\nI will say on a personal level, some of\nthe early versions of the SCDPM that came\n\n1555\n01:12:25,450 --> 01:12:27,780\nout were absolutely terrible,\nI hated them.\n\n1556\n01:12:27,780 --> 01:12:29,960\nBut, the newer versions that\nare part of System Center\n\n1557\n01:12:29,960 --> 01:12:30,880\n2012 are actually really good.\n\n1558\n01:12:30,880 --> 01:12:32,343\nIt is a good product.\n\n1559\n01:12:32,343 --> 01:12:33,010\nIt is one that's worth using.\n\n1560\n01:12:35,220 --> 01:12:37,250\nAll right.\nI don't think I left anything out.\n\n1561\n01:12:37,250 --> 01:12:38,910\nI think I got all of that one.\n\n1562\n01:12:38,910 --> 01:12:41,235\nSo, that should pretty much be it for\nthe SCDPM.\n\n1563\n01:12:42,330 --> 01:12:45,170\nAs you design your disaster\nrecovery plans, and\n\n1564\n01:12:45,170 --> 01:12:47,950\nas you design your business\ncontinuity plans, your BCP, and DRP,\n\n1565\n01:12:47,950 --> 01:12:51,160\nthese are the things we need\nto take a look at, right?\n\n1566\n01:12:51,160 --> 01:12:53,950\nUnderstand your RPO and your RTO.\n\n1567\n01:12:53,950 --> 01:12:58,200\nHow long you can be down, and\nhow long you have to get back up again.\n\n1568\n01:12:58,200 --> 01:13:00,150\nAnd, you design your solution around that.\n\n1569\n01:13:00,150 --> 01:13:04,080\nWe could go super hardcore with full\nreplica sites ready to flip over in\n\n1570\n01:13:04,080 --> 01:13:06,600\na moments notice, but\nit's gonna cost some money.\n\n1571\n01:13:06,600 --> 01:13:08,380\nAnd, it might not be worth it.\n\n1572\n01:13:08,380 --> 01:13:11,340\nIn your environment, you might not\nneed that kind of availability.\n\n1573\n01:13:11,340 --> 01:13:14,310\nDon't waste money on\nsomething you don't need.\n\n1574\n01:13:14,310 --> 01:13:16,370\nBut, it's a lot of different options.\n\n1575\n01:13:16,370 --> 01:13:18,050\nYou need to be familiar\nwith them on the exams, so\n\n1576\n01:13:18,050 --> 01:13:19,058\nyou can answer that appropriately.\n\n1577\n01:13:19,058 --> 01:13:22,450\nIf they describe a scenario\nwhere they're asking a way,\n\n1578\n01:13:22,450 --> 01:13:24,280\nif you have a virtual machine.\n\n1579\n01:13:24,280 --> 01:13:27,710\nAnd, you need a copy stored\nin a remote location\n\n1580\n01:13:27,710 --> 01:13:30,450\nthat's ready to go live\nat a moment's notice.\n\n1581\n01:13:30,450 --> 01:13:32,920\nSCDPM is not the solution for that.\n\n1582\n01:13:32,920 --> 01:13:36,100\nIt'll back up your VM, but\nit's not ready to go in a moment's notice.\n\n1583\n01:13:36,100 --> 01:13:38,390\nBut, a Hyper-V Replica is.\n\n1584\n01:13:38,390 --> 01:13:40,880\nSo, knowing which solution\nfits the scenario,\n\n1585\n01:13:40,880 --> 01:13:43,310\nthat's gonna be the key to\npassing this part of the exam.\n\n1586\n01:13:45,170 --> 01:13:48,680\nAll right, well,\nI think we're done, right?\n\n1587\n01:13:48,680 --> 01:13:50,650\n>> I think so.\n>> That's it for High Availability.\n\n1588\n01:13:50,650 --> 01:13:51,520\nThat was a long objective.\n\n1589\n01:13:51,520 --> 01:13:52,400\n>> That was.\n\n1590\n01:13:52,400 --> 01:13:54,150\n>> So, that was the end of it there.\n\n1591\n01:13:54,150 --> 01:13:55,090\nWe're gonna wrap it up here.\n\n1592\n01:13:55,090 --> 01:13:58,210\nLet me remind you guys,\nif you have questions on any of this,\n\n1593\n01:13:58,210 --> 01:13:59,310\nfeel free to ask.\n\n1594\n01:13:59,310 --> 01:14:02,990\nYou can always go to itpro.tv/live,\nand while we're live,\n\n1595\n01:14:02,990 --> 01:14:04,390\nyou'll see the chat box beneath the video.\n\n1596\n01:14:04,390 --> 01:14:05,770\nWhere you can post your questions.\n\n1597\n01:14:05,770 --> 01:14:08,120\nWe monitor and answer during the show.\n\n1598\n01:14:08,120 --> 01:14:12,642\nIf the show is not live, if we're in\nreruns or whatever, use our Q&A forms.\n\n1599\n01:14:12,642 --> 01:14:14,460\nAt the top of every page\nthere's a link that says Q&A,\n\n1600\n01:14:14,460 --> 01:14:16,930\nyou can jump in there,\npost your questions.\n\n1601\n01:14:16,930 --> 01:14:18,350\nWe monitor and answer.\n\n1602\n01:14:18,350 --> 01:14:21,310\nWe want you to have the information\nyou need to be successful.\n\n1603\n01:14:22,440 --> 01:14:24,300\nAll right, well,\nI hope you guys enjoyed the show.\n\n1604\n01:14:24,300 --> 01:14:26,340\nSigning off for IT Pro TV I'm Don Pezet.\n\n1605\n01:14:26,340 --> 01:14:27,630\n>> And I'm Mike Rodrick.\n\n1606\n01:14:27,630 --> 01:14:29,301\n>> And, we will see you next time.\n\n1607\n01:14:29,301 --> 01:14:39,089\n[MUSIC]\n\n",
          "vimeoId": "110604958"
        }
      ],
      "title": "Plan and implement a highly available enterprise infrastructure"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "247",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-0-overview-102814.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-0-overview-102814-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-0-overview-102814-sm.jpg",
          "title": "Virtualization Infrastructure",
          "transcript": "1\n00:00:00,000 --> 00:00:08,263\n[MUSIC]\n\n2\n00:00:08,263 --> 00:00:11,900\nThe next objective on\nthe 70-414 exam is plan and\n\n3\n00:00:11,900 --> 00:00:16,090\nimplement a server\nvirtualization infrastructure.\n\n4\n00:00:16,090 --> 00:00:19,310\nThis is where we're gonna take a look\nat all of the different virtualization\n\n5\n00:00:19,310 --> 00:00:22,480\npieces, all the different hardware and\nsoftware that we involve and come up with\n\n6\n00:00:22,480 --> 00:00:26,600\na plan or a design for implementing\nthat in our production environment.\n\n7\n00:00:26,600 --> 00:00:29,870\nThere's a lot of pieces, so we break\nit up into individual components so\n\n8\n00:00:29,870 --> 00:00:31,870\nwe can build our full plan.\n\n9\n00:00:31,870 --> 00:00:35,710\nWe start with planning and\nimplementing virtualization hosts.\n\n10\n00:00:35,710 --> 00:00:38,100\nThis is where we take a look\nat the Hyper-V servers.\n\n11\n00:00:38,100 --> 00:00:39,610\nIt doesn't have to be Hyper-V, though, so\n\n12\n00:00:39,610 --> 00:00:42,440\nwe might talk a little bit about VM Ware\nand some of the other solutions that we\n\n13\n00:00:42,440 --> 00:00:47,030\ncan run and how we wanna have those\nimplemented any other special components\n\n14\n00:00:47,030 --> 00:00:51,140\nwe want to add support to for people\nbringing up virtual machines and so on.\n\n15\n00:00:51,140 --> 00:00:54,990\n>> Then we'll move into planning and\nimplementing virtual machines themselves.\n\n16\n00:00:54,990 --> 00:00:58,200\nWe'll take a look at setting up\nrules on what servers we want to\n\n17\n00:00:58,200 --> 00:01:00,160\nplace those VMs on.\n\n18\n00:01:00,160 --> 00:01:04,740\nCreating some templates to make it very\neasy to deploy those virtual machines out\n\n19\n00:01:04,740 --> 00:01:07,320\nand then setting up high availability for\nthose virtual machines.\n\n20\n00:01:07,320 --> 00:01:10,380\nYou know, we've taken a look\nat a couple of creating that\n\n21\n00:01:10,380 --> 00:01:11,800\nhighly available infrastructure, but\n\n22\n00:01:11,800 --> 00:01:14,905\nnow we want to take a look at making that\nvirtual machine itself highly available.\n\n23\n00:01:14,905 --> 00:01:17,710\n[INAUDIBLE]\n>> The next step is to plan and\n\n24\n00:01:17,710 --> 00:01:20,260\nimplement virtualization networking.\n\n25\n00:01:20,260 --> 00:01:23,350\nWe may have our network divided up\ninto several different segments,\n\n26\n00:01:23,350 --> 00:01:27,625\nyou might have a DMZ, a private network,\ntests and development and so on.\n\n27\n00:01:27,625 --> 00:01:31,135\nAnd it makes sense to have your\nvirtualization divided the same way.\n\n28\n00:01:31,135 --> 00:01:34,015\nSo we can create separate\nnetworks inside of hyper v,\n\n29\n00:01:34,015 --> 00:01:36,835\ninside of our infrastructure,\nand divide those systems up.\n\n30\n00:01:36,835 --> 00:01:38,935\nThere's a number of technologies\navailable for that, and\n\n31\n00:01:38,935 --> 00:01:40,865\nwe'll review the majority of them.\n\n32\n00:01:40,865 --> 00:01:44,075\n>> Then we'll take a look at planning and\nimplementing our virtualization stores.\n\n33\n00:01:44,075 --> 00:01:47,895\nWe've got all these hyper v servers, all\nthese virtual machines running on those.\n\n34\n00:01:47,895 --> 00:01:50,690\nWe've gotta have somewhere\nto store all those VHDs.\n\n35\n00:01:50,690 --> 00:01:54,095\nSo we wanna make sure that that's\nhighly available and that it's fast.\n\n36\n00:01:54,095 --> 00:01:55,050\nRight?\nWe've got a lot\n\n37\n00:01:55,050 --> 00:01:57,850\nof different virtual machines\nrelying on that storage.\n\n38\n00:01:57,850 --> 00:02:01,720\nIf it fails or if it's slow, that could\naffect many virtual machines on our\n\n39\n00:02:01,720 --> 00:02:05,580\nnetwork, so we wanna make sure we've got\nthat, things like that Fiber Channel,\n\n40\n00:02:05,580 --> 00:02:07,800\niSCSI, and shared VHDs and\nthings like that.\n\n41\n00:02:09,130 --> 00:02:14,370\n>> Building on top of that is plan and\nimplement virtual machine movement,\n\n42\n00:02:14,370 --> 00:02:20,140\nfacilitating the movement of a VM between\nphysical hosts that removes our reliance\n\n43\n00:02:20,140 --> 00:02:24,500\non a particular physical server so that if\nyou have a failure, it's not a big deal.\n\n44\n00:02:24,500 --> 00:02:27,040\nThe virtual machine can just\nfire up somewhere else.\n\n45\n00:02:27,040 --> 00:02:29,800\nThat requires special\nplanning with our servers\n\n46\n00:02:29,800 --> 00:02:31,690\n>> As well as our storage and\n\n47\n00:02:31,690 --> 00:02:32,300\nour networking.\n\n48\n00:02:32,300 --> 00:02:35,500\nSo a lot of what we've talked about in the\nprevious segments comes back to visit us\n\n49\n00:02:35,500 --> 00:02:40,280\nright there as we plan for\nhow to make that possible to move our VMs\n\n50\n00:02:40,280 --> 00:02:43,510\neven while they're running,\nin between physical hosts.\n\n51\n00:02:43,510 --> 00:02:45,290\nAnd then we'll wrap it\nup with managing and\n\n52\n00:02:45,290 --> 00:02:48,460\nmaintaining our server\nvirtualization infrastructure.\n\n53\n00:02:48,460 --> 00:02:53,490\nMaking sure that that's optimized,\nmake sure it's performing well, and\n\n54\n00:02:53,490 --> 00:02:55,900\nthen taking care of\nthe machines themselves.\n\n55\n00:02:55,900 --> 00:02:57,820\nDoing updates maybe to the machines,\n\n56\n00:02:57,820 --> 00:03:00,290\nwe've talked a little bit about\nupdating the virtual machines.\n\n57\n00:03:00,290 --> 00:03:01,160\nThat are running.\n\n58\n00:03:01,160 --> 00:03:02,820\nWhat about the ones that\nare in the libraries?\n\n59\n00:03:02,820 --> 00:03:05,570\nYou know, we've got to make sure\nthat those guys are staying updated.\n\n60\n00:03:05,570 --> 00:03:08,030\nIf we have self-service portals and\nthings like that,\n\n61\n00:03:08,030 --> 00:03:10,890\nwhere people can deploy out\nmachines based on templates, you've\n\n62\n00:03:10,890 --> 00:03:13,890\ngotta make sure that when those machines\nget deployed that they're not six months\n\n63\n00:03:13,890 --> 00:03:17,920\nold on their updates, they've got to be\nable backup all of these virtual machines.\n\n64\n00:03:17,920 --> 00:03:20,200\nAnd then have some kind\nof a recovery strategy.\n\n65\n00:03:20,200 --> 00:03:23,260\nWe'll start tying in\nour operations manager.\n\n66\n00:03:23,260 --> 00:03:25,300\nAnd then we'll bring in one\nI don't think we've hit yet\n\n67\n00:03:25,300 --> 00:03:27,280\nis that Data Protection Manager.\n\n68\n00:03:27,280 --> 00:03:28,750\nSo we'll tie that in as well.\n\n69\n00:03:28,750 --> 00:03:30,120\n>> Yep.\nIt's a chance to see that one,\n\n70\n00:03:30,120 --> 00:03:34,490\none of the underrated system\ncenter software packages, I think.\n\n71\n00:03:34,490 --> 00:03:37,410\nAll right.\nSo that's an action packed collection of\n\n72\n00:03:37,410 --> 00:03:40,450\nstuff there, and you know, we already\ncovered quite a bit throughout the course\n\n73\n00:03:40,450 --> 00:03:44,120\nof this show as we move through the first\ntwo objectives, and in this one,\n\n74\n00:03:44,120 --> 00:03:46,720\nwe're really starting to tie\nthings together big picture.\n\n75\n00:03:46,720 --> 00:03:51,190\nSo planning for that full infrastructure\nand going from creation to backup and\n\n76\n00:03:51,190 --> 00:03:51,690\noperation.\n\n77\n00:03:51,690 --> 00:03:53,600\nRight.\nSo real important stuff,\n\n78\n00:03:53,600 --> 00:03:56,140\ndefinitely something you\nwant to tune in for.\n\n79\n00:03:56,140 --> 00:03:57,640\nThat's about it for our overview.\n\n80\n00:03:57,640 --> 00:04:01,412\nStay tuned.\nWe've got other episodes coming up next.\n\n81\n00:04:01,412 --> 00:04:07,459\n[MUSIC]\n\n",
          "vimeoId": "110354328"
        },
        {
          "description": "",
          "length": "3536",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-1-virtualization-hosts-10312014.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-1-virtualization-hosts-10312014-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-3-1-virtualization-hosts-10312014-sm.jpg",
          "title": "Virtualization Hosts",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,914 --> 00:00:22,578\n[SOUND]\n\n3\n00:00:22,578 --> 00:00:32,578\n[MUSIC]\n\n4\n00:00:33,914 --> 00:00:35,149\nAll right.\nAll right, good morning,\n\n5\n00:00:35,149 --> 00:00:37,660\ngood afternoon and\ngood evening and welcome back.\n\n6\n00:00:37,660 --> 00:00:39,010\nTo another episode of ITProTV.\n\n7\n00:00:39,010 --> 00:00:41,990\nI'm your host Don Pezet and\nis Mr. Mike Rodrick.\n\n8\n00:00:41,990 --> 00:00:42,560\nHow's it going Mike?\n\n9\n00:00:42,560 --> 00:00:43,390\n>> Fantastic Don.\n\n10\n00:00:43,390 --> 00:00:44,260\nHow you doing today?\n\n11\n00:00:44,260 --> 00:00:46,730\n>> Another exciting day\nin the life ITProTV.\n\n12\n00:00:46,730 --> 00:00:48,110\n>> Doesn't get any better.\n\n13\n00:00:48,110 --> 00:00:49,560\nDoes it?\n[LAUGH] So\n\n14\n00:00:49,560 --> 00:00:52,590\nwe got another episode of the MCSE show.\n\n15\n00:00:52,590 --> 00:00:55,680\nRight?\nWe're jumping into 70-414 again and\n\n16\n00:00:55,680 --> 00:00:57,610\nwe're picking up with.\n\n17\n00:00:57,610 --> 00:01:01,530\nLet's see, it'll be our first\nobjective under the major objective.\n\n18\n00:01:01,530 --> 00:01:02,670\n>> Right.\n>> Of plan and\n\n19\n00:01:02,670 --> 00:01:05,810\nimplement a server\nvirtualization infrastructure.\n\n20\n00:01:05,810 --> 00:01:09,480\nAnd in this object, we're specifically\ngoing to be looking at hosts, right.\n\n21\n00:01:09,480 --> 00:01:13,360\nIt's plan and\nimplement virtualization hosts.\n\n22\n00:01:13,360 --> 00:01:15,910\nNow, when we talk about\na virtualization host,\n\n23\n00:01:15,910 --> 00:01:18,600\nit's something important that\nwe need to set in our mind.\n\n24\n00:01:18,600 --> 00:01:22,460\nIt's easy to think in terms of\nMicrosoft and say all right,\n\n25\n00:01:22,460 --> 00:01:23,920\nwell they're talking about Hyper-V hosts.\n\n26\n00:01:23,920 --> 00:01:28,743\nSo here we are planning for\nthe implementation of Hyper-V hosts.\n\n27\n00:01:28,743 --> 00:01:34,380\nBut Microsoft actually supports more than\njust the Hyper-V virtualization platform,\n\n28\n00:01:34,380 --> 00:01:40,580\nthey actually do support VMware and so\nwe could be talking about VMware vShpere.\n\n29\n00:01:40,580 --> 00:01:46,580\nAnd their virtualization, their hypervisor\nis actually called ESXi so VMware ESXi.\n\n30\n00:01:46,580 --> 00:01:50,630\nIt is a virtualization platform,\nvery, very similar to Hyper-V, right.\n\n31\n00:01:51,960 --> 00:01:53,880\nSimilar in every way except for\n\n32\n00:01:53,880 --> 00:01:57,546\nsales numbers, in which case VMware\nout sales Hyper-V by quite a bit.\n\n33\n00:01:57,546 --> 00:02:00,960\n[LAUGH] So\nwhen we think about the platform,\n\n34\n00:02:00,960 --> 00:02:04,790\ndon't just think in terms of Hyper-V,\nremember that ESXi is out there.\n\n35\n00:02:04,790 --> 00:02:09,210\nAnd in my show notes I put one more little\nnote in there which, hopefully, this\n\n36\n00:02:09,210 --> 00:02:13,550\nisn't something you have to deal with,\nbut also, Microsoft Virtual Server 2005.\n\n37\n00:02:13,550 --> 00:02:18,070\nAnd that might be a product you haven't\nheard of, but it is a virtualization\n\n38\n00:02:18,070 --> 00:02:23,200\nplatform that Microsoft released that\nthey do still support as of right now.\n\n39\n00:02:23,200 --> 00:02:25,690\nIt should be gone anytime now.\n\n40\n00:02:25,690 --> 00:02:30,200\nBut they do still support, and so\nwe need to plan on that one too.\n\n41\n00:02:30,200 --> 00:02:34,395\nSo let's talk just briefly\nabout each of these products.\n\n42\n00:02:34,395 --> 00:02:37,080\nHyper-V, I think we've seen\npretty extensively at this point.\n\n43\n00:02:37,080 --> 00:02:39,280\nYou guys have completed the MCSA track,\n\n44\n00:02:39,280 --> 00:02:42,730\nyou learned how to deploy Hyper-V in those\nshows, and you got a chance to see it.\n\n45\n00:02:42,730 --> 00:02:46,080\nSo that is Microsoft's\ntype one Hypervisor.\n\n46\n00:02:46,080 --> 00:02:49,380\nIt lets the Hypervisor run\nright on top of bare metal.\n\n47\n00:02:49,380 --> 00:02:53,940\nThe host operating system actually\nruns on top of the Hypervisor itself.\n\n48\n00:02:53,940 --> 00:02:57,210\nThen all the VMs run\nright along side of it.\n\n49\n00:02:57,210 --> 00:03:01,460\nIt gives us great performance,\nnear real time performance on hardware.\n\n50\n00:03:01,460 --> 00:03:03,110\nIn fact, in a lot of scenarios,\n\n51\n00:03:03,110 --> 00:03:07,990\nit's no difference between running in a VM\non Hyper-V versus running on the hardware.\n\n52\n00:03:07,990 --> 00:03:09,700\nAnd we get a lot of other bells and\nwhistles too.\n\n53\n00:03:09,700 --> 00:03:11,790\nLike clustering and features like that.\n\n54\n00:03:11,790 --> 00:03:14,920\nSo Hyper-V is a really great product.\n\n55\n00:03:16,070 --> 00:03:18,450\nBut it's not the only\none that's out there.\n\n56\n00:03:18,450 --> 00:03:21,370\nSo VMware is the next one.\n\n57\n00:03:21,370 --> 00:03:26,686\nVMware vSphere and the ESXi Hypervisor\nitself is another type one Hypervisor.\n\n58\n00:03:26,686 --> 00:03:30,720\nIt actually predates Hyper-V.\n\n59\n00:03:30,720 --> 00:03:33,560\nVMware, you know,\nthey've been around for a long time now.\n\n60\n00:03:33,560 --> 00:03:34,745\nWell over 15 years.\n\n61\n00:03:34,745 --> 00:03:35,360\n>> Mm-hm.\n\n62\n00:03:35,360 --> 00:03:38,370\n>> And they were pushing virtualization\nat a time when the market wasn't ready\n\n63\n00:03:38,370 --> 00:03:39,260\nfor it.\n\n64\n00:03:39,260 --> 00:03:42,880\nAnd so they didn't get a lot of\ngreat adoption in the early days.\n\n65\n00:03:42,880 --> 00:03:45,080\nAnd companies like Microsoft\ndidn't jump on it either,\n\n66\n00:03:45,080 --> 00:03:46,210\nthey just kind of let it ride.\n\n67\n00:03:46,210 --> 00:03:50,540\nAnd as time went on,\nVMware started gaining more and more and\n\n68\n00:03:50,540 --> 00:03:53,220\nmore ground and like a snowball\nit just got bigger and bigger and\n\n69\n00:03:53,220 --> 00:03:56,820\nbigger until all of a sudden now\nyou have where VMware is this\n\n70\n00:03:56,820 --> 00:04:00,630\nGoliath that's present in almost\nevery major Datacenters out there.\n\n71\n00:04:00,630 --> 00:04:01,630\nThey make a really good product.\n\n72\n00:04:01,630 --> 00:04:04,330\nThe ESXi is a great product.\n\n73\n00:04:04,330 --> 00:04:09,080\nThere is a free edition of it but it's\nnot really suitable for production use.\n\n74\n00:04:09,080 --> 00:04:11,770\nIt's very stable it's just\na pain in the butt to manage it.\n\n75\n00:04:11,770 --> 00:04:14,580\nYou know it's designed for\nsingle server management.\n\n76\n00:04:14,580 --> 00:04:18,270\nSo in production if you have multiple\nhost it becomes a nightmare to manage it.\n\n77\n00:04:18,270 --> 00:04:21,460\nSo, they really want you to move\nforward with their paid products, and\n\n78\n00:04:21,460 --> 00:04:22,770\nit's not cheap.\n\n79\n00:04:22,770 --> 00:04:26,150\nThere is no pricing model where VMware\n\n80\n00:04:27,540 --> 00:04:30,856\nvSphere results in a cheaper\ndeployment than Hyper-V.\n\n81\n00:04:30,856 --> 00:04:33,110\nHyper-V is always more cost-effective.\n\n82\n00:04:33,110 --> 00:04:35,880\nBut VMware is so entrenched in that model.\n\n83\n00:04:35,880 --> 00:04:38,690\nThey are the market\nleader in virtualization.\n\n84\n00:04:38,690 --> 00:04:43,260\nThat, even if you love Hyper-V, you're\nstill going to have to deal with VMware,\n\n85\n00:04:43,260 --> 00:04:44,920\nand mixed Data Centers are very common.\n\n86\n00:04:44,920 --> 00:04:47,370\n>> Yeah, I think it's one of\nthe big reasons that our VMM and\n\n87\n00:04:47,370 --> 00:04:49,835\nthings like that supports managing those.\n\n88\n00:04:49,835 --> 00:04:52,080\nCause Microsoft realized,\nhey, we're late to the game.\n\n89\n00:04:52,080 --> 00:04:54,820\nYou've already got probably\nsome VM spheres out there, and\n\n90\n00:04:54,820 --> 00:04:57,060\nwe want you to buy our product.\n\n91\n00:04:57,060 --> 00:04:59,640\nAnd you're not going to do that if you\ncan't manage what you've already got,\n\n92\n00:04:59,640 --> 00:05:01,360\nso, probably why we see that.\n\n93\n00:05:01,360 --> 00:05:02,530\n>> Yeah.\n\n94\n00:05:02,530 --> 00:05:06,370\nAnd the other product is the, Virtual\nServer 2005, and, you know, Microsoft,\n\n95\n00:05:06,370 --> 00:05:09,780\nthey've made some missed steps when they\njumped into the virtualization market.\n\n96\n00:05:09,780 --> 00:05:10,650\nEverybody did.\n\n97\n00:05:10,650 --> 00:05:12,930\nIt's just most people\nmade them a lot earlier.\n\n98\n00:05:12,930 --> 00:05:14,900\nSo when Microsoft started\nlooking into virtualization,\n\n99\n00:05:14,900 --> 00:05:17,630\nthey said, why build something ourselves,\n\n100\n00:05:17,630 --> 00:05:20,020\nlet's just find somebody else who's\nreally successful and buy them.\n\n101\n00:05:20,020 --> 00:05:22,201\nIt's a typical, it's the Apple model.\n\n102\n00:05:22,201 --> 00:05:22,897\n>> [LAUGH]\n>> So\n\n103\n00:05:22,897 --> 00:05:25,018\nthey wanted to do this virtualization and\n\n104\n00:05:25,018 --> 00:05:27,780\nthere was a company out\nthere called Connectix.\n\n105\n00:05:27,780 --> 00:05:30,610\n>> And if I remember I think\nthey were a German based company\n\n106\n00:05:30,610 --> 00:05:31,250\n>> I think so\n\n107\n00:05:31,250 --> 00:05:32,310\n>> I don't recall, but\n\n108\n00:05:32,310 --> 00:05:35,470\nthey just acquired them and brought\nin their Connectix product which was\n\n109\n00:05:35,470 --> 00:05:39,550\nVirtual PC, and then they built\nVirtual Server 2005 off of that.\n\n110\n00:05:39,550 --> 00:05:43,220\nSo Microsoft Virtual Server 2005 was\nreally just a fancy version of Virtual PC,\n\n111\n00:05:43,220 --> 00:05:47,040\nwhich was a type two Hypervisor.\n\n112\n00:05:47,040 --> 00:05:49,310\n>> That means that you\nused virtualized hardware.\n\n113\n00:05:49,310 --> 00:05:50,890\nAnd any time you have\nvirtualized hardware,\n\n114\n00:05:50,890 --> 00:05:52,840\nyou get a call to the virtual hardware.\n\n115\n00:05:52,840 --> 00:05:54,810\nYou have to then translate it and\nsend it to the real hardware.\n\n116\n00:05:54,810 --> 00:05:57,830\nThat translation results\nin slow performance.\n\n117\n00:05:57,830 --> 00:06:00,070\nSo it was not a good performer.\n\n118\n00:06:00,070 --> 00:06:03,600\n>> I mean, it was great to use for little\ntesting things and things like that.\n\n119\n00:06:03,600 --> 00:06:07,100\nTry something out where you didn't want\nto blow away your operating system,\n\n120\n00:06:07,100 --> 00:06:08,660\ninstall an alternate operating system.\n\n121\n00:06:08,660 --> 00:06:09,310\nSomething like that.\n\n122\n00:06:09,310 --> 00:06:11,960\nBut that was really all it was good for.\n\n123\n00:06:11,960 --> 00:06:14,060\n>> So it wasn't that popular.\n\n124\n00:06:14,060 --> 00:06:17,580\nMicrosoft they originally charged for\nit quite a bit actually, and\n\n125\n00:06:17,580 --> 00:06:19,535\nit wasn't long before they\nstarted giving it away for free.\n\n126\n00:06:19,535 --> 00:06:23,180\n[LAUGH] So if you want to mess with it you\ncan go and down it for free right now.\n\n127\n00:06:23,180 --> 00:06:24,092\nYou don't want to.\n\n128\n00:06:24,092 --> 00:06:26,710\n>> No. [LAUGH] >> And\nwhat ultimately happened is Microsoft said\n\n129\n00:06:26,710 --> 00:06:29,380\nthis product is not the future,\nand so they stopped it.\n\n130\n00:06:29,380 --> 00:06:32,590\nAnd so Virtual Server 2005 is the last\nversion of it and after that,\n\n131\n00:06:32,590 --> 00:06:35,240\nthey said, all right,\nwe tried buying somebody else.\n\n132\n00:06:35,240 --> 00:06:36,320\nIt's time to make our own.\n\n133\n00:06:36,320 --> 00:06:39,240\nAnd so that's what they did is they\nhired experts, they brought people on.\n\n134\n00:06:39,240 --> 00:06:40,930\nThey sat down and created a group.\n\n135\n00:06:40,930 --> 00:06:42,810\nAnd the product that was Hyper-V.\n\n136\n00:06:42,810 --> 00:06:45,025\nAnd the initial version of Hyper-V,\nitself, wasn't all that great.\n\n137\n00:06:45,025 --> 00:06:45,560\n>> Mm-hm.\n\n138\n00:06:45,560 --> 00:06:47,740\n>> But it's been revised several times,\nright?\n\n139\n00:06:47,740 --> 00:06:52,390\nIn Windows Server 2012 R2, we're actually\nrunning the fourth version of Hyper-V,\n\n140\n00:06:52,390 --> 00:06:54,040\nand it's evolved a lot.\n\n141\n00:06:54,040 --> 00:06:57,275\nIt's now very stable, very reliable,\nand it's a great product to use.\n\n142\n00:06:57,275 --> 00:06:57,860\n>> Mm-hm.\n\n143\n00:06:57,860 --> 00:07:00,370\n>> So, when we talk about planning for\n\n144\n00:07:00,370 --> 00:07:04,700\nour Datacenter, we've got to remember that\nit could be any of these three products.\n\n145\n00:07:04,700 --> 00:07:08,960\nNow if that product happens to\nbe Virtual Server 2005 your plan\n\n146\n00:07:08,960 --> 00:07:10,120\nis going to be a migration plan, right?\n\n147\n00:07:10,120 --> 00:07:10,770\n>> [LAUGH]\n>> You\n\n148\n00:07:10,770 --> 00:07:12,540\nneed to get away from that\nas soon as you can, and\n\n149\n00:07:12,540 --> 00:07:15,920\neven Microsoft will tell you that,\nright, that needs to be moved away from.\n\n150\n00:07:15,920 --> 00:07:19,350\nIf you see that as an answer on the exam,\nthat's one of the ones that you say oh,\n\n151\n00:07:19,350 --> 00:07:21,020\nthat's not the right answer and\nyou cross it out.\n\n152\n00:07:21,020 --> 00:07:23,946\nSo that one may be there but\nyou won't see it.\n\n153\n00:07:23,946 --> 00:07:28,940\nWith the VMware, though, when you\nget a design question on the exam,\n\n154\n00:07:29,980 --> 00:07:34,820\nit'll indicate whether or not the customer\nis interested in moving away from VMware,\n\n155\n00:07:34,820 --> 00:07:36,190\nor if they're keeping it.\n\n156\n00:07:36,190 --> 00:07:38,770\nAnd it's perfectly fine to keep it.\n\n157\n00:07:38,770 --> 00:07:44,373\nYou can mix Hyper-V and VMware together,\nbut the problem becomes management, right?\n\n158\n00:07:44,373 --> 00:07:48,357\nAnd if you have to manage both of them,\nyou've got the Hyper-V manager, for\n\n159\n00:07:48,357 --> 00:07:51,609\nmanaging the Hyper-V servers,\nand you've got vCenter, for\n\n160\n00:07:51,609 --> 00:07:55,781\nmanaging the VMware server So there's\nno centralized management anymore, and\n\n161\n00:07:55,781 --> 00:07:59,310\nthat's where the system center\nvirtual machine manager comes in.\n\n162\n00:07:59,310 --> 00:08:02,040\nThe SCVMM can manage all\nthree of these products.\n\n163\n00:08:02,040 --> 00:08:04,770\nSo you could have a data center made\nup of any combination of these, and\n\n164\n00:08:04,770 --> 00:08:07,790\nit's all managed centrally inside\nof the SCVMM, which is pretty nice.\n\n165\n00:08:07,790 --> 00:08:08,290\n>> Absolutely.\n\n166\n00:08:10,610 --> 00:08:11,630\n>> So keep that in mind.\n\n167\n00:08:11,630 --> 00:08:14,070\nThe other thing to remember is licensing,\nall right.\n\n168\n00:08:14,070 --> 00:08:18,775\n>> And here's one of the areas where\nHyper-V really wins out, when you deploy\n\n169\n00:08:18,775 --> 00:08:23,860\nHyper-V, if you're deploying it on top\nof Windows server 2012 standard edition,\n\n170\n00:08:23,860 --> 00:08:29,630\nthey'll actually allow you to bring\nup two Microsoft VMs license free.\n\n171\n00:08:29,630 --> 00:08:32,470\nSo you paid for\nthe server license under the hood.\n\n172\n00:08:32,470 --> 00:08:36,340\nYou can now create two virtual machines\nand it's part of your license, all right?\n\n173\n00:08:36,340 --> 00:08:39,560\nAnd any other virtual machine you're going\nto create after that you're going to have\n\n174\n00:08:39,560 --> 00:08:40,380\nto pay a license for it.\n\n175\n00:08:40,380 --> 00:08:43,400\nAnd that might be a Windows OS\nyou got to buy a license or\n\n176\n00:08:43,400 --> 00:08:46,500\nit might be a Linux OS\nthat is royalty free, or\n\n177\n00:08:46,500 --> 00:08:49,180\nmight be a Linux OS like Red Hat where\nyou do have to pay for a license.\n\n178\n00:08:49,180 --> 00:08:49,840\nIt's just up to you.\n\n179\n00:08:51,500 --> 00:08:55,960\nWith VMware, VMware doesn't make\nan operating system themselves, so\n\n180\n00:08:55,960 --> 00:08:59,810\nwhen you bring up the SXI, you've\ngot to buy a license no matter what.\n\n181\n00:08:59,810 --> 00:09:03,980\nSo when you buy Windows Server to run\non top of VMware you got to pay for\n\n182\n00:09:03,980 --> 00:09:04,810\nthat server license.\n\n183\n00:09:04,810 --> 00:09:07,170\nIf you've got two VM's you got to pay for\ntwo licenses.\n\n184\n00:09:07,170 --> 00:09:12,135\nAnd the Red Hat Linux situation is\nthe same on VMware as it is on there.\n\n185\n00:09:12,135 --> 00:09:16,365\nWhen things really get different\nis when you run Hyper-V on top of\n\n186\n00:09:16,365 --> 00:09:19,045\nWindows server 2012 R2 Enterprise Edition.\n\n187\n00:09:19,045 --> 00:09:23,435\nBecause with the Enterprise\nedition you get unlimited VMs.\n\n188\n00:09:23,435 --> 00:09:28,755\nThe license is included with it,\nand that, that's a big deal, right?\n\n189\n00:09:28,755 --> 00:09:29,945\nOh wait, shoot, you know what?\n\n190\n00:09:29,945 --> 00:09:31,195\nI'm saying Enterprise, and I shouldn't.\n\n191\n00:09:31,195 --> 00:09:31,875\nIt's Datacenter.\n\n192\n00:09:31,875 --> 00:09:33,305\n>> Datacenter.\nThere's no more Enterprise.\n\n193\n00:09:33,305 --> 00:09:35,340\n>> Sorry, I, [LAUGH]\n>> And it used to be called Enterprise,\n\n194\n00:09:35,340 --> 00:09:36,140\nit's now Datacenter.\n\n195\n00:09:36,140 --> 00:09:38,283\nSo you have Standard Edition,\nand Datacenter Edition,\n\n196\n00:09:38,283 --> 00:09:39,780\nEnterprise kind of went away.\n\n197\n00:09:39,780 --> 00:09:42,780\nSo, the Datacenter Edition,\nwhen you get that one,\n\n198\n00:09:42,780 --> 00:09:45,310\nyou have unlimited virtual machines.\n\n199\n00:09:45,310 --> 00:09:49,320\nSo, if you think about that,\nif I was going to run ten copies of\n\n200\n00:09:49,320 --> 00:09:53,872\nwindows server in there, where the retail\ncost is fifteen hundred dollars a server,\n\n201\n00:09:53,872 --> 00:09:57,480\nthat's $15,000 just in licensing alone,\nright?\n\n202\n00:09:57,480 --> 00:10:00,010\nWell when you use ESXI,\n\n203\n00:10:00,010 --> 00:10:04,220\nthe standard enterprise license free\nESXI is about $5,000 per host, right?\n\n204\n00:10:04,220 --> 00:10:09,418\nAnd then you still have the virtual\nmachine is on top of another 15,000.\n\n205\n00:10:09,418 --> 00:10:13,140\n>> So the Hyper-V running on top\nof Datacenter Edition is actually\n\n206\n00:10:13,140 --> 00:10:16,990\na lot more affordable just on just\non licensing fees alone, right?\n\n207\n00:10:16,990 --> 00:10:19,240\nBut VMware has a lot of cloud\nthey've been doing it longer.\n\n208\n00:10:19,240 --> 00:10:20,250\nThey've got a great product.\n\n209\n00:10:20,250 --> 00:10:24,590\nSo, if your in a VMware shop this\nis not necessarily a sign to say,\n\n210\n00:10:24,590 --> 00:10:26,730\nhey, you need to jump over to Microsoft,\nright?\n\n211\n00:10:26,730 --> 00:10:29,480\nThere may be features that you have\nwith VMware that you rely upon that\n\n212\n00:10:29,480 --> 00:10:31,020\nMicrosoft hasn't created yet.\n\n213\n00:10:31,020 --> 00:10:34,090\nAnd so you'll need to stay there,\nbut if you can start to mix.\n\n214\n00:10:34,090 --> 00:10:37,570\nYou can start bringing up a few Hyper-V\nservers, and you can start to get\n\n215\n00:10:37,570 --> 00:10:40,780\nwhere you're not married to one company\nanymore, where you have that flexibility.\n\n216\n00:10:42,770 --> 00:10:46,625\nSo keep that in mind when we talk about\nthe three products that are in there.\n\n217\n00:10:46,625 --> 00:10:47,235\nAll right.\n\n218\n00:10:47,235 --> 00:10:49,785\nNow I mentioned\nthe System Center Virtual Machine Engine.\n\n219\n00:10:51,085 --> 00:10:55,624\nIf we want to manage our Hyper-V hosts, or\njust our virtualization hosts in general,\n\n220\n00:10:55,624 --> 00:10:58,690\nCentralized Management is\ngoing to be a part of that.\n\n221\n00:10:58,690 --> 00:11:01,506\nRemember on the MCSE exam we're not\ntalking about small companies, we're not\n\n222\n00:11:01,506 --> 00:11:04,419\ntalking about mid size companies, we're\ntalking about a large and enterprise.\n\n223\n00:11:04,419 --> 00:11:08,480\nAnd if you're managing more than three or\nfour Hyper-V hosts,\n\n224\n00:11:08,480 --> 00:11:11,876\nit becomes really difficult\nto coordinate all that.\n\n225\n00:11:11,876 --> 00:11:15,754\nAnd if you're doing clustering, that kind\nof stuff, it gets really complex really\n\n226\n00:11:15,754 --> 00:11:18,648\nfast and we've seen in some of\nthe other shows we've filmed for\n\n227\n00:11:18,648 --> 00:11:21,620\nthis exam that SCVMM,\nit carries a lot of weight for us, right?\n\n228\n00:11:21,620 --> 00:11:26,760\nIt really does make life a lot easier and\nso you're going to want that implemented\n\n229\n00:11:26,760 --> 00:11:30,020\nin whatever network design you've\ngot going on the exam, right.\n\n230\n00:11:30,020 --> 00:11:33,120\nSo what are some of the components\nthat we can deploy with it?\n\n231\n00:11:33,120 --> 00:11:36,840\nWell before the show I\nactually tried to make a list.\n\n232\n00:11:36,840 --> 00:11:40,728\nWhat's all the stuff that\nwe can do with SCVMM?\n\n233\n00:11:40,728 --> 00:11:41,453\nRight?\n\n234\n00:11:41,453 --> 00:11:46,740\nAnd I kind of started just by saying\nwhat were the really required pieces,\n\n235\n00:11:46,740 --> 00:11:47,630\nwhat was the minimum.\n\n236\n00:11:47,630 --> 00:11:52,090\nIf I wanted to plug the SCVMM,\nwhat did I have to have at a minimum?\n\n237\n00:11:52,090 --> 00:11:53,970\nAnd really just three things.\n\n238\n00:11:53,970 --> 00:11:58,620\nAll right, so the first one, kind of\nmakes sense, is the SCVMM server itself.\n\n239\n00:11:58,620 --> 00:12:02,030\nAll right, that's\nthe System Center Virtual Machine Manager.\n\n240\n00:12:02,030 --> 00:12:03,960\nIt's a standalone product.\n\n241\n00:12:03,960 --> 00:12:06,580\nYou don't have to have SCOM or SCCM.\n\n242\n00:12:06,580 --> 00:12:08,690\nYou know the various other\nsystem center product.\n\n243\n00:12:08,690 --> 00:12:10,503\nYou certainly can have them, right?\n\n244\n00:12:10,503 --> 00:12:11,280\nThey integrate.\n\n245\n00:12:11,280 --> 00:12:13,270\nWe've seen that in previous shows.\n\n246\n00:12:13,270 --> 00:12:17,440\nBut if we just wanted to do SCVMM\nby itself, you certainly can.\n\n247\n00:12:17,440 --> 00:12:18,560\nAll right.\n\n248\n00:12:18,560 --> 00:12:22,400\nSo you'll need that SCVMM server,\nthat's component number 1.\n\n249\n00:12:22,400 --> 00:12:26,180\nComponent number 2, SQL database.\n\n250\n00:12:26,180 --> 00:12:29,090\nThe SCVMM stores its data,\nits configuration,\n\n251\n00:12:29,090 --> 00:12:31,410\nall that other good stuff In a database.\n\n252\n00:12:31,410 --> 00:12:32,270\nAnd so you've got to have one.\n\n253\n00:12:32,270 --> 00:12:36,170\nNow, you can actually use SQL Express.\n\n254\n00:12:36,170 --> 00:12:39,110\nSo you can run it right there\non the same server as SCVMM, for\n\n255\n00:12:39,110 --> 00:12:40,530\na smaller environment, right?\n\n256\n00:12:40,530 --> 00:12:42,880\nMicrosoft suggests less than a hundred and\nfifty hosts.\n\n257\n00:12:42,880 --> 00:12:45,340\nWell, a lot of people have less\nthan a hundred and fifty hosts, and\n\n258\n00:12:45,340 --> 00:12:46,830\nthat works out fine.\n\n259\n00:12:46,830 --> 00:12:49,475\nBut if you've got more than a hundred and\nfifty hosts,\n\n260\n00:12:49,475 --> 00:12:51,740\nthen you could be managing a lot of data.\n\n261\n00:12:51,740 --> 00:12:54,050\nThink about how many VMs\non each of those hosts.\n\n262\n00:12:54,050 --> 00:12:57,560\nAnd so at that point, you really need\nto step up to a full-size SQL Server.\n\n263\n00:12:57,560 --> 00:12:59,730\nSo this is another one for the exam.\n\n264\n00:12:59,730 --> 00:13:01,950\nI'm full of good examples, right?\n\n265\n00:13:01,950 --> 00:13:02,500\nAnother one for\n\n266\n00:13:02,500 --> 00:13:06,580\nthe exam is to remember that that's\nwhere Microsoft draws the line.\n\n267\n00:13:06,580 --> 00:13:07,500\nA hundred and fifty hosts.\n\n268\n00:13:07,500 --> 00:13:08,170\nOkay?\n\n269\n00:13:08,170 --> 00:13:11,417\nWhen you cross that line from a hundred\nand forty nine to a hundred and fifty,\n\n270\n00:13:11,417 --> 00:13:13,220\nthe world changes.\n\n271\n00:13:13,220 --> 00:13:14,000\nRight?\n\n272\n00:13:14,000 --> 00:13:17,200\nAnd you go from a small STDM\ndeployment to a large one.\n\n273\n00:13:17,200 --> 00:13:21,310\nAnd when you get to a large one,\nyou need to have an SCVMM server, and\n\n274\n00:13:21,310 --> 00:13:24,870\na separate SQL Database Server\nthat can manage the information.\n\n275\n00:13:26,250 --> 00:13:27,540\nIf you're deploying system center,\n\n276\n00:13:27,540 --> 00:13:30,220\nyou likely already have\na dedicated SQL Server for that.\n\n277\n00:13:30,220 --> 00:13:31,300\nSo it's pretty common.\n\n278\n00:13:31,300 --> 00:13:34,180\nBut if you're starting out in\nthe very beginning just managing\n\n279\n00:13:34,180 --> 00:13:34,940\na handful of hosts.\n\n280\n00:13:34,940 --> 00:13:36,662\nYou might choose to deploy\nit all rolled up into one.\n\n281\n00:13:36,662 --> 00:13:38,140\nAll right.\n\n282\n00:13:38,140 --> 00:13:42,700\nThe last component is kind of a cheat.\n\n283\n00:13:42,700 --> 00:13:43,590\nIt is important.\n\n284\n00:13:43,590 --> 00:13:45,750\nIt's called the SCVMM Library Server.\n\n285\n00:13:46,830 --> 00:13:50,870\nThe library,\nthat's where we store stuff, right?\n\n286\n00:13:50,870 --> 00:13:52,160\n>> All sorts of things.\n\n287\n00:13:52,160 --> 00:13:54,440\nISS, virtual machine templates,\nthings like that.\n\n288\n00:13:55,480 --> 00:13:57,710\n>> Yeah, you can jam all sorts of things.\n\n289\n00:13:57,710 --> 00:13:58,410\nVirtual machines.\n\n290\n00:13:58,410 --> 00:14:00,230\nThat's my favorite one, right?\n\n291\n00:14:00,230 --> 00:14:02,230\nYou guys have probably dealt\nwith this in real life.\n\n292\n00:14:02,230 --> 00:14:05,420\nWhere you have a server that\nyou're decommissioning.\n\n293\n00:14:05,420 --> 00:14:08,200\nAnd so it's been running for years.\n\n294\n00:14:08,200 --> 00:14:10,870\nAnd it's been replaced by something else,\nright?\n\n295\n00:14:10,870 --> 00:14:13,872\nAnd you finally get that approval\nfrom up high where they tell you,\n\n296\n00:14:13,872 --> 00:14:16,270\nall right, we're done with that server,\nyou can shut it down.\n\n297\n00:14:16,270 --> 00:14:16,780\nAnd what do you do?\n\n298\n00:14:16,780 --> 00:14:19,480\nYou shut it down, and\nthen you decommission.\n\n299\n00:14:19,480 --> 00:14:22,180\nAnd your decommissioning process\nshould include things like erasing it,\n\n300\n00:14:22,180 --> 00:14:24,905\nsanitizing the hard drives,\nmaybe just destroying the hard drives.\n\n301\n00:14:24,905 --> 00:14:27,835\nAnd then, getting the hardware\nout of your building, right.\n\n302\n00:14:27,835 --> 00:14:30,505\nAnd then, a few months go by,\nand somebody goes, oh,\n\n303\n00:14:30,505 --> 00:14:32,625\nhey, can I still get\naccess to that old system?\n\n304\n00:14:32,625 --> 00:14:33,895\nWe actually forgot to\nbring something over.\n\n305\n00:14:33,895 --> 00:14:40,270\nAnd you kind of look around, and\nyou're like, well, It's just kind of gone.\n\n306\n00:14:40,270 --> 00:14:42,439\n>> Right?\n>> [CROSSTALK] using the shredder.\n\n307\n00:14:42,439 --> 00:14:45,695\n>> Or maybe you had the presence of mind\nto save some backups from it, right?\n\n308\n00:14:45,695 --> 00:14:46,460\n>> Mm-hm.\nYep.\n\n309\n00:14:46,460 --> 00:14:49,590\n>> And then, you're not really much\nbetter off because now you're like crap,\n\n310\n00:14:49,590 --> 00:14:53,700\nI've got to restore this backup to\na system I don't have anymore and\n\n311\n00:14:53,700 --> 00:14:55,570\nit's a nightmare to get at.\n\n312\n00:14:55,570 --> 00:14:59,940\nWell, with the SCVMM,\nif that machine was a virtual machine,\n\n313\n00:14:59,940 --> 00:15:03,760\nyou can shut it down and\nmove the virtual machine into the library.\n\n314\n00:15:03,760 --> 00:15:06,270\nIt comes off of the Hyper-V host,\nso it frees up the resources and\n\n315\n00:15:06,270 --> 00:15:09,585\nit just sits there in the library and\nyou're just eating up storage now.\n\n316\n00:15:09,585 --> 00:15:11,740\nCause you can just save it, save it for\nyears, doesn't matter right.\n\n317\n00:15:11,740 --> 00:15:15,010\nAnd if you ever need it again, you can\nalways jump right back in and get it.\n\n318\n00:15:15,010 --> 00:15:17,340\nIf it was a physical machine.\n\n319\n00:15:17,340 --> 00:15:20,770\nThe SCVMM can do P2V conversions, right?\n\n320\n00:15:20,770 --> 00:15:22,740\nThat's physical to virtual.\n\n321\n00:15:22,740 --> 00:15:27,150\nSo the SCVMM can reach out to that server,\nmake an image of it,\n\n322\n00:15:27,150 --> 00:15:30,900\nturn it into a virtual machine, and\nthen you stick that in your library.\n\n323\n00:15:30,900 --> 00:15:32,150\nAnd now you got that backed up.\n\n324\n00:15:32,150 --> 00:15:34,450\nYou can decommission the hardware and\nget it out of there.\n\n325\n00:15:34,450 --> 00:15:36,910\n>> Right.\n>> The accounting department will like\n\n326\n00:15:36,910 --> 00:15:41,004\nthat because they have to deprecation\nevery year and all that stuff,\n\n327\n00:15:41,004 --> 00:15:42,146\nnot deprecation.\n\n328\n00:15:42,146 --> 00:15:43,261\nI got to get my terms right.\n\n329\n00:15:43,261 --> 00:15:47,103\n[LAUGH] So they get to do that and\nit's out of there.\n\n330\n00:15:47,103 --> 00:15:49,626\nBut you still have a virtual machine that\nyou can easily recover if you need it.\n\n331\n00:15:49,626 --> 00:15:54,120\nSo, if you think about the sizes of your\nvirtual machines, they can be pretty big.\n\n332\n00:15:54,120 --> 00:15:56,260\nAnd that's going in this library.\n\n333\n00:15:56,260 --> 00:15:59,380\nYour ISO images, like Mike mentioned,\nthose are going to the library.\n\n334\n00:15:59,380 --> 00:16:00,030\nThose take up space.\n\n335\n00:16:01,260 --> 00:16:02,810\nYou've got to have it stored somewhere,\nand\n\n336\n00:16:02,810 --> 00:16:05,260\nyou probably don't have that space\non your SCVMM server itself.\n\n337\n00:16:06,440 --> 00:16:08,790\nThe other thing are templates.\n\n338\n00:16:08,790 --> 00:16:11,830\nWe can actually deploy virtual\nmachines from a template.\n\n339\n00:16:11,830 --> 00:16:13,050\nOh, you need a web server?\n\n340\n00:16:13,050 --> 00:16:14,910\nHere, let me just clone\nour web server template.\n\n341\n00:16:14,910 --> 00:16:17,810\nFive minutes later, you got a web server\nthat's up, running, and in production.\n\n342\n00:16:17,810 --> 00:16:21,820\n>> If you've got that self service\nportal setup or app controller now.\n\n343\n00:16:21,820 --> 00:16:24,630\nAnd when they're going out to deploy\nvirtual machines, most of those people,\n\n344\n00:16:24,630 --> 00:16:25,610\nthey don't know what they need.\n\n345\n00:16:25,610 --> 00:16:27,100\nYou've got templates set up for them.\n\n346\n00:16:27,100 --> 00:16:30,240\nYou just whip out a machine that already\nhas two hard drives, two network adapters,\n\n347\n00:16:30,240 --> 00:16:30,990\nwhatever the case may be.\n\n348\n00:16:32,110 --> 00:16:35,916\n>> But if you've got your host deployed\nacross five cities and you have WAM links\n\n349\n00:16:35,916 --> 00:16:41,540\nin between the cities and you only have\none SCVMM library at your headquarters and\n\n350\n00:16:41,540 --> 00:16:45,281\nyou want to spawn a VM out to one of your\nremotes, well you don't want that template\n\n351\n00:16:45,281 --> 00:16:48,295\nthat's been copied across a WAN link,\nit could be 100 gigs.\n\n352\n00:16:48,295 --> 00:16:49,064\n>> Absolutely.\n\n353\n00:16:49,064 --> 00:16:51,225\n>> So,\nyou put more than one library server.\n\n354\n00:16:51,225 --> 00:16:53,815\nYou spread them out across all\nyour different locations and\n\n355\n00:16:53,815 --> 00:16:56,658\nthat way when you need to deploy\na VM to a host in a particular city,\n\n356\n00:16:56,658 --> 00:16:58,390\nit can just come right from that state.\n\n357\n00:16:58,390 --> 00:17:01,495\nYou might have just one SCVMM\nserver right there at headquarters.\n\n358\n00:17:01,495 --> 00:17:05,135\nBut you might have library serves\nspread all throughout your company.\n\n359\n00:17:05,135 --> 00:17:06,730\nSo, that's that third component.\n\n360\n00:17:06,730 --> 00:17:11,570\nIn a small deployment, you might have all\nthree of these pieces on the same server,\n\n361\n00:17:11,570 --> 00:17:15,470\nthe SCVMM, the sequel data base,\nand the SCVMM library.\n\n362\n00:17:15,470 --> 00:17:19,379\nThey might all right be\non the same machine.\n\n363\n00:17:19,379 --> 00:17:21,699\nOr you might break those up into\nthree different machines, and\n\n364\n00:17:21,699 --> 00:17:23,379\nyou might have more than\none library server.\n\n365\n00:17:23,379 --> 00:17:27,594\nYou might have more than one SQL data\nbase for redundancy or the SCVMM,\n\n366\n00:17:27,594 --> 00:17:29,410\nyou might cluster that.\n\n367\n00:17:29,410 --> 00:17:31,020\nThat's normally the route we take.\n\n368\n00:17:31,020 --> 00:17:34,730\nSo, you might have more, but at a minimum\nyou're gonnahave these three pieces.\n\n369\n00:17:36,150 --> 00:17:40,750\nSo, what about all of the other bells and\nwhistles?\n\n370\n00:17:40,750 --> 00:17:41,945\nWell, that's when my list got kind of fun.\n\n371\n00:17:41,945 --> 00:17:44,697\n>> [LAUGH]\n>> Cuz I said, well, to deploy the SCVMM,\n\n372\n00:17:44,697 --> 00:17:46,864\nat a minimum, we need these three pieces.\n\n373\n00:17:46,864 --> 00:17:51,020\nAt a maximum, what else could we have and\nthere's a lot of fun stuff in here.\n\n374\n00:17:51,020 --> 00:17:54,680\nSo, I came up with a list of optional\ncomponents that we would deploy and Mike,\n\n375\n00:17:54,680 --> 00:17:56,430\nyou mentioned two of them.\n\n376\n00:17:56,430 --> 00:17:59,550\nOne of them was the self-service portal.\n\n377\n00:17:59,550 --> 00:18:00,050\n>> Right.\n\n378\n00:18:00,050 --> 00:18:03,120\n>> And the app controller,\nI guess that kind of related now.\n\n379\n00:18:03,120 --> 00:18:04,770\n>> Same thing, yeah.\n\n380\n00:18:04,770 --> 00:18:09,000\n>> In previous versions of SCVMM,\nlike SCVMM 2007,\n\n381\n00:18:09,000 --> 00:18:12,870\nthey had this self service portal,\nit was a webpage built in SCVMM.\n\n382\n00:18:12,870 --> 00:18:15,690\nAnd your end users can browse\nthrough the webpage and\n\n383\n00:18:15,690 --> 00:18:20,246\nyou can have predefined virtual machines\nthat they can clone if they needed them.\n\n384\n00:18:20,246 --> 00:18:23,693\nMaybe, the developers wanted test\nenvironments to work with, but\n\n385\n00:18:23,693 --> 00:18:26,120\nthey really hosed up\nthose test environments.\n\n386\n00:18:26,120 --> 00:18:27,292\n>> [LAUGH]\n>> And so,\n\n387\n00:18:27,292 --> 00:18:30,055\nwhat they needed to really do was\nto be able to wipe those out and\n\n388\n00:18:30,055 --> 00:18:32,180\nrecreate them at a moment's notice.\n\n389\n00:18:32,180 --> 00:18:33,850\nAnd the self service portal\nwould let them do that.\n\n390\n00:18:33,850 --> 00:18:35,690\nThey wouldn't have to see\nthe Hyper-V post behind it.\n\n391\n00:18:35,690 --> 00:18:37,390\nThey wouldn't have to\nsee the infrastructure.\n\n392\n00:18:37,390 --> 00:18:39,220\nThey would just see this webpage.\n\n393\n00:18:39,220 --> 00:18:43,090\nAnd you can even set little costs, to say\nthat you can only run this many machines\n\n394\n00:18:43,090 --> 00:18:45,020\nat the same time,\nyou can put limits in place.\n\n395\n00:18:45,020 --> 00:18:49,249\nIt was a neat little system, but it was\nkind of limited, and it required giving\n\n396\n00:18:49,249 --> 00:18:52,914\npeople access to this web server\nthat was running on your SCVMM box.\n\n397\n00:18:52,914 --> 00:18:53,936\n>> Yeah, that was the big thing.\n\n398\n00:18:53,936 --> 00:18:55,643\n>> And a lot of people didn't like that.\n\n399\n00:18:55,643 --> 00:19:00,830\nSo, Microsoft actually took the\nself-service portal out of SCVMM 2012 R2.\n\n400\n00:19:00,830 --> 00:19:02,240\nSo, it's gone.\n\n401\n00:19:02,240 --> 00:19:03,190\nWell, it's not completely gone.\n\n402\n00:19:03,190 --> 00:19:05,560\nIt's just been moved\noff to another product.\n\n403\n00:19:05,560 --> 00:19:09,100\nAnd so, now,\nwe have the system center app controller.\n\n404\n00:19:09,100 --> 00:19:11,490\nThe app controller,\nit's a separate product,\n\n405\n00:19:11,490 --> 00:19:14,310\npart of the System Center suite and\nit's a self service portal.\n\n406\n00:19:14,310 --> 00:19:16,885\nIt's the missing self\nservice portal from SCVMM.\n\n407\n00:19:17,940 --> 00:19:19,470\nThey broke it out cuz most\npeople didn't need it.\n\n408\n00:19:19,470 --> 00:19:20,400\nMost people didn't use.\n\n409\n00:19:20,400 --> 00:19:22,450\nWhy pay for something you're not using.\n\n410\n00:19:22,450 --> 00:19:25,030\nAnd split it into a separate product and\nthen they enhanced it.\n\n411\n00:19:25,030 --> 00:19:26,940\nThey made it better.\n\n412\n00:19:26,940 --> 00:19:29,200\nNow, it not only deploys virtual machines.\n\n413\n00:19:29,200 --> 00:19:29,960\nYou can still do that.\n\n414\n00:19:29,960 --> 00:19:30,850\nYou create your templates.\n\n415\n00:19:30,850 --> 00:19:35,440\nPeople can deploy the virtual machines,\nbut you can also deploy applications.\n\n416\n00:19:35,440 --> 00:19:36,930\nWell, what's an application?\n\n417\n00:19:38,270 --> 00:19:41,460\nIn today's world,\nwhen most developers create software,\n\n418\n00:19:41,460 --> 00:19:45,300\nthey're not writing a software client that\nyou install in your computer anymore.\n\n419\n00:19:45,300 --> 00:19:47,780\nBecause we have so many different\noperating systems that are out there, and\n\n420\n00:19:47,780 --> 00:19:49,190\nso many different needs.\n\n421\n00:19:49,190 --> 00:19:52,870\nPeople are almost entirely\ndeveloping web applications now.\n\n422\n00:19:52,870 --> 00:19:55,560\nAnd so, you'll have the application\nthat runs on the web server, and\n\n423\n00:19:55,560 --> 00:19:57,670\nyou'll normally have\na database on the back end.\n\n424\n00:19:57,670 --> 00:19:59,470\nThere's more than one piece.\n\n425\n00:19:59,470 --> 00:20:04,640\nSo, to spawn that application, you don't\nneed one VM, you need multiple VMs.\n\n426\n00:20:04,640 --> 00:20:08,160\nAnd most of these applications\nare designed to scale out, so if the web\n\n427\n00:20:08,160 --> 00:20:11,540\nserver starts getting busy, it'll clone\nthe web server, and now you've got two.\n\n428\n00:20:11,540 --> 00:20:14,417\nAnd if it keeps getting busier, it'll\nclone it, and now you've got three and so\n\n429\n00:20:14,417 --> 00:20:15,959\non, same thing with the database server.\n\n430\n00:20:15,959 --> 00:20:20,430\nSo, they're designed to grow,\nto scale out, and do that dynamically.\n\n431\n00:20:20,430 --> 00:20:23,080\nGrow when you're busy,\nshrink when you're not busy.\n\n432\n00:20:23,080 --> 00:20:26,456\nThe old self-service portal didn't\neven understand that concept, but\n\n433\n00:20:26,456 --> 00:20:28,350\nit'll be able to do it.\n\n434\n00:20:28,350 --> 00:20:30,800\nApp control, on the other hand,\ncan handle it just fine.\n\n435\n00:20:30,800 --> 00:20:34,370\nYou define these applications which\nare collections of virtual machines.\n\n436\n00:20:34,370 --> 00:20:37,860\nIf any of you guys have watched\nthe episode we did on, what was it,\n\n437\n00:20:37,860 --> 00:20:40,070\nhighly available networking, the MLB.\n\n438\n00:20:40,070 --> 00:20:44,530\nI showed an example of an application\nin there where we had a web tier,\n\n439\n00:20:44,530 --> 00:20:48,560\na mid tier, and a database tier and\nthe web tier was highly scalable.\n\n440\n00:20:48,560 --> 00:20:51,240\nIn that episode, I showed how\nto use the network load balancer\n\n441\n00:20:51,240 --> 00:20:53,590\nto balance the traffic\nacross those web front ends,\n\n442\n00:20:53,590 --> 00:20:55,187\neven though we didn't know\nhow many there were gonna be.\n\n443\n00:20:56,578 --> 00:20:59,619\nSo, if you;re curious about those\napplications, jump over and\n\n444\n00:20:59,619 --> 00:21:02,952\ncheck that episode out,\nit's right here in the same show, 7414.\n\n445\n00:21:02,952 --> 00:21:03,892\nProbably, already watched it.\n\n446\n00:21:03,892 --> 00:21:05,120\n>> [LAUGH]\n>> So,\n\n447\n00:21:05,120 --> 00:21:07,180\nyou never know what order people go in.\n\n448\n00:21:08,220 --> 00:21:10,870\nSo, anyhow, that's what the app\ncontroller is designed for,\n\n449\n00:21:10,870 --> 00:21:13,680\nit is that self service portal.\n\n450\n00:21:13,680 --> 00:21:15,850\nIt does go beyond the old star system.\n\n451\n00:21:15,850 --> 00:21:18,530\nThe original one had these star ratings.\n\n452\n00:21:18,530 --> 00:21:20,834\nAnd so, every time somebody\ncreated a virtual machine,\n\n453\n00:21:20,834 --> 00:21:22,660\nit would cost them\na certain amount of stars.\n\n454\n00:21:22,660 --> 00:21:24,490\n>> [LAUGH]\n>> So, you'd set a quota.\n\n455\n00:21:24,490 --> 00:21:27,070\nI'd say like, Mike,\nyou have a quota of 20 stars.\n\n456\n00:21:27,070 --> 00:21:30,970\nAnd this virtual machine is gonna cost you\none and a half stars, and this one's gonna\n\n457\n00:21:30,970 --> 00:21:35,820\ncost you five, and so you could bring\nup whatever mixture you wanted.\n\n458\n00:21:35,820 --> 00:21:40,840\nIn the new one, you actually have\ncost credits, it's dollar bills.\n\n459\n00:21:40,840 --> 00:21:45,422\nYou can say, hey, when you run this\nvirtual machine, it's gonna cost you\n\n460\n00:21:45,422 --> 00:21:50,388\n$2.75 an hour, basically like Amazon\nweb services, or Microsoft Azure.\n\n461\n00:21:50,388 --> 00:21:54,069\nYou're setting your own pricing\nmodel inside of the SCVMM and\n\n462\n00:21:54,069 --> 00:21:55,920\nyou might give people credit.\n\n463\n00:21:55,920 --> 00:21:57,480\nYou're not actually charging them money,\n\n464\n00:21:57,480 --> 00:22:00,410\nbut that's how you throttle\nhow much they can run.\n\n465\n00:22:00,410 --> 00:22:02,650\nAnd that gives us that additional control.\n\n466\n00:22:02,650 --> 00:22:04,250\nSo, really neat stuff there.\n\n467\n00:22:04,250 --> 00:22:08,720\nYou can effectively run your\nown Microsoft Azure environment\n\n468\n00:22:08,720 --> 00:22:09,870\nin your own local network.\n\n469\n00:22:09,870 --> 00:22:13,390\nAnd that's why they call it a private\ncloud, as opposed to the public cloud.\n\n470\n00:22:14,910 --> 00:22:18,340\nSo, that's an optional component,\nthe system center app controller.\n\n471\n00:22:18,340 --> 00:22:19,725\nLet's see, what else do we have.\n\n472\n00:22:19,725 --> 00:22:23,780\nThe SCSM,\nthe system center service manager.\n\n473\n00:22:23,780 --> 00:22:26,130\nThat's one of the newer products\nin the system center and\n\n474\n00:22:26,130 --> 00:22:29,070\nit's designed for service management.\n\n475\n00:22:29,070 --> 00:22:32,230\nAnd what we mean by that is how\nyou actually run your business.\n\n476\n00:22:32,230 --> 00:22:36,040\nSo, it's got support ticketing\nsystems built into it and\n\n477\n00:22:36,040 --> 00:22:37,910\nit's got basic error handling.\n\n478\n00:22:37,910 --> 00:22:41,700\nSo, if an error is generated by a server,\none of the techs can acknowledge it and\n\n479\n00:22:41,700 --> 00:22:44,020\nstart working the problem,\nputting the notes in there.\n\n480\n00:22:44,020 --> 00:22:49,456\nAnd so, it's really a business\noperations type of application.\n\n481\n00:22:49,456 --> 00:22:54,930\nWell, it has self-service portals also,\nthat integrate with SharePoint.\n\n482\n00:22:54,930 --> 00:22:57,680\nSo, you team it up with\nMicrosoft SharePoint, and\n\n483\n00:22:57,680 --> 00:23:01,210\nyou can put\nthe System Center Service Manager.\n\n484\n00:23:01,210 --> 00:23:03,170\nYou can put its self service\nportals in SharePoint.\n\n485\n00:23:03,170 --> 00:23:06,590\nAnd users browse to SharePoint, and\nthey can open up support tickets.\n\n486\n00:23:06,590 --> 00:23:08,620\nBut they can also create\nvirtual machines and\n\n487\n00:23:08,620 --> 00:23:10,980\ndo all the other things that\nthe app controller can do.\n\n488\n00:23:10,980 --> 00:23:15,268\nThe app controller is just a self service\nportal for creating virtual machines, but\n\n489\n00:23:15,268 --> 00:23:20,440\nthe SCSM is a self service portal that\ncan do more than just virtual machines.\n\n490\n00:23:20,440 --> 00:23:22,110\nAnd it's embedded in SharePoint and\n\n491\n00:23:22,110 --> 00:23:26,360\nit uses entirely Silverlight,\nwhich frustrates the hell out of me.\n\n492\n00:23:26,360 --> 00:23:27,460\nBut it is a very good product.\n\n493\n00:23:27,460 --> 00:23:29,030\nIt's got a lot of that stuff in there.\n\n494\n00:23:29,030 --> 00:23:31,595\nAnd it's a viable alternative.\n\n495\n00:23:31,595 --> 00:23:35,873\nSo, that's another optional component\nwe might deploy with the SCVMM.\n\n496\n00:23:35,873 --> 00:23:39,927\nLet's see, SharePoint was the next one,\nwhich Goes hand in hand with SCSM.\n\n497\n00:23:39,927 --> 00:23:41,519\nSo, if you're gonna use the SCSM,\n\n498\n00:23:41,519 --> 00:23:44,080\nyou pretty much need a SharePoint\ndeployment behind it.\n\n499\n00:23:44,080 --> 00:23:47,990\nWDS, Windows Deployment Server.\n\n500\n00:23:47,990 --> 00:23:49,530\n>> Yeah,\nthat's a pretty good one to include,\n\n501\n00:23:49,530 --> 00:23:53,560\nespecially if you wanna try to automate or\nto roll out the Hyper-V host themselves.\n\n502\n00:23:53,560 --> 00:23:54,720\n>> That's the key.\n\n503\n00:23:54,720 --> 00:23:57,287\n>> One of those bare metal\ndeployments of your Hyper-V hosts.\n\n504\n00:23:57,287 --> 00:24:01,125\n>> Yeah, if you're talking about VMs\n>> You don't need WDS, right?\n\n505\n00:24:01,125 --> 00:24:02,700\n>> Mm-hm.\n>> You can create templates, and\n\n506\n00:24:02,700 --> 00:24:04,290\nyou can deploy right out of Hyper-V.\n\n507\n00:24:04,290 --> 00:24:07,720\nWDS, the Windows Deployment Service,\ndoesn't do much for you.\n\n508\n00:24:07,720 --> 00:24:11,143\nBut what if you want to\ndeploy a Hyper-V host?\n\n509\n00:24:11,143 --> 00:24:16,175\nYou've got a bare metal piece of hardware\nand you turn it on and it just sits there.\n\n510\n00:24:16,175 --> 00:24:16,940\n>> [LAUGH]\n>> So,\n\n511\n00:24:16,940 --> 00:24:21,000\nthere's no deploying a template to that,\nyou need to deploy an operating system.\n\n512\n00:24:21,000 --> 00:24:26,020\nAnd, in the past, that meant using SCCM,\nthe System Center Configuration Manager\n\n513\n00:24:26,020 --> 00:24:29,280\nbut, we could just use WDS,\nWindows Deployment Server, right.\n\n514\n00:24:29,280 --> 00:24:33,820\nWe could roll out a Hyper-V host OS\nright to that machine, have it come up.\n\n515\n00:24:33,820 --> 00:24:37,590\nAnd if we've done our preconfigs right,\nit can join right into a cluster.\n\n516\n00:24:37,590 --> 00:24:39,050\nAnd you can use this for dynamic scaling.\n\n517\n00:24:39,050 --> 00:24:43,000\nYou can scale out your\nclusters all on demand.\n\n518\n00:24:43,000 --> 00:24:44,940\nSo as you start adding\nmore virtual machines,\n\n519\n00:24:44,940 --> 00:24:46,410\nmaybe you'll run out of resources.\n\n520\n00:24:46,410 --> 00:24:49,130\nAnd you can have it\nautomatically add another host.\n\n521\n00:24:49,130 --> 00:24:49,890\nHow awesome is that?\n\n522\n00:24:49,890 --> 00:24:51,790\n>> That's pretty cool.\n>> If you got the hardware laying around.\n\n523\n00:24:51,790 --> 00:24:52,370\n>> Right.\n>> [LAUGH]\n\n524\n00:24:52,370 --> 00:24:53,760\n>> That's the little piece they\n\n525\n00:24:53,760 --> 00:24:54,640\ndon't mention.\n\n526\n00:24:54,640 --> 00:24:56,200\nIt's only so automatic.\n\n527\n00:24:56,200 --> 00:25:00,174\nIt doesn't buy the server and plug it\nin for you, you still have to do that.\n\n528\n00:25:00,174 --> 00:25:03,830\n>> [LAUGH]\n>> We can only ask so much.\n\n529\n00:25:03,830 --> 00:25:08,060\nAll right, WSUS,\nthe Windows Server Update Service.\n\n530\n00:25:08,060 --> 00:25:12,630\nNow WSUS you probably already have in\nyour environment for your normal servers.\n\n531\n00:25:12,630 --> 00:25:16,710\nSo when I mention it here, I'm actually\nsaying you might choose to have\n\n532\n00:25:16,710 --> 00:25:21,490\na dedicated WSUS just for your\nvirtualization environment, all right?\n\n533\n00:25:21,490 --> 00:25:25,520\nAnd that's because of the update\nbaseline feature in Hyper-V.\n\n534\n00:25:25,520 --> 00:25:28,920\nWe can actually set these\nupdate baselines in the SCVMM\n\n535\n00:25:28,920 --> 00:25:33,510\nwhere it will intelligently apply\nthe updates to each of your hosts.\n\n536\n00:25:33,510 --> 00:25:37,950\nYou don't want WSUS to update your hosts,\nbecause it doesn't know about the VMs.\n\n537\n00:25:37,950 --> 00:25:41,680\nSo when it reboots a host for\nan update, it's gonna do a save state\n\n538\n00:25:41,680 --> 00:25:44,910\non all your VMs, and do the reboot,\nall your virtual machines will go offline.\n\n539\n00:25:45,940 --> 00:25:50,270\nBut the SCVMM knows about your cluster,\nif you've got one.\n\n540\n00:25:50,270 --> 00:25:54,450\nAnd so it'll move the VMs to another host,\nreboot the host, and\n\n541\n00:25:54,450 --> 00:25:55,470\nthen move the VMs back.\n\n542\n00:25:55,470 --> 00:25:57,120\nIt's intelligent about it, right?\n\n543\n00:25:57,120 --> 00:25:59,110\nAnd so that's what you want to do.\n\n544\n00:25:59,110 --> 00:26:02,000\nAnd it's best to have\na dedicated WSUS server so\n\n545\n00:26:02,000 --> 00:26:06,160\nthat you can have just the Hyper-V updates\non there and you can control it and not\n\n546\n00:26:06,160 --> 00:26:09,680\nget it bogged down like you would on your\nmain WSUS that's servicing everyone else.\n\n547\n00:26:09,680 --> 00:26:12,000\nAll right, so\nthat's another optional component.\n\n548\n00:26:13,150 --> 00:26:17,580\nAnd the last one that I've got is\nthe Systems Center Operations Manager.\n\n549\n00:26:19,050 --> 00:26:24,020\nIf we wanna use the PRO tips in\nthe SCVMM that's the Performance and\n\n550\n00:26:24,020 --> 00:26:26,160\nResource Optimization tips.\n\n551\n00:26:26,160 --> 00:26:29,086\nIf you wanna use the PRO tips in\nthe SCVMM you've gotta have SCOM.\n\n552\n00:26:29,086 --> 00:26:33,230\nSystem Center Operations Manager does\nall the performance monitoring, and\n\n553\n00:26:33,230 --> 00:26:34,840\nreports that back to the SCVMM.\n\n554\n00:26:34,840 --> 00:26:37,050\nSo it can do the placement\nrecommendations and\n\n555\n00:26:37,050 --> 00:26:39,790\nother optimization tips,\nthat are part of PRO tips.\n\n556\n00:26:39,790 --> 00:26:40,520\nAll right.\n\n557\n00:26:40,520 --> 00:26:43,720\nIf you don't have SCOM There's a PRO Tips\nbutton, but it doesn't do anything.\n\n558\n00:26:43,720 --> 00:26:45,370\nIt sits there, right?\n\n559\n00:26:45,370 --> 00:26:48,390\nSo keep that in mind, if you want\nthat functionality, you'll need it.\n\n560\n00:26:48,390 --> 00:26:52,740\nA lot of people used SCOM to\ndo the dynamic movement or\n\n561\n00:26:52,740 --> 00:26:56,110\nleveling of virtual machines based\non resource utilization, but\n\n562\n00:26:56,110 --> 00:27:01,167\nin the SCVMM 2012R2, we have this new\nfeature called dynamic optimization, DO.\n\n563\n00:27:02,240 --> 00:27:05,280\nAnd it does the same thing without SCOM.\n\n564\n00:27:05,280 --> 00:27:08,250\nAnd so that's not really\na reason to have SCOM anymore.\n\n565\n00:27:08,250 --> 00:27:12,500\nSo it really does come down to if you\nneed placement recommendations and\n\n566\n00:27:12,500 --> 00:27:16,360\njust enhanced performance monitoring\nof your hosts then you need SCOM so\n\n567\n00:27:16,360 --> 00:27:18,680\nit's an optional component.\n\n568\n00:27:18,680 --> 00:27:19,900\nSo, a lot of optional stuff,\n\n569\n00:27:19,900 --> 00:27:24,430\na lot of things that we can tack on\nthe the SCVMM product if we want to, but\n\n570\n00:27:24,430 --> 00:27:28,980\nthe base product itself as you do your\ndesign, remember database server,\n\n571\n00:27:28,980 --> 00:27:34,950\nSCVMM server, SCVMM library, and it's very\ncommon to have multiple SCVMM libraries.\n\n572\n00:27:34,950 --> 00:27:37,830\nThat's how we improve performance there,\nyou add more libraries, right.\n\n573\n00:27:37,830 --> 00:27:39,910\nThey're really just like a server\nwith a shared folder, but\n\n574\n00:27:39,910 --> 00:27:42,780\nthey do run part of the SCVMM on it.\n\n575\n00:27:42,780 --> 00:27:48,360\nThe SCVMM server itself is a web\nserver and data engine in the backend.\n\n576\n00:27:48,360 --> 00:27:52,980\nAnd that one, we normally put on\na cluster to increase its performance.\n\n577\n00:27:52,980 --> 00:27:55,930\nAnd then the database on the backend,\nthat's gonna be on Microsoft Sequel.\n\n578\n00:27:55,930 --> 00:27:58,380\nYou can stick that on\na cluster if you want.\n\n579\n00:27:58,380 --> 00:28:01,890\nOr you can do other types of\nreplications in SQL to handle that.\n\n580\n00:28:01,890 --> 00:28:05,080\nSo, like\nthe AlwaysOn Availability Groups and\n\n581\n00:28:05,080 --> 00:28:08,260\nthose other features in SQL\nthat you can use for it too.\n\n582\n00:28:08,260 --> 00:28:10,840\nSo, slightly different ways to\nexpand each tier of that model.\n\n583\n00:28:12,840 --> 00:28:16,290\nAll right, so that should be it.\n\n584\n00:28:16,290 --> 00:28:19,040\nI just kind of threw a few other\nlittle notes, but typically for\n\n585\n00:28:19,040 --> 00:28:22,850\nmost environments a single\nSCVMM server is enough.\n\n586\n00:28:22,850 --> 00:28:26,000\nMicrosoft says that should be enough\nto handle about 1500 hosts and\n\n587\n00:28:26,000 --> 00:28:30,250\nthat's a lot, that's a lot of hosts.\n\n588\n00:28:30,250 --> 00:28:31,460\n>> That's a lot.\n\n589\n00:28:31,460 --> 00:28:33,830\nYeah.\n>> If you've got more than that though,\n\n590\n00:28:33,830 --> 00:28:39,233\nunfortunately with the SCVMM it can\nscale up but it can't scale out.\n\n591\n00:28:39,233 --> 00:28:43,280\nSo that SCVMM server, if I stick it on\na cluster, I can start increasing it's\n\n592\n00:28:43,280 --> 00:28:47,160\nredundancy and reliability, give it access\nto more resources, but if it's getting\n\n593\n00:28:47,160 --> 00:28:51,502\nburdened, I can't have two SCVMM servers\nand load balance, it doesn't support that.\n\n594\n00:28:51,502 --> 00:28:56,400\nAll right, so if the performance of one\nserver starts to get a little bogged down,\n\n595\n00:28:56,400 --> 00:28:59,750\nunfortunately, the solution is to add a\nsecond one which is a completely separate\n\n596\n00:28:59,750 --> 00:29:01,220\nenvironment from the first one.\n\n597\n00:29:01,220 --> 00:29:06,300\n>> So if you hit that 1500 host mark\nyou might decide to go ahead and\n\n598\n00:29:06,300 --> 00:29:10,210\ndivide and say 750 are on this SCVMM and\n750 are on this other one.\n\n599\n00:29:10,210 --> 00:29:11,220\nAnd start to divide.\n\n600\n00:29:11,220 --> 00:29:13,300\nYou lose that centralized management.\n\n601\n00:29:13,300 --> 00:29:16,360\nSo, Microsoft does some things coming in\nthe future that will hopefully fix that\n\n602\n00:29:16,360 --> 00:29:17,981\nbut for\nright now that's kind of how it is.\n\n603\n00:29:17,981 --> 00:29:24,081\nAll right, well, that's probably\na good spot to stop right there and,\n\n604\n00:29:24,081 --> 00:29:27,387\nyeah let's stop here and take a break.\n\n605\n00:29:27,387 --> 00:29:32,141\nAnd when we get back we're gonna talk\nabout sizing our servers for the SCVMM so\n\n606\n00:29:32,141 --> 00:29:34,641\nstay tuned, we'll be back after this.\n\n607\n00:29:34,641 --> 00:29:37,982\n[SOUND] All right,\n\n608\n00:29:37,982 --> 00:29:43,336\nwelcome back, everybody.\n\n609\n00:29:43,336 --> 00:29:46,970\nSo in this segment, I wanna take\na look at some of the minimum, well,\n\n610\n00:29:46,970 --> 00:29:50,545\nnot the minimum requirements\ncuz that's kinda worthless.\n\n611\n00:29:50,545 --> 00:29:54,445\nI want to talk about the sizing\nwe need to do of our\n\n612\n00:29:54,445 --> 00:29:56,660\nphysical servers to support the SCVMM.\n\n613\n00:29:56,660 --> 00:29:59,400\nSo if you're gonna be deploying\nthese servers, the components I\n\n614\n00:29:59,400 --> 00:30:03,680\ntalked about in the first segment, what\nkind of hardware do we need to back it?\n\n615\n00:30:03,680 --> 00:30:07,570\nAnd remember I said Microsoft kind of\ndraws that line at 150 hosts as far as\n\n616\n00:30:07,570 --> 00:30:11,080\nwhen you're going from,\nfrom the minor leagues to the big leagues?\n\n617\n00:30:11,080 --> 00:30:14,330\nSo, we've really got two sets of numbers.\n\n618\n00:30:14,330 --> 00:30:17,070\nLet's start with our SCVMM server itself.\n\n619\n00:30:17,070 --> 00:30:20,210\nNow remember the SCVMM server\nis running the web interface and\n\n620\n00:30:20,210 --> 00:30:23,720\nthe management console, the little engine\nthat's actually doing all the work for\n\n621\n00:30:23,720 --> 00:30:26,660\nthe SCVMM, not the database, right.\n\n622\n00:30:26,660 --> 00:30:30,990\nSo, this is mainly the engine and for\nit if you've got less than 150 hosts,\n\n623\n00:30:30,990 --> 00:30:34,020\nright actual Hyper-V hosts.\n\n624\n00:30:34,020 --> 00:30:37,660\nThen what they recommend is that you have\na dual-core CPU, which I don't even think\n\n625\n00:30:37,660 --> 00:30:40,570\nyou can buy single-core CPU's anymore,\nso that's not normally a big deal.\n\n626\n00:30:41,640 --> 00:30:44,961\nFour gigs of RAM and\nthat's four gigs of RAM for the SCVMM, so\n\n627\n00:30:44,961 --> 00:30:49,001\nyour underlying host OS and any other\napplications you might choose to run\n\n628\n00:30:49,001 --> 00:30:51,824\non the server might require\nthat to bump up higher.\n\n629\n00:30:51,824 --> 00:30:56,251\nSo you may need to have eight gigs, or\nwhatever to actually cover that, but\n\n630\n00:30:56,251 --> 00:31:00,930\nfour gigs of RAM available for SCVMM and\nat least 50 GB of hard drive space.\n\n631\n00:31:00,930 --> 00:31:06,690\nThe actual SCVMM install,\nit isn't really even close to 50 gigs.\n\n632\n00:31:06,690 --> 00:31:07,410\nRight, is it?\n\n633\n00:31:07,410 --> 00:31:08,870\nOh did I read the wrong number?\n\n634\n00:31:08,870 --> 00:31:09,833\nDad gum it Mike why do you\nlet me do those things?\n\n635\n00:31:09,833 --> 00:31:13,265\n>> [LAUGH]\n>> 40 gigs, sorry, 40 gigs of space.\n\n636\n00:31:13,265 --> 00:31:16,666\nAgain, the actual install is really\njust a small portion of that.\n\n637\n00:31:16,666 --> 00:31:20,070\nBut the SCVMM will generate all\nsorts of temporary files as it's\n\n638\n00:31:20,070 --> 00:31:23,600\ncopying virtual machines,\nespecially when you're doing P2V,\n\n639\n00:31:23,600 --> 00:31:27,147\nand that's why they have that\nlarger space requirement for that.\n\n640\n00:31:27,147 --> 00:31:30,517\nAll right?\nSo if you're going to be doing P2V of even\n\n641\n00:31:30,517 --> 00:31:34,504\nlarger VMs, Then you may need\neven more space than that.\n\n642\n00:31:34,504 --> 00:31:35,183\n>> Right.\n>> So this\n\n643\n00:31:35,183 --> 00:31:37,810\nis kind of what we set\nas our regular spec.\n\n644\n00:31:37,810 --> 00:31:40,530\nNow the minimum requirements\nare actually lower than that right,\n\n645\n00:31:40,530 --> 00:31:43,300\nthose numbers I just said\nare their recommended.\n\n646\n00:31:43,300 --> 00:31:46,590\nWhich you never want to mess with\nthe minimums, those are not.\n\n647\n00:31:46,590 --> 00:31:49,210\n>> Yeah, you look at a minimum,\nyeah sure, you can get it installed,\n\n648\n00:31:49,210 --> 00:31:51,020\nyou can maybe use it, right?\n\n649\n00:31:51,020 --> 00:31:52,100\nYou're not going to be really happy.\n\n650\n00:31:52,100 --> 00:31:53,360\n>> It'll be slow as a dog.\n\n651\n00:31:53,360 --> 00:31:53,894\n>> Right.\n>> And yeah,\n\n652\n00:31:53,894 --> 00:31:55,510\nyou can't really run\nanything else on there.\n\n653\n00:31:55,510 --> 00:31:56,900\n>> Yeah.\n>> So, that's for\n\n654\n00:31:56,900 --> 00:31:59,025\nthe SCVMM server in a small environment.\n\n655\n00:31:59,025 --> 00:32:01,820\n>> Mm-hm, then as we get\ninto our larger environment,\n\n656\n00:32:01,820 --> 00:32:04,330\nonce we start getting past\nthat magic number, past 150,\n\n657\n00:32:04,330 --> 00:32:09,000\nwe're gonna up those numbers a little bit,\nwe're gonna hit that dual core CPU.\n\n658\n00:32:09,000 --> 00:32:12,790\nFor RAM, not too much of an increase,\nwe'll go up to five gigabytes for\n\n659\n00:32:12,790 --> 00:32:16,681\nRAM, and then 50 gigabytes worth\nof that hard drive space, yeah.\n\n660\n00:32:16,681 --> 00:32:21,470\n>> Mm-hm, now you might ask yourself,\nwhy only go to five gigs of RAM?\n\n661\n00:32:21,470 --> 00:32:25,320\nWe were at four, now we only go to five,\nwhat's that all about?\n\n662\n00:32:25,320 --> 00:32:27,398\nWell, remember that when\nwe have a ton of hosts,\n\n663\n00:32:27,398 --> 00:32:29,640\nit's really the database\nthat's getting bigger.\n\n664\n00:32:29,640 --> 00:32:31,690\n>> Yeah.\n>> We're still running the same queries,\n\n665\n00:32:31,690 --> 00:32:34,360\nwe're just getting a slightly\nlarger result and setback, and\n\n666\n00:32:34,360 --> 00:32:37,010\nthat's why it's not such\na big jump on that one.\n\n667\n00:32:37,010 --> 00:32:40,640\nBut it is important to note that extra\namount of memory you'll need when you bump\n\n668\n00:32:40,640 --> 00:32:41,610\nup over that amount of hosts.\n\n669\n00:32:42,740 --> 00:32:45,100\nAll right, so let's talk about\nthat data base server, right?\n\n670\n00:32:45,100 --> 00:32:47,270\nThe database server is probably\nthe more sensitive one,\n\n671\n00:32:47,270 --> 00:32:51,600\nbecause databases in general require some\nspecial love when it comes to hardware.\n\n672\n00:32:51,600 --> 00:32:53,720\n>> Right.\n>> So if you have one to 150 hosts,\n\n673\n00:32:53,720 --> 00:32:58,710\nright, if you're below that 150 limit,\ndual-core CPU again, right?\n\n674\n00:32:58,710 --> 00:33:02,210\nFour gigs of RAM, and\n50 gigs of hard drive space,\n\n675\n00:33:02,210 --> 00:33:03,820\nthat's where my 50 gigs came from.\n\n676\n00:33:03,820 --> 00:33:04,446\n>> Yeah.\n[LAUGH]\n\n677\n00:33:04,446 --> 00:33:06,018\n>> So 50 gigs of hard drive space right\n\n678\n00:33:06,018 --> 00:33:07,290\nthere for handling that, right?\n\n679\n00:33:07,290 --> 00:33:11,590\nAnd on this one, the 50 gigs, well your\ndata base is gonna grow as you add\n\n680\n00:33:11,590 --> 00:33:15,281\nvirtual machines, ISO's,\nall the various things the SCVMM tracks.\n\n681\n00:33:15,281 --> 00:33:17,970\nAnd so,\neven though you've only got 150 hosts,\n\n682\n00:33:17,970 --> 00:33:20,810\nyou could have a couple thousand objects.\n\n683\n00:33:20,810 --> 00:33:24,600\nAnd it's tracking all of that as well as\nsome performance metrics, reports, and\n\n684\n00:33:24,600 --> 00:33:27,660\na ton of stuff, it needs some space,\nit needs some room to grow.\n\n685\n00:33:27,660 --> 00:33:31,145\n>> It does, and then once we get past that\nmagic number again, we get it up past that\n\n686\n00:33:31,145 --> 00:33:34,479\n150, we're gonna double the amount\nof RAM on this database server, and\n\n687\n00:33:34,479 --> 00:33:36,518\nwe're gonna try to jump\nup to eight GB of RAM.\n\n688\n00:33:36,518 --> 00:33:39,440\nHard drive, space-wise,\ngonna be 75 GB for that.\n\n689\n00:33:41,430 --> 00:33:43,780\n>> Yeah, so now on this one you\ncan see it's a sizable jump.\n\n690\n00:33:43,780 --> 00:33:45,320\nWhen we cross that line,\n\n691\n00:33:45,320 --> 00:33:49,390\nit's a big jump because the database\nis the one doing the real work.\n\n692\n00:33:49,390 --> 00:33:53,310\nIf SCVMM is slow for you, it's almost\nalways a result of the database,\n\n693\n00:33:53,310 --> 00:33:54,330\nunless it's a job, right?\n\n694\n00:33:54,330 --> 00:33:57,842\nIf a job's running slow, that's the SEV,\nand then that's at fault.\n\n695\n00:33:57,842 --> 00:33:59,510\nBut if just pulling up the screens,\n\n696\n00:33:59,510 --> 00:34:02,970\nif that's running slow, it's usually\nyour database that's that bottleneck.\n\n697\n00:34:02,970 --> 00:34:05,616\n>> Yeah, and that's one of the keys for\nperformance, is making sure we've\n\n698\n00:34:05,616 --> 00:34:08,059\ngot a good connection, a good,\nfast connection to that database.\n\n699\n00:34:09,540 --> 00:34:10,460\n>> Now, the library servers,\n\n700\n00:34:10,460 --> 00:34:13,490\nthose are the ones that I mentioned you're\ngonna have more than one of, right?\n\n701\n00:34:13,490 --> 00:34:16,570\nYou're gonna place these geographically\nclose to the hosts where you're\n\n702\n00:34:16,570 --> 00:34:17,850\ndeploying VMs.\n\n703\n00:34:17,850 --> 00:34:21,550\nAnd the library server is really\njust a glorified file server.\n\n704\n00:34:21,550 --> 00:34:26,200\nSo, it's not doing anything crazy,\nor amazing, it's just a file server.\n\n705\n00:34:26,200 --> 00:34:29,509\n>> Yeah, and the real big thing is VMM\ngets to index all those resources that\n\n706\n00:34:29,509 --> 00:34:31,028\nwe're storing in that library so\n\n707\n00:34:31,028 --> 00:34:33,430\nwe can get that fast access\nto them when we need them.\n\n708\n00:34:34,460 --> 00:34:37,540\n>> So, on this one,\nwe don't have a high and a low.\n\n709\n00:34:37,540 --> 00:34:41,090\nThere's not a difference based on\nwhether you have under 150 or over 150,\n\n710\n00:34:41,090 --> 00:34:42,780\nwe just have one set of specs,\nright, Mike?\n\n711\n00:34:42,780 --> 00:34:47,770\n>> Yeah, and you're gonna want that\ndual core CPU, couple gigs of RAM.\n\n712\n00:34:47,770 --> 00:34:51,350\nAnd then the disk space, really kind of\nhard to put a predefined number on it.\n\n713\n00:34:51,350 --> 00:34:53,450\nIt's going to be,\nwhat are you putting in there?\n\n714\n00:34:53,450 --> 00:34:57,870\nAre you storing all your ISOs in there,\nare you storing VHDs,\n\n715\n00:34:57,870 --> 00:35:00,740\nare you creating templates, and\nthen how big are those templates?\n\n716\n00:35:00,740 --> 00:35:03,520\nIf you've got one or two templates\nmaybe you don't need a bunch of space.\n\n717\n00:35:03,520 --> 00:35:06,190\nIf you've got dozens of templates and\nhundreds of ISOs or\n\n718\n00:35:06,190 --> 00:35:10,260\nsomething like that, now we're talking\na lot more disk space to store all that.\n\n719\n00:35:10,260 --> 00:35:13,090\n>> And keep in mind that\nthe libraries don't synchronize.\n\n720\n00:35:13,090 --> 00:35:17,180\nIf you've got ten libraries,\nthat's ten independent libraries.\n\n721\n00:35:17,180 --> 00:35:20,060\nYou can copy the same stuff to\nall of them if you want and\n\n722\n00:35:20,060 --> 00:35:23,810\nthey can all be the same size,\nbut it's not normally necessary.\n\n723\n00:35:23,810 --> 00:35:27,150\nYou normally have certain VM's that\nyou need in certain places and\n\n724\n00:35:27,150 --> 00:35:30,960\nyou copy just those out to those\nlibraries, or certain ISOs, or whatever.\n\n725\n00:35:30,960 --> 00:35:34,400\nSo your headquarters library\nmight be massive, but\n\n726\n00:35:34,400 --> 00:35:37,210\none out at the branch might be very small.\n\n727\n00:35:37,210 --> 00:35:39,240\nSo the disc space\nrequirements vary there also,\n\n728\n00:35:39,240 --> 00:35:42,810\nyou just plan based on the amount\nof data you're sticking in there.\n\n729\n00:35:42,810 --> 00:35:46,755\nSo pretty straight forward on that one,\nall right?\n\n730\n00:35:46,755 --> 00:35:52,400\nNow if our environment grows really large,\nI mentioned that\n\n731\n00:35:52,400 --> 00:35:58,890\nif you cross that 1,500 host limit, we're\nreally gonna exceed what SCVMM can handle.\n\n732\n00:35:58,890 --> 00:36:03,290\nAnd when that happens we have to go\nto multiple SCVMM servers, all right?\n\n733\n00:36:03,290 --> 00:36:04,916\nNow, I said that there's\nno way to connect them.\n\n734\n00:36:04,916 --> 00:36:07,720\nI want to double-back on that\nstatement just real quick cuz\n\n735\n00:36:07,720 --> 00:36:11,145\nthere is actually one way to connect them,\nit's just not through SCVMM.\n\n736\n00:36:11,145 --> 00:36:12,290\n>> Right.\n\n737\n00:36:12,290 --> 00:36:17,980\n>> If you're using the System Center\nServices Manager, the SCSM, it has those\n\n738\n00:36:17,980 --> 00:36:24,200\nself service portals, and it can actually\nfront end more than one SCVMM, all right?\n\n739\n00:36:24,200 --> 00:36:26,490\nYour administrators,\nthey're kinda out of luck,\n\n740\n00:36:26,490 --> 00:36:28,990\nthey're gonna know that\nthere's more than one SCVMM.\n\n741\n00:36:28,990 --> 00:36:30,990\nBut you can mask it from your end users.\n\n742\n00:36:30,990 --> 00:36:33,950\nSo it's not really connecting\nthe systems together,\n\n743\n00:36:33,950 --> 00:36:37,040\nit's just hiding the fact that there's\nmore than one system from your end user.\n\n744\n00:36:37,040 --> 00:36:41,530\nSo I just wanted to add that little caveat\non in case one of you is shouting at\n\n745\n00:36:41,530 --> 00:36:43,682\nthe screen right now going,\nwell Don this is what I do in my work.\n\n746\n00:36:43,682 --> 00:36:45,193\n>> [LAUGH]\n>> You're absolutely right,\n\n747\n00:36:45,193 --> 00:36:46,090\nso you can use it to do that.\n\n748\n00:36:46,090 --> 00:36:48,670\n>> Right, right, mm-hm.\n\n749\n00:36:48,670 --> 00:36:52,840\n>> Now when it comes to the libraries,\nwe're throwing our data out onto them,\n\n750\n00:36:52,840 --> 00:36:57,790\nand if you want to make them redundant,\nI don't think I mentioned this earlier.\n\n751\n00:36:57,790 --> 00:36:59,320\nI said if you wanted to\nincrease performance,\n\n752\n00:36:59,320 --> 00:37:01,110\nyou just add more than one library, right?\n\n753\n00:37:01,110 --> 00:37:04,399\nBut if you wanna make them redundant,\nit is a cluster-enabled service,\n\n754\n00:37:04,399 --> 00:37:05,910\na cluster-aware service.\n\n755\n00:37:05,910 --> 00:37:10,740\nSo you can create the SCVMM library\non a Microsoft failover cluster, and\n\n756\n00:37:10,740 --> 00:37:12,239\nit'd be a clustered resource,\nso you can do that.\n\n757\n00:37:13,960 --> 00:37:16,650\nAll right, now let's talk about a little\nbit about the contents of the library.\n\n758\n00:37:16,650 --> 00:37:20,090\nSo we've already talked about all the\nvarious things that we can have in there.\n\n759\n00:37:20,090 --> 00:37:23,680\nEach library is independent, so\n\n760\n00:37:23,680 --> 00:37:28,340\nif I have an ISO for\nWindows Server 2012 R2 standard edition.\n\n761\n00:37:28,340 --> 00:37:31,450\nAnd this is the ISO I usually\nwant to install new OSs,\n\n762\n00:37:31,450 --> 00:37:35,240\nand I pretty much need it everywhere,\nso I copy it to all of my libraries.\n\n763\n00:37:35,240 --> 00:37:39,280\nIf I have ten library servers, I just\ncopy that ISO to ten different places.\n\n764\n00:37:40,560 --> 00:37:45,820\nInside of the SCVMM's database, it's\ntracking that as ten different objects,\n\n765\n00:37:45,820 --> 00:37:48,150\neach one is unique and different.\n\n766\n00:37:49,400 --> 00:37:52,230\nEven though we know it's the exact\nsame file, it's just one ISO,\n\n767\n00:37:52,230 --> 00:37:53,290\nsame checksum, right.\n\n768\n00:37:53,290 --> 00:37:54,811\nExact same unless we broke it.\n\n769\n00:37:54,811 --> 00:37:56,170\n[LAUGH]\n>> [LAUGH]\n\n770\n00:37:56,170 --> 00:37:57,080\n>> So we assume\n\n771\n00:37:57,080 --> 00:37:59,190\nthat it's going to be the same file,\nright?\n\n772\n00:37:59,190 --> 00:38:03,480\nWell, if we want,\nwe can go into the SCVMM, and\n\n773\n00:38:03,480 --> 00:38:07,970\nwe can flag that as what's\ncalled an equivalent object.\n\n774\n00:38:07,970 --> 00:38:10,060\nAn equivalent object is\nwhere we tell the SCVMM,\n\n775\n00:38:10,060 --> 00:38:11,260\nhey these aren't two separate things.\n\n776\n00:38:11,260 --> 00:38:14,520\nThis is actually the same thing,\nI just got it in two places, all right?\n\n777\n00:38:14,520 --> 00:38:18,390\nYou don't have to do it, it doesn't\nmake a difference performance wise or\n\n778\n00:38:18,390 --> 00:38:24,524\nanything like that, but\nwhat it does is two things.\n\n779\n00:38:24,524 --> 00:38:28,420\nOne, it saves you from making a mistake,\nall right?\n\n780\n00:38:28,420 --> 00:38:29,980\nThere's a mistake that\nI make all the time.\n\n781\n00:38:29,980 --> 00:38:33,341\nI'll have a virtual machine deployed\nout at a branch or something, and\n\n782\n00:38:33,341 --> 00:38:37,390\nI will take it, and I'll clone it so\n\n783\n00:38:37,390 --> 00:38:41,340\nI can deploy it at the home office, so\nthat I can run some tests on it, okay?\n\n784\n00:38:41,340 --> 00:38:42,870\nI'll deploy it at the home office,\nand then it won't boot,\n\n785\n00:38:42,870 --> 00:38:45,447\nand it'll throw an error saying\none of the media is missing.\n\n786\n00:38:45,447 --> 00:38:47,616\nAnd I'll look, and I'll be like aw, crap.\n\n787\n00:38:47,616 --> 00:38:49,640\nSo, b ack on the original server,\n\n788\n00:38:49,640 --> 00:38:54,060\nit had an ISO mounted in the drive,\nand I didn't unmount it first.\n\n789\n00:38:54,060 --> 00:38:56,992\nAnd I grabbed that machine, and\nI brought it up to headquarters, and\n\n790\n00:38:56,992 --> 00:38:58,800\nI brought it in, and\nnow it's looking for that ISO image.\n\n791\n00:38:58,800 --> 00:39:00,650\nAnd it doesn't have it available\nup here at headquarters,\n\n792\n00:39:00,650 --> 00:39:02,730\nit can't reach out to the branch and\nget it, right?\n\n793\n00:39:02,730 --> 00:39:05,410\nSo it just dies out, it makes a mistake.\n\n794\n00:39:05,410 --> 00:39:08,210\nIf I have the equivalent object set up,\nand that equivalent object is there at\n\n795\n00:39:08,210 --> 00:39:11,250\nheadquarters also, it'll just\nconnect to the one at headquarters.\n\n796\n00:39:11,250 --> 00:39:13,720\nIt'll say this is the same thing\nright here, I'll just connect to it.\n\n797\n00:39:13,720 --> 00:39:18,530\nAnd then we boot up just fine, so it kinda\nsaves us from making that mistake, right?\n\n798\n00:39:18,530 --> 00:39:21,720\nThe other area where it really helps\nthough, is not when it's a mistake, but\n\n799\n00:39:21,720 --> 00:39:22,307\nwhen it's on purpose.\n\n800\n00:39:22,307 --> 00:39:24,248\n>> Mm-hm.\n>> If you have a multi-site cluster,\n\n801\n00:39:24,248 --> 00:39:26,959\nif you've got Hyper-V at\nyour headquarters, and\n\n802\n00:39:26,959 --> 00:39:29,997\nyou've got Hyper-V at your\ndisaster recovery center.\n\n803\n00:39:29,997 --> 00:39:34,647\nAnd you have a virtual machine that's a\ncluster resource, a roll in your cluster,\n\n804\n00:39:34,647 --> 00:39:39,360\nand it fails over from your headquarters\nto your disaster recovery center.\n\n805\n00:39:39,360 --> 00:39:42,770\nWhen it fails over to the other side,\nit needs the access to the things it had\n\n806\n00:39:42,770 --> 00:39:45,800\naccess to in headquarters, which\nwould include things like ISO images.\n\n807\n00:39:45,800 --> 00:39:49,560\nAnd if you've got applications that you\ndeploy that include various templates,\n\n808\n00:39:49,560 --> 00:39:51,390\nthey need access to those templates.\n\n809\n00:39:51,390 --> 00:39:53,790\nAnd if headquarters is gone,\nthe templates are gone.\n\n810\n00:39:53,790 --> 00:39:56,800\nBut by using the equivalent objects flag,\nyou can say well,\n\n811\n00:39:56,800 --> 00:39:59,080\nyou can grab it from over here or\nover here or over here.\n\n812\n00:39:59,080 --> 00:40:03,250\nSo we've got ten copies of the same ISO,\nyou need to flag them as an equivalent\n\n813\n00:40:03,250 --> 00:40:04,950\nobject so that they'll know\nthat they're all the same.\n\n814\n00:40:06,050 --> 00:40:08,660\nOtherwise, the default functionality\nis they're independent.\n\n815\n00:40:08,660 --> 00:40:12,110\nFortunately it's real easy to do,\nalthough you do have to do it.\n\n816\n00:40:12,110 --> 00:40:14,020\nThere's no way to make it automatic,\nso I guess there's that.\n\n817\n00:40:14,020 --> 00:40:14,710\n>> Right.\nYeah.\n\n818\n00:40:14,710 --> 00:40:16,261\n>> So\nthere's no may I know how to make it,\n\n819\n00:40:16,261 --> 00:40:18,574\nI'm sure you can do some\nPowerShell script or something.\n\n820\n00:40:18,574 --> 00:40:19,527\n>> Do some kinda script or\nsomething, yeah, maybe.\n\n821\n00:40:19,527 --> 00:40:20,728\n>> Hatch on a file name, I don't know.\n\n822\n00:40:20,728 --> 00:40:22,075\n>> Look at a Hatch as you compare them or\nsomething.\n\n823\n00:40:22,075 --> 00:40:24,565\n>> You should write that, Mike.\n\n824\n00:40:24,565 --> 00:40:25,910\n>> Yeah, I'll get right on that.\n\n825\n00:40:25,910 --> 00:40:28,865\n[LAUGH]\n>> We'll file that away under things that\n\n826\n00:40:28,865 --> 00:40:30,535\naren't gonna happen.\n\n827\n00:40:30,535 --> 00:40:34,025\nLet me show you guys really quick\nhow to mark something as equivalent.\n\n828\n00:40:34,025 --> 00:40:35,785\nIt's pretty straight forward.\n\n829\n00:40:35,785 --> 00:40:38,875\nHere I am in\nthe SCVMM Administration Console.\n\n830\n00:40:38,875 --> 00:40:41,625\nNormally we're looking under VMs and\nServices, and\n\n831\n00:40:41,625 --> 00:40:44,980\nwe've seen this in other episodes\nwhere we've used the SCVMM.\n\n832\n00:40:44,980 --> 00:40:49,138\nBut if I go down here to Library, inside\nof my library I can see things like my\n\n833\n00:40:49,138 --> 00:40:51,844\ntemplates and\nother objects that are out there.\n\n834\n00:40:51,844 --> 00:40:54,166\nLike here,\nI'll look at these Application Frameworks.\n\n835\n00:40:54,166 --> 00:40:57,231\nSo here are some of the Application\nFrameworks that I've got, and\n\n836\n00:40:57,231 --> 00:40:59,820\nnotice how each one of them\nhas a Library Server listed.\n\n837\n00:41:01,620 --> 00:41:04,490\nIf I had this template right here,\n\n838\n00:41:04,490 --> 00:41:09,660\ndeployed on more than one library server,\nit would show up here more than one time.\n\n839\n00:41:09,660 --> 00:41:12,570\nAnd each one would just have\na different library server.\n\n840\n00:41:12,570 --> 00:41:16,083\nTo make them equivalent,\nall you have to do is highlight them.\n\n841\n00:41:16,083 --> 00:41:19,257\nYou can use Shift or\nyou can Ctrl + click or whatever.\n\n842\n00:41:19,257 --> 00:41:21,849\nAnd you highlight the different\nones that you've got,\n\n843\n00:41:21,849 --> 00:41:24,674\nand then you'll see this\nMark Equivalent button lights up.\n\n844\n00:41:24,674 --> 00:41:28,571\nNow it doesn't make any sense to do it on\nthe same server like I've got it here, but\n\n845\n00:41:28,571 --> 00:41:32,090\nif you've got more than one library\nserver, it absolutely makes sense.\n\n846\n00:41:32,090 --> 00:41:35,457\nAnd then you just go up here and\nhit Mark Equivalent.\n\n847\n00:41:35,457 --> 00:41:39,205\nThis one would generate an error for\nme if I wasn't careful.\n\n848\n00:41:39,205 --> 00:41:42,425\nBut you basically specify\nwhat this was tied to, and\n\n849\n00:41:42,425 --> 00:41:46,520\nrelease number, and\nthe different paths would show up here.\n\n850\n00:41:46,520 --> 00:41:49,715\nAnd then we'd be able to save that,\nthat would create that equivalent object.\n\n851\n00:41:49,715 --> 00:41:50,800\nThey'd still be listed here,\n\n852\n00:41:50,800 --> 00:41:54,960\nyou'd still see them more than once,\nit would just know that they're the same.\n\n853\n00:41:54,960 --> 00:41:58,300\nAnd you'd have this equivalent\nobjects view right here,\n\n854\n00:41:58,300 --> 00:41:59,640\nwhere you'd be able to see that.\n\n855\n00:42:01,120 --> 00:42:02,250\nNow when I look in here right now,\n\n856\n00:42:02,250 --> 00:42:06,100\nI see a bunch of stuff, but\nI've only got one library server.\n\n857\n00:42:07,510 --> 00:42:08,304\nI think I've only got one library server.\n\n858\n00:42:08,304 --> 00:42:09,216\nI guess I should check that.\n\n859\n00:42:09,216 --> 00:42:12,895\nActually, I do have two, don't I?\n\n860\n00:42:12,895 --> 00:42:16,889\nSo I've got DC01 and SCVMM01, so\nI do have two library servers.\n\n861\n00:42:16,889 --> 00:42:20,531\nAnd so if I had objects that were stored\nin the two library servers that were\n\n862\n00:42:20,531 --> 00:42:23,020\nthe same,\nI might wanna flag them as equivalent.\n\n863\n00:42:23,020 --> 00:42:25,370\nAnd you'll see I've already\ngot some of those in here.\n\n864\n00:42:25,370 --> 00:42:28,380\nI didn't set this one up so\nI didn't know to erase them.\n\n865\n00:42:28,380 --> 00:42:34,300\nBut if you look here, under Window Server\n2012 R2, here's some virtual hard drives.\n\n866\n00:42:34,300 --> 00:42:37,217\nAnd these virtual hard drives\nhave been flagged as equivalent.\n\n867\n00:42:37,217 --> 00:42:39,084\nWell they're not actually equivalent,\n\n868\n00:42:39,084 --> 00:42:41,281\nI guess these are just fake equivalent,\nright?\n\n869\n00:42:41,281 --> 00:42:43,859\nCuz this one says AD,\nthis one says file, this one says web.\n\n870\n00:42:43,859 --> 00:42:48,949\nSo these are like OS drives, but\ndifferent configurations, right?\n\n871\n00:42:48,949 --> 00:42:51,952\nSo normally, what you see is\nthe same file name, just for\n\n872\n00:42:51,952 --> 00:42:54,215\neach of the file servers that were listed.\n\n873\n00:42:54,215 --> 00:42:57,728\nSo then we'd go through and\nflag those as being equivalent objects.\n\n874\n00:42:57,728 --> 00:43:01,408\nOr actually, if I look at these,\noh, you know what?\n\n875\n00:43:01,408 --> 00:43:04,467\nIt's listing all my objects,\nand when I click on them,\n\n876\n00:43:04,467 --> 00:43:06,170\nI'm only seeing the one path.\n\n877\n00:43:06,170 --> 00:43:09,570\nSo these aren't actually\nduplicated between my libraries.\n\n878\n00:43:09,570 --> 00:43:11,180\nBut this is where we would see them.\n\n879\n00:43:11,180 --> 00:43:14,080\nAnd you could spot them right here,\nsee that they were equivalent, and\n\n880\n00:43:14,080 --> 00:43:16,590\nknow that the system was honoring\nthat between the libraries.\n\n881\n00:43:17,660 --> 00:43:21,030\n>> And marking them equivalent really\nisn't saving you any disk space, or\n\n882\n00:43:21,030 --> 00:43:25,080\nanything like that, because you're\nstill storing multiple copies of that.\n\n883\n00:43:25,080 --> 00:43:30,090\nOne thing you can do on those library\nservers is run data duplication.\n\n884\n00:43:30,090 --> 00:43:33,085\nWe can end up saving if we want\nto try to save some space,\n\n885\n00:43:33,085 --> 00:43:37,320\ncuz there are a lot of things in\nthat library that it can trim out.\n\n886\n00:43:37,320 --> 00:43:40,320\nIt can actually save you a lot of\nspace when you've got multiple\n\n887\n00:43:40,320 --> 00:43:43,390\nwindows installs on these VHDs and\nthings like that.\n\n888\n00:43:43,390 --> 00:43:47,620\nIt can go through there and we've talked\nabout data duplication in other episodes.\n\n889\n00:43:47,620 --> 00:43:51,176\nIt looks for those blocks of information\nthat are the same, flags them,\n\n890\n00:43:51,176 --> 00:43:54,350\nremoves all but one of the copy and\nleaves pointers in its place.\n\n891\n00:43:54,350 --> 00:43:59,028\nSo you can actually save a lot of space\nenabling that on your library servers.\n\n892\n00:43:59,028 --> 00:44:00,646\n>> Yeah, absolutely.\n\n893\n00:44:00,646 --> 00:44:05,963\nSo just remember the big deal here,\nwhen you deploy library servers, it's only\n\n894\n00:44:05,963 --> 00:44:11,295\ngonna be useful if you have Hyper-V hosts\nin more than one geographic location.\n\n895\n00:44:11,295 --> 00:44:15,548\nSo if you had a headquarters and a DR,\nand you've got Hyper-V hosts in both,\n\n896\n00:44:15,548 --> 00:44:18,178\nyou'll want a library server in both.\n\n897\n00:44:18,178 --> 00:44:21,130\nThat way you're not deploying templates\nand ISOs and stuff over your WAN line.\n\n898\n00:44:21,130 --> 00:44:23,060\nThat's the main purpose for this.\n\n899\n00:44:23,060 --> 00:44:27,650\nIf you've only got a single data center,\nall your Hyper-V hosts are in one place,\n\n900\n00:44:27,650 --> 00:44:31,410\nthen you probably don't need more than one\nlibrary server, unless you just don't have\n\n901\n00:44:31,410 --> 00:44:34,195\nenough hard drive space somewhere, or\nyou wanna increase your network bandwidth.\n\n902\n00:44:34,195 --> 00:44:36,415\nBut if you want to increase your network\nbandwidth or your hard drive space,\n\n903\n00:44:36,415 --> 00:44:38,945\nyou normally just add hard drives,\nnot a whole separate server, right?\n\n904\n00:44:38,945 --> 00:44:42,065\nSo we don't normally use more\nthan one library server.\n\n905\n00:44:42,065 --> 00:44:44,265\nIf you want it redundant you\nstick it on a cluster, so again,\n\n906\n00:44:44,265 --> 00:44:45,705\nwe're not adding more than one library.\n\n907\n00:44:45,705 --> 00:44:50,385\nSo it's just multiple geographic\nlocations that make this useful.\n\n908\n00:44:50,385 --> 00:44:52,715\nIt seems like there was one other\nthing I wanted to mention on this,\n\n909\n00:44:52,715 --> 00:44:55,115\nbut it escapes me right now.\n\n910\n00:44:56,290 --> 00:44:57,240\nJust remember,\n\n911\n00:44:57,240 --> 00:45:00,990\nyou can put all sorts of cool stuff in\nyour library server, so use that resource.\n\n912\n00:45:02,174 --> 00:45:04,840\nAll right, the last thing that's\ngonna factor into our design for\n\n913\n00:45:04,840 --> 00:45:10,080\na virtualization environment is any\nkinda optimization we want to do to it.\n\n914\n00:45:10,080 --> 00:45:14,540\nThe two optimizations that we really\ncare about are dynamic optimization and\n\n915\n00:45:14,540 --> 00:45:16,090\npower optimization.\n\n916\n00:45:16,090 --> 00:45:20,232\nNow we showed how to set these up in the,\nwhich episode?\n\n917\n00:45:20,232 --> 00:45:21,290\n>> One of the earlier segments\n[INAUDIBLE] episodes.\n\n918\n00:45:21,290 --> 00:45:24,796\n>> One of the planning for oh, shoot.\n\n919\n00:45:24,796 --> 00:45:25,736\n[CROSSTALK].\n\n920\n00:45:25,736 --> 00:45:27,126\nI know it was in one of\nthe other episodes, but\n\n921\n00:45:27,126 --> 00:45:29,039\nlet's just sum it up here real quick,\ncuz I can show it again.\n\n922\n00:45:29,039 --> 00:45:33,975\nWhat is it, repetition leads to retention.\n\n923\n00:45:33,975 --> 00:45:35,195\nPrinciple of learning.\n\n924\n00:45:35,195 --> 00:45:38,545\nSo with dynamic optimization, what it is,\n\n925\n00:45:38,545 --> 00:45:43,760\nthe service that runs inside an SCVMM,\nand it monitors your cluster.\n\n926\n00:45:43,760 --> 00:45:46,900\nAnd it only works on clusters,\ndoesn't work on stand alone Hyper-V hosts.\n\n927\n00:45:46,900 --> 00:45:51,110\nSo you run it on your cluster,\nand it monitors the CPU and\n\n928\n00:45:51,110 --> 00:45:54,820\nRAM utilization and it can monitor\ndisk IO and network bandwidth also.\n\n929\n00:45:54,820 --> 00:45:57,280\nBy default it's just RAM and CPU.\n\n930\n00:45:57,280 --> 00:46:01,960\nAnd if it sees one host getting really\nbusy, it looks at the other hosts and\n\n931\n00:46:01,960 --> 00:46:03,830\nit says is there more\nspace somewhere else?\n\n932\n00:46:03,830 --> 00:46:05,770\nAnd it levels out your virtual machines.\n\n933\n00:46:05,770 --> 00:46:08,460\nIt spreads them out to give\nthem access to more resources.\n\n934\n00:46:09,750 --> 00:46:13,420\nIf you turn it on,\nit runs the default is every ten minutes.\n\n935\n00:46:13,420 --> 00:46:17,141\nSo every ten minutes it's gonna run,\nand it's gonna rebalance your library,\n\n936\n00:46:17,141 --> 00:46:19,694\nnot your library but\nyour actual running cluster, and\n\n937\n00:46:19,694 --> 00:46:23,190\nmove the virtual machines around and\nmatch them with what you need.\n\n938\n00:46:23,190 --> 00:46:25,202\nYou can increase that number\nto make it run less often,\n\n939\n00:46:25,202 --> 00:46:26,876\nyou can decrease it to\nmake it run more often.\n\n940\n00:46:26,876 --> 00:46:30,348\nI can't remember the minimum.\n\n941\n00:46:30,348 --> 00:46:31,810\nI think the minimum is five minutes.\n\n942\n00:46:31,810 --> 00:46:32,420\n>> I think so.\n\n943\n00:46:32,420 --> 00:46:34,600\n>> You wouldn't wanna go too aggressive.\n\n944\n00:46:34,600 --> 00:46:36,910\nYou'll wind up with virtual machines\nthat are constantly moving, and\n\n945\n00:46:36,910 --> 00:46:38,860\nthat's just bad.\n\n946\n00:46:38,860 --> 00:46:39,910\nBut it is a neat system.\n\n947\n00:46:39,910 --> 00:46:43,470\nYou can put that in place, and\nreally get the most out of your hardware.\n\n948\n00:46:43,470 --> 00:46:45,560\nThe old way of doing\nthat required ProTips,\n\n949\n00:46:45,560 --> 00:46:47,120\nand that meant you had to have SCOM.\n\n950\n00:46:48,370 --> 00:46:51,307\nBut with DO, dynamic optimization,\nit's just built in the SCVMM.\n\n951\n00:46:51,307 --> 00:46:52,850\nYou just go and turn it on,\nand you'll have it.\n\n952\n00:46:52,850 --> 00:46:56,250\nSo it's a neat little function\nthat's just right there.\n\n953\n00:46:56,250 --> 00:46:58,140\nLet me show it to you real quick.\n\n954\n00:46:58,140 --> 00:47:02,532\nSo I'm gonna go up here to my VMs and,\nactually wait a minute,\n\n955\n00:47:02,532 --> 00:47:04,280\nlet me go to my Fabric.\n\n956\n00:47:05,950 --> 00:47:11,080\nAnd in my Fabric, I'm gonna go under\nHosts, and here's my Hyper-V cluster.\n\n957\n00:47:11,080 --> 00:47:13,270\nWhen you configure dynamic optimization,\n\n958\n00:47:13,270 --> 00:47:16,130\nyou actually configure\nit up on the host group.\n\n959\n00:47:16,130 --> 00:47:18,020\nSo the cluster is in the host group.\n\n960\n00:47:18,020 --> 00:47:20,450\nIf there was more than one\ncluster here in this host group,\n\n961\n00:47:20,450 --> 00:47:23,220\nI could configure it for\nall of the clusters inside of it at once.\n\n962\n00:47:23,220 --> 00:47:25,123\nSo we set it here.\nI could go all the way up here if\n\n963\n00:47:25,123 --> 00:47:28,487\nI really wanted, but\nyou probably don't want DO everywhere.\n\n964\n00:47:28,487 --> 00:47:29,528\nLike you might have a test or\n\n965\n00:47:29,528 --> 00:47:31,756\nlab environment,\nyou don't wanna bother with DO there.\n\n966\n00:47:31,756 --> 00:47:33,538\nBut in your production one you do.\n\n967\n00:47:33,538 --> 00:47:35,964\nSo I'll just pull up\nthe properties of this host group.\n\n968\n00:47:35,964 --> 00:47:42,450\nAnd in the properties for the host group,\nI'll see dynamic optimization right here.\n\n969\n00:47:42,450 --> 00:47:44,160\nAnd here's where I can turn it on.\n\n970\n00:47:44,160 --> 00:47:49,250\nAnd I can tell it yes, I wanna use dynamic\noptimization and here's my settings.\n\n971\n00:47:49,250 --> 00:47:50,030\nCPU.\n\n972\n00:47:50,030 --> 00:47:55,400\nIf somebody's got 30% or less used right\nnow, then they're an available target.\n\n973\n00:47:55,400 --> 00:47:57,190\nYou're kinda specifying\nwho the targets are.\n\n974\n00:47:57,190 --> 00:47:59,380\nAnd that means that if anybody is 70% or\nhigher on their CPU,\n\n975\n00:47:59,380 --> 00:48:02,270\nwe're gonna start looking for\nanother target.\n\n976\n00:48:02,270 --> 00:48:03,110\nAnd then memory.\n\n977\n00:48:03,110 --> 00:48:06,410\nIf somebody has at least\n512 megs of memory free,\n\n978\n00:48:06,410 --> 00:48:09,470\nthen they're a suitable target that we\ncould potentially move somebody to.\n\n979\n00:48:09,470 --> 00:48:10,740\nSo, these are kind of our gauges.\n\n980\n00:48:10,740 --> 00:48:13,570\nAnd, you'll see where disk IO and\nnetwork are turned off.\n\n981\n00:48:13,570 --> 00:48:16,250\nSo you can bump those up and\nset those values, also.\n\n982\n00:48:16,250 --> 00:48:18,800\nYou turn it on and that's it.\n\n983\n00:48:18,800 --> 00:48:23,040\nNow, some of the options are grayed out\nlike I can't turn off the automatic part,\n\n984\n00:48:23,040 --> 00:48:24,620\nand it sets it at ten minutes,\nI mentioned.\n\n985\n00:48:24,620 --> 00:48:25,860\nI can't change that ten minutes.\n\n986\n00:48:26,890 --> 00:48:27,810\nIt's greyed out,\n\n987\n00:48:27,810 --> 00:48:31,556\nbecause apparently these are set on\nthe parent even though I didn't do that.\n\n988\n00:48:31,556 --> 00:48:33,250\nSo, lets jump up [CROSSTALK] and\nlook at it.\n\n989\n00:48:33,250 --> 00:48:35,100\n>> Yeah these settings\nare gonna inherit data.\n\n990\n00:48:35,100 --> 00:48:38,981\nThose groups that we create are nested, so\nyou can set it up at the parent level, and\n\n991\n00:48:38,981 --> 00:48:41,540\nthen you have to do it once and\nit will inherit down all.\n\n992\n00:48:41,540 --> 00:48:44,510\nYou can go in, I believe, and block that\ninheritance if you don't want some of\n\n993\n00:48:44,510 --> 00:48:47,290\nthose settings to inherit\nto one of those groups.\n\n994\n00:48:47,290 --> 00:48:50,160\n>> Yeah, and that's part of this checkmark\nright here where it says use dynamic\n\n995\n00:48:50,160 --> 00:48:52,850\noptimization settings from\nthe parent hoster group and\n\n996\n00:48:52,850 --> 00:48:55,760\nI just jumped up from the parent and\nmine actually aren't set, but\n\n997\n00:48:55,760 --> 00:48:59,176\napparently having that option on\njust makes it look like they're set.\n\n998\n00:48:59,176 --> 00:49:03,100\nWhich is odd but,\nyeah we kind of grayed it out.\n\n999\n00:49:03,100 --> 00:49:06,270\nI guess that setting is always set cuz\nit's a slider so it's pulling that.\n\n1000\n00:49:06,270 --> 00:49:07,270\n>> Yeah, I think if you uncheck the,\n\n1001\n00:49:07,270 --> 00:49:11,680\ntell it not to inherit,\nyeah then can set it on it's own.\n\n1002\n00:49:11,680 --> 00:49:12,590\n>> Strange.\n\n1003\n00:49:12,590 --> 00:49:15,719\nWell anyhow if we leave that off, we can\njust set it right here on this individual\n\n1004\n00:49:15,719 --> 00:49:17,780\nsystem and you set the aggressiveness.\n\n1005\n00:49:17,780 --> 00:49:19,780\nAnd how often you want it to run.\n\n1006\n00:49:19,780 --> 00:49:22,690\nThat's dynamic optimization,\nsuper easy to turn on.\n\n1007\n00:49:22,690 --> 00:49:24,350\nOnly works on clusters, remember that.\n\n1008\n00:49:24,350 --> 00:49:26,050\nIt doesn't work on\nstandalone Hyper-V hosts,\n\n1009\n00:49:26,050 --> 00:49:30,300\ncuz there's no way to migrate\nthe VMs without taking them offline.\n\n1010\n00:49:30,300 --> 00:49:31,670\nThis is gonna do a live migration.\n\n1011\n00:49:31,670 --> 00:49:35,320\nThe virtual machine will stay on while it\nmoves, and that's kinda the glory of it.\n\n1012\n00:49:36,850 --> 00:49:40,060\nNow there's a sister protocol or\nsoftware or package or\n\n1013\n00:49:40,060 --> 00:49:42,910\nwhatever that goes along with this\nwhich is called power optimization or\n\n1014\n00:49:42,910 --> 00:49:44,555\nPIO which is my favorite product name.\n\n1015\n00:49:44,555 --> 00:49:47,190\n>> [LAUGH]\n>> So if you want to get PIOed you\n\n1016\n00:49:47,190 --> 00:49:51,130\njust check this little box down here and\nyou'll enable power optimization.\n\n1017\n00:49:51,130 --> 00:49:51,690\nNow what is that?\n\n1018\n00:49:52,800 --> 00:49:57,600\nYou might have peaks in your company,\nand lulls.\n\n1019\n00:49:57,600 --> 00:50:00,980\nThere's times when you company\nmight be really really busy.\n\n1020\n00:50:00,980 --> 00:50:02,650\nA lot of customers are hitting your site.\n\n1021\n00:50:02,650 --> 00:50:03,600\nYour servers are going crazy.\n\n1022\n00:50:03,600 --> 00:50:07,880\nAnd if you've got scalable applications,\nthey'll start cloning.\n\n1023\n00:50:07,880 --> 00:50:11,720\nScaling out, more and\nmore VMs to be able to handle the load.\n\n1024\n00:50:11,720 --> 00:50:13,260\nSo you need a lot of resources for that.\n\n1025\n00:50:13,260 --> 00:50:14,699\nYou might need all of your Hyper-V hosts.\n\n1026\n00:50:15,750 --> 00:50:20,880\nBut then at the middle of the night,\nwhen you're company is closed and\n\n1027\n00:50:20,880 --> 00:50:22,960\nnobody's thinking about your company.\n\n1028\n00:50:22,960 --> 00:50:24,610\nPeople aren't hitting your website.\n\n1029\n00:50:24,610 --> 00:50:29,270\nThe system starts to drop down, and\nnow all those machines you cloned start to\n\n1030\n00:50:29,270 --> 00:50:31,939\nshrink, and now you've got a lot\nof extra resources sitting around.\n\n1031\n00:50:32,960 --> 00:50:37,120\nIf you turn on power optimization,\nwhat it'll do,\n\n1032\n00:50:37,120 --> 00:50:42,830\nis it'll move your virtual machines\nto be on a smaller group of hosts.\n\n1033\n00:50:42,830 --> 00:50:45,250\nIt'll start emptying out\nhosts wherever it can.\n\n1034\n00:50:45,250 --> 00:50:49,030\nAnd when it empties a host,\nit'll put it to sleep.\n\n1035\n00:50:49,030 --> 00:50:51,300\nIt'll put it in that power saving mode.\n\n1036\n00:50:51,300 --> 00:50:54,140\nAnd that way you're saving electricity.\n\n1037\n00:50:54,140 --> 00:50:57,542\nAnd then if we need it again,\nas business starts to pick back up,\n\n1038\n00:50:57,542 --> 00:51:00,000\nit'll power the host back on.\n\n1039\n00:51:00,000 --> 00:51:03,400\nAnd then DO will re-balance to\nmove the new VMs out there.\n\n1040\n00:51:03,400 --> 00:51:05,200\nOr just as you scale out they'll go and\nfill it out.\n\n1041\n00:51:05,200 --> 00:51:07,950\nSo it may or\nmay not be DO that actually does it.\n\n1042\n00:51:07,950 --> 00:51:10,780\nBut you'll slowly fill up the new\nservers as they come back up.\n\n1043\n00:51:10,780 --> 00:51:12,280\nSo it gives you power optimization.\n\n1044\n00:51:12,280 --> 00:51:15,070\nAnd you can set right here\nwhen you want that to happen.\n\n1045\n00:51:16,950 --> 00:51:19,390\nYou may absolutely not want it\nto happen during business hours.\n\n1046\n00:51:20,560 --> 00:51:25,450\nSo, we might go through here, and\nkind of flag some of those, and\n\n1047\n00:51:25,450 --> 00:51:27,270\nso, I can just click those off.\n\n1048\n00:51:27,270 --> 00:51:29,560\nWhatever your business hours are,\nyou mark them.\n\n1049\n00:51:29,560 --> 00:51:32,473\n>> Your savings could be considerable.\n\n1050\n00:51:32,473 --> 00:51:37,292\n>> Let's say you have 150 houses that\nare all running virtual machines during\n\n1051\n00:51:37,292 --> 00:51:41,599\nthose peak hours and in the evening\nhours are when our slower time was,\n\n1052\n00:51:41,599 --> 00:51:45,275\nwe can drop that down,\nsay, even 20 to 50 hosts.\n\n1053\n00:51:45,275 --> 00:51:47,075\nSo we're now down to 100 hosts.\n\n1054\n00:51:47,075 --> 00:51:51,775\nThink about how much power we're saving by\nputting those 50 hosts into a sleep state.\n\n1055\n00:51:51,775 --> 00:51:56,645\nThe cooling cost for that server room,\nwhen I've dropped 50 hosts off.\n\n1056\n00:51:56,645 --> 00:51:59,625\nSo savings can be considerable.\n\n1057\n00:51:59,625 --> 00:52:00,285\n>> Yep.\n\n1058\n00:52:00,285 --> 00:52:02,765\nNow, if you don't have\nscalable applications,\n\n1059\n00:52:02,765 --> 00:52:04,760\nif you don't have where\nit's cloning out machines.\n\n1060\n00:52:04,760 --> 00:52:06,110\nRight.\n\n1061\n00:52:06,110 --> 00:52:09,590\nThen you've just got regular virtual\nmachines that are running all the time,\n\n1062\n00:52:09,590 --> 00:52:12,050\nand you may not want to use this.\n\n1063\n00:52:12,050 --> 00:52:14,780\nI want my servers to be available,\nthey need to be running.\n\n1064\n00:52:14,780 --> 00:52:18,150\nThere's no time when we can\npower them off or whatever.\n\n1065\n00:52:18,150 --> 00:52:20,520\nAnd if that's the case you can\nturn power optimization off.\n\n1066\n00:52:20,520 --> 00:52:25,880\nIt is optional, you don't have to have\nit if you can hit the okay button.\n\n1067\n00:52:25,880 --> 00:52:29,270\nSo PO and DO can work independently.\n\n1068\n00:52:29,270 --> 00:52:34,180\nNot entirely true,\nDO can be independent PO actually requires\n\n1069\n00:52:34,180 --> 00:52:38,430\nDO to be turned on because it's got to be\nable to move those virtual machines and\n\n1070\n00:52:38,430 --> 00:52:43,270\nunderstand the performance in order to\nmake those decisions, and DO does that.\n\n1071\n00:52:43,270 --> 00:52:47,810\nThe old way of doing this was with PRO,\nthe performance and resource optimization,\n\n1072\n00:52:47,810 --> 00:52:52,910\nand for PRO it only works if you\nhad an S Comp server integrated.\n\n1073\n00:52:53,970 --> 00:52:58,640\nAnd if you do,\nthen you can do monitor and re-mediate.\n\n1074\n00:52:58,640 --> 00:53:01,660\nThat's where it will watch for\nyour servers, watch their performance.\n\n1075\n00:53:01,660 --> 00:53:04,190\nAnd re-mediate means it will move around,\noptimize performance.\n\n1076\n00:53:04,190 --> 00:53:06,210\nBut it only does that if\nit integrates with SCOM.\n\n1077\n00:53:06,210 --> 00:53:10,930\nSo this PRO section right here\nactually does nothing by default.\n\n1078\n00:53:10,930 --> 00:53:11,770\nYou turn it on here.\n\n1079\n00:53:11,770 --> 00:53:12,510\nYou get that set up.\n\n1080\n00:53:16,520 --> 00:53:18,100\nEven this PRO button right here,\n\n1081\n00:53:18,100 --> 00:53:22,890\nthe suggestions it will give will all be\nblank until you connect the SCOM server.\n\n1082\n00:53:22,890 --> 00:53:24,880\nLets see if I can remember where that is.\n\n1083\n00:53:24,880 --> 00:53:28,260\nIf I jump under settings,\nright here, system center settings.\n\n1084\n00:53:28,260 --> 00:53:31,180\nYou'll see right here where you\ncan set an operations manager.\n\n1085\n00:53:31,180 --> 00:53:34,840\nAnd you can go in and you can modify that\nyou can put in who your SCOM server is or\n\n1086\n00:53:34,840 --> 00:53:35,760\nyou can get an error.\n\n1087\n00:53:35,760 --> 00:53:39,790\nYou can put in who your SCOM server is and\nit will connect up to it and it starts\n\n1088\n00:53:39,790 --> 00:53:44,170\nsynchronizing the performance results and\nthat's when PRO becomes enabled.\n\n1089\n00:53:44,170 --> 00:53:47,880\nOnce you've done that then your PRO\nbutton will actually do something.\n\n1090\n00:53:47,880 --> 00:53:51,143\nAnd then the PRO settings\non that post group will\n\n1091\n00:53:51,143 --> 00:53:53,515\nactually just do some things too.\n\n1092\n00:53:53,515 --> 00:53:57,545\nCouple of different components there on\nthe design side we just need to figure\n\n1093\n00:53:57,545 --> 00:54:00,184\nout which components we want to use.\n\n1094\n00:54:00,184 --> 00:54:04,830\nDo you wanna use dynamic optimization, or\ndo you want to use PRO, right, on the exam\n\n1095\n00:54:04,830 --> 00:54:09,450\nif they tell you about an environment\nthat has SCOM PRO as an option, but\n\n1096\n00:54:09,450 --> 00:54:12,380\nif they tell you about an environment\nthat doesn't have SCOM.\n\n1097\n00:54:12,380 --> 00:54:15,230\nThen, dynamic optimization\nis the only way to go.\n\n1098\n00:54:15,230 --> 00:54:18,590\nNow, dynamic optimization\nis the replacement for PRO.\n\n1099\n00:54:18,590 --> 00:54:22,120\nSo, if I were to deploy something today,\nI would deploy DO, and not PRO.\n\n1100\n00:54:23,520 --> 00:54:25,160\nBut, if you go to an existing environment,\n\n1101\n00:54:25,160 --> 00:54:28,280\nthey very well may already have pro in\nplace and not want to mess with it.\n\n1102\n00:54:28,280 --> 00:54:29,840\nAnd, there is no reason to blame them for\nthat.\n\n1103\n00:54:31,520 --> 00:54:32,560\nAll right, so\n\n1104\n00:54:32,560 --> 00:54:36,990\nthose are a few other considerations we\nneed to have when we deploy the SCVMM.\n\n1105\n00:54:36,990 --> 00:54:41,480\nAnd I know in this episode we've really\nkind of focused on the SCVMM itself.\n\n1106\n00:54:41,480 --> 00:54:45,460\nIn the other shows, we've used the SCVMM\nsporadically throughout the shows.\n\n1107\n00:54:45,460 --> 00:54:48,480\nThat cover different concepts,\nincluding these last ones here.\n\n1108\n00:54:48,480 --> 00:54:51,760\nSo it is a very useful product,\na very powerful product.\n\n1109\n00:54:51,760 --> 00:54:54,380\nAnd it's part of the System Center,\nso it's recommended and\n\n1110\n00:54:54,380 --> 00:54:56,160\nsupported by Microsoft.\n\n1111\n00:54:56,160 --> 00:54:59,341\nThe only thing I didn't mention\nwere non-Microsoft hosts,\n\n1112\n00:54:59,341 --> 00:55:02,348\nwell I guess we mentioned it\nright we just didn't show it.\n\n1113\n00:55:02,348 --> 00:55:06,686\n>> You can manage non Hyper-V hosts you\njust add them into the SCVMM just like you\n\n1114\n00:55:06,686 --> 00:55:10,887\nwould any other host, so when you go to\nadd one it actually asks you I guess we\n\n1115\n00:55:10,887 --> 00:55:13,245\ncould bring that up if\nI go into my fabric.\n\n1116\n00:55:14,790 --> 00:55:17,010\nAnd I go into my hosts.\n\n1117\n00:55:17,010 --> 00:55:21,590\nYou've got add resources, and you'll\nsee where you can add a Hyper-V host.\n\n1118\n00:55:21,590 --> 00:55:25,070\nYou can add a VMware ESX host.\n\n1119\n00:55:25,070 --> 00:55:28,436\nAnd they even have citrix xenserver hosts,\nin clusters, now.\n\n1120\n00:55:28,436 --> 00:55:32,507\nTthe last time I checked, which was only\nlike a month ago, that was still in beta,\n\n1121\n00:55:32,507 --> 00:55:35,175\nand so, that was one that\nwas coming from Microsoft.\n\n1122\n00:55:35,175 --> 00:55:38,365\nApparently this may be the beta\nthis installed here too,\n\n1123\n00:55:38,365 --> 00:55:40,630\ndoes it give me a beta warning?\n\n1124\n00:55:40,630 --> 00:55:44,160\nBeta warnings gone, so I guess that's gone\ninto production now, I did not know that.\n\n1125\n00:55:44,160 --> 00:55:47,880\nSo we can throw in Citrix XenServer\nnow too, that's very exciting.\n\n1126\n00:55:47,880 --> 00:55:53,340\nThat's a free hypervisor based on\nthe open source Xen hypervisor.\n\n1127\n00:55:53,340 --> 00:55:55,530\nIt's from the company Citrix,\nit's a good product.\n\n1128\n00:55:55,530 --> 00:55:57,700\nWe actually have Xen servers here.\n\n1129\n00:55:57,700 --> 00:55:59,510\nSo it's a good product.\n\n1130\n00:55:59,510 --> 00:56:01,980\nYou can manage it right here, in SCVMM2.\n\n1131\n00:56:01,980 --> 00:56:05,010\nWhen you add them in, notice here you're\nspecifying computer name and port number,\n\n1132\n00:56:05,010 --> 00:56:06,980\nyou gotta do authentication,\nyou get connected to it.\n\n1133\n00:56:06,980 --> 00:56:09,190\nAnd it'll reach out and understand it.\n\n1134\n00:56:09,190 --> 00:56:10,738\nYou can throw it into\na particular host group.\n\n1135\n00:56:10,738 --> 00:56:14,139\nThe VMware one is a little bit different.\n\n1136\n00:56:14,139 --> 00:56:18,895\nIf we want to manage a VMware ESX host or\ncluster,\n\n1137\n00:56:18,895 --> 00:56:22,850\nwe have to have a vCenter Server attach.\n\n1138\n00:56:22,850 --> 00:56:24,040\nAll right?\n\n1139\n00:56:24,040 --> 00:56:26,294\nAnd in order to attach to vCenter,\n\n1140\n00:56:26,294 --> 00:56:31,362\nyou actually have to install the vSphere\nclient on the SCVMN server, right?\n\n1141\n00:56:31,362 --> 00:56:35,793\nSo it doesn't even give me the choice to\nadd the vCenter server because I don't\n\n1142\n00:56:35,793 --> 00:56:37,958\nhave that vSphere client installed.\n\n1143\n00:56:37,958 --> 00:56:40,850\nThe way VMware's STK works and\n\n1144\n00:56:40,850 --> 00:56:45,690\nthe way that SCVM interacts with it,\nyou actually have to install that client.\n\n1145\n00:56:45,690 --> 00:56:50,200\nOnce it's installed on this server,\nthen we'll have those options, all right?\n\n1146\n00:56:50,200 --> 00:56:52,240\nSo you can manage those other systems.\n\n1147\n00:56:52,240 --> 00:56:55,170\nOnce you do that, your virtual\nmachines will show up right there and\n\n1148\n00:56:55,170 --> 00:56:57,470\nyou can even start to\ndo V to V conversions.\n\n1149\n00:56:57,470 --> 00:57:00,627\nYou can convert VMware to Hyper-V or\nwhatever,\n\n1150\n00:57:00,627 --> 00:57:05,250\nkinda move that stuff back and forth and\nit gives you that flexibility.\n\n1151\n00:57:05,250 --> 00:57:06,060\nSo its neat stuff.\n\n1152\n00:57:08,640 --> 00:57:11,140\nWell, Mike,\nI think that pretty much wraps it up.\n\n1153\n00:57:11,140 --> 00:57:14,040\nThe only other note here,\nI just at the very end of the show note.\n\n1154\n00:57:14,040 --> 00:57:16,200\nSo you guys can see this\nposted with the episode.\n\n1155\n00:57:16,200 --> 00:57:22,490\nI stuck a URL to describe the using WDS to\nto deploy Hyper-V to a Bare-Metal server.\n\n1156\n00:57:22,490 --> 00:57:27,230\nFor the exam, you need to be aware that\nWDS is the solution you use for it, right?\n\n1157\n00:57:27,230 --> 00:57:30,400\nBut in real life, if you want to do it,\nit's a great article, it's right off of\n\n1158\n00:57:30,400 --> 00:57:33,680\nMicrosoft's TechNet, that explains\nthe whole process of setting that up.\n\n1159\n00:57:33,680 --> 00:57:36,120\nIt's really no different from\ndeploying a normal Windows Server.\n\n1160\n00:57:36,120 --> 00:57:37,717\nThe trick is the automation part of it.\n\n1161\n00:57:37,717 --> 00:57:40,903\nAnd you'll usually use the System\nCenter Orchestrator to do that, and\n\n1162\n00:57:40,903 --> 00:57:44,250\nit can automate the deployment,\nand get it put in place.\n\n1163\n00:57:44,250 --> 00:57:44,750\nSo cool stuff.\n\n1164\n00:57:46,180 --> 00:57:46,680\nAll right.\n\n1165\n00:57:46,680 --> 00:57:48,730\nWell, I think that's about it for us.\n\n1166\n00:57:48,730 --> 00:57:49,780\nYou got anything else, Mike?\n\n1167\n00:57:49,780 --> 00:57:51,320\n>> No, I think we're good.\n\n1168\n00:57:51,320 --> 00:57:52,470\n>> All right.\nWell ladies and gentlemen,\n\n1169\n00:57:52,470 --> 00:57:53,360\nwe're gonna wrap it up there.\n\n1170\n00:57:53,360 --> 00:57:57,242\nLet me remind you, if you have questions\non any of this, please feel free to ask.\n\n1171\n00:57:57,242 --> 00:58:00,150\nYou can always go to\nitpro.tv/live during the show.\n\n1172\n00:58:00,150 --> 00:58:02,414\nAnd you'll see a chat box\nright beneath the video.\n\n1173\n00:58:02,414 --> 00:58:04,240\nYou can post your question there.\n\n1174\n00:58:04,240 --> 00:58:05,720\nWe monitor and answer during the show.\n\n1175\n00:58:05,720 --> 00:58:07,815\nThere's a great conversation going\non right now about Mountain Dew.\n\n1176\n00:58:07,815 --> 00:58:10,940\n>> [LAUGH]\n>> So feel free to jump in there and\n\n1177\n00:58:10,940 --> 00:58:13,060\nuse that chat room it's\nwhat it's there for.\n\n1178\n00:58:13,060 --> 00:58:17,180\nIf you're watching this when we're not\nlive, which I know a lot of you do you're\n\n1179\n00:58:17,180 --> 00:58:19,739\nnot out of luck you can still\nuse our Q and A forums.\n\n1180\n00:58:19,739 --> 00:58:22,472\nGo to the website at the top of\nthe page the link that says Q and\n\n1181\n00:58:22,472 --> 00:58:24,888\nA you can click on it,\npost your questions in there.\n\n1182\n00:58:24,888 --> 00:58:27,060\nWe monitor and answer after the show.\n\n1183\n00:58:27,060 --> 00:58:29,050\nSo take advantage of those resources.\n\n1184\n00:58:29,050 --> 00:58:30,300\nThey are there for you.\n\n1185\n00:58:31,340 --> 00:58:33,400\nAll right, well,\nhope you guys enjoyed the show.\n\n1186\n00:58:33,400 --> 00:58:35,266\nSigning off for ITProTV, I'm Don Pezet.\n\n1187\n00:58:35,266 --> 00:58:36,426\n>> And I'm Mike Rodrick.\n\n1188\n00:58:36,426 --> 00:58:37,401\n>> And we will see you next time.\n\n1189\n00:58:37,401 --> 00:58:47,401\n[MUSIC]\n\n",
          "vimeoId": "110775800"
        },
        {
          "description": null,
          "length": "5752",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-2-plan_and_implement_vms_030215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-2-plan_and_implement_vms_030215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-2-plan_and_implement_vms_030215-1-sm.jpg",
          "title": "Plan and Implement VMs",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,378 --> 00:00:22,503\n[SOUND]\n\n3\n00:00:22,503 --> 00:00:33,336\n[MUSIC]\n\n4\n00:00:33,336 --> 00:00:36,730\nAll right, good morning,\ngood afternoon, and good evening and\n\n5\n00:00:36,730 --> 00:00:39,087\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:39,087 --> 00:00:42,296\nI'm your host Don Pezet,\nback again with Mr. Mike Rodrick.\n\n7\n00:00:42,296 --> 00:00:42,981\nHow's it going, Mike?\n\n8\n00:00:42,981 --> 00:00:44,296\n>> Fantastic Don, how you doing today?\n\n9\n00:00:44,296 --> 00:00:45,421\n>> I am doing swell.\n\n10\n00:00:45,421 --> 00:00:50,110\nNow Mike, I think most of our viewers know\nthat we film these episodes out of order,\n\n11\n00:00:50,110 --> 00:00:52,200\nand sometimes there's gaps\nin between them, but.\n\n12\n00:00:53,530 --> 00:00:58,710\nIn our last episode when you were here,\nyou had either a lumberjack or\n\n13\n00:00:58,710 --> 00:01:00,690\nhomeless person beard\n>> [LAUGH]\n\n14\n00:01:00,690 --> 00:01:02,240\n>> And today you're nice and clean shaven,\n\n15\n00:01:02,240 --> 00:01:03,065\nit's quite a change.\n\n16\n00:01:03,065 --> 00:01:05,580\n>> [LAUGH] Yeah it is going\nto be a big change, wait,\n\n17\n00:01:05,580 --> 00:01:06,983\nwhat the hell did they switch Mike's?\n\n18\n00:01:06,983 --> 00:01:08,576\n[LAUGH]\n>> It's a new Mike.\n\n19\n00:01:08,576 --> 00:01:12,336\nAll right well, let's take advantage\nthe all new streamlined Mike.\n\n20\n00:01:12,336 --> 00:01:13,211\n>> Aerodynamic.\n\n21\n00:01:13,211 --> 00:01:15,250\n>> [CROSSTALK] You jumped\ninto a pretty fun episode.\n\n22\n00:01:15,250 --> 00:01:17,550\nI know some of the topics that we\ncover are a little procedural,\n\n23\n00:01:17,550 --> 00:01:19,210\na little paper work, kind of boring.\n\n24\n00:01:19,210 --> 00:01:22,260\nBut in this one, virtual machines.\n\n25\n00:01:22,260 --> 00:01:24,930\nWhen you're designing\na network infrastructure,\n\n26\n00:01:24,930 --> 00:01:28,240\nvirtual machines are guaranteed\nto play a part in it today.\n\n27\n00:01:28,240 --> 00:01:31,480\nIf you're designing a network that\ndoesn't involve virtual machines today,\n\n28\n00:01:31,480 --> 00:01:37,165\neither you're in a highly specialized\nenvironment or your career in IT is short.\n\n29\n00:01:37,165 --> 00:01:40,500\n>> [LAUGH]\n>> It really boils down to that.\n\n30\n00:01:40,500 --> 00:01:44,070\nEverybody is deploying virtual machines\nin one form or another in today's world.\n\n31\n00:01:44,070 --> 00:01:45,170\n>> It just makes sense.\n\n32\n00:01:45,170 --> 00:01:47,610\nThat way we can take advantage\nof all the resources we have.\n\n33\n00:01:47,610 --> 00:01:48,977\nWhen we talk about you going out and\n\n34\n00:01:48,977 --> 00:01:52,276\nbuying a physical server, you're not gonna\ntake one of those servers you go out and\n\n35\n00:01:52,276 --> 00:01:54,300\nbuy nowadays and\njust put DNS or DHCP on it.\n\n36\n00:01:54,300 --> 00:01:55,080\nComplete waste of money.\n\n37\n00:01:55,080 --> 00:01:57,220\nComplete waste of resources.\n\n38\n00:01:57,220 --> 00:02:00,870\nWith virtualization we canreally use all\nthe resources that are available in those\n\n39\n00:02:00,870 --> 00:02:02,830\nmachines much more efficiently.\n\n40\n00:02:02,830 --> 00:02:05,830\nAnd not to mention it makes things\nlike backing up my machines easier,\n\n41\n00:02:05,830 --> 00:02:07,660\nmoving them in the event of failures.\n\n42\n00:02:07,660 --> 00:02:10,430\nAll kinds of advantages of going virtual.\n\n43\n00:02:10,430 --> 00:02:12,960\n>> Now I remember the first\ntime Hyper-V came out.\n\n44\n00:02:12,960 --> 00:02:17,480\nWell it only came out once, so I remember\nwhen Hyper-V came out, Hyper-V 1.0.\n\n45\n00:02:17,480 --> 00:02:22,615\nAnd I was one of those people who took\na look at it, gave it a shot, and\n\n46\n00:02:22,615 --> 00:02:25,690\nrubber-stamped it not ready for\nprime time, not ready for production.\n\n47\n00:02:25,690 --> 00:02:27,750\nActually Mike, you were with me back then.\n\n48\n00:02:27,750 --> 00:02:31,450\n>> Yes. Yeah. >> It was when we were\ndoing, we setup a cluster deployment.\n\n49\n00:02:31,450 --> 00:02:36,390\nIt was like a three node cluster,\nand we had the XenServer\n\n50\n00:02:36,390 --> 00:02:39,790\ncluster at this one organization that\nhad been running rock solid for years.\n\n51\n00:02:39,790 --> 00:02:40,670\n>> Yeah, absolutely.\n\n52\n00:02:40,670 --> 00:02:44,045\n>> And we moved it over to Hyper-V and,\nit was not-\n\n53\n00:02:44,045 --> 00:02:45,595\n>> We were trying to do the right thing,\n\n54\n00:02:45,595 --> 00:02:48,745\nwe were gonna be a Microsoft shop,\nwe were gonna use Microsoft products and\n\n55\n00:02:48,745 --> 00:02:50,580\nthings like that and yeah, not so much.\n\n56\n00:02:50,580 --> 00:02:52,730\nI mean, we ran into all kinds\nof problems with those.\n\n57\n00:02:52,730 --> 00:02:53,500\n>> There were some issues.\n\n58\n00:02:53,500 --> 00:02:56,250\nAnd that's true of any software\nwhen it first comes out.\n\n59\n00:02:56,250 --> 00:02:59,340\nWell, Hyper-V has come a long,\nlong way since then.\n\n60\n00:02:59,340 --> 00:03:02,300\nAnd so all the different problems that we\nhad in the earlier versions of Hyper-V\n\n61\n00:03:02,300 --> 00:03:06,360\nhave slowly been replaced, fixed,\nupgraded, and improved, until you get to\n\n62\n00:03:06,360 --> 00:03:10,090\ntoday where Hyper-V is just as good\na product as the other vendors that\n\n63\n00:03:10,090 --> 00:03:13,160\nare out there, and there's absolutely\nno reason not to move forward with it.\n\n64\n00:03:13,160 --> 00:03:16,000\nAnd a lot of people are because\nthere's some cool stuff.\n\n65\n00:03:16,000 --> 00:03:20,170\nOne of the big problems that I used to\nhave with Hyper-V was limited resources.\n\n66\n00:03:20,170 --> 00:03:23,710\nYou had all sorts of limitations with\nthat old gen one hardware and stuff.\n\n67\n00:03:23,710 --> 00:03:24,600\nThat you could only have so\n\n68\n00:03:24,600 --> 00:03:28,070\nmuch memory and\ndisk access was limited in certain ways.\n\n69\n00:03:28,070 --> 00:03:30,380\nNetwork performance was limited.\n\n70\n00:03:30,380 --> 00:03:34,090\nThere were big problems with things\nlike the synthetic SCSI adapters.\n\n71\n00:03:35,250 --> 00:03:36,950\nIf you had a virtual machine and\n\n72\n00:03:36,950 --> 00:03:40,530\nyou wanted to get the best\nDisk I/O out of it possible.\n\n73\n00:03:40,530 --> 00:03:43,570\nWell, you could do a pass through disk\nwhich was a nightmare if you were\n\n74\n00:03:43,570 --> 00:03:45,700\ntrying to do high availability.\n\n75\n00:03:45,700 --> 00:03:51,160\nBut you could do a synthetic SCSI drive\nwhich would get great performance but\n\n76\n00:03:51,160 --> 00:03:54,200\nyou couldn't boot off of\nthat synthetic SCSI drive.\n\n77\n00:03:54,200 --> 00:03:59,250\nSo you had to have the emulated IDE drives\nto your OS and you take a hit there.\n\n78\n00:03:59,250 --> 00:04:02,498\nAnd then you put your data on\nthese synthetic SCSI drives.\n\n79\n00:04:02,498 --> 00:04:05,670\nBut in Hyper-V now, in the newer ones,\nin Windows Server 2012,\n\n80\n00:04:05,670 --> 00:04:09,250\nyou do your gen two hardware, and you can\nboot off of that synthetic SCSI adapter,\n\n81\n00:04:09,250 --> 00:04:11,060\nand now you get great\nperformance all the time.\n\n82\n00:04:11,060 --> 00:04:13,810\nThings like that have been\nimproved over the years.\n\n83\n00:04:13,810 --> 00:04:17,140\nAnd the specifications for an individual\nvirtual machine have gone up quite a bit,\n\n84\n00:04:17,140 --> 00:04:17,700\nhaven't they, Mike?\n\n85\n00:04:17,700 --> 00:04:18,620\n>> They really have.\n\n86\n00:04:18,620 --> 00:04:21,200\nThey've increased the amount of RAM\nwe can put to a virtual machine,\n\n87\n00:04:21,200 --> 00:04:24,210\nthe amount of hard drive\nspace that we can give them.\n\n88\n00:04:24,210 --> 00:04:25,460\nSo they've made a lot\nof great improvements.\n\n89\n00:04:25,460 --> 00:04:27,545\nIt just makes better performing machines.\n\n90\n00:04:27,545 --> 00:04:32,442\n>> And so now under Windows Server 2012,\na single virtual machine can have up to\n\n91\n00:04:32,442 --> 00:04:37,211\na terabyte of RAM, and for most of us\nthat's going to suit our needs just fine.\n\n92\n00:04:37,211 --> 00:04:40,324\nSo if memory allocation was\nthe problem before that was\n\n93\n00:04:40,324 --> 00:04:43,245\nkeeping you from using VMs,\nthat problem is gone.\n\n94\n00:04:44,535 --> 00:04:47,523\nDisk I/O has been improved we\ncan boot off of those SCSI,\n\n95\n00:04:47,523 --> 00:04:50,087\nI might have said iSCSI earlier but\nI meant SCSI.\n\n96\n00:04:50,087 --> 00:04:53,190\nThe synthetic SCSI adapters we\ncan boot off of those just fine.\n\n97\n00:04:53,190 --> 00:04:57,740\nWe can have to 64 virtual CPUs, vCPUs.\n\n98\n00:04:57,740 --> 00:05:03,440\nSo if your host has 64 physical CPUs you\ncan allocate 64 virtual CPUs to a VM and\n\n99\n00:05:03,440 --> 00:05:04,890\nreally kick some butt.\n\n100\n00:05:04,890 --> 00:05:08,680\nAnd with these higher quantity\nprocessors now eight core,\n\n101\n00:05:08,680 --> 00:05:10,790\noctocore processors are pretty common.\n\n102\n00:05:10,790 --> 00:05:14,340\nYou're starting to see some even bigger,\nand that's just gonna\n\n103\n00:05:14,340 --> 00:05:17,360\nkeep getting bigger over time, and\nnow you can take advantage of that.\n\n104\n00:05:17,360 --> 00:05:19,790\n>> Absolutely, but\nthat was a reason not go to virtual,\n\n105\n00:05:19,790 --> 00:05:22,530\nif I had a machine that\nneeded that much CPU power.\n\n106\n00:05:22,530 --> 00:05:23,682\nI couldn't virtualize it,\n\n107\n00:05:23,682 --> 00:05:26,420\nbecause I couldn't give it the amount\nof resources that it needed.\n\n108\n00:05:26,420 --> 00:05:29,825\nNow with 2012 R2,\nthey've removed those limitations, and\n\n109\n00:05:29,825 --> 00:05:32,380\nit makes a lot more possibilities.\n\n110\n00:05:32,380 --> 00:05:33,545\nHard drive space is another one, right?\n\n111\n00:05:33,545 --> 00:05:38,586\nWe get the second gen heart\nof the VHDX's now they go up\n\n112\n00:05:38,586 --> 00:05:44,249\nto 64 TB I think in size, so\na lot bigger per drive as well.\n\n113\n00:05:44,249 --> 00:05:45,937\n>> Yeah the old one was 2 TB and\n\n114\n00:05:45,937 --> 00:05:50,212\nI remember the first time I spun one\nup that size I was like, wow 2 TB.\n\n115\n00:05:50,212 --> 00:05:51,830\nThat's a lot of space.\n\n116\n00:05:51,830 --> 00:05:54,885\nBut today you look at it like well,\n2 TB, I'm gonna run out of that soon.\n\n117\n00:05:54,885 --> 00:05:57,760\n[LAUGH] So\nit's not as much as it used to be.\n\n118\n00:05:57,760 --> 00:05:59,260\n64 TB is good breathing room.\n\n119\n00:05:59,260 --> 00:06:02,760\nNow, there will come a time when\n64 TB is not enough, and so\n\n120\n00:06:02,760 --> 00:06:03,740\nMicrosoft will improve that.\n\n121\n00:06:03,740 --> 00:06:04,880\nBut for right now,\n\n122\n00:06:04,880 --> 00:06:09,140\nif those were the things keeping you away\nfrom virtualizing, those are kind of gone.\n\n123\n00:06:10,190 --> 00:06:12,720\nSo when it comes to developing a plan for\n\n124\n00:06:12,720 --> 00:06:15,480\ndeploying virtual machines,\nwhat do we have to think about?\n\n125\n00:06:15,480 --> 00:06:18,460\nWell, those limits are important,\nwe've got to think about those limits.\n\n126\n00:06:18,460 --> 00:06:21,680\nThey're much higher than they used to be,\nso we probably won't hit them, but\n\n127\n00:06:21,680 --> 00:06:25,710\nif you have a physical machine and you're\nthinking about deploying it virtual.\n\n128\n00:06:25,710 --> 00:06:27,908\nOr you have software that's\nnot deployed yet and\n\n129\n00:06:27,908 --> 00:06:29,628\nyou think about deploying a virtual.\n\n130\n00:06:29,628 --> 00:06:33,490\nMake sure it falls in a perspective\nit needs more than what's there.\n\n131\n00:06:33,490 --> 00:06:34,586\nIt's not gonna work in a VM.\n\n132\n00:06:34,586 --> 00:06:36,050\nYou'll need to go physical on that one.\n\n133\n00:06:36,050 --> 00:06:39,930\nSo VM's might not be an option\nin some environments.\n\n134\n00:06:39,930 --> 00:06:42,470\nProprietary hardware's another one.\n\n135\n00:06:42,470 --> 00:06:46,440\nI remember I did a big virtualization\nproject for a company a few years back.\n\n136\n00:06:46,440 --> 00:06:48,990\nAnd we had to do a survey of\n\n137\n00:06:48,990 --> 00:06:52,770\nall the servers in place to determine\nwhich ones were able to be virtualized.\n\n138\n00:06:52,770 --> 00:06:56,800\nAnd there was one server in\nparticular that had low CPU load,\n\n139\n00:06:56,800 --> 00:07:00,650\ndidn't need a lot of memory,\ndidn't need hardly any hard drive space.\n\n140\n00:07:00,650 --> 00:07:01,610\nVery little network bandwidth.\n\n141\n00:07:01,610 --> 00:07:03,961\nIt was a great candidate for\nvirtualization.\n\n142\n00:07:03,961 --> 00:07:10,670\nExcept, it had a proprietary PCI Express\nfax board in it, it was a fax server.\n\n143\n00:07:10,670 --> 00:07:14,918\nSo it sent and received faxes, it had 64\nfax phone lines that were built into this\n\n144\n00:07:14,918 --> 00:07:18,503\ncrazy proprietary card,\nyou can't virtualize that card, right?\n\n145\n00:07:18,503 --> 00:07:20,965\nThey have alternate products today,\nbut then,\n\n146\n00:07:20,965 --> 00:07:25,680\nthey had invested thousands of dollars in\nthis fax board and can't virtualize that.\n\n147\n00:07:25,680 --> 00:07:29,770\nSo that's not a candidate for\nvirtualization right there.\n\n148\n00:07:29,770 --> 00:07:32,450\nThose are the things we need to be\naware of as we start to design.\n\n149\n00:07:34,120 --> 00:07:37,595\nAnother thing is, if we want\nredundancy and high availability,\n\n150\n00:07:37,595 --> 00:07:41,195\nif you want redundancy,\nthat means if one physical server failed,\n\n151\n00:07:41,195 --> 00:07:44,310\nanother one somewhere else is\ngonna jump in and take over.\n\n152\n00:07:44,310 --> 00:07:48,871\nThat means if I need 8 TB of RAM for\nthis VM and I need, I mean,\n\n153\n00:07:48,871 --> 00:07:53,254\nnot 8TB, 1 TB of RAM and\n8 TB of storage and 32 CPU's,\n\n154\n00:07:53,254 --> 00:07:58,010\nI need to have double that\navailable on two different servers.\n\n155\n00:07:58,010 --> 00:08:03,750\nIf I need 1 TB of RAM, I need one server\nwith one terrabyte for the VM to use.\n\n156\n00:08:03,750 --> 00:08:06,590\nAnd another server with\none terrabyte available.\n\n157\n00:08:06,590 --> 00:08:08,710\nWaiting for that VM.\n\n158\n00:08:08,710 --> 00:08:11,346\n>> And that can start adding up when\nyou've gotta have all those resources,\n\n159\n00:08:11,346 --> 00:08:12,420\njust sitting there waiting.\n\n160\n00:08:12,420 --> 00:08:13,820\nBut if you need that redundancy,\n\n161\n00:08:13,820 --> 00:08:16,960\nyou need to be able to flip that machine\nover from one server to the other.\n\n162\n00:08:16,960 --> 00:08:19,464\nAt this point it has a failure and\nwe've gotta have that available.\n\n163\n00:08:19,464 --> 00:08:21,170\n>> I know, I want one terrabyte of RAM.\n\n164\n00:08:21,170 --> 00:08:21,971\nI'd settle for just one.\n\n165\n00:08:21,971 --> 00:08:22,964\n>> I'll say.\n>> [LAUGH]\n\n166\n00:08:22,964 --> 00:08:23,771\n>> [LAUGH]\n\n167\n00:08:23,771 --> 00:08:24,837\n>> All right, so.\n\n168\n00:08:24,837 --> 00:08:27,620\nSo those are some things to be aware of.\n\n169\n00:08:27,620 --> 00:08:32,100\nAfter that, when it comes to virtualizing\nour systems and deploying VMs,\n\n170\n00:08:32,100 --> 00:08:36,360\nour primary concern is really\njust resource contention.\n\n171\n00:08:37,420 --> 00:08:41,520\nSystems butting heads against each\nother as they try and sort things out.\n\n172\n00:08:41,520 --> 00:08:45,200\nIf I have a physical\nmachine with eight cores,\n\n173\n00:08:45,200 --> 00:08:48,620\neight CPU cores, and\nI build up one VM, and\n\n174\n00:08:48,620 --> 00:08:53,070\nI give it four CPU cords, and I build up\nanother vm and I give it four cpu cords.\n\n175\n00:08:53,070 --> 00:08:55,580\nAm I gonna have resource contention?\n\n176\n00:08:55,580 --> 00:08:56,320\nNo.\nRight?\n\n177\n00:08:56,320 --> 00:09:00,360\nFour cords in each,\nI've got eight cords total, it's happy.\n\n178\n00:09:00,360 --> 00:09:05,300\nBut, when I bring up my very next VM,\neven if I just give it one cord,\n\n179\n00:09:05,300 --> 00:09:08,050\nthen I've now given out\nnine virtual cores.\n\n180\n00:09:08,050 --> 00:09:10,030\nI've only got eight physical cores.\n\n181\n00:09:10,030 --> 00:09:12,600\nSo now I get contention, right?\n\n182\n00:09:12,600 --> 00:09:13,840\nAnd that contention can be a problem.\n\n183\n00:09:13,840 --> 00:09:16,290\nThis is when you start to\nsee performance degrade.\n\n184\n00:09:16,290 --> 00:09:19,690\nVirtualization on a type one\nhypervisor like Hyper-V,\n\n185\n00:09:19,690 --> 00:09:22,350\nwill give you near wire speed.\n\n186\n00:09:22,350 --> 00:09:25,690\nYou'll function at almost the same\nspeed as you would if you were running\n\n187\n00:09:25,690 --> 00:09:28,480\non the actual hardware, on bare metal.\n\n188\n00:09:28,480 --> 00:09:30,550\nUntil you get resource contention.\n\n189\n00:09:30,550 --> 00:09:33,860\nThat's when your VM's start to slow down,\nand that's when people start complaining,\n\n190\n00:09:33,860 --> 00:09:35,555\nwhen I was on a physical\nserver this didn't happen.\n\n191\n00:09:35,555 --> 00:09:38,350\n>> Mm-hm.\n>> When you were on a physical server you\n\n192\n00:09:38,350 --> 00:09:40,170\nhad dedicated hardware,\nit was just for you.\n\n193\n00:09:40,170 --> 00:09:41,980\nYou didn't have contention.\n\n194\n00:09:41,980 --> 00:09:44,465\nWell, you contend with yourself I suppose,\nbut you can't get over that.\n\n195\n00:09:44,465 --> 00:09:46,690\n[LAUGH] But in a virtual environment,\n\n196\n00:09:46,690 --> 00:09:49,650\nyou contend with the other servers\nrunning on that physical hardware.\n\n197\n00:09:49,650 --> 00:09:52,070\nSo that's what our plan\nneeds to center around.\n\n198\n00:09:53,170 --> 00:09:55,180\n>> Yeah, it's very important,\nbecause all of a sudden,\n\n199\n00:09:55,180 --> 00:09:58,770\nnow we had a physical server, and\nit was running a lot of resources.\n\n200\n00:09:58,770 --> 00:10:01,580\nWell that server ran slow, and\nyou had to do something about it.\n\n201\n00:10:01,580 --> 00:10:06,030\nNow, in the virtualization, we've got many\nservers running on that Hyper-V host, and\n\n202\n00:10:06,030 --> 00:10:08,430\none server, one virtual machine,\n\n203\n00:10:08,430 --> 00:10:11,760\nsucking up all those resources can\nnot only impact that machine but\n\n204\n00:10:11,760 --> 00:10:15,170\nthe rest of your virtual machines that\nare running on a Hyper-V server as well.\n\n205\n00:10:15,170 --> 00:10:18,050\nSo, we really gotta make sure we've got\nenough resources we can spread out and\n\n206\n00:10:18,050 --> 00:10:21,202\nthat they're not fighting or\nas little as possible for those resources.\n\n207\n00:10:21,202 --> 00:10:24,710\n>> Yup, so if we're doing a design for\n\n208\n00:10:24,710 --> 00:10:28,880\nvirtual machine implementation,\nstep one is not to jump right in and\n\n209\n00:10:28,880 --> 00:10:32,130\nstart doing virtualization or\neven to think about Hyper-V at all.\n\n210\n00:10:32,130 --> 00:10:35,610\nStep one is to look at\nyour existing machines and\n\n211\n00:10:35,610 --> 00:10:37,750\nfigure out what the resource\nutilization is.\n\n212\n00:10:37,750 --> 00:10:39,590\nFire up your performance monitor.\n\n213\n00:10:39,590 --> 00:10:42,150\nOr if you've got it the system\ncenter operations manager right?\n\n214\n00:10:42,150 --> 00:10:44,000\nIt does a great job at doing this stuff..\n\n215\n00:10:44,000 --> 00:10:47,340\nand you need to build up\na profile of your machines.\n\n216\n00:10:47,340 --> 00:10:48,580\nAnd focus on the Big Four.\n\n217\n00:10:48,580 --> 00:10:52,535\nWe always talk about\nthe Big Four resources, CPU,\n\n218\n00:10:52,535 --> 00:10:54,780\n>> Processor, memory, disk and network.\n\n219\n00:10:54,780 --> 00:10:55,589\n>> Yep, thank you.\n\n220\n00:10:55,589 --> 00:10:57,497\n>> [LAUGH]\n>> [LAUGH] I can remember here,\n\n221\n00:10:57,497 --> 00:10:59,530\nlet me count my fingers\n>> But\n\n222\n00:10:59,530 --> 00:11:01,130\nyou've got to look at those big things,\nright.\n\n223\n00:11:01,130 --> 00:11:01,980\nCPU.\n\n224\n00:11:01,980 --> 00:11:06,240\nIf you've got a computer that is\nconsistently pegging out two CPUs at 100%,\n\n225\n00:11:06,240 --> 00:11:10,610\nthen when we move it over to a VM,\nit probably gonna do the same thing, and\n\n226\n00:11:10,610 --> 00:11:12,600\nwe gotta make sure we have\nthose resources available.\n\n227\n00:11:12,600 --> 00:11:13,380\nAll right.\n\n228\n00:11:13,380 --> 00:11:18,760\nIf it's generating thousands of Disks I/Os\nper second, that's a lot of disk activity.\n\n229\n00:11:18,760 --> 00:11:21,960\nWe may need to go dedicated disks for\nthat VM, right.\n\n230\n00:11:21,960 --> 00:11:23,780\nOr, maybe it doesn't generate\na lot of Disk I/Os and\n\n231\n00:11:23,780 --> 00:11:25,580\nit'll be able to play\nnicely with other people.\n\n232\n00:11:26,890 --> 00:11:28,810\nRAM's the easy one, right?\n\n233\n00:11:28,810 --> 00:11:31,190\nHow much RAM do you consume,\ntwo gigs, four gigs, eight gigs?\n\n234\n00:11:31,190 --> 00:11:32,550\nIt's easy to measure that one.\n\n235\n00:11:34,090 --> 00:11:35,510\nAnd then where'd I leave off?\n\n236\n00:11:35,510 --> 00:11:36,324\nNetwork.\n>> Network, yep.\n\n237\n00:11:36,324 --> 00:11:39,040\n>> Network bandwidth is the one\nthat's most commonly overlooked.\n\n238\n00:11:39,040 --> 00:11:42,770\nA lot of people say, well,\nI've got a 20 meg internet connection and\n\n239\n00:11:42,770 --> 00:11:45,560\nI've got a gigabyte network card so I'm\nnever gonna run out of bandwidth, right?\n\n240\n00:11:45,560 --> 00:11:47,130\nIt's bigger than my internet connection.\n\n241\n00:11:47,130 --> 00:11:50,730\nBut have a lot of local transfers that\nhappen too, things like backups and\n\n242\n00:11:50,730 --> 00:11:54,510\nsynchronizations, replication if\nyou're doing high availability.\n\n243\n00:11:54,510 --> 00:11:59,050\nThose all consume bandwidth, and if you've\ngot more than one vm sharing a network\n\n244\n00:11:59,050 --> 00:12:01,100\ninterface, they're all competing for\nthat bandwidth.\n\n245\n00:12:01,100 --> 00:12:01,950\nSo that's that fourth one.\n\n246\n00:12:03,070 --> 00:12:04,050\nSo you measure that,\n\n247\n00:12:04,050 --> 00:12:07,360\nyou track that across your physical\nmachines before you virtualize it.\n\n248\n00:12:08,660 --> 00:12:11,570\nIf this is new software\nthat's not deployed yet,\n\n249\n00:12:11,570 --> 00:12:13,790\nIt's pretty hard to know what\nthose numbers are gonna be.\n\n250\n00:12:13,790 --> 00:12:16,710\nYou can rely on the vendor, you can ask\nthem, sometimes they're honest with you.\n\n251\n00:12:16,710 --> 00:12:18,691\n>> I was gonna say, they're gonna\nmake it look really good aren't they.\n\n252\n00:12:18,691 --> 00:12:20,430\n[LAUGH]\n>> Yeah, this is super slick.\n\n253\n00:12:20,430 --> 00:12:22,590\nIt reminds me of my-\n>> Barely uses any RAM at all.\n\n254\n00:12:22,590 --> 00:12:25,690\n[LAUGH]\n>> Do you remember, this was years ago,\n\n255\n00:12:25,690 --> 00:12:30,280\nyou and I, we attended this thing, it was\na Microsoft presentation for Vista, and\n\n256\n00:12:30,280 --> 00:12:32,180\nthey had one of the evangelists come by,\nand\n\n257\n00:12:32,180 --> 00:12:35,520\nthey were talking about\nthe brand new Windows Vista.\n\n258\n00:12:35,520 --> 00:12:39,111\nAnd how awesome it was and\nhow it would run on old hardware.\n\n259\n00:12:39,111 --> 00:12:41,810\n>> [LAUGH]\n>> And he breaks out this laptop and\n\n260\n00:12:41,810 --> 00:12:43,400\nhe reads off the specs of the laptop,\nand I'm like,\n\n261\n00:12:43,400 --> 00:12:46,480\nyou know, I can go buy that\nlaptop right now in the store.\n\n262\n00:12:46,480 --> 00:12:47,975\nThat's not old hardware.\n\n263\n00:12:47,975 --> 00:12:49,980\n>> [LAUGH]\n>> So sometimes the vendors can\n\n264\n00:12:49,980 --> 00:12:51,880\ngive you a slightly skewed\nview of this stuff.\n\n265\n00:12:51,880 --> 00:12:53,350\n>> Little bit bias there, yeah.\n\n266\n00:12:53,350 --> 00:12:57,460\n>> But nothing is a better substitute than\nyou doing your own testing and measuring.\n\n267\n00:12:57,460 --> 00:13:01,830\nSo you can bring it up in a VM and test\nit out before moving it into production.\n\n268\n00:13:01,830 --> 00:13:05,510\nWhat you don't wanna do,\nis you don't wanna have two VMs that\n\n269\n00:13:05,510 --> 00:13:10,530\nare heavy CPU And\nput them on the same host, right.\n\n270\n00:13:10,530 --> 00:13:15,680\nIf you have one VM that's heavy CPU,\nlike a domain control, right,\n\n271\n00:13:15,680 --> 00:13:19,110\ndomain controllers are pretty heavy CPU,\npretty light on everything else,\n\n272\n00:13:19,110 --> 00:13:19,930\npretty heavy on CPU.\n\n273\n00:13:22,370 --> 00:13:26,200\nFile servers pretty heavy on Disc I/O and\nnetwork bandwidth.\n\n274\n00:13:26,200 --> 00:13:28,050\nAnd that's about it.\n\n275\n00:13:28,050 --> 00:13:31,300\nThose two servers will play nice together.\n\n276\n00:13:31,300 --> 00:13:33,260\nThe domain controller\nwants a bunch of CPU,\n\n277\n00:13:33,260 --> 00:13:37,535\nthe file server wants a bunch of bandwidth\nand Disk I/O, they're not competing.\n\n278\n00:13:37,535 --> 00:13:38,185\nRight?\n\n279\n00:13:38,185 --> 00:13:40,775\nThey'll play nice, you stick them\non the same host and they're happy.\n\n280\n00:13:40,775 --> 00:13:41,625\nRight?\n\n281\n00:13:41,625 --> 00:13:45,125\nBut, if I took two systems\nthat were both high CPU or\n\n282\n00:13:45,125 --> 00:13:48,915\nhigh memory, right, maybe I have\nan exchange server and a SQL server,\n\n283\n00:13:48,915 --> 00:13:51,915\nthey're both high memory, and put them on\nthe same host, they're contending now.\n\n284\n00:13:51,915 --> 00:13:53,675\nRight?\nThey're gonna butt heads as they try and\n\n285\n00:13:53,675 --> 00:13:55,415\naccess all the memory that they need.\n\n286\n00:13:55,415 --> 00:13:57,385\nSo understand your software.\n\n287\n00:13:58,395 --> 00:13:59,720\nBut what if we don't have time for that?\n\n288\n00:13:59,720 --> 00:14:00,630\n>> Right.\nWhat are my.\n\n289\n00:14:00,630 --> 00:14:02,460\n>> [LAUGH]\n>> I don't have time to profile\n\n290\n00:14:02,460 --> 00:14:03,140\nmy software.\n\n291\n00:14:03,140 --> 00:14:03,895\nI don't care about that.\n\n292\n00:14:03,895 --> 00:14:05,800\n>> [LAUGH]\n>> There are some other options.\n\n293\n00:14:05,800 --> 00:14:07,360\nAll right?\nAnd I think,\n\n294\n00:14:07,360 --> 00:14:11,230\nI feel like we talked about this in\nanother show, but I wanna mention it now.\n\n295\n00:14:11,230 --> 00:14:15,170\nIf you deploy the System Center\nVirtual Machine Manager, right.\n\n296\n00:14:15,170 --> 00:14:16,760\nSCVMM.\n>> Mm-hm.\n\n297\n00:14:16,760 --> 00:14:21,670\n>> The SCVMM has a really neat\nfeature called dynamic optimization.\n\n298\n00:14:21,670 --> 00:14:26,700\nAnd what Dynamic Optimization, or\nDO does is it monitors your servers.\n\n299\n00:14:26,700 --> 00:14:30,340\nAnd it monitors all those VMs and\nit looks at their resources.\n\n300\n00:14:30,340 --> 00:14:32,730\nAnd it will rebalance your servers for\nyou,\n\n301\n00:14:32,730 --> 00:14:36,630\nit'll move your VMs around\nto balance them out.\n\n302\n00:14:36,630 --> 00:14:41,560\nAnd that's really cool because your\nservers might not always behave the same.\n\n303\n00:14:41,560 --> 00:14:44,470\nThere might be certain times\nthat they were the high CPU and\n\n304\n00:14:44,470 --> 00:14:47,890\nother times they were the high\nDisk I/O and it varies, right.\n\n305\n00:14:47,890 --> 00:14:52,350\nSo, DO monitors that all the time and\nit's kind of a fun thing.\n\n306\n00:14:52,350 --> 00:14:53,760\n>> That's pretty sweet.\n\n307\n00:14:53,760 --> 00:14:55,184\n>> I always said it was fun cuz.\n\n308\n00:14:55,184 --> 00:15:00,550\n[LAUGH] I worked at a bank that\nhad a pretty large server farm,\n\n309\n00:15:00,550 --> 00:15:03,830\nand our Hyper-V deployment\nwas pretty large.\n\n310\n00:15:03,830 --> 00:15:08,390\nWe had a good 60 Hyper-V servers,\nand when you're doing dynamic\n\n311\n00:15:08,390 --> 00:15:13,470\noptimization across them, you'd come in\nin the morning and you'd say, all right,\n\n312\n00:15:13,470 --> 00:15:17,295\nI need to take this one machine off\nline and figure out what host it's on.\n\n313\n00:15:17,295 --> 00:15:17,980\n>> [LAUGH]\n>> Oh and\n\n314\n00:15:17,980 --> 00:15:20,950\nyou wouldn't know, you'd have to look\nthrough all these different hosts and\n\n315\n00:15:20,950 --> 00:15:23,530\nyou didn't know where it was gonna\nbe cause DO moved them around.\n\n316\n00:15:23,530 --> 00:15:26,260\nNow if you're using the SCVMM you\ndon't care what host they're on,\n\n317\n00:15:26,260 --> 00:15:29,840\nyou go into the panel and you see the VM\nso it's not like a problem, it's just fun.\n\n318\n00:15:29,840 --> 00:15:31,790\nIt's kind of neat that you\ndon't necessarily know what\n\n319\n00:15:31,790 --> 00:15:35,370\nhardware it's running on,\nDO'll take care of it for you.\n\n320\n00:15:35,370 --> 00:15:36,480\nBut you don't need SCVMM,\n\n321\n00:15:36,480 --> 00:15:38,700\nyou don't need Dynamic Opposition,\nyou can do it yourself.\n\n322\n00:15:38,700 --> 00:15:39,220\n>> Right.\n\n323\n00:15:39,220 --> 00:15:41,370\n>> If you look at the servers and\nunderstand it.\n\n324\n00:15:41,370 --> 00:15:45,280\nFor the exam, Microsoft's going to expect\nyou to know the performance profiles\n\n325\n00:15:45,280 --> 00:15:47,190\nof a couple of their products.\n\n326\n00:15:47,190 --> 00:15:50,140\nBut in real life, you're gonna wanna know\nall the products that you deal with.\n\n327\n00:15:50,140 --> 00:15:52,050\nAnd unfortunately,\neverybody uses different products.\n\n328\n00:15:52,050 --> 00:15:54,550\nYou'll have to kind of break those down.\n\n329\n00:15:54,550 --> 00:15:57,840\nAll right, so\nMike let's run over some of these.\n\n330\n00:15:57,840 --> 00:16:01,260\nWe'll post these in the show notes so\nyou guys have access to them.\n\n331\n00:16:01,260 --> 00:16:04,261\nBut, we kind of wrote up some quick\nnotes on some of the different\n\n332\n00:16:04,261 --> 00:16:06,890\nMicrosoft products and\nwhat their profiles were like.\n\n333\n00:16:06,890 --> 00:16:09,510\nNow I already mentioned\ndomain controllers, right?\n\n334\n00:16:09,510 --> 00:16:10,760\n>> CPU intensive.\n\n335\n00:16:10,760 --> 00:16:14,476\n>> They're very CPU intensive\nbecause they're doing\n\n336\n00:16:14,476 --> 00:16:19,300\ntheir constant replication all of\ntheir LDAP queries and look ups.\n\n337\n00:16:19,300 --> 00:16:22,050\nThey're basically data base servers\ndoing one of those lookups.\n\n338\n00:16:22,050 --> 00:16:24,810\nBut they're a little more efficient than\na normal database because the active\n\n339\n00:16:24,810 --> 00:16:28,340\ndirectory database is pretty small,\nso it normally fits in RAM.\n\n340\n00:16:28,340 --> 00:16:31,590\nSo, all of it's queries are running in\nRAM, it doesn't need a ton of memory for\n\n341\n00:16:31,590 --> 00:16:34,020\nit, and so CPU is where the bulk\nof that work is happening.\n\n342\n00:16:35,310 --> 00:16:39,480\nBut there are some special things we need\nto remember about domain controllers.\n\n343\n00:16:39,480 --> 00:16:42,970\nA couple of things that can be a little\nquirky if we're going to be deploying them\n\n344\n00:16:42,970 --> 00:16:43,790\nas a virtual machine.\n\n345\n00:16:45,260 --> 00:16:48,660\nFirst off, if you're migrating\nphysical machines to virtual,\n\n346\n00:16:48,660 --> 00:16:51,800\nif you're doing p to v,\ndon't do that for your domain.\n\n347\n00:16:52,920 --> 00:16:54,220\nYou can.\n\n348\n00:16:54,220 --> 00:16:55,930\nWhat's the old Jeff Koviak saying?\n\n349\n00:16:55,930 --> 00:16:57,350\nYou can do that.\n\n350\n00:16:57,350 --> 00:16:58,940\nIt won't work, but you can do it.\n\n351\n00:16:58,940 --> 00:17:00,180\n>> Yeah, you can do it.\n\n352\n00:17:00,180 --> 00:17:02,590\nAnd there's really no need to,\nright, with a domain controller?\n\n353\n00:17:02,590 --> 00:17:06,035\nI mean it's just as easy, why spend\nall this time trying to migrate this\n\n354\n00:17:06,035 --> 00:17:09,035\ndomain controller over, when you can\njust bring up a new domain controller.\n\n355\n00:17:09,035 --> 00:17:11,533\nThey're going to replicate with\nyour existing domain controllers\n\n356\n00:17:11,533 --> 00:17:12,535\npretty quickly.\n\n357\n00:17:12,535 --> 00:17:14,715\nAnd then you demote the old\ndomain controller, right?\n\n358\n00:17:14,715 --> 00:17:15,245\nAnd you're good to go.\n\n359\n00:17:15,245 --> 00:17:17,740\nAnd you don't have to worry\nabout the migration process.\n\n360\n00:17:17,740 --> 00:17:20,110\nWorrying about any roles\ngetting goofed up or\n\n361\n00:17:20,110 --> 00:17:23,550\nanything like that during that\nmigration process it's a lot easier.\n\n362\n00:17:23,550 --> 00:17:24,860\n>> Yeah, so don't build new ones.\n\n363\n00:17:24,860 --> 00:17:28,060\nI mean don't migrate old ones,\nbuild new ones.\n\n364\n00:17:28,060 --> 00:17:30,200\nI'm saying don't do the exact\nthing you're supposed to.\n\n365\n00:17:30,200 --> 00:17:31,230\nBuild new ones right.\n\n366\n00:17:31,230 --> 00:17:32,930\nJust bring up a new VM.\n\n367\n00:17:32,930 --> 00:17:36,090\nIf there were some fsmo roles involved\nyou might need to move those over.\n\n368\n00:17:36,090 --> 00:17:38,600\nThat's a trivial thing,\nyou can do it in the middle of the day.\n\n369\n00:17:38,600 --> 00:17:40,970\nIt really causes no impact on your system.\n\n370\n00:17:40,970 --> 00:17:43,440\n>> In fact in 2012 now it does it for you.\n\n371\n00:17:43,440 --> 00:17:46,930\nIt used to be where you had to think about\nthat and go in and actually transfer\n\n372\n00:17:46,930 --> 00:17:50,920\nthe roles first and now, the wizard will\nprompt you,hey this is a role holder.\n\n373\n00:17:50,920 --> 00:17:51,760\nYou want me to move these?\n\n374\n00:17:51,760 --> 00:17:54,160\nIt'll even find another domain\ncontroller that it can move them to and\n\n375\n00:17:54,160 --> 00:17:55,570\nthings like that when you demote it.\n\n376\n00:17:55,570 --> 00:17:58,010\nWhen you demote that domain\ncontroller properly.\n\n377\n00:17:58,010 --> 00:18:00,750\n>> The only one that's truly\nsensitive is the PDC emulator.\n\n378\n00:18:00,750 --> 00:18:03,660\nThat one you probably do want to move\nafter hours just to be on the safe side,\n\n379\n00:18:03,660 --> 00:18:06,000\nbut you can move it in\nthe middle of the day.\n\n380\n00:18:06,000 --> 00:18:08,690\nIt can cause some problems if people\nare changing their passwords right at that\n\n381\n00:18:08,690 --> 00:18:09,550\ntime, that kind of stuff.\n\n382\n00:18:11,040 --> 00:18:14,600\nSo that's our first thing to be aware\nof with those domain controllers.\n\n383\n00:18:14,600 --> 00:18:17,050\nAnother thing to be aware\nof with domain controllers\n\n384\n00:18:17,050 --> 00:18:21,140\nis there's some functionality in\nHyper-V that we need to stay away from.\n\n385\n00:18:21,140 --> 00:18:24,100\nAnd it does kind of depend\non your Hyper-V server.\n\n386\n00:18:24,100 --> 00:18:29,260\nIf you're running Hyper-V on top of\nWindows Server 2008 or 2008 R2, then\n\n387\n00:18:30,410 --> 00:18:35,960\ndo not use checkpoints or\nsnapshots with your domain controllers.\n\n388\n00:18:35,960 --> 00:18:37,110\n>> No, a bad thing.\n\n389\n00:18:37,110 --> 00:18:39,780\n>> Yeah, the problem when you take\na snapshot of a domain controller,\n\n390\n00:18:39,780 --> 00:18:41,630\nis that snapshot is\nkind of frozen in time.\n\n391\n00:18:42,750 --> 00:18:45,730\nAnd then maybe a month goes by,\nand something happens, and\n\n392\n00:18:45,730 --> 00:18:47,740\nyou decide I'm going to\nrestore that snapshot.\n\n393\n00:18:47,740 --> 00:18:50,240\nWell, what's just happened is\nwhat's called a time shift.\n\n394\n00:18:50,240 --> 00:18:52,180\nThe time is completely off.\n\n395\n00:18:52,180 --> 00:18:54,990\nAnd when that domain controller\ncomes up with the wrong time.\n\n396\n00:18:54,990 --> 00:18:57,130\nWith this huge gap in time.\n\n397\n00:18:57,130 --> 00:18:58,600\nIt basically breaks.\n\n398\n00:18:58,600 --> 00:19:01,120\nAnd it's not able to talk to\nthe other domain controllers.\n\n399\n00:19:01,120 --> 00:19:02,530\nAnd now the DC is dead in the water.\n\n400\n00:19:02,530 --> 00:19:04,150\n>> Yeah.\nAnd you're going to have problems with it.\n\n401\n00:19:04,150 --> 00:19:05,595\nThe updated sequence numbers.\n\n402\n00:19:05,595 --> 00:19:07,050\nBecause you know when they replicate.\n\n403\n00:19:07,050 --> 00:19:09,800\nThey use those update\nsequence numbers as USNs so\n\n404\n00:19:09,800 --> 00:19:11,400\nthat they know if they've\ngot the latest version.\n\n405\n00:19:11,400 --> 00:19:14,220\nHey do I need to replicate this,\noh you've already got the latest version,\n\n406\n00:19:14,220 --> 00:19:15,360\nwe're good to go.\n\n407\n00:19:15,360 --> 00:19:18,900\nWell think about it, if you roll\nthat domain controller back in time,\n\n408\n00:19:18,900 --> 00:19:21,355\nyou're going to roll\nthat If USN back in time.\n\n409\n00:19:21,355 --> 00:19:25,675\nSo now to the other domain controllers,\nit looks like he's already caught up and\n\n410\n00:19:25,675 --> 00:19:27,775\nhe's not going to replicate.\n\n411\n00:19:27,775 --> 00:19:30,545\nThe replication's going to fail.\n\n412\n00:19:30,545 --> 00:19:35,045\nSo, what they've got now is that new\nvirtual machine generation ID that we can\n\n413\n00:19:35,045 --> 00:19:41,020\ndo if you're running 2012 as\nyour host on the Hyper-V server.\n\n414\n00:19:41,020 --> 00:19:43,490\nAnd the guest domain\ncontroller's running 2012.\n\n415\n00:19:43,490 --> 00:19:47,560\nBut even then, so what that does is it\ncreates a virtual machine generation ID.\n\n416\n00:19:47,560 --> 00:19:51,660\nIt creates this number that gets stored\nin Active Directory as well as the BIOS.\n\n417\n00:19:51,660 --> 00:19:55,660\nAnd when that domain controller boots back\nup, it's going to compare those numbers.\n\n418\n00:19:55,660 --> 00:19:57,440\nAnd if they're the same everything's good,\n\n419\n00:19:57,440 --> 00:20:01,210\nif they're different it knows that it's\nrolled back, and it basically presents\n\n420\n00:20:01,210 --> 00:20:04,040\nitself as a new domain controller\nto the rest of the network, so\n\n421\n00:20:04,040 --> 00:20:07,580\nthat they'll insure that they catch\nhim up and replicate all of those.\n\n422\n00:20:07,580 --> 00:20:10,750\nBut even then, Microsoft does not\nrecommend that we use those checkpoints,\n\n423\n00:20:10,750 --> 00:20:12,350\nthere's just too many\nthings that can go wrong.\n\n424\n00:20:12,350 --> 00:20:15,190\nThe RID pool is another thing that\nhas to be inactivated, all right,\n\n425\n00:20:15,190 --> 00:20:18,030\nbecause we've talked about the RIDs and\nother shows that they have to be unique\n\n426\n00:20:18,030 --> 00:20:22,690\nwhen we create new objects you roll him\nback in time he loses track of what\n\n427\n00:20:22,690 --> 00:20:27,180\nRID was next and he can end up using a\nduplicate RID, which we can't have happen,\n\n428\n00:20:27,180 --> 00:20:31,380\nso a lot of problems rolling back the main\ncontrollers, don't really want to do that.\n\n429\n00:20:31,380 --> 00:20:33,860\n>> And Microsoft has been\nexpanding that virtual machine,\n\n430\n00:20:33,860 --> 00:20:37,400\na generation ID they've kind of been\nexpanding that functionality over the last\n\n431\n00:20:37,400 --> 00:20:39,850\neven last few months,\nthere's been some new activity on it.\n\n432\n00:20:39,850 --> 00:20:43,440\nSo it is getting better,\nbut as of right now,\n\n433\n00:20:43,440 --> 00:20:45,870\nit's really not a good idea\nto do those snapshots.\n\n434\n00:20:45,870 --> 00:20:48,230\nAs long as you're backing\nup the system state or\n\n435\n00:20:48,230 --> 00:20:51,910\ndoing a full bare metal backup\nof your domain controllers,\n\n436\n00:20:51,910 --> 00:20:55,080\nit's easier to restore from those but\nas long as you have one domain controller\n\n437\n00:20:55,080 --> 00:20:58,740\nfunctioning somewhere, you really never\nshould have to go to your backups.\n\n438\n00:20:58,740 --> 00:21:02,160\nYou've got deleted item recovery now,\nyou've got other functionality like that,\n\n439\n00:21:02,160 --> 00:21:05,090\nso stuff like a snapshot really\njust shouldn't come into play.\n\n440\n00:21:05,090 --> 00:21:07,580\nIf you damage a domain controller,\nlike you're doing a service pack and\n\n441\n00:21:07,580 --> 00:21:09,240\nthings get hosed up.\n\n442\n00:21:09,240 --> 00:21:10,250\nWell, you just spin up a new one.\n\n443\n00:21:10,250 --> 00:21:12,700\nIt goes back to that whole 'don't migrate,\nbuild a new one'.\n\n444\n00:21:12,700 --> 00:21:14,710\nIt's easy enough to build a new DC,\nand off you go.\n\n445\n00:21:14,710 --> 00:21:18,200\nI guess the only time that you bump\ninto problems there is if you had\n\n446\n00:21:18,200 --> 00:21:21,760\nother services running on\nthat domain controller and\n\n447\n00:21:21,760 --> 00:21:23,900\nthat's not a great idea either,\nso just be aware of that.\n\n448\n00:21:25,130 --> 00:21:28,620\nBut otherwise, domain controllers\nare pretty low intense, intensivity?\n\n449\n00:21:29,970 --> 00:21:30,670\n>> That's not a word.\n\n450\n00:21:30,670 --> 00:21:32,200\n>> Anyhow, intensity.\n\n451\n00:21:32,200 --> 00:21:32,900\nThere we go.\n\n452\n00:21:32,900 --> 00:21:36,410\nThey're pretty low intensity, so\nthey make great candidates for\n\n453\n00:21:36,410 --> 00:21:38,110\nthrowing on a virtualization\ninfrastructure.\n\n454\n00:21:39,240 --> 00:21:45,028\nAnother thing to be aware of, if you're\ndoing a fail-over cluster in Hyper-V,\n\n455\n00:21:45,028 --> 00:21:48,700\nwhere's your fail-over\nconfiguration stored?\n\n456\n00:21:48,700 --> 00:21:51,140\nWell, by default it's stored\nin the active directory.\n\n457\n00:21:51,140 --> 00:21:53,740\nNow if it's a stand alone\ncluster it doesn't have to be.\n\n458\n00:21:53,740 --> 00:21:55,050\nIt can be stored locally.\n\n459\n00:21:55,050 --> 00:22:00,260\nBut if it's stored in the active directory\nand your domain controller's RVMS\n\n460\n00:22:00,260 --> 00:22:04,620\non that cluster, what's going to happen\nif you ever need to reboot that cluster.\n\n461\n00:22:04,620 --> 00:22:06,360\nThe domain controllers aren't enough.\n\n462\n00:22:06,360 --> 00:22:11,100\nSo you need to maintain at least\none physical domain controller\n\n463\n00:22:11,100 --> 00:22:15,880\nsomewhere that's outside of that cluster,\nso that if the cluster ever has to reboot,\n\n464\n00:22:15,880 --> 00:22:18,476\nthere'll be a domain controller\navailable for you to get to that.\n\n465\n00:22:18,476 --> 00:22:19,640\n>> Yeah,\nreally got to make sure you're looking for\n\n466\n00:22:19,640 --> 00:22:21,340\nyour single points of failure\nwith the active directory.\n\n467\n00:22:21,340 --> 00:22:23,020\nI mean, you could run another cluster,\nI guess, and\n\n468\n00:22:23,020 --> 00:22:26,250\nput some domain controllers on there or if\nyou're not doing clustering, you're doing\n\n469\n00:22:26,250 --> 00:22:29,750\nhyper v host we can make sure that we have\nthe main controllers on multiple hosts.\n\n470\n00:22:29,750 --> 00:22:31,450\nBecause the same thing's\ngoing to happen there.\n\n471\n00:22:31,450 --> 00:22:33,820\nIs the host part of your active directory?\n\n472\n00:22:33,820 --> 00:22:36,970\nIf it's internal a private\ncloud it very well could be and\n\n473\n00:22:36,970 --> 00:22:39,860\nagain it can't boot up if it's looking for\nthe domain\n\n474\n00:22:39,860 --> 00:22:42,480\ncontrollers that are virtualized\nthat are waiting on it to boot up.\n\n475\n00:22:42,480 --> 00:22:44,350\nRight?\nSo make sure you have more than one\n\n476\n00:22:44,350 --> 00:22:46,850\nvirtual host make sure your domain\ncontrollers are just spread across\n\n477\n00:22:46,850 --> 00:22:48,930\nmultiple, or as Don said,\njust have one physical.\n\n478\n00:22:48,930 --> 00:22:52,090\nI think that's the best way to go.\n\n479\n00:22:52,090 --> 00:22:56,470\n>> Yeah, it's easy enough to do and\nit is just a good idea in general right?\n\n480\n00:22:56,470 --> 00:23:00,800\nYou have that one physical It's nice to\nvirtualize as much stuff as you can, but\n\n481\n00:23:00,800 --> 00:23:03,020\nthere's some things that\nare better just left out.\n\n482\n00:23:03,020 --> 00:23:04,790\nI'm not saying all domain controllers,\nright?\n\n483\n00:23:04,790 --> 00:23:06,370\nYou can definitely throw\nmost of them in there.\n\n484\n00:23:06,370 --> 00:23:08,550\n>> Exactly, redundancy, and\nthings like that, yes, spin up more,\n\n485\n00:23:08,550 --> 00:23:12,020\nbut have that one little physical\ndomain controller sitting there for\n\n486\n00:23:12,020 --> 00:23:15,370\nthat disaster scenario when if things go\nbad, then you need to bring those back up.\n\n487\n00:23:17,690 --> 00:23:19,250\n>> All right.\nSo, that's pretty much it for\n\n488\n00:23:19,250 --> 00:23:20,170\ndomain controllers.\n\n489\n00:23:20,170 --> 00:23:21,710\nRight?\nThey are a great candidate to throw into\n\n490\n00:23:21,710 --> 00:23:24,810\nvirtualization because it's so\neasy to get them in there.\n\n491\n00:23:24,810 --> 00:23:27,860\nSome of the other types of servers that\nwe might move are a little bit more\n\n492\n00:23:27,860 --> 00:23:28,540\nchallenging.\n\n493\n00:23:28,540 --> 00:23:29,040\nRight?\n\n494\n00:23:29,040 --> 00:23:30,150\nLike Microsoft SQL Server.\n\n495\n00:23:30,150 --> 00:23:33,930\nNow, SQL Server itself will run\nin a virtual machine just fine.\n\n496\n00:23:33,930 --> 00:23:35,530\nIt's fully supported by Microsoft.\n\n497\n00:23:35,530 --> 00:23:37,770\nThey've been doing that since Sequel 2008.\n\n498\n00:23:37,770 --> 00:23:38,690\nThey won't bat an eye.\n\n499\n00:23:38,690 --> 00:23:41,200\nIf you call up for tech support,\nand you say it's Sequel and\n\n500\n00:23:41,200 --> 00:23:42,550\nI'm running on Hyper V.\n\n501\n00:23:42,550 --> 00:23:43,830\nOkay, right.\n\n502\n00:23:43,830 --> 00:23:46,860\nRemember the days when you'd call and\nyou'd say, oh, I'm running it on.\n\n503\n00:23:46,860 --> 00:23:49,170\nWhatever virtualization product it was,\nand they said oh,\n\n504\n00:23:49,170 --> 00:23:50,470\nwe don't support a virtual box.\n\n505\n00:23:50,470 --> 00:23:51,374\n>> Click, yeah.\n[LAUGH]\n\n506\n00:23:51,374 --> 00:23:51,938\n>> And that was it.\n\n507\n00:23:51,938 --> 00:23:53,310\nThat was the end of the support call.\n\n508\n00:23:53,310 --> 00:23:54,420\nSo they do support it now.\n\n509\n00:23:54,420 --> 00:23:57,390\nSo no big deal there,\nyou can throw SQL in there.\n\n510\n00:23:57,390 --> 00:23:59,800\nBut, just because you can\ndoesn't mean you should.\n\n511\n00:23:59,800 --> 00:24:03,970\nAnd one of the big deals with\nSQL is just simply Performance.\n\n512\n00:24:03,970 --> 00:24:06,090\nMicrosoft sequel's a database server.\n\n513\n00:24:06,090 --> 00:24:09,430\nThat means it's constantly doing\nlookups against a database.\n\n514\n00:24:09,430 --> 00:24:11,350\nIt takes a lot of memory.\n\n515\n00:24:11,350 --> 00:24:12,920\nAs much memory as you can get it normally.\n\n516\n00:24:12,920 --> 00:24:14,420\n>> Yeah it will eat it up quick.\n\n517\n00:24:14,420 --> 00:24:19,070\n>> And disk IO it's got to read from the\ndisk and it's got to read from it quickly.\n\n518\n00:24:19,070 --> 00:24:22,000\nUnlike the active directory database\nwhich is usually pretty small.\n\n519\n00:24:22,000 --> 00:24:28,140\nYour sequel databases can be very very\nlarge often times larger than your memory.\n\n520\n00:24:28,140 --> 00:24:30,560\nAnd so you get these indexes\nbuilt on the database, and\n\n521\n00:24:30,560 --> 00:24:32,580\nthe indexes get stored in memory.\n\n522\n00:24:32,580 --> 00:24:35,600\nBut the database itself is still\non disc so disk I/O is a big deal.\n\n523\n00:24:36,700 --> 00:24:41,110\nWell, if your virtual discs for\nyour SQL server are stored in VHDs.\n\n524\n00:24:41,110 --> 00:24:45,410\nAnd the VHDs are in a, lets say\nthey're in a cluster shared volume.\n\n525\n00:24:45,410 --> 00:24:48,830\nSo they're right beside VHDs for\nother VMs.\n\n526\n00:24:48,830 --> 00:24:53,170\nAs that SQL server starts generating\ndisc I/O that's tying up the hard drive\n\n527\n00:24:53,170 --> 00:24:57,020\nheads for the other virtual machines who\nare trying to read from the same discs and\n\n528\n00:24:57,020 --> 00:24:58,570\nnow you get contention.\n\n529\n00:24:58,570 --> 00:25:03,570\nYou get restricted access to the hard\ndrives that you wouldn't have had if\n\n530\n00:25:03,570 --> 00:25:06,830\nyou were on a physical box and so\na lot of people really worry about that.\n\n531\n00:25:06,830 --> 00:25:09,860\nThey say, well I'm not going to virtualize\npeople cause I need it to have the best\n\n532\n00:25:09,860 --> 00:25:10,740\nperformance possible.\n\n533\n00:25:12,190 --> 00:25:16,030\nJust because you can get poor performance\nin a virtualization environment doesn't\n\n534\n00:25:16,030 --> 00:25:18,600\nmean you have to,\nyou just have to plan for it, right?\n\n535\n00:25:18,600 --> 00:25:20,160\nSo what are some of the things we can do,\nMike,\n\n536\n00:25:20,160 --> 00:25:22,320\nto guarantee that we get good disk I/O?\n\n537\n00:25:22,320 --> 00:25:24,510\n>> Give it its own drives, puts its own.\n\n538\n00:25:24,510 --> 00:25:26,920\nGive it access to its own\nweekly pass through discs.\n\n539\n00:25:26,920 --> 00:25:28,300\nThey don't call them pass\nthrough discs anymore.\n\n540\n00:25:28,300 --> 00:25:31,380\nWe do something like that where we\ngive it access to physical drives.\n\n541\n00:25:31,380 --> 00:25:34,429\nI would put it on its own cluster share\nvolume that you're not sharing with other\n\n542\n00:25:34,429 --> 00:25:35,213\nvirtual machines.\n\n543\n00:25:36,510 --> 00:25:40,210\n>> So, passthrough disks, that's one way,\nwhen you do passthrough disks,\n\n544\n00:25:40,210 --> 00:25:44,150\njust be aware to create some\ncomplexities with doing failover, right?\n\n545\n00:25:44,150 --> 00:25:47,490\nIf I've got a cluster, and\nI jump from one node to another,\n\n546\n00:25:47,490 --> 00:25:50,910\neach node needs to have access\nto that same passthrough disk.\n\n547\n00:25:50,910 --> 00:25:53,830\nThe other thing is, just because\nit's a path through disc doesn't\n\n548\n00:25:53,830 --> 00:25:55,620\nmean you're not getting contention.\n\n549\n00:25:55,620 --> 00:25:58,330\nYou do have exclusive access to that disc,\nbut\n\n550\n00:25:58,330 --> 00:26:01,810\nlet's say that your clusters\nare connected to a fiber channel san.\n\n551\n00:26:01,810 --> 00:26:05,680\nSo you've got fiber channel to\na switch and the switch to a san.\n\n552\n00:26:05,680 --> 00:26:07,920\nAnd the pass through disc is on the san.\n\n553\n00:26:07,920 --> 00:26:11,210\nIf your server only has\none fiber channel adaptor,\n\n554\n00:26:11,210 --> 00:26:14,770\nall of your disc activity is\ngoing over that one adaptor.\n\n555\n00:26:14,770 --> 00:26:19,190\nSo if you're going to go to the steps of\ndoing a pass-through disk, you should\n\n556\n00:26:19,190 --> 00:26:23,520\ndo a dedicated HVA also, a dedicated\nhard driver controller for that VM.\n\n557\n00:26:23,520 --> 00:26:26,520\nYou start to lose some of the advantages\nof virtualizing when you start doing\n\n558\n00:26:26,520 --> 00:26:27,910\ndedicated hardware like this.\n\n559\n00:26:27,910 --> 00:26:31,600\nBut you have an HVA that is\nspecifically dedicated just for\n\n560\n00:26:31,600 --> 00:26:35,370\nthat database server, and let all your\nother VMs use that other HVA, right.\n\n561\n00:26:35,370 --> 00:26:37,010\nThat's one way to get\nthat exclusive access.\n\n562\n00:26:38,320 --> 00:26:42,360\nAnother thing that we can do is\nto make sure that the VHDs for\n\n563\n00:26:42,360 --> 00:26:46,270\nit are stored on a separate\nLAN from the other VHDs.\n\n564\n00:26:46,270 --> 00:26:50,610\nYou can do one big CSV,\none big cluster shared volume,\n\n565\n00:26:50,610 --> 00:26:52,450\nand put all of your VHDs on it.\n\n566\n00:26:52,450 --> 00:26:54,950\nMakes it real easy when\nit comes to fail-over.\n\n567\n00:26:54,950 --> 00:26:56,840\nBut if they're all in one big LAN,\n\n568\n00:26:56,840 --> 00:27:00,850\nthat means they're all on the same\nphysical disks, and they're contending.\n\n569\n00:27:00,850 --> 00:27:04,950\nBut if we put the database on a separate\nlot, it's separate physical disks.\n\n570\n00:27:04,950 --> 00:27:08,710\nSure we might be still sharing that\nsame hard drive controller, but\n\n571\n00:27:08,710 --> 00:27:10,220\nnow it's a separate LAN and so\n\n572\n00:27:10,220 --> 00:27:14,630\nit's different physical hard drive heads\ndoing the work for our reads and writes.\n\n573\n00:27:14,630 --> 00:27:18,530\nAnd because it's still just a LAN,\nit's still just a volume in our cluster,\n\n574\n00:27:18,530 --> 00:27:23,642\nit can fail-over really easy without\nthe complexities of an I/O disk.\n\n575\n00:27:23,642 --> 00:27:25,980\nSo those are a couple of\nthings that we can do there.\n\n576\n00:27:25,980 --> 00:27:30,130\nJust remember when you go to figure out\nwhere you're going to put that SQL server,\n\n577\n00:27:30,130 --> 00:27:33,940\nRAM and disk I/O, those are the two\nbig things for the SQL server.\n\n578\n00:27:33,940 --> 00:27:37,070\nSo don't stick it on a box that's\ngot a lot of other systems that\n\n579\n00:27:37,070 --> 00:27:37,850\nare generating disk I/O.\n\n580\n00:27:37,850 --> 00:27:39,010\nYou're going to get contention.\n\n581\n00:27:39,010 --> 00:27:42,300\nAll right,\nlet's see who's next in our list.\n\n582\n00:27:42,300 --> 00:27:43,530\nOh, my favorite.\n\n583\n00:27:43,530 --> 00:27:45,930\n>> Your absolute favorite,\nSharePoint Server.\n\n584\n00:27:47,230 --> 00:27:48,859\n>> Yeah.\nGood old Microsoft SharePoint.\n\n585\n00:27:49,910 --> 00:27:50,430\nSharePoint.\n\n586\n00:27:50,430 --> 00:27:52,448\n>> We can't bash it right.\n\n587\n00:27:52,448 --> 00:27:57,760\n>> My mom always said if you can't say\nsomething nice don't say anything at all.\n\n588\n00:27:57,760 --> 00:28:00,250\nBut I get paid to say something.\n\n589\n00:28:00,250 --> 00:28:02,275\nSo, SharePoint.\n\n590\n00:28:02,275 --> 00:28:05,035\nAt the end of the day what is SharePoint?\n\n591\n00:28:05,035 --> 00:28:06,235\nIt's two thing.\n\n592\n00:28:06,235 --> 00:28:07,985\nIt's a web server.\n\n593\n00:28:07,985 --> 00:28:10,575\nA very, very busy web server.\n\n594\n00:28:10,575 --> 00:28:12,535\nAnd it's a database server.\n\n595\n00:28:12,535 --> 00:28:15,457\nA very, very big database, right.\n\n596\n00:28:15,457 --> 00:28:21,267\nSharePoint is a performance hog,\nI shouldn't call it a hog, it's very\n\n597\n00:28:21,267 --> 00:28:26,037\npowerful software and it manages a lot of\ndata even the default install right out\n\n598\n00:28:26,037 --> 00:28:29,577\nof the box has got a lot of data that it's\nmanaging and so it's got special needs.\n\n599\n00:28:30,850 --> 00:28:34,190\nFirst off, any production share point\ndeployment should be at least two VM's.\n\n600\n00:28:34,190 --> 00:28:38,240\nYou can deploy it on one, and\nthat's great for lab and tests, but\n\n601\n00:28:38,240 --> 00:28:41,020\nin production you need to split them off\nand so what you're going to have is at\n\n602\n00:28:41,020 --> 00:28:45,810\na minimum.: One web front end and\none database backend.\n\n603\n00:28:45,810 --> 00:28:47,510\nAll right?\n\n604\n00:28:47,510 --> 00:28:50,200\nWell, the database backend,\nthat's a SQL Server.\n\n605\n00:28:50,200 --> 00:28:54,090\nSo everything we just said about SQL\nServer is true for SharePoint's backend.\n\n606\n00:28:54,090 --> 00:28:54,900\nAll right?\n\n607\n00:28:54,900 --> 00:28:56,380\nSo, that kind of knocks that out.\n\n608\n00:28:56,380 --> 00:28:58,740\nDisk I/O, RAM,\nthink about passthrough disks,\n\n609\n00:28:58,740 --> 00:29:03,910\nthink about dedicated LANs or\ndedicated drives for that to be stored on.\n\n610\n00:29:03,910 --> 00:29:05,220\nThat all holds true for the backend.\n\n611\n00:29:05,220 --> 00:29:07,640\nBut what about that front-end?\n\n612\n00:29:07,640 --> 00:29:09,110\nRight?\n>> Or a web server.\n\n613\n00:29:09,110 --> 00:29:12,820\n>> For a web server,\ndisk IO is almost negligible, right?\n\n614\n00:29:12,820 --> 00:29:14,840\nYou have web pages that\ndon't change very often.\n\n615\n00:29:14,840 --> 00:29:16,260\nMost of the web content for\n\n616\n00:29:16,260 --> 00:29:21,040\nSharePoint is dynamically pulled from the\ndatabase, not from the web server itself.\n\n617\n00:29:21,040 --> 00:29:22,215\nThere's very little on the web server.\n\n618\n00:29:22,215 --> 00:29:25,806\nSo disk I/O not much.\n\n619\n00:29:25,806 --> 00:29:29,600\nNow RAM is not typically very much,\nbut if you have a lot\n\n620\n00:29:29,600 --> 00:29:33,620\nof user sessions on there each user\nsession does consume a bit of memory.\n\n621\n00:29:33,620 --> 00:29:36,780\nSo on an extremely busy web\nfront end you might see more but\n\n622\n00:29:36,780 --> 00:29:39,920\ntypically we just deploy more\nweb front ends for that.\n\n623\n00:29:39,920 --> 00:29:41,930\nSo, it's not typically\ncrazy amounts of memory.\n\n624\n00:29:43,710 --> 00:29:44,560\nBut CPU.\n\n625\n00:29:44,560 --> 00:29:48,550\nThere's a lot of server side web page\ngeneration that's going on inside\n\n626\n00:29:48,550 --> 00:29:49,130\nof SharePoint.\n\n627\n00:29:49,130 --> 00:29:53,690\nA lot of ASP pages,\nwhere the database returns the code,\n\n628\n00:29:53,690 --> 00:29:58,900\nthe web server compiles the code into HTML\nand then displays it to the user as HTML.\n\n629\n00:29:58,900 --> 00:30:03,030\nThe web server is doing that work,\ndoing that translation in HTML.\n\n630\n00:30:03,030 --> 00:30:05,480\nThat means it's very,\nvery busy, all right?\n\n631\n00:30:05,480 --> 00:30:07,800\nSo a lot of CPU.\n\n632\n00:30:07,800 --> 00:30:09,210\nOn the network side,\n\n633\n00:30:09,210 --> 00:30:12,740\nit can be heavy if you've got a lot\nof files stored inside of SharePoint.\n\n634\n00:30:12,740 --> 00:30:14,900\nBut if they're just web pages,\non the network side, your web front,\n\n635\n00:30:14,900 --> 00:30:17,260\nit doesn't typically\nconsume all that much.\n\n636\n00:30:17,260 --> 00:30:18,996\nSo your primary concern\nis going to be CPU, okay.\n\n637\n00:30:18,996 --> 00:30:24,780\nAnd you're going to be assigning VCPUs,\nyou know, your virtual CPUs to that VM.\n\n638\n00:30:24,780 --> 00:30:27,760\nAnd so you need to make sure that\nenough of those are available.\n\n639\n00:30:27,760 --> 00:30:31,010\nThat you're not creating contention where\nyou've oversubscribed the processors\n\n640\n00:30:31,010 --> 00:30:31,520\non your system.\n\n641\n00:30:32,660 --> 00:30:37,240\nThose web front ends boy if they\nstart to slouch on performance\n\n642\n00:30:37,240 --> 00:30:39,330\nit effects all the VMs, it really does.\n\n643\n00:30:39,330 --> 00:30:41,160\nIt affects everything across the board.\n\n644\n00:30:41,160 --> 00:30:44,650\nSo you go to be careful with that and make\nsure you've got the right allocations.\n\n645\n00:30:47,620 --> 00:30:51,400\nAlong the same lines, I think this is\nthe last one we're going to talk about,\n\n646\n00:30:51,400 --> 00:30:52,250\nright, is Exchange.\n\n647\n00:30:52,250 --> 00:30:53,390\n>> Exchange, yep.\n\n648\n00:30:53,390 --> 00:30:55,416\n>> And Microsoft Exchange\nis one of the hard ones,\n\n649\n00:30:55,416 --> 00:30:58,760\nbecause with SharePoint how\nwe had that front end and\n\n650\n00:30:58,760 --> 00:31:02,050\nback end, there's actually another\ncomponent, the search and indexing server.\n\n651\n00:31:02,050 --> 00:31:04,870\nI didn't mention that one,\nbut it's basically SQL too so\n\n652\n00:31:04,870 --> 00:31:06,620\nit would follow the same SQL rules.\n\n653\n00:31:06,620 --> 00:31:09,540\nIn Exchange,\nyou have five different roles.\n\n654\n00:31:09,540 --> 00:31:10,230\nYou've got the,\n\n655\n00:31:10,230 --> 00:31:13,170\nlet's see if I can remember them all,\ndo it from memory, right?\n\n656\n00:31:13,170 --> 00:31:18,440\nClient access server, hub transport,\nedge transport, mailbox,\n\n657\n00:31:18,440 --> 00:31:21,910\nand unified messaging which is, is unified\nmessaging still in the newest one?\n\n658\n00:31:21,910 --> 00:31:22,860\n>> I believe so.\n\n659\n00:31:22,860 --> 00:31:24,420\nDon't quote me on that.\n\n660\n00:31:24,420 --> 00:31:29,707\n>> Okay so, those are our five roles\nthat each one is a little bit different,\n\n661\n00:31:29,707 --> 00:31:32,627\nsome different needs that fall in here.\n\n662\n00:31:32,627 --> 00:31:36,240\nLet's talk about hub transport and\nedge transport first.\n\n663\n00:31:36,240 --> 00:31:37,920\nThose two are basically the same.\n\n664\n00:31:37,920 --> 00:31:38,560\nThe difference is\n\n665\n00:31:38,560 --> 00:31:40,760\nthe edge transport server is supposed\nto be exposed to the internet.\n\n666\n00:31:40,760 --> 00:31:42,960\nThe hub transport server is\nsupposed to be internal only but\n\n667\n00:31:42,960 --> 00:31:44,650\nthey both do the same thing.\n\n668\n00:31:44,650 --> 00:31:49,380\nEmail comes in ,they can scan it for\nviruses,\n\n669\n00:31:49,380 --> 00:31:52,970\napply some custom rules, or\nwhatever, and then email goes out.\n\n670\n00:31:52,970 --> 00:31:54,550\nIt's basically email routing.\n\n671\n00:31:54,550 --> 00:31:57,338\nThe email routing happens\nalmost entirely in RAM and\n\n672\n00:31:57,338 --> 00:32:01,850\nit's fairly CPU intensive if you're doing\nvirus scanning and rule applications.\n\n673\n00:32:01,850 --> 00:32:03,970\nRight, so those can be involved.\n\n674\n00:32:03,970 --> 00:32:04,890\nBut the emails, they come in.\n\n675\n00:32:04,890 --> 00:32:06,220\nThey do get written to the hard drive.\n\n676\n00:32:06,220 --> 00:32:08,972\nSo there's a bit of disk IO, but\nit's not anything exorbitant, and\n\n677\n00:32:08,972 --> 00:32:10,880\nit's not anything you\nreally have to plan for.\n\n678\n00:32:10,880 --> 00:32:12,800\nAnd email moves right on through.\n\n679\n00:32:12,800 --> 00:32:15,260\nSo really,\nthis is kind of like a web frontend.\n\n680\n00:32:15,260 --> 00:32:18,760\nWe have CPU intensity here as\nit's handling these connections,\n\n681\n00:32:18,760 --> 00:32:20,830\nhandling these emails coming in and out.\n\n682\n00:32:20,830 --> 00:32:25,313\nSo when it comes to hub transport and\nedge transport, think about CPU.\n\n683\n00:32:27,826 --> 00:32:31,230\nAll right,\nthe next one is Client Access Server.\n\n684\n00:32:31,230 --> 00:32:34,860\nClient Access Server, think of it\nas like the SharePoint front end.\n\n685\n00:32:34,860 --> 00:32:37,380\nThe Client Access Server is\nresponsible for Outlook Web Access.\n\n686\n00:32:37,380 --> 00:32:39,790\n>> Right.\n>> And the Outlook Web Access is\n\n687\n00:32:39,790 --> 00:32:44,305\nheavy on the AJAX and\nheavy on the ASP, so a lot of\n\n688\n00:32:44,305 --> 00:32:49,250\nserver-side compilation of code that's\nthen rendered as HTML to the end user, so\n\n689\n00:32:49,250 --> 00:32:53,230\nthere's a lot of that going on, and\nthe client access server is doing it.\n\n690\n00:32:53,230 --> 00:32:56,050\nIt's also handling POP3 connections,\n\n691\n00:32:56,050 --> 00:33:01,390\nIMAP4 connections, SMTP connections,\nwhat else does it do?\n\n692\n00:33:01,390 --> 00:33:03,240\n>> Is that all it does?\n\n693\n00:33:03,240 --> 00:33:08,280\n>> It does all that crazy, what is it\nMac uses the exchange web services,\n\n694\n00:33:08,280 --> 00:33:12,320\nEWS so it does these API connections for\npeople to get to mailboxes.\n\n695\n00:33:12,320 --> 00:33:16,400\nThere's a lot of stuff that\nclient access server does and\n\n696\n00:33:16,400 --> 00:33:20,920\nit's very heavy on the CPU side it's\nalso very heavy on the RAM side.\n\n697\n00:33:20,920 --> 00:33:22,580\nRight?\nMemory and CPU.\n\n698\n00:33:22,580 --> 00:33:25,440\nThose are two primary components\nwhen we're talking about\n\n699\n00:33:25,440 --> 00:33:27,190\na client access server.\n\n700\n00:33:27,190 --> 00:33:29,180\nAnd you'll probably need more\nthan one client access server,\n\n701\n00:33:29,180 --> 00:33:34,100\ndepending on the size of your company.\n\n702\n00:33:34,100 --> 00:33:35,940\nThe last no, we've got two more.\n\n703\n00:33:35,940 --> 00:33:37,410\nSo there's unified messaging.\n\n704\n00:33:37,410 --> 00:33:39,910\nUnified messaging is\nthe least used of the roles.\n\n705\n00:33:39,910 --> 00:33:41,270\nMost people don't deploy it.\n\n706\n00:33:41,270 --> 00:33:44,130\nBut it's the one that does that\nreally cool stuff you see in all\n\n707\n00:33:44,130 --> 00:33:45,450\nthe exchange videos.\n\n708\n00:33:45,450 --> 00:33:49,190\nIf you ever go to the exchange website and\nyou watch their demo videos,\n\n709\n00:33:49,190 --> 00:33:52,950\nwhy you should buy this product, they'll\nshow somebody call in on the phone and\n\n710\n00:33:52,950 --> 00:33:55,860\nthey'll say, what's my schedule today?\n\n711\n00:33:55,860 --> 00:33:58,810\nAnd, this lady will read back\nhis schedule and he'll say,\n\n712\n00:33:58,810 --> 00:34:02,520\nclear all my appointments and he'll clear\nhis appointments and it'll send meeting\n\n713\n00:34:02,520 --> 00:34:06,670\ncancellations out to everybody, and\nall of that is happening through what's\n\n714\n00:34:06,670 --> 00:34:12,000\ncalled the unified messaging agent, or\nunified messaging role inside of Exchange.\n\n715\n00:34:12,000 --> 00:34:14,550\nSo, that is a interesting one.\n\n716\n00:34:14,550 --> 00:34:19,150\nVery CPU intensive because it's doing\nthat voice to text and text to voice.\n\n717\n00:34:19,150 --> 00:34:22,130\nThat translation that happens,\nit's also having to manage all these\n\n718\n00:34:22,130 --> 00:34:25,880\ndifferent sessions, and if you go crazy\nwith it it can do things like voice mail,\n\n719\n00:34:25,880 --> 00:34:28,700\nand other pieces,\nvery CPU intensive on that one.\n\n720\n00:34:28,700 --> 00:34:35,640\nAll right, the last one though is mailbox.\n\n721\n00:34:35,640 --> 00:34:37,170\nAnd the mailbox role,\n\n722\n00:34:37,170 --> 00:34:40,720\nthat's the one that usually creates\nour biggest performance hit.\n\n723\n00:34:40,720 --> 00:34:43,440\nThe mailbox role is where\nour actual email is stored.\n\n724\n00:34:43,440 --> 00:34:45,560\nSo if I send Mike an email and\n\n725\n00:34:45,560 --> 00:34:48,660\nyou're on exchange,\nit gets stored in that data base.\n\n726\n00:34:48,660 --> 00:34:51,030\nAnd it is a data base,\nit's a great big fat data base.\n\n727\n00:34:52,428 --> 00:34:56,720\nAnd it's not arranged in\nthe way you might think.\n\n728\n00:34:56,720 --> 00:34:59,610\nThere's some things that happen inside\nof that exchange data base that may seem\n\n729\n00:34:59,610 --> 00:35:01,060\npretty inefficient.\n\n730\n00:35:01,060 --> 00:35:04,290\nSo for example let's say I send\nan email to five people, right?\n\n731\n00:35:04,290 --> 00:35:07,330\nI just copy them all in,\ncc to five people.\n\n732\n00:35:07,330 --> 00:35:09,670\nAnd I've got an attachment on that email.\n\n733\n00:35:09,670 --> 00:35:12,610\nWell, you might think that it'll\nstore that attachment once and\n\n734\n00:35:12,610 --> 00:35:14,880\nlink it to all five,\nthat's what Exchange used to do, but\n\n735\n00:35:14,880 --> 00:35:18,350\nin the newer version of Exchange, it\nactually stores the attachment five times.\n\n736\n00:35:18,350 --> 00:35:21,000\nIt stores the email five time,\none for each person.\n\n737\n00:35:21,000 --> 00:35:24,130\nNow, you might say to yourself,\nthat doesn't sound very efficient.\n\n738\n00:35:24,130 --> 00:35:26,950\nAnd it's not efficient space wise,\nit makes the database bigger,\n\n739\n00:35:26,950 --> 00:35:29,440\nyour Exchange databases\ncan get really big.\n\n740\n00:35:29,440 --> 00:35:32,410\nBut it is efficient in terms of disk IO.\n\n741\n00:35:32,410 --> 00:35:35,120\nWhat it's doing is it's storing that email\n\n742\n00:35:35,120 --> 00:35:38,790\nphysically close to the rest\nof the e-mails for that user.\n\n743\n00:35:38,790 --> 00:35:41,460\nYou might have users located in\ndifferent places on the disk,\n\n744\n00:35:41,460 --> 00:35:43,550\nExchange is optimizing for that.\n\n745\n00:35:43,550 --> 00:35:45,770\nThey know that storage is cheap now.\n\n746\n00:35:45,770 --> 00:35:47,940\nYou can get terabytes of storage for\n\n747\n00:35:47,940 --> 00:35:50,170\na fraction of what it would\nhave cost five years ago.\n\n748\n00:35:50,170 --> 00:35:52,930\nSo, it's not a big deal to\nconsume extra disk space\n\n749\n00:35:52,930 --> 00:35:55,800\nif the trade off is better performance,\nright?\n\n750\n00:35:55,800 --> 00:35:58,200\nSo that should be our big hit right there\n\n751\n00:35:58,200 --> 00:36:01,700\nDisk IO is very important\nto that mailbox server.\n\n752\n00:36:01,700 --> 00:36:02,690\nThink of it as a database.\n\n753\n00:36:02,690 --> 00:36:04,800\nThink of it as like Microsoft SQL.\n\n754\n00:36:04,800 --> 00:36:06,910\nIt's a little more friendly on memory.\n\n755\n00:36:06,910 --> 00:36:08,320\nRight?\nYour Exchange database doesn't go as\n\n756\n00:36:08,320 --> 00:36:12,170\nmemory crazy as SQL does, or\ndefinitely not as much as SharePoint but\n\n757\n00:36:12,170 --> 00:36:15,380\nit is still pretty intensive\nas far as reading the disk and\n\n758\n00:36:15,380 --> 00:36:17,210\ntrying to retrieve emails\nas fast as we can.\n\n759\n00:36:18,530 --> 00:36:22,750\nAnd if you've got those users that use\nemail as their file exchange service,\n\n760\n00:36:22,750 --> 00:36:23,410\nI hate that.\n\n761\n00:36:23,410 --> 00:36:24,520\nPeople do it.\n\n762\n00:36:24,520 --> 00:36:26,720\nThen that's going to make it worse, right?\n\n763\n00:36:26,720 --> 00:36:27,570\n>> Absolutely.\n\n764\n00:36:27,570 --> 00:36:30,298\n>> So we got to look at things like\npassthrough disks, dedicated LANs,\n\n765\n00:36:30,298 --> 00:36:32,730\nall those different things\nwe talked about before.\n\n766\n00:36:32,730 --> 00:36:35,440\nTo maintain our performance\ninside of our mailbox database.\n\n767\n00:36:36,890 --> 00:36:42,430\nNow at this point in the show,\nI used to go into this little diatribe\n\n768\n00:36:42,430 --> 00:36:46,910\nof the dangers of clustering with Exchange\nand spiffy configurations, and so on.\n\n769\n00:36:46,910 --> 00:36:50,230\nBut that's all different now in\nthe newer versions of exchange\n\n770\n00:36:50,230 --> 00:36:52,950\nyou don't use fail over clusters anymore.\n\n771\n00:36:52,950 --> 00:36:56,600\nIf you want redundant client access\nservers, you just bring up more than one.\n\n772\n00:36:56,600 --> 00:36:58,880\nIf you want redundant hub transport\nservers you bring up more than one.\n\n773\n00:36:58,880 --> 00:37:00,140\nThat's how it is for all of them.\n\n774\n00:37:00,140 --> 00:37:00,850\nSet the mailbox role.\n\n775\n00:37:00,850 --> 00:37:02,270\nAnd in the mailbox role,\n\n776\n00:37:02,270 --> 00:37:05,930\nyou now have what are called database\navailability groups or DAGs.\n\n777\n00:37:05,930 --> 00:37:07,780\nUsually, bring up another\ndatabase server and\n\n778\n00:37:07,780 --> 00:37:10,500\nyou replicate your mailboxes over to it.\n\n779\n00:37:10,500 --> 00:37:12,840\nAnd, it stands by,\nready to go at a moment's notice.\n\n780\n00:37:12,840 --> 00:37:15,680\nAs a database availability group,\nit worked very well.\n\n781\n00:37:15,680 --> 00:37:17,870\nIt means,\nwe don't need failover requesters anymore.\n\n782\n00:37:17,870 --> 00:37:22,680\nSo, your hyper V environment can be\na cluster, it can support that fail over.\n\n783\n00:37:22,680 --> 00:37:27,220\nBut exchange itself is no longer cluster\naware, so if you're running exchange\n\n784\n00:37:27,220 --> 00:37:30,480\n2013 you don't need to worry about\nfail over clusters just for exchange.\n\n785\n00:37:32,170 --> 00:37:35,830\nIf you're running exchange 2010 or\nearlier though, they are cluster aware.\n\n786\n00:37:35,830 --> 00:37:39,630\nAnd so you can choose to run\nthem right on your cluster, or\n\n787\n00:37:39,630 --> 00:37:42,500\nyou can run them on a VM and\nhave the VM be in a cluster.\n\n788\n00:37:42,500 --> 00:37:45,400\nEither way works for\nthe Exchange 2010 and earlier.\n\n789\n00:37:47,810 --> 00:37:50,810\nAll right, well Mike I think that\npretty much wraps up the run down on\n\n790\n00:37:50,810 --> 00:37:51,679\nMicrosoft products.\n\n791\n00:37:52,970 --> 00:37:57,230\nIn the show notes, we've included\nlinks to the best practices guides for\n\n792\n00:37:57,230 --> 00:37:58,010\neach of those products.\n\n793\n00:37:58,010 --> 00:38:00,310\nIf you're ever bored, you want to\nread through and find out a lot more.\n\n794\n00:38:00,310 --> 00:38:01,660\nWe went kind of high level.\n\n795\n00:38:01,660 --> 00:38:03,330\nWhat you need to know for the exam.\n\n796\n00:38:03,330 --> 00:38:04,160\nBut in real life,\n\n797\n00:38:04,160 --> 00:38:07,530\nthere's a lot more nitty gritty\nlittle details you want to focus on.\n\n798\n00:38:07,530 --> 00:38:09,535\nAnd so that's why I wanted to\npost those best practice guides.\n\n799\n00:38:09,535 --> 00:38:11,058\n[SOUND] All right.\n\n800\n00:38:11,058 --> 00:38:15,040\nWell that's a pretty good spot for\nus to stop and take a break.\n\n801\n00:38:15,040 --> 00:38:20,930\nWhen we get back, I want to shift gears\nfrom boring concept planning stuff,\n\n802\n00:38:20,930 --> 00:38:24,580\nto actually how we can implement some\nof these things in like a system center\n\n803\n00:38:24,580 --> 00:38:25,990\nvirtual machine manager environment.\n\n804\n00:38:25,990 --> 00:38:28,050\nSo let's pause here to take a break.\n\n805\n00:38:28,050 --> 00:38:33,233\nWhen we get back more planning and\nvirtual machine implementation after this.\n\n806\n00:38:33,233 --> 00:38:40,984\n>> [MUSIC]\n\n807\n00:38:40,984 --> 00:38:43,220\n>> All right, welcome back everybody.\n\n808\n00:38:43,220 --> 00:38:46,370\nSo, in the last time that we were talking\nabout some of the different considerations\n\n809\n00:38:46,370 --> 00:38:49,470\nabout deploying physical machines\ninto a virtual environment.\n\n810\n00:38:49,470 --> 00:38:51,610\nWe were just deploying VMs in general.\n\n811\n00:38:51,610 --> 00:38:52,530\nIn this segment,\n\n812\n00:38:52,530 --> 00:38:56,470\nwe want to take a look at the \"Systems\nCenter Virtual Machine Manager' and\n\n813\n00:38:56,470 --> 00:39:01,090\nsome of the stuff that it's got built into\nit that can assist us with deploying VM's.\n\n814\n00:39:01,090 --> 00:39:06,690\nAs you create a design, your design\nstates how VM's are going to be deployed.\n\n815\n00:39:06,690 --> 00:39:09,440\nIt's all fine and\ngood to write up that design on paper and\n\n816\n00:39:09,440 --> 00:39:12,563\npost it in a policy but\nare your people going to follow that?\n\n817\n00:39:13,850 --> 00:39:15,290\nThey may not.\nA lot of times they don't.\n\n818\n00:39:15,290 --> 00:39:17,310\nPeople get in a hurry,\nsettings don't get set right.\n\n819\n00:39:17,310 --> 00:39:21,910\nSo you might have a standard policy\nthat says we need to play a web server,\n\n820\n00:39:21,910 --> 00:39:23,340\nit gets two gigs of RAM.\n\n821\n00:39:23,340 --> 00:39:26,940\nIf you need more than two gigs of RAM,\nyou've got to fill out this form and\n\n822\n00:39:26,940 --> 00:39:28,190\nrequest it.\n\n823\n00:39:28,190 --> 00:39:30,490\n>> No I don't, I'm just going to give it.\n\n824\n00:39:30,490 --> 00:39:31,977\n>> I know.\n>> Some other virtual machines are going\n\n825\n00:39:31,977 --> 00:39:35,080\nto suffer the performance because\nthis one designer thought oh,\n\n826\n00:39:35,080 --> 00:39:37,840\nhe can take four gigs and\ndidn't have to ask anybody.\n\n827\n00:39:37,840 --> 00:39:42,380\n>> Or we tell people hey, we're running\nWindows Server 2012 R2, and we build up\n\n828\n00:39:42,380 --> 00:39:47,755\nour VMs as gen two hardware so we choose\nthe synthetic SCSI adapter to boot from.\n\n829\n00:39:47,755 --> 00:39:51,090\n.But you get somebody new on board and\nthey're like oh, I remember this.\n\n830\n00:39:51,090 --> 00:39:54,320\nYou can't boot from a synthetic SCSI\nadapter, so I'm going to boot from IDE.\n\n831\n00:39:54,320 --> 00:39:56,865\nAnd now you get a VM that doesn't perform\nas well because they didn't choose\n\n832\n00:39:56,865 --> 00:39:57,550\nthe same settings.\n\n833\n00:39:57,550 --> 00:40:02,672\nSo, systems that are virtual machine\nmanager is littered with templates and\n\n834\n00:40:02,672 --> 00:40:06,926\nprofiles that we can define That\nensure when people create VMs,\n\n835\n00:40:06,926 --> 00:40:10,890\nthey get consistent,\nsimilar settings, all right?\n\n836\n00:40:10,890 --> 00:40:15,250\nAnd that's really important for ensuring\nthat your deployments are all done stably,\n\n837\n00:40:15,250 --> 00:40:16,250\nall right?\n\n838\n00:40:16,250 --> 00:40:17,410\nSo let's take a look at some of these.\n\n839\n00:40:17,410 --> 00:40:20,200\nAnd there's different places that we\ncan use them and different reasons.\n\n840\n00:40:20,200 --> 00:40:25,070\nThe first one I want to talk about is the\nguest operating system profile, all right.\n\n841\n00:40:25,070 --> 00:40:27,920\nI want to start with this one cuz it's\none of the most commonly overlooked.\n\n842\n00:40:27,920 --> 00:40:30,283\nActually you know what,\nI'm gonna go out of order, Mike.\n\n843\n00:40:30,283 --> 00:40:30,941\n>> Okay.\n\n844\n00:40:30,941 --> 00:40:31,740\n>> I'm calling an audible.\n\n845\n00:40:31,740 --> 00:40:32,650\nLet's start with a hardware profile.\n\n846\n00:40:32,650 --> 00:40:33,230\n>> Hardware profile.\n\n847\n00:40:33,230 --> 00:40:34,730\nThat kind of makes sense to start there.\n\n848\n00:40:34,730 --> 00:40:35,770\n>> They're the most visible.\n\n849\n00:40:35,770 --> 00:40:37,300\nThese are the ones people\nare most familiar with.\n\n850\n00:40:37,300 --> 00:40:39,520\nSo let's start with that and then I'll\ngo to the one people always screw up.\n\n851\n00:40:39,520 --> 00:40:42,200\n>> [LAUGH]\n>> So hardware profiles,\n\n852\n00:40:42,200 --> 00:40:43,620\nit's like a template,\n\n853\n00:40:43,620 --> 00:40:47,951\nit's a set of configuration settings\nthat define the hardware for a VM.\n\n854\n00:40:47,951 --> 00:40:51,713\nAnd when you create a hardware profile\nyou can use it over and over again,\n\n855\n00:40:51,713 --> 00:40:55,610\nany time you spin up a VM to ensure you\nget the same hardware configuration.\n\n856\n00:40:55,610 --> 00:40:57,270\n>> Right.\n>> All right,\n\n857\n00:40:57,270 --> 00:41:01,030\ncreating the hardware\nprofile is pretty easy to do.\n\n858\n00:41:01,030 --> 00:41:03,030\nI'm in my System Center\nVirtual Machine Manager here.\n\n859\n00:41:03,030 --> 00:41:04,900\nWe'll just take a look at this,\nthere we go.\n\n860\n00:41:04,900 --> 00:41:09,496\nAnd inside of the System Center Virtual\nMachine Manager, if you go down to your\n\n861\n00:41:09,496 --> 00:41:14,451\nlibrary, inside of your library, you've\ngot an entire section here on profiles.\n\n862\n00:41:14,451 --> 00:41:16,730\nAnd see all these different profile types?\n\n863\n00:41:16,730 --> 00:41:18,500\nOne of them is a hardware profile.\n\n864\n00:41:18,500 --> 00:41:21,310\nThere's several other types of profiles,\nbut let's just start with hardware.\n\n865\n00:41:22,730 --> 00:41:26,430\nWhen you define hardware profiles, you're\nbasically specifying certain sets of\n\n866\n00:41:26,430 --> 00:41:29,430\nhardware that you want\nthe VM to have available.\n\n867\n00:41:29,430 --> 00:41:33,540\nSo if I come in here and create a new one,\nso I can create a new hardware profile.\n\n868\n00:41:33,540 --> 00:41:37,081\nI'm gonna define what this server is.\n\n869\n00:41:37,081 --> 00:41:44,850\nSo maybe this will be like\na generic SQL Server, right?\n\n870\n00:41:44,850 --> 00:41:46,740\nSo, when somebody's\ncreating a new SQL Server\n\n871\n00:41:46,740 --> 00:41:49,000\nthis would be a good starting point for\nthem.\n\n872\n00:41:49,000 --> 00:41:50,810\nAnd so\nI might go to Microsoft's website and\n\n873\n00:41:50,810 --> 00:41:54,010\nread up what the minimum requirements for\nSQL are, right?\n\n874\n00:41:54,010 --> 00:41:57,530\nAnd then come in here and create\na hardware profile that matches with that.\n\n875\n00:41:57,530 --> 00:41:59,470\nAnd I'll say, I'm gonna go ahead and\ndo Generation 2 so\n\n876\n00:41:59,470 --> 00:42:02,270\nI can take advantage of\nsome of the newer features.\n\n877\n00:42:02,270 --> 00:42:06,357\nNow be careful with that, if I choose\nGeneration 2 and I've still got some older\n\n878\n00:42:06,357 --> 00:42:10,157\nHyper-V boxes out there or,\nGod forbid, like Virtual Server 2005.\n\n879\n00:42:10,157 --> 00:42:12,501\n>> [LAUGH]\n>> If I have older stuff,\n\n880\n00:42:12,501 --> 00:42:14,480\nthen I lose my compatibility with those,\nright?\n\n881\n00:42:14,480 --> 00:42:15,600\nSo be careful there.\n\n882\n00:42:15,600 --> 00:42:18,090\nBut assuming that we're all up to date,\nwe're 2012 and\n\n883\n00:42:18,090 --> 00:42:19,700\nhigher, Gen 2 is perfectly safe.\n\n884\n00:42:22,000 --> 00:42:24,740\nAnd then right after that\nI've got my hardware profile.\n\n885\n00:42:24,740 --> 00:42:27,017\nHere's where I can define\nthe hardware settings.\n\n886\n00:42:27,017 --> 00:42:29,740\n>> And if you've created a virtual machine\nbefore it's gonna look very similar right?\n\n887\n00:42:29,740 --> 00:42:32,350\nThat's the same kind of settings you\ngo through as you're creating a virtual\n\n888\n00:42:32,350 --> 00:42:33,288\nmachine from scratch.\n\n889\n00:42:33,288 --> 00:42:35,353\nYou're just pre-defining\nall of this stuff so\n\n890\n00:42:35,353 --> 00:42:38,411\nthat when somebody else is making\na new virtual machine, or even you.\n\n891\n00:42:38,411 --> 00:42:40,417\nBut if somebody else is\nmaking a new virtual machine,\n\n892\n00:42:40,417 --> 00:42:42,031\nthey don't have to make those decisions.\n\n893\n00:42:42,031 --> 00:42:45,141\n>> Yep, so if I go in here and\nI choose the processor,\n\n894\n00:42:45,141 --> 00:42:49,320\nmaybe I want to have two VCPUs\nby default for a SQL Server.\n\n895\n00:42:49,320 --> 00:42:53,040\nI might want to allow migration\nto different processor versions,\n\n896\n00:42:53,040 --> 00:42:54,610\nmaybe not, I'll leave that off.\n\n897\n00:42:54,610 --> 00:42:58,940\nFrom memory, maybe my minimum memory for\nthis one is going to\n\n898\n00:42:58,940 --> 00:43:03,740\nbe 4,096MB or we can do 4GB.\n\n899\n00:43:03,740 --> 00:43:06,100\nIt all ends up being the same.\n\n900\n00:43:06,100 --> 00:43:07,355\nWe can specify.\n\n901\n00:43:07,355 --> 00:43:12,155\nSee how it's got a SCSI adapter for\nthat virtual DVD drive right there?\n\n902\n00:43:12,155 --> 00:43:13,595\nIf I look down a little ways,\n\n903\n00:43:13,595 --> 00:43:16,785\nI can start to find other settings that\nall relate to how we get to that stuff.\n\n904\n00:43:16,785 --> 00:43:20,435\nHere's my fiber channel adapter,\nif I want to do a dedicated fiber channel.\n\n905\n00:43:20,435 --> 00:43:24,639\nDVD drive mounting, the network adapter,\nI might want that to be connected to\n\n906\n00:43:24,639 --> 00:43:28,541\na particular network and so I can come\nin and pick the network that I want.\n\n907\n00:43:28,541 --> 00:43:29,281\n>> Mm-hm.\n\n908\n00:43:29,281 --> 00:43:32,964\n>> And then our availability settings,\nwhether we want it to be highly available,\n\n909\n00:43:32,964 --> 00:43:35,130\nor whatever, and maybe I do in this case.\n\n910\n00:43:35,130 --> 00:43:37,011\nIt's a SQL Server,\nI'm probably gonna count on that,\n\n911\n00:43:37,011 --> 00:43:38,840\nI probably wanna make it available.\n\n912\n00:43:38,840 --> 00:43:41,590\nBut I might use this template for\ndeploying test machines also.\n\n913\n00:43:41,590 --> 00:43:43,570\nSo I'm gonna leave that off.\n\n914\n00:43:43,570 --> 00:43:46,690\nRemember, this template is going\nto apply when we create the VM.\n\n915\n00:43:46,690 --> 00:43:50,050\nOnce it's created, you can go and\nchange these values if you need to.\n\n916\n00:43:50,050 --> 00:43:52,170\nSo this is like a starting point for it.\n\n917\n00:43:53,270 --> 00:43:54,010\nAll right.\n\n918\n00:43:54,010 --> 00:43:56,090\nSo we can set all those various settings,\nand\n\n919\n00:43:56,090 --> 00:43:58,960\nwhen we say OK,\nthat creates the template, all right.\n\n920\n00:43:58,960 --> 00:44:03,840\nWe've got this profile,\nthis generic SQL Server hardware profile.\n\n921\n00:44:03,840 --> 00:44:04,600\nAnd from now on,\n\n922\n00:44:04,600 --> 00:44:08,090\nwhenever I create a new virtual machine,\nI'll be able to select that profile.\n\n923\n00:44:08,090 --> 00:44:11,930\nAnd I'll start out with that\nstandard list of settings, right.\n\n924\n00:44:11,930 --> 00:44:15,100\nSo, if I go back to my\nVirtual Machines and\n\n925\n00:44:15,100 --> 00:44:18,740\nServices, and come into like my cluster\nhere, I can create a new virtual machine.\n\n926\n00:44:20,150 --> 00:44:23,600\nAnd when I'm creating the virtual machine,\nI'll just create a brand new one, right?\n\n927\n00:44:23,600 --> 00:44:27,490\nBlank hard disk, and I'll give it a name.\n\n928\n00:44:27,490 --> 00:44:35,030\nThis will be my Don's, Test SQL Server.\n\n929\n00:44:35,030 --> 00:44:37,480\nAnd I can pick whether it's Gen 1 or\nGen 2.\n\n930\n00:44:37,480 --> 00:44:39,985\nNow, I set that in my template also.\n\n931\n00:44:39,985 --> 00:44:42,775\nAnd so it's gonna override the setting\nif I pick the wrong one, so\n\n932\n00:44:42,775 --> 00:44:45,785\nI'm not too worried there, but\nI'll go ahead and pick Gen 2 anyway.\n\n933\n00:44:45,785 --> 00:44:48,502\nBut on the Hardware tab,\nwhen I get over here,\n\n934\n00:44:48,502 --> 00:44:52,025\nit's by default letting me\npick whatever settings I want.\n\n935\n00:44:52,025 --> 00:44:54,810\nBut right here I can\npick my hardware profile,\n\n936\n00:44:54,810 --> 00:44:59,960\nI can choose that generic SQL Server right\nthere, and now all those settings applied.\n\n937\n00:44:59,960 --> 00:45:02,290\nTwo CPUs, 4 gigs of RAM, and so on.\n\n938\n00:45:03,470 --> 00:45:06,740\nThat's how these profiles\nare designed to work.\n\n939\n00:45:06,740 --> 00:45:09,830\nBut there is a special way of implementing\nthese that we need to be aware of for\n\n940\n00:45:09,830 --> 00:45:11,000\nthe exam.\n\n941\n00:45:11,000 --> 00:45:14,860\nNotice up here my hardware profile,\nI've got the default, and\n\n942\n00:45:14,860 --> 00:45:15,920\nI've got the generic SQL Server.\n\n943\n00:45:17,300 --> 00:45:21,700\nBut if I go back to my library,\nand back into my profiles, and\n\n944\n00:45:21,700 --> 00:45:25,291\nhardware profiles,\nthere are some other ones in here.\n\n945\n00:45:25,291 --> 00:45:29,319\nPetShop-HW-SQL, PetShop-HW-web.\n\n946\n00:45:29,319 --> 00:45:32,800\nWhy didn't those show up in my\ndrop-down list a minute ago?\n\n947\n00:45:32,800 --> 00:45:35,390\nWell, it's not because of the owner,\nbecause I'm the owner.\n\n948\n00:45:35,390 --> 00:45:38,230\nAnd it's not because of the type,\nthey're all hardware profiles.\n\n949\n00:45:38,230 --> 00:45:44,620\nThe reason they didn't show up is those\nare attached to a service profile.\n\n950\n00:45:44,620 --> 00:45:45,790\nAll right?\n\n951\n00:45:45,790 --> 00:45:47,651\nWhat the heck is a service profile?\n\n952\n00:45:47,651 --> 00:45:48,191\nWell, go ahead Mike.\n\n953\n00:45:48,191 --> 00:45:49,408\n>> They're really pretty cool.\n\n954\n00:45:49,408 --> 00:45:51,758\nA lot of this type,\nwhen we're setting up an application,\n\n955\n00:45:51,758 --> 00:45:53,220\nthey require more than one machine.\n\n956\n00:45:53,220 --> 00:45:57,159\nLike earlier in the episode we were\ntalking about having a web front in and\n\n957\n00:45:57,159 --> 00:45:58,710\na database back end.\n\n958\n00:45:58,710 --> 00:46:01,390\nAnd so you need both of them\nto run a particular service.\n\n959\n00:46:01,390 --> 00:46:03,350\nYou can create a template\nthat includes both of them.\n\n960\n00:46:03,350 --> 00:46:06,640\nSo now were talking about a template\nthat's not just one virtual machine, but\n\n961\n00:46:06,640 --> 00:46:10,020\nit's actually multiple virtual machines\nthat are gonna end up working together\n\n962\n00:46:10,020 --> 00:46:12,360\nto provide a particular service.\n\n963\n00:46:12,360 --> 00:46:15,820\nSo we can create that template that\nincludes more than one virtual machine.\n\n964\n00:46:15,820 --> 00:46:19,564\nWe'll pull in different hardware profiles,\nand all of the settings required for\n\n965\n00:46:19,564 --> 00:46:20,931\nthose guys to work together.\n\n966\n00:46:20,931 --> 00:46:24,083\nAnd then when you pull up that service\ntemplate it's gonna deploy them all at\n\n967\n00:46:24,083 --> 00:46:24,731\nthe same time.\n\n968\n00:46:24,731 --> 00:46:29,019\n>> Yeah, you know, back in the old days\n[LAUGH] when you deployed a software on\n\n969\n00:46:29,019 --> 00:46:31,380\nyour network it just needed one server.\n\n970\n00:46:31,380 --> 00:46:34,430\nIt ran on that one system so\nvirtual machines were kind of standalone.\n\n971\n00:46:34,430 --> 00:46:37,450\nThey did their one job and that was that.\n\n972\n00:46:37,450 --> 00:46:42,320\nBut in today's world,\nwe have a lot of multi-tier applications,\n\n973\n00:46:42,320 --> 00:46:44,289\nyou hear it called n-tier applications.\n\n974\n00:46:44,289 --> 00:46:49,240\nSo you'll have a client server model,\nwhere the client is the end user computer\n\n975\n00:46:49,240 --> 00:46:52,160\nand the server that's out their somewhere,\nthe server is just a single entity.\n\n976\n00:46:52,160 --> 00:46:56,230\nBut now we normally have these other\ntiers involved, like mid-tier.\n\n977\n00:46:56,230 --> 00:46:58,170\nSo you've got, well, SharePoint, right?\n\n978\n00:46:58,170 --> 00:47:01,560\nWith SharePoint you've got your web front\nend that the end users connect to and\n\n979\n00:47:01,560 --> 00:47:03,990\nyou've got your database on the back end.\n\n980\n00:47:03,990 --> 00:47:06,821\nWhat good is the database if\nthe web front end isn't up?\n\n981\n00:47:06,821 --> 00:47:07,821\n>> Absolutely nothing.\n\n982\n00:47:07,821 --> 00:47:09,930\n>> What good is the web front\nend if the database isn't up?\n\n983\n00:47:09,930 --> 00:47:10,760\n>> Pretty useless.\n\n984\n00:47:10,760 --> 00:47:14,000\n>> So they're two separate VMs,\nbut they're tied together.\n\n985\n00:47:14,000 --> 00:47:14,830\nThey're really important.\n\n986\n00:47:14,830 --> 00:47:16,500\nThey work as a team.\n\n987\n00:47:16,500 --> 00:47:19,140\nThat's what a service\nprofile is all about.\n\n988\n00:47:19,140 --> 00:47:22,330\nIn a service profile, you create what\nare called application profiles,\n\n989\n00:47:22,330 --> 00:47:24,180\nthese guys right here.\n\n990\n00:47:24,180 --> 00:47:28,730\nAnd in the application profile, you define\nthe different pieces of that service.\n\n991\n00:47:28,730 --> 00:47:31,890\nSee how we've got application profiles,\nthere's a SQL Server and\n\n992\n00:47:31,890 --> 00:47:33,480\na Web Server, right?\n\n993\n00:47:33,480 --> 00:47:35,190\nThose are the two pieces.\n\n994\n00:47:35,190 --> 00:47:41,040\nThose get tied together to\ncreate a service template.\n\n995\n00:47:41,040 --> 00:47:43,120\nNotice I don't have\na service profile here, but\n\n996\n00:47:43,120 --> 00:47:45,180\nup top I've got service template.\n\n997\n00:47:45,180 --> 00:47:48,240\nAnd so\nhere they've created the Pet Shop Service.\n\n998\n00:47:48,240 --> 00:47:49,910\nSo they've got an online pet shop.\n\n999\n00:47:49,910 --> 00:47:53,440\nIt's a web store, so people browse\nto the website, they buy things.\n\n1000\n00:47:53,440 --> 00:47:55,750\nThere's the web servers on the front,\nand the database.\n\n1001\n00:47:55,750 --> 00:47:58,126\nNow, I said web servers with an S.\n\n1002\n00:47:58,126 --> 00:47:59,176\n>> Mm-hm.\n\n1003\n00:47:59,176 --> 00:48:01,216\n>> One web server might not be enough,\nright?\n\n1004\n00:48:01,216 --> 00:48:03,426\nWe might need more than\none to handle the load.\n\n1005\n00:48:03,426 --> 00:48:06,306\nAnd, even more than that,\nwe might want it to be dynamic.\n\n1006\n00:48:06,306 --> 00:48:09,716\nIf our server starts getting really busy,\nspin up more web servers.\n\n1007\n00:48:09,716 --> 00:48:14,416\nBut if we're not too busy, delete some\nweb servers; make some more room, right.\n\n1008\n00:48:14,416 --> 00:48:18,855\nIf you want to be dynamic, the system\nneeds to know how to spontaneously spin up\n\n1009\n00:48:18,855 --> 00:48:22,150\nthese web front ends, and\nknow the configuration.\n\n1010\n00:48:22,150 --> 00:48:25,460\nKnow what hardware to give them,\nwhat software to give them.\n\n1011\n00:48:25,460 --> 00:48:28,490\nIf it's a web server,\nwhat web content is gonna be on it.\n\n1012\n00:48:28,490 --> 00:48:32,380\nIf it's a sequel server what credentials\nand data base is it gonna have?\n\n1013\n00:48:32,380 --> 00:48:36,430\nIt's got to know, all of those different\nsettings and that's what is part\n\n1014\n00:48:36,430 --> 00:48:41,320\nof a service template, and so a service\ntemplate will leverage many different\n\n1015\n00:48:41,320 --> 00:48:46,910\nprofiles to tie all this together, the\nhardware profile is simply one of them.\n\n1016\n00:48:46,910 --> 00:48:50,120\nUnder hardware profiles,\nI've got that pet shop hardware for\n\n1017\n00:48:50,120 --> 00:48:53,370\nSQL and for web, and those were\nwrapped up in the service profile,\n\n1018\n00:48:53,370 --> 00:48:56,560\nthat's why I didn't see\nthat in my other wizard.\n\n1019\n00:48:56,560 --> 00:48:58,460\nBecause they don't work standalone.\n\n1020\n00:48:58,460 --> 00:49:03,600\nThey're part of a team,\nthey're part of that service template.\n\n1021\n00:49:03,600 --> 00:49:07,390\nBe aware of that difference there,\nthat does make a big difference.\n\n1022\n00:49:07,390 --> 00:49:12,040\nNow so that's one piece of the equation\nthere are the hardware profiles.\n\n1023\n00:49:13,050 --> 00:49:15,290\nIf I spin up a new server though.\n\n1024\n00:49:15,290 --> 00:49:16,580\nI know it's hardware.\n\n1025\n00:49:16,580 --> 00:49:18,530\nWhat about the operating system?\n\n1026\n00:49:18,530 --> 00:49:20,250\nWell, we might have answer files.\n\n1027\n00:49:20,250 --> 00:49:21,860\nRight?\nThings that provide all the various\n\n1028\n00:49:21,860 --> 00:49:24,070\nsettings for\nthat machine when it spins up,\n\n1029\n00:49:24,070 --> 00:49:27,960\nwe can define effectively those\nanswer file type scenarios.\n\n1030\n00:49:27,960 --> 00:49:29,890\nUnder guest OS profiles.\n\n1031\n00:49:29,890 --> 00:49:35,570\nAnd see how they've defined the pet shop\nguest OS web and pet shop guest OS sequel.\n\n1032\n00:49:35,570 --> 00:49:37,980\nThese are defining\nthe client side settings.\n\n1033\n00:49:37,980 --> 00:49:38,800\nAnd if I edit one of these.\n\n1034\n00:49:38,800 --> 00:49:39,750\nHere I'll just take the web server.\n\n1035\n00:49:39,750 --> 00:49:42,350\nI'll just pull up it's properties.\n\n1036\n00:49:42,350 --> 00:49:45,130\nInside of these is very similar\nto the hardware profile.\n\n1037\n00:49:45,130 --> 00:49:47,340\nYou've got your guest OS profile and\nyou tell it.\n\n1038\n00:49:47,340 --> 00:49:49,810\nWhat operating system, it supports.\n\n1039\n00:49:49,810 --> 00:49:51,000\nWhat it's identity is going to be.\n\n1040\n00:49:51,000 --> 00:49:52,630\nIt's got to have a name.\n\n1041\n00:49:52,630 --> 00:49:55,500\nAnd say they did pet web, pound, pound.\n\n1042\n00:49:55,500 --> 00:49:57,410\nThose number symbols, or pound symbols.\n\n1043\n00:49:57,410 --> 00:50:00,920\nThat just means, start with zero zero,\nand then zero one, zero two,\n\n1044\n00:50:00,920 --> 00:50:04,440\nzero three, all the way up to 99, and\nthen you're kind of out, right, so\n\n1045\n00:50:04,440 --> 00:50:05,750\nthen it bumps into a little problem.\n\n1046\n00:50:05,750 --> 00:50:09,580\nIt starts adding a dash one to\nthe end of them, it looks really bad.\n\n1047\n00:50:09,580 --> 00:50:11,090\nThey're doing a engineer name.\n\n1048\n00:50:12,150 --> 00:50:14,080\nThe administrative account password,\nright,\n\n1049\n00:50:14,080 --> 00:50:18,280\nwhat password they're gonna use,\nwhat product key for the install.\n\n1050\n00:50:18,280 --> 00:50:20,420\nWhat time zone they're gonna be in.\n\n1051\n00:50:20,420 --> 00:50:21,340\nWhat roles and\n\n1052\n00:50:21,340 --> 00:50:24,860\nfeatures are gonna be installed on\nthe machine when it spins it up.\n\n1053\n00:50:24,860 --> 00:50:25,560\nWhether.\n>> It's fantastic.\n\n1054\n00:50:25,560 --> 00:50:27,682\nI don't have to go back and\ninstall the rules after the fact.\n\n1055\n00:50:27,682 --> 00:50:30,750\nThat's gonna install the operating\nsystem and install my roles for me.\n\n1056\n00:50:31,980 --> 00:50:34,330\n>> It's gonna join it to\na domain in this scenario, right?\n\n1057\n00:50:34,330 --> 00:50:36,000\nThat's some of the credentials for that.\n\n1058\n00:50:36,000 --> 00:50:37,780\nAnd then an actual answer file.\n\n1059\n00:50:37,780 --> 00:50:40,610\nIf we want to provide that for\nanything else that we want to deploy.\n\n1060\n00:50:40,610 --> 00:50:43,830\nAnd then probably the most important part\nis this last one here, the run once.\n\n1061\n00:50:43,830 --> 00:50:46,750\nHere's where we add scripts\nto create everything else.\n\n1062\n00:50:46,750 --> 00:50:49,710\nIf we wanted to have web content,\nwell we need to put a script in there that\n\n1063\n00:50:49,710 --> 00:50:52,550\ncopies the web content over to\nthis web server and fires it up.\n\n1064\n00:50:52,550 --> 00:50:54,950\nOr installs any additional\nthird party software.\n\n1065\n00:50:54,950 --> 00:50:57,420\nYou can do anything that\nyou need right from there.\n\n1066\n00:50:57,420 --> 00:51:00,150\nAnd then you've got your dependencies.\n\n1067\n00:51:00,150 --> 00:51:02,890\nWell here it's just depending on that one\nadministrative account that we separate\n\n1068\n00:51:02,890 --> 00:51:04,170\nall of our credentials.\n\n1069\n00:51:04,170 --> 00:51:07,030\nYou might have other things that\nare listed in there, library references.\n\n1070\n00:51:07,030 --> 00:51:09,660\nNormally you'll see\nthings like ISO images,\n\n1071\n00:51:09,660 --> 00:51:12,990\nthat are tied into it to do the install or\nto load software.\n\n1072\n00:51:12,990 --> 00:51:14,160\nThose are Joe's dependencies too.\n\n1073\n00:51:14,160 --> 00:51:15,830\nAll right.\n\n1074\n00:51:15,830 --> 00:51:20,850\nThat way when it spins up that virtual\nmachine, it knows all the settings to use.\n\n1075\n00:51:20,850 --> 00:51:21,695\nNow you don't have to use these.\n\n1076\n00:51:21,695 --> 00:51:26,283\nYou don't have to use guest OS profiles\nif you got a virtual hard drive that's\n\n1077\n00:51:26,283 --> 00:51:27,730\nalready been.\n\n1078\n00:51:27,730 --> 00:51:29,470\nIt's got everything on it\nthat's got what you need.\n\n1079\n00:51:29,470 --> 00:51:30,650\nYou don't need these.\n\n1080\n00:51:30,650 --> 00:51:31,920\nYou can just spin that up.\n\n1081\n00:51:31,920 --> 00:51:33,750\nAnd it'll just launch and go.\n\n1082\n00:51:33,750 --> 00:51:38,370\nBut if all you have is the default\ninstallation Wm file from a Window's disc,\n\n1083\n00:51:38,370 --> 00:51:40,090\nthese fill in the blanks.\n\n1084\n00:51:40,090 --> 00:51:43,310\nThese serve that purpose,\nnow why is that important to me?\n\n1085\n00:51:43,310 --> 00:51:46,860\nWell if I'm deploying this in\nWindows Azure, or Microsoft Azure,\n\n1086\n00:51:46,860 --> 00:51:50,280\nif I'm deploying it out there on\nthe cloud, it can actually attach,\n\n1087\n00:51:50,280 --> 00:51:53,800\nthese can be made a little more\ngeneric where it can attach and\n\n1088\n00:51:53,800 --> 00:51:56,750\njust grab whatever the latest\nversion of Windows is and apply.\n\n1089\n00:51:56,750 --> 00:52:00,660\nNow sometimes that can be a problem, but\nwhen you went from 2012 to 2012 R2 there\n\n1090\n00:52:00,660 --> 00:52:04,120\nwasn't that much of a difference,\nthese could just go out and provision that\n\n1091\n00:52:04,120 --> 00:52:07,940\nmachine and make that jump to R2\nwithout us having to redo our images.\n\n1092\n00:52:07,940 --> 00:52:09,050\nPretty neat that it can do that.\n\n1093\n00:52:09,050 --> 00:52:09,550\n>> Absolutely.\n\n1094\n00:52:10,950 --> 00:52:14,420\n>> Now, the reason why I say that\nguest OS profiles are misunderstood,\n\n1095\n00:52:14,420 --> 00:52:17,760\nis that if I create one, if I come\nhere and create a guest OS file, and\n\n1096\n00:52:17,760 --> 00:52:21,460\nI'll call this generic\n>> SQL server.\n\n1097\n00:52:21,460 --> 00:52:24,367\nAnd I'll specify that this is for Windows\nand in the profile I'll come in and\n\n1098\n00:52:24,367 --> 00:52:25,648\nspecify some different things.\n\n1099\n00:52:25,648 --> 00:52:30,680\nLike this will be SQL dash pound, pound.\n\n1100\n00:52:30,680 --> 00:52:33,085\nRight, that's what I want these\nservers to be called, and\n\n1101\n00:52:33,085 --> 00:52:35,728\nI can I can specify a product key,\nwhatever it is that I want to do,\n\n1102\n00:52:35,728 --> 00:52:37,430\nwe'll stick it in the Eastern Time Zone.\n\n1103\n00:52:38,950 --> 00:52:39,970\nThere.\nOkay.\n\n1104\n00:52:39,970 --> 00:52:44,370\nI put in some of those settings and\nnow I've got this guest OS profile.\n\n1105\n00:52:44,370 --> 00:52:49,380\nWell, if I go to Create\na New Virtual Machine, so I'm gonna go and\n\n1106\n00:52:49,380 --> 00:52:54,250\ncreate a virtual machine, when I create it\nIf I look at the wizard see how I've got\n\n1107\n00:52:54,250 --> 00:52:58,640\nconfigure hardware and that's where I\npick what hardware profile I wanted.\n\n1108\n00:52:58,640 --> 00:53:01,950\nIf I choose create a New Virtual Machine\nwith blank disks and\n\n1109\n00:53:01,950 --> 00:53:05,720\nI start to move forward and\nI'll call this sequel 01.\n\n1110\n00:53:05,720 --> 00:53:07,690\nWell, I'm already having\nto type in a name.\n\n1111\n00:53:08,960 --> 00:53:12,340\nIsn't it gonna get that from the file?\n\n1112\n00:53:12,340 --> 00:53:15,510\nAnd as you move forward\nthere's nowhere in here.\n\n1113\n00:53:15,510 --> 00:53:16,790\nIt doesn't show up.\n\n1114\n00:53:16,790 --> 00:53:19,550\nAnd the reason is those guest\nOS profiles are designed to work\n\n1115\n00:53:19,550 --> 00:53:22,320\nwith the service templates.\n\n1116\n00:53:22,320 --> 00:53:25,190\nThey don't show up here, and\nthat's why a lot of people either A,\n\n1117\n00:53:25,190 --> 00:53:29,060\ndon't know about them or B, think they're\nbroken cuz they don't show up here.\n\n1118\n00:53:29,060 --> 00:53:30,760\nThey're part of service templates.\n\n1119\n00:53:30,760 --> 00:53:33,350\nYou can define a service template\nwith just one server in it, so\n\n1120\n00:53:33,350 --> 00:53:37,120\nI could create a service template for the\ngeneric SQL server and tie it in there and\n\n1121\n00:53:37,120 --> 00:53:40,380\nthen I can deploy and provision SQL\nservers at a moment's notice, right?\n\n1122\n00:53:40,380 --> 00:53:41,460\nIt'll work really well.\n\n1123\n00:53:41,460 --> 00:53:44,940\nBut as it stands they're not gonna show\nup here in the individual VM creation.\n\n1124\n00:53:47,500 --> 00:53:48,100\nAll right.\n\n1125\n00:53:48,100 --> 00:53:50,530\nWhat are some of the other\nprofiles worth mentioning?\n\n1126\n00:53:50,530 --> 00:53:53,170\n>> We talked about\nthe application profile,\n\n1127\n00:53:53,170 --> 00:53:54,895\nwe talked about the hardware software.\n\n1128\n00:53:54,895 --> 00:53:57,260\n>> The virtual machine templates.\n\n1129\n00:53:57,260 --> 00:53:59,980\nThat's a good substitute for\nthe guest OS profiles.\n\n1130\n00:53:59,980 --> 00:54:02,910\nInstead of doing that you could\ncreate a virtual machine template.\n\n1131\n00:54:02,910 --> 00:54:05,450\nIf I know people need\na generic sequal server..\n\n1132\n00:54:05,450 --> 00:54:10,670\nI could spin up a VM install Windows 2012\nR2 on it, do all the Windows Updates,\n\n1133\n00:54:10,670 --> 00:54:16,330\ninstall SQL on it, do all the updates for\nit, and then Sysprep the machine, right?\n\n1134\n00:54:16,330 --> 00:54:20,030\nAnd turn that into a template, and\nstore that in my template folder.\n\n1135\n00:54:20,030 --> 00:54:21,330\nAnd then when that's done,\n\n1136\n00:54:21,330 --> 00:54:25,510\nanytime somebody needs a SQL server, they\nspin it up and they choose, that template.\n\n1137\n00:54:25,510 --> 00:54:26,060\nRight?\n\n1138\n00:54:26,060 --> 00:54:26,770\nIt's really easy.\n\n1139\n00:54:26,770 --> 00:54:29,730\nLet's just kinda run through\nthe high steps of it here.\n\n1140\n00:54:29,730 --> 00:54:31,700\nIn the SCVMM,\nyou create a virtual machine.\n\n1141\n00:54:31,700 --> 00:54:33,620\nLet's just say it's this VM01.\n\n1142\n00:54:33,620 --> 00:54:34,270\nRight?\n\n1143\n00:54:34,270 --> 00:54:37,880\nI installed SQL, I did all my updates,\nI Sysprepped it.\n\n1144\n00:54:37,880 --> 00:54:41,270\nYou can take that machine, and, oh,\nthis one's got an error state on it.\n\n1145\n00:54:41,270 --> 00:54:43,640\nLet me take a machine that\ndoesn't have an error state.\n\n1146\n00:54:43,640 --> 00:54:47,860\nAnd we can take it and\nyou can actually turn it into a template.\n\n1147\n00:54:47,860 --> 00:54:51,280\nYou can move it into your library,\nand why am I not seeing my options,\n\n1148\n00:54:51,280 --> 00:54:54,770\ndo all of these have an error state?\n\n1149\n00:54:54,770 --> 00:54:56,850\nI don't have a valid VM to show.\n\n1150\n00:54:56,850 --> 00:54:57,680\nShoot.\n\n1151\n00:54:57,680 --> 00:55:00,080\nYeah, these all have various\nlittle errors on them right now.\n\n1152\n00:55:00,080 --> 00:55:03,800\nWell, what you can do is you can\nmove them into your library, and\n\n1153\n00:55:03,800 --> 00:55:04,870\nstore them as template.\n\n1154\n00:55:04,870 --> 00:55:06,920\nAnd whenever you create\na New Virtual Machine,\n\n1155\n00:55:06,920 --> 00:55:09,110\nyou guys probably saw it in the wizard\nright here, you've got that,\n\n1156\n00:55:09,110 --> 00:55:12,760\nuse an existing virtual machine,\nVM template, or virtual hard disc.\n\n1157\n00:55:12,760 --> 00:55:16,390\nYou could browse and pick that\nmachine that you wanted to clone.\n\n1158\n00:55:16,390 --> 00:55:19,160\nI could take, actually I can take one of\nthose guys even though it's not a template\n\n1159\n00:55:19,160 --> 00:55:21,310\nand pick it, and use it, and\n\n1160\n00:55:21,310 --> 00:55:23,950\nnow it's gonna base this new\nmachine off of that one.\n\n1161\n00:55:23,950 --> 00:55:28,730\nHardware settings, software settings,\nall of that stuff coming from that\n\n1162\n00:55:28,730 --> 00:55:32,980\nsingle machine Sysprepped it will spin up,\ngenerate it's new SID, off it goes.\n\n1163\n00:55:32,980 --> 00:55:36,530\nGreat way to get around that without\ndealing with a service profile.\n\n1164\n00:55:36,530 --> 00:55:38,840\nBut what this doesn't do for\n\n1165\n00:55:38,840 --> 00:55:42,015\nus, is support,\nchanges made after the fact, right.\n\n1166\n00:55:42,015 --> 00:55:45,355\nAs things continued to grow,\nwe can't do things like auto-scaling.\n\n1167\n00:55:45,355 --> 00:55:47,905\nAnd that's where the service\ntemplates are really powerful.\n\n1168\n00:55:47,905 --> 00:55:51,645\nNow, creating a service template is\na little bit beyond the scope of the exam.\n\n1169\n00:55:51,645 --> 00:55:53,055\nThey don't expect you to do that.\n\n1170\n00:55:53,055 --> 00:55:55,680\nBut I do want to show\nyou guys what it's like.\n\n1171\n00:55:55,680 --> 00:55:59,133\nIf I go into my library, and\ngo into the service templates,\n\n1172\n00:55:59,133 --> 00:56:01,630\nwe can take a look at\nthat pet shop service.\n\n1173\n00:56:01,630 --> 00:56:06,736\nYou have the service template editor\nthat is kind of a part of the SCVMM and\n\n1174\n00:56:06,736 --> 00:56:08,840\nso if I come into one of these.\n\n1175\n00:56:08,840 --> 00:56:12,699\nAnd I pull up it's oops not it's\nproperties I need it's designer,I'll right\n\n1176\n00:56:12,699 --> 00:56:14,670\nclick on that and choose open designer.\n\n1177\n00:56:14,670 --> 00:56:16,918\nThis is the editor for\nservice templates, and\n\n1178\n00:56:16,918 --> 00:56:20,350\nwhat you're gonna see is\nsomething pretty interesting.\n\n1179\n00:56:20,350 --> 00:56:25,390\nInside of here they've created the pet\nshop service which is just the name, and\n\n1180\n00:56:25,390 --> 00:56:29,930\nthen inside of it,\nwe have our application profiles.\n\n1181\n00:56:29,930 --> 00:56:32,806\nThere was an application profile for\nVM pet shop web.\n\n1182\n00:56:32,806 --> 00:56:36,010\nAnd VM pet shop sequel.\n\n1183\n00:56:36,010 --> 00:56:39,850\nInside of them,\nthey've got various packages and\n\n1184\n00:56:39,850 --> 00:56:44,370\nscripts that run,when a sequel server\ncomes up we clear our DNS entries and\n\n1185\n00:56:44,370 --> 00:56:45,700\nwe create some sequel settings.\n\n1186\n00:56:45,700 --> 00:56:49,510\nIt actually has a sequel answer file for\ndeploying sequel properly on it.\n\n1187\n00:56:49,510 --> 00:56:53,160\nIt's got the name of that server,\nit's got the software profile,\n\n1188\n00:56:53,160 --> 00:56:56,920\nthat's that guest OS profile right there,\nand the hardware profile, right there.\n\n1189\n00:56:56,920 --> 00:56:59,180\nEach of these pieces tie\ntogether to create that VM.\n\n1190\n00:57:00,260 --> 00:57:02,820\nOver here for the web one,\nit's the same thing but\n\n1191\n00:57:02,820 --> 00:57:04,530\nnotice this little note right here.\n\n1192\n00:57:04,530 --> 00:57:07,030\nInitial two, minimum one, maximum five.\n\n1193\n00:57:08,030 --> 00:57:10,270\nWhen we provisioned this service,\n\n1194\n00:57:10,270 --> 00:57:12,526\nit's gonna create two web\nfront ends by default.\n\n1195\n00:57:12,526 --> 00:57:17,533\nIf the system is idle it will drop down to\none,but if the systems are getting busy,\n\n1196\n00:57:17,533 --> 00:57:21,140\nit'll add more front ends,\nuntil it gets up to five.\n\n1197\n00:57:21,140 --> 00:57:22,720\nThat's that dynamic provisioning, right.\n\n1198\n00:57:22,720 --> 00:57:26,235\nThat all Auto-scaling that can happen,\nwhich is really powerful stuff.\n\n1199\n00:57:26,235 --> 00:57:29,115\nIn this day and age, your website\nmaybe you create some advertisement,\n\n1200\n00:57:29,115 --> 00:57:31,265\nall of a sudden on your\nwebsite goes viral, and\n\n1201\n00:57:31,265 --> 00:57:33,855\nyou've got 1000 of viewers per\nseconds hitting your system.\n\n1202\n00:57:33,855 --> 00:57:35,999\nYou've gotta spin up more servers\nto be able to handle that.\n\n1203\n00:57:35,999 --> 00:57:39,417\nYou can, you need to add a lot more.\n\n1204\n00:57:39,417 --> 00:57:40,387\nThat's how these work.\n\n1205\n00:57:40,387 --> 00:57:44,327\nThese are all being powered by\nthose profiles we saw a moment ago.\n\n1206\n00:57:44,327 --> 00:57:46,787\nYou just throw them in here,\nand off you go.\n\n1207\n00:57:46,787 --> 00:57:50,887\nNotice we've got adding network, load,\nhost templates, we throw all that stuff\n\n1208\n00:57:50,887 --> 00:57:55,367\nin, we line it up, and now if I\nwanna create a test environment for\n\n1209\n00:57:55,367 --> 00:57:59,160\nthis pet shop I just redeploy,\nthe patch up service.\n\n1210\n00:57:59,160 --> 00:58:01,870\nI deployed in my test environment,\nor I deployed in production.\n\n1211\n00:58:01,870 --> 00:58:04,710\nAnd I can push that out, and\nthose settings will continue to monitor\n\n1212\n00:58:04,710 --> 00:58:09,830\nthe system, adding more servers as needed,\nit's pretty neat stuff.\n\n1213\n00:58:09,830 --> 00:58:14,030\nI posted a link in the show notes\nthat takes you to the whole guide on\n\n1214\n00:58:14,030 --> 00:58:15,330\nprovisioning a service.\n\n1215\n00:58:15,330 --> 00:58:16,740\nIt's definitely good to know on the exam,\n\n1216\n00:58:16,740 --> 00:58:19,260\nthey're not gonna expect you to go\nthrough and provision and full service,\n\n1217\n00:58:19,260 --> 00:58:21,810\nbut they want you to understand for\nyour design, right.\n\n1218\n00:58:21,810 --> 00:58:24,670\nWhen you're designing a network,\nwhen you're planning for a network,\n\n1219\n00:58:24,670 --> 00:58:27,870\nif you know there's gonna be multiple\nvirtual machines that are tied together.\n\n1220\n00:58:27,870 --> 00:58:30,610\nAnd you could use auto scaling\nin features like that.\n\n1221\n00:58:30,610 --> 00:58:33,950\nA service template is going\nto be the way to do it.\n\n1222\n00:58:33,950 --> 00:58:36,990\nI do recommend that you read\nthe Microsoft guide on how to do that.\n\n1223\n00:58:36,990 --> 00:58:39,330\nAnd like I said the links in\nthe notes the best practices for\n\n1224\n00:58:39,330 --> 00:58:45,230\ndoing a service template, all right,\ndid we leave any templates out?\n\n1225\n00:58:45,230 --> 00:58:48,400\nThere's a lot of other templates but\nthose are the main ones.\n\n1226\n00:58:48,400 --> 00:58:51,090\nYeah, I can't think of\nanything else too crazy there.\n\n1227\n00:58:51,090 --> 00:58:54,330\nNow, the next piece that I wanna talk\nabout is pretty important, though.\n\n1228\n00:58:54,330 --> 00:58:56,110\nAnd they're called placement rules.\n\n1229\n00:58:56,110 --> 00:58:58,760\nBut why don't, let's see,\ndo we have enough time?\n\n1230\n00:58:58,760 --> 00:58:59,640\nIt's kinda close.\n\n1231\n00:58:59,640 --> 00:59:00,485\nLet's shoot for it, let's try it.\n\n1232\n00:59:00,485 --> 00:59:01,320\n[LAUGH] Let's do it.\n\n1233\n00:59:01,320 --> 00:59:05,620\nThe next thing I wanna talk about\nare what are called placement rules,\n\n1234\n00:59:05,620 --> 00:59:08,510\nwe started off this show talking\nabout Microsoft services and\n\n1235\n00:59:08,510 --> 00:59:12,870\nhow they can butt heads with two\ndifferent systems that need high CPU.\n\n1236\n00:59:12,870 --> 00:59:15,710\nI've got a SharePoint web front end\n\n1237\n00:59:15,710 --> 00:59:18,210\nrunning on the same box\nas the domain controller.\n\n1238\n00:59:18,210 --> 00:59:19,860\nThey're butting heads for CPU.\n\n1239\n00:59:19,860 --> 00:59:22,760\nOr I've got a SQL database\nrunning on the same server\n\n1240\n00:59:22,760 --> 00:59:26,720\nas an Exchange mailbox database,\nbutting heads for disk IO.\n\n1241\n00:59:28,440 --> 00:59:30,670\nHow I can I ensure that stuff\nlike that doesn't happen?\n\n1242\n00:59:30,670 --> 00:59:32,790\n>> I've gotta come in every day, and\nI've gotta look at this stuff, and\n\n1243\n00:59:32,790 --> 00:59:33,920\nsee where my machines are.\n\n1244\n00:59:33,920 --> 00:59:37,270\nAnd then I gotta start moving things\naround, looking at all the resources on my\n\n1245\n00:59:37,270 --> 00:59:39,728\ndifferent Hyper-V hosts, and\ntry to figure it all out.\n\n1246\n00:59:39,728 --> 00:59:40,440\n>> Yeah.\n\n1247\n00:59:40,440 --> 00:59:42,455\nI call that the job security method,\nright?\n\n1248\n00:59:42,455 --> 00:59:44,480\nCuz you'll be constantly doing\nthat the rest of your life.\n\n1249\n00:59:44,480 --> 00:59:45,670\n>> Right.\n\n1250\n00:59:45,670 --> 00:59:47,910\n>> It is nice to able to\nautomate things like that.\n\n1251\n00:59:47,910 --> 00:59:51,210\nIf you have dynamic optimization,\nor DO, it does it for you, right?\n\n1252\n00:59:51,210 --> 00:59:53,440\nIt's dynamically moving stuff around.\n\n1253\n00:59:53,440 --> 00:59:57,490\nBut we can actually get in there, and\ninfluence that a little more, right?\n\n1254\n00:59:57,490 --> 01:00:00,080\nWe have these things\ncalled placement rules.\n\n1255\n01:00:00,080 --> 01:00:04,420\nAnd placement rules, at their basics,\napply when we create a new VM.\n\n1256\n01:00:04,420 --> 01:00:08,750\nWhen you create a new VM and you pick\nyour hardware, the SCVM will look at\n\n1257\n01:00:08,750 --> 01:00:11,820\nthe available systems out there and\nwill recommend the best ones.\n\n1258\n01:00:11,820 --> 01:00:12,610\nYou guys have seen this.\n\n1259\n01:00:12,610 --> 01:00:14,840\nActually, here, let me just run\nthrough an example real quick.\n\n1260\n01:00:14,840 --> 01:00:21,280\nLet me get out of this designer, and if I\nwere to go in here and whip up a new VM.\n\n1261\n01:00:21,280 --> 01:00:24,490\nRight, so I'll just hit new VM.\n\n1262\n01:00:25,700 --> 01:00:30,840\nAnd, we'll create a blank one,\nthis will be Don's test SQL server.\n\n1263\n01:00:30,840 --> 01:00:32,340\nAll right.\n\n1264\n01:00:32,340 --> 01:00:34,700\nI'm gonna go through and\njust specify some basic components here,\n\n1265\n01:00:34,700 --> 01:00:40,250\nI'll tell what I need, let's just do two\ngigs of RAM cuz it's just a test server.\n\n1266\n01:00:40,250 --> 01:00:41,242\nI'll do two CPU's.\n\n1267\n01:00:45,275 --> 01:00:46,610\nAll right.\n\n1268\n01:00:46,610 --> 01:00:50,760\nAnd, I've got deploy the virtual\nmachine to a private cloud.\n\n1269\n01:00:50,760 --> 01:00:52,270\nRight, so it's coming in local.\n\n1270\n01:00:52,270 --> 01:00:56,780\nI could place it on a particular host if I\nwanted to pick, but I'm just gonna tell it\n\n1271\n01:00:56,780 --> 01:01:01,040\nhey, throw it somewhere in my environment,\nI don't really care where.\n\n1272\n01:01:01,040 --> 01:01:02,150\nAll right?\n\n1273\n01:01:02,150 --> 01:01:05,270\nAnd if I was picking the cloud I would\nhave to pick which cloud to go to.\n\n1274\n01:01:05,270 --> 01:01:08,450\nBut what it's doing right now is that\nit's looking at my local cloud, my,\n\n1275\n01:01:08,450 --> 01:01:09,120\nmy private cloud.\n\n1276\n01:01:09,120 --> 01:01:13,150\nAnd it's looking at all the servers I've\ngot,and it's giving me recommendations,\n\n1277\n01:01:13,150 --> 01:01:14,970\nthese star ratings.\n\n1278\n01:01:14,970 --> 01:01:15,610\nOkay?\n\n1279\n01:01:15,610 --> 01:01:17,310\nNow notice my star ratings here.\n\n1280\n01:01:17,310 --> 01:01:20,192\nI got zeros to hearts [LAUGH] for\nall four of these servers.\n\n1281\n01:01:20,192 --> 01:01:22,000\nAll right what did I do\nto make that happen?\n\n1282\n01:01:22,000 --> 01:01:24,240\n[LAUGH] If look at each of these.\n\n1283\n01:01:24,240 --> 01:01:28,000\nIt didn't like any of these servers, and\nit probably means I'm' out of memory.\n\n1284\n01:01:28,000 --> 01:01:29,771\nLet's see what.\n>> [CROSSTALK] Don't have two processors?\n\n1285\n01:01:29,771 --> 01:01:33,104\n>> It says here, the virtual machine\nworkload Don's test SQL server\n\n1286\n01:01:33,104 --> 01:01:36,140\nspecified settings that are not\nallowed by any capability,\n\n1287\n01:01:36,140 --> 01:01:40,248\nprofiles supported by the cloud, a list of\nvalidation errors specific to it can be\n\n1288\n01:01:40,248 --> 01:01:44,150\naccessed by validating the hardware\nprofile or template before it is rated.\n\n1289\n01:01:45,170 --> 01:01:47,660\nApparently I've picked too much memory or\nsomething,\n\n1290\n01:01:47,660 --> 01:01:51,360\nlet's go back to my hardware, and\nI'm just gonna drop this back down.\n\n1291\n01:01:51,360 --> 01:01:53,510\nI probably don't have the resources for\nit, so.\n\n1292\n01:01:53,510 --> 01:01:57,120\nI'll put this back to 512 megabytes.\n\n1293\n01:01:58,430 --> 01:01:59,990\nAnd let's see if that will make it happy.\n\n1294\n01:02:02,620 --> 01:02:06,100\nAnd, nope,\nstill got some kind of issue there.\n\n1295\n01:02:06,100 --> 01:02:08,430\nBut, what it's doing is it's looking\nat the hardware that I picked, and\n\n1296\n01:02:08,430 --> 01:02:11,710\nit's basically saying based from the\nhardware that I've selected what server\n\n1297\n01:02:11,710 --> 01:02:14,750\nwould be suitable and\nit's giving me these star ratings for it.\n\n1298\n01:02:14,750 --> 01:02:17,460\nAnd normally what you'll see is some\nstars, some might be five stars,\n\n1299\n01:02:17,460 --> 01:02:19,020\nthis would be a great server for it.\n\n1300\n01:02:19,020 --> 01:02:23,320\nSome might be four or three stars,\ntwo stars, based on the resources.\n\n1301\n01:02:23,320 --> 01:02:25,710\nThe problem you usually bump into though,\n\n1302\n01:02:25,710 --> 01:02:30,020\nis that this is based solely on what\nI picked back here for hardware.\n\n1303\n01:02:30,020 --> 01:02:33,930\nIf I give it three VCPU's,\nit's looking for physical hosts that have\n\n1304\n01:02:33,930 --> 01:02:38,200\nthree VCPU's available or if I picked\n8gb of RAM, it's just looking for\n\n1305\n01:02:38,200 --> 01:02:41,010\nservers that have 8gb of RAM available,\nthat's what it's looking for.\n\n1306\n01:02:41,010 --> 01:02:45,578\nIt doesn't take into account things like\ndisk I/O or network bandwidth, right,\n\n1307\n01:02:45,578 --> 01:02:48,973\nunless if you have the system\ncenter operations manager, and\n\n1308\n01:02:48,973 --> 01:02:53,672\nyou've done the pro integration and all\nthat stuff, when you've got that in place,\n\n1309\n01:02:53,672 --> 01:02:57,914\nit will actually look at some of those\nother things like network bandwidth and\n\n1310\n01:02:57,914 --> 01:03:01,476\ndisk I/O and these star ratings\nwill reflect that, all right?\n\n1311\n01:03:01,476 --> 01:03:04,200\nBut what if I wanna influence\nthat with something else?\n\n1312\n01:03:04,200 --> 01:03:06,510\nWhat if I want to go beyond performance?\n\n1313\n01:03:06,510 --> 01:03:07,720\nYou can, right?\n\n1314\n01:03:07,720 --> 01:03:11,680\nDO, Dynamic Optimization is gonna use\nthis by default for moving things around.\n\n1315\n01:03:11,680 --> 01:03:16,650\nBut what if I wanted to deploy SQL, and\nI want to make sure it's only deployed to\n\n1316\n01:03:16,650 --> 01:03:18,720\nphysical servers that\nare still under warranty?\n\n1317\n01:03:20,310 --> 01:03:23,920\nWell, does it know which physical servers\nare under warranty and which ones aren't?\n\n1318\n01:03:23,920 --> 01:03:29,580\nNo, so\nI can create a custom placement rule.\n\n1319\n01:03:29,580 --> 01:03:33,560\nA placement rule that says,\nthis server is under warranty,\n\n1320\n01:03:33,560 --> 01:03:34,760\nthis server is not under warranty.\n\n1321\n01:03:34,760 --> 01:03:38,500\nWhen I deploy this VM, only deploy\nthe ones that are under warranty.\n\n1322\n01:03:38,500 --> 01:03:41,830\nAnd that will take effect\nat the time of deployment.\n\n1323\n01:03:41,830 --> 01:03:46,400\nAnd it can take effect, it doesn't truly\ntake effect at the time of deployment,\n\n1324\n01:03:46,400 --> 01:03:49,910\nlet me backtrack on that, cuz we aren't\nable to set our custom properties yet.\n\n1325\n01:03:49,910 --> 01:03:52,810\nYou'll see the properties down here,\nwhich actually come afterwards.\n\n1326\n01:03:52,810 --> 01:03:56,849\nBut when dynamic optimization kicks in,\nand it starts moving around,\n\n1327\n01:03:56,849 --> 01:03:59,760\nit'll kick in then cuz\nthe properties will be set.\n\n1328\n01:03:59,760 --> 01:04:04,130\nI want to show you that process, show you\nwhat's going on there, how that works.\n\n1329\n01:04:04,130 --> 01:04:05,817\nBut if I'm not getting\nany stars right now,\n\n1330\n01:04:05,817 --> 01:04:07,420\nit'll be hard to see that it's working.\n\n1331\n01:04:07,420 --> 01:04:08,840\nSo Let's do this.\n\n1332\n01:04:08,840 --> 01:04:09,810\nLet's stop and take a break.\n\n1333\n01:04:09,810 --> 01:04:12,350\nI'm gonna find out what I\nbroke in here on my machines.\n\n1334\n01:04:12,350 --> 01:04:15,186\nAnd then when we get back, we'll\ncreate some custom placement rules and\n\n1335\n01:04:15,186 --> 01:04:16,500\nwe'll kinda see how those work.\n\n1336\n01:04:16,500 --> 01:04:18,590\nThey're pretty handy and\nreally useful things.\n\n1337\n01:04:18,590 --> 01:04:19,750\nSo stay tuned.\n\n1338\n01:04:19,750 --> 01:04:20,840\nWe'll be back in just a moment.\n\n1339\n01:04:20,840 --> 01:04:22,880\n[MUSIC]\n\n1340\n01:04:22,880 --> 01:04:28,330\n[SOUND]\n>> All right.\n\n1341\n01:04:28,330 --> 01:04:29,790\nWelcome back, everybody.\n\n1342\n01:04:29,790 --> 01:04:32,200\nOkay, so I found my problem\nwith the placement list.\n\n1343\n01:04:32,200 --> 01:04:34,300\nI kind of forgot a little bit of a step.\n\n1344\n01:04:34,300 --> 01:04:37,650\nOne of the cool things about SCVMM is\nit can provision virtual machines for\n\n1345\n01:04:37,650 --> 01:04:39,670\nmore than one type of cloud.\n\n1346\n01:04:39,670 --> 01:04:42,340\nLike Zen Server and VMware.\n\n1347\n01:04:42,340 --> 01:04:44,990\nAnd so I kind of forgot to check Hyper-V.\n\n1348\n01:04:44,990 --> 01:04:46,910\nSo when I got to the part\nwhere I went to provision it,\n\n1349\n01:04:46,910 --> 01:04:48,440\nit couldn't find any servers to match it.\n\n1350\n01:04:48,440 --> 01:04:51,770\nBut that's a great example of how\nthese placement rules work, right.\n\n1351\n01:04:51,770 --> 01:04:56,430\nWhen you go to create that new vm,\nyou specify your settings, so\n\n1352\n01:04:56,430 --> 01:05:02,480\nI went through and did a blank one,\nI just did Don's test SQL server,\n\n1353\n01:05:02,480 --> 01:05:06,950\nand I specified my hardware that I wanted\nand right here under cloud capability.\n\n1354\n01:05:06,950 --> 01:05:07,530\nThat's the sad part.\n\n1355\n01:05:07,530 --> 01:05:08,475\nIt was on the front screen.\n\n1356\n01:05:08,475 --> 01:05:09,690\n>> [LAUGH]\n>> You pick\n\n1357\n01:05:09,690 --> 01:05:11,710\nwhat cloud fabrics you'll allow.\n\n1358\n01:05:11,710 --> 01:05:12,720\nAll right?\n\n1359\n01:05:12,720 --> 01:05:15,850\nAnd I didn't check any so that's why I\nwasn't getting any placement starts.\n\n1360\n01:05:15,850 --> 01:05:18,780\nBut if I check it off and say,\nI don't care or whatever.\n\n1361\n01:05:18,780 --> 01:05:19,500\nI'll pick Hyper-V.\n\n1362\n01:05:19,500 --> 01:05:20,070\nAll right.\n\n1363\n01:05:20,070 --> 01:05:21,460\nSo I went to go to Hyper-V.\n\n1364\n01:05:21,460 --> 01:05:25,186\nWell, now when it goes to deploy,\nit's gonna take any non Hyper-V server and\n\n1365\n01:05:25,186 --> 01:05:26,606\nremove all the stars from it.\n\n1366\n01:05:26,606 --> 01:05:27,122\nAll right?\n\n1367\n01:05:27,122 --> 01:05:29,060\nBut a Hyper-V server will be lit up.\n\n1368\n01:05:29,060 --> 01:05:35,800\nAnd so as I move forward from here on\nthe next screens, I'll be able to just say\n\n1369\n01:05:35,800 --> 01:05:39,570\nto put it to a private cloud, and now it's\ngonna rank those servers, and there we go.\n\n1370\n01:05:39,570 --> 01:05:42,030\nSo see how I got like four\nstars on this server, but\n\n1371\n01:05:42,030 --> 01:05:43,910\nI only got two and\na half on this guy down here.\n\n1372\n01:05:43,910 --> 01:05:46,400\nAll right, now why is that?\n\n1373\n01:05:46,400 --> 01:05:50,310\nWell, when I look at this first server,\nit's only got one VM running on it.\n\n1374\n01:05:50,310 --> 01:05:53,820\nWhen I look at this last server,\nit's got three VMs running on it.\n\n1375\n01:05:53,820 --> 01:05:55,500\nSo, that server is busier and\n\n1376\n01:05:55,500 --> 01:05:58,250\nit's recommending servers that\nhave more resources available.\n\n1377\n01:05:58,250 --> 01:05:59,860\nThat's how placement rules work.\n\n1378\n01:06:00,990 --> 01:06:02,900\nNow, the placement rules that you're\nusing are the ones that are built\n\n1379\n01:06:02,900 --> 01:06:04,360\ninto the system.\n\n1380\n01:06:04,360 --> 01:06:08,190\nBut we can make our own placement rules\nif we want and it's kind of neat.\n\n1381\n01:06:08,190 --> 01:06:11,840\nSo before the break I gave the example\nof servers that are under warranty.\n\n1382\n01:06:11,840 --> 01:06:15,530\nWell, Hyper-V doesn't know anything\nabout warranty status right?\n\n1383\n01:06:15,530 --> 01:06:18,950\nSo we have to kind of inform it, and\nwe do that through a custom property.\n\n1384\n01:06:18,950 --> 01:06:22,730\nNow there are ten custom\nproperties by default and\n\n1385\n01:06:22,730 --> 01:06:26,386\nthey're called Custom Property one\nall the way to Custom Property ten.\n\n1386\n01:06:26,386 --> 01:06:28,380\n>> [LAUGH]\n>> You can't rename them, and\n\n1387\n01:06:28,380 --> 01:06:30,440\nI never use them because\nyou can't rename them.\n\n1388\n01:06:30,440 --> 01:06:33,370\nI don't know what the hell\nCustom Property seven is.\n\n1389\n01:06:33,370 --> 01:06:35,950\nBut we can create our own beyond that, and\nyou can give them whatever name you want,\n\n1390\n01:06:35,950 --> 01:06:37,160\nand so that's what I normally do.\n\n1391\n01:06:37,160 --> 01:06:38,580\nIt just makes a little more sense.\n\n1392\n01:06:38,580 --> 01:06:39,935\nSo let's walk through that process.\n\n1393\n01:06:39,935 --> 01:06:44,150\nI'm' just gonna cancel out of\nthis virtual machine creation.\n\n1394\n01:06:44,150 --> 01:06:46,275\nOr you know what,\nI guess I can go ahead and create it.\n\n1395\n01:06:46,275 --> 01:06:48,680\nI will just pick a server for\nit to drop it on.\n\n1396\n01:06:48,680 --> 01:06:51,288\nI'll drop it on SCOMM O one,\nand there we go.\n\n1397\n01:06:51,288 --> 01:06:53,570\nI'm not gonna turn it on or\n\n1398\n01:06:53,570 --> 01:06:58,200\nanything we're just going to let it\nfinish and we'll create that BM.\n\n1399\n01:06:58,200 --> 01:07:03,180\nSo if I want to create some custom\nplacement rules, what I can do\n\n1400\n01:07:03,180 --> 01:07:07,765\nis that I can come in here into my system\nand to place the rules, you typically\n\n1401\n01:07:07,765 --> 01:07:12,600\nwanna put them on a host group, because we\nare picking a host from within a group.\n\n1402\n01:07:12,600 --> 01:07:17,530\nSo I've got a host group here called\nContoso and inside there's a cluster and\n\n1403\n01:07:17,530 --> 01:07:20,510\nsome other VMs and I'm just gonna\nstart right here on a host group and\n\n1404\n01:07:20,510 --> 01:07:21,740\nI'm going to pull up its properties.\n\n1405\n01:07:22,960 --> 01:07:25,340\nAnd inside of the properties of\nthat host group, on the left side,\n\n1406\n01:07:25,340 --> 01:07:29,580\nyou'll see way down here,\ncustom properties, and I can manage my\n\n1407\n01:07:29,580 --> 01:07:33,180\ncustom properties, and I'll see\nthe different settings that are available.\n\n1408\n01:07:33,180 --> 01:07:36,780\nNow, there's none that are showing up,\nwell there actually is\n\n1409\n01:07:36,780 --> 01:07:40,210\ncustom property one through ten,\nbut you cant manipulate those,\n\n1410\n01:07:40,210 --> 01:07:43,130\nthey're kind of build into the system,\nso they don't even show up here.\n\n1411\n01:07:43,130 --> 01:07:45,440\nBut this is where I can create my own.\n\n1412\n01:07:45,440 --> 01:07:49,170\nAnd so I'm gonna create\na property called Under Warranty,\n\n1413\n01:07:49,170 --> 01:07:53,130\nand I'll just say OK to that, right?\n\n1414\n01:07:53,130 --> 01:07:57,260\nAnd now I need to pick what\nthis applies to, all right?\n\n1415\n01:07:57,260 --> 01:07:59,130\nDo I want to apply to a host group?\n\n1416\n01:07:59,130 --> 01:08:03,620\nWell, I do need it to apply to the host\ngroup in order for it to show in my list.\n\n1417\n01:08:03,620 --> 01:08:07,930\nSo I'm gonna add it there, but where I\nreally care about it are with my hosts.\n\n1418\n01:08:07,930 --> 01:08:08,590\nRight?\n\n1419\n01:08:08,590 --> 01:08:12,100\nIs the host machine under warranty or not?\n\n1420\n01:08:12,100 --> 01:08:15,060\nAnd so I'm just gonna add it\nright there to the host also.\n\n1421\n01:08:15,060 --> 01:08:18,420\nSo this'll be a host property,\nas well as a host group property.\n\n1422\n01:08:18,420 --> 01:08:20,080\nThe group needs to be able to read it.\n\n1423\n01:08:20,080 --> 01:08:23,110\nTo figure out placement the host\nneeds to be able to set it\n\n1424\n01:08:23,110 --> 01:08:26,988\nto show whether they're on a warranty or\nnot.\n\n1425\n01:08:26,988 --> 01:08:30,100\nAll right,\nnow I can go through to my hosts, and so\n\n1426\n01:08:30,100 --> 01:08:34,510\nI can take like this guy, STDPM01,\nI can pull up its properties.\n\n1427\n01:08:35,615 --> 01:08:38,295\nAnd I can go down to Custom Properties,\nand\n\n1428\n01:08:38,295 --> 01:08:42,225\nhere's that Custom one through ten, and\nI can set those to whatever value I want.\n\n1429\n01:08:42,225 --> 01:08:44,875\nMy problem is I just can't\nremember what each one of them is.\n\n1430\n01:08:44,875 --> 01:08:46,565\n>> I know.\nWhat did I use Custom3 for?\n\n1431\n01:08:46,565 --> 01:08:50,275\n>> But right here I've got Under Warranty,\nand I'm gonna set this one to true.\n\n1432\n01:08:50,275 --> 01:08:50,955\nRight?\n\n1433\n01:08:50,955 --> 01:08:52,625\nActually, no, let's set this to false.\n\n1434\n01:08:53,655 --> 01:08:56,425\nI'll set this one to false, and\nyou can put whatever you want in there.\n\n1435\n01:08:56,425 --> 01:08:58,025\nRight?\nYou can do zero and one if you wanted,\n\n1436\n01:08:58,025 --> 01:08:59,970\nbut I'll just do true and false.\n\n1437\n01:08:59,970 --> 01:09:01,680\nSo, under warranty I'll set to false.\n\n1438\n01:09:02,840 --> 01:09:06,070\nAnd then I'll take SCOMM 01 and\n\n1439\n01:09:06,070 --> 01:09:09,210\npull up it's properties and\ngo to custom properties.\n\n1440\n01:09:09,210 --> 01:09:11,360\nAnd I'll set it's under warranty to true.\n\n1441\n01:09:12,500 --> 01:09:17,230\nNow, Hyper-V and SCVMM have no\nidea what a warranty even is.\n\n1442\n01:09:17,230 --> 01:09:18,490\nSo it's up to me to correct this.\n\n1443\n01:09:18,490 --> 01:09:21,530\nSo if one day, S comma one is no longer\nunder warrantee, I need to come and\n\n1444\n01:09:21,530 --> 01:09:23,040\nupdate that, right?\n\n1445\n01:09:23,040 --> 01:09:26,380\nAnd I'm just using warrantee as an\nexample, you could do this for anything.\n\n1446\n01:09:26,380 --> 01:09:30,210\nYou could maybe have a custom\nproperty called environment.\n\n1447\n01:09:30,210 --> 01:09:33,960\nAnd some are set to production, some\nare set to staging, some are set to dev.\n\n1448\n01:09:33,960 --> 01:09:37,800\nBut when you deploy a VM,\nyou could say this is gonna be a dev VM.\n\n1449\n01:09:37,800 --> 01:09:40,780\nSo only go to the dev servers, or\nthere's gonna be a staging game,\n\n1450\n01:09:40,780 --> 01:09:41,730\nonly go to staging.\n\n1451\n01:09:41,730 --> 01:09:43,250\nYou can do all sorts of stuff with this.\n\n1452\n01:09:43,250 --> 01:09:45,959\nWarranty is just one example.\n\n1453\n01:09:45,959 --> 01:09:51,520\nNow Hyper-V knows that this\nguy's not under warranty and\n\n1454\n01:09:51,520 --> 01:09:52,680\nthis guy is under warranty.\n\n1455\n01:09:52,680 --> 01:09:54,790\nI set those custom properties.\n\n1456\n01:09:54,790 --> 01:09:57,550\nSo I can go to one of my virtual machines\n\n1457\n01:09:57,550 --> 01:10:00,820\nlike the Don's VM that\nI created a moment ago.\n\n1458\n01:10:01,830 --> 01:10:04,480\nSo, if I go and find,\nwhere did I put that thing?\n\n1459\n01:10:06,320 --> 01:10:09,040\nActually, where did I put that?\n\n1460\n01:10:09,040 --> 01:10:10,140\nThere it was.\n\n1461\n01:10:10,140 --> 01:10:13,670\nOkay, so here's that Don's test SQL\nserver that I created right here.\n\n1462\n01:10:15,180 --> 01:10:20,610\nI can pull up its properties and in the\nproperties for Don's test sequel server,\n\n1463\n01:10:20,610 --> 01:10:24,170\nif I go into its custom properties\nI can define what I want it to be.\n\n1464\n01:10:24,170 --> 01:10:27,700\nNow, notice that the under warranty\ndoesn't show up here, right.\n\n1465\n01:10:27,700 --> 01:10:30,610\nAnd, that's because I attached it to\nthe host I forgot to attach it to a VM so\n\n1466\n01:10:30,610 --> 01:10:33,140\nit's not even able to key off of that,\nor search off of it.\n\n1467\n01:10:33,140 --> 01:10:35,530\nSo, I'm gonna back to the custom\nproperties and I'm gonna add that one in.\n\n1468\n01:10:35,530 --> 01:10:37,900\nAnd, what I'm gonna say is.\n\n1469\n01:10:37,900 --> 01:10:43,170\nI only want this VM to\ndeploy to other hosts,\n\n1470\n01:10:43,170 --> 01:10:45,180\nthe physical hardware\nthat's under warranty.\n\n1471\n01:10:45,180 --> 01:10:47,750\nI'll say it's true, okay.\n\n1472\n01:10:47,750 --> 01:10:52,260\nSo only let this VM reside on\nhardware that's under warranty.\n\n1473\n01:10:52,260 --> 01:10:56,580\nWhen I do this, I can now write\na rule that defines that and\n\n1474\n01:10:56,580 --> 01:10:58,710\ndynamic optimization will\ntake that into account.\n\n1475\n01:10:58,710 --> 01:11:02,420\nIt'll make sure that this VM only goes\nto hardware that's under warranty.\n\n1476\n01:11:02,420 --> 01:11:05,250\nOr only goes to hardware that's\nin the dev environment, or\n\n1477\n01:11:05,250 --> 01:11:06,230\nstaging environment, right?\n\n1478\n01:11:06,230 --> 01:11:08,200\nCuz you wanna tie those\nto a particular hardware.\n\n1479\n01:11:08,200 --> 01:11:12,920\nIt might be one big fat cluster with 32\nnodes, but it's only certain nodes that I\n\n1480\n01:11:12,920 --> 01:11:15,639\nwant these to go to, and these custom\nproperties are how I'll assign that.\n\n1481\n01:11:17,850 --> 01:11:19,680\nNow I've created the properties, but\n\n1482\n01:11:19,680 --> 01:11:22,370\nthe properties don't actually\ndo anything by themselves.\n\n1483\n01:11:22,370 --> 01:11:25,230\nI have to have a rule that\nties all this together.\n\n1484\n01:11:25,230 --> 01:11:26,810\nA rule that says,\n\n1485\n01:11:26,810 --> 01:11:31,470\nthis virtual machine has to match\nthe settings of the host or whatever.\n\n1486\n01:11:31,470 --> 01:11:33,860\nSo that's the next part of it.\n\n1487\n01:11:33,860 --> 01:11:37,620\nAnd so I'm gonna go back to my host group,\nto this Contoso.\n\n1488\n01:11:37,620 --> 01:11:42,720\nAnd pull up it's properties, and I was\nworking down here under custom properties,\n\n1489\n01:11:42,720 --> 01:11:44,970\nbut up here we've got placement rules.\n\n1490\n01:11:44,970 --> 01:11:46,400\nAnd here's where I can set my rule.\n\n1491\n01:11:46,400 --> 01:11:49,980\nSee how it says use the placement\nsetting for the parent host or group.\n\n1492\n01:11:49,980 --> 01:11:51,555\nBy default it inherits from the parent.\n\n1493\n01:11:51,555 --> 01:11:53,450\n>> Mm-hm\n>> I don't have a parent here, so\n\n1494\n01:11:53,450 --> 01:11:54,520\nit's not inheriting anything.\n\n1495\n01:11:54,520 --> 01:11:56,090\nI'm just gonna turn that off.\n\n1496\n01:11:56,090 --> 01:11:57,800\nAnd now I can add my own custom rules.\n\n1497\n01:11:58,890 --> 01:12:03,130\nAnd I am gonna add a rule that says, see,\nif I've done custom one through ten I\n\n1498\n01:12:03,130 --> 01:12:04,645\ncould pick that but\nI don't know what the hell they are.\n\n1499\n01:12:04,645 --> 01:12:05,262\n>> [LAUGH] Right.\n\n1500\n01:12:05,262 --> 01:12:07,632\n>> So I'm gonna pick under warranty.\n\n1501\n01:12:07,632 --> 01:12:12,226\nSo I am gonna say, when placing a virtual\nmachine the under warranty status of\n\n1502\n01:12:12,226 --> 01:12:14,712\nthe virtual machine must match the host.\n\n1503\n01:12:14,712 --> 01:12:17,792\nIf the virtual machine\nis set to warranty true,\n\n1504\n01:12:17,792 --> 01:12:21,065\nit'll only go to hosts who\nhave warranty at true.\n\n1505\n01:12:21,065 --> 01:12:22,880\nOr the virtual machine is\nset to warranty false,\n\n1506\n01:12:22,880 --> 01:12:25,460\nit'll only go to machines with\na warranty of false, right?\n\n1507\n01:12:25,460 --> 01:12:27,430\nNow I can start separating that.\n\n1508\n01:12:27,430 --> 01:12:28,660\nAnd you have other options in here.\n\n1509\n01:12:28,660 --> 01:12:31,150\nVirtual machine should match the host,\n\n1510\n01:12:31,150 --> 01:12:33,330\nwe've got virtual machine\nmust match the host.\n\n1511\n01:12:33,330 --> 01:12:37,020\nNow should, and must,\ntwo of my favorite words.\n\n1512\n01:12:37,020 --> 01:12:38,460\nMust, it's hard and set.\n\n1513\n01:12:38,460 --> 01:12:41,200\nIf there's no hardware that's\nstill under warrantee this virtual\n\n1514\n01:12:41,200 --> 01:12:41,810\nmachine won't spin up.\n\n1515\n01:12:43,160 --> 01:12:46,660\nShould means will prefer\nsomebody under warranty but\n\n1516\n01:12:46,660 --> 01:12:48,250\nif nobodies available we'll go out at it.\n\n1517\n01:12:48,250 --> 01:12:52,770\nI like to use should better and\nthen you've got must not match the host or\n\n1518\n01:12:52,770 --> 01:12:57,030\nshould not match the host so\nI'm gonna should\n\n1519\n01:12:57,030 --> 01:13:00,900\nif I've got a virtual machine\nset to warranty true, if there's\n\n1520\n01:13:00,900 --> 01:13:05,000\nany server available who's warranty\nstatus is set to true, we'll prefer that.\n\n1521\n01:13:05,000 --> 01:13:07,380\nBut if there isn't we'll\ngo with everybody else.\n\n1522\n01:13:08,570 --> 01:13:09,200\n>> Yep.\nAll right, and so\n\n1523\n01:13:09,200 --> 01:13:11,390\nI'll go ahead and say okay to that.\n\n1524\n01:13:11,390 --> 01:13:14,850\nAnd now that placement rule is\ntaking effect, for this host group.\n\n1525\n01:13:14,850 --> 01:13:15,570\nAll right.\n\n1526\n01:13:15,570 --> 01:13:19,080\nAnd I can go in and I can take something\nlike that Don's test sequel server.\n\n1527\n01:13:19,080 --> 01:13:23,130\nAnd I didn't put it into my cluster so\nI'll have to migrate that virtual machine.\n\n1528\n01:13:23,130 --> 01:13:25,700\nBut when I go to migrate,\nwhen I go to move it around,\n\n1529\n01:13:25,700 --> 01:13:28,420\nit's gonna look at the other\nservers that are out there and\n\n1530\n01:13:28,420 --> 01:13:31,664\nit's gonna rank them, and\nthe very first one is as,\n\n1531\n01:13:31,664 --> 01:13:37,186\ncomma one, there's a tie between it and\nthe other hosts.\n\n1532\n01:13:37,186 --> 01:13:38,760\nBut as comma one is preferred and\n\n1533\n01:13:38,760 --> 01:13:42,770\nthe main reason it's preferred,\nis because of that custom property, right?\n\n1534\n01:13:42,770 --> 01:13:46,129\nIt's got a warranty status of true so\nit's now first in the list.\n\n1535\n01:13:47,740 --> 01:13:50,570\nIf I change that, let me change that rule.\n\n1536\n01:13:50,570 --> 01:13:53,240\nActually, here, let me change,\nwell, I'll change the rule itself.\n\n1537\n01:13:54,290 --> 01:13:56,170\nAnd we'll just make it\nthe opposite on purpose.\n\n1538\n01:13:57,770 --> 01:13:59,670\nIf I take this rule and remove it.\n\n1539\n01:13:59,670 --> 01:14:04,200\nI'll add it back in, and I'm gonna\nsay warranty status, must not match.\n\n1540\n01:14:05,260 --> 01:14:05,760\nAll right?\n\n1541\n01:14:06,870 --> 01:14:11,310\nIf I have warranty set to true, it's not\ngonna match anybody else's set to true.\n\n1542\n01:14:11,310 --> 01:14:12,370\nIt must not match.\n\n1543\n01:14:12,370 --> 01:14:15,490\nIt's not a realistic example, but\nit'll show that that's what our change is.\n\n1544\n01:14:17,040 --> 01:14:19,320\nNow when I go and\ntake Don's test sequel server and\n\n1545\n01:14:19,320 --> 01:14:25,290\nI go to migrate it, and\nit goes to giving my recommendations.\n\n1546\n01:14:25,290 --> 01:14:27,433\nSee how s comma one has zero stars now.\n\n1547\n01:14:27,433 --> 01:14:28,420\n>> Zero stars.\nNo match at all.\n\n1548\n01:14:28,420 --> 01:14:29,810\n>> Yep.\n\n1549\n01:14:29,810 --> 01:14:33,260\nNow that's important because\nDO Dynamic Optimization..\n\n1550\n01:14:33,260 --> 01:14:36,540\nIt's gonna see that and\ntake action based on it.\n\n1551\n01:14:36,540 --> 01:14:38,900\nThat's what big custom\nplacement roles can do.\n\n1552\n01:14:38,900 --> 01:14:42,040\nAnd this helps us to make sure that\nif I've got two machines that I know\n\n1553\n01:14:42,040 --> 01:14:47,189\nare gonna contend with each other, I could\ncreate these types that say things like...\n\n1554\n01:14:48,420 --> 01:14:50,550\nHi CPU, low CPU?\n\n1555\n01:14:50,550 --> 01:14:54,410\nAnd now, it's only gonna go to servers\nthat match that particular characteristic.\n\n1556\n01:14:54,410 --> 01:14:57,450\nOr dev, staging, tests, production.\n\n1557\n01:14:57,450 --> 01:15:00,130\nNow, it's only gonna go to those\nservers that are in that environment.\n\n1558\n01:15:00,130 --> 01:15:03,170\nReally neat way to influence\nwhere these VM's end up.\n\n1559\n01:15:03,170 --> 01:15:06,510\nIt's important that we put these\ninto place as part of our design.\n\n1560\n01:15:06,510 --> 01:15:10,070\nSo that Dynamic Optimization\nworks the way that we want it to.\n\n1561\n01:15:10,070 --> 01:15:11,836\nAll right.\nThose are custom placement rules,\n\n1562\n01:15:11,836 --> 01:15:15,211\nthey're not hard to make, it was\na little bit difficult because I had so\n\n1563\n01:15:15,211 --> 01:15:19,147\nmany different places to set it up, but\nit's not that hard once they're in place,\n\n1564\n01:15:19,147 --> 01:15:22,037\nnow they run, and now we can\nensure that safety as we deploy.\n\n1565\n01:15:22,037 --> 01:15:27,452\nMore VM's that these get safely deployed,\nall right, so those replacement rules and\n\n1566\n01:15:27,452 --> 01:15:31,400\ndefinitely something we need to\nconsider as we deploy the app.\n\n1567\n01:15:33,010 --> 01:15:34,740\nAll right Mike,\nwhat's the last thing on our list?\n\n1568\n01:15:34,740 --> 01:15:36,870\nWe've got.\n>> High availability.\n\n1569\n01:15:36,870 --> 01:15:37,670\nThat's an important one.\n\n1570\n01:15:37,670 --> 01:15:39,150\n>> Yeah.\n\n1571\n01:15:39,150 --> 01:15:41,280\n>> I know I mentioned that at\nthe beginning of the show,\n\n1572\n01:15:41,280 --> 01:15:43,260\nwe want a highly available network,\n\n1573\n01:15:43,260 --> 01:15:49,250\na network where if a physical host fails,\nour VM's just jump somewhere else.\n\n1574\n01:15:49,250 --> 01:15:50,670\nIt's important to have that.\n\n1575\n01:15:50,670 --> 01:15:53,790\nWell, there's clustering that can provide\nthat, and we covered that other episodes.\n\n1576\n01:15:53,790 --> 01:15:55,620\nWe've already seen clustering.\n\n1577\n01:15:55,620 --> 01:15:58,550\nBut there are some other\noptions that are available too.\n\n1578\n01:15:58,550 --> 01:16:01,470\nRegardless of which option we take,\nyou gotta pay attention to how much\n\n1579\n01:16:01,470 --> 01:16:06,380\nmemory your VM needs, how much disk I/O\nyour VM needs, how much CPU, and make sure\n\n1580\n01:16:06,380 --> 01:16:09,970\nthat there's a server somewhere else that\nhas those same resources available, right?\n\n1581\n01:16:09,970 --> 01:16:11,930\n>> Right.\n>> Not just has the same resources but\n\n1582\n01:16:11,930 --> 01:16:13,130\nhas them available.\n\n1583\n01:16:13,130 --> 01:16:13,836\n>> Exactly.\n[LAUGH]\n\n1584\n01:16:13,836 --> 01:16:14,887\n>> That's that key piece.\n\n1585\n01:16:14,887 --> 01:16:20,090\nIf you've got a two-node cluster,\nthose nodes should never run over\n\n1586\n01:16:20,090 --> 01:16:25,660\n50% utilization cuz if one fails\nthe other's gotta take on both loads.\n\n1587\n01:16:25,660 --> 01:16:28,150\nIf it's over 50% one server\ncan't carry both loads.\n\n1588\n01:16:29,520 --> 01:16:31,430\nThat's something we keep\nin mind as you get more and\n\n1589\n01:16:31,430 --> 01:16:34,160\nmore nodes in the cluster then it\nbecomes harder to calculate out, but\n\n1590\n01:16:34,160 --> 01:16:36,850\nyou've gotta make sure you've\ngot the resources available.\n\n1591\n01:16:36,850 --> 01:16:41,250\nNow, clustering is one solution, but\nall of the Microsoft fail-over cluster\n\n1592\n01:16:41,250 --> 01:16:45,920\nenvironments are really designed for being\ndeployed in one physical location, right.\n\n1593\n01:16:45,920 --> 01:16:49,315\nI know there's ways to do\nwhere you can spread the,\n\n1594\n01:16:49,315 --> 01:16:53,960\nsub-net across more than one geographical\nlocation and get that cluster spread out.\n\n1595\n01:16:53,960 --> 01:16:55,150\nThat's not really how it was designed.\n\n1596\n01:16:56,360 --> 01:16:59,960\nIn Hyper V they created a new option for\nus called the Hyper V replica\n\n1597\n01:17:00,980 --> 01:17:03,920\nthat is a little better suited for\nwide area network replication.\n\n1598\n01:17:05,340 --> 01:17:09,120\nAnd I know we've covered Hyper V\nreplicas in another episode too but\n\n1599\n01:17:09,120 --> 01:17:10,960\nlets just re cap it again.\n\n1600\n01:17:10,960 --> 01:17:14,740\nWith a Hyper V replica, you've got a VM\nthat's up and running in one location.\n\n1601\n01:17:14,740 --> 01:17:15,980\nIt's running, it's perfectly happy.\n\n1602\n01:17:17,550 --> 01:17:20,440\nAt the same time,while it's running,\n\n1603\n01:17:20,440 --> 01:17:24,050\nany change that's made to it,\nis stored in a folder.\n\n1604\n01:17:24,050 --> 01:17:28,716\nStored in a special place in the hard\ndrive, and at a set interval,every so\n\n1605\n01:17:28,716 --> 01:17:32,520\noften, all those changes will then\nshift off to another location and\n\n1606\n01:17:32,520 --> 01:17:36,930\nthey're applied to another virtual machine\nthat's a clone of our first one and so\n\n1607\n01:17:36,930 --> 01:17:37,600\nit's kept in sync.\n\n1608\n01:17:38,680 --> 01:17:41,070\nNow in Windows Server 2012,\nit was done every 30 minutes.\n\n1609\n01:17:41,070 --> 01:17:44,460\nAnd so a lot of people looked at it and\nsaid oof, 30 minutes.\n\n1610\n01:17:44,460 --> 01:17:45,280\n>> Yeah, that's a lot of time.\n\n1611\n01:17:45,280 --> 01:17:46,430\n>> it's a big gap.\n\n1612\n01:17:47,500 --> 01:17:49,940\nFor a slow, wide area network,\nthat's adequate.\n\n1613\n01:17:49,940 --> 01:17:52,980\nBut that means you could lose up to 30\nminutes of data if you had a failure.\n\n1614\n01:17:52,980 --> 01:17:56,390\nIt's not like a cluster,\nwhere you lose no data, right?\n\n1615\n01:17:56,390 --> 01:17:59,950\nIt wasn't a really replacement for\nthat, well in server 2012 R2,\n\n1616\n01:17:59,950 --> 01:18:02,090\nthey changed those times.\n\n1617\n01:18:02,090 --> 01:18:04,180\nAnd now we can actually pick the time.\n\n1618\n01:18:04,180 --> 01:18:08,510\nAnd the shortest interval available\nnow is 30 seconds, much, much smaller.\n\n1619\n01:18:08,510 --> 01:18:09,320\n>> Yeah that's nice.\n\n1620\n01:18:09,320 --> 01:18:10,725\n>> Can you afford to\nlose 30 seconds of data?\n\n1621\n01:18:10,725 --> 01:18:12,321\nMost people can.\n\n1622\n01:18:12,321 --> 01:18:13,900\n>> Most environments yeah.\n\n1623\n01:18:13,900 --> 01:18:14,450\n>> Yep.\nAnd if you can't,\n\n1624\n01:18:14,450 --> 01:18:16,230\nyou need to look at your software and say,\n\n1625\n01:18:16,230 --> 01:18:18,170\nis there a way in software\nI can solve that problem.\n\n1626\n01:18:18,170 --> 01:18:19,950\nNot necessarily the virtual machines and\nhardware, but\n\n1627\n01:18:19,950 --> 01:18:22,630\nin the application,\nto solve that 30 second problem.\n\n1628\n01:18:22,630 --> 01:18:27,230\nBut now we can be sending those\nchanges in batches every 30 seconds\n\n1629\n01:18:27,230 --> 01:18:28,590\nacross the other side.\n\n1630\n01:18:28,590 --> 01:18:30,910\nThe longest interval you\ncan choose is 15 minutes.\n\n1631\n01:18:30,910 --> 01:18:32,390\nThey just ditched 30 minutes all together,\n\n1632\n01:18:32,390 --> 01:18:34,300\nand they said 15 minutes,\nwe'll go with that.\n\n1633\n01:18:34,300 --> 01:18:37,840\nAnd so if I remember right it's 30\nseconds, five minutes, 15 minutes.\n\n1634\n01:18:37,840 --> 01:18:38,800\nI think those are, is that right?\n\n1635\n01:18:38,800 --> 01:18:40,050\nYeah.\nOkay, I'm not lying.\n\n1636\n01:18:42,720 --> 01:18:45,780\nAnyhow that's our intervals that we\nget to pick from with Hyper-V replica\n\n1637\n01:18:45,780 --> 01:18:46,470\napplication.\n\n1638\n01:18:46,470 --> 01:18:49,366\nKey things if you're going\nto use a Hyper-V replica,\n\n1639\n01:18:49,366 --> 01:18:52,058\nyou need to make sure that\nyou've got band width.\n\n1640\n01:18:52,058 --> 01:18:54,890\nIf you're go over a wide area network and\nyou're replicating a huge amount of\n\n1641\n01:18:54,890 --> 01:18:58,120\nchanges, the smaller your bandwidth,\nthe longer it takes to replicate.\n\n1642\n01:18:58,120 --> 01:19:02,020\nThe longer it takes to replicate,\nthe further behind that remote gets.\n\n1643\n01:19:02,020 --> 01:19:04,910\nThe further behind the remote is when you\nhave a failure, the more data you lose,\n\n1644\n01:19:04,910 --> 01:19:06,400\nand that's not something\nyou want to have happen.\n\n1645\n01:19:06,400 --> 01:19:07,677\n>> Right.\n>> All right,\n\n1646\n01:19:07,677 --> 01:19:12,170\nother things you want to keep in mind,\nnot just bandwidth, but the resources.\n\n1647\n01:19:12,170 --> 01:19:14,260\nIf you get eight gigs of RAM\nassigned to the main VM,\n\n1648\n01:19:14,260 --> 01:19:17,112\nthe replica needs to have\neight gigs of RAM assigned.\n\n1649\n01:19:17,112 --> 01:19:20,210\nCuz of the if the main VM goes offline,\nthe replica is going to kick in, and it\n\n1650\n01:19:20,210 --> 01:19:24,290\nassumes it's got the same resources, but\nthe resources don't have to be identical.\n\n1651\n01:19:24,290 --> 01:19:28,350\nThis is a big challenge with clusters.\n\n1652\n01:19:28,350 --> 01:19:30,480\nIf I've got a fiber channel SAN and\n\n1653\n01:19:30,480 --> 01:19:34,070\nI'm connected to a LUN numbered seven,\nin my production environment and,\n\n1654\n01:19:34,070 --> 01:19:39,150\nI do geo-stretching and\nI send my cluster into another sub-net.\n\n1655\n01:19:39,150 --> 01:19:40,500\nAnother geographic area.\n\n1656\n01:19:40,500 --> 01:19:42,750\nIt expects to have the same\nhardware on the other side.\n\n1657\n01:19:42,750 --> 01:19:46,489\nIt expects to have the same HBA's,\nthe same CPU's, all that stuff.\n\n1658\n01:19:47,700 --> 01:19:52,710\nBut with a Hyper-V replica, it doesn't,\nif you've got two V CPU's assigned\n\n1659\n01:19:52,710 --> 01:19:56,870\nto your main VM, the replica will\nhave two CPU's assigned to it also.\n\n1660\n01:19:56,870 --> 01:19:58,870\nBut the CPU's don't have to be identical.\n\n1661\n01:19:58,870 --> 01:20:00,460\nBecause the VM does actually reboot.\n\n1662\n01:20:00,460 --> 01:20:02,100\nWhen the other one kicks in,\nit gotta boot up.\n\n1663\n01:20:02,100 --> 01:20:02,960\nIt's held in an offline state.\n\n1664\n01:20:02,960 --> 01:20:06,070\nIt's not synchronizing RAM,\nit's synchronizing this.\n\n1665\n01:20:07,270 --> 01:20:11,840\nAlso, if you've got a SAM on one side,\nyou might have local storage on the other.\n\n1666\n01:20:11,840 --> 01:20:15,550\nYou might have a 12 node cluster\nin your production environment.\n\n1667\n01:20:15,550 --> 01:20:17,385\nAnd in your disaster recovery server,\n\n1668\n01:20:17,385 --> 01:20:19,670\nyou might just have a single\nstand alone server.\n\n1669\n01:20:19,670 --> 01:20:21,140\nThe hardware doesn't have to match.\n\n1670\n01:20:21,140 --> 01:20:24,135\nThe virtual machine configuration will,\nbut the hardware doesn't, and\n\n1671\n01:20:24,135 --> 01:20:26,570\nthat makes it really easy\nto set up these replicas.\n\n1672\n01:20:26,570 --> 01:20:28,100\nFar more simple than doing a cluster.\n\n1673\n01:20:30,170 --> 01:20:33,474\nSo if we want to set that up it's\npretty straightforward, I know we\n\n1674\n01:20:33,474 --> 01:20:37,663\nshowed it in another show, but let's just\nkind of recap those settings real quick.\n\n1675\n01:20:37,663 --> 01:20:43,960\nI'm gonna just dump out of the SCVMM and\ngo into the regular old Hyper-V Manager.\n\n1676\n01:20:43,960 --> 01:20:45,970\nSo, if I go into the Hyper-V Manager,\n\n1677\n01:20:45,970 --> 01:20:48,840\nyou'll see the setting is\nreally not that difficult.\n\n1678\n01:20:48,840 --> 01:20:52,060\nWhat you basically have to do\nis you have to take the VM and,\n\n1679\n01:20:52,060 --> 01:20:55,779\non the VM itself,\nyou have to turn on the replica setting.\n\n1680\n01:20:57,210 --> 01:20:58,930\nAnd then, in addition to that,\n\n1681\n01:20:58,930 --> 01:21:03,090\nyou have to define a folder, which is\ngoing to be where the changes get stored.\n\n1682\n01:21:04,130 --> 01:21:09,560\nSo if I go into SCVMM01,\nthere's my Don's test SQL server.\n\n1683\n01:21:09,560 --> 01:21:15,190\nAnd if I pull up it's context menu,\nyou'll see enable replication right there.\n\n1684\n01:21:15,190 --> 01:21:18,520\nI can turn on that replication for the VM.\n\n1685\n01:21:18,520 --> 01:21:21,328\nWell, it's the host that's\nactually doing the replica, so\n\n1686\n01:21:21,328 --> 01:21:23,010\nif I just do this it's going to fail.\n\n1687\n01:21:23,010 --> 01:21:28,833\nLet me go up to my host, and\nif I pull up it's Hyper-V settings.\n\n1688\n01:21:28,833 --> 01:21:33,345\nIn the Hyper-V settings you'll\nsee replication configuration.\n\n1689\n01:21:33,345 --> 01:21:36,660\nHyper-V replicas are disabled in Hyper-V\nby default, you have to turn it on.\n\n1690\n01:21:36,660 --> 01:21:40,460\nI'm gonna say enable this\ncomputer as replica server.\n\n1691\n01:21:40,460 --> 01:21:44,260\nYou need to do this on the source and\nthe destination.\n\n1692\n01:21:44,260 --> 01:21:47,510\nSo the source is the host\nthat actually has the VM now.\n\n1693\n01:21:47,510 --> 01:21:50,770\nThe destination is wherever\nyou're replicating this to.\n\n1694\n01:21:52,760 --> 01:21:55,877\nYou can use Kerberos authentication or\ncertificate-based authentication,\n\n1695\n01:21:55,877 --> 01:21:58,510\nto secure you should use one or the other.\n\n1696\n01:21:58,510 --> 01:22:00,080\nYou can also use SSL.\n\n1697\n01:22:00,080 --> 01:22:02,290\nIf you do that with\ncertificate-based authentication,\n\n1698\n01:22:02,290 --> 01:22:04,350\nyou need to make sure you've got\na public key infrastructure.\n\n1699\n01:22:04,350 --> 01:22:06,850\nThe other end needs to\ntrust our certificates.\n\n1700\n01:22:06,850 --> 01:22:10,750\nThis is really handy if the remote\nHyper-V host is not on your domain.\n\n1701\n01:22:11,940 --> 01:22:13,840\nIf it's on your domain\nyou can use Kerberos.\n\n1702\n01:22:13,840 --> 01:22:15,600\nAnd it'll authenticate, no problem.\n\n1703\n01:22:15,600 --> 01:22:16,940\nBut if it's on a separate domain or\n\n1704\n01:22:16,940 --> 01:22:20,050\nif it's just a standalone server it\ndoesn't have a way to authenticate us?\n\n1705\n01:22:20,050 --> 01:22:23,600\nCertificates crack that.\n\n1706\n01:22:23,600 --> 01:22:28,460\nThen down here you'll see, I'm allowing\nreplication from specified servers or\n\n1707\n01:22:28,460 --> 01:22:29,620\nany authenticated server.\n\n1708\n01:22:29,620 --> 01:22:32,070\nYou can say anybody can replicate,\n\n1709\n01:22:32,070 --> 01:22:35,400\nno big deal here's where we're\ngoing to store the replica files.\n\n1710\n01:22:35,400 --> 01:22:40,188\nOr I can say these particular servers and\nspecify replication locations for\n\n1711\n01:22:40,188 --> 01:22:40,871\neach one.\n\n1712\n01:22:40,871 --> 01:22:44,263\nI'm gonna go ahead and just do all for\nright now and I can pick, this folder is\n\n1713\n01:22:44,263 --> 01:22:47,496\nnot necessarily the greatest folder,\nlet's try and pick a better one.\n\n1714\n01:22:47,496 --> 01:22:53,615\nOne that I can actually find if I need to.\n\n1715\n01:22:53,615 --> 01:22:55,433\n[CROSSTALK]\n>> We'll just do D: and\n\n1716\n01:22:55,433 --> 01:22:58,538\nI'll just call it Hyper-V replicas.\n\n1717\n01:23:00,246 --> 01:23:01,580\nThere we go.\n\n1718\n01:23:01,580 --> 01:23:03,600\nAll right, so\nthat's where my replica data's gonna go.\n\n1719\n01:23:03,600 --> 01:23:05,746\nAs changes occur,\nthey'll get stuck in right there.\n\n1720\n01:23:07,121 --> 01:23:10,830\nAll right, so\nnow let's turn on here from my server.\n\n1721\n01:23:10,830 --> 01:23:13,710\nNow I can go and turn it on from the VM.\n\n1722\n01:23:13,710 --> 01:23:16,250\nNow it's giving me a warning, oh,\nI didn't choose authentication type.\n\n1723\n01:23:16,250 --> 01:23:17,372\nI'll just go with Kerberos.\n\n1724\n01:23:19,580 --> 01:23:22,860\nAll right, it's letting me know I may\nneed to update my firewall to allow that\n\n1725\n01:23:22,860 --> 01:23:23,930\nKerberos traffic to go.\n\n1726\n01:23:23,930 --> 01:23:26,760\nSo it's just telling me that\nport 80 is what it's using, and\n\n1727\n01:23:26,760 --> 01:23:27,570\nI'll be okay with that.\n\n1728\n01:23:28,710 --> 01:23:30,940\nAnd now I can go and\nturn this on for my individual VMs.\n\n1729\n01:23:30,940 --> 01:23:34,780\nI'll just right-click and choose Enable\nReplication, and it's gonna turn it on.\n\n1730\n01:23:34,780 --> 01:23:37,480\nNow, I'll have to pick\nmy remote server here,\n\n1731\n01:23:37,480 --> 01:23:40,300\nwhere we're going to replicate to and\nI haven't set that up.\n\n1732\n01:23:40,300 --> 01:23:43,240\nBut as you go through this wizard,\nyou just pick the destination.\n\n1733\n01:23:43,240 --> 01:23:46,770\nIt'll test the connectivity to it,\nto make sure it can get there.\n\n1734\n01:23:46,770 --> 01:23:50,130\nAnd if they can't, it'll basically\ncreate a shadow VM on the other side,\n\n1735\n01:23:50,130 --> 01:23:51,810\nand start replicating our data.\n\n1736\n01:23:53,100 --> 01:23:56,320\nOn the other side,\nit'll start receiving these settings and\n\n1737\n01:23:56,320 --> 01:23:57,410\nit'll build up that replica.\n\n1738\n01:23:57,410 --> 01:24:01,970\nLet me add in another Hyper-V\nserver here and we'll see that.\n\n1739\n01:24:01,970 --> 01:24:03,246\nLet's see.\nWho's on my network?\n\n1740\n01:24:03,246 --> 01:24:08,187\nLet's use s,1 It's in a cluster,\n\n1741\n01:24:08,187 --> 01:24:10,246\nbut I don't think that'll\ncause too many problems.\n\n1742\n01:24:10,246 --> 01:24:12,038\nSo I'm gonna take SCOM01.\n\n1743\n01:24:12,038 --> 01:24:14,490\nI'll go in it's Hyper-V settings and\nI'll turn on its replica.\n\n1744\n01:24:16,600 --> 01:24:17,746\nOh it is, it's gonna stop me.\n\n1745\n01:24:17,746 --> 01:24:18,455\nYep.\n\n1746\n01:24:18,455 --> 01:24:19,289\nYeah, that one's in a cluster.\n\n1747\n01:24:19,289 --> 01:24:19,996\n>> That one's in a cluster, yeah.\n\n1748\n01:24:19,996 --> 01:24:22,410\n>> What's my-\n>> There was another one, that one.\n\n1749\n01:24:22,410 --> 01:24:25,710\n>> With clustering you've gotta actually\ngo and set this up in the cluster manager,\n\n1750\n01:24:25,710 --> 01:24:29,390\nfor a stand alone server we\ncan go a different route.\n\n1751\n01:24:29,390 --> 01:24:30,751\nSo let's see.\n\n1752\n01:24:31,969 --> 01:24:34,746\n>> What about SCO1?\n\n1753\n01:24:34,746 --> 01:24:40,531\n>> I think SC I'll try this guy.\n\n1754\n01:24:40,531 --> 01:24:42,250\nAs many as we can.\n\n1755\n01:24:42,250 --> 01:24:42,788\nThere we go.\n\n1756\n01:24:42,788 --> 01:24:43,455\nThis guy worked.\n\n1757\n01:24:43,455 --> 01:24:46,635\nAll right, so, I'm gonna go ahead and\nturn on a replication for him and\n\n1758\n01:24:46,635 --> 01:24:49,080\nI'll specify where he's\ngonna be storing his stuff.\n\n1759\n01:24:52,288 --> 01:24:55,330\nAnd we'll back it up a bit here.\n\n1760\n01:25:01,788 --> 01:25:03,805\nDo I not have permission\nto create a new folder?\n\n1761\n01:25:03,805 --> 01:25:05,189\nI don't.\nI'm just gonna stick it here\n\n1762\n01:25:05,189 --> 01:25:05,746\nin this folder.\n\n1763\n01:25:05,746 --> 01:25:07,950\n[LAUGH] I'm not gonna go too crazy here.\n\n1764\n01:25:07,950 --> 01:25:10,889\nAll right, so there we go,\nand must select a least, oh,\n\n1765\n01:25:10,889 --> 01:25:13,913\nI forgot authentication again,\nsee, I keep doing that.\n\n1766\n01:25:13,913 --> 01:25:14,705\nThere we go.\n\n1767\n01:25:14,705 --> 01:25:15,540\nAll right.\n\n1768\n01:25:15,540 --> 01:25:18,193\nSo now I've got a replica set up so\nI can take this guy and\n\n1769\n01:25:18,193 --> 01:25:21,598\nwhen I enable replication for the VM,\nI just right-click on the VM and\n\n1770\n01:25:21,598 --> 01:25:24,455\nchoose enable replication,\nI pick who it's gonna go to.\n\n1771\n01:25:24,455 --> 01:25:27,205\nAnd in this case,\nI want it to go to this other server.\n\n1772\n01:25:27,205 --> 01:25:31,496\nNo, it's not that one, SCCM01, I got it.\n\n1773\n01:25:31,496 --> 01:25:33,440\nAll right, so\nI'll just punch that in there.\n\n1774\n01:25:33,440 --> 01:25:36,740\nIt's gonna reach out, and it did\nactually test an activity right there,\n\n1775\n01:25:36,740 --> 01:25:38,890\njust to see if it could\ntouch the other server.\n\n1776\n01:25:38,890 --> 01:25:40,790\nAnd now it's asking for authentication.\n\n1777\n01:25:40,790 --> 01:25:44,010\nIf I've got more than one server set up I\ncan actually do multiple certificates for\n\n1778\n01:25:44,010 --> 01:25:46,400\nthose, but I just chose to do Kerberos.\n\n1779\n01:25:46,400 --> 01:25:49,400\nWe're on the same domain so\nthat will work fine for me.\n\n1780\n01:25:49,400 --> 01:25:51,710\nNotice this option down here for\ncompressing data.\n\n1781\n01:25:51,710 --> 01:25:54,038\nIt will try and compress it by default.\n\n1782\n01:25:54,038 --> 01:25:57,230\nThat's important cuz if you\nhave a lot of data you need it\n\n1783\n01:25:57,230 --> 01:25:59,120\nto cross the network as\nefficiently as possible.\n\n1784\n01:25:59,120 --> 01:26:01,950\n>> I also like that other note up there\ndata will not be encrypted when you\n\n1785\n01:26:01,950 --> 01:26:03,080\ntransmit it that way.\n\n1786\n01:26:03,080 --> 01:26:04,280\n>> Oh yeah.\n>> If you're going across a WAN or\n\n1787\n01:26:04,280 --> 01:26:06,038\nsomething like that it's\nsomething you got to think about.\n\n1788\n01:26:06,038 --> 01:26:09,420\n>> Yeah, and you can couple this\nwith a VPN tunnel or IPsec.\n\n1789\n01:26:09,420 --> 01:26:12,790\nIf we had done certificate based,\nit actually does do SSLs or TLS,\n\n1790\n01:26:12,790 --> 01:26:14,000\nso it's encrypted there.\n\n1791\n01:26:17,430 --> 01:26:19,520\nSo then we can pick what hard\ndrives are replicating, and\n\n1792\n01:26:19,520 --> 01:26:23,530\nnotice it does say that, virtual hard\ndisk, it's not replicating the memory.\n\n1793\n01:26:23,530 --> 01:26:26,080\nIf this machine fails,\nit actually boots up on the other side.\n\n1794\n01:26:26,080 --> 01:26:29,350\nThat's why the CPU doesn't have to match\nand stuff, cuz it's doing a reboot.\n\n1795\n01:26:29,350 --> 01:26:32,020\nSo it's just listing the hard drive for\nthe virtual machine that I picked.\n\n1796\n01:26:33,060 --> 01:26:34,620\nAnd then the replication frequency, and\n\n1797\n01:26:34,620 --> 01:26:36,970\nthere's my 30 seconds,\nfive minutes, 15 minutes.\n\n1798\n01:26:36,970 --> 01:26:39,200\nI'll go five minutes on this one.\n\n1799\n01:26:40,700 --> 01:26:43,100\nYou can set up recovery points.\n\n1800\n01:26:43,100 --> 01:26:46,250\nIf a failure happens, and like\nthe machine was infected with a virus.\n\n1801\n01:26:46,250 --> 01:26:48,310\nAnd the virus has already\nmade it to the other side,\n\n1802\n01:26:48,310 --> 01:26:49,960\nyou might not want the latest and\ngreatest.\n\n1803\n01:26:49,960 --> 01:26:51,650\nAnd so you can do recovery points.\n\n1804\n01:26:51,650 --> 01:26:53,540\nNot the greatest idea\nwith a domain controller.\n\n1805\n01:26:53,540 --> 01:26:56,220\nThis is not really necessary\nwith domain controllers.\n\n1806\n01:26:56,220 --> 01:26:58,320\nBut with other applications\nservers it can be useful.\n\n1807\n01:26:58,320 --> 01:27:02,090\nSo you can specify for\nit to save those change files.\n\n1808\n01:27:02,090 --> 01:27:04,860\nSo it could roll back to any point\nin the back history if you want.\n\n1809\n01:27:06,070 --> 01:27:09,470\nSo I'll say create additional hourly\nrecovery points is what I'm gonna say.\n\n1810\n01:27:11,960 --> 01:27:14,130\nAnd then how does it do\nthe initial replica?\n\n1811\n01:27:14,130 --> 01:27:17,040\nI'll go ahead and just say send\nthe initial copy over the network.\n\n1812\n01:27:17,040 --> 01:27:21,020\nYou could just copy the VHDs to like a USB\ndrive and move them over to the other side\n\n1813\n01:27:21,020 --> 01:27:23,770\nto save a little bit of time,\nbut I'll go over the network.\n\n1814\n01:27:23,770 --> 01:27:25,210\nWe'll start that replication immediately.\n\n1815\n01:27:25,210 --> 01:27:27,410\nAnd that's it.\n\n1816\n01:27:27,410 --> 01:27:29,780\nAll right, so\nnow I've got a Hyper-V replica.\n\n1817\n01:27:29,780 --> 01:27:34,380\nWhen the main one fails, the other one\ncan boot up, and I'm back in business.\n\n1818\n01:27:34,380 --> 01:27:36,100\nAnd since I chose a five minute interval,\n\n1819\n01:27:36,100 --> 01:27:39,160\nwell, it'll always be within\nfive minutes of current.\n\n1820\n01:27:39,160 --> 01:27:40,979\nIf I'd chosen 30 seconds it\nwould be within 30 seconds.\n\n1821\n01:27:42,720 --> 01:27:44,580\nPretty easy to set it up.\n\n1822\n01:27:44,580 --> 01:27:47,950\nDoesn't require clustering,\ndoesn't require crazy configuration,\n\n1823\n01:27:47,950 --> 01:27:51,020\ndoesn't even require the machines to be\non the same domain, it's pretty powerful.\n\n1824\n01:27:51,020 --> 01:27:53,956\n>> It really is cuz now you're talking\nabout having a machine that's within\n\n1825\n01:27:53,956 --> 01:27:54,579\nfive minutes.\n\n1826\n01:27:55,590 --> 01:27:56,120\nThat's pretty cool.\n\n1827\n01:27:57,620 --> 01:27:59,350\n>> So\nwhen you see questions on the exam and\n\n1828\n01:27:59,350 --> 01:28:02,260\nit's talking about setting up high\navailability, when the hardware on both\n\n1829\n01:28:02,260 --> 01:28:04,915\nends doesn't match,\nwhen you don't have a lot of consistency,\n\n1830\n01:28:04,915 --> 01:28:08,820\nHyper-V replicas are a great\nalternative to a fail over cluster.\n\n1831\n01:28:08,820 --> 01:28:10,990\nFail over cluster can do it too.\n\n1832\n01:28:10,990 --> 01:28:12,550\n>> But Hyper-V replicas are super easy.\n\n1833\n01:28:13,850 --> 01:28:15,363\nOne other thing worth mentioning,\n\n1834\n01:28:15,363 --> 01:28:18,100\nthere's something they added\nin Windows Server 2012 R2.\n\n1835\n01:28:18,100 --> 01:28:23,050\nIn 2012, you could have the source and\none replica.\n\n1836\n01:28:23,050 --> 01:28:24,640\nAnd that was it.\n\n1837\n01:28:24,640 --> 01:28:26,960\nWhat if you wanted to replicate\nto more than one area?\n\n1838\n01:28:26,960 --> 01:28:29,050\nWell, that was it, you couldn't.\n\n1839\n01:28:29,050 --> 01:28:34,400\nIn 2012 R2, they made it possible\nto replicate to two places.\n\n1840\n01:28:34,400 --> 01:28:35,090\nThat's it.\nJust two.\n\n1841\n01:28:36,120 --> 01:28:40,525\nYou have your host, your source,\nthen you have your first replica.\n\n1842\n01:28:41,555 --> 01:28:45,545\nAnd then you can replicate\nthe replica to another place, right?\n\n1843\n01:28:45,545 --> 01:28:47,765\nYou can't replicate\nthe source to two places.\n\n1844\n01:28:47,765 --> 01:28:49,295\nThe source only goes to one replica.\n\n1845\n01:28:49,295 --> 01:28:52,252\nBut then you can replicate your replica\n\n1846\n01:28:52,252 --> 01:28:55,972\nto another place to end up with basically\nthree copies of the same system.\n\n1847\n01:28:55,972 --> 01:28:58,452\nThe reason they do it that way,\nCPU and performance.\n\n1848\n01:28:59,672 --> 01:29:03,602\nIf your source is replicating to two\nplaces that creates a performance version\n\n1849\n01:29:03,602 --> 01:29:04,680\nof it.\n\n1850\n01:29:04,680 --> 01:29:08,060\nBut if the replica is replicating\nsomewhere else, that performance is there.\n\n1851\n01:29:08,060 --> 01:29:09,370\nIt's got the resources available.\n\n1852\n01:29:09,370 --> 01:29:11,720\n>> And he sitting there idol waiting for\nthe main one to fail.\n\n1853\n01:29:11,720 --> 01:29:15,700\nSo you might as well use him as your\nsource for replicating that third VM.\n\n1854\n01:29:15,700 --> 01:29:17,060\n>> Yeah.\nGet your money's worth\n\n1855\n01:29:17,060 --> 01:29:17,600\nout of the hardware.\n\n1856\n01:29:17,600 --> 01:29:19,040\nIt's just sitting there.\n\n1857\n01:29:19,040 --> 01:29:21,760\nSo that enables us to\nsupport more than one copy.\n\n1858\n01:29:21,760 --> 01:29:26,950\nBut it's still limited to just the three,\nthe source, replica one, replica two.\n\n1859\n01:29:26,950 --> 01:29:30,670\nSo be aware of that because that little\ndesign modification could show up.\n\n1860\n01:29:30,670 --> 01:29:33,960\nIn the olden days, if you wanted to\nhave more than one copy like that,\n\n1861\n01:29:33,960 --> 01:29:35,690\nthere really wasn't a good way to do it.\n\n1862\n01:29:35,690 --> 01:29:36,190\nNow there is.\n\n1863\n01:29:37,540 --> 01:29:41,270\nAll right, that's about it,\nI think, for Hyper-V Replica.\n\n1864\n01:29:41,270 --> 01:29:41,980\n>> Monitoring?\n\n1865\n01:29:41,980 --> 01:29:42,980\n>> One cool thing.\n\n1866\n01:29:42,980 --> 01:29:44,290\nOh, yeah, I left that off too.\n\n1867\n01:29:44,290 --> 01:29:45,710\nShoot, I missed two things.\n\n1868\n01:29:45,710 --> 01:29:46,690\nMonitoring.\n\n1869\n01:29:46,690 --> 01:29:47,500\n>> Pretty easy.\n\n1870\n01:29:47,500 --> 01:29:48,870\n>> I turned it on here.\n\n1871\n01:29:48,870 --> 01:29:49,530\nIs it working?\n\n1872\n01:29:49,530 --> 01:29:52,040\n>> Yeah, somehow we got to make sure\nthat those changes are actually being\n\n1873\n01:29:52,040 --> 01:29:54,030\nreplicated to the other side, right?\n\n1874\n01:29:54,030 --> 01:29:54,550\n>> Yeah.\n>> [LAUGH]\n\n1875\n01:29:54,550 --> 01:29:56,230\n>> So there's a few different ways we can\n\n1876\n01:29:56,230 --> 01:29:58,880\ndo that, but you can take a VM and\nif you right click on it,\n\n1877\n01:29:58,880 --> 01:30:02,750\nyou've got this replication menu, and\nsee how you can pause the replication?\n\n1878\n01:30:02,750 --> 01:30:03,730\nYou can do planned fail-over.\n\n1879\n01:30:03,730 --> 01:30:05,720\nI just wanna test it.\n\n1880\n01:30:05,720 --> 01:30:08,450\nDo the planned fail-over, that'll shut\nthis one down and bring the other one up.\n\n1881\n01:30:08,450 --> 01:30:09,380\nYou test it out.\n\n1882\n01:30:09,380 --> 01:30:12,270\nBut you've also got\nView Replication Health, and\n\n1883\n01:30:12,270 --> 01:30:14,920\nthat's how we can look at it and\nsee whether things are running fine.\n\n1884\n01:30:14,920 --> 01:30:18,640\nI can see my health is normal,\nreplication is enabled, things are up.\n\n1885\n01:30:18,640 --> 01:30:20,090\nI got zero errors.\n\n1886\n01:30:20,090 --> 01:30:21,680\nI've had one successful cycle.\n\n1887\n01:30:21,680 --> 01:30:26,140\nI've set it to every five minutes, so\nif we wait longer, that'll start to go up.\n\n1888\n01:30:26,140 --> 01:30:28,040\nSize of data yet to be replicated.\n\n1889\n01:30:28,040 --> 01:30:31,930\nRight now it's holding on 4k of data\nwaiting for that next interval to hit,\n\n1890\n01:30:31,930 --> 01:30:34,170\nand then it's gonna send it along.\n\n1891\n01:30:34,170 --> 01:30:36,220\nSo everything looks good and healthy.\n\n1892\n01:30:36,220 --> 01:30:39,330\nMonitoring is pretty straightforward,\nand testing it.\n\n1893\n01:30:39,330 --> 01:30:43,210\nI can just right-click, Replication,\nand I can come in here and\n\n1894\n01:30:43,210 --> 01:30:47,600\ndo a Planned Failover, and it's gonna plan\nand send it over to the other side and\n\n1895\n01:30:47,600 --> 01:30:48,329\nsee how it goes.\n\n1896\n01:30:49,410 --> 01:30:53,200\nYou can also tell it to reverse\nthe replication direction after failover.\n\n1897\n01:30:53,200 --> 01:30:56,870\nIn other words, instead of having this\nserver replicate to the other one,\n\n1898\n01:30:56,870 --> 01:30:59,040\nonce it goes over to the other side,\nit can reverse it,\n\n1899\n01:30:59,040 --> 01:31:00,760\nnow the other one replicates here.\n\n1900\n01:31:00,760 --> 01:31:03,770\nAnd that's kind of a neat\nthing that you can do, or\n\n1901\n01:31:03,770 --> 01:31:07,100\nyou can just leave it like that and\nit comes up, and that's the end of it.\n\n1902\n01:31:07,100 --> 01:31:10,800\nSo, you can test that real easy, let it\nfailover and it'll jump to the other side.\n\n1903\n01:31:12,710 --> 01:31:16,680\nNow the other cool thing I wanted\nto mention, the assumption here\n\n1904\n01:31:16,680 --> 01:31:19,410\nis the server will replicating to\nis in another geographic location.\n\n1905\n01:31:19,410 --> 01:31:21,495\nSo maybe we have a disaster\nrecovery center somewhere.\n\n1906\n01:31:21,495 --> 01:31:22,390\n>> Mm-hm.\n\n1907\n01:31:22,390 --> 01:31:25,040\n>> Well, it costs a little bit of\nmoney to have a DR site, doesn't it?\n\n1908\n01:31:25,040 --> 01:31:25,890\n>> Yes it does.\n\n1909\n01:31:25,890 --> 01:31:27,700\n>> Especially if you want\na bunch of extra hard with it,\n\n1910\n01:31:27,700 --> 01:31:29,000\nto duplicate your production hardware.\n\n1911\n01:31:29,000 --> 01:31:31,200\n>> It's got to be able to support\neverything your rolling over there, so\n\n1912\n01:31:31,200 --> 01:31:33,630\nyou've got to pretty much duplicate\nyour entire hardware set.\n\n1913\n01:31:33,630 --> 01:31:37,020\n>> And most of it's just sitting there,\ndoing nothing.\n\n1914\n01:31:37,020 --> 01:31:39,250\nIt's sitting there,\ndoing nothing until a failure happen.\n\n1915\n01:31:39,250 --> 01:31:43,580\nNow, when a failure happens,\nyou'll be glad you had that.\n\n1916\n01:31:43,580 --> 01:31:48,460\nBut, if you go an entire year with\nno failures, the pencil pushers,\n\n1917\n01:31:48,460 --> 01:31:49,780\nthey start looking at those numbers.\n\n1918\n01:31:49,780 --> 01:31:51,420\n>> That's a hard number to push past them,\nright?\n\n1919\n01:31:51,420 --> 01:31:52,920\nThey're like, what is this money going to?\n\n1920\n01:31:52,920 --> 01:31:56,220\nWell, it's all just sitting\nthere with dust covers on it.\n\n1921\n01:31:56,220 --> 01:31:57,110\n>> Yap.\n\n1922\n01:31:57,110 --> 01:31:59,400\nSo, Microsoft actually has\na neat little service.\n\n1923\n01:31:59,400 --> 01:32:00,830\nLet me bring this up here.\n\n1924\n01:32:00,830 --> 01:32:06,290\nIt's called Azure Site Recovery, and I'll\npost the link to this in the site notes.\n\n1925\n01:32:06,290 --> 01:32:08,860\nBut it's called Azure Site Recovery, and\n\n1926\n01:32:08,860 --> 01:32:11,750\nwhat you do is you have your\non-premises servers like normal.\n\n1927\n01:32:11,750 --> 01:32:15,260\nYou have your clusters, you have your\nother things all right there like normal.\n\n1928\n01:32:15,260 --> 01:32:18,330\nAnd then when you setup your replicas,\nlike your Hyper-V replicas,\n\n1929\n01:32:18,330 --> 01:32:24,860\ninstead of replicating out to a DR site\nyou manage, you could replicate to Azure.\n\n1930\n01:32:24,860 --> 01:32:29,500\nAnd remember, Azure,\nthey charge you for CPU and memory for\n\n1931\n01:32:29,500 --> 01:32:31,630\nmachines that are powered on.\n\n1932\n01:32:31,630 --> 01:32:34,080\nFor machines that are powered off,\nthey charge you for\n\n1933\n01:32:34,080 --> 01:32:36,480\nstorage, and it's very inexpensive.\n\n1934\n01:32:36,480 --> 01:32:40,620\nAnd so you could replicate your entire\nproduction environment up to Azure and\n\n1935\n01:32:40,620 --> 01:32:44,330\nit will be a fraction of\nthe cost of your DR site.\n\n1936\n01:32:44,330 --> 01:32:47,220\nWith DR sites, some of the problems we\nhave is like the hardware you deploy\n\n1937\n01:32:47,220 --> 01:32:48,870\nthere, you have to keep it under warranty.\n\n1938\n01:32:48,870 --> 01:32:50,040\nYou have to keep it up to date.\n\n1939\n01:32:50,040 --> 01:32:51,350\nYou put a new server in production,\n\n1940\n01:32:51,350 --> 01:32:53,110\nyou gotta put a new server\nin disaster recovery.\n\n1941\n01:32:53,110 --> 01:32:56,050\nIt's basically doubling\nyour hardware costs.\n\n1942\n01:32:56,050 --> 01:32:59,090\nBut with Azure, it's not,\nit's a fraction of those hardware costs,\n\n1943\n01:32:59,090 --> 01:33:00,470\nyou're just paying for storage.\n\n1944\n01:33:00,470 --> 01:33:05,355\nAnd if a failure happens, those VMs power\nup, and now you're paying, right, but\n\n1945\n01:33:05,355 --> 01:33:07,250\nthat's fine, you're in failure,\nthis is when you need it.\n\n1946\n01:33:08,300 --> 01:33:12,380\nIt's a really cool service, and\nit will, it's pretty much guaranteed,\n\n1947\n01:33:12,380 --> 01:33:15,690\nshow up on the exam as one of the design\noptions you've got available.\n\n1948\n01:33:15,690 --> 01:33:21,990\nIf you want a non DR site the one\nthat you have to manage yourself.\n\n1949\n01:33:21,990 --> 01:33:25,608\nA non self managed or on premises DR site,\nyou wanna go with a managed solution,\n\n1950\n01:33:25,608 --> 01:33:28,254\nyou can throw it up in Azure\nthey've got a great service for\n\n1951\n01:33:28,254 --> 01:33:29,830\nthat called site recovery.\n\n1952\n01:33:29,830 --> 01:33:31,073\nI'll post a link to that.\n\n1953\n01:33:31,073 --> 01:33:35,068\nThey have a little design guide in here\nfor how to actually get that deployed, but\n\n1954\n01:33:35,068 --> 01:33:36,690\nit works really, really well.\n\n1955\n01:33:36,690 --> 01:33:38,320\nIt's a pretty slick system.\n\n1956\n01:33:38,320 --> 01:33:39,040\n>> It really is, and, I mean,\n\n1957\n01:33:39,040 --> 01:33:42,580\nit brings that disaster recovery plan into\nbusinesses that couldn't afford it before.\n\n1958\n01:33:42,580 --> 01:33:45,360\nSmaller businesses, medium sized\nbusinesses that couldn't maintain\n\n1959\n01:33:45,360 --> 01:33:50,300\nan entire offsite location to move\nto in the event of a disaster.\n\n1960\n01:33:50,300 --> 01:33:52,730\nNow we've got that available,\nand available from wherever, so\n\n1961\n01:33:52,730 --> 01:33:53,520\nit's fantastic.\n\n1962\n01:33:53,520 --> 01:33:56,730\nAnd, like you said, it costs pennies\ncompared to the other solutions.\n\n1963\n01:33:56,730 --> 01:33:58,660\n>> Yeah, and I know some companies\nhave actually used this as like\n\n1964\n01:33:58,660 --> 01:34:03,050\nthe first stepping stone in migrating\ntheir environment up to Azure.\n\n1965\n01:34:03,050 --> 01:34:04,940\nSo let's say you wanna\ngo to Azure one day.\n\n1966\n01:34:04,940 --> 01:34:07,010\nYou wanna move your entire\ndata farm in Azure.\n\n1967\n01:34:07,010 --> 01:34:08,910\nThat's a pretty big pill\nto swallow right there.\n\n1968\n01:34:08,910 --> 01:34:09,900\nThat's a lot going on.\n\n1969\n01:34:09,900 --> 01:34:13,160\nBut you could set up\nAzure site recovery and\n\n1970\n01:34:13,160 --> 01:34:16,010\nstart replicating all of\nyour servers up to Azure.\n\n1971\n01:34:16,010 --> 01:34:16,970\nAnd then one day you say boy,\n\n1972\n01:34:16,970 --> 01:34:20,460\nit really would be nice to run in Azure,\nhow much do you hit this replicate button?\n\n1973\n01:34:20,460 --> 01:34:23,560\nYou just do the plan failover all\nyour servers don't go to Azure.\n\n1974\n01:34:23,560 --> 01:34:24,130\nYou just migrated.\n\n1975\n01:34:25,280 --> 01:34:26,150\nDone.\nSo\n\n1976\n01:34:26,150 --> 01:34:28,040\nit really is one of\nthe simplest methods for\n\n1977\n01:34:28,040 --> 01:34:30,070\ngetting your systems\nmoved up into address.\n\n1978\n01:34:30,070 --> 01:34:31,240\nIt's pretty cool.\n\n1979\n01:34:31,240 --> 01:34:33,420\nSo you have a lot of new\nopportunities to be found there.\n\n1980\n01:34:33,420 --> 01:34:36,700\nBut definitely something to read up on one\nof the neater features available in Azure.\n\n1981\n01:34:39,080 --> 01:34:43,130\nAll right, well Mike, I think that is\nabout it for virtual machine planning.\n\n1982\n01:34:43,130 --> 01:34:45,960\nIt was a lot of stuff,\na lot of information.\n\n1983\n01:34:45,960 --> 01:34:46,620\nAll pretty important.\n\n1984\n01:34:48,130 --> 01:34:52,050\nAll right, well that's a pretty good\nspot for us to wrap this episode up.\n\n1985\n01:34:52,050 --> 01:34:52,810\nLet me remind you guys,\n\n1986\n01:34:52,810 --> 01:34:57,050\nif you have any questions on the stuff\nthat we talked about feel free to ask.\n\n1987\n01:34:57,050 --> 01:35:01,611\nLive during the show you can go\nto the itpro.tv/live website.\n\n1988\n01:35:01,611 --> 01:35:04,580\nIt's just itpro.tv/live.\n\n1989\n01:35:04,580 --> 01:35:06,570\nYou'll see a chat box beneath the video.\n\n1990\n01:35:06,570 --> 01:35:09,070\nPost your questions there,\nwe monitor and answer during the show.\n\n1991\n01:35:09,070 --> 01:35:12,460\nIf you have questions after the show,\nuse our Q&A forums.\n\n1992\n01:35:12,460 --> 01:35:16,198\nAt the top of every page on ITPro TV\nyou'll see a link that says Q&A.\n\n1993\n01:35:16,198 --> 01:35:19,477\nClick on it, it'll take you into\nthe forums you can post a question there,\n\n1994\n01:35:19,477 --> 01:35:21,156\nwe monitor and answer after the show.\n\n1995\n01:35:21,156 --> 01:35:24,699\nTake advantage of those resources,\nthey are there for you.\n\n1996\n01:35:24,699 --> 01:35:25,240\nAll right.\n\n1997\n01:35:25,240 --> 01:35:26,366\nWell, that's about it for us.\n\n1998\n01:35:26,366 --> 01:35:27,906\nHope you guys enjoyed the show.\n\n1999\n01:35:27,906 --> 01:35:30,199\nSigning off for ITProTV, I'm Don Pezet.\n\n2000\n01:35:30,199 --> 01:35:31,031\n>> And I'm Mike Rodrick.\n\n2001\n01:35:31,031 --> 01:35:32,448\n>> And we'll see you next time.\n\n2002\n01:35:32,448 --> 01:35:42,448\n[MUSIC]\n\n2003\n01:35:46,323 --> 01:35:52,050\n[SOUND]\n\n",
          "vimeoId": "121139679"
        },
        {
          "description": null,
          "length": "3684",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-4-virtualization_storage-030315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-4-virtualization_storage-030315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-4-virtualization_storage-030315-1-sm.jpg",
          "title": "Virtualization Storage",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,111 --> 00:00:22,392\n[SOUND]\n\n3\n00:00:22,392 --> 00:00:33,305\n[MUSIC]\n\n4\n00:00:33,305 --> 00:00:37,580\nAll right good morning, good after noon\nand good evening, and welcome back.\n\n5\n00:00:37,580 --> 00:00:41,146\nAnother episode of IT pro tv I'm your\nhost Tom Pazette back again with Mr.\n\n6\n00:00:41,146 --> 00:00:42,884\nMike Rodrick how's it going Mike?\n\n7\n00:00:42,884 --> 00:00:44,544\n>> Fantastic Don how are you doing today?\n\n8\n00:00:44,544 --> 00:00:46,008\n>> I am doing just well.\n\n9\n00:00:46,008 --> 00:00:48,500\nWe got a neat episode lined up for\nus today.\n\n10\n00:00:48,500 --> 00:00:53,610\nWe're gonna take a look at planning and\nimplementing virtualization storage.\n\n11\n00:00:53,610 --> 00:00:58,220\nAnd let me tell you of all the areas\nyou can make mistakes in...\n\n12\n00:00:58,220 --> 00:01:01,160\nThis is one of the areas\nthat can be the most costly.\n\n13\n00:01:01,160 --> 00:01:04,620\nBecause in Hyper-V we got\na lot of choices right.\n\n14\n00:01:04,620 --> 00:01:07,700\nThere's a lot of different storage\ntypes available to us, and\n\n15\n00:01:07,700 --> 00:01:10,560\nthey'll all work,\nevery one of them will work.\n\n16\n00:01:10,560 --> 00:01:12,120\nYou almost feel like you can't go wrong.\n\n17\n00:01:12,120 --> 00:01:14,290\nAny of these is gonna work great.\n\n18\n00:01:14,290 --> 00:01:18,390\nWell it's that great part that's\nnot necessarily gonna be there.\n\n19\n00:01:18,390 --> 00:01:21,550\nSome of the technologies that\nare available are great, for\n\n20\n00:01:21,550 --> 00:01:23,410\na particular use case.\n\n21\n00:01:23,410 --> 00:01:27,630\nIf you don't fit that use case, your\nstorage performance will drop, and storage\n\n22\n00:01:27,630 --> 00:01:31,810\nis typically the biggest bottleneck\nin any virtualization infrastructure.\n\n23\n00:01:31,810 --> 00:01:35,105\nThat's not always true, but\nI don't know, what do you think Mike?\n\n24\n00:01:35,105 --> 00:01:35,740\nLike 90% of the time?\n\n25\n00:01:35,740 --> 00:01:37,420\n>> I'd say at least yea, and\n\n26\n00:01:37,420 --> 00:01:40,880\nit's got the potential to affect\nmore than one virtual machine right?\n\n27\n00:01:40,880 --> 00:01:44,200\nCuz especially if we're talking about\nany type of shared storage technology or\n\n28\n00:01:44,200 --> 00:01:47,270\nanything like that,\npoor performance on one impacts them all.\n\n29\n00:01:47,270 --> 00:01:48,680\n>> Yeah, absolutely.\n\n30\n00:01:48,680 --> 00:01:50,430\nThis is an area that we\nneed to spend some time on.\n\n31\n00:01:50,430 --> 00:01:53,290\nWhen you're designing\na virtualization infrastructure,\n\n32\n00:01:53,290 --> 00:01:54,590\nspend some time on storage.\n\n33\n00:01:54,590 --> 00:01:55,330\nLook at it.\n\n34\n00:01:55,330 --> 00:01:56,300\nIt is your big bottleneck.\n\n35\n00:01:56,300 --> 00:01:59,070\nIf we think about storage\nin terms of speed,\n\n36\n00:01:59,070 --> 00:02:03,410\nright, you've got, well I guess you\nhave two types of storage, right.\n\n37\n00:02:03,410 --> 00:02:06,870\nYou have RAM, your temporary storage, and\nthen you have your permanent storage,\n\n38\n00:02:06,870 --> 00:02:10,610\nthings that are nonvolatile,\nlike your hard drives, right.\n\n39\n00:02:10,610 --> 00:02:13,850\nRAM we measure it in nanoseconds.\n\n40\n00:02:13,850 --> 00:02:16,140\nWhen you talk about read and\nwrite time, or seek time in memory,\n\n41\n00:02:16,140 --> 00:02:17,370\nwe're talking about nanoseconds.\n\n42\n00:02:17,370 --> 00:02:19,620\nBut, when we measure it on hard drives.\n\n43\n00:02:19,620 --> 00:02:20,930\nMeasure it in milliseconds.\n\n44\n00:02:20,930 --> 00:02:23,060\nRight?\nThat's a full order of magnitude\n\n45\n00:02:23,060 --> 00:02:24,320\ndifference between the two.\n\n46\n00:02:24,320 --> 00:02:26,330\nThis is slower.\n\n47\n00:02:26,330 --> 00:02:27,190\nAnd the main reason for\n\n48\n00:02:27,190 --> 00:02:31,690\nthat, is most people are still today\nusing traditional magnetic disk, right?\n\n49\n00:02:31,690 --> 00:02:34,960\nYou've got that spinning platter\nthat goes around in a circle, and\n\n50\n00:02:34,960 --> 00:02:38,640\nmechanical heads that are moving around,\nand they can only spin so fast.\n\n51\n00:02:38,640 --> 00:02:40,070\nAnd the head can only move so\n\n52\n00:02:40,070 --> 00:02:42,525\nfast before it goes pew,\nshooting right out of the case.\n\n53\n00:02:42,525 --> 00:02:44,330\n>> [LAUGH].\n>> We have limits, and\n\n54\n00:02:44,330 --> 00:02:45,270\nthat is our limit, right?\n\n55\n00:02:45,270 --> 00:02:47,730\nThat's our slowest component\ninside of the computer.\n\n56\n00:02:47,730 --> 00:02:50,260\nThe only thing that goes\nslower are the fans, right?\n\n57\n00:02:50,260 --> 00:02:51,140\n>> Yeah [LAUGH] right.\n\n58\n00:02:51,140 --> 00:02:53,720\nYeah with those read processes, I mean\nwe look at the mechanical drives and\n\n59\n00:02:53,720 --> 00:02:54,440\nthe way they work.\n\n60\n00:02:54,440 --> 00:02:57,030\nThe majority of the time there's what\nthey call the setup process right?\n\n61\n00:02:57,030 --> 00:02:57,890\nGetting the.\n\n62\n00:02:57,890 --> 00:03:00,610\nThe platter spinning, getting the read\nwrite head to the right sector,\n\n63\n00:03:00,610 --> 00:03:01,930\nthe right track, and things like that.\n\n64\n00:03:01,930 --> 00:03:04,530\nThe read process itself really\ndoesn't take all that long.\n\n65\n00:03:04,530 --> 00:03:06,990\nBut it's gotta locate\nthe data on that drive, and\n\n66\n00:03:06,990 --> 00:03:09,440\nthat's what takes those\nmilliseconds to do.\n\n67\n00:03:09,440 --> 00:03:13,040\nWhereas in RAM, you're just calling\nan address, and it's instant, all right?\n\n68\n00:03:13,040 --> 00:03:14,680\nOr almost instant.\n\n69\n00:03:14,680 --> 00:03:17,520\n>> Now one technology that's come a long\nway in helping solve that problem is\n\n70\n00:03:17,520 --> 00:03:18,370\nSSD, right?\n\n71\n00:03:18,370 --> 00:03:23,604\nThe Solid State Digital Drives, we're\nseeing more and more servers, and more and\n\n72\n00:03:23,604 --> 00:03:29,290\nmore today shipped with at least some\nSSD's in there, if not all SSD, right?\n\n73\n00:03:29,290 --> 00:03:30,780\nThe big problem, this was five years ago.\n\n74\n00:03:30,780 --> 00:03:32,230\nIf we were taping this\nepisode five years ago.\n\n75\n00:03:32,230 --> 00:03:35,430\nI'd say you do not want SSD\nin your production center,\n\n76\n00:03:35,430 --> 00:03:37,440\nbecause the drives were hot.\n\n77\n00:03:37,440 --> 00:03:40,530\nThey were expensive, right, but\nlet's say money was no object.\n\n78\n00:03:40,530 --> 00:03:41,480\nThey were hot.\n\n79\n00:03:41,480 --> 00:03:45,020\nIf you had 14 of these drives right\nnext to each other they generated a lot\n\n80\n00:03:45,020 --> 00:03:46,630\nof heat and that was a problem.\n\n81\n00:03:46,630 --> 00:03:48,465\nThe newer drives aren't like that,\nthey're far cooler.\n\n82\n00:03:48,465 --> 00:03:49,815\nThey are still hot, right.\n\n83\n00:03:49,815 --> 00:03:51,625\nThey're not like they used to be.\n\n84\n00:03:51,625 --> 00:03:54,505\nYou can have 14 of them all\nright next to each other, and\n\n85\n00:03:54,505 --> 00:03:57,835\nit'll operate fine without making you\nput in an extra air conditioning unit.\n\n86\n00:03:57,835 --> 00:04:00,615\n[LAUGH] That problem is kind of gone.\n\n87\n00:04:00,615 --> 00:04:04,780\nWe do still have the cost, but the cost\nhas come down a good bit on these too.\n\n88\n00:04:04,780 --> 00:04:10,480\nTo say I'm gonna build up a rate array of\nSSD disks is not of out of ideal anymore.\n\n89\n00:04:10,480 --> 00:04:12,950\nIt's not exorbitantly\nexpensive like it use to be.\n\n90\n00:04:12,950 --> 00:04:15,570\nBut at a minimum we can use\nthings like storage spaces,\n\n91\n00:04:15,570 --> 00:04:17,250\nwhere you have tiered data storage.\n\n92\n00:04:17,250 --> 00:04:21,220\nWhere you have some SSD's, and\nyou have some magnetic media, and\n\n93\n00:04:21,220 --> 00:04:22,680\nyou balance your data between them.\n\n94\n00:04:22,680 --> 00:04:26,580\nCritical data going to SSD's Archive data\ngoing to a magnetic, maybe you can do\n\n95\n00:04:26,580 --> 00:04:31,340\nstuff like that to improve performance,\nwe also have RAID ten, right?\n\n96\n00:04:31,340 --> 00:04:32,760\nRAID ten is a big one that.\n\n97\n00:04:32,760 --> 00:04:34,920\n>> Wrote that IO across\nmultiple rewrite heads.\n\n98\n00:04:34,920 --> 00:04:36,870\nYou get some performance benefit there.\n\n99\n00:04:36,870 --> 00:04:39,540\n>> Yeah, most of us for\nthe exam you guys should know it.\n\n100\n00:04:39,540 --> 00:04:43,050\nI know we've covered this in other shows,\nbut just to recap it RAID zero,\n\n101\n00:04:43,050 --> 00:04:46,100\nwhere we do striping of our\ndata across multiple disks.\n\n102\n00:04:46,100 --> 00:04:49,320\nThat gets you the best read and\nwrite performance possible.\n\n103\n00:04:49,320 --> 00:04:52,230\nI mean that really is the best\nperformance scenario, RAID zero.\n\n104\n00:04:52,230 --> 00:04:54,700\nBut it's got a little bit of a problem.\n\n105\n00:04:54,700 --> 00:04:57,970\n>> Yeah, little lack of redundancy\non that one, so you lose one drive,\n\n106\n00:04:57,970 --> 00:04:59,280\nyou lose all of your data.\n\n107\n00:04:59,280 --> 00:04:59,817\nWe can't have that.\n\n108\n00:04:59,817 --> 00:05:01,390\n>> Yeah, you lose the whole thing.\n\n109\n00:05:01,390 --> 00:05:04,470\nIt's not even that you can recover\nlike if you have ten drives and\n\n110\n00:05:04,470 --> 00:05:06,560\nlose one, it's not like you\ncan recover the other nine.\n\n111\n00:05:06,560 --> 00:05:08,200\nYou're losing a tenth of your data.\n\n112\n00:05:08,200 --> 00:05:09,805\n>> It's gone.\n>> It's not gonna work.\n\n113\n00:05:09,805 --> 00:05:16,250\nWe can use RAID ten,\nwhich combines mirroring with that stripe.\n\n114\n00:05:16,250 --> 00:05:20,160\nYou get a series of mirrors, and then\nyou build a stripe across the mirrors.\n\n115\n00:05:20,160 --> 00:05:22,940\nIt's not a two step process for\nus, usually your RAID controller,\n\n116\n00:05:22,940 --> 00:05:25,340\nor RAID controller software\nwill build that for you.\n\n117\n00:05:25,340 --> 00:05:26,690\nIt lays it out.\n\n118\n00:05:26,690 --> 00:05:30,770\nYou get great performance,\nyou get redundancy, but\n\n119\n00:05:30,770 --> 00:05:31,870\nthere's that cost factor again.\n\n120\n00:05:31,870 --> 00:05:33,310\n>> And the storage cost.\n\n121\n00:05:33,310 --> 00:05:35,055\nYeah cuz you lose half\nof your space right,\n\n122\n00:05:35,055 --> 00:05:37,040\ncuz you're mirroring\neverything you're doing.\n\n123\n00:05:37,040 --> 00:05:39,250\nIf you've got 20 terabytes\nworth of drive space,\n\n124\n00:05:39,250 --> 00:05:42,240\nyou're really gonna have ten\nterabytes of usable space.\n\n125\n00:05:42,240 --> 00:05:43,550\n>> Yeah.\n>> But, you get the performance and\n\n126\n00:05:43,550 --> 00:05:44,730\nredundancy that you're looking for.\n\n127\n00:05:44,730 --> 00:05:46,120\nIn a creative world environment.\n\n128\n00:05:46,120 --> 00:05:46,910\nYeah, that's what we're gonna do.\n\n129\n00:05:46,910 --> 00:05:48,600\nIt's worth the money.\n\n130\n00:05:48,600 --> 00:05:49,530\n>> When you think of a mirror,\n\n131\n00:05:49,530 --> 00:05:52,160\nsince you got two drives that\nhave copies of themselves, right?\n\n132\n00:05:52,160 --> 00:05:55,118\nYou're basically losing\n50% of your storage.\n\n133\n00:05:55,118 --> 00:05:56,454\nIf you have ten drives and\n\n134\n00:05:56,454 --> 00:06:00,100\nyou arrayed ten array you\nbasically have five usable drives.\n\n135\n00:06:00,100 --> 00:06:03,380\nAnd five mirror drives so it's kinda\nlike losing half of your storage.\n\n136\n00:06:03,380 --> 00:06:06,882\nBut you get great performance,\nand you get great redundancy.\n\n137\n00:06:06,882 --> 00:06:09,770\nRAID ten is very common,\nit's been very common for\n\n138\n00:06:09,770 --> 00:06:12,940\ndatabase servers for\na long time, but for Hyper-V and\n\n139\n00:06:12,940 --> 00:06:15,130\ninvirtualization deployments we're\nseeing it more and more today.\n\n140\n00:06:15,130 --> 00:06:18,280\nNow there are times where we\ndon't need RAID ten where\n\n141\n00:06:18,280 --> 00:06:21,950\nwe might just go with RAID zero, just get\nthe maximum performance, for example if\n\n142\n00:06:21,950 --> 00:06:26,470\nyou're doing Hyper-V replicas, if you're\nsystem is not mission critical, if you can\n\n143\n00:06:26,470 --> 00:06:30,440\nafford a few seconds of downtime\nwhile it flips over to another site,\n\n144\n00:06:30,440 --> 00:06:34,490\nyou can do a Hyper-V replica, and just\nsay, all right, I got a RAID zero RAID.\n\n145\n00:06:34,490 --> 00:06:36,420\nIf one drives dies,\nyeah I lose the whole RAID.\n\n146\n00:06:36,420 --> 00:06:39,800\nBut, I'll just flip over to my replica,\nand I'm in business, right?\n\n147\n00:06:39,800 --> 00:06:43,030\nThere are times where we don't need to\nsweat it with all that crazy redundancy.\n\n148\n00:06:43,030 --> 00:06:47,610\nIf you got 30 clustered nodes,\ndo you need the operating system for\n\n149\n00:06:47,610 --> 00:06:48,890\neach cluster node?\n\n150\n00:06:48,890 --> 00:06:50,650\nTo be a redundant mirror?\n\n151\n00:06:50,650 --> 00:06:52,000\nNo.\nIf one drive fails,\n\n152\n00:06:52,000 --> 00:06:53,530\nit's just other nodes are there, right?\n\n153\n00:06:54,640 --> 00:06:57,830\nAnd if you've got 32 nodes,\nas long as your utilization is not high,\n\n154\n00:06:57,830 --> 00:06:59,560\nyou'll have plenty to take over,\nso you'll be fine.\n\n155\n00:07:00,650 --> 00:07:04,130\nDon't always assume you have to\nbuild redundancy in a storage.\n\n156\n00:07:04,130 --> 00:07:05,570\nPerformance is usually a bigger deal.\n\n157\n00:07:07,340 --> 00:07:11,248\nBut don't forget about redundancy,\nthat's the challenge of this exam [LAUGH].\n\n158\n00:07:11,248 --> 00:07:12,520\n>> [LAUGH]\n>> You got to weight the options,\n\n159\n00:07:12,520 --> 00:07:13,160\nand on the exam,\n\n160\n00:07:13,160 --> 00:07:16,570\nwhen they ask you questions they'll tell\nyou what the priority of the customer is.\n\n161\n00:07:16,570 --> 00:07:19,720\nThey'll say we need to get the best\nperformance possible while\n\n162\n00:07:19,720 --> 00:07:21,290\nmaintaining redundancy.\n\n163\n00:07:21,290 --> 00:07:26,160\nOr say we need to get the best performance\npossible, and not worry about redundancy\n\n164\n00:07:26,160 --> 00:07:28,780\nbecause we have another site available,\nor something like that.\n\n165\n00:07:28,780 --> 00:07:32,670\nThey give you those verbal, or I guess\nwritten, cues to let you know which is\n\n166\n00:07:32,670 --> 00:07:35,100\nthe direction that company\nis wanting to move in.\n\n167\n00:07:35,100 --> 00:07:37,050\nJust keep that in mind as you move\nthrough your studies on this.\n\n168\n00:07:38,440 --> 00:07:42,430\nAll right, now, once we provision\nour disks, we've gotta get\n\n169\n00:07:42,430 --> 00:07:45,490\nthose disks attached and there's a lot of\ndifferent ways that we can go about that,\n\n170\n00:07:45,490 --> 00:07:46,980\nI wanna walk through some of those.\n\n171\n00:07:46,980 --> 00:07:51,186\nBut before I dive too far into that let's\nfocus on something else that we have to\n\n172\n00:07:51,186 --> 00:07:51,960\nthink about.\n\n173\n00:07:51,960 --> 00:07:56,744\nWhen we provision our virtual machines,\nwhen you create a VM there's\n\n174\n00:07:56,744 --> 00:08:01,051\nactually four different types of\ndisks that a VM cannot get by.\n\n175\n00:08:01,051 --> 00:08:01,851\nAll right.\n\n176\n00:08:01,851 --> 00:08:05,371\nYou're virtual machine is gonna have\na virtual hard drive attached to it.\n\n177\n00:08:05,371 --> 00:08:09,020\nAnd we've got VHDs and VHDXs, right?\n\n178\n00:08:09,020 --> 00:08:10,850\nAnd Mike,\nyou remember the difference between those?\n\n179\n00:08:10,850 --> 00:08:14,062\n>> I don't remember the exact numbers,\nbut the VHDXs can get much larger.\n\n180\n00:08:14,062 --> 00:08:14,760\nI wanna say it was 64,\n\n181\n00:08:14,760 --> 00:08:17,470\nbut I can't remember if-\n>> Yeah, and\n\n182\n00:08:17,470 --> 00:08:21,030\nwe covered this in another episode,\nso it was 2 TB was the maximum for\n\n183\n00:08:21,030 --> 00:08:27,300\nour regular VHD, 64 TB is the maximum for\na VHDX it's a big difference.\n\n184\n00:08:27,300 --> 00:08:29,900\nIf you're needing maintain\nbackwards compatibility with\n\n185\n00:08:29,900 --> 00:08:34,210\nolder versions of Hyper-V then you might\nchoose to still go with VHDs, right?\n\n186\n00:08:34,210 --> 00:08:38,720\nBut if you want that maximum space,\nif you want that corruption resistance.\n\n187\n00:08:38,720 --> 00:08:42,070\nThere's actually some functions inside\nthe VHDX format that make it a little more\n\n188\n00:08:42,070 --> 00:08:46,150\nresistant to corruption you wanna go\nwith that VHDX format, all right?\n\n189\n00:08:46,150 --> 00:08:47,620\nBut regardless of which one you pick.\n\n190\n00:08:47,620 --> 00:08:51,487\nIf you go VHD or VHDX,\nyou get another choice, but\n\n191\n00:08:51,487 --> 00:08:53,894\nwhat type of VHD is it gonna be?\n\n192\n00:08:53,894 --> 00:08:58,161\nIs it gonna be dynamically expanding,\nfixed, a differencing disk, or a,\n\n193\n00:08:58,161 --> 00:09:02,294\nthey call it a physical disk now,\nit used to be called a pass through disk,\n\n194\n00:09:02,294 --> 00:09:04,850\nthat name has kind of\nchanged over the years.\n\n195\n00:09:04,850 --> 00:09:07,850\nSo a physical disk right, those four.\n\n196\n00:09:07,850 --> 00:09:13,350\nNow, each one has a particular purpose,\na particular time and place, all right.\n\n197\n00:09:13,350 --> 00:09:16,430\nAnd for the exam you need to know the time\nand the place for each of those four,\n\n198\n00:09:16,430 --> 00:09:18,430\nto know which one is appropriate for\na virtual machine.\n\n199\n00:09:18,430 --> 00:09:20,180\nSo let's run through those for a minute.\n\n200\n00:09:20,180 --> 00:09:21,220\n>> All right.\n\n201\n00:09:21,220 --> 00:09:22,860\nStart with the basic fixed drives?\n\n202\n00:09:22,860 --> 00:09:24,812\n>> Sure, yep.\n>> Typically that's what you're gonna see\n\n203\n00:09:24,812 --> 00:09:25,900\nin a production environment.\n\n204\n00:09:25,900 --> 00:09:30,010\nWhen we talk about a fixed size drive,\nWhen you allocate the space that you\n\n205\n00:09:30,010 --> 00:09:32,970\nwanna use for that VHD,\nit's gonna consume all that space.\n\n206\n00:09:32,970 --> 00:09:36,510\nSo the space has to be there, has to be\navailable, and it's gonna go ahead and\n\n207\n00:09:36,510 --> 00:09:38,570\nallocate that space to\nthe virtual hard drive.\n\n208\n00:09:38,570 --> 00:09:42,010\nAdvantages of that are gonna be that\nthe space will be contiguous, right?\n\n209\n00:09:42,010 --> 00:09:46,490\nIt's gonna reach out and\ngrab a nice 10 TB chunk of space for\n\n210\n00:09:46,490 --> 00:09:47,340\nthat virtual hard drive.\n\n211\n00:09:47,340 --> 00:09:50,960\nI don't have to worry about the virtual\nhard drive itself becoming fragmented.\n\n212\n00:09:50,960 --> 00:09:53,390\nNow we're not talking about the data\nwithin the virtual hard drive.\n\n213\n00:09:53,390 --> 00:09:58,344\nWe're talking about the VHD file itself,\nyou want that one nice chunk of space.\n\n214\n00:09:58,344 --> 00:10:01,152\nIn a production environment,\nwhere performance is important,\n\n215\n00:10:01,152 --> 00:10:03,360\nthat's gonna play a big factor in it.\n\n216\n00:10:03,360 --> 00:10:06,674\nDownside of the fixed drive, though,\nis I've got to allocate all that space, so\n\n217\n00:10:06,674 --> 00:10:10,051\nI've got to have that space available,\nthat 10 TB, if that's what I'm doing.\n\n218\n00:10:10,051 --> 00:10:14,510\nAnd I've got to wait for it to\nactually go out and format that space.\n\n219\n00:10:14,510 --> 00:10:19,519\nCuz it's gonna have to format that entire\n10 TB at the time you allocate it.\n\n220\n00:10:19,519 --> 00:10:23,150\n>> Yeah, now that has its pros and\ncons, right?\n\n221\n00:10:23,150 --> 00:10:26,790\nThe benefits, Mike you kind of laid those\nout, one of the negatives is when you do\n\n222\n00:10:26,790 --> 00:10:30,150\na fixed disk, it provisions\nall of that space immediately.\n\n223\n00:10:30,150 --> 00:10:34,040\nSo if I create a 128 GB fixed disk,\nit's gonna lay out 128 GB of\n\n224\n00:10:34,040 --> 00:10:36,860\nstorage on the drive,\neven though the disk is empty, right?\n\n225\n00:10:36,860 --> 00:10:38,240\nSo that's a good thing.\n\n226\n00:10:38,240 --> 00:10:42,230\nThat's what prevents the file\nfragmentation, right?\n\n227\n00:10:42,230 --> 00:10:47,170\nBut it can be a bad thing if I was\nhoping to oversubscribe my disk.\n\n228\n00:10:47,170 --> 00:10:50,989\nIf I have a 1 TB disk, and I wanted to\ncreate 3 TB of virtual hard drives,\n\n229\n00:10:50,989 --> 00:10:53,322\nyou can't do that with fixed disk, right?\n\n230\n00:10:53,322 --> 00:10:55,100\nThey actually have to have\nthat space available.\n\n231\n00:10:55,100 --> 00:10:55,929\n>> Yep.\n\n232\n00:10:55,929 --> 00:11:00,130\n>> But there's something important to\nremember about oversubscription, right.\n\n233\n00:11:00,130 --> 00:11:02,310\nAnd when I talk about oversubscription,\nI'm really taking about the next one,\n\n234\n00:11:02,310 --> 00:11:03,510\nthe dynamic disk.\n\n235\n00:11:03,510 --> 00:11:05,146\nWhen we create a dynamic disk,\nit's different right?\n\n236\n00:11:05,146 --> 00:11:07,233\n>> Right.\n>> When you create that dynamic disk,\n\n237\n00:11:07,233 --> 00:11:09,711\nI might create a dynamic\ndisk that's 1 TB in size.\n\n238\n00:11:09,711 --> 00:11:14,700\nBut when you first make it, the physical\nfile itself will be very very very small.\n\n239\n00:11:14,700 --> 00:11:15,468\n>> Yeah, just a few megs.\n\n240\n00:11:15,468 --> 00:11:18,376\n>> Yep, and as you add data to it,\nit's gonna grow and\n\n241\n00:11:18,376 --> 00:11:23,260\ngrow to encompass the data inside it, so\nit's very efficient storage wise, right?\n\n242\n00:11:23,260 --> 00:11:27,520\nIt only occupies the amount of space that\nactually matches the files inside of it.\n\n243\n00:11:27,520 --> 00:11:29,300\nYou can oversubscribe with it.\n\n244\n00:11:29,300 --> 00:11:35,150\nI might have a 1 TB LAN and I create\na 4 TB dynamically expanding disk.\n\n245\n00:11:35,150 --> 00:11:36,420\nIt will let you do that.\n\n246\n00:11:36,420 --> 00:11:39,140\nNow once you get to 1 TB of data,\nwhat happens?\n\n247\n00:11:39,140 --> 00:11:41,870\n>> It's gonna say wait a second you need\nto throw some more drive space at me so\n\n248\n00:11:41,870 --> 00:11:43,530\nthat I can continue to grow.\n\n249\n00:11:43,530 --> 00:11:45,030\n>> Yep, and so\nyou end up with problems there,\n\n250\n00:11:45,030 --> 00:11:47,490\nthings don't quite work the way\nthat you expect them to.\n\n251\n00:11:47,490 --> 00:11:50,450\nSo those are just some of the problems\nwe get with dynamically expanding disks,\n\n252\n00:11:50,450 --> 00:11:53,520\nbut the key thing is let's just\nassume that there is enough\n\n253\n00:11:53,520 --> 00:11:55,040\nspace available-\n>> Right.\n\n254\n00:11:55,040 --> 00:11:59,240\n>> When that dynamic disc grows,\neach time it grows,\n\n255\n00:11:59,240 --> 00:12:02,260\nthe next available space on the hard\ndrive might not be contiguous.\n\n256\n00:12:02,260 --> 00:12:03,650\nIt might not be in a row.\n\n257\n00:12:03,650 --> 00:12:06,790\nIt might have to go somewhere\nelse on the physical disc, and\n\n258\n00:12:06,790 --> 00:12:09,670\nnow you've got fragmentation of your VHD.\n\n259\n00:12:09,670 --> 00:12:12,805\nNow on an SSD that doesn't matter but\non magnetic media it does.\n\n260\n00:12:12,805 --> 00:12:14,051\nIt makes a difference.\n\n261\n00:12:14,051 --> 00:12:18,917\nThe other thing is there's a performance\nhit while it's growing, all right?\n\n262\n00:12:18,917 --> 00:12:22,083\nIt doesn't grow in single bytes it\ngrows in these little blocks and\n\n263\n00:12:22,083 --> 00:12:24,470\nif I remember right it's\n2 MB blocks by default?\n\n264\n00:12:24,470 --> 00:12:25,557\n>> I think so.\n\n265\n00:12:25,557 --> 00:12:28,767\n>> I don't remember the exact size but\nit grows in these little blocks.\n\n266\n00:12:28,767 --> 00:12:31,800\nAnd every time it does it,\nit's having to portion that out on a disk.\n\n267\n00:12:31,800 --> 00:12:36,430\nIt results in a spike in disk I/O which\ncan hurt the performance of other VMs\n\n268\n00:12:36,430 --> 00:12:38,040\nthat are sharing that same disk.\n\n269\n00:12:38,040 --> 00:12:41,640\nAnd it takes CPU to do it cuz it's got\nto expand it and grow that file and\n\n270\n00:12:41,640 --> 00:12:43,030\nregister it with the system.\n\n271\n00:12:43,030 --> 00:12:45,350\nSo that hurts performance.\n\n272\n00:12:45,350 --> 00:12:47,098\n>> And you're not in control\nof when that's happening.\n\n273\n00:12:47,098 --> 00:12:50,420\nSome might happen right in peak hours of\nyour production environment which you\n\n274\n00:12:50,420 --> 00:12:51,620\nreally don't want to have happen.\n\n275\n00:12:51,620 --> 00:12:52,720\n>> Yeah.\nAbsolutely.\n\n276\n00:12:52,720 --> 00:12:56,380\nSo, those are some of the challenges\nthat we bump into a dynamic disks.\n\n277\n00:12:56,380 --> 00:13:02,240\nAnd that means if I've got mission\ncritical production systems,\n\n278\n00:13:02,240 --> 00:13:04,190\nI want those fixed disks, right?\n\n279\n00:13:04,190 --> 00:13:06,970\nFixed disk is what most of us\nare gonna use of the four data types.\n\n280\n00:13:06,970 --> 00:13:11,036\nA fixed disk is the most common for\nproduction systems, right?\n\n281\n00:13:11,036 --> 00:13:15,638\nBut if I'm doing tests, lab,\ndevelopment, VMs on my laptop here for\n\n282\n00:13:15,638 --> 00:13:19,645\nthe show, stuff that I'm only\ngonna use for a little while.\n\n283\n00:13:19,645 --> 00:13:22,410\nFor those, we do dynamically expanding\nbecause it's more efficient.\n\n284\n00:13:22,410 --> 00:13:24,882\nIt takes less space on the hard drive,\nright?\n\n285\n00:13:24,882 --> 00:13:27,140\nI'm gonna throw the VM away anyway,\nso what do I care, right?\n\n286\n00:13:27,140 --> 00:13:27,860\nYou get it shorter.\n\n287\n00:13:28,870 --> 00:13:32,730\nI'm the only one in there, but if it's\nan exchange client access server and\n\n288\n00:13:32,730 --> 00:13:35,333\nI'm gonna have hundreds\nof users accessing it,\n\n289\n00:13:35,333 --> 00:13:38,040\nI need performance to be as good as\npossible and fixed disc is the way to go.\n\n290\n00:13:39,220 --> 00:13:42,340\nSo that's all stuff that we need to\nkeep in mind when we select those disks.\n\n291\n00:13:42,340 --> 00:13:45,380\nAnd for most of us,\nit is gonna come down to those two.\n\n292\n00:13:45,380 --> 00:13:47,760\nFixed disk versus dynamic disk.\n\n293\n00:13:47,760 --> 00:13:50,820\nFixed for production,\ndynamic for test and lab, right?\n\n294\n00:13:50,820 --> 00:13:55,150\nThat's really the easy way you make\nthe decision between those two\n\n295\n00:13:55,150 --> 00:13:58,890\nunless there's some very\nspecific reason for\n\n296\n00:13:58,890 --> 00:14:01,080\nusing a dynamic disc in production,\nyou're not gonna do it.\n\n297\n00:14:01,080 --> 00:14:04,560\n>> Yeah, Microsoft will say that the\nperformance on those differencing discs,\n\n298\n00:14:04,560 --> 00:14:07,470\nor the dynamically expanding disc,\nhas gotten better but\n\n299\n00:14:07,470 --> 00:14:11,450\nthere really are too many issues that\nwe can run into with performance that I\n\n300\n00:14:11,450 --> 00:14:13,000\ncan't use it in our\nproduction environment.\n\n301\n00:14:13,000 --> 00:14:15,270\nBut as Don said, perfect for\nyour test environment.\n\n302\n00:14:15,270 --> 00:14:16,000\nRig them up.\n\n303\n00:14:16,000 --> 00:14:17,820\nThe only downside of it,\nwe can't convert them.\n\n304\n00:14:17,820 --> 00:14:18,680\nIt's kind of a shame.\n\n305\n00:14:18,680 --> 00:14:21,360\nI wish we could convert them\nfrom a dynamic to a fixed.\n\n306\n00:14:21,360 --> 00:14:22,740\nSo if I had a test machine and\n\n307\n00:14:22,740 --> 00:14:25,280\nwanted to migrate that over to\nmy production environment but.\n\n308\n00:14:25,280 --> 00:14:26,200\n>> They used to let you do that.\n\n309\n00:14:26,200 --> 00:14:26,950\nThey took that away?\n\n310\n00:14:26,950 --> 00:14:28,500\n>> I don't think you can.\n\n311\n00:14:28,500 --> 00:14:29,200\nMaybe I'm wrong.\n\n312\n00:14:29,200 --> 00:14:32,070\n>> Well, they changed to format so\nthey could have taken that away but.\n\n313\n00:14:32,070 --> 00:14:35,886\nEither way even in the old days when you\ncould do the conversion, the conversion,\n\n314\n00:14:35,886 --> 00:14:37,227\nit took a long time, right?\n\n315\n00:14:37,227 --> 00:14:39,544\nCuz you're basically\nprovisioning out that disk, and\n\n316\n00:14:39,544 --> 00:14:42,270\nthat goes true with even just\ncreating a new fixed disk.\n\n317\n00:14:42,270 --> 00:14:45,517\nIf I wanna create a 1 TB fixed disk,\nit can take an hour.\n\n318\n00:14:45,517 --> 00:14:47,216\n>> Right.\n>> Cuz it's having to provision all\n\n319\n00:14:47,216 --> 00:14:47,850\nthat space.\n\n320\n00:14:47,850 --> 00:14:48,880\nThat can take a long time.\n\n321\n00:14:48,880 --> 00:14:52,520\nMaybe not an hour, I guess it depends\non how fast or slow your storage is.\n\n322\n00:14:52,520 --> 00:14:54,517\nBut if you do a dynamic\ndisc it's done instantly.\n\n323\n00:14:54,517 --> 00:14:57,010\n>> Right.\n>> Right, it's super fast.\n\n324\n00:14:57,010 --> 00:14:58,630\nSo that does weigh into things too.\n\n325\n00:14:58,630 --> 00:15:02,340\nIf I'm in a hurry, if I'm like man,\nI need this server up right now,\n\n326\n00:15:02,340 --> 00:15:05,440\nlet me just spin it up dynamic and\ngive that a shot.\n\n327\n00:15:05,440 --> 00:15:07,430\nI'm curious Mike, let's do a-\n>> I was gonna search, yeah.\n\n328\n00:15:07,430 --> 00:15:07,930\n>> We'll do a test.\n\n329\n00:15:07,930 --> 00:15:08,430\n>> Yeah.\n\n330\n00:15:08,430 --> 00:15:09,770\n>> So let me show you guys this.\n\n331\n00:15:09,770 --> 00:15:11,580\nI'm just gonna fire up a lab machine here,\n\n332\n00:15:11,580 --> 00:15:15,420\nand I've got a Windows server\n2012 VM sitting right here.\n\n333\n00:15:15,420 --> 00:15:17,920\nAnd if I go into its settings.\n\n334\n00:15:17,920 --> 00:15:20,760\nI can see the hard drives\nthat are attached to it and\n\n335\n00:15:20,760 --> 00:15:22,340\nwhen I take a look at the disk.\n\n336\n00:15:22,340 --> 00:15:25,796\nSo I've got a, am i skimming,\nover there, hard drive right.\n\n337\n00:15:25,796 --> 00:15:26,939\nSo I've got a hard drive and\n\n338\n00:15:26,939 --> 00:15:29,683\nif I look at the virtual disk it's\ntelling me where it's stored.\n\n339\n00:15:29,683 --> 00:15:31,720\nIt's terribly exciting.\n\n340\n00:15:31,720 --> 00:15:32,780\nSo there it is.\n\n341\n00:15:32,780 --> 00:15:35,930\nAnd if I added that disk it'll tell\nme a little bit information about it.\n\n342\n00:15:35,930 --> 00:15:38,141\nIt's telling me, in this case,\noh this one is different.\n\n343\n00:15:38,141 --> 00:15:40,459\n>> [CROSSTALK]\n>> Oh, it will.\n\n344\n00:15:40,459 --> 00:15:42,610\n>> [INAUDIBLE] That same wizard\nyour in there, sure enough.\n\n345\n00:15:42,610 --> 00:15:43,420\n>> All right.\n\n346\n00:15:43,420 --> 00:15:45,340\nSo i'm just gonna whip up a new one here.\n\n347\n00:15:45,340 --> 00:15:46,350\nOn this IDE controller.\n\n348\n00:15:46,350 --> 00:15:49,818\nI'm gonna add another hard drive and\nso i'm gonna add one and\n\n349\n00:15:49,818 --> 00:15:54,170\nwhen i do a virtual disk i'll just do\na new disk and it's gonna ask me to pick.\n\n350\n00:15:54,170 --> 00:15:56,450\nAnd, I'm picking between VHD and VHDX.\n\n351\n00:15:56,450 --> 00:15:57,621\n>> Right.\n>> And it even gives me a summary.\n\n352\n00:15:57,621 --> 00:16:00,460\nThere I can see the 2 TB and 64 TB and\n\n353\n00:16:00,460 --> 00:16:03,167\nthe-\n>> Consistency issues that are protected\n\n354\n00:16:03,167 --> 00:16:06,440\nin the VHDX,\nthose are reasons we'd go with that VHDX.\n\n355\n00:16:06,440 --> 00:16:11,570\nI'm gonna choose to do dynamically\nexpanding on this one, all right.\n\n356\n00:16:11,570 --> 00:16:18,495\nSo, I'll just whip that up and we'll just\ncall this, my dynamic VHDX, all right.\n\n357\n00:16:18,495 --> 00:16:22,710\nWe will just make it,\nlet's just do 20 gigs.\n\n358\n00:16:22,710 --> 00:16:24,006\nI don't wanna go crazy here.\n\n359\n00:16:24,006 --> 00:16:25,950\n[LAUGH] Let's go small, all right.\n\n360\n00:16:25,950 --> 00:16:27,990\nI'm gonna whip a 20 gig one,\nand there it goes.\n\n361\n00:16:27,990 --> 00:16:31,580\nSo it's gonna provision that,\nand it's already done.\n\n362\n00:16:31,580 --> 00:16:34,020\nOkay.\nSo it's done and made that disk, and\n\n363\n00:16:34,020 --> 00:16:35,480\nI've got it, all right.\n\n364\n00:16:35,480 --> 00:16:37,810\nNow, that's an IDE controller,\nso I'm kind of limited here.\n\n365\n00:16:37,810 --> 00:16:38,730\nLet me go to this controller.\n\n366\n00:16:38,730 --> 00:16:42,280\nI'll add another drive over here, and\non this one I'll do a virtual disk, and\n\n367\n00:16:42,280 --> 00:16:44,590\nI'll go ahead and do that same 20 gigs.\n\n368\n00:16:44,590 --> 00:16:48,180\nBut this time I'm gonna choose\nto do a fixed disc on this one.\n\n369\n00:16:48,180 --> 00:16:53,420\nSo I'll go fixed, and I'll just call\nthis one, my fixed.vhdx, all right.\n\n370\n00:16:53,420 --> 00:16:57,270\nAnd, I'll make it 20\ngigs just like the other.\n\n371\n00:16:58,720 --> 00:16:59,780\nAnd we'll finish that up.\n\n372\n00:16:59,780 --> 00:17:03,090\nNow I'm gonna see a little status bar\ncome up on the screen, there it is.\n\n373\n00:17:03,090 --> 00:17:04,240\nIt's provisioning 20 gigs, all right.\n\n374\n00:17:04,240 --> 00:17:07,700\nAnd you'll see it won't take\nlong it'll take maybe 20 seconds\n\n375\n00:17:07,700 --> 00:17:08,860\nhere to partition that out.\n\n376\n00:17:08,860 --> 00:17:10,705\n>> But longer than it did that dip, yeah.\n\n377\n00:17:10,705 --> 00:17:11,580\n[INAUDIBLE] expanding.\n\n378\n00:17:11,580 --> 00:17:14,280\n>> It certainly did and\nthat was only 20 gigs.\n\n379\n00:17:14,280 --> 00:17:15,500\nWhat if it was a terabyte?\n\n380\n00:17:15,500 --> 00:17:16,000\n>> Right?\n>> Right.\n\n381\n00:17:16,000 --> 00:17:19,470\n>> It would take that much longer to\nprovision that out and that's it lining up\n\n382\n00:17:19,470 --> 00:17:23,210\nthat nice contiguous space on the disk but\nthat's what we want in production.\n\n383\n00:17:23,210 --> 00:17:26,790\nI now know that that disk\nhas 20 gigs reserved.\n\n384\n00:17:26,790 --> 00:17:30,030\nAnd my VM can use all 20 gigs, and\nI don't have to worry about potentially\n\n385\n00:17:30,030 --> 00:17:33,490\nrunning out of space because other\nVMs are competing for that storage.\n\n386\n00:17:33,490 --> 00:17:36,755\nHere it's got it, it's exclusive,\nit's set up, and it's ready to go.\n\n387\n00:17:36,755 --> 00:17:37,380\n>> Right.\n\n388\n00:17:37,380 --> 00:17:39,830\n>> And then the conversation\nthat Mike was mentioning,\n\n389\n00:17:39,830 --> 00:17:44,100\nif I go back to that dynamic one,\nright, and I choose edit.\n\n390\n00:17:44,100 --> 00:17:48,060\nYou can edit that virtual disk,\nand on the next screen here,\n\n391\n00:17:48,060 --> 00:17:50,440\nyou can do things like compact it and\nexpand it.\n\n392\n00:17:50,440 --> 00:17:51,970\nExpand it,\nyou can make it bigger if you want.\n\n393\n00:17:51,970 --> 00:17:54,060\nCompact it, is you can compress it.\n\n394\n00:17:54,060 --> 00:17:56,490\nLike if you deleted a bunch of files.\n\n395\n00:17:56,490 --> 00:17:59,400\nDynamic disks will grow but\nthey never shrink.\n\n396\n00:17:59,400 --> 00:18:01,390\nThey never shrink to give back space, so\n\n397\n00:18:01,390 --> 00:18:03,920\nyou can compact it to\ngive that space back.\n\n398\n00:18:03,920 --> 00:18:07,890\nOr here we can convert it, and I can flip\nit over to become that fixed one, and\n\n399\n00:18:07,890 --> 00:18:11,819\nI can convert to a VHDX, which I\nalready am, and then I can convert it.\n\n400\n00:18:14,090 --> 00:18:15,010\nThere we go.\n\n401\n00:18:15,010 --> 00:18:15,923\nAll right.\nAnd [COUGH] it's asking me\n\n402\n00:18:15,923 --> 00:18:16,610\nwhere I wanna put it.\n\n403\n00:18:17,870 --> 00:18:24,320\nAnd so I'll call it dynamic\nfixed since I'm converting it.\n\n404\n00:18:24,320 --> 00:18:25,360\nAnd we'll just hit finished.\n\n405\n00:18:25,360 --> 00:18:26,710\nAnd now it's gonna convert it over.\n\n406\n00:18:26,710 --> 00:18:29,840\nNow the conversion process here can\nactually take longer sometimes.\n\n407\n00:18:29,840 --> 00:18:32,220\nAnd provisioning if it has a bunch\nof data that it's got to copy.\n\n408\n00:18:32,220 --> 00:18:35,110\nBecause it's actually\nbuilding an all new file.\n\n409\n00:18:35,110 --> 00:18:38,560\nThat's fixed as opposed to the one that\nwas dynamic and copying data between us.\n\n410\n00:18:38,560 --> 00:18:41,440\nSo that process can take even longer.\n\n411\n00:18:41,440 --> 00:18:45,590\nSo, if I'm in a hurry I can\nwhip one up that's dynamic and\n\n412\n00:18:45,590 --> 00:18:48,660\nthen later on covert it when I have time.\n\n413\n00:18:48,660 --> 00:18:50,760\nOr, one of the tricks that I\nuse is that I know like hey,\n\n414\n00:18:50,760 --> 00:18:55,040\nif I need a one terrabyte disk, what I'll\ndo is I'll write a PowerShell command to\n\n415\n00:18:55,040 --> 00:18:57,970\ncreate that disk and\nI'll just schedule it to run at midnight.\n\n416\n00:18:57,970 --> 00:19:00,780\nAnd then I go home, and that way when I\ncome in the morning the disk is already\n\n417\n00:19:00,780 --> 00:19:02,660\nready and\nit's sitting there waiting for me.\n\n418\n00:19:02,660 --> 00:19:05,470\nAnd I can go in there and use it and\nyou kind of automate that a little bit.\n\n419\n00:19:05,470 --> 00:19:07,900\n>> Nice\n>> All right,\n\n420\n00:19:07,900 --> 00:19:11,860\nso that's dynamic and fixed and\nthose are the two you work with the most.\n\n421\n00:19:11,860 --> 00:19:15,430\nNow when I was in that wizard, there\nwas another option in there, all right.\n\n422\n00:19:15,430 --> 00:19:22,810\nIf I go into new here and I move forward,\nthere was fixed Dynamic and differencing.\n\n423\n00:19:22,810 --> 00:19:23,350\n>> Differencing.\n\n424\n00:19:23,350 --> 00:19:24,760\n>> What the heck is a differencing?\n\n425\n00:19:24,760 --> 00:19:26,350\n>> Yeah, right?\n\n426\n00:19:26,350 --> 00:19:28,430\n>> With a differencing disk,\nwhat Microsoft said is,\n\n427\n00:19:28,430 --> 00:19:33,580\nlook, most of your servers have a lot\nof duplicate data on them, right.\n\n428\n00:19:33,580 --> 00:19:36,040\nLet's say that I have a web server and\n\n429\n00:19:36,040 --> 00:19:40,910\nit's an auto-scaling web server like we\nsaw back in our service profiler episode.\n\n430\n00:19:40,910 --> 00:19:42,640\nWait, what was that\nepisode actually about?\n\n431\n00:19:42,640 --> 00:19:43,950\nIt was.\n\n432\n00:19:43,950 --> 00:19:47,480\nThe episode wasn't called service\nprofiles, it was called something else.\n\n433\n00:19:47,480 --> 00:19:48,870\nI've forgotten now.\n\n434\n00:19:48,870 --> 00:19:49,647\n>> Yeah, I don't remember.\n\n435\n00:19:49,647 --> 00:19:50,800\n[LAUGH]\n>> Anyway, oh it was\n\n436\n00:19:50,800 --> 00:19:51,990\nthe virtual machine planning.\n\n437\n00:19:51,990 --> 00:19:53,570\nSo in our virtual machine\nplanning episode,\n\n438\n00:19:53,570 --> 00:19:55,810\nwe showed you guys what\na service profile was.\n\n439\n00:19:55,810 --> 00:20:00,690\nAnd now if you had an application that\nhad a data base and a web front end that,\n\n440\n00:20:00,690 --> 00:20:05,333\nyou might only have one data base server,\nbut you might have one, five, 15,\n\n441\n00:20:05,333 --> 00:20:08,630\n500 web servers depending\non the load of your site.\n\n442\n00:20:08,630 --> 00:20:10,560\nAll those web servers\nare really identical.\n\n443\n00:20:10,560 --> 00:20:13,640\nYou're just spitting up more web\nservers to create more resources for\n\n444\n00:20:13,640 --> 00:20:15,310\nyour end users when the server's busy.\n\n445\n00:20:15,310 --> 00:20:18,300\nAnd when the server's slow\nyou remove those web servers.\n\n446\n00:20:18,300 --> 00:20:20,070\nBut they're all basically the same.\n\n447\n00:20:20,070 --> 00:20:20,830\nRight.\nThey all have\n\n448\n00:20:20,830 --> 00:20:22,270\nWindows server 2012 loaded on them.\n\n449\n00:20:22,270 --> 00:20:24,250\nThey all have a copy of your web page.\n\n450\n00:20:24,250 --> 00:20:25,680\nThe majority of that's the same.\n\n451\n00:20:25,680 --> 00:20:26,920\nWhat's different?\n\n452\n00:20:26,920 --> 00:20:27,452\nThere's SID.\n\n453\n00:20:27,452 --> 00:20:27,952\nRight.\n>> All right.\n\n454\n00:20:27,952 --> 00:20:28,632\n>> Each one has a different\n\n455\n00:20:28,632 --> 00:20:29,680\nsecurity identifier.\n\n456\n00:20:29,680 --> 00:20:30,680\nTheir host name.\n\n457\n00:20:30,680 --> 00:20:32,360\nTheir IP address.\n\n458\n00:20:32,360 --> 00:20:35,600\nBut that's like miniscule data.\n\n459\n00:20:35,600 --> 00:20:37,930\nVery little data that is actually\ndifferent between those Web Servers.\n\n460\n00:20:37,930 --> 00:20:40,090\nOtherwise they're just\nclones of each other.\n\n461\n00:20:40,090 --> 00:20:45,180\nWell, a differencing disk is where we say,\nwe've got a base disk,\n\n462\n00:20:45,180 --> 00:20:49,870\nthis source disk,\nthat's common between all these VM's.\n\n463\n00:20:49,870 --> 00:20:54,010\nSo it might be one virtual hard drive\nthat has Windows Sever 2012 on it,\n\n464\n00:20:54,010 --> 00:20:58,910\nall the updates that are applied to it,\nsecurity monitoring software,\n\n465\n00:20:58,910 --> 00:21:00,480\na copy of our webpage and so on.\n\n466\n00:21:01,700 --> 00:21:06,280\nAnd then when we spin up a VM,\ninstead of giving it that actual disk,\n\n467\n00:21:06,280 --> 00:21:08,520\nwe give it a differencing disk.\n\n468\n00:21:08,520 --> 00:21:11,170\nAnd that's a separate VHD that\n\n469\n00:21:11,170 --> 00:21:14,430\njust tracks the changes that\nwere made to that base disk.\n\n470\n00:21:14,430 --> 00:21:15,930\n>> Right.\n>> Right, so\n\n471\n00:21:15,930 --> 00:21:20,130\nthe different SID when we sys prep it,\nthe different host name,\n\n472\n00:21:20,130 --> 00:21:23,800\nthe different Software that we might copy\nto it, or modification to it we make.\n\n473\n00:21:23,800 --> 00:21:27,510\nThat stuff is stored in this\nseparate hard drive, and\n\n474\n00:21:27,510 --> 00:21:29,278\nit's based off of this shared baseness,\nright.\n\n475\n00:21:30,920 --> 00:21:34,180\nReally cool for environments like\nservice profiles where you do have a ton\n\n476\n00:21:34,180 --> 00:21:35,620\nof machines that are all clones.\n\n477\n00:21:35,620 --> 00:21:38,450\nIt makes it faster to\nprovision too because if the,\n\n478\n00:21:38,450 --> 00:21:45,350\nlet's say that that Web Server had\na 64 gig fixed disc as its main drive.\n\n479\n00:21:45,350 --> 00:21:48,760\nEvery time I clone it I've\ngotta copy 64 gigs of data.\n\n480\n00:21:48,760 --> 00:21:50,390\nAnd file 64 gigs in size.\n\n481\n00:21:50,390 --> 00:21:53,420\nSo that makes provisioning\nthe server slower.\n\n482\n00:21:53,420 --> 00:21:55,690\nBut if I do a differencing disk.\n\n483\n00:21:55,690 --> 00:22:00,200\nWell, now it just references that base\ndisk so it doesn't even have to copy it.\n\n484\n00:22:00,200 --> 00:22:03,420\nIt stays wherever it is it references\nit and then it maintains a change file.\n\n485\n00:22:03,420 --> 00:22:06,670\nA change file that will be empty\nwhen it first comes up, and\n\n486\n00:22:06,670 --> 00:22:09,630\nthen it completes it's\nsys prep unattend wizard.\n\n487\n00:22:09,630 --> 00:22:11,340\nAuto unattend whatever it's called.\n\n488\n00:22:11,340 --> 00:22:15,520\nAnd it finishes that to get its host name\nand so on, and now the server's up and\n\n489\n00:22:15,520 --> 00:22:17,690\nready to rock in my\nenvironment very quickly.\n\n490\n00:22:17,690 --> 00:22:20,930\nAnd, occupying far less space and\nI'm not duplicating the data over and\n\n491\n00:22:20,930 --> 00:22:21,710\nover and over again.\n\n492\n00:22:21,710 --> 00:22:25,270\n>> Yeah defiantly some advantage, I use\nit all the time in my test environments.\n\n493\n00:22:25,270 --> 00:22:28,220\nI have base hard drives for\n\n494\n00:22:28,220 --> 00:22:32,960\nyour standard operating, your 2012,\n2012R2, Windows 8, Windows 7.\n\n495\n00:22:32,960 --> 00:22:35,420\nAnytime I need to whip up a new sandbox,\n\n496\n00:22:35,420 --> 00:22:40,130\nI just make differencing drives based\noff of those base discs for my new VM's.\n\n497\n00:22:40,130 --> 00:22:41,650\nAnd then when I'm done with\nthem I can pitch them.\n\n498\n00:22:41,650 --> 00:22:44,720\nAnd I didn't have to wait and\nreinstall the operating system or\n\n499\n00:22:44,720 --> 00:22:45,670\nanything like that.\n\n500\n00:22:45,670 --> 00:22:46,720\nWake them up real quick.\n\n501\n00:22:46,720 --> 00:22:47,550\nUse them, throw them away.\n\n502\n00:22:47,550 --> 00:22:49,120\nIf I want a new sandbox,\n\n503\n00:22:49,120 --> 00:22:52,770\nI can just make new differencing\ndrives based on the base drives.\n\n504\n00:22:52,770 --> 00:22:54,740\nAnd the base drives remain unmodified.\n\n505\n00:22:54,740 --> 00:22:57,550\nIn fact we can mark those as read only,\nand very important\n\n506\n00:22:57,550 --> 00:23:00,790\nif we're gonna use differencing drives,\nthat we don't modify that.\n\n507\n00:23:00,790 --> 00:23:03,940\nIt needs to be marked as read\nonly cuz if it ever changes It's\n\n508\n00:23:03,940 --> 00:23:08,030\nnot gonna be recognized by any of those\ndifferencing discs that you've created for\n\n509\n00:23:08,030 --> 00:23:09,940\nlike in Don's example those web servers.\n\n510\n00:23:09,940 --> 00:23:14,140\nSo if somebody actually modified that base\ndrive, those Web Servers they've got their\n\n511\n00:23:14,140 --> 00:23:17,050\ndifferencing drive, but they don't have\ntheir base drive anymore, which is where\n\n512\n00:23:17,050 --> 00:23:19,875\ntheir operating system and all the common\nfiles are and they're gonna fail.\n\n513\n00:23:19,875 --> 00:23:21,645\nWe've gotta make sure we keep that safe.\n\n514\n00:23:21,645 --> 00:23:22,945\n>> Yeah, that's pretty important.\n\n515\n00:23:22,945 --> 00:23:26,495\nNow, one thing about\nthe differencing disk.\n\n516\n00:23:26,495 --> 00:23:28,975\nIf our base disk is a fixed disk.\n\n517\n00:23:28,975 --> 00:23:31,885\nLet's say it's a 64 gig fixed disk.\n\n518\n00:23:31,885 --> 00:23:35,940\nYour differencing disk is always dynamic.\n\n519\n00:23:35,940 --> 00:23:39,450\nYour difference in disks is always\ndynamically expanding, and it\n\n520\n00:23:39,450 --> 00:23:44,330\nbasically is just tracking all the changes\nand as the changes are made it grows.\n\n521\n00:23:44,330 --> 00:23:48,368\nThat means if you're going to have\na lot of changes, it hurts performance.\n\n522\n00:23:48,368 --> 00:23:52,273\nIf you're gonna have a lot of changes,\nyou shouldn't use differencing disks for\n\n523\n00:23:52,273 --> 00:23:53,641\nthat system in production.\n\n524\n00:23:53,641 --> 00:23:55,790\nTests and labs is a different story.\n\n525\n00:23:55,790 --> 00:23:58,533\nBecause what happens is every\ntime you read from a hard drive,\n\n526\n00:23:58,533 --> 00:24:00,550\nit has to read it from\nthe differencing disk.\n\n527\n00:24:00,550 --> 00:24:05,550\nAnd the base disk, to find that one big\nset of what your disk actually looks like.\n\n528\n00:24:05,550 --> 00:24:07,165\nAnd that hurts performance, right?\n\n529\n00:24:07,165 --> 00:24:07,840\n>> Mm-hm\n>> So\n\n530\n00:24:07,840 --> 00:24:10,730\nthe bigger the differencing disk is\nthe more changes that are in here,\n\n531\n00:24:10,730 --> 00:24:11,830\nthe slower that performance gets.\n\n532\n00:24:11,830 --> 00:24:13,983\n>> Right.\n>> In my scenario that I gave of that\n\n533\n00:24:13,983 --> 00:24:18,537\nservice profile if their Web front\nend's the only difference is going to\n\n534\n00:24:18,537 --> 00:24:22,120\nbe their SID, their host name,\nbasic things like that,\n\n535\n00:24:22,120 --> 00:24:24,830\nyour difference in disk can be very small.\n\n536\n00:24:24,830 --> 00:24:28,429\nIt can be a couple of megs in size,\nmaybe a gig top, right?\n\n537\n00:24:28,429 --> 00:24:30,770\nIt's not gonna be a lot\nof data that's in there.\n\n538\n00:24:30,770 --> 00:24:35,760\nAnd, that's fine, that won't create\na performance hit, it works great, okay?\n\n539\n00:24:35,760 --> 00:24:38,910\nBut, if it's gonna be several\ngigs of data in there,\n\n540\n00:24:38,910 --> 00:24:42,170\nlike you installed Microsoft Exchange,\nand all of that's wrapped up in\n\n541\n00:24:42,170 --> 00:24:45,300\nthe differencing disk,\nperformance takes a pretty big hit, right?\n\n542\n00:24:45,300 --> 00:24:47,961\nSo, we don't wanna rely on those in\na production environment unless we know\n\n543\n00:24:47,961 --> 00:24:49,635\nthe changes are going to be small,\nvery small.\n\n544\n00:24:49,635 --> 00:24:54,107\nThe other thing is, all of those\nWeb front ends that I spin up,\n\n545\n00:24:54,107 --> 00:24:57,806\nthey're all reading from that base disk,\nright?\n\n546\n00:24:57,806 --> 00:25:04,017\nAnd that means if I've got 50 Web front\nends and there's just that one base disk,\n\n547\n00:25:04,017 --> 00:25:08,460\nthat's disk I/O from 50\nVMs all going to one file.\n\n548\n00:25:08,460 --> 00:25:11,190\nAnd that can create disk\ncontention pretty badly.\n\n549\n00:25:11,190 --> 00:25:13,770\nSo even though differencing\ndisks are possible,\n\n550\n00:25:13,770 --> 00:25:17,030\nI might still choose to go\nwith non-differencing disks.\n\n551\n00:25:17,030 --> 00:25:20,570\nJust standard fixed disks,\nand maintain 50 copies.\n\n552\n00:25:20,570 --> 00:25:22,340\nCuz I can spread it across LUNs,\n\n553\n00:25:22,340 --> 00:25:24,910\nspread it across physical hard\ndrives to improve performance.\n\n554\n00:25:24,910 --> 00:25:29,340\nSo this is another one of those\ntechnologies that can work in production,\n\n555\n00:25:29,340 --> 00:25:31,850\nbut for a lot of people,\nwill choose not to use it in production.\n\n556\n00:25:31,850 --> 00:25:37,110\nBecause we can get better performance at\na sacrifice of longer spin up times and\n\n557\n00:25:37,110 --> 00:25:38,135\nmore storage consumption.\n\n558\n00:25:38,135 --> 00:25:39,210\n>> Mm-hm, exactly.\n\n559\n00:25:40,460 --> 00:25:42,710\n>> All right,\nnow I did mention a fourth disk type.\n\n560\n00:25:42,710 --> 00:25:44,130\nOne that doesn't show here in the wizard,\nright?\n\n561\n00:25:44,130 --> 00:25:47,250\nAnd so in the wizard that I'm looking\nat I've got that fixed disk size,\n\n562\n00:25:47,250 --> 00:25:49,290\ndynamically expanding and differencing.\n\n563\n00:25:49,290 --> 00:25:51,790\nThe fourth disk type doesn't show up,\nall right?\n\n564\n00:25:51,790 --> 00:25:55,590\nAnd that's because if I cancel out of this\nit's actually back here in my settings.\n\n565\n00:25:55,590 --> 00:26:00,500\nInstead of attaching a virtual disk, I can\nattach a physical hard disk, all right?\n\n566\n00:26:01,600 --> 00:26:05,750\nIf I do this, what I'm doing is\nI'm taking that physical disk and\n\n567\n00:26:05,750 --> 00:26:09,970\ninstead of attaching it to the host\nOS I'm attaching it to the guest,\n\n568\n00:26:09,970 --> 00:26:12,600\ndirectly to the VM, all right?\n\n569\n00:26:12,600 --> 00:26:15,398\nIn this scenario it's not\na virtual hard drive at all.\n\n570\n00:26:15,398 --> 00:26:18,430\nThere is no VHD or VHDX.\n\n571\n00:26:18,430 --> 00:26:21,440\nIt's just a raw disk attached to the VM.\n\n572\n00:26:21,440 --> 00:26:24,860\nAnd it has exclusive access to it.\n\n573\n00:26:24,860 --> 00:26:28,830\nNow this is not typically\nsomething we use in lab and test.\n\n574\n00:26:28,830 --> 00:26:31,680\nThis is something we use\nin production when disk I/O\n\n575\n00:26:31,680 --> 00:26:32,907\nis of the utmost importance, right?\n\n576\n00:26:34,070 --> 00:26:37,550\nSo you'll see this on exchange\nmailbox servers, on Microsoft SQL\n\n577\n00:26:37,550 --> 00:26:41,710\ndatabase servers, where you know they're\ngonna generate a lot of disk I/O.\n\n578\n00:26:41,710 --> 00:26:46,030\nAnd you don't want their VHDs sitting on\na LUN right next to other software, and\n\n579\n00:26:46,030 --> 00:26:47,400\nwe get disk contention.\n\n580\n00:26:47,400 --> 00:26:49,128\nSo here I can say, this physical disk.\n\n581\n00:26:49,128 --> 00:26:51,916\nAnd I say this physical disk,\nthis is actually a LUN.\n\n582\n00:26:51,916 --> 00:26:53,274\nSee how it says LUN 0, Target 0?\n\n583\n00:26:53,274 --> 00:26:56,480\nThis is a LUN on a SAN somewhere, right?\n\n584\n00:26:56,480 --> 00:27:00,618\nSo it's technically a virtual disk,\nbut accessed through the SAN.\n\n585\n00:27:00,618 --> 00:27:04,350\nSo this 70-gig disk will be\nattached to this machine, and\n\n586\n00:27:04,350 --> 00:27:06,770\nonly this machine will have access to it.\n\n587\n00:27:06,770 --> 00:27:10,620\nNow that used to be called a pass-through\ndisk in previous versions of Hyper-V.\n\n588\n00:27:10,620 --> 00:27:13,180\nOn the exam, it actually kinda flip flop.\n\n589\n00:27:13,180 --> 00:27:14,260\nYou'll see both terms used.\n\n590\n00:27:14,260 --> 00:27:15,430\nIt's a little frustrating.\n\n591\n00:27:15,430 --> 00:27:16,880\nBut understand that it is the same thing,\n\n592\n00:27:16,880 --> 00:27:19,900\nright, that it is a physical hard disk and\nwe're attaching it there.\n\n593\n00:27:19,900 --> 00:27:22,660\nWhen the VM gets it,\nit's just gonna see it as raw disk.\n\n594\n00:27:22,660 --> 00:27:24,660\nYou'll have to format it and partition it.\n\n595\n00:27:24,660 --> 00:27:26,320\nAnd all that good stuff.\n\n596\n00:27:26,320 --> 00:27:28,650\nAnd then get it fired up and\nstart to use it.\n\n597\n00:27:28,650 --> 00:27:33,100\nThe neat thing here is we're not having\nto convert disk I/O operations into\n\n598\n00:27:33,100 --> 00:27:34,690\nvirtual hard drive rights.\n\n599\n00:27:34,690 --> 00:27:37,504\nHere the disk I/O operations actually\njust go right against that physical disk\n\n600\n00:27:37,504 --> 00:27:38,520\nand write down.\n\n601\n00:27:38,520 --> 00:27:42,790\nSo you get real bare metal\nperformance out of that hard drive.\n\n602\n00:27:44,490 --> 00:27:46,380\nSome of the considerations\nwe have to have,\n\n603\n00:27:46,380 --> 00:27:50,240\nwhen we do a virtual hard disk we can\nstore that in our cluster resources.\n\n604\n00:27:50,240 --> 00:27:53,307\nAnd now, if our VM fails over to\nother host, it'll still have access.\n\n605\n00:27:53,307 --> 00:27:55,177\nIf you do a physical hard disk like this,\n\n606\n00:27:55,177 --> 00:27:57,487\nyou got to be careful with your planning,\nright?\n\n607\n00:27:57,487 --> 00:28:00,110\nYou shouldn't do this for local storage.\n\n608\n00:28:00,110 --> 00:28:03,560\nIf this hard disk that I'm mounting\nis actually local to the host,\n\n609\n00:28:03,560 --> 00:28:06,180\nmy VM will no longer be able to\nfail over to other hosts cuz\n\n610\n00:28:06,180 --> 00:28:08,540\nthat physical disk won't be there, right?\n\n611\n00:28:08,540 --> 00:28:13,510\nBut if this is on a SAN, like it is in my\nscenario, I can fail over to another host\n\n612\n00:28:13,510 --> 00:28:16,790\nas long as this LUN is visible\non that other SAN, right?\n\n613\n00:28:16,790 --> 00:28:19,850\nSo we need to make sure that our SAN\nis configured to expose that LUN to\n\n614\n00:28:19,850 --> 00:28:23,260\neach of the Hyper-V hosts where our\nvirtual machine might bounce to.\n\n615\n00:28:23,260 --> 00:28:25,510\nSo, that's a consideration there.\n\n616\n00:28:25,510 --> 00:28:30,150\nBut once it's attached, now I'll\nhave access to that virtual machine.\n\n617\n00:28:30,150 --> 00:28:31,790\nAnd I mean to that hard drive,\n\n618\n00:28:31,790 --> 00:28:36,840\nand it's exclusive access, this server can\naccess it and now it's off and running.\n\n619\n00:28:36,840 --> 00:28:38,900\nThat's that fourth type.\n\n620\n00:28:38,900 --> 00:28:40,220\nWe don't usually use that in test and\n\n621\n00:28:40,220 --> 00:28:42,190\ndevelopment because we have\nservers coming and going.\n\n622\n00:28:42,190 --> 00:28:43,950\nWe don't necessarily tie\nphysical disks to them.\n\n623\n00:28:43,950 --> 00:28:45,680\n>> All right.\n>> But in a production environment,\n\n624\n00:28:45,680 --> 00:28:47,150\nyou can get some of the best\nperformance out of that, all right.\n\n625\n00:28:49,230 --> 00:28:52,235\nDo be careful with a few things, like\nif you try and boot your system off of\n\n626\n00:28:52,235 --> 00:28:55,516\na physical disk like that, there's some\nweird quirks that can happen there.\n\n627\n00:28:55,516 --> 00:28:58,024\nIf you're on Windows Server\n2012 it's fine.\n\n628\n00:28:58,024 --> 00:28:59,881\nIf you're on server 2008,\nit really doesn't like it.\n\n629\n00:28:59,881 --> 00:29:04,674\nYou have to attach it to an IDE controller\nand not a Synthetic SCSI Controller,\n\n630\n00:29:04,674 --> 00:29:06,352\nand things of that nature.\n\n631\n00:29:06,352 --> 00:29:08,400\nIt can kinda get a little quirky.\n\n632\n00:29:08,400 --> 00:29:09,660\nThey've improved that a lot in 2012.\n\n633\n00:29:12,060 --> 00:29:14,240\nAll right, so\nwhen we create a virtual machine,\n\n634\n00:29:14,240 --> 00:29:17,040\nwe've gotta figure out what type\nof disk it's going to be, right?\n\n635\n00:29:17,040 --> 00:29:19,370\nAnd those were\nthe considerations right there.\n\n636\n00:29:19,370 --> 00:29:22,500\nThen we've gotta figure out\nwhere it's going to reside.\n\n637\n00:29:22,500 --> 00:29:25,290\nAnd there's a few decisions\nwe have to make on that too,\n\n638\n00:29:25,290 --> 00:29:28,350\nbut looking at the clock we've\ntalked a little too much here.\n\n639\n00:29:28,350 --> 00:29:29,141\nSo let's pause and take a break.\n\n640\n00:29:29,141 --> 00:29:33,907\nWhen we get back we wanna talk about\nplanning where these VHDs are gonna reside\n\n641\n00:29:33,907 --> 00:29:34,724\nafter this.\n\n642\n00:29:34,724 --> 00:29:40,826\n[MUSIC]\n\n643\n00:29:40,826 --> 00:29:43,140\nAll right, welcome back everybody.\n\n644\n00:29:43,140 --> 00:29:45,705\nSo in the last segment we took a look\nat the four different drive types\n\n645\n00:29:45,705 --> 00:29:47,241\nthat we use inside of a virtual machine.\n\n646\n00:29:47,241 --> 00:29:48,828\nNow I wanna switch gears and\n\n647\n00:29:48,828 --> 00:29:53,046\ntake a look at the different ways that\nwe can attach storage to our hosts.\n\n648\n00:29:53,046 --> 00:29:55,780\nWe've got a couple of\ndifferent options there.\n\n649\n00:29:55,780 --> 00:30:00,490\nAnd, some of that starts to bleed\nover into the virtual machines.\n\n650\n00:30:00,490 --> 00:30:03,370\nAnd the first one that I wanna cover is\none of those technologies that bleeds\n\n651\n00:30:03,370 --> 00:30:07,750\nover, and that's called a virtual\nfiber channel connector, all right.\n\n652\n00:30:07,750 --> 00:30:11,005\nNow, for a lot of us, if you're deploying\nHyper-V in a production environment,\n\n653\n00:30:11,005 --> 00:30:12,645\nyou want the best performance possible.\n\n654\n00:30:12,645 --> 00:30:17,719\nAnd the best performance comes\nfrom fiber-based SANs, right?\n\n655\n00:30:17,719 --> 00:30:21,920\nI got a little diagram here just to kinda\nshow how most fiber channel SANs work.\n\n656\n00:30:21,920 --> 00:30:23,810\nYou may have multiple nodes, right and\n\n657\n00:30:23,810 --> 00:30:27,690\nthese nodes will be like your Hyper-V\nservers, right, your Hyper-V hosts.\n\n658\n00:30:27,690 --> 00:30:32,140\nAnd they might have a fiber channel\nconnection that runs directly to a SAN.\n\n659\n00:30:32,140 --> 00:30:34,840\nOr more commonly you'll have a fiber\nchannel switch in-between them.\n\n660\n00:30:36,140 --> 00:30:39,540\nInside of the Hyper-V servers,\nthere'll be a device called an HBA,\n\n661\n00:30:39,540 --> 00:30:41,440\nhost bus adapter, right?\n\n662\n00:30:41,440 --> 00:30:43,060\nIt's a hard driver controller.\n\n663\n00:30:43,060 --> 00:30:46,460\nBut instead of running SATA or SAS or\n\n664\n00:30:46,460 --> 00:30:49,846\nwhatever other drive connector you have,\nthis one will have fiber optics.\n\n665\n00:30:49,846 --> 00:30:52,630\nAnd the fiber optics can run to a switch,\nor directly to a SAN,\n\n666\n00:30:52,630 --> 00:30:54,700\nto gain access to those drives, right?\n\n667\n00:30:54,700 --> 00:30:55,530\nIt's very common.\n\n668\n00:30:55,530 --> 00:31:00,670\nThis is the most common type of SAN\ntype deployment that's out there, right.\n\n669\n00:31:00,670 --> 00:31:05,560\nWhen we have a model like this, and when\nI start bringing up my virtual machines,\n\n670\n00:31:05,560 --> 00:31:08,190\neach virtual machine has a virtual\nhard drive, and they might be fixed,\n\n671\n00:31:08,190 --> 00:31:10,990\ndynamic, whatever, regular,\neach of us have them.\n\n672\n00:31:10,990 --> 00:31:14,890\nAnd if those virtual hard drives\nare stored on the SAN, well,\n\n673\n00:31:14,890 --> 00:31:19,600\nit's the host that's able to connect up\nand see those virtual hard drives, and\n\n674\n00:31:19,600 --> 00:31:21,590\nthen expose them to the VMs.\n\n675\n00:31:21,590 --> 00:31:27,305\nThe host sees all of those virtual hard\ndrives, and the VMs are able to connect.\n\n676\n00:31:27,305 --> 00:31:31,955\nAnd so if somebody could pull off\nan exploit against one of those VMs,\n\n677\n00:31:31,955 --> 00:31:36,585\npotentially they could gain access to\neach of the VHDs exposed behind it.\n\n678\n00:31:36,585 --> 00:31:38,709\nIt would be a very difficult\nattack to pull off.\n\n679\n00:31:38,709 --> 00:31:41,588\nBut it would be potentially possible,\nall right?\n\n680\n00:31:41,588 --> 00:31:45,604\nSo what happens though is the virtual\nmachines have no idea that\n\n681\n00:31:45,604 --> 00:31:47,890\nthere's a fiber channel network.\n\n682\n00:31:47,890 --> 00:31:51,355\nThey have no idea there's these HBAs and\nthese connectors, the SAN,\n\n683\n00:31:51,355 --> 00:31:53,481\nbecause it's the host that deals with it.\n\n684\n00:31:53,481 --> 00:31:56,881\nWith virtual fiber channel we can make.\n\n685\n00:31:56,881 --> 00:32:00,730\nThe Fibre Channel host bus\nadapter visible to the VM itself.\n\n686\n00:32:00,730 --> 00:32:03,360\nSo the VM sees that there's an HBA.\n\n687\n00:32:03,360 --> 00:32:09,060\nNow, it doesn't see the actual HBA,\nit sees an emulated one, a synthetic HBA.\n\n688\n00:32:09,060 --> 00:32:10,650\nThat V fiber channel.\n\n689\n00:32:10,650 --> 00:32:12,180\nThe virtual fiber channel.\n\n690\n00:32:12,180 --> 00:32:14,780\nAnd we can assign a world wide name\n\n691\n00:32:14,780 --> 00:32:18,090\nto that individual virtual\nfiber channel connector.\n\n692\n00:32:18,090 --> 00:32:22,410\nA world wide name or a WWN, when your\nnode, when your Hyper-V server connects to\n\n693\n00:32:22,410 --> 00:32:27,410\nthe SAN it presents an ID, and\nthat ID is the world wide name.\n\n694\n00:32:27,410 --> 00:32:30,510\nAnd the SAN says, oh, your world wide\nname is allowed to see these LUNs.\n\n695\n00:32:30,510 --> 00:32:33,130\nHere's the five LUNs\nyou're allowed to see.\n\n696\n00:32:33,130 --> 00:32:37,830\nWell I could put a virtual fiber\nchannel adapter in each of my VMs and\n\n697\n00:32:37,830 --> 00:32:40,790\ngive each VM a different worldwide name.\n\n698\n00:32:40,790 --> 00:32:44,890\nAnd then when they go to talk to the SAN\nthey present that world wide name and\n\n699\n00:32:44,890 --> 00:32:47,180\nthey only see their LUN.\n\n700\n00:32:47,180 --> 00:32:51,330\nNow each virtual machine is aware that\nthey're on a fiber channel SAN and\n\n701\n00:32:51,330 --> 00:32:55,890\nthey only see the LUNs that relate to\nthem, they don't see any other LUN.\n\n702\n00:32:55,890 --> 00:32:57,730\nNow why do I care about that?\n\n703\n00:32:57,730 --> 00:33:00,490\nThe virtual machines\nare partitioned anyway,\n\n704\n00:33:00,490 --> 00:33:03,870\nwhy do I care whether they're\nseparated like this or not?\n\n705\n00:33:03,870 --> 00:33:05,550\nWell there's two main reasons.\n\n706\n00:33:05,550 --> 00:33:09,110\nFirst off, if we can see that they're\nconnected to a fiber channel SAN\n\n707\n00:33:09,110 --> 00:33:11,470\nour virtual machines can make\nmore intelligent decisions.\n\n708\n00:33:11,470 --> 00:33:13,890\nIf you're doing things\nlike storage spaces,\n\n709\n00:33:13,890 --> 00:33:17,810\nthis connector will allow us to see if\nthe other end has SSD in it or magnetic.\n\n710\n00:33:17,810 --> 00:33:21,400\nWe can do those communications app\nwith our newer SANs all right?\n\n711\n00:33:21,400 --> 00:33:25,329\nThe other reason is, there may be\nmore than one SAN on the backend.\n\n712\n00:33:26,620 --> 00:33:31,470\nYou might have a SAN that uses virtual\nSAN technology, VSAN technology.\n\n713\n00:33:31,470 --> 00:33:35,920\nAnd based on one worldwide name,\nyou might have a node and\n\n714\n00:33:35,920 --> 00:33:40,835\none VM connects to that switch and the\nswitch directs it to one SAN and another.\n\n715\n00:33:40,835 --> 00:33:42,695\nOther VM comes in,\nconnects to the switch and\n\n716\n00:33:42,695 --> 00:33:44,715\nthe switch directs it to\nan entirely different SAN.\n\n717\n00:33:44,715 --> 00:33:48,665\nThere could be more than one storage\narea network on the backend and\n\n718\n00:33:48,665 --> 00:33:50,285\nthat would be hidden from the VMs.\n\n719\n00:33:50,285 --> 00:33:52,515\nThat would be masked\nbehind this architecture.\n\n720\n00:33:53,705 --> 00:33:56,119\nVSAN technology can really\ntake advantage of this.\n\n721\n00:33:57,140 --> 00:34:00,960\nSo basically we're just\nexposing the HBA to the VM.\n\n722\n00:34:00,960 --> 00:34:04,310\nAnd Microsoft has a great technet article\non this, let me just bring it up here.\n\n723\n00:34:04,310 --> 00:34:07,040\nThey had their graphics designers\nworking overtime one day.\n\n724\n00:34:07,040 --> 00:34:10,685\nThey created some of the really best\ndiagrams that I've seen on their site.\n\n725\n00:34:10,685 --> 00:34:12,415\nAnd basically they show it here.\n\n726\n00:34:12,415 --> 00:34:16,155\nThe we have a SAN and\na fiber channel switch and\n\n727\n00:34:16,155 --> 00:34:20,175\nour host that has a host bus\nadapter that connects to it.\n\n728\n00:34:20,175 --> 00:34:25,125\nFrom here though, the host bus adapter\ncan be added to our individual VMs.\n\n729\n00:34:25,125 --> 00:34:27,885\nAnd each one gets their\nown worldwide name.\n\n730\n00:34:27,885 --> 00:34:32,510\nSo now they can be directed, routed,\nsecured, protected individually,\n\n731\n00:34:32,510 --> 00:34:35,150\nas opposed to being one shared\nconfiguration on the host.\n\n732\n00:34:36,410 --> 00:34:37,040\nPretty neat stuff.\n\n733\n00:34:38,280 --> 00:34:40,476\nIt's also pretty easy to configure.\n\n734\n00:34:40,476 --> 00:34:45,560\nTo set this up, the first thing\nyou're gonna need is a HBA,\n\n735\n00:34:45,560 --> 00:34:47,510\na host bus adapter, that's NPIV capable.\n\n736\n00:34:48,800 --> 00:34:52,540\nTo be able to virtualize those sessions,\nit's gotta be able to do that and\n\n737\n00:34:52,540 --> 00:34:54,040\nnot every HBA can.\n\n738\n00:34:54,040 --> 00:34:54,985\nSo, your HBA has to support it.\n\n739\n00:34:56,280 --> 00:34:59,250\nAfter that, well,\nyour physical host will support it,\n\n740\n00:34:59,250 --> 00:35:00,580\nWindows server 2012 supports it.\n\n741\n00:35:01,730 --> 00:35:05,030\nAnd then you just go into\nyour virtual machines and\n\n742\n00:35:05,030 --> 00:35:07,230\nyou tell them that they're\ngoing to be attached to that.\n\n743\n00:35:07,230 --> 00:35:08,830\nThey're going to have that exposure.\n\n744\n00:35:09,900 --> 00:35:13,360\nI'll show you the basics, I actually don't\nhave a fiber channel sand sitting here for\n\n745\n00:35:13,360 --> 00:35:16,090\nme to use, but let me show you\nthe basics of what it would be like.\n\n746\n00:35:16,090 --> 00:35:17,860\nI'll take my lab machine here.\n\n747\n00:35:17,860 --> 00:35:20,280\nSo this is my lab machine.\n\n748\n00:35:20,280 --> 00:35:23,800\nAnd let's just assume for a moment that\nI have an actual Fibre Channel HBA\n\n749\n00:35:23,800 --> 00:35:27,300\nin here that is NPIV-capable, all right?\n\n750\n00:35:27,300 --> 00:35:31,570\nWhat I do is, step one I go over\nhere in my Hyper-V manager and\n\n751\n00:35:31,570 --> 00:35:35,060\nsee how I've got my virtual switch\nmanager for creating virtual networks.\n\n752\n00:35:35,060 --> 00:35:37,752\nI also have my virtual SAN manager.\n\n753\n00:35:37,752 --> 00:35:41,830\nAnd that's where we define\nthese virtual fiber settings.\n\n754\n00:35:41,830 --> 00:35:46,540\nSo I'll go in there, and\nI am gonna create a new fiber channel SAN.\n\n755\n00:35:46,540 --> 00:35:50,250\nSo I'll create one, and I'm gonna create\nthis one, and this one is gonna be for\n\n756\n00:35:50,250 --> 00:35:52,040\nmy, what was my server called?\n\n757\n00:35:52,040 --> 00:35:52,920\nWhat did I call that?\n\n758\n00:35:52,920 --> 00:35:56,520\nWindows server 2012, or we'll do VMO1,\nthat guys right up there.\n\n759\n00:35:56,520 --> 00:35:59,870\nSo I'm gonna call this one VMO1, or\n\n760\n00:35:59,870 --> 00:36:03,265\nI might wanna just remember\nthis like SAN-VMO.\n\n761\n00:36:03,265 --> 00:36:07,430\nNw see how it's warning me, no fiber\nchannel ports are found on this computer?\n\n762\n00:36:07,430 --> 00:36:10,670\nI don't actually have an NPIV adapter,\nbut if I did it would show it,\n\n763\n00:36:10,670 --> 00:36:13,840\nif I had more than one I'd be able\nto pick which one I was using.\n\n764\n00:36:15,090 --> 00:36:18,195\nNow, when I define this,\nI'm gonna go and edit it and\n\n765\n00:36:18,195 --> 00:36:20,145\nsee how I've got a worldwide name here?\n\n766\n00:36:20,145 --> 00:36:22,565\nThat's the worldwide name for my host.\n\n767\n00:36:22,565 --> 00:36:25,345\nThis is what I'm connecting\nto the SAN as right now.\n\n768\n00:36:25,345 --> 00:36:29,625\nWell, when I add this,\nlet me just hit Apply,\n\n769\n00:36:29,625 --> 00:36:33,370\nit's going to create that and so now\nI've got this new Fibre Channel San, and\n\n770\n00:36:33,370 --> 00:36:37,440\nI can go on to create more of them for\neach of the different VMs.\n\n771\n00:36:37,440 --> 00:36:40,840\nOr you could have more than one VM\nattached to these things if you wanted,\n\n772\n00:36:40,840 --> 00:36:42,130\njust depends on your use.\n\n773\n00:36:42,130 --> 00:36:44,790\nEvery time I've done this, I've always\ndone a one-to-one thing, right?\n\n774\n00:36:44,790 --> 00:36:48,720\nI'm separating out the VMs, so\nI usually name them based on the VM.\n\n775\n00:36:48,720 --> 00:36:50,340\nSo I'll just add however many that I need.\n\n776\n00:36:52,080 --> 00:36:56,400\nOnce that's done, now I can go and\nI can take a VM like this one.\n\n777\n00:36:57,520 --> 00:37:00,110\nI can go into its settings and\n\n778\n00:37:00,110 --> 00:37:03,270\nin its hardware,\nlook at the hardware that I can add.\n\n779\n00:37:03,270 --> 00:37:07,060\nThere's a fiber channel adapter right\nthere that I can add to it, and\n\n780\n00:37:07,060 --> 00:37:09,150\nit's letting me know that this\nmachine is part of a cluster,\n\n781\n00:37:09,150 --> 00:37:12,070\nso it's not gonna let me do it,\nbut let me take this guy.\n\n782\n00:37:12,070 --> 00:37:15,170\nYou can do this in a cluster, just all\nyour cluster notes have to have that\n\n783\n00:37:15,170 --> 00:37:17,600\nmatching configuration, so\nthat's why it's complaining.\n\n784\n00:37:17,600 --> 00:37:18,180\nI'll do this one.\n\n785\n00:37:18,180 --> 00:37:19,690\nThis one's not in a cluster.\n\n786\n00:37:19,690 --> 00:37:24,150\nSo on this one, If I go into its hardware\nthere's that fiber channel adapter.\n\n787\n00:37:24,150 --> 00:37:27,600\nI can add that in and\nit asks me to pick which VSAN I want.\n\n788\n00:37:27,600 --> 00:37:30,910\nI'm gonna put this one on SAN VMO2.\n\n789\n00:37:30,910 --> 00:37:33,970\nAnd then you can edit the address.\n\n790\n00:37:33,970 --> 00:37:37,180\nIt's gonna dynamically generate\na world wide name for it.\n\n791\n00:37:37,180 --> 00:37:40,470\nAnd that may be fine for me or\nI might wanna manually put one in so\n\n792\n00:37:40,470 --> 00:37:42,280\nI can edit it and put it in specifically.\n\n793\n00:37:43,670 --> 00:37:48,600\nOnce that's set, now my system will\nbe aware that there's a fiber channel\n\n794\n00:37:48,600 --> 00:37:53,020\nSAN out there that it can connect to it,\nand it'll have its own world wide name.\n\n795\n00:37:53,020 --> 00:37:56,360\nNow it's gonna look to that SAN, and say\nhere's my world wide name, what do I get?\n\n796\n00:37:56,360 --> 00:37:59,540\nAnd the SAN's gonna present\na list of LUNs to it\n\n797\n00:37:59,540 --> 00:38:03,000\nthat are mapped to that world wide name,\nright?\n\n798\n00:38:03,000 --> 00:38:05,670\nNow once that's on there, it's present but\n\n799\n00:38:05,670 --> 00:38:09,580\nsee how when I look at my ID\ncontroller here, I see hard drives.\n\n800\n00:38:09,580 --> 00:38:11,640\nThere's a hard drive.\n\n801\n00:38:11,640 --> 00:38:14,990\nBut when I look at the fiber channels SAN,\nI don't see any hard drives.\n\n802\n00:38:14,990 --> 00:38:19,250\nThe reason is when my system boots\nit's gonna query the SAN for\n\n803\n00:38:19,250 --> 00:38:22,390\nthose different drives, and it's gonna\nlearn about them in the guest OS.\n\n804\n00:38:23,770 --> 00:38:25,050\nWhat if I don't have a guest OS though?\n\n805\n00:38:26,250 --> 00:38:28,910\nIf I don't have a guest OS if I\nwanna install an operating system is\n\n806\n00:38:28,910 --> 00:38:29,850\nthat gonna work?\n\n807\n00:38:29,850 --> 00:38:31,240\nWell, I can boot off a DVD.\n\n808\n00:38:31,240 --> 00:38:35,110\nOr I boot off my windows installation\nmedia, it will see the fiber channel\n\n809\n00:38:35,110 --> 00:38:38,320\nsaying it'll see the LUN so\nI can do my installation from there.\n\n810\n00:38:38,320 --> 00:38:40,470\nOr you can always pre-prepare the disk.\n\n811\n00:38:40,470 --> 00:38:45,030\nYou can attach it to the host, format it,\nlabel it, whatever, then disconnect it\n\n812\n00:38:45,030 --> 00:38:48,170\nfrom the host, and switch it over to\nthe worldwide name that's tied to this VM.\n\n813\n00:38:48,170 --> 00:38:50,350\nSo there's a few different ways\nyou can go about that, right.\n\n814\n00:38:51,620 --> 00:38:53,140\nBut that's gonna attach it, and\n\n815\n00:38:53,140 --> 00:38:56,900\nnow it's got access to it with\nits own unique worldwide name.\n\n816\n00:38:56,900 --> 00:38:58,470\nI can now go to my SAN software,\n\n817\n00:38:58,470 --> 00:39:02,830\nwhatever SAN software I'm using, create my\nLUNS, and map them that worldwide name.\n\n818\n00:39:02,830 --> 00:39:05,470\nAnd only this VM will see them.\n\n819\n00:39:05,470 --> 00:39:06,060\nThe other VMs will not.\n\n820\n00:39:07,710 --> 00:39:10,490\nSo great way to partition that out and\nseparate it out.\n\n821\n00:39:10,490 --> 00:39:14,660\nThe fiber channel HBAs,\nthose host bus adapters, that is the most\n\n822\n00:39:14,660 --> 00:39:18,030\ncommon connectivity method to a SAN cuz\nyou get the best performance out of it.\n\n823\n00:39:18,030 --> 00:39:19,990\nThere's other methods that are cheaper.\n\n824\n00:39:19,990 --> 00:39:22,840\nThere's other methods that can\nscale larger, faster, whatever.\n\n825\n00:39:22,840 --> 00:39:26,150\nBut they're all slower, the Fibre\nChannel SANs they're fast, right?\n\n826\n00:39:26,150 --> 00:39:27,530\nIt gives you a good reliable connection.\n\n827\n00:39:29,730 --> 00:39:33,310\nAll right, so that's basically\nwhat virtual Fibre Channel is,\n\n828\n00:39:33,310 --> 00:39:36,240\njust remember for the exam you do\nhave to have HBAs to support it and\n\n829\n00:39:36,240 --> 00:39:39,910\nNPIV is that feature that you'll be\nlooking for, they've gotta support that.\n\n830\n00:39:39,910 --> 00:39:42,910\nIf they do, then it's pretty\neasy to deploy right there,\n\n831\n00:39:42,910 --> 00:39:45,140\njust a couple of settings\nright in the Hyper-V manager.\n\n832\n00:39:45,140 --> 00:39:47,745\nAnd the systems center virtual\nmachine manager supports this too,\n\n833\n00:39:47,745 --> 00:39:49,400\nit's got a little wizard you run through.\n\n834\n00:39:49,400 --> 00:39:53,344\nNice thing with SCVMM, if it's a cluster,\nit takes care of applying\n\n835\n00:39:53,344 --> 00:39:58,051\nthe configuration to all of your cluster\nnodes, so it knocks them all out at once.\n\n836\n00:39:58,051 --> 00:40:01,271\nThat's really the big\nbenefit of the SCVMM.\n\n837\n00:40:01,271 --> 00:40:03,080\nThe SCVMM it doesn't really do any magic.\n\n838\n00:40:03,080 --> 00:40:05,970\nIt doesn't do anything you couldnt\ndo in the Hyper-V manager already.\n\n839\n00:40:05,970 --> 00:40:06,550\n>> Right.\n>> But\n\n840\n00:40:06,550 --> 00:40:08,530\nif your managing a bunch of servers,\nit does it all at once and\n\n841\n00:40:08,530 --> 00:40:09,510\nthat's worth it's weight in gold.\n\n842\n00:40:11,955 --> 00:40:13,745\n>> Absolutely.\nSo what if we can't afford that\n\n843\n00:40:13,745 --> 00:40:14,715\nfiber channel?\n\n844\n00:40:14,715 --> 00:40:15,465\n>> All right now.\n\n845\n00:40:15,465 --> 00:40:18,375\nThat all, what I just talked about there,\nthat's production world.\n\n846\n00:40:18,375 --> 00:40:21,375\nThat's stuff you do in\na production environment.\n\n847\n00:40:21,375 --> 00:40:24,495\nBut in a tester lab, you're not going\nto spring for paying for all that.\n\n848\n00:40:24,495 --> 00:40:25,335\nWell maybe you are.\n\n849\n00:40:25,335 --> 00:40:28,285\nIn some environments if you want\na realistic test environment you\n\n850\n00:40:28,285 --> 00:40:28,975\nmight spring for all that.\n\n851\n00:40:30,225 --> 00:40:32,700\nBut most of us are going to settle for\nsomething less it turns out.\n\n852\n00:40:32,700 --> 00:40:35,750\nAt the less expensive option out there,\nI've always been told to say that.\n\n853\n00:40:35,750 --> 00:40:38,950\nDon't say it's cheap because then people\nthink it's garbage it's less expensive.\n\n854\n00:40:38,950 --> 00:40:42,840\nSo, the less expensive option is ICSI.\n\n855\n00:40:42,840 --> 00:40:44,110\nMike, you love ICSI right?\n\n856\n00:40:44,110 --> 00:40:45,986\nIt's your favorite.\n\n857\n00:40:45,986 --> 00:40:47,380\n>> Oh yeah, yeah.\n\n858\n00:40:47,380 --> 00:40:49,390\n>> It's got it's place,pros and cons.\n\n859\n00:40:49,390 --> 00:40:53,970\nWith ICSI what you're doing Is you're\ntaking iSCSI based communications and\n\n860\n00:40:53,970 --> 00:40:56,230\nyou're wrapping it up\nin a tcpip packet and\n\n861\n00:40:56,230 --> 00:40:57,830\nthrowing it on a traditional\nethernet network.\n\n862\n00:40:58,920 --> 00:41:02,432\nThat means you can use a traditional\nethernet network for your storage.\n\n863\n00:41:02,432 --> 00:41:04,350\n>> I don't have to go out and\nbuy the fiber and all that and\n\n864\n00:41:04,350 --> 00:41:06,130\nthose special hba's and things like that.\n\n865\n00:41:06,130 --> 00:41:08,430\nI probably have the equipment\nI need already.\n\n866\n00:41:08,430 --> 00:41:10,350\nTo set up this iSCSI connection.\n\n867\n00:41:10,350 --> 00:41:13,090\nBut the problem is it's got the overhead,\nright?\n\n868\n00:41:13,090 --> 00:41:15,336\nBecause we're dumping it\non top of that TCP/IP,\n\n869\n00:41:15,336 --> 00:41:19,270\nI've got to deal with all the overhead\nthat comes along with TCP/IP as well as,\n\n870\n00:41:19,270 --> 00:41:22,140\ndepending on how I lay out my network,\npossibly\n\n871\n00:41:22,140 --> 00:41:25,640\ncongestion from other types of traffic\nthat are going on that TCP/IP network.\n\n872\n00:41:26,820 --> 00:41:30,270\n>> You know, if you have\na Gigabit Ethernet network adapter, right?\n\n873\n00:41:30,270 --> 00:41:34,520\nThat adapter could handle up to 1\ngigabit per second of communications,\n\n874\n00:41:34,520 --> 00:41:35,036\nsounds like a lot.\n\n875\n00:41:35,036 --> 00:41:38,430\nBut, you've got TCP/IP overhead.\n\n876\n00:41:38,430 --> 00:41:41,630\nYou've got the header and all that, you've\ngot a maximum transmission unit size,\n\n877\n00:41:41,630 --> 00:41:43,780\nyou've got CRCs that are calculated on it.\n\n878\n00:41:43,780 --> 00:41:47,660\nIn reality, if you ran a crossover\ncable between two systems and\n\n879\n00:41:47,660 --> 00:41:52,100\njust started doing TCP/IP communications,\nyou're lucky if you can get half that.\n\n880\n00:41:52,100 --> 00:41:53,410\nYou're lucky if you can get 500 megabit.\n\n881\n00:41:54,420 --> 00:41:57,440\nThen, stack on top of that,\nthat it's a shared network, and so\n\n882\n00:41:57,440 --> 00:42:00,390\nyou're probably competing against other\nmachines that are on your network.\n\n883\n00:42:00,390 --> 00:42:05,090\nAnd if that's the case, now you're getting\neven less throughput and bandwidth, right?\n\n884\n00:42:05,090 --> 00:42:09,440\nSo it's not necessarily ideal for\ngetting good straight communications\n\n885\n00:42:09,440 --> 00:42:12,710\nversus the fiber channel SAN where\nyou're sending those communications\n\n886\n00:42:12,710 --> 00:42:16,590\nright across the fiber, you're not doing\nthe translations, it's built for storage,\n\n887\n00:42:16,590 --> 00:42:21,000\nyou get huge performance gains.\n\n888\n00:42:21,000 --> 00:42:23,670\nI mentioned MT's,\nmaximum transition units.\n\n889\n00:42:23,670 --> 00:42:26,500\nWhen you communicate over\na standard ethernet network\n\n890\n00:42:26,500 --> 00:42:28,550\nmost people have an MTO of 1500 bytes.\n\n891\n00:42:28,550 --> 00:42:35,300\n1500 bytes is not a ton of data, 1.5 k,\n1.5 kilobytes not a huge amount of data.\n\n892\n00:42:36,330 --> 00:42:40,010\nSo when you're sending a file across\nnetwork or booting a virtual machine or\n\n893\n00:42:40,010 --> 00:42:42,320\nreading all that data off the hard drive,\n\n894\n00:42:42,320 --> 00:42:46,520\nevery 1.5k it's having to\nbreak that up into a piece,\n\n895\n00:42:46,520 --> 00:42:49,980\ncalculate a checks on board, stick a\nheader on it and throw it on the network.\n\n896\n00:42:49,980 --> 00:42:51,120\nAnd then you receive it and\n\n897\n00:42:51,120 --> 00:42:53,810\nyou've got to reassemble it on your end,\nthat's a lot of overhead.\n\n898\n00:42:55,160 --> 00:42:59,170\nSo if you're going to be deploying\niSCSI It should just be on your list,\n\n899\n00:42:59,170 --> 00:43:03,280\none of the things that you need to,\nis not use a regular network adapter, but\n\n900\n00:43:03,280 --> 00:43:07,760\ninstead purchase a dedicated iSCSI HBA.\n\n901\n00:43:07,760 --> 00:43:09,650\nThey sell iSCSI host bus adapters.\n\n902\n00:43:09,650 --> 00:43:11,460\nThey look just like network adapters.\n\n903\n00:43:11,460 --> 00:43:13,910\nYou can buy a normal network adapter for\nfifty bucks.\n\n904\n00:43:13,910 --> 00:43:17,200\nYou get a really good network adapter for\nfifty dollars.\n\n905\n00:43:17,200 --> 00:43:19,730\nBut an iSCSI network adapter\nwe'l usually be like four or\n\n906\n00:43:19,730 --> 00:43:21,800\nfive hundred dollars if not 1,000.\n\n907\n00:43:21,800 --> 00:43:24,100\nAnd people look at it and\nare like $1,000 why would I pay $1,000 for\n\n908\n00:43:24,100 --> 00:43:25,930\nwhat should be $100 or\nsomething like that.\n\n909\n00:43:25,930 --> 00:43:28,820\n>> The whole point of this is that I can\njust dump it on my normal TCIP network.\n\n910\n00:43:28,820 --> 00:43:31,020\nI don't have to buy any special equipment.\n\n911\n00:43:31,020 --> 00:43:37,050\n>> But what that ISCSI HPA does is it has\nhardware on it specifically designed for\n\n912\n00:43:37,050 --> 00:43:40,770\nreassembling packets efficiently and\ndoing it in hardware, and\n\n913\n00:43:40,770 --> 00:43:43,290\nnot making your operating\nsystem do it in software.\n\n914\n00:43:43,290 --> 00:43:46,090\nOn a traditional network adapter your\noperating system will do a lot of that in\n\n915\n00:43:46,090 --> 00:43:49,570\nsoftware, and that creates\na performance hit, first off, right?\n\n916\n00:43:49,570 --> 00:43:52,480\nAnd secondly it creates latency\nwhile it does those translations.\n\n917\n00:43:52,480 --> 00:43:54,660\nA hardware HP will do it much better.\n\n918\n00:43:54,660 --> 00:43:58,510\nIt'll also ensure that you have\nwhat's called jumbo frames.\n\n919\n00:43:58,510 --> 00:44:02,260\nA jumbo frame is where instead of breaking\nit up into 1500 byte segments, or frames,\n\n920\n00:44:02,260 --> 00:44:03,924\nthey're called frames.\n\n921\n00:44:03,924 --> 00:44:10,020\nSo, instead of doing that,\nit's going to do it in 9,000 byte frames.\n\n922\n00:44:10,020 --> 00:44:14,305\nSo now, we're use to have a CRC every\n1,500 bytes, if you have a CRC every\n\n923\n00:44:14,305 --> 00:44:19,470\n9,000, that's one CRC for\nevery 6 frames under the old model.\n\n924\n00:44:19,470 --> 00:44:20,630\nIt's much more efficient.\n\n925\n00:44:21,640 --> 00:44:23,580\nThese are things that\nimprove that performance.\n\n926\n00:44:23,580 --> 00:44:27,270\nYour HBA or your nick,\nit has to support it.\n\n927\n00:44:27,270 --> 00:44:30,920\nYour switch has to support it, and\nyour iSCSI SAN has to support it.\n\n928\n00:44:30,920 --> 00:44:32,350\nBut they almost all do today.\n\n929\n00:44:32,350 --> 00:44:32,910\n>> Right.\n\n930\n00:44:32,910 --> 00:44:34,420\n>> So\nas long as you've got that support and\n\n931\n00:44:34,420 --> 00:44:37,820\nchain you can get that\njumbo frame configuration.\n\n932\n00:44:37,820 --> 00:44:39,370\nThese are all things that\nimprove that performance.\n\n933\n00:44:40,750 --> 00:44:43,120\nBut I'll tell you guys,\nfrom my own experience, and\n\n934\n00:44:43,120 --> 00:44:45,890\nfrom anybody on the internet,\njust do a Google search you'll see this.\n\n935\n00:44:45,890 --> 00:44:47,910\n>> iSCSI is not really for production use.\n\n936\n00:44:47,910 --> 00:44:49,720\nAll right, if you're a small shop.\n\n937\n00:44:49,720 --> 00:44:52,685\nWe have a iSCSI CN that we\nuse here in the studio.\n\n938\n00:44:52,685 --> 00:44:56,210\nBecause performance isn't our concern with\nthat, we just need a bunch of storage.\n\n939\n00:44:56,210 --> 00:45:01,340\nBut if performance is your concern,\niSCSI's never going to do it.\n\n940\n00:45:01,340 --> 00:45:06,260\nEven if you deploy a dedicated\nnetwork just for iSCSI, it's never\n\n941\n00:45:06,260 --> 00:45:08,730\ngoing to come close to what fiber\nchannel can do, it's a huge difference.\n\n942\n00:45:09,980 --> 00:45:11,810\nSo for lab and test or\n\n943\n00:45:11,810 --> 00:45:16,190\nbranch offices where performance is not\nthe greatest concern ISCSI works great.\n\n944\n00:45:16,190 --> 00:45:18,470\nBut for your headquarters,\nfor your primary data, for\n\n945\n00:45:18,470 --> 00:45:23,340\nvirtual machine storage ISCSI will work\nyou can do it, but it's not great for\n\n946\n00:45:23,340 --> 00:45:24,950\nperformance you'll be better\noff with fiber channel.\n\n947\n00:45:26,090 --> 00:45:31,430\nAnd remember on the exam it's almost like\nan unwritten thing, as you read a question\n\n948\n00:45:31,430 --> 00:45:34,770\nin your mind translate it to\nsay money is no object, right?\n\n949\n00:45:34,770 --> 00:45:37,185\nJust pretend that sentence\nis at the end of every one.\n\n950\n00:45:37,185 --> 00:45:38,430\nBecause that's what Microsoft is thinking,\n\n951\n00:45:38,430 --> 00:45:41,210\nis that they're not saying,\nwhat's the most economical?\n\n952\n00:45:41,210 --> 00:45:44,300\nThey're saying, what's the best\nsolution for this environment?\n\n953\n00:45:44,300 --> 00:45:49,129\nAnd often times the best solution requires\nspending a lot more money with Microsoft.\n\n954\n00:45:49,129 --> 00:45:51,750\nThat was the old joke\nif you have to guess.\n\n955\n00:45:51,750 --> 00:45:55,380\nIf you ever have to guess on a question\non a Microsoft exam, just look at\n\n956\n00:45:55,380 --> 00:45:58,910\nthe answers, and whichever answer involves\nspending more money with Microsoft,\n\n957\n00:45:58,910 --> 00:46:01,453\nthat's the right answer.\n\n958\n00:46:01,453 --> 00:46:05,160\n>> I remember when you first told me that,\nand it holds true for the most part.\n\n959\n00:46:05,160 --> 00:46:06,520\nIt really does.\n\n960\n00:46:06,520 --> 00:46:07,720\n>> It's a rare question, it doesn't.\n\n961\n00:46:07,720 --> 00:46:11,920\nAll right, so those are some of\nthe things you need to know about iSCSI.\n\n962\n00:46:11,920 --> 00:46:14,390\nWe've covered it in depth in other\n\n963\n00:46:14,390 --> 00:46:17,570\nshows I don't want to dump you\ntoo far into configuration.\n\n964\n00:46:17,570 --> 00:46:18,780\nJust remember with Windows Server 2012,\n\n965\n00:46:18,780 --> 00:46:22,130\nwe can be an ISCSI client\nthat works out great.\n\n966\n00:46:22,130 --> 00:46:24,590\nWe can be an ISCSI target also,\nwhich is a server.\n\n967\n00:46:24,590 --> 00:46:27,400\nThat role is part of the file\nservices role in Windows Server 2012.\n\n968\n00:46:27,400 --> 00:46:29,130\nSo you can do that.\n\n969\n00:46:29,130 --> 00:46:33,400\nThere is dedicated hardware out there\nthat can do ISCSI to all options.\n\n970\n00:46:33,400 --> 00:46:34,810\nThe one we want to think about though,\n\n971\n00:46:34,810 --> 00:46:39,640\nthe one thing we need to remember is that,\nif I have a virtual machine, and\n\n972\n00:46:39,640 --> 00:46:44,240\nit needs some storage, there's two\nways I can attach that storage.\n\n973\n00:46:44,240 --> 00:46:48,500\nI can attach the iSCSI storage to my\nhost and then put a VHD on there,\n\n974\n00:46:48,500 --> 00:46:51,130\nand attach the VHD to the virtual machine.\n\n975\n00:46:51,130 --> 00:46:53,210\nAll right, that's one way to go about it.\n\n976\n00:46:53,210 --> 00:46:55,860\nSo the virtual machine doesn't\neven know there's iSCSI involved.\n\n977\n00:46:55,860 --> 00:46:58,230\nIt just sees the virtual hard drive,\nthe host is doing the connection.\n\n978\n00:46:59,270 --> 00:47:02,540\nThe other option is to\nhave the virtual machine\n\n979\n00:47:03,760 --> 00:47:07,670\nrun its own iSCSI initiator and\nconnect directly to the iSCSI SAN.\n\n980\n00:47:07,670 --> 00:47:08,390\nYou can do that too.\n\n981\n00:47:09,730 --> 00:47:11,910\nThere's positives and\nnegatives to both models.\n\n982\n00:47:13,240 --> 00:47:15,190\nIf you have iSCSI connected to the host,\n\n983\n00:47:16,190 --> 00:47:18,340\nthe biggest positive is\nit's transparent to the VM.\n\n984\n00:47:18,340 --> 00:47:21,540\nThe VM doesn't know about it,\nit's invisible, right.\n\n985\n00:47:21,540 --> 00:47:24,530\nThe second advantage is we can use\none of those dedicated HBA's and\n\n986\n00:47:24,530 --> 00:47:25,400\nwe get better performance.\n\n987\n00:47:26,410 --> 00:47:29,030\nWith a virtual machine,\nyou can't use a dedicated HB.\n\n988\n00:47:29,030 --> 00:47:30,830\nYou can't add that hardware in there\n>> Right.\n\n989\n00:47:30,830 --> 00:47:32,180\n>> To be able to do\nthe advanced calculations.\n\n990\n00:47:33,490 --> 00:47:37,240\nThe other thing is, your virtual\nmachine can't boot from iSCSI.\n\n991\n00:47:37,240 --> 00:47:42,620\nIf the iSCSI adapter is connecting\ninside of the VM itself, it's\n\n992\n00:47:42,620 --> 00:47:45,845\ngot to boot its operating system first\nbefore it can run the iSCSI initiator.\n\n993\n00:47:45,845 --> 00:47:48,475\nSo that means you can't boot from my SCSI.\n\n994\n00:47:48,475 --> 00:47:50,893\nBut if it's the host that's\nconnecting to iSCSI,\n\n995\n00:47:50,893 --> 00:47:54,335\nthe VM doesn't even know about it,\nand it can boot from iSCSI just fine.\n\n996\n00:47:54,335 --> 00:47:55,486\nWe do that all the time\nhere in the studio.\n\n997\n00:47:55,486 --> 00:47:56,746\n>> Absolutely.\n\n998\n00:47:56,746 --> 00:48:01,526\n>> So difference solutions there If I just\nwanna provide raw data storage to a VM.\n\n999\n00:48:01,526 --> 00:48:04,150\nYeah I can use the iSCSI\ninitiator in the VM.\n\n1000\n00:48:04,150 --> 00:48:05,880\nThe performance is really not that bad.\n\n1001\n00:48:05,880 --> 00:48:09,570\nMicrosoft intercepts that and\noptimizes it so it's really not that bad.\n\n1002\n00:48:09,570 --> 00:48:11,000\nBut you do lose some functionality.\n\n1003\n00:48:11,000 --> 00:48:14,130\nYou lose the ability to do\nsome things like jumbo frames.\n\n1004\n00:48:14,130 --> 00:48:16,440\nThey get messed up when\nit's inside of a VM.\n\n1005\n00:48:16,440 --> 00:48:19,130\nAnd then the actual HVA itself,\nthat's just not there.\n\n1006\n00:48:20,360 --> 00:48:22,210\nPractice in lab, you can do it.\n\n1007\n00:48:22,210 --> 00:48:25,150\nOtherwise probably not.\n\n1008\n00:48:25,150 --> 00:48:28,060\nOne scenario where you\nmight choose to do it is,\n\n1009\n00:48:28,060 --> 00:48:31,950\nlet's say that you want to bring up 2 VM's\nand cluster them together, all right.\n\n1010\n00:48:31,950 --> 00:48:33,850\nThere's not a lot of need for\nthat anymore.\n\n1011\n00:48:33,850 --> 00:48:36,110\nBut maybe you got some specific need,\nmaybe you're just learning.\n\n1012\n00:48:36,110 --> 00:48:37,920\nHey I want to learn more about clusters,\ncan I whip up 2 VM's and\n\n1013\n00:48:37,920 --> 00:48:38,805\ncluster them together?\n\n1014\n00:48:38,805 --> 00:48:40,430\nWell they're going to need shared storage.\n\n1015\n00:48:41,580 --> 00:48:46,390\nYou can bring up a third VM that\nwas acting as an iSCSI target.\n\n1016\n00:48:46,390 --> 00:48:47,820\nAnd you can take your first 2 VMs.\n\n1017\n00:48:47,820 --> 00:48:52,100\nAnd in your OS have them\nconnect to that iSCSI target.\n\n1018\n00:48:52,100 --> 00:48:54,810\nAnd then they would see shared storage.\n\n1019\n00:48:54,810 --> 00:48:55,860\nAnd you'd be able to add that up.\n\n1020\n00:48:55,860 --> 00:48:59,020\nNow it requires a lot of\nextra effort to do that.\n\n1021\n00:48:59,020 --> 00:49:02,590\nAnd Microsoft's actually given us a new\ntechnology inside of server 2012 that\n\n1022\n00:49:02,590 --> 00:49:04,050\nmakes it so we don't need that anymore.\n\n1023\n00:49:05,070 --> 00:49:08,970\nThere's something called a shared VHDX.\n\n1024\n00:49:08,970 --> 00:49:12,410\nIn Windows server 2012,\nyou can create a virtual hard drive.\n\n1025\n00:49:12,410 --> 00:49:14,600\nAnd you can attach it to more than one VM.\n\n1026\n00:49:14,600 --> 00:49:15,360\nAnd it's pretty neat.\n\n1027\n00:49:15,360 --> 00:49:17,400\nLet me show you what I mean.\n\n1028\n00:49:17,400 --> 00:49:20,500\nIf I go here in,\nthis is my little hyper V server.\n\n1029\n00:49:20,500 --> 00:49:23,860\nAnd let's say that I want to learn\nsomething about clustering, right?\n\n1030\n00:49:23,860 --> 00:49:26,530\nSo I'm just gonna create a Cluster Node 1.\n\n1031\n00:49:26,530 --> 00:49:29,740\nSo I'm just gonna whip up a quick cluster.\n\n1032\n00:49:29,740 --> 00:49:30,930\nI'll do gen 2 hardware.\n\n1033\n00:49:30,930 --> 00:49:32,960\nI'm just gonna go with the default,\nnothing too special here.\n\n1034\n00:49:32,960 --> 00:49:35,060\nLet's get that created.\n\n1035\n00:49:35,060 --> 00:49:36,250\nI'm accepting my by default.\n\n1036\n00:49:36,250 --> 00:49:37,220\nSo there's cluster node 1.\n\n1037\n00:49:37,220 --> 00:49:39,630\nAnd then I'll create cluster node 2.\n\n1038\n00:49:39,630 --> 00:49:44,570\nRight so cluster node 2.\n\n1039\n00:49:44,570 --> 00:49:47,190\nOh shoot, I went to gen 2 on one of them\n>> [LAUGH]\n\n1040\n00:49:47,190 --> 00:49:47,710\n>> Gen 1 on the other.\n\n1041\n00:49:47,710 --> 00:49:48,590\nThat doesn't matter.\n\n1042\n00:49:48,590 --> 00:49:51,760\nAll right, so see how I've got\ncluster node 1 and cluster node 2.\n\n1043\n00:49:51,760 --> 00:49:54,880\nI want to create some kind of\ncluster inside of these VMs.\n\n1044\n00:49:54,880 --> 00:49:56,300\nI need shared storage.\n\n1045\n00:49:56,300 --> 00:49:58,810\n>> Right\n>> My old solution was I'll whip up\n\n1046\n00:49:58,810 --> 00:50:00,505\nanother VM, to be an iSCSI target.\n\n1047\n00:50:00,505 --> 00:50:02,380\nMm-hm\n>> I'll install the OS's here and\n\n1048\n00:50:02,380 --> 00:50:04,720\nI'll get these two guys to point\nback to that last SCSI connector.\n\n1049\n00:50:04,720 --> 00:50:05,365\nAnd there we go.\n\n1050\n00:50:05,365 --> 00:50:06,080\n>> Mm-hm\n>> But\n\n1051\n00:50:06,080 --> 00:50:07,440\nit required another VM to power that.\n\n1052\n00:50:07,440 --> 00:50:08,620\n>> Right.\n\n1053\n00:50:08,620 --> 00:50:11,470\n>> Well now what I can do is\nI can take one of the nodes.\n\n1054\n00:50:11,470 --> 00:50:12,815\nSo, I'm gonna go here\nin to cluster node 1.\n\n1055\n00:50:13,890 --> 00:50:15,600\nAnd I'll go down to its iSCSI controller.\n\n1056\n00:50:15,600 --> 00:50:16,710\nI'm gonna add another drive.\n\n1057\n00:50:18,100 --> 00:50:19,260\nAnd I'll go ahead.\n\n1058\n00:50:19,260 --> 00:50:20,609\nAnd do a new virtual hard disk.\n\n1059\n00:50:21,900 --> 00:50:24,420\nAnd I'll call this one,\nhere I'll do dynamic [INAUDIBLE].\n\n1060\n00:50:24,420 --> 00:50:26,000\nI am going to call this shared storage.\n\n1061\n00:50:27,050 --> 00:50:30,020\nAll right.\nSo this is going to be my shared storage.\n\n1062\n00:50:30,020 --> 00:50:31,900\nAnd we'll go 500 gigabytes on this,\nwe'll go crazy.\n\n1063\n00:50:33,570 --> 00:50:35,050\nAll right.\n\n1064\n00:50:35,050 --> 00:50:37,380\nSo now I've got that\nshared storage as created.\n\n1065\n00:50:37,380 --> 00:50:38,000\n>> Okay.\n\n1066\n00:50:38,000 --> 00:50:40,530\n>> Now when I create that disk\n\n1067\n00:50:40,530 --> 00:50:44,450\nthe assumption is that it's only\ngoing to be used by this 1 machine.\n\n1068\n00:50:44,450 --> 00:50:48,160\nOnly this machine is going to use it, but\n\n1069\n00:50:48,160 --> 00:50:52,980\nwe can actually do a shared VHD,\nwhere it's attached to both machines.\n\n1070\n00:50:52,980 --> 00:50:56,790\nNow on this one,\nlets see I did gen 2 on this one, right?\n\n1071\n00:50:56,790 --> 00:50:57,770\n>> Is it the second 1?\n\n1072\n00:50:57,770 --> 00:50:59,070\nNo, the first 1 you're been to.\n\n1073\n00:50:59,070 --> 00:50:59,950\n>> Okay, good.\n\n1074\n00:50:59,950 --> 00:51:02,890\nSo on the second 1, what actually.\n\n1075\n00:51:02,890 --> 00:51:03,660\nYou know what I need to do.\n\n1076\n00:51:03,660 --> 00:51:05,700\nLet me edit this disk here.\n\n1077\n00:51:05,700 --> 00:51:07,500\nSo when I go into its settings.\n\n1078\n00:51:07,500 --> 00:51:08,460\nOh shoot.\n\n1079\n00:51:08,460 --> 00:51:09,100\nActually, you know what?\n\n1080\n00:51:09,100 --> 00:51:09,822\nI'm not seeing my setting.\n\n1081\n00:51:11,947 --> 00:51:15,302\nWhat we're supposed to see [CROSSTALK]\nwhat we're expecting to see.\n\n1082\n00:51:15,302 --> 00:51:18,990\nOh, nope, there it is, sorry I had\nto expand my little menu option.\n\n1083\n00:51:18,990 --> 00:51:19,700\nThere we go.\n\n1084\n00:51:19,700 --> 00:51:22,520\nSo I was looking for my little check\nbox here and I wasn't seeing it.\n\n1085\n00:51:22,520 --> 00:51:24,080\nI was getting worried there for a second.\n\n1086\n00:51:24,080 --> 00:51:27,270\nSo when I created that disk the assumption\nis that only this virtual machine is\n\n1087\n00:51:27,270 --> 00:51:28,450\ngonna have access to it.\n\n1088\n00:51:28,450 --> 00:51:29,910\nAnd nobody else gets access to it.\n\n1089\n00:51:29,910 --> 00:51:31,600\nThat's our normal model.\n\n1090\n00:51:31,600 --> 00:51:34,210\nBut if I wanna do a cluster,\nI need some shared storage.\n\n1091\n00:51:34,210 --> 00:51:38,540\nWell, if I expand out that drive,\nyou've got advanced features right here.\n\n1092\n00:51:38,540 --> 00:51:40,800\nAnd in my advanced features,\nsee this guy right here?\n\n1093\n00:51:40,800 --> 00:51:43,400\nEnable virtual hard disk sharing.\n\n1094\n00:51:43,400 --> 00:51:45,140\nI can turn that on.\n\n1095\n00:51:45,140 --> 00:51:48,000\nAnd this is now gonna be a shared VHDs,\nall right?\n\n1096\n00:51:49,120 --> 00:51:51,850\nI can let other virtual\nmachines attach to it.\n\n1097\n00:51:51,850 --> 00:51:54,690\nAnd so now that I've got that set,\nI'll say okay.\n\n1098\n00:51:54,690 --> 00:51:58,890\nIt's got that disk created and\nwhat's my problem here?\n\n1099\n00:51:58,890 --> 00:52:01,620\nOh, where I chose to store it\napparently doesn't support it.\n\n1100\n00:52:01,620 --> 00:52:05,260\nIf you're gonna do this it's\ngotta be on NTFS storage.\n\n1101\n00:52:05,260 --> 00:52:06,980\nAnd it's got to be somewhere.\n\n1102\n00:52:08,240 --> 00:52:09,480\n>> Shared location.\n\n1103\n00:52:09,480 --> 00:52:13,020\nYeah, so it didn't like where I put\nthat which is oh, in that public folder.\n\n1104\n00:52:13,020 --> 00:52:15,560\nSo, yeah,\nlet me change where that disk is located.\n\n1105\n00:52:17,050 --> 00:52:19,520\nWe can go ahead and\ntake the disk and move it.\n\n1106\n00:52:19,520 --> 00:52:21,180\nActually, it would probably be easier for\n\n1107\n00:52:21,180 --> 00:52:23,010\nme to just whip up another\none at this point.\n\n1108\n00:52:23,010 --> 00:52:23,990\nWe do a new one.\n\n1109\n00:52:23,990 --> 00:52:28,270\nAnd we'll put this in a CSV,\nactually am I in a?\n\n1110\n00:52:28,270 --> 00:52:30,200\nYeah this one's in a cluster.\n\n1111\n00:52:30,200 --> 00:52:32,590\nThis SCDPM server I'm\nusing is in a cluster.\n\n1112\n00:52:32,590 --> 00:52:34,620\nWhich is why it's a little\nangry at me there.\n\n1113\n00:52:34,620 --> 00:52:35,940\nSo I'll just whip up another disk.\n\n1114\n00:52:35,940 --> 00:52:38,220\nAnd this time I'll put it\nin a cluster shared volume.\n\n1115\n00:52:39,380 --> 00:52:39,880\nTuck it away.\n\n1116\n00:52:42,120 --> 00:52:45,170\nRemember when you create cluster\nshared volumes they end up in\n\n1117\n00:52:45,170 --> 00:52:48,900\nthis folder on the C\ndrive C:\\clusterstorage.\n\n1118\n00:52:48,900 --> 00:52:50,870\nAnd so I'm just gonna stick it in there.\n\n1119\n00:52:50,870 --> 00:52:53,727\nAnd so I'll call this my shared disk,\n\n1120\n00:52:53,727 --> 00:52:58,170\noh shoot, I'm picking the folder,\nnot the file.\n\n1121\n00:52:58,170 --> 00:52:59,380\nThere we go.\n\n1122\n00:52:59,380 --> 00:53:03,202\nAnd I'm going to call this my shared disk,\nthat'll make it happy.\n\n1123\n00:53:03,202 --> 00:53:06,010\nAll right.\n\n1124\n00:53:06,010 --> 00:53:09,270\nSo we'll get that created I'll have to\ngo back into my advanced settings coz\n\n1125\n00:53:09,270 --> 00:53:10,650\nthat's an all new disk now.\n\n1126\n00:53:10,650 --> 00:53:12,930\nSo my advanced settings should have reset.\n\n1127\n00:53:12,930 --> 00:53:15,216\nAnd oh,\nactually seemed to have remembered it.\n\n1128\n00:53:15,216 --> 00:53:16,577\nThat's pretty impressive.\n\n1129\n00:53:16,577 --> 00:53:17,810\n[LAUGH] So there we go.\n\n1130\n00:53:17,810 --> 00:53:21,230\nSo it remembered that I'm shared,\nit's created, and it's happy.\n\n1131\n00:53:21,230 --> 00:53:23,380\nNow, I can go to my other node.\n\n1132\n00:53:24,440 --> 00:53:26,110\nAnd I can pull up its settings.\n\n1133\n00:53:27,450 --> 00:53:29,480\nAnd under its disk.\n\n1134\n00:53:29,480 --> 00:53:33,890\nI can go to iSCSI Controller,\nnot iSCSI, just regular SCSI.\n\n1135\n00:53:33,890 --> 00:53:35,020\nI can add a disk.\n\n1136\n00:53:35,020 --> 00:53:39,440\nAnd for the virtual hard disk,\nI can browse and pick that other disk.\n\n1137\n00:53:39,440 --> 00:53:40,000\nRight?\n\n1138\n00:53:40,000 --> 00:53:41,980\nI need to browse to that CSV.\n\n1139\n00:53:41,980 --> 00:53:43,400\nThat cluster shared volume that I made.\n\n1140\n00:53:43,400 --> 00:53:44,970\nSo I'm just gonna get back out into here.\n\n1141\n00:53:44,970 --> 00:53:46,530\nAnd we'll browse in.\n\n1142\n00:53:46,530 --> 00:53:49,040\nAnd pick it.\nNow, normally it would complain and say,\n\n1143\n00:53:49,040 --> 00:53:51,280\nno, that's in use by another system.\n\n1144\n00:53:51,280 --> 00:53:54,040\nBut here, it's a shared disk.\n\n1145\n00:53:54,040 --> 00:53:55,210\nIt's gonna recognize that.\n\n1146\n00:53:55,210 --> 00:53:59,790\nI'm gonna enable that option here too so\nthat it knows that it's shared.\n\n1147\n00:53:59,790 --> 00:54:01,800\nAnd now it's attached to both of them.\n\n1148\n00:54:01,800 --> 00:54:05,370\nCluster node 1 and\ncluster node 2 both see that VHDX.\n\n1149\n00:54:05,370 --> 00:54:06,950\nIt's on a cluster shared volume.\n\n1150\n00:54:06,950 --> 00:54:09,700\nThat's what exposes\nthe view to both of them.\n\n1151\n00:54:09,700 --> 00:54:10,920\nAnd now they can boot up.\n\n1152\n00:54:10,920 --> 00:54:13,445\nAnd I can create a cluster\non top of my cluster.\n\n1153\n00:54:13,445 --> 00:54:16,560\n>> [LAUGH]\n>> Kind of fun or somewhat pointless.\n\n1154\n00:54:16,560 --> 00:54:17,890\n>> Whole bunch of clusters.\n\n1155\n00:54:17,890 --> 00:54:21,330\n>> In a lab or a test environment\nwhere you're experimenting with\n\n1156\n00:54:21,330 --> 00:54:23,660\nbuilding a cluster and\ntweaking quorum settings.\n\n1157\n00:54:23,660 --> 00:54:26,150\nYou don't want to do that\non your production cluster.\n\n1158\n00:54:26,150 --> 00:54:26,750\n>> No.\n\n1159\n00:54:26,750 --> 00:54:27,380\n>> And you don't want to go out.\n\n1160\n00:54:27,380 --> 00:54:29,340\nAnd buy a bunch of hardware\nto build another cluster.\n\n1161\n00:54:29,340 --> 00:54:31,160\n>> Exactly, it gets a little expensive.\n\n1162\n00:54:31,160 --> 00:54:33,030\n>> Here you can mock it up really easy.\n\n1163\n00:54:33,030 --> 00:54:35,370\nCalled a shared VHDX and\n\n1164\n00:54:35,370 --> 00:54:38,280\nmakes it where we can do that\nshared storage between the two.\n\n1165\n00:54:38,280 --> 00:54:41,890\nAs opposed to doing like\na separate iSCSI target.\n\n1166\n00:54:41,890 --> 00:54:44,430\nYou can still do the separate\nISCSI target and go that way.\n\n1167\n00:54:44,430 --> 00:54:47,120\nBut this'll actually get you\na lot better performance.\n\n1168\n00:54:47,120 --> 00:54:50,870\nSo anywhere that you're using\na shared iSCSI target right now,\n\n1169\n00:54:50,870 --> 00:54:53,300\nyou should probably look into\nconverting that over to a shared VHDX.\n\n1170\n00:54:53,300 --> 00:54:54,420\nYou'll get a better performance.\n\n1171\n00:54:55,630 --> 00:55:00,400\nStill not something I'd use in production,\nbut lab test.\n\n1172\n00:55:00,400 --> 00:55:03,840\nTesting your backup and restore procedure\nthat's what this stuff really works on.\n\n1173\n00:55:06,080 --> 00:55:06,700\nAll right.\n\n1174\n00:55:06,700 --> 00:55:12,130\nWe've got just a few little things to\ntackle here before we wrap this show up.\n\n1175\n00:55:12,130 --> 00:55:15,440\nBut let's stop and take a break because\nwe're kind of out of time on this segment.\n\n1176\n00:55:15,440 --> 00:55:16,580\nSo we'll pause here.\n\n1177\n00:55:16,580 --> 00:55:17,540\nWhen we get back.\n\n1178\n00:55:17,540 --> 00:55:20,320\nI want to talk a little bit about SMB 3.0.\n\n1179\n00:55:20,320 --> 00:55:22,030\nGood Old Service Message Block.\n\n1180\n00:55:22,030 --> 00:55:26,240\nStay tuned.\nWe'll be back after this.\n\n1181\n00:55:30,660 --> 00:55:32,290\nAlright.\nWelcome back everybody.\n\n1182\n00:55:32,290 --> 00:55:36,030\nSo, we've got one last thing that we need\nto talk about when planning storage for\n\n1183\n00:55:36,030 --> 00:55:37,190\nour Virtual Machines.\n\n1184\n00:55:37,190 --> 00:55:40,382\nI've already said how in a production\nenvironment you want that fiber channel\n\n1185\n00:55:40,382 --> 00:55:41,990\nSAN, that's typically the way to go.\n\n1186\n00:55:41,990 --> 00:55:44,951\nBut there is another\ntechnology that we can use for\n\n1187\n00:55:44,951 --> 00:55:47,850\nlab and\ntest that's actually kind of a neat one.\n\n1188\n00:55:47,850 --> 00:55:51,710\nYou can use it in production but\nit's not really ideal.\n\n1189\n00:55:51,710 --> 00:55:57,020\nIn another episode, we talked about\nSMB 3.0, Server Message Box 3.0.\n\n1190\n00:55:57,020 --> 00:56:02,190\nIn Windows Server 2012, Microsoft\nimproved the functionality of the old SMB\n\n1191\n00:56:02,190 --> 00:56:04,410\nprotocol for\ndoing files transfers and copies.\n\n1192\n00:56:04,410 --> 00:56:06,850\nSMB's been around a long time.\n\n1193\n00:56:06,850 --> 00:56:09,228\nIt came from the net files\ntransfers back in the day.\n\n1194\n00:56:09,228 --> 00:56:14,610\nWell SNB 3.0 gave us the ability to do\nthings like multi-pathing, so if you have\n\n1195\n00:56:14,610 --> 00:56:18,560\nmore than one adapter, you could follow\nthe different network paths to get to it.\n\n1196\n00:56:18,560 --> 00:56:20,415\nIncrease your bandwidth,\nincrease redundancy.\n\n1197\n00:56:20,415 --> 00:56:23,050\nSNB 3.0 has live fail-over, so\n\n1198\n00:56:23,050 --> 00:56:26,300\nif one nick fails in the server you can\njust jump to another nick on the server.\n\n1199\n00:56:26,300 --> 00:56:28,740\nJust really cool features built into it.\n\n1200\n00:56:28,740 --> 00:56:31,990\nYou can actually store your VHDs,\non an SMD share also.\n\n1201\n00:56:33,680 --> 00:56:38,300\nNow in order to do that, we need to\ndeploy a file server as a clustered role,\n\n1202\n00:56:38,300 --> 00:56:39,460\nall right.\n\n1203\n00:56:39,460 --> 00:56:42,850\nAnd that's what's going to create what's\ncalled a scale out file share, and\n\n1204\n00:56:42,850 --> 00:56:46,070\nthat's the basis of what we\ncan use to store VHDs on.\n\n1205\n00:56:46,070 --> 00:56:47,510\nSo let me show you how\nthat works real quick.\n\n1206\n00:56:47,510 --> 00:56:50,100\nAnd, I'm not going to go through a full\ndeployment because this in't something\n\n1207\n00:56:50,100 --> 00:56:51,800\nthat most of us are even going to use.\n\n1208\n00:56:51,800 --> 00:56:53,710\nBut it is just deploying a file share, and\n\n1209\n00:56:53,710 --> 00:56:55,970\nI know we did that in some\nof our other episodes.\n\n1210\n00:56:55,970 --> 00:56:58,320\nBut basically you go in your\nfailover cluster manager and\n\n1211\n00:56:58,320 --> 00:57:01,650\nyou whip up one of these\nscale out file shares.\n\n1212\n00:57:01,650 --> 00:57:05,330\nYou start by creating a role, so\nI'll just go here to configure my role.\n\n1213\n00:57:05,330 --> 00:57:07,586\nAnd it's going to walk me\nthrough my little wizard, and\n\n1214\n00:57:07,586 --> 00:57:10,260\nyou're not going to see scale\nout file share or SMB 3.0 here.\n\n1215\n00:57:10,260 --> 00:57:12,180\nWhat you're going to see is file server.\n\n1216\n00:57:12,180 --> 00:57:16,679\nSo I'll just go ahead and choose file\nserver, and it's going to think.\n\n1217\n00:57:16,679 --> 00:57:18,500\nFor a while.\n\n1218\n00:57:18,500 --> 00:57:20,600\nIt's always a test of patience,\nthis stuff.\n\n1219\n00:57:20,600 --> 00:57:21,252\n>> Right?\n\n1220\n00:57:21,252 --> 00:57:23,830\n>> All right so I'll go ahead and\nchoose file server and hit next, and\n\n1221\n00:57:23,830 --> 00:57:27,220\nnow it's going to ask me am I creating\na file server for general use, in other\n\n1222\n00:57:27,220 --> 00:57:33,030\nwords just shared files, or a scale\nout file server for application data.\n\n1223\n00:57:33,030 --> 00:57:34,200\nThat's the one we want.\n\n1224\n00:57:34,200 --> 00:57:39,550\nThe application data is going to be our\nhyper V VHD's, our virtual hard drives.\n\n1225\n00:57:39,550 --> 00:57:41,068\nSo I'm going to choose that option.\n\n1226\n00:57:41,068 --> 00:57:45,420\nThat's going to turn that functionality\non and allow things like the MPIO and\n\n1227\n00:57:45,420 --> 00:57:47,220\nthe automatic failover and\n\n1228\n00:57:47,220 --> 00:57:52,920\nall those cool features that we want\nright here on top of this shared folder.\n\n1229\n00:57:54,040 --> 00:57:56,590\nNow when you create it, you have to create\na virtual name for the server, right?\n\n1230\n00:57:56,590 --> 00:58:01,280\nSo I might create a server\ncalled VM Storage 01.\n\n1231\n00:58:01,280 --> 00:58:04,170\nAnd so it's going to see this\nas a server named VM storage 01.\n\n1232\n00:58:04,170 --> 00:58:08,470\nI can browse to it and we can create\nfolders underneath it, all right.\n\n1233\n00:58:08,470 --> 00:58:11,590\nAnd we'll go ahead and finish that up, now\nit's going to fail on mine because I'm not\n\n1234\n00:58:11,590 --> 00:58:14,640\nsynced with my domain right now but\nit will go ahead and create it.\n\n1235\n00:58:14,640 --> 00:58:15,580\nOnce that's done,\n\n1236\n00:58:16,620 --> 00:58:21,620\nnow we'll be able to add that in inside\nof our failover cluster resources.\n\n1237\n00:58:21,620 --> 00:58:23,880\nRight?\nSo, inside of our storage,\n\n1238\n00:58:23,880 --> 00:58:27,030\nif that actually came up, you've got\nyour disks, and you see your disks.\n\n1239\n00:58:27,030 --> 00:58:31,640\nWe would actually be able to see these\ncluster shared volumes, basically, and\n\n1240\n00:58:31,640 --> 00:58:34,870\nthat file server we just created\nis a cluster shared volume,\n\n1241\n00:58:34,870 --> 00:58:37,530\neven though it doesn't necessarily\nshow up as that right here.\n\n1242\n00:58:38,630 --> 00:58:41,830\nAnd when I create VM's and\nI'm creating a virtual hard drive and\n\n1243\n00:58:41,830 --> 00:58:47,760\nasking where to put them.I can put\nthem in that shared file server role.\n\n1244\n00:58:47,760 --> 00:58:50,710\nThat scale out file server,\nI can put them there.\n\n1245\n00:58:50,710 --> 00:58:53,170\nNow,I don't have to worry\nabout setting up a cluster.\n\n1246\n00:58:53,170 --> 00:58:56,320\nI don't have to worry about\nrunning fiber cables or whatever.\n\n1247\n00:58:56,320 --> 00:58:58,370\nI create more hosts, and\n\n1248\n00:58:58,370 --> 00:59:01,360\non each of those hosts I can just point\nthem to this shared folder resource and\n\n1249\n00:59:01,360 --> 00:59:04,920\nthey see the VHDs and we can bring up\nVMs that are mounted to them, right?\n\n1250\n00:59:04,920 --> 00:59:08,980\nSo for a test or lab environment where\nyou're quickly provisioning systems,\n\n1251\n00:59:08,980 --> 00:59:10,990\nmaybe you're in a dev environment, so\n\n1252\n00:59:10,990 --> 00:59:13,590\nyou've got developers that\nneed VMs on a moment's notice.\n\n1253\n00:59:13,590 --> 00:59:16,710\nIt's a great way to easily store things,\nand it just uses SMB traffic.\n\n1254\n00:59:18,100 --> 00:59:22,990\nIt only works with SMB 3.0 and\nuses a Windows server 2012 technology.\n\n1255\n00:59:22,990 --> 00:59:25,590\nIt doesn't work in previous\nversions of Windows server.\n\n1256\n00:59:25,590 --> 00:59:28,970\nAnd it does require it to\nbe a scale out file server.\n\n1257\n00:59:28,970 --> 00:59:33,128\nSo you can't just have a shared folder\non some regular old Windows 2012 server.\n\n1258\n00:59:33,128 --> 00:59:35,150\nIt's got to be a cluster server and\n\n1259\n00:59:35,150 --> 00:59:39,240\nit's got to be a cluster role\nthat's in place for that to work.\n\n1260\n00:59:39,240 --> 00:59:42,250\nBut easy to deploy things\nwithout having an iSCSI scan,\n\n1261\n00:59:42,250 --> 00:59:46,100\nwithout having to invest in\nextra hardware or technologies.\n\n1262\n00:59:46,100 --> 00:59:48,420\nIt's just a shared folder that's\npart of the cluster resources.\n\n1263\n00:59:49,550 --> 00:59:50,960\nAnd since it's a cluster resource,\n\n1264\n00:59:50,960 --> 00:59:54,590\nif one node fails, another node\njust takes over and that's it.\n\n1265\n00:59:54,590 --> 00:59:56,670\nIt's got it, it's in business,\nand you're ready to rock.\n\n1266\n00:59:56,670 --> 00:59:57,170\n>> Nice.\n\n1267\n00:59:58,380 --> 01:00:02,310\n>> All right, so that's basically it\nwhen it comes to planning our storage.\n\n1268\n01:00:02,310 --> 01:00:04,930\nWe've got a lot of different\noptions that are out there.\n\n1269\n01:00:04,930 --> 01:00:07,940\nMost of which aren't really suitable for\nproduction use.\n\n1270\n01:00:07,940 --> 01:00:12,260\nYou can sort of retro fit them, right, you\ncan force them but, at the end of the day\n\n1271\n01:00:12,260 --> 01:00:15,190\na fiber channel is that's really what you\nneed to have in a production environment.\n\n1272\n01:00:16,990 --> 01:00:19,380\nAll right, well, Mike, I am kind of\nout of stuff to talk about on storage,\n\n1273\n01:00:19,380 --> 01:00:20,290\nyou got anything else to talk about?\n\n1274\n01:00:20,290 --> 01:00:22,710\n>> No, I can't think of anything to add,\nyou covered it all.\n\n1275\n01:00:22,710 --> 01:00:25,260\n>> All right, well let's go ahead and\nwrap things up here.\n\n1276\n01:00:25,260 --> 01:00:28,130\nI do want to remind you guys\nIf you have questions on any\n\n1277\n01:00:28,130 --> 01:00:30,860\nof the stuff that we talked about,\nfeel free to ask.\n\n1278\n01:00:30,860 --> 01:00:33,020\nLive during the show you\ncan go to itpro.tv/live and\n\n1279\n01:00:33,020 --> 01:00:35,570\nyou'll see the chat box beneath the video.\n\n1280\n01:00:35,570 --> 01:00:38,800\nYou can post your questions there,\nwe'll monitor and answer during the show.\n\n1281\n01:00:38,800 --> 01:00:40,950\nIf you have questions after the show,\n\n1282\n01:00:40,950 --> 01:00:44,440\nlike if you're watching this recorded,\ncheck us out in the Q and A forum.\n\n1283\n01:00:44,440 --> 01:00:48,870\nAt the top of every page of the IT pro\nTV you'll see a link that says Q and\n\n1284\n01:00:48,870 --> 01:00:52,750\nA click on it it'll take you to the forums\nyou can post your questions there\n\n1285\n01:00:52,750 --> 01:00:54,480\nwe monitor and answer after the show.\n\n1286\n01:00:54,480 --> 01:00:57,330\nTake advantage of that\nresource it's there for you.\n\n1287\n01:00:57,330 --> 01:01:02,830\nI hope you guys enjoyed todays\n\n1288\n01:01:02,830 --> 01:01:07,230\nepisode signing off for\n\n1289\n01:01:07,230 --> 01:01:12,964\nITProTV, I'm Don Pezet\n>> And\n\n1290\n01:01:12,964 --> 01:01:14,279\nI'm Mike Rodrick\n>> And we'll see ya next time.\n\n1291\n01:01:14,279 --> 01:01:19,255\n[MUSIC]\n\n1292\n01:01:19,255 --> 01:01:24,750\n[SOUND]\n\n",
          "vimeoId": "121242870"
        },
        {
          "description": null,
          "length": "2956",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-5-virtual_machine_movement-030415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-5-virtual_machine_movement-030415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-5-virtual_machine_movement-030415-1-sm.jpg",
          "title": "Virtual Machine Movement",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,456 --> 00:00:21,988\n[SOUND]\n\n3\n00:00:21,988 --> 00:00:31,988\n[MUSIC]\n\n4\n00:00:33,168 --> 00:00:36,486\nAlright, good morning,\ngood afternoon, and good evening and\n\n5\n00:00:36,486 --> 00:00:38,831\nwelcome back to another\nepisode of ITPRoTV.\n\n6\n00:00:38,831 --> 00:00:41,980\nI'm your host Don Pezet,\nback again with Mr Mike Rodrick.\n\n7\n00:00:41,980 --> 00:00:42,590\nHow's it going Mike?\n\n8\n00:00:42,590 --> 00:00:44,200\n>> Fantastic Don, how are you doing today?\n\n9\n00:00:44,200 --> 00:00:46,750\n>> I am doing just as well as always.\n\n10\n00:00:46,750 --> 00:00:47,360\n>> That's good.\n\n11\n00:00:47,360 --> 00:00:50,560\n>> So we're back for another\nexciting episode of the 74 14 shows,\n\n12\n00:00:50,560 --> 00:00:54,060\nwe're moving into some of our\nmore advanced server planning.\n\n13\n00:00:54,060 --> 00:00:59,180\nAnd in this particular episode we're gonna\nfocus in on virtual machine movement.\n\n14\n00:00:59,180 --> 00:01:01,280\nAll right now,\nwhat are we talking about here?\n\n15\n00:01:01,280 --> 00:01:03,070\nWhat is virtual machine movement?\n\n16\n00:01:03,070 --> 00:01:03,590\n[LAUGH]\n>> Yeah,\n\n17\n00:01:03,590 --> 00:01:06,440\nanytime we got to move a virtual\nmachine from one host to another.\n\n18\n00:01:06,440 --> 00:01:07,930\nDifferent reasons we might be doing that.\n\n19\n00:01:07,930 --> 00:01:11,930\nWe might have a a server that needs to go\ndown for some kind of updates or repairs,\n\n20\n00:01:11,930 --> 00:01:13,330\nsomething like that.\n\n21\n00:01:13,330 --> 00:01:16,360\nWe might be migrating from\nolder hardware to new hardware.\n\n22\n00:01:16,360 --> 00:01:18,000\nCould be a failure scenario, right.\n\n23\n00:01:18,000 --> 00:01:21,180\nSo different reasons we need to move those\nvirtual machines from one host to another.\n\n24\n00:01:21,180 --> 00:01:24,210\n>> Yeah, and\nback in the days of physical servers,\n\n25\n00:01:24,210 --> 00:01:29,500\nlet's say I had Microsoft Exchange and I\nwas running Exchange on a physical box and\n\n26\n00:01:29,500 --> 00:01:32,800\nI needed to do some kind of hardware\nmaintenance on that physical box,\n\n27\n00:01:32,800 --> 00:01:34,080\nI had to take Exchange offline.\n\n28\n00:01:34,080 --> 00:01:36,020\nThere really wasn't any way around that.\n\n29\n00:01:36,020 --> 00:01:39,300\nBut with a virtual machine,\nthe VM doesn't care what hardware it's on.\n\n30\n00:01:39,300 --> 00:01:40,195\nWell for the most part.\n\n31\n00:01:40,195 --> 00:01:43,080\n[LAUGH] And so, if we need to do\nmaintenance on the hardware we can just\n\n32\n00:01:43,080 --> 00:01:47,030\ntake the VM and\nmove it off to some other hardware and\n\n33\n00:01:47,030 --> 00:01:49,970\nnow we can do our hardware maintenance,\nor failures like you said.\n\n34\n00:01:49,970 --> 00:01:52,290\nThese can be planned or unplanned events,\n\n35\n00:01:52,290 --> 00:01:56,490\nthe point is we've got the flexibility to\ndo it and we've kind of already talked\n\n36\n00:01:56,490 --> 00:01:58,810\nabout this a little bit when we\ntalked about resource optimization.\n\n37\n00:01:59,980 --> 00:02:04,240\nAnd how like the system center virtual\nmachine manager can dynamically move\n\n38\n00:02:04,240 --> 00:02:07,890\nour virtual machines around based on\nthings like performance constraints.\n\n39\n00:02:07,890 --> 00:02:13,010\nSo maybe one of your physical hosts is\nreally high on CPU utilization right now.\n\n40\n00:02:13,010 --> 00:02:17,730\nSo SCVMM combined with SCOM can look at\nthat and start to shift things around.\n\n41\n00:02:17,730 --> 00:02:19,970\nWell, We'll talk about\nthat in our next episode,\n\n42\n00:02:19,970 --> 00:02:22,580\nkind of automating that movement,\nbut in this episode,\n\n43\n00:02:22,580 --> 00:02:26,667\nwe just wanna kind of focus on it from\na manual movement method, methodology.\n\n44\n00:02:26,667 --> 00:02:29,130\n>> [LAUGH]\n>> I don't know the right word there.\n\n45\n00:02:29,130 --> 00:02:32,090\nAnd also on a somewhat automated,\n\n46\n00:02:32,090 --> 00:02:35,020\nlike on a failure-type basis,\nhow we can set up ever for machine motion.\n\n47\n00:02:36,130 --> 00:02:38,080\nNow, when we talk about\nvirtual machine motion,\n\n48\n00:02:38,080 --> 00:02:42,840\nthe one that pops into my mind first,\nis live migration, right.\n\n49\n00:02:42,840 --> 00:02:47,160\nLive migration was one of the big selling\npoints in Hyper-V back in the early days.\n\n50\n00:02:47,160 --> 00:02:50,660\nIn the early days, if Microsoft\napproached a vendor or VMware or\n\n51\n00:02:50,660 --> 00:02:51,990\nanybody for that matter, and\n\n52\n00:02:51,990 --> 00:02:54,920\nthey said hey, you've got physical\nservers right now, you should go virtual.\n\n53\n00:02:54,920 --> 00:02:58,120\nGet your VM's running in a virtual\nmachine on top of the hardware.\n\n54\n00:02:58,120 --> 00:03:00,440\nPeople look at it and say,\nreally what's the point?\n\n55\n00:03:00,440 --> 00:03:01,590\nWhy would I do that?\n\n56\n00:03:01,590 --> 00:03:04,990\nWhy would I add an extra layer of\ncomplexity underneath my software\n\n57\n00:03:04,990 --> 00:03:07,290\nwhen I could just add the software\nright on top of the hardware and\n\n58\n00:03:07,290 --> 00:03:09,230\nbe done with it, right.\n\n59\n00:03:09,230 --> 00:03:10,320\nAnd the argument was well,\n\n60\n00:03:10,320 --> 00:03:14,510\nyou could have more than one server\nrunning on a single piece of hardware.\n\n61\n00:03:14,510 --> 00:03:16,580\nAnd the argument back was.\n\n62\n00:03:16,580 --> 00:03:18,385\nWhat happens if that single\npiece of hardware fails?\n\n63\n00:03:18,385 --> 00:03:20,200\n>> [LAUGH]\n>> I lose all those Servers, right.\n\n64\n00:03:20,200 --> 00:03:22,770\n>> Don't we wanna introduce single\npoint failure into our network.\n\n65\n00:03:22,770 --> 00:03:24,265\nI mean, that's our goal isn't it?\n\n66\n00:03:24,265 --> 00:03:24,800\n[LAUGH]\n>> That's right,\n\n67\n00:03:24,800 --> 00:03:27,410\nI mean the more failure the better,\nis that, well no,\n\n68\n00:03:27,410 --> 00:03:28,445\nthat's not quite what we want.\n\n69\n00:03:28,445 --> 00:03:29,440\n>> No.\n>> So,\n\n70\n00:03:29,440 --> 00:03:34,450\nthat really did just shut down the\nvirtualization argument for a long time.\n\n71\n00:03:34,450 --> 00:03:37,200\nVirtualization was big in the 70's and\nin the 80's, right.\n\n72\n00:03:37,200 --> 00:03:41,080\nBack in the mainframe days we used\nvirtual machines in mainframes\n\n73\n00:03:41,080 --> 00:03:43,330\nall the time it was very common.\n\n74\n00:03:43,330 --> 00:03:46,310\nBut then in the 90's we had this giant\npush towards distributed architectures\n\n75\n00:03:46,310 --> 00:03:49,060\nwhere everybody had their\nown independent machines and\n\n76\n00:03:49,060 --> 00:03:51,440\nno one failure could\naffect the whole thing.\n\n77\n00:03:51,440 --> 00:03:54,990\nWell when VMware started pushing\nvirtualization again real strong in\n\n78\n00:03:54,990 --> 00:03:57,320\nthe late 90',\nthere was a lot of resistance.\n\n79\n00:03:57,320 --> 00:03:58,240\nAren't we going back in time.\n\n80\n00:03:58,240 --> 00:04:02,500\nAnd they said well wait,\nwe've done something neat.\n\n81\n00:04:02,500 --> 00:04:05,470\nNow we've made things\nindependent of a hardware.\n\n82\n00:04:05,470 --> 00:04:08,435\nAnd I know I use VMware as an example but\nMicrosoft did the same thing.\n\n83\n00:04:08,435 --> 00:04:12,550\nHyper-V can now operate these virtual\nmachines independent of the hardware.\n\n84\n00:04:12,550 --> 00:04:17,470\nThat means I can have a virtual machine\nrunning on a piece of hardware right now,\n\n85\n00:04:17,470 --> 00:04:20,090\nand I can move it over to\nother hardware when I want to.\n\n86\n00:04:20,090 --> 00:04:23,370\nNow the old way to do that was to\nshut the virtual machine down,\n\n87\n00:04:23,370 --> 00:04:27,600\ncopy the virtual machine over to\nthe new host, and power it back up.\n\n88\n00:04:27,600 --> 00:04:29,050\nWell that created some downtime.\n\n89\n00:04:29,050 --> 00:04:33,650\nThe downtime for the shutdown and the\nrestart, which can be lengthy sometimes.\n\n90\n00:04:33,650 --> 00:04:37,370\nAnd in the copy operation,\nto copy that data between the two systems.\n\n91\n00:04:37,370 --> 00:04:41,720\nLive migration fixes that by basically\nplanning for it ahead of time.\n\n92\n00:04:41,720 --> 00:04:46,210\nBy having shared storage between\ntwo cluster nodes or two systems so\n\n93\n00:04:46,210 --> 00:04:47,370\nthat they don't have to copy anything.\n\n94\n00:04:47,370 --> 00:04:49,510\nThey can just automatically\nsee the drives.\n\n95\n00:04:49,510 --> 00:04:52,590\nAnd you can shut the VM down on one and\npower up on the other and\n\n96\n00:04:52,590 --> 00:04:53,960\nyou're in business.\n\n97\n00:04:53,960 --> 00:04:55,770\nBut wait a minute,\nthat involves a restart.\n\n98\n00:04:55,770 --> 00:04:57,520\nSo I still have down time.\n\n99\n00:04:57,520 --> 00:05:02,110\nCan't we get that even smaller, and\nthat's where live migration comes in.\n\n100\n00:05:02,110 --> 00:05:05,870\nLive migration says let's take\nthe virtual machine while it's running.\n\n101\n00:05:05,870 --> 00:05:09,090\nIt's live and active and running.\n\n102\n00:05:09,090 --> 00:05:10,860\nAnd transition it over to other hardware.\n\n103\n00:05:10,860 --> 00:05:12,720\nAnd your end users don't\neven know about it.\n\n104\n00:05:12,720 --> 00:05:14,530\nYou can do it in the middle of the day.\n\n105\n00:05:14,530 --> 00:05:17,030\nAnd now you're not having\nto come in Sunday at 3 a.m\n\n106\n00:05:17,030 --> 00:05:18,730\nto do Software maintenance.\n\n107\n00:05:18,730 --> 00:05:21,260\nYou can do it in the middle of the day\nbecause it's easy to shift those\n\n108\n00:05:21,260 --> 00:05:22,420\nVMs around.\n\n109\n00:05:22,420 --> 00:05:24,940\nMigration, it's a really\nimpressive feature.\n\n110\n00:05:24,940 --> 00:05:25,550\n>> It really is.\n\n111\n00:05:25,550 --> 00:05:28,200\nAnd when you look at the down time\nbeing a few seconds, typically.\n\n112\n00:05:28,200 --> 00:05:32,080\nAnd the fact that most of our applications\nare gonna go right through that.\n\n113\n00:05:32,080 --> 00:05:35,560\nThey're designed where they\ncan take a brief interruption.\n\n114\n00:05:35,560 --> 00:05:39,400\nYour end users don't even know that\nthis machine that they're working with\n\n115\n00:05:39,400 --> 00:05:40,890\nproviding this service to them.\n\n116\n00:05:40,890 --> 00:05:43,430\nIs actually being moved from\none physical server to another.\n\n117\n00:05:43,430 --> 00:05:44,024\nThat is impressive.\n\n118\n00:05:44,024 --> 00:05:45,440\nYeah.\n\n119\n00:05:45,440 --> 00:05:48,590\n>> Now for\nthe exam it's important to understand\n\n120\n00:05:48,590 --> 00:05:52,380\nwhich type of virtual machine motion\nis appropriate for what scenario.\n\n121\n00:05:52,380 --> 00:05:55,030\nAnd to really understand that we\nneed to understand what's going\n\n122\n00:05:55,030 --> 00:05:57,060\non in the background, what are the steps.\n\n123\n00:05:57,060 --> 00:05:59,840\nIn earlier shows we showed you\nguys how to set up live migration.\n\n124\n00:05:59,840 --> 00:06:02,530\nWe showed setting up a Microsoft\nfail over cluster and\n\n125\n00:06:02,530 --> 00:06:07,040\nthen taking one of those cluster VM's and\nhaving it fail over between nodes.\n\n126\n00:06:07,040 --> 00:06:10,380\nAnd it does it automatically if there's\na failure or you can initiate it yourself.\n\n127\n00:06:10,380 --> 00:06:13,140\nBut what's really going\non behind the scenes.\n\n128\n00:06:13,140 --> 00:06:13,790\nOkay.\n\n129\n00:06:13,790 --> 00:06:16,000\nSo in the show notes we'll post this.\n\n130\n00:06:16,000 --> 00:06:18,950\nBut I kind of broke it down\ninto about seven steps.\n\n131\n00:06:18,950 --> 00:06:21,680\nSeven different things that\noccur in the background.\n\n132\n00:06:21,680 --> 00:06:23,510\nSo let's run through that process, right.\n\n133\n00:06:23,510 --> 00:06:25,610\nThe very first one is\nreally straightforward,\n\n134\n00:06:25,610 --> 00:06:28,170\nwe initiate the migration.\n\n135\n00:06:28,170 --> 00:06:32,780\nNow a live migration is going\nto be triggered manually, right.\n\n136\n00:06:32,780 --> 00:06:35,460\nIt's gonna be triggered, well,\nit's not always manually, but\n\n137\n00:06:35,460 --> 00:06:38,580\na live migration is normally gonna\nbe triggered either via the GUI,\n\n138\n00:06:38,580 --> 00:06:43,040\nwe right-click on a VM, we choose migrate,\nand we pick it a destination.\n\n139\n00:06:43,040 --> 00:06:44,510\nOr trigger it via power shell, right,\n\n140\n00:06:44,510 --> 00:06:46,770\nwe can trigger it that was\nthrough scripting too.\n\n141\n00:06:46,770 --> 00:06:49,810\nThe other place where it might be\ninitiated is through something like\n\n142\n00:06:49,810 --> 00:06:53,960\nthe SCVMM, the virtual machine manager\ncan be doing dynamic optimization.\n\n143\n00:06:53,960 --> 00:06:57,680\nAnd it can initiate the live migration\nto move the VMs around to balance out\n\n144\n00:06:57,680 --> 00:07:00,100\nload and resources, all right.\n\n145\n00:07:00,100 --> 00:07:04,470\nLive migration is not going to be\ntriggered by failure, all right.\n\n146\n00:07:04,470 --> 00:07:10,480\nIf you have a failure, if a physical node\ngoes offline, that VM is now shut down.\n\n147\n00:07:10,480 --> 00:07:13,180\nSo there's no live migrating it.\n\n148\n00:07:13,180 --> 00:07:14,790\nIt's gonna have to booted up anyway.\n\n149\n00:07:14,790 --> 00:07:16,140\nYou lost what's in RAM.\n\n150\n00:07:16,140 --> 00:07:18,470\nIf that physical node powered off,\nyou lost what's in RAM.\n\n151\n00:07:18,470 --> 00:07:20,690\nThere's noting to live migrate, right.\n\n152\n00:07:20,690 --> 00:07:24,640\nSo failure, that's gonna be\nhandled by a failover cluster.\n\n153\n00:07:24,640 --> 00:07:27,920\nThat's not going to be handled by live\nmigration, so remember that for the exam.\n\n154\n00:07:27,920 --> 00:07:29,330\nThere is still a need for\n\n155\n00:07:29,330 --> 00:07:31,461\nhaving that failover cluster\nunderneath all of this, all right.\n\n156\n00:07:32,490 --> 00:07:36,510\nBut the first thing we initiate\nthe transfer, all right.\n\n157\n00:07:36,510 --> 00:07:37,260\nThen what happens next?\n\n158\n00:07:38,560 --> 00:07:43,220\nWell, the next step is the other\nside needs to be aware\n\n159\n00:07:43,220 --> 00:07:44,720\nthat it's gonna be receiving\na virtual machine.\n\n160\n00:07:44,720 --> 00:07:47,470\nSo, let's say I've got two\nvirtual machine hosts, right.\n\n161\n00:07:47,470 --> 00:07:50,340\nSo I've got VM host 01 And VM host 02.\n\n162\n00:07:50,340 --> 00:07:53,025\nAnd my virtual machine is\nrunning on VM host 01.\n\n163\n00:07:53,025 --> 00:07:57,564\nWhen I right click on that VM and\nI tell it migrate and I pick VM Host 02.\n\n164\n00:07:57,564 --> 00:08:00,224\nWe send a message to VM Host 02.\n\n165\n00:08:00,224 --> 00:08:02,906\nAnd we say, get ready,\nyou're about to get a new VM.\n\n166\n00:08:02,906 --> 00:08:04,450\nCongratulations, you're the winner.\n\n167\n00:08:05,680 --> 00:08:09,620\nAnd on VM host 02, it says all right,\nwell I've gotta get ready.\n\n168\n00:08:09,620 --> 00:08:12,230\nAnd the way it gets ready is it creates\n\n169\n00:08:12,230 --> 00:08:16,280\nan all new virtual machine creates\nan all new virtual machine\n\n170\n00:08:16,280 --> 00:08:20,510\nthat matches the configuration of\nthe virtual machine on the original host.\n\n171\n00:08:20,510 --> 00:08:23,130\n>> Cause he's gonna send over\nthe configuration file basically so\n\n172\n00:08:23,130 --> 00:08:25,060\nhe can build a duplicate virtual machine.\n\n173\n00:08:25,060 --> 00:08:26,520\n>> And what all is in that file, Mike?\n\n174\n00:08:26,520 --> 00:08:29,510\n>> It's got things like that processors\nyou're using, what hard drive it has,\n\n175\n00:08:29,510 --> 00:08:31,490\nhow much memory is assigned to it,\nnetwork adapters.\n\n176\n00:08:31,490 --> 00:08:34,480\nAll the things we would set in\nthe settings on our virtual Machine.\n\n177\n00:08:34,480 --> 00:08:37,895\n>> Yeah, so it's basically creating\nan identical clone configuration wise.\n\n178\n00:08:37,895 --> 00:08:39,030\n>> Mm-hm.\n>> Now,\n\n179\n00:08:39,030 --> 00:08:41,320\nhow big is that configuration file, right.\n\n180\n00:08:41,320 --> 00:08:42,010\n>> It's tiny.\n>> Yeah.\n\n181\n00:08:42,010 --> 00:08:47,685\nMaybe, if you got some super crazy complex\nstuff, it could possibly be 30k in size.\n\n182\n00:08:47,685 --> 00:08:49,470\n>> [LAUGH]\n>> Really really small.\n\n183\n00:08:49,470 --> 00:08:51,090\nSo step two is that gets transferred.\n\n184\n00:08:51,090 --> 00:08:52,970\nThe configuration gets\ntransferred to the other side and\n\n185\n00:08:52,970 --> 00:08:54,430\nit creates a duplicate machine.\n\n186\n00:08:56,440 --> 00:09:00,400\nStep three, well now we start to get\nto some of the more exciting stuff.\n\n187\n00:09:00,400 --> 00:09:04,920\nNow that duplicate machine is created,\nand it comes sort of online.\n\n188\n00:09:04,920 --> 00:09:07,020\nIt's not truly online.\n\n189\n00:09:07,020 --> 00:09:10,595\nThe virtual machine is created,\nbut it doesn't have its data yet.\n\n190\n00:09:10,595 --> 00:09:13,035\nIts data is back on the old machine.\n\n191\n00:09:13,035 --> 00:09:16,055\n>> So then we're going to have to\nstart copying over the memory.\n\n192\n00:09:16,055 --> 00:09:19,615\nWe're gonna start taking what's in memory\non that running virtual machine and\n\n193\n00:09:19,615 --> 00:09:21,960\nstart moving it over to that second host.\n\n194\n00:09:21,960 --> 00:09:23,620\nNow the original is still up and\nrunning and\n\n195\n00:09:23,620 --> 00:09:27,010\nchanges are actually still being\nmade to that original host and\n\n196\n00:09:27,010 --> 00:09:30,310\nit starts this copy process and\nit starts moving this stuff over.\n\n197\n00:09:30,310 --> 00:09:34,800\nAnd it goes through iterations cuz as\nthose changes are being made it continues\n\n198\n00:09:34,800 --> 00:09:38,500\nto copy what they called the pages\nfrom memory over to the other one, and\n\n199\n00:09:38,500 --> 00:09:41,620\nit goes through, I wanna say it goes\nthrough an iteration like ten times, or\n\n200\n00:09:41,620 --> 00:09:45,190\nuntil the number of pages\nreaches a certain threshold.\n\n201\n00:09:45,190 --> 00:09:47,270\nWhich means the changes,\nit's caught up basically.\n\n202\n00:09:47,270 --> 00:09:48,730\nThe other one is almost in sync.\n\n203\n00:09:49,740 --> 00:09:51,210\n>> Yeah.\nAnd it's just doing RAM, right?\n\n204\n00:09:51,210 --> 00:09:53,650\nIf the machine Machine is up and running.\n\n205\n00:09:53,650 --> 00:09:56,280\nEverything that's in RAM,\nthey call that state.\n\n206\n00:09:56,280 --> 00:09:58,300\nState is what that machine\nis doing right now.\n\n207\n00:09:58,300 --> 00:10:01,020\nAnd if I want to move it\nover to another system, and\n\n208\n00:10:01,020 --> 00:10:02,390\nI don't care about what\nit's doing right now.\n\n209\n00:10:02,390 --> 00:10:04,810\nWell we can just shut it down and\nboot it up on the other system, and\n\n210\n00:10:04,810 --> 00:10:06,030\nbe done really fast.\n\n211\n00:10:06,030 --> 00:10:08,950\nBut if you wanted to preserve what\nit's working on right now to make\n\n212\n00:10:08,950 --> 00:10:12,170\nit a seamless migration for\nthe end users, you need that memory.\n\n213\n00:10:12,170 --> 00:10:16,600\nAnd this is the most challenging part,\nbecause memory is fast.\n\n214\n00:10:16,600 --> 00:10:19,900\nAnd if it's a busy machine,\nmemory is changing a lot.\n\n215\n00:10:19,900 --> 00:10:21,030\nand so we've got to synchronize that.\n\n216\n00:10:21,030 --> 00:10:24,560\nThe more memory you have,\nthe longer it's going to take.\n\n217\n00:10:24,560 --> 00:10:29,130\nBut even if you have a small memory, maybe\nyou only have 512 MGs of memory on it.\n\n218\n00:10:29,130 --> 00:10:31,770\nIf it's a really busy virtual machine,\n\n219\n00:10:31,770 --> 00:10:33,420\nif it's one moving a lot of stuff in and\nout of RAM.\n\n220\n00:10:33,420 --> 00:10:36,770\nEven though it's a small amount of RAM,\nit could take a long time to migrate.\n\n221\n00:10:36,770 --> 00:10:39,590\nYou can have a machine with 8GB\nof RAM that's not doing much\n\n222\n00:10:39,590 --> 00:10:42,160\nthat migrates faster than\na machine with 512MB.\n\n223\n00:10:42,160 --> 00:10:44,530\nIf the 512MB one was really busy.\n\n224\n00:10:45,590 --> 00:10:47,950\nBut it's got to copy that stuff over and\nget the two in sync.\n\n225\n00:10:47,950 --> 00:10:51,820\nNow this is the part of the migration\nthat takes the longest.\n\n226\n00:10:51,820 --> 00:10:53,290\nRight?\nCuz it's got to synchronize that RAM.\n\n227\n00:10:53,290 --> 00:10:55,750\nThe more memory the longer it takes.\n\n228\n00:10:55,750 --> 00:10:58,580\nWhen it's done, we're ready to move\nforward, but this process takes a while.\n\n229\n00:10:59,770 --> 00:11:03,480\nThis is going to copy that memory over,\nget the other side set, and\n\n230\n00:11:03,480 --> 00:11:06,750\nduring that time we\nhave a performance hit.\n\n231\n00:11:06,750 --> 00:11:09,475\nMike, you mentioned that the source\nmachine stays online, and it does.\n\n232\n00:11:09,475 --> 00:11:11,855\nYour end users are still in the system,\nbut\n\n233\n00:11:11,855 --> 00:11:14,325\nit's gonna be a little bit\nslower than they're use to.\n\n234\n00:11:14,325 --> 00:11:18,305\nBecause we're trying to copy all that\nmemory and send it across the network,\n\n235\n00:11:18,305 --> 00:11:21,600\nyour network is significantly\nslower than your RAM chips are and\n\n236\n00:11:21,600 --> 00:11:23,410\nit does cause performance segregation.\n\n237\n00:11:23,410 --> 00:11:26,720\n>> Yeah, it's gonna basically try to slow\nthat RAM down to what your network is, so\n\n238\n00:11:26,720 --> 00:11:28,010\nit can try to catch up.\n\n239\n00:11:28,010 --> 00:11:32,130\nOtherwise if the changes are coming in so\nfast, it's never gonna be able to get all\n\n240\n00:11:32,130 --> 00:11:34,413\nof those pages over to\nthe other side in time.\n\n241\n00:11:34,413 --> 00:11:34,981\n>> Yep.\n\n242\n00:11:34,981 --> 00:11:36,370\nNow that was step four.\n\n243\n00:11:36,370 --> 00:11:41,170\nAnd so far, the source machine is still\nonline, the end users are in there and\n\n244\n00:11:41,170 --> 00:11:41,760\neverything's\n>> is happy.\n\n245\n00:11:42,890 --> 00:11:44,130\nStep five is where things change.\n\n246\n00:11:45,840 --> 00:11:51,250\nThe virtual machine we're copying all\nthis stuff to is basically paused.\n\n247\n00:11:51,250 --> 00:11:55,150\nIf you've ever paused a virtual machine,\nyou don't wanna take a virtual machine\n\n248\n00:11:55,150 --> 00:11:58,910\noffline and shut it down,\nyou just wanna freeze it in time right.\n\n249\n00:11:58,910 --> 00:12:01,900\nSo you can pause it and\nit freezes everything.\n\n250\n00:12:01,900 --> 00:12:04,530\nWell the destination for\nthis live migration is paused.\n\n251\n00:12:04,530 --> 00:12:07,230\nIt's paused and we're updating its memory.\n\n252\n00:12:07,230 --> 00:12:11,490\nWell, in step five we pause the source.\n\n253\n00:12:11,490 --> 00:12:17,270\nWe pause that source and freeze it where\nit is and we resume the destination.\n\n254\n00:12:17,270 --> 00:12:20,200\nThe destination doesn't\nknow that it's been moved.\n\n255\n00:12:20,200 --> 00:12:23,160\nIt just thinks hey somebody paused me,\nand they just un-paused me, and\n\n256\n00:12:23,160 --> 00:12:24,950\nnow I'm resumed and I'm ready to rock.\n\n257\n00:12:24,950 --> 00:12:28,140\nSo we resume the destination and\nit wakes right up and\n\n258\n00:12:28,140 --> 00:12:29,890\nit continues on doing what it was doing.\n\n259\n00:12:29,890 --> 00:12:34,120\nAll right, now that process happens very,\nvery fast.\n\n260\n00:12:34,120 --> 00:12:36,930\nPause the source, Resume the destination.\n\n261\n00:12:36,930 --> 00:12:41,525\nBut it's not instantaneous because what\nhappens is when the other side is resumed,\n\n262\n00:12:41,525 --> 00:12:46,900\nHyper-V waits until it sees\nthe heartbeat of that machine wakeup.\n\n263\n00:12:46,900 --> 00:12:49,850\nRemember every virtual machine is sending\na heartbeat through it's integration\n\n264\n00:12:49,850 --> 00:12:52,264\nservices down to the Hyper-V kernel.\n\n265\n00:12:52,264 --> 00:12:54,860\nAnd When it's doing that,\nwhen it's sending those messages,\n\n266\n00:12:54,860 --> 00:12:56,700\nwe know the system is up and happy.\n\n267\n00:12:56,700 --> 00:12:59,400\nWhen we resume the VM,\nit waits for that heartbeat, and\n\n268\n00:12:59,400 --> 00:13:02,170\nwhen it sees it, it knows that it's done.\n\n269\n00:13:02,170 --> 00:13:03,690\nRight?\nAnd everything's happy.\n\n270\n00:13:03,690 --> 00:13:07,480\nBut until it sees that,\nit assumes it's not done,\n\n271\n00:13:07,480 --> 00:13:10,910\nand it's holding the source paused so\nit can bring the source back up.\n\n272\n00:13:10,910 --> 00:13:13,720\nIf something happens where\nthe destination doesn't resume,\n\n273\n00:13:13,720 --> 00:13:16,140\nit wants to be able to bring\nthe source back up again.\n\n274\n00:13:16,140 --> 00:13:18,660\nAnd this is the part\nwhere we see data loss.\n\n275\n00:13:18,660 --> 00:13:22,570\nThe data loss is usually between two and\nfour seconds.\n\n276\n00:13:22,570 --> 00:13:23,300\nVery, very small.\n\n277\n00:13:24,320 --> 00:13:25,490\nNow you might say to yourself,\n\n278\n00:13:25,490 --> 00:13:28,990\nwait a minute Don, I thought you said we\ncould do this in the middle of the day.\n\n279\n00:13:28,990 --> 00:13:31,110\nI could fill machines and\nthe end user wouldn't notice it.\n\n280\n00:13:31,110 --> 00:13:35,041\nNow you're talking about two to four\nseconds of downtime, that's crazy talk.\n\n281\n00:13:35,041 --> 00:13:37,030\n>> [LAUGH]\n>> I love two seconds is the.\n\n282\n00:13:37,030 --> 00:13:39,150\n>> It'a huge.\n>> Ten years ago I would've killed for\n\n283\n00:13:39,150 --> 00:13:41,520\ntwo seconds downtime for\nsomething like this.\n\n284\n00:13:41,520 --> 00:13:46,480\nWell most of your software applications\nare written to survive that.\n\n285\n00:13:46,480 --> 00:13:49,020\nMost software applications are written\nto use the internet these days, and\n\n286\n00:13:49,020 --> 00:13:50,340\nthe internet's pretty unreliable.\n\n287\n00:13:50,340 --> 00:13:52,900\nYou lose packets out there all\nthe time on the internet so\n\n288\n00:13:52,900 --> 00:13:56,020\na two to four second down time\nis nothing to most software.\n\n289\n00:13:56,020 --> 00:13:59,650\nAnd that's why it's invisible to the end\nuser, but if you have really sensitive\n\n290\n00:13:59,650 --> 00:14:03,840\nsoftware, the Lotus domino pops\nto mind actually Lotus notes and\n\n291\n00:14:03,840 --> 00:14:07,250\nLotus domino if you still use\nthose I feel bad for you.\n\n292\n00:14:07,250 --> 00:14:09,220\nBoy, if they lose even\none packet they lock up,\n\n293\n00:14:09,220 --> 00:14:13,320\nthey freeze really bad so,\nsoftware like that won't be too happy.\n\n294\n00:14:13,320 --> 00:14:14,570\nBut other software.\n\n295\n00:14:14,570 --> 00:14:19,890\nMicrosoft Exchange, SQL, SharePoint,\nyour Outlook clients, things like that.\n\n296\n00:14:19,890 --> 00:14:21,700\nThey won't even bat an eye.\n\n297\n00:14:21,700 --> 00:14:22,600\nThey won't even notice that.\n\n298\n00:14:22,600 --> 00:14:26,230\nI mean they notice it obviously, but\nthey just to a TCP retransmit and\n\n299\n00:14:26,230 --> 00:14:28,890\nthen back into business,\nso it's seamless to them.\n\n300\n00:14:28,890 --> 00:14:32,000\nBut if your running a continual ping while\nyou do that migration you'll notice that\n\n301\n00:14:32,000 --> 00:14:33,410\nyou lose one or two pings.\n\n302\n00:14:33,410 --> 00:14:36,460\nAnd that's that little bit of downtime\nthat's interjected right there.\n\n303\n00:14:37,900 --> 00:14:42,310\nSo, step six the target machine\nis resumed, it comes online and\n\n304\n00:14:42,310 --> 00:14:46,530\nassuming everything is healthy,\nstep seven, we destroy the source.\n\n305\n00:14:46,530 --> 00:14:48,090\nThe source is deleted.\n\n306\n00:14:48,090 --> 00:14:51,820\nSo there are actually two VMs for\na period of time, and\n\n307\n00:14:51,820 --> 00:14:54,350\nthen at the end you have your\ndestination and the source is removed.\n\n308\n00:14:55,625 --> 00:14:57,865\nThat's what happens when\nwe do a live migration.\n\n309\n00:14:58,925 --> 00:15:03,575\nNow Mike, at no point in that whole story\ndid I mention the VHDs and the storage.\n\n310\n00:15:03,575 --> 00:15:06,175\n>> I was just going to ask you Don,\nwhat happened to my virtual hard drive?\n\n311\n00:15:06,175 --> 00:15:08,785\nHow is this machine working\nwithout its virtual hard drive?\n\n312\n00:15:08,785 --> 00:15:11,445\n>> Well, the assumption is, [LAUGH]\n>> [LAUGH]\n\n313\n00:15:11,445 --> 00:15:12,105\n>> You know what\n\n314\n00:15:12,105 --> 00:15:13,700\nhappens when you assume, right?\n\n315\n00:15:13,700 --> 00:15:16,470\nThe assumption is that we're talking\nabout a fail over cluster, and\n\n316\n00:15:16,470 --> 00:15:19,200\nwhen we have a fail over cluster\nwhere is that storage going to be?\n\n317\n00:15:19,200 --> 00:15:20,170\nIt'll be in a-\n>> Cluster\n\n318\n00:15:20,170 --> 00:15:20,900\nshare-\n>> Oh, go ahead.\n\n319\n00:15:20,900 --> 00:15:23,805\n>> Cluster shared volume, or\nsome kind of shared storage, right.\n\n320\n00:15:23,805 --> 00:15:25,990\n>> Yeah, and\nthat's the key piece right there,\n\n321\n00:15:25,990 --> 00:15:30,580\nwe don't have to copy the storage because\nboth cluster nodes can see that storage.\n\n322\n00:15:30,580 --> 00:15:32,510\nThey both see it, it's right there.\n\n323\n00:15:32,510 --> 00:15:33,910\nSo when we flip from one to the other,\n\n324\n00:15:33,910 --> 00:15:37,320\nall we're really doing is giving control\nof that VHD from one server to another.\n\n325\n00:15:37,320 --> 00:15:41,040\nIf you had to copy the VHD also,\nhow long would this process take?\n\n326\n00:15:41,040 --> 00:15:41,930\n>> Way too long.\n\n327\n00:15:41,930 --> 00:15:44,030\n>> Yeah.\n>> I think your usually going to notice\n\n328\n00:15:44,030 --> 00:15:44,780\nthat down time.\n\n329\n00:15:44,780 --> 00:15:47,200\n>> The VHDX has a maximum\nsize of 64 terabytes, right.\n\n330\n00:15:47,200 --> 00:15:48,540\n>> Right.\n>> We'll say it was half that.\n\n331\n00:15:48,540 --> 00:15:49,990\nLet's say we had a 32 terabyte drive.\n\n332\n00:15:49,990 --> 00:15:51,896\nHow long would it take\nto copy that across?\n\n333\n00:15:51,896 --> 00:15:52,425\nDays?\n\n334\n00:15:52,425 --> 00:15:53,567\n[LAUGH]\n>> Yeah.\n\n335\n00:15:53,567 --> 00:15:55,795\n[LAUGH]\n>> Yeah we take a while.\n\n336\n00:15:55,795 --> 00:15:59,580\nSo shared storage is key to\nlive migration, all right?\n\n337\n00:15:59,580 --> 00:16:03,992\nIf you don't have shared storage, Why\nmigration is not really an option, okay.\n\n338\n00:16:03,992 --> 00:16:07,560\nIf you don't have shared storage,\nyou can use Hyper-V Replicas.\n\n339\n00:16:07,560 --> 00:16:10,690\nI can replicate the VM to another server,\nand\n\n340\n00:16:10,690 --> 00:16:13,390\nthen I can initiate fail over\nto jump from one to the other.\n\n341\n00:16:13,390 --> 00:16:16,660\nBut with a Hyper-V Replica,\nit doesn't synchronize RAM.\n\n342\n00:16:16,660 --> 00:16:18,710\nIt synchronizes the storage, yeah,\n\n343\n00:16:18,710 --> 00:16:21,420\nit's copying the virtual machine's\nstorage to the other side.\n\n344\n00:16:21,420 --> 00:16:26,020\nBut when you do a flip over with a Hyper-V\nReplica, it shuts down the source and\n\n345\n00:16:26,020 --> 00:16:28,990\nit starts up the destination, so-\n>> We lose that state\n\n346\n00:16:28,990 --> 00:16:30,310\nthat we were talking about earlier.\n\n347\n00:16:30,310 --> 00:16:31,130\n>> Yeah, there is no state.\n\n348\n00:16:31,130 --> 00:16:33,017\nThe RAM is not synchronized\nto the Hyper-V Replica.\n\n349\n00:16:34,110 --> 00:16:36,410\nSo keep that in mind,\nshared storage is key.\n\n350\n00:16:36,410 --> 00:16:39,870\nNow, shared storage can\ntake more than one form.\n\n351\n00:16:39,870 --> 00:16:44,320\nFor example, you might be writing to\nthat hard drive that's on a SAN, and\n\n352\n00:16:44,320 --> 00:16:47,780\nyour SAN might have it's\nown replication technology.\n\n353\n00:16:47,780 --> 00:16:51,110\nLike EMC SANs,\nthey have that RepliStore technology,\n\n354\n00:16:51,110 --> 00:16:53,980\nwhere you could have an EMC SAN\nright here in the studio with me.\n\n355\n00:16:53,980 --> 00:16:57,720\nAnd another EMC SAN up in\na data center in Atlanta,\n\n356\n00:16:57,720 --> 00:16:59,820\nsome other completely different city.\n\n357\n00:16:59,820 --> 00:17:02,280\nAnd the SAN can be replicating that.\n\n358\n00:17:02,280 --> 00:17:04,870\nSo I could have a cluster\nhere in Gainesville.\n\n359\n00:17:04,870 --> 00:17:08,410\nAnd a completely separate\ncluster up in Atlanta.\n\n360\n00:17:08,410 --> 00:17:11,390\nAnd when you do that fail over\nthe storage is already there.\n\n361\n00:17:11,390 --> 00:17:12,720\nCause the SAN is replicating.\n\n362\n00:17:12,720 --> 00:17:13,950\nSo you can do things like that.\n\n363\n00:17:13,950 --> 00:17:17,270\nYou can spread a cluster across\nmultiple geographic regions.\n\n364\n00:17:17,270 --> 00:17:20,570\nAnd the storage is taken care of, but\nHyper-V won't take care of that for you.\n\n365\n00:17:20,570 --> 00:17:24,400\nIt's up to you to take care of that on\nthe sand if you're gonna go that route.\n\n366\n00:17:24,400 --> 00:17:28,220\nSo with live migration, the assumption is\nthat we're going to have shared storage or\n\n367\n00:17:28,220 --> 00:17:29,060\nit all kind of breaks down.\n\n368\n00:17:29,060 --> 00:17:33,320\nNow, there is a way to do live\nmigration without shared storage.\n\n369\n00:17:33,320 --> 00:17:35,010\nIt just involves a little more complexity.\n\n370\n00:17:35,010 --> 00:17:36,550\nDid I put a link in the show notes?\n\n371\n00:17:36,550 --> 00:17:38,380\nI feel like I did.\n\n372\n00:17:38,380 --> 00:17:39,590\nMaybe I didn't.\n\n373\n00:17:41,400 --> 00:17:42,830\nIf I didn't I'll add one.\n\n374\n00:17:42,830 --> 00:17:45,405\nThere is actually a way to\ndo live migration between\n\n375\n00:17:45,405 --> 00:17:47,160\nnon-clusternodes if you want.\n\n376\n00:17:47,160 --> 00:17:49,750\nIt's not something I've ever done in\nproduction, I wouldn't recommend it, but\n\n377\n00:17:49,750 --> 00:17:50,740\nyou can do it.\n\n378\n00:17:50,740 --> 00:17:53,140\nAnd it's useful for\nthose multiple geographic type scenarios.\n\n379\n00:17:53,140 --> 00:17:54,890\nSo there are ways to get around that.\n\n380\n00:17:54,890 --> 00:17:57,830\nBut on the exam, shared storage\nis gonna be the order of the day.\n\n381\n00:17:59,560 --> 00:18:02,750\nAll right, so that's what's\nhappening with live migration.\n\n382\n00:18:02,750 --> 00:18:07,420\nNow, it sounds like a great solution, it\nworks really well, we wanna use it right?\n\n383\n00:18:07,420 --> 00:18:08,840\nYeah I can't think of a reason not to.\n\n384\n00:18:08,840 --> 00:18:12,310\nBut there's some considerations we\nneed to keep in mind, all right.\n\n385\n00:18:13,450 --> 00:18:16,350\nThings to remember when it\ncomes to live migration,\n\n386\n00:18:16,350 --> 00:18:17,660\nthere is actually some downtime.\n\n387\n00:18:17,660 --> 00:18:21,070\nIt's very small but\nthere is some downtime, right.\n\n388\n00:18:21,070 --> 00:18:23,490\nSo if you're expecting 24/7 five nines,\n\n389\n00:18:23,490 --> 00:18:27,770\nwell actually it would fit\nwithin five nines wouldn't it.\n\n390\n00:18:27,770 --> 00:18:32,310\nBut if you're trying to do seven nines\nof redundancy you might get it here,\n\n391\n00:18:32,310 --> 00:18:34,460\nyou're going to lose\na few seconds of access.\n\n392\n00:18:34,460 --> 00:18:40,480\nSo you might need other technologies to\ngive you that full non issue type stuff.\n\n393\n00:18:40,480 --> 00:18:44,040\nSo your virtual machine for example if you\nwant to completely eliminate that down\n\n394\n00:18:44,040 --> 00:18:47,890\ntime, your VM could actually be doing\na virtual cluster with another VM.\n\n395\n00:18:47,890 --> 00:18:52,440\nSo you have two VMs up and running\nthat are both clustered together so\n\n396\n00:18:52,440 --> 00:18:56,310\nthe service can move between them\nindependent of a live migration, right.\n\n397\n00:18:56,310 --> 00:18:57,610\nThat would have zero downtime.\n\n398\n00:18:59,340 --> 00:19:04,720\nAnother consideration is when your virtual\nmachine jumps from one host to another,\n\n399\n00:19:04,720 --> 00:19:08,100\nthe MAC address of that\nvirtual machine is preserved.\n\n400\n00:19:08,100 --> 00:19:13,480\nWell, if it's jumping from one physical\nswitch to another physical switch,\n\n401\n00:19:13,480 --> 00:19:17,790\nthe physical switch's cache what\nMAC address is on what port.\n\n402\n00:19:17,790 --> 00:19:19,677\nWell that MAC address just jumped ports.\n\n403\n00:19:19,677 --> 00:19:23,193\nIf you've got a really quiet virtual\nmachine, one that doesn't talk a lot,\n\n404\n00:19:23,193 --> 00:19:25,303\nthe switch might not\ndetect that right away and\n\n405\n00:19:25,303 --> 00:19:28,350\nthe MAC address might not jump\nto the other port right away.\n\n406\n00:19:28,350 --> 00:19:31,860\nSo your switch could still be sending\ntraffic in the wrong direction,\n\n407\n00:19:31,860 --> 00:19:34,238\nif the System doesn't update itself.\n\n408\n00:19:34,238 --> 00:19:38,730\nNow the Hyper-V integration services\nactually have this little network\n\n409\n00:19:38,730 --> 00:19:41,660\ndetection, I wanna call it a bug,\nit's not a bug, is a problem,\n\n410\n00:19:41,660 --> 00:19:43,850\nit's just this little thing\nthat runs in the background.\n\n411\n00:19:43,850 --> 00:19:46,730\nThat says, whenever I resume,\nimmediately send out some hello\n\n412\n00:19:46,730 --> 00:19:49,450\nmessages to update the switches so\nthey know I'm here.\n\n413\n00:19:49,450 --> 00:19:52,410\nSo that usually happens and\nis not a problem, but your switches\n\n414\n00:19:52,410 --> 00:19:55,410\ncan get in the way if they're caching\nthose MAC addresses too long.\n\n415\n00:19:56,840 --> 00:19:58,800\nAll right, what else do we\nneed to worry about here Mike?\n\n416\n00:19:58,800 --> 00:20:01,130\n>> Well a little bit of network I/O\ngenerated on both the source and\n\n417\n00:20:01,130 --> 00:20:01,840\nthe destination.\n\n418\n00:20:01,840 --> 00:20:04,460\nWe're gonna generate a little\nbit of traffic there.\n\n419\n00:20:04,460 --> 00:20:05,600\n>> Yeah, all that RAM.\n\n420\n00:20:05,600 --> 00:20:08,610\nIt's gotta get synchronized between the\nmachines and it does it via the network.\n\n421\n00:20:08,610 --> 00:20:11,612\nSo your network interface cards are gonna\nsee a huge spike in usage while\n\n422\n00:20:11,612 --> 00:20:13,578\nyou're copying and synchronizing that RAM.\n\n423\n00:20:13,578 --> 00:20:16,610\nThat can affect the other\nVMs on that host.\n\n424\n00:20:16,610 --> 00:20:21,160\nIf I've got ten VMs on one host and\nI migrate one of them, the other\n\n425\n00:20:21,160 --> 00:20:24,760\nnine could take a bit of a performance\nhit while that migration is occurring.\n\n426\n00:20:24,760 --> 00:20:27,035\nSo I definitely need to be aware of that.\n\n427\n00:20:27,035 --> 00:20:29,695\n>> Yeah, usually we have dedicated\nNetwork Adapters for the different,\n\n428\n00:20:29,695 --> 00:20:32,675\nlike one for connecting to the network,\none for administration.\n\n429\n00:20:32,675 --> 00:20:35,445\nAnd we could move that migration,\nmake sure that it's going across that\n\n430\n00:20:35,445 --> 00:20:40,520\nadministration dedicated network adapter\nto try to eliminate some of that from\n\n431\n00:20:40,520 --> 00:20:42,470\ncausing congestion on\nthe normal part of the network.\n\n432\n00:20:42,470 --> 00:20:47,850\n>> Yep, the other thing that we need\nto mention is a technology called\n\n433\n00:20:47,850 --> 00:20:51,705\nSRIOV and it's one of those\nthat I could never remember.\n\n434\n00:20:51,705 --> 00:20:53,370\n>> [LAUGH]\n>> IOV is the Input, Output,\n\n435\n00:20:53,370 --> 00:20:54,464\nVirtualization.\n\n436\n00:20:54,464 --> 00:20:55,149\nThe SR is?\n\n437\n00:20:55,149 --> 00:20:55,868\n>> Single Root.\n\n438\n00:20:55,868 --> 00:20:56,529\n>> Thank you Mike.\n\n439\n00:20:56,529 --> 00:20:57,227\n>> Single Root.\n\n440\n00:20:57,227 --> 00:21:01,430\n>> Single Root IO virtualization, SRIOV.\n\n441\n00:21:01,430 --> 00:21:02,860\nIt's a cool feature.\n\n442\n00:21:02,860 --> 00:21:05,270\nIt's one you might not be familiar with,\nand so\n\n443\n00:21:05,270 --> 00:21:07,880\nI want to talk a little\nabout what SRIOV is.\n\n444\n00:21:07,880 --> 00:21:13,360\nWe need to understand how it impacts live\nmigration and how it impacts our design.\n\n445\n00:21:13,360 --> 00:21:15,460\nSRIOV is a really neat technology.\n\n446\n00:21:15,460 --> 00:21:18,120\nNormally, let's say I've got a VM host.\n\n447\n00:21:18,120 --> 00:21:20,670\nI've got this Hyper-V host machine.\n\n448\n00:21:20,670 --> 00:21:23,350\nAnd it's got five virtual machines on it.\n\n449\n00:21:23,350 --> 00:21:28,720\nAnd all five virtual machines\nare sharing one Network Adapter.\n\n450\n00:21:28,720 --> 00:21:32,340\nOne Network Adapter Connection to\nthe Interface, to the Network.\n\n451\n00:21:32,340 --> 00:21:35,310\nWell, the way we share that is\nwe create a Virtual Switch.\n\n452\n00:21:35,310 --> 00:21:37,600\nLet me show you guys and example here.\n\n453\n00:21:37,600 --> 00:21:41,600\nLet me just pull up a Hyper-V\nmachine on my System.\n\n454\n00:21:41,600 --> 00:21:42,800\nAnd here we go.\n\n455\n00:21:42,800 --> 00:21:46,490\nSo I've got this s comma one, and I've\ngot a Virtual Machine here, VMO3, right?\n\n456\n00:21:46,490 --> 00:21:50,180\nSo if I whip up some more\nvirtual machines here, so\n\n457\n00:21:50,180 --> 00:21:53,400\nmaybe I'll make like VMO5 or something.\n\n458\n00:21:53,400 --> 00:21:57,020\nAs I create these virtual machines,\nthey need a Network Interface.\n\n459\n00:21:57,020 --> 00:22:00,810\nThey've gotta have some kinda\ninterface to get Network Connectivity.\n\n460\n00:22:00,810 --> 00:22:02,970\nAnd when you get to this\nconfigure networking,\n\n461\n00:22:02,970 --> 00:22:04,850\nyou choose the network interface.\n\n462\n00:22:04,850 --> 00:22:06,790\nI don't have one right now, so\nI'll just leave it not connected.\n\n463\n00:22:07,800 --> 00:22:09,180\nWell, when you create it,\n\n464\n00:22:09,180 --> 00:22:11,251\nwhat you're doing is you're actually\nplugging them into a virtual switch.\n\n465\n00:22:11,251 --> 00:22:15,950\nAnd the Virtual Switch we can see over\nhere I've got my Virtual Switch manager,\n\n466\n00:22:15,950 --> 00:22:17,960\nand I can create a virtual switch.\n\n467\n00:22:17,960 --> 00:22:20,080\nI can create an external one.\n\n468\n00:22:20,080 --> 00:22:22,910\nThis one's gonna be a little upsoten\nbecause I'm in a cluster on it,\n\n469\n00:22:22,910 --> 00:22:24,470\nso that's why it's not showing up.\n\n470\n00:22:24,470 --> 00:22:25,780\nIt's a clustered mode.\n\n471\n00:22:25,780 --> 00:22:29,015\nLet me connect to a non-clustered\nmode that's running, I think.\n\n472\n00:22:29,015 --> 00:22:30,410\nHyper-V, I think.\n\n473\n00:22:30,410 --> 00:22:32,390\nSCCMO1 would be a good one.\n\n474\n00:22:33,830 --> 00:22:36,350\nGet connected to it, there we go.\n\n475\n00:22:36,350 --> 00:22:38,320\nSo in this guy,\nI can go into my Virtual Switch Manager,\n\n476\n00:22:38,320 --> 00:22:40,080\nand see how I've got these\nvirtual switches here.\n\n477\n00:22:40,080 --> 00:22:44,660\nAnd the Virtual Switch can be\ntied to a Physical Adaptor, or\n\n478\n00:22:44,660 --> 00:22:46,200\nit can be private like these two are here.\n\n479\n00:22:46,200 --> 00:22:47,760\nI'll just make another one.\n\n480\n00:22:47,760 --> 00:22:49,840\nOh, does it not have an extra shoot,\n\n481\n00:22:49,840 --> 00:22:52,250\nit doesn't have an extra Physical Adapter,\nwell anyhow,\n\n482\n00:22:52,250 --> 00:22:56,240\neither way, you create a Virtual Switch\nand you attach an external adapter to it.\n\n483\n00:22:56,240 --> 00:23:00,350\nNow, when that's attached,\nany virtual machine attached\n\n484\n00:23:00,350 --> 00:23:03,260\nto that Virtual Switch is\nsharing that network card and\n\n485\n00:23:03,260 --> 00:23:06,270\nit It does it through these\nSynthetic Network Adaptor driver.\n\n486\n00:23:06,270 --> 00:23:09,250\nSo, you send calls to\nthe Synthetic Driver Adaptor and\n\n487\n00:23:09,250 --> 00:23:14,000\nthen Hyper-V takes that, translates it and\nsends it out to Physical Adaptor.\n\n488\n00:23:14,000 --> 00:23:18,040\nNow, that's fine for most deployments,\nmost people are perfectly fine with that.\n\n489\n00:23:18,040 --> 00:23:22,720\nBut, if you've got some kind of\noperation that's heavy on Network IO.\n\n490\n00:23:22,720 --> 00:23:25,390\nAnd you want the best\nperformance possible.\n\n491\n00:23:25,390 --> 00:23:26,730\nThis can actually cause some problems.\n\n492\n00:23:26,730 --> 00:23:28,630\nRight?\nIt can cause some,\n\n493\n00:23:28,630 --> 00:23:33,020\nsome performance degradation that most\nof us would never even notice but\n\n494\n00:23:33,020 --> 00:23:37,720\nin a heavy Network IO\nenvironment you would.\n\n495\n00:23:37,720 --> 00:23:43,020\nSo what you can do, is you could\nbuy physical network adapters,\n\n496\n00:23:43,020 --> 00:23:45,790\nthat support SRIOV, all right.\n\n497\n00:23:45,790 --> 00:23:50,516\nIf they support that, what they do is\nthey expose the Physical Adaptor to\n\n498\n00:23:50,516 --> 00:23:52,847\nthe virtual machines, all right.\n\n499\n00:23:52,847 --> 00:23:56,144\nWhat they do is they create these,\nthey call them VFs, right?\n\n500\n00:23:56,144 --> 00:23:57,061\n[CROSSTALK] Virtual.\n\n501\n00:23:57,061 --> 00:23:57,711\n>> Virtual Functions.\n\n502\n00:23:57,711 --> 00:23:58,826\n>> That's it, virtual functions.\n\n503\n00:23:58,826 --> 00:24:00,946\nAnd the virtual function,\n\n504\n00:24:00,946 --> 00:24:06,180\nit's basically like a virtualized PCIe,\nor PCI Express bus.\n\n505\n00:24:06,180 --> 00:24:07,700\nAnd exposes that to the virtual machine.\n\n506\n00:24:07,700 --> 00:24:10,140\nAnd it says hey if you want\nto go out to the network,\n\n507\n00:24:10,140 --> 00:24:11,760\nyou can just connect\nright to one of my VFs,\n\n508\n00:24:11,760 --> 00:24:15,760\nright to my virtual function, and I'll\nsend you right out the physical interface.\n\n509\n00:24:15,760 --> 00:24:18,872\nYou can bypass the virtual\nswitches altogether.\n\n510\n00:24:18,872 --> 00:24:20,120\nAll right?\n\n511\n00:24:20,120 --> 00:24:24,650\nThat let's the virtual machines have true\n\n512\n00:24:24,650 --> 00:24:30,080\nunmanipulated network access, but\nthey can get very, very fast access.\n\n513\n00:24:30,080 --> 00:24:32,930\nThe only thing faster would be\nif they had a dedicated NIC.\n\n514\n00:24:32,930 --> 00:24:33,710\nRight?\n\n515\n00:24:33,710 --> 00:24:38,180\nBut a physical network interface that\nsupports SRIOV, supports dividing it up\n\n516\n00:24:38,180 --> 00:24:41,920\ninto multiple VFs and the more you pay for\na card, the more VFs it supports.\n\n517\n00:24:41,920 --> 00:24:45,550\nAnd so it's like having a bunch\nphysical adapters all in one connector,\n\n518\n00:24:45,550 --> 00:24:46,260\nit's cool technology.\n\n519\n00:24:47,380 --> 00:24:50,368\nWell when you live migrate\nfrom one server to another.\n\n520\n00:24:50,368 --> 00:24:55,690\nThere's an assumption that we have\nthe same hardware on the source and\n\n521\n00:24:55,690 --> 00:24:56,610\ndestination.\n\n522\n00:24:56,610 --> 00:24:59,995\nOr that the hardware is\ncomparable between the two.\n\n523\n00:24:59,995 --> 00:25:00,540\nOkay?\n\n524\n00:25:00,540 --> 00:25:06,420\nWell if I do a live migration between two\nphysical servers and the CPUs don't match.\n\n525\n00:25:06,420 --> 00:25:10,190\nLet's say one of them's got Intel CPUs and\nthe other has A and D CPUs.\n\n526\n00:25:10,190 --> 00:25:11,580\nWhat happens?\n\n527\n00:25:11,580 --> 00:25:12,500\nLAN migration fails.\n\n528\n00:25:12,500 --> 00:25:13,490\nThe machine blue screens.\n\n529\n00:25:13,490 --> 00:25:14,540\nYou can't do it.\n\n530\n00:25:14,540 --> 00:25:17,380\nYou can't move between an Intel and\nan AMD system, it doesn't work.\n\n531\n00:25:17,380 --> 00:25:18,510\nAll right.\n\n532\n00:25:18,510 --> 00:25:23,965\nWhat if I go between one\nserver that has Intel Xeon I\n\n533\n00:25:23,965 --> 00:25:27,365\nwell there is no I7's out there,\nmaybe a server that has I5's in it.\n\n534\n00:25:27,365 --> 00:25:30,585\nAnd I'm live migrating to another\nserver that has I7's in it.\n\n535\n00:25:30,585 --> 00:25:33,365\nWell, sometimes it will blue screen.\n\n536\n00:25:33,365 --> 00:25:34,010\nSometimes it won't.\n\n537\n00:25:34,010 --> 00:25:34,595\nRight?\n\n538\n00:25:34,595 --> 00:25:36,880\nYou have to do testing, you have to check.\n\n539\n00:25:36,880 --> 00:25:39,990\nThe same thing goes for SRIOV.\n\n540\n00:25:39,990 --> 00:25:44,970\nIf you've got SRIOV on the source,\nand you live migrate to a destination\n\n541\n00:25:44,970 --> 00:25:49,290\nthat doesn't have SRIOV,\nsometimes it works, sometimes it's okay.\n\n542\n00:25:49,290 --> 00:25:51,460\nRight?\nYou might get a little bit more down time\n\n543\n00:25:51,460 --> 00:25:55,864\nwhile the destination system kind of flips\nback over the old synthetic adapter, or\n\n544\n00:25:55,864 --> 00:26:00,740\nit may [INAUDIBLE], it may fail,\nand you lose network connectivity.\n\n545\n00:26:00,740 --> 00:26:04,660\nSo, it's important if you're deploying\ntechnology that is like SRMV that\n\n546\n00:26:04,660 --> 00:26:07,810\nyou test that out, you see how\nit impacts your lab migrations.\n\n547\n00:26:07,810 --> 00:26:10,865\nDon't wait until you're in full\nproduction to give it a shot.\n\n548\n00:26:10,865 --> 00:26:11,740\nRight?\nTest it out.\n\n549\n00:26:11,740 --> 00:26:15,130\nBring up a test VM, and\nlive migrate it, and see what happens.\n\n550\n00:26:15,130 --> 00:26:15,730\nAll right?\n\n551\n00:26:15,730 --> 00:26:17,880\nMake sure you test that thoroughly, and\n\n552\n00:26:17,880 --> 00:26:22,310\nideally have matching\nhardware between your hosts.\n\n553\n00:26:22,310 --> 00:26:26,190\nSo, that's definitely something you wanna\nkeep in mind and I did put a link for\n\n554\n00:26:26,190 --> 00:26:28,830\nSRIOV in the notes because\nI want you guys to be\n\n555\n00:26:28,830 --> 00:26:30,900\nable to learn more about that technology.\n\n556\n00:26:30,900 --> 00:26:34,300\nI also, hopefully you don't have to use\nit, but I put a little power shell command\n\n557\n00:26:34,300 --> 00:26:37,570\nin the notes, that tells you how to\ndisable SRIV if you don't want it.\n\n558\n00:26:37,570 --> 00:26:38,370\nRight.\nYou can actually shut it\n\n559\n00:26:38,370 --> 00:26:41,020\noff on a network adapter, and\nthen you don't have to worry about it.\n\n560\n00:26:41,020 --> 00:26:43,440\nBut you do get some extra\nperformance out of it.\n\n561\n00:26:43,440 --> 00:26:46,651\nSo if your hardware supports it you may as\nwell take advantage of what you've got.\n\n562\n00:26:46,651 --> 00:26:47,547\nRight.\nI'd hate to\n\n563\n00:26:47,547 --> 00:26:49,820\nsee you waste the technology\nwhen it was there.\n\n564\n00:26:49,820 --> 00:26:50,900\n>> Absolutely.\nAnd we can mark, and\n\n565\n00:26:50,900 --> 00:26:54,020\nwe can control what machines\nare allowed to live migrate to.\n\n566\n00:26:54,020 --> 00:26:57,690\nSo we've got a couple of machines,\nmaybe most of our machines have our SRIOV,\n\n567\n00:26:57,690 --> 00:27:00,390\nnetwork adapters in them, but\nI've got a couple that don't yet.\n\n568\n00:27:00,390 --> 00:27:05,190\nI could prevent those, mark those so we're\nnot allowed to migrate to those machines.\n\n569\n00:27:05,190 --> 00:27:06,300\nThat way we don't get our failures.\n\n570\n00:27:08,070 --> 00:27:10,950\n>> All right, well, those are some of the\nconsiderations we need to have with live\n\n571\n00:27:10,950 --> 00:27:12,860\nmigration, definitely\nstuff to think about.\n\n572\n00:27:12,860 --> 00:27:16,250\nIt's not the only type of migration that's\nout there, though, and on the exam,\n\n573\n00:27:16,250 --> 00:27:18,110\nthey expect you to know\nabout some of the others.\n\n574\n00:27:18,110 --> 00:27:19,200\nSo we need to stop and\n\n575\n00:27:19,200 --> 00:27:23,800\ntalk about storage migration next,\none of the newer migration types.\n\n576\n00:27:23,800 --> 00:27:26,065\nLooking at the clock we're a little\nlow on time for this segment.\n\n577\n00:27:26,065 --> 00:27:27,900\nSo,let's pause it and take a break.\n\n578\n00:27:27,900 --> 00:27:30,280\nWhen we get back we'll talk\nabout storage migration,\n\n579\n00:27:30,280 --> 00:27:33,550\nand then we'll move on to a little\nbit of physical to virtual,\n\n580\n00:27:33,550 --> 00:27:35,410\nvirtual to virtual, and\nthat kind of storage migration too.\n\n581\n00:27:35,410 --> 00:27:38,370\nSo all sorts of different ways,\nto move our VMs around.\n\n582\n00:27:38,370 --> 00:27:39,775\nStay tuned, we'll be back in a few.\n\n583\n00:27:39,775 --> 00:27:46,380\n[MUSIC]\n\n584\n00:27:46,380 --> 00:27:48,510\nAll right, welcome back everybody.\n\n585\n00:27:48,510 --> 00:27:51,310\nSo before the break we were\ntalking about live migration and\n\n586\n00:27:51,310 --> 00:27:53,160\nwhat I want to talk about\nnow is storage migration.\n\n587\n00:27:53,160 --> 00:27:55,680\nNow, this is one that\nis a little less known\n\n588\n00:27:55,680 --> 00:27:58,150\nbecause it's one of the newer\nmigration types, and let\n\n589\n00:27:58,150 --> 00:28:01,590\nme just show you real quick here in the\nfailover manager what I'm talking about.\n\n590\n00:28:01,590 --> 00:28:03,240\nNormally when we fail\nover a virtual machine,\n\n591\n00:28:03,240 --> 00:28:07,700\nwe're failing over the But running VM and\nits memory and all that stuff.\n\n592\n00:28:07,700 --> 00:28:08,590\nThat's live migration.\n\n593\n00:28:08,590 --> 00:28:10,660\nYou can go into your\nfailover cluster manager.\n\n594\n00:28:10,660 --> 00:28:13,660\nAnd you can find a role,\nyou right click on it.\n\n595\n00:28:13,660 --> 00:28:14,840\nYou go to move.\n\n596\n00:28:14,840 --> 00:28:17,725\nAnd you do a live migration and\nyou pick a destination.\n\n597\n00:28:17,725 --> 00:28:18,840\nRight.\n\n598\n00:28:18,840 --> 00:28:21,270\nWell beneath it I've\ngot a quick migration.\n\n599\n00:28:21,270 --> 00:28:23,330\nWell what's a quick migration?\n\n600\n00:28:23,330 --> 00:28:25,715\nSame thing as a live migration,\nexcept you don't copy memory.\n\n601\n00:28:25,715 --> 00:28:28,200\nRight?\nIt just shuts down the source,\n\n602\n00:28:28,200 --> 00:28:31,330\nstarts up the destination,\nyou lose your state, but it's quick.\n\n603\n00:28:31,330 --> 00:28:32,475\nMigrates are over and that's that.\n\n604\n00:28:32,475 --> 00:28:33,750\nRight?\n\n605\n00:28:33,750 --> 00:28:38,005\nAnd then the option right beneath it,\nvirtual machine storage.\n\n606\n00:28:38,005 --> 00:28:39,440\nRight?\n\n607\n00:28:39,440 --> 00:28:44,020\nThis lets us move the virtual machine\nstorage from one location to another.\n\n608\n00:28:44,020 --> 00:28:47,410\nWhen we do a live migration,\nwhere's our storage move to?\n\n609\n00:28:47,410 --> 00:28:48,360\n>> It's not moved at all right?\n\n610\n00:28:48,360 --> 00:28:50,540\nWe've got our shared storage so\nit doesn't go anywhere.\n\n611\n00:28:50,540 --> 00:28:52,940\n>> That's right.\nIt's part of what it makes it fast and\n\n612\n00:28:52,940 --> 00:28:53,570\nmakes it live.\n\n613\n00:28:54,800 --> 00:28:56,180\nBut what if I do need to move it?\n\n614\n00:28:56,180 --> 00:28:59,870\nWhat if I have two SANs and\nI need to move it from one SAN to another?\n\n615\n00:28:59,870 --> 00:29:02,800\nWhat if the virtual machine, I'm gonna\nmove it to my disaster recovery site.\n\n616\n00:29:02,800 --> 00:29:05,870\nMaybe I built it here, but\nI wanna move it to my DR site, so\n\n617\n00:29:05,870 --> 00:29:08,120\nI've gotta send it to a different\ncluster or somewhere else?\n\n618\n00:29:08,120 --> 00:29:10,088\nWell, we can migrate the storage.\n\n619\n00:29:10,088 --> 00:29:13,450\nWhen you right-click on that and\nchoose move and virtual machine storage,\n\n620\n00:29:13,450 --> 00:29:14,920\nit just launches that wizard.\n\n621\n00:29:14,920 --> 00:29:18,740\nAnd you can walk through and choose\nwhere you want that storage to end up.\n\n622\n00:29:18,740 --> 00:29:22,800\nAnd you'll see your cluster shared volumes\nright here, and you can pick amongst them.\n\n623\n00:29:22,800 --> 00:29:24,660\nI've only got one, but if we had others,\n\n624\n00:29:24,660 --> 00:29:26,710\nwe would just pick the destination and\nmove it.\n\n625\n00:29:26,710 --> 00:29:27,920\nAll right.\n\n626\n00:29:27,920 --> 00:29:30,370\nNow very similar to the live migration,\n\n627\n00:29:30,370 --> 00:29:34,225\nwe need to understand the steps that\nhappen during that storage movement.\n\n628\n00:29:34,225 --> 00:29:36,930\nRight.\nAnd it's very similar to live,\n\n629\n00:29:36,930 --> 00:29:40,470\nexcept it's the VHDs\nthat are being copied.\n\n630\n00:29:40,470 --> 00:29:43,350\nThat means this process is gonna\ntake a lot longer because you\n\n631\n00:29:43,350 --> 00:29:46,130\nusually have a lot more data to move.\n\n632\n00:29:46,130 --> 00:29:48,488\nSo what happens when we\ndo a storage migration?\n\n633\n00:29:48,488 --> 00:29:49,620\nRight?\nStep One.\n\n634\n00:29:49,620 --> 00:29:50,730\nWe initiate it.\n\n635\n00:29:50,730 --> 00:29:54,800\nWe can initiate via the GUI or\nI can initiate it via the power shell.\n\n636\n00:29:54,800 --> 00:29:56,100\nAnd we can do it that way.\n\n637\n00:29:56,100 --> 00:29:58,900\nThere are some ways to get\nit automated in S com, but\n\n638\n00:29:58,900 --> 00:30:02,730\nit's not like one of the main things\nthat DO, dynamic optimization, looks at.\n\n639\n00:30:02,730 --> 00:30:05,090\nSo there are ways to go about it, but\n\n640\n00:30:05,090 --> 00:30:09,320\nnormally it's gonna be initiated here\nfrom the GUI or from the PowerShell.\n\n641\n00:30:09,320 --> 00:30:10,110\nRight?\n\n642\n00:30:10,110 --> 00:30:11,740\nThen, what happens next?\n\n643\n00:30:11,740 --> 00:30:13,010\n>> We gotta make a new hard drive, right?\n\n644\n00:30:13,010 --> 00:30:17,820\nSo on our destination we're gonna create\na blank VHD that'll be used to start\n\n645\n00:30:17,820 --> 00:30:21,910\nmoving that data over from our existing\nstorage to our new storage location.\n\n646\n00:30:21,910 --> 00:30:27,950\nAnd that is where we're gonna see a big\nspike and both your disk IO, both\n\n647\n00:30:27,950 --> 00:30:31,470\nthe source and the destination as well as\nnetwork IO on that source and destination.\n\n648\n00:30:31,470 --> 00:30:33,991\n>> Yeah there's some really\ninteresting stuff that happens here.\n\n649\n00:30:33,991 --> 00:30:34,670\nRight.\nSo\n\n650\n00:30:34,670 --> 00:30:38,520\nthe destination creates that\nduplicate drive just like Mike said.\n\n651\n00:30:38,520 --> 00:30:40,210\nAnd then it starts to copy.\n\n652\n00:30:40,210 --> 00:30:43,640\nSo step three it's really copying\nthe data from one drive to another.\n\n653\n00:30:43,640 --> 00:30:47,320\nBut what happens to changes that\noccur while the copy is happening?\n\n654\n00:30:47,320 --> 00:30:51,070\nWell, step four,\nwhile the copy is running,\n\n655\n00:30:51,070 --> 00:30:55,130\nany changes that happen are made\non both sides simultaneously.\n\n656\n00:30:55,130 --> 00:30:57,800\nThe change comes in,\nthe write to the disk, and\n\n657\n00:30:57,800 --> 00:30:59,390\nit just sends the write to both sides.\n\n658\n00:30:59,390 --> 00:31:02,380\nAnd it performs the write on the source,\nand the destination.\n\n659\n00:31:02,380 --> 00:31:02,920\nRight?\n\n660\n00:31:02,920 --> 00:31:08,130\nNow, it has to do both because we're\nstill running from the source,\n\n661\n00:31:08,130 --> 00:31:10,300\nour virtual machine is\nstill using the source.\n\n662\n00:31:10,300 --> 00:31:12,270\nThe destination is gonna have\nto get that change anyway,\n\n663\n00:31:12,270 --> 00:31:16,000\nmight as well send it there now,\nbut the destination's not done yet.\n\n664\n00:31:16,000 --> 00:31:18,720\nSo we can't say, we'll just write\nto the destination not the source\n\n665\n00:31:18,720 --> 00:31:20,670\nbecause the destination's incomplete.\n\n666\n00:31:20,670 --> 00:31:24,970\nSo it's gotta write them to both and\nthat results in performance degradation.\n\n667\n00:31:24,970 --> 00:31:27,490\nYour reads aren't really\naffected that much, but\n\n668\n00:31:27,490 --> 00:31:30,635\nyour writes are because it's having to\napply the writes in more than one place.\n\n669\n00:31:30,635 --> 00:31:32,010\nRight.\n\n670\n00:31:32,010 --> 00:31:37,730\nSo that write operation is occurring\nthen when everything is complete.\n\n671\n00:31:37,730 --> 00:31:38,460\nWhen the source and\n\n672\n00:31:38,460 --> 00:31:42,010\nthe destination are identical, which\ncould take hours depending on the size.\n\n673\n00:31:42,010 --> 00:31:46,340\nBut when they're identical,\nthen the active vertical machine is\n\n674\n00:31:46,340 --> 00:31:49,700\npointed over to the copy, and\nthe source is dismantled.\n\n675\n00:31:50,930 --> 00:31:55,900\nThe source is not dismantled until we see\nheartbeats come in on that destination.\n\n676\n00:31:55,900 --> 00:32:00,348\nSo when the VM is flipped over to the new\nstorage location, hyper v watches for\n\n677\n00:32:00,348 --> 00:32:01,380\nthat heartbeat.\n\n678\n00:32:01,380 --> 00:32:04,332\nWhen it sees the heartbeat and\nit sees things active,\n\n679\n00:32:04,332 --> 00:32:07,770\nthen the very last step it\ndeletes the source VHD.\n\n680\n00:32:07,770 --> 00:32:08,620\nAnd now we're moved over.\n\n681\n00:32:08,620 --> 00:32:11,390\n>> It's just not going to do that\nuntil it's sure that new machine is\n\n682\n00:32:11,390 --> 00:32:12,000\nup and running.\n\n683\n00:32:12,000 --> 00:32:14,450\nThat gives us that fail back opportunity.\n\n684\n00:32:14,450 --> 00:32:17,570\nIf something was to happen\nduring that process we have\n\n685\n00:32:17,570 --> 00:32:18,910\nthe original to go back to.\n\n686\n00:32:18,910 --> 00:32:19,700\n>> Yeah.\n\n687\n00:32:19,700 --> 00:32:21,900\nSo a pretty straightforward process.\n\n688\n00:32:21,900 --> 00:32:23,560\nAlmost identical to live migration.\n\n689\n00:32:23,560 --> 00:32:25,770\nAnd in fact you can use the two together.\n\n690\n00:32:25,770 --> 00:32:30,060\nMaybe you're trying to get\ncompletely off of one SAN and\n\n691\n00:32:30,060 --> 00:32:33,550\nyou're trying to get off of a particular\nvirtual machine host or whatever.\n\n692\n00:32:33,550 --> 00:32:35,620\nYou use live migration to\nchange the host your on,\n\n693\n00:32:35,620 --> 00:32:37,620\nyou use storage migration to\nchange the SAN that your on.\n\n694\n00:32:37,620 --> 00:32:39,640\nAnd now you can do\nmaintenance on both sides and\n\n695\n00:32:39,640 --> 00:32:41,970\nit gives you that full flexibility.\n\n696\n00:32:41,970 --> 00:32:45,550\nJust remember live migration\ndoesn't move storage by default so\n\n697\n00:32:45,550 --> 00:32:48,210\nstorage migration takes care of that.\n\n698\n00:32:48,210 --> 00:32:51,970\nNow storage migration, if we're moving\nbetween clustered chair volumes that\n\n699\n00:32:51,970 --> 00:32:57,575\nare on the same fiber channel san, it's\ngonna create a ton of disk aisle on that.\n\n700\n00:32:57,575 --> 00:33:00,200\nRight?\nAs it reads all that data and\n\n701\n00:33:00,200 --> 00:33:03,740\nwrites all of that data, so it could\nruin a whole bunch of stuff there.\n\n702\n00:33:03,740 --> 00:33:05,750\nRight?\nThat could be a problem.\n\n703\n00:33:05,750 --> 00:33:07,560\nMake sure that you're ready for that.\n\n704\n00:33:07,560 --> 00:33:09,070\nRight?\nIf it's an emergency, you just do it.\n\n705\n00:33:09,070 --> 00:33:10,930\nRight?\nThat's how it is, but\n\n706\n00:33:10,930 --> 00:33:14,170\nif it's not an emergency, and\ndisk I/O is important to you, this needs\n\n707\n00:33:14,170 --> 00:33:19,110\nto be scheduled for after hours,\nweekends, whenever it is that you can.\n\n708\n00:33:19,110 --> 00:33:20,378\nAll right.\nSo storage migration,\n\n709\n00:33:20,378 --> 00:33:21,210\npretty cut and dried.\n\n710\n00:33:22,550 --> 00:33:25,570\nSomething similar to storage migration,\nthough.\n\n711\n00:33:25,570 --> 00:33:26,850\nV to V and P to V.\n\n712\n00:33:26,850 --> 00:33:30,430\nThese are terms you'll hear batted\naround a lot in white papers and\n\n713\n00:33:30,430 --> 00:33:32,090\nadvertisements out there on the internet.\n\n714\n00:33:32,090 --> 00:33:36,624\nWe're talking about physical to virtual\nand virtual to virtual migrations.\n\n715\n00:33:36,624 --> 00:33:37,770\nRight?\n\n716\n00:33:37,770 --> 00:33:40,900\nAnd the hard drives,\nthat's kind of a big piece of that.\n\n717\n00:33:40,900 --> 00:33:43,430\nSo let's just start with\nphysical to virtual.\n\n718\n00:33:43,430 --> 00:33:44,910\nMike, what's that?\n\n719\n00:33:44,910 --> 00:33:48,990\n>> Maybe we wanna take, we've got a\nmachine that's currently a physical server\n\n720\n00:33:48,990 --> 00:33:51,190\nand we wanna convert that\ninto a virtual machine.\n\n721\n00:33:51,190 --> 00:33:54,440\nSo the process is gonna involve taking\nall the data that's currently on the hard\n\n722\n00:33:54,440 --> 00:33:58,590\ndrives on that physical machine, moving\nthat over into a virtual hard drive.\n\n723\n00:33:58,590 --> 00:34:02,140\nAnd then taking some of our configuration\nfrom an existing physical machine and\n\n724\n00:34:02,140 --> 00:34:03,980\napplying it to that new virtual machine.\n\n725\n00:34:05,010 --> 00:34:08,930\n>> And this is a part of moving\nto a virtual infrastructure.\n\n726\n00:34:08,930 --> 00:34:11,221\nWhere you look at all your\nphysical machines and just say,\n\n727\n00:34:11,221 --> 00:34:13,430\nwhich of these physical machines,\ncan I convert over?\n\n728\n00:34:13,430 --> 00:34:16,780\nAnd I know we said in an earlier episode\nthere's some that you don't to do P to V\n\n729\n00:34:16,780 --> 00:34:18,620\non, like a domain controller.\n\n730\n00:34:18,620 --> 00:34:21,240\nThere's no point in doing P to V,\nyou can just bring up a new\n\n731\n00:34:21,240 --> 00:34:24,980\ndomain controller that's virtual, and\nthen you demote the old and ditch it.\n\n732\n00:34:24,980 --> 00:34:26,600\n>> Let replication do all the work for\nyou.\n\n733\n00:34:26,600 --> 00:34:27,590\nWe're good to go.\n\n734\n00:34:27,590 --> 00:34:31,100\n>> But if you've got some third party\nsoftware, or a SQL database server or\n\n735\n00:34:31,100 --> 00:34:35,040\nsomething like that that's been heavily\nconfigured and has all your data, wouldn't\n\n736\n00:34:35,040 --> 00:34:39,300\nit be nice if we could just snag a copy of\nthat and turn it into a virtual machine?\n\n737\n00:34:39,300 --> 00:34:40,780\nWell you can, right?\n\n738\n00:34:40,780 --> 00:34:44,480\nPhysical to virtual is actually\nnot that painful a process.\n\n739\n00:34:44,480 --> 00:34:47,190\nIf you have software like\nthe System Center Virtual Machine Manager\n\n740\n00:34:47,190 --> 00:34:48,720\nit can actually do it for you.\n\n741\n00:34:48,720 --> 00:34:51,560\nYou go in there and you just point\nit to that source machine and\n\n742\n00:34:51,560 --> 00:34:56,070\nit reaches out, installs some agents,\nand makes that virtual clone.\n\n743\n00:34:57,360 --> 00:35:00,320\nIf you don't have SCVMM,\nthere's other tools there too,\n\n744\n00:35:00,320 --> 00:35:04,712\nlike Microsoft has their\nMicrosoft Virtual Machine Converter.\n\n745\n00:35:04,712 --> 00:35:06,617\nRight?\n\n746\n00:35:06,617 --> 00:35:08,145\nMVMC.\n\n747\n00:35:08,145 --> 00:35:11,020\nDownload Virtual machine why is that so\nhard?\n\n748\n00:35:11,020 --> 00:35:13,610\nWhich is a free tool you can\ndownload it from their website.\n\n749\n00:35:13,610 --> 00:35:15,990\nAnd you can install it and\nit does the same basic process.\n\n750\n00:35:15,990 --> 00:35:18,490\nNow why do I need a tool for that,\n\n751\n00:35:18,490 --> 00:35:21,430\nwhy can't I just copy the hard\ndrives over and be done with it?\n\n752\n00:35:21,430 --> 00:35:24,720\nWell there are a few little things\nthat need to happen and the SCVMM or\n\n753\n00:35:24,720 --> 00:35:28,545\nthe MVMC they can all help with\nmaking that a lot more seamless.\n\n754\n00:35:28,545 --> 00:35:29,750\nRight?\n\n755\n00:35:29,750 --> 00:35:32,350\nSo, let's run through the steps\nthat are involved in that,\n\n756\n00:35:32,350 --> 00:35:34,475\nwhen we do a physical\nto virtual conversion.\n\n757\n00:35:34,475 --> 00:35:35,360\nRight?\n\n758\n00:35:35,360 --> 00:35:37,050\nThe first thing that happens is,\n\n759\n00:35:37,050 --> 00:35:39,600\nlet's just assume we're going\nto use a tool to drive this.\n\n760\n00:35:39,600 --> 00:35:40,400\nRight?\n\n761\n00:35:40,400 --> 00:35:41,970\nIf we're using a tool to drive it,\n\n762\n00:35:41,970 --> 00:35:45,410\nthe tool will typically start by running\nsome kind of analysis of the physical\n\n763\n00:35:45,410 --> 00:35:48,000\nmachine to determine whether\nit can be virtualized.\n\n764\n00:35:48,000 --> 00:35:51,790\nBecause there are certain things like\ncertain software applications that can\n\n765\n00:35:51,790 --> 00:35:55,110\ncause problems, or proprietary\nhardware that can cause problems.\n\n766\n00:35:55,110 --> 00:35:59,510\nAnd the SCVMM, the MVMC, they test for\nthat and they let you know whether\n\n767\n00:35:59,510 --> 00:36:04,385\nsomething is going to cause a problem,\nthat migration.\n\n768\n00:36:04,385 --> 00:36:07,180\nRight?\nMaybe hard drives that are over 64\n\n769\n00:36:07,180 --> 00:36:11,770\nterabytes in size, or something like that,\nit would say wow, this is just too big.\n\n770\n00:36:11,770 --> 00:36:12,385\nWe can't migrate.\n\n771\n00:36:12,385 --> 00:36:13,320\nRight?\n\n772\n00:36:13,320 --> 00:36:16,862\nBut assuming that we pass the tests,\nwe can start the migration.\n\n773\n00:36:16,862 --> 00:36:17,400\nAll right?\n\n774\n00:36:17,400 --> 00:36:19,450\nAnd the way it works is,\n\n775\n00:36:19,450 --> 00:36:24,120\nstep one, it has to typically install\na little bit of agent software.\n\n776\n00:36:24,120 --> 00:36:25,790\nThat's not always the case.\n\n777\n00:36:25,790 --> 00:36:29,050\nLike the SCVMN uses\nMicrosoft's Image X utility.\n\n778\n00:36:29,050 --> 00:36:30,790\nOr actually it uses the DISM now.\n\n779\n00:36:30,790 --> 00:36:33,470\nSo it's kind of changed to\nslightly different utility.\n\n780\n00:36:33,470 --> 00:36:36,040\nTo creat the image of the system.\n\n781\n00:36:36,040 --> 00:36:37,510\nAnd it can use Volume Shadow Copy and\n\n782\n00:36:37,510 --> 00:36:40,380\ndo all that live while\nthe source machine is online.\n\n783\n00:36:40,380 --> 00:36:42,270\nIt's creating a clone of that system.\n\n784\n00:36:43,290 --> 00:36:44,530\nNow where is it sending that?\n\n785\n00:36:45,530 --> 00:36:49,100\nOn the virtual side, on the Hyper-V host,\n\n786\n00:36:49,100 --> 00:36:53,000\nit looks at the information coming\nfrom that agent on the source machine.\n\n787\n00:36:53,000 --> 00:36:54,180\nAnd that agent reports back,\n\n788\n00:36:54,180 --> 00:36:58,910\nhey this machine has four gigs of RAM,\nand it's got 128 gig hard drive.\n\n789\n00:36:58,910 --> 00:37:01,860\nAnd it's got two network adapters,\nand here's the MAC addresses for\n\n790\n00:37:01,860 --> 00:37:02,900\nthose adapters.\n\n791\n00:37:02,900 --> 00:37:05,010\nAnd it's reporting all\nthat back to hyper V.\n\n792\n00:37:05,010 --> 00:37:08,925\nAnd hyper V creates a virtual machine\nwith a matching configuration.\n\n793\n00:37:08,925 --> 00:37:09,790\nRight?\nAnd\n\n794\n00:37:09,790 --> 00:37:12,460\nyou might not want to match the MAC\naddresses if you want them both to be up\n\n795\n00:37:12,460 --> 00:37:13,630\nsimultaneously.\n\n796\n00:37:13,630 --> 00:37:15,740\nNormally you do want the Mac\naddresses to match though, so\n\n797\n00:37:15,740 --> 00:37:18,680\nit'll be a nice smooth transition and\nthat's the end of it.\n\n798\n00:37:18,680 --> 00:37:20,205\nIt can bring all that configuration in.\n\n799\n00:37:20,205 --> 00:37:21,710\nRight?\n\n800\n00:37:21,710 --> 00:37:26,240\nOnce that configuration is there it\nstarts imaging the hard drive and\n\n801\n00:37:26,240 --> 00:37:29,659\ncopying the hard drive to Hyper-V.\n\n802\n00:37:29,659 --> 00:37:35,230\nNow, for the most part, the source\nmachine is not gonna be manipulated.\n\n803\n00:37:35,230 --> 00:37:39,090\nSo if this fails,\nif the virtual machine completely bombs,\n\n804\n00:37:39,090 --> 00:37:40,730\nthe source machine is still there,\nstill intact.\n\n805\n00:37:40,730 --> 00:37:41,545\nYou can go right back to it.\n\n806\n00:37:41,545 --> 00:37:42,580\nRight?\n\n807\n00:37:42,580 --> 00:37:43,970\nI say for the most part.\n\n808\n00:37:43,970 --> 00:37:46,900\nIf there's incompatible drivers\nit may actually uninstall those\n\n809\n00:37:46,900 --> 00:37:47,810\ndrivers as a part of it.\n\n810\n00:37:47,810 --> 00:37:50,430\nWe don't normally see it on\na physical to virtual, but\n\n811\n00:37:50,430 --> 00:37:52,535\nwe do see it on virtual to virtual.\n\n812\n00:37:52,535 --> 00:37:53,130\nRight?\n\n813\n00:37:53,130 --> 00:37:56,070\nAnd what is virtual to virtual?\n\n814\n00:37:56,070 --> 00:37:59,400\nWell that's where we're coming\nfrom another hypervisor.\n\n815\n00:37:59,400 --> 00:38:02,310\nSo, maybe you're not moving\na physical machine in a Hyper-V.\n\n816\n00:38:02,310 --> 00:38:06,490\nMaybe your moving a machine from VMware,\nso you've got like VMDK files,\n\n817\n00:38:06,490 --> 00:38:08,520\nyou know the disk file that VMware uses.\n\n818\n00:38:08,520 --> 00:38:11,770\nSo, you're coming from VMware or your\ncoming from Microsoft Virtual Server 2005,\n\n819\n00:38:11,770 --> 00:38:13,060\nGod forbid.\n\n820\n00:38:13,060 --> 00:38:14,880\n>> Right.\n>> Or some software like that.\n\n821\n00:38:14,880 --> 00:38:18,820\nWell, we can convert from\nthose other virtual system.\n\n822\n00:38:18,820 --> 00:38:23,010\nIn ours, that's a V to V, and\nduring a V to V it's the same process.\n\n823\n00:38:23,010 --> 00:38:24,980\nThe only different is,\n\n824\n00:38:24,980 --> 00:38:27,990\nthose other virtualization products\nhave their virtualization drivers.\n\n825\n00:38:27,990 --> 00:38:32,190\nIn VMWare, you have the VM tools What\nwere they called in Virtual Server 2005,\n\n826\n00:38:32,190 --> 00:38:33,270\nintegration services?\n\n827\n00:38:33,270 --> 00:38:33,961\n>> Integration services.\n\n828\n00:38:33,961 --> 00:38:34,750\n>> Okay.\n\n829\n00:38:34,750 --> 00:38:37,630\nSo you have these drivers, these things\nthat are installed as part of that\n\n830\n00:38:37,630 --> 00:38:40,590\nvirtualization software, and\nthey cause problems in Hyper-V.\n\n831\n00:38:40,590 --> 00:38:43,950\nSo it uninstalls those, it has to\nuninstall them before the migration,\n\n832\n00:38:43,950 --> 00:38:46,800\nso that the system will be\nable to come up correctly.\n\n833\n00:38:46,800 --> 00:38:51,910\nAnd as it moves it over to the virtual\nmachine it then, if necessary,\n\n834\n00:38:51,910 --> 00:38:54,010\ninstalls the drivers for Hyper-V.\n\n835\n00:38:54,010 --> 00:38:59,340\nNow, if you're migrating a Windows Server\n2008 or Windows Server 2012 machine,\n\n836\n00:38:59,340 --> 00:39:03,510\nthey've already got the Hyper-V\ndrivers in them by default.\n\n837\n00:39:03,510 --> 00:39:06,980\nIf you're doing like a newer\nUbuntu installation for Linux,\n\n838\n00:39:06,980 --> 00:39:10,000\nit's already got the Hyper-V drivers in\nit, they actually build those in now.\n\n839\n00:39:10,000 --> 00:39:11,350\nSo that's kind of cool.\n\n840\n00:39:11,350 --> 00:39:12,280\nBut if they're missing.\n\n841\n00:39:12,280 --> 00:39:15,990\nIf they're needed it'll actually install\nthose as part of what these tools do.\n\n842\n00:39:15,990 --> 00:39:19,110\nIt copies all that data over\nto the virtual machine.\n\n843\n00:39:19,110 --> 00:39:22,360\nAnd when all the data is copied over,\nand this is P to V or V to V.\n\n844\n00:39:22,360 --> 00:39:25,780\nOnce it's all copied over,\nit shuts down the source.\n\n845\n00:39:25,780 --> 00:39:26,280\nTurns it off.\n\n846\n00:39:27,650 --> 00:39:30,310\nTurns it off, and\nthen it turns on the destination.\n\n847\n00:39:31,610 --> 00:39:34,010\nNow, if everything worked perfect,\nthat's it.\n\n848\n00:39:34,010 --> 00:39:39,100\nI take the source, time to wipe it clean\nand sell it on Ebay, or wherever is it.\n\n849\n00:39:39,100 --> 00:39:39,690\nThat's what you do, right?\n\n850\n00:39:39,690 --> 00:39:40,295\nBash it with a hammer.\n\n851\n00:39:40,295 --> 00:39:43,510\n>> [LAUGH]\n>> If things didn't work out, though.\n\n852\n00:39:43,510 --> 00:39:47,300\nIf there was a problem, I'd just delete\nthe VM and go hit the power button and\n\n853\n00:39:47,300 --> 00:39:48,370\nturn the source back on again.\n\n854\n00:39:48,370 --> 00:39:49,575\nAnd I'm back in business.\n\n855\n00:39:49,575 --> 00:39:52,980\nRight?\nP to V and V to V is fairly painless.\n\n856\n00:39:54,050 --> 00:39:55,197\nIt can be very time-consuming.\n\n857\n00:39:55,197 --> 00:39:57,543\nIt's gotta create these images,\nit can take a long time.\n\n858\n00:39:57,543 --> 00:40:00,341\nYou typically only wanna\nmigrate one machine at a time.\n\n859\n00:40:00,341 --> 00:40:01,362\nIf you get a whole batch going.\n\n860\n00:40:01,362 --> 00:40:03,116\n>> It's just so much network load.\n\n861\n00:40:03,116 --> 00:40:08,890\nThat's not necessarily the greatest idea,\nbut the system works pretty smooth.\n\n862\n00:40:08,890 --> 00:40:12,890\nOn v to v, you don't necessarily have to\nhave the source machine running anymore.\n\n863\n00:40:12,890 --> 00:40:14,840\nIf you have system center\nvirtual machine manager,\n\n864\n00:40:14,840 --> 00:40:17,770\nthen you can actually take\nyour virtual machine disks\n\n865\n00:40:17,770 --> 00:40:23,140\nfrom the other virtualization software and\nthrow them into an SCVMM library.\n\n866\n00:40:23,140 --> 00:40:27,240\nAnd from the library you can deploy\na new VM based off of those disks and\n\n867\n00:40:27,240 --> 00:40:28,320\nit will do the conversion right then.\n\n868\n00:40:28,320 --> 00:40:33,170\nSo, there's a few different ways to go\nabout it, but the key thing to remember,\n\n869\n00:40:33,170 --> 00:40:37,030\nthe virtualization tools for the previous\nsoftware need to be uninstalled.\n\n870\n00:40:37,030 --> 00:40:39,050\nThe virtualization tools for\nour new software, Hyper-V,\n\n871\n00:40:39,050 --> 00:40:42,620\nneeds to be installed and\nthen we bring it up on the new system.\n\n872\n00:40:44,990 --> 00:40:45,940\nAll right.\n\n873\n00:40:45,940 --> 00:40:48,740\nNow, why is p to v and\nv to v important for us?\n\n874\n00:40:48,740 --> 00:40:51,170\nWell, this is part of\nmoving to the new world,\n\n875\n00:40:51,170 --> 00:40:52,210\nto the new cloud-\n>> [LAUGH]\n\n876\n00:40:52,210 --> 00:40:53,310\n>> Infrastructure.\n\n877\n00:40:53,310 --> 00:40:57,060\nAnd we're moving to Hyper-V, that's\npart of our own private internal system,\n\n878\n00:40:57,060 --> 00:40:58,440\nthat's what we wanna do.\n\n879\n00:40:58,440 --> 00:41:02,330\nBut it also gets set up to be able\nto do things like moving over to\n\n880\n00:41:02,330 --> 00:41:03,640\nMicrosoft Azure.\n\n881\n00:41:03,640 --> 00:41:06,150\nAnd that's where the real power comes in,\nright.\n\n882\n00:41:06,150 --> 00:41:08,851\nMaybe I wanna,\nI don't wanna just consolidate servers and\n\n883\n00:41:08,851 --> 00:41:11,390\nmove down to a handful of Hyper-E boxes.\n\n884\n00:41:11,390 --> 00:41:13,610\nI wanna eliminate my servers altogether.\n\n885\n00:41:13,610 --> 00:41:16,880\nI wanna move my infrastructure up into the\ncloud and have it out there on Azure and\n\n886\n00:41:16,880 --> 00:41:22,070\noff we go, but\nI don't want the headache of having\n\n887\n00:41:22,070 --> 00:41:24,660\nto try and\nrecreate all of my systems up there.\n\n888\n00:41:24,660 --> 00:41:25,380\nIt can be a lot of effort.\n\n889\n00:41:26,780 --> 00:41:30,970\nSo there's two really easy methods\nto get our stuff up into Azure.\n\n890\n00:41:30,970 --> 00:41:34,210\nOne we already talked about,\nwhich was, Azure Site Recovery.\n\n891\n00:41:34,210 --> 00:41:37,190\nLet me see if I can pull\nup that webpage real quick.\n\n892\n00:41:37,190 --> 00:41:41,802\nIf I do the, Azure Site Recovery,\nif I do a Bing search,\n\n893\n00:41:41,802 --> 00:41:45,840\nit should be one of\nthe first results here.\n\n894\n00:41:45,840 --> 00:41:48,920\nAzure Site Recovery, this is where\nyou have your production servers,\n\n895\n00:41:48,920 --> 00:41:52,510\nwhich might be physical, might be virtual,\nthey might be Hyper-V machines,who knows.\n\n896\n00:41:52,510 --> 00:41:54,220\nRight so it's whatever.\n\n897\n00:41:54,220 --> 00:41:56,530\nAnd they're backing up to Azure.\n\n898\n00:41:56,530 --> 00:42:01,300\nAnd they're backing up in a way\nthat if a failure ever happens,\n\n899\n00:42:01,300 --> 00:42:05,780\nwe can fail right over to Azure and\nnow that server's up and running there.\n\n900\n00:42:05,780 --> 00:42:09,950\nAnd so, if you wanna migrate to Azure, one\nof the easy, kind of, dip your toe in and\n\n901\n00:42:09,950 --> 00:42:13,230\ntry it out ways,\nis to do Azure site recovery.\n\n902\n00:42:13,230 --> 00:42:16,430\nYou back up all your servers, so\nlet's say you have 50 production servers,\n\n903\n00:42:16,430 --> 00:42:19,140\nyou back up all 50\nproduction servers to Azure.\n\n904\n00:42:19,140 --> 00:42:21,010\nAnd then you pick one.\n\n905\n00:42:21,010 --> 00:42:22,550\nOne's a little less critical, right.\n\n906\n00:42:22,550 --> 00:42:24,260\nAnd you say let's try this one.\n\n907\n00:42:24,260 --> 00:42:26,540\nFail it over to Azure,\nsee how it goes, right?\n\n908\n00:42:26,540 --> 00:42:30,310\nIf it work great, just don't fail it back,\nit's done, it's in Azure.\n\n909\n00:42:30,310 --> 00:42:31,640\nYou just migrate it to the cloud.\n\n910\n00:42:31,640 --> 00:42:35,360\nAnd then you start stepping through each\nof your other ones and moving it over.\n\n911\n00:42:35,360 --> 00:42:38,550\nThe only negative with that approach\nis there is actually a little bit of\n\n912\n00:42:38,550 --> 00:42:39,790\ndata loss, right.\n\n913\n00:42:39,790 --> 00:42:42,860\nThe backup that we've set up to\nAzure is not real time, it's close,\n\n914\n00:42:42,860 --> 00:42:45,020\nit can be close, you can actually\ntweak it to be further apart.\n\n915\n00:42:45,020 --> 00:42:47,190\nIt's close though so\nyou could lose some data, right.\n\n916\n00:42:48,690 --> 00:42:54,250\nSo Microsoft actually has a whole Software\npackage that's designed to help you\n\n917\n00:42:54,250 --> 00:42:57,930\ndo real time,\nnon data loss migrations into Azure.\n\n918\n00:42:57,930 --> 00:43:01,440\nAnd that's part of a different product and\nI've got the link in the show notes.\n\n919\n00:43:01,440 --> 00:43:05,350\nBut I don't have it here\nin this virtual machine.\n\n920\n00:43:05,350 --> 00:43:10,720\nBut there's the Azure migration Excel,\nthat's it.\n\n921\n00:43:10,720 --> 00:43:13,326\nMicrosoft likes to call\nthings accelerators.\n\n922\n00:43:13,326 --> 00:43:15,024\n>> [LAUGH] Faster's always better.\n\n923\n00:43:15,024 --> 00:43:17,640\n>> Oh, that's a blog post,\nthat's not the actual.\n\n924\n00:43:18,740 --> 00:43:19,735\nI wanted the actual Software.\n\n925\n00:43:19,735 --> 00:43:20,529\nDon't give me that.\n\n926\n00:43:21,935 --> 00:43:24,370\nThere we go Microsoft Migration.\n\n927\n00:43:24,370 --> 00:43:25,630\nExcept oh, that's not it.\n\n928\n00:43:26,770 --> 00:43:28,350\nAm I not gonna find this?\n\n929\n00:43:28,350 --> 00:43:30,390\nOh, here, here.\nSeamlessly migrate active workloads into\n\n930\n00:43:30,390 --> 00:43:33,280\nMicrosoft Azure,\nwith nearly zero downtime.\n\n931\n00:43:33,280 --> 00:43:35,075\nThere's a good promise for you.\n\n932\n00:43:35,075 --> 00:43:38,560\n>> [LAUGH]\n>> So what the accelerator does\n\n933\n00:43:38,560 --> 00:43:41,850\nis it's a collection of softwares that you\ncould deploy on your virtual machines.\n\n934\n00:43:41,850 --> 00:43:43,480\nOr on your physical machines or\nboth, right.\n\n935\n00:43:43,480 --> 00:43:45,050\nYour mixed environment.\n\n936\n00:43:45,050 --> 00:43:47,790\nAnd it starts replicating\nthe configurations up to Azure.\n\n937\n00:43:47,790 --> 00:43:49,170\nIt starts building up VMs that match.\n\n938\n00:43:49,170 --> 00:43:51,280\nIt starts synchronizing your storage data.\n\n939\n00:43:51,280 --> 00:43:52,630\nCloning all of your systems.\n\n940\n00:43:52,630 --> 00:43:58,360\nGetting them in sync and getting them\nin sync with very low latency, right.\n\n941\n00:43:58,360 --> 00:44:01,330\nGetting them in near\nreal-time synchronization.\n\n942\n00:44:01,330 --> 00:44:02,890\nAnd then when you're ready.\n\n943\n00:44:02,890 --> 00:44:03,860\nYou can flip the switch.\n\n944\n00:44:03,860 --> 00:44:06,895\nEither one VM at a time or\ndo the whole batch and go crazy.\n\n945\n00:44:06,895 --> 00:44:10,140\n>> [LAUGH]\n>> It's one of those what do\n\n946\n00:44:10,140 --> 00:44:12,735\nthey call the pucker moment where you're\njust like, I know this is gonna work.\n\n947\n00:44:12,735 --> 00:44:16,920\n[LAUGH] You flip that switch and\neverything jumps over into Azure.\n\n948\n00:44:16,920 --> 00:44:20,520\nAnd your whole data center just\ngot migrated over, all right.\n\n949\n00:44:20,520 --> 00:44:21,380\nPretty awesome stuff.\n\n950\n00:44:21,380 --> 00:44:22,880\n>> It is impressive.\n>> Really, cool.\n\n951\n00:44:22,880 --> 00:44:24,140\nSo they've got a utility for\n\n952\n00:44:24,140 --> 00:44:27,720\nthat and honestly if you're gonna be\nusing this utility, don't go it alone.\n\n953\n00:44:27,720 --> 00:44:30,190\nDon't say I've got to\nfigure this utility out.\n\n954\n00:44:30,190 --> 00:44:33,090\nJust call up Microsoft Azure and\nsay hey, this is what I'm doing.\n\n955\n00:44:33,090 --> 00:44:34,780\nThey'll be more than happy to help you.\n\n956\n00:44:34,780 --> 00:44:36,760\nMicrosoft is behind Azure 100%.\n\n957\n00:44:36,760 --> 00:44:39,060\nThey want it to be successful.\n\n958\n00:44:39,060 --> 00:44:42,160\nAnd their man they will\nbend over backwards.\n\n959\n00:44:42,160 --> 00:44:44,090\nDo whatever they can to\nhelp you migrate to Azure,\n\n960\n00:44:44,090 --> 00:44:45,620\nbecause that's how they\ngrow that business.\n\n961\n00:44:45,620 --> 00:44:49,490\nSo, they are really helpful, that might\nchange a few years from now when Azure's\n\n962\n00:44:49,490 --> 00:44:53,610\nbigger, but right now boy let me tell you,\nthey are super helpful up there.\n\n963\n00:44:53,610 --> 00:44:56,860\nAnd they'll walk you through the whole\nprocess of getting it set up.\n\n964\n00:44:56,860 --> 00:44:58,210\nBut, for the exam,\n\n965\n00:44:58,210 --> 00:45:02,260\nyou need to be aware of that accelerator\nexisting and read a little bit about it.\n\n966\n00:45:02,260 --> 00:45:05,910\nIt's neat, it actually it's a collection\nof several different utilities.\n\n967\n00:45:05,910 --> 00:45:06,880\nIt's free,\n\n968\n00:45:06,880 --> 00:45:09,517\nbecause they know they'll make money on\nthe back end by hosting your service.\n\n969\n00:45:09,517 --> 00:45:11,240\n[LAUGH] Up in Azure.\n\n970\n00:45:11,240 --> 00:45:14,120\nThat's another type of virtual\nmachine motion that we have.\n\n971\n00:45:14,120 --> 00:45:17,586\nMoving those VMs to another location and\ngetting it up and running there.\n\n972\n00:45:18,990 --> 00:45:23,302\nAll right, so, just another one\nto kind of keep in mind and\n\n973\n00:45:23,302 --> 00:45:26,900\nis that the last one that I've got?\n\n974\n00:45:26,900 --> 00:45:29,389\nI did.\nI failed to mention the old-fashioned\n\n975\n00:45:29,389 --> 00:45:30,230\nmanual way.\n\n976\n00:45:30,230 --> 00:45:31,360\nRight?\n\n977\n00:45:31,360 --> 00:45:34,365\nRemember, at the end of the day, you\ndon't have to use all this fancy stuff.\n\n978\n00:45:34,365 --> 00:45:35,040\n>> [LAUGH]\n>> Right?\n\n979\n00:45:35,040 --> 00:45:38,240\nYou don't have to do live migrations or\nwhatever.\n\n980\n00:45:38,240 --> 00:45:41,460\nYou can still go the old school\nroute if you need to move things.\n\n981\n00:45:41,460 --> 00:45:44,200\nIf, on the exam, they say something like,\n\n982\n00:45:44,200 --> 00:45:47,520\nyou need to move virtual machines\nfrom one physical server to another,\n\n983\n00:45:47,520 --> 00:45:51,950\nit's a one-time thing, and\nyou can't impact network bandwidth.\n\n984\n00:45:51,950 --> 00:45:55,420\nWell, all the technology we talked about\nhere impact network bandwidth, don't they?\n\n985\n00:45:55,420 --> 00:45:56,190\n>> Every one of them.\n\n986\n00:45:56,190 --> 00:45:57,450\n>> Did we mention any one that don't?\n\n987\n00:45:57,450 --> 00:45:58,135\n>> No.\n>> Okay.\n\n988\n00:45:58,135 --> 00:45:59,340\n[LAUGH]\n>> So\n\n989\n00:45:59,340 --> 00:46:02,160\nsometimes the best way to solve\nsomething is the old fashioned way.\n\n990\n00:46:02,160 --> 00:46:07,680\nThe old fashioned way would be to attach\na removable drive to your hyper V host.\n\n991\n00:46:07,680 --> 00:46:10,670\nAnd export your VM to that drive, right.\n\n992\n00:46:10,670 --> 00:46:13,490\nNow it's just exporting on USB or\nfire wire or\n\n993\n00:46:13,490 --> 00:46:15,150\nwhatever it is your connecting with,\nright.\n\n994\n00:46:15,150 --> 00:46:17,620\nWhen you export to that,\nyou take it over to the new place and\n\n995\n00:46:17,620 --> 00:46:19,460\nyou import it back in.\n\n996\n00:46:19,460 --> 00:46:23,790\nThe SCVMM can do imports and\nexports and the Hyper-V manager itself,\n\n997\n00:46:23,790 --> 00:46:26,710\nit's got that functionality\nright In the machines.\n\n998\n00:46:26,710 --> 00:46:30,450\nLet me get back into,\nmaybe not my failover cluster manager,\n\n999\n00:46:30,450 --> 00:46:35,370\nbut get back into the Hyper-V manager,\nwhich I got buried around here somewhere.\n\n1000\n00:46:35,370 --> 00:46:37,200\nThere we go.\nYou can take any virtual machine,\n\n1001\n00:46:37,200 --> 00:46:38,880\nand you've got that export option.\n\n1002\n00:46:38,880 --> 00:46:42,225\nIt's right-click on then export it,\nand you can dump it to a local drive.\n\n1003\n00:46:42,225 --> 00:46:43,365\nZero network bandwidth.\n\n1004\n00:46:43,365 --> 00:46:47,955\nNow, you do impact disk I/O a bit\ncuz it's reading from that VM, but\n\n1005\n00:46:47,955 --> 00:46:50,595\nyou can export it,\nit will dump it to the system.\n\n1006\n00:46:50,595 --> 00:46:53,065\nAnd then you can go to your destination,\nand\n\n1007\n00:46:53,065 --> 00:46:56,265\nyou can import that virtual\nmachine right back in.\n\n1008\n00:46:56,265 --> 00:46:58,305\nWe got it right here,\nImport Virtual Machine.\n\n1009\n00:46:58,305 --> 00:47:02,290\nOr you can copy it into an SCVMM\nlibrary and import it from there.\n\n1010\n00:47:02,290 --> 00:47:08,040\nOr you can import the VHDs directly\ninto and you can build the VM that way.\n\n1011\n00:47:08,040 --> 00:47:12,680\nIt's a much more manual process, but\nit doesn't impact the network band with\n\n1012\n00:47:12,680 --> 00:47:15,910\nthat host system, so\ndon't forget the old fashioned way.\n\n1013\n00:47:15,910 --> 00:47:16,880\nIt's still there for a reason.\n\n1014\n00:47:18,480 --> 00:47:19,610\nIt's easy to forget it.\n\n1015\n00:47:19,610 --> 00:47:20,635\nThat's why I wrote it in the notes.\n\n1016\n00:47:20,635 --> 00:47:22,400\n[LAUGH] Don't forget to mention this, so.\n\n1017\n00:47:22,400 --> 00:47:23,540\n>> Right.\n\n1018\n00:47:23,540 --> 00:47:25,780\nAlright well Mike,\nthat is a whole lot of motion,\n\n1019\n00:47:25,780 --> 00:47:27,460\ncan you think of any that we left out?\n\n1020\n00:47:27,460 --> 00:47:30,300\n>> I need my Dramamine after all that.\n\n1021\n00:47:30,300 --> 00:47:31,210\n[LAUGH]\n>> [LAUGH] Get motion sickness,\n\n1022\n00:47:31,210 --> 00:47:33,420\nthat's very witty.\n\n1023\n00:47:33,420 --> 00:47:36,018\nMike's pretty sharp you\ngot to stay on him.\n\n1024\n00:47:36,018 --> 00:47:37,900\n[LAUGH] All right, well, that's about it.\n\n1025\n00:47:37,900 --> 00:47:39,180\nDo remember that in real life,\n\n1026\n00:47:39,180 --> 00:47:42,360\nlive migration is the one we want\nthat's the one that exciting.\n\n1027\n00:47:42,360 --> 00:47:43,850\nI did post links in the show notes for\n\n1028\n00:47:43,850 --> 00:47:46,060\nall of the different software\nthat I've talked about.\n\n1029\n00:47:46,060 --> 00:47:49,890\nThe extra stuff like\nthe Microsoft Virtual Machine,\n\n1030\n00:47:49,890 --> 00:47:54,020\nconverter utility, and even the Automator,\nI threw that in there cuz it's kinda nice.\n\n1031\n00:47:54,020 --> 00:47:55,350\nVisio, a few different things.\n\n1032\n00:47:55,350 --> 00:47:57,300\nRead up on those, they are useful.\n\n1033\n00:47:57,300 --> 00:47:59,650\nThey may or may not show up on the exam.\n\n1034\n00:47:59,650 --> 00:48:03,690\nBut on the exam you definitely wanna\nremember all the different types of motion\n\n1035\n00:48:03,690 --> 00:48:05,350\nand the kind of the pros and\ncons of each, right.\n\n1036\n00:48:05,350 --> 00:48:08,550\nThe process when one is suitable for\na solution versus another one.\n\n1037\n00:48:08,550 --> 00:48:09,390\nEach one has their place.\n\n1038\n00:48:09,390 --> 00:48:10,130\n>> Yep, exactly.\n\n1039\n00:48:10,130 --> 00:48:12,240\nAnd that's what they're gonna\nget you with in the exam.\n\n1040\n00:48:12,240 --> 00:48:13,940\nThey're gonna give you that scenario.\n\n1041\n00:48:13,940 --> 00:48:16,690\nAnd, when we know we got multiple\nsolutions, which one is the best for\n\n1042\n00:48:16,690 --> 00:48:17,890\nthis particular scenario?\n\n1043\n00:48:19,580 --> 00:48:23,590\n>> All right, well, let me remind you guys\nif you have questions on any of this,\n\n1044\n00:48:23,590 --> 00:48:26,850\nlive during the show you can\ngo to www.itpro.tv/live and\n\n1045\n00:48:26,850 --> 00:48:28,970\nyou'll see the chatroom\nright beneath the video,\n\n1046\n00:48:28,970 --> 00:48:31,730\npost your questions there we monitor and\nanswer during the show.\n\n1047\n00:48:31,730 --> 00:48:35,290\nIf you have questions after the show,\nuse our Q&A forums.\n\n1048\n00:48:35,290 --> 00:48:38,460\nOn every page on the IT Pro TV page you'll\nsee a link at the top of the screen\n\n1049\n00:48:38,460 --> 00:48:40,900\nthat says Q&A it'll\ntake you to the forums.\n\n1050\n00:48:40,900 --> 00:48:42,960\nGo and jump in there you'll\nsee we got Microsoft forms,\n\n1051\n00:48:42,960 --> 00:48:45,690\npost your questions we monitor and\nanswer after the show.\n\n1052\n00:48:45,690 --> 00:48:48,662\nTake advantage of that resource,\nit is there for you.\n\n1053\n00:48:48,662 --> 00:48:51,540\nAll right,\nI hope you guys enjoyed today's episode.\n\n1054\n00:48:51,540 --> 00:48:55,593\nSigning off for itprotv, I'm Don Pezet\n>> And I'm Mike Rodrick\n\n1055\n00:48:55,593 --> 00:48:56,220\n>> And we'll see you next time.\n\n1056\n00:48:56,220 --> 00:49:06,220\n[MUSIC]\n\n1057\n00:49:10,142 --> 00:49:16,060\n[SOUND]\n\n",
          "vimeoId": "121366617"
        },
        {
          "description": null,
          "length": "4570",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-3-plan_virtualization_networking-030515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-3-plan_virtualization_networking-030515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-3-plan_virtualization_networking-030515-1-sm.jpg",
          "title": "Plan Virtualization Networking",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,753 --> 00:00:35,971\nGood morning, good afternoon,\nand good evening.\n\n3\n00:00:35,971 --> 00:00:38,841\nWelcome ladies and\ngentlemen to another episode of ITProTV.\n\n4\n00:00:38,841 --> 00:00:41,636\nI'll be your host, Mike Rodrick, and\n\n5\n00:00:41,636 --> 00:00:46,920\ntoday we are gonna be going over\nan objective from the 70-414 exam.\n\n6\n00:00:46,920 --> 00:00:51,170\nSpecifically, we're gonna be hitting,\nwhat is it, objective 3.3.\n\n7\n00:00:51,170 --> 00:00:54,840\nWhich is gonna be plan and\nimplement network virtualization.\n\n8\n00:00:54,840 --> 00:00:59,170\nOr virtualizing a network,\nI guess to be more specific.\n\n9\n00:00:59,170 --> 00:01:02,840\nSo really it's just, when we talk\nabout virtualization networking,\n\n10\n00:01:02,840 --> 00:01:06,220\nwe're gonna take the concept\nof virtualization and\n\n11\n00:01:06,220 --> 00:01:08,610\ntake that over to\nthe network side of things.\n\n12\n00:01:08,610 --> 00:01:10,860\nAnd on previous episodes\nin this objective or\n\n13\n00:01:10,860 --> 00:01:15,190\nin this particular exam, we've talked\nabout virtualization of my servers, right?\n\n14\n00:01:15,190 --> 00:01:17,790\nTaking my servers,\nvirtualizing those guys.\n\n15\n00:01:17,790 --> 00:01:22,680\nWorking with Hyper-V, working with my\nvirtual machine manager and system center.\n\n16\n00:01:22,680 --> 00:01:23,360\nAnd things like that.\n\n17\n00:01:23,360 --> 00:01:27,300\nAnd what virtualization networking\nis gonna do is gonna extend that\n\n18\n00:01:27,300 --> 00:01:30,786\nconcept of virtualization into\nthe networking side of things.\n\n19\n00:01:30,786 --> 00:01:31,430\nAll right?\n\n20\n00:01:31,430 --> 00:01:34,710\nSo, we got a whole bunch of\nthings we're gonna talk about.\n\n21\n00:01:34,710 --> 00:01:37,920\nLogical networks, there's a lot\nof terminology we're gonna hit.\n\n22\n00:01:37,920 --> 00:01:40,260\nA lot of different concepts\nwe're gonna cover.\n\n23\n00:01:40,260 --> 00:01:43,190\nBut in the beginning, let's start\nout by saying we're gonna take our\n\n24\n00:01:43,190 --> 00:01:46,245\nphysical network, all right,\nand we're gonna virtualize it.\n\n25\n00:01:46,245 --> 00:01:49,720\nWe're gonna kind of abstract\nthat physical network so\n\n26\n00:01:49,720 --> 00:01:53,510\nthat when we work inside VMM and\nwe work with our virtual servers.\n\n27\n00:01:53,510 --> 00:01:56,980\nAnd we work with the Hyper-V and\nour virtual machines,\n\n28\n00:01:56,980 --> 00:02:00,150\nwe're not working directly with the,\nthat's a good way to say it.\n\n29\n00:02:00,150 --> 00:02:02,140\nWe're still working with\nthe physical network, but\n\n30\n00:02:02,140 --> 00:02:06,010\nwe're going to kind of,\nwhat's a good way to say it?\n\n31\n00:02:06,010 --> 00:02:07,900\nAdd a layer of virtualization to it.\n\n32\n00:02:07,900 --> 00:02:11,360\nSo we're gonna take our physical network,\nand we're gonna virtualize it.\n\n33\n00:02:11,360 --> 00:02:13,090\nAnd the first thing we're gonna do,\n\n34\n00:02:13,090 --> 00:02:16,320\nis we're gonna create what\nwe call logical networks.\n\n35\n00:02:16,320 --> 00:02:20,760\nNow these logical networks\nare just gonna be representations\n\n36\n00:02:20,760 --> 00:02:25,870\nof your physical network within VMM,\nor my virtual machine manager.\n\n37\n00:02:25,870 --> 00:02:29,450\nAnd what this is gonna\nallow me to do is to\n\n38\n00:02:29,450 --> 00:02:31,920\nallow people to work with\nthe virtual machines.\n\n39\n00:02:31,920 --> 00:02:34,540\nAttach them to different networks and\nthings like that.\n\n40\n00:02:34,540 --> 00:02:37,500\nWithout understanding\nthe underlying physical network.\n\n41\n00:02:37,500 --> 00:02:39,260\nWe're gonna hide that\ncomplexity from them.\n\n42\n00:02:39,260 --> 00:02:43,670\nIn other words, we can make logical\nnetworks that represent portions\n\n43\n00:02:43,670 --> 00:02:45,310\nof our physical networks.\n\n44\n00:02:45,310 --> 00:02:50,130\nAnd maybe we call them front end and\nback end or back up.\n\n45\n00:02:50,130 --> 00:02:54,680\nOr anything we wanted or\nwe could do it by department.\n\n46\n00:02:54,680 --> 00:02:59,610\nI might have a particular virtual network\nthat's gonna be for human resources, or\n\n47\n00:02:59,610 --> 00:03:03,920\nanother virtual network that\nwe're gonna use for production.\n\n48\n00:03:03,920 --> 00:03:06,200\nSo we're going to\nvirtualize the network and\n\n49\n00:03:06,200 --> 00:03:09,940\nthat's gonna allow again,\nus to work with those with friendly names.\n\n50\n00:03:09,940 --> 00:03:13,080\nSo that people that don't understand\nthat the physical network and\n\n51\n00:03:13,080 --> 00:03:16,360\nthe complexity of the physical\nnetwork can still work with it.\n\n52\n00:03:16,360 --> 00:03:20,330\nThey can pop out a machine, and they\ncan attach it to that back end network.\n\n53\n00:03:20,330 --> 00:03:24,000\nAnd they know that's the back end for\nour web servers, or something like that.\n\n54\n00:03:24,000 --> 00:03:25,700\nOr if they create some\nvirtual machines and\n\n55\n00:03:25,700 --> 00:03:29,130\nthey wanna attach them to that\nproduction network, all right.\n\n56\n00:03:29,130 --> 00:03:33,120\nNow, and we can also take this concept,\nand we can go even further with it.\n\n57\n00:03:33,120 --> 00:03:35,163\nRight, and\nwhat I was kind of talking about there,\n\n58\n00:03:35,163 --> 00:03:38,170\nwe're talking about internally,\nlike within my own company.\n\n59\n00:03:38,170 --> 00:03:40,430\nBut let's say you're\na cloud service provider,\n\n60\n00:03:41,480 --> 00:03:44,290\nyou can actually take this concept and\ngo even further,\n\n61\n00:03:44,290 --> 00:03:48,930\nwe can create logical networks for\neach one of my tenants.\n\n62\n00:03:48,930 --> 00:03:50,890\nSo if I'm a cloud service provider,\n\n63\n00:03:50,890 --> 00:03:53,970\nI might have multiple tenants\nthat I'm supporting, right?\n\n64\n00:03:53,970 --> 00:03:55,190\nAnd those different tenants,\n\n65\n00:03:55,190 --> 00:03:59,250\nthey're gonna want their network to\nbe separate from everybody else's.\n\n66\n00:03:59,250 --> 00:04:00,796\nThey don't want their information,\n\n67\n00:04:00,796 --> 00:04:04,630\nright, being shared with some other\ncompany, some other customer of mine.\n\n68\n00:04:04,630 --> 00:04:08,836\nSo we can take my physical network and\nmy data center and we can virtualize it.\n\n69\n00:04:08,836 --> 00:04:11,330\nWe can go through it and\ncreate our logical networks.\n\n70\n00:04:11,330 --> 00:04:15,560\nAnd then we can create what we call\nvirtual machine networks on top of that.\n\n71\n00:04:15,560 --> 00:04:18,190\nAnd then we can control\nwhat is allowed to route\n\n72\n00:04:18,190 --> 00:04:20,040\nbetween those different virtual networks.\n\n73\n00:04:20,040 --> 00:04:24,620\nSo we can provide this isolation\nbetween these virtual machine networks\n\n74\n00:04:24,620 --> 00:04:26,860\non top of our logical network.\n\n75\n00:04:26,860 --> 00:04:30,480\nWe can even allow them to bring\nin their own IP addresses and\n\n76\n00:04:30,480 --> 00:04:32,250\nnetwork configurations.\n\n77\n00:04:32,250 --> 00:04:35,680\nBecause the logical network\nunderneath might be running on\n\n78\n00:04:35,680 --> 00:04:37,160\nparticular IP address range.\n\n79\n00:04:37,160 --> 00:04:42,850\nBut that VM network on top of that could\nbe using a completely different IP range.\n\n80\n00:04:42,850 --> 00:04:46,074\nWhich is gonna make it really easy for\nmy customers or for\n\n81\n00:04:46,074 --> 00:04:49,378\nyou as an enterprise to move\nto a cloud-based solution.\n\n82\n00:04:49,378 --> 00:04:52,490\nBecause now I don't have to worry about\nredoing my network infrastructure.\n\n83\n00:04:52,490 --> 00:04:56,420\nI can continue to use my same IP\naddress ranges, my same subnets and\n\n84\n00:04:56,420 --> 00:04:59,010\nthings like that,\neven though I'm moving out to the cloud.\n\n85\n00:04:59,010 --> 00:05:00,580\nI can maintain that.\n\n86\n00:05:00,580 --> 00:05:03,911\nIn fact, we can have multiple tenants\nthat are using the same IP address\n\n87\n00:05:03,911 --> 00:05:04,753\nranges, right.\n\n88\n00:05:04,753 --> 00:05:07,460\nWhich normally I wouldn't be able to do,\nbecause we're gonna have a conflict.\n\n89\n00:05:07,460 --> 00:05:11,120\nI couldn't have those overlapping\nIP addresses and things like that.\n\n90\n00:05:11,120 --> 00:05:13,780\nBut through virtualization,\nI can allow that,\n\n91\n00:05:13,780 --> 00:05:16,370\nI can have each one of those\nvirtual machine networks.\n\n92\n00:05:16,370 --> 00:05:19,700\nThey could both be running on a ten\ndot network, for example, and\n\n93\n00:05:19,700 --> 00:05:21,890\nnot conflict with each other, all right?\n\n94\n00:05:21,890 --> 00:05:23,500\nSo let's take a look at\nhow we're gonna do this.\n\n95\n00:05:23,500 --> 00:05:26,670\nWe're gonna start,\nI'm gonna jump into a VMM console here.\n\n96\n00:05:26,670 --> 00:05:30,110\nAnd I'm on one of the TechNet labs and\nI'll make sure I'll post a link for\n\n97\n00:05:30,110 --> 00:05:32,560\nthis TechNet lab in our show notes.\n\n98\n00:05:34,090 --> 00:05:36,470\nAnd I've got my SCVMM01,\n\n99\n00:05:36,470 --> 00:05:42,880\nwhich is the server that has my virtual\nmachine manager console running on it.\n\n100\n00:05:42,880 --> 00:05:47,210\nAnd the first thing I'm gonna do is I'm\njust gonna create a couple of host groups.\n\n101\n00:05:47,210 --> 00:05:50,520\nCuz a lot of this is gonna be defined\non your different host groups.\n\n102\n00:05:50,520 --> 00:05:52,830\nSo we might have a host group for\n\n103\n00:05:52,830 --> 00:05:56,980\nall of my virtual servers that are in\nGainesville, my Hyper-V servers.\n\n104\n00:05:56,980 --> 00:06:02,080\nWe might have another host group for\nall of my Hyper-V servers that are down\n\n105\n00:06:02,080 --> 00:06:06,290\nin my Tampa office and things like that,\nso just to give us something to play with.\n\n106\n00:06:06,290 --> 00:06:13,800\nLet me create, we'll just do something\nlike GNV, maybe for my Gainesville office.\n\n107\n00:06:15,500 --> 00:06:20,503\nAnd I'll add another one here for\nmy Tampa office.\n\n108\n00:06:25,711 --> 00:06:26,750\nAll right.\n\n109\n00:06:26,750 --> 00:06:29,620\nAnd I'll move some hosts in there later,\nso that we can actually see this, but\n\n110\n00:06:29,620 --> 00:06:31,750\nit really doesn't matter for\nwhat we're doing,\n\n111\n00:06:31,750 --> 00:06:33,832\nI just need to have those\nhost groups available.\n\n112\n00:06:33,832 --> 00:06:35,370\nAll right?\n\n113\n00:06:35,370 --> 00:06:38,586\nSo the first thing I wanna do is\nI wanna create a logical network.\n\n114\n00:06:38,586 --> 00:06:41,104\nAgain, a logical network is really just\n\n115\n00:06:41,104 --> 00:06:45,200\na virtualized representation\nof your physical network.\n\n116\n00:06:45,200 --> 00:06:48,950\nAnd within this logical network,\nwe're gonna create network sites.\n\n117\n00:06:49,990 --> 00:06:52,730\nSo in my VMM console,\nI'm going to go to my Fabric node,\n\n118\n00:06:52,730 --> 00:06:58,060\nand then down here underneath Networking,\nI have my Logical Networks.\n\n119\n00:06:58,060 --> 00:06:59,151\nNow they've got a couple or\n\n120\n00:06:59,151 --> 00:07:01,250\na few different things\ncreated in this lab already.\n\n121\n00:07:01,250 --> 00:07:04,230\nJust, it's one of the,\nlike I said, the TechNet VLabs.\n\n122\n00:07:04,230 --> 00:07:05,660\nSo I'm gonna create some new ones.\n\n123\n00:07:05,660 --> 00:07:07,290\nI'll do Create Logical Network.\n\n124\n00:07:09,130 --> 00:07:12,230\nFirst thing I'm gonna do is I'm\ngonna give this guy a name.\n\n125\n00:07:12,230 --> 00:07:16,460\nAnd let's call this the Contoso Front End.\n\n126\n00:07:20,475 --> 00:07:21,925\nAnd I could give it a description.\n\n127\n00:07:21,925 --> 00:07:25,255\nThis is the front end for\nmy web servers or something like that.\n\n128\n00:07:25,255 --> 00:07:28,665\nAnd then below this, this is where we're\ngonna choose how we want to go about\n\n129\n00:07:28,665 --> 00:07:30,545\nvirtualizing this network.\n\n130\n00:07:30,545 --> 00:07:33,815\nThe first option here,\nOne connected network.\n\n131\n00:07:33,815 --> 00:07:35,955\nAnd that's the one I'm gonna choose for\nthis, and if you can,\n\n132\n00:07:35,955 --> 00:07:37,765\nI don't know if you can read\nthis on that screen there.\n\n133\n00:07:37,765 --> 00:07:42,370\nBut network sites within this network are\nequivalent and routable to one another and\n\n134\n00:07:42,370 --> 00:07:44,720\ncan be used as a single connected network.\n\n135\n00:07:44,720 --> 00:07:47,016\nAll right.\nSo that means any of the network sites\n\n136\n00:07:47,016 --> 00:07:51,260\nthat I create within this logical network\ncould be set up to communicate with\n\n137\n00:07:51,260 --> 00:07:52,004\neach other.\n\n138\n00:07:52,004 --> 00:07:57,286\nAnd I'm also gonna allow new VM networks\ncreated on this logical network.\n\n139\n00:07:57,286 --> 00:07:59,342\nTo use network virtualization.\n\n140\n00:07:59,342 --> 00:08:03,100\nThis is going to give me\nthe ability to do the isolation.\n\n141\n00:08:03,100 --> 00:08:04,920\nTo separate that network or\n\n142\n00:08:04,920 --> 00:08:10,390\nthat VM network that I created\non top of the logical network.\n\n143\n00:08:10,390 --> 00:08:11,320\nTo separate it out.\n\n144\n00:08:11,320 --> 00:08:13,570\nTo create that isolation.\n\n145\n00:08:13,570 --> 00:08:17,770\nWe can do it a few\ndifferent ways in here but\n\n146\n00:08:17,770 --> 00:08:23,160\nwith 2012 R2 they give support for,\nalso for VLAN based Independent networks,\n\n147\n00:08:23,160 --> 00:08:27,040\nas well as my private V-Lan,\nor on my PV-Lan network.\n\n148\n00:08:27,040 --> 00:08:32,190\nSo if your organization is already\nusing V-Lans you don't have to stop.\n\n149\n00:08:32,190 --> 00:08:34,510\nYou can continue to use the V-Lans.\n\n150\n00:08:34,510 --> 00:08:37,780\nIt's supported in here as\nwell as the private V-Lans.\n\n151\n00:08:37,780 --> 00:08:39,720\nPrivate VLANs being a little different.\n\n152\n00:08:39,720 --> 00:08:43,720\nThey're made up of a pair\nof VLAN identifiers,\n\n153\n00:08:43,720 --> 00:08:45,870\nand we'll talk a little\nbit more about that later.\n\n154\n00:08:45,870 --> 00:08:48,656\nBut for now I'm just going to stick\nwith the one connected network.\n\n155\n00:08:48,656 --> 00:08:51,840\nI am going to choose the option, allow new\nnetworks created on this logical network,\n\n156\n00:08:51,840 --> 00:08:53,970\nto use network virtualization.\n\n157\n00:08:53,970 --> 00:08:54,820\nAnd then also,\n\n158\n00:08:54,820 --> 00:08:58,850\ncreate a VM network with the same name\nto allow virtual machines access.\n\n159\n00:08:58,850 --> 00:09:01,740\nTo this logical network directly.\n\n160\n00:09:01,740 --> 00:09:05,330\nNow what they're saying is,\nwe're going to do isolation.\n\n161\n00:09:05,330 --> 00:09:09,540\nDo I want this virtual network or\na VM network to be able to\n\n162\n00:09:09,540 --> 00:09:13,780\nconnect directly to or communicate\ndirectly with the logical network, which,\n\n163\n00:09:13,780 --> 00:09:17,530\nremember, is the virtual\nrepresentation of my physical network.\n\n164\n00:09:17,530 --> 00:09:19,080\nYou don't have to create this here.\n\n165\n00:09:19,080 --> 00:09:22,480\nYou can go ahead and have it created,\nor can create it after the fact.\n\n166\n00:09:22,480 --> 00:09:26,620\nAnd a lot of times we'll use that for\nmy management part of my network, right?\n\n167\n00:09:26,620 --> 00:09:31,160\nBecause that's going to have access again\nto the logical network directly without\n\n168\n00:09:31,160 --> 00:09:39,120\nhaving to route traffic between\nthe different virtual machine networks.\n\n169\n00:09:39,120 --> 00:09:40,120\nSo go ahead and create it.\n\n170\n00:09:41,240 --> 00:09:41,740\nClick next.\n\n171\n00:09:43,190 --> 00:09:45,160\nAnd then I've got to\ncreate my network sites.\n\n172\n00:09:45,160 --> 00:09:48,790\nNow network sites, you're going, depending\non what you're reading, and even on\n\n173\n00:09:48,790 --> 00:09:53,280\nthe exam, they could possibly call this\na what is it that they call this thing?\n\n174\n00:09:53,280 --> 00:09:55,150\nLogical network definitions.\n\n175\n00:09:55,150 --> 00:09:56,770\nSo network sites.\n\n176\n00:09:56,770 --> 00:09:59,520\nLogical network definitions synonymous,\nright?\n\n177\n00:10:00,530 --> 00:10:03,530\nTypically what we're going to do is\nwe're going to create a network site\n\n178\n00:10:03,530 --> 00:10:06,130\nbased on my different physical locations.\n\n179\n00:10:06,130 --> 00:10:10,080\nDoesn't have to be, this could be\nby department or things like that.\n\n180\n00:10:10,080 --> 00:10:11,840\nI'm going to click Add.\n\n181\n00:10:13,120 --> 00:10:17,890\nAnd you can see I've already got a network\nsite, Contoso Front End All right.\n\n182\n00:10:17,890 --> 00:10:23,060\nThat was the one that we got created\nwhen I ran the from that first step and\n\n183\n00:10:23,060 --> 00:10:26,510\nI'm going to assign a host group to that.\n\n184\n00:10:26,510 --> 00:10:29,560\nSo this is what host groups\nare going to have access to that\n\n185\n00:10:29,560 --> 00:10:31,000\nparticular network server.\n\n186\n00:10:31,000 --> 00:10:34,190\nAgain, we're just kind of defining\nour physical network here.\n\n187\n00:10:34,190 --> 00:10:35,090\nSo I'll choose GMV.\n\n188\n00:10:35,090 --> 00:10:40,420\nAnd then down below, depending if we're\nusing VLAN's or not, I can add a VLAN ID.\n\n189\n00:10:40,420 --> 00:10:42,730\nOr I can do a subnet, or both.\n\n190\n00:10:42,730 --> 00:10:44,924\nI'm going to go ahead and\nchoose an IP subnet, so\n\n191\n00:10:44,924 --> 00:10:46,750\nI'm just going to leave the VLAN blank.\n\n192\n00:10:48,130 --> 00:10:49,548\nAnd let's do a 10.network.\n\n193\n00:10:55,493 --> 00:10:56,051\nOops.\n\n194\n00:10:56,051 --> 00:10:57,560\nThat won't work.\n\n195\n00:10:57,560 --> 00:11:00,560\nDo a little /24 for that, tab out of it.\n\n196\n00:11:01,590 --> 00:11:02,540\nAnd click Next.\n\n197\n00:11:04,320 --> 00:11:04,862\nAnd then Finish.\n\n198\n00:11:07,718 --> 00:11:10,077\nNope, and you know what,\nI wanted to add a second one there, and\n\n199\n00:11:10,077 --> 00:11:11,140\nI kind of forgot about that.\n\n200\n00:11:11,140 --> 00:11:12,465\nSo let's go back in there.\n\n201\n00:11:12,465 --> 00:11:15,040\nBecause once I've created\nthat logical network,\n\n202\n00:11:15,040 --> 00:11:17,810\nnow you can see my Contoso Front End,\nall right.\n\n203\n00:11:17,810 --> 00:11:19,260\nWell what I failed to do during that, so\n\n204\n00:11:19,260 --> 00:11:22,930\nI'm going to pull the Properties back\nup is I need to create another site.\n\n205\n00:11:22,930 --> 00:11:27,490\nSo I'm going to click Add again, and for\nthis one I'm going to choose my Tampa.\n\n206\n00:11:27,490 --> 00:11:35,580\nAnd let's say down in Tampa\nwe're using a 10.1, Network.\n\n207\n00:11:41,965 --> 00:11:46,140\nAll right, so now at this point I've\ngot my logical network defined.\n\n208\n00:11:46,140 --> 00:11:49,930\nAgain, virtual representation\non my physical network.\n\n209\n00:11:49,930 --> 00:11:51,560\nI've got an office down in Gainesville,\n\n210\n00:11:51,560 --> 00:11:55,989\nI've got an office in Tampa, I've got\nthose defined within my logical network.\n\n211\n00:11:57,640 --> 00:12:00,310\nSo the next thing we're going to do\nis we're going to create some IP\n\n212\n00:12:00,310 --> 00:12:01,870\naddress pools.\n\n213\n00:12:01,870 --> 00:12:06,370\nNow these IP address pools are for\nallowing the virtual\n\n214\n00:12:06,370 --> 00:12:12,300\nmachine manager to assign IP addresses\nto newly created virtual machines.\n\n215\n00:12:12,300 --> 00:12:16,780\nSo what I'm going to do I'm going to\nright click on this contoso front end and\n\n216\n00:12:16,780 --> 00:12:18,460\nI'll click create IP pool.\n\n217\n00:12:19,560 --> 00:12:20,420\nPretty straight forward here.\n\n218\n00:12:20,420 --> 00:12:28,420\nI'll give it a name, I'll call it\nsomething like Contoso front end IP.\n\n219\n00:12:28,420 --> 00:12:32,120\nYou could give it a description, you\ncan see I can choose from the different\n\n220\n00:12:32,120 --> 00:12:34,320\nlogical networks that I have created.\n\n221\n00:12:34,320 --> 00:12:38,470\nWe'll stick with that Contoso front end,\nclick next, and\n\n222\n00:12:38,470 --> 00:12:41,540\nthen here I'm going to use\nan existing network site.\n\n223\n00:12:41,540 --> 00:12:43,652\nSo I've got that Contoso front end for\n\n224\n00:12:43,652 --> 00:12:46,700\nthe Gainesville office that\nwas going to be that _0.\n\n225\n00:12:46,700 --> 00:12:50,730\nAnd I can see I've got my\nIP subnet range there.\n\n226\n00:12:50,730 --> 00:12:52,880\nWe had a VLAN ID, I will fill that out.\n\n227\n00:12:55,480 --> 00:12:58,380\nAnd then the range of\naddresses that I want to use.\n\n228\n00:12:58,380 --> 00:13:02,390\nSo let's say we want about,\nlet's say we go\n\n229\n00:13:02,390 --> 00:13:07,290\nfrom 50 up to 199.\n\n230\n00:13:07,290 --> 00:13:11,610\nGive us 150 addresses there.\n\n231\n00:13:11,610 --> 00:13:12,430\nWe'll click next.\n\n232\n00:13:14,300 --> 00:13:15,740\nAnd for my gateway.\n\n233\n00:13:18,300 --> 00:13:19,925\nI'm going to add a little gateway address.\n\n234\n00:13:25,647 --> 00:13:27,530\nTell it who my DNS server is.\n\n235\n00:13:27,530 --> 00:13:29,256\nNone of these machines actually exist,\nbut we.\n\n236\n00:13:34,401 --> 00:13:38,299\nWe can add a DNS suffix to provide for\nthose virtual machines.\n\n237\n00:13:39,420 --> 00:13:40,960\nThat are going to be on this network.\n\n238\n00:13:43,100 --> 00:13:45,200\nI add something to their\nsuffix search list.\n\n239\n00:13:50,831 --> 00:13:52,528\nDid I mistype my address?\n\n240\n00:13:55,732 --> 00:13:56,730\nExtra bad in there.\n\n241\n00:13:59,807 --> 00:14:01,870\nNot going to be using\nWins on this network.\n\n242\n00:14:01,870 --> 00:14:03,480\nHopefully we're not using that anymore.\n\n243\n00:14:03,480 --> 00:14:04,303\nAnd we'll click Finish.\n\n244\n00:14:07,184 --> 00:14:09,263\nAnd once that job completes,\n\n245\n00:14:09,263 --> 00:14:13,850\nI'll see that underneath my\nfront end I now have a IP pool.\n\n246\n00:14:13,850 --> 00:14:15,130\nFor that ten dot range.\n\n247\n00:14:18,630 --> 00:14:20,210\nSo these IP address pools, again,\n\n248\n00:14:20,210 --> 00:14:23,410\nthese are what we are going to create\nto basically allow, now we could use\n\n249\n00:14:23,410 --> 00:14:28,210\nDHCP if we had DHCP available on the\nnetwork that we could use that as well.\n\n250\n00:14:28,210 --> 00:14:31,750\nThis allows, again, the virtual machine\nmanager to provide those IP addresses.\n\n251\n00:14:31,750 --> 00:14:34,300\nThose static IP addresses\nto my virtual machines, and\n\n252\n00:14:34,300 --> 00:14:37,920\nmy virtual servers,\nthat I create on that network.\n\n253\n00:14:37,920 --> 00:14:39,880\nWe can also do Mac address pools.\n\n254\n00:14:39,880 --> 00:14:42,980\nAnother thing that we want to take a look\nat is called that in our objectives.\n\n255\n00:14:42,980 --> 00:14:45,430\nIs my Mac address pools.\n\n256\n00:14:45,430 --> 00:14:48,160\nBy default,\nwe're going to get two Mac address pools.\n\n257\n00:14:48,160 --> 00:14:52,800\nSo these are Mac addresses that the VMM is\ngoing to assign to the virtual machines\n\n258\n00:14:52,800 --> 00:14:54,790\nthat are going to be\nrunning on this network.\n\n259\n00:14:54,790 --> 00:15:00,151\nI've got two pools in here, one for\nmy hyper-V and Citrix-based\n\n260\n00:15:00,151 --> 00:15:06,700\nvirtualization servers and then one for\nmy VMware based virtualization servers.\n\n261\n00:15:06,700 --> 00:15:08,990\nWe can use these or we can create our own.\n\n262\n00:15:08,990 --> 00:15:12,446\nI'm not going to bother creating one but\njust to show you guys the wizard here.\n\n263\n00:15:12,446 --> 00:15:16,965\nIf I want to go and create a new mac\npool all I have to do is give it a name.\n\n264\n00:15:18,824 --> 00:15:21,123\nTell it what host groups\nI want to use this with.\n\n265\n00:15:21,123 --> 00:15:24,972\nI could use it for all of them,\nI could use it for a particular sub-host\n\n266\n00:15:24,972 --> 00:15:29,213\ngroup there and then I would just type\nin the starting and ending Mac address,\n\n267\n00:15:29,213 --> 00:15:33,020\nand then would have those available\nto assign to my virtual servers.\n\n268\n00:15:35,500 --> 00:15:37,360\nWe'll go and cancel that out.\n\n269\n00:15:37,360 --> 00:15:42,000\nSo at this point we've got a pretty good\nrepresentation of our physical network,\n\n270\n00:15:42,000 --> 00:15:46,820\nright, we've got the logical network\nthat we created the contoso front end.\n\n271\n00:15:46,820 --> 00:15:51,607\nAnd then I've got my IP address range to\nprovide IP addresses to the machines on\n\n272\n00:15:51,607 --> 00:15:53,068\nthat logical network.\n\n273\n00:15:53,068 --> 00:15:55,227\nI also have my sites to find within there.\n\n274\n00:15:55,227 --> 00:15:58,935\nAnd what IP addresses each one of those\nsites are using Now let's make another\n\n275\n00:15:58,935 --> 00:16:02,146\none, so we'll have a little bit to\nwork with as we go through here.\n\n276\n00:16:02,146 --> 00:16:05,599\nThen I'm gonna create another\none called Contoso Backend.\n\n277\n00:16:09,791 --> 00:16:13,939\nAame thing, I'm gonna allow the VM network\nto create on this local network to use\n\n278\n00:16:13,939 --> 00:16:15,920\nnetwork virtualization.\n\n279\n00:16:15,920 --> 00:16:18,210\nAs well as create a VM network,\n\n280\n00:16:18,210 --> 00:16:23,110\nlet's say a name, to give it access\nto the underlying physical network.\n\n281\n00:16:23,110 --> 00:16:27,439\nI'll click Next, and this is gonna\nbe in both the Gainesville and\n\n282\n00:16:27,439 --> 00:16:30,192\nTampa as well, so add it to Gainesville,\n\n283\n00:16:30,192 --> 00:16:34,380\ninsert a new row and type in my\nIP address range for that subnet.\n\n284\n00:16:43,157 --> 00:16:48,079\nAnd let's not do the same thing we did\nlast time, let's add a second one while\n\n285\n00:16:48,079 --> 00:16:52,352\nwe're here for the Tampa office,\nand they were on that 10.1.\n\n286\n00:16:55,312 --> 00:16:55,812\nNetwork.\n\n287\n00:17:03,671 --> 00:17:06,638\nSo now I've got my Contoso backend and\nI can go back and go through and\n\n288\n00:17:06,638 --> 00:17:07,530\nI probably should.\n\n289\n00:17:07,530 --> 00:17:09,095\nLet's go ahead and\nmake a new IP address pool for that\n\n290\n00:17:13,797 --> 00:17:19,973\nWe can call that one a Contoso Backend IP.\n\n291\n00:17:23,038 --> 00:17:24,839\nAnd we use our existing site.\n\n292\n00:17:33,441 --> 00:17:35,495\nNot gonna like that.\n\n293\n00:17:35,495 --> 00:17:38,293\nLet's try that again.\n\n294\n00:17:49,240 --> 00:17:51,678\nSo Contoso back in, IP address pool.\n\n295\n00:17:56,438 --> 00:17:58,510\nIt's not allowing me to\nuse my existing set.\n\n296\n00:17:58,510 --> 00:18:01,140\nWell I'll work on that,\nthat's a little glitch in here.\n\n297\n00:18:01,140 --> 00:18:04,690\nI will get that set up during our break,\nso we'll have a couple more sites to play\n\n298\n00:18:04,690 --> 00:18:10,060\nwith, or a couple more logical networks to\nplay with as we go through our Demo here.\n\n299\n00:18:10,060 --> 00:18:11,680\nWe've got our logical network defined.\n\n300\n00:18:11,680 --> 00:18:15,570\nRemember, the logical network is gonna\nbe the virtual representation of our\n\n301\n00:18:15,570 --> 00:18:16,850\nphysical network.\n\n302\n00:18:16,850 --> 00:18:19,570\nWithin that logical network\nwe created our network sites,\n\n303\n00:18:19,570 --> 00:18:24,230\nalso known as our logical\nnetwork definitions.\n\n304\n00:18:24,230 --> 00:18:28,390\nWhich are gonna define the physical\nlocations of our networks.\n\n305\n00:18:28,390 --> 00:18:31,590\nWe created some IP address pools\nthat we can use to pass out IP\n\n306\n00:18:31,590 --> 00:18:35,190\naddresses to those virtual machines\nthey're gonna be attached to that network.\n\n307\n00:18:35,190 --> 00:18:37,270\nAs well as we saw where we could go in and\n\n308\n00:18:37,270 --> 00:18:41,980\ncreate our MAC address pools if we had\na particular range of MAC addresses that\n\n309\n00:18:41,980 --> 00:18:45,430\nwe wanted VMM to assign to\nthose virtual machines.\n\n310\n00:18:45,430 --> 00:18:47,660\nSo, we got that part set up, and\n\n311\n00:18:47,660 --> 00:18:52,268\nthe next thing we wanna take a look at,\nlet's see where we wanna go with this,\n\n312\n00:18:52,268 --> 00:18:58,590\nlet's create some, let's move some of our\nhosts into our different host groups.\n\n313\n00:18:58,590 --> 00:19:03,687\nSo, I'm gonna add some new hosts,\nI think right now they've\n\n314\n00:19:03,687 --> 00:19:08,810\nonly got the one there, so\nI'm gonna add our Hyper-V hosts.\n\n315\n00:19:08,810 --> 00:19:10,619\nAnd we're just gonna cheat and\nlet this guy go out and find them all.\n\n316\n00:19:15,980 --> 00:19:18,768\nI'll use my Contoso admin account.\n\n317\n00:19:27,453 --> 00:19:30,297\nTarget resources are going to be.\n\n318\n00:19:39,934 --> 00:19:40,955\nLet's go out and find.\n\n319\n00:19:40,955 --> 00:19:48,477\nI should be able to find all of them in\none quick shot, but I know that SCCOM01.\n\n320\n00:19:48,477 --> 00:19:51,392\nThat's gotta be one of them.\n\n321\n00:19:56,836 --> 00:20:00,825\nSo it looks like I'm having some\nissues with my browsing here.\n\n322\n00:20:00,825 --> 00:20:02,728\nOh, wrong selection.\n\n323\n00:20:02,728 --> 00:20:07,806\nMy bad ther, I accidentally selected\nthe untrusted active directory network,\n\n324\n00:20:07,806 --> 00:20:10,530\ninstead of leaving on my trusted.\n\n325\n00:20:10,530 --> 00:20:12,210\nSo that'll me browse\nthrough active directory.\n\n326\n00:20:12,210 --> 00:20:15,064\nSo let me go pick my admin account that\nhas permissions over active directory.\n\n327\n00:20:17,525 --> 00:20:19,130\nThere we go.\n\n328\n00:20:19,130 --> 00:20:21,780\nNow we can do our little query\nagainst active directory, and\n\n329\n00:20:21,780 --> 00:20:26,850\nI'm just gonna cheat because I know\nthere's not that many computers\n\n330\n00:20:26,850 --> 00:20:30,200\nin this particular active directory lab,\nso I'm just gonna let it find all servers,\n\n331\n00:20:30,200 --> 00:20:33,405\nand it'll show me which ones\nare gonna be running Hyper-V.\n\n332\n00:20:35,580 --> 00:20:36,925\nWow, really struggling with my query.\n\n333\n00:20:42,903 --> 00:20:47,002\nShould be any, and it should be okay.\n\n334\n00:20:49,602 --> 00:20:50,264\nThere it goes.\n\n335\n00:20:50,264 --> 00:20:53,784\nLittle typo there on that one, and\nthere goes that and finds all my different\n\n336\n00:20:53,784 --> 00:20:57,340\nservers, and what I'm looking for\nare the ones that are running Hyper-V.\n\n337\n00:20:57,340 --> 00:20:58,640\nSo here I can see I've got three of them.\n\n338\n00:20:58,640 --> 00:21:07,130\nI'm gonna go ahead and select those guys,\nand let's add them to,\n\n339\n00:21:07,130 --> 00:21:09,710\nI'll tell you what let's do this,\nlet's put a couple of them in one.\n\n340\n00:21:11,230 --> 00:21:12,640\nAnd I'll put one of them on another site.\n\n341\n00:21:14,060 --> 00:21:15,428\nSo I add those to that Gainesville office.\n\n342\n00:21:21,650 --> 00:21:22,890\nWe'll let that job finish.\n\n343\n00:21:22,890 --> 00:21:23,640\nAnd then I'll go back and\n\n344\n00:21:23,640 --> 00:21:29,510\nadd the other one to my,\nWe can do that while it's running.\n\n345\n00:21:31,330 --> 00:21:32,690\nLet that job keep going.\n\n346\n00:21:32,690 --> 00:21:33,535\nCome back in here and search.\n\n347\n00:21:46,920 --> 00:21:48,732\nAnd then I'll add that last one.\n\n348\n00:21:51,112 --> 00:21:52,714\nThat Tampa post group.\n\n349\n00:21:57,172 --> 00:21:58,220\nAnd we'll get that out of there.\n\n350\n00:21:58,220 --> 00:21:58,927\nSo we'll let these jobs finish.\n\n351\n00:22:04,789 --> 00:22:07,392\nAnd of course this would be something that\nwould probably already be set up in your\n\n352\n00:22:07,392 --> 00:22:07,900\nenvironment.\n\n353\n00:22:07,900 --> 00:22:10,915\nYou might have to rearrange things\nto support your logical network, so\n\n354\n00:22:10,915 --> 00:22:12,786\nthat we can organize our Hyper-V servers.\n\n355\n00:22:17,964 --> 00:22:20,080\nNow these servers\nare gonna require a reboot.\n\n356\n00:22:20,080 --> 00:22:22,240\nI'm not gonna worry about\nrebooting them right now.\n\n357\n00:22:22,240 --> 00:22:26,730\nBut at some point I'm gonna have to reboot\nthese guys so that it can re-associate\n\n358\n00:22:26,730 --> 00:22:30,042\nall those resources on those Hyper-V\nservers with the different host groups.\n\n359\n00:22:30,042 --> 00:22:34,090\nIt will give you a little warning to let\nyou know that they are gonna require\n\n360\n00:22:34,090 --> 00:22:37,570\na restart when we start moving around\nbetween these different host groups.\n\n361\n00:22:38,600 --> 00:22:39,610\nSo once we get that set up,\n\n362\n00:22:39,610 --> 00:22:42,140\nthat'll give us everything we need\nto move on into the next portion.\n\n363\n00:22:43,270 --> 00:22:47,585\nSo we've created our logical network and\nagain that represents my physical network.\n\n364\n00:22:47,585 --> 00:22:51,485\nAnd we've kind of, we say virtualize,\n\n365\n00:22:51,485 --> 00:22:54,925\nI don't wanna say obfuscated,\nbut we've made it easier now for\n\n366\n00:22:54,925 --> 00:22:58,995\nother administrators to work with\nbecause they don't have to understand\n\n367\n00:22:58,995 --> 00:23:01,275\nthe different networks and\nthe physical part of my network.\n\n368\n00:23:01,275 --> 00:23:04,380\nThey can just pick I wanna\nadd this virtual machine\n\n369\n00:23:04,380 --> 00:23:06,030\nI wanna make a new web server, right.\n\n370\n00:23:06,030 --> 00:23:08,060\nWe're gonna scale out\non our Web Front End.\n\n371\n00:23:08,060 --> 00:23:12,740\nThey can go up and\npick that Contoso Front End.\n\n372\n00:23:12,740 --> 00:23:15,680\nThey don't have to understand what IP\naddress ranges we're using on that\n\n373\n00:23:15,680 --> 00:23:17,480\nFront End, or anything like that.\n\n374\n00:23:17,480 --> 00:23:20,340\nThey can just pick it from the list,\nmakes it easy for them.\n\n375\n00:23:20,340 --> 00:23:23,229\nThere I can see they did complete,\nthey are gonna require a reboot.\n\n376\n00:23:24,749 --> 00:23:26,810\nWhich I will take care of later.\n\n377\n00:23:26,810 --> 00:23:29,365\nSo at this point we've got\nour host groups created.\n\n378\n00:23:29,365 --> 00:23:33,900\nAgain, I do see that they\nare gonna need a restart there.\n\n379\n00:23:33,900 --> 00:23:36,820\nI have my logical networks created.\n\n380\n00:23:36,820 --> 00:23:40,750\nI've got my Contoso front end,\nmy Contoso back end set up.\n\n381\n00:23:40,750 --> 00:23:43,290\nI've added an IP address\nrange to my front end.\n\n382\n00:23:43,290 --> 00:23:46,588\nI'll go back and add an IP address to\nthat back end here in just a minute.\n\n383\n00:23:46,588 --> 00:23:51,082\nWe also created, or we looked at creating\nthat MAC address pool to give it\n\n384\n00:23:51,082 --> 00:23:53,660\nthe ability to pass out MAC addresses, or\n\n385\n00:23:53,660 --> 00:23:57,506\nassign MAC addresses to the newly\ncreated virtual machines.\n\n386\n00:23:57,506 --> 00:23:59,433\nSo that's probably a good place to start.\n\n387\n00:23:59,433 --> 00:24:02,231\nI'll tidy up some things in here and\nget us ready for\n\n388\n00:24:02,231 --> 00:24:04,460\nthe next step in our next segment.\n\n389\n00:24:04,460 --> 00:24:09,060\nWe're gonna take a look at working with my\nlogical switches, and my virtual switches.\n\n390\n00:24:09,060 --> 00:24:12,090\nSo we'll start tying in the switches and\n\n391\n00:24:12,090 --> 00:24:13,890\nstart working with\nthe actual Hyper-V servers.\n\n392\n00:24:13,890 --> 00:24:15,681\nSo stay tuned, we'll be right back.\n\n393\n00:24:15,681 --> 00:24:21,288\n[MUSIC]\n\n394\n00:24:21,288 --> 00:24:25,006\n[SOUND] All right welcome back everybody.\n\n395\n00:24:25,006 --> 00:24:28,524\nWe are continuing on with our\nvirtualization networking.\n\n396\n00:24:28,524 --> 00:24:31,350\nSo we'll jump back in to\nour VMM console here.\n\n397\n00:24:31,350 --> 00:24:33,660\nAnd I'll show you a couple\nof things I tidied up or\n\n398\n00:24:33,660 --> 00:24:36,470\nI had an issue in the previous segment.\n\n399\n00:24:36,470 --> 00:24:38,730\nI overlapped a couple of\nthose IP address ranges,\n\n400\n00:24:38,730 --> 00:24:41,690\nwhich is why it wasn't letting\nme finish that one wizard.\n\n401\n00:24:41,690 --> 00:24:44,780\nSo as you can see here on my screen,\nI just tidied things up.\n\n402\n00:24:44,780 --> 00:24:45,550\nSame thing, though.\n\n403\n00:24:45,550 --> 00:24:48,905\nI've got a Contoso front-end,\nwhich is one of my logical networks.\n\n404\n00:24:48,905 --> 00:24:53,405\nAnd then I've got a contoso back\nin another logical network.\n\n405\n00:24:53,405 --> 00:24:57,095\nThen underneath each one of those I've\ncreated two different IP address pools.\n\n406\n00:24:57,095 --> 00:24:57,965\nI've got one for\n\n407\n00:24:57,965 --> 00:25:03,350\nmy Gainesville location where they're\nusing a ten zero zero zero slash 24.\n\n408\n00:25:03,350 --> 00:25:07,880\nAnd then for Tampa, I'm gonna do a ten,\nzero, one, zero, slash 24.\n\n409\n00:25:07,880 --> 00:25:13,520\nAnd then on my back end, I've got, in the\nGainesville, doing a ten, one, zero, zero.\n\n410\n00:25:13,520 --> 00:25:16,360\nAnd then in Tampa,\nwe're doing a ten, one, one, zero.\n\n411\n00:25:16,360 --> 00:25:19,070\nSo, again,\nnothing really to do with the concept.\n\n412\n00:25:19,070 --> 00:25:22,930\nJust a typo on my part where I\noverlapped a couple IP address ranges.\n\n413\n00:25:22,930 --> 00:25:27,290\nSo we've got our logical networks created\nwhich is the virtual representation of our\n\n414\n00:25:27,290 --> 00:25:28,510\nphysical network.\n\n415\n00:25:28,510 --> 00:25:31,810\nThen I've created a couple\nof IP address pools for each\n\n416\n00:25:31,810 --> 00:25:36,460\none of those logical networks representing\nthe two different sites that we have.\n\n417\n00:25:36,460 --> 00:25:40,430\nI've got an office in Gainesville and\nI've got an office in Tampa.\n\n418\n00:25:40,430 --> 00:25:41,180\nAll right?\n\n419\n00:25:41,180 --> 00:25:43,360\nSo once we've got that\nlogical network set up,\n\n420\n00:25:43,360 --> 00:25:45,730\nthat representation of\nour physical network,\n\n421\n00:25:45,730 --> 00:25:51,100\nthe next thing we need to do is associate\nour host with those logical networks.\n\n422\n00:25:51,100 --> 00:25:56,290\nSo for that I'm gonna go back over to\nour fabric node in our console and\n\n423\n00:25:56,290 --> 00:25:57,590\nI'll start with GNV here.\n\n424\n00:25:57,590 --> 00:25:59,240\nAnd I added those two hosts to GNV.\n\n425\n00:25:59,240 --> 00:26:02,130\nThese guys are needing a reboot\nto complete a couple things,\n\n426\n00:26:02,130 --> 00:26:04,710\nI don't think it's gonna\naffect me here in my demo.\n\n427\n00:26:04,710 --> 00:26:06,920\nSo I'm just gonna pull\nup the properties for\n\n428\n00:26:06,920 --> 00:26:10,690\none of my Hyper-V servers in\nthe Gainesville location.\n\n429\n00:26:10,690 --> 00:26:12,200\nAnd here I can configure a lot of things.\n\n430\n00:26:12,200 --> 00:26:16,490\nWhat we're dealing with\nright now is my hardware.\n\n431\n00:26:16,490 --> 00:26:21,360\nSo under my hardware tab of my\nproperties for my Hyper-V server.\n\n432\n00:26:21,360 --> 00:26:25,710\nThis is where I can see the network\nadapters for that Hyper-V server.\n\n433\n00:26:25,710 --> 00:26:27,470\nAnd I've got two in there.\n\n434\n00:26:27,470 --> 00:26:30,540\nSo what you do is, you come down,\nyou find your network adapter.\n\n435\n00:26:30,540 --> 00:26:33,260\nYou click on that logical\nnetwork connectivity.\n\n436\n00:26:33,260 --> 00:26:37,240\nThis is where we're gonna associate\nthat particular network adapter\n\n437\n00:26:37,240 --> 00:26:38,830\nwith that logical network.\n\n438\n00:26:38,830 --> 00:26:42,310\nSo I'll use adapter number one there for\nthe frontend.\n\n439\n00:26:44,300 --> 00:26:47,220\nAnd it's gonna warn me here that I've\ngotta make sure I've got a network\n\n440\n00:26:47,220 --> 00:26:49,210\nadapter available between the host.\n\n441\n00:26:49,210 --> 00:26:52,760\nHigh in the VMM server, for lab purposes\nI'm not too worried about that.\n\n442\n00:26:52,760 --> 00:26:54,380\nWe'll go ahead and click OK.\n\n443\n00:26:54,380 --> 00:26:58,520\nNormally, we can always add another\nnetwork right to my servers.\n\n444\n00:26:59,570 --> 00:27:03,300\nAnd then for the second network\nadapter in this particular server,\n\n445\n00:27:03,300 --> 00:27:07,930\nI'm gonna connect it to\nthe Contoso back end, all right?\n\n446\n00:27:07,930 --> 00:27:11,480\nSo now I've told this particular Hyper-V\nhost that he's connected to these two\n\n447\n00:27:11,480 --> 00:27:13,170\ndifferent logical networks.\n\n448\n00:27:13,170 --> 00:27:16,510\nOne's connected to the front end, and\none is connected to the back end.\n\n449\n00:27:16,510 --> 00:27:20,380\nSo then as I add virtual machines\nto that particular Hyper-V server,\n\n450\n00:27:20,380 --> 00:27:22,940\nI'll be able to pick\none of those networks.\n\n451\n00:27:22,940 --> 00:27:25,440\nI can pick,\nokay connect this virtual machine.\n\n452\n00:27:25,440 --> 00:27:28,110\nThis is a web serve I wanna\nthrow it on the front end.\n\n453\n00:27:28,110 --> 00:27:31,220\nOr if I created up a new sequel server\nI can dump it on the back end or\n\n454\n00:27:31,220 --> 00:27:32,570\nwhatever I need to do.\n\n455\n00:27:32,570 --> 00:27:36,150\nSo we associate the actual Hyper-V server,\n\n456\n00:27:36,150 --> 00:27:39,180\nthe network adapters in\nthe physical network adapters,\n\n457\n00:27:39,180 --> 00:27:43,940\nin the Hyper-V server to the logical\nnetworks that we want it to connect to.\n\n458\n00:27:45,240 --> 00:27:46,460\nSo go ahead and click okay on that.\n\n459\n00:27:48,890 --> 00:27:51,530\nThen I'll do the same thing,\nwe'll just rinse and repeat here.\n\n460\n00:27:51,530 --> 00:27:53,440\nI'm going to click on\nmy second server there.\n\n461\n00:27:53,440 --> 00:27:56,930\nPull up it's properties, and\nI'll do this relatively quickly.\n\n462\n00:27:56,930 --> 00:27:59,738\nI'll just go to hardware take\nmy first network adapter,\n\n463\n00:27:59,738 --> 00:28:01,089\nattach it to the front end.\n\n464\n00:28:02,888 --> 00:28:06,727\nTake my second network adapter\nthat's in that Hyper-V server,\n\n465\n00:28:06,727 --> 00:28:08,484\nand attach it to the back end.\n\n466\n00:28:13,139 --> 00:28:15,125\nThen I'm going to go to the other site.\n\n467\n00:28:15,125 --> 00:28:17,016\nSo now I'm going to jump over to Tampa.\n\n468\n00:28:17,016 --> 00:28:22,420\nTake that Hyper-V server and\ndo the same thing.\n\n469\n00:28:22,420 --> 00:28:23,136\nGo into hardware.\n\n470\n00:28:23,136 --> 00:28:27,170\nFind my network adapter.\n\n471\n00:28:27,170 --> 00:28:28,229\nConnect one of them to the front end.\n\n472\n00:28:30,585 --> 00:28:32,210\nAnd connect that second one.\n\n473\n00:28:32,210 --> 00:28:34,789\nTo the back end.\n\n474\n00:28:38,213 --> 00:28:40,250\nAnd there we go.\n\n475\n00:28:40,250 --> 00:28:43,620\nSo now I've got my physical servers.\n\n476\n00:28:43,620 --> 00:28:46,910\nThe Hyper-V servers,\ncould be a Citrix could be VMware.\n\n477\n00:28:46,910 --> 00:28:49,260\nI've got those guys associated with two,\n\n478\n00:28:49,260 --> 00:28:52,960\nor connected to the logical\nnetworks that we've created.\n\n479\n00:28:54,400 --> 00:28:58,010\nSo the next thing I'm gonna want to\ndo in this guy is configure some\n\n480\n00:28:58,010 --> 00:28:58,980\nvirtual networks.\n\n481\n00:28:58,980 --> 00:29:02,180\nNow the virtual networks,\nagain terminology with Microsoft,\n\n482\n00:29:02,180 --> 00:29:03,550\nyou gotta love them.\n\n483\n00:29:03,550 --> 00:29:06,490\nWe've got our logical networks that\nwe've talked about, that's gonna be that\n\n484\n00:29:06,490 --> 00:29:12,290\nphysical representation of my virtual\nrepresentation, my physical network.\n\n485\n00:29:12,290 --> 00:29:18,060\nWe've got the, then we're gonna create\nthese virtual machine networks,\n\n486\n00:29:18,060 --> 00:29:18,890\nor VM networks.\n\n487\n00:29:18,890 --> 00:29:21,320\nNow this is more like what\nyou're used to working with\n\n488\n00:29:21,320 --> 00:29:23,010\ndirectly on your Hyper-V console, right?\n\n489\n00:29:23,010 --> 00:29:26,670\nIf you go into your Hyper-V console,\nwe can create a new virtual network.\n\n490\n00:29:26,670 --> 00:29:31,140\nSame thing here, but their gonna call it,\nwell they call it virtual network here,\n\n491\n00:29:31,140 --> 00:29:32,640\nbut when you create it.\n\n492\n00:29:32,640 --> 00:29:38,100\nIt's gonna be called a VM network, so two\ndifferent terms describing the same thing.\n\n493\n00:29:38,100 --> 00:29:42,080\nI've got my virtual networks,\nand I've got my VM networks.\n\n494\n00:29:42,080 --> 00:29:43,850\nSame thing.\nAll right, so\n\n495\n00:29:43,850 --> 00:29:50,200\nI'm just gonna right click on this VM\nnetwork and choose to create a VM network.\n\n496\n00:29:50,200 --> 00:29:51,140\nSo you have launch by wizard.\n\n497\n00:29:52,180 --> 00:29:56,500\nBut the VM network, this is what the\nvirtual machines are gonna be attached to.\n\n498\n00:29:56,500 --> 00:30:00,260\nSo when you whip up new virtual machines,\nyou're gonna connect them to the different\n\n499\n00:30:00,260 --> 00:30:03,640\nVM networks that\nare created on those hosts.\n\n500\n00:30:03,640 --> 00:30:07,460\nSo let's create one, and\nlet's see what we want to call this one.\n\n501\n00:30:07,460 --> 00:30:11,201\nWe'll call this one something like my,\nwe may call it the Dev,\n\n502\n00:30:11,201 --> 00:30:17,520\nlet's call it the Contoso Front end,\nfor lack of a better.\n\n503\n00:30:19,010 --> 00:30:21,150\nNot feeling all that creative today.\n\n504\n00:30:21,150 --> 00:30:24,280\nAnd for the logical network I've\ngot a drop down list down here.\n\n505\n00:30:24,280 --> 00:30:28,120\nAnd let's change that up,\nlet's call that the VM front end just to\n\n506\n00:30:28,120 --> 00:30:32,820\ndifferentiate between my logical networks\nand my virtual machine networks.\n\n507\n00:30:32,820 --> 00:30:35,850\nI've got my Contoso VM front end and\n\n508\n00:30:35,850 --> 00:30:39,390\nI'm gonna associate that with\nthe Contoso front end logical network.\n\n509\n00:30:40,580 --> 00:30:41,230\nI'll click next.\n\n510\n00:30:42,540 --> 00:30:44,240\nThen I wanna use isolation.\n\n511\n00:30:44,240 --> 00:30:46,610\nSo I've got a couple of different ways,\nwe, or, we've gotta,\n\n512\n00:30:46,610 --> 00:30:51,970\nto isolate it we're going to\nbasically segregate this out, right?\n\n513\n00:30:51,970 --> 00:30:55,320\nSeparate it from the other networks.\n\n514\n00:30:55,320 --> 00:30:59,000\nNow depending on what you're trying to do,\nlike in this case, it's my front and\n\n515\n00:30:59,000 --> 00:31:00,050\nmy back-end.\n\n516\n00:31:00,050 --> 00:31:03,440\nI could skip the, I really probably\nwouldn't want to do the isolation, right?\n\n517\n00:31:03,440 --> 00:31:06,380\nI want my front-end to be\nable to talk to my back-end.\n\n518\n00:31:06,380 --> 00:31:09,250\nSo in this scenario,\nthose names might not make a lot of sense.\n\n519\n00:31:09,250 --> 00:31:12,210\nI would just choose no isolation and\nthen they could\n\n520\n00:31:12,210 --> 00:31:15,560\nconnect to the logical network and\nthey could connect to the other subnets.\n\n521\n00:31:15,560 --> 00:31:19,430\nFor the demo, though, I do want to show\nyou guys this network virtualization\n\n522\n00:31:19,430 --> 00:31:22,910\nbecause if we start getting into\ncloud service providers, or\n\n523\n00:31:22,910 --> 00:31:26,000\nif we're gnna divide up our network\nbetween different departments and\n\n524\n00:31:26,000 --> 00:31:30,230\nthings like that, maybe as I.T,\nwe want to segregate out\n\n525\n00:31:30,230 --> 00:31:34,260\nthe different departments and then control\nwhat's allowed to be routed from one\n\n526\n00:31:34,260 --> 00:31:36,945\ndepartments virtual network to\nanother departments virtual network.\n\n527\n00:31:36,945 --> 00:31:39,346\n[COUGH] So we'll go ahead and\nuse the isolation.\n\n528\n00:31:41,703 --> 00:31:45,095\nThen I'm gonna add my VM subnets.\n\n529\n00:31:45,095 --> 00:31:47,215\nNow remember, this is all logical, right?\n\n530\n00:31:47,215 --> 00:31:49,704\nThis is on top of my physical networks.\n\n531\n00:31:49,704 --> 00:31:54,312\nAnd my VM subnets don't actually have to\nbe using the same IP address range as\n\n532\n00:31:54,312 --> 00:31:56,911\nthe logical network that we've created.\n\n533\n00:31:56,911 --> 00:31:59,210\nThis is where it starts\ngetting a little deep, and\n\n534\n00:31:59,210 --> 00:32:01,195\nyou've gotta do a little bit of planning.\n\n535\n00:32:01,195 --> 00:32:04,828\nIt's also what allows, if I'm a CSP,\nmy cloud service provider,\n\n536\n00:32:04,828 --> 00:32:09,101\nthis is what's gonna allow me to have my\ncustomers migrate part of their network\n\n537\n00:32:09,101 --> 00:32:13,010\nup to that cloud, and continue to\nuse their own IP address range.\n\n538\n00:32:13,010 --> 00:32:14,120\nCuz it's not going to.\n\n539\n00:32:14,120 --> 00:32:16,590\nIt's going to be isolated\nfrom everything else.\n\n540\n00:32:16,590 --> 00:32:20,970\nAnd it's not going to conflict with any\nother VM networks that I have setup.\n\n541\n00:32:20,970 --> 00:32:22,270\nSo we'll go here and add a range.\n\n542\n00:32:22,270 --> 00:32:23,730\nAnd I'm going to use\na completely different one.\n\n543\n00:32:23,730 --> 00:32:25,177\nLet's say this is something like.\n\n544\n00:32:27,047 --> 00:32:33,004\nWe'll call this thing, what will I call\nit, Cortorso Front end or VM front end.\n\n545\n00:32:39,553 --> 00:32:41,573\nIP range.\n\n546\n00:32:41,573 --> 00:32:47,610\nAnd the subnet for them,\nlet's do a 192.168.\n\n547\n00:32:47,610 --> 00:32:55,370\nNot 0.0/24 And\nI'll click next on my wizard.\n\n548\n00:32:55,370 --> 00:32:56,490\nI don't have a gateway set up.\n\n549\n00:32:56,490 --> 00:32:59,100\nWe're gonna talk about\na gateway in just a minute.\n\n550\n00:32:59,100 --> 00:33:01,185\nBecause I'm isolating this guy.\n\n551\n00:33:01,185 --> 00:33:02,270\nRight.\nThat means\n\n552\n00:33:02,270 --> 00:33:04,190\nhe's not gonna have any\nconnectivity to the networks,\n\n553\n00:33:04,190 --> 00:33:07,940\nwe're gonna have to somehow route these\npackets between the different networks.\n\n554\n00:33:07,940 --> 00:33:10,740\nAnd that's what's gonna give us\nthe ability to control who's allowed to\n\n555\n00:33:10,740 --> 00:33:13,680\nsee who, and\nwho's allowed to communicate with whom.\n\n556\n00:33:13,680 --> 00:33:14,810\nSo I'll just skip that for now.\n\n557\n00:33:14,810 --> 00:33:17,528\nWe'll click Next, and then Finish.\n\n558\n00:33:20,314 --> 00:33:21,010\nAll right.\n\n559\n00:33:21,010 --> 00:33:25,898\nSo once that's done,\nI now have a new VM network.\n\n560\n00:33:27,779 --> 00:33:28,463\nRight.\n\n561\n00:33:28,463 --> 00:33:33,580\nAnd let's go ahead and create another\nVM network for my contoso back end.\n\n562\n00:33:35,670 --> 00:33:38,889\nWe follow that same naming\nconvention contoso VM back end.\n\n563\n00:33:41,814 --> 00:33:45,066\nAssociate that with a logic network,\nmy contoso back end.\n\n564\n00:33:46,585 --> 00:33:51,196\nWe'll use our isolation, and for\n\n565\n00:33:51,196 --> 00:33:55,330\nthe subnotes for the back end,\n\n566\n00:33:55,330 --> 00:34:00,880\nlet's see, Contoso-VM back end IP.\n\n567\n00:34:00,880 --> 00:34:07,095\nAnd the subnet for my back end,\nlet's do a 192.168.\n\n568\n00:34:09,558 --> 00:34:13,634\nThat 1.0/24.\n\n569\n00:34:13,634 --> 00:34:16,700\nAnd we'll click Next.\n\n570\n00:34:16,700 --> 00:34:19,700\nAgain, no gateway setup yet.\n\n571\n00:34:19,700 --> 00:34:22,030\nWe'll click Next, and Finish.\n\n572\n00:34:23,270 --> 00:34:30,020\nAnd now I have my, well hopefully I\ngot my two virtual machine networks.\n\n573\n00:34:30,020 --> 00:34:33,620\nSo these are what they are going to be\nable to connect those virtual machines to.\n\n574\n00:34:33,620 --> 00:34:37,600\nIt's what they're gonna see when they\ngo to create new virtual machines.\n\n575\n00:34:37,600 --> 00:34:39,150\nSo they don't have to understand and\n\n576\n00:34:39,150 --> 00:34:43,365\nany of the complexity behind my\nunderlining physical network.\n\n577\n00:34:43,365 --> 00:34:44,170\nRight.\n\n578\n00:34:44,170 --> 00:34:46,640\nWhen they go to whip out new\nvirtual machines they can\n\n579\n00:34:46,640 --> 00:34:47,930\nchoose Contoso VM back end.\n\n580\n00:34:47,930 --> 00:34:50,350\nAnd that's going to make sense to them,\nright.\n\n581\n00:34:50,350 --> 00:34:52,040\nThat's something that they can understand.\n\n582\n00:34:52,040 --> 00:34:54,985\nAgain, we could use department names\nif we're doing this internally.\n\n583\n00:34:54,985 --> 00:34:56,905\nIf we're doing this as\na cloud service provider,\n\n584\n00:34:56,905 --> 00:34:59,385\nI might be using names that\nrepresent my different customers.\n\n585\n00:35:00,455 --> 00:35:03,715\nWhen we go add new virtual machines,\nI can hit that drop-down list, and\n\n586\n00:35:03,715 --> 00:35:07,375\nI can pick it right from there, right.\n\n587\n00:35:07,375 --> 00:35:12,400\nSo now we've got all of that set up, and\nat that point we could start going out and\n\n588\n00:35:12,400 --> 00:35:14,760\ndo virtual machines on our\ndifferent hyper view servers.\n\n589\n00:35:16,090 --> 00:35:17,300\nFor us, though, we've seen that.\n\n590\n00:35:17,300 --> 00:35:20,830\nWe've seen the creation of virtual\nmachines in some of our other episodes.\n\n591\n00:35:20,830 --> 00:35:23,590\nSo if you missed that,\nmake sure you go back and tune in and\n\n592\n00:35:23,590 --> 00:35:25,430\nwatch some of those other segments.\n\n593\n00:35:25,430 --> 00:35:30,190\nFor this particular segment, we're\ngonna continue on with our objectives.\n\n594\n00:35:30,190 --> 00:35:34,450\nAnd the next thing I wanna talk to\nyou guys about is something called\n\n595\n00:35:34,450 --> 00:35:38,170\nlogical switches, and\nvirtual switches, and\n\n596\n00:35:38,170 --> 00:35:41,420\ncreating port profiles and\nclassifications.\n\n597\n00:35:41,420 --> 00:35:42,110\nAll right.\n\n598\n00:35:42,110 --> 00:35:44,210\nSo when we look at our fabric over here.\n\n599\n00:35:44,210 --> 00:35:49,380\nAs I scroll down through my objects,\nI have my logical switches, all right.\n\n600\n00:35:49,380 --> 00:35:52,220\nNow logical switches\nare really just containers.\n\n601\n00:35:52,220 --> 00:35:54,810\nWell we know when we go to our\ndifferent hyperview servers,\n\n602\n00:35:54,810 --> 00:35:57,830\nwe're gonna create those switches.\n\n603\n00:35:57,830 --> 00:35:59,460\nOur virtual switches.\n\n604\n00:35:59,460 --> 00:36:02,600\nAnd we've gotta set the different\nproperties on them.\n\n605\n00:36:02,600 --> 00:36:06,150\nWhat this is gonna allow me to do\nis basically create a template.\n\n606\n00:36:06,150 --> 00:36:09,360\nIf I've got multiple hyperview\nservers that I wanna push\n\n607\n00:36:09,360 --> 00:36:12,210\nout the same settings to,\nI wanna make sure that all those switches\n\n608\n00:36:12,210 --> 00:36:16,590\non those individual hyperview servers\nare configured consistently across them.\n\n609\n00:36:16,590 --> 00:36:20,684\nWhen I whip out new Hyper-V servers and I\nwanna pull up a new switch on that Hyper-V\n\n610\n00:36:20,684 --> 00:36:23,050\nserver, I wanna grab those same settings.\n\n611\n00:36:23,050 --> 00:36:26,630\nWell rather than having to write them\ndown, memorize them, something like that,\n\n612\n00:36:26,630 --> 00:36:27,650\nwe can create a template.\n\n613\n00:36:27,650 --> 00:36:30,325\nAnd that's gonna allow me,\nas well as other admins that maybe don't\n\n614\n00:36:30,325 --> 00:36:32,610\nunderstand,they can just\ngrab that template,\n\n615\n00:36:32,610 --> 00:36:35,400\nit's gonna have all the settings\nconfigured for them.\n\n616\n00:36:35,400 --> 00:36:37,170\nSo watch your terminology there.\n\n617\n00:36:37,170 --> 00:36:43,740\nOn the exam, or when you're studying,\nlogical switches versus virtual switches.\n\n618\n00:36:43,740 --> 00:36:46,240\nThe logical switches is the definition,\n\n619\n00:36:46,240 --> 00:36:50,350\nthe template that we're gonna push\nout to the different Hyper-V servers.\n\n620\n00:36:50,350 --> 00:36:53,990\nThe virtual switch Is\nwhat you actually create\n\n621\n00:36:53,990 --> 00:36:57,622\non the Hyper V server based\noff of the logical switch.\n\n622\n00:36:57,622 --> 00:36:58,570\nAll right.\n\n623\n00:36:58,570 --> 00:37:00,420\nSo watch your terminology there.\n\n624\n00:37:00,420 --> 00:37:04,980\nAnd the same thing goes with my port\nprofiles, and my port classifications.\n\n625\n00:37:04,980 --> 00:37:10,360\nThese are basically templates that I can\nuse when I create my logical switch.\n\n626\n00:37:10,360 --> 00:37:12,310\nWe'll get these layers of\ntemplates that we can add,\n\n627\n00:37:12,310 --> 00:37:14,760\nand the whole idea is consistency.\n\n628\n00:37:14,760 --> 00:37:18,680\nMaking sure that my settings\nare configured consistently\n\n629\n00:37:18,680 --> 00:37:21,090\nacross my different Hyper-V servers.\n\n630\n00:37:21,090 --> 00:37:24,630\nSo for the port profiles you can see\nI've got a whole bunch built in already,\n\n631\n00:37:24,630 --> 00:37:27,110\nI've got an SRIOV profile.\n\n632\n00:37:27,110 --> 00:37:33,110\nWe talked SRIOV in a previous segment that\nwas our Single root I/O virtualization.\n\n633\n00:37:33,110 --> 00:37:37,580\nWhat gives those virtual machines direct\naccess to that physical network adapter so\n\n634\n00:37:37,580 --> 00:37:42,320\nwe can bypass that VM bus and we can get\na lot better throughput through here.\n\n635\n00:37:42,320 --> 00:37:43,770\nAnd they have a profile for that.\n\n636\n00:37:43,770 --> 00:37:46,130\nWe can go through them and\nI can change some of these settings.\n\n637\n00:37:47,630 --> 00:37:50,050\nThey've got a few prebuilt\nones that we can use.\n\n638\n00:37:50,050 --> 00:37:52,020\nAnd we can create our own.\n\n639\n00:37:52,020 --> 00:37:55,660\nAs we go through here,\nI can see that this is the SRIOV profile.\n\n640\n00:37:55,660 --> 00:37:57,840\nWe've got my offload settings,\n\n641\n00:37:57,840 --> 00:38:02,700\nthis is where we can start doing some\noptimization on our virtual networking.\n\n642\n00:38:02,700 --> 00:38:06,530\nWe can do things like virtual machine\nqueueing, all right, where we can have...\n\n643\n00:38:07,560 --> 00:38:11,580\nif we have a network adapter that\nsupports virtual machine queueing,\n\n644\n00:38:11,580 --> 00:38:15,470\nwe can allow network adapter to talk\ndirectly to that virtual machine,\n\n645\n00:38:15,470 --> 00:38:18,520\nwithout having to bother the virtual\nmachine and the Hyper-V.\n\n646\n00:38:18,520 --> 00:38:21,730\nWe've got IP set task offloading.\n\n647\n00:38:21,730 --> 00:38:29,160\nMove some of that missing power off\nof that guest operating system.\n\n648\n00:38:30,230 --> 00:38:33,390\nWe also have that again as far as\nthis profile goes they've already\n\n649\n00:38:33,390 --> 00:38:35,790\nhave the enable single\nroot I/O virtualization\n\n650\n00:38:35,790 --> 00:38:38,050\nchecked because that's what\nthis particular profile is for.\n\n651\n00:38:39,560 --> 00:38:41,290\nGot my security settings.\n\n652\n00:38:41,290 --> 00:38:42,690\nGot a bunch of different\nsettings in here and\n\n653\n00:38:42,690 --> 00:38:44,850\nwhile we're here let's\ntake a look at them.\n\n654\n00:38:44,850 --> 00:38:47,620\nThey could call you out\non the exam on these.\n\n655\n00:38:47,620 --> 00:38:50,500\nSome of the security settings from\nmy virtual network adapters that I\n\n656\n00:38:50,500 --> 00:38:51,460\ncould apply.\n\n657\n00:38:51,460 --> 00:38:53,400\nHere I could put it in the profile.\n\n658\n00:38:53,400 --> 00:38:55,650\nSo that I don't have to\nreply it every time.\n\n659\n00:38:55,650 --> 00:38:57,770\nAgain, we're talking consistency, right.\n\n660\n00:38:57,770 --> 00:39:04,290\nSet up to do,\nwhen I create that virtual switch,\n\n661\n00:39:04,290 --> 00:39:07,720\nI'm gonna create multiple virtual switches\nacross the different Hyper-V servers.\n\n662\n00:39:07,720 --> 00:39:13,360\nAnd I don't want one of them doing DHCP\nguard, cuz that's our company policy,\n\n663\n00:39:13,360 --> 00:39:16,410\nbut then one of them might forget\nto set that DHCP guard up.\n\n664\n00:39:16,410 --> 00:39:20,110\nSo here we can set that in our\nproperties of our profile.\n\n665\n00:39:20,110 --> 00:39:23,930\nMac spoofing, allowing them to\nchange the source Mac address.\n\n666\n00:39:23,930 --> 00:39:28,520\nDHCP guard, which is gonna prevent or\ntry to block traffic from\n\n667\n00:39:28,520 --> 00:39:33,890\nan unauthorized virtual machine that's\npretending to be a DHCP server.\n\n668\n00:39:33,890 --> 00:39:36,360\nSame thing with a router,\nI can do a router guard.\n\n669\n00:39:36,360 --> 00:39:39,790\nWhere I can block a virtual\nmachine from unauthorized\n\n670\n00:39:39,790 --> 00:39:41,690\nvirtual machine's\npretending to be a router.\n\n671\n00:39:41,690 --> 00:39:44,174\nPass our router advertisements,\nthings like that.\n\n672\n00:39:44,174 --> 00:39:48,361\nAllow guest teaming,\ndo I wanna have my virtual machines\n\n673\n00:39:48,361 --> 00:39:52,563\nto have more than one network\nadapter teaming together.\n\n674\n00:39:52,563 --> 00:39:55,590\nAllow IEEE's priority tagging,\n\n675\n00:39:55,590 --> 00:40:00,710\nthis is if you're using that\nIEEE Zeta2.1P protocol.\n\n676\n00:40:02,070 --> 00:40:06,030\nAnd then, allowed guest specified\nIP addresses, this is pretty cool.\n\n677\n00:40:06,030 --> 00:40:08,950\nThis is where I was talking about\nis a cloud service provider.\n\n678\n00:40:10,530 --> 00:40:11,870\nNotice it's only available in 2012 R2,\n\n679\n00:40:11,870 --> 00:40:15,440\nalways something you wanna\npay attention to on the exam.\n\n680\n00:40:15,440 --> 00:40:19,460\nThey love to call out the new features and\nnew capabilities on the exam.\n\n681\n00:40:19,460 --> 00:40:24,490\nWhat this is gonna allow you to do is\nallow the guest to actually change or\n\n682\n00:40:24,490 --> 00:40:28,378\nmanipulate the IP addresses on\nthe virtual network adapter.\n\n683\n00:40:28,378 --> 00:40:31,810\nFor this one,\nI'm not gonna make any changes,\n\n684\n00:40:31,810 --> 00:40:33,400\nthis is one of their built in profiles.\n\n685\n00:40:33,400 --> 00:40:34,660\nI just wanted to kind of show you this.\n\n686\n00:40:34,660 --> 00:40:38,470\nWe can also do some bandwidth settings,\nminimum bandwidth for\n\n687\n00:40:38,470 --> 00:40:44,150\nthat particular network adapter, maximum\nbandwidth, minimum bandwidth, weight.\n\n688\n00:40:44,150 --> 00:40:47,100\nI'm just gonna cancel that out,\nthat was just one of the pre-built ones.\n\n689\n00:40:47,100 --> 00:40:52,138\nWe can also create our own, if I want\nto come in here and choose my profile.\n\n690\n00:40:52,138 --> 00:40:57,138\nOkay, so,\nI can do a create hyper V port profile,\n\n691\n00:40:57,138 --> 00:41:01,543\nand we'll give it a name\nof something like,\n\n692\n00:41:01,543 --> 00:41:05,247\nlet's call this Contoso-Uplink.\n\n693\n00:41:09,525 --> 00:41:14,390\nAnd I just choose an uplink port profile\nfrom one of my options down here.\n\n694\n00:41:14,390 --> 00:41:17,440\nAnd as far as the load\nbalancing algorithm,\n\n695\n00:41:17,440 --> 00:41:20,900\nwe discuss some of the load balancing\nmethods in another episode.\n\n696\n00:41:20,900 --> 00:41:23,160\nI'll just choose the address hash and\nwe'll click next.\n\n697\n00:41:24,530 --> 00:41:27,660\nAnd then, my network configuration,\n\n698\n00:41:27,660 --> 00:41:31,120\nwhat network site's supported\nby this uplink or profile.\n\n699\n00:41:31,120 --> 00:41:33,140\nWhere do I wanna allow\nthis profile to be used?\n\n700\n00:41:33,140 --> 00:41:35,240\nThis is where I can start limiting.\n\n701\n00:41:35,240 --> 00:41:39,290\nMaybe, I don't want this particular\nprofile applied to any of the switches\n\n702\n00:41:39,290 --> 00:41:41,150\nthat were created out\nthere in my front end.\n\n703\n00:41:41,150 --> 00:41:45,307\nMaybe, this is just a setting that I want\nto apply to my back end virtual machines,\n\n704\n00:41:45,307 --> 00:41:47,700\nand my back end virtual switches.\n\n705\n00:41:47,700 --> 00:41:50,320\nSo, I can pick and\nchoose which one we want.\n\n706\n00:41:50,320 --> 00:41:53,700\nFor this one, I'm gonna go ahead and\nchoose all of my back-ends,\n\n707\n00:41:53,700 --> 00:41:56,070\nI'll use this on all of them,\nmy back-end and my front-end.\n\n708\n00:41:56,070 --> 00:41:57,180\nThis is my uplink port.\n\n709\n00:41:57,180 --> 00:42:01,130\nBasically, this is gonna do the forwarding\nbetween the different networks.\n\n710\n00:42:01,130 --> 00:42:05,170\nI also want to go ahead and\nenable Hyper-V network virtualization.\n\n711\n00:42:05,170 --> 00:42:11,362\nAn important note underneath that check\nmark there, if you're running 2012,\n\n712\n00:42:11,362 --> 00:42:15,812\nthen you're gonna need to turn this on if\nyou wanna support network virtualization.\n\n713\n00:42:15,812 --> 00:42:20,620\nIn 2012 R2, the network virtualization\nis gonna be enabled anyway.\n\n714\n00:42:20,620 --> 00:42:22,648\nSo, I'm really doing this for\ncompatibility.\n\n715\n00:42:22,648 --> 00:42:27,520\nMaybe, somebody's gonna add a host that's\nrunning 2012, they haven't upgraded\n\n716\n00:42:27,520 --> 00:42:31,540\nto 2012 R2 yet, and I want to be\nable to use network virtualization.\n\n717\n00:42:31,540 --> 00:42:33,770\nSo, I need to check that here.\n\n718\n00:42:33,770 --> 00:42:34,560\nWe'll click Next.\n\n719\n00:42:36,110 --> 00:42:37,445\nAnd then, we can click Finish.\n\n720\n00:42:40,348 --> 00:42:47,233\n[SOUND] I'm just checking\nto see what my thing is,\n\n721\n00:42:47,233 --> 00:42:50,900\nthat's just a warning telling me I'm\ngonna have to make sure I go link this.\n\n722\n00:42:50,900 --> 00:42:52,700\nWhich we'll do in a minute.\n\n723\n00:42:52,700 --> 00:42:55,434\nAnd so, now, I've got my,\nwhere'd we go here?\n\n724\n00:42:58,161 --> 00:42:59,474\nDid not allow me to create that?\n\n725\n00:43:05,697 --> 00:43:10,120\nDoes not seem to have liked one of my\nsettings in there, let's try that again.\n\n726\n00:43:10,120 --> 00:43:14,717\nThat's what they're called,\na Contoso-uplink.\n\n727\n00:43:14,717 --> 00:43:22,050\nI'm gonna do my uplink profile and use my\naddress hash as my load balancing method.\n\n728\n00:43:24,660 --> 00:43:31,086\nAnd it shows all of my options,\nenable Hyper-V,\n\n729\n00:43:31,086 --> 00:43:35,838\nnetwork virtualization, finish.\n\n730\n00:43:40,703 --> 00:43:45,603\nMake sure network sites have at\nleast one host group in common.\n\n731\n00:43:45,603 --> 00:43:48,285\nAnd they do have a host group in common.\n\n732\n00:43:48,285 --> 00:43:50,720\nWell, I'll work on that in a minute again.\n\n733\n00:43:50,720 --> 00:43:52,020\nThat's really just a template.\n\n734\n00:43:52,020 --> 00:43:56,960\nSo, when we go to create my\nlogical switches, those templates,\n\n735\n00:43:56,960 --> 00:44:01,750\nI can then include my port profiles\nwhich is just another template.\n\n736\n00:44:02,820 --> 00:44:04,000\nSo, let's go ahead and create.\n\n737\n00:44:04,000 --> 00:44:06,700\nWe'll just use one of theirs since it's\nnot liking what I was choosing there.\n\n738\n00:44:06,700 --> 00:44:07,420\nSomething to do with,\n\n739\n00:44:07,420 --> 00:44:10,860\nI haven't rebooted the hosts to add\nthem to the different host groups.\n\n740\n00:44:10,860 --> 00:44:14,550\nRemember when I added them to that host\ngroup, it warned me that I was gonna need\n\n741\n00:44:14,550 --> 00:44:19,655\na reboot in there in order for it to move\nall the resources to that new host group.\n\n742\n00:44:19,655 --> 00:44:22,810\nWhich is probably why it's\ngiving me an issue there.\n\n743\n00:44:22,810 --> 00:44:25,900\nSo, we'll just go ahead and\nstart with our logical switch, and\n\n744\n00:44:25,900 --> 00:44:27,970\nwe'll use one of those\npreexisting templates.\n\n745\n00:44:27,970 --> 00:44:29,256\nThat's not gonna be a problem.\n\n746\n00:44:32,506 --> 00:44:35,840\nSo, in my logical switch options here,\n\n747\n00:44:35,840 --> 00:44:40,580\nwe'll start by creating\na new logical switch.\n\n748\n00:44:40,580 --> 00:44:44,160\nSo we're going to go down to fabric,\nand then, logical switches.\n\n749\n00:44:44,160 --> 00:44:47,277\nAnd I'll right-click and\nchoose create logical switch.\n\n750\n00:44:50,412 --> 00:44:52,670\nAnd again,\nas you can see from the text here,\n\n751\n00:44:52,670 --> 00:44:55,822\na logical switch contains\nthe configuration information that\n\n752\n00:44:55,822 --> 00:44:59,700\ncontrols the behavior of virtual switches\nacross hosting your data center.\n\n753\n00:44:59,700 --> 00:45:03,120\nSo, this is all about consistency.\n\n754\n00:45:03,120 --> 00:45:07,430\nMaking sure I'm applying the same settings\nacross all the different virtual switches\n\n755\n00:45:07,430 --> 00:45:08,530\nthat I'm going to create.\n\n756\n00:45:10,620 --> 00:45:13,273\nSo, we can check here,\nbefore you create your logical switch,\n\n757\n00:45:13,273 --> 00:45:16,383\nI've got to make sure that my logical\nnetworks are set up, which they are.\n\n758\n00:45:16,383 --> 00:45:19,660\nWe're not doing any extensions.\n\n759\n00:45:19,660 --> 00:45:21,390\nI'll show you the extensions\nhere in just a minute.\n\n760\n00:45:21,390 --> 00:45:24,170\nI don't have any third party\nextensions installed on here.\n\n761\n00:45:24,170 --> 00:45:26,580\nThere's a couple of\npre-built that we can use.\n\n762\n00:45:26,580 --> 00:45:29,080\nBut if you are bringing in an extension,\n\n763\n00:45:29,080 --> 00:45:31,390\nyou'd wanna make sure that\nthat was installed already.\n\n764\n00:45:33,560 --> 00:45:36,720\nIf we weren't using a forwarding\nextension, we'd have to use one of our\n\n765\n00:45:36,720 --> 00:45:38,890\nuplinks which is what I was\ntrying to create a minute ago.\n\n766\n00:45:40,410 --> 00:45:41,180\nWhat else?\n\n767\n00:45:41,180 --> 00:45:43,530\nThat should be good.\nWe'll go ahead and click Next and\n\n768\n00:45:43,530 --> 00:45:45,165\nI'll give this guy a name.\n\n769\n00:45:45,165 --> 00:45:50,430\nI'm gonna call it Contoso-logical switch.\n\n770\n00:45:50,430 --> 00:45:54,790\nI have the option to\nenable single route I/O\n\n771\n00:45:54,790 --> 00:45:57,460\nvirtualization if I wanted to right here.\n\n772\n00:45:57,460 --> 00:46:00,029\nI'll go ahead and leave that one as is.\n\n773\n00:46:01,750 --> 00:46:04,560\nWhen I click Next,\nthis is gonna bring me to my extension.\n\n774\n00:46:04,560 --> 00:46:08,360\nAnd this is another topic\nthat's called out on your\n\n775\n00:46:10,280 --> 00:46:12,520\nobjectives for this particular exam.\n\n776\n00:46:12,520 --> 00:46:18,045\nYou've got two that come in by default,\nand I've got my Microsoft NDIS capture,\n\n777\n00:46:18,045 --> 00:46:21,195\nand I also have a Microsoft Windows\nfiltering platform.\n\n778\n00:46:22,755 --> 00:46:24,845\nWhen we look at our\nvirtual switch extension,\n\n779\n00:46:24,845 --> 00:46:28,225\nthere's really three classes of\nextensions that we can deal with.\n\n780\n00:46:28,225 --> 00:46:32,650\nWe've got capture type extensions,\nwe got filtering extensions and\n\n781\n00:46:32,650 --> 00:46:34,360\nI've got forwarding extensions.\n\n782\n00:46:34,360 --> 00:46:39,130\nSo, they're gonna add functionality to the\nvirtual switch, and that's pretty cool.\n\n783\n00:46:39,130 --> 00:46:42,020\nMicrosoft has actually opened up and\nallow us to write.\n\n784\n00:46:42,020 --> 00:46:45,470\nWe can obtain third party extensions\nfrom my virtual switches.\n\n785\n00:46:45,470 --> 00:46:47,680\nThere's a few of them out there.\n\n786\n00:46:47,680 --> 00:46:51,210\nWe can also write our own\nvirtual switch extension.\n\n787\n00:46:51,210 --> 00:46:53,200\nLike if I wanna write my\nown forwarding extension,\n\n788\n00:46:53,200 --> 00:46:56,130\nI wanna control exactly how\nthose packets are forwarded.\n\n789\n00:46:56,130 --> 00:47:00,230\nWe could do things like firewall\ntype processes through here.\n\n790\n00:47:00,230 --> 00:47:01,740\nWe can do packet inspection.\n\n791\n00:47:01,740 --> 00:47:04,080\nWe could do intrusion detection.\n\n792\n00:47:04,080 --> 00:47:09,790\nBasic router incapabilities,\njust monitoring, doing a capture type,\n\n793\n00:47:09,790 --> 00:47:15,130\nor just a filtering type to drop packets,\nagain, like a firewall.\n\n794\n00:47:15,130 --> 00:47:16,625\nSo, you can get pretty creative in here,\n\n795\n00:47:16,625 --> 00:47:18,394\nyou're gonna either have\nto find one out there.\n\n796\n00:47:18,394 --> 00:47:22,424\nThere's several you can Google,\nI mean Bing, sorry Microsoft, and\n\n797\n00:47:22,424 --> 00:47:25,580\nwe can also write our own,\nif you wanna dive into that.\n\n798\n00:47:26,850 --> 00:47:28,630\nFor this one,\nI'm just gonna go ahead and use that,\n\n799\n00:47:28,630 --> 00:47:31,290\nleave it on that Windows\nfiltering platform there.\n\n800\n00:47:31,290 --> 00:47:32,750\nAnd I'll go ahead and click Next.\n\n801\n00:47:34,430 --> 00:47:39,939\nFor my uplink port profile,\nI didn't create that one.\n\n802\n00:47:39,939 --> 00:47:42,237\nIt did not like that one that I created.\n\n803\n00:47:42,237 --> 00:47:45,644\nSo, I'm gonna leave that\non the uplink mode.\n\n804\n00:47:45,644 --> 00:47:50,322\nI'm gonna choose What's\na good way to make this work?\n\n805\n00:47:50,322 --> 00:47:54,617\nI'll leave this on no uplink team and\nwhat I would normally do,\n\n806\n00:47:54,617 --> 00:47:58,997\nif it had successfully created\nmy uplink port profile earlier,\n\n807\n00:47:58,997 --> 00:48:02,720\nthen I could come over here and\nI could click Add.\n\n808\n00:48:02,720 --> 00:48:05,750\nI hit my drop down list, and\nI find that poor profile.\n\n809\n00:48:07,550 --> 00:48:09,241\nAgain, it's like a template.\n\n810\n00:48:09,241 --> 00:48:11,510\nAnd so we're kinda combining\ntemplates here, right?\n\n811\n00:48:11,510 --> 00:48:14,080\nI've got my templates from\nmy different poor profiles.\n\n812\n00:48:14,080 --> 00:48:15,260\nI'm now creating a template for\n\n813\n00:48:15,260 --> 00:48:19,940\na logical switch I might have multiple\nport profile templates already created.\n\n814\n00:48:19,940 --> 00:48:22,783\nI can come in here and pick those guys.\n\n815\n00:48:23,950 --> 00:48:25,830\nI don't know if it's gonna\nlike not letting me use that.\n\n816\n00:48:25,830 --> 00:48:28,784\nI will see if I can work\non that on our break.\n\n817\n00:48:28,784 --> 00:48:32,550\nAnd then for\nmy port classifications, same thing.\n\n818\n00:48:32,550 --> 00:48:34,640\nIf I did not create any ahead of time but\n\n819\n00:48:34,640 --> 00:48:37,970\nI've got some port\nclassifications that we can add.\n\n820\n00:48:37,970 --> 00:48:40,680\nI can create port classifications\nover there on the left.\n\n821\n00:48:40,680 --> 00:48:45,820\nWe can create them as a template and then\nI can include them in my logical switch.\n\n822\n00:48:45,820 --> 00:48:49,260\nSo as we're seeing this logical\nswitch truly is a container for\n\n823\n00:48:49,260 --> 00:48:53,900\nall of the settings that I want to use\nwhen I create my new virtual switches\n\n824\n00:48:53,900 --> 00:48:56,230\non my Hyper-V hosts.\n\n825\n00:48:56,230 --> 00:48:57,900\nAnd I know I've said it\na couple of times but\n\n826\n00:48:57,900 --> 00:49:03,220\nthe whole key here, the key concept\nwe wanna get here is consistency.\n\n827\n00:49:03,220 --> 00:49:06,950\nBeing able to quickly create new\nvirtual switches, not having to go and\n\n828\n00:49:06,950 --> 00:49:09,450\ndive in and\nfigure out what settings I wanna use.\n\n829\n00:49:09,450 --> 00:49:14,450\nI can just grab this logical switch\ntemplate and I can roll one out.\n\n830\n00:49:14,450 --> 00:49:16,110\nSo I just click finish on that.\n\n831\n00:49:17,400 --> 00:49:20,130\nAnd there we've created\nmy new logical switch.\n\n832\n00:49:21,460 --> 00:49:23,100\nSo now I've got my Contoso\nlogical switch and\n\n833\n00:49:23,100 --> 00:49:26,400\nI think that's probably\na good place to stop for now.\n\n834\n00:49:26,400 --> 00:49:27,580\nWhat we're gonna do is,\n\n835\n00:49:27,580 --> 00:49:30,460\nin the next segment,\nis I'm gonna come back and show you how.\n\n836\n00:49:30,460 --> 00:49:32,990\nThat we can take advantage of that\ntemplate that we just created.\n\n837\n00:49:32,990 --> 00:49:35,190\nSo we'll go out to one\nof my Hyper-V hosts,\n\n838\n00:49:35,190 --> 00:49:38,900\nwe'll whip out a new virtual switch, and\nwe'll base it off that logical switch.\n\n839\n00:49:38,900 --> 00:49:40,741\nSo stay tuned we'll be right back.\n\n840\n00:49:40,741 --> 00:49:47,366\n[MUSIC]\n\n841\n00:49:47,366 --> 00:49:49,480\nAll right, welcome back ladies and\ngentlemen.\n\n842\n00:49:49,480 --> 00:49:52,470\nWe're gonna continue on with our\ndiscussion of our networking\n\n843\n00:49:52,470 --> 00:49:53,900\nvirtualization.\n\n844\n00:49:53,900 --> 00:49:55,820\nAnd next thing I want to look at,\nwell, first thing I want to do,\n\n845\n00:49:55,820 --> 00:49:58,950\nis I want to go back and\nshow you guys that, that port profile\n\n846\n00:49:58,950 --> 00:50:02,180\nI got a little aggressive with my\nselection of my host groups, there.\n\n847\n00:50:02,180 --> 00:50:03,990\nAnd that's why it was failing on me.\n\n848\n00:50:03,990 --> 00:50:06,290\nLet's go back in and take a look at that.\n\n849\n00:50:06,290 --> 00:50:10,262\nI went ahead and created one for\nthe Contoso GNV uplink, and\n\n850\n00:50:10,262 --> 00:50:13,533\nContoso TPA uplink from\nmy two different sites.\n\n851\n00:50:13,533 --> 00:50:16,770\nCuz I forgot we had separated those\nhosts out into different sites.\n\n852\n00:50:16,770 --> 00:50:20,100\nAnd if you think about it, they're gonna\nneed different uplink profiles for\n\n853\n00:50:20,100 --> 00:50:21,370\nthe different locations, right.\n\n854\n00:50:22,550 --> 00:50:24,160\nSo, I went ahead and\ncreated two separate ones and\n\n855\n00:50:24,160 --> 00:50:26,930\nall I did was name it Contoso GNV Uplink.\n\n856\n00:50:26,930 --> 00:50:28,720\nTold it same thing,\nload balancing algorithm,\n\n857\n00:50:28,720 --> 00:50:31,010\nwhich is gonna be an address hash.\n\n858\n00:50:31,010 --> 00:50:32,290\nBut, then on the network configuration,\n\n859\n00:50:32,290 --> 00:50:37,230\nthis is where I got a little aggressive,\nI still like the multiple sites.\n\n860\n00:50:37,230 --> 00:50:38,800\nSo now I've got one for GNV.\n\n861\n00:50:38,800 --> 00:50:40,790\nI did both the frontend and the backend.\n\n862\n00:50:40,790 --> 00:50:44,510\nIn the real world, you probably wanna\nmake different ones for your frontend and\n\n863\n00:50:44,510 --> 00:50:46,380\ndifferent ones for your backend as well.\n\n864\n00:50:46,380 --> 00:50:48,660\nAnd here, just for this lab, I'm gonna\ngo ahead and leave it like that so\n\n865\n00:50:48,660 --> 00:50:50,170\nwe don't have to create too many.\n\n866\n00:50:50,170 --> 00:50:52,560\nAnd I also enabled\nthe Network Virtualization.\n\n867\n00:50:54,130 --> 00:50:56,620\nAnd then I went ahead and\ncreated a second one.\n\n868\n00:50:56,620 --> 00:50:57,750\nExact same thing.\n\n869\n00:50:57,750 --> 00:51:00,020\nJust chose the two different Tampa sites.\n\n870\n00:51:00,020 --> 00:51:03,200\nThe Tampa back end, and\nthe Tampa front end.\n\n871\n00:51:03,200 --> 00:51:05,460\nSo now I've got my port profiles.\n\n872\n00:51:05,460 --> 00:51:06,790\nI'm going to get another one here.\n\n873\n00:51:06,790 --> 00:51:08,700\nI'm going to right click on port profiles.\n\n874\n00:51:08,700 --> 00:51:11,470\nAnd create the Hyper-V port profile.\n\n875\n00:51:11,470 --> 00:51:14,840\nAnd this one is gonna be for\nthe network adapters, all right?\n\n876\n00:51:14,840 --> 00:51:20,810\nSo I'm gonna call this one something\nlike Contoso, if I could spell.\n\n877\n00:51:22,060 --> 00:51:25,470\nContoso- maybe something like VNIC.\n\n878\n00:51:25,470 --> 00:51:27,260\nBecause when I create these profiles,\n\n879\n00:51:27,260 --> 00:51:28,940\nyou'll notice I've got two\ndifferent options down here.\n\n880\n00:51:28,940 --> 00:51:32,550\nI've got the option to create my\nvirtual network adaptor port profile.\n\n881\n00:51:32,550 --> 00:51:34,820\nAnd then the one I did\nin the previous segment,\n\n882\n00:51:34,820 --> 00:51:37,110\nwhich was the uplink port profile.\n\n883\n00:51:37,110 --> 00:51:39,460\nThis one I'm gonna leave it on\nvirtual network adaptor profile, and\n\n884\n00:51:39,460 --> 00:51:41,570\nyou'll see you have some\ndifferent settings through here.\n\n885\n00:51:41,570 --> 00:51:44,570\nFirst thing we're gonna come\nto is these offload settings.\n\n886\n00:51:44,570 --> 00:51:47,280\nWhen they talk about, and this is\nsomething they call out on the exam,\n\n887\n00:51:47,280 --> 00:51:51,290\nright, network optimization,\nthese are some of the choices that I have.\n\n888\n00:51:51,290 --> 00:51:53,410\nGrab my virtual machine queuing,\n\n889\n00:51:53,410 --> 00:51:59,190\nwhere we can again allow that\nvirtual machine direct access, or\n\n890\n00:51:59,190 --> 00:52:03,230\ndata that's coming in across that network\nto talk directly to that virtual machine.\n\n891\n00:52:04,290 --> 00:52:07,450\nGot my IPsec task offloading\nthat we could choose or\n\n892\n00:52:07,450 --> 00:52:10,840\nwe could do that single\nroot I/O virtualization.\n\n893\n00:52:10,840 --> 00:52:13,370\nI'm not gonna choose any,\njust wanted to show you guys those.\n\n894\n00:52:13,370 --> 00:52:14,160\nWe'll click Next.\n\n895\n00:52:15,830 --> 00:52:18,960\nAnd then here, same settings and\nwe took a look at these earlier.\n\n896\n00:52:18,960 --> 00:52:24,150\nI'm gonna go ahead and enable, not on\nthe virtual NIC I don't think I will.\n\n897\n00:52:24,150 --> 00:52:26,080\nBut we talked about those options already.\n\n898\n00:52:26,080 --> 00:52:27,490\nWe'll click Next.\n\n899\n00:52:27,490 --> 00:52:30,170\nThen I've got my bandwidth settings,\nso I can put a cap\n\n900\n00:52:30,170 --> 00:52:33,110\non how much bandwidth those networks\nadaptors are allowed to use.\n\n901\n00:52:33,110 --> 00:52:36,200\nSo maybe I want to limit that\nguy to 100 MB per second.\n\n902\n00:52:37,780 --> 00:52:45,093\nWe'll click next and then finish, and\nnow I should have another port profiles,\n\n903\n00:52:45,093 --> 00:52:50,570\nand I get my Contoso Uplink for\nboth my GNV and my Tampa Offices,\n\n904\n00:52:50,570 --> 00:52:54,760\nas well as a profile for my virtual\nnetwork adapters that we wanna use.\n\n905\n00:52:56,480 --> 00:53:00,930\nFor classifications,\nI don't think I created one.\n\n906\n00:53:00,930 --> 00:53:05,400\nI did create just a Contoso standard\nfort there, just to classify those guys,\n\n907\n00:53:05,400 --> 00:53:06,340\nnothing really to that.\n\n908\n00:53:06,340 --> 00:53:07,475\nIn fact, when I created it,\n\n909\n00:53:07,475 --> 00:53:11,442\nthat's all you're doing is giving\nit a name, and then you create it.\n\n910\n00:53:11,442 --> 00:53:16,740\nSo now that I've got my\nport profile set up,\n\n911\n00:53:16,740 --> 00:53:21,320\nnow I can go back into\nmy logical switches.\n\n912\n00:53:21,320 --> 00:53:24,850\nAnd I can pull up the properties,\nthat one we already created, and\n\n913\n00:53:24,850 --> 00:53:27,650\nI'm going to change that now\nthat I've fixed my uplink ports.\n\n914\n00:53:27,650 --> 00:53:29,970\nI'm gonna ay no uplink team here, right.\n\n915\n00:53:29,970 --> 00:53:32,950\nAnd then I'm gonna click Add and\n\n916\n00:53:32,950 --> 00:53:37,030\nI should be able to pick between\nthose uplink ports that I've created.\n\n917\n00:53:37,030 --> 00:53:39,760\nSo there's my GNV Uplink\nas well as my Tampa Uplink.\n\n918\n00:53:39,760 --> 00:53:43,005\nFor this one I'll go ahead and\nuse GNV Uplink, click OK.\n\n919\n00:53:45,560 --> 00:53:50,670\nAnd for this particular switch that's\nall I'm gonna do and we'll click okay.\n\n920\n00:53:53,020 --> 00:53:54,783\nAnd then I'm gonna make another one.\n\n921\n00:53:57,491 --> 00:54:00,630\nAnd my naming convention wasn't too hot,\nnow that I've gotta create two.\n\n922\n00:54:00,630 --> 00:54:06,738\nSo we'll do, say, something like Contoso,\n\n923\n00:54:06,738 --> 00:54:10,033\nlogical switch for GNV.\n\n924\n00:54:12,616 --> 00:54:16,810\nThe same options we saw earlier I'm not\ngoing to add any additional extensions.\n\n925\n00:54:16,810 --> 00:54:19,024\nFor this one I will add that,\n\n926\n00:54:19,024 --> 00:54:23,283\nI forgot which one I used on\nthe other one, GNV Uplink.\n\n927\n00:54:27,408 --> 00:54:29,870\nAnd then my port classification.\n\n928\n00:54:30,980 --> 00:54:33,325\nI can browse through and\nfind my Contoso standard port.\n\n929\n00:54:37,241 --> 00:54:40,650\nYou have the option to include\na virtual network adapter port profile.\n\n930\n00:54:41,890 --> 00:54:50,390\nIn this case I'm going to leave that off,\ncuz this is my uplink port.\n\n931\n00:54:50,390 --> 00:54:52,880\nI'll click Next and Finish.\n\n932\n00:54:54,210 --> 00:54:57,140\nAnd then, just to make things tidy,\nlet's go back and rename this guy.\n\n933\n00:54:57,140 --> 00:55:01,090\nAnd I think I chose Gainesville for both\nof those, so let me fix that real quick.\n\n934\n00:55:02,740 --> 00:55:06,866\nGo back in My Properties, and\nlet's change this into my Tampa Office.\n\n935\n00:55:10,492 --> 00:55:16,312\nAnd then for that uplink, I'm gonna remove\n\n936\n00:55:16,312 --> 00:55:21,510\nthat one and add the Tampa uplink port.\n\n937\n00:55:21,510 --> 00:55:23,325\nVirtual ports, we're leaving that alone.\n\n938\n00:55:23,325 --> 00:55:25,866\nWe'll click OK.\n\n939\n00:55:25,866 --> 00:55:28,660\nSo now I've got those guys tidied up.\n\n940\n00:55:28,660 --> 00:55:32,520\nAnd so we've got our three profiles for\nthe two different uplink ports for\n\n941\n00:55:32,520 --> 00:55:33,364\nthe different sites.\n\n942\n00:55:33,364 --> 00:55:37,148\nAnd then I've got a Contoso VNIC\nprofile that I can use to create new\n\n943\n00:55:37,148 --> 00:55:40,067\nvirtual network adaptors\nin my virtual machines.\n\n944\n00:55:40,067 --> 00:55:45,011\nAll right, so now that we got that all\nset up, let's see how we can create and\n\n945\n00:55:45,011 --> 00:55:49,495\nuse these templates to actually\ncreate some new virtual switches and\n\n946\n00:55:49,495 --> 00:55:51,986\nnetwork adaptors My Hyper-V hosts.\n\n947\n00:55:51,986 --> 00:55:58,960\nSo we're gonna start by creating,\nlet's see we've already done all that.\n\n948\n00:55:58,960 --> 00:56:00,854\nLet's go out there and use this guy.\n\n949\n00:56:07,100 --> 00:56:07,938\nAll right.\n\n950\n00:56:07,938 --> 00:56:13,740\nSo for that,\nI'm gonna run back up here to my host.\n\n951\n00:56:13,740 --> 00:56:17,240\nAnd I'll start with one of\nmy guys in Gainesville here.\n\n952\n00:56:17,240 --> 00:56:19,220\nSo I got my Gainesville host group, and\n\n953\n00:56:19,220 --> 00:56:21,790\nI've got a couple of\nHyper-V servers in there.\n\n954\n00:56:21,790 --> 00:56:25,940\nAnd for this,\nI'm going to pull up the properties.\n\n955\n00:56:27,600 --> 00:56:29,950\nWe could do this through\nthe console itself.\n\n956\n00:56:29,950 --> 00:56:34,080\nI could go over to that particular\nIV server and go on the console, but\n\n957\n00:56:34,080 --> 00:56:37,860\nof course we're using VMF, so\nwe can do this from a central location.\n\n958\n00:56:37,860 --> 00:56:41,570\nAll right, and\nthen down here I have my virtual switches.\n\n959\n00:56:43,500 --> 00:56:44,530\nSo normally I go and\n\n960\n00:56:44,530 --> 00:56:47,780\ncreate a new virtual switch for\nthe different physical network adapters.\n\n961\n00:56:47,780 --> 00:56:51,630\nWe've talked about virtual switches,\nI believe, in a previous episode.\n\n962\n00:56:51,630 --> 00:56:52,630\nLet's review.\n\n963\n00:56:52,630 --> 00:56:57,920\nWhen you go and create a new virtual\nswitch, I'm gonna do a new logical switch.\n\n964\n00:56:57,920 --> 00:57:00,770\nAnd that's gonna base it off of\nthose logical switches that I\n\n965\n00:57:00,770 --> 00:57:02,150\ncreated a minute ago.\n\n966\n00:57:02,150 --> 00:57:03,630\nAgain, terminology, right?\n\n967\n00:57:03,630 --> 00:57:05,220\nIt gets a little confusing.\n\n968\n00:57:05,220 --> 00:57:08,900\nWe created a logical switch\nearlier that was the template,\n\n969\n00:57:08,900 --> 00:57:11,520\nthe container that\ncontains all my settings.\n\n970\n00:57:11,520 --> 00:57:14,350\nAnd then when I chose that\nnew virtual switch option,\n\n971\n00:57:14,350 --> 00:57:17,490\nI'm basing it off of one\nof my logical switches.\n\n972\n00:57:17,490 --> 00:57:19,240\nSo you can see it pulled\nthat up immediately.\n\n973\n00:57:19,240 --> 00:57:20,310\nIt pulled up that GNV.\n\n974\n00:57:20,310 --> 00:57:24,190\nI can switch that to my Tampa one if\nI wanted to depending on which one.\n\n975\n00:57:24,190 --> 00:57:26,530\nLet's start with GNV, so\nI keep it straight in my head.\n\n976\n00:57:27,580 --> 00:57:32,160\nAnd then for\nmy adapter settings, lets see.\n\n977\n00:57:32,160 --> 00:57:35,200\nThis is going to be on my,\nlet's put one on my front end, and\n\n978\n00:57:35,200 --> 00:57:39,700\nwe're gonna use the first network adapter\nin those hosts to connect to the frontend,\n\n979\n00:57:39,700 --> 00:57:42,700\nthe second network adapters I wanna\nuse to connect to my backend.\n\n980\n00:57:42,700 --> 00:57:44,940\nSo, we'll start with the frontend.\n\n981\n00:57:44,940 --> 00:57:48,330\nAnd then my uplink profile\nis gonna be that GNV uplink.\n\n982\n00:57:50,790 --> 00:57:52,450\nAnd then let's add another one.\n\n983\n00:57:52,450 --> 00:57:56,440\nLet's do another new virtual switch,\nnew logical switch.\n\n984\n00:57:57,450 --> 00:58:00,170\nAnd this one I'm gonna base off of\nthe logical switch that we created for\n\n985\n00:58:00,170 --> 00:58:01,720\nthe Tampa office.\n\n986\n00:58:01,720 --> 00:58:03,350\nAgain I'm going to use\nit on my front end so\n\n987\n00:58:03,350 --> 00:58:08,760\nthat ethernet one, and I've got my\nTPA uplink port profile selected.\n\n988\n00:58:08,760 --> 00:58:13,220\nSo we can create\nthe different switches and\n\n989\n00:58:13,220 --> 00:58:17,930\nthe next thing we're going to do is\ncreate the new virtual network adapter.\n\n990\n00:58:17,930 --> 00:58:20,640\nOkay, so\nclick new virtual network adapter,\n\n991\n00:58:24,630 --> 00:58:29,450\nit doesn't like the fact that\nI have not done that yet.\n\n992\n00:58:29,450 --> 00:58:32,260\nLet's create a, and the other option and\none thing I wanna show you before I move\n\n993\n00:58:32,260 --> 00:58:37,530\non, they've got this new standard switch,\nand that kinda brings me back to the.\n\n994\n00:58:37,530 --> 00:58:40,940\nThis is just like going into my\nHyper-V console and creating a switch.\n\n995\n00:58:40,940 --> 00:58:43,620\nThere's no template, so\nyou see the difference.\n\n996\n00:58:43,620 --> 00:58:46,840\nWhen I created that new virtual switch\nbased off a new logical switch,\n\n997\n00:58:46,840 --> 00:58:49,530\nI was able to pull the properties\nfrom the template.\n\n998\n00:58:49,530 --> 00:58:51,130\nSo again, consistent settings.\n\n999\n00:58:51,130 --> 00:58:54,670\nSomebody else might have created that, all\nI have to do is come in here and pick it.\n\n1000\n00:58:54,670 --> 00:58:58,050\nAnd that might be my Hyper-V admin\ndown there in the Tampa office,\n\n1001\n00:58:58,050 --> 00:59:01,070\nwho maybe doesn't have a full\nunderstanding of the overall picture of my\n\n1002\n00:59:01,070 --> 00:59:02,480\nnetwork infrastructure.\n\n1003\n00:59:02,480 --> 00:59:05,030\nSo he can just grab that\nlogical switch template, and\n\n1004\n00:59:05,030 --> 00:59:08,730\nhe can create those switches\non the Hyper-V server.\n\n1005\n00:59:09,900 --> 00:59:14,900\nIf I chose the new standard switch, this\nis just like going into Hyper-V, right,\n\n1006\n00:59:14,900 --> 00:59:17,340\nand going into your switch manager.\n\n1007\n00:59:18,480 --> 00:59:21,700\nIn fact here, let's pull up that Well,\nI'll show you in just a second.\n\n1008\n00:59:21,700 --> 00:59:22,700\nI could fill in the properties.\n\n1009\n00:59:22,700 --> 00:59:23,880\nAnd this is what I was saying earlier.\n\n1010\n00:59:23,880 --> 00:59:25,630\nRemember when we were talked\nabout these switches?\n\n1011\n00:59:25,630 --> 00:59:30,160\nYou've got your external,\nyour internal, and your private right?\n\n1012\n00:59:30,160 --> 00:59:34,770\nExternal is gonna allow access\nto the physical network adapter.\n\n1013\n00:59:34,770 --> 00:59:39,480\nWhereas my internal is gonna give me\ncommunications between the Hyper-V host\n\n1014\n00:59:39,480 --> 00:59:43,030\nin the virtual networks, and\nthen private would be for the VMs only.\n\n1015\n00:59:43,030 --> 00:59:45,970\nThey couldn't even\ncommunicate with the host.\n\n1016\n00:59:45,970 --> 00:59:47,510\nI'm gonna remove that one.\n\n1017\n00:59:47,510 --> 00:59:50,694\nWe're not gonna need that one for\nhere, and we'll go ahead and click OK.\n\n1018\n00:59:54,839 --> 00:59:55,376\n[SOUND] All right.\n\n1019\n00:59:59,196 --> 01:00:02,190\nOh, I did use that for\nthe same one, didn't I?\n\n1020\n01:00:03,400 --> 01:00:04,470\nAnd then end up using that.\n\n1021\n01:00:04,470 --> 01:00:05,922\nLet's just get rid of that one for now,\n\n1022\n01:00:05,922 --> 01:00:07,814\nwe'll just stick with\nthe single logical switch,\n\n1023\n01:00:07,814 --> 01:00:10,859\nso I can show you what it looks like once\nwe've created this guy, we'll click OK.\n\n1024\n01:00:13,007 --> 01:00:15,592\nAll right, and\nit's gonna warn me anytime you mess,\n\n1025\n01:00:15,592 --> 01:00:19,617\nbecause remember we've got a physical\nnetwork adapter in that Hyper-V host, and\n\n1026\n01:00:19,617 --> 01:00:23,700\nI'm getting ready to make a virtual switch\nbased on that physical network adapter,\n\n1027\n01:00:23,700 --> 01:00:27,230\nwhich means that host machine is\ngonna lose connectivity temporarily.\n\n1028\n01:00:28,600 --> 01:00:30,760\nSo if it's the middle of a production day,\n\n1029\n01:00:30,760 --> 01:00:35,390\nyou might wanna wait until\nthe server's not being used heavily.\n\n1030\n01:00:35,390 --> 01:00:36,320\nWe'll click ok.\n\n1031\n01:00:36,320 --> 01:00:37,150\nIt's very brief.\n\n1032\n01:00:37,150 --> 01:00:39,260\nIt doesn't take it long.\n\n1033\n01:00:39,260 --> 01:00:41,670\nBut it will lose connectivity\nin just a minute.\n\n1034\n01:00:41,670 --> 01:00:44,480\nOr for just a second or two.\n\n1035\n01:00:46,070 --> 01:00:47,270\nSo now that I've got that created.\n\n1036\n01:00:47,270 --> 01:00:48,930\nAnd let's remember which\none I did that on.\n\n1037\n01:00:48,930 --> 01:00:50,300\nSCCM01.\n\n1038\n01:00:50,300 --> 01:00:54,230\nSo if I switch over to SCCM01 and\n\n1039\n01:00:57,070 --> 01:01:01,033\nI open up my Hyper-V console.\n\n1040\n01:01:01,033 --> 01:01:01,791\nIf I can get to it.\n\n1041\n01:01:11,594 --> 01:01:16,379\nNot liking my resolution here.\n\n1042\n01:01:16,379 --> 01:01:18,308\nLet me see if I can get\ndown to that real quick.\n\n1043\n01:01:26,551 --> 01:01:29,791\nAnd we'll open up my Hyper-V\nconsole over here on this SCCM01.\n\n1044\n01:01:34,737 --> 01:01:38,702\nAnd if I go into my virtual\nswitch manager, and\n\n1045\n01:01:38,702 --> 01:01:41,765\nI go to create a new virtual switch.\n\n1046\n01:01:41,765 --> 01:01:46,945\nNotice I have this Contoso\nswitch already there so\n\n1047\n01:01:46,945 --> 01:01:49,965\nI can choose what kind of\nswitch I wanna make off that.\n\n1048\n01:01:49,965 --> 01:01:50,665\nLet's see.\n\n1049\n01:01:50,665 --> 01:01:52,775\nActually that's already set to a private.\n\n1050\n01:01:52,775 --> 01:01:54,925\nSo that's the one that's\nbased off of that template.\n\n1051\n01:01:54,925 --> 01:01:58,400\nNow I can come in here and\nI can only create one external, right?\n\n1052\n01:01:58,400 --> 01:02:01,790\nSo I've already got that one that was\ncreated, so I can't create another one.\n\n1053\n01:02:03,300 --> 01:02:05,810\nLet's see if I can show you,\nif I can create an internal real quick.\n\n1054\n01:02:09,020 --> 01:02:11,330\nYeah, it's not gonna let me pull that, so.\n\n1055\n01:02:11,330 --> 01:02:14,440\nUnfortunately they've only got, I think\na single network adapter in this one so\n\n1056\n01:02:14,440 --> 01:02:20,840\nI can't create that one that was already\ncreated when I created that template.\n\n1057\n01:02:20,840 --> 01:02:24,250\nAgain, that's the big advantage of these\ntemplates, if you come in here and\n\n1058\n01:02:24,250 --> 01:02:27,120\nlook at these guys,\nthey didn't have to create it.\n\n1059\n01:02:27,120 --> 01:02:30,840\nSo my Hyper-V manager comes in here and\nlooks at that virtual switch, and\n\n1060\n01:02:30,840 --> 01:02:31,800\nit's already there.\n\n1061\n01:02:31,800 --> 01:02:34,590\nIt's already got all of the settings\nthat we want it to use.\n\n1062\n01:02:34,590 --> 01:02:37,250\nAll of the extensions\nthat we want it to use.\n\n1063\n01:02:37,250 --> 01:02:39,750\nWe didn't add any extensions.\n\n1064\n01:02:39,750 --> 01:02:43,560\nI just left that default windows\nfiltering platform extension on there.\n\n1065\n01:02:44,770 --> 01:02:48,080\nSo, like I've said a couple times,\nit's all about consistency.\n\n1066\n01:02:48,080 --> 01:02:50,050\nBeing able to reuse this information,\n\n1067\n01:02:50,050 --> 01:02:53,065\nnot having to go through all\nthe settings every time.\n\n1068\n01:02:53,065 --> 01:02:57,065\nThey can whip out a new switch and\nthey can use that template.\n\n1069\n01:02:59,125 --> 01:03:02,095\nSo that covers a good\nmajority of our objectives.\n\n1070\n01:03:02,095 --> 01:03:04,245\nThere are a couple other things\nthat I wanna talk about.\n\n1071\n01:03:04,245 --> 01:03:09,095\nWe mentioned earlier that when we\nset up those logical networks and\n\n1072\n01:03:09,095 --> 01:03:13,720\nlet me flip back to SCVMM and\nwhen we set up those logical networks,\n\n1073\n01:03:13,720 --> 01:03:16,080\nwe had a couple of options there.\n\n1074\n01:03:16,080 --> 01:03:17,990\nThe one I created.\n\n1075\n01:03:17,990 --> 01:03:22,390\nI used IP address ranges or I used this\nfirst option, one connected network.\n\n1076\n01:03:22,390 --> 01:03:24,191\nAnd when I went to the next screen.\n\n1077\n01:03:29,764 --> 01:03:32,520\nAnd I added my network sites.\n\n1078\n01:03:32,520 --> 01:03:34,710\nAnd I did it via IP subnet.\n\n1079\n01:03:36,320 --> 01:03:38,270\nWell some other options\nthat we have in here.\n\n1080\n01:03:38,270 --> 01:03:41,005\nVLAN based independent networks.\n\n1081\n01:03:41,005 --> 01:03:44,696\nSo if we're already using VLANS, and\nnot just for broadcast domains or\n\n1082\n01:03:44,696 --> 01:03:48,959\nto create, sometimes we use VLANS just to\ncontrol some of the broadcast traffic.\n\n1083\n01:03:48,959 --> 01:03:53,417\nVLANS that are Set up for\nspecific purposes.\n\n1084\n01:03:53,417 --> 01:03:58,200\nLike my human resources department\nversus my development department\n\n1085\n01:03:58,200 --> 01:04:02,100\nversus my marketing department or\nsomething like that.\n\n1086\n01:04:02,100 --> 01:04:04,300\nAnd we can come in here and\nwe can create those.\n\n1087\n01:04:04,300 --> 01:04:06,239\nWe would do a VLAN based\nindependent network.\n\n1088\n01:04:07,470 --> 01:04:08,760\nAnd then it looks very similar.\n\n1089\n01:04:08,760 --> 01:04:09,430\nI come in here and\n\n1090\n01:04:09,430 --> 01:04:13,440\nI would pick the group that I was going to\nuse that particular logical network on.\n\n1091\n01:04:13,440 --> 01:04:15,360\nAnd then I would add my VLAN ID.\n\n1092\n01:04:15,360 --> 01:04:17,620\nOkay, so we can dump that in there.\n\n1093\n01:04:18,970 --> 01:04:21,220\nOr I can do a private VLAN.\n\n1094\n01:04:21,220 --> 01:04:24,940\nAnd with a private VLAN we're\ngoing to need a VLAN ID\n\n1095\n01:04:24,940 --> 01:04:27,340\nas well as a secondary VLAN ID.\n\n1096\n01:04:27,340 --> 01:04:29,830\nAnd if your unfamiliar\nwith private VLAN's.\n\n1097\n01:04:29,830 --> 01:04:31,680\nVLAN has some limitations.\n\n1098\n01:04:31,680 --> 01:04:35,060\nVLAN's are relatively easy to use.\n\n1099\n01:04:35,060 --> 01:04:38,410\nMost of our switches now a days are going\nto support VLAN's and stuff like that.\n\n1100\n01:04:38,410 --> 01:04:42,540\nBut, we're limited to 4096 VLAN's.\n\n1101\n01:04:42,540 --> 01:04:46,400\nNow that might not seem like\na very bad limitation, but\n\n1102\n01:04:46,400 --> 01:04:50,640\nif we start getting into\ncloud service providers.\n\n1103\n01:04:50,640 --> 01:04:52,700\nIn your enterprise,\nmaybe you don't need that many.\n\n1104\n01:04:52,700 --> 01:04:56,500\nBut as a cloud service provider,\nthat could be a lot.\n\n1105\n01:04:56,500 --> 01:05:00,526\nHere's what happens is\nwere going to create,\n\n1106\n01:05:00,526 --> 01:05:06,360\nwe start running out of VLAN IDs,\nso it is a limitation of sorts.\n\n1107\n01:05:06,360 --> 01:05:10,720\nWith private VLANs, we can take those\nVLANs and we can divide them up.\n\n1108\n01:05:10,720 --> 01:05:14,020\nWe can create basically\nsub-VLANs within them.\n\n1109\n01:05:14,020 --> 01:05:15,080\nAnd what happens is,\n\n1110\n01:05:15,080 --> 01:05:18,380\nyou've got your primary VLAN which\nis what everybody's connected to.\n\n1111\n01:05:18,380 --> 01:05:22,440\nAnd then you've got your secondary VLAN\nthat you assign, and that's like your,\n\n1112\n01:05:22,440 --> 01:05:26,540\nalmost like a subnet within that VLAN.\n\n1113\n01:05:26,540 --> 01:05:28,940\nAnd we can set it what we\ncall promiscuous mode,\n\n1114\n01:05:28,940 --> 01:05:34,250\nwhich means they can communicate\nwith the primary VLAN, and and\n\n1115\n01:05:34,250 --> 01:05:39,690\nall of the different secondary VLANs or\nwe can do it\n\n1116\n01:05:39,690 --> 01:05:44,190\nwhere they can only communicate with other\nnodes that are on the same private VLAN.\n\n1117\n01:05:44,190 --> 01:05:46,810\nThey can still go out to the primary VLAN,\nbut\n\n1118\n01:05:46,810 --> 01:05:51,040\nthey can only communicate with other\nnodes on the same secondary VLAN.\n\n1119\n01:05:51,040 --> 01:05:54,360\nSo it's just a way to get around\nsome of the limitations that we have\n\n1120\n01:05:54,360 --> 01:05:56,310\nto face when working with our VLANs.\n\n1121\n01:05:57,470 --> 01:06:00,480\nSo just wanted to show you that a couple\ndifferent ways because they will mention\n\n1122\n01:06:00,480 --> 01:06:01,980\nthat in the exam.\n\n1123\n01:06:01,980 --> 01:06:08,090\nObjectives, talking about using\nVirtual LANs and private VLANs.\n\n1124\n01:06:08,090 --> 01:06:10,960\nThe last thing I really want to talk\nabout here is going to be something\n\n1125\n01:06:10,960 --> 01:06:13,250\ncalled a Windows Server Gateway.\n\n1126\n01:06:13,250 --> 01:06:14,400\nNow one of the things we haven't,\n\n1127\n01:06:14,400 --> 01:06:16,840\nI mentioned it way back\nin that first segment.\n\n1128\n01:06:18,130 --> 01:06:21,270\nWhen we set up this isolation\nthey truly are isolated.\n\n1129\n01:06:21,270 --> 01:06:25,420\nIf we're going to isolate these networks.\n\n1130\n01:06:25,420 --> 01:06:30,027\nSo we create our logical network and\nthen on top of that logical network\n\n1131\n01:06:30,027 --> 01:06:34,962\nwe're going to create our virtual\nnetworks that are going to be isolated.\n\n1132\n01:06:34,962 --> 01:06:40,190\nWe're not going to be able to communicate\nwith each other and I might need that.\n\n1133\n01:06:40,190 --> 01:06:44,220\nI need my accounting department to be\nable to talk to my marketing department,\n\n1134\n01:06:44,220 --> 01:06:45,020\nfor example.\n\n1135\n01:06:45,020 --> 01:06:46,670\nI need them to access resources.\n\n1136\n01:06:46,670 --> 01:06:49,920\nI want to be able to control what's\nallowed to go back and forth.\n\n1137\n01:06:49,920 --> 01:06:53,740\nSo we isolate them and now we're\ngoing to have to route between them.\n\n1138\n01:06:53,740 --> 01:06:54,710\nAnd what we're going to use for\n\n1139\n01:06:54,710 --> 01:06:57,770\nthat is actually something\ncalled a Windows Server Gateway.\n\n1140\n01:06:57,770 --> 01:07:01,380\nA Windows Server Gateway is\nactually a virtual machine\n\n1141\n01:07:01,380 --> 01:07:02,390\nthat's going to act as a router.\n\n1142\n01:07:02,390 --> 01:07:04,350\nSo it's a software-based router.\n\n1143\n01:07:04,350 --> 01:07:08,320\nBut it's designed to allow me to route\nbetween these different logical networks.\n\n1144\n01:07:09,820 --> 01:07:13,700\nAnd another thing kind of\na difficult concept to verbalize.\n\n1145\n01:07:13,700 --> 01:07:16,040\nI want to pull up an image here\nthat I got off of Tech Net.\n\n1146\n01:07:18,490 --> 01:07:22,260\nSo I can show you what I mean.\n\n1147\n01:07:22,260 --> 01:07:25,550\nSo up here, there's many different\nscenarios we can end up using this,\n\n1148\n01:07:25,550 --> 01:07:29,800\nWindows Server Gateway,\nas again it's a software based router.\n\n1149\n01:07:29,800 --> 01:07:31,890\nAnd you are going to need a host.\n\n1150\n01:07:31,890 --> 01:07:35,528\nTo run this virtual machine on and\nit's only going to run that one host.\n\n1151\n01:07:35,528 --> 01:07:38,650\nYou're going to set up\nthis virtual machine and\n\n1152\n01:07:38,650 --> 01:07:41,060\nthat virtual machine is what's going\nto be doing the routing on there.\n\n1153\n01:07:41,060 --> 01:07:44,850\nThere's a template that you go out and\nyou download from Microsoft,\n\n1154\n01:07:44,850 --> 01:07:48,240\nto create the virtual machine that's going\nto act as that Windows server gateway.\n\n1155\n01:07:48,240 --> 01:07:52,100\nAnd then, depending on what we're\ntrying to do, they have an example here\n\n1156\n01:07:52,100 --> 01:07:55,820\nwhere I've got within my enterprise,\nI've got my physical network.\n\n1157\n01:07:55,820 --> 01:07:57,860\nBut then I've got several\nvirtual networks.\n\n1158\n01:07:57,860 --> 01:07:59,990\nAgain, maybe for different departments.\n\n1159\n01:07:59,990 --> 01:08:03,210\nAnd to route between those\nvirtual networks and\n\n1160\n01:08:03,210 --> 01:08:06,810\nthe physical network, this is where\nI've got that gateway sitting.\n\n1161\n01:08:06,810 --> 01:08:09,120\nAll right?\n\n1162\n01:08:09,120 --> 01:08:14,040\nWe could have given that virtual network\ndirect access to the physical network, but\n\n1163\n01:08:14,040 --> 01:08:18,310\nI said usually we limit that for\nthe management Virtual network.\n\n1164\n01:08:18,310 --> 01:08:23,860\nAnd I can only have one virtual network\nthat has direct physical access\n\n1165\n01:08:23,860 --> 01:08:26,130\nto the physical network.\n\n1166\n01:08:26,130 --> 01:08:27,400\nWe only have one.\n\n1167\n01:08:27,400 --> 01:08:30,590\nThen I can create the other virtual\nnetworks, they're going to be isolated.\n\n1168\n01:08:30,590 --> 01:08:33,520\nSo if I need them to be able to connect\nthe resources that are on the physical\n\n1169\n01:08:33,520 --> 01:08:34,630\nnetwork, or\n\n1170\n01:08:34,630 --> 01:08:39,390\nroute to other virtual networks that I've\ncreated, we run a Windows Server gateway.\n\n1171\n01:08:39,390 --> 01:08:41,790\nBut that's not the only use for it.\n\n1172\n01:08:41,790 --> 01:08:44,430\nLet's say we're a cloud service provider,\nall right?\n\n1173\n01:08:44,430 --> 01:08:47,100\nSo here I've got virtual networks for\ndifferent organizations.\n\n1174\n01:08:47,100 --> 01:08:49,230\nI've got people that\nare paying me to manage and\n\n1175\n01:08:49,230 --> 01:08:51,740\nmaintain their virtual networks.\n\n1176\n01:08:51,740 --> 01:08:54,960\nSo as a cloud service provider I need\nto be able to route that traffic, but\n\n1177\n01:08:54,960 --> 01:08:58,220\nI need to be able to keep it isolate it.\n\n1178\n01:08:58,220 --> 01:09:01,030\nI don't want somebody that's\nover here in contoso to\n\n1179\n01:09:01,030 --> 01:09:05,330\nsomehow be able to get access to part\nof the fabricam virtual network.\n\n1180\n01:09:05,330 --> 01:09:07,520\nAnd try to get access\nto resources on that.\n\n1181\n01:09:07,520 --> 01:09:10,330\nAnd that's what this Windows server\ngateway is allowing me to do.\n\n1182\n01:09:10,330 --> 01:09:12,350\nTo keep that traffic isolated.\n\n1183\n01:09:12,350 --> 01:09:16,310\nIt's going to route that contoso traffic\ninto the contoso virtual network.\n\n1184\n01:09:16,310 --> 01:09:19,530\nNot allow it to go into my fabricam or\nin this drawing they've got here.\n\n1185\n01:09:19,530 --> 01:09:22,540\nMy Northwind Traders virtual network.\n\n1186\n01:09:22,540 --> 01:09:25,750\nSo we're doing site to site\ntunnels across the internet.\n\n1187\n01:09:27,000 --> 01:09:30,480\nAnother thing we might need to\ndo with our virtual machines is\n\n1188\n01:09:30,480 --> 01:09:34,500\nallow the virtual machine to get out and\nget internet access.\n\n1189\n01:09:34,500 --> 01:09:38,410\nIn which case we can do\na multitenant NAT Set up.\n\n1190\n01:09:38,410 --> 01:09:42,590\nSo what you can see here is you got a home\nuser that maybe wants to buy something, so\n\n1191\n01:09:42,590 --> 01:09:45,720\nwe've got up in Contoso\nthey're selling products.\n\n1192\n01:09:45,720 --> 01:09:50,120\nThey can connect to Contoso website and\nattempt to buy a product.\n\n1193\n01:09:50,120 --> 01:09:54,370\nWhen they punch in that credit card,\nthat I need my web server,\n\n1194\n01:09:54,370 --> 01:09:57,330\nI need it to go verify that\ncredit card information.\n\n1195\n01:09:57,330 --> 01:10:00,750\nSo I've got an account with some financial\ncorp credit card processing unit or\n\n1196\n01:10:00,750 --> 01:10:01,310\nwhat have you.\n\n1197\n01:10:02,510 --> 01:10:05,760\nI can use this gateway to\nallow that virtual machine to\n\n1198\n01:10:05,760 --> 01:10:09,890\nroute out to the Internet,\ntalk to that third party out there,\n\n1199\n01:10:09,890 --> 01:10:12,810\nand verify that credit card information.\n\n1200\n01:10:12,810 --> 01:10:14,300\nSo another use for that gateway.\n\n1201\n01:10:15,310 --> 01:10:18,250\nAnother one is to set up remote access.\n\n1202\n01:10:18,250 --> 01:10:22,090\nMaybe I want to allow Contoso\nto be able to remote in and\n\n1203\n01:10:22,090 --> 01:10:24,690\nmanipulate their virtual machines, right?\n\n1204\n01:10:24,690 --> 01:10:26,340\nSo I can give them either dial in or\n\n1205\n01:10:26,340 --> 01:10:30,250\nVPN access through that Windows server or\ngateway.\n\n1206\n01:10:30,250 --> 01:10:33,680\nAnd again, the key here is,\nit's multitenant aware.\n\n1207\n01:10:33,680 --> 01:10:36,950\nSo it knows that I'm running\ndifferent organizations and\n\n1208\n01:10:36,950 --> 01:10:39,390\nI've got to keep that\ninformation isolated.\n\n1209\n01:10:39,390 --> 01:10:41,915\nAnd that's the big thing that\nthat gateway is doing for me.\n\n1210\n01:10:41,915 --> 01:10:45,560\nBecause we could do normal routing, but\nthis gateway's really designed to work\n\n1211\n01:10:45,560 --> 01:10:50,070\nwith my virtual networks and\nkeep that traffic isolated.\n\n1212\n01:10:50,070 --> 01:10:53,700\nSo it's only allowed to talk to the\nvirtual network that it's supposed to, and\n\n1213\n01:10:53,700 --> 01:11:00,130\nnot start crossing boundaries and\ngetting to other virtual networks.\n\n1214\n01:11:00,130 --> 01:11:03,060\nNow there's Windows Server Gateway,\nbasically\n\n1215\n01:11:03,060 --> 01:11:06,940\nit has a depending on how you're doing it,\nwhen you're working through the VMM, so\n\n1216\n01:11:06,940 --> 01:11:10,260\nif you're in your virtual machine manager\ninterface working with this virtual server\n\n1217\n01:11:10,260 --> 01:11:15,400\ngateway its got a limited set\nof the BGP commands, right.\n\n1218\n01:11:17,070 --> 01:11:19,770\nBut it does actually have\nall of them available.\n\n1219\n01:11:19,770 --> 01:11:22,330\nBut if you're going through\nthe GUI you've got limited access.\n\n1220\n01:11:22,330 --> 01:11:24,600\nBut we can always whip out\nour Windows PowerShell.\n\n1221\n01:11:24,600 --> 01:11:29,160\nThe remote access module for Windows\nPowerShell would allow me to configure\n\n1222\n01:11:29,160 --> 01:11:33,510\nany of the BGP type commands on\nthat Windows Server Gateway.\n\n1223\n01:11:33,510 --> 01:11:36,410\nSo it might seem like it has limited\nfunctionality when you're working at it.\n\n1224\n01:11:36,410 --> 01:11:39,713\nWorking with it through the VMM interface,\n\n1225\n01:11:39,713 --> 01:11:44,094\nbecause it just limits to what\nwe might normally be using.\n\n1226\n01:11:44,094 --> 01:11:49,093\nBut if you need full access to all\nof the BGP settings, you can go and\n\n1227\n01:11:49,093 --> 01:11:50,978\nyou can use PowerShell.\n\n1228\n01:11:50,978 --> 01:11:53,591\nAnd you can get access to all of that.\n\n1229\n01:11:53,591 --> 01:11:59,813\nAll right ladies and gentleman,\nthat pretty much covers our objective 3.3,\n\n1230\n01:11:59,813 --> 01:12:05,200\nwhich is gonna be the networking or\nvirtualization networking.\n\n1231\n01:12:05,200 --> 01:12:07,170\nWe've talked a lot,\nwe've covered a lot of stuff, right?\n\n1232\n01:12:07,170 --> 01:12:10,440\nWe talked about logical networks,\nsetting those up.\n\n1233\n01:12:10,440 --> 01:12:14,490\nWe talked about the network site\ndefinitions that we create within\n\n1234\n01:12:14,490 --> 01:12:18,750\nthose logical networks to define\nour physical locations, okay.\n\n1235\n01:12:18,750 --> 01:12:24,140\nWe talked about creating IP address\npools so that we can let VMM\n\n1236\n01:12:24,140 --> 01:12:28,110\nassign IP addresses to the new virtual\nmachines that are added to those networks.\n\n1237\n01:12:28,110 --> 01:12:31,510\nWe also talked about creating\nMac address pools if we need to\n\n1238\n01:12:31,510 --> 01:12:33,150\nuse anything other than the default pools.\n\n1239\n01:12:33,150 --> 01:12:35,060\nRemember there was two default pools.\n\n1240\n01:12:35,060 --> 01:12:39,980\nIt had your one for your Hyper-V based,\nand Citrix based hypervisors.\n\n1241\n01:12:39,980 --> 01:12:44,380\nAnd then had a separate default pool for\nyour VMware based hypervisors.\n\n1242\n01:12:44,380 --> 01:12:46,940\nYou could create your\nown MAC address pools.\n\n1243\n01:12:46,940 --> 01:12:49,540\nAnd you could have it assign these MAC\naddresses to your different virtual\n\n1244\n01:12:49,540 --> 01:12:50,980\nmachines.\n\n1245\n01:12:50,980 --> 01:12:54,020\nThen we moved on and\nwe started talking about logical switches.\n\n1246\n01:12:54,020 --> 01:12:54,990\nAnd remember.\n\n1247\n01:12:54,990 --> 01:12:58,110\nDifference between logical switches and\nvirtual switches.\n\n1248\n01:12:58,110 --> 01:13:01,490\nLogical switches we create\nwithin our VMM console.\n\n1249\n01:13:01,490 --> 01:13:04,630\nAnd this is basically a container for\nthe settings I\n\n1250\n01:13:04,630 --> 01:13:09,595\nwanna use to create new virtual switches\non the Hyper-V servers themselves.\n\n1251\n01:13:09,595 --> 01:13:14,825\nWithin that logical switch, I can create\nport profiles and port classifications.\n\n1252\n01:13:14,825 --> 01:13:18,915\nSo we've got the definition for the switch\nas well as the port classifications.\n\n1253\n01:13:18,915 --> 01:13:20,840\nWe've looked at creating an uplink port.\n\n1254\n01:13:20,840 --> 01:13:25,120\nAs well as the standard virtual\nnetwork adapter classification.\n\n1255\n01:13:25,120 --> 01:13:27,640\nAnd then we went to one of\nour Hyper-V servers, and we\n\n1256\n01:13:27,640 --> 01:13:32,570\nimplemented that logical switch by looking\nat that virtual switch that was created.\n\n1257\n01:13:32,570 --> 01:13:34,150\nRemember we didn't have\nto configure anything.\n\n1258\n01:13:34,150 --> 01:13:37,350\nRight, it already picked up\nthe settings that we had set\n\n1259\n01:13:37,350 --> 01:13:40,200\nthrough the virtual machine manager and\nthat logical switch.\n\n1260\n01:13:40,200 --> 01:13:43,880\nSo logical switch was the container\nthat we contain all the settings\n\n1261\n01:13:43,880 --> 01:13:45,030\nthat we wanna use.\n\n1262\n01:13:45,030 --> 01:13:50,610\nThe virtual switch is what we create\nbased off of the logical switch,\n\n1263\n01:13:50,610 --> 01:13:54,490\nand then we rounded things off\ntalking about that virtual server\n\n1264\n01:13:54,490 --> 01:13:58,260\ngateway that's gonna allow me to route,\nbecause one of the keys with\n\n1265\n01:13:58,260 --> 01:14:02,790\nnetwork virtualization networking\nis the ability to isolate.\n\n1266\n01:14:02,790 --> 01:14:06,160\nThe ability to whether we're\ndoing it within our enterprise.\n\n1267\n01:14:06,160 --> 01:14:09,260\nAnd we're setting up isolation\nbetween my different departments.\n\n1268\n01:14:09,260 --> 01:14:13,590\nWhether that's because we charge those\ndepartments based on their utilization or\n\n1269\n01:14:13,590 --> 01:14:16,400\njust because we want to control\nthe traffic that's going between those\n\n1270\n01:14:16,400 --> 01:14:17,670\ndifferent departments.\n\n1271\n01:14:17,670 --> 01:14:21,430\nOr if we're a cloud service\nprovider where we want to,\n\n1272\n01:14:21,430 --> 01:14:24,380\nwe're hosting different\norganizations are resources.\n\n1273\n01:14:24,380 --> 01:14:28,060\nAnd we've got to keep those\nisolated from each other.\n\n1274\n01:14:28,060 --> 01:14:32,460\nSo that Windows server gateway\ngives me that functionality.\n\n1275\n01:14:32,460 --> 01:14:35,130\nAgain, it's something that you'll\ndownload the template from Microsoft.\n\n1276\n01:14:35,130 --> 01:14:38,630\nYou'll set up a Hyper-V\nserver dedicated this purpose\n\n1277\n01:14:38,630 --> 01:14:40,470\nrunning a single virtual machine.\n\n1278\n01:14:41,530 --> 01:14:44,760\nThat becomes your Windows server gateway.\n\n1279\n01:14:44,760 --> 01:14:47,250\nOne thing I didn't mention was\ndefault tolerance for that guy.\n\n1280\n01:14:48,360 --> 01:14:51,230\nIf you want to set up fault tolerance for\nthat Windows Server gateway which\n\n1281\n01:14:51,230 --> 01:14:54,590\nyou obviously do,\nwe're gonna set it up on a cluster, right?\n\n1282\n01:14:54,590 --> 01:14:57,790\nSo we can cluster the underlying\noperating system, and\n\n1283\n01:14:57,790 --> 01:15:01,780\nthen we can put that Windows Server\ngateway on top of that cluster, right?\n\n1284\n01:15:03,370 --> 01:15:08,480\nAll right, well remember as always,\nif you guys have any questions during\n\n1285\n01:15:08,480 --> 01:15:12,630\nthe show live, while you're watching,\njump in the chat room, and type away.\n\n1286\n01:15:12,630 --> 01:15:15,550\nWe monitor that chat room,\nwhile we're doing the show, and\n\n1287\n01:15:15,550 --> 01:15:17,820\nwe'll answer your questions live on air.\n\n1288\n01:15:17,820 --> 01:15:19,590\nIf you're watching this after the fact,\n\n1289\n01:15:19,590 --> 01:15:22,540\nif you're watching a recording,\nyour not out there in the dark.\n\n1290\n01:15:22,540 --> 01:15:24,130\nYou can still ask us questions.\n\n1291\n01:15:24,130 --> 01:15:29,090\nAt the top of every page,\nwe have our Q&A link.\n\n1292\n01:15:29,090 --> 01:15:30,440\nYou can jump into our forums there.\n\n1293\n01:15:30,440 --> 01:15:31,680\nYou can ask questions.\n\n1294\n01:15:31,680 --> 01:15:34,000\nAll of our hosts from the shows\nare gonna monitor those and\n\n1295\n01:15:34,000 --> 01:15:36,770\nwe'll get the information\nyou need to be successful.\n\n1296\n01:15:36,770 --> 01:15:39,930\nSo either way you go,\nyou can ask questions of us.\n\n1297\n01:15:39,930 --> 01:15:42,520\nWe're here to make sure you've got\nthe information needed to go out and\n\n1298\n01:15:42,520 --> 01:15:44,620\nget those certifications and\nbe successful.\n\n1299\n01:15:44,620 --> 01:15:49,554\nSo signing off for ITProTV, I'm Mike\nRoderick, you guys have a great day.\n\n1300\n01:15:49,554 --> 01:15:59,554\n[MUSIC]\n\n1301\n01:16:03,822 --> 01:16:07,049\n[MUSIC]\n\n1302\n01:16:07,049 --> 01:16:10,340\n[SOUND]\n\n",
          "vimeoId": "121458961"
        },
        {
          "description": null,
          "length": "3650",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-6-maintain_vm-infrastructure-030615-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-6-maintain_vm-infrastructure-030615-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-mcse70414-3-6-maintain_vm-infrastructure-030615-1-sm.jpg",
          "title": "Maintain VM Infrastructure",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,497 --> 00:00:35,026\nAll right.\nGood morning, good afternoon, and\n\n3\n00:00:35,026 --> 00:00:35,659\ngood evening.\n\n4\n00:00:35,659 --> 00:00:37,310\nWelcome back.\n\n5\n00:00:37,310 --> 00:00:40,520\nAnother episode of ITProTV,\nI'm your host, Don Pezet.\n\n6\n00:00:40,520 --> 00:00:41,700\nBack again with Mr. Mike Rodrick.\n\n7\n00:00:41,700 --> 00:00:42,350\nHow's it going, Mike?\n\n8\n00:00:42,350 --> 00:00:43,850\n>> Fantastic.\nDon, how are you doing today?\n\n9\n00:00:43,850 --> 00:00:46,350\n>> I'm doing just swell, although I\njust noticed in the monitor that I look\n\n10\n00:00:46,350 --> 00:00:49,890\nlike a McGroober, so\nI need to work on my wardrobe.\n\n11\n00:00:49,890 --> 00:00:55,040\nBut aside from that, I am pumped up and\nexcited to jump right back into\n\n12\n00:00:55,040 --> 00:00:59,860\nthe 70-4.14 exam, and today we're\ngoing to take a look at I know what\n\n13\n00:00:59,860 --> 00:01:04,750\nthe official name is, but basically\noptimizing our Hyper-V environment.\n\n14\n00:01:04,750 --> 00:01:08,460\nI know that the objective name\ndoesn't quite match up to that.\n\n15\n00:01:08,460 --> 00:01:14,240\nLet's see 3.6, manage and maintain\na server virtualization infrastructure.\n\n16\n00:01:14,240 --> 00:01:15,640\nWell what does that mean to us?\n\n17\n00:01:15,640 --> 00:01:17,722\n>> We got to keep make sure our\ninfrastructure's performing\n\n18\n00:01:17,722 --> 00:01:18,490\noptimally, right?\n\n19\n00:01:18,490 --> 00:01:22,650\nWe've taken all our time through these\nother episodes to get everything setup,\n\n20\n00:01:22,650 --> 00:01:23,940\nget everything working properly,\n\n21\n00:01:23,940 --> 00:01:28,230\nmake sure we can do live migrations\nif we need to and all that fun stuff.\n\n22\n00:01:28,230 --> 00:01:32,460\nBut, in the end, once it's up and running,\nit's a very dynamic environment, right?\n\n23\n00:01:32,460 --> 00:01:34,560\nSo we've got to make\nsure we're on top of it.\n\n24\n00:01:34,560 --> 00:01:36,160\nMonitoring our performance.\n\n25\n00:01:36,160 --> 00:01:39,260\nAnd by monitoring it,\nwe're going to be able to spot trends and\n\n26\n00:01:39,260 --> 00:01:42,260\nthings like that so we can do something\n\n27\n00:01:42,260 --> 00:01:45,100\nabout our issues before they become\na serious problem on our networks.\n\n28\n00:01:45,100 --> 00:01:49,080\nIf we're not monitoring, we find out\nabout it when something's broke, right?\n\n29\n00:01:49,080 --> 00:01:51,150\nWhen the help desk lights up and\nthings like that.\n\n30\n00:01:51,150 --> 00:01:52,820\nSo by monitoring it, we can be proactive.\n\n31\n00:01:54,090 --> 00:01:57,570\n>> And there's a number of tools available\nfrom Microsoft to help with this\n\n32\n00:01:57,570 --> 00:01:58,900\nmany of them are free.\n\n33\n00:01:58,900 --> 00:02:01,090\nSome of them are outrageously expensive.\n\n34\n00:02:01,090 --> 00:02:03,920\nAnd there's plenty of third party\ntools that are available also.\n\n35\n00:02:03,920 --> 00:02:07,980\nBut at the end of the day the best\ntool is the old noggin right here.\n\n36\n00:02:07,980 --> 00:02:11,000\nYou need to know what's available to be\nable to monitor and maintain your systems.\n\n37\n00:02:11,000 --> 00:02:12,560\nIf something goes wrong,\nhow do we know that?\n\n38\n00:02:12,560 --> 00:02:14,450\nHow do we figure that out?\n\n39\n00:02:14,450 --> 00:02:17,370\nWell, let's talk about some of\nthe tools that are available, right?\n\n40\n00:02:17,370 --> 00:02:19,720\nOne of the tools that we've\nheard about in numerous shows\n\n41\n00:02:19,720 --> 00:02:23,700\nis the Microsoft Best Practices Analyzer,\nthe MBPA.\n\n42\n00:02:23,700 --> 00:02:26,476\nIt's a free utility you can\ndownload it from Microsoft.\n\n43\n00:02:26,476 --> 00:02:27,363\nIt's included with [CROSSTALK], right?\n\n44\n00:02:27,363 --> 00:02:31,574\n>> It's actually built-in now, yeah,\nstarting with, I think, 2008 r2, but\n\n45\n00:02:31,574 --> 00:02:33,870\ndefinitely 2012, 2012 r2.\n\n46\n00:02:33,870 --> 00:02:35,040\nWhen you go into server manager,\n\n47\n00:02:35,040 --> 00:02:38,670\nit's right there on that screen, so\nany role that you add, you're going to\n\n48\n00:02:38,670 --> 00:02:42,100\nhave access to that Best Practice Analyzer\nfor that particular role.\n\n49\n00:02:42,100 --> 00:02:43,880\n>> And you're working on\na server where it's not included,\n\n50\n00:02:43,880 --> 00:02:46,560\nyou can just download it from Microsoft,\nit's easy enough.\n\n51\n00:02:46,560 --> 00:02:50,100\nThe Best Practice Analyzer does get\nupdates through Windows Updates, so\n\n52\n00:02:50,100 --> 00:02:52,620\nbefore you run it, you want to make sure\nyou've done all your Windows Updates so\n\n53\n00:02:52,620 --> 00:02:54,590\nit has the best information to act on.\n\n54\n00:02:54,590 --> 00:02:56,450\nAnd if you've never used the utility.\n\n55\n00:02:56,450 --> 00:03:00,220\nI know we've covered it,\nI think in every single MCSA show.\n\n56\n00:03:00,220 --> 00:03:03,580\nBut just remember the way this\nutility works is you run it.\n\n57\n00:03:03,580 --> 00:03:05,200\nAnd you can scan the computer you're on,\nor\n\n58\n00:03:05,200 --> 00:03:06,865\nyou can scan other computers\nthat are on the network.\n\n59\n00:03:06,865 --> 00:03:09,565\nNetwork, and it will look at them and\n\n60\n00:03:09,565 --> 00:03:12,945\ncompare their configuration\nwith what Microsoft recommends.\n\n61\n00:03:12,945 --> 00:03:17,455\nMicrosoft publishes configuration guides\nfor all of their software, and so\n\n62\n00:03:17,455 --> 00:03:19,695\nthey took all those\nconfiguration guide settings.\n\n63\n00:03:19,695 --> 00:03:22,585\nAnd they put into the BPA,\nso that it can stand and\n\n64\n00:03:22,585 --> 00:03:25,685\nit can look for anywhere you've\ndeviated from the best practices.\n\n65\n00:03:25,685 --> 00:03:28,730\nNow, just because I've deviated\nfrom the best practices\n\n66\n00:03:28,730 --> 00:03:31,310\ndoesn't necessarily mean\nI've done something wrong.\n\n67\n00:03:31,310 --> 00:03:34,740\nMicrosoft's best practices are,\nlike the name implies,\n\n68\n00:03:34,740 --> 00:03:37,990\nthe best practices for most people.\n\n69\n00:03:37,990 --> 00:03:39,230\nBut you might have special needs.\n\n70\n00:03:39,230 --> 00:03:42,890\nYou might have particular reasons\nwhy the normal configuration is\n\n71\n00:03:42,890 --> 00:03:43,530\ngood enough for you.\n\n72\n00:03:43,530 --> 00:03:44,900\nAnd you've deviated from that.\n\n73\n00:03:44,900 --> 00:03:48,670\nSo, just because the BPA red flags\nyou doesn't mean it's a big deal.\n\n74\n00:03:48,670 --> 00:03:51,660\nBut, it does help you highlight\nareas where things might not have\n\n75\n00:03:51,660 --> 00:03:53,210\nbeen sufficient.\n\n76\n00:03:53,210 --> 00:03:55,850\nNow here's the thing we need\nto remember for the exam.\n\n77\n00:03:55,850 --> 00:04:00,020\nThe BPA does a great job of scanning\nyour whole network if you want, and\n\n78\n00:04:00,020 --> 00:04:01,820\ngiving information back.\n\n79\n00:04:01,820 --> 00:04:04,220\nBut it's not designed to be run just once.\n\n80\n00:04:04,220 --> 00:04:06,690\nYou should be running this routinely.\n\n81\n00:04:06,690 --> 00:04:09,320\nLet me give you the scenario that happens.\n\n82\n00:04:09,320 --> 00:04:10,990\nWe create a Hyper-V environment.\n\n83\n00:04:10,990 --> 00:04:12,170\nClustered environment,\n\n84\n00:04:12,170 --> 00:04:15,500\nwe got Hyper-V replicas going offsite\nwe can figure everything great.\n\n85\n00:04:15,500 --> 00:04:19,080\nWe run the VPA it scans it and\nit says you've done a great job.\n\n86\n00:04:19,080 --> 00:04:20,710\nEverything's configured\nright to Microsoft specs.\n\n87\n00:04:21,730 --> 00:04:25,040\nA month or two later something\nweird is going on the network.\n\n88\n00:04:25,040 --> 00:04:27,140\nAnd maybe you're not in the office and\nsomebody else is and\n\n89\n00:04:27,140 --> 00:04:28,490\nthey start troubleshooting it.\n\n90\n00:04:28,490 --> 00:04:30,210\nAnd while they're\ntroubleshooting the problem,\n\n91\n00:04:30,210 --> 00:04:33,680\nmaybe they turn a few features off, they\nsay oh, maybe it's the Windows Firewall.\n\n92\n00:04:33,680 --> 00:04:35,290\nLet me just turn the Windows Firewall off.\n\n93\n00:04:35,290 --> 00:04:36,000\nNo, that wasn't it.\n\n94\n00:04:36,000 --> 00:04:37,790\nAll right,\nlet me go check this other thing.\n\n95\n00:04:37,790 --> 00:04:40,520\nAnd they never come back and\nturn the Windows Firewall back on again.\n\n96\n00:04:40,520 --> 00:04:41,100\nRight?\n\n97\n00:04:41,100 --> 00:04:43,400\nThey make changes,\nusually unauthorized changes.\n\n98\n00:04:43,400 --> 00:04:45,580\nIf you have change management,\nthat stops this.\n\n99\n00:04:45,580 --> 00:04:50,090\nBut they made some changes, and they\ndon't put them back when they're done.\n\n100\n00:04:50,090 --> 00:04:53,830\nWell, if you never run the BPA again, you\nmight be under the false impression that\n\n101\n00:04:53,830 --> 00:04:55,590\nthose servers are configured correctly.\n\n102\n00:04:55,590 --> 00:04:57,240\nBut they aren't anymore.\n\n103\n00:04:57,240 --> 00:04:58,810\nThings have changed.\n\n104\n00:04:58,810 --> 00:05:01,090\nAnd so, if you run the BPA again,\nit'll red flag.\n\n105\n00:05:01,090 --> 00:05:03,510\nIt'll say, warning, this server\ndoesn't have the file churned on.\n\n106\n00:05:03,510 --> 00:05:05,890\nYou can go, what the heck,\nwho turned that off?\n\n107\n00:05:05,890 --> 00:05:07,890\nAnd then you can go and\nbring that back up.\n\n108\n00:05:07,890 --> 00:05:09,990\nYou won't notice that with\nnormal monitoring software.\n\n109\n00:05:09,990 --> 00:05:13,940\nIf you're running something like S-COM or\nWhatsup Gold or\n\n110\n00:05:13,940 --> 00:05:17,150\nsomething like that, they'll tell\nyou if the server is running or not.\n\n111\n00:05:17,150 --> 00:05:20,380\nThey won't tell you if the firewall's\nbeen turned off, but the BPA will, right?\n\n112\n00:05:20,380 --> 00:05:23,930\nThat's part of its function, and\nit gets updates from Microsoft.\n\n113\n00:05:23,930 --> 00:05:26,770\nSo as Microsoft learns\nbetter ways to operate or\n\n114\n00:05:26,770 --> 00:05:29,920\nconfigure the software, or adjust things\nto account for vulnerabilities and\n\n115\n00:05:29,920 --> 00:05:32,260\nexploits that are out there in the field.\n\n116\n00:05:32,260 --> 00:05:34,370\nThey put it in a BPA and\nyou can run it again.\n\n117\n00:05:34,370 --> 00:05:37,445\nIt's a good idea to scan\nyour systems routinely.\n\n118\n00:05:37,445 --> 00:05:39,375\nAll right, how often should we do it Mike?\n\n119\n00:05:39,375 --> 00:05:41,935\n>> I'd say continuously, all right.\n\n120\n00:05:41,935 --> 00:05:43,775\n>> You really can't run it too much.\n\n121\n00:05:43,775 --> 00:05:44,845\nYou could run it continuously,\n\n122\n00:05:44,845 --> 00:05:47,145\nthere's actually some third party\nproducts out there that do exactly that.\n\n123\n00:05:47,145 --> 00:05:51,945\nThey continuously scan, but\nit's really what your comfort level is.\n\n124\n00:05:51,945 --> 00:05:56,080\nIf you have good change management in\nplace, and you know that unauthorized\n\n125\n00:05:56,080 --> 00:06:00,280\nchanges aren't being made to your system,\ntechnically once a month is good enough.\n\n126\n00:06:00,280 --> 00:06:03,860\nOnce a month, you have that giant\npatch Tuesday that comes out,\n\n127\n00:06:03,860 --> 00:06:05,730\nthose big updates that go out.\n\n128\n00:06:05,730 --> 00:06:08,430\nAnd if you're using WSUS to update\nyour systems you're covered there.\n\n129\n00:06:08,430 --> 00:06:12,690\nBut that patch Tuesday is usually when\nthe big updates come out for the BPA also.\n\n130\n00:06:12,690 --> 00:06:16,010\nSo once a month is normally good enough\nif you have good change control.\n\n131\n00:06:16,010 --> 00:06:19,590\nIf you don't have good change control,\nyou need to run it as often as you can.\n\n132\n00:06:19,590 --> 00:06:21,500\nOnce a week, once a day, once an hour,\n\n133\n00:06:21,500 --> 00:06:25,050\nhowever often you can without impacting\nperformance on your network too much.\n\n134\n00:06:25,050 --> 00:06:26,250\n>> Exactly.\n\n135\n00:06:26,250 --> 00:06:29,380\n>> All right, so,\nthat's one tool that's available for us.\n\n136\n00:06:29,380 --> 00:06:32,800\nIt doesn't necessarily make\nour system run faster, it can,\n\n137\n00:06:32,800 --> 00:06:35,190\nit can look at that configuration.\n\n138\n00:06:35,190 --> 00:06:38,460\n>> If it points out a problem and we go\nfix it, that can help improve performance.\n\n139\n00:06:38,460 --> 00:06:40,450\n>> It's really useful with\nclustering because it's so\n\n140\n00:06:40,450 --> 00:06:42,890\neasy to make a configuration\nmistake in clustering and\n\n141\n00:06:42,890 --> 00:06:43,910\nBPA will pick up a lot of that.\n\n142\n00:06:45,090 --> 00:06:47,820\nWhen you build that cluster originally,\nyou guys will remember from our\n\n143\n00:06:47,820 --> 00:06:51,980\nclustering episode, you run that\nCluster Validation Wizard, and\n\n144\n00:06:51,980 --> 00:06:57,240\nyou make sure that all your hardware and\nall that is supported by Microsoft.\n\n145\n00:06:57,240 --> 00:06:58,720\nWell, things could change.\n\n146\n00:06:58,720 --> 00:07:01,490\nYou put in some new driver\nthat breaks support, well,\n\n147\n00:07:01,490 --> 00:07:04,110\nyou're not running the Cluster Validation\nWizard again, you don't see it.\n\n148\n00:07:04,110 --> 00:07:04,670\nThe BPA will.\n\n149\n00:07:06,220 --> 00:07:07,750\nWhat's another tool we've got?\n\n150\n00:07:07,750 --> 00:07:09,390\n>> We've got our event logs.\n\n151\n00:07:09,390 --> 00:07:10,430\n>> Good old favorite there, right?\n\n152\n00:07:10,430 --> 00:07:12,670\n>> Yeah, you know, and\nit's not the most exciting thing.\n\n153\n00:07:12,670 --> 00:07:16,230\nBut the event logs is one of those places\nI think that a lot of people forget about.\n\n154\n00:07:16,230 --> 00:07:18,490\nAnd your system,\nwe've got our event logs in Windows.\n\n155\n00:07:18,490 --> 00:07:20,030\nWe've got our three basic logs.\n\n156\n00:07:20,030 --> 00:07:20,980\nOur what is it?\n\n157\n00:07:20,980 --> 00:07:24,250\nWe've got our security log,\nour application log, and our system log.\n\n158\n00:07:24,250 --> 00:07:26,920\nThis is a place where your\nsystem is trying to tell you,\n\n159\n00:07:26,920 --> 00:07:29,380\nwhere it can record when\nit's having problems.\n\n160\n00:07:29,380 --> 00:07:32,330\nI can't tell you how many people I've\ntalked to that say hey we're having\n\n161\n00:07:32,330 --> 00:07:33,070\na problem with this.\n\n162\n00:07:33,070 --> 00:07:34,310\nI say oh well, what did the event log say.\n\n163\n00:07:34,310 --> 00:07:35,170\nOh we haven't looked there yet.\n\n164\n00:07:36,290 --> 00:07:39,690\nAnd that's really one of the first\nplaces I like to go is the event log.\n\n165\n00:07:39,690 --> 00:07:42,570\nLet me see what the system's\ntelling me the problem might be.\n\n166\n00:07:42,570 --> 00:07:46,610\nLooking for my warnings, looking for my\ncriticals, looking for my errors in there.\n\n167\n00:07:46,610 --> 00:07:49,220\nSo we got to use those event logs,\nand there's a ton of them, right?\n\n168\n00:07:49,220 --> 00:07:52,226\nThere's those three main ones,\nbut now Microsoft over the years,\n\n169\n00:07:52,226 --> 00:07:55,284\nthey've given us access to all of\nthe different operational logs for\n\n170\n00:07:55,284 --> 00:07:57,619\nall the different services,\nand things like that.\n\n171\n00:07:57,619 --> 00:08:01,999\nAs you add different roles to your server,\nyou're going to get access to new logs.\n\n172\n00:08:01,999 --> 00:08:03,459\nSo it's a great system.\n\n173\n00:08:03,459 --> 00:08:06,440\nAnd they've made great improvements to\nthe event log system itself, right?\n\n174\n00:08:06,440 --> 00:08:09,820\nWe've got the great\nfiltering capabilities.\n\n175\n00:08:09,820 --> 00:08:13,100\nCuz if we're doing a lot of auditing,\nthings like that,\n\n176\n00:08:13,100 --> 00:08:15,510\nthose log files can get really big.\n\n177\n00:08:15,510 --> 00:08:19,180\nAnd not that they take up a lot of space,\nbut just a ton of events.\n\n178\n00:08:19,180 --> 00:08:21,860\nAnd somebody has to go through those,\nright?\n\n179\n00:08:21,860 --> 00:08:23,520\nAnd that's not the most exciting job.\n\n180\n00:08:23,520 --> 00:08:26,760\nA lot of the events are gonna\nbe things that we expect.\n\n181\n00:08:26,760 --> 00:08:31,190\nThis particular service started,\nthis particular service has shut down,\n\n182\n00:08:31,190 --> 00:08:33,350\nthings like that,\njust informational events.\n\n183\n00:08:33,350 --> 00:08:36,280\nWhat I really need to see typically,\nis my warning.\n\n184\n00:08:36,280 --> 00:08:37,810\nThat's what I'm looking for or my errors.\n\n185\n00:08:37,810 --> 00:08:40,460\nHopefully, I've spotted them before\nthey turn into errors while they're\n\n186\n00:08:40,460 --> 00:08:41,410\nstill warnings.\n\n187\n00:08:41,410 --> 00:08:43,580\nWe've got filtering capabilities in there.\n\n188\n00:08:43,580 --> 00:08:48,070\nWe can create custom views, where I\ncan actually pull all the warnings and\n\n189\n00:08:48,070 --> 00:08:52,400\nevents from multiple logs and\nhave them put into a single log file.\n\n190\n00:08:52,400 --> 00:08:55,300\nSo instead of having to go to log\nfile to log file to log file,\n\n191\n00:08:55,300 --> 00:08:58,420\nI can have one custom view that gets\nall the things that I need to see.\n\n192\n00:08:58,420 --> 00:09:01,200\nMaybe I'm responsible for\na certain area of my network.\n\n193\n00:09:01,200 --> 00:09:04,280\nI can create that custom view that just\npulls in the things I need to see,\n\n194\n00:09:04,280 --> 00:09:08,010\nand then those custom views\nare actually exportable.\n\n195\n00:09:08,010 --> 00:09:10,390\nThey can be saved as an XML file.\n\n196\n00:09:10,390 --> 00:09:14,590\nSo if I want to run that same custom view,\nmaybe we've got ten DNS servers and\n\n197\n00:09:14,590 --> 00:09:17,210\nI wanna use that same view\non all ten of those servers.\n\n198\n00:09:17,210 --> 00:09:18,820\nI don't have to recreate it.\n\n199\n00:09:18,820 --> 00:09:21,050\nI can export it as an XML file.\n\n200\n00:09:21,050 --> 00:09:24,080\nI can put that in a share somewhere,\nand I can share any server I go to,\n\n201\n00:09:24,080 --> 00:09:27,410\nI can grab that custom\nview imported in there.\n\n202\n00:09:27,410 --> 00:09:28,840\nSo I love that capability.\n\n203\n00:09:30,050 --> 00:09:31,220\nWhat else have they added to?\n\n204\n00:09:31,220 --> 00:09:33,640\nThe subscriptions are fantastic.\n\n205\n00:09:33,640 --> 00:09:35,470\n>> Now the subscriptions are really handy.\n\n206\n00:09:35,470 --> 00:09:37,362\nBack in the day [LAUGH].\n\n207\n00:09:37,362 --> 00:09:40,200\n>> [LAUGH]\n>> 15, 20 years ago almost, now.\n\n208\n00:09:41,210 --> 00:09:41,840\nI cut my teeth.\n\n209\n00:09:41,840 --> 00:09:44,920\nI got started in IT working\nas a field contractor.\n\n210\n00:09:44,920 --> 00:09:48,950\nAnd I would go to all sorts of places\nwhere they were having problems, and\n\n211\n00:09:48,950 --> 00:09:49,960\nsolve the problem.\n\n212\n00:09:49,960 --> 00:09:51,850\nWell, I'd go to a new location.\n\n213\n00:09:51,850 --> 00:09:53,490\nSome customer I'd never been to before.\n\n214\n00:09:53,490 --> 00:09:55,670\nNever seen their servers,\nnever worked in their environment,\n\n215\n00:09:55,670 --> 00:09:56,480\ndidn't know their software.\n\n216\n00:09:56,480 --> 00:10:00,460\nAnd they would say,\nthis server is not acting right.\n\n217\n00:10:00,460 --> 00:10:02,970\nAnd I have to come up\nto speed really fast.\n\n218\n00:10:02,970 --> 00:10:06,760\nWell it could take weeks to\nlearn somebody's environment.\n\n219\n00:10:06,760 --> 00:10:08,840\nAnd so most of the time I didn't bother.\n\n220\n00:10:08,840 --> 00:10:10,690\nI didn't say well I'm not\ngoing to fuss with that.\n\n221\n00:10:10,690 --> 00:10:12,360\nWhat I would do is,\nI would sit down on that server,\n\n222\n00:10:12,360 --> 00:10:14,180\nand I would go right to those event logs.\n\n223\n00:10:14,180 --> 00:10:15,540\nAnd I would do a filter like Mike said.\n\n224\n00:10:15,540 --> 00:10:17,070\nNow, let me just filter on errors.\n\n225\n00:10:17,070 --> 00:10:18,890\nGive me just the red messages, right?\n\n226\n00:10:18,890 --> 00:10:19,710\nThe errors.\n\n227\n00:10:19,710 --> 00:10:22,620\nAnd I would look at those and would go\nthrough and I would correct those errors.\n\n228\n00:10:22,620 --> 00:10:23,640\nWhat's this problem?\n\n229\n00:10:23,640 --> 00:10:24,600\nWhat's this problem?\nWhat's this problem?\n\n230\n00:10:24,600 --> 00:10:25,820\nAnd solve each of those.\n\n231\n00:10:25,820 --> 00:10:26,595\nAnd by the time I was.\n\n232\n00:10:26,595 --> 00:10:29,245\nDone correcting those errors,\nnine times out of ten,\n\n233\n00:10:29,245 --> 00:10:31,685\nwhatever problem the customer\nwas reporting was fixed.\n\n234\n00:10:31,685 --> 00:10:33,605\nAnd that was then, they'd say,\nwell, how did you know what to fix?\n\n235\n00:10:33,605 --> 00:10:35,080\nAnd I'd say, well, you told me.\n\n236\n00:10:35,080 --> 00:10:35,895\n>> [LAUGH]\n>> You told me right here,\n\n237\n00:10:35,895 --> 00:10:37,305\nI just followed instructions.\n\n238\n00:10:37,305 --> 00:10:39,825\nIt didn't take a rocket\nscientist to do that.\n\n239\n00:10:39,825 --> 00:10:42,915\nSo that is a really handy thing to do.\n\n240\n00:10:42,915 --> 00:10:46,315\nWell, later on, I went to work for\nan insurance company, and so\n\n241\n00:10:46,315 --> 00:10:48,410\nI was managing a bunch of servers there.\n\n242\n00:10:48,410 --> 00:10:52,150\nAnd my morning routine was that\nI would come into the office.\n\n243\n00:10:52,150 --> 00:10:53,310\nI'd shoot the breeze a bit, right?\n\n244\n00:10:53,310 --> 00:10:54,967\nYou gotta put that in there.\n\n245\n00:10:54,967 --> 00:10:55,467\n[LAUGH]\n>> [LAUGH]\n\n246\n00:10:55,467 --> 00:10:56,377\n>> Maybe eat some breakfast or\n\n247\n00:10:56,377 --> 00:10:58,237\nsomething I don't know.\nAnd then after that,\n\n248\n00:10:58,237 --> 00:11:00,977\nI would check my backup logs, right?\nAlways check the backup logs.\n\n249\n00:11:00,977 --> 00:11:02,227\nThat was the first thing in the morning,\n\n250\n00:11:02,227 --> 00:11:04,740\ncuz if a backup failed,\nI needed to rerun it right away.\n\n251\n00:11:04,740 --> 00:11:06,630\nAfter checking the backup logs,\n\n252\n00:11:06,630 --> 00:11:11,770\nWe would aggregate all of our event\nlog messages to one central location.\n\n253\n00:11:11,770 --> 00:11:16,016\nSo I can go and peruse the event logs for\nall of my servers right in one spot.\n\n254\n00:11:16,016 --> 00:11:17,960\nNow back then we had to use\nthird party software for it.\n\n255\n00:11:17,960 --> 00:11:19,740\n>> I'd say they didn't really have\nanything built into Windows to\n\n256\n00:11:19,740 --> 00:11:20,630\nallow that, did they?\n\n257\n00:11:20,630 --> 00:11:23,260\n>> But there's subscriptions,\nthey take care of that.\n\n258\n00:11:23,260 --> 00:11:24,950\n>> Yeah.\nIt's a whole new game now.\n\n259\n00:11:24,950 --> 00:11:27,520\nInstead of having to go to\nseveral different machines and\n\n260\n00:11:27,520 --> 00:11:31,100\nlook at their log files, or instead\nof using some third party software.\n\n261\n00:11:31,100 --> 00:11:35,020\nI can sit down at my Windows 8 machine,\nthe machine I sit at everyday, and\n\n262\n00:11:35,020 --> 00:11:39,450\nI can have the log files from the ten\ndifferent DNS servers that I'm responsible\n\n263\n00:11:39,450 --> 00:11:42,610\nfor brought into my machine's event logs,\nright.\n\n264\n00:11:42,610 --> 00:11:45,910\nSo I can open up the event\nlog system on my client and\n\n265\n00:11:45,910 --> 00:11:49,950\nI can see all the events from all\nten of those different DNS servers.\n\n266\n00:11:49,950 --> 00:11:51,350\nAnd I can still do my same filtering.\n\n267\n00:11:51,350 --> 00:11:53,240\nI don't have to pull in the entire logs,\n\n268\n00:11:53,240 --> 00:11:55,940\nI can pull in just the important\nevents that I want.\n\n269\n00:11:55,940 --> 00:11:58,890\nAnd I think that's something that\nMicrosoft has needed for quite some time.\n\n270\n00:12:00,930 --> 00:12:02,120\nNot the reason we'd use them, but\n\n271\n00:12:02,120 --> 00:12:04,650\neven a little bit of from\na security stand point, right?\n\n272\n00:12:04,650 --> 00:12:08,880\nAs a hacker, one of the last steps in the\nhacking phase is to clear the log files.\n\n273\n00:12:08,880 --> 00:12:11,630\nRight?\nRemove any trace of me being there.\n\n274\n00:12:11,630 --> 00:12:14,750\nAnd if the only copy of the log\nfiles is on that server,\n\n275\n00:12:14,750 --> 00:12:17,070\nthen I lose all that information possibly.\n\n276\n00:12:17,070 --> 00:12:18,300\nWhereas if I've got a subscription,\n\n277\n00:12:18,300 --> 00:12:21,150\nI have those log files basically\nbeing shipped somewhere else,\n\n278\n00:12:21,150 --> 00:12:24,800\nthey're still on that server, but\nthey're also on my computer as well.\n\n279\n00:12:24,800 --> 00:12:26,830\nSo now I've got another\ncopy of those events, and\n\n280\n00:12:26,830 --> 00:12:28,590\nthey're not gonna know\nwhere to go to clear that.\n\n281\n00:12:28,590 --> 00:12:31,630\nThey don't know who has subscriptions and\nthings like that.\n\n282\n00:12:31,630 --> 00:12:34,490\n>> Yeah, so pretty handy thing to\nhave there, just for monitoring and\n\n283\n00:12:34,490 --> 00:12:35,180\nmaintaining.\n\n284\n00:12:35,180 --> 00:12:36,320\nIt's definitely a key tool.\n\n285\n00:12:36,320 --> 00:12:39,080\n>> Yeah, and\nthe other thing I've had was the whole\n\n286\n00:12:39,080 --> 00:12:41,600\nattaching a task to an event ID now,\nall right?\n\n287\n00:12:41,600 --> 00:12:44,390\nSo you can actually go in there, and maybe\nyou've got some script that you want,\n\n288\n00:12:44,390 --> 00:12:48,950\nany time event ID 1542 pops up,\nI want this script to run.\n\n289\n00:12:48,950 --> 00:12:52,550\nMaybe it's a mailto script or\nsomething that runs a small program, or\n\n290\n00:12:52,550 --> 00:12:53,650\nsomething like that.\n\n291\n00:12:53,650 --> 00:12:57,360\nAnd you can do that now\nthrough that event log system.\n\n292\n00:12:57,360 --> 00:13:00,610\nAlways had a problem in\nthe performance monitor.\n\n293\n00:13:00,610 --> 00:13:03,570\nThey've got that alert that we've\ntalked about several episodes.\n\n294\n00:13:03,570 --> 00:13:06,990\nAnd you're limited to generating\nan event in the event log.\n\n295\n00:13:06,990 --> 00:13:07,950\nI was like great so\n\n296\n00:13:07,950 --> 00:13:12,880\nthis things gonna alert me if my\nprocessor gets over 90% processor time.\n\n297\n00:13:12,880 --> 00:13:15,250\nAll I can do is have it send\nan event to the event log.\n\n298\n00:13:15,250 --> 00:13:17,740\nNow I can actually take that\nevent in the event log and\n\n299\n00:13:17,740 --> 00:13:21,630\nextend the capabilities of\nthat through that task list.\n\n300\n00:13:22,820 --> 00:13:25,370\n>> Now if we wanna go\nsuper hardcore though\n\n301\n00:13:25,370 --> 00:13:28,630\nwe've got the Systems Center\nOperations Manager right, the SCOM.\n\n302\n00:13:28,630 --> 00:13:31,110\nSCOM, which we've seen in other episodes,\n\n303\n00:13:31,110 --> 00:13:33,730\nallows us to monitor all\nof our infrastructure.\n\n304\n00:13:33,730 --> 00:13:36,800\nAnd so you can monitor whatever you've\ngot, database servers and so on.\n\n305\n00:13:36,800 --> 00:13:42,120\nWell in terms of Hyper-V, it's really\nimportant that we monitor our hosts.\n\n306\n00:13:42,120 --> 00:13:46,240\nSCOM can monitor those hosts and\nreport back how they're doing on memory,\n\n307\n00:13:46,240 --> 00:13:47,810\ndisk space, CPU.\n\n308\n00:13:47,810 --> 00:13:51,240\nAnd that's all important for\nresource contention, right?\n\n309\n00:13:51,240 --> 00:13:53,820\nYou don't want VMs fighting each other for\nresources.\n\n310\n00:13:53,820 --> 00:13:57,670\nNow, you can monitor the VMs themselves,\nbut it's more important to monitor\n\n311\n00:13:57,670 --> 00:14:00,822\nthe Hyper-V host and that's going to be\na recurring theme throughout this episode.\n\n312\n00:14:00,822 --> 00:14:05,980\nWe're gonna see where monitoring,\nbacking up, maintaining the VM host\n\n313\n00:14:05,980 --> 00:14:09,310\nis almost always more important\nthan the VM guests themselves.\n\n314\n00:14:09,310 --> 00:14:11,010\nThe guests are pretty flexible.\n\n315\n00:14:11,010 --> 00:14:13,250\nIf you're monitoring performance\ninside of the guest,\n\n316\n00:14:13,250 --> 00:14:16,710\nwell, it doesn't know about\nthe virtualization hardware underneath.\n\n317\n00:14:16,710 --> 00:14:18,420\nIt knows a little bit about it but\nnot a ton.\n\n318\n00:14:18,420 --> 00:14:21,940\nAnd so, it's not going to give\nyou an accurate reflection\n\n319\n00:14:21,940 --> 00:14:23,540\nof the performance on the system.\n\n320\n00:14:23,540 --> 00:14:24,688\nWe got to monitor the host for that.\n\n321\n00:14:24,688 --> 00:14:27,450\nSo we're gonna talk more about\nSCOM a little bit later,\n\n322\n00:14:27,450 --> 00:14:29,880\nespecially with integrating that\nwith other products, like the SCVMM.\n\n323\n00:14:29,880 --> 00:14:30,380\nRight.\n\n324\n00:14:31,720 --> 00:14:36,650\nNow, let's say that I've got some virtual\nmachines and I want to monitor their\n\n325\n00:14:36,650 --> 00:14:40,220\nperformance, but I don't want\na bunch of crazy infrastructure.\n\n326\n00:14:40,220 --> 00:14:43,940\nI don't want to integrate something\nlike SCOM in my environment.\n\n327\n00:14:43,940 --> 00:14:48,000\nIf you're a small or medium business,\nSCOM is a little expensive.\n\n328\n00:14:48,000 --> 00:14:49,950\nAnd it takes a lot of infrastructure.\n\n329\n00:14:49,950 --> 00:14:53,610\nYou have SQL database, you typically have\nto have two servers for it at a minimum.\n\n330\n00:14:53,610 --> 00:14:57,560\nAnd they're pretty resource hungry, so\nit's a lot of effort to maintain SCOM.\n\n331\n00:14:57,560 --> 00:14:58,810\nIt's great, don't get me wrong.\n\n332\n00:14:58,810 --> 00:15:01,720\nIf you're a large business or\nan enterprise, you want SCOM,\n\n333\n00:15:01,720 --> 00:15:02,310\nit's pretty awesome.\n\n334\n00:15:02,310 --> 00:15:05,790\nBut if you're a small or medium business,\nthings like that aren't so great.\n\n335\n00:15:05,790 --> 00:15:07,700\nWe've got the Performance Monitor,\nthat we can use for\n\n336\n00:15:07,700 --> 00:15:10,210\nmonitoring performance of our host and\nVMs.\n\n337\n00:15:10,210 --> 00:15:11,550\nIt's okay too.\n\n338\n00:15:11,550 --> 00:15:15,760\nBut Microsoft actually has a special\nutility baked into the PowerShell that we\n\n339\n00:15:15,760 --> 00:15:16,550\ncan use to monitor things.\n\n340\n00:15:16,550 --> 00:15:18,838\nNow I know what you're thinking,\ngreat, here comes PowerShell.\n\n341\n00:15:18,838 --> 00:15:20,680\n>> [LAUGH]\n>> These are some of\n\n342\n00:15:20,680 --> 00:15:22,820\nthe easiest commands that you can use.\n\n343\n00:15:22,820 --> 00:15:26,430\nIn Windows Sever 2012 we have\nsomething called resource metering.\n\n344\n00:15:26,430 --> 00:15:30,130\nIt's a built in sublayer inside of 2012\nthat allows us to monitor virtual machine\n\n345\n00:15:30,130 --> 00:15:33,750\nperformance from\nthe perspective of the host.\n\n346\n00:15:33,750 --> 00:15:37,390\nAnd the host has a realistic\npicture of the server.\n\n347\n00:15:37,390 --> 00:15:39,470\nSo if you're ever looking at\nsome of your VMs and saying,\n\n348\n00:15:39,470 --> 00:15:41,440\nman that VM seems to be\nrunning a little slow.\n\n349\n00:15:41,440 --> 00:15:43,700\nWell, I've got a couple of different\nVMs that are not performing the way\n\n350\n00:15:43,700 --> 00:15:44,690\nthey should.\n\n351\n00:15:44,690 --> 00:15:45,950\nWe can go and look at them.\n\n352\n00:15:45,950 --> 00:15:49,567\nWe talk about this a bit when we talk\nabout migrating physical servers to\n\n353\n00:15:49,567 --> 00:15:50,119\nvirtual.\n\n354\n00:15:50,119 --> 00:15:53,890\nThen you need to understand their CPU\nload, their memory, their network and\n\n355\n00:15:53,890 --> 00:15:58,140\nDisk I/O because that's going to affect\ntheir contention once they're on the host.\n\n356\n00:15:58,140 --> 00:16:02,040\nBut once they're on the host those\ncharacteristics could change.\n\n357\n00:16:02,040 --> 00:16:03,328\nSo we need a way to monitor those and\n\n358\n00:16:03,328 --> 00:16:05,290\nwe don't want to run a bunch\nof crazy agents to do it.\n\n359\n00:16:05,290 --> 00:16:09,080\nIf you don't want the infrastructure\nof SCOM we can use resource metering\n\n360\n00:16:09,080 --> 00:16:10,230\nright from the PowerShell.\n\n361\n00:16:10,230 --> 00:16:11,950\nLet me show you what I mean.\n\n362\n00:16:11,950 --> 00:16:16,750\nI've got a Hyper-V server right here and\nthis Hyper-V server,\n\n363\n00:16:16,750 --> 00:16:18,590\nit's got a couple of VMs\nthat are sitting on it.\n\n364\n00:16:18,590 --> 00:16:23,220\nAnd there's one particular, this guy right\nhere ITPROTV-DC2 I can see it's running,\n\n365\n00:16:23,220 --> 00:16:26,710\nright now it's CPU utilization is 0%,\nso it's kind of idle.\n\n366\n00:16:26,710 --> 00:16:31,260\nBut it's got 3 gigs of memory, and it's\njust kinda sitting there and that's that.\n\n367\n00:16:31,260 --> 00:16:36,740\nWell, I get a quick, just a high level\noverview of performance right here.\n\n368\n00:16:36,740 --> 00:16:38,530\nWhen I start looking at memory down here,\n\n369\n00:16:38,530 --> 00:16:41,600\nor networking I see just\na little bit of information.\n\n370\n00:16:41,600 --> 00:16:44,370\nNot really enough to make any\nkind of decisions on, right?\n\n371\n00:16:44,370 --> 00:16:46,530\nI don't see how much bandwidth it's using.\n\n372\n00:16:46,530 --> 00:16:49,000\nSo it's a really limited view.\n\n373\n00:16:49,000 --> 00:16:51,180\nI could go into performance monitor,\nright?\n\n374\n00:16:51,180 --> 00:16:52,610\nIn the performance monitor,\n\n375\n00:16:52,610 --> 00:16:56,790\nyou've got all those different\ncounters available for Hyper-V, right?\n\n376\n00:16:56,790 --> 00:16:59,350\nSo I could create a Data Collector Set,\nand\n\n377\n00:16:59,350 --> 00:17:04,160\nwe'll just do a I'll just modify this one,\nI don't want to reinvent the wheel here.\n\n378\n00:17:04,160 --> 00:17:08,940\nBut you can go in and create\na Data Collector Set, and you can start to\n\n379\n00:17:08,940 --> 00:17:13,370\nadd in some different monitors to tell\nit what it is you want to capture.\n\n380\n00:17:13,370 --> 00:17:14,760\nActually I'm in the wrong spot aren't I?\n\n381\n00:17:14,760 --> 00:17:16,500\nI need to go in to my\nperformance counters.\n\n382\n00:17:16,500 --> 00:17:17,620\nThere we go.\n\n383\n00:17:17,620 --> 00:17:19,440\nAnd so we can add in all\nsorts of different counters.\n\n384\n00:17:19,440 --> 00:17:23,010\nNow, the counters that are in here\nby default, these are for the host.\n\n385\n00:17:23,010 --> 00:17:24,030\nI'm monitoring the host CPU.\n\n386\n00:17:24,030 --> 00:17:27,100\nWell, if the host CPU is at 100%,\nwhose fault is that?\n\n387\n00:17:27,100 --> 00:17:28,180\n>> Right.\n\n388\n00:17:28,180 --> 00:17:29,680\n>> It doesn't tell me, all right?\n\n389\n00:17:29,680 --> 00:17:34,330\nBut I can hit add here, and I can jump in,\nand I can find all the Hyper-V counters,\n\n390\n00:17:34,330 --> 00:17:37,070\nwhich are probably in the H's,\nif I can get to it.\n\n391\n00:17:37,070 --> 00:17:38,150\nHere we go.\n\n392\n00:17:38,150 --> 00:17:41,010\nSo we got our Hyper-V section and\nyou'll see information in here for\n\n393\n00:17:41,010 --> 00:17:45,150\nmonitoring the Hyper-V virtual\nmachine buses, the replicas,\n\n394\n00:17:45,150 --> 00:17:49,280\nit's all buried in here inside of Hyper-V.\n\n395\n00:17:49,280 --> 00:17:53,790\nAnd this lets us see which virtual\nmachines are consuming which resources and\n\n396\n00:17:53,790 --> 00:17:54,320\nall that.\n\n397\n00:17:54,320 --> 00:17:56,690\nSo you got a lot of\ncounters that you can use.\n\n398\n00:17:56,690 --> 00:18:01,440\nBut, it does kinda expect you to know\nwhich counters are the right one.\n\n399\n00:18:01,440 --> 00:18:04,450\nAnd Microsoft does have a performance\ntuning guide on their site.\n\n400\n00:18:04,450 --> 00:18:07,640\nI'll put the link to it in the show\nnotes so you guys can read it.\n\n401\n00:18:07,640 --> 00:18:09,175\nIt's pretty exciting reading.\n\n402\n00:18:09,175 --> 00:18:11,020\n>> [LAUGH]\n>> But, if I'm in a hurry.\n\n403\n00:18:11,020 --> 00:18:12,600\nIf I'm new to this environment.\n\n404\n00:18:12,600 --> 00:18:14,790\nIf I just wanna get\na Performance Characteristics,\n\n405\n00:18:14,790 --> 00:18:19,160\nresource metering will give me what\nI want all right from the PowerShell.\n\n406\n00:18:19,160 --> 00:18:20,310\nLet me show you this.\n\n407\n00:18:20,310 --> 00:18:21,400\n>> It really is handy and\n\n408\n00:18:21,400 --> 00:18:25,230\nit's one of the things I see when you're\nmonitoring that VM's performance.\n\n409\n00:18:25,230 --> 00:18:27,258\nLet's say your CPU's at 90%.\n\n410\n00:18:27,258 --> 00:18:29,690\nWell, 90% of what,\ncuz that could be changing.\n\n411\n00:18:29,690 --> 00:18:32,920\nIf you're using the resource organization.\n\n412\n00:18:32,920 --> 00:18:36,090\nLetting it dynamically adjust things like\nthat, you really don't know what that 90%\n\n413\n00:18:36,090 --> 00:18:40,650\nof is, whereas this is gonna\ngive you a number, right.\n\n414\n00:18:40,650 --> 00:18:44,650\nIt's gonna give you how much gigahertz,\nor megahertz that processor is using.\n\n415\n00:18:44,650 --> 00:18:46,150\nAnd if your billing based on this,\n\n416\n00:18:46,150 --> 00:18:50,580\nif your IT Department is supporting, is\nbilling back to the different departments.\n\n417\n00:18:50,580 --> 00:18:51,730\nOr if you're a Service Provider.\n\n418\n00:18:51,730 --> 00:18:55,020\nThings like this can help you\nwith that billing process.\n\n419\n00:18:55,020 --> 00:18:56,320\n>> Yeah.\nNow if I just do a get VM.\n\n420\n00:18:56,320 --> 00:18:58,760\nI get the same information I\nsaw on the GUI a moment ago.\n\n421\n00:18:58,760 --> 00:19:01,350\nCPU usage, memory assignment, and so on.\n\n422\n00:19:01,350 --> 00:19:02,960\nIt's all right there.\n\n423\n00:19:02,960 --> 00:19:06,818\nBut if I want more detailed information,\nwhat I can do is type\n\n424\n00:19:06,818 --> 00:19:12,100\nenable-VM resource metering.\n\n425\n00:19:12,100 --> 00:19:13,295\nWhoops there we go.\n\n426\n00:19:13,295 --> 00:19:15,990\nEnable-VM resource metering, and\n\n427\n00:19:15,990 --> 00:19:18,300\nthen the name of the VM that\nI want to turn it on for.\n\n428\n00:19:18,300 --> 00:19:20,850\nSo I'm going to turn it on for\nITPROTV-DC2.\n\n429\n00:19:20,850 --> 00:19:22,060\nAll right.\n\n430\n00:19:22,060 --> 00:19:24,360\nThat's gonna turn on resource metering.\n\n431\n00:19:24,360 --> 00:19:30,140\nNow, in the background it's monitoring\na selection of performance counters.\n\n432\n00:19:30,140 --> 00:19:33,610\nThat are built around what\nwe need to know for a VM and\n\n433\n00:19:33,610 --> 00:19:35,550\nthey're monitoring it from\nthe perspective of the host OS so\n\n434\n00:19:35,550 --> 00:19:38,810\nthis is the most accurate\ninformation that we can get.\n\n435\n00:19:38,810 --> 00:19:41,230\nNow, it's going to continue running,\nit's doing its monitoring.\n\n436\n00:19:41,230 --> 00:19:44,570\nI think the Default Interval\nis something like 15 seconds.\n\n437\n00:19:44,570 --> 00:19:48,480\nSo it's collecting that data and\ngetting it in place.\n\n438\n00:19:48,480 --> 00:19:48,990\nAll right.\n\n439\n00:19:48,990 --> 00:19:50,500\nNow I can leave this running and\nwalk away.\n\n440\n00:19:50,500 --> 00:19:52,540\nI can leave it running for days, months,\n\n441\n00:19:52,540 --> 00:19:56,190\nhowever long I want, and\nthe counters are just kinda building up.\n\n442\n00:19:56,190 --> 00:19:57,700\nIt's building up this information for me.\n\n443\n00:19:58,850 --> 00:20:05,760\nWhen I want to see it,\nI can use the measure-VM command and\n\n444\n00:20:05,760 --> 00:20:09,100\nI can tell it which VM I want\nto monitor or to measure.\n\n445\n00:20:09,100 --> 00:20:09,740\nAll right?\n\n446\n00:20:09,740 --> 00:20:13,300\nAnd it's gonna look at the resource\nmetering data, and it's gonna give me so\n\n447\n00:20:13,300 --> 00:20:14,720\noutput on it, right.\n\n448\n00:20:14,720 --> 00:20:18,680\nAnd so when I run it here I can\nsee ITPROTV-DC2 is running.\n\n449\n00:20:18,680 --> 00:20:21,110\nNotice up here my CPU\nusage kept showing 0%,\n\n450\n00:20:21,110 --> 00:20:26,280\nbut my average CPU is\napparently 7 megahertz.\n\n451\n00:20:26,280 --> 00:20:26,940\nOkay?\n\n452\n00:20:26,940 --> 00:20:28,950\nThat's more accurate than a percentage.\n\n453\n00:20:28,950 --> 00:20:29,900\nWhy is that more accurate?\n\n454\n00:20:29,900 --> 00:20:37,090\nWell If you tell me I'm using 50% of\nthe CPU, if the CPU is a 2 GHz processor,\n\n455\n00:20:37,090 --> 00:20:41,660\nor if it's a 4GHz processor, that 50%\nmeans something very, very different.\n\n456\n00:20:41,660 --> 00:20:45,170\nAnd if you're in a dynamic environment\nwhere the VM might be moving from physical\n\n457\n00:20:45,170 --> 00:20:49,630\nhost to physical host, that 50%\ndoesn't help you properly plan for\n\n458\n00:20:49,630 --> 00:20:52,190\nthe resource allocation on that server.\n\n459\n00:20:52,190 --> 00:20:54,380\nBut here I see 7 MHz.\n\n460\n00:20:54,380 --> 00:20:55,290\nNot a percentage.\n\n461\n00:20:55,290 --> 00:20:57,790\nI know many megahertz\nthat thing's consuming.\n\n462\n00:20:57,790 --> 00:20:58,810\nThat's a lot more useful to me.\n\n463\n00:21:00,220 --> 00:21:01,630\nI can also see the memory assignment.\n\n464\n00:21:01,630 --> 00:21:04,560\nNow, see how I've got an average,\nmaximum, and minimum memory?\n\n465\n00:21:04,560 --> 00:21:06,260\nWell, they're all the same, and\n\n466\n00:21:06,260 --> 00:21:09,000\nthat's because I've got static\nmemory assigned to this box.\n\n467\n00:21:09,000 --> 00:21:12,320\nIf you're doing dynamic memory, though,\nwhere I tell it, yeah, when you boot,\n\n468\n00:21:12,320 --> 00:21:13,870\nyou get 500 megs.\n\n469\n00:21:13,870 --> 00:21:17,310\nBut you could go up to 3 gigs and\njust use whatever's in between.\n\n470\n00:21:17,310 --> 00:21:18,960\nThis becomes a lot more useful too.\n\n471\n00:21:18,960 --> 00:21:23,040\nNow I can actually see on average, how\nmuch memory is it actually using, right.\n\n472\n00:21:23,040 --> 00:21:26,725\nIf I had the max at 3 gigs and\nthe average is 3 gigs.\n\n473\n00:21:26,725 --> 00:21:28,435\nThen there's really no point\nin doing Dynamic Memory.\n\n474\n00:21:28,435 --> 00:21:30,485\nI might as well just statically\nassign it at 3 gigs.\n\n475\n00:21:30,485 --> 00:21:31,845\nI'll get better performance.\n\n476\n00:21:31,845 --> 00:21:33,480\nDynamic memory always takes\na little bit of a hit.\n\n477\n00:21:35,060 --> 00:21:40,127\nI can see the disk that's being used, 69\ngigs in this case in megabytes gigabytes.\n\n478\n00:21:40,127 --> 00:21:42,847\nI can see Network inbound and\nNetwork outbound.\n\n479\n00:21:42,847 --> 00:21:45,017\nThere, my head's on part of that,\nlet me scroll that up.\n\n480\n00:21:45,017 --> 00:21:48,337\nNetwork inbound and Network outbound, so\nI can see that information in terms of\n\n481\n00:21:48,337 --> 00:21:52,547\nmegabit also and I get a good idea of how\nmuch Network bandwidth this is consuming.\n\n482\n00:21:52,547 --> 00:21:58,257\nNotice, these are my big four,\nCPU, memory, disk, network, right.\n\n483\n00:21:58,257 --> 00:22:01,270\nThat's the big four performance\ncounters that I need to monitor.\n\n484\n00:22:01,270 --> 00:22:05,740\nAnd now I can get a realistic\nview of this machine, it's VM and\n\n485\n00:22:05,740 --> 00:22:08,940\ncompare with the others and do better\nplacement selection based on that.\n\n486\n00:22:08,940 --> 00:22:10,630\nBetter comparison for resource contention.\n\n487\n00:22:12,720 --> 00:22:15,450\nNow, if I had been leaving\nthis running for months, and\n\n488\n00:22:15,450 --> 00:22:18,580\nI'm running this right now because\nI'm getting bad performance today,\n\n489\n00:22:18,580 --> 00:22:22,160\nthe previous months of data might kind\nof poison the results that I get.\n\n490\n00:22:22,160 --> 00:22:27,510\nSo there is a reset-VM resource metering.\n\n491\n00:22:27,510 --> 00:22:29,530\nI can reset the counters.\n\n492\n00:22:29,530 --> 00:22:32,960\nThat will reset the counters to zero,\nand start them over again.\n\n493\n00:22:32,960 --> 00:22:35,500\nI can do that, and get refreshed, and\n\n494\n00:22:35,500 --> 00:22:38,610\nI might get more accurate\ninformation based on that.\n\n495\n00:22:38,610 --> 00:22:41,770\nSee how my numbers dip down a bit there,\nas I start to reflect that.\n\n496\n00:22:44,070 --> 00:22:47,080\nAnd then when I'm done, if I know I'm not\ngoing to need it anymore, we can always\n\n497\n00:22:47,080 --> 00:22:53,340\njust change that to the old Disable-VM\nresource metering and that turns off.\n\n498\n00:22:53,340 --> 00:22:55,620\nReally simple, easy to do, you turn it on,\n\n499\n00:22:55,620 --> 00:22:59,760\nit's low impact, we get the counters we\nneed and we can make smarter decisions.\n\n500\n00:22:59,760 --> 00:23:02,176\nA lot of people aren't familiar with\nresource metering because it's only\n\n501\n00:23:02,176 --> 00:23:04,030\navailable in the PowerShell,\nit's kinda tucked away.\n\n502\n00:23:04,030 --> 00:23:05,930\nIt's super easy to do.\n\n503\n00:23:05,930 --> 00:23:07,475\nThe commands are easy to remember.\n\n504\n00:23:07,475 --> 00:23:08,320\n>> Absolutly.\n\n505\n00:23:08,320 --> 00:23:10,305\n>> I will be honest with you I\nnormally forget the commands.\n\n506\n00:23:10,305 --> 00:23:11,450\n>> [LAUGH].\n>> I've got them written down.\n\n507\n00:23:11,450 --> 00:23:12,700\nThere's a paper over here.\n\n508\n00:23:12,700 --> 00:23:16,290\nIf you forget what I usually do,\nwhich is what I do in real life,\n\n509\n00:23:16,290 --> 00:23:22,910\nI do a quick get-command, and\nthen I always do *metering*, like that.\n\n510\n00:23:22,910 --> 00:23:24,780\nAnd that gets me the commands real quick.\n\n511\n00:23:24,780 --> 00:23:27,913\nBut the risk there is,\ndo you see Measure-VM?\n\n512\n00:23:27,913 --> 00:23:30,410\nMeasure-VM's the outlier, right?\n\n513\n00:23:30,410 --> 00:23:32,314\nI don't know why they\ndidn't stick with the same.\n\n514\n00:23:32,314 --> 00:23:34,060\n>> [LAUGH]\n>> They couldn't just do get-VM\n\n515\n00:23:34,060 --> 00:23:34,990\nresource metering?\n\n516\n00:23:34,990 --> 00:23:38,870\nBut it's Measure-VM and so\nI do free that one from time to time.\n\n517\n00:23:40,010 --> 00:23:40,760\nAll right.\n\n518\n00:23:40,760 --> 00:23:42,330\nSo pretty neat stuff.\n\n519\n00:23:42,330 --> 00:23:43,990\nBuilt right into the PowerShell.\n\n520\n00:23:43,990 --> 00:23:47,780\nWorks great if you have a Core install.\n\n521\n00:23:47,780 --> 00:23:49,270\nRight.\nYou jump into the PowerShell and\n\n522\n00:23:49,270 --> 00:23:49,990\nyou run these commands, or\n\n523\n00:23:49,990 --> 00:23:53,090\nif you're remoting into it like that,\ngreat way to get the information.\n\n524\n00:23:53,090 --> 00:23:56,646\nDoesn't require the SCOM infrastructure,\nor SCVMM, or\n\n525\n00:23:56,646 --> 00:23:59,920\nanything crazy like that,\nreal easy to do like that.\n\n526\n00:23:59,920 --> 00:24:02,800\nAll right, well Mike this is a pretty good\nspot for us to pause and take a break.\n\n527\n00:24:02,800 --> 00:24:04,398\nSo let's take a breather here.\n\n528\n00:24:04,398 --> 00:24:07,471\nWhen we get back we've got dynamic\noptimization to talk about.\n\n529\n00:24:07,471 --> 00:24:08,531\nWhich is always a fun one.\n\n530\n00:24:08,531 --> 00:24:09,780\nStay tuned.\n\n531\n00:24:09,780 --> 00:24:10,538\nWe'll be back in just a few.\n\n532\n00:24:10,538 --> 00:24:17,457\n[MUSIC]\n\n533\n00:24:17,457 --> 00:24:18,061\nAll right.\n\n534\n00:24:18,061 --> 00:24:19,220\nWelcome back everybody.\n\n535\n00:24:20,440 --> 00:24:25,080\nIn this segment we're gonna take a minute\nto talk about resource optimization.\n\n536\n00:24:25,080 --> 00:24:30,560\nResource optimization is where we\nbasically try and get, the most effort,\n\n537\n00:24:30,560 --> 00:24:35,460\nor the biggest benefit out of the hardware\nresources that we have, right.\n\n538\n00:24:35,460 --> 00:24:39,660\nIn the old model, when you had\napplications run directly on top of metal\n\n539\n00:24:39,660 --> 00:24:45,680\nservers, right, you might have a quad\ncore processor and ten gigs of RAM.\n\n540\n00:24:45,680 --> 00:24:48,430\nBut you're only using three gigs of RAM,\nand maybe 20% of the CPU, and\n\n541\n00:24:48,430 --> 00:24:51,025\nthe rest of the space gets wasted, right?\n\n542\n00:24:51,025 --> 00:24:54,964\nIt's not an optimal example of\ngood resources usage, right?\n\n543\n00:24:54,964 --> 00:24:57,809\nBut with Hyper-V, we can.\n\n544\n00:24:57,809 --> 00:25:01,660\nWe can pack in our VM's, and\nwe can get 100% of that CPU,\n\n545\n00:25:01,660 --> 00:25:03,148\nwe can use 100% of that memory.\n\n546\n00:25:03,148 --> 00:25:07,650\nBut the trade-off is,\nif you're using 100% of the resource and\n\n547\n00:25:07,650 --> 00:25:10,080\nyou need a little bit more, what happens?\n\n548\n00:25:10,080 --> 00:25:10,770\n>> It's not available.\n\n549\n00:25:10,770 --> 00:25:12,040\nYou don't have it to give it.\n\n550\n00:25:12,040 --> 00:25:12,565\n>> Yeap.\n>> [LAUGH]\n\n551\n00:25:12,565 --> 00:25:14,295\n>> And you end up worse off than you would\n\n552\n00:25:14,295 --> 00:25:16,270\nhave been when you were wasting resources,\nsure,\n\n553\n00:25:16,270 --> 00:25:17,720\nyou're getting your money's worth, right?\n\n554\n00:25:17,720 --> 00:25:20,260\nYou're getting the best bang for\nyour buck out of that server.\n\n555\n00:25:20,260 --> 00:25:22,120\nBut, your performance starts to degrade.\n\n556\n00:25:23,600 --> 00:25:27,300\nTo help prevent that, there's two\napproaches we can take, all right?\n\n557\n00:25:27,300 --> 00:25:31,930\nApproach number one,\nis we can manually each of our VM's and\n\n558\n00:25:31,930 --> 00:25:36,830\ntheir resources and move VM's around\nto properly allocate our resources\n\n559\n00:25:36,830 --> 00:25:40,070\nacross our infrastructure, and make sure\nthat everything's nice and in balance.\n\n560\n00:25:40,070 --> 00:25:40,850\n>> That's my favorite way.\n\n561\n00:25:40,850 --> 00:25:42,130\nI love it when you say, manually.\n\n562\n00:25:42,130 --> 00:25:44,650\nThat means I'm gonna have to\ndo this everyday, all day,\n\n563\n00:25:44,650 --> 00:25:45,760\nfor the rest of my life.\n\n564\n00:25:45,760 --> 00:25:46,630\nI like that.\n\n565\n00:25:46,630 --> 00:25:47,875\n>> Job security-\n>> [LAUGH]\n\n566\n00:25:47,875 --> 00:25:48,386\n>> I suppose.\n\n567\n00:25:48,386 --> 00:25:50,751\nIt would be a very boring job,\nbut it would work.\n\n568\n00:25:50,751 --> 00:25:53,950\nYou can do that,\nif you have just a handful of servers.\n\n569\n00:25:53,950 --> 00:25:56,360\nBut if your dealing with\nthousands of Hyper-V hosts, and\n\n570\n00:25:56,360 --> 00:25:58,180\ntens of thousands of VM's-\n>> [LAUGH]\n\n571\n00:25:58,180 --> 00:25:59,480\n>> That's just not possible.\n\n572\n00:25:59,480 --> 00:26:02,190\nEven for a large team,\nit's just not possible.\n\n573\n00:26:02,190 --> 00:26:04,120\nWe need something to be\nable to help us out.\n\n574\n00:26:04,120 --> 00:26:07,000\nAnd in Hyper-V we have\ndynamic optimization.\n\n575\n00:26:07,000 --> 00:26:09,300\nWe also have something called\nresource optimization, and\n\n576\n00:26:09,300 --> 00:26:10,340\nthe two are very very similar.\n\n577\n00:26:11,430 --> 00:26:13,860\nThe original one was\nresource optimization.\n\n578\n00:26:13,860 --> 00:26:16,280\nIn the system center\nvirtual machine manager,\n\n579\n00:26:16,280 --> 00:26:18,560\nwe had something called the pro tips.\n\n580\n00:26:18,560 --> 00:26:23,310\nAnd the pro tips, they were,\na really neat idea at the time.\n\n581\n00:26:23,310 --> 00:26:25,120\nWhen you deploy a Hyper-V server.\n\n582\n00:26:26,260 --> 00:26:30,040\nI mean not a Hyper-V server,\nwhen you deploy a VM guest on a Hyper-V.\n\n583\n00:26:30,040 --> 00:26:32,870\nIn the System Center Virtual Machine\nManager you get what are called placement\n\n584\n00:26:32,870 --> 00:26:33,570\nsuggestions.\n\n585\n00:26:33,570 --> 00:26:35,650\nRight it'll do a recommended placement and\n\n586\n00:26:35,650 --> 00:26:38,660\ntell you which physical host\nbest matches your needs.\n\n587\n00:26:38,660 --> 00:26:43,560\nAnd by default that's really just looking\nat how many vCPUs you've assigned and\n\n588\n00:26:43,560 --> 00:26:45,310\nhow much RAM you've assigned.\n\n589\n00:26:45,310 --> 00:26:45,810\nAnd that's it.\n\n590\n00:26:45,810 --> 00:26:48,120\nIt's not the most scientific of decision.\n\n591\n00:26:48,120 --> 00:26:50,000\nIt's not very accurate.\n\n592\n00:26:50,000 --> 00:26:54,165\nWell, with resource optimization,\nwe can enable the pro tips.\n\n593\n00:26:54,165 --> 00:26:57,660\nI'm trying to remember what\nthe P stands for, off hand.\n\n594\n00:26:57,660 --> 00:26:58,880\nIt's just something I\nshould've put in my note-\n\n595\n00:26:58,880 --> 00:26:59,620\n>> Performance and resource-\n\n596\n00:26:59,620 --> 00:27:00,670\n>> Thank you, Michael.\n\n597\n00:27:00,670 --> 00:27:02,480\nPerformance and resource optimization.\n\n598\n00:27:02,480 --> 00:27:04,260\nThat's what PRO stands for.\n\n599\n00:27:04,260 --> 00:27:06,910\nIt's a function of Escom.\n\n600\n00:27:06,910 --> 00:27:09,550\nEscom can look at all of\nyour Hyper-V hosts and\n\n601\n00:27:09,550 --> 00:27:13,210\nlook at the VM's that are on them and\nactually measure, what's going on, right?\n\n602\n00:27:13,210 --> 00:27:15,300\nAnd get at something far more accurate.\n\n603\n00:27:15,300 --> 00:27:17,010\nNot just how many VCPUs you have,\n\n604\n00:27:17,010 --> 00:27:20,070\nbut what percentage of those\nVCPUs you're actually using.\n\n605\n00:27:20,070 --> 00:27:22,200\nHow much memory you're using,\nhow much disk IO you're generating,\n\n606\n00:27:22,200 --> 00:27:25,760\nhow much network bandwidth your consuming,\nit looks at all of that.\n\n607\n00:27:25,760 --> 00:27:29,290\nAnd it can share that\ninformation with SCVMM, and\n\n608\n00:27:29,290 --> 00:27:31,200\nnow I see VMM make some\nreally good decisions.\n\n609\n00:27:32,710 --> 00:27:37,230\nNow, we covered resource optimization\nin our automated remediation episode,\n\n610\n00:27:37,230 --> 00:27:39,120\nwhich you guys should have seen already.\n\n611\n00:27:39,120 --> 00:27:43,755\nIf you haven't, jump back about eight\nepisodes or so here in the 74-14 show, and\n\n612\n00:27:43,755 --> 00:27:46,695\nthere was an episode called\nautomated remediation, and\n\n613\n00:27:46,695 --> 00:27:50,086\nwe showed how to set that up,\nhow those pro tips work.\n\n614\n00:27:51,875 --> 00:27:56,440\nBut they all required you to have\nSystem Center Virtual Machine Manager, and\n\n615\n00:27:56,440 --> 00:27:57,155\nS-COM's.\n\n616\n00:27:57,155 --> 00:27:59,195\nSystems Center Operations Manager.\n\n617\n00:27:59,195 --> 00:28:00,880\nWhat if you don't have S-COM?\n\n618\n00:28:00,880 --> 00:28:05,150\nRight, well another thing we\nshowed in that same episode\n\n619\n00:28:05,150 --> 00:28:07,240\nwas dynamic optimization.\n\n620\n00:28:07,240 --> 00:28:11,350\nDynamic optimization does the same that\nresource optimization does except,\n\n621\n00:28:11,350 --> 00:28:13,850\nit doesn't require S-COM.\n\n622\n00:28:13,850 --> 00:28:16,230\nSCVM can handle it all by itself.\n\n623\n00:28:16,230 --> 00:28:17,640\nAnd it's pretty cool, you just turn it on,\n\n624\n00:28:17,640 --> 00:28:21,220\nyou tell it to run, and by default,\nI think, it monitors every 15 seconds, or\n\n625\n00:28:21,220 --> 00:28:24,570\n15 minutes, every 15 minutes or\nso, looks at your servers.\n\n626\n00:28:24,570 --> 00:28:28,630\nAnd, we'll move the guests around from\nhost to host to balance things out and\n\n627\n00:28:28,630 --> 00:28:29,800\nkeep it nice and easy.\n\n628\n00:28:30,940 --> 00:28:33,400\nWe've got the manual method for doing it,\n\n629\n00:28:33,400 --> 00:28:38,320\nwe've got the resource optimization\nmethod for balancing by using S-COM, and\n\n630\n00:28:38,320 --> 00:28:43,210\nwe've got dynamic optimization for\ndoing it from within SCVMM itself.\n\n631\n00:28:43,210 --> 00:28:45,030\nIt's a couple of different choices there.\n\n632\n00:28:45,030 --> 00:28:45,860\n>> Oh it's fantastic.\n\n633\n00:28:45,860 --> 00:28:48,380\nAnd you can control down-standing and\ndefaults like ten minutes.\n\n634\n00:28:48,380 --> 00:28:51,620\nAnd you control how often\nit looks at that and\n\n635\n00:28:51,620 --> 00:28:54,760\nstarts moving machines around,\nand how aggressive it is as well.\n\n636\n00:28:54,760 --> 00:28:56,520\nCuz you don't want it moving back and\n\n637\n00:28:56,520 --> 00:29:00,190\nforth constantly just cuz one thing\nchanges on one server temporarily.\n\n638\n00:29:00,190 --> 00:29:04,170\nIt starts moving machines around so\nwe can control how often it's looking, and\n\n639\n00:29:04,170 --> 00:29:07,185\nhow aggressive it is with\nmoving those machines around.\n\n640\n00:29:07,185 --> 00:29:10,535\n>> All right, so if you wanna see\nthat in action, see how those work,\n\n641\n00:29:10,535 --> 00:29:13,555\ndefinitely jump back and\ncatch that automated remediation episode.\n\n642\n00:29:14,585 --> 00:29:17,845\nThat exam objective,\nthere's some overlap between them, and so\n\n643\n00:29:17,845 --> 00:29:19,475\nthis is one of those\nareas where they overlap.\n\n644\n00:29:19,475 --> 00:29:20,545\nWe've kind of already covered it.\n\n645\n00:29:22,010 --> 00:29:26,080\nSomething we didn't cover though was,\nwell, I guess we sort of covered a little\n\n646\n00:29:26,080 --> 00:29:30,080\nbit, but whatever,\nis once your virtual machines are up and\n\n647\n00:29:30,080 --> 00:29:33,130\nrunning, right, they're up,\nthey're running, they're happy.\n\n648\n00:29:33,130 --> 00:29:36,210\nYou set up a WSUS server or\nyou're doing your Windows updates and\n\n649\n00:29:36,210 --> 00:29:42,330\nthings are going great, what about\nvirtual machines that are powered off?\n\n650\n00:29:42,330 --> 00:29:44,260\nOr that are stored in the library,\n\n651\n00:29:44,260 --> 00:29:47,040\nthat don't actually have a virtual\nmachine definition file anymore?\n\n652\n00:29:47,040 --> 00:29:49,390\nOr ones that are turned into a template?\n\n653\n00:29:50,720 --> 00:29:52,820\nThose guys aren't really running.\n\n654\n00:29:52,820 --> 00:29:56,500\nIf a new Windows update comes out,\ndoes our template get it?\n\n655\n00:29:56,500 --> 00:29:57,340\nNo.\n\n656\n00:29:57,340 --> 00:30:01,020\nAnd if I start deploying more\nVM's with that template.\n\n657\n00:30:01,020 --> 00:30:03,040\nThose VM's are missing that update, too.\n\n658\n00:30:03,040 --> 00:30:04,700\nAnd so when that VM first spins up,\n\n659\n00:30:04,700 --> 00:30:07,260\nit's already got updates that\nare outstanding that I need to apply.\n\n660\n00:30:07,260 --> 00:30:07,840\nIf I'm in a hurry,\n\n661\n00:30:07,840 --> 00:30:12,360\nif I need a web server right now, well,\nI'm not gonna be able to do that.\n\n662\n00:30:12,360 --> 00:30:14,630\nI'll deploy the web server\nfrom my template, and\n\n663\n00:30:14,630 --> 00:30:17,790\nthen I'll wait ten, 20 minutes while\nWindows Update does its thing,\n\n664\n00:30:17,790 --> 00:30:20,850\ngets it up to date, and\nthen I can push it into production.\n\n665\n00:30:20,850 --> 00:30:21,830\nNow, maybe that's fine.\n\n666\n00:30:21,830 --> 00:30:24,030\nIf you're never in a hurry to\nget a server then that's fine.\n\n667\n00:30:24,030 --> 00:30:25,350\nYou don't worry about it.\n\n668\n00:30:25,350 --> 00:30:30,120\nBut if you're service profile inside the\nSystem Center Virtual Machine Manager and\n\n669\n00:30:30,120 --> 00:30:33,860\nyou want to be able to auto-scale web\nfront ends or something like that, right?\n\n670\n00:30:33,860 --> 00:30:35,620\nI've got five web front ends right now.\n\n671\n00:30:35,620 --> 00:30:39,270\nBut if the servers get busy,\nI wanna spin up another web from it.\n\n672\n00:30:39,270 --> 00:30:41,050\nYou want that to happen\nas quickly as possible.\n\n673\n00:30:41,050 --> 00:30:42,015\nYour servers are busy now.\n\n674\n00:30:42,015 --> 00:30:44,322\n>> [LAUGH]\n>> You don't want to take ten minutes to\n\n675\n00:30:44,322 --> 00:30:45,475\nspin up one front-end.\n\n676\n00:30:45,475 --> 00:30:48,925\nAnd you don't wanna go through the hassle\nof trying to monitor it to say all right,\n\n677\n00:30:48,925 --> 00:30:50,210\ndid it get all the updates?\n\n678\n00:30:50,210 --> 00:30:52,460\nCuz I don't wanna move into production\nuntil it gets all the updates.\n\n679\n00:30:52,460 --> 00:30:53,520\nThat becomes really challenging.\n\n680\n00:30:54,980 --> 00:31:00,340\nInstead, we can do offline\nservicing of our virtual machines.\n\n681\n00:31:00,340 --> 00:31:02,900\nIf a a virtual machine is up and\nrunning, just use that WSUS.\n\n682\n00:31:02,900 --> 00:31:05,270\nJust do the normal update procedure.\n\n683\n00:31:05,270 --> 00:31:09,330\nBut if it's offline, if it's stored\nin a library, if it's a template.\n\n684\n00:31:09,330 --> 00:31:13,700\nYou can do offline servicing and\nwhen a new update comes out.\n\n685\n00:31:13,700 --> 00:31:18,640\nYou can push it right into\nthe virtual hard disk files,\n\n686\n00:31:18,640 --> 00:31:20,100\nwithout actually powering the VM on.\n\n687\n00:31:20,100 --> 00:31:21,430\nIt's pretty cool stuff.\n\n688\n00:31:21,430 --> 00:31:22,700\n>> Oh, it's very cool.\n\n689\n00:31:22,700 --> 00:31:24,880\n>> Now, there's several\nways to go about it, right,\n\n690\n00:31:24,880 --> 00:31:28,310\nas with anything in Microsoft land,\nthey give you more than one tool.\n\n691\n00:31:28,310 --> 00:31:32,280\nOne of them we should definitely be\nfamiliar with DISM utility, right Mike?\n\n692\n00:31:32,280 --> 00:31:33,070\n>> Yeah, what is that?\n\n693\n00:31:33,070 --> 00:31:35,630\nThe Deployment Image and\nServicing Management tool, and\n\n694\n00:31:35,630 --> 00:31:37,980\nallows me to mount up an image.\n\n695\n00:31:37,980 --> 00:31:41,490\nApply updates and things like\nthat to it and then unmount it.\n\n696\n00:31:41,490 --> 00:31:44,190\nWithout actually deploying an image out or\nanything like that.\n\n697\n00:31:44,190 --> 00:31:47,960\nOr deploying that VHD out and\nactually having it in use.\n\n698\n00:31:47,960 --> 00:31:49,869\nSo very handy.\nA little bit manual though.\n\n699\n00:31:49,869 --> 00:31:54,242\n>> Yeah, it's manual but its biggest\nbenefit, saving grace, whatever,\n\n700\n00:31:54,242 --> 00:31:56,680\nis that it's just built into Windows.\n\n701\n00:31:56,680 --> 00:31:59,892\nIt's there, so it doesn't matter if you\nhave a bunch of crazy infrastructure or\n\n702\n00:31:59,892 --> 00:32:01,230\nnot, the DISM utility is there.\n\n703\n00:32:01,230 --> 00:32:04,970\nAnd you can use it to mount and\nmodify WIM files for installation images.\n\n704\n00:32:04,970 --> 00:32:08,846\nBut you can also use it to mount and\nmodify Virtual hard disks and\n\n705\n00:32:08,846 --> 00:32:14,130\njust slipstream updates into them, and\nit changes drivers inside your images.\n\n706\n00:32:14,130 --> 00:32:19,390\nSo a very powerful utility there,\nbut it is a manual process.\n\n707\n00:32:19,390 --> 00:32:22,080\nNow Microsoft did try to\nmake things easy for us, and\n\n708\n00:32:22,080 --> 00:32:27,450\nthey created a utility called\nthe Virtual Machine Servicing Tool.\n\n709\n00:32:27,450 --> 00:32:28,730\nThe VMST.\n\n710\n00:32:28,730 --> 00:32:33,240\nNow, the virtual machine servicing tool\nmight show up on the exam, It might not.\n\n711\n00:32:33,240 --> 00:32:35,260\nIt used to be a guarantee\nthat it would be on the exam.\n\n712\n00:32:35,260 --> 00:32:39,640\nBut these days, what happened is when\nWindows Server 2012 R2 came out,\n\n713\n00:32:39,640 --> 00:32:46,630\nthey updated Hyper-V and\nthey never went back and updated the VMSs.\n\n714\n00:32:46,630 --> 00:32:47,770\nYeah, VMST.\n\n715\n00:32:47,770 --> 00:32:54,670\nSo, the VMST works for Windows server\n2012, but not for Windows server 2012r2.\n\n716\n00:32:54,670 --> 00:32:57,730\nAnd, the exam has been updated for R2,\nthat's why I say it's not likely to show\n\n717\n00:32:57,730 --> 00:33:01,840\nup on the exam, but in real life land,\nyou'll hear about people still using\n\n718\n00:33:01,840 --> 00:33:06,740\nthe VMS T, the V-M-S-T,\nif I can get this right.\n\n719\n00:33:06,740 --> 00:33:08,470\nVirtual Machine Servicing Tool.\n\n720\n00:33:08,470 --> 00:33:10,320\nit's very similar to DISM.\n\n721\n00:33:10,320 --> 00:33:13,640\nIt's designed to mount virtual\nmachines and slip stream updates.\n\n722\n00:33:13,640 --> 00:33:16,010\nIt's got some little\nautomatons inside of there.\n\n723\n00:33:16,010 --> 00:33:18,980\nI'll post a link to it in the show notes.\n\n724\n00:33:18,980 --> 00:33:21,470\nBut let me just bring\nup the web page here.\n\n725\n00:33:21,470 --> 00:33:23,530\nLet's see, virtual machine servicing.\n\n726\n00:33:23,530 --> 00:33:26,890\nTool, and we'll pull that up here.\n\n727\n00:33:26,890 --> 00:33:31,410\nOh, I don't want the download,\nI want the page describing, here we go.\n\n728\n00:33:31,410 --> 00:33:33,330\nSo it's a Solution Accelerator\nfrom Microsoft,\n\n729\n00:33:33,330 --> 00:33:35,220\nthe Virtual Machine Servicing Tool, and\n\n730\n00:33:35,220 --> 00:33:37,070\nthey give you a little\ninformation about it.\n\n731\n00:33:37,070 --> 00:33:38,722\nNotice it was published in 2010.\n\n732\n00:33:38,722 --> 00:33:41,500\n>> [LAUGH]\n>> It was published almost five years ago\n\n733\n00:33:41,500 --> 00:33:44,660\nnow, and they haven't done an update for\n2012 R2.\n\n734\n00:33:44,660 --> 00:33:46,560\nIt does work with regular 2012.\n\n735\n00:33:46,560 --> 00:33:48,410\nBut not R2, so be careful with that.\n\n736\n00:33:48,410 --> 00:33:52,920\nBut it's a neat utility, it does its job.\n\n737\n00:33:52,920 --> 00:33:53,620\nIt's probably just,\n\n738\n00:33:53,620 --> 00:33:56,130\nI don't know if they're not going to\nrelease a new version for it or what.\n\n739\n00:33:56,130 --> 00:33:57,650\n>> See, I don't know.\nI don't know if they're waiting or\n\n740\n00:33:57,650 --> 00:34:00,700\nif they wanna force you to go into SCCM or\nsomething like that.\n\n741\n00:34:00,700 --> 00:34:03,100\nThey're not going to give\nyou this free tool anymore.\n\n742\n00:34:03,100 --> 00:34:05,850\nYeah and I'm glad you brought that up,\nMike, cuz that is one of the other\n\n743\n00:34:05,850 --> 00:34:10,510\nresources that we have, the SCCM,\nthe System Center Configuration Manager.\n\n744\n00:34:10,510 --> 00:34:14,100\nNow the SCCM is a very complex product.\n\n745\n00:34:14,100 --> 00:34:16,170\nIt has a lot of\ninfrastructural requirements,\n\n746\n00:34:16,170 --> 00:34:18,660\nit's not something a small or\nmedium business is gonna use.\n\n747\n00:34:18,660 --> 00:34:21,970\nBut a larger enterprise business can\ndeploy the System Center Configuration\n\n748\n00:34:21,970 --> 00:34:27,050\nManager and let me tell you,\nit can automate everything.\n\n749\n00:34:27,050 --> 00:34:30,780\nYou can point it to those library files,\nand you can point it to the WSUS server.\n\n750\n00:34:30,780 --> 00:34:32,280\nWhen a new update comes out,\n\n751\n00:34:32,280 --> 00:34:34,990\nSCCM can just automatically stream\nthat update right in there.\n\n752\n00:34:34,990 --> 00:34:38,010\nYou don't even worry about it, and\nnow that image is being updated.\n\n753\n00:34:38,010 --> 00:34:39,300\n>> Yeah, even machines that are offline.\n\n754\n00:34:39,300 --> 00:34:41,970\nIt'll pull them online, apply the update,\nand then close them down and\n\n755\n00:34:41,970 --> 00:34:43,800\nput them back in your library,\nall on its own.\n\n756\n00:34:43,800 --> 00:34:46,040\n>> Yeah, it's pretty impressive stuff.\n\n757\n00:34:46,040 --> 00:34:48,740\nNow, if that sounds complex, it is.\n\n758\n00:34:48,740 --> 00:34:51,870\nAnd if this software automates it,\nobviously, this software is complex, too.\n\n759\n00:34:51,870 --> 00:34:56,860\nSCCM does require some good knowledge,\nand practices for deploying that.\n\n760\n00:34:56,860 --> 00:34:59,210\nOn the exam, they're not gonna\nexpect you to set up SCCM Server,\n\n761\n00:34:59,210 --> 00:35:02,410\nthere's actually whole separate\ncertification just for that.\n\n762\n00:35:02,410 --> 00:35:07,330\nBut be aware, that if you want a fully\nautomated update solution in place for\n\n763\n00:35:07,330 --> 00:35:12,710\nyour virtual machines, even your offline\nones, SCCM is really the way to go.\n\n764\n00:35:12,710 --> 00:35:15,350\nYou combine that with a WSUS server and\nit can do some really good stuff.\n\n765\n00:35:16,700 --> 00:35:19,740\nSo as far as keeping those\nmachines up to date,\n\n766\n00:35:19,740 --> 00:35:22,580\nkeeping them healthy,\nthose are our options.\n\n767\n00:35:22,580 --> 00:35:23,780\nThere's other options out there too.\n\n768\n00:35:23,780 --> 00:35:27,020\nThere's some third party utilities like\nVeeam that do a good job with that.\n\n769\n00:35:27,020 --> 00:35:28,490\nBut for the most part,\n\n770\n00:35:28,490 --> 00:35:33,490\nwhat you're going to see on the exam,\nthe DISM utility and SCCM.\n\n771\n00:35:33,490 --> 00:35:37,120\nDISM, somewhat manual, very script-heavy.\n\n772\n00:35:37,120 --> 00:35:39,620\nSCCM, we can automate things.\n\n773\n00:35:39,620 --> 00:35:42,410\nSet it and forget it, right?\n\n774\n00:35:42,410 --> 00:35:44,270\nJust let it run.\n\n775\n00:35:44,270 --> 00:35:47,170\nAll right, and the only other thing that\nwe really need to cover on this one.\n\n776\n00:35:47,170 --> 00:35:48,420\nOh wait,\nlet me make sure I'm not lying here.\n\n777\n00:35:48,420 --> 00:35:48,945\nYep.\n>> [LAUGH]\n\n778\n00:35:48,945 --> 00:35:50,355\n>> The only other thing we really need to\n\n779\n00:35:50,355 --> 00:35:54,100\ncover on this one is the System Center\nData Protection Manager, the STDPM.\n\n780\n00:35:54,100 --> 00:35:55,300\nAll right.\n\n781\n00:35:55,300 --> 00:35:58,330\nAnd I know we talk about\nthe STDPM in some other episodes,\n\n782\n00:35:58,330 --> 00:36:00,380\nwe've kind of already seen it in action.\n\n783\n00:36:00,380 --> 00:36:03,770\nBut I wanna cover it again because it's\nimportant that you understand, for\n\n784\n00:36:03,770 --> 00:36:08,460\nyour design, that the SCDPM\nhandle virtual machine backups\n\n785\n00:36:08,460 --> 00:36:11,950\na little bit differently than it\ndoes our physical machine backups.\n\n786\n00:36:13,160 --> 00:36:16,430\nNow, if you've never worked with\na System Center Data Protection Manager,\n\n787\n00:36:16,430 --> 00:36:20,940\nall it is is essentialized\nbackup solution from Microsoft.\n\n788\n00:36:20,940 --> 00:36:23,440\nYou've got things like\nthe Windows server backup.\n\n789\n00:36:23,440 --> 00:36:25,020\nThat's built into Windows.\n\n790\n00:36:25,020 --> 00:36:26,680\nIt's not installed by default anymore.\n\n791\n00:36:26,680 --> 00:36:27,810\nBut you can install it on there.\n\n792\n00:36:27,810 --> 00:36:31,350\nIt's part of the Windows\nserver management tools.\n\n793\n00:36:31,350 --> 00:36:33,360\nIt's a feature that we can add.\n\n794\n00:36:33,360 --> 00:36:34,380\nIt is a feature, isn't it?\n\n795\n00:36:34,380 --> 00:36:36,030\n>> It is a feature, yes.\n\n796\n00:36:36,030 --> 00:36:36,530\n>> [LAUGH]\n>> [LAUGH]\n\n797\n00:36:36,530 --> 00:36:38,220\n>> So it's a feature that we can add.\n\n798\n00:36:38,220 --> 00:36:39,360\nAnd we can back up the server.\n\n799\n00:36:39,360 --> 00:36:40,180\nWorks great.\n\n800\n00:36:40,180 --> 00:36:41,590\nAnd you can use it today.\n\n801\n00:36:41,590 --> 00:36:42,560\nMicrosoft fully supports it.\n\n802\n00:36:42,560 --> 00:36:43,710\nIt really does, it works great.\n\n803\n00:36:43,710 --> 00:36:44,820\n>> It does what it's supposed to do.\n\n804\n00:36:44,820 --> 00:36:46,180\nIt backs up that server and\n\n805\n00:36:46,180 --> 00:36:48,740\nI've got some different choices for\nthe types of backups I'm gonna make.\n\n806\n00:36:48,740 --> 00:36:52,170\nI've got different choices as far as\nwhere I want to store that back up.\n\n807\n00:36:52,170 --> 00:36:55,140\nReally the big problem I think with\nthe Windows Server Backup is it's not\n\n808\n00:36:55,140 --> 00:36:56,810\na centralized tool.\n\n809\n00:36:56,810 --> 00:36:58,290\nRight?\nYou have to install it on each and\n\n810\n00:36:58,290 --> 00:36:59,000\nevery machine.\n\n811\n00:36:59,000 --> 00:37:01,830\nAnd you're only backing\nup that one machine.\n\n812\n00:37:01,830 --> 00:37:03,770\nSo there are some cases\nwhere that comes in handy.\n\n813\n00:37:03,770 --> 00:37:07,070\nI need a quick backup of this server so\nI can restore it in a VM for\n\n814\n00:37:07,070 --> 00:37:07,900\ntesting purposes.\n\n815\n00:37:07,900 --> 00:37:09,130\nOr something like that.\n\n816\n00:37:09,130 --> 00:37:10,800\nI might use that too.\n\n817\n00:37:10,800 --> 00:37:12,130\nThat's what it's there for.\n\n818\n00:37:12,130 --> 00:37:16,260\nBut when we're talking about our\nenterprise, it's not scalable.\n\n819\n00:37:16,260 --> 00:37:18,390\nIt doesn't scale with our\nenterprise as we grow.\n\n820\n00:37:18,390 --> 00:37:20,930\nSo we really want a more\ncentralized solution and\n\n821\n00:37:20,930 --> 00:37:24,070\nthat's where our data protection\nmanager is going to come into play.\n\n822\n00:37:24,070 --> 00:37:27,880\n>> Yeah, it's one of those things if\nyou don't have centralized management\n\n823\n00:37:27,880 --> 00:37:28,780\n>> How do you know your backups were\n\n824\n00:37:28,780 --> 00:37:29,710\nsuccessful last night?\n\n825\n00:37:29,710 --> 00:37:31,300\nHow do you know if your backups failed?\n\n826\n00:37:31,300 --> 00:37:33,430\nHow do you know how\nlong your backups took?\n\n827\n00:37:33,430 --> 00:37:37,190\nYou have to go and\nlook at each individual server, right, and\n\n828\n00:37:37,190 --> 00:37:38,390\nthat's where it doesn't scale well.\n\n829\n00:37:38,390 --> 00:37:41,470\nIf you have two servers, you have five\nservers, you could probably swing it.\n\n830\n00:37:41,470 --> 00:37:44,830\nBut if you have 500 servers,\nit's not even an option, right.\n\n831\n00:37:44,830 --> 00:37:48,240\nAnd that's where you have a lot of people\nthat end up running things like arc serve,\n\n832\n00:37:48,240 --> 00:37:51,130\nsemantic backup exec, comvault, right.\n\n833\n00:37:51,130 --> 00:37:54,330\nThere's all sorts of different ones that\nare out there for backing up systems and\n\n834\n00:37:54,330 --> 00:37:55,520\nthey work great.\n\n835\n00:37:55,520 --> 00:37:58,120\nMicrosoft has the system center\ndata protection manager.\n\n836\n00:37:58,120 --> 00:38:00,240\nAnd SCDPM does some really cool stuff.\n\n837\n00:38:00,240 --> 00:38:00,740\nAll right.\n\n838\n00:38:02,090 --> 00:38:06,540\nMainly, it's able to leverage volume\nshadow copy and the fact that it's\n\n839\n00:38:06,540 --> 00:38:09,410\na Microsoft product you can leverage all\nof the advanced functionality of Hyper-V\n\n840\n00:38:09,410 --> 00:38:13,010\nand the Windows server to give us\na pretty rock solid back up system.\n\n841\n00:38:14,530 --> 00:38:18,320\nWhen you set up the SCDPM it has\nthese little agents that you install.\n\n842\n00:38:18,320 --> 00:38:19,800\nLittle software agent.\n\n843\n00:38:19,800 --> 00:38:22,440\nAnd you install the agent on your system,\nand\n\n844\n00:38:22,440 --> 00:38:26,330\nnow SCDPM will be able to see that system,\nand back it up, and restore.\n\n845\n00:38:26,330 --> 00:38:27,920\nIt does it's little recovery.\n\n846\n00:38:27,920 --> 00:38:32,060\nNow one of the challenges that we have is\nthat the more data you have to backup,\n\n847\n00:38:32,060 --> 00:38:34,260\nthe longer a backup takes.\n\n848\n00:38:34,260 --> 00:38:38,460\nAnd that can make it where your backups\nexceed whatever your backup window is.\n\n849\n00:38:38,460 --> 00:38:41,560\nMaybe my company is really\nbusy from 8 AM to 5 PM.\n\n850\n00:38:41,560 --> 00:38:44,540\nRight, so I start my backups at 6 PM.\n\n851\n00:38:44,540 --> 00:38:45,690\nAnd they run over night.\n\n852\n00:38:45,690 --> 00:38:48,720\nWell as long as they're done by 8 AM the\nnext morning my customers never impacted.\n\n853\n00:38:49,780 --> 00:38:54,220\nBut if my dataset is so large by the time\n8 AM rolls around the backups are still\n\n854\n00:38:54,220 --> 00:38:58,570\nrunning now I get performance degradation\nwhile these backups are running and\n\n855\n00:38:58,570 --> 00:39:00,400\nmy end users are affected.\n\n856\n00:39:00,400 --> 00:39:04,670\nSo what the SPDM does is it says\nokay the first time I run a backup\n\n857\n00:39:04,670 --> 00:39:07,670\nI'm gonna take a full backup\nof the whole system, right.\n\n858\n00:39:07,670 --> 00:39:09,010\nI'm gonna back up that entire machine.\n\n859\n00:39:10,040 --> 00:39:14,790\nAnd then from then on I'm gonna\nstart doing incremental backups.\n\n860\n00:39:14,790 --> 00:39:18,490\nAnd, I'm gonna run those all the time,\nright.\n\n861\n00:39:18,490 --> 00:39:21,540\nIt creates a continual\nbackup on the server.\n\n862\n00:39:21,540 --> 00:39:24,410\nJust backing up the changes is\nwhat makes it go really fast.\n\n863\n00:39:24,410 --> 00:39:27,580\nAnd we never have to repeat\nthat large backup window.\n\n864\n00:39:27,580 --> 00:39:30,660\nNow for the exam you're gonna be expected\nto design these backup solutions, so\n\n865\n00:39:30,660 --> 00:39:33,810\nit's important that you understand\nthe difference between a full backup,\n\n866\n00:39:33,810 --> 00:39:36,990\na differential backup,\nan incremental backup, and a copy.\n\n867\n00:39:36,990 --> 00:39:38,750\nSo let's talk about those, Mike.\n\n868\n00:39:38,750 --> 00:39:40,940\nSo when I say a full backup,\nwhat am I talking about?\n\n869\n00:39:40,940 --> 00:39:42,860\n>> We're talking about\nbacking up everything, right?\n\n870\n00:39:42,860 --> 00:39:44,590\nThings that have changed,\nthings that haven't changed.\n\n871\n00:39:44,590 --> 00:39:47,870\nI'm taking a complete copy\nof that entire dataset\n\n872\n00:39:47,870 --> 00:39:52,630\nwhich is gonna be the longest\nof those backup procedures.\n\n873\n00:39:52,630 --> 00:39:53,470\nYou have to start with that.\n\n874\n00:39:53,470 --> 00:39:55,152\nIf you want to do an incremental or\n\n875\n00:39:55,152 --> 00:39:58,950\na differential I can only do one of those\nif I already have that full backup.\n\n876\n00:39:58,950 --> 00:39:59,961\nSo that's gotta be where we start.\n\n877\n00:39:59,961 --> 00:40:00,741\n>> Mm-hm.\n\n878\n00:40:00,741 --> 00:40:01,701\n>> Right.\n\n879\n00:40:01,701 --> 00:40:04,121\n>> Now after that,\nif you've already got a full backup.\n\n880\n00:40:04,121 --> 00:40:06,601\nYou can load a full back\nup every day if you want.\n\n881\n00:40:06,601 --> 00:40:10,890\nMaybe you have a really small set of\ndata and so you just do a full back up.\n\n882\n00:40:10,890 --> 00:40:13,470\nif you have a failure you just\nrestore that full back up, and\n\n883\n00:40:13,470 --> 00:40:14,390\nyou're back in business, right?\n\n884\n00:40:14,390 --> 00:40:15,600\nMakes life easy.\n\n885\n00:40:15,600 --> 00:40:17,610\nThat works for small data sets.\n\n886\n00:40:17,610 --> 00:40:21,180\nBut a large data set you can't\ndo a full back up every time so\n\n887\n00:40:21,180 --> 00:40:25,390\ninstead you might choose to back up,\nJust the changes, all right?\n\n888\n00:40:25,390 --> 00:40:27,120\nI've already got a full backup.\n\n889\n00:40:27,120 --> 00:40:30,870\nThe backup tomorrow or the next day or the\nnext day really just needs to have what's\n\n890\n00:40:30,870 --> 00:40:34,200\nchanged since that full backup, and\nthat'll be a much smaller data set,\n\n891\n00:40:34,200 --> 00:40:36,440\nallowing the backups to\nhappen more quickly.\n\n892\n00:40:36,440 --> 00:40:39,770\nNow, when we do just changes,\nwe got two choices.\n\n893\n00:40:39,770 --> 00:40:42,720\nThere's a differential, and\nthere's an incremental.\n\n894\n00:40:42,720 --> 00:40:45,330\nThey're both useful and\nthey both have their place.\n\n895\n00:40:45,330 --> 00:40:51,030\nA differential backup will backup every\nchange since the last full backup.\n\n896\n00:40:52,080 --> 00:40:57,570\nSo if I do a full backup on Monday and\nthen I run a differential on Tuesday.\n\n897\n00:40:57,570 --> 00:41:00,270\nThat differential will contain\nall the changes that were made\n\n898\n00:41:00,270 --> 00:41:01,160\nbetween Monday and Tuesday.\n\n899\n00:41:02,400 --> 00:41:05,690\nIf I run another differential\nbackup on Wednesday.\n\n900\n00:41:05,690 --> 00:41:08,630\nIt'll contain the changes from Monday,\nTuesday, and Wednesday.\n\n901\n00:41:08,630 --> 00:41:12,680\nAnd if I run them on Thursday, it'll\ncontain the changes from Monday, Tuesday,\n\n902\n00:41:12,680 --> 00:41:13,840\nWednesday, Thursday.\n\n903\n00:41:13,840 --> 00:41:18,210\nWith each day it's getting bigger and\nbigger and bigger.\n\n904\n00:41:18,210 --> 00:41:19,200\nAll right?\n\n905\n00:41:19,200 --> 00:41:22,320\nOn a positive side,\nif I ever have a failure I just go and\n\n906\n00:41:22,320 --> 00:41:27,920\nI get my full backup and I get the newest\ndifferential backup that I have.\n\n907\n00:41:27,920 --> 00:41:31,940\nAnd that's it, I just need those two files\nand I can restore and I'm back up to date.\n\n908\n00:41:31,940 --> 00:41:32,900\nAll right.\n\n909\n00:41:32,900 --> 00:41:35,040\nBut it got bigger and bigger and\nbigger as the week went on.\n\n910\n00:41:35,040 --> 00:41:37,130\nMaybe by Friday the data set is so large,\n\n911\n00:41:37,130 --> 00:41:38,920\nthe differential is just\ntaking too long to run.\n\n912\n00:41:38,920 --> 00:41:39,830\nSo what can I do there?\n\n913\n00:41:39,830 --> 00:41:43,100\n>> Well we can switch over to\nan incremental back up instead; because\n\n914\n00:41:43,100 --> 00:41:46,650\nthe thing we're talking about or the thing\nwe should focus on is the archive bit.\n\n915\n00:41:46,650 --> 00:41:48,620\nAll files have an archive bit.\n\n916\n00:41:48,620 --> 00:41:51,480\nAnd when you make a change to a file,\nit turns that bit on.\n\n917\n00:41:51,480 --> 00:41:52,730\nSets it to a one.\n\n918\n00:41:52,730 --> 00:41:55,960\nWhen you back that file up,\nit resets it back to a zero.\n\n919\n00:41:55,960 --> 00:41:59,320\nAnd what's happening with that\ndifferential backup is it's not\n\n920\n00:41:59,320 --> 00:42:03,430\nresetting that archive bit, which is why\nthat change on Tuesday that was part of\n\n921\n00:42:03,430 --> 00:42:07,420\nthe differential backup Is backed up\nagain on Wednesday with our second or\n\n922\n00:42:07,420 --> 00:42:10,090\nthird differential because it's\nnot resetting that archived bit.\n\n923\n00:42:10,090 --> 00:42:13,610\nAnd its onset is going to get longer and\nlonger and by Friday\n\n924\n00:42:13,610 --> 00:42:17,360\nthat differential backup is taking\nalmost as long as my full backup might.\n\n925\n00:42:17,360 --> 00:42:21,970\nWhere as if we go to what's called an\nincremental backup an incremental backup\n\n926\n00:42:21,970 --> 00:42:24,750\nclears the archive bit\nwhen it does the backup.\n\n927\n00:42:24,750 --> 00:42:30,130\nSo if you did that full backup on Monday,\nTuesday's incremental is going to include\n\n928\n00:42:30,130 --> 00:42:34,530\nall the changes from Monday and Tuesday,\nbut it's going to clear the archive bit.\n\n929\n00:42:34,530 --> 00:42:37,010\nAnd then when I do\nan incremental on Wednesday,\n\n930\n00:42:37,010 --> 00:42:41,300\nit's really just the changes since\nthe last incremental backup.\n\n931\n00:42:41,300 --> 00:42:43,970\nSo I'm going to have much\nsmaller data sets backing up.\n\n932\n00:42:43,970 --> 00:42:46,780\nIt's just, if we're doing\nincremental backups every night\n\n933\n00:42:46,780 --> 00:42:49,370\nthen it's just 24 hours worth of changes.\n\n934\n00:42:49,370 --> 00:42:53,080\nSome days you might have more changes\nthan others, so it might vary in size.\n\n935\n00:42:53,080 --> 00:42:55,282\nBut it's never going to continue to grow,\n\n936\n00:42:55,282 --> 00:42:58,630\nbecause the changes have\noccurred over the week.\n\n937\n00:42:58,630 --> 00:43:03,100\nThe downside is, though, because each one\nof those incrementals does not include\n\n938\n00:43:03,100 --> 00:43:06,160\nall the changes all the way\nback to the full backup\n\n939\n00:43:06,160 --> 00:43:09,500\nwhen I go to restore I've got\nto restore the full backup and\n\n940\n00:43:09,500 --> 00:43:13,426\nthen I've got to restore each one of\nthose incremental backups in order.\n\n941\n00:43:13,426 --> 00:43:17,320\nSo I've got to go through Monday's full\nbackup, then Tuesday's incremental, then\n\n942\n00:43:17,320 --> 00:43:20,990\nWednesday's incremental, then Thursday's\nincremental to get me back to that point.\n\n943\n00:43:22,710 --> 00:43:25,970\n>> So that's a pretty important\none to understand because\n\n944\n00:43:25,970 --> 00:43:28,410\nthat's what SCDPM is doing, right?\n\n945\n00:43:28,410 --> 00:43:31,060\nIt does that first full back\nup of an entire machine.\n\n946\n00:43:31,060 --> 00:43:33,650\nAnd then from then on it's\njust doing incrementals.\n\n947\n00:43:33,650 --> 00:43:35,160\nIncrementals are suppose to be small.\n\n948\n00:43:35,160 --> 00:43:39,220\nIt's just the amount of data that's\nchanged, since the last incremental.\n\n949\n00:43:39,220 --> 00:43:42,300\nAnd it runs incrementals by default,\nevery 15 minutes.\n\n950\n00:43:42,300 --> 00:43:44,310\nYou can adjust it but\nthe default is every 15 minutes.\n\n951\n00:43:44,310 --> 00:43:47,420\nSo when I use the system center\ndata protection manager,\n\n952\n00:43:47,420 --> 00:43:50,300\nit takes a full snapshot of a server.\n\n953\n00:43:50,300 --> 00:43:54,130\nAnd then every 15 minutes it gathers\nthe changes and transmits it back.\n\n954\n00:43:54,130 --> 00:43:56,880\nSince the window is so small,\nthe changes are small,\n\n955\n00:43:56,880 --> 00:43:59,570\nwe don't get a huge impact on that,\nall right?\n\n956\n00:43:59,570 --> 00:44:04,550\nBut if I ever have a failure, the SCDPM is\ngoing to give me backups every 15 minutes.\n\n957\n00:44:04,550 --> 00:44:06,610\nMy recovery point objective.\n\n958\n00:44:06,610 --> 00:44:09,190\nMy RPO would be 15 minutes.\n\n959\n00:44:09,190 --> 00:44:12,960\nWhenever I have a failure, I'll never\nlose more than 15 minutes of data.\n\n960\n00:44:12,960 --> 00:44:15,680\nAnd that's pretty good for most people.\n\n961\n00:44:15,680 --> 00:44:18,860\nNow if you're Amazon.com, how much\ndata could you lose in 15 minutes?\n\n962\n00:44:18,860 --> 00:44:21,330\n>> 15 minutes is a going to\ncost you a few bucks, right?\n\n963\n00:44:21,330 --> 00:44:25,510\n>> I read somewhere once that they do\na million dollars in sales per hour.\n\n964\n00:44:25,510 --> 00:44:27,560\nSo for\nthem to be down 50 minutes is $250,000.\n\n965\n00:44:27,560 --> 00:44:29,300\n>> Yeah that's a quarter\nof a million bucks, yeah.\n\n966\n00:44:29,300 --> 00:44:32,310\n>> So to put it in dollars and\ncents like that it can be very expensive.\n\n967\n00:44:32,310 --> 00:44:34,620\nAnd in that scenario it\nmight not be good enough.\n\n968\n00:44:34,620 --> 00:44:37,270\nSTDPM might not be good enough you\nmight need something else in place.\n\n969\n00:44:37,270 --> 00:44:41,280\nAnd they do database transaction backups\nthat's how they take care of that, but for\n\n970\n00:44:41,280 --> 00:44:47,130\nmost of us if you were to lose 15 minutes\nof work, that's not a big deal, right?\n\n971\n00:44:47,130 --> 00:44:50,780\nI could recreate 15 minutes worth of\nshow notes, that's not a big deal.\n\n972\n00:44:50,780 --> 00:44:54,380\nI could re-reply to 15 minutes\nworth of email or something.\n\n973\n00:44:54,380 --> 00:44:55,750\nThat's not a huge deal.\n\n974\n00:44:55,750 --> 00:44:58,740\nSo, that gives us a really\nrock solid environment.\n\n975\n00:44:58,740 --> 00:45:01,900\nAnd the SDPM just keeps running and\nrunning and running forever.\n\n976\n00:45:01,900 --> 00:45:05,440\nBacking up that data and\nwe don't have to worry about mixing and\n\n977\n00:45:05,440 --> 00:45:06,750\nmatching all this different data sets.\n\n978\n00:45:06,750 --> 00:45:11,190\nThe SEDPM cameras restore it back.\n\n979\n00:45:11,190 --> 00:45:13,020\n>> And because it's doing everything,\n\n980\n00:45:13,020 --> 00:45:16,780\nit knows what back ups it needs to\nrestore in the event of a failure.\n\n981\n00:45:16,780 --> 00:45:18,610\nSo I don't have to go break out tapes and\ngo, okay,\n\n982\n00:45:18,610 --> 00:45:20,570\nwhere's Tuesday's incremental backup,\n\n983\n00:45:20,570 --> 00:45:23,360\nwhere's Wednesday's incremental backup,\nit's going to take care of that for me.\n\n984\n00:45:24,380 --> 00:45:26,960\n>> Now the best way to deploy the SCDPM\n\n985\n00:45:26,960 --> 00:45:30,440\nis to have it installed on a server that's\nconnected to some kind of storage array.\n\n986\n00:45:30,440 --> 00:45:32,020\nIt's going to need a lot of storage,\nright?\n\n987\n00:45:32,020 --> 00:45:32,810\nIt's going to backup to V.\n\n988\n00:45:32,810 --> 00:45:35,530\nAlso needs lot of network cards to\nbe able to handle the bandwidth.\n\n989\n00:45:35,530 --> 00:45:37,180\nBut it is going to need some storage.\n\n990\n00:45:37,180 --> 00:45:40,680\nBut that storage can actually\nbe a few different things.\n\n991\n00:45:40,680 --> 00:45:43,930\nThe SCDPM can backup to hard drives,\nright?\n\n992\n00:45:43,930 --> 00:45:45,220\nThat's what of us'll do.\n\n993\n00:45:45,220 --> 00:45:47,310\nIt can backup to tape,\nif you're still old school, right?\n\n994\n00:45:47,310 --> 00:45:49,520\nA lot of people like tape because\nyou can encrypt them, and\n\n995\n00:45:49,520 --> 00:45:51,240\nyou can take them offsite really easy.\n\n996\n00:45:51,240 --> 00:45:52,680\nSo there is still tape.\n\n997\n00:45:52,680 --> 00:45:56,540\nWe can also backup to\nanother SCDPM server.\n\n998\n00:45:56,540 --> 00:45:59,400\nI might have an SCDPM server in\nmy production environment and\n\n999\n00:45:59,400 --> 00:46:01,620\nanother one in my disaster recovery site.\n\n1000\n00:46:01,620 --> 00:46:04,950\nAnd that way if my production\nenvironment is destroyed,\n\n1001\n00:46:04,950 --> 00:46:08,870\nall my backups are already at the disaster\nrecovery site ready to be restored.\n\n1002\n00:46:08,870 --> 00:46:09,430\n>> That's nice.\n\n1003\n00:46:09,430 --> 00:46:11,040\n>> So, that's a cool one.\n\n1004\n00:46:11,040 --> 00:46:14,010\nAnd you can even send it to azure, right.\n\n1005\n00:46:14,010 --> 00:46:15,870\nSo instead of having\na disaster recovery site,\n\n1006\n00:46:15,870 --> 00:46:19,830\nmy SEDPM can be replicating to windows or\nMicrosoft azure so\n\n1007\n00:46:19,830 --> 00:46:23,180\nit's up there in the cloud already;\nwaiting to be brought back up.\n\n1008\n00:46:23,180 --> 00:46:25,750\nSo a lot of flexibility\nthere with the SCDPM.\n\n1009\n00:46:25,750 --> 00:46:28,320\n>> That's nice because that basically\nbecomes my offsite storage, right?\n\n1010\n00:46:28,320 --> 00:46:33,270\nIf my data's lost, my data center is lost,\nI know I've got an offsite copy\n\n1011\n00:46:33,270 --> 00:46:35,450\nof that backup just sitting\nout there in the cloud.\n\n1012\n00:46:35,450 --> 00:46:38,330\nEasily accessible from wherever\nmy recovery site might be.\n\n1013\n00:46:39,380 --> 00:46:41,800\n>> Now, we've talked about\nthe SCDPM in other episodes.\n\n1014\n00:46:41,800 --> 00:46:45,150\nWe've shown it in action, but\nwhat's really important for\n\n1015\n00:46:45,150 --> 00:46:48,800\nthis episode is to understand it\nfrom a virtual machine perspective.\n\n1016\n00:46:48,800 --> 00:46:53,120\nMicrosoft's recommendation is\nthat you deploy the SCDPM agent.\n\n1017\n00:46:53,120 --> 00:46:57,730\nOn all of your hyper-V hosts, and\nthat's really important on a cluster, and\n\n1018\n00:46:57,730 --> 00:46:59,540\nthat's one of the challenges we have,\nis the VM.\n\n1019\n00:46:59,540 --> 00:47:03,790\nIt could be getting moved from\nhardware node to hardware node\n\n1020\n00:47:03,790 --> 00:47:05,580\nif you're doing dynamic optimization or\n\n1021\n00:47:05,580 --> 00:47:09,150\nif you're just moving things around on\nyour own, if a cluster has a node failure\n\n1022\n00:47:09,150 --> 00:47:14,010\nyou don't necessarily know what node\nthe VM is going to be running on.\n\n1023\n00:47:14,010 --> 00:47:17,500\nAnd with storage migration you don't even\nnecessarily know where the virtual hard\n\n1024\n00:47:17,500 --> 00:47:19,140\ndrive is going to be, right?\n\n1025\n00:47:19,140 --> 00:47:21,740\nThat could move while the VM is online.\n\n1026\n00:47:21,740 --> 00:47:25,820\nThese are things that the virtual\nmachine itself doesn't know either.\n\n1027\n00:47:25,820 --> 00:47:27,480\nRight the underlying hypervisor and\n\n1028\n00:47:27,480 --> 00:47:30,480\nthe failover cluster underneath\nit hides all that from the VM.\n\n1029\n00:47:30,480 --> 00:47:34,670\nThe VM doesn't know when it jumps from one\nhost to another, it doesn't know that.\n\n1030\n00:47:34,670 --> 00:47:38,990\nSo Microsoft's recommendation\nis not to deploy the SCDPM agent\n\n1031\n00:47:38,990 --> 00:47:43,380\nto the virtual machine itself, but\ninstead to deploy it to the hosts, right?\n\n1032\n00:47:43,380 --> 00:47:46,160\nEspecially if you have\na cluster all the nodes,\n\n1033\n00:47:46,160 --> 00:47:49,420\nthe hosts in that cluster you\nneed to run the DPM agent on it.\n\n1034\n00:47:49,420 --> 00:47:53,140\nAnd when you go to back up a virtual\nmachine instead of backing up the VM\n\n1035\n00:47:53,140 --> 00:47:57,840\ndirectly through the guest OS you\nback up the VM through the host.\n\n1036\n00:47:57,840 --> 00:47:59,490\nLet me show you what I mean.\n\n1037\n00:47:59,490 --> 00:48:04,630\nSo I've got, let's see buried away\nhere somewhere I've got a SDPM server.\n\n1038\n00:48:04,630 --> 00:48:06,862\nWhich is not this one,\nlet's jump over to this guy.\n\n1039\n00:48:06,862 --> 00:48:08,030\nThere we go.\n\n1040\n00:48:08,030 --> 00:48:12,269\nSo here's an SCDPM server and\nI'm in my DPM administrator and\n\n1041\n00:48:12,269 --> 00:48:18,048\nI can see it's picking up some different\nhosts that are out there and so on.\n\n1042\n00:48:18,048 --> 00:48:21,970\nIf I wanna back up my virtual machines,\nwhat I can do is I can create\n\n1043\n00:48:21,970 --> 00:48:25,920\na protection group, that's how the STDPM\nworks with these protection groups, and\n\n1044\n00:48:25,920 --> 00:48:28,430\nI can tell the virtual\nmachines I wanna back up.\n\n1045\n00:48:28,430 --> 00:48:32,790\nNow, step one, I'd need to deploy\nmy agent out to the various hosts.\n\n1046\n00:48:32,790 --> 00:48:35,170\nAnd so you've got that\nInstall button right up here.\n\n1047\n00:48:35,170 --> 00:48:40,510\nAnd you can choose to install the agent,\nand you can push it out to your hosts.\n\n1048\n00:48:40,510 --> 00:48:43,540\nOr if the agent was already a part\nof your installation image,\n\n1049\n00:48:43,540 --> 00:48:47,180\nlike you might have built that in, you can\nattach agents that are already out there.\n\n1050\n00:48:47,180 --> 00:48:48,540\nSo you can go and connect them.\n\n1051\n00:48:48,540 --> 00:48:53,010\nBut you would install that agent and you'd\npush it out to your cluster nodes and\n\n1052\n00:48:53,010 --> 00:48:53,800\nyour Hyper-V hosts.\n\n1053\n00:48:54,940 --> 00:48:56,010\nOnce that's there, and\n\n1054\n00:48:56,010 --> 00:49:00,130\nI've already deployed the agents to these\nguys, then we set up a protection group.\n\n1055\n00:49:00,130 --> 00:49:02,810\nSo I'm gonna go under protection here and\nI'll just do a new protection group.\n\n1056\n00:49:03,870 --> 00:49:06,250\nAnd I'm gonna call this\none My Virtual Machines.\n\n1057\n00:49:06,250 --> 00:49:07,830\nThat's right, so\nthis'll be my virtual machine group.\n\n1058\n00:49:08,900 --> 00:49:11,030\nNow, it's asking what I'm\ngonna be backing up, and\n\n1059\n00:49:11,030 --> 00:49:14,160\nit's telling me I can create a projection\ngroup for servers or for clients, and for\n\n1060\n00:49:14,160 --> 00:49:17,710\nclients we're really talking\nabout work stations and desktops.\n\n1061\n00:49:17,710 --> 00:49:20,740\nWith a server,\nyou expect it to always be online.\n\n1062\n00:49:20,740 --> 00:49:23,800\nWith desktops and laptops,\nthey might be powered off.\n\n1063\n00:49:23,800 --> 00:49:25,130\nThe laptop might be out of the office.\n\n1064\n00:49:25,130 --> 00:49:28,810\nI don't need to freak out over something\nlike that, versus if a server's offline,\n\n1065\n00:49:28,810 --> 00:49:29,980\nI kinda need to freak out, right?\n\n1066\n00:49:29,980 --> 00:49:31,090\nThat's our big difference there.\n\n1067\n00:49:31,090 --> 00:49:33,410\nI'll go with servers.\n\n1068\n00:49:33,410 --> 00:49:35,340\nAll right, and\nthen I pick my group members.\n\n1069\n00:49:35,340 --> 00:49:36,790\nWho's gonna be in this group?\n\n1070\n00:49:36,790 --> 00:49:38,580\nNow, here's where things are different.\n\n1071\n00:49:38,580 --> 00:49:42,780\nIf I've deployed the agent on the VM\nguest, I'll see the guests here, and\n\n1072\n00:49:42,780 --> 00:49:44,530\nI can back them up, all right?\n\n1073\n00:49:44,530 --> 00:49:46,880\nBut they're not gonna be able to take\nadvantage of all the stuff that Hyper-V\n\n1074\n00:49:46,880 --> 00:49:47,680\ndoes under the hood.\n\n1075\n00:49:47,680 --> 00:49:51,320\nThey're not necessarily gonna know what\nhost they're on, and, what can happen is,\n\n1076\n00:49:51,320 --> 00:49:56,730\nI can be backing up the virtual hard drive\nfor a VM by reaching out to the wrong host\n\n1077\n00:49:56,730 --> 00:50:01,270\nand that wrong host will actually redirect\nmy Disk I/O over to the right host.\n\n1078\n00:50:01,270 --> 00:50:03,910\nAnd now, I'm impacting performance\non more than one host,\n\n1079\n00:50:03,910 --> 00:50:07,520\nthat's the kind of thing that happens\nwhen we back up the guest directly.\n\n1080\n00:50:07,520 --> 00:50:10,420\nBut, instead, I can go through here and\nI can find the host.\n\n1081\n00:50:10,420 --> 00:50:12,010\nI think I've got somebody on SCOM01.\n\n1082\n00:50:12,010 --> 00:50:16,350\nAnd if I expand out a Hyper-V host,\n\n1083\n00:50:16,350 --> 00:50:19,620\nit will come in here and it will show\nme the guests that are on there.\n\n1084\n00:50:19,620 --> 00:50:22,020\nAnd let me get more than one of\nthese guys pulling at the same time.\n\n1085\n00:50:22,020 --> 00:50:24,235\nJust so\nI can make sure I get the right one.\n\n1086\n00:50:24,235 --> 00:50:26,000\n>> [LAUGH]\n>> But it will pull them.\n\n1087\n00:50:26,000 --> 00:50:27,945\nAnd you will see this\nfolder called Hyper-V.\n\n1088\n00:50:29,260 --> 00:50:32,220\nAnd if you look inside\nthis hyper v folder.\n\n1089\n00:50:32,220 --> 00:50:35,550\nYou should see your VMs, and\nsee how I see host component right there?\n\n1090\n00:50:35,550 --> 00:50:40,600\nThere's no VMs on this one, but if I go up\nhere to this one, SCCM 01, expand it out.\n\n1091\n00:50:40,600 --> 00:50:43,360\nOh, actually, I just got host\ncomponent on that one, too.\n\n1092\n00:50:43,360 --> 00:50:44,450\nWhere are my VMs today?\n\n1093\n00:50:44,450 --> 00:50:46,010\nI gotta find my VMs.\n\n1094\n00:50:46,010 --> 00:50:46,910\n>> [LAUGH]\n>> This is\n\n1095\n00:50:46,910 --> 00:50:47,961\nthe problem with dynamic optimization.\n\n1096\n00:50:47,961 --> 00:50:48,760\n>> [LAUGH] I know it.\n>> You don't know where\n\n1097\n00:50:48,760 --> 00:50:49,455\nthe hell things are.\n\n1098\n00:50:49,455 --> 00:50:53,520\n[LAUGH] So somewhere around here,\nI'll find some VMs.\n\n1099\n00:50:53,520 --> 00:50:55,260\nBut you'll see them listed in there and\n\n1100\n00:50:55,260 --> 00:50:58,730\nthey'll actually show up\nas being a virtual machine.\n\n1101\n00:50:58,730 --> 00:51:01,950\nSo we just kind of have to\nexperiment here until we find one.\n\n1102\n00:51:01,950 --> 00:51:03,070\nHere's one!\nAll right.\n\n1103\n00:51:03,070 --> 00:51:04,440\nThis is a great example right here.\n\n1104\n00:51:04,440 --> 00:51:05,690\nThis one's offline.\n\n1105\n00:51:05,690 --> 00:51:08,240\nSo here's a VM called Windows Server 2012.\n\n1106\n00:51:08,240 --> 00:51:11,430\nAnd see how it says\noffline/Windows Server 2012?\n\n1107\n00:51:11,430 --> 00:51:14,790\nIt's letting me know that VM\nis not powered on right now.\n\n1108\n00:51:14,790 --> 00:51:18,740\nBut it sees it right there, and\nI could try and drill in to it.\n\n1109\n00:51:18,740 --> 00:51:22,080\nBut really, we want to do it bare metal,\nwe want to get the whole thing.\n\n1110\n00:51:22,080 --> 00:51:23,490\nI can check that off.\n\n1111\n00:51:23,490 --> 00:51:27,510\nAnd what's important here is\nthat seeing that virtual machine\n\n1112\n00:51:27,510 --> 00:51:30,320\nfrom the perspective of the host.\n\n1113\n00:51:30,320 --> 00:51:31,890\nAnd if I have a cluster.\n\n1114\n00:51:31,890 --> 00:51:32,850\nWhere's my cluster?\n\n1115\n00:51:32,850 --> 00:51:34,730\nMaybe that's probably\nwhere all my VM's are.\n\n1116\n00:51:34,730 --> 00:51:38,490\nNotice when I went into like SCCM01,\nit doesn't show any VM's there.\n\n1117\n00:51:38,490 --> 00:51:41,400\nWell there are VM's there they're\njust part of the cluster.\n\n1118\n00:51:41,400 --> 00:51:45,790\nAnd so if I go up here to my cluster,\nI start to see, here we go.\n\n1119\n00:51:45,790 --> 00:51:46,380\nVM01, VM02, VM03.\n\n1120\n00:51:46,380 --> 00:51:49,040\nThose are my virtual machines, right?\n\n1121\n00:51:49,040 --> 00:51:53,190\nAnd they're showing here as cluster\nresources, which means be careful.\n\n1122\n00:51:53,190 --> 00:51:56,140\nIt's not necessarily on this node or\nthat node.\n\n1123\n00:51:56,140 --> 00:51:59,970\nIt's part of a cluster, so when you go to\nback it up, look to the cluster config.\n\n1124\n00:51:59,970 --> 00:52:03,930\nFigure out where the heck that thing is\nright now, and then go and get it and\n\n1125\n00:52:03,930 --> 00:52:08,700\nback it up from the correct Server\nto get the best optimal performance.\n\n1126\n00:52:08,700 --> 00:52:12,200\nAnd so I can come in here and\nI can take these VM resources, or\n\n1127\n00:52:12,200 --> 00:52:15,780\nwhatever, and I can check them off and\nif I expand all that,\n\n1128\n00:52:15,780 --> 00:52:19,190\nI'll see there's the VM as part of that\nresource, that's what I wanna get.\n\n1129\n00:52:19,190 --> 00:52:21,380\nYou can get the whole thing if you want.\n\n1130\n00:52:21,380 --> 00:52:24,870\nBut we can go through and flag those and\nthese guys are offline also.\n\n1131\n00:52:24,870 --> 00:52:27,420\nBut I'm just adding them each to my list.\n\n1132\n00:52:27,420 --> 00:52:28,620\nI'll get them punched in here.\n\n1133\n00:52:30,210 --> 00:52:33,660\nI guess VMO2 must be,\nit must not have any VHB's.\n\n1134\n00:52:33,660 --> 00:52:36,770\nThat one might just be like\nwhere I define the machine but\n\n1135\n00:52:36,770 --> 00:52:39,030\ndidn't attach anything to it.\n\n1136\n00:52:39,030 --> 00:52:41,430\nSo anyhow, so and\nover here on the right side I see VM's.\n\n1137\n00:52:42,680 --> 00:52:47,780\nWindows server 2012, VMO1, VMO3 and\nI can see what they're attached to.\n\n1138\n00:52:47,780 --> 00:52:52,390\nThe first one is running local on\nthat SCDPM Hyper-V server, but\n\n1139\n00:52:52,390 --> 00:52:55,190\nthese other two are running\nas part of that cluster.\n\n1140\n00:52:55,190 --> 00:52:56,640\nAnd so now it's got them flagged.\n\n1141\n00:52:56,640 --> 00:52:59,100\nAnd when I move forward,\nit's gonna back them up.\n\n1142\n00:52:59,100 --> 00:53:00,360\nI'm gonna back them up to disk.\n\n1143\n00:53:00,360 --> 00:53:03,610\nBut you could back them up to other\nlocations if you had them defined.\n\n1144\n00:53:03,610 --> 00:53:07,780\nIncluding like online protection,\nthat's our connection to Microsoft Azure,\n\n1145\n00:53:07,780 --> 00:53:10,950\nwhich I haven't connected this,\nso I don't have it.\n\n1146\n00:53:10,950 --> 00:53:12,940\nI should give it a better name\nthan protection group, right?\n\n1147\n00:53:12,940 --> 00:53:18,420\nI'll just call this my virtual machines\nand we can pick our short term goal.\n\n1148\n00:53:18,420 --> 00:53:21,110\nI'm gonna say I want at\nleast five days of backups.\n\n1149\n00:53:21,110 --> 00:53:25,110\nIt'll keep as many days as it can\nuntil it runs out of space, right?\n\n1150\n00:53:25,110 --> 00:53:26,400\nBut I'll say I want at least five.\n\n1151\n00:53:26,400 --> 00:53:30,030\nAnd we're doing express full\nbackup every day at 6pm.\n\n1152\n00:53:30,030 --> 00:53:34,544\nNow it is doing incremental\nbackups every day, right?\n\n1153\n00:53:34,544 --> 00:53:39,870\nBut at 6 pm everyday it will\ntake the incrementals and\n\n1154\n00:53:39,870 --> 00:53:44,550\nit will roll them into the full backup\nto turn that full back up more current.\n\n1155\n00:53:44,550 --> 00:53:49,250\nSo the problem is if I run out of\nspace and I have 500 incrementals and\n\n1156\n00:53:49,250 --> 00:53:51,970\nnow I've got to delete some old stuff\nto make some room for the new, well,\n\n1157\n00:53:51,970 --> 00:53:55,370\neach of those incrementals contains their\nown data, I can't just delete them.\n\n1158\n00:53:55,370 --> 00:53:59,580\nSo, it's gotta combine those, it's gotta\nmerge them in to the full backup every so\n\n1159\n00:53:59,580 --> 00:54:01,890\noften, we're saying do\nit every day at six.\n\n1160\n00:54:01,890 --> 00:54:07,910\nThat will create a lot of\nDisk I/O on the SEDPM server.\n\n1161\n00:54:07,910 --> 00:54:11,230\nIt actually doesn't do anything on\nthe client side, it doesn't impact them.\n\n1162\n00:54:11,230 --> 00:54:14,750\nSo picking 6pm you might say, oh, I've got\na lot of customers on the servers then.\n\n1163\n00:54:14,750 --> 00:54:18,255\nWell it's actually okay, because\nthe customers are on the actual server.\n\n1164\n00:54:18,255 --> 00:54:20,505\nThey're not in the SEDPM box.\n\n1165\n00:54:20,505 --> 00:54:25,125\nBut my SEDPM can gt overwhelmed, so I set\nthese times so I might have more than\n\n1166\n00:54:25,125 --> 00:54:28,725\none protection group, and I can do that\nmerge at different times to release.\n\n1167\n00:54:28,725 --> 00:54:29,605\n>> Stagger them out a little bit.\n\n1168\n00:54:29,605 --> 00:54:31,935\n>> Yep, definitely an important thing.\n\n1169\n00:54:31,935 --> 00:54:33,315\nSo we've got that set.\n\n1170\n00:54:33,315 --> 00:54:35,165\nWe've got what disc it's gonna back up to.\n\n1171\n00:54:35,165 --> 00:54:37,895\nI've only got one so\nI don't have a lot of choices here, but\n\n1172\n00:54:37,895 --> 00:54:41,109\nwe'll see where it's gonna back up,\nhow much space it thinks it's gonna take.\n\n1173\n00:54:43,290 --> 00:54:46,170\nThen we can choose how it's\ngonna create that first replica.\n\n1174\n00:54:46,170 --> 00:54:50,510\nNow the first time we do the back up,\nit could be a pretty big back up, right?\n\n1175\n00:54:50,510 --> 00:54:52,480\nIt's gonna impact\nperformance on the network.\n\n1176\n00:54:52,480 --> 00:54:54,530\nSo, I can schedule that to happen later.\n\n1177\n00:54:54,530 --> 00:54:56,030\nIt's probably a good idea.\n\n1178\n00:54:56,030 --> 00:54:58,080\nOr you can actually do it manually.\n\n1179\n00:54:58,080 --> 00:55:03,060\nYou can go and use Windows Server Backup\nto backup to a USB key, or\n\n1180\n00:55:03,060 --> 00:55:04,880\nUSB drive, or whatever.\n\n1181\n00:55:04,880 --> 00:55:08,400\nYou can then bring that over to your\nSCDPM server and plug it in and\n\n1182\n00:55:08,400 --> 00:55:11,160\nchoose manual and it'll pick that and\nbring it in that way.\n\n1183\n00:55:11,160 --> 00:55:14,840\nThat's a far smaller impact\non your systems to do that.\n\n1184\n00:55:14,840 --> 00:55:16,440\nWe just need this the first time.\n\n1185\n00:55:16,440 --> 00:55:18,210\nBecause every time after this,\nthis just changes.\n\n1186\n00:55:18,210 --> 00:55:19,770\nAnd they can run over\nthe network just fine.\n\n1187\n00:55:22,880 --> 00:55:26,020\nThen if we want a consistency check,\nwhich is always a good idea.\n\n1188\n00:55:26,020 --> 00:55:29,060\nIf there's some bad rites on the hard\ndrive that are being grabbed.\n\n1189\n00:55:29,060 --> 00:55:33,170\nBecause when it uses volume shadow\ncopy it does a snapshot right now.\n\n1190\n00:55:33,170 --> 00:55:36,430\nThere might be some partial rites\nthat are a part of that snapshot.\n\n1191\n00:55:36,430 --> 00:55:37,790\nAnd so\nyou need to be able to detect those.\n\n1192\n00:55:37,790 --> 00:55:39,760\nThat's what the consistency check does.\n\n1193\n00:55:39,760 --> 00:55:40,890\nSo we can set that.\n\n1194\n00:55:40,890 --> 00:55:44,200\nIt also checks the backups that we've\nalready make to make sure they're still in\n\n1195\n00:55:44,200 --> 00:55:47,200\ntact because corruption can occur there,\nit's a good idea to do this.\n\n1196\n00:55:47,200 --> 00:55:50,100\n>> Yeah you don't want to find out your\nbackup is corrupt when you need to restore\n\n1197\n00:55:50,100 --> 00:55:51,870\nyour backup, it's never good.\n\n1198\n00:55:51,870 --> 00:55:54,758\n>> Yep, absolutely.\nAnd you can set that up to be on a manual\n\n1199\n00:55:54,758 --> 00:55:58,271\nschedule or\njust when an inconsistency is detected.\n\n1200\n00:55:58,271 --> 00:56:01,122\nI'm actually gonna turn that off on mine\nbecause I know my consistency's gonna\n\n1201\n00:56:01,122 --> 00:56:01,640\nbe a problem.\n\n1202\n00:56:01,640 --> 00:56:02,260\nAll right.\n\n1203\n00:56:02,260 --> 00:56:03,222\nSo then I just get my summary,\n\n1204\n00:56:03,222 --> 00:56:05,120\nit tells me what we're doing and\nwe'll create the group.\n\n1205\n00:56:05,120 --> 00:56:08,636\nNow when we create the group,\nit's gonna run that first backup for me,\n\n1206\n00:56:08,636 --> 00:56:09,580\nthat full back up.\n\n1207\n00:56:09,580 --> 00:56:12,230\nIt's gonna backup those three VMs,\nall that data.\n\n1208\n00:56:12,230 --> 00:56:14,160\nIt's gonna take a while.\n\n1209\n00:56:14,160 --> 00:56:18,670\nBut now if I ever have a failure I'll be\nable to go to this data protection group,\n\n1210\n00:56:18,670 --> 00:56:22,000\nand back here in my navigation.\n\n1211\n00:56:22,000 --> 00:56:23,380\nSee, I'm on the Protection tab.\n\n1212\n00:56:23,380 --> 00:56:26,190\nI've got the Recovery\nbutton right beneath it.\n\n1213\n00:56:26,190 --> 00:56:29,480\nI'll be able to go to there,\npick a VM, and restore it.\n\n1214\n00:56:29,480 --> 00:56:32,290\nAnd when I restore it,\nit'll let me pick where it goes.\n\n1215\n00:56:32,290 --> 00:56:33,990\nI can send it back to where it came from.\n\n1216\n00:56:33,990 --> 00:56:34,960\nRight?\nBack to that same server.\n\n1217\n00:56:34,960 --> 00:56:38,180\nOr if that server is dead I could\njust pick a new destination.\n\n1218\n00:56:38,180 --> 00:56:42,200\nAnd it'll do a full recovery of VM with\nthe virtual machine configuration,\n\n1219\n00:56:42,200 --> 00:56:44,340\nwith any snapshots that it had.\n\n1220\n00:56:44,340 --> 00:56:48,850\nIt'll recover all of that data to the new\nlocation and bring it back online and\n\n1221\n00:56:48,850 --> 00:56:49,650\noff it goes.\n\n1222\n00:56:49,650 --> 00:56:53,690\nIt's really cool cuz it gets a lot\nof stuff the guest OS doesn't know.\n\n1223\n00:56:53,690 --> 00:56:56,280\nThe historical performance data,\nit gets all that.\n\n1224\n00:56:56,280 --> 00:57:00,630\nIt gets so much information\nthat is important to us but\n\n1225\n00:57:00,630 --> 00:57:02,540\nthe guest VM doesn't know.\n\n1226\n00:57:02,540 --> 00:57:05,960\nSo on the exam if they\ntalk about a backup plan.\n\n1227\n00:57:05,960 --> 00:57:06,750\nRight?\n\n1228\n00:57:06,750 --> 00:57:07,940\nYou need to pick a backup interval,\n\n1229\n00:57:07,940 --> 00:57:10,400\nhow frequently you do the backup,\nthat's important.\n\n1230\n00:57:10,400 --> 00:57:15,340\nBut if SCDPM is your solution,\nmake sure that you're backing up the VMs\n\n1231\n00:57:15,340 --> 00:57:20,165\nfrom the hyper-V host,\nnot from within the guest VM itself.\n\n1232\n00:57:20,165 --> 00:57:26,420\nSo the exception to that is you might\nwant to be able to do things like,\n\n1233\n00:57:26,420 --> 00:57:28,270\nin Microsoft Exchange.\n\n1234\n00:57:28,270 --> 00:57:32,670\nIf you use SCDPM to backup an exchange\nserver directly you could do things like,\n\n1235\n00:57:32,670 --> 00:57:33,600\nwhat are they called?\n\n1236\n00:57:33,600 --> 00:57:35,330\nBrick level restores?\n\n1237\n00:57:35,330 --> 00:57:36,420\nBrick?\nIs that the right word?\n\n1238\n00:57:36,420 --> 00:57:39,045\nYou're now able to restore\none user's mailbox.\n\n1239\n00:57:39,045 --> 00:57:40,290\nRight?\n\n1240\n00:57:40,290 --> 00:57:42,170\nNot everybody, not the whole server.\n\n1241\n00:57:42,170 --> 00:57:43,900\nJust one user's mailbox.\n\n1242\n00:57:43,900 --> 00:57:47,850\nWell, SCDPM backing up from\nthe VM host doesn't do that.\n\n1243\n00:57:47,850 --> 00:57:49,700\nSo, I would need to backup the guest also.\n\n1244\n00:57:49,700 --> 00:57:53,720\nAnd, in those scenarios Microsoft's\nrecommendation is to do both.\n\n1245\n00:57:53,720 --> 00:57:55,900\nBack up the guest directly and\n\n1246\n00:57:55,900 --> 00:57:59,720\nyou can use that when you need those\nlittle individual type restores.\n\n1247\n00:57:59,720 --> 00:58:02,110\nBut, backup the VM from the host also.\n\n1248\n00:58:02,110 --> 00:58:04,780\nSo that if you have a big\nfailure you can quickly and\n\n1249\n00:58:04,780 --> 00:58:08,530\neasily restore that whole server\nwith all of its statistics and data.\n\n1250\n00:58:08,530 --> 00:58:09,920\nComes right along, and you're in business.\n\n1251\n00:58:11,980 --> 00:58:15,190\nSo that's the things we need\nto remember about the SCDPM.\n\n1252\n00:58:15,190 --> 00:58:17,790\nIt's a pretty complex and\npowerful product too.\n\n1253\n00:58:17,790 --> 00:58:20,800\nOn the exam they just want you to\nknow where that fits into your plans.\n\n1254\n00:58:20,800 --> 00:58:22,790\nRight?\nWe're that's gonna work in your solution.\n\n1255\n00:58:22,790 --> 00:58:25,290\nI guess\n\n1256\n00:58:27,020 --> 00:58:30,800\njust the only other thing worth mentioning\nhere on SCDPM, if you are gonna deploy it.\n\n1257\n00:58:32,700 --> 00:58:34,780\nIf you're coupling this with the SCVMM,\n\n1258\n00:58:34,780 --> 00:58:40,160\nlike I am, you have to install\nthe SCVMM console on your SCVMM box.\n\n1259\n00:58:40,160 --> 00:58:41,880\nThat's how it knows about it.\n\n1260\n00:58:41,880 --> 00:58:43,460\nThat's how it found my cluster, here.\n\n1261\n00:58:43,460 --> 00:58:45,910\nSo there's a couple of setup\nsteps that are involved.\n\n1262\n00:58:45,910 --> 00:58:49,700\nI'll post the link to the setup guide in\nthe show notes so you guys can see it.\n\n1263\n00:58:49,700 --> 00:58:52,520\nI doubt the exam will go into that stuff,\nbut better safe than sorry.\n\n1264\n00:58:52,520 --> 00:58:53,020\nRight.\n\n1265\n00:58:54,520 --> 00:58:55,640\nAll right.\nSo Mike,\n\n1266\n00:58:55,640 --> 00:58:57,100\nwe covered a lot of stuff in this episode.\n\n1267\n00:58:57,100 --> 00:58:58,860\n>> We did.\n>> So let's recap real quick.\n\n1268\n00:58:58,860 --> 00:59:02,570\nFrom maintaining our systems,\nwe always wanna monitor performance.\n\n1269\n00:59:02,570 --> 00:59:04,410\nAnd we talked about some of\nthe tools that are available for\n\n1270\n00:59:04,410 --> 00:59:06,750\nmonitoring performance,\nkeeping an eye on that.\n\n1271\n00:59:06,750 --> 00:59:09,670\nWe also need to make sure that\nwe're maintaining our updates, and\n\n1272\n00:59:09,670 --> 00:59:12,100\nkeeping our systems patched and\nready to go.\n\n1273\n00:59:12,100 --> 00:59:14,750\nSo we talked about some of the methods for\nthat and then lastly,\n\n1274\n00:59:14,750 --> 00:59:16,980\nwe need to make sure we've\ngot our backups in place.\n\n1275\n00:59:16,980 --> 00:59:20,580\nSo that when we have failures,\nwe can quickly and easily restore, and\n\n1276\n00:59:20,580 --> 00:59:21,290\nget back in business.\n\n1277\n00:59:22,590 --> 00:59:24,530\nSo that's basically the nuts and\nbolts for that.\n\n1278\n00:59:24,530 --> 00:59:25,890\nCan you think of anything else, Mike?\n\n1279\n00:59:25,890 --> 00:59:27,080\n>> No, I think we've covered it all.\n\n1280\n00:59:27,080 --> 00:59:30,720\nA lot of stuff we've hit in other\nepisodes, so if you need more information,\n\n1281\n00:59:30,720 --> 00:59:31,620\ngo back and watch those.\n\n1282\n00:59:31,620 --> 00:59:32,940\nBut I think we hit it all.\n\n1283\n00:59:32,940 --> 00:59:36,300\n>> Definitely check out that\nAutomated Remediation episode.\n\n1284\n00:59:36,300 --> 00:59:37,325\nHardest title ever.\n\n1285\n00:59:37,325 --> 00:59:39,230\n>> [LAUGH]\n>> I'm going to go rename that one.\n\n1286\n00:59:39,230 --> 00:59:40,815\nCall it the AR episode.\n\n1287\n00:59:40,815 --> 00:59:42,390\n>> [LAUGH]\n>> So check out that episode.\n\n1288\n00:59:42,390 --> 00:59:44,470\nWe cover a lot of stuff there\non the how to side of things.\n\n1289\n00:59:44,470 --> 00:59:48,220\nThis was more of the planning and\ndesign side of things today.\n\n1290\n00:59:48,220 --> 00:59:50,140\nAll right.\nLet me remind you guys that if you have\n\n1291\n00:59:50,140 --> 00:59:53,800\nquestions on any of this,\nyou're always welcome to ask.\n\n1292\n00:59:53,800 --> 00:59:56,890\nLive during the show,\nyou can go to itpro.tv/live and\n\n1293\n00:59:56,890 --> 00:59:59,070\nyou'll see the chat box\nright beneath the video.\n\n1294\n00:59:59,070 --> 01:00:00,500\nPost your questions there.\n\n1295\n01:00:00,500 --> 01:00:02,310\nWe monitor and answer during the show.\n\n1296\n01:00:02,310 --> 01:00:05,580\nIf you have questions after the show,\ncheck out our forums.\n\n1297\n01:00:05,580 --> 01:00:09,110\nAt the top of every page on IT Pro Tv\nyou'll see a link that says Q and A.\n\n1298\n01:00:09,110 --> 01:00:10,810\nClick on it.\nIt will take you to the forums.\n\n1299\n01:00:10,810 --> 01:00:12,420\nYou can post your questions there.\n\n1300\n01:00:12,420 --> 01:00:14,920\nWe monitor and answer after the show.\n\n1301\n01:00:14,920 --> 01:00:18,320\nGreat way to get answers to your\nquestions, so you know what's what and\n\n1302\n01:00:18,320 --> 01:00:21,010\nyou're not sitting there\nGoogle searching all day, so.\n\n1303\n01:00:21,010 --> 01:00:22,950\nAlthough, you can do that too.\n\n1304\n01:00:22,950 --> 01:00:23,500\n>> Oh yes.\n\n1305\n01:00:23,500 --> 01:00:25,690\n>> All right, well I hope you\nguys enjoyed today's episode.\n\n1306\n01:00:25,690 --> 01:00:27,820\nSigning off for ITPro.tv I'm Don Pezet.\n\n1307\n01:00:27,820 --> 01:00:28,950\n>> And I'm Mike Rodrick.\n\n1308\n01:00:28,950 --> 01:00:30,730\n>> And we'll see you next time.\n\n1309\n01:00:30,730 --> 01:00:40,730\n[MUSIC]\n\n1310\n01:00:44,530 --> 01:00:50,570\n[SOUND]\n\n",
          "vimeoId": "121685266"
        }
      ],
      "title": "Plan and implement a server virtualization infrastructure"
    },
    {
      "episodes": [
        {
          "description": "",
          "length": "237",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-4-0-overview-102814.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-4-0-overview-102814-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse70414-4-0-overview-102814-sm.jpg",
          "title": "Identity and Access Solutions",
          "transcript": "1\n00:00:00,000 --> 00:00:05,449\n[SOUND] In the final section of the 70-414\n\n2\n00:00:05,449 --> 00:00:11,178\nobjectives we're,\ngonna tackle designing and\n\n3\n00:00:11,178 --> 00:00:16,779\nimplementing Identity and\nAccess Solutions.\n\n4\n00:00:16,779 --> 00:00:20,755\nIt's a pretty big topic because it really\nshifts gears from what we've been talking\n\n5\n00:00:20,755 --> 00:00:22,840\nabout in all of the other sections.\n\n6\n00:00:22,840 --> 00:00:25,120\nNow we're really getting\ninto authentication and\n\n7\n00:00:25,120 --> 00:00:28,220\nsome additional services that\nare a part of the active directory.\n\n8\n00:00:28,220 --> 00:00:32,840\nWe're gonna start off with designing\na certificate services infrastructure,\n\n9\n00:00:32,840 --> 00:00:36,230\nand that's part of our PKI,\nour Public Key Infrastructure.\n\n10\n00:00:36,230 --> 00:00:40,890\nWhere we create certificates for use for\nsecuring webpages, identifying users,\n\n11\n00:00:40,890 --> 00:00:42,560\nencrypting files.\n\n12\n00:00:42,560 --> 00:00:46,290\nAll of that requires private keys for\ndoing the encryption, and\n\n13\n00:00:46,290 --> 00:00:50,491\ncertificates are the most reliable way to\nhandle that, at least in today's world.\n\n14\n00:00:50,491 --> 00:00:53,300\nSo, we're gonna take\na look at the design side.\n\n15\n00:00:53,300 --> 00:00:57,080\nAll of planning involved in creating\nthat certificate infrastructure\n\n16\n00:00:57,080 --> 00:00:58,580\nbefore we move on.\n\n17\n00:00:58,580 --> 00:01:00,880\n>> And then we're gonna follow\nthat up with our implementing and\n\n18\n00:01:00,880 --> 00:01:03,690\nmanaging that certificate\nservices infrastructure.\n\n19\n00:01:03,690 --> 00:01:06,070\nSo everything he just said,\nwe're actually gonna do it.\n\n20\n00:01:06,070 --> 00:01:09,080\nNow we're gonna set up that,\nonce we've got that design,\n\n21\n00:01:09,080 --> 00:01:12,700\nnow we're gonna implement that root CA and\ntake it offline.\n\n22\n00:01:12,700 --> 00:01:15,970\nAll the different components that are\ngonna allow my users to actually request\n\n23\n00:01:15,970 --> 00:01:19,830\na certificate or automate the issuing\nof those certificates and everything.\n\n24\n00:01:19,830 --> 00:01:22,420\nWe need to monitor that certificate and\nthat's PKI.\n\n25\n00:01:24,330 --> 00:01:26,980\nTo make sure it's performing well, and\nmonitor those certificates to their\n\n26\n00:01:26,980 --> 00:01:31,340\nlifetime, from issuing them to maintaining\nthem, to revoking them in the end.\n\n27\n00:01:32,520 --> 00:01:34,205\n>> Yeah, and once those servers are up,\n\n28\n00:01:34,205 --> 00:01:36,900\nthat's when we're ready to\nactually issue certificates.\n\n29\n00:01:36,900 --> 00:01:40,609\nAnd that's the next section, which is\nImplement and Manage Certificates.\n\n30\n00:01:40,609 --> 00:01:44,385\nSo, we'll look at some of the templates\nthat are available for pushing those out.\n\n31\n00:01:44,385 --> 00:01:46,214\nWe'll chat with Microsoft for\nhelp right here.\n\n32\n00:01:46,214 --> 00:01:46,754\n>> [LAUGH]\n>> And so\n\n33\n00:01:46,754 --> 00:01:48,720\n[LAUGH] we'll get a chance to see that.\n\n34\n00:01:48,720 --> 00:01:52,700\nWe'll also get a chance to see how to\nrevoke certificates in the event that one\n\n35\n00:01:52,700 --> 00:01:53,630\nget stolen.\n\n36\n00:01:53,630 --> 00:01:57,920\nAnd a lot of this we've already\nseen in the MCSA training.\n\n37\n00:01:57,920 --> 00:02:00,140\nMost of you guys are already familiar\nwith this, so it sounds redundant.\n\n38\n00:02:00,140 --> 00:02:01,810\nWell, it kind of is.\n\n39\n00:02:01,810 --> 00:02:03,180\nRepetition leads to retention.\n\n40\n00:02:03,180 --> 00:02:05,120\n>> That's right.\n>> It's one of the ways that we learn, but\n\n41\n00:02:05,120 --> 00:02:08,220\nwe're also gonna be really highlighting\nsome of the more advanced functionality.\n\n42\n00:02:08,220 --> 00:02:12,420\nSo we won't bore you with the simple\nstuff that you guys have seen before.\n\n43\n00:02:12,420 --> 00:02:13,998\n>> And then we'll go into our design,\n\n44\n00:02:13,998 --> 00:02:16,960\nand implemented\na Federation Identity Solution.\n\n45\n00:02:16,960 --> 00:02:20,648\nAnd when we talk about federations,\nwe're talking about extending that concept\n\n46\n00:02:20,648 --> 00:02:23,060\nof trust and\nauthentication beyond our boundaries.\n\n47\n00:02:23,060 --> 00:02:25,665\nWhether that's with\na partner organization, or\n\n48\n00:02:25,665 --> 00:02:29,350\nthrough up to with Azure with Microsoft or\nsomething like that.\n\n49\n00:02:29,350 --> 00:02:33,310\nTake a look at some of the components\nthat make the solution possible.\n\n50\n00:02:33,310 --> 00:02:37,040\nLike different attribute stores,\nactive directory, LDS,\n\n51\n00:02:37,040 --> 00:02:41,370\nsetting up some proxies to protect that\ninfrastructure from the bad guys outside.\n\n52\n00:02:42,630 --> 00:02:46,130\n>> And then in the final section\nwe're going to take a look at RMS.\n\n53\n00:02:46,130 --> 00:02:50,510\nSo we design and implement active\ndirectory Rights Management Services.\n\n54\n00:02:50,510 --> 00:02:53,200\nAnd that's where we basically\nset up document management or\n\n55\n00:02:53,200 --> 00:02:54,220\ndigital rights management.\n\n56\n00:02:54,220 --> 00:02:56,200\nRight?\nA protection for our documents.\n\n57\n00:02:56,200 --> 00:03:00,310\nWe can control who can open them,\nwho can read them, or\n\n58\n00:03:00,310 --> 00:03:01,400\nhow long they can read them for.\n\n59\n00:03:01,400 --> 00:03:02,990\nWe can set them to expire.\n\n60\n00:03:02,990 --> 00:03:05,460\nAnd we're really focusing\non the design side.\n\n61\n00:03:05,460 --> 00:03:08,210\nWe've already seen how to implement\nin some of the other shows.\n\n62\n00:03:08,210 --> 00:03:11,920\nBut we're focused on that design side so\nwe recognize all the different components\n\n63\n00:03:11,920 --> 00:03:15,780\nwe need to have in place to\nprovide that infrastructure.\n\n64\n00:03:15,780 --> 00:03:17,580\nSo we'll get a chance to see that and\n\n65\n00:03:17,580 --> 00:03:20,170\nmy favorite part,\nwhich is right at the very end.\n\n66\n00:03:20,170 --> 00:03:20,822\nDecommission.\n\n67\n00:03:20,822 --> 00:03:21,590\n>> [LAUGH]\n>> AD RMS,\n\n68\n00:03:21,590 --> 00:03:24,429\nwe'll see how to remove it because\nwhen you do what happens to\n\n69\n00:03:24,429 --> 00:03:26,166\nall these documents you protected.\n\n70\n00:03:26,166 --> 00:03:29,310\nRight?\nAnd when you remove it, and you will.\n\n71\n00:03:29,310 --> 00:03:30,920\n>> You didn't say if you said when.\n\n72\n00:03:30,920 --> 00:03:31,890\nYes.\n[LAUGH]\n\n73\n00:03:31,890 --> 00:03:32,770\n>> Okay.\n\n74\n00:03:32,770 --> 00:03:35,270\nWe'll take a look at that.\n\n75\n00:03:35,270 --> 00:03:38,450\nBut all right, so a lot of good\nstuff here in this final segment.\n\n76\n00:03:38,450 --> 00:03:40,040\nI know I'm excited, Mike you're excited.\n\n77\n00:03:40,040 --> 00:03:41,700\n>> I know I am.\n>> You love the federation stuff.\n\n78\n00:03:41,700 --> 00:03:42,480\n>> Yeah, I do.\n>> Actually\n\n79\n00:03:42,480 --> 00:03:44,000\nyou do I'm the one who doesn't like it.\n\n80\n00:03:44,000 --> 00:03:46,586\n>> Certificates I mean that's fantastic.\n\n81\n00:03:46,586 --> 00:03:50,337\n[LAUGH]\n>> All right, well it's exciting stuff,\n\n82\n00:03:50,337 --> 00:03:54,108\nstay tuned we'll get\nstarted in just a moment.\n\n83\n00:03:54,108 --> 00:03:57,999\n[SOUND]\n\n",
          "vimeoId": "110354329"
        },
        {
          "description": "In this episode, Daniel and Mike describe and demonstrate what it takes to design and implement a Certificate Authority(CA) Infrastructure. They start by looking at the hierarchical tiers when using an offline root CA. Then they explore Certificate Enrollment Web Services and Certificate Enrollment Policy Web Services. Finally, they describe Network Device Enrollment Services.",
          "length": "1678",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-design_a_ca_infrastructure-060716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-design_a_ca_infrastructure-060716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-design_a_ca_infrastructure-060716-1-sm.jpg",
          "title": "Design a CA Infrastructure",
          "transcript": "WEBVTT\n\n1\n00:00:00.011 --> 00:00:10.011\n[MUSIC]\n\n2\n00:00:12.447 --> 00:00:17.290\nAll right, greetings everyone and\nwelcome to another episode of IT Pro TV.\n\n3\n00:00:17.290 --> 00:00:18.360\nI'm your host, Daniel Lowrie.\n\n4\n00:00:18.360 --> 00:00:21.290\nAnd in today's episode,\nwe are continuing on with our series\n\n5\n00:00:21.290 --> 00:00:25.600\non implementing an advanced infrastructure\nwith the Windows 2012 server.\n\n6\n00:00:25.600 --> 00:00:28.880\nJoining me back in the studio again today\nto help us out with that very endeavor is\n\n7\n00:00:28.880 --> 00:00:31.010\nour good friend and\nmentor, Mr. Mike Roderick.\n\n8\n00:00:31.010 --> 00:00:32.180\nMike, welcome back to the show.\n\n9\n00:00:32.180 --> 00:00:33.100\nHow's it going today?\n\n10\n00:00:33.100 --> 00:00:34.410\nAnd we're glad to have you, sir.\n\n11\n00:00:34.410 --> 00:00:35.220\n>> Thank you very much.\n\n12\n00:00:35.220 --> 00:00:41.240\nI'm glad to be back and that's right we're\ncontinuing on with that MCSA courses and\n\n13\n00:00:41.240 --> 00:00:44.800\nin this one we are going to be looking\nat good old certificate services.\n\n14\n00:00:44.800 --> 00:00:47.890\nIt's obviously a very\nimportant part of setting up\n\n15\n00:00:47.890 --> 00:00:51.600\nour infrastructure because certificates\nare used for many many purposes.\n\n16\n00:00:51.600 --> 00:00:55.390\nAnd let's just rehash a little\nbit before we dive in.\n\n17\n00:00:55.390 --> 00:00:59.650\nWhen we talk about certificates,\ncertificates are just a digital or\n\n18\n00:00:59.650 --> 00:01:04.600\nan electronic document that\nwill prove your identity.\n\n19\n00:01:04.600 --> 00:01:08.880\nOr, I should say validate an identity\nbecause it really isn't just users.\n\n20\n00:01:08.880 --> 00:01:11.320\nWe don't wanna assume that right?\n\n21\n00:01:11.320 --> 00:01:16.680\nCuz certificates can be issued to\nusers to computers to software.\n\n22\n00:01:16.680 --> 00:01:21.150\nThey used to digitally sign things so to\nvalidate an identity would be a better way\n\n23\n00:01:21.150 --> 00:01:27.230\nto say it, as well as,\ntie that identity to a key pair.\n\n24\n00:01:27.230 --> 00:01:28.660\nRight, an important part of that,\n\n25\n00:01:28.660 --> 00:01:32.480\nsometimes it's overlooked even\nthough most of us know it.\n\n26\n00:01:32.480 --> 00:01:37.370\nBut we maybe don't kind of verbalize it or\nthink about it ahead of time.\n\n27\n00:01:37.370 --> 00:01:39.430\nRemember, that's a big\npart of the certificate,\n\n28\n00:01:39.430 --> 00:01:41.390\nnot only is it a way to\nprove your identity.\n\n29\n00:01:41.390 --> 00:01:46.100\nJust like a driver's license or\na passport, you get issued a certificate.\n\n30\n00:01:46.100 --> 00:01:48.750\nAnd, again, whether that's a user,\na computer, or surface encounter,\n\n31\n00:01:48.750 --> 00:01:50.840\nwhat have you,\nyou get issued this certificate.\n\n32\n00:01:50.840 --> 00:01:54.010\nAnd in that certificate is\ninformation that identifies you,\n\n33\n00:01:54.010 --> 00:01:57.650\nand you use this instead of a username and\npassword, right?\n\n34\n00:01:57.650 --> 00:02:00.180\nIt's another way that we can authenticate.\n\n35\n00:02:00.180 --> 00:02:03.150\nAnd it's a much more secure\nway to authenticate than say,\n\n36\n00:02:03.150 --> 00:02:04.980\njust a username and a password.\n\n37\n00:02:04.980 --> 00:02:08.430\nBut the other big thing, again,\nthat that certificate does,\n\n38\n00:02:08.430 --> 00:02:13.165\nwhen you get issued a certificate,\nin that certificate is your public key.\n\n39\n00:02:13.165 --> 00:02:15.335\nRight?\nWe've talked about this in other episodes.\n\n40\n00:02:15.335 --> 00:02:20.655\nWe've talked about asymmetric encryption\nand public and private key pairs.\n\n41\n00:02:20.655 --> 00:02:22.425\nWell, how do you obtain that key pairs so\n\n42\n00:02:22.425 --> 00:02:25.647\nthat you can use an application\nthat is ding asymmetric?\n\n43\n00:02:25.647 --> 00:02:30.067\nEncryption or digitally sign an email or\nencrypt something with Asymmetric.\n\n44\n00:02:30.067 --> 00:02:32.457\nAll right, you get a certificate.\n\n45\n00:02:32.457 --> 00:02:36.797\nIn that certificate is your public key,\nthe one that you can share with everybody\n\n46\n00:02:36.797 --> 00:02:40.517\nbecause you can give your\ncertificate to whomever you need to.\n\n47\n00:02:40.517 --> 00:02:43.107\nYou usually make that\ncertificate available.\n\n48\n00:02:43.107 --> 00:02:47.810\nIt's listed in Active Directory so\nother users in your network can access it.\n\n49\n00:02:47.810 --> 00:02:51.740\nTo validate if you've signed something\nwith it, they can use that to validate.\n\n50\n00:02:51.740 --> 00:02:55.420\nYour private key also gets issued to\nyou along with the certificate, but\n\n51\n00:02:55.420 --> 00:02:57.020\nit's separate from the certificate.\n\n52\n00:02:57.020 --> 00:02:59.150\nThe certificate I can\nexpose to the public.\n\n53\n00:02:59.150 --> 00:03:00.610\nIt's got my public key in there.\n\n54\n00:03:00.610 --> 00:03:02.490\nAgain, I can get it from Active Directory.\n\n55\n00:03:02.490 --> 00:03:03.910\nI can email it to everybody.\n\n56\n00:03:03.910 --> 00:03:06.960\nI can post it up in some share,\nwhat have you.\n\n57\n00:03:06.960 --> 00:03:10.640\nThe private key, separate from the\ncertificate goes in a secure location on\n\n58\n00:03:10.640 --> 00:03:14.300\nmy computer, a hidden location on my\nhard drive within my profile, and\n\n59\n00:03:14.300 --> 00:03:16.240\nremember together that private key and\n\n60\n00:03:16.240 --> 00:03:20.850\nthat public key is what allows us\nto do that asymmetric encryption.\n\n61\n00:03:22.310 --> 00:03:25.310\nBut in here, we're not really gonna\ndive into the world of encryption.\n\n62\n00:03:25.310 --> 00:03:28.720\nWe covered that in other episodes and\nother classes, here we're talking about\n\n63\n00:03:28.720 --> 00:03:34.450\nthe infrastructure required\nto issue those certificates.\n\n64\n00:03:34.450 --> 00:03:37.640\nTo manage those certificates\nthroughout their lifetime and\n\n65\n00:03:37.640 --> 00:03:41.710\nto end those certificates validity\nwhen the time comes, right?\n\n66\n00:03:41.710 --> 00:03:44.210\nTo set all that up and\nto be able to take care of that.\n\n67\n00:03:44.210 --> 00:03:50.050\nAutomate the issuance of those\ncertificates, for example.\n\n68\n00:03:50.050 --> 00:03:50.580\nThings like that.\n\n69\n00:03:50.580 --> 00:03:54.780\nSo really managing and maintaining that\ncertificate authority infrastructure.\n\n70\n00:03:54.780 --> 00:03:57.800\nAnd remember in Microsoft,\nwe call these servers that\n\n71\n00:03:57.800 --> 00:04:01.560\ntake care of these certificates\ncertificate authorities, or CAs for\n\n72\n00:04:01.560 --> 00:04:05.110\nshort, because it's a pain saying\ncertificate authority all the time.\n\n73\n00:04:05.110 --> 00:04:08.940\nBut in general it's a public\nkey infrastructure, or a PKI.\n\n74\n00:04:08.940 --> 00:04:12.550\nYou've heard that term in other\nclasses outside of Microsoft.\n\n75\n00:04:12.550 --> 00:04:15.810\nPKI, public key infrastructure.\n\n76\n00:04:15.810 --> 00:04:17.310\nThis is Microsoft's implementation,\n\n77\n00:04:17.310 --> 00:04:21.120\nthis is how we setup a PKI\nwithin a Microsoft environment.\n\n78\n00:04:21.120 --> 00:04:24.340\nAs we create our certificate\nauthorities and we set these guys up.\n\n79\n00:04:24.340 --> 00:04:25.990\nSo that's what we're gonna talk about and\n\n80\n00:04:25.990 --> 00:04:30.320\nin this first episode I really wanna just\nbreak down the whole, the infrastructure.\n\n81\n00:04:30.320 --> 00:04:35.040\nThis class, this particular exam,\nis going to call out like design\n\n82\n00:04:35.040 --> 00:04:39.980\nconsiderations and planing out\nyour public key infrastructures.\n\n83\n00:04:39.980 --> 00:04:41.545\nSo that's what we're going to start with.\n\n84\n00:04:41.545 --> 00:04:44.505\nAnd then as we progress we'll go in and\nwe'll do some demonstrations and\n\n85\n00:04:44.505 --> 00:04:47.695\nactually set it up and see how it works.\n\n86\n00:04:47.695 --> 00:04:50.295\nAll right so\nthe first thing I want to talk about is\n\n87\n00:04:50.295 --> 00:04:54.640\nthe CA infrastructure of what\nwe call the CA hierarchy.\n\n88\n00:04:54.640 --> 00:04:59.740\nWe really have a couple of different\nways that we can set up our public\n\n89\n00:04:59.740 --> 00:05:05.470\nkey infrastructure or our CA hierarchy\ndepending on what our needs are.\n\n90\n00:05:05.470 --> 00:05:07.210\nSo let's start by taking\na look at my screen and\n\n91\n00:05:07.210 --> 00:05:09.460\nI'm going to show you\na very simple model here.\n\n92\n00:05:09.460 --> 00:05:12.030\nI'll zoom in just a wee bit so\nwe can see it.\n\n93\n00:05:12.030 --> 00:05:14.500\nIt's not the most exciting of diagrams.\n\n94\n00:05:14.500 --> 00:05:15.500\nThere's not a lot to it.\n\n95\n00:05:15.500 --> 00:05:16.400\n>> Gave me chills.\n\n96\n00:05:16.400 --> 00:05:19.490\n>> I know right?\n[LAUGH] Take a screenshot,\n\n97\n00:05:19.490 --> 00:05:21.530\nmaybe frame that.\n\n98\n00:05:21.530 --> 00:05:25.330\nThis would be what we would\ncall a single tier or\n\n99\n00:05:25.330 --> 00:05:30.500\na one tier hierarchy in which\ncase we install everything.\n\n100\n00:05:30.500 --> 00:05:32.310\nOn a single server, right?\n\n101\n00:05:32.310 --> 00:05:37.260\nAnd then that server that's now our\ncertificate authority is going to issue\n\n102\n00:05:37.260 --> 00:05:42.840\ncertificates to users to computers\nto services, whatever for\n\n103\n00:05:42.840 --> 00:05:47.680\nmy dev team to digitally sign\napplications that they're developing.\n\n104\n00:05:47.680 --> 00:05:48.220\nThings like that.\n\n105\n00:05:48.220 --> 00:05:50.560\nThat server basically does it all.\n\n106\n00:05:50.560 --> 00:05:54.030\nIn a test environment,\nnothing wrong with this at all.\n\n107\n00:05:54.030 --> 00:05:55.840\nIn a production environment,\n\n108\n00:05:55.840 --> 00:05:58.300\nthis is probably not how\nyou're going to want to go.\n\n109\n00:05:58.300 --> 00:06:03.570\nIn a small, very small shop you\nmight do something like this.\n\n110\n00:06:03.570 --> 00:06:06.240\nBut here's the issue we can run into.\n\n111\n00:06:06.240 --> 00:06:08.500\nWith these single tier,\n\n112\n00:06:08.500 --> 00:06:13.070\nthis one tier hierarchy everything is\nbased on that one machine, all right?\n\n113\n00:06:13.070 --> 00:06:17.260\nAnd what happens is if that machine\ngets compromised in any way,\n\n114\n00:06:17.260 --> 00:06:21.170\nnow all of a sudden everything you've\ndone as far as your PKI cannot be\n\n115\n00:06:21.170 --> 00:06:25.890\ntrusted anymore because you don't know for\nsure what got compromised or what not.\n\n116\n00:06:25.890 --> 00:06:27.670\nAnd you can't take chances.\n\n117\n00:06:27.670 --> 00:06:31.830\nIf somebody compromises that machine, they\ncould issue certificates for themselves,\n\n118\n00:06:31.830 --> 00:06:36.520\nand then start to use those certificates\nto authenticate to our VPN server or\n\n119\n00:06:36.520 --> 00:06:40.970\ntry to digitally sign software in\nour name that has malware in it.\n\n120\n00:06:40.970 --> 00:06:42.890\nAny number of things could go wrong.\n\n121\n00:06:42.890 --> 00:06:44.930\nThey could access other\npeople's certificates and\n\n122\n00:06:44.930 --> 00:06:47.590\ntry to gain access to our\nsystems through that.\n\n123\n00:06:47.590 --> 00:06:52.410\nAnd so if this guy gets compromised,\nmy whole PKI is now untrusted.\n\n124\n00:06:52.410 --> 00:06:53.540\nAnd I have to start all over.\n\n125\n00:06:53.540 --> 00:06:58.240\nI have to rebuild my public key\nof structure, reinstall this guy,\n\n126\n00:06:58.240 --> 00:07:03.110\nand invalidate or revoke all the\ncertificates that I've issued up till now.\n\n127\n00:07:03.110 --> 00:07:07.830\nAnd then issue them all over again\nanywhere that a certificate was used,\n\n128\n00:07:07.830 --> 00:07:10.190\nlike my website that's\nproving it's identity, so\n\n129\n00:07:10.190 --> 00:07:13.930\nyou can do ssl, my vpn server,\nmy direct access servers.\n\n130\n00:07:13.930 --> 00:07:16.990\nI've got to reissue all those\ncertificates, all my routers that might\n\n131\n00:07:16.990 --> 00:07:20.740\nhave certificates everything, and\nthat can be a pain in the butt.\n\n132\n00:07:20.740 --> 00:07:23.710\n>> Yeah, Mike, I remember when I was\nlearning about this back in the day,\n\n133\n00:07:23.710 --> 00:07:29.030\nthey were talking about large CAs like\nVeriSign and thought and all those having\n\n134\n00:07:29.030 --> 00:07:33.420\nhard copies put in vaults with armed\nguards right, that they update and they\n\n135\n00:07:33.420 --> 00:07:37.740\ntransport them out of that building where\nthey're actually issued in the server.\n\n136\n00:07:37.740 --> 00:07:42.366\nAnd burning that onto some sort of media,\nand then transporting armed guard,\n\n137\n00:07:42.366 --> 00:07:46.445\nagain, people with machine guns,\ntaking it to a secured facility.\n\n138\n00:07:46.445 --> 00:07:49.448\nAnd then that way,\nif they ever did get compromised,\n\n139\n00:07:49.448 --> 00:07:53.142\nthey have a secured copy that\ncould never have been compromised.\n\n140\n00:07:53.142 --> 00:07:54.589\nOr at least very highly unlikely.\n\n141\n00:07:54.589 --> 00:07:56.408\n>> Very highly unlikely, exactly.\n\n142\n00:07:56.408 --> 00:07:59.914\nAnd that's the level that Maybe\nwe don't have to go through, but\n\n143\n00:07:59.914 --> 00:08:03.932\ndefinitely something like VeriSign or\nThought or Equifax or GTE, I mean,\n\n144\n00:08:03.932 --> 00:08:06.640\nthese companies, that's what they do.\n\n145\n00:08:06.640 --> 00:08:08.241\nAnd if they were ever to get compromised,\n\n146\n00:08:08.241 --> 00:08:10.636\nthink of the millions of\ncertificates that they've issued.\n\n147\n00:08:10.636 --> 00:08:14.265\nThe millions of things that\nrely on those certificates.\n\n148\n00:08:14.265 --> 00:08:19.040\nAnd if it got compromised it just,\nthey'd really be out of business.\n\n149\n00:08:19.040 --> 00:08:21.640\nThere'd be no way they could\nrecover from that most likely.\n\n150\n00:08:21.640 --> 00:08:23.090\n>> Plus the monetary fallout alone.\n\n151\n00:08:23.090 --> 00:08:27.040\nImagine if I got Amazon's\ndigital certificate and\n\n152\n00:08:27.040 --> 00:08:28.790\nI just built my own Amazon website.\n\n153\n00:08:28.790 --> 00:08:29.640\nHad people started logging in,\n\n154\n00:08:29.640 --> 00:08:34.810\nthey would actually trust me as if I were\nAmazon because to the computer, I am.\n\n155\n00:08:34.810 --> 00:08:37.690\n>> Exactly, exactly right, I mean,\nthis is proving your identity.\n\n156\n00:08:37.690 --> 00:08:40.410\nSo if you've got a certificate\nthat says that you are Amazon and\n\n157\n00:08:40.410 --> 00:08:43.580\nas long as it's issued from\na Trusted Root, which we'll talk about,\n\n158\n00:08:43.580 --> 00:08:46.270\nyour computer would assume everything's\ngood, you get the get the green bar,\n\n159\n00:08:46.270 --> 00:08:49.650\nand you could start putting in account\nnumbers and credit card numbers.\n\n160\n00:08:49.650 --> 00:08:53.264\nUnfortunately for you,\nDan is now shopping on your dime.\n\n161\n00:08:53.264 --> 00:08:54.100\n[LAUGH]\n>> I'm going to eBay.\n\n162\n00:08:54.100 --> 00:08:55.300\n[LAUGH]\n>> Exactly.\n\n163\n00:08:55.300 --> 00:08:58.320\nAll right, but for testing, this is fine.\n\n164\n00:08:58.320 --> 00:09:01.320\nThis is typically what I do\nwhen I'm testing things out.\n\n165\n00:09:01.320 --> 00:09:05.296\nIf I need to set up a CA, to issue\ncertificates to do something else,\n\n166\n00:09:05.296 --> 00:09:06.390\nthis is great.\n\n167\n00:09:06.390 --> 00:09:10.220\nAnd in a small shop where you really\ndon't use certificates for much.\n\n168\n00:09:10.220 --> 00:09:14.070\nMaybe some IB set connections between a\ncouple of servers or something like that.\n\n169\n00:09:14.070 --> 00:09:15.540\nYou know,\nmaybe you can get away with this.\n\n170\n00:09:15.540 --> 00:09:18.130\nWhereas if it becomes compromised,\nyou know,\n\n171\n00:09:18.130 --> 00:09:22.040\nit's not that much work to get them\nall reissued or something like that.\n\n172\n00:09:22.040 --> 00:09:25.822\nBut if you're really going to use a PKI or\ncertificates for authenticating users,\n\n173\n00:09:25.822 --> 00:09:27.442\ncomputers, and things like that,\n\n174\n00:09:27.442 --> 00:09:29.992\nyou're gonna want to do\nsomething a little different.\n\n175\n00:09:29.992 --> 00:09:34.642\nNow, the three tier hierarchy,\nwhich is what I've got on my screen now,\n\n176\n00:09:34.642 --> 00:09:39.600\nthis is obviously a lot more complex and\nthere's a lot more servers involved.\n\n177\n00:09:39.600 --> 00:09:43.050\nSo just setting it up,\nexpense wise and things like that,\n\n178\n00:09:43.050 --> 00:09:44.960\nthere's gonna be more to it.\n\n179\n00:09:44.960 --> 00:09:48.240\nBut, it's a much more\nrobust secure solution.\n\n180\n00:09:48.240 --> 00:09:51.250\nAnd let me explain the different\npieces parts in here.\n\n181\n00:09:51.250 --> 00:09:53.120\nWhen we talk about\ncertificate authorities,\n\n182\n00:09:53.120 --> 00:09:55.990\nwe have what's known as a root CA.\n\n183\n00:09:55.990 --> 00:10:00.720\nAnd then we can have what\nwe call subordinate CAs.\n\n184\n00:10:00.720 --> 00:10:04.790\nIf we go back to this one tier hierarchy,\nthere is nobody else.\n\n185\n00:10:04.790 --> 00:10:08.730\nHe is the root CA, and he's also\nwhat we would call the issuing CA,\n\n186\n00:10:08.730 --> 00:10:10.928\nthe one you talk to to\nget a new certificate.\n\n187\n00:10:10.928 --> 00:10:14.570\nOn a three-tier,\nwe're gonna start splitting this up.\n\n188\n00:10:14.570 --> 00:10:17.150\nThe root CA is basically\nthe top of my infrastructure.\n\n189\n00:10:17.150 --> 00:10:20.820\nYou can think of it like a pyramid where,\n\n190\n00:10:20.820 --> 00:10:23.680\nwe're gonna talk about\ntrust here in a little bit.\n\n191\n00:10:23.680 --> 00:10:26.100\nBut the root CA is the very\nfirst one we set up.\n\n192\n00:10:26.100 --> 00:10:28.420\nAnd there's nobody higher than him.\n\n193\n00:10:28.420 --> 00:10:32.360\nRoot CAs have what we call\na self-signed certificate.\n\n194\n00:10:32.360 --> 00:10:35.040\nThere is nobody above\nhim in the hierarchy so\n\n195\n00:10:35.040 --> 00:10:38.800\nhe has to create his own\ncertificate to identify himself.\n\n196\n00:10:38.800 --> 00:10:44.480\nSo it'd be issued to root CA,\nissued by root CA.\n\n197\n00:10:44.480 --> 00:10:45.960\n>> He is his own authority.\n\n198\n00:10:45.960 --> 00:10:46.550\n>> Exactly.\n\n199\n00:10:46.550 --> 00:10:49.620\nAnd that's what we call\na self signed certificate.\n\n200\n00:10:49.620 --> 00:10:51.920\nAnd that's what starts this hierarchy.\n\n201\n00:10:53.830 --> 00:10:59.130\nThen, we would have what\nwe call intermediate CAs.\n\n202\n00:10:59.130 --> 00:11:04.650\nAnd these intermediate CAs can\nalso be referred to as policy CAs.\n\n203\n00:11:06.705 --> 00:11:11.035\nAnd the policy CAs are children or child\n\n204\n00:11:12.385 --> 00:11:17.675\nobjects or children of the parent CAs,\nwhich in this case is the root.\n\n205\n00:11:17.675 --> 00:11:22.610\nAnd the root will issue a certificate\nto that intermediate CA.\n\n206\n00:11:22.610 --> 00:11:26.980\nSo that it can prove its identity\nto other machines and users.\n\n207\n00:11:26.980 --> 00:11:31.920\nAnd it would be issued by root CA,\nissued to Intermediate CA2,\n\n208\n00:11:31.920 --> 00:11:33.940\nor whatever the case may be.\n\n209\n00:11:33.940 --> 00:11:36.020\nSo that's not a self-signed certificate,\nright?\n\n210\n00:11:36.020 --> 00:11:38.250\nThat's issued by root CA.\n\n211\n00:11:38.250 --> 00:11:42.560\nAnd typically we use this middle tier for\npolicy.\n\n212\n00:11:42.560 --> 00:11:48.070\nI might have a policy that says,\nin order to get a user certification or\n\n213\n00:11:48.070 --> 00:11:52.760\na computer certificate,\nyou need to meet certain requirements.\n\n214\n00:11:52.760 --> 00:11:56.455\nBut if you're a contractor, and you want a\ncertificate so that you can remote into my\n\n215\n00:11:56.455 --> 00:12:00.460\nnetwork, there's different requirements\nthat you might have to meet.\n\n216\n00:12:00.460 --> 00:12:05.320\nSo this guy is policies for\nmy employees, and my internal computers.\n\n217\n00:12:05.320 --> 00:12:09.290\nThis policy is set up stricter\nrequirements, for say my contractors,\n\n218\n00:12:09.290 --> 00:12:12.900\nor my vendors, or something like that.\n\n219\n00:12:12.900 --> 00:12:14.480\nSo different policies.\n\n220\n00:12:14.480 --> 00:12:15.060\nAll right.\n\n221\n00:12:15.060 --> 00:12:18.490\nAnd then we've got our issuing CA's down\nat the bottom, that actually do the work.\n\n222\n00:12:18.490 --> 00:12:22.360\nThese are the ones that your users,\nyour computers, are going to talk to,\n\n223\n00:12:22.360 --> 00:12:24.070\nto request a certificate.\n\n224\n00:12:24.070 --> 00:12:28.170\nOr if I need to issue a certificate for\na service, or for a vendor.\n\n225\n00:12:28.170 --> 00:12:32.990\nThis is the level of the tier\nthat does the work, right.\n\n226\n00:12:32.990 --> 00:12:35.820\nAnd you notice that I have more\nthat one issuing CA coming\n\n227\n00:12:35.820 --> 00:12:37.350\noff this first intermediate.\n\n228\n00:12:37.350 --> 00:12:38.859\nI kinda wanna show you\nthat you can have several.\n\n229\n00:12:38.859 --> 00:12:42.984\nI can have three or four branching off\nof that particular intermediate CA.\n\n230\n00:12:42.984 --> 00:12:46.587\nAnd we would do this for you know,\nfault tolerance and for load balancing, so\n\n231\n00:12:46.587 --> 00:12:48.749\nthat if one of these\nservers was unavailable,\n\n232\n00:12:48.749 --> 00:12:51.960\nusers could still request\ncertificates from the other one.\n\n233\n00:12:51.960 --> 00:12:54.430\nOr maybe they're just very busy,\nthey're doing a lot of work, so\n\n234\n00:12:54.430 --> 00:12:57.020\nI need more than one to\nhandle the work load.\n\n235\n00:12:57.020 --> 00:12:59.500\nIt could be geographical distribution.\n\n236\n00:12:59.500 --> 00:13:05.335\nI might have one in my Tampa office and a\ndifferent CA in my New York office, right.\n\n237\n00:13:05.335 --> 00:13:08.185\nI don't need anybody down in the Tampa\noffice going all the way across\n\n238\n00:13:08.185 --> 00:13:10.630\nthe network up to New York\nto request a certificate.\n\n239\n00:13:10.630 --> 00:13:12.890\nI could put one in each location.\n\n240\n00:13:12.890 --> 00:13:15.100\nOr more than one in each location.\n\n241\n00:13:15.100 --> 00:13:18.620\nAnd then a separate issuing CA for\nthis set of policies, right.\n\n242\n00:13:18.620 --> 00:13:23.020\nDifferent policies, policies control what\ncertificates are allowed to be issued\n\n243\n00:13:23.020 --> 00:13:24.110\nfrom that particular CA.\n\n244\n00:13:24.110 --> 00:13:28.320\nAnd what the requirements are to\nrequest one of those certificates.\n\n245\n00:13:28.320 --> 00:13:29.890\nDo I just need a user account?\n\n246\n00:13:29.890 --> 00:13:33.580\nOr do I need to send in information or\n\n247\n00:13:33.580 --> 00:13:36.710\nprovide additional information\nto get that certificate?\n\n248\n00:13:36.710 --> 00:13:40.700\nSo I have a separate issuing CA that\nhandles the certificates being issued\n\n249\n00:13:40.700 --> 00:13:41.630\nby this.\n\n250\n00:13:41.630 --> 00:13:46.860\nOr the policies, I should say, being\nissued or used by this intermediate CA.\n\n251\n00:13:46.860 --> 00:13:48.520\nSo again, we get fault tolerance.\n\n252\n00:13:48.520 --> 00:13:50.030\nWe get load balancing.\n\n253\n00:13:50.030 --> 00:13:52.750\nIt could be organizational divisions.\n\n254\n00:13:52.750 --> 00:13:56.530\nI might have different requirements for\nmy certificates issued to my marketing\n\n255\n00:13:56.530 --> 00:14:01.000\ndepartment versus the certificates\nthat I issue to my dev team, right.\n\n256\n00:14:01.000 --> 00:14:04.740\nSo these could be based on policies\nthat are inter-organizational, and\n\n257\n00:14:04.740 --> 00:14:08.380\nthen the dev team all request their\ncertificates from this issuing CA.\n\n258\n00:14:08.380 --> 00:14:12.830\nAnd the rest of my team requests their\ncertificates from these particular\n\n259\n00:14:12.830 --> 00:14:13.550\nissuing CAs.\n\n260\n00:14:13.550 --> 00:14:20.020\nSo, several reasons you might set\nup these hierarchies, all right.\n\n261\n00:14:20.020 --> 00:14:24.150\nNow, let's go back and talk about,\nagain, why we would wanna do this.\n\n262\n00:14:24.150 --> 00:14:27.230\nCuz this is a much more complex scenario,\nright?\n\n263\n00:14:27.230 --> 00:14:30.000\nIf this compared to this.\n\n264\n00:14:30.000 --> 00:14:34.470\nI went from one server to six servers,\nall right.\n\n265\n00:14:34.470 --> 00:14:37.240\nThat's a lot more to set up,\na lot more equipment to maintain,\n\n266\n00:14:37.240 --> 00:14:39.620\na lot more servers to manage.\n\n267\n00:14:39.620 --> 00:14:41.080\nSo why would I wanna do this?\n\n268\n00:14:41.080 --> 00:14:42.830\nWell again, some of those reasons, right?\n\n269\n00:14:42.830 --> 00:14:44.010\nThe fall tolerance.\n\n270\n00:14:44.010 --> 00:14:45.230\nThe load balancing.\n\n271\n00:14:45.230 --> 00:14:46.330\nIn this scenario,\n\n272\n00:14:46.330 --> 00:14:49.850\nif this guy fails, nobody can\nrequest a certificate at this point.\n\n273\n00:14:49.850 --> 00:14:52.670\nI can't validate\ncertificates at this point.\n\n274\n00:14:52.670 --> 00:14:55.580\nso if you're relying on certificates for\nauthentication and\n\n275\n00:14:55.580 --> 00:14:58.540\nthings like that, we could be in a world\nof hurt until we get this guy back up.\n\n276\n00:14:58.540 --> 00:15:02.388\nThat's why this is good for a test\nenvironment, and not much much more.\n\n277\n00:15:02.388 --> 00:15:05.910\nWhereas in here,\nwe don't have that same concern.\n\n278\n00:15:05.910 --> 00:15:08.740\nI have multiples for\nthat load balancing fall tolerance.\n\n279\n00:15:08.740 --> 00:15:10.350\nLet's talk about security.\n\n280\n00:15:10.350 --> 00:15:12.100\nIn this one tier hierarchy,\n\n281\n00:15:12.100 --> 00:15:17.630\nif this root stand issuing CA gets\ncompromised, my entire PKI is shot.\n\n282\n00:15:17.630 --> 00:15:19.290\nI don't know what to trust anymore.\n\n283\n00:15:19.290 --> 00:15:20.430\nI have to start all over.\n\n284\n00:15:20.430 --> 00:15:22.530\nI don't know for\nsure what was compromised.\n\n285\n00:15:22.530 --> 00:15:24.040\nI can't trust any of it.\n\n286\n00:15:24.040 --> 00:15:26.990\nWhereas here,\nif this guy gets compromised,\n\n287\n00:15:26.990 --> 00:15:32.340\ncertificates issued from that\none are no longer trusted.\n\n288\n00:15:32.340 --> 00:15:34.300\nBut the ones issued by\nthis guy are just fine.\n\n289\n00:15:34.300 --> 00:15:36.240\nThe ones issued by this guy are just fine,\nright?\n\n290\n00:15:36.240 --> 00:15:39.310\nThese guys didn't get compromised,\njust this one.\n\n291\n00:15:39.310 --> 00:15:44.180\nSo just that subsection of\nmy PKI now has to be redone.\n\n292\n00:15:44.180 --> 00:15:49.161\nSo you can see that by setting it up\nthis way, I can split my risk up.\n\n293\n00:15:49.161 --> 00:15:54.430\nI don't have that same level of risk\nof losing the entire infrastructure.\n\n294\n00:15:54.430 --> 00:15:57.520\n>> Not putting all your eggs in\none basket, as they like to say.\n\n295\n00:15:57.520 --> 00:15:58.246\n>> Exactly right.\n\n296\n00:15:58.246 --> 00:16:02.993\nNow this root CA still\nposes a huge security risk.\n\n297\n00:16:02.993 --> 00:16:08.570\nIf it gets compromised, my entire PKI\nis now suspect and I can't trust it.\n\n298\n00:16:08.570 --> 00:16:10.980\nBut notice what I have over here.\n\n299\n00:16:10.980 --> 00:16:12.430\nSee what it says?\n\n300\n00:16:12.430 --> 00:16:13.710\nRoot CA offline.\n\n301\n00:16:14.785 --> 00:16:16.895\nWe don't even leave this guy online.\n\n302\n00:16:16.895 --> 00:16:18.925\nThat's how protected the server is.\n\n303\n00:16:18.925 --> 00:16:21.355\nDaniel was talking earlier\nabout there sign in and\n\n304\n00:16:21.355 --> 00:16:23.355\nkeeping that server in a vault somewhere.\n\n305\n00:16:23.355 --> 00:16:27.922\nAnd anytime it needs to come out, it\ncomes out with armed guards by its side.\n\n306\n00:16:27.922 --> 00:16:28.442\nRight?\n\n307\n00:16:28.442 --> 00:16:31.672\nThat's the level of protection that you,\nactually that's a little on the extreme\n\n308\n00:16:31.672 --> 00:16:33.922\nside, we don't see that\nin most enterprises.\n\n309\n00:16:33.922 --> 00:16:36.387\n>> I put it on the awesome side, Mike.\n\n310\n00:16:36.387 --> 00:16:40.912\n>> [LAUGH] You just want to walk around-\n>> Just gonna be awesome.\n\n311\n00:16:40.912 --> 00:16:43.622\n>> But in most organizations\nwe'll split this up like this,\n\n312\n00:16:43.622 --> 00:16:45.352\nwe'll set up a hierarchy.\n\n313\n00:16:45.352 --> 00:16:48.560\nThis guy is gonna be created,\nhe's gonna do his job and\n\n314\n00:16:48.560 --> 00:16:50.720\nissue a certificate to that first level.\n\n315\n00:16:50.720 --> 00:16:53.220\nAnd once he's done that,\nhe's taken offline.\n\n316\n00:16:53.220 --> 00:16:54.460\nHe's not even part of my domain.\n\n317\n00:16:54.460 --> 00:16:58.860\nIt's typically a standalone\nroot CA offline.\n\n318\n00:16:58.860 --> 00:17:01.048\nAnd we'll bring him up\nanytime we need to do,\n\n319\n00:17:01.048 --> 00:17:04.771\nwe'll bring him up to do some Windows\nupdates, and then shut him back down.\n\n320\n00:17:04.771 --> 00:17:08.250\nOr if I need to set up\nanother intermediate.\n\n321\n00:17:08.250 --> 00:17:12.040\nWell, I've got a third\nintermediate that I wanna set up,\n\n322\n00:17:12.040 --> 00:17:14.610\nwell it needs a certificate\nfrom that Root CA.\n\n323\n00:17:14.610 --> 00:17:20.340\nSo I'll bring him back online,\nI will issue that certificate.\n\n324\n00:17:22.460 --> 00:17:24.780\nTo this guy, and\nthen you get shut off again.\n\n325\n00:17:24.780 --> 00:17:26.210\nHe's not left online.\n\n326\n00:17:26.210 --> 00:17:31.340\nThat way the risk is severely reduced\nof that guy ever becoming compromised.\n\n327\n00:17:31.340 --> 00:17:33.510\nSomebody's going to have to\ngo through a lot of trouble.\n\n328\n00:17:33.510 --> 00:17:35.460\nTo try to get that guy compromised.\n\n329\n00:17:35.460 --> 00:17:38.660\nThat's just another layer\nof protection there.\n\n330\n00:17:39.740 --> 00:17:40.300\nAll right?\n\n331\n00:17:40.300 --> 00:17:41.860\nAnd that's why we split these up.\n\n332\n00:17:41.860 --> 00:17:43.330\nThat's why we create these hierarchies.\n\n333\n00:17:43.330 --> 00:17:44.320\nYes, load balancing.\n\n334\n00:17:44.320 --> 00:17:45.380\nYes, fault tolerance.\n\n335\n00:17:45.380 --> 00:17:47.660\nBut also to help with that risk,\nto split the risk up.\n\n336\n00:17:47.660 --> 00:17:51.410\nWe don't wanna rely, as Daniel said, we\ndon't want all of our eggs in one basket,\n\n337\n00:17:51.410 --> 00:17:55.420\notherwise we can end up with\na big pile of scrambled eggs.\n\n338\n00:17:55.420 --> 00:17:55.950\n>> Broken eggs.\n\n339\n00:17:55.950 --> 00:17:56.797\nYeah.\n[LAUGH]\n\n340\n00:17:56.797 --> 00:17:57.315\n>> Right?\n\n341\n00:17:57.315 --> 00:17:58.210\n[LAUGH] All right,\n\n342\n00:17:58.210 --> 00:18:03.170\nnow, this used to be the recommendation,\nfrom Microsoft, is to do this three tier\n\n343\n00:18:03.170 --> 00:18:07.730\nhierarchy, but they have changed, all\nright, they've kinda changed their tune.\n\n344\n00:18:07.730 --> 00:18:09.020\nAnd more often than not,\n\n345\n00:18:09.020 --> 00:18:12.820\nwhat you're gonna see nowadays\nis gonna be something like this.\n\n346\n00:18:12.820 --> 00:18:16.460\nThis is what we would call\na two-tier hierarchy.\n\n347\n00:18:16.460 --> 00:18:19.780\nAll right, I'm gonna try to get\nthat a little bit centered there.\n\n348\n00:18:19.780 --> 00:18:25.120\nWhere I have my root CA that I start off\nwith, the very top of my infrastructure.\n\n349\n00:18:25.120 --> 00:18:28.200\nHere's offline, and\nthen I have my issuing CA's.\n\n350\n00:18:28.200 --> 00:18:30.070\nThose are what I'm missing.\n\n351\n00:18:30.070 --> 00:18:31.190\nThat middle tier.\n\n352\n00:18:31.190 --> 00:18:34.140\nThose policy CA's are no longer there.\n\n353\n00:18:34.140 --> 00:18:37.900\nBecause we can really control what\ncertificates this guy has to issue and\n\n354\n00:18:37.900 --> 00:18:38.730\nthings like that.\n\n355\n00:18:38.730 --> 00:18:40.140\nWhat it's allowed to issue.\n\n356\n00:18:40.140 --> 00:18:41.930\nWe can control what he's allowed to issue.\n\n357\n00:18:41.930 --> 00:18:43.690\nWithout that middle tier.\n\n358\n00:18:43.690 --> 00:18:49.150\nAnd we greatly reduced\nthe complexity of managing this PKI\n\n359\n00:18:49.150 --> 00:18:50.970\nby removing that middle tier.\n\n360\n00:18:50.970 --> 00:18:55.170\nIn fact, I was reading\na couple blogs from Microsoft.\n\n361\n00:18:55.170 --> 00:18:58.050\nThey've switched, Microsoft IT,\n\n362\n00:18:58.050 --> 00:19:03.110\nthat's a pretty large organization we\ncan assume, right, probably pretty big.\n\n363\n00:19:03.110 --> 00:19:06.270\nThey've actually gone to\na two tier infrastructure.\n\n364\n00:19:06.270 --> 00:19:10.280\nSo if somebody like that,\nthat large, that many divisions,\n\n365\n00:19:10.280 --> 00:19:14.449\nthat much geographical separation,\ncan make a two tier infrastructure work,\n\n366\n00:19:15.670 --> 00:19:17.760\nyou think it'll work for\nyour organization?\n\n367\n00:19:17.760 --> 00:19:18.630\n>> No.\n>> [LAUGH]\n\n368\n00:19:18.630 --> 00:19:20.490\n>> Yeah, of course it will.\n\n369\n00:19:20.490 --> 00:19:21.550\n>> Most likely, right.\n\n370\n00:19:21.550 --> 00:19:25.710\nWhy add levels of complexity\nthat really aren't necessary,\n\n371\n00:19:25.710 --> 00:19:27.740\nthat aren't getting you that much.\n\n372\n00:19:27.740 --> 00:19:29.640\nAnd that's what it turns\nout with that three tier.\n\n373\n00:19:29.640 --> 00:19:34.409\nSo we've kinda shifted gears and we said\nall right two tiers is probably enough for\n\n374\n00:19:34.409 --> 00:19:36.180\nmost organizations.\n\n375\n00:19:36.180 --> 00:19:37.330\nRight?\n\n376\n00:19:37.330 --> 00:19:39.540\nSo those are the different\nmultiteir hierarchies, and\n\n377\n00:19:39.540 --> 00:19:41.180\nthey can call these out on the exam.\n\n378\n00:19:41.180 --> 00:19:43.760\nAnd their gonna ask you\nquestions like why?\n\n379\n00:19:43.760 --> 00:19:48.090\nOr they'll give you scenarios that says,\nhey you've got locations in the US and\n\n380\n00:19:48.090 --> 00:19:52.756\nin Europe and have different policies for\nwhat's required for your certificates.\n\n381\n00:19:52.756 --> 00:19:57.440\nIn the US versus England or\nsomething like that.\n\n382\n00:19:57.440 --> 00:20:00.000\nSo how would you do that?\n\n383\n00:20:00.000 --> 00:20:03.430\nThey'll give you options and\nyou would choose a multitier, right?\n\n384\n00:20:03.430 --> 00:20:05.250\nWhere I've got different issuing CAs.\n\n385\n00:20:05.250 --> 00:20:08.260\nOr if they give you\na three-tier scenario then\n\n386\n00:20:08.260 --> 00:20:12.210\nthat's probably what you'd wanna go with\nif you had different If you have reasons,\n\n387\n00:20:12.210 --> 00:20:14.400\nadministrative reasons to do that.\n\n388\n00:20:14.400 --> 00:20:16.170\nIf it's just for load balancing and\nfault tolerance,\n\n389\n00:20:16.170 --> 00:20:19.600\nyou can get away with just\na two tier infrastructure.\n\n390\n00:20:19.600 --> 00:20:24.110\nBut like I said, even Microsoft is really\nshifting so I'm trying to give you both.\n\n391\n00:20:24.110 --> 00:20:26.330\nThe exam,\nyou need to know about all three,\n\n392\n00:20:26.330 --> 00:20:30.440\nthe one tier, the two tier,\nthe three tier and for\n\n393\n00:20:30.440 --> 00:20:34.940\nthe exam if they're saying, hey I've\ngot different business requirements.\n\n394\n00:20:34.940 --> 00:20:39.400\nYou might be setting up that three tier so\nthat you can have different policy CAs,\n\n395\n00:20:39.400 --> 00:20:41.920\nthat middle, that intermediate layer.\n\n396\n00:20:41.920 --> 00:20:46.000\nIn the real world, however, most likely\nwhat you'll be doing is setting up\n\n397\n00:20:46.000 --> 00:20:49.650\na two-tier hierarchy for your CAs.\n\n398\n00:20:51.420 --> 00:20:54.480\nAll right,\nlet's see what else we need to talk about.\n\n399\n00:20:54.480 --> 00:20:59.630\nAnd the other thing you get from\ndoing a two tier or a three tier is\n\n400\n00:20:59.630 --> 00:21:05.280\nif you decide to no longer\ndo certain portions,\n\n401\n00:21:05.280 --> 00:21:09.730\nlike I don't want to issue certificates\nfor my software dev team anymore,\n\n402\n00:21:09.730 --> 00:21:12.910\nwe're not doing that, we're getting\neverything done out of house.\n\n403\n00:21:12.910 --> 00:21:17.750\nRight well I can shut these guys down and\nno longer issue those types of cigarette.\n\n404\n00:21:18.880 --> 00:21:20.003\nI don't know where that came from.\n\n405\n00:21:20.003 --> 00:21:21.680\n>> [LAUGH]\n>> You see what's on my mind.\n\n406\n00:21:21.680 --> 00:21:22.780\nCertificates right.\n\n407\n00:21:22.780 --> 00:21:24.600\nI don't need those anymore.\n\n408\n00:21:24.600 --> 00:21:27.590\nI can shut that down without\nredoing my entire PKI.\n\n409\n00:21:27.590 --> 00:21:32.670\nWhereas if I have this one tier I've\ngot a lot of reconfiguration to do, so\n\n410\n00:21:32.670 --> 00:21:36.070\njust another benefit of say going\nthrough that multitier hierarchy.\n\n411\n00:21:37.360 --> 00:21:40.310\nAll right, and we'll round up\ntalking about a few of the other\n\n412\n00:21:40.310 --> 00:21:43.390\nservices that go along with\ncertificate authorities.\n\n413\n00:21:43.390 --> 00:21:46.200\nWe have a certificate\nenrollment web service and\n\n414\n00:21:46.200 --> 00:21:50.930\nwe have certificate enrollment\npolicy web service.\n\n415\n00:21:50.930 --> 00:21:56.240\nThese are relatively new services that\ncome along with my certificate authority\n\n416\n00:21:56.240 --> 00:21:57.410\nthat we can choose to install.\n\n417\n00:21:57.410 --> 00:22:01.050\nIt's very modular and we'll get to\nsee that in our upcoming episodes.\n\n418\n00:22:01.050 --> 00:22:05.640\nBut those two services really\nwhat they're focus and\n\n419\n00:22:05.640 --> 00:22:11.830\nwhat their benefit is Is allowing my users\nand or computers to request certificates\n\n420\n00:22:11.830 --> 00:22:15.760\nwhen they're not connected to the domain,\nor when they're not part of the domain.\n\n421\n00:22:15.760 --> 00:22:20.610\nCuz most of these requests, I shouldn't\nsay most, all of them have used LDAP for\n\n422\n00:22:20.610 --> 00:22:23.450\nthe protocol that we're\nusing to communicate\n\n423\n00:22:23.450 --> 00:22:25.210\nwith the certificate authority.\n\n424\n00:22:25.210 --> 00:22:26.370\nAnd we know LDAP, right?\n\n425\n00:22:26.370 --> 00:22:28.640\nThat's where used part of\nour authentication protocol.\n\n426\n00:22:28.640 --> 00:22:30.390\nWe use that in Kerberos.\n\n427\n00:22:30.390 --> 00:22:32.450\nIt's limited to domain-based.\n\n428\n00:22:32.450 --> 00:22:36.170\nYou know if I wanted to set up a website,\nand I've got people that want to connect\n\n429\n00:22:36.170 --> 00:22:41.053\nto it that are not part of my domain,\nI can't use LDAP or Kerberos.\n\n430\n00:22:41.053 --> 00:22:43.105\nKinda the same concept here.\n\n431\n00:22:43.105 --> 00:22:47.795\nSo what these web enrollment web services\nor certificate enrollment web service and\n\n432\n00:22:47.795 --> 00:22:52.745\ncertificate enrollment policy web service,\nmouthfuls to say, do,\n\n433\n00:22:52.745 --> 00:22:56.735\nis they basically act as a proxy\nback to the certificate authority.\n\n434\n00:22:56.735 --> 00:23:03.730\nAnd now somebody can use HTTPS to connect\nto that, which can then use, that\n\n435\n00:23:03.730 --> 00:23:08.950\nproxy can then proxy that request via LDAP\nback to that certificate authority, right.\n\n436\n00:23:08.950 --> 00:23:13.080\nBut the user, the computer, the device,\ndoesn't necessarily have to be\n\n437\n00:23:13.080 --> 00:23:15.750\npart of the domain or\neven connected to the domain network.\n\n438\n00:23:15.750 --> 00:23:22.250\nWe can do this via HDPS sorry,\na web based, right my\n\n439\n00:23:22.250 --> 00:23:27.400\nhyper techs transfer protocol, secure of\ncourse we would want to keep that secure.\n\n440\n00:23:27.400 --> 00:23:33.700\nSo that is what those two services are for\nthey really together.\n\n441\n00:23:33.700 --> 00:23:38.990\nTo do that the certificate\nenrollment policy web service,\n\n442\n00:23:38.990 --> 00:23:41.390\nthis is what provides the policy.\n\n443\n00:23:41.390 --> 00:23:43.910\nLike when a computer is trying\nto request a certificate,\n\n444\n00:23:43.910 --> 00:23:45.950\nit needs to know what the policy is,\nwhat's required,\n\n445\n00:23:45.950 --> 00:23:48.480\nwhat certificates can I request,\nthings like that.\n\n446\n00:23:48.480 --> 00:23:53.650\nThat's what the certificate\nenrollment policy web service does.\n\n447\n00:23:53.650 --> 00:23:57.889\nThe certificate enrollment web service is\nwhat allows you to actually do the request\n\n448\n00:23:57.889 --> 00:23:59.032\nfor the certificate.\n\n449\n00:23:59.032 --> 00:24:02.504\nSo one for retrieving polices,\nto determine what's required.\n\n450\n00:24:02.504 --> 00:24:06.911\nOne for actually doing the request and\nretrieving the certificates.\n\n451\n00:24:06.911 --> 00:24:10.940\nWe also have something called\nNetwork Device Enrollment Service or NDES.\n\n452\n00:24:10.940 --> 00:24:16.950\nThis is basically Microsoft's\nimplementation of SCEP,\n\n453\n00:24:16.950 --> 00:24:19.250\nSimple Certificate Enrollment Protocol.\n\n454\n00:24:19.250 --> 00:24:23.210\nThis allows devices to\nrequest certificates, right.\n\n455\n00:24:23.210 --> 00:24:29.990\nLike a router might need a certificate to\nprovide https general or what have you.\n\n456\n00:24:29.990 --> 00:24:34.620\nBut a router is not a person, it can't go\nto the certificate services website and\n\n457\n00:24:34.620 --> 00:24:36.700\nrequest a certificate.\n\n458\n00:24:36.700 --> 00:24:40.360\nNDES is the way we can do that\nwithin a Microsoft environment.\n\n459\n00:24:41.550 --> 00:24:44.470\nIt's Microsoft again, it uses the SCEP.\n\n460\n00:24:44.470 --> 00:24:46.490\nAnd be familiar with both those acronyms.\n\n461\n00:24:46.490 --> 00:24:50.570\nKnow that NDES is a kind of a Microsoft\nthing, Network Device Enrollment Service.\n\n462\n00:24:50.570 --> 00:24:55.236\nBut it relies on SCEP, which is my\nSimple Certificate Enrollment Protocol,\n\n463\n00:24:55.236 --> 00:24:57.689\nwhich is not a Microsoft thing, right.\n\n464\n00:24:57.689 --> 00:25:01.790\nAnd again, the biggest thing we need\nto know is it allows devices to get\n\n465\n00:25:01.790 --> 00:25:05.360\ncertificates from my\nmertificate authority.\n\n466\n00:25:05.360 --> 00:25:10.350\nAll right and\nthen we also have to worry about,\n\n467\n00:25:10.350 --> 00:25:12.590\nhow are we doing on time there, Daniel?\n\n468\n00:25:12.590 --> 00:25:13.270\n>> We're running low.\n\n469\n00:25:13.270 --> 00:25:14.250\n>> We are running low.\n\n470\n00:25:14.250 --> 00:25:17.500\nAll right so lets finish up with NDES and\nthen we can come back and\n\n471\n00:25:17.500 --> 00:25:20.440\ntalk about some of the more,\nsome of the other stuff.\n\n472\n00:25:20.440 --> 00:25:22.290\nNDES, it's a service and\n\n473\n00:25:22.290 --> 00:25:25.650\nyou're gonna need to provide it\nwith an account to run under.\n\n474\n00:25:25.650 --> 00:25:31.490\nAnd you can either use the built in\napplication identity pool or app identity.\n\n475\n00:25:31.490 --> 00:25:34.158\nI'm just having trouble talking today.\n\n476\n00:25:34.158 --> 00:25:36.181\n>> [LAUGH]\n>> The application pool identity,\n\n477\n00:25:36.181 --> 00:25:39.578\nif I can get those words in\nthe right order, right, IIS.\n\n478\n00:25:39.578 --> 00:25:44.840\nThat's that built-in,\ndefault account that IIS runs under.\n\n479\n00:25:44.840 --> 00:25:47.210\nYou can use that or\nyou can create your own account.\n\n480\n00:25:47.210 --> 00:25:49.710\nYou can go into active directory,\nright-click new user,\n\n481\n00:25:49.710 --> 00:25:51.668\nmake it a service account and\nyou can use that.\n\n482\n00:25:51.668 --> 00:25:53.290\nIf you're gonna do that,\n\n483\n00:25:53.290 --> 00:25:56.410\nwhich is going to be a little more\nsecure because it's used just for\n\n484\n00:25:56.410 --> 00:26:00.810\nthat not also IIS and other websites and\napplications that you might be running.\n\n485\n00:26:00.810 --> 00:26:03.490\nThere are a couple things\nwe need to keep in mind.\n\n486\n00:26:03.490 --> 00:26:05.200\nIt does have to be a domain account.\n\n487\n00:26:05.200 --> 00:26:10.460\nSo it has to be a domain based account, it\ncan't be a local account on that server.\n\n488\n00:26:10.460 --> 00:26:14.558\nIt needs to be a member\nof the IISI user group,\n\n489\n00:26:14.558 --> 00:26:18.600\nwhich just is a matter of\nmanaging that local computer,\n\n490\n00:26:18.600 --> 00:26:22.300\nadding that domain account to that\nlocal group on that web server.\n\n491\n00:26:22.300 --> 00:26:27.160\nIt does have to have request permissions\nconfigured on the CA because this account,\n\n492\n00:26:27.160 --> 00:26:31.070\nbasically a device can use this\nservice to request a certificate.\n\n493\n00:26:31.070 --> 00:26:34.440\nSo this account is gonna have to\ngo to certificate authority and\n\n494\n00:26:34.440 --> 00:26:37.040\nrequest a certificate on\nbehalf of the device.\n\n495\n00:26:37.040 --> 00:26:41.830\nSo it does have the permissions to request\na certificate and there's a special\n\n496\n00:26:41.830 --> 00:26:47.660\ncertificate called the NDES certificate\nthat we have to issue to that account.\n\n497\n00:26:47.660 --> 00:26:49.810\nSo it also need permission to\nrequest that account as well,\n\n498\n00:26:49.810 --> 00:26:52.539\nthat's what allows it to be this NDES.\n\n499\n00:26:53.560 --> 00:26:56.360\nAnd it also has to have\na service principle name set up,\n\n500\n00:26:56.360 --> 00:27:00.470\nan active directory that is what allows\nthese devices to find that account.\n\n501\n00:27:00.470 --> 00:27:04.490\nBasically a service principle\nname is an alias for that account\n\n502\n00:27:04.490 --> 00:27:09.780\nthat the devices can use to connect\nto the CA and request certificates.\n\n503\n00:27:09.780 --> 00:27:13.135\nBut a little bit to think about it,\nand we'll go over all of this as\n\n504\n00:27:13.135 --> 00:27:16.840\nwe go through our demonstrations and\nour labs in upcoming episodes.\n\n505\n00:27:16.840 --> 00:27:18.490\n>> That's right.\nWell now you've done a great job,\n\n506\n00:27:18.490 --> 00:27:23.030\nMike of laying the foundational ground\nwork that we need of understanding for\n\n507\n00:27:23.030 --> 00:27:26.290\ngetting into those demonstrations so\n\n508\n00:27:26.290 --> 00:27:29.545\nthey actually make sense to\nus as we watch you do it.\n\n509\n00:27:29.545 --> 00:27:31.200\n>> [LAUGH]\n>> That will be helpful for\n\n510\n00:27:31.200 --> 00:27:32.580\nall of us out there.\n\n511\n00:27:32.580 --> 00:27:35.310\nWell, we do appreciate you stopping by,\nand know we definitely have a part\n\n512\n00:27:35.310 --> 00:27:38.070\ntwo that we're gonna have to look\nat to see these demonstrations.\n\n513\n00:27:38.070 --> 00:27:39.320\nHopefully, we'll see you guys then.\n\n514\n00:27:39.320 --> 00:27:41.840\nBut as for this episode, Mike,\nthanks for joining us and\n\n515\n00:27:41.840 --> 00:27:42.990\nwe thank you guys for watching.\n\n516\n00:27:42.990 --> 00:27:44.910\nWe're gonna go ahead and\nsign off for ITPro.TV.\n\n517\n00:27:44.910 --> 00:27:46.730\nI've been your host, Daniel Lowrie.\n\n518\n00:27:46.730 --> 00:27:47.360\n>> And I'm Mike Rodrick.\n\n519\n00:27:47.360 --> 00:27:48.282\n>> And we'll see you next time.\n\n520\n00:27:48.282 --> 00:27:57.660\n[MUSIC]\n\n",
          "vimeoId": "170667315"
        },
        {
          "description": "In this episode, Daniel and Mike continue their discussion of designing and implementing a Certificate Authority(CA) Infrastructure. Here they demonstrate the process of certificate validation and revocation. Finally, they look at backing up and restoring the CA database and private key in a Disaster Recovery situation.",
          "length": "1869",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-2-design_a_ca_infrastructure_pt2-060716-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-2-design_a_ca_infrastructure_pt2-060716-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-1-2-design_a_ca_infrastructure_pt2-060716-1-sm.jpg",
          "title": "Design a CA Infrastructure Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.504 --> 00:00:17.140\nAll right, greetings everyone and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:17.140 --> 00:00:20.510\nI'm your host Daniel Lowrie and in today's\nepisode we are continuing on with our\n\n4\n00:00:20.510 --> 00:00:26.020\nseries on implementing an advanced server\ninfrastructure using Windows Server 2012.\n\n5\n00:00:26.020 --> 00:00:31.045\nJoining me back in the studio again today\nfor a part part two on certificates and\n\n6\n00:00:31.045 --> 00:00:33.675\ncertificate authorities is our\ngood friend Mr. Mike Rodrick.\n\n7\n00:00:33.675 --> 00:00:35.535\nMike welcome back sir glad to have you.\n\n8\n00:00:35.535 --> 00:00:36.135\nAnd how's it going?\n\n9\n00:00:36.135 --> 00:00:37.775\n>> It's going great,\nthanks for having me back.\n\n10\n00:00:37.775 --> 00:00:40.805\nAnd we gotta continue our conversation cuz\nwe didn't get a chance to cover everything\n\n11\n00:00:40.805 --> 00:00:43.955\nwe need to know about those good\nold certificate authorities.\n\n12\n00:00:43.955 --> 00:00:47.425\nSo let's just dive right back in and\ncontinue our conversation.\n\n13\n00:00:47.425 --> 00:00:49.620\nAnd we talked about the hierarchy.\n\n14\n00:00:49.620 --> 00:00:52.690\nSetting up the public key infrastructure.\n\n15\n00:00:52.690 --> 00:00:54.090\nWe talked about the root and\n\n16\n00:00:54.090 --> 00:00:57.730\nwe'll come back we'll talk about it\nagain as we do our demonstration but\n\n17\n00:00:57.730 --> 00:01:02.290\nwe talked a little bit about the root CA\nbeing that very top of the hierarchy.\n\n18\n00:01:02.290 --> 00:01:07.210\nRemember there's nobody above that root\nCA, so it has a self-signed certificate.\n\n19\n00:01:07.210 --> 00:01:12.570\nAnd then that root CA can issue\ncertificates to either intermediate CA's,\n\n20\n00:01:12.570 --> 00:01:18.630\npolicy CA's, who can then in turn issue\ncertificates to my lower subordinate\n\n21\n00:01:18.630 --> 00:01:22.750\nCA's which might be my issuing CA's or\ndepending on what we do, we might have\n\n22\n00:01:22.750 --> 00:01:27.190\na two tier, where we get the root and then\nthe issuing CAs or those subordinate CAs.\n\n23\n00:01:27.190 --> 00:01:28.020\nWe've talked a little bit about that.\n\n24\n00:01:28.020 --> 00:01:32.234\nThe next thing I really want to talk\nabout is just the concept of trust and\n\n25\n00:01:32.234 --> 00:01:36.801\nthe way this works cuz it is something\nthat we're gonna have to understand for\n\n26\n00:01:36.801 --> 00:01:40.947\nthe exam, and it also helps\nunderstanding the revocation process and\n\n27\n00:01:40.947 --> 00:01:44.248\nsome of the management that we\nhave to do on our public key\n\n28\n00:01:44.248 --> 00:01:47.090\ninfrastructure helps\nmake sense out of that.\n\n29\n00:01:47.090 --> 00:01:50.300\nSo let's talk a little\nbit about that process.\n\n30\n00:01:50.300 --> 00:01:54.090\nSo again,\nit's really all based on trust, right?\n\n31\n00:01:54.090 --> 00:01:57.520\nWhat happens,\nthat root CA issues a certificate.\n\n32\n00:01:59.135 --> 00:02:00.985\nLet me think of a better way to do this.\n\n33\n00:02:00.985 --> 00:02:04.735\nLet's use an analogy, because it's\nsomething most of us are gonna be familiar\n\n34\n00:02:04.735 --> 00:02:08.925\nwith especially here in the States and\nmost of the world's pretty much similar.\n\n35\n00:02:08.925 --> 00:02:10.782\nWe have driver's licenses here.\n\n36\n00:02:10.782 --> 00:02:15.362\nAnd when a police officer pulls me over,\nhe asks for my driver's license.\n\n37\n00:02:15.362 --> 00:02:17.220\nDoesn't happen all that often,\nbut it does happen.\n\n38\n00:02:17.220 --> 00:02:18.497\nI do have a heavy foot.\n\n39\n00:02:18.497 --> 00:02:19.439\n>> That's surprising.\n\n40\n00:02:19.439 --> 00:02:20.690\n[LAUGH]\n>> Yeah.\n\n41\n00:02:20.690 --> 00:02:21.335\n[LAUGH] I know.\n\n42\n00:02:21.335 --> 00:02:22.020\nThey just don't catch me.\n\n43\n00:02:22.020 --> 00:02:25.930\nI hand him my driver's license.\n\n44\n00:02:25.930 --> 00:02:28.860\nHe looks at the information\non that driver's license and\n\n45\n00:02:28.860 --> 00:02:31.070\nhe trusts that the information is valid.\n\n46\n00:02:31.070 --> 00:02:33.329\nHe doesn't have to some\nhow validate my name.\n\n47\n00:02:33.329 --> 00:02:34.860\nIt's got my name.\n\n48\n00:02:34.860 --> 00:02:36.170\nIt's got my address.\n\n49\n00:02:36.170 --> 00:02:38.040\nIt's got my date of birth.\n\n50\n00:02:38.040 --> 00:02:41.320\nIt's got all that information\nthat identifies me.\n\n51\n00:02:41.320 --> 00:02:43.630\nRight, a driver's license\nespecially here in the States,\n\n52\n00:02:43.630 --> 00:02:46.290\nit's also a form of\nidentification that I can use.\n\n53\n00:02:46.290 --> 00:02:52.070\nAnd when I present that to buy alcohol or\nsomething that requires a certain age,\n\n54\n00:02:52.070 --> 00:02:54.840\nthey trust that document\nthat I'm handing them.\n\n55\n00:02:54.840 --> 00:02:56.250\nWhy is that?\n\n56\n00:02:56.250 --> 00:02:59.825\nHow do they know that I didn't,\nI don't know, make this up.\n\n57\n00:02:59.825 --> 00:03:03.545\nWell, because they trust\nthe issuing party.\n\n58\n00:03:03.545 --> 00:03:07.355\nOn my driver's license there's\na stamp from the State of Florida and\n\n59\n00:03:07.355 --> 00:03:10.805\nthey know that the State of Florida,\nbefore it would ever issue me\n\n60\n00:03:10.805 --> 00:03:14.290\nthe license in the first place,\nthey validated all the information.\n\n61\n00:03:14.290 --> 00:03:17.710\nI had to bring in birth certificates or\nelectric bills or\n\n62\n00:03:17.710 --> 00:03:18.650\nwhatever the case may be.\n\n63\n00:03:18.650 --> 00:03:22.360\nWhatever they required for\nme to request that drivers license.\n\n64\n00:03:22.360 --> 00:03:26.242\nI had to validate all the information and\nthen they put all that information on that\n\n65\n00:03:26.242 --> 00:03:28.996\ndrivers license, seal it up,\nput their stamp on their and\n\n66\n00:03:28.996 --> 00:03:32.054\nnow I can use it anywhere that\ntrusts the state of Florida right?\n\n67\n00:03:32.054 --> 00:03:34.890\nNow, if I go to another country.\n\n68\n00:03:34.890 --> 00:03:38.730\nThey might not readily accept that\nas a means of identification.\n\n69\n00:03:38.730 --> 00:03:44.390\nBecause they might not have the same level\nof trust with the State of Florida, right.\n\n70\n00:03:44.390 --> 00:03:46.230\nAnd that's the same way certificates work.\n\n71\n00:03:46.230 --> 00:03:51.480\nWhen I present a certificate, the person\nthat's receiving that certificate\n\n72\n00:03:51.480 --> 00:03:54.060\nhas to trust the issuing authority, right.\n\n73\n00:03:54.060 --> 00:03:58.850\nWhen you go to say, Bank of America and\nyou want to set up an HTTPS connection.\n\n74\n00:03:58.850 --> 00:04:02.010\nWhat you're doing is you're saying,\nhey, Bank of America, I want to set up\n\n75\n00:04:02.010 --> 00:04:06.400\na secure connection, but before we\ndo that, prove to me who you are.\n\n76\n00:04:06.400 --> 00:04:10.050\nBank of America's Web\nserver then sends over its\n\n77\n00:04:10.050 --> 00:04:12.630\ncertificate that includes its public key.\n\n78\n00:04:12.630 --> 00:04:17.050\nMy computer looks at that certificate,\nsays okay everything seems to be in order.\n\n79\n00:04:17.050 --> 00:04:18.091\nYou are, it says you're Bank of America.\n\n80\n00:04:18.091 --> 00:04:22.460\nThis certificate can be used for\nidentification or\n\n81\n00:04:22.460 --> 00:04:27.470\nWeb server identification and\nit's signed by Verisign.\n\n82\n00:04:27.470 --> 00:04:28.860\nThat's an important part there.\n\n83\n00:04:28.860 --> 00:04:30.180\nIt's kind of like the state of Florida.\n\n84\n00:04:30.180 --> 00:04:31.440\nThis is Verisign.\n\n85\n00:04:31.440 --> 00:04:37.980\nMy computer knows to trust Verisign and\nit says, alright, I trust that Verisign\n\n86\n00:04:37.980 --> 00:04:42.310\ndid their job and before they ever\nissued a certificate to Bank of America.\n\n87\n00:04:42.310 --> 00:04:45.360\nThey made sure they were actually\ndealing with Bank of America.\n\n88\n00:04:45.360 --> 00:04:47.590\nMade them prove it in some way.\n\n89\n00:04:47.590 --> 00:04:51.343\nAnd so it's not just some random person\nthat wants to host a Website and\n\n90\n00:04:51.343 --> 00:04:53.200\nthen name it Bank of America, right?\n\n91\n00:04:53.200 --> 00:04:57.670\nMy computer's trusting that that\ninformation has already been validated.\n\n92\n00:04:57.670 --> 00:05:00.561\n>> Now, Mike, what about fake IDs\nwhat if I forged the documents?\n\n93\n00:05:00.561 --> 00:05:04.570\nCan we do that as well do we have to\nworry about that in the digital world?\n\n94\n00:05:04.570 --> 00:05:08.180\n>> We absolutely do but\nnot quite as much as say fake IDs.\n\n95\n00:05:08.180 --> 00:05:11.940\nFake IDs are relatively easy to\ndo fake certificates are not so\n\n96\n00:05:11.940 --> 00:05:16.440\neasy to do because of the fact that\nmy computer has to know to trust.\n\n97\n00:05:16.440 --> 00:05:19.870\nI can setup a CA right now in fact\nwe're going to in a later episode and\n\n98\n00:05:19.870 --> 00:05:21.900\nI could start issuing certificates and\n\n99\n00:05:21.900 --> 00:05:24.740\nI could issue certificates in\nthe name of Bank of America.\n\n100\n00:05:24.740 --> 00:05:28.070\nI could issue my own Web\nserver a certificate that said\n\n101\n00:05:28.070 --> 00:05:30.380\nI am Bank of America.\n\n102\n00:05:30.380 --> 00:05:33.094\nThe problem is,\nwhen somebody comes to that website,\n\n103\n00:05:33.094 --> 00:05:35.631\nand I present that certificate\nto their computer,\n\n104\n00:05:35.631 --> 00:05:38.825\ntheir computer's gonna say, but\nthis is signed by Mike's CA.\n\n105\n00:05:38.825 --> 00:05:43.990\nI don't have any idea who Mike's CA is,\nand I'm not gonna trust it.\n\n106\n00:05:43.990 --> 00:05:48.060\nAnd for\nme to fake it into sign it as Verisign\n\n107\n00:05:48.060 --> 00:05:52.060\nwould require me to\nhave their private key.\n\n108\n00:05:52.060 --> 00:05:54.000\nWhich I'm never ever,\never going to be able to take.\n\n109\n00:05:54.000 --> 00:05:57.020\nAs Daniel said they keep this\nstuff locked up with armed guards.\n\n110\n00:05:57.020 --> 00:06:01.900\nI mean they maybe not quit that extreme,\nbut they protect this very very well.\n\n111\n00:06:01.900 --> 00:06:05.300\nBecause their entire reputation\nas a business relys on that, and\n\n112\n00:06:05.300 --> 00:06:06.998\nif that private key got exposed,\n\n113\n00:06:06.998 --> 00:06:10.350\nI could then start doing some things\nthat would ruin their business.\n\n114\n00:06:10.350 --> 00:06:11.770\nSo, it's very protected.\n\n115\n00:06:11.770 --> 00:06:15.850\nSo, that's how we prevent\nthe fakes from working.\n\n116\n00:06:15.850 --> 00:06:17.130\nThis is why it's very important.\n\n117\n00:06:17.130 --> 00:06:20.680\nWhen you go to website and\nyour computer's telling you, hey,\n\n118\n00:06:20.680 --> 00:06:23.610\nI don't trust the certificate that\nthis website's trying to present,\n\n119\n00:06:23.610 --> 00:06:28.240\nare you sure you wanna continue or\ndo you wanna navigate away from this page?\n\n120\n00:06:28.240 --> 00:06:30.630\nYou really should navigate\naway from this page.\n\n121\n00:06:30.630 --> 00:06:33.580\nIf you go ahead and\nconnect to the Website.\n\n122\n00:06:33.580 --> 00:06:35.890\nOkay, well,\nthat's probably not the best idea.\n\n123\n00:06:35.890 --> 00:06:37.437\nBut don't put your credit\ncard numbers in there.\n\n124\n00:06:37.437 --> 00:06:40.976\nIf you just wanna go check it out and\nsee what it is or do some research, fine.\n\n125\n00:06:40.976 --> 00:06:45.800\nBut don't give any, basically,\nyou don't know who that is at this point.\n\n126\n00:06:45.800 --> 00:06:47.030\nSo that's really what it's all about.\n\n127\n00:06:47.030 --> 00:06:49.320\nIt's all about this trust.\n\n128\n00:06:49.320 --> 00:06:53.320\nNow let's talk about it in our\ncertificate authority in our public key\n\n129\n00:06:53.320 --> 00:06:54.010\ninfrastructure.\n\n130\n00:06:54.010 --> 00:06:57.160\nLet's go back to my drawings here.\n\n131\n00:06:57.160 --> 00:06:59.810\nAnd we have a single tier.\n\n132\n00:06:59.810 --> 00:07:00.530\nAll right?\n\n133\n00:07:00.530 --> 00:07:03.150\nWe could have, and let me zoom out for\njust a second and I'll grab,\n\n134\n00:07:03.150 --> 00:07:06.300\nI'm gonna use this icon to\nrepresent a certificate.\n\n135\n00:07:06.300 --> 00:07:09.719\nEven though it doesn't really look\nlike a certificate, all right?\n\n136\n00:07:10.850 --> 00:07:12.780\nSo my root and issuing CA here.\n\n137\n00:07:12.780 --> 00:07:14.960\nRemember there's nobody\nhigher than this root.\n\n138\n00:07:14.960 --> 00:07:17.650\nSo he's issued his own certificate.\n\n139\n00:07:17.650 --> 00:07:23.110\nAnd then this server can then\nissue certificates to users,\n\n140\n00:07:23.110 --> 00:07:25.900\nto computers or what have you.\n\n141\n00:07:25.900 --> 00:07:28.340\nAnd if my user, let's say this is me here.\n\n142\n00:07:28.340 --> 00:07:31.350\nIf I present this certificate\nto this other user.\n\n143\n00:07:31.350 --> 00:07:35.150\nSay hey I'm gonna\ndigitally sign this email.\n\n144\n00:07:35.150 --> 00:07:36.670\nI'm using my certificate.\n\n145\n00:07:36.670 --> 00:07:39.020\nThey are, that person,\nnot them directly, but\n\n146\n00:07:39.020 --> 00:07:43.070\nthe application they're using,\nis going to validate that certificate.\n\n147\n00:07:43.070 --> 00:07:46.160\nIt's going to go through\na process of validation.\n\n148\n00:07:46.160 --> 00:07:49.880\nIt's going to look at the certificate and\nsee who it was signed by.\n\n149\n00:07:49.880 --> 00:07:52.423\nAnd in this case,\nit's gonna be signed by root CA, right?\n\n150\n00:07:52.423 --> 00:07:55.848\nHe's the one that issued the CA to\nthe little girl stick figure over here.\n\n151\n00:07:55.848 --> 00:08:00.207\nAnd so this person, who receives\nthat certificate says hm, all right,\n\n152\n00:08:00.207 --> 00:08:02.140\nlet me look in my trusted roots.\n\n153\n00:08:02.140 --> 00:08:05.971\nIf this guy is listed in\nhis trusted roots CAs,\n\n154\n00:08:05.971 --> 00:08:10.500\nthen he'll trust all\ncertificates issued by that CA.\n\n155\n00:08:12.570 --> 00:08:18.610\nThat's what we call a trust chain or\na chain of trust.\n\n156\n00:08:18.610 --> 00:08:21.490\nIf we move into a little\nmore complex hierarchy,\n\n157\n00:08:21.490 --> 00:08:26.300\nwhat's gonna happen in this case is this\nguy has a self-sign certificate up here,\n\n158\n00:08:26.300 --> 00:08:29.350\nand we'll just dump a few more out.\n\n159\n00:08:29.350 --> 00:08:35.297\nHe's is gonna issue a certificate to\nthis intermediate CA, issued by root CA,\n\n160\n00:08:35.297 --> 00:08:41.069\nissued to intermediate CA whoâ€™s in turn\ngonna issue a certificate to issuing\n\n161\n00:08:41.069 --> 00:08:46.820\nCA who's in turn gonna issue\na certificate to this user down here.\n\n162\n00:08:46.820 --> 00:08:51.700\nNow when this user tries to use that\ncertificate, whoever is validating that\n\n163\n00:08:51.700 --> 00:08:56.342\ncertificate is gonna look at it and say,\nthis was issued by, Mr. Issuing CA and\n\n164\n00:08:56.342 --> 00:09:01.630\nit's gonna talk to issuing CA and say all\nright, your certificate was issued by\n\n165\n00:09:01.630 --> 00:09:05.520\nIntermediate CA,\nwhose certificate was issued by root CA.\n\n166\n00:09:05.520 --> 00:09:10.950\nIt's gonna follow that chain all\nthe way back up to a trusted root and\n\n167\n00:09:10.950 --> 00:09:17.270\nthen it's gonna look to see if that root\ncertificate is in my trusted root store.\n\n168\n00:09:17.270 --> 00:09:20.730\nAnd if it is,\nfantastic I'll trust the certificate, but\n\n169\n00:09:20.730 --> 00:09:24.320\nI have to trust that entire chain\nall the way back up to the root.\n\n170\n00:09:25.560 --> 00:09:28.700\nNow, when you, and let's just take a look.\n\n171\n00:09:28.700 --> 00:09:31.320\nI'm gonna take a look at Windows machine\nthat I've got up here somewhere.\n\n172\n00:09:31.320 --> 00:09:36.430\nWe'll take this guy for example who just\nwent to sleep in front of our very eyes.\n\n173\n00:09:36.430 --> 00:09:39.633\nI'm gonna fire up Internet Explorer,\n\n174\n00:09:39.633 --> 00:09:44.493\neverybody's favorite browser,\nand yeah, Ask Me Later.\n\n175\n00:09:44.493 --> 00:09:47.711\nAnd I'm gonna go into my\nOptions over here, and\n\n176\n00:09:47.711 --> 00:09:52.790\nI'm gonna go to the Connections,\nnot the connections, the Content tab.\n\n177\n00:09:52.790 --> 00:09:58.380\nAnd there's a button right here in\nthe middle that says Certificates.\n\n178\n00:09:58.380 --> 00:09:59.140\nI'm gonna click on that.\n\n179\n00:10:00.430 --> 00:10:04.920\nAnd this allows me to see\nwhat certificates I trust.\n\n180\n00:10:04.920 --> 00:10:08.850\nIf I look at this\nTrusted Root Certification Authority tab,\n\n181\n00:10:08.850 --> 00:10:11.560\nlook at this list of\ncertificate authorities.\n\n182\n00:10:12.750 --> 00:10:15.530\nThese are what we call Public CAs.\n\n183\n00:10:15.530 --> 00:10:22.240\nPlaces like Microsoft, Thawte, VeriSign,\nEquifax, GTE, Globalsign, right.\n\n184\n00:10:22.240 --> 00:10:27.480\nThese are root CAs that my\ncomputer already knows to trust.\n\n185\n00:10:27.480 --> 00:10:29.748\nThese are what we call Public CAs.\n\n186\n00:10:29.748 --> 00:10:32.430\nThese are businesses that do this for\na living,\n\n187\n00:10:32.430 --> 00:10:35.770\nanybody can go to their website and\nrequest a certificate.\n\n188\n00:10:35.770 --> 00:10:40.600\nAnd because they're already trusted\nby most of the computers out there,\n\n189\n00:10:40.600 --> 00:10:43.410\nif I'm running a website and\nI wanna sell product,\n\n190\n00:10:43.410 --> 00:10:47.070\nI can go buy a certificate from VeriSign,\nthey can issue me that certificate,\n\n191\n00:10:47.070 --> 00:10:50.620\nI can install it on my web server,\nDaniel can come to my website,\n\n192\n00:10:50.620 --> 00:10:55.160\ngo to his shopping cart, set up an SSL\nconnection, retrieve that certificate.\n\n193\n00:10:55.160 --> 00:10:59.580\nHis computer says, it was issued by\nVeriSign, I trust VeriSign, therefore,\n\n194\n00:10:59.580 --> 00:11:01.200\nI'm gonna trust this certificate.\n\n195\n00:11:01.200 --> 00:11:04.000\nLet's set up SSL and everything's good.\n\n196\n00:11:04.000 --> 00:11:07.890\nNow if I ran my own CA and\nissued my own certificate on my website,\n\n197\n00:11:07.890 --> 00:11:09.766\nwe're gonna run into what\nwe talked about earlier.\n\n198\n00:11:09.766 --> 00:11:14.550\nDaniel's computer's not gonna trust\nthe issuing CA, or the root CA that it\n\n199\n00:11:14.550 --> 00:11:18.400\nchains back up to, and his computer's\ngonna throw up a big, fat red warning.\n\n200\n00:11:18.400 --> 00:11:22.070\nAnd now Daniel's gonna be very leery about\nactually putting in credit card numbers\n\n201\n00:11:22.070 --> 00:11:23.530\nand buying any product from me.\n\n202\n00:11:23.530 --> 00:11:27.970\nSo when we talked about public CAs, that's\nthe advantage of getting a certificate\n\n203\n00:11:27.970 --> 00:11:32.870\nfrom a public CA is that the trust is\nalready there for most devices out there.\n\n204\n00:11:32.870 --> 00:11:38.060\nSo if you have to deal with public,\ntypically you want to go ahead and\n\n205\n00:11:38.060 --> 00:11:41.008\nget your certificate from\none of these trusted CAs.\n\n206\n00:11:41.008 --> 00:11:44.432\nNow if Daniel's a business partner\nof mine, he's a vendor and\n\n207\n00:11:44.432 --> 00:11:47.930\nhe's gonna be doing a lot of work with me,\nand we issue our own certificates,\n\n208\n00:11:47.930 --> 00:11:52.360\nwhat I can do is hey Daniel, here is\nmy public certificate from my root CA.\n\n209\n00:11:52.360 --> 00:11:56.130\nI want you to go ahead and\ninstall it into your trusted root.\n\n210\n00:11:56.130 --> 00:11:58.590\nAnd Daniel can say I will,\nI'll do that, I'll go ahead and\n\n211\n00:11:58.590 --> 00:12:02.960\ninstall that root CA\ncertificate from Mike's CA.\n\n212\n00:12:02.960 --> 00:12:07.880\nOnce he does that, it'll be in this\nlist just like any other root CA and\n\n213\n00:12:07.880 --> 00:12:13.000\nnow any certificate issued by my PKI,\nDaniel will now trust.\n\n214\n00:12:13.000 --> 00:12:16.490\nSo, that's a good thing, but\nit can also be a dangerous thing.\n\n215\n00:12:16.490 --> 00:12:17.440\nYou wanna be careful.\n\n216\n00:12:17.440 --> 00:12:21.840\nYou'll have sites prompt you that say hey,\nyou don't trust this,\n\n217\n00:12:21.840 --> 00:12:24.160\ndo you want to trust this,\ndo you want to install the certificate.\n\n218\n00:12:24.160 --> 00:12:24.760\nYou can.\n\n219\n00:12:24.760 --> 00:12:27.710\nAnd, you will now trust the certificate,\nbut what you've got to remember is\n\n220\n00:12:27.710 --> 00:12:31.880\nyou will now trust all certificates\nissued by that organization.\n\n221\n00:12:31.880 --> 00:12:36.160\nSo, you'd better trust that organization\nis not going to do anything hinky or\n\n222\n00:12:36.160 --> 00:12:37.900\nyou could get yourself in trouble, right?\n\n223\n00:12:37.900 --> 00:12:39.422\n>> Yeah, I've seen it work both ways.\n\n224\n00:12:39.422 --> 00:12:43.090\nI've seen users call me and say I'm\ngetting this warning, I'm trying to go to\n\n225\n00:12:43.090 --> 00:12:47.270\nthis site and it's asking me to install\nsome certificate, should I do that?\n\n226\n00:12:47.270 --> 00:12:48.960\nAnd I'm like okay what is the site?\n\n227\n00:12:48.960 --> 00:12:53.480\nThey tell me, if it wasn't any part of our\nbusiness organization or somebody that we\n\n228\n00:12:53.480 --> 00:12:57.670\ndo business with, I would say it's a good\nthing that you were paranoid about this.\n\n229\n00:12:57.670 --> 00:13:00.210\nWe don't wanna trust that certificate.\n\n230\n00:13:00.210 --> 00:13:03.858\nBut then I get the people who say, it says\nissued by or it tells you exactly who\n\n231\n00:13:03.858 --> 00:13:06.830\nis issuing this to you and\nit would say the name of our company.\n\n232\n00:13:06.830 --> 00:13:11.340\nAnd I would say, well, that is us so\nyou can trust that and\n\n233\n00:13:11.340 --> 00:13:13.840\nit's okay to just read\nthat really quickly.\n\n234\n00:13:13.840 --> 00:13:15.520\nSo it can be a double edged sword for\n\n235\n00:13:15.520 --> 00:13:18.920\nthe admins that have to deal with\nthe users that don't understand that.\n\n236\n00:13:18.920 --> 00:13:22.890\nJust from a practical perspective, not\nanything necessarily to deal with an exam\n\n237\n00:13:22.890 --> 00:13:27.450\nbut just that practical element of it\nto having to tell people that aren't\n\n238\n00:13:27.450 --> 00:13:31.550\naware of what this means what's going on,\nand what they can and cannot trust.\n\n239\n00:13:31.550 --> 00:13:33.650\nAnd you do have to be very careful.\n\n240\n00:13:33.650 --> 00:13:38.040\nMake sure that those issuing CAs are\nsomebody that you do trust before you say,\n\n241\n00:13:38.040 --> 00:13:39.340\nyeah, I trust them.\n\n242\n00:13:39.340 --> 00:13:40.090\n>> Absolutely.\n\n243\n00:13:40.090 --> 00:13:42.560\nAnd you see it a lot, if an organization,\n\n244\n00:13:42.560 --> 00:13:47.460\ncuz going to a public CA like Thawte or\nVeriSign solves that problem of trust,\n\n245\n00:13:47.460 --> 00:13:51.480\nbecause they're already trusted by all of\nmy Windows devices and more out there.\n\n246\n00:13:52.620 --> 00:13:54.960\nBut it costs me money.\n\n247\n00:13:54.960 --> 00:13:56.730\nI have to pay Verisign.\n\n248\n00:13:56.730 --> 00:13:58.370\nThey're not just giving\nme that certificate.\n\n249\n00:13:58.370 --> 00:13:59.660\nI have to pay them.\n\n250\n00:13:59.660 --> 00:14:02.130\nAnd it's not a permanent thing.\n\n251\n00:14:02.130 --> 00:14:06.140\nIt has to be renewed every year or\nevery two years or every five years.\n\n252\n00:14:06.140 --> 00:14:08.000\nYou can get a five year or\nten year certificate,\n\n253\n00:14:08.000 --> 00:14:10.130\nbut you're gonna pay a whole lot more.\n\n254\n00:14:10.130 --> 00:14:14.190\nYou can get a one year certificate but\nnow I gotta renew it more often and\n\n255\n00:14:14.190 --> 00:14:17.610\nit depends on the company what\nthey're even willing to offer you.\n\n256\n00:14:17.610 --> 00:14:20.360\n>> And don't forget to renew it,\nor your website breaks.\n\n257\n00:14:20.360 --> 00:14:24.980\nYou know things start going down it\ndoesn't work cuz you'll get errors from\n\n258\n00:14:24.980 --> 00:14:29.670\nthe browsers and things just saying\nthis is an expired certificate.\n\n259\n00:14:29.670 --> 00:14:31.560\nDo you really wish to proceed here?\n\n260\n00:14:31.560 --> 00:14:32.790\nOr maybe you can't at all.\n\n261\n00:14:32.790 --> 00:14:37.580\nMaybe your security is to say if it's\nan expired certificate, do not proceed and\n\n262\n00:14:37.580 --> 00:14:38.376\nyou won't go anywhere.\n\n263\n00:14:38.376 --> 00:14:39.680\n>> [LAUGH] It's an interesting thing.\n\n264\n00:14:39.680 --> 00:14:44.200\nI bartended for many years, and one of the\nthings when you're bartending you learn,\n\n265\n00:14:44.200 --> 00:14:48.500\nis that an expired drivers license,\nat least here in the states,\n\n266\n00:14:48.500 --> 00:14:50.940\nis not a valid form of identification.\n\n267\n00:14:50.940 --> 00:14:55.620\nSo, I have people come into my\nestablishment and present me a drivers\n\n268\n00:14:55.620 --> 00:14:58.670\nlicence, because they wanna by a drink,\nfor example, and prove their age.\n\n269\n00:14:58.670 --> 00:15:00.470\nAnd they'll hand me\ntheir driver's license.\n\n270\n00:15:00.470 --> 00:15:01.260\nAnd I'll look at it, and\n\n271\n00:15:01.260 --> 00:15:04.810\nI'll make sure that they're old enough\nby law to order an alcoholic beverage.\n\n272\n00:15:04.810 --> 00:15:07.100\nBut I also look at the expiration date.\n\n273\n00:15:07.100 --> 00:15:10.170\nAnd if it's expired, I have to hand\nit back to them and say, sorry,\n\n274\n00:15:10.170 --> 00:15:11.770\nyour license is expired.\n\n275\n00:15:11.770 --> 00:15:16.490\nAnd they'll turn around, they'll proceed\nto tell me, yes, it is, but it's still me.\n\n276\n00:15:16.490 --> 00:15:18.080\nIt's the same date of birth.\n\n277\n00:15:18.080 --> 00:15:20.240\nI just haven't renewed my license yet.\n\n278\n00:15:20.240 --> 00:15:23.100\nThe information on it is still accurate.\n\n279\n00:15:23.100 --> 00:15:24.460\nSo, why do I turn it down?\n\n280\n00:15:24.460 --> 00:15:28.280\nWell, because it's a law here in\nthe states, but the reasoning is\n\n281\n00:15:28.280 --> 00:15:31.540\nthings can change, and some of that\ninformation might not be accurate anymore.\n\n282\n00:15:31.540 --> 00:15:33.301\nDate of birth shouldn't change.\n\n283\n00:15:33.301 --> 00:15:36.467\n>> [LAUGH]\n>> It usually doesn't change when you\n\n284\n00:15:36.467 --> 00:15:39.370\nrenew your license, but that is the idea.\n\n285\n00:15:39.370 --> 00:15:44.600\nIs this might be your buddies\nexpired license that he happens\n\n286\n00:15:44.600 --> 00:15:47.370\nto be old enough to drink and so you\nborrowed it cuz you look like him, right?\n\n287\n00:15:47.370 --> 00:15:50.290\nAn expired license is\nnot a valid form of ID.\n\n288\n00:15:50.290 --> 00:15:53.468\nAnd that analogy translates into\nhere into what Daniel was saying.\n\n289\n00:15:53.468 --> 00:15:58.096\nIn certificate that's expired,\nthe information might be correct,\n\n290\n00:15:58.096 --> 00:15:59.435\nbut it's expired.\n\n291\n00:15:59.435 --> 00:16:00.236\nYou didn't renew it.\n\n292\n00:16:00.236 --> 00:16:02.221\nTherefore it's not a valid certificate.\n\n293\n00:16:02.221 --> 00:16:04.056\nAnd I'm not going to trust it.\n\n294\n00:16:04.056 --> 00:16:07.234\nEven if I trusted it yesterday and\nit expired this morning,\n\n295\n00:16:07.234 --> 00:16:10.477\nI'm no longer going to trust\nthat certificate because, and\n\n296\n00:16:10.477 --> 00:16:14.741\nthat's the reason we don't issue\npermanent certificates, things change and\n\n297\n00:16:14.741 --> 00:16:18.700\nwe need to make sure that the information\nis kept up to date and validated.\n\n298\n00:16:18.700 --> 00:16:22.860\nAnd that gives everybody a chance to go\nback and validate that information, right?\n\n299\n00:16:22.860 --> 00:16:25.700\nBank of America might have gone\nout of business a year ago.\n\n300\n00:16:25.700 --> 00:16:27.450\nBut if that certificate was good for\n\n301\n00:16:27.450 --> 00:16:31.300\n100 years, somebody got potentially still\ntry to use that and get people that didn't\n\n302\n00:16:31.300 --> 00:16:35.470\nrealize that Bank of America went out of\nbusiness, that kind of thought process.\n\n303\n00:16:35.470 --> 00:16:38.850\nSo they do have to be renewed.\n\n304\n00:16:38.850 --> 00:16:42.520\nNow, let's talk about, and\nyou can come off, you can come back to me,\n\n305\n00:16:42.520 --> 00:16:43.990\nyou can fall off my screen for a second.\n\n306\n00:16:45.220 --> 00:16:47.720\nNow I wanna talk about again\ncontinuing on with that trust.\n\n307\n00:16:47.720 --> 00:16:50.300\nWe talked about that validation\nprocess that occurs and\n\n308\n00:16:50.300 --> 00:16:51.630\nthat occurs every time, right?\n\n309\n00:16:51.630 --> 00:16:55.610\nEvery time your machine is presented\nwith a certificate it validates\n\n310\n00:16:55.610 --> 00:17:00.560\nthe signature, making sure that\nit comes from a trusted root.\n\n311\n00:17:00.560 --> 00:17:05.010\nMaking sure that it has not expired and\nthat the purpose is valid.\n\n312\n00:17:05.010 --> 00:17:06.620\nCertificates have purposes.\n\n313\n00:17:06.620 --> 00:17:10.240\nA drivers' license allows me to drive\na motor vehicle in the state of Florida\n\n314\n00:17:10.240 --> 00:17:11.450\nhighways, or what have you.\n\n315\n00:17:11.450 --> 00:17:14.950\nA certificate might be issued for\nuser authentication or\n\n316\n00:17:14.950 --> 00:17:18.790\ncomputer authentication or\nSSL connections.\n\n317\n00:17:18.790 --> 00:17:19.840\nRight.\nBesec.\n\n318\n00:17:19.840 --> 00:17:22.880\nCertificates can be single purposed or\nmulti purposed.\n\n319\n00:17:22.880 --> 00:17:24.210\nAnd if I have a certificate\nthat's good for\n\n320\n00:17:24.210 --> 00:17:27.710\nuser certification I cannot use that for\nserver certification, right?\n\n321\n00:17:27.710 --> 00:17:28.970\nBecause the purpose on there.\n\n322\n00:17:28.970 --> 00:17:30.520\nIt's another thing that's validated.\n\n323\n00:17:30.520 --> 00:17:34.730\nIn the certificate will be listed\nthe purposes that this certificate\n\n324\n00:17:34.730 --> 00:17:35.910\ncan be used for.\n\n325\n00:17:35.910 --> 00:17:40.600\nAll of that's checked when your system\ngoes through this validation process.\n\n326\n00:17:40.600 --> 00:17:44.990\nAnd if you can't connect, to make sure\nthe certificate is valid, you won't trust\n\n327\n00:17:44.990 --> 00:17:49.350\nthe certificate either which brings us\nto the next kind of conversation here.\n\n328\n00:17:49.350 --> 00:17:56.040\nWe have to make sure that we provide a way\nfor people to validate these certificates.\n\n329\n00:17:56.040 --> 00:17:57.310\nA company like Verisign.\n\n330\n00:17:57.310 --> 00:18:01.670\nSo, I go to Bank of America, I receive\nthat certificate, it's signed by Verisign.\n\n331\n00:18:01.670 --> 00:18:03.070\nHow do I validate it?\n\n332\n00:18:03.070 --> 00:18:06.800\nVerisign maintains what we call\na certification revocation list\n\n333\n00:18:06.800 --> 00:18:08.200\na CRL for short.\n\n334\n00:18:08.200 --> 00:18:10.490\nCertificate revocation list.\n\n335\n00:18:10.490 --> 00:18:13.130\nThese are all the certificates\nthat they've revoked.\n\n336\n00:18:14.170 --> 00:18:15.290\nNot expired.\n\n337\n00:18:15.290 --> 00:18:18.210\nRemember expired will end\nthe validity of that ticket.\n\n338\n00:18:18.210 --> 00:18:20.240\nOnce it expires it's not good anymore.\n\n339\n00:18:21.270 --> 00:18:24.640\nBut what about tickets\nthat have been issued And\n\n340\n00:18:24.640 --> 00:18:28.070\nnow need to be invalidated\nbefore their expiration date.\n\n341\n00:18:28.070 --> 00:18:30.970\nI know they're gonna expire at some point.\n\n342\n00:18:30.970 --> 00:18:35.990\nLet's say, inside my organization, I issue\nDaniel a certificate and I loaded it up\n\n343\n00:18:35.990 --> 00:18:39.920\non a smart card and he can now use that to\nenter the building, with his smart card.\n\n344\n00:18:39.920 --> 00:18:44.110\nWell Daniel found greener pastures and\nwent to work somewhere else.\n\n345\n00:18:44.110 --> 00:18:48.140\nHe still has that smart card potentially\nor that certificate somewhere else.\n\n346\n00:18:48.140 --> 00:18:51.760\nI can take his smart card back, but who's\nto say he doesn't have a copy of that\n\n347\n00:18:51.760 --> 00:18:55.210\ncertificate somewhere on a thumb\ndrive on his computer or something.\n\n348\n00:18:55.210 --> 00:18:59.520\nAnd he can still attempt to to use it to\ndigitally sign an email in our company's\n\n349\n00:18:59.520 --> 00:19:02.340\nname or access the building or\nwhatever the case may be.\n\n350\n00:19:02.340 --> 00:19:04.630\nIt's still valid for,\nwe issued if for five years,\n\n351\n00:19:04.630 --> 00:19:06.610\nyou only worked with us for three.\n\n352\n00:19:06.610 --> 00:19:09.210\nSo the certificate still has\ntwo years validity on it.\n\n353\n00:19:09.210 --> 00:19:10.030\nI need to end that.\n\n354\n00:19:10.030 --> 00:19:12.930\nThat's what we call\nrevoking a certificate.\n\n355\n00:19:12.930 --> 00:19:19.220\nWe end the validity of that certificate\nbefore its actual lifetime expires.\n\n356\n00:19:19.220 --> 00:19:22.430\nPeople leave the company,\nSoftwares decommissioned,\n\n357\n00:19:22.430 --> 00:19:26.450\nservers are decommissioned,\ncomputers, whatever the case may be.\n\n358\n00:19:26.450 --> 00:19:28.880\nA vendor no longer works with us.\n\n359\n00:19:28.880 --> 00:19:31.970\nWe've changed our website,\nwe don't use that site anymore.\n\n360\n00:19:31.970 --> 00:19:33.885\nWhatever we've issued\nthese certificates for.\n\n361\n00:19:33.885 --> 00:19:38.175\nWe have the potential for needing to\ninvalidate them before they reach the end\n\n362\n00:19:38.175 --> 00:19:40.995\nof their lifecycle, and\nthat's certificate verification.\n\n363\n00:19:40.995 --> 00:19:44.475\nBut then I need to make sure that\nthat information is available.\n\n364\n00:19:44.475 --> 00:19:48.055\nWhen I get pulled over by the police\nofficer again, I hand him my license.\n\n365\n00:19:48.055 --> 00:19:50.905\nHe trusts everything on there,\nbecause it's signed and\n\n366\n00:19:50.905 --> 00:19:52.575\nstamped by the state of Florida.\n\n367\n00:19:52.575 --> 00:19:55.100\nBut what's the first thing\nhe does with my license?\n\n368\n00:19:55.100 --> 00:19:58.150\nHe walks back over to his car and\nhe gets on his computer and\n\n369\n00:19:58.150 --> 00:20:00.010\nhe punches in my license number.\n\n370\n00:20:00.010 --> 00:20:01.480\nWhy is he doing that?\n\n371\n00:20:01.480 --> 00:20:05.170\nWell, to see how many other violations\nI might have committed in the last so\n\n372\n00:20:05.170 --> 00:20:06.680\nmany whatever time period.\n\n373\n00:20:06.680 --> 00:20:09.660\nBut also to make sure my\nlicense isn't suspended.\n\n374\n00:20:09.660 --> 00:20:11.260\nTo make sure it's still valid, right?\n\n375\n00:20:11.260 --> 00:20:13.665\nIt says it's valid Till 2020.\n\n376\n00:20:13.665 --> 00:20:15.318\nBut my license could be suspended.\n\n377\n00:20:15.318 --> 00:20:17.120\nMy license could be revoked.\n\n378\n00:20:17.120 --> 00:20:19.520\nAnd if the state of Florida\nrevokes my license,\n\n379\n00:20:19.520 --> 00:20:21.920\nthey don't issue me a new\nlicense that says revoked on it.\n\n380\n00:20:21.920 --> 00:20:23.430\nI still have my license.\n\n381\n00:20:23.430 --> 00:20:25.230\nThey can't come and\ntake that away from me.\n\n382\n00:20:25.230 --> 00:20:28.590\nI guess they could, but\nadministratively, that would be.\n\n383\n00:20:28.590 --> 00:20:29.531\n>> It would be difficult.\n\n384\n00:20:29.531 --> 00:20:30.741\n[LAUGH]\n>> Yeah, exactly.\n\n385\n00:20:30.741 --> 00:20:32.501\nSorry, sir.\nI lost that license, anyway, so\n\n386\n00:20:32.501 --> 00:20:33.546\nyou can't take it back.\n\n387\n00:20:33.546 --> 00:20:36.060\nRight?\nIt's just doesn't work that way.\n\n388\n00:20:36.060 --> 00:20:36.870\nSo what do they do?\n\n389\n00:20:36.870 --> 00:20:42.140\nThey maintain a list, a database of\nlicenses that have been revoked or\n\n390\n00:20:42.140 --> 00:20:44.720\nterminated or\nwhat have you before validity.\n\n391\n00:20:44.720 --> 00:20:45.980\nSo he's verifying that.\n\n392\n00:20:45.980 --> 00:20:50.060\nThat's the same thing that's happening\nwhen you go to Bank of America or example.\n\n393\n00:20:50.060 --> 00:20:52.390\nNo only are you verifying that\nthe certificate is still valid,\n\n394\n00:20:52.390 --> 00:20:53.670\nthat it hadn't expired.\n\n395\n00:20:53.670 --> 00:20:55.780\nThat it's issued to\nthe appropriate person,\n\n396\n00:20:55.780 --> 00:20:59.080\ngot the right purpose,\nthat it's signed by somebody you trust.\n\n397\n00:20:59.080 --> 00:21:01.130\nYou then have to contact\nthat somebody you trust,\n\n398\n00:21:01.130 --> 00:21:04.910\nwhoever signed it and say give me\nyour list of revoke certificates.\n\n399\n00:21:04.910 --> 00:21:07.660\nMaybe they've revoked it and\nI just don't know about it.\n\n400\n00:21:07.660 --> 00:21:09.450\nThe only way I'm gonna know\nis to check that list,\n\n401\n00:21:09.450 --> 00:21:13.730\nand that is that CRL or\nCertificate Revocation.\n\n402\n00:21:13.730 --> 00:21:18.460\nNow normally what happens\nis you go to Verisign and\n\n403\n00:21:18.460 --> 00:21:22.410\nyou say hey give me your CRL and I'm\ngoing to download the entire certificate\n\n404\n00:21:22.410 --> 00:21:27.720\nrevocation list or crl for short, CRL\nwe're going to call it crl from now on.\n\n405\n00:21:27.720 --> 00:21:31.190\nWell that crill, from now on,\nit can be megabytes and size.\n\n406\n00:21:31.190 --> 00:21:33.790\nIt's not gonna be huge,\nbut it could be large.\n\n407\n00:21:33.790 --> 00:21:35.170\nAnd that could take a little time.\n\n408\n00:21:35.170 --> 00:21:39.110\nBut your computer downloads that list,\ncaches it, and\n\n409\n00:21:39.110 --> 00:21:42.580\nthen looks Is this\ncertificate on that list?\n\n410\n00:21:42.580 --> 00:21:44.370\nAnd if it's not on the list, and\n\n411\n00:21:44.370 --> 00:21:47.870\neverything else checked out,\nI'll finally accept that certificate.\n\n412\n00:21:47.870 --> 00:21:50.830\nIf it is on the list I'm no longer\ngonna accept that certificate,\n\n413\n00:21:50.830 --> 00:21:52.210\nit's been revoked.\n\n414\n00:21:52.210 --> 00:21:57.990\nAnd it'll give a reason code\nwhether it was compromised,\n\n415\n00:21:57.990 --> 00:22:02.200\nor key compromised, or termination,\nor whatever the case may be.\n\n416\n00:22:02.200 --> 00:22:03.960\nWe don't see that part typically.\n\n417\n00:22:03.960 --> 00:22:07.880\nWe'll just see that the certificate\nwas not accepted for some reason.\n\n418\n00:22:09.720 --> 00:22:13.700\nSomething relatively new in certificate\nservices in Microsoft, I think 2008,\n\n419\n00:22:13.700 --> 00:22:19.520\nis something called the OCSP,\ndid I get that backwards there?\n\n420\n00:22:19.520 --> 00:22:23.760\nThe OCSP,\nthe Online Certificate Status Protocol.\n\n421\n00:22:23.760 --> 00:22:27.050\nAnd what this is,\nwe can choose to run an OCSP.\n\n422\n00:22:27.050 --> 00:22:33.000\nThis will assist us in\nvalidating our certificate.\n\n423\n00:22:33.000 --> 00:22:37.470\nBasically what it does is Instead\nof my client needing to retrieve\n\n424\n00:22:37.470 --> 00:22:41.050\nthe entire certificate verification list,\nand then parsing that list,\n\n425\n00:22:41.050 --> 00:22:44.700\none line at a time,\nto see if that certificate is on there.\n\n426\n00:22:44.700 --> 00:22:47.770\nThe OCSP does that for me,\nthe request will get intercepted.\n\n427\n00:22:47.770 --> 00:22:53.410\nMy request to validate that certificate\ngets intercepted by the OCSP CSP most\n\n428\n00:22:53.410 --> 00:22:56.810\nlikely already has a copy cache\ncuz this is what he does.\n\n429\n00:22:56.810 --> 00:23:00.690\nAnd he'll, instead of returning the entire\nlist, just return me the information I'm\n\n430\n00:23:00.690 --> 00:23:03.500\nlooking for, which is gonna be\na few kilobytes in size, yes,\n\n431\n00:23:03.500 --> 00:23:06.970\nthat certificate's valid or no,\nthat certificate has been revoked.\n\n432\n00:23:06.970 --> 00:23:10.040\nSo now my and my client doesn't\nhave to parse that entire list.\n\n433\n00:23:10.040 --> 00:23:14.430\nIt can speed up that validation\nprocess which sometimes slows\n\n434\n00:23:14.430 --> 00:23:16.370\nthose connections down.\n\n435\n00:23:16.370 --> 00:23:19.770\nWe'll see how we can set up an OCSB here\n\n436\n00:23:19.770 --> 00:23:22.650\nin just a little bit in\nsome future episodes.\n\n437\n00:23:22.650 --> 00:23:24.920\nAll right let's see if\nI'm forgetting anything.\n\n438\n00:23:24.920 --> 00:23:27.950\nWe talked about the whole\nThe whole trust issue.\n\n439\n00:23:27.950 --> 00:23:29.970\nI know we've go to talk about,\n\n440\n00:23:29.970 --> 00:23:32.760\nI want to make sure I got\neverything with the trusts.\n\n441\n00:23:32.760 --> 00:23:36.680\nWe talked about how that trust works and\nthat chain of trust and\n\n442\n00:23:36.680 --> 00:23:39.140\nbeing able to trust it back up,\nand I'll show you as well,\n\n443\n00:23:39.140 --> 00:23:42.880\nin fact I could show you now, let's,\nthese guys don't have internet access.\n\n444\n00:23:42.880 --> 00:23:45.020\nI'll show you that in a little bit,\nI'll show you how to verify,\n\n445\n00:23:45.020 --> 00:23:47.720\nyou can actually see that chain of trust.\n\n446\n00:23:47.720 --> 00:23:51.135\nNow, a couple other things I want\nto point out here before we get\n\n447\n00:23:51.135 --> 00:23:55.730\ninto our episodes where we actually dive\nin and do this, is some management issues.\n\n448\n00:23:55.730 --> 00:24:03.241\nCertutil is the command line utility\nto work with certificate services.\n\n449\n00:24:03.241 --> 00:24:06.267\nThis is what we'll use to back\nup that certificate database.\n\n450\n00:24:06.267 --> 00:24:10.243\nAll the information about certificates\nthat have been issued, when they revoke or\n\n451\n00:24:10.243 --> 00:24:13.140\nwhen they expire,\nthe certificate revocation list.\n\n452\n00:24:13.140 --> 00:24:17.250\nAll that's kept in a database, and we need\nto back that database up in case we ever\n\n453\n00:24:17.250 --> 00:24:19.900\nhave a problem with that\ncertificate authority,\n\n454\n00:24:19.900 --> 00:24:23.230\nwe need to be able to restore it,\nwe need a backup of the database.\n\n455\n00:24:23.230 --> 00:24:25.660\nWe also need a backup of the private key.\n\n456\n00:24:25.660 --> 00:24:28.540\nRemember that servers been\nissued a certificate,\n\n457\n00:24:28.540 --> 00:24:31.650\nand if it's my root,\nit has a self signed certificate and\n\n458\n00:24:31.650 --> 00:24:35.230\nthere's a matching private key\nthat goes with every certificate.\n\n459\n00:24:35.230 --> 00:24:38.073\nWe need to back that up, because we've\nlearned about with asymmetric encryption,\n\n460\n00:24:38.073 --> 00:24:42.370\nif I lose, if I have the public key,\nbut I lose the private key,\n\n461\n00:24:42.370 --> 00:24:47.119\nI can no longer decrypt anything that\nwas encrypted with that public key.\n\n462\n00:24:48.570 --> 00:24:49.710\nDash backup.\n\n463\n00:24:49.710 --> 00:24:50.352\nSeparate command.\n\n464\n00:24:50.352 --> 00:24:55.720\nInsert space dash backup will back up\nboth the database and the private key.\n\n465\n00:24:55.720 --> 00:25:00.810\nBut you can also do a dash back up\nDV to backup just the database,\n\n466\n00:25:00.810 --> 00:25:05.760\nor a dash backup key to\nback up just the key.\n\n467\n00:25:05.760 --> 00:25:10.250\nHonestly, I don't know why you would\njust do one or the other, honestly,\n\n468\n00:25:10.250 --> 00:25:11.780\nbecause the key is teeny tiny.\n\n469\n00:25:11.780 --> 00:25:15.040\nI could see doing\nthe database more often than\n\n470\n00:25:15.040 --> 00:25:16.490\nthe key because the key doesn't change.\n\n471\n00:25:17.530 --> 00:25:21.230\nBut in the end backing up the key\ndoesn't add much time to it, so\n\n472\n00:25:21.230 --> 00:25:24.502\nyou might as well back up the key\nevery time, in my humble opinion.\n\n473\n00:25:24.502 --> 00:25:28.550\nAll right, so we'll see that\ncommand in action in a little bit.\n\n474\n00:25:28.550 --> 00:25:31.770\nLast point is just the trust\nbetween organizations.\n\n475\n00:25:31.770 --> 00:25:34.090\nAll right, and let's take a look at this.\n\n476\n00:25:34.090 --> 00:25:38.080\nI've got a drawing that I can use for\nthis.\n\n477\n00:25:38.080 --> 00:25:42.760\nWe've talked about trust and\nwe saw in my three tier hierarchy, for\n\n478\n00:25:42.760 --> 00:25:45.890\nexample, the way these\ncertificates get issued and\n\n479\n00:25:45.890 --> 00:25:49.380\nhow we can chain that back up,\nTo a trusted group.\n\n480\n00:25:50.390 --> 00:25:52.450\nWell, what if we have two\ndifferent organizations?\n\n481\n00:25:58.290 --> 00:26:00.990\nThis organization has their PKI.\n\n482\n00:26:00.990 --> 00:26:07.140\nWell, if we follow that chain of thought\nwe were talking about earlier and\n\n483\n00:26:07.140 --> 00:26:10.740\nthis guy has issued himself\na certificate who has issued\n\n484\n00:26:13.260 --> 00:26:19.310\na certificate to this subordinate CA who\nis then issued a certificate to this user.\n\n485\n00:26:19.310 --> 00:26:24.420\nNow, this user is going to attempt to\nconnect to my web server over here,\n\n486\n00:26:24.420 --> 00:26:28.390\nand setup, or\nmake a VPN connection, let's say.\n\n487\n00:26:28.390 --> 00:26:32.370\nAnd my VPN connection is using\ncertificates as the authentication method.\n\n488\n00:26:32.370 --> 00:26:35.800\nSo, he presents the certificate\nto my VPN server.\n\n489\n00:26:35.800 --> 00:26:38.530\nMy VPN server then looks\nat the certificate, and\n\n490\n00:26:38.530 --> 00:26:42.350\nlooks at who it was issued by,\ntraces it back up and says, wait a second,\n\n491\n00:26:42.350 --> 00:26:47.290\nthis was issued by some other\norganizations public infrastructure.\n\n492\n00:26:47.290 --> 00:26:48.450\nI'm not going to trust it.\n\n493\n00:26:48.450 --> 00:26:50.479\nYou're not going to be allowed\nto make that connection.\n\n494\n00:26:51.820 --> 00:26:53.680\nBut we want to do business\nwith this organization.\n\n495\n00:26:53.680 --> 00:26:57.830\nWhat do we do, we set up a trust, right?\n\n496\n00:26:57.830 --> 00:27:00.776\nNow I got to back up all the way,\nI should have just redrawn my arrow.\n\n497\n00:27:00.776 --> 00:27:02.620\n>> [LAUGH]\n>> We can set up what we call\n\n498\n00:27:02.620 --> 00:27:05.200\na cross certification trust between PKIs.\n\n499\n00:27:05.200 --> 00:27:07.020\nThis can be different organizations.\n\n500\n00:27:07.020 --> 00:27:08.040\nIt could be internally.\n\n501\n00:27:08.040 --> 00:27:13.250\nYou might have marketing has their own\nPKI versus dev, who has their own PKI.\n\n502\n00:27:13.250 --> 00:27:20.085\nWe setup trusts by taking their\nroot server's certificate, right?\n\n503\n00:27:20.085 --> 00:27:24.665\nAnd installing it in my\ntrusted root over here.\n\n504\n00:27:24.665 --> 00:27:26.085\nMy root CA.\n\n505\n00:27:26.085 --> 00:27:32.325\nSo now we trust theirs, we can chain that\nback up if my root CA's are trusted.\n\n506\n00:27:32.325 --> 00:27:34.325\nIt will then trust their entire PKI,\n\n507\n00:27:34.325 --> 00:27:38.195\nand now I can trust certificate's\nissued by that separate PKI.\n\n508\n00:27:39.290 --> 00:27:43.760\nI could install their root\nCA on this computer, but\n\n509\n00:27:43.760 --> 00:27:48.490\nthen he'd be the only one that trusts\ncertificates issued by that other PKI, or\n\n510\n00:27:48.490 --> 00:27:50.160\nwe could do it at a higher level.\n\n511\n00:27:50.160 --> 00:27:53.300\nWe can even do it at\nthe subordinate level, right?\n\n512\n00:27:53.300 --> 00:27:57.150\nIf we did something like this,\nwhat if we took this guy,\n\n513\n00:27:57.150 --> 00:28:00.690\nand let's make it a different color just\nso it'll stand and we can know what it is.\n\n514\n00:28:00.690 --> 00:28:05.925\nWe'll take this guy's, Wrong color.\n\n515\n00:28:05.925 --> 00:28:07.690\n>> [LAUGH]\n>> There we go, so\n\n516\n00:28:07.690 --> 00:28:09.190\nthis guy has a certificate issued to him.\n\n517\n00:28:09.190 --> 00:28:13.430\nAnd we're going to take that and\nwe're going to install it over here.\n\n518\n00:28:14.740 --> 00:28:19.860\nSo now this organization on the right will\ntrust certificates issued by this CA, and\n\n519\n00:28:19.860 --> 00:28:23.210\ntherefore, issued by this CA\nbecause it's that chain there, but\n\n520\n00:28:23.210 --> 00:28:28.450\nnot certificates issued by\nthis side over here, right?\n\n521\n00:28:28.450 --> 00:28:31.240\nThis is cross certification\nat a subordinate level.\n\n522\n00:28:31.240 --> 00:28:34.750\nYou can choose how far up\nthe chain you want to trust.\n\n523\n00:28:34.750 --> 00:28:37.430\nI might have a certain CA that's used for\n\n524\n00:28:37.430 --> 00:28:40.450\nissuing certificates to external vendors,\nright?\n\n525\n00:28:40.450 --> 00:28:43.340\nAnd I need my organization or\nmy dev departments PK.\n\n526\n00:28:43.340 --> 00:28:47.670\nI trust those, but nothing else that\norganization has issued, right?\n\n527\n00:28:47.670 --> 00:28:51.360\nSo that's how we can control that\nis where we choose to implement\n\n528\n00:28:51.360 --> 00:28:52.660\nthat level of trust.\n\n529\n00:28:52.660 --> 00:28:59.440\nLast topic I want to talk about in this\nepisode is the Bridge CA because with this\n\n530\n00:28:59.440 --> 00:29:04.722\nit can get a little convoluted if we're\ntalking about multiple organizations.\n\n531\n00:29:04.722 --> 00:29:08.610\nAll right, think about, I don't know,\nbeing a public entity and\n\n532\n00:29:08.610 --> 00:29:11.140\nhaving to trust all these\ndifferent organizations\n\n533\n00:29:11.140 --> 00:29:16.480\nimporting their root certificates,\nadding them, maintaining those guys, maybe\n\n534\n00:29:16.480 --> 00:29:19.740\ndifferent levels of cross certification\nlike data at the subordinate level.\n\n535\n00:29:20.830 --> 00:29:23.640\nWe can set up what we\nwould call a bridge CA.\n\n536\n00:29:23.640 --> 00:29:26.940\nA bridge CA is typically set\nup by somebody, neutral or\n\n537\n00:29:26.940 --> 00:29:30.520\na public authority, and we can,\n\n538\n00:29:31.670 --> 00:29:36.530\nmultiple organizations can install\ntheir certificate on this bridge CA.\n\n539\n00:29:36.530 --> 00:29:40.960\nAnd then I can trust all the organizations\nthat this bridge CA trust,\n\n540\n00:29:40.960 --> 00:29:43.380\njust by trusting this bridge CA.\n\n541\n00:29:43.380 --> 00:29:45.440\nWhereas with the cross certification,\n\n542\n00:29:45.440 --> 00:29:47.650\nI set this up with the root\nwith one organization.\n\n543\n00:29:47.650 --> 00:29:51.200\nIf I want to trust another organization, I\nhave to set it up with their route and so\n\n544\n00:29:51.200 --> 00:29:52.150\non and so on.\n\n545\n00:29:52.150 --> 00:29:55.160\nSo, the bridge GA just\nkind of simplifies that.\n\n546\n00:29:56.260 --> 00:30:00.380\nI see it used in public places like\nMicrosoft because they've got a lot of\n\n547\n00:30:00.380 --> 00:30:02.460\nthe partners that they\nhave to have trust with.\n\n548\n00:30:02.460 --> 00:30:07.070\nI also see it used internally when we have\ndifferent PKIs for different departments.\n\n549\n00:30:07.070 --> 00:30:10.650\nIt's much easier to set up\nthat trust using a Bridge CA.\n\n550\n00:30:10.650 --> 00:30:13.540\nBecause what if one of those departments\nI don't want to trust anymore,\n\n551\n00:30:13.540 --> 00:30:15.660\nI can just get rid off their\ncertificate on the Bridge CA.\n\n552\n00:30:15.660 --> 00:30:18.000\nAnd now I'll no longer\ntrust their entire PKI,\n\n553\n00:30:18.000 --> 00:30:20.000\na little bit easier to manage and\nmaintain.\n\n554\n00:30:20.000 --> 00:30:23.610\nSo just a few concepts I want us to\nbe familiar with as we go on and\n\n555\n00:30:23.610 --> 00:30:25.060\nprogress through these episodes.\n\n556\n00:30:25.060 --> 00:30:27.650\nWhere, as promised, we're getting\nready to get into the fun stuff and\n\n557\n00:30:27.650 --> 00:30:31.380\nactually implement some of this\npublic key infrastructure.\n\n558\n00:30:31.380 --> 00:30:33.070\n>> Well, Mike, I'm excited, I can't wait.\n\n559\n00:30:33.070 --> 00:30:34.300\nYou got me on the edge of my seat.\n\n560\n00:30:34.300 --> 00:30:37.210\nI love all this certificates and trust.\n\n561\n00:30:37.210 --> 00:30:38.240\nAnd who do I not trust?\n\n562\n00:30:38.240 --> 00:30:40.860\nIt's almost like a big spy\ngame between computers.\n\n563\n00:30:40.860 --> 00:30:42.290\nIt's a whole lot of fun.\n\n564\n00:30:42.290 --> 00:30:44.430\nWe do appreciate you\nexplaining these things to us,\n\n565\n00:30:44.430 --> 00:30:45.930\nso that we can understand it.\n\n566\n00:30:45.930 --> 00:30:48.810\nAnd, we are really looking forward\nto seeing this stuff in action.\n\n567\n00:30:48.810 --> 00:30:51.190\nSo we'll see you in\nthose upcoming episodes.\n\n568\n00:30:51.190 --> 00:30:53.310\nHopefully we'll see you there as well,\nbut looking at the clock for\n\n569\n00:30:53.310 --> 00:30:55.080\nthis one,\nwe're going to have to wind it down.\n\n570\n00:30:55.080 --> 00:30:57.403\nFor ITProTV, I've been your host,\nDaniel Lowrie.\n\n571\n00:30:57.403 --> 00:30:58.435\n>> And I'm Mike Rodrick.\n\n572\n00:30:58.435 --> 00:31:00.832\n>> And we'll see you next time.\n\n573\n00:31:00.832 --> 00:31:08.900\n[MUSIC]\n\n",
          "vimeoId": "170667314"
        },
        {
          "description": "In this episode, Wes and Mike continue the discussion of CA infrastructure by moving into the installing the CA role and bringing the root CA online. They also show how to configure the certification revocation list distribution point commonly known as the CDP as well as configuring the authority information access.",
          "length": "2007",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-3-design_a_ca_infrastructure_pt3-062817-PGM.00_42_38_21.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-3-design_a_ca_infrastructure_pt3-062817-PGM.00_42_38_21.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-3-design_a_ca_infrastructure_pt3-062817-PGM.00_42_38_21.Still001-sm.jpg",
          "title": "Design a CA Infrastructure Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.280 --> 00:00:01.553\nWelcome to ITProTV.\n\n2\n00:00:01.553 --> 00:00:02.582\nI'm your host Don Pezet.\n\n3\n00:00:02.582 --> 00:00:06.809\n[CROSSTALK].\n\n4\n00:00:06.809 --> 00:00:09.278\n[MUSIC]\n\n5\n00:00:09.278 --> 00:00:10.620\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.230 --> 00:00:15.352\n&gt;&gt; Hello and welcome to ITProTV,\nI'm your show host, Wes Bryan.\n\n7\n00:00:15.352 --> 00:00:18.100\nAnd in today's episode, well,\nwe got a great episode for you.\n\n8\n00:00:18.100 --> 00:00:21.254\nWe are coming back with the Part\n3 in Design a CA infrastructure.\n\n9\n00:00:21.254 --> 00:00:24.264\nThat's right, in the previous episodes\nwe looked at the theoretical and\n\n10\n00:00:24.264 --> 00:00:27.140\nfoundational knowledge for\nbringing up any certificate authority.\n\n11\n00:00:27.140 --> 00:00:30.365\nAnd joining us back in the studios\nagain to expand a little bit more on\n\n12\n00:00:30.365 --> 00:00:32.920\nthis subject is none other\nthan mister Mike Rodrick.\n\n13\n00:00:32.920 --> 00:00:33.760\nMike, how you doing sir?\n\n14\n00:00:33.760 --> 00:00:35.350\n&gt;&gt; Doing great, Wes glad to be back.\n\n15\n00:00:35.350 --> 00:00:38.930\nThanks for having me and excited,\nyeah, cuz now we get to dive in and\n\n16\n00:00:38.930 --> 00:00:43.750\nget our hands dirty, right, and\nactually play, it's playing to me.\n\n17\n00:00:43.750 --> 00:00:48.438\nHopefully, it's playing to you guys, but\nactually get the certificate authority and\n\n18\n00:00:48.438 --> 00:00:49.524\nget that PKI setup.\n\n19\n00:00:49.524 --> 00:00:52.292\nSo and as Wes said,\nif you missed the previous episodes,\n\n20\n00:00:52.292 --> 00:00:54.150\nmake sure you go back and watch those.\n\n21\n00:00:54.150 --> 00:00:57.720\nWe'd talked a lot about,\nthe best practices.\n\n22\n00:00:57.720 --> 00:01:01.370\nHow we set this up, why we do certain\nthings that we do, the trust and\n\n23\n00:01:01.370 --> 00:01:02.240\nall that fun stuff.\n\n24\n00:01:02.240 --> 00:01:05.680\nAnd now we're gonna actually\nimplement those best practices.\n\n25\n00:01:05.680 --> 00:01:07.108\nSo what we're gonna do?\n\n26\n00:01:07.108 --> 00:01:11.220\nWe're gonna setup a two tier hierarchy\nwhich is probably the most common\n\n27\n00:01:11.220 --> 00:01:17.060\nimplementation of a CA infrastructure\namong most small to medium organizations.\n\n28\n00:01:17.060 --> 00:01:23.160\nEven large ones so don't rely heavily on\ncertificates, a two-tier PKI is perfect.\n\n29\n00:01:23.160 --> 00:01:25.890\n&gt;&gt; Is that one where you\nhave your root CA, Mike?\n\n30\n00:01:25.890 --> 00:01:28.950\nAnd then you have your issuing\nCAs below it, the subordinates,\n\n31\n00:01:28.950 --> 00:01:31.590\nif you will, that are actually doing\nthe heavy lifting for our infrastructure?\n\n32\n00:01:31.590 --> 00:01:32.610\n&gt;&gt; That's exactly right.\n\n33\n00:01:32.610 --> 00:01:34.030\nYou've got the root CA at the top.\n\n34\n00:01:34.030 --> 00:01:38.050\nRemember the root is always the top of\nyour public key infrastructure, your PKI.\n\n35\n00:01:38.050 --> 00:01:41.370\nInfrastructure and then your\nsubordinate CA, the one below that.\n\n36\n00:01:41.370 --> 00:01:43.980\nAnd that'll be our last tier,\nright, that subordinate CA.\n\n37\n00:01:43.980 --> 00:01:46.010\nAnd we could have multiple.\n\n38\n00:01:46.010 --> 00:01:50.520\nIf we had a situation where we've got\nmultiple branch offices, we might have\n\n39\n00:01:50.520 --> 00:01:55.430\na single root CA, and then a subordinate\nCA to each one of those locations.\n\n40\n00:01:55.430 --> 00:01:59.930\nIt could be that we have a root CA and\nthen maybe a single location.\n\n41\n00:01:59.930 --> 00:02:04.160\nBut different departments want to\nhave different certificate needs.\n\n42\n00:02:04.160 --> 00:02:07.010\nSo we setup a subordinate CA for\ndifferent departments.\n\n43\n00:02:07.010 --> 00:02:12.070\nOr [COUGH] excuse me, one subordinate\nCA for company issued certificates.\n\n44\n00:02:12.070 --> 00:02:14.860\nAnother subordinate CA to issue\ncertificates to vendors and\n\n45\n00:02:14.860 --> 00:02:15.660\nbusiness partners.\n\n46\n00:02:15.660 --> 00:02:17.746\nSo different reasons we\nmight split those up.\n\n47\n00:02:17.746 --> 00:02:19.870\nRemember we talked about that\nin the other episodes, but yeah.\n\n48\n00:02:19.870 --> 00:02:21.589\nIn this case, just those two tiers.\n\n49\n00:02:22.800 --> 00:02:24.760\nAlright so, in order to do that,\n\n50\n00:02:24.760 --> 00:02:27.310\nthe first thing we are going to do is\nwe are going to set up that root CA.\n\n51\n00:02:27.310 --> 00:02:31.456\nNow remember, the root CA,\nthat top of our hierarchy, is key.\n\n52\n00:02:31.456 --> 00:02:36.200\nI mean, that server has to be kept safe.\n\n53\n00:02:36.200 --> 00:02:40.970\nBecause if that server gets hacked into,\ncompromised in any way,\n\n54\n00:02:40.970 --> 00:02:46.480\nmy root CA, my root Certificate Authority\ngets compromised in any way, that means\n\n55\n00:02:46.480 --> 00:02:50.770\nall of the certificates that he has issued\nare now considered compromised as well.\n\n56\n00:02:50.770 --> 00:02:55.480\nSo we're basically starting over\nwith our public key infrastructure.\n\n57\n00:02:55.480 --> 00:02:59.040\nAll those certificates we've issued,\nall those machines, all those users,\n\n58\n00:02:59.040 --> 00:03:03.350\nour web servers, our devices,\nall of that has to be re-done.\n\n59\n00:03:03.350 --> 00:03:09.360\nAnd we can minimize that risk by\ncreating what we call an offline\n\n60\n00:03:09.360 --> 00:03:14.000\nroute CA, where the route CA is not\nonline, is not connected to the network.\n\n61\n00:03:14.000 --> 00:03:18.940\nSo we reduce the risk of anybody\ncompromising their machine.\n\n62\n00:03:18.940 --> 00:03:23.068\nAt this point they'll need physical access\nto the machine to compromise it, so\n\n63\n00:03:23.068 --> 00:03:25.420\nit gives us another\nlayer of security there.\n\n64\n00:03:25.420 --> 00:03:28.742\nIf we had a route CA and\nthen three subordinate CAs, and\n\n65\n00:03:28.742 --> 00:03:32.282\none of the subordinate CAs\ngets compromised, then yeah,\n\n66\n00:03:32.282 --> 00:03:35.751\nall the certificates of that\nsubordinate CA had issued,\n\n67\n00:03:35.751 --> 00:03:39.880\nwould be considered compromised,\nbut not the other two.\n\n68\n00:03:39.880 --> 00:03:43.330\nSo maybe we only lose a third of\nour public key infrastructure.\n\n69\n00:03:43.330 --> 00:03:47.871\nYou see how we kinda split that risk up\na little bit to minimize the impact of\n\n70\n00:03:47.871 --> 00:03:49.690\na security incident.\n\n71\n00:03:49.690 --> 00:03:51.670\nThat is the idea.\n\n72\n00:03:51.670 --> 00:03:54.860\nAll right, so,\nwe're gonna setup our offline root CA.\n\n73\n00:03:54.860 --> 00:03:58.160\nCouple things we wanna think about for\nour offline root CA.\n\n74\n00:03:58.160 --> 00:04:00.480\nFirst of all, it's not gonna\nbe connected to the network.\n\n75\n00:04:00.480 --> 00:04:03.450\nHe's not gonna be part of the domain,\nright?\n\n76\n00:04:03.450 --> 00:04:05.250\nSo he's gonna be offline,\n\n77\n00:04:05.250 --> 00:04:08.460\nwhich means he won't be part\nof my Active Directory domain.\n\n78\n00:04:08.460 --> 00:04:11.150\nWhich is good cuz he will be checking in,\nright.\n\n79\n00:04:11.150 --> 00:04:14.670\nIf he was part of the domain,\nand then we take him offline, and\n\n80\n00:04:14.670 --> 00:04:18.390\nwe leave him offline for six months,\nhis password's gonna expire, right?\n\n81\n00:04:18.390 --> 00:04:20.826\nComputers need to change their\npassword every so often.\n\n82\n00:04:20.826 --> 00:04:22.650\nThey have to connect the Active Directory.\n\n83\n00:04:22.650 --> 00:04:27.580\nSo we eliminate all of that by\nnot making part of the domain.\n\n84\n00:04:27.580 --> 00:04:30.820\n&gt;&gt; Now this isn't about Active Directory,\nMike, but could that potentially\n\n85\n00:04:30.820 --> 00:04:35.220\ndo something like in that CA, could that\ntombstone that CA and cause problems?\n\n86\n00:04:35.220 --> 00:04:38.760\n&gt;&gt; Yeah, there's all kinds of\nissues we can run into with leaving\n\n87\n00:04:38.760 --> 00:04:41.930\nany kind of server offline for\nan extended period of time.\n\n88\n00:04:43.070 --> 00:04:44.810\nNot to mention updates and\nthings like that.\n\n89\n00:04:44.810 --> 00:04:47.040\nWe're still gonna need to do\nour updates periodically,\n\n90\n00:04:47.040 --> 00:04:50.000\nbut we can just bring him online and\ndo those updates.\n\n91\n00:04:50.000 --> 00:04:54.890\nSo really what we're doing is preventing\nany issues with him being part of a domain\n\n92\n00:04:54.890 --> 00:04:58.490\nand having change his password and\na background, or anything like that.\n\n93\n00:04:59.810 --> 00:05:00.860\nAll right, what else?\n\n94\n00:05:00.860 --> 00:05:02.570\nSo he's not gonna be a member of a domain.\n\n95\n00:05:02.570 --> 00:05:04.505\nNow that does change a few things.\n\n96\n00:05:04.505 --> 00:05:05.490\nWe're gonna have to worry about,\n\n97\n00:05:05.490 --> 00:05:10.300\nremember we talked about publishing what's\nknown as a certificate revocation list?\n\n98\n00:05:10.300 --> 00:05:12.781\nBecause if you get a certificate\npresented to you or\n\n99\n00:05:12.781 --> 00:05:15.263\na service presented certificate or\nwhat have you,\n\n100\n00:05:15.263 --> 00:05:18.553\none of the things your computer does\nis it looks at the certificate,\n\n101\n00:05:18.553 --> 00:05:21.812\nmakes sure all the information is valid,\nthat it's not expired.\n\n102\n00:05:21.812 --> 00:05:26.222\nAnd then it looks for the location of\nthe CDP, the CRL Distribution Point or\n\n103\n00:05:26.222 --> 00:05:30.035\nthe certificate revocation list\ndistribution point, right.\n\n104\n00:05:30.035 --> 00:05:31.886\nLong name for that.\nThat's where we have a list of all\n\n105\n00:05:31.886 --> 00:05:34.250\nthe certificates that have been revote.\n\n106\n00:05:34.250 --> 00:05:36.576\nAnd he can't publish it\nin the Active Directory.\n\n107\n00:05:36.576 --> 00:05:42.240\nHe can, but is a lot of configuration to\nget it to publish in Active Directory.\n\n108\n00:05:42.240 --> 00:05:44.410\nSo we're gonna change that\nup just a little bit.\n\n109\n00:05:44.410 --> 00:05:48.620\nWe need to make sure that the location\nthat he publishes that information too\n\n110\n00:05:48.620 --> 00:05:50.670\nis available to everybody on the network.\n\n111\n00:05:50.670 --> 00:05:55.960\nSo that as we follow that chain of\ntrust back up to the root, I can find\n\n112\n00:05:55.960 --> 00:06:01.170\nthe root's certificate revocation list and\nthe root's certificate itself, right?\n\n113\n00:06:01.170 --> 00:06:03.220\nThat needs to be available\nto the network as well.\n\n114\n00:06:03.220 --> 00:06:06.370\nSo a couple of differences when\njust installing an enterprise CA\n\n115\n00:06:06.370 --> 00:06:08.577\nversus installing a stand alone CA, right.\n\n116\n00:06:09.960 --> 00:06:11.870\nSo, let's get started here.\n\n117\n00:06:11.870 --> 00:06:15.530\nI am going to, we've got our\ndomain controller up and running.\n\n118\n00:06:15.530 --> 00:06:20.642\nI've got two other servers I've\nnamed them appropriately myrootca,\n\n119\n00:06:20.642 --> 00:06:24.060\nwhich is gonna be our\noffline stand alone root.\n\n120\n00:06:24.060 --> 00:06:29.630\nAnd I got mysubordanca, which is going to\nbe an online enterprise subordinate CA.\n\n121\n00:06:29.630 --> 00:06:32.876\nAnd that's the one that's gonna\nactually do all of the issuing.\n\n122\n00:06:32.876 --> 00:06:36.050\nSo let's start on Mister Route CA.\n\n123\n00:06:36.050 --> 00:06:39.900\nSo to get this started,\nwe're just going to simply add the rule,\n\n124\n00:06:39.900 --> 00:06:42.210\nActive Directory Certificate Services.\n\n125\n00:06:42.210 --> 00:06:46.740\nSo we'll go Add rules and\nfeatures, we'll click Next, Next,\n\n126\n00:06:46.740 --> 00:06:51.060\nNext and then we're gonna choose\nActive Directory Certificate Services,\n\n127\n00:06:51.060 --> 00:06:53.770\nand it's gonna tell me do you\nwanna add these features?\n\n128\n00:06:53.770 --> 00:06:54.480\nOf course, I do.\n\n129\n00:06:55.560 --> 00:06:57.900\nAnd I will just click\nNext all the way through,\n\n130\n00:06:57.900 --> 00:07:00.330\nwell actually until we\nget to the role services.\n\n131\n00:07:00.330 --> 00:07:02.770\nHere on this screen and\nI know that's a little bit small.\n\n132\n00:07:02.770 --> 00:07:04.720\nLet me see if I can zoom in for you there.\n\n133\n00:07:04.720 --> 00:07:08.330\nWhen you get to the role services\npage of the installation of roles and\n\n134\n00:07:08.330 --> 00:07:11.040\nfeatures, we're gonna choose\ncertificate authority.\n\n135\n00:07:11.040 --> 00:07:13.090\nWe don't need any of the other stuff,\nright?\n\n136\n00:07:13.090 --> 00:07:16.880\nNormally if I'm setting up a CA,\nI'm thinking wow, I need to do this\n\n137\n00:07:16.880 --> 00:07:21.270\ncertification authority web enrollment,\nso people can come request certificates.\n\n138\n00:07:21.270 --> 00:07:26.048\nRemember, the root CA is only issuing\ncertificates to the subordinate CAs.\n\n139\n00:07:26.048 --> 00:07:29.810\nNobody is gonna be browsing to it and\nrequesting certificates or\n\n140\n00:07:29.810 --> 00:07:30.580\nanything like that.\n\n141\n00:07:30.580 --> 00:07:34.470\nSo we just need\nthe Certification Authority role.\n\n142\n00:07:34.470 --> 00:07:37.050\nNow we'll click Next and Install, right.\n\n143\n00:07:39.252 --> 00:07:41.860\nAnd we'll let that run,\nit's gonna take a few minutes,\n\n144\n00:07:41.860 --> 00:07:45.930\nso we will do a little TV magic and\nwe'll come back as soon as that finishes.\n\n145\n00:07:47.320 --> 00:07:50.524\nAll right, there we go, that finished,\nthat did not take too terribly long.\n\n146\n00:07:50.524 --> 00:07:54.797\nAnd in the wizard, so basically just\nlike when we install Active Directory,\n\n147\n00:07:54.797 --> 00:07:59.135\ndomain services or a couple of others It\ninstalls the role, the components for\n\n148\n00:07:59.135 --> 00:08:03.013\nthe role but is not really certificate\nauthority until we go back in and\n\n149\n00:08:03.013 --> 00:08:04.950\nconfigure some of those options.\n\n150\n00:08:04.950 --> 00:08:08.190\nSo you can see that link right there in\nthe middle configure Active Directory\n\n151\n00:08:08.190 --> 00:08:11.040\ncertificate service on\nthe destinations server.\n\n152\n00:08:12.710 --> 00:08:15.960\nNormally I would just click that and\ngo on, but\n\n153\n00:08:15.960 --> 00:08:18.940\nremember the great thing about this\nwizard is you can close it and\n\n154\n00:08:18.940 --> 00:08:22.450\ndo other things while the certification\nauthority is being installed.\n\n155\n00:08:22.450 --> 00:08:25.560\nAnd so if you had done that,\nyou come back and\n\n156\n00:08:25.560 --> 00:08:29.030\nyou'll have this little yellow exclamation\npoint up here at the top right,\n\n157\n00:08:29.030 --> 00:08:32.620\nwhere I can click and\nthere's my task completed.\n\n158\n00:08:32.620 --> 00:08:35.680\nAnd again telling me, you still\nneed to do some configuration, so\n\n159\n00:08:35.680 --> 00:08:37.110\nI can click on the link there.\n\n160\n00:08:37.110 --> 00:08:41.800\nEither one of those links is gonna\ntake you to this screen here,\n\n161\n00:08:41.800 --> 00:08:43.260\nthe ADCS configuration.\n\n162\n00:08:44.400 --> 00:08:45.910\nAnd I know that's teeny tiny, but\n\n163\n00:08:45.910 --> 00:08:49.020\nthere's not a whole lot that we\nneed to worry about right there.\n\n164\n00:08:49.020 --> 00:08:53.400\nIt's telling me, if you're gonna install\na stand alone certification authority, or\n\n165\n00:08:53.400 --> 00:08:54.450\nthe web enrollment or\n\n166\n00:08:54.450 --> 00:08:58.820\nan online responder, you need to be\nin admin on this particular machine.\n\n167\n00:08:58.820 --> 00:09:01.600\nIf we're gonna do enterprise\ncertification authority, or\n\n168\n00:09:01.600 --> 00:09:04.980\ncertificate enrollment\npolicy web services,\n\n169\n00:09:04.980 --> 00:09:10.880\nenrollment web service, NDES, any of\nthose, you need to be an enterprise admin.\n\n170\n00:09:10.880 --> 00:09:12.280\nAnd it kinda makes sense Wes,\n\n171\n00:09:12.280 --> 00:09:16.160\nbecause those first three options\nare really only applying to this machine.\n\n172\n00:09:16.160 --> 00:09:18.200\nSo I need to be an admin on this machine.\n\n173\n00:09:18.200 --> 00:09:22.640\nBut the other four options are applying\nto the entire domain and so\n\n174\n00:09:22.640 --> 00:09:28.180\ntherefore I need to have administrative\nrights in the domain itself.\n\n175\n00:09:29.270 --> 00:09:31.840\nWe don't need domain rights because\nwe're installing a stand alone.\n\n176\n00:09:31.840 --> 00:09:34.320\nSo you can see my credentials\nalready put in there.\n\n177\n00:09:34.320 --> 00:09:37.800\nWhoever's running this wizard,\nthe credentials are automatically applied.\n\n178\n00:09:37.800 --> 00:09:42.230\nIf you need to change them and you knew\nthe password, you will click change and\n\n179\n00:09:42.230 --> 00:09:44.560\nput an administrator account in there.\n\n180\n00:09:44.560 --> 00:09:45.400\nWe'll click Next.\n\n181\n00:09:46.970 --> 00:09:49.420\nAnd then I'm gonna do\ncertification authority.\n\n182\n00:09:49.420 --> 00:09:54.850\nNow in this screen, we get to pick all the\nrole services that we want to configure.\n\n183\n00:09:54.850 --> 00:09:58.510\nBut the only one that's lit up that\nI can check is that first one,\n\n184\n00:09:58.510 --> 00:10:01.730\nbecause that's the only one we installed\nwhen we ran that first wizard.\n\n185\n00:10:01.730 --> 00:10:04.760\nSo the others are grayed out,\nnot available, click Next.\n\n186\n00:10:05.780 --> 00:10:09.200\nStandalone is my only option,\nbecause I'm not part of a domain,\n\n187\n00:10:09.200 --> 00:10:14.380\nit sees that I'm in a work group, so\nEnterprise is grayed out, I'll click Next.\n\n188\n00:10:14.380 --> 00:10:21.060\nAnd this is going to be my root CA,\nthe very top of our PKI, click Next.\n\n189\n00:10:21.060 --> 00:10:23.220\nThen we've got the option for private key.\n\n190\n00:10:23.220 --> 00:10:25.680\nIt's gonna create that self\nsigned certificate and\n\n191\n00:10:25.680 --> 00:10:28.080\nhave a key pair associated with it.\n\n192\n00:10:28.080 --> 00:10:31.490\nAnd it's giving me the option to\neither create a new private key or\n\n193\n00:10:31.490 --> 00:10:33.170\nto use an existing private key.\n\n194\n00:10:33.170 --> 00:10:37.320\nSo if I was rebuilding a machine after\nsome kind of hardware failure or\n\n195\n00:10:37.320 --> 00:10:40.140\nsomething like that, and\nI still had the old certificate,\n\n196\n00:10:40.140 --> 00:10:43.330\ncuz I had backed it up from\nthe server before it crashed.\n\n197\n00:10:43.330 --> 00:10:46.670\nI could continue to use that\ncertificate and private key.\n\n198\n00:10:47.780 --> 00:10:49.760\nSince we just started we\ndon't have a private key, so\n\n199\n00:10:49.760 --> 00:10:51.260\nwe're gonna create a new one.\n\n200\n00:10:51.260 --> 00:10:53.000\nOr if it had been compromised and\n\n201\n00:10:53.000 --> 00:10:55.610\nI'm rebuilding it I would want\nto create a new one, right.\n\n202\n00:10:55.610 --> 00:10:58.430\nI wouldn't want to use the old one\ncuz that could potentially have been\n\n203\n00:10:58.430 --> 00:10:59.600\ncompromised.\n\n204\n00:10:59.600 --> 00:11:00.199\nWe'll click Next.\n\n205\n00:11:01.590 --> 00:11:04.500\nHere we're checking\nthe cryptographic options.\n\n206\n00:11:04.500 --> 00:11:07.510\nThis is how strong of\nencryption are we using,\n\n207\n00:11:07.510 --> 00:11:10.040\nhow long is the key length going to be?\n\n208\n00:11:10.040 --> 00:11:16.220\nThis is for the self signed certificate\nthat it's gonna create for that root CA.\n\n209\n00:11:16.220 --> 00:11:19.330\nNot for certificates that\nwill be issued in the future.\n\n210\n00:11:19.330 --> 00:11:23.720\nSo in this one,\nwe want to pick a nice strong option.\n\n211\n00:11:23.720 --> 00:11:26.755\nSo I'm gonna zoom back out,\nI'm gonna hit that drop down list and\n\n212\n00:11:26.755 --> 00:11:30.024\nmy biggest key length is 4096 and\nthat's what I'm gonna go with.\n\n213\n00:11:30.024 --> 00:11:33.455\nWe'll go ahead and click Next.\n\n214\n00:11:33.455 --> 00:11:36.229\nAnd, I just like changing the name,\n\n215\n00:11:36.229 --> 00:11:41.165\nthat's just a personal thing,\nbut you can put your common name.\n\n216\n00:11:41.165 --> 00:11:44.112\nIt's gonna create\na distinguish name down there.\n\n217\n00:11:44.112 --> 00:11:50.660\nWe'll click Next, it called it root CA,\npretty descriptive.\n\n218\n00:11:50.660 --> 00:11:54.040\nAnd then, how long is the certificate\ngoing to be valid for?\n\n219\n00:11:54.040 --> 00:11:56.760\nNow, we're talking again,\nabout the self sign certificate,\n\n220\n00:11:56.760 --> 00:11:57.880\nthat's getting ready to create.\n\n221\n00:11:57.880 --> 00:12:01.390\nAnd this is something that you and your\norganization are gonna have to decide.\n\n222\n00:12:01.390 --> 00:12:03.660\nI see, you go out and read blogs,\n\n223\n00:12:03.660 --> 00:12:08.070\ndifferent people recommend different\noptions, five years is the default.\n\n224\n00:12:08.070 --> 00:12:13.870\nThis guy is gonna be offline, and so\nI don't want to shorten this up too much.\n\n225\n00:12:13.870 --> 00:12:18.260\nIf I put a year, that means every year I'm\ngonna have to bring this guy back online,\n\n226\n00:12:18.260 --> 00:12:20.180\nand go and renew a certificate and\nall of that.\n\n227\n00:12:20.180 --> 00:12:23.750\nIf I do five years,\nthat gives me a nice period of time there.\n\n228\n00:12:23.750 --> 00:12:26.915\nHopefully, not a lot's gonna change,\nand five years should be fine.\n\n229\n00:12:26.915 --> 00:12:28.006\n&gt;&gt; Mike, help me out with this one.\n\n230\n00:12:28.006 --> 00:12:31.115\nI've read a couple of metrics out there\nthat says, when it comes to management of\n\n231\n00:12:31.115 --> 00:12:34.271\nyour certificates in general, if you\nincrease the time that your certificate's\n\n232\n00:12:34.271 --> 00:12:37.635\nvalid for, well, you decrease the amount\nof administration for your certificates.\n\n233\n00:12:37.635 --> 00:12:40.240\nBut you also increase security risks, too.\n\n234\n00:12:40.240 --> 00:12:43.870\nHowever, if you decrease the amount\nof time, you increase security, but\n\n235\n00:12:43.870 --> 00:12:45.790\nyou also increase\nthe maintenance behind it.\n\n236\n00:12:45.790 --> 00:12:46.570\n&gt;&gt; Yeah, absolutely.\n\n237\n00:12:46.570 --> 00:12:51.540\nBecause if I set this to, let's talk about\ncertificates I would issue to my end uses\n\n238\n00:12:51.540 --> 00:12:53.295\nor my machines on my network.\n\n239\n00:12:53.295 --> 00:12:56.133\nThose, I don't want a very\nlong validity period,\n\n240\n00:12:56.133 --> 00:13:00.823\nbecause if I issue you a certificate, like\nwe talked about in the previous episode.\n\n241\n00:13:00.823 --> 00:13:04.020\nIf I issue you a certificate for\nfive years,\n\n242\n00:13:04.020 --> 00:13:08.140\nyou end up after two years\nmoving on somewhere else.\n\n243\n00:13:08.140 --> 00:13:11.900\nWell now that certificate's out there and\nit's still valid for three more years.\n\n244\n00:13:11.900 --> 00:13:14.320\nYou might try to sneak\nback in the building or\n\n245\n00:13:14.320 --> 00:13:17.690\ndo something mischievous with\nthat still valid certificate.\n\n246\n00:13:17.690 --> 00:13:19.415\nSo I've gotta go and revoke it.\n\n247\n00:13:19.415 --> 00:13:23.318\nAdds another step in my off boarding\nprocess that I gotta worry about.\n\n248\n00:13:23.318 --> 00:13:27.390\nWhereas if it's only good for a year,\nyes, you've gotta renew it every year but\n\n249\n00:13:27.390 --> 00:13:29.100\na lot of that can be automated.\n\n250\n00:13:29.100 --> 00:13:33.550\nAnd if something happens and you leave and\nI forget to revoke it, it's not good for\n\n251\n00:13:33.550 --> 00:13:34.230\nas long.\n\n252\n00:13:34.230 --> 00:13:37.010\nSo that's the theory behind it.\n\n253\n00:13:37.010 --> 00:13:41.340\nI'll tell you that some people recommend\nsetting the validity period on the root CA\n\n254\n00:13:41.340 --> 00:13:43.310\ncertificate to 20 years.\n\n255\n00:13:43.310 --> 00:13:45.700\nThey don't wanna have to deal with it for\n20 years.\n\n256\n00:13:45.700 --> 00:13:46.710\nI'm will tell you,\n\n257\n00:13:46.710 --> 00:13:50.440\nI haven't been with an organization\nthat hasn't changed for 20 years.\n\n258\n00:13:50.440 --> 00:13:52.760\nI mean, the name of the company,\nsomething's gonna change.\n\n259\n00:13:52.760 --> 00:13:56.770\nAnd so I like the 5 year option\ndefault there, but that's just me.\n\n260\n00:13:56.770 --> 00:13:59.900\nThat's something you and\nyour organization has to think about.\n\n261\n00:13:59.900 --> 00:14:03.520\nThis is just saying how often am I\ngonna have to worry about renewing\n\n262\n00:14:03.520 --> 00:14:05.020\nthe root CA certificate.\n\n263\n00:14:06.050 --> 00:14:06.610\nClick Next.\n\n264\n00:14:08.250 --> 00:14:10.920\nOne more thing I will mention,\nthey have this little note down here.\n\n265\n00:14:10.920 --> 00:14:13.760\nThe roots CA certificate validity period\n\n266\n00:14:13.760 --> 00:14:17.010\nneeds to be longer than any\ncertificate you plan on issuing.\n\n267\n00:14:17.010 --> 00:14:19.710\nSo if I plan on saying that I'm gonna\n\n268\n00:14:19.710 --> 00:14:23.020\nissue computer's certificates\nthat are good for 5 years.\n\n269\n00:14:23.020 --> 00:14:26.570\nMy root CA certificate needs to\nbe good for longer than that.\n\n270\n00:14:26.570 --> 00:14:29.460\nSo maybe I bump it up to ten years or\nsomething like that.\n\n271\n00:14:29.460 --> 00:14:32.140\nIf this was only good for\na year, I couldn't go out and\n\n272\n00:14:32.140 --> 00:14:34.120\nissue user certificates that were good for\nfive years.\n\n273\n00:14:34.120 --> 00:14:37.590\nSo again, something that has to\nbe planned out ahead of time.\n\n274\n00:14:37.590 --> 00:14:40.880\nWe'll click Next, and Next again.\n\n275\n00:14:40.880 --> 00:14:44.060\nIt's just telling me where\nit's gonna keep the database.\n\n276\n00:14:44.060 --> 00:14:46.780\nWhere it stores information\nin the log files.\n\n277\n00:14:46.780 --> 00:14:50.750\nThen I'll confirm, make sure I've\npicked all the right options.\n\n278\n00:14:50.750 --> 00:14:54.890\nAnd then click Configure, and\nit'll begin that configuration process.\n\n279\n00:14:54.890 --> 00:14:59.868\nSo we'll let this whir and grind for a\nsecond, shouldn't take too terribly long.\n\n280\n00:14:59.868 --> 00:15:01.030\nThen, we're gonna go back in and\n\n281\n00:15:01.030 --> 00:15:04.620\ntake a look at what happened,\nwhat we did with our CA.\n\n282\n00:15:04.620 --> 00:15:08.780\n&gt;&gt; Mike, while we're waiting for\nthis progress bar to progress.\n\n283\n00:15:08.780 --> 00:15:11.150\nI could ask just a maybe\nmore of a generic question.\n\n284\n00:15:11.150 --> 00:15:13.620\nNow, you were talking\nabout naming your CA,\n\n285\n00:15:13.620 --> 00:15:16.120\nis that something you also have\nto think about ahead of time?\n\n286\n00:15:16.120 --> 00:15:17.610\nAnd my question, because of that is,\n\n287\n00:15:17.610 --> 00:15:20.620\ncan you rename a CA after\nyou've installed this role?\n\n288\n00:15:20.620 --> 00:15:22.840\n&gt;&gt; You cannot and\nit will give you all kinds of problems.\n\n289\n00:15:22.840 --> 00:15:24.160\nIt's a great question.\n\n290\n00:15:24.160 --> 00:15:28.360\nThere's a couple things that you, really\nmost things, you do not want to modify,\n\n291\n00:15:28.360 --> 00:15:31.547\nin your certificate authority,\nafter you have installed it.\n\n292\n00:15:31.547 --> 00:15:35.460\nCuz what's happening, is it's generating\nthat self signed certificate.\n\n293\n00:15:35.460 --> 00:15:37.296\nIf I go and\nchange the name of the computer,\n\n294\n00:15:37.296 --> 00:15:40.917\nnow the name of the computer doesn't match\nthe certificate that it issued itself and\n\n295\n00:15:40.917 --> 00:15:42.193\nthere's gonna be a problem.\n\n296\n00:15:42.193 --> 00:15:46.069\nIt's gonna say, hey, this certificate\nisn't valid anymore, and so\n\n297\n00:15:46.069 --> 00:15:48.950\nall of a sudden your whole\nPKI becomes untrusted.\n\n298\n00:15:48.950 --> 00:15:52.296\nAll your certificates start breaking and\nthat's not gonna be a good thing.\n\n299\n00:15:52.296 --> 00:15:56.047\nI've changed the time on\na certificate server before and\n\n300\n00:15:56.047 --> 00:15:59.887\nhad major issues with some of\nthe certificates that I was.\n\n301\n00:15:59.887 --> 00:16:01.632\nIssuing in recent times,\n\n302\n00:16:01.632 --> 00:16:05.690\nI remember one time I set up\na root CA certificate authority.\n\n303\n00:16:07.240 --> 00:16:09.880\nIssued it, it created\nthe self-signing certificate and\n\n304\n00:16:09.880 --> 00:16:13.140\nthen I realized that it was\nnot a domain member and\n\n305\n00:16:13.140 --> 00:16:17.000\nthe time was in sync correctly with\nthe rest of the computers in the domain.\n\n306\n00:16:17.000 --> 00:16:19.120\nAnd so\nI thought I'll just go change the time.\n\n307\n00:16:19.120 --> 00:16:22.770\nI'm not changing the time zone I'm just\ngonna change the time, roll it back.\n\n308\n00:16:22.770 --> 00:16:24.370\nCuz the time is already correct.\n\n309\n00:16:24.370 --> 00:16:26.829\nIt just wasn't synchronizing\nproperly with the PDC,\n\n310\n00:16:26.829 --> 00:16:28.490\nbecause it's not part of my domain.\n\n311\n00:16:28.490 --> 00:16:32.540\nAnd all of a sudden,\nit invalidated my self-signed certificate.\n\n312\n00:16:32.540 --> 00:16:36.150\nIt was saying, hey, this certificate won't\nbe valid for another three hours, and\n\n313\n00:16:36.150 --> 00:16:41.075\nI tried rolling the clock forward,\nthree more hours hoping, hey, I'll fix it.\n\n314\n00:16:41.075 --> 00:16:44.560\n[LAUGH] Yeah, no, I ended up starting\nover with that public key infrastructure.\n\n315\n00:16:44.560 --> 00:16:47.100\nSo, do be careful with changing.\n\n316\n00:16:47.100 --> 00:16:50.400\nUsually you're talking about name,\ndomain membership,\n\n317\n00:16:50.400 --> 00:16:55.740\nanything that has to do with the identity\nof that server, but learn from my mistake.\n\n318\n00:16:55.740 --> 00:16:59.620\nTime can be an issue too if you've\nissued certificates recently and\n\n319\n00:16:59.620 --> 00:17:01.270\nthen you changed the time.\n\n320\n00:17:01.270 --> 00:17:04.980\nThat can change that validity period and\nhave them show up as not valid.\n\n321\n00:17:04.980 --> 00:17:06.990\nAll right, so we're finished up.\n\n322\n00:17:06.990 --> 00:17:08.430\nI see configuration succeeded.\n\n323\n00:17:08.430 --> 00:17:13.670\nWe'll go ahead and click Close and\nnow we will launch our console.\n\n324\n00:17:13.670 --> 00:17:17.700\nWe'll go from my tools menu and\nchoose Certification Authority.\n\n325\n00:17:17.700 --> 00:17:21.650\nIt will launch the CA console,\nAKA the CertSrv console.\n\n326\n00:17:21.650 --> 00:17:25.489\nIf you talk to anybody or read blogs or\nanything like that you'll hear them say\n\n327\n00:17:25.489 --> 00:17:28.870\nthe CertSrv console this is\nwhat they're talking about.\n\n328\n00:17:28.870 --> 00:17:32.380\nThis is the main interface that we use\nto manage our certificate authority.\n\n329\n00:17:32.380 --> 00:17:36.050\nWe also we've talked about in previous\nepisodes we can use the Certutil\n\n330\n00:17:36.050 --> 00:17:37.930\nfrom the command line.\n\n331\n00:17:37.930 --> 00:17:40.840\nAll right so let's take a look\nat what we've got over here.\n\n332\n00:17:40.840 --> 00:17:42.800\nNot a whole lot yet.\n\n333\n00:17:42.800 --> 00:17:46.249\nI'm going to right click on rootCA and\nchoose Properties.\n\n334\n00:17:48.860 --> 00:17:51.890\nAnd we'll take a look and see what we get.\n\n335\n00:17:51.890 --> 00:17:53.020\nIt always does this.\n\n336\n00:17:53.020 --> 00:17:55.670\nIt's a little slow pulling up\nthe properties for the CA,\n\n337\n00:17:55.670 --> 00:17:57.790\nespecially the first time.\n\n338\n00:17:57.790 --> 00:17:59.980\nJust be patient with it, and there we go.\n\n339\n00:18:00.980 --> 00:18:05.429\nAnd if I zoom into this dialogue box,\nlet's see what we've got here.\n\n340\n00:18:06.540 --> 00:18:09.340\nSo on that general tab I've\ngot the whole CA certificate.\n\n341\n00:18:09.340 --> 00:18:11.800\nAnd I see certificate number zero.\n\n342\n00:18:11.800 --> 00:18:15.470\nAnd then I've got a button there\nthat says view certificate.\n\n343\n00:18:15.470 --> 00:18:18.183\nSo let's go take a look at it.\n\n344\n00:18:18.183 --> 00:18:19.520\nLet's click View Certificate.\n\n345\n00:18:20.870 --> 00:18:23.530\nAnd this also can take a minute,\nso be patient.\n\n346\n00:18:23.530 --> 00:18:26.850\nSo don't be in a hurry when you're\nworking with certificate authorities or\n\n347\n00:18:26.850 --> 00:18:27.960\ncertification authorities.\n\n348\n00:18:27.960 --> 00:18:29.980\nThey can be a little slow.\n\n349\n00:18:31.030 --> 00:18:34.200\nAnd these guys have at\nleast four gigs of RAM on.\n\n350\n00:18:34.200 --> 00:18:36.488\n&gt;&gt; And Mike, you know it's funny\nI see you going back and back and\n\n351\n00:18:36.488 --> 00:18:37.560\nforth with the term there.\n\n352\n00:18:37.560 --> 00:18:40.480\nI always do that, cuz I'm so\nused to calling it certificate authority.\n\n353\n00:18:40.480 --> 00:18:43.200\nWhen you look at the trusted store in\nyour computer it says certification.\n\n354\n00:18:43.200 --> 00:18:45.000\nI trip up all the time saying that.\n\n355\n00:18:45.000 --> 00:18:46.423\n[LAUGH]\n&gt;&gt; Yeah. [LAUGH] &gt;&gt; That's why I just\n\n356\n00:18:46.423 --> 00:18:48.873\npretty much abbreviate it, CA.\nI know I can't get it wrong.\n\n357\n00:18:48.873 --> 00:18:49.423\n&gt;&gt; There you go, that\n\n358\n00:18:49.423 --> 00:18:50.880\nmakes it nice and easy.\n\n359\n00:18:50.880 --> 00:18:52.410\nAll right, so there we go.\n\n360\n00:18:52.410 --> 00:18:53.450\nThere is our certificate.\n\n361\n00:18:53.450 --> 00:18:56.260\nI'll zoom in and Wes what do you\nnotice about that certificate there?\n\n362\n00:18:56.260 --> 00:18:57.150\n&gt;&gt; Well that's interesting.\n\n363\n00:18:57.150 --> 00:19:02.030\nIt's saying this is issued to\nthe same one it was issued by.\n\n364\n00:19:02.030 --> 00:19:05.660\nSo that's essentially saying,\ntrust me because I said so.\n\n365\n00:19:05.660 --> 00:19:07.570\nThis is a self-signed certificate.\n\n366\n00:19:07.570 --> 00:19:11.530\nThere is nobody higher to issue\nthis server a certificate.\n\n367\n00:19:11.530 --> 00:19:14.140\nHe is the very top, so\nhe has to sign it himself.\n\n368\n00:19:14.140 --> 00:19:15.680\nIssued to root CA.\n\n369\n00:19:15.680 --> 00:19:17.090\nIssued by root CA.\n\n370\n00:19:17.090 --> 00:19:22.060\nThen I've got my validity period, notice\nit's gonna be good for five years, right,\n\n371\n00:19:22.060 --> 00:19:25.370\nfrom 2017 to 2022, because that's\nwhat we chose in our options.\n\n372\n00:19:25.370 --> 00:19:28.800\nAnd their certificate is good for\nall issuance policies and\n\n373\n00:19:28.800 --> 00:19:31.160\nall application policies.\n\n374\n00:19:31.160 --> 00:19:33.210\nIf we go over to the details or\n\n375\n00:19:33.210 --> 00:19:35.980\nthe certification path again,\nthere's nothing higher.\n\n376\n00:19:35.980 --> 00:19:40.660\nThis is the very top of the infrastructure\nso pretty boring certificate path or\n\n377\n00:19:40.660 --> 00:19:43.000\ncertification path when we look at that.\n\n378\n00:19:43.000 --> 00:19:45.030\nNow I'm gonna go over to Details.\n\n379\n00:19:45.030 --> 00:19:50.070\nBecause in order to complete this process,\nI'm gonna need a copy of this certificate.\n\n380\n00:19:50.070 --> 00:19:54.600\nSo on those Details tab, down at\nthe bottom, I've got this Copy to File.\n\n381\n00:19:54.600 --> 00:19:58.130\nI'll go ahead and click on that,\nlaunches my Export wizard.\n\n382\n00:19:58.130 --> 00:19:59.890\nI'm gonna click Next.\n\n383\n00:19:59.890 --> 00:20:02.740\nAnd I'm gonna just do the good old .cer.\n\n384\n00:20:02.740 --> 00:20:05.910\nI don't need the private key,\nI just need the certificate and\n\n385\n00:20:05.910 --> 00:20:07.740\nthe associated public key.\n\n386\n00:20:07.740 --> 00:20:08.600\nSo I'll click Next.\n\n387\n00:20:09.730 --> 00:20:13.770\nAnd I'm going to browse and\nI'm just gonna dump this.\n\n388\n00:20:14.880 --> 00:20:15.760\nWhere am I gonna put this?\n\n389\n00:20:15.760 --> 00:20:20.170\nI've got a folder that I'm gonna\nuse as a share called Cert Data, so\n\n390\n00:20:20.170 --> 00:20:22.140\nI'm going to export it into there.\n\n391\n00:20:22.140 --> 00:20:23.980\nAnd I'll explain that in just a second.\n\n392\n00:20:23.980 --> 00:20:25.754\nAnd I'm going to call it root CA.\n\n393\n00:20:25.754 --> 00:20:31.986\nThat's good enough, and we'll click Save.\n\n394\n00:20:31.986 --> 00:20:34.120\nPuts my path in there.\n\n395\n00:20:34.120 --> 00:20:36.640\nWe'll click next and Finish.\n\n396\n00:20:36.640 --> 00:20:38.320\nAnd then the export was successful.\n\n397\n00:20:38.320 --> 00:20:40.130\nWe'll click OK.\n\n398\n00:20:40.130 --> 00:20:42.020\nAnd then we can click OK there.\n\n399\n00:20:42.020 --> 00:20:46.310\nAnd I'm gonna leave these properties\nopen cuz we're gonna come\n\n400\n00:20:46.310 --> 00:20:49.340\nback to another one of these\ntabs here in just a second.\n\n401\n00:20:49.340 --> 00:20:53.440\nBut what we're gonna need to do,\nremember, this guy's gonna be offline.\n\n402\n00:20:53.440 --> 00:20:57.850\nBut as you're setting it up, mostly\nlikely he is connected to the network.\n\n403\n00:20:57.850 --> 00:21:01.500\nSo when you're first setting up your PKI.\n\n404\n00:21:01.500 --> 00:21:04.420\nHe can be online as you\ngo through this process.\n\n405\n00:21:04.420 --> 00:21:08.500\nYou're gonna set up your root CA,\nset up your subordinate CAs,\n\n406\n00:21:08.500 --> 00:21:13.510\nall while it's still networked, and\nthen take your root CA offline.\n\n407\n00:21:13.510 --> 00:21:15.620\nIf you're doing it all at once.\n\n408\n00:21:15.620 --> 00:21:19.840\nIf this is a multi-day project or\nyou're subordinates are at another branch\n\n409\n00:21:19.840 --> 00:21:24.270\noffices, you might be doing this on\none day and the others on another day.\n\n410\n00:21:24.270 --> 00:21:27.520\nAnd you don't wanna leave him\nonline you'll be taking it offline.\n\n411\n00:21:27.520 --> 00:21:34.600\nIf he's offline, you're gonna need\nto basically do a manual request.\n\n412\n00:21:34.600 --> 00:21:36.940\nAnd I'll show you a little more as we go.\n\n413\n00:21:36.940 --> 00:21:41.820\nBut you'll be using like a thumb driver or\nsome type of removable media to move files\n\n414\n00:21:41.820 --> 00:21:46.300\nfrom your subordinate CA to your root CA\nand then back to your subordinate CA,\n\n415\n00:21:46.300 --> 00:21:47.860\nand you'll see what I\nmean here in a minute.\n\n416\n00:21:48.860 --> 00:21:51.460\nSince I'm doing all these in\none day I'm gonna go ahead and\n\n417\n00:21:51.460 --> 00:21:55.780\nleave it connected to the network and\ntechnically I could do an online request.\n\n418\n00:21:55.780 --> 00:22:00.190\nBut I'm gonna at least make it\nlook realistic by using a share.\n\n419\n00:22:00.190 --> 00:22:03.350\nBut like I said in the real world\nyou're probably be using a thumb drive\n\n420\n00:22:03.350 --> 00:22:05.560\nif it was truly offline at this point.\n\n421\n00:22:05.560 --> 00:22:08.520\n&gt;&gt; Mike you said at the beginning\nof this episode just like and\n\n422\n00:22:08.520 --> 00:22:13.100\nalso in the previous parts here within\nCA infrastructure is that something\n\n423\n00:22:13.100 --> 00:22:18.050\nthat our offline CA just like any other CA\nis gonna have to have is a way to find for\n\n424\n00:22:18.050 --> 00:22:19.330\ninstance the CRL, the CRL.\n\n425\n00:22:20.380 --> 00:22:22.960\nThe certificate revocation list,\nand we do that through the CDP.\n\n426\n00:22:22.960 --> 00:22:26.870\nAnd again, long, acronym, Certificate\nRevocation List Distribution Point,\n\n427\n00:22:26.870 --> 00:22:30.750\nbut how is it that we're gonna implement\nthat if the computer isn't online?\n\n428\n00:22:30.750 --> 00:22:32.270\nWhere are we gonna see that?\n\n429\n00:22:32.270 --> 00:22:35.230\n&gt;&gt; Yeah, we need to worry about\nthose published locations and\n\n430\n00:22:35.230 --> 00:22:39.560\nwe need to make sure they are going\nsomewhere that everybody on the network or\n\n431\n00:22:39.560 --> 00:22:43.680\nanybody that's validating these\ncertificates for that matter can find.\n\n432\n00:22:43.680 --> 00:22:47.680\nNormally by default and I'll show\nthere is an extensions tab over here.\n\n433\n00:22:47.680 --> 00:22:49.620\nAnd let's take a closer look at this.\n\n434\n00:22:49.620 --> 00:22:51.756\nI've got my CRL distribution point and\n\n435\n00:22:51.756 --> 00:22:54.675\nyou will see there is a few\nlocations listed in there.\n\n436\n00:22:54.675 --> 00:22:58.437\nThere is the SQL and window system32\nwhat's highlighted in blue right now,\n\n437\n00:22:58.437 --> 00:22:59.525\nthat's a local file.\n\n438\n00:22:59.525 --> 00:23:03.270\nThere is our local folder where\nit's gonna publish that too.\n\n439\n00:23:03.270 --> 00:23:08.117\nThere's an LDAP location, there's also\na web location and HTTP LDAP being\n\n440\n00:23:08.117 --> 00:23:14.860\nActive Directory, HTTP being a web server,\nand then there's also a file location.\n\n441\n00:23:14.860 --> 00:23:19.040\nThe problem is this guy's gonna be offline\nand the bigger problem is he's not part of\n\n442\n00:23:19.040 --> 00:23:21.140\nActive Directory,\nhe's not part of the domain.\n\n443\n00:23:21.140 --> 00:23:25.570\nSo he's not gonna be able to publish\ndirectly into Active Directory.\n\n444\n00:23:25.570 --> 00:23:29.250\nThere are some reg edits you\ncan do to force that procedure.\n\n445\n00:23:29.250 --> 00:23:33.880\nBut I'll tell you, I find it much easier\nto do what we're getting ready to do,\n\n446\n00:23:33.880 --> 00:23:38.070\nwhich is to publish it out and\nthen copy it over to my subordinate and\n\n447\n00:23:38.070 --> 00:23:40.735\nmake it available through its web server.\n\n448\n00:23:40.735 --> 00:23:43.645\nCuz it's gonna be online and\nhave web services running.\n\n449\n00:23:43.645 --> 00:23:47.719\nThis guy doesn't have HTTP so\nI can't publish it there.\n\n450\n00:23:47.719 --> 00:23:49.767\nThere's no access to Active Directory so\nI can't publish it there.\n\n451\n00:23:49.767 --> 00:23:53.515\nIf I publish it to a file or\nthe local drive, it's gonna be offline, so\n\n452\n00:23:53.515 --> 00:23:55.885\nnobody else will be able to access it.\n\n453\n00:23:55.885 --> 00:23:57.022\nSo that's not gonna work either.\n\n454\n00:23:57.022 --> 00:23:58.791\nSo what we're gonna do is we're\ngonna add a new location.\n\n455\n00:23:58.791 --> 00:24:00.967\nFor my CRL distribution point.\n\n456\n00:24:00.967 --> 00:24:03.751\nWe'll go ahead and click Add.\n\n457\n00:24:03.751 --> 00:24:05.971\nAnd this is gonna be a little bit small,\nso\n\n458\n00:24:05.971 --> 00:24:09.526\nwhat I'm probably gonna have to do\nis type this in and then zoom in,\n\n459\n00:24:09.526 --> 00:24:14.240\nbecause my zoom is not letting me type and\nzoom at the same time, all right?\n\n460\n00:24:14.240 --> 00:24:15.090\nSo let's do this.\n\n461\n00:24:15.090 --> 00:24:19.840\nWe're gonna add that CDB location,\nand it's gonna be http://,\n\n462\n00:24:19.840 --> 00:24:24.240\nand then the name of my subordinate CA,\n\n463\n00:24:24.240 --> 00:24:28.810\nwhich is gonna be subca.lab.itpro.tv/,\n\n464\n00:24:28.810 --> 00:24:33.703\nand I have to double-check\nmy typing as we go here.\n\n465\n00:24:33.703 --> 00:24:41.250\n/certdata/ and then we're gonna use\nthis handy dandy little variable.\n\n466\n00:24:41.250 --> 00:24:43.270\nI'm gonna zoom in just for a second.\n\n467\n00:24:43.270 --> 00:24:46.988\nYou see that variable underneath there,\nnow you can see what I've typed in so far.\n\n468\n00:24:46.988 --> 00:24:49.210\nThere's a drop-down list,\nand if I click on that,\n\n469\n00:24:49.210 --> 00:24:51.140\nlet's see if it'll let me click on it and\nthen zoom in.\n\n470\n00:24:52.600 --> 00:24:53.300\nThere we go.\n\n471\n00:24:53.300 --> 00:24:55.980\nThere's a whole bunch of\nvariables that I can insert.\n\n472\n00:24:55.980 --> 00:25:00.750\nRather than having to know this specific\ninformation, I can insert these variables.\n\n473\n00:25:00.750 --> 00:25:04.350\nAnd then when it creates the file that\nit's publishing, it'll fill in or\n\n474\n00:25:04.350 --> 00:25:07.320\nreplace the variables with\nthe appropriate information.\n\n475\n00:25:07.320 --> 00:25:08.960\nSo that's what I'm going to do.\n\n476\n00:25:08.960 --> 00:25:11.600\nAnd for the CDP,\nthere's a few things that we need.\n\n477\n00:25:11.600 --> 00:25:15.380\nWe are gonna need the CA name,\nso we'll select CA name, and\n\n478\n00:25:15.380 --> 00:25:19.430\nyou click Insert, and notice how it dumps\nit right there at the end of that line.\n\n479\n00:25:19.430 --> 00:25:22.880\nWe also want the CRL name suffix, so\n\n480\n00:25:22.880 --> 00:25:26.870\nI'll find CRL name suffix,\nand I'll click Insert.\n\n481\n00:25:26.870 --> 00:25:29.380\nWe also need the Delta CRL's are allowed.\n\n482\n00:25:29.380 --> 00:25:33.460\nI'm gonna select that one,\nand click Insert.\n\n483\n00:25:33.460 --> 00:25:35.820\nThat actually gives you a nice\nexample right down here, like,\n\n484\n00:25:35.820 --> 00:25:37.130\nhow do you remember all that?\n\n485\n00:25:37.130 --> 00:25:41.340\nWell, look, there's CA names,\nCRL name suffix, Delta CRL allowed, so\n\n486\n00:25:41.340 --> 00:25:45.910\npretty standard format for a CDP location.\n\n487\n00:25:45.910 --> 00:25:48.725\nBut then what I have to do is I have\nto go to the end of the line and\n\n488\n00:25:48.725 --> 00:25:49.842\nadd a little more text.\n\n489\n00:25:49.842 --> 00:25:54.850\nAnd so, typically, what I'll do is I'll\njust click to put my cursor in there.\n\n490\n00:25:54.850 --> 00:25:55.430\nYou can see it in there.\n\n491\n00:25:55.430 --> 00:25:58.490\nAnd then I'll just move, and\nI can't move with it zoomed.\n\n492\n00:25:58.490 --> 00:26:02.340\nI'll use my arrow key to move it over to\nmake sure I'm at the end of the line.\n\n493\n00:26:02.340 --> 00:26:04.833\nAll right, and I'm going to add a .CRL.\n\n494\n00:26:04.833 --> 00:26:09.510\nWhich is the extension for\ncertificate revocation list.\n\n495\n00:26:09.510 --> 00:26:11.950\nOnce again,\nlet me zoom in to show you all that.\n\n496\n00:26:11.950 --> 00:26:12.990\nSo, there we go.\n\n497\n00:26:12.990 --> 00:26:13.990\nGot my CA name.\n\n498\n00:26:13.990 --> 00:26:15.095\nCRL name suffix.\n\n499\n00:26:15.095 --> 00:26:16.972\nDeltaCRL_Allowed.CRL.\n\n500\n00:26:16.972 --> 00:26:19.995\nAnd I'll go ahead and click OK.\n\n501\n00:26:21.020 --> 00:26:22.970\nAnd now you can see my new location.\n\n502\n00:26:22.970 --> 00:26:24.990\nThere's a step that everybody forgets.\n\n503\n00:26:24.990 --> 00:26:26.189\nAnd they wonder why it doesn't work.\n\n504\n00:26:27.280 --> 00:26:31.490\nAdding it is great, but you got to\ntell it to use it as well, all right?\n\n505\n00:26:31.490 --> 00:26:32.640\nSo you got to come down here and\n\n506\n00:26:32.640 --> 00:26:37.335\nsay include in the CRLs, client uses\nto find the delta CRL locations, and\n\n507\n00:26:37.335 --> 00:26:42.430\ninclude in the CRL distribution pointer,\nthe CDP extension of issued certificates.\n\n508\n00:26:42.430 --> 00:26:45.480\nCuz here's what's happening,\nthat server's not up yet.\n\n509\n00:26:45.480 --> 00:26:48.100\nSub CA,\nthere is no folder called cert data.\n\n510\n00:26:48.100 --> 00:26:50.290\nIt's not even running web services yet.\n\n511\n00:26:50.290 --> 00:26:54.980\nSo that HTTP yadda yadda yadda,\nis actually not gonna work at this point.\n\n512\n00:26:54.980 --> 00:27:00.810\nBut when my root CA issues certificates,\nit's gonna include that path in there.\n\n513\n00:27:00.810 --> 00:27:01.350\nAnd then,\n\n514\n00:27:01.350 --> 00:27:06.060\nwhen the subordinate CA issues them to\nusers, that path is going to be in there.\n\n515\n00:27:06.060 --> 00:27:11.390\nAnd they'll be able to look and find\nthe root CA's certificate revocation list.\n\n516\n00:27:11.390 --> 00:27:14.970\nSo even though it's not up and ready yet,\nI've got to go ahead and set this up.\n\n517\n00:27:14.970 --> 00:27:16.520\nBecause I've seen this happen.\n\n518\n00:27:16.520 --> 00:27:18.000\nYou forget to add these.\n\n519\n00:27:18.000 --> 00:27:21.960\nYou go set up a subordinate CA, and\neverything kind of seems to work.\n\n520\n00:27:21.960 --> 00:27:24.300\nYou're installing\nthe subordinate CA certificate.\n\n521\n00:27:24.300 --> 00:27:28.000\nAnd all of a sudden, it says I can't\ntrust the root CA certificate.\n\n522\n00:27:28.000 --> 00:27:28.660\nYou're like why not?\n\n523\n00:27:28.660 --> 00:27:31.900\nI've added it to the trusted\nroot certificate store,\n\n524\n00:27:31.900 --> 00:27:33.250\nwhy aren't you trusting it?\n\n525\n00:27:33.250 --> 00:27:36.360\nBecause it can't find the CRL,\nbecause you forgot to add it.\n\n526\n00:27:36.360 --> 00:27:40.880\nSo in the certificate itself, there's no\npath, there's no way for the end user or\n\n527\n00:27:40.880 --> 00:27:46.020\nthe computer to locate the CRL, so\nyou end up starting over, [LAUGH] again.\n\n528\n00:27:46.020 --> 00:27:48.063\nIt's not a friendly service sometimes,\n\n529\n00:27:48.063 --> 00:27:50.813\nthere's a lot of starting\nover if you're not careful.\n\n530\n00:27:50.813 --> 00:27:55.153\nAll right, so we've got that done,\nthere's also an AIA, or\n\n531\n00:27:55.153 --> 00:28:00.050\nauthority information access\nextension that I've got to do.\n\n532\n00:28:00.050 --> 00:28:04.110\nSo I'm gonna go ahead and click Add here,\nsame process, I'm just gonna type in,\n\n533\n00:28:04.110 --> 00:28:06.580\nthe path is a little bit different,\nI'll show you what it is.\n\n534\n00:28:06.580 --> 00:28:12.759\nBut it's gonna be http:// which is named,\n\n535\n00:28:12.759 --> 00:28:21.170\nsubca.lab.itpro.tv/serverDNSname, so\nI insert that.\n\n536\n00:28:22.550 --> 00:28:24.420\nFollowed by the CA name.\n\n537\n00:28:25.860 --> 00:28:27.380\nSo I'll insert that.\n\n538\n00:28:27.380 --> 00:28:29.021\nAnd again,\nthere's a cheat sheet right here.\n\n539\n00:28:29.021 --> 00:28:33.366\nServer DNS name, actually,\nthey've got an underscore between those.\n\n540\n00:28:33.366 --> 00:28:38.342\nLet's make sure I put that in there.\n\n541\n00:28:38.342 --> 00:28:42.278\nI don't remember doing that before,\nbut we'll add that.\n\n542\n00:28:42.278 --> 00:28:44.404\nYou know what?\n\n543\n00:28:44.404 --> 00:28:44.990\nI'm not gonna do that.\n\n544\n00:28:46.600 --> 00:28:48.588\nI'm gonna trust my instincts.\n\n545\n00:28:48.588 --> 00:28:52.576\nSo CA name, and then we're gonna\nfollow that with the certificate name.\n\n546\n00:28:52.576 --> 00:28:56.382\nWe'll go with certificate name insert.\n\n547\n00:28:56.382 --> 00:29:03.566\nAnd then again, right to the end of\nthat line, this one's gonna be .CRT.\n\n548\n00:29:03.566 --> 00:29:06.030\nIt's the extension for that one.\n\n549\n00:29:06.030 --> 00:29:08.622\nAnd then we'll go ahead and click OK.\n\n550\n00:29:08.622 --> 00:29:09.462\nAnd again,\n\n551\n00:29:09.462 --> 00:29:14.840\nmake sure you check to include in the AIA\nextension of issued certificates.\n\n552\n00:29:14.840 --> 00:29:18.550\nWe're not using an OCSP, so\nI don't need to worry about that one.\n\n553\n00:29:18.550 --> 00:29:21.480\nAnd at that point,\nwe should be good to go.\n\n554\n00:29:21.480 --> 00:29:23.430\nI'm gonna go ahead and click Apply.\n\n555\n00:29:25.010 --> 00:29:27.710\nAnd it's gonna tell me I've got\nto restart the services to make\n\n556\n00:29:27.710 --> 00:29:29.190\nthose changes take effect.\n\n557\n00:29:29.190 --> 00:29:29.990\nSo I'll say yes.\n\n558\n00:29:32.110 --> 00:29:35.510\nAnd I didn't apply my\nchanges before I made the,\n\n559\n00:29:35.510 --> 00:29:37.790\nusually what I'll do is I'll set the CDP.\n\n560\n00:29:37.790 --> 00:29:38.314\nI'll click Apply.\n\n561\n00:29:38.314 --> 00:29:40.080\nIt'll say do you want to restart now.\n\n562\n00:29:40.080 --> 00:29:41.300\nI'll say no.\n\n563\n00:29:41.300 --> 00:29:46.010\nThen I'll go change the AIA, click apply,\ndo you want to restart, yes.\n\n564\n00:29:46.010 --> 00:29:47.340\nAnd I'll just restart it once.\n\n565\n00:29:47.340 --> 00:29:53.100\nLet's make sure that my CDP stayed,\nand there it is, we are good to go.\n\n566\n00:29:53.100 --> 00:29:55.880\nWe can go ahead and\nclick OK on those properties.\n\n567\n00:29:57.000 --> 00:30:01.900\nSo now, even though those paths aren't\nvalid, as I issue this next certificate,\n\n568\n00:30:01.900 --> 00:30:03.540\nthe paths would be in there, and\n\n569\n00:30:03.540 --> 00:30:07.260\nby the time we need those paths\nthey will be valid, all right?\n\n570\n00:30:07.260 --> 00:30:09.420\nSo we just had to get\nset up ahead of time.\n\n571\n00:30:09.420 --> 00:30:12.770\nSo, now I'm gonna go ahead and\npublish a certificate revocation list,\n\n572\n00:30:12.770 --> 00:30:16.830\neven though it's empty,\nI need a copy of this list.\n\n573\n00:30:16.830 --> 00:30:21.840\nSo I'm gonna right-click on revoke\ncertificates, all tasks and Publish.\n\n574\n00:30:22.880 --> 00:30:24.780\nNow it published it to all.\n\n575\n00:30:24.780 --> 00:30:26.910\nOr actually now we can go ahead and\nsay new CRL.\n\n576\n00:30:26.910 --> 00:30:31.645\nA delta CRL is just the changes\nsince the last full publication.\n\n577\n00:30:31.645 --> 00:30:34.555\nMakes it a little bit easier to publish,\nright?\n\n578\n00:30:34.555 --> 00:30:37.635\nI only need to publish the changes,\nnot the entire list.\n\n579\n00:30:37.635 --> 00:30:40.645\nWe've never published it, so\nI can't publish just a delta.\n\n580\n00:30:40.645 --> 00:30:43.375\nThere's no changes,\nI need the entire list.\n\n581\n00:30:43.375 --> 00:30:44.416\nSo I click OK, and\n\n582\n00:30:44.416 --> 00:30:49.040\nit should give me a little message\nsaying that it was successful.\n\n583\n00:30:49.040 --> 00:30:50.720\nAll right, so let that go.\n\n584\n00:30:50.720 --> 00:30:53.152\nAnd it's gonna try all\nthose different locations.\n\n585\n00:30:53.152 --> 00:30:54.700\nThe HTTP one is not gonna work.\n\n586\n00:30:54.700 --> 00:30:56.060\nLDAP's not gonna work.\n\n587\n00:30:56.060 --> 00:30:58.160\nBut the local one is gonna work.\n\n588\n00:30:58.160 --> 00:31:02.370\nSo, I'll be able to get a copy of it from\nthere before we take this guy offline and\n\n589\n00:31:02.370 --> 00:31:05.830\nget it over to that subordinate CA.\n\n590\n00:31:05.830 --> 00:31:08.690\nSo, I tell you what Wes,\nlet's make sure that that finished.\n\n591\n00:31:08.690 --> 00:31:10.480\nAnd I know we're getting\na little short on time.\n\n592\n00:31:12.420 --> 00:31:15.110\nSo we're gonna have to\nprobably take another part.\n\n593\n00:31:15.110 --> 00:31:17.550\nLet's go take a look here.\n\n594\n00:31:17.550 --> 00:31:22.900\nSo what I'm gonna do is,\nI'm gonna navigate into [COUGH] excuse me.\n\n595\n00:31:22.900 --> 00:31:25.460\nThat's C drive and\nthere's that cert data folder.\n\n596\n00:31:25.460 --> 00:31:28.110\nI copied that Root CA into there earlier,\nright?\n\n597\n00:31:28.110 --> 00:31:31.950\nThat's when we exported\nthe Root CA server certificate.\n\n598\n00:31:31.950 --> 00:31:38.190\nNow I'm gonna go to that location under\nthe CDP, which was C colon, program file.\n\n599\n00:31:38.190 --> 00:31:42.977\nI'm sorry, not program files,\nC colon Windows,\n\n600\n00:31:42.977 --> 00:31:46.662\nSystem32, CertSrv, CertEnroll.\n\n601\n00:31:46.662 --> 00:31:48.925\nAnd there's another copy\nof the certificate, but\n\n602\n00:31:48.925 --> 00:31:50.910\nit's a different extension.\n\n603\n00:31:50.910 --> 00:31:53.890\nAnd then there is my\ncertificate revocation list.\n\n604\n00:31:53.890 --> 00:31:57.420\nYou can see that is a CRL, or\na Certificate Revocation List.\n\n605\n00:31:57.420 --> 00:31:59.980\nAnd this certificate\nis slightly different.\n\n606\n00:31:59.980 --> 00:32:05.411\nIf we take a look at the extension on it,\nit's not a .cer,\n\n607\n00:32:05.411 --> 00:32:08.520\nit's a .crt.\n\n608\n00:32:08.520 --> 00:32:09.568\nSo, we need that one as well.\n\n609\n00:32:09.568 --> 00:32:11.090\n[COUGH] Excuse me.\n\n610\n00:32:11.090 --> 00:32:14.192\nAlright, we will go ahead and\ngrab those guys,\n\n611\n00:32:14.192 --> 00:32:18.550\ngoing to copy them and now I going\nto put them in that shared folder.\n\n612\n00:32:21.240 --> 00:32:24.180\nSo I can get to those\nfrom the subordinate C8.\n\n613\n00:32:24.180 --> 00:32:28.750\nIn the real world, if this guy was truly\nnot networked and already offline,\n\n614\n00:32:28.750 --> 00:32:31.800\nI would be copying those to\na thumb drive instead, so\n\n615\n00:32:31.800 --> 00:32:35.400\nI can manually take them\nover to that subordinate CA.\n\n616\n00:32:35.400 --> 00:32:38.162\nSo the next step, Wes,\nis to set up the subordinate CA.\n\n617\n00:32:38.162 --> 00:32:41.740\n&gt;&gt; All right, great job, showing us all\nthe finer points of getting that root CA\n\n618\n00:32:41.740 --> 00:32:45.280\nonline and then, well, taking it offline,\nI guess, in the next episode.\n\n619\n00:32:45.280 --> 00:32:46.181\n&gt;&gt; [LAUGH]\n&gt;&gt; So do look forward\n\n620\n00:32:46.181 --> 00:32:47.708\nto seeing you guys there in a part two.\n\n621\n00:32:47.708 --> 00:32:50.509\nMike, anything else you\nmight wanna say about,\n\n622\n00:32:50.509 --> 00:32:53.044\nyou're just bringing that root CA online?\n\n623\n00:32:53.044 --> 00:32:54.212\n&gt;&gt; No, I think we hit it all.\n\n624\n00:32:54.212 --> 00:32:57.404\nThe main thing right now is just\ngonna be wait for the next step, and\n\n625\n00:32:57.404 --> 00:33:00.264\nset up the subordinate CA and\ntest it and see if it all works.\n\n626\n00:33:00.264 --> 00:33:03.386\n&gt;&gt; All right, that's another one of those\nMike cliffhangers that we look forward to\n\n627\n00:33:03.386 --> 00:33:04.980\nseeing you there in the fourth part here.\n\n628\n00:33:04.980 --> 00:33:06.324\nAnd we look forward to seeing you,\nthe viewer.\n\n629\n00:33:06.324 --> 00:33:09.002\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n630\n00:33:09.002 --> 00:33:10.140\n&gt;&gt; And I'm Mike Rodrick.\n\n631\n00:33:10.140 --> 00:33:11.482\n&gt;&gt; And we'll see you next time.\n\n632\n00:33:11.482 --> 00:33:18.970\n[MUSIC]\n\n633\n00:33:18.970 --> 00:33:21.294\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "224315067"
        },
        {
          "description": "In this episode, Wes and Mike continue the discussion of CA infrastructure by moving into the installing the CA role and bringing the the subordinate certificate authority online. They also look at how to import that root CA certificate on the subordinate CA, completing the certificate signing request as well as installing the subordinate CA certificate. Finally, they will demonstrate how to deploy the root CA certificate through ADDS.",
          "length": "2034",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-4-design_a_ca_infrastructure_pt4-062817-PGM.00_35_42_20.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-4-design_a_ca_infrastructure_pt4-062817-PGM.00_35_42_20.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-2-4-design_a_ca_infrastructure_pt4-062817-PGM.00_35_42_20.Still001-sm.jpg",
          "title": "Design a CA Infrastructure Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.001 --> 00:00:01.440\nWelcome to ITProTV.\n\n2\n00:00:01.440 --> 00:00:02.940\nI'm your host, Don Pezet.\n\n3\n00:00:02.940 --> 00:00:06.434\n[CROSSTALK]\n\n4\n00:00:06.434 --> 00:00:08.176\n[MUSIC]\n\n5\n00:00:08.176 --> 00:00:11.826\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:11.826 --> 00:00:15.320\n&gt;&gt; Hello, and welcome back to another\ngreat episode here at ITProTV.\n\n7\n00:00:15.320 --> 00:00:17.545\nI'm your host, Wes Bryan,\nand in today's episode,\n\n8\n00:00:17.545 --> 00:00:21.530\nwe're coming back at you with more\nof that design a CA infrastructure.\n\n9\n00:00:21.530 --> 00:00:24.270\nThat's right, certificate authorities,\nand this is a part four.\n\n10\n00:00:24.270 --> 00:00:27.759\nJoining us back in the studios to continue\nthis endeavor is none other than Mr.\n\n11\n00:00:27.759 --> 00:00:28.390\nMike Rodrick.\n\n12\n00:00:28.390 --> 00:00:29.320\nMike, how you doing, sir?\n\n13\n00:00:29.320 --> 00:00:30.560\n&gt;&gt; Part four, I'm doing great.\n\n14\n00:00:30.560 --> 00:00:32.261\nIt's a regular miniseries going on here,\nisn't it?\n\n15\n00:00:32.261 --> 00:00:32.787\n&gt;&gt; That's right.\n\n16\n00:00:32.787 --> 00:00:34.910\n&gt;&gt; I love it, all right,\nyeah, but I'm doing great.\n\n17\n00:00:34.910 --> 00:00:36.640\nThanks for having me back,\nexcited to be here as always.\n\n18\n00:00:37.700 --> 00:00:42.632\nIn our previous episode,\nwe were setting up our\n\n19\n00:00:42.632 --> 00:00:47.083\noffline root CA, our standalone root CA.\n\n20\n00:00:47.083 --> 00:00:52.757\nAnd now we're getting ready to configure\nour online enterprise subordinate CA.\n\n21\n00:00:52.757 --> 00:00:56.935\nThe one that's actually going to interact\nwith users and issue certificates out to\n\n22\n00:00:56.935 --> 00:01:00.225\ncomputers and web servers and whatever\nelse we need our certificates for,\n\n23\n00:01:00.225 --> 00:01:03.595\nVPN connections, IPsec,\nall that fun stuff.\n\n24\n00:01:04.635 --> 00:01:07.634\nSo let's just jump right\nback in without further ado,\n\n25\n00:01:07.634 --> 00:01:09.273\ntake a look at my screen here.\n\n26\n00:01:09.273 --> 00:01:14.117\nAnd I left it right where we were\nat the end of the previous episode,\n\n27\n00:01:14.117 --> 00:01:17.270\nwhere we had copied over the rootca.cer.\n\n28\n00:01:17.270 --> 00:01:19.460\nThat's when we went into\nthe server properties, or\n\n29\n00:01:19.460 --> 00:01:25.390\nthe CA properties in the serve console,\nand we exported the .cer certificate.\n\n30\n00:01:25.390 --> 00:01:28.682\nI also grabbed a copy of the .crl and\n\n31\n00:01:28.682 --> 00:01:34.252\nthe .crt from the location that\nit automatically publishes to.\n\n32\n00:01:34.252 --> 00:01:43.149\nC:\\Windows\\system32\\CertSrv\\CertEnroll.\n\n33\n00:01:43.149 --> 00:01:45.187\nWe got the files out of there.\n\n34\n00:01:45.187 --> 00:01:49.374\nAnd instead of using a thumb drive\nbecause I'm a little limited with my VMs,\n\n35\n00:01:49.374 --> 00:01:53.710\nI've actually left him networked so\nI can connect to the shared folder.\n\n36\n00:01:53.710 --> 00:01:57.490\nIn the real world, you'd be copying\nthese off to removable media because\n\n37\n00:01:57.490 --> 00:02:00.920\nthis guy's probably offline already,\nand we're taking it over.\n\n38\n00:02:00.920 --> 00:02:04.833\nOr mailing that thumb drive\nto the branch office so\n\n39\n00:02:04.833 --> 00:02:09.131\nthat an admin over there can\nset up the subordinate CA.\n\n40\n00:02:09.131 --> 00:02:11.390\nAll right, so let's get her done.\n\n41\n00:02:11.390 --> 00:02:17.746\nWe're gonna go over to my subordinate CA,\nor my soon to be subordinate CA.\n\n42\n00:02:17.746 --> 00:02:21.140\nAnd this guy, of course, is online and\nit is a member of the domain.\n\n43\n00:02:21.140 --> 00:02:24.122\nSo it's part of\nthe Active Directory domain.\n\n44\n00:02:24.122 --> 00:02:27.290\nAnd I'm first gonna copy that information.\n\n45\n00:02:27.290 --> 00:02:28.050\nWell, actually you know what?\n\n46\n00:02:28.050 --> 00:02:30.240\nI'll go ahead and\nlet's install certificate services.\n\n47\n00:02:30.240 --> 00:02:32.630\nThat'd probably be a good place to start?\n\n48\n00:02:32.630 --> 00:02:34.850\nSo let's do Add roles and features.\n\n49\n00:02:34.850 --> 00:02:37.950\nAnd just like before we'll click\nNext three times to get to the good\n\n50\n00:02:37.950 --> 00:02:39.060\npart of the wizard.\n\n51\n00:02:39.060 --> 00:02:42.210\nWe're gonna select\nActive Directory Certificate Services\n\n52\n00:02:42.210 --> 00:02:44.500\nas well as the Management Tools.\n\n53\n00:02:44.500 --> 00:02:49.010\nWe'll click Next a couple of\ntimes to get to the Roles screen.\n\n54\n00:02:49.010 --> 00:02:52.970\nSo all the way down to\nthe AD Certificate Services Role Services.\n\n55\n00:02:52.970 --> 00:02:56.010\nNow this one, remember,\non the root we left it just like it is,\n\n56\n00:02:56.010 --> 00:02:58.430\nCertification Authority, and that was it.\n\n57\n00:02:58.430 --> 00:03:02.050\nOn this one I've gotta decide how am\nI planning on using this subordinate?\n\n58\n00:03:02.050 --> 00:03:04.220\nHow am I gonna issue certificates?\n\n59\n00:03:04.220 --> 00:03:08.440\nDo I have just internal users that I want\nthem to go to a web page and enroll for\n\n60\n00:03:08.440 --> 00:03:09.490\ncertificates?\n\n61\n00:03:09.490 --> 00:03:14.230\nDo I have external users or\nusers that leave the network and\n\n62\n00:03:14.230 --> 00:03:17.780\nmight need to renew certificates when\nthey're not connected to the network?\n\n63\n00:03:17.780 --> 00:03:20.010\nThat's what these different services do.\n\n64\n00:03:20.010 --> 00:03:22.190\nAnd we've talked about them\nin the previous episodes.\n\n65\n00:03:22.190 --> 00:03:23.510\nAnd they give you some information.\n\n66\n00:03:23.510 --> 00:03:25.500\nOops, I cannot move while I'm zoomed in.\n\n67\n00:03:25.500 --> 00:03:29.480\nIf you click on them, it'll explain\nexactly what that service does.\n\n68\n00:03:29.480 --> 00:03:32.695\nIn my case, I just need the certification\nauthority web enrollment.\n\n69\n00:03:32.695 --> 00:03:37.690\nCuz I want people to be able to browse to\na web page being hosted by the IIS server\n\n70\n00:03:37.690 --> 00:03:42.350\non this subordinate CA, and request\na new certificate, if they need one.\n\n71\n00:03:42.350 --> 00:03:45.070\nWe'll also show you how to automate\nsome of that with group policy.\n\n72\n00:03:45.070 --> 00:03:46.920\nSo I'm gonna put a check mark there.\n\n73\n00:03:46.920 --> 00:03:49.890\nNow I said it was a web page,\nthat they were gonna browse to and\n\n74\n00:03:49.890 --> 00:03:51.240\nrequest a certificate.\n\n75\n00:03:51.240 --> 00:03:53.060\nSo guess what else it's going to install?\n\n76\n00:03:54.140 --> 00:03:56.510\nYou would be correct if you said IIS.\n\n77\n00:03:56.510 --> 00:03:58.440\nSo I'll go ahead and\nclick Add those features.\n\n78\n00:03:59.520 --> 00:04:02.000\nAnd then that also changes\nmy wizard a little bit.\n\n79\n00:04:02.000 --> 00:04:03.280\nIt added another step.\n\n80\n00:04:03.280 --> 00:04:06.591\nBecause now I'm saying I'm gonna\ninstall the Web Server Role and so\n\n81\n00:04:06.591 --> 00:04:09.190\nI have to configure that as well.\n\n82\n00:04:09.190 --> 00:04:10.200\nI'll zoom back out.\n\n83\n00:04:10.200 --> 00:04:13.900\nWe'll click Next, Next, and\nhere it's a little tricky.\n\n84\n00:04:13.900 --> 00:04:17.140\nWhat I want you to do is click Next.\n\n85\n00:04:17.140 --> 00:04:18.240\nThat's right, ladies and gentleman,\n\n86\n00:04:18.240 --> 00:04:22.970\nwe can use the default configuration for\nIIS to support our certificate services.\n\n87\n00:04:22.970 --> 00:04:24.980\nNow honestly, let me go back for\njust a second.\n\n88\n00:04:24.980 --> 00:04:28.015\nThis is something you might want\nto look at as an organization.\n\n89\n00:04:28.015 --> 00:04:33.163\nCuz as we scroll down through here,\ndifferent options for IIS.\n\n90\n00:04:33.163 --> 00:04:36.718\nAnd ever since, I don't know, 2003,\n\n91\n00:04:36.718 --> 00:04:40.910\nit tries to not install\neverything like it used to.\n\n92\n00:04:40.910 --> 00:04:42.455\nIt's a little more secure that way.\n\n93\n00:04:42.455 --> 00:04:44.650\nYou have to pick and\nchoose what you wanna add.\n\n94\n00:04:44.650 --> 00:04:49.821\nSo if you needed support for,\nI don't know, IIS scripting,\n\n95\n00:04:49.821 --> 00:04:54.103\nor what's another good one you might,\nsecurity.\n\n96\n00:04:54.103 --> 00:04:57.947\nIf you wanted to use basic\nauthentication or digest authentication,\n\n97\n00:04:57.947 --> 00:05:00.090\nyou would need to install those.\n\n98\n00:05:00.090 --> 00:05:04.860\nWindows authentication is selected by\ndefault and internally, that's all I need.\n\n99\n00:05:04.860 --> 00:05:09.630\nI'm not setting this up for users that are\nnot part of my domain to connect to, so\n\n100\n00:05:09.630 --> 00:05:10.780\nWindows authentication is perfect.\n\n101\n00:05:10.780 --> 00:05:13.520\nSo like I said,\nthe default will work in most scenarios.\n\n102\n00:05:13.520 --> 00:05:16.830\nBut if yours is slightly different,\ndon't just click Next, Next, Next, Next.\n\n103\n00:05:16.830 --> 00:05:19.278\nInstall, stop, and\ntake a look at that screen.\n\n104\n00:05:19.278 --> 00:05:23.036\nWe'll go ahead and click Install, and\nthen we'll wait just a minute and\n\n105\n00:05:23.036 --> 00:05:24.463\nwe'll do that same thing.\n\n106\n00:05:24.463 --> 00:05:26.590\nWe'll do the magic of TV timeouts.\n\n107\n00:05:26.590 --> 00:05:28.039\nWe'll let that finish and\nwe'll come right back.\n\n108\n00:05:29.720 --> 00:05:32.950\nAll right, and ba-da-bing, it's done, and\nso we'll go ahead and click on the link,\n\n109\n00:05:32.950 --> 00:05:34.950\njust like we did on our root CA for\n\n110\n00:05:34.950 --> 00:05:38.620\nConfigure Active Directory Certificate\nServices on the destination server.\n\n111\n00:05:38.620 --> 00:05:41.310\nThis time, instead of going up to\nthe exclamation point, I'll just\n\n112\n00:05:41.310 --> 00:05:45.360\nuse the link right here at the end of the\nfirst wizard to launch my second wizard.\n\n113\n00:05:46.780 --> 00:05:48.635\nAnd a lot of this is gonna be the same.\n\n114\n00:05:48.635 --> 00:05:52.110\nAnd when you look,\n[COUGH] this is a domain member, right?\n\n115\n00:05:52.110 --> 00:05:54.090\nSo I'm logged in as the domain admin.\n\n116\n00:05:54.090 --> 00:05:55.909\nSo you can see the credentials\nare different.\n\n117\n00:05:55.909 --> 00:06:00.739\nIt says lab, that's the name of my\ndomain/admin because I am setting up\n\n118\n00:06:00.739 --> 00:06:03.740\nan Enterprise Certification Authority.\n\n119\n00:06:03.740 --> 00:06:05.080\nWhich means I actually,\n\n120\n00:06:05.080 --> 00:06:08.890\nmy account needs to be in the enterprise\nadmin, not just the domain admin.\n\n121\n00:06:08.890 --> 00:06:10.044\nBe careful with that,\n\n122\n00:06:10.044 --> 00:06:13.380\nI'm using the default account\nin my little test lab here.\n\n123\n00:06:13.380 --> 00:06:15.730\nI don't have a whole lot\nof user accounts created.\n\n124\n00:06:15.730 --> 00:06:19.020\nYou might be the scenario though where\nyou've got a domain admin account\n\n125\n00:06:19.020 --> 00:06:21.720\nto manage a domain, but\nyou're not the enterprise admin.\n\n126\n00:06:21.720 --> 00:06:24.880\nA lot of times companies don't leave\nyou in the enterprise admin group.\n\n127\n00:06:24.880 --> 00:06:28.475\nThey might remove them, and\njust put you in there when you're needed.\n\n128\n00:06:28.475 --> 00:06:32.015\nSo make sure you're an enterprise\nadmin to have performed this action.\n\n129\n00:06:32.015 --> 00:06:33.575\nWe'll click Next.\n\n130\n00:06:33.575 --> 00:06:35.965\nAnd now you can see,\nbecause I chose more than one role,\n\n131\n00:06:35.965 --> 00:06:39.502\nI've got more than one role to configure,\nor role service, I should say.\n\n132\n00:06:39.502 --> 00:06:41.042\nSo we're gonna check both of them.\n\n133\n00:06:41.042 --> 00:06:45.312\nYou could do one and then run back through\nthis wizard later and do the other one.\n\n134\n00:06:45.312 --> 00:06:50.052\nMaybe somebody else is supposed to handle\nthat part or you need more information.\n\n135\n00:06:50.052 --> 00:06:51.722\nSo you could do one and then the other.\n\n136\n00:06:51.722 --> 00:06:53.254\nBut I'm gonna go ahead and do both.\n\n137\n00:06:53.254 --> 00:06:55.530\nI'll go ahead and click Next.\n\n138\n00:06:55.530 --> 00:06:58.260\nAnd then a lot of this is gonna\nbe similar or same screens but\n\n139\n00:06:58.260 --> 00:06:59.870\njust different choices here.\n\n140\n00:06:59.870 --> 00:07:04.880\nThis time it is an Enterprise CA, so\nit is tied into Active Directory.\n\n141\n00:07:04.880 --> 00:07:06.460\nWe'll click Next.\n\n142\n00:07:06.460 --> 00:07:07.634\nIt is not my root.\n\n143\n00:07:07.634 --> 00:07:09.678\nIt is gonna be a subordinate CA,\n\n144\n00:07:09.678 --> 00:07:13.100\nall right,\nwhich means he's that second tier down.\n\n145\n00:07:13.100 --> 00:07:15.120\nWe'll click Next.\n\n146\n00:07:15.120 --> 00:07:18.401\nI don't have a private key yet for\nthis server so we'll go ahead and\n\n147\n00:07:18.401 --> 00:07:19.286\ncreate a new key.\n\n148\n00:07:19.286 --> 00:07:22.957\nNow here,\nremember on the root CA we chose 4096,\n\n149\n00:07:22.957 --> 00:07:26.709\nI said let's bump that up to\nthe longest key possible,\n\n150\n00:07:26.709 --> 00:07:31.590\nbecause that root CA, I want that\nto be as secure as I can make it.\n\n151\n00:07:31.590 --> 00:07:35.385\nBut for this,\nI'm gonna leave it drop down a little bit,\n\n152\n00:07:35.385 --> 00:07:40.763\nbecause when we start issuing certificates\nout, I don't want too long of a key,\n\n153\n00:07:40.763 --> 00:07:45.431\nbecause longer is better, but\nit also slows down the whole encryption\n\n154\n00:07:45.431 --> 00:07:49.817\nprocess and not really necessary\non certificates I'm issuing.\n\n155\n00:07:49.817 --> 00:07:52.051\nSo we'll go ahead and click Next.\n\n156\n00:07:52.051 --> 00:07:56.826\nAnd then I'm gonna change my common\nname like I always do just to subCA for\n\n157\n00:07:56.826 --> 00:07:57.543\nthis guy.\n\n158\n00:07:57.543 --> 00:07:59.351\nWe'll click Next.\n\n159\n00:07:59.351 --> 00:08:02.142\nAnd in here,\nlet's take a look at this screen.\n\n160\n00:08:02.142 --> 00:08:06.351\nSave a certificate request to\nfile on the target machine.\n\n161\n00:08:06.351 --> 00:08:11.013\nIf I had done an enterprise root CA,\nI could choose that first option,\n\n162\n00:08:11.013 --> 00:08:14.027\nSend a certificate\nrequest to the parent CA.\n\n163\n00:08:14.027 --> 00:08:17.783\nSo I could actually do it immediately,\nwhile I'm in this wizard,\n\n164\n00:08:17.783 --> 00:08:22.142\nit could reach out on the network,\ngo talk to him, request the certificate,\n\n165\n00:08:22.142 --> 00:08:24.950\nget it issued back and we'd just be done.\n\n166\n00:08:24.950 --> 00:08:29.590\nBut because this is an offline\nstandalone root CA,\n\n167\n00:08:29.590 --> 00:08:33.370\nit's gonna make me create a file, and\n\n168\n00:08:33.370 --> 00:08:38.370\nthen that file will be carried over to the\nroot CA to actually issue the certificate.\n\n169\n00:08:38.370 --> 00:08:40.787\nCuz the subordinate CA\nneeds a certificate, right?\n\n170\n00:08:40.787 --> 00:08:42.499\nThe root, when we installed it,\n\n171\n00:08:42.499 --> 00:08:46.130\ngenerated his own certificate\ncuz there was nobody higher.\n\n172\n00:08:46.130 --> 00:08:48.800\nBut this is the second\ntier in our hierarchy.\n\n173\n00:08:48.800 --> 00:08:50.950\nThere is somebody higher\nthan my subordinate.\n\n174\n00:08:50.950 --> 00:08:54.840\nSo he needs a certificate issued\nfrom that higher authority,\n\n175\n00:08:54.840 --> 00:08:58.710\ngiving him authority to issue\ncertificates to users and\n\n176\n00:08:58.710 --> 00:09:02.840\ncomputers in the name of the root,\nright, in that chain of trust there.\n\n177\n00:09:03.860 --> 00:09:05.838\nSo we'll save that out to a request.\n\n178\n00:09:05.838 --> 00:09:07.452\nNotice it's just gonna\nput it on my C drive.\n\n179\n00:09:07.452 --> 00:09:08.844\nWe'll go find it in a little bit.\n\n180\n00:09:08.844 --> 00:09:14.140\nI'll click Next, database and\nlog file location is fine with me.\n\n181\n00:09:14.140 --> 00:09:15.440\nWe'll click Next.\n\n182\n00:09:15.440 --> 00:09:16.857\nWe'll double check all of our options.\n\n183\n00:09:16.857 --> 00:09:18.279\nIt looks like I picked\neverything correctly.\n\n184\n00:09:18.279 --> 00:09:23.400\nAnd we'll click Configure and\nwe'll let that run and there we go.\n\n185\n00:09:23.400 --> 00:09:23.996\nIt finished.\nNow,\n\n186\n00:09:23.996 --> 00:09:26.190\na little different from the other one,\nthough.\n\n187\n00:09:26.190 --> 00:09:28.650\nI didn't get two green\ncheck marks on this one.\n\n188\n00:09:28.650 --> 00:09:31.470\nI've got configuration\nsucceeded with warnings.\n\n189\n00:09:31.470 --> 00:09:35.011\nWhat it's telling me is,\neverything went as planned but\n\n190\n00:09:35.011 --> 00:09:38.849\nI cannot start up certificate\nservices on this subordinate CA\n\n191\n00:09:38.849 --> 00:09:42.124\nuntil you actually take that request and\nsubmit it.\n\n192\n00:09:42.124 --> 00:09:46.362\nAnd get a certificate and then install it,\nand tell me that I'm allowed to issue\n\n193\n00:09:46.362 --> 00:09:49.096\ncertificates in this\npublic key infrastructure.\n\n194\n00:09:49.096 --> 00:09:51.990\nRight, until then it's just gonna sit\nthere and it won't let me start it.\n\n195\n00:09:53.130 --> 00:09:56.640\nSo that's a good, it's not a failure,\nit's a normal thing.\n\n196\n00:09:56.640 --> 00:09:58.206\nSo we'll go ahead and\n\n197\n00:09:58.206 --> 00:10:03.088\nclick Close and then then I can\nclose that original wizard as well.\n\n198\n00:10:03.088 --> 00:10:09.574\nAll right, so now that we have\nrun through that, let's do this.\n\n199\n00:10:09.574 --> 00:10:10.468\nLet's see.\n\n200\n00:10:10.468 --> 00:10:13.590\nWe've configured our certificate services.\n\n201\n00:10:13.590 --> 00:10:19.474\nNow we're going to make sure that\nthis guy trusts the root CA,\n\n202\n00:10:19.474 --> 00:10:24.920\ncuz remember the root CA is\na self-signed certificate.\n\n203\n00:10:24.920 --> 00:10:28.073\nThis server, if I go to Install or\ntry to talk to him,\n\n204\n00:10:28.073 --> 00:10:30.602\nhe's not gonna trust that certificate.\n\n205\n00:10:30.602 --> 00:10:35.226\nNormally I'm gonna deploy the root\nCA certificate using group policy,\n\n206\n00:10:35.226 --> 00:10:37.664\nwhich I will do at the end of this show.\n\n207\n00:10:37.664 --> 00:10:42.002\nBut to speed things up on the installation\nof my certificate authority on this\n\n208\n00:10:42.002 --> 00:10:44.952\nmachine, I'm just gonna\nmanually install it now.\n\n209\n00:10:44.952 --> 00:10:48.917\nAnd then I'll worry about pushing that\nroute CA cert to the rest of the network\n\n210\n00:10:48.917 --> 00:10:50.990\nonce we're done, all right?\n\n211\n00:10:50.990 --> 00:10:55.043\nSo for that,\nI'm gonna open up my file explorer and\n\n212\n00:10:55.043 --> 00:10:58.831\nnavigate in to where I\ncopied those files over.\n\n213\n00:10:58.831 --> 00:11:00.440\nDid I copy them yet?\n\n214\n00:11:00.440 --> 00:11:02.270\nYou know, maybe I haven't copied them yet.\n\n215\n00:11:02.270 --> 00:11:03.352\nThat's right, I haven't copied them.\n\n216\n00:11:03.352 --> 00:11:06.310\nSo I'm gonna go ahead and make a new.\n\n217\n00:11:06.310 --> 00:11:07.980\nWhat's the best way to do this?\n\n218\n00:11:07.980 --> 00:11:15.040\nI'm gonna go into inetpub\\wwwroot, and\nI'm gonna make a new folder, right?\n\n219\n00:11:15.040 --> 00:11:16.767\nAnd I'm gonna call this certdata.\n\n220\n00:11:16.767 --> 00:11:20.030\nDoes that sound familiar?\n\n221\n00:11:20.030 --> 00:11:23.700\nRemember when we created the new CDP and\n\n222\n00:11:23.700 --> 00:11:27.767\nAIA on the root, we said\nhttp://subca/wwroot/certdata, all right?\n\n223\n00:11:27.767 --> 00:11:32.264\nWell now, I'm creating that folder so\n\n224\n00:11:32.264 --> 00:11:36.089\nthat they'll be able to find it.\n\n225\n00:11:36.089 --> 00:11:39.599\nThen I need to go and grab those files so\n\n226\n00:11:39.599 --> 00:11:45.550\nI'm gonna navigate to that share\nwhich was rootca\\certdata.\n\n227\n00:11:45.550 --> 00:11:49.568\nAll right, then I'm gonna copy all these.\n\n228\n00:11:49.568 --> 00:11:54.083\nActually, I really only need the CRT and\nthe CRL.\n\n229\n00:11:54.083 --> 00:12:00.740\nSo let's take a look at that.\n\n230\n00:12:00.740 --> 00:12:03.878\nThere's my CRL and there is my CRT.\n\n231\n00:12:03.878 --> 00:12:07.494\nSo I'm gonna grab those,\nI'm gonna copy them, and\n\n232\n00:12:07.494 --> 00:12:12.614\nthen I'm gonna go back and paste those\nin that new folder that we created.\n\n233\n00:12:12.614 --> 00:12:15.160\nSo inetpup\\wwroot\\certdata.\n\n234\n00:12:15.160 --> 00:12:18.640\nSo now when we issue a certificate and\n\n235\n00:12:18.640 --> 00:12:21.460\nwhoever's trying to validate that\ncertificate, a machine, a service,\n\n236\n00:12:21.460 --> 00:12:24.690\na user account, what have you,\nlooks at the certificate and says,\n\n237\n00:12:24.690 --> 00:12:28.760\nthis is where I can find the certificate\nrevocation list for root CA.\n\n238\n00:12:28.760 --> 00:12:33.000\nIt's gonna be there, right,\ncuz I manually copied it over there.\n\n239\n00:12:33.000 --> 00:12:40.132\nNext thing I'm gonna do, is I'm going\nto install the root CA, where did I go?\n\n240\n00:12:40.132 --> 00:12:41.430\nThere we go.\n\n241\n00:12:41.430 --> 00:12:43.434\nLet's navigate back over to that share.\n\n242\n00:12:46.420 --> 00:12:49.734\nI can't type today.\n\n243\n00:12:49.734 --> 00:12:53.301\nAnd I'm gonna manually installed\nthe root CA certificate into\n\n244\n00:12:53.301 --> 00:12:56.944\nthe subordinate\nCA's Trusted Root Certification Authority.\n\n245\n00:12:56.944 --> 00:13:01.460\nI'm gonna double-click on it and I'm gonna\nsay Open, should launch my import wizard.\n\n246\n00:13:03.260 --> 00:13:07.464\nAs it thinks about it, might be a little\nquicker if I actually copied it over\n\n247\n00:13:07.464 --> 00:13:09.279\nlocally and then installed it.\n\n248\n00:13:09.279 --> 00:13:12.450\nWe'll see what happens here.\n\n249\n00:13:12.450 --> 00:13:13.440\nShould work just fine.\n\n250\n00:13:13.440 --> 00:13:15.030\nThere we go.\n\n251\n00:13:15.030 --> 00:13:17.320\nAll right,\nwe're gonna say Install Certificate.\n\n252\n00:13:19.150 --> 00:13:21.500\nNow when I install the certificate,\nI do wanna be careful.\n\n253\n00:13:21.500 --> 00:13:24.320\nI'm not installing it for\nthe current user who I'm logged on as.\n\n254\n00:13:24.320 --> 00:13:27.460\nI want the machine account\nto trust this certificate.\n\n255\n00:13:27.460 --> 00:13:29.430\nSo I'm gonna choose Local Machine.\n\n256\n00:13:29.430 --> 00:13:30.060\nAnd then Next.\n\n257\n00:13:31.290 --> 00:13:35.730\nAnd nine times out of ten on this screen,\nyou leave it on automatically select.\n\n258\n00:13:35.730 --> 00:13:40.518\nBut this certificate is signed by\nthe same person that issued it and\n\n259\n00:13:40.518 --> 00:13:44.639\nmy machine might dump that\ninto not trusted, all right?\n\n260\n00:13:44.639 --> 00:13:46.735\nSo I'm gonna force it to put\nit into the trusted root.\n\n261\n00:13:46.735 --> 00:13:51.770\nI'm gonna say place all certificates\nin the following store.\n\n262\n00:13:51.770 --> 00:13:53.380\nI'm gonna click Browse.\n\n263\n00:13:53.380 --> 00:13:56.170\nI'm gonna find my\nTrusted Root Certification Authorities.\n\n264\n00:13:56.170 --> 00:14:00.790\nClick OK, and then Next,\nand then Finish, all right?\n\n265\n00:14:00.790 --> 00:14:02.400\n[COUGH] Excuse me.\n\n266\n00:14:02.400 --> 00:14:08.400\nSo, now I've got that\ncertificate installed.\n\n267\n00:14:08.400 --> 00:14:10.962\nI'll go ahead and close that,\nand if we take a look, right?\n\n268\n00:14:10.962 --> 00:14:15.992\nIf we were to launch an MMC right now, And\n\n269\n00:14:15.992 --> 00:14:23.430\nwe added our certificate snap-in,\nFor the local machine.\n\n270\n00:14:28.132 --> 00:14:31.230\nAnd we take a look at the Trusted\nRoot Certification Authorities.\n\n271\n00:14:33.094 --> 00:14:35.395\nThere is root CAs issued by root CA,\n\n272\n00:14:35.395 --> 00:14:39.410\nthat self-signed certificate\nsitting right there.\n\n273\n00:14:39.410 --> 00:14:42.430\nAnd I like I said, normally you'd\nuse group policy to push that out.\n\n274\n00:14:42.430 --> 00:14:46.330\nBut it kinda speeds up the process if I do\nit manually on the Certification Authority\n\n275\n00:14:46.330 --> 00:14:49.000\nthat I'm setting up.\n\n276\n00:14:49.000 --> 00:14:50.920\nAll right, Wes,\nlet's see what's next here.\n\n277\n00:14:50.920 --> 00:14:53.690\nWe got the root CA installed,\nI guess the next thing, right,\n\n278\n00:14:53.690 --> 00:14:58.280\nif I open up my Cert Serve console now,\nin fact, let's open it up.\n\n279\n00:14:58.280 --> 00:15:00.467\nWhy talk about it, let's do it.\n\n280\n00:15:00.467 --> 00:15:02.319\n[LAUGH] Let's go Tools and\nCertification Authority.\n\n281\n00:15:03.320 --> 00:15:04.840\nAnd you'll see that I've got a.\n\n282\n00:15:04.840 --> 00:15:06.260\nIt's not running.\n\n283\n00:15:06.260 --> 00:15:07.450\nNow if I zoom in there.\n\n284\n00:15:07.450 --> 00:15:08.930\nIt's got a black x on it.\n\n285\n00:15:08.930 --> 00:15:10.690\nAnd if I try to start it up,\n\n286\n00:15:10.690 --> 00:15:13.070\nit's gonna fail because it\ndoesn't have a certificate yet.\n\n287\n00:15:13.070 --> 00:15:15.610\nIt's not ready to do that.\n\n288\n00:15:15.610 --> 00:15:19.490\nSo I'm gonna go over to my local drive.\n\n289\n00:15:19.490 --> 00:15:22.900\nRemember, during the wizard,\nit created that request file.\n\n290\n00:15:22.900 --> 00:15:27.610\nHey, I want a certificate that says I can\nbe a subordinate CA in our enterprise.\n\n291\n00:15:27.610 --> 00:15:29.060\nWill you issue me one?\n\n292\n00:15:29.060 --> 00:15:32.530\nI just need to get that over to the root\nso that he can decide yes or no and\n\n293\n00:15:32.530 --> 00:15:34.190\nthen issue the certificate.\n\n294\n00:15:34.190 --> 00:15:36.715\nSo normally, as we said a couple of times,\n\n295\n00:15:36.715 --> 00:15:42.030\nthat'd be done, you know sneakernet,\nremoval of media, taking manually over.\n\n296\n00:15:42.030 --> 00:15:49.529\nI'm just going to copy that request,\nnavigate back to that share and\n\n297\n00:15:49.529 --> 00:15:54.588\npaste that request back in there,\nall right?\n\n298\n00:15:54.588 --> 00:15:56.130\nNow I'm gonna go back to the root CA.\n\n299\n00:15:58.044 --> 00:16:03.666\nAnd I can see the request right\nthere in my Cert Serve console.\n\n300\n00:16:03.666 --> 00:16:09.266\nI'm gonna right-click on root CA\n&gt; All Tasks &gt; Submit New Request.\n\n301\n00:16:11.233 --> 00:16:14.042\nThen I'm gonna browse and\nbecause I was in that folder recently,\n\n302\n00:16:14.042 --> 00:16:15.020\nit jumped right to it.\n\n303\n00:16:15.020 --> 00:16:18.574\nBut browse to wherever, if it was on\na thumb drive and you copied it over,\n\n304\n00:16:18.574 --> 00:16:21.795\nwhatever, find your request,\nI'm gonna open that request up.\n\n305\n00:16:23.340 --> 00:16:25.790\nAnd hopefully,\nwe don't get any kind of warnings.\n\n306\n00:16:25.790 --> 00:16:27.090\nLet's see if it shows up in pending.\n\n307\n00:16:27.090 --> 00:16:30.080\nSome times this will take a minute for\nit to read that request,\n\n308\n00:16:30.080 --> 00:16:32.049\nvalidate all the information in there.\n\n309\n00:16:32.049 --> 00:16:36.980\nAnd then eventually,\nit should show up in my pending requests.\n\n310\n00:16:36.980 --> 00:16:41.420\nI refreshed my console, and\nthere it is I can see request ID two,\n\n311\n00:16:41.420 --> 00:16:46.867\nbecause we've issued the root CA\ncertificate that was actually request one.\n\n312\n00:16:46.867 --> 00:16:49.880\nAnd as an admin you would\nwanna take a look at this.\n\n313\n00:16:49.880 --> 00:16:51.305\nWho's the requester?\n\n314\n00:16:51.305 --> 00:16:56.270\nRoot CA administrator,\nthat's cuz I right clicked on the request.\n\n315\n00:16:56.270 --> 00:16:57.360\nWho's requesting it?\n\n316\n00:16:57.360 --> 00:16:58.610\nSub CA.\n\n317\n00:16:58.610 --> 00:17:00.880\nWhat do they want a certificate for?\n\n318\n00:17:00.880 --> 00:17:02.830\nThey wanted to be a subordinate CA.\n\n319\n00:17:02.830 --> 00:17:06.663\nOkay, If I think this is valid and\nI was expecting this,\n\n320\n00:17:06.663 --> 00:17:09.440\nI'm gonna go ahead and issue this.\n\n321\n00:17:09.440 --> 00:17:12.930\nIf I wasn't setting up\na subordinate CA and this shows up,\n\n322\n00:17:12.930 --> 00:17:16.630\nI think somebody's trying to do some\nmalicious activity on my network.\n\n323\n00:17:16.630 --> 00:17:18.472\nBut I don't issue it, right?\n\n324\n00:17:18.472 --> 00:17:19.710\nIt doesn't issue it automatically.\n\n325\n00:17:19.710 --> 00:17:21.930\nSo I'm gonna right-click All Tasks.\n\n326\n00:17:21.930 --> 00:17:26.090\nAnd issue, so\nnow it disappears from pending.\n\n327\n00:17:26.090 --> 00:17:28.880\nIt should show up under\nissued certificates.\n\n328\n00:17:28.880 --> 00:17:30.850\nAnd there it is, all right.\n\n329\n00:17:30.850 --> 00:17:32.810\nThat's the one we just issued.\n\n330\n00:17:32.810 --> 00:17:35.930\nSo now, you would export this.\n\n331\n00:17:35.930 --> 00:17:40.655\nI'm gonna do, open, to pull up the,\nactually I should have done properties,\n\n332\n00:17:40.655 --> 00:17:43.060\nlet's see what comes up here.\n\n333\n00:17:43.060 --> 00:17:45.205\nI always get these backwards.\n\n334\n00:17:45.205 --> 00:17:48.300\nLet's see, It should open up my\nproperties of that certificate.\n\n335\n00:17:48.300 --> 00:17:51.321\nSometimes, it opens up a different window.\n\n336\n00:17:51.321 --> 00:17:53.070\nNope, we are good to go.\n\n337\n00:17:53.070 --> 00:17:54.305\nAnd I'm going to go to the details tab.\n\n338\n00:17:54.305 --> 00:17:56.330\nThen, I'm going to copy to file.\n\n339\n00:17:56.330 --> 00:17:59.820\nSo I've issued the subordinate\nCA certificate.\n\n340\n00:17:59.820 --> 00:18:04.950\nNow I'm going to copy it to that thumb\ndrive, mail it back to the branch office,\n\n341\n00:18:04.950 --> 00:18:08.710\nor sneakernet it back over to\nthat subordinate CA all right?\n\n342\n00:18:08.710 --> 00:18:11.574\nOr give it to Wes,\nlet him take it over there.\n\n343\n00:18:11.574 --> 00:18:13.320\n[LAUGH] All right, we'll click Next.\n\n344\n00:18:13.320 --> 00:18:20.770\nAgain, for this one, you wanna be careful\nwith how you wanna export this right?\n\n345\n00:18:20.770 --> 00:18:25.410\nBecause I need that PKCS\nnumber seven certificate.\n\n346\n00:18:25.410 --> 00:18:28.270\nI need all the keys that\nare associated with that certificate.\n\n347\n00:18:28.270 --> 00:18:30.050\nThe public and the private key.\n\n348\n00:18:30.050 --> 00:18:31.787\nSo I'm going to choose that one.\n\n349\n00:18:31.787 --> 00:18:35.020\nI will include all certificates\nin the path, if possible.\n\n350\n00:18:35.020 --> 00:18:37.540\nEven though it already has\nthe root CA certificate.\n\n351\n00:18:37.540 --> 00:18:39.704\nI'll click next, I'll browse.\n\n352\n00:18:39.704 --> 00:18:41.659\nAnd I'm going to dump it into that share.\n\n353\n00:18:42.680 --> 00:18:44.590\nBut normally this would be\nthe thumb drive, right?\n\n354\n00:18:44.590 --> 00:18:48.020\nI know I keep saying that but\nmake sure we understand where we're going.\n\n355\n00:18:48.020 --> 00:18:54.780\nI'm gonna call this Sub CA Cert just so\nit's different from the other one.\n\n356\n00:18:54.780 --> 00:18:59.691\nAnd then I'll click Save and Next and\n\n357\n00:18:59.691 --> 00:19:02.550\nFinish and OK and OK.\n\n358\n00:19:03.732 --> 00:19:07.320\nAll right, now we are talking,\nback over to mister subordinate,\n\n359\n00:19:07.320 --> 00:19:08.700\nwe will finish setting him up.\n\n360\n00:19:09.952 --> 00:19:12.839\nAll right, so he is sitting\nhere waiting for that request,\n\n361\n00:19:12.839 --> 00:19:14.414\nthat certificate to come back.\n\n362\n00:19:14.414 --> 00:19:18.304\nSo I am going to right click on my sub ca,\nall tasks and\n\n363\n00:19:18.304 --> 00:19:22.000\nthen down towards the bottom of that list.\n\n364\n00:19:22.000 --> 00:19:26.300\nInstall CA certificate,\nnow that it's been issued.\n\n365\n00:19:26.300 --> 00:19:27.530\nSo install CA certificate.\n\n366\n00:19:27.530 --> 00:19:33.010\nI will browse and find it,\nshould be, where do we put it?\n\n367\n00:19:33.010 --> 00:19:34.860\nWe put it in that share.\n\n368\n00:19:34.860 --> 00:19:39.900\nSo, that was a root CA slash cert data and\n\n369\n00:19:39.900 --> 00:19:46.586\nagain I could copy this over locally and\nthen do this.\n\n370\n00:19:46.586 --> 00:19:49.404\nIn the real world it would be because\nyou'd have it on a thumb drive,\n\n371\n00:19:49.404 --> 00:19:50.154\nwe'll click OK.\n\n372\n00:19:50.154 --> 00:19:53.154\nAnd then we wait and we keep our\nfingers crossed at this point and\n\n373\n00:19:53.154 --> 00:19:56.370\nwe hope we did everything right and\neverything is trusted.\n\n374\n00:19:56.370 --> 00:20:00.204\nAnd it will eventually start up\nour certificate services on our\n\n375\n00:20:00.204 --> 00:20:01.298\nsubordinate CA.\n\n376\n00:20:01.298 --> 00:20:07.734\nAnd then we officially have our\ntwo-tier PKI infrastructure set up.\n\n377\n00:20:07.734 --> 00:20:09.559\nNow be patient with it, give it a minute.\n\n378\n00:20:09.559 --> 00:20:11.760\nYou saw it whir and\ngrind there and flash something.\n\n379\n00:20:12.830 --> 00:20:14.790\nIt is in the process of installing that.\n\n380\n00:20:18.143 --> 00:20:21.780\nAnd I say be patient,\nthen I click on it just to make it mad.\n\n381\n00:20:21.780 --> 00:20:25.500\nAnd now I get the little hourglass.\n\n382\n00:20:25.500 --> 00:20:27.280\nSo I'll wait just a minute longer here.\n\n383\n00:20:28.870 --> 00:20:30.340\nAnd there we go, I like it.\n\n384\n00:20:30.340 --> 00:20:32.674\nI see that list populating over there.\n\n385\n00:20:32.674 --> 00:20:34.300\nWhen we look up to that side.\n\n386\n00:20:34.300 --> 00:20:36.880\nI can't stay zoomed in cuz\nthat freezes the machine.\n\n387\n00:20:36.880 --> 00:20:39.660\nBut you see it like things\nare starting to pop up in the console.\n\n388\n00:20:39.660 --> 00:20:45.818\nThat's always a good sign.\n\n389\n00:20:45.818 --> 00:20:48.490\nAnd is it not gonna start it up.\n\n390\n00:20:48.490 --> 00:20:51.950\nIf it doesn't start it up automatically,\nit really should.\n\n391\n00:20:51.950 --> 00:20:53.226\nBut let's start it up anyway.\n\n392\n00:20:53.226 --> 00:20:54.970\nWe'll go All Tasks.\n\n393\n00:20:54.970 --> 00:20:55.722\nAnd Start Service.\n\n394\n00:20:58.577 --> 00:21:01.944\nAnd, again,\nthis is where you do the drum roll.\n\n395\n00:21:01.944 --> 00:21:03.484\nAnd we hope everything works correctly.\n\n396\n00:21:06.315 --> 00:21:09.369\nSo we wait, it's trying,\nit's trying, it's trying.\n\n397\n00:21:11.280 --> 00:21:12.160\nAnd I like it.\n\n398\n00:21:12.160 --> 00:21:15.444\nWhen I see a green check mark over there,\nI'm really really happy, and\n\n399\n00:21:15.444 --> 00:21:16.779\nI start jumping up and down.\n\n400\n00:21:16.779 --> 00:21:20.374\n[LAUGH] Since I don't have to start\nall over and do it all over again.\n\n401\n00:21:20.374 --> 00:21:21.620\n&gt;&gt; That's always a great thing, Mike.\n\n402\n00:21:21.620 --> 00:21:24.540\nNow can I, we should never assume, right?\n\n403\n00:21:24.540 --> 00:21:26.060\nBut can I assume now,\n\n404\n00:21:26.060 --> 00:21:29.900\nthat we have another rung in the ladder\nwhen it comes to our certificate chain?\n\n405\n00:21:29.900 --> 00:21:33.430\nWhen we talk about certificate chain\nvalidation, and that we should have again,\n\n406\n00:21:33.430 --> 00:21:34.860\nthe subordinate in that path now?\n\n407\n00:21:34.860 --> 00:21:35.866\n&gt;&gt; Yeah, let's check it out and see.\n\n408\n00:21:35.866 --> 00:21:36.710\nThat's a great question.\n\n409\n00:21:36.710 --> 00:21:38.430\nSo, I'm gonna go to\nthe Properties of my sub CA,\n\n410\n00:21:38.430 --> 00:21:42.990\nand let's take a look at that certificate\nthat it was issued by the root CA.\n\n411\n00:21:44.190 --> 00:21:47.065\n&gt;&gt; And here's another one of those\ninstances, any time you're looking for\n\n412\n00:21:47.065 --> 00:21:49.705\nany kind of certificate the first\ntime it's gonna do a little bit of\n\n413\n00:21:49.705 --> 00:21:50.501\nprocessing behind you.\n\n414\n00:21:50.501 --> 00:21:51.566\n&gt;&gt; It is a little slow.\n\n415\n00:21:51.566 --> 00:21:53.900\nYeah [LAUGH] It's like wait,\nis it doing anything?\n\n416\n00:21:53.900 --> 00:21:55.259\nDo I click it again?\n\n417\n00:21:55.259 --> 00:21:56.595\nAll right so there's my certificate.\n\n418\n00:21:56.595 --> 00:21:58.380\nI'll click view certificate.\n\n419\n00:21:59.541 --> 00:22:01.295\nAnd it thinks about it, thinks about it.\n\n420\n00:22:02.555 --> 00:22:05.100\nAnd then it finally pulls it up and\nwe'll zoom in.\n\n421\n00:22:05.100 --> 00:22:10.686\nAnd there we see Issued to: subCA,\nIssued by: rootCA.\n\n422\n00:22:10.686 --> 00:22:15.010\nSo this is not a self signed certificate,\nthis was signed by Mr rootCA.\n\n423\n00:22:15.010 --> 00:22:17.410\nAnd because I trust rootCA,\n\n424\n00:22:17.410 --> 00:22:20.100\nremember we installed it into our\nroot certificate authorities or\n\n425\n00:22:20.100 --> 00:22:25.920\nour root certificate authority store,\nit knows to trust that rootCA certificate.\n\n426\n00:22:25.920 --> 00:22:28.370\nIf we go over to the certification path,\n\n427\n00:22:28.370 --> 00:22:30.250\nnow we've got a little\nbit more to look at.\n\n428\n00:22:30.250 --> 00:22:33.839\nThere you can see what Wes was asking\nabout, that is that chain of trust.\n\n429\n00:22:33.839 --> 00:22:39.150\nSub-CA can be chained back up to root CA.\n\n430\n00:22:39.150 --> 00:22:41.850\n&gt;&gt; Mike, you also mentioned,\nif we can go back to that general tab,\n\n431\n00:22:41.850 --> 00:22:44.870\nyou had mentioned how,\ndepending on how you have your PKI set up,\n\n432\n00:22:44.870 --> 00:22:47.880\nyou might have geographical\ndistribution like in area.\n\n433\n00:22:47.880 --> 00:22:51.319\nMaybe Boston versus you know LA, or\nyou might have different devices,\n\n434\n00:22:51.319 --> 00:22:53.800\nmight be computers and\nusers and network devices.\n\n435\n00:22:53.800 --> 00:22:56.307\nCould be an application,\none of the things I see there\n\n436\n00:22:56.307 --> 00:22:58.884\nis the purposes are really\nclose to what the root CA is.\n\n437\n00:22:58.884 --> 00:23:01.923\nSo you could kind of leapfrog and\nreally use this to do anything,\n\n438\n00:23:01.923 --> 00:23:05.413\nwhether it's code signing,\nwhether it's endorsing a network device,\n\n439\n00:23:05.413 --> 00:23:07.855\nwhether it's issuing me a certificate,\nas well.\n\n440\n00:23:07.855 --> 00:23:10.053\nSo you can use it for the all purposes.\n\n441\n00:23:10.053 --> 00:23:13.125\n&gt;&gt; Yeah, absolutely,\nif we were a larger shop and let's say,\n\n442\n00:23:13.125 --> 00:23:16.000\nearlier I think we said,\nor like you just said.\n\n443\n00:23:16.000 --> 00:23:16.970\nWe've got our root CA and\n\n444\n00:23:16.970 --> 00:23:21.510\nthen each one of our branches has\na subordinate CA and we stop right here.\n\n445\n00:23:21.510 --> 00:23:22.524\nBut what if at the branch?\n\n446\n00:23:22.524 --> 00:23:26.046\nMaybe the branches are really large and\nthey want separate CA's for\n\n447\n00:23:26.046 --> 00:23:28.060\neach one of their departments.\n\n448\n00:23:28.060 --> 00:23:32.730\nI could create a subordinate CA\nat each branch like we just did.\n\n449\n00:23:32.730 --> 00:23:35.695\nThen I go to the subordinate\nCA at that branch and\n\n450\n00:23:35.695 --> 00:23:38.670\nI set up\nSubordinate Subordinate CA's right?\n\n451\n00:23:38.670 --> 00:23:43.024\nThird tiers that would get their\ncertificates from this Subordinate CA\n\n452\n00:23:43.024 --> 00:23:45.810\nwhich would chain back up to the root CA.\n\n453\n00:23:45.810 --> 00:23:50.855\nSo absolutely, we can install certificate\nservices on another server set it up as\n\n454\n00:23:50.855 --> 00:23:55.912\nan enterprise, subordinate CA and point\nit to this CA, as it's parent, right?\n\n455\n00:23:55.912 --> 00:23:59.754\nIt wouldn't be the rude, but it would be\nit's parent, in a three tier hierarchy and\n\n456\n00:23:59.754 --> 00:24:01.390\nyou can go four tiers or five tiers.\n\n457\n00:24:01.390 --> 00:24:04.889\nI mean it gets a little ridiculous at\nsome point But there might be a need for\n\n458\n00:24:04.889 --> 00:24:06.991\nsomething like that in your organization.\n\n459\n00:24:06.991 --> 00:24:09.661\n&gt;&gt; All right, now I'm not gonna let you\nget out of this one before we close\n\n460\n00:24:09.661 --> 00:24:10.210\nthis one off.\n\n461\n00:24:10.210 --> 00:24:13.610\nOne of the things that you said is that\nthere might be a necessity to deploy\n\n462\n00:24:13.610 --> 00:24:14.870\na certificate via group policy.\n\n463\n00:24:14.870 --> 00:24:16.725\nIs that something that we can see here,\nand we're still setting up?\n\n464\n00:24:16.725 --> 00:24:17.375\n&gt;&gt; Yes.\n\n465\n00:24:17.375 --> 00:24:18.705\nYeah, absolutely, let's do that.\n\n466\n00:24:18.705 --> 00:24:22.905\nBecause really to finish this process,\nthat is something you're gonna want to do.\n\n467\n00:24:22.905 --> 00:24:26.545\nYou need all of your\ndevices on your network.\n\n468\n00:24:26.545 --> 00:24:29.235\nEverybody needs to trust the root CA.\n\n469\n00:24:29.235 --> 00:24:32.265\nSo, I'm gonna use group\npolicy to deploy that out.\n\n470\n00:24:32.265 --> 00:24:36.175\nI mean, I could take that thumb drive that\nwe used to set up the subordinate CA and\n\n471\n00:24:36.175 --> 00:24:41.700\ngo to every single machine on my network\nand manually add it to the trusted roots.\n\n472\n00:24:41.700 --> 00:24:44.040\nYeah, no, that's not gonna happen.\n\n473\n00:24:44.040 --> 00:24:47.870\nSo let's see how we're going to do that.\n\n474\n00:24:47.870 --> 00:24:51.400\nWhat I'm gonna do is flip over\nto our domain controller.\n\n475\n00:24:53.370 --> 00:24:56.519\nOops, and he has timed out so\nlet's wake him back up.\n\n476\n00:25:00.022 --> 00:25:01.620\nAnd I'm gonna open up my group.\n\n477\n00:25:01.620 --> 00:25:05.070\nActually, I'm gonna copy that thing\nlocally real quick just to make sure.\n\n478\n00:25:05.070 --> 00:25:07.214\nI don't wanna get in the middle\nof creating a policy and\n\n479\n00:25:07.214 --> 00:25:08.480\nthen realize I can't connect.\n\n480\n00:25:08.480 --> 00:25:15.710\nSo it should be \\\\rootca\\ data?\n\n481\n00:25:17.420 --> 00:25:21.130\nAnd I'm gonna grab the serv file.\n\n482\n00:25:21.130 --> 00:25:23.620\nSo let me change my view just to\nmake sure I get the right one.\n\n483\n00:25:25.720 --> 00:25:28.490\nAnd I want this rootCA.cer.\n\n484\n00:25:28.490 --> 00:25:32.610\nI'm gonna copy that, and\nI'm just gonna put it in my downloads over\n\n485\n00:25:32.610 --> 00:25:34.629\nhere on my domain controller so\nI know where it is.\n\n486\n00:25:35.660 --> 00:25:37.500\nAnd I'll close file explorer.\n\n487\n00:25:37.500 --> 00:25:39.470\nAnd I'm gonna open up active directory or\n\n488\n00:25:39.470 --> 00:25:41.370\nactually I'm gonna open up\ngroup policy management.\n\n489\n00:25:45.742 --> 00:25:49.439\nAll right, and\nI'm gonna work my way down into my domain,\n\n490\n00:25:49.439 --> 00:25:52.682\nlet me make this a little bit wider so\nwe can see, and\n\n491\n00:25:52.682 --> 00:25:56.760\nI'm just gonna create a new GPO and\nlink it to the domain.\n\n492\n00:25:56.760 --> 00:26:00.550\nAnd whatever was appropriate for you,\nif this PKI was completely setup for\n\n493\n00:26:00.550 --> 00:26:04.080\nyour dev environment, maybe you don't\nlink this to the domain itself,\n\n494\n00:26:04.080 --> 00:26:07.820\nmaybe it's to the dev OU where all\nthe dev users and computers reside.\n\n495\n00:26:07.820 --> 00:26:10.510\nSo this is something again\nthat you have to plan out.\n\n496\n00:26:10.510 --> 00:26:15.600\nI'm gonna call this my PKI policy\nbecause I might come back and\n\n497\n00:26:15.600 --> 00:26:17.650\nhave other settings I want\nto configure for PKI.\n\n498\n00:26:17.650 --> 00:26:19.960\nDid I take PKI or RKI?\n\n499\n00:26:19.960 --> 00:26:21.940\nLet's make sure that's a PKI.\n\n500\n00:26:21.940 --> 00:26:23.000\nThere we go.\n\n501\n00:26:23.000 --> 00:26:23.590\nWe'll click okay.\n\n502\n00:26:23.590 --> 00:26:27.958\nAnd then, I'm going to go in and\nedit this policy,\n\n503\n00:26:31.350 --> 00:26:34.070\nAnd I'll zoom in once I\nnavigate my way down there.\n\n504\n00:26:34.070 --> 00:26:39.320\nIt's Computer Configuration,\nPolicies, Windows Settings.\n\n505\n00:26:41.964 --> 00:26:44.730\nGosh, it's been a long time since I've\nbeen here, make sure I get this right.\n\n506\n00:26:44.730 --> 00:26:48.850\nSecurity settings and\nthen Public Key Policies\n\n507\n00:26:50.700 --> 00:26:54.830\nand under there I should have trusted\nroot Certification Authority.\n\n508\n00:26:54.830 --> 00:27:00.640\nSo basically I'm going to do the same\nthing we did on subCA to install in\n\n509\n00:27:00.640 --> 00:27:03.540\nthe Trusted Root Certification Authorities\nbut I'm doing it inside a policy.\n\n510\n00:27:03.540 --> 00:27:05.360\nYou'll see that it looks exactly the same.\n\n511\n00:27:05.360 --> 00:27:06.920\nI'm going to right click.\n\n512\n00:27:06.920 --> 00:27:08.300\nImport.\n\n513\n00:27:08.300 --> 00:27:10.500\nGet that same import wizard.\n\n514\n00:27:10.500 --> 00:27:12.380\nLocal machine has all ready selected and\n\n515\n00:27:12.380 --> 00:27:17.350\ngrayed out because I'm under the computer\nconfiguration portion of a GPO.\n\n516\n00:27:17.350 --> 00:27:21.320\nSo if I was under the user portion,\ncurrent user would be selected.\n\n517\n00:27:21.320 --> 00:27:23.240\nClick next, browse and\n\n518\n00:27:23.240 --> 00:27:25.889\nfind that certificate that\nI just put in my downloads.\n\n519\n00:27:28.370 --> 00:27:31.220\nI'll click next and\nI'm gonna make sure it says\n\n520\n00:27:31.220 --> 00:27:35.130\nTrusted Root Certification Authorities,\nwhich it should because I right clicked\n\n521\n00:27:35.130 --> 00:27:39.554\non Trusted Root right,\nnot on untrusted or anything like that.\n\n522\n00:27:39.554 --> 00:27:43.890\nSo I click next and then finish,\nand then same thing I get a wait.\n\n523\n00:27:43.890 --> 00:27:47.620\nIt seems like it's done,\nbut just wait for it and\n\n524\n00:27:47.620 --> 00:27:52.290\na little message should pop up and\nsay that import was successful.\n\n525\n00:27:52.290 --> 00:27:54.440\n&gt;&gt; Now, Mike, if I understand this right,\nlet me see if I can,\n\n526\n00:27:54.440 --> 00:27:55.370\nwhile we're waiting on this.\n\n527\n00:27:55.370 --> 00:27:59.130\nSo, this means that either\ngroup policy refresh or\n\n528\n00:27:59.130 --> 00:28:03.590\nanytime a computer joins the domain that\nit's going to apply this group policy like\n\n529\n00:28:03.590 --> 00:28:07.050\nyou talk about in other episodes,\nand it's going to import that\n\n530\n00:28:07.050 --> 00:28:09.950\nroot certificate now into\nthe trusted store on that machine.\n\n531\n00:28:09.950 --> 00:28:11.050\n&gt;&gt; Yeah, let's test it.\n\n532\n00:28:11.050 --> 00:28:13.780\nWhat, we'll just see if we can\nget in there real quick before\n\n533\n00:28:13.780 --> 00:28:14.810\nIt refreshes anything.\n\n534\n00:28:14.810 --> 00:28:17.520\nI'm gonna open up an MMC\non my domain controller.\n\n535\n00:28:17.520 --> 00:28:21.010\nI'm gonna add my certificate snap-in.\n\n536\n00:28:21.010 --> 00:28:21.640\n&gt;&gt; It's a race.\n\n537\n00:28:21.640 --> 00:28:22.663\n&gt;&gt; I know, I'm going as fast as I can.\n\n538\n00:28:22.663 --> 00:28:25.310\n&gt;&gt; [LAUGH]\n&gt;&gt; Computer account, next, finish, okay.\n\n539\n00:28:25.310 --> 00:28:29.790\nCuz I don't know when the last refresh\ncycle was, so it could be any moment now.\n\n540\n00:28:29.790 --> 00:28:32.987\nI'm gonna go to Trusted Roots,\nCertificates, and\n\n541\n00:28:32.987 --> 00:28:34.667\nnotice I do not see Root CA.\n\n542\n00:28:34.667 --> 00:28:35.910\nAll right.\n\n543\n00:28:35.910 --> 00:28:41.700\nMy import was successful, so I'll click\nokay, and then my certificate shows up.\n\n544\n00:28:41.700 --> 00:28:43.500\nI'll close my editor.\n\n545\n00:28:43.500 --> 00:28:47.680\nAnd I will close, that's actually my\ncertificate console, we'll save that, and\n\n546\n00:28:47.680 --> 00:28:48.540\nI'll close group policy.\n\n547\n00:28:48.540 --> 00:28:49.160\nIt's linked.\n\n548\n00:28:49.160 --> 00:28:49.770\nWe're good to go.\n\n549\n00:28:49.770 --> 00:28:53.670\nAnd then I can wait the 90 minutes or\n\n550\n00:28:53.670 --> 00:28:56.840\nI could just open up a little command\nprompt and do a little GP update.\n\n551\n00:28:56.840 --> 00:29:00.780\nSwitch force to refresh group policy,\nif you remember that episode.\n\n552\n00:29:03.230 --> 00:29:06.830\nAnd heck, we might even get to\nsee it pop up as it refreshes.\n\n553\n00:29:08.310 --> 00:29:08.860\nNope.\n\n554\n00:29:08.860 --> 00:29:11.560\nI bet you if we refresh it manually\ncuz I like to see the computer policy\n\n555\n00:29:11.560 --> 00:29:12.730\nalready applied.\n\n556\n00:29:12.730 --> 00:29:14.040\nWe'll click refresh.\n\n557\n00:29:14.040 --> 00:29:15.980\n&gt;&gt; Sure enough.\n&gt;&gt; And there's Mr. Root.\n\n558\n00:29:15.980 --> 00:29:19.920\nSo within 90 minutes, at the longest, if\nyou haven't changed your default settings,\n\n559\n00:29:19.920 --> 00:29:23.750\nall the computers on your network\nwill now know to trust that Root CA.\n\n560\n00:29:23.750 --> 00:29:29.170\nAnd at this point, we can take the Root CA\noffline if you hadn't already, right?\n\n561\n00:29:29.170 --> 00:29:31.540\nIf you had done this with\na Root CA offline and\n\n562\n00:29:31.540 --> 00:29:34.100\ndone everything by thumb drive,\nit's already offline.\n\n563\n00:29:34.100 --> 00:29:37.990\nIf you had done this like I did where\nyou're setting everything up in one day,\n\n564\n00:29:37.990 --> 00:29:40.800\nand so you're just gonna wait and\nmake it easier to set up and\n\n565\n00:29:40.800 --> 00:29:42.570\nthen take him offline at the end.\n\n566\n00:29:42.570 --> 00:29:44.670\nThis would be the point when\nI now take him offline.\n\n567\n00:29:44.670 --> 00:29:49.320\nAnd I'll tell you, best practices nowadays\nwith virtualization the way it is,\n\n568\n00:29:49.320 --> 00:29:51.250\nis the Root CA is most\nlikely gonna be a VM.\n\n569\n00:29:51.250 --> 00:29:55.000\nIt's gonna be a virtual machine\nrunning on your Hyper-V server.\n\n570\n00:29:55.000 --> 00:29:57.620\nSo we'll just shut the VM down, right?\n\n571\n00:29:57.620 --> 00:30:00.000\nAt the minimum,\ndisable its network adapter.\n\n572\n00:30:00.000 --> 00:30:02.970\nBut there's really no need\nin even keeping it running\n\n573\n00:30:02.970 --> 00:30:04.660\nbecause it's not a domain member.\n\n574\n00:30:04.660 --> 00:30:09.162\nIt's not providing anything else to\nthe network other than being the Root CA.\n\n575\n00:30:09.162 --> 00:30:13.350\nSo you just shut this machine down at\nthis point, but if you are gonna do it,\n\n576\n00:30:13.350 --> 00:30:18.075\nif it's physical machine, physical\nsecurity on that Root CA whether you shut\n\n577\n00:30:18.075 --> 00:30:20.885\nhim down or not cuz I don't want somebody\nto be able to come in behind me.\n\n578\n00:30:20.885 --> 00:30:22.675\nThe server closet's not kept locked.\n\n579\n00:30:22.675 --> 00:30:25.785\nThey can just power it up and\nstart trying to get access to it.\n\n580\n00:30:25.785 --> 00:30:28.385\nIf it's a VM, I shut the VM down.\n\n581\n00:30:28.385 --> 00:30:31.165\nDo I trust my Hyper-V administrators?\n\n582\n00:30:31.165 --> 00:30:34.995\nAnybody that has physical access or\nremote access to that machine\n\n583\n00:30:34.995 --> 00:30:38.740\ncould now potentially access\nthat Root CA and fire it up.\n\n584\n00:30:38.740 --> 00:30:41.010\nSo you gotta look at your permissions, and\n\n585\n00:30:41.010 --> 00:30:45.010\nmanage your access to that Hyper-V\nserver to protect that Root CA.\n\n586\n00:30:45.010 --> 00:30:48.540\nBut that's what you see, more often than\nnot nowadays is that it's just a VM.\n\n587\n00:30:48.540 --> 00:30:51.560\nWe shut it down,\nif we bring it back online every so\n\n588\n00:30:51.560 --> 00:30:53.840\noften to keep it up to date.\n\n589\n00:30:53.840 --> 00:30:56.540\nAnd then of course when its\ncertificate's ready to expire,\n\n590\n00:30:56.540 --> 00:30:59.530\nor if we're setting up\na new subordinate CA.\n\n591\n00:30:59.530 --> 00:31:03.900\nNot another tier, but a same tier, right?\n\n592\n00:31:03.900 --> 00:31:07.840\nWe just set up the sub CA for\nthe office here in Gainesville.\n\n593\n00:31:07.840 --> 00:31:10.930\nWell, now we opened up\na branch office in Tokyo.\n\n594\n00:31:10.930 --> 00:31:12.590\nMan, I hope I get to go there.\n\n595\n00:31:12.590 --> 00:31:15.760\nAnd I'm gonna set up a new\nsecond tier subordinate CA.\n\n596\n00:31:15.760 --> 00:31:18.150\nWell, I'm gonna have to\nbring the root back online,\n\n597\n00:31:18.150 --> 00:31:20.040\nthey're gonna send me over that request.\n\n598\n00:31:20.040 --> 00:31:22.560\nI'll bring it online\nissue the certificate,\n\n599\n00:31:22.560 --> 00:31:27.520\ncopy it to thumb drive, shut it back down,\nmail them the certificate, right?\n\n600\n00:31:27.520 --> 00:31:29.520\nSo yeah, at this point, we are good to go.\n\n601\n00:31:29.520 --> 00:31:33.810\nThe next thing we do, which is gonna be\nanother episode, is now start automating\n\n602\n00:31:33.810 --> 00:31:37.970\nissuing of certificates, and actually\njust manage the certificates themselves.\n\n603\n00:31:37.970 --> 00:31:40.660\n&gt;&gt; Mike, that's a lot of great\ninformation when it comes to all the way,\n\n604\n00:31:40.660 --> 00:31:45.250\nfrom the theory to bringing the CA online,\nthe Root CA, seeing the sub.\n\n605\n00:31:45.250 --> 00:31:49.150\nAnd actually the practical application of\nthis as well because it's one thing to\n\n606\n00:31:49.150 --> 00:31:52.190\njust talk about it but it's really\nexciting to actually see it in action.\n\n607\n00:31:52.190 --> 00:31:55.440\nNow, like you said, we are coming\nto the end of this episode and\n\n608\n00:31:55.440 --> 00:31:58.660\nreally kind of like this miniseries\nwhen it comes to CA infrastructure.\n\n609\n00:31:58.660 --> 00:31:59.490\nBefore we sign out,\n\n610\n00:31:59.490 --> 00:32:02.720\ndo you got anything else you might want to\nthrow at our viewers when it comes to just\n\n611\n00:32:02.720 --> 00:32:06.600\ngeneral certificate authorities and\nthe infrastructure behind them?\n\n612\n00:32:06.600 --> 00:32:08.650\n&gt;&gt; I can't stress enough\nprotecting that Root CA.\n\n613\n00:32:08.650 --> 00:32:14.280\nSo make sure you keep them safe,\nwhether you choose to do it offline or\n\n614\n00:32:14.280 --> 00:32:17.250\nonline most places do it offline.\n\n615\n00:32:17.250 --> 00:32:20.460\nDo think about where you're\nputting that subordinate CA.\n\n616\n00:32:20.460 --> 00:32:23.070\nI've seen people put it\non domain controllers\n\n617\n00:32:24.270 --> 00:32:27.580\nwhich in one respect might be okay,\nI see where their logic is,\n\n618\n00:32:27.580 --> 00:32:31.110\nwe try to group services based\non security requirements.\n\n619\n00:32:31.110 --> 00:32:35.030\nThat subordinate CA, just because I say\nthe Root CA needs to be protected very\n\n620\n00:32:35.030 --> 00:32:38.930\ncarefully and we've been stressing\nthat does not mean the subordinate CA\n\n621\n00:32:38.930 --> 00:32:41.630\ncan be left wide open and\nwho cares who access it, right?\n\n622\n00:32:41.630 --> 00:32:45.330\nWe do have to protect him as well,\nbut he needs to be accessible so\n\n623\n00:32:45.330 --> 00:32:48.200\nthat he can issue certificates and\nall that fun stuff.\n\n624\n00:32:48.200 --> 00:32:52.170\nAnd if you're gonna do any of the web\nenrollment and things like that the idea\n\n625\n00:32:52.170 --> 00:32:57.140\nof running IIS on my domain controller\nscares the you-know-what out of me.\n\n626\n00:32:57.140 --> 00:33:01.910\nSo I definitely don't think the\nsubordinate CA role, in my humble opinion,\n\n627\n00:33:01.910 --> 00:33:03.580\nshould be on that domain controller.\n\n628\n00:33:03.580 --> 00:33:04.910\nPut it on a separate machine.\n\n629\n00:33:04.910 --> 00:33:09.020\nIf you were just gonna do a subordinate CA\nand not do any of the web enrollment or\n\n630\n00:33:09.020 --> 00:33:10.310\nanything like that,\n\n631\n00:33:10.310 --> 00:33:13.410\nmaybe you could consolidate that role with\nthe domain controller cuz then at that\n\n632\n00:33:13.410 --> 00:33:17.580\npoint they kinda have the same access\nrequirements and security requirements.\n\n633\n00:33:17.580 --> 00:33:19.910\nBut do be careful where you\nput that subordinate CA.\n\n634\n00:33:19.910 --> 00:33:22.200\nDon't forget that it does\nneed to be protected as well.\n\n635\n00:33:22.200 --> 00:33:26.360\nWe don't want him compromised any more\nthan we want the Root CA compromised.\n\n636\n00:33:26.360 --> 00:33:27.340\n&gt;&gt; Mike, great information.\n\n637\n00:33:27.340 --> 00:33:28.590\nIt's been a pleasure having you here and\n\n638\n00:33:28.590 --> 00:33:31.420\nit's actually been fun getting to jump\nin in the last couple of episodes.\n\n639\n00:33:31.420 --> 00:33:34.900\nWe appreciate having you here and\nwe appreciate you the viewer watching.\n\n640\n00:33:34.900 --> 00:33:37.370\nSigning out for ITPRO.TV,\nI've been your host, Wes Bryan.\n\n641\n00:33:37.370 --> 00:33:38.300\n&gt;&gt; And I am Mike Rodrick.\n\n642\n00:33:38.300 --> 00:33:39.160\n&gt;&gt; And we'll see you next time.\n\n643\n00:33:39.160 --> 00:33:46.770\n&gt;&gt; [MUSIC]\n\n644\n00:33:46.770 --> 00:33:53.810\n&gt;&gt; Thank you for watching ITPRO.TV\n\n",
          "vimeoId": "224315438"
        },
        {
          "description": "In this episode, Wes and Mike talk about concepts surrounding the implementation and management of certification within a CA infrastructure. They look at the different schema types for certificate templates and server compatibility.",
          "length": "2343",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-1-implement_and_manage_certificates-062917-PGM.00_39_33_07.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-1-implement_and_manage_certificates-062917-PGM.00_39_33_07.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-1-implement_and_manage_certificates-062917-PGM.00_39_33_07.Still001-sm.jpg",
          "title": "Implement and Manage Certificates",
          "transcript": "",
          "vimeoId": "224316737"
        },
        {
          "description": "In this episode, Wes and Mike continue their discussion on concepts surrounding the implementation and management of certification within a CA infrastructure. They talk about auto enrollment , superseding certificates, multipurpose certifications and adding purposes through extensions. Finally they will look at setting up a EFS recovery agent.",
          "length": "2091",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-2-implement_and_manage_certificates_pt2-062917-PGM.01_01_15_20.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-2-implement_and_manage_certificates_pt2-062917-PGM.01_01_15_20.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-2-implement_and_manage_certificates_pt2-062917-PGM.01_01_15_20.Still001-sm.jpg",
          "title": "Implement and Manage Certificates Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.056 --> 00:00:03.713\nWelcome to IT Pro TV I'm\nyour host Don [CROSSTALK]\n\n2\n00:00:03.713 --> 00:00:07.590\n[MUSIC]\n\n3\n00:00:07.590 --> 00:00:10.916\n&gt;&gt; You're watching IT Pro TV.\n\n4\n00:00:10.916 --> 00:00:14.676\n&gt;&gt; Hello and welcome back to another\ngreat episode here at ITProTV.\n\n5\n00:00:14.676 --> 00:00:18.958\nI'm your host Wes Bryan and in today's\nepisode well we are continuing through our\n\n6\n00:00:18.958 --> 00:00:21.577\nimplementing advanced\nserver infrastructure.\n\n7\n00:00:21.577 --> 00:00:26.332\nIn the first part we talked about a little\nbit of the certificates themselves, right?\n\n8\n00:00:26.332 --> 00:00:30.140\nWe talked about some of the templates,\nwe talked about template versions.\n\n9\n00:00:30.140 --> 00:00:33.798\nBut I gotta say that's only the start,\nthat's the tip of the iceberg when\n\n10\n00:00:33.798 --> 00:00:36.396\nit comes to managing your\ncertificates in general.\n\n11\n00:00:36.396 --> 00:00:38.041\nAnd joining us back in the studios for\n\n12\n00:00:38.041 --> 00:00:40.220\nthis endeavor is none\nother than Mike Rodrick.\n\n13\n00:00:40.220 --> 00:00:40.940\nMike, how you doing, sir?\n\n14\n00:00:40.940 --> 00:00:43.420\n&gt;&gt; Doing great, Wes thanks for\nhaving me back, and you are right.\n\n15\n00:00:43.420 --> 00:00:47.082\nWe have just gotten started when it comes\nto managing our certificates, right?\n\n16\n00:00:47.082 --> 00:00:50.679\nSo what we saw, as Wes said,\nwhat we saw in that previous episode,\n\n17\n00:00:50.679 --> 00:00:52.110\nhad to kinda get it set up.\n\n18\n00:00:52.110 --> 00:00:56.652\nWe looked at our CA, we saw what\ncertificates it was allowed to issue.\n\n19\n00:00:56.652 --> 00:01:00.169\nWe saw how we could manage that, we can\ngo right-click on certificate templates,\n\n20\n00:01:00.169 --> 00:01:00.881\nchoose manage.\n\n21\n00:01:00.881 --> 00:01:05.191\nWhich opens up a separate console with a\nwhole bunch of templates that we can make\n\n22\n00:01:05.191 --> 00:01:06.280\nchanges to.\n\n23\n00:01:06.280 --> 00:01:10.218\nAnd then we can go back out to our CA and\nsay new template to issue and\n\n24\n00:01:10.218 --> 00:01:13.160\nall of a sudden we can now\nissue those templates.\n\n25\n00:01:13.160 --> 00:01:18.460\nGood stuff there but we also showed you\nhow user could request a certificate.\n\n26\n00:01:18.460 --> 00:01:21.689\nEither through their MMC with their\ncertificate could snap in, or\n\n27\n00:01:21.689 --> 00:01:22.851\nthrough that web page.\n\n28\n00:01:22.851 --> 00:01:25.559\nBut I'll be honest,\nthat's a manual process.\n\n29\n00:01:25.559 --> 00:01:29.126\nAnd for one-off certificates that\nnot everybody needs like some of my\n\n30\n00:01:29.126 --> 00:01:32.255\ndevelopers might need\na code-signing certificate.\n\n31\n00:01:32.255 --> 00:01:36.353\nSo I probably let them do a nice manual\nenrollment cuz there's only a few of them,\n\n32\n00:01:36.353 --> 00:01:38.354\nnot everyone in the company needs one.\n\n33\n00:01:38.354 --> 00:01:40.294\nBut if we're doing things\nlike EFS certificates,\n\n34\n00:01:40.294 --> 00:01:41.520\nwhich we definitely should be.\n\n35\n00:01:41.520 --> 00:01:45.858\nIf our users are using encrypting file\nsystem they need certificates issued by\n\n36\n00:01:45.858 --> 00:01:49.220\nour CA not self-signed certificates,\nwhich will happen.\n\n37\n00:01:49.220 --> 00:01:51.923\nIf you don't set this up and\nthey just start encrypting files,\n\n38\n00:01:51.923 --> 00:01:54.430\nthey'll be encrypted with\na self-signed certificate.\n\n39\n00:01:54.430 --> 00:01:56.520\nAnd recovery becomes when near impossible.\n\n40\n00:01:56.520 --> 00:02:00.443\nSo I'm gonna show you how to\nset up auto-enrollment so\n\n41\n00:02:00.443 --> 00:02:02.670\nthat we can just have it ready.\n\n42\n00:02:02.670 --> 00:02:06.965\nThe next time they log on, they get\na certificate to our computers, right?\n\n43\n00:02:06.965 --> 00:02:10.891\nWe might want certificates to all of\nthose cuz we used them for IP sec or\n\n44\n00:02:10.891 --> 00:02:14.628\nto control access and\nwe want those to be automatically applied.\n\n45\n00:02:14.628 --> 00:02:17.861\nA computer is not gonna visit\na webpage and say yeah,\n\n46\n00:02:17.861 --> 00:02:19.910\nI want that certificate, right?\n\n47\n00:02:19.910 --> 00:02:21.856\nSo we've gotta be able to do\nsomething different there.\n\n48\n00:02:21.856 --> 00:02:23.300\nSo we're gonna set up auto enrollment.\n\n49\n00:02:23.300 --> 00:02:25.055\nIt's really pretty straight forward,\n\n50\n00:02:25.055 --> 00:02:28.370\nit's just a couple of different places\nI've gotta go to configure this.\n\n51\n00:02:28.370 --> 00:02:31.130\nSo let's look and see how we can do it.\n\n52\n00:02:31.130 --> 00:02:32.770\nLet's take a look at my screen here and\n\n53\n00:02:32.770 --> 00:02:35.230\nI'm gonna start with\nthe group policy part.\n\n54\n00:02:35.230 --> 00:02:38.080\nI'm gonna flip over to\nmy domain controller and\n\n55\n00:02:38.080 --> 00:02:41.350\nI'm gonna open up our\nGroup Policy Management Console.\n\n56\n00:02:41.350 --> 00:02:44.901\nAnd remember we made in a previous\nepisode, [COUGH] excuse me,\n\n57\n00:02:44.901 --> 00:02:46.348\nwe made that PKI policy.\n\n58\n00:02:46.348 --> 00:02:50.099\nI'm just gonna use that one, so I'm gonna\nright-click on that and choose Edit.\n\n59\n00:02:52.030 --> 00:02:56.519\nAnd I'm gonna expand out underneath, if\nI'm talking about automating computers or\n\n60\n00:02:56.519 --> 00:02:59.588\nautomating users will determine\nwhat section I go under.\n\n61\n00:02:59.588 --> 00:03:05.144\nLet's do both actually, so\nI'm gonna go under computer Configuration,\n\n62\n00:03:05.144 --> 00:03:11.610\nPolicies, Windows settings,\nSecurity settings, Public key policies.\n\n63\n00:03:11.610 --> 00:03:14.700\nAnd then there's certificate\nservices client auto enrollment.\n\n64\n00:03:14.700 --> 00:03:16.850\nI'm going to right-click on that and\nchoose Properties.\n\n65\n00:03:18.170 --> 00:03:21.160\nAnd I'm just going to go ahead and\nturn that on, choose Enabled.\n\n66\n00:03:21.160 --> 00:03:28.780\nAnd we'll tell it, let's see what\nI'm doing with this guy here.\n\n67\n00:03:28.780 --> 00:03:31.560\nLet's go ahead and Renew expired\ncertificates update pending and\n\n68\n00:03:31.560 --> 00:03:33.130\nremove revoke certificates.\n\n69\n00:03:33.130 --> 00:03:35.150\nWe can basically automate that.\n\n70\n00:03:35.150 --> 00:03:38.480\nAll right Update certificates and user\ncertificate templates, let's go ahead and\n\n71\n00:03:38.480 --> 00:03:39.510\ncheck that.\n\n72\n00:03:39.510 --> 00:03:42.400\nAnd then there's a warning\npercentage that really doesn't apply\n\n73\n00:03:42.400 --> 00:03:43.710\nthe computer this much.\n\n74\n00:03:43.710 --> 00:03:46.970\nI mean it does but\nwe're not as worried about that.\n\n75\n00:03:46.970 --> 00:03:50.110\nWe'll go ahead and click OK cuz\nit's gonna automatically renew.\n\n76\n00:03:50.110 --> 00:03:54.628\nSo that's for the computers and in for\nusers I need to come down to the user\n\n77\n00:03:54.628 --> 00:04:00.504\nConfiguration, Policies, Windows settings,\nSecurity settings, Public key policies.\n\n78\n00:04:00.504 --> 00:04:05.700\nAnd in here, same thing, certificate\nservices client, auto enrollment.\n\n79\n00:04:05.700 --> 00:04:10.970\nI'll change that to Enabled and\nagain same options, right?\n\n80\n00:04:10.970 --> 00:04:14.502\nI wanna go ahead and renew expired, update\npending and remove revoke certificates.\n\n81\n00:04:14.502 --> 00:04:18.160\nThat'll automate that process,\nit will automatically issue it.\n\n82\n00:04:18.160 --> 00:04:20.695\nI may as well automate\nthe rest of this as well,\n\n83\n00:04:20.695 --> 00:04:23.890\nupdate certificates that use\nthe certificate template.\n\n84\n00:04:23.890 --> 00:04:28.188\nIn the 10% there that's how, if there's\na year, if it's valid for a year,\n\n85\n00:04:28.188 --> 00:04:32.120\nwhen there's only 10% left of\nthat certificate's lifetime.\n\n86\n00:04:32.120 --> 00:04:33.570\nIt'll give the user a warning say,\n\n87\n00:04:33.570 --> 00:04:36.954\nhey it's time to re enroll or\nupdate your certificate.\n\n88\n00:04:36.954 --> 00:04:39.940\nBut again it's kind of\nalrady automated but\n\n89\n00:04:39.940 --> 00:04:41.810\nit's nice to give them\na warning I suppose.\n\n90\n00:04:42.980 --> 00:04:47.532\nAll right I'll go ahead and click OK and\nI'll close that group policy and\n\n91\n00:04:47.532 --> 00:04:48.362\nthat's it.\n\n92\n00:04:48.362 --> 00:04:54.060\nSo that just enables the ability\nto do auto enrollment.\n\n93\n00:04:54.060 --> 00:04:58.425\nWe still have to configure the CA\nto support that as well and\n\n94\n00:04:58.425 --> 00:05:00.664\nI also need to update policy.\n\n95\n00:05:00.664 --> 00:05:04.740\nWhich I'm gonna go ahead and do that on\nthe domain controller while I'm here.\n\n96\n00:05:06.060 --> 00:05:10.368\nI'm just gonna do a little GP update,\nswitch force, gonna I'll let that run.\n\n97\n00:05:10.368 --> 00:05:11.720\nWe're don't even have\nto watch it finish and\n\n98\n00:05:11.720 --> 00:05:14.770\nwhich we'll switch over to\nthe subordinate CA all right.\n\n99\n00:05:14.770 --> 00:05:18.352\nNow the subordinant CA,\nI'm gonna open up my serve console.\n\n100\n00:05:18.352 --> 00:05:19.300\nAnd here where,\n\n101\n00:05:19.300 --> 00:05:24.310\nnotice when we set that in group policy we\ndidn't specify what certificates right.\n\n102\n00:05:24.310 --> 00:05:28.552\nWe just said, hey we turned on, we enabled\nauto enrollment, but what certificates?\n\n103\n00:05:28.552 --> 00:05:31.060\nThat's what you have to do\nback here in the CA console.\n\n104\n00:05:31.060 --> 00:05:34.097\nYou have to go to the template and\nsay, yes I want to set that up for\n\n105\n00:05:34.097 --> 00:05:35.010\nauto enrollment.\n\n106\n00:05:35.010 --> 00:05:39.182\nI wanna give certain people\npermission to auto-enroll on\n\n107\n00:05:39.182 --> 00:05:42.000\nthe different templates, all right.\n\n108\n00:05:42.000 --> 00:05:45.180\nSo I'm going to,\nremember you can't change it here.\n\n109\n00:05:45.180 --> 00:05:49.400\nI don't get any properties\nwhen I click on it here.\n\n110\n00:05:49.400 --> 00:05:53.588\nSo we've gotta right-click, manage and\n\n111\n00:05:53.588 --> 00:05:59.530\nI'm gonna go down to that lab EFS and\npull up its properties.\n\n112\n00:05:59.530 --> 00:06:03.958\nAnd we're gonna go over\nto the security tab.\n\n113\n00:06:03.958 --> 00:06:06.530\nRight now [COUGH] excuse me,\nlet's do this.\n\n114\n00:06:06.530 --> 00:06:10.158\nLet's real quick just verify,\nI'm gonna go to the Windows 10 box, and\n\n115\n00:06:10.158 --> 00:06:12.745\nI'm gonna log in as a different user.\n\n116\n00:06:12.745 --> 00:06:16.270\n[COUGH] Excuse me,\nmy throat is going crazy today.\n\n117\n00:06:17.840 --> 00:06:22.312\nI'm gonna login as Nate and let's see\nwhat certificates Nate has already.\n\n118\n00:06:27.024 --> 00:06:31.740\nSo we'll open up Nate's account,\nwe'll create an MMC,\n\n119\n00:06:31.740 --> 00:06:34.446\nMicrosoft Management Console.\n\n120\n00:06:34.446 --> 00:06:38.594\nWe'll add our certificate snap in for\n\n121\n00:06:38.594 --> 00:06:43.786\nthe current user, and\nwe'll expand that out.\n\n122\n00:06:43.786 --> 00:06:46.790\nAnd we try to expand out personal,\nnothing shows up over there.\n\n123\n00:06:46.790 --> 00:06:50.290\nI'm going to save this MMC just so\nthat I don't have to create it again.\n\n124\n00:06:50.290 --> 00:06:54.718\nIf I need to use it again call it certs,\nput it out on the desktop,\n\n125\n00:06:54.718 --> 00:06:56.368\nwe should be good to go.\n\n126\n00:06:56.368 --> 00:06:59.990\nAll right so\nNate doesn't have any certificates so far.\n\n127\n00:06:59.990 --> 00:07:05.081\nSo back over to the subordinate CA,\nthe good old Lab EFS certificate\n\n128\n00:07:05.081 --> 00:07:09.920\ntemplate that we created earlier\nby duplicating the basic EFS.\n\n129\n00:07:09.920 --> 00:07:14.068\nI'm going to look at the permissions and\nusers have enrolled,\n\n130\n00:07:14.068 --> 00:07:16.270\nauthenticated users that read.\n\n131\n00:07:16.270 --> 00:07:17.764\nSo Nate at this point had read and enroll.\n\n132\n00:07:17.764 --> 00:07:24.206\nWhat we're gonna add to the domain users\nis the auto-enroll permission all right.\n\n133\n00:07:24.206 --> 00:07:26.863\nYou're gonna see that down there,\nthe auto-enroll and\n\n134\n00:07:26.863 --> 00:07:29.420\nthis isn't available on\nthose version 1 templates.\n\n135\n00:07:29.420 --> 00:07:34.370\nThis is something that came out\nwith version 2 if I'm not mistaken.\n\n136\n00:07:34.370 --> 00:07:36.750\nAll right so\nwe'll add the auto-enroll permission.\n\n137\n00:07:36.750 --> 00:07:38.960\nAnd this is where, if you think about it,\nyou could be specific.\n\n138\n00:07:38.960 --> 00:07:40.380\nHere I'm doing just domain users.\n\n139\n00:07:40.380 --> 00:07:44.889\nLet's say you had a certificate that\nyou wanted everybody in the sales\n\n140\n00:07:44.889 --> 00:07:47.804\ndepartment to be automatically issued one.\n\n141\n00:07:47.804 --> 00:07:49.855\nWell you could leave\nauthenticated users with read.\n\n142\n00:07:49.855 --> 00:07:55.022\nYou could leave domain users with\nenroll if you wanted to and you should.\n\n143\n00:07:55.022 --> 00:07:59.375\nAnd then you would add the sale users\ngroup just like any other access control\n\n144\n00:07:59.375 --> 00:08:03.951\nlist Add the Sales users group, and\ngive that group auto-enroll permission.\n\n145\n00:08:03.951 --> 00:08:08.473\nKeep in mind the permissions are\ncumulative, just like NTFS permissions, so\n\n146\n00:08:08.473 --> 00:08:11.077\nbecause if Nate was in\nthe Sales users group,\n\n147\n00:08:11.077 --> 00:08:14.700\nhe would pick up read from\nbeing an authenticated user.\n\n148\n00:08:14.700 --> 00:08:17.560\nHe would pick up enroll\nfrom being a domain user.\n\n149\n00:08:17.560 --> 00:08:20.940\nHe'd pick up auto-enroll from\nbeing in that Sales users group.\n\n150\n00:08:20.940 --> 00:08:24.650\nYou do need all three permissions,\nif I just give you auto-enroll, but\n\n151\n00:08:24.650 --> 00:08:27.590\nyou do not have enroll or\nread, it won't work.\n\n152\n00:08:27.590 --> 00:08:33.443\nYou need read, enroll, and auto-enroll for\nauto-enroll to work, all right?\n\n153\n00:08:33.443 --> 00:08:37.498\nSo at this point, domain users have read,\nenroll, and auto-enroll,\n\n154\n00:08:37.498 --> 00:08:39.830\nwe'll go ahead and click OK, all right?\n\n155\n00:08:42.446 --> 00:08:47.360\nNow, we're going to jump back\nover to my Windows 10 machine,\n\n156\n00:08:47.360 --> 00:08:50.550\nand you know what, I think I'm just gonna\nreboot this machine because I made some\n\n157\n00:08:50.550 --> 00:08:54.890\nchanges to the computer policy, and or\nyou know what, we'll just do a GP update.\n\n158\n00:08:54.890 --> 00:08:56.260\nThat way we don't have to reboot.\n\n159\n00:08:56.260 --> 00:08:58.800\nSo, let me do a gpupdate switch force.\n\n160\n00:08:59.870 --> 00:09:03.900\nUpdate the computer policy, and the user\npolicy so they know about the ability to\n\n161\n00:09:03.900 --> 00:09:07.580\ndo auto-enrollment, and\nthen we'll see what happens here.\n\n162\n00:09:09.540 --> 00:09:13.940\nRight, so there the computer policy's\nupdated, user policy's updated.\n\n163\n00:09:13.940 --> 00:09:18.630\nNow, if I go to the search console,\nwe take a look at certificates, well,\n\n164\n00:09:18.630 --> 00:09:20.040\nwhat do you know?\n\n165\n00:09:20.040 --> 00:09:21.800\nThere is Nate Copeland.\n\n166\n00:09:21.800 --> 00:09:24.320\nHe now has a certificate good for\n\n167\n00:09:25.790 --> 00:09:30.860\nencrypting file systems based off of\nthat Lab EFS template that we created.\n\n168\n00:09:30.860 --> 00:09:32.170\nSo Nate didn't have to do anything,\n\n169\n00:09:32.170 --> 00:09:35.080\ndidn't have to go to a webpage,\ndidn't have to create a console.\n\n170\n00:09:35.080 --> 00:09:39.380\nHe just logged in, and boda bing,\nhe got the certificate, all right?\n\n171\n00:09:39.380 --> 00:09:43.160\nNow, Nate is not an admin, so I don't\nbelieve he's gonna be able to do this, but\n\n172\n00:09:43.160 --> 00:09:47.570\nlet's try,\nlet's check on the computer certificate.\n\n173\n00:09:47.570 --> 00:09:50.650\nWe didn't set the permissions on the\ncomputer certificate to auto-enroll, so\n\n174\n00:09:50.650 --> 00:09:52.019\nthat's not gonna be there anyway.\n\n175\n00:09:52.019 --> 00:09:53.240\nBut, it would be the same thing, right?\n\n176\n00:09:53.240 --> 00:09:56.914\nI would have to go to the template,\nfor the computer certificate,\n\n177\n00:09:56.914 --> 00:10:00.340\ngive the authenticated users\nthe auto-enroll permission.\n\n178\n00:10:00.340 --> 00:10:04.870\nBecause computers are authenticated users\nas well, and then reboot the system and\n\n179\n00:10:04.870 --> 00:10:07.016\nit would pick up a certificate as well.\n\n180\n00:10:07.016 --> 00:10:08.470\nAll right, next thing we wanna talk about.\n\n181\n00:10:08.470 --> 00:10:12.650\nSo, we talked about auto-enrollment, I\nwanna talk about superseding templates or\n\n182\n00:10:12.650 --> 00:10:15.925\ncertificates, and then we wanna\ntake a look at setting up recovery,\n\n183\n00:10:15.925 --> 00:10:19.460\nanother very important part of\nmanaging these certificates.\n\n184\n00:10:19.460 --> 00:10:22.110\nSo, superseding is when you have\n\n185\n00:10:22.110 --> 00:10:25.530\na new template that you want\nto replace an older template.\n\n186\n00:10:25.530 --> 00:10:28.250\nMaybe you've changed something\nabout that template,\n\n187\n00:10:29.480 --> 00:10:33.100\nwhat encryption it's using,\nthe validity period.\n\n188\n00:10:33.100 --> 00:10:36.420\nYou want it to be longer than a year,\nmaybe you wanna change it to two years.\n\n189\n00:10:36.420 --> 00:10:39.670\nWell we can create a new template\nbased off of the old one,\n\n190\n00:10:39.670 --> 00:10:44.940\nand then we can tell it that, hey,\nthis supersedes that old one.\n\n191\n00:10:44.940 --> 00:10:48.110\nAnd what'll happen is it\nshould automatically replace.\n\n192\n00:10:48.110 --> 00:10:51.250\nAnybody that has one of\nthose older based templates\n\n193\n00:10:51.250 --> 00:10:53.530\nwill automatically get the new one.\n\n194\n00:10:53.530 --> 00:10:56.070\nThing to keep in mind here with\nthe superseding is if you change\n\n195\n00:10:56.070 --> 00:11:00.450\nthe functionality of the certificate,\nit won't supersede.\n\n196\n00:11:00.450 --> 00:11:06.781\nIt'll still get issued,\nbut they wouldn't replace.\n\n197\n00:11:06.781 --> 00:11:09.537\nThey would actually have both\ncertificates at that point.\n\n198\n00:11:09.537 --> 00:11:14.110\nSo, for example, for Nate here,\nhe's got that Lab EFS.\n\n199\n00:11:14.110 --> 00:11:15.940\nLet's go back over to\nour subordinate CA and\n\n200\n00:11:18.170 --> 00:11:21.890\nlet's duplicate that Lab EFS\ncertificate template.\n\n201\n00:11:21.890 --> 00:11:24.420\nSo, I'm gonna right-click on it and\nchoose Duplicate Template.\n\n202\n00:11:25.650 --> 00:11:29.440\nAnd I'm gonna leave the compatibility\nsettings on the general.\n\n203\n00:11:29.440 --> 00:11:34.863\nI'm gonna call this one new Lab EFS\nbecause I'm not all that creative.\n\n204\n00:11:34.863 --> 00:11:40.353\nAnd let's change the validity\nperiod to two years, all right?\n\n205\n00:11:40.353 --> 00:11:42.940\nEverything else is gonna stay the same.\n\n206\n00:11:42.940 --> 00:11:45.870\nI'll go ahead and click OK, no,\nI'm sorry, before I click OK,\n\n207\n00:11:45.870 --> 00:11:48.640\nwe actually have to tell it that\nwe want it to supersede something.\n\n208\n00:11:48.640 --> 00:11:53.160\nSo, I'm gonna click on the Superseded\nTemplates tab and click Add, and\n\n209\n00:11:54.400 --> 00:12:00.530\nI'm gonna add the old Lab EFS,\nand click OK.\n\n210\n00:12:00.530 --> 00:12:04.685\nSo, I'm telling it this template that\nI'm creating now is gonna replace or\n\n211\n00:12:04.685 --> 00:12:07.970\nsupersede the old Lab EFS.\n\n212\n00:12:07.970 --> 00:12:13.951\nSo I'll click OK, And\nI now have my new template down here.\n\n213\n00:12:13.951 --> 00:12:19.702\nBut again, the step to not forget\nis to go back to your CA console,\n\n214\n00:12:19.702 --> 00:12:25.770\nright-click on Certificate Templates\n&gt; New &gt; Template to Issue,\n\n215\n00:12:25.770 --> 00:12:29.863\nand I'm gonna find my new Lab EFS and\nclick OK.\n\n216\n00:12:29.863 --> 00:12:35.107\nAnd now, that shows up in my list\nas a possible template to issue.\n\n217\n00:12:35.107 --> 00:12:40.426\nLet's go back over to the client,\nand we're gonna update policy.\n\n218\n00:12:44.863 --> 00:12:45.608\nIf I could spell it.\n\n219\n00:12:49.763 --> 00:12:56.285\nWe'll update that policy, and\nwe will see if it actually worked.\n\n220\n00:12:56.285 --> 00:12:57.298\nSo, keep our fingers crossed.\n\n221\n00:12:57.298 --> 00:13:00.482\nThere goes the computer policy.\n\n222\n00:13:00.482 --> 00:13:02.210\nWe're waiting for\nthat user policy to show up.\n\n223\n00:13:02.210 --> 00:13:03.554\nThere we go, that is all completed.\n\n224\n00:13:03.554 --> 00:13:05.350\nWe'll refresh this.\n\n225\n00:13:05.350 --> 00:13:07.335\nWe'll refresh our console.\n\n226\n00:13:07.335 --> 00:13:09.310\nAnd did you see it change?\n\n227\n00:13:09.310 --> 00:13:12.150\nSo now,\nthis is based off of then new Lab EFS.\n\n228\n00:13:12.150 --> 00:13:14.430\nNotice he still only has one certificate.\n\n229\n00:13:14.430 --> 00:13:18.568\nSo it replaced, it removed the old one,\nreplaced it with this new one.\n\n230\n00:13:18.568 --> 00:13:21.450\nThat is what they call\nsuperseding templates,\n\n231\n00:13:21.450 --> 00:13:25.450\nand it's definitely a test\nquestion possibility.\n\n232\n00:13:25.450 --> 00:13:28.820\nAlso keep in mind, like I said,\nif you change functionality.\n\n233\n00:13:28.820 --> 00:13:29.631\nI've done that before.\n\n234\n00:13:29.631 --> 00:13:34.764\nOkay, we've had this EFS certificate or\na normal user certificate,\n\n235\n00:13:34.764 --> 00:13:38.890\nright, that does EFS and\nclient authentication.\n\n236\n00:13:38.890 --> 00:13:40.530\nAnd I wanna add smart card to it.\n\n237\n00:13:40.530 --> 00:13:45.050\nSo, I created a new copy or I copied the\ntemplate, created a new one, added smart\n\n238\n00:13:45.050 --> 00:13:49.410\ncard capabilities to it, a new purpose,\nand then told it to supersede the old one.\n\n239\n00:13:49.410 --> 00:13:52.669\nAnd what you end up seeing is the old\none listed and the new one listed.\n\n240\n00:13:52.669 --> 00:13:57.296\nBecause it's got different purposes\nit's not an exact replacement as far\n\n241\n00:13:57.296 --> 00:14:00.677\nas the extensions go,\nthen it doesn't technically,\n\n242\n00:14:00.677 --> 00:14:03.407\nit's doesn't really supersede that guy.\n\n243\n00:14:03.407 --> 00:14:06.298\nAll right, and speaking of purposes,\nlet's take a look at that, and\n\n244\n00:14:06.298 --> 00:14:08.118\nthen we'll get into recovery, I promise.\n\n245\n00:14:08.118 --> 00:14:11.605\nI keep saying that, and we will.\n\n246\n00:14:11.605 --> 00:14:15.584\nBack over to my Cert Serve\nconsole on my subordinate CA.\n\n247\n00:14:15.584 --> 00:14:20.802\nAnd let's talk about,\nwhat the heck was I gonna talk about Wes?\n\n248\n00:14:20.802 --> 00:14:22.567\nI completely forgot now.\n\n249\n00:14:22.567 --> 00:14:27.110\n[LAUGH] We'll talk about, we were talking\nabout superseding, purpose, yeah purpose,\n\n250\n00:14:27.110 --> 00:14:28.280\nthat was it.\n\n251\n00:14:28.280 --> 00:14:30.429\nAll right, so we're gonna right-click\non Templates and choose Manage.\n\n252\n00:14:31.630 --> 00:14:35.610\nAnd when we look at that, let's just\nuse our new Lab EFS certificate.\n\n253\n00:14:35.610 --> 00:14:39.040\nI'm gonna right-click on it and\nchoose Properties.\n\n254\n00:14:39.040 --> 00:14:40.780\nAnd then I'm gonna go\nto the Extensions tab.\n\n255\n00:14:40.780 --> 00:14:42.540\nAnd, this, we talked about it earlier.\n\n256\n00:14:42.540 --> 00:14:46.700\nWe said you could have a single-purpose\ncertificate or a multipurpose certificate.\n\n257\n00:14:46.700 --> 00:14:50.590\nThis is a single-purpose.\n\n258\n00:14:50.590 --> 00:14:55.230\nWhen you look at the application policies,\nEFS is the only one listed there.\n\n259\n00:14:55.230 --> 00:14:58.640\nSo, this certificate is only good for EFS.\n\n260\n00:14:58.640 --> 00:15:03.355\nIf I look at something like,\nwhere are we at here, my user certificate.\n\n261\n00:15:06.282 --> 00:15:13.750\nProperties, and Extensions,\nand it does not show me that.\n\n262\n00:15:13.750 --> 00:15:14.840\nThere we go.\n\n263\n00:15:14.840 --> 00:15:15.840\nEnhanced Key Usage.\n\n264\n00:15:15.840 --> 00:15:21.445\nI can see this is good for EFS,\nSecure Email, and Client Authentication.\n\n265\n00:15:21.445 --> 00:15:23.460\nSo it has three different purposes.\n\n266\n00:15:23.460 --> 00:15:26.280\nThis would be an example of\na multipurpose certificate.\n\n267\n00:15:26.280 --> 00:15:28.510\n&gt;&gt; So Mike, if I understand this right,\nyou said EFS,\n\n268\n00:15:28.510 --> 00:15:31.050\nthat one's pretty obvious right there,\nencrypted file system.\n\n269\n00:15:31.050 --> 00:15:34.484\nBut this could be doing things like S/MIME\nas well and verifying that that computer\n\n270\n00:15:34.484 --> 00:15:38.034\non the other end is the computer that you\nthink that that information's coming from.\n\n271\n00:15:38.034 --> 00:15:40.281\n&gt;&gt; Yep, absolutely right,\nand client authentication.\n\n272\n00:15:40.281 --> 00:15:43.894\nSo, if you're using IPsec policies\nthat were using certificates to\n\n273\n00:15:43.894 --> 00:15:47.270\nauthenticate the user,\nthen the certificate could be useful.\n\n274\n00:15:47.270 --> 00:15:48.925\n&gt;&gt; So\nwhen those security associations too.\n\n275\n00:15:48.925 --> 00:15:49.470\nI didn't even [CROSSTALK] Okay.\n\n276\n00:15:49.470 --> 00:15:53.173\n&gt;&gt; Absolutely, all right, so\nif we want to change this though,\n\n277\n00:15:53.173 --> 00:15:56.105\nlet's change this one\nthat we've already got.\n\n278\n00:15:56.105 --> 00:15:58.570\nRemember because I can't\nchange this version 1.\n\n279\n00:15:58.570 --> 00:16:00.104\nI can duplicate it, but\n\n280\n00:16:00.104 --> 00:16:05.310\nI've already got one that I've issued\nout to my users called New Lab EFS.\n\n281\n00:16:05.310 --> 00:16:07.620\nI'm gonna right click on that and\npull up it's properties.\n\n282\n00:16:07.620 --> 00:16:09.770\nThat's version two, so\nI can make changes to it.\n\n283\n00:16:09.770 --> 00:16:12.560\nI'm gonna go to that extensions tab,\nand again,\n\n284\n00:16:12.560 --> 00:16:15.470\nI look at the application policies and\nall I see is EFS.\n\n285\n00:16:15.470 --> 00:16:17.070\nSo I'm gonna click edit.\n\n286\n00:16:18.400 --> 00:16:19.640\nAnd then I'm gonna click add.\n\n287\n00:16:20.840 --> 00:16:23.780\nAnd let's add the ability\nto do smart card logon.\n\n288\n00:16:25.850 --> 00:16:26.390\nAnd I'll click OK.\n\n289\n00:16:26.390 --> 00:16:28.210\nAnd I can add as many as I want.\n\n290\n00:16:28.210 --> 00:16:29.240\nI could add another one.\n\n291\n00:16:29.240 --> 00:16:32.840\nIf we also wanted this one certificate\nto do, what was the other one?\n\n292\n00:16:32.840 --> 00:16:33.626\nClient authentication.\n\n293\n00:16:36.722 --> 00:16:42.130\nAnd then if I also wanted to add,\nwhat was the other one that was on there?\n\n294\n00:16:42.130 --> 00:16:45.560\nClient authentication, EFS and\nS/MIME or secure mail.\n\n295\n00:16:48.200 --> 00:16:50.850\nSecure email, we click OK and OK.\n\n296\n00:16:50.850 --> 00:16:55.650\nAnd now you see my application\npolicies list all of those, right?\n\n297\n00:16:55.650 --> 00:17:00.210\nI got my client authentication, EFS,\nsecure e-mail, and Smart Card log on,\n\n298\n00:17:00.210 --> 00:17:01.200\nall right?\n\n299\n00:17:01.200 --> 00:17:08.280\nSo I'll go ahead and apply that change,\nAnd then we're gonna go back.\n\n300\n00:17:08.280 --> 00:17:12.700\nNow, this one, since I modified an\nexisting template, I don't have to go back\n\n301\n00:17:12.700 --> 00:17:17.110\nout to the Cert Serve console and\nadd it cuz it's already here.\n\n302\n00:17:17.110 --> 00:17:18.680\nAnd when we did the auto enrollment,\n\n303\n00:17:18.680 --> 00:17:24.330\nwe said that update certificates based on\ntemplates, so let's see if that worked.\n\n304\n00:17:24.330 --> 00:17:26.580\nUpdate certificates that were\nissued based on templates.\n\n305\n00:17:26.580 --> 00:17:30.023\nSo right now, this guy is just EFS.\n\n306\n00:17:30.023 --> 00:17:35.531\nLet's see what happens if we\ndo another GP update force.\n\n307\n00:17:35.531 --> 00:17:37.400\nSee if it kicks in.\n\n308\n00:17:39.020 --> 00:17:42.714\nAll right, so we'll wait for it to\nupdate that user half of that policy.\n\n309\n00:17:46.814 --> 00:17:48.270\nIt doesn't look like it updated.\n\n310\n00:17:48.270 --> 00:17:50.500\nUpdated.\nNope, it did not update it yet\n\n311\n00:17:50.500 --> 00:17:54.770\nso might have to reissue that one or\n\n312\n00:17:54.770 --> 00:17:57.870\nit could be a setting in my group\npolicy that I goofed up there.\n\n313\n00:17:57.870 --> 00:17:59.940\nSo we'll come back, we'll see,\nwe'll give it a little bit of time.\n\n314\n00:17:59.940 --> 00:18:04.390\nSometimes it takes a few minutes\nif we've cached some policies.\n\n315\n00:18:04.390 --> 00:18:07.460\nI did say force so\nit should reapply all policies.\n\n316\n00:18:07.460 --> 00:18:11.490\nWe'll have to double check on that one but\nbefore we do that, before we waste any\n\n317\n00:18:11.490 --> 00:18:16.470\ntime troubleshooting that,\nlet's talk about good old EFS recovery.\n\n318\n00:18:16.470 --> 00:18:21.440\nCuz that's something that we've gotta be\naware of, we've gotta make sure is set up.\n\n319\n00:18:21.440 --> 00:18:23.970\nWhen we talk about encrypting flies,\nright?\n\n320\n00:18:23.970 --> 00:18:26.080\nWe issue a user certificate.\n\n321\n00:18:26.080 --> 00:18:27.510\nIt's good for encrypting files.\n\n322\n00:18:27.510 --> 00:18:30.250\nThey can go to any file, and\nthey can right click on it,\n\n323\n00:18:30.250 --> 00:18:34.300\nthey can go to the properties and they can\nencrypt that contents to secure the data.\n\n324\n00:18:34.300 --> 00:18:36.220\nNow they're the only ones\nthat can access that.\n\n325\n00:18:36.220 --> 00:18:41.655\nBut if they lose their key, right, if\nthey they lose that private key somehow,\n\n326\n00:18:41.655 --> 00:18:45.315\neither profile corruption,\ncuz that never happens in Windows, right?\n\n327\n00:18:45.315 --> 00:18:47.845\nHard drive corruption, anything like that,\n\n328\n00:18:47.845 --> 00:18:50.045\nthey can end up losing\naccess to those files.\n\n329\n00:18:50.045 --> 00:18:53.145\nSo we need an EFS recovery agent.\n\n330\n00:18:53.145 --> 00:18:56.939\nBy default, in a domain environment,\nthe domain,\n\n331\n00:18:56.939 --> 00:19:03.060\nthe built-in domain admin account,\nthat is your recovery agent, right?\n\n332\n00:19:03.060 --> 00:19:06.220\nBut best practice says to change that.\n\n333\n00:19:06.220 --> 00:19:08.640\nDepends on how you run\nyour enterprise really.\n\n334\n00:19:08.640 --> 00:19:14.380\nA lot of times the built-in domain admin\naccount, many people have access to.\n\n335\n00:19:14.380 --> 00:19:14.950\nMost of you,\n\n336\n00:19:14.950 --> 00:19:19.038\nanybody that needs to administer the\ndomain itself, has access to that account.\n\n337\n00:19:19.038 --> 00:19:22.450\nSo they log on as a normal user\nwhen they're doing other things.\n\n338\n00:19:22.450 --> 00:19:26.770\nThey've got the password for the domain\nadmin account, and they can use that when\n\n339\n00:19:26.770 --> 00:19:30.690\nthey need to do something that\nrequires domain admin rights.\n\n340\n00:19:30.690 --> 00:19:31.960\nThe problem, though, is, and\n\n341\n00:19:31.960 --> 00:19:35.939\nby default, that account is the recovery\nagent in a domain environment.\n\n342\n00:19:37.170 --> 00:19:42.270\nBut a recovery agent, EFS recovery agent\ncan decrypt any file on the network.\n\n343\n00:19:42.270 --> 00:19:45.350\nAnd so a lot of times we wanna\nsecure that a little more.\n\n344\n00:19:45.350 --> 00:19:48.050\nWe wanna make sure that very\nfew people can go around and\n\n345\n00:19:48.050 --> 00:19:51.340\ndecrypt things that the CEO has encrypted.\n\n346\n00:19:51.340 --> 00:19:55.180\nThings that the dev team has encrypted,\n\n347\n00:19:55.180 --> 00:19:58.630\nconfidential code or\nproprietary information.\n\n348\n00:19:58.630 --> 00:20:00.780\nJust because Wes is my domain admin,\n\n349\n00:20:00.780 --> 00:20:03.550\ndoesn't mean he should have\naccess to all of that stuff.\n\n350\n00:20:03.550 --> 00:20:07.790\nAnd if he's a recovery agent,\nhe can decrypt any file on the network.\n\n351\n00:20:07.790 --> 00:20:09.420\nSo let's change that up.\n\n352\n00:20:09.420 --> 00:20:10.260\nLet me show you how to do that.\n\n353\n00:20:10.260 --> 00:20:11.300\nAll right.\n\n354\n00:20:11.300 --> 00:20:14.920\nWe're going to go back over\nto our domain controller.\n\n355\n00:20:14.920 --> 00:20:17.489\nAnd we're going to open up\nActive Directory users and computers.\n\n356\n00:20:18.690 --> 00:20:24.670\nAnd I'm going to create a new user,\nright, and I'm going to call this one EFS\n\n357\n00:20:25.910 --> 00:20:32.000\nrecovery and\nI'll make the logon something like EFS.\n\n358\n00:20:34.800 --> 00:20:39.360\nThen I'll click next,\nput in my password, and just for\n\n359\n00:20:39.360 --> 00:20:41.470\nthe lab I'm gonna do\npassword never expires.\n\n360\n00:20:41.470 --> 00:20:44.980\nAnd they don't have to change, I'm sorry\nI'm gonna do they don't have to change\n\n361\n00:20:44.980 --> 00:20:46.810\ntheir password just so\nI don't have to worry about that.\n\n362\n00:20:48.390 --> 00:20:51.400\nSo I've got a person listed\nhere as EFS recovery.\n\n363\n00:20:51.400 --> 00:20:54.700\nThat doesn't mean they can go out and\nrecover certificates automatically.\n\n364\n00:20:54.700 --> 00:20:58.890\nWhat I now need to do is issue that\nuser account a certificate for\n\n365\n00:20:58.890 --> 00:21:01.660\nthe purpose of EFS recovery.\n\n366\n00:21:01.660 --> 00:21:04.510\n&gt;&gt; Yeah Mike, with that recovery agent\nwe gotta get to it fairly quick cuz I'm\n\n367\n00:21:04.510 --> 00:21:07.160\nthinking you've got all these\nEFS certificates out there.\n\n368\n00:21:07.160 --> 00:21:11.830\nYour users are encrypting data and\nwhat happens if there's like you said,\n\n369\n00:21:11.830 --> 00:21:14.140\nthere's never corruption in Windows,\nright?\n\n370\n00:21:14.140 --> 00:21:15.760\nWhat happens if those keys get corrupted?\n\n371\n00:21:15.760 --> 00:21:18.220\nSo show us about the process.\n\n372\n00:21:18.220 --> 00:21:20.290\nIf we are gonna setup some kinda KRA or\n\n373\n00:21:20.290 --> 00:21:24.020\nkey recovery agent the steps that\nwe would do to see that in action.\n\n374\n00:21:24.020 --> 00:21:25.130\n&gt;&gt; All Right.\nSo let's take a look.\n\n375\n00:21:25.130 --> 00:21:30.200\nSo first of all as I said earlier the\ndomain admin or the built in admin account\n\n376\n00:21:30.200 --> 00:21:35.860\nby default is the recovery agent or\nthe efs recovery agent in a domain.\n\n377\n00:21:35.860 --> 00:21:38.550\nAnd we can see that if we\ngo into our group policy.\n\n378\n00:21:38.550 --> 00:21:41.240\nI go tools, group policy management.\n\n379\n00:21:41.240 --> 00:21:44.600\nAnd we take a look at our\ndefault domain policy.\n\n380\n00:21:46.190 --> 00:21:51.520\nAnd I go underneathcomputer configuration,\nPolicies, Windows settings,\n\n381\n00:21:51.520 --> 00:21:56.730\nSecurity settings, and\nthen down to our Public key policies, and\n\n382\n00:21:56.730 --> 00:22:00.590\nunderneath that we'll see\nencrypting file system, and\n\n383\n00:22:00.590 --> 00:22:04.500\nlisted out here in the details area,\nI can see that the administrator account\n\n384\n00:22:04.500 --> 00:22:09.300\nhas a certificate with the intended\npurpose A file recovery, all right?\n\n385\n00:22:09.300 --> 00:22:11.370\nBut notice it's a self signed certificate.\n\n386\n00:22:11.370 --> 00:22:16.560\nThis was actually created\nwell before we setup our PKI.\n\n387\n00:22:16.560 --> 00:22:21.528\nWhen I first created the domain it went\nahead and created a self sign certificate\n\n388\n00:22:21.528 --> 00:22:25.770\nFor the built-in administrator account,\nfor the purposes of file recovery.\n\n389\n00:22:25.770 --> 00:22:27.600\nAnd Microsoft Windows\ndoes this on purpose.\n\n390\n00:22:27.600 --> 00:22:30.750\nThat way, if you've got users\nthat start encrypting files and\n\n391\n00:22:30.750 --> 00:22:33.880\nyou've never done anything with,\nbecause, remember, our user,\n\n392\n00:22:33.880 --> 00:22:37.290\nwe don't have to have a public key\ninfrastructure for users to encrypt files.\n\n393\n00:22:37.290 --> 00:22:40.760\nIf they right click on a file and\nchoose to encrypt the contents.\n\n394\n00:22:40.760 --> 00:22:45.310\nWindows will see if there's a CA on hand,\nand if there's not Windows will create\n\n395\n00:22:45.310 --> 00:22:50.040\na self-signed certificate for that user\nand allow them to encrypt files anyway.\n\n396\n00:22:50.040 --> 00:22:52.640\nSo, it's great that Microsoft thought\nabout that and said, hey, look,\n\n397\n00:22:52.640 --> 00:22:54.580\nwe're going to set up a recovery agent.\n\n398\n00:22:54.580 --> 00:22:57.170\nAnd EFS Recovery Agent by default.\n\n399\n00:22:57.170 --> 00:23:01.420\nBut, it is a self signed certificate and\nit's the built in administrator account.\n\n400\n00:23:01.420 --> 00:23:05.270\nAnd a lot of times in enterprises,\nmany users have access to the built in\n\n401\n00:23:05.270 --> 00:23:07.670\nadministrator account,\nthe domain admin account, right?\n\n402\n00:23:07.670 --> 00:23:11.370\nAnybody that needs to manage the domain\nsome time will give them that user account\n\n403\n00:23:11.370 --> 00:23:17.250\nand password, and the EFS recovery\nagent can decrypt any file, right?\n\n404\n00:23:18.610 --> 00:23:22.860\nSo, there are people on my network that I\nwant to be able to administer the domain,\n\n405\n00:23:22.860 --> 00:23:26.850\nbut I don't necessarily want them to be\nable to decrypt files that were encrypted\n\n406\n00:23:26.850 --> 00:23:32.510\nby the CEO or by my dev team and it's\nproprietary confidential code information.\n\n407\n00:23:32.510 --> 00:23:33.030\nRight?\n\n408\n00:23:33.030 --> 00:23:35.860\nMight trust him to manage my domain but\nnot to get access to that stuff.\n\n409\n00:23:35.860 --> 00:23:41.370\nSo normally what the best practice is\nis create an account specifically for\n\n410\n00:23:41.370 --> 00:23:42.740\nEFS recovery.\n\n411\n00:23:42.740 --> 00:23:44.960\nPut a good, long,\nstrong password on there, and\n\n412\n00:23:44.960 --> 00:23:48.430\nvery few people are gonna have\naccess to that account, all right?\n\n413\n00:23:48.430 --> 00:23:49.240\nSo how do we do that?\n\n414\n00:23:49.240 --> 00:23:53.249\nWell, If we right-click over here and\nchoose Create Data Recovery Agent.\n\n415\n00:23:53.249 --> 00:23:56.631\nWhat it's gonna do is it's gonna use the\naccount that I'm currently logged on at,\n\n416\n00:23:56.631 --> 00:23:59.741\nwhich is the same account it's already\nused, the administrator account.\n\n417\n00:23:59.741 --> 00:24:03.240\nIt's gonna generate a certificate for\nKey recovery.\n\n418\n00:24:03.240 --> 00:24:05.265\nI'm sorry, not key recovery,\nfile recovery.\n\n419\n00:24:05.265 --> 00:24:06.874\nDon't let me say key recovery.\n\n420\n00:24:06.874 --> 00:24:08.550\nThat's a completely separate thing.\n\n421\n00:24:08.550 --> 00:24:12.080\nSo in a second here it'll pop up,\nand we'll see, and it will be.\n\n422\n00:24:12.080 --> 00:24:14.780\nIt sees that I have\na certificate authority now, and\n\n423\n00:24:14.780 --> 00:24:18.550\nit'll use that certificate authority to\ncreate that certificate, and there we go.\n\n424\n00:24:18.550 --> 00:24:21.206\n&gt;&gt; I was gonna just, it looks right there,\nyou could say issued by,\n\n425\n00:24:21.206 --> 00:24:24.170\nit looks like they're issued by\nsomething a little bit different here.\n\n426\n00:24:24.170 --> 00:24:27.367\nOne says you're sub CA that we've\nseen you set up in past episodes, and\n\n427\n00:24:27.367 --> 00:24:31.230\none again, that self sign, says, well,\ntrusted because I'm the administrator.\n\n428\n00:24:31.230 --> 00:24:32.259\n&gt;&gt; Exactly right.\n\n429\n00:24:32.259 --> 00:24:34.581\nSo that's really not what we want.\n\n430\n00:24:34.581 --> 00:24:37.921\nWe wanna create an account, so what we\nwould do is we would right-click and\n\n431\n00:24:37.921 --> 00:24:39.097\nadd data recovery agent.\n\n432\n00:24:39.097 --> 00:24:41.625\nBut you can't do that\nuntil you set things up.\n\n433\n00:24:41.625 --> 00:24:46.578\nYou need to create the user account, which\nyou're gonna use for EFS recovery, and\n\n434\n00:24:46.578 --> 00:24:49.975\nthen you need to issue\nthe certificate to that account for\n\n435\n00:24:49.975 --> 00:24:52.280\nthe purposes of EFS recovery.\n\n436\n00:24:52.280 --> 00:24:56.785\nThen we can come in here and we can ad,\nand we can remove the other two,\n\n437\n00:24:56.785 --> 00:24:58.207\nthe administrator.\n\n438\n00:24:58.207 --> 00:24:58.858\nSo let's do that.\n\n439\n00:24:58.858 --> 00:25:01.269\nWe're gonna flip over to Active Directory.\n\n440\n00:25:01.269 --> 00:25:03.000\nI've already got an account created.\n\n441\n00:25:03.000 --> 00:25:07.322\nLet's just make sure I've got it in there,\nand I can remember what it was.\n\n442\n00:25:07.322 --> 00:25:12.654\n[NOISE] or maybe I got rid of it.\n\n443\n00:25:12.654 --> 00:25:14.410\nAnd I don't see it, so\nwe'll create a new one.\n\n444\n00:25:14.410 --> 00:25:19.821\nSo I'm gonna create a new user and\n\n445\n00:25:19.821 --> 00:25:27.172\nI'm gonna call this one\nefs recovery agent.\n\n446\n00:25:27.172 --> 00:25:31.662\nAnd I'll call for the logon,\nI'll put efs recovery,\n\n447\n00:25:31.662 --> 00:25:36.454\nall right, EFS is good enough,\nwe'll just log on as EFS.\n\n448\n00:25:36.454 --> 00:25:38.190\nI'm not feeling creative today.\n\n449\n00:25:38.190 --> 00:25:43.025\nI'll give it a password, should be a good,\nlong, strong password out there in\n\n450\n00:25:43.025 --> 00:25:46.869\nthe real world, cuz you might\nnot change this password often.\n\n451\n00:25:46.869 --> 00:25:48.703\nJust depends on how\nyou've got that set up.\n\n452\n00:25:48.703 --> 00:25:49.678\nAll right, so\n\n453\n00:25:49.678 --> 00:25:55.050\nnow I've got an account that I plan on\nusing to be my EFS data recovery agent.\n\n454\n00:25:55.050 --> 00:26:00.730\nSo we're gonna go over to my\ncertificate authority, good old sub CA.\n\n455\n00:26:00.730 --> 00:26:06.044\nGonna open up my cert serve console,\nmy certification authority.\n\n456\n00:26:06.044 --> 00:26:12.273\nAnd if we look at my templates,\nthere is a EFS recovery.\n\n457\n00:26:12.273 --> 00:26:15.990\nActually, I deleted that one earlier cuz\nI was testing things out to make sure\n\n458\n00:26:15.990 --> 00:26:17.372\neverything was gonna work.\n\n459\n00:26:17.372 --> 00:26:23.569\nSo what we're gonna do is we're gonna\ngo in and manage these templates.\n\n460\n00:26:23.569 --> 00:26:28.177\nAnd I'm gonna find my EFS recovery\nagent template which is right there.\n\n461\n00:26:28.177 --> 00:26:31.612\nAnd I'm gonna duplicate that because I\ncan only change permissions on there.\n\n462\n00:26:31.612 --> 00:26:33.319\nThere's a couple other\nthings I wanna change.\n\n463\n00:26:33.319 --> 00:26:38.172\nSo I'm gonna duplicate that and\nI'm going to leave it as 2003.\n\n464\n00:26:38.172 --> 00:26:42.194\nAnd I'm gonna call this my\nLab EFS recovery agent, and\n\n465\n00:26:42.194 --> 00:26:48.154\nwhat I wanna change on here is, I'm gonna\ntake a look at issuance requirements.\n\n466\n00:26:48.154 --> 00:26:53.320\nAnd I'm gonna require that a CA\nadministrator approve that certificate.\n\n467\n00:26:53.320 --> 00:26:55.990\nThat means it's not gonna\nissue it automatically.\n\n468\n00:26:55.990 --> 00:27:00.682\nIt's one more layer of security, making\nsure that somebody can't mistakenly,\n\n469\n00:27:00.682 --> 00:27:04.092\nmischievously get ahold of\na recovery agent certificate.\n\n470\n00:27:04.092 --> 00:27:06.207\nI'm gonna require approval on that.\n\n471\n00:27:06.207 --> 00:27:10.883\nThen I'm gonna go to the Security tab and\nI'm gonna click Add and\n\n472\n00:27:10.883 --> 00:27:14.527\nI've gotta add that EFS\nrecovery agent account.\n\n473\n00:27:14.527 --> 00:27:17.492\nAll right, there, that one we\njust created in Active Directory.\n\n474\n00:27:17.492 --> 00:27:22.516\nAnd I wanna give that account\nenroll permissions, all right?\n\n475\n00:27:22.516 --> 00:27:25.823\nAnd then I'm gonna click OK.\n\n476\n00:27:25.823 --> 00:27:30.836\nAll right, so now I have this new\ntemplate for Lab EFS Recovery Agent.\n\n477\n00:27:30.836 --> 00:27:33.909\nI go back out to my cert serve console and\n\n478\n00:27:33.909 --> 00:27:39.045\nI let my cert serve know that it\ncan now issue those certificates.\n\n479\n00:27:39.045 --> 00:27:44.270\nI'm gonna find that one,\nLab EFS Recovery Agent,\n\n480\n00:27:44.270 --> 00:27:49.385\nI'll click OK and\nthat should show up in the list.\n\n481\n00:27:49.385 --> 00:27:51.877\nNow I need to,\nyou know what I almost did, Wes?\n\n482\n00:27:51.877 --> 00:27:52.957\nI forgot something here.\n\n483\n00:27:52.957 --> 00:27:57.044\nLet's go back into those templates, gonna\nmanage, actually, I had it open already.\n\n484\n00:27:57.044 --> 00:28:02.519\nOne thing I almost forgot to do\nis you really want to publish\n\n485\n00:28:02.519 --> 00:28:08.233\nthis guy in Active Directory,\nso let's find that guy here.\n\n486\n00:28:08.233 --> 00:28:12.220\nGo back over to General and I want you\nto publish this in Active Directory.\n\n487\n00:28:12.220 --> 00:28:16.407\nIt's gonna make it a lot easier,\nwhen we go to assign this in group policy,\n\n488\n00:28:16.407 --> 00:28:18.612\nto find that certificate, all right?\n\n489\n00:28:18.612 --> 00:28:21.545\nSo I'll click OK, so publish\nthe certificate in Active Directory.\n\n490\n00:28:21.545 --> 00:28:25.573\nNow I do that on the template properties,\nthen I can go back out here and\n\n491\n00:28:25.573 --> 00:28:27.497\nit's still listed right there.\n\n492\n00:28:27.497 --> 00:28:30.633\nAll right, next thing I need to do\nis actually issue that certificate.\n\n493\n00:28:30.633 --> 00:28:36.070\nSo I'm gonna go to my Windows 10 box and\nI'm going to sign out as the admin.\n\n494\n00:28:37.570 --> 00:28:41.533\nAnd I'm gonna log in with that\nnew account we just created, EFS,\n\n495\n00:28:41.533 --> 00:28:43.060\nsuper secret password.\n\n496\n00:28:46.403 --> 00:28:48.963\nIt's gonna build my profile, cuz I\nhaven't logged on to this one before.\n\n497\n00:28:48.963 --> 00:28:50.945\nAnd I'm simply gonna\nrequest that certificate.\n\n498\n00:28:50.945 --> 00:28:53.395\nAnd because I set those permissions,\n\n499\n00:28:53.395 --> 00:28:57.880\nit should show up in my list of\navailable certificates to request.\n\n500\n00:28:57.880 --> 00:29:00.460\n&gt;&gt; And Mike, it looks like\nWindows 10 makes you very happy.\n\n501\n00:29:00.460 --> 00:29:03.060\n&gt;&gt; It is such a pleasant operating system,\nisn't it?\n\n502\n00:29:03.060 --> 00:29:03.610\nLet's start.\n\n503\n00:29:05.460 --> 00:29:06.950\nAll right, so once we get logged in here,\n\n504\n00:29:06.950 --> 00:29:09.840\nwe're gonna create an MMC,\na Microsoft Management Console.\n\n505\n00:29:09.840 --> 00:29:11.330\nI could also go to that webpage, but\n\n506\n00:29:11.330 --> 00:29:15.710\nI just find this way a little\nbit easier to work with.\n\n507\n00:29:15.710 --> 00:29:19.840\nThere's some quirks with that webpage,\nespecially nowadays.\n\n508\n00:29:19.840 --> 00:29:22.190\nI don't care about you, VMWare.\n\n509\n00:29:22.190 --> 00:29:24.159\nAll right, so I'll add my certificates.\n\n510\n00:29:25.200 --> 00:29:28.370\nGo down to Personal, and\nI do have one certificate already.\n\n511\n00:29:28.370 --> 00:29:32.350\nBut notice that's the actual\nencrypting certificate,\n\n512\n00:29:32.350 --> 00:29:35.370\nright, that was issued automatically,\nthat we set up the auto-enrollment.\n\n513\n00:29:35.370 --> 00:29:39.240\nThat allows me to create encrypted files,\nnot recover encrypted files.\n\n514\n00:29:39.240 --> 00:29:47.170\nSo I'm gonna right-click &gt; All tasks &gt;\nRequest new certificate &gt; Next &gt; Next.\n\n515\n00:29:47.170 --> 00:29:51.125\nAnd sure enough, there's my Lab EFS\nrecovery agent certificate.\n\n516\n00:29:51.125 --> 00:29:54.852\nI will chose to Enroll and\nit says enrollment pending,\n\n517\n00:29:54.852 --> 00:29:56.561\nif we can see that there.\n\n518\n00:29:56.561 --> 00:29:58.261\nIt doesn't say success.\n\n519\n00:29:58.261 --> 00:30:01.700\nAnd that's because we checked that\nlittle checkmark require approval.\n\n520\n00:30:01.700 --> 00:30:05.100\nSo I'll click Finish and\nI'll flip back over to my CA.\n\n521\n00:30:07.150 --> 00:30:10.119\nLook at pending requests and there it is.\n\n522\n00:30:10.119 --> 00:30:13.560\nSo now I have the option to look and\nsay, okay, Mr.\n\n523\n00:30:13.560 --> 00:30:18.301\nEFS is requesting a certificate with\nthe purposes of recovery agent.\n\n524\n00:30:18.301 --> 00:30:20.120\nDo I wanna issue that?\n\n525\n00:30:20.120 --> 00:30:26.059\nIf I decide yes, I right-click\nAll tasks and issue disappears.\n\n526\n00:30:26.059 --> 00:30:30.177\nNow, it's not gonna show up over here.\n\n527\n00:30:30.177 --> 00:30:32.523\nWhoops, if I can refresh this guy.\n\n528\n00:30:32.523 --> 00:30:37.436\nAll right, it doesn't, actually, did it?\n\n529\n00:30:37.436 --> 00:30:39.580\nYeah, that's my username.\n\n530\n00:30:39.580 --> 00:30:42.400\nI used some really confusing names here,\nthat probably wasn't the best.\n\n531\n00:30:42.400 --> 00:30:45.770\nThis is just the normal\nuser EFS certificate.\n\n532\n00:30:45.770 --> 00:30:48.790\nThe one for\nfile recovery doesn't show up here.\n\n533\n00:30:48.790 --> 00:30:52.810\nI don't want that getting installed\non the machine I'm logged on as.\n\n534\n00:30:52.810 --> 00:30:55.597\nBecause that key, if somebody\ncould possibly get a hold of it,\n\n535\n00:30:55.597 --> 00:30:57.450\nthey can decrypt any file in the network.\n\n536\n00:30:57.450 --> 00:30:58.780\nSo, we wanna make sure that's safe.\n\n537\n00:30:58.780 --> 00:31:02.652\nNormally what happens is we\nexport that to a thumb drive.\n\n538\n00:31:02.652 --> 00:31:06.492\nAnd then the recovery agent, when they\nneed to recover a file, they take their\n\n539\n00:31:06.492 --> 00:31:10.635\nthumb drive to a machine, they install\ntheir certificate, they recover the file.\n\n540\n00:31:10.635 --> 00:31:12.924\nAnd then they delete their\ncertificate off of that machine.\n\n541\n00:31:12.924 --> 00:31:14.677\nSo, there's no trace of it left on there.\n\n542\n00:31:14.677 --> 00:31:17.365\nAll right, it's a very protected key.\n\n543\n00:31:17.365 --> 00:31:21.154\nBut now that the user account\nhas that certificate issued,\n\n544\n00:31:21.154 --> 00:31:24.963\nwe should be able to assign them\nthe role of recovery agent.\n\n545\n00:31:24.963 --> 00:31:29.027\nSo we're gonna go into Group Policy and\n\n546\n00:31:29.027 --> 00:31:34.460\nwe're gonna find our\ndefault domain policy.\n\n547\n00:31:34.460 --> 00:31:39.539\nAnd we're gonna navigate our way down\ninto Computer Configuration &gt; Policies\n\n548\n00:31:39.539 --> 00:31:44.480\n&gt; Window settings &gt; security settings\n&gt; public key policies &gt; EFS.\n\n549\n00:31:44.480 --> 00:31:46.120\nAnd there, again, is those two accounts.\n\n550\n00:31:46.120 --> 00:31:51.570\nAnd so this time, we should be able to\nright-click, Add data recovery agent.\n\n551\n00:31:51.570 --> 00:31:53.179\nWe'll click Next.\nWe'll browse and\n\n552\n00:31:53.179 --> 00:31:57.117\nwe'll find our EFS account,\nthe one we made.\n\n553\n00:31:57.117 --> 00:32:00.104\nAnd there they are, and we'll click okay.\n\n554\n00:32:00.104 --> 00:32:04.695\nAnd it says, yes, I found that this\naccount does have a certificate that can\n\n555\n00:32:04.695 --> 00:32:07.230\nbe used for recovering encrypted files.\n\n556\n00:32:07.230 --> 00:32:10.465\nI click okay, and then next.\n\n557\n00:32:10.465 --> 00:32:11.758\nAnd then finish.\n\n558\n00:32:11.758 --> 00:32:16.257\nAnd now we have our new recovery agent\nlisted there in our EFS node of our\n\n559\n00:32:16.257 --> 00:32:17.695\ngroup policy.\n\n560\n00:32:17.695 --> 00:32:23.345\nNow what I would do in the real world if\nwe had time to take this a few more steps,\n\n561\n00:32:23.345 --> 00:32:25.700\nI would remove these two, right?\n\n562\n00:32:25.700 --> 00:32:28.180\nIn fact I'm going to go ahead and\nremove them from here.\n\n563\n00:32:28.180 --> 00:32:31.150\nBut I will tell you that in the real\nworld, the first thing I would do,\n\n564\n00:32:31.150 --> 00:32:33.190\nall tasks export.\n\n565\n00:32:33.190 --> 00:32:35.180\nI would back up these keys.\n\n566\n00:32:35.180 --> 00:32:37.280\nBecause here's what happens.\n\n567\n00:32:37.280 --> 00:32:41.500\nWhoever the recovery agent is\nat the time of encryption.\n\n568\n00:32:41.500 --> 00:32:44.430\nIs the one that's listed as\nthe recovery agent on the file.\n\n569\n00:32:44.430 --> 00:32:50.240\nSo files that were encrypted before I did\nthis are listed as the administrator.\n\n570\n00:32:50.240 --> 00:32:52.810\nThe EFS recovery agent won't\nbe able to recover them,\n\n571\n00:32:52.810 --> 00:32:55.300\nbecause he's not the recovery\nagent on those files.\n\n572\n00:32:55.300 --> 00:33:00.160\nIn order to update it to the new recovery\nagent, the file has to at least be opened.\n\n573\n00:33:00.160 --> 00:33:04.880\nSo if Wes had encrypted files a week ago\nand now I've changed the recovery agent.\n\n574\n00:33:04.880 --> 00:33:07.440\nWhat Wes needs to do is open those files.\n\n575\n00:33:07.440 --> 00:33:09.040\nHe could decrypt them and\nencrypt them again.\n\n576\n00:33:09.040 --> 00:33:10.710\nBut really just opening them up and\n\n577\n00:33:10.710 --> 00:33:13.650\nthen closing them will\nupdate the recovery agent.\n\n578\n00:33:13.650 --> 00:33:17.950\nAnd if I tell all my users hey go out and\nopen up all your encrypted files at least\n\n579\n00:33:17.950 --> 00:33:22.160\nonce and close them to update the recovery\nagent, they're gonna miss a few alright.\n\n580\n00:33:22.160 --> 00:33:25.210\nThey're gonna forget they encrypted that\nfile, they're not gonna pay any attention\n\n581\n00:33:25.210 --> 00:33:29.030\nto me and if I delete these certificates\nthere's no more recovery agent.\n\n582\n00:33:29.030 --> 00:33:32.480\nAnd now if they lose their private\nkey I won't be able to recover so in\n\n583\n00:33:32.480 --> 00:33:37.670\nthe real world don't do this, don't delete\nthem without exporting the certificate.\n\n584\n00:33:37.670 --> 00:33:39.720\nAnd the private key first.\n\n585\n00:33:40.820 --> 00:33:43.280\nAll right, now we do need to test\nthis out and make sure it works.\n\n586\n00:33:43.280 --> 00:33:47.470\nSo we're gonna flip back\nover to our Windows machine.\n\n587\n00:33:48.740 --> 00:33:50.470\nI'm gonna close this console for now.\n\n588\n00:33:51.480 --> 00:33:52.850\nYou know what, Wes, I tell you what.\n\n589\n00:33:52.850 --> 00:33:54.910\nI know we're short on time and\nthis is gonna take a little bit.\n\n590\n00:33:54.910 --> 00:33:56.060\nI don't wanna rush through this.\n\n591\n00:33:56.060 --> 00:34:00.150\nI wanna show you how this works, and we're\ngonna have to go in and encrypt a file,\n\n592\n00:34:00.150 --> 00:34:02.000\ndelete a key, try to recover it.\n\n593\n00:34:02.000 --> 00:34:04.600\nSo how about we just save it for\nthe next part.\n\n594\n00:34:04.600 --> 00:34:06.625\n&gt;&gt; Mike we've got the technology,\nwe can build it.\n\n595\n00:34:06.625 --> 00:34:07.620\n&gt;&gt; [LAUGH]\n&gt;&gt; We can do that, right?\n\n596\n00:34:07.620 --> 00:34:09.870\nAnd we don't want him to flex\nthe muscles of the clock too much.\n\n597\n00:34:09.870 --> 00:34:13.570\nSo let's go ahead and do that, and\ngive you guys a chance to well,\n\n598\n00:34:13.570 --> 00:34:15.660\nput this one on pause,\nrewind it if you have to.\n\n599\n00:34:15.660 --> 00:34:18.085\nIt's funny I say rewind,\nhow about scrub backwards, right?\n\n600\n00:34:18.085 --> 00:34:19.580\n&gt;&gt; [LAUGH]\n&gt;&gt; Do we even rewind anymore?\n\n601\n00:34:19.580 --> 00:34:21.980\nBut that's enough for\nthis one here Mike and\n\n602\n00:34:21.980 --> 00:34:24.230\nit's been a lot of great information and\nas always,\n\n603\n00:34:24.230 --> 00:34:27.940\nwe appreciate having you here and\nwe appreciate you the viewers watching.\n\n604\n00:34:27.940 --> 00:34:29.470\nRemember, you're the reason we're here.\n\n605\n00:34:29.470 --> 00:34:31.490\nLook forward seeing you in the next part.\n\n606\n00:34:31.490 --> 00:34:34.180\nSigning out for IT Pro TV,\nI've been your host Wes Brian.\n\n607\n00:34:34.180 --> 00:34:35.130\n&gt;&gt; And I'm Mike Rodrick.\n\n608\n00:34:35.130 --> 00:34:37.503\n&gt;&gt; And we'll see you next time.\n\n609\n00:34:37.503 --> 00:34:43.502\n[MUSIC]\n\n610\n00:34:43.502 --> 00:34:47.258\nThank you for watching ITPRO.TV\n\n",
          "vimeoId": "224316131"
        },
        {
          "description": "In this episode, Wes and Mike continue their discussion on concepts surrounding the implementation and management of certification within a CA infrastructure. They move through EFS recovery agents then into key recovery agents or KRAâ€™s as well as the process of setting up a KRAâ€™s and demonstrate key archival and recovery.",
          "length": "2488",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-3-implement_and_manage_certificates_pt3-062917-PGM.00_41_11_13.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-3-implement_and_manage_certificates_pt3-062917-PGM.00_41_11_13.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/microsoft-server70414-4-3-3-implement_and_manage_certificates_pt3-062917-PGM.00_41_11_13.Still001-sm.jpg",
          "title": "Implement and Manage Certificates Part 3",
          "transcript": "",
          "vimeoId": "224315746"
        },
        {
          "description": "In this episode, Daniel and Adam take you through implementing Federated Identity services. Here they start by discussing the planning steps for standing up an ADFS server, a Federation Server Proxy, and High Availability(HA). They also discuss the other key components like Federation Server Certificates and Federation Server Farms.",
          "length": "2052",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-1-implementing_federated_identity-041217-PGM.00_00_11_22.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-1-implementing_federated_identity-041217-PGM.00_00_11_22.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-1-implementing_federated_identity-041217-PGM.00_00_11_22.Still001-sm.jpg",
          "title": "Implementing Federated Identity",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.289\nWelcome to ITProTV.\n\n2\n00:00:01.289 --> 00:00:06.795\nI'm your host-\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:06.795 --> 00:00:08.623\n[MUSIC]\n\n4\n00:00:08.623 --> 00:00:11.738\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.738 --> 00:00:13.498\n&gt;&gt; All right, greetings, everyone.\n\n6\n00:00:13.498 --> 00:00:16.060\nAnd welcome to another\ngreat episode of ITProTV.\n\n7\n00:00:16.060 --> 00:00:18.043\nI'm your host, Daniel Lowrie.\n\n8\n00:00:18.043 --> 00:00:21.079\nAnd in today's episode we\nare coming at you with,\n\n9\n00:00:21.079 --> 00:00:23.406\nwell, it's an MCSE series, right?\n\n10\n00:00:23.406 --> 00:00:26.926\nThe good old MCSE Microsoft Server 2012.\n\n11\n00:00:26.926 --> 00:00:29.134\nI don't know what revision, R2?\n\n12\n00:00:29.134 --> 00:00:30.334\nMaybe that's in there.\n\n13\n00:00:30.334 --> 00:00:31.689\n&gt;&gt; It is R2.\n\n14\n00:00:31.689 --> 00:00:32.917\nActually updated for R2.\n\n15\n00:00:32.917 --> 00:00:33.796\n&gt;&gt; That's excellent stuff.\n\n16\n00:00:33.796 --> 00:00:36.563\nWe're actually diving into\nsome advanced server features.\n\n17\n00:00:36.563 --> 00:00:41.108\nThis is for the 70-414 exam,\nif you're following along in your guides.\n\n18\n00:00:41.108 --> 00:00:44.353\nAnd joining us in the studio today\nis our good friend, Mr Adam Gordon.\n\n19\n00:00:44.353 --> 00:00:45.282\nAdam, welcome, sir.\n\n20\n00:00:45.282 --> 00:00:46.060\nHow's it going today?\n\n21\n00:00:46.060 --> 00:00:46.980\n&gt;&gt; I'm feeling federated today.\n\n22\n00:00:46.980 --> 00:00:48.024\n&gt;&gt; You're feeling federated.\n\n23\n00:00:48.024 --> 00:00:51.340\n&gt;&gt; I'm gonna be feeling\nrights managed later.\n\n24\n00:00:51.340 --> 00:00:53.060\nBut today I'm feeling federated.\n\n25\n00:00:53.060 --> 00:00:54.079\nSo it is going well.\n\n26\n00:00:54.079 --> 00:00:55.670\nHopefully it's going well for all of you.\n\n27\n00:00:55.670 --> 00:00:58.691\nIf you are joining us, and\nhopefully you will be at some point,\n\n28\n00:00:58.691 --> 00:01:02.289\nyou are most likely on your way towards\nfinishing up your MCSE Server 12.\n\n29\n00:01:02.289 --> 00:01:05.864\nOr maybe you are not doing that, but\nyou just wanna get a handle on some of\n\n30\n00:01:05.864 --> 00:01:09.637\nthe more advanced topics that we,\nDaniel and I, are gonna be discussing.\n\n31\n00:01:09.637 --> 00:01:13.048\nWe're gonna be talking about federation,\nAD Federation Services,\n\n32\n00:01:13.048 --> 00:01:16.590\nhow to implement a federated identity\nsolution in this set of episodes.\n\n33\n00:01:16.590 --> 00:01:18.082\nGot a cool little demo coming up for\n\n34\n00:01:18.082 --> 00:01:20.616\nyou a little bit later on that\nyou'll wanna take a look at.\n\n35\n00:01:20.616 --> 00:01:23.141\nWe're gonna walk you through\nhow to establish and\n\n36\n00:01:23.141 --> 00:01:26.920\nset up Federation Services in\nServer 2012 R2, as you said.\n\n37\n00:01:26.920 --> 00:01:31.487\nAnd we'll take a look at claims\nproviders and identity in the cloud,\n\n38\n00:01:31.487 --> 00:01:35.123\nhow we sync and\nset up discussions with Office 365.\n\n39\n00:01:35.123 --> 00:01:40.465\nWhat a web app proxy is gonna be for\nfederation, what relying parties are.\n\n40\n00:01:40.465 --> 00:01:42.979\nWhat our perimeter and\ncorporate networks will look like,\n\n41\n00:01:42.979 --> 00:01:44.947\nwhat our claims provider\nattribute store is.\n\n42\n00:01:44.947 --> 00:01:48.948\nWe're gonna go through all the different\nparts and all the moving items that we\n\n43\n00:01:48.948 --> 00:01:53.135\nhave to kind of account for and be aware\nof as we walk through this solution.\n\n44\n00:01:53.135 --> 00:01:56.115\nAlong the way we'll talk about some\nthings, show you some pictures,\n\n45\n00:01:56.115 --> 00:01:57.495\nexplain some concepts.\n\n46\n00:01:57.495 --> 00:01:59.645\nAnd hopefully have a little bit\nof fun while we're doing that.\n\n47\n00:01:59.645 --> 00:02:02.818\nSo to that end, why don't we\nstart just by, at a high level.\n\n48\n00:02:02.818 --> 00:02:07.877\nBefore we get into all the architecture\nand how things work and the multi-step\n\n49\n00:02:07.877 --> 00:02:13.400\nprocess, let's just talk for a little\nbit about federation at a general level.\n\n50\n00:02:13.400 --> 00:02:18.520\nThe idea of federation,\nthe idea of extending trust between\n\n51\n00:02:18.520 --> 00:02:21.260\nparties that may or\nmay not have anything in common, or\n\n52\n00:02:21.260 --> 00:02:24.040\nat least if they have something\nin common we have to establish\n\n53\n00:02:24.040 --> 00:02:28.150\nhow to authenticate what that is and\ncommunicate it in a way that allows us to\n\n54\n00:02:28.150 --> 00:02:32.090\nverify that we have those things in\ncommon, is what federation is about.\n\n55\n00:02:32.090 --> 00:02:36.050\nWe talk about federation in\nthe Windows world by talking about and\n\n56\n00:02:36.050 --> 00:02:40.470\nimplementing the Active Directory\nFederation Services, or ADFS, role.\n\n57\n00:02:40.470 --> 00:02:42.630\nSo this is a role that\nyou would install and\n\n58\n00:02:42.630 --> 00:02:45.674\nconfigure from the Server Manager\non one or more systems.\n\n59\n00:02:45.674 --> 00:02:48.740\nThese will be domain joined\nsystems traditionally.\n\n60\n00:02:48.740 --> 00:02:51.670\nAlthough the proxy function\nthat sits out in the perimeter\n\n61\n00:02:51.670 --> 00:02:54.505\nto accept inbound requests\nfrom external parties and\n\n62\n00:02:54.505 --> 00:02:57.555\nthen relay them inbound will not\nbe domain joined traditionally.\n\n63\n00:02:57.555 --> 00:02:58.905\nBut everything else will be.\n\n64\n00:02:58.905 --> 00:03:00.575\nSo all the federation servers will be.\n\n65\n00:03:00.575 --> 00:03:04.427\nBut the proxy server, or proxy service\nfederation service, depending on which\n\n66\n00:03:04.427 --> 00:03:07.955\nversion of Windows you're using,\nwill typically not be domain joined.\n\n67\n00:03:07.955 --> 00:03:09.635\nSo we'll talk about the differences there.\n\n68\n00:03:09.635 --> 00:03:12.395\nBut this is an identity access\nsolution at the end of the day.\n\n69\n00:03:13.520 --> 00:03:15.167\nDan, you're going to help me with\nsomething here, if you don't mind.\n\n70\n00:03:15.167 --> 00:03:15.690\nCuz I know you're always up for\na challenge.\n\n71\n00:03:15.690 --> 00:03:17.144\n&gt;&gt; Give my best.\n\n72\n00:03:17.144 --> 00:03:22.450\n&gt;&gt; So when you and I talk about trust and\nwhen we think about how interaction\n\n73\n00:03:22.450 --> 00:03:28.480\namong parties is going to be represented,\nI can say that I trust Daniel, right?\n\n74\n00:03:28.480 --> 00:03:34.180\nSo if I trust Daniel, I imply that he\ncan have access maybe to my laptop and\n\n75\n00:03:34.180 --> 00:03:36.280\nlook up notes, or he can copy something.\n\n76\n00:03:36.280 --> 00:03:37.579\nWho knows what, whatever he needs to do.\n\n77\n00:03:37.579 --> 00:03:40.170\nAnd if he says, okay, Adam,\nno problem, you trust me.\n\n78\n00:03:40.170 --> 00:03:40.960\nThat's great.\n\n79\n00:03:40.960 --> 00:03:42.660\nI trust you, right?\n\n80\n00:03:42.660 --> 00:03:44.280\nAnd you can essentially do the same thing.\n\n81\n00:03:44.280 --> 00:03:47.700\nSo why don't you just give me a thumb\ndrive and transfer the notes and\n\n82\n00:03:47.700 --> 00:03:50.420\nI'll trust that you're gonna not put\nany malware or anything on there?\n\n83\n00:03:50.420 --> 00:03:52.983\nCuz this is not a security program, so\nwe're not gonna do that stuff here.\n\n84\n00:03:52.983 --> 00:03:55.138\nIf it was a security program like\nethical hacking or something, boy,\n\n85\n00:03:55.138 --> 00:03:56.244\nyou better watch out then, right?\n\n86\n00:03:56.244 --> 00:03:58.105\n&gt;&gt; That'd be a slap on\nthe wrist right there.\n\n87\n00:03:58.105 --> 00:03:58.855\n&gt;&gt; That would be bad.\n\n88\n00:03:58.855 --> 00:04:02.535\nBut if we trust each\nother then we're implying\n\n89\n00:04:02.535 --> 00:04:04.045\nthat certain activities are allowed.\n\n90\n00:04:04.045 --> 00:04:06.955\nBecause we have knowledge of and\n\n91\n00:04:06.955 --> 00:04:09.705\nunderstanding of the person\nengaging in them.\n\n92\n00:04:09.705 --> 00:04:13.565\nAnd we are relying on the fact that\nthat person will do the right thing and\n\n93\n00:04:13.565 --> 00:04:16.210\nprovide correct or accurate information.\n\n94\n00:04:16.210 --> 00:04:18.160\nAnd hopefully not get up to no good or\n\n95\n00:04:18.160 --> 00:04:21.160\nin anyway screw something up, for\nlack of a better way of putting it, right?\n\n96\n00:04:21.160 --> 00:04:22.800\nSo trust is important.\n\n97\n00:04:22.800 --> 00:04:26.170\nAnd in the real world we talk about,\nyou've to earn my trust and\n\n98\n00:04:26.170 --> 00:04:26.720\nall this stuff.\n\n99\n00:04:26.720 --> 00:04:27.412\nAnd that's all good.\n\n100\n00:04:27.412 --> 00:04:31.774\nBut in our world here, what we're talking\nabout is the fact that trust is going to\n\n101\n00:04:31.774 --> 00:04:35.640\nnot be something that we take for\ngranted, but that we verify, right?\n\n102\n00:04:35.640 --> 00:04:41.180\nIt's implied, but it's only implied\nas far as we go until we verify.\n\n103\n00:04:41.180 --> 00:04:44.260\nAnd unless Daniel says, Adam,\nI trust you, but guess what?\n\n104\n00:04:44.260 --> 00:04:46.817\nYou gotta validate for\nme that you're really who you say you are.\n\n105\n00:04:46.817 --> 00:04:52.628\nDo you have your ITProTV ID or\nbadge that can verify who you are?\n\n106\n00:04:52.628 --> 00:04:58.164\nDo you have some sort of token that I\ncan validate against to represent and\n\n107\n00:04:58.164 --> 00:05:02.000\nverify that that's actually\nregistered to you?\n\n108\n00:05:02.000 --> 00:05:03.710\nDo you have claims?\n\n109\n00:05:03.710 --> 00:05:06.880\nCan you validate that you are who you\nsay you are based on the fact that\n\n110\n00:05:06.880 --> 00:05:09.493\nyou're a long-haired guy with a beard and\nearrings and\n\n111\n00:05:09.493 --> 00:05:11.007\nyou got a bunch of bracelets on?\n\n112\n00:05:11.007 --> 00:05:12.685\nAnd there should be 12 bracelets.\n\n113\n00:05:12.685 --> 00:05:14.568\nCan I count them all and\nverify that works?\n\n114\n00:05:14.568 --> 00:05:16.010\nOr whatever the case may be.\n\n115\n00:05:16.010 --> 00:05:17.199\n&gt;&gt; That's really Cherokee with a beard.\n\n116\n00:05:17.199 --> 00:05:19.020\n[LAUGH]\n&gt;&gt; No,\n\n117\n00:05:19.020 --> 00:05:20.640\nshe's a lot better looking than I am,\nright?\n\n118\n00:05:20.640 --> 00:05:22.390\nEven with a beard,\nI don't think that would be me.\n\n119\n00:05:22.390 --> 00:05:25.650\nI'm shorter than she is and\nshe's got better hair, right?\n\n120\n00:05:25.650 --> 00:05:27.780\nAnd more of it on top as well, so.\n\n121\n00:05:27.780 --> 00:05:32.110\nBut the reality is you would have\nto not take for granted, right,\n\n122\n00:05:32.110 --> 00:05:33.617\nwho I am and what I say.\n\n123\n00:05:33.617 --> 00:05:35.070\nBut you will be a little skeptical.\n\n124\n00:05:35.070 --> 00:05:36.811\nWe talk about trust but verify.\n\n125\n00:05:36.811 --> 00:05:38.998\n&gt;&gt; I trust you once I know it's you.\n\n126\n00:05:38.998 --> 00:05:40.632\n&gt;&gt; No, you can only trust\nme as far as you throw me.\n\n127\n00:05:40.632 --> 00:05:41.510\nThat's what you should say, right?\n\n128\n00:05:41.510 --> 00:05:43.020\nSo you trust me once you know it's me.\n\n129\n00:05:43.020 --> 00:05:44.300\nThat's a good way of thinking about it.\n\n130\n00:05:44.300 --> 00:05:45.931\nBut you have to verify the trust, right?\n\n131\n00:05:45.931 --> 00:05:48.810\nIn other words, you don't take for\ngranted that I really am who I say I am.\n\n132\n00:05:48.810 --> 00:05:53.472\nNow, this is a little bit different than\nhow we manage trust inside of the LDAP\n\n133\n00:05:53.472 --> 00:05:55.420\ndomain with our LDAP provider.\n\n134\n00:05:55.420 --> 00:06:00.043\nIn other words, inside our domain,\ninside our tree, or trees,\n\n135\n00:06:00.043 --> 00:06:05.930\ninside our forest in the Active Directory\nnamespace, we take for granted trust.\n\n136\n00:06:05.930 --> 00:06:10.940\nIn the sense that when a user\nauthenticates, validates who they are and\n\n137\n00:06:10.940 --> 00:06:14.280\nthen is able to prove their identity.\n\n138\n00:06:14.280 --> 00:06:15.280\nWe always authenticate.\n\n139\n00:06:15.280 --> 00:06:16.587\nI'm not saying we don't do that.\n\n140\n00:06:16.587 --> 00:06:20.447\nBut what I'm suggesting is that once\nwe've done that, we have what are called\n\n141\n00:06:20.447 --> 00:06:24.018\ntransitive trusts, right,\nmore often than not in Windows these days.\n\n142\n00:06:24.018 --> 00:06:28.190\nAnd for many generations, going back\nto Windows 2000, as a matter of fact.\n\n143\n00:06:28.190 --> 00:06:29.817\nI long for the old days,\nby the way, right?\n\n144\n00:06:29.817 --> 00:06:34.326\nThe prior LDAP directory based domain\ndays where we had the Active Directory as\n\n145\n00:06:34.326 --> 00:06:39.270\na thing of essentially the new millenium,\nliterally Windows 2000 and forward.\n\n146\n00:06:39.270 --> 00:06:41.320\nThank you, Novell, by the way,\nfor borrowing that and\n\n147\n00:06:41.320 --> 00:06:42.560\nallowing us to use that.\n\n148\n00:06:42.560 --> 00:06:46.390\nBut the reality is, ultimately, in\nthe old days, in NT 4, and NT 3.5, 3.51,\n\n149\n00:06:46.390 --> 00:06:53.230\nwe didn't have this idea of a distributed\nhierarchy for directory services.\n\n150\n00:06:53.230 --> 00:06:55.710\nWe had a domain, but it was a flat model.\n\n151\n00:06:55.710 --> 00:06:58.358\nAnd you had read-only domain controllers\nand primary domain controllers.\n\n152\n00:06:58.358 --> 00:07:02.200\nHad primary domain controllers and\nbackup domain controllers, PDCs and BDCs.\n\n153\n00:07:02.200 --> 00:07:05.730\nAnd we had users that would\nbe created in the domain.\n\n154\n00:07:05.730 --> 00:07:09.410\nAnd you would manually establish trust\nrelationships between those domains,\n\n155\n00:07:09.410 --> 00:07:10.650\none or two-way trust.\n\n156\n00:07:10.650 --> 00:07:13.490\nBut they were not transitive\nthe same way they are now,\n\n157\n00:07:13.490 --> 00:07:18.630\nestablished automatically and\nimplied that members of this domain\n\n158\n00:07:18.630 --> 00:07:23.530\nsitting down here and this domain\nover here joined together by a tree,\n\n159\n00:07:23.530 --> 00:07:26.740\nor multiple trees in a forest,\nwould be able to trust each other.\n\n160\n00:07:26.740 --> 00:07:30.328\nBecause they're all members\nof a common hierarchy.\n\n161\n00:07:30.328 --> 00:07:33.820\nThey share the same, or\nultimately the same, schema and\n\n162\n00:07:33.820 --> 00:07:37.990\nare authenticated against the same\nset of assumptions and claims.\n\n163\n00:07:37.990 --> 00:07:42.326\nSo it's a little bit different when we're\noutside of that architecture looking in.\n\n164\n00:07:42.326 --> 00:07:46.390\nAnd this is what Federation Services\nprovides us the overview to deal with.\n\n165\n00:07:46.390 --> 00:07:50.145\nBecause it adds in the mechanisms and\nthe tools necessary to extend\n\n166\n00:07:50.145 --> 00:07:53.844\nthat thought process of trust\nbeyond the boundary of the forest.\n\n167\n00:07:53.844 --> 00:07:58.045\nAnd allow us to invite others\nin to then take advantage of or\n\n168\n00:07:58.045 --> 00:08:01.752\nsit at the table with us and\nto share our resources.\n\n169\n00:08:01.752 --> 00:08:03.587\nAt least that's what I'm\ngoing with anyway [CROSSTALK]\n\n170\n00:08:03.587 --> 00:08:04.364\n&gt;&gt; Yeah, we'll leave it there.\n\n171\n00:08:04.364 --> 00:08:05.771\n[LAUGH]\n&gt;&gt; If you like that it's good,\n\n172\n00:08:05.771 --> 00:08:06.880\nif not I'm still going with that anyway.\n\n173\n00:08:06.880 --> 00:08:08.830\nBut what are the standards we use for\nthis?\n\n174\n00:08:08.830 --> 00:08:14.380\nWe use SAML as one of the thought\nprocesses around identity providers.\n\n175\n00:08:14.380 --> 00:08:19.010\nSecurity Assertion Markup Language,\nstandard solution we see globally today.\n\n176\n00:08:19.010 --> 00:08:23.675\nWe use what else, WS-Federation or\nWeb Services Federation, or\n\n177\n00:08:23.675 --> 00:08:27.490\njust web services\nauthentication generically.\n\n178\n00:08:27.490 --> 00:08:30.400\nSo we're using open model standards,\nright.\n\n179\n00:08:30.400 --> 00:08:34.320\nMicrosoft has really extended their\nthought process around federation\n\n180\n00:08:34.320 --> 00:08:38.700\nto incorporate all of the standards out\nin the industry today and use them or\n\n181\n00:08:38.700 --> 00:08:42.740\nallow them to be used to backfill\nour own processes and bring them in.\n\n182\n00:08:42.740 --> 00:08:45.400\nBecause we may be extending\nthrough federation,\n\n183\n00:08:45.400 --> 00:08:48.950\ntrust to other Windows based\ndirectories in other companies.\n\n184\n00:08:48.950 --> 00:08:52.190\nMaybe there's a merger and acquisition\ngoing on and we're buying somebody,\n\n185\n00:08:52.190 --> 00:08:53.610\nsomebody's buying us.\n\n186\n00:08:53.610 --> 00:08:57.590\nAnd they wanna be able to incorporate,\nthis is what's traditionally done\n\n187\n00:08:57.590 --> 00:09:00.910\nto allocate then ultimately\ntake over that infrastructure.\n\n188\n00:09:00.910 --> 00:09:04.400\nWe may be partnering with a vendor or\na third party entity.\n\n189\n00:09:04.400 --> 00:09:09.120\nIt's gonna extend our capabilities\nby providing outsource services or\n\n190\n00:09:09.120 --> 00:09:10.090\nwho knows what.\n\n191\n00:09:10.090 --> 00:09:11.591\nAnd they may or\nmay not be Windows based, right?\n\n192\n00:09:11.591 --> 00:09:14.570\nSo we may be using other\nsystems to authenticate them.\n\n193\n00:09:14.570 --> 00:09:19.420\nSo the use of SAML,\nthe use of Windows services or, excuse me,\n\n194\n00:09:19.420 --> 00:09:24.060\nWeb Services Federation, or these kind\nof standards, ping identity, etc.\n\n195\n00:09:24.060 --> 00:09:27.340\nThis is gonna be important for us\nbecause this is what's going to allow us\n\n196\n00:09:27.340 --> 00:09:29.930\nto extend our trust and\nour capabilities out.\n\n197\n00:09:29.930 --> 00:09:34.030\nAnd we are gonna be able to manage our\nown identities in our own organization,\n\n198\n00:09:34.030 --> 00:09:37.350\nhave the other organization, the partner\norganization as we refer to it as.\n\n199\n00:09:37.350 --> 00:09:38.800\nManage their identities.\n\n200\n00:09:38.800 --> 00:09:42.441\nHave federation services running\nthat will allow us to access and\n\n201\n00:09:42.441 --> 00:09:45.959\ninteract with both and\nvalidate both going across the divide.\n\n202\n00:09:45.959 --> 00:09:49.426\nWhich will then allow us to have\ncredentials that can be seen,\n\n203\n00:09:49.426 --> 00:09:53.360\nverified, and ultimately used to\nallow users to access resources and\n\n204\n00:09:53.360 --> 00:09:55.576\nthe attributes associated with them.\n\n205\n00:09:55.576 --> 00:09:58.075\nAnd the claims can be verified\nas part of that process.\n\n206\n00:09:58.075 --> 00:10:00.815\nThis is actually a good thing,\nright, ultimately.\n\n207\n00:10:00.815 --> 00:10:02.671\nLet's take a look at picture, if you will,\n\n208\n00:10:02.671 --> 00:10:04.989\nthat shows us a little bit\nabout how this is gonna work.\n\n209\n00:10:04.989 --> 00:10:06.329\nProbably we have to go full-screen for\n\n210\n00:10:06.329 --> 00:10:08.692\nthis because there's no way we\nare gonna see everything otherwise.\n\n211\n00:10:08.692 --> 00:10:13.526\nSo I have a little document/picture/,I\ndon't know what to call it,\n\n212\n00:10:13.526 --> 00:10:17.080\npixellated image that we put together for\nyou.\n\n213\n00:10:17.080 --> 00:10:21.510\nBut when you download this,\nif you do download from the show notes,\n\n214\n00:10:21.510 --> 00:10:23.330\nthe picture will be a little\nbit easier for you to see.\n\n215\n00:10:23.330 --> 00:10:26.030\nIt's just we're blowing it up and\nit's a little pixellated.\n\n216\n00:10:26.030 --> 00:10:29.150\nBut we have off to the left there\nthe claims provider attribute store.\n\n217\n00:10:29.150 --> 00:10:34.160\nEssentially an Active Directory Domain\nController running ADDS in server 12R2.\n\n218\n00:10:34.160 --> 00:10:34.720\nAnd then,\n\n219\n00:10:34.720 --> 00:10:39.420\nwe have a just a standard workstation\nwith a blue monitored machine down there.\n\n220\n00:10:39.420 --> 00:10:43.013\nIt's just a workstation outside\nof the partner organization,\n\n221\n00:10:43.013 --> 00:10:45.350\nyou can kinda see that label below there.\n\n222\n00:10:45.350 --> 00:10:50.250\nSo that's outside of our forest that's\nsomebody else looking into connect in.\n\n223\n00:10:51.460 --> 00:10:52.834\nAnd to authenticate and\n\n224\n00:10:52.834 --> 00:10:56.958\nuse resources from outside through\nwhat will ultimately become ADFS,\n\n225\n00:10:56.958 --> 00:11:01.303\nthe federation services we established,\nwe have our perimeter network.\n\n226\n00:11:01.303 --> 00:11:06.254\nSo we have our external network that is\nsitting there where we have in our DMZ,\n\n227\n00:11:06.254 --> 00:11:11.512\nlet's say hypothetically, a federation\nservice proxy and/or web proxy that is\n\n228\n00:11:11.512 --> 00:11:16.790\nbeing used, depending on the web version\nof the operating systems we're using.\n\n229\n00:11:16.790 --> 00:11:21.040\nThe federation service proxy\nis a server 12 solution.\n\n230\n00:11:21.040 --> 00:11:21.837\nWhen you do 12R2,\n\n231\n00:11:21.837 --> 00:11:25.660\nit's the web proxy that you're installing\nas a new updated version of that.\n\n232\n00:11:25.660 --> 00:11:30.090\nSo I just labeled it federation service\nproxy so you could see what that is.\n\n233\n00:11:30.090 --> 00:11:33.640\nWe have a web server sitting there as\nwell that we're gonna interact with.\n\n234\n00:11:33.640 --> 00:11:34.822\nWe've got numbers here, and\n\n235\n00:11:34.822 --> 00:11:37.569\nthe numbers are explained in a process\nflow right below the diagram.\n\n236\n00:11:37.569 --> 00:11:40.730\nWe've got a documentation item there for\nyou for all the steps.\n\n237\n00:11:40.730 --> 00:11:42.690\nWe'll take a look at\nthose in just a minute.\n\n238\n00:11:42.690 --> 00:11:47.100\nAnd then we have our corporate\nnetwork off to the right there, and\n\n239\n00:11:47.100 --> 00:11:50.210\nour corporate network has a domain\ncontroller running in it.\n\n240\n00:11:50.210 --> 00:11:51.780\nYou'll see it off to the right.\n\n241\n00:11:51.780 --> 00:11:56.780\nAnd then we have a federation server that\nis running the ADFS solution, that is then\n\n242\n00:11:56.780 --> 00:12:01.470\ngonna allow us to interact and validate\nthe inbound requests from the partner.\n\n243\n00:12:01.470 --> 00:12:05.790\nAnd we have all of this labeled as the\nrelying party, meaning that the relying\n\n244\n00:12:05.790 --> 00:12:10.250\nparty is the party that is gonna rely\non information that is provided through\n\n245\n00:12:10.250 --> 00:12:14.240\nthe trusts and the claim and\nthe verification process from the partner.\n\n246\n00:12:14.240 --> 00:12:16.290\nSo that why we label it that way.\n\n247\n00:12:16.290 --> 00:12:19.530\nSo we have a process flow that's\nnumbered here with steps.\n\n248\n00:12:19.530 --> 00:12:23.450\nWe'll just scroll down because all the\nnumbers are essentially maintained here.\n\n249\n00:12:23.450 --> 00:12:27.136\nAnd you could see here I have got steps\none through a document and down below.\n\n250\n00:12:27.136 --> 00:12:29.870\nJust give you high level description\nof what's going on quickly.\n\n251\n00:12:29.870 --> 00:12:32.510\nYou could certainly look at the details\non your own and more in-depth and\n\n252\n00:12:32.510 --> 00:12:34.780\nstudy it to make sure you're\ncomfortable with the flow.\n\n253\n00:12:34.780 --> 00:12:39.290\nBut in Step 1, we have an outbound request\ncoming from the partner organization,\n\n254\n00:12:39.290 --> 00:12:41.270\nfrom the work station off to the left.\n\n255\n00:12:41.270 --> 00:12:44.410\nThe arrowhead is going in towards\nthe web server in the DMZ,\n\n256\n00:12:44.410 --> 00:12:45.970\nin the perimeter network.\n\n257\n00:12:45.970 --> 00:12:49.580\nAnd so in Step 1, the client computer\noutside the networks is trying to access\n\n258\n00:12:49.580 --> 00:12:51.670\na web-based app on the web server.\n\n259\n00:12:51.670 --> 00:12:54.110\nIt's a claims aware app,\nan app that would support and\n\n260\n00:12:54.110 --> 00:12:56.890\nuse claims through a verification process.\n\n261\n00:12:56.890 --> 00:13:00.670\nSo we're trying to get in there and\ndo that, and we send an HTTP or\n\n262\n00:13:00.670 --> 00:13:04.160\nHTTPS request into the web\nserver to access services.\n\n263\n00:13:04.160 --> 00:13:08.470\nIn step 2, that web server sends,\nor rather gets that information.\n\n264\n00:13:08.470 --> 00:13:12.910\nWe then go ahead and we challenge\nthe person who's sending from a partner\n\n265\n00:13:12.910 --> 00:13:16.540\norganization, say hey Daniel,\nthis is great but who are you, right?\n\n266\n00:13:16.540 --> 00:13:18.080\nI mean, I don't know who you are.\n\n267\n00:13:18.080 --> 00:13:20.120\nNice that you want to do business with me.\n\n268\n00:13:20.120 --> 00:13:21.280\nGlad to meet you.\n\n269\n00:13:21.280 --> 00:13:23.470\nBut we got to establish\na little rapport here, right?\n\n270\n00:13:23.470 --> 00:13:25.380\nYou gotta give me something.\n\n271\n00:13:25.380 --> 00:13:26.720\nYou gotta identify yourself.\n\n272\n00:13:26.720 --> 00:13:28.795\nHelp me in understanding who you are,\nright?\n\n273\n00:13:28.795 --> 00:13:31.605\nSo in step 2, we send in a request and\n\n274\n00:13:31.605 --> 00:13:35.585\nidentify that the client computer is going\nto have certain information release.\n\n275\n00:13:35.585 --> 00:13:36.805\nTry to establish that.\n\n276\n00:13:36.805 --> 00:13:39.805\nWe don't seem to have\na claim associated with that.\n\n277\n00:13:39.805 --> 00:13:42.782\nAnd so\nwhat we do is we direct that server,\n\n278\n00:13:42.782 --> 00:13:47.035\nthe web server says hey listen,\nI don't know who you are and\n\n279\n00:13:47.035 --> 00:13:51.139\nI can't verify you because I\nhave no record of you per se.\n\n280\n00:13:51.139 --> 00:13:55.190\nSo instead of you and I doing business\ntogether right now what I'm gonna do is\n\n281\n00:13:55.190 --> 00:13:58.732\nI'm gonna send you over to my buddy\nup here, the service proxy, or\n\n282\n00:13:58.732 --> 00:14:02.466\nthe web proxy depending on what\nversion of server we're running, and\n\n283\n00:14:02.466 --> 00:14:04.940\nI'm gonna ask you to talk to that machine.\n\n284\n00:14:04.940 --> 00:14:10.355\nThat machine in step 3 is then gonna\nredirect you in step 4 inbound\n\n285\n00:14:10.355 --> 00:14:16.367\non the inside of a secure domain through\nthe DMZ to the federation server.\n\n286\n00:14:16.367 --> 00:14:21.749\nIt's gonna take your information, send it\nover to a server that can validate you.\n\n287\n00:14:21.749 --> 00:14:25.943\nThen the federation server in step 5\nis gonna look up the domain server,\n\n288\n00:14:25.943 --> 00:14:29.313\nthe domain controller,\nhave a conversation in step 5 and\n\n289\n00:14:29.313 --> 00:14:33.572\n6 about whether or not your claims to\nbe who you are and who you say you are,\n\n290\n00:14:33.572 --> 00:14:37.710\nand validate that what you're\ntelling us is true or legitimate.\n\n291\n00:14:37.710 --> 00:14:41.600\nAssuming they are in step 7, and\nyou'll see step 7 is a two-parter.\n\n292\n00:14:41.600 --> 00:14:43.770\nFederation back to the proxy.\n\n293\n00:14:43.770 --> 00:14:48.360\nProxy back down to the partner\norganization claimant,\n\n294\n00:14:48.360 --> 00:14:51.460\nthe person that's making the claim\nthat's trying to authenticate.\n\n295\n00:14:51.460 --> 00:14:53.650\nWe're gonna hopefully authenticate you and\nsay yep,\n\n296\n00:14:53.650 --> 00:14:55.720\nDaniel, you're absolutely\nwho you say you are.\n\n297\n00:14:55.720 --> 00:14:58.600\nThank you for telling us who you are and\nvalidating that.\n\n298\n00:14:58.600 --> 00:15:03.220\nWe're gonna now allow you by redirecting\nyou in step 8 back to the web server\n\n299\n00:15:03.220 --> 00:15:05.900\nto essentially get into the web app and\nuse it.\n\n300\n00:15:05.900 --> 00:15:08.850\nBecause now we're gonna be able\nto present an identity and\n\n301\n00:15:08.850 --> 00:15:12.000\na claim that the web server will accept,\nand we're gonna allow you in.\n\n302\n00:15:12.000 --> 00:15:15.620\nSo this process is multi-faceted,\nmulti-stepped, and\n\n303\n00:15:15.620 --> 00:15:17.260\ninvolves cutouts, right?\n\n304\n00:15:17.260 --> 00:15:19.560\nEssentially, opportunity for\n\n305\n00:15:19.560 --> 00:15:23.830\nus to engage in secure communications\nwithout directly exposing\n\n306\n00:15:23.830 --> 00:15:28.770\nthe internal directory, the domain\ncontroller, and the federation server.\n\n307\n00:15:28.770 --> 00:15:32.240\nBecause we don't want them sitting\nin the perimeter network in the DMZ\n\n308\n00:15:32.240 --> 00:15:35.650\nallowing them to be exposed and\npotentially compromised.\n\n309\n00:15:35.650 --> 00:15:40.020\nWe want them going through a proxy,\na cutout, that is gonna benefit or\n\n310\n00:15:40.020 --> 00:15:44.240\nwe're gonna benefit from the ability for\nthat machine to stand between us and\n\n311\n00:15:44.240 --> 00:15:45.850\nthe outside world.\n\n312\n00:15:45.850 --> 00:15:48.132\nAct as a termination point for\ncommunication,\n\n313\n00:15:48.132 --> 00:15:50.356\nredirecting it through a secure channel,\nand\n\n314\n00:15:50.356 --> 00:15:53.392\nalternate ports inbound through\nthe back end of the firewall.\n\n315\n00:15:53.392 --> 00:15:56.132\nAnd allow us then to securely communicate.\n\n316\n00:15:56.132 --> 00:15:59.394\nDo our business on the back\nend to authenticate, or not.\n\n317\n00:15:59.394 --> 00:16:03.173\nCuz we may decide hey you know what, we\ncan't authenticate this guy who's coming\n\n318\n00:16:03.173 --> 00:16:05.717\nin or this girl that's coming\nin to make this request.\n\n319\n00:16:05.717 --> 00:16:07.365\nLet's deny them access.\n\n320\n00:16:07.365 --> 00:16:11.324\nUp to us to decide what to do, but\neither way we're gonna do that and\n\n321\n00:16:11.324 --> 00:16:14.864\nthen ultimately return back\nthose results in step eight and\n\n322\n00:16:14.864 --> 00:16:17.308\nhopefully if the answer is successful.\n\n323\n00:16:17.308 --> 00:16:19.564\nThen you're gonna authenticate and\nget access to the client, or\n\n324\n00:16:19.564 --> 00:16:21.480\nthrough the claim give\naccess to the web app.\n\n325\n00:16:21.480 --> 00:16:24.840\nSo this is the high level the process,\nlooking all the steps are down below\n\n326\n00:16:24.840 --> 00:16:29.270\nI've just essentially summarized and\nnotated for you the high level steps.\n\n327\n00:16:29.270 --> 00:16:31.835\nYou could read through the detail, there's\nnot much more to it than what I described.\n\n328\n00:16:31.835 --> 00:16:34.202\nI encourage you to take a look at that,\nbut\n\n329\n00:16:34.202 --> 00:16:36.841\nthis gives you a general\npicture hopefully and\n\n330\n00:16:36.841 --> 00:16:41.730\nan overview as to what's gonna happen and\nhow we're gonna be able to do that, right?\n\n331\n00:16:41.730 --> 00:16:43.920\nAnd kind of the steps involved with that.\n\n332\n00:16:43.920 --> 00:16:47.480\nSo I just wanna make sure you're\ncomfortable that idea that claims provider\n\n333\n00:16:47.480 --> 00:16:51.290\nattribute store that ADDS server is\nreally just a blow up there on the left\n\n334\n00:16:51.290 --> 00:16:52.930\nto show you what the domain controller and\n\n335\n00:16:52.930 --> 00:16:56.540\nthe corporate network off to\nthe right is actually representing.\n\n336\n00:16:56.540 --> 00:16:59.320\nThis thing right up here, right?\n\n337\n00:16:59.320 --> 00:17:01.032\nRight up there step five and\n\n338\n00:17:01.032 --> 00:17:04.463\nsix if I go up I can just about\nreach it right over there.\n\n339\n00:17:04.463 --> 00:17:06.707\n&gt;&gt; Your arm has become\nthe lines in there [LAUGH].\n\n340\n00:17:06.707 --> 00:17:07.575\n&gt;&gt; I am the line.\n\n341\n00:17:07.575 --> 00:17:09.047\nBe the line.\n&gt;&gt; That's right, be the line.\n\n342\n00:17:09.047 --> 00:17:10.337\n&gt;&gt; Be one with the line.\n\n343\n00:17:10.337 --> 00:17:13.014\nSo right up there it's just a blowup on\nthe left just to show you what it is and\n\n344\n00:17:13.014 --> 00:17:14.165\nto label it so you understand.\n\n345\n00:17:14.165 --> 00:17:16.819\nAnd that that's where the claims\nare going to be authenticated.\n\n346\n00:17:16.819 --> 00:17:20.085\nWhere we're gonna validate them\nessentially against the domain.\n\n347\n00:17:20.085 --> 00:17:22.045\nSo just wanted you to see this.\n\n348\n00:17:22.045 --> 00:17:25.135\nMake sure you are comfortable\nwith this thought process\n\n349\n00:17:25.135 --> 00:17:28.135\nas we're talking just to\nunderstand what's happening there.\n\n350\n00:17:28.135 --> 00:17:30.535\nSo when we implement\nthe federation server, right?\n\n351\n00:17:30.535 --> 00:17:32.705\nAnd we build out this functionality.\n\n352\n00:17:32.705 --> 00:17:38.630\nWhen we go ahead and we are installing and\nsetting up that federation\n\n353\n00:17:38.630 --> 00:17:42.230\nserver right there in the corporate\nnetwork at the lower right hand side.\n\n354\n00:17:42.230 --> 00:17:44.970\nWe're gonna install the federation\nservice on that machine.\n\n355\n00:17:44.970 --> 00:17:46.980\nRemember, it's domain joined as I said.\n\n356\n00:17:46.980 --> 00:17:48.900\nSo, it's member of the domain.\n\n357\n00:17:48.900 --> 00:17:50.360\nIt's not the domain controller.\n\n358\n00:17:50.360 --> 00:17:53.700\nPeople sometimes get this confused, but\nwe're installing federation services on\n\n359\n00:17:53.700 --> 00:17:57.950\na separate server that's gonna\nrepresent the federation function.\n\n360\n00:17:57.950 --> 00:18:00.019\nBut it's domain joined,\njust wanna make sure we're aware of that.\n\n361\n00:18:00.019 --> 00:18:04.095\nIf we implement the Federation Server\nProxy which is gonna be this machine\n\n362\n00:18:04.095 --> 00:18:07.870\nsitting in the perimeter network right,\nright over there.\n\n363\n00:18:07.870 --> 00:18:12.450\nSo if we implement that on server 12,\nwe call it the Federation Server Poxy.\n\n364\n00:18:12.450 --> 00:18:16.266\nWe update that name at server 12R2,\nit's now referred to as the web app proxy.\n\n365\n00:18:16.266 --> 00:18:20.310\nBut the Federation Service Proxy\nwhen we implement that,\n\n366\n00:18:20.310 --> 00:18:22.710\nthat is in the perimeter network.\n\n367\n00:18:22.710 --> 00:18:26.410\nRemember, that's a machine that's not\ndomain joined traditionally, right?\n\n368\n00:18:26.410 --> 00:18:29.110\nBecause that is a machine\nthat sits in the DMZ\n\n369\n00:18:29.110 --> 00:18:33.250\nthat is going to then just accept inbound\nrequests, and turn around and proxy them.\n\n370\n00:18:33.250 --> 00:18:36.630\nOn behalf of the communicator,\nthe claimant, the person or\n\n371\n00:18:36.630 --> 00:18:38.260\nentity that is trying to authenticate.\n\n372\n00:18:38.260 --> 00:18:40.280\nSo I just wanna make\nsure we're aware of that.\n\n373\n00:18:40.280 --> 00:18:43.760\nWe don't put the proxy role\non the federation server.\n\n374\n00:18:43.760 --> 00:18:48.040\nSo these two machines, these two roles\nright here, they should never meet.\n\n375\n00:18:48.040 --> 00:18:52.730\nThe federation server and the proxy should\nnever be installed on the same machine\n\n376\n00:18:52.730 --> 00:18:54.470\nbecause they cannot coexist, right?\n\n377\n00:18:54.470 --> 00:18:57.430\nSo we don't do that, wanna make\nsure that we're aware of that and\n\n378\n00:18:57.430 --> 00:18:59.090\nwe don't have a problem with that.\n\n379\n00:18:59.090 --> 00:19:01.550\nAlso keep in mind that we need\ncertificates to establish and\n\n380\n00:19:01.550 --> 00:19:05.310\nsecure communication and to verify\nall the things that are going on.\n\n381\n00:19:05.310 --> 00:19:10.370\nWe require certificates for five distinct\npurposes associated with federation.\n\n382\n00:19:10.370 --> 00:19:14.590\nSo the federation servers will need\ncertificates to represent five functions.\n\n383\n00:19:14.590 --> 00:19:16.830\nIt could be the same certificate for\nall five, but\n\n384\n00:19:16.830 --> 00:19:20.790\nlet me just quickly tell you what they\nare SSL communication for web services.\n\n385\n00:19:20.790 --> 00:19:23.130\nSo pretty common thought process there,\n\n386\n00:19:23.130 --> 00:19:25.750\nservice communication\nbetween federation servers.\n\n387\n00:19:25.750 --> 00:19:28.420\nAs we scale up and\nscale out and start building\n\n388\n00:19:28.420 --> 00:19:32.600\nhigh availability into the mix and we use\nsoftware based network load balancing or\n\n389\n00:19:32.600 --> 00:19:35.980\nhardware load balancers to\ncreate form capabilities.\n\n390\n00:19:35.980 --> 00:19:39.390\nMultiple federation servers,\nmultiple proxy set up and\n\n391\n00:19:39.390 --> 00:19:41.070\nload balanced In each tier.\n\n392\n00:19:41.070 --> 00:19:45.140\nWe obviously then are gonna be\ncommunicating across these servers.\n\n393\n00:19:45.140 --> 00:19:48.816\nAnd so this set of certificates or\nthis individual certificate that gets\n\n394\n00:19:48.816 --> 00:19:52.200\ninstalled on each one is\nfacilitating that communication.\n\n395\n00:19:52.200 --> 00:19:54.880\nSo as we set up and we structure our farm,\n\n396\n00:19:54.880 --> 00:19:58.950\nwe're gonna be installing same certificate\nacross each server to facilitate that.\n\n397\n00:19:58.950 --> 00:20:02.350\nToken siding, token decryption, so\nwe wanna make sure we have certificate\n\n398\n00:20:02.350 --> 00:20:05.820\navailable or certificates available for\nthat, and server authentication.\n\n399\n00:20:05.820 --> 00:20:08.660\nCuz what would all this\ncommunication be without\n\n400\n00:20:08.660 --> 00:20:10.520\nthe ability to be able to\nauthenticate the server?\n\n401\n00:20:10.520 --> 00:20:13.560\nPretty common when we think\nabout the five types of\n\n402\n00:20:13.560 --> 00:20:15.970\nfunctions that we need certificates for.\n\n403\n00:20:15.970 --> 00:20:17.640\nWant to make sure we're\nfamiliar with this.\n\n404\n00:20:17.640 --> 00:20:22.140\nWe talked a bit about HA and the idea that\nwe would set up a federation server farm\n\n405\n00:20:22.140 --> 00:20:25.950\nand a proxy farm by installing\nmultiple instances, and\n\n406\n00:20:25.950 --> 00:20:28.210\nscaling out with network load balancing.\n\n407\n00:20:28.210 --> 00:20:30.220\nThis is something else to consider and\nthink about.\n\n408\n00:20:30.220 --> 00:20:31.940\nDon't have that representative diagram,\nbut\n\n409\n00:20:31.940 --> 00:20:34.560\njust wanna make sure you're\nthinking about the logic of that.\n\n410\n00:20:34.560 --> 00:20:38.480\nIf we have a big enough architecture,\nwe would install federation server\n\n411\n00:20:38.480 --> 00:20:40.990\nacross multiple servers,\ninstalling the role in each one.\n\n412\n00:20:40.990 --> 00:20:44.520\nWe'd stand up and\ninstall multiple proxy servers, or\n\n413\n00:20:44.520 --> 00:20:47.310\nproxy roles as well in\nthe perimeter network.\n\n414\n00:20:47.310 --> 00:20:51.230\nAnd then with network load balancing we'd\nbe able to scale that up and provide for\n\n415\n00:20:51.230 --> 00:20:52.490\na highly available architecture.\n\n416\n00:20:52.490 --> 00:20:54.770\nSo if one of those rules were to fail,\n\n417\n00:20:54.770 --> 00:20:57.410\nwe'd have others that essentially could\npick up the slack and keep going.\n\n418\n00:20:57.410 --> 00:20:59.730\nSo we do have the capability to do this.\n\n419\n00:20:59.730 --> 00:21:03.440\nWe also wanna beware of the fact\nthat there's a database backing\n\n420\n00:21:03.440 --> 00:21:04.590\nthe federation server.\n\n421\n00:21:05.660 --> 00:21:10.580\nSo also another important part\nof the overall thought process,\n\n422\n00:21:10.580 --> 00:21:11.530\nand the architecture.\n\n423\n00:21:11.530 --> 00:21:14.461\nI don't represent that in the diagram,\nbut let me explain what it is.\n\n424\n00:21:14.461 --> 00:21:15.900\nWe have two options here,\n\n425\n00:21:15.900 --> 00:21:19.730\nwe can use Windows internal database\nwhich is called the WYD, the W-Y-D.\n\n426\n00:21:19.730 --> 00:21:22.689\nWhich is just an internal database\nwe set up on a federation server.\n\n427\n00:21:22.689 --> 00:21:24.583\nThink almost like SQL Express, right?\n\n428\n00:21:24.583 --> 00:21:29.380\nSQLite we're using a locally\ninstantiated database copy.\n\n429\n00:21:29.380 --> 00:21:32.530\nNow the problem with that is we can only\nscale that to five federations servers\n\n430\n00:21:32.530 --> 00:21:33.670\nif we go to firm.\n\n431\n00:21:33.670 --> 00:21:36.660\nSo we're limited there and\nthat's gonna be an issue for for us.\n\n432\n00:21:36.660 --> 00:21:39.760\nIf we're scaling this out on the\nenterprise side and we're going to build\n\n433\n00:21:39.760 --> 00:21:42.760\na farm that is going to be truly\nenterprised and global in scope.\n\n434\n00:21:42.760 --> 00:21:44.850\nWe're not gonna go\nthe internal database route,\n\n435\n00:21:44.850 --> 00:21:47.970\nwe're gonna use enterprise\nversion of SQL on the back end.\n\n436\n00:21:47.970 --> 00:21:52.369\nWhen we do that we then are pointing\nall the federation servers that\n\n437\n00:21:52.369 --> 00:21:54.265\nare common configuration database.\n\n438\n00:21:54.265 --> 00:21:57.715\nSQL is that common instantiated\nconfiguration database.\n\n439\n00:21:57.715 --> 00:22:00.165\nAnd all the federation servers\ncan read and write and\n\n440\n00:22:00.165 --> 00:22:02.375\nmake changes to that common back end.\n\n441\n00:22:02.375 --> 00:22:04.895\nRight, so we just wanna make sure\nthat we understand the scalability\n\n442\n00:22:04.895 --> 00:22:05.825\nassociated with this.\n\n443\n00:22:05.825 --> 00:22:08.735\nBecause if we use the width solution,\nthe internal database.\n\n444\n00:22:08.735 --> 00:22:11.395\nWe only have one writable\ncopy of the database which is\n\n445\n00:22:11.395 --> 00:22:13.530\ninstalled on the first federation server.\n\n446\n00:22:13.530 --> 00:22:18.490\nThe other four that may actually be\ninteracting with that if we scale that up\n\n447\n00:22:18.490 --> 00:22:21.140\nare not gonna be able to make\nchanges because it's only\n\n448\n00:22:21.140 --> 00:22:24.180\navailable to that one server where\nit's initially instantiated.\n\n449\n00:22:24.180 --> 00:22:26.970\nThey can see the configurations but\nnot gonna be able to modify them.\n\n450\n00:22:26.970 --> 00:22:30.690\nSo that limits us a little bit, we just\nwanna make sure we're aware of that.\n\n451\n00:22:30.690 --> 00:22:34.290\nSo as a result any updates or\nreplicas that are made,\n\n452\n00:22:34.290 --> 00:22:38.560\nrather updates made to the farm in this\nfive server configurations scenario,\n\n453\n00:22:38.560 --> 00:22:40.700\nhave to be replicated to the other four.\n\n454\n00:22:40.700 --> 00:22:44.400\nWe'll make them on the primary server\nwhere we using that internal solution\n\n455\n00:22:44.400 --> 00:22:48.440\nas opposed to setting up a federated\nsolution using the SQL Server back end.\n\n456\n00:22:48.440 --> 00:22:50.100\nSo just be aware of that.\n\n457\n00:22:50.100 --> 00:22:53.880\nWe talked about the fact that\nthe Federation Service Proxy or\n\n458\n00:22:53.880 --> 00:22:57.530\nthe Web Application Proxy server,\nthe newer version, the newer name for\n\n459\n00:22:57.530 --> 00:23:01.660\nthat in Server 12 R2 is stood up in\nthe perimiter, I mentioned that.\n\n460\n00:23:01.660 --> 00:23:04.680\nWe could scale that and make that highly\navailable with the farm architecture as\n\n461\n00:23:04.680 --> 00:23:06.466\nwell installing multiple copies.\n\n462\n00:23:06.466 --> 00:23:11.480\nRemember not domain joined, but\nwhen we set those up we cluster them\n\n463\n00:23:11.480 --> 00:23:16.660\nusing a single IP for them and a DNS\nfully qualified domain name solution.\n\n464\n00:23:16.660 --> 00:23:20.610\nSo we have our record set up for all of\nthem and we use network load balancing or\n\n465\n00:23:20.610 --> 00:23:23.870\nhardware based load balancers\noutside to be able to set that up.\n\n466\n00:23:23.870 --> 00:23:25.508\nDo you have a preference for\nload balancing view?\n\n467\n00:23:25.508 --> 00:23:30.291\nDo you prefer the Windows software\nbased NRB, are the hardware type?\n\n468\n00:23:30.291 --> 00:23:35.739\n[CROSSTALK]\n&gt;&gt; A lot to be said about them,\n\n469\n00:23:35.739 --> 00:23:38.878\nthey do a great job which is\nwhy they're the big name but\n\n470\n00:23:38.878 --> 00:23:41.730\nreally to me it boils\ndown to your environment.\n\n471\n00:23:41.730 --> 00:23:46.070\nIf the software version that's built in\nwill work for you, then go with that.\n\n472\n00:23:46.070 --> 00:23:48.930\nOtherwise, if you need something\na little more heavy lifting,\n\n473\n00:23:48.930 --> 00:23:49.990\njump over to that five or something.\n\n474\n00:23:51.030 --> 00:23:52.210\n&gt;&gt; So you're an either or kinda guy.\n\n475\n00:23:52.210 --> 00:23:52.869\n&gt;&gt; I'm an either or, yeah.\n\n476\n00:23:52.869 --> 00:23:54.650\nIt just depends, yeah.\n&gt;&gt; You're a circumstantial,\n\n477\n00:23:54.650 --> 00:23:56.010\ndepends kinda guy.\n\n478\n00:23:56.010 --> 00:23:57.566\nAll right, so\nI actually have an opinion about this.\n\n479\n00:23:57.566 --> 00:23:59.365\nI do have opinions about most things,\nas you probably know.\n\n480\n00:23:59.365 --> 00:24:00.978\n&gt;&gt; [LAUGH]\n&gt;&gt; But I have an opinion about this,\n\n481\n00:24:00.978 --> 00:24:02.059\nnot because I think it's right or wrong.\n\n482\n00:24:02.059 --> 00:24:03.058\nBut I'll tell you why.\n\n483\n00:24:03.058 --> 00:24:04.323\nI have an opinion about this.\n\n484\n00:24:04.323 --> 00:24:07.986\nJust before we quickly take a look at\na document, we'll put together for\n\n485\n00:24:07.986 --> 00:24:11.120\nyou with all the components of\nADFS kinda summarized for you.\n\n486\n00:24:11.120 --> 00:24:13.680\nTo give you a nice little summary\nof all the architecture and\n\n487\n00:24:13.680 --> 00:24:15.740\nthe moving parts we've been discussing.\n\n488\n00:24:15.740 --> 00:24:20.455\nSo I kind of follow Daniel's lead on this,\nand I do think that is is circumstantial.\n\n489\n00:24:20.455 --> 00:24:22.715\nIt does depend on context, but\n\n490\n00:24:22.715 --> 00:24:25.105\nI specifically come down on\nthe side of the following.\n\n491\n00:24:25.105 --> 00:24:27.495\nAnd I think you kind of implied\nthis in your statement, but\n\n492\n00:24:27.495 --> 00:24:28.555\nyou didn't come right out and say it.\n\n493\n00:24:28.555 --> 00:24:32.287\nSo you tell me if I'm wrong,\nbased on you said when we're done and\n\n494\n00:24:32.287 --> 00:24:33.747\nif I'm wrong, you can tell me.\n\n495\n00:24:33.747 --> 00:24:35.880\nBut remember, I'm not gonna\ncare if you tell me I'm wrong.\n\n496\n00:24:35.880 --> 00:24:36.786\n&gt;&gt; Okay, just so we're sure.\n\n497\n00:24:36.786 --> 00:24:37.468\n&gt;&gt; Okay, just so we know,\njust so we're sure.\n\n498\n00:24:37.468 --> 00:24:38.947\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n499\n00:24:38.947 --> 00:24:41.167\nmy thought process on\nthis is the following.\n\n500\n00:24:41.167 --> 00:24:42.838\nGet in line with what Daniel said.\n\n501\n00:24:42.838 --> 00:24:47.158\nI think that it is contextual,\nbut I think that going with\n\n502\n00:24:47.158 --> 00:24:51.178\nthe vendor-specific solution in this case,\nthe software-based load balancing.\n\n503\n00:24:51.178 --> 00:24:55.478\nIf it scales and works for\nyou is always easier to integrate, and\n\n504\n00:24:55.478 --> 00:24:56.518\nusually functions.\n\n505\n00:24:56.518 --> 00:24:57.498\nAnd I'm not suggesting for\n\n506\n00:24:57.498 --> 00:25:00.838\na minute that external hardware-based\nload balancing doesn't function well.\n\n507\n00:25:00.838 --> 00:25:01.708\nIt does scale and\n\n508\n00:25:01.708 --> 00:25:05.230\nprovide capabilities that the internal\nsoftware-based solutions.\n\n509\n00:25:05.230 --> 00:25:09.150\nThat are running in servers will not\nbe able to do at a certain point\n\n510\n00:25:09.150 --> 00:25:11.280\nin your growth or architecture curve.\n\n511\n00:25:11.280 --> 00:25:14.330\nBut I think people often\ndon't really think about and\n\n512\n00:25:14.330 --> 00:25:16.000\nunderstand how to measure that.\n\n513\n00:25:16.000 --> 00:25:18.840\nAnd say, you know, we think we're too big,\n\n514\n00:25:18.840 --> 00:25:20.580\nwe can't really get\nthe performance we need.\n\n515\n00:25:20.580 --> 00:25:24.250\nWe gotta go out and spend a whole bunch\nof money to buy this infrastructure.\n\n516\n00:25:24.250 --> 00:25:26.420\nComplexity is now entering the picture.\n\n517\n00:25:26.420 --> 00:25:29.190\nWe gotta skill up,\nwe gotta figure out how to set it up.\n\n518\n00:25:29.190 --> 00:25:32.870\nAnd it requires a lot of additional\ntime and energy when, and\n\n519\n00:25:32.870 --> 00:25:34.780\nagain, I'm very specific here.\n\n520\n00:25:34.780 --> 00:25:37.480\nI understand there's a break point,\nI understand it clearly.\n\n521\n00:25:37.480 --> 00:25:40.660\nAt a certain point you have to roll\nover to something more involved,\n\n522\n00:25:40.660 --> 00:25:44.550\nmore advanced with more capabilities,\nmore scalability primarily.\n\n523\n00:25:44.550 --> 00:25:47.790\nBut, what I find with customers\na lot of time is that people don't\n\n524\n00:25:47.790 --> 00:25:50.750\nreally understand clearly what\nthat demarcation point is.\n\n525\n00:25:50.750 --> 00:25:52.750\nAnd that for\n\n526\n00:25:52.750 --> 00:25:56.700\na variety of reasons they get led down\nthe path of having to implement that.\n\n527\n00:25:56.700 --> 00:26:00.420\nWhen in fact they could actually\noptimize their existing infrastructure,\n\n528\n00:26:00.420 --> 00:26:02.000\nand probably manage it better.\n\n529\n00:26:02.000 --> 00:26:03.980\nAnd they would actually\nget the same results.\n\n530\n00:26:03.980 --> 00:26:05.181\n&gt;&gt; Yeah I would totally agree with that.\n\n531\n00:26:05.181 --> 00:26:06.160\n&gt;&gt; Does that make sense?\n\n532\n00:26:06.160 --> 00:26:07.330\n&gt;&gt; Yeah that totally makes sense.\n\n533\n00:26:07.330 --> 00:26:11.180\nCuz if you think about it,\nyour software can do a lot.\n\n534\n00:26:11.180 --> 00:26:13.912\nAnd if you don't know to\nthe extent at which it can do.\n\n535\n00:26:13.912 --> 00:26:17.370\nCan it work and perform,\nwhere the degradation starts.\n\n536\n00:26:17.370 --> 00:26:20.890\nThen the pain points of having\nto implement new hardware and\n\n537\n00:26:20.890 --> 00:26:23.020\nget it to integrate correctly.\n\n538\n00:26:23.020 --> 00:26:27.900\nYou probably a lot of people\ndo jump ship very prematurely.\n\n539\n00:26:27.900 --> 00:26:32.070\nThey could continue to use their software\nsolution and I just think, well,\n\n540\n00:26:32.070 --> 00:26:34.430\nwe'll just go to this because that's\nwhat everybody else is doing.\n\n541\n00:26:34.430 --> 00:26:36.860\nAnd I think we're big enough,\nthey don't really have,\n\n542\n00:26:36.860 --> 00:26:41.160\nlike you say, a quantified yes.\n\n543\n00:26:41.160 --> 00:26:45.490\nNow this time, we see that this\nwill give us a performance boost.\n\n544\n00:26:45.490 --> 00:26:48.220\nSo now we need to just go\nthrough these growing pains and\n\n545\n00:26:48.220 --> 00:26:51.190\nimplement the hardware they\ncould still be using software.\n\n546\n00:26:51.190 --> 00:26:55.040\n&gt;&gt; So just pointing that out, I think\nwe're clearly both in agreement on this.\n\n547\n00:26:55.040 --> 00:26:58.050\nAnd I think it's important\nto share that real world\n\n548\n00:26:58.050 --> 00:27:01.400\nthought process with you when we get\nto certain points in conversations.\n\n549\n00:27:01.400 --> 00:27:03.615\nWhere it may be input little\ninsert that guidance.\n\n550\n00:27:03.615 --> 00:27:07.100\nBecause what we don't wanna have happen is\nhave you fall into that trap where you're\n\n551\n00:27:07.100 --> 00:27:08.687\nunclear, uncomfortable, unsure.\n\n552\n00:27:08.687 --> 00:27:15.537\nOr maybe a vendor has really put on the\nmojo and tried to really hard sell you.\n\n553\n00:27:15.537 --> 00:27:18.147\nAnd you're thinking well it\nmakes sense and get it and\n\n554\n00:27:18.147 --> 00:27:20.128\nmaybe that's the right path to go down.\n\n555\n00:27:20.128 --> 00:27:22.937\nAnd I'm not suggesting for\na minute that doesn't mean that wouldn't\n\n556\n00:27:22.937 --> 00:27:26.017\nbe a good choice, I'm just suggesting\nthat may be a premature choice.\n\n557\n00:27:26.017 --> 00:27:29.008\nCuz you may not have totally exhaust it,\nthe viability and\n\n558\n00:27:29.008 --> 00:27:33.768\nthe value of the built in solution\nbefore you have to jump in.\n\n559\n00:27:33.768 --> 00:27:37.428\nAnd spend all that time and money to\nacquire one that clearly will scale and\n\n560\n00:27:37.428 --> 00:27:38.868\nprovide additional capabilities.\n\n561\n00:27:38.868 --> 00:27:42.840\nThere's no doubt about that, it's not\nabout hey, one is horrible one is awesome.\n\n562\n00:27:42.840 --> 00:27:46.840\nIt's about both or good, but at certain\npoints in time based on growth and\n\n563\n00:27:46.840 --> 00:27:50.300\nunderstanding how to maximize the value\nof that as what we're talking about.\n\n564\n00:27:50.300 --> 00:27:53.000\nJust as a guide and\njust point for you here.\n\n565\n00:27:53.000 --> 00:27:55.210\nHaving said then let's just wrap\nup our discussion initially,\n\n566\n00:27:55.210 --> 00:27:57.640\nthis is really just part one,\ngeneral overview.\n\n567\n00:27:57.640 --> 00:28:01.120\nGetting our feet wet, getting comfortable\nwith the language and the technology.\n\n568\n00:28:01.120 --> 00:28:03.410\nPut together a little summary document for\nyou.\n\n569\n00:28:03.410 --> 00:28:04.760\nJust wanna show you that real quick and\n\n570\n00:28:04.760 --> 00:28:07.710\nencourage you to take a look at\nit at some point on your own.\n\n571\n00:28:07.710 --> 00:28:09.620\nMakes for great bedtime reading.\n\n572\n00:28:09.620 --> 00:28:11.440\nIf you're out and about,\ngot nothing to do for\n\n573\n00:28:11.440 --> 00:28:13.926\na few minutes waiting on somebody\nat the bar or the coffee shop.\n\n574\n00:28:13.926 --> 00:28:15.700\n&gt;&gt; [LAUGH]\n&gt;&gt; Just pull this thing up and\n\n575\n00:28:15.700 --> 00:28:17.540\nstart flipping through, you'll be amazed.\n\n576\n00:28:17.540 --> 00:28:19.760\nThe amount of people will come over and\nwanna party with you.\n\n577\n00:28:19.760 --> 00:28:20.930\n&gt;&gt; That's right.\n&gt;&gt; Cuz you are the coolest\n\n578\n00:28:20.930 --> 00:28:21.578\nperson in the room.\n\n579\n00:28:21.578 --> 00:28:24.240\nMr. and Mrs. ADFS Component Person.\n\n580\n00:28:24.240 --> 00:28:27.190\nAll right, so you'll see here,\nwe have a list of just all the components.\n\n581\n00:28:27.190 --> 00:28:29.010\nA lot of them we've mentioned and\ntalk about already.\n\n582\n00:28:29.010 --> 00:28:30.950\nFew of them, I just kinda skirted over.\n\n583\n00:28:30.950 --> 00:28:32.250\nI didn't necessarily identified them, but\n\n584\n00:28:32.250 --> 00:28:35.150\nyou'll see them here talk about\nthe partner organization.\n\n585\n00:28:35.150 --> 00:28:38.920\nYou saw that on the diagram,\ntalked about the federation servers,\n\n586\n00:28:38.920 --> 00:28:40.900\nwhat they are, how they're set up.\n\n587\n00:28:40.900 --> 00:28:43.214\nWe talked about the federation\nconfiguration database that's\n\n588\n00:28:43.214 --> 00:28:44.122\nthe internal database.\n\n589\n00:28:44.122 --> 00:28:48.842\nThe WID, or the sequel 12 external\ndatabase that we talked about, so\n\n590\n00:28:48.842 --> 00:28:50.795\njust keep that in mind.\n\n591\n00:28:50.795 --> 00:28:54.255\nThe web agents are going\nto be the solution\n\n592\n00:28:54.255 --> 00:28:57.965\nin 12 that allows us to set up and\ninstall them.\n\n593\n00:28:57.965 --> 00:29:01.095\nThey're used essentially on\nthe application servers to interact with\n\n594\n00:29:01.095 --> 00:29:02.820\nthe ADFS implementation.\n\n595\n00:29:02.820 --> 00:29:05.350\nThey would have been installed on\nthe web server and on the diagram and\n\n596\n00:29:05.350 --> 00:29:07.280\nallowed us to understand the claims.\n\n597\n00:29:07.280 --> 00:29:10.090\nThe attribute store is\nthe directory database that is up,\n\n598\n00:29:10.090 --> 00:29:12.560\nrunning up on the Active Directory\ndomain controller.\n\n599\n00:29:12.560 --> 00:29:15.720\nYou saw that on the breakout on\nthe focus up at the top left hand\n\n600\n00:29:15.720 --> 00:29:16.750\nside of the diagram.\n\n601\n00:29:16.750 --> 00:29:19.740\nOr have the claims attribute store\nlinked to the domain controller so\n\n602\n00:29:19.740 --> 00:29:20.690\nyou could see what it would be.\n\n603\n00:29:20.690 --> 00:29:23.980\nCuz in the diagram it's kind of\nhard to read all those labels.\n\n604\n00:29:23.980 --> 00:29:24.890\nWe have the claims,\n\n605\n00:29:24.890 --> 00:29:28.950\nthose are the individual statements that\nare made by the client or the claimant.\n\n606\n00:29:28.950 --> 00:29:31.900\nThat is trying to authenticate and\nprove who they are.\n\n607\n00:29:31.900 --> 00:29:35.250\nThe claims provider is the partner\norganization that is where\n\n608\n00:29:35.250 --> 00:29:38.510\nthe claiming comes from that's pushing\nthose claims across the divide.\n\n609\n00:29:39.960 --> 00:29:42.540\nClaims provider trust is\na relationship that we set up.\n\n610\n00:29:42.540 --> 00:29:44.800\nAnd we'll get into this\nmore in upcoming episodes.\n\n611\n00:29:44.800 --> 00:29:47.910\nWe'll show you how to set this up into\na full walk through on setting this up,\n\n612\n00:29:47.910 --> 00:29:48.960\nstart to finish.\n\n613\n00:29:48.960 --> 00:29:51.550\nSo you'll see a us set up\nthe claims provider trust.\n\n614\n00:29:51.550 --> 00:29:54.820\nBut this is a relationship\nbetween the partner organization,\n\n615\n00:29:54.820 --> 00:29:56.740\nwhich is where the claimant comes from.\n\n616\n00:29:56.740 --> 00:30:00.490\nAnd the relying party, essentially the\nparty we wanna authenticate against and\n\n617\n00:30:00.490 --> 00:30:01.540\nhave trust us.\n\n618\n00:30:01.540 --> 00:30:05.830\nAnd this is how we set that communication\npathway up after we establish ADFS.\n\n619\n00:30:05.830 --> 00:30:07.890\nThe claims rules are going\nto be the business logic or\n\n620\n00:30:07.890 --> 00:30:13.110\nthe rules that allow us to produce\nthose claims and setting up conditions.\n\n621\n00:30:13.110 --> 00:30:16.800\nThat we match against them in order to set\nthem up and send them back and forth and\n\n622\n00:30:16.800 --> 00:30:17.770\nvalidate them.\n\n623\n00:30:17.770 --> 00:30:22.080\nWe have metadata associated with this as\nwe do in many of our thought processes.\n\n624\n00:30:22.080 --> 00:30:26.560\nThe federation service itself is\nrunning on either server 12 or 12R2,\n\n625\n00:30:26.560 --> 00:30:29.660\nthat's the service role that\nwe install just so you know.\n\n626\n00:30:29.660 --> 00:30:31.080\nThe federation service or\n\n627\n00:30:31.080 --> 00:30:34.080\nweb app proxy remember we talked\nabout federation service proxy.\n\n628\n00:30:34.080 --> 00:30:38.460\nGetting renamed starting in 12R2,\nthe 12R2 now called the web app proxy.\n\n629\n00:30:38.460 --> 00:30:43.317\nSo just understand that we are taking the\ntact in these episodes around being 12R2.\n\n630\n00:30:43.317 --> 00:30:45.967\nBut I wanna put in the 12 references for\nyou, so\n\n631\n00:30:45.967 --> 00:30:49.990\nyou see it from the older perspective\nyou understand it's been renamed.\n\n632\n00:30:49.990 --> 00:30:52.710\nIt does the same thing,\nsend with same service just updated,\n\n633\n00:30:52.710 --> 00:30:56.510\nthere are some minor changes under the\nhood but essentially it's the same idea.\n\n634\n00:30:56.510 --> 00:31:01.300\nBut keep in mind on the exam, you may see\nit referenced as either the earlier or\n\n635\n00:31:01.300 --> 00:31:04.950\nnewer architecture because\nwe are testing on 12R2.\n\n636\n00:31:04.950 --> 00:31:08.550\nNow, but that doesn't mean you don't see\nsome stuff on 12 as part of the mix there.\n\n637\n00:31:08.550 --> 00:31:11.960\nRemember, we just add that new capability,\nthat new functionality in.\n\n638\n00:31:11.960 --> 00:31:16.250\nThe Primary federation server is the main\none, if we're doing this with an internal\n\n639\n00:31:16.250 --> 00:31:19.640\ndatabase that sets up the initial\ncopy of the database.\n\n640\n00:31:19.640 --> 00:31:22.470\nOwns it if it's the internal one and\nthat's the one that's readable,\n\n641\n00:31:22.470 --> 00:31:24.240\nwritable, make all the changes.\n\n642\n00:31:24.240 --> 00:31:26.590\nThe secondary service is\nthe ones that sync to that and\n\n643\n00:31:26.590 --> 00:31:28.520\nget copies after changes are made.\n\n644\n00:31:28.520 --> 00:31:31.160\nFor doing or\nreading to the back end on SQL.\n\n645\n00:31:31.160 --> 00:31:34.710\nThen remember everybody has access to\nthat equally and the config data base is\n\n646\n00:31:34.710 --> 00:31:37.510\nreadable writable by everybody so\npens and I you set that up.\n\n647\n00:31:38.830 --> 00:31:46.010\nThe relying party is the organization\nthat is going to be trusting right?\n\n648\n00:31:46.010 --> 00:31:50.510\nSo remember the partner organization sense\nthat the claimants and the claim's over.\n\n649\n00:31:50.510 --> 00:31:53.310\nWe the relying party, the one that's\naccepting the inbound request\n\n650\n00:31:53.310 --> 00:31:56.770\nare gonna have to rely on\nthe partner organization.\n\n651\n00:31:56.770 --> 00:31:59.800\nAnd validate those trust or\nrather those claims to the trust.\n\n652\n00:31:59.800 --> 00:32:02.150\nSo we have a relying party\ntrust that go the other way.\n\n653\n00:32:02.150 --> 00:32:03.009\nWe'll be setting those up as well.\n\n654\n00:32:03.009 --> 00:32:05.901\nAnd then the resource\nfederation server and\n\n655\n00:32:05.901 --> 00:32:09.050\nthe resource partner organization right?\n\n656\n00:32:09.050 --> 00:32:14.160\nThis is the side of the divide where\nremember we're just interacting with and\n\n657\n00:32:14.160 --> 00:32:16.060\ntrying to understand how\neverything's gonna come together.\n\n658\n00:32:16.060 --> 00:32:21.550\nSo just to make sure that you have\na sense of these vocabulary terms.\n\n659\n00:32:21.550 --> 00:32:26.060\nAnd so when you link them back to\nthe picture that we were looking at.\n\n660\n00:32:26.060 --> 00:32:28.823\nYou can see that the majority of\nthem are represented here, right.\n\n661\n00:32:28.823 --> 00:32:32.660\nWe do have our partner\norganization on the left.\n\n662\n00:32:32.660 --> 00:32:36.550\nWe have our federation service proxy or\nweb app proxy in the perimeter network.\n\n663\n00:32:36.550 --> 00:32:40.140\nOur web server with claims aware apps and\ncapabilities.\n\n664\n00:32:40.140 --> 00:32:43.300\nWe have our corporate network with\nthe domain controller where we would have\n\n665\n00:32:43.300 --> 00:32:45.930\nour claims database or claims provider.\n\n666\n00:32:45.930 --> 00:32:47.830\nFederation server sitting there.\n\n667\n00:32:47.830 --> 00:32:50.639\nThe database could either be the internal\ndatabase on the federation server.\n\n668\n00:32:50.639 --> 00:32:54.230\nPerhaps an external SQL database\nthat will be off to the side.\n\n669\n00:32:54.230 --> 00:32:55.440\nSo, all of that is there.\n\n670\n00:32:55.440 --> 00:32:57.600\nWe haven't documented\nthe thrust relationships,\n\n671\n00:32:57.600 --> 00:33:00.760\nwe're just showing you the general\nflow of information on this diagram.\n\n672\n00:33:00.760 --> 00:33:04.450\nBut the thrust relationships could easily\nbe overlaid on here with no trouble.\n\n673\n00:33:04.450 --> 00:33:06.240\nAnd as I said we'll be\ntalking about them and\n\n674\n00:33:06.240 --> 00:33:07.640\nactually walking through\nhow to create them.\n\n675\n00:33:07.640 --> 00:33:09.990\nAnd ending up coming\nat the server as well.\n\n676\n00:33:09.990 --> 00:33:13.550\n&gt;&gt; All right Adam,\nwell we do have plenty of more to go.\n\n677\n00:33:13.550 --> 00:33:17.270\nBut looking at the clock here for\nthis episode, and\n\n678\n00:33:17.270 --> 00:33:20.110\nit has dwindle down to\nwell zero time left on it.\n\n679\n00:33:20.110 --> 00:33:23.450\nSo, we're gonna have to cut this\nepisode but we would as we said,\n\n680\n00:33:23.450 --> 00:33:24.700\nwe will be back with more.\n\n681\n00:33:24.700 --> 00:33:28.190\nSo that we can show you how\nto get that ADFS up and\n\n682\n00:33:28.190 --> 00:33:31.130\nrunning and wave it in the air\nlike you just don't care, right?\n\n683\n00:33:31.130 --> 00:33:33.370\nJust going along with Adam's party theme.\n\n684\n00:33:33.370 --> 00:33:36.010\nThat'll be a lot of fun to watch\nAdam do that because I think\n\n685\n00:33:36.010 --> 00:33:37.165\nhe might actually do it.\n\n686\n00:33:37.165 --> 00:33:40.355\nYou never know, you have to\ntune back in to find out, Adam-\n\n687\n00:33:40.355 --> 00:33:40.935\n&gt;&gt; We know,\n\n688\n00:33:40.935 --> 00:33:43.595\nI'm not gonna wave it in the air\nlike I just [INAUDIBLE].\n\n689\n00:33:43.595 --> 00:33:44.335\n&gt;&gt; But it could happen.\n\n690\n00:33:44.335 --> 00:33:44.913\n&gt;&gt; You never know.\n\n691\n00:33:44.913 --> 00:33:46.175\n&gt;&gt; You never know, never say never.\n\n692\n00:33:46.175 --> 00:33:46.685\n&gt;&gt; That's true.\n\n693\n00:33:46.685 --> 00:33:47.995\n&gt;&gt; All right, Adam, thanks for joining us.\n\n694\n00:33:47.995 --> 00:33:49.995\nWe look forward to seeing\nyou in upcoming episodes.\n\n695\n00:33:49.995 --> 00:33:52.345\nLook forward to seeing\nyou guys there as well.\n\n696\n00:33:52.345 --> 00:33:53.985\nAs for now though,\nit's time for us to sign off.\n\n697\n00:33:53.985 --> 00:33:58.551\nFor ITProTV, I've been your host,\nDaniel Lowrie\n\n698\n00:33:58.551 --> 00:34:05.837\n[MUSIC]\n\n699\n00:34:05.837 --> 00:34:08.532\nThank you for watching ITPRO.TV.\n\n",
          "vimeoId": "213221052"
        },
        {
          "description": "In this episode, Daniel and Adam continue discussing components and steps for implementing Federated Identity Services. They pick back up by talking about integrating with Online Services, Azure, and Office365. They also explore configuring ADFS Claims Providers and Attribute Stores.",
          "length": "1627",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-2-implementing_federated_identity_pt2-041217-PGM.00_00_11_23.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-2-implementing_federated_identity_pt2-041217-PGM.00_00_11_23.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-2-implementing_federated_identity_pt2-041217-PGM.00_00_11_23.Still001-sm.jpg",
          "title": "Implementing Federated Identity Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:05.783\nWelcome to ITProTV, I'm you host [SOUND]\n\n2\n00:00:05.783 --> 00:00:07.930\n[MUSIC]\n\n3\n00:00:07.930 --> 00:00:11.844\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.844 --> 00:00:13.936\n&gt;&gt; All right, greetings everyone and\n\n5\n00:00:13.936 --> 00:00:16.690\nwelcome to another great\nepisode of ITProTV.\n\n6\n00:00:16.690 --> 00:00:17.890\nI'm your host Daniel Lowrie and\n\n7\n00:00:17.890 --> 00:00:22.140\nin today's episode we are rocking\nit with more of our MCSE track.\n\n8\n00:00:22.140 --> 00:00:27.200\nThat's right,\nthe 70-4 14 exam that's Microsoft Server\n\n9\n00:00:27.200 --> 00:00:31.560\n2012 R2 for you out there watching,\nand joining us in the studio yet\n\n10\n00:00:31.560 --> 00:00:34.730\nagain our mentor in that endeavor is\nour good friend mister Adam Gordon.\n\n11\n00:00:34.730 --> 00:00:35.990\nAdam, welcome back man, how it's going?\n\n12\n00:00:35.990 --> 00:00:37.260\n&gt;&gt; It's going well thank you.\n\n13\n00:00:37.260 --> 00:00:40.290\nYou gotta not quite have so\nmuch sugar when we have lunch cuz.\n\n14\n00:00:40.290 --> 00:00:42.350\n&gt;&gt; I'm all jacked up on Mountain Dew man.\n\n15\n00:00:42.350 --> 00:00:45.090\n&gt;&gt; I'm not gonna be able\nto keep up with you.\n\n16\n00:00:45.090 --> 00:00:46.110\nAll right it is going well.\n\n17\n00:00:46.110 --> 00:00:49.630\nHopefully you are excited for\npart number two of federation services.\n\n18\n00:00:49.630 --> 00:00:52.770\nI know Daniel is, you heard him\nrambling through our introduction.\n\n19\n00:00:52.770 --> 00:00:54.310\nSo we're gonna pick up where we left off.\n\n20\n00:00:54.310 --> 00:00:57.070\nWe did an overview, if you haven't seen\nthat probably good for you to go back,\n\n21\n00:00:57.070 --> 00:00:57.990\ntake a look at that episode.\n\n22\n00:00:57.990 --> 00:01:00.490\nJust get a sense of the architecture,\n\n23\n00:01:00.490 --> 00:01:02.940\nsends to the moving parts\nthe individual components.\n\n24\n00:01:02.940 --> 00:01:07.030\nWe identify them all, but how they are set\nup, some subtle but important difference\n\n25\n00:01:07.030 --> 00:01:10.870\nbetween 12 as Daniel was saying server\n12R2 is what we are focusing on.\n\n26\n00:01:10.870 --> 00:01:15.030\nBut between server 12 and 12R2 there\nare some slight differences with\n\n27\n00:01:15.030 --> 00:01:18.810\nthe implementation of ADFS specifically\nin the proxy function we rename it,\n\n28\n00:01:18.810 --> 00:01:21.910\nso you want to just make sure you are\naware of that we've talk about all that.\n\n29\n00:01:21.910 --> 00:01:23.030\nSo, check us out there.\n\n30\n00:01:24.120 --> 00:01:25.560\nCome on back, if you have to do that.\n\n31\n00:01:25.560 --> 00:01:26.190\nWe'll be waiting.\n\n32\n00:01:26.190 --> 00:01:28.410\nIf not, we're gonna go ahead and\nget started.\n\n33\n00:01:28.410 --> 00:01:31.630\nWe're gonna pick up where we left,\nintegrating ADFS with online services.\n\n34\n00:01:31.630 --> 00:01:36.090\nWe're gonna take a look at the wild,\ncrazy and wacky world of Office 365 and\n\n35\n00:01:36.090 --> 00:01:38.880\nAzure and\ntalk about how we integrate ADFS there.\n\n36\n00:01:38.880 --> 00:01:40.110\nMake sure we understand the steps.\n\n37\n00:01:40.110 --> 00:01:42.680\nI'm gonna show you a couple of\nways you can really get ahead of\n\n38\n00:01:42.680 --> 00:01:43.820\nthe curve with this.\n\n39\n00:01:43.820 --> 00:01:47.540\nMark Cluff's got a great little wizard\nthat you can access to understand how to\n\n40\n00:01:47.540 --> 00:01:49.210\ndo the integration.\n\n41\n00:01:49.210 --> 00:01:51.590\nAnd we'll take a look at that,\nshow you where that is.\n\n42\n00:01:51.590 --> 00:01:54.940\nAnd also some good documentation on things\nyou wanna make sure you're aware of.\n\n43\n00:01:54.940 --> 00:01:58.140\nSo let's start, if we could just by\ntaking a look in here real quick.\n\n44\n00:01:58.140 --> 00:02:02.050\nOr we could do that in just a second or\ntwo, got a little latency delay.\n\n45\n00:02:02.050 --> 00:02:05.060\nAll right, so I'm gonna go through these\nsteps here with you in just a second but\n\n46\n00:02:05.060 --> 00:02:08.460\nbefore we do that let's go out here.\n\n47\n00:02:08.460 --> 00:02:13.170\nLet's talk about what it's gonna take\nto connect Office 365, PowerShell and\n\n48\n00:02:13.170 --> 00:02:14.110\nADFS together.\n\n49\n00:02:14.110 --> 00:02:16.710\nOne of the things we're gonna\nneed to do is make sure we have\n\n50\n00:02:16.710 --> 00:02:17.950\nthe ability to use PowerShell.\n\n51\n00:02:17.950 --> 00:02:22.400\nTalk about PowerShell and really the value\nof it in a lot of different episodes at\n\n52\n00:02:22.400 --> 00:02:25.770\ndifferent places, not just in the 414\nmaterial we're talking about, but\n\n53\n00:02:25.770 --> 00:02:28.950\nyou would have heard about it in other\nareas as you get ready to become a MCSC.\n\n54\n00:02:28.950 --> 00:02:33.990\nThese days especially, got to know\nPowerShell, got to understand it,\n\n55\n00:02:33.990 --> 00:02:38.260\ngot to be willing to use it to\naccomplish a variety of tasks.\n\n56\n00:02:38.260 --> 00:02:41.780\nReally one of the most important\nplaces you can apply PowerShell\n\n57\n00:02:41.780 --> 00:02:44.230\nis when you're integrating\nwith Office 365,\n\n58\n00:02:44.230 --> 00:02:48.230\nmanaging online environments potentially\nfor Exchange, for SharePoint.\n\n59\n00:02:48.230 --> 00:02:51.150\nDealing with Active Directory Sync and\nhaving to deal with making sure\n\n60\n00:02:51.150 --> 00:02:55.900\nthe on-prem AD is synced up into\nOffice 365 into the Azure AD cloud.\n\n61\n00:02:55.900 --> 00:02:57.540\nSo I wanna make sure we're\nfamiliar with this piece.\n\n62\n00:02:57.540 --> 00:03:00.200\nSo we're gonna go through this and\ntalk about this a little bit.\n\n63\n00:03:00.200 --> 00:03:03.680\nBut in addition to all this we\nneed to use PowerShell cmdlets\n\n64\n00:03:03.680 --> 00:03:07.290\nto be able to set up and integrate ADFS\nwith the online services provider.\n\n65\n00:03:07.290 --> 00:03:10.930\nSo we need to make sure that we're ware of\nthe fact that there are some requirements\n\n66\n00:03:10.930 --> 00:03:14.310\nfor loading up and\nmaintaining PowerShell capabilities and\n\n67\n00:03:14.310 --> 00:03:16.900\nconnectivity into the Office 365 cloud.\n\n68\n00:03:16.900 --> 00:03:20.770\nSo if we scroll down here,\nwhat do we need to know before we begin?\n\n69\n00:03:20.770 --> 00:03:23.884\nWe can use any of the supported operating\nsystems to run the PowerShell area.\n\n70\n00:03:23.884 --> 00:03:29.724\nOn the client side, Windows 7 SP1 forward,\nto Windows 8, 8.1, Windows 10,\n\n71\n00:03:29.724 --> 00:03:36.140\nWindows Server 12 R2, Server 12, 2008,\nR2 SP1, Server 16 can use it on there.\n\n72\n00:03:37.160 --> 00:03:41.500\nWe need the 64-bit version\nof the Active Directory or\n\n73\n00:03:41.500 --> 00:03:45.990\nWindows Azure Active Directory module for\nthe Windows PowerShell solutions.\n\n74\n00:03:45.990 --> 00:03:47.580\nYou're gonna wanna load that up.\n\n75\n00:03:47.580 --> 00:03:50.780\nWe also wanna make sure\nthat we have installed\n\n76\n00:03:50.780 --> 00:03:53.440\nthe Microsoft Online\nServices Sign-In Assistant,\n\n77\n00:03:53.440 --> 00:03:57.320\nwhich is one of the prereqs to be able to\ndo the integration with AD FS as well.\n\n78\n00:03:57.320 --> 00:03:59.170\nYou download this from Microsoft.\n\n79\n00:03:59.170 --> 00:04:02.290\nIt's little piece of software we run\non the client desktop on the endpoint\n\n80\n00:04:02.290 --> 00:04:04.680\nthat let's users sign in,\nprovide claims and\n\n81\n00:04:04.680 --> 00:04:08.020\ndo all the things necessary\nto integrate with Office 365.\n\n82\n00:04:08.020 --> 00:04:10.140\nIf you're not familiar with it,\nno big deal.\n\n83\n00:04:10.140 --> 00:04:11.710\nGot a little download link right here.\n\n84\n00:04:11.710 --> 00:04:14.680\nAll you have to do is just\ngo click through there, and\n\n85\n00:04:14.680 --> 00:04:16.470\nyou'll be able to go grab that.\n\n86\n00:04:16.470 --> 00:04:18.000\nYou'll be able to get that downloaded.\n\n87\n00:04:18.000 --> 00:04:19.390\nIt's very straightforward.\n\n88\n00:04:19.390 --> 00:04:20.300\nYou'll install that.\n\n89\n00:04:21.330 --> 00:04:24.820\nWe also knew as I mentioned\nis your AD add on.\n\n90\n00:04:24.820 --> 00:04:27.630\nNow, I'm gonna show you a little different\nway to go about this because there's\n\n91\n00:04:27.630 --> 00:04:30.090\ncouple of different subtleties\nwith PowerShell, you may or\n\n92\n00:04:30.090 --> 00:04:31.750\nmay not be aware of.\n\n93\n00:04:31.750 --> 00:04:35.170\nYou can load in the module\nby module commandlets for\n\n94\n00:04:35.170 --> 00:04:37.450\nsupport for\nvarious programs you wanna manage.\n\n95\n00:04:37.450 --> 00:04:42.340\nIn other words the commandlets essentially\nare the series of individual commands we\n\n96\n00:04:42.340 --> 00:04:45.830\nexecuted in PowerShell to achieve\nwhatever results we're looking for.\n\n97\n00:04:45.830 --> 00:04:49.840\nEvery program has it's own set of modular\ncommandants that are loaded up and\n\n98\n00:04:49.840 --> 00:04:53.750\npackaged that can either be imported,\nor if you're using the specific\n\n99\n00:04:53.750 --> 00:04:57.510\nmanagement shell associated with that\nprogram they're already pre loaded.\n\n100\n00:04:57.510 --> 00:05:02.070\nSo the exchange management shell has\nthe exchange commandlets loaded up.\n\n101\n00:05:02.070 --> 00:05:06.300\nThe Azure AD module for\nWindows PowerShell to manage and\n\n102\n00:05:06.300 --> 00:05:10.290\nto essentially coordinate the use\nof Azure active directory and\n\n103\n00:05:10.290 --> 00:05:13.750\nthe syncing has all the Azure\ncommandlets loaded up.\n\n104\n00:05:13.750 --> 00:05:18.520\nSo you can go program by program, module\nby module importing as you go to set this\n\n105\n00:05:18.520 --> 00:05:22.440\nup and we can go ahead and do that and\nyou could just load one or two at a time.\n\n106\n00:05:22.440 --> 00:05:24.720\nBut you would probably wanna go ahead and\ndownload them all.\n\n107\n00:05:24.720 --> 00:05:25.540\nHave them pre-staged,\n\n108\n00:05:25.540 --> 00:05:30.260\nput them all into one PowerShell solution\nthen have all of them available for you.\n\n109\n00:05:30.260 --> 00:05:35.780\nAnd so if you wanna do that,\nthen what you really wanna do is go and\n\n110\n00:05:35.780 --> 00:05:40.760\nlook at connecting all Office 365 services\nfrom a Windows or a specific PowerShell\n\n111\n00:05:40.760 --> 00:05:44.160\nwindow, all right, 'cuz we have\na solution for that as we say.\n\n112\n00:05:44.160 --> 00:05:48.480\nAnd you could then go ahead and\nyou can download and install and\n\n113\n00:05:48.480 --> 00:05:52.210\nwe have links to all of them right here,\nthe SharePoint online management shell,\n\n114\n00:05:52.210 --> 00:05:56.520\nthe Skype for Business online module,\nthe Windows Azure module and\n\n115\n00:05:56.520 --> 00:05:58.950\nyou'll have all of the commandlets\nloaded up ready to go and\n\n116\n00:05:58.950 --> 00:06:02.810\nall you're doing is to stack them\ninside one PowerShell instance but\n\n117\n00:06:02.810 --> 00:06:04.550\nit makes a lot easier for\nyou to interact with.\n\n118\n00:06:04.550 --> 00:06:08.990\nSo if you wanna do that, the links\nare here you can certainly go through and\n\n119\n00:06:08.990 --> 00:06:10.910\nfollow along,\nkinda figure out what you wanna do.\n\n120\n00:06:10.910 --> 00:06:14.550\nGood documentation and here, I'm just\ngetting it done with the commandlets that\n\n121\n00:06:14.550 --> 00:06:16.355\nare necessary in order to do the import.\n\n122\n00:06:16.355 --> 00:06:18.529\nIt's just the import module and\nthen specify the name.\n\n123\n00:06:18.529 --> 00:06:20.310\nIt's really enough and more than that.\n\n124\n00:06:20.310 --> 00:06:23.730\nAnd then just connecting the module out or\nconnecting the service\n\n125\n00:06:23.730 --> 00:06:28.240\nout to Office 365 and Azure providing your\ncredential and very straight forward.\n\n126\n00:06:28.240 --> 00:06:31.710\nSo you wanna go and\nyou wanna take a look at that making sure\n\n127\n00:06:32.730 --> 00:06:36.180\nthat you're aware of the opportunities and\nthe options here.\n\n128\n00:06:36.180 --> 00:06:38.630\nYou then set up and connect as we said,\n\n129\n00:06:38.630 --> 00:06:44.540\nyou provide your credential into the\nOffice 365 subscription you used to get or\n\n130\n00:06:44.540 --> 00:06:49.210\nthe excuse me connect MS OL service\ncredential, provide your credential and\n\n131\n00:06:49.210 --> 00:06:50.970\nthen you're able to start managing.\n\n132\n00:06:50.970 --> 00:06:54.910\nSo once we've done all that we have\nall structured set up ready to go,\n\n133\n00:06:54.910 --> 00:06:57.340\nwe've downloaded and\ninstalled the client or\n\n134\n00:06:57.340 --> 00:07:01.870\nthe rather online services sign in\nassistant and we have the PowerShell\n\n135\n00:07:01.870 --> 00:07:05.860\nmodule then what we need to do is\ntalk about the steps involved.\n\n136\n00:07:05.860 --> 00:07:07.220\nSo let's just go here.\n\n137\n00:07:07.220 --> 00:07:09.560\nLet's talk about how we\nconfigure active directory,\n\n138\n00:07:09.560 --> 00:07:13.460\nfederation services and Office 365 for\nsingle sign on and how we integrated.\n\n139\n00:07:13.460 --> 00:07:16.640\nAnd so the idea here pretty\nstraightforward set of steps,\n\n140\n00:07:16.640 --> 00:07:18.670\nI'm gonna show you an online wizard.\n\n141\n00:07:18.670 --> 00:07:23.190\nWhat they call the ADFS advisor\nMicrosoft has as part of Office 365.\n\n142\n00:07:23.190 --> 00:07:26.500\nKinda walks you through a more\ndetailed breakdown of these steps,\n\n143\n00:07:26.500 --> 00:07:29.220\nthis is a higher level thought process.\n\n144\n00:07:29.220 --> 00:07:31.450\nI'll show you some more detailed\nsteps in just a minute.\n\n145\n00:07:31.450 --> 00:07:37.060\nBut when you take a look, Could we go full\nscreen, just so we could see all this?\n\n146\n00:07:37.060 --> 00:07:38.951\nI'm blocking,\nlike a quarter of what's there.\n\n147\n00:07:38.951 --> 00:07:40.257\n&gt;&gt; [LAUGH]\n&gt;&gt; We could just play random,\n\n148\n00:07:40.257 --> 00:07:40.866\nlike, provider.\n\n149\n00:07:40.866 --> 00:07:42.477\nMaybe people could submit\nin the chat window.\n\n150\n00:07:42.477 --> 00:07:43.030\n&gt;&gt; [LAUGH]\n&gt;&gt; Hey,\n\n151\n00:07:43.030 --> 00:07:45.871\nprovide what you think that space should-\n&gt;&gt; It's like an ad lib.\n\n152\n00:07:45.871 --> 00:07:46.750\n[LAUGH]\n&gt;&gt; Yeah, fill in the blank.\n\n153\n00:07:46.750 --> 00:07:47.857\nLet's see what you think should go there.\n\n154\n00:07:47.857 --> 00:07:49.320\n&gt;&gt; [LAUGH] Yeah,\nwe need a verb there, right?\n\n155\n00:07:49.320 --> 00:07:52.590\nAll right so, step one,\nyou'll see here on the federation sever.\n\n156\n00:07:52.590 --> 00:07:55.046\nRemember we install our\nfirst federation server and\n\n157\n00:07:55.046 --> 00:07:56.619\nthen we may scale out into a farm.\n\n158\n00:07:56.619 --> 00:07:58.591\nIf we're doing that we're\ngonna add this on and\n\n159\n00:07:58.591 --> 00:08:01.066\nessentially install it across\nall the servers in the farm.\n\n160\n00:08:01.066 --> 00:08:03.569\nIf we're only doing one,\nessentially just do it there.\n\n161\n00:08:03.569 --> 00:08:05.047\nSo on the first server install,\n\n162\n00:08:05.047 --> 00:08:08.620\nI mentioned the 64 bit version of\nthe Online Services Sign-In Assistant.\n\n163\n00:08:08.620 --> 00:08:10.520\nYou'll download and install that.\n\n164\n00:08:10.520 --> 00:08:14.095\nWe'll go ahead and\nwe'll install the .NET Framework Features,\n\n165\n00:08:14.095 --> 00:08:18.450\n3.5, that's gonna be on the server\nthrough the Add Role and Features Wizard.\n\n166\n00:08:18.450 --> 00:08:22.680\nYou'll set up the Online Services Module\nfor PowerShell, mentioned that as well.\n\n167\n00:08:22.680 --> 00:08:23.330\nYou'll do this for\n\n168\n00:08:23.330 --> 00:08:26.410\nall the federation servers in the farm,\nhowever many there may be.\n\n169\n00:08:26.410 --> 00:08:30.711\nYou'll then go ahead and\non the first federation server,\n\n170\n00:08:30.711 --> 00:08:33.360\nyou'll run the following cmdlet.\n\n171\n00:08:33.360 --> 00:08:35.701\nJust highlight it right there.\n\n172\n00:08:35.701 --> 00:08:39.495\nThe connect-MsolService one, the one I\njust showed you on the web page where we\n\n173\n00:08:39.495 --> 00:08:42.010\nwere talking about the steps involved.\n\n174\n00:08:42.010 --> 00:08:45.710\nThat is the cmdlet that lets\nyou connect out to Office 365,\n\n175\n00:08:45.710 --> 00:08:49.680\nprovide your Office 365\ntenant admin credential,\n\n176\n00:08:49.680 --> 00:08:52.090\nyour administrative credential\nmust be entered there.\n\n177\n00:08:52.090 --> 00:08:55.860\nYou're then able to connect and\nauthorize and start to manage.\n\n178\n00:08:55.860 --> 00:08:59.760\nYou'll then convert your primary domain\nto use the federation solution you're\n\n179\n00:08:59.760 --> 00:09:00.260\nsetting up.\n\n180\n00:09:00.260 --> 00:09:02.560\nWe have another cmdlet right here.\n\n181\n00:09:02.560 --> 00:09:04.560\nJust highlight that so you can see it.\n\n182\n00:09:06.360 --> 00:09:11.220\nThat will be\nthe Convert-MSLOLDomainToFederated\n\n183\n00:09:11.220 --> 00:09:12.612\nwith the domainname parameter.\n\n184\n00:09:12.612 --> 00:09:14.775\nYou'll obviously specify your domain name.\n\n185\n00:09:14.775 --> 00:09:18.010\nAnd then we do subdomains one at a time.\n\n186\n00:09:18.010 --> 00:09:24.790\nSo for instance, if we were itpro.tv and\nthen we also had members.itpro.tv,\n\n187\n00:09:24.790 --> 00:09:28.880\nand we had employees.itpro.tv\nas subdomains.\n\n188\n00:09:28.880 --> 00:09:32.260\nWe would add the main\ndomain of itpro.tv first,\n\n189\n00:09:32.260 --> 00:09:36.590\nthen the subdomains are added as\nadditional steps one at a time.\n\n190\n00:09:36.590 --> 00:09:39.361\nAs you can see sub.domain\nname there in step 7.\n\n191\n00:09:39.361 --> 00:09:43.240\nYour New-MSOLFederatedDomain will\nbe where you add your sub domains.\n\n192\n00:09:43.240 --> 00:09:46.180\nJust wanna make sure you're aware\nof that because those steps\n\n193\n00:09:46.180 --> 00:09:47.150\nare gonna be important.\n\n194\n00:09:47.150 --> 00:09:51.760\nYou may not be thinking I got four\ndomain namespaces I gotta manage, right?\n\n195\n00:09:51.760 --> 00:09:55.715\nSo wanna just be making sure in our\nminds we're considering the fact\n\n196\n00:09:55.715 --> 00:09:59.905\nthat we have to go through that and\nthat we just want to take note of that.\n\n197\n00:09:59.905 --> 00:10:03.193\nAnd just before, because I know Daniel\nsaid are you in motion [INAUDIBLE] jumped\n\n198\n00:10:03.193 --> 00:10:06.235\nin an asset, just before he does\nthat let me make a quick point.\n\n199\n00:10:06.235 --> 00:10:09.485\nWe talked a lot about planning and\nhow important it is to be successful\n\n200\n00:10:09.485 --> 00:10:13.055\nby mastering and understanding\nall of the required items, right?\n\n201\n00:10:13.055 --> 00:10:16.105\nYou gotta figure out what those\ndomain namespaces look like.\n\n202\n00:10:16.105 --> 00:10:19.700\nIf you're not sure If you don't know\nif there are sub domains, hey take five\n\n203\n00:10:19.700 --> 00:10:23.480\nminutes, go ask somebody who knows,\nand let's make sure we know all that.\n\n204\n00:10:23.480 --> 00:10:25.160\nCan you add those sub domains later?\n\n205\n00:10:25.160 --> 00:10:25.900\nYeah, absolutely.\n\n206\n00:10:25.900 --> 00:10:27.980\nNo big deal.\nThey can be added as a third, fourth,\n\n207\n00:10:27.980 --> 00:10:32.100\nfifth step 20 minutes, an hour, two days,\nfive days, a month down the line.\n\n208\n00:10:32.100 --> 00:10:36.160\nBut until you do, you can't fully\ninstantiate the system and manage it all\n\n209\n00:10:36.160 --> 00:10:39.060\nand Federation's not gonna work\nthe right way, so just be aware of that.\n\n210\n00:10:39.060 --> 00:10:42.908\n&gt;&gt; So what I was gonna say with step 7 you\ncan't do, so if you had five different sub\n\n211\n00:10:42.908 --> 00:10:46.938\ndomains you have to basically run step 7\nfive different times for each sub domain.\n\n212\n00:10:46.938 --> 00:10:49.490\n&gt;&gt; [CROSSTALK] each subdomain name.\n\n213\n00:10:49.490 --> 00:10:51.210\nYou'd wanna run them individually.\n\n214\n00:10:51.210 --> 00:10:51.803\n&gt;&gt; Anyway.\n\n215\n00:10:51.803 --> 00:10:57.365\n&gt;&gt; Well, just number one,\nlet's assume you never make a mistake.\n\n216\n00:10:57.365 --> 00:10:58.293\nDon't type anything that is incorrect.\n\n217\n00:10:58.293 --> 00:10:59.273\n&gt;&gt; True [LAUGH].\n\n218\n00:10:59.273 --> 00:11:00.620\n&gt;&gt; You don't screw it up.\n\n219\n00:11:00.620 --> 00:11:03.310\nThe likelihood of that happening\nis you know kinda small.\n\n220\n00:11:03.310 --> 00:11:05.180\nNumber two,\n\n221\n00:11:05.180 --> 00:11:08.900\nit's better to register them one at a time\nbecause you're not gonna have any issues.\n\n222\n00:11:08.900 --> 00:11:10.640\nYou wanna make sure each one instantiates.\n\n223\n00:11:10.640 --> 00:11:13.590\nThere is a little bit of time where it\nhas to go do its stuff behind the scenes.\n\n224\n00:11:13.590 --> 00:11:18.140\nMake sure it can verify the information\nregistration records, DNS, all that.\n\n225\n00:11:18.140 --> 00:11:20.193\nSo it's better to do these\nthings one at a time, yeah.\n\n226\n00:11:20.193 --> 00:11:22.807\nYou don't want to-\n&gt;&gt; Keep that safety net underneath.\n\n227\n00:11:22.807 --> 00:11:24.127\n&gt;&gt; You don't want it to, yeah.\n\n228\n00:11:24.127 --> 00:11:28.840\nYou don't wanna tempt fate,\nthe gods of DNS may not be with you.\n\n229\n00:11:28.840 --> 00:11:32.370\nIt gets ugly really quickly when\nthat kind of stuff happens, right.\n\n230\n00:11:32.370 --> 00:11:34.690\nAll right so,\nwe've been through that thought process.\n\n231\n00:11:34.690 --> 00:11:35.810\nNow there's more to this, right?\n\n232\n00:11:35.810 --> 00:11:37.180\nThat's just like part one.\n\n233\n00:11:37.180 --> 00:11:40.920\nNow we gotta go through what happens when\nwe wanna configure the relying party\n\n234\n00:11:40.920 --> 00:11:41.650\ntrust, right?\n\n235\n00:11:41.650 --> 00:11:45.611\nIn other words, at this point,\nwe set up just the basic concept,\n\n236\n00:11:45.611 --> 00:11:48.000\nwe've connected in to Office 365.\n\n237\n00:11:48.000 --> 00:11:52.102\nWe've linked our ADF solution, given\nourselves credentials to give us rights.\n\n238\n00:11:52.102 --> 00:11:57.160\nAnd we've registered domains, flipped O365\nover and told it to start talking to us.\n\n239\n00:11:57.160 --> 00:11:59.260\nBut we haven't set the trust\nrelationships up yet.\n\n240\n00:11:59.260 --> 00:12:03.560\nIn other words, we've set the wheels in\nmotion, but we haven't actually connected\n\n241\n00:12:03.560 --> 00:12:08.010\nanything that's gonna allow us to\nlong-term validate our claims, prove who\n\n242\n00:12:08.010 --> 00:12:11.450\nwe are, and actually extend trust so\nwe can engage in those activities.\n\n243\n00:12:11.450 --> 00:12:12.340\nWe're gonna do that next.\n\n244\n00:12:12.340 --> 00:12:15.800\nNow, before we do that,\nif we can go back and take a look.\n\n245\n00:12:15.800 --> 00:12:20.160\nLet me show you how we actually take\nadvantage to this online wizard that was\n\n246\n00:12:20.160 --> 00:12:23.960\ntalking about that Microsoft's put\ntogether, which is a really great thing.\n\n247\n00:12:23.960 --> 00:12:26.930\nSo when you go search,\nyou can just go out literally.\n\n248\n00:12:26.930 --> 00:12:28.500\nJust do a Google search for\n\n249\n00:12:28.500 --> 00:12:32.660\nthis thing right here, Office 365\nintegration with on-premises environments.\n\n250\n00:12:32.660 --> 00:12:34.420\nYou're to land on this page.\n\n251\n00:12:34.420 --> 00:12:38.931\nOn this page which is just off\nthe support area as you can see on\n\n252\n00:12:38.931 --> 00:12:42.128\nthe Microsoft website for Office 365.\n\n253\n00:12:42.128 --> 00:12:46.133\nWe'll then gonna have a bunch of\ndifferent links for various scenarios,\n\n254\n00:12:46.133 --> 00:12:48.846\nhey you wanna Hybrid solution,\nhey I wanna go in,\n\n255\n00:12:48.846 --> 00:12:52.540\nI wanna set up Azure, Azure listen\nto me Azure, wanna set up Azure.\n\n256\n00:12:52.540 --> 00:12:53.650\n&gt;&gt; That's a band from the east.\n\n257\n00:12:53.650 --> 00:12:55.726\n&gt;&gt; That is yeah, that is Azure, right?\n\n258\n00:12:55.726 --> 00:12:58.080\nThe Azure AD connect advisor.\n\n259\n00:12:58.080 --> 00:12:59.050\nRight, all this different stuff.\n\n260\n00:12:59.050 --> 00:13:02.890\nThe one you're looking for is\nthe AD FS Deployment Advisor right here.\n\n261\n00:13:02.890 --> 00:13:04.730\nIt's a little link buried in the page,\nright?\n\n262\n00:13:04.730 --> 00:13:07.660\nYou may not even see it, but\nyou wanna go down and take a look.\n\n263\n00:13:07.660 --> 00:13:08.805\nWhen you click on that,\n\n264\n00:13:08.805 --> 00:13:13.980\nyou're gonna be asked to log in\nagainst your Office 365 portal.\n\n265\n00:13:13.980 --> 00:13:15.400\nSo, you already have to have,\n\n266\n00:13:15.400 --> 00:13:19.780\nunfortunately, an Office 365\ntenant set up to get to this page.\n\n267\n00:13:19.780 --> 00:13:21.570\nI just want you to understand that.\n\n268\n00:13:21.570 --> 00:13:24.130\nCuz a lot of people go there,\nthey click and they go that's great.\n\n269\n00:13:24.130 --> 00:13:26.400\nAnd then you gotta log in and\nyou can't get to it.\n\n270\n00:13:26.400 --> 00:13:28.530\nSo things are what they are.\n\n271\n00:13:28.530 --> 00:13:31.130\nCan't speak to the fact that you\ngotta be a member in order to access\n\n272\n00:13:31.130 --> 00:13:32.060\nthe documentation.\n\n273\n00:13:32.060 --> 00:13:34.680\nI can just tell you where it is,\nexplain to you why it's important,\n\n274\n00:13:34.680 --> 00:13:36.910\npoint it out to you and\nhopefully encourage you to take a look.\n\n275\n00:13:36.910 --> 00:13:40.020\nSo the AD FS deployment advisor\nis available to you, but\n\n276\n00:13:40.020 --> 00:13:43.590\nyou gotta already be an Office 365\ntenant holder in order to get to it.\n\n277\n00:13:43.590 --> 00:13:45.010\nYou wanna know the secret here?\n\n278\n00:13:45.010 --> 00:13:46.310\nSet up a demo tenant.\n\n279\n00:13:46.310 --> 00:13:50.580\nYou know, you get one of those 30-day free\ntrial, hey, it costs you nothing tenants?\n\n280\n00:13:50.580 --> 00:13:53.711\nSet that up, you can then go and take a\nlook at this, get all the information you\n\n281\n00:13:53.711 --> 00:13:56.145\nneed, and then go port it over\nwhen you're ready to do that.\n\n282\n00:13:56.145 --> 00:13:58.200\nI didn't say that though, because you're\nnot supposed to know about that, right?\n\n283\n00:13:58.200 --> 00:13:59.130\n&gt;&gt; It was the heat of the moment.\n\n284\n00:13:59.130 --> 00:14:00.920\n&gt;&gt; It's a big secret,\nnobody's supposed to know that.\n\n285\n00:14:00.920 --> 00:14:03.560\nBut you can get in there and\ntake a look if you need to is my point.\n\n286\n00:14:03.560 --> 00:14:07.802\nThis is Microsoft's online\nwizard that you walk through.\n\n287\n00:14:07.802 --> 00:14:11.395\nYou see you can go through all the steps,\nthere's 12 of them listed here.\n\n288\n00:14:11.395 --> 00:14:14.715\nBreaking down just a little bit more\nthe detail we just went through.\n\n289\n00:14:14.715 --> 00:14:16.995\nThey talked about adding\nin the DNS records,\n\n290\n00:14:16.995 --> 00:14:19.645\nmaking sure you have all\nthe specific steps involved.\n\n291\n00:14:19.645 --> 00:14:22.515\nSome of the stuff we were just talking\nabout, subdomain registrations.\n\n292\n00:14:22.515 --> 00:14:24.605\nLike I said, you gotta have\nthe DNS registration out there.\n\n293\n00:14:24.605 --> 00:14:26.110\nYou gotta wait for it to propagate.\n\n294\n00:14:26.110 --> 00:14:29.890\nYeah, there's just some stuff you'd wanna\nmake sure you know has to happen so-\n\n295\n00:14:29.890 --> 00:14:31.990\nwe don't want to pile all\nthat stuff up all at once.\n\n296\n00:14:31.990 --> 00:14:35.380\nBut you can see we set this up\nfollowing essentially the same steps.\n\n297\n00:14:35.380 --> 00:14:38.700\nThe nice thing about this is it\nlets you go through step by step,\n\n298\n00:14:38.700 --> 00:14:42.030\nengaging in them and as you go it marks\nthis out for you, turns it green,\n\n299\n00:14:42.030 --> 00:14:44.900\ntells you whats going and and\nwalks you literally through.\n\n300\n00:14:44.900 --> 00:14:47.230\nI mean, it would be great if\nlife was like this right?\n\n301\n00:14:47.230 --> 00:14:50.070\nI need to change my oil, okay,\nhere's the ten things you gotta do, right,\n\n302\n00:14:50.070 --> 00:14:53.588\nand when you get to step ten,\ngreen light, you can drive again.\n\n303\n00:14:53.588 --> 00:14:56.240\nThis is like a cool way to do it,\nI like this, right?\n\n304\n00:14:56.240 --> 00:14:58.540\nSo everything is here,\nyou just go ahead, you click Next,\n\n305\n00:14:58.540 --> 00:15:00.630\nyou start walking through step by step.\n\n306\n00:15:00.630 --> 00:15:03.190\nSo you can see click Next here,\njust give it one second.\n\n307\n00:15:04.630 --> 00:15:08.510\nAnd you'll see it goes through,\nsays step 1, green circle, right?\n\n308\n00:15:08.510 --> 00:15:10.410\nWhite check, you did the intro.\n\n309\n00:15:10.410 --> 00:15:12.375\nSo you've been introduced,\nthat's essentially where we are.\n\n310\n00:15:12.375 --> 00:15:14.080\n&gt;&gt; [LAUGH]\n&gt;&gt; And then you'll see here,\n\n311\n00:15:14.080 --> 00:15:16.993\nit says before you begin, right,\nreview the component requirements,\n\n312\n00:15:16.993 --> 00:15:19.280\nassociated necessary\nrequirements in all things.\n\n313\n00:15:19.280 --> 00:15:22.450\nThey give you this great little diagram,\nshows you what you're doing.\n\n314\n00:15:22.450 --> 00:15:24.770\nThere's your ADFS solution on prem.\n\n315\n00:15:24.770 --> 00:15:26.270\nThere's your AD, right?\n\n316\n00:15:26.270 --> 00:15:27.680\nThere's your load balancer.\n\n317\n00:15:27.680 --> 00:15:31.040\nThere's your firewall, cuz there's\nno mistaking what that is, right?\n\n318\n00:15:31.040 --> 00:15:34.720\nAnd then there's your proxies,\nyour web app proxies sitting in the DMZ.\n\n319\n00:15:34.720 --> 00:15:36.060\nThere's your load balancer.\n\n320\n00:15:36.060 --> 00:15:37.250\nThere's the Internet.\n\n321\n00:15:37.250 --> 00:15:38.650\nThere's O365 in the cloud.\n\n322\n00:15:38.650 --> 00:15:40.740\nSo everything we talked about,\nit shows you.\n\n323\n00:15:40.740 --> 00:15:42.270\nGives you some information on this.\n\n324\n00:15:42.270 --> 00:15:43.790\nWhat are the requirements?\n\n325\n00:15:43.790 --> 00:15:45.174\nWhat are the network requirements?\n\n326\n00:15:45.174 --> 00:15:48.980\nGot every DNS namespace for\nFederation, whatever that is.\n\n327\n00:15:48.980 --> 00:15:50.650\nYou gotta set your records up.\n\n328\n00:15:50.650 --> 00:15:53.540\nYou gotta learn about and\nset up certificate services, and\n\n329\n00:15:53.540 --> 00:15:55.020\ncertificates with Federation.\n\n330\n00:15:55.020 --> 00:15:57.158\nRemember I told you in the prior episode,\n\n331\n00:15:57.158 --> 00:16:00.223\nfive key functions of\nthe certificates are involved with.\n\n332\n00:16:00.223 --> 00:16:01.534\nAnd we talked about what those are.\n\n333\n00:16:01.534 --> 00:16:04.382\nIn fact, we could use the same certificate\nfor everything if we wanted to.\n\n334\n00:16:04.382 --> 00:16:05.679\nFor management purposes.\n\n335\n00:16:05.679 --> 00:16:08.530\nGotta have that certificate loader and\nall the web app proxies.\n\n336\n00:16:08.530 --> 00:16:10.920\nGotta have it on the main\nfederation servers.\n\n337\n00:16:10.920 --> 00:16:11.960\nNeed it for the web server,\n\n338\n00:16:11.960 --> 00:16:15.240\nthat's gonna be claims aware for\nhosting our apps there.\n\n339\n00:16:15.240 --> 00:16:17.090\nNeed it for server authentication.\n\n340\n00:16:17.090 --> 00:16:19.930\nWe walk through all that stuff,\ntoken decryption, encryption.\n\n341\n00:16:19.930 --> 00:16:21.820\nAll the requirements,\nthe certificates used for it,\n\n342\n00:16:21.820 --> 00:16:23.850\nwe went through all that\nin the last episode.\n\n343\n00:16:23.850 --> 00:16:27.189\nSo all that's here, we talked about\nscaling out with an HA cluster.\n\n344\n00:16:27.189 --> 00:16:29.030\nWe talk about building the farm,\n\n345\n00:16:29.030 --> 00:16:32.400\ntalked about load balancing,\ngot your account requirements here.\n\n346\n00:16:32.400 --> 00:16:36.340\nNeed your domain admin rights to set\nup and run the ADFS install wizard.\n\n347\n00:16:36.340 --> 00:16:37.510\nSo walks you through all this.\n\n348\n00:16:37.510 --> 00:16:39.450\nTells you what the firewall\nrequirements are,\n\n349\n00:16:39.450 --> 00:16:43.140\ntells you what the ports are 49,443\nneed to be enabled in bound.\n\n350\n00:16:43.140 --> 00:16:47.290\nFor you to be able to talk from the proxy\n\n351\n00:16:47.290 --> 00:16:51.220\nback into the ADFS servers\nbehind the firewall.\n\n352\n00:16:52.310 --> 00:16:54.800\nNeed your X509 V3 certificate.\n\n353\n00:16:54.800 --> 00:16:59.970\nSo this firewall right here has to open,\nthat port inbound in order to be able to\n\n354\n00:16:59.970 --> 00:17:04.820\nenable communication back in to your ADFS\nservers inside the protection parameter.\n\n355\n00:17:04.820 --> 00:17:07.020\nAll of this is set up and\nexplained to you here.\n\n356\n00:17:07.020 --> 00:17:09.110\nSo this wizard,\nthis walk-through is really great.\n\n357\n00:17:09.110 --> 00:17:10.910\nSo I encourage you to take a look at that,\n\n358\n00:17:10.910 --> 00:17:14.040\nbut we have some additional steps\nwe need to go through here, right?\n\n359\n00:17:14.040 --> 00:17:18.050\nSo let's just go back to our little\nrun-through here cuz once we've gone ahead\n\n360\n00:17:18.050 --> 00:17:20.270\nand we've set up our\ninitial configuration.\n\n361\n00:17:20.270 --> 00:17:22.520\nWe go back full screen just so\nwe can see that again?\n\n362\n00:17:22.520 --> 00:17:26.810\nOnce we've done that we now have to set\nup our align party trust with Office 365.\n\n363\n00:17:26.810 --> 00:17:30.010\nAnd we have to notify Office 365 that\n\n364\n00:17:30.010 --> 00:17:32.820\nthere's gonna be updates to\nthe meta data for federation.\n\n365\n00:17:32.820 --> 00:17:36.090\nThis allows us to make sure\nour token signing certificates\n\n366\n00:17:36.090 --> 00:17:36.990\nare gonna be up to do date.\n\n367\n00:17:36.990 --> 00:17:39.900\nWe generate a new one in order\nto take advantage of that.\n\n368\n00:17:39.900 --> 00:17:43.370\nAnd the Federation Metadata\nupdate installation tool\n\n369\n00:17:43.370 --> 00:17:45.870\nhas to be used from Office 365 to do this.\n\n370\n00:17:45.870 --> 00:17:50.240\nSo there's some subtlety going on here,\nnot so subtle, it's pretty darn complex.\n\n371\n00:17:50.240 --> 00:17:53.335\nBut there's some subtlety\ninvolved in the various steps.\n\n372\n00:17:53.335 --> 00:17:56.705\nThat's why that wizard walking through\nall that is really gonna help you\n\n373\n00:17:56.705 --> 00:17:59.435\nto get this all laid down the right way,\nright.\n\n374\n00:17:59.435 --> 00:18:01.655\nSo what's the procedure\nto do the update here?\n\n375\n00:18:01.655 --> 00:18:05.855\nWe go to the primary fed server with\nan account that has ADFS admin right.\n\n376\n00:18:05.855 --> 00:18:08.925\nCentrally that's your domain admin\naccount more often then not.\n\n377\n00:18:08.925 --> 00:18:13.850\nYou download the Office 365 federation\nmetadata, update automation install tool.\n\n378\n00:18:13.850 --> 00:18:15.840\nSay that three times fast,\nthat's a mouthful.\n\n379\n00:18:15.840 --> 00:18:18.170\nSo you download that,\nagain it's just off the Microsoft website.\n\n380\n00:18:18.170 --> 00:18:21.860\nYou download that,\ngo in the PowerShell as administrator.\n\n381\n00:18:21.860 --> 00:18:26.350\nYou switch to the directory that has\nthis Federation metadata update tool.\n\n382\n00:18:26.350 --> 00:18:31.920\nOnce you go in there at that prompt you\ntype this right here which is the install.\n\n383\n00:18:31.920 --> 00:18:35.700\nThe PowerShell script that will\ndo the update install task.\n\n384\n00:18:35.700 --> 00:18:38.310\nSo that's gonna allow you\nto run the pre-packaged\n\n385\n00:18:38.310 --> 00:18:40.080\nscript that comes with the tool.\n\n386\n00:18:40.080 --> 00:18:43.651\nYou press Enter, you then go ahead and\nspecify your federated domain.\n\n387\n00:18:43.651 --> 00:18:46.010\nSo you'll specify the domain name.\n\n388\n00:18:46.010 --> 00:18:48.610\nAt the PowerShell prompt,\nyou put your credential in for\n\n389\n00:18:48.610 --> 00:18:51.660\nO365 since it's gonna give\nyou a couple of prompts.\n\n390\n00:18:51.660 --> 00:18:54.970\nWhat's our domain that we're targeting,\nwhat's our credential?\n\n391\n00:18:54.970 --> 00:18:58.920\nThen it's gonna go ahead and ask you for\nthe ADFS admin account as well.\n\n392\n00:18:58.920 --> 00:18:59.644\nYou're gonna do all that.\n\n393\n00:18:59.644 --> 00:19:02.399\nAnd then at that point, this kicks off and\n\n394\n00:19:02.399 --> 00:19:06.350\ncreates the connection and\nupdates federation metadata.\n\n395\n00:19:06.350 --> 00:19:11.120\nBut also sets a scheduled task that\nruns once a day, that ports out.\n\n396\n00:19:11.120 --> 00:19:12.315\nAnd essentially,\n\n397\n00:19:12.315 --> 00:19:17.180\nshifts all these updates from\nthe federation process back to Office 365.\n\n398\n00:19:17.180 --> 00:19:19.549\nSo that way, we're synced every 24 hours,\n\n399\n00:19:19.549 --> 00:19:22.658\nit runs in the context of\nthe account that we create it under.\n\n400\n00:19:22.658 --> 00:19:25.600\nSo you gotta make sure you've got\nthe right account information here.\n\n401\n00:19:25.600 --> 00:19:28.600\nIf you screw up one of these accounts and\ndon't get it right, so\n\n402\n00:19:28.600 --> 00:19:30.590\nit will error out,\nno big deal you run it again.\n\n403\n00:19:30.590 --> 00:19:31.810\nIt's not the end of the world.\n\n404\n00:19:31.810 --> 00:19:36.630\nRemember plan to be successful right,\nmake sure you have all this data.\n\n405\n00:19:36.630 --> 00:19:40.010\nYou know what these accounts are, you\nknow the domain name, you have all that.\n\n406\n00:19:40.010 --> 00:19:43.000\nSo that once you set this up,\nthen this task becomes automated.\n\n407\n00:19:43.000 --> 00:19:46.220\nIt runs behind the scenes,\nit's gonna sync everyday for you,\n\n408\n00:19:46.220 --> 00:19:49.470\nonce every 24 hours and\nupload all that federated metadata.\n\n409\n00:19:49.470 --> 00:19:52.450\nSo that way we are constantly in sync and\neverything works.\n\n410\n00:19:52.450 --> 00:19:55.589\nSo this is important, you gotta know that\nthis is the next step of the journey.\n\n411\n00:19:55.589 --> 00:19:57.575\nCuz we gotta go and configure all this.\n\n412\n00:19:57.575 --> 00:20:02.620\nSo we talked about how to set up\nADFS on prem sync it to Office 365.\n\n413\n00:20:02.620 --> 00:20:05.660\nBut what if we're syncing\nout to Windows Azure?\n\n414\n00:20:05.660 --> 00:20:08.880\nIf we're not gonna sync to Office 365 but\nwe are gonna use Windows Azure.\n\n415\n00:20:08.880 --> 00:20:11.810\nMaybe we're hosting our virtual\nmachines in the Azure fabric.\n\n416\n00:20:11.810 --> 00:20:13.960\nWe'll wanna be able to sync up and\ndo this as well.\n\n417\n00:20:13.960 --> 00:20:17.470\nWe could configure the Windows Azure\nas an identity provider or\n\n418\n00:20:17.470 --> 00:20:21.180\nADFS as an identity provider with\nWindows Azure, I should say.\n\n419\n00:20:21.180 --> 00:20:24.310\nSo we can also sync this directly\nto the Azure platform and\n\n420\n00:20:24.310 --> 00:20:27.125\njust not go to Office 365 exclusively.\n\n421\n00:20:27.125 --> 00:20:29.065\nSo we have the capability\nto do this as well.\n\n422\n00:20:29.065 --> 00:20:33.175\nThe Windows Azure access control service\nis used to be able to provide this.\n\n423\n00:20:33.175 --> 00:20:36.615\nThis lets us set up and\nauthenticate ASP.NET applications so\n\n424\n00:20:36.615 --> 00:20:40.125\nwe can go through and\nwe can set all this up if necessary.\n\n425\n00:20:40.125 --> 00:20:43.045\nLet me just get out of this website here.\n\n426\n00:20:43.045 --> 00:20:47.400\nGet out of this one real quick, and\nbring back up the other one that we need.\n\n427\n00:20:47.400 --> 00:20:50.720\nOne second, and where is that?\n\n428\n00:20:50.720 --> 00:20:56.220\nThere it is there, all right,\nso just bring this back up.\n\n429\n00:20:56.220 --> 00:21:02.220\nSo if we take a look here at configuring\nADFS 2.0 as an identity provider, right.\n\n430\n00:21:02.220 --> 00:21:03.940\nWe're gonna be able to go in and set up or\n\n431\n00:21:03.940 --> 00:21:07.250\nsync to the Azure Active Directory Control\nservice.\n\n432\n00:21:07.250 --> 00:21:09.260\nSometimes called ACS or\n\n433\n00:21:09.260 --> 00:21:14.370\nACS 2.0, but ACS which commonly referred\nto just the Access Control Service.\n\n434\n00:21:14.370 --> 00:21:18.870\nSo this walks us through all the different\nparts and moving pieces associated with\n\n435\n00:21:18.870 --> 00:21:22.190\nit, so this documentation will\nbe very helpful for you as well.\n\n436\n00:21:22.190 --> 00:21:25.091\nLet's you go in and add the ADFS 2.0,\n\n437\n00:21:25.091 --> 00:21:28.860\nidentity provider, in through the ACS\nmanagement portal up in Azure.\n\n438\n00:21:28.860 --> 00:21:31.400\nYou have to set this up on both sides.\n\n439\n00:21:31.400 --> 00:21:35.120\nWe go ahead and we specify that\nwe will be the identity provider.\n\n440\n00:21:35.120 --> 00:21:37.630\nSo we'd go into the access\ncontrol naming space.\n\n441\n00:21:37.630 --> 00:21:39.400\nWe provide our information,\n\n442\n00:21:39.400 --> 00:21:42.110\nspecify the active directory\nfederation services we add in.\n\n443\n00:21:42.110 --> 00:21:48.170\nAnd specify what type of\nidentity provider we're gonna be.\n\n444\n00:21:48.170 --> 00:21:51.500\nSo we go in and\nwe choose how we're gonna set that up and\n\n445\n00:21:51.500 --> 00:21:52.890\nthen once we provided all that.\n\n446\n00:21:52.890 --> 00:21:55.110\nWe identify our relying party and\n\n447\n00:21:55.110 --> 00:21:59.740\nwe set up our certificates or editor\ncertificates in step two as you can see.\n\n448\n00:22:01.130 --> 00:22:04.610\nWe'll then go through and\nset up our relying party name space, so\n\n449\n00:22:04.610 --> 00:22:10.160\nidentify who the claimant will be or\nthe partner organization will be.\n\n450\n00:22:10.160 --> 00:22:12.060\nWho the relying partner will be, so\n\n451\n00:22:12.060 --> 00:22:14.720\nin other words who's gonna be\ncreate the claims and send them.\n\n452\n00:22:14.720 --> 00:22:17.940\nAnd there's gonna be the resource\nparty that's gonna consume them, and\n\n453\n00:22:17.940 --> 00:22:19.190\nactually then rely on them.\n\n454\n00:22:19.190 --> 00:22:21.730\nSo we have to identify\nthose sides of the divide.\n\n455\n00:22:21.730 --> 00:22:23.920\nSo we add our identity\nprovider through the portal.\n\n456\n00:22:23.920 --> 00:22:27.130\nWe go ahead and we add our\ndecryption certificates in step two.\n\n457\n00:22:27.130 --> 00:22:30.230\nWe add the relying party for\nthe namespace here in step three.\n\n458\n00:22:30.230 --> 00:22:33.600\nAnd we'll add our claim rules,\nI wanted to say craim rules.\n\n459\n00:22:33.600 --> 00:22:38.630\nWe'll add our claim rules in step four and\nspecify what those are.\n\n460\n00:22:38.630 --> 00:22:41.190\nAnd then once we have all\nof that set up we'll be\n\n461\n00:22:41.190 --> 00:22:42.870\nshowing you how to do the claim rules.\n\n462\n00:22:42.870 --> 00:22:47.190\nAnd setting up the process in\na separate hands-on demonstration.\n\n463\n00:22:47.190 --> 00:22:49.780\nWe'll walk through these aspects,\nsetting claims and\n\n464\n00:22:49.780 --> 00:22:52.640\nattributes and\nhow to do the relying party trust.\n\n465\n00:22:52.640 --> 00:22:53.880\nHow to set up the rules.\n\n466\n00:22:53.880 --> 00:22:55.720\nWe'll walk you through all\nthis to make sure you see it.\n\n467\n00:22:55.720 --> 00:22:58.360\nThis is really just a high\nlevel conversation right now\n\n468\n00:22:58.360 --> 00:23:00.050\nto explain the moving parts to you.\n\n469\n00:23:00.050 --> 00:23:03.280\nBut we'll go ahead and we'll actually\nbe able to step through all this.\n\n470\n00:23:03.280 --> 00:23:06.650\nAnd when we're done we can then\nactually link to the Azure fabric.\n\n471\n00:23:06.650 --> 00:23:10.160\nHow we can provide or use, through ADFS,\n\n472\n00:23:10.160 --> 00:23:14.560\nthe ability to then actually\nuse ADFS as a relying party.\n\n473\n00:23:14.560 --> 00:23:18.680\nAnd or be able to use\nthe identity provider framework\n\n474\n00:23:18.680 --> 00:23:22.125\nthe Azure give us to then be able\nto make claims and authenticate.\n\n475\n00:23:22.125 --> 00:23:24.195\nSo that we can run stuff up in the web and\n\n476\n00:23:24.195 --> 00:23:29.255\nactually allow ourselves to be able to\nuse that extended authentication process.\n\n477\n00:23:29.255 --> 00:23:31.375\nThat Active Directory Federation Services\nprovides.\n\n478\n00:23:31.375 --> 00:23:33.685\nSo, this is kind of\na nice feature as well.\n\n479\n00:23:33.685 --> 00:23:34.705\nWe could set this up and\n\n480\n00:23:34.705 --> 00:23:38.225\nlink it to our identity or have it\nbecome our identity provider for us.\n\n481\n00:23:38.225 --> 00:23:41.010\nSo this is pretty cool when we think\nabout all the different web services.\n\n482\n00:23:41.010 --> 00:23:45.110\nAnd different ways in which we can\nset up and link ADFS into the Cloud.\n\n483\n00:23:45.110 --> 00:23:48.440\nThis is another very important\npiece of what we're doing.\n\n484\n00:23:48.440 --> 00:23:51.420\nWhen we, now let me just move\nthis over here so we can go in.\n\n485\n00:23:51.420 --> 00:23:52.340\nIf we could go back for\n\n486\n00:23:52.340 --> 00:23:54.570\none second I just wanna show you\nsomething on the Azure site.\n\n487\n00:23:54.570 --> 00:23:58.480\nI'm just on the usual site looking at this\ndocumentation, and we have this URL for\n\n488\n00:23:58.480 --> 00:23:59.050\nyou in the show note.\n\n489\n00:23:59.050 --> 00:24:02.582\nSo you're able to read up on that but the\nfew slides we wanted to provide to you and\n\n490\n00:24:02.582 --> 00:24:03.284\nshow you here.\n\n491\n00:24:03.284 --> 00:24:06.700\nRight, remember we talked about this\nin other areas we always remind you\n\n492\n00:24:06.700 --> 00:24:08.718\nthere's a free trial out there for Azure.\n\n493\n00:24:08.718 --> 00:24:11.704\nIf you wanna give it a shot, there's\nalways a link typically up on the page.\n\n494\n00:24:11.704 --> 00:24:15.792\nYou can go in, set up an account, if you\ndon't have one, if you've used it before,\n\n495\n00:24:15.792 --> 00:24:18.960\nyou get a couple $100 in hosting\ncredits so you can go ahead and\n\n496\n00:24:18.960 --> 00:24:22.704\nplay around with this a little bit before\nyou actually have to commit to buying\n\n497\n00:24:22.704 --> 00:24:26.540\nservices and you're setting them up and\nusing them and paying as you go.\n\n498\n00:24:26.540 --> 00:24:29.900\nSo you'll have the opportunity to set\nthis up and see how to configure it and\n\n499\n00:24:29.900 --> 00:24:33.090\nunderstand how to integrate it before\nyou actually decide to commit to it.\n\n500\n00:24:33.090 --> 00:24:36.140\nSo it is something you should take\na look at, you have the products here,\n\n501\n00:24:36.140 --> 00:24:36.750\nthe solutions are here.\n\n502\n00:24:36.750 --> 00:24:38.740\nThey explain everything to you.\n\n503\n00:24:38.740 --> 00:24:42.440\nAnd Microsoft gives you the opportunity\nto actually play with this technology\n\n504\n00:24:42.440 --> 00:24:45.660\nhands on before you have to commit to\nusing it, which is also kind of nice.\n\n505\n00:24:45.660 --> 00:24:47.330\nAnd you could configure this whole thing,\n\n506\n00:24:47.330 --> 00:24:51.060\nset it up to your on-prem ADFS\nprovider in this demo environment.\n\n507\n00:24:51.060 --> 00:24:55.260\nBecause this is a fully featured,\nfully functional Azure connect or\n\n508\n00:24:55.260 --> 00:24:58.190\nas your platform you're just\ngetting a couple $100 in credit so\n\n509\n00:24:58.190 --> 00:25:00.070\nyou don't have to pay initially to use it.\n\n510\n00:25:00.070 --> 00:25:03.310\nBut you can convert this over and make\nthis functional display by adding your\n\n511\n00:25:03.310 --> 00:25:05.350\ncredit card information in and\npaying as you go.\n\n512\n00:25:05.350 --> 00:25:06.910\nSo you could set this up here.\n\n513\n00:25:06.910 --> 00:25:08.240\nInitially sync it up.\n\n514\n00:25:08.240 --> 00:25:10.000\nYou can also talk about this.\n\n515\n00:25:10.000 --> 00:25:12.030\nTake out an Office 365 demo.\n\n516\n00:25:12.030 --> 00:25:13.190\nI talked about,\n\n517\n00:25:13.190 --> 00:25:17.030\nyou get a 30 day demo trial there\non one of the lower level plans.\n\n518\n00:25:17.030 --> 00:25:19.685\nConfigure that, set that up so\nyou could play with it a little bit.\n\n519\n00:25:19.685 --> 00:25:22.525\nSo if you need some hands on time\nto see how these things are done,\n\n520\n00:25:22.525 --> 00:25:25.055\nyou could obviously watch us\ngo through the walk through\n\n521\n00:25:25.055 --> 00:25:27.085\nthat we're gonna do in upcoming episodes.\n\n522\n00:25:27.085 --> 00:25:29.635\nBut if you wanna do it yourself,\ndon't be afraid to go out there,\n\n523\n00:25:29.635 --> 00:25:32.395\ntake advantage of these opportunities\nto set these Surfaces up and\n\n524\n00:25:32.395 --> 00:25:35.525\nplay with them to configure all\nthe different moving parts and pieces.\n\n525\n00:25:35.525 --> 00:25:36.565\n&gt;&gt; Very cool, right?\n\n526\n00:25:36.565 --> 00:25:41.480\nThe ability to use your ADFS\nwith either Azure, Office 365.\n\n527\n00:25:41.480 --> 00:25:44.880\nDefinitely two really viable\noptions that you may want to\n\n528\n00:25:45.980 --> 00:25:47.210\nmake available to yourself.\n\n529\n00:25:47.210 --> 00:25:49.880\nYou never know when that can become very,\nvery handy for you.\n\n530\n00:25:49.880 --> 00:25:51.647\nI've seen it done a couple\nof different ways and\n\n531\n00:25:51.647 --> 00:25:54.749\nits really neat to watch it connect and\nmake sure everything is working correctly.\n\n532\n00:25:54.749 --> 00:25:57.280\n&gt;&gt; Yeah, it is, it is kind of cool, yeah.\n\n533\n00:25:57.280 --> 00:25:58.267\n&gt;&gt; So, Adam we thank you for\n\n534\n00:25:58.267 --> 00:26:01.480\njoining us, but it looks like\nwe have rounded off this show.\n\n535\n00:26:01.480 --> 00:26:05.400\nWe will be back with more on this very\ntopic the good old federated services.\n\n536\n00:26:05.400 --> 00:26:06.390\n&gt;&gt; Yeah, we gotta talk about.\n\n537\n00:26:06.390 --> 00:26:08.670\n&gt;&gt; We got a few other things to roll over,\nright?\n\n538\n00:26:08.670 --> 00:26:11.460\n&gt;&gt; We do claim providers we've\ngotta just go and talk about those.\n\n539\n00:26:11.460 --> 00:26:13.980\nYou've heard me mention claim\nproviders aligned parties.\n\n540\n00:26:13.980 --> 00:26:16.370\nI've talked about the attribute,\nthe attribute store.\n\n541\n00:26:16.370 --> 00:26:17.390\nI've been through all these things.\n\n542\n00:26:17.390 --> 00:26:19.340\nWe're just gonna define\nthem a little bit more.\n\n543\n00:26:19.340 --> 00:26:21.750\nDraw you out a little bit\nmore on some of the detail.\n\n544\n00:26:21.750 --> 00:26:23.230\nWe'll go through and\n\n545\n00:26:23.230 --> 00:26:26.580\nwe'll talk about claim rules a little bit\nto what's the language around claim rules.\n\n546\n00:26:26.580 --> 00:26:27.900\nHow do we set those up.\n\n547\n00:26:27.900 --> 00:26:30.340\nSo, we're gonna finish describing\neverything, then we're gonna go in,\n\n548\n00:26:30.340 --> 00:26:34.130\nin a separate episode, as I've alluded to,\nor a couple episodes most likely, and\n\n549\n00:26:34.130 --> 00:26:37.220\nwe will be doing a walk-through,\na thorough walk-through,\n\n550\n00:26:37.220 --> 00:26:40.180\non setting this up kind of top to\nbottom and showing you how it's done.\n\n551\n00:26:40.180 --> 00:26:40.980\n&gt;&gt; All right.\n&gt;&gt; So, we're doing a lot.\n\n552\n00:26:40.980 --> 00:26:41.950\n&gt;&gt; That sounds exciting.\n\n553\n00:26:41.950 --> 00:26:42.600\nLooking forward to that.\n\n554\n00:26:42.600 --> 00:26:43.970\nHopefully, you are as well.\n\n555\n00:26:43.970 --> 00:26:47.010\nWell, like I said for\nthis episode we are one and done.\n\n556\n00:26:47.010 --> 00:26:49.180\nThat being said we're gonna sign off for\nITProTV.\n\n557\n00:26:49.180 --> 00:26:51.470\nI've been your host, Daniel Lowrie.\n\n558\n00:26:51.470 --> 00:26:53.285\n&gt;&gt; I'm Adam Gordon.\n\n559\n00:26:53.285 --> 00:26:53.979\n&gt;&gt; And we'll see you next time.\n\n560\n00:26:53.979 --> 00:27:00.928\n[MUSIC]\n\n561\n00:27:00.928 --> 00:27:03.528\n&gt;&gt; Thank you for watching ITPRO.TV\n\n",
          "vimeoId": "213221532"
        },
        {
          "description": "In this episode, Daniel and Adam continue discussing components and steps for implementing Federated Identity Services. Here they round out their overview of topics by discussing Claims Provider Trust components, creating Claims Rules, designing Claims types, and implementing Web Application Proxy.",
          "length": "1504",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-3-implementing_federated_identity_pt3-041217-PGM.00_00_11_22.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-3-implementing_federated_identity_pt3-041217-PGM.00_00_11_22.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-3-implementing_federated_identity_pt3-041217-PGM.00_00_11_22.Still001-sm.jpg",
          "title": "Implementing Federated Identity Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:01.220\nWelcome to ITProTV.\n\n2\n00:00:01.220 --> 00:00:02.301\nI'm your host, Don Pezet.\n\n3\n00:00:02.301 --> 00:00:08.256\n[CROSSTALK]\n[SOUND]\n\n4\n00:00:08.256 --> 00:00:11.973\nYou're watching ITProTV.\n\n5\n00:00:11.973 --> 00:00:13.926\nAll right, greetings, everyone, and\n\n6\n00:00:13.926 --> 00:00:16.349\nwelcome to another exciting\nepisode of ITProTV.\n\n7\n00:00:16.349 --> 00:00:18.849\nI'm your host, Daniel Lowrie, and\n\n8\n00:00:18.849 --> 00:00:23.699\nin today's episode we're back\nwith more of our 70-4 14 series.\n\n9\n00:00:23.699 --> 00:00:27.339\nAnd joining us in the studio again\ncontinuing on with more of our federated\n\n10\n00:00:27.339 --> 00:00:29.760\nservices, our good friend,\nMr. Adam Gordon.\n\n11\n00:00:29.760 --> 00:00:31.083\nAdam, welcome back, sir,\nand how's it going?\n\n12\n00:00:31.083 --> 00:00:32.361\nGoing well, going well.\n\n13\n00:00:32.361 --> 00:00:36.530\nI am feeling claim and\nprovider like all at once.\n\n14\n00:00:36.530 --> 00:00:37.860\nYou could say I'm a claim provider.\n\n15\n00:00:37.860 --> 00:00:41.200\nSo what we're gonna be talking about\nhere in part three, claim providers.\n\n16\n00:00:41.200 --> 00:00:41.920\nWhat are they?\n\n17\n00:00:41.920 --> 00:00:43.290\nYou've heard me talk about them before.\n\n18\n00:00:43.290 --> 00:00:44.210\nWe'll explain them.\n\n19\n00:00:44.210 --> 00:00:46.930\nWe're talking about relying parties,\nwhat those are.\n\n20\n00:00:46.930 --> 00:00:49.267\nNot lying parties, by the way,\nbut relying parties.\n\n21\n00:00:49.267 --> 00:00:51.658\nI had that happen with a customer once,\nwe were talking about this whole thing.\n\n22\n00:00:51.658 --> 00:00:53.423\nHe kept saying, you're saying we're lying.\n\n23\n00:00:53.423 --> 00:00:55.722\nNo, no, you're relying.\n\n24\n00:00:55.722 --> 00:00:56.708\nYou're lying again?\n\n25\n00:00:56.708 --> 00:00:58.508\n[LAUGH] Somebody.\n\n26\n00:00:58.508 --> 00:00:59.530\nYou lied again, right?\n\n27\n00:00:59.530 --> 00:01:00.200\nYeah, exactly.\n\n28\n00:01:00.200 --> 00:01:00.820\nYou re-lied.\nYou're gonna\n\n29\n00:01:00.820 --> 00:01:02.360\ntake what they're giving you and\nvalidate it.\n\n30\n00:01:02.360 --> 00:01:05.310\nSo we're gonna talk about relying parties,\nmaking sure we understand what\n\n31\n00:01:05.310 --> 00:01:08.610\nthe nature of trust is, and go through\nthat whole thought process with you.\n\n32\n00:01:08.610 --> 00:01:11.350\nTalk about the attribute store\na little bit, how we set that up.\n\n33\n00:01:11.350 --> 00:01:13.270\nWhat that is, talk about claim rules.\n\n34\n00:01:13.270 --> 00:01:16.440\nAll the different moving parts that we've\nbeen speaking about we'll just go back and\n\n35\n00:01:16.440 --> 00:01:17.830\nmake sure that we're\ncomfortable with them.\n\n36\n00:01:18.910 --> 00:01:22.490\nMake sure we understand them, gonna show\nyou what a sample claim rule looks like.\n\n37\n00:01:22.490 --> 00:01:23.900\nMake sure we have a sense of that.\n\n38\n00:01:23.900 --> 00:01:26.890\nGot a list of the different\nclaims that you may actually use.\n\n39\n00:01:26.890 --> 00:01:28.270\nWe'll show you what\nthose look like just so\n\n40\n00:01:28.270 --> 00:01:30.770\nyou understand where we can go with that.\n\n41\n00:01:30.770 --> 00:01:33.990\nWe'll be wrapping up our conversations\nmost likely in this episode.\n\n42\n00:01:33.990 --> 00:01:37.460\nAll the overview background material\nover the last couple of episodes.\n\n43\n00:01:37.460 --> 00:01:39.700\nAnd then, of course, hopefully,\nyou're looking forward to,\n\n44\n00:01:39.700 --> 00:01:43.130\ncuz I know we certainly have put some\ntime and effort into the walk-through\n\n45\n00:01:43.130 --> 00:01:45.800\nthat you'll be able to see in\nupcoming episodes as well.\n\n46\n00:01:45.800 --> 00:01:48.530\nSo you'll wanna check that out to\nhopefully cement all this knowledge,\n\n47\n00:01:48.530 --> 00:01:49.320\nput it together for you and\n\n48\n00:01:49.320 --> 00:01:51.680\nshow you kinda start to finish,\nhow all this comes together.\n\n49\n00:01:51.680 --> 00:01:53.281\nAll right, so\nlet's start by jumping in and\n\n50\n00:01:53.281 --> 00:01:54.980\ntalking a little bit\nabout claims providers.\n\n51\n00:01:54.980 --> 00:01:59.221\nThe idea here is that the account\npartner organization, the entity that is\n\n52\n00:01:59.221 --> 00:02:04.018\nwhere the claimant comes from, that's\nthe user that wants to present themselves.\n\n53\n00:02:04.018 --> 00:02:09.684\nAnd say hey, please trust me so I can use\nresources in the resource partner domain.\n\n54\n00:02:09.684 --> 00:02:13.550\nAnd if we wanna just take a quick look and\nremind ourselves of this.\n\n55\n00:02:13.550 --> 00:02:16.940\nWe would just come up here real quick.\n\n56\n00:02:16.940 --> 00:02:18.466\nWe could take a look, and\n\n57\n00:02:18.466 --> 00:02:22.720\nwe can see that we have our partner\norganization off to the left.\n\n58\n00:02:22.720 --> 00:02:27.239\nWe have our relying party, our partner\norganization is at the left, excuse me,\n\n59\n00:02:27.239 --> 00:02:31.558\nlower left, our relying party, our\nresource organization is what I meant to\n\n60\n00:02:31.558 --> 00:02:35.110\nsay although it's not labeled that way,\noff to the right.\n\n61\n00:02:35.110 --> 00:02:39.100\nWe have our perimeter network there\nthat's our DMZ, or our web app proxy,\n\n62\n00:02:39.100 --> 00:02:43.580\nor federation service proxy depending on\nversion of Windows is gonna be located.\n\n63\n00:02:43.580 --> 00:02:47.783\nWe have our claims aware app running on\nour web server sitting there in the DMZ.\n\n64\n00:02:47.783 --> 00:02:53.060\nAnd then on the corporate side of that\nnetwork, we have our directory service,\n\n65\n00:02:53.060 --> 00:02:57.240\nour AD DS and our AD FS Solutions,\nour federation servers.\n\n66\n00:02:57.240 --> 00:03:01.270\nRemember the Active Directory domain\ncontroller is gonna be our claim provider.\n\n67\n00:03:01.270 --> 00:03:02.329\nIt's gonna have our attributes store.\n\n68\n00:03:02.329 --> 00:03:06.590\nSo it's gonna be able to authenticate\nclaims and specify or manage that process\n\n69\n00:03:06.590 --> 00:03:10.026\nwith trust relationships between\nthe partner organization and\n\n70\n00:03:10.026 --> 00:03:11.629\nthe resource organization.\n\n71\n00:03:11.629 --> 00:03:14.451\nSo we're gonna be taking a look at all\nthese moving parts and what they are.\n\n72\n00:03:14.451 --> 00:03:16.739\nBut we've been through this already and\ntalked about this.\n\n73\n00:03:16.739 --> 00:03:21.380\nSo the claim provider is gonna\nprovide claims to its users.\n\n74\n00:03:21.380 --> 00:03:25.185\nMeaning the partner organization claim\nprovider is giving the claimants from\n\n75\n00:03:25.185 --> 00:03:26.435\nthe partner organization.\n\n76\n00:03:26.435 --> 00:03:30.485\nClaims that they can use and send over\ninto the resource organization to\n\n77\n00:03:30.485 --> 00:03:35.297\nvalidate who they are based on whatever\nagreements we've specified ahead of time.\n\n78\n00:03:35.297 --> 00:03:39.275\nWell, let's just take a look at what\nsome of those claims potentially are.\n\n79\n00:03:40.550 --> 00:03:42.640\nWe have a list of claim types here.\n\n80\n00:03:42.640 --> 00:03:44.580\nAnd if we just go full screen for\na minute just so\n\n81\n00:03:44.580 --> 00:03:47.400\nyou can see the document,\nit'll be a little bit easier for you.\n\n82\n00:03:47.400 --> 00:03:48.180\nYou know what I realized?\n\n83\n00:03:48.180 --> 00:03:50.692\nI have to go through and\nI have to just fix that URL there.\n\n84\n00:03:50.692 --> 00:03:53.052\nRemind me, realtime note.\n\n85\n00:03:53.052 --> 00:03:54.132\nNo problem, [LAUGH].\n\n86\n00:03:54.132 --> 00:03:56.121\nJust remind me as we go through,\nI did not realize,\n\n87\n00:03:56.121 --> 00:03:57.754\nI must have hit a space\nas I was doing that.\n\n88\n00:03:57.754 --> 00:04:00.831\nThe attribute's just gotta be\ntruncated back one space so\n\n89\n00:04:00.831 --> 00:04:03.020\nthat they actually show up as URLs.\n\n90\n00:04:03.020 --> 00:04:06.717\nBut the URI schema reference is\nactually the URI there that we\n\n91\n00:04:06.717 --> 00:04:09.920\nneed in order to be able to\nprovide the path for this.\n\n92\n00:04:09.920 --> 00:04:11.510\nBut you'll see the claim types.\n\n93\n00:04:11.510 --> 00:04:14.718\nWe have email address,\ngiven name, name, UPN.\n\n94\n00:04:14.718 --> 00:04:17.660\nThere's a whole list of them here,\ncommon name.\n\n95\n00:04:17.660 --> 00:04:20.600\nWe have just all sorts of\ndifferent ones that could be used.\n\n96\n00:04:20.600 --> 00:04:24.720\nWe have role, surname,\npersonal private identifier.\n\n97\n00:04:24.720 --> 00:04:28.440\nThink of that essentially\nmaybe an employee number.\n\n98\n00:04:28.440 --> 00:04:30.390\nSomething like that that may be unique.\n\n99\n00:04:30.390 --> 00:04:32.960\nSo we'll be able to focus on that.\n\n100\n00:04:32.960 --> 00:04:39.040\nWe have authentication method,\ndeny only group or primary SID.\n\n101\n00:04:39.040 --> 00:04:40.300\nSo we've got group SID.\n\n102\n00:04:40.300 --> 00:04:43.040\nWe've got just a whole bunch\nof these that can be used.\n\n103\n00:04:43.040 --> 00:04:45.275\nEach one you'll notice,\nI did get it right for some of them.\n\n104\n00:04:45.275 --> 00:04:50.084\n[LAUGH] [LAUGH] Each one of them has\na URI that essentially allows us if you\n\n105\n00:04:50.084 --> 00:04:54.994\nlook at schemas.microsoft.com/ws,\netc., etc, this is just the link\n\n106\n00:04:54.994 --> 00:04:59.650\nthat takes you out to actually see\nthe information for this online.\n\n107\n00:04:59.650 --> 00:05:01.220\nBut this is where these\nare all registered.\n\n108\n00:05:01.220 --> 00:05:02.860\nThese are coming from Microsoft.\n\n109\n00:05:02.860 --> 00:05:04.390\nMicrosoft develops and\n\n110\n00:05:04.390 --> 00:05:08.660\nlays out the schema for the claims\nin AD FS and then presents them.\n\n111\n00:05:08.660 --> 00:05:13.550\nAnd you would have to provide this\ninformation to identify the claim, right?\n\n112\n00:05:13.550 --> 00:05:15.910\nSo this is what we need, and if we go and\n\n113\n00:05:15.910 --> 00:05:20.850\nwe take a look at just one of these,\npress Ctrl, you click the link.\n\n114\n00:05:20.850 --> 00:05:22.810\nLet's just do this, one second.\n\n115\n00:05:22.810 --> 00:05:29.550\nDo it this way and\nyou go grab one of these and just go out.\n\n116\n00:05:34.475 --> 00:05:35.620\nIt's been made.\n\n117\n00:05:35.620 --> 00:05:36.850\nOkay, so it's temporarily unavailable.\n\n118\n00:05:36.850 --> 00:05:38.415\nMicrosoft's not in\nbusiness today apparently.\n\n119\n00:05:38.415 --> 00:05:41.374\n[LAUGH] They've decided they're not\ngonna provide that information.\n\n120\n00:05:41.374 --> 00:05:44.115\nBut there may just be a problem\nwith the lookup right now.\n\n121\n00:05:44.115 --> 00:05:45.802\nHere.\nNo, that's something separate,\n\n122\n00:05:45.802 --> 00:05:48.580\nthat's the claim rule primer that\nwe have set up separately for that.\n\n123\n00:05:48.580 --> 00:05:53.110\nBut you'll be able to go in, and you'll\nbe able to grab whatever the appropriate\n\n124\n00:05:53.110 --> 00:05:54.750\ninformation is for those claims.\n\n125\n00:05:54.750 --> 00:05:55.737\nBut you can see them there.\n\n126\n00:05:55.737 --> 00:05:58.729\nAnd we'll be able to use those claims or\nthe claim and\n\n127\n00:05:58.729 --> 00:06:02.070\nthen the partner organization\ncan provide those claims.\n\n128\n00:06:02.070 --> 00:06:06.390\nNow, you can declare and create your\nown claims through the schema as well.\n\n129\n00:06:06.390 --> 00:06:09.770\nSo in other words, you can set up and\nmap additional properties or\n\n130\n00:06:09.770 --> 00:06:12.700\nclaims that are unique\nto your organization.\n\n131\n00:06:12.700 --> 00:06:14.390\nYou just have to have them made available.\n\n132\n00:06:14.390 --> 00:06:17.716\nYou have to be able to share them with\nthe organization that's gonna have\n\n133\n00:06:17.716 --> 00:06:21.710\nthe trust with you that you're going\nto essentially present the claims to so\n\n134\n00:06:21.710 --> 00:06:22.930\nthey can be validated.\n\n135\n00:06:22.930 --> 00:06:28.480\nWe can map these claims, in other words,\nto other claims inside an organization or\n\n136\n00:06:28.480 --> 00:06:31.480\nother properties that will\nequate the claim, if you will.\n\n137\n00:06:31.480 --> 00:06:33.840\nAnd as a result of that,\nwe can actually have our own.\n\n138\n00:06:33.840 --> 00:06:36.180\nWe just don't have to go with the ones\nthat Microsoft has presented.\n\n139\n00:06:36.180 --> 00:06:37.840\nSo we do have the ability to do this.\n\n140\n00:06:37.840 --> 00:06:40.380\nWe establish a relationship\nwith the claim provider.\n\n141\n00:06:40.380 --> 00:06:43.590\nWe configure the claim provider\ntrust in order to do this.\n\n142\n00:06:43.590 --> 00:06:46.500\nThe relying party is\nthe federation service or\n\n143\n00:06:46.500 --> 00:06:50.640\napplication that will consume the claims,\nas we were talking about.\n\n144\n00:06:50.640 --> 00:06:54.610\nAnd so the relying party is going to be\n\n145\n00:06:54.610 --> 00:06:58.364\nwhat we call the partner resource network\nas opposed to the partner organization.\n\n146\n00:06:58.364 --> 00:07:01.920\nAnd that's the group that's gonna get\nthe claims in, validate them against\n\n147\n00:07:01.920 --> 00:07:05.670\nthe federation server and\nthen look them up and send them back.\n\n148\n00:07:05.670 --> 00:07:09.410\nAnd say the claimant is accepted or the\nclaimant is denied based on the fact that\n\n149\n00:07:09.410 --> 00:07:13.584\nwe have a trust relationship that allows\nus to be able to validate the claims.\n\n150\n00:07:13.584 --> 00:07:18.060\nSo the relying party consumes claims that\na claim provider is going to present.\n\n151\n00:07:18.060 --> 00:07:20.727\nThe claim provider is\nthe partner organization.\n\n152\n00:07:20.727 --> 00:07:25.150\nThe claimant, as I've been referring to\nthem, that is sending those claims across.\n\n153\n00:07:25.150 --> 00:07:27.420\nSo we just wanna make\nsure we're aware of that.\n\n154\n00:07:27.420 --> 00:07:32.170\nWe configure the claim rules that will\nallow us to transform incoming claims, map\n\n155\n00:07:32.170 --> 00:07:36.250\nthem from the claim provider into other\nvalues, as I was suggesting we can do.\n\n156\n00:07:36.250 --> 00:07:38.510\nWe present those compatible claims and\n\n157\n00:07:38.510 --> 00:07:41.050\nthen allow us to authenticate\nas a result of that.\n\n158\n00:07:41.050 --> 00:07:44.070\nWe use claim rules to\nbe able to do this and\n\n159\n00:07:44.070 --> 00:07:46.500\nwe implement this through\nthe attribute store.\n\n160\n00:07:46.500 --> 00:07:50.531\nThe attribute store is set up and\nallows us to be able to think of this as\n\n161\n00:07:50.531 --> 00:07:54.840\nthe directory or the database in AD FS\nthat stores all the user accounts and\n\n162\n00:07:54.840 --> 00:07:56.810\nall the associated attributes.\n\n163\n00:07:56.810 --> 00:07:58.938\nIt's where we have the list\nof all the claimants and\n\n164\n00:07:58.938 --> 00:08:00.584\nthe attributes associated with them.\n\n165\n00:08:00.584 --> 00:08:03.291\nIt's like a lookup table, probably\na good way of thinking about that.\n\n166\n00:08:03.291 --> 00:08:06.503\nAnd so we have a little bit of\ninformation on the attribute store here,\n\n167\n00:08:06.503 --> 00:08:09.280\nthe overview on it, just so\nyou can read up on it a little bit,\n\n168\n00:08:09.280 --> 00:08:12.236\nsee what it's all about,\nhave a better understanding on this.\n\n169\n00:08:12.236 --> 00:08:16.773\nThe idea is that we're going be able to go\nin and query against the attribute store\n\n170\n00:08:16.773 --> 00:08:20.909\nin order to validate the incoming claims\nand map them to whatever we need to\n\n171\n00:08:20.909 --> 00:08:25.005\nunderstand to be able to authenticate and\nassuming that look up is true.\n\n172\n00:08:25.005 --> 00:08:28.760\nWe relay that information back and\nallow the user to be authenticated.\n\n173\n00:08:28.760 --> 00:08:31.370\nSo we have the information here.\n\n174\n00:08:31.370 --> 00:08:34.200\nWe take a look at, if you just look\nat the documentation over here,\n\n175\n00:08:34.200 --> 00:08:36.750\nthe use of supported SAML\nauthentication context.\n\n176\n00:08:36.750 --> 00:08:38.801\nWe've talked about SAMLl and\nthe use of that.\n\n177\n00:08:38.801 --> 00:08:40.250\nAnd so we can go ahead and\n\n178\n00:08:40.250 --> 00:08:45.340\nwe can just read up if necessary on all\nthe information for the attribute store.\n\n179\n00:08:45.340 --> 00:08:49.440\nWe have the store exceptions, some sample\ncustom attribute store implementations.\n\n180\n00:08:49.440 --> 00:08:51.226\nGot some documentation\non how to set that up.\n\n181\n00:08:51.226 --> 00:08:54.082\nSetting up and registering,\nI know it's kinda hard to see,\n\n182\n00:08:54.082 --> 00:08:57.106\nit's blow you, behind me there,\nrather just go full screen for\n\n183\n00:08:57.106 --> 00:08:59.806\none second there's like three\nlook ups to your game see.\n\n184\n00:08:59.806 --> 00:09:03.573\nBut registry in the attributes story\nusing the DFS Management console so\n\n185\n00:09:03.573 --> 00:09:06.190\nhow do we actually configure and\nset this up?\n\n186\n00:09:06.190 --> 00:09:09.350\nAnd how do we also registrar\nusing PowerShell we can in and\n\n187\n00:09:09.350 --> 00:09:12.035\ndo either one of these just\nscrolling down towards the bottom.\n\n188\n00:09:12.035 --> 00:09:16.330\nIn the ADFS Management Console, you can\ngo in, set up the trust relationship,\n\n189\n00:09:16.330 --> 00:09:20.185\nright-click the attribute store, and\nthen add your own attribute store.\n\n190\n00:09:20.185 --> 00:09:22.325\nAgain, in the walk through you'll\nbe able to see how we do all this.\n\n191\n00:09:22.325 --> 00:09:24.515\nThis'll be coming up in a future episode.\n\n192\n00:09:24.515 --> 00:09:26.195\nWe could add that custom\nattribute store in.\n\n193\n00:09:26.195 --> 00:09:29.845\nYou'll see the information there, it's\na little bit involved, but we go ahead and\n\n194\n00:09:29.845 --> 00:09:30.535\nadd that in.\n\n195\n00:09:30.535 --> 00:09:33.321\nJust a long string of stuff that\nwe have to put in, basically.\n\n196\n00:09:33.321 --> 00:09:38.131\nIf we do it with PowerShell use the add\nADFS attributes store commandlet type here\n\n197\n00:09:38.131 --> 00:09:42.446\nyou'll see qualified name we just\nspecified the name string connection\n\n198\n00:09:42.446 --> 00:09:47.340\nstring it goes all the way across there\nand then we're able to bring that in.\n\n199\n00:09:47.340 --> 00:09:51.000\nSo the attributes store we'll just\nthat directory that we gonna use.\n\n200\n00:09:51.000 --> 00:09:55.328\nWe support either directories or databases\nof the following types, remember I did say\n\n201\n00:09:55.328 --> 00:09:59.374\ndatabase, because we can use SQL as a\nbackend database for the attribute store.\n\n202\n00:09:59.374 --> 00:10:04.260\nSo we do support AD DS, Active Directory,\nas an LDAP lookup attribute store.\n\n203\n00:10:04.260 --> 00:10:07.840\nAnything from Server 2003 or\nnewer can be used.\n\n204\n00:10:07.840 --> 00:10:12.160\nAnybody out there Server 2003 still,\nremember, time is running short.\n\n205\n00:10:12.160 --> 00:10:15.380\nGotta get rid of that and\nupgrade to at least 2008, hopefully 12, or\n\n206\n00:10:15.380 --> 00:10:17.440\neven at this point Server 16.\n\n207\n00:10:17.440 --> 00:10:20.899\nLDAP, so any open LDAP provider\ncan be used generically.\n\n208\n00:10:20.899 --> 00:10:24.556\nSQL Server 2005 or newer on\nthe database side can be used again.\n\n209\n00:10:24.556 --> 00:10:29.219\nProbably don't wanna be running\nSQL Server 2005 anymore,\n\n210\n00:10:29.219 --> 00:10:33.460\nit's a little bit old,\nout of warranty as we say, right?\n\n211\n00:10:33.460 --> 00:10:36.830\nBut 2008, 2012, certainly 2014, even 2016\non SQL side, but do keep that in mind.\n\n212\n00:10:36.830 --> 00:10:40.540\nAnd also, we could set up our own\ncustom attributes as I just showed you.\n\n213\n00:10:40.540 --> 00:10:43.692\nSo I just wanted to make sure you're aware\nof that and we have a sense of that,\n\n214\n00:10:43.692 --> 00:10:45.440\nbecause that will be important.\n\n215\n00:10:45.440 --> 00:10:49.010\nWe can also set up claim provider trust,\nas I was talking about.\n\n216\n00:10:49.010 --> 00:10:51.306\nThe ability to link\nthe partner organization and\n\n217\n00:10:51.306 --> 00:10:55.230\nthe resource organization and set up a\npathway for communication between the two.\n\n218\n00:10:55.230 --> 00:10:58.660\nThe claim provider trust is made\nup of three distinct components.\n\n219\n00:10:58.660 --> 00:11:01.480\nWe have the federation metadata,\nthat's actually number one.\n\n220\n00:11:01.480 --> 00:11:03.180\nThe claim, we talked about claims,\nnumber two.\n\n221\n00:11:03.180 --> 00:11:06.260\nAnd the claim rules, which I'm gonna\ntalk about show you here in a minute.\n\n222\n00:11:06.260 --> 00:11:10.450\nSo we set this up and this is going from\nthe claim provider which remember is\n\n223\n00:11:10.450 --> 00:11:14.914\nthe claim into organization the partner\norganization that provides claims,\n\n224\n00:11:14.914 --> 00:11:17.910\nand the trust that goes over\ninto the relying party.\n\n225\n00:11:17.910 --> 00:11:20.858\nWe also set up a relying party\ntrust going the other way,\n\n226\n00:11:20.858 --> 00:11:24.780\nthese are two one way trusts essentially\nright that are unidirectional.\n\n227\n00:11:24.780 --> 00:11:28.430\nSo the partner organization sets up\na trust provides the claims over to\n\n228\n00:11:28.430 --> 00:11:32.590\nthe relying party, and then the relying\nparties sets up trust back the other way\n\n229\n00:11:32.590 --> 00:11:35.740\nthat lets them cross pound\neight communicated etc.\n\n230\n00:11:35.740 --> 00:11:39.890\nThis defines relationship and allows\nthe application that is gonna be consuming\n\n231\n00:11:39.890 --> 00:11:43.640\nthe claims to be able to do that and\nunderstand the federation,\n\n232\n00:11:43.640 --> 00:11:47.820\nprovide that level of control\nover site and validation.\n\n233\n00:11:47.820 --> 00:11:51.820\nIf we go back and we take a look here, let\nme just zoom in while we're doing that.\n\n234\n00:11:51.820 --> 00:11:52.716\nNot there but right up here.\n\n235\n00:11:52.716 --> 00:11:55.620\n[LAUGH] We go back and we take a look.\n\n236\n00:11:55.620 --> 00:11:58.430\nSo at the lower left-hand side\nin the blue monitored area.\n\n237\n00:11:58.430 --> 00:11:59.823\nThat's our partner organization.\n\n238\n00:11:59.823 --> 00:12:04.297\nOur claim provider trust will be coming\nfrom there over into the relying party or\n\n239\n00:12:04.297 --> 00:12:07.960\nthe partner organization to\nthe federation server there.\n\n240\n00:12:07.960 --> 00:12:09.030\nAnd the federation server and\n\n241\n00:12:09.030 --> 00:12:12.710\nthe relying party sets up the relying\nparty trust going the other way.\n\n242\n00:12:12.710 --> 00:12:16.520\nAnd this allows the web server in the\nperimeter network that's claims aware and\n\n243\n00:12:16.520 --> 00:12:18.660\nis part of the relying party or\n\n244\n00:12:18.660 --> 00:12:22.380\nthe resource organization to consume\nthose claims once they're authenticated.\n\n245\n00:12:22.380 --> 00:12:26.210\nSo we have this bidirectional or\nunidirectional the two one way trusts that\n\n246\n00:12:26.210 --> 00:12:30.150\nequal a bi directional flow of information\nset up and that's what we're referring to.\n\n247\n00:12:30.150 --> 00:12:33.280\nThe relying party trust essentially\nmade up of the same three components,\n\n248\n00:12:33.280 --> 00:12:35.620\nfederation meta data,\nclaims, and claim rules,\n\n249\n00:12:35.620 --> 00:12:37.410\nso we're gonna be able to set that up.\n\n250\n00:12:37.410 --> 00:12:40.337\nWith regards to claim rules we\nhave a claim rules template,\n\n251\n00:12:40.337 --> 00:12:43.672\na set of templates that are used,\nto be able to fashion these rules,\n\n252\n00:12:43.672 --> 00:12:47.255\nstandardize them so as we create them\nthey look and operate the same way.\n\n253\n00:12:47.255 --> 00:12:50.014\nCuz we can not use claim rules over,\nand over, and\n\n254\n00:12:50.014 --> 00:12:52.865\nover again outside of\nthe claim trust we set up.\n\n255\n00:12:52.865 --> 00:12:55.103\nThey're linked to that\nside of the equation, so\n\n256\n00:12:55.103 --> 00:12:58.065\nwe have templates that are set up and\nstandardized for us to use.\n\n257\n00:12:58.065 --> 00:13:01.499\nHave a nice little handy template for\nus to take a look at,\n\n258\n00:13:01.499 --> 00:13:06.510\nor rather a list of templates to take\na look at what the claim rules look like.\n\n259\n00:13:06.510 --> 00:13:09.360\nIf we could go full screen just so\nyou could see that real quickly.\n\n260\n00:13:09.360 --> 00:13:11.360\nThat'll be great, there we go.\n\n261\n00:13:11.360 --> 00:13:14.100\nAnd so you'll see I just put\ntogether a little list for you here.\n\n262\n00:13:14.100 --> 00:13:18.503\nPass through or filter an incoming claim,\ntransform an incoming claim,\n\n263\n00:13:18.503 --> 00:13:20.720\nsend LDAP attributes as claims.\n\n264\n00:13:20.720 --> 00:13:24.690\nSend group memberships as a claim\nand/or send claims using a custom rule.\n\n265\n00:13:24.690 --> 00:13:29.330\nThese are, excuse me, gonna be\nthe five different claim templates or\n\n266\n00:13:29.330 --> 00:13:32.450\nclaim rule templates that we can specify.\n\n267\n00:13:32.450 --> 00:13:35.932\nWe add these in by using\nthe Add Transform Claim Rule Wizard.\n\n268\n00:13:35.932 --> 00:13:38.765\nWe determine which template we're\ngonna use we then go ahead and\n\n269\n00:13:38.765 --> 00:13:40.310\nrun it through the wizard.\n\n270\n00:13:40.310 --> 00:13:43.240\nThese rules are specific to\nthe federation trust being configured for\n\n271\n00:13:43.240 --> 00:13:46.980\nus as I said, either the relying party or\nthe claim provider trust.\n\n272\n00:13:46.980 --> 00:13:48.860\nSo they're gonna be on one side or\nthe other.\n\n273\n00:13:48.860 --> 00:13:51.650\nYou configure them twice,\nin other words, going each way.\n\n274\n00:13:51.650 --> 00:13:52.780\nWe can't use them on other trusts.\n\n275\n00:13:52.780 --> 00:13:55.820\nSo we have to make sure we\nhave the rule template set up.\n\n276\n00:13:55.820 --> 00:13:59.110\nSo essentially, we can get both sides\nof that specified the right way.\n\n277\n00:13:59.110 --> 00:14:04.040\nAnd once we do that,\nwe don't have to set up some claim rules.\n\n278\n00:14:04.040 --> 00:14:08.150\nLet me just show you an example of\nwhat claim rules are gonna look like.\n\n279\n00:14:08.150 --> 00:14:12.099\nThe Claim Rules Language Primer which\nI have setup here on the website for\n\n280\n00:14:12.099 --> 00:14:14.426\nyou is gonna be a great way for\nyou to go on and\n\n281\n00:14:14.426 --> 00:14:18.460\ntake a look at all the surrounding and\nupdated or supported information.\n\n282\n00:14:18.460 --> 00:14:20.040\nYou wanna understand about the rules.\n\n283\n00:14:20.040 --> 00:14:22.670\nThe rules themselves\nare gonna look like this.\n\n284\n00:14:22.670 --> 00:14:24.040\nWe'll get to this in just a second.\n\n285\n00:14:24.040 --> 00:14:28.060\nAnd you could see the language is\npotentially a little bit foreigny.\n\n286\n00:14:28.060 --> 00:14:28.910\nYou gotta understand it.\n\n287\n00:14:28.910 --> 00:14:31.750\nWe'll break it down for you in just\na minute, but In order to get a good\n\n288\n00:14:31.750 --> 00:14:35.440\nunderstanding of this, you may wanna\ntake a look at the rule primer here.\n\n289\n00:14:35.440 --> 00:14:39.166\nIt's got a little introduction to claims\narea, it's a little security brief\n\n290\n00:14:39.166 --> 00:14:42.336\nunclaimed based identities, and\nthen mapping our ADFS concept.\n\n291\n00:14:42.336 --> 00:14:46.655\nBut there's a nice Amount of information\nhere that walks us through the logic of\n\n292\n00:14:46.655 --> 00:14:48.465\nhow to set up the claim rules.\n\n293\n00:14:48.465 --> 00:14:50.075\nWhat they are, how to structure them.\n\n294\n00:14:50.075 --> 00:14:53.035\nSo it's a great little overview and\nprimer for you.\n\n295\n00:14:53.035 --> 00:14:57.465\nBut the idea is that we write these\nrules to be able process the claims and\n\n296\n00:14:57.465 --> 00:15:01.015\nmake sure we manage the data enough\nto provide it the right way.\n\n297\n00:15:01.015 --> 00:15:03.795\nSo what we're gonna want to do is,\nlet's get rid of that.\n\n298\n00:15:03.795 --> 00:15:07.175\nIs come over here and let's talk\nabout what claim rules look like.\n\n299\n00:15:07.175 --> 00:15:09.030\nI'm gonna just move the up just a smidge.\n\n300\n00:15:09.030 --> 00:15:09.850\nOr was it scooch?\n\n301\n00:15:09.850 --> 00:15:10.730\nA scooch.\nScooch.\n\n302\n00:15:10.730 --> 00:15:11.730\nA scooch.\nA scooch.\n\n303\n00:15:11.730 --> 00:15:12.370\nA scooch, long-o.\n\n304\n00:15:12.370 --> 00:15:13.770\nDo I have to do this when I say that?\n\n305\n00:15:13.770 --> 00:15:14.895\nYou do, you do, it's mandatory.\n\n306\n00:15:14.895 --> 00:15:16.250\nDo the hanging pinky.\n\n307\n00:15:16.250 --> 00:15:18.837\nSo, we're gonna move that up just a bit,\na wee bit as we say.\n\n308\n00:15:18.837 --> 00:15:21.490\nAnd I just wanna talk to you\nabout what Claim Rules look like.\n\n309\n00:15:21.490 --> 00:15:24.590\nSo, you could see here Claim Rules\nare structured very specifically.\n\n310\n00:15:24.590 --> 00:15:27.630\nThere is a thought process, a language and\na methodology associated with them.\n\n311\n00:15:27.630 --> 00:15:31.086\nWe have a special operator which\nis the arrow right here that is\n\n312\n00:15:31.086 --> 00:15:35.806\nused to separate the condition, statement\nfrom or the conditions from the issue and\n\n313\n00:15:35.806 --> 00:15:36.951\nstatement rather.\n\n314\n00:15:36.951 --> 00:15:40.140\nAnd we use a semicolon that ends\nthe overall rule statement.\n\n315\n00:15:40.140 --> 00:15:42.020\nSo put together a little\nexample of this for\n\n316\n00:15:42.020 --> 00:15:47.140\nyou, you'll see right here,\nthis is a typical claim rule.\n\n317\n00:15:47.140 --> 00:15:51.620\nSemicolon ends the statement right over\nhere, so we know it's ended there.\n\n318\n00:15:51.620 --> 00:15:55.122\nWe have our special operator that\nis gonna separate the condition.\n\n319\n00:15:55.122 --> 00:15:59.676\nThere's our condition right there\nfrom the actual issue in statement.\n\n320\n00:15:59.676 --> 00:16:02.325\nThis is the issue in statement right here.\n\n321\n00:16:02.325 --> 00:16:06.689\nAnd then you'll see that we end\nthe actual rule right there.\n\n322\n00:16:06.689 --> 00:16:10.520\nSo three distinct moving parts,\nfourth includes special operator.\n\n323\n00:16:10.520 --> 00:16:12.450\nWe have the condition.\n\n324\n00:16:12.450 --> 00:16:14.020\nWe have the special operator.\n\n325\n00:16:14.020 --> 00:16:15.024\nWe have the issue or\nstatement or issue in statement.\n\n326\n00:16:15.024 --> 00:16:18.410\nAnd we have the semicolon\nthat ends the statement.\n\n327\n00:16:18.410 --> 00:16:20.060\nSo let's break this down.\n\n328\n00:16:20.060 --> 00:16:23.952\nThis right here,\nc:[Type == http://ITVPro.TV/members],\n\n329\n00:16:23.952 --> 00:16:25.745\nthat's the condition, right?\n\n330\n00:16:25.745 --> 00:16:30.320\nSo we would have to satisfy that\ncondition, or be from that namespace in\n\n331\n00:16:30.320 --> 00:16:35.529\nother words, right, to meet the condition\nand validate out against this rule.\n\n332\n00:16:35.529 --> 00:16:40.443\nAnd say yeah, yeah, I'm coming in from\nthere, from ITVPro.TV subdomain members or\n\n333\n00:16:40.443 --> 00:16:41.860\nsubsite members.\n\n334\n00:16:41.860 --> 00:16:45.550\nAnd then the issuance\nstatement starts here,\n\n335\n00:16:45.550 --> 00:16:49.239\nissue type is set to whatever right there,\nand\n\n336\n00:16:49.239 --> 00:16:54.352\nyou'll see HTTP://MegaCorp.com/HR,\nwhatever it is and\n\n337\n00:16:54.352 --> 00:16:59.199\nthe issuer, and\nthe information about that the values etc.\n\n338\n00:16:59.199 --> 00:17:01.630\nThey obviously would be specified.\n\n339\n00:17:01.630 --> 00:17:03.530\nThis is the issuance statement.\n\n340\n00:17:03.530 --> 00:17:06.875\nAnd so, put all this together and\nwe get what's known as a claim rule.\n\n341\n00:17:06.875 --> 00:17:11.701\nAnd the claim rule allows us to create a\nseries of logical statements that have to\n\n342\n00:17:11.701 --> 00:17:15.520\nbe validated against for\nthe claims in order to be processed and\n\n343\n00:17:15.520 --> 00:17:19.840\nto be proved to be true or false, or\nto be validated or not validated.\n\n344\n00:17:19.840 --> 00:17:20.493\nI mean, I choose to see that, I suppose.\nAnd so\n\n345\n00:17:20.493 --> 00:17:23.873\nthe claim rules are an important part of\nwhat we do, and as we do our walk through\n\n346\n00:17:23.873 --> 00:17:27.374\nin the upcoming episode, we're gonna\nactually show how to create a claim rule.\n\n347\n00:17:27.374 --> 00:17:31.360\nWe'll walk through, we'll do that,\nwe'll set that up in the interface.\n\n348\n00:17:31.360 --> 00:17:33.350\nBut you're gonna wanna\nread up on claim rules and\n\n349\n00:17:33.350 --> 00:17:35.396\njust to understand the logic of them.\n\n350\n00:17:35.396 --> 00:17:37.186\nIt will be importing for\nyou, and as I said and\n\n351\n00:17:37.186 --> 00:17:39.368\nI strongly recommend we'll\nget back to it real quick.\n\n352\n00:17:39.368 --> 00:17:43.499\nLooking at the Claim Rule Language Primer\nwould be a good way for you to do that or\n\n353\n00:17:43.499 --> 00:17:46.457\nat least just get spun up and\nup to speed on that, right?\n\n354\n00:17:46.457 --> 00:17:50.716\nThe thought process about how claims flow,\nwe've kinda been talking at it, and\n\n355\n00:17:50.716 --> 00:17:51.925\ntalking about it.\n\n356\n00:17:51.925 --> 00:17:54.121\nWe'll talk about claim types we just,\nkinda I went through and\n\n357\n00:17:54.121 --> 00:17:55.333\nshowed you what they looked like.\n\n358\n00:17:55.333 --> 00:17:58.757\nBut the thought process to how claims\nflows is probably worth just two minutes\n\n359\n00:17:58.757 --> 00:17:59.582\nof our time.\n\n360\n00:17:59.582 --> 00:18:03.802\nWe process and deliver claims from\nthe claim provider to the relying party or\n\n361\n00:18:03.802 --> 00:18:07.412\nthe third party that is the relying\nparty that relies on the claims.\n\n362\n00:18:07.412 --> 00:18:11.680\nSo the idea that we're talking\nabout is essentially taking\n\n363\n00:18:11.680 --> 00:18:16.120\nthe claims from the partner organization\nand providing them across the divide\n\n364\n00:18:16.120 --> 00:18:20.010\nover the relying party or the relying\norganization, the resource organization.\n\n365\n00:18:20.010 --> 00:18:22.950\nAnd so\nthe claims pipeline is what we call this.\n\n366\n00:18:22.950 --> 00:18:25.074\nAnd it provides for\na flow that it's pretty straight forward.\n\n367\n00:18:25.074 --> 00:18:28.780\nWe've kind of documented it out in\nthe steps we've talked about here.\n\n368\n00:18:28.780 --> 00:18:31.006\nBut there is other stuffs\ngoing on in these eight steps.\n\n369\n00:18:31.006 --> 00:18:33.700\nSo I just wanna call out\nthe specific three elements\n\n370\n00:18:33.700 --> 00:18:35.444\nthat are involved in the claims pipeline.\n\n371\n00:18:35.444 --> 00:18:37.328\nClaims are received from\nthe claim provider and\n\n372\n00:18:37.328 --> 00:18:38.703\nin the process by the claim rules.\n\n373\n00:18:38.703 --> 00:18:42.998\nWe go through, in other words, and\nvalidate the claims against the rules to\n\n374\n00:18:42.998 --> 00:18:47.310\nmake sure that they actually do meet\nthe criteria and if that they are valid.\n\n375\n00:18:47.310 --> 00:18:49.039\nSo we go through and go through, or\n\n376\n00:18:49.039 --> 00:18:53.336\nrather process through the acceptance\ntransform rules, that's what we call them,\n\n377\n00:18:53.336 --> 00:18:55.916\nthat we've defined in\nthe claims provider trust.\n\n378\n00:18:55.916 --> 00:18:59.789\nRemember the trust that comes from\nthe claims provider over on this side,\n\n379\n00:18:59.789 --> 00:19:03.050\nthe blue machine,\nall the way over to the relying party.\n\n380\n00:19:03.050 --> 00:19:04.910\nThat's where we are going\nto see those rules.\n\n381\n00:19:04.910 --> 00:19:08.520\nThese rules specify which of the claims\nthe providers can issue to accept.\n\n382\n00:19:08.520 --> 00:19:12.670\nSo we're going to validate the claims that\nwe're going to specifying and sending out.\n\n383\n00:19:12.670 --> 00:19:18.040\nWe then, with that, we go through,\nwe transform those, or through the rules\n\n384\n00:19:18.040 --> 00:19:22.250\nwe transform those claims, processes them,\nmake sure that they are authorized.\n\n385\n00:19:22.250 --> 00:19:26.040\nMake sure they meet the proper form,\nthe information is accurate.\n\n386\n00:19:26.040 --> 00:19:27.822\nWe specified them in the proper way.\n\n387\n00:19:27.822 --> 00:19:29.685\nThere's no typos, there's no issues.\n\n388\n00:19:29.685 --> 00:19:32.805\nWe do a sanity check in other words and\njust make sure everything is good.\n\n389\n00:19:32.805 --> 00:19:36.421\nWe also determine if the user has\npermission to access the relying party as\n\n390\n00:19:36.421 --> 00:19:37.309\na result of this.\n\n391\n00:19:37.309 --> 00:19:41.061\nBecause you may have a user than comes\nalong that's anonymous user in this mix,\n\n392\n00:19:41.061 --> 00:19:44.925\nand doesn't have rights to be able to make\nclaims and send them across the divide,\n\n393\n00:19:44.925 --> 00:19:46.773\ncuz they're not gonna be authorized,\n\n394\n00:19:46.773 --> 00:19:49.075\ncuz they're not gonna be\nable to devalidate it.\n\n395\n00:19:49.075 --> 00:19:52.245\nSo we're gonna check to make\nsure users have the ability and\n\n396\n00:19:52.245 --> 00:19:54.950\nthe right to submit, and\nactually use clients as well.\n\n397\n00:19:54.950 --> 00:19:57.376\nThat's part of what the rules will do,\nso we're gonna do that also.\n\n398\n00:19:57.376 --> 00:20:00.650\nThese rules are defined as part\nof the relying party trust.\n\n399\n00:20:00.650 --> 00:20:02.260\nSo, on the other side,\n\n400\n00:20:02.260 --> 00:20:05.660\nthe relying party trust, we have a set\nof rules that validate user identity\n\n401\n00:20:05.660 --> 00:20:07.720\nto ensure that we're only getting\nusers that are authorized.\n\n402\n00:20:07.720 --> 00:20:11.180\nSo we have these things going\non essentially simultaneously\n\n403\n00:20:11.180 --> 00:20:11.980\nwith one another.\n\n404\n00:20:11.980 --> 00:20:15.470\nWe take the claims, we process them,\nvalidate that they're actually good.\n\n405\n00:20:15.470 --> 00:20:19.640\nWe send them, but we also double-check\nthe user to ensure the user is accurate.\n\n406\n00:20:19.640 --> 00:20:22.570\nAnd then we go ahead and\nwe output that information.\n\n407\n00:20:22.570 --> 00:20:26.550\nAnd assuming that those rules\nare validated correctly,\n\n408\n00:20:26.550 --> 00:20:29.090\nwe're able to then send claims\nthat are gonna be authorized.\n\n409\n00:20:29.090 --> 00:20:31.947\nAnd users that are validated and are able\nto use the service are approved so\n\n410\n00:20:31.947 --> 00:20:34.499\nthat they can actually go in and\nsend information back and forth.\n\n411\n00:20:34.499 --> 00:20:38.751\nSo yeah, there's a thought process that\ngoes on here, it's very important for\n\n412\n00:20:38.751 --> 00:20:43.002\nus to be thinking about how to set this up\nand ensure that everything is talking and\n\n413\n00:20:43.002 --> 00:20:46.030\neverything is configured properly,\nif you will.\n\n414\n00:20:46.030 --> 00:20:51.340\nYou ever like try to call up an online\nprovider, a credit card company,\n\n415\n00:20:51.340 --> 00:20:56.299\nsomething like that, validate who you\nare- [LAUGH] Yeah that's always fun.\n\n416\n00:20:56.299 --> 00:21:00.545\nBut you forgot the answer to your\nsecurity question, stuff like that.\n\n417\n00:21:00.545 --> 00:21:03.543\nAnd you're going down the list like\nall right, what else can you ask me.\n\n418\n00:21:03.543 --> 00:21:07.704\nAnd they just don't have enough\ninformation on file to prove who you are.\n\n419\n00:21:07.704 --> 00:21:10.326\nAnd you're kinda stuck in that never\nnever land of I know who I am, but\n\n420\n00:21:10.326 --> 00:21:11.333\nthey can't validate me.\n\n421\n00:21:11.333 --> 00:21:13.540\nThat's where those social engineering\nshows that we have come in handy.\n\n422\n00:21:13.540 --> 00:21:16.250\n[LAUGH] It does, absolutely, correct.\n\n423\n00:21:16.250 --> 00:21:18.694\nYou just assume someone else's [CROSSTALK]\nand you configure their account.\n\n424\n00:21:18.694 --> 00:21:22.074\nBut you know, ever so often this happens\nwhere if the claims that are provided,\n\n425\n00:21:22.074 --> 00:21:23.645\nif you think about the logic of this.\n\n426\n00:21:23.645 --> 00:21:26.333\nIf the claims that are provided\ncan't be substantiated and\n\n427\n00:21:26.333 --> 00:21:30.202\nvalidated by the claimant, because they\ndon't have the right information to do so,\n\n428\n00:21:30.202 --> 00:21:32.242\nhow do you prove who you are,\nin other words,\n\n429\n00:21:32.242 --> 00:21:36.440\nif the stuff that's supposed to prove who\nyou are can't be used for whatever reason?\n\n430\n00:21:36.440 --> 00:21:37.580\nWe always have to have a fail safe.\n\n431\n00:21:37.580 --> 00:21:39.529\nThere has to be some sort of\nadditional mechanism associated\n\n432\n00:21:39.529 --> 00:21:40.454\nwith the process to do that.\n\n433\n00:21:40.454 --> 00:21:42.962\nIf we don't have that,\nit may be impossible for\n\n434\n00:21:42.962 --> 00:21:46.410\nus to actually make a successful claim and\nauthenticate.\n\n435\n00:21:46.410 --> 00:21:48.290\nI'm not suggesting that it happens here.\n\n436\n00:21:48.290 --> 00:21:52.328\nI'm just pointing out that in the real\nworlds, as you translate federation and\n\n437\n00:21:52.328 --> 00:21:55.582\nthis thought process out to your\nexternal customers and usage,\n\n438\n00:21:55.582 --> 00:21:59.938\nyou see these scenarios sometimes where\nthe proper claims cannot be substantiated.\n\n439\n00:21:59.938 --> 00:22:03.484\nAnd the fail safe mechanisms to\nvalidate identity are not operating,\n\n440\n00:22:03.484 --> 00:22:06.967\ncuz you don't know what your password is,\nor you forgot your PIN, or\n\n441\n00:22:06.967 --> 00:22:11.174\nyou don't know the answer to the security\nquestions you set up a million years ago,\n\n442\n00:22:11.174 --> 00:22:13.429\ncuz you haven't had to use them for\nso long.\n\n443\n00:22:13.429 --> 00:22:15.840\nJust all that random stuff that happens.\n\n444\n00:22:15.840 --> 00:22:16.850\nI have this happened recently,\n\n445\n00:22:16.850 --> 00:22:19.260\nwhen I was setting up some of\nthe new apps on the phone.\n\n446\n00:22:19.260 --> 00:22:23.161\nBecause I had to go back and reprogram\neverything, put it all back in for\n\n447\n00:22:23.161 --> 00:22:23.817\nmy old one.\n\n448\n00:22:23.817 --> 00:22:28.265\nAnd there were one or two that\nwere like yeah, no that's not you.\n\n449\n00:22:28.265 --> 00:22:31.850\nI'm like of course to know that's not you,\nwe can't validate you, right?\n\n450\n00:22:31.850 --> 00:22:34.480\nSomebody like you, but\nnot you, that's just not you.\n\n451\n00:22:34.480 --> 00:22:36.600\nYou just don't know what to\nsay at that point, right?\n\n452\n00:22:36.600 --> 00:22:39.262\nIt's time to contact this provider\n[CROSSTALK] Well, and so yeah.\n\n453\n00:22:39.262 --> 00:22:40.049\nIt's me, I swear.\n\n454\n00:22:40.049 --> 00:22:42.152\nTry to get on a phone with a human these\ndays, right, that's the other thing.\n\n455\n00:22:42.152 --> 00:22:45.357\nI mean, it's almost like you're\non a planet by yourself.\n\n456\n00:22:45.357 --> 00:22:46.529\nDo not get me started on that.\n\n457\n00:22:46.529 --> 00:22:49.433\nBecause there's just no way to talk to a\nperson that can actually help you, right?\n\n458\n00:22:49.433 --> 00:22:51.102\nWhy would they do that?\n\n459\n00:22:51.102 --> 00:22:54.416\nThat would be like- There's no vested\ninterest [CROSSTALK] Getting you into\n\n460\n00:22:54.416 --> 00:22:57.100\nthe things that you need to have done,\nand that's, we can't have.\n\n461\n00:22:57.100 --> 00:23:01.725\nThat would clearly be valuable, but it's\nnot possible unfortunately in most cases.\n\n462\n00:23:01.725 --> 00:23:02.308\nSo that also can be an issue.\n\n463\n00:23:02.308 --> 00:23:05.765\nSo a word to the wise,\nwarning to the cautious, right.\n\n464\n00:23:05.765 --> 00:23:10.095\nSet up ADFS, it's obviously gonna work for\nyou really well as you've seen.\n\n465\n00:23:10.095 --> 00:23:12.819\nJoin us in the upcoming episodes, we're\ngonna do the walk through start to drill\n\n466\n00:23:12.819 --> 00:23:14.915\ndown and actually show you the nuts and\nbolts of how to do this.\n\n467\n00:23:14.915 --> 00:23:17.732\nBut you wanna make sure\nthat when you set this up,\n\n468\n00:23:17.732 --> 00:23:22.613\nyou really spend time on the claim piece,\nthe claimants, setting those claims up,\n\n469\n00:23:22.613 --> 00:23:26.560\nalso mapping them so\nthat they are approved and authenticated.\n\n470\n00:23:26.560 --> 00:23:28.334\nBut also as we're were talking about,\nunderstand the claim rules language.\n\n471\n00:23:28.334 --> 00:23:31.983\nCuz if you don't set those rules up\nthe right way to authenticate on the front\n\n472\n00:23:31.983 --> 00:23:36.050\nend, as we were saying the structure of\nthe claims, but also the authorized users.\n\n473\n00:23:36.050 --> 00:23:41.540\nThere's two pieces, each side to the trust\nhave rules that authenticate their piece.\n\n474\n00:23:41.540 --> 00:23:43.908\nThe claims on the claimants side,\non the partner organization.\n\n475\n00:23:43.908 --> 00:23:47.600\nThe authentication of the users\non the relying party side.\n\n476\n00:23:47.600 --> 00:23:50.768\nBoth trusts have to authenticate and\nprovide rule language to do so.\n\n477\n00:23:50.768 --> 00:23:55.490\nIf you can't meet the criteria, there's\nno way for you to essentially get in.\n\n478\n00:23:55.490 --> 00:23:59.366\nYou're looking in from outside,\nI wish I was in there, but I can't use it.\n\n479\n00:23:59.366 --> 00:24:01.683\nSo just make sure you're\nfamiliar with all that, and\n\n480\n00:24:01.683 --> 00:24:05.079\nwe'll go into a little more depth and show\nyou what it means call that out as we do\n\n481\n00:24:05.079 --> 00:24:07.440\nthe walk through in the upcoming episodes.\n\n482\n00:24:07.440 --> 00:24:08.334\nWell that'll be a lot of fun.\n\n483\n00:24:08.334 --> 00:24:11.029\nAlso it'll be a lot of fun is\nchecking to the transcript,\n\n484\n00:24:11.029 --> 00:24:14.192\nsee how many times you actually had\nto say the word claim or claims.\n\n485\n00:24:14.192 --> 00:24:15.061\nClaim and claims.\n\n486\n00:24:15.061 --> 00:24:17.805\nI'm game,\nI'm guessing that shows up quite a bit.\n\n487\n00:24:17.805 --> 00:24:19.933\nBut it's kinda pertinent to the show.\n\n488\n00:24:19.933 --> 00:24:21.599\n[LAUGH] It is, just a little bit.\n\n489\n00:24:21.599 --> 00:24:22.391\nJust a hair.\n\n490\n00:24:22.391 --> 00:24:23.583\nJust a scooch.\n\n491\n00:24:23.583 --> 00:24:26.295\nAll right, that being said,\neveryone thanks for joining us today.\n\n492\n00:24:26.295 --> 00:24:29.930\nBut it looks like that\nwraps up this episode.\n\n493\n00:24:29.930 --> 00:24:33.796\nDefinitely join us for our next upcoming\nepisode, cuz that's where we're gonna\n\n494\n00:24:33.796 --> 00:24:37.283\nget a little hands on, and I know\neverybody likes that stuff, I know I do.\n\n495\n00:24:37.283 --> 00:24:39.106\nSo Adam,\nI look forward to seeing you there.\n\n496\n00:24:39.106 --> 00:24:39.671\nYep.\nWe do thank you for joining us today.\n\n497\n00:24:39.671 --> 00:24:41.503\nWe thank our good viewers for watching.\n\n498\n00:24:41.503 --> 00:24:45.538\nBut signing off for ITProTV,\nI've been your host, Daniel Lowrie.\n\n499\n00:24:45.538 --> 00:24:47.029\nI\"m an orphan claim.\n\n500\n00:24:47.029 --> 00:24:48.449\n[LAUGH] And we'll see you next time.\n\n501\n00:24:48.449 --> 00:24:55.164\n[MUSIC]\n\n502\n00:24:55.164 --> 00:24:58.899\nThank you for watching IITProTV.\n\n",
          "vimeoId": "213221850"
        },
        {
          "description": "In this episode, Daniel and Adam take all the previously discussed concepts and use them to actually stand up Active Directory Federated Identity Services. Here they take you step-by-step through the process, discussing each component in detail so that you are properly equipped to perform an ADFS implementation.",
          "length": "2147",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-4-implementing_federated_identity_pt4-041217-PGM.00_35_31_09.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-4-implementing_federated_identity_pt4-041217-PGM.00_35_31_09.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-4-implementing_federated_identity_pt4-041217-PGM.00_35_31_09.Still001-sm.jpg",
          "title": "Implementing Federated Identity Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.280 --> 00:00:06.375\nWelcome to ITProTV,\nI'm you host CROSSTALK]\n\n2\n00:00:06.375 --> 00:00:08.159\n[MUSIC]\n\n3\n00:00:08.159 --> 00:00:10.092\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:10.092 --> 00:00:13.420\n&gt;&gt; All right, greetings everyone and\n\n5\n00:00:13.420 --> 00:00:16.600\nwelcome to another great\nepisode of ITProTV.\n\n6\n00:00:16.600 --> 00:00:17.700\nI'm your host Daniel Lowrie and\n\n7\n00:00:17.700 --> 00:00:21.780\nin today's episode we're back\nwith more on our 74 14 series.\n\n8\n00:00:21.780 --> 00:00:25.400\nAnd joining us back in the studio again\nto give us a little, get our hands dirty\n\n9\n00:00:25.400 --> 00:00:29.390\ninside of some of this federative services\nbusiness, our good friend Mr. Adam Gordon.\n\n10\n00:00:29.390 --> 00:00:31.220\nAdam welcome back man,\nhow's it going today?\n\n11\n00:00:31.220 --> 00:00:33.725\n&gt;&gt; Clean.\nLook under the nails, they're clean.\n\n12\n00:00:33.725 --> 00:00:35.620\n&gt;&gt; [LAUGH]\n&gt;&gt; No dirt, anywhere.\n\n13\n00:00:35.620 --> 00:00:37.280\n&gt;&gt; He bathes once a week\nwhether he needs it or not.\n\n14\n00:00:37.280 --> 00:00:42.190\n&gt;&gt; I provide hygienic how to's and\nguided tours of how to configure ADFS.\n\n15\n00:00:42.190 --> 00:00:45.810\nWe are gonna do just that as a matter\nof fact, as Daniel just alluded to.\n\n16\n00:00:45.810 --> 00:00:50.010\nPlease join us and walk through how\nto set up ADFS start to finish.\n\n17\n00:00:50.010 --> 00:00:52.790\nWe've been talking in the last several\nepisodes, and I encourage you to go back\n\n18\n00:00:52.790 --> 00:00:56.120\nand take a look in case you have not seen\nthem, about all of the moving parts.\n\n19\n00:00:56.120 --> 00:01:00.520\nWe've described to you what all\nthe configuration components are of ADFS.\n\n20\n00:01:00.520 --> 00:01:04.940\nWe've talked about the claims,\nthe claim providers, the relying parties,\n\n21\n00:01:04.940 --> 00:01:08.958\nthe trusts, the rules, and\nall the other things that go into that.\n\n22\n00:01:08.958 --> 00:01:12.070\nWe've talked about how to set this\nup to configure it to use online\n\n23\n00:01:12.070 --> 00:01:16.310\nidentity providers,\nboth with Office 365 and the usual fabric.\n\n24\n00:01:16.310 --> 00:01:19.100\nAnd we've gone through and discussed,\nhopefully in enough detail for\n\n25\n00:01:19.100 --> 00:01:23.230\nyou to really give you a good sense\nof this, why federation services and\n\n26\n00:01:23.230 --> 00:01:28.120\nclaim capabilities, so that we can\nleverage external parties and bring them\n\n27\n00:01:28.120 --> 00:01:32.400\ninto the organization and provide\nthem authenticated and secure access\n\n28\n00:01:32.400 --> 00:01:37.130\nto resources under conditions we control\nand that we specify, is so important.\n\n29\n00:01:37.130 --> 00:01:40.590\nWhat we're gonna do now is\nbring that all to life for you.\n\n30\n00:01:40.590 --> 00:01:43.760\nWalk you through how to set this up and\nconfigure it.\n\n31\n00:01:43.760 --> 00:01:47.420\nSo if you'll join me here on the veranda,\nas we say in the south.\n\n32\n00:01:47.420 --> 00:01:48.960\nWe're gonna go ahead and\nwe're gonna get started.\n\n33\n00:01:48.960 --> 00:01:53.650\nSo I've taken the liberty of just\ninstalling as the beginning part of this,\n\n34\n00:01:53.650 --> 00:01:57.790\njust save us a little bit of time\nwith the demo, the ADFS feature and\n\n35\n00:01:57.790 --> 00:02:02.300\nroles and all the associated supporting\nelements there in the domain.\n\n36\n00:02:02.300 --> 00:02:04.980\nSo I've just gone ahead on this machine,\nset up ADFS.\n\n37\n00:02:04.980 --> 00:02:06.150\nI haven't configured it.\n\n38\n00:02:06.150 --> 00:02:09.730\nI've just simply started\nthe installation by going in and\n\n39\n00:02:09.730 --> 00:02:11.880\nrunning through the beginning\npart of the wizard.\n\n40\n00:02:11.880 --> 00:02:14.600\nI left the really important stuff for\nus to go through now.\n\n41\n00:02:14.600 --> 00:02:16.770\nSo I've done the initial install.\n\n42\n00:02:16.770 --> 00:02:18.280\nBut now we have to go through,\n\n43\n00:02:18.280 --> 00:02:21.160\nafter we get done with the initial\ninstantiation of the role.\n\n44\n00:02:21.160 --> 00:02:24.120\nAnd we have to do post\ndeployment configuration.\n\n45\n00:02:24.120 --> 00:02:27.700\nAnd so what we're gonna do is go in and\nconfigure the federation server.\n\n46\n00:02:27.700 --> 00:02:30.950\nWe're gonna go up there, use our link and\nstart the walk through process.\n\n47\n00:02:30.950 --> 00:02:33.270\nSo you're gonna join me\nwhile I click there.\n\n48\n00:02:33.270 --> 00:02:37.490\nWe're gonna get our ADFS services\nconfiguration wizard spun up,\n\n49\n00:02:37.490 --> 00:02:39.272\nlet me just move that over there.\n\n50\n00:02:39.272 --> 00:02:42.130\nAnd so just got a welcome screen,\nnothing too exciting here.\n\n51\n00:02:42.130 --> 00:02:45.130\nHave to have the Active Directory Domain\nadministrator account.\n\n52\n00:02:45.130 --> 00:02:47.220\nMake sure we understand what that is.\n\n53\n00:02:47.220 --> 00:02:50.340\nPublicly trusted certificate for\nSSL Server authentication.\n\n54\n00:02:50.340 --> 00:02:52.480\nTaken care of all those\nthings behind the scenes.\n\n55\n00:02:52.480 --> 00:02:57.490\nWe've got an option here below, create\nthe first federation server in the farm,\n\n56\n00:02:57.490 --> 00:03:00.290\nor add a federation server\nto an existing server farm.\n\n57\n00:03:00.290 --> 00:03:03.780\nWe've talked about the ability\nto scale up and scale out, and\n\n58\n00:03:03.780 --> 00:03:06.350\nbuilding that farm by\nadding multiple servers in.\n\n59\n00:03:06.350 --> 00:03:09.040\nSo we're gonna go ahead and\nstart by installing our first one.\n\n60\n00:03:09.040 --> 00:03:11.120\nBut you understand,\nwe could scale out here,\n\n61\n00:03:11.120 --> 00:03:14.900\nif we already had more than one\nserver instantiated and set up.\n\n62\n00:03:14.900 --> 00:03:17.850\nWe haven't dealt with anything yet\nabout the databases.\n\n63\n00:03:17.850 --> 00:03:20.450\nAre we gonna use the WID,\nthe internal database?\n\n64\n00:03:20.450 --> 00:03:21.760\nScale out to SQL?\n\n65\n00:03:21.760 --> 00:03:23.090\nWe'll be able to specify that and\n\n66\n00:03:23.090 --> 00:03:27.050\ndeal with that here in this area in\njust a minute, we'll get to that.\n\n67\n00:03:27.050 --> 00:03:30.320\nRemember we talked about making choices\nhere as part of the architecture and\n\n68\n00:03:30.320 --> 00:03:31.340\nthe configuration.\n\n69\n00:03:31.340 --> 00:03:34.662\nWe also haven't gotten to the point\nwhere we have to deal with proxies.\n\n70\n00:03:34.662 --> 00:03:38.134\nBut we would wanna specify that and\nthink about that in our minds and\n\n71\n00:03:38.134 --> 00:03:42.226\nunderstand that we may install that web\napp proxy or federation services proxy\n\n72\n00:03:42.226 --> 00:03:46.318\ndepending on the version of the operating\nsystem that will be on the machines,\n\n73\n00:03:46.318 --> 00:03:49.490\nthat will be on the front line in\nthe DMZ to act as our proxies.\n\n74\n00:03:49.490 --> 00:03:53.479\nRemember server 12, federation\nservice proxy, 12R2, we change a name,\n\n75\n00:03:53.479 --> 00:03:57.071\nweb app proxy, it's the updated\nversion of what we're talking about.\n\n76\n00:03:57.071 --> 00:03:59.107\nSo just make sure we are clear on that.\n\n77\n00:03:59.107 --> 00:04:00.440\nWe're gonna click next here.\n\n78\n00:04:01.940 --> 00:04:05.511\nWe're gonna specify the account that the\nAD domain admin permissions are used and\n\n79\n00:04:05.511 --> 00:04:06.398\nassigned through.\n\n80\n00:04:06.398 --> 00:04:09.312\nYou'll see right now it's the domain\nadmin account that's there.\n\n81\n00:04:09.312 --> 00:04:12.530\nIf we had to change that we\ncould go in and click Change.\n\n82\n00:04:12.530 --> 00:04:16.290\nWe're not gonna have to worry about that\nof course because that's already set up.\n\n83\n00:04:16.290 --> 00:04:18.400\nBut let's go ahead and\njust take a look, just so\n\n84\n00:04:18.400 --> 00:04:20.642\nyou could see, very simple interface.\n\n85\n00:04:20.642 --> 00:04:23.740\nWe will just specify the credentials and\nthen go in.\n\n86\n00:04:23.740 --> 00:04:26.960\nAnd we will be able to change\nthat account out for the domain.\n\n87\n00:04:26.960 --> 00:04:30.692\nNotice we do support smart card support,\nprovide smart card support here as well,\n\n88\n00:04:30.692 --> 00:04:33.433\nif necessary to authenticate\nin more secure environments.\n\n89\n00:04:33.433 --> 00:04:37.128\nIf we have multi-factor authentication,\ndrop that smart card in, and\n\n90\n00:04:37.128 --> 00:04:38.880\nwe can authenticate there.\n\n91\n00:04:38.880 --> 00:04:41.920\nWe're gonna move on to\nSpecify Service Properties.\n\n92\n00:04:41.920 --> 00:04:43.080\nSo we're gonna click Next.\n\n93\n00:04:43.080 --> 00:04:45.690\nWe have to import and\nvalidate our certificate here.\n\n94\n00:04:45.690 --> 00:04:49.130\nAnd we have to use our federation, or\nprovide our federation services name.\n\n95\n00:04:49.130 --> 00:04:51.060\nLovely shade of red they chose for\n\n96\n00:04:51.060 --> 00:04:53.670\nindicating that we have not made\na choice here yet, wouldn't you say?\n\n97\n00:04:53.670 --> 00:04:55.822\n&gt;&gt; It's very catching to the eye,\nthat's for sure.\n\n98\n00:04:55.822 --> 00:04:57.012\n[LAUGH]\n&gt;&gt; It is very pleasing,\n\n99\n00:04:57.012 --> 00:04:57.890\nit is very pleasing.\n\n100\n00:04:57.890 --> 00:04:59.443\nSo we are gonna pull down here.\n\n101\n00:04:59.443 --> 00:05:03.881\nWe do have our certificate available here,\napplieddc1practicelabs.com,\n\n102\n00:05:03.881 --> 00:05:05.280\nwe're gonna grab that.\n\n103\n00:05:05.280 --> 00:05:09.040\nAnd then, just to make sure we know what's\ngoing on with that, let's click View.\n\n104\n00:05:09.040 --> 00:05:12.460\nSo we can see that certificate, we'll\njust drag the server here for you, so\n\n105\n00:05:12.460 --> 00:05:13.324\nyou can see that.\n\n106\n00:05:13.324 --> 00:05:15.831\nThis proves the identity\nto a remote computer,\n\n107\n00:05:15.831 --> 00:05:18.158\nensures the identity of a remote computer.\n\n108\n00:05:18.158 --> 00:05:21.092\nSo this certificate is for\nserver authentication,\n\n109\n00:05:21.092 --> 00:05:24.950\nit's gonna be able to provide\nthe identity of a remote machine.\n\n110\n00:05:24.950 --> 00:05:27.506\nIt approves the identity that\nthe remote machine has, or\n\n111\n00:05:27.506 --> 00:05:29.750\nensures the identity of\na remote computer for us.\n\n112\n00:05:29.750 --> 00:05:31.740\nIt allows us to validate\ngoing the other way.\n\n113\n00:05:31.740 --> 00:05:35.470\nSo you'll see it's issue two,\nthis machine issued by the CA,\n\n114\n00:05:35.470 --> 00:05:39.320\nthe root domain or\nroot enterprise CA for the domain.\n\n115\n00:05:39.320 --> 00:05:42.660\nIt's got a one year issuance period,\nsee that there.\n\n116\n00:05:42.660 --> 00:05:45.320\nWe could see all the details if we're\ninterested in going and taking a look.\n\n117\n00:05:45.320 --> 00:05:48.290\nAll right, so we're good with\nthat we have all that set up.\n\n118\n00:05:48.290 --> 00:05:50.070\nNotice that that populates for us,\n\n119\n00:05:50.070 --> 00:05:53.980\nauto populates, the federation service\nname is pulled from the certificate.\n\n120\n00:05:53.980 --> 00:05:56.258\nSo we have all of that information.\n\n121\n00:05:56.258 --> 00:06:00.040\nPlab VC1, practicelabs.com for\nthe service name, for\n\n122\n00:06:00.040 --> 00:06:01.930\nthe federation service display name.\n\n123\n00:06:01.930 --> 00:06:06.410\nWe'll put that in, we'll just go ahead and\nwe'll type in Practice Labs here.\n\n124\n00:06:06.410 --> 00:06:09.320\nOkay, so we're using that information,\nthat environment.\n\n125\n00:06:09.320 --> 00:06:10.410\nWe'll get all that set up.\n\n126\n00:06:11.960 --> 00:06:13.789\nClick Next, give that just a second.\n\n127\n00:06:13.789 --> 00:06:18.388\nWe're then going to create a group managed\nservice account and we're gonna go in and\n\n128\n00:06:18.388 --> 00:06:22.599\nwe're going to populate this, it's\nalready got the domain designation for\n\n129\n00:06:22.599 --> 00:06:24.885\nus, we're just gonna put in an account.\n\n130\n00:06:24.885 --> 00:06:28.714\nNow we have to pre-create this account,\nso we're gonna go ahead, well we should\n\n131\n00:06:28.714 --> 00:06:32.700\npre-create it I should say, I've gone\na head and pre-created it and set it up.\n\n132\n00:06:32.700 --> 00:06:36.240\nWe do have an option to use an existing\ndomain account if there is one, but\n\n133\n00:06:36.240 --> 00:06:38.265\nwe can go ahead and have one created.\n\n134\n00:06:38.265 --> 00:06:40.800\nWe do it either way,\nit's up to us to decide.\n\n135\n00:06:42.370 --> 00:06:48.010\nWe'll go ahead and we'll do,\nwhat are we gonna do, ADF SSA there.\n\n136\n00:06:48.010 --> 00:06:50.280\nRight so put that in.\n\n137\n00:06:50.280 --> 00:06:52.680\nGo ahead and we'll click Next.\n\n138\n00:06:52.680 --> 00:06:54.110\nThen specify the database.\n\n139\n00:06:54.110 --> 00:06:58.350\nThis is where we decide whether we're\ngonna use that Windows Internal Database\n\n140\n00:06:58.350 --> 00:06:59.390\ncalled the WID.\n\n141\n00:06:59.390 --> 00:07:02.385\nIf we do that and\nwe then go to scale this farm out,\n\n142\n00:07:02.385 --> 00:07:06.010\nwe limit it to five servers total\nin the farm with that choice.\n\n143\n00:07:06.010 --> 00:07:07.015\nBecause remember,\n\n144\n00:07:07.015 --> 00:07:10.974\ncreates a writeable/readable copy of\nthe database only on the first server and\n\n145\n00:07:10.974 --> 00:07:15.184\nthen the others are going to be able to\nbe essentially read-only replicas, right?\n\n146\n00:07:15.184 --> 00:07:18.569\nWe're gonna be able to use\nthis one readable/writable\n\n147\n00:07:18.569 --> 00:07:21.417\ncopy to make changes from this one server.\n\n148\n00:07:21.417 --> 00:07:25.347\nAnd everybody else is gonna see those\nchanges after they are updated.\n\n149\n00:07:25.347 --> 00:07:29.957\nWhereas if we go to SQL and we host this\nexternally on an enterprise database,\n\n150\n00:07:29.957 --> 00:07:34.521\nthen every sever is gonna be able to\nhit the database maintained in SQL.\n\n151\n00:07:34.521 --> 00:07:36.153\nAnd it's readable/writeable for\nall of them,\n\n152\n00:07:36.153 --> 00:07:38.273\nand all the servers can\nbe used to make changes.\n\n153\n00:07:38.273 --> 00:07:40.113\nSo it's a question how\nwe choose to do this.\n\n154\n00:07:40.113 --> 00:07:42.693\nWe obviously could scale\nthe on five servers\n\n155\n00:07:42.693 --> 00:07:44.573\nif we use an external SQL implementation.\n\n156\n00:07:44.573 --> 00:07:45.473\nSo up to us.\n\n157\n00:07:45.473 --> 00:07:46.983\nWe're going to use the internal one,\n\n158\n00:07:46.983 --> 00:07:49.223\ncuz we're not going to build out more\nthan one server during the demo.\n\n159\n00:07:49.223 --> 00:07:52.053\nSo there's really no reason to go\nthrough the trouble of integrating a SQL\n\n160\n00:07:52.053 --> 00:07:52.643\ninstance here.\n\n161\n00:07:52.643 --> 00:07:55.311\nBut you just want to make\nsure you understand that, and\n\n162\n00:07:55.311 --> 00:07:56.819\nare aware of the choices here.\n\n163\n00:07:56.819 --> 00:08:00.362\nSo we're going to click Next.\n\n164\n00:08:00.362 --> 00:08:03.480\nGive that just a second,\nit gives us a little summary.\n\n165\n00:08:03.480 --> 00:08:07.170\nNow remember, we've talked about the fact\nthat PowerShell gets spun up behind\n\n166\n00:08:07.170 --> 00:08:10.142\nthe scenes to do a lot of the automation\nwork for us thee days, and\n\n167\n00:08:10.142 --> 00:08:13.470\nwe're gonna use a PowerShell script\nto do all the configuration here.\n\n168\n00:08:13.470 --> 00:08:15.130\nYou have the option of viewing the script.\n\n169\n00:08:15.130 --> 00:08:18.730\nIt's always a good idea, especially if\nyou're not very familiar with PowerShell,\n\n170\n00:08:18.730 --> 00:08:20.134\nif you don't know much about it.\n\n171\n00:08:20.134 --> 00:08:22.709\nOr if you're just learning about it or\nyou know a lot about it but\n\n172\n00:08:22.709 --> 00:08:24.210\nyou wanna see what it's gonna do.\n\n173\n00:08:24.210 --> 00:08:27.720\nSo just take the option here\nreal quick,view the script and\n\n174\n00:08:27.720 --> 00:08:29.490\njust see what is gonna happen.\n\n175\n00:08:29.490 --> 00:08:33.500\nAnd you can take a look here, it's\nreally not that complicated of a script,\n\n176\n00:08:33.500 --> 00:08:36.370\nit's gonna import the ADFS modules.\n\n177\n00:08:36.370 --> 00:08:40.490\nSo it's gonna have the commandlets\navailable to work with ADFS.\n\n178\n00:08:40.490 --> 00:08:45.220\nAnd then it's gonna install the ADFS farm,\nand then use a certificate for that.\n\n179\n00:08:45.220 --> 00:08:48.540\nThere's a thumb print that imports\nfrom the certificate we named.\n\n180\n00:08:48.540 --> 00:08:51.450\nGive the federation service display name,\nthe service name,\n\n181\n00:08:51.450 --> 00:08:54.110\nand the group account identifier\nthat we're gonna specify.\n\n182\n00:08:54.110 --> 00:08:56.210\nIt's gonna go in and\nsubstantiate all that for us.\n\n183\n00:08:56.210 --> 00:08:58.790\nSo that's what PowerShell is gonna do.\n\n184\n00:08:58.790 --> 00:08:59.810\nWe're gonna click Next.\n\n185\n00:09:01.120 --> 00:09:04.540\nWe're going to see all the prereq\nchecks have passed successfully.\n\n186\n00:09:04.540 --> 00:09:08.220\nIf we didn't have any errors here we\ncould and we will, just go ahead and\n\n187\n00:09:08.220 --> 00:09:09.650\nclick Configure right now.\n\n188\n00:09:09.650 --> 00:09:13.230\nIf there was an issue the prereq\ncheck that runs before we actually do\n\n189\n00:09:13.230 --> 00:09:16.310\nthe install and\nthe configuration would tell us, hey,\n\n190\n00:09:16.310 --> 00:09:18.010\nyou gotta fix this or deal with that.\n\n191\n00:09:18.010 --> 00:09:21.623\nWe'd go back and we would make sure\nthat we deal with all those issues, and\n\n192\n00:09:21.623 --> 00:09:23.851\nonce we're done, we'll click Configure.\n\n193\n00:09:23.851 --> 00:09:25.321\nWait for this to finish, and\n\n194\n00:09:25.321 --> 00:09:29.677\nthen once this is installed you'll see\ninstalling the Windows internal database,\n\n195\n00:09:29.677 --> 00:09:32.645\nit's gonna take a couple of\nminutes to stand all this up.\n\n196\n00:09:32.645 --> 00:09:35.385\nSo just sit tight wait for\nus to finish up.\n\n197\n00:09:35.385 --> 00:09:39.515\nAs soon as this finishes up, we'll be\nright back and through the magic of\n\n198\n00:09:39.515 --> 00:09:43.485\nmodern videography we're gonna jump ahead\nand then we're gonna be able to pick right\n\n199\n00:09:43.485 --> 00:09:45.859\nback up where we left off and\ncontinue our demonstration.\n\n200\n00:09:47.290 --> 00:09:48.883\nAll right so\nyou can see we have finished up.\n\n201\n00:09:48.883 --> 00:09:52.270\nWe've got our wizard there,\nsuccess is what we looked for.\n\n202\n00:09:52.270 --> 00:09:54.610\nYou can ignore those cautionary flags,\n\n203\n00:09:54.610 --> 00:09:57.440\npay no attention to the caution\nflags on the screen,\n\n204\n00:09:57.440 --> 00:10:01.140\nas they would say in the Wizard of Oz,\nif the Wizard of was configuring ADFS.\n\n205\n00:10:01.140 --> 00:10:03.460\nYou'll see here,\nserver was successfully configured.\n\n206\n00:10:03.460 --> 00:10:04.551\nWe're not too concerned\nabout the warnings.\n\n207\n00:10:04.551 --> 00:10:08.245\nJust really has to do with some minor\nstuff associated with some ability to be\n\n208\n00:10:08.245 --> 00:10:10.266\nable to manipulate account properties,\n\n209\n00:10:10.266 --> 00:10:12.730\nbecause of the way we're\ndoing the install.\n\n210\n00:10:12.730 --> 00:10:15.530\nSingle server, on the domain controller.\n\n211\n00:10:15.530 --> 00:10:17.334\nWe just have some minor\nstuff we have to go back and\n\n212\n00:10:17.334 --> 00:10:19.772\nfix manually after the facts so,\nwe're not worried about that.\n\n213\n00:10:19.772 --> 00:10:21.305\nEverything's stood up, it's all fine.\n\n214\n00:10:21.305 --> 00:10:25.165\nAll the functionality we need is\nactually there and working already.\n\n215\n00:10:25.165 --> 00:10:26.542\nI'm about to show you that right now.\n\n216\n00:10:26.542 --> 00:10:28.135\nWe're gonna click Close here.\n\n217\n00:10:28.135 --> 00:10:29.995\nWe're gonna switch over\nto another machine for\n\n218\n00:10:29.995 --> 00:10:32.635\njust a minute to validate\nthe installation.\n\n219\n00:10:32.635 --> 00:10:36.545\nThen we're gonna come back and we're gonna\nrun a very important PowerShell command\n\n220\n00:10:36.545 --> 00:10:39.125\nhere to let us manipulate and\nset the value.\n\n221\n00:10:39.125 --> 00:10:44.125\nSo that we can actually go in and start to\nmanage certificates in the ADFS console.\n\n222\n00:10:44.125 --> 00:10:46.090\nI'll show you how to do\nthat in just a moment.\n\n223\n00:10:46.090 --> 00:10:46.770\nLet's go ahead.\n\n224\n00:10:48.250 --> 00:10:53.170\nWe're on a Windows 8 machine that we're\njust using as a client to connect in.\n\n225\n00:10:53.170 --> 00:10:56.350\nAnd what I've done is I've\nrun the following command.\n\n226\n00:10:56.350 --> 00:10:59.230\nJust so you can see this, and\nI apologize, give me one second.\n\n227\n00:10:59.230 --> 00:11:02.761\nI should have thought to make the font a\nlittle bigger on this while we were doing\n\n228\n00:11:02.761 --> 00:11:04.810\nthis just so you could see it.\n\n229\n00:11:04.810 --> 00:11:09.159\nAnd what I did was I just ran this\ncommand right here in the web browser,\n\n230\n00:11:09.159 --> 00:11:12.403\nset up win to our ADFS server\nthat we just confirmed,\n\n231\n00:11:12.403 --> 00:11:15.428\nPlad DC one practice\nlabs.com is that machine,\n\n232\n00:11:15.428 --> 00:11:20.333\nfederation meta data, we talked about\nmeta data in one of our prior episodes.\n\n233\n00:11:20.333 --> 00:11:24.824\nShowed you all the claims that we could\nuse the meta data, URLs for URIs for\n\n234\n00:11:24.824 --> 00:11:25.630\nall of them.\n\n235\n00:11:25.630 --> 00:11:30.870\nYou'll see we have our federation\nmeta data XML file specified there.\n\n236\n00:11:30.870 --> 00:11:32.790\nWhen we connect to that URL,\n\n237\n00:11:32.790 --> 00:11:37.121\nyou can see here that the meta\ndata is available from the server.\n\n238\n00:11:37.121 --> 00:11:40.102\nWhich means the ADFS role\nhas been instantiated and\n\n239\n00:11:40.102 --> 00:11:41.980\nwe can now begin to work with it.\n\n240\n00:11:41.980 --> 00:11:43.784\nSo this is one way that we could check.\n\n241\n00:11:43.784 --> 00:11:46.872\nNow we could go to the server\nmanager obviously on the machine,\n\n242\n00:11:46.872 --> 00:11:49.040\nopen up the console to\nstart managing ADFS.\n\n243\n00:11:49.040 --> 00:11:51.917\nWe're gonna do that as well but,\nit's always good to check for\n\n244\n00:11:51.917 --> 00:11:55.355\nmore than one location to validate\nthat all the services are functioning.\n\n245\n00:11:55.355 --> 00:11:58.860\nSo this is one of the sanity checks\nthat we would use to ensure that that's\n\n246\n00:11:58.860 --> 00:11:59.384\nthe case.\n\n247\n00:11:59.384 --> 00:12:02.440\nSo we're gonna just get rid of that,\ncome back to where we were.\n\n248\n00:12:02.440 --> 00:12:04.740\nWe see the ADFS role\nwas instantiated here.\n\n249\n00:12:04.740 --> 00:12:06.900\nWhat we're gonna do is open\nup PowerShell real quick.\n\n250\n00:12:06.900 --> 00:12:09.820\nI've just taken the liberty of\npre-typing in the command for\n\n251\n00:12:09.820 --> 00:12:11.708\nus, so we could see it there.\n\n252\n00:12:11.708 --> 00:12:16.240\nSet-ADFSProperties AutoCertificateRollover\n$false.\n\n253\n00:12:16.240 --> 00:12:19.980\nWhen we go and we hit this,\nit'll take just a second to set up.\n\n254\n00:12:19.980 --> 00:12:22.750\nOnce we've done this,\nsee it doesn't take very long.\n\n255\n00:12:22.750 --> 00:12:26.493\nWhat we're doing is allowing us to modify\nthe certificates at ADFS we utilize.\n\n256\n00:12:26.493 --> 00:12:30.130\nBy specifying this command it will\nbe very important for us to do that.\n\n257\n00:12:30.130 --> 00:12:33.557\nBecause now what we're gonna do is go in\nand open up the ADFS management console.\n\n258\n00:12:33.557 --> 00:12:35.130\nSo we're just gonna minimize this.\n\n259\n00:12:36.380 --> 00:12:39.490\nWe'll go into Server Manager,\ngo up to Tools here.\n\n260\n00:12:39.490 --> 00:12:44.790\nGo to ADFS,\njust come down here ADFS Management.\n\n261\n00:12:44.790 --> 00:12:45.766\nGive that just a moment.\n\n262\n00:12:48.587 --> 00:12:51.270\nAnd let's just open this up so\nwe can take a look.\n\n263\n00:12:51.270 --> 00:12:55.751\nIf you haven't seen ADFS manager before,\nthis is what the console looks like.\n\n264\n00:12:55.751 --> 00:12:57.910\nJust give you a quick overview here.\n\n265\n00:12:57.910 --> 00:13:00.358\nWe've got our service area,\ntrust relationships, and\n\n266\n00:13:00.358 --> 00:13:01.583\nauthentication policies.\n\n267\n00:13:01.583 --> 00:13:04.935\nWe'll be delving in and going through\nmost of the aspects in here over the next\n\n268\n00:13:04.935 --> 00:13:07.168\nlittle bit as we continue\nto walk through the demo.\n\n269\n00:13:07.168 --> 00:13:10.770\nSo what we're gonna do now is we're\ngonna go ahead and open up Services.\n\n270\n00:13:10.770 --> 00:13:13.574\nAnd then we're gonna go in under Services,\ngo to Certificates here.\n\n271\n00:13:13.574 --> 00:13:16.269\nAnd you'll see that we have some\ncertificates already loaded.\n\n272\n00:13:16.269 --> 00:13:18.810\nWe have our claims subscription area.\n\n273\n00:13:18.810 --> 00:13:22.019\nRemember, we talked about claims and\nthe claim type and the metadata tag for\n\n274\n00:13:22.019 --> 00:13:22.583\nthe schema.\n\n275\n00:13:22.583 --> 00:13:24.127\nI showed you with those working.\n\n276\n00:13:24.127 --> 00:13:27.770\nIf you listed the common ones from\nMicrosoft, you could see them there.\n\n277\n00:13:27.770 --> 00:13:29.495\nWe'll come back,\nwe'll take a look at these as well.\n\n278\n00:13:29.495 --> 00:13:32.084\nBut went through some of\nthe main ones that are there.\n\n279\n00:13:32.084 --> 00:13:33.698\nLet's go back to certificates.\n\n280\n00:13:33.698 --> 00:13:36.816\nWhat we're gonna do is we\nhave to go in and look for\n\n281\n00:13:36.816 --> 00:13:38.957\nadd token signing certificate.\n\n282\n00:13:38.957 --> 00:13:42.310\nSo let's just take a look here.\n\n283\n00:13:42.310 --> 00:13:43.670\nMove these out real quick.\n\n284\n00:13:45.540 --> 00:13:47.600\nSee what we already have and\nthen we'll go over here and\n\n285\n00:13:47.600 --> 00:13:50.380\nwe'll add our token signing\ncertificate in just a second.\n\n286\n00:13:50.380 --> 00:13:53.962\nBut you'll see here we have our\nservice communication certificate,\n\n287\n00:13:53.962 --> 00:13:56.036\ntoken decrypting, and token signing.\n\n288\n00:13:56.036 --> 00:14:00.378\nAnd you'll see we have a certificate stood\nup already that is there for each of them.\n\n289\n00:14:00.378 --> 00:14:03.116\nSo what we're gonna do is\na token signing certificate.\n\n290\n00:14:03.116 --> 00:14:06.679\nWe can either right-click and do that\nfrom here, we can come over here and\n\n291\n00:14:06.679 --> 00:14:08.120\nwe could do it under Actions.\n\n292\n00:14:08.120 --> 00:14:09.655\nIt doesn't really matter where we go,\nit's all the same.\n\n293\n00:14:09.655 --> 00:14:13.463\nSo we're gonna right-click, do\nAdd Token Signing Certificate right here.\n\n294\n00:14:13.463 --> 00:14:16.995\nWe're gonna go through, and what we're\ngonna do is put a certificate in, and\n\n295\n00:14:16.995 --> 00:14:19.832\nthen remove one of the certificates\nthat's there by default,\n\n296\n00:14:19.832 --> 00:14:22.745\nessentially replacing it with\na certificate that we wanna use.\n\n297\n00:14:22.745 --> 00:14:26.535\nSo what we're gonna do is we're gonna\nget a prompt with the certificates that\n\n298\n00:14:26.535 --> 00:14:27.366\nare available.\n\n299\n00:14:27.366 --> 00:14:29.790\nSo we have two that are here.\n\n300\n00:14:29.790 --> 00:14:31.200\nThe issuer practice labs,\n\n301\n00:14:31.200 --> 00:14:35.990\nplaid VC 01CA, the certificate\nauthority and we have two of them.\n\n302\n00:14:35.990 --> 00:14:39.900\nNow you obviously have to know which\none it is that you're gonna use.\n\n303\n00:14:39.900 --> 00:14:43.160\nYou would have to be able to identify\nahead of time which certificates have been\n\n304\n00:14:43.160 --> 00:14:45.690\nloaded up and then as a result\nmake sure that you go through and\n\n305\n00:14:45.690 --> 00:14:46.360\nchoose the right one.\n\n306\n00:14:46.360 --> 00:14:48.940\nIf you're not sure you can click\nto view the certificate and\n\n307\n00:14:48.940 --> 00:14:51.600\nmake sure you're using the one\nthat you intend to use.\n\n308\n00:14:51.600 --> 00:14:55.816\nWe're gonna choose that first one\nright there, we're gonna go ahead and\n\n309\n00:14:55.816 --> 00:14:59.300\nclick the certificate properties link,\njust to make sure.\n\n310\n00:14:59.300 --> 00:15:04.233\nWe see all issuance policies,\nall acceptance policies issued by, or\n\n311\n00:15:04.233 --> 00:15:09.343\nissued to, rather it should say,\nthe PlabDC01CA, and issued by it.\n\n312\n00:15:09.343 --> 00:15:12.210\nIt's a self-signed,\nself-issued certificate.\n\n313\n00:15:12.210 --> 00:15:14.890\nSo we're gonna make sure that we do that.\n\n314\n00:15:14.890 --> 00:15:18.388\nAnd if we see all issuance policies,\nall acceptance policies is here,\n\n315\n00:15:18.388 --> 00:15:20.322\nthis may not be the right certificate.\n\n316\n00:15:20.322 --> 00:15:24.230\nWe want the one that says,\nprove your identity to a remote computer.\n\n317\n00:15:24.230 --> 00:15:26.100\nSo that's not the one\nthat we're gonna use.\n\n318\n00:15:26.100 --> 00:15:28.260\nSo we're gonna go ahead,\nwe're click OK here.\n\n319\n00:15:28.260 --> 00:15:31.220\nWe're gonna highlight this one,\nwe're gonna check and\n\n320\n00:15:31.220 --> 00:15:32.200\nmake sure it's the one we need.\n\n321\n00:15:32.200 --> 00:15:35.940\nAnd this is why you have to go in and\nlook and find the right certificate.\n\n322\n00:15:35.940 --> 00:15:39.065\nIf I just chose the first one at the top\nof the list and said that must be the one.\n\n323\n00:15:39.065 --> 00:15:42.848\nAnd you can look, these look very similar\nthe only thing that really distinguishes\n\n324\n00:15:42.848 --> 00:15:45.077\nthem happens to be the validity period,\nright.\n\n325\n00:15:45.077 --> 00:15:48.630\nAnd if I didn't know that the validity\nperiod was for the one I showed you,\n\n326\n00:15:48.630 --> 00:15:52.585\nremember I showed you the certificate when\nwe were setting up just a few minutes ago\n\n327\n00:15:52.585 --> 00:15:53.590\nand the demo.\n\n328\n00:15:53.590 --> 00:15:55.451\nI showed you had a 1\nyear validity period so\n\n329\n00:15:55.451 --> 00:15:58.503\nI would know which one to choose in\nthis environment based on that, but\n\n330\n00:15:58.503 --> 00:16:01.347\nin the real world if you had\na multiple set of certificates here and\n\n331\n00:16:01.347 --> 00:16:04.243\nyou weren't sure which one it was And\nthere were more than one, and\n\n332\n00:16:04.243 --> 00:16:07.025\nthere could be more than one that\nhad the same validity period.\n\n333\n00:16:07.025 --> 00:16:11.860\nThen it would be impossible to tell unless\nwe actually looked at the properties and\n\n334\n00:16:11.860 --> 00:16:15.727\nlooked specifically for\nwhat the certificate was intended for.\n\n335\n00:16:15.727 --> 00:16:17.121\nAnd the issuance,\n\n336\n00:16:17.121 --> 00:16:22.100\nthe intended usage issuance\nstatement is what we're looking for.\n\n337\n00:16:22.100 --> 00:16:25.768\nAnd we need the one that proves our\nidentity to and for a remote computer,\n\n338\n00:16:25.768 --> 00:16:27.283\nthat's the one we wanna use.\n\n339\n00:16:27.283 --> 00:16:31.512\nSo we're gonna grab that one, that's\nthe one that we're looking for, right?\n\n340\n00:16:31.512 --> 00:16:34.475\nAnd we're gonna make sure we\nchoose the appropriate one.\n\n341\n00:16:37.359 --> 00:16:40.526\nAnd then we're gonna go ahead,\nwe're gonna click OK.\n\n342\n00:16:40.526 --> 00:16:43.576\nSo just highlight that one, click OK.\n\n343\n00:16:43.576 --> 00:16:45.042\nGive that just a second.\n\n344\n00:16:45.042 --> 00:16:48.365\nIt says Ensure private key for\nthe chosen certificate of success for\n\n345\n00:16:48.365 --> 00:16:52.052\nthe service account in the federation\nservice on each service in the farm.\n\n346\n00:16:52.052 --> 00:16:53.558\nWe know that that's important,\nwe have to do that.\n\n347\n00:16:53.558 --> 00:16:56.886\nWe only have one server on the farm right\nnow, so that's not gonna be a problem.\n\n348\n00:16:56.886 --> 00:17:01.028\nBut if we had to spool that out,\nwe talked about the value of certificates.\n\n349\n00:17:01.028 --> 00:17:03.843\nWe talked about the fact that\nthere are five common uses for\n\n350\n00:17:03.843 --> 00:17:05.114\ncertificates with ADFS.\n\n351\n00:17:05.114 --> 00:17:07.465\nAnd we talked about what all\nthose were in prior episodes.\n\n352\n00:17:07.465 --> 00:17:10.921\nAnd we talked about one of the ones being\nthat fact that we would need access to\n\n353\n00:17:10.921 --> 00:17:14.163\nthis key and that the certificate,\nsingle certificate if necessary,\n\n354\n00:17:14.163 --> 00:17:17.419\nor if chosen could be used for\nall five roles and all five requirements.\n\n355\n00:17:17.419 --> 00:17:20.461\nBut you'd have to install it\non every server on the farm.\n\n356\n00:17:20.461 --> 00:17:22.450\nSo they're reminding us of that here and\n\n357\n00:17:22.450 --> 00:17:24.681\nmaking sure that we are aware of that,\nokay?\n\n358\n00:17:24.681 --> 00:17:28.296\nSo we are gonna go ahead,\nwe're gonna click OK.\n\n359\n00:17:28.296 --> 00:17:31.755\nWe now have to make sure\nthat we are looking for\n\n360\n00:17:31.755 --> 00:17:34.954\nthe certificate that we just installed.\n\n361\n00:17:37.718 --> 00:17:40.553\nJust make sure here.\n\n362\n00:17:40.553 --> 00:17:44.428\nThat one is going to be the one that\nis going to be now listed as secondary\n\n363\n00:17:44.428 --> 00:17:49.110\nbecause we already have our primary one,\nthe default one that was there as primary.\n\n364\n00:17:49.110 --> 00:17:52.236\nYou can see that up under\nthe primary specification here.\n\n365\n00:17:52.236 --> 00:17:54.496\nThe secondary one is now\ngonna get swapped up.\n\n366\n00:17:54.496 --> 00:17:56.240\nWe're gonna make this one the primary,\n\n367\n00:17:56.240 --> 00:17:58.764\ncuz this is the one that we've\nimported that we wanna use.\n\n368\n00:17:58.764 --> 00:18:00.917\nSo we're gonna right-click, and\nwe're gonna set this as primary.\n\n369\n00:18:03.558 --> 00:18:05.105\nSetting this to primary.\n\n370\n00:18:05.105 --> 00:18:08.899\nIt says here, we'll break the trust\nrelationship with any relying parties that\n\n371\n00:18:08.899 --> 00:18:11.429\ndo not already understand or\nhave this certificate.\n\n372\n00:18:11.429 --> 00:18:12.246\nAre we sure we wanna do that?\n\n373\n00:18:12.246 --> 00:18:15.250\nWell, we don't have any relying\nparty trust right now so it's okay.\n\n374\n00:18:15.250 --> 00:18:17.647\nWe're gonna be setting one up but\nwe haven't set that up yet.\n\n375\n00:18:17.647 --> 00:18:19.394\nSo that'll be fine, no big deal.\n\n376\n00:18:19.394 --> 00:18:21.546\nWe're gonna click Yes, give that a second.\n\n377\n00:18:21.546 --> 00:18:24.143\nThat swaps around,\nwe can see that's now our primary.\n\n378\n00:18:24.143 --> 00:18:27.908\nAnd now what we're gonna do is we're\ngonna go ahead and we're gonna delete\n\n379\n00:18:27.908 --> 00:18:31.270\nthe superceded certificate,\nthe one that's the secondary one.\n\n380\n00:18:31.270 --> 00:18:35.332\nSo we're gonna go ahead, highlight this\none, and we're just gonna get rid of that.\n\n381\n00:18:35.332 --> 00:18:38.623\nGet that out of there,\nare we sure we wanna delete that?\n\n382\n00:18:38.623 --> 00:18:39.478\nYes.\n\n383\n00:18:39.478 --> 00:18:43.544\nMake sure that our primary certificate is\nnow sitting there and that we're gonna\n\n384\n00:18:43.544 --> 00:18:47.308\nbe forced to use that one, and not have\na secondary certificate that may get\n\n385\n00:18:47.308 --> 00:18:51.043\nin the way, is not set up the right way,\nor would in many cases not be used.\n\n386\n00:18:51.043 --> 00:18:54.713\nAnd so if we do decide to swap out for\nthe original certificates that are there,\n\n387\n00:18:54.713 --> 00:18:56.555\nthis is the process we would engage in.\n\n388\n00:18:56.555 --> 00:18:58.101\nNo big deal, easy to do.\n\n389\n00:18:58.101 --> 00:19:00.987\nBut we just obviously have to\npre-load that certificate,\n\n390\n00:19:00.987 --> 00:19:02.320\nhave it made ahead of time.\n\n391\n00:19:02.320 --> 00:19:05.772\nWe've set that up as part of the initial\nprocess of configuring everything.\n\n392\n00:19:05.772 --> 00:19:10.668\nAnd then we go ahead and we import it\nhere, we use it and we instantiate it.\n\n393\n00:19:10.668 --> 00:19:12.512\nWe get rid of the one that\nwas there before, and\n\n394\n00:19:12.512 --> 00:19:15.130\nwe'll replace with this one that\nwe're gonna make the primary.\n\n395\n00:19:15.130 --> 00:19:18.715\nWhat we're gonna do now is configure\nthe AD claims provider trust, so\n\n396\n00:19:18.715 --> 00:19:22.177\nnow what we're gonna do is go ahead and\nwe're gonna come over here,\n\n397\n00:19:22.177 --> 00:19:26.101\njust get out of our Services folder,\ngo to our trust relationships folder.\n\n398\n00:19:26.101 --> 00:19:28.974\nAnd you'll see that those trusts\nthat we were talking about,\n\n399\n00:19:28.974 --> 00:19:32.068\nclaims provider trusts,\nrelying party trusts, those are here,\n\n400\n00:19:32.068 --> 00:19:35.680\nthe attribute stores, here's what we\ntalked about, setting all these up.\n\n401\n00:19:35.680 --> 00:19:38.005\nAnd talk about the value of\neach part of the equation or\n\n402\n00:19:38.005 --> 00:19:40.546\npuzzle we're gonna walk through and\nconfigure this now.\n\n403\n00:19:40.546 --> 00:19:42.774\nSo we're gonna go into\nTrust Relationships,\n\n404\n00:19:42.774 --> 00:19:45.009\nwe're gonna go to\nClaim Provider Trust here.\n\n405\n00:19:45.009 --> 00:19:50.320\nAnd you'll see that we can either\nadd a claim provider trust,\n\n406\n00:19:50.320 --> 00:19:55.425\nand or, we can go ahead and\nwe can right-click on the actual\n\n407\n00:19:55.425 --> 00:19:59.938\nclaim that is here, and\nwe can edit the claim rules.\n\n408\n00:19:59.938 --> 00:20:03.473\nRemember we talked about claim rules and\nwe talked about the language structure\n\n409\n00:20:03.473 --> 00:20:06.757\nof the claim rules in the last episode or\ntwo episodes ago, one of the two.\n\n410\n00:20:06.757 --> 00:20:10.616\nWe did before this one, one of the three,\nactually the second or the third one.\n\n411\n00:20:10.616 --> 00:20:13.248\nI think it was the third one\nthat we did right before this.\n\n412\n00:20:13.248 --> 00:20:16.890\nIf you go back and take a look, we walked\nthrough the claim rules discussion.\n\n413\n00:20:16.890 --> 00:20:19.274\nI showed you a website with a really\ngood primer on claim rules and\n\n414\n00:20:19.274 --> 00:20:21.835\ntalked to you about the fact you\nshould probably take a look, and have\n\n415\n00:20:21.835 --> 00:20:24.414\na little bit of a better understanding\nof the claim rules structure.\n\n416\n00:20:24.414 --> 00:20:27.230\nBut I walked you through the language\nof the claim rules to make sure you\n\n417\n00:20:27.230 --> 00:20:29.536\nunderstood what they were and\nhow they were structured.\n\n418\n00:20:29.536 --> 00:20:31.063\nYou have the claim, right?\n\n419\n00:20:31.063 --> 00:20:34.100\nAnd then the issue or statement and\nwe talked about those different parts.\n\n420\n00:20:34.100 --> 00:20:37.224\nThe special character,\nthe arrow that's used to separate the two.\n\n421\n00:20:37.224 --> 00:20:38.725\nThe semicolon to end the claim rule.\n\n422\n00:20:38.725 --> 00:20:40.549\nSo we went through and\nwe talked about all that.\n\n423\n00:20:40.549 --> 00:20:44.112\nWe're gonna go to the Active Directory\nclaim, essentially the claim rule here.\n\n424\n00:20:44.112 --> 00:20:46.539\nWe are gonna edit it and\nwe are gonna add a rule in so\n\n425\n00:20:46.539 --> 00:20:49.751\nyou can see that part of the puzzle,\nbefore we do anything else.\n\n426\n00:20:49.751 --> 00:20:51.662\nSo we are gonna edit the claim rule.\n\n427\n00:20:51.662 --> 00:20:53.044\nIt's enabled so its already turned on.\n\n428\n00:20:53.044 --> 00:20:54.587\nWe're gonna click Yes here.\n\n429\n00:20:54.587 --> 00:20:57.528\nJust bring this up so\nyou could see this a little better.\n\n430\n00:20:57.528 --> 00:21:01.287\nAnd you could see our\nacceptance transform rules.\n\n431\n00:21:01.287 --> 00:21:05.627\nThe rules that are used to be able to\ntransform the claims that are coming in\n\n432\n00:21:05.627 --> 00:21:07.797\nand make sure that they will map up and\n\n433\n00:21:07.797 --> 00:21:12.348\nultimately allow us to accept claims\nthat only user, accept claims that only\n\n434\n00:21:12.348 --> 00:21:16.079\nvalidate authorized users to\nthen allow to be authenticated.\n\n435\n00:21:16.079 --> 00:21:19.393\nSo we're gonna through,\nwe're gonna add a rule in here, and\n\n436\n00:21:19.393 --> 00:21:22.848\nwhat we're gonna do is use a rule or\nset up a rule with a template.\n\n437\n00:21:22.848 --> 00:21:26.218\nRemember we have rule templates, and I\nshowed you the five templates that exist.\n\n438\n00:21:26.218 --> 00:21:28.872\nWe're gonna go and\nuse send LDAP claims, or\n\n439\n00:21:28.872 --> 00:21:31.824\nsend LDAP attributes as\nclaims as our template.\n\n440\n00:21:31.824 --> 00:21:35.079\nSo we're gonna go in,\nwe're gonna add a rule here, and\n\n441\n00:21:35.079 --> 00:21:37.864\nyou'll see Send out app\nattributes as claims.\n\n442\n00:21:37.864 --> 00:21:41.636\nNotice we have our other templates\nhere as well, total of five.\n\n443\n00:21:41.636 --> 00:21:45.268\nWe went through and identified what\nthey were in prior conversations,\n\n444\n00:21:45.268 --> 00:21:48.593\nshowed you a Word document with\na list that describe each one, and\n\n445\n00:21:48.593 --> 00:21:52.183\nexplained the importance of\nthe templates to standardize the rules.\n\n446\n00:21:52.183 --> 00:21:56.166\nSo that way as we set up the trust,\nthey're gonna be configured the right way\n\n447\n00:21:56.166 --> 00:21:58.484\ncuz we cannot share\nrules across the trust.\n\n448\n00:21:58.484 --> 00:22:00.190\nThey're linked to the trust\nelement that we create.\n\n449\n00:22:00.190 --> 00:22:02.904\nAnd so\neach side has to set up these rules, but\n\n450\n00:22:02.904 --> 00:22:06.411\nwe have to make sure we use\ntemplates to standardize them.\n\n451\n00:22:06.411 --> 00:22:07.510\nAnd that's what we're doing.\n\n452\n00:22:07.510 --> 00:22:11.477\nSo we're gonna use Send LDAP attributes\nas claims, our default choice.\n\n453\n00:22:11.477 --> 00:22:15.237\nGives us a little explanation of what's\ngoing on here in case we want a little\n\n454\n00:22:15.237 --> 00:22:16.015\nsummary of it.\n\n455\n00:22:16.015 --> 00:22:18.488\nSo we'll take a look at that,\nor at least you could see that.\n\n456\n00:22:18.488 --> 00:22:20.533\nThis is now where we're gonna go ahead and\n\n457\n00:22:20.533 --> 00:22:23.760\nwe're gonna map the old app\nattributes to outgoing claim types.\n\n458\n00:22:23.760 --> 00:22:27.497\nSo we can say your user principle\nname is claiming one area,\n\n459\n00:22:27.497 --> 00:22:29.977\nwe'll map that to something like UPN.\n\n460\n00:22:29.977 --> 00:22:33.773\nDisplay name is name, email,\naddress, maybe email address.\n\n461\n00:22:33.773 --> 00:22:37.710\nSo we're gonna map those so we can take\nclaims that are not standardized and\n\n462\n00:22:37.710 --> 00:22:41.789\nmap them to standard properties so\nthat when they show up we go look, yeah.\n\n463\n00:22:41.789 --> 00:22:46.096\nDaniel's unique identifier for employee\nID, that maps to this field over here.\n\n464\n00:22:46.096 --> 00:22:49.076\nWe see that makes sense so\nwe can associate those two.\n\n465\n00:22:49.076 --> 00:22:51.027\nWe've talked about that process as well.\n\n466\n00:22:51.027 --> 00:22:52.488\nSo that's what we're gonna do right now.\n\n467\n00:22:52.488 --> 00:22:55.690\nSo we're gonna go through,\nclick Next here.\n\n468\n00:22:55.690 --> 00:22:57.988\nWe're gonna give this a claim rule name.\n\n469\n00:22:57.988 --> 00:22:59.205\nWe just have to name the rule,\nno big deal.\n\n470\n00:22:59.205 --> 00:22:59.975\nWe'll call it anything we want.\n\n471\n00:22:59.975 --> 00:23:05.282\nWe'll call this outgoingldap claims.\n\n472\n00:23:05.282 --> 00:23:08.210\nDoesn't really matter what it is,\nor outgoingldap attributes,\n\n473\n00:23:08.210 --> 00:23:11.922\nprobably a better thought process so let's\njust call it that cuz that's really what\n\n474\n00:23:11.922 --> 00:23:13.928\nwe're doing, we're mapping attributes.\n\n475\n00:23:13.928 --> 00:23:15.499\nThen our attributes store,\n\n476\n00:23:15.499 --> 00:23:19.173\nwe have to select the attributes\nstore that we actually wanna use.\n\n477\n00:23:19.173 --> 00:23:23.007\nIn other words, where are the claims and\nthe attributes gonna be coming from?\n\n478\n00:23:23.007 --> 00:23:27.784\nWe talked about the attribute stores, we\ntalked about the fact that we do support\n\n479\n00:23:27.784 --> 00:23:33.067\nADDS, we support any open LDAP provider,\nwe support SQL Server from 2005 forward.\n\n480\n00:23:33.067 --> 00:23:37.610\nActually, Active Directory, even from 2003\nfrom the domain side, would be supported,\n\n481\n00:23:37.610 --> 00:23:38.474\njust so you know.\n\n482\n00:23:38.474 --> 00:23:40.254\nThen we'll get off to\ncustom attribute store.\n\n483\n00:23:40.254 --> 00:23:41.879\nAnd I showed you in prior episodes and\n\n484\n00:23:41.879 --> 00:23:44.609\ndocumentation on how to set up\ndifferent attribute stores and\n\n485\n00:23:44.609 --> 00:23:47.616\nhow they would be configured, so\nwe've been through that as well.\n\n486\n00:23:47.616 --> 00:23:51.296\nWe'll select our attribute store here,\nActive Directory is what we're using so\n\n487\n00:23:51.296 --> 00:23:53.658\nwe'll give that a selection,\nwe'll choose that.\n\n488\n00:23:53.658 --> 00:23:56.576\nThen what we're gonna do is the following.\n\n489\n00:23:56.576 --> 00:24:00.248\nWe have two columns here, LDAP attribute,\nand then on the far right,\n\n490\n00:24:00.248 --> 00:24:01.438\noutgoing claim type.\n\n491\n00:24:01.438 --> 00:24:03.852\nWe're gonna essentially\nmap them one to one.\n\n492\n00:24:03.852 --> 00:24:08.959\nSo I'm gonna map email address for\nLDAP attribute.\n\n493\n00:24:08.959 --> 00:24:15.516\nLet's do that, we'll just click there,\ntype in email address.\n\n494\n00:24:15.516 --> 00:24:18.682\nTrick here is you gotta make\nsure you spell correctly.\n\n495\n00:24:18.682 --> 00:24:21.586\nI just put an F in there by mistake,\nright?\n\n496\n00:24:21.586 --> 00:24:24.005\n&gt;&gt; [LAUGH]\n&gt;&gt; You gotta spell that correctly.\n\n497\n00:24:24.005 --> 00:24:25.740\nOtherwise it's just not gonna work well.\n\n498\n00:24:25.740 --> 00:24:27.599\n&gt;&gt; You'll have a hard time\nfinding that email address.\n\n499\n00:24:27.599 --> 00:24:29.787\n[LAUGH]\n&gt;&gt; Yes, it's not gonna work well.\n\n500\n00:24:29.787 --> 00:24:33.281\nAll right,\nlet me just type that in one more time.\n\n501\n00:24:33.281 --> 00:24:38.040\nEmail address, all right, there we go.\n\n502\n00:24:38.040 --> 00:24:41.410\nAnd then I'm gonna map that over\nto my email address over here.\n\n503\n00:24:45.694 --> 00:24:49.150\nAll right, so I got email address,\ngot email address.\n\n504\n00:24:49.150 --> 00:24:51.973\nGonna go ahead and\nmap user principal name.\n\n505\n00:24:51.973 --> 00:24:59.290\nSo user principal -name here.\n\n506\n00:24:59.290 --> 00:25:02.032\nWhoops, gotta make sure I\nspell those things correctly.\n\n507\n00:25:02.032 --> 00:25:06.221\nAll right, user, principal,\n\n508\n00:25:06.221 --> 00:25:10.728\nP-A-L right, principal name.\n\n509\n00:25:10.728 --> 00:25:13.933\nPicked the world's worst typer\nto actually do the mapping.\n\n510\n00:25:13.933 --> 00:25:15.950\n&gt;&gt; [LAUGH]\n&gt;&gt; All right, and\n\n511\n00:25:15.950 --> 00:25:18.601\nthen UPN on the side over there.\n\n512\n00:25:18.601 --> 00:25:21.225\n&gt;&gt; I thought you were asking for\nits user's principal names.\n\n513\n00:25:21.225 --> 00:25:24.883\nLike Mr Svertstenson from-\n&gt;&gt; And\n\n514\n00:25:24.883 --> 00:25:28.400\nthen display name,\nlet me do that one more time.\n\n515\n00:25:28.400 --> 00:25:31.198\nAll right, whoop, that's not good.\n\n516\n00:25:31.198 --> 00:25:34.210\nDeplay name, display name.\n\n517\n00:25:34.210 --> 00:25:35.400\n&gt;&gt; You really are having\na hard time with it.\n\n518\n00:25:35.400 --> 00:25:36.846\n&gt;&gt; I just absolutely suck at typing.\n\n519\n00:25:36.846 --> 00:25:38.519\nI am just the world's worst typer.\n\n520\n00:25:38.519 --> 00:25:43.117\n[LAUGH] All right, so we've got our\nproperties, our attributes rather, and\n\n521\n00:25:43.117 --> 00:25:44.330\nour claims map.\n\n522\n00:25:44.330 --> 00:25:46.430\nWe're doing email address\nto email address.\n\n523\n00:25:46.430 --> 00:25:49.280\nWe're doing user principal\nname over to UPN,\n\n524\n00:25:49.280 --> 00:25:51.790\nthat's how it's traditionally referenced.\n\n525\n00:25:51.790 --> 00:25:54.160\nAnd display name is just\ngonna become name, right?\n\n526\n00:25:54.160 --> 00:25:56.325\nSo we're gonna map all those out,\nand we may have more of these.\n\n527\n00:25:56.325 --> 00:25:58.460\nWe'll just go down the list,\nas you can see.\n\n528\n00:25:58.460 --> 00:26:01.820\nWe'll click Finish once we're done,\nwe now have our rule there.\n\n529\n00:26:01.820 --> 00:26:06.430\nAnd notice that our rule, you set up\na number, and we have an order here,\n\n530\n00:26:06.430 --> 00:26:08.934\nright, and there's ten prior rules.\n\n531\n00:26:08.934 --> 00:26:12.520\nAnd we've just added the outgoing\nLDAP rule down here as well.\n\n532\n00:26:12.520 --> 00:26:13.980\nSo that way we're putting\nthings in order,.\n\n533\n00:26:13.980 --> 00:26:16.060\nAnd if we want to,\nnotice we can move the rule up and\n\n534\n00:26:16.060 --> 00:26:21.190\ndown if necessary in order to specify\nwhere in the stack that rule will be.\n\n535\n00:26:22.700 --> 00:26:25.160\nAll right, so now we're just gonna\ngo ahead and leave that alone.\n\n536\n00:26:25.160 --> 00:26:25.998\nWe're gonna click OK.\n\n537\n00:26:25.998 --> 00:26:27.309\nReply and OK.\n\n538\n00:26:27.309 --> 00:26:29.657\nI'm not gonna go on my\nrant about Reply and OK.\n\n539\n00:26:29.657 --> 00:26:32.558\nWe're just gonna accept the fact\nthat it's there and it's redundant.\n\n540\n00:26:32.558 --> 00:26:36.959\nBut what we're gonna do now is configure\nthe Windows Identity Foundation Federation\n\n541\n00:26:36.959 --> 00:26:38.450\nwith a special utility.\n\n542\n00:26:38.450 --> 00:26:42.930\nWe're gonna program this in and put on one\nof the backend pieces that are required,\n\n543\n00:26:42.930 --> 00:26:47.180\nso that way we can actually then set\nup the trust and have them working.\n\n544\n00:26:47.180 --> 00:26:49.570\nSo I'm gonna minimize this here.\n\n545\n00:26:49.570 --> 00:26:53.530\nAnd we're gonna go ahead and we're\ngonna go to actually another machine.\n\n546\n00:26:53.530 --> 00:26:55.410\nSo let me just minimize that real quick.\n\n547\n00:26:55.410 --> 00:26:59.550\nJust come over here and just make sure our\ntimer is not gonna give us any trouble.\n\n548\n00:26:59.550 --> 00:27:02.660\nAnd then we're going over to DM1.\n\n549\n00:27:02.660 --> 00:27:07.240\nSo let's go, I believe,\nif I'm not mistaken right here.\n\n550\n00:27:07.240 --> 00:27:09.011\nAnd I've already downloaded the utility.\n\n551\n00:27:09.011 --> 00:27:10.895\nYou see, it's sitting right there.\n\n552\n00:27:10.895 --> 00:27:16.080\nWe'll just drag that over so you can\nsee that Windows Identity Foundation.\n\n553\n00:27:16.080 --> 00:27:17.152\nJust gonna grab that.\n\n554\n00:27:17.152 --> 00:27:19.350\nYou can download that from Microsoft.\n\n555\n00:27:19.350 --> 00:27:21.537\nYou'll see the SDK version 4.0 there.\n\n556\n00:27:21.537 --> 00:27:24.020\nI'm just gonna go ahead and\ninstall this real quick.\n\n557\n00:27:24.020 --> 00:27:29.490\nLet's go ahead and accept the EULA,\nspecify our installation directory,\n\n558\n00:27:29.490 --> 00:27:30.640\nand just click Install.\n\n559\n00:27:30.640 --> 00:27:34.441\nThis doesn't take very long, so we'll\njust let that do its business here for\n\n560\n00:27:34.441 --> 00:27:35.690\njust a minute.\n\n561\n00:27:35.690 --> 00:27:37.092\nYou can see it's already done.\n\n562\n00:27:37.092 --> 00:27:40.050\nWe're just gonna uncheck\nthat Open Release Notes.\n\n563\n00:27:40.050 --> 00:27:46.110\nAnd then once that's finished,\nClick Finish.\n\n564\n00:27:46.110 --> 00:27:47.640\nAll right, so we have that instantiated,\n\n565\n00:27:47.640 --> 00:27:52.210\nand now what we're gonna do is go open\nthat utility that we just loaded up.\n\n566\n00:27:52.210 --> 00:27:55.540\nSo we're gonna go to the Start menu here,\nand we're just gonna search for\n\n567\n00:27:55.540 --> 00:27:56.650\nit real quick.\n\n568\n00:27:56.650 --> 00:28:00.222\nSo let's just type in Windows Identity.\n\n569\n00:28:00.222 --> 00:28:02.910\nShouldn't take much more\nthan that to bring it up.\n\n570\n00:28:02.910 --> 00:28:06.120\nWindows Identity Foundation\nFederation Utility right there,\n\n571\n00:28:06.120 --> 00:28:09.510\nas you can see, we're just gonna\ngo ahead and we're gonna run that.\n\n572\n00:28:09.510 --> 00:28:10.580\nSo let's just grab that.\n\n573\n00:28:10.580 --> 00:28:12.645\nWe'll pin it to the Start menu just so\nwe see it there.\n\n574\n00:28:12.645 --> 00:28:18.480\nGo ahead, run that, get this over here.\n\n575\n00:28:18.480 --> 00:28:21.790\nJust drag this up over here for\njust one second.\n\n576\n00:28:21.790 --> 00:28:25.960\nAnd we've gotta put in two pieces of\ninformation that are important right here,\n\n577\n00:28:25.960 --> 00:28:27.980\napplication configuration location.\n\n578\n00:28:27.980 --> 00:28:30.258\nWhere is the application\nthat we wanna configure?\n\n579\n00:28:30.258 --> 00:28:34.137\nThis app is to set up the trust\nrelationship between the claim aware app\n\n580\n00:28:34.137 --> 00:28:36.800\nand the Security Token Service, the STS.\n\n581\n00:28:36.800 --> 00:28:41.468\nThe STS or Security Token Service is\nwhat's gonna mange the flow of information\n\n582\n00:28:41.468 --> 00:28:46.275\nand the token generation and communication\nfor us from the claims aware web app and\n\n583\n00:28:46.275 --> 00:28:47.403\nthe information.\n\n584\n00:28:47.403 --> 00:28:49.780\nLet's go back and\nforth with the directory.\n\n585\n00:28:49.780 --> 00:28:54.670\nSo we're gonna specify where the path is\nfor this and then the application URI.\n\n586\n00:28:54.670 --> 00:28:57.585\nNow I've just already got\nthat stuff typed out here so\n\n587\n00:28:57.585 --> 00:29:03.435\nthat I don't have to subject you to my\ntyping again, but I've gone ahead and\n\n588\n00:29:03.435 --> 00:29:07.705\npreloaded a claims aware app that's\nalready installed on our IIS Server.\n\n589\n00:29:07.705 --> 00:29:10.437\nIt's been set up,\nI've added the directory.\n\n590\n00:29:10.437 --> 00:29:12.557\nI've told IIS where to find the app.\n\n591\n00:29:12.557 --> 00:29:15.277\nI've loaded it up, made sure it's there,\nand that it's running.\n\n592\n00:29:15.277 --> 00:29:16.917\nSo I've done all that on the back end.\n\n593\n00:29:16.917 --> 00:29:19.607\nBecause that's not part\nof configuring ADFS,\n\n594\n00:29:19.607 --> 00:29:23.653\nthat's just consuming ADFS on\nthe back end once we're done.\n\n595\n00:29:23.653 --> 00:29:27.397\nThat will have been done by somebody in\nyour organization or somebody will have\n\n596\n00:29:27.397 --> 00:29:30.690\nhad to set that up for you, so\nwe're just gonna assume that was done.\n\n597\n00:29:30.690 --> 00:29:34.383\nAnd you're gonna believe me when\nI say that that is already there.\n\n598\n00:29:34.383 --> 00:29:35.611\nSo we're gonna copy this.\n\n599\n00:29:35.611 --> 00:29:38.913\nAnd we're gonna go ahead,\nput this in here.\n\n600\n00:29:38.913 --> 00:29:42.170\nLet me just get rid of that little\nprompt that tells me that I copied it.\n\n601\n00:29:42.170 --> 00:29:44.770\nJust gonna go ahead and\npaste that in, put that there.\n\n602\n00:29:44.770 --> 00:29:49.007\nAnd then for the application URI,\nagain, we've already got that here.\n\n603\n00:29:49.007 --> 00:29:54.259\nThis is gonna be the URL for the website\nfor the web server and the directory or\n\n604\n00:29:54.259 --> 00:29:59.859\nthe, excuse me, the URL for the path to\nthe claims of where app that we are using.\n\n605\n00:29:59.859 --> 00:30:07.640\nIt's on pladmd0, and\nwe've got that already set up here.\n\n606\n00:30:07.640 --> 00:30:12.669\nSo we're gonna go ahead and\njust grab that, put that in there as well.\n\n607\n00:30:12.669 --> 00:30:16.080\nWe're then gonna go ahead,\nwe're gonna click Next.\n\n608\n00:30:16.080 --> 00:30:17.394\nHold on one second.\n\n609\n00:30:17.394 --> 00:30:22.004\nLet me just make sure that\nthat is in the right place.\n\n610\n00:30:22.004 --> 00:30:26.034\nI'm in pub claims app web.config.\n\n611\n00:30:26.034 --> 00:30:27.311\nThat should be right.\n\n612\n00:30:27.311 --> 00:30:31.190\nJust check my note really quick,\nmake sure I didn't make a mistake.\n\n613\n00:30:31.190 --> 00:30:34.414\nOr have an extra little space in there.\n\n614\n00:30:34.414 --> 00:30:37.120\nAll right, let's make sure.\n\n615\n00:30:37.120 --> 00:30:41.434\nI'm in pub claims app web.config.\n\n616\n00:30:41.434 --> 00:30:46.153\nC: pubclaimsappweb.config,\nlet's make sure.\n\n617\n00:30:48.033 --> 00:30:53.283\nSee I'm in pub, claims app, and.\n\n618\n00:30:53.283 --> 00:30:54.109\n&gt;&gt; Capital W.\n\n619\n00:30:54.109 --> 00:30:55.943\nThat doesn't care on this does it?\n\n620\n00:30:55.943 --> 00:30:58.161\n&gt;&gt; Shouldn't matter.\n\n621\n00:30:58.161 --> 00:30:59.920\nThere we go, that's routes, we have name.\n\n622\n00:30:59.920 --> 00:31:01.219\nMay have just been my typing for\nthat matter.\n\n623\n00:31:01.219 --> 00:31:02.822\n&gt;&gt; [LAUGH]\n&gt;&gt; But you can see it's there,\n\n624\n00:31:02.822 --> 00:31:03.650\nit's in the right path.\n\n625\n00:31:03.650 --> 00:31:04.930\nFor whatever reason,\n\n626\n00:31:04.930 --> 00:31:07.500\nit just wasn't finding the file even\nthough it was sitting right there.\n\n627\n00:31:07.500 --> 00:31:09.210\nSo we can fix that, no big deal.\n\n628\n00:31:09.210 --> 00:31:10.430\nIt happens from time to time.\n\n629\n00:31:10.430 --> 00:31:13.180\nThat's how you know this is a live demo\ninstead of one that's pre-recorded.\n\n630\n00:31:13.180 --> 00:31:15.350\nAlthough it actually by the time you\nwatching it, it is pre-recorded.\n\n631\n00:31:15.350 --> 00:31:16.190\nSo there you go.\n\n632\n00:31:16.190 --> 00:31:21.230\nAll right, so we're gonna go ahead and\nspecify URI for the STS.\n\n633\n00:31:21.230 --> 00:31:24.570\nWe have to provide, in other words,\nthe path for the Security Token Service or\n\n634\n00:31:24.570 --> 00:31:26.090\nwherever we're gonna get that from.\n\n635\n00:31:26.090 --> 00:31:27.140\nWe're gonna put that in.\n\n636\n00:31:27.140 --> 00:31:29.930\nWe have an existing one that's\nalready running in the web server so\n\n637\n00:31:29.930 --> 00:31:31.220\nwe're going to say use existing.\n\n638\n00:31:31.220 --> 00:31:34.720\nAnd we're just gonna put in\nthe metadata location information here.\n\n639\n00:31:34.720 --> 00:31:39.090\nSo we're gonna put that in, just give me\na second cuz I have that here as well.\n\n640\n00:31:39.090 --> 00:31:42.520\nSo we're gonna specify that,\nand what we're looking for\n\n641\n00:31:42.520 --> 00:31:47.150\nis that federation metadata XML file that\nI showed you on the Windows 8 machine\n\n642\n00:31:47.150 --> 00:31:51.120\nto validate that the install of\nthe ADFS system was up and running.\n\n643\n00:31:51.120 --> 00:31:54.583\nWe're gonna point to that document,\nthat's gonna tell us TS as a service,\n\n644\n00:31:54.583 --> 00:31:58.045\nall the information it needs to understand\nhow to work with all the claims and\n\n645\n00:31:58.045 --> 00:31:58.657\nthe tokens.\n\n646\n00:31:58.657 --> 00:32:02.833\nSo we're pointing it to that document That\nfederation metadata.xml document that I\n\n647\n00:32:02.833 --> 00:32:03.877\nshowed you earlier.\n\n648\n00:32:03.877 --> 00:32:07.697\nJust already got the path there so\nI'm gonna take this,\n\n649\n00:32:07.697 --> 00:32:10.391\njust put it in right here, paste that.\n\n650\n00:32:10.391 --> 00:32:13.510\nI'm just gonna test the location,\nmake sure that it is valid.\n\n651\n00:32:13.510 --> 00:32:14.430\nWe know it's there by the way,\n\n652\n00:32:14.430 --> 00:32:17.470\nbecause we already tested this with the\nWindows 8 machine but this will just allow\n\n653\n00:32:17.470 --> 00:32:21.222\nus to connect in, make sure that it\nfinds it, that everything's good.\n\n654\n00:32:21.222 --> 00:32:23.970\nAlways wanna do that just to make\nsure that there's no worries.\n\n655\n00:32:23.970 --> 00:32:25.420\nAnd that everything will\nwork the right way.\n\n656\n00:32:25.420 --> 00:32:27.426\nSo we'll give that a moment to go out and\nresolve.\n\n657\n00:32:27.426 --> 00:32:29.849\nWe'll specify in a minute as\nsoon as we go back through,\n\n658\n00:32:29.849 --> 00:32:32.930\nthat we're not gonna use any\nencryption on the connection.\n\n659\n00:32:32.930 --> 00:32:35.120\nSo we'll do that, just to finish up.\n\n660\n00:32:35.120 --> 00:32:38.291\nAnd come on there, mister,\nwhere's my function key?\n\n661\n00:32:38.291 --> 00:32:42.747\nLet's do F5 and connect in,\n\n662\n00:32:42.747 --> 00:32:48.624\nand, Let's make sure we can\nresolve that really quickly.\n\n663\n00:32:56.369 --> 00:32:59.040\nJust while we're waiting on that,\nlet me just minimize that for a second.\n\n664\n00:32:59.040 --> 00:33:01.390\nSo just while we're waiting,\nlet me just show you here,\n\n665\n00:33:01.390 --> 00:33:05.360\nwe'll just click Next, we're gonna specify\nthat we don't want any encryption here.\n\n666\n00:33:05.360 --> 00:33:07.830\nRight, so we're just gonna essentially\nallow it to communicate normally.\n\n667\n00:33:07.830 --> 00:33:09.030\nNow in the real world,\n\n668\n00:33:09.030 --> 00:33:11.510\nwe may actually wanna use encryption\nfrom a security standpoint, right?\n\n669\n00:33:11.510 --> 00:33:14.160\nThis would be important for\nus to consider and think about.\n\n670\n00:33:14.160 --> 00:33:16.682\nBut here, we're just gonna go\nwith no encryption, right?\n\n671\n00:33:16.682 --> 00:33:18.470\nAll right, so we have that set up.\n\n672\n00:33:18.470 --> 00:33:23.060\nWe're gonna go ahead and let's just hit\nNext here, we're gonna go ahead and\n\n673\n00:33:23.060 --> 00:33:24.110\nlook at offered claims.\n\n674\n00:33:24.110 --> 00:33:28.220\nRemember we already mapped out what our\nclaims will be with the other rule, but\n\n675\n00:33:28.220 --> 00:33:32.077\nyou'll see we have UPN there, email\naddress is in here if we scroll down,\n\n676\n00:33:32.077 --> 00:33:34.520\nthe actually email address right there.\n\n677\n00:33:34.520 --> 00:33:36.830\nName all the claims we\nmap to there plus more.\n\n678\n00:33:36.830 --> 00:33:39.620\nThis tells us by the way that we did\nconnect and everything's working.\n\n679\n00:33:39.620 --> 00:33:41.410\nNot gonna go back and\nbring the one page up.\n\n680\n00:33:41.410 --> 00:33:44.460\nBut the fact we're able to get this and\nit shows up means that it's doing that.\n\n681\n00:33:44.460 --> 00:33:48.000\nIt does that sometimes by the way in\nthe first connect, it may time out so\n\n682\n00:33:48.000 --> 00:33:49.260\ndon't be afraid to test it.\n\n683\n00:33:49.260 --> 00:33:51.480\nSay wait it's not connecting,\ntry it again.\n\n684\n00:33:51.480 --> 00:33:54.921\nOr if you wait like I did and it doesn't\ncome up but you're reconnecting,\n\n685\n00:33:54.921 --> 00:33:58.472\nyou could fast forward here and when we\nget to this place you see the claim type\n\n686\n00:33:58.472 --> 00:34:01.219\nit means it is populated and\nit is working just so you know.\n\n687\n00:34:01.219 --> 00:34:03.910\nSo we're gonna click next here.\n\n688\n00:34:03.910 --> 00:34:06.200\nWe're gonna ahead, we're gonna finish up.\n\n689\n00:34:06.200 --> 00:34:09.160\nYou could see here that we\nhave a summary that just tells\n\n690\n00:34:09.160 --> 00:34:11.270\nus essentially what we're\ndoing to configure it.\n\n691\n00:34:11.270 --> 00:34:16.190\nAnd we could schedule daily updates for\nthe WS Federation metadata if we chose to.\n\n692\n00:34:16.190 --> 00:34:20.740\nSo we could check that off if we wanna\njust to do a change block update to\n\n693\n00:34:20.740 --> 00:34:24.300\nensure the metadata is fresh everyday,\nit'll automate that task for us.\n\n694\n00:34:24.300 --> 00:34:27.330\nUp to us to decide,\nwe'll click finish here,\n\n695\n00:34:27.330 --> 00:34:30.100\nsuccessfully configured your app\nthat's what we're looking to see.\n\n696\n00:34:30.100 --> 00:34:34.860\nThat sets up the configuration for\nus on the back end and now sets us up so\n\n697\n00:34:34.860 --> 00:34:39.250\nwe can go in and actually configure our\nalign party trust for the claims ware app.\n\n698\n00:34:39.250 --> 00:34:42.580\nI'm thinking maybe we need to\njust do a part two on the demo so\n\n699\n00:34:42.580 --> 00:34:45.420\nthat way we can give everybody\na break cuz it's been,\n\n700\n00:34:45.420 --> 00:34:48.300\nI'm thinking at least 30-40\nminutes that we've been at it.\n\n701\n00:34:48.300 --> 00:34:51.220\nBut that way we can kinda chunk\nit up into two logical pieces\n\n702\n00:34:51.220 --> 00:34:54.660\ncuz the next pieces we'll be setting\nup through align party trusts, and\n\n703\n00:34:54.660 --> 00:34:57.300\nI'll go in through\nthe last back end process.\n\n704\n00:34:57.300 --> 00:35:00.140\nThat way you can hit the pause button,\ntake a break for a couple minutes, catch\n\n705\n00:35:00.140 --> 00:35:03.670\nyour breath, and then come on back and\njoin us for part two of the walkthrough.\n\n706\n00:35:03.670 --> 00:35:04.460\n&gt;&gt; That sounds great.\n\n707\n00:35:04.460 --> 00:35:06.850\nI was gonna suggest that you do\na mic drop at the end of this, but\n\n708\n00:35:06.850 --> 00:35:08.530\nthen you'd have to run back over and\npick it up.\n\n709\n00:35:08.530 --> 00:35:10.074\n&gt;&gt; I would-\n&gt;&gt; And we'd have to do it all over again.\n\n710\n00:35:10.074 --> 00:35:12.650\nSo it kinda loses its luster\nwhen you have to do that.\n\n711\n00:35:12.650 --> 00:35:16.150\nBut yeah, we'll definitely,\ntechnically we'll be going into part five.\n\n712\n00:35:16.150 --> 00:35:19.224\n&gt;&gt; Part five, part two of [CROSSTALK]\n&gt;&gt; Part two of the, yeah, install.\n\n713\n00:35:19.224 --> 00:35:23.310\nBut part five of the little miniseries\nwe're creating here on Federated Services.\n\n714\n00:35:23.310 --> 00:35:26.100\nSo join us for the exciting conclusion.\n\n715\n00:35:26.100 --> 00:35:28.040\nBut as for\nthis episode we're gonna call it a day.\n\n716\n00:35:28.040 --> 00:35:29.150\nThanks for watching.\n\n717\n00:35:29.150 --> 00:35:32.200\nSigning off for ITProTV,\nI've been your host Daniel Lowrie.\n\n718\n00:35:32.200 --> 00:35:32.890\n&gt;&gt; I'm Adam Gordon.\n\n719\n00:35:32.890 --> 00:35:34.353\n&gt;&gt; We'll see you next time.\n\n720\n00:35:34.353 --> 00:35:40.993\n[MUSIC]\n\n721\n00:35:40.993 --> 00:35:44.060\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213222149"
        },
        {
          "description": "In this episode, Daniel and Adam take all the previously discussed concepts and use them to actually stand up Active Directory Federated Identity Services. Here they take you step-by-step through the process, discussing each component in detail so that you are properly equipped to perform an ADFS implementation.",
          "length": "1029",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-5-implementing_federated_identity_pt5-041317-PGM.00_16_52_29.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-5-implementing_federated_identity_pt5-041317-PGM.00_16_52_29.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-4-5-implementing_federated_identity_pt5-041317-PGM.00_16_52_29.Still001-sm.jpg",
          "title": "Implementing Federated Identity Part 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:01.832\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:01.832 --> 00:00:06.816\n[CROSSTALK] coming to you live\nfrom San Francisco, California.\n\n3\n00:00:06.816 --> 00:00:12.430\n[SOUND]\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.430 --> 00:00:13.667\n&gt;&gt; All right, greetings everyone.\n\n5\n00:00:13.667 --> 00:00:16.592\nWelcome to another great\nepisode of ITProTV.\n\n6\n00:00:16.592 --> 00:00:18.020\nI'm you host Daniel Lowrie.\n\n7\n00:00:18.020 --> 00:00:22.763\nAnd in today's episode we are back\nwith more of our 74-14 series,\n\n8\n00:00:22.763 --> 00:00:26.173\nthat's right, the MCSE for Server 2012 R2.\n\n9\n00:00:26.173 --> 00:00:31.106\nJoining us back in the studio, continuing\nour demonstration, is our good friend, Mr.\n\n10\n00:00:31.106 --> 00:00:31.930\nAdam Gordon.\n\n11\n00:00:31.930 --> 00:00:33.471\nAdam, welcome back man.\nHow's it going?\n\n12\n00:00:33.471 --> 00:00:37.130\n&gt;&gt; It's going good, going well, going\nphenomenally well, as a matter of fact.\n\n13\n00:00:37.130 --> 00:00:38.380\nWe are back for part five, but\n\n14\n00:00:38.380 --> 00:00:40.191\nactually part two overall-\n&gt;&gt; [LAUGH]\n\n15\n00:00:40.191 --> 00:00:41.070\n&gt;&gt; -of our hands-on\n\n16\n00:00:41.070 --> 00:00:44.530\ndemonstration part five overall\nof the entire thought process,\n\n17\n00:00:44.530 --> 00:00:46.850\nall the episodes combining\nto give us ADFS.\n\n18\n00:00:46.850 --> 00:00:50.271\nIt would have been great if we\nhad four and we did one for each.\n\n19\n00:00:50.271 --> 00:00:52.585\n&gt;&gt; [LAUGH]\n&gt;&gt; We just said a plus d plus f plus s.\n\n20\n00:00:52.585 --> 00:00:55.760\nSo we are gonna wrap up our demonstration,\nif you saw the last episode, and\n\n21\n00:00:55.760 --> 00:00:57.540\nif you have not, by the way,\ndefinitely want to go back and\n\n22\n00:00:57.540 --> 00:01:00.500\nlook at that before you look at this cuz\njumping in three quarters of the way\n\n23\n00:01:00.500 --> 00:01:02.810\nthrough is really not going to help you.\n\n24\n00:01:02.810 --> 00:01:06.906\nWe've done a lot of the background\nlegwork in setting up ADFS.\n\n25\n00:01:06.906 --> 00:01:10.410\nWe're about to jump in and\nset up our online party trust.\n\n26\n00:01:10.410 --> 00:01:13.770\nBut we've mapped our claim attributes,\nwe've set up certificates,\n\n27\n00:01:13.770 --> 00:01:14.990\nbrought them in.\n\n28\n00:01:14.990 --> 00:01:19.410\nMade sure all of the moving parts, bells\nand whistles are set up and ready to go.\n\n29\n00:01:19.410 --> 00:01:24.260\nWe've already installed ADFS, started to\nwork with the management console, started\n\n30\n00:01:24.260 --> 00:01:28.862\nto show you a lot of the actual concepts\nthat we've talked about in prior episodes.\n\n31\n00:01:28.862 --> 00:01:31.275\nTheoretically, we're actually\nputting them to use here now.\n\n32\n00:01:31.275 --> 00:01:33.875\nSo we're gonna jump back in,\nwe just finished setting up\n\n33\n00:01:33.875 --> 00:01:38.485\nWindows Identity Provider Utility,\nmapping and configuring some stuff there.\n\n34\n00:01:38.485 --> 00:01:41.735\nWe're now back in the ADFS console,\nthe management console, and\n\n35\n00:01:41.735 --> 00:01:46.725\nwe're gonna go ahead and start off or kick\noff our adding Relying Party Trust wizard.\n\n36\n00:01:46.725 --> 00:01:49.835\nYou'll see that up on the right-hand\nside there, up under Actions,\n\n37\n00:01:49.835 --> 00:01:51.120\ngonna click on that.\n\n38\n00:01:51.120 --> 00:01:52.530\nTake just a second to bring that up.\n\n39\n00:01:52.530 --> 00:01:54.050\nLet me just move this over so\n\n40\n00:01:54.050 --> 00:01:57.020\nthat you guys can see what we're\ndoing while we're talking.\n\n41\n00:01:58.220 --> 00:01:59.527\nGonna click Start here.\n\n42\n00:01:59.527 --> 00:02:02.366\nAnd first thing we're gonna\ndo is talk about or set\n\n43\n00:02:02.366 --> 00:02:07.310\nup the importation of data on, or about or\nfor, tripping over my tongue this morning.\n\n44\n00:02:07.310 --> 00:02:08.049\n&gt;&gt; [LAUGH] Yeah.\n\n45\n00:02:08.049 --> 00:02:11.853\n&gt;&gt; [LAUGH] About or for\nthe relying party published online.\n\n46\n00:02:11.853 --> 00:02:13.500\nIn other words,\nwe've gotta put in a URL here.\n\n47\n00:02:13.500 --> 00:02:18.680\nIt's gonna tell us where to go to find\nthe claims app, that app that we're\n\n48\n00:02:18.680 --> 00:02:22.420\nusing that's claims-aware, that we've\nset up and running on our IIS server.\n\n49\n00:02:22.420 --> 00:02:25.160\nSo where is the information?\n\n50\n00:02:25.160 --> 00:02:27.120\nWe're gonna go ahead and put this in.\n\n51\n00:02:27.120 --> 00:02:31.563\nSo we're gonna go ahead and\nonline on a local network,\n\n52\n00:02:31.563 --> 00:02:34.758\nput in our relying party information.\n\n53\n00:02:34.758 --> 00:02:37.818\nSo let's put this\n\n54\n00:02:37.818 --> 00:02:44.550\nin plabdm01.practicelabs.com,\n\n55\n00:02:44.550 --> 00:02:48.230\nand then claimsapp.\n\n56\n00:02:48.230 --> 00:02:49.830\nMake sure we spelled that correctly.\n\n57\n00:02:49.830 --> 00:02:53.950\nplabdm01.practicelabs.com, claimsapp.\n\n58\n00:02:53.950 --> 00:02:54.950\nAll right, very good.\n\n59\n00:02:54.950 --> 00:02:56.110\nSo we've got that in there.\n\n60\n00:02:56.110 --> 00:02:58.795\nLet's just click Next,\ngive that just a second.\n\n61\n00:02:58.795 --> 00:03:01.734\nWe got our Display name on there.\n\n62\n00:03:01.734 --> 00:03:03.710\nDisplay name could be\nanything we want it to be.\n\n63\n00:03:03.710 --> 00:03:08.970\nThis is really just meta data\nthat describes what we're doing,\n\n64\n00:03:08.970 --> 00:03:12.698\nbut we don't want to use the\nplabdm01.practicelabs.com fqdm for that.\n\n65\n00:03:12.698 --> 00:03:16.340\nSo we're gonna change that, and\nwe'll just call it what it is.\n\n66\n00:03:16.340 --> 00:03:18.330\nWe'll call it practice.\n\n67\n00:03:19.760 --> 00:03:22.850\nOf course if I spell practice\ncorrectly that usually works better.\n\n68\n00:03:22.850 --> 00:03:25.670\nPractice labs test app,\ncuz that's really what it is.\n\n69\n00:03:25.670 --> 00:03:27.830\nIt's the claims app we're\ngonna use just to test and\n\n70\n00:03:27.830 --> 00:03:29.770\nvalidate that everything's working.\n\n71\n00:03:29.770 --> 00:03:31.220\nWe may wanna make some notes there,\n\n72\n00:03:31.220 --> 00:03:34.040\nit's up to us to decide if\nwe wanna do that or not.\n\n73\n00:03:34.040 --> 00:03:35.029\nWe'll click Next.\n\n74\n00:03:36.410 --> 00:03:39.190\nThen what we have as you can see here\n\n75\n00:03:39.190 --> 00:03:41.830\nis the ability to configure\nmultifactor authentication.\n\n76\n00:03:41.830 --> 00:03:46.390\nWe're not gonna set up and do anything\nright now with multifactor authentication,\n\n77\n00:03:46.390 --> 00:03:49.470\nbut in the real world as you're setting\nthis up, if you wanna use multifactor\n\n78\n00:03:49.470 --> 00:03:52.310\nauthentication, this would\nbe where you do this.\n\n79\n00:03:52.310 --> 00:03:56.110\nYou would go ahead and configure\nmultifactor authentication settings, and\n\n80\n00:03:56.110 --> 00:04:00.250\nthen you would be able to go ahead and\nspecify what factors you're gonna use,\n\n81\n00:04:00.250 --> 00:04:02.860\nhow you're gonna combine them, and\nhow you're gonna authenticate users.\n\n82\n00:04:02.860 --> 00:04:07.309\nSo, in secure environments, that are using\nperhaps a username and a log on,\n\n83\n00:04:07.309 --> 00:04:10.121\na username, username and\na password for log on.\n\n84\n00:04:10.121 --> 00:04:12.446\nCan't combine usernames and log ons\ntogether, that's not a correct factor.\n\n85\n00:04:12.446 --> 00:04:14.500\n&gt;&gt; [LAUGH]\n&gt;&gt; But usernames and\n\n86\n00:04:14.500 --> 00:04:17.410\npasswords, if we're using that\nas a single factor, right,\n\n87\n00:04:17.410 --> 00:04:20.790\nsomething that we know along\nwith something we have.\n\n88\n00:04:20.790 --> 00:04:25.550\nPerhaps a smart card, perhaps a token\nthat we're inserting into the system and\n\n89\n00:04:25.550 --> 00:04:29.990\ngenerating a challenge of some kind,\nthat would be something like that.\n\n90\n00:04:29.990 --> 00:04:33.455\nOr something we are, we may combine this\nwith some sort of biometrics solution,\n\n91\n00:04:33.455 --> 00:04:36.250\nthe three common factors\nof authentication.\n\n92\n00:04:36.250 --> 00:04:39.299\nWhatever we decide, we can instantiate\nthose and set those up here.\n\n93\n00:04:40.560 --> 00:04:44.220\nWe'll click Next leaving that at I\ndo not want to use that right now.\n\n94\n00:04:44.220 --> 00:04:49.448\nOn the issuance authorization rules area,\nwe're gonna permit or decide whether\n\n95\n00:04:49.448 --> 00:04:54.080\nwe wanna permit all users to access\nthis relying party or deny all users.\n\n96\n00:04:54.080 --> 00:04:57.297\nClearly, denying all users means\nnobody's gonna be able to get in, but\n\n97\n00:04:57.297 --> 00:05:00.590\nwe're gonna allow users in, so\nwe're gonna leave this at permit.\n\n98\n00:05:00.590 --> 00:05:02.140\nCan always change this after the fact.\n\n99\n00:05:02.140 --> 00:05:04.410\nWe'll click Next here.\n\n100\n00:05:04.410 --> 00:05:10.390\nThen we've got a section that allows\nus to essentially summarize hey,\n\n101\n00:05:10.390 --> 00:05:13.480\nwe're ready to add the trust,\nhere's what we're doing.\n\n102\n00:05:13.480 --> 00:05:16.960\nWe got all the tabs that explain\nwhat we've made from some choices.\n\n103\n00:05:16.960 --> 00:05:20.390\nAlways good to go back, take a look at\nthis, make sure we know what's happening,\n\n104\n00:05:20.390 --> 00:05:22.540\nand that everything looks good, right?\n\n105\n00:05:22.540 --> 00:05:25.770\nAnd then when we're ready, we'll click\nNext here, we'll give it just a second.\n\n106\n00:05:26.840 --> 00:05:29.310\nThen we have to decide whether or\n\n107\n00:05:29.310 --> 00:05:32.988\nnot we want to open the edit\nclaim rule dialogue box.\n\n108\n00:05:32.988 --> 00:05:34.850\nWe're can go take a look at\nsome stuff when we're done,\n\n109\n00:05:34.850 --> 00:05:35.990\nthat is selected by default.\n\n110\n00:05:35.990 --> 00:05:37.290\nWe'll leave that there.\n\n111\n00:05:37.290 --> 00:05:38.941\nGo ahead and we'll click close.\n\n112\n00:05:38.941 --> 00:05:43.679\nGive that just a second, and\nthen we'll configure the claim rules for\n\n113\n00:05:43.679 --> 00:05:48.190\nthe relying party trust and\nmake sure that everything looks good.\n\n114\n00:05:48.190 --> 00:05:50.260\nWe'll finish configuring it, I should say.\n\n115\n00:05:50.260 --> 00:05:52.120\nSo you'll see when we do this.\n\n116\n00:05:52.120 --> 00:05:54.130\nJust to show you what's\nhere before we go ahead and\n\n117\n00:05:54.130 --> 00:05:56.610\ndo our next little piece\nof the puzzle here.\n\n118\n00:05:56.610 --> 00:06:00.470\nWe can go in and add rules for\nissuance transform.\n\n119\n00:06:00.470 --> 00:06:03.790\nWe can add rules for\nissuance authorization and or\n\n120\n00:06:03.790 --> 00:06:05.450\ndelegation authorization.\n\n121\n00:06:05.450 --> 00:06:08.930\nWe talked about the use of claims\nrules in prior conversations,\n\n122\n00:06:08.930 --> 00:06:10.290\nsome of the earlier episodes.\n\n123\n00:06:10.290 --> 00:06:12.980\nWalked you through what\nthe claims rules are used for,\n\n124\n00:06:12.980 --> 00:06:14.810\nshowed you the language of the structure.\n\n125\n00:06:14.810 --> 00:06:19.190\nRemember the rules are used to specify\nthe claims that will be sent and\n\n126\n00:06:19.190 --> 00:06:22.200\nto deal with how those claims\nare gonna be processed.\n\n127\n00:06:22.200 --> 00:06:26.850\nAnd so adding one or more rules in\nhere would allow us to then go in and\n\n128\n00:06:26.850 --> 00:06:28.720\nbe able to do this or\n\n129\n00:06:28.720 --> 00:06:33.320\nbe able to modify these rules depending\non what it is we would like to do.\n\n130\n00:06:33.320 --> 00:06:37.860\nSo we're gonna go ahead and we're gonna\nadd in an issuance transform rule.\n\n131\n00:06:39.120 --> 00:06:40.070\nClick Add rule.\n\n132\n00:06:41.200 --> 00:06:44.641\nYou saw me do this in the prior episode,\nwhere we went through and\n\n133\n00:06:44.641 --> 00:06:47.510\nwe set up the attributes as claims rule.\n\n134\n00:06:47.510 --> 00:06:51.156\nWe mapped our attributes, if you remember\nthe fun I had trying to type those all in,\n\n135\n00:06:51.156 --> 00:06:52.910\nyou're about to see that again.\n\n136\n00:06:52.910 --> 00:06:54.980\nBut remember, we mapped email address.\n\n137\n00:06:54.980 --> 00:06:58.330\nWe mapped UPN, User Principle Name,\nI think, right?\n\n138\n00:06:58.330 --> 00:06:59.230\nAnd we mapped.\n\n139\n00:07:00.590 --> 00:07:01.310\nWhat else did we map?\n\n140\n00:07:01.310 --> 00:07:03.040\nI forget what the third one was.\n\n141\n00:07:03.040 --> 00:07:03.950\nDisplay name, I think?\n\n142\n00:07:03.950 --> 00:07:04.533\nWe did display name [CROSSTALK].\n\n143\n00:07:04.533 --> 00:07:05.324\n&gt;&gt; Email.\n\n144\n00:07:05.324 --> 00:07:06.403\nYes.\nIt was [CROSSTALK].\n\n145\n00:07:06.403 --> 00:07:08.252\n&gt;&gt; Display name was name.\n\n146\n00:07:08.252 --> 00:07:09.540\nEmail address was email address.\n&gt;&gt; Yeah.\n\n147\n00:07:09.540 --> 00:07:10.960\n&gt;&gt; User principal name was UPN.\n\n148\n00:07:10.960 --> 00:07:12.480\nI think we mapped those three.\n\n149\n00:07:12.480 --> 00:07:15.490\nThat's what this kind of a rule does for\nus.\n\n150\n00:07:15.490 --> 00:07:18.470\nSo if you haven't seen that, like I said,\nthen you wanna go back and take a look.\n\n151\n00:07:18.470 --> 00:07:19.707\nWe did the other side of this.\n\n152\n00:07:19.707 --> 00:07:22.990\nAlready we're gonna go ahead\nwe're gonna set this up again.\n\n153\n00:07:22.990 --> 00:07:27.290\nBut instead of mapping LDAP attributes as\nclaims this time we're gonna go ahead and\n\n154\n00:07:27.290 --> 00:07:30.560\ndo a pass through or\nfilter an incoming claim rule.\n\n155\n00:07:30.560 --> 00:07:33.640\nDifferent rules, we're gonna take\na look at a different rule or\n\n156\n00:07:33.640 --> 00:07:36.240\ndifferent solution that we have to set up.\n\n157\n00:07:36.240 --> 00:07:38.970\nSo remember we have a total\nof five different ones here.\n\n158\n00:07:38.970 --> 00:07:40.500\nWe've talked about what they are.\n\n159\n00:07:40.500 --> 00:07:43.490\nThere's pass through or\nfilter, going to grab that one.\n\n160\n00:07:43.490 --> 00:07:46.530\nGives us a little update as to\nwhat the rule is and a summary if\n\n161\n00:07:46.530 --> 00:07:49.770\nyou're not sure what it is, encourage\nyou to take a look and read up on it.\n\n162\n00:07:49.770 --> 00:07:52.791\nWe'll click Next there,\nwe're gotta give our rule a name.\n\n163\n00:07:52.791 --> 00:07:54.170\nLet's go ahead and do that.\n\n164\n00:07:54.170 --> 00:07:56.530\nWe call this pass through Windows account.\n\n165\n00:07:56.530 --> 00:07:58.079\nSo let's just name this.\n\n166\n00:07:59.710 --> 00:08:03.760\nPass through Windows account rule.\n\n167\n00:08:03.760 --> 00:08:07.020\nReal important to label\nyour rules logically so\n\n168\n00:08:07.020 --> 00:08:10.800\npeople that are going back and looking\nat them in the management console later\n\n169\n00:08:10.800 --> 00:08:13.370\nhave a sense of what they are,\nwhat they're used for.\n\n170\n00:08:13.370 --> 00:08:15.880\nYou don't think about this all\nthe time when you do this.\n\n171\n00:08:15.880 --> 00:08:18.540\nBut you have one or two rules,\nyou can probably figure out what they are.\n\n172\n00:08:18.540 --> 00:08:22.390\nBut in the last demo we did in the other\nepisode, part one of this where we're\n\n173\n00:08:22.390 --> 00:08:26.140\nsetting up LDAP Claims rule, we had ten\nrules already sitting in the system by\n\n174\n00:08:26.140 --> 00:08:30.240\ndefault before we even went in and\ncreated our LDAP rule which was number 11.\n\n175\n00:08:30.240 --> 00:08:33.700\nIf they're not labeled properly and\nthere's quite a number of them,\n\n176\n00:08:33.700 --> 00:08:36.940\nas there can be, it may be very difficult\nto understand which rule does what.\n\n177\n00:08:36.940 --> 00:08:39.319\nYou're gonna spend a lot of\ntime hunting and searching.\n\n178\n00:08:40.450 --> 00:08:45.300\nThe other issue we're concerned, is that\nif you're not clear on what they do and\n\n179\n00:08:45.300 --> 00:08:47.222\nyou manipulate, modify, disable,\n\n180\n00:08:47.222 --> 00:08:52.080\nremove a rule, you may actually blow\nsomething up that's needing to be there.\n\n181\n00:08:52.080 --> 00:08:53.850\nAnd that can lead to complications.\n\n182\n00:08:53.850 --> 00:08:57.110\nNot because you can't fix it, but because\nit just takes a lot of time to go back and\n\n183\n00:08:57.110 --> 00:09:02.370\nundo all those things that you didn't\nmean to do, so just be aware of that.\n\n184\n00:09:02.370 --> 00:09:06.790\nAll right, so for the incoming claim type,\nwe're gonna specify our claim type here,\n\n185\n00:09:06.790 --> 00:09:08.870\nWindows account name is\ngonna be our claim type.\n\n186\n00:09:08.870 --> 00:09:09.590\nCan we go full screen?\n\n187\n00:09:09.590 --> 00:09:13.530\nI just want you to see the list of\nclaims that are available to us here.\n\n188\n00:09:13.530 --> 00:09:17.220\nRemember, I told you we mapped\na few in the last run through, or\n\n189\n00:09:17.220 --> 00:09:19.020\nthe first part of this demonstration.\n\n190\n00:09:19.020 --> 00:09:21.330\nEmail address, UPN, Display Name, etc.,\n\n191\n00:09:21.330 --> 00:09:26.430\nbut you'll see there are quite\na number of them, as I scroll down.\n\n192\n00:09:26.430 --> 00:09:28.840\nYou can see all of the different\nthings that are here.\n\n193\n00:09:28.840 --> 00:09:30.560\nSo here's my other pet peeve.\n\n194\n00:09:30.560 --> 00:09:32.725\nWe have gone off on\nthe applied versus okay.\n\n195\n00:09:32.725 --> 00:09:34.740\n&gt;&gt; Yeah.\n&gt;&gt; And the issues associated with UI\n\n196\n00:09:34.740 --> 00:09:35.720\ndesign, right?\n\n197\n00:09:35.720 --> 00:09:38.680\nSo no go back to full screen because you\ncan't really understand my pet peeve\n\n198\n00:09:38.680 --> 00:09:39.720\nunless you see this.\n\n199\n00:09:39.720 --> 00:09:44.254\nSo would logic dictate, as just a normal\nthought process for an average person,\n\n200\n00:09:44.254 --> 00:09:48.588\nthat when you have a list like this and\nyou're looking for, I don't know,\n\n201\n00:09:48.588 --> 00:09:52.980\nWindows account name which is what\nwe're gonna look for here in a minute.\n\n202\n00:09:52.980 --> 00:09:55.210\nWhich is about a third of\nthe way down the list.\n\n203\n00:09:55.210 --> 00:09:56.410\nIt's right here.\n\n204\n00:09:56.410 --> 00:09:59.660\nBut wouldn't logic dictate\nthat the average person\n\n205\n00:09:59.660 --> 00:10:02.280\nwould want to look alphabetically so\nit'd be easy to find?\n\n206\n00:10:02.280 --> 00:10:04.350\n&gt;&gt; It's the first thing\nthat pops into my head.\n\n207\n00:10:04.350 --> 00:10:07.976\n&gt;&gt; But apparently not popping into the\nhead of people who designed the UI because\n\n208\n00:10:07.976 --> 00:10:10.750\nthe random selector wheel\nthat they use to decide-\n\n209\n00:10:10.750 --> 00:10:11.640\n&gt;&gt; Man.\n\n210\n00:10:11.640 --> 00:10:14.410\n&gt;&gt; -how to alphabetize here\nis just absolutely insane.\n\n211\n00:10:14.410 --> 00:10:15.601\n&gt;&gt; It's a real dice roll, isn't it?\n\n212\n00:10:15.601 --> 00:10:17.329\n[LAUGH]\n&gt;&gt; There's just like no rhyme or\n\n213\n00:10:17.329 --> 00:10:20.904\nreason to this, because you've got stuff\nappearing in every order except the order\n\n214\n00:10:20.904 --> 00:10:23.969\nyou would expect for you to be actually,\nbe able to find things, I mean,\n\n215\n00:10:23.969 --> 00:10:25.460\nit's not alphabetized clearly.\n\n216\n00:10:25.460 --> 00:10:25.960\n&gt;&gt; At all.\n&gt;&gt; Right?\n\n217\n00:10:25.960 --> 00:10:26.506\n&gt;&gt; Yeah.\n\n218\n00:10:26.506 --> 00:10:28.720\n&gt;&gt; It's not like ascending or descending,\n\n219\n00:10:28.720 --> 00:10:33.090\nit is just like, let's just do the most\nrandom thing we can possibly do, right?\n\n220\n00:10:33.090 --> 00:10:36.810\nSo, now that I've gone off on\nmy soapbox tirade, [LAUGH],\n\n221\n00:10:36.810 --> 00:10:38.140\nwe need Windows account names.\n\n222\n00:10:38.140 --> 00:10:40.038\nSo we're gonna go ahead,\nwe're gonna grab this one.\n\n223\n00:10:40.038 --> 00:10:41.080\nLet's put that in there.\n\n224\n00:10:41.080 --> 00:10:45.616\nNow that we've done that, what we're\ngonna do is we're gonna go ahead and\n\n225\n00:10:45.616 --> 00:10:47.900\nwe're going to- where am I at here?\n\n226\n00:10:47.900 --> 00:10:49.870\nJust give me one second,\nwe just added that.\n\n227\n00:10:49.870 --> 00:10:50.900\nI'm sorry, I'm not paying attention.\n\n228\n00:10:50.900 --> 00:10:53.870\nAll right so we've done that,\nwe're gonna pass through all claim values.\n\n229\n00:10:53.870 --> 00:10:56.720\nThat's what happens when you go off\nin your rants and your tirades,\n\n230\n00:10:56.720 --> 00:10:57.740\nyou forget what your doing.\n\n231\n00:10:57.740 --> 00:10:59.165\n&gt;&gt; What you're doing, yeah.\n&gt;&gt; You get off into space nothing\n\n232\n00:10:59.165 --> 00:10:59.910\nmakes sense.\n\n233\n00:10:59.910 --> 00:11:02.580\nSo we're gonna map our incoming\nclaims with the account name,\n\n234\n00:11:02.580 --> 00:11:03.740\nwe're gonna pass them through.\n\n235\n00:11:03.740 --> 00:11:06.020\nWe're gonna click Finish here,\njust put that in.\n\n236\n00:11:06.020 --> 00:11:08.288\nWe got our rules set up.\n\n237\n00:11:08.288 --> 00:11:10.440\nNow what we're gonna do\nis add another rule.\n\n238\n00:11:11.820 --> 00:11:14.550\nAnd we're gonna do this one on\na pass-through filter on incoming\n\n239\n00:11:14.550 --> 00:11:16.596\nclaims again, so we'll add another rule.\n\n240\n00:11:16.596 --> 00:11:20.724\nDo a pass-through here.\n\n241\n00:11:22.234 --> 00:11:23.570\nDo that one more time.\n\n242\n00:11:23.570 --> 00:11:24.630\nGot that.\n\n243\n00:11:24.630 --> 00:11:28.697\nAlright, we're gonna call this one\npass-through email address rule.\n\n244\n00:11:32.472 --> 00:11:35.907\nAnd get that in there.\n\n245\n00:11:38.372 --> 00:11:39.450\nAll right, so we got that one.\n\n246\n00:11:39.450 --> 00:11:41.300\nWe'll specify our claim type.\n\n247\n00:11:41.300 --> 00:11:44.530\nWhich claim type do you think we're\ngonna do this time on incoming?\n\n248\n00:11:44.530 --> 00:11:48.000\nIf you had to guess luckily they decided\nit should be one they should put\n\n249\n00:11:48.000 --> 00:11:48.690\nup at the top.\n\n250\n00:11:48.690 --> 00:11:49.980\nWe'll do email address.\n\n251\n00:11:49.980 --> 00:11:53.680\nBut the idea is we're gonna pass\nthose claims through, right?\n\n252\n00:11:53.680 --> 00:11:58.280\nAllowing us to map the claims\nthat we are making, right?\n\n253\n00:11:58.280 --> 00:12:01.840\nThis is the idea behind this logic\nis claims that are being made\n\n254\n00:12:01.840 --> 00:12:05.100\nare going to now have to be accepted and\npass through using these rules and\n\n255\n00:12:05.100 --> 00:12:07.130\nthat's why we're setting these up, right?\n\n256\n00:12:07.130 --> 00:12:11.350\nSo we're gonna go ahead and\nadd one more rule in.\n\n257\n00:12:11.350 --> 00:12:15.130\nThis one is going to be for\nour UPN or User Principle Name.\n\n258\n00:12:15.130 --> 00:12:17.620\nWe're gonna pass that one through as well.\n\n259\n00:12:17.620 --> 00:12:21.110\nSo let's go grab that,\nwe'll do one more here.\n\n260\n00:12:21.110 --> 00:12:23.791\nPass through, click Next,\n\n261\n00:12:23.791 --> 00:12:29.720\nwe'll call this one pass through UPN for\nuser principle name.\n\n262\n00:12:31.470 --> 00:12:32.995\nSpecify our claim type.\n\n263\n00:12:32.995 --> 00:12:36.340\nLet's go grab that, we'll do UPN there.\n\n264\n00:12:36.340 --> 00:12:37.797\nPass through all of those.\n\n265\n00:12:37.797 --> 00:12:40.823\n&gt;&gt; You got the name saying Ruckel,\n&gt;&gt; Ruckel, do I?\n\n266\n00:12:40.823 --> 00:12:41.881\n&gt;&gt; Yeah.\n\n267\n00:12:41.881 --> 00:12:44.115\n&gt;&gt; It's close enough,\nit's just a descriptive name.\n\n268\n00:12:44.115 --> 00:12:46.081\n&gt;&gt; Yeah.\n&gt;&gt; It's not really all that important but\n\n269\n00:12:46.081 --> 00:12:48.700\nsince you pointed it out,\nI will go ahead, I will fix that.\n\n270\n00:12:48.700 --> 00:12:51.955\n&gt;&gt; [LAUGH]\n&gt;&gt; Never let me type, it's just never,\n\n271\n00:12:51.955 --> 00:12:53.771\nit's always an exciting adventure.\n\n272\n00:12:53.771 --> 00:12:57.592\n&gt;&gt; I want to see a type-off\nbetween you and Ronnie Wong, man.\n\n273\n00:12:57.592 --> 00:12:59.375\n&gt;&gt; Is Ronnie as challenged as I am?\n\n274\n00:12:59.375 --> 00:13:01.892\n&gt;&gt; My goodness the boy,\nhe suffers with it.\n\n275\n00:13:01.892 --> 00:13:03.052\n&gt;&gt; All right.\n[LAUGH] I'm gonna add one\n\n276\n00:13:03.052 --> 00:13:03.792\nmore rule in here.\n\n277\n00:13:03.792 --> 00:13:06.141\nRemember we mapped a total\nof three attributes.\n\n278\n00:13:06.141 --> 00:13:08.211\nSo we're gonna add the three rules for\nthose.\n\n279\n00:13:08.211 --> 00:13:12.648\nWe're also adding the Windows account name\nbecause that, although it's not a rule,\n\n280\n00:13:12.648 --> 00:13:16.233\nrather a attribute that we mapped,\nwe need the Windows account name in\n\n281\n00:13:16.233 --> 00:13:20.221\norder to get email address, in order to\nget rhe UPN or to get the display name.\n\n282\n00:13:20.221 --> 00:13:22.886\nWe need a total of four rules\nto accommodate all of that,\n\n283\n00:13:22.886 --> 00:13:26.350\nbecause the attributes that we've mapped,\nthe claims we've mapped,\n\n284\n00:13:26.350 --> 00:13:28.977\nare actually attributes of\nthe Windows account name.\n\n285\n00:13:28.977 --> 00:13:32.439\nSo we need to pull that one in,\nwhich is the first rule we created, and\n\n286\n00:13:32.439 --> 00:13:34.767\nthen the actual step by step,\nor rule by rule,\n\n287\n00:13:34.767 --> 00:13:38.617\nmapping for all the other claims that\nwe are making have to be programmed in.\n\n288\n00:13:38.617 --> 00:13:42.409\nSo we're gonna do one more here,\nthis one will be for our name rule.\n\n289\n00:13:42.409 --> 00:13:48.167\nSo let me do this one, do that, do that,\nand this will be for name, right?\n\n290\n00:13:48.167 --> 00:13:52.900\nSo, pass through, name Rule.\n\n291\n00:13:52.900 --> 00:13:55.850\nAnd we're gonna go ahead, we're gonna\nchoose names, select claim type,\n\n292\n00:13:55.850 --> 00:14:00.070\nand we'll do name right there,\npass through, click Finish.\n\n293\n00:14:00.070 --> 00:14:02.930\nAll right, so we've got our rules set up.\n\n294\n00:14:04.120 --> 00:14:05.670\nWe'll go ahead and click Apply here.\n\n295\n00:14:07.190 --> 00:14:11.340\nClick Okay, and now we've set up,\nyou can see we have\n\n296\n00:14:11.340 --> 00:14:16.850\na prior aligned part of trust rule that's\nthere for device registration service.\n\n297\n00:14:16.850 --> 00:14:19.180\nDoesn't really matter,\njust there by default.\n\n298\n00:14:19.180 --> 00:14:21.140\nBut we can leave that in there,\nwe can get rid of that.\n\n299\n00:14:21.140 --> 00:14:22.990\nIt's up to us to decide.\n\n300\n00:14:22.990 --> 00:14:25.050\nWe can pull that out if we want to.\n\n301\n00:14:25.050 --> 00:14:27.860\nBut the one that's important\nto us is this one.\n\n302\n00:14:27.860 --> 00:14:29.330\nNotice there's no prioritized order.\n\n303\n00:14:29.330 --> 00:14:31.910\nIt's not that we are gonna\nprocess them in some order,\n\n304\n00:14:31.910 --> 00:14:34.960\nnot that we have to hit this\none before we hit another one.\n\n305\n00:14:34.960 --> 00:14:38.270\nIt's just that we have to have a rule\nthat's actually gonna accommodate\n\n306\n00:14:38.270 --> 00:14:40.530\nthe claims that are coming through,\nand we look for\n\n307\n00:14:40.530 --> 00:14:44.710\nthat rule as we walk down the list based\non processing of incoming information.\n\n308\n00:14:44.710 --> 00:14:48.500\nAll right, so having gone through all\nthis, we essentially are ready to go.\n\n309\n00:14:48.500 --> 00:14:53.310\nNow all we'd have to do is actually go use\nthat claims app and actually start sending\n\n310\n00:14:53.310 --> 00:14:57.848\nthrough information in order to validate\nthat the user who's making the claim\n\n311\n00:14:57.848 --> 00:15:02.454\nlogging in is providing information that\nwe can validate across our federation\n\n312\n00:15:02.454 --> 00:15:07.229\ntrust, between the two domains that have\nestablished that trust relationship.\n\n313\n00:15:07.229 --> 00:15:11.514\nAnd that the provider domain,\nthe claimant organization,\n\n314\n00:15:11.514 --> 00:15:15.580\nis providing claims to\nthe resource organization.\n\n315\n00:15:15.580 --> 00:15:19.780\nThe area where we're actually going to\nprovide those claims, set them up, map\n\n316\n00:15:19.780 --> 00:15:24.520\nthem, authorize them, and then allow users\nin in order to claim their resources and\n\n317\n00:15:24.520 --> 00:15:26.630\ninteract because we trust them.\n\n318\n00:15:26.630 --> 00:15:28.905\nAll the moving parts and\npieces are now in place.\n\n319\n00:15:28.905 --> 00:15:32.365\nWe've set up and\nconfigured ADFS top to bottom and\n\n320\n00:15:32.365 --> 00:15:36.265\nall you would have to do at this point\nwould be to load up a claims-aware app or\n\n321\n00:15:36.265 --> 00:15:39.475\nuse some sort of claim, doesn't\neven have to be a claims-aware app.\n\n322\n00:15:39.475 --> 00:15:43.055\nBut you could simply use claims to\nauthenticate across that divide\n\n323\n00:15:43.055 --> 00:15:46.515\nfrom one domain to another,\nforest to forest through ADFS.\n\n324\n00:15:46.515 --> 00:15:49.385\nAnd assuming that you\nprovided the right claims,\n\n325\n00:15:49.385 --> 00:15:53.280\nyou have the right information,\nyou would be successful at logging in, or\n\n326\n00:15:53.280 --> 00:15:56.030\nyou'd be successful at authenticating,\nI should say, to that access resource.\n\n327\n00:15:56.030 --> 00:15:58.210\n&gt;&gt; And we always like successful\nauthentication, right?\n\n328\n00:15:58.210 --> 00:16:00.190\nIt's always a good time had by all.\n\n329\n00:16:00.190 --> 00:16:02.930\nSo, now if you need to\nuse federated services,\n\n330\n00:16:02.930 --> 00:16:06.820\nyou should have a pretty good roadmap on\nhow to implement that, configure that, and\n\n331\n00:16:06.820 --> 00:16:09.130\nbegin to work with it in your environment.\n\n332\n00:16:09.130 --> 00:16:12.200\nAnd we do have our good friend, Mr.\nAdam Gordon, to thank for that.\n\n333\n00:16:12.200 --> 00:16:13.460\nAdam, we do thank you for that.\n\n334\n00:16:13.460 --> 00:16:15.172\nIt's an amazing little trick.\n\n335\n00:16:15.172 --> 00:16:18.640\nNothing too spectacularly difficult,\nwhich is always nice, right?\n\n336\n00:16:18.640 --> 00:16:23.200\nMicrosoft does a great job of always\ngiving us nice wizards that kind of\n\n337\n00:16:23.200 --> 00:16:23.810\nhold your hand and\n\n338\n00:16:23.810 --> 00:16:28.780\nwalk you through these things, even at the\ntop level capabilities of their software.\n\n339\n00:16:28.780 --> 00:16:31.536\nBut hey, I'll always take all\nthe hand-holding I can get.\n\n340\n00:16:31.536 --> 00:16:33.480\n[LAUGH] I appreciate that.\n\n341\n00:16:33.480 --> 00:16:36.350\nOkay, that being said, Adam,\nwe do thank you for joining us today.\n\n342\n00:16:36.350 --> 00:16:39.351\nBut it does look like we've come\nto the end of our five part,\n\n343\n00:16:39.351 --> 00:16:41.892\ntwo part mini series,\nhowever you want to say it.\n\n344\n00:16:41.892 --> 00:16:43.410\n&gt;&gt; Our Mega Master Series.\n\n345\n00:16:43.410 --> 00:16:45.180\n&gt;&gt; Yeah.\nI like that.\n\n346\n00:16:45.180 --> 00:16:48.620\nThanks for joining us on our\nMega Master Series here on ITPro.TV.\n\n347\n00:16:48.620 --> 00:16:52.020\nBut it is time for us to sign off,\nI've been your host Daniel Lowrie.\n\n348\n00:16:52.020 --> 00:16:52.860\n&gt;&gt; I'm Adam Gordon.\n\n349\n00:16:52.860 --> 00:16:55.320\n&gt;&gt; And we'll see you next time.\n\n350\n00:16:55.320 --> 00:17:01.285\n[MUSIC]\n\n351\n00:17:01.285 --> 00:17:04.320\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "214171014"
        },
        {
          "description": "In this episode, Daniel and Adam introduce you to Dynamic Access Control. Here they will discuss and demonstrate planning and implementing data access for users and devices. They go over each of the building blocks and vocabulary, prerequisites for setting up DAC, and then demo an actual DAC implementation.",
          "length": "1211",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-5-dynamic_access_control-041317-PGM.00_00_12_02.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-5-dynamic_access_control-041317-PGM.00_00_12_02.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-5-dynamic_access_control-041317-PGM.00_00_12_02.Still001-sm.jpg",
          "title": "Dynamic Access Control",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:03.033\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:03.033 --> 00:00:04.471\n[CROSSTALK]\n\n3\n00:00:04.471 --> 00:00:07.653\n[MUSIC]\n\n4\n00:00:07.653 --> 00:00:11.578\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.578 --> 00:00:13.498\n&gt;&gt; All right, greetings everyone and\n\n6\n00:00:13.498 --> 00:00:16.930\nwelcome to another exciting\nepisode of ITProTV.\n\n7\n00:00:16.930 --> 00:00:19.180\nI'm your host, Daniel Lowrie and\nin today's episode,\n\n8\n00:00:19.180 --> 00:00:24.850\nwe are coming back at you with\nmore of our MCSE 70-414 series and\n\n9\n00:00:24.850 --> 00:00:27.320\njoining us yet again,\nour good friend, Mr Adam Jordan.\n\n10\n00:00:27.320 --> 00:00:28.520\nAdam, we're glad to have you again, sir.\n\n11\n00:00:28.520 --> 00:00:29.500\nHow's it going today?\n\n12\n00:00:29.500 --> 00:00:31.759\n&gt;&gt; Good, good,\nvery excited to be here as always.\n\n13\n00:00:31.759 --> 00:00:35.697\nExcited to talk, take some time and\ntalk to you about a little understood,\n\n14\n00:00:35.697 --> 00:00:36.960\nlittle known concept.\n\n15\n00:00:36.960 --> 00:00:40.205\nWe don't do a real good job of marketing\nthis particular feature I think cuz\n\n16\n00:00:40.205 --> 00:00:43.359\nyou don't hear about it very often yet,\nit's been there for some time.\n\n17\n00:00:43.359 --> 00:00:45.461\nIt's certainly in Server 12, 12R2.\n\n18\n00:00:45.461 --> 00:00:48.131\nIt is in Server 16 going forward,\nif you're looking ahead.\n\n19\n00:00:48.131 --> 00:00:51.030\nIt's called DAC, Dynamic Access Control.\n\n20\n00:00:51.030 --> 00:00:53.227\nIt's used for central governance and\n\n21\n00:00:53.227 --> 00:00:57.765\noversight of the ability to integrate\nthe concepts we talked about with ADFS.\n\n22\n00:00:57.765 --> 00:01:01.744\nIf you haven't seen those episodes,\nour, what do we call, our mega masters\n\n23\n00:01:01.744 --> 00:01:05.440\nseries on ADFS, you should probably\ngo back and take a look at that.\n\n24\n00:01:05.440 --> 00:01:07.720\nWe talked all that federation services,\nbut\n\n25\n00:01:07.720 --> 00:01:11.620\nthe part that links to DAC specifically,\nis the idea of the claims and\n\n26\n00:01:11.620 --> 00:01:16.520\nthe attributes that we use in ADFS\nto be able to drive the extension of\n\n27\n00:01:16.520 --> 00:01:21.060\ntrust to a untrusted or\nunknown third party and allow them to come\n\n28\n00:01:21.060 --> 00:01:25.390\nin based on the information they provide\nto us, Authenticate and be granted access.\n\n29\n00:01:25.390 --> 00:01:27.200\nThat's ADFS in a nutshell.\n\n30\n00:01:27.200 --> 00:01:29.060\nIf you haven't seen\nthe five episodes we did,\n\n31\n00:01:29.060 --> 00:01:30.870\nyou just learned everything\nyou need to know about ADFS.\n\n32\n00:01:30.870 --> 00:01:35.703\nSo, the idea there was really a very\nextensive conversation around\n\n33\n00:01:35.703 --> 00:01:39.433\nhow we extend trust out to\na partner organization and\n\n34\n00:01:39.433 --> 00:01:42.683\nallow them through\nthe trusts that we set up.\n\n35\n00:01:42.683 --> 00:01:44.339\nThe relying party trust and\n\n36\n00:01:44.339 --> 00:01:49.453\nall the different associated information\nwe provide to then be able to make claims.\n\n37\n00:01:49.453 --> 00:01:53.863\nAnd claims give us information about what\nwe call the claiming through the person,\n\n38\n00:01:53.863 --> 00:01:56.761\nthe entity that is looking\nto establish themselves and\n\n39\n00:01:56.761 --> 00:01:58.411\ngain access to our resources.\n\n40\n00:01:58.411 --> 00:02:02.986\nWe have a partner organization or\na claimant domain and we have sometimes\n\n41\n00:02:02.986 --> 00:02:07.711\ncalled the accounts domain and then we\nhave a relying party organization or\n\n42\n00:02:07.711 --> 00:02:12.390\nthe resource domain in ADFS,\nyou hear it referred to different ways.\n\n43\n00:02:12.390 --> 00:02:17.280\nBut, the accounts domain and the resource\ndomain are getting together and\n\n44\n00:02:18.590 --> 00:02:21.360\ntrusting each other or agreeing,\nI had to think about that for a second,\n\n45\n00:02:21.360 --> 00:02:24.580\ncuz I was doing this and nothing\nwas coming from here up to here and\n\n46\n00:02:24.580 --> 00:02:27.200\nback again, so I had a momentary pause.\n\n47\n00:02:27.200 --> 00:02:31.550\nSo we're trying to link these\ntwo unknown parties together and\n\n48\n00:02:31.550 --> 00:02:34.010\nestablish the ability for\nthem to communicate securely and\n\n49\n00:02:34.010 --> 00:02:37.890\nauthenticate their users and\nresources that we trust each other\n\n50\n00:02:37.890 --> 00:02:42.272\nbefore we actually allow our resources and\nour users to get together and do business.\n\n51\n00:02:42.272 --> 00:02:45.900\nWe were gonna take that particular part of\nthe conversation, bring it forward here\n\n52\n00:02:45.900 --> 00:02:51.120\ninto DAC and use those claims or\nthose attributes that potentially\n\n53\n00:02:51.120 --> 00:02:56.080\nare provided to then drive access control,\ndynamically and,\n\n54\n00:02:56.080 --> 00:03:01.180\nallow users who are creators, owners,\nwho create data to add these claims or\n\n55\n00:03:01.180 --> 00:03:04.780\nattributes into the security\nproperties of their data.\n\n56\n00:03:04.780 --> 00:03:09.740\nSo that they can further secure their\ndata and allow only users that meet\n\n57\n00:03:09.740 --> 00:03:14.180\nthese requirements, provide these claims,\nor have these attributes to access it.\n\n58\n00:03:14.180 --> 00:03:18.130\nSo, this is access control,\ndon't think anything more or\n\n59\n00:03:18.130 --> 00:03:19.520\nless of it than what it is.\n\n60\n00:03:19.520 --> 00:03:24.382\nIt's just that it's called Dynamic Access\nControl cuz we're extending access control\n\n61\n00:03:24.382 --> 00:03:27.379\nthrough NTFS,\nthrough the traditional file system.\n\n62\n00:03:27.379 --> 00:03:32.078\nAnd we're doing so, by enabling our\nuse of or the additional use of other\n\n63\n00:03:32.078 --> 00:03:36.699\nfactors that allow us to authenticate\nusers but not under the guise of,\n\n64\n00:03:36.699 --> 00:03:41.570\nhey, something you have, something\nyou know, something you are per se.\n\n65\n00:03:41.570 --> 00:03:45.030\nThey are factors that we\nare able to provide, right?\n\n66\n00:03:45.030 --> 00:03:47.660\nSo they definitely are one of\nthe factors of authentication.\n\n67\n00:03:47.660 --> 00:03:52.280\nBut specifically, we're enabling the use\nas I said of claims, resource properties,\n\n68\n00:03:52.280 --> 00:03:56.140\nrules and or conditional expressions\nto be able to manage access.\n\n69\n00:03:56.140 --> 00:03:59.270\nAnd this is what DAC provides\nus with the ability to do.\n\n70\n00:03:59.270 --> 00:04:00.650\nSo we can link this and\n\n71\n00:04:00.650 --> 00:04:05.270\nextend our ability to provide control\nover the dynamic access to data.\n\n72\n00:04:05.270 --> 00:04:07.528\nAnd that's really what DAC is all about.\n\n73\n00:04:07.528 --> 00:04:11.600\nSome identity and/or vocabulary concepts,\nwe just wanna make sure you're comfortable\n\n74\n00:04:11.600 --> 00:04:13.750\nwith your so\nwe'll talk about DAC a little bit.\n\n75\n00:04:13.750 --> 00:04:16.923\nI wanna talk about the claims,\nI'll just mention those,\n\n76\n00:04:16.923 --> 00:04:21.394\nthat's the information that's provided\nfrom a trusted source about an entity,\n\n77\n00:04:21.394 --> 00:04:24.005\nthere are two types in Windows 12 or 12R2.\n\n78\n00:04:24.005 --> 00:04:28.805\nAnd going forward into 16, we provide,\nwe can do claims based on users and or\n\n79\n00:04:28.805 --> 00:04:34.010\ndevices so, machine attributes can be\nclaims, user attributes can be claims.\n\n80\n00:04:34.010 --> 00:04:39.270\nSo we could say that, Daniel's claim\nas a user is a group membership.\n\n81\n00:04:39.270 --> 00:04:41.203\nMaybe Daniel's in a group of some kind and\n\n82\n00:04:41.203 --> 00:04:43.535\nhe can use that as an attribute\nthat can be a claim.\n\n83\n00:04:43.535 --> 00:04:48.203\nOr me, as the owner of data that I wanna\ncertify and secure based on claims,\n\n84\n00:04:48.203 --> 00:04:50.990\ncould say people have to be in this group.\n\n85\n00:04:50.990 --> 00:04:54.646\nBut I could also focus in on Daniel's\ncomputer and say, that if he's using\n\n86\n00:04:54.646 --> 00:04:58.595\na certain kind of computer whatever that\nmay be, or an attribute associated with\n\n87\n00:04:58.595 --> 00:05:02.039\nit, maybe a certain operating system,\ncertain service pack level.\n\n88\n00:05:02.039 --> 00:05:06.802\nMaybe who knows what, there's a whole\nbunch of different attributes and claims,\n\n89\n00:05:06.802 --> 00:05:11.224\nwe can make based on device that we could\nthen further subdivide and filter and\n\n90\n00:05:11.224 --> 00:05:13.420\nscope that authentication process.\n\n91\n00:05:13.420 --> 00:05:18.890\nAnd, if Daniel's able to present or his\naccess request presents, all the claims or\n\n92\n00:05:18.890 --> 00:05:22.730\nall the attributes that match up,\nwe let him in, if it doesn't, we don't.\n\n93\n00:05:22.730 --> 00:05:25.310\nSo claims are the things we operate on.\n\n94\n00:05:25.310 --> 00:05:28.670\nIdentity is information from\na trusted source about an entity.\n\n95\n00:05:28.670 --> 00:05:31.930\nWe call identity essentially with\nsum total of what you provide.\n\n96\n00:05:31.930 --> 00:05:34.970\nWe have resource properties,\nthese are be attributes of the file or\n\n97\n00:05:34.970 --> 00:05:37.840\nfolder that's being target by DAC.\n\n98\n00:05:37.840 --> 00:05:42.031\nSo these are items that we will\nthen enable, use or program in,\n\n99\n00:05:42.031 --> 00:05:44.493\nI should say, on the file or folder.\n\n100\n00:05:44.493 --> 00:05:48.003\nWe have the Central Access Policies,\nthis creates policies and\n\n101\n00:05:48.003 --> 00:05:50.960\napplies them that are then\ngonna be used to drive DAC.\n\n102\n00:05:50.960 --> 00:05:55.240\nAnd we have the central access rules\nthat are used to a go through and\n\n103\n00:05:55.240 --> 00:05:59.140\nrun through the policy and compare and\nfilter all the claims and attributes that\n\n104\n00:05:59.140 --> 00:06:02.530\nare provided to ensure that we're matching\nthem up that they work the right way.\n\n105\n00:06:02.530 --> 00:06:05.590\nThis sounds very similar to\nthe things we did in ADFS.\n\n106\n00:06:05.590 --> 00:06:09.690\nIf you've seen those episodes, if you're\nfamiliar with what we were doing there,\n\n107\n00:06:09.690 --> 00:06:14.440\nhopefully that makes sense to you, because\nthose are the similar kinds of vocabulary\n\n108\n00:06:14.440 --> 00:06:18.310\nitems, similar kinds of concepts that\nwe're talking about, essentially,\n\n109\n00:06:18.310 --> 00:06:22.070\nthe same idea, this is not ADFS,\nI wanna be clear.\n\n110\n00:06:22.070 --> 00:06:27.000\nBut it is a stripped down version\nof the basic core concepts being\n\n111\n00:06:27.000 --> 00:06:32.050\napplied inside the directory,\ninside the domain to object data,\n\n112\n00:06:32.050 --> 00:06:36.610\nspecifically to files and\nfolders that an individual user creates.\n\n113\n00:06:36.610 --> 00:06:41.290\nAnd then is given the rights to augment\naccess to by using this technology.\n\n114\n00:06:41.290 --> 00:06:45.840\nSo, it's not quite ADFS slide,\nI don't wanna make things in your mind\n\n115\n00:06:45.840 --> 00:06:48.640\nconnecting ways that may or\nmay not be appropriate for you.\n\n116\n00:06:48.640 --> 00:06:50.719\nBut you could think of it this way,\n\n117\n00:06:50.719 --> 00:06:54.809\nbecause it really is a boiled down\nessential version of the kernel,\n\n118\n00:06:54.809 --> 00:06:58.702\nthe core concepts of ADFS,\nin terms of the claims and the rules.\n\n119\n00:06:58.702 --> 00:07:01.400\nAnd those are the pieces\nthat we are focusing on.\n\n120\n00:07:01.400 --> 00:07:03.580\nWe have some background\nbase level requirements,\n\n121\n00:07:03.580 --> 00:07:06.284\ncall them pre-reqs traditionally,\nthat we need to enable DAC.\n\n122\n00:07:07.620 --> 00:07:10.525\nWe need to have Windows Server 12,\n12 R2 or Server 16 running.\n\n123\n00:07:10.525 --> 00:07:14.440\nWe need the File Server Resource Manager\ninstalled.\n\n124\n00:07:14.440 --> 00:07:19.032\nYou would set this up, like go in to\nyour Server Manager, go in to manage,\n\n125\n00:07:19.032 --> 00:07:22.383\nadd/remove, roles and\nfeatures, and in the FSRM.\n\n126\n00:07:22.383 --> 00:07:26.379\nFor File Server Resource Manager role has\nto be installed and set up on the file\n\n127\n00:07:26.379 --> 00:07:30.209\nserver, that's gonna host the resources,\nthe DAC will be protecting.\n\n128\n00:07:30.209 --> 00:07:34.547\nSo these are not resources locally\non an individual machine but rather,\n\n129\n00:07:34.547 --> 00:07:38.884\nresources up on file servers,\ncentrally controlled in a directory, or\n\n130\n00:07:38.884 --> 00:07:42.770\nin a domain, I should say,\nthat we are gonna be focusing on.\n\n131\n00:07:42.770 --> 00:07:43.943\nI just wanna make sure\nwe're aware of that.\n\n132\n00:07:43.943 --> 00:07:48.428\nThe file server, using the FSRM role, or\nthe feature rather, can then go ahead and\n\n133\n00:07:48.428 --> 00:07:52.660\nread the claims and process them and\nunderstand the attributes using Kerberos\n\n134\n00:07:52.660 --> 00:07:56.726\nauthentication and pairing Kerberos\nauthentication with these claims.\n\n135\n00:07:56.726 --> 00:08:00.536\nWe're extending Kerberos and actually\nusing something called Kerberos armoring.\n\n136\n00:08:00.536 --> 00:08:02.390\nWhich is a newer feature in Kerberos.\n\n137\n00:08:02.390 --> 00:08:04.615\nYou familiar with\nthe whole armoring concept?\n\n138\n00:08:04.615 --> 00:08:05.579\n&gt;&gt; I can't say that I am.\n\n139\n00:08:05.579 --> 00:08:07.900\n&gt;&gt; You're a big knife enthusiast and\ngun enthusiast.\n\n140\n00:08:07.900 --> 00:08:08.810\n&gt;&gt; I am.\n&gt;&gt; So armoring in general\n\n141\n00:08:08.810 --> 00:08:09.310\nwould be-\n&gt;&gt; [LAUGH]\n\n142\n00:08:09.310 --> 00:08:10.570\n&gt;&gt; Something I think would be right up\n\n143\n00:08:10.570 --> 00:08:12.382\nyour alley, for the most part.\n&gt;&gt; Well,\n\n144\n00:08:12.382 --> 00:08:13.609\nnow that I know it's a thing.\n[LAUGH]\n\n145\n00:08:13.609 --> 00:08:15.224\n&gt;&gt; It is actually a real thing.\n\n146\n00:08:15.224 --> 00:08:17.609\nJust armoring extends our ability to use\n\n147\n00:08:17.609 --> 00:08:19.575\nKerberos at certain circumstances.\n\n148\n00:08:19.575 --> 00:08:23.053\nOne of the things it does is provide\nsupport for Dynamic Access Control and\n\n149\n00:08:23.053 --> 00:08:27.035\nallows us to secure the Kerberos tickets,\nencrypting them and making sure that they\n\n150\n00:08:27.035 --> 00:08:31.080\nare going to be secure so that no one can\nmonkey around with them, essentially.\n\n151\n00:08:31.080 --> 00:08:32.965\nSo we're using that capability,\n\n152\n00:08:32.965 --> 00:08:37.515\nwe translate those claims through the\nKerberos process, and we read those SSIDs,\n\n153\n00:08:37.515 --> 00:08:41.020\nthose security identifiers,\nand those claim attributes.\n\n154\n00:08:41.020 --> 00:08:44.800\nAnd we translate all that into\nthe authentication tickets that Kerberos\n\n155\n00:08:44.800 --> 00:08:45.660\nprovides.\n\n156\n00:08:45.660 --> 00:08:48.280\nWe're not going to go back through\nthe whole hey this is how Kerberos works\n\n157\n00:08:48.280 --> 00:08:49.040\nconcept.\n\n158\n00:08:49.040 --> 00:08:51.700\nBut remember, we have two types\nof tickets that are generated.\n\n159\n00:08:51.700 --> 00:08:54.010\nWe have what's called a TGG,\nticket granting tickets,\n\n160\n00:08:54.010 --> 00:08:56.370\nsometimes referred to as a master ticket.\n\n161\n00:08:56.370 --> 00:09:00.000\nThat's the ticket you get when you\nauthenticate initially as you log in or\n\n162\n00:09:00.000 --> 00:09:01.940\nare successful at authenticating.\n\n163\n00:09:01.940 --> 00:09:03.510\nWindows provides that to you,\n\n164\n00:09:03.510 --> 00:09:06.940\nthe LSA specifically,\nLocal Security Authority module in Windows\n\n165\n00:09:06.940 --> 00:09:10.330\nprovides that through the process\nof authenticating your identity.\n\n166\n00:09:10.330 --> 00:09:15.440\nThat TGT is bound to your user identity,\nit's bound to your user token.\n\n167\n00:09:15.440 --> 00:09:19.247\nThat is then presented and used to\ngenerate service tickets or session\n\n168\n00:09:19.247 --> 00:09:23.773\ntickets, one-off tickets that are used\nas you make request to access resources.\n\n169\n00:09:23.773 --> 00:09:29.230\nAnd then those ultimately are paid forward\nfor you to be able to access a resource.\n\n170\n00:09:29.230 --> 00:09:32.733\nAnd then when you're done with that\naccess, that ticket is destroyed and\n\n171\n00:09:32.733 --> 00:09:35.839\nyou generate new ones throughout\nthe course of your live action or\n\n172\n00:09:35.839 --> 00:09:39.190\nthrough the course of you interaction,\nyour session, as you log on.\n\n173\n00:09:40.340 --> 00:09:43.650\nSo, when we think about all this, we're\nmapping these attributes and then we're\n\n174\n00:09:43.650 --> 00:09:47.390\nputting them into these tickets to that\nthey become part of the Kerberos process.\n\n175\n00:09:47.390 --> 00:09:50.040\nWe need to have at least one\nserver 12 domain controller,\n\n176\n00:09:50.040 --> 00:09:51.796\nI wanna make sure we're aware of that.\n\n177\n00:09:51.796 --> 00:09:55.856\nNot that we can't have a mixed enviroment\nwith different domain controller levels\n\n178\n00:09:55.856 --> 00:09:58.646\nbut we must be running at\nleast one server 12 or better.\n\n179\n00:09:58.646 --> 00:10:02.782\n12, 12R2, perhaps even server 16 at\nthis point to be able to map that and\n\n180\n00:10:02.782 --> 00:10:04.649\nhave that information available.\n\n181\n00:10:04.649 --> 00:10:08.580\nBecause remember DAC is\na server 12 forward feature.\n\n182\n00:10:08.580 --> 00:10:10.490\nSo if you're running 2008 or\nsomething prior,\n\n183\n00:10:10.490 --> 00:10:13.650\nwe're not gonna be able to leverage\nthat so just keep that in mind.\n\n184\n00:10:13.650 --> 00:10:18.210\nAnd then all client computer\nhave to be running a client\n\n185\n00:10:18.210 --> 00:10:22.180\naware OS that is capable\nof using DAC as well.\n\n186\n00:10:22.180 --> 00:10:25.350\nBecause this is a newer feature\nset starting with server 12,\n\n187\n00:10:25.350 --> 00:10:28.880\nminimum requirements on the client side,\nWindows 8,\n\n188\n00:10:28.880 --> 00:10:33.660\nWindows 8.1, Windows 10 going forward\nall the newer operating systems.\n\n189\n00:10:33.660 --> 00:10:35.670\nJust wanna make sure you're aware of that.\n\n190\n00:10:35.670 --> 00:10:40.990\nAnd as we said, got to make sure that\nall that stuff's kind of there and\n\n191\n00:10:40.990 --> 00:10:45.250\nrunning behind the scenes before we\nactually go in and we set DAC up.\n\n192\n00:10:45.250 --> 00:10:46.300\nSo these are all the prereqs.\n\n193\n00:10:46.300 --> 00:10:48.230\nJust want to make sure\nwe're aware of that.\n\n194\n00:10:48.230 --> 00:10:51.338\nWe're essentially extending\nthe active directory domain service,\n\n195\n00:10:51.338 --> 00:10:54.562\nwe're extending the schema and\nadding some capabilities in to use DAC.\n\n196\n00:10:54.562 --> 00:10:57.939\nAnd so we want to make sure that all\nof these extensions that we're using\n\n197\n00:10:57.939 --> 00:11:00.828\nare supported by the clients\nthat have to read them.\n\n198\n00:11:00.828 --> 00:11:02.470\nOlder clients won't understand these, and\n\n199\n00:11:02.470 --> 00:11:04.790\nas a result, they're not gonna\nbe able to benefit from them.\n\n200\n00:11:04.790 --> 00:11:06.330\nSo just be aware of that.\n\n201\n00:11:06.330 --> 00:11:10.090\nDAC is gonna be able to use these claims,\npair them, excuse me,\n\n202\n00:11:10.090 --> 00:11:14.990\nwith Kerberos, and then extend them out so\nthen we can actually interact with them.\n\n203\n00:11:14.990 --> 00:11:16.500\nLet's take a look at how we set DAC up.\n\n204\n00:11:16.500 --> 00:11:18.400\nIf you don't mind just jump\ninto my screen here real quick.\n\n205\n00:11:18.400 --> 00:11:19.380\nIf we can go full screen.\n\n206\n00:11:19.380 --> 00:11:21.910\nJust have a quick six step process for\nyou.\n\n207\n00:11:21.910 --> 00:11:24.150\nHigh level to understand\nwhat we need to do.\n\n208\n00:11:24.150 --> 00:11:27.380\nMost important element is we\nhave to set up the group policy.\n\n209\n00:11:27.380 --> 00:11:30.770\nThe default domain controllers\ngroup policy has to be enabled and\n\n210\n00:11:30.770 --> 00:11:31.900\nedited to support claims.\n\n211\n00:11:31.900 --> 00:11:34.300\nSo we're just gonna go through and\nmake that change.\n\n212\n00:11:34.300 --> 00:11:37.550\nYou can see here what we're gonna do and\nhow we're gonna do.\n\n213\n00:11:37.550 --> 00:11:38.760\nIt's pretty straight forward.\n\n214\n00:11:38.760 --> 00:11:40.860\nWe go in, we edit this policy.\n\n215\n00:11:40.860 --> 00:11:43.698\nSo the administrator template that\nwe edit is gonna be the Computer\n\n216\n00:11:43.698 --> 00:11:47.540\nConfiguration\\Policies\\Administrative\nTemplates\\\n\n217\n00:11:47.540 --> 00:11:52.250\nSystem\\KDC\\Support Dynamic Access Control\nand Kerberos armoring subset.\n\n218\n00:11:52.250 --> 00:11:55.590\nWe support that or\nclick to support that by enabling it.\n\n219\n00:11:55.590 --> 00:11:56.840\nWe then go to ADAC.\n\n220\n00:11:56.840 --> 00:12:00.800\nNow I said ADAC here Active Directory\nAdministrative Center, just because ADAC\n\n221\n00:12:00.800 --> 00:12:02.860\nis fun to say, say it with me,\n&gt;&gt; ADAC.\n\n222\n00:12:02.860 --> 00:12:05.361\n&gt;&gt; You see it's fun,\nput a smile on your face right?\n\n223\n00:12:05.361 --> 00:12:08.630\nSo ADAC is a tool that sometimes\npeople are not familiar with.\n\n224\n00:12:08.630 --> 00:12:10.544\nI think at one point you might\nhave had this conversation-\n\n225\n00:12:10.544 --> 00:12:11.336\n&gt;&gt; Sort of like an a-whack?\n\n226\n00:12:11.336 --> 00:12:12.572\n[LAUGH]\n&gt;&gt; It's kind of like that,\n\n227\n00:12:12.572 --> 00:12:15.970\nexcept the radar dome on top doesn't spin\nclockwise, it spins counter clockwise.\n\n228\n00:12:15.970 --> 00:12:18.960\nBut only every other Tuesday,\notherwise it just stays stationary.\n\n229\n00:12:18.960 --> 00:12:22.100\nSo ADAC is a tool that- as I\ntalk to customers about it,\n\n230\n00:12:22.100 --> 00:12:23.990\ntalk to students about it, I mention it.\n\n231\n00:12:23.990 --> 00:12:26.071\nA lot of them are like wow\nwe never knew that existed.\n\n232\n00:12:26.071 --> 00:12:29.734\nWe've been using active directory user and\ncomputers forever and a day, and\n\n233\n00:12:29.734 --> 00:12:33.468\nthen we go into domains and trusts and we\ngo to services when we need to do stuff.\n\n234\n00:12:33.468 --> 00:12:37.530\nWe use all the individual tools that we've\nbeen trained to use for 15 years or so,\n\n235\n00:12:37.530 --> 00:12:40.388\nhowever long it's been since\nthose tools first came out.\n\n236\n00:12:40.388 --> 00:12:43.987\nRound about, I don't know,\nfive years ago or\n\n237\n00:12:43.987 --> 00:12:48.353\nso, probably around 2008 R2,\nADAC comes on the scene.\n\n238\n00:12:48.353 --> 00:12:51.851\nYou actually could have used an earlier\nversion of this going all the way back to\n\n239\n00:12:51.851 --> 00:12:53.660\n2003 as part of the support tools.\n\n240\n00:12:53.660 --> 00:12:54.596\nYou remember the resource kits and\n\n241\n00:12:54.596 --> 00:12:56.331\nthe support tools you used to\nhave to download years ago?\n\n242\n00:12:56.331 --> 00:12:56.872\n&gt;&gt; Yeah.\n\n243\n00:12:56.872 --> 00:12:59.007\n&gt;&gt; They kinda did away with all that,\nit's all just built in now.\n\n244\n00:12:59.007 --> 00:13:02.711\nThat used to be cool because you'd get all\nthese like extra special tools that nobody\n\n245\n00:13:02.711 --> 00:13:04.964\nknew about and\nyou were the cool admin of the block.\n\n246\n00:13:04.964 --> 00:13:05.998\n&gt;&gt; Only for the real admins.\n\n247\n00:13:05.998 --> 00:13:07.298\n&gt;&gt; Right, only for the real admins, right.\n\n248\n00:13:07.298 --> 00:13:10.460\nSo you were the cool admin on the block\ncuz you knew you had all those tools,\n\n249\n00:13:10.460 --> 00:13:13.980\nright, and everybody else was like wow,\nI wish I was like him, right?\n\n250\n00:13:13.980 --> 00:13:16.480\nBut they never could be, cuz they didn't\nknow where to download the tools.\n\n251\n00:13:16.480 --> 00:13:18.020\nThis is our random aside, by the way.\n\n252\n00:13:18.020 --> 00:13:20.060\n&gt;&gt; Now you get to write it\nall in PowerShell, right.\n\n253\n00:13:20.060 --> 00:13:21.490\n&gt;&gt; You can not only\nwrite it in PowerShell,\n\n254\n00:13:21.490 --> 00:13:25.110\nbut essentially all these tools typically\nare just provided and built in, right?\n\n255\n00:13:25.110 --> 00:13:28.960\nSo ADAC is one of those tools that kinda\ngrew out of a concept that was initially\n\n256\n00:13:28.960 --> 00:13:32.920\njust an extra support that's become\na standardized tool that is installed and\n\n257\n00:13:32.920 --> 00:13:35.180\nset up in your domain controllers.\n\n258\n00:13:35.180 --> 00:13:37.628\nBut a lot of people just blow right\npast because they don't know what it is.\n\n259\n00:13:37.628 --> 00:13:40.870\nSo I mention ADAC here,\nnot because you must use ADAC,\n\n260\n00:13:40.870 --> 00:13:43.770\nalthough it would be the preferred\nway to do this, it's the easiest way.\n\n261\n00:13:43.770 --> 00:13:45.800\nSo just make sure you know what ADAC is.\n\n262\n00:13:45.800 --> 00:13:50.130\nIt's just a tool that combines users and\ncomputers, domains and trust, services,\n\n263\n00:13:50.130 --> 00:13:54.980\nall the traditional separate AD admin\ntools into one common tool set.\n\n264\n00:13:54.980 --> 00:13:59.780\nSo to go into ADAC, we go in,\nwe browse for and set up or\n\n265\n00:13:59.780 --> 00:14:01.700\nfind Dynamic Access Control.\n\n266\n00:14:01.700 --> 00:14:05.350\nIt's pretty straight forward,\nit'll be in the menu.\n\n267\n00:14:05.350 --> 00:14:07.000\nYou'll then select claims types.\n\n268\n00:14:07.000 --> 00:14:08.340\nYou'll then go ahead create a claims type.\n\n269\n00:14:08.340 --> 00:14:10.130\nSo you'll select, in other words,\nyou'll highlight it.\n\n270\n00:14:10.130 --> 00:14:12.220\nYou'll then have the option\nto create a new claim.\n\n271\n00:14:12.220 --> 00:14:13.920\nYou'll see under claim type, click new.\n\n272\n00:14:13.920 --> 00:14:17.635\nCouldn't have been more prescriptive and\nspecific about that if I tried.\n\n273\n00:14:17.635 --> 00:14:18.550\nCould we go back to full screen,\n\n274\n00:14:18.550 --> 00:14:20.980\ncuz you're hiding half of what\nwe're talking about there.\n\n275\n00:14:20.980 --> 00:14:23.580\nAnd unfortunately I can't scroll\ndown any further in the document,\n\n276\n00:14:23.580 --> 00:14:25.120\ncuz this is all it says.\n\n277\n00:14:25.120 --> 00:14:28.200\nStep 4, on your File Server you're\nthen gonna go make sure you have\n\n278\n00:14:28.200 --> 00:14:29.120\nthe roles installed.\n\n279\n00:14:29.120 --> 00:14:33.340\nI talked about the File Server\nResource Manager Role, the FSRM role.\n\n280\n00:14:33.340 --> 00:14:36.512\nObviously you'd have to have File Server\nas a role set up as well, role and\n\n281\n00:14:36.512 --> 00:14:37.030\na feature.\n\n282\n00:14:37.030 --> 00:14:39.170\nSo you wanna make sure\nyou have that set up.\n\n283\n00:14:39.170 --> 00:14:43.180\nSo we've got all that, that's gonna be\non another machine wherever we're gonna\n\n284\n00:14:43.180 --> 00:14:46.930\ntarget the ADAC-capable data that's\ngonna be provided and managed.\n\n285\n00:14:46.930 --> 00:14:49.050\nWe'll create a folder and/or share.\n\n286\n00:14:49.050 --> 00:14:51.130\nWe'll set the folder up,\nwe'll share it out.\n\n287\n00:14:51.130 --> 00:14:54.680\nWe'll then go ahead and on\nthe permissions area on the file server,\n\n288\n00:14:54.680 --> 00:14:59.190\nunder advance security settings, we'll go\nfind \"Add a condition to limit access\",\n\n289\n00:14:59.190 --> 00:15:01.748\nit's at the bottom of the page\nwhen you look at this.\n\n290\n00:15:01.748 --> 00:15:06.080\nAnd then you'll validate the attribute or\nattributes that you wanna use, making sure\n\n291\n00:15:06.080 --> 00:15:09.850\nthat as you program them into little\npull down menus that they show up and\n\n292\n00:15:09.850 --> 00:15:11.280\nthey're actually validated.\n\n293\n00:15:11.280 --> 00:15:13.270\nIf you choose an attribute\nthat's incorrect or\n\n294\n00:15:13.270 --> 00:15:14.660\nsomething, you'll get an error, right.\n\n295\n00:15:14.660 --> 00:15:16.060\nIt'll tell you, hey it's not working.\n\n296\n00:15:16.060 --> 00:15:19.780\nAnd you'll be able to go in and\nyou'll be able to set this up.\n\n297\n00:15:19.780 --> 00:15:23.375\nAnd then, and it's literally like a little\npanel, like little rectangular panel\n\n298\n00:15:23.375 --> 00:15:26.465\ndown at the bottom of the screen,\njust see it's an add-in that you can use.\n\n299\n00:15:26.465 --> 00:15:31.065\nAnd then you're able to set this up and\noff you go, so to speak to the races.\n\n300\n00:15:31.065 --> 00:15:35.047\nWhat are some traditional scenarios that\nwe may use Dynamic Access Control for?\n\n301\n00:15:35.047 --> 00:15:39.465\nGot a great little website, little bog\nentry that kinda gives you the overview\n\n302\n00:15:39.465 --> 00:15:44.160\nand the case study, your business use case\nscenarios on DAC, that's pretty helpful.\n\n303\n00:15:44.160 --> 00:15:47.981\nSo if you go down and you take a look\nhere, aside from just the overview,\n\n304\n00:15:47.981 --> 00:15:52.264\njust the basic concepts of what DAC is,\ntalks about the general idea behind it.\n\n305\n00:15:52.264 --> 00:15:57.261\nBut the reason I like this is it's got\nsome nice little scenarios, hey if we want\n\n306\n00:15:57.261 --> 00:16:01.225\ncentralized access policies,\nwhat do we do and how do we do it?\n\n307\n00:16:01.225 --> 00:16:04.484\nWalks us through the individual\nsteps that I've kinda laid out for\n\n308\n00:16:04.484 --> 00:16:06.414\nyou on all the different options here.\n\n309\n00:16:06.414 --> 00:16:12.066\nAnd gives you the setup scenario,\ntells you what to do, deploying claims,\n\n310\n00:16:12.066 --> 00:16:16.322\nclaims across forests rather,\ntells you how to do this.\n\n311\n00:16:16.322 --> 00:16:19.661\nIf you're looking at file access auditing\nbecause this is a governance and\n\n312\n00:16:19.661 --> 00:16:21.040\na compliance tool primarily.\n\n313\n00:16:21.040 --> 00:16:25.950\nSo it lets us oversee and\nspecify tailored and really scoped and\n\n314\n00:16:25.950 --> 00:16:30.410\nfiltered unique access controls that\nwe can apply, specifically, to meet\n\n315\n00:16:30.410 --> 00:16:35.040\ncertain requirements, either statutory,\nregulatory, or driven by whatever.\n\n316\n00:16:35.040 --> 00:16:36.080\nBut we can also verify and\n\n317\n00:16:36.080 --> 00:16:38.600\nvalidate them because we have\nauditing capabilities built in.\n\n318\n00:16:38.600 --> 00:16:41.700\nSo it just walks us through\nthe different logical elements here and\n\n319\n00:16:41.700 --> 00:16:43.140\nshows you what we're doing.\n\n320\n00:16:43.140 --> 00:16:48.360\nAccess denied assistance, another\nfeature that's new in 12, 12 R2, and 16.\n\n321\n00:16:48.360 --> 00:16:52.490\nWe can program in custom messages when\nsomebody goes and tries to access data.\n\n322\n00:16:52.490 --> 00:16:56.100\nEspecially if we're using DAC, we pair\nthis with DAC, and we say, hey, sorry,\n\n323\n00:16:56.100 --> 00:16:57.020\nyou're not allowed in.\n\n324\n00:16:57.020 --> 00:17:00.320\nBut we can embed a link in the error code\nthat comes back with a page that says\n\n325\n00:17:00.320 --> 00:17:03.550\nyou're not allowed in, but here's what\nyou do to request access or whatever.\n\n326\n00:17:03.550 --> 00:17:05.268\nSo we can go in and we can do that.\n\n327\n00:17:05.268 --> 00:17:08.250\nSo it just walks us through\nall the different logic here.\n\n328\n00:17:08.250 --> 00:17:12.180\nWe can do classification on\nencrypted Office documents.\n\n329\n00:17:12.180 --> 00:17:14.700\nSo we can actually use\nthe classification scheme and\n\n330\n00:17:14.700 --> 00:17:18.774\na taxonomy to be able to apply claims to\nencrypted documents further securing them.\n\n331\n00:17:18.774 --> 00:17:21.860\nSo there's a lot of value, a lot of\ncapabilities associated with this.\n\n332\n00:17:21.860 --> 00:17:25.490\nSo all these different scenarios\nare laid out here would be something for\n\n333\n00:17:25.490 --> 00:17:28.170\nyou to take a look at and\nprobably drill down on.\n\n334\n00:17:28.170 --> 00:17:29.850\nIf you go through and\n\n335\n00:17:29.850 --> 00:17:34.890\njust do the scenario overview here,\nDeploying Claims Across Forests.\n\n336\n00:17:34.890 --> 00:17:37.160\nJust click through the link\non one just to show you.\n\n337\n00:17:37.160 --> 00:17:41.790\nYou see you get additional drill\ndowns on every one of these.\n\n338\n00:17:41.790 --> 00:17:45.670\nAnd the links just kind of talk you\nthrough the logic of what this is.\n\n339\n00:17:45.670 --> 00:17:48.850\nTalks about the roles and\nfeatures that are involved, typically,\n\n340\n00:17:48.850 --> 00:17:51.910\nit's just the ADDS and the File and\nStorage services role.\n\n341\n00:17:51.910 --> 00:17:53.540\nAnd just gives you some\nbackground on this.\n\n342\n00:17:53.540 --> 00:17:56.850\nSo it gives you a nice way to bring\nall the information together and\n\n343\n00:17:56.850 --> 00:18:00.390\nto coordinate all of it so you have\na better idea of how DAC can be applied.\n\n344\n00:18:00.390 --> 00:18:04.160\nSo I just wanted to give you\na little overview on the technology.\n\n345\n00:18:04.160 --> 00:18:06.740\nIt's one of those hidden gems\nsitting in Windows, that again,\n\n346\n00:18:06.740 --> 00:18:08.180\na lot of people don't realize.\n\n347\n00:18:08.180 --> 00:18:10.030\nIs there a lot of people don't know about,\n\n348\n00:18:10.030 --> 00:18:13.050\nunless you're heavily involved in\ngovernance and compliance work.\n\n349\n00:18:13.050 --> 00:18:17.660\nUnless you're involved in having to\naudit data and verify access control.\n\n350\n00:18:17.660 --> 00:18:20.880\nAs a result of that,\nyou may not have come across this feature.\n\n351\n00:18:20.880 --> 00:18:22.910\nMaybe something that's just\nkind of sitting there, but\n\n352\n00:18:22.910 --> 00:18:24.840\nyou may not realize is there.\n\n353\n00:18:24.840 --> 00:18:28.840\nIf you're using SharePoint, you may see\nthis with SharePoint documents submitted\n\n354\n00:18:28.840 --> 00:18:34.020\nto libraries because we can use claims and\nactually use this technology there\n\n355\n00:18:34.020 --> 00:18:38.570\nto be able to add properties or\nclaims and map them as attributes.\n\n356\n00:18:38.570 --> 00:18:42.490\nSo when you submit a document, you have to\nmeet this criterion in order to publish.\n\n357\n00:18:42.490 --> 00:18:46.325\nSo there's different ways we can link\nthis together especially as we go forward\n\n358\n00:18:46.325 --> 00:18:49.702\ninto some of the newer versions of\nthese products out of the 12 series\n\n359\n00:18:49.702 --> 00:18:51.650\ninto 16 series and beyond.\n\n360\n00:18:51.650 --> 00:18:53.990\nWe see the integration of\na lot of these features.\n\n361\n00:18:53.990 --> 00:18:57.920\nAnd again, also don't overlook the ideas\nbehind the ADAC and the use of that tool.\n\n362\n00:18:57.920 --> 00:18:59.101\nIf you haven't seen it before,\n\n363\n00:18:59.101 --> 00:19:01.038\nit's definitely a tool that\nmay be worth your time.\n\n364\n00:19:01.038 --> 00:19:04.670\nAnd you may wanna go explore a little\nbit just to get a better sense of.\n\n365\n00:19:04.670 --> 00:19:07.336\nMay even show up on an exam here and\nthere, you never know.\n\n366\n00:19:07.336 --> 00:19:09.063\n&gt;&gt; You never know.\n&gt;&gt; So maybe one of those tools that if you\n\n367\n00:19:09.063 --> 00:19:11.833\njust have a working knowledge of and\nyou're familiar with.\n\n368\n00:19:11.833 --> 00:19:15.745\nYou see some questions on, you may be\nthe better for it, let's put it that way.\n\n369\n00:19:15.745 --> 00:19:18.425\n&gt;&gt; Sure, it never hurts to get\nextra questions right on your exam.\n\n370\n00:19:18.425 --> 00:19:20.445\nThat's just my philosophy on life.\n\n371\n00:19:20.445 --> 00:19:24.855\nSo we do thank Adam for\nexposing this hidden little gem,\n\n372\n00:19:24.855 --> 00:19:28.575\nbecause it is nice to be able\nto extend your capabilities,\n\n373\n00:19:28.575 --> 00:19:33.825\nas far as control and have a more\nfine tuned control over things.\n\n374\n00:19:33.825 --> 00:19:35.135\nAnd this does afford us to do that.\n\n375\n00:19:35.135 --> 00:19:39.990\nSo you can take that little extra\nstep on securing your environment.\n\n376\n00:19:39.990 --> 00:19:40.819\nThat's always a helpful thing.\n\n377\n00:19:40.819 --> 00:19:42.804\nAdam, thank you dropping by today and\n\n378\n00:19:42.804 --> 00:19:45.418\nshowing us how we use\nthe dynamic access control.\n\n379\n00:19:45.418 --> 00:19:45.998\n&gt;&gt; Of course.\n\n380\n00:19:45.998 --> 00:19:48.343\n&gt;&gt; Very cool stuff,\nwe do thank you good people for watching.\n\n381\n00:19:48.343 --> 00:19:51.687\nBut it looks like we've come to\nthat end time for us to sign off.\n\n382\n00:19:51.687 --> 00:19:54.252\nFor ITProTV,\nI've been your host Daniel Lowrie.\n\n383\n00:19:54.252 --> 00:19:55.367\n&gt;&gt; I'm Adam Gordon.\n\n384\n00:19:55.367 --> 00:19:56.458\n&gt;&gt; And we'll see you next time.\n\n385\n00:19:56.458 --> 00:19:58.200\n&gt;&gt; Take care everybody.\n\n386\n00:19:58.200 --> 00:20:04.632\n[MUSIC]\n\n387\n00:20:04.632 --> 00:20:07.604\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213222592"
        },
        {
          "description": "In this episode, Daniel and Adam overview the concepts and components for implementing Rights Management. Here they discuss the AD-RMS workflow steps and major AD-RMS components, specifically Clusters, Root-certification servers, and Licensing servers.",
          "length": "1788",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-implementing_rights_management-041317-PGM.00_00_11_27.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-implementing_rights_management-041317-PGM.00_00_11_27.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-implementing_rights_management-041317-PGM.00_00_11_27.Still001-sm.jpg",
          "title": "Implementing Rights Management",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:06.292\nWelcome to ITProTV,\nI'm your host [CROSSTALK]\n\n2\n00:00:06.292 --> 00:00:08.067\n[MUSIC]\n\n3\n00:00:08.067 --> 00:00:12.275\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.275 --> 00:00:12.908\n&gt;&gt; All right,\n\n5\n00:00:12.908 --> 00:00:16.653\ngreetings everyone and welcome to\nanother great episode of ITProTV.\n\n6\n00:00:16.653 --> 00:00:21.304\nI'm your host Daniel Lowrie, and in\ntoday's episode we are coming back at you\n\n7\n00:00:21.304 --> 00:00:25.185\nwith more of our MCSE track,\nthe 70-414, specifically.\n\n8\n00:00:25.185 --> 00:00:28.640\nAnd joining us back in the studio yet\nagain, our good friend, Mr. Adam Gordon.\n\n9\n00:00:28.640 --> 00:00:30.420\nAdam, welcome back sir,\nglad to have you again.\n\n10\n00:00:30.420 --> 00:00:34.271\n&gt;&gt; Hello, welcome to you and all of\nyou listening to us and looking at us,\n\n11\n00:00:34.271 --> 00:00:37.795\nboth with us now, and of course,\nas you're watching this now,\n\n12\n00:00:37.795 --> 00:00:40.760\nbeing whenever you are able\nto watch this recording.\n\n13\n00:00:40.760 --> 00:00:44.709\nBut we're gonna talk about AD RMS,\nanother very important and\n\n14\n00:00:44.709 --> 00:00:49.701\nvery extensible aspect of what we do with\nmanaging access, managing rights and\n\n15\n00:00:49.701 --> 00:00:55.010\nlevels of control and permissions\nassociated with Windows Server 12, 12 R2.\n\n16\n00:00:55.010 --> 00:00:59.730\nThe RMS, the Rights Management Server\nrole allows us to bring the concept of\n\n17\n00:00:59.730 --> 00:01:04.755\nInformation Rights Management IRM into\nthe enterprise, allowing us to sync.\n\n18\n00:01:04.755 --> 00:01:09.289\nOr not sync, I should say probably link\nis a better way of thinking of it.\n\n19\n00:01:09.289 --> 00:01:13.369\nLink the ideas of sticky attributes or\npermissions to data and\n\n20\n00:01:13.369 --> 00:01:18.319\nhave those attributes and permission\nstay with the data wherever it goes.\n\n21\n00:01:18.319 --> 00:01:22.738\nGiving us, as administrators, the ability\nto understand how to ensure beyond any\n\n22\n00:01:22.738 --> 00:01:27.218\nreasonable doubt, the data will always be\nprotected when it's used in the domain,\n\n23\n00:01:27.218 --> 00:01:30.204\nwhen it's under our care and\ndirection specifically.\n\n24\n00:01:30.204 --> 00:01:34.922\nWhen it is in mobile platforms removed\nfrom the domain, offline in other words.\n\n25\n00:01:34.922 --> 00:01:39.418\nThose attributes are the same, and\nwe are protecting the data by applying\n\n26\n00:01:39.418 --> 00:01:44.134\ncontrols and specific access instructions\nthrough polices and rules to data\n\n27\n00:01:44.134 --> 00:01:49.139\nthat will only allow you to, for instance,\nhypothetically open up a document and\n\n28\n00:01:49.139 --> 00:01:53.520\nbe able to read it on the scree, but\nnot have access to a print function.\n\n29\n00:01:53.520 --> 00:01:57.600\nThat'll be one of the things that AD RMS\nor Information Rights Management does.\n\n30\n00:01:57.600 --> 00:02:01.410\nYou may be able to open the data or\nopen the document up and read it,\n\n31\n00:02:01.410 --> 00:02:02.150\nbut not edit it.\n\n32\n00:02:02.150 --> 00:02:03.460\nYou may not be able to make changes to it.\n\n33\n00:02:03.460 --> 00:02:05.890\nIt's essentially read-only,\nif you think about it.\n\n34\n00:02:05.890 --> 00:02:09.090\nYou may have seen documents,\nwe've probably, Daniel,\n\n35\n00:02:09.090 --> 00:02:10.120\nI'm sure you've seen them.\n\n36\n00:02:10.120 --> 00:02:15.470\nWe've all probably seen documents like\nthis where you open it up and it may have\n\n37\n00:02:15.470 --> 00:02:19.990\na watermark, a digital watermark across\nfor certain kind of use only, whatever.\n\n38\n00:02:19.990 --> 00:02:24.117\nAnd then when you go to do certain things,\ngrayed out options or\n\n39\n00:02:24.117 --> 00:02:27.970\nmenus are constrained or restricted\nin some way because you're not able.\n\n40\n00:02:27.970 --> 00:02:29.866\nAnd this is the kind of technology and\n\n41\n00:02:29.866 --> 00:02:32.569\nthe kind of thought process\nthat AD RMS provides us.\n\n42\n00:02:32.569 --> 00:02:38.362\nSo it is a very valuable additional tool\nin our arsenal with regards to security.\n\n43\n00:02:38.362 --> 00:02:42.484\nBecause it allows us to safeguard data,\nand not have to worry about whether users\n\n44\n00:02:42.484 --> 00:02:46.364\ncan take the data outside of the\nperimeter, or the protection boundary that\n\n45\n00:02:46.364 --> 00:02:49.655\nwe establish for\nthe management of that data in the domain.\n\n46\n00:02:49.655 --> 00:02:53.135\nBut rather allows us to remove that data,\nor work with it anywhere.\n\n47\n00:02:53.135 --> 00:02:56.785\nOnline, offline, inside the domain,\noutside the domain.\n\n48\n00:02:56.785 --> 00:03:00.845\nOn a corporate owned asset, on a totally\nstrange machine we've never seen or\n\n49\n00:03:00.845 --> 00:03:02.365\nhad any knowledge of before.\n\n50\n00:03:02.365 --> 00:03:04.700\nAnd the attributes stick with the data.\n\n51\n00:03:04.700 --> 00:03:08.370\nThe other thing that this\ndoes which was problematic,\n\n52\n00:03:08.370 --> 00:03:12.550\nis still problematic,\nwith technology like EFS, remember EFS?\n\n53\n00:03:12.550 --> 00:03:14.260\nGood old encrypting file system.\n\n54\n00:03:14.260 --> 00:03:18.889\nSo the EFS concept where we\nwould encrypt data in an NTFS\n\n55\n00:03:18.889 --> 00:03:23.370\npartition nn a machine,\nirrespective of domain joined or not.\n\n56\n00:03:23.370 --> 00:03:27.070\nThis was a file system function,\nnothing to do with domain directly,\n\n57\n00:03:27.070 --> 00:03:28.980\nanyway nothing to do with domain access.\n\n58\n00:03:28.980 --> 00:03:33.760\nBut the idea was that if we did that,\nthose attributes were fine and\n\n59\n00:03:33.760 --> 00:03:37.990\nstayed with the data, as long as\nthe data stayed on an NTFS partition.\n\n60\n00:03:37.990 --> 00:03:40.270\nProblem was you moved it\nto a FAT partition and\n\n61\n00:03:40.270 --> 00:03:43.090\nyou lost those attributes cuz\nthey were file system based.\n\n62\n00:03:43.090 --> 00:03:46.710\nAnd so essentially we could\nstrip protections out of data\n\n63\n00:03:46.710 --> 00:03:50.960\nusing that particular thought process and\nunencrypt and\n\n64\n00:03:50.960 --> 00:03:54.970\nremove the protection that EFS provided,\nif we knew about that and\n\n65\n00:03:54.970 --> 00:03:57.570\nwe're smart enough to be able\nto figure out how to do that.\n\n66\n00:03:57.570 --> 00:03:59.940\nSo now you have the technology\nlike BitLocker,\n\n67\n00:03:59.940 --> 00:04:03.980\nwhich essentially provides whole drive or\nwhole instance encryption, and\n\n68\n00:04:03.980 --> 00:04:06.298\nis a sticky attribute\nthat stays with the data.\n\n69\n00:04:06.298 --> 00:04:09.915\nSo you remove the data from\nthe BitLocker encrypted device, and\n\n70\n00:04:09.915 --> 00:04:11.485\nyou're still not able to access the data.\n\n71\n00:04:11.485 --> 00:04:14.475\nSo the idea of RMS is like that.\n\n72\n00:04:14.475 --> 00:04:18.265\nIt's gonna stay with this data, no matter\nwhere we go, no matter what we do with it.\n\n73\n00:04:18.265 --> 00:04:21.417\nSo in that respect,\nit provides a lot of capabilities.\n\n74\n00:04:21.417 --> 00:04:25.415\nAnd a lot of control for the system\nadministrator of the IT professional,\n\n75\n00:04:25.415 --> 00:04:28.297\nthe security administrator,\nwhatever we may call ourselves, right?\n\n76\n00:04:28.297 --> 00:04:29.820\nThe master or mistress of all.\n\n77\n00:04:29.820 --> 00:04:32.507\n&gt;&gt; [LAUGH]\n&gt;&gt; That's another good title that IT\n\n78\n00:04:32.507 --> 00:04:34.637\nadmins and\nprofessionals may wanna think about.\n\n79\n00:04:34.637 --> 00:04:39.230\nThe author of the content, what we call\na creator owner, is the one, the entity,\n\n80\n00:04:39.230 --> 00:04:44.460\nthe person that is going to be thinking\nabout how data should be protected.\n\n81\n00:04:44.460 --> 00:04:47.860\nAnd so when the author protects content\ninitially, when they set this up and\n\n82\n00:04:47.860 --> 00:04:51.670\nthey make these decisions,\nwe have what's called the AD RMS cluster.\n\n83\n00:04:51.670 --> 00:04:54.620\nThis is the grouping of servers\nthat provide these services.\n\n84\n00:04:54.620 --> 00:04:58.830\nWe'll delve into the architecture and the\ncomponents here in a couple of minutes.\n\n85\n00:04:58.830 --> 00:05:03.880\nBut the AD RMS cluster issues\nwhat's known as a RAC,\n\n86\n00:05:03.880 --> 00:05:08.110\nan R-A-C, a Rights Account Certificate or\nRights Access Certificate.\n\n87\n00:05:08.110 --> 00:05:10.250\nBut it's commonly called\na Rights Account Certificate.\n\n88\n00:05:10.250 --> 00:05:14.520\nThis Certificate is issued by\nthe server infrastructure and\n\n89\n00:05:14.520 --> 00:05:20.290\nadds the client that is gonna be using,\nor any client that uses this data,\n\n90\n00:05:20.290 --> 00:05:25.020\ngives them the blanket permission and\nrights that are associated with the data.\n\n91\n00:05:25.020 --> 00:05:29.030\nAnd allows them to be able to open the\ndata and interact with it at some level.\n\n92\n00:05:29.030 --> 00:05:31.490\nSo this is a certificate-based mode.\n\n93\n00:05:31.490 --> 00:05:34.890\nWe're using digital certificates\nto validate permissions,\n\n94\n00:05:34.890 --> 00:05:36.750\napplied policies, things like that.\n\n95\n00:05:36.750 --> 00:05:39.952\nAnd to allow us to have access to,\nan authenticated and\n\n96\n00:05:39.952 --> 00:05:42.560\nauthorized access to data\nunder certain conditions.\n\n97\n00:05:42.560 --> 00:05:45.360\nSo we issue a RAC,\na Rights Account Certificate, and\n\n98\n00:05:45.360 --> 00:05:48.820\nalso what's called\na Client Licensor Certificate.\n\n99\n00:05:48.820 --> 00:05:53.497\nThe licensor certificate establishes\nthe author's AD RMS credentials and\n\n100\n00:05:53.497 --> 00:05:57.733\nallows the licenses to be granted to\nindividual users as they come and\n\n101\n00:05:57.733 --> 00:05:59.718\nthey start accessing the data.\n\n102\n00:05:59.718 --> 00:06:03.787\nThey download and get a series of\ncertificates, they grant them rights, and\n\n103\n00:06:03.787 --> 00:06:06.369\nthose certificates are then\nstaying with them.\n\n104\n00:06:06.369 --> 00:06:09.714\nWhich is how we then validate the fact\nthey can access the data whenever they go\n\n105\n00:06:09.714 --> 00:06:13.164\nto access it over numerous attempts,\nover many, many days, weeks, months,\n\n106\n00:06:13.164 --> 00:06:14.867\nyears, whatever it may be.\n\n107\n00:06:14.867 --> 00:06:18.917\nAnd so, then as a result, the author,\nthe person who creates this data,\n\n108\n00:06:18.917 --> 00:06:23.277\ncan publish information that AD RMS\nuses to ultimately secure the data.\n\n109\n00:06:23.277 --> 00:06:28.847\nSo we have certificate-based\ninfrastructure associated with our AD RMS,\n\n110\n00:06:28.847 --> 00:06:29.487\nright.\n\n111\n00:06:30.570 --> 00:06:31.793\nGotta be careful when you say that.\n&gt;&gt; [LAUGH]\n\n112\n00:06:31.793 --> 00:06:33.539\n&gt;&gt; We have certificate infrastructure\n\n113\n00:06:33.539 --> 00:06:36.305\nassociated with the use of\nthe RIghts management system.\n\n114\n00:06:36.305 --> 00:06:39.240\nSo we've gotta be aware of that and\nand have to think about that.\n\n115\n00:06:39.240 --> 00:06:42.920\nLet's take a look, if you could\njoin me here for just a moment.\n\n116\n00:06:42.920 --> 00:06:47.360\nLet's take a look at what the outline\nof the AD RMS workflow looks like, or\n\n117\n00:06:47.360 --> 00:06:49.990\nin other words what are the steps\ninvolved at a high-level of\n\n118\n00:06:49.990 --> 00:06:51.950\nwalking through the process\nI just described.\n\n119\n00:06:51.950 --> 00:06:54.430\nCould we go to full screen cause\nwe're gonna miss a part of this,\n\n120\n00:06:54.430 --> 00:06:55.665\nthank you so much.\n\n121\n00:06:55.665 --> 00:06:58.990\nSo step 1, got a total of eight\nsteps here we've outlined.\n\n122\n00:06:58.990 --> 00:07:01.860\nWe'll go through them quickly with you\njust to make sure you're comfortable\n\n123\n00:07:01.860 --> 00:07:05.160\nwith what's gonna happen and kind of\nwalk you through the logic of this.\n\n124\n00:07:05.160 --> 00:07:08.590\nThen I'm gonna take you and we'll\ntake a look at the AD RMS components,\n\n125\n00:07:08.590 --> 00:07:11.720\nthe building blocks,\npieces that make up AD RMS to\n\n126\n00:07:11.720 --> 00:07:15.650\nround out our conversation here\naround the initial thought processes,\n\n127\n00:07:15.650 --> 00:07:19.470\nand getting comfortable with and getting\nintroduced to the ideas around AD RMD.\n\n128\n00:07:19.470 --> 00:07:21.030\nSo, what happens here?\n\n129\n00:07:21.030 --> 00:07:23.620\nStep 1, the author creates the file,\nas we talked about.\n\n130\n00:07:23.620 --> 00:07:25.370\nThey specify those usage rights and\n\n131\n00:07:25.370 --> 00:07:28.640\nconditions that I was mentioning\nthey have the right to do.\n\n132\n00:07:28.640 --> 00:07:32.680\nAnd once they've done that, we generate\nthis license that I was talking about,\n\n133\n00:07:32.680 --> 00:07:33.930\nthe publishing license.\n\n134\n00:07:33.930 --> 00:07:37.830\nThis has the policies and all\nthe permissions associated with it, and\n\n135\n00:07:37.830 --> 00:07:42.210\nties that information into the protected\nfile by combining the two or\n\n136\n00:07:42.210 --> 00:07:43.790\nessentially pairing the two.\n\n137\n00:07:43.790 --> 00:07:48.697\nThe application they're using, whether\nit's Microsoft Word or Microsoft Excel,\n\n138\n00:07:48.697 --> 00:07:49.658\nor PowerPoint.\n\n139\n00:07:49.658 --> 00:07:54.568\nWhatever the AD RMS aware application or\nenabled application is.\n\n140\n00:07:54.568 --> 00:07:57.007\nMicrosoft Office obviously fits this bill.\n\n141\n00:07:57.007 --> 00:08:01.627\nThey will then use that application,\ncreate the content in step 1.\n\n142\n00:08:01.627 --> 00:08:05.240\nStep 2, we go ahead and\nthe application does encrypts the file.\n\n143\n00:08:05.240 --> 00:08:08.820\nSo we're not just, or\nwe are not just using certificates but\n\n144\n00:08:08.820 --> 00:08:13.570\nwe're also using encryption to further\nsafeguard as I said and protect the data.\n\n145\n00:08:13.570 --> 00:08:16.700\nSo if you imagine, we encrypt the data and\nthen we use certificates with keys to be\n\n146\n00:08:16.700 --> 00:08:20.380\nable to open the data to a certain degree\nand leverage it, based on the policies\n\n147\n00:08:20.380 --> 00:08:23.510\ninvolved and the licensing to\nsee the data interact with it.\n\n148\n00:08:23.510 --> 00:08:25.800\nThat's essentially what AD RMS does.\n\n149\n00:08:25.800 --> 00:08:28.880\nSo we're gonna encrypt the data,\nwe're encrypting with a symmetric key.\n\n150\n00:08:30.130 --> 00:08:33.858\nSymmetric key is then going\nto be a single private key,\n\n151\n00:08:33.858 --> 00:08:36.866\nright, that is our single use private key.\n\n152\n00:08:36.866 --> 00:08:42.186\nWe're gonna encrypt the file with\nsymmetric key, and then, [COUGH] we also\n\n153\n00:08:42.186 --> 00:08:47.600\nhave in the AD RMS cluster that groups\nservers that we are talking about.\n\n154\n00:08:47.600 --> 00:08:51.430\nThat's created to deploy and\nmanage all the AD RMS technology,\n\n155\n00:08:52.460 --> 00:08:56.330\nwhich is going to be where\nall this takes place,\n\n156\n00:08:56.330 --> 00:08:58.640\nthe servers were all\nof this is being done.\n\n157\n00:08:58.640 --> 00:09:02.650\nThe applications encrypting the data\nlocally on our machine, but\n\n158\n00:09:02.650 --> 00:09:07.460\nit's pulling down the keys and the\nnecessary information are from the server,\n\n159\n00:09:07.460 --> 00:09:08.490\nfrom the server cluster.\n\n160\n00:09:08.490 --> 00:09:13.980\nSo, we're gonna encrypt on the symmetric\nkey and then, we take that\n\n161\n00:09:13.980 --> 00:09:18.790\nencrypted file,\nwe send it over to AD RMS cluster and\n\n162\n00:09:18.790 --> 00:09:25.180\nthe AD RMS cluster encrypts that\nfile with its own set of keys.\n\n163\n00:09:25.180 --> 00:09:27.940\nBut instead of the symmetric\nkey the single use private key,\n\n164\n00:09:27.940 --> 00:09:31.180\nthat we own on our machine,\nthat we only have knowledge of, and\n\n165\n00:09:31.180 --> 00:09:34.250\nonly we are able to understand how to use.\n\n166\n00:09:34.250 --> 00:09:37.478\nWhat the AD RMS cluster uses\nis an asymmetric system,\n\n167\n00:09:37.478 --> 00:09:42.355\na public-private key pair, a set of keys,\none public which is made available to\n\n168\n00:09:42.355 --> 00:09:46.540\nanybody who wants it and can download\nit through the LDAP directory.\n\n169\n00:09:46.540 --> 00:09:48.694\nOne private we called the private key,\n\n170\n00:09:48.694 --> 00:09:52.868\npart of the key pair that is known only\nto the AD RMS server, in this case, for\n\n171\n00:09:52.868 --> 00:09:55.830\nthe cluster of servers that\nrepresents the service.\n\n172\n00:09:55.830 --> 00:09:58.720\nAnd so, by using the key pair,\nwe have more options.\n\n173\n00:09:58.720 --> 00:10:03.890\nBecause, when we use the public key\nof the AD RMS cluster to encrypt\n\n174\n00:10:03.890 --> 00:10:07.040\nonly the private key\ncan be used to decrypt.\n\n175\n00:10:07.040 --> 00:10:10.950\nSo when we use the public key to encrypt,\npublic key known to everybody,\n\n176\n00:10:10.950 --> 00:10:13.600\nwe don't care if you know\nwhat key we used to encrypt,\n\n177\n00:10:13.600 --> 00:10:16.990\nyou got to know the corresponding\nkey pair to decrypt.\n\n178\n00:10:16.990 --> 00:10:21.107\nAnd, there's a very simple rule and logic\nassociated with cryptography with the use\n\n179\n00:10:21.107 --> 00:10:23.980\nof encryption,\nthat's probably worth mentioning here.\n\n180\n00:10:23.980 --> 00:10:27.766\nIf you've seen some of our shows and\nepisodes and there are areas around\n\n181\n00:10:27.766 --> 00:10:32.121\nsecurity and Barry shows either Daniel and\nI've done or I've done with some other\n\n182\n00:10:32.121 --> 00:10:36.287\nhost here at ITProTV, you've heard\nextensively talk about cryptography and\n\n183\n00:10:36.287 --> 00:10:40.620\nthe differences between symmetric and\nasymmetric, like I just described.\n\n184\n00:10:40.620 --> 00:10:44.930\nBut you've also heard us talk about\na concept known as Kerckhoffs' principles.\n\n185\n00:10:44.930 --> 00:10:48.619\nAuguste Kerckhoffs very famous\nperson within the time line and\n\n186\n00:10:48.619 --> 00:10:52.318\nkind of historical context of\nthe evolution of cryptography.\n\n187\n00:10:52.318 --> 00:10:57.400\nAnd what he comes up with, his rule,\nhis principle, it's very simple.\n\n188\n00:10:57.400 --> 00:11:00.260\nHe basically says, look,\nthere are a lot of moving parts and\n\n189\n00:11:00.260 --> 00:11:03.000\npieces associated with what\nwe call a cryptosystem,\n\n190\n00:11:03.000 --> 00:11:06.010\nall the pieces that go into\nmaking cryptography possible.\n\n191\n00:11:06.010 --> 00:11:07.813\nThe algorithm of choice, the key or\n\n192\n00:11:07.813 --> 00:11:12.223\nkey pair, depending on what we're doing,\nsymmetric and or asymmetric encryption.\n\n193\n00:11:12.223 --> 00:11:15.858\nThe plaintext, the data you're sending\ninto the system that is known and\n\n194\n00:11:15.858 --> 00:11:17.650\nobviously you wanna protect.\n\n195\n00:11:17.650 --> 00:11:20.130\nThe cyphertext,\nthe data comes out the backend.\n\n196\n00:11:20.130 --> 00:11:24.020\nThat is the scrambled version of\nthe plaintext that's been encrypted.\n\n197\n00:11:24.020 --> 00:11:26.278\nOr in cypher, you hear it referred\nto in two different ways.\n\n198\n00:11:26.278 --> 00:11:28.264\nAnd all this things go together, right,\n\n199\n00:11:28.264 --> 00:11:31.220\nalong with the application\nthat drives the encryption.\n\n200\n00:11:31.220 --> 00:11:33.380\nThere's a lot of moving parts and pieces.\n\n201\n00:11:33.380 --> 00:11:36.920\nWhat Kerckhhoffs' says is,\nin a cypher base system,\n\n202\n00:11:36.920 --> 00:11:41.680\nin a cryptographic base system,\nyou can keep everything that you do\n\n203\n00:11:41.680 --> 00:11:44.570\nin that system,\nall the different moving parts and pieces.\n\n204\n00:11:44.570 --> 00:11:47.330\nYou can keep track of all that but you\nknow what, you could tell the bad people,\n\n205\n00:11:47.330 --> 00:11:49.930\npeople wanna break that system,\nyou can tell them everything,\n\n206\n00:11:49.930 --> 00:11:53.120\none exception, you can let them know\nwhat algorithm you're be gonna use,\n\n207\n00:11:53.120 --> 00:11:55.330\nyou can give them the cyphertext.\n\n208\n00:11:55.330 --> 00:11:57.340\nNot gonna do them a lot\nof good traditionally.\n\n209\n00:11:57.340 --> 00:12:00.940\nYou can tell them what application\nyou used to engage in the encryption.\n\n210\n00:12:00.940 --> 00:12:02.630\nHey, I'm using Microsoft Word,\n\n211\n00:12:02.630 --> 00:12:08.240\nI'm using RSA algorithm with 2,048 per q\nstrength and here's all the cyphertext.\n\n212\n00:12:08.240 --> 00:12:11.240\nI can push all that over the table,\ngive that all to you.\n\n213\n00:12:11.240 --> 00:12:15.375\nOne thing I have to keep secret, one thing\nKerckhoffs said, no matter what under any\n\n214\n00:12:15.375 --> 00:12:19.103\ncircumstances, can never be exposed if\nyou want everything else to work and\n\n215\n00:12:19.103 --> 00:12:21.513\nyou wanna maintain security\nis the private key.\n\n216\n00:12:21.513 --> 00:12:24.797\nWhat we talked about in the symmetric\nonly system, the single key or\n\n217\n00:12:24.797 --> 00:12:27.562\nin the public private key pair\nof the asymmetric system,\n\n218\n00:12:27.562 --> 00:12:29.877\nthe private key that pairs\nwith the public key.\n\n219\n00:12:29.877 --> 00:12:32.596\nAnd so\nif we follow Kerckhoffs principle, and\n\n220\n00:12:32.596 --> 00:12:35.804\nwe keep that private key secure\non the AD RMS cluster and\n\n221\n00:12:35.804 --> 00:12:40.686\nonly the servers know the key, then when\nwe encrypt with the public key, we encrypt\n\n222\n00:12:40.686 --> 00:12:45.392\nthe inbound data that was encrypted with\nthe private key on the client's side.\n\n223\n00:12:45.392 --> 00:12:48.876\nKept secret cuz that's a separate private\nkey, the client keeps that secure,\n\n224\n00:12:48.876 --> 00:12:50.370\ndoesn't give that away.\n\n225\n00:12:50.370 --> 00:12:53.973\nAnd, if we re-encrypt that data\nusing the public key of the server,\n\n226\n00:12:53.973 --> 00:12:57.591\nonly the private key of the server\ncan unencrypt the encrypted data.\n\n227\n00:12:57.591 --> 00:13:01.326\nAnd then only the private key of the\napplication can unencrypt the data once\n\n228\n00:13:01.326 --> 00:13:04.350\nit's been unencrypted so\nthat we can then work on it.\n\n229\n00:13:04.350 --> 00:13:07.660\nAnd so, if these private keys\nare kept secure, kept confidential,\n\n230\n00:13:07.660 --> 00:13:11.790\nnobody knows them, they're not exposed\nin any way, the system is fool proof and\n\n231\n00:13:11.790 --> 00:13:14.330\nit's secure, because nobody\ncan break the encryption and\n\n232\n00:13:14.330 --> 00:13:17.750\nsee the data without the appropriate\ncertificates and the permissions.\n\n233\n00:13:17.750 --> 00:13:20.527\nAnd this is really what we're\nestablishing in step two.\n\n234\n00:13:20.527 --> 00:13:24.641\nSo if we can go back to our list here and\njust kind of walk back through the logic.\n\n235\n00:13:24.641 --> 00:13:28.656\nSo now, we are encrypting or\ntaking the application based data,\n\n236\n00:13:28.656 --> 00:13:33.693\nencrypting it on the client side with\nsymmetric private key, we're then sending\n\n237\n00:13:33.693 --> 00:13:38.900\nit to the AD RMS cluster, it encrypts it\nwith its public key, part of a key pair.\n\n238\n00:13:38.900 --> 00:13:44.200\nAnd then, it inserts that key, that\npublic key into the license that binds,\n\n239\n00:13:44.200 --> 00:13:47.130\nor rather the license and\nthen binds it to the file.\n\n240\n00:13:47.130 --> 00:13:50.858\nSo, that way, that key can be\nused to validate that the data\n\n241\n00:13:50.858 --> 00:13:55.930\nis indeed authorized and can be used\nin access under limited conditions.\n\n242\n00:13:55.930 --> 00:14:00.400\nSo, we're establishing through PKI,\npublic key infrastructure, the use and\n\n243\n00:14:00.400 --> 00:14:03.400\nthe ability to be able\nto then successfully,\n\n244\n00:14:03.400 --> 00:14:06.410\nassuming everything else works the right\nway and we have the right permissions, we\n\n245\n00:14:06.410 --> 00:14:10.290\nhave the right licenses, and we're doing\nthis in the right way, open the data up.\n\n246\n00:14:10.290 --> 00:14:11.850\nStep three, we distribute the file.\n\n247\n00:14:11.850 --> 00:14:15.014\nWe put it up on a file share,\nemail it to somebody, publish it\n\n248\n00:14:15.014 --> 00:14:19.001\nsomewhere where people can download it,\nmaybe SharePoint in the library.\n\n249\n00:14:19.001 --> 00:14:20.540\nIt doesn't matter what we do with it,\nbut it's really up to us.\n\n250\n00:14:20.540 --> 00:14:22.001\n&gt;&gt; [INAUDIBLE] Billboard, yeah.\n\n251\n00:14:22.001 --> 00:14:23.860\n[LAUGH]\n&gt;&gt; We can just post it out there.\n\n252\n00:14:23.860 --> 00:14:25.170\nThrow it on a bunch of fun drives,\n\n253\n00:14:25.170 --> 00:14:27.220\nscatter them around a parking lot,\nit doesn't matter.\n\n254\n00:14:27.220 --> 00:14:30.650\nPut the malware on there as well, just to\nmake sure you have good coverage, right?\n\n255\n00:14:30.650 --> 00:14:32.410\nDon't do that, by the way,\nit's not appropriate.\n\n256\n00:14:32.410 --> 00:14:35.147\nAll right, so things like email,\nSharePoint, Docker, libraries,\n\n257\n00:14:35.147 --> 00:14:37.393\nfile service,\nyou can essentially publish it anywhere.\n\n258\n00:14:37.393 --> 00:14:39.702\nIt doesn't really matter.\n\n259\n00:14:39.702 --> 00:14:41.279\nLet's just scroll up here a little bit.\n\n260\n00:14:41.279 --> 00:14:45.185\nStep four, the recipient whoever's\ngonna get the files, gonna use it.\n\n261\n00:14:45.185 --> 00:14:47.275\nWe emailed that to them,\nwe told them to download it.\n\n262\n00:14:47.275 --> 00:14:49.555\nWe posted it up,\ngave them the share location.\n\n263\n00:14:49.555 --> 00:14:51.155\nHowever, we do it, they get the file and\n\n264\n00:14:51.155 --> 00:14:55.655\nthey open it using again an AD RMS-enabled\napplication, very important.\n\n265\n00:14:55.655 --> 00:15:00.780\nBoth sides of the divide have to\nuse apps that RMS enabled or aware.\n\n266\n00:15:00.780 --> 00:15:04.120\nSo again, Microsoft Office is\ntraditionally the app we talk about and\n\n267\n00:15:04.120 --> 00:15:05.690\nthink about using here.\n\n268\n00:15:05.690 --> 00:15:09.160\nIf they don't have, the recipient does\nnot have a RAC, right, the rights account\n\n269\n00:15:09.160 --> 00:15:13.000\ncertificate that we talk about\nthat is enabled or given, right.\n\n270\n00:15:13.000 --> 00:15:15.720\nif they don't have that,\nthen they get one issued.\n\n271\n00:15:15.720 --> 00:15:16.576\nBecause remember,\n\n272\n00:15:16.576 --> 00:15:19.696\nthey may be opening data that they've\nalready gotten a certificate for or\n\n273\n00:15:19.696 --> 00:15:23.135\nthey may be downloading data for the first\ntime that they've never seen before.\n\n274\n00:15:23.135 --> 00:15:26.883\nSo the RAC is important but the RAC,\nthe certificate will be downloaded\n\n275\n00:15:26.883 --> 00:15:30.817\nthe first time we touch the data,\nsetup them and installed on the system and\n\n276\n00:15:30.817 --> 00:15:35.085\nmaintain there and then we have to\nreference it every time we open the data.\n\n277\n00:15:35.085 --> 00:15:37.165\nIt's essentially a key that we put in and\n\n278\n00:15:37.165 --> 00:15:40.005\nturn in the lock every time\nwe wanna read the data.\n\n279\n00:15:40.005 --> 00:15:43.327\nIf, the data has already been\naccessed at least one successfully,\n\n280\n00:15:43.327 --> 00:15:45.495\nthe RAC will be on the system and\navailable.\n\n281\n00:15:45.495 --> 00:15:48.808\nIf it's the first time,\nwe'd just simply have to request one and\n\n282\n00:15:48.808 --> 00:15:50.987\nthe AD RMS cluster will\nthen issue it to us.\n\n283\n00:15:50.987 --> 00:15:56.232\nSo, we can deal with that Step 5,\nthe application requests a user license or\n\n284\n00:15:56.232 --> 00:15:58.668\na use license through the cluster.\n\n285\n00:15:58.668 --> 00:16:01.791\nThat gets issued as part of the process.\n\n286\n00:16:01.791 --> 00:16:03.840\nIt's the publishing license.\n\n287\n00:16:03.840 --> 00:16:04.860\nAnd we give that or\n\n288\n00:16:04.860 --> 00:16:09.030\nwe'll provide that through the AD RMS\ncluster to the authorized user.\n\n289\n00:16:09.030 --> 00:16:12.650\nThe AD RMS cluster has to\nconfirm the user is authorized.\n\n290\n00:16:12.650 --> 00:16:14.860\nThey look at the recipient's\nauthorization level.\n\n291\n00:16:14.860 --> 00:16:16.170\nThey check the user name.\n\n292\n00:16:16.170 --> 00:16:18.290\nMake sure they're on the name user list,\nor\n\n293\n00:16:18.290 --> 00:16:21.170\nthey're on a group that is\ngranted rights and permissions.\n\n294\n00:16:21.170 --> 00:16:24.610\nThen the AD RMS cluster will\ncreate the user license.\n\n295\n00:16:24.610 --> 00:16:28.210\nOnce that's done, there's a little bit of\ndecryption that goes on, as you can see,\n\n296\n00:16:28.210 --> 00:16:32.320\nto decrypt and re-encrypt to make sure\nthat all that information is accurate and\n\n297\n00:16:32.320 --> 00:16:35.580\nstored successfully and\nthen communicated successfully.\n\n298\n00:16:35.580 --> 00:16:39.290\nAnd then we go ahead and\nwe send that license out to the user.\n\n299\n00:16:39.290 --> 00:16:41.960\nWhich has,\namong all the other things it does,\n\n300\n00:16:41.960 --> 00:16:44.910\nhas an expiration date associated with it,\nif applicable.\n\n301\n00:16:44.910 --> 00:16:48.376\nWe can actually set that up\nto expire using this system.\n\n302\n00:16:48.376 --> 00:16:50.680\nYou may have, I don't know, for\ninstance, Daniel, if you've done this.\n\n303\n00:16:50.680 --> 00:16:52.800\nBut I know, for instance, for me, for\n\n304\n00:16:52.800 --> 00:16:55.850\na lot of trainer materials we\nget from vendors, like VMware.\n\n305\n00:16:57.380 --> 00:17:00.889\nMicrosoft doesn't expire their material,\nbut different vendors may.\n\n306\n00:17:00.889 --> 00:17:03.040\nCisco does this, right?\n\n307\n00:17:03.040 --> 00:17:05.748\nThey'll put out materials that\nare good for a period of time.\n\n308\n00:17:05.748 --> 00:17:10.375\nAnd they'll apply an expiration date\nto those using this technology.\n\n309\n00:17:10.375 --> 00:17:15.231\nWe'll use secure PDF readers,\nthings like LockLizard and VitalSource.\n\n310\n00:17:15.231 --> 00:17:16.450\nYou may or may not heard have\nheard of these products.\n\n311\n00:17:16.450 --> 00:17:21.423\nBut they're ADMS-aware or ADMS-enabled\napplications that are secure for\n\n312\n00:17:21.423 --> 00:17:22.360\nend readers.\n\n313\n00:17:22.360 --> 00:17:26.443\nThink of like Acrobat Reader, but\nAcrobat with this additional capability.\n\n314\n00:17:26.443 --> 00:17:27.940\nIt's kinda like that.\n\n315\n00:17:27.940 --> 00:17:31.509\nAnd so vendors that, for instance,\nas a consultant and a trainer,\n\n316\n00:17:31.509 --> 00:17:33.150\nI represent, I do business for,\n\n317\n00:17:33.150 --> 00:17:37.970\nl train on behalf of as a certified\ntrainer, they will use this technology.\n\n318\n00:17:37.970 --> 00:17:42.155\nAnd they will actually give us files\nthat are licensed using this technology.\n\n319\n00:17:42.155 --> 00:17:44.243\nLink to our login in our account.\n\n320\n00:17:44.243 --> 00:17:46.663\nAnd you have to download a license and\ninstall it and\n\n321\n00:17:46.663 --> 00:17:49.998\nonly use the authorized app, or\nyou won't be able to access the file.\n\n322\n00:17:49.998 --> 00:17:51.770\nAnd you can only do it for period of time.\n\n323\n00:17:51.770 --> 00:17:55.323\nSo it's pretty common these days\nin many industries to see this.\n\n324\n00:17:55.323 --> 00:17:59.184\nAnd you may have actually come\nacross this technology yourself,\n\n325\n00:17:59.184 --> 00:18:03.520\nif you've ever taken any either\nonline classes or in person classes.\n\n326\n00:18:03.520 --> 00:18:07.150\nBut if you've ever done them within\nany of these kinds of vendor driven or\n\n327\n00:18:07.150 --> 00:18:09.590\nvendor sponsored training solutions,\n\n328\n00:18:09.590 --> 00:18:12.510\nyou get one of these proprietary readers\nsimply to get your courseware these days.\n\n329\n00:18:12.510 --> 00:18:14.909\nBecause most courseware is all electronic.\n\n330\n00:18:14.909 --> 00:18:17.790\nWe've kinda gotten out of the hey,\nlet's kill trees to print books business,\n\n331\n00:18:17.790 --> 00:18:19.000\nwhich is a good thing.\n\n332\n00:18:19.000 --> 00:18:23.330\nAnd as a result, a lot of those files that\nare sent are electronically managed and\n\n333\n00:18:23.330 --> 00:18:26.680\nactually controlled with AD RMS or\na version of that technology.\n\n334\n00:18:26.680 --> 00:18:28.300\nIt may not be Windows-centric.\n\n335\n00:18:28.300 --> 00:18:31.940\nBut more broadly, the IRM,\nthe information rights manager, or DRM,\n\n336\n00:18:31.940 --> 00:18:35.720\nyou sometimes hear it referred to as well,\ndata rights management technology.\n\n337\n00:18:35.720 --> 00:18:38.113\nWhatever the vendor is that does this,\n\n338\n00:18:38.113 --> 00:18:42.477\nwhether it's Microsoft-centric\nwith AD RMS or vendor nonspecific.\n\n339\n00:18:42.477 --> 00:18:45.607\nJust kind of open to whatever\nthe LDAP provider and\n\n340\n00:18:45.607 --> 00:18:48.600\nrights management licensing process is.\n\n341\n00:18:48.600 --> 00:18:51.530\nThis technology, this thought process\nis pretty common today, right?\n\n342\n00:18:51.530 --> 00:18:56.905\nSo iTunes uses a thought process\nlike this to secure the data.\n\n343\n00:18:56.905 --> 00:18:59.731\nGoogle, the Android Play Store,\nwhen you download apps, all that stuff,\n\n344\n00:18:59.731 --> 00:19:02.040\nit's all driven essentially\nthe same way behind the scenes.\n\n345\n00:19:02.040 --> 00:19:05.126\nSo, we've probably all consumed\nthese technology items before,\n\n346\n00:19:05.126 --> 00:19:06.638\njust may not have made the link and\n\n347\n00:19:06.638 --> 00:19:10.226\nthe connection in our head that this is\na derivative kind of a thought process.\n\n348\n00:19:10.226 --> 00:19:12.108\nIt's very similar to what\nwe're talking about here.\n\n349\n00:19:12.108 --> 00:19:14.174\nWe're talking about Microsoft's\nversion of this, essentially.\n\n350\n00:19:14.174 --> 00:19:16.320\n&gt;&gt; What type of files\nis this able to affect?\n\n351\n00:19:16.320 --> 00:19:19.452\nIs it just text-type files,\nor is it any type of file?\n\n352\n00:19:19.452 --> 00:19:22.567\n&gt;&gt; You can apply this to\njust about any kind or\n\n353\n00:19:22.567 --> 00:19:25.328\ntype of file that you would think of.\n\n354\n00:19:25.328 --> 00:19:29.140\n&gt;&gt; [LAUGH]\n&gt;&gt; As long as\n\n355\n00:19:29.140 --> 00:19:33.800\nthe applications that are creating\nthe data on the front end are,\n\n356\n00:19:33.800 --> 00:19:37.710\nin this case, specifically,\non the Microsoft platform, AD RMS-aware.\n\n357\n00:19:37.710 --> 00:19:42.250\nSo like I said, for instance, with iTunes\nas just one example, when you download\n\n358\n00:19:42.250 --> 00:19:47.370\ncontent into the iTunes app,\nit is aware of this thought process of,\n\n359\n00:19:47.370 --> 00:19:51.250\nnot AD RMS, but the equivalent\nApple-centric version of it for\n\n360\n00:19:51.250 --> 00:19:54.650\nlicensing and rights management and\nIP protection.\n\n361\n00:19:54.650 --> 00:19:56.280\nIt's claims aware.\n\n362\n00:19:56.280 --> 00:19:59.992\nAnd as a result, it's able to validate\nyou based on, you log into the store.\n\n363\n00:19:59.992 --> 00:20:01.760\nThe same thing with\nthe Android Play Store.\n\n364\n00:20:01.760 --> 00:20:03.460\nYou log in based on your account.\n\n365\n00:20:03.460 --> 00:20:06.352\nThe app or\nthe application you're using is aware and\n\n366\n00:20:06.352 --> 00:20:09.080\nthose data types are then\nable to be processed.\n\n367\n00:20:09.080 --> 00:20:12.650\nSo the MP4s you've download,\nthe MP3s, whatever it is,\n\n368\n00:20:12.650 --> 00:20:16.540\nall of that stuff is being done\njust through the front end the app.\n\n369\n00:20:16.540 --> 00:20:19.741\nSo as long as the app's aware of how to\ninteract with the licensing back end,\n\n370\n00:20:19.741 --> 00:20:21.501\nyou can pretty much do anything you want.\n\n371\n00:20:21.501 --> 00:20:22.044\n&gt;&gt; Okay.\n\n372\n00:20:22.044 --> 00:20:24.183\n&gt;&gt; Yeah, so it's a broad, wide open,\n\n373\n00:20:24.183 --> 00:20:28.673\nparallel universe of licensing restriction\nthat we are talking about here.\n\n374\n00:20:28.673 --> 00:20:29.801\nAll right, let's just finish up.\n\n375\n00:20:29.801 --> 00:20:33.020\nWe have a couple other steps to go\nback through real quick, if we could.\n\n376\n00:20:33.020 --> 00:20:34.578\nAnd we'll go [SOUND] full screen.\n\n377\n00:20:34.578 --> 00:20:35.401\nLike that, awesome.\n\n378\n00:20:35.401 --> 00:20:36.980\n&gt;&gt; That was cool, yeah.\n\n379\n00:20:36.980 --> 00:20:38.300\n&gt;&gt; I owe you a high five, Megan.\n\n380\n00:20:38.300 --> 00:20:38.843\nThat was really cool.\n\n381\n00:20:38.843 --> 00:20:40.246\n&gt;&gt; [LAUGH]\n&gt;&gt; All right, so\n\n382\n00:20:40.246 --> 00:20:45.450\nthe AD RMS cluster does confirm the\nauthorization level, as we talked about.\n\n383\n00:20:45.450 --> 00:20:47.978\nGives us that content expiration,\nif appropriate.\n\n384\n00:20:47.978 --> 00:20:50.813\nAfter the cluster confirms this,\nwe then go ahead and\n\n385\n00:20:50.813 --> 00:20:53.780\nwe send the license out\nto the client's computer.\n\n386\n00:20:53.780 --> 00:20:57.615\nSo we do all the back end magic\nbetween the servers, license.\n\n387\n00:20:57.615 --> 00:20:59.362\nAnd then after we get the license,\n\n388\n00:20:59.362 --> 00:21:02.685\nthe application on the end user\ndesktop verifies it, sets it up.\n\n389\n00:21:02.685 --> 00:21:06.694\nGoes through all the stuff it needs to do\nto ensure that it can validate the chain\n\n390\n00:21:06.694 --> 00:21:07.475\nof trust.\n\n391\n00:21:07.475 --> 00:21:10.923\nThat it understands that the certificate\nis legitimate, validates that.\n\n392\n00:21:10.923 --> 00:21:13.555\nSo standard PKI-related thought process.\n\n393\n00:21:13.555 --> 00:21:18.098\nDon't just accept the certificate,\nwalk back up the chain of trust.\n\n394\n00:21:18.098 --> 00:21:20.690\nWe call that the trust chain, and-\n&gt;&gt; [LAUGH]\n\n395\n00:21:20.690 --> 00:21:22.150\n&gt;&gt; Make sure you could validate that.\n\n396\n00:21:22.150 --> 00:21:26.055\nIt's backwards Wednesday here at ITProTV,\nexcept it's Thursday.\n\n397\n00:21:26.055 --> 00:21:26.629\n&gt;&gt; It's Thursday.\n\n398\n00:21:26.629 --> 00:21:29.730\n&gt;&gt; So it's not backwards Wednesday,\nwhich is backwards, cuz it's Thursday.\n\n399\n00:21:29.730 --> 00:21:32.270\nAnd so as a result,\nwe go up the chain of trust,\n\n400\n00:21:32.270 --> 00:21:35.100\nwe validate that the server that\nissued the certificate is legitimate.\n\n401\n00:21:35.100 --> 00:21:36.060\nWe can interact with it.\n\n402\n00:21:36.060 --> 00:21:37.250\nWe do all the due diligence.\n\n403\n00:21:37.250 --> 00:21:40.140\nIn other words,\nexercise the due care required to do this.\n\n404\n00:21:40.140 --> 00:21:41.810\nThe application then loads.\n\n405\n00:21:41.810 --> 00:21:43.180\nThe certificate is instantiated.\n\n406\n00:21:43.180 --> 00:21:44.880\nThe license is put in.\n\n407\n00:21:44.880 --> 00:21:49.380\nWe load and open any of the relevant\nrevocation conditions, essentially.\n\n408\n00:21:49.380 --> 00:21:51.400\nDownload the list of restrictions.\n\n409\n00:21:51.400 --> 00:21:55.230\nAnd then we access the file based on\nwhatever those restrictions may be.\n\n410\n00:21:55.230 --> 00:21:58.325\nAnd assuming we have rights we're\nthen able to open the file, but\n\n411\n00:21:58.325 --> 00:21:59.290\nmaybe not print it.\n\n412\n00:21:59.290 --> 00:22:02.410\nMaybe we can read it, but\nmaybe not make a copy.\n\n413\n00:22:02.410 --> 00:22:03.763\nSo maybe we can't right-click and copy.\n\n414\n00:22:03.763 --> 00:22:05.540\nYou've probably seen\nthis in Adobe Acrobat.\n\n415\n00:22:05.540 --> 00:22:09.697\nI mean, it's an ADMS-aware or\nat least a claims-aware application.\n\n416\n00:22:09.697 --> 00:22:11.200\nIt doesn't use AD RMS.\n\n417\n00:22:11.200 --> 00:22:14.531\nBut it does use this,\nwhere you get a locked out PDF.\n\n418\n00:22:14.531 --> 00:22:17.270\nYou go, you can't right-click,\nyou can't copy, for instance, right?\n\n419\n00:22:17.270 --> 00:22:19.940\nIt's a version of this,\na thought process that's very similar.\n\n420\n00:22:19.940 --> 00:22:22.880\nSo the same ideas apply here, essentially.\n\n421\n00:22:22.880 --> 00:22:25.440\nAll right, so\nthat's the process high-level overall.\n\n422\n00:22:25.440 --> 00:22:30.040\nI told you we will quickly take a look at\nall the AD RMS components that make up\n\n423\n00:22:30.040 --> 00:22:31.880\nthis wonderful brave new world.\n\n424\n00:22:31.880 --> 00:22:36.180\nSo I thought we would just finish\noff talking about this real quick.\n\n425\n00:22:36.180 --> 00:22:39.480\nWe'll wrap up our first episode\nin our multi-part series here.\n\n426\n00:22:39.480 --> 00:22:42.629\nAnd then we'll come back and we'll drill\ndown a little bit more into things like\n\n427\n00:22:42.629 --> 00:22:44.540\nplanning and implementing the cluster.\n\n428\n00:22:44.540 --> 00:22:47.880\nHow do we put all these moving parts and\npieces together and set them up?\n\n429\n00:22:47.880 --> 00:22:50.007\nAnd how do we actually\nmake this work end to end?\n\n430\n00:22:50.007 --> 00:22:52.445\nAnd we'll be taking a look\nat that after we're done.\n\n431\n00:22:52.445 --> 00:22:54.176\nAll right,\nlet's go through here real quick.\n\n432\n00:22:54.176 --> 00:22:57.302\nAnd we'll take a look just at all\nthe moving parts and pieces on the chart.\n\n433\n00:22:57.302 --> 00:22:58.190\nCan we just go back?\n\n434\n00:22:58.190 --> 00:22:59.176\nCuz it's, again, hard to see.\n\n435\n00:22:59.176 --> 00:23:00.354\nWe're covering part of the screen.\n\n436\n00:23:00.354 --> 00:23:01.840\nThank you very much.\n\n437\n00:23:01.840 --> 00:23:06.790\nSo what we have is we have AD RMS\ncertification server clusters.\n\n438\n00:23:06.790 --> 00:23:08.030\nWe talked about this.\n\n439\n00:23:08.030 --> 00:23:12.590\nThis is where we go to administer and\nset up and configure AD RMS.\n\n440\n00:23:12.590 --> 00:23:17.008\nOur ADDS forest, in other words, our\nActive Directory Forest, has a limit of\n\n441\n00:23:17.008 --> 00:23:22.670\none AD RMS certification server cluster,\nwhat we commonly call a root cluster.\n\n442\n00:23:22.670 --> 00:23:25.445\nSo we set up one root cluster per forest.\n\n443\n00:23:25.445 --> 00:23:28.345\nNot per domain, not per tree,\nbut per forest.\n\n444\n00:23:28.345 --> 00:23:30.375\nSo we instantiate this one time and\n\n445\n00:23:30.375 --> 00:23:33.845\nthis services the entire forest,\njust so we know.\n\n446\n00:23:33.845 --> 00:23:36.335\nNow, the certification server cluster, or\n\n447\n00:23:36.335 --> 00:23:39.547\nwhat is commonly called\nthe root certification servers,\n\n448\n00:23:39.547 --> 00:23:43.232\nare separate from what's known\nas the licensing-only cluster.\n\n449\n00:23:43.232 --> 00:23:46.909\nServers in a licensing-only cluster\nare just doing the licensing and\n\n450\n00:23:46.909 --> 00:23:49.536\npublishing of services\npiece that we described.\n\n451\n00:23:49.536 --> 00:23:52.574\nSo you have essentially two\nlevels of functionality.\n\n452\n00:23:52.574 --> 00:23:56.081\nThe certification server cluster,\nwhat we call the root cluster,\n\n453\n00:23:56.081 --> 00:23:59.403\ndoes the administration and\nthe control of the architecture and\n\n454\n00:23:59.403 --> 00:24:01.330\nthe infrastructure on the back end.\n\n455\n00:24:01.330 --> 00:24:05.000\nAnd then we have licensing only\nclusters that can be set up\n\n456\n00:24:05.000 --> 00:24:07.600\nspecific to just dealing\nwith the licensing piece.\n\n457\n00:24:07.600 --> 00:24:11.880\nNow, and most architectures, we'll talk\nabout this in the upcoming episodes,\n\n458\n00:24:11.880 --> 00:24:15.020\nyou traditionally will just do\na certification server cluster or\n\n459\n00:24:15.020 --> 00:24:18.910\nroute cluster, and provide for\nall the functionality there.\n\n460\n00:24:18.910 --> 00:24:22.268\nWe can scale that out,\nright, by adding servers.\n\n461\n00:24:22.268 --> 00:24:25.937\nBut if we add them in,\nthey become the licensing servers.\n\n462\n00:24:25.937 --> 00:24:30.040\nAnd so the licensing servers become part\nof that route cluster unless we break them\n\n463\n00:24:30.040 --> 00:24:32.850\nout separately into\na licensing only cluster.\n\n464\n00:24:32.850 --> 00:24:36.860\nAnd we typically don't install licensing\nonly clusters unless we have a specific\n\n465\n00:24:36.860 --> 00:24:40.390\nset of licensing requirements that\nare unique, that we wanna service.\n\n466\n00:24:40.390 --> 00:24:42.440\nWe normally just set up\nthe route cluster and\n\n467\n00:24:42.440 --> 00:24:46.205\nas a result of that, we're then\nable just to run everything there.\n\n468\n00:24:46.205 --> 00:24:48.385\nSo we'll talk a bit more\nabout that later on.\n\n469\n00:24:48.385 --> 00:24:49.315\nBut we have all that.\n\n470\n00:24:49.315 --> 00:24:51.275\nWe have the administration web service.\n\n471\n00:24:51.275 --> 00:24:54.255\nThis is where we go in and\neither through PowerShell or\n\n472\n00:24:54.255 --> 00:24:57.655\nthrough the admin console, are able to\ngo in and do all the administration.\n\n473\n00:24:57.655 --> 00:25:00.100\nSo that's just the console\nwe go into essentially.\n\n474\n00:25:00.100 --> 00:25:01.530\nThe service behind it.\n\n475\n00:25:01.530 --> 00:25:05.915\nAccount certification, this is what\ngenerates the RACs for us, right,\n\n476\n00:25:05.915 --> 00:25:08.960\nthose certificates we talked about,\nthat are ultimately given to users.\n\n477\n00:25:08.960 --> 00:25:11.310\nWe have the licensing piece,\nwe talked about that.\n\n478\n00:25:11.310 --> 00:25:13.540\nThis is what deals with\nend user licensing.\n\n479\n00:25:13.540 --> 00:25:15.550\nWe have our publishing functionality.\n\n480\n00:25:15.550 --> 00:25:19.920\nThis is where we create the client\nlicensor certificates and allow us to\n\n481\n00:25:19.920 --> 00:25:25.190\npublish the information and the\nspecificity of use that we then provide.\n\n482\n00:25:25.190 --> 00:25:26.746\nWe have what's called pre-certification.\n\n483\n00:25:26.746 --> 00:25:29.791\nThis allows the server to pre-request or\n\n484\n00:25:29.791 --> 00:25:33.793\nrequest the RAC on behalf of the user so\nthat exchange.\n\n485\n00:25:33.793 --> 00:25:38.554\nAnd this really specific to the exchange\nfunctionality for the use of AD RMS.\n\n486\n00:25:38.554 --> 00:25:42.574\nWe can set AD RMS up and\nthen bind programs like Exchange and\n\n487\n00:25:42.574 --> 00:25:43.894\nSharePoint to it.\n\n488\n00:25:43.894 --> 00:25:48.316\nWhen we set up Exchange with it,\nwe're able to prerequest or precertify so\n\n489\n00:25:48.316 --> 00:25:53.161\nthat content that goes into Microsoft\nOutlook for users that are using Exchange,\n\n490\n00:25:53.161 --> 00:25:54.650\ncan be prelicensed.\n\n491\n00:25:54.650 --> 00:25:57.560\nSo they can open up and\nsee this content, we can preview it,\n\n492\n00:25:57.560 --> 00:25:58.620\nwe can interact with it.\n\n493\n00:25:58.620 --> 00:26:03.330\nYou know how you may attach like\na document or something to an email and\n\n494\n00:26:03.330 --> 00:26:05.250\nyou wanna send it and\nyou know how you have the preview pane,\n\n495\n00:26:05.250 --> 00:26:07.335\nand you could see messages and\nall that kind of stuff.\n\n496\n00:26:07.335 --> 00:26:11.460\nPre-certification allows us to ensure\nthat that data can be worked with\n\n497\n00:26:11.460 --> 00:26:12.900\non the Exchange system.\n\n498\n00:26:12.900 --> 00:26:17.770\nCuz remember Exchange would have to go\nout to the AD RMS cluster and ask for and\n\n499\n00:26:17.770 --> 00:26:20.750\nthen get all these information and\nOutlook would then have to have it so\n\n500\n00:26:20.750 --> 00:26:24.560\nthat Exchange can send and\nreceive these messages that are protected.\n\n501\n00:26:24.560 --> 00:26:26.600\nAnd Outlook as a claims aware or\n\n502\n00:26:26.600 --> 00:26:30.370\nan AD RMS enabled app would then\nhave to be able to be provided these\n\n503\n00:26:30.370 --> 00:26:33.410\nRAC certificates and ultimately\nthe licensing to be able to use this.\n\n504\n00:26:33.410 --> 00:26:38.040\nSo precertification as a process let's\njust set that up and prerequest those.\n\n505\n00:26:38.040 --> 00:26:40.159\nIf we do that, we have service locators.\n\n506\n00:26:41.170 --> 00:26:45.870\nThis is where we are providing the\ninformation that allows us to provide or\n\n507\n00:26:45.870 --> 00:26:48.920\nto find the AD RMS capabilities.\n\n508\n00:26:48.920 --> 00:26:52.190\nSo the AD RMS enabled clients\nare gonna be able to go out and\n\n509\n00:26:52.190 --> 00:26:54.920\ninteract with ADDS,\nthe Active Directory Domain Service,\n\n510\n00:26:54.920 --> 00:26:57.800\nto do lookups to find\nthe AD RMS functionalities.\n\n511\n00:26:57.800 --> 00:27:01.080\nSo service locator records\nare what we're using for this.\n\n512\n00:27:01.080 --> 00:27:03.460\nThese are just the URLs that are provided.\n\n513\n00:27:03.460 --> 00:27:05.525\nThen we have the AD RMS client.\n\n514\n00:27:05.525 --> 00:27:08.885\nThat's whatever the component\nis that we're gonna be using.\n\n515\n00:27:08.885 --> 00:27:13.025\nThis is gonna allow us to be able to\ngo in and interact with the server and\n\n516\n00:27:13.025 --> 00:27:16.115\ndo the encryption and\ndecryption of data following the rules and\n\n517\n00:27:16.115 --> 00:27:18.625\nthe publishing requirements\nthat we specify.\n\n518\n00:27:18.625 --> 00:27:20.776\nWe have our AD RMS enabled application,\n\n519\n00:27:20.776 --> 00:27:25.411\nthat's the front-end that either an author\nuses or a recipient uses to view the data.\n\n520\n00:27:25.411 --> 00:27:28.570\nThe authors,\nsimply the role that creates the data.\n\n521\n00:27:28.570 --> 00:27:30.550\nClient licensor certificate.\n\n522\n00:27:30.550 --> 00:27:32.340\nThis is the ability for us,\n\n523\n00:27:32.340 --> 00:27:35.090\nas you can see as an author,\ngrants an author permission to\n\n524\n00:27:35.090 --> 00:27:38.770\npublish rights protected content without\nconnecting up to the corporate network.\n\n525\n00:27:38.770 --> 00:27:41.090\nThis is a license we get from the system,\nand\n\n526\n00:27:41.090 --> 00:27:44.250\nessentially gives us offline\ncapabilities so we can go ahead and\n\n527\n00:27:44.250 --> 00:27:48.050\nput content out there without having to\nbe connected to the corporate network.\n\n528\n00:27:48.050 --> 00:27:50.140\nThe consumer is just\nthe role that we assign, or\n\n529\n00:27:50.140 --> 00:27:52.800\nthe name we assigned to the role\nof people that get this content,\n\n530\n00:27:52.800 --> 00:27:56.750\nand are reading if they're the recipients\nI think I called them just a minute ago.\n\n531\n00:27:56.750 --> 00:27:57.920\nEnd user licenses,\n\n532\n00:27:57.920 --> 00:28:01.505\nthese are licenses attached to\nthe consumers when they use data.\n\n533\n00:28:01.505 --> 00:28:06.685\nAn issuance license, this is what lists\nthe users that are on that protected list,\n\n534\n00:28:06.685 --> 00:28:08.695\nthat can actually access the content.\n\n535\n00:28:08.695 --> 00:28:12.215\nSo this list the users who can\ndecrypt the protected content, and\n\n536\n00:28:12.215 --> 00:28:15.865\ngives them the rights though AD RMS\nthat makes them able to do so.\n\n537\n00:28:15.865 --> 00:28:17.475\nCall that an issuance license.\n\n538\n00:28:17.475 --> 00:28:21.396\nSo these are all the moving\nparts associated with AD RMS.\n\n539\n00:28:21.396 --> 00:28:25.345\nWe will be talking about in upcoming\nepisodes how to put all this together,\n\n540\n00:28:25.345 --> 00:28:28.174\nbuild out our clusters,\nestablish functionality.\n\n541\n00:28:28.174 --> 00:28:32.981\nAnd then put this all together in a final\nwhiz bang of an episode what we're gonna\n\n542\n00:28:32.981 --> 00:28:36.495\ndo an end to end hands-on\ndemonstration for you like we did\n\n543\n00:28:36.495 --> 00:28:41.668\nwith the ADFS solution where we built out\nADFS and showed you how to implement it.\n\n544\n00:28:41.668 --> 00:28:44.970\nAfter we get done describing or talking\nthrough with you and explaining it,\n\n545\n00:28:44.970 --> 00:28:47.058\nwe're gonna go through and actually\nshow you how to set it up and build it.\n\n546\n00:28:47.058 --> 00:28:49.850\nSo you're gonna wanna make sure you come\nback and take a look at all of that and\n\n547\n00:28:49.850 --> 00:28:53.030\nthen get a full understanding\nend to end of how AD RMS works.\n\n548\n00:28:53.030 --> 00:28:54.440\n&gt;&gt; Absolutely, it sounds very exciting.\n\n549\n00:28:54.440 --> 00:28:56.852\nI'm looking forward to that,\nwalking through the planning phase and\n\n550\n00:28:56.852 --> 00:28:57.530\nthe implementation and\n\n551\n00:28:57.530 --> 00:29:02.040\nthen seeing all worked out in the very\nend how we can actually make this happen.\n\n552\n00:29:02.040 --> 00:29:04.751\nAdam we do thank you for\ngetting us this far,\n\n553\n00:29:04.751 --> 00:29:08.874\nnice overview of what the AD RMS\nsystem does and how we work with it.\n\n554\n00:29:08.874 --> 00:29:13.635\nAnd like I said, really looking forward to\ngetting to the nuts and bolts of that, but\n\n555\n00:29:13.635 --> 00:29:17.857\nlike you said it is time for us to sign\noff from this episode, so come back for\n\n556\n00:29:17.857 --> 00:29:21.840\nPart 2 and maybe 3 or 4 and\n5 who knows Who knows where we're end up.\n\n557\n00:29:21.840 --> 00:29:23.190\n&gt;&gt; Master mega episodes.\n\n558\n00:29:23.190 --> 00:29:26.560\n&gt;&gt; We're gonna top that, we're gonna\ngo with the mega master mega episode.\n\n559\n00:29:26.560 --> 00:29:28.070\n&gt;&gt; Wow.\n&gt;&gt; So it'll be a lot of fun.\n\n560\n00:29:28.070 --> 00:29:28.710\nJoin us then.\n\n561\n00:29:28.710 --> 00:29:32.480\nUntil then, signing off for ITProTV,\nI've been your host Daniel Lowrie.\n\n562\n00:29:32.480 --> 00:29:33.140\n&gt;&gt; I'm Adam Gordon.\n\n563\n00:29:33.140 --> 00:29:34.671\n&gt;&gt; And we'll see you next time.\n\n564\n00:29:34.671 --> 00:29:41.650\n[MUSIC]\n\n565\n00:29:41.650 --> 00:29:44.437\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213223034"
        },
        {
          "description": "In this episode, Daniel and Adam overview the concepts and components for implementing Rights Management. They pick back up by exploring the steps for planning and implementing an AD-RMS Cluster. Then, they look at configuring High Availability(HA) and Sizing.",
          "length": "1886",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-2-implementing_rights_management_pt2-041317-PGM.00_00_11_27.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-2-implementing_rights_management_pt2-041317-PGM.00_00_11_27.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-2-implementing_rights_management_pt2-041317-PGM.00_00_11_27.Still001-sm.jpg",
          "title": "Implementing Rights Management Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:03.529\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:03.529 --> 00:00:05.856\n[CROSSTALK]\n\n3\n00:00:05.856 --> 00:00:08.179\n[MUSIC]\n\n4\n00:00:08.179 --> 00:00:12.173\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.173 --> 00:00:12.776\n&gt;&gt; All right,\n\n6\n00:00:12.776 --> 00:00:16.342\ngreetings everyone and welcome to\nanother great episode of ITProTV.\n\n7\n00:00:16.342 --> 00:00:19.723\nI'm your host Daniel Lowrie and\nin today's episode,\n\n8\n00:00:19.723 --> 00:00:22.900\nwe are back with more\nof our 70-414 content.\n\n9\n00:00:22.900 --> 00:00:26.880\nAnd of course joining us in the studio\nagain Is a person who not only can bathe\n\n10\n00:00:26.880 --> 00:00:30.260\npuppies like no one's business, but\nhe knows a lot about RMS as well.\n\n11\n00:00:30.260 --> 00:00:31.710\nThat's our good friend, Mr Adam Gordon.\n\n12\n00:00:31.710 --> 00:00:32.570\nAdam, welcome back, man.\n\n13\n00:00:32.570 --> 00:00:33.100\nHow's it going?\n\n14\n00:00:33.100 --> 00:00:34.890\n&gt;&gt; Puppies and RMS, wow.\n\n15\n00:00:34.890 --> 00:00:37.290\nThere's a combination you\ndon't hear about very often.\n\n16\n00:00:37.290 --> 00:00:40.030\nIt is going well, hopefully,\nit goes well for you also.\n\n17\n00:00:40.030 --> 00:00:44.084\nWe are in part two of our ongoing\nconversation about AD RMS,\n\n18\n00:00:44.084 --> 00:00:48.556\nthe rights management solution,\nServer 12, 12R2, etc.\n\n19\n00:00:48.556 --> 00:00:52.463\nWe laid out the foundation, elements\nof discussion, kinda the overview and\n\n20\n00:00:52.463 --> 00:00:54.327\narchitecture thought process, and\n\n21\n00:00:54.327 --> 00:00:57.890\nthe programmatic steps involved in\nhow RMS works in our last episode.\n\n22\n00:00:57.890 --> 00:01:00.410\nIf you haven't seen that,\nit may be a good jumping-in point for\n\n23\n00:01:00.410 --> 00:01:02.053\nyou before we delve a little deeper here.\n\n24\n00:01:02.053 --> 00:01:05.715\nWe're gonna start talking about clusters,\nhow we build them out,\n\n25\n00:01:05.715 --> 00:01:09.650\nwhat the RMS root cluster is,\nwhat the licensing only cluster is?\n\n26\n00:01:09.650 --> 00:01:12.300\nRemind yourselves of some of that\nterminology and go a little bit deeper.\n\n27\n00:01:12.300 --> 00:01:15.630\nSo, when we start building and\nplanning for RMS clusters,\n\n28\n00:01:15.630 --> 00:01:18.250\nwe have to think about what we're\ngonna do, how we're gonna do it.\n\n29\n00:01:19.260 --> 00:01:23.640\nWe call a cluster, a cluster in AD RMS and\nrefer to it that way but\n\n30\n00:01:23.640 --> 00:01:26.550\nit's defined a little bit different\nthan a traditional cluster.\n\n31\n00:01:26.550 --> 00:01:30.810\nWhen we think of the concept of a cluster\nwe often think of high availability\n\n32\n00:01:30.810 --> 00:01:35.875\nfailover scenarios, maybe databases that\nare running in a clustered environment so\n\n33\n00:01:35.875 --> 00:01:37.595\nthat way, if something goes wrong,\n\n34\n00:01:37.595 --> 00:01:40.435\nwe have more than one instance\nthat can service the need.\n\n35\n00:01:40.435 --> 00:01:44.192\nThe simplest form of a cluster\nin AD RMS is a single server.\n\n36\n00:01:44.192 --> 00:01:48.627\nSo, while we use the terminology, it's\nnot exactly the traditional mechanism or\n\n37\n00:01:48.627 --> 00:01:51.232\ndefinition that we would often consider.\n\n38\n00:01:51.232 --> 00:01:52.012\nAlthough technically,\n\n39\n00:01:52.012 --> 00:01:57.792\nclusters can be created using a single\nserver as the initial participant but\n\n40\n00:01:57.792 --> 00:02:01.472\nyou don't have any fault tolerance, high\navailability, survivability, capabilities.\n\n41\n00:02:01.472 --> 00:02:05.190\nYou have a single instance that's running\nand although we label it that way,\n\n42\n00:02:05.190 --> 00:02:08.240\ndoesn't really traditionally fill\nthe role of a classic cluster.\n\n43\n00:02:08.240 --> 00:02:09.530\nSo just keep that in mind.\n\n44\n00:02:09.530 --> 00:02:11.250\nBut if we do build out complexity,\n\n45\n00:02:11.250 --> 00:02:15.730\nwe simply can figure multiple servers\ninto what we call the cluster container,\n\n46\n00:02:15.730 --> 00:02:20.060\nthe administrative element that we use for\nmanagement.\n\n47\n00:02:20.060 --> 00:02:23.930\nThe trick there is we need a shared URL\nthat they all are accessed through.\n\n48\n00:02:23.930 --> 00:02:27.990\nSo you have a common shared frontend URL\nthat will load balance out to the various\n\n49\n00:02:27.990 --> 00:02:31.070\nmembers of the quote unquote\ncluster behind the scenes.\n\n50\n00:02:31.070 --> 00:02:32.420\nSo just be aware of that.\n\n51\n00:02:32.420 --> 00:02:35.630\nWhen we set up our first AD RMS server,\nin the forest,\n\n52\n00:02:35.630 --> 00:02:39.930\nremember these are forest wide solutions,\nmade the point last time in our prior\n\n53\n00:02:39.930 --> 00:02:45.780\nepisode that while we install the AD RMS\nsolution, it is one cluster per forest.\n\n54\n00:02:45.780 --> 00:02:49.200\nWe have multiple forests then we're\ntalking about multiple clusters but,\n\n55\n00:02:49.200 --> 00:02:53.355\nwe have a single cluster per forest\nservices all the needs of all the domains\n\n56\n00:02:53.355 --> 00:02:55.990\nand/or the associated tree namespaces.\n\n57\n00:02:55.990 --> 00:02:56.801\nYou know what would be fun sometime?\n\n58\n00:02:56.801 --> 00:02:58.056\n&gt;&gt; Mm-hm.\n\n59\n00:02:58.056 --> 00:03:00.545\n&gt;&gt; This is our random aside, by the way.\n\n60\n00:03:00.545 --> 00:03:02.155\nYou know what would be fun?\n\n61\n00:03:02.155 --> 00:03:02.695\n&gt;&gt; Hit me.\n&gt;&gt; Of course,\n\n62\n00:03:02.695 --> 00:03:03.475\nyou don't know what would be fun.\n\n63\n00:03:03.475 --> 00:03:04.965\nIf you knew,\nyou'd already have answered me.\n\n64\n00:03:04.965 --> 00:03:08.850\nSo it would be fun to go ahead and-\n&gt;&gt; I assumed it was rhetorical.\n\n65\n00:03:08.850 --> 00:03:10.264\n[LAUGH]\n&gt;&gt; It was, but I just, you never know,\n\n66\n00:03:10.264 --> 00:03:12.025\nyou always wanna make sure.\n\n67\n00:03:12.025 --> 00:03:14.445\nSo, it would be fun sometime,\nwe haven't done this in a while.\n\n68\n00:03:14.445 --> 00:03:18.185\nWe haven't actually diagrammed\nanything out and used the diagram and\n\n69\n00:03:18.185 --> 00:03:19.445\nactually use Bob and Alice.\n\n70\n00:03:19.445 --> 00:03:20.301\nBut you know what?\n\n71\n00:03:20.301 --> 00:03:22.740\n&gt;&gt; It would be cool if we invited Bob and\nAlice to come back.\n\n72\n00:03:22.740 --> 00:03:27.729\nAnd actually help us diagram out, the\nwhole concept of the forest, the tree and\n\n73\n00:03:27.729 --> 00:03:29.229\nthe domain namespace.\n\n74\n00:03:29.229 --> 00:03:32.457\nAnd the reason I mention that,\nnot because we're gonna do that now,\n\n75\n00:03:32.457 --> 00:03:35.629\nbut because I think it's an important\npoint contextually for you,\n\n76\n00:03:35.629 --> 00:03:39.583\nboth around this material overall that\nwe're talking about, to really understand\n\n77\n00:03:39.583 --> 00:03:42.725\nthe reason why we have a single\nforest wide capability for the RMS.\n\n78\n00:03:42.725 --> 00:03:45.630\nYou're gonna help me explain\nthis idea in just a second.\n\n79\n00:03:45.630 --> 00:03:48.560\nBut also,\nbecause I find when I talk to students and\n\n80\n00:03:48.560 --> 00:03:50.610\nI talk to customers in the real world,\n\n81\n00:03:50.610 --> 00:03:53.900\nquite a bit, that people don't always\nunderstand the distinctions between those.\n\n82\n00:03:53.900 --> 00:03:56.693\nI don't know if you get that a lot\nsometimes when you're either perhaps at\n\n83\n00:03:56.693 --> 00:03:57.964\nwork you were talking to people.\n\n84\n00:03:57.964 --> 00:04:00.449\nYou share with me some\nhumdinger of a story.\n\n85\n00:04:00.449 --> 00:04:01.145\n&gt;&gt; Yeah, yeah.\n\n86\n00:04:01.145 --> 00:04:04.398\n&gt;&gt; There have been some humdingers of\nstories over the time we've been together\n\n87\n00:04:04.398 --> 00:04:06.100\nof various things that have occurred and\n\n88\n00:04:06.100 --> 00:04:08.740\nthe lack of common sense that\nresults as an indicator of that.\n\n89\n00:04:08.740 --> 00:04:11.530\nBut, I find that people\nsometimes are confused, or\n\n90\n00:04:11.530 --> 00:04:16.030\nreally just don't necessarily get\nthe distinctions between the forest,\n\n91\n00:04:16.030 --> 00:04:21.060\nbetween the tree, and or trees, multiple\ndistinct namespaces within the common\n\n92\n00:04:21.060 --> 00:04:26.560\nschema of the Active Directory overall\nwhich was the forest, and the domains.\n\n93\n00:04:26.560 --> 00:04:29.793\nPerhaps parent, child, subdirectory or\nsubdomains as we go down.\n\n94\n00:04:29.793 --> 00:04:33.221\nAnd I think it's just always important\nto point that out, and talk about that,\n\n95\n00:04:33.221 --> 00:04:36.750\nbecause the forest is the broadest level,\nor highest level container.\n\n96\n00:04:36.750 --> 00:04:38.850\nAnd it helps us to\nunderstand the structure for\n\n97\n00:04:38.850 --> 00:04:42.570\ndata management attributes,\nobjects, etc., at the schema level.\n\n98\n00:04:42.570 --> 00:04:43.390\nIt's also the broadest\n\n99\n00:04:43.390 --> 00:04:46.170\nboundary of permissions associated\nwith Active Directory Management.\n\n100\n00:04:46.170 --> 00:04:48.290\nSo, I just think it's always\nimportant to point that out,\n\n101\n00:04:48.290 --> 00:04:49.800\nbut people tend to be confused about that.\n\n102\n00:04:49.800 --> 00:04:52.750\n&gt;&gt; You know the problem is that,\nthey can't see the forest for the trees.\n\n103\n00:04:52.750 --> 00:04:55.635\n[LAUGH]\n&gt;&gt; That was a good one.\n\n104\n00:04:55.635 --> 00:04:56.716\nThat was a good one there.\n\n105\n00:04:56.716 --> 00:04:57.576\n&gt;&gt; We'd be here all week.\n\n106\n00:04:57.576 --> 00:04:59.170\n[LAUGH]\n&gt;&gt; We need that rib shot.\n\n107\n00:04:59.170 --> 00:05:00.944\n&gt;&gt; I've got put that on my computer.\n\n108\n00:05:00.944 --> 00:05:02.846\n[LAUGH]\n&gt;&gt; All right, so just keep that in mind,\n\n109\n00:05:02.846 --> 00:05:05.770\nwhen we're talking about the cluster\nbeing at the forest level.\n\n110\n00:05:05.770 --> 00:05:09.020\nReason I just took us off into\nthat cul-de-sac of thought for\n\n111\n00:05:09.020 --> 00:05:10.100\na moment is that,\n\n112\n00:05:10.100 --> 00:05:14.010\nit is important for you to have a picture\nin your head of what we're talking about.\n\n113\n00:05:14.010 --> 00:05:18.090\nWe often define this idea as\na rather large circle encompassing\n\n114\n00:05:18.090 --> 00:05:21.940\nour individual tree base namespaces,\nas Daniel was just suggesting.\n\n115\n00:05:21.940 --> 00:05:24.670\nAnd then the domains\nwithin those namespaces.\n\n116\n00:05:24.670 --> 00:05:26.570\nAnd that outer boundary is the forest.\n\n117\n00:05:26.570 --> 00:05:30.060\nWe have groups that exist at the forest\nlevel for administrative purposes.\n\n118\n00:05:30.060 --> 00:05:32.160\nLike enterprise admins, for instance,\n\n119\n00:05:32.160 --> 00:05:36.200\nschema, administrators of schema\nmaster role exists there.\n\n120\n00:05:36.200 --> 00:05:39.840\nThere's various activities and things\nthat we engage in the Active Directory\n\n121\n00:05:39.840 --> 00:05:42.020\nthat are pegged to the forest level.\n\n122\n00:05:42.020 --> 00:05:46.050\nWe wanna make sure we understand that,\nand the cluster exists at that level and\n\n123\n00:05:46.050 --> 00:05:47.670\ncovers the entire namespace.\n\n124\n00:05:47.670 --> 00:05:48.725\nSo, just be aware of that.\n\n125\n00:05:48.725 --> 00:05:50.310\nWe'll have more to say about that.\n\n126\n00:05:50.310 --> 00:05:53.480\nWe'll come back to that a little bit later\nwhen we deal with decommissioning and\n\n127\n00:05:53.480 --> 00:05:57.200\nwe deal with some of the things associated\nwith maintenance of the AD RMS cluster.\n\n128\n00:05:57.200 --> 00:06:00.180\nBecause we have to make sure we\nunderstand how to recover one\n\n129\n00:06:00.180 --> 00:06:01.580\nshould we have a failure.\n\n130\n00:06:01.580 --> 00:06:03.970\nWe may have to deal with\nthe Active Directory and\n\n131\n00:06:03.970 --> 00:06:07.540\nsome of the references to these\nsystems in the AD at that level.\n\n132\n00:06:07.540 --> 00:06:10.880\nSo we'll talk more about that coming up\nbut, just to note there, just to make sure\n\n133\n00:06:10.880 --> 00:06:14.540\nyou're thinking about that and\nyou have a sense of that as we go through.\n\n134\n00:06:14.540 --> 00:06:16.210\nSo, keep in mind we could scale that out.\n\n135\n00:06:17.300 --> 00:06:18.710\nTo talk to clusters as we said,\n\n136\n00:06:18.710 --> 00:06:22.740\nwe have a root certification cluster,\nthat is the traditional cluster we create.\n\n137\n00:06:22.740 --> 00:06:25.240\nFirst AD RMS server\ninstalled with the role\n\n138\n00:06:25.240 --> 00:06:27.880\nbecomes the lead root\nserver in that cluster.\n\n139\n00:06:27.880 --> 00:06:31.153\nWe scale up by adding more clustered\nmembers in behind the scenes.\n\n140\n00:06:31.153 --> 00:06:35.325\nThat handles all of the certification,\nadministration and licensing,\n\n141\n00:06:35.325 --> 00:06:40.080\nkind of all up all n one solution and\nthat's a traditional cluster we go with.\n\n142\n00:06:40.080 --> 00:06:42.630\nWe did talk about the fact\nthere's a secondary cluster\n\n143\n00:06:42.630 --> 00:06:46.190\nlicensing only as what we called it,\nwe could break out the licensing and\n\n144\n00:06:46.190 --> 00:06:49.920\npublishing functions specifically and\ninstall those if necessary, or\n\n145\n00:06:49.920 --> 00:06:53.040\nscale those out by installing\nmultiple servers with that role,\n\n146\n00:06:54.170 --> 00:06:56.010\nwith that subset of roles and services.\n\n147\n00:06:56.010 --> 00:06:58.130\nAnd we can use them, if necessary.\n\n148\n00:06:58.130 --> 00:07:02.660\nThe key difference is, that the publishing\nor the licensing only cluster just\n\n149\n00:07:02.660 --> 00:07:07.430\nlike the publishing, is a subset of\nthe overall root certification cluster.\n\n150\n00:07:07.430 --> 00:07:09.930\nIt relies on the roots\ncertification cluster for\n\n151\n00:07:09.930 --> 00:07:12.460\nall of the additional\nadministration capabilities.\n\n152\n00:07:12.460 --> 00:07:15.310\nSo you're essentially creating\na subdivided hierarchy,\n\n153\n00:07:15.310 --> 00:07:18.440\nwhere you have an administrative level and\nthen you have\n\n154\n00:07:18.440 --> 00:07:21.960\nsome tactical operational stuff that\nhappens down below in the licensing tier.\n\n155\n00:07:21.960 --> 00:07:23.730\nSo, keep that in mind.\n\n156\n00:07:23.730 --> 00:07:26.900\nThe standard best practices,\nroot certification clusters and\n\n157\n00:07:26.900 --> 00:07:28.360\nyou just do everything through there.\n\n158\n00:07:28.360 --> 00:07:31.520\nBut there are reasons why you may\nbreak out the licensing clusters\n\n159\n00:07:31.520 --> 00:07:34.500\nwhen you have specific use cases\naround certain licensing and\n\n160\n00:07:34.500 --> 00:07:38.585\npublishing requirements, you may set up\nlicense only clusters to deal with them.\n\n161\n00:07:38.585 --> 00:07:40.967\nSo just be aware of that,\nthink through the logic of that, so\n\n162\n00:07:40.967 --> 00:07:42.153\nthat hopefully makes sense.\n\n163\n00:07:42.153 --> 00:07:44.450\nThe other thing we'll need to be aware of,\nso\n\n164\n00:07:44.450 --> 00:07:48.564\ncannot load balance across these two\nclusters, meaning, for load balancing,\n\n165\n00:07:48.564 --> 00:07:52.210\nwe can only load balance the root\ncertification or the licensing only.\n\n166\n00:07:52.210 --> 00:07:54.636\nWe can't load balance between them.\n\n167\n00:07:54.636 --> 00:07:57.667\nSo that presents a bit of a challenge\nfrom an architectural standpoint.\n\n168\n00:07:57.667 --> 00:08:00.800\nYet another reason why we\ndon't tend to deploy both, but\n\n169\n00:08:00.800 --> 00:08:03.680\ntend to stick with the root\ncertification cluster.\n\n170\n00:08:03.680 --> 00:08:05.472\nSo it's the little nitty gritty details,\n\n171\n00:08:05.472 --> 00:08:08.095\nright, that we just have to kind\nof ferret out and be aware of.\n\n172\n00:08:08.095 --> 00:08:12.287\nWe talked about the fact that that\nroot certification cluster runs all\n\n173\n00:08:12.287 --> 00:08:16.279\nthe services, is the catch-all\ncontainer for everything we do.\n\n174\n00:08:16.279 --> 00:08:18.778\nOne per forest, just be aware of that.\n\n175\n00:08:18.778 --> 00:08:22.374\nIn terms of high availability and\nconfiguring HA and high availability for\n\n176\n00:08:22.374 --> 00:08:25.925\nthe cluster, we have to think about\nthe various moving parts and pieces.\n\n177\n00:08:25.925 --> 00:08:29.767\nWe have a configuration and licensing\ndatabase, there's logging database,\n\n178\n00:08:29.767 --> 00:08:31.775\nvarious databases that exist.\n\n179\n00:08:31.775 --> 00:08:36.365\nAny of the standard SQL high\navailability solutions,\n\n180\n00:08:36.365 --> 00:08:37.865\ndepending on the version you're running.\n\n181\n00:08:37.865 --> 00:08:43.270\nMaybe database mirroring, journaling, log\nshipping, certainly always on availability\n\n182\n00:08:43.270 --> 00:08:48.300\ngroups which is a newer thought process\nthat's available with SQL 14, SQL 16.\n\n183\n00:08:48.300 --> 00:08:51.440\nSo it depends on what you're doing,\nbecause database mirroring\n\n184\n00:08:51.440 --> 00:08:55.720\nis being replaced, it's deprecated,\nit's going away in future releases.\n\n185\n00:08:55.720 --> 00:08:58.420\nAnd so you wanna know that we\nmay be moving towards some newer\n\n186\n00:08:58.420 --> 00:08:59.650\ntechnologies there.\n\n187\n00:08:59.650 --> 00:09:02.410\nBut create high availability on\nthe database side by backing up your\n\n188\n00:09:02.410 --> 00:09:06.070\ndatabases, making sure you have multiple\ncopies of them, and you can restore them.\n\n189\n00:09:06.070 --> 00:09:07.940\nHowever you do that, it's up to you.\n\n190\n00:09:07.940 --> 00:09:12.270\nBut keep in mind, we do have configuration\ndatabases, we do have logging databases.\n\n191\n00:09:12.270 --> 00:09:14.830\nWe have to make sure we\nsafeguard those on the SQL side.\n\n192\n00:09:14.830 --> 00:09:16.320\nSo we have some options there.\n\n193\n00:09:16.320 --> 00:09:19.460\nIn addition, we have to make sure\nwe safeguard and load balance and\n\n194\n00:09:19.460 --> 00:09:22.905\ntherefore create high availability for\nour DNS infrastructure.\n\n195\n00:09:22.905 --> 00:09:26.983\nBecause DNS is kind of the unsung hero,\nthe unspoken lynch pin,\n\n196\n00:09:26.983 --> 00:09:30.125\nor unspoken force that\nbinds everything together.\n\n197\n00:09:30.125 --> 00:09:31.565\nIt's like the dark energy.\n\n198\n00:09:31.565 --> 00:09:32.165\n&gt;&gt; It really is.\n\n199\n00:09:32.165 --> 00:09:34.405\n&gt;&gt; The dark matter of\nthe Active Directory universe, right?\n\n200\n00:09:34.405 --> 00:09:37.554\nIt's there, we just don't necessarily\nalways think about it and know it, but\n\n201\n00:09:37.554 --> 00:09:39.342\nit is the linkage that\nconnects everything.\n\n202\n00:09:39.342 --> 00:09:44.305\nIf you get rid of DNS, in theory,\nunless you are really set up with some old\n\n203\n00:09:44.305 --> 00:09:48.312\nschool techniques and\ntechnology like local host files and\n\n204\n00:09:48.312 --> 00:09:52.656\nNetBIOS resolution,\nheaven help all of us if that's the case.\n\n205\n00:09:52.656 --> 00:09:57.027\nBut unless you're doing that,\nno DNS, no SRV records, no lookups,\n\n206\n00:09:57.027 --> 00:09:58.710\nno AD authentication.\n\n207\n00:09:58.710 --> 00:10:01.560\nBasically, everything stops working\nbecause you can't find anything.\n\n208\n00:10:01.560 --> 00:10:04.160\nAnd when you do, you can't verify\nthat you got to the right place for\n\n209\n00:10:04.160 --> 00:10:07.040\nthe right reasons, so\nDNS is really important.\n\n210\n00:10:07.040 --> 00:10:09.960\nWe need to make sure that we\nhave either a CNAME record,\n\n211\n00:10:09.960 --> 00:10:13.410\nwe call canonical name record,\nsometimes called an alias record.\n\n212\n00:10:13.410 --> 00:10:17.650\nAnd host record or records, depending\non what we're doing, in the ADR for\n\n213\n00:10:17.650 --> 00:10:20.650\nthe AD RMS cluster.\n\n214\n00:10:20.650 --> 00:10:25.680\nSo that way, we can find,\nas an AD RMS client, those front ends.\n\n215\n00:10:25.680 --> 00:10:30.120\nWe need to find that common URL that\nfronts the cluster for the servers, and\n\n216\n00:10:30.120 --> 00:10:33.040\nthat's how we get in, and\nwe need to be able to look that up in DNS.\n\n217\n00:10:33.040 --> 00:10:37.430\nWe could also use network load balancing,\nso NLB can be deployed as well.\n\n218\n00:10:37.430 --> 00:10:40.140\nThat would typically be a software\nbased NLB solution, but\n\n219\n00:10:40.140 --> 00:10:41.800\nwe can use hardware as well.\n\n220\n00:10:41.800 --> 00:10:44.325\nIt would really just depend on\nthe vendor that we are dealing with.\n\n221\n00:10:44.325 --> 00:10:49.056\nAnd of course would depend on the\nspecificity of that hardware solution in\n\n222\n00:10:49.056 --> 00:10:51.100\nterms of implementation.\n\n223\n00:10:51.100 --> 00:10:54.333\nBut other than the minor adjustments to\nput a piece of hardware up and rack and\n\n224\n00:10:54.333 --> 00:10:56.925\nstack it, essentially a load\nbalancer's a load balancer.\n\n225\n00:10:56.925 --> 00:11:00.713\nWhether it's software or hardware based,\nit round robins or somehow\n\n226\n00:11:00.713 --> 00:11:05.144\nsignifies based on priority ranking or\nsome sort of QoS solution that prioritizes\n\n227\n00:11:05.144 --> 00:11:09.590\none machine over another that we send\ntraffic there in some predetermined order.\n\n228\n00:11:09.590 --> 00:11:11.210\nThat's what a load balancer does, right?\n\n229\n00:11:11.210 --> 00:11:15.790\nKind of the roulette wheel of network\ntraffic, as we spin it around and\n\n230\n00:11:15.790 --> 00:11:18.000\naround around, so keep that in mind.\n\n231\n00:11:18.000 --> 00:11:25.740\nWe also have some specific requirements\nassociated with the deployment of SQL.\n\n232\n00:11:25.740 --> 00:11:28.500\nThese are updated from 2008, 2008 R2.\n\n233\n00:11:28.500 --> 00:11:34.020\nSo if you've been using an ADRMS solution\nthere, you had some prior requirements and\n\n234\n00:11:34.020 --> 00:11:37.580\nslight difference in what SQL would have\nlooked like and how it was configured.\n\n235\n00:11:37.580 --> 00:11:42.120\nStarting with 12, and 12 R2, and\nout into Server 16 going forward,\n\n236\n00:11:42.120 --> 00:11:45.190\nwe have some additional and different\nrequirements for SQL Server access, so\n\n237\n00:11:45.190 --> 00:11:47.480\njust wanna make sure that\nwe're familiar with these.\n\n238\n00:11:47.480 --> 00:11:52.700\nThe installer, the ADRMS installer account\nmust have system admin permissions on or\n\n239\n00:11:52.700 --> 00:11:54.340\nin the SQL Server instance.\n\n240\n00:11:54.340 --> 00:11:59.220\nSo like many of our modern products that\nwe install, the account that is being used\n\n241\n00:11:59.220 --> 00:12:03.020\nto do the install and configuration of\nthe role has to have rights to write and\n\n242\n00:12:03.020 --> 00:12:05.120\ninteract with and see the SQL instance.\n\n243\n00:12:05.120 --> 00:12:07.758\nWrite to it, interact with it,\nbecause there's setup and\n\n244\n00:12:07.758 --> 00:12:10.891\nmanipulation of data involved, so\nyou wanna make sure you have that.\n\n245\n00:12:10.891 --> 00:12:15.652\nThe SQL Server browser service\nis used to be able to find\n\n246\n00:12:15.652 --> 00:12:20.640\nthe ADRMS information binded to SQL,\nlookup in DNS etc.\n\n247\n00:12:20.640 --> 00:12:24.060\nThe client has to be able to, or rather,\n\n248\n00:12:24.060 --> 00:12:27.660\nexcuse me, the server where we're planning\non installing ADRMS has to be able to use\n\n249\n00:12:27.660 --> 00:12:31.480\nthe SQL browser service to be able to get\nback to the SQL instance that we name.\n\n250\n00:12:31.480 --> 00:12:34.360\nSo as a result,\ngotta make sure we have that capability.\n\n251\n00:12:34.360 --> 00:12:37.860\nThat means firewalls have to\nallow SQL traffic back and forth.\n\n252\n00:12:37.860 --> 00:12:41.360\nAnd we have to make sure that we have\naccess to that instance wherever it\n\n253\n00:12:41.360 --> 00:12:42.080\nmay be.\n\n254\n00:12:42.080 --> 00:12:45.865\nWe know the name, we know the information,\nknow the fully qualified domain name,\n\n255\n00:12:45.865 --> 00:12:48.105\nall that kind of stuff,\nso just be aware of that.\n\n256\n00:12:48.105 --> 00:12:52.865\nWe do support named instances starting\nwith SQL Server on SQL Server 2008 R2,\n\n257\n00:12:52.865 --> 00:12:55.425\nand all the way forward.\n\n258\n00:12:55.425 --> 00:13:00.045\nAnd we do support it on the server side,\nstarting with Windows Server 2008 R2,\n\n259\n00:13:00.045 --> 00:13:02.105\nServer 12, 12 R2, 16.\n\n260\n00:13:02.105 --> 00:13:04.635\nSo just make sure you are aware of that.\n\n261\n00:13:04.635 --> 00:13:08.720\nAnd we can use that information\nto connect with no trouble.\n\n262\n00:13:08.720 --> 00:13:11.750\nJust gotta make sure there browser service\nis up and running on the SQL Server, and\n\n263\n00:13:11.750 --> 00:13:13.250\nthat we can access it.\n\n264\n00:13:13.250 --> 00:13:15.540\nAlso, make sure,\nI think already talk about this, right?\n\n265\n00:13:15.540 --> 00:13:18.320\nI mentioned firewall exceptions,\nunderstanding and opening up the ports,\n\n266\n00:13:18.320 --> 00:13:19.870\nso just make sure you know that.\n\n267\n00:13:19.870 --> 00:13:24.010\nCommon port for SQL, do you know, before\nI put you on the spot unnecessarily?\n\n268\n00:13:24.010 --> 00:13:25.126\n&gt;&gt; Man.\n&gt;&gt; We've talked about this in\n\n269\n00:13:25.126 --> 00:13:25.750\nmany episodes.\n\n270\n00:13:25.750 --> 00:13:28.570\nEvery time I ask you, you're like,\nyeah, I don't remember what it is.\n\n271\n00:13:28.570 --> 00:13:29.930\n&gt;&gt; I think it's 1143 or something.\n\n272\n00:13:29.930 --> 00:13:31.384\n&gt;&gt; You'd want to say 1433,\nbut you'd be close.\n\n273\n00:13:31.384 --> 00:13:32.370\n&gt;&gt; 1433.\n\n274\n00:13:32.370 --> 00:13:34.661\n&gt;&gt; All right, so the common SQL port,\nyou were in the ballpark,\n\n275\n00:13:34.661 --> 00:13:36.040\nyou had the 33 part there.\n\n276\n00:13:36.040 --> 00:13:39.345\nSo the common connection point for\nSQL, 1433.\n\n277\n00:13:39.345 --> 00:13:41.950\nJust wanna make sure we are aware of that.\n\n278\n00:13:41.950 --> 00:13:45.889\nWe do sometimes map to non-standard ports\nfor SQL from a security standpoint.\n\n279\n00:13:45.889 --> 00:13:49.440\nSo if we're gonna randomize that traffic,\nwe'd have to deal with the firewall there.\n\n280\n00:13:49.440 --> 00:13:52.435\nSo just make sure you're aware of that.\n\n281\n00:13:52.435 --> 00:13:56.485\nAnd if we're gonna go ahead and\nultimately wanna recover our SQL database,\n\n282\n00:13:56.485 --> 00:14:00.055\nremember, we talked about HA and\njust setup and concerns around that.\n\n283\n00:14:00.055 --> 00:14:03.340\nIf we decide we wanna be able to\nrecover after the fact, meaning if\n\n284\n00:14:03.340 --> 00:14:07.419\nsomething goes wrong we wanna recover our\nSQL instance onto another SQL system.\n\n285\n00:14:07.419 --> 00:14:09.756\nWhich we would most likely wanna do and\nwe'd have to plan for\n\n286\n00:14:09.756 --> 00:14:12.200\nthat ahead of time,\nwhich is why I'm pointing it out to you.\n\n287\n00:14:12.200 --> 00:14:15.440\nIf we're gonna be able to recover\nthat AD RMS set of databases,\n\n288\n00:14:15.440 --> 00:14:19.190\nthe config database in particular, we're\nnot as worried about the logging database,\n\n289\n00:14:19.190 --> 00:14:20.265\nbut the config database.\n\n290\n00:14:20.265 --> 00:14:24.435\nIf we have to do that, we have to\nconfigure the AD RMS databases ahead of\n\n291\n00:14:24.435 --> 00:14:29.196\ntime to use the DNS CNAME or DNS ALIAS\nrecord that refers to the database server.\n\n292\n00:14:29.196 --> 00:14:31.630\nThis is part of the configuration\nas we stand it up.\n\n293\n00:14:31.630 --> 00:14:33.830\nSo wanna make sure we're aware of that.\n\n294\n00:14:33.830 --> 00:14:37.620\nIf we call the database by its proper\nname, that can present a problem,\n\n295\n00:14:37.620 --> 00:14:39.390\nwe have to use an alias to refer to it.\n\n296\n00:14:39.390 --> 00:14:43.000\nWhich just simply means we give the\ninstance a name that we can then use and\n\n297\n00:14:43.000 --> 00:14:45.088\nreference in DNS, right, so\nthat we have a friendly name.\n\n298\n00:14:45.088 --> 00:14:48.490\nIt's I think what we often will\ncommonly refer to that as.\n\n299\n00:14:48.490 --> 00:14:50.074\nAnd that way, we can then go ahead and\n\n300\n00:14:50.074 --> 00:14:52.491\nhave that new instance assume\nthat name and recover it.\n\n301\n00:14:52.491 --> 00:14:56.489\nBecause it will have to be installed back\nto the same named infrastructure, or\n\n302\n00:14:56.489 --> 00:14:59.350\nthe same path and\neverything that we were using before.\n\n303\n00:14:59.350 --> 00:15:00.750\nSo just wanna make sure\nyou're aware of that.\n\n304\n00:15:00.750 --> 00:15:05.030\nLet's talk a bit about ADMS, ADMS, AD RMS.\n\n305\n00:15:05.030 --> 00:15:06.830\nHow about if I just say rights management?\n\n306\n00:15:06.830 --> 00:15:07.640\nThat would be good.\n\n307\n00:15:07.640 --> 00:15:12.360\nLet's talk about rights management sizing,\nhow do we scale these implementations out?\n\n308\n00:15:12.360 --> 00:15:15.320\nThis is something I have a lot of\nconversations with customers about.\n\n309\n00:15:16.500 --> 00:15:21.390\nHow do we know how much is too much on\nthe CPU side from a usage perspective in\n\n310\n00:15:21.390 --> 00:15:24.370\nterms of the number of license\nrequests over a period of time?\n\n311\n00:15:24.370 --> 00:15:27.882\nHow much memory is required so\nthat we can pre-cache certificates and\n\n312\n00:15:27.882 --> 00:15:32.006\npre-cache licensing and publishing\ninformation so we get better performance?\n\n313\n00:15:32.006 --> 00:15:34.860\nAgain, we have some standards there,\nwe'll talk about what those are.\n\n314\n00:15:34.860 --> 00:15:38.610\nAnd a lot of times, when you think\nabout this kind of information,\n\n315\n00:15:38.610 --> 00:15:41.050\nit's really hard to get accurate\ninformation about this stuff.\n\n316\n00:15:41.050 --> 00:15:43.035\nYou read one vendors take on this or\n\n317\n00:15:43.035 --> 00:15:47.558\none configuration recommendation buried\nin a blog or on a website somewhere.\n\n318\n00:15:47.558 --> 00:15:50.775\nAnd you say that looks good,\nsounds authoritative, right?\n\n319\n00:15:50.775 --> 00:15:54.149\nI'll go with that, and\nthen you find out later maybe that was or\n\n320\n00:15:54.149 --> 00:15:55.431\nwasn't the right one.\n\n321\n00:15:55.431 --> 00:15:59.587\nOr now another genius is saying something\nelse and you gotta change your mind and\n\n322\n00:15:59.587 --> 00:16:02.689\nits really hard to know unless\nyou do the testing yourself,\n\n323\n00:16:02.689 --> 00:16:06.140\nunless you actually do the scaling and\nthe stress testing.\n\n324\n00:16:06.140 --> 00:16:10.170\nOr you're consultant that does this all\nthe time and you've got those magic\n\n325\n00:16:10.170 --> 00:16:13.340\nspreadsheets the consultants always\ntalk about, but never share with you.\n\n326\n00:16:13.340 --> 00:16:17.970\nYou know that these tools that we use, or\nwe have that either come from the vendor,\n\n327\n00:16:17.970 --> 00:16:22.035\nor somebody made up and it's passed down,\nit's like tribal knowledge.\n\n328\n00:16:22.035 --> 00:16:26.490\nLike there's a special ceremony,\ndark hoods and candles and chanting.\n\n329\n00:16:26.490 --> 00:16:29.050\nAnd they give you the spreadsheet,\nlike on the platter, and\n\n330\n00:16:29.050 --> 00:16:30.430\nnow you're a member of the club.\n\n331\n00:16:30.430 --> 00:16:34.190\nUnless that happens, right, you just\ndon't know really what's going on.\n\n332\n00:16:34.190 --> 00:16:36.090\nI'm gonna break all those traditions.\n\n333\n00:16:36.090 --> 00:16:37.750\nI'm gonna get rid of all those taboos.\n\n334\n00:16:37.750 --> 00:16:40.630\nI'm gonna tell you all the secrets\nthat they never allow us to tell you,\n\n335\n00:16:40.630 --> 00:16:41.700\nbecause I like you.\n\n336\n00:16:41.700 --> 00:16:44.270\nYou're nice people and\nyou don't talk very much when I'm talking.\n\n337\n00:16:44.270 --> 00:16:45.630\nThat's also very important.\n\n338\n00:16:45.630 --> 00:16:48.320\nLet me actually share some knowledge\nwith you about scalability.\n\n339\n00:16:48.320 --> 00:16:52.280\nThis is actually really important stuff\nbecause well we can kind of shoot\n\n340\n00:16:52.280 --> 00:16:55.200\noff in the dark and just throw a dart\nat the wall at the proverbial moon,\n\n341\n00:16:55.200 --> 00:16:56.480\nsay yeah I think I'm okay.\n\n342\n00:16:56.480 --> 00:17:00.570\nI'm probably scaled well,\nI've got one server, I think I'll be good.\n\n343\n00:17:00.570 --> 00:17:03.250\nThere really are some hard\nfast numbers we play by here.\n\n344\n00:17:03.250 --> 00:17:07.290\nAnd it is important to understand this\nbecause we could overwhelm the server\n\n345\n00:17:07.290 --> 00:17:10.760\nif we allow too many licensing requests\nover too short a period in time.\n\n346\n00:17:10.760 --> 00:17:15.750\nOr we have licenses that are very\ncomplex because a lot of attributes and\n\n347\n00:17:15.750 --> 00:17:17.410\nrequirements are specified.\n\n348\n00:17:17.410 --> 00:17:20.110\nAnd those license files can\nget as big as a megabyte each.\n\n349\n00:17:20.110 --> 00:17:23.490\nAnd if you think about that,\nas you start sending them back and forth,\n\n350\n00:17:23.490 --> 00:17:29.290\na one gig network can get overwhelmed very\nquickly if we're shooting hundreds or\n\n351\n00:17:29.290 --> 00:17:32.390\nthousands of one meg files\ndown it in real time.\n\n352\n00:17:32.390 --> 00:17:34.670\nSo this is the kind of stuff\nwe've gotta think about.\n\n353\n00:17:34.670 --> 00:17:37.070\nSo from a scalability perspective\n\n354\n00:17:37.070 --> 00:17:39.730\nMicrosoft's done a lot of stress testing\nand scale testing on this stuff.\n\n355\n00:17:39.730 --> 00:17:42.130\nYou guys should look these\nnumbers up out there online.\n\n356\n00:17:42.130 --> 00:17:45.130\nBut it's hard to find the exact\nreferences unless you know\n\n357\n00:17:45.130 --> 00:17:47.350\nhow to ask the questions and\nwhat to look for.\n\n358\n00:17:47.350 --> 00:17:51.620\nThe surveys that they've done and the\ntesting they've done show that on average\n\n359\n00:17:51.620 --> 00:17:56.200\na CPU load of 100,000 license\nrequests per hour is gonna be at\n\n360\n00:17:56.200 --> 00:18:01.640\nmaximum load what we would expect per\nserver, per scaled server in the cluster.\n\n361\n00:18:01.640 --> 00:18:04.680\nNow that's running at full capacity,\nreally leaving no room for\n\n362\n00:18:04.680 --> 00:18:06.945\nerror, no room for spikes in usage.\n\n363\n00:18:06.945 --> 00:18:11.060\n100,000 licensing requests an hour,\nthat's a big amount of licensing requests.\n\n364\n00:18:11.060 --> 00:18:14.480\nYou've got to think about the fact\nthat you want a small to medium,\n\n365\n00:18:14.480 --> 00:18:19.660\neven medium to large enterprise network,\nyou've gotta have Thousands of people\n\n366\n00:18:19.660 --> 00:18:22.840\nto make those kind of numbers happen\nduring the course with now, right?\n\n367\n00:18:22.840 --> 00:18:24.890\nWe're not talking about\nsmall networks with you,\n\n368\n00:18:24.890 --> 00:18:28.600\na couple hundred users, you're just\nnever gonna approach that usage\n\n369\n00:18:28.600 --> 00:18:32.270\nunless all you're doing is sitting all day\nand just opening and closing documents.\n\n370\n00:18:32.270 --> 00:18:36.190\nAnd even that, I mean, it's gonna take\na lot of users over a very short amount of\n\n371\n00:18:36.190 --> 00:18:40.018\ntime to do that to the scale that we\ncould actually tip that server over.\n\n372\n00:18:40.018 --> 00:18:44.760\nSo 100,000 license request per\nhour sounds like a lot, and\n\n373\n00:18:44.760 --> 00:18:48.835\nit is, but in large enterprise\nnetworks that are global,\n\n374\n00:18:48.835 --> 00:18:53.030\n100,000 license request per hour,\nis not an unreasonable amount.\n\n375\n00:18:53.030 --> 00:18:56.238\nEspecially if you're dealing with\na system that is licensing 100s or\n\n376\n00:18:56.238 --> 00:18:59.675\n1,000s of pieces of data against 100s or\n\n377\n00:18:59.675 --> 00:19:04.280\n1,000s of users across geographies,\nthan it can scale very quickly.\n\n378\n00:19:04.280 --> 00:19:06.760\nSo what we recommend is\nyou cut that in half and\n\n379\n00:19:06.760 --> 00:19:11.890\nsay max peak load per server\nacross a cluster or per server and\n\n380\n00:19:11.890 --> 00:19:16.660\nthen the tipping point to scale to start\nclustering, adding more servers into\n\n381\n00:19:16.660 --> 00:19:21.090\nthe root certification server,\nwould be 50,000 requests per hour.\n\n382\n00:19:21.090 --> 00:19:23.760\nSo if you're at roughly\nhalf that max load,\n\n383\n00:19:23.760 --> 00:19:25.670\nthat's where we'd say the break point is.\n\n384\n00:19:25.670 --> 00:19:28.230\nBecause that gives you\nthe ability to accept and\n\n385\n00:19:28.230 --> 00:19:31.820\nto absorb usage spikes as things go up and\ndown, right?\n\n386\n00:19:31.820 --> 00:19:32.780\nAnd that's important.\n\n387\n00:19:32.780 --> 00:19:36.430\nBecause you're gonna have usage spikes\nin the system as you're using it.\n\n388\n00:19:36.430 --> 00:19:38.760\nYou gotta be aware of that and\nthink about that.\n\n389\n00:19:38.760 --> 00:19:40.450\nSo roughly 50,000 requests per hour.\n\n390\n00:19:40.450 --> 00:19:41.740\nNow how do you measure that?\n\n391\n00:19:41.740 --> 00:19:42.460\nThat's the big question.\n\n392\n00:19:42.460 --> 00:19:43.900\nEverybody says okay, great.\n\n393\n00:19:43.900 --> 00:19:46.980\nYou told me a magic number, I could\nprogram that in and think about it.\n\n394\n00:19:46.980 --> 00:19:48.450\nBut how do I really know?\n\n395\n00:19:48.450 --> 00:19:49.850\nWell you could stand there with a clicker.\n\n396\n00:19:49.850 --> 00:19:52.240\nRemember those little, you could stand\nthere right and do one of these.\n\n397\n00:19:52.240 --> 00:19:54.730\nBut that obviously doesn't really,\nit's not very valuable to do that.\n\n398\n00:19:54.730 --> 00:19:56.420\nYou're gonna miss a whole\nbunch of requests.\n\n399\n00:19:56.420 --> 00:19:58.970\nWhat you really are doing is\nlooking at performance monitoring.\n\n400\n00:19:58.970 --> 00:20:01.740\nYou're looking at statistics\nfrom the AD RMS solution, and\n\n401\n00:20:01.740 --> 00:20:06.510\nthe console we can get this kind of\ndata by doing monitoring on the system.\n\n402\n00:20:06.510 --> 00:20:10.690\nAnd then we pull back aggregate number\nof request items we see over time,\n\n403\n00:20:10.690 --> 00:20:14.040\nhow much is too much and\nwe look at that traffic for now.\n\n404\n00:20:14.040 --> 00:20:16.340\nDo we monitor this for\none hour and say okay, 50,000.\n\n405\n00:20:16.340 --> 00:20:19.440\nI'm good and I'm done, I never look again.\n\n406\n00:20:19.440 --> 00:20:20.642\nThat will not be the smart money, right?\n\n407\n00:20:20.642 --> 00:20:23.021\nThat will not be the right\nway to do what you do,\n\n408\n00:20:23.021 --> 00:20:26.315\nwhat we say is a methodology in\ngeneral on averages of base line,\n\n409\n00:20:26.315 --> 00:20:28.950\nis the best practice regards\nwhat the monetary is.\n\n410\n00:20:28.950 --> 00:20:32.136\nYou have to monitor overly\ntraditional usage cycle,\n\n411\n00:20:32.136 --> 00:20:36.169\nin most cases we say monitor for\na business week meaning you know five\n\n412\n00:20:36.169 --> 00:20:40.914\nbusiness days traditionally if you're\nstudy Monday to Friday you know weekend\n\n413\n00:20:40.914 --> 00:20:44.990\nwhat kind of business if you're\nat 24 by 7 365 shop fine.\n\n414\n00:20:44.990 --> 00:20:46.940\nMonitor for seven full days.\n\n415\n00:20:46.940 --> 00:20:51.550\nBut what you want is a complete cycle of\nan average business week of usage and\n\n416\n00:20:51.550 --> 00:20:52.560\nlet's be clear about this.\n\n417\n00:20:52.560 --> 00:20:56.870\nDon't do the end of the month versus the\nmiddle of the month kind of thing, because\n\n418\n00:20:56.870 --> 00:21:01.050\nif you're in a normal business, there are\nups and down, peaks and valleys for usage.\n\n419\n00:21:01.050 --> 00:21:04.810\nThe end of the month tends to be\na busier time in most businesses for\n\n420\n00:21:04.810 --> 00:21:06.170\na variety of reasons.\n\n421\n00:21:06.170 --> 00:21:08.230\nAnd it maybe worthwhile to do a sample,\n\n422\n00:21:08.230 --> 00:21:11.020\nmeasure during that time to see\nwhat peak usage may look like.\n\n423\n00:21:11.020 --> 00:21:14.940\nBut you want an average of usage\naggregated over a long period of time.\n\n424\n00:21:14.940 --> 00:21:19.070\nAnd so we may monitor for as long as\na month to figure this out to aggregate\n\n425\n00:21:19.070 --> 00:21:23.180\nacross all the different ups and downs but\ntraditionally, at least one business week.\n\n426\n00:21:23.180 --> 00:21:25.730\nSo five days, you aggregate all the data.\n\n427\n00:21:25.730 --> 00:21:28.810\nYou look at the average and that's the\nnumber you start to measure against, and\n\n428\n00:21:28.810 --> 00:21:29.730\nthat's how we would tell.\n\n429\n00:21:29.730 --> 00:21:32.910\nSo if you need that methodology,\nthat thought process,\n\n430\n00:21:32.910 --> 00:21:35.600\nthat's what we're looking\nat on the processor side.\n\n431\n00:21:35.600 --> 00:21:37.260\nI mentioned RAM.\n\n432\n00:21:37.260 --> 00:21:42.250\nRAM is used for caching certificates,\nstoring requests during processing,\n\n433\n00:21:42.250 --> 00:21:44.930\nmanaging the queuing for\noutbound requests.\n\n434\n00:21:44.930 --> 00:21:48.390\nWe could pre-load all that, or\nthe majority of it, into RAM.\n\n435\n00:21:48.390 --> 00:21:52.260\nAnd as a result, we could speed up\ntremendously, the opportunity for\n\n436\n00:21:52.260 --> 00:21:55.510\nthe system to engage and react,\nso we can actually offset\n\n437\n00:21:55.510 --> 00:21:59.350\nthe inability of the CPU to do certain\nthings quickly by precaching in RAM.\n\n438\n00:21:59.350 --> 00:22:02.660\nAnd this is an important compensation\nmechanism that we use for\n\n439\n00:22:02.660 --> 00:22:03.660\nall sorts of stuff.\n\n440\n00:22:03.660 --> 00:22:07.850\nDatabases are traditionally\nloaded into memory on boot up and\n\n441\n00:22:07.850 --> 00:22:11.090\non start, so that way the database\nis more responsive and\n\n442\n00:22:11.090 --> 00:22:14.220\nquicker when we have to do\nlarge-scale data processing.\n\n443\n00:22:14.220 --> 00:22:17.460\nSo we wanna think about the logic\nof having RAM available.\n\n444\n00:22:17.460 --> 00:22:22.168\nAgain we go back or we think about what\ncoping under peak load may look like,\n\n445\n00:22:22.168 --> 00:22:26.878\nthe numbers tell us that 2 gigs of RAM\ntraditionally is plenty of memory for\n\n446\n00:22:26.878 --> 00:22:28.474\ndoing this kind of work.\n\n447\n00:22:28.474 --> 00:22:31.636\nBut remember this is dedicated\nmemory meaning we don't want\n\n448\n00:22:31.636 --> 00:22:35.570\nto run the server totally with\neverything else going on on only 2 gigs.\n\n449\n00:22:35.570 --> 00:22:37.340\nWe want 2 gigs out of the 8 or 9 or 12,\n\n450\n00:22:37.340 --> 00:22:42.030\nyou never have 9 that would be\na ridiculous crazy configuration,\n\n451\n00:22:42.030 --> 00:22:43.970\nI mean you could but it wouldn't work so\nlet me put it that way.\n\n452\n00:22:43.970 --> 00:22:46.710\nSo scratch that comment because\nthat was not appropriate.\n\n453\n00:22:46.710 --> 00:22:51.116\nBut you wanna have, you know either 2\ngigs, 4 gigs, 8 gigs, 16 gigs, 32 gigs,\n\n454\n00:22:51.116 --> 00:22:53.620\nwhatever your baseline\nmemory is in the server and\n\n455\n00:22:53.620 --> 00:22:56.030\nremember this could be\nvirtualized by the way.\n\n456\n00:22:56.030 --> 00:22:57.160\nSo, whether it's physical or\n\n457\n00:22:57.160 --> 00:23:02.040\nvirtual, totally irrelevant,\nwe're still assigning that amount of RAM.\n\n458\n00:23:02.040 --> 00:23:06.420\nWe wanna dedicate a portion of\nthat overall RAM just to this.\n\n459\n00:23:06.420 --> 00:23:10.280\nSo if we say two gigs just for\npre-caching or pre-loading and\n\n460\n00:23:10.280 --> 00:23:14.700\ncaching the ideas out of an 8 gig\nsystem overall, you're gonna set\n\n461\n00:23:14.700 --> 00:23:19.730\ntwo of those gigs aside essentially,\nleveraging them just for AD RMS.\n\n462\n00:23:19.730 --> 00:23:23.230\nSo that means that you have to allocate\nand understand how to allocate memory for\n\n463\n00:23:23.230 --> 00:23:24.560\nthe operating system, for\n\n464\n00:23:24.560 --> 00:23:28.810\nall the other app workloads that are there\nplus the service workloads for ADRMS.\n\n465\n00:23:28.810 --> 00:23:30.420\nSo 2 gigs is usually enough.\n\n466\n00:23:30.420 --> 00:23:34.530\nIf we have a very high number of\nprocesses in this particular box,\n\n467\n00:23:34.530 --> 00:23:37.420\nthen we may scale up to 4\ngigs on the caching side.\n\n468\n00:23:37.420 --> 00:23:39.950\nIt really just depends on the number\nof processors that we're running.\n\n469\n00:23:39.950 --> 00:23:44.503\nThe more processors we have, CPUs, right,\nthe more processors, the more memory we\n\n470\n00:23:44.503 --> 00:23:48.697\nneed to be able to cache all the content\nthe processors will be operating with.\n\n471\n00:23:48.697 --> 00:23:50.659\nSo wanna keep that in mind as well.\n\n472\n00:23:50.659 --> 00:23:53.600\nWe have to make sure we're feeding\nthat machine from both sides,\n\n473\n00:23:53.600 --> 00:23:55.745\ngiving it every opportunity\nto be successful.\n\n474\n00:23:55.745 --> 00:23:59.489\nIn terms of storage,\nwe wanna have pretty simple on this end,\n\n475\n00:23:59.489 --> 00:24:02.590\nwe're not hitting that\nlocal drive very hard.\n\n476\n00:24:02.590 --> 00:24:06.110\nBecause remember, traditionally SQL\ndatabase is somewhere outside on\n\n477\n00:24:06.110 --> 00:24:09.360\na separate instance away\nfrom our ADRMS server.\n\n478\n00:24:09.360 --> 00:24:11.110\nWe're servicing that over the network.\n\n479\n00:24:11.110 --> 00:24:15.320\nBandwidth is gonna be a lot more important\nin other words than local drive capacity.\n\n480\n00:24:15.320 --> 00:24:19.290\nWe do some stuff on the local drive,\nso there is a need to just generically\n\n481\n00:24:19.290 --> 00:24:23.990\nmake sure those drives are dealt with and\nsecured, and also performance optimized.\n\n482\n00:24:23.990 --> 00:24:26.540\nBut, we're not hosting\nthe production database for\n\n483\n00:24:26.540 --> 00:24:29.180\nconfiguration management in\nlogging there traditionally.\n\n484\n00:24:29.180 --> 00:24:31.570\nSo as a result, at least not on\n\n485\n00:24:31.570 --> 00:24:34.220\nI should say if we we're going into\nproduction we shouldn't be doing that.\n\n486\n00:24:34.220 --> 00:24:36.160\nIf we're setting this up\nin a testing environment,\n\n487\n00:24:36.160 --> 00:24:39.500\nwe're doing kind of an all in one\nsolution, putting everything on one box.\n\n488\n00:24:39.500 --> 00:24:41.700\nThen yeah,\nthe SQL database may be sitting there,\n\n489\n00:24:41.700 --> 00:24:44.060\nyou may be hammering a way out\nof that on that hard drive.\n\n490\n00:24:44.060 --> 00:24:47.170\nThat's gonna change the mathematics and\nthe conversation here a little bit.\n\n491\n00:24:47.170 --> 00:24:50.470\nBut, in production that\ntraditionally is a scaled solution,\n\n492\n00:24:50.470 --> 00:24:52.740\nthat database is sitting\noff to the side somewhere.\n\n493\n00:24:52.740 --> 00:24:54.460\nSo here's our random aside for\nthis episode.\n\n494\n00:24:54.460 --> 00:24:57.220\nYou ever wonder where your arm goes\nwhen you do this in the monitor?\n\n495\n00:24:57.220 --> 00:25:00.970\nIs there like an alternate universe where\nI'm shaking hands with somebody and\n\n496\n00:25:00.970 --> 00:25:02.040\nyou don't see them?\n\n497\n00:25:02.040 --> 00:25:05.090\n&gt;&gt; Something else could be happening\nthat you wouldn't wanna be aware of.\n\n498\n00:25:05.090 --> 00:25:06.785\nIt's a good that you don't know though.\n\n499\n00:25:06.785 --> 00:25:09.085\n&gt;&gt; It is probably,\nI could be blowing somebody's nose,\n\n500\n00:25:09.085 --> 00:25:12.235\nI could be scratching my head but\nfrom an alternative angle, you can't see.\n\n501\n00:25:12.235 --> 00:25:15.605\n&gt;&gt; You could be like the official\ndog butt wiper of that universe.\n\n502\n00:25:15.605 --> 00:25:16.795\n&gt;&gt; I could be or puppy bather.\n\n503\n00:25:16.795 --> 00:25:18.725\n&gt;&gt; Who went there, here you go,\nyou're bathing puppies.\n\n504\n00:25:18.725 --> 00:25:19.265\n&gt;&gt; Puppy bather.\n\n505\n00:25:19.265 --> 00:25:23.845\n&gt;&gt; See, you've jumped dimensions now, not\nonly the best puppy bather in this one but\n\n506\n00:25:23.845 --> 00:25:27.285\nin the next-\n&gt;&gt; But across the device, I often wonder\n\n507\n00:25:27.285 --> 00:25:31.350\nwhen I'm sitting there, I did something\nlike this, and half my arm disappears.\n\n508\n00:25:31.350 --> 00:25:33.190\nI know it's attached to my\nbody cuz I can feel it,\n\n509\n00:25:33.190 --> 00:25:35.300\nbut you just never know where it is.\n\n510\n00:25:35.300 --> 00:25:37.990\nIt would be great if it\nshowed up like over there.\n\n511\n00:25:37.990 --> 00:25:39.840\n&gt;&gt; I know this big geek out right here.\n\n512\n00:25:39.840 --> 00:25:43.390\nIt's the, what do they call it?\n\n513\n00:25:43.390 --> 00:25:46.820\nIt was in Stranger Things,\nthe Upside Down.\n\n514\n00:25:46.820 --> 00:25:47.330\n&gt;&gt; The Upside Down.\n\n515\n00:25:47.330 --> 00:25:47.830\n&gt;&gt; The Upside Down.\n\n516\n00:25:47.830 --> 00:25:48.370\n&gt;&gt; That would be, yes.\n\n517\n00:25:48.370 --> 00:25:50.040\n&gt;&gt; Yeah.\n&gt;&gt; That's right, yes, that would be cool.\n\n518\n00:25:50.040 --> 00:25:51.430\n&gt;&gt; Yeah.\n&gt;&gt; So here we are random aside for\n\n519\n00:25:51.430 --> 00:25:52.450\nthis episode, awesome.\n\n520\n00:25:52.450 --> 00:25:54.600\nAll right, so\nback to what we were talking about.\n\n521\n00:25:54.600 --> 00:25:58.550\nSo with storage, just a simple two-drive\nRAID array, nothing too fancy there.\n\n522\n00:25:58.550 --> 00:26:02.260\nJust want to make sure that we have\nthe ability to be able to deal with either\n\n523\n00:26:02.260 --> 00:26:07.770\nmirroring or\nmirroring plus controller array as well.\n\n524\n00:26:07.770 --> 00:26:08.410\nSo duplex it.\n\n525\n00:26:08.410 --> 00:26:09.880\nThat's what I was trying to say.\n\n526\n00:26:09.880 --> 00:26:12.880\nWe wanna do, typically,\na drive raid, mirror and\n\n527\n00:26:12.880 --> 00:26:16.690\nmaybe a duplex on the controllers just\nto make sure we have survivability and\n\n528\n00:26:16.690 --> 00:26:18.880\nviability of those drives,\nbut nothing fancy.\n\n529\n00:26:18.880 --> 00:26:21.780\nIt's really primarily just\nto ensure the ADR and\n\n530\n00:26:21.780 --> 00:26:26.760\nthe server itself stays up and running to\nprovide administrative capabilities not\n\n531\n00:26:26.760 --> 00:26:29.592\nbecause we're hammering those\ndrives from a usage perspective.\n\n532\n00:26:29.592 --> 00:26:34.290\nSo, functions specific to the needs\nof that server to survive\n\n533\n00:26:34.290 --> 00:26:35.750\nmore than anything else.\n\n534\n00:26:35.750 --> 00:26:37.990\nAnd I said bandwidth is probably\nthe most important element.\n\n535\n00:26:37.990 --> 00:26:39.160\nI wanna make sure we're aware of this.\n\n536\n00:26:39.160 --> 00:26:41.099\nAgain, we have some hard\ncoded numbers here.\n\n537\n00:26:42.390 --> 00:26:45.580\nI mentioned that license files\ncan get up to a megabyte in size.\n\n538\n00:26:45.580 --> 00:26:50.010\nOn average, they're about 24 kilobytes,\nmaybe anywhere from 24 to 30 kilobytes.\n\n539\n00:26:50.010 --> 00:26:51.850\nSo, they're very small on average.\n\n540\n00:26:51.850 --> 00:26:55.990\nI mean, it's not a very big file, but\nagain, hundreds of thousands of those,\n\n541\n00:26:55.990 --> 00:26:59.240\nwe start to really chew up\na significant amount of data\n\n542\n00:26:59.240 --> 00:27:02.550\nin terms of the amount of stuff that's\ntransiting our network back and forth, and\n\n543\n00:27:02.550 --> 00:27:04.750\nas a result, bandwidth is being consumed.\n\n544\n00:27:04.750 --> 00:27:06.705\nIf we receive, just think about this,\n\n545\n00:27:06.705 --> 00:27:11.370\n200,000 license requests per hour\nwith a 30 kilobyte file, and\n\n546\n00:27:11.370 --> 00:27:17.515\nevery one of those files to feed those\n200,000 requests is 30k, I mean that\n\n547\n00:27:17.515 --> 00:27:21.475\nis a very large amount of bandwidth going\nin and out over the course of the hour.\n\n548\n00:27:21.475 --> 00:27:26.080\nSo just keep that in mind, if you wish you\nvery complex licenses as I was suggesting,\n\n549\n00:27:26.080 --> 00:27:30.065\nthese can get up to a megabyte in size,\nmaybe even a little bit bigger in theory,\n\n550\n00:27:30.065 --> 00:27:33.015\nthat can lead to significant\nstress on the bandwidth.\n\n551\n00:27:33.015 --> 00:27:37.680\nSo, we do have to be aware of that,\nplan for that, keep that in mind.\n\n552\n00:27:37.680 --> 00:27:40.610\nToday, I think it would be fair to\nsay most people are running at least\n\n553\n00:27:40.610 --> 00:27:45.200\na gigabyte Ethernet network traditionally\nin production in LAN environments.\n\n554\n00:27:45.200 --> 00:27:49.810\nThat may vary, of course, I'm not saying\neverybody is but most production networks\n\n555\n00:27:49.810 --> 00:27:54.730\nin most areas today are probably\nat least a gigabyte of not faster.\n\n556\n00:27:54.730 --> 00:27:57.980\nSo we do have a fair amount of\nunderlying bandwidth on the LAN but\n\n557\n00:27:57.980 --> 00:28:01.210\nkeep in mind that we may\nhave interconnects between\n\n558\n00:28:01.210 --> 00:28:04.520\nnetworks that are gonna be\nin different geographies.\n\n559\n00:28:04.520 --> 00:28:08.570\nIf those are not running dedicated high\nspeed connections with minimum latency,\n\n560\n00:28:08.570 --> 00:28:12.450\nwe may start running into issues if we're\ngenerating tremendous licensing volume\n\n561\n00:28:12.450 --> 00:28:13.790\nacross that divide.\n\n562\n00:28:13.790 --> 00:28:17.840\nThat can actually sync a connection and\nessentially take it offline.\n\n563\n00:28:17.840 --> 00:28:18.970\nSo, we do have to be aware of this.\n\n564\n00:28:18.970 --> 00:28:22.262\nThis can actually cause some\nsignificant performance power, right?\n\n565\n00:28:22.262 --> 00:28:23.960\n&gt;&gt; You need to DDOS yourself,\n\n566\n00:28:23.960 --> 00:28:27.424\njust trying to set up rights management\n&gt;&gt; Cuz you didn't think ahead and\n\n567\n00:28:27.424 --> 00:28:30.660\nsay I wonder how much network bandwidth\nthis is actually gonna chew up on me here.\n\n568\n00:28:30.660 --> 00:28:35.130\nAnd then you take the training wheels off\nand just let go, you got your hands off\n\n569\n00:28:35.130 --> 00:28:38.470\nthe wheel and watch what happens,\neverything spirals down into nothingness.\n\n570\n00:28:38.470 --> 00:28:38.980\nThat would be bad.\n\n571\n00:28:38.980 --> 00:28:40.135\n&gt;&gt; Shooting yourself in the foot.\n\n572\n00:28:40.135 --> 00:28:41.435\n&gt;&gt; Yeah.\n&gt;&gt; Yeah, that's what we call that.\n\n573\n00:28:41.435 --> 00:28:43.110\n&gt;&gt; Just shooting yourself in the foot.\n\n574\n00:28:43.110 --> 00:28:45.230\nDaniel's available for parties by the way.\n\n575\n00:28:45.230 --> 00:28:46.005\n&gt;&gt; Yeah.\n\n576\n00:28:46.005 --> 00:28:46.710\n[LAUGH]\n&gt;&gt; He's-\n\n577\n00:28:46.710 --> 00:28:48.580\n&gt;&gt; Woo hoo, we got the guns out,\n\n578\n00:28:48.580 --> 00:28:50.160\nhere we go, it's gonna be a good time.\n\n579\n00:28:50.160 --> 00:28:51.380\n&gt;&gt; In the data center.\n\n580\n00:28:51.380 --> 00:28:52.642\nThat's what he is right there.\n\n581\n00:28:52.642 --> 00:28:56.680\nAll right, so a little bit just\non the thought process behind HA,\n\n582\n00:28:56.680 --> 00:28:58.390\nbehind figuring out how we're gonna scale,\n\n583\n00:28:58.390 --> 00:29:02.170\nwhat those magic numbers look like,\nwhat we have to be thinking about.\n\n584\n00:29:02.170 --> 00:29:04.740\nLet's also talk about ADRMS Management for\na minute.\n\n585\n00:29:04.740 --> 00:29:07.198\nWe have some new roles\nthat are specifically,\n\n586\n00:29:07.198 --> 00:29:10.855\nthree new administrative roles\nthat have been created for the 12,\n\n587\n00:29:10.855 --> 00:29:14.657\n12r2 implementations of ADRMS\nif you're familiar with 2008.\n\n588\n00:29:14.657 --> 00:29:17.356\nYou would not have seen these roles, so\nif you're gonna be testing out on this\n\n589\n00:29:17.356 --> 00:29:19.070\nmaterial, it's important\nto know about that.\n\n590\n00:29:19.070 --> 00:29:22.349\nIf you're gonna be using this\ntechnology in 12 or 12R2,\n\n591\n00:29:22.349 --> 00:29:24.062\nimportant to know that as well.\n\n592\n00:29:24.062 --> 00:29:27.205\nSo three new rules,\nlet's quickly highlight what they are,\n\n593\n00:29:27.205 --> 00:29:31.240\nwe have enterprise administrators,\nADRMS in front of every one of this.\n\n594\n00:29:31.240 --> 00:29:35.010\nEnterprise administrators, these are the\nmembers that essentially can manage and\n\n595\n00:29:35.010 --> 00:29:36.930\nadminister at the highest level,\nall policies and\n\n596\n00:29:36.930 --> 00:29:39.210\nsettings are gonna be available to them.\n\n597\n00:29:39.210 --> 00:29:42.530\nWe add user accounts in to\nthis to assign rights, but\n\n598\n00:29:42.530 --> 00:29:46.144\nthe account that is being used to drive\nthe installation of the ADRMS rules\n\n599\n00:29:46.144 --> 00:29:50.100\nare automatically added to the enterprise\nadmin role, so just be aware of that.\n\n600\n00:29:50.100 --> 00:29:51.300\nWe have template administrators.\n\n601\n00:29:51.300 --> 00:29:52.850\nCan we guess what those do?\n\n602\n00:29:52.850 --> 00:29:53.750\n&gt;&gt; They make templates.\n\n603\n00:29:53.750 --> 00:29:56.780\n&gt;&gt; They administer templates and\nmake templates, absolutely correct.\n\n604\n00:29:56.780 --> 00:29:58.960\nSo they can manage\nrights policy templates,\n\n605\n00:29:58.960 --> 00:30:01.880\nwe'll have some stuff to say\nabout policy templates coming up.\n\n606\n00:30:01.880 --> 00:30:05.720\nThey can read cluster information and\nlist and configure, create, modify,\n\n607\n00:30:05.720 --> 00:30:07.210\nexport rights policy templates.\n\n608\n00:30:07.210 --> 00:30:11.240\nAll the stuff associated with that, and\nthen we have the auditor role as well.\n\n609\n00:30:11.240 --> 00:30:13.790\nThese are members that can\nmanage logging and reporting.\n\n610\n00:30:13.790 --> 00:30:15.530\nSo they're going to have\nthe ability to oversee and\n\n611\n00:30:15.530 --> 00:30:17.460\nvalidate, especially running reports.\n\n612\n00:30:17.460 --> 00:30:18.822\nThat's gonna be important for us.\n\n613\n00:30:18.822 --> 00:30:20.200\nI wanna be thinking about that,\n\n614\n00:30:20.200 --> 00:30:24.160\nand just have a sense of that because\nwhen they wanna detail out and document\n\n615\n00:30:24.160 --> 00:30:28.110\nthings that are going on, we may have to\ngenerate a report for the owner of that IP\n\n616\n00:30:28.110 --> 00:30:32.020\nto show how many licenses are outstanding,\nand whether they are being used correctly.\n\n617\n00:30:32.020 --> 00:30:36.140\nAnd that role, the audit role can actually\ndo that for us, so something to consider.\n\n618\n00:30:36.140 --> 00:30:37.340\n&gt;&gt; Yes, definitely.\n\n619\n00:30:37.340 --> 00:30:40.580\nLots going on and\nat least now we have a good idea of what\n\n620\n00:30:40.580 --> 00:30:45.470\na kind of the prerequisites are of what\nwe need to plan for on standing up ADRMS.\n\n621\n00:30:45.470 --> 00:30:50.630\nSo, just keep those little factoids\nin mind as we progress through this.\n\n622\n00:30:50.630 --> 00:30:53.442\nAnd speaking of progressing through this,\nwe've definitely got plenty more\n\n623\n00:30:53.442 --> 00:30:56.010\ninformation to come, well we're just\nwell out time for this episode.\n\n624\n00:30:56.010 --> 00:30:58.420\nSo we're gonna have to reel\nit in to to a part there.\n\n625\n00:30:58.420 --> 00:31:00.130\nThere will be a part three.\n\n626\n00:31:00.130 --> 00:31:01.430\nDefinitely join us back for that.\n\n627\n00:31:01.430 --> 00:31:03.150\nAdam thanks for\njoining us in this one as well.\n\n628\n00:31:03.150 --> 00:31:04.100\nWe look forward to seeing you there.\n\n629\n00:31:04.100 --> 00:31:05.510\n&gt;&gt; Yep.\n&gt;&gt; Looking forward to seeing you good\n\n630\n00:31:05.510 --> 00:31:06.550\npeople as well.\n\n631\n00:31:06.550 --> 00:31:07.940\nTime to sign off for ITPro TV,\n\n632\n00:31:07.940 --> 00:31:10.400\nI've been your host Daniel Lowrie,\n&gt;&gt; I'm Adam Gordon.\n\n633\n00:31:10.400 --> 00:31:13.446\n&gt;&gt; And we'll see you next time.\n\n634\n00:31:13.446 --> 00:31:19.392\n[MUSIC]\n\n635\n00:31:19.392 --> 00:31:23.296\nThank you for watching ITProTV.\n\n",
          "vimeoId": "213223666"
        },
        {
          "description": "In this episode, Daniel and Adam overview the concepts and components for implementing Rights Management. Topics discussed here include Backup and Recovery strategies, decommissioning/removing AD-RMS, upgrading/migrating, and RMS Templates and Template distribution.",
          "length": "1779",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-3-implementing_rights_management_pt3-041317-PGM.00_29_21_21.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-3-implementing_rights_management_pt3-041317-PGM.00_29_21_21.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-3-implementing_rights_management_pt3-041317-PGM.00_29_21_21.Still001-sm.jpg",
          "title": "Implementing Rights Management Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:00.812\nWelcome to ITProTV,\nI'm your host Don Pezet coming at you\n\n2\n00:00:00.812 --> 00:00:05.729\nlive from San Francisco, California.\n[CROSSTALK]\n\n3\n00:00:05.729 --> 00:00:08.247\n[SOUND]\n\n4\n00:00:08.247 --> 00:00:12.160\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.160 --> 00:00:13.670\n&gt;&gt; All right, greetings, everyone, and\n\n6\n00:00:13.670 --> 00:00:16.190\nwelcome to another exciting\nepisode of ITProTV.\n\n7\n00:00:16.190 --> 00:00:21.180\nAnd in today's episode,\nwe are coming back at you with more of\n\n8\n00:00:21.180 --> 00:00:25.840\nour 7414 series, specifically looking\nat our MS Rights Managements.\n\n9\n00:00:25.840 --> 00:00:28.510\nIt's very, very awesome stuff,\nyou're gonna enjoy it.\n\n10\n00:00:28.510 --> 00:00:32.260\nMr Adam Gordon is joining us again\ntoday to continue that conversation.\n\n11\n00:00:32.260 --> 00:00:33.120\nAdam, welcome back, sir.\n\n12\n00:00:33.120 --> 00:00:33.724\nHow's it going today?\n\n13\n00:00:33.724 --> 00:00:35.230\n&gt;&gt; Good, very good.\n\n14\n00:00:35.230 --> 00:00:38.010\nWell, outstanding, I don't know what\nother adjectives I can come up with, but\n\n15\n00:00:38.010 --> 00:00:39.280\nI'll think about them as we go.\n\n16\n00:00:39.280 --> 00:00:40.130\n&gt;&gt; Amazing.\n\n17\n00:00:40.130 --> 00:00:41.462\n&gt;&gt; Amazing, that's a good one.\n\n18\n00:00:41.462 --> 00:00:45.730\nIt is super, splenderific,\nphenomenal, and cool to be here.\n\n19\n00:00:45.730 --> 00:00:46.360\nHow's that one?\n\n20\n00:00:46.360 --> 00:00:47.050\nCan you spell that?\n\n21\n00:00:47.050 --> 00:00:47.670\n&gt;&gt; I like that.\n\n22\n00:00:47.670 --> 00:00:48.695\nI'm writing it down right now.\n\n23\n00:00:48.695 --> 00:00:50.970\n[LAUGH]\n&gt;&gt; Splenderific.\n\n24\n00:00:50.970 --> 00:00:56.282\nIt's the new low cal sweetener coming\nto you soon from the makers of sugar.\n\n25\n00:00:56.282 --> 00:00:59.525\nAll right, so implementing AD RMS\nbackup and recovery strategies.\n\n26\n00:00:59.525 --> 00:01:00.445\n&gt;&gt; Not approved by the FDA.\n\n27\n00:01:00.445 --> 00:01:01.192\n&gt;&gt; Not approved by the FDA.\n\n28\n00:01:01.192 --> 00:01:02.005\n&gt;&gt; [LAUGH] At all.\n\n29\n00:01:02.005 --> 00:01:03.985\n&gt;&gt; So let's talk about backup and\nrecovery.\n\n30\n00:01:03.985 --> 00:01:04.905\nIn our last episode,\n\n31\n00:01:04.905 --> 00:01:09.425\nwe ran through the high level,\na lot of the substance associated with HA.\n\n32\n00:01:09.425 --> 00:01:12.895\nHow do we survive and\nthrive in the face of adversity?\n\n33\n00:01:12.895 --> 00:01:14.595\nIf we lose a server, what do we do?\n\n34\n00:01:14.595 --> 00:01:15.936\nHow do we load balance?\n\n35\n00:01:15.936 --> 00:01:20.730\nWhat are those magic numbers for CPU\nconsumption, for memory, for bandwidth,\n\n36\n00:01:20.730 --> 00:01:23.290\nwe talked about all that kind of stuff.\n\n37\n00:01:23.290 --> 00:01:27.130\nTalked about the structure at a high level\nffrom an architectural perspective of what\n\n38\n00:01:27.130 --> 00:01:31.440\nthe cluster options are, the root cluster,\nthe license only cluster.\n\n39\n00:01:31.440 --> 00:01:34.360\nSo we laid down a lot of the groundwork\nand the foundational elements.\n\n40\n00:01:34.360 --> 00:01:36.690\nNow we've gotta talk a bit\nabout backup and recovery.\n\n41\n00:01:36.690 --> 00:01:41.160\nHow do we survive and restore\nfunctionality if something goes wrong?\n\n42\n00:01:41.160 --> 00:01:44.070\nSo if we need to restore AD RMS,\nwe can restore the database,\n\n43\n00:01:44.070 --> 00:01:46.955\nthe config database if\nthat goes south on us.\n\n44\n00:01:46.955 --> 00:01:51.480\nAnd/or if we blow up the entire instance,\njust essentially revert and/or reinstall\n\n45\n00:01:51.480 --> 00:01:55.670\ndepending on what we're doing, and\nrestore previous version of the AD RMS.\n\n46\n00:01:55.670 --> 00:01:56.750\nWe could do that as well.\n\n47\n00:01:56.750 --> 00:01:57.980\nThere are some minor issues and\n\n48\n00:01:57.980 --> 00:02:02.440\nconcerns here if the server that goes down\nwas the AD RMS route configuration server.\n\n49\n00:02:02.440 --> 00:02:06.160\nEssentially the initial server\nthat establishes the cluster\n\n50\n00:02:06.160 --> 00:02:10.320\nthen we got to be a little bit more\nfocused on details because typically\n\n51\n00:02:10.320 --> 00:02:13.630\nthere's a tie into the Active Directory\nas I talked about in the last episode.\n\n52\n00:02:13.630 --> 00:02:16.990\nIf we have the service connection\npoint object in the Active Directory,\n\n53\n00:02:16.990 --> 00:02:19.650\nwe have to take some additional\nsteps to deal with that.\n\n54\n00:02:19.650 --> 00:02:24.270\nBecause the problem becomes that that root\nserver, when we bring it back up, tries to\n\n55\n00:02:24.270 --> 00:02:29.760\nprovision itself and think that it is\na member of an already existing cluster.\n\n56\n00:02:29.760 --> 00:02:33.190\nAnd it's going to be what we call\na sub-enrolled license only role,\n\n57\n00:02:33.190 --> 00:02:35.890\nmeaning essentially it's gonna\nthink it's gonna be joining or\n\n58\n00:02:35.890 --> 00:02:37.870\nsetting up a license only cluster.\n\n59\n00:02:37.870 --> 00:02:40.330\nWhen in fact you need it to\nreestablish the root cluster,\n\n60\n00:02:40.330 --> 00:02:42.960\nwhich unfortunately doesn't\nreally work very well.\n\n61\n00:02:42.960 --> 00:02:44.540\nSo we have an identity crisis, and\n\n62\n00:02:44.540 --> 00:02:46.580\nthat's something we have to address and\ndeal with.\n\n63\n00:02:46.580 --> 00:02:49.720\nI'm gonna walk you through the steps\nassociated with fixing that problem\n\n64\n00:02:49.720 --> 00:02:50.530\nhere in just a minute.\n\n65\n00:02:50.530 --> 00:02:53.740\nBut if the server that goes down is\njust simply a member of the cluster,\n\n66\n00:02:53.740 --> 00:02:54.240\nno big deal.\n\n67\n00:02:54.240 --> 00:02:57.770\nWe remove it, we just remove it\nfrom the cluster configuration.\n\n68\n00:02:57.770 --> 00:03:02.160\nWe repair the node, so physically and/or\nlogically fix the problems associated\n\n69\n00:03:02.160 --> 00:03:03.980\nwith that system that caused it to fail.\n\n70\n00:03:05.010 --> 00:03:09.030\nReinstall any necessary software,\nwhatever the case may be, rejoin the node\n\n71\n00:03:09.030 --> 00:03:13.650\nto the cluster and bring it back up as\nif it was a new member, and we're fine.\n\n72\n00:03:13.650 --> 00:03:15.910\nIf the failed server was\nnot a member of a cluster,\n\n73\n00:03:15.910 --> 00:03:19.690\nwe can recover the server just by fixing\nthe underlying problem, whatever it was.\n\n74\n00:03:19.690 --> 00:03:23.560\nAnd just reprovision it, meaning if it\nwas the file server, for instance, right,\n\n75\n00:03:23.560 --> 00:03:26.930\nthat was actually hosting\ndata that we want to\n\n76\n00:03:26.930 --> 00:03:30.570\nperhaps use and/or make available\nwith the rights management.\n\n77\n00:03:30.570 --> 00:03:33.710\nOr if it was a server that\nwas involved with AD RMS but\n\n78\n00:03:33.710 --> 00:03:35.580\nnot directly in the cluster.\n\n79\n00:03:35.580 --> 00:03:37.500\nIt's different options\ndepending on what we're doing.\n\n80\n00:03:37.500 --> 00:03:41.720\nIt's simple, just essentially the standard\nthought process or message here would be,\n\n81\n00:03:41.720 --> 00:03:44.450\nhey, reinstall after you fix the problem.\n\n82\n00:03:44.450 --> 00:03:46.290\nAnd chances are good\neverything will be fine.\n\n83\n00:03:46.290 --> 00:03:50.872\nBecause the cluster structure itself\nis intact, the data itself's intact.\n\n84\n00:03:50.872 --> 00:03:54.020\nAll we're doing is swapping out instances,\nno big deal.\n\n85\n00:03:54.020 --> 00:03:55.076\nBut as I mentioned,\n\n86\n00:03:55.076 --> 00:03:59.427\nif the server that goes down is the AD RMS\nroot configuration server, the anchor for\n\n87\n00:03:59.427 --> 00:04:03.243\nthe cluster, for the root configuration\ncluster, that's a problem.\n\n88\n00:04:03.243 --> 00:04:07.085\nAnd so what we do is we delete that\nservice connection point in AD.\n\n89\n00:04:07.085 --> 00:04:08.948\nWe have to go into the AD container.\n\n90\n00:04:08.948 --> 00:04:11.466\nYou may have to use ADSI edit to do this\n\n91\n00:04:11.466 --> 00:04:16.270\nand/or we may do it from the Active\nDirectory user and computer tool.\n\n92\n00:04:16.270 --> 00:04:18.560\nWe'll put on advanced features,\nadvanced view.\n\n93\n00:04:18.560 --> 00:04:20.870\nGo and find the service connection object.\n\n94\n00:04:20.870 --> 00:04:22.510\nWe'll delete that, right, click Delete.\n\n95\n00:04:22.510 --> 00:04:24.610\nWe have to have the appropriate\nrights to do that.\n\n96\n00:04:24.610 --> 00:04:27.470\nRestart the provisioning\nprocess by essentially\n\n97\n00:04:27.470 --> 00:04:31.640\nkicking back off the configuration on the\nserver that tried to configure itself but\n\n98\n00:04:31.640 --> 00:04:33.060\nit was set up incorrectly.\n\n99\n00:04:33.060 --> 00:04:34.550\nSo we're gonna fix that.\n\n100\n00:04:34.550 --> 00:04:37.680\nAnd then once we do that, run it\nthrough again, but here's the twist.\n\n101\n00:04:37.680 --> 00:04:39.150\nHere's the thing we gotta know.\n\n102\n00:04:39.150 --> 00:04:40.740\nWhen that comes up,\n\n103\n00:04:40.740 --> 00:04:45.460\nwe're gonna see the provisioning or\nprovision licensing.aspx page.\n\n104\n00:04:45.460 --> 00:04:48.955\nThat's the one that tells us hey,\nyou're joining a cluster that's\n\n105\n00:04:48.955 --> 00:04:52.720\ngonna be a license only cluster and this\nis how you're gonna configure yourself.\n\n106\n00:04:52.720 --> 00:04:54.180\nThat's the page we don't wanna see.\n\n107\n00:04:54.180 --> 00:04:57.042\nSo when that comes up,\nwe're gonna swap that out, and\n\n108\n00:04:57.042 --> 00:05:00.230\nwe're gonna go ahead and\nreplace that page name and the URL.\n\n109\n00:05:00.230 --> 00:05:02.500\nWe're gonna go ahead and\ntype in a different page name.\n\n110\n00:05:02.500 --> 00:05:03.860\nWe're gonna go behind the scenes,\n\n111\n00:05:03.860 --> 00:05:07.670\nand we're gonna pull up a page\ncalled provisioncertification.aspx.\n\n112\n00:05:07.670 --> 00:05:11.800\nSo when we see that URL string for\nthe page coming up, and\n\n113\n00:05:11.800 --> 00:05:14.780\nit says provision licensing\nwe're gonna swap that.\n\n114\n00:05:14.780 --> 00:05:18.690\nWe're gonna do provision certification,\nand that's gonna bring up that other page,\n\n115\n00:05:18.690 --> 00:05:23.160\nthat page we should see, that lets us\nstand up the root certification server.\n\n116\n00:05:23.160 --> 00:05:26.100\nAnd we actually then are able to go\nthrough and finish up the installation.\n\n117\n00:05:26.100 --> 00:05:27.680\nSo just wanna make sure\nyou're aware of that.\n\n118\n00:05:27.680 --> 00:05:30.940\nYou press Enter at that point, and\nthen you go ahead and you run from there.\n\n119\n00:05:30.940 --> 00:05:33.090\nSo a little bit of sleight of hand.\n\n120\n00:05:33.090 --> 00:05:36.250\nAnd a little bit of behind the scenes\nmagic that has to occur here, but\n\n121\n00:05:36.250 --> 00:05:37.170\nwe wanna be aware of that.\n\n122\n00:05:38.440 --> 00:05:42.810\nIn addition, if we have to decommission\nand/or remove an AD RMS server instance or\n\n123\n00:05:42.810 --> 00:05:46.200\na whole cluster, there are some steps and\nthings we wanna be aware of here.\n\n124\n00:05:46.200 --> 00:05:51.060\nIf we decide to remove the AD RMS role\nfrom a server, not a big deal but\n\n125\n00:05:51.060 --> 00:05:52.800\nwe have to decommission it first.\n\n126\n00:05:52.800 --> 00:05:58.170\nDecommissioning allows us to issue\nout a key that will unencrypt and/or\n\n127\n00:05:58.170 --> 00:06:02.520\nmake available to us all the data that's\nwrite-protected and strip the rights out.\n\n128\n00:06:02.520 --> 00:06:06.390\nSo we can use the data without having\nto worry about the licenses either\n\n129\n00:06:06.390 --> 00:06:10.610\nexpiring and not letting us in or losing\nthe ability to validate new users and\n\n130\n00:06:10.610 --> 00:06:12.000\ngive them access to the data.\n\n131\n00:06:12.000 --> 00:06:16.080\nSo decommissioning is the process of\nessentially unbinding the encryption and\n\n132\n00:06:16.080 --> 00:06:19.220\nthe licensing that's stuck as\nattributes to that data and\n\n133\n00:06:19.220 --> 00:06:22.630\nallowing us to undo that by using\na key that will turn it off.\n\n134\n00:06:22.630 --> 00:06:25.750\nAnd so decommission is a very\nimportant part of the overall process.\n\n135\n00:06:25.750 --> 00:06:29.660\nWithout that, we unfortunately are really\nnot gonna be able to get any value out of\n\n136\n00:06:29.660 --> 00:06:30.590\nusing that data.\n\n137\n00:06:30.590 --> 00:06:31.680\nSo keep that in mind.\n\n138\n00:06:31.680 --> 00:06:34.480\nWe do provide a key that would\ndecrypt all the rights protected data\n\n139\n00:06:34.480 --> 00:06:37.670\nthrough the decommissioning process,\nvery important for us to do that.\n\n140\n00:06:37.670 --> 00:06:41.980\nWe use the key then to go in and access\nthe content, save it off in unencrypted,\n\n141\n00:06:41.980 --> 00:06:43.190\nunprotected form.\n\n142\n00:06:43.190 --> 00:06:45.620\nAnd the data goes back to\nessentially just being normal data.\n\n143\n00:06:45.620 --> 00:06:47.710\nBut we must follow this process.\n\n144\n00:06:47.710 --> 00:06:52.390\nOnce we decommission the AD RMS role,\nI'm gonna petition\n\n145\n00:06:52.390 --> 00:06:57.370\nMicrosoft to rename this ADMS just so that\nI don't have to keep correcting myself.\n\n146\n00:06:57.370 --> 00:07:00.152\nThe AD RMS role,\nonce we decommission that role,\n\n147\n00:07:00.152 --> 00:07:02.270\nwhen we go to manage it in the cluster,\n\n148\n00:07:02.270 --> 00:07:07.191\nyou're only gonna see decommissioning data\nand then information on the page for that.\n\n149\n00:07:07.191 --> 00:07:11.290\nYou're not gonna be able to add new users,\nspin up new licenses, do any of that.\n\n150\n00:07:11.290 --> 00:07:13.150\nEssentially, it's a one way process.\n\n151\n00:07:13.150 --> 00:07:14.490\nWe cannot undo that.\n\n152\n00:07:14.490 --> 00:07:18.330\nWe have to decommission, uninstall,\nand then readd a node in or\n\n153\n00:07:18.330 --> 00:07:20.560\nreestablish a cluster if we\ndecide we didn't wanna do that.\n\n154\n00:07:20.560 --> 00:07:25.420\nSo we do have to make sure we are aware\nof the fact that this is a one-way trip.\n\n155\n00:07:25.420 --> 00:07:28.750\nSo just make sure you're aware of that\nbecause we can't reverse the process.\n\n156\n00:07:28.750 --> 00:07:31.790\nWe have to remove it completely,\nwalk it all the way back and\n\n157\n00:07:31.790 --> 00:07:33.730\nthen reinstall if we\nwanna reestablish that.\n\n158\n00:07:33.730 --> 00:07:36.240\nBecause once that decommissioning\nswitch is thrown,\n\n159\n00:07:36.240 --> 00:07:38.250\nall new capabilities are turned off.\n\n160\n00:07:38.250 --> 00:07:40.220\nThat decommissioning key gets issued,\n\n161\n00:07:40.220 --> 00:07:42.950\nand that's a master key\nthat unlocks all the data.\n\n162\n00:07:42.950 --> 00:07:44.110\nAnd once that's out there,\n\n163\n00:07:44.110 --> 00:07:47.050\nthere's no way to reverse that\nbecause now nothing can be protected.\n\n164\n00:07:47.050 --> 00:07:48.170\nSo you just wanna make\nsure you're aware of that.\n\n165\n00:07:48.170 --> 00:07:50.392\nIt's a skeleton key, as we say.\n\n166\n00:07:50.392 --> 00:07:51.968\nDo they still call them skeleton keys,\n\n167\n00:07:51.968 --> 00:07:53.444\ncall them skeleton keys-\n&gt;&gt; Yeah, I think so, yeah.\n\n168\n00:07:53.444 --> 00:07:56.559\n&gt;&gt; Or a master key,\na key that can unlock all the other keys.\n\n169\n00:07:56.559 --> 00:07:58.350\nIt's the key that unbinds\nall the other keys.\n\n170\n00:07:58.350 --> 00:08:00.162\n&gt;&gt; That's right.\n&gt;&gt; It's the master key.\n\n171\n00:08:00.162 --> 00:08:01.864\nOne ring in the dark.\n\n172\n00:08:01.864 --> 00:08:03.176\nOne ring to bind them all.\n\n173\n00:08:03.176 --> 00:08:05.630\nI just saw that over the last weekend.\n\n174\n00:08:05.630 --> 00:08:07.330\nThey were running the whole trilogy again.\n\n175\n00:08:07.330 --> 00:08:08.631\nI told you about the Godfather being run.\n\n176\n00:08:08.631 --> 00:08:09.500\n&gt;&gt; Yeah.\nI saw that too.\n\n177\n00:08:09.500 --> 00:08:10.230\nAnd I saw.\n\n178\n00:08:10.230 --> 00:08:12.950\nNow there's like a day you sit down.\n\n179\n00:08:12.950 --> 00:08:14.290\n&gt;&gt; And do a good day.\n\n180\n00:08:14.290 --> 00:08:18.472\n&gt;&gt; 24 hours of Tolkien and\nFrancis Ford Coppola.\n\n181\n00:08:18.472 --> 00:08:19.270\n&gt;&gt; My goodness.\n\n182\n00:08:19.270 --> 00:08:22.960\n&gt;&gt; Did you know that Nicholas Cage\nis Francis Ford Coppola's nephew?\n\n183\n00:08:22.960 --> 00:08:24.990\n&gt;&gt; Yes, I did know that.\n\n184\n00:08:24.990 --> 00:08:25.490\n&gt;&gt; Interesting.\n\n185\n00:08:26.970 --> 00:08:27.840\n&gt;&gt; And he makes good wine.\n\n186\n00:08:27.840 --> 00:08:28.460\nNot Nicholas Cage.\n\n187\n00:08:28.460 --> 00:08:29.270\nFrancis Ford Coppola.\n\n188\n00:08:29.270 --> 00:08:30.080\nReally good wine.\n\n189\n00:08:30.080 --> 00:08:31.610\nI've actually been out to the winery.\n\n190\n00:08:31.610 --> 00:08:32.290\nThey make a really good one.\n\n191\n00:08:32.290 --> 00:08:33.810\n&gt;&gt; Cool.\n&gt;&gt; That is our random aside\n\n192\n00:08:33.810 --> 00:08:34.500\nhere at ITProTV.\n\n193\n00:08:34.500 --> 00:08:35.315\n&gt;&gt; You heard it here, folks.\n\n194\n00:08:35.315 --> 00:08:37.020\n[LAUGH]\n&gt;&gt; AD RMS episode three.\n\n195\n00:08:37.020 --> 00:08:38.170\n&gt;&gt; [LAUGH]\n&gt;&gt; That Nicolas Cage and\n\n196\n00:08:38.170 --> 00:08:39.890\nFrancis Ford Coppola are indeed related.\n\n197\n00:08:39.890 --> 00:08:44.030\nAll right, so if we do have to retire\nthat AD RMS cluster and or instance,\n\n198\n00:08:44.030 --> 00:08:45.510\njust make sure you're aware of that.\n\n199\n00:08:45.510 --> 00:08:49.790\nWe obviously need to make backups of all\nthe databases before we do any of this.\n\n200\n00:08:49.790 --> 00:08:53.770\nGood standard best practice, not related\nspecifically just to this one discussion.\n\n201\n00:08:53.770 --> 00:08:56.300\nBut any time we are dealing with\nany of these kind of systems.\n\n202\n00:08:56.300 --> 00:08:59.530\nAlways have a backup of everything,\nespecially the configuration database.\n\n203\n00:08:59.530 --> 00:09:00.580\nThat is the most important.\n\n204\n00:09:00.580 --> 00:09:03.850\nRemember, we have the configuration\ndatabase, we have the login database.\n\n205\n00:09:03.850 --> 00:09:06.940\nWe need both, but configuration database\nis the much more important than the two.\n\n206\n00:09:06.940 --> 00:09:08.750\nSo make sure you are aware of that.\n\n207\n00:09:08.750 --> 00:09:09.940\nWe can remove the server.\n\n208\n00:09:10.970 --> 00:09:13.190\nPull one or pull the entire cluster out.\n\n209\n00:09:13.190 --> 00:09:14.620\nThere's really no issue of concern here,\n\n210\n00:09:14.620 --> 00:09:16.650\nit's just a matter of following\nthe right methodology.\n\n211\n00:09:16.650 --> 00:09:18.940\nBut just a couple of quick\nthings to be aware of.\n\n212\n00:09:18.940 --> 00:09:22.360\nIf we're moving just a single server\nfrom the cluster, it's simple.\n\n213\n00:09:22.360 --> 00:09:24.020\nWe just stand that one server down.\n\n214\n00:09:24.020 --> 00:09:26.450\nWe may have to adjust and\nmodify load balancing.\n\n215\n00:09:26.450 --> 00:09:29.830\nSo if we're doing hardware-based load\nbalancing, follow the guidelines and\n\n216\n00:09:29.830 --> 00:09:33.520\nrecommendations to decouple that\nserver from the load balance cluster,\n\n217\n00:09:33.520 --> 00:09:35.150\nbased on whatever\nthe vendor tells you to do.\n\n218\n00:09:35.150 --> 00:09:38.710\nIf it's Microsoft Software-Based\nLoad Balancing, really no big deal.\n\n219\n00:09:38.710 --> 00:09:41.760\nWe adjust on the fly and understand,\nwhen we remove that server.\n\n220\n00:09:42.870 --> 00:09:46.560\nThat the load balancing algorithm adjusts\nin round robins through whatever members\n\n221\n00:09:46.560 --> 00:09:48.340\nare left, so that's really not a big deal.\n\n222\n00:09:48.340 --> 00:09:51.620\nIf we were tired of standalone server,\nwe decommission, deprovision,\n\n223\n00:09:51.620 --> 00:09:53.110\nand uninstall that server.\n\n224\n00:09:53.110 --> 00:09:54.780\nThen we move it from the network.\n\n225\n00:09:54.780 --> 00:09:56.880\nAnd we do whatever else\nwe were gonna do with it.\n\n226\n00:09:56.880 --> 00:09:58.390\nNot a big deal.\n\n227\n00:09:58.390 --> 00:10:02.520\nWe simply are gonna take that server and\npotentially then reinstall it,\n\n228\n00:10:02.520 --> 00:10:04.010\nprovision or add it to a cluster.\n\n229\n00:10:04.010 --> 00:10:05.210\nMaybe we're gonna leave\nit off to the side and\n\n230\n00:10:05.210 --> 00:10:09.500\nnot use it or we could stand that one down\nwith no trouble, it's really simple to do.\n\n231\n00:10:09.500 --> 00:10:10.750\nSo just be aware of that.\n\n232\n00:10:10.750 --> 00:10:14.700\nBut standalone servers are servers that\nare off on their own that a provided\n\n233\n00:10:14.700 --> 00:10:19.270\nlicenses and content to users but\nare now gonna joined to a cluster.\n\n234\n00:10:19.270 --> 00:10:23.560\nWhen we do that, we have to bring\nthat content and those licenses and\n\n235\n00:10:23.560 --> 00:10:26.360\neverything in by reprovisioning and\nadding it in or\n\n236\n00:10:26.360 --> 00:10:28.960\nthose users are not gonna have\nthe server authenticate against.\n\n237\n00:10:28.960 --> 00:10:31.210\nAnd that content's going to be\nunavailable after decommissioning.\n\n238\n00:10:31.210 --> 00:10:32.900\nSo keep that in mind.\n\n239\n00:10:32.900 --> 00:10:36.260\nWe can replace one RMS\ncluster with another, and\n\n240\n00:10:36.260 --> 00:10:41.120\nwe can swap essentially by doing upgrades\nand/or along the way, installations.\n\n241\n00:10:41.120 --> 00:10:43.610\nWe export out the trusted user domain and\n\n242\n00:10:43.610 --> 00:10:46.430\ntrusted publishing domain\nfrom the existing cluster.\n\n243\n00:10:46.430 --> 00:10:47.780\nWe haven't talked about these yet per say.\n\n244\n00:10:47.780 --> 00:10:51.300\nWe'll go into them in more detail in\na little bit .But this is how we can\n\n245\n00:10:52.430 --> 00:10:57.320\nset up and allow external users in,\nthis is kind of the extension of\n\n246\n00:10:57.320 --> 00:11:00.300\nthe idea of the active\ndirectory federation services.\n\n247\n00:11:00.300 --> 00:11:02.730\nThe extension of trust\nout to unknown parties.\n\n248\n00:11:02.730 --> 00:11:04.870\nAnd we can link ADRMS With ADFS,\n\n249\n00:11:04.870 --> 00:11:08.460\nyou can actually even link this into\nthe cloud with Azure Rights Management.\n\n250\n00:11:08.460 --> 00:11:11.210\nWe'll be talking about that\nin an upcoming conversation.\n\n251\n00:11:11.210 --> 00:11:15.810\nBut we are able to do this, locally\nin our system using trusted user and\n\n252\n00:11:15.810 --> 00:11:20.020\ntrusted publishing domains,\nextending trust out to these other areas.\n\n253\n00:11:20.020 --> 00:11:23.120\nSo we have to export those out\nof the existing cluster so\n\n254\n00:11:23.120 --> 00:11:25.130\nwe have a record of all that.\n\n255\n00:11:25.130 --> 00:11:27.900\nThen we import those user domain,\nthe trust user domain,\n\n256\n00:11:27.900 --> 00:11:31.020\nthe publishing domain back\ninto the existing cluster or\n\n257\n00:11:31.020 --> 00:11:34.060\nthe new cluster that is active,\nhowever you wanna think of that.\n\n258\n00:11:34.060 --> 00:11:37.430\nAnd that enables us to ensure\nthat users coming from\n\n259\n00:11:37.430 --> 00:11:40.340\nthe cluster that its being\nretired are now taken care of and\n\n260\n00:11:40.340 --> 00:11:43.040\ncan be added to our active lists and\ncan be managed.\n\n261\n00:11:43.040 --> 00:11:46.930\nSo again, if we're going to retire\nold infrastructure in favor of new,\n\n262\n00:11:46.930 --> 00:11:49.990\nwe have mechanisms and\nmethodologies associated with dong this.\n\n263\n00:11:49.990 --> 00:11:52.180\nSo we do have to understand\nhow to deal with that.\n\n264\n00:11:52.180 --> 00:11:57.250\nWe can also upgrade or\nmigrate an ADR MS cluster in place.\n\n265\n00:11:57.250 --> 00:12:00.730\nDoing this from 2008, 2008 R2 into 12,\n\n266\n00:12:00.730 --> 00:12:04.310\n12 R2 maybe renowned further\nthan that into 16 overtime.\n\n267\n00:12:04.310 --> 00:12:08.620\nWe simply update the existing\ncluster by running the underlying\n\n268\n00:12:08.620 --> 00:12:12.690\noperating system install to put the new\nbits in place, the binary bits for the OS.\n\n269\n00:12:12.690 --> 00:12:15.370\nAnd then as a result we're upgrading and\nuplifting that.\n\n270\n00:12:15.370 --> 00:12:18.070\nSo that's really not a big deal,\nthat's an in place upgrade.\n\n271\n00:12:18.070 --> 00:12:20.770\nPretty straight forward,\nas long as the migration path or\n\n272\n00:12:20.770 --> 00:12:24.640\nthe in place upgrade path exists for\nus to go from 2008 R2 to 12, and it does.\n\n273\n00:12:24.640 --> 00:12:29.200\nThen all we do is just install\nthe binary bits and everything's fine.\n\n274\n00:12:29.200 --> 00:12:30.700\nIf we're on 2003-\n&gt;&gt; [LAUGH]\n\n275\n00:12:30.700 --> 00:12:31.570\n&gt;&gt; And we wanna go to 2012,\n\n276\n00:12:31.570 --> 00:12:35.040\nthere's no path that's\nsupported directly for that.\n\n277\n00:12:35.040 --> 00:12:39.660\nYou'd have to stop off at 2008,\nbecause 2003 cannot be upgraded directly\n\n278\n00:12:39.660 --> 00:12:44.760\ninto 12 to update and change certain\nthings that 2008 introduces.\n\n279\n00:12:44.760 --> 00:12:47.250\nSo there are just some rules and\nregulations and\n\n280\n00:12:47.250 --> 00:12:48.640\nthings you'd have to be aware of.\n\n281\n00:12:48.640 --> 00:12:52.720\nBased on versioning, but in general\nit's not a very complicated operation.\n\n282\n00:12:52.720 --> 00:12:57.230\nIn a migration, we simply are adding\nservers into an existing cluster.\n\n283\n00:12:57.230 --> 00:13:00.840\nProbably adding, let's say to a 2008 or\n\n284\n00:13:00.840 --> 00:13:04.270\n2008 R2 ADRMS cluster a new 12 or\n12 R2 instance.\n\n285\n00:13:04.270 --> 00:13:07.280\nWe'll then gonna pull over functionality\nof those in new servers and\n\n286\n00:13:07.280 --> 00:13:09.340\nthen over time decommission\nthe older ones.\n\n287\n00:13:09.340 --> 00:13:11.900\nAnd as a result,\nwe essentially are upgrading but\n\n288\n00:13:11.900 --> 00:13:15.720\nwe're doing it through a migration process\nas we're moving stuff as opposed to\n\n289\n00:13:15.720 --> 00:13:18.010\npulling things out on the flood.\n\n290\n00:13:18.010 --> 00:13:21.360\nWe just back up the configuration database\neither way, were really no big deal.\n\n291\n00:13:21.360 --> 00:13:24.820\nAnd then we do a migration,\nin the case of migration we do an export.\n\n292\n00:13:25.980 --> 00:13:28.960\nWe'll export the server\nlicensor certificate and\n\n293\n00:13:28.960 --> 00:13:33.090\nmake sure that we are then able to\nreimport that onto the new server.\n\n294\n00:13:33.090 --> 00:13:35.050\nSo we do a quick export and import.\n\n295\n00:13:35.050 --> 00:13:38.900\nNow the thing there is to understand is\nthat if are storing that certificate,\n\n296\n00:13:38.900 --> 00:13:43.550\nwhich is essentially the master key\nthat allows us to issue licenses\n\n297\n00:13:43.550 --> 00:13:47.180\nfrom the ADRMS cluster from the root,\nwe have to be very careful with that.\n\n298\n00:13:47.180 --> 00:13:49.930\nAnd so obviously it's stored,\nencrypted, and secured.\n\n299\n00:13:49.930 --> 00:13:54.220\nWe have to make sure for using or storing\nit in a software-based cryptographic\n\n300\n00:13:54.220 --> 00:13:59.310\nservice provider, what's called a CSP\nthat we have a process specifically\n\n301\n00:13:59.310 --> 00:14:03.665\nto export and install the certificate and\nthe keys out of that CSP.\n\n302\n00:14:03.665 --> 00:14:07.285\nI'm wanna walk you through the process so\nyou understand what that looks like.\n\n303\n00:14:07.285 --> 00:14:11.805\nBecause that way, we follow the rules and\nwe're able to get that certificate and\n\n304\n00:14:11.805 --> 00:14:12.545\nmake it valuable.\n\n305\n00:14:12.545 --> 00:14:16.010\nIf we don't, chance are good that\ncertificate is not gonna be usable.\n\n306\n00:14:16.010 --> 00:14:18.470\nIf it's being stored\nseparately somewhere else,\n\n307\n00:14:18.470 --> 00:14:21.710\nthen we follow whatever the instructions\nare, based on either the vendor,\n\n308\n00:14:21.710 --> 00:14:27.110\nif we're storing in, let's say in hsm,\na hardware security module, an external\n\n309\n00:14:27.110 --> 00:14:31.170\nenvironment where we essentially can put\nthese things and we're vaulted, right.\n\n310\n00:14:31.170 --> 00:14:34.530\nThen we would follow whatever the vendor\nrecommendation would be to deal with that.\n\n311\n00:14:34.530 --> 00:14:35.590\nSo just be aware of that.\n\n312\n00:14:36.640 --> 00:14:39.090\nBut before l show you the process,\nwe will work through that,\n\n313\n00:14:39.090 --> 00:14:41.820\nam gonna put that on the screen,\njust a minute and l show you how it works.\n\n314\n00:14:41.820 --> 00:14:44.200\nKeep in mind that backing up of\nthe configuration database and\n\n315\n00:14:44.200 --> 00:14:47.960\nsequel is not complicated but we gonna\nmake sure we target the right database.\n\n316\n00:14:47.960 --> 00:14:52.535\nSo we gonna run a backup up task from\nwithin SMS a SQL server management studio,\n\n317\n00:14:52.535 --> 00:14:58.135\nand we're going to be doing the database\nthat's named DRMS_config_whatever\n\n318\n00:14:58.135 --> 00:15:02.942\nthe name of the RMS cluster URL is, it'll\nbe a string bring don't know what that is.\n\n319\n00:15:02.942 --> 00:15:04.522\nIt will be random based on your naming.\n\n320\n00:15:04.522 --> 00:15:07.362\nConvention the things you've put in\nas variables as you've installed but\n\n321\n00:15:07.362 --> 00:15:11.762\nit will be part of the name of\nthe database 80, the number 80 at the end.\n\n322\n00:15:11.762 --> 00:15:18.552\nSo, DRMS underscore config underscore RMS\nurl or RMS cluster url underscore 80,\n\n323\n00:15:18.552 --> 00:15:21.762\nthat's the string name you're looking for\nfor the database instance and\n\n324\n00:15:21.762 --> 00:15:25.790\nthat's the database, the config database\nthat you wanna make sure you're backing up\n\n325\n00:15:25.790 --> 00:15:28.730\nJust be aware of that and\nmake sure you keep that in mind.\n\n326\n00:15:28.730 --> 00:15:31.910\nLet's take a look at how\nthe exporting install, export out and\n\n327\n00:15:31.910 --> 00:15:35.780\nthen install by re-importing\nthe software based CSP key container,\n\n328\n00:15:35.780 --> 00:15:36.860\nwhich is what I was talking about.\n\n329\n00:15:36.860 --> 00:15:40.110\nSo let's take a look on the machine here,\nwe'll need to go full screen just so\n\n330\n00:15:40.110 --> 00:15:40.960\nwe could see everything.\n\n331\n00:15:42.270 --> 00:15:44.310\nWe're just going to walk you\nthrough quickly at a high level,\n\n332\n00:15:44.310 --> 00:15:46.020\nwhat the steps are that are involved.\n\n333\n00:15:46.020 --> 00:15:47.934\nThere's only three steps,\nreally not a big deal.\n\n334\n00:15:47.934 --> 00:15:50.295\nBut just making sure we\nunderstand what these steps are,\n\n335\n00:15:50.295 --> 00:15:52.163\nbecause of some of the variables and\nthings,\n\n336\n00:15:52.163 --> 00:15:54.690\nyou just want to be able to see\nit as opposed to hearing me say.\n\n337\n00:15:54.690 --> 00:15:56.892\nThought it was a good idea to\nput this on the screen for you.\n\n338\n00:15:56.892 --> 00:15:59.860\nSo first step,\nwe find the private key name.\n\n339\n00:15:59.860 --> 00:16:03.000\nWe go ahead and we open up SQL Server\nManagement Studio as you can see.\n\n340\n00:16:03.000 --> 00:16:07.100\nWe do this on the machine that is hosting\nvia configuration database of course.\n\n341\n00:16:07.100 --> 00:16:10.010\nDrill down into the configuration\ndatabase looking for tables.\n\n342\n00:16:11.270 --> 00:16:16.308\nWe open up specifically the table\nnamed here, DRMS_licensorPrivateKey.\n\n343\n00:16:16.308 --> 00:16:18.340\nThat will be the name of the table.\n\n344\n00:16:18.340 --> 00:16:19.880\nWe open that table, and\n\n345\n00:16:19.880 --> 00:16:24.810\nwe note the key name that will be found\ninside the column called KeyContainerName.\n\n346\n00:16:24.810 --> 00:16:26.410\nBe great if life was this simple.\n\n347\n00:16:26.410 --> 00:16:31.170\nJust go ahead, open up that box right\nover there, take what's inside, and\n\n348\n00:16:31.170 --> 00:16:33.940\nthat's what is gonna be what\nwe are having for dinner.\n\n349\n00:16:33.940 --> 00:16:35.940\nIt'll work out wonderful\nif that was the case.\n\n350\n00:16:35.940 --> 00:16:36.900\n&gt;&gt; It would be that.\n\n351\n00:16:36.900 --> 00:16:39.930\n&gt;&gt; Export the software\nbase CSP RMS private key.\n\n352\n00:16:39.930 --> 00:16:43.630\nHow do we do that in step two now that we\nknow what the key is, where to find it?\n\n353\n00:16:43.630 --> 00:16:45.130\nWe open up a command prompt.\n\n354\n00:16:45.130 --> 00:16:47.530\nWe go ahead and\nchange into the following directory.\n\n355\n00:16:47.530 --> 00:16:51.408\n%windir% is just a system variable\nthat allows us to substitute in\n\n356\n00:16:51.408 --> 00:16:54.341\nthe installation directory and\npath for Windows.\n\n357\n00:16:54.341 --> 00:16:58.600\nSo typically see :Windows,\nwhatever the case may be.\n\n358\n00:16:58.600 --> 00:16:59.986\nBut wherever that is it will find it.\n\n359\n00:16:59.986 --> 00:17:04.852\nMicrosoft.NET framework, v 2.0.5727.\n\n360\n00:17:04.852 --> 00:17:10.565\nSo we go into that sub directory in there,\nwe then go ahead and\n\n361\n00:17:10.565 --> 00:17:15.280\ntype ASP.net_regiis.ixe\nspace -pi as in pi.\n\n362\n00:17:16.390 --> 00:17:18.510\nPi there's something that would be good.\n\n363\n00:17:18.510 --> 00:17:23.326\nAnd then key container name,\nwe put the key container name in there,\n\n364\n00:17:23.326 --> 00:17:25.164\nprivatekey.xml -pri.\n\n365\n00:17:25.164 --> 00:17:28.806\nThe key container name is going to be\nthe key container name that we got from\n\n366\n00:17:28.806 --> 00:17:29.820\nthe step one step.\n\n367\n00:17:29.820 --> 00:17:31.640\nWhere we actually looked it up\nin the lookup table, right?\n\n368\n00:17:31.640 --> 00:17:33.514\nAnd so, we put that in.\n\n369\n00:17:33.514 --> 00:17:35.255\nWe press Enter.\n\n370\n00:17:35.255 --> 00:17:42.175\nAnd then in step three, we install\nthe software based CSP RMS in other words.\n\n371\n00:17:42.175 --> 00:17:46.532\nThe private key is now being installed\non to the new server in step three,\n\n372\n00:17:46.532 --> 00:17:48.038\nso just be aware of this.\n\n373\n00:17:48.038 --> 00:17:50.126\nWe open an admin level prompt, again,\n\n374\n00:17:50.126 --> 00:17:53.822\nessentially go to the same directory\nwe were just in to do the export.\n\n375\n00:17:53.822 --> 00:17:56.890\nIt's gonna be on the same\nlocation in the new server.\n\n376\n00:17:56.890 --> 00:17:58.570\nAnd then we type in this command again.\n\n377\n00:17:58.570 --> 00:18:01.490\nIt's essentially the same\ncommand from up above, but\n\n378\n00:18:01.490 --> 00:18:06.550\ninstead of at the very end where\nwe do privatekey.xml -pri, right?\n\n379\n00:18:06.550 --> 00:18:10.270\nWe do privatekey.xml -exp, right?\n\n380\n00:18:10.270 --> 00:18:11.590\nAnd so that identifies it.\n\n381\n00:18:11.590 --> 00:18:13.330\nI didn't quite highlight that,\nthere we go.\n\n382\n00:18:13.330 --> 00:18:15.540\nThat identifies for us, right?\n\n383\n00:18:15.540 --> 00:18:19.860\nThe fact that we are importing\nthat exported key, all right?\n\n384\n00:18:19.860 --> 00:18:22.830\nSo that's what we're doing in\ninstantiating and installing the new one.\n\n385\n00:18:22.830 --> 00:18:25.830\nAnd so, once we've done that and\nwe have all that set up.\n\n386\n00:18:25.830 --> 00:18:30.345\nWe've essentially exported and\nthen imported our key into the new\n\n387\n00:18:30.345 --> 00:18:35.090\ncontainer in the new system\nthat's been installed, we're set.\n\n388\n00:18:35.090 --> 00:18:39.300\nWe're ready to go and\nthen we are able to get up and running and\n\n389\n00:18:39.300 --> 00:18:42.840\ncontinue offering services\nusing this particular solution.\n\n390\n00:18:42.840 --> 00:18:44.300\nSo just keep that in mind.\n\n391\n00:18:44.300 --> 00:18:47.240\nThese are the high level steps\nthat we would go through.\n\n392\n00:18:47.240 --> 00:18:52.190\nAnd you tend to have to do this maybe\nonce while you're using ADRMS if that.\n\n393\n00:18:52.190 --> 00:18:55.540\nMaybe twice if you really are dealing\nwith a lot of systems and\n\n394\n00:18:55.540 --> 00:18:57.120\nthere's a lot of turn over time.\n\n395\n00:18:57.120 --> 00:18:58.400\nAs you're upgrading and migrating, but\n\n396\n00:18:58.400 --> 00:19:00.660\nthis is not the kind of thing\nyou would do very often.\n\n397\n00:19:00.660 --> 00:19:03.519\nMany of you, if you're using AD RMS and\nhave it sitting around.\n\n398\n00:19:03.519 --> 00:19:05.787\nAnd haven't really bothered to upgrade or\n\n399\n00:19:05.787 --> 00:19:09.768\nupdate it on whatever platform it's\nbeen built on, you may never do this.\n\n400\n00:19:09.768 --> 00:19:12.342\nBecause it's just functioning and\nyou don't worry about that.\n\n401\n00:19:12.342 --> 00:19:14.430\nSo it's one of those things\nthat you may do, but\n\n402\n00:19:14.430 --> 00:19:18.100\nyou may do only once if at all, in your\ncareer, dealing with these systems.\n\n403\n00:19:18.100 --> 00:19:21.560\nSo it's something you're likely not to\nreally have a lot of experience with.\n\n404\n00:19:21.560 --> 00:19:22.980\nIt would be good for\nyou to take some time and\n\n405\n00:19:22.980 --> 00:19:25.180\njust make sure you're\ncomfortable with how to do this.\n\n406\n00:19:25.180 --> 00:19:29.480\nLots of minutiae there, could be good for\na question or two on the exam.\n\n407\n00:19:29.480 --> 00:19:30.230\nNever know.\n\n408\n00:19:30.230 --> 00:19:33.530\nMaybe that path statement,\nwhat's the directory we go to?\n\n409\n00:19:33.530 --> 00:19:37.690\nMaybe the actual programmatic\nstep where we do\n\n410\n00:19:37.690 --> 00:19:41.675\nthe ASPNET_regiis and\nwhat's that string look like.\n\n411\n00:19:41.675 --> 00:19:43.910\nThose are the kind of things that\nget asked about just so you know.\n\n412\n00:19:43.910 --> 00:19:46.165\nAt least that's what I've\nbeen told in theory, anyway.\n\n413\n00:19:46.165 --> 00:19:47.670\n&gt;&gt; [LAUGH]\n&gt;&gt; May be the case.\n\n414\n00:19:47.670 --> 00:19:49.040\nAnd I'm not saying any more about that.\n\n415\n00:19:49.040 --> 00:19:49.977\n&gt;&gt; You cannot confirm or\ndeny these reports.\n\n416\n00:19:49.977 --> 00:19:53.999\n&gt;&gt; I have no knowledge of that statement\nat all, but that's what I've been told.\n\n417\n00:19:53.999 --> 00:19:56.650\nWould be the case if l was to\nhave knowledge and l don't.\n\n418\n00:19:56.650 --> 00:20:00.336\nSo l can't possibly speak authoritatively\nto whether that would be the case or not.\n\n419\n00:20:00.336 --> 00:20:02.240\nAll right, so, planning and implementing.\n\n420\n00:20:02.240 --> 00:20:03.914\nThese are some thing we\njust wanna think about.\n\n421\n00:20:03.914 --> 00:20:06.675\nAround backup restore and\nmanagement through an upgrade and\n\n422\n00:20:06.675 --> 00:20:08.037\na decommissioning process.\n\n423\n00:20:08.037 --> 00:20:10.660\nVery important for\nus to be thinking about that.\n\n424\n00:20:10.660 --> 00:20:12.870\nWhat about AD RMS templates and policies?\n\n425\n00:20:12.870 --> 00:20:15.110\nThese are another big part of what we do.\n\n426\n00:20:15.110 --> 00:20:17.630\nRights policy templates\nare used to control access\n\n427\n00:20:17.630 --> 00:20:21.340\nbased on how we provision them out,\nwhat users will or will not be able to do.\n\n428\n00:20:21.340 --> 00:20:24.276\nAs they are gonna go in and essentially\ndictate, or we dictate, as the owner.\n\n429\n00:20:24.276 --> 00:20:29.280\nThe conditions of use and the terms\nof use that users will be bound by.\n\n430\n00:20:29.280 --> 00:20:30.213\nSo this is important.\n\n431\n00:20:30.213 --> 00:20:33.190\nTemplates can contain\ntypically nine things.\n\n432\n00:20:33.190 --> 00:20:34.224\nI just wanna walk you\nthrough what these are.\n\n433\n00:20:34.224 --> 00:20:39.009\nAs a matter of fact give me just\ntwo shakes of a lamb's tail.\n\n434\n00:20:39.009 --> 00:20:42.120\nI will put them up on the screen for\nyou right here.\n\n435\n00:20:42.120 --> 00:20:47.020\nSo just give me half a second and\nI will show you exactly what those are.\n\n436\n00:20:49.276 --> 00:20:52.425\nAnd I would say more than half a second,\n\n437\n00:20:52.425 --> 00:20:55.800\nbecause I did not plan\nto show them to you.\n\n438\n00:20:55.800 --> 00:20:57.525\nI was just going to talk about them.\n\n439\n00:20:57.525 --> 00:20:58.654\nAnd so give me a second,\n\n440\n00:20:58.654 --> 00:21:01.771\nI'm just putting them into my notes\nin a way that you can see them.\n\n441\n00:21:01.771 --> 00:21:03.223\nSo give me just one second there.\n\n442\n00:21:03.223 --> 00:21:04.628\nAll right, so\nif we just go back to my machine,\n\n443\n00:21:04.628 --> 00:21:06.180\ninstead of just rattling off the list.\n\n444\n00:21:06.180 --> 00:21:09.560\nI will simply make them available for\nyou, poof, look, wow, magic.\n\n445\n00:21:09.560 --> 00:21:10.630\nThere they are right there.\n\n446\n00:21:10.630 --> 00:21:12.292\nSo what can templates contain?\n\n447\n00:21:12.292 --> 00:21:15.730\nThere are nine traditional things that\nwe often see in the template format.\n\n448\n00:21:15.730 --> 00:21:18.380\nYou could see a list there, that way\nwe just don't have to rattle them off.\n\n449\n00:21:18.380 --> 00:21:23.270\nWe can just gaze adoringly and lovingly\non them and ponder the importance and\n\n450\n00:21:23.270 --> 00:21:25.080\nthe majesty of the template.\n\n451\n00:21:25.080 --> 00:21:27.560\nJoin me, ponder,\nlook at the majesty in these.\n\n452\n00:21:27.560 --> 00:21:28.840\n&gt;&gt; So beautiful.\n\n453\n00:21:28.840 --> 00:21:31.740\n&gt;&gt; Yes, awesome, awesome, so,\nwhat are the things we have here?\n\n454\n00:21:31.740 --> 00:21:34.630\nWe have a username or, excuse me,\na name and description rather.\n\n455\n00:21:34.630 --> 00:21:37.930\nWe have users and groups that\ncan be granted content licenses.\n\n456\n00:21:37.930 --> 00:21:39.984\nIf you remember one of the first episodes.\n\n457\n00:21:39.984 --> 00:21:42.184\nI talked about the fact that\nwe have that inclusion or\n\n458\n00:21:42.184 --> 00:21:44.641\nexclusion list that will grant or\ndisallow users rights.\n\n459\n00:21:44.641 --> 00:21:47.470\nAnd that's part of what\nthe template can be set up to do.\n\n460\n00:21:47.470 --> 00:21:50.900\nRights associated and\nconditions granted for those users.\n\n461\n00:21:50.900 --> 00:21:53.400\nWhen the expiration will occur,\nwe talked about the fact that\n\n462\n00:21:53.400 --> 00:21:56.650\ncontent can be expired so we just\nwanna make sure we're aware of that.\n\n463\n00:21:57.910 --> 00:22:01.071\nThe set of extended policies,\nthe revocation policy, the list for\n\n464\n00:22:01.071 --> 00:22:01.742\nrevocation.\n\n465\n00:22:01.742 --> 00:22:06.130\nThe refresh interval for revocation list,\nand the public key file for revocation.\n\n466\n00:22:06.130 --> 00:22:09.540\nSo these are all the things that\ntemplates will typically contain.\n\n467\n00:22:09.540 --> 00:22:11.940\nIt'd be the moving parts and\nelements that are programmed into them.\n\n468\n00:22:11.940 --> 00:22:14.130\nWould be good for you to have\nknowledge of those nine things,\n\n469\n00:22:14.130 --> 00:22:17.660\nagain may want to at some point\nanswer questions about them.\n\n470\n00:22:17.660 --> 00:22:19.930\nAnd somebody would stop you\nrandomly on the street and\n\n471\n00:22:19.930 --> 00:22:22.630\nsay, hey,\nwhat's that item that's on the list?\n\n472\n00:22:22.630 --> 00:22:24.620\nProbably not in order but\njust generically.\n\n473\n00:22:24.620 --> 00:22:27.630\nWhat are any of those nine items,\ncould you mix and match them and\n\n474\n00:22:27.630 --> 00:22:29.520\ndrag them from one side of\nthe screen to the other?\n\n475\n00:22:29.520 --> 00:22:32.960\nAnd put them over there and\nbe correct in your assumptions?\n\n476\n00:22:32.960 --> 00:22:33.640\nI would wanna make sure\ni know what those are.\n\n477\n00:22:33.640 --> 00:22:35.700\n&gt;&gt; That's right,\nit happens to me all the time.\n\n478\n00:22:35.700 --> 00:22:37.974\nI was walking down the road and\nsome guy's like,\n\n479\n00:22:37.974 --> 00:22:41.530\nhey real quick I got all these\nthings you need to slide together.\n\n480\n00:22:41.530 --> 00:22:43.080\nMake them fit correctly.\n\n481\n00:22:43.080 --> 00:22:44.658\n&gt;&gt; That's why I don't get in\nthe car with you very often.\n\n482\n00:22:44.658 --> 00:22:45.640\n&gt;&gt; [LAUGH]\n&gt;&gt; Because\n\n483\n00:22:45.640 --> 00:22:47.902\nthose kind of things don't happen\nto me unless I'm with you.\n\n484\n00:22:47.902 --> 00:22:49.745\n&gt;&gt; [LAUGH]\n&gt;&gt; That's an issue.\n\n485\n00:22:49.745 --> 00:22:51.920\nThat's a conversation for\na whole other time.\n\n486\n00:22:51.920 --> 00:22:54.830\nAll right, so just make sure you're\nfamiliar with what templates can contain.\n\n487\n00:22:54.830 --> 00:22:56.144\nObviously is very important\ninformation there.\n\n488\n00:22:56.144 --> 00:22:59.520\nWanna make sure we're thinking about\nhow we're gonna populate those items.\n\n489\n00:22:59.520 --> 00:23:02.420\nAnd we'll be talking about templates\na little more in detail as we continue our\n\n490\n00:23:02.420 --> 00:23:03.440\nconversation here.\n\n491\n00:23:03.440 --> 00:23:04.620\nHow do we distribute templates?\n\n492\n00:23:04.620 --> 00:23:06.880\nThat's something else we wanna\nconsider and think about.\n\n493\n00:23:06.880 --> 00:23:09.790\nTo make these templates available,\nwe may wanna offline them.\n\n494\n00:23:09.790 --> 00:23:11.700\nHave them developed for\noffline publishing,\n\n495\n00:23:11.700 --> 00:23:14.538\nwe have to deploy them out to client\ncomputers from a shared folder.\n\n496\n00:23:14.538 --> 00:23:18.170\nIf we're gonna do this,\nwe want to make sure we're aware of that.\n\n497\n00:23:18.170 --> 00:23:21.274\nIn operating systems, client OSs that\nsupports this, meaning Windows 10,\n\n498\n00:23:21.274 --> 00:23:22.306\nWindows 8, Windows 7.\n\n499\n00:23:22.306 --> 00:23:26.380\nActually all the way back to Windows Vista\nwith service pack one, believe it or not.\n\n500\n00:23:26.380 --> 00:23:29.750\nAnybody that's still brave enough to admit\nthat they are running Windows Vista.\n\n501\n00:23:29.750 --> 00:23:31.330\nI actually used Windows Vista\nwhen it came out.\n\n502\n00:23:31.330 --> 00:23:32.429\nI thought it was a good operating system.\n&gt;&gt; I did as well.\n\n503\n00:23:32.429 --> 00:23:33.343\n&gt;&gt; I liked it a lot.\n\n504\n00:23:33.343 --> 00:23:37.050\n&gt;&gt; I liked it except for the fact that\na lot of things just didn't work on it.\n\n505\n00:23:37.050 --> 00:23:38.970\n[LAUGH]\n&gt;&gt; I didn't have that issue.\n\n506\n00:23:38.970 --> 00:23:40.170\nThere were [INAUDIBLE] drivers.\n\n507\n00:23:40.170 --> 00:23:40.840\n&gt;&gt; A few things.\n\n508\n00:23:40.840 --> 00:23:44.357\n&gt;&gt; There were some driver issues,\nbut I actually was recalcitrant.\n\n509\n00:23:44.357 --> 00:23:47.133\nI did not wanna leave it and\ngo to Windows 7.\n\n510\n00:23:47.133 --> 00:23:50.253\nI actually was like, wow,\nI like Vista, I wanna stay on Vista.\n\n511\n00:23:50.253 --> 00:23:54.913\n&gt;&gt; It's funny cuz if you like Vista you\nlove Windows 7 cuz Windows 7 was like This\n\n512\n00:23:54.913 --> 00:23:55.982\ndid look better.\n\n513\n00:23:55.982 --> 00:23:58.072\n&gt;&gt; It was.\nAlso when I moved to Windows 7 I was\n\n514\n00:23:58.072 --> 00:23:58.810\nhappy with it.\n\n515\n00:23:58.810 --> 00:24:00.320\nI mean I still use it to this day.\n\n516\n00:24:00.320 --> 00:24:03.110\n&gt;&gt; They had to drag me kicking and\nscreaming to go onto XP from 2000.\n\n517\n00:24:03.110 --> 00:24:05.310\nI was just like that's not happening.\n\n518\n00:24:05.310 --> 00:24:08.000\n&gt;&gt; They had to drag me kicking and\nscreaming at NT 4.\n\n519\n00:24:08.000 --> 00:24:10.520\nIt wasn't because I\nloved NT 4 workstation,\n\n520\n00:24:10.520 --> 00:24:12.510\nit was because I loved pinball.\n\n521\n00:24:12.510 --> 00:24:15.850\nWorld's best video game that\nthey ever created in a computer.\n\n522\n00:24:15.850 --> 00:24:18.110\n&gt;&gt; About the best time waster ever.\n\n523\n00:24:18.110 --> 00:24:20.390\n&gt;&gt; And just,\nI mean like It was the perfect game.\n\n524\n00:24:20.390 --> 00:24:22.567\nAnd then they just went ahead and\nthey just got rid of it.\n\n525\n00:24:22.567 --> 00:24:24.170\nI mean that was just, it was horrible.\n\n526\n00:24:24.170 --> 00:24:26.540\nBut that was the only reason\nthat I loved Windows.\n\n527\n00:24:26.540 --> 00:24:28.000\n&gt;&gt; We're gonna bring it back.\n\n528\n00:24:28.000 --> 00:24:28.920\nYou can.\n\n529\n00:24:28.920 --> 00:24:30.849\nThere are emulators out there,\nyou can actually do that.\n\n530\n00:24:30.849 --> 00:24:33.184\nI actually keep a VM around just so\nI can play that from time to time.\n\n531\n00:24:33.184 --> 00:24:34.134\n&gt;&gt; Do you really?\n\n532\n00:24:34.134 --> 00:24:34.950\nGood job.\n\n533\n00:24:34.950 --> 00:24:36.130\n&gt;&gt; Yeah, I do.\n\n534\n00:24:36.130 --> 00:24:37.420\nI keep one around for DOS as well.\n\n535\n00:24:37.420 --> 00:24:40.050\nJust so that when I get\nbored I can go in there and\n\n536\n00:24:40.050 --> 00:24:43.750\npractice up my pre-PowerShell skills,\njust because you never know.\n\n537\n00:24:43.750 --> 00:24:44.520\nAll right, so anyway, so\n\n538\n00:24:44.520 --> 00:24:46.960\nwe're talking [LAUGH] about templates\nmaking them available for offline.\n\n539\n00:24:46.960 --> 00:24:51.610\nSo I was just saying anything in Windows\n10 all the way back to Vista SP1,\n\n540\n00:24:51.610 --> 00:24:53.740\non the server side, 16, 12, 2008, 2008 R2.\n\n541\n00:24:53.740 --> 00:24:57.990\nWe are managing these client policy\ntemplates from the desktop side,\n\n542\n00:24:57.990 --> 00:25:00.710\nso we have to make them available\nif they're gonna be used offline.\n\n543\n00:25:00.710 --> 00:25:01.470\nWe pull for\n\n544\n00:25:01.470 --> 00:25:04.550\ntemplate distribution, and we pull them\nthrough what's called the pipeline, so\n\n545\n00:25:04.550 --> 00:25:07.900\nwe check every so often to refresh\nthem and make sure they're up to date.\n\n546\n00:25:07.900 --> 00:25:09.530\nSo we gotta make sure they are available.\n\n547\n00:25:09.530 --> 00:25:13.280\nAny add, remove, modify,\ndeletion events are gonna update that.\n\n548\n00:25:13.280 --> 00:25:17.560\nWe detect those changes and we update the\nlocal rights policy template by applying\n\n549\n00:25:17.560 --> 00:25:20.775\nthe changes back on top during\nour next refresh cycle.\n\n550\n00:25:20.775 --> 00:25:25.720\nWe got a couple of just little\npathways that are available here for\n\n551\n00:25:25.720 --> 00:25:27.540\nus, just to show you\nwhere this things are.\n\n552\n00:25:27.540 --> 00:25:32.020\nIf you give me just one quick second,\nI will put those up for\n\n553\n00:25:32.020 --> 00:25:34.589\nyou here just so you can see them.\n\n554\n00:25:34.589 --> 00:25:41.330\nIf we take a look right Here.\n\n555\n00:25:41.330 --> 00:25:43.560\nJust go ahead and\nif we could, there we go.\n\n556\n00:25:43.560 --> 00:25:47.083\nSo computers that are running Vista\nwith SP1 or newer, meaning any of\n\n557\n00:25:47.083 --> 00:25:51.400\nyour desktop clients, will find the\ntemplates in the %localappdata% directory.\n\n558\n00:25:51.400 --> 00:25:55.600\nSo again, just a system variable string\nfor whatever that winds up being.\n\n559\n00:25:55.600 --> 00:25:58.340\nMicrosoft DRM templates,\nthat's where you'll look.\n\n560\n00:25:58.340 --> 00:26:00.370\nIf we're on computers\nrunning prior to that,\n\n561\n00:26:00.370 --> 00:26:04.070\nnot that hopefully we have any of those\nanymore, but you know you never know.\n\n562\n00:26:04.070 --> 00:26:07.810\nIf there are any old ones like you\nwere saying Windows XP, Windows 2000,\n\n563\n00:26:07.810 --> 00:26:11.200\nwhatever,\n%appData%\\Microsoft\\URM\\templates.\n\n564\n00:26:11.200 --> 00:26:15.400\nIn other words, we changed out\nthe app data for local app data.\n\n565\n00:26:15.400 --> 00:26:20.520\nThey just added the local to that as\nwe started with going forward from,\n\n566\n00:26:20.520 --> 00:26:22.540\nI guess,\nVista forward is where we did that.\n\n567\n00:26:22.540 --> 00:26:23.860\nSo just be aware of that.\n\n568\n00:26:23.860 --> 00:26:28.580\nYou may again wanna know those directories\nspecifically, those variable statements.\n\n569\n00:26:28.580 --> 00:26:30.860\nYou may come up against\nthose at some point.\n\n570\n00:26:30.860 --> 00:26:34.420\nDealing with this technology would be\ngood for you to have knowledge of that.\n\n571\n00:26:34.420 --> 00:26:35.960\nSo just be aware of that.\n\n572\n00:26:35.960 --> 00:26:37.850\nAgain, also just a big disclaimer there,\nand\n\n573\n00:26:37.850 --> 00:26:40.690\nI left it up on the screen specifically so\nwhen I tell you, you w ill also be able to\n\n574\n00:26:40.690 --> 00:26:43.810\nponder it while we're talking as\nyou're listening and you're watching.\n\n575\n00:26:43.810 --> 00:26:47.010\nDo not, it should actually be in\nbig bold flashing capital letters,\n\n576\n00:26:47.010 --> 00:26:49.190\ndo not delete policy templates,\n\n577\n00:26:49.190 --> 00:26:54.010\nbecause if you do, all content\nmanaged by them becomes inaccessible.\n\n578\n00:26:54.010 --> 00:26:55.350\nMeaning, hey guess what?\n\n579\n00:26:55.350 --> 00:26:59.240\nI have all the presentation documents for\nthat big shareholder meeting, and\n\n580\n00:26:59.240 --> 00:27:00.680\nguess what Joe just did.\n\n581\n00:27:00.680 --> 00:27:03.210\nGuess what you're not presenting at that\nbig shareholder meeting cuz you no longer\n\n582\n00:27:03.210 --> 00:27:07.690\nhave rights to see it because the template\nis what controls and structures access.\n\n583\n00:27:07.690 --> 00:27:11.370\nYou get rid of that, it's essentially\ndata with no front door and no key,\n\n584\n00:27:11.370 --> 00:27:13.990\nso-\n&gt;&gt; It has no idea how to understand what\n\n585\n00:27:13.990 --> 00:27:14.860\nto do, right?\n\n586\n00:27:14.860 --> 00:27:18.180\n&gt;&gt; It doesn't, yeah,\nthere's no instructions, no\n\n587\n00:27:18.180 --> 00:27:22.900\nmap that tells it how to allow the license\nto be processed and how to open the door.\n\n588\n00:27:22.900 --> 00:27:25.590\nSo you basically have just\nshot yourself in the foot.\n\n589\n00:27:25.590 --> 00:27:28.080\nThat's the DDOSing\nconversation we had before.\n\n590\n00:27:28.080 --> 00:27:28.740\n&gt;&gt; That's right.\n\n591\n00:27:28.740 --> 00:27:30.960\n&gt;&gt; You do not want to do that, right?\n\n592\n00:27:30.960 --> 00:27:33.550\nNot gonna- I don't do a good George Bush,\nyou do a good George?\n\n593\n00:27:33.550 --> 00:27:35.707\n&gt;&gt; Not gonna do it, not at this juncture.\n\n594\n00:27:35.707 --> 00:27:36.840\n[LAUGH]\n&gt;&gt; Not prudent,\n\n595\n00:27:36.840 --> 00:27:37.540\nnot prudent, that's the one right there.\n\n596\n00:27:37.540 --> 00:27:38.940\n&gt;&gt; Wouldn't be prudent, that's right.\n\n597\n00:27:38.940 --> 00:27:41.010\n&gt;&gt; Right, so\nthat's what we're talking about.\n\n598\n00:27:41.010 --> 00:27:43.360\nSo make sure that we are not doing that.\n\n599\n00:27:43.360 --> 00:27:46.540\nThat can actually lead to\nsignificant challenges for you.\n\n600\n00:27:46.540 --> 00:27:49.110\nYou don't, obviously, want to have to\nthen deal with recovering from that,\n\n601\n00:27:49.110 --> 00:27:51.180\nbecause that is a more involved process.\n\n602\n00:27:51.180 --> 00:27:52.710\nSo just make sure you're aware of that.\n\n603\n00:27:52.710 --> 00:27:56.150\nThose will be some of the really important\nthings we wanna think about with regards\n\n604\n00:27:56.150 --> 00:28:01.300\nto templates, regards to backing up and\nrestoring any DR activities,\n\n605\n00:28:01.300 --> 00:28:03.640\ndecommissioning and\nmigrating and upgrading.\n\n606\n00:28:03.640 --> 00:28:04.940\nAll those things we talked about.\n\n607\n00:28:04.940 --> 00:28:09.030\nAgain, very important elements of not only\nhow to manage the technology in the real\n\n608\n00:28:09.030 --> 00:28:10.840\nworld, cuz clearly it's\nvery important there.\n\n609\n00:28:10.840 --> 00:28:13.740\nBut also a very important elements\nwith regards to knowledge matters\n\n610\n00:28:13.740 --> 00:28:15.360\nbeen around the exam preparations.\n\n611\n00:28:15.360 --> 00:28:19.280\nThese are all key specific objectives\nidentified in this area that could show up\n\n612\n00:28:19.280 --> 00:28:19.820\non the exam.\n\n613\n00:28:19.820 --> 00:28:24.010\nAnd you gonna know how to engage in these\nactivities in order to be succesful.\n\n614\n00:28:24.010 --> 00:28:27.580\n&gt;&gt; Well, it sounds like that's all we\nhave to say about rights management.\n\n615\n00:28:27.580 --> 00:28:30.530\nAnd that would be a true\nsentence if it weren't false.\n\n616\n00:28:30.530 --> 00:28:32.205\n&gt;&gt; Cuz it's not absolutely true.\n\n617\n00:28:32.205 --> 00:28:33.470\n&gt;&gt; [LAUGH] Exactly right.\n\n618\n00:28:33.470 --> 00:28:35.483\n&gt;&gt; Cuz there are exclusions\nthat are gonna be coming up.\n\n619\n00:28:35.483 --> 00:28:36.020\n&gt;&gt; That'll be fun right?\n\n620\n00:28:36.020 --> 00:28:37.210\n&gt;&gt; Exclusion policies.\n\n621\n00:28:37.210 --> 00:28:42.700\n&gt;&gt; I wanna be able to say I want\nall this to apply except for\n\n622\n00:28:42.700 --> 00:28:45.320\nthese C-level people because\nthey're special, apparently.\n\n623\n00:28:45.320 --> 00:28:47.490\nSo that's gonna be a lot of fun\nto see how we can do that and\n\n624\n00:28:47.490 --> 00:28:50.970\nmake our higher ups happy in their job.\n\n625\n00:28:50.970 --> 00:28:51.880\nAnd you know what?\n\n626\n00:28:51.880 --> 00:28:53.350\nYou and I might need an exclusion as well.\n\n627\n00:28:53.350 --> 00:28:55.330\nSo you never know when\nthese might come in handy.\n\n628\n00:28:55.330 --> 00:28:58.750\nLooking forward to seeing how we can\nmake that happen instead of RMS.\n\n629\n00:28:58.750 --> 00:29:00.190\nAdam, thanks for joining us this far, but\n\n630\n00:29:00.190 --> 00:29:03.550\nit does look like we're moving\ninto what is it, part four now?\n\n631\n00:29:03.550 --> 00:29:04.320\n&gt;&gt; I've lost count.\n\n632\n00:29:04.320 --> 00:29:05.336\nThere's so many.\n&gt;&gt; I've told you,\n\n633\n00:29:05.336 --> 00:29:09.190\nthe mega- I forgot what it was now,\nmega something mega.\n\n634\n00:29:09.190 --> 00:29:10.200\nIt's going big.\n\n635\n00:29:10.200 --> 00:29:10.830\nWe're going big or\n\n636\n00:29:10.830 --> 00:29:13.980\ngoing home with this little\nminiseries inside of our series here.\n\n637\n00:29:13.980 --> 00:29:15.180\nJoin us back for that.\n\n638\n00:29:15.180 --> 00:29:18.320\nBut as for this episode, we've run out\nof time, so we're gonna go ahead and\n\n639\n00:29:18.320 --> 00:29:19.640\nsign off for ITPro TV.\n\n640\n00:29:19.640 --> 00:29:21.820\nI've been your host Daniel Lowrie.\n\n641\n00:29:21.820 --> 00:29:22.730\n&gt;&gt; I'm Adam Gordon.\n\n642\n00:29:22.730 --> 00:29:25.402\n&gt;&gt; And we'll see you next time.\n\n643\n00:29:25.402 --> 00:29:31.344\n[MUSIC]\n\n644\n00:29:31.344 --> 00:29:33.135\nThank you for watching ITPro.TV.\n\n",
          "vimeoId": "213238208"
        },
        {
          "description": "In this episode, Daniel and Adam overview the concepts and components for implementing Rights Management. Topics discussed here include options for configuring AD-RMS Exclusion Policies, planning the AD-RMS Super-Users group, integration with Sharepoint, integration with ADFS, and AD-RMS with Azure.",
          "length": "1850",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-4-implementing_rights_management_pt4-041317-PGM.00_00_11_27.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-4-implementing_rights_management_pt4-041317-PGM.00_00_11_27.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-6-4-implementing_rights_management_pt4-041317-PGM.00_00_11_27.Still001-sm.jpg",
          "title": "Implementing Rights Management Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.250 --> 00:00:03.158\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:03.158 --> 00:00:05.907\n[CROSSTALK]\n\n3\n00:00:05.907 --> 00:00:08.206\n[MUSIC]\n\n4\n00:00:08.206 --> 00:00:11.909\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.909 --> 00:00:13.812\n&gt;&gt; All right, greetings everyone, and\n\n6\n00:00:13.812 --> 00:00:16.140\nwelcome to another great\nepisode of ITProTV.\n\n7\n00:00:16.140 --> 00:00:18.097\nI'm your host Daniel Lowrie and\n\n8\n00:00:18.097 --> 00:00:22.314\nin today's episode we're back\nwith more of that good old 7414.\n\n9\n00:00:22.314 --> 00:00:23.777\nThat's right you know it, you love it.\n\n10\n00:00:23.777 --> 00:00:27.328\nAnd of course, joining us in the studio,\nlending his expertise on that topic,\n\n11\n00:00:27.328 --> 00:00:28.873\nour good friend Mr. Adam Gordon.\n\n12\n00:00:28.873 --> 00:00:30.546\nAdam, welcome back,\nman how's it going today?\n\n13\n00:00:30.546 --> 00:00:31.243\n&gt;&gt; It is good.\n\n14\n00:00:31.243 --> 00:00:34.456\nI'm feeling like we have to carve\nout some exclusionary zones\n\n15\n00:00:34.456 --> 00:00:35.830\nto talk about this topic.\n\n16\n00:00:35.830 --> 00:00:36.734\n&gt;&gt; I'm feeling exclusive today.\n\n17\n00:00:36.734 --> 00:00:38.040\n&gt;&gt; I'm feeling exclusive.\n\n18\n00:00:38.040 --> 00:00:40.373\nAnd not just because I'm\nhanging out in your company but\n\n19\n00:00:40.373 --> 00:00:41.820\nbecause I am actually exclusive.\n\n20\n00:00:41.820 --> 00:00:43.400\nThere is only one me.\n\n21\n00:00:43.400 --> 00:00:45.440\nOtherwise there would be none of me.\n\n22\n00:00:45.440 --> 00:00:47.279\nAnd that would not be good,\ncuz I couldn't be here talking to you.\n\n23\n00:00:47.279 --> 00:00:50.600\nSo it's good that I am available,\naround, and exclusive.\n\n24\n00:00:50.600 --> 00:00:53.213\n&gt;&gt; Or the law of identity would break and\nthings would get weird.\n\n25\n00:00:53.213 --> 00:00:55.496\n&gt;&gt; The universe as we know it would just-\n&gt;&gt; Collapse on itself.\n\n26\n00:00:55.496 --> 00:00:58.864\n[LAUGH] We're getting real\nphilosophical all of a sudden there.\n\n27\n00:00:58.864 --> 00:01:00.163\n&gt;&gt; We will have problems\nthings will not go well.\n\n28\n00:01:00.163 --> 00:01:03.838\nThis happens when you take a break between\nepisodes you allow us to chat outside\n\n29\n00:01:03.838 --> 00:01:04.458\noff camera.\n\n30\n00:01:04.458 --> 00:01:07.221\n&gt;&gt; [LAUGH]\n&gt;&gt; All right, we're gonna continue talking\n\n31\n00:01:07.221 --> 00:01:09.624\nabout the RMS,\nthe features function capabilities here.\n\n32\n00:01:09.624 --> 00:01:14.471\nWe have talked about exclusion policies\na little bit when we think about\n\n33\n00:01:14.471 --> 00:01:18.857\nhow we're going to allow or\ndisallow interaction usage, etc.\n\n34\n00:01:18.857 --> 00:01:21.250\nWe can do this in three different ways.\n\n35\n00:01:21.250 --> 00:01:22.922\nWe have a solution policy\nthat support this.\n\n36\n00:01:22.922 --> 00:01:27.314\nWe could do this based on setting up\nan inclusion by user, by application, or\n\n37\n00:01:27.314 --> 00:01:29.081\nsomething called by Lockbox.\n\n38\n00:01:29.081 --> 00:01:31.870\nWe're gonna talk about\nthe difference between those three.\n\n39\n00:01:31.870 --> 00:01:33.650\nWhen we exclude by user,\n\n40\n00:01:33.650 --> 00:01:38.260\nwe are implementing an exclusion policy\nthat will allow us to say yes or\n\n41\n00:01:38.260 --> 00:01:43.850\nno essentially based on a user account\nbeing given or not given a license right?\n\n42\n00:01:43.850 --> 00:01:46.508\nSo if we obtained a license for\nusage, we are authorized.\n\n43\n00:01:46.508 --> 00:01:49.682\nIf we're excluded from\nobtaining a license for usage,\n\n44\n00:01:49.682 --> 00:01:53.474\nwe are excluded as crazy as that sounds,\nand as simple as it may be.\n\n45\n00:01:53.474 --> 00:01:56.390\nSo we specify either\nthe user's email address or\n\n46\n00:01:56.390 --> 00:02:00.445\nthe public key string of the rack\nassociated with the user's rack,\n\n47\n00:02:00.445 --> 00:02:03.807\nthe certificate that allows\nthem to be authenticated.\n\n48\n00:02:03.807 --> 00:02:07.650\nAnd that will allow us to exclude\nthe user by putting them on that list.\n\n49\n00:02:07.650 --> 00:02:10.230\nProbably easier to do the email\naddress more often than not,\n\n50\n00:02:10.230 --> 00:02:12.640\nthan the key string,\npublic key string for the rack.\n\n51\n00:02:12.640 --> 00:02:13.406\nBut we can do either one.\n\n52\n00:02:13.406 --> 00:02:16.911\nWhen we exclude from\nan application perspective,\n\n53\n00:02:16.911 --> 00:02:21.890\nwe can add exclusion lists or\nadd in exclusions for applications.\n\n54\n00:02:21.890 --> 00:02:26.400\nWe have to be aware of the fact\nthat we are stamping the usage or\n\n55\n00:02:26.400 --> 00:02:30.550\nthe information about usage\ninto these certificates and\n\n56\n00:02:30.550 --> 00:02:33.460\nthese conditions have to be specified,\neverything we're talking about.\n\n57\n00:02:33.460 --> 00:02:34.780\nHas to be detailed out.\n\n58\n00:02:34.780 --> 00:02:37.170\nSo the licenses is the sum\ntotal of all that.\n\n59\n00:02:37.170 --> 00:02:40.750\nAnd the license only binds to\nrights protected content for\n\n60\n00:02:40.750 --> 00:02:43.050\nthe right protected\ncontent it's issued for.\n\n61\n00:02:43.050 --> 00:02:47.460\nAnd so what we have to understand is\nthat of the application that asks for\n\n62\n00:02:47.460 --> 00:02:51.790\nthis license is on an exclusionary list,\nit will not be granted that license and\n\n63\n00:02:51.790 --> 00:02:53.210\nnot able to open the content.\n\n64\n00:02:53.210 --> 00:02:55.583\nSo again the idea is just,\nwhere do we bind,\n\n65\n00:02:55.583 --> 00:02:59.189\nwhere do we allow the exclusion to\ntake place and become enforced?\n\n66\n00:02:59.189 --> 00:03:03.955\nAnd so we configure these application\nexclusion policies on each cluster just\n\n67\n00:03:03.955 --> 00:03:05.820\nlike we do for the users.\n\n68\n00:03:05.820 --> 00:03:10.355\nAnd clients cannot use an excluded\napplication to request access to content\n\n69\n00:03:10.355 --> 00:03:13.980\nand expect to be granted that access\nbecause the license will not be issued and\n\n70\n00:03:13.980 --> 00:03:15.470\nwill not be able to be binded.\n\n71\n00:03:15.470 --> 00:03:16.521\nOr binded,\nthat's not the right way to say it.\n\n72\n00:03:16.521 --> 00:03:19.620\nIt will not able to be\nbound to that application.\n\n73\n00:03:19.620 --> 00:03:23.430\nSo we can exclude based on user identity,\nbased on application,\n\n74\n00:03:23.430 --> 00:03:26.670\nwhether the application is\nnot on the do not allow list.\n\n75\n00:03:26.670 --> 00:03:30.777\nAnd also what is called the Lockbox,\nthe lockbox version.\n\n76\n00:03:30.777 --> 00:03:34.472\nMicrosoft uses a Lockbox which\nis just fancy though process for\n\n77\n00:03:34.472 --> 00:03:39.214\nthe crypto graphic vault where we are\nstoring and maintaining our information,\n\n78\n00:03:39.214 --> 00:03:41.809\nthe private key specifically for the user.\n\n79\n00:03:41.809 --> 00:03:45.396\nIs enshrined and\ntherefore instantiated in the Lockbox.\n\n80\n00:03:45.396 --> 00:03:48.150\nAnd these Lockboxes are updated over time.\n\n81\n00:03:48.150 --> 00:03:50.547\nMicrosoft puts out new versions\nof them when there's a problem.\n\n82\n00:03:50.547 --> 00:03:54.297\nIf there is an issue,\nthere's a security vulnerability,\n\n83\n00:03:54.297 --> 00:03:56.780\nthen we may see an updated version.\n\n84\n00:03:56.780 --> 00:03:58.985\nAnd so we can peg to that version and\n\n85\n00:03:58.985 --> 00:04:04.399\nsay minimum version of Lockbox required\nis x 3, 5, 7, 1, 2, 4 or whatever.\n\n86\n00:04:04.399 --> 00:04:08.757\nAnd that will be the version or above that\nthe Lockbox must be out on the client for\n\n87\n00:04:08.757 --> 00:04:10.134\nthem to then be allowed.\n\n88\n00:04:10.134 --> 00:04:14.118\nIf it's below that version, essentially,\nhey there's a problem don't use this or\n\n89\n00:04:14.118 --> 00:04:14.850\nthat version.\n\n90\n00:04:14.850 --> 00:04:17.380\nIf we're below that,\nwe can't get the license.\n\n91\n00:04:17.380 --> 00:04:18.659\nAnd so the idea is the same.\n\n92\n00:04:18.659 --> 00:04:23.446\nBut we can enable these exclusions based\non user identity based on application\n\n93\n00:04:23.446 --> 00:04:26.137\nchoice and or based on security parameter.\n\n94\n00:04:26.137 --> 00:04:29.458\nBased on Lockbox versioning\nwhere we store the private keys.\n\n95\n00:04:29.458 --> 00:04:33.633\nJust make sure you're aware of that we\nexclude again based on the match or\n\n96\n00:04:33.633 --> 00:04:36.230\nallow based on the match of the version.\n\n97\n00:04:36.230 --> 00:04:39.574\nOr the detailed string, the connection\nID whatever the case may be.\n\n98\n00:04:39.574 --> 00:04:43.030\nSo pretty interesting when we think about\nthat because Lockbox version is one of\n\n99\n00:04:43.030 --> 00:04:45.690\nthose weird ones that most\npeople don't consider.\n\n100\n00:04:45.690 --> 00:04:47.530\nThey say yeah I know I\ncould do it based on user,\n\n101\n00:04:47.530 --> 00:04:49.010\nI could do it based on application.\n\n102\n00:04:49.010 --> 00:04:52.685\nAnd they often sometimes will\nconfuse application and Lockbox,\n\n103\n00:04:52.685 --> 00:04:55.103\nthinking it's two sides of the same coin.\n\n104\n00:04:55.103 --> 00:04:58.839\nAnd it's not technically, because although\nthe Lockbox is a piece of software,\n\n105\n00:04:58.839 --> 00:05:01.500\nit's a functionality\nimplement through software.\n\n106\n00:05:01.500 --> 00:05:04.100\nWe don't consider it to be\nan application in and of itself.\n\n107\n00:05:04.100 --> 00:05:06.210\nSo it's a distinct category,\njust be aware of that.\n\n108\n00:05:06.210 --> 00:05:09.391\nWe also have to think about\nthe AD RMS Super User Group.\n\n109\n00:05:09.391 --> 00:05:13.140\nThis is a group that has rights to\neverything on the system, think of this\n\n110\n00:05:13.140 --> 00:05:17.018\nis like an enterprise admin account or\ndomain admin account of the domain.\n\n111\n00:05:17.018 --> 00:05:21.239\nThis is a super user group that gives\nmembers rights to unencrypt and\n\n112\n00:05:21.239 --> 00:05:25.461\nto access and interact with any piece\nof data that is managed through\n\n113\n00:05:25.461 --> 00:05:28.110\nthe rights management system.\n\n114\n00:05:28.110 --> 00:05:30.220\nThe super user functionality not enabled,\n\n115\n00:05:30.220 --> 00:05:34.160\nnatural known by default, group is not\npopulated with users out of the box.\n\n116\n00:05:34.160 --> 00:05:35.739\nYou must enable it and\nthen put users into it.\n\n117\n00:05:35.739 --> 00:05:37.568\nBut if you choose to do that,\n\n118\n00:05:37.568 --> 00:05:42.130\nwe then will have this overarching\nuniversal administrative right.\n\n119\n00:05:42.130 --> 00:05:43.960\nAnd so we do wanna be aware of that, and\n\n120\n00:05:43.960 --> 00:05:46.570\nmake sure that we are thinking\nabout that as well.\n\n121\n00:05:46.570 --> 00:05:49.740\nWe do have to add that\nfunctionality in and turn it on.\n\n122\n00:05:49.740 --> 00:05:54.250\nIt's typically used for certain situations\nwhere we may need to go in, and\n\n123\n00:05:54.250 --> 00:05:58.403\nwe may need to enable recovery features or\ncapabilities for a group or\n\n124\n00:05:58.403 --> 00:06:01.996\na user to be to go and then pull data,\nthings of that nature.\n\n125\n00:06:01.996 --> 00:06:05.935\nSo it's not turned on because we don't\nneed this overarching administrative right\n\n126\n00:06:05.935 --> 00:06:06.663\nout of the box.\n\n127\n00:06:06.663 --> 00:06:11.020\nWe do have the cluster\nadministrative functions, right?\n\n128\n00:06:11.020 --> 00:06:13.880\nThe enterprise admin function\nthat we assign that we can use.\n\n129\n00:06:13.880 --> 00:06:16.380\nRemember the install account has\ngiven that right automatically.\n\n130\n00:06:16.380 --> 00:06:18.660\nWe talked about one of those\ndelegated administrative roles.\n\n131\n00:06:18.660 --> 00:06:22.568\nAnd so we do have that level of rights,\nbut this actually goes beyond that and\n\n132\n00:06:22.568 --> 00:06:24.585\nallows us to decrypt and understand and\n\n133\n00:06:24.585 --> 00:06:28.010\ninteract with all the data that's\nprotected by all the keys.\n\n134\n00:06:28.010 --> 00:06:30.528\nAnd so, this is a little bit beyond\njust the standard admin function.\n\n135\n00:06:30.528 --> 00:06:34.242\nSo you wanna be a little bit weary, a\nlittle bit careful with this role, really\n\n136\n00:06:34.242 --> 00:06:37.919\nnot a lot of good reasons to enable and\nturn this group role on and populate it.\n\n137\n00:06:37.919 --> 00:06:41.860\nBut there may be some associated\nwith the usage of this.\n\n138\n00:06:41.860 --> 00:06:43.840\nYou just wanna be thinking about that.\n\n139\n00:06:43.840 --> 00:06:46.970\nWe also, I mentioned this in some of the\nprior episodes, there have been so many,\n\n140\n00:06:46.970 --> 00:06:48.640\nit's hard to keep track.\n\n141\n00:06:48.640 --> 00:06:51.460\nBut I'm running out of fingers on my first\nhand to keep track of these by the way.\n\n142\n00:06:51.460 --> 00:06:54.120\nWe may have to go to a two hander in\norder to keep track of everything.\n\n143\n00:06:54.120 --> 00:06:55.435\n&gt;&gt; God forbid the socks have to come off.\n\n144\n00:06:55.435 --> 00:07:00.296\n&gt;&gt; That is like a crazy mega multi\nbody part episode count right\n\n145\n00:07:00.296 --> 00:07:03.620\nthere if we have to do fingers and toes.\n\n146\n00:07:03.620 --> 00:07:06.099\n&gt;&gt; Yeah.\n&gt;&gt; That would be pretty darn crazy.\n\n147\n00:07:06.099 --> 00:07:07.701\n&gt;&gt; We're probably gonna\nget letters at that point.\n\n148\n00:07:07.701 --> 00:07:10.335\n[LAUGH]\n&gt;&gt; I think we may have a problem with\n\n149\n00:07:10.335 --> 00:07:11.289\nthe toe lobby.\n\n150\n00:07:11.289 --> 00:07:12.787\nBeing unhappy about that.\n\n151\n00:07:12.787 --> 00:07:16.405\nAll right, so we've talked about\nintegrating both Exchange, and\n\n152\n00:07:16.405 --> 00:07:20.657\nSharePoint with ADRMS, and I mentioned\nwe could extend ADR MS R2 exchange into\n\n153\n00:07:20.657 --> 00:07:24.100\nshare point and we just wanna\nmake sure we're aware of that.\n\n154\n00:07:24.100 --> 00:07:28.768\nStarting with exchange server 2010, 2013\nalso 2016 can immigrate exchange here.\n\n155\n00:07:28.768 --> 00:07:33.249\nThere are some additional steps we\nhave to deal with if we're gonna\n\n156\n00:07:33.249 --> 00:07:37.905\nintegrate Exchange and let me jut\nmake sure that we are aware of this.\n\n157\n00:07:37.905 --> 00:07:40.500\nAnd give me just one second.\n\n158\n00:07:40.500 --> 00:07:42.770\nAnd I'm going to put-up for us.\n\n159\n00:07:42.770 --> 00:07:44.743\nWhat we need to do.\n\n160\n00:07:44.743 --> 00:07:48.320\nI'm just looking at my notes to\nget to the part that I need.\n\n161\n00:07:48.320 --> 00:07:50.222\nWhere is that?\nThat is right up here.\n\n162\n00:07:50.222 --> 00:07:54.437\nOkay, can we go to the,\njust give me a half second.\n\n163\n00:07:54.437 --> 00:07:56.211\nThere we go right there.\nJust clicking to make sure we can see it.\n\n164\n00:07:56.211 --> 00:07:58.958\nGot the scroll incorrect by one click.\n\n165\n00:07:58.958 --> 00:08:00.102\nNow we could see, I was almost there.\n\n166\n00:08:00.102 --> 00:08:03.960\nAll right, so I just wanted to point out\nbecause, when I explained this part I'm\n\n167\n00:08:03.960 --> 00:08:06.856\nnot gonna name this entire\nconnection string that we need for\n\n168\n00:08:06.856 --> 00:08:08.190\nthe federated email id.\n\n169\n00:08:08.190 --> 00:08:12.030\nThis thing right here, so I just wanted to\nput this up here so, you could see this.\n\n170\n00:08:12.030 --> 00:08:14.830\nBut, let me just basically\nparaphrase what's in this paragraph\n\n171\n00:08:14.830 --> 00:08:15.580\nso you understand.\n\n172\n00:08:15.580 --> 00:08:19.052\nThis is in shown notes you can\nactually get this information,\n\n173\n00:08:19.052 --> 00:08:22.789\nif we wanna do this, exchange has\nto be able to decrypt messages and\n\n174\n00:08:22.789 --> 00:08:25.426\nattachments that\nthe cluster is protecting.\n\n175\n00:08:25.426 --> 00:08:28.299\nIn order to be able to validate\nthe user have rights to see them,\n\n176\n00:08:28.299 --> 00:08:30.340\nwe need to interact with RMS to do this.\n\n177\n00:08:30.340 --> 00:08:33.890\nWe have to add a user account in that\nrepresents the exchange server to be able\n\n178\n00:08:33.890 --> 00:08:34.630\nto do this.\n\n179\n00:08:34.630 --> 00:08:38.500\nThis is one of the reasons why using\nthe ADRMS super user group would be\n\n180\n00:08:38.500 --> 00:08:41.185\nappropriate because,\nit gives us rights to be able to do that.\n\n181\n00:08:41.185 --> 00:08:44.703\nWe'd create essentially a,\nyour place holder account for exchange and\n\n182\n00:08:44.703 --> 00:08:46.780\nthen the computer account\nwould be used for\n\n183\n00:08:46.780 --> 00:08:50.297\nthe representation of that account\nwould be used to proxy and to allow for\n\n184\n00:08:50.297 --> 00:08:52.972\nthe description of the messages\non the exchange side.\n\n185\n00:08:52.972 --> 00:08:56.440\nSo, we create a mail enabled universal\ngroup distribution list that\n\n186\n00:08:56.440 --> 00:08:59.390\ncontains the federated delivery\nmail box user accounts.\n\n187\n00:08:59.390 --> 00:09:04.651\nThis is what we gonna be delegating\nright to, this box this mail box,\n\n188\n00:09:04.651 --> 00:09:11.197\nit's name drive here federated email.4C1,\nF4, DB etc, right all the way out.\n\n189\n00:09:11.197 --> 00:09:15.240\nSo, that's string is what you've looked\nfor, we can also add that accounts would\n\n190\n00:09:15.240 --> 00:09:18.504\nexisting mail enabled group if you\nwant too and drop that, one in.\n\n191\n00:09:18.504 --> 00:09:22.398\nSo, we have a couple of options but, we\nhave too little back end work and enable\n\n192\n00:09:22.398 --> 00:09:26.294\nthe super user group in order to allow\nExchange immigration to take place and so\n\n193\n00:09:26.294 --> 00:09:27.965\nthat's something to consider.\n\n194\n00:09:27.965 --> 00:09:31.161\nNow, you're not able to see\nthat user group or excuse me,\n\n195\n00:09:31.161 --> 00:09:35.402\nthat mailbox from the management console,\nmeaning with exchange there is no\n\n196\n00:09:35.402 --> 00:09:39.760\nway to see it in the GUI, that is\nan exchange management shell function.\n\n197\n00:09:39.760 --> 00:09:42.590\nSo, we come back to this idea of\nPowerShell and why PowerShell is so\n\n198\n00:09:42.590 --> 00:09:45.650\nimportant because, you would have to\nuse the exchange management shell\n\n199\n00:09:45.650 --> 00:09:47.930\nto be able to achieve\nthis particular results.\n\n200\n00:09:47.930 --> 00:09:50.790\nSo, just keep that in\nmind to be aware of that.\n\n201\n00:09:50.790 --> 00:09:54.720\nAnd that is something just a little aside,\nthat you'll want to know about, right.\n\n202\n00:09:54.720 --> 00:09:56.480\nSo, we also have PowerShell command.\n\n203\n00:09:56.480 --> 00:09:58.950\nSince we're here,\nwe'll talk about PowerShell real quick.\n\n204\n00:09:58.950 --> 00:10:01.530\nThat can be used to set\nup a super user group.\n\n205\n00:10:01.530 --> 00:10:02.770\nSo, we can do this from\nPowerShell if you choose too.\n\n206\n00:10:04.170 --> 00:10:08.740\nThere are two commands you will enter,\none at a time and you would then hit and\n\n207\n00:10:08.740 --> 00:10:09.954\ndraft to reach one,\n\n208\n00:10:09.954 --> 00:10:14.827\nset up in property path drive security\npower CC super power name is enable value.\n\n209\n00:10:14.827 --> 00:10:18.386\nDollar sign users true, are always true\nand then we have set up properties car\n\n210\n00:10:18.386 --> 00:10:22.276\ndrive security providers super user names,\nsuper user group, so we're setting up\n\n211\n00:10:22.276 --> 00:10:25.707\nthe super user and then the group that go,\nthat they will go into, right.\n\n212\n00:10:25.707 --> 00:10:28.569\nSo, we're doing that one each and\nI just detailed that here for\n\n213\n00:10:28.569 --> 00:10:31.890\nyou at the bottom that drive up there\nis the name of the PowerShell drive.\n\n214\n00:10:31.890 --> 00:10:34.550\nAnd group email is the email\naddress of the universal group\n\n215\n00:10:34.550 --> 00:10:36.800\nthat you were going to be designating,\nall right.\n\n216\n00:10:36.800 --> 00:10:41.820\nAnd then if we wanna disable that group,\nwe can do that right from here as well.\n\n217\n00:10:41.820 --> 00:10:43.100\nWe do it again with PowerShell.\n\n218\n00:10:43.100 --> 00:10:46.680\nPretty straight forward, sense with\nthe same command just in reverse.\n\n219\n00:10:46.680 --> 00:10:50.850\nAnd instead of $true, we do $false\nto signify that that is now false.\n\n220\n00:10:50.850 --> 00:10:52.650\nI suppose to a true items.\n\n221\n00:10:52.650 --> 00:10:53.810\nSo, just keep that in mind but,\n\n222\n00:10:53.810 --> 00:10:57.400\nwe can enable those super user groups,\nturn them on and off as needed and\n\n223\n00:10:57.400 --> 00:11:00.700\nwe can then enable that functionality\nlinking this to exchange.\n\n224\n00:11:00.700 --> 00:11:04.550\nIf we want to be able to\nintegrate with Exchange server,\n\n225\n00:11:04.550 --> 00:11:08.070\nwe do have some features that we pick\nup as the result of integration.\n\n226\n00:11:08.070 --> 00:11:09.530\nWe just probably wanna be aware of.\n\n227\n00:11:09.530 --> 00:11:11.680\nWe have transport protection rules,\n\n228\n00:11:11.680 --> 00:11:15.810\nthat allow us to protect email\nmessages with IRM if necessary.\n\n229\n00:11:15.810 --> 00:11:19.200\nSo, we can do that we have\ntransport decryption rules.\n\n230\n00:11:19.200 --> 00:11:21.770\nGive us the ability to be able to decrypt\n\n231\n00:11:21.770 --> 00:11:23.380\nthe messages that IRM is\nhelping us to protect.\n\n232\n00:11:23.380 --> 00:11:25.220\nSo, we have both sides of that divide.\n\n233\n00:11:25.220 --> 00:11:26.290\nThat becomes available.\n\n234\n00:11:26.290 --> 00:11:27.860\nGeneral report decryption.\n\n235\n00:11:27.860 --> 00:11:29.380\nWe can journal IRM protect and\n\n236\n00:11:29.380 --> 00:11:32.420\nmessages and keep track of them\nfrom the database perspective.\n\n237\n00:11:32.420 --> 00:11:34.690\nWe have IRM decryption for search.\n\n238\n00:11:34.690 --> 00:11:37.960\nWe can now archive and\nindex all this information.\n\n239\n00:11:37.960 --> 00:11:42.510\nAnd we can make it part of the searchable\nroutines that give us updated information.\n\n240\n00:11:42.510 --> 00:11:46.370\nAbout what information or what status\nof that information is, in Exchange and\n\n241\n00:11:46.370 --> 00:11:47.130\nSharePoint as well.\n\n242\n00:11:47.130 --> 00:11:48.128\nSo, just keep that in mind.\n\n243\n00:11:48.128 --> 00:11:51.420\nWe have IRM enabled\nMicrosoft Outlook Web App.\n\n244\n00:11:51.420 --> 00:11:53.920\nThis allows us to use and\n\n245\n00:11:54.990 --> 00:11:57.660\nin rack with that it's IRM\nprotected through Outlook Web App.\n\n246\n00:11:57.660 --> 00:12:00.050\nSo, if we're not running Outlook as\n\n247\n00:12:00.050 --> 00:12:04.190\na AD RMS enabled application we still\ncan use the web app and the browser.\n\n248\n00:12:04.190 --> 00:12:05.060\nTo be able to do that so,\n\n249\n00:12:05.060 --> 00:12:09.860\nit gives us complete functionality across\nthe spectrum of use, which is nice.\n\n250\n00:12:09.860 --> 00:12:11.900\nI'm one of those people that\nactually only uses OWA,\n\n251\n00:12:11.900 --> 00:12:15.230\nI don't use what we would\ncall a mappy flat client.\n\n252\n00:12:15.230 --> 00:12:16.740\nI have Outlook installed on my desktop.\n\n253\n00:12:16.740 --> 00:12:17.810\nI haven't for years.\n\n254\n00:12:17.810 --> 00:12:20.840\nI've used OWA for\nprobably better part of 15 years.\n\n255\n00:12:20.840 --> 00:12:22.600\nI'm really not gonna use\nanything about that.\n\n256\n00:12:22.600 --> 00:12:26.140\nSo, as a result, I'll be one of those\npeople that has to leverage to that\n\n257\n00:12:26.140 --> 00:12:30.070\nfunctionality, if I'm using IRM through\nthe web, I think that's important.\n\n258\n00:12:30.070 --> 00:12:32.170\nWe have IRM Enabled Unified Messaging.\n\n259\n00:12:32.170 --> 00:12:34.560\nSo, we can do this in Outlook web app.\n\n260\n00:12:34.560 --> 00:12:37.820\nIn the interface, we could do this with\nour voicemail that's coming through\n\n261\n00:12:37.820 --> 00:12:40.630\nthe Outlook system or\nthe Exchange system as well.\n\n262\n00:12:40.630 --> 00:12:42.410\nYou have to send the voicemail\nnow through there.\n\n263\n00:12:42.410 --> 00:12:44.800\nYou can listen to those as well,\nso that's kind of nice.\n\n264\n00:12:44.800 --> 00:12:46.660\nWe can also do pre licensing.\n\n265\n00:12:46.660 --> 00:12:49.000\nWe can attach a pre license\nto protect the message.\n\n266\n00:12:49.000 --> 00:12:50.810\nThis enables us to set up and\n\n267\n00:12:50.810 --> 00:12:54.920\nlook at attachments offline and have\nthe license attached ahead of time so,\n\n268\n00:12:54.920 --> 00:12:57.320\nthat it's available to us when we\nwant to interact with that data.\n\n269\n00:12:57.320 --> 00:12:59.160\nSo, this is also very nice.\n\n270\n00:12:59.160 --> 00:13:01.960\nWhen we go ahead and think about\ninteracting with SharePoint again,\n\n271\n00:13:01.960 --> 00:13:05.788\nwe can connect these two together or\nwe can install the ADR mass and\n\n272\n00:13:05.788 --> 00:13:06.820\nSharePoint systems.\n\n273\n00:13:06.820 --> 00:13:08.370\nThey have to be on separate servers.\n\n274\n00:13:08.370 --> 00:13:10.500\nTypically we'd break this\nfunctionality out so,\n\n275\n00:13:10.500 --> 00:13:12.270\nSharePoint gets installed on its own.\n\n276\n00:13:12.270 --> 00:13:14.920\nAnd then ADR mass is stood up in\nthe domain as we've talked about.\n\n277\n00:13:16.060 --> 00:13:18.700\nWe're protecting documents,\nnot that are up in SharePoint.\n\n278\n00:13:18.700 --> 00:13:20.240\nPeople often make this mistake and\n\n279\n00:13:20.240 --> 00:13:23.560\ndon't realize this about ADR\nmass integration and SharePoint.\n\n280\n00:13:23.560 --> 00:13:26.800\nWe're not protecting the data\nwhile it is stored in SharePoint,\n\n281\n00:13:26.800 --> 00:13:30.490\nthe rights are actually stripped\nout of the data when it is stored.\n\n282\n00:13:30.490 --> 00:13:34.430\nWe apply the rights to the data, when\nsomebody goes to actually open the data,\n\n283\n00:13:34.430 --> 00:13:35.840\ndownload it and take a look.\n\n284\n00:13:35.840 --> 00:13:38.580\nSo, we're not using the rights to\nprotect the data while in the storage in\n\n285\n00:13:38.580 --> 00:13:40.010\nthe SharePoint libraries.\n\n286\n00:13:40.010 --> 00:13:43.080\nBut, we're applying those rights when\nthe data is accessed so, it's kind of\n\n287\n00:13:43.080 --> 00:13:47.720\ninteresting because it's not the primary\nmechanism for storage security.\n\n288\n00:13:47.720 --> 00:13:49.920\nAnd for security of data in SharePoint.\n\n289\n00:13:49.920 --> 00:13:54.410\nWe use the SharePoint permissions model,\nwhatever is applied on the SQL side for\n\n290\n00:13:54.410 --> 00:13:58.250\nprotection there, because all this\ndata stored is data in SQL, right.\n\n291\n00:13:58.250 --> 00:14:00.930\nIt's all broken down essentially and\nput typically as blog,\n\n292\n00:14:00.930 --> 00:14:05.215\nbinary large object data in SQL, and\nthat's where we store SharePoint data.\n\n293\n00:14:05.215 --> 00:14:07.620\nSo,we're not applying those\npermissions directly, but\n\n294\n00:14:07.620 --> 00:14:10.250\nwe're applying them on rendering and use.\n\n295\n00:14:10.250 --> 00:14:12.180\nKind of an interesting little aside there.\n\n296\n00:14:12.180 --> 00:14:13.460\nWe remove all the protections.\n\n297\n00:14:13.460 --> 00:14:15.920\nAnd then again, once we download,\nwe apply them on the fly.\n\n298\n00:14:15.920 --> 00:14:18.930\nSo, that's kind of interesting, cuz\nthat's a different way of doing things.\n\n299\n00:14:18.930 --> 00:14:22.050\nA little bit of a different way,\nanyway, than what we would think of.\n\n300\n00:14:22.050 --> 00:14:24.770\nWe also can leverage and\nuse strong cryptography.\n\n301\n00:14:24.770 --> 00:14:29.989\nProtection with RMS, so that's kind of\nnice we can do is cryptographic mode 2,\n\n302\n00:14:29.989 --> 00:14:35.315\nstepping out from what the common\ncryptographic cryptographic mode 1.\n\n303\n00:14:35.315 --> 00:14:39.619\nThis allows stronger implementation of\nalgorithms and stronger key sizes and\n\n304\n00:14:39.619 --> 00:14:42.161\nultimately rather key spaces and\ntherefore,\n\n305\n00:14:42.161 --> 00:14:44.591\nstronger encryption protection overall.\n\n306\n00:14:44.591 --> 00:14:49.675\nSo, for example we can do, or l will say\nalgorithms traditionally encrypto mode 1,\n\n307\n00:14:49.675 --> 00:14:54.340\nat 1,024 bit encrypto mode 2,\nwe go to 2,048 bit encryption.\n\n308\n00:14:54.340 --> 00:14:57.353\nWhich is the minimum required by for\ninstance in the United States\n\n309\n00:14:57.353 --> 00:15:01.158\nthe US Federal Government Information\nSecurity Protection Standards, right.\n\n310\n00:15:01.158 --> 00:15:02.550\nSo, that's gonna be important.\n\n311\n00:15:02.550 --> 00:15:04.690\nSo, that gives us the ability to do that.\n\n312\n00:15:04.690 --> 00:15:08.720\nWe can also make cryptographic keys\na lot longer, as a result of this.\n\n313\n00:15:08.720 --> 00:15:13.395\nThe old mode Crypto-1 mode\nwas a 160 bit key length.\n\n314\n00:15:13.395 --> 00:15:15.300\nWell, that's good, that's not great.\n\n315\n00:15:15.300 --> 00:15:18.890\nWe actually now,\ncan go to 256 bit solutions, and\n\n316\n00:15:18.890 --> 00:15:20.480\nactually get even out beyond that.\n\n317\n00:15:20.480 --> 00:15:23.250\nSo, that's just something to consider and\nto be aware of.\n\n318\n00:15:23.250 --> 00:15:25.330\nJust a little added bonus there for you.\n\n319\n00:15:25.330 --> 00:15:28.680\nWe also can deal with and think about,\nand should be talking about and\n\n320\n00:15:28.680 --> 00:15:31.980\nthinking about how to implement\nexternal access or control and\n\n321\n00:15:31.980 --> 00:15:36.140\nrights management for\nexternal access to AD RMS services.\n\n322\n00:15:36.140 --> 00:15:39.093\nSomebody that is going to come come in,\nas we said,\n\n323\n00:15:39.093 --> 00:15:43.090\nfrom outside of our sphere of influence,\noutside of our directory.\n\n324\n00:15:43.090 --> 00:15:46.811\nIs gonna have to be what we would think\nof as talked about in the prior shows and\n\n325\n00:15:46.811 --> 00:15:48.334\nepisodes around federation.\n\n326\n00:15:48.334 --> 00:15:51.863\nFederated in from our partner\naccount domain and be admitted and\n\n327\n00:15:51.863 --> 00:15:55.327\ngiven rights and permissions in\nour resource domain because,\n\n328\n00:15:55.327 --> 00:15:57.698\nwe're gonna trust them with federation.\n\n329\n00:15:57.698 --> 00:16:01.231\nWe set this up and\nwe can do this in AD RMS.\n\n330\n00:16:01.231 --> 00:16:04.524\nI hinted at this and talked about this in\none of our last episodes when I talked\n\n331\n00:16:04.524 --> 00:16:07.350\nabout the trusted user domains and\nthe publishing domains.\n\n332\n00:16:07.350 --> 00:16:10.380\nAnd the fact that we could export\nthose if we have to migrate and\n\n333\n00:16:10.380 --> 00:16:13.880\nthen reimport them to bring in\nthose users from external domains.\n\n334\n00:16:13.880 --> 00:16:17.170\nSo we could set up our trusted\nuser domains if required to.\n\n335\n00:16:18.280 --> 00:16:21.013\nWe don't support by default\nout of the box with AD RMS.\n\n336\n00:16:21.013 --> 00:16:24.522\nUser requests from outside of\nthe directory that were associated within\n\n337\n00:16:24.522 --> 00:16:28.170\nthe forest that we're associated\nwith from another AD RMS cluster.\n\n338\n00:16:28.170 --> 00:16:28.890\nWe don't talk to them.\n\n339\n00:16:28.890 --> 00:16:32.120\nRemember, one cluster per\nforest which means essentially,\n\n340\n00:16:32.120 --> 00:16:34.960\nwe don't talk to users outside\nthe forest by default.\n\n341\n00:16:34.960 --> 00:16:37.170\nCuz the cluster is at the forest level.\n\n342\n00:16:37.170 --> 00:16:39.760\nSo we won't recognize\nthose RAC certificates.\n\n343\n00:16:39.760 --> 00:16:41.910\nWe would have nothing to\ndo with them by default.\n\n344\n00:16:41.910 --> 00:16:46.730\nWe can enable this support if needed, but\nwe have to setup a trusted user domain,\n\n345\n00:16:46.730 --> 00:16:50.830\nwhich allows us to set up\na trust between AD RMS clusters.\n\n346\n00:16:50.830 --> 00:16:54.030\nSo we're establishing the trust\nbetween the clusters and\n\n347\n00:16:54.030 --> 00:16:55.310\nthat's the level we're at.\n\n348\n00:16:55.310 --> 00:16:59.190\nThat's why we're doing this separate\nfrom ADFS, from the Federation Services.\n\n349\n00:16:59.190 --> 00:17:04.560\nBecause the cluster to cluster trust or\nAD RMS implementation per forest is\n\n350\n00:17:04.560 --> 00:17:07.915\nreaching out and associating across\nthe divide to trust each other.\n\n351\n00:17:07.915 --> 00:17:10.620\nThat's what the trusted\nuser domain becomes.\n\n352\n00:17:10.620 --> 00:17:15.600\nAnd so we're instructing a licensing\nserver on one cluster to accept RACs\n\n353\n00:17:15.600 --> 00:17:19.510\nfrom another cluster and allow those\ncertificates to be used and validated.\n\n354\n00:17:19.510 --> 00:17:22.000\nWe're establishing cross cluster trusting.\n\n355\n00:17:22.000 --> 00:17:24.070\nWhich is kind of an interesting\nconcept if you think about it.\n\n356\n00:17:25.270 --> 00:17:29.216\nTo able to do this, we ensure every\nactive domain, or excuse me, every ADF,\n\n357\n00:17:29.216 --> 00:17:30.448\ntry that one more time.\n\n358\n00:17:30.448 --> 00:17:33.840\nEvery ADS forest is what I'm trying\nto say, has its own cluster.\n\n359\n00:17:33.840 --> 00:17:37.910\nSo one cluster per forest, we make\nsure each forest has its own cluster.\n\n360\n00:17:37.910 --> 00:17:42.940\nWe then set up the administration,\nor rather we enable administration.\n\n361\n00:17:42.940 --> 00:17:46.040\nWhat we do is we ask the administrator of\nthe domain that we wanna be able to trust.\n\n362\n00:17:46.040 --> 00:17:51.170\nSo the forest on the other side of this\nprocess, we get in touch with them.\n\n363\n00:17:51.170 --> 00:17:55.313\nAnd we have them export the domain server,\nor the domain service license or\n\n364\n00:17:55.313 --> 00:17:58.640\ncertificate, from that forest or\nfrom that cluster.\n\n365\n00:17:58.640 --> 00:18:02.410\nSo if Daniel was cluster one and\nI was cluster two, and\n\n366\n00:18:02.410 --> 00:18:06.060\nwe wanted to set up this trusted user\ndomain between our two clusters.\n\n367\n00:18:06.060 --> 00:18:07.290\nTwo separate forests, right?\n\n368\n00:18:07.290 --> 00:18:10.330\nAnd we wanted to set this up, I would\nhave to get in touch with Daniel and\n\n369\n00:18:10.330 --> 00:18:16.150\nhave him export to me the Service\nLicensor Certificate from his cluster.\n\n370\n00:18:16.150 --> 00:18:16.710\nWhich remember,\n\n371\n00:18:16.710 --> 00:18:20.150\nis the master certificate used to\ncreate the keys that does everything.\n\n372\n00:18:20.150 --> 00:18:25.040\nHe'd have to export that, give that to me,\nand have to import it into my RMS cluster.\n\n373\n00:18:25.040 --> 00:18:26.570\nSo that I would trust and\n\n374\n00:18:26.570 --> 00:18:30.939\nacknowledge the RAC certificates\nthat are created by his cluster.\n\n375\n00:18:30.939 --> 00:18:33.220\nAnd I would have to do the same\nthing going the other way.\n\n376\n00:18:33.220 --> 00:18:36.970\nAnd we would exchange the certificates\nessentially exchange these private keys.\n\n377\n00:18:36.970 --> 00:18:40.660\nNow this potentially is pretty\nsignificant, not potentially,\n\n378\n00:18:40.660 --> 00:18:42.210\nit is pretty significant I should say.\n\n379\n00:18:42.210 --> 00:18:45.460\nBecause we are taking\nKirchhoff's Principle which I talked about\n\n380\n00:18:45.460 --> 00:18:48.140\nin a prior episode, putting it in\nour hands and we're saying, okay,\n\n381\n00:18:48.140 --> 00:18:51.250\nwe're gonna be very careful with\nthis key which is the private key.\n\n382\n00:18:51.250 --> 00:18:55.321\nAnd if we screw this up and\nwe expose it, all of the licensings,\n\n383\n00:18:55.321 --> 00:18:57.628\ncertificates, everything can\npotentially be compromised.\n\n384\n00:18:57.628 --> 00:18:59.000\nSo we gotta really think long and\n\n385\n00:18:59.000 --> 00:19:03.070\nhard about doing this because\nwe import that certificate.\n\n386\n00:19:03.070 --> 00:19:07.690\nSo I would import the one he gives me and\nas a result of that, right?\n\n387\n00:19:07.690 --> 00:19:11.470\nWhile we're not transferring the private\nkey data directly, we're not, to be clear.\n\n388\n00:19:11.470 --> 00:19:15.400\nWe're not exposing the private key in\na way that would lead to compromise.\n\n389\n00:19:15.400 --> 00:19:20.830\nWe are extending trust to another entity\nthat potentially could lead to compromise.\n\n390\n00:19:20.830 --> 00:19:23.690\nBecause those users may have\n\n391\n00:19:23.690 --> 00:19:26.850\nthe ability to use data in a way\nthat's not in line with our policies.\n\n392\n00:19:26.850 --> 00:19:30.850\nBut I wanna be clear because I kind of\nimplied, at least in theory anyway,\n\n393\n00:19:30.850 --> 00:19:32.370\nthat the key can be exposed.\n\n394\n00:19:32.370 --> 00:19:34.460\nWe're not only worry about\nthe key being exposed.\n\n395\n00:19:34.460 --> 00:19:37.030\nBut we are worried about that\ncertificate being compromised.\n\n396\n00:19:37.030 --> 00:19:40.850\nIf somebody gets a copy of that\ncertificate, they could then accept\n\n397\n00:19:40.850 --> 00:19:46.070\nthose certificates from that trust\ndomain or from that AD RMS cluster.\n\n398\n00:19:46.070 --> 00:19:49.300\nAnd they could start to\nmanipulate information and\n\n399\n00:19:49.300 --> 00:19:51.810\naccess information in a way\nthat's inappropriate.\n\n400\n00:19:51.810 --> 00:19:55.150\nSo while we don't expose the private\nkey from the server directly,\n\n401\n00:19:55.150 --> 00:19:57.968\nwe are giving away something\nalmost as valuable.\n\n402\n00:19:57.968 --> 00:20:00.760\nWe're giving away the certificate that can\nlead to compromise if we're not careful.\n\n403\n00:20:00.760 --> 00:20:02.339\nSo just be aware of this.\n\n404\n00:20:04.390 --> 00:20:07.970\nWe do link and have a little security\ncontrol involved with this where we\n\n405\n00:20:07.970 --> 00:20:10.690\nspecify which email domains\nwe wanna be able to trust.\n\n406\n00:20:10.690 --> 00:20:13.460\nSo essentially,\nwe're specifying as we do this\n\n407\n00:20:13.460 --> 00:20:17.410\nwhich domains based on email association\nwe will extend the trust to.\n\n408\n00:20:17.410 --> 00:20:20.370\nSo users that are not on these domains\nwon't be able to access the trust\n\n409\n00:20:20.370 --> 00:20:20.920\nrelationship.\n\n410\n00:20:20.920 --> 00:20:28.440\nSo it's a little added capability but it's\nnot the most secure thing in the world.\n\n411\n00:20:28.440 --> 00:20:32.210\nIn the sense that we do potentially still\nhave concerns about users being able to\n\n412\n00:20:32.210 --> 00:20:35.330\nget into content, if they're in\nthose domains, those email domains.\n\n413\n00:20:35.330 --> 00:20:38.510\nBut we are assuming we have trust\nrelationships set up because\n\n414\n00:20:38.510 --> 00:20:41.390\nwe wanna be able to allow\nthose users to access content.\n\n415\n00:20:41.390 --> 00:20:42.790\nThat's why we're setting this up.\n\n416\n00:20:42.790 --> 00:20:45.350\nSo keep in mind these\nare unidirectional as I suggested.\n\n417\n00:20:45.350 --> 00:20:47.020\nWe would have to do this both ways.\n\n418\n00:20:47.020 --> 00:20:49.710\nI'd have to export my\nlicensor certificate,\n\n419\n00:20:49.710 --> 00:20:51.108\nDaniel would have to export his.\n\n420\n00:20:51.108 --> 00:20:54.875\nWe would then both have to cross pollinate\nby importing those certificates and\n\n421\n00:20:54.875 --> 00:20:58.355\nthen setting up the trust relationships,\nso keep that in mind.\n\n422\n00:20:58.355 --> 00:21:02.685\nThe trusted publishing domain,\nsame idea here, we are going to use or\n\n423\n00:21:02.685 --> 00:21:07.640\nrather issue use licenses, user licenses\nthat are used to access content.\n\n424\n00:21:07.640 --> 00:21:10.700\nAll that correspond to publishing\nlicenses from another cluster.\n\n425\n00:21:10.700 --> 00:21:15.340\nSo we're going to allow the other\ncluster to give us information then\n\n426\n00:21:15.340 --> 00:21:18.660\nreplicate that out in licenses that\nwill be given to our users essentially.\n\n427\n00:21:18.660 --> 00:21:21.880\nWe can have a number of this\ntrust publishing domains.\n\n428\n00:21:21.880 --> 00:21:25.330\nWe set them up by again, exporting\nthe Service Licensor Certificate, so\n\n429\n00:21:25.330 --> 00:21:27.410\nwe grab that out, the private key, and\n\n430\n00:21:27.410 --> 00:21:30.040\nall the rights policy templates\nfrom the original cluster.\n\n431\n00:21:30.040 --> 00:21:33.800\nSo this involves more information\ntransiting the divide because we're not\n\n432\n00:21:33.800 --> 00:21:37.390\njust taking the licenseor certificate, but\nwe're taking the key and the templates.\n\n433\n00:21:37.390 --> 00:21:40.360\nCuz remember,\npublishing implies all of the rules and\n\n434\n00:21:40.360 --> 00:21:42.390\nall of the specificity around usage.\n\n435\n00:21:42.390 --> 00:21:43.033\nAnd remember,\n\n436\n00:21:43.033 --> 00:21:45.913\nif we get rid of those templates,\nwe block all access to the content.\n\n437\n00:21:45.913 --> 00:21:49.441\nBecause we no longer have the rules that\nallow us, as Daniel was explaining or\n\n438\n00:21:49.441 --> 00:21:52.387\nas he's trying to, we were talking\nabout it, to open the data.\n\n439\n00:21:52.387 --> 00:21:53.445\nBecause there's no way for\n\n440\n00:21:53.445 --> 00:21:56.570\nus to understand the owner's manual\nwho gives us permission to do so.\n\n441\n00:21:56.570 --> 00:21:59.646\nSo this can be very big,\nright, from our perspective.\n\n442\n00:21:59.646 --> 00:22:02.250\nWe import these items into our cluster and\n\n443\n00:22:02.250 --> 00:22:06.200\nthen we specify by loading them up that\nwill then gonna give access to them.\n\n444\n00:22:06.200 --> 00:22:08.020\nAnd make them available and use them.\n\n445\n00:22:08.020 --> 00:22:10.390\nWe're then able to locally leverage that.\n\n446\n00:22:10.390 --> 00:22:13.810\nSo this is again a pretty big deal\nin trusted publishing domains and\n\n447\n00:22:13.810 --> 00:22:15.020\ntrusted user domains.\n\n448\n00:22:15.020 --> 00:22:19.110\nAllow us to extend\nthe capabilities of bringing in\n\n449\n00:22:19.110 --> 00:22:22.830\nexternal parties that are from another\ncluster, essentially another forest.\n\n450\n00:22:22.830 --> 00:22:27.320\nAnd extending trust to them by\nrepresenting them in our cluster by\n\n451\n00:22:27.320 --> 00:22:30.920\nimporting credentials and\ncapabilities that allow us to do so.\n\n452\n00:22:30.920 --> 00:22:34.900\nSo this is like ADFS,\nthis is like extending federation, right?\n\n453\n00:22:36.160 --> 00:22:39.740\nWe do need to synchronize the templates,\nthe rights policy templates.\n\n454\n00:22:39.740 --> 00:22:42.750\nSo we're doing a trusted publishing\ndomain every so often so\n\n455\n00:22:42.750 --> 00:22:46.830\nthat we get the updates for that and\nthose publishing, excuse me.\n\n456\n00:22:46.830 --> 00:22:49.798\nThose publishing domains and\nthose templates are kept up to date.\n\n457\n00:22:49.798 --> 00:22:52.840\nAnd that's a manual process on\nour side if we choose to do that.\n\n458\n00:22:52.840 --> 00:22:53.830\nWe could automate that.\n\n459\n00:22:53.830 --> 00:22:56.100\nPowerShell could be used to automate that,\nfor instance.\n\n460\n00:22:56.100 --> 00:22:58.205\nBut we wouldn't wanna do that.\n\n461\n00:22:58.205 --> 00:22:59.615\nHow often is often?\n\n462\n00:22:59.615 --> 00:23:01.715\nIt depends,\nhow often do you make changes, right?\n\n463\n00:23:01.715 --> 00:23:03.395\nIf you're in there every day and\nmaking changes,\n\n464\n00:23:03.395 --> 00:23:07.445\nthen you gotta synchronize on a fairly\naggressive, consistent basis.\n\n465\n00:23:07.445 --> 00:23:11.155\nIf you do an initial sync and these\ntemplates don't change for six months.\n\n466\n00:23:11.155 --> 00:23:14.685\nWhether you synchronize once or every\nday is irrelevant cuz they don't change.\n\n467\n00:23:14.685 --> 00:23:17.075\nSo it's really a question of\nfunctionality on the back end,\n\n468\n00:23:17.075 --> 00:23:19.065\nbased on how often we're\nupdating these templates.\n\n469\n00:23:19.065 --> 00:23:20.915\nIt's really what we\nwould think about there.\n\n470\n00:23:20.915 --> 00:23:22.450\nSo just keep that in mind.\n\n471\n00:23:22.450 --> 00:23:27.050\nAlso we can extend and further\nintegrate with the Federation Services.\n\n472\n00:23:27.050 --> 00:23:29.680\nRemember trusted user domains,\ntrusted publishing domains\n\n473\n00:23:29.680 --> 00:23:34.600\nare really just a subset of what\nfederation services would provide.\n\n474\n00:23:34.600 --> 00:23:37.210\nBut we're doing this\nbetween the RMS clusters\n\n475\n00:23:37.210 --> 00:23:39.460\nwithout implementing\nFederation Services on top.\n\n476\n00:23:39.460 --> 00:23:43.930\nSo this is really an AD RMS function\nwhen we're doing trusted user and\n\n477\n00:23:43.930 --> 00:23:45.090\ntrusted publishing domains.\n\n478\n00:23:45.090 --> 00:23:46.860\nKeeping it in house, so to speak,\n\n479\n00:23:46.860 --> 00:23:50.700\nwithout extending into the complexity\nof Federation Services, right?\n\n480\n00:23:50.700 --> 00:23:55.014\nBut if we wanna add Federation Services\nin on top, we can do that as well.\n\n481\n00:23:55.014 --> 00:23:59.558\nAnd so we can integrate and\nuse Federation Services with AD RMS.\n\n482\n00:23:59.558 --> 00:24:04.399\nWe can assign AD RMF AD RMS to ADFS\nuser so we can assign rights to\n\n483\n00:24:04.399 --> 00:24:09.850\nfederated users as well when they\ncome through a federated trust.\n\n484\n00:24:09.850 --> 00:24:12.690\nSo we can actually extend this\ncapability through federation.\n\n485\n00:24:13.730 --> 00:24:15.470\nWhich is to do that is up to us.\n\n486\n00:24:15.470 --> 00:24:19.610\nBut we do obviously have to have\nthe federation infrastructure built out.\n\n487\n00:24:19.610 --> 00:24:21.260\nWe've talked extensively\nabout how to do that.\n\n488\n00:24:21.260 --> 00:24:23.380\nIf you don't remember how to do that,\nwanna go back and\n\n489\n00:24:23.380 --> 00:24:25.500\ntake a look at some of the prior\nshows we went through.\n\n490\n00:24:25.500 --> 00:24:28.410\nWe also then once we've\ndone that can set up and\n\n491\n00:24:28.410 --> 00:24:30.690\naudit the access through\nthe federated trust.\n\n492\n00:24:30.690 --> 00:24:34.020\nSo we have audit capabilities and\naudit oversight rights.\n\n493\n00:24:34.020 --> 00:24:36.990\nWe can actually set up and\ngenerate or set up rather\n\n494\n00:24:36.990 --> 00:24:41.150\na account specifically that will be used\nfor auditing if we choose to do that.\n\n495\n00:24:41.150 --> 00:24:46.490\nWe also would have to configure\nclient computers to support AB RMFS.\n\n496\n00:24:46.490 --> 00:24:51.401\nThere is a registry entry\nAD RMS is what I want to say.\n\n497\n00:24:51.401 --> 00:24:53.780\n&gt;&gt; [LAUGH] I'm typing the email to\nMicrosoft right now, don't worry.\n\n498\n00:24:53.780 --> 00:24:55.340\n&gt;&gt; Please, just get on that for me.\n\n499\n00:24:55.340 --> 00:24:57.220\nI am just struggling mightily.\n\n500\n00:24:57.220 --> 00:24:58.180\nGive me just one second.\n\n501\n00:24:58.180 --> 00:25:01.550\nI wanna show you what the register\nkey is that we have to focus on here.\n\n502\n00:25:03.070 --> 00:25:07.550\nIf you want to join me on\nmy screen here real quick.\n\n503\n00:25:07.550 --> 00:25:09.240\nLet me just highlight this for you.\n\n504\n00:25:09.240 --> 00:25:12.310\nSo the registry key that\nwe would have to enable for\n\n505\n00:25:12.310 --> 00:25:17.810\nFederation Support with\nAD RMS is right here.\n\n506\n00:25:17.810 --> 00:25:21.526\nH key LM, software, Microsoft, MSDRM,\n\n507\n00:25:21.526 --> 00:25:27.150\nMicrosoft, Data Rights management,\nFederation, Federation Home Realm and\n\n508\n00:25:27.150 --> 00:25:31.910\nwe assign when we do that, the ADFS\nHome Realm, for AD RMS and that binds\n\n509\n00:25:31.910 --> 00:25:35.920\nthe two together and allows us to set up\nand use the Federation Identity Support.\n\n510\n00:25:35.920 --> 00:25:39.220\nSo Just wanna make sure you're aware\nof that, all the client computers\n\n511\n00:25:39.220 --> 00:25:43.320\nthat are gonna be in the resource domain,\nthat are gonna be consuming or\n\n512\n00:25:43.320 --> 00:25:49.180\nrather providing resources for through\nFederation for the support with AD RMS.\n\n513\n00:25:49.180 --> 00:25:50.745\nAD RMS, I did get that right.\n\n514\n00:25:50.745 --> 00:25:51.750\n&gt;&gt; You did it right time.\n\n515\n00:25:51.750 --> 00:25:54.750\n&gt;&gt; We do need to enable this\nregister key on all the clients.\n\n516\n00:25:54.750 --> 00:25:57.870\nYou may wanna do this through group policy\nfor instance that would be one way to\n\n517\n00:25:57.870 --> 00:26:01.000\npush this, and maybe something that you\nwould wanna consider and think about.\n\n518\n00:26:01.000 --> 00:26:02.460\nSo just some thoughts there.\n\n519\n00:26:02.460 --> 00:26:05.970\nJust wanted to also briefly as we're\nwrapping up our conversations around how\n\n520\n00:26:05.970 --> 00:26:10.490\ndo we extend these capabilities with\ntrusted user, trusted publishing domains.\n\n521\n00:26:10.490 --> 00:26:12.890\nBinding and using ADFS.\n\n522\n00:26:12.890 --> 00:26:15.680\nWe can also extend them to the Cloud\nwith Azure rights management.\n\n523\n00:26:15.680 --> 00:26:18.990\nKind of the updated Cloud\nbased version of ADFS.\n\n524\n00:26:18.990 --> 00:26:22.910\nADFS in the Cloud on Azure Fabric,\nso Azure Rights Management.\n\n525\n00:26:22.910 --> 00:26:25.440\nIs something that we would want\nto make sure we are aware of.\n\n526\n00:26:25.440 --> 00:26:26.500\nLet's just take a look here.\n\n527\n00:26:27.970 --> 00:26:30.630\nSo a nice little website\nwill give us a good overview\n\n528\n00:26:30.630 --> 00:26:32.910\nof Azure rights management\non the platform.\n\n529\n00:26:32.910 --> 00:26:37.750\nIt allows us, as you can see,\nto basically translate the protection\n\n530\n00:26:37.750 --> 00:26:40.760\nof rights management services\ninto the Azure Cloud and\n\n531\n00:26:40.760 --> 00:26:43.386\nprotect data that's hosted or\nhomed in the fabrics.\n\n532\n00:26:43.386 --> 00:26:45.690\nThat's what we're gonna\nbe able to do there.\n\n533\n00:26:45.690 --> 00:26:48.200\nSo you can read up a little\nbit just on the logic here.\n\n534\n00:26:48.200 --> 00:26:49.920\nBut we have a nice little, just a map,\n\n535\n00:26:49.920 --> 00:26:52.420\na picture that shows us how\nthe connectivity works.\n\n536\n00:26:52.420 --> 00:26:54.410\nWe have I don't think\nI can zoom in on that.\n\n537\n00:26:54.410 --> 00:26:55.840\nBut you know what I can do, I can do that.\n\n538\n00:26:55.840 --> 00:26:56.382\n&gt;&gt; There you go.\n\n539\n00:26:56.382 --> 00:26:57.590\n&gt;&gt; Look at that it's awesome.\n\n540\n00:26:57.590 --> 00:26:59.430\n&gt;&gt; Can we go full screen for\njust a second?\n\n541\n00:26:59.430 --> 00:27:00.860\nJust so we can see that.\n\n542\n00:27:00.860 --> 00:27:02.240\nSo what you'll see here right.\n\n543\n00:27:02.240 --> 00:27:07.100\nWe have the Azure RMS capabilities\nthrough Office 365, right?\n\n544\n00:27:07.100 --> 00:27:09.070\nOur rights management capability there.\n\n545\n00:27:09.070 --> 00:27:10.890\nWe have our different platform support.\n\n546\n00:27:10.890 --> 00:27:14.570\nWe support Windows,\nwe support Mac, IOS, Android, etc.\n\n547\n00:27:14.570 --> 00:27:16.640\nSo everything is supported there.\n\n548\n00:27:16.640 --> 00:27:18.460\nWe have our file server services, so\n\n549\n00:27:18.460 --> 00:27:23.550\nwe're supporting the back end storage\nof data with dynamic access control,\n\n550\n00:27:23.550 --> 00:27:26.260\nfor classification and\nauditing governance and oversight.\n\n551\n00:27:26.260 --> 00:27:29.630\nWe talked about DAC in a prior show and\nepisode If you haven't seen that,\n\n552\n00:27:29.630 --> 00:27:31.520\nyou might wanna go back and\ntake a look at that.\n\n553\n00:27:31.520 --> 00:27:36.800\nWe highlighted and previewed technology,\nnew in Server 12 in 22 R2 and 16.\n\n554\n00:27:36.800 --> 00:27:40.840\nBut a pretty cool often overlooked\ntechnology that we spent a little time on.\n\n555\n00:27:40.840 --> 00:27:42.700\nWindows server active directory.\n\n556\n00:27:42.700 --> 00:27:44.370\nYou can see the directory sync there.\n\n557\n00:27:44.370 --> 00:27:48.780\nSo we sync down to on Prem AD and back\ninto the cloud applying rights management.\n\n558\n00:27:49.960 --> 00:27:53.860\nAnd we have both Cloud based and\non prem capabilities as we talked about,\n\n559\n00:27:53.860 --> 00:27:58.190\nto extend the use of SharePoint and\nExchange,\n\n560\n00:27:58.190 --> 00:28:00.810\neither on prem, in the cloud,\nor a hybrid of both.\n\n561\n00:28:00.810 --> 00:28:03.100\nAnd link it to the rights\nmanagement platform.\n\n562\n00:28:03.100 --> 00:28:07.010\nAnd as a result of that,\nyou could see that we have\n\n563\n00:28:07.010 --> 00:28:11.260\na fully featured solution here that allows\nus to bring all these moving parts and\n\n564\n00:28:11.260 --> 00:28:14.610\npieces together through\nthe Azure Cloud and\n\n565\n00:28:14.610 --> 00:28:17.990\nuse the Azure rights management\ncapabilities to apply rights management\n\n566\n00:28:17.990 --> 00:28:22.770\nto every aspect of the data usage on\nany platform that people are accessing.\n\n567\n00:28:22.770 --> 00:28:25.800\nWhether they're inside of the land or\non the wind.\n\n568\n00:28:25.800 --> 00:28:28.760\nWhether they're on a mobile platform,\non a desktop, on a server.\n\n569\n00:28:28.760 --> 00:28:33.000\nWhether they're on or in an Exchange or\nSharePoint system, or\n\n570\n00:28:33.000 --> 00:28:37.230\nusing Office on a desktop or\non a mobile device to look at content.\n\n571\n00:28:37.230 --> 00:28:41.800\nWe can apply RMS and we can apply\nthe rights management solutions with that.\n\n572\n00:28:41.800 --> 00:28:43.860\nSo we have full capabilities there, and\n\n573\n00:28:43.860 --> 00:28:47.610\nthe ability to be able to now secure\nthis entire platform end to end.\n\n574\n00:28:47.610 --> 00:28:49.390\nBoth cloud based and on-prem and\n\n575\n00:28:49.390 --> 00:28:53.512\nessentially a high breed between the two\nare using the active directory technology,\n\n576\n00:28:53.512 --> 00:28:56.340\nthe Azure fabric and\nthe rights management solution.\n\n577\n00:28:56.340 --> 00:28:59.340\nSo it's actually really nice that\nwe can bring all this together and\n\n578\n00:28:59.340 --> 00:29:00.560\nmake this possible for us.\n\n579\n00:29:00.560 --> 00:29:04.440\nSo just some thoughts there as we're\nwrapping up our overview conversations\n\n580\n00:29:04.440 --> 00:29:08.830\naround the AD RMS technology,\nhow we integrate in this case with\n\n581\n00:29:09.975 --> 00:29:12.495\nexternal capabilities and\nrequests for access.\n\n582\n00:29:12.495 --> 00:29:16.645\nHow we can use either trusted user, and\ntrusted publishing domains, linked to and\n\n583\n00:29:16.645 --> 00:29:18.985\nleverage ADFS if that's already in place.\n\n584\n00:29:18.985 --> 00:29:22.547\nOr if we have a more up to date perhaps,\nand a slightly more forward thinking\n\n585\n00:29:22.547 --> 00:29:27.217\nversion of ADFS in the Cloud\nwith AD RMS in the Azure fabric.\n\n586\n00:29:27.217 --> 00:29:30.037\nWe can actually go in and take a look at\nthat with Azure Rights Management as well.\n\n587\n00:29:30.037 --> 00:29:34.037\nSo we hopefully have covered all of\nthe different moving parts, pieces, and\n\n588\n00:29:34.037 --> 00:29:36.727\nbases for you, so to speak,\nwith regards to this.\n\n589\n00:29:36.727 --> 00:29:38.517\nWhat we'll talk about\nin upcoming episodes,\n\n590\n00:29:38.517 --> 00:29:41.377\njust to give you a little\npreview as we often try to do,\n\n591\n00:29:41.377 --> 00:29:44.640\nwe'll be doing a walk through of\nhow to set up and stand up AD RMS.\n\n592\n00:29:44.640 --> 00:29:47.350\nSo you may wanna come back to take a look\nat that cuz that'll really put a nice\n\n593\n00:29:47.350 --> 00:29:50.310\nlittle capstone on this entire\nset of conversations for us.\n\n594\n00:29:50.310 --> 00:29:53.890\nWe've talked out all the theory, and\nthe functionality, and the capabilities.\n\n595\n00:29:53.890 --> 00:29:56.010\nNow we're gonna go and\nactually put that all to use and\n\n596\n00:29:56.010 --> 00:29:56.910\nshow you how to implement it.\n\n597\n00:29:56.910 --> 00:29:59.030\nSo that should hopefully be valuable for\nyou as well.\n\n598\n00:29:59.030 --> 00:30:01.590\n&gt;&gt; Well Adam I couldn't have\nsaid that better if I tried.\n\n599\n00:30:01.590 --> 00:30:05.020\nAnd that being said I'm not going to try,\nI'm gonna let him sit on that.\n\n600\n00:30:05.020 --> 00:30:06.460\nWe do thank everybody for watching.\n\n601\n00:30:06.460 --> 00:30:10.890\nBut he's right we have wrapped up\nthe conversation about AD RMS,\n\n602\n00:30:10.890 --> 00:30:14.367\nbut now we're going to kind of get\ninto actually doing it, right?\n\n603\n00:30:14.367 --> 00:30:17.070\nActually implementing that and\nsee how that works.\n\n604\n00:30:17.070 --> 00:30:18.670\n&gt;&gt; We're going to stop the talk and\nstart to do it.\n\n605\n00:30:18.670 --> 00:30:19.760\nThat's what you were going to say.\n\n606\n00:30:19.760 --> 00:30:22.060\n&gt;&gt; That's right.\nWe're going to click some checkboxes and\n\n607\n00:30:22.060 --> 00:30:24.470\nradio buttons,\nhit next a few million times.\n\n608\n00:30:24.470 --> 00:30:26.390\nIt'll be a lot of fun,\nyou should join us for that.\n\n609\n00:30:26.390 --> 00:30:28.100\nThat being said, Adam,\nthanks for joining us.\n\n610\n00:30:28.100 --> 00:30:30.070\nWe do thank our audience for watching.\n\n611\n00:30:30.070 --> 00:30:32.120\nBut it is time for\nus to sign off for ITProTV.\n\n612\n00:30:32.120 --> 00:30:34.220\nI've been your host Daniel Lowrie.\n\n613\n00:30:34.220 --> 00:30:35.190\n&gt;&gt; I'm Adam Gordon.\n\n614\n00:30:35.190 --> 00:30:36.159\n&gt;&gt; And we'll see you next time.\n\n615\n00:30:37.463 --> 00:30:43.434\n[MUSIC]\n\n616\n00:30:43.434 --> 00:30:50.490\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213239301"
        },
        {
          "description": "In this episode, Daniel and Adam start their demonstration of configuring Active Directory Rights Management Services. Here they will take all the concepts that you've been learning and walk you through the setup involved in standing up a AD-RMS system.",
          "length": "1993",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-configuring_ad-rms-041417-PGM.00_32_57_11.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-configuring_ad-rms-041417-PGM.00_32_57_11.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-configuring_ad-rms-041417-PGM.00_32_57_11.Still001-sm.jpg",
          "title": "Configuring AD-RMS",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.200\nWelcome to ITProTV.\n\n2\n00:00:01.200 --> 00:00:03.143\nI'm your host Don Pezet.\n\n3\n00:00:03.143 --> 00:00:05.565\n&gt;&gt; [CROSSTALK]\n\n4\n00:00:05.565 --> 00:00:08.267\n[MUSIC]\n\n5\n00:00:08.267 --> 00:00:12.152\n&gt;&gt; You're watching ITPro.TV.\n\n6\n00:00:12.152 --> 00:00:13.753\n&gt;&gt; All right, greetings everyone and\n\n7\n00:00:13.753 --> 00:00:15.840\nwelcome to another great\nepisode of ITProTV.\n\n8\n00:00:15.840 --> 00:00:17.986\nI'm your host Daniel Lowrie, and\n\n9\n00:00:17.986 --> 00:00:22.510\nin today's episode we are coming\nback with more on our 7414 series.\n\n10\n00:00:22.510 --> 00:00:24.930\nAnd of course joining us yet again.\n\n11\n00:00:24.930 --> 00:00:27.180\nIn the studio, our good friend,\nMr. Adam Gordon.\n\n12\n00:00:27.180 --> 00:00:28.460\nAdam, we're glad to have you again.\n\n13\n00:00:28.460 --> 00:00:29.130\nHow's it going?\n\n14\n00:00:29.130 --> 00:00:31.840\n&gt;&gt; Good, could I join you from\nanywhere other than in the studio?\n\n15\n00:00:31.840 --> 00:00:33.750\n&gt;&gt; Could I, did I say from the studio,\nor in the studio?\n\n16\n00:00:33.750 --> 00:00:34.700\n&gt;&gt; In the studio.\nI'm just thinking,\n\n17\n00:00:34.700 --> 00:00:36.460\ncould I be outside, in the hallway?\n\n18\n00:00:36.460 --> 00:00:38.555\n&gt;&gt; Actually, yes,\ncuz we have Skype capability.\n\n19\n00:00:38.555 --> 00:00:41.915\nOkay, so I could be in my car and\nI could be doing this.\n\n20\n00:00:41.915 --> 00:00:43.151\nThat would not be safe, by the way.\n\n21\n00:00:43.151 --> 00:00:43.923\n&gt;&gt; That'd be difficult for\nyou to demonstrate, yeah.\n\n22\n00:00:43.923 --> 00:00:45.421\n&gt;&gt; You should not be doing this.\n\n23\n00:00:45.421 --> 00:00:46.195\n&gt;&gt; While you're driving in the car.\n\n24\n00:00:46.195 --> 00:00:47.229\nIt would not be a good idea.\n\n25\n00:00:47.229 --> 00:00:49.737\n[LAUGH] But I'm just suggesting that\nthere is technology that is available to\n\n26\n00:00:49.737 --> 00:00:50.648\nsolve any problem we have.\n\n27\n00:00:50.648 --> 00:00:51.737\n&gt;&gt; That's right.\n\n28\n00:00:51.737 --> 00:00:53.701\n&gt;&gt; So speaking of problems,\nthings we wanna solve,\n\n29\n00:00:53.701 --> 00:00:55.022\nand showing you how to do things.\n\n30\n00:00:55.022 --> 00:00:59.261\nThe focus of this episode, and from what\nDaniel said to me before we came on,\n\n31\n00:00:59.261 --> 00:01:00.710\nmany more to come.\n\n32\n00:01:00.710 --> 00:01:02.285\nBecause we have a lot to do.\n\n33\n00:01:02.285 --> 00:01:05.180\nIts gonna be how to actually take\nall the knowledge we've given in\n\n34\n00:01:05.180 --> 00:01:07.920\nprior episodes around ABRMS.\n\n35\n00:01:07.920 --> 00:01:09.620\nIt's in there correctly by the way.\n\n36\n00:01:09.620 --> 00:01:12.550\nI practiced last night before\nI came in this morning.\n\n37\n00:01:12.550 --> 00:01:17.362\nSo we're gonna take all that knowledge\nwe've talked about over the last three or\n\n38\n00:01:17.362 --> 00:01:22.115\nfour episodes with setting up,\narchitecting, providing HA load balancing.\n\n39\n00:01:22.115 --> 00:01:25.176\nAnd in general just soup to nuts\neverything you ever want to know\n\n40\n00:01:25.176 --> 00:01:28.432\nabout ADRMS and probably a few\nthings you just didn't care about.\n\n41\n00:01:28.432 --> 00:01:31.244\nWe're gonna take all that stuff and\nwe're gonna put it to work for us.\n\n42\n00:01:31.244 --> 00:01:35.800\nAnd what we're gonna do for the next\nseveral discussions as we go through this\n\n43\n00:01:35.800 --> 00:01:40.566\npiece by piece is show you how to stand up\nan ADRMS solution not just in one forest,\n\n44\n00:01:40.566 --> 00:01:42.490\nnot just with one cluster.\n\n45\n00:01:42.490 --> 00:01:45.988\nBut across two fars with two clusters,\njoining them together and\n\n46\n00:01:45.988 --> 00:01:49.049\ndoing all the things we have\nto do to make sure this works.\n\n47\n00:01:49.049 --> 00:01:51.787\nShow you how to set up our trusted users,\ntrusted publishing,\n\n48\n00:01:51.787 --> 00:01:53.141\nall the stuff we talked about.\n\n49\n00:01:53.141 --> 00:01:56.780\nWe're gonna have all that together and\nwalk through the process with you.\n\n50\n00:01:56.780 --> 00:02:00.279\nSo this is gonna be our hands on\ndemonstration piece where we actually\n\n51\n00:02:00.279 --> 00:02:03.313\nconfigure and talk through\nthe logic of what we're doing.\n\n52\n00:02:03.313 --> 00:02:04.431\nSo we're gonna get started here.\n\n53\n00:02:04.431 --> 00:02:09.355\nI've already got some of the background\npre-req stuff configured for us.\n\n54\n00:02:09.355 --> 00:02:12.758\nWhat I've done is just gone ahead in our\nfirst domain that we're gonna work on.\n\n55\n00:02:12.758 --> 00:02:15.720\nAnd we are going to,\nI've already taken care of,\n\n56\n00:02:15.720 --> 00:02:20.300\nthe background work of installing\nthe pre-req requirements for ADRMS.\n\n57\n00:02:20.300 --> 00:02:23.710\nInstalling the ADRMS role just so\nthat we have it ready to go, so\n\n58\n00:02:23.710 --> 00:02:24.980\nwe can program in and\n\n59\n00:02:24.980 --> 00:02:28.280\nconfigure the features with the wizard,\nwe're going to pick up from that point.\n\n60\n00:02:28.280 --> 00:02:32.920\nWe've issued the required certificates,\nstood up the IS server, bound,\n\n61\n00:02:32.920 --> 00:02:36.050\nor did the binding on\nthe certificates to the web server.\n\n62\n00:02:36.050 --> 00:02:37.822\nSo all those pieces are done.\n\n63\n00:02:37.822 --> 00:02:39.120\nCreated our service account,\n\n64\n00:02:39.120 --> 00:02:44.120\ncreating a super users group in ADDS, in\nthe Active Directory, Directory Services.\n\n65\n00:02:44.120 --> 00:02:46.290\nWe're about to configure all of that.\n\n66\n00:02:46.290 --> 00:02:48.418\nNow, the good news is\nthat's all been done so\n\n67\n00:02:48.418 --> 00:02:50.778\nwe could speed through\nsome of the initial steps.\n\n68\n00:02:50.778 --> 00:02:54.319\nYou're gonna see those steps when we\ngo and tackle the second domain and\n\n69\n00:02:54.319 --> 00:02:58.647\nthe second farthest up to second cluster,\ncuz we'll actually walk you through that.\n\n70\n00:02:58.647 --> 00:03:00.770\nSo you could see that, step by step.\n\n71\n00:03:00.770 --> 00:03:04.210\nBut this way, it gets us up and\nrunning quickly in the first one.\n\n72\n00:03:04.210 --> 00:03:07.710\nAnd let's us just go through the motions\nto show you all the things we have to do.\n\n73\n00:03:07.710 --> 00:03:08.910\nAnd then we'll take our time and\n\n74\n00:03:08.910 --> 00:03:11.080\nlook backwards at those\nrequirements in our next one.\n\n75\n00:03:11.080 --> 00:03:12.740\nSo let's get started over here, if we can.\n\n76\n00:03:13.930 --> 00:03:16.880\nWe'll go ahead in the domain controller,\n\n77\n00:03:16.880 --> 00:03:21.450\nwhere we have set up our information\nactually in the rather the AD RMS server.\n\n78\n00:03:21.450 --> 00:03:24.450\nI should say in the domain that\nwe've set up our initial roll on.\n\n79\n00:03:24.450 --> 00:03:26.550\nWe've got AD RMS initially installed.\n\n80\n00:03:26.550 --> 00:03:27.600\nYou'll see it here.\n\n81\n00:03:27.600 --> 00:03:31.960\nBut we have not finished the configuration\nyet, little yellow warning flag up here.\n\n82\n00:03:31.960 --> 00:03:34.014\nCaution, right, we gotta do something,\n\n83\n00:03:34.014 --> 00:03:37.047\ntells us when we click that we're\nin the middle of the install.\n\n84\n00:03:37.047 --> 00:03:39.460\nWe've got some additional configuration\nrequirements to take care of.\n\n85\n00:03:39.460 --> 00:03:44.093\nWe're gonna click through that right now,\nbring up our AD RMS configuration wizard.\n\n86\n00:03:44.093 --> 00:03:47.630\nAnd we're gonna go through and\nfinalize our installation.\n\n87\n00:03:47.630 --> 00:03:49.430\nSo let me just bring this up here.\n\n88\n00:03:49.430 --> 00:03:50.820\nPut this up there so you can see it.\n\n89\n00:03:50.820 --> 00:03:54.300\nThis is just the overview page,\nreally nothing too exciting here.\n\n90\n00:03:54.300 --> 00:03:57.950\nTells us that AD RMS is\nInformation Rights Management\n\n91\n00:03:57.950 --> 00:03:59.880\nfocused on information protection.\n\n92\n00:03:59.880 --> 00:04:03.529\nWhat we're gonna do is get into setting\nup the cluster, as we've talked about.\n\n93\n00:04:03.529 --> 00:04:05.163\nWe'll go through our database set up.\n\n94\n00:04:05.163 --> 00:04:07.590\nWhere are we going to put that?\n\n95\n00:04:07.590 --> 00:04:11.930\nOur server account our cluster key\nstorage our cluster key password.\n\n96\n00:04:11.930 --> 00:04:15.180\nWe'll take a look at the cluster\nwebsite the cluster address.\n\n97\n00:04:15.180 --> 00:04:18.400\nIt's the URL that we're talking\nabout server certificates.\n\n98\n00:04:18.400 --> 00:04:21.860\nLicenses or certificate you're\nfirmly mention all these terms.\n\n99\n00:04:21.860 --> 00:04:24.210\nYou've heard us talk about these\nthings and why their important.\n\n100\n00:04:24.210 --> 00:04:24.970\nAnd how to deal with them.\n\n101\n00:04:24.970 --> 00:04:27.715\nYou're actually going to see\nthem set up set to finish now.\n\n102\n00:04:27.715 --> 00:04:30.330\nSo let's start here next.\n\n103\n00:04:30.330 --> 00:04:33.080\nWhile we're creating a new ADMS or\nADRMS, there we go.\n\n104\n00:04:33.080 --> 00:04:34.000\nSee, ADMS.\n\n105\n00:04:34.000 --> 00:04:34.680\nI did it again.\n\n106\n00:04:34.680 --> 00:04:35.600\n&gt;&gt; Yeah, you already did that.\n\n107\n00:04:35.600 --> 00:04:36.420\n&gt;&gt; Yeah.\n&gt;&gt; Are we gonna create\n\n108\n00:04:36.420 --> 00:04:38.950\na brand new ADRMS through cluster or\njoin an existing one?\n\n109\n00:04:38.950 --> 00:04:41.850\nRemember the first machine\nwe installed automatically\n\n110\n00:04:41.850 --> 00:04:44.110\nbecomes the root server\nin the root cluster.\n\n111\n00:04:44.110 --> 00:04:45.260\nWe don't have a choice there.\n\n112\n00:04:45.260 --> 00:04:46.750\nThis is our first machine.\n\n113\n00:04:46.750 --> 00:04:47.980\nSo, that's we're gonna be dealing.\n\n114\n00:04:47.980 --> 00:04:49.528\nSo, will click next there.\n\n115\n00:04:49.528 --> 00:04:52.000\nWe then have specify the database and\n\n116\n00:04:52.000 --> 00:04:55.570\nthe database instance that we're\ngonna be using if we are going to\n\n117\n00:04:56.830 --> 00:05:00.650\nbe using an external database,\nMicrosoft SQL on host stat.\n\n118\n00:05:00.650 --> 00:05:02.630\nWe would then select that here.\n\n119\n00:05:02.630 --> 00:05:04.740\nSpecify the server and the instance name.\n\n120\n00:05:04.740 --> 00:05:08.290\nWe can also use the WID,\nthe Windows Internal Database and\n\n121\n00:05:08.290 --> 00:05:11.520\ndecide to do that in an all-in-one\nsolution on this server.\n\n122\n00:05:11.520 --> 00:05:14.520\nFor our purposes, just setting this\nup quickly, we're gonna go ahead and\n\n123\n00:05:14.520 --> 00:05:19.000\nuse the internal database,\nup to us to decide how to set that up.\n\n124\n00:05:19.000 --> 00:05:21.910\nRemember, in production,\nyou can use either one.\n\n125\n00:05:21.910 --> 00:05:24.610\nBut the recommendation is to go\nwith the external SQL Server if\n\n126\n00:05:24.610 --> 00:05:27.980\nyou're gonna scale out and\nbuild out your clusters, right?\n\n127\n00:05:27.980 --> 00:05:29.410\nSo that's just something to consider.\n\n128\n00:05:29.410 --> 00:05:31.660\nIf you're gonna do a small installation.\n\n129\n00:05:31.660 --> 00:05:34.220\nOne or two servers in the cluster.\n\n130\n00:05:34.220 --> 00:05:36.681\nNot a lot of performance concerns.\n\n131\n00:05:36.681 --> 00:05:38.990\nThen the internal data\nbase should be fine.\n\n132\n00:05:38.990 --> 00:05:42.860\nSo we're going to specify our service\naccount here, will be our next step.\n\n133\n00:05:42.860 --> 00:05:44.200\nLet's click Next.\n\n134\n00:05:44.200 --> 00:05:47.280\nAnd we're gonna go ahead put in\nour domain user name account\n\n135\n00:05:47.280 --> 00:05:50.250\nthat we have already set up and specified.\n\n136\n00:05:50.250 --> 00:05:51.990\nSo let me just put this in here.\n\n137\n00:05:51.990 --> 00:05:57.380\nThis is our adrmsact, acct for\n\n138\n00:05:57.380 --> 00:06:00.930\naccount, put in our super secret password.\n\n139\n00:06:00.930 --> 00:06:03.460\nAnd then, we're gonna go ahead,\ngonna hit okay there.\n\n140\n00:06:04.970 --> 00:06:09.720\nInvalid credentials, verify the specified\ndomain account exists, okay.\n\n141\n00:06:09.720 --> 00:06:14.590\nLet me make sure that I spelled\nthe correct way, on everything is good.\n\n142\n00:06:14.590 --> 00:06:15.995\n&gt;&gt; He knows what you mean.\n\n143\n00:06:15.995 --> 00:06:17.844\n[LAUGH]\n&gt;&gt; Of course, he knows what I mean.\n\n144\n00:06:17.844 --> 00:06:18.996\nJust one second.\n\n145\n00:06:18.996 --> 00:06:21.374\nLet's go back there.\n\n146\n00:06:21.374 --> 00:06:25.245\nI may have provided rather\nthe account is probably correct but\n\n147\n00:06:25.245 --> 00:06:27.781\nthe password may not have been correct.\n\n148\n00:06:27.781 --> 00:06:34.274\nLet me do this and ADRMSACCT and\n\n149\n00:06:34.274 --> 00:06:40.527\nwhat was I doing, password.\n\n150\n00:06:40.527 --> 00:06:44.955\nLet's try that one more time,\nmake sure I spelled that correctly.\n\n151\n00:06:47.018 --> 00:06:50.214\nNope, let's try it without the.\n\n152\n00:06:53.164 --> 00:06:56.646\nThis is what happens when you let me types\nthings in without checking my spelling,\n\n153\n00:06:56.646 --> 00:06:58.270\nlet me make sure I didn't spell that.\n\n154\n00:06:58.270 --> 00:07:00.920\nIf we didn't get it on this one,\nwhat I'll do is I'll go back to the domain\n\n155\n00:07:00.920 --> 00:07:02.640\ncontroller, just double check\nwhat I called the account,\n\n156\n00:07:02.640 --> 00:07:04.800\ncuz I may have screwed up\nthe naming on the account.\n\n157\n00:07:04.800 --> 00:07:06.070\nI don't think it's what the single cs.\n\n158\n00:07:06.070 --> 00:07:09.230\nSo let's just do, this is what\nhappens sometimes in the real world.\n\n159\n00:07:09.230 --> 00:07:11.350\nThen we're just gonna go to\nthe domain controller real quick.\n\n160\n00:07:11.350 --> 00:07:14.410\nAnd we're just gonna check\nin the active directory.\n\n161\n00:07:14.410 --> 00:07:16.450\nAnd figure out what\nthe account's actually called.\n\n162\n00:07:16.450 --> 00:07:18.090\nSo we've already created the account.\n\n163\n00:07:18.090 --> 00:07:19.300\nI just have to go double check.\n\n164\n00:07:21.140 --> 00:07:23.300\nAnd make sure that I spelled it correctly.\n\n165\n00:07:24.330 --> 00:07:25.983\nADR MS service account.\n\n166\n00:07:25.983 --> 00:07:32.089\nJust take look there and\nmake sure we have Information for that.\n\n167\n00:07:32.089 --> 00:07:37.482\nAnd AD, that would be why.\n\n168\n00:07:40.924 --> 00:07:46.335\nADRMSACCT, no that is actually\nspelled correctly, right?\n\n169\n00:07:46.335 --> 00:07:48.361\nI believe it is.\n\n170\n00:07:48.361 --> 00:07:55.995\nLet's double check ADRMCC yep\nthat is correct allright so\n\n171\n00:07:55.995 --> 00:08:00.052\nwhy are you not allowing this.\n\n172\n00:08:00.052 --> 00:08:04.367\nDo that, lets go back over here, and\n\n173\n00:08:04.367 --> 00:08:08.360\nlet's try this one more time.\n\n174\n00:08:08.360 --> 00:08:14.763\nadrmsacct and our password.\n\n175\n00:08:14.763 --> 00:08:18.900\nAnd there we go, it's probably just a-\n&gt;&gt; A hang up.\n\n176\n00:08:18.900 --> 00:08:20.936\n&gt;&gt; It's just being\ndifficult that's all it is.\n\n177\n00:08:20.936 --> 00:08:23.178\nBut you can see the account was\nactually there already setup, and\n\n178\n00:08:23.178 --> 00:08:24.050\nit was set the right way.\n\n179\n00:08:24.050 --> 00:08:25.670\nSo I don't know why it was\ngiving us that little error.\n\n180\n00:08:25.670 --> 00:08:29.220\nBut the account is there,\nit's all good, we just specify it.\n\n181\n00:08:29.220 --> 00:08:30.670\nWe're gonna move on.\n\n182\n00:08:30.670 --> 00:08:33.410\nAnd it wouldn't be a good\ndemo if we didn't have at\n\n183\n00:08:33.410 --> 00:08:35.630\nleast one thing go wrong\nwhile we're doing this live.\n\n184\n00:08:35.630 --> 00:08:37.120\n&gt;&gt; Real world scenarios, man.\n\n185\n00:08:37.120 --> 00:08:38.540\n&gt;&gt; Well,\nthis is what happens in the real world.\n\n186\n00:08:38.540 --> 00:08:40.970\nHey, I know I created the account,\nI know I spelled it the correct way.\n\n187\n00:08:40.970 --> 00:08:43.076\nBut sometimes,\nyou just gotta go take a look and\n\n188\n00:08:43.076 --> 00:08:44.980\nmake sure it's what it's supposed to be.\n\n189\n00:08:44.980 --> 00:08:48.568\nAll right, so we did talk about\nthe Cryptographic Mode support,\n\n190\n00:08:48.568 --> 00:08:50.014\nCrypto Mode 1 versus 2.\n\n191\n00:08:50.014 --> 00:08:53.190\nI went through this with you in\none of our prior discussions.\n\n192\n00:08:53.190 --> 00:08:55.650\nI said we have the option,\nstarting in 12 and 12 R2,\n\n193\n00:08:55.650 --> 00:08:57.717\nto specify which Crypto Mode\nwe wanna support.\n\n194\n00:08:57.717 --> 00:09:02.690\nBy design or by default, we used Crypto\nMode 2 support because it is more secure.\n\n195\n00:09:02.690 --> 00:09:07.745\nWe talked about this as well and specified\nthat we could use a larger key spaces,\n\n196\n00:09:07.745 --> 00:09:13.037\nbigger in other words key spaces that give\nus more capabilities to secure our data.\n\n197\n00:09:13.037 --> 00:09:17.270\nBecause there's more keys involved,\nless likely a bad actor can find the key.\n\n198\n00:09:17.270 --> 00:09:18.330\nSo we have an RSA 2048-bit key.\n\n199\n00:09:18.330 --> 00:09:23.465\nSo that's gonna be something that we're\ngonna wanna make sure that we're aware of,\n\n200\n00:09:23.465 --> 00:09:27.674\nif we do need backwards-compatibility\nin or older systems support,\n\n201\n00:09:27.674 --> 00:09:30.982\nthese older systems will\nonly support Crypto Mode 1.\n\n202\n00:09:30.982 --> 00:09:35.130\nWe would have to downgrade here, so it's\nquestion what the clients are running and\n\n203\n00:09:35.130 --> 00:09:37.144\nwhether or not they're older or newer so\n\n204\n00:09:37.144 --> 00:09:39.416\nthat's just something for\nus to be aware of.\n\n205\n00:09:39.416 --> 00:09:43.391\nWe'll do Crypto Mode 2,\nare we going to specify, rather we do\n\n206\n00:09:43.391 --> 00:09:48.116\nneed to specify I should say, where\nthe ADRMS cluster key storage will be,\n\n207\n00:09:48.116 --> 00:09:52.350\nare we gonna do this essentially\nmanaged inside the ADRMS itself.\n\n208\n00:09:52.350 --> 00:09:57.030\nAre we gonna use crypto security\nprovider the CSP for key storage.\n\n209\n00:09:57.030 --> 00:09:58.640\nWe talked about this as well.\n\n210\n00:09:58.640 --> 00:10:02.034\nI walked you through the steps\ninvolved with extracting that key from\n\n211\n00:10:02.034 --> 00:10:02.920\nthe CSP storage.\n\n212\n00:10:02.920 --> 00:10:07.715\nAnd then exporting it and importing\nit from the commandline if we had to\n\n213\n00:10:07.715 --> 00:10:10.975\nmigrate or\nstand up a brand new ADRMS solution.\n\n214\n00:10:10.975 --> 00:10:15.784\nBecause that crypto key would be required\nfor us to then be able to continue working\n\n215\n00:10:15.784 --> 00:10:19.225\nwith the data that's been\nlicensed in the AVR messages.\n\n216\n00:10:19.225 --> 00:10:21.255\nSo this is an important thought process,\n\n217\n00:10:21.255 --> 00:10:23.935\nwe've been through this,\ntalked about the differences here.\n\n218\n00:10:23.935 --> 00:10:26.895\nWe're gonna use ADRMS\ncentral managed storage,\n\n219\n00:10:26.895 --> 00:10:31.385\nas you could see our default choice,\nspecify the cluster key password,\n\n220\n00:10:31.385 --> 00:10:34.125\nwe'll go ahead,\nwe'll put in our password here,\n\n221\n00:10:36.508 --> 00:10:41.050\nJust specify that real quick there we go.\n\n222\n00:10:41.050 --> 00:10:43.690\nAnd then just wait for that to come up.\n\n223\n00:10:43.690 --> 00:10:46.980\nWe then have to specify what\nwebsite we are going to\n\n224\n00:10:46.980 --> 00:10:50.330\nhost the ADRMS cluster against.\n\n225\n00:10:50.330 --> 00:10:54.240\nWe have our default website set up in IIS,\nso we're gonna use that.\n\n226\n00:10:54.240 --> 00:10:58.180\nWe've already bound our certificate\nthere for a certificate for\n\n227\n00:10:58.180 --> 00:11:01.700\nserver identification and\nauthorization taking care of that and\n\n228\n00:11:01.700 --> 00:11:03.240\ndone that behind the scenes.\n\n229\n00:11:03.240 --> 00:11:06.290\nSo we'll choose our default website,\nclick Next.\n\n230\n00:11:06.290 --> 00:11:08.457\nWe have to specify our cluster address.\n\n231\n00:11:08.457 --> 00:11:11.657\nIs this gonna be a SSL\nenabled address with HTTPS or\n\n232\n00:11:11.657 --> 00:11:14.840\njust a standard web address with HTTP.\n\n233\n00:11:14.840 --> 00:11:17.330\nWe're gonna go ahead and use SSL.\n\n234\n00:11:17.330 --> 00:11:19.004\nSo let's go ahead and put that in here.\n\n235\n00:11:19.004 --> 00:11:26.866\nThat will be adrms.practicelabs.com.\n\n236\n00:11:26.866 --> 00:11:29.750\nAnd what we're gonna do,\n\n237\n00:11:29.750 --> 00:11:33.450\nspecify we have we'll make sure we have\nthe right ports selected, port 443.\n\n238\n00:11:33.450 --> 00:11:35.620\nNow, notice here just\nbefore we go forward.\n\n239\n00:11:35.620 --> 00:11:39.595\nIt says once we do this, right,\nonce we set this up we cannot,\n\n240\n00:11:39.595 --> 00:11:45.060\ncannot change this address or\nport number once we install configure.\n\n241\n00:11:45.060 --> 00:11:48.323\nSo we gotta make sure we get this right\nup at front because if we screw this up\n\n242\n00:11:48.323 --> 00:11:49.178\nwe have a problem.\n\n243\n00:11:49.178 --> 00:11:53.730\nThen we gotta go back and tear this down\nand recreate this cluster from scratch.\n\n244\n00:11:53.730 --> 00:11:55.870\nSo this is literally one of those one and\n\n245\n00:11:55.870 --> 00:11:59.740\ndone solutions, where you gotta make\nsure you're paying attention to details.\n\n246\n00:11:59.740 --> 00:12:04.688\nYou can't make any spelling mistakes, you\ncan't choose the wrong protocol when we do\n\n247\n00:12:04.688 --> 00:12:07.551\nHTTP versus HTTPS,\nput the wrong port number in.\n\n248\n00:12:07.551 --> 00:12:11.502\nAny of those things are fixable, but the\nproblem is fixing them requires tearing\n\n249\n00:12:11.502 --> 00:12:13.430\ndown and starting again from scratch.\n\n250\n00:12:13.430 --> 00:12:16.330\nSo C:\\format would be\na command you'd just wanna\n\n251\n00:12:16.330 --> 00:12:18.910\njust make sure you're familiar with right?\n\n252\n00:12:18.910 --> 00:12:20.590\nAll right.\nI'm only kidding, it was a joke,\n\n253\n00:12:20.590 --> 00:12:21.800\nyou're supposed to laugh.\n\n254\n00:12:23.100 --> 00:12:23.898\n&gt;&gt; Ha.\n&gt;&gt; Okay, thank you.\n\n255\n00:12:23.898 --> 00:12:24.960\n&gt;&gt; [LAUGH]\n&gt;&gt; You gotta validate\n\n256\n00:12:24.960 --> 00:12:25.900\nthese things when I do them.\n\n257\n00:12:25.900 --> 00:12:29.280\nAll right, so we're gonna go ahead, just\nmaking sure you know what's going on here.\n\n258\n00:12:29.280 --> 00:12:35.310\nWe're gonna go ahead and click Next, we\nhave to specify ours server certificate or\n\n259\n00:12:35.310 --> 00:12:37.390\nat least understand what we're gonna here.\n\n260\n00:12:37.390 --> 00:12:40.800\nNotice our SSL certificate\nare binding all ready exist for\n\n261\n00:12:40.800 --> 00:12:42.648\nthe selected class through URL.\n\n262\n00:12:42.648 --> 00:12:46.115\nMeaning I've already bound my\ncertificate to the IIS server,\n\n263\n00:12:46.115 --> 00:12:47.405\nit's all setup, ready to go.\n\n264\n00:12:47.405 --> 00:12:49.426\nSo we're not gonna have\nto worry about that.\n\n265\n00:12:49.426 --> 00:12:51.105\nSo that is important for us to know.\n\n266\n00:12:51.105 --> 00:12:52.705\nThat was done behind the scenes.\n\n267\n00:12:52.705 --> 00:12:55.635\nAnd you'll get a chance to see how we do\nthat in one of the upcoming episodes as\n\n268\n00:12:55.635 --> 00:12:57.495\nwe finish up our hands on walk through.\n\n269\n00:12:57.495 --> 00:12:58.985\nBut we've set that up already.\n\n270\n00:13:00.285 --> 00:13:04.397\nI'm gonna go ahead, we're gonna click\nNext on our licensor certificate,\n\n271\n00:13:04.397 --> 00:13:08.591\nwe have to specify the name of the server\nthat is gonna be used as the licenser.\n\n272\n00:13:08.591 --> 00:13:14.820\nIt is in this case, the machine, we're on\nplabdm01, so we've got that set up there.\n\n273\n00:13:14.820 --> 00:13:17.922\nI'm gonna go ahead and\nwe're gonna click Next.\n\n274\n00:13:17.922 --> 00:13:22.030\nThen we're gonna register our SCP or\nservice connection point now or\n\n275\n00:13:22.030 --> 00:13:23.170\nare we gonna do that later?\n\n276\n00:13:23.170 --> 00:13:25.110\nWe're gonna go ahead and\nregister that now.\n\n277\n00:13:25.110 --> 00:13:28.885\nWe've talked about the service connection\npoint as well, being an object we\n\n278\n00:13:28.885 --> 00:13:32.834\ncreate an Active Directory so that clients\nknow how to locate and find the RDMS and\n\n279\n00:13:32.834 --> 00:13:34.480\nuse the services of the cluster.\n\n280\n00:13:34.480 --> 00:13:38.985\nThis is that item that if it exists and\nwe're migrating, and we have a failure,\n\n281\n00:13:38.985 --> 00:13:43.085\nanything goes wrong, we have to tear down,\nremove from the cluster, or\n\n282\n00:13:43.085 --> 00:13:47.410\nrather remove from AD, then rebuild\nthe cluster and recreate everything.\n\n283\n00:13:47.410 --> 00:13:51.770\nSo we've talked about this as one of the\nissue associated with backup and recovery,\n\n284\n00:13:51.770 --> 00:13:55.680\nmigrations and upgrades, decommissioning\nthat whole conversation went through and\n\n285\n00:13:55.680 --> 00:13:57.598\ntalk about the surf connection point.\n\n286\n00:13:57.598 --> 00:14:01.560\nJust be aware of that,\ndon't confuse us with the CSP Cryptography\n\n287\n00:14:01.560 --> 00:14:04.800\nstore that we talked about\nsecurity Cryptography store.\n\n288\n00:14:04.800 --> 00:14:07.082\nSo two different hives just so\nyou are aware of that.\n\n289\n00:14:07.082 --> 00:14:08.867\nAll right, so\nwe're gonna register this now.\n\n290\n00:14:08.867 --> 00:14:14.648\nWe have our just kinda final summary\nscreen here, I'm gonna click Install.\n\n291\n00:14:14.648 --> 00:14:16.700\nLet this go ahead and do its thing.\n\n292\n00:14:16.700 --> 00:14:19.240\nNow, it is gonna take a couple\nminutes to finish up.\n\n293\n00:14:19.240 --> 00:14:21.730\nSo what we're gonna do is just wait for\n\n294\n00:14:21.730 --> 00:14:26.880\nthis to do all the magic and\nall the stuff that we need and\n\n295\n00:14:26.880 --> 00:14:30.142\nonce we're done we're gonna go ahead and\nwe're gonna recycle this server.\n\n296\n00:14:30.142 --> 00:14:33.980\nWe're gonna restart it because we have to\nrestart it to finish the installation.\n\n297\n00:14:33.980 --> 00:14:37.400\nSo we're gonna let that do its business,\nyou're gonna join us back here in just two\n\n298\n00:14:37.400 --> 00:14:39.870\nminutes as soon we're all\nfinished up ready to go.\n\n299\n00:14:39.870 --> 00:14:42.270\nAnd we're gonna have this server\nalready restarted, ready to go.\n\n300\n00:14:42.270 --> 00:14:46.440\nAnd at that point, we're gonna set\nup the ADRMS Super User group,\n\n301\n00:14:46.440 --> 00:14:48.050\nwe've already created\nthe Super User group in AD.\n\n302\n00:14:48.050 --> 00:14:49.750\nWe're gonna go ahead and configure it and\n\n303\n00:14:49.750 --> 00:14:51.589\nshow you how to do that\nas soon as we come back.\n\n304\n00:14:52.733 --> 00:14:55.313\nAll right, so\nyou can see we are back up and running.\n\n305\n00:14:55.313 --> 00:14:59.200\nWe've restarted the server, and\nwe've just loaded the ADR MS console.\n\n306\n00:14:59.200 --> 00:15:01.950\nSo we open it up the first time,\nget a little certificate prompt,\n\n307\n00:15:01.950 --> 00:15:04.050\njust click Yes to allow it to connect.\n\n308\n00:15:04.050 --> 00:15:07.187\nIt does a quick little configuration\nbehind the scenes just to load\n\n309\n00:15:07.187 --> 00:15:11.119\nthe console, connect out to the cluster\ninstance, make sure everything is good.\n\n310\n00:15:11.119 --> 00:15:13.750\nAnd then you have what you're\nlooking at in front of you.\n\n311\n00:15:13.750 --> 00:15:16.129\nWe have our\nCluster Console Management System open.\n\n312\n00:15:16.129 --> 00:15:20.060\nWe've got our instance plabdm01 connected.\n\n313\n00:15:20.060 --> 00:15:22.739\nGot all of our different areas we're gonna\nbe working through during the rest of our\n\n314\n00:15:22.739 --> 00:15:23.477\nconversations here.\n\n315\n00:15:23.477 --> 00:15:28.560\nWe're gonna start by going to Security\nPolicies, going to the Super Users area.\n\n316\n00:15:28.560 --> 00:15:31.132\nWe're gonna enable the super users group.\n\n317\n00:15:31.132 --> 00:15:34.992\nWe're gonna go ahead ,we'll see right now\nit's disabled, we talked about the fact\n\n318\n00:15:34.992 --> 00:15:37.800\nthat by default it will be disabled,\nwe're gonna enable it.\n\n319\n00:15:37.800 --> 00:15:42.860\nWe've created a group container NAD\nthat we're gonna use as the adr and\n\n320\n00:15:42.860 --> 00:15:45.846\nthat's super user groups so\nwe'll just gonna connect that in.\n\n321\n00:15:45.846 --> 00:15:49.649\nSo we're gonna right-click here, Enable\nsuper user we're gonna change to super\n\n322\n00:15:49.649 --> 00:15:52.167\nuser group because you will\nsee it has not been set yet.\n\n323\n00:15:52.167 --> 00:15:54.571\nSo we're gonna go ahead and click here.\n\n324\n00:15:54.571 --> 00:15:56.193\nWe're gonna go ahead and\n\n325\n00:15:56.193 --> 00:16:00.839\ninstead of not set because that's\njust not the group name we wanna use.\n\n326\n00:16:00.839 --> 00:16:05.336\nWe're gonna go browse and what we're gonna\ndo is pull in the group That we've already\n\n327\n00:16:05.336 --> 00:16:06.907\nused or we've set up rather.\n\n328\n00:16:06.907 --> 00:16:10.198\nWe'll do ADR MS, do a check name.\n\n329\n00:16:10.198 --> 00:16:13.280\nYou'll see ADR MS-Super Users comes up.\n\n330\n00:16:13.280 --> 00:16:15.250\nNow that's what I created and\ncalled the group.\n\n331\n00:16:15.250 --> 00:16:17.360\nYou can obviously create a group name and\n\n332\n00:16:17.360 --> 00:16:19.790\nassociate it and\nfigure out what you want to use.\n\n333\n00:16:19.790 --> 00:16:21.793\nWe're just gonna use that because\nit's easy to keep track of.\n\n334\n00:16:21.793 --> 00:16:24.880\nWe'll click OK, put that in here.\n\n335\n00:16:24.880 --> 00:16:27.210\nClick comply, click okay.\n\n336\n00:16:27.210 --> 00:16:29.430\nAnd then we've got that group set up here.\n\n337\n00:16:29.430 --> 00:16:35.655\nAnd it's got that email\nadrmoustachesuperuser@practicelabs.com.\n\n338\n00:16:35.655 --> 00:16:38.080\nThat we've already set up and\nare associated with the group.\n\n339\n00:16:38.080 --> 00:16:39.420\nSo we've got all that configured.\n\n340\n00:16:39.420 --> 00:16:41.400\nThat's how we set up a super user group.\n\n341\n00:16:41.400 --> 00:16:42.230\nNot too complicated.\n\n342\n00:16:42.230 --> 00:16:43.740\nWe talked about turning it on and\n\n343\n00:16:43.740 --> 00:16:46.190\nthat the fact it really is just\na matter of selecting the group.\n\n344\n00:16:46.190 --> 00:16:48.440\nAnd then it's given certain\nrights as a result of that.\n\n345\n00:16:48.440 --> 00:16:50.044\nAnd so we've gone ahead and\nwe've set that up.\n\n346\n00:16:50.044 --> 00:16:53.978\nNow what we're gonna do is setup an ADRMS\ntemplate or configure the template,\n\n347\n00:16:53.978 --> 00:16:55.550\nstart working with them.\n\n348\n00:16:55.550 --> 00:16:58.030\nSo what we're gonna do now is go\nto the rights policy template area\n\n349\n00:16:58.030 --> 00:16:58.669\nright up there.\n\n350\n00:16:58.669 --> 00:17:02.540\nAnd we're gonna create a distributed\nrights policy template.\n\n351\n00:17:02.540 --> 00:17:03.128\nSo let's just click here.\n\n352\n00:17:03.128 --> 00:17:06.260\nLet's go up here to\nrights policy templates.\n\n353\n00:17:06.260 --> 00:17:10.320\nYou'll see that we don't have any\ntemplates currently set again not set yet.\n\n354\n00:17:11.980 --> 00:17:15.350\nGo ahead and we're going to decide that we\n\n355\n00:17:15.350 --> 00:17:18.770\nare going to actually let's do it this\nway, we'll just scroll down here.\n\n356\n00:17:18.770 --> 00:17:21.910\nAnd down on the bottom here we're go\nahead, can we go full screen just so\n\n357\n00:17:21.910 --> 00:17:24.690\nyou can see these probably\na little hard to see.\n\n358\n00:17:24.690 --> 00:17:26.520\nWhat I was doing is I\nwas just right clicking,\n\n359\n00:17:26.520 --> 00:17:29.034\nI was gonna show you the menu\noptions here and the properties.\n\n360\n00:17:29.034 --> 00:17:31.865\nBut we can look at the same\ninformation down here.\n\n361\n00:17:31.865 --> 00:17:33.360\nWe're gonna go ahead and\n\n362\n00:17:33.360 --> 00:17:36.800\nwe're gonna create a distributed rights\npolicy template right from here.\n\n363\n00:17:36.800 --> 00:17:39.514\nWe can manage our archive rights\npolicy templates if we have any that\n\n364\n00:17:39.514 --> 00:17:40.187\nare available.\n\n365\n00:17:40.187 --> 00:17:44.650\nWe can change the policy template\nfile location if we set one up.\n\n366\n00:17:44.650 --> 00:17:48.270\nAnd we decide that we want to change that\nfor some reason, we can go ahead and\n\n367\n00:17:48.270 --> 00:17:49.960\ndo that if we need to.\n\n368\n00:17:49.960 --> 00:17:52.470\nCan also create distributed\nrights policy templates over\n\n369\n00:17:52.470 --> 00:17:53.800\nhere under the actions area.\n\n370\n00:17:53.800 --> 00:17:57.120\nSo we have a couple of different\nplaces we can go to do this.\n\n371\n00:17:57.120 --> 00:17:58.890\nWe're gonna go ahead click this and\n\n372\n00:17:58.890 --> 00:18:02.930\nclick add as soon as we add we'll\nhave the ability to start adding.\n\n373\n00:18:02.930 --> 00:18:04.366\nSo we're gonna go ahead and\n\n374\n00:18:04.366 --> 00:18:08.244\nwe are going to just move that down just\na smidge you can see the top of that.\n\n375\n00:18:08.244 --> 00:18:13.279\nWe're gonna create Distributed Rights\nPolicy Template by adding in here,\n\n376\n00:18:13.279 --> 00:18:14.650\nso we'll click dd.\n\n377\n00:18:14.650 --> 00:18:18.350\nAnd then we're gonna be asked to provide\nsome information here, we'll just wait for\n\n378\n00:18:18.350 --> 00:18:19.990\nthat to pop up.\n\n379\n00:18:19.990 --> 00:18:23.180\nAnd then we're gonna\nspecify some language,\n\n380\n00:18:23.180 --> 00:18:25.730\nname, description information here so\nwe can populate this.\n\n381\n00:18:26.980 --> 00:18:28.870\nLet's try that one more time.\n\n382\n00:18:28.870 --> 00:18:29.560\nThere we go, all right.\n\n383\n00:18:31.080 --> 00:18:35.085\nSo let's go ahead and for language\nyou'll see we have either English US or\n\n384\n00:18:35.085 --> 00:18:37.160\nwhatever it is that we're gonna use.\n\n385\n00:18:37.160 --> 00:18:39.909\nYou'll see we support all of the different\n\n386\n00:18:39.909 --> 00:18:44.670\nlanguages that may be required here\nquite a few of them as you can see.\n\n387\n00:18:44.670 --> 00:18:47.730\nSo full language support just\nas I'm scrolling up and down so\n\n388\n00:18:47.730 --> 00:18:49.220\nyou can see everything.\n\n389\n00:18:49.220 --> 00:18:52.960\nWe'll go ahead and\nlet me just scroll down here.\n\n390\n00:18:52.960 --> 00:18:57.770\nAnd we will do English but\nwe're gonna do English for the,\n\n391\n00:18:57.770 --> 00:19:01.720\nlet me see where the United States\nto United Kingdom there.\n\n392\n00:19:01.720 --> 00:19:02.830\nThere we go, right there.\n\n393\n00:19:02.830 --> 00:19:05.880\nWe'll do United Kingdom based\non the templates we're using for\n\n394\n00:19:05.880 --> 00:19:08.570\na lab hosting with a practice labs.\n\n395\n00:19:08.570 --> 00:19:12.810\nWe're gonna do a name list, we'll do view,\naccess review on the access just so\n\n396\n00:19:12.810 --> 00:19:15.510\nwe know what this is gonna be used for.\n\n397\n00:19:15.510 --> 00:19:19.250\nAnd we could put a description in\nif we want to it'll be up to us.\n\n398\n00:19:19.250 --> 00:19:24.674\nSo go ahead and will put in template\n\n399\n00:19:24.674 --> 00:19:30.473\nspell that correctly, template for\n\n400\n00:19:30.473 --> 00:19:36.280\nusers with view only access, okay.\n\n401\n00:19:36.280 --> 00:19:39.604\nThen we will click add\nthat'll get programmed in,\n\n402\n00:19:39.604 --> 00:19:44.200\nwe'll be able to see that template\nitem stacked up in the wizard.\n\n403\n00:19:44.200 --> 00:19:47.510\nWe'll then go ahead and we'll click next\nand we'll put some user rights on there.\n\n404\n00:19:47.510 --> 00:19:49.290\nSo we'll do that.\n\n405\n00:19:49.290 --> 00:19:50.685\nWe'll specify user rights.\n\n406\n00:19:50.685 --> 00:19:53.179\nWe've to add in users and their rights.\n\n407\n00:19:53.179 --> 00:19:57.342\nIt's a pretty standard ACL like interface\nthat we're probably used to using from\n\n408\n00:19:57.342 --> 00:19:58.790\nthe active directory.\n\n409\n00:19:58.790 --> 00:20:02.240\nSo we're gonna go ahead and\nadd in some users, let's click here.\n\n410\n00:20:02.240 --> 00:20:05.650\nThe email address of the user or\nthe group is to be used.\n\n411\n00:20:05.650 --> 00:20:08.130\nSo we're gonna go ahead and\nwe are going to specify that.\n\n412\n00:20:08.130 --> 00:20:10.150\nNotice that we have an opt-in for anyone.\n\n413\n00:20:10.150 --> 00:20:13.540\nMeaning we could just add anyone\nanonymously in other words without having\n\n414\n00:20:13.540 --> 00:20:15.800\nto specify them ahead of time and\napprove them.\n\n415\n00:20:15.800 --> 00:20:19.500\nWe also have a browseable option where\nwe can go and find users if we want to,\n\n416\n00:20:19.500 --> 00:20:22.082\njust type in marketing.\n\n417\n00:20:22.082 --> 00:20:25.626\nYes, I think I appreciate that.\n\n418\n00:20:25.626 --> 00:20:29.819\nMarketing at- [CROSSTALK]\n&gt;&gt; I give you one\n\n419\n00:20:29.819 --> 00:20:31.945\nthing your typos are usually quite funny.\n\n420\n00:20:31.945 --> 00:20:32.651\n&gt;&gt; They are.\n\n421\n00:20:32.651 --> 00:20:36.331\n&gt;&gt; [LAUGH]\n&gt;&gt; I'll correct this labs.com, so\n\n422\n00:20:36.331 --> 00:20:37.970\nI've gone ahead.\n\n423\n00:20:37.970 --> 00:20:40.980\nAnd I've already populated some\nemail addresses on users and\n\n424\n00:20:40.980 --> 00:20:44.130\ngroups in the active directory just so\nwe can pull the menu and use them here.\n\n425\n00:20:44.130 --> 00:20:48.262\nSo we have marketing,\nwe're gonna go ahead and\n\n426\n00:20:48.262 --> 00:20:52.820\nwe are once we have put that\nin we're gonna go ahead.\n\n427\n00:20:52.820 --> 00:20:55.057\nAnd we're going to give them views so\n\n428\n00:20:55.057 --> 00:20:59.580\nwe're gonna select view as a permission\nspecify the view permission.\n\n429\n00:20:59.580 --> 00:21:02.560\nNotice I just click a kind of put\na check mark in their for us so\n\n430\n00:21:02.560 --> 00:21:04.040\nwe know what that is.\n\n431\n00:21:04.040 --> 00:21:07.976\nAnd then let's take a look at up here or\njust scroll down so\n\n432\n00:21:07.976 --> 00:21:10.605\nyou could see the other permissions.\n\n433\n00:21:10.605 --> 00:21:13.800\nYou know we have a pretty extensive\nlist of permissions, edit and\n\n434\n00:21:13.800 --> 00:21:16.429\nview writes allow macros\nextract apply all, right.\n\n435\n00:21:16.429 --> 00:21:22.831\nReply forward print these are all of the\npermissions that users will be given or\n\n436\n00:21:22.831 --> 00:21:26.810\nnot be allowed to execute\nbased on the template.\n\n437\n00:21:26.810 --> 00:21:29.546\nRemember we talked about the fact\nthat the templates are the control\n\n438\n00:21:29.546 --> 00:21:30.463\nmechanisms, right.\n\n439\n00:21:30.463 --> 00:21:34.432\nThey are essentially the Architectural\nblueprint that is applied through\n\n440\n00:21:34.432 --> 00:21:36.670\nthe licensing grant and the rack.\n\n441\n00:21:36.670 --> 00:21:39.950\nAnd that is then used to control\nwhat users will or will not do.\n\n442\n00:21:39.950 --> 00:21:44.562\nSo we're specing out and defining\nthe exact level of access a user will\n\n443\n00:21:44.562 --> 00:21:48.719\nget by giving them permissions in\nthis template as we set it up.\n\n444\n00:21:48.719 --> 00:21:50.520\nAnd then we apply these templates.\n\n445\n00:21:50.520 --> 00:21:51.429\nAnd then users are bound by them.\n\n446\n00:21:51.429 --> 00:21:55.254\nAnd this is why if we delete the template\nas we talked about in one of the prior\n\n447\n00:21:55.254 --> 00:21:56.230\nepisodes.\n\n448\n00:21:56.230 --> 00:22:00.140\nThen users are not able to access data\n\n449\n00:22:00.140 --> 00:22:04.160\nbecause when the template is deleted all\nthe requirements and the permissions.\n\n450\n00:22:04.160 --> 00:22:06.153\nAnd all the information\nabout how to access and\n\n451\n00:22:06.153 --> 00:22:07.642\nuse the license grant is removed.\n\n452\n00:22:07.642 --> 00:22:12.040\nAnd that's why it's so important not never\nto delete permissions, excuse me never to\n\n453\n00:22:12.040 --> 00:22:15.306\ndelete templates because if you\ndo you remove all permissions.\n\n454\n00:22:15.306 --> 00:22:18.460\nSo that's what we're setting up\nhere just you can see that follow\n\n455\n00:22:18.460 --> 00:22:19.520\nthe logic, all right.\n\n456\n00:22:19.520 --> 00:22:23.430\nSo if we go back you can see at the bottom\nthere, wanna show you this item as well.\n\n457\n00:22:23.430 --> 00:22:25.100\nYou'll see we can grant owner,\n\n458\n00:22:25.100 --> 00:22:29.150\nowner is often called creator\nowner and/or author in this case.\n\n459\n00:22:29.150 --> 00:22:33.457\nOur full control rights with no expiration\nmeaning the person who creates this is\n\n460\n00:22:33.457 --> 00:22:35.053\ngonna be given full control.\n\n461\n00:22:35.053 --> 00:22:38.600\nAnd they will always have full control,\nwe're not gonna expire them.\n\n462\n00:22:38.600 --> 00:22:39.626\nSo we just wanna make\nsure we're aware of that.\n\n463\n00:22:39.626 --> 00:22:43.988\nBecause if we don't do that in the grant\nthen the owner will be bound by\n\n464\n00:22:43.988 --> 00:22:46.710\nthe same level of rights\nthat the user has.\n\n465\n00:22:46.710 --> 00:22:49.880\nWhich in this case would not\nbe [LAUGH] a good idea, right?\n\n466\n00:22:49.880 --> 00:22:52.070\nSo just wanna make sure we're\naware of that, all right.\n\n467\n00:22:52.070 --> 00:22:55.753\nSo then we're gonna go ahead and we're\ngonna specify the expiration policy next.\n\n468\n00:22:55.753 --> 00:22:57.542\nI'm gonna click next here,\n\n469\n00:22:57.542 --> 00:23:01.510\nwe've talked about the fact we\ncan expire content as well.\n\n470\n00:23:01.510 --> 00:23:03.170\nDefault is never expire.\n\n471\n00:23:03.170 --> 00:23:08.100\nWe'll go ahead and we'll specify expires\nafter either so many either hours or\n\n472\n00:23:08.100 --> 00:23:11.030\non a certain hour and\nday or after so many days.\n\n473\n00:23:11.030 --> 00:23:15.880\nWe'll just make that a 15 day solution,\nuse license expiration.\n\n474\n00:23:15.880 --> 00:23:20.160\nWe'll go ahead and\nspecify that after 15 days as well.\n\n475\n00:23:20.160 --> 00:23:26.660\nSo we'll make sure that this way the\ncontent expires and the license expires.\n\n476\n00:23:26.660 --> 00:23:29.787\nMeaning the license could actually expire.\n\n477\n00:23:29.787 --> 00:23:33.943\nBut the content could still be there or we\ncould say, you know what the content and\n\n478\n00:23:33.943 --> 00:23:35.300\nthe license both expire.\n\n479\n00:23:35.300 --> 00:23:38.647\nAnd you no longer have rights to\nthe content and it's no longer available.\n\n480\n00:23:38.647 --> 00:23:43.845\nSo we're gonna specify both,\nwe'll click next.\n\n481\n00:23:43.845 --> 00:23:47.340\nWe'll go ahead and select or\nspecify the extended policy.\n\n482\n00:23:48.970 --> 00:23:52.950\nIf we're gonna go ahead and\nput some information in here such as.\n\n483\n00:23:52.950 --> 00:23:56.122\nOr write grant such as enable users\nto view protected content using\n\n484\n00:23:56.122 --> 00:23:57.093\nthe browser add on.\n\n485\n00:23:57.093 --> 00:24:00.892\nOther maybe browser add ons for\ndifferent platforms we want to use or\n\n486\n00:24:00.892 --> 00:24:04.171\nother add ins for\nother programs that may be appropriate.\n\n487\n00:24:04.171 --> 00:24:05.827\nWe want to then control that and\n\n488\n00:24:05.827 --> 00:24:09.528\nspecify that, require new license\nevery time content is consumed.\n\n489\n00:24:09.528 --> 00:24:12.429\nWe'll disable client side\ncaching of the license.\n\n490\n00:24:12.429 --> 00:24:14.750\nClient side caching is\nessentially like a cookie.\n\n491\n00:24:14.750 --> 00:24:17.640\nWe're putting the license\ninto the client side app,\n\n492\n00:24:17.640 --> 00:24:19.410\nallowing it to be resident there.\n\n493\n00:24:19.410 --> 00:24:21.920\nSo they don't have request\na new license every time, but\n\n494\n00:24:21.920 --> 00:24:24.535\nsimply use the license they get\nthe first time they connect.\n\n495\n00:24:24.535 --> 00:24:27.145\nWe talked a bit about this in one\nof the prior episodes as well.\n\n496\n00:24:27.145 --> 00:24:30.585\nThe idea is that in a lot of these rights\nmanaged applications, you download\n\n497\n00:24:30.585 --> 00:24:34.705\na license file, you associate it with\nthe app, it's cached and stored there.\n\n498\n00:24:34.705 --> 00:24:36.940\nYou don't have to request\na new one every time.\n\n499\n00:24:36.940 --> 00:24:40.500\nWe can specify how we want\nthat behavior to be setup and\n\n500\n00:24:40.500 --> 00:24:44.810\nwhether we wanna go get a new license\nevery time or simply use the existing one.\n\n501\n00:24:44.810 --> 00:24:46.390\nSo it's up to us to decide.\n\n502\n00:24:46.390 --> 00:24:50.060\nWe'll go ahead and setup and\nselect hey get a new license every time.\n\n503\n00:24:50.060 --> 00:24:52.950\nIf we would like to specify\nadditional information for\n\n504\n00:24:52.950 --> 00:24:57.050\nADRMS enabled app, we can specify that\nhere and here is name-value pairs.\n\n505\n00:24:57.050 --> 00:25:00.935\nWe could go in and add in additional\ninformation that would be required.\n\n506\n00:25:00.935 --> 00:25:03.561\nOr that we would have to specify\nthe client would provide and\n\n507\n00:25:03.561 --> 00:25:06.570\nhave resident in their system for\nthem to actually use the license.\n\n508\n00:25:06.570 --> 00:25:10.320\nSo it's a very, very detailed interface,\nwhere we can specify and\n\n509\n00:25:10.320 --> 00:25:13.190\nbe incredibly granular about\nwhat we wanna do here.\n\n510\n00:25:13.190 --> 00:25:16.170\nThere's a lot of subtleties\nassociated with setting up ADRMS.\n\n511\n00:25:16.170 --> 00:25:19.780\nBecause there's a lot of configuration\noptions that we would have to remember and\n\n512\n00:25:19.780 --> 00:25:20.950\nunderstand how to specify.\n\n513\n00:25:20.950 --> 00:25:22.030\nSo we're done with that.\n\n514\n00:25:22.030 --> 00:25:22.780\nWe'll click Next.\n\n515\n00:25:24.110 --> 00:25:30.000\nWhether or not we wanna have a specific\nrevocation URL associated with this.\n\n516\n00:25:30.000 --> 00:25:32.350\nYou can do that as part\nof the revocation policy.\n\n517\n00:25:32.350 --> 00:25:34.440\nWe're not gonna bother with that,\nwe're just gonna click Finish.\n\n518\n00:25:34.440 --> 00:25:35.920\nBut we could add that in as well.\n\n519\n00:25:35.920 --> 00:25:37.360\nAll right, so we've gone ahead and\n\n520\n00:25:37.360 --> 00:25:42.300\nwe've set up one of our rights policy\ntemplates to enable view only users.\n\n521\n00:25:42.300 --> 00:25:47.520\nOr users with view only rights, that\nwill allow them to be able to go in and\n\n522\n00:25:47.520 --> 00:25:52.020\nto be able to when they have this\nparticular template applied to them\n\n523\n00:25:52.020 --> 00:25:55.850\nget a license that gives them rights but\nonly to view the content.\n\n524\n00:25:55.850 --> 00:25:57.810\nNot to print it, not to interact with it,\n\n525\n00:25:57.810 --> 00:26:00.140\nnot to save it as you saw,\nnothing like that.\n\n526\n00:26:00.140 --> 00:26:04.330\nAnd the license on that content\nwill expire after 15 days so\n\n527\n00:26:04.330 --> 00:26:07.020\nwe've set all that up,\nprogrammed all that in ahead of time.\n\n528\n00:26:07.020 --> 00:26:09.880\nNow we're gonna go ahead and\nset up rights policy\n\n529\n00:26:09.880 --> 00:26:13.680\ntemplate distribution just to wrap\nthis particular part of our demo.\n\n530\n00:26:13.680 --> 00:26:17.237\nKind of part one of the multi parter that\nwe're gonna be doing to show you how to\n\n531\n00:26:17.237 --> 00:26:18.902\nwalk through this start to finish.\n\n532\n00:26:18.902 --> 00:26:20.980\nAll right, so\nwhat we're gonna do now is the following.\n\n533\n00:26:20.980 --> 00:26:23.830\nLet me go in here to our machine.\n\n534\n00:26:23.830 --> 00:26:30.618\nLet me just check something here\nreally quickly, and just make sure.\n\n535\n00:26:30.618 --> 00:26:33.015\nAll right, PowerShell is up and\nrunning, all good.\n\n536\n00:26:33.015 --> 00:26:35.833\nWe're gonna go into our\nFile Explorer here, and\n\n537\n00:26:35.833 --> 00:26:40.660\nwe're gonna create a folder in the C drive\nthat's gonna home the templates for us.\n\n538\n00:26:40.660 --> 00:26:42.610\nLet me just do that real quick.\n\n539\n00:26:42.610 --> 00:26:43.710\nDo new folder.\n\n540\n00:26:43.710 --> 00:26:46.615\nI'm gonna call this ADRMS templates.\n\n541\n00:26:50.023 --> 00:26:52.300\nDo that and\nnotice I spelled that correctly.\n\n542\n00:26:52.300 --> 00:26:53.347\n&gt;&gt; You did.\n\n543\n00:26:53.347 --> 00:26:55.080\n&gt;&gt; All right,\nwe're gonna setup and share this.\n\n544\n00:26:55.080 --> 00:26:56.670\nWe're just gonna right-click on here.\n\n545\n00:26:56.670 --> 00:27:01.459\nGo to Properties, go in,\ngo to sharing, bring that over here so\n\n546\n00:27:01.459 --> 00:27:03.390\nyou could see that.\n\n547\n00:27:03.390 --> 00:27:10.260\nGo to advanced sharing and we're gonna\nspecify share and go to permissions here.\n\n548\n00:27:10.260 --> 00:27:11.900\nAnd we're gonna add permissions in.\n\n549\n00:27:11.900 --> 00:27:16.880\nAnd we're gonna specify our\naccount that we have created.\n\n550\n00:27:16.880 --> 00:27:18.450\nThat is the ADRMS account.\n\n551\n00:27:18.450 --> 00:27:24.490\nSo adrmsacct and we're gonna check\nthat and notice that's there.\n\n552\n00:27:24.490 --> 00:27:26.434\n&gt;&gt; Yeah.\n&gt;&gt; There it comes up with no trouble.\n\n553\n00:27:26.434 --> 00:27:27.798\nI don't know what the heck that\nwas thinking the last time.\n\n554\n00:27:27.798 --> 00:27:28.750\n&gt;&gt; Yeah.\n[LAUGH]\n\n555\n00:27:28.750 --> 00:27:30.240\n&gt;&gt; Gonna have to have a conversation with\n\n556\n00:27:30.240 --> 00:27:30.740\nthem offline.\n\n557\n00:27:30.740 --> 00:27:32.620\n&gt;&gt; Right.\n&gt;&gt; And find out what's going on there.\n\n558\n00:27:32.620 --> 00:27:33.850\n&gt;&gt; Very stern talking to.\n\n559\n00:27:33.850 --> 00:27:36.959\n&gt;&gt; Absolutely, all right, so we're gonna\nassign full control to the account.\n\n560\n00:27:36.959 --> 00:27:39.435\nBecause we want the account to have\nrights to be able to get in and\n\n561\n00:27:39.435 --> 00:27:42.053\nuse this folder to publish the templates\nand make them available so\n\n562\n00:27:42.053 --> 00:27:44.677\nthey could be distributed\n&gt;&gt; So this is our service account.\n\n563\n00:27:44.677 --> 00:27:47.310\nThe one we used as part of\nthe installation to stand the cluster up,\n\n564\n00:27:47.310 --> 00:27:48.020\nif you remember.\n\n565\n00:27:48.020 --> 00:27:51.920\nSo we're gonna highlight that, give\nthat full control, specify that there.\n\n566\n00:27:51.920 --> 00:27:53.398\nJust click Apply, click OK.\n\n567\n00:27:53.398 --> 00:27:56.331\nJust make sure we have that setup.\n\n568\n00:27:56.331 --> 00:28:01.150\nAnd then we're gonna go ahead,\njust click Apply, OK one more time, and\n\n569\n00:28:01.150 --> 00:28:03.030\nthen close there.\n\n570\n00:28:03.030 --> 00:28:04.910\nAnd we're gonna create\none more folder here.\n\n571\n00:28:06.260 --> 00:28:09.220\nLet's do this one,\nwe'll call this WordDocs.\n\n572\n00:28:09.220 --> 00:28:14.223\nThis will be where we're gonna put\ninformation and data that we're\n\n573\n00:28:14.223 --> 00:28:19.370\nactually gonna want to have\ncontrolled using the ADRMS solution.\n\n574\n00:28:19.370 --> 00:28:21.170\nWe'll go ahead and\nwe'll share this out as well.\n\n575\n00:28:23.160 --> 00:28:24.973\nI'll give everybody full control of this.\n\n576\n00:28:24.973 --> 00:28:29.630\nLet me just go in here,\ngo to Properties, just share this out.\n\n577\n00:28:29.630 --> 00:28:33.390\nNow the everyone group\nalready has permissions but\n\n578\n00:28:33.390 --> 00:28:35.340\nthe default share is everyone read.\n\n579\n00:28:35.340 --> 00:28:38.742\nWe're gonna go ahead and change that, or\nthe default share permission I should say,\n\n580\n00:28:38.742 --> 00:28:39.509\nis everyone read.\n\n581\n00:28:39.509 --> 00:28:42.887\nI long for the days when its everyone full\ncontrol, back when it was a simpler time.\n\n582\n00:28:42.887 --> 00:28:45.810\nWe just trusted everybody cuz, yeah we\ndidn't think anybody would do any harm.\n\n583\n00:28:45.810 --> 00:28:47.870\nBoy were we stupid, right?\n\n584\n00:28:47.870 --> 00:28:53.340\nAll right, so we're gonna do that,\nset that up, get those shares in there.\n\n585\n00:28:53.340 --> 00:28:57.480\nLet's go back into our template\nmanagement area now and\n\n586\n00:28:57.480 --> 00:29:01.930\nwe're gonna change the distributor\nrights template file location.\n\n587\n00:29:01.930 --> 00:29:04.833\nSo were back here, we talked about\nthis down on the bottom here.\n\n588\n00:29:04.833 --> 00:29:08.902\nWe're now gonna go point that to\nthe folder that we just created for\n\n589\n00:29:08.902 --> 00:29:10.873\nthe ADRMS templates in C drive.\n\n590\n00:29:10.873 --> 00:29:16.381\nSo we're gonna go ahead and instead of\nthis not being set, we're gonna go and\n\n591\n00:29:16.381 --> 00:29:21.860\nwe are going to enable export and\nwe're gonna specify the location here.\n\n592\n00:29:21.860 --> 00:29:27.460\nNow, we have to do this with a UNC,\na universal naming convention path, right?\n\n593\n00:29:27.460 --> 00:29:30.550\nSo we can't just say,\nC drive, ADRMS templates.\n\n594\n00:29:30.550 --> 00:29:34.110\nWe have to do this with the UNC that'll be\npublished so that we can get to it over\n\n595\n00:29:34.110 --> 00:29:39.268\nthe web or through a remote connection\nusing the UNC as the driver for that.\n\n596\n00:29:39.268 --> 00:29:43.450\nSo we're gonna put this in and\n\n597\n00:29:43.450 --> 00:29:48.134\nthis is gonna be plabdm01, and\n\n598\n00:29:48.134 --> 00:29:52.840\nwhat do we do, adrmstemplates.\n\n599\n00:29:52.840 --> 00:29:55.925\nMake sure we spell that correctly,\nwhich we did not.\n\n600\n00:29:55.925 --> 00:29:59.392\nadrmstemplates, templates with an A.\n\n601\n00:29:59.392 --> 00:30:03.090\nAll right, so we're gonna go in,\nwe're gonna hit Apply, hit OK on that,\n\n602\n00:30:03.090 --> 00:30:04.580\nmake sure we have that set up.\n\n603\n00:30:06.480 --> 00:30:08.930\nAnd then we're gonna go ahead and\n\n604\n00:30:08.930 --> 00:30:14.680\nwe are going to just double check\nthat our template is there.\n\n605\n00:30:14.680 --> 00:30:19.540\nLet's go in, and if we were successful as\nwe can see, our view only access template\n\n606\n00:30:19.540 --> 00:30:23.040\nXML document that explains the settings\nand the template is published there.\n\n607\n00:30:23.040 --> 00:30:25.240\nAnd we can see that it's\nsitting in the share so\n\n608\n00:30:25.240 --> 00:30:27.730\nthat we know that that is now ready to go.\n\n609\n00:30:27.730 --> 00:30:29.600\nAnd if we wanna take a look at it quickly,\n\n610\n00:30:29.600 --> 00:30:31.850\njust to round out this\npart of our conversation.\n\n611\n00:30:31.850 --> 00:30:36.190\nLet's just highlight that real quick,\ngo to Properties here.\n\n612\n00:30:36.190 --> 00:30:37.849\nAnd actually not what we want.\n\n613\n00:30:37.849 --> 00:30:38.776\nI wanna open that up.\n\n614\n00:30:38.776 --> 00:30:45.205\nLet's open that with Notepad real quick,\nand we can see,\n\n615\n00:30:47.404 --> 00:30:51.800\nThat it is just an XML file,\nnothing too exciting in there.\n\n616\n00:30:51.800 --> 00:30:54.650\nJust got all the code\nassociated with choices we made\n\n617\n00:30:54.650 --> 00:30:57.340\nwhen we were walking through and\nsetting the template up.\n\n618\n00:30:57.340 --> 00:31:03.440\nAnd if you look carefully we\ncan see things like our URL for\n\n619\n00:31:03.440 --> 00:31:08.350\naddress, and\nwe can see the HTTP ADRMS Practice labs,\n\n620\n00:31:08.350 --> 00:31:11.680\nURL for licensing right there.\n\n621\n00:31:11.680 --> 00:31:13.893\nAnd we could see our publishing points.\n\n622\n00:31:13.893 --> 00:31:19.360\nAnd we can see the information about\nthe user that we have assigned rights to.\n\n623\n00:31:19.360 --> 00:31:23.810\nThe marketing@practicelabs.com\nuser object is listed right there.\n\n624\n00:31:23.810 --> 00:31:26.990\nSo if we go through carefully and\nreally start looking at the detail\n\n625\n00:31:26.990 --> 00:31:31.010\nwe can see all the information\nthat we specified in the wizard.\n\n626\n00:31:31.010 --> 00:31:34.220\nWe can see the types and\nchoices that we have made.\n\n627\n00:31:34.220 --> 00:31:35.420\nBut we obviously have to go through and\n\n628\n00:31:35.420 --> 00:31:37.190\nreally pay attention to\nwhat's going on in there.\n\n629\n00:31:37.190 --> 00:31:39.853\nWe could see the cryptography information.\n\n630\n00:31:39.853 --> 00:31:44.058\n2048 bit key, hash 256 bits, etcetera.\n\n631\n00:31:44.058 --> 00:31:47.038\nSo we could see all that information\nas part of the template.\n\n632\n00:31:47.038 --> 00:31:48.990\nAll right, so we've got that,\nwe're just gonna get out of there.\n\n633\n00:31:48.990 --> 00:31:53.945\nWe're just gonna go ahead and\nminimize that and I think that's\n\n634\n00:31:53.945 --> 00:31:57.915\ngonna be a good place for us to stop\nthe the initial walk-through in part one.\n\n635\n00:31:57.915 --> 00:31:59.885\nWe're gonna come back in part two.\n\n636\n00:31:59.885 --> 00:32:03.485\nAnd we're gonna talk about how to\ncreate an exclusion and trust policy.\n\n637\n00:32:03.485 --> 00:32:05.235\nKinda continue walking through,\n\n638\n00:32:05.235 --> 00:32:09.315\ncontinue setting up this first\nside of the ADRMS solution,\n\n639\n00:32:09.315 --> 00:32:14.055\nour initial cluster, our root cluster in,\nour first domain practice labs.com.\n\n640\n00:32:14.055 --> 00:32:15.820\nWe'll finish getting this all set up.\n\n641\n00:32:15.820 --> 00:32:19.300\nThen we're gonna go ahead, we're gonna\ncreate a secondary domain in another\n\n642\n00:32:19.300 --> 00:32:22.980\nforest, practice IT and\nthen we're gonna set this up again and\n\n643\n00:32:22.980 --> 00:32:25.480\nthen we're gonna talk about\nhow we link the two together.\n\n644\n00:32:25.480 --> 00:32:28.620\n&gt;&gt; Just when you thought it was safe\nto go back to ADFS, we're not done,\n\n645\n00:32:28.620 --> 00:32:29.983\nwe've got plenty more to go.\n\n646\n00:32:29.983 --> 00:32:35.304\nSo stick with us and join us back in part\ntwo on this here demo walk through and\n\n647\n00:32:35.304 --> 00:32:37.845\nsee what else lies in the ADFS.\n\n648\n00:32:37.845 --> 00:32:38.549\n&gt;&gt; ADRMS.\n\n649\n00:32:38.549 --> 00:32:39.502\n&gt;&gt; I'm sorry, ADRMS, yes.\n\n650\n00:32:39.502 --> 00:32:40.295\nThere's so many ADs right now.\n\n651\n00:32:40.295 --> 00:32:41.721\n&gt;&gt; Yes.\n&gt;&gt; Now you got me doing it,\n\n652\n00:32:41.721 --> 00:32:42.891\nhe's infected me with this.\n\n653\n00:32:42.891 --> 00:32:44.107\n&gt;&gt; And there's ADCS.\n\n654\n00:32:44.107 --> 00:32:45.607\n&gt;&gt; Goodness gracious.\n\n655\n00:32:45.607 --> 00:32:48.557\nWe'll let you go before we get\ntoo deep in these acronyms.\n\n656\n00:32:48.557 --> 00:32:51.091\n&gt;&gt; Thanks for that, Adam, I'm looking\nforward to seeing the next one.\n\n657\n00:32:51.091 --> 00:32:53.097\nLooking forward to seeing you\ngood folks there as well.\n\n658\n00:32:53.097 --> 00:32:55.067\nAnd as for this episode,\nwe're signing off.\n\n659\n00:32:55.067 --> 00:32:57.677\nFor ITProTV, I've been your host,\nDaniel Lowry.\n\n660\n00:32:57.677 --> 00:32:58.477\n&gt;&gt; I'm Adam Gordon.\n\n661\n00:32:58.477 --> 00:32:59.557\n&gt;&gt; And we'll see you next time.\n\n662\n00:32:59.557 --> 00:33:06.961\n[MUSIC]\n\n663\n00:33:06.961 --> 00:33:10.145\nThank you for watching ITProTV\n\n",
          "vimeoId": "213660179"
        },
        {
          "description": "In this episode, Daniel and Adam continue their demonstration of configuring Active Directory Rights Management Services. Here they will take all the concepts that you've been learning and walk you through the setup involved in standing up a AD-RMS system.",
          "length": "2515",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-2-configuring_ad-rms_pt2-041417-PGM.00_41_38_28.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-2-configuring_ad-rms_pt2-041417-PGM.00_41_38_28.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-2-configuring_ad-rms_pt2-041417-PGM.00_41_38_28.Still001-sm.jpg",
          "title": "Configuring AD-RMS Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:02.157\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:02.157 --> 00:00:06.241\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:06.241 --> 00:00:08.254\n[MUSIC]\n\n4\n00:00:08.254 --> 00:00:12.277\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.277 --> 00:00:14.041\n&gt;&gt; All right, greetings everyone and\n\n6\n00:00:14.041 --> 00:00:16.580\nwelcome back to another\ngreat episode of ITProTV.\n\n7\n00:00:16.580 --> 00:00:21.555\nI'm your host Daniel Lowrie, and\nin today's episode, that's right,\n\n8\n00:00:21.555 --> 00:00:25.822\nwe're back with more in RMCSC 74-,\nor 7-414 series.\n\n9\n00:00:25.822 --> 00:00:27.160\nBoy that's fun to do.\n\n10\n00:00:27.160 --> 00:00:28.915\nAnd of course, joining us back again,\n\n11\n00:00:28.915 --> 00:00:33.250\nhelp us continue our demonstration here,\nwhat are we working with today, Adam?\n\n12\n00:00:33.250 --> 00:00:34.158\nOur Adam Gordon.\n\n13\n00:00:34.158 --> 00:00:35.927\n[LAUGH]\n&gt;&gt; AD RMS.\n\n14\n00:00:35.927 --> 00:00:40.597\n&gt;&gt; RMS, these acronyms, they're so-\n&gt;&gt; Not FS, not CS.\n\n15\n00:00:40.597 --> 00:00:41.392\n&gt;&gt; Not DAC.\n\n16\n00:00:41.392 --> 00:00:42.802\n&gt;&gt; Not DC.\n\n17\n00:00:42.802 --> 00:00:44.510\n&gt;&gt; Not AD AC.\n\n18\n00:00:44.510 --> 00:00:47.320\n&gt;&gt; Not anything but AD RMS.\n\n19\n00:00:47.320 --> 00:00:51.390\nWe are in part two of our hands\non walk-through of AD RMS.\n\n20\n00:00:51.390 --> 00:00:55.570\nWe left off having configured\nthe AD RMS cluster\n\n21\n00:00:55.570 --> 00:00:57.940\nin our original domain in the forest.\n\n22\n00:00:57.940 --> 00:00:59.000\nWe've stood that up.\n\n23\n00:00:59.000 --> 00:01:01.020\nStarted the configuration process.\n\n24\n00:01:01.020 --> 00:01:03.600\nTook a look at how to set\nup super user groups.\n\n25\n00:01:03.600 --> 00:01:06.750\nAnd also set up a rights policy template\n\n26\n00:01:06.750 --> 00:01:09.210\nthat would restrict users\nto view only access.\n\n27\n00:01:09.210 --> 00:01:12.350\nWe're gonna jump back in, start taking\na look at some of the other bells and\n\n28\n00:01:12.350 --> 00:01:14.620\nwhistles and features inside the console.\n\n29\n00:01:14.620 --> 00:01:16.660\nWe're gonna take a look\nat exclusion policies.\n\n30\n00:01:16.660 --> 00:01:21.196\nIf you remember in our discussions in\nprior episodes, we talked about the fact\n\n31\n00:01:21.196 --> 00:01:25.810\nwe can exclude or use exclusion policies\nusing three specific approaches.\n\n32\n00:01:25.810 --> 00:01:27.520\nExclusions for users.\n\n33\n00:01:27.520 --> 00:01:31.330\nCreate essentially a black or\na white list for allow or deny for users.\n\n34\n00:01:31.330 --> 00:01:33.020\nApplication exclusions.\n\n35\n00:01:33.020 --> 00:01:34.820\nExclude certain versions\nof an application.\n\n36\n00:01:34.820 --> 00:01:37.190\nWe're gonna walk through,\ndemonstrate that for you.\n\n37\n00:01:37.190 --> 00:01:38.950\nAnd then lockbox version.\n\n38\n00:01:38.950 --> 00:01:43.700\nExclude based on the lockbox version\nwhich Microsoft controls and\n\n39\n00:01:43.700 --> 00:01:46.110\nupdates based on security parameters.\n\n40\n00:01:46.110 --> 00:01:49.130\nWe can detail out exclusion\npolicies to support one or\n\n41\n00:01:49.130 --> 00:01:51.660\nall three of these to further scope,\nentail, or\n\n42\n00:01:51.660 --> 00:01:56.410\nnarrowly define a control,\nhow the AD RMS grant the license grant.\n\n43\n00:01:56.410 --> 00:01:58.450\nAnd the use of that and\nthe authentication of that for\n\n44\n00:01:58.450 --> 00:02:01.540\ncontent access by the end\nuser will be controlled.\n\n45\n00:02:01.540 --> 00:02:03.350\nSo this is what we're gonna\ntake a look at right now.\n\n46\n00:02:03.350 --> 00:02:06.236\nJoin me right over here or\nactually right up there.\n\n47\n00:02:06.236 --> 00:02:07.685\n&gt;&gt; Perfect, that was awesome, makes sense.\n\n48\n00:02:07.685 --> 00:02:10.150\n&gt;&gt; [LAUGH]\n&gt;&gt; All right, so we're in the consoles,\n\n49\n00:02:10.150 --> 00:02:12.530\nyou can see I'm on\nthe Exclusion Policies area.\n\n50\n00:02:12.530 --> 00:02:15.790\nI've got my three exclusion\noptions available for use.\n\n51\n00:02:15.790 --> 00:02:19.100\nWe're gonna go in the middle here,\nmanage application exclusions.\n\n52\n00:02:19.100 --> 00:02:22.550\nJust opens up our pulldown menu,\nsee applications over here.\n\n53\n00:02:22.550 --> 00:02:26.390\nYou'll see that right now\nit is disabled by default,\n\n54\n00:02:26.390 --> 00:02:29.370\nis all the exclusions\nare we have to enable them.\n\n55\n00:02:29.370 --> 00:02:33.895\nWe're gonna go over here and we are going\nto Enable Application Exclusions.\n\n56\n00:02:36.882 --> 00:02:39.640\nClick on that,\nyou'll see that has been enabled.\n\n57\n00:02:39.640 --> 00:02:43.921\nAnd then what we're gonna\ndo is we're gonna go ahead.\n\n58\n00:02:43.921 --> 00:02:46.144\nAnd what do you think we should do,\nshould we create one?\n\n59\n00:02:46.144 --> 00:02:49.340\nWhat do you think we should do,\nshould we enable one?\n\n60\n00:02:49.340 --> 00:02:49.850\n&gt;&gt; Let's go.\n\n61\n00:02:49.850 --> 00:02:51.140\n&gt;&gt; Should we just walk away and\n\n62\n00:02:51.140 --> 00:02:53.535\npretend that we're not gonna do\nthis even though we said we would?\n\n63\n00:02:53.535 --> 00:02:54.450\n&gt;&gt; [LAUGH]\n&gt;&gt; Let's go ahead,\n\n64\n00:02:54.450 --> 00:02:55.390\nlet's enable one, right?\n\n65\n00:02:55.390 --> 00:02:57.250\nWhat the heck.\nSo we're gonna come over here,\n\n66\n00:02:57.250 --> 00:02:58.510\nwe're gonna enable application.\n\n67\n00:02:58.510 --> 00:02:59.610\nI know it kinda trails off.\n\n68\n00:02:59.610 --> 00:03:02.510\nWe're gonna enable\nthe application exclusion.\n\n69\n00:03:02.510 --> 00:03:04.800\nJust move this over so\nyou guys can see this.\n\n70\n00:03:04.800 --> 00:03:05.440\nThere we go.\n\n71\n00:03:05.440 --> 00:03:08.630\nAll right, so now what we're gonna\ndo is specify the information.\n\n72\n00:03:08.630 --> 00:03:13.424\nSo we have to, just give me a second so\nI can get down here to my notes and\n\n73\n00:03:13.424 --> 00:03:15.330\nget the right version.\n\n74\n00:03:15.330 --> 00:03:18.310\nWe're gonna go ahead and\nwe're gonna set this up for Excel.\n\n75\n00:03:18.310 --> 00:03:22.310\nSo we're gonna type in Excel.exe and\n\n76\n00:03:22.310 --> 00:03:25.520\nthen we have to specify minimum and\nmaximum versions.\n\n77\n00:03:25.520 --> 00:03:30.580\nThese version numbers are typed\nin specifically based on\n\n78\n00:03:30.580 --> 00:03:34.770\nthe versioning that Microsoft uses,\nin this case cuz Microsoft is the vendor\n\n79\n00:03:34.770 --> 00:03:38.350\nthat Microsoft uses to\nnumber their products.\n\n80\n00:03:38.350 --> 00:03:39.988\nThey normally have a version release.\n\n81\n00:03:39.988 --> 00:03:45.186\nSo Excel version 12, 13, 14,\n15 whatever maps to Office 2010,\n\n82\n00:03:45.186 --> 00:03:48.910\n2013, 2016, whatever the case maybe.\n\n83\n00:03:48.910 --> 00:03:52.441\nSo we're gonna bracket that with\nthe minimum and maximum version grant.\n\n84\n00:03:52.441 --> 00:03:56.254\nAnd so 12.0.0.0 is our minimum version.\n\n85\n00:03:56.254 --> 00:03:59.737\n15.0.0.0 will be our maximum.\n\n86\n00:03:59.737 --> 00:04:02.411\nSo we'll go ahead,\nwe'll specify this, put this in.\n\n87\n00:04:02.411 --> 00:04:04.151\nNow if you're not familiar with or\n\n88\n00:04:04.151 --> 00:04:06.858\nyou're not sure of what\nthe version numbers will be.\n\n89\n00:04:06.858 --> 00:04:10.737\nYou have to obviously go and check\nwith the vendor or look at the program\n\n90\n00:04:10.737 --> 00:04:14.773\nthat you want to constraint and\nthen figure out based on the properties.\n\n91\n00:04:14.773 --> 00:04:17.807\nThe metadata properties of the program,\nwhat the versioning is, so\n\n92\n00:04:17.807 --> 00:04:19.655\nyou understand what numbers to put here.\n\n93\n00:04:19.655 --> 00:04:23.330\nIn other words, what I'm saying is you\ncan't just randomly make numbers up and\n\n94\n00:04:23.330 --> 00:04:25.910\nput them in and assume that's gonna work.\n\n95\n00:04:25.910 --> 00:04:27.210\nNot a good idea, right?\n\n96\n00:04:27.210 --> 00:04:29.970\nSo number 15723 would\nnot be a minimum version\n\n97\n00:04:29.970 --> 00:04:32.200\nnumber that we would wanna go with.\n\n98\n00:04:32.200 --> 00:04:34.280\nAt least not for Excel anyway.\n\n99\n00:04:34.280 --> 00:04:36.490\nSo you do need to know that structure and\nthat form.\n\n100\n00:04:36.490 --> 00:04:39.650\nIt is very important for\nyou to be aware of that.\n\n101\n00:04:39.650 --> 00:04:41.050\nAll right, we'll click Finish.\n\n102\n00:04:41.050 --> 00:04:44.190\nAnd that's really all we need to do\nto enable an application exclusion.\n\n103\n00:04:44.190 --> 00:04:46.530\nWe just have to have the name\nof the executable, right?\n\n104\n00:04:46.530 --> 00:04:48.990\nSo this could easily\nhave been acrobat.exe,\n\n105\n00:04:48.990 --> 00:04:50.980\nif we were gonna exclude Acrobat or\nwhatever.\n\n106\n00:04:50.980 --> 00:04:53.170\nBut we would have to know\nwhat the version number is.\n\n107\n00:04:53.170 --> 00:04:54.060\nAnd obviously, as I said,\n\n108\n00:04:54.060 --> 00:04:56.380\nhave to work with the vendor,\nin order to be able to do that.\n\n109\n00:04:56.380 --> 00:04:57.570\nSo just be aware of that,\n\n110\n00:04:57.570 --> 00:05:01.110\nbecause that is something that\nwill be important for us to know.\n\n111\n00:05:01.110 --> 00:05:03.810\nDoes every vendor have this\ninformation available?\n\n112\n00:05:03.810 --> 00:05:04.848\nYeah, if you dig long enough,\n\n113\n00:05:04.848 --> 00:05:07.230\nhard enough and\nyou'll play around with the executables.\n\n114\n00:05:07.230 --> 00:05:09.230\nYou could find the versioning information.\n\n115\n00:05:09.230 --> 00:05:10.390\nSo just be aware of that.\n\n116\n00:05:10.390 --> 00:05:13.640\nWill every vendor be able to be\nexcluded on this application list?\n\n117\n00:05:13.640 --> 00:05:16.070\nNo, not every vendor's\napp will be excluded.\n\n118\n00:05:16.070 --> 00:05:19.260\nBecause not every vendor's app\nwill work with AD RMS, right?\n\n119\n00:05:19.260 --> 00:05:22.150\nWe talked about the fact that all\nthe Microsoft applications do and\n\n120\n00:05:22.150 --> 00:05:24.700\nthe Word Office, Word stack.\n\n121\n00:05:24.700 --> 00:05:26.430\nIn the Office stack Word, PowerPoint,\n\n122\n00:05:26.430 --> 00:05:30.110\nExcel, Outlook etc., right,\nthose are obviously made by the vendor.\n\n123\n00:05:30.110 --> 00:05:33.180\nThey will work, and therefore they\ncould be controlled and excluded here.\n\n124\n00:05:33.180 --> 00:05:35.434\nBut there are other AD RMS enabled or\n\n125\n00:05:35.434 --> 00:05:40.500\nAD RMS aware applications outside of\nMicrosoft stack that would work here.\n\n126\n00:05:40.500 --> 00:05:43.650\nBut there are many that although\nthey support rights management,\n\n127\n00:05:43.650 --> 00:05:46.300\nmay not support the way that\nMicrosoft implements it.\n\n128\n00:05:46.300 --> 00:05:48.250\nAnd so you would then have\nto figure out whether or\n\n129\n00:05:48.250 --> 00:05:50.700\nnot those applications\nwould work well here.\n\n130\n00:05:50.700 --> 00:05:52.840\nIt's a little bit of research,\na little bit of hit and\n\n131\n00:05:52.840 --> 00:05:54.670\nmiss to try this and figure it out.\n\n132\n00:05:54.670 --> 00:05:57.460\nIt's not always gonna work but you have\nto obviously walk through the steps and\n\n133\n00:05:57.460 --> 00:06:02.050\nlogic here to ensure that we are aware\nof what will or will not work.\n\n134\n00:06:02.050 --> 00:06:03.149\nJust to keep that in mind.\n\n135\n00:06:03.149 --> 00:06:04.954\nAll right,\nwe're gonna go in here real quick.\n\n136\n00:06:04.954 --> 00:06:07.050\nLet's go back up to the C drive.\n\n137\n00:06:07.050 --> 00:06:10.866\nAnd I'm gonna go ahead and\nI'm gonna create a folder here for export.\n\n138\n00:06:10.866 --> 00:06:12.510\nSo let me just do that real quick.\n\n139\n00:06:12.510 --> 00:06:13.700\nWe'll call this Export.\n\n140\n00:06:13.700 --> 00:06:17.780\nYou saw me create a couple folders in\nhere in the last demonstration for\n\n141\n00:06:17.780 --> 00:06:21.560\nAD RMS templates and our Word documents\nwhere we'll be storing stuff.\n\n142\n00:06:21.560 --> 00:06:24.084\nSo we're gonna specify\nan export folder here.\n\n143\n00:06:24.084 --> 00:06:25.505\nWe're gonna share this out.\n\n144\n00:06:25.505 --> 00:06:30.046\nAnd we're gonna specify that we we're\ngonna give everyone full control of this\n\n145\n00:06:30.046 --> 00:06:32.370\nlike we did with our other folder.\n\n146\n00:06:32.370 --> 00:06:38.050\nSo just go in here to Properties, and\nlet's just go up here to Sharing.\n\n147\n00:06:38.050 --> 00:06:40.688\nFan sharing, share that out.\n\n148\n00:06:40.688 --> 00:06:42.400\nGo ahead and go to Permissions.\n\n149\n00:06:42.400 --> 00:06:45.340\nRemember, everyone does have\nthe read permission automatically.\n\n150\n00:06:45.340 --> 00:06:47.870\nWe'll grant the everyone\ngroup full control.\n\n151\n00:06:47.870 --> 00:06:51.680\nClick OK, click OK, click Close.\n\n152\n00:06:51.680 --> 00:06:54.518\nSo we've got that set up as well.\n\n153\n00:06:54.518 --> 00:06:59.243\nAll right, so now, what we're gonna do is,\nI told you that we were gonna walk\n\n154\n00:06:59.243 --> 00:07:02.400\nthrough how to set up\nthe other side of this divide.\n\n155\n00:07:02.400 --> 00:07:05.840\nWe're gonna go through and\ninstantiate and set up another domain.\n\n156\n00:07:05.840 --> 00:07:08.280\nWe're gonna put that in\nthe partner services organization.\n\n157\n00:07:08.280 --> 00:07:12.310\nIn other words, the other forest that we\nwanna link the new AD RMS cluster we're\n\n158\n00:07:12.310 --> 00:07:16.130\ngonna build to, and set up our trusted\nuser, trusted publishing domains.\n\n159\n00:07:16.130 --> 00:07:17.410\nAll that stuff, right?\n\n160\n00:07:17.410 --> 00:07:19.330\nSo we're gonna go ahead and\nwe're gonna do the thought.\n\n161\n00:07:19.330 --> 00:07:21.600\nWe're gonna switch consoles here.\n\n162\n00:07:21.600 --> 00:07:25.230\nLet me just extend our timer, to make\nsure we have plenty of time to do that.\n\n163\n00:07:25.230 --> 00:07:30.040\nNow we're gonna go ahead and\nwe need our SA01 machine.\n\n164\n00:07:30.040 --> 00:07:33.880\nSo let me go over here.\n\n165\n00:07:33.880 --> 00:07:37.190\nAnd get to our SA01,\ncuz I got smart during these demos.\n\n166\n00:07:37.190 --> 00:07:39.340\nI realized when I put the machine\nname up in PowerShell,\n\n167\n00:07:39.340 --> 00:07:40.670\nyou can always tell which machine it is.\n\n168\n00:07:40.670 --> 00:07:44.280\nBecause otherwise we don't have that\nBGInfo if we're running on the desktop.\n\n169\n00:07:44.280 --> 00:07:47.780\nWhich would be another good thing we gotta\nmake sure we remember to think about.\n\n170\n00:07:47.780 --> 00:07:50.370\nSo that way we can tell what the machine\nthis is cuz you've got about seven\n\n171\n00:07:50.370 --> 00:07:51.700\nmachines we're working with.\n\n172\n00:07:51.700 --> 00:07:54.384\nAnd I cannot keep track of all of them,\nno matter how hard I try.\n\n173\n00:07:54.384 --> 00:07:55.655\nAll right, so we're in PowerShell.\n\n174\n00:07:55.655 --> 00:07:56.644\nWhat I'm gonna do?\n\n175\n00:07:56.644 --> 00:07:58.429\nSo I'm just gonna modify\nthis console quickly so\n\n176\n00:07:58.429 --> 00:08:01.006\nyou guys can see the commands we're\ngonna type in a little bit better.\n\n177\n00:08:01.006 --> 00:08:03.615\nWe're gonna make the cursor\nsize a little bit bigger.\n\n178\n00:08:03.615 --> 00:08:05.565\nChange our font size here.\n\n179\n00:08:05.565 --> 00:08:07.796\nMake it a little bit easier for\nyou guys to see.\n\n180\n00:08:07.796 --> 00:08:10.590\nAnd we're gonna change\nthe background color here as well.\n\n181\n00:08:12.330 --> 00:08:18.020\nAnd we'll do a nice little white and\ndo a little blue for the screen text.\n\n182\n00:08:18.020 --> 00:08:19.430\nAnd that way it's gonna be\na little bit easier for\n\n183\n00:08:19.430 --> 00:08:21.160\nyou guys to see what's going on in there.\n\n184\n00:08:21.160 --> 00:08:24.270\nAll right, so\nnow we're gonna do the installation or\n\n185\n00:08:24.270 --> 00:08:28.040\nat least kick off the installation\nof the AD DS role.\n\n186\n00:08:28.040 --> 00:08:30.730\nSo if you haven't seen this\ndone in PowerShell before,\n\n187\n00:08:30.730 --> 00:08:31.760\nit'll be interesting for you.\n\n188\n00:08:31.760 --> 00:08:34.010\nIf you've done it through\nthe server manager.\n\n189\n00:08:34.010 --> 00:08:37.280\nYou go up Manage Feature Roles &gt; Add and\nchoose AD DS.\n\n190\n00:08:37.280 --> 00:08:39.580\nYou answer some questions, no big deal.\n\n191\n00:08:39.580 --> 00:08:41.090\nWe're just gonna do this\nthrough PowerShell.\n\n192\n00:08:41.090 --> 00:08:44.360\nSo we're gonna do an add\nWindows feature commandlet.\n\n193\n00:08:44.360 --> 00:08:48.530\nSo Add-Windows, now, the nice thing about\nPowerShell is you'll see we get the auto\n\n194\n00:08:48.530 --> 00:08:51.590\ntab or auto complete feature,\nI don't have to type in the whole thing.\n\n195\n00:08:51.590 --> 00:08:54.280\nIf I have a general idea of\nthe direction I wanna go in and\n\n196\n00:08:54.280 --> 00:08:56.610\nI'm willing just to tab\nthrough a couple commands,\n\n197\n00:08:56.610 --> 00:09:00.450\nI can figure out exactly what I want and\nhave the system auto complete it for me.\n\n198\n00:09:00.450 --> 00:09:03.020\nFor somebody who's a little bit\nchallenged with typing such as I.\n\n199\n00:09:03.020 --> 00:09:04.540\n&gt;&gt; [LAUGH]\n&gt;&gt; This is a very useful feature.\n\n200\n00:09:04.540 --> 00:09:05.200\n&gt;&gt; It is handy.\n&gt;&gt; All right,\n\n201\n00:09:05.200 --> 00:09:08.070\nso you'll see, name, I can do that.\n\n202\n00:09:08.070 --> 00:09:13.920\nThen we have to specify what the name is\nof the feature or role that we wanna add.\n\n203\n00:09:13.920 --> 00:09:18.010\nIn this case, ad-domain-services,\nso we'll put that in.\n\n204\n00:09:18.010 --> 00:09:22.151\nNow, unfortunately, no auto tab for\nthe name of the feature that you've go to\n\n205\n00:09:22.151 --> 00:09:25.437\ntype in and know that you have correct so\njuts be aware of that.\n\n206\n00:09:25.437 --> 00:09:29.376\nAnd then we have the include commandlet\neither or rather the include parameter\n\n207\n00:09:29.376 --> 00:09:32.550\neither include all sub features or\ninclude management tools.\n\n208\n00:09:32.550 --> 00:09:34.600\nSo we're gonna use\ninclude management tools.\n\n209\n00:09:34.600 --> 00:09:35.910\nGotta hit Enter here.\n\n210\n00:09:35.910 --> 00:09:41.240\nThis will take a moment or two to run\nthrough and do its business when this\n\n211\n00:09:41.240 --> 00:09:46.510\nis done, we'll then gonna go ahead and\nspecify that we wanna set up our forest.\n\n212\n00:09:46.510 --> 00:09:49.530\nSo we'll then go ahead and\nwe'll specify the AD Forest,\n\n213\n00:09:49.530 --> 00:09:53.120\nwe'll specify the domain name,\nwe'll install DNS as part of that,\n\n214\n00:09:53.120 --> 00:09:55.830\nwe'll specify our password for\nthe configuration.\n\n215\n00:09:55.830 --> 00:09:58.470\nSo you're gonna see me do\nthat in just a moment.\n\n216\n00:09:58.470 --> 00:10:01.330\nWhile we're waiting,\nDaniel's gonna sing us a song.\n\n217\n00:10:01.330 --> 00:10:02.800\n&gt;&gt; I am the very model of a modern.\n\n218\n00:10:02.800 --> 00:10:03.700\nNo, we're not going to do that.\n\n219\n00:10:03.700 --> 00:10:04.748\nWe're not.\n[LAUGH].\n\n220\n00:10:04.748 --> 00:10:05.666\n&gt;&gt; We don't wanna do that.\n\n221\n00:10:05.666 --> 00:10:08.150\nWe want you to stick around and\nnot get scared off.\n\n222\n00:10:09.170 --> 00:10:10.550\nSo we're gonna let this run.\n\n223\n00:10:10.550 --> 00:10:12.880\nIt's gonna take probably a minute or\ntwo, not too long.\n\n224\n00:10:12.880 --> 00:10:16.570\nYou're gonna come back and join us again,\nsoon as we have this part wrapped up.\n\n225\n00:10:16.570 --> 00:10:19.780\nAnd then look at that, we don't even\nhave to even do this, that is awesome.\n\n226\n00:10:19.780 --> 00:10:20.770\nYou know why?\n\n227\n00:10:20.770 --> 00:10:23.654\nBecause when you sang you scared\n[CROSSTALK] We've gotta get done with\n\n228\n00:10:23.654 --> 00:10:25.205\nthis, he cannot continue singing.\n\n229\n00:10:25.205 --> 00:10:26.065\nThat is awesome.\n\n230\n00:10:26.065 --> 00:10:28.382\nAll right, so we don't have to take\na quick break, we'll go ahead and\n\n231\n00:10:28.382 --> 00:10:29.680\nwe'll tee up our next command.\n\n232\n00:10:29.680 --> 00:10:32.620\nSo let's go ahead and\nlet's do an install-ADDSForest.\n\n233\n00:10:32.620 --> 00:10:35.340\nSo we'll do an install and\nthen we'll do -ADDSF,\n\n234\n00:10:35.340 --> 00:10:40.250\nit'll auto complete that,\ninstall-ADDSForest.\n\n235\n00:10:40.250 --> 00:10:41.217\nWe're going to do our domain name.\n\n236\n00:10:43.201 --> 00:10:47.350\nAnd, we're gonna specify our DomainName,\nPRACTICEIT.\n\n237\n00:10:47.350 --> 00:10:55.010\nLet's make sure I spelled that correctly,\nPRACTICEIT.CO.UK.\n\n238\n00:10:55.010 --> 00:10:57.229\nYou'll put in whatever domain\nname you're gonna use here.\n\n239\n00:10:57.229 --> 00:11:00.103\nIn the real world, it's just the domain\nthat we're using for the demo.\n\n240\n00:11:00.103 --> 00:11:03.810\nAnd then we're gonna also\nspecify we want to install DNS.\n\n241\n00:11:03.810 --> 00:11:07.860\nSo we're gonna do installDNS and\nhave it configure the forest and\n\n242\n00:11:07.860 --> 00:11:09.630\nalso configure DNS for us.\n\n243\n00:11:09.630 --> 00:11:11.630\nWe'll get prompted for our admin password.\n\n244\n00:11:11.630 --> 00:11:13.600\nWe'll provide that here in just a moment.\n\n245\n00:11:13.600 --> 00:11:15.615\nYou see safe mode administrator password.\n\n246\n00:11:15.615 --> 00:11:19.016\nSpecify that, confirm it.\n\n247\n00:11:21.617 --> 00:11:25.205\nThen we're gonna be prompted to\nessentially say yes to each step of\n\n248\n00:11:25.205 --> 00:11:28.024\nthe process and or\nwe're gonna cheat a little bit and\n\n249\n00:11:28.024 --> 00:11:29.850\nuse the letter a, yes to all.\n\n250\n00:11:29.850 --> 00:11:30.930\nAnd just let it go do its thing.\n\n251\n00:11:30.930 --> 00:11:35.130\nAnd then you're gonna watch it go through\nand configure out everything for us.\n\n252\n00:11:35.130 --> 00:11:39.340\nThen once that's done, we'll have\nour domain controllers stood up,\n\n253\n00:11:39.340 --> 00:11:42.500\nwe'll have our forest, and\nour DNS infrastructure specified.\n\n254\n00:11:42.500 --> 00:11:46.900\nWe're gonna have to restart at that point,\nand then come back in, log back in and\n\n255\n00:11:46.900 --> 00:11:51.579\nthen continue after we log on to install\nand configure the certification authority.\n\n256\n00:11:51.579 --> 00:11:54.160\nSo you're gonna take a break real quick,\nso are we.\n\n257\n00:11:54.160 --> 00:11:55.780\nWe're gonna wait for this to finish.\n\n258\n00:11:55.780 --> 00:11:59.460\nWe're gonna restart system,\nlog back in, go back into PowerShell.\n\n259\n00:11:59.460 --> 00:12:00.600\nWhen you come back and\n\n260\n00:12:00.600 --> 00:12:03.080\njoin us again we'll be ready to set\nup our certification authority.\n\n261\n00:12:04.330 --> 00:12:07.850\nAll right, so we're back, we've finished\nthe configuration, installed DNS,\n\n262\n00:12:07.850 --> 00:12:09.600\ngot the forest and\ndomain controllers stood up.\n\n263\n00:12:09.600 --> 00:12:11.120\nWe relogged back in.\n\n264\n00:12:11.120 --> 00:12:12.760\nWe are back in PowerShell as you can see.\n\n265\n00:12:12.760 --> 00:12:16.740\nI just went ahead and typed in\nthe command to kick off the installation\n\n266\n00:12:16.740 --> 00:12:19.750\nof the certificate authority just so\nwe have it up ready to go for you.\n\n267\n00:12:19.750 --> 00:12:22.950\nYou'll see we're adding WindowsFeature for\nthe adcs-cert-authority.\n\n268\n00:12:22.950 --> 00:12:24.860\nWe're gonna include our management tools.\n\n269\n00:12:24.860 --> 00:12:27.190\nGo ahead and\nwe'll click okay there or hit Enter.\n\n270\n00:12:27.190 --> 00:12:28.060\nLet it kick off.\n\n271\n00:12:28.060 --> 00:12:29.330\nWon't take too long to do this.\n\n272\n00:12:29.330 --> 00:12:33.060\nWhat we're going to do after this is\nactually then use PowerShell to configure,\n\n273\n00:12:33.060 --> 00:12:34.350\nthe certificate authority.\n\n274\n00:12:34.350 --> 00:12:35.650\nYou may not have seen that done before.\n\n275\n00:12:35.650 --> 00:12:39.300\nBecause a lot of times you'll go in,\ngo to the GUI and start right clicking and\n\n276\n00:12:39.300 --> 00:12:41.410\nissuing certificates and\ndoing whatever you're gonna do.\n\n277\n00:12:41.410 --> 00:12:43.110\nWe're gonna actually do\nthat from PowerShell.\n\n278\n00:12:43.110 --> 00:12:45.250\nI've got a couple of lines\nof code we'll be typing in.\n\n279\n00:12:45.250 --> 00:12:47.530\nYou see that doesn't take\nvery long to get that set up.\n\n280\n00:12:47.530 --> 00:12:50.340\nWhat we're gonna do is just\nclear the screen on this just so\n\n281\n00:12:50.340 --> 00:12:53.420\nthat way we're up at the top, a little bit\neasier for you to see what we're doing.\n\n282\n00:12:53.420 --> 00:12:56.070\ncls for clear the screen,\nvery simple command.\n\n283\n00:12:56.070 --> 00:12:57.500\nYou could type clear there as well.\n\n284\n00:12:57.500 --> 00:12:59.580\nWhat we're gonna do is,\ndo another install.\n\n285\n00:13:00.940 --> 00:13:05.655\nAnd we're gonna do\nAdcsCertificate authority, so\n\n286\n00:13:05.655 --> 00:13:08.750\nAdcsCertificationAuthority.\n\n287\n00:13:08.750 --> 00:13:11.640\nWe're gonna specify our CA type.\n\n288\n00:13:12.650 --> 00:13:16.130\nWe're gonna issue our CA type and specify\nthat it will be an enterprise root CA.\n\n289\n00:13:16.130 --> 00:13:18.863\nSo we'll do enterpriseRootCA.\n\n290\n00:13:18.863 --> 00:13:23.784\nThis will install the certificate\nauthority for us, set it up as a domain\n\n291\n00:13:23.784 --> 00:13:28.318\njoined enterprise root CA sitting\nat the top of the PKI hierarchy.\n\n292\n00:13:28.318 --> 00:13:32.190\nAllow us to start issuing self signing\ncertificates from this certificate\n\n293\n00:13:32.190 --> 00:13:35.693\nauthority, essentially on this\nmachine that we're setting up and\n\n294\n00:13:35.693 --> 00:13:38.000\nstanding up as our domain controller.\n\n295\n00:13:38.000 --> 00:13:39.000\nSo we're gonna do that.\n\n296\n00:13:39.000 --> 00:13:40.610\nThat by itself's pretty straightforward.\n\n297\n00:13:40.610 --> 00:13:44.250\nBut we're gonna additionally configure\nsome other options associated with this.\n\n298\n00:13:44.250 --> 00:13:47.290\nSo we're also gonna specify\nthe crypto provider name.\n\n299\n00:13:47.290 --> 00:13:48.050\nSo we'll do crypto.\n\n300\n00:13:49.943 --> 00:13:52.410\nP for CryptoProvider, CryptoProviderName.\n\n301\n00:13:52.410 --> 00:13:56.620\nNow we're gonna use quotes here because\nwe have to type in a literal string and\n\n302\n00:13:56.620 --> 00:13:57.720\nit's gonna have spaces.\n\n303\n00:13:57.720 --> 00:14:03.430\nSo we're gonna define or specify the exact\nname of the CryptoProvider with spaces.\n\n304\n00:14:03.430 --> 00:14:06.880\nAnd we must use global quotes in\norder to enclose that string and\n\n305\n00:14:06.880 --> 00:14:09.040\nhave it read by PowerShell and understood.\n\n306\n00:14:09.040 --> 00:14:12.410\nOtherwise we get all sorts of nasty\nerrors and things don't go the right way.\n\n307\n00:14:12.410 --> 00:14:17.930\nAll right, so rsa#, excuse me,\nexcept that I did ras instead of rsa.\n\n308\n00:14:17.930 --> 00:14:19.325\nThat would not have ended well.\n\n309\n00:14:19.325 --> 00:14:23.760\nrsa#micrososoft.\n\n310\n00:14:23.760 --> 00:14:29.420\nAnd, we've got Microsoft,\nand then software key.\n\n311\n00:14:32.578 --> 00:14:34.930\nAnd then storage provider.\n\n312\n00:14:34.930 --> 00:14:37.154\nSoftware key, storage provider.\n\n313\n00:14:41.113 --> 00:14:45.895\nNow if you don't know what the name of\nthe crypto provider is, you can go into\n\n314\n00:14:45.895 --> 00:14:50.970\nan existing CA, look up the different\ncrypto providers, find the name.\n\n315\n00:14:50.970 --> 00:14:52.420\nYou can go online, google them.\n\n316\n00:14:52.420 --> 00:14:54.238\nMicrosoft publishes a list of them.\n\n317\n00:14:54.238 --> 00:14:59.030\nSo you can get the exact string name,\nthe exact one that you wanna put in.\n\n318\n00:14:59.030 --> 00:15:02.380\nBut you'd have to know what this is,\nand be provided with this information.\n\n319\n00:15:02.380 --> 00:15:05.280\nThis may be easier to do in the GUI,\nquite honestly, cuz you can right click,\n\n320\n00:15:05.280 --> 00:15:08.390\nyou got all the options and you choose\nthe one you want out of the list.\n\n321\n00:15:08.390 --> 00:15:12.000\nThis is the more advanced way\nof doing it in the sense that\n\n322\n00:15:12.000 --> 00:15:13.180\nwe're doing it from the command line.\n\n323\n00:15:13.180 --> 00:15:14.530\nYou gotta know what to type in.\n\n324\n00:15:14.530 --> 00:15:17.490\nYou gotta know all the variables that\nare gonna show up and be provided to you.\n\n325\n00:15:17.490 --> 00:15:19.850\nAnd you gotta understand\nhow to provide them here.\n\n326\n00:15:19.850 --> 00:15:21.585\nWe're gonna specify KeyLength.\n\n327\n00:15:21.585 --> 00:15:24.435\nHow long do we want our key to be?\n\n328\n00:15:24.435 --> 00:15:26.705\nWe're gonna specify 2,048 bit key.\n\n329\n00:15:26.705 --> 00:15:29.495\nSo a strong, crypto, Mo2 key, right?\n\n330\n00:15:29.495 --> 00:15:32.135\nSo we're gonna be specifying that.\n\n331\n00:15:32.135 --> 00:15:38.655\nWe're gonna do our hash algorithm, specify\nour HashAlgorithmName, that will be SHA1.\n\n332\n00:15:38.655 --> 00:15:41.225\nWe're gonna specify that.\n\n333\n00:15:41.225 --> 00:15:47.420\nWe'll do a validity period,\nagain thank God for the auto-tap.\n\n334\n00:15:47.420 --> 00:15:50.090\nOur validity period,\nwe're going do this in these years.\n\n335\n00:15:50.090 --> 00:15:51.297\nSo will specify years?\n\n336\n00:15:51.297 --> 00:15:54.771\nAnd our period units,\nmeaning how many years, right?\n\n337\n00:15:54.771 --> 00:16:01.969\nSo, we'll validityPeriod units\nwill specify-year for 5 year.\n\n338\n00:16:01.969 --> 00:16:03.181\nA validity period.\n\n339\n00:16:03.181 --> 00:16:06.880\nSo we wanna put all this in,\nhit enter there.\n\n340\n00:16:06.880 --> 00:16:09.060\nGonna give it a moment to go out and\ncheck everything.\n\n341\n00:16:09.060 --> 00:16:11.070\nMake sure that what we did is correct.\n\n342\n00:16:11.070 --> 00:16:13.720\nThen it's gonna say, hey,\nare you sure you wanna do this?\n\n343\n00:16:13.720 --> 00:16:15.380\nStep through one at a time, say yes.\n\n344\n00:16:15.380 --> 00:16:17.400\nOr as I suggested cheat a little bit.\n\n345\n00:16:17.400 --> 00:16:18.080\nNot really cheating.\n\n346\n00:16:18.080 --> 00:16:20.450\nJust taking advantage of\nthe console commands.\n\n347\n00:16:20.450 --> 00:16:21.730\nA for yes to all.\n\n348\n00:16:21.730 --> 00:16:22.370\nWe'll do that.\n\n349\n00:16:22.370 --> 00:16:23.120\nHit Enter.\n\n350\n00:16:23.120 --> 00:16:25.440\nGonna let that go in, set itself up.\n\n351\n00:16:25.440 --> 00:16:26.120\nDoesn't take very long.\n\n352\n00:16:26.120 --> 00:16:28.840\nYou can see the hardest part about\nthat is having to stop long enough\n\n353\n00:16:28.840 --> 00:16:30.870\nwhile I'm typing it in,\nto explain it to you.\n\n354\n00:16:30.870 --> 00:16:32.770\nSo, I'm just typing it,\nit goes pretty quick.\n\n355\n00:16:32.770 --> 00:16:37.250\nBut you can see it goes through that\nerror ID, error string 0 means success.\n\n356\n00:16:37.250 --> 00:16:38.380\nJust so you know.\n\n357\n00:16:38.380 --> 00:16:40.890\nThe error ID 0 means we were successful.\n\n358\n00:16:40.890 --> 00:16:45.760\nYelling and screaming loud red code in\nthe console tends to mean problems.\n\n359\n00:16:45.760 --> 00:16:49.560\nNothing coming back other than that tends\nto be a good sign, so just so you know.\n\n360\n00:16:49.560 --> 00:16:51.270\nAll right, so let's go in and\n\n361\n00:16:51.270 --> 00:16:53.880\nlet's make sure that we actually\nwere successful at doing this.\n\n362\n00:16:53.880 --> 00:16:55.020\nWe configured it but\n\n363\n00:16:55.020 --> 00:16:58.470\nwe haven't actually gone into the CA to\nsee if it's running the right way or not.\n\n364\n00:16:58.470 --> 00:17:00.880\nSo let's just go in and\nmake sure we take a look here.\n\n365\n00:17:00.880 --> 00:17:06.250\nWe'll go into our server manager, go up to\ntools, go to our certification authority.\n\n366\n00:17:06.250 --> 00:17:08.540\nWe'll just stand this up real quick,\nload this up.\n\n367\n00:17:08.540 --> 00:17:12.180\nWhat we like to see is\nthe little green circle there.\n\n368\n00:17:12.180 --> 00:17:12.800\nOpen that up.\n\n369\n00:17:12.800 --> 00:17:14.300\nWe see that everything looks good.\n\n370\n00:17:14.300 --> 00:17:15.490\nEverything is healthy.\n\n371\n00:17:15.490 --> 00:17:18.335\nThat's what we are expecting and\nwhat we want to see.\n\n372\n00:17:18.335 --> 00:17:21.620\nWe're going to go into\ncertificate templates here.\n\n373\n00:17:21.620 --> 00:17:23.573\nLet's give this a second\nto load up we got a list,\n\n374\n00:17:23.573 --> 00:17:26.816\na master list of all of the templates\navailable we're going to manage this we're\n\n375\n00:17:26.816 --> 00:17:29.795\ngoing to go to the web server template and\nmake some modifications there.\n\n376\n00:17:29.795 --> 00:17:33.104\nFirst time you load this by the way\nexpect the behavior to take a moment or\n\n377\n00:17:33.104 --> 00:17:36.210\ntwo to get all of the templates together,\nso just be aware of that.\n\n378\n00:17:36.210 --> 00:17:38.280\nAll right, so\nthese are not all of them by the way,\n\n379\n00:17:38.280 --> 00:17:41.290\nthese are just the ones that are setup for\ninitial use.\n\n380\n00:17:41.290 --> 00:17:43.960\nWe've got a very long list of\nother ones that are there but\n\n381\n00:17:43.960 --> 00:17:45.390\nhave not been selected yet.\n\n382\n00:17:45.390 --> 00:17:47.900\nThat's why it took so\nlong to actually load.\n\n383\n00:17:47.900 --> 00:17:49.268\nSo we're gonna right-click Manage.\n\n384\n00:17:50.795 --> 00:17:53.925\nAnd you can see we do have a longer\nlist of templates that are available but\n\n385\n00:17:53.925 --> 00:17:54.990\nhave not been used.\n\n386\n00:17:54.990 --> 00:17:56.940\nWe'll go down to web server here.\n\n387\n00:17:56.940 --> 00:18:01.160\nWe gonna go to properties and\nwe gonna make some modifications,\n\n388\n00:18:01.160 --> 00:18:04.020\nwe'll just make some adjustments\nhere to the web server template.\n\n389\n00:18:04.020 --> 00:18:08.010\nWe gonna go to security and\nwe gonna add in the computer account\n\n390\n00:18:08.010 --> 00:18:12.610\nthat's gonna be necessary for us to use\nwith this template, so we gonna go here\n\n391\n00:18:12.610 --> 00:18:17.490\ntop security, we gonna go here to add and\nwe gonna change the objects type and\n\n392\n00:18:17.490 --> 00:18:22.090\nspecify computer, so we can add\na computer account in give it rights.\n\n393\n00:18:22.090 --> 00:18:23.400\nWe're gonna go ahead,\nwe're gonna click OK.\n\n394\n00:18:23.400 --> 00:18:26.790\nWe're gonna put in the name\nof the computer plab SA01.\n\n395\n00:18:26.790 --> 00:18:31.130\nThe machine that we've installed\nADRMS on that we wanna now add.\n\n396\n00:18:31.130 --> 00:18:33.260\nSo we're gonna go in and\nwe're gonna specify this.\n\n397\n00:18:33.260 --> 00:18:37.310\nAnd then, what we're going to do is make\nsure that we give it enroll permission so\n\n398\n00:18:37.310 --> 00:18:40.900\nthat it can enroll and\nuse the template for the web server.\n\n399\n00:18:40.900 --> 00:18:43.840\nSo, I'm going to click OK, highlight that.\n\n400\n00:18:43.840 --> 00:18:44.530\nIt's got Reid.\n\n401\n00:18:44.530 --> 00:18:46.270\nWe're going to give it Enroll.\n\n402\n00:18:46.270 --> 00:18:48.800\nAnd then, that's going to give it rights\nto be able to work with certificates for\n\n403\n00:18:48.800 --> 00:18:49.470\nthe web server.\n\n404\n00:18:49.470 --> 00:18:52.570\nSo, we're going to do that,\ngoing to click Apply, going to click OK.\n\n405\n00:18:52.570 --> 00:18:56.270\nWe're going to close\nthe certificate template manager.\n\n406\n00:18:56.270 --> 00:18:59.160\nAnd now what we're gonna do is go and\nrequest the web server certificate\n\n407\n00:18:59.160 --> 00:19:02.920\nthat we can bind to the IS instance so\nwe can actually use that.\n\n408\n00:19:02.920 --> 00:19:04.950\nSo what we're gonna be\ndoing now is the following.\n\n409\n00:19:06.420 --> 00:19:09.660\nGonna minimize this certification\nauthority, just minimize this,\n\n410\n00:19:09.660 --> 00:19:11.090\nget this out of the way.\n\n411\n00:19:11.090 --> 00:19:12.010\nWe're gonna go ahead here.\n\n412\n00:19:12.010 --> 00:19:13.850\nWe're gonna go to Run,\nwe're going to open up an MMC.\n\n413\n00:19:13.850 --> 00:19:18.180\nAnd we're gonna open up another\nversion of the console, but\n\n414\n00:19:18.180 --> 00:19:21.770\nthis one focused on the computer,\ninstead of certification authority.\n\n415\n00:19:21.770 --> 00:19:25.130\nWhich is the root CA,\nright, the Enterprise CA.\n\n416\n00:19:25.130 --> 00:19:27.940\nWe're now just going to look at\nlocal certificates on this machine,\n\n417\n00:19:27.940 --> 00:19:30.280\noutside of the root CA, and\nthat's what we're gonna do.\n\n418\n00:19:30.280 --> 00:19:31.910\nJust gonna come in here and go to File.\n\n419\n00:19:31.910 --> 00:19:33.430\nGo to add and remove snap in.\n\n420\n00:19:33.430 --> 00:19:35.690\nGo to our certificate.\n\n421\n00:19:35.690 --> 00:19:37.010\nAnd we're gonna click Add.\n\n422\n00:19:37.010 --> 00:19:38.650\nWe have to specify what this is for.\n\n423\n00:19:38.650 --> 00:19:39.430\nWe're gonna go in and\n\n424\n00:19:39.430 --> 00:19:42.940\nwe're gonna specify that this will be for\nour computer account.\n\n425\n00:19:44.780 --> 00:19:48.010\nAnd then we're gonna go ahead and\nrequest a new personal certificate.\n\n426\n00:19:48.010 --> 00:19:52.450\nSo computer account, click next, local\ncomputer, the machine we're working on.\n\n427\n00:19:52.450 --> 00:19:54.000\nWe'll click Finish.\n\n428\n00:19:54.000 --> 00:19:55.640\nJust click OK here.\n\n429\n00:19:55.640 --> 00:19:56.780\nOpen that up real quick.\n\n430\n00:19:56.780 --> 00:20:00.800\nLet's move this over so\nyou guys can see that just a little bit.\n\n431\n00:20:02.200 --> 00:20:02.700\nBetter.\n\n432\n00:20:06.007 --> 00:20:06.650\nThere we go.\n\n433\n00:20:06.650 --> 00:20:08.860\nAll right.\nWe're gonna go to personal and\n\n434\n00:20:08.860 --> 00:20:11.730\nwe're gonna go ahead and\nwe're going to go in and\n\n435\n00:20:11.730 --> 00:20:17.555\nwe are gonna request a new certificate and\nenroll tasks Gonna go ahead and\n\n436\n00:20:17.555 --> 00:20:20.070\nyou'll see we have the active\ndirectory enrollment policy here.\n\n437\n00:20:20.070 --> 00:20:21.294\nThat's what we're gonna use.\n\n438\n00:20:23.573 --> 00:20:24.403\nClick next.\n\n439\n00:20:33.547 --> 00:20:36.762\nAnd then we're gonna\ngo into our web server\n\n440\n00:20:38.237 --> 00:20:40.160\nDown at the bottom there\nclose to the bottom,\n\n441\n00:20:40.160 --> 00:20:43.560\nyou'll see the web service is one of\nthe options we have for enrollment policy.\n\n442\n00:20:43.560 --> 00:20:47.190\nAnd you'll see it says status available,\nbut notice down here it says.\n\n443\n00:20:47.190 --> 00:20:48.990\nAnd it may be hard for\nyou to see, but it says hey,\n\n444\n00:20:48.990 --> 00:20:51.080\nwe need some more information\nbefore we can enroll.\n\n445\n00:20:51.080 --> 00:20:51.700\nThe certificate.\n\n446\n00:20:51.700 --> 00:20:55.600\nClick here so we can configure this, and\nyou're gonna provide some information.\n\n447\n00:20:55.600 --> 00:20:56.940\nAnd so we're gonna click on that.\n\n448\n00:20:56.940 --> 00:20:59.990\nWe're gonna put some stuff in here\nthat is gonna be required for\n\n449\n00:20:59.990 --> 00:21:01.160\nus to issue the certificate.\n\n450\n00:21:01.160 --> 00:21:02.440\nSo we're gonna click there.\n\n451\n00:21:02.440 --> 00:21:03.630\nWhat we're gonna do is\nwe're gonna have to.\n\n452\n00:21:03.630 --> 00:21:08.520\nProvide the details of the subject name,\nthe alternative name,\n\n453\n00:21:08.520 --> 00:21:11.230\nthe stuff we need for\nthe certificate to be populated correctly.\n\n454\n00:21:11.230 --> 00:21:14.250\nWe're gonna add them into the columns on\nthe right once we get done typing them in.\n\n455\n00:21:14.250 --> 00:21:16.420\nAnd then, we're gonna go ahead,\nand we're gonna click okay.\n\n456\n00:21:16.420 --> 00:21:17.980\nSo you're gonna watch\nme do this right now.\n\n457\n00:21:17.980 --> 00:21:21.670\nThe first up there is our full DN for\nour distinguished name.\n\n458\n00:21:21.670 --> 00:21:26.290\nI'm gonna go ahead, I'm gonna type\nin the following, CN equals and\n\n459\n00:21:26.290 --> 00:21:28.550\nwe're gonna do plab SA01.\n\n460\n00:21:28.550 --> 00:21:31.994\nAnd then our OU equals and\n\n461\n00:21:31.994 --> 00:21:37.575\nwe're going to do domain controllers.\n\n462\n00:21:43.121 --> 00:21:47.641\nDomain controllers comma,\neverything is comma separated by the way,\n\n463\n00:21:47.641 --> 00:21:52.613\nwith no spaces except between the terms\nyou're typing in but no spaces between\n\n464\n00:21:52.613 --> 00:21:57.330\nthe actual structure itself, so\nCN equals, whatever comma no space OU.\n\n465\n00:21:57.330 --> 00:21:58.930\nRight?\nCompleted all the way through the line.\n\n466\n00:21:58.930 --> 00:22:02.640\nThis is the standard format we use,\njust so you're aware of that.\n\n467\n00:22:02.640 --> 00:22:06.521\nThen DC for our domain equals practice IT.\n\n468\n00:22:08.527 --> 00:22:13.532\nComma, DC equals co, and then .co, and\n\n469\n00:22:13.532 --> 00:22:18.686\nthen DC equals UK for\nour full domain name.\n\n470\n00:22:18.686 --> 00:22:23.980\nAll right, so\nthat is gonna get added over here.\n\n471\n00:22:23.980 --> 00:22:24.850\nWe're gonna see all that.\n\n472\n00:22:24.850 --> 00:22:27.500\nWe're just gonna verify that\nall of it looks correct.\n\n473\n00:22:27.500 --> 00:22:30.660\nAnd also because you know how well I type,\nwe're gonna verify spelling.\n\n474\n00:22:30.660 --> 00:22:37.910\nSo plab SA01, OU domain controllers\nDC practice IT DCCO, DCUK.\n\n475\n00:22:37.910 --> 00:22:41.060\nYou put all three DC items together,\npracticeit.code.uk.\n\n476\n00:22:41.060 --> 00:22:45.949\nThat's our full domain name,\nfully qualified domain name.\n\n477\n00:22:45.949 --> 00:22:50.976\nThe OU we reference is the domain\ncontrollers OU within,\n\n478\n00:22:50.976 --> 00:22:56.014\nthat domain and\nthe machine is the plab SA01 computer.\n\n479\n00:22:56.014 --> 00:22:59.998\nAll right, so we have that,\nwe're now gonna go ahead and for\n\n480\n00:22:59.998 --> 00:23:05.548\nalternative name we're gonna change this,\npull down, choose DNS and we're gonna\n\n481\n00:23:05.548 --> 00:23:11.020\nspecify fpr DNS that we are using the\nfollowing ADRMS periodpracticeit.co.uk,\n\n482\n00:23:11.020 --> 00:23:15.866\npractice IT period .co period UK and\nwe're gonna put this over here, and\n\n483\n00:23:15.866 --> 00:23:21.102\nwe've got, although it's a little bit\nhard to see it's kind of bluish light,\n\n484\n00:23:21.102 --> 00:23:24.583\ntext color but\nADRMSpracticeIT.co.uk is there.\n\n485\n00:23:24.583 --> 00:23:28.570\nWe're gonna go ahead,\nmake sure that all that is good.\n\n486\n00:23:28.570 --> 00:23:31.400\nWe're then gonna go ahead and\nclick Apply, click OK.\n\n487\n00:23:31.400 --> 00:23:35.480\nWe're back over here with Web Server,\nthe configuration item is gone.\n\n488\n00:23:35.480 --> 00:23:36.820\nWe're now ready to go.\n\n489\n00:23:36.820 --> 00:23:39.310\nHighlight that just to make\nsure we make our selection.\n\n490\n00:23:39.310 --> 00:23:40.610\nWe wanna do that because clearly,\n\n491\n00:23:40.610 --> 00:23:42.820\nyou don't make the choice,\nyou're not gonna get too far.\n\n492\n00:23:42.820 --> 00:23:44.490\nAll right, so\nwe're gonna click Enroll there.\n\n493\n00:23:44.490 --> 00:23:45.270\nGonna give that a second.\n\n494\n00:23:45.270 --> 00:23:46.440\nIt doesn't take very long.\n\n495\n00:23:46.440 --> 00:23:48.530\nOur certificate has now been issued.\n\n496\n00:23:48.530 --> 00:23:49.650\nClick Finish.\n\n497\n00:23:49.650 --> 00:23:54.640\nWe'll come in here and we can see\nthat we now have our certificate that\n\n498\n00:23:54.640 --> 00:23:58.540\nhas been issued, and that is the one that\nwe are ultimately gonna be working with.\n\n499\n00:23:58.540 --> 00:23:59.691\nSo we see that.\n\n500\n00:23:59.691 --> 00:24:02.553\nAnd once we go and we double check\nthat our certificate is there,\n\n501\n00:24:02.553 --> 00:24:05.050\nwe'll see it is the one that\nwe were just talking about.\n\n502\n00:24:05.050 --> 00:24:06.498\nThat's our CA certificate.\n\n503\n00:24:06.498 --> 00:24:08.515\nAnd then the other\ncertificate right above it,\n\n504\n00:24:08.515 --> 00:24:10.539\nthis is the one that we\njust issued right there.\n\n505\n00:24:10.539 --> 00:24:11.860\nAll right, so we're done with all that.\n\n506\n00:24:11.860 --> 00:24:13.080\nWe're just gonna get out of there.\n\n507\n00:24:13.080 --> 00:24:17.550\nNow we're gonna go ahead and create an AD\nRMS service account and DNS host record.\n\n508\n00:24:17.550 --> 00:24:21.110\nSo gonna go in and populate DNS and\nmake sure that all of that stuff is there.\n\n509\n00:24:21.110 --> 00:24:23.670\nSo we'll get out here,\nwe don't need to save this.\n\n510\n00:24:23.670 --> 00:24:24.970\nWe're gonna go ahead and go in.\n\n511\n00:24:24.970 --> 00:24:28.978\nLet's go back over to Server Manager and\nlet's go in and\n\n512\n00:24:28.978 --> 00:24:32.745\nlet's go to Active Directory Users and\nComputers.\n\n513\n00:24:32.745 --> 00:24:34.100\nHere we go.\n\n514\n00:24:34.100 --> 00:24:37.490\nAnd we're gonna open that up and\nwe're gonna create a new user account.\n\n515\n00:24:37.490 --> 00:24:39.027\nThat is gonna be our service account.\n\n516\n00:24:39.027 --> 00:24:42.704\nRemember, this is all the back end work\nyou didn't see me do during the first\n\n517\n00:24:42.704 --> 00:24:43.940\nsession of the demo.\n\n518\n00:24:43.940 --> 00:24:47.690\nWhere I said look, I did all this stuff\nalready, let's just go configure AD RMS.\n\n519\n00:24:47.690 --> 00:24:52.240\nAnd this is all the stuff I did to stand\nup the AD RMS cluster in the other domain,\n\n520\n00:24:52.240 --> 00:24:53.790\nthe practice labs domain.\n\n521\n00:24:53.790 --> 00:24:57.760\nWe're creating the domain and setting up\nall the back end stuff to show you how to\n\n522\n00:24:57.760 --> 00:25:01.820\ndo it before we configure\nthe AD RMS cluster in this domain.\n\n523\n00:25:01.820 --> 00:25:04.510\nSo you're seeing all the work\nthat we hide from you,\n\n524\n00:25:04.510 --> 00:25:06.940\nand that we just take care\nof ahead of time for you.\n\n525\n00:25:06.940 --> 00:25:08.390\nAnd this is what we're actually doing.\n\n526\n00:25:08.390 --> 00:25:10.910\nBut I thought it'd be a good idea\nto show you all this because\n\n527\n00:25:10.910 --> 00:25:14.925\nthis is what you actually need to do when\nyou're working on this in the real world.\n\n528\n00:25:14.925 --> 00:25:18.845\nWe want you to be prepared and understand\nhow to do all these different things.\n\n529\n00:25:18.845 --> 00:25:20.575\nWe're gonna go to our user's area.\n\n530\n00:25:20.575 --> 00:25:21.945\nWe're gonna create our user account.\n\n531\n00:25:21.945 --> 00:25:24.435\nSo, we're just going to\nsee what's there already.\n\n532\n00:25:24.435 --> 00:25:28.045\nWe don't have anything called\nAD RMS service account, so\n\n533\n00:25:28.045 --> 00:25:29.465\nwe're gonna go ahead and create one.\n\n534\n00:25:29.465 --> 00:25:30.505\nSo, just right-click here.\n\n535\n00:25:32.415 --> 00:25:33.915\nAnd, we're gonna do New.\n\n536\n00:25:33.915 --> 00:25:35.335\nAnd we're gonna do User.\n\n537\n00:25:35.335 --> 00:25:36.731\nJust come down here.\n\n538\n00:25:36.731 --> 00:25:41.590\nLet's move this over so you guys can see\nthis, kinda centralize that right there.\n\n539\n00:25:41.590 --> 00:25:45.320\nAll right we're gonna give this\na name we'll call this ADRMS.\n\n540\n00:25:45.320 --> 00:25:47.890\nAnd we'll do service account for\nour last name.\n\n541\n00:25:50.850 --> 00:25:54.870\nAlways important to label these things so\nthat you know what they're doing, right?\n\n542\n00:25:54.870 --> 00:26:01.690\nAnd then we'll do ADRMSsvc for\nAD RMS service, right?\n\n543\n00:26:01.690 --> 00:26:06.250\nSo we've got that, we can probably do\na capital S for the other service.\n\n544\n00:26:06.250 --> 00:26:07.470\nThere we go, all right, so\n\n545\n00:26:07.470 --> 00:26:11.390\nwe've got that, click Next,\nthen we're gonna put in our password.\n\n546\n00:26:12.950 --> 00:26:15.140\nPut in our password.\n\n547\n00:26:15.140 --> 00:26:17.630\nWe're gonna uncheck user must change.\n\n548\n00:26:17.630 --> 00:26:19.980\nCheck off password network expires.\n\n549\n00:26:19.980 --> 00:26:22.710\nClick Next and we'll finish that out.\n\n550\n00:26:22.710 --> 00:26:23.650\nSo we've got that.\n\n551\n00:26:25.440 --> 00:26:28.590\nAnd then, once we've done that,\nwe're gonna go in and\n\n552\n00:26:28.590 --> 00:26:30.770\nwe're gonna add this to a group.\n\n553\n00:26:30.770 --> 00:26:34.800\nGonna go ahead and we're gonna put\nthis into the domain admins group.\n\n554\n00:26:34.800 --> 00:26:39.010\nSo let's do the AD RMS service account\n&gt; right-click &gt; add to a group.\n\n555\n00:26:39.010 --> 00:26:42.172\nSpecify our domain admins\naccount right over here.\n\n556\n00:26:42.172 --> 00:26:45.950\nLet's move this over so you can see that.\n\n557\n00:26:45.950 --> 00:26:48.161\nAnd just do a check name on that.\n\n558\n00:26:48.161 --> 00:26:51.140\nClick Ok &gt; specify.\n\n559\n00:26:51.140 --> 00:26:53.420\nOkay, we're good we've added it in,\nit's good.\n\n560\n00:26:53.420 --> 00:26:57.911\nNow, this is because we installed the AD\nRMS on a domain controller that we're\n\n561\n00:26:57.911 --> 00:27:01.325\nadding this service account\ninto the domain admins group.\n\n562\n00:27:01.325 --> 00:27:04.840\nIt's a requirement when we do it this way\nso that the service account has rights\n\n563\n00:27:04.840 --> 00:27:07.570\nto work with the system because\nit is on a domain controller.\n\n564\n00:27:07.570 --> 00:27:10.720\nIf we don't have domain admin rights we're\nbarred from being able to make changes and\n\n565\n00:27:10.720 --> 00:27:11.585\ndoing things we need to do.\n\n566\n00:27:11.585 --> 00:27:13.360\nCuz it's sitting on a domain controller.\n\n567\n00:27:13.360 --> 00:27:16.290\nSo, a little extra added spin\nthere on this particular one.\n\n568\n00:27:16.290 --> 00:27:19.920\nWe didn't do that on the other forest\nwhen we set it up in practice labs.\n\n569\n00:27:19.920 --> 00:27:22.457\nBut in the Practice IT forest,\nand in this cluster,\n\n570\n00:27:22.457 --> 00:27:25.987\nwe're putting it on a domain controller so\nwe do need to be aware of that.\n\n571\n00:27:25.987 --> 00:27:29.500\nSo that's just a little extra\nadded insight there for you.\n\n572\n00:27:29.500 --> 00:27:32.490\nWe do normally recommend you put\nthis out on a dedicated server and\n\n573\n00:27:32.490 --> 00:27:34.400\nnot actually on the domain controller.\n\n574\n00:27:34.400 --> 00:27:36.260\nYou don't normally do this in production,\nbut\n\n575\n00:27:36.260 --> 00:27:39.470\nyou may depending on the size of\nyour domain, what you're doing.\n\n576\n00:27:39.470 --> 00:27:42.390\nAnd if you want to,\nit is a supporting configuration.\n\n577\n00:27:42.390 --> 00:27:45.270\nJust not a best practice\nrecommended configuration.\n\n578\n00:27:45.270 --> 00:27:47.240\nBut if you do decide to\ndo this extra added step,\n\n579\n00:27:47.240 --> 00:27:49.820\nyou must put the service account\ninto the domain admin group.\n\n580\n00:27:49.820 --> 00:27:51.930\nSo it has rights locally\nto do what it needs to do.\n\n581\n00:27:51.930 --> 00:27:53.570\nSo just make sure you're aware of that.\n\n582\n00:27:53.570 --> 00:27:55.699\nAll right we're gonna create\na group here as well.\n\n583\n00:27:55.699 --> 00:27:57.830\nWe're gonna go in and\ncreate our superuser group.\n\n584\n00:27:57.830 --> 00:27:59.640\nRemember this is just an AD\ngroup that we create, but\n\n585\n00:27:59.640 --> 00:28:03.080\nthen we assign it superuser rights\nin the AD RMS Management Console.\n\n586\n00:28:03.080 --> 00:28:04.975\nSo we're gonna create this group.\n\n587\n00:28:04.975 --> 00:28:08.290\nRight-click New instead of User.\n\n588\n00:28:08.290 --> 00:28:11.005\nNew group this time there\nit is right up there.\n\n589\n00:28:11.005 --> 00:28:16.138\nWe'll specify the group name\ncall this ADRMS super users so\n\n590\n00:28:16.138 --> 00:28:22.200\nADRMS-super, spell that correctly,\na super look at that.\n\n591\n00:28:22.200 --> 00:28:23.040\nLike the A-team.\n\n592\n00:28:23.040 --> 00:28:24.860\nSuperusers, right?\n\n593\n00:28:24.860 --> 00:28:26.330\nAll right, so we got all that.\n\n594\n00:28:26.330 --> 00:28:27.530\nIt's a global group.\n\n595\n00:28:27.530 --> 00:28:30.520\nIt's got security associated with it\nas opposed to a distribution list.\n\n596\n00:28:30.520 --> 00:28:32.410\nSo we're gonna specify that.\n\n597\n00:28:32.410 --> 00:28:36.270\nWe are gonna have to give it\nan email address once we're done.\n\n598\n00:28:36.270 --> 00:28:39.220\nWe'll do that as a secondary step\ncuz we don't have the ability\n\n599\n00:28:39.220 --> 00:28:41.080\nto modify the properties\ngroup until we create it.\n\n600\n00:28:41.080 --> 00:28:42.607\nSo we're going to click Ok.\n\n601\n00:28:42.607 --> 00:28:46.740\nWe're then gonna go find our group,\nright there.\n\n602\n00:28:46.740 --> 00:28:49.270\nRight-click, go to properties.\n\n603\n00:28:49.270 --> 00:28:53.240\nAnd we're gonna go ahead and on the email\nitem right here, type in our email.\n\n604\n00:28:53.240 --> 00:28:56.302\nSo remember we use email\naddresses to link the groups and\n\n605\n00:28:56.302 --> 00:29:00.550\nthe users to the templates and the\nsettings in the AD RMS management console.\n\n606\n00:29:00.550 --> 00:29:02.842\nSo we need to provide email addresses for\nthis.\n\n607\n00:29:02.842 --> 00:29:08.884\nSo ADRMS-superusers@ and\n\n608\n00:29:08.884 --> 00:29:14.928\nthen practiceit.co.uk.\n\n609\n00:29:14.928 --> 00:29:20.996\nSo we're gonna specify\nour email address there.\n\n610\n00:29:26.840 --> 00:29:28.580\nOne second, double checking.\n\n611\n00:29:28.580 --> 00:29:30.450\n&gt;&gt; Yeah, always making sure, right?\n\n612\n00:29:30.450 --> 00:29:32.290\n&gt;&gt; Yeah, just you have to practice.\n\n613\n00:29:32.290 --> 00:29:34.820\nDon't wanna have to go back and\nfix it later.\n\n614\n00:29:34.820 --> 00:29:35.793\nAll right, practiceit.\n\n615\n00:29:35.793 --> 00:29:39.440\nI just wanna make sure, it looked like\nit was off by one letter, .co.uk.\n\n616\n00:29:39.440 --> 00:29:42.295\nOf course the fact we're using\nthree point pica font on\n\n617\n00:29:42.295 --> 00:29:43.070\nthe screen\n&gt;&gt; [LAUGH]\n\n618\n00:29:43.070 --> 00:29:44.010\n&gt;&gt; Doesn't help.\n\n619\n00:29:44.010 --> 00:29:46.229\nAll right so we're gonna do [LAUGH] that,\nwe're gonna click Apply.\n\n620\n00:29:46.229 --> 00:29:47.395\nWe're gonna click Ok.\n\n621\n00:29:47.395 --> 00:29:50.803\nWe've got that instantiated and set up.\n\n622\n00:29:50.803 --> 00:29:52.895\nAll right now comes the fun part.\n\n623\n00:29:52.895 --> 00:29:56.697\nWe're gonna type like a thousand lines of\ncode in a PowerShell to do a whole bunch\n\n624\n00:29:56.697 --> 00:29:57.515\nof stuff.\n\n625\n00:29:57.515 --> 00:30:03.645\nRemember how I told you that we had added\nin other users in the prior demonstration.\n\n626\n00:30:03.645 --> 00:30:05.875\nWe had all those other email\naddresses setup for them.\n\n627\n00:30:05.875 --> 00:30:07.065\nWe took the marketing group or\n\n628\n00:30:07.065 --> 00:30:11.525\nuser, assigned the policy template\nto it to limit its rights.\n\n629\n00:30:11.525 --> 00:30:14.530\nAgain, all that stuff was done for you\nahead of time behind the scenes, right?\n\n630\n00:30:14.530 --> 00:30:16.540\nSo now I'm gonna show you\nhow we do all that, right?\n\n631\n00:30:16.540 --> 00:30:17.821\nNow we could do it from the GUI.\n\n632\n00:30:17.821 --> 00:30:19.580\nBut we're gonna do it,\nin this case, from PowerShell.\n\n633\n00:30:19.580 --> 00:30:20.980\nSo we're gonna come over here.\n\n634\n00:30:20.980 --> 00:30:23.060\nLet's just clear our screen so\nyou can see this.\n\n635\n00:30:23.060 --> 00:30:24.720\nAnd we're gonna get started with this.\n\n636\n00:30:24.720 --> 00:30:26.350\nWe're gonna do a DS add,\n\n637\n00:30:26.350 --> 00:30:30.290\nwhich is the command that allows\nus to do a directory service add.\n\n638\n00:30:30.290 --> 00:30:33.020\nEither for an OU, a user or group,\nor whatever we're gonna do.\n\n639\n00:30:33.020 --> 00:30:33.911\nWe're gonna do an OU.\n\n640\n00:30:33.911 --> 00:30:35.487\nSo we're gonna first create an OU.\n\n641\n00:30:35.487 --> 00:30:40.556\nThen we're gonna do a DS add user, two DS\nadd users, actually, and put two users in.\n\n642\n00:30:40.556 --> 00:30:42.810\nAll right, so DS add OU.\n\n643\n00:30:42.810 --> 00:30:45.034\nAnd then we're gonna\nopen up a string here.\n\n644\n00:30:45.034 --> 00:30:48.608\nWe're gonna type in OU=Sales.\n\n645\n00:30:48.608 --> 00:30:51.630\nAnd let's just type that in like that.\n\n646\n00:30:52.938 --> 00:30:56.289\n, dc=practiceit\n\n647\n00:30:59.247 --> 00:31:03.997\ndc=co, dc=uk, and\n\n648\n00:31:03.997 --> 00:31:10.000\nthen I'm gonna close that.\n\n649\n00:31:10.000 --> 00:31:10.970\nPull this down.\n\n650\n00:31:10.970 --> 00:31:15.910\nWe're gonna be creating an OU called\nsales in the practiceit.co.uk domain,\n\n651\n00:31:15.910 --> 00:31:18.660\njust so you can see that.\n\n652\n00:31:18.660 --> 00:31:21.940\nThen we're gonna describe or\nput a description in for it.\n\n653\n00:31:21.940 --> 00:31:28.106\nSo the desc for description attribute,\nor parameter, rather.\n\n654\n00:31:28.106 --> 00:31:30.204\nThen we're gonna do sales department.\n\n655\n00:31:35.229 --> 00:31:39.015\nAll right so\nwe're gonna do sales department hit Enter.\n\n656\n00:31:39.015 --> 00:31:40.816\nOkay, and that was successfully created.\n\n657\n00:31:40.816 --> 00:31:42.333\nNow, how do we know that?\n\n658\n00:31:42.333 --> 00:31:48.835\nRight well, let's take a look real quick.\n\n659\n00:31:48.835 --> 00:31:51.933\nLet's just go ahead and\nrefresh here real quick.\n\n660\n00:31:53.298 --> 00:31:58.218\n[NOISE] Where is our refresh?\n\n661\n00:31:58.218 --> 00:32:01.850\nThere it is right there, under Action,\none second, all right, there we go.\n\n662\n00:32:01.850 --> 00:32:09.770\nAnd once we've done that We\nare creating what did I do?\n\n663\n00:32:09.770 --> 00:32:12.160\nI created the OU called sales, right?\n\n664\n00:32:12.160 --> 00:32:17.372\nSo, we should have a, were is my sales OU?\n\n665\n00:32:17.372 --> 00:32:20.950\nOne second, unless it was not successful.\n\n666\n00:32:22.300 --> 00:32:23.837\nIn which case I have to go back and\ntake a look.\n\n667\n00:32:23.837 --> 00:32:25.062\nDoesn't look like it did work.\n\n668\n00:32:25.062 --> 00:32:27.020\nGive me just one second.\n\n669\n00:32:27.020 --> 00:32:28.890\nSo we've got that, no, it did succeed.\n\n670\n00:32:28.890 --> 00:32:29.790\nWe've got our ou in sales.\n\n671\n00:32:29.790 --> 00:32:31.420\nSo yeah, we should be there.\n\n672\n00:32:31.420 --> 00:32:35.440\nThat is weird, let's just open that up and\ntake a look one more time.\n\n673\n00:32:35.440 --> 00:32:37.276\nWhy is our sales ou not showing up?\n\n674\n00:32:41.786 --> 00:32:43.120\nAll right, there it is right there.\n\n675\n00:32:43.120 --> 00:32:45.111\nIt's there, I don't know why it\nwasn't showing up the first time?\n\n676\n00:32:45.111 --> 00:32:48.580\nIt is available,\n[LAUGH] it's just one of those things.\n\n677\n00:32:48.580 --> 00:32:49.350\nAll right, so you take a look.\n\n678\n00:32:49.350 --> 00:32:52.876\nYou can see the sales OU is there, and\nwe can see that it's been instantiated so\n\n679\n00:32:52.876 --> 00:32:53.526\nwe can check.\n\n680\n00:32:53.526 --> 00:32:56.676\nAnd we can just walk back and\nforth between PowerShell and the console,\n\n681\n00:32:56.676 --> 00:32:58.510\nmaking sure that things are there.\n\n682\n00:32:58.510 --> 00:32:59.630\nNow, we can, we'll go ahead and\n\n683\n00:32:59.630 --> 00:33:03.230\nwe'll do one of the new users\nthrough the PowerShell add as well.\n\n684\n00:33:03.230 --> 00:33:04.520\nThen, I'll do the other\none in the console,\n\n685\n00:33:04.520 --> 00:33:06.120\njust cuz it'll be a little bit quicker.\n\n686\n00:33:06.120 --> 00:33:09.280\nAll right, so let's do ds add here.\n\n687\n00:33:09.280 --> 00:33:13.582\nAnd this time instead of doing the OU,\nwe're gonna do the user.\n\n688\n00:33:13.582 --> 00:33:17.220\nSo dsadd user space,\nagain we'll open up our string.\n\n689\n00:33:17.220 --> 00:33:20.770\nHere we'll do our CN for\nour canonical name.\n\n690\n00:33:20.770 --> 00:33:25.384\nAnd we're gonna do the name of the user,\ngonna set this equal to Richard Smith.\n\n691\n00:33:27.596 --> 00:33:33.215\nSo we'll put in our username,\nspecify the ou that we wanna put him into,\n\n692\n00:33:33.215 --> 00:33:36.177\nou=sales, all right so we got that.\n\n693\n00:33:36.177 --> 00:33:45.641\nAnd then dc=practiceit,\n\n694\n00:33:45.641 --> 00:33:52.228\ndc=co, dc= uk.\n\n695\n00:33:52.228 --> 00:33:56.867\nSo we've got practiceit to uk,\ngood, all right?\n\n696\n00:33:56.867 --> 00:33:59.519\nAnd then we're gonna specify our password.\n\n697\n00:33:59.519 --> 00:34:06.478\nSo pwd and then oops not pad, pwd and\nthen what is our password gonna be?\n\n698\n00:34:06.478 --> 00:34:09.112\nOur password is gonna be password.\n\n699\n00:34:09.112 --> 00:34:12.812\nNow, notice while we're typing here,\nthat when we do it in PowerShell,\n\n700\n00:34:12.812 --> 00:34:16.170\nour password is actually exposed\nwhen we type it into the console.\n\n701\n00:34:16.170 --> 00:34:18.910\nSo, you this is something you'll\nhave to think about and consider.\n\n702\n00:34:18.910 --> 00:34:22.430\nYou may not wanna do this while people are\nlurking about, seeing what you're doing?\n\n703\n00:34:22.430 --> 00:34:26.010\nYou may wanna set this, but then specify\nthat the user has to reset the password.\n\n704\n00:34:26.010 --> 00:34:28.080\nIt's up to you to decide\nwhat you wanna do, okay?\n\n705\n00:34:28.080 --> 00:34:30.165\nBut just realize it will be exposed.\n\n706\n00:34:30.165 --> 00:34:32.030\nAll right, so\nwe do have our password there.\n\n707\n00:34:32.030 --> 00:34:39.070\nWe're gonna do our samID, and\nour samID will be richard.smith.\n\n708\n00:34:39.070 --> 00:34:43.252\nNo quotes because there is no space,\nso richard.smith.\n\n709\n00:34:43.252 --> 00:34:47.220\nWe're gonna do our email as well, so\nwe'll specify our email parameter.\n\n710\n00:34:47.220 --> 00:34:49.763\nAnd then our email will be richard.smith\n\n711\n00:34:53.757 --> 00:34:58.280\nWhere is our at, there it is\n\n712\n00:34:58.280 --> 00:35:03.040\n@practiceit.code.uk.\n\n713\n00:35:03.040 --> 00:35:07.435\nAll right, so we got all that practiceit,\nwe're gonna hit Enter.\n\n714\n00:35:07.435 --> 00:35:12.960\ndsadd succeeded which means now we\nshould have our user sitting over here.\n\n715\n00:35:15.290 --> 00:35:18.958\nAnd there is our user Richard Smith,\nall set up ready to go.\n\n716\n00:35:18.958 --> 00:35:22.911\nWe could do the same thing for\nanother user and/or we could go ahead and\n\n717\n00:35:22.911 --> 00:35:26.000\njust simply create the user in here,\ndo it either way.\n\n718\n00:35:26.000 --> 00:35:28.470\nSo, let's just right-click and\ncreate a new user right here.\n\n719\n00:35:28.470 --> 00:35:30.560\nIt will be a little bit quicker\nthan doing it from PowerShell.\n\n720\n00:35:30.560 --> 00:35:33.364\nYou've kind of seen the thought\nprocess of what we're gonna do?\n\n721\n00:35:33.364 --> 00:35:36.372\nThis one's gonna be\ncalled Janice Burtlesman.\n\n722\n00:35:36.372 --> 00:35:41.894\nSo Janice and then B-E-R-T,\n\n723\n00:35:41.894 --> 00:35:47.200\nBert, E-L, Elsman, Bert Elsman.\n\n724\n00:35:47.200 --> 00:35:48.820\nAnd then we're doing it in sales.\n\n725\n00:35:48.820 --> 00:35:50.438\nGonna put our password in there.\n\n726\n00:35:50.438 --> 00:35:57.420\nOur user logon name will be, Do.\n\n727\n00:35:57.420 --> 00:36:01.201\nLet's do this, one second,\n\n728\n00:36:01.201 --> 00:36:05.747\nour samID is janice.bertelsman.\n\n729\n00:36:05.747 --> 00:36:12.755\nJanice.bertelmans, did I mention I'm\nalso the world's most horrible speller,\n\n730\n00:36:12.755 --> 00:36:17.106\nalong with being the world's\nmost horrible typer?\n\n731\n00:36:17.106 --> 00:36:21.991\nHere we go,\nall right Janice Bertelsman and\n\n732\n00:36:21.991 --> 00:36:28.592\nour user logon name will be,\nwe'll do Janice Bertelsmen or\n\n733\n00:36:28.592 --> 00:36:33.227\njust J Bertelsman, Burt, J Burt Elman.\n\n734\n00:36:33.227 --> 00:36:36.920\nThere we go, and then we'll click Next.\n\n735\n00:36:36.920 --> 00:36:41.400\nPassword is password, and\n\n736\n00:36:41.400 --> 00:36:48.223\nuncheck that, and we will specify that.\n\n737\n00:36:48.223 --> 00:36:51.520\nWe hit next, hit Finish and we're good.\n\n738\n00:36:51.520 --> 00:36:57.900\nSo we've got our two users, we've got the\none that we created here, we got the email\n\n739\n00:36:57.900 --> 00:37:01.490\naddress, I'm wanna go and put the email\naddress in for Janet in just a second.\n\n740\n00:37:01.490 --> 00:37:03.810\nWe've got our account here.\n\n741\n00:37:03.810 --> 00:37:06.320\nYou'll see doesn't have any items or\n\n742\n00:37:06.320 --> 00:37:09.670\ninformation just says our\npre-Windows 2000 log on.\n\n743\n00:37:09.670 --> 00:37:12.400\nPassword is not set to\nexpire nothing like that.\n\n744\n00:37:12.400 --> 00:37:17.248\nYou just actually grab email\naddress from this one and\n\n745\n00:37:17.248 --> 00:37:22.535\nwe'll just put that in along\nwith the first and last name.\n\n746\n00:37:22.535 --> 00:37:27.604\nAll right, then we'll go practice or\nrather a program Janice here real quick,\n\n747\n00:37:27.604 --> 00:37:31.704\nclean her up just to specify that\nshe has the right email as well.\n\n748\n00:37:31.704 --> 00:37:34.520\nAnd we'll do first.last.\n\n749\n00:37:34.520 --> 00:37:38.329\nCuz I didn't do this while\nwe creating Bertelsman.\n\n750\n00:37:38.329 --> 00:37:43.418\nAnd then we'll just go ahead and\nwe'll paste @practice.co.uk.\n\n751\n00:37:43.418 --> 00:37:45.170\nYou can see that there.\n\n752\n00:37:45.170 --> 00:37:47.539\nAll right, we can get rid of that.\n\n753\n00:37:47.539 --> 00:37:51.544\nAnd got all that ready to go,\ngood, good, good.\n\n754\n00:37:51.544 --> 00:37:55.176\nAll right, Janice.\n\n755\n00:37:55.176 --> 00:37:55.950\nAnd you know why?\n\n756\n00:37:55.950 --> 00:37:57.520\nYeah, one second, I'm just gonna fix this.\n\n757\n00:37:57.520 --> 00:37:59.600\nCuz I created the user name,\nit overrode it.\n\n758\n00:37:59.600 --> 00:38:02.784\nThis has to be this for stat last.\n\n759\n00:38:02.784 --> 00:38:06.295\nAnd fix that, Bert Elsman.\n\n760\n00:38:06.295 --> 00:38:10.385\nAll right, and\nthen just put our properties up there.\n\n761\n00:38:10.385 --> 00:38:12.890\nJust apply that, click OK.\n\n762\n00:38:12.890 --> 00:38:14.499\nAll right, so\nwe have our two user accounts.\n\n763\n00:38:16.170 --> 00:38:19.620\nAnd what we're gonna do now is go ahead\nand create a group called Sales and\n\n764\n00:38:19.620 --> 00:38:20.270\nput them in there.\n\n765\n00:38:20.270 --> 00:38:24.240\nSo, we're gonna go ahead and create our\nsales group, or GSales group I should say.\n\n766\n00:38:24.240 --> 00:38:28.040\nGonna put that into our Sales OU,\ndo GSales and\n\n767\n00:38:28.040 --> 00:38:30.550\nspecify that we want to add them in.\n\n768\n00:38:31.600 --> 00:38:33.850\nAll right, so let's just do GSales here.\n\n769\n00:38:35.140 --> 00:38:39.560\nAnd let's do group, call that GSales and\n\n770\n00:38:39.560 --> 00:38:43.330\nclick OK, so we have our group.\n\n771\n00:38:43.330 --> 00:38:46.557\nAgain pretty basic skills right I'm pretty\nsure most if not all of you are familiar\n\n772\n00:38:46.557 --> 00:38:48.489\nwith how to create users,\nhow to create groups.\n\n773\n00:38:48.489 --> 00:38:53.401\nBut you may have not seen it done through\nPowerShell using the ds add either the ou\n\n774\n00:38:53.401 --> 00:38:58.040\ncommand, or ds add user or ds add group,\ncould have done the group as well.\n\n775\n00:38:58.040 --> 00:38:59.990\nBut if you've seen this before, or\n\n776\n00:38:59.990 --> 00:39:02.430\nyou've been through this before,\nyou know how easy it is.\n\n777\n00:39:02.430 --> 00:39:06.870\nAnd the chances of you having to do this\nusing PowerShell, probably pretty minimal.\n\n778\n00:39:06.870 --> 00:39:08.790\nBut it's good just to\nhave a sense of that.\n\n779\n00:39:08.790 --> 00:39:10.230\nWe're just gonna add\nthe email address in for\n\n780\n00:39:10.230 --> 00:39:13.740\nthe group here cuz remember we're gonna\nneed this when we associate the group if\n\n781\n00:39:13.740 --> 00:39:16.400\nwe wanna grant it rights\nin the ADRMS console.\n\n782\n00:39:16.400 --> 00:39:23.636\nSo sales @practiceit.co.uk.\n\n783\n00:39:23.636 --> 00:39:27.050\nSet that up, and\napply that, click OK there.\n\n784\n00:39:27.050 --> 00:39:28.550\nAll right, so we've got all that.\n\n785\n00:39:29.660 --> 00:39:33.340\nAnd now we're gonna quickly go in,\ncreate our ADRMS/DMS host record,\n\n786\n00:39:33.340 --> 00:39:38.490\nso that we can find the ADRMS system and\nuse the services in the new domain.\n\n787\n00:39:38.490 --> 00:39:40.530\nAnd then we're gonna come back for\na part three.\n\n788\n00:39:40.530 --> 00:39:43.750\nAnd continue walking through some\nof the other back end processes and\n\n789\n00:39:43.750 --> 00:39:47.790\nstand up the ADR on this console and\nstart to configure it in this cluster.\n\n790\n00:39:47.790 --> 00:39:49.740\nAnd then we're gonna be\nable to go ahead and\n\n791\n00:39:49.740 --> 00:39:53.750\nthen ultimately set up a trust between\nthe two clusters across the two farce to\n\n792\n00:39:53.750 --> 00:39:56.080\nbe able to start exchanging and\nsharing information.\n\n793\n00:39:56.080 --> 00:39:57.990\nSo let's take a look at DNS real quick.\n\n794\n00:39:57.990 --> 00:40:01.880\nJust minimize this and let's go in here.\n\n795\n00:40:01.880 --> 00:40:05.668\nGo in Tools, go into DNS,\nand just check that off, so\n\n796\n00:40:05.668 --> 00:40:09.030\nwe're not continuously bothered by that.\n\n797\n00:40:09.030 --> 00:40:12.805\nThere we go, let's go over here,\ngo to plab, SA01.\n\n798\n00:40:12.805 --> 00:40:17.017\nLet's go to our forward lookup zone,\npracticeit.co.uk.\n\n799\n00:40:17.017 --> 00:40:20.970\nAnd we're gonna go ahead, we're gonna\nright-click New Host Record, okay?\n\n800\n00:40:20.970 --> 00:40:26.071\nAnd the host record is going to be for\nthe adrms server, so\n\n801\n00:40:26.071 --> 00:40:33.419\nwe'll do adrms as the name,\nspecify our IP address, 192.168.0.4.\n\n802\n00:40:33.419 --> 00:40:39.073\nAnd then, go ahead, and\nwe'll click Add Host.\n\n803\n00:40:39.073 --> 00:40:43.979\nClick OK, click Done, and\nwe've got our ADRMS record there now.\n\n804\n00:40:43.979 --> 00:40:48.355\nSo that way we will be able to find\nthe ADRMS solution once we install and\n\n805\n00:40:48.355 --> 00:40:49.550\nconfigure it.\n\n806\n00:40:49.550 --> 00:40:50.730\nNow we haven't done that yet.\n\n807\n00:40:50.730 --> 00:40:51.930\nThe ,next step when you come back and\n\n808\n00:40:51.930 --> 00:40:55.330\njoin us for part three is gonna\nbe that we're gonna go in.\n\n809\n00:40:55.330 --> 00:40:59.080\nWe're gonna use PowerShell to stand up and\ndo all the prereqs.\n\n810\n00:40:59.080 --> 00:41:02.460\nWe'll install the web server, so\nwe'll instantiate the IS service.\n\n811\n00:41:02.460 --> 00:41:04.650\nWe'll then go ahead and\nmake sure we do all the bindings and\n\n812\n00:41:04.650 --> 00:41:06.050\nhave everything set up.\n\n813\n00:41:06.050 --> 00:41:09.307\nThen we'll install and\nconfigure ADRMS that'll be in part three.\n\n814\n00:41:09.307 --> 00:41:12.064\nWhen you come back and take a look with us\nin hopefully just a couple of minutes, so\n\n815\n00:41:12.064 --> 00:41:13.880\nwe'll look forward to seeing you there.\n\n816\n00:41:13.880 --> 00:41:17.970\n&gt;&gt; All right, Adam a lot of back and work\nto go, but we're almost at the station, so\n\n817\n00:41:17.970 --> 00:41:18.640\nbear with us.\n\n818\n00:41:18.640 --> 00:41:20.260\nDefinitely join us into part three.\n\n819\n00:41:20.260 --> 00:41:23.090\nI'd hate for you to get halfway through\nthis and throw up your hands, and\n\n820\n00:41:23.090 --> 00:41:26.000\nsay, this RMS stuff is too difficult.\n\n821\n00:41:26.000 --> 00:41:28.780\nIt's not, just continue,\nit's just a lot of ground work.\n\n822\n00:41:28.780 --> 00:41:32.490\nSo keep pounding away and\nwe will continue this into part three.\n\n823\n00:41:32.490 --> 00:41:35.760\nUntil then it looks like it is time for\nus to sign off for this one.\n\n824\n00:41:35.760 --> 00:41:38.290\nAnd I've been your host Daniel Lowrie.\n\n825\n00:41:38.290 --> 00:41:39.519\n&gt;&gt; I am Adam Gordon.\n\n826\n00:41:39.519 --> 00:41:42.188\n&gt;&gt; We'll see you next time.\n\n827\n00:41:42.188 --> 00:41:47.962\n[MUSIC]\n\n828\n00:41:47.962 --> 00:41:51.036\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213661013"
        },
        {
          "description": "In this episode, Daniel and Adam continue their demonstration of configuring Active Directory Rights Management Services. Here they will take all the concepts that you've been learning and walk you through the setup involved in standing up a AD-RMS system.",
          "length": "1831",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-3-configuring_ad-rms_pt3-041417-PGM.00_30_14_10.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-3-configuring_ad-rms_pt3-041417-PGM.00_30_14_10.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-3-configuring_ad-rms_pt3-041417-PGM.00_30_14_10.Still001-sm.jpg",
          "title": "Configuring AD-RMS Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.005 --> 00:00:01.568\nWelcome to ITpro TV.\n\n2\n00:00:01.568 --> 00:00:06.064\nI'm your host [CROSSTALK]\n\n3\n00:00:06.064 --> 00:00:08.440\n[MUSIC]\n\n4\n00:00:08.440 --> 00:00:12.214\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.214 --> 00:00:12.808\n&gt;&gt; All right,\n\n6\n00:00:12.808 --> 00:00:16.564\ngreetings everyone and welcome back\nto another great episode of ITProTV.\n\n7\n00:00:16.564 --> 00:00:18.305\nI'm your host Daniel Lowrie and\n\n8\n00:00:18.305 --> 00:00:22.950\nin today's episode we are coming back at\nyou with more on our 70 dash 414 series.\n\n9\n00:00:22.950 --> 00:00:25.509\nActually continuing our conversation,\n\n10\n00:00:25.509 --> 00:00:30.070\nour demonstration of configuring\nAD RMS to rights management services.\n\n11\n00:00:30.070 --> 00:00:31.260\nVery cool stuff.\n\n12\n00:00:31.260 --> 00:00:35.210\nJoining us in the studio to continue that\nout is our good friend Mr. Adam Gordon.\n\n13\n00:00:35.210 --> 00:00:36.160\nAdam welcome back man.\n\n14\n00:00:36.160 --> 00:00:37.690\nHow's it going?\n\n15\n00:00:37.690 --> 00:00:40.350\n&gt;&gt; It is an extended RNS-\n&gt;&gt; [LAUGH]\n\n16\n00:00:40.350 --> 00:00:41.060\n&gt;&gt; Vacation.\n\n17\n00:00:41.060 --> 00:00:42.360\nThat is how it's going.\n\n18\n00:00:42.360 --> 00:00:45.277\nWe are in part three of\na never-ending network.\n\n19\n00:00:45.277 --> 00:00:46.860\nYou remember the movie\nThe Never-ending Story?\n\n20\n00:00:46.860 --> 00:00:48.220\n&gt;&gt; I watch it at least yearly.\n\n21\n00:00:48.220 --> 00:00:49.500\nIt's a great flick.\n\n22\n00:00:49.500 --> 00:00:52.220\n&gt;&gt; It is, Peter Falk in there,\ndoes the little grandfather role,\n\n23\n00:00:52.220 --> 00:00:53.490\ntells the story to the kid.\n\n24\n00:00:53.490 --> 00:00:55.960\n&gt;&gt; That's Princess Bride.\n\n25\n00:00:55.960 --> 00:00:57.630\n&gt;&gt; Wait, no.\nThat was Princess Bride, right?\n\n26\n00:00:57.630 --> 00:01:01.000\nNo, but the Never-ending Story was\nthe one with, who was the crazy guy?\n\n27\n00:01:01.000 --> 00:01:02.930\nKajagoogoo, the singer.\n\n28\n00:01:02.930 --> 00:01:06.510\nJamal, I think his name was, who did that.\n\n29\n00:01:06.510 --> 00:01:09.560\nI'm up on my 80s one hit wonder trivia,\nas well.\n\n30\n00:01:09.560 --> 00:01:13.310\nBut, anyway, so it is gonna be\nthe never ending story here.\n\n31\n00:01:13.310 --> 00:01:14.620\nBut we are gonna try to wrap it up.\n\n32\n00:01:14.620 --> 00:01:17.730\nNot in this episode most likely,\nstill got a lot of work to do.\n\n33\n00:01:17.730 --> 00:01:24.140\nBut we are in the process of standing up\nour second forest, second AD RMS cluster.\n\n34\n00:01:24.140 --> 00:01:28.290\nDone all the backend work to create\nthe user accounts, configure everything,\n\n35\n00:01:28.290 --> 00:01:32.520\nsetup all the prereq requirements\non the administration side.\n\n36\n00:01:32.520 --> 00:01:35.470\nNow, we're gonna go and\ninstall all the prereqs from PowerShell.\n\n37\n00:01:35.470 --> 00:01:38.674\nWe're about to stand up our IS instance,\nadd in the .NET framework,\n\n38\n00:01:38.674 --> 00:01:41.988\nthen we're gonna go ahead and\nconfigure it, bring in our certificate so\n\n39\n00:01:41.988 --> 00:01:43.862\nwe've already established and set up.\n\n40\n00:01:43.862 --> 00:01:45.064\nSo we're gonna bind them.\n\n41\n00:01:45.064 --> 00:01:47.961\nAnd then we're gonna go ahead and\nactually configure the AD RMS and\n\n42\n00:01:47.961 --> 00:01:48.954\nget that all stood up.\n\n43\n00:01:48.954 --> 00:01:52.234\nAnd then we're gonna go ahead and\nstart talking between the two clusters,\n\n44\n00:01:52.234 --> 00:01:54.762\nand start having a little\ncross cluster action.\n\n45\n00:01:54.762 --> 00:01:56.985\nThat'll be really cool,\nyou'll wanna stay tuned for that.\n\n46\n00:01:56.985 --> 00:01:59.440\nAll right so if we can go back in,\ntake a look,\n\n47\n00:01:59.440 --> 00:02:03.137\nwe are going to kick off our\ninstallation of the IIS Web Server Role.\n\n48\n00:02:03.137 --> 00:02:05.008\nYou'll see we're set up in PowerShell.\n\n49\n00:02:05.008 --> 00:02:07.682\nGonna go ahead and hit OK there,\ngonna let that run.\n\n50\n00:02:07.682 --> 00:02:12.857\nOnce that is done instantiating,\nwe're going to add in the .NET Framework.\n\n51\n00:02:12.857 --> 00:02:16.676\nWe're going to need ASP.NET 4.5\nwith all the management tools and\n\n52\n00:02:16.676 --> 00:02:19.000\nsub features to get this kicked off.\n\n53\n00:02:19.000 --> 00:02:20.820\nSo we'll be typing those commands in.\n\n54\n00:02:20.820 --> 00:02:22.900\nJust a moment you can\nsee this is almost done.\n\n55\n00:02:22.900 --> 00:02:25.600\nDoesn't take very long then\nwe're going to go ahead.\n\n56\n00:02:25.600 --> 00:02:28.280\nAnd we're going to install\nAD RMS on top of that.\n\n57\n00:02:28.280 --> 00:02:31.810\nSo several specific steps in a certain\norder we have to engage in here.\n\n58\n00:02:31.810 --> 00:02:35.413\nGot to stand up the web server,\ngot to add the .NET framework and\n\n59\n00:02:35.413 --> 00:02:37.898\nmanagement support all supporting tools.\n\n60\n00:02:37.898 --> 00:02:41.758\nWe then and only then install\nAD RMS as the role and go ahead and\n\n61\n00:02:41.758 --> 00:02:43.130\nconfigure that out.\n\n62\n00:02:43.130 --> 00:02:45.290\nSo we got to make sure we\nknow the order here and\n\n63\n00:02:45.290 --> 00:02:48.130\nthat we're prepared to\nexecute as necessary.\n\n64\n00:02:48.130 --> 00:02:51.572\nYou'll see that were looking for\nsuccess as our exit code right there and\n\n65\n00:02:51.572 --> 00:02:52.256\nthat is good.\n\n66\n00:02:52.256 --> 00:02:57.730\nAll right, so step two we're gonna\ndo another add-windowsFeature.\n\n67\n00:02:57.730 --> 00:03:02.562\nPut a little tab complete there,\ndo our Name\n\n68\n00:03:02.562 --> 00:03:07.534\nin this case is gonna be web-asp-net45.\n\n69\n00:03:07.534 --> 00:03:11.610\nMake sure you specify right\nversion by the way we've 335, 45,\n\n70\n00:03:11.610 --> 00:03:13.860\nmake sure you do 45 for this.\n\n71\n00:03:13.860 --> 00:03:15.680\nAll right, we're gonna do our include.\n\n72\n00:03:15.680 --> 00:03:16.664\nWe're gonna do both.\n\n73\n00:03:16.664 --> 00:03:20.359\nWe're gonna do our management tools and\nalso do our include for\n\n74\n00:03:20.359 --> 00:03:22.400\nall subfeatures, right?\n\n75\n00:03:22.400 --> 00:03:27.090\nSo just make sure that\nyou are aware of that.\n\n76\n00:03:27.090 --> 00:03:28.790\nDo the management tools first.\n\n77\n00:03:28.790 --> 00:03:31.770\nThat way it knows it does the tools\nthen subfeatures of the tools.\n\n78\n00:03:31.770 --> 00:03:32.998\nYou don't wanna do it the other way.\n\n79\n00:03:32.998 --> 00:03:35.490\nIn other words, don't include all\nsubfeatures and then management tools.\n\n80\n00:03:35.490 --> 00:03:36.420\nThat doesn't work, right?\n\n81\n00:03:36.420 --> 00:03:39.770\nSo make sure you're aware of that and you\nknow what order you gotta do this stuff.\n\n82\n00:03:39.770 --> 00:03:41.660\nThey're so picky about this stuff, right?\n\n83\n00:03:41.660 --> 00:03:43.129\nYou think it would just be\nsmart enough to understand.\n\n84\n00:03:43.129 --> 00:03:46.111\n&gt;&gt; [CROSSTALK]\n&gt;&gt; We'll do that, no big deal..\n\n85\n00:03:46.111 --> 00:03:47.166\nBut no, it doesn't do that.\n\n86\n00:03:47.166 --> 00:03:50.419\nIt just kinda laughs at you and\nsay no, that's not gonna work.\n\n87\n00:03:50.419 --> 00:03:52.580\nAll right, so\nwe're gonna get this running.\n\n88\n00:03:52.580 --> 00:03:55.866\nThen we're gonna go ahead,\nwe're going to install, or set up and\n\n89\n00:03:55.866 --> 00:03:58.168\ninstall AD RMS through\nthe PowerShell shell.\n\n90\n00:03:58.168 --> 00:03:59.403\nYou'll see that here in just a moment.\n\n91\n00:03:59.403 --> 00:04:02.486\nYou'll see we're almost done here as well.\n\n92\n00:04:02.486 --> 00:04:05.643\nAm I the only one who thinks that looks\nlike a whole bunch of Cheerios just being\n\n93\n00:04:05.643 --> 00:04:08.032\nlike\n&gt;&gt; I saw the exact same thing.\n\n94\n00:04:08.032 --> 00:04:09.305\nYeah.\n\n95\n00:04:09.305 --> 00:04:10.482\n&gt;&gt; All right, there we go.\n\n96\n00:04:10.482 --> 00:04:12.080\nAll right, so we have our success.\n\n97\n00:04:12.080 --> 00:04:12.950\nSo we're looking for that.\n\n98\n00:04:12.950 --> 00:04:15.105\nWe'll do one more add\nWindows features here.\n\n99\n00:04:15.105 --> 00:04:18.500\nNice that we don't have to do any\nrestarts in between this, by the way.\n\n100\n00:04:18.500 --> 00:04:20.217\n&gt;&gt; [CROSSTALK] Windows system.\n&gt;&gt; I very much like the fact that\n\n101\n00:04:20.217 --> 00:04:22.605\nMicrosoft has actually figured that out.\n\n102\n00:04:22.605 --> 00:04:24.295\nNot that they're 20\nyears late to the game,\n\n103\n00:04:24.295 --> 00:04:26.105\nwhen every other operating\nsystem knew how to do that.\n\n104\n00:04:26.105 --> 00:04:27.323\nBut we're not gonna be bitter,\n\n105\n00:04:27.323 --> 00:04:29.545\nwe're just going to be happy\nthat that's happening now.\n\n106\n00:04:29.545 --> 00:04:32.930\nAll right, so name, this one is AD RMS.\n\n107\n00:04:32.930 --> 00:04:35.220\nAnd then we're gonna do our\ninclude management tools.\n\n108\n00:04:37.290 --> 00:04:38.490\nAll right, so we're gonna do that.\n\n109\n00:04:39.800 --> 00:04:41.900\nLet that run, do its thing.\n\n110\n00:04:41.900 --> 00:04:44.810\nAnd then once we get done with that,\n\n111\n00:04:44.810 --> 00:04:48.190\nwe're gonna configure the default\nwebsite setup that's a cell.\n\n112\n00:04:48.190 --> 00:04:51.080\nBy adding the bindings and adding in our\nserver certificate that we've already\n\n113\n00:04:51.080 --> 00:04:54.440\nissued from our now enterprise root CA PKI\n\n114\n00:04:54.440 --> 00:04:57.960\ninstallation that we showed you\nhow to setup and instantiate.\n\n115\n00:04:57.960 --> 00:05:00.190\nYou've learned and seen how to do\nhow to do quite a bit of stuff.\n\n116\n00:05:00.190 --> 00:05:03.130\nThis show must be like\nAD RMS with PowerShell cuz\n\n117\n00:05:03.130 --> 00:05:04.260\nwe're doing everything in PowerShell.\n\n118\n00:05:04.260 --> 00:05:05.480\nThis is like a PowerShell primer.\n\n119\n00:05:05.480 --> 00:05:09.330\n&gt;&gt; Yeah, I tell you what,\nwe should combine the two, right?\n\n120\n00:05:09.330 --> 00:05:10.970\nOkay, here's our PowerShell and\n\n121\n00:05:10.970 --> 00:05:14.430\nwe're just gonna use AD RMS as our-\n&gt;&gt; It's like secondary just\n\n122\n00:05:14.430 --> 00:05:14.970\nas the example.\n\n123\n00:05:14.970 --> 00:05:16.900\n&gt;&gt; Yeah, yeah, just put the two together.\n\n124\n00:05:16.900 --> 00:05:18.630\nYou get two classes for the price of one.\n\n125\n00:05:18.630 --> 00:05:19.430\n&gt;&gt; You do, you do.\n\n126\n00:05:19.430 --> 00:05:23.457\nAll right, so we've got our AD RMS\ninstallation stood up there as well.\n\n127\n00:05:23.457 --> 00:05:25.670\nYou could see all of those\nthings were successful.\n\n128\n00:05:25.670 --> 00:05:27.082\nWe see our exit codes there.\n\n129\n00:05:27.082 --> 00:05:28.580\nWe're just gonna leave PowerShell open for\nthe moment.\n\n130\n00:05:28.580 --> 00:05:31.866\nCuz you never know, you're gonna feel\nthe hankering to go back in there and\n\n131\n00:05:31.866 --> 00:05:33.132\njust play around some more.\n\n132\n00:05:33.132 --> 00:05:35.020\nAll right, so\nnow what we're going to do is go into IIS.\n\n133\n00:05:35.020 --> 00:05:36.120\nWe just stood that up.\n\n134\n00:05:36.120 --> 00:05:36.810\nWe're going to go in.\n\n135\n00:05:36.810 --> 00:05:41.993\nWe can see that, if we actually do\na refresh here, we'll be able to see it.\n\n136\n00:05:44.779 --> 00:05:49.208\nJust let this update you'll see here IIS\nnow stood up as a role as is AD RMS so\n\n137\n00:05:49.208 --> 00:05:51.195\nwe could see all of that.\n\n138\n00:05:51.195 --> 00:05:53.464\nWe've got a little prompt\nto do a configuration or\n\n139\n00:05:53.464 --> 00:05:56.826\nthe final configuration in AD RMS we'll\ntake a look at that just a moment.\n\n140\n00:05:56.826 --> 00:06:02.593\nBut let's go in here to tools,\nlet's go to IIS manager, open the sub,\n\n141\n00:06:02.593 --> 00:06:08.510\nwe're gonna go in and we are going to\ndo our binding of our certificates.\n\n142\n00:06:08.510 --> 00:06:12.180\nJust open this up real quick,\nget our little prompt there.\n\n143\n00:06:12.180 --> 00:06:13.442\nWe're gonna get rid of that.\n\n144\n00:06:13.442 --> 00:06:15.440\nThe certificates we're gonna\nwork with are already here.\n\n145\n00:06:15.440 --> 00:06:19.950\nYou can see they're sitting here in\nthe server certificate area in IIS.\n\n146\n00:06:19.950 --> 00:06:23.130\nWe're gonna go ahead and we're gonna\nbind one of those in now to create our\n\n147\n00:06:23.130 --> 00:06:25.750\nHTTPS bindings on our default website.\n\n148\n00:06:25.750 --> 00:06:29.270\nSo we're going to go to sites,\ngoing to go to our default website here,\n\n149\n00:06:29.270 --> 00:06:32.850\nwe can go in right up over here and\ngo to Bindings.\n\n150\n00:06:32.850 --> 00:06:35.426\nWe're going to go in and do that.\n\n151\n00:06:35.426 --> 00:06:38.690\nWe've got out HTTP capability,\nstandard connection.\n\n152\n00:06:38.690 --> 00:06:41.220\nWe're going to go ahead and\nadd in our HTTPS.\n\n153\n00:06:41.220 --> 00:06:46.560\nSo we're going to go do this right now,\nclick Add and we will pull down our\n\n154\n00:06:46.560 --> 00:06:52.160\nprotocol selector, HTTPS that allows us\nto get the link for the SSL certificate.\n\n155\n00:06:52.160 --> 00:06:53.565\nPut that in, in just a minute.\n\n156\n00:06:53.565 --> 00:06:58.445\nLet's put in our host name here\n\n157\n00:06:58.445 --> 00:07:04.480\nplabsa01.practiceIT.co.uk.\n\n158\n00:07:04.480 --> 00:07:06.930\nAnd then our certificates are here,\n\n159\n00:07:06.930 --> 00:07:09.480\nwe'll see if we've got our\ndifferent certificates.\n\n160\n00:07:09.480 --> 00:07:14.140\nWe're gonna choose our plad SA01,\nSSL certificate, our machine computer\n\n161\n00:07:14.140 --> 00:07:17.450\ncertificate that we issued when we\nwent in to create a separate MMC for\n\n162\n00:07:17.450 --> 00:07:21.980\nthe personal certificate store and issued\na certificate directly to our machine.\n\n163\n00:07:21.980 --> 00:07:23.800\nThat's the certificate\nwe're gonna use here.\n\n164\n00:07:23.800 --> 00:07:27.389\nSo we're gonna choose that,\nclick OK, set up the binding here,\n\n165\n00:07:27.389 --> 00:07:29.621\nit's now instantiated, click Close.\n\n166\n00:07:29.621 --> 00:07:32.055\nAnd our web server is now ready to go,\nopen for\n\n167\n00:07:32.055 --> 00:07:36.120\nbusiness has a certificate it needs\nthat we are then able to leverage.\n\n168\n00:07:36.120 --> 00:07:40.150\nNow we're gonna configure AD RMS\nin our practice IT domains.\n\n169\n00:07:40.150 --> 00:07:44.323\nSo we're gonna get rid of this just close\nthis out, gonna come over here, gonna\n\n170\n00:07:44.323 --> 00:07:48.337\nclick here let's see we have additional\nconfiguration require for AD RMS.\n\n171\n00:07:48.337 --> 00:07:52.586\nNow this is the wizard you saw me walk\nthrough in the first show in this series\n\n172\n00:07:52.586 --> 00:07:54.160\nabout configuring AD RMS.\n\n173\n00:07:54.160 --> 00:07:55.389\nSame exact wizard.\n\n174\n00:07:55.389 --> 00:07:59.342\nWe're gonna essentially pretty much make\nthe same choices, just adjust them for\n\n175\n00:07:59.342 --> 00:08:00.610\nour domain here, right?\n\n176\n00:08:00.610 --> 00:08:02.274\nSo just make sure we're\naware of the local.\n\n177\n00:08:02.274 --> 00:08:06.036\nLocalization or specificity for\nthis forest and this cluster install, but\n\n178\n00:08:06.036 --> 00:08:09.737\nessentially the same exact steps you\nsaw me walk through in the first demo,\n\n179\n00:08:09.737 --> 00:08:11.040\nwe are gonna do here.\n\n180\n00:08:11.040 --> 00:08:13.480\nCuz now we're setting up\nthe other side of this divide and\n\n181\n00:08:13.480 --> 00:08:16.325\nsetting up an additional\ncluster in a separate forest.\n\n182\n00:08:16.325 --> 00:08:19.987\nBut you saw all the pre-work that\nwe hid from you the first time.\n\n183\n00:08:19.987 --> 00:08:23.055\nThat's what most of episode two and\n\n184\n00:08:23.055 --> 00:08:26.195\nthe beginning part of this episode was all\nabout, was getting all the pre-work done\n\n185\n00:08:26.195 --> 00:08:29.265\nto get back to this point to show\nyou how to configure, right?\n\n186\n00:08:29.265 --> 00:08:31.185\nThat's what we're about to do right now.\n\n187\n00:08:31.185 --> 00:08:34.392\nSo we're gonna click here,\nbring this back up so you can see this,\n\n188\n00:08:34.392 --> 00:08:36.470\nlet's park that right up at the top there.\n\n189\n00:08:36.470 --> 00:08:37.150\nAll right,\n\n190\n00:08:37.150 --> 00:08:41.000\nwe're gonna click Next here, we are going\nto create a brand new root cluster.\n\n191\n00:08:41.000 --> 00:08:43.790\nWe talked about the fact\nthat first machine installed\n\n192\n00:08:43.790 --> 00:08:46.620\ninto the forest becomes the anchor for\nthe root cluster,\n\n193\n00:08:46.620 --> 00:08:49.950\nknown as the root server, and\nit establishes our root cluster.\n\n194\n00:08:49.950 --> 00:08:51.850\nWe're gonna go in and do that right now.\n\n195\n00:08:51.850 --> 00:08:55.120\nRemember, if we did have additional\nmachines that were already set up,\n\n196\n00:08:55.120 --> 00:08:56.700\nwe wanted to join that cluster.\n\n197\n00:08:56.700 --> 00:08:59.480\nWe'd be able to scale out to\ncreate a cluster or a farm,\n\n198\n00:08:59.480 --> 00:09:00.890\nyou could think of it either way.\n\n199\n00:09:00.890 --> 00:09:02.050\nWe call it a cluster,\n\n200\n00:09:02.050 --> 00:09:04.790\njust a group of machines that\nare providing these services.\n\n201\n00:09:04.790 --> 00:09:07.440\nBy choosing that second option,\nthat would not be grayed out,\n\n202\n00:09:07.440 --> 00:09:09.550\nwe'd be able to go in and\ndo that on the additional machines.\n\n203\n00:09:09.550 --> 00:09:12.674\nWe're gonna click Next here,\nConfiguration Database,\n\n204\n00:09:12.674 --> 00:09:15.930\nwe're gonna use our\nWindows Internal Database, the WID.\n\n205\n00:09:15.930 --> 00:09:18.857\nWe've talked about\nthe ability to use SQL and\n\n206\n00:09:18.857 --> 00:09:22.565\nuse a named instance separately,\nwe're gonna do this.\n\n207\n00:09:22.565 --> 00:09:25.515\nOur Service Account, we're gonna go in and\nspecify the name of our Service Account.\n\n208\n00:09:25.515 --> 00:09:27.577\nAny bets on whether I have to type that\nthing in more than once on this one?\n\n209\n00:09:27.577 --> 00:09:29.452\n&gt;&gt; [LAUGH] Man,\nI ain't taking any of that.\n\n210\n00:09:29.452 --> 00:09:30.515\n&gt;&gt; Let's see what happens here.\n\n211\n00:09:30.515 --> 00:09:33.475\nIf you remember the first episode,\nwe had the account all set up,\n\n212\n00:09:33.475 --> 00:09:36.765\nas you already saw, and we typed it in,\nit just did not take it.\n\n213\n00:09:36.765 --> 00:09:39.035\nTook us about two or three times\nbefore I finally had to go check it,\n\n214\n00:09:39.035 --> 00:09:40.605\nmake sure it was really there, and it was.\n\n215\n00:09:40.605 --> 00:09:42.910\nAnd we saw that it was typed the right\nway and then, all of a sudden,\n\n216\n00:09:42.910 --> 00:09:43.720\nit decided to play nice.\n\n217\n00:09:43.720 --> 00:09:48.118\nWe're gonna see if we can make the magic\nhappen on the first time with this one.\n\n218\n00:09:48.118 --> 00:09:55.040\nSo adrmssvc, we'll put in our password,\nand let's see what happens here.\n\n219\n00:09:56.250 --> 00:09:58.523\nAnd look at that, do you know what it is?\n\n220\n00:09:58.523 --> 00:10:01.928\nI think it was just, well,\nI don't know what it was.\n\n221\n00:10:01.928 --> 00:10:04.450\nI was going to say something,\nbut I have no idea what it was.\n\n222\n00:10:04.450 --> 00:10:06.080\nIt was just mere silliness.\n\n223\n00:10:06.080 --> 00:10:07.200\n&gt;&gt; Temporal anomaly.\n\n224\n00:10:07.200 --> 00:10:11.605\n&gt;&gt; It was, there was a fabric space-time\nripple, and that's what happened.\n\n225\n00:10:11.605 --> 00:10:13.435\nAll right, so we have that added in here.\n\n226\n00:10:13.435 --> 00:10:16.655\nWe talked about our Crypto Mode\nsupport in the prior walk through.\n\n227\n00:10:16.655 --> 00:10:20.855\nRemember Crypto Mode 2 versus 1,\n2 is the standard default now.\n\n228\n00:10:20.855 --> 00:10:24.355\nEnhanced Crypto Support, that's what we're\ngonna go with, so we're choosing that.\n\n229\n00:10:25.720 --> 00:10:28.060\nWe're gonna do our key storage here,\n\n230\n00:10:28.060 --> 00:10:31.280\nessentially manage key\nstorage on the system.\n\n231\n00:10:31.280 --> 00:10:34.550\nSo we're gonna do that, but\nwe can use our CSP if we choose to.\n\n232\n00:10:34.550 --> 00:10:37.120\nSo can actually use an external\nstorage solution, and\n\n233\n00:10:37.120 --> 00:10:39.285\nthen we can talk about exporting them and\nhow that would work.\n\n234\n00:10:39.285 --> 00:10:42.480\nWe'll click Next here,\nwe have to specify our password.\n\n235\n00:10:42.480 --> 00:10:44.121\nLet's go ahead and type that in.\n\n236\n00:10:49.882 --> 00:10:51.590\nAll right, we're just waiting for\nthat to come up.\n\n237\n00:10:51.590 --> 00:10:54.370\nWe're binding our cluster\nwebsite to the default website,\n\n238\n00:10:54.370 --> 00:10:57.290\nand the certificates that we've put\nin there, so we have that available.\n\n239\n00:10:58.850 --> 00:11:00.810\nGonna put in our fully\nqualified domain name for\n\n240\n00:11:00.810 --> 00:11:04.360\nour cluster address on\nthe next one here with SSL.\n\n241\n00:11:04.360 --> 00:11:06.320\nSo we're just gonna go ahead and\ntype this in.\n\n242\n00:11:06.320 --> 00:11:15.483\nThis is ADRMS.practiceit.co.uk.\n\n243\n00:11:15.483 --> 00:11:17.740\nADRMS.practiceit.co.uk, port 443.\n\n244\n00:11:17.740 --> 00:11:20.610\nI'll point out the same thing\nI did in the first show, or\n\n245\n00:11:20.610 --> 00:11:22.900\nin the first episode in this\nseries in our walk through.\n\n246\n00:11:22.900 --> 00:11:25.110\nNotice that little blurb\nright below the line.\n\n247\n00:11:25.110 --> 00:11:28.420\nYou cannot change this address or\nport number once you install and\n\n248\n00:11:28.420 --> 00:11:29.850\nconfigure, keep that in mind.\n\n249\n00:11:29.850 --> 00:11:32.770\nYou make a mistake here, you gotta tear\nthis all down and start over again.\n\n250\n00:11:32.770 --> 00:11:34.912\nYou've seen how much fun it\nis to get to this point, and\n\n251\n00:11:34.912 --> 00:11:37.336\nunless you got a couple hours and\nyou're not doing anything,\n\n252\n00:11:37.336 --> 00:11:39.410\nyou wanna make sure you\nmake the right choice here.\n\n253\n00:11:39.410 --> 00:11:42.740\nSo we wanna be sure that that is good,\nwe're just gonna verify that.\n\n254\n00:11:42.740 --> 00:11:43.630\nGonna click Next.\n\n255\n00:11:43.630 --> 00:11:46.060\nWe've got our service\ncertificate already bound there,\n\n256\n00:11:46.060 --> 00:11:48.900\nyou just saw me do that to IIS,\nso we already know it's there.\n\n257\n00:11:48.900 --> 00:11:52.020\nIt's just telling us that it's there so\nwe're aware of it, that's great.\n\n258\n00:11:52.020 --> 00:11:54.790\nWe've got our license\nsource certificate here.\n\n259\n00:11:54.790 --> 00:11:59.450\nName of the machine we're\ninstalling against, PlaidSA01, so\n\n260\n00:11:59.450 --> 00:12:01.121\nwe've got that there.\n\n261\n00:12:01.121 --> 00:12:04.870\nThe SEP registration for\nthe service connection point, right?\n\n262\n00:12:04.870 --> 00:12:06.740\nRemember, I also talked about\nthe fact you don't wanna confuse\n\n263\n00:12:06.740 --> 00:12:09.390\nthis with the cryptographic support,\nso the CSP.\n\n264\n00:12:09.390 --> 00:12:11.930\nSo we just wanna make sure we\nknow what we're doing here.\n\n265\n00:12:11.930 --> 00:12:14.570\nThe service connection point is what\nwe created in Active Directory so\n\n266\n00:12:14.570 --> 00:12:18.210\nthat we can do lookups from clients\nto find the RMS service, so\n\n267\n00:12:18.210 --> 00:12:19.580\nwe just wanna make sure\nwe're aware of that.\n\n268\n00:12:19.580 --> 00:12:22.650\nWe're gonna ahead and do our registration,\nlet's get that out of the way and\n\n269\n00:12:22.650 --> 00:12:23.950\nlet it take care of that.\n\n270\n00:12:23.950 --> 00:12:26.460\nWe'll click Install,\nit's gonna go ahead and do its thing.\n\n271\n00:12:26.460 --> 00:12:31.370\nIt doesn't take too long, and\nthen once that is done we're\n\n272\n00:12:31.370 --> 00:12:35.420\ngonna restart this machine, log back in,\nand then open up the Management Console.\n\n273\n00:12:35.420 --> 00:12:37.640\nWe're gonna take a quick break while\nthat happens behind the scenes.\n\n274\n00:12:37.640 --> 00:12:39.240\nWe're not gonna subject you to that.\n\n275\n00:12:39.240 --> 00:12:43.485\nBut as soon as you come on back we'll be\nlogged on with the AD RMS console open,\n\n276\n00:12:43.485 --> 00:12:46.135\nready to go, I will continue our\ndiscussions about how to config.\n\n277\n00:12:47.895 --> 00:12:49.625\nAll right so\nyou could see we've been successful,\n\n278\n00:12:49.625 --> 00:12:51.985\nwe've opened up, or\nrestarted, I should say.\n\n279\n00:12:51.985 --> 00:12:55.775\nOpened up our AD RMS server\ncluster administration console,\n\n280\n00:12:55.775 --> 00:12:57.575\nsay that three times fast and\nget it right.\n\n281\n00:12:57.575 --> 00:12:59.705\n&gt;&gt; Not happening [LAUGH]\n&gt;&gt; No, definitely not.\n\n282\n00:12:59.705 --> 00:13:02.915\nAnd you can see we were successful\nat configuring the cluster out,\n\n283\n00:13:02.915 --> 00:13:06.652\nwe've got our cluster summary here,\ngot all of our information set up.\n\n284\n00:13:06.652 --> 00:13:11.190\nWe're gonna go in now and we are going to\nstart working with our trust policies.\n\n285\n00:13:11.190 --> 00:13:14.829\nWe've talked about, in prior episodes\nbefore we started doing the demos and\n\n286\n00:13:14.829 --> 00:13:17.560\nthe walk throughs,\nabout the Trusted User Domain and\n\n287\n00:13:17.560 --> 00:13:19.620\ntrusted publishing domain policies.\n\n288\n00:13:19.620 --> 00:13:20.700\nAnd you can see them there.\n\n289\n00:13:21.700 --> 00:13:25.720\nWe're gonna go ahead and we're gonna\nexport our Trusted User Domain.\n\n290\n00:13:25.720 --> 00:13:30.263\nSend it over to our other RMS\ncluster in the other forest,\n\n291\n00:13:30.263 --> 00:13:33.577\nallowing us to import the information for\n\n292\n00:13:33.577 --> 00:13:38.609\nusers in this system, and\nallow them to be trusted over there.\n\n293\n00:13:38.609 --> 00:13:42.602\nAnd this is how we are gonna link the two\nclusters and allow them to exchange and\n\n294\n00:13:42.602 --> 00:13:44.480\ncollaborate with each other.\n\n295\n00:13:44.480 --> 00:13:48.760\nRemember, we're not using ADFS, the Active\nDirectory Federation Services, for this,\n\n296\n00:13:48.760 --> 00:13:55.210\nbut rather the built in functionality that\nAD RMS has itself to exchange information.\n\n297\n00:13:55.210 --> 00:13:58.233\nAnd the publishing domains,\nwhich have all of the rights,\n\n298\n00:13:58.233 --> 00:14:01.693\nthe templates, a private key,\nall that stuff associated with it.\n\n299\n00:14:01.693 --> 00:14:05.259\nTo grant rights and allow rights that\nare granted to one cluster to be seen and\n\n300\n00:14:05.259 --> 00:14:06.440\nunderstood in another.\n\n301\n00:14:06.440 --> 00:14:08.930\nWe're gonna be looking at how this works,\nwe've talked about this, but\n\n302\n00:14:08.930 --> 00:14:10.710\nyou're actually gonna see this right now.\n\n303\n00:14:10.710 --> 00:14:13.720\nAll right, so we're gonna go ahead, we're\ngonna export our Trusted User Domain,\n\n304\n00:14:13.720 --> 00:14:16.770\nso we're gonna right-click.\n\n305\n00:14:16.770 --> 00:14:22.890\nYou'll see we can go in and\nwe can import if we are setting up,\n\n306\n00:14:22.890 --> 00:14:25.870\nand we are going to grab one from\nthe other side and bring it in, right?\n\n307\n00:14:25.870 --> 00:14:30.660\nThat's our standard solution if we're just\nworking at the high level in the console.\n\n308\n00:14:30.660 --> 00:14:33.400\nWe have a named instance, we're gonna\ngo down there in just a second.\n\n309\n00:14:33.400 --> 00:14:36.150\nClick on this one, and\nwe're gonna export this, right?\n\n310\n00:14:36.150 --> 00:14:38.010\nYou can see here, we could export.\n\n311\n00:14:38.010 --> 00:14:42.110\nBut if we wanna import from another\ncluster, we just import right up there,\n\n312\n00:14:42.110 --> 00:14:44.030\nand then we bring in whatever.\n\n313\n00:14:44.030 --> 00:14:47.190\nIn other words, what we're about to export\nwould be imported on the other side.\n\n314\n00:14:47.190 --> 00:14:49.560\nWe just import the output of the export.\n\n315\n00:14:49.560 --> 00:14:50.290\nDoes that make sense?\n\n316\n00:14:50.290 --> 00:14:51.460\nThe output of the export we import.\n\n317\n00:14:51.460 --> 00:14:52.728\nAnyway, you know what I'm talking about.\n\n318\n00:14:52.728 --> 00:14:53.741\n&gt;&gt; Import of the output\nof the export [LAUGH].\n\n319\n00:14:53.741 --> 00:14:57.018\n&gt;&gt; Exactly, so we're gonna go ahead, we're\ngonna export the Trusted User Domain.\n\n320\n00:14:57.018 --> 00:14:59.800\nJust go ahead,\nwe'll just get this up and running here.\n\n321\n00:14:59.800 --> 00:15:04.470\nWe're gonna specify a location where we're\ngonna put our BIN file or binary file.\n\n322\n00:15:04.470 --> 00:15:07.893\nWe're gonna go ahead and\n\n323\n00:15:07.893 --> 00:15:12.620\nwe're gonna drop this into a UNC,\n\n324\n00:15:12.620 --> 00:15:17.517\nso let's go do plebDM01export.\n\n325\n00:15:17.517 --> 00:15:22.110\nRemember we shared our export folder on\nthe machine in one of the prior demos.\n\n326\n00:15:22.110 --> 00:15:24.590\nWe created an export folder,\nshared it out.\n\n327\n00:15:24.590 --> 00:15:26.650\nEveryone full control so we could use it.\n\n328\n00:15:26.650 --> 00:15:28.730\nThat's what our export folder was for.\n\n329\n00:15:28.730 --> 00:15:31.880\nThis, I should say, is what our export\nfolder was for on the plebDM01 machine.\n\n330\n00:15:31.880 --> 00:15:36.810\nSo we're gonna do that, and then we're\ngonna specify in there that we're gonna\n\n331\n00:15:36.810 --> 00:15:41.880\ncall this practice IT-TUD for\nTrusted User Domain.\n\n332\n00:15:41.880 --> 00:15:47.820\nSo Practice IT-TUD,\nthat will be the name of our BIN file.\n\n333\n00:15:47.820 --> 00:15:52.227\nI'm gonna go ahead,\nwe're gonna click Save, get that in there.\n\n334\n00:15:52.227 --> 00:15:59.263\nAnd so what we got is the following.\n\n335\n00:15:59.263 --> 00:16:03.338\nThat is our See if this\nis the right machine.\n\n336\n00:16:03.338 --> 00:16:04.900\nIs that the DM machine?\n\n337\n00:16:04.900 --> 00:16:06.496\nNope, that's the DC machine.\n\n338\n00:16:06.496 --> 00:16:09.420\nThis is why we put the console names up so\nwe can tell.\n\n339\n00:16:09.420 --> 00:16:11.950\nWhat we want is our DM02 machine.\n\n340\n00:16:11.950 --> 00:16:14.840\nWe want our DM01 machine.\n\n341\n00:16:14.840 --> 00:16:16.750\nThat will be that one.\n\n342\n00:16:20.229 --> 00:16:22.446\nAll right, and right here, in Export,\n\n343\n00:16:22.446 --> 00:16:26.568\nyou'll see now what we just sent across\nthe wire, is sitting right there.\n\n344\n00:16:26.568 --> 00:16:27.963\nThat's our bin file,\n\n345\n00:16:27.963 --> 00:16:33.408\nthat's the exported trusted user-domain\ninformation from the practice IT cluster.\n\n346\n00:16:33.408 --> 00:16:37.180\nThat we're then gonna be able to work\nwith, and ultimately, if we choose to,\n\n347\n00:16:37.180 --> 00:16:40.438\nbring in an import inside this AD RMS\ncluster and practice labs, and\n\n348\n00:16:40.438 --> 00:16:42.410\nthen establish that relationship.\n\n349\n00:16:42.410 --> 00:16:46.578\nAnd that's what we are able to do,\nyou can see that right here, right?\n\n350\n00:16:46.578 --> 00:16:51.430\nSo now we're gonna go in, and\nwe are going to import, right?\n\n351\n00:16:51.430 --> 00:16:54.663\nOr rather, we'll export the trust\nuser domain going the other way, but\n\n352\n00:16:54.663 --> 00:16:55.683\nwe could also import.\n\n353\n00:16:55.683 --> 00:16:59.191\nWe'll get to that in a minute, but\nwe're gonna export the trusted user domain\n\n354\n00:16:59.191 --> 00:17:01.440\ncoming from this cluster\nout to the other one now.\n\n355\n00:17:01.440 --> 00:17:04.060\nSo we're gonna go ahead,\nand we're gonna do this.\n\n356\n00:17:04.060 --> 00:17:06.610\nAnd let's do the following, let's go in.\n\n357\n00:17:06.610 --> 00:17:11.876\nLet's go to our Trusted User,\nTrust Policies, Trusted User Domain.\n\n358\n00:17:11.876 --> 00:17:19.310\nLet's go here, right click,\nexport that, and we're gonna go ahead.\n\n359\n00:17:19.310 --> 00:17:23.990\nAnd we're going to put this in here,\n\n360\n00:17:27.086 --> 00:17:29.998\nLab DM01 export.\n\n361\n00:17:29.998 --> 00:17:33.034\nEven though we're putting\nthis on the local machine,\n\n362\n00:17:33.034 --> 00:17:36.170\nwe're still using the UNC\nto drop it into the share.\n\n363\n00:17:36.170 --> 00:17:38.780\nRight, so that we can export it and\nmake it available.\n\n364\n00:17:38.780 --> 00:17:39.810\nSo we're going to do that.\n\n365\n00:17:39.810 --> 00:17:43.468\nThis one will be our practice labs TUD.\n\n366\n00:17:43.468 --> 00:17:50.620\nSo let's do Practicelabs-trusted\nuser domain.\n\n367\n00:17:50.620 --> 00:17:55.127\nDo that, save that off, and then we'll see\nwe have our practicelabs TUD as well, so\n\n368\n00:17:55.127 --> 00:17:57.492\nwe have both sitting in\nour export area now.\n\n369\n00:17:57.492 --> 00:18:03.880\nWe're now gonna go ahead and we're gonna\nexport our trusted publishing domains.\n\n370\n00:18:03.880 --> 00:18:06.358\nRemember, we talked about having both and\nneeding both.\n\n371\n00:18:06.358 --> 00:18:08.527\nSo we're gonna export that one as well.\n\n372\n00:18:08.527 --> 00:18:11.710\nSo we're gonna go ahead,\nlet's go to our trust publishing domain.\n\n373\n00:18:13.270 --> 00:18:14.370\nAgain, same idea,\n\n374\n00:18:14.370 --> 00:18:18.068\nwe can import here if required to\njust by right clicking on the root.\n\n375\n00:18:18.068 --> 00:18:18.931\nWe have our named instance.\n\n376\n00:18:18.931 --> 00:18:22.190\nWe'll go down here, and\nwe'll do our export.\n\n377\n00:18:23.830 --> 00:18:27.898\nSo we're gonna go ahead,\ndo our export here.\n\n378\n00:18:27.898 --> 00:18:34.215\nAnd we're gonna do a Save As,\nand were gonna specify our path.\n\n379\n00:18:34.215 --> 00:18:35.579\nSame path we've been using,\n\n380\n00:18:35.579 --> 00:18:38.263\nexcept this is gonna be an XML\nfile as opposed to a bin file.\n\n381\n00:18:38.263 --> 00:18:40.375\nSo we're gonna have\na different format here.\n\n382\n00:18:40.375 --> 00:18:44.181\nLet's go in, and let's do the follow.\n\n383\n00:18:44.181 --> 00:18:47.744\nPlabmd01, and\n\n384\n00:18:47.744 --> 00:18:53.211\nwe're going to do Export.\n\n385\n00:18:53.211 --> 00:18:56.903\nAnd we are going to do our practice labs.\n\n386\n00:18:56.903 --> 00:19:01.805\nAnd instead of TUD for\ntrusted user domain,\n\n387\n00:19:01.805 --> 00:19:06.740\nTPD, trusted publishing domain.\n\n388\n00:19:06.740 --> 00:19:09.630\nAll right, so we've got that,\nwe're doing that, we'll click Save.\n\n389\n00:19:09.630 --> 00:19:17.199\nPlabmd01export, did I not\nspell that correctly?\n\n390\n00:19:17.199 --> 00:19:18.156\nPlabdm not md.\n\n391\n00:19:18.156 --> 00:19:20.012\nThat's why, I am an idiot.\n\n392\n00:19:20.012 --> 00:19:24.666\nHit Cancel, all right,\nlet's try that one more time.\n\n393\n00:19:24.666 --> 00:19:26.820\nAnd let's actually specify, there we go.\n\n394\n00:19:26.820 --> 00:19:29.790\nThat we connect to a machine that exists.\n\n395\n00:19:29.790 --> 00:19:32.050\nAs oppose to one that\ndoes not exist [LAUGH].\n\n396\n00:19:32.050 --> 00:19:33.160\nAll right, let's try that.\n\n397\n00:19:33.160 --> 00:19:34.318\nThat ought to work a little bit better.\n\n398\n00:19:34.318 --> 00:19:36.542\nAll right, we got that, and\n\n399\n00:19:36.542 --> 00:19:41.100\nwe're gonna put our password\nin there just to confirm it.\n\n400\n00:19:48.565 --> 00:19:49.523\nThird time's a charm, okay.\n\n401\n00:19:49.523 --> 00:19:55.345\nI need a typing eye human\nwho can just type for me.\n\n402\n00:19:55.345 --> 00:19:56.481\n&gt;&gt; [LAUGH] Typing eye.\n\n403\n00:19:56.481 --> 00:19:57.823\nThat was good, I like that.\n\n404\n00:19:57.823 --> 00:19:58.497\n&gt;&gt; You like that?\n\n405\n00:19:58.497 --> 00:20:00.209\nCuz that's something,\nthat's exactly what I need, right?\n\n406\n00:20:00.209 --> 00:20:01.830\nI really do need that.\n\n407\n00:20:01.830 --> 00:20:03.794\nAll right, so we've set that up.\n\n408\n00:20:03.794 --> 00:20:05.824\nWe've gone ahead, we've exported that.\n\n409\n00:20:05.824 --> 00:20:07.703\nNow, what we're gonna do is go over, and\n\n410\n00:20:07.703 --> 00:20:11.000\nwe're gonna export the trusted\npublishing domain from the other side.\n\n411\n00:20:11.000 --> 00:20:12.840\nLet's just take a look real quick,\nbefore we go.\n\n412\n00:20:12.840 --> 00:20:16.865\nYou'll see we now have our XML file for\nthe trusted publishing domain,\n\n413\n00:20:16.865 --> 00:20:18.152\nfrom practiced labs.\n\n414\n00:20:18.152 --> 00:20:19.250\nThat's sitting there.\n\n415\n00:20:19.250 --> 00:20:20.848\nLet's go back over here.\n\n416\n00:20:20.848 --> 00:20:24.530\nLet's go here, and\n\n417\n00:20:24.530 --> 00:20:29.596\nlet's go, Oops,\nthat's a bad idea, wrong console.\n\n418\n00:20:29.596 --> 00:20:36.180\nThat's the one I want, plabdm01.\n\n419\n00:20:36.180 --> 00:20:40.116\nNope, we need plab,\nI had it right the first time.\n\n420\n00:20:40.116 --> 00:20:41.794\nThat one right there, all right, plabsa1,\n\n421\n00:20:41.794 --> 00:20:43.524\nwe're export our trusted\npublishing domain.\n\n422\n00:20:43.524 --> 00:20:46.132\nIt's hard to keep track of all this stuff.\n\n423\n00:20:46.132 --> 00:20:48.312\nAll right, there we go.\n\n424\n00:20:48.312 --> 00:20:54.498\nLet's do Save As and let's go ahead,\nlet's put in our path.\n\n425\n00:20:54.498 --> 00:21:00.690\nAnd we are going to do,\njust make sure I know what it is.\n\n426\n00:21:00.690 --> 00:21:09.260\nAnd practice ITTBD, all right, so\nwe're gonna do plabmd or dm, rather,\n\n427\n00:21:09.260 --> 00:21:14.895\n01 and export and then practice.\n\n428\n00:21:14.895 --> 00:21:18.350\nIT-TPD for trust publishing domain,\n\n429\n00:21:18.350 --> 00:21:23.320\ngot our practice labs one there,\ngonna do this one and click Save.\n\n430\n00:21:23.320 --> 00:21:24.689\nPut our password in there.\n\n431\n00:21:30.640 --> 00:21:32.992\nAll right, and click Finish.\n\n432\n00:21:32.992 --> 00:21:35.536\nAnd we've got that all set up.\n\n433\n00:21:35.536 --> 00:21:36.550\nAll right, good.\n\n434\n00:21:36.550 --> 00:21:38.694\nSo now, once we've done all that,\n\n435\n00:21:38.694 --> 00:21:42.986\nwe have to import the trusted user\ndomain policy from the other domain.\n\n436\n00:21:42.986 --> 00:21:44.720\nSo now we've exported everything.\n\n437\n00:21:44.720 --> 00:21:48.988\nNow we've gotta bring it all in and cross\nwires so we can start talking, right?\n\n438\n00:21:48.988 --> 00:21:50.816\nKeeping track of all this,\nby the way, right?\n\n439\n00:21:50.816 --> 00:21:52.912\n[COUGH]\n&gt;&gt; I've got my pad and paper out.\n\n440\n00:21:52.912 --> 00:21:54.704\n[LAUGH]\n&gt;&gt; Gotta, you know?\n\n441\n00:21:54.704 --> 00:21:58.496\nSo one trusts two but not three,\nexcept when four is in the picture.\n\n442\n00:21:58.496 --> 00:21:59.984\n&gt;&gt; On days that end in Y.\n\n443\n00:21:59.984 --> 00:22:01.531\n[LAUGH]\n&gt;&gt; My god, all right, so\n\n444\n00:22:01.531 --> 00:22:02.288\nhere's what we're gonna do.\n\n445\n00:22:02.288 --> 00:22:05.437\nWe're gonna go back over to plabdm01, so\n\n446\n00:22:05.437 --> 00:22:10.386\nlet me just switch over to our other\nmachine, which will be this one.\n\n447\n00:22:10.386 --> 00:22:12.502\nAnd just minimize that so\nwe know where we are.\n\n448\n00:22:12.502 --> 00:22:16.052\nAll right, and what we're gonna do is\ngonna import our trusted user domain.\n\n449\n00:22:16.052 --> 00:22:17.716\nSo, let's go ahead and do that.\n\n450\n00:22:17.716 --> 00:22:20.950\nSo, let's go up here, trusted user domain.\n\n451\n00:22:20.950 --> 00:22:23.640\nWe'll wind up seeing it show up here,\nby the way, once we're done.\n\n452\n00:22:23.640 --> 00:22:27.160\nAll right, we're gonna import.\n\n453\n00:22:27.160 --> 00:22:31.562\nWe have to go browse for the trusted\nusername file or trusted domain file,\n\n454\n00:22:31.562 --> 00:22:32.138\nrather.\n\n455\n00:22:32.138 --> 00:22:37.456\nSo were gonna browse, plab.\n\n456\n00:22:37.456 --> 00:22:41.441\nPlabdm01export, and\n\n457\n00:22:41.441 --> 00:22:45.994\nthen, practice IT-TUD for\n\n458\n00:22:45.994 --> 00:22:50.548\ntrusted user domain .bin is\n\n459\n00:22:50.548 --> 00:22:55.682\nthe file that we wanna bring in.\n\n460\n00:22:55.682 --> 00:23:02.060\nWe're gonna give it a display name of\nPractice IT, so that we know what it is.\n\n461\n00:23:02.060 --> 00:23:06.075\nSo when we have our path correct and\n\n462\n00:23:06.075 --> 00:23:10.786\nassuming that nothing is, there we go.\n\n463\n00:23:10.786 --> 00:23:11.912\nOkay, like I said,\nassuming our path is correct.\n\n464\n00:23:11.912 --> 00:23:14.200\n[LAUGH]\n&gt;&gt; [LAUGH] That's a big assumption here.\n\n465\n00:23:14.200 --> 00:23:18.602\n&gt;&gt; All right, let's just go in and\ngrab it, Practice IT, TUD.bin.\n\n466\n00:23:18.602 --> 00:23:20.202\nAll right, we'll just go ahead and\ngrab that.\n\n467\n00:23:20.202 --> 00:23:21.850\nAll right, so we got that.\n\n468\n00:23:21.850 --> 00:23:22.922\nIt is a big assumption.\n\n469\n00:23:22.922 --> 00:23:23.944\nLet's click Finish, there we go.\n\n470\n00:23:23.944 --> 00:23:25.146\nNow we're successful.\n\n471\n00:23:25.146 --> 00:23:26.572\nI'm just never typing, I'm giving it up.\n\n472\n00:23:26.572 --> 00:23:28.284\nI'm just gonna figure out how\nto get by without typing.\n\n473\n00:23:28.284 --> 00:23:30.014\nI'm just going to get by without typing.\n\n474\n00:23:30.014 --> 00:23:32.302\nAll right, so\nPractice IT has now been imported.\n\n475\n00:23:32.302 --> 00:23:36.543\nSo our trusted user domain information\nis now configured on both,\n\n476\n00:23:36.543 --> 00:23:39.886\nor rather both domains\nconfigured in this cluster.\n\n477\n00:23:39.886 --> 00:23:42.622\nNow, what we have to do is,\nof course, go over to the other side.\n\n478\n00:23:42.622 --> 00:23:47.503\nAnd we have to import our trusted user\ndomain in the other cluster to make sure\n\n479\n00:23:47.503 --> 00:23:49.880\nthat they are able to see each other.\n\n480\n00:23:49.880 --> 00:23:51.798\nSo we're gonna go do that.\n\n481\n00:23:51.798 --> 00:23:56.860\nLet's come over here, and\nlet's do the same thing.\n\n482\n00:23:56.860 --> 00:23:58.852\nGo to trusted user domain.\n\n483\n00:23:58.852 --> 00:24:03.590\nGo ahead, import our trusted domain,\nlet's just go browse.\n\n484\n00:24:03.590 --> 00:24:08.300\nAnd on this one, we are going\nto be importing practice labs,\n\n485\n00:24:08.300 --> 00:24:10.520\nso we'll do practice labs.\n\n486\n00:24:10.520 --> 00:24:15.335\nLet's just do our, Display name for\n\n487\n00:24:15.335 --> 00:24:18.479\nthat, so we'll do practice labs.\n\n488\n00:24:20.295 --> 00:24:23.852\nWait, I was gonna use that\ndelete trick you showed me, but\n\n489\n00:24:23.852 --> 00:24:28.000\nI'm not feeling confident, so\nI'm just gonna do that real quick.\n\n490\n00:24:28.000 --> 00:24:30.220\nAll right, so\nwe got practice lab sitting there.\n\n491\n00:24:30.220 --> 00:24:32.780\nSo we've imported our\ntrusted user domains,\n\n492\n00:24:32.780 --> 00:24:35.120\nnow we have to import our\ntrusted publishing domains.\n\n493\n00:24:35.120 --> 00:24:37.646\nAnd you guys said you wanted\nto learn how to set up AD RMS.\n\n494\n00:24:39.180 --> 00:24:40.790\n&gt;&gt; That was the point of this whole show.\n\n495\n00:24:40.790 --> 00:24:41.713\n&gt;&gt; This is the whole point.\n\n496\n00:24:41.713 --> 00:24:42.323\n&gt;&gt; [LAUGH]\n&gt;&gt; So, but\n\n497\n00:24:42.323 --> 00:24:46.851\nyou didn't know it would take four hours\nand you'd have to actually pack a lunch\n\n498\n00:24:46.851 --> 00:24:51.060\nand make sure you told people you weren't\ngonna be back for at least a day.\n\n499\n00:24:51.060 --> 00:24:53.940\nAll right, so we're gonna import\nour trusted publishing domains.\n\n500\n00:24:53.940 --> 00:24:58.450\nSo, since we're sitting over here on SA,\nlet's go ahead and\n\n501\n00:24:58.450 --> 00:25:00.724\nwe'll just import from here.\n\n502\n00:25:00.724 --> 00:25:05.036\nWe're gonna import our\npractice labs into here, so\n\n503\n00:25:05.036 --> 00:25:09.070\nlet's go to trusted publishing domain.\n\n504\n00:25:09.070 --> 00:25:13.070\nLet's go ahead, let's import\nthe trusted publishing domain.\n\n505\n00:25:13.070 --> 00:25:14.310\nLet's go grab that.\n\n506\n00:25:15.430 --> 00:25:17.980\nAnd we're gonna do practice labs.\n\n507\n00:25:19.370 --> 00:25:25.080\nAnd we're gonna put in our password and\nour display name.\n\n508\n00:25:27.958 --> 00:25:32.220\nSo we know what that is,\nlet's click Finish.\n\n509\n00:25:32.220 --> 00:25:36.191\nOkay, so that's our trust publishing\ndomain being imported as kind\n\n510\n00:25:36.191 --> 00:25:39.897\nof step two of the process of\nlinking our two clusters together.\n\n511\n00:25:39.897 --> 00:25:42.070\nWe're gonna go back over\nto the other cluster and\n\n512\n00:25:42.070 --> 00:25:44.200\nimport our trusted publishing domain.\n\n513\n00:25:44.200 --> 00:25:46.211\nSo, we're gonna go do that right now.\n\n514\n00:25:46.211 --> 00:25:51.590\nLet's go over here, go practice IT or\nimport practice IT I should say.\n\n515\n00:25:51.590 --> 00:25:55.362\nSo we'll go here, do this,\n\n516\n00:25:55.362 --> 00:26:00.881\ndo practice IT and specify our password.\n\n517\n00:26:00.881 --> 00:26:05.528\nAnd we'll do, Boy,\n\n518\n00:26:05.528 --> 00:26:07.797\nI can really mangle practice-\n&gt;&gt; [LAUGH]\n\n519\n00:26:07.797 --> 00:26:09.276\n&gt;&gt; When I said out to you, boy,\n\n520\n00:26:09.276 --> 00:26:11.575\nI'll tell you, it's a gift, it is a gift.\n\n521\n00:26:11.575 --> 00:26:15.061\nAll right, so we've got practice IT,\nour trusted publishing\n\n522\n00:26:15.061 --> 00:26:19.551\ndomain imported here as well as on the\nother side, we've got them set up on both.\n\n523\n00:26:19.551 --> 00:26:23.638\nSo, now that we have all of that\nconfigured set up, ready to go,\n\n524\n00:26:23.638 --> 00:26:27.274\nwe have built out our ability for\nour two clusters to begin\n\n525\n00:26:27.274 --> 00:26:32.020\nto exchange information and\nstart communicating with one another.\n\n526\n00:26:32.020 --> 00:26:35.980\nWe got to allow anonymous access\ninto the AD RMS licensing server.\n\n527\n00:26:35.980 --> 00:26:41.350\nSo we're gonna go ahead, we're gonna set\nthat up right now and then, this involves\n\n528\n00:26:41.350 --> 00:26:45.855\nus going and in going to the web server\nand modifying the access control there.\n\n529\n00:26:45.855 --> 00:26:49.170\nBecause remember, we are underpinning\nall this with the web server and\n\n530\n00:26:49.170 --> 00:26:51.260\nthe web server is where we're\ngonna go to configure this piece.\n\n531\n00:26:51.260 --> 00:26:55.505\nSo, we're gonna go in, we're gonna\nminimize our AD RMS solution here,\n\n532\n00:26:55.505 --> 00:26:57.431\njust bring that down real quick.\n\n533\n00:26:57.431 --> 00:26:59.670\nJust bring up our Server Manager.\n\n534\n00:26:59.670 --> 00:27:01.550\nLet's go in here and go to Tools.\n\n535\n00:27:01.550 --> 00:27:02.803\nLet's go into IIS.\n\n536\n00:27:02.803 --> 00:27:05.140\nWe'll give this a moment just to open up.\n\n537\n00:27:05.140 --> 00:27:07.314\nAnd let's just extend that out.\n\n538\n00:27:07.314 --> 00:27:08.960\nLet's go over here to our default site.\n\n539\n00:27:11.755 --> 00:27:14.180\nNow, on our little prompt there.\n\n540\n00:27:14.180 --> 00:27:17.996\nAll right, so on our default site,\nlet's open that up.\n\n541\n00:27:17.996 --> 00:27:19.813\nWe'll see have _wmcs, so\n\n542\n00:27:19.813 --> 00:27:24.870\nthat's what the directory is that\nwe're gonna go pay attention to.\n\n543\n00:27:24.870 --> 00:27:29.690\nSo, we're gonna go in here,\nright-click, and we are gonna go in and\n\n544\n00:27:29.690 --> 00:27:32.300\nwe are gonna switch to content view.\n\n545\n00:27:32.300 --> 00:27:35.850\nJust do that so we can see all of\nthe different information in here.\n\n546\n00:27:35.850 --> 00:27:37.645\nWe see the applications\nthat are running and\n\n547\n00:27:37.645 --> 00:27:42.300\nwhat we're gonna do is we're\ngonna go into the licensing area.\n\n548\n00:27:42.300 --> 00:27:47.802\nSo let's go in here and\nlet's just double-click on licensing.\n\n549\n00:27:47.802 --> 00:27:49.240\nWe'll open that up.\n\n550\n00:27:49.240 --> 00:27:53.715\nJust take a look at what's in there,\nand we're looking for\n\n551\n00:27:53.715 --> 00:27:58.383\nour service locator ASMX file,\nwhich is sitting right here.\n\n552\n00:27:58.383 --> 00:28:00.920\nAnd we're gonna switch\nover to features view.\n\n553\n00:28:00.920 --> 00:28:04.060\nWe wanted to modify this, so we are just\ngonna go back here essentially.\n\n554\n00:28:04.060 --> 00:28:07.730\nWhat we did is just toggle the console\nback and forth, so we could pull up\n\n555\n00:28:07.730 --> 00:28:11.510\nthe directory, pull up the specific\npage that we want to operate on.\n\n556\n00:28:11.510 --> 00:28:14.722\nGo back to features view,\nwhich lets us see all the bells and\n\n557\n00:28:14.722 --> 00:28:17.240\nwhistles and items so\nthat we can manipulate.\n\n558\n00:28:17.240 --> 00:28:20.503\nAnd we're gonna go in, and we're gonna\ngo to the authentication item and\n\n559\n00:28:20.503 --> 00:28:23.440\nwe're gonna then actually\nmodify authentication, right?\n\n560\n00:28:23.440 --> 00:28:26.800\nSo, we're gonna find authentication\nsitting right here and then we're gonna go\n\n561\n00:28:26.800 --> 00:28:30.940\nin and we're going to open this up, so\nwe can modify the permissions here and\n\n562\n00:28:30.940 --> 00:28:33.320\nspecify what kind of\nauthentication we want.\n\n563\n00:28:33.320 --> 00:28:37.680\nAnd since we want anonymous, we have\nto go here and we have to enable it.\n\n564\n00:28:37.680 --> 00:28:39.910\nSo, we highlight it, choose enable here.\n\n565\n00:28:41.300 --> 00:28:44.950\nTurns itself on, doesn't really require\nanything significant literally,\n\n566\n00:28:44.950 --> 00:28:49.110\njust turns itself on and then, you could\nsee it is enabled and ready to go, okay?\n\n567\n00:28:49.110 --> 00:28:54.010\nSo, that's how we enable the anonymous\nauthentication into the licensing server.\n\n568\n00:28:54.010 --> 00:28:57.583\nThen, what we will need to do and\nwe're not gonna subject you to this part,\n\n569\n00:28:57.583 --> 00:29:00.723\nI'm just gonna tell you about it cuz\nit is not a lot of fun to watch.\n\n570\n00:29:00.723 --> 00:29:04.418\nBut we're gonna install Office on our\nclient that we're gonna use to ultimately\n\n571\n00:29:04.418 --> 00:29:06.160\nstart accessing content.\n\n572\n00:29:06.160 --> 00:29:09.350\nI don't think you need to watch us\ninstall Office, it's not very exciting.\n\n573\n00:29:09.350 --> 00:29:13.589\nSo, we are gonna take care of that while\nyou guys get to kick your legs up,\n\n574\n00:29:13.589 --> 00:29:16.521\ntake a small break and\nprep yourself for our part-\n\n575\n00:29:16.521 --> 00:29:17.067\n&gt;&gt; Four.\n\n576\n00:29:17.067 --> 00:29:20.915\n&gt;&gt; Four episode, our next episode, our\npart four, where we're gonna come back,\n\n577\n00:29:20.915 --> 00:29:23.973\nand we are gonna finish up not\nonly the configuration of Office,\n\n578\n00:29:23.973 --> 00:29:26.996\nwe'll have all that set and\nready to go before you join us back.\n\n579\n00:29:26.996 --> 00:29:29.592\nBut we're gonna take that and\nwe're gonna show you the client side and\n\n580\n00:29:29.592 --> 00:29:31.090\nstart interacting with some contents.\n\n581\n00:29:31.090 --> 00:29:33.897\nWe're gonna put all those\nlast little vestiges and\n\n582\n00:29:33.897 --> 00:29:37.950\npieces together to round out our\nconversation on how to configure AD RMS.\n\n583\n00:29:37.950 --> 00:29:42.413\n&gt;&gt; Man, AD RMS is like the Klingon second\nright of ascension where they hit you with\n\n584\n00:29:42.413 --> 00:29:43.221\npain sticks.\n\n585\n00:29:43.221 --> 00:29:46.095\nIt's a lot of work and a lot of trouble,\nbut at the end of the day,\n\n586\n00:29:46.095 --> 00:29:47.108\nyou're better off for\n\n587\n00:29:47.108 --> 00:29:51.110\nit because well you get to employee rights\nmanagement which is a very cool thing.\n\n588\n00:29:51.110 --> 00:29:54.330\nYes, it is a lot of work and\nwe are rolling into our part four, but\n\n589\n00:29:54.330 --> 00:29:58.350\nstick with us, the culmination is\ncoming in our next part of the series,\n\n590\n00:29:58.350 --> 00:29:59.795\nso definitely join us back for that.\n\n591\n00:29:59.795 --> 00:30:01.190\nAdam, thanks for getting us this far,\n\n592\n00:30:01.190 --> 00:30:04.030\nlooking forward to seeing\nyou at the station.\n\n593\n00:30:04.030 --> 00:30:07.135\nThat being said, it's time for\nus to sign off for ITProTV.\n\n594\n00:30:07.135 --> 00:30:09.641\nI've been your host, Daniel Lowrie.\n\n595\n00:30:09.641 --> 00:30:14.820\n&gt;&gt; That would be me, I'm the AD RMS guy,\notherwise known as Adam.\n\n596\n00:30:14.820 --> 00:30:16.624\n&gt;&gt; Yeah, we'll see you next time.\n\n597\n00:30:16.624 --> 00:30:23.636\n[MUSIC]\n\n598\n00:30:23.636 --> 00:30:26.747\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "213661427"
        },
        {
          "description": "In this episode, Daniel and Adam finish their demonstration of configuring Active Directory Rights Management Services. Here they will take all the concepts that you've been learning and walk you through the setup involved in standing up a AD-RMS system.",
          "length": "816",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-4-configuring_ad-rms_pt4-041417-PGM.00_00_11_25.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-4-configuring_ad-rms_pt4-041417-PGM.00_00_11_25.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/mcse70414/mcse-windows-server-2012-4-7-4-configuring_ad-rms_pt4-041417-PGM.00_00_11_25.Still001-sm.jpg",
          "title": "Configuring AD-RMS Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.250 --> 00:00:02.890\nWelcome to ITProTV,\nI'm your host Don Pezet,\n\n2\n00:00:02.890 --> 00:00:05.861\ncoming at you live from San Francisco,\nCalifornia.\n\n3\n00:00:05.861 --> 00:00:06.667\n[CROSSTALK]\n\n4\n00:00:06.667 --> 00:00:08.517\n[MUSIC]\n\n5\n00:00:08.517 --> 00:00:12.118\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.118 --> 00:00:14.155\n&gt;&gt; All right, greetings everyone, and\n\n7\n00:00:14.155 --> 00:00:17.470\nwelcome back to another\ngreat episode of ITProTV.\n\n8\n00:00:17.470 --> 00:00:20.040\nI'm your host Daniel Lowrie,\nand in today's episode,\n\n9\n00:00:20.040 --> 00:00:23.250\nwell you guessed it,\nwe're back with more 7414.\n\n10\n00:00:23.250 --> 00:00:25.988\nAnd the disembodied hand\nfloating around in front of me,\n\n11\n00:00:25.988 --> 00:00:28.906\nis actually attached to our good friend,\nMr. Adam Gordon.\n\n12\n00:00:28.906 --> 00:00:30.162\n[LAUGH] And there he is.\n\n13\n00:00:30.162 --> 00:00:31.294\n[LAUGH]\n&gt;&gt; Part four.\n\n14\n00:00:31.294 --> 00:00:31.904\n&gt;&gt; Part four.\n\n15\n00:00:31.904 --> 00:00:34.020\n&gt;&gt; All right, so we are back.\n\n16\n00:00:34.020 --> 00:00:35.610\nThank you for inviting me to finish up.\n\n17\n00:00:35.610 --> 00:00:38.066\nCuz lord knows, if I didn't come back,\nyou'd have to do the last part.\n\n18\n00:00:38.066 --> 00:00:38.833\n&gt;&gt; And that would be interesting.\n\n19\n00:00:38.833 --> 00:00:40.553\n&gt;&gt; We were talking about how much\nfun you were having with RMS.\n\n20\n00:00:40.553 --> 00:00:46.471\nSo, we are gonna wrap up our mega\nmarathon manipulation of ADRMS.\n\n21\n00:00:46.471 --> 00:00:48.326\nThat was a new one right there.\n\n22\n00:00:48.326 --> 00:00:50.516\nMega marathon manipulation [CROSSTALK]\n&gt;&gt; We gotta start-\n\n23\n00:00:50.516 --> 00:00:51.563\n&gt;&gt; We got to write these down and\n\n24\n00:00:51.563 --> 00:00:52.310\nkeep track of them.\n\n25\n00:00:52.310 --> 00:00:53.249\n[CROSSTALK]\n&gt;&gt; Yeah, we got to, we got to.\n\n26\n00:00:53.249 --> 00:00:54.184\n[CROSSTALK]\n&gt;&gt; They're there.\n\n27\n00:00:54.184 --> 00:00:55.227\n[CROSSTALK] We do have them, right.\n\n28\n00:00:55.227 --> 00:00:56.632\nWe have to go back and listen to them.\n\n29\n00:00:56.632 --> 00:00:57.879\n&gt;&gt; [LAUGH]\n&gt;&gt; So we are gonna wrap up with\n\n30\n00:00:57.879 --> 00:00:58.416\npart four here.\n\n31\n00:00:58.416 --> 00:01:01.516\nIt's gonna be a slightly smaller\ntimeline than the others,\n\n32\n00:01:01.516 --> 00:01:04.060\nbecause we've done all the heavy lifting.\n\n33\n00:01:04.060 --> 00:01:07.610\nWe've linked our trusted user and\ntrusted publishing domains.\n\n34\n00:01:07.610 --> 00:01:11.860\nWe've extending them, and exported and\nimported to create our ability for\n\n35\n00:01:11.860 --> 00:01:13.470\nour two clusters to talk.\n\n36\n00:01:13.470 --> 00:01:16.060\nWhat we've done now,\nis gone to our Windows 8 client.\n\n37\n00:01:16.060 --> 00:01:17.480\nWe've installed Office 2013.\n\n38\n00:01:17.480 --> 00:01:20.680\nI told you while you were taking a break,\nwe were gonna take care of all that.\n\n39\n00:01:20.680 --> 00:01:23.040\nWe've logged on as one of our users.\n\n40\n00:01:23.040 --> 00:01:27.750\nWe've opened up, I should say I've opened\nup, a document, typed in some text,\n\n41\n00:01:27.750 --> 00:01:28.720\nwe've saved it off.\n\n42\n00:01:28.720 --> 00:01:33.139\nWe're now gonna show you how to apply\nthe rights management services and\n\n43\n00:01:33.139 --> 00:01:38.283\ntemplates to a document, and show you what\nthe client side of the ADRMS solution is,\n\n44\n00:01:38.283 --> 00:01:41.480\nas we pretend we are an author or\ncreator of content.\n\n45\n00:01:41.480 --> 00:01:42.700\nSo let's take a look.\n\n46\n00:01:42.700 --> 00:01:44.690\nWe're using Office 13 by the way.\n\n47\n00:01:44.690 --> 00:01:45.880\nWindows 8.\n\n48\n00:01:45.880 --> 00:01:48.100\nSo [COUGH] we are gonna go in.\n\n49\n00:01:48.100 --> 00:01:49.690\nWe are running Office.\n\n50\n00:01:49.690 --> 00:01:50.580\nWe're gonna go to file here.\n\n51\n00:01:50.580 --> 00:01:52.773\nWell, you could see I just typed in,\nthis is a test, and\n\n52\n00:01:52.773 --> 00:01:54.440\njust saved off the document.\n\n53\n00:01:54.440 --> 00:01:56.607\nSo now, what we're gonna do,\nis the following.\n\n54\n00:01:56.607 --> 00:01:59.141\nWe're gonna go in to File.\n\n55\n00:01:59.141 --> 00:02:02.735\nAnd we're gonna go to Protect document,\npull this down right here.\n\n56\n00:02:02.735 --> 00:02:04.275\nRestrict access, and\n\n57\n00:02:04.275 --> 00:02:07.205\nconnect to digital rights management\nserver, and get templates.\n\n58\n00:02:07.205 --> 00:02:08.675\nSo we're gonna click there,\n\n59\n00:02:08.675 --> 00:02:12.555\ngive that just a second,\nretrieving our template from the server.\n\n60\n00:02:16.296 --> 00:02:16.859\nLet's just wait a moment.\n\n61\n00:02:16.859 --> 00:02:20.060\nWe may get an error here, we may have to\nchange the network settings to connect.\n\n62\n00:02:20.060 --> 00:02:22.060\nSo we'll give it a minute to see\nif we're going to error out.\n\n63\n00:02:22.060 --> 00:02:23.670\nIf we're not, we don't,\nthen we'll be good.\n\n64\n00:02:23.670 --> 00:02:27.420\nIf we do, we'll just go and we'll modify\nour network settings really quickly, so\n\n65\n00:02:27.420 --> 00:02:29.190\nwe can connect out.\n\n66\n00:02:29.190 --> 00:02:30.850\nAnd then we'll able to get in.\n\n67\n00:02:30.850 --> 00:02:31.385\nThere we go.\n\n68\n00:02:31.385 --> 00:02:35.040\nOkay yeah, so we may get the error,\ncuz I didn't change the network settings.\n\n69\n00:02:35.040 --> 00:02:38.097\nJust wanted you to see this, cuz a lot\nof times if you're not connected,\n\n70\n00:02:38.097 --> 00:02:40.853\nyou don't have the rights, or\nrather not the rights rather, but\n\n71\n00:02:40.853 --> 00:02:43.961\nif we don't have the right network\nsettings to connect out to the server,\n\n72\n00:02:43.961 --> 00:02:46.251\nthat we're not gonna be able\nto get this part to work.\n\n73\n00:02:46.251 --> 00:02:47.436\nSo that is the area you would see.\n\n74\n00:02:47.436 --> 00:02:48.772\nSo we're gonna fix that right now.\n\n75\n00:02:48.772 --> 00:02:51.985\nWe're gonna go in, and\nwe're gonna specify our connection.\n\n76\n00:02:51.985 --> 00:02:54.484\nLet's just go here, open Network settings.\n\n77\n00:02:54.484 --> 00:02:56.538\nYou don't see me clicking on that,\n\n78\n00:02:56.538 --> 00:02:59.830\nthat's just a little network\ncard icon on the task tray.\n\n79\n00:02:59.830 --> 00:03:01.651\nI'm sure you guys are familiar with that.\n\n80\n00:03:01.651 --> 00:03:06.632\nWe're gonna come over here,\nwe're gonna go into our Internet Options.\n\n81\n00:03:06.632 --> 00:03:07.920\nGonna go over here.\n\n82\n00:03:07.920 --> 00:03:11.460\nGonna go to our Connect area.\n\n83\n00:03:11.460 --> 00:03:14.160\nAnd oops, that's Connections, not Content.\n\n84\n00:03:14.160 --> 00:03:15.685\nGo to our LAN Settings.\n\n85\n00:03:15.685 --> 00:03:17.462\nAnd we're just gonna go\ninto our Proxy area there.\n\n86\n00:03:17.462 --> 00:03:23.070\nWe're gonna modify this,\nand bypass for local.\n\n87\n00:03:23.070 --> 00:03:24.076\nSo let's go in there.\n\n88\n00:03:26.396 --> 00:03:30.095\nUndo that, and then we're gonna click OK.\n\n89\n00:03:30.095 --> 00:03:35.171\nAnd we're just gonna modify our\nlocal Intranet settings here.\n\n90\n00:03:35.171 --> 00:03:39.109\nAnd we are going to go in, and\nwe're gonna click on Sites.\n\n91\n00:03:39.109 --> 00:03:44.338\nAnd we're just gonna make sure we\nhave that configured the right way.\n\n92\n00:03:44.338 --> 00:03:48.910\nAutomatically detect Intranet networks,\ndo that, let's go in there,\n\n93\n00:03:48.910 --> 00:03:51.710\nlet's click Advanced real quick.\n\n94\n00:03:51.710 --> 00:03:55.950\nAnd let's just put in our solution here.\n\n95\n00:03:55.950 --> 00:03:58.840\nThis is a function of our lab environment,\nby the way.\n\n96\n00:03:58.840 --> 00:04:01.805\nThis is not necessarily something\nyou'd have to do in the real world.\n\n97\n00:04:01.805 --> 00:04:05.362\nBut if you were sitting in a remote\nnetwork, and you had a proxy, and or\n\n98\n00:04:05.362 --> 00:04:09.526\nsome sort of connection that required you\nto authenticate going outbound against\n\n99\n00:04:09.526 --> 00:04:12.183\na certain structure involving proxies or\nlookups,\n\n100\n00:04:12.183 --> 00:04:16.500\nyou'd have to manipulate the settings in\norder to make sure you're able to do that.\n\n101\n00:04:16.500 --> 00:04:17.490\nThat's what we're doing here.\n\n102\n00:04:17.490 --> 00:04:19.820\nSo, this may or not work for\nyou in the real world.\n\n103\n00:04:19.820 --> 00:04:22.320\nYou may not have to do this\npart in the real world.\n\n104\n00:04:22.320 --> 00:04:24.250\nBut we just want to make\nsure that if you do,\n\n105\n00:04:24.250 --> 00:04:27.000\nat least you see the logic\nof why we're doing it.\n\n106\n00:04:27.000 --> 00:04:30.640\nWe're just putting in\nthe practicelabs.com domain, so\n\n107\n00:04:30.640 --> 00:04:35.060\nthat way anything that comes up with\nthat will be recognized and allowed.\n\n108\n00:04:35.060 --> 00:04:38.830\nWe're gonna put that in,\njust make sure we spelled that correctly.\n\n109\n00:04:38.830 --> 00:04:41.520\nClick Add, make sure that it's there.\n\n110\n00:04:41.520 --> 00:04:47.143\nAnd then we're gonna put in our HTTPS for\nthat as well.\n\n111\n00:04:47.143 --> 00:04:51.607\nSo let's just do HTTPS, and\n\n112\n00:04:51.607 --> 00:04:57.934\nwe'll do our *.practicelabs.com.\n\n113\n00:04:57.934 --> 00:05:03.150\nAnd we will click Add,\nmake sure both of those are there.\n\n114\n00:05:03.150 --> 00:05:06.870\nAnd then we will click Close, and\n\n115\n00:05:06.870 --> 00:05:11.400\nwe will click OK, and we will click OK,\nand then we should be good.\n\n116\n00:05:11.400 --> 00:05:14.350\nLet's close the Sharing Center,\nand then we'll go ahead.\n\n117\n00:05:14.350 --> 00:05:16.044\nWe'll go back into there.\n\n118\n00:05:16.044 --> 00:05:17.586\nLet's try this one more time.\n\n119\n00:05:17.586 --> 00:05:22.074\nAnd let's do that, let's do that.\n\n120\n00:05:22.074 --> 00:05:24.740\nGive that just a moment.\n\n121\n00:05:24.740 --> 00:05:26.130\nShouldn't have to restart that.\n\n122\n00:05:26.130 --> 00:05:30.702\nWe should just be able to do it\nwithout having to restart, but\n\n123\n00:05:30.702 --> 00:05:33.581\nlet's just take a look and make sure.\n\n124\n00:05:35.055 --> 00:05:35.864\nGet our template to come down.\n\n125\n00:05:37.740 --> 00:05:40.320\nSometimes you have to restart Word\nto get it to pick up the changes.\n\n126\n00:05:40.320 --> 00:05:43.550\nSo, if we get another error, yeah like\nthat, we'll just go ahead and restart it.\n\n127\n00:05:43.550 --> 00:05:45.790\nDoesn't always realize\nthat you made the change.\n\n128\n00:05:45.790 --> 00:05:49.542\nWe just do this without shutting down the\nwhole console, as opposed to doing that.\n\n129\n00:05:49.542 --> 00:05:50.800\nAll right, lets just do that.\n\n130\n00:05:50.800 --> 00:05:52.970\nWe'll go back in,\nwe'll load Word up again real quick.\n\n131\n00:05:52.970 --> 00:05:56.730\nAnd let's just type word in there.\n\n132\n00:05:56.730 --> 00:06:00.190\nOpen World 2013, we'll pull that\nback down, give it just a minute.\n\n133\n00:06:02.737 --> 00:06:07.120\nAnd we're just gonna click here, to\nopen up, and we'll just get rid of that.\n\n134\n00:06:07.120 --> 00:06:10.458\nJust click here to open up that,\nbring that in.\n\n135\n00:06:10.458 --> 00:06:13.387\nAll right, and then we'll go over here,\nand we'll go here.\n\n136\n00:06:13.387 --> 00:06:15.496\nAnd we'll go here.\n\n137\n00:06:19.098 --> 00:06:20.183\nCome on.\n\n138\n00:06:20.183 --> 00:06:22.346\nAnd we'll wait a minute while it thinks.\n\n139\n00:06:22.346 --> 00:06:23.228\nThere we go, okay.\n\n140\n00:06:23.228 --> 00:06:24.923\n[LAUGH] And we'll go ahead and\nwe'll click that.\n\n141\n00:06:27.493 --> 00:06:30.990\nAnd we'll just wait for it to pick up on\nthe fact that we actually wanna use it.\n\n142\n00:06:30.990 --> 00:06:32.200\nLet's try that one more time.\n\n143\n00:06:34.483 --> 00:06:36.861\nOr we could just wait for\nWord to decide it doesn't want to or\n\n144\n00:06:36.861 --> 00:06:38.060\nit's taking a coffee break.\n\n145\n00:06:38.060 --> 00:06:39.151\nIt's a union thing.\n\n146\n00:06:39.151 --> 00:06:39.802\n&gt;&gt; [LAUGH] That's right.\n\n147\n00:06:39.802 --> 00:06:42.130\n&gt;&gt; Five clicks, you gotta take a break,\nand you get five minutes.\n\n148\n00:06:42.130 --> 00:06:42.948\nThat's how it works.\n\n149\n00:06:42.948 --> 00:06:47.630\nSo, let's give this just a second,\nyeah that's what I was afraid of.\n\n150\n00:06:47.630 --> 00:06:49.660\nWe'll just let Word think for\na moment, all right there we go.\n\n151\n00:06:49.660 --> 00:06:51.730\nThere it is going back.\n\n152\n00:06:51.730 --> 00:06:54.426\nSometimes you just got to be patient\nwith it, cuz it does take a little time.\n\n153\n00:06:54.426 --> 00:06:57.882\nAnd so we're gonna wait for it to\nretrieve the templates from the server.\n\n154\n00:06:57.882 --> 00:07:02.723\nAnd then once we have those available,\nwe'll be able to specify our permissions,\n\n155\n00:07:02.723 --> 00:07:07.610\nand our selection for the people, and\nwho we're going to give permissions to.\n\n156\n00:07:07.610 --> 00:07:09.701\nThat's what the template\nwill do when it comes up.\n\n157\n00:07:09.701 --> 00:07:11.640\nAll right, something else is not working.\n\n158\n00:07:11.640 --> 00:07:12.473\nAll right, give me just one second.\n\n159\n00:07:12.473 --> 00:07:15.278\nWe're gonna go kick the backend\nof the server here, and\n\n160\n00:07:15.278 --> 00:07:17.190\nfigure out what's going wrong.\n\n161\n00:07:17.190 --> 00:07:19.075\nAnd as soon as I make sure that\neverything is connecting and\n\n162\n00:07:19.075 --> 00:07:21.240\ntalking behind the scenes,\nwe'll come right back, and\n\n163\n00:07:21.240 --> 00:07:22.230\nwe'll get this working for you.\n\n164\n00:07:23.280 --> 00:07:25.260\nSo, let me just tell you what went wrong.\n\n165\n00:07:25.260 --> 00:07:26.186\nFunny story, right?\n\n166\n00:07:26.186 --> 00:07:29.292\nWhen you go to configure the proxy and\nmake sure that you specify all\n\n167\n00:07:29.292 --> 00:07:33.009\nthe settings do actually connect, you\nprobably have to make sure that you set it\n\n168\n00:07:33.009 --> 00:07:36.635\nup in such a way they actually uses either\nthe proxy or doesn't use the proxy.\n\n169\n00:07:36.635 --> 00:07:39.000\nIn our case,\nwe're suppose to bypass the proxy.\n\n170\n00:07:39.000 --> 00:07:40.810\nAnd you may or\nmay not have been paying attention.\n\n171\n00:07:40.810 --> 00:07:43.172\nI bypassed the proxy for\nlocal on the bottom, but\n\n172\n00:07:43.172 --> 00:07:46.642\nI forgot to uncheck the hey don't use\nthe proxy on the top setting, so.\n\n173\n00:07:46.642 --> 00:07:48.464\n[LAUGH]\n&gt;&gt; Easy to overlook.\n\n174\n00:07:48.464 --> 00:07:50.596\n&gt;&gt; That's what happens when you do RMS for\nan entire day.\n\n175\n00:07:50.596 --> 00:07:53.975\nYou get tunnel vision.\n\n176\n00:07:53.975 --> 00:07:57.503\nSo, I forgot to uncheck the box that\nessentially said, hey bypass the proxy so\n\n177\n00:07:57.503 --> 00:07:59.332\nyou can actually connect to the server.\n\n178\n00:07:59.332 --> 00:08:02.595\nAnd so that's why we kept getting the hey,\nwe're not able to load the template error.\n\n179\n00:08:02.595 --> 00:08:05.285\nBecause it's a networking error,\ncuz I wasn't actually connected.\n\n180\n00:08:05.285 --> 00:08:06.765\nAll right, so we fixed all that.\n\n181\n00:08:06.765 --> 00:08:10.335\nSo if we go back in, you'll see we're\nin Word now, our templates are down.\n\n182\n00:08:10.335 --> 00:08:12.550\nYou can see the three templates there.\n\n183\n00:08:12.550 --> 00:08:14.930\nLet's go full screen, just so you can see\nthis, cuz this may be a little small for\n\n184\n00:08:14.930 --> 00:08:15.844\nyou to see.\n\n185\n00:08:15.844 --> 00:08:16.543\nYou'll see unlimited,\n\n186\n00:08:16.543 --> 00:08:19.890\nor excuse me, unrestricted access,\nrestricted in view only.\n\n187\n00:08:19.890 --> 00:08:21.680\nSo remember,\nwe created the view only access.\n\n188\n00:08:21.680 --> 00:08:23.810\nIt was so long ago like I don't know.\n\n189\n00:08:23.810 --> 00:08:27.260\nThree whole shows ago,\nwe created that view only access template,\n\n190\n00:08:27.260 --> 00:08:27.890\nif you remember.\n\n191\n00:08:29.020 --> 00:08:32.900\nSo we've got restricted access in there,\nwe can go ahead, choose Restricted access.\n\n192\n00:08:32.900 --> 00:08:33.680\nLet's pop that up.\n\n193\n00:08:33.680 --> 00:08:36.800\nWe'll get our little\npermission area right here.\n\n194\n00:08:36.800 --> 00:08:38.980\nYou can see we will restrict permission,\nor\n\n195\n00:08:38.980 --> 00:08:42.410\nrestrict access to the document\nwith this permission set.\n\n196\n00:08:42.410 --> 00:08:44.710\nWe'll specify Read, we'll specify Change.\n\n197\n00:08:44.710 --> 00:08:48.220\nWe've got to decide who goes where,\nwho's gonna get what rights.\n\n198\n00:08:48.220 --> 00:08:51.450\nSo in the read area,\nif we click on the people icon,\n\n199\n00:08:51.450 --> 00:08:54.790\nwe can go ahead and\nwe can put everyone in there.\n\n200\n00:08:54.790 --> 00:08:56.610\nYou'll see everybody gets read.\n\n201\n00:08:56.610 --> 00:08:58.560\nSo we can specify that.\n\n202\n00:08:58.560 --> 00:09:01.180\nAnd then, we have more options down here.\n\n203\n00:09:02.550 --> 00:09:06.160\nWhen we go in, you'll see that we\ncan actually go in as the author.\n\n204\n00:09:06.160 --> 00:09:07.780\nWe are Lisa Waybridge.\n\n205\n00:09:07.780 --> 00:09:08.840\nWe have full control.\n\n206\n00:09:08.840 --> 00:09:11.740\nNotice I can change that if I choose to.\n\n207\n00:09:11.740 --> 00:09:12.810\nEveryone has read.\n\n208\n00:09:12.810 --> 00:09:15.580\nIf we want to modify that,\nwe can go ahead and\n\n209\n00:09:15.580 --> 00:09:18.310\nmake an appropriate change there, right?\n\n210\n00:09:18.310 --> 00:09:22.820\nAnd we can decide Add permissions or\nadditional permissions for this user.\n\n211\n00:09:22.820 --> 00:09:26.710\nWe could specify for\neveryone that the document expires,\n\n212\n00:09:26.710 --> 00:09:28.160\nwe talked about expiration.\n\n213\n00:09:28.160 --> 00:09:29.810\nWe have the ability to do that.\n\n214\n00:09:29.810 --> 00:09:30.660\nWe can go ahead and\n\n215\n00:09:30.660 --> 00:09:34.990\nspecify they can print content,\nallow users with read access to copy.\n\n216\n00:09:34.990 --> 00:09:37.330\nSo we can actually allow\nthem to make copies.\n\n217\n00:09:37.330 --> 00:09:40.930\nThey can go ahead and\nthey can request additional permissions.\n\n218\n00:09:40.930 --> 00:09:45.567\nAnd there's an email where they can send\nthe email to, and then we as the owner,\n\n219\n00:09:45.567 --> 00:09:50.482\nin this case cuz remember we're pretending\nto be Lisa, could then decide yes or no,\n\n220\n00:09:50.482 --> 00:09:51.057\nup to us.\n\n221\n00:09:51.057 --> 00:09:56.427\nAnd so we can specify all this,\nright, when we're done.\n\n222\n00:09:56.427 --> 00:09:59.550\nLet's go ahead,\nlet's put that expiration out there.\n\n223\n00:09:59.550 --> 00:10:00.990\nGet all that done.\n\n224\n00:10:00.990 --> 00:10:01.550\nClick OK.\n\n225\n00:10:03.080 --> 00:10:05.590\nYou'll see now,\nOnly you can edit this document.\n\n226\n00:10:05.590 --> 00:10:08.079\nEveryone else can open up, but\ncannot make changes, right?\n\n227\n00:10:08.079 --> 00:10:10.954\nSo you being me, the owner Lisa, right?\n\n228\n00:10:10.954 --> 00:10:15.594\nSo you'll see now, that I've essentially\ngiven myself rights as the owner, but\n\n229\n00:10:15.594 --> 00:10:19.380\nnobody else that logs in would\nhave rights except for read.\n\n230\n00:10:19.380 --> 00:10:25.570\nThis is this five second, three click\nthing that we just did, is the culmination\n\n231\n00:10:25.570 --> 00:10:30.830\nof all the stuff we did in ADRMS to set it\nall up, so we could do this right here.\n\n232\n00:10:30.830 --> 00:10:35.906\n&gt;&gt; Listen, if you want to rule your rights\nagainst your lovely little documents\n\n233\n00:10:35.906 --> 00:10:41.074\nwith an iron fist, you're gonna have\nto walk through the fire first, right?\n\n234\n00:10:41.074 --> 00:10:45.290\nIt's not just a gimme, like that's a nice\nlittle feature, let me put that in.\n\n235\n00:10:45.290 --> 00:10:48.060\nIt takes a little bit of backend\nset up there, Mr. Adam Gordon.\n\n236\n00:10:48.060 --> 00:10:49.355\n&gt;&gt; It does, and\nif we go back for one second,\n\n237\n00:10:49.355 --> 00:10:50.659\nlet me just show you one other thing here.\n\n238\n00:10:50.659 --> 00:10:53.390\nSo I clicked Save, just so\nwe can instantiate the permissions.\n\n239\n00:10:53.390 --> 00:10:55.253\nIgnore the product notice thing,\njust about activation.\n\n240\n00:10:55.253 --> 00:10:57.833\nWe're just not bothering to activate\nthe copy of Office we're using,\n\n241\n00:10:57.833 --> 00:11:00.280\ncuz we're just using it real\nquickly the do the demo for you.\n\n242\n00:11:00.280 --> 00:11:01.633\nThat would normally not be there,\nin other words.\n\n243\n00:11:01.633 --> 00:11:05.499\nBut what you'll see is the yellow bar,\nit says Restricted access, permission is\n\n244\n00:11:05.499 --> 00:11:09.320\ncurrently restricted, only specified\nusers can access this content, right?\n\n245\n00:11:09.320 --> 00:11:10.140\nSo that's what we get.\n\n246\n00:11:10.140 --> 00:11:14.558\nNow if we log out, right,\nof Word and go back in as Lisa,\n\n247\n00:11:14.558 --> 00:11:16.920\nour user alias here, right?\n\n248\n00:11:19.550 --> 00:11:21.376\nWe'll be able to pull the document up.\n\n249\n00:11:21.376 --> 00:11:23.221\nWe're the creator owner,\nwe have full rights to it.\n\n250\n00:11:23.221 --> 00:11:24.782\nSo we should have no trouble doing that.\n\n251\n00:11:24.782 --> 00:11:28.180\nYou could see right here, we'll just get\nrid of our little activation notice.\n\n252\n00:11:28.180 --> 00:11:29.060\nGo in here.\n\n253\n00:11:29.060 --> 00:11:30.652\nWe're able to pull that\ndocument up with no trouble.\n\n254\n00:11:30.652 --> 00:11:34.250\nIt tells us hey it's restricted,\nbut we can get in there right?\n\n255\n00:11:34.250 --> 00:11:35.040\nSo we have rights to it.\n\n256\n00:11:35.040 --> 00:11:37.710\nAnd anybody else logs in,\nthey're gonna be restricted to read only.\n\n257\n00:11:37.710 --> 00:11:39.224\nThey won't be able to make changes.\n\n258\n00:11:39.224 --> 00:11:39.960\nSo it's all that.\n\n259\n00:11:39.960 --> 00:11:41.490\n&gt;&gt; Very cool, very cool.\n\n260\n00:11:41.490 --> 00:11:44.125\nI do like that it's obviously\nnot the only features right?\n\n261\n00:11:44.125 --> 00:11:50.490\nDidn't you say we were able to remove\nfunctionality as well, using RMS?\n\n262\n00:11:50.490 --> 00:11:52.120\n&gt;&gt; Well, we can block functionality.\n\n263\n00:11:52.120 --> 00:11:54.270\nSo in other words, by default now for\n\n264\n00:11:54.270 --> 00:11:57.730\nthe normal user that is read-only,\nwe did not enable print.\n\n265\n00:11:57.730 --> 00:11:58.740\nWe did not enable copy.\n\n266\n00:11:58.740 --> 00:12:01.596\nSo those options would be\nrestricted in the menu, and\n\n267\n00:12:01.596 --> 00:12:04.130\nthe program would not allow them to occur.\n\n268\n00:12:04.130 --> 00:12:04.874\nWe have more advanced features.\n\n269\n00:12:04.874 --> 00:12:07.841\nWe may or may not be able to,\ndepending on the nature of the program,\n\n270\n00:12:07.841 --> 00:12:09.780\nwe could drill down and\ndo some other stuff.\n\n271\n00:12:09.780 --> 00:12:12.470\nWe may not be able to post it\nto a website, for instance.\n\n272\n00:12:12.470 --> 00:12:14.502\nThings like that could be\nblocked with SharePoint.\n\n273\n00:12:14.502 --> 00:12:16.266\nYou can't attach it as a file to email.\n\n274\n00:12:16.266 --> 00:12:19.220\nWe could block that kind\nof capability with RMS.\n\n275\n00:12:19.220 --> 00:12:20.440\nSo there's a lot of\ncool stuff we could do.\n\n276\n00:12:20.440 --> 00:12:22.700\n&gt;&gt; Yeah it's a very,\nvery cool piece of software.\n\n277\n00:12:22.700 --> 00:12:29.130\nSo if you do want to be able to implement\nthat level of control, security maybe.\n\n278\n00:12:29.130 --> 00:12:33.551\nEven if you wanna put it that way, then\nRMS is a definite way you might wanna go.\n\n279\n00:12:33.551 --> 00:12:37.280\nSo, but be warned,\nit's not the easiest thing in the world.\n\n280\n00:12:37.280 --> 00:12:38.715\n&gt;&gt; Not for the faint of heart,\nthat's for sure.\n\n281\n00:12:38.715 --> 00:12:42.140\n&gt;&gt; You know what's funny, is it's not\nthat difficult, as far as the concept.\n\n282\n00:12:42.140 --> 00:12:44.354\n[CROSSTALK] It's just a lot of work,\nvery time consuming.\n\n283\n00:12:44.354 --> 00:12:48.250\nSo just be prepared to invest that\ntime and effort into that system.\n\n284\n00:12:48.250 --> 00:12:52.077\nAdam, anything else we need to know\nabout RMS before we call it a day?\n\n285\n00:12:52.077 --> 00:12:54.639\n&gt;&gt; No, that is everything, cuz there is\nabsolutely nothing we haven't shown you.\n\n286\n00:12:54.639 --> 00:12:56.270\nYou know everything.\n\n287\n00:12:56.270 --> 00:12:58.135\nWe have run the gamut,\nladies and gentlemen.\n\n288\n00:12:58.135 --> 00:13:00.600\nThank you for hanging in there with us.\n\n289\n00:13:00.600 --> 00:13:01.870\nHopefully you got a lot out of it.\n\n290\n00:13:01.870 --> 00:13:05.159\nAnd not only that, but\nyou'll be able to take this knowledge, and\n\n291\n00:13:05.159 --> 00:13:07.930\nmaybe even pass an exam,\nif that happens for you.\n\n292\n00:13:07.930 --> 00:13:10.287\nThat being said, Adam, we do-\n&gt;&gt; Heaven forbid.\n\n293\n00:13:10.287 --> 00:13:11.357\n&gt;&gt; [LAUGH] Heaven forbid, that's right.\n\n294\n00:13:11.357 --> 00:13:12.530\nWe do thank you for joining us, Adam.\n\n295\n00:13:12.530 --> 00:13:14.620\nWe do thank our good audience for\nwatching.\n\n296\n00:13:14.620 --> 00:13:17.710\nBut it is that time for\nus to sign off for ITProTV.\n\n297\n00:13:17.710 --> 00:13:19.480\nI've been your host, Daniel Lowrie.\n\n298\n00:13:19.480 --> 00:13:20.410\n&gt;&gt; I'm Adam Gordon.\n\n299\n00:13:20.410 --> 00:13:21.105\n&gt;&gt; We'll see you next time.\n\n300\n00:13:21.105 --> 00:13:21.629\n&gt;&gt; Take care, everybody.\n\n301\n00:13:21.629 --> 00:13:29.329\n[MUSIC]\n\n302\n00:13:29.329 --> 00:13:31.370\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "214171220"
        }
      ],
      "title": "Design and implement identity and access solutions"
    }
  ],
  "url": "mcse-windows-server-2013",
  "vLab": false
}
