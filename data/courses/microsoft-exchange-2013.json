{
  "description": "Microsoft Exchange 2013 is one of the most popular commercially supported email and collaboration platforms in the world. This course helps systems administrators to quickly come up to speed on deploying and supporting each of the various services provided in Exchange. In addition to the real world skills, this course also covers each of the exam objectives required for the Microsoft 70-341 exam which counts toward the MCP and MCSE certifications.",
  "descriptionMD": "",
  "length": "50639",
  "name": "Microsoft Exchange 2013 - 70-341",
  "practiceExam": true,
  "subtitle": "Core Solutions of Microsoft Exchange Server 2013",
  "tagUrl": "microsoft-technical",
  "topics": [
    {
      "episodes": [
        {
          "description": "Microsoft Exchange 2013 is one of the most popular commercially supports email and collaboration platforms in the world. This course helps systems administrators to quickly come up to speed on deploying and supporting each of the various services provided in Exchange. In addition to the real world skills, this course also covers each of the exam objectives required for the Microsoft 70-341 exam which counts toward the MCP and MCSE certifications.",
          "length": "197",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-0-0-overview-081015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-0-0-overview-081015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-0-0-overview-081015-1-sm.jpg",
          "title": "Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:05.186\n[SOUND] In this series, we're gonna be\n\n2\n00:00:05.186 --> 00:00:11.646\ntaking a look at Microsoft Exchange 2013.\n\n3\n00:00:11.646 --> 00:00:14.872\nWe've had a lot of request from viewers\nout there from people implementing their\n\n4\n00:00:14.872 --> 00:00:17.400\nown email systems and\nthey're choosing Microsoft Exchange.\n\n5\n00:00:17.400 --> 00:00:18.410\nThey want some help to be able to do that.\n\n6\n00:00:18.410 --> 00:00:20.640\nSo that's what this series\nis kinda built around.\n\n7\n00:00:20.640 --> 00:00:25.030\nNow we're using the exam objectives for\nthe 70-341 exam to\n\n8\n00:00:25.030 --> 00:00:28.410\nbuild this episode series, just to\nmake sure we cover all that content.\n\n9\n00:00:28.410 --> 00:00:31.140\nBecause it really is a great way\nto get introduced to the product,\n\n10\n00:00:31.140 --> 00:00:34.140\nas well as to get it implemented\nquickly and reliably.\n\n11\n00:00:34.140 --> 00:00:38.140\nNow that means that we're gonna cover a\nlot of great stuff to get you exam ready,\n\n12\n00:00:38.140 --> 00:00:40.690\nbut from a practical sense\nwhat are we gonna cover?\n\n13\n00:00:40.690 --> 00:00:44.910\nWell, in this series we're going to take a\nlook at how to select the right edition of\n\n14\n00:00:44.910 --> 00:00:49.050\nMicrosoft Exchange, how to get Exchange\ninstalled and have the right amount of\n\n15\n00:00:49.050 --> 00:00:53.060\nservers for your environment, get that\nnetwork design properly put in place.\n\n16\n00:00:53.060 --> 00:00:56.944\nHow to implement mailbox services, which\nis probably the most important part of\n\n17\n00:00:56.944 --> 00:00:58.890\nan email server is to\nbe able to send email.\n\n18\n00:00:58.890 --> 00:01:01.140\nBut also take a look\nat the calendaring and\n\n19\n00:01:01.140 --> 00:01:03.460\nother functionality that's\nbuilt inside of Exchange.\n\n20\n00:01:03.460 --> 00:01:06.660\nThere is a ton of power under\nthe hood of Exchange that makes it\n\n21\n00:01:06.660 --> 00:01:08.560\nfar more than an email server.\n\n22\n00:01:08.560 --> 00:01:10.660\nAnd we're gonna take a look\nat all of that, right.\n\n23\n00:01:10.660 --> 00:01:12.790\nLet's take a look at the exam\nobjectives to get a look at some of\n\n24\n00:01:12.790 --> 00:01:14.080\nthe things we're gonna cover.\n\n25\n00:01:14.080 --> 00:01:17.690\nI said we were gonna build this\naround the 70-341 exam and\n\n26\n00:01:17.690 --> 00:01:20.610\nyou'll see that it breaks\nthings up into four categories.\n\n27\n00:01:20.610 --> 00:01:23.380\nInstalling and\nconfiguring the mailbox role, right.\n\n28\n00:01:23.380 --> 00:01:24.880\nThat's the email portion, right.\n\n29\n00:01:24.880 --> 00:01:26.610\nGetting email set up.\n\n30\n00:01:26.610 --> 00:01:29.246\nInstalling and\nconfiguring the client access role.\n\n31\n00:01:29.246 --> 00:01:35.770\nThat's getting POP3, IMAP4, the Outlook\nWeb App, getting those things configured,\n\n32\n00:01:35.770 --> 00:01:39.140\nas well as the full Microsoft Outlook\nclient and some of the advanced\n\n33\n00:01:39.140 --> 00:01:43.950\nfunctionality we get with it, seeing how\nto get those implemented and put in place.\n\n34\n00:01:43.950 --> 00:01:46.751\nThen we're going to move into\ninstalling and configuring transport.\n\n35\n00:01:46.751 --> 00:01:50.277\nNow, by transport we mean what\nhappens to our email while it moves\n\n36\n00:01:50.277 --> 00:01:51.440\nacross the network.\n\n37\n00:01:51.440 --> 00:01:55.879\nAnd that might sound pretty boring, but\nthis is where we do things like anti-spam,\n\n38\n00:01:55.879 --> 00:01:56.700\nanti-virus.\n\n39\n00:01:56.700 --> 00:01:58.270\nWe can do compliance or\n\n40\n00:01:58.270 --> 00:02:02.370\nregulatory compliance type rules where you\ndo email retention or redirecting email.\n\n41\n00:02:02.370 --> 00:02:05.470\nThere's a lot of stuff you can do\nto email while it's in transit.\n\n42\n00:02:05.470 --> 00:02:07.590\nIt might be really complex things or\nreally simple,\n\n43\n00:02:07.590 --> 00:02:11.250\nlike sticking a footer on the bottom\nthat says, this is a private email,\n\n44\n00:02:11.250 --> 00:02:13.500\nplease do not disclose it,\nor something of that nature.\n\n45\n00:02:13.500 --> 00:02:14.880\nThere's a lot we can do there.\n\n46\n00:02:14.880 --> 00:02:17.880\nWe'll see how to manage our\nmessage queues, and so on.\n\n47\n00:02:17.880 --> 00:02:21.120\nAnd then we've got designing and\nmanaging an Exchange infrastructure.\n\n48\n00:02:21.120 --> 00:02:24.560\nWhen you start to build this out,\nyou'll find that small environments\n\n49\n00:02:24.560 --> 00:02:27.320\nhave very different needs\nfrom large environments.\n\n50\n00:02:27.320 --> 00:02:30.940\nIf you just have one Exchange\nadministrator and 20 mailboxes,\n\n51\n00:02:30.940 --> 00:02:33.900\nyou can have a really straightforward and\nsimple Exchange deployment.\n\n52\n00:02:33.900 --> 00:02:35.910\nBut if you have 50,000 users and\n\n53\n00:02:35.910 --> 00:02:40.080\nten Exchange administrators, well, now\nthings get a lot more complex and so we'll\n\n54\n00:02:40.080 --> 00:02:44.040\nlook at some of the functionality that's\nbuilt into Exchange that supports that.\n\n55\n00:02:44.040 --> 00:02:44.970\nSo, all in all,\n\n56\n00:02:44.970 --> 00:02:47.980\nit's gonna be a really good series\ncovering all the information you need.\n\n57\n00:02:47.980 --> 00:02:49.400\nIf you wanna get certified, great.\n\n58\n00:02:49.400 --> 00:02:51.240\nWe're gonna cover all the objectives.\n\n59\n00:02:51.240 --> 00:02:54.412\nIf you're not interested in getting\ncertified, that's fine too.\n\n60\n00:02:54.412 --> 00:02:56.980\nWe're gonna show you what you\nneed to know about Exchange to\n\n61\n00:02:56.980 --> 00:02:59.750\nget it deployed in your environment,\nand to be able to take\n\n62\n00:02:59.750 --> 00:03:02.990\nadvantage of the really cool features\nthat are new in Exchange 2013.\n\n63\n00:03:02.990 --> 00:03:06.960\nSo, if that sounds interesting to you,\nthen you're in the right place.\n\n64\n00:03:06.960 --> 00:03:10.456\nStay tuned, we've got\nMicrosoft Exchange 2013 coming up next.\n\n65\n00:03:10.456 --> 00:03:17.249\n[MUSIC]\n\n",
          "vimeoId": "135908058"
        },
        {
          "description": "In this episode, Don introduces the viewers to Microsoft Exchange 2013. He discusses the differences between the Standard and Enterprise editions of Exchange, and wraps up by discussing how Exchange licensing is handled.",
          "length": "1579",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-1-introduction_to_exchange2013-081015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-1-introduction_to_exchange2013-081015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-1-introduction_to_exchange2013-081015-1-sm.jpg",
          "title": "Introduction to Exchange 2013",
          "transcript": "WEBVTT\n\n1\n00:00:00.055 --> 00:00:10.259\n[MUSIC]\n\n2\n00:00:10.259 --> 00:00:12.960\nAll right good morning,\ngood afternoon, and good evening.\n\n3\n00:00:12.960 --> 00:00:16.270\nAnd welcome back for\nanother episode of ITProTV, I'm your host,\n\n4\n00:00:16.270 --> 00:00:20.280\nDon Pezet, here today with an episode for\nMicrosoft Exchange 2013.\n\n5\n00:00:20.280 --> 00:00:22.970\nAnd I'm excited to kick this series off.\n\n6\n00:00:22.970 --> 00:00:26.420\nExchange is a very popular\ne-mail server program.\n\n7\n00:00:26.420 --> 00:00:29.190\nA lot of companies and enterprises run it.\n\n8\n00:00:29.190 --> 00:00:31.750\nThere's a ton of ways to\nget involved with it, and\n\n9\n00:00:31.750 --> 00:00:34.170\nin this episode I just want\nto spend some time kind\n\n10\n00:00:34.170 --> 00:00:38.970\nof describing what Exchange is and\nhow we go about purchasing it.\n\n11\n00:00:38.970 --> 00:00:42.300\nCuz unfortunately it has gotten\na little bit confusing these days.\n\n12\n00:00:42.300 --> 00:00:46.480\nSo there's a lot of companies that use\nemail, I shouldn't say a lot of companies,\n\n13\n00:00:46.480 --> 00:00:48.980\npretty much every company\nuses email these days.\n\n14\n00:00:48.980 --> 00:00:52.750\nIt might be completely private and\ninternal, it might be public and\n\n15\n00:00:52.750 --> 00:00:53.870\nconnectivity to the Internet.\n\n16\n00:00:53.870 --> 00:00:55.760\nThat's the most common, right.\n\n17\n00:00:55.760 --> 00:01:00.080\nBut we need email, and one of the best\nemail solutions that's out there\n\n18\n00:01:00.080 --> 00:01:03.840\nis Microsoft Exchange, and\nit's not sure because of the email side.\n\n19\n00:01:03.840 --> 00:01:05.640\nThere's plenty of email\nservers that are out there,\n\n20\n00:01:05.640 --> 00:01:08.800\nyou could fire up a Linux server\nwith Sendmail, and there you go,\n\n21\n00:01:08.800 --> 00:01:11.140\nyou got an email server and\nit didn't cost you a dime.\n\n22\n00:01:11.140 --> 00:01:13.670\nSo why would I pay for Microsoft Exchange?\n\n23\n00:01:13.670 --> 00:01:16.760\nWhy would I implement that,\nover some of these other solutions?\n\n24\n00:01:16.760 --> 00:01:20.590\nAnd the answer is, the collaboration\nservices that come along with it.\n\n25\n00:01:20.590 --> 00:01:24.390\nExchange is a lot more\nthan just a mail server.\n\n26\n00:01:24.390 --> 00:01:27.860\nFor example, it gives you shared group\ncalendars and individual calendaring.\n\n27\n00:01:27.860 --> 00:01:30.130\nYou can do tasks, like to-do lists.\n\n28\n00:01:30.130 --> 00:01:34.020\nYou can do unified messaging, where your\nvoicemail goes right into Exchange and\n\n29\n00:01:34.020 --> 00:01:35.060\nis managed there.\n\n30\n00:01:35.060 --> 00:01:36.510\nYou can do public folders for\n\n31\n00:01:36.510 --> 00:01:41.100\nshared content and files,\nExchange can do a lot of things.\n\n32\n00:01:41.100 --> 00:01:43.560\nIt's a very powerful collaboration suite.\n\n33\n00:01:43.560 --> 00:01:46.640\nIn fact Microsoft sometimes\ncalls it collaboration suite.\n\n34\n00:01:46.640 --> 00:01:50.020\nThey don't say email server ,cuz\nit does so much more than email.\n\n35\n00:01:50.020 --> 00:01:53.850\nAnd those are all reasons why we might\nchose to implement Microsoft exchange,\n\n36\n00:01:53.850 --> 00:01:57.080\nas opposed to going with some of the other\nservices that are out there, all right?\n\n37\n00:01:57.080 --> 00:01:59.500\nSo, let's say you're at a company, and\n\n38\n00:01:59.500 --> 00:02:01.510\nyou're evaluating whether\nyou want Microsoft Exchange.\n\n39\n00:02:01.510 --> 00:02:04.770\nYou say, all right, I think we're\ngoing to do an email server and\n\n40\n00:02:04.770 --> 00:02:06.570\nwe're looking at going this\nExchange route, right?\n\n41\n00:02:06.570 --> 00:02:10.220\nSo, there's some of the reasons that I\njust mentioned a moment ago that you might\n\n42\n00:02:10.220 --> 00:02:11.170\nwant to choose Exchange for.\n\n43\n00:02:11.170 --> 00:02:12.750\nThere's other reasons too.\n\n44\n00:02:12.750 --> 00:02:14.890\nFor example,\nit's really easy to administer.\n\n45\n00:02:14.890 --> 00:02:17.090\nExchange has a nice\ngraphical user interface.\n\n46\n00:02:17.090 --> 00:02:18.010\nIt's all web based.\n\n47\n00:02:18.010 --> 00:02:19.960\nYou browse to a web page,\nyou can configure the server,\n\n48\n00:02:19.960 --> 00:02:22.070\nyou do everything that\nyou need right there.\n\n49\n00:02:22.070 --> 00:02:23.040\nIt's pretty straight forward.\n\n50\n00:02:23.040 --> 00:02:25.350\nAnd you'll see through out this series,\nthat configuring,\n\n51\n00:02:25.350 --> 00:02:26.670\nit's really not that hard.\n\n52\n00:02:26.670 --> 00:02:29.820\nYou do need to know where things are,\nand that's a bit of a challenge, right.\n\n53\n00:02:29.820 --> 00:02:32.200\nOr understand the terminology\nthat Microsoft uses.\n\n54\n00:02:32.200 --> 00:02:33.470\nBut once you get past that,\n\n55\n00:02:33.470 --> 00:02:36.210\nactually performing the activities\nis not difficult at all.\n\n56\n00:02:36.210 --> 00:02:38.900\nAnd it's It's actually a pretty\ngreat system to work with.\n\n57\n00:02:38.900 --> 00:02:40.670\nIt's also extremely scalable.\n\n58\n00:02:40.670 --> 00:02:43.220\nExchange can run and\nsupport five mailboxes if you want.\n\n59\n00:02:43.220 --> 00:02:44.690\nAll right?\nI just have five mailboxes,\n\n60\n00:02:44.690 --> 00:02:46.010\nI'm running it from my home.\n\n61\n00:02:46.010 --> 00:02:48.750\nBut that might be a little overkill there,\nbut you could do it.\n\n62\n00:02:48.750 --> 00:02:53.930\nOr my company has 500,000 employees and\nI need mailboxes for all of them.\n\n63\n00:02:53.930 --> 00:02:55.250\nExchange can do that.\n\n64\n00:02:55.250 --> 00:02:57.450\nIt can run in very small,\nvery large environments, and\n\n65\n00:02:57.450 --> 00:03:00.840\nyou can even host it online through\nMicrosoft's Azure if you want.\n\n66\n00:03:00.840 --> 00:03:03.810\nRight, so there's a few different\nsolutions that are out there.\n\n67\n00:03:03.810 --> 00:03:06.420\nOne of the first decisions you\nhave to make with Exchange,\n\n68\n00:03:06.420 --> 00:03:10.635\nis whether you're gonna go with\nthe standard or enterprise edition.\n\n69\n00:03:10.635 --> 00:03:13.705\nSo when you buy Microsoft Exchange,\nthere's a few things we have to think\n\n70\n00:03:13.705 --> 00:03:16.365\nabout, and\none of those is the features that we want.\n\n71\n00:03:16.365 --> 00:03:18.535\nThe features are divided up\na couple of different ways,\n\n72\n00:03:18.535 --> 00:03:20.495\nand that's part of where\nthe confusion comes from.\n\n73\n00:03:20.495 --> 00:03:24.525\nThe other thing we have to decide,\nis whether we want just one server, or\n\n74\n00:03:24.525 --> 00:03:26.465\nif we want more than one server.\n\n75\n00:03:26.465 --> 00:03:29.770\nIf you just have five mailboxes,\nyou can run one exchange server.\n\n76\n00:03:29.770 --> 00:03:30.810\nYou can have one server.\n\n77\n00:03:30.810 --> 00:03:31.680\nIt can be a virtual machine.\n\n78\n00:03:31.680 --> 00:03:32.930\nIt doesn't have to be a physical machine.\n\n79\n00:03:32.930 --> 00:03:34.440\nAnd it can run exchange.\n\n80\n00:03:34.440 --> 00:03:35.990\nIt can provide all your e-mail services.\n\n81\n00:03:35.990 --> 00:03:39.620\nCalendaring, public folders,\nall that good stuff, right on one box.\n\n82\n00:03:39.620 --> 00:03:41.100\nBut if you've got a large company.\n\n83\n00:03:41.100 --> 00:03:42.960\nIf you've got thousands of employees,\n\n84\n00:03:42.960 --> 00:03:45.620\nthat one box is gonna get\nkilled pretty fast, right?\n\n85\n00:03:45.620 --> 00:03:49.380\nIt's gonna need storage to\nsupport all those mailboxes.\n\n86\n00:03:49.380 --> 00:03:51.850\nIt's gonna need CPU to move email in and\nout.\n\n87\n00:03:51.850 --> 00:03:54.540\nIt's gonna need RAM to process\nall the mail requests.\n\n88\n00:03:54.540 --> 00:03:57.485\nAnd it's gonna need network bandwidth,\nto be able to move files and\n\n89\n00:03:57.485 --> 00:03:58.825\nthings back and forth.\n\n90\n00:03:58.825 --> 00:04:00.895\nThat's a lot for one server to do.\n\n91\n00:04:00.895 --> 00:04:04.395\nSo in enterprise environments,\nwe actually break Exchange up and\n\n92\n00:04:04.395 --> 00:04:06.095\nspread it across several servers.\n\n93\n00:04:06.095 --> 00:04:09.765\nI think the largest environment I've\nworked in had about 30 exchange servers,\n\n94\n00:04:09.765 --> 00:04:12.375\nall divided up performing\ndifferent functions, and\n\n95\n00:04:12.375 --> 00:04:15.295\nthat was just because of\nthe size of that organization.\n\n96\n00:04:15.295 --> 00:04:17.900\nOr if you're organization\nis just geographically big.\n\n97\n00:04:17.900 --> 00:04:20.320\nMaybe you've got some employees\nin the United States, and\n\n98\n00:04:20.320 --> 00:04:22.130\nsome employees in England.\n\n99\n00:04:22.130 --> 00:04:24.860\nWell, you don't want the employees\nin England to have to jump\n\n100\n00:04:24.860 --> 00:04:27.000\nall the way over to the U.S.\nto access their mailbox.\n\n101\n00:04:27.000 --> 00:04:29.780\nIt would be nice if we had an Exchange\nserver over there in England, and\n\n102\n00:04:29.780 --> 00:04:31.320\nan Exchange server over here in the U.S,.\n\n103\n00:04:31.320 --> 00:04:33.840\nAnd now people can access\nthe server that's closest to them.\n\n104\n00:04:33.840 --> 00:04:35.750\nExchange lets you do that, right?\n\n105\n00:04:35.750 --> 00:04:38.520\nWe do have to think about how many\ncopies of Exchange we need to buy, and\n\n106\n00:04:38.520 --> 00:04:40.090\nhow many servers we want.\n\n107\n00:04:40.090 --> 00:04:42.980\nBut when you go to buy it, the first\ndecision you have to make is whether we\n\n108\n00:04:42.980 --> 00:04:45.570\nwant Standard or Enterprise right.\n\n109\n00:04:45.570 --> 00:04:48.430\nNow with the standard addition you get\n\n110\n00:04:48.430 --> 00:04:52.200\nall the core functionality you\nneed from Microsoft Exchange.\n\n111\n00:04:52.200 --> 00:04:54.280\nWith the enterprise addition\nyou get some extra stuff.\n\n112\n00:04:54.280 --> 00:04:56.130\nAnd let me show you.\nI've got Microsoft's page pulled\n\n113\n00:04:56.130 --> 00:04:56.920\nup right here.\n\n114\n00:04:56.920 --> 00:05:00.540\nThis is the page that discusses\nthe Exchange 2013 licensing.\n\n115\n00:05:00.540 --> 00:05:02.320\nAnd you'll see right here at the top,\n\n116\n00:05:02.320 --> 00:05:04.960\nits got a little note about Standard and\nEnterprise.\n\n117\n00:05:04.960 --> 00:05:09.510\nWell there's actually only one difference\nbetween Standard and Enterprise, and\n\n118\n00:05:09.510 --> 00:05:12.500\nthat's how many mailbox\ndatabases you can have.\n\n119\n00:05:12.500 --> 00:05:18.250\nIf you're a single company, and\nyou've got say less than 50,000 users,\n\n120\n00:05:18.250 --> 00:05:21.600\nyou can probably get away with\njust having one mailbox database.\n\n121\n00:05:21.600 --> 00:05:24.450\nBut if you want to divide your\nmailbox databases up, and\n\n122\n00:05:24.450 --> 00:05:28.120\nhave some mailboxes in England some\nin the U.S. and some in Australia.\n\n123\n00:05:28.120 --> 00:05:30.820\nOr you've got more than one company,\nand you want the different\n\n124\n00:05:30.820 --> 00:05:34.730\nbusiness units to have their own database,\nwell then you're going to need more.\n\n125\n00:05:34.730 --> 00:05:39.710\nAnd the Standard addition can only\nsupport up to five mailbox databases.\n\n126\n00:05:39.710 --> 00:05:43.040\nSo, if I just need five mailbox databases,\nstandard addition,\n\n127\n00:05:43.040 --> 00:05:44.440\nit'll do what I need and that's that.\n\n128\n00:05:45.940 --> 00:05:48.180\nRight.\nThen there's the enterprise edition.\n\n129\n00:05:48.180 --> 00:05:51.620\nAnd the Enterprise edition,\nif you bought Exchange 2013 on a DVD,\n\n130\n00:05:51.620 --> 00:05:56.690\nout of the box it supports\nup to 50 mailbox databases.\n\n131\n00:05:56.690 --> 00:05:59.000\nBut if you've installed\nall the Windows updates,\n\n132\n00:05:59.000 --> 00:06:03.600\nwhen they released service pack one,\nit bumped it up to 100 mailbox databases.\n\n133\n00:06:03.600 --> 00:06:06.910\nSo you could divide up all your email\ninto all these different databases.\n\n134\n00:06:06.910 --> 00:06:08.900\nNow I, why would I want to do that?\n\n135\n00:06:08.900 --> 00:06:11.590\nWell, I gave you guys\nthe example of a geolocation.\n\n136\n00:06:11.590 --> 00:06:14.140\nPutting people's email closer to them.\n\n137\n00:06:14.140 --> 00:06:15.790\nThat makes access to their mailbox faster.\n\n138\n00:06:15.790 --> 00:06:17.030\nThat's something you might want, right?\n\n139\n00:06:17.030 --> 00:06:19.160\nThat's one reason you might divide it up.\n\n140\n00:06:19.160 --> 00:06:22.300\nAnother reason you might divide\nit up is backup and recovery.\n\n141\n00:06:22.300 --> 00:06:25.760\nRight?\nIf I have 50 thousand mailboxes and\n\n142\n00:06:25.760 --> 00:06:27.190\nthey're all in one database, and\n\n143\n00:06:27.190 --> 00:06:32.480\nthat database fails, all of my\nusers can't access their mailbox.\n\n144\n00:06:32.480 --> 00:06:36.287\nBut if I divided that up into\nfive mailbox databases, right?\n\n145\n00:06:36.287 --> 00:06:40.030\nTen thousand users in each of those five\ndatabases, and one of them fails, well,\n\n146\n00:06:40.030 --> 00:06:41.680\nthe other four are still up and going.\n\n147\n00:06:41.680 --> 00:06:44.100\nAnd I can even transition\nmailboxes over to the other one,\n\n148\n00:06:44.100 --> 00:06:45.450\nto get them up and going too.\n\n149\n00:06:45.450 --> 00:06:48.410\nIt creates a more resilient,\nmore redundant environment.\n\n150\n00:06:48.410 --> 00:06:51.940\nAnd so\nEnterprise will come in handy there.\n\n151\n00:06:51.940 --> 00:06:54.770\nNow we're gonna cover in\nanother episode the different\n\n152\n00:06:54.770 --> 00:06:57.400\nroles that Exchange can\ntake when you install it.\n\n153\n00:06:57.400 --> 00:07:00.170\nAnd when you install Exchange, there's\ntwo main roles we need to worry about.\n\n154\n00:07:00.170 --> 00:07:03.770\nThere's a client access server and\na mailbox server.\n\n155\n00:07:03.770 --> 00:07:05.630\nThe mailbox server, that's the one\nthat holds the database, and\n\n156\n00:07:05.630 --> 00:07:06.890\nthat's where these limits come in.\n\n157\n00:07:06.890 --> 00:07:11.440\nSo the Atandard mailbox server\ncan hold up to five mailboxes.\n\n158\n00:07:11.440 --> 00:07:14.290\nThe Enterprise mailbox\nserver can hold up to 100.\n\n159\n00:07:14.290 --> 00:07:16.770\nBut a client access server,\n\n160\n00:07:16.770 --> 00:07:18.950\nthat's the server where your\nend users actual connect.\n\n161\n00:07:18.950 --> 00:07:20.890\nIt's where they use POP3 or IMAP.\n\n162\n00:07:20.890 --> 00:07:23.110\nIt's where they use OWA.\n\n163\n00:07:23.110 --> 00:07:25.900\nThey're using the Outlook Web App\nto access their mailbox.\n\n164\n00:07:25.900 --> 00:07:28.080\nThey go through that client access server.\n\n165\n00:07:28.080 --> 00:07:30.110\nAnd if you've got a dedicated\nclient access server,\n\n166\n00:07:30.110 --> 00:07:31.850\nit doesn't have any mailboxes.\n\n167\n00:07:31.850 --> 00:07:34.530\nIf it doesn't have any mailboxes It\ndoesn't matter which one you get, so\n\n168\n00:07:34.530 --> 00:07:37.350\nyou might as well save money and\nget the Standard edition.\n\n169\n00:07:37.350 --> 00:07:40.290\nSo this really only applies\nto our mailbox servers.\n\n170\n00:07:40.290 --> 00:07:44.086\nAnd that's really, honestly and truly\nthe only difference between Standard and\n\n171\n00:07:44.086 --> 00:07:44.754\nEnterprise.\n\n172\n00:07:44.754 --> 00:07:47.535\nSo if you've got less than\nfive mailbox databases,\n\n173\n00:07:47.535 --> 00:07:49.630\ndon't waste any money on Enterprise.\n\n174\n00:07:49.630 --> 00:07:51.952\nYou don't get any extra features.\n\n175\n00:07:51.952 --> 00:07:54.099\nThat wasn't always the case.\n\n176\n00:07:54.099 --> 00:07:55.591\nIn older versions of Exchange,\n\n177\n00:07:55.591 --> 00:07:58.860\nit used to be if you wanted clustering\nyou had to go to Enterprise.\n\n178\n00:07:58.860 --> 00:07:59.982\nOr if you wanted this feature or\n\n179\n00:07:59.982 --> 00:08:02.845\nthat feature there were things where you\nhad to jump up to Enterprise, right?\n\n180\n00:08:02.845 --> 00:08:04.550\nExtra memory access and things like that.\n\n181\n00:08:04.550 --> 00:08:05.620\nThat's all gone.\n\n182\n00:08:05.620 --> 00:08:07.620\nNow they're identical except for\nthe mailbox databases.\n\n183\n00:08:08.620 --> 00:08:13.780\nThe differences are now tied to what's\ncalled a client access license.\n\n184\n00:08:13.780 --> 00:08:16.570\nWith Exchange you have to pay for\nthe server software.\n\n185\n00:08:16.570 --> 00:08:18.980\nSo I have to buy a copy of Exchange 2013.\n\n186\n00:08:18.980 --> 00:08:22.520\nBut then, for\nevery user that connects to the server,\n\n187\n00:08:22.520 --> 00:08:25.140\nI can have a client access license or\na CAL.\n\n188\n00:08:25.140 --> 00:08:29.250\nAnd the CAL comes in two forms,\na Standard CAL and an Enterprise CAL, and\n\n189\n00:08:29.250 --> 00:08:32.230\nthere's a lot of differences between them,\nall right?\n\n190\n00:08:32.230 --> 00:08:34.968\nNow the Enterprise CAL\nis more of an add-on.\n\n191\n00:08:34.968 --> 00:08:38.810\nSo at a minimum,\nyou need a Standard CAL for\n\n192\n00:08:38.810 --> 00:08:41.190\nevery single user that's\ngonna have a mailbox.\n\n193\n00:08:41.190 --> 00:08:45.470\nSo if I have 50,000 users, at a minimum\nI'm gonna need 50,000 Standard CALs,\n\n194\n00:08:45.470 --> 00:08:47.600\nall right?\n\n195\n00:08:47.600 --> 00:08:52.180\nThen if I want some of the advanced\nfunctionality, I can pick and\n\n196\n00:08:52.180 --> 00:08:53.800\nchoose with my Ennterprise CALs.\n\n197\n00:08:53.800 --> 00:08:56.020\nAnd I can say, I got 50,000 users, but\n\n198\n00:08:56.020 --> 00:09:00.220\nthere's only 5,000 of my users\nthat need this one feature.\n\n199\n00:09:00.220 --> 00:09:04.420\nI'll just buy Enterprise CALs for\nthose 5,000 users and that's it.\n\n200\n00:09:04.420 --> 00:09:07.520\nAnd so,\nthose users will have both a standard and\n\n201\n00:09:07.520 --> 00:09:09.690\nan Enterprise CAL to add together.\n\n202\n00:09:09.690 --> 00:09:12.830\nSo when we look at this licensing page,\nit starts off real simple.\n\n203\n00:09:12.830 --> 00:09:15.130\nHere's the difference between Standard and\nEnterprise.\n\n204\n00:09:15.130 --> 00:09:16.700\nThen it gets real complex.\n\n205\n00:09:16.700 --> 00:09:20.350\nWhen it jumps into the client CALs or\nthe client access licences, right?\n\n206\n00:09:20.350 --> 00:09:24.460\nNow it starts to list all these different\nfeatures that come with the Standard CAL\n\n207\n00:09:24.460 --> 00:09:27.440\nand that come with a Standard\nplus Enterprise CAL.\n\n208\n00:09:27.440 --> 00:09:30.010\nNotice how it doesn't just say\nEnterprise CAL by itself, right?\n\n209\n00:09:30.010 --> 00:09:32.240\nYou have to have both a Standard and\n\n210\n00:09:32.240 --> 00:09:34.920\nan Enterprise combined to\nget the Enterprise features.\n\n211\n00:09:36.260 --> 00:09:40.190\nSo the first set here is we look at things\nlike email, calendar, contacts, and\n\n212\n00:09:40.190 --> 00:09:41.130\ntasks, right?\n\n213\n00:09:41.130 --> 00:09:41.930\nThey both have that.\n\n214\n00:09:41.930 --> 00:09:45.051\nIf I just need basic email functionality,\nthese are identical.\n\n215\n00:09:45.051 --> 00:09:50.199\nIf we want Outlook Web App, it we want\nadvanced Outlook functionality, if we want\n\n216\n00:09:50.199 --> 00:09:55.590\nsite mailboxes, role based access control,\nthose are in Standard and Enterprise.\n\n217\n00:09:55.590 --> 00:09:57.466\nYou don't need an Enterprise account for\nthose,\n\n218\n00:09:57.466 --> 00:09:59.261\nthey just come as part of Standard,\nall right?\n\n219\n00:09:59.261 --> 00:10:02.680\nBut then as we scroll down you'll start\nto notice sorta the differences creep up.\n\n220\n00:10:02.680 --> 00:10:07.130\nWe'll see things like journaling,\nunified messaging and so on.\n\n221\n00:10:07.130 --> 00:10:10.070\nThese are part of the Enterprise CAL,\nright?\n\n222\n00:10:10.070 --> 00:10:13.130\nI mentioned unified messaging let's\ntalk about that for a second.\n\n223\n00:10:13.130 --> 00:10:17.080\nIf you have a voice over IP system, most\npeople have a voice over IP system that is\n\n224\n00:10:17.080 --> 00:10:21.270\ncompletely separate from their email,\ntwo separate things.\n\n225\n00:10:21.270 --> 00:10:24.650\nBut, remember how I called\nExchange a collaboration suite?\n\n226\n00:10:24.650 --> 00:10:26.510\nIt's designed to help people communicate,\nright?\n\n227\n00:10:26.510 --> 00:10:28.030\nWe wanna put these pieces together and\n\n228\n00:10:28.030 --> 00:10:32.110\nhelp people communicate through\nwhatever means, not just email.\n\n229\n00:10:32.110 --> 00:10:35.610\nSo with the full collaboration suite,\nwe can send email,\n\n230\n00:10:35.610 --> 00:10:40.130\nwe can do a voice over IP call,\nwe can do a meeting, right?\n\n231\n00:10:40.130 --> 00:10:42.780\nA screen share type meeting or\na video meeting, and\n\n232\n00:10:42.780 --> 00:10:45.380\nwe can do interaction with voicemail.\n\n233\n00:10:45.380 --> 00:10:47.530\nAll through Microsoft Outlook.\n\n234\n00:10:47.530 --> 00:10:49.358\nIt's done with unified messaging.\n\n235\n00:10:49.358 --> 00:10:52.030\nUnified messaging lets you\nconnect your exchange environment\n\n236\n00:10:52.030 --> 00:10:53.840\nwith your voice over IP environment.\n\n237\n00:10:53.840 --> 00:10:57.410\nSo now when that voicemail comes in,\nyou get it right there in your inbox.\n\n238\n00:10:57.410 --> 00:11:01.930\nAnd when you schedule a meeting inside of\nOutlook, it can set a conference number\n\n239\n00:11:01.930 --> 00:11:04.330\nthrough your voice over IP system and\nit can tie it all together.\n\n240\n00:11:04.330 --> 00:11:07.380\nAnd when you click on that\ncontact to call somebody,\n\n241\n00:11:07.380 --> 00:11:10.350\nit can actually dial right from\ninside of Outlook and place the call.\n\n242\n00:11:10.350 --> 00:11:11.970\nIt's really neat stuff.\n\n243\n00:11:11.970 --> 00:11:13.690\nBut not all our users need that.\n\n244\n00:11:13.690 --> 00:11:16.730\nYou might have some mailboxes\nthat are just service mailboxes.\n\n245\n00:11:16.730 --> 00:11:18.070\nThey don't actually have\nemployees tied to them.\n\n246\n00:11:18.070 --> 00:11:19.280\nThey don't need a phone.\n\n247\n00:11:19.280 --> 00:11:22.700\nSo for those, what you would do is\nyou would say, for those mailboxes,\n\n248\n00:11:22.700 --> 00:11:25.650\njust the regular mailboxes,\nI would stick with the Standard license.\n\n249\n00:11:25.650 --> 00:11:30.630\nBut then for anybody who had a VOIP\nextension, I would get them a Standard and\n\n250\n00:11:30.630 --> 00:11:34.680\nan Enterprise CAL, and that's what would\ngive them the ability to use that unified\n\n251\n00:11:34.680 --> 00:11:36.290\nmessaging piece, all right?\n\n252\n00:11:36.290 --> 00:11:38.990\nSo you have to think about this,\ncuz it is expensive, right?\n\n253\n00:11:38.990 --> 00:11:40.420\nThis is adding to the cost,\n\n254\n00:11:40.420 --> 00:11:44.228\nit over doubles the cost of that user when\nyou bump them up to an Enterprise CAL.\n\n255\n00:11:44.228 --> 00:11:47.840\nSo you've gotta look down here and\nsay, do I need these features?\n\n256\n00:11:47.840 --> 00:11:49.530\nDo I need In-Place Archive?\n\n257\n00:11:49.530 --> 00:11:50.890\nDo I need In-Place Hold?\n\n258\n00:11:50.890 --> 00:11:52.720\nDo I need some of these advanced features?\n\n259\n00:11:52.720 --> 00:11:55.703\nAll right, well I don't want to spend\na ton of time diving into these,\n\n260\n00:11:55.703 --> 00:11:58.043\ncuz we're gonna see them\nall throughout this series.\n\n261\n00:11:58.043 --> 00:12:00.840\nBut let me just hit a couple\nof highlights here, right?\n\n262\n00:12:00.840 --> 00:12:04.550\nThe number one reason that you go for an\nEnterprise account is unified messaging.\n\n263\n00:12:04.550 --> 00:12:06.563\nUnified messaging is\na big part of that and so\n\n264\n00:12:06.563 --> 00:12:09.467\nthat's why I singled that one out first,\nall right?\n\n265\n00:12:09.467 --> 00:12:12.794\nThere's a few other things,\nthough, like journaling, okay?\n\n266\n00:12:12.794 --> 00:12:16.130\nJournaling, notice here I've got\nthis journaling per database.\n\n267\n00:12:16.130 --> 00:12:20.924\nWhat journaling is is basically keeping\na record of users emails, all right?\n\n268\n00:12:20.924 --> 00:12:24.067\nHere in the United States right now\nthere's a little bit of controversy over\n\n269\n00:12:24.067 --> 00:12:26.819\na certain politician who maintained\ntheir own mailbox database,\n\n270\n00:12:26.819 --> 00:12:30.600\ntheir own mailbox server, outside of\nwhat the government normally provided.\n\n271\n00:12:30.600 --> 00:12:31.640\nAnd so now,\n\n272\n00:12:31.640 --> 00:12:35.880\nthere's not a reliable record of\nthe emails that were sent by that person.\n\n273\n00:12:35.880 --> 00:12:40.020\nWell, if you have regulatory compliance,\nif you have rules to dictate,\n\n274\n00:12:40.020 --> 00:12:42.935\nyou've got to save emails,\nhow do you keep a record of that?\n\n275\n00:12:42.935 --> 00:12:46.550\nJournaling, in the Standard\nedition of Exchange,\n\n276\n00:12:46.550 --> 00:12:48.420\nwe can do journaling per database, so\n\n277\n00:12:48.420 --> 00:12:53.110\nyou can say, journal everyone in this\ndatabase or no one in this database.\n\n278\n00:12:53.110 --> 00:12:56.330\nBut if we go to an Enterprise CAL,\nwe can pick out individual people.\n\n279\n00:12:56.330 --> 00:12:57.520\nSo we can say, hey,\n\n280\n00:12:57.520 --> 00:13:02.360\nthe CEO of our company, we wanna\nretain their email for five years.\n\n281\n00:13:02.360 --> 00:13:06.260\nBut the mailroom clerk,\nwe wanna retain their email for 30 days.\n\n282\n00:13:06.260 --> 00:13:07.730\nYou can get very, very specific.\n\n283\n00:13:07.730 --> 00:13:09.750\nYou can set these granular policies.\n\n284\n00:13:09.750 --> 00:13:13.090\nSo if you need journaling and\nretention policies like that,\n\n285\n00:13:13.090 --> 00:13:17.190\nthat are really granular,\nyou'll need to go to an Enterprise CAL.\n\n286\n00:13:17.190 --> 00:13:19.140\nAlso, we've got things\nlike retention policies,\n\n287\n00:13:19.140 --> 00:13:23.100\nwhich ties into the journaling, right,\nhow long we retain those messages, and\n\n288\n00:13:23.100 --> 00:13:25.110\neven setting which messages get retained.\n\n289\n00:13:25.110 --> 00:13:27.570\nNow I'm not talking about per user,\nI'm talking about per message.\n\n290\n00:13:27.570 --> 00:13:31.860\nI might say, any message that has this\nkeyword in it needs to be saved for\n\n291\n00:13:31.860 --> 00:13:32.499\nseven years.\n\n292\n00:13:34.290 --> 00:13:35.580\nWe've got In-Place Archive.\n\n293\n00:13:35.580 --> 00:13:37.680\nNow archive is a big deal.\n\n294\n00:13:37.680 --> 00:13:38.880\nIf you've run Outlook.\n\n295\n00:13:38.880 --> 00:13:41.530\nI mean, I remember running\nOutlook back in the 90s.\n\n296\n00:13:41.530 --> 00:13:44.940\nWhen you ran Microsoft Outlook your\nmailbox was all being backed up\n\n297\n00:13:44.940 --> 00:13:47.650\nto a PST file, right,\nthis PST file on your hard drive.\n\n298\n00:13:47.650 --> 00:13:51.800\nAs it grew and grew and grew,\nOutlook got slower and slower and slower.\n\n299\n00:13:51.800 --> 00:13:53.690\nAnd so people would archive.\n\n300\n00:13:53.690 --> 00:13:55.900\nAnd when you would archive it,\nit would take your email and\n\n301\n00:13:55.900 --> 00:13:58.880\nit would take it out of the mailbox and\nput it in a secondary file.\n\n302\n00:13:58.880 --> 00:14:00.870\nAnd it would say, all right we're\ngonna stick it over here and\n\n303\n00:14:00.870 --> 00:14:02.970\nmake your mailbox smaller,\nmake it faster, right?\n\n304\n00:14:02.970 --> 00:14:04.450\nAnd it did, that worked.\n\n305\n00:14:04.450 --> 00:14:08.120\nBut here was the problem,\nwhen people's email was on the server,\n\n306\n00:14:08.120 --> 00:14:10.530\ntheir server was being backed up, right?\n\n307\n00:14:10.530 --> 00:14:12.850\nAnd if the server failed,\nwe could always restore it.\n\n308\n00:14:12.850 --> 00:14:14.930\nThe server admins would back that up.\n\n309\n00:14:14.930 --> 00:14:17.880\nBut their laptop or their desktop\nmight not be getting backed up.\n\n310\n00:14:17.880 --> 00:14:21.640\nAnd when Outlook did an archive,\nit would archive right to their laptop or\n\n311\n00:14:21.640 --> 00:14:23.780\nright to their desktop, and\nit wouldn't get backed up anymore,\n\n312\n00:14:23.780 --> 00:14:26.030\nand people were losing email left and\nright.\n\n313\n00:14:26.030 --> 00:14:27.330\nYou can do a Google\nsearch on the Internet,\n\n314\n00:14:27.330 --> 00:14:31.150\nyou'll find tons of people saying,\nI lost my archive, Outlook sucks.\n\n315\n00:14:31.150 --> 00:14:32.620\nA lot of people complained about that.\n\n316\n00:14:32.620 --> 00:14:35.565\nAnd it's just because you're not\nstoring that archive safely.\n\n317\n00:14:35.565 --> 00:14:38.110\nIn-Place Archive solves that.\n\n318\n00:14:38.110 --> 00:14:40.820\nIt says, we're gonna allow people to\narchive their mailboxes to make them\n\n319\n00:14:40.820 --> 00:14:43.450\nsmaller, but instead of storing\nit on their laptop or desktop,\n\n320\n00:14:43.450 --> 00:14:46.010\nwe're gonna store it\nright here on the server.\n\n321\n00:14:46.010 --> 00:14:48.470\nNow, it might be in a different\nplace on the server.\n\n322\n00:14:48.470 --> 00:14:53.960\nWe might have 15,000 RPM SCSI drives\nthat are handling our mailbox database,\n\n323\n00:14:53.960 --> 00:14:58.760\nand we might have,\njust 5400 RPM SADA drives,\n\n324\n00:14:58.760 --> 00:15:01.220\nreally cheap hard drives,\nsitting over here for the archive.\n\n325\n00:15:01.220 --> 00:15:02.380\nSo it's slower storage.\n\n326\n00:15:02.380 --> 00:15:06.070\nIt's cheaper storage, but that's where the\narchive sits when we back that up, right?\n\n327\n00:15:06.070 --> 00:15:08.620\nWhen we know that it's on Raid 5 or\nRaid 10 or Razor, or whatever,\n\n328\n00:15:08.620 --> 00:15:10.410\nthat's got that protection in place.\n\n329\n00:15:10.410 --> 00:15:15.300\nSo now the server admins can protect\nall of your mail, your main mailbox and\n\n330\n00:15:15.300 --> 00:15:17.600\nyour archive, not just the main mailbox.\n\n331\n00:15:17.600 --> 00:15:21.560\nThat's a solution that comes\nwith the Enterprise CAL.\n\n332\n00:15:21.560 --> 00:15:23.880\nWe've got other things like In-Place Hold.\n\n333\n00:15:23.880 --> 00:15:26.510\nIn Exchange, by default,\nif you delete somebody's mailbox,\n\n334\n00:15:26.510 --> 00:15:28.340\nit'll hold onto it for 30 days.\n\n335\n00:15:28.340 --> 00:15:30.740\nAnd then after 30 days it gets rid\nof the mailbox, that's the default.\n\n336\n00:15:30.740 --> 00:15:32.285\nYou can manipulate that time.\n\n337\n00:15:32.285 --> 00:15:36.698\nIn Exchange 2013 with an Enterprise CAL,\nyou can define an In-Place Hold to say\n\n338\n00:15:36.698 --> 00:15:40.117\nwhen we delete an individual message,\nthat we wanna to hold it for\n\n339\n00:15:40.117 --> 00:15:43.620\na certain period of time and\nthe end user can't clear it out.\n\n340\n00:15:43.620 --> 00:15:45.547\nAnd we can even say that for\na whole mailbox if we want, or\n\n341\n00:15:45.547 --> 00:15:47.930\na whole mailbox database, so\nyou can get really powerful with that.\n\n342\n00:15:49.812 --> 00:15:52.406\nAll right, so\nthose are some of the bigger differences.\n\n343\n00:15:52.406 --> 00:15:53.295\nThere's other ones,\n\n344\n00:15:53.295 --> 00:15:56.259\nthey list a bunch of them like all\nthe rights management features and so on.\n\n345\n00:15:56.259 --> 00:15:59.102\nIf you want those,\nyou gotta go to an enterprise account.\n\n346\n00:15:59.102 --> 00:16:03.248\nBut if you don't need those, if you're\njust looking for email, calendar, tasks,\n\n347\n00:16:03.248 --> 00:16:06.380\nright, public folders,\nyou could do that with a standard CAL.\n\n348\n00:16:06.380 --> 00:16:09.910\nAnd at a minimum,\nyou're going to need one standard CAL for\n\n349\n00:16:09.910 --> 00:16:14.060\neach user mailbox on the server.\n\n350\n00:16:14.060 --> 00:16:16.090\nSo for everybody that's\ngonna be connecting to it.\n\n351\n00:16:16.090 --> 00:16:16.620\nAll right.\n\n352\n00:16:16.620 --> 00:16:19.250\nNow Exchange does kind of work\non an honor system, and so\n\n353\n00:16:19.250 --> 00:16:22.730\nit's up to you to track those numbers and\nthen if Microsoft ever audits you,\n\n354\n00:16:22.730 --> 00:16:25.280\nthen you've got to show that you've\npurchased the right amount of CALs.\n\n355\n00:16:25.280 --> 00:16:27.400\nIt doesn't really enforce\nit with an iron fist, so\n\n356\n00:16:27.400 --> 00:16:29.240\nthey're not gonna harp on\nyou too much about it.\n\n357\n00:16:29.240 --> 00:16:33.250\nBut you will get a little warning if\nyou've applied Enterprise features to more\n\n358\n00:16:33.250 --> 00:16:36.010\nusers than you have Enterprise CALs,\nyou'll get a warning about that.\n\n359\n00:16:36.010 --> 00:16:38.200\nIt'll let you know that you\ndon't have enough CALs.\n\n360\n00:16:38.200 --> 00:16:38.950\nAll right.\n\n361\n00:16:38.950 --> 00:16:41.630\nSo, when purchasing Exchange,\nour first decision is,\n\n362\n00:16:41.630 --> 00:16:44.100\ndo we go with Standard, or Enterprise?\n\n363\n00:16:44.100 --> 00:16:47.020\nAnd that comes strictly down to how\nmany mailbox databases we have.\n\n364\n00:16:47.020 --> 00:16:49.360\nAnd it only applies to\nthe mailbox servers.\n\n365\n00:16:49.360 --> 00:16:51.900\nSo, for our client access servers,\nfor our Edge servers,\n\n366\n00:16:51.900 --> 00:16:54.800\nthose you always do Standard,\nthere's no point in doing Enterprise.\n\n367\n00:16:54.800 --> 00:16:56.380\nBut on your mailbox server,\n\n368\n00:16:56.380 --> 00:16:59.299\nif you need more then five mailbox\ndatabases, you go Enterprise.\n\n369\n00:17:00.370 --> 00:17:03.020\nAnd then you pick your Cals.\n\n370\n00:17:03.020 --> 00:17:06.780\nAll of your users need a standard CAL, and\nthen for those advanced features I just\n\n371\n00:17:06.780 --> 00:17:10.600\ntalked about a moment ago, like unified\nmessaging, advanced journaling and so on.\n\n372\n00:17:10.600 --> 00:17:15.171\nIf you need those, you buy an Enterprise\nCAL for each user that's gonna need those\n\n373\n00:17:15.171 --> 00:17:19.031\nin addition to their standard CAL,\nright, they definitely add on.\n\n374\n00:17:19.031 --> 00:17:19.920\nAll right.\n\n375\n00:17:19.920 --> 00:17:22.080\nSo those are some of\nthe decisions we need to make.\n\n376\n00:17:22.080 --> 00:17:23.800\nThere is one other really big decision.\n\n377\n00:17:24.820 --> 00:17:28.240\nShould I even be installing\nExchange in the first place, right?\n\n378\n00:17:28.240 --> 00:17:29.540\nAnd I know it sounds kinda funny.\n\n379\n00:17:29.540 --> 00:17:31.490\nAnd I'm a server admin.\n\n380\n00:17:31.490 --> 00:17:32.570\nI've done it for years.\n\n381\n00:17:32.570 --> 00:17:36.330\nAnd this is one of those decisions that\nyou think might put you out of a job.\n\n382\n00:17:36.330 --> 00:17:37.370\nIt really doesn't,\n\n383\n00:17:37.370 --> 00:17:41.100\nwhich is [LAUGH] what if I choose to\njust throw it in the Cloud instead?\n\n384\n00:17:41.100 --> 00:17:42.430\nI could host Exchange.\n\n385\n00:17:42.430 --> 00:17:43.880\nI know how.\nI can bring up the servers.\n\n386\n00:17:43.880 --> 00:17:44.863\nI can install the software.\n\n387\n00:17:44.863 --> 00:17:46.890\nI can get an Exchange\nenvironment going on right now.\n\n388\n00:17:46.890 --> 00:17:48.680\nBut, I'm busy.\n\n389\n00:17:48.680 --> 00:17:50.080\nI don't have a lot of time on my hands.\n\n390\n00:17:50.080 --> 00:17:51.670\nI'm doing shows like this one.\n\n391\n00:17:51.670 --> 00:17:53.660\nSo, what happens if that server fails?\n\n392\n00:17:53.660 --> 00:17:55.340\nWhat happens if a new\nemployee gets hired and\n\n393\n00:17:55.340 --> 00:17:57.200\nI don't have time to create their mailbox?\n\n394\n00:17:57.200 --> 00:18:00.730\nWell, wouldn't it be nice if we\njust let somebody else handle it?\n\n395\n00:18:00.730 --> 00:18:01.330\nAnd you can do that.\n\n396\n00:18:01.330 --> 00:18:04.280\nSo, Microsoft has online.\n\n397\n00:18:04.280 --> 00:18:06.620\nYou can do it where it's hosted Exchange.\n\n398\n00:18:06.620 --> 00:18:08.340\nNow there's two ways to deploy it, right.\n\n399\n00:18:08.340 --> 00:18:10.880\nThere's one way,\nwhich is where you just use Azure VMs.\n\n400\n00:18:10.880 --> 00:18:13.320\nSo you bring up these virtual machines and\nMicrosoft Azure,\n\n401\n00:18:13.320 --> 00:18:15.360\nor Amazon web services or whoever.\n\n402\n00:18:15.360 --> 00:18:16.880\nAnd you deploy Exchange in there.\n\n403\n00:18:16.880 --> 00:18:17.930\nNow you're still managing that.\n\n404\n00:18:17.930 --> 00:18:21.090\nThe only difference there is you kinda\noutsourced your hardware, not the support,\n\n405\n00:18:21.090 --> 00:18:21.930\nyou're still supporting it.\n\n406\n00:18:23.180 --> 00:18:26.770\nBut an even better route is\nto go with Exchange Online.\n\n407\n00:18:26.770 --> 00:18:29.140\nLet me bring up their webpage right here.\n\n408\n00:18:29.140 --> 00:18:33.520\nMicrosoft Exchange Online is where\nthey handle everything for you.\n\n409\n00:18:33.520 --> 00:18:35.020\nThey take care of the servers.\n\n410\n00:18:35.020 --> 00:18:36.360\nThey take care of the provisioning.\n\n411\n00:18:36.360 --> 00:18:38.560\nThey take care of whether you have\na standard CAL or an Enterprise CAL.\n\n412\n00:18:38.560 --> 00:18:39.720\nThey take care of all of that.\n\n413\n00:18:39.720 --> 00:18:42.070\nAnd they just charge\nyou a per-mailbox fee.\n\n414\n00:18:42.070 --> 00:18:44.960\nAnd you log into the website,\nyou access your email, and\n\n415\n00:18:44.960 --> 00:18:48.150\nyou don't even have to worry about\nhow many hard drives you have or\n\n416\n00:18:48.150 --> 00:18:49.830\nwhether you have air-conditioning units.\n\n417\n00:18:49.830 --> 00:18:52.870\nWhether the servers are being backed up,\nwhether there's a UPS attached,\n\n418\n00:18:52.870 --> 00:18:54.610\nyou don't have to worry about any of that.\n\n419\n00:18:54.610 --> 00:18:56.230\nMicrosoft takes care of it for you.\n\n420\n00:18:56.230 --> 00:18:58.870\nAnd you don't have to worry about\nhow to get Exchange installed or\n\n421\n00:18:58.870 --> 00:19:00.470\nhow to troubleshoot it.\n\n422\n00:19:00.470 --> 00:19:04.710\nMicrosoft has their staff of who\nare arguably are the best Exchange\n\n423\n00:19:04.710 --> 00:19:07.480\nadministrators on the planet because\nthey're the ones who write the software.\n\n424\n00:19:07.480 --> 00:19:09.230\nThey're the ones who support it.\n\n425\n00:19:09.230 --> 00:19:12.250\nIf you're a small business,\nI encourage you to do this.\n\n426\n00:19:12.250 --> 00:19:14.494\nIt's not worth it to try and\nmaintain your own Exchange environment.\n\n427\n00:19:14.494 --> 00:19:17.210\nIt becomes pretty challenging, right?\n\n428\n00:19:17.210 --> 00:19:21.350\nBut, if you've got sensitive data,\nprivate data, data that you\n\n429\n00:19:21.350 --> 00:19:25.420\ncan't allow somebody else to host,\nyou don't want to host that on Microsoft.\n\n430\n00:19:25.420 --> 00:19:26.480\nYou wanna make sure you run it yourself,\n\n431\n00:19:26.480 --> 00:19:28.950\nthat way you have complete\ncontrol of those servers.\n\n432\n00:19:28.950 --> 00:19:31.190\nYou know where your data is at all times,\nright.\n\n433\n00:19:31.190 --> 00:19:32.430\nThat's important.\n\n434\n00:19:32.430 --> 00:19:33.670\nBut, it is an option.\n\n435\n00:19:33.670 --> 00:19:37.480\nYou'll see it's $4 per user,\nper month for a standard license.\n\n436\n00:19:37.480 --> 00:19:38.230\nNow that is standard.\n\n437\n00:19:38.230 --> 00:19:39.920\nSee how they've got compare plans?\n\n438\n00:19:39.920 --> 00:19:42.950\nAnd you can go into the plans and\nstart to look at what's available.\n\n439\n00:19:42.950 --> 00:19:45.900\nAnd you'll see $4 versus $8.\n\n440\n00:19:45.900 --> 00:19:48.090\nWhy twice as much for the online plan 2?\n\n441\n00:19:48.090 --> 00:19:50.260\nThat's the Enterprise CAL, right?\n\n442\n00:19:50.260 --> 00:19:53.043\nThese are users that have a standard and\nan Enterprise CAL, and so\n\n443\n00:19:53.043 --> 00:19:56.295\nas you start to scroll down, we'll\npass on chatting with Microsoft today.\n\n444\n00:19:56.295 --> 00:20:00.074\nBut as I scroll down, I'll see\nthe differences here in place hold,\n\n445\n00:20:00.074 --> 00:20:05.160\nunlimited storage, hosted voicemail,\ndata loss protection or prevention.\n\n446\n00:20:05.160 --> 00:20:08.930\nThose are the Enterprise CAL features,\nright?\n\n447\n00:20:08.930 --> 00:20:11.240\nData loss prevention,\nI didn't talk about that one.\n\n448\n00:20:11.240 --> 00:20:12.790\nThis is not like backups.\n\n449\n00:20:12.790 --> 00:20:16.960\nThis is data retention for\nregulatory compliance, I did mention that.\n\n450\n00:20:16.960 --> 00:20:18.530\nI just didn't call it DLP.\n\n451\n00:20:18.530 --> 00:20:22.630\nSo if I need to retain email for\nseven years, DLP will let me do that.\n\n452\n00:20:22.630 --> 00:20:25.431\nEven if the user completely deletes it,\nempties the recycle bin,\n\n453\n00:20:25.431 --> 00:20:26.790\nthey think it's gone?\n\n454\n00:20:26.790 --> 00:20:29.000\nDLP still saves that copy so\nI've got it, right.\n\n455\n00:20:29.000 --> 00:20:30.592\nSo I maintained my compliance.\n\n456\n00:20:30.592 --> 00:20:34.380\nSo this is a great option for\nsmall businesses if you've got,\n\n457\n00:20:34.380 --> 00:20:36.310\nlet's say you have ten mailboxes.\n\n458\n00:20:36.310 --> 00:20:38.152\nYou can pay Microsoft $40 a month.\n\n459\n00:20:38.152 --> 00:20:40.364\nYour ten mailboxes get hosted right there,\n\n460\n00:20:40.364 --> 00:20:44.390\nyou get a full world-class Exchange\nserver environment, for $40 a month.\n\n461\n00:20:44.390 --> 00:20:48.210\nThat's a great solution, and that's what I\nalways encourage small businesses to do.\n\n462\n00:20:48.210 --> 00:20:50.950\nBut if you're a medium or\nlarge business, there is an economy of\n\n463\n00:20:50.950 --> 00:20:53.559\nscale here where you might be\nable to do it cheaper yourself.\n\n464\n00:20:53.559 --> 00:20:55.599\nBut at a minimum, you get more control,\n\n465\n00:20:55.599 --> 00:20:58.188\nif you wanna control all\nthe aspects of the system.\n\n466\n00:20:58.188 --> 00:20:59.950\nHere you don't, right?\n\n467\n00:20:59.950 --> 00:21:03.070\nYour mailboxes are being hosted\non servers with other customers.\n\n468\n00:21:03.070 --> 00:21:05.660\nYou don't see it, it's all hidden\nfrom you, but that's the truth of it.\n\n469\n00:21:05.660 --> 00:21:08.581\nBehind the scene, you're being hosted\non servers with other customers, and\n\n470\n00:21:08.581 --> 00:21:10.510\nyou don't know who those customers are.\n\n471\n00:21:10.510 --> 00:21:13.250\nAnd so there's a risk that you\ntake when you use a Cloud service.\n\n472\n00:21:13.250 --> 00:21:15.240\nFor most people that's fine,\nit's an acceptable risk.\n\n473\n00:21:15.240 --> 00:21:19.970\nWe do it with ITPro TV, ours is hosted\nthrough Microsoft, and it works great.\n\n474\n00:21:19.970 --> 00:21:21.490\nBut you can host your own, too.\n\n475\n00:21:21.490 --> 00:21:22.950\nSo that's another decision.\n\n476\n00:21:22.950 --> 00:21:25.130\nThey call that a make or buy analysis.\n\n477\n00:21:25.130 --> 00:21:26.640\nYour project managers, your CIO,\n\n478\n00:21:26.640 --> 00:21:29.940\nthey'll know what that is,\nwhere do I make the solution myself?\n\n479\n00:21:29.940 --> 00:21:32.340\nBuild my own Exchange servers up,\nor do I buy?\n\n480\n00:21:32.340 --> 00:21:34.442\nDo I just let somebody else do it for me?\n\n481\n00:21:34.442 --> 00:21:36.954\nAnd doing this online,\nit works out really well.\n\n482\n00:21:36.954 --> 00:21:42.134\nI'm showing you here Exchange online,\nbut there's also Office 365, which\n\n483\n00:21:42.134 --> 00:21:48.260\npackages Exchange, but also gives you full\nOffice Suite and SharePoint connectivity.\n\n484\n00:21:48.260 --> 00:21:52.290\nThat's a neat new feature in Exchange 2013\nis you got a really good tight integration\n\n485\n00:21:52.290 --> 00:21:53.420\nwith SharePoint.\n\n486\n00:21:53.420 --> 00:21:55.420\nYou know, let me talk about\nthat real quick for a second.\n\n487\n00:21:55.420 --> 00:21:57.150\nLet me see if I can pull this page up.\n\n488\n00:21:58.280 --> 00:22:01.225\nIf you're looking at going into Exchange\nis another decision you have to make,\n\n489\n00:22:01.225 --> 00:22:04.280\nwhich is,\ndo I want to go with Exchange 2013?\n\n490\n00:22:04.280 --> 00:22:09.050\nExchange 2010 is still supported and\nit's more popular, right?\n\n491\n00:22:09.050 --> 00:22:11.090\nExchange 2013's only been out a few years.\n\n492\n00:22:11.090 --> 00:22:13.380\nIt's not as widely deployed as 2010.\n\n493\n00:22:13.380 --> 00:22:15.870\nMaybe I wanna go ahead and\ndeploy 2010 instead, right?\n\n494\n00:22:15.870 --> 00:22:17.830\nWhy would I jump straight to 2013?\n\n495\n00:22:17.830 --> 00:22:20.540\nWell, [LAUGH] I'll give you\nthe best argument right there.\n\n496\n00:22:20.540 --> 00:22:22.440\nThe best reason to jump to 2013 is so\n\n497\n00:22:22.440 --> 00:22:25.910\nthat you don't have to upgrade\nto 2013 later on, right?\n\n498\n00:22:25.910 --> 00:22:28.570\nIf you're doing a brand\nnew Exchange install,\n\n499\n00:22:28.570 --> 00:22:30.670\nalways start with\nthe latest one if you can.\n\n500\n00:22:30.670 --> 00:22:34.481\nBecause otherwise, two years from now,\nyou're gonna have to do an upgrade, and\n\n501\n00:22:34.481 --> 00:22:37.650\nit's gonna be costly,\ntime-consuming, and risky, right?\n\n502\n00:22:37.650 --> 00:22:40.270\nAny time you do an upgrade,\nthere's a risk something could go wrong.\n\n503\n00:22:40.270 --> 00:22:42.110\nBest to avoid that if you can, right?\n\n504\n00:22:42.110 --> 00:22:43.930\nSo always deploy the latest one.\n\n505\n00:22:43.930 --> 00:22:46.590\nBut if your environment's\nalready running Exchange 2010,\n\n506\n00:22:46.590 --> 00:22:48.290\nyou can stay on Exchange 2010.\n\n507\n00:22:48.290 --> 00:22:49.380\nMicrosoft still supports it.\n\n508\n00:22:49.380 --> 00:22:52.600\nI know you're thinking 2010,\nthat's five years old.\n\n509\n00:22:52.600 --> 00:22:53.470\nWell, it is.\n\n510\n00:22:53.470 --> 00:22:55.170\nBut Microsoft has wide support for it.\n\n511\n00:22:55.170 --> 00:22:57.010\nThey're really good about\nsupporting that for a long time.\n\n512\n00:22:57.010 --> 00:23:00.280\nWe'll probably see Exchange\n2010 supported well into 2017.\n\n513\n00:23:00.280 --> 00:23:02.080\nIt'll probably go for a while.\n\n514\n00:23:02.080 --> 00:23:05.430\nBut Microsoft has this nice little chart\nwhere they kinda show you what you would\n\n515\n00:23:05.430 --> 00:23:09.740\nlose if you were to go with one of\nthe older versions of Exchange.\n\n516\n00:23:09.740 --> 00:23:12.950\nSo for example, you'll see things\nlike administration has changed.\n\n517\n00:23:14.080 --> 00:23:15.540\nIn previous versions of Exchange,\n\n518\n00:23:15.540 --> 00:23:19.510\nwe managed it by using\nthe Enterprise Management Console.\n\n519\n00:23:19.510 --> 00:23:21.800\nAnd that Console was an MMC.\n\n520\n00:23:21.800 --> 00:23:24.160\nIt was software that ran right on\nyour client, and it was a pain.\n\n521\n00:23:24.160 --> 00:23:25.540\nIt was really slow.\n\n522\n00:23:25.540 --> 00:23:28.220\nAnd if you were on a new computer,\nyou had to install it.\n\n523\n00:23:28.220 --> 00:23:31.178\nIn Exchange 2013,\nwe have a web management interface.\n\n524\n00:23:31.178 --> 00:23:32.440\nYou just browse this webpage and\nyou manage it.\n\n525\n00:23:32.440 --> 00:23:35.670\nYou don't need to install anything on your\nclient and that makes life a lot easier.\n\n526\n00:23:35.670 --> 00:23:38.295\nThat's something you\ngain by going to 2013.\n\n527\n00:23:38.295 --> 00:23:42.051\nSome of the other things that you gain,\nwell, you'll notice like over at 2010,\n\n528\n00:23:42.051 --> 00:23:44.503\nthere's a lot of these\nfeatures 2010 already has,\n\n529\n00:23:44.503 --> 00:23:47.950\nlike role-based administration,\nCloud integration if you want.\n\n530\n00:23:47.950 --> 00:23:51.190\nYou don't necessarily have to go\nwith that, managed availability.\n\n531\n00:23:51.190 --> 00:23:53.880\nBut we'll start to see some of the bigger\ndifferences down here with the new\n\n532\n00:23:53.880 --> 00:23:57.370\nthings that have been introduced,\nlike support for Apps.\n\n533\n00:23:57.370 --> 00:24:00.989\nThird party applications are allowed to\nintegrate with the Outlook web app at\n\n534\n00:24:00.989 --> 00:24:01.552\n2013.\n\n535\n00:24:01.552 --> 00:24:03.340\nThey weren't able to do that in 2010.\n\n536\n00:24:03.340 --> 00:24:06.980\nAnd that means third party companies\nare writing some really cool integrations.\n\n537\n00:24:06.980 --> 00:24:12.630\nI saw some Salesforce.com demos,\nand even Microsoft CRM demos,\n\n538\n00:24:12.630 --> 00:24:16.720\nwhere you'd go into Outlook and\na phone call would come in.\n\n539\n00:24:16.720 --> 00:24:20.710\nYou're in OWA, and the contact record for\nthat person calling in would pop up and\n\n540\n00:24:20.710 --> 00:24:23.180\nyou'd see their information so\nyou'd know who it was that was calling and\n\n541\n00:24:23.180 --> 00:24:24.300\nhave all that data.\n\n542\n00:24:24.300 --> 00:24:25.850\nIt's great for salespeople, right?\n\n543\n00:24:25.850 --> 00:24:29.350\nThat kind of functionality is stuff\nthat you gain by going with 2013.\n\n544\n00:24:29.350 --> 00:24:32.640\nOther things, SharePoint Integration,\nI mentioned that one right,\n\n545\n00:24:32.640 --> 00:24:35.370\nreally tight\nSharePoint Integration with 2013.\n\n546\n00:24:35.370 --> 00:24:39.988\nDLP, that data loss prevention,\nwhich is the enhanced records management.\n\n547\n00:24:39.988 --> 00:24:43.866\nBeing able to keep that data and maintain\nour compliance, that's new in 2013.\n\n548\n00:24:43.866 --> 00:24:46.819\nAnd you'll see a few other things\nthat have just been improved,\n\n549\n00:24:46.819 --> 00:24:50.440\nlike improved E-Discovery,\nwhere we can search for mailboxes.\n\n550\n00:24:50.440 --> 00:24:54.700\nThese are all newer things in 2013 that,\nif you want those features,\n\n551\n00:24:54.700 --> 00:24:55.900\nyou want to jump to 2013.\n\n552\n00:24:55.900 --> 00:24:56.820\nThat's the one that you want.\n\n553\n00:24:56.820 --> 00:24:57.444\nAll right.\n\n554\n00:24:57.444 --> 00:25:01.490\nBut just all that aside,\njust from my own personal experience,\n\n555\n00:25:01.490 --> 00:25:04.750\nyou usually don't want to deploy an older\nversion of Exchange if you can avoid it.\n\n556\n00:25:04.750 --> 00:25:07.100\nIf you can always go with the newest one,\nyou want to go with the newest one,\n\n557\n00:25:07.100 --> 00:25:10.140\nbecause that'll save you\nan upgrade down the road.\n\n558\n00:25:10.140 --> 00:25:12.450\nI've done literally hundreds\nof Exchange upgrades.\n\n559\n00:25:12.450 --> 00:25:16.317\nAnd I'll tell you, if I could have avoided\nthem, I would have, every one of them.\n\n560\n00:25:16.317 --> 00:25:17.940\nSo [LAUGH] that's kinda how it is.\n\n561\n00:25:17.940 --> 00:25:21.910\nAnd newer upgrades aren't as painful\nas the old ones used to be, but\n\n562\n00:25:21.910 --> 00:25:24.980\nit's still something you'd\nrather avoid if you can.\n\n563\n00:25:24.980 --> 00:25:27.620\nWell, I think I've kind of gone\non long enough on this one,\n\n564\n00:25:27.620 --> 00:25:31.610\nbut in this episode we got\na chance to see what Exchange is.\n\n565\n00:25:31.610 --> 00:25:34.930\nWe talked about the licensing as far as\nStandard versus Enterprise licensing.\n\n566\n00:25:34.930 --> 00:25:38.036\nWe talked about the client access\nlicensing as far as the Standard and\n\n567\n00:25:38.036 --> 00:25:39.430\nthe Enterprise CAL there.\n\n568\n00:25:39.430 --> 00:25:41.940\nWe took a look at the online\noffering from Microsoft,\n\n569\n00:25:41.940 --> 00:25:44.350\nif we wanna do a hosted\nExchange environment.\n\n570\n00:25:44.350 --> 00:25:47.710\nAnd lastly, we just talked about\nthe different versions of Exchange and\n\n571\n00:25:47.710 --> 00:25:49.140\nwhich one we wanna go with.\n\n572\n00:25:49.140 --> 00:25:53.110\nSo, hope that opens up your eyes there\nas far as where we're going on that.\n\n573\n00:25:53.110 --> 00:25:55.440\nWe're a little light on the technical\ndetails this episode though, aren't we?\n\n574\n00:25:55.440 --> 00:25:58.614\nSo I'm really looking forward to our next\ncouple of episodes where we dive into our\n\n575\n00:25:58.614 --> 00:26:01.651\nExchange architecture, our framework,\nand then we start to get our Exchange\n\n576\n00:26:01.651 --> 00:26:03.460\nenvironment installed and\nbuild from there.\n\n577\n00:26:03.460 --> 00:26:05.300\nSo definitely stay tuned for that.\n\n578\n00:26:05.300 --> 00:26:07.740\nBut, for this episode,\nthat's a good place to wrap it up.\n\n579\n00:26:07.740 --> 00:26:09.240\nSo I hope you guys enjoyed it.\n\n580\n00:26:09.240 --> 00:26:11.351\nSigning off for ITProTV, I'm Don Pizet.\n\n581\n00:26:11.351 --> 00:26:12.984\nAnd I'll see you next time.\n\n582\n00:26:12.984 --> 00:26:18.860\n[MUSIC]\n\n",
          "vimeoId": "135908053"
        },
        {
          "description": "In this episode, Don discusses the server roles available in Exchange 2013. He begins by discussing the roles found in Exchange 2010 and earlier, and then wraps up by explaining the mail flow in Exchange 2013 along with how each role interacts.",
          "length": "1400",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-2-exchange_server_roles-081015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-2-exchange_server_roles-081015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-2-exchange_server_roles-081015-1-sm.jpg",
          "title": "Exchange Server Roles",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.288\n[MUSIC]\n\n2\n00:00:10.288 --> 00:00:12.668\nAll right, good morning,\ngood afternoon and good evening.\n\n3\n00:00:12.668 --> 00:00:15.175\nWelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.175 --> 00:00:18.812\nI'm your host Don Pezet back\nagain with another episode of\n\n5\n00:00:18.812 --> 00:00:20.850\nMicrosoft Exchange 2013.\n\n6\n00:00:20.850 --> 00:00:25.860\nIn this episode we're gonna be taking\na look at the Exchange Server roles that\n\n7\n00:00:25.860 --> 00:00:27.300\nwe can deploy Exchange in.\n\n8\n00:00:27.300 --> 00:00:31.490\nWhen you install Exchange there's actually\na number of different pieces inside of it.\n\n9\n00:00:31.490 --> 00:00:34.985\nAnd if you're a small business you can\njust install it all on the same server,\n\n10\n00:00:34.985 --> 00:00:36.785\njust have all the roles\nright there in one place.\n\n11\n00:00:36.785 --> 00:00:39.600\nYou have one big super Exchange Server,\nthat works fine.\n\n12\n00:00:39.600 --> 00:00:42.050\nAnd for small businesses\nthat's the recommendation.\n\n13\n00:00:42.050 --> 00:00:45.530\nBut for medium and large business,\nas you start growing,\n\n14\n00:00:45.530 --> 00:00:49.540\nwhen you have several thousand or\ntens of thousands of mailboxes,\n\n15\n00:00:49.540 --> 00:00:51.800\nthere's no single server that's\ngonna be able to hold up to that.\n\n16\n00:00:51.800 --> 00:00:54.210\nNot to mention just the fact that\nthere's a single point of failure.\n\n17\n00:00:54.210 --> 00:00:56.460\nWhat if that single server fails?\n\n18\n00:00:56.460 --> 00:00:57.920\nNow you're out of luck.\n\n19\n00:00:57.920 --> 00:01:02.030\nSo if we want redundancy, if we want\nscale, if we wanna be able to grow to\n\n20\n00:01:02.030 --> 00:01:05.610\nsupport our user base, we're gonna\nhave to deploy more than one server.\n\n21\n00:01:05.610 --> 00:01:09.640\nAnd when you deploy more than one server,\nyou're breaking up the pieces of Exchange\n\n22\n00:01:09.640 --> 00:01:12.330\nand spreading them out across\nmultiple pieces of hardware.\n\n23\n00:01:12.330 --> 00:01:14.700\nSo we need to understand\nwhat those pieces are.\n\n24\n00:01:14.700 --> 00:01:19.470\nNow for those of you that are taking\nthe exam, they expect you to know the new\n\n25\n00:01:19.470 --> 00:01:23.880\nroles in Exchange 2013 as well as\nthe previous ones from 2010 and earlier.\n\n26\n00:01:23.880 --> 00:01:25.400\nSo I'm gonna cover both of them.\n\n27\n00:01:25.400 --> 00:01:29.190\nBut even for those of you that aren't\ntaking the exam, it's good data to have\n\n28\n00:01:29.190 --> 00:01:33.250\nbecause if you have an existing Exchange\nenvironment and you're upgrading,\n\n29\n00:01:33.250 --> 00:01:36.360\nyou need to know what happens to those\nroles, how you build around that.\n\n30\n00:01:36.360 --> 00:01:39.350\nOr you'll find a lot of technical\ndata out there on the Internet,\n\n31\n00:01:39.350 --> 00:01:43.060\nif you start Googling for help, where\npeople are referring to the old roles.\n\n32\n00:01:43.060 --> 00:01:45.980\nAnd so we need to make sure we\nunderstand those different pieces,\n\n33\n00:01:45.980 --> 00:01:48.150\nwhat each piece does.\n\n34\n00:01:48.150 --> 00:01:51.740\nSo let's start with the old way and\nthen we'll move to the new way.\n\n35\n00:01:51.740 --> 00:01:56.185\nIn Exchange 2010 there were actually\nfive different roles inside of\n\n36\n00:01:56.185 --> 00:01:59.150\nMicrosoft Exchange, and each one was\nresponsible for a different piece.\n\n37\n00:01:59.150 --> 00:02:00.520\nSo let me kind of show you how these work.\n\n38\n00:02:00.520 --> 00:02:03.580\nI've got a little diagram that I\nwhipped up here to show kinda just\n\n39\n00:02:03.580 --> 00:02:06.860\na generic company and\nwhat they would expect to see.\n\n40\n00:02:06.860 --> 00:02:07.915\nNow we've got the Internet,\n\n41\n00:02:07.915 --> 00:02:11.850\nthat's the real world that's out there\nthat everybody uses and connects to.\n\n42\n00:02:11.850 --> 00:02:16.490\nBut then in our company, we probably\nhave two networks, like a DMZ and a LAN.\n\n43\n00:02:16.490 --> 00:02:18.070\nThe LAN, that's our local area network.\n\n44\n00:02:18.070 --> 00:02:21.170\nThat's our private network that\nwe don't want anybody to touch.\n\n45\n00:02:21.170 --> 00:02:26.250\nOur DMZ, that stands for demilitarized\nzone, that's our network that's public.\n\n46\n00:02:26.250 --> 00:02:27.870\nThat's where our web servers go,\n\n47\n00:02:27.870 --> 00:02:30.580\nwhere we want the Internet\nto be able to connect to it.\n\n48\n00:02:30.580 --> 00:02:33.010\nIf somebody on the Internet\nis gonna send us email,\n\n49\n00:02:33.010 --> 00:02:35.360\nit's gotta get into our company somehow.\n\n50\n00:02:35.360 --> 00:02:38.900\nSo we could have them come straight\ninto the LAN, but that's pretty risky.\n\n51\n00:02:38.900 --> 00:02:41.440\nSo it's better off to have\nthem come through a DMZ.\n\n52\n00:02:42.570 --> 00:02:45.670\nAnd then from the DMZ,\nit then passes in through the LAN.\n\n53\n00:02:45.670 --> 00:02:50.360\nNow in Microsoft Exchange, we can\nset it up to be able to handle that,\n\n54\n00:02:50.360 --> 00:02:52.760\nthanks to a couple of different roles.\n\n55\n00:02:52.760 --> 00:02:54.960\nThe first role I want to talk about,\nthough, is the most important one.\n\n56\n00:02:54.960 --> 00:02:56.830\nIt's this guy way over here.\n\n57\n00:02:56.830 --> 00:02:58.690\nThat's the Mailbox server.\n\n58\n00:02:58.690 --> 00:03:02.800\nThe Mailbox server is the server\nresponsible for, well, mailboxes.\n\n59\n00:03:02.800 --> 00:03:04.760\nThis is where our\nmailboxes are gonna reside.\n\n60\n00:03:04.760 --> 00:03:09.030\nIt's really a very fancy\nMicrosoft SQL database server.\n\n61\n00:03:09.030 --> 00:03:12.190\nMicrosoft's Exchange,\nat the end of the day, is storing your\n\n62\n00:03:12.190 --> 00:03:15.830\nemail in a database that's very similar to\nthe database that's used in Microsoft SQL.\n\n63\n00:03:16.890 --> 00:03:22.940\nBut it's very highly tuned and very highly\ncustomized to work as an email server.\n\n64\n00:03:22.940 --> 00:03:23.900\nSo it's not SQL,\n\n65\n00:03:23.900 --> 00:03:28.000\nyou can't put your own data in there\nlike that, it is just an email database.\n\n66\n00:03:28.000 --> 00:03:30.840\nAnd it's been changed quite\na bit to make it different\n\n67\n00:03:30.840 --> 00:03:33.220\nfrom your other database\nsolutions that are out there.\n\n68\n00:03:33.220 --> 00:03:37.720\nSo that Mailbox server, that's one\nthat's gonna need a lot of storage.\n\n69\n00:03:37.720 --> 00:03:38.910\nThat's where your email is.\n\n70\n00:03:38.910 --> 00:03:42.730\nSo if you've got millions of emails,\nthey've gotta be stored somewhere.\n\n71\n00:03:42.730 --> 00:03:44.220\nThe Mailbox server acts as that database.\n\n72\n00:03:45.310 --> 00:03:46.910\nNow your end users,\n\n73\n00:03:46.910 --> 00:03:51.370\nwhen they wanna access the Mailbox server,\nthey're not gonna connect directly to it.\n\n74\n00:03:51.370 --> 00:03:53.050\nWell, there are some\nscenarios where they do, but\n\n75\n00:03:53.050 --> 00:03:55.090\nmost of the time they're not\ngonna connect directly to it.\n\n76\n00:03:55.090 --> 00:03:58.210\nThey're gonna do something\nlike using Outlook web app and\n\n77\n00:03:58.210 --> 00:04:00.060\nbrowse to a web page to log in.\n\n78\n00:04:00.060 --> 00:04:03.900\nOr they'll fire up a POP3 or\nIMAP4 client to connect in.\n\n79\n00:04:03.900 --> 00:04:08.840\nAnd when they connect in through those\nways, well, we can have that on the same\n\n80\n00:04:08.840 --> 00:04:13.290\nphysical server or we can break it off\ninto what's called a Client Access server.\n\n81\n00:04:13.290 --> 00:04:16.840\nThe Client Access server is that\npoint of contact for your end users.\n\n82\n00:04:16.840 --> 00:04:18.890\nWhen your end users want\nto access their email,\n\n83\n00:04:18.890 --> 00:04:20.720\nthey access the Client Access server.\n\n84\n00:04:20.720 --> 00:04:22.900\nIt in turn accesses the Mailbox server.\n\n85\n00:04:24.880 --> 00:04:27.960\nWe may also have\na Unified Messaging server.\n\n86\n00:04:27.960 --> 00:04:32.300\nIf we've got Exchange tied into our voice\nover IP system to handle voicemail,\n\n87\n00:04:32.300 --> 00:04:36.640\nscheduling conferences, doing quick\ncontact dials, things like that, well,\n\n88\n00:04:36.640 --> 00:04:40.010\nwe can deploy a Unified Messaging server,\nand that'll tie that together too.\n\n89\n00:04:41.240 --> 00:04:44.070\nAnd then lastly we've got\nthe Hub Transport server.\n\n90\n00:04:44.070 --> 00:04:48.740\nThe Hub Transport server is the one\nresponsible for moving email around.\n\n91\n00:04:48.740 --> 00:04:52.250\nIt's the one that runs SMTP,\nthe simple mail transport protocol.\n\n92\n00:04:52.250 --> 00:04:56.417\nSo all incoming and outgoing email in\nyour organization is gonna pass through\n\n93\n00:04:56.417 --> 00:04:57.900\nthe Hub Transport server.\n\n94\n00:04:57.900 --> 00:04:59.290\nIt's gonna move right through there.\n\n95\n00:04:59.290 --> 00:05:03.850\nSo it's a great place to deploy\nthings like spam and virus filtering,\n\n96\n00:05:03.850 --> 00:05:07.600\nemail policy rules, things that add legal\ndisclaimers at the bottom of emails.\n\n97\n00:05:07.600 --> 00:05:10.730\nYou can deploy them there cuz all\nof your email is gonna pass through\n\n98\n00:05:10.730 --> 00:05:12.360\nthat Hub Transport server.\n\n99\n00:05:12.360 --> 00:05:13.660\nSo that's its role.\n\n100\n00:05:14.790 --> 00:05:20.190\nNow I could have one physical server\nthat's running all four of these roles,\n\n101\n00:05:20.190 --> 00:05:21.430\nand in a small business that works fine.\n\n102\n00:05:21.430 --> 00:05:23.420\nYou can deploy them all right there.\n\n103\n00:05:23.420 --> 00:05:25.850\nOr I could have four servers\nthat are running these, or\n\n104\n00:05:25.850 --> 00:05:27.320\nI could have ten servers.\n\n105\n00:05:27.320 --> 00:05:29.550\nI might have three\nClient Access servers and\n\n106\n00:05:29.550 --> 00:05:33.220\ntwo Mailbox servers, one\nUnified Messaging and two Hub Transport.\n\n107\n00:05:33.220 --> 00:05:34.230\nYou can mix it up.\n\n108\n00:05:34.230 --> 00:05:36.110\nI'm not sure that adds up to ten,\nI wasn't keeping track.\n\n109\n00:05:36.110 --> 00:05:37.735\nSo maybe I went over ten, I don't know.\n\n110\n00:05:37.735 --> 00:05:41.300\n[LAUGH] But you can have multiple\nservers based on your need.\n\n111\n00:05:41.300 --> 00:05:43.720\nAnd your need might be for\nredundancy as far as failure.\n\n112\n00:05:43.720 --> 00:05:44.902\nIt might just be for scale.\n\n113\n00:05:44.902 --> 00:05:48.973\nYou've got so many users that one Client\nAccess server can't do it, so you deploy\n\n114\n00:05:48.973 --> 00:05:52.470\nthree or five or fifty to support\nthe amount of users that you've got.\n\n115\n00:05:53.470 --> 00:05:57.040\nThis is a very modular deployment that\ngives you that ability to expand.\n\n116\n00:05:58.200 --> 00:06:01.072\nNow what, oh, sorry, I left out one role.\n\n117\n00:06:01.072 --> 00:06:02.558\nThere's this one guy\nsitting way over here.\n\n118\n00:06:02.558 --> 00:06:04.210\nNow why did I leave him out?\n\n119\n00:06:04.210 --> 00:06:04.760\nHe's special.\n\n120\n00:06:05.790 --> 00:06:06.780\nThese other roles,\n\n121\n00:06:06.780 --> 00:06:10.380\nremember how I said you could have one\nserver that was running all four roles?\n\n122\n00:06:10.380 --> 00:06:12.630\nYou can, but there's a fifth role.\n\n123\n00:06:12.630 --> 00:06:16.100\nAnd that fifth role,\nthe Edge Transport server, he's different.\n\n124\n00:06:16.100 --> 00:06:17.900\nHe has to be by himself.\n\n125\n00:06:17.900 --> 00:06:20.960\nHe can't run on a server that's\na Mailbox server or Client Access or\n\n126\n00:06:20.960 --> 00:06:22.210\nHub Transport or Unified Messaging.\n\n127\n00:06:22.210 --> 00:06:24.410\nHe has to be all by himself\nout there in the DMZ.\n\n128\n00:06:25.760 --> 00:06:30.460\nAnd that's because this is the server\nthat's designed to be ultra secure,\n\n129\n00:06:30.460 --> 00:06:34.460\nthat's really, really protected and\nisolated from your network.\n\n130\n00:06:34.460 --> 00:06:36.650\nThese guys over here,\nall four of these roles,\n\n131\n00:06:36.650 --> 00:06:39.680\nhave to have direct connectivity\nto your Active Directory.\n\n132\n00:06:39.680 --> 00:06:41.340\nThey've got to be able to\npull up your user list.\n\n133\n00:06:41.340 --> 00:06:43.030\nThey've got be able to authenticate users.\n\n134\n00:06:43.030 --> 00:06:45.060\nThey've got to be able\nto do a lot of stuff.\n\n135\n00:06:45.060 --> 00:06:49.070\nWell, if somebody from the outside world\nwere to hack into one of these servers,\n\n136\n00:06:49.070 --> 00:06:51.550\nthey would then have access\nto your internal network,\n\n137\n00:06:51.550 --> 00:06:55.040\nto your domain controllers, to things that\nyou don't want them to have access to.\n\n138\n00:06:55.040 --> 00:06:56.990\nSo Microsoft created a special\nversion of Exchange.\n\n139\n00:06:56.990 --> 00:06:59.170\nIt's called the Edge Transport Server and\n\n140\n00:06:59.170 --> 00:07:02.100\nit doesn't need to be connected\nto the Active Directory.\n\n141\n00:07:02.100 --> 00:07:06.230\nIt can run as a standalone entity and\nif somebody hacks into it, big deal.\n\n142\n00:07:06.230 --> 00:07:09.470\nThey just have access to that server and\nthat's it.\n\n143\n00:07:09.470 --> 00:07:12.020\nBut it's got very,\nvery limited functionality.\n\n144\n00:07:12.020 --> 00:07:13.850\nWe're gonna cover it in\nsome later episodes so\n\n145\n00:07:13.850 --> 00:07:15.460\nyou get a chance to see how it works.\n\n146\n00:07:15.460 --> 00:07:17.695\nBut it's a great place\nto run antivirus and\n\n147\n00:07:17.695 --> 00:07:22.750\nanti-spam cuz it filters things out\nbefore they even get into your network.\n\n148\n00:07:22.750 --> 00:07:25.160\nNow I'll tell you, of the roles,\nthis is one of the least popular.\n\n149\n00:07:25.160 --> 00:07:28.820\nNot a lot of people run an Edge Transport\nserver, and you might ask yourself why,\n\n150\n00:07:28.820 --> 00:07:31.180\nif this makes it more secure,\nwhy wouldn't I want it?\n\n151\n00:07:31.180 --> 00:07:36.190\nAnd the reason is a lot of people already\nhave something that provides this role.\n\n152\n00:07:36.190 --> 00:07:42.580\nSo for example, us, for ITProTV, we have\na Barracuda anti-spam and virus firewall.\n\n153\n00:07:42.580 --> 00:07:46.480\nIt's an appliance, and it does exactly\nwhat that Edge Transport server does.\n\n154\n00:07:46.480 --> 00:07:51.650\nIt sits in our DMZ, email flows into it,\ngets filtered before it even comes in, and\n\n155\n00:07:51.650 --> 00:07:54.420\nthen the Barracuda is allowed\nto talk to our internal systems.\n\n156\n00:07:54.420 --> 00:07:56.870\nIt performs this role,\nthe role of an Edge Transport server.\n\n157\n00:07:56.870 --> 00:07:59.238\nYou don't have to use\nMicrosoft's Edge Transport.\n\n158\n00:07:59.238 --> 00:08:01.780\nYou can use any provider\nout there that you want.\n\n159\n00:08:01.780 --> 00:08:04.753\nBut if you don't have one,\nyou can use Microsoft's.\n\n160\n00:08:04.753 --> 00:08:08.436\nAnd now it's supported by the same people\nthat are running your operating system as\n\n161\n00:08:08.436 --> 00:08:12.310\nwell as your internal mail servers, so\nit creates a more consistent environment.\n\n162\n00:08:12.310 --> 00:08:14.620\nSo it's up to you whether you\nwanna go that route or not, but\n\n163\n00:08:14.620 --> 00:08:16.350\nit is purely optional.\n\n164\n00:08:16.350 --> 00:08:17.890\nSome of these roles are optional, right.\n\n165\n00:08:17.890 --> 00:08:21.560\nThe Unified Messaging, if you don't have a\nVoice over IP system that you want to tie\n\n166\n00:08:21.560 --> 00:08:24.780\ninto, you don't need this role,\nyou leave it out, you just chuck it and\n\n167\n00:08:24.780 --> 00:08:25.835\nthat's the end of it.\n\n168\n00:08:25.835 --> 00:08:26.490\nRight?\n\n169\n00:08:26.490 --> 00:08:29.860\nBut these three roles,\nHub Transport, Client Access, and\n\n170\n00:08:29.860 --> 00:08:33.264\nMailbox, you have to have\nthose in Exchange 2010.\n\n171\n00:08:34.730 --> 00:08:37.510\nNow, when email comes\ninto your organization,\n\n172\n00:08:37.510 --> 00:08:40.850\nif you have all the roles,\nit looks something like this.\n\n173\n00:08:40.850 --> 00:08:43.040\nYou mail comes into\nthe Edge Transport Server,\n\n174\n00:08:43.040 --> 00:08:45.390\nit then jumps over to\na Hub Transport Server.\n\n175\n00:08:45.390 --> 00:08:48.490\nSo bridging that gap between the DMZ and\nthe Hub.\n\n176\n00:08:48.490 --> 00:08:51.710\nNow, neat thing about this,\nI shouldn't have drawn arrow this way.\n\n177\n00:08:51.710 --> 00:08:55.390\nThis arrow really should be pointing\nthe other direction because\n\n178\n00:08:55.390 --> 00:09:00.590\nthe Edge Transport Server is not allowed\nto talk to your Local Area Network.\n\n179\n00:09:00.590 --> 00:09:02.670\nIt's not.\nIt cannot talk to your LAN.\n\n180\n00:09:02.670 --> 00:09:08.488\nInstead, your Hub Transport Server has to\nreach out to it and pull the email back.\n\n181\n00:09:08.488 --> 00:09:12.180\nAnd that way, if somebody hacks into this\nbox, they can't initiate connections in.\n\n182\n00:09:12.180 --> 00:09:14.790\nThe connections have to be\ninitiated from the inside out.\n\n183\n00:09:14.790 --> 00:09:16.350\nIt makes them more secure.\n\n184\n00:09:16.350 --> 00:09:19.740\nSo your email comes into the Edge\nTransport, your Hub Transport Server goes\n\n185\n00:09:19.740 --> 00:09:24.110\nand picks it up, and now it gets it and\nsends it to the Mailbox Server.\n\n186\n00:09:24.110 --> 00:09:26.240\nYour end users connect to\nthe Client Access Server and\n\n187\n00:09:26.240 --> 00:09:27.920\nthe Client Access Server\nconnects the Mailbox Server.\n\n188\n00:09:27.920 --> 00:09:29.500\nAnd that's how they get their email.\n\n189\n00:09:29.500 --> 00:09:32.170\nOr your voice over IP system\nconnects that Mailbox Server\n\n190\n00:09:32.170 --> 00:09:33.950\nthrough the Unified Messaging Server.\n\n191\n00:09:33.950 --> 00:09:37.910\nAll these pieces kind of integrate\ntogether, and if these four are all\n\n192\n00:09:37.910 --> 00:09:40.950\nrunning on the same hardware,\nthat's all just happening in software.\n\n193\n00:09:40.950 --> 00:09:42.800\nBut, if these are running on\nseparate physical servers,\n\n194\n00:09:42.800 --> 00:09:46.770\nthey just communicate via the network, and\nit's nothing too terribly special, right?\n\n195\n00:09:46.770 --> 00:09:49.660\nWe can build redundancy into this\nby adding multiple servers, and\n\n196\n00:09:49.660 --> 00:09:51.430\nyou get a really powerful\nexchange environment built up.\n\n197\n00:09:52.600 --> 00:09:57.310\nHowever, Microsoft did some studies, and\nthey found some really interesting things.\n\n198\n00:09:57.310 --> 00:10:02.640\nThey found, for example, that very\nfew people used Unified Messaging.\n\n199\n00:10:02.640 --> 00:10:06.070\nAnd that when they did, the functions\nthat Unified Messaging Server\n\n200\n00:10:06.070 --> 00:10:09.680\nrole was providing, were actually\nbeing performed by their other system.\n\n201\n00:10:09.680 --> 00:10:12.910\nSo, like if you have\na Cisco Unified Communication Server,\n\n202\n00:10:12.910 --> 00:10:16.330\nit does the bulk of what\nthe Unified Messaging Server role did.\n\n203\n00:10:16.330 --> 00:10:19.130\nSo at the end of the day,\nthe Unified Messaging Server was\n\n204\n00:10:19.130 --> 00:10:22.310\nreally just acting like a proxy at that\npoint, the Cisco stuff did all the work.\n\n205\n00:10:22.310 --> 00:10:26.040\nOr you might have a Via or\nMicrocom, Microtel,\n\n206\n00:10:26.040 --> 00:10:29.660\none of those guys, and\ntheir systems do a lot of that work and\n\n207\n00:10:29.660 --> 00:10:31.510\nwe don't necessarily need\nthe Unified Messaging Server to do it.\n\n208\n00:10:31.510 --> 00:10:32.470\nAll right.\n\n209\n00:10:32.470 --> 00:10:35.720\nSo, Microsoft found that was\nthe case in a lot of environments.\n\n210\n00:10:35.720 --> 00:10:38.790\nThis same thing went for\nthe Edge Transport Server.\n\n211\n00:10:38.790 --> 00:10:39.840\nA lot of people weren't using it.\n\n212\n00:10:39.840 --> 00:10:43.410\nThey had a third party system that was\ndoing it and they were sticking with that.\n\n213\n00:10:43.410 --> 00:10:47.870\nThey also found that most people\nwere deploying Hub Transport Servers\n\n214\n00:10:47.870 --> 00:10:48.430\nincorrectly.\n\n215\n00:10:48.430 --> 00:10:50.021\nThey were using them the wrong way and\n\n216\n00:10:50.021 --> 00:10:52.800\ndeploying them in a way\nthat wasn't secure.\n\n217\n00:10:52.800 --> 00:10:54.920\nAnd so in Exchange 2013, Microsoft said,\n\n218\n00:10:54.920 --> 00:10:57.270\nyou know what,\nwe really need to revisit this.\n\n219\n00:10:57.270 --> 00:11:00.370\nWe need to tweak things to be a little\nmore efficient, to be a little more\n\n220\n00:11:00.370 --> 00:11:03.890\nintuitive, and to make sense with\nthe way people are using our products.\n\n221\n00:11:03.890 --> 00:11:10.340\nSo in Exchange 2010, we had five roles,\nin Exchange 2013, we only have three.\n\n222\n00:11:10.340 --> 00:11:13.260\nThere's just three roles and\nthat's it, alright.\n\n223\n00:11:13.260 --> 00:11:17.040\nSo in Exchange 2013,\nthe Unified Messaging role is gone, and\n\n224\n00:11:17.040 --> 00:11:19.160\nthe Hub Transport role is gone.\n\n225\n00:11:19.160 --> 00:11:23.386\nNow if you rely on those, which the Hub\nTransport you definitely do, dont panic.\n\n226\n00:11:23.386 --> 00:11:25.640\nIt's not that they're gone as in\nthe functionality is all gone,\n\n227\n00:11:25.640 --> 00:11:28.590\nits just that they've been\neliminated as roles and\n\n228\n00:11:28.590 --> 00:11:31.350\nnow Microsoft dictates how they\nwork inside of the system.\n\n229\n00:11:31.350 --> 00:11:33.040\nThey work in a much more intuitive manner.\n\n230\n00:11:33.040 --> 00:11:35.210\nSo let's talk about how this works.\n\n231\n00:11:35.210 --> 00:11:38.410\nFirst off,\nif you install Exchange 2013 from DVD,\n\n232\n00:11:38.410 --> 00:11:43.730\nyou only have two roles,\nClient Access and Mailbox.\n\n233\n00:11:43.730 --> 00:11:45.410\nAnd that's it, right?\n\n234\n00:11:45.410 --> 00:11:47.140\nEdge Transport, Microsoft left it out.\n\n235\n00:11:47.140 --> 00:11:50.250\nMicrosoft said, you know a lot of people\nare using third party stuff, well,\n\n236\n00:11:50.250 --> 00:11:52.160\nwe'll just let them stick with\ntheir third-party stuff and\n\n237\n00:11:52.160 --> 00:11:54.240\nwe'll eliminate the Edge Transport role.\n\n238\n00:11:54.240 --> 00:11:57.230\nSo they eliminated it,\noriginally in 2013, and there was so\n\n239\n00:11:57.230 --> 00:11:59.990\nmuch feedback from the community,\npeople saying, no we really want that.\n\n240\n00:11:59.990 --> 00:12:01.890\nYeah, yeah,\nwe're running a third-party system but\n\n241\n00:12:01.890 --> 00:12:04.890\nwe wanna migrate to the Edge Transport\nrole, we just haven't done it yet.\n\n242\n00:12:04.890 --> 00:12:07.370\nAnd so in Exchange 2013 Service Pack 1,\n\n243\n00:12:07.370 --> 00:12:12.210\nMicrosoft reintroduced the Edge Transport\nrole, so that's back again.\n\n244\n00:12:12.210 --> 00:12:14.790\nBe careful with that if you're\nGoogling for help on the Internet,\n\n245\n00:12:14.790 --> 00:12:17.780\nyou'll see a lot of people say there's\nonly two roles in Exchange 2013.\n\n246\n00:12:17.780 --> 00:12:21.100\nBut on the exam,\nthe exam is based on Service Pack 1,\n\n247\n00:12:21.100 --> 00:12:24.870\nthere's three roles in Exchange 2013,\nso be aware of that, right?\n\n248\n00:12:24.870 --> 00:12:25.680\nNow you may not use it.\n\n249\n00:12:25.680 --> 00:12:28.230\nYou can always just choose not\nto use the Edge Transport role.\n\n250\n00:12:28.230 --> 00:12:31.710\nBut at a minimum you're gonna have these\ntwo guys, Client Access Server and\n\n251\n00:12:31.710 --> 00:12:32.630\nMailbox Server.\n\n252\n00:12:32.630 --> 00:12:34.330\nYou've got to have them, right.\n\n253\n00:12:34.330 --> 00:12:36.710\nThe Mailbox Server is\nwhere your email resides.\n\n254\n00:12:36.710 --> 00:12:37.685\nIt's gotta be stored somewhere.\n\n255\n00:12:37.685 --> 00:12:38.455\nYou have to have that.\n\n256\n00:12:38.455 --> 00:12:41.125\nAnd the Client Access Server,\nthat's what your clients connect to.\n\n257\n00:12:41.125 --> 00:12:42.845\nThey've gotta have a way\nto get to the email.\n\n258\n00:12:42.845 --> 00:12:43.795\nYou have to have that.\n\n259\n00:12:43.795 --> 00:12:45.685\nThose are the two roles you have to have.\n\n260\n00:12:45.685 --> 00:12:48.625\nYou could deploy them on\nthe same physical server.\n\n261\n00:12:48.625 --> 00:12:49.515\nIt'll let you do that.\n\n262\n00:12:49.515 --> 00:12:50.135\nRight.\n\n263\n00:12:50.135 --> 00:12:52.105\nOr you could split them\nup into two servers.\n\n264\n00:12:52.105 --> 00:12:53.225\nYou could have 20 servers.\n\n265\n00:12:53.225 --> 00:12:54.575\nYou could have more than one of each role.\n\n266\n00:12:54.575 --> 00:12:55.680\nThat works great.\n\n267\n00:12:55.680 --> 00:12:56.370\nAll right.\n\n268\n00:12:56.370 --> 00:13:00.650\nSo when email comes in,\nit comes into the Edge Transport role,\n\n269\n00:13:00.650 --> 00:13:04.550\nthe Edge Transport sends it to\nthe Client Access Server, now.\n\n270\n00:13:04.550 --> 00:13:07.550\nAnd the Client Access Server\ndistributes it to the Mailbox Server.\n\n271\n00:13:07.550 --> 00:13:10.340\nMail flows a little bit different\nbecause we don't have that Hub Transport\n\n272\n00:13:10.340 --> 00:13:11.280\nrole anymore.\n\n273\n00:13:11.280 --> 00:13:11.800\nAll right?\n\n274\n00:13:11.800 --> 00:13:13.890\nAnd we don't have\nthe Unified Messaging role.\n\n275\n00:13:13.890 --> 00:13:15.580\nWell, what happened to those guys?\n\n276\n00:13:15.580 --> 00:13:17.930\nWhat happened to\nthe Unified Messaging role?\n\n277\n00:13:17.930 --> 00:13:22.330\nWell, because most people\nwere using it as a proxy,\n\n278\n00:13:22.330 --> 00:13:24.810\nbasically, Microsoft did exactly that.\n\n279\n00:13:24.810 --> 00:13:29.580\nThey reduced it to become more of just\na proxy and it runs as just a service now.\n\n280\n00:13:29.580 --> 00:13:31.710\nIt's not a role,\nit's not something we have to install.\n\n281\n00:13:31.710 --> 00:13:35.270\nIt's a service that's installed\nautomatically on your Mailbox Server.\n\n282\n00:13:35.270 --> 00:13:37.350\nSo your Mailbox Server is\nactually running that proxy.\n\n283\n00:13:37.350 --> 00:13:40.810\nAnd if you have a third party voice over\nIP system that supports Exchange 2013,\n\n284\n00:13:40.810 --> 00:13:42.990\nyou can point it right to there.\n\n285\n00:13:42.990 --> 00:13:44.050\nAll right.\n\n286\n00:13:44.050 --> 00:13:46.650\nIf you don't have a third\nparty voice over IP system and\n\n287\n00:13:46.650 --> 00:13:50.340\nyou want one, well, what about all\nthe functionality that's gone?\n\n288\n00:13:50.340 --> 00:13:54.020\nWell that's now part of Microsoft's\nlink or Skype for Business.\n\n289\n00:13:54.020 --> 00:13:57.570\nSo it's all been kind of rolled into that\nnew system and you can deploy that and\n\n290\n00:13:57.570 --> 00:13:58.338\nit takes care of it.\n\n291\n00:13:58.338 --> 00:13:59.660\nSo they just kind of shifted that out and\n\n292\n00:13:59.660 --> 00:14:02.540\nthey said not enough people are using\nit to keep it as part of Exchange.\n\n293\n00:14:02.540 --> 00:14:04.890\nNow it's a separate product.\n\n294\n00:14:04.890 --> 00:14:09.290\nOn the Hub Transport side,\nwell, that one is still there.\n\n295\n00:14:09.290 --> 00:14:11.880\nThe Hub Transport role is\ntechnically still there.\n\n296\n00:14:11.880 --> 00:14:15.850\nBut what happened is,\nthey broke it into three services.\n\n297\n00:14:15.850 --> 00:14:19.875\nInstead of being a dedicated role that you\ncan install on a dedicated server, if you\n\n298\n00:14:19.875 --> 00:14:24.305\nwanted, now it's three services that work\ntogether that are already implemented.\n\n299\n00:14:24.305 --> 00:14:26.885\nAnd this gives us the most\nefficient implementation and\n\n300\n00:14:26.885 --> 00:14:30.435\nthe most reliable one and it insures that\nit's always being deployed correctly, so\n\n301\n00:14:30.435 --> 00:14:32.650\nwe don't have to worry about the role\nanymore it's basically gone.\n\n302\n00:14:32.650 --> 00:14:33.380\nAll right.\n\n303\n00:14:33.380 --> 00:14:34.530\nNow the three services.\n\n304\n00:14:34.530 --> 00:14:37.270\nLet me just kind of run over those and\nhow they work.\n\n305\n00:14:37.270 --> 00:14:39.430\nThe first one is kind of important.\n\n306\n00:14:39.430 --> 00:14:42.445\nIt's called\nthe Front-end Transport service.\n\n307\n00:14:42.445 --> 00:14:44.370\nThe Front-end Transport service?\n\n308\n00:14:44.370 --> 00:14:45.990\nThat's basically our SMTP server.\n\n309\n00:14:45.990 --> 00:14:48.160\nRight.\nThis is where our incoming mail is gonna\n\n310\n00:14:48.160 --> 00:14:50.780\ncome in to and\nwhere our outgoing mail goes out to.\n\n311\n00:14:50.780 --> 00:14:55.320\nSo, when email comes in and goes to an\nEdge Transport Server, if we have one, or\n\n312\n00:14:55.320 --> 00:14:59.460\njust comes in bypassing it, if we don't,\nit's gonna come to a Client Access Server.\n\n313\n00:14:59.460 --> 00:15:02.410\nAnd it's the Front-end Transport\nservice that's running right\n\n314\n00:15:02.410 --> 00:15:06.100\nhere on the Client Access Server,\nthat's what's gonna receive that email.\n\n315\n00:15:06.100 --> 00:15:08.390\nNow, interesting fact here.\n\n316\n00:15:08.390 --> 00:15:11.102\nIt receives the email but\nit does not queue it.\n\n317\n00:15:11.102 --> 00:15:15.520\nThe Front-end Transport service does not\nhold your email, not even for a second.\n\n318\n00:15:15.520 --> 00:15:17.030\nIt doesn't write it to the hard drive.\n\n319\n00:15:17.030 --> 00:15:21.530\nIt receives it in RAM,\napplies any transport rules that it has.\n\n320\n00:15:21.530 --> 00:15:24.710\nWe might do email, spam and\nvirus filtering or\n\n321\n00:15:24.710 --> 00:15:27.590\ncompliance journaling, whatever it is.\n\n322\n00:15:27.590 --> 00:15:30.810\nIt does that and\nthen it sends the email on,\n\n323\n00:15:30.810 --> 00:15:32.550\nto be able to go back\nto that Mailbox Server.\n\n324\n00:15:33.770 --> 00:15:36.750\nNow back in the Mailbox Server we actually\nhave two services that are running there.\n\n325\n00:15:36.750 --> 00:15:39.630\nThat was the Front-end Transport service.\n\n326\n00:15:39.630 --> 00:15:41.720\nThen we've got our Hub Transport service.\n\n327\n00:15:41.720 --> 00:15:43.290\nNow that sounds familiar, right?\n\n328\n00:15:43.290 --> 00:15:46.240\nThe Hub Transport role,\nhere's the Hub Transport service.\n\n329\n00:15:46.240 --> 00:15:50.090\nThe Hub Transport service is what\nmanages your queues, your incoming and\n\n330\n00:15:50.090 --> 00:15:51.116\noutgoing mail queue.\n\n331\n00:15:51.116 --> 00:15:53.916\nWhen an e-mail comes in, it actually\ngets written to the hard drive and\n\n332\n00:15:53.916 --> 00:15:55.222\nit sits there on the hard drive for\n\n333\n00:15:55.222 --> 00:15:58.084\na second while it figures out where\nto send it, that's your mail queue.\n\n334\n00:15:58.084 --> 00:16:02.087\nOutgoing e-mail is the same way, it drops\ninto a queue and it sits there in that\n\n335\n00:16:02.087 --> 00:16:05.680\nfolder until we can contact\nthe destination server and send it along.\n\n336\n00:16:05.680 --> 00:16:10.465\nSo the hub transport service is that\nseries of cues and it's gonna store those\n\n337\n00:16:10.465 --> 00:16:14.306\nemails and it's doing that right\nhere on the mailbox server.\n\n338\n00:16:14.306 --> 00:16:18.019\nAnd then lastly, we've got our\nmailbox transport service and\n\n339\n00:16:18.019 --> 00:16:20.963\nthe mailbox transport\nservice is responsible for\n\n340\n00:16:20.963 --> 00:16:25.039\nmoving emails between the hub\ntransport service and the mailboxes.\n\n341\n00:16:25.039 --> 00:16:27.859\nSo those cues that are sitting here,\nthat's what's shifting in between.\n\n342\n00:16:27.859 --> 00:16:32.133\nWhen you write an email in Outlook,\nif I write an email and I hit send,\n\n343\n00:16:32.133 --> 00:16:37.315\nthe first thing it does is it copies it to\nmy outbound mailbox or my outbound folder.\n\n344\n00:16:37.315 --> 00:16:39.471\nSo you've got this outbound folder.\n\n345\n00:16:39.471 --> 00:16:42.980\nAnd then once it sends,\nthen it moves it to sent items.\n\n346\n00:16:42.980 --> 00:16:46.113\nWhen it's in that outbound folder, that's\nwhen it's trying to communicate that\n\n347\n00:16:46.113 --> 00:16:48.181\nmailbox transport service to\nbe able to send it along.\n\n348\n00:16:48.181 --> 00:16:51.510\nAnd once it communicates,\nthen it moves it to sent items.\n\n349\n00:16:51.510 --> 00:16:55.920\nSo I can have an email stuck in outbound,\nif it's just pending and\n\n350\n00:16:55.920 --> 00:16:57.490\ncan't communicate with the server.\n\n351\n00:16:57.490 --> 00:16:59.630\nSo that's it communicating\nwith this other service.\n\n352\n00:16:59.630 --> 00:17:03.509\nSo hub transport's been divided into three\nservices and those services have been\n\n353\n00:17:03.509 --> 00:17:07.572\nspread across the client access server, so\nwe don't have to worry about it anymore.\n\n354\n00:17:07.572 --> 00:17:09.986\nBut that's kinda gone,\nit's gone by the wayside.\n\n355\n00:17:09.986 --> 00:17:11.925\nThose are roles we don't\nhave to worry about.\n\n356\n00:17:11.925 --> 00:17:15.744\nSo at the end of the day, there's really\ntwo main roles we have to worry about.\n\n357\n00:17:15.744 --> 00:17:19.615\nClient access server and mailbox server\nand they can run in the same box or\n\n358\n00:17:19.615 --> 00:17:20.820\nwe can split them up and\n\n359\n00:17:20.820 --> 00:17:25.089\nrum them on separate boxes and we can run\nmore than one of each based on our scale.\n\n360\n00:17:25.089 --> 00:17:27.990\nAs your database gets larger,\nit takes longer to backup.\n\n361\n00:17:27.990 --> 00:17:30.387\nIt takes more memory to cache and\nindex, so\n\n362\n00:17:30.387 --> 00:17:32.925\nwe might want more than\none physical server.\n\n363\n00:17:32.925 --> 00:17:34.720\nWe can have more than one mailbox server.\n\n364\n00:17:34.720 --> 00:17:36.730\nWe might wanna have mailbox\nservers in multiple geographic\n\n365\n00:17:36.730 --> 00:17:38.060\nlocations, you can do that.\n\n366\n00:17:38.060 --> 00:17:39.431\nYou just have more than one.\n\n367\n00:17:39.431 --> 00:17:41.043\nSame thing with client access.\n\n368\n00:17:41.043 --> 00:17:43.284\nClient access is all about CPU and RAM.\n\n369\n00:17:43.284 --> 00:17:46.782\nIf I have so many users, that server's\ngetting overloaded and I can just add more\n\n370\n00:17:46.782 --> 00:17:49.928\nand I can load balance across them and\nwe'll see that in later episodes.\n\n371\n00:17:49.928 --> 00:17:53.063\nWe're gonna have an entire series\nof episodes that are based just on\n\n372\n00:17:53.063 --> 00:17:56.151\nthe mailbox server role and\njust on the client access server role.\n\n373\n00:17:56.151 --> 00:17:59.104\nAnd then there's that third row we don't\nwanna forget about, the edge transport.\n\n374\n00:17:59.104 --> 00:18:03.589\nIf you want that secure kind of gateway\nin between you and the internet,\n\n375\n00:18:03.589 --> 00:18:06.603\nthe edge transport role\nis designed to do that.\n\n376\n00:18:06.603 --> 00:18:11.030\nIt's a very limited version of Exchange,\nit's not allowed to talk to your LAN.\n\n377\n00:18:11.030 --> 00:18:14.464\nServers on the inside of your\nnetwork have to reach out to\n\n378\n00:18:14.464 --> 00:18:17.836\nit to pull data back in and\nso that makes it very secure.\n\n379\n00:18:17.836 --> 00:18:22.074\nAnd if somebody were the break into it,\nthey cant get to your internal network.\n\n380\n00:18:22.074 --> 00:18:24.067\nKeeps things nice and safe.\n\n381\n00:18:24.067 --> 00:18:26.378\nSo that's kind of what\nthat is designed for.\n\n382\n00:18:26.378 --> 00:18:29.847\nSo when you're getting ready to install\nExchange, if you're doing a brand new\n\n383\n00:18:29.847 --> 00:18:33.392\ndeployment for your environment, these\nare the things you have to think about.\n\n384\n00:18:33.392 --> 00:18:36.946\nDo I want one server that's gonna\nrun both client access and mailbox?\n\n385\n00:18:36.946 --> 00:18:38.512\nOr do I want to do two servers?\n\n386\n00:18:38.512 --> 00:18:39.453\nOr do I want to do five servers?\n\n387\n00:18:39.453 --> 00:18:40.068\nOr ten servers?\n\n388\n00:18:40.068 --> 00:18:41.763\nWhat's my load going to be like?\n\n389\n00:18:41.763 --> 00:18:45.115\nWell, if you go on to Microsoft's TechNet\nwebsite they have various pages on\n\n390\n00:18:45.115 --> 00:18:47.603\nthere to kind of help you to\ndo your scaling and planning.\n\n391\n00:18:47.603 --> 00:18:52.043\nBut at the end of the day,\nmy rule of thumb for your average user,\n\n392\n00:18:52.043 --> 00:18:56.170\nI try and keep mailbox servers\nto 1,500 users or less.\n\n393\n00:18:56.170 --> 00:19:00.484\nWhen you start getting over 1,500 users,\nit's just a lot of seek time on that\n\n394\n00:19:00.484 --> 00:19:03.125\ndatabase and\nmost file systems can't handle it.\n\n395\n00:19:03.125 --> 00:19:05.923\nBut you don't always have average users.\n\n396\n00:19:05.923 --> 00:19:09.037\nSometimes you have power users that\nhave 10 gig mailboxes, sometimes\n\n397\n00:19:09.037 --> 00:19:12.772\nyou have really light users that only have\n100 meg mailboxes that are really small.\n\n398\n00:19:12.772 --> 00:19:16.710\nSo that really influences how many\npeople a single server can handle.\n\n399\n00:19:16.710 --> 00:19:18.144\nAnd on client access servers,\n\n400\n00:19:18.144 --> 00:19:21.520\nit really comes down to how many\nsimultaneous users you have connected.\n\n401\n00:19:21.520 --> 00:19:24.051\nEach user's gonna occupy\na little bit of CPU and\n\n402\n00:19:24.051 --> 00:19:26.082\na little bit of memory on your system.\n\n403\n00:19:26.082 --> 00:19:27.592\nIf they're doing Outlook Web App,\n\n404\n00:19:27.592 --> 00:19:30.273\nthen they're actually gonna\noccupy a little bit more memory.\n\n405\n00:19:30.273 --> 00:19:33.524\nYou'll find your average users\nconsuming somewhere between 40 and\n\n406\n00:19:33.524 --> 00:19:35.021\n50K of memory on that system.\n\n407\n00:19:35.021 --> 00:19:36.633\nSo if you have thousands of users,\n\n408\n00:19:36.633 --> 00:19:39.479\nyou can start to see where that's\ngonna run out pretty fast.\n\n409\n00:19:39.479 --> 00:19:43.279\nSo TechNet has some scaling tools,\nyou can punch in your amount of users and\n\n410\n00:19:43.279 --> 00:19:47.396\nit'll help you to scale that out, but\nit's really easy to scale out on your own.\n\n411\n00:19:47.396 --> 00:19:49.394\nI usually deploy these\nas virtual machines.\n\n412\n00:19:49.394 --> 00:19:51.751\nSo if I see a client access\nserver getting overwhelmed,\n\n413\n00:19:51.751 --> 00:19:54.523\nI can just spin up another client\naccess server and go from there.\n\n414\n00:19:54.523 --> 00:19:56.611\nSo really easy to do that.\n\n415\n00:19:56.611 --> 00:20:01.250\nDo be aware that we need to make sure\nwe're running either Exchange Standard or\n\n416\n00:20:01.250 --> 00:20:02.673\nExchange Enterprise.\n\n417\n00:20:02.673 --> 00:20:05.418\nAnd if you remember from an earlier\nepisode, the difference there,\n\n418\n00:20:05.418 --> 00:20:08.130\nExchange Enterprise can handle up\nto a hundred mailbox databases.\n\n419\n00:20:08.130 --> 00:20:11.323\nExchange Standard can only handle\nup to five mailbox databases.\n\n420\n00:20:11.323 --> 00:20:15.349\nWell, if I'm running my client access and\nmailbox on the same server and\n\n421\n00:20:15.349 --> 00:20:19.853\nI've got more than five mailbox databases,\nthen I need an Enterprise edition.\n\n422\n00:20:19.853 --> 00:20:22.465\nBut if I split these off,\nmy mailbox server may or\n\n423\n00:20:22.465 --> 00:20:26.609\nmay not need Enterprise based on the\nmailbox databases, but my client access\n\n424\n00:20:26.609 --> 00:20:30.838\nserver will always be standard edition\nunless I just feel like wasting money.\n\n425\n00:20:30.838 --> 00:20:34.041\nThe client access server\ndoes not hold the email.\n\n426\n00:20:34.041 --> 00:20:35.597\nIt has no mailbox databases.\n\n427\n00:20:35.597 --> 00:20:38.918\nIt's doing Outlook Web App, POP3, IMAP4.\n\n428\n00:20:38.918 --> 00:20:41.216\nIt's doing the offline address book.\n\n429\n00:20:41.216 --> 00:20:46.313\nIt's doing the mobile device management,\ncommunicating to mobile devices.\n\n430\n00:20:46.313 --> 00:20:50.570\nIt's doing all of those functions and it's\nrunning that front-end transport service,\n\n431\n00:20:50.570 --> 00:20:52.036\nwhich doesn't queue emails.\n\n432\n00:20:52.036 --> 00:20:54.742\nSo literally, no email is stored\non the client access server.\n\n433\n00:20:54.742 --> 00:20:58.140\nI don't need to pay for an Enterprise\nlicense to get more mailbox databases on\n\n434\n00:20:58.140 --> 00:20:59.617\na server that doesn't have any.\n\n435\n00:20:59.617 --> 00:21:04.167\nSo even if I was a trillion dollar\nmultinational company that had hundreds of\n\n436\n00:21:04.167 --> 00:21:08.861\nthousands of users, I would still only\ndo Enterprise on my mailbox servers and\n\n437\n00:21:08.861 --> 00:21:10.369\nnot on my client access.\n\n438\n00:21:10.369 --> 00:21:12.819\nSo definitely be aware of\nthat as you plan for this.\n\n439\n00:21:12.819 --> 00:21:16.089\nBut you'll probably have more than one\nclient access server before the end of\n\n440\n00:21:16.089 --> 00:21:18.461\nthe day,\nyou'll probably load balance across those.\n\n441\n00:21:18.461 --> 00:21:19.281\nAnd then that way,\n\n442\n00:21:19.281 --> 00:21:22.420\nyou can quickly add new servers as you\nneed to scale your environment up.\n\n443\n00:21:22.420 --> 00:21:25.438\nThat's an important thing to do.\n\n444\n00:21:25.438 --> 00:21:26.924\nSo be aware of that.\n\n445\n00:21:26.924 --> 00:21:29.780\nOn the edge transport side,\nyou might need redundancy there also.\n\n446\n00:21:29.780 --> 00:21:31.625\nThis is how the internet\nis connecting to you.\n\n447\n00:21:31.625 --> 00:21:34.178\nIt's probably where your MX\nrecords are gonna point to,\n\n448\n00:21:34.178 --> 00:21:37.117\nyour mail exchange records, so\npeople know where to send email.\n\n449\n00:21:37.117 --> 00:21:39.799\nAnd if your one server goes down,\nyou stop receiving email.\n\n450\n00:21:39.799 --> 00:21:44.185\nSo you might need 2 of these or 3 or 20,\nyou can setup a whole array, if you want.\n\n451\n00:21:44.185 --> 00:21:46.460\n[LAUGH] Yes,\nit gets kinda crazy after a while.\n\n452\n00:21:46.460 --> 00:21:48.152\nBut you can deploy as many as you want and\n\n453\n00:21:48.152 --> 00:21:50.105\nthese just need to be\nstandard edition also.\n\n454\n00:21:50.105 --> 00:21:53.681\nNo sense doing enterprise,\nbecause they don't store email.\n\n455\n00:21:53.681 --> 00:21:55.504\nThey're receiving it and\nforwarding it along.\n\n456\n00:21:55.504 --> 00:21:58.263\nThere is actually a queue here\non the transport server while\n\n457\n00:21:58.263 --> 00:21:59.427\nit's scanning emails.\n\n458\n00:21:59.427 --> 00:22:04.002\nBut if we were to lose those, it's just\na small portion of time that you lose.\n\n459\n00:22:04.002 --> 00:22:06.207\nSo we don't normally worry\ntoo much about that.\n\n460\n00:22:06.207 --> 00:22:09.567\nYou don't normally backup edge transport\nservers, just because the email's so\n\n461\n00:22:09.567 --> 00:22:10.108\ntransient.\n\n462\n00:22:10.108 --> 00:22:12.245\nIt's just passing through\nwhile it gets scanned.\n\n463\n00:22:12.245 --> 00:22:16.203\nAnd if you're not scanning it,\nthen it just passes through really fast.\n\n464\n00:22:16.203 --> 00:22:19.710\nThe email's only on there for\na fraction of a second.\n\n465\n00:22:19.710 --> 00:22:24.307\nSo those are the roles inside of Exchange\n2013 that we need to be aware of.\n\n466\n00:22:24.307 --> 00:22:28.126\nI wanted to cover this in depth,\nbecause when you're installing Exchange,\n\n467\n00:22:28.126 --> 00:22:31.488\none of the first things it asks you\nis what role do you wanna install?\n\n468\n00:22:31.488 --> 00:22:35.586\nDo you want it to be client access or\ndo you want it to be a mailbox database?\n\n469\n00:22:35.586 --> 00:22:37.165\nDo you want it to be edge transport?\n\n470\n00:22:37.165 --> 00:22:38.569\nYou got to pick.\n\n471\n00:22:38.569 --> 00:22:41.263\nAnd so we need to understand those\nroles and how they fit together.\n\n472\n00:22:41.263 --> 00:22:45.985\nIn 2013, it is still the same that\nedge transport has to be by itself\n\n473\n00:22:45.985 --> 00:22:50.882\nversus client access and mailbox that\ncan be combined or can be separate.\n\n474\n00:22:50.882 --> 00:22:52.995\nWell, that's about it as far\nas what I've got on the roles.\n\n475\n00:22:52.995 --> 00:22:56.758\nSo in this episode, we got a change\nto see the Exchange 2010 roles and\n\n476\n00:22:56.758 --> 00:23:00.663\nhow they used to work and the Exchange\n2013 roles and how they work now.\n\n477\n00:23:00.663 --> 00:23:04.076\nAnd that's important stuff to know\nwhen we're doing the install.\n\n478\n00:23:04.076 --> 00:23:05.643\nWell, this is a good point\nto wrap this one up.\n\n479\n00:23:05.643 --> 00:23:07.095\nSo, I hope you guys enjoyed the episode.\n\n480\n00:23:07.095 --> 00:23:10.578\nStay tuned, because we've got more\nExchange 2013 coming down the line.\n\n481\n00:23:10.578 --> 00:23:14.537\nBut signing off for ITProTV,\nI'm Don Pezet and I'll you next time.\n\n482\n00:23:14.537 --> 00:23:20.490\n[MUSIC]\n\n",
          "vimeoId": "135908052"
        },
        {
          "description": "In this episode, Don discusses the steps necessary to prepare your Active Directory prior to installing Exchange 2013. He also discusses some of the different administrative roles that may need to be involved in getting prepared for an Exchange deployment.",
          "length": "1691",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-3-preparing_the_active_directory-081015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-3-preparing_the_active_directory-081015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-3-preparing_the_active_directory-081015-1-sm.jpg",
          "title": "Preparing the Active Directory",
          "transcript": "WEBVTT\n\n1\n00:00:00.194 --> 00:00:11.015\n[MUSIC]\n\n2\n00:00:11.015 --> 00:00:11.980\nAll right.\n\n3\n00:00:11.980 --> 00:00:13.600\nGood morning, good afternoon,\nand good evening.\n\n4\n00:00:13.600 --> 00:00:15.810\nWelcome back to another\nepisode of ITProTV.\n\n5\n00:00:15.810 --> 00:00:20.830\nI'm your host, Don Pezet Back again\nwith another episode of Exchange 2013.\n\n6\n00:00:20.830 --> 00:00:25.050\nNow in this episode, we're gonna take a\nlook at preparing our Active Directory for\n\n7\n00:00:25.050 --> 00:00:26.480\nour Exchange install.\n\n8\n00:00:26.480 --> 00:00:29.150\nAnd if you've been watching out episodes,\nI think we're on episode number three now.\n\n9\n00:00:29.150 --> 00:00:31.550\nYou're probably thinking boy,\nthis is a great series Don.\n\n10\n00:00:31.550 --> 00:00:33.181\nBut you haven't actually\ndone any work yet.\n\n11\n00:00:33.181 --> 00:00:36.625\n[LAUGH] And so, this will be the first\nepisode we do some real work as far as\n\n12\n00:00:36.625 --> 00:00:39.230\ngetting Exchange deployed\nin our environment.\n\n13\n00:00:39.230 --> 00:00:41.530\nAnd the funny part,\nit's not even to work with Exchange.\n\n14\n00:00:41.530 --> 00:00:43.070\nIt's to work with the Active Directory.\n\n15\n00:00:43.070 --> 00:00:45.010\nNow why do we have to do that?\n\n16\n00:00:45.010 --> 00:00:48.040\nWell, Microsoft Exchange\ndoes some really neat stuff.\n\n17\n00:00:48.040 --> 00:00:53.710\nOne of the cool things that it does is\nthat it stores its entire configuration\n\n18\n00:00:53.710 --> 00:00:55.300\nin the active directory, and\n\n19\n00:00:55.300 --> 00:00:57.750\nthat's pretty awesome because your\nactive directory replicates, right?\n\n20\n00:00:57.750 --> 00:00:59.580\nSo you've probably got\nmultiple domain controllers.\n\n21\n00:00:59.580 --> 00:01:02.290\nI say probably, I hope you have\nmultiple domain controllers.\n\n22\n00:01:02.290 --> 00:01:05.700\nSo that Active Directory partition is\nbeing replicated between all those\n\n23\n00:01:05.700 --> 00:01:06.980\ndifferent systems.\n\n24\n00:01:06.980 --> 00:01:11.290\nAnd that means if you lose your Exchange\nServer, you can actually restore it,\n\n25\n00:01:11.290 --> 00:01:15.080\nbring it up really quickly because\nit can reload the config right from\n\n26\n00:01:15.080 --> 00:01:16.110\nthe Active Directory.\n\n27\n00:01:16.110 --> 00:01:18.930\nAnd then you just have to restore your\nmailbox data and you're in business.\n\n28\n00:01:18.930 --> 00:01:22.230\nActive Directory restores\nare lightning fast because of that.\n\n29\n00:01:22.230 --> 00:01:23.980\nSo definitely, a cool thing to have.\n\n30\n00:01:24.980 --> 00:01:27.210\nAlso, all of your user data.\n\n31\n00:01:28.210 --> 00:01:31.120\nSo, for example, like what email\naddresses I have attached to me, or\n\n32\n00:01:31.120 --> 00:01:32.370\nwhat groups I'm in.\n\n33\n00:01:32.370 --> 00:01:34.610\nThat's all stored in\nthe active directory also.\n\n34\n00:01:34.610 --> 00:01:36.330\nThat makes for quick look ups and\n\n35\n00:01:36.330 --> 00:01:39.715\na database that's already being\nreplicated across my environment.\n\n36\n00:01:39.715 --> 00:01:41.715\nSo Exchange builds on that.\n\n37\n00:01:41.715 --> 00:01:45.495\nYou cannot deploy Microsoft Exchange\nwithout having an Active Directory first.\n\n38\n00:01:45.495 --> 00:01:47.815\nYou've gotta have\nan Active Directory to run Exchange.\n\n39\n00:01:47.815 --> 00:01:49.785\nThere is no standalone mode.\n\n40\n00:01:49.785 --> 00:01:52.305\nBut the Active Directory out of the box,\n\n41\n00:01:52.305 --> 00:01:55.715\nif I just install Windows Server 2012,\npromote it to a domain controller, and\n\n42\n00:01:55.715 --> 00:02:00.200\nbuild up a forest, it actually\ndoesn't have the Exchange attributes.\n\n43\n00:02:00.200 --> 00:02:01.960\nSo when we install Exchange,\n\n44\n00:02:01.960 --> 00:02:06.300\nit's expecting a lot of stuff to be\nin the AD that just isn't there yet.\n\n45\n00:02:06.300 --> 00:02:09.150\nSo before we can install\nour first Exchange server,\n\n46\n00:02:09.150 --> 00:02:11.320\nwe've gotta prepare the AD, all right?\n\n47\n00:02:11.320 --> 00:02:15.440\nNow, what I'm about to show you is\nreally the same if you're doing\n\n48\n00:02:15.440 --> 00:02:20.560\nyour very first Exchange server or if\nyou're upgrading from a previous version.\n\n49\n00:02:20.560 --> 00:02:22.400\nIf it's your very first exchange server,\n\n50\n00:02:22.400 --> 00:02:26.100\nyou're active directory has no\nexchange records whatsoever.\n\n51\n00:02:26.100 --> 00:02:29.580\nSo we need to prepare the AD\nto have those records.\n\n52\n00:02:29.580 --> 00:02:31.610\nIf you're running exchange 2010 or\nexchange 2007,\n\n53\n00:02:31.610 --> 00:02:33.560\nor one of the earlier versions,\n\n54\n00:02:33.560 --> 00:02:38.160\nyour Active Directory does have Active\nDirectory record, or Exchange records.\n\n55\n00:02:38.160 --> 00:02:41.930\nBut they're the old records and\nExchange 2013 added some new ones, so\n\n56\n00:02:41.930 --> 00:02:44.100\nwe have to prepare the AD\nto add the new ones, right.\n\n57\n00:02:44.100 --> 00:02:46.580\nSo either way we've gotta\nrun through this process.\n\n58\n00:02:46.580 --> 00:02:50.690\nBut the key thing to remember here\nis that this absolutely must be done\n\n59\n00:02:50.690 --> 00:02:54.560\nbefore you install the first\nExchange 2013 server, all right.\n\n60\n00:02:54.560 --> 00:02:57.350\nSo let's run over some of\nthe prerequisites before we even\n\n61\n00:02:57.350 --> 00:03:00.220\nreally get started because there's\na few things we need to do.\n\n62\n00:03:00.220 --> 00:03:04.720\nFirst off, our Active Directory\nhas a forest functional level.\n\n63\n00:03:04.720 --> 00:03:09.930\nAnd that forest functional level needs to\nbe set to Windows Server 2003 or higher.\n\n64\n00:03:09.930 --> 00:03:13.240\nSo, if you're still running in\nWindows 2000 mode in your forest or\n\n65\n00:03:13.240 --> 00:03:16.410\nif you're back in mixed mode,\none of those really old modes.\n\n66\n00:03:16.410 --> 00:03:17.990\nYou can't run a Exchange 2013.\n\n67\n00:03:17.990 --> 00:03:19.750\nSo you need to be in 2003 or higher.\n\n68\n00:03:19.750 --> 00:03:23.395\nFortunately, 2003 has been out for what?\n\n69\n00:03:23.395 --> 00:03:24.960\n12, 13 years now?\n\n70\n00:03:24.960 --> 00:03:26.410\nIt's really old.\n\n71\n00:03:26.410 --> 00:03:28.430\nIt should be safe to go to that.\n\n72\n00:03:28.430 --> 00:03:32.280\nBut that means that if you're\ngoing to deploy Exchange 2013,\n\n73\n00:03:32.280 --> 00:03:35.480\nall of your Windows 2000 domain\ncontrollers have to be gone.\n\n74\n00:03:35.480 --> 00:03:36.510\nThey've got to be gone.\n\n75\n00:03:36.510 --> 00:03:39.100\nYou've got to be on 2003 and\nhigher, right?\n\n76\n00:03:39.100 --> 00:03:40.400\nThe other thing is,\n\n77\n00:03:40.400 --> 00:03:43.690\nwe're gonna need some permissions\nto be able to do this deployment.\n\n78\n00:03:43.690 --> 00:03:45.330\nWe need to modify the Active Directory.\n\n79\n00:03:45.330 --> 00:03:48.590\nAnd when you modify the Active Directory,\nthere's different partitions inside of\n\n80\n00:03:48.590 --> 00:03:50.910\nthere and you need different\npermissions to do stuff.\n\n81\n00:03:50.910 --> 00:03:55.630\nWe need to prepare our domain as well\nas prepare our schema, all right?\n\n82\n00:03:55.630 --> 00:03:57.630\nNow, you might not be\nfamiliar with the schema so\n\n83\n00:03:57.630 --> 00:03:59.310\nlet me just cover this real quickly.\n\n84\n00:03:59.310 --> 00:04:01.120\nInside of Active Directory,\nwe have objects.\n\n85\n00:04:01.120 --> 00:04:04.490\nObjects like user accounts,\ngroups, computer accounts.\n\n86\n00:04:04.490 --> 00:04:07.370\nAnd each of those objects\nhas things that describe it.\n\n87\n00:04:07.370 --> 00:04:10.330\nSo like if you pull up my user account,\nthere's things that describe me.\n\n88\n00:04:10.330 --> 00:04:11.130\nLet me show you here.\n\n89\n00:04:11.130 --> 00:04:11.950\nSo I'll take this.\n\n90\n00:04:11.950 --> 00:04:13.010\nThis is a domain controller.\n\n91\n00:04:13.010 --> 00:04:14.040\nIt doesn't have Exchange.\n\n92\n00:04:14.040 --> 00:04:15.700\nIt hasn't been prepared.\n\n93\n00:04:15.700 --> 00:04:17.768\nAnd if I go into\nActive Directory > Users and\n\n94\n00:04:17.768 --> 00:04:20.860\nComputers\n>> So let me just jump in there.\n\n95\n00:04:20.860 --> 00:04:22.370\nI'll find my user object.\n\n96\n00:04:22.370 --> 00:04:24.500\nSo I'm gonna browse in here and\nI'll find Don Pezet.\n\n97\n00:04:24.500 --> 00:04:25.210\nI'm in here somewhere.\n\n98\n00:04:25.210 --> 00:04:26.220\nThere I am.\n\n99\n00:04:26.220 --> 00:04:27.980\nSo here's my user object.\n\n100\n00:04:27.980 --> 00:04:32.060\nAnd my user object has what\nare called attributes attached to it.\n\n101\n00:04:32.060 --> 00:04:34.810\nFirst name, last name,\ndisplay name, description.\n\n102\n00:04:34.810 --> 00:04:36.180\nThese are attributes.\n\n103\n00:04:36.180 --> 00:04:39.760\nNow how does Active Directory\nknow to gather this information?\n\n104\n00:04:39.760 --> 00:04:42.680\nWell in the background there's\na thing called a schema and\n\n105\n00:04:42.680 --> 00:04:45.860\nthe schema says a user object\nshould have a first name,\n\n106\n00:04:45.860 --> 00:04:49.500\na user object should have a last name,\na user object should have an account.\n\n107\n00:04:49.500 --> 00:04:51.470\nVersus when I pull up a group.\n\n108\n00:04:51.470 --> 00:04:54.160\nThe schema says well a group\ndoesn't have a first name,\n\n109\n00:04:54.160 --> 00:04:55.829\na group doesn't have a last name.\n\n110\n00:04:55.829 --> 00:04:59.505\nA group has a description, an email,\nbut not a first and last name.\n\n111\n00:04:59.505 --> 00:05:01.340\nIt's the scheme that defines that.\n\n112\n00:05:01.340 --> 00:05:03.220\nSo the Exchange schema says,\n\n113\n00:05:03.220 --> 00:05:07.535\noh by the way, not only should a user\nhave a first name and a last name, but\n\n114\n00:05:07.535 --> 00:05:11.565\nthey should also have an email address or\nmultiple email addresses.\n\n115\n00:05:11.565 --> 00:05:13.175\nThey should have a mailbox server.\n\n116\n00:05:13.175 --> 00:05:14.725\nThey should have this and that and\n\n117\n00:05:14.725 --> 00:05:18.385\nall these other attributes that\npertain to email and collaboration.\n\n118\n00:05:18.385 --> 00:05:19.225\nAll right?\n\n119\n00:05:19.225 --> 00:05:21.725\nSo that all has to get\nadded to the schema.\n\n120\n00:05:21.725 --> 00:05:23.655\nNow by default, we don't see the schema.\n\n121\n00:05:23.655 --> 00:05:24.615\nIt's hidden in the background.\n\n122\n00:05:24.615 --> 00:05:25.185\nWe don't touch it.\n\n123\n00:05:25.185 --> 00:05:28.830\nMicrosoft actually goes to some\nlength to make sure we never see it.\n\n124\n00:05:28.830 --> 00:05:32.710\nThe main reason is, once you modify\nthe schema you can't undo it.\n\n125\n00:05:32.710 --> 00:05:34.410\nYou can't take this back.\n\n126\n00:05:34.410 --> 00:05:37.950\nOnce you've prepared your Active Directory\nfor Exchange, it's prepared forever.\n\n127\n00:05:37.950 --> 00:05:40.060\nEven if you uninstall\nyour exchange servers and\n\n128\n00:05:40.060 --> 00:05:42.752\nget rid of them, your Active Directory\nis still prepared for it.\n\n129\n00:05:42.752 --> 00:05:45.555\nAll right, and\nthat's a limitation of the schema.\n\n130\n00:05:45.555 --> 00:05:49.965\nWhen you add something to the schema you\ncan disable it but you can't delete it.\n\n131\n00:05:49.965 --> 00:05:51.155\nIt's there permanently.\n\n132\n00:05:51.155 --> 00:05:53.985\nSo you really need to make sure this is\nsomething you want to do before you get in\n\n133\n00:05:53.985 --> 00:05:55.625\nthere and prepare it.\n\n134\n00:05:55.625 --> 00:06:00.375\nSo, some of the other things I need to\nknow here, because this is something that\n\n135\n00:06:00.375 --> 00:06:03.760\ncan't be reversed,\nwe need to jump through a few hoops.\n\n136\n00:06:03.760 --> 00:06:07.430\nFirst off, in your active directory forest\nyou'll have what's called a schema master.\n\n137\n00:06:07.430 --> 00:06:09.600\nThe schema master is the one server,\n\n138\n00:06:09.600 --> 00:06:13.680\nit's just one, one domain controller\nthat's responsible for the schema.\n\n139\n00:06:13.680 --> 00:06:16.700\nEvery other server has a read\nonly copy of the schema, so\n\n140\n00:06:16.700 --> 00:06:19.570\nonly one server's allowed\nto modify the schema.\n\n141\n00:06:19.570 --> 00:06:24.610\nAnd only users in the schema admins\ngroup are allowed to modify it.\n\n142\n00:06:24.610 --> 00:06:27.750\nAnd guess who's in the schema\nadmins group by default?\n\n143\n00:06:27.750 --> 00:06:28.360\nNo one.\n\n144\n00:06:28.360 --> 00:06:29.140\nIt's empty.\n\n145\n00:06:29.140 --> 00:06:31.830\nNobody can modify the schema by default.\n\n146\n00:06:31.830 --> 00:06:36.350\nSo if I want to modify the schema,\nI've got to put myself into the schema\n\n147\n00:06:36.350 --> 00:06:41.410\nadmins group, and\nI've gotta connect to the schema master.\n\n148\n00:06:41.410 --> 00:06:44.210\nAnd make that change, and\nactually prep the AD.\n\n149\n00:06:44.210 --> 00:06:47.680\nSo I need to do a little bit of homework\nbefore I actually get in here and\n\n150\n00:06:47.680 --> 00:06:48.620\nstart to do my work.\n\n151\n00:06:48.620 --> 00:06:50.570\nRight?\nSo let me show you guys that homework,\n\n152\n00:06:50.570 --> 00:06:51.590\nhow we can kind of figure this out.\n\n153\n00:06:51.590 --> 00:06:54.790\nSo here on my system the first thing\nI wanna check, cuz I'm already in\n\n154\n00:06:54.790 --> 00:06:57.780\nActive Directory Users and Computers, I\nwant to check my forest functional level.\n\n155\n00:06:57.780 --> 00:07:00.320\nI'm gonna pick my domain.\n\n156\n00:07:00.320 --> 00:07:04.463\nAnd I'm gonna right click on that and\nchoose Raise Domain Functional Level and\n\n157\n00:07:04.463 --> 00:07:06.156\nI'm gonna take a look at here and\n\n158\n00:07:06.156 --> 00:07:09.183\nit's gonna give me my domain\nfunctional level, right.\n\n159\n00:07:09.183 --> 00:07:12.920\nSo I can see my domain has a functional\nlevel of Windows Server 2012 R2.\n\n160\n00:07:12.920 --> 00:07:16.050\nI'm looking for that to be 2003 or higher.\n\n161\n00:07:16.050 --> 00:07:18.070\nAnd that's my domain functional level.\n\n162\n00:07:18.070 --> 00:07:21.650\nI also have a forest functional level and\nwe can see that in another tool.\n\n163\n00:07:21.650 --> 00:07:25.250\nIf I go up to here to my tools and\ninto Active Directory Domains and\n\n164\n00:07:25.250 --> 00:07:30.640\nTrusts, right in here, if I right-click\non Active Directory Domains and\n\n165\n00:07:30.640 --> 00:07:33.400\nTrusts you'll see\nRaise Forest Functional Level.\n\n166\n00:07:33.400 --> 00:07:36.030\nAnd you can click on that and\nyou'll see I'm at Windows server 2012.\n\n167\n00:07:36.030 --> 00:07:38.110\nI'm looking for 2003 or higher.\n\n168\n00:07:38.110 --> 00:07:39.230\nRight, and I can move that.\n\n169\n00:07:39.230 --> 00:07:40.700\nNow, be careful if you need to move yours.\n\n170\n00:07:40.700 --> 00:07:43.230\nIf yours is 2000,\nyou only have to go to 2003.\n\n171\n00:07:43.230 --> 00:07:45.148\nYou don't have to go all the way to 2012.\n\n172\n00:07:45.148 --> 00:07:48.930\nAll right, now, you might ask yourself,\nwhy wouldn't I go to the latest?\n\n173\n00:07:48.930 --> 00:07:49.860\nTwo reasons.\n\n174\n00:07:49.860 --> 00:07:51.940\nReason number one, you can't go back.\n\n175\n00:07:51.940 --> 00:07:55.256\nOnce you go forward,\nyou can't go back again, all right.\n\n176\n00:07:55.256 --> 00:07:58.210\nSo only move as far\nforward as you have to go.\n\n177\n00:07:58.210 --> 00:08:00.471\nNever move all the way\nif you don't have to.\n\n178\n00:08:00.471 --> 00:08:04.711\nAnd the reason there is, if you jump\nto 2012, you can no longer have\n\n179\n00:08:04.711 --> 00:08:09.550\nWindows Server 2003,\nWindows Server 2008 domain controllers.\n\n180\n00:08:09.550 --> 00:08:12.500\nYou can still have Windows Server\n2008 member servers, but\n\n181\n00:08:12.500 --> 00:08:13.810\nnot domain controllers.\n\n182\n00:08:13.810 --> 00:08:15.900\nSo you're limiting the domain\ncontrollers that you can have.\n\n183\n00:08:15.900 --> 00:08:17.330\nNow that might be a good thing.\n\n184\n00:08:17.330 --> 00:08:18.090\nMight be a bad thing right?\n\n185\n00:08:18.090 --> 00:08:19.020\nYou might not want that.\n\n186\n00:08:19.020 --> 00:08:20.680\nSo only goes as far as you need.\n\n187\n00:08:20.680 --> 00:08:25.730\nAnd for Exchange 2013, Windows Server 2003\nmode that's as far as you need to go.\n\n188\n00:08:25.730 --> 00:08:26.270\nAll right.\n\n189\n00:08:26.270 --> 00:08:27.300\nSo make sure you're there.\n\n190\n00:08:27.300 --> 00:08:30.190\nI can see my domain level and\nmy forest function level are the same.\n\n191\n00:08:32.115 --> 00:08:33.605\nAll right, the next thing.\n\n192\n00:08:33.605 --> 00:08:36.735\nI need to put myself in\nthe schema admin's group.\n\n193\n00:08:36.735 --> 00:08:38.355\nNow I don't need to stay in there forever.\n\n194\n00:08:38.355 --> 00:08:40.075\nI just need to be in there\nwhile I make this change, and\n\n195\n00:08:40.075 --> 00:08:41.455\nthen I can take myself\nout of the group again.\n\n196\n00:08:41.455 --> 00:08:42.425\nAnd that's a good idea.\n\n197\n00:08:42.425 --> 00:08:43.975\nDon't leave yourself in the group.\n\n198\n00:08:43.975 --> 00:08:47.255\nBecause if you accidentally make a change\nto the schema, which is pretty hard to do.\n\n199\n00:08:47.255 --> 00:08:49.255\nBut if you do, you can't undo it.\n\n200\n00:08:49.255 --> 00:08:50.025\nThe way you undo it.\n\n201\n00:08:50.025 --> 00:08:51.180\nThis is fun.\n\n202\n00:08:51.180 --> 00:08:54.200\nYou shut down all your domain controllers\nand you restore them all from backup.\n\n203\n00:08:54.200 --> 00:08:55.110\nIt's a good time, right?\n\n204\n00:08:55.110 --> 00:08:57.090\nYou don't want to do that even if\nyou only have one domain controller,\n\n205\n00:08:57.090 --> 00:08:58.290\nyou don't want to do that, right?\n\n206\n00:08:58.290 --> 00:09:00.920\nSo, take yourself out of\nthat group when you're done.\n\n207\n00:09:00.920 --> 00:09:04.180\nSo I'm gonna go back to my\nActive Directory Users and Computers, And\n\n208\n00:09:04.180 --> 00:09:08.770\nI'll go under users here and\nI'm gonna find the Schema Admins Group.\n\n209\n00:09:08.770 --> 00:09:10.030\nIt's buried in here somewhere.\n\n210\n00:09:10.030 --> 00:09:11.680\nHere it is, Schema Admins.\n\n211\n00:09:11.680 --> 00:09:12.430\nAll right.\n\n212\n00:09:12.430 --> 00:09:13.770\nAnd I'm gonna put myself in there.\n\n213\n00:09:13.770 --> 00:09:18.545\nSo I'll go under Members and\nI'm gonna add in donpezet.\n\n214\n00:09:19.700 --> 00:09:22.830\nAnd there we go, now I'm a Schema Admin.\n\n215\n00:09:22.830 --> 00:09:26.752\nQuick work of caution here, remember when\nyou modify a user's group membership,\n\n216\n00:09:26.752 --> 00:09:30.058\nit doesn't actually take effect until\nthey log out and log back in, so\n\n217\n00:09:30.058 --> 00:09:33.887\nI just put myself in the Schema Admin's\ngroup, but I'm not really in there yet.\n\n218\n00:09:33.887 --> 00:09:37.280\nUntil I log out and log back in,\njust remember that.\n\n219\n00:09:37.280 --> 00:09:40.880\nNow there is another thing we have to do,\npreparing the Schema is one piece.\n\n220\n00:09:40.880 --> 00:09:42.820\nI also need to prepare my domain.\n\n221\n00:09:42.820 --> 00:09:45.160\nThere's certain service accounts,\n\n222\n00:09:45.160 --> 00:09:49.250\ncertain users, as well as certain\ngroups that Exchange expects to exist.\n\n223\n00:09:49.250 --> 00:09:51.190\nAnd it can create those for us.\n\n224\n00:09:51.190 --> 00:09:54.800\nBut in order to do that,\nI need to be a domain admin,\n\n225\n00:09:54.800 --> 00:09:57.040\nof the domain that I'm gonna prepare.\n\n226\n00:09:57.040 --> 00:09:59.390\nSo I need to make myself\na domain admin for that domain.\n\n227\n00:09:59.390 --> 00:10:02.490\nNow you might just be\nan Exchange administrator,\n\n228\n00:10:02.490 --> 00:10:04.790\nand there's a separate\nactive directory group.\n\n229\n00:10:04.790 --> 00:10:06.370\nSo you might have to reach\nover to them and say, hey,\n\n230\n00:10:06.370 --> 00:10:09.490\nI need you guys to run this command for me\nbecause you're the domain admins, right?\n\n231\n00:10:09.490 --> 00:10:11.160\nSo this might not all be you doing it.\n\n232\n00:10:11.160 --> 00:10:15.390\nIn a large environment, you might have an\nExchange team, an active directory team,\n\n233\n00:10:15.390 --> 00:10:17.180\na network team, all kinda divided up.\n\n234\n00:10:17.180 --> 00:10:19.150\nSo you might have to delegate\nthis out to somebody else.\n\n235\n00:10:19.150 --> 00:10:20.130\nJust be aware of that.\n\n236\n00:10:21.640 --> 00:10:23.980\nAll right, now I do get a choice here.\n\n237\n00:10:23.980 --> 00:10:27.180\nIf I'm just prepping one domain,\nI can make myself a domain admin for\n\n238\n00:10:27.180 --> 00:10:28.440\nthat domain and that's it.\n\n239\n00:10:28.440 --> 00:10:32.080\nBut if I wanna prep all\nof my domains at once,\n\n240\n00:10:32.080 --> 00:10:35.560\nI can put myself in\nthe Enterprise admins group.\n\n241\n00:10:35.560 --> 00:10:36.620\nIn the Enterprise admins group,\n\n242\n00:10:36.620 --> 00:10:40.260\nthat's like making me a domain admin for\nall of my domains.\n\n243\n00:10:40.260 --> 00:10:43.404\nNow, if you're just an Exchange admin\nthen you're probably not gonna have that\n\n244\n00:10:43.404 --> 00:10:45.903\npermission, but if you're\na smaller environment you may, and\n\n245\n00:10:45.903 --> 00:10:47.633\nyou can just come in and\nadd yourself there.\n\n246\n00:10:47.633 --> 00:10:52.001\nI'll put myself in there too so\nI can prepare all of my domains, and\n\n247\n00:10:52.001 --> 00:10:53.650\nwe can do it all at once.\n\n248\n00:10:53.650 --> 00:10:56.450\nNow just because you've deployed Exchange\nin one of your domains doesn't mean you\n\n249\n00:10:56.450 --> 00:10:57.260\nhave it in every domain.\n\n250\n00:10:57.260 --> 00:10:59.970\nYou might have five domains and\nyou're just doing Exchange in one of them?\n\n251\n00:10:59.970 --> 00:11:01.230\nYou've only gotta prep that one domain.\n\n252\n00:11:01.230 --> 00:11:04.270\nYou don't have to prep the other domains\nthat aren't going to run Exchange.\n\n253\n00:11:04.270 --> 00:11:07.185\nIt's up to you how you want to do that but\nwe normally prepare them all.\n\n254\n00:11:07.185 --> 00:11:09.050\nCuz it doesn't slow your server down,\n\n255\n00:11:09.050 --> 00:11:11.920\nit doesn't cost you any extra money,\nyou might as well prep the whole thing.\n\n256\n00:11:11.920 --> 00:11:13.110\nAnd so that's how that normally is.\n\n257\n00:11:15.072 --> 00:11:17.170\nAll right, so\nI'm in the Enterprise Admin's group and\n\n258\n00:11:17.170 --> 00:11:19.430\nI'm in the Schema Admin's group,\nthat's cool.\n\n259\n00:11:19.430 --> 00:11:23.300\nMy forest functional level is high enough,\nit's past Windows server 2003.\n\n260\n00:11:23.300 --> 00:11:26.050\nThe last thing I need to do is I\nneed to find my schema master.\n\n261\n00:11:26.050 --> 00:11:27.570\nAnd this is where it gets\na little bit challenging.\n\n262\n00:11:27.570 --> 00:11:31.720\nThere's a few different ways to do it,\nbut the GUI tool for\n\n263\n00:11:31.720 --> 00:11:34.010\nfinding your schema master is\nactually hidden by default.\n\n264\n00:11:34.010 --> 00:11:35.080\nWe can't get to it.\n\n265\n00:11:35.080 --> 00:11:38.850\nSo I wanna show you guys how to add\nthat in so you can quickly verify this.\n\n266\n00:11:38.850 --> 00:11:43.070\nWhat you can do is on any\nof your domain controllers,\n\n267\n00:11:43.070 --> 00:11:46.630\nif you basically fire up a run box.\n\n268\n00:11:46.630 --> 00:11:51.540\nI'm gonna do Windows Key+R\nto bring up my run box.\n\n269\n00:11:51.540 --> 00:11:55.630\nIn here you can do regsvr32,\n\n270\n00:11:55.630 --> 00:12:01.760\nI'm gonna register a service, regsvr32,\nand then what I'm registering and\n\n271\n00:12:01.760 --> 00:12:05.560\nI'm gonna do schmmgmt.dll, all right.\n\n272\n00:12:05.560 --> 00:12:09.430\nThat's a dynamic link library that\nhas the schema management tool.\n\n273\n00:12:09.430 --> 00:12:11.900\nI'm registering the schema\nmanagement tool.\n\n274\n00:12:11.900 --> 00:12:12.860\nI wanna make it available.\n\n275\n00:12:12.860 --> 00:12:14.460\nIt's not available by default.\n\n276\n00:12:14.460 --> 00:12:17.360\nAnd so when I run that, I'm gonna get,\noop, permission denied.\n\n277\n00:12:17.360 --> 00:12:18.580\nShoot.\nI forgot about that.\n\n278\n00:12:18.580 --> 00:12:22.330\nSo I need to get like an administrative\ncommand prompt up and running from here.\n\n279\n00:12:22.330 --> 00:12:23.660\nSo we'll redo that.\n\n280\n00:12:26.050 --> 00:12:28.080\nThere we go.\nAnd I'll get a nice little message letting\n\n281\n00:12:28.080 --> 00:12:29.850\nme know that the registration succeeded.\n\n282\n00:12:29.850 --> 00:12:31.910\nThat's going to make\nthe tool available for me so\n\n283\n00:12:31.910 --> 00:12:35.580\nI'll be able to,\nthrough my GUI, see the schema.\n\n284\n00:12:35.580 --> 00:12:36.790\nAnd that's important for two reasons.\n\n285\n00:12:36.790 --> 00:12:37.980\nOne, it's easier, right?\n\n286\n00:12:37.980 --> 00:12:38.990\nSo there's that.\n\n287\n00:12:38.990 --> 00:12:41.470\nAnd then two,\nI need to be able to see the schema so\n\n288\n00:12:41.470 --> 00:12:43.200\nI can verify these changes took effect.\n\n289\n00:12:43.200 --> 00:12:44.360\nThat it actually worked, right.\n\n290\n00:12:44.360 --> 00:12:45.440\nAnd I need that.\n\n291\n00:12:45.440 --> 00:12:46.313\nSo, I'm gonna need this.\n\n292\n00:12:46.313 --> 00:12:48.079\nSo I've just registered it.\n\n293\n00:12:48.079 --> 00:12:53.750\nNow I can fire up an MMC,\na Microsoft Management Console.\n\n294\n00:12:53.750 --> 00:12:55.260\nSo I'm just gonna come in here and\nrun MMC,\n\n295\n00:12:55.260 --> 00:13:00.040\nand that's going to open up\nan empty management console.\n\n296\n00:13:00.040 --> 00:13:03.210\nAnd I can go to File > Add/Remove Snap In,\nand\n\n297\n00:13:03.210 --> 00:13:06.760\nin here what I'm looking for\nis Active Directory Schema.\n\n298\n00:13:06.760 --> 00:13:09.900\nIf I had done this before registering\nthe DLL that wouldn't show up,\n\n299\n00:13:09.900 --> 00:13:11.900\nI wouldn't see Active Directory Schema.\n\n300\n00:13:11.900 --> 00:13:15.730\nBut because I registered it,\nnow it shows up and I can add it in.\n\n301\n00:13:15.730 --> 00:13:19.800\nAnd now I'll have the GUI tool for\nmanaging my schema.\n\n302\n00:13:19.800 --> 00:13:23.120\nAnd I can browse in here and\nI can see some of those objects,\n\n303\n00:13:23.120 --> 00:13:24.520\nthe classes that are defined.\n\n304\n00:13:24.520 --> 00:13:27.053\nSo like in here I can find users.\n\n305\n00:13:27.053 --> 00:13:30.663\nI'll find that user object\nburied in here somewhere and,\n\n306\n00:13:30.663 --> 00:13:32.610\nprobably down there in the Us.\n\n307\n00:13:32.610 --> 00:13:36.540\nThere it is, there's a user, and I can see\nall the things that are tied to that user.\n\n308\n00:13:36.540 --> 00:13:39.540\nAnd a lot of this stuff is gonna be\nconfusing, big, weird names, but\n\n309\n00:13:39.540 --> 00:13:42.210\nsome of it's gonna be really easy,\nlike first name, right?\n\n310\n00:13:42.210 --> 00:13:44.800\nFirst name's gotta be stored somewhere,\nso that'll be defined in here.\n\n311\n00:13:44.800 --> 00:13:46.180\nLet me sort this alphabetically.\n\n312\n00:13:46.180 --> 00:13:49.190\nApparently Microsoft has\na different alphabet than mine and\n\n313\n00:13:49.190 --> 00:13:50.650\nwe'll find our name.\n\n314\n00:13:50.650 --> 00:13:53.460\nOr, you know what, it's not first name\nit's like given name, or something.\n\n315\n00:13:53.460 --> 00:13:54.920\nThere it is, given name.\n\n316\n00:13:54.920 --> 00:13:56.340\nSo you've got given name and\n\n317\n00:13:56.340 --> 00:14:00.040\nyou've got different names like that for\neach of the different attributes.\n\n318\n00:14:00.040 --> 00:14:01.280\nTheir home directory.\n\n319\n00:14:01.280 --> 00:14:02.690\nGroup memberships and so on.\n\n320\n00:14:02.690 --> 00:14:05.530\nThese are the attributes for the users.\n\n321\n00:14:05.530 --> 00:14:10.610\nWell looking at this alphabetically,\nI don't see any Exchange one.\n\n322\n00:14:10.610 --> 00:14:12.180\nAnd you'll see like MSDS right,\n\n323\n00:14:12.180 --> 00:14:15.600\nthat's directory service and\nother ones that are listed here.\n\n324\n00:14:15.600 --> 00:14:18.350\nBut I don't see Exchange and\nthat's because it hasn't been prepared.\n\n325\n00:14:18.350 --> 00:14:22.200\nWell actually you know what,\nI do see three Microsoft Exchange,\n\n326\n00:14:22.200 --> 00:14:26.270\nMS Exchange Assistant Name,\nHouse Identifier, and Labelled URI.\n\n327\n00:14:26.270 --> 00:14:29.940\nSo there's three Exchange ones by default,\nI didn't put those there.\n\n328\n00:14:29.940 --> 00:14:31.540\nBut there should be a ton.\n\n329\n00:14:31.540 --> 00:14:34.360\nThere's a good 30 or 40 of them\nthat'll get added in when we prep it.\n\n330\n00:14:34.360 --> 00:14:35.740\nSo I can see that.\n\n331\n00:14:35.740 --> 00:14:38.630\nSo that's one reason that we wanna\nget in here is to verify it.\n\n332\n00:14:38.630 --> 00:14:41.078\nThe other thing is I can\nfind my schema master here.\n\n333\n00:14:41.078 --> 00:14:45.200\nIf you right-click on that Active\nDirectory schema, you'll see change, or\n\n334\n00:14:45.200 --> 00:14:47.890\nwait a minute here we go,\nOperations Master that's the one I want.\n\n335\n00:14:47.890 --> 00:14:49.650\nAnd that'll tell me who\nthe Operations Master is.\n\n336\n00:14:49.650 --> 00:14:51.990\nSo I can see mine's LAB-DC01.\n\n337\n00:14:51.990 --> 00:14:55.500\nThat's the server that's the schema\nmanager, or the schema master.\n\n338\n00:14:55.500 --> 00:14:58.360\nSo when I prep my AD,\nthat's where I need to do it from.\n\n339\n00:14:58.360 --> 00:15:00.050\nI need to do it from that server.\n\n340\n00:15:00.050 --> 00:15:03.620\nSo what we do is, we take our Exchange DVD\nand we walk over to that server.\n\n341\n00:15:03.620 --> 00:15:05.960\nAnd we pop it into the DVD drive, or\n\n342\n00:15:05.960 --> 00:15:08.210\nyou could copy the files over the network,\nthat's fine.\n\n343\n00:15:08.210 --> 00:15:11.740\nAnd then we can prepare the AD by using\nthe setup files from that Exchange disk\n\n344\n00:15:11.740 --> 00:15:14.060\nand it'll get everything ready for us.\n\n345\n00:15:14.060 --> 00:15:17.980\nNow for me, because I changed my group\nmembership, I need to logout and\n\n346\n00:15:17.980 --> 00:15:18.670\nlog back in.\n\n347\n00:15:18.670 --> 00:15:23.740\nI'm gonna save this console to my desktop\nso that I've got it when I come back in.\n\n348\n00:15:23.740 --> 00:15:27.650\nSo I'm gonna call this my Schema console.\n\n349\n00:15:29.400 --> 00:15:30.730\nAnd then I'm gonna log out.\n\n350\n00:15:30.730 --> 00:15:34.740\nAnd then when I log back in,\nI'm gonna be in the Enterprise admin's and\n\n351\n00:15:34.740 --> 00:15:36.000\nthe Schema admin's group.\n\n352\n00:15:36.000 --> 00:15:38.250\nSo I'll be good to go.\n\n353\n00:15:38.250 --> 00:15:39.950\nSo let me just sign out here.\n\n354\n00:15:39.950 --> 00:15:41.020\nAnd remember, I'm signing in and\n\n355\n00:15:41.020 --> 00:15:43.160\nout to make sure that my\ngroup membership is updated.\n\n356\n00:15:43.160 --> 00:15:44.250\nThat's why I'm gonna do that.\n\n357\n00:15:45.830 --> 00:15:46.860\nThere we go.\n\n358\n00:15:46.860 --> 00:15:49.300\nAnd now,\nI should be ready to prepare my AD.\n\n359\n00:15:49.300 --> 00:15:52.627\nSo I'm gonna pop in my Exchange disk\nwhich I'm pretty sure I already did.\n\n360\n00:15:52.627 --> 00:15:54.580\nYep, I got my Exchange disk right there.\n\n361\n00:15:54.580 --> 00:15:56.036\nSo there's Exchange 2013.\n\n362\n00:15:56.036 --> 00:15:59.795\nI'm gonna fire up a Command Prompt And\nI'm gonna run it with administrative\n\n363\n00:15:59.795 --> 00:16:02.569\nprivileges, right,\nwe do need to be running that way.\n\n364\n00:16:02.569 --> 00:16:05.406\nIf we're running it as a regular\nuser we've got permissions, but\n\n365\n00:16:05.406 --> 00:16:08.050\nwe won't get our UAC prompt and\nit will block it from running.\n\n366\n00:16:09.110 --> 00:16:12.000\nNow I'm running this\nfrom the server itself,\n\n367\n00:16:12.000 --> 00:16:15.090\nand I will tell you guys just from my\nown experience, I always do it this way.\n\n368\n00:16:15.090 --> 00:16:19.400\nI always run it from the Schema Master\nServer, from that actual server.\n\n369\n00:16:19.400 --> 00:16:23.490\nYou actually could run it from your\nworkstation, and there's a command-line\n\n370\n00:16:23.490 --> 00:16:25.710\ntag where you can tell it what\ndomain controller to connect to and\n\n371\n00:16:25.710 --> 00:16:27.920\nit reaches out over the network and\nit does it.\n\n372\n00:16:27.920 --> 00:16:30.360\nBut, what if something happens\nto your network connection?\n\n373\n00:16:30.360 --> 00:16:32.620\nWhat if something happens while\nyou're in the middle of it?\n\n374\n00:16:32.620 --> 00:16:34.770\nI really don't like that,\nI don't trust that.\n\n375\n00:16:34.770 --> 00:16:37.100\nSo I always do it from the Schema Master.\n\n376\n00:16:37.100 --> 00:16:39.100\nYou don't have to, but\nit's what I recommend.\n\n377\n00:16:40.640 --> 00:16:44.530\nFrom the Schema Master,\nthere's two commands that we're gonna run.\n\n378\n00:16:44.530 --> 00:16:49.200\nI'm gonna browse to my CD, so this is my\nD drive where my Exchange disk is, and\n\n379\n00:16:49.200 --> 00:16:51.700\nif I pull up a listing you'll see\nall the different language packs and\n\n380\n00:16:51.700 --> 00:16:52.860\nstuff that are in there.\n\n381\n00:16:52.860 --> 00:16:56.050\nBut the one that I really care about\nis this guy right here, Setup.EXE.\n\n382\n00:16:56.050 --> 00:16:59.820\nNow if I were to double click that,\nit runs the GUI installer for Exchange.\n\n383\n00:16:59.820 --> 00:17:01.170\nI don't want to install Exchange.\n\n384\n00:17:01.170 --> 00:17:03.960\nI just want to get my\nactive directory prepared.\n\n385\n00:17:03.960 --> 00:17:07.950\nSo the first command I'm gonna\nrun is going to extend my Schema.\n\n386\n00:17:07.950 --> 00:17:09.740\nIt's gonna add those attributes and\n\n387\n00:17:09.740 --> 00:17:13.850\nthis is the command that somebody needs\nto be in the Schema Admin group to run.\n\n388\n00:17:13.850 --> 00:17:21.020\nAnd the command looks like this,\nwe run setup.exe/ PrepareAD.\n\n389\n00:17:21.020 --> 00:17:22.570\nThat's what's telling you,\nhey don't install Exchange.\n\n390\n00:17:22.570 --> 00:17:26.020\nWe don't wanna install Exchange on this\nserver, we just wanna get our AD ready.\n\n391\n00:17:26.020 --> 00:17:29.880\nAnd then we say OrganizationName, right.\n\n392\n00:17:29.880 --> 00:17:33.320\nThis is gonna create\nan Exchange organization.\n\n393\n00:17:33.320 --> 00:17:36.750\nIf this is not your first Exchange Server,\nif you had Exchange 2010 or\n\n394\n00:17:36.750 --> 00:17:40.630\nearlier you already have an organization\nname, you can leave this off, all right?\n\n395\n00:17:40.630 --> 00:17:44.670\nBut if this is your very first install,\nit's important you provide\n\n396\n00:17:44.670 --> 00:17:48.210\nthe organization name because otherwise\nit'll call it default organization.\n\n397\n00:17:48.210 --> 00:17:50.790\nAnd little fact about organization names,\nyou can't change them.\n\n398\n00:17:50.790 --> 00:17:53.340\nSo the rest of your life,\nyou're going to have default organization.\n\n399\n00:17:53.340 --> 00:17:56.520\nNow, the organization name,\nthe end users never see it.\n\n400\n00:17:56.520 --> 00:18:00.100\nEnd users never see this at all, so\nyou could really put whatever you wanted.\n\n401\n00:18:00.100 --> 00:18:05.310\nBut because you can't change it, it's\nimportant that you pick something right.\n\n402\n00:18:05.310 --> 00:18:07.300\nFigure out what your company name is,\nor whatever, or\n\n403\n00:18:07.300 --> 00:18:09.250\ncome to some kind of agreement and\nspecify it.\n\n404\n00:18:09.250 --> 00:18:15.600\nSo I'm gonna call mine ITProTV Lab,\nso this my lab.\n\n405\n00:18:15.600 --> 00:18:18.950\nYou can do letters, numbers,\nspaces, it's limited, I think,\n\n406\n00:18:18.950 --> 00:18:21.160\nto 64 characters is what it's limited to.\n\n407\n00:18:21.160 --> 00:18:23.600\nYou can't do special characters,\nyou can do hyphens, but\n\n408\n00:18:23.600 --> 00:18:26.850\nyou can't do exclamation points or\nat symbol, it won't let you do those.\n\n409\n00:18:26.850 --> 00:18:30.360\nBut letters, numbers, spaces,\nhyphens, up to 64 characters.\n\n410\n00:18:32.240 --> 00:18:37.551\nAnd then lastly, I need to say\n\n411\n00:18:37.551 --> 00:18:44.992\nIAcceptExchangeServerLicenseTerms.\n\n412\n00:18:44.992 --> 00:18:46.442\nAll right?\nThat's gonna word wrap on\n\n413\n00:18:46.442 --> 00:18:47.301\nme a little bit there.\n\n414\n00:18:47.301 --> 00:18:51.144\nBut basically I'm just telling it,\nthere's that End User License Agreement,\n\n415\n00:18:51.144 --> 00:18:52.510\nI'm going to agree to that.\n\n416\n00:18:52.510 --> 00:18:56.350\nSo I'm saying prepare the AD,\nit's gonna extend my Schema.\n\n417\n00:18:56.350 --> 00:18:59.300\nHere's my organization name since\nthis is a new organization.\n\n418\n00:18:59.300 --> 00:19:01.890\nAgain if I had an organization\nalready I can leave that off, and\n\n419\n00:19:01.890 --> 00:19:04.560\nthen I accept the licensing term.\n\n420\n00:19:04.560 --> 00:19:08.400\nNow when I run that,\nit's gonna run and hopefully succeed.\n\n421\n00:19:08.400 --> 00:19:10.940\nNow there's some things that\ncan make this not work, right?\n\n422\n00:19:10.940 --> 00:19:14.885\nYou really do need to have the .NET\nFramework version 4.5.2 installed.\n\n423\n00:19:14.885 --> 00:19:16.892\nIf you've done your Windows updates,\nyou've got it.\n\n424\n00:19:16.892 --> 00:19:19.020\nIf you haven't done your Windows updates,\nyou might not.\n\n425\n00:19:19.020 --> 00:19:22.110\nSo make sure you've got\nthe .NET Framework in place and\n\n426\n00:19:22.110 --> 00:19:26.710\nyou also need the Windows Management\nFramework Version 4.0, which if you're\n\n427\n00:19:26.710 --> 00:19:29.790\nrunning WIndows Server 2012 R2 it's\nalready included, it's already there.\n\n428\n00:19:29.790 --> 00:19:31.580\nIf you're running Windows\nserver 2012 not R2,\n\n429\n00:19:31.580 --> 00:19:34.880\nif you've done your Windows\nupdates you've already got it.\n\n430\n00:19:34.880 --> 00:19:38.384\nBut if you're running Windows\nserver 2008 it doesn't have it.\n\n431\n00:19:38.384 --> 00:19:40.335\nYou need to go and\ndownload it and install it.\n\n432\n00:19:40.335 --> 00:19:44.229\nSo, it's going to do some prerequisite\nchecks and that's where it's looking for\n\n433\n00:19:44.229 --> 00:19:45.090\nthat stuff.\n\n434\n00:19:45.090 --> 00:19:49.880\nIt's looking, am I running Windows\nserver 2008 or 2012, right?\n\n435\n00:19:49.880 --> 00:19:53.210\nBecause you can install Exchange 2013\non Windows server 2008 if you want.\n\n436\n00:19:53.210 --> 00:19:56.620\n2012 is the better route,\nbut 2008 will work.\n\n437\n00:19:56.620 --> 00:20:01.280\nIt does need to be Windows Server\n2008 service pack one or higher.\n\n438\n00:20:01.280 --> 00:20:05.010\nSo you've got to make sure your service\npacks, but otherwise it'll do it.\n\n439\n00:20:05.010 --> 00:20:07.350\nAfter it checks that then it's going\nto start extending the Schema and\n\n440\n00:20:07.350 --> 00:20:09.060\nthat's actually what\nit's doing right here.\n\n441\n00:20:09.060 --> 00:20:11.710\nIt's preparing my organization and\nI get a nice little percentage and\n\n442\n00:20:11.710 --> 00:20:13.124\nit's going to track that and\nmove it along.\n\n443\n00:20:13.124 --> 00:20:18.760\nThe .NET framework, .NET Framework 4.5 is\nincluded with the Windows Server 2012,\n\n444\n00:20:18.760 --> 00:20:22.450\nbut it's a feature,\nyou might need to add that feature.\n\n445\n00:20:22.450 --> 00:20:26.690\nSo if you go back to your server\nmanager and Manage, Add Roles and\n\n446\n00:20:26.690 --> 00:20:31.700\nFeatures, inside of your Features,\nI'm just gonna move through this.\n\n447\n00:20:31.700 --> 00:20:35.290\nI'll skip the Role screen, so\nI don't wanna mess with my roles.\n\n448\n00:20:35.290 --> 00:20:39.484\nBut on the feature side you'll\nsee .NET Framework 4.5, okay,\n\n449\n00:20:39.484 --> 00:20:43.100\nit's 4.5.0, and we need 4.5.2.\n\n450\n00:20:43.100 --> 00:20:46.830\nSo, if you install that, you then need to\ndo Windows Updates afterwards to make sure\n\n451\n00:20:46.830 --> 00:20:49.070\nyou go 4.5.2 or\nyou can go and download it.\n\n452\n00:20:51.060 --> 00:20:54.000\nAll right, so we need to have that\nin place to be able to run ADprep.\n\n453\n00:20:54.000 --> 00:20:56.190\nSo those are some of the things\nthat can cause it to fail.\n\n454\n00:20:56.190 --> 00:20:59.590\nBut otherwise, you usually just\nlet it run and it cruises along.\n\n455\n00:20:59.590 --> 00:21:03.330\nIt doesn't take too terribly long,\nbut what it's doing in the background\n\n456\n00:21:03.330 --> 00:21:07.120\nis it's modifying a Schema,\nadding in a bunch of attributes for that,\n\n457\n00:21:07.120 --> 00:21:10.230\nit's creating another active directory\npartition inside of the configuration\n\n458\n00:21:10.230 --> 00:21:15.090\npartition to define our Exchange configs\nand what servers would exist and so on,\n\n459\n00:21:15.090 --> 00:21:18.010\nall the different containers,\nthe folders that store that data.\n\n460\n00:21:18.010 --> 00:21:20.080\nSo it's working on all of\nthat in the background and\n\n461\n00:21:20.080 --> 00:21:22.240\nit's doing it right here\non the Schema Manager.\n\n462\n00:21:22.240 --> 00:21:25.540\nNow I didn't do it, but there was another\ncommand line tag I could have done,\n\n463\n00:21:25.540 --> 00:21:29.210\nwhich is slash domain controller and\nyou can specify a DC.\n\n464\n00:21:29.210 --> 00:21:32.890\nSo if you want to run it from your\nwork station or another server,\n\n465\n00:21:32.890 --> 00:21:37.180\nyou would use /domain controller: and\nthen the name of your Schema Master.\n\n466\n00:21:37.180 --> 00:21:38.920\nIt does need to be that\nSchema Master though,\n\n467\n00:21:38.920 --> 00:21:41.600\nbecause we're modifying the Schema,\nall right?\n\n468\n00:21:41.600 --> 00:21:42.510\nSo, it's going to churn along.\n\n469\n00:21:42.510 --> 00:21:44.700\nNow, it's getting the Schema ready.\n\n470\n00:21:44.700 --> 00:21:48.380\nWhen it's done,\nI need to prepare my domain.\n\n471\n00:21:48.380 --> 00:21:50.250\nAnd preparing the domain goes much faster.\n\n472\n00:21:50.250 --> 00:21:53.140\nBecause all it's doing is creating\nsome users in groups, and that's it.\n\n473\n00:21:53.140 --> 00:21:57.020\nIt actually creates one or two OUs in\nyour active directory and that's it.\n\n474\n00:21:57.020 --> 00:22:00.380\nSo while this is running, if I go back to\nmy active directory, users and computers.\n\n475\n00:22:01.420 --> 00:22:05.000\nAnd I take a look at it, you can see my\nfolders here as I look down the side.\n\n476\n00:22:05.000 --> 00:22:07.960\nWe've got things like, well actually\none of them has already appeared,\n\n477\n00:22:07.960 --> 00:22:09.780\nMicrosoft Exchange security groups.\n\n478\n00:22:09.780 --> 00:22:12.550\nThat wasn't there a few moments ago,\nit just got created\n\n479\n00:22:12.550 --> 00:22:15.690\nbecause my AD is being prepared\nright now in the background, right.\n\n480\n00:22:15.690 --> 00:22:19.460\nSo it's creating that and we'll see that\nit does that for this domain that I'm in,\n\n481\n00:22:19.460 --> 00:22:21.910\nbut not the other domains\nin my organization.\n\n482\n00:22:21.910 --> 00:22:25.700\nSo I need to get those prepared, and\nthat'll be my next step is preparing them.\n\n483\n00:22:25.700 --> 00:22:27.210\nBut it also creates a few user accounts,\n\n484\n00:22:27.210 --> 00:22:30.310\nwe'll start to see some other things pop\nup, we'll verify all that in a minute.\n\n485\n00:22:30.310 --> 00:22:33.520\nAll right, looks like this one's done.\n\n486\n00:22:33.520 --> 00:22:34.750\nMy Schema has now been extended.\n\n487\n00:22:35.950 --> 00:22:36.890\nHow do I know it worked?\n\n488\n00:22:36.890 --> 00:22:38.580\nWell, I can go and verify that.\n\n489\n00:22:38.580 --> 00:22:41.550\nI've got my handy dandy Schema tool\nthat we've built up at the beginning\n\n490\n00:22:41.550 --> 00:22:42.900\nof the episode.\n\n491\n00:22:42.900 --> 00:22:47.380\nAnd if I go back into this and\nI'm just gonna browse in here and\n\n492\n00:22:47.380 --> 00:22:49.840\nfind the User Class.\n\n493\n00:22:51.240 --> 00:22:52.680\nWhich was down here at the bottom.\n\n494\n00:22:53.750 --> 00:22:57.060\nSo here's my User Class and\nall the attributes tied to my user.\n\n495\n00:22:57.060 --> 00:23:00.900\nI'm gonna scroll down and\nwhat I should see, here it is.\n\n496\n00:23:00.900 --> 00:23:02.955\nRemember from the beginning\nof the episode,\n\n497\n00:23:02.955 --> 00:23:05.660\nthere were three MS Exchange attributes.\n\n498\n00:23:05.660 --> 00:23:10.650\nNow I start right here and\nif I scroll down, let me just scroll and\n\n499\n00:23:10.650 --> 00:23:15.480\nscroll and scroll, there's a few,\nthere's a few Exchange attributes here.\n\n500\n00:23:15.480 --> 00:23:19.220\nGood gosh there's probably, well, there's\ngot to be at least 100 of them right?\n\n501\n00:23:19.220 --> 00:23:22.310\nThese are all Exchange attributes\nthat have been added in the Schema.\n\n502\n00:23:22.310 --> 00:23:25.800\nI'm still scrolling, there we go,\nthere's the end of it right there.\n\n503\n00:23:25.800 --> 00:23:29.970\nAnd so we can see that's a huge\namount of attributes that it added.\n\n504\n00:23:29.970 --> 00:23:32.360\nThose are all attributes that\nwe can never get rid of.\n\n505\n00:23:32.360 --> 00:23:32.960\nThey're permanent.\n\n506\n00:23:32.960 --> 00:23:34.960\nThey're a part of the Schema now, right?\n\n507\n00:23:34.960 --> 00:23:37.280\nIf I store data in there,\nit's going to stay there.\n\n508\n00:23:37.280 --> 00:23:39.410\nI can disable the attributes but\n\n509\n00:23:39.410 --> 00:23:42.930\nthey're still gonna reside in\nthe four Schema forever right.\n\n510\n00:23:42.930 --> 00:23:44.010\nSo those stay there.\n\n511\n00:23:44.010 --> 00:23:48.851\nThat's what preparing the AD did,\nit created all of those.\n\n512\n00:23:48.851 --> 00:23:52.427\nNow if I only have one domain,\nI could actually stop right there,\n\n513\n00:23:52.427 --> 00:23:56.250\nit did prepare my domain too\nbecause I'm in that domain.\n\n514\n00:23:56.250 --> 00:24:00.300\nBut if I have more than one domain\nI gotta prepare my other domains.\n\n515\n00:24:00.300 --> 00:24:03.557\nAnd I can do them one at a time or\nI can do them all at once.\n\n516\n00:24:03.557 --> 00:24:06.429\nIf I want to do them one at a time, I'm\njust gonna bring up this command line that\n\n517\n00:24:06.429 --> 00:24:09.430\nI ran a moment ago and\nI'm gonna modify it a little bit.\n\n518\n00:24:09.430 --> 00:24:11.440\nIf I want to do them one at a time,\n\n519\n00:24:11.440 --> 00:24:16.120\nI can get rid of this organization since\nthat's already created, I don't need that.\n\n520\n00:24:16.120 --> 00:24:20.890\nAnd I can get PrepareAD and\nchange that to PrepareDomain, so\n\n521\n00:24:20.890 --> 00:24:22.630\nnow it's just preparing\na particular domain.\n\n522\n00:24:23.660 --> 00:24:27.830\nAnd I can then specify the domain\nthat I want to prepare.\n\n523\n00:24:27.830 --> 00:24:32.500\nSo mine is lab.itprov.tv,\nthat's the domain I wanna prepare.\n\n524\n00:24:32.500 --> 00:24:34.240\nAnd then I accept the licensing terms.\n\n525\n00:24:34.240 --> 00:24:36.300\nSo that's gonna get that\none domain prepared.\n\n526\n00:24:37.390 --> 00:24:41.610\nI need to be a domain admin for that\ndomain in order for this command to work.\n\n527\n00:24:41.610 --> 00:24:43.190\nAnd you can run this on\nany domain controller.\n\n528\n00:24:43.190 --> 00:24:44.950\nThis doesn't have to be run\non the Schema Admin anymore.\n\n529\n00:24:46.050 --> 00:24:48.130\nAll right.\nSo if you're a really big company,\n\n530\n00:24:48.130 --> 00:24:52.800\nyou might have a Schema team and then a\nregular AD team, so the Schema team might\n\n531\n00:24:52.800 --> 00:24:57.270\nrun the PrepareAD, and then the regular\nserver admin team runs the PrepareDomain.\n\n532\n00:24:58.350 --> 00:25:01.780\nBut if you're an Enterprise admin like\nI am, you can make it even easier,\n\n533\n00:25:01.780 --> 00:25:10.890\nbecause you can change this to\nsay PrepareAllDomains, alright.\n\n534\n00:25:10.890 --> 00:25:13.320\nWhen we say prepare all domains,\nit says get them all.\n\n535\n00:25:13.320 --> 00:25:14.630\nJust knock them all out at once.\n\n536\n00:25:14.630 --> 00:25:16.993\nOne big command,\nyou do need to be an Enterprise admin for\n\n537\n00:25:16.993 --> 00:25:19.220\nthis because it's got to\nrun across all the domains.\n\n538\n00:25:19.220 --> 00:25:23.260\nAnd so that's going to reach out and\nknock them out.\n\n539\n00:25:23.260 --> 00:25:24.320\nThat's going to run pretty quick.\n\n540\n00:25:24.320 --> 00:25:26.950\nJust creating some users some\ngroups setting some permissions.\n\n541\n00:25:26.950 --> 00:25:27.720\nNothing too fancy.\n\n542\n00:25:27.720 --> 00:25:30.500\nBut, while it's running let\nme just mention something.\n\n543\n00:25:30.500 --> 00:25:32.530\nLet's say you get hired somewhere.\n\n544\n00:25:32.530 --> 00:25:35.950\nAnd you can see those Exchange\nattributes in the active directory but\n\n545\n00:25:35.950 --> 00:25:40.510\nyou don't know if it's 2010 or 2013 or\n2007, you don't know, all right.\n\n546\n00:25:40.510 --> 00:25:44.350\nIt doesn't hurt to run these commands\na second time or a third time or\n\n547\n00:25:44.350 --> 00:25:45.630\na fourth time or a fifth time.\n\n548\n00:25:45.630 --> 00:25:47.950\nIf the attributes already exist,\nit just skips over them.\n\n549\n00:25:47.950 --> 00:25:50.740\nIf the users and the groups already exist,\nit skips over them.\n\n550\n00:25:50.740 --> 00:25:53.270\nBut anything that's missing,\nit'll put in there.\n\n551\n00:25:53.270 --> 00:25:56.130\nSo if you're not sure whether\nyou're running the latest ones,\n\n552\n00:25:56.130 --> 00:25:57.660\nit doesn't hurt to go ahead and\nredo the prep.\n\n553\n00:25:57.660 --> 00:26:00.450\nYou can rerun it, it'll churn right\nthrough, and it'll get them updated.\n\n554\n00:26:00.450 --> 00:26:02.290\nSo, when in doubt, just run them again.\n\n555\n00:26:03.390 --> 00:26:06.693\nAlright so at the end of the day there are\nreally two commands that I ran here right?\n\n556\n00:26:06.693 --> 00:26:11.670\nSetup/PrepareAD and\nsetup/preparealldomains.\n\n557\n00:26:11.670 --> 00:26:12.580\nThose two.\n\n558\n00:26:12.580 --> 00:26:16.670\nPrepare AD, they got my Schema ready and\nthat had to be run on the Schema Admin.\n\n559\n00:26:16.670 --> 00:26:19.950\nPrepare all domains, that got all my\ndomains ready and that could be run on any\n\n560\n00:26:19.950 --> 00:26:23.120\ndomain controller I just need to\nmake sure I have the permissions.\n\n561\n00:26:23.120 --> 00:26:27.290\nWhen that's done,\nI've now got all my attributes in the AD,\n\n562\n00:26:27.290 --> 00:26:31.350\nand I've got my various other accounts\ncreated in the active director it self.\n\n563\n00:26:31.350 --> 00:26:32.830\nSo if I go to active director users and\n\n564\n00:26:32.830 --> 00:26:37.910\ncomputers, now we expect to see\nif you didnt see it before,\n\n565\n00:26:37.910 --> 00:26:41.300\nnow you'll see that Microsoft exchange\nsecurity groups and all the groups that\n\n566\n00:26:41.300 --> 00:26:46.790\nare inside of there under users, you'll\nsee the Exchange online application.\n\n567\n00:26:46.790 --> 00:26:48.980\nThat's allowing our hooks to Azure.\n\n568\n00:26:48.980 --> 00:26:50.230\nSo it'll have that.\n\n569\n00:26:50.230 --> 00:26:52.120\nSo you'll see a few\nother things like that.\n\n570\n00:26:52.120 --> 00:26:53.890\nAs well as some hidden objects,\n\n571\n00:26:53.890 --> 00:26:56.840\nthat only turn up when you go\ninto like your advanced views.\n\n572\n00:26:56.840 --> 00:26:58.350\nWhen you start to turn these on,\nyou can dig and\n\n573\n00:26:58.350 --> 00:27:00.360\nthen you'll see some more\nthings buried in here.\n\n574\n00:27:00.360 --> 00:27:04.150\nLike these Microsoft Exchange system\nobjects that are hidden by default.\n\n575\n00:27:04.150 --> 00:27:07.900\nAnd that's where you can jump in and start\nsee your monitoring mailboxes and so on.\n\n576\n00:27:07.900 --> 00:27:10.490\nAll of that was created\nby preparing the AD.\n\n577\n00:27:10.490 --> 00:27:14.490\nWhen this is done,\nnow we can install Exchange.\n\n578\n00:27:14.490 --> 00:27:16.700\nIf we try to install Exchange\nbefore preparing it,\n\n579\n00:27:16.700 --> 00:27:18.190\nit would fail, it wouldn't work.\n\n580\n00:27:18.190 --> 00:27:20.960\nAlright so\nyou've got to prepare your AD first.\n\n581\n00:27:20.960 --> 00:27:24.480\nNow the newer installers that come with\nExchange 2013 will actually try and\n\n582\n00:27:24.480 --> 00:27:26.340\nprepare the AD for you.\n\n583\n00:27:26.340 --> 00:27:28.070\nBut you need to be in\nthe Schema Admins group.\n\n584\n00:27:28.070 --> 00:27:31.240\nYou need to be in the Enterprise Admins\ngroup in order for it to run.\n\n585\n00:27:31.240 --> 00:27:34.350\nIf your environment has divided roles,\nthat's not gonna work,\n\n586\n00:27:34.350 --> 00:27:36.890\nand you've gotta run it step by step\nlike I just did in this episode.\n\n587\n00:27:36.890 --> 00:27:38.120\nSo keep that in mind as you deploy it.\n\n588\n00:27:39.370 --> 00:27:41.290\nAll right,\nwell that takes care of preparing the AD.\n\n589\n00:27:41.290 --> 00:27:44.050\nOur next step is to\nactually install Exchange.\n\n590\n00:27:44.050 --> 00:27:46.710\nI'm a little short on time for\nthis episode so we'll save that for\n\n591\n00:27:46.710 --> 00:27:48.660\nthe next one and we'll wrap up right here.\n\n592\n00:27:48.660 --> 00:27:53.400\nSo in this segment we got a chance to see\ngetting our Active Directory, our Schema,\n\n593\n00:27:53.400 --> 00:27:56.780\ngetting all of that ready to\ndeploy Exchange the first time.\n\n594\n00:27:56.780 --> 00:27:58.380\nReal important steps.\n\n595\n00:27:58.380 --> 00:27:59.580\nAll right, well we'll go ahead and\nwrap it up here.\n\n596\n00:27:59.580 --> 00:28:01.480\nI hope you guys enjoyed the episode.\n\n597\n00:28:01.480 --> 00:28:05.684\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n598\n00:28:05.684 --> 00:28:10.397\n[SOUND]\n\n",
          "vimeoId": "135908050"
        },
        {
          "description": "In this episode, Don demonstrates installing Exchange 2013 on a Windows Server 2012 R2 system. He discusses the prerequisites and then walks the viewers through a Mailbox and Client Access server install.",
          "length": "1467",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-4-installing_exchange_server_2013-081015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-4-installing_exchange_server_2013-081015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-1-4-installing_exchange_server_2013-081015-1-sm.jpg",
          "title": "Installing Exchange Server 2013",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.059 --> 00:00:13.539\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:13.539 --> 00:00:15.230\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.230 --> 00:00:20.340\nI'm your host Don Pezet, back again\nwith another episode of Exchange 2013.\n\n5\n00:00:20.340 --> 00:00:24.950\nIn this segment, we're gonna take the\nplunge and get Exchange 2013 installed.\n\n6\n00:00:24.950 --> 00:00:28.140\nWe've talked about it in our previous\nepisodes, all the prep work we have to\n\n7\n00:00:28.140 --> 00:00:31.820\ndo to get ready to install,\nnow we're ready to pull the trigger.\n\n8\n00:00:31.820 --> 00:00:35.000\nThe installation's pretty straightforward,\nbut it does ask us a few questions that we\n\n9\n00:00:35.000 --> 00:00:39.410\nneed to be aware of and kinda understand\nthe repercussions of our decisions, right?\n\n10\n00:00:39.410 --> 00:00:42.640\nSo, first off let's just tackle\na couple of prerequisites we need to\n\n11\n00:00:42.640 --> 00:00:44.750\nmeet before we're able to do the install.\n\n12\n00:00:44.750 --> 00:00:47.250\nIf you're installing Exchange 2013,\n\n13\n00:00:47.250 --> 00:00:50.160\nfirst off,\nyour active directory has to be prepared.\n\n14\n00:00:50.160 --> 00:00:53.880\nYour schema and your AD have to\nbe ready to receive Exchange.\n\n15\n00:00:53.880 --> 00:00:57.780\nSo if you haven't already, jump back and\nwatch our episode on preparing the AD.\n\n16\n00:00:57.780 --> 00:01:02.900\nAssuming that's done, the server\nyou're going to install on needs to be\n\n17\n00:01:02.900 --> 00:01:08.980\nWindows Server 2008 with Service Pack 1 or\nhigher, or Windows Server 2012, all right?\n\n18\n00:01:08.980 --> 00:01:10.920\nThose are the two supported\noperating systems and\n\n19\n00:01:10.920 --> 00:01:12.470\nobviously Microsoft's recommendation.\n\n20\n00:01:12.470 --> 00:01:14.640\nThey want you to run it\non Windows Server 2012.\n\n21\n00:01:14.640 --> 00:01:18.760\nSo the server I'm going to\ninstall on is Windows 2012 R2.\n\n22\n00:01:18.760 --> 00:01:20.960\nYou can do it in 2008 if\nthat's what you've got or\n\n23\n00:01:20.960 --> 00:01:21.980\nthat's what you need to support.\n\n24\n00:01:21.980 --> 00:01:23.950\nIt's up to you how you wanna go about it.\n\n25\n00:01:23.950 --> 00:01:24.600\nAll right,\n\n26\n00:01:24.600 --> 00:01:28.040\nafter that there's couple little pieces\nof software that we need all right.\n\n27\n00:01:28.040 --> 00:01:34.010\nYou need to have the .NET\nframework version 4.5.2 installed.\n\n28\n00:01:34.010 --> 00:01:38.690\nNow in Windows Server 2012 and Windows\nServer 2008 it's not installed by default.\n\n29\n00:01:38.690 --> 00:01:42.010\nIn Server 2008, you can go to Microsoft's\nwebsite, and you can download it.\n\n30\n00:01:42.010 --> 00:01:44.120\nIn 2012,\nit's actually a feature you can turn on.\n\n31\n00:01:44.120 --> 00:01:46.430\nLet me show you where to\nfind that on the server.\n\n32\n00:01:46.430 --> 00:01:47.860\nSo here I'm on my server.\n\n33\n00:01:47.860 --> 00:01:49.710\nMy server's just called LAB-EXCHSERV01.\n\n34\n00:01:49.710 --> 00:01:50.895\nIt's not actually running.\n\n35\n00:01:50.895 --> 00:01:52.145\nExchange yet.\n\n36\n00:01:52.145 --> 00:01:54.765\nAnd if I go up here to manage and\nadd roles and\n\n37\n00:01:54.765 --> 00:01:57.025\nfeatures, we can move through this wizard.\n\n38\n00:01:57.025 --> 00:01:58.535\nNow, I don't want to add any roles.\n\n39\n00:01:58.535 --> 00:02:01.265\nI just want to mess with my features, so\nI'm just gonna hit next over and over and\n\n40\n00:02:01.265 --> 00:02:04.975\nover again until I get to my features\nscreen, and right here at the top of\n\n41\n00:02:04.975 --> 00:02:08.720\nfeatures you'll see dot net framework\n4.5 you need to install it and\n\n42\n00:02:08.720 --> 00:02:12.479\nthen, you need to do your\nWindows updates to get to 4.5.2.\n\n43\n00:02:12.479 --> 00:02:13.250\nAll right.\n\n44\n00:02:13.250 --> 00:02:15.240\nThat's the minimum version.\n\n45\n00:02:15.240 --> 00:02:17.730\nYou also need\nthe Windows Management Framework 4.0.\n\n46\n00:02:17.730 --> 00:02:22.430\nIf you're running Server 2012 R2, you've\nalready got it, it's part of the system.\n\n47\n00:02:22.430 --> 00:02:26.220\nIf you're running Windows Server 2012,\njust do your Windows updates.\n\n48\n00:02:26.220 --> 00:02:29.010\nBut if you're running Windows Server 2008,\nyou're gonna have to go and download it.\n\n49\n00:02:29.010 --> 00:02:31.880\nSo, you can go and download it\nright from Microsoft's website.\n\n50\n00:02:31.880 --> 00:02:33.520\nI'll post the links in the show notes.\n\n51\n00:02:33.520 --> 00:02:36.420\nIn Server 2008 you have to\ndownload .NET Framework 452 and\n\n52\n00:02:36.420 --> 00:02:39.450\nyou have to download\nthe Windows Framework 4.0.\n\n53\n00:02:39.450 --> 00:02:44.350\nYou also need the Unified Communications\nFramework even if you're not\n\n54\n00:02:44.350 --> 00:02:47.700\ngonna use the Unified Communications stuff\nthat service is installed by default and\n\n55\n00:02:47.700 --> 00:02:49.470\nyou've gotta have it installed.\n\n56\n00:02:49.470 --> 00:02:51.260\nNone of the versions of\nserver come with that.\n\n57\n00:02:51.260 --> 00:02:53.422\nYou're always gonna have to go and\ndownload that one.\n\n58\n00:02:53.422 --> 00:02:56.660\nAll right, now if you're missing any of\nthese components, when you do the install\n\n59\n00:02:56.660 --> 00:03:00.210\nit'll check, it'll see they're missing and\nit'll give you the links to download them.\n\n60\n00:03:00.210 --> 00:03:04.990\nBut what I do, I might install a few\nmore exchange servers then most people.\n\n61\n00:03:04.990 --> 00:03:08.170\nBut If you find yourself installing a lot,\nwhat I like to do is,\n\n62\n00:03:08.170 --> 00:03:11.820\nI create a little file\nwhere I store these things,\n\n63\n00:03:11.820 --> 00:03:17.000\nwhere I have the .net\nframework 4.5.2 right there.\n\n64\n00:03:17.000 --> 00:03:20.360\nI've got my\nWindows Management Framework 4.0 and\n\n65\n00:03:20.360 --> 00:03:23.140\nI've got the Unified Communications\nFramework right there.\n\n66\n00:03:23.140 --> 00:03:26.110\nSo, I just keep them handy, and when\nI'm building up a new exchange server,\n\n67\n00:03:26.110 --> 00:03:27.260\nI can just install those.\n\n68\n00:03:27.260 --> 00:03:30.300\nNow, in 2012,\nyou don't need the 452 installer, and\n\n69\n00:03:30.300 --> 00:03:31.860\nyou don't need the management framework.\n\n70\n00:03:31.860 --> 00:03:35.240\nYou just need the unified communications\nbut on 2008 you'd need all three.\n\n71\n00:03:35.240 --> 00:03:36.800\nSo you just install those, and you run.\n\n72\n00:03:38.490 --> 00:03:40.330\nNow when we do the install,\n\n73\n00:03:40.330 --> 00:03:45.720\nyou're gonna have to pick between whether\nyou're doing a edge transport server,\n\n74\n00:03:45.720 --> 00:03:51.870\na client access server, or a mailbox\nserver or maybe you're doing all three.\n\n75\n00:03:51.870 --> 00:03:53.330\nWell, there's some services,\n\n76\n00:03:53.330 --> 00:03:57.260\nsome roles that need to be\ninstalled ahead of time, and.\n\n77\n00:03:57.260 --> 00:04:00.610\nIf you go to Microsoft's website, they\ngive you the list, it's a massive list of\n\n78\n00:04:00.610 --> 00:04:03.530\nall sorts of different roles and\nso it's hard to keep track of.\n\n79\n00:04:03.530 --> 00:04:05.970\nAnd this is another one that I\nusually keep in a handy file, and\n\n80\n00:04:05.970 --> 00:04:09.380\nyou'll see mine right here,\nPowerShell install.\n\n81\n00:04:09.380 --> 00:04:13.160\nWhen you install Exchange, there's\ncertain roles and features you need and\n\n82\n00:04:13.160 --> 00:04:15.540\nthe installer will actually add them for\nyou.\n\n83\n00:04:15.540 --> 00:04:18.700\nBut the problem is it's gonna make\nyou reboot during the install and\n\n84\n00:04:18.700 --> 00:04:20.750\nthen you kinda gotta continue and\nit's really annoying so\n\n85\n00:04:20.750 --> 00:04:22.410\nit's something I like to do ahead of time.\n\n86\n00:04:22.410 --> 00:04:24.860\nAhead of time I like to go ahead and\ninstall these roles.\n\n87\n00:04:24.860 --> 00:04:28.820\nAnd so I've just kind of created\nthis power shell script that I run\n\n88\n00:04:28.820 --> 00:04:33.470\nthat has all the different roles and\nfeatures I need to have installed.\n\n89\n00:04:33.470 --> 00:04:37.340\nIf it's a client access server or a mail\nbox server, there's actually quite a few.\n\n90\n00:04:37.340 --> 00:04:39.820\nThis list,\nlet me turn on word wrap here so\n\n91\n00:04:39.820 --> 00:04:41.750\nyou guys kind of get the full experience.\n\n92\n00:04:41.750 --> 00:04:42.650\nThere we go.\n\n93\n00:04:42.650 --> 00:04:45.220\nIt's a lot of different things,\nit's hard to keep track of.\n\n94\n00:04:45.220 --> 00:04:48.900\nAnd I'll post this with the show notes too\nso you guys can have it, just remember,\n\n95\n00:04:48.900 --> 00:04:51.300\nif you don't have these\nit'll add these for you.\n\n96\n00:04:51.300 --> 00:04:53.560\nIt's just an extra reboot\nduring the install.\n\n97\n00:04:53.560 --> 00:04:55.800\nSo, if you're trying to save\nyourself from a reboot,\n\n98\n00:04:55.800 --> 00:04:58.210\nyou can install these ahead of time.\n\n99\n00:04:58.210 --> 00:05:00.410\nNow, if it's an edge transport\nserver you only need one.\n\n100\n00:05:00.410 --> 00:05:04.040\nYou need the lightweight directory\nservices, or the ADLDS, so\n\n101\n00:05:04.040 --> 00:05:05.410\nyou need to get that installed.\n\n102\n00:05:05.410 --> 00:05:10.210\nBut, if it's a client access or a mailbox\nyou need all of these guys up here.\n\n103\n00:05:10.210 --> 00:05:13.360\nAnd so what I usually do is take this and\n\n104\n00:05:13.360 --> 00:05:17.710\nthen I just jump into a power shell,\nwhich I'll run as an administrator.\n\n105\n00:05:19.030 --> 00:05:20.660\nAnd then we can just paste that right in.\n\n106\n00:05:20.660 --> 00:05:23.820\nAnd it's gonna run,\nit's gonna add all those rolls.\n\n107\n00:05:23.820 --> 00:05:26.190\nNow, I've already got them installed\nbecause it takes a good 10 or\n\n108\n00:05:26.190 --> 00:05:29.900\n15 minutes and I didn't think you guys\nwanted to sit here and watch that so\n\n109\n00:05:29.900 --> 00:05:33.520\nI did it before the show, but if you've\nalready got them, it just comes back and\n\n110\n00:05:33.520 --> 00:05:35.780\nsays success true, no restart needed.\n\n111\n00:05:35.780 --> 00:05:39.440\nBut if you didn't, it would actually sit\nthere and install all those roles and\n\n112\n00:05:39.440 --> 00:05:42.320\nfeatures, and when it was done it\nwould tell you you need to reboot.\n\n113\n00:05:42.320 --> 00:05:46.350\nAnd you can reboot and now your server's\nready for that Exchange install.\n\n114\n00:05:46.350 --> 00:05:49.030\nIf you don't do this, we'll see when it\ndoes the prerequisite check it will offer\n\n115\n00:05:49.030 --> 00:05:49.889\nto install them for us.\n\n116\n00:05:51.022 --> 00:05:53.680\nAll right, so I would do this\non my client access server or\n\n117\n00:05:53.680 --> 00:05:57.380\nmailbox server or if it's gonna be both,\nget this ready ahead of time.\n\n118\n00:05:57.380 --> 00:05:58.980\nSo those are my prerequisites.\n\n119\n00:05:58.980 --> 00:06:02.130\nAssuming I've met those,\nI'm ready to do my install.\n\n120\n00:06:02.130 --> 00:06:03.600\nI can get things set up.\n\n121\n00:06:03.600 --> 00:06:06.240\nAnd the install is actually\npretty straightforward.\n\n122\n00:06:06.240 --> 00:06:10.570\nYou pop in your exchange DVD and\nthen it's got an auto run that'll run.\n\n123\n00:06:10.570 --> 00:06:11.312\nIf you pop it in,\n\n124\n00:06:11.312 --> 00:06:14.280\nit'll offer to launch it you can\nrun it just like I did right there.\n\n125\n00:06:14.280 --> 00:06:18.044\nOn the very first screen it's gonna\nask if you wanna connect for updates.\n\n126\n00:06:18.044 --> 00:06:20.877\nThe DVD you have is probably out of date,\nright?\n\n127\n00:06:20.877 --> 00:06:22.046\nIf you even have a DVD.\n\n128\n00:06:22.046 --> 00:06:25.350\nYou might be downloading it from Microsoft\nin which case it might be up to date.\n\n129\n00:06:25.350 --> 00:06:27.545\nBut it'll offer to reach out\nto the internet to find that.\n\n130\n00:06:27.545 --> 00:06:30.325\nJust for the sake of time here,\nI'm gonna say don't check but,\n\n131\n00:06:30.325 --> 00:06:32.346\nin real life land,\nI always do check, right?\n\n132\n00:06:32.346 --> 00:06:36.519\nThere's updated installers, because\nwhat'll happen is Microsoft will release\n\n133\n00:06:36.519 --> 00:06:40.334\nhot fixes and patches for Windows that\nmight break the exchange installer,\n\n134\n00:06:40.334 --> 00:06:42.137\nand checking online will fix that.\n\n135\n00:06:42.137 --> 00:06:44.135\nI've already done all on my\nwindows updates, I should be fine.\n\n136\n00:06:45.905 --> 00:06:48.805\nOn the next it's copying files,\nit's copying from the DVD\n\n137\n00:06:48.805 --> 00:06:52.245\nto a local cache on the system to\nbe able to run the installer, and\n\n138\n00:06:52.245 --> 00:06:53.975\nthat's really important\nif we need to reboot.\n\n139\n00:06:53.975 --> 00:06:56.047\nIt wants to be able to\nresume where it left off and\n\n140\n00:06:56.047 --> 00:06:58.437\nit'll use that cache to\nkeep track of all of that.\n\n141\n00:06:58.437 --> 00:07:01.007\nSo it's gonna build that\nup it only takes a moment.\n\n142\n00:07:01.007 --> 00:07:03.517\nThen it's gonna start\nchecking our prerequisites.\n\n143\n00:07:03.517 --> 00:07:05.167\nActually I think we have\na license agreement first and\n\n144\n00:07:05.167 --> 00:07:06.927\nthen it checks our prerequisites.\n\n145\n00:07:06.927 --> 00:07:11.137\nThat's where it's gonna look to say,\ndo you have the .Net framework installed?\n\n146\n00:07:11.137 --> 00:07:13.437\nDo you have the Windows Management 4.0?\n\n147\n00:07:13.437 --> 00:07:16.980\nDo you have the Unified\nCommunications Framework installed?\n\n148\n00:07:16.980 --> 00:07:20.448\nAnd if you do great and if you don't it's\ngonna give you the link to download them.\n\n149\n00:07:20.448 --> 00:07:22.950\nIt's also gonna check all of\nthose roles and features but\n\n150\n00:07:22.950 --> 00:07:25.460\non those if it's missing it'll\njust install them for you.\n\n151\n00:07:25.460 --> 00:07:26.590\nSo that's kind of nice.\n\n152\n00:07:26.590 --> 00:07:29.420\nBut that prerequisite check\ncan take a little while.\n\n153\n00:07:29.420 --> 00:07:31.980\nSo here's my introduction,\nI'll just move past that.\n\n154\n00:07:31.980 --> 00:07:33.630\nThere's my good old licensing agreement.\n\n155\n00:07:33.630 --> 00:07:36.080\nSo I'll read that after,\nthoroughly reading it and\n\n156\n00:07:36.080 --> 00:07:37.650\nmaking sure I agree with every clause.\n\n157\n00:07:40.000 --> 00:07:43.300\nThen it's asking about how I'm going\nto do my communications with Microsoft.\n\n158\n00:07:43.300 --> 00:07:45.320\nDo I want to send\ninformation back to them?\n\n159\n00:07:45.320 --> 00:07:47.550\nDo I want to manually\nconfigure settings later on?\n\n160\n00:07:47.550 --> 00:07:49.480\nThis is the user experience program.\n\n161\n00:07:49.480 --> 00:07:52.080\nWhen you have a failure, in exchange\nit can report that to Microsoft.\n\n162\n00:07:52.080 --> 00:07:55.430\nIt's also things like\nbasic usage information.\n\n163\n00:07:55.430 --> 00:07:57.260\nThey use to determine their next products.\n\n164\n00:07:57.260 --> 00:07:59.195\nThey like to see how people\nare using the product.\n\n165\n00:07:59.195 --> 00:08:01.090\nYou can choose how you\nwanna go about that.\n\n166\n00:08:01.090 --> 00:08:05.387\nI'll go ahead and\nprovide feedback to them.\n\n167\n00:08:05.387 --> 00:08:06.902\nNow the Role Selection.\n\n168\n00:08:06.902 --> 00:08:11.023\nNow this screen's a little weird, because\nyou'll notice that there's some options\n\n169\n00:08:11.023 --> 00:08:14.692\nthat are in black and some options that\nare in gray, and unlike most systems,\n\n170\n00:08:14.692 --> 00:08:19.050\nyou know normally black mean's it's\nselected, gray means it's not selected.\n\n171\n00:08:19.050 --> 00:08:24.410\nBut on this one there's actually two\nshades of gray so it gets a little weird.\n\n172\n00:08:24.410 --> 00:08:26.990\nSome of them are really light gray.\n\n173\n00:08:26.990 --> 00:08:27.850\nLike this guy right here.\n\n174\n00:08:27.850 --> 00:08:29.080\nManagement tools.\n\n175\n00:08:29.080 --> 00:08:30.990\nAnd what that means is\nyou have to have it.\n\n176\n00:08:30.990 --> 00:08:31.860\nYou don't have a choice.\n\n177\n00:08:31.860 --> 00:08:33.700\nRight.\nAnd I can barely read it on my screen.\n\n178\n00:08:33.700 --> 00:08:35.650\nI know you guys on the video are probably\nhave a hard time reading that.\n\n179\n00:08:35.650 --> 00:08:38.800\nBut it says management tools, and\nyou can't turn that on or off.\n\n180\n00:08:38.800 --> 00:08:39.730\nThat one's on.\n\n181\n00:08:39.730 --> 00:08:40.930\nAll right.\n\n182\n00:08:40.930 --> 00:08:44.990\nThese other ones though that\nare a different light grey.\n\n183\n00:08:44.990 --> 00:08:49.020\nI know it's ridiculous, but these are ones\nthat we can choose to turn on if we want.\n\n184\n00:08:49.020 --> 00:08:53.050\nThe first time I did this install\nI thought, wow, why is it locked?\n\n185\n00:08:53.050 --> 00:08:54.755\nWhy can't I install client access?\n\n186\n00:08:54.755 --> 00:08:57.400\nCuz normally when I see light grey like\nthat, it means you can't click it.\n\n187\n00:08:57.400 --> 00:08:58.960\nBut in this case, you can.\n\n188\n00:08:58.960 --> 00:09:01.350\nYou can click it, and\nwhen I do see how it turned black?\n\n189\n00:09:01.350 --> 00:09:01.850\nAll right?\n\n190\n00:09:01.850 --> 00:09:03.690\nSo you can chose that if you want.\n\n191\n00:09:03.690 --> 00:09:06.260\nIt's just a weird, like,\nscreen effect that they do.\n\n192\n00:09:06.260 --> 00:09:07.950\nI don't know why they do that.\n\n193\n00:09:07.950 --> 00:09:11.010\nBut as you check these roles,\nyou'll notice things change.\n\n194\n00:09:11.010 --> 00:09:14.820\nLike when I click Client Access role,\nsee how Edge Transport disappeared?\n\n195\n00:09:14.820 --> 00:09:16.690\nI cannot check Edge Transport.\n\n196\n00:09:16.690 --> 00:09:18.770\nEdge Transport has to be all by itself.\n\n197\n00:09:18.770 --> 00:09:22.050\nIf I check it, see how Mailbox and\nClient Access role disappeared.\n\n198\n00:09:22.050 --> 00:09:25.340\nSo it's making sure I don't make\na mistake here on my install.\n\n199\n00:09:25.340 --> 00:09:27.220\nI need to figure out what\nI want this server to be.\n\n200\n00:09:27.220 --> 00:09:29.550\nMaybe I want it to mailbox and\nclient access.\n\n201\n00:09:29.550 --> 00:09:31.200\nI'm just gonna do a single\nserver deployment.\n\n202\n00:09:31.200 --> 00:09:32.040\nYou can do that.\n\n203\n00:09:32.040 --> 00:09:32.930\nRight.\n\n204\n00:09:32.930 --> 00:09:36.190\nBut in my case,\nI want to have a mailbox server and\n\n205\n00:09:36.190 --> 00:09:37.710\na separate client access server.\n\n206\n00:09:37.710 --> 00:09:38.930\nSo I'm just gonna check the mailbox role.\n\n207\n00:09:40.090 --> 00:09:42.520\nThen we'll see it's gonna\nautomatically install any roles and\n\n208\n00:09:42.520 --> 00:09:43.750\nfeatures that are missing.\n\n209\n00:09:43.750 --> 00:09:47.100\nThat big PowerShell command that I ran,\nif I missed anything,\n\n210\n00:09:47.100 --> 00:09:48.810\nit will fix it for me, right.\n\n211\n00:09:48.810 --> 00:09:51.540\nBut if I missed anything,\na re-boot is probably gonna be required.\n\n212\n00:09:53.822 --> 00:09:55.770\nAll right, so we'll hit next,\nnow it's gonna offer me the install.\n\n213\n00:09:55.770 --> 00:09:59.030\nIt's telling me it requires six gigs\nof space, almost seven gigs of space.\n\n214\n00:09:59.030 --> 00:10:00.880\nSo I need to have some hard drive space.\n\n215\n00:10:00.880 --> 00:10:03.910\nThat's not including my mailbox databases.\n\n216\n00:10:03.910 --> 00:10:07.330\nSo I need to understand how much mail I'm\ngoing to have, to determine how much hard\n\n217\n00:10:07.330 --> 00:10:10.870\ndrive space I truly need, but\njust for the install I need 6.6 gigs.\n\n218\n00:10:10.870 --> 00:10:13.745\nI'm going to leave it\nat the default of C:,\n\n219\n00:10:13.745 --> 00:10:16.740\nwe'll probably move our\nmailbox databases later on.\n\n220\n00:10:16.740 --> 00:10:18.610\nWe'll see that in the mailbox episodes,\nbut for\n\n221\n00:10:18.610 --> 00:10:19.760\nnow we'll just go with the defaults.\n\n222\n00:10:22.100 --> 00:10:24.200\nThen, my Exchange Organization.\n\n223\n00:10:24.200 --> 00:10:26.840\nNow notice my Exchange Organization\nis already filled in, and\n\n224\n00:10:26.840 --> 00:10:30.710\nthat's because when I prepared my AD,\nI gave it a name.\n\n225\n00:10:30.710 --> 00:10:33.700\nBut if this is my very first\nExchange server, I do actually have\n\n226\n00:10:33.700 --> 00:10:37.770\none last chance where I can go in and\nmodify that if I wanted to change it.\n\n227\n00:10:37.770 --> 00:10:40.220\nOnce this is done though, it's set in\nstone, and I can't change it again.\n\n228\n00:10:40.220 --> 00:10:43.160\nOnce your first Exchange Server\nis up that's it, it's locked in.\n\n229\n00:10:43.160 --> 00:10:45.050\nSo make sure you get that\nset the way that you want.\n\n230\n00:10:46.700 --> 00:10:51.080\nWe also see apply Active Directory\nsplit permission security model.\n\n231\n00:10:51.080 --> 00:10:52.950\nNow this is an interesting one.\n\n232\n00:10:52.950 --> 00:10:57.860\nBy default, administrators have access\nto certain things inside of Exchange,\n\n233\n00:10:57.860 --> 00:10:59.950\nthey can have access into\nother people's mailbox.\n\n234\n00:10:59.950 --> 00:11:03.890\nWe can split that to make sure that\nwe have separate responsibilities for\n\n235\n00:11:03.890 --> 00:11:07.160\nmanagement exchange versus\nmanagement of Active Directory.\n\n236\n00:11:07.160 --> 00:11:10.320\nSo you have Exchange admins that can't\nnecessarily do things in the AD,\n\n237\n00:11:10.320 --> 00:11:14.540\nand you have Active Directory admins that\ncan't necessarily do things in Exchange.\n\n238\n00:11:14.540 --> 00:11:17.230\nYou don't necessarily want your domain\nadmins to be able to open everybody's\n\n239\n00:11:17.230 --> 00:11:18.120\nmailbox.\n\n240\n00:11:18.120 --> 00:11:19.960\nSo you can turn that on if\nyou wanna split that off.\n\n241\n00:11:19.960 --> 00:11:23.940\nIf you've got a small IT department,\nand everybody works in Exchange,\n\n242\n00:11:23.940 --> 00:11:28.190\nthen leave it alone, go with the defaults,\ndomain admins or Exchange admin.\n\n243\n00:11:28.190 --> 00:11:31.540\nBut if you're in a big company,\nwere you have dedicated Exchange admins,\n\n244\n00:11:31.540 --> 00:11:34.120\ndedicated AD admins,\nyou'll wanna split that.\n\n245\n00:11:34.120 --> 00:11:37.150\nAnd so you can turn that on, and\nthat'll split those permissions for you.\n\n246\n00:11:37.150 --> 00:11:39.811\nYou can also change it after the fact,\nit's not that hard.\n\n247\n00:11:43.039 --> 00:11:45.640\nThen it's gonna ask about\nmalware protection.\n\n248\n00:11:45.640 --> 00:11:48.850\nBy default Exchange does do malware\nprotection, it's looking for\n\n249\n00:11:48.850 --> 00:11:50.540\nviruses inside of your email.\n\n250\n00:11:50.540 --> 00:11:53.760\nBut you might have third-party\nsoftware that already does that.\n\n251\n00:11:53.760 --> 00:11:57.870\nDoing it twice is gonna increase your\nCPU utilization, and it's gonna make it\n\n252\n00:11:57.870 --> 00:12:00.710\nwhere you have to look two different\nplaces to find your quarantine.\n\n253\n00:12:00.710 --> 00:12:02.380\nSo if you have some other system,\n\n254\n00:12:02.380 --> 00:12:05.640\nyou might wanna choose Yes to\nDisable malware scanning, all right?\n\n255\n00:12:05.640 --> 00:12:07.170\nBut if you don't,\nif you don't have anything else,\n\n256\n00:12:07.170 --> 00:12:09.200\nyou might as well use what\nExchange comes with and choose No.\n\n257\n00:12:12.260 --> 00:12:13.560\nThen the readiness checks.\n\n258\n00:12:13.560 --> 00:12:15.650\nThis is where it's checking\nthe prerequisites.\n\n259\n00:12:15.650 --> 00:12:18.190\nDo I have dot net framework 452 installed?\n\n260\n00:12:18.190 --> 00:12:20.560\nDo I have unified\ncommunications management?\n\n261\n00:12:20.560 --> 00:12:21.560\nDo I have those things?\n\n262\n00:12:21.560 --> 00:12:22.070\nAll right.\n\n263\n00:12:22.070 --> 00:12:25.180\nNow I purposely didn't install\nthe unified communications one, so\n\n264\n00:12:25.180 --> 00:12:26.380\nthat we'll see the error here.\n\n265\n00:12:26.380 --> 00:12:27.145\nOr at least I think I did.\n\n266\n00:12:27.145 --> 00:12:29.640\n>> [LAUGH]\n>> So we'll probably see that one missing.\n\n267\n00:12:29.640 --> 00:12:31.660\nAnd it tells you how to fix it.\n\n268\n00:12:31.660 --> 00:12:32.820\nIf it's something you need to download,\n\n269\n00:12:32.820 --> 00:12:34.460\nthat will give you a link\nto Microsoft to go and\n\n270\n00:12:34.460 --> 00:12:37.730\ndownload it, if it's a roller feature,\nit will try and resolve that for us.\n\n271\n00:12:37.730 --> 00:12:41.150\nSo it's just gonna check and\nlook for anything that's missing.\n\n272\n00:12:41.150 --> 00:12:45.510\nIf you're missing a lot of stuff, this\nReadiness Check can actually take a while.\n\n273\n00:12:45.510 --> 00:12:47.320\nI've seen it take ten minutes before,\n\n274\n00:12:47.320 --> 00:12:50.340\nas it kind of dug through everything\nto try and find what's missing.\n\n275\n00:12:50.340 --> 00:12:54.830\nIn my case, it's telling me I need to be a\nmember of the organization management role\n\n276\n00:12:54.830 --> 00:12:56.910\ngroup, if I'm gonna be working with this.\n\n277\n00:12:56.910 --> 00:13:00.860\nOr enterprise admins, well,\nI am in the Enterprise Admins group, so\n\n278\n00:13:00.860 --> 00:13:02.120\nthat's just a warning there.\n\n279\n00:13:02.120 --> 00:13:06.070\nIt says Error, but\nI'm actually fine as far as running this.\n\n280\n00:13:06.070 --> 00:13:07.550\nSome of the other things here,\nas we look down,\n\n281\n00:13:07.550 --> 00:13:09.530\nwe'll see that it's just warning\nme about my permissions.\n\n282\n00:13:09.530 --> 00:13:11.160\nSo I need to make sure I\nhave the right permissions.\n\n283\n00:13:11.160 --> 00:13:12.720\nAnd it's telling me\nwhat to do to fix that.\n\n284\n00:13:12.720 --> 00:13:17.600\nAnd then as I look down, this last one is\nthe only one I really need to correct.\n\n285\n00:13:17.600 --> 00:13:22.900\nThis computer requires the Microsoft\nunified communications managed API 4.0.\n\n286\n00:13:22.900 --> 00:13:23.440\nRight.\n\n287\n00:13:23.440 --> 00:13:28.940\nI've gotta have that API in place,\nbefore I can continue with the install.\n\n288\n00:13:28.940 --> 00:13:31.370\nSo I can just reach back here, and\n\n289\n00:13:31.370 --> 00:13:34.490\nI can install it,\nI've got it copied to my hard drive.\n\n290\n00:13:34.490 --> 00:13:37.860\nAnd so I'm gonna install that real quick,\nit's a pretty quick install,\n\n291\n00:13:37.860 --> 00:13:38.700\nit's not very big.\n\n292\n00:13:38.700 --> 00:13:42.450\nI think if you download the file it's,\nwhat is it, 240 megs.\n\n293\n00:13:42.450 --> 00:13:44.790\nBut the install doesn't have any options,\nyou just install it and\n\n294\n00:13:44.790 --> 00:13:46.920\nagree with the license and\nthat's about it.\n\n295\n00:13:46.920 --> 00:13:50.720\nSo there it goes, It's going to install\nand I'll meet that requirement.\n\n296\n00:13:50.720 --> 00:13:52.980\nIf you have questions on any of\nthe other ones that I posted,\n\n297\n00:13:52.980 --> 00:13:54.930\nyou can click on the link and\nMicrosoft can tell you all about it.\n\n298\n00:13:56.650 --> 00:14:00.250\nSo we'll give that a moment while\nthat churns through, and there we go.\n\n299\n00:14:00.250 --> 00:14:03.100\nOnce it's done, if it was a change\nthat didn't require a reboot,\n\n300\n00:14:03.100 --> 00:14:06.370\nI can just jump right back to\nmy wizard and I can hit retry.\n\n301\n00:14:06.370 --> 00:14:09.690\nAnd when you hit retry, it's gonna\nreevaluate, and see if we're fixed,\n\n302\n00:14:09.690 --> 00:14:12.070\nsee if we're fine and if it can move on.\n\n303\n00:14:12.070 --> 00:14:15.960\nSo we'll see what this one comes back\nwith, and it should come back happy.\n\n304\n00:14:15.960 --> 00:14:19.250\nNow, it did cite me not being\nin some of those groups.\n\n305\n00:14:19.250 --> 00:14:22.300\nNow I am in the Enterprise Admins group,\nand apparently it's not detecting that, so\n\n306\n00:14:22.300 --> 00:14:23.950\nI probably need to double-check that.\n\n307\n00:14:23.950 --> 00:14:26.110\nI need to make sure I'm\nlogged in as myself.\n\n308\n00:14:26.110 --> 00:14:27.800\nI am, I'm logged in as Don Pezet.\n\n309\n00:14:27.800 --> 00:14:29.830\nBut apparently it's not\nhappy with my permission.\n\n310\n00:14:29.830 --> 00:14:32.240\nSo I can jump over and double-check that.\n\n311\n00:14:32.240 --> 00:14:36.170\nI can reach out to a domain\ncontroller like this one,\n\n312\n00:14:36.170 --> 00:14:37.930\nwhich apparently just timed out on me.\n\n313\n00:14:37.930 --> 00:14:40.850\nAnd I can get into Active Directory Users\nand Computers, and\n\n314\n00:14:40.850 --> 00:14:43.690\nI can verify my permissions.\n\n315\n00:14:43.690 --> 00:14:46.570\nAll right, now once I'm in here,\n\n316\n00:14:46.570 --> 00:14:49.360\nI can find the Organization\nManagement Group, right there,\n\n317\n00:14:49.360 --> 00:14:52.910\nunder the active directory it's under the\nMicrosoft Exchange Security Groups, and\n\n318\n00:14:52.910 --> 00:14:54.780\nyou'll find Organization Management.\n\n319\n00:14:54.780 --> 00:14:59.120\nAnd I can add myself in there, and,\nwell, there I am, Don Pezet, all right?\n\n320\n00:14:59.120 --> 00:15:01.050\nSo that's odd.\n\n321\n00:15:01.050 --> 00:15:06.810\nWell, what I might be bumping into, is\nif you've changed your group membership,\n\n322\n00:15:06.810 --> 00:15:11.010\nbut you haven't logged out and logged back\nin, it might not be able to see that yet.\n\n323\n00:15:11.010 --> 00:15:12.710\nAnd that's probably\nwhat's going on with me.\n\n324\n00:15:12.710 --> 00:15:13.950\nSo I'm gonna go back here.\n\n325\n00:15:13.950 --> 00:15:15.880\nAnd it's not telling me to reboot or\nanything,\n\n326\n00:15:15.880 --> 00:15:17.800\nand I probably don't even need to reboot.\n\n327\n00:15:17.800 --> 00:15:21.190\nI should just be able to log out and log\nback in to refresh my group membership,\n\n328\n00:15:21.190 --> 00:15:22.220\nand that should take care of that.\n\n329\n00:15:22.220 --> 00:15:25.190\nSo I'll sign out, and\nthen I'll sign back in.\n\n330\n00:15:25.190 --> 00:15:30.040\nJust remember, any time you change\nGroup membership in Active Directory.\n\n331\n00:15:30.040 --> 00:15:32.850\nYou do need to log out and\nlog back in for them to take effect.\n\n332\n00:15:32.850 --> 00:15:34.550\nThat is more then likely my issue.\n\n333\n00:15:35.730 --> 00:15:38.270\nSo I'll do that, and\nI'll just relaunch the installer and\n\n334\n00:15:38.270 --> 00:15:39.310\nwe'll let it do it's check again.\n\n335\n00:15:40.405 --> 00:15:41.785\nSo, I'm just going to fire that back up.\n\n336\n00:15:42.985 --> 00:15:44.395\nI'm not going to connect to the Internet.\n\n337\n00:15:44.395 --> 00:15:45.945\nWe'll go a little faster this time.\n\n338\n00:15:45.945 --> 00:15:48.965\nThe cached file should already be there,\nso that should go quicker.\n\n339\n00:15:48.965 --> 00:15:50.225\nAnd then at this point we should pass.\n\n340\n00:15:50.225 --> 00:15:53.785\nWe've got our unified communications\ninstalled and we should be ready to rock.\n\n341\n00:15:53.785 --> 00:15:55.015\nAll right.\n\n342\n00:15:55.015 --> 00:15:57.825\nNow, I'm going to do\na mailbox server here.\n\n343\n00:15:57.825 --> 00:16:00.275\nI also want to do a client access server.\n\n344\n00:16:00.275 --> 00:16:02.470\nI can do the installs at the same time.\n\n345\n00:16:02.470 --> 00:16:05.220\nSo, I could jump over to another server,\nlike this one.\n\n346\n00:16:05.220 --> 00:16:09.700\nAnd if I want to get it set up, well,\nfirst off, I'm gonna log out and\n\n347\n00:16:09.700 --> 00:16:13.150\nlog back on just to be on\nthe safe side on this one.\n\n348\n00:16:13.150 --> 00:16:14.940\nBut I can start this\ninstall at the same time.\n\n349\n00:16:14.940 --> 00:16:17.210\nYou can be setting up more\nthan one Exchange Server.\n\n350\n00:16:17.210 --> 00:16:20.280\nYou don't have to wait for one to\nfinish before you can start the other.\n\n351\n00:16:20.280 --> 00:16:23.230\nSo I'm gonna start up\nthe install on this guy too, and\n\n352\n00:16:23.230 --> 00:16:24.990\nwe'll get them both up and running.\n\n353\n00:16:24.990 --> 00:16:27.860\nThe only difference is on this one I'm\ngonna choose Client Access Server instead\n\n354\n00:16:27.860 --> 00:16:30.900\nof Mailbox so\nthat I can get that set up on this one.\n\n355\n00:16:30.900 --> 00:16:33.650\nAnd I did already install\nthe Unified Communication Manager here so\n\n356\n00:16:33.650 --> 00:16:34.820\nI shouldn't have to worry about that.\n\n357\n00:16:34.820 --> 00:16:38.940\nAll right, so my Mailbox Server is just\ngonna churn along there and do its\n\n358\n00:16:38.940 --> 00:16:41.980\nreadiness checks and, sure enough, I'm\nseeing a little bit of a different screen.\n\n359\n00:16:41.980 --> 00:16:44.130\nNow, instead of a list of\nerrors that I need to correct,\n\n360\n00:16:44.130 --> 00:16:47.550\nI see Prerequisite analysis 100% install.\n\n361\n00:16:47.550 --> 00:16:49.170\nI'm good, I've cleared all my errors.\n\n362\n00:16:49.170 --> 00:16:50.640\nI can start the install.\n\n363\n00:16:50.640 --> 00:16:53.730\nNow, the installation takes a long time.\n\n364\n00:16:53.730 --> 00:16:56.600\nIt can take like an hour to run,\nso I'm gonna let that one churn.\n\n365\n00:16:56.600 --> 00:16:59.120\nI'm gonna move back over\nto my client access server.\n\n366\n00:16:59.120 --> 00:17:01.140\nThis is the one where I want to\ninstall a client access role, and\n\n367\n00:17:01.140 --> 00:17:03.030\nI'm gonna start it up also.\n\n368\n00:17:03.030 --> 00:17:05.720\nSo I'll go ahead and\nmove forward with that same installation.\n\n369\n00:17:05.720 --> 00:17:07.770\nIt's gonna do its pre-requisite check.\n\n370\n00:17:07.770 --> 00:17:11.300\nAnd then once it's done, it will be\nall clear and I can do my install.\n\n371\n00:17:11.300 --> 00:17:13.452\nSo I should see that just flip to 100% and\nbe done.\n\n372\n00:17:13.452 --> 00:17:18.310\nAll right, now I imagine, much like\nmyself, you guys probably don't wanna sit\n\n373\n00:17:18.310 --> 00:17:21.580\nhere and watch this little blue bar\nslowly creep across the screen.\n\n374\n00:17:21.580 --> 00:17:26.110\nSo, I'm gonna do a TV timeout and jump\nahead into the future after the install is\n\n375\n00:17:26.110 --> 00:17:29.490\ndone, and then we'll verify that Exchange\nis up and running and functional.\n\n376\n00:17:29.490 --> 00:17:31.010\nSo, let's take a break.\n\n377\n00:17:31.010 --> 00:17:31.990\nWe'll be right back after this.\n\n378\n00:17:31.990 --> 00:17:36.110\nAll right, so after about an hour\nof churning along on that install,\n\n379\n00:17:36.110 --> 00:17:37.030\nthe install is done.\n\n380\n00:17:37.030 --> 00:17:40.010\nThe system reboots, and\nnow we're up and running.\n\n381\n00:17:40.010 --> 00:17:42.670\nSo the last thing we need to do\nis to verify that Exchange is\n\n382\n00:17:42.670 --> 00:17:43.910\ninstalled and happy.\n\n383\n00:17:43.910 --> 00:17:47.090\nAnd there's really just two simple ways\nthat we can test this before we dive\n\n384\n00:17:47.090 --> 00:17:48.930\ninto any crazy configuration.\n\n385\n00:17:48.930 --> 00:17:52.180\nThe first thing,\nis to check the services on your computer.\n\n386\n00:17:52.180 --> 00:17:55.340\nWhen Exchange installed,\nwhether you pick client access or mailbox,\n\n387\n00:17:55.340 --> 00:17:57.900\nit installs different services,\nthey should be up and running.\n\n388\n00:17:57.900 --> 00:18:02.230\nSo I'm gonna take my server here, and I'll\njust jump under my Server Manager, and\n\n389\n00:18:02.230 --> 00:18:05.080\nI'll go to Tools and Services.\n\n390\n00:18:05.080 --> 00:18:09.260\nAnd in my Services screen, I should start\nto see some Microsoft Exchange services.\n\n391\n00:18:09.260 --> 00:18:12.820\nAnd so if I kinda drill down a bit here,\nwe'll find them in the list.\n\n392\n00:18:12.820 --> 00:18:18.040\nSo here I see the Active Directory\ntopology, diagnostics, IMAP 4 and POP 3.\n\n393\n00:18:18.040 --> 00:18:20.060\nThat's because this is\na client access server.\n\n394\n00:18:20.060 --> 00:18:21.880\nYour mailbox server won't have those.\n\n395\n00:18:21.880 --> 00:18:25.900\nAnd so I see each of those, there's that\nunified messaging connector and so on.\n\n396\n00:18:25.900 --> 00:18:28.690\nI start to see the different\nthings that were installed.\n\n397\n00:18:28.690 --> 00:18:31.750\nThere's front end transport,\nI mentioned those in another episode.\n\n398\n00:18:31.750 --> 00:18:35.680\nSo I see them, and I see that some of\nthem are running, some of them aren't.\n\n399\n00:18:35.680 --> 00:18:38.310\nI notice that IMAP 4 and\nPOP 3 are disabled by default.\n\n400\n00:18:38.310 --> 00:18:41.990\nThey're set to manually start, so\nI don't expect to see those running.\n\n401\n00:18:41.990 --> 00:18:43.670\nBut all these ones that say Automatic,\n\n402\n00:18:43.670 --> 00:18:45.840\nthose are the ones that we\nwanna see up and running.\n\n403\n00:18:45.840 --> 00:18:48.800\nAnd that let's us know that this server,\nat a minimum, at least,\n\n404\n00:18:48.800 --> 00:18:49.900\nthinks it's an Exchange Server.\n\n405\n00:18:51.350 --> 00:18:52.990\nHow do we know it's actually working?\n\n406\n00:18:52.990 --> 00:18:55.320\nWell, we can jump into\nour management console.\n\n407\n00:18:55.320 --> 00:18:58.240\nNow in previous versions of exchange\nwe had the actual exchange management\n\n408\n00:18:58.240 --> 00:19:01.750\nconsole, a software program that we ran,\nand it was nightmarishly slow, and\n\n409\n00:19:01.750 --> 00:19:02.770\nI always hated it.\n\n410\n00:19:02.770 --> 00:19:06.340\nWell, now we have our web interface for\nmanagement.\n\n411\n00:19:06.340 --> 00:19:08.590\nSo we can jump over to any\nclient in our network.\n\n412\n00:19:08.590 --> 00:19:12.280\nI'll take this Windows 7 machine, and\nwe can browse to our management console.\n\n413\n00:19:12.280 --> 00:19:15.900\nSo I'm gonna fire this up, I'm gonna\nignore my Windows updates there, and\n\n414\n00:19:15.900 --> 00:19:18.230\nI will browse to one of my servers.\n\n415\n00:19:18.230 --> 00:19:20.440\nNow, I need to browse to\na client access server.\n\n416\n00:19:20.440 --> 00:19:23.650\nThe management panel's actually not\ninstalled on a mailbox server, so\n\n417\n00:19:23.650 --> 00:19:26.940\nI can't just browse to that.\n\n418\n00:19:26.940 --> 00:19:31.110\nSo I'll browse to https:// and\nthen I'll pick a client access server.\n\n419\n00:19:31.110 --> 00:19:32.900\nAnd you know, now that I think about it,\n\n420\n00:19:32.900 --> 00:19:35.650\nI can't remember which one\nwas my client access server.\n\n421\n00:19:35.650 --> 00:19:37.520\nLet's see, it's server number two.\n\n422\n00:19:37.520 --> 00:19:43.440\nSo I'm gonna browse to server number two,\n/ecp.\n\n423\n00:19:43.440 --> 00:19:47.970\nAll right, now, in previous versions of\nExchange like Exchange 2010, ECP stood for\n\n424\n00:19:47.970 --> 00:19:49.690\nthe Exchange Control Panel.\n\n425\n00:19:49.690 --> 00:19:53.340\nAnd it used to be just for regular\nusers to be able to get in there and\n\n426\n00:19:53.340 --> 00:19:56.300\nmanage themselves, and then for\nadministrators you had some basic queue\n\n427\n00:19:56.300 --> 00:19:58.720\nmanagement you could do in there,\nand that was it.\n\n428\n00:19:58.720 --> 00:20:02.970\nIn Exchange 2013, the ECP is now\na full featured management suite for\n\n429\n00:20:02.970 --> 00:20:04.500\nthe entire Exchange environment.\n\n430\n00:20:04.500 --> 00:20:07.140\nIt replaces the old Exchange\nmanagement console.\n\n431\n00:20:07.140 --> 00:20:08.500\nSo we don't need that software anymore,\n\n432\n00:20:08.500 --> 00:20:11.100\nnow we just have a webpage\nthat we browse to.\n\n433\n00:20:11.100 --> 00:20:14.680\nNow, by default when you install it's\ngonna do a self signed certificate, so\n\n434\n00:20:14.680 --> 00:20:16.960\nexpect to get a certificate\nwarning like this.\n\n435\n00:20:16.960 --> 00:20:18.460\nWe can swap that certificate out later.\n\n436\n00:20:18.460 --> 00:20:20.260\nWe'll see that in another episode.\n\n437\n00:20:20.260 --> 00:20:22.610\nBut for right now I'm gonna\ncontinue onto the website,\n\n438\n00:20:22.610 --> 00:20:26.210\neven though it's not recommended, and it's\ngonna browse to it and give me the site.\n\n439\n00:20:26.210 --> 00:20:29.430\nNow, if I'm browsing to a mailbox server\n\n440\n00:20:29.430 --> 00:20:34.070\nI'll probably get some kind of 500\nerror or 404, saying page not found,\n\n441\n00:20:34.070 --> 00:20:37.510\nand that's because the mailbox server\ndoesn't have the exchange control panel.\n\n442\n00:20:37.510 --> 00:20:40.850\nBut when I go to a client access\nserver I should see this.\n\n443\n00:20:40.850 --> 00:20:45.450\nI'm in the Exchange Admin Center, and\nI can log in with my admin account.\n\n444\n00:20:45.450 --> 00:20:47.700\nSo I'm gonna log in with that.\n\n445\n00:20:47.700 --> 00:20:50.500\nAnd in the example here,\nit gives you domain/username.\n\n446\n00:20:50.500 --> 00:20:52.160\nThat's the old net bios name.\n\n447\n00:20:52.160 --> 00:20:56.220\nYou can user the newer, fully qualified\ndomain name format if you want it,\n\n448\n00:20:56.220 --> 00:20:57.380\nit's up to you.\n\n449\n00:20:57.380 --> 00:20:58.780\nAnd I can get logged in.\n\n450\n00:20:58.780 --> 00:21:03.050\nNow, just the fact that I even saw this\nscreen is letting me know that my client\n\n451\n00:21:03.050 --> 00:21:05.180\naccess server's web interface is working.\n\n452\n00:21:05.180 --> 00:21:06.930\nSo I've already verified part of it.\n\n453\n00:21:06.930 --> 00:21:09.930\nBut what I really want to do is get in and\nsee my organization, and\n\n454\n00:21:09.930 --> 00:21:12.430\nsee the servers inside\nof that organization.\n\n455\n00:21:12.430 --> 00:21:16.230\nSo, when I get logged in here, it's going\nto start to show here's some recipients,\n\n456\n00:21:16.230 --> 00:21:18.000\nI've got one mailbox for me.\n\n457\n00:21:18.000 --> 00:21:19.780\nI get a mailbox, it's exciting.\n\n458\n00:21:19.780 --> 00:21:22.470\nAnd I can start to work with my groups and\nresources, and so on.\n\n459\n00:21:22.470 --> 00:21:23.780\nSo I start to see that.\n\n460\n00:21:23.780 --> 00:21:24.730\nBut over here on the left,\n\n461\n00:21:24.730 --> 00:21:28.110\nwhat I really want to see is\nright down here under servers.\n\n462\n00:21:28.110 --> 00:21:31.860\nI can jump down to servers, and I'll see\nall the servers in my organization and\n\n463\n00:21:31.860 --> 00:21:34.940\nI expect to see Lab Exchange server 01 and\n02.\n\n464\n00:21:34.940 --> 00:21:38.780\nThere's my mailbox and\nclient access servers that I brought up.\n\n465\n00:21:38.780 --> 00:21:41.640\nIf I was running both roles on\nthe same server it would say mailbox,\n\n466\n00:21:41.640 --> 00:21:43.560\nclient access server, you have both.\n\n467\n00:21:43.560 --> 00:21:46.960\nBut in this case I see my separate server,\nso they're up and running.\n\n468\n00:21:46.960 --> 00:21:51.180\nAnd from here I can go and verify other\nthings like the databases, right?\n\n469\n00:21:51.180 --> 00:21:53.360\nSo here's my Mailbox Database\non Exchange Server 01.\n\n470\n00:21:53.360 --> 00:21:56.910\nWe could also look at other\nthings like Virtual Directories,\n\n471\n00:21:56.910 --> 00:21:59.420\nwhich will be things\nlike the Outlook Web App.\n\n472\n00:21:59.420 --> 00:22:02.390\nSo I can find those in here, or\nthe Exchange control panel, and\n\n473\n00:22:02.390 --> 00:22:06.570\nsee how the Exchange control panel is\nrunning on server 02, not server 01.\n\n474\n00:22:06.570 --> 00:22:09.600\nRight, the mailbox database is\nnot included in any of those.\n\n475\n00:22:09.600 --> 00:22:12.930\nSo right here I can verify that,\nlooking at the active directory,\n\n476\n00:22:12.930 --> 00:22:13.794\nlooking at the servers,\n\n477\n00:22:13.794 --> 00:22:17.650\nI'm seeing all the information,\nmy Exchange organization is up.\n\n478\n00:22:17.650 --> 00:22:20.050\nNow it's up to me to go and\nconfigure it and\n\n479\n00:22:20.050 --> 00:22:21.870\ncustomize it to meet\nthe needs of my organization.\n\n480\n00:22:21.870 --> 00:22:23.980\nAnd that's where things start\nto get different, right?\n\n481\n00:22:23.980 --> 00:22:27.510\nThe installed steps that I just did,\neverybody's gonna do those.\n\n482\n00:22:27.510 --> 00:22:30.360\nBut what you configure from here on out,\nis gonna be based on\n\n483\n00:22:30.360 --> 00:22:33.260\na series of decisions built around\nyour company, and what your needs are.\n\n484\n00:22:33.260 --> 00:22:35.100\nSo things do start to get\na little bit different.\n\n485\n00:22:35.100 --> 00:22:39.550\nBut from right here we can start to\nsee that basic view of our system,\n\n486\n00:22:39.550 --> 00:22:43.817\nwhat we're gonna be working with, how we\nmake sure that we are up and running and\n\n487\n00:22:43.817 --> 00:22:47.530\nhappy, and that we've now got Exchange\ninstalled and we're ready to work with it.\n\n488\n00:22:47.530 --> 00:22:49.800\nNow if you've worked with Office 365 or\n\n489\n00:22:49.800 --> 00:22:52.950\nAzure Hosted Exchange,\nthis might look familiar.\n\n490\n00:22:52.950 --> 00:22:56.340\nBecause this is the same management\ntool that you use in Azure.\n\n491\n00:22:56.340 --> 00:22:57.680\nSo if you learn how to\ndo this in Exchange,\n\n492\n00:22:57.680 --> 00:22:59.510\nyou know how to do it in Azure also.\n\n493\n00:22:59.510 --> 00:23:01.990\nOr Office 365.\nOr if you learned it in Office 365,\n\n494\n00:23:01.990 --> 00:23:03.170\nyou know how to do it here.\n\n495\n00:23:03.170 --> 00:23:06.990\nMicrosoft made it the same to make it easy\nto transition from one to the other, or\n\n496\n00:23:06.990 --> 00:23:08.410\nrun both in tandem.\n\n497\n00:23:08.410 --> 00:23:09.710\nYou can have them connected.\n\n498\n00:23:09.710 --> 00:23:12.180\nIt's really neat to have those\nsolutions that are out there.\n\n499\n00:23:12.180 --> 00:23:15.530\nBut at this point,\nExchange is installed, it's up,\n\n500\n00:23:15.530 --> 00:23:18.220\nit's running, now we got an email server.\n\n501\n00:23:18.220 --> 00:23:19.690\nDone that easy.\n\n502\n00:23:19.690 --> 00:23:21.950\nNow, I do wanna remind you that\nit happened pretty fast here, but\n\n503\n00:23:21.950 --> 00:23:25.840\nin real-life land, I'm not joking when I\nsay that install can take about an hour.\n\n504\n00:23:25.840 --> 00:23:28.730\nIt takes a long time to get all\nthe different things set up,\n\n505\n00:23:28.730 --> 00:23:30.840\nto provision the database space,\nand all that.\n\n506\n00:23:30.840 --> 00:23:32.340\nIt takes a while.\n\n507\n00:23:32.340 --> 00:23:34.370\nThe better your hardware,\nthe faster it'll happen.\n\n508\n00:23:34.370 --> 00:23:40.270\nBut I'm on a quad-core Intel\ni7 with a SSD storage here,\n\n509\n00:23:40.270 --> 00:23:41.810\nand it takes my system about an hour.\n\n510\n00:23:41.810 --> 00:23:43.980\nSo, it does take a long\ntime to do the install.\n\n511\n00:23:43.980 --> 00:23:46.622\nJust be prepared for that, and\ndon't be surprised when that happens.\n\n512\n00:23:46.622 --> 00:23:52.030\nAll right, well, in this episode we got\na chance to see installing Exchange,\n\n513\n00:23:52.030 --> 00:23:54.390\nwe did a client access server and\na mailbox server.\n\n514\n00:23:54.390 --> 00:23:55.860\nWe didn't do edge transport,\n\n515\n00:23:55.860 --> 00:23:58.540\nI'm gonna cover that in\na special episode down the road.\n\n516\n00:23:58.540 --> 00:24:01.670\nBut we gotta chance to see how to get\nour organization up and running, and\n\n517\n00:24:01.670 --> 00:24:05.090\nget a fully featured exchange\norganization in place.\n\n518\n00:24:05.090 --> 00:24:06.160\nDefinitely stay tuned, though.\n\n519\n00:24:06.160 --> 00:24:08.720\nOn all of our other episodes,\nwe're gonna see how we can tweak this and\n\n520\n00:24:08.720 --> 00:24:10.800\ncustomize it and\nreally get it to work for us.\n\n521\n00:24:10.800 --> 00:24:13.090\nBut as far as getting a basic\ninstall done, that's it.\n\n522\n00:24:13.090 --> 00:24:16.360\nAll right, well, this is a pretty\ngood spot for us to wrap this one up.\n\n523\n00:24:16.360 --> 00:24:17.780\nI hope you guys enjoyed it.\n\n524\n00:24:17.780 --> 00:24:21.387\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n525\n00:24:21.387 --> 00:24:27.220\n[MUSIC]\n\n",
          "vimeoId": "135908049"
        }
      ],
      "title": "Installing Exchange 2013"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don introduces the viewers to the Exchange 2013 mailbox database. He discusses the files that makeup a mailbox database and walks us through how to create our own databases.",
          "length": "1782",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases-081115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases-081115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases-081115-1-sm.jpg",
          "title": "Mailbox Databases",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.532\n[MUSIC]\n\n2\n00:00:10.532 --> 00:00:13.215\nAll right, good morning,\ngood afternoon, and good evening,\n\n3\n00:00:13.215 --> 00:00:15.111\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.111 --> 00:00:20.410\nI'm your host, Don Pezet, back again\nwith another episode of Exchange 2013.\n\n5\n00:00:20.410 --> 00:00:23.390\nToday's episode is pretty important,\nbecause we're going to be taking a look\n\n6\n00:00:23.390 --> 00:00:26.680\nat the mailbox database role,\nor the mailbox role.\n\n7\n00:00:26.680 --> 00:00:31.090\nWhen we set up Exchange, one of the key\nfunctions of it is to be an email server,\n\n8\n00:00:31.090 --> 00:00:33.550\nand we've got to store\nthat email somewhere.\n\n9\n00:00:33.550 --> 00:00:37.340\nSo one of the critical roles we have in\nExchange 2013, is called the mail box\n\n10\n00:00:37.340 --> 00:00:41.130\nserver role, and that's the server\nthat holds all your email.\n\n11\n00:00:41.130 --> 00:00:42.000\nSo let's take a look at that.\n\n12\n00:00:42.000 --> 00:00:44.800\nWe're gonna see where the email get\nstored, how it kind of moves around, and\n\n13\n00:00:44.800 --> 00:00:48.355\nsome of the considerations we have\nto have with that information.\n\n14\n00:00:48.355 --> 00:00:49.985\nNow I got on my machine right here,\n\n15\n00:00:49.985 --> 00:00:52.895\njust a base install exchange,\nI haven't tweaked it much.\n\n16\n00:00:52.895 --> 00:00:53.995\nI have two servers.\n\n17\n00:00:53.995 --> 00:00:58.805\nI've got a mail box server, and\nI've got a Client Access Server,\n\n18\n00:00:58.805 --> 00:01:00.295\nso two separate systems.\n\n19\n00:01:00.295 --> 00:01:02.235\nYou could run them together if you wanted.\n\n20\n00:01:02.235 --> 00:01:05.600\nI've chosen to run them separate,\nand we normally do that for scale.\n\n21\n00:01:05.600 --> 00:01:08.640\nBut when you bring up your\nfirst mailbox server,\n\n22\n00:01:08.640 --> 00:01:11.900\none of the things it does is\nit creates a mailbox database.\n\n23\n00:01:11.900 --> 00:01:13.630\nAnd if you're a small organization,\n\n24\n00:01:13.630 --> 00:01:16.350\nthen default mailbox database\nmight be fine for you.\n\n25\n00:01:16.350 --> 00:01:19.390\nBut most people are gonna find\nthat they do have to tweak it and\n\n26\n00:01:19.390 --> 00:01:20.980\nchange it a little bit.\n\n27\n00:01:20.980 --> 00:01:23.420\nNow if I browse here,\nI'm in my Exchange admin center, and\n\n28\n00:01:23.420 --> 00:01:26.980\nI'm just gonna go down to Servers, and\nI'll see my servers that are right here.\n\n29\n00:01:26.980 --> 00:01:30.730\nAnd you can see that Lab Exchange Server\n1 is my mailbox server, and\n\n30\n00:01:30.730 --> 00:01:33.130\nthen I've got a client access one, also.\n\n31\n00:01:33.130 --> 00:01:35.850\nWell, if I go over here to Databases,\n\n32\n00:01:35.850 --> 00:01:38.840\nI'm gonna see a list of\nthe mailbox databases that I have.\n\n33\n00:01:38.840 --> 00:01:40.040\nAnd I've got this one right here.\n\n34\n00:01:40.040 --> 00:01:41.975\nIt's got a nice, easy to remember name.\n\n35\n00:01:41.975 --> 00:01:44.120\n[LAUGH] If you go with the default.\n\n36\n00:01:44.120 --> 00:01:45.800\nYou're going to have a name like this.\n\n37\n00:01:45.800 --> 00:01:47.370\nMailbox Database 2013076320, right?\n\n38\n00:01:47.370 --> 00:01:50.330\nIt probably won't match that, right?\n\n39\n00:01:50.330 --> 00:01:53.060\nBut it'll be something similar.\n\n40\n00:01:53.060 --> 00:01:56.250\nThis is the default mailbox database.\n\n41\n00:01:56.250 --> 00:01:58.680\nIf you create your own mailbox database,\nyou can call it whatever you want, but\n\n42\n00:01:58.680 --> 00:01:59.900\nthe default gets this name.\n\n43\n00:01:59.900 --> 00:02:02.140\nNow, why the weird name?\n\n44\n00:02:02.140 --> 00:02:06.080\nWell, what we'll see in some later\nepisodes is that if you wanna do high\n\n45\n00:02:06.080 --> 00:02:09.930\navailability, if you wanna maintain\nmultiple copies of that database for\n\n46\n00:02:09.930 --> 00:02:11.350\nredundancy sake,\n\n47\n00:02:11.350 --> 00:02:15.500\nyour mailbox database has to have\na unique name across your entire forest.\n\n48\n00:02:15.500 --> 00:02:18.100\nAnd so that's why it sticks all\nthese numbers at the end of it.\n\n49\n00:02:18.100 --> 00:02:19.680\nThat's why it's not just mailbox database,\n\n50\n00:02:19.680 --> 00:02:25.400\nit's Mailbox database 2013076320\nto try and create that uniqueness.\n\n51\n00:02:25.400 --> 00:02:26.240\nAll right.\nSo\n\n52\n00:02:26.240 --> 00:02:28.280\nexpect to see a kind of\na weird name like that.\n\n53\n00:02:28.280 --> 00:02:30.220\nBut that's why it has that name.\n\n54\n00:02:30.220 --> 00:02:32.640\nNow this just looks like\na single entry right here.\n\n55\n00:02:32.640 --> 00:02:34.530\nI see I've got a mailbox database.\n\n56\n00:02:34.530 --> 00:02:37.290\nAnd if I click on it,\nI can see some basic information.\n\n57\n00:02:37.290 --> 00:02:39.620\nI can see the servers\nthat it's running on.\n\n58\n00:02:39.620 --> 00:02:42.270\nAnd notice that I can\nhave more than one copy.\n\n59\n00:02:42.270 --> 00:02:46.890\nBy default your mailbox data base runs\non one server and your users, you'll\n\n60\n00:02:46.890 --> 00:02:50.240\ncreate mailboxes for them, and they'll\nbe in this mailbox data base right here.\n\n61\n00:02:50.240 --> 00:02:51.920\nIt's the default.\n\n62\n00:02:51.920 --> 00:02:55.150\nWell, what happens if this mail\nbox data base goes offline?\n\n63\n00:02:55.150 --> 00:02:56.550\nWe cant get to our email, right?\n\n64\n00:02:56.550 --> 00:03:00.620\nWe're not necessarily losing email,\nbecause remember email comes in\n\n65\n00:03:00.620 --> 00:03:05.360\nthrough your client access servers, so\nthe email comes in there and gets stuck.\n\n66\n00:03:05.360 --> 00:03:08.940\nIt kind of gets stuck while it waits\nto make it to your mailbox server.\n\n67\n00:03:08.940 --> 00:03:12.040\nIf your hub transport role is at least\nrunning, it will at least get to that.\n\n68\n00:03:12.040 --> 00:03:13.730\nI shouldn't say role,\nit isn't a role anymore.\n\n69\n00:03:13.730 --> 00:03:15.210\nYour hub transport service.\n\n70\n00:03:15.210 --> 00:03:17.680\nIf that's running,\nit'll actually get queued there and\n\n71\n00:03:17.680 --> 00:03:20.730\nwait even if your\nMailbox Database is offline.\n\n72\n00:03:20.730 --> 00:03:22.980\nBut if your entire\ninfrastructure is offline,\n\n73\n00:03:22.980 --> 00:03:25.160\nthen you do kinda start to\nlose email at that point.\n\n74\n00:03:25.160 --> 00:03:30.225\nBut here, I can see my Mailbox Database Is\nup, incoming email can flow into it.\n\n75\n00:03:30.225 --> 00:03:33.035\nMy users can check their email,\nand they can access it, right.\n\n76\n00:03:33.035 --> 00:03:36.965\nI know it's up and healthy because I\nsee right here, status mounted, right?\n\n77\n00:03:36.965 --> 00:03:39.875\nThat status of mounted, you're\nusually gonna see one of two things,\n\n78\n00:03:39.875 --> 00:03:41.195\nmounted or unmounted.\n\n79\n00:03:41.195 --> 00:03:45.110\nMounted means it's online,\nit's active and you can look inside it.\n\n80\n00:03:45.110 --> 00:03:49.440\nUnmounted means the files exist, but\nyou can't access them right now.\n\n81\n00:03:49.440 --> 00:03:51.350\nIt's kind of like the data\nbase is turned off.\n\n82\n00:03:51.350 --> 00:03:53.410\nWe might unmount the data\nbase to do maintenance on it,\n\n83\n00:03:53.410 --> 00:03:56.800\nand we'll talk about that a little\nbit later in the episode, but for\n\n84\n00:03:56.800 --> 00:03:59.950\nthe most part we expect to see it's\nmounted and up and running, all right?\n\n85\n00:03:59.950 --> 00:04:02.280\nNow, I don't have any\ncopies of this data base.\n\n86\n00:04:02.280 --> 00:04:03.480\nI just have my one copy.\n\n87\n00:04:03.480 --> 00:04:04.310\nIf I had more than one,\n\n88\n00:04:04.310 --> 00:04:08.230\nI'd see more than one server name right\nhere, letting me know I had a copy.\n\n89\n00:04:08.230 --> 00:04:10.480\nWe're talk about availability\nmore in other episodes, but\n\n90\n00:04:10.480 --> 00:04:12.060\njust to mention it here real quick.\n\n91\n00:04:12.060 --> 00:04:16.540\nThere's two great ways to make your\ndatabases redundant in Exchange.\n\n92\n00:04:16.540 --> 00:04:18.430\nOne way is do a database copy, right?\n\n93\n00:04:18.430 --> 00:04:21.340\nA database copy is basically\na full clone of your\n\n94\n00:04:21.340 --> 00:04:24.110\nmailbox database that's\nstored on a separate server.\n\n95\n00:04:24.110 --> 00:04:27.230\nThe cool thing about that is the server,\nit could be right next to the server,\n\n96\n00:04:27.230 --> 00:04:29.890\nit could be in another building, it could\nbe in another city, it could be in another\n\n97\n00:04:29.890 --> 00:04:33.420\ncountry, but it's an identical\ncopy of your mailbox database.\n\n98\n00:04:33.420 --> 00:04:37.730\nSo if this mailbox database server fails,\nI can redirect everybody to the other one,\n\n99\n00:04:37.730 --> 00:04:40.220\nand they'll have access\nto their information.\n\n100\n00:04:40.220 --> 00:04:41.830\nAnd that redirect can\nhappen automatically.\n\n101\n00:04:41.830 --> 00:04:43.550\nThe end users might not even notice that.\n\n102\n00:04:43.550 --> 00:04:46.590\nIf they're using like the Outlook client,\nit'll fail over and jump right over to\n\n103\n00:04:46.590 --> 00:04:50.260\nthe other system, and in business,\nthey don't even know the failure happened.\n\n104\n00:04:50.260 --> 00:04:53.330\nIt might be a little slower, depending\nhow far away that other server is, but\n\n105\n00:04:53.330 --> 00:04:54.920\notherwise it's seamless to them.\n\n106\n00:04:54.920 --> 00:04:56.700\nSo, that's a really cool\nway to handle that, and\n\n107\n00:04:56.700 --> 00:04:58.720\nthat's just called a database copy.\n\n108\n00:04:58.720 --> 00:04:59.980\nThere is another option.\n\n109\n00:04:59.980 --> 00:05:03.020\nYou'll see up here,\ndatabase availability groups.\n\n110\n00:05:03.020 --> 00:05:07.840\nA database availability group,\nIs where we take the mailbox database, and\n\n111\n00:05:07.840 --> 00:05:11.710\nwe store it on a Microsoft Windows\nfailover cluster.\n\n112\n00:05:11.710 --> 00:05:15.810\nIf you have a failover cluster set up,\nmultiple servers with shared storage,\n\n113\n00:05:15.810 --> 00:05:18.720\nyour database can be part\nof that shared storage, and\n\n114\n00:05:18.720 --> 00:05:21.230\nit can flip between\nmultiple physical systems.\n\n115\n00:05:21.230 --> 00:05:25.140\nThat gives you a lot of redundancy,\nbut it requires a lot of hardware.\n\n116\n00:05:25.140 --> 00:05:27.800\nIf you're in an Enterprise environment\nyou've probably got the hardware for\n\n117\n00:05:27.800 --> 00:05:30.370\nthat or at least the budget for\nthat and you can do it.\n\n118\n00:05:30.370 --> 00:05:34.050\nBut if you're in a small or medium\nbusiness, clusters get to be expensive, so\n\n119\n00:05:34.050 --> 00:05:35.790\nyou might not have that\ninfrastructure in place, or\n\n120\n00:05:35.790 --> 00:05:38.160\nyou might not just want to\ndeal with the complexity.\n\n121\n00:05:38.160 --> 00:05:40.300\nAnd those database\ncopies are a lot easier.\n\n122\n00:05:40.300 --> 00:05:42.330\nSo those are two solutions for\nmaking it redundant, and\n\n123\n00:05:42.330 --> 00:05:44.580\nthat's what we kind of see\nhere when we look at these.\n\n124\n00:05:44.580 --> 00:05:46.830\nI can see I've got a bad\ncopy count of zero.\n\n125\n00:05:46.830 --> 00:05:49.470\nI don't have any copies, so\nnone of them can be bad.\n\n126\n00:05:49.470 --> 00:05:50.770\nI'll have a zero there.\n\n127\n00:05:50.770 --> 00:05:51.490\nAll right.\n\n128\n00:05:51.490 --> 00:05:54.270\nNow, I didn't make this mailbox database.\n\n129\n00:05:54.270 --> 00:05:55.800\nExchange made it for me.\n\n130\n00:05:55.800 --> 00:05:57.430\nBut I can make my own if I want.\n\n131\n00:05:57.430 --> 00:05:58.660\nYou got a little plus sign up here.\n\n132\n00:05:58.660 --> 00:06:01.740\nYou can hit it and you can start\nto create more mailbox databases.\n\n133\n00:06:01.740 --> 00:06:05.870\nNow why would I want to have\nmore than one mailbox database?\n\n134\n00:06:05.870 --> 00:06:09.560\nThe reason is, we can actually put some\ndifferent settings on there that dictate\n\n135\n00:06:09.560 --> 00:06:14.580\nrestrictions, limits, behaviors that apply\nto users in one database versus another.\n\n136\n00:06:14.580 --> 00:06:19.100\nWhen you create a new user mailbox,\nyou can pick the database that it goes to.\n\n137\n00:06:19.100 --> 00:06:22.440\nSo I might have one database setup for\nmy executives, and\n\n138\n00:06:22.440 --> 00:06:25.370\nthe executives are allowed to have\nmailboxes with unlimited size.\n\n139\n00:06:25.370 --> 00:06:27.490\nThey can have as much emails as they want.\n\n140\n00:06:27.490 --> 00:06:30.920\nBut I have another mailbox that I use for\nmy contractors, and\n\n141\n00:06:30.920 --> 00:06:34.810\nI hold my contractors to 1 gig\nof mail in each mailbox right.\n\n142\n00:06:34.810 --> 00:06:36.020\nI have a limit on them.\n\n143\n00:06:36.020 --> 00:06:39.400\nSo we can impose these pretty easily,\nthrough mailbox databases.\n\n144\n00:06:39.400 --> 00:06:41.820\nI might also do this for\nperformance issues.\n\n145\n00:06:41.820 --> 00:06:44.831\nI might want to split my\nmailboxes up 50/50, so\n\n146\n00:06:44.831 --> 00:06:48.790\nthat some are 1 ray to ray and\nthe others are on another ray to ray.\n\n147\n00:06:48.790 --> 00:06:50.640\nIt's all one physical server.\n\n148\n00:06:50.640 --> 00:06:55.050\nBut I have multiple that I'm bouncing\nacross to help eliminate disk contention.\n\n149\n00:06:55.050 --> 00:06:57.120\nThese mailbox databases,\nthey're databases.\n\n150\n00:06:57.120 --> 00:07:01.160\nYou do a lot of reads off of there and\nyou do get disk contention, where multiple\n\n151\n00:07:01.160 --> 00:07:04.210\nusers are trying to access data at\nthe same time, and they have to queue up.\n\n152\n00:07:04.210 --> 00:07:05.460\nThey have to form a line.\n\n153\n00:07:05.460 --> 00:07:07.460\nSo you might have to\nwait to get to your data,\n\n154\n00:07:07.460 --> 00:07:11.360\nwhile somebody is getting their data\nfirst, and we don't want that to happen.\n\n155\n00:07:11.360 --> 00:07:14.540\nDividing our mailbox databases\nup can help with that.\n\n156\n00:07:14.540 --> 00:07:17.000\nNow, in the standard\nversion of Exchange 2013,\n\n157\n00:07:17.000 --> 00:07:19.990\nI can create up to five\nmailbox databases per server.\n\n158\n00:07:21.240 --> 00:07:24.840\nIf I need more than five,\nI've got to go to the Enterprise edition.\n\n159\n00:07:24.840 --> 00:07:26.090\nWith service pack one,\n\n160\n00:07:26.090 --> 00:07:29.370\nyou can have up to 100 mailbox\ndatabases on the Enterprise edition.\n\n161\n00:07:29.370 --> 00:07:30.250\nBut I'm gonna create one.\n\n162\n00:07:30.250 --> 00:07:33.100\nMaybe I want to separate\nall my salespeople.\n\n163\n00:07:33.100 --> 00:07:37.210\nI want my salespeople to be in a separate\nmailbox database for various reasons.\n\n164\n00:07:37.210 --> 00:07:40.020\nSo I'm gonna create a database\nhere called Sales, and\n\n165\n00:07:40.020 --> 00:07:42.950\nI can choose what server it resides on.\n\n166\n00:07:42.950 --> 00:07:45.990\nNow, I've only got one mailbox server,\nso it's not a big deal for me.\n\n167\n00:07:45.990 --> 00:07:48.590\nBut if I had more than one mailbox server,\nI could browse.\n\n168\n00:07:48.590 --> 00:07:50.610\nAnd pick the one where\nit's gonna reside on.\n\n169\n00:07:50.610 --> 00:07:51.560\nI'll just pick the one that I've got.\n\n170\n00:07:53.140 --> 00:07:53.840\nAll right.\n\n171\n00:07:53.840 --> 00:07:55.980\nAnd then we've got our database path.\n\n172\n00:07:55.980 --> 00:07:59.084\nThis is where the database files\nare actually gonna be stored.\n\n173\n00:07:59.084 --> 00:08:00.822\nAnd it's telling me about two things.\n\n174\n00:08:00.822 --> 00:08:04.574\nThis first one is the database itself,\nand so\n\n175\n00:08:04.574 --> 00:08:09.412\nI'll see this long path here\nthat it's laying out for me,\n\n176\n00:08:09.412 --> 00:08:13.083\nand at the very end, I'll see Sales.edb.\n\n177\n00:08:13.083 --> 00:08:15.486\nThat edb, that stands for\nExchange Database,\n\n178\n00:08:15.486 --> 00:08:17.950\nthat's the mailbox database file.\n\n179\n00:08:17.950 --> 00:08:20.380\nSo, if I were to browse on\nthe hard drive and find that file,\n\n180\n00:08:20.380 --> 00:08:22.499\nthat's where my email is\nactually being stored.\n\n181\n00:08:23.630 --> 00:08:27.960\nThen it has a log folder path and\nif I look at the end of that one.\n\n182\n00:08:27.960 --> 00:08:32.060\nIf I kinda scroll over it doesn't\nhave a file name at all and\n\n183\n00:08:32.060 --> 00:08:35.420\nthat's because what it's referring\nto are called transaction logs.\n\n184\n00:08:36.430 --> 00:08:38.755\nAnd you're not gonna\nhave 1 transaction log,\n\n185\n00:08:38.755 --> 00:08:42.781\nyou're gonna have many transaction logs,\nat a minimum you're gonna have 11.\n\n186\n00:08:42.781 --> 00:08:45.941\nYou'll probably have 100, 1,000.\n\n187\n00:08:45.941 --> 00:08:48.247\nYou can have a ton of\ntransaction log files, and\n\n188\n00:08:48.247 --> 00:08:50.940\nI'll explain what those\ndo here in a few minutes.\n\n189\n00:08:50.940 --> 00:08:53.580\nBut that's why it's just a path,\nit doesn't let us pick the file name.\n\n190\n00:08:53.580 --> 00:08:57.640\nIt's just saying this is the folder where\nwe're gonna store those transaction logs.\n\n191\n00:08:57.640 --> 00:08:59.700\nAnd then I've got the option\nto mount the database,\n\n192\n00:08:59.700 --> 00:09:01.940\nwhich is what's actually\ngonna bring it online.\n\n193\n00:09:01.940 --> 00:09:05.650\nSo when I hit Save,\nIt's gonna create that sales database and\n\n194\n00:09:05.650 --> 00:09:07.370\nit's gonna bring it online.\n\n195\n00:09:07.370 --> 00:09:10.570\nNow, it's empty, it doesn't have any\nmailboxes in there, but from now on,\n\n196\n00:09:10.570 --> 00:09:15.870\nwhen I create mailboxes, I can choose to\nput them in the sales mailbox database or\n\n197\n00:09:15.870 --> 00:09:18.110\nI could take existing mailboxes and\nI can move them.\n\n198\n00:09:18.110 --> 00:09:21.780\nYou can do a mailbox move request, and\nthat'll move the mailboxes over to this\n\n199\n00:09:21.780 --> 00:09:24.900\none, so I can move them back and forth,\nand you can do it while people are online.\n\n200\n00:09:24.900 --> 00:09:26.100\nIt's actually pretty slick.\n\n201\n00:09:26.100 --> 00:09:29.750\nWhen you move a mailbox,\nit's copying their mailbox, but\n\n202\n00:09:29.750 --> 00:09:34.380\nleaving the original, and it gets them\nboth in full synchronization, and\n\n203\n00:09:34.380 --> 00:09:36.815\nthen it just removes the old one.\n\n204\n00:09:36.815 --> 00:09:41.150\nSo you've got a full copy of the mailbox\nat all times, and the Outlook client,\n\n205\n00:09:41.150 --> 00:09:44.870\nOutlook Web access, all the various\nother ways of getting into your mail,\n\n206\n00:09:44.870 --> 00:09:47.300\nare aware of that and\nwill jump to the other server.\n\n207\n00:09:47.300 --> 00:09:49.020\nThe end users don't even\nknow that that happens.\n\n208\n00:09:49.020 --> 00:09:49.870\nIt's pretty neat stuff.\n\n209\n00:09:52.250 --> 00:09:55.010\nAll right, so I just added the mailbox\ndatabase, and you'll see I got a little\n\n210\n00:09:55.010 --> 00:09:59.050\nwarning here that says I need to restart\nthe Microsoft Exchange Information Store\n\n211\n00:09:59.050 --> 00:10:02.040\nservice on that server after\nadding a new mailbox database so\n\n212\n00:10:02.040 --> 00:10:03.160\nthat it can recognize it.\n\n213\n00:10:03.160 --> 00:10:04.810\nI'm gonna go ahead and say okay to that.\n\n214\n00:10:04.810 --> 00:10:08.230\nSo I've got my database, it's up and\nit's showing as mounted.\n\n215\n00:10:08.230 --> 00:10:12.640\nNow how is it mounted, but it told\nme I needed to restart the service?\n\n216\n00:10:12.640 --> 00:10:14.980\nWhy do I need to restart the service?\n\n217\n00:10:14.980 --> 00:10:17.651\nWell it's actually mounted,\nit's online and it's working right now.\n\n218\n00:10:17.651 --> 00:10:21.469\nI don't have to restart the service,\nbut there's certain things like\n\n219\n00:10:21.469 --> 00:10:25.923\ndatabase indexes that get build when you\nrestart the service, and so at my earliest\n\n220\n00:10:25.923 --> 00:10:29.631\nconvenience I need to go and\nrestart that service when I get a chance.\n\n221\n00:10:29.631 --> 00:10:34.216\nNow if I restart that service every\nmailbox database that's on that\n\n222\n00:10:34.216 --> 00:10:38.239\nserver is going to get unmounted and\nthen re-mounted, and\n\n223\n00:10:38.239 --> 00:10:41.391\nthat's gonna cause a service interruption.\n\n224\n00:10:41.391 --> 00:10:44.591\nIf I have copies of the database or\nif I'm in a database availability group,\n\n225\n00:10:44.591 --> 00:10:47.041\nit's no big deal, but\nif I've only got one copy like I do,\n\n226\n00:10:47.041 --> 00:10:48.991\nthat is gonna create\na service interruption.\n\n227\n00:10:48.991 --> 00:10:53.057\nSo I don't wanna do it right now if users\nare in the system, I wanna wait and\n\n228\n00:10:53.057 --> 00:10:55.560\ndo it later when users\naren't in the system.\n\n229\n00:10:55.560 --> 00:10:58.620\nAll right, but now I've got my\ndifferent mailbox databases.\n\n230\n00:10:58.620 --> 00:11:01.920\nNow I have to be careful,\nbecause my mailbox database,\n\n231\n00:11:01.920 --> 00:11:04.640\nI didn't give it a crazy\nname like the default.\n\n232\n00:11:04.640 --> 00:11:07.910\nThe default has those extra numbers\nattached to the end of it to make it\n\n233\n00:11:07.910 --> 00:11:09.170\nunique, mine doesn't.\n\n234\n00:11:09.170 --> 00:11:11.740\nSo if I'm gonna be doing\ndatabase copies and\n\n235\n00:11:11.740 --> 00:11:14.630\ndatabase availability groups,\nI need to make sure from now on,\n\n236\n00:11:14.630 --> 00:11:18.360\non all of my mailbox servers,\nI don't use the name Sales again.\n\n237\n00:11:18.360 --> 00:11:21.270\nSo we want it to be a little bit specific\nwith that name and make sure that we don't\n\n238\n00:11:21.270 --> 00:11:24.379\nget duplicates, and\nthat's throughout the whole organization.\n\n239\n00:11:26.670 --> 00:11:28.450\nOnce I've got a mailbox database created,\n\n240\n00:11:28.450 --> 00:11:31.920\nit's actually built several\nfiles to store that database in.\n\n241\n00:11:31.920 --> 00:11:33.440\nLet's take a look at those files.\n\n242\n00:11:33.440 --> 00:11:36.530\nI'm gonna switch over to that server,\nwhich is that guy right here,\n\n243\n00:11:36.530 --> 00:11:38.960\nand i'm just gonna browse\non the hard drive, and\n\n244\n00:11:38.960 --> 00:11:41.530\nwe'll browse into where all\nthose files are stored.\n\n245\n00:11:43.800 --> 00:11:50.950\nThey're buried away in\nC:/programfiles/Microsoft/exchangeserver/-\n\n246\n00:11:50.950 --> 00:11:56.000\nversion15, that's Exchange 2013, /mailbox.\n\n247\n00:11:57.130 --> 00:12:00.560\nIn there you're going to see folders for\nyour mailbox databases.\n\n248\n00:12:00.560 --> 00:12:05.630\nSo I can see mailbox database 2013076320,\nrolls right off the tongue,\n\n249\n00:12:05.630 --> 00:12:07.625\nand I'll see the database sales.\n\n250\n00:12:07.625 --> 00:12:11.100\nSo I see those databases right there,\nand if I browse into it,\n\n251\n00:12:11.100 --> 00:12:13.920\nlike I'll take my sales database,\nI see a lot of files.\n\n252\n00:12:15.340 --> 00:12:17.730\nAll of these files are important.\n\n253\n00:12:17.730 --> 00:12:19.830\nIf you delete one of these\nfiles you will regret it.?\n\n254\n00:12:19.830 --> 00:12:21.880\n[LAUGH] All of these are important files.\n\n255\n00:12:21.880 --> 00:12:23.540\nThey each serve a purpose.\n\n256\n00:12:23.540 --> 00:12:27.450\nThe most important one is this\nguy right here, Sales.edb.\n\n257\n00:12:27.450 --> 00:12:29.820\nThat's my Exchange database,\nthat's really important to me.\n\n258\n00:12:29.820 --> 00:12:35.170\nI don't have any mailboxes in here, but\nnotice that it's already 253 megs in size.\n\n259\n00:12:35.170 --> 00:12:37.527\nThat's because it's got some\ndefault information and\n\n260\n00:12:37.527 --> 00:12:41.390\nsome basic size applied to it, some empty\nspace so that it doesn't have to grow.\n\n261\n00:12:41.390 --> 00:12:42.370\nAs I throw more and\n\n262\n00:12:42.370 --> 00:12:46.020\nmore data in there, it'll grow to reflect\nthe amount of data that's in there.\n\n263\n00:12:48.280 --> 00:12:50.260\nSome of the other files\nthat are important,\n\n264\n00:12:50.260 --> 00:12:52.370\nremember those log files that I mentioned?\n\n265\n00:12:52.370 --> 00:12:57.160\nWell, we can see one of them right here,\nE01.log, And\n\n266\n00:12:57.160 --> 00:12:58.680\nI'm not seeing my file extensions.\n\n267\n00:12:58.680 --> 00:13:00.425\nLet me turn on my file extensions,\nthere we go.\n\n268\n00:13:00.425 --> 00:13:04.980\nE01.log, that is what's\ncalled a transaction log.\n\n269\n00:13:04.980 --> 00:13:07.800\nNow let me explain transaction logs\nreally quickly, it's important and\n\n270\n00:13:07.800 --> 00:13:10.320\nyou need to know it for the exam, but\nyou need to know it for real life too.\n\n271\n00:13:11.370 --> 00:13:16.070\nWhen you get a new email, that email comes\nin and it needs to go to the database, so\n\n272\n00:13:16.070 --> 00:13:19.020\nwe gotta write the data to the database.\n\n273\n00:13:19.020 --> 00:13:22.840\nWell, let's say the email has an\nattachment and it's 1 meg in size, and so\n\n274\n00:13:22.840 --> 00:13:26.260\nit starts to write that one meg\nattachment into the database.\n\n275\n00:13:26.260 --> 00:13:28.700\nIt gets halfway through and\nyou lose power.\n\n276\n00:13:29.980 --> 00:13:32.020\nPower goes out, the server shuts down.\n\n277\n00:13:32.020 --> 00:13:34.630\nWell, power comes back,\nyou boot the server up.\n\n278\n00:13:34.630 --> 00:13:35.992\nWhat happened?\nWell,\n\n279\n00:13:35.992 --> 00:13:40.820\nonly half of that attachment was written\nto the database, so it's now corrupted.\n\n280\n00:13:40.820 --> 00:13:43.270\nYou've got corrupt data in your database,\nso\n\n281\n00:13:43.270 --> 00:13:45.700\nnow when someone goes to access that\nattachment, they get a corrupt file.\n\n282\n00:13:45.700 --> 00:13:47.900\nIt's damaged, and worse,\n\n283\n00:13:47.900 --> 00:13:50.470\nthe file might be damaged in a way\nthat Exchange can't even access it.\n\n284\n00:13:50.470 --> 00:13:53.950\nNow you've got dead data filling up your\ndatabase, and it just sits there, and\n\n285\n00:13:53.950 --> 00:13:55.630\nyou can't do anything about it.\n\n286\n00:13:55.630 --> 00:13:56.880\nThat would be bad.\n\n287\n00:13:56.880 --> 00:13:59.980\nSo transaction logs are designed\nto help insulate us from that.\n\n288\n00:13:59.980 --> 00:14:02.780\nThe way transactions logs work is\nwhen data comes in to be written to\n\n289\n00:14:02.780 --> 00:14:03.810\nthe database,\n\n290\n00:14:03.810 --> 00:14:07.170\nyou don't write to the database,\nyou write to the transaction logs.\n\n291\n00:14:07.170 --> 00:14:11.410\nSo that one meg attachment gets to written\nto a transaction log file first, and\n\n292\n00:14:11.410 --> 00:14:15.970\nonly when the data is 100%\nwritten to the transaction log,\n\n293\n00:14:15.970 --> 00:14:18.450\nis it then written to the actual database.\n\n294\n00:14:18.450 --> 00:14:21.360\nAnd the reason it does it that way is,\nnow when it's writing to the database,\n\n295\n00:14:21.360 --> 00:14:23.770\nlet's say it's halfway through and\nthe power goes out?\n\n296\n00:14:23.770 --> 00:14:26.370\nWell, when you boot that\nserver back up it says, oh,\n\n297\n00:14:26.370 --> 00:14:29.900\nI was halfway through, when we look at the\ntransactional file, there's all the data.\n\n298\n00:14:29.900 --> 00:14:33.690\nLet me just start it over again, and\nit copies it back in, it does a rollback.\n\n299\n00:14:33.690 --> 00:14:38.000\nIt undoes the partial write, and then\na roll forward to reapply that data in and\n\n300\n00:14:38.000 --> 00:14:40.290\nyou get it back in the database.\n\n301\n00:14:40.290 --> 00:14:44.430\nAnd so it ensures that things like\npower outages or unexpected database\n\n302\n00:14:44.430 --> 00:14:48.870\ndismounts or whatever don't result\nin corrupted data in the database.\n\n303\n00:14:48.870 --> 00:14:52.440\nNow, transaction logs only affect writes,\nwhen we write data.\n\n304\n00:14:52.440 --> 00:14:54.660\nWhen you read data,\nyou read it right out of the database,\n\n305\n00:14:54.660 --> 00:14:57.160\ncuz you're not gonna corrupt\nthe database by reading it.\n\n306\n00:14:57.160 --> 00:14:59.630\nThose happen right out of the EDB file,\nbut\n\n307\n00:14:59.630 --> 00:15:03.920\nwhen you're doing a write operation, your\nwrites always go to the transactions logs.\n\n308\n00:15:03.920 --> 00:15:10.260\nNow, the transaction log file, on mine you\ncan see this E01.log, it's just one file.\n\n309\n00:15:10.260 --> 00:15:11.681\nIt won't be one file for long.\n\n310\n00:15:11.681 --> 00:15:14.601\nNotice that the file is 1 meg in size,\nright?\n\n311\n00:15:14.601 --> 00:15:15.961\n1,024 kilobytes.\n\n312\n00:15:15.961 --> 00:15:20.961\nWell, it's one meg, what if I have\nmore than one meg of changes?\n\n313\n00:15:20.961 --> 00:15:25.223\nIf I have more than one meg of changes\nit's going to create a second file, E02,\n\n314\n00:15:25.223 --> 00:15:28.044\nE03 and so on, and\nwhat it's actually gonna do is,\n\n315\n00:15:28.044 --> 00:15:30.761\nyou'll see it's already\ndone it right down here.\n\n316\n00:15:30.761 --> 00:15:36.253\nE01, 0000001 and then E01 00000002\n\n317\n00:15:36.253 --> 00:15:40.320\nIt's created two log files right here.\n\n318\n00:15:40.320 --> 00:15:44.270\nSo the first one filled up,\nI had one meg of changes here, and so\n\n319\n00:15:44.270 --> 00:15:46.000\nthen it created a second file.\n\n320\n00:15:46.000 --> 00:15:47.000\nNow, what is that E01?\n\n321\n00:15:47.000 --> 00:15:52.550\nE01 just means that this is\nthe second database on my server.\n\n322\n00:15:52.550 --> 00:15:55.126\nRemember, I already had a database server,\nI mean a database.\n\n323\n00:15:55.126 --> 00:15:57.293\nI had the mailbox database.\n\n324\n00:15:57.293 --> 00:15:59.084\nLet me just jump back to it here.\n\n325\n00:15:59.084 --> 00:16:02.292\nThis guy right here, this was my\nfirst database, mailbox database.\n\n326\n00:16:02.292 --> 00:16:04.752\nSo sales is technically my second one.\n\n327\n00:16:04.752 --> 00:16:09.981\nThe mailbox database, this guy,\nwas E00, this one is E01.\n\n328\n00:16:09.981 --> 00:16:13.602\nSo inside of sales, that's why\neverything starts with E01, right?\n\n329\n00:16:13.602 --> 00:16:17.563\nSo if I were to put all of these\ndatabases in the same folder,\n\n330\n00:16:17.563 --> 00:16:23.842\nthey'd be able to tell each other apart,\nbecause E00, E01, E02, and so on, right?\n\n331\n00:16:23.842 --> 00:16:28.604\nIf I go backup a folder here, and\ngo into that mailbox database 2013 folder,\n\n332\n00:16:28.604 --> 00:16:30.645\nsee how they all start with E00?\n\n333\n00:16:30.645 --> 00:16:32.990\nIt was the first database, right?\n\n334\n00:16:32.990 --> 00:16:36.159\nAnd, it's the first, but they start\nnumbering with 0, it's computers,\n\n335\n00:16:36.159 --> 00:16:38.132\nthey're annoying, so\n[LAUGH] we've got that.\n\n336\n00:16:38.132 --> 00:16:42.820\nAll right, but here inside of our\nsales database, We've got E01.log.\n\n337\n00:16:42.820 --> 00:16:46.170\nThat's defining what our\ntransaction log list is, right?\n\n338\n00:16:46.170 --> 00:16:47.490\nHow many logs we have.\n\n339\n00:16:47.490 --> 00:16:51.960\nAnd then down here, I can see E01\nall the way through 1, and then 2.\n\n340\n00:16:51.960 --> 00:16:56.250\nAnd it's just gonna keep counting up,\n3, 4, 5, 6, 7, and higher.\n\n341\n00:16:56.250 --> 00:16:57.860\nAnd it actually does hexadecimal.\n\n342\n00:16:57.860 --> 00:17:02.480\nSo it'll do 0 through 9, and then\nA through F, and then start over again,\n\n343\n00:17:02.480 --> 00:17:03.910\n0 through 9, A through F.\n\n344\n00:17:03.910 --> 00:17:06.180\nAnd so you can have tens of thousands,\n\n345\n00:17:06.180 --> 00:17:08.100\nhundreds of thousands of\ntransaction log files.\n\n346\n00:17:08.100 --> 00:17:11.290\nAs you're writing data to that database,\nthose are gonna grow and grow and\n\n347\n00:17:11.290 --> 00:17:13.650\ngrow, and they're always 1 meg in size.\n\n348\n00:17:13.650 --> 00:17:16.350\nIt breaks up into 1 megabyte chunks,\nall right.\n\n349\n00:17:16.350 --> 00:17:21.265\nNow, when you write to a transaction log,\nwhen your data is 100%\n\n350\n00:17:21.265 --> 00:17:24.505\nwritten to the transaction log,\nit's ready to be written to the database.\n\n351\n00:17:24.505 --> 00:17:26.575\nSo then it writes it to the database.\n\n352\n00:17:26.575 --> 00:17:29.835\nHow does it know what data's\nbeen written to the database and\n\n353\n00:17:29.835 --> 00:17:32.095\nwhat data's still in the transaction logs?\n\n354\n00:17:32.095 --> 00:17:33.790\nWell, it doesn't.\n\n355\n00:17:33.790 --> 00:17:34.740\nIt doesn't know.\n\n356\n00:17:34.740 --> 00:17:38.340\nSo it has to keep track of that somehow,\nand it has a separate file for that.\n\n357\n00:17:38.340 --> 00:17:41.520\nYou'll notice up here,\nI've got a filed called ES1.chk.\n\n358\n00:17:41.520 --> 00:17:43.540\nThat's my checkpoint file.\n\n359\n00:17:43.540 --> 00:17:48.930\nThe checkpoint is defining points in\ntime when everything was in sync,\n\n360\n00:17:48.930 --> 00:17:51.570\nwhen everything in the transaction\nlog was written to the database.\n\n361\n00:17:51.570 --> 00:17:54.490\nAnd so we can use that\ncheckpoint file to figure out\n\n362\n00:17:54.490 --> 00:17:57.120\nwhat was written to the database and\nwhat wasn't.\n\n363\n00:17:57.120 --> 00:18:01.360\nSo when there's a power outage,\nwe can boot our system back up,\n\n364\n00:18:01.360 --> 00:18:06.150\nit looks at the checkpoint, and says okay,\nwhat was written 100% and what wasn't?\n\n365\n00:18:06.150 --> 00:18:10.490\nAnything that wasn't written 100%, let's\nroll that back, let's undo that, okay?\n\n366\n00:18:10.490 --> 00:18:14.220\nAnd then everything that was written\n100% is done, it's fine, and\n\n367\n00:18:14.220 --> 00:18:17.850\nnow we start rolling forward any other\ntransactions that are still in tact,\n\n368\n00:18:17.850 --> 00:18:19.800\nanything that we actually have\nthe full set of data for and\n\n369\n00:18:19.800 --> 00:18:23.490\nit will start reapplying them, and\nit does all this automatically.\n\n370\n00:18:23.490 --> 00:18:25.110\nWe don't have to worry about it.\n\n371\n00:18:25.110 --> 00:18:28.430\nWell, there is actually one little\nbit we have to worry about.\n\n372\n00:18:28.430 --> 00:18:32.170\nAs you make changes, the changes\nare being written to the log files,\n\n373\n00:18:32.170 --> 00:18:34.150\nand then they're being\nwritten to the database.\n\n374\n00:18:34.150 --> 00:18:36.230\nThat means you're using double storage.\n\n375\n00:18:36.230 --> 00:18:37.386\nIf you get a five meg attachment,\n\n376\n00:18:37.386 --> 00:18:39.453\nthe attachment is written to\nthe transaction log file, and\n\n377\n00:18:39.453 --> 00:18:42.452\nthen it's written to the database, too,\nnow it's a 10 mega attachment, right?\n\n378\n00:18:42.452 --> 00:18:43.920\nIt took twice the space.\n\n379\n00:18:43.920 --> 00:18:48.040\nSo these transaction logs,\nthey grow and they grow and they grow.\n\n380\n00:18:48.040 --> 00:18:49.670\nEventually, you need to flush them out.\n\n381\n00:18:49.670 --> 00:18:52.615\nYou flush the transaction logs, and\nthe way you do it is by running a backup.\n\n382\n00:18:52.615 --> 00:18:53.210\nWhen you run a backup,\n\n383\n00:18:53.210 --> 00:18:58.740\nwhen you run a full backup of an exchange\nserver, it flushes the transaction logs.\n\n384\n00:18:58.740 --> 00:19:02.440\nOr if you run a differential backup,\nit flushes the transaction logs.\n\n385\n00:19:02.440 --> 00:19:04.590\nI'm sorry, not differential,\nlet me try to get this straight.\n\n386\n00:19:04.590 --> 00:19:06.870\nI wanna make sure you guys\nhave the right information.\n\n387\n00:19:06.870 --> 00:19:10.750\nIf you run an incremental backup,\nit flushes the transaction logs.\n\n388\n00:19:10.750 --> 00:19:14.080\nIf you run a differential,\nit leaves the transaction logs,\n\n389\n00:19:14.080 --> 00:19:18.950\nbecause each differential contains all\nthe changes since the last full backup,\n\n390\n00:19:18.950 --> 00:19:20.520\nregardless of how many differentials.\n\n391\n00:19:20.520 --> 00:19:23.140\nAnd it achieves that by\nleaving the logs alone.\n\n392\n00:19:23.140 --> 00:19:26.252\nSo if you run a full backup or\nan incremental backup,\n\n393\n00:19:26.252 --> 00:19:30.190\nit'll flush those transactions,\nas long as you empty them out.\n\n394\n00:19:30.190 --> 00:19:33.120\nIf you don't do that, if you're running\nExchange and you're not backing\n\n395\n00:19:33.120 --> 00:19:36.370\nup your server regularly, maybe you're\nbackup software starts malfunctioning and\n\n396\n00:19:36.370 --> 00:19:39.680\nit's not running, or maybe you use some\nthird party software that's not Exchange\n\n397\n00:19:39.680 --> 00:19:42.870\naware, then you're transaction auxiliary\nare gonna grow and grow and grow and\n\n398\n00:19:42.870 --> 00:19:44.398\ngrow, until they fill the hard drive.\n\n399\n00:19:44.398 --> 00:19:47.660\nAnd your server's gonna get slower and\nslower and slower and\n\n400\n00:19:47.660 --> 00:19:50.800\nslower, cuz it's constantly having to\ncheck those log files to see if there's\n\n401\n00:19:50.800 --> 00:19:52.820\nchanges that haven't been\nwritten to the data base yet.\n\n402\n00:19:52.820 --> 00:19:54.720\nSo it really starts to kill performance,\nso\n\n403\n00:19:54.720 --> 00:19:57.260\nyou gotta keep an eye on\nthose transaction log files.\n\n404\n00:19:57.260 --> 00:20:01.910\nNow, this is all default behavior,\nwe want this behavior, but\n\n405\n00:20:01.910 --> 00:20:03.750\nyou can disable the transaction log files.\n\n406\n00:20:03.750 --> 00:20:05.940\nThere's something called circular logging.\n\n407\n00:20:05.940 --> 00:20:08.770\nWith circular logging,\nit just makes, I think it's five or\n\n408\n00:20:08.770 --> 00:20:11.830\nten transaction log files and\nthat's it, it stops there.\n\n409\n00:20:11.830 --> 00:20:15.690\nAnd then, when it writes new data,\nit just overwrites the oldest data.\n\n410\n00:20:15.690 --> 00:20:19.670\nSo, it's just operating within\na small set of transaction log files.\n\n411\n00:20:19.670 --> 00:20:23.214\nThat's okay, but it's not the greatest\nsolution in the world and\n\n412\n00:20:23.214 --> 00:20:24.298\nlet me tell you why.\n\n413\n00:20:24.298 --> 00:20:28.725\nWhen we do circular logging, if I have\na failure, if I have a database failure,\n\n414\n00:20:28.725 --> 00:20:31.895\nI go back and I get my last full backup,\nand I restore it and\n\n415\n00:20:31.895 --> 00:20:33.702\nI'm back in business, right?\n\n416\n00:20:33.702 --> 00:20:36.325\nLet's say I backup my Exchange\nserver every night at midnight.\n\n417\n00:20:36.325 --> 00:20:38.368\nSo every night at midnight, I back it up.\n\n418\n00:20:38.368 --> 00:20:42.670\nAnd here I am at 3 PM in the afternoon,\nand my server fails.\n\n419\n00:20:42.670 --> 00:20:44.100\nAnd I'm like, great, it failed.\n\n420\n00:20:44.100 --> 00:20:46.550\nWell, I've got a full backup,\nlet me just go and restore that.\n\n421\n00:20:46.550 --> 00:20:50.210\nThe problem is the full backup,\nif it ran at midnight and now it's 3 PM,\n\n422\n00:20:50.210 --> 00:20:53.420\nthat full backup is 15 hours old.\n\n423\n00:20:53.420 --> 00:20:58.370\nI lost 15 hours of email, 15 hours of\nemail just gone, incoming, outgoing,\n\n424\n00:20:58.370 --> 00:21:00.320\nanything that happened the last 15 hours,\ngone.\n\n425\n00:21:00.320 --> 00:21:01.660\nIs that okay?\n\n426\n00:21:01.660 --> 00:21:03.450\nIn your business it might be, right?\n\n427\n00:21:03.450 --> 00:21:05.670\nIn your business,\nemail might not be critical.\n\n428\n00:21:05.670 --> 00:21:07.950\nAnd so losing 15 hours of email,\nthat might not be a big deal.\n\n429\n00:21:07.950 --> 00:21:09.200\nYou don't worry about it.\n\n430\n00:21:09.200 --> 00:21:11.270\nTurn on circular logging, do full backups.\n\n431\n00:21:11.270 --> 00:21:13.040\nWorks great, right?\n\n432\n00:21:13.040 --> 00:21:17.030\nBut, wouldn't it be nice if you\ncould get those 15 hours back?\n\n433\n00:21:17.030 --> 00:21:19.030\nWell, sometimes you can.\n\n434\n00:21:19.030 --> 00:21:20.850\nIf I had a full backup\nthat ran at midnight,\n\n435\n00:21:20.850 --> 00:21:25.970\nand then I've got transaction logs\nthat have run all day long for\n\n436\n00:21:25.970 --> 00:21:31.540\nthose 15 hours, it's possible that\nI could restore my full backup,\n\n437\n00:21:31.540 --> 00:21:36.690\nand then import those transaction logs and\nget right back to the point of failure.\n\n438\n00:21:36.690 --> 00:21:38.660\nAnd now I don't lose any email.\n\n439\n00:21:38.660 --> 00:21:39.950\nIsn't that better?\n\n440\n00:21:39.950 --> 00:21:41.500\nAbsolutely, it's better, right?\n\n441\n00:21:41.500 --> 00:21:45.110\nSo, those transaction logs can really be\na great safety net to help you recover\n\n442\n00:21:45.110 --> 00:21:47.160\nright to a point of failure, all right?\n\n443\n00:21:47.160 --> 00:21:50.150\nSo, you don't want to just\ndisable them out of hand.\n\n444\n00:21:50.150 --> 00:21:53.150\nThey do serve a purpose,\nespecially at times of failure,\n\n445\n00:21:53.150 --> 00:21:54.260\nthey're really handy to have.\n\n446\n00:21:54.260 --> 00:21:55.350\nYou just need to maintain them.\n\n447\n00:21:55.350 --> 00:21:56.770\nIt's part of running an Exchange server.\n\n448\n00:21:56.770 --> 00:21:57.270\nIt's really important.\n\n449\n00:21:58.910 --> 00:22:02.240\nAll right, there are a few other log\nfiles in here, and in fact, I've\n\n450\n00:22:02.240 --> 00:22:05.270\ntalked long enough that we've actually\ngenerated a third log file here, right?\n\n451\n00:22:05.270 --> 00:22:09.010\nSo just the server sitting here running\nhas generated enough to create a new log\n\n452\n00:22:09.010 --> 00:22:10.550\nfile while I was talking.\n\n453\n00:22:10.550 --> 00:22:14.320\nSome of the other files that we've got\nin here, notice all these JRS files.\n\n454\n00:22:14.320 --> 00:22:19.110\nThere's ten JRS files,\n1 through 9, and then an A.\n\n455\n00:22:19.110 --> 00:22:20.160\nWhat are those?\n\n456\n00:22:20.160 --> 00:22:23.280\nWell, these are reserve files.\n\n457\n00:22:23.280 --> 00:22:25.650\nWhat happens if your hard drive fills up?\n\n458\n00:22:25.650 --> 00:22:27.120\nIf your hard drive fills up and\n\n459\n00:22:27.120 --> 00:22:31.610\nyou've got email coming in,\nit can't write it to the database, can it?\n\n460\n00:22:31.610 --> 00:22:35.260\nIt can't write it to the transaction logs,\nthe file system is full.\n\n461\n00:22:35.260 --> 00:22:36.620\nYou're losing them.\n\n462\n00:22:36.620 --> 00:22:38.710\nSo what these reserve files do\nis they reserve some space.\n\n463\n00:22:38.710 --> 00:22:41.250\nI'm reserving 10 megs of space.\n\n464\n00:22:41.250 --> 00:22:45.950\nAnd if my hard drive ever fills up,\nExchange will dismount the database.\n\n465\n00:22:45.950 --> 00:22:46.980\nIt will take the database offline.\n\n466\n00:22:46.980 --> 00:22:48.762\nThat will stop incoming email.\n\n467\n00:22:48.762 --> 00:22:52.100\nAnd, it'll write anything\nin the current queues,\n\n468\n00:22:52.100 --> 00:22:55.530\nright here to these ten files,\nthis reserved space that it's set aside.\n\n469\n00:22:55.530 --> 00:22:56.630\nSo that's what these are.\n\n470\n00:22:56.630 --> 00:22:58.580\nThese are actually empty,\nthey're empty files.\n\n471\n00:22:58.580 --> 00:23:00.020\nThere's nothing in them.\n\n472\n00:23:00.020 --> 00:23:03.605\nThey're just holding ten megs of\nspace on my hard drive, right?\n\n473\n00:23:03.605 --> 00:23:09.270\nIt's ten files at 1,024 kilobytes each,\nso those are our reserve space.\n\n474\n00:23:09.270 --> 00:23:11.350\nThere's only one other file in\nhere that we need to worry.\n\n475\n00:23:11.350 --> 00:23:16.920\nIt's this guy down here at the bottom,\ntmp.edb, and that's a temporary database.\n\n476\n00:23:16.920 --> 00:23:20.610\nAny temporary data that Exchange works\nwith, like when it's doing mailbox move\n\n477\n00:23:20.610 --> 00:23:24.410\nrequests and stuff, there's temporary\ndata, it'll get thrown right in there.\n\n478\n00:23:24.410 --> 00:23:26.750\nThat database gets flushed regularly and\n\n479\n00:23:26.750 --> 00:23:30.050\nit's pretty unusual to see it bigger\nthan one or two megs in size.\n\n480\n00:23:30.050 --> 00:23:31.545\nIt doesn't normally get very big at all.\n\n481\n00:23:31.545 --> 00:23:35.283\nYou'll see mine's 1.2 megs in size or\nsomething like that.\n\n482\n00:23:35.283 --> 00:23:36.444\nSo, it's usually pretty small.\n\n483\n00:23:36.444 --> 00:23:37.980\nIt's just temporary data.\n\n484\n00:23:37.980 --> 00:23:41.910\nBut all of these files were created\nwhen I created that database.\n\n485\n00:23:41.910 --> 00:23:45.910\nAnd now, as I work with the server,\nit's using all this in the background and\n\n486\n00:23:45.910 --> 00:23:47.980\nI don't really have to worry\nabout it all that much.\n\n487\n00:23:49.110 --> 00:23:51.760\nIf I go and look at the other\nmailbox database, same thing, right?\n\n488\n00:23:51.760 --> 00:23:52.584\nIt's got log files.\n\n489\n00:23:52.584 --> 00:23:55.995\nIt actually has more log files than my\nother one, because it's been running\n\n490\n00:23:55.995 --> 00:23:59.567\nlonger, and it's actually got user\nmailboxes in it But I'll see that database\n\n491\n00:23:59.567 --> 00:24:03.780\nfile, it's got it's own temp file, I'll\nsee its checkpoints, it's reserve files.\n\n492\n00:24:03.780 --> 00:24:07.335\nSame basic structure, you expect to see\nthis for all of your mailbox database,\n\n493\n00:24:07.335 --> 00:24:07.876\nall right?\n\n494\n00:24:07.876 --> 00:24:10.667\nSo that's the basic structure and\nthe key takeaway here that I want you guys\n\n495\n00:24:10.667 --> 00:24:12.840\nto remember are these transaction logs,\nright?\n\n496\n00:24:12.840 --> 00:24:17.220\nThe transaction logs are what you write to\nfirst before you write to the database.\n\n497\n00:24:17.220 --> 00:24:19.300\nAnd that gives you that\ndatabase integrity.\n\n498\n00:24:19.300 --> 00:24:23.220\nNow if I jump back to my Exchange\nManagement screen, back here in the admin\n\n499\n00:24:23.220 --> 00:24:28.370\ncenter, I could take my sales database and\nif I edit the sales database,\n\n500\n00:24:28.370 --> 00:24:31.380\nI'll see some various settings\non there that I can tweak.\n\n501\n00:24:31.380 --> 00:24:32.320\nAnd some of it,\n\n502\n00:24:32.320 --> 00:24:35.880\nlike here on the general page, there's not\na whole heck of a lot that I can modify.\n\n503\n00:24:35.880 --> 00:24:37.270\nI can modify the name.\n\n504\n00:24:37.270 --> 00:24:42.160\nSo I could give it one of those unique\nnames if I wanted to like the big\n\n505\n00:24:42.160 --> 00:24:44.210\nlong name that we saw on the other one.\n\n506\n00:24:44.210 --> 00:24:46.471\nI could go crazy, or\nI could just leave it be, right?\n\n507\n00:24:46.471 --> 00:24:47.080\nSo you can modify that.\n\n508\n00:24:47.080 --> 00:24:48.700\nBut most of this is just information.\n\n509\n00:24:48.700 --> 00:24:50.610\nWhen was the last full backup?\n\n510\n00:24:50.610 --> 00:24:52.730\nWhen was the last incremental backup,\nright?\n\n511\n00:24:52.730 --> 00:24:53.930\nWhat's its current status?\n\n512\n00:24:53.930 --> 00:24:55.150\nWhat servers that mounted to?\n\n513\n00:24:55.150 --> 00:24:55.710\nAnd so on.\n\n514\n00:24:55.710 --> 00:24:56.670\nJust basic information.\n\n515\n00:24:57.900 --> 00:24:58.980\nMost of this you can't change.\n\n516\n00:24:58.980 --> 00:25:00.760\nIt's just giving you that data.\n\n517\n00:25:00.760 --> 00:25:04.690\nUnder maintenance, here we actually can\ntweak a few things and the one that I want\n\n518\n00:25:04.690 --> 00:25:08.150\nto point out is right here at the bottom,\nEnable Circular Logging.\n\n519\n00:25:08.150 --> 00:25:12.080\nIf I don't want transaction log files,\nhere's where I can fix that.\n\n520\n00:25:12.080 --> 00:25:14.980\nI can check that, and that's gonna\nturn off transaction log files.\n\n521\n00:25:14.980 --> 00:25:19.010\nYou still have transaction 1000 it's\ngoing to start overriding them.\n\n522\n00:25:19.010 --> 00:25:21.210\nSo new data will override the old.\n\n523\n00:25:21.210 --> 00:25:22.997\nYou won't have hundreds or thousands.\n\n524\n00:25:22.997 --> 00:25:25.610\nYou'll have five or\nI can't remember if it's five or ten,\n\n525\n00:25:25.610 --> 00:25:29.078\nit's a real small amount of transaction\nlog files and that's it, all right?\n\n526\n00:25:29.078 --> 00:25:31.938\nThere's other things you can tweak like\nwhether you want to allow background\n\n527\n00:25:31.938 --> 00:25:32.820\nmaintenance.\n\n528\n00:25:32.820 --> 00:25:36.700\nIt's constantly defragmenting and trying\nto compact the database in the background.\n\n529\n00:25:36.700 --> 00:25:38.120\nAnd you can turn that off if you want.\n\n530\n00:25:38.120 --> 00:25:42.360\nYou can set a schedule for it, for\nwhen those maintenance routines run.\n\n531\n00:25:42.360 --> 00:25:44.200\nSet it for off-peak hours.\n\n532\n00:25:44.200 --> 00:25:47.230\nYou can set whether the databases\nmounted at startup.\n\n533\n00:25:47.230 --> 00:25:49.470\nMaybe you don't want it to mount\nautomatically, you mount it yourself.\n\n534\n00:25:49.470 --> 00:25:51.570\nThere's not a lot of reason for that.\n\n535\n00:25:51.570 --> 00:25:52.740\nThen there's this guy.\n\n536\n00:25:52.740 --> 00:25:55.600\nThis database can be\noverwritten by a restore.\n\n537\n00:25:55.600 --> 00:25:58.030\nWe'll see this in the episode\nwhere we do back-ups and restores.\n\n538\n00:25:58.030 --> 00:26:00.690\nIn order to restore over a database,\nyou need to turn this option on.\n\n539\n00:26:00.690 --> 00:26:03.510\nIt's off by default, and\nthat's a protection mechanism.\n\n540\n00:26:03.510 --> 00:26:06.930\nIt's to save you from accidentally\noverriding your database,\n\n541\n00:26:06.930 --> 00:26:09.880\nbecause you might want to recover\nthose transaction log files.\n\n542\n00:26:09.880 --> 00:26:13.883\nAnd when you do a restore, it wipes\nthe transaction log files by default.\n\n543\n00:26:13.883 --> 00:26:15.009\nWe want to be able to get those.\n\n544\n00:26:15.009 --> 00:26:17.588\nSo those are all important.\n\n545\n00:26:17.588 --> 00:26:19.335\nI mentioned at the beginning\nof the episode we can set\n\n546\n00:26:19.335 --> 00:26:20.380\nlimits on a mailbox database.\n\n547\n00:26:20.380 --> 00:26:22.270\nWe'll see that right here\nunder the limits section.\n\n548\n00:26:22.270 --> 00:26:26.950\nI can say I only want users to\nhave a certain amount of space.\n\n549\n00:26:26.950 --> 00:26:28.580\nThis is my sales mailbox database.\n\n550\n00:26:28.580 --> 00:26:32.900\nSo I want salespeople to have a,\nwe'll say a 4 gig mailbox.\n\n551\n00:26:32.900 --> 00:26:35.040\nAnd so I can come in here,\nand I can set limits, right?\n\n552\n00:26:35.040 --> 00:26:41.120\nI can say issue them a warning\nwhen they get to 3.5 GB, right?\n\n553\n00:26:41.120 --> 00:26:43.770\nAt 3.5 I'm gonna warn them.\n\n554\n00:26:43.770 --> 00:26:50.080\nAnd then, at 3.7 I'm gonna stop\nthem from being able to send email.\n\n555\n00:26:50.080 --> 00:26:52.640\nThey're not gonna be able\nto send email anymore.\n\n556\n00:26:52.640 --> 00:26:57.180\nThey can still receive but they can't\nsend until they clean up their mail box.\n\n557\n00:26:57.180 --> 00:26:58.410\nAnd then I can come in here and\n\n558\n00:26:58.410 --> 00:27:02.540\nI can say when they hit 4 GB, I'm going\nto stop them from sending and receiving.\n\n559\n00:27:02.540 --> 00:27:04.100\nThat's it, there mailbox is full.\n\n560\n00:27:04.100 --> 00:27:06.020\nThey won't be able to receive any data.\n\n561\n00:27:06.020 --> 00:27:10.150\nNow, that's not a terribly popular\noption because if email is critical for\n\n562\n00:27:10.150 --> 00:27:12.570\nyour company, you want people\nto be able to send and receive.\n\n563\n00:27:12.570 --> 00:27:15.220\nSo a lot of times I'll come in here and\njust set these to Unlimited.\n\n564\n00:27:16.350 --> 00:27:19.210\nSo I'm never gonna stop them\nfrom sending and receiving, but\n\n565\n00:27:19.210 --> 00:27:21.310\nI am gonna issue them a warning.\n\n566\n00:27:21.310 --> 00:27:22.940\nAnd it'll annoy the heck out of them,\nright?\n\n567\n00:27:22.940 --> 00:27:24.367\nOnce a day,\nthey'll get this warning message.\n\n568\n00:27:24.367 --> 00:27:27.270\nDuring our maintenance window is when\nit generates these warning messages.\n\n569\n00:27:27.270 --> 00:27:31.250\nSo if the maintenance window is midnight\nto 3, somewhere in between midnight and\n\n570\n00:27:31.250 --> 00:27:33.380\n3 AM, they'll get this warning\nmessage that will say,\n\n571\n00:27:33.380 --> 00:27:36.350\nyour mailbox is over its limit or\nyour mailbox is approaching its limit.\n\n572\n00:27:36.350 --> 00:27:38.310\nAnd they'll get that every single day.\n\n573\n00:27:38.310 --> 00:27:40.170\nThey could choose to ignore or\nthey could clean it up.\n\n574\n00:27:41.860 --> 00:27:44.800\nWe also specify retention\ninformation right here so I want\n\n575\n00:27:44.800 --> 00:27:49.450\nto keep deleted items for 14 days, I want\nto keep deleted mailboxes for 30 days.\n\n576\n00:27:49.450 --> 00:27:52.640\nI can tweak that if I want,\nor I can leave it like this.\n\n577\n00:27:52.640 --> 00:27:55.420\nMaybe I want it to be shorter or longer.\n\n578\n00:27:55.420 --> 00:27:58.883\nKeeping deleted items, if a user throws\nan item in the recycle bin and they empty\n\n579\n00:27:58.883 --> 00:28:02.449\nthe recycle bin, we actually retain it for\n14 more days, and they can recover it\n\n580\n00:28:02.449 --> 00:28:05.832\nright through Outlook if they want, or\nwe can recover it as administrators.\n\n581\n00:28:05.832 --> 00:28:08.862\nWe might wanna bump that up to something\nlarger to be able to maintain that.\n\n582\n00:28:08.862 --> 00:28:10.770\nYou'll see it will go up till 24,000 days.\n\n583\n00:28:10.770 --> 00:28:12.560\nThat's a long time.\n\n584\n00:28:12.560 --> 00:28:16.070\nThat's probably longer than\nany of our careers will be so\n\n585\n00:28:16.070 --> 00:28:17.710\nthat will get us covered.\n\n586\n00:28:17.710 --> 00:28:20.440\nAnother neat option down here\nis on the deleted mail boxes.\n\n587\n00:28:20.440 --> 00:28:22.640\nYou can say I wanna hold\nany deleted mailbox for\n\n588\n00:28:22.640 --> 00:28:25.740\n30 days, but then you can turn\non this other option that says\n\n589\n00:28:25.740 --> 00:28:30.220\neven if it's been more than 30 days, keep\nthe mailbox if a backup hasn't been run.\n\n590\n00:28:30.220 --> 00:28:33.280\nAnd that way we can ensure that a copy\nof this mailbox is still in a backup\n\n591\n00:28:33.280 --> 00:28:37.200\nsomewhere, so that's a neat little\noption to be able to turn on.\n\n592\n00:28:37.200 --> 00:28:38.620\nAnd here's that warning message interval.\n\n593\n00:28:38.620 --> 00:28:40.450\nYou'll see it's set to midnight here.\n\n594\n00:28:40.450 --> 00:28:42.100\nWe can set when those messages go out.\n\n595\n00:28:43.950 --> 00:28:45.370\nAnd then last we've got\nour client settings.\n\n596\n00:28:45.370 --> 00:28:47.340\nI'm going to talk about this\nin the address book episode.\n\n597\n00:28:47.340 --> 00:28:50.720\nWe can define what offline address book\nour end users are going to make use of.\n\n598\n00:28:50.720 --> 00:28:52.410\nI'm just going to leave that be for\nright now.\n\n599\n00:28:53.482 --> 00:28:56.020\nAll right, so those are all different\nthings that we can tweak in our\n\n600\n00:28:56.020 --> 00:28:58.800\nmailbox databases and get them set up.\n\n601\n00:28:58.800 --> 00:29:01.080\nNow I kinda talked a long time on that.\n\n602\n00:29:01.080 --> 00:29:02.640\nWe covered some really important stuff.\n\n603\n00:29:02.640 --> 00:29:05.490\nI have more I wanna talk about\non mailbox databases though,\n\n604\n00:29:05.490 --> 00:29:07.930\nespecially when it comes\nto file system tuning.\n\n605\n00:29:07.930 --> 00:29:11.380\nThere's some stuff we can do on our server\nto make it perform at its peak, and\n\n606\n00:29:11.380 --> 00:29:12.250\nit's really important.\n\n607\n00:29:12.250 --> 00:29:14.810\nSo I wanna make sure I tackle that and\nI take my time with it.\n\n608\n00:29:14.810 --> 00:29:16.380\nSo let's do a part two to this episode.\n\n609\n00:29:16.380 --> 00:29:19.630\nWe covered mailbox databases here,\nthe basics, getting one created and\n\n610\n00:29:19.630 --> 00:29:20.930\nthe basic settings.\n\n611\n00:29:20.930 --> 00:29:23.730\nBut I wanna do some more on tweaking and\nperformance, so definitely stay tuned for\n\n612\n00:29:23.730 --> 00:29:26.360\nthat, but for now, we'll go ahead and\nwrap this episode up.\n\n613\n00:29:26.360 --> 00:29:28.250\nAll right, well,\nI hope you guys enjoyed this one.\n\n614\n00:29:28.250 --> 00:29:31.141\nStay tuned for part two,\nit's definitely coming up next.\n\n615\n00:29:31.141 --> 00:29:34.587\nBut for now, signing off for ITProTV,\nI'm your host Don Pezet, and\n\n616\n00:29:34.587 --> 00:29:35.843\nI'll see you next time.\n\n617\n00:29:35.843 --> 00:29:41.740\n[MUSIC]\n\n",
          "vimeoId": "135992745"
        },
        {
          "description": "In this episode, Don continues discussing mailbox databases. He begins by demonstrating how to move mailbox databases to alternate locations. He then discusses tuning the file system to ensure that the database operates at optimal efficiency.",
          "length": "1679",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases_pt2-081115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases_pt2-081115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-1-mailbox_databases_pt2-081115-1-sm.jpg",
          "title": "Mailbox Databases Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.069 --> 00:00:11.922\nAll right.\n\n3\n00:00:11.922 --> 00:00:14.310\nGood morning, good afternoon and\ngood evening, and welcome back.\n\n4\n00:00:14.310 --> 00:00:17.349\nTo another episode of ITProTV,\nI'm your host, Don Pezet.\n\n5\n00:00:17.349 --> 00:00:20.020\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.020 --> 00:00:24.390\nIn this episode, we're actually picking\nup where our last episode left off.\n\n7\n00:00:24.390 --> 00:00:27.880\nWe started our mailbox databases and\nwell I just talked too much.\n\n8\n00:00:27.880 --> 00:00:28.770\nSo, in this episode,\n\n9\n00:00:28.770 --> 00:00:32.590\nwe're going to continue on with\npart two of mailbox databases.\n\n10\n00:00:32.590 --> 00:00:35.830\nWe got a chance to see in the last\nepisode how to create a database and\n\n11\n00:00:35.830 --> 00:00:37.520\nall the files that are kind\nof involved in it.\n\n12\n00:00:37.520 --> 00:00:39.880\nI talked a little bit about\ntransaction logs and databases and\n\n13\n00:00:39.880 --> 00:00:41.170\nall that good stuff.\n\n14\n00:00:41.170 --> 00:00:45.610\nIn this episode, I wanna talk about\ntuning those databases for performance.\n\n15\n00:00:45.610 --> 00:00:49.710\nNow, by default, Exchange is taking\ncare of indexing the data, and\n\n16\n00:00:49.710 --> 00:00:51.040\ndefragmenting the database.\n\n17\n00:00:51.040 --> 00:00:53.280\nSo that stuff we really\ndon't have to worry about.\n\n18\n00:00:53.280 --> 00:00:57.190\nBut what we do have to worry\nabout is disk contention.\n\n19\n00:00:57.190 --> 00:01:03.250\nWhen you create databases, by default it's\ngonna throw them into C:/Program Files,\n\n20\n00:01:03.250 --> 00:01:05.990\nit's gonna throw them\nright on your C:/ drive.\n\n21\n00:01:05.990 --> 00:01:09.150\nAnd that means, at a minimum,\nif you just have one mailbox database,\n\n22\n00:01:09.150 --> 00:01:13.520\nat a minimum, it's gonna be contending for\ndisk access with your operating system.\n\n23\n00:01:13.520 --> 00:01:17.030\nSo the database and your operating\nsystem both fighting to read and\n\n24\n00:01:17.030 --> 00:01:18.050\nwrite to the same hard drive.\n\n25\n00:01:18.050 --> 00:01:21.330\nIf you have more than\none mailbox database,\n\n26\n00:01:21.330 --> 00:01:25.230\nthey are contending against each other for\naccess to that file system.\n\n27\n00:01:25.230 --> 00:01:28.440\nSo we're probably going to\nwant to spread our data out.\n\n28\n00:01:28.440 --> 00:01:32.060\nWe're gonna move our databases\noff to separate hard drives, so\n\n29\n00:01:32.060 --> 00:01:34.750\nthey can have exclusive\naccess to those drives.\n\n30\n00:01:34.750 --> 00:01:37.730\nAll right now, when I talk about\ndiscontention, what am I talking about?\n\n31\n00:01:37.730 --> 00:01:39.540\nWell when we have a hard drive,\n\n32\n00:01:39.540 --> 00:01:43.570\na hard drive, it's got a spinning disk\ninside of it or it might be SSD, right?\n\n33\n00:01:43.570 --> 00:01:44.960\nIt might be solid state.\n\n34\n00:01:44.960 --> 00:01:49.060\nBut, either way, you've got to go through\na controller to then access the data.\n\n35\n00:01:49.060 --> 00:01:51.880\nOn a solid state drive,\nthe controller can only handle so\n\n36\n00:01:51.880 --> 00:01:53.700\nmany operations at one time.\n\n37\n00:01:53.700 --> 00:01:57.730\nSo you end up with a queue where people\nare waiting in line to access the drive.\n\n38\n00:01:57.730 --> 00:02:00.170\nIt's much worse on spinning disks.\n\n39\n00:02:00.170 --> 00:02:03.420\nOn a spinning disk, there's this\nmechanical head that moves back and\n\n40\n00:02:03.420 --> 00:02:05.230\nforth on the disk to read data.\n\n41\n00:02:05.230 --> 00:02:09.160\nThat mechanical head can only\nbe in one place at a time.\n\n42\n00:02:09.160 --> 00:02:15.140\nSo a mechanical spinning disk can\nonly handle one operation at a time.\n\n43\n00:02:15.140 --> 00:02:16.900\nAnd that creates a big queue.\n\n44\n00:02:16.900 --> 00:02:20.110\nSSD can do a lot more and it does a lot\nfaster, that's definitely better.\n\n45\n00:02:20.110 --> 00:02:24.680\nSo again we might shift our data over\nto those types of disks that do it.\n\n46\n00:02:24.680 --> 00:02:29.110\nIn addition to that we're probably worried\nabout redundancy because hard drives fail\n\n47\n00:02:29.110 --> 00:02:30.540\nall the time.\n\n48\n00:02:30.540 --> 00:02:33.570\nIt's a rare hard drive these days that\nwill last you more than three years.\n\n49\n00:02:33.570 --> 00:02:37.430\nSo knowing that disk failure is eminent,\nwe need a plan for that.\n\n50\n00:02:37.430 --> 00:02:41.360\nSo we're typically going to put our\ndatabases on top of RAID arrays.\n\n51\n00:02:41.360 --> 00:02:44.330\nWell RAID,\nthe redundant array of independent disks,\n\n52\n00:02:44.330 --> 00:02:46.550\nthat can give you resiliency\nseveral different ways.\n\n53\n00:02:46.550 --> 00:02:48.910\nAnd we need to understand how\nthey each affect the database.\n\n54\n00:02:48.910 --> 00:02:52.530\nSo I wanna spend a minute to kinda go\nthrough the different RAID technologies.\n\n55\n00:02:52.530 --> 00:02:55.320\nAnd how they affect Microsoft Exchange.\n\n56\n00:02:55.320 --> 00:02:59.290\nBecause we all probably, by this point you\nguys probably already know RAID 0, RAID 1,\n\n57\n00:02:59.290 --> 00:03:01.120\nRAID 5, you know, they're not new.\n\n58\n00:03:01.120 --> 00:03:03.180\nBut, how they affect\nExchange is important.\n\n59\n00:03:04.200 --> 00:03:06.480\nAnd when we talk about\nhow it affects Exchange,\n\n60\n00:03:06.480 --> 00:03:09.930\nwe have to remember that there's\ntwo pieces of our mailbox database.\n\n61\n00:03:09.930 --> 00:03:13.890\nThere's the database itself, and\nthere's the transaction log files.\n\n62\n00:03:13.890 --> 00:03:17.790\nThe database, we are reading\nfrom the database constantly.\n\n63\n00:03:17.790 --> 00:03:19.890\nEverybody checking their email,\ngoing in there.\n\n64\n00:03:19.890 --> 00:03:22.890\nWe read from that database all the time.\n\n65\n00:03:22.890 --> 00:03:25.270\nSo read operations are really important.\n\n66\n00:03:25.270 --> 00:03:28.280\nWe write to the database also,\nbut not as often.\n\n67\n00:03:28.280 --> 00:03:31.270\nIn fact,\nend users never write to the database.\n\n68\n00:03:31.270 --> 00:03:34.380\nEnd users all write to\nthe transaction log files.\n\n69\n00:03:34.380 --> 00:03:37.920\nAnd then it's the system that writes\nfrom the transaction log files into\n\n70\n00:03:37.920 --> 00:03:38.800\nthe database.\n\n71\n00:03:38.800 --> 00:03:42.020\nSo it's really just one person\nwriting to the database.\n\n72\n00:03:42.020 --> 00:03:45.250\nWhereas you might have thousands of\npeople reading from the database.\n\n73\n00:03:45.250 --> 00:03:48.610\nOnly one person, the Exchange service,\nis writing to the database itself.\n\n74\n00:03:48.610 --> 00:03:51.330\nSo the reads and\nwrites are a little weird.\n\n75\n00:03:51.330 --> 00:03:54.090\nYour transaction logs\nare very write heavy.\n\n76\n00:03:54.090 --> 00:03:56.410\nYour database is very read heavy.\n\n77\n00:03:56.410 --> 00:03:59.040\nAnd so\nthe file systems need to be different.\n\n78\n00:03:59.040 --> 00:04:00.180\nYou can put the database and\n\n79\n00:04:00.180 --> 00:04:02.710\nthe transaction log files in\nthe same folder if you want.\n\n80\n00:04:02.710 --> 00:04:03.590\nIn fact, that's the default.\n\n81\n00:04:03.590 --> 00:04:05.920\nRight here,\nI'll take this Exchange server.\n\n82\n00:04:05.920 --> 00:04:06.990\nAnd here's an Exchange server.\n\n83\n00:04:06.990 --> 00:04:08.900\nI did a default install on it.\n\n84\n00:04:08.900 --> 00:04:13.637\nAnd right here in\nC:\\ProgramFiles\\Microsoft\\ExchangeServer\\-\n\n85\n00:04:13.637 --> 00:04:19.420\nV15\\Mailbox we can see the Mailbox\nDatabase and here's all the files.\n\n86\n00:04:19.420 --> 00:04:23.700\nAnd I've got, I'll find it here,\nthe E00, let's see here we go,\n\n87\n00:04:23.700 --> 00:04:30.100\nhere is Mailbox Database\n201376320 whatever .edb.\n\n88\n00:04:30.100 --> 00:04:31.470\nThat's the exchange database.\n\n89\n00:04:31.470 --> 00:04:33.740\nThat's going to be really read heavy.\n\n90\n00:04:33.740 --> 00:04:36.160\nThen see all these transaction log files?\n\n91\n00:04:36.160 --> 00:04:38.260\nThose transaction log files\nare going to be very write heavy and\n\n92\n00:04:38.260 --> 00:04:40.060\nthey're right here in the same place.\n\n93\n00:04:40.060 --> 00:04:44.630\nSo now, when users are trying to read from\nthe drive and other people are trying to\n\n94\n00:04:44.630 --> 00:04:48.320\nwrite to the transaction log files,\nthey're fighting for access to that disk.\n\n95\n00:04:48.320 --> 00:04:49.410\nThis isn't great.\n\n96\n00:04:49.410 --> 00:04:52.670\nFor a small environment, maybe even a\nmedium environment that might be okay, but\n\n97\n00:04:52.670 --> 00:04:56.610\nwhen you start getting into the thousands\nof mailboxes, or tens of thousands,\n\n98\n00:04:56.610 --> 00:04:59.710\nhundreds of thousands of mailboxes,\nthis will kill your server.\n\n99\n00:04:59.710 --> 00:05:01.450\nDisperformance will be your big problem.\n\n100\n00:05:01.450 --> 00:05:02.630\nSo, we need a better solution.\n\n101\n00:05:03.780 --> 00:05:07.680\nAt a minimum, it's recommended\nto split your database and\n\n102\n00:05:07.680 --> 00:05:10.680\ntransaction log files onto\nseparate hard drives, all right?\n\n103\n00:05:10.680 --> 00:05:14.340\nIf my databases are on one set of hard\ndrives, and my transaction log files\n\n104\n00:05:14.340 --> 00:05:17.590\nare on a different set,\nmy reads are happening on set 1,\n\n105\n00:05:17.590 --> 00:05:21.230\nmy writes are happening on set 2,\nthings are spread out.\n\n106\n00:05:21.230 --> 00:05:23.030\nWe get better disk access.\n\n107\n00:05:23.030 --> 00:05:25.990\nIf I go a step further and\nseparate my mailbox databases themselves,\n\n108\n00:05:25.990 --> 00:05:28.450\neach mailbox database getting\nits own set of hard drives.\n\n109\n00:05:28.450 --> 00:05:31.220\nThat's even better for\nreducing contention, but\n\n110\n00:05:31.220 --> 00:05:33.710\nyou guys are probably\nstarting to see dollar signs.\n\n111\n00:05:33.710 --> 00:05:34.750\nIt gets more and more expensive.\n\n112\n00:05:34.750 --> 00:05:36.320\nYou gotta buy this extra hardware, but\n\n113\n00:05:36.320 --> 00:05:38.930\nif performance is your concern,\nyou gotta do it.\n\n114\n00:05:38.930 --> 00:05:42.410\nYou've gotta make sure you've got the\navailable through put to be able to read\n\n115\n00:05:42.410 --> 00:05:44.420\nand write the data to your system.\n\n116\n00:05:44.420 --> 00:05:46.750\nThe other thing to remember\nis if we have a failure,\n\n117\n00:05:47.880 --> 00:05:50.230\nwe can always restore\nour last full backup.\n\n118\n00:05:50.230 --> 00:05:51.500\nAnd that'll restore this guy right here.\n\n119\n00:05:51.500 --> 00:05:53.400\nThat'll restore the database, but\n\n120\n00:05:53.400 --> 00:05:58.390\nI lose any email that happened since\nthat full backup was taken, right?\n\n121\n00:05:58.390 --> 00:06:02.890\nBut if I can recover my transaction logs,\nI can get right to the point of failure.\n\n122\n00:06:02.890 --> 00:06:06.810\nWell, if I just lost my database, and the\ntransactions logs are on the same drive as\n\n123\n00:06:06.810 --> 00:06:09.510\nthe database,\nI probably lost them too, didn't I?\n\n124\n00:06:09.510 --> 00:06:11.040\nSo there's not really\na point in keeping them,\n\n125\n00:06:11.040 --> 00:06:12.970\nmight as well turn on circular logging.\n\n126\n00:06:12.970 --> 00:06:16.030\nBut if I put my transaction logs\non separate hard drives, and\n\n127\n00:06:16.030 --> 00:06:19.030\nI lose the array that has the database.\n\n128\n00:06:19.030 --> 00:06:22.120\nI can restore a full\nbackup of my database.\n\n129\n00:06:22.120 --> 00:06:25.270\nAnd then I can salvage the transaction\nlogs that are still right here on\n\n130\n00:06:25.270 --> 00:06:26.690\na separate set of hard drives.\n\n131\n00:06:26.690 --> 00:06:29.470\nBring those over, and I can reapply\n\n132\n00:06:29.470 --> 00:06:32.470\nthose changes to the database to bring\nit right to the point of failure.\n\n133\n00:06:32.470 --> 00:06:35.100\nI don't lose any email,\nand that's a great thing.\n\n134\n00:06:35.100 --> 00:06:37.510\nSo, separating these files out.\n\n135\n00:06:37.510 --> 00:06:40.030\nWhen I installed this,\nwell, here I'll show you.\n\n136\n00:06:40.030 --> 00:06:44.690\nIf we go back into our Exchange admin\ncenter, we can go down to servers and\n\n137\n00:06:44.690 --> 00:06:46.060\ndatabases.\n\n138\n00:06:46.060 --> 00:06:48.130\nWhen you add in a database,\n\n139\n00:06:48.130 --> 00:06:52.330\nit actually gives you the chance right\nhere to specify alternate paths.\n\n140\n00:06:52.330 --> 00:06:54.750\nWe can put these in different places.\n\n141\n00:06:54.750 --> 00:06:57.840\nThe problem is a lot of us don't think\nabout it when you create the database.\n\n142\n00:06:57.840 --> 00:06:59.580\nThink about it after the fact.\n\n143\n00:06:59.580 --> 00:07:02.110\nSo you go to create the database, and\n\n144\n00:07:02.110 --> 00:07:06.300\nthen a year later, two years later things\nhave grown, it starts getting slow, and\n\n145\n00:07:06.300 --> 00:07:08.930\nyou go, boy I really wish I\nwould have separated those out.\n\n146\n00:07:08.930 --> 00:07:11.590\nWell, you can move them after the fact.\n\n147\n00:07:11.590 --> 00:07:13.130\nYou can't do it through the GUI.\n\n148\n00:07:13.130 --> 00:07:17.765\nSo if I were to take my sales database\nhere and edit that and go in the path.\n\n149\n00:07:17.765 --> 00:07:18.755\nSee how it's grayed out?\n\n150\n00:07:18.755 --> 00:07:19.745\nIt won't let me change that.\n\n151\n00:07:19.745 --> 00:07:22.065\nEven if I unmount the database\nI can't change that.\n\n152\n00:07:22.065 --> 00:07:23.505\nIt's kinda stuck where it is.\n\n153\n00:07:23.505 --> 00:07:28.305\nBut we can drop to the Powershell and\nwe can move that database somewhere else.\n\n154\n00:07:28.305 --> 00:07:32.635\nSo if I take this server for\nexample, let me go here into my\n\n155\n00:07:32.635 --> 00:07:36.395\ncomputer management utility, I've got\na couple of hard drives in this server.\n\n156\n00:07:36.395 --> 00:07:38.260\nSo I can start to make use of those.\n\n157\n00:07:38.260 --> 00:07:40.920\nSo I can jump in here and\ngo down to my disk management.\n\n158\n00:07:40.920 --> 00:07:44.470\nAnd you'll see I have a C: drive,\nthat's where my operating system is.\n\n159\n00:07:44.470 --> 00:07:46.980\nBut then I've got these extra\nhard drives sitting down here.\n\n160\n00:07:46.980 --> 00:07:49.430\nI've got a 20 gig E: drive, and\n\n161\n00:07:49.430 --> 00:07:54.715\na looks like a 128 gig F: drive that\nI'm not really using for anything.\n\n162\n00:07:54.715 --> 00:07:57.506\nSo I can take these and\nI can move my other data to them.\n\n163\n00:07:57.506 --> 00:07:59.384\nSo I can take that E: drive,\n\n164\n00:07:59.384 --> 00:08:03.546\nfor example, and I might call\nthat my transaction logs drive.\n\n165\n00:08:03.546 --> 00:08:06.486\nSo I'm gonna start putting my\ntransaction logs on the E drive.\n\n166\n00:08:06.486 --> 00:08:10.907\nAnd then I can take my F drive and\nI could make that my database drives, or\n\n167\n00:08:10.907 --> 00:08:13.430\nI could call this my Mailbox Databases.\n\n168\n00:08:14.830 --> 00:08:16.210\nAll right, so I'm just kinda naming them.\n\n169\n00:08:16.210 --> 00:08:16.970\nYou don't have to name them.\n\n170\n00:08:16.970 --> 00:08:18.530\nI'm just doing it so\nI can keep it straight.\n\n171\n00:08:18.530 --> 00:08:21.570\nSo I've got an E drive and an F drive, and\nthat's where I wanna start storing those,\n\n172\n00:08:21.570 --> 00:08:26.680\nseparating these out, trying to\nremove some of that disk contention.\n\n173\n00:08:26.680 --> 00:08:31.242\nAll right, so then I can jump down\ninto my PowerShell and I'll fire.\n\n174\n00:08:31.242 --> 00:08:33.220\nWait, this is important.\n\n175\n00:08:33.220 --> 00:08:36.170\nI need to use some Exchange\ncommandlets and the regular PowerShell\n\n176\n00:08:36.170 --> 00:08:39.070\ndoesn't have them, so I need to make\nsure I run the Exchange PowerShell.\n\n177\n00:08:39.070 --> 00:08:41.430\nSo let me just jump here\nto my start screen and\n\n178\n00:08:41.430 --> 00:08:43.820\nI'll fire up\nthe Exchange Management Shell.\n\n179\n00:08:43.820 --> 00:08:47.255\nRemember the Exchange Management Shell is\njust like the regular PowerShell except\n\n180\n00:08:47.255 --> 00:08:50.150\nthat it's got all the Exchange\ncommandlets added to it.\n\n181\n00:08:50.150 --> 00:08:51.620\nI'm doing it here on the server.\n\n182\n00:08:51.620 --> 00:08:54.001\nI could have done like\na PSremote from a client and\n\n183\n00:08:54.001 --> 00:08:57.153\nconnected up the same way that I\nhave the commandlets there too.\n\n184\n00:08:57.153 --> 00:09:01.857\nSo this will get me in here and\nthen I'll bump that font size up a bit so\n\n185\n00:09:01.857 --> 00:09:04.511\nwe'll be able to see what I'm doing.\n\n186\n00:09:04.511 --> 00:09:07.970\nSince that's not necessarily\nsuper legible like it is.\n\n187\n00:09:07.970 --> 00:09:09.641\nAnd [SOUND] there we go.\n\n188\n00:09:09.641 --> 00:09:15.013\nAll right, so what we're looking at here\nis just the Exchange Management Shell and\n\n189\n00:09:15.013 --> 00:09:17.250\nI wanna move that Sales database.\n\n190\n00:09:17.250 --> 00:09:19.960\nWell, I'm gonna make a couple\nof folders here real quick.\n\n191\n00:09:19.960 --> 00:09:24.880\nI'm gonna make E:\\TL, that's where I'm\ngonna be putting my transaction logs.\n\n192\n00:09:24.880 --> 00:09:29.700\nAnd then I'm gonna make F:\\DB, that's\nwhere I'm gonna be putting my databases.\n\n193\n00:09:29.700 --> 00:09:32.370\nAnd now I can start to\nmove these guys around.\n\n194\n00:09:32.370 --> 00:09:36.840\nAnd the command for\nthat is the Move-DatabasePath.\n\n195\n00:09:36.840 --> 00:09:39.600\nBut the problem with that command,\nMove-DatabasePath,\n\n196\n00:09:39.600 --> 00:09:42.290\nI have to know the name of\nthe database and all that.\n\n197\n00:09:42.290 --> 00:09:47.495\nSo when I do this, I almost always\nstart with just Get-MailboxDatabase,\n\n198\n00:09:47.495 --> 00:09:49.855\nand that's gonna give me a list\nof all my mailbox databases.\n\n199\n00:09:49.855 --> 00:09:53.355\nIt will give you a list for the whole\norganization, so you'll see everything.\n\n200\n00:09:53.355 --> 00:09:56.575\nAnd I can see there's that default\ndatabase that was created, and\n\n201\n00:09:56.575 --> 00:09:59.555\nthere's the Sales database that I made,\nand that's the one that I wanna move.\n\n202\n00:09:59.555 --> 00:10:01.705\nI'm gonna move that one around.\n\n203\n00:10:01.705 --> 00:10:05.859\nSo now I can come in and\nI can say, Move-DatabasePath, and\n\n204\n00:10:05.859 --> 00:10:09.160\nI can specify the identity,\nwhich is sales.\n\n205\n00:10:09.160 --> 00:10:11.810\nIt's my sales database\nthat I'm gonna be moving.\n\n206\n00:10:11.810 --> 00:10:13.560\nAnd then I can tell it what\nI'm gonna be moving around.\n\n207\n00:10:13.560 --> 00:10:18.480\nI'm gonna say my EdbFilePath, and\nI'll specify where I want that to go.\n\n208\n00:10:18.480 --> 00:10:23.741\nWell, I want that to\ngo to F:\\DB\\Sales.edb.\n\n209\n00:10:23.741 --> 00:10:26.230\nThat's where I want that one to end up,\nso I'm gonna move it there.\n\n210\n00:10:27.490 --> 00:10:36.800\nThen I can say -LogFolderPath and I can\nspecify where I want this one to go to.\n\n211\n00:10:36.800 --> 00:10:39.660\nNow my log folder path I want it\nto be a different set of drives.\n\n212\n00:10:39.660 --> 00:10:44.930\nAnd so this one I'm gonna\nmove to E:\\TL\\ and then you\n\n213\n00:10:44.930 --> 00:10:48.440\ncan give it a subfolder or you can just\nthrow it right into there if I wanted.\n\n214\n00:10:48.440 --> 00:10:50.500\nI probably should have\ncreated a sales folder, and\n\n215\n00:10:50.500 --> 00:10:51.840\nI don't remember if it'll create it for\nme.\n\n216\n00:10:51.840 --> 00:10:53.270\nSo we'll find out right here.\n\n217\n00:10:53.270 --> 00:10:56.470\nSo I'm just gonna create a folder\ncalled Sales to stick it in there.\n\n218\n00:10:56.470 --> 00:11:00.250\nSo now I'm telling it I\nwant to move the database.\n\n219\n00:11:00.250 --> 00:11:03.630\nAnd when I run that, it's going to\nreach in there and it's gonna move it.\n\n220\n00:11:03.630 --> 00:11:05.420\nSo there it goes, moving that database.\n\n221\n00:11:05.420 --> 00:11:08.500\nIt's telling me that am I\nsure that I want to do it?\n\n222\n00:11:08.500 --> 00:11:11.820\nSo I'll go ahead and say yes to that,\nand there it goes, moving that over.\n\n223\n00:11:11.820 --> 00:11:14.640\nIt's telling me, To perform the operation\nit must be temporarily dismounted.\n\n224\n00:11:14.640 --> 00:11:16.397\nIt's going to kick my users out, so\n\n225\n00:11:16.397 --> 00:11:19.330\nthis is definitely\nan after-hours type operation.\n\n226\n00:11:19.330 --> 00:11:22.120\nWe don't want people in the database and\nthen we kick them out.\n\n227\n00:11:22.120 --> 00:11:23.770\nThey'll see it as Outlook going offline,\n\n228\n00:11:23.770 --> 00:11:25.570\nand then when the move is\ndone it'll come back online.\n\n229\n00:11:25.570 --> 00:11:27.990\nBut the move could take a while,\ncouldn't it?\n\n230\n00:11:27.990 --> 00:11:30.010\nIf you've got a mailbox database\nthat's a terabyte in size,\n\n231\n00:11:30.010 --> 00:11:31.730\nit's gonna take a while to copy.\n\n232\n00:11:31.730 --> 00:11:33.220\nSo we definitely wanna plan around that.\n\n233\n00:11:33.220 --> 00:11:35.400\nI'm gonna go ahead and say yes to do it.\n\n234\n00:11:35.400 --> 00:11:37.810\nAnd there it goes.\nIt's gonna dismount the database,\n\n235\n00:11:37.810 --> 00:11:40.410\nit's gonna copy the files\nto the new location, and\n\n236\n00:11:40.410 --> 00:11:43.080\nit's gonna remount the database and\nbring back it online.\n\n237\n00:11:43.080 --> 00:11:44.735\nAnd now my database and\n\n238\n00:11:44.735 --> 00:11:47.940\nmy transaction log files will be spread\nout on these separate hard drives.\n\n239\n00:11:47.940 --> 00:11:53.300\nAnd that was all done with the\nMove-DatabasePath PowerShell commandlet.\n\n240\n00:11:53.300 --> 00:11:57.360\nNow it doesn't take too terribly\nlong to do it for a small database.\n\n241\n00:11:57.360 --> 00:11:59.110\nNow pay attention to\nthe time it's taking mine.\n\n242\n00:11:59.110 --> 00:12:01.370\nNow my disk IO is kind\nof constrained here.\n\n243\n00:12:01.370 --> 00:12:05.616\nI actually only have one hard drive, so\nyou'll see a little contention there, but\n\n244\n00:12:05.616 --> 00:12:09.331\nmy mailbox database, it was only,\nI think it was like 250MB in size.\n\n245\n00:12:09.331 --> 00:12:11.040\nIt was very, very small.\n\n246\n00:12:11.040 --> 00:12:14.790\nSo imagine if it's a terabyte or\neven 50 gigabytes,\n\n247\n00:12:14.790 --> 00:12:16.480\nit's going to take longer than that.\n\n248\n00:12:16.480 --> 00:12:20.900\nSo it could take an hour, it could take\nhours your mail system might be offline.\n\n249\n00:12:20.900 --> 00:12:22.938\nYou're not losing email during this time.\n\n250\n00:12:22.938 --> 00:12:24.710\nYour mail queues are still running, so\n\n251\n00:12:24.710 --> 00:12:27.710\nany incoming email is just getting\nstuck in the queue and sitting there.\n\n252\n00:12:27.710 --> 00:12:32.030\nSo you're not losing email, but it's gonna\nhave to take time to kinda rearrange.\n\n253\n00:12:32.030 --> 00:12:33.930\nAnd then when the database\ncomes back online,\n\n254\n00:12:33.930 --> 00:12:36.820\nwhich mine just did,\nall the email in the queue gets delivered.\n\n255\n00:12:36.820 --> 00:12:38.080\nSo I don't lose email.\n\n256\n00:12:38.080 --> 00:12:39.530\nJust users can't get into their email.\n\n257\n00:12:41.300 --> 00:12:44.190\nAll right, when it's done,\nnow my database should be moved.\n\n258\n00:12:44.190 --> 00:12:46.910\nIf I go back to my\nExchange Management Center.\n\n259\n00:12:46.910 --> 00:12:49.970\nAnd I'll take Sales here,\nand I'm gonna edit it.\n\n260\n00:12:49.970 --> 00:12:56.520\nWhen I go into its settings,\nit shows that new path, F:\\DB\\Sales.edb.\n\n261\n00:12:56.520 --> 00:12:59.560\nSo that data moved and\nI can go verify that on the server too\n\n262\n00:12:59.560 --> 00:13:01.570\nif I browse around on the hard\ndrive of this server.\n\n263\n00:13:03.110 --> 00:13:07.020\nLet me just jump over to my F drive, and\n\n264\n00:13:07.020 --> 00:13:11.590\nthere's that DB folder and\nthere's Sales.edb, it's about 250MB.\n\n265\n00:13:11.590 --> 00:13:16.510\nAnd if I go to my E drive,\nthere's the TL folder I made and\n\n266\n00:13:16.510 --> 00:13:19.920\nthe Sales folder, and\nthere's the transaction logs for it.\n\n267\n00:13:19.920 --> 00:13:22.850\nAnd notice it didn't flush my\ntransaction logs, it just moved them.\n\n268\n00:13:22.850 --> 00:13:24.565\nMoved them to the new location and\noff it went.\n\n269\n00:13:25.735 --> 00:13:26.805\nNow I say it moved.\n\n270\n00:13:26.805 --> 00:13:28.925\nIt actually does a copy operation so\n\n271\n00:13:28.925 --> 00:13:31.905\nthat if something goes wrong it can\nalways just fail back to the source.\n\n272\n00:13:31.905 --> 00:13:34.955\nAnd it's only when the copy is done\nthat it removes the original, so\n\n273\n00:13:34.955 --> 00:13:38.465\nit's not a true move,\nit's a copy and then delete.\n\n274\n00:13:39.505 --> 00:13:41.375\nBut there we go,\nwe've moved off to separate drives.\n\n275\n00:13:41.375 --> 00:13:43.325\nNow I've alleviated some\nof my disk contention.\n\n276\n00:13:44.520 --> 00:13:45.860\nThat is a key thing.\n\n277\n00:13:45.860 --> 00:13:47.270\nWhen you're setting up\nan Exchange Server for\n\n278\n00:13:47.270 --> 00:13:51.210\na large organization, you're typically\ngonna want four sets of drives.\n\n279\n00:13:51.210 --> 00:13:53.520\nYou want a set of drives for\nthe operating system.\n\n280\n00:13:53.520 --> 00:13:55.980\nYou want a set of drives for\nyour page file.\n\n281\n00:13:55.980 --> 00:13:58.410\nYou want a set of drives for\nyour transaction logs.\n\n282\n00:13:58.410 --> 00:14:01.470\nAnd you want a set of drives for\nyour mailbox database.\n\n283\n00:14:01.470 --> 00:14:03.260\nFour sets of drives.\n\n284\n00:14:03.260 --> 00:14:07.490\nNow I say sets because you don't\nwant just one hard drive for each.\n\n285\n00:14:07.490 --> 00:14:08.670\nYou want them to be RAID arrays.\n\n286\n00:14:08.670 --> 00:14:10.420\nYou want them to be redundant or\noptimized, so\n\n287\n00:14:10.420 --> 00:14:12.670\nthere's some additional\nconsiderations there.\n\n288\n00:14:12.670 --> 00:14:15.780\nThe other thing is,\ndon't think about partitions.\n\n289\n00:14:15.780 --> 00:14:17.680\nJust put partitions out of your mind.\n\n290\n00:14:17.680 --> 00:14:19.280\nSome people say all right,\nI'll take a drive and\n\n291\n00:14:19.280 --> 00:14:21.190\nI'll divide it into four partitions.\n\n292\n00:14:21.190 --> 00:14:23.780\nThe problem there is it's still one drive,\nright?\n\n293\n00:14:23.780 --> 00:14:26.810\nThat's basically what I've done here in\nmy lab is I've got this one partition.\n\n294\n00:14:26.810 --> 00:14:30.770\nSo when I'm writing to\npartition 1 versus partition 2,\n\n295\n00:14:30.770 --> 00:14:33.910\nI'm still using the same hardware and\nI still get the same contention.\n\n296\n00:14:33.910 --> 00:14:36.890\nSo partitions really don't help\nyou at all in Exchange land.\n\n297\n00:14:36.890 --> 00:14:38.470\nIt's just kind of a waste of time.\n\n298\n00:14:38.470 --> 00:14:40.190\nSo I'm really talking about\nseparate physical disks.\n\n299\n00:14:41.670 --> 00:14:44.090\nAll right, now in my case I threw\nthese to separate physical disks.\n\n300\n00:14:44.090 --> 00:14:46.340\nNow I'm optimized and I'm done, right?\n\n301\n00:14:46.340 --> 00:14:48.270\nWell, I can do better.\n\n302\n00:14:48.270 --> 00:14:51.390\nJust throwing it on a single\ndisk gives us two problems.\n\n303\n00:14:51.390 --> 00:14:53.810\nOne, you've got a single set of\nhardware working for you, so\n\n304\n00:14:53.810 --> 00:14:55.950\nyou have limited throughput.\n\n305\n00:14:55.950 --> 00:14:58.470\nThe other one is you've got\nsingle points of failure.\n\n306\n00:14:58.470 --> 00:14:59.980\nIf my E drive fails,\n\n307\n00:14:59.980 --> 00:15:03.380\nI just lost my transaction logs,\nmy database goes offline.\n\n308\n00:15:03.380 --> 00:15:08.130\nIf my F drive fails, I just lost my\ndatabase, database goes offline.\n\n309\n00:15:08.130 --> 00:15:11.090\nIf my C drive fails, I just lost my\noperating system, database goes offline.\n\n310\n00:15:11.090 --> 00:15:13.900\nSo any one of those failing will\nbring my whole system down.\n\n311\n00:15:13.900 --> 00:15:15.410\nI need redundancy.\n\n312\n00:15:15.410 --> 00:15:18.960\nThe problem is redundancy normally\ncomes at a cost of performance.\n\n313\n00:15:18.960 --> 00:15:22.790\nSo we have to find a balance\nbetween performance and redundancy,\n\n314\n00:15:22.790 --> 00:15:25.670\nand that's what RAID lets us\ndo is we get that choice.\n\n315\n00:15:25.670 --> 00:15:29.680\nSo let's take a look at some\noptions as far as using RAID.\n\n316\n00:15:29.680 --> 00:15:32.500\nThere's really four main types of\nRAID that we worry about today.\n\n317\n00:15:32.500 --> 00:15:35.480\nRAID 0, 1, 5 and 10.\n\n318\n00:15:35.480 --> 00:15:40.120\nRAID 0 is all about performance.\n\n319\n00:15:40.120 --> 00:15:42.960\nIf you want the fastest\nmailbox database or\n\n320\n00:15:42.960 --> 00:15:46.340\nthe fastest transaction logs,\nRAID 0 is your winner.\n\n321\n00:15:46.340 --> 00:15:48.420\nThis is gonna get you\nthe best performance.\n\n322\n00:15:48.420 --> 00:15:52.860\nWhen you do RAID 0, when you write\ndata to the drive, it's striped,\n\n323\n00:15:52.860 --> 00:15:54.690\nit's spread across multiple drives.\n\n324\n00:15:54.690 --> 00:15:56.260\nSo in this example I've got three drives.\n\n325\n00:15:56.260 --> 00:16:00.043\nAnd so when it takes data, it writes\nit and breaks it up into chunks, and\n\n326\n00:16:00.043 --> 00:16:04.220\nI get chunk one here, two here, three\nhere, spread across the three drives.\n\n327\n00:16:04.220 --> 00:16:06.741\nAnd then when it gets to chunk\nnumber four, it jumps right back.\n\n328\n00:16:06.741 --> 00:16:09.550\nAnd now we're on Drive 1 gets Block 4.\n\n329\n00:16:09.550 --> 00:16:10.910\nDrive 2 gets Block 5.\n\n330\n00:16:10.910 --> 00:16:13.070\nDrive 3 gets Block 6, and so on.\n\n331\n00:16:13.070 --> 00:16:15.210\nIt's spreading it across the drives.\n\n332\n00:16:15.210 --> 00:16:19.610\nThat means when I write, I've got three\npieces of hardware doing the write.\n\n333\n00:16:19.610 --> 00:16:22.090\nI can write three times as fast.\n\n334\n00:16:22.090 --> 00:16:24.350\nAnd when I read, I've got three\npieces of hardware doing the read.\n\n335\n00:16:24.350 --> 00:16:26.050\nI can read three times as fast.\n\n336\n00:16:26.050 --> 00:16:28.030\nSo RAID 0 is all about speed.\n\n337\n00:16:28.030 --> 00:16:30.620\nIf I have three drives,\nI'm three times as fast.\n\n338\n00:16:30.620 --> 00:16:32.050\nIf I have five drives, I'm five times.\n\n339\n00:16:32.050 --> 00:16:34.550\nIf I have ten drives,\nI'm ten times as fast.\n\n340\n00:16:34.550 --> 00:16:39.330\nSo the more hard drives the better\nwhen it comes to RAID 0, all right.\n\n341\n00:16:39.330 --> 00:16:40.830\nHere's the problem.\n\n342\n00:16:40.830 --> 00:16:45.180\nIf any one of these disks fail,\nall of my data is gone.\n\n343\n00:16:45.180 --> 00:16:45.800\nRight?\n\n344\n00:16:45.800 --> 00:16:48.730\nBecause, like here in my example I've\ngot three drives, if I lose one drive,\n\n345\n00:16:48.730 --> 00:16:50.350\nI just lost a third of my data.\n\n346\n00:16:50.350 --> 00:16:53.400\nIf I lose a third of my database,\nwhat am I left with?\n\n347\n00:16:53.400 --> 00:16:54.480\nA corrupt database.\n\n348\n00:16:54.480 --> 00:16:55.000\nRight?\n\n349\n00:16:55.000 --> 00:16:57.350\nSo, I don't get any redundancy.\n\n350\n00:16:57.350 --> 00:16:59.710\nIf I'm just looking for\nperformance, this is it.\n\n351\n00:16:59.710 --> 00:17:01.840\nNow, some of you guys have probably\nput this out of your mind now,\n\n352\n00:17:01.840 --> 00:17:04.130\nsaying well I'm never going to do RAID 0,\nlet me throw that out.\n\n353\n00:17:04.130 --> 00:17:05.300\nDon't do that.\n\n354\n00:17:05.300 --> 00:17:10.220\nBecause what if you're running something\nlike where you have database copies?\n\n355\n00:17:10.220 --> 00:17:12.130\nAll right?\nYes, I'm running RAID 0.\n\n356\n00:17:12.130 --> 00:17:15.060\nBut, I've got a copy of\nthe database on another server.\n\n357\n00:17:15.060 --> 00:17:17.950\nSo if I have a failure here,\nI just flip over to the copy.\n\n358\n00:17:17.950 --> 00:17:20.390\nIn the meantime, I get great performance.\n\n359\n00:17:20.390 --> 00:17:22.210\nI might not have a failure for\nthree years.\n\n360\n00:17:22.210 --> 00:17:26.160\nSo for three years, I get screaming\nperformance and when a failure happens,\n\n361\n00:17:26.160 --> 00:17:29.800\nI just failover to the other node\nversus building redundancy and\n\n362\n00:17:29.800 --> 00:17:32.830\nnow I get less performance for those three\nyears when everything was running fine.\n\n363\n00:17:32.830 --> 00:17:34.890\nRight?\nSo Raid 0.\n\n364\n00:17:34.890 --> 00:17:35.760\nDon't just throw that out.\n\n365\n00:17:35.760 --> 00:17:36.760\nDon't discount it.\n\n366\n00:17:36.760 --> 00:17:38.100\nIt's very practical.\n\n367\n00:17:38.100 --> 00:17:39.210\nIt's very fast.\n\n368\n00:17:39.210 --> 00:17:42.790\nIt will give you the best performance,\nthe more drives the better.\n\n369\n00:17:42.790 --> 00:17:46.370\nRaid 0 works great for pretty much\neverything, operating system, database,\n\n370\n00:17:46.370 --> 00:17:50.340\ntransaction logs, page file,\nit optimizes reads, it optimizes rights,\n\n371\n00:17:50.340 --> 00:17:51.690\nit's great for everything.\n\n372\n00:17:51.690 --> 00:17:55.190\nIt's just not redundant and so\na lot of people don't use it.\n\n373\n00:17:55.190 --> 00:17:59.608\nIf we want redundancy, our first\noption is RAID 1, RAID 1 is mirroring.\n\n374\n00:17:59.608 --> 00:18:05.210\nWith RAID 1, you write to one disk and\nit clones it to another disk.\n\n375\n00:18:05.210 --> 00:18:09.059\nSo here you'll see where I've written\nthe one disk block 1, block 2, block 3 and\n\n376\n00:18:09.059 --> 00:18:11.650\nthen those blocks just get\ncloned over to my other disk.\n\n377\n00:18:11.650 --> 00:18:13.610\nBlock 1, block 2, block 3.\n\n378\n00:18:13.610 --> 00:18:17.080\nIf the first disk fails, I got a second\ndisk and all my data is there.\n\n379\n00:18:17.080 --> 00:18:18.080\nIt's great.\n\n380\n00:18:18.080 --> 00:18:19.020\nRight?\n\n381\n00:18:19.020 --> 00:18:21.220\nWell, here's the thing about RAID 1,\n\n382\n00:18:21.220 --> 00:18:25.202\nrather mirrors, it doesn't really\nhelp you as far as performance.\n\n383\n00:18:25.202 --> 00:18:27.630\nWhen I write my data,\nwhat do I have to do?\n\n384\n00:18:27.630 --> 00:18:29.880\nI have it write it twice, right?\n\n385\n00:18:29.880 --> 00:18:32.080\nI write to one disk and\nI have write to the other one.\n\n386\n00:18:32.080 --> 00:18:34.180\nIt kind of hurts a little bit, right?\n\n387\n00:18:34.180 --> 00:18:35.680\nBut usually your RAID\ncontroller does that.\n\n388\n00:18:35.680 --> 00:18:37.680\nIt's on your hardware, so\nyou don't even notice it.\n\n389\n00:18:37.680 --> 00:18:41.555\nSo when you write to your disk, it's the\nsame as if you were writing to one disk.\n\n390\n00:18:41.555 --> 00:18:45.270\nAnd when you read from it, same thing,\nyou're reading from one disk.\n\n391\n00:18:45.270 --> 00:18:47.320\nSo you're really don't\nget any improvements.\n\n392\n00:18:47.320 --> 00:18:52.530\nRAID 0 was all about performance,\nRAID 1 is all about redundancy.\n\n393\n00:18:52.530 --> 00:18:54.500\nIf I'm just looking to get redundancy,\nI can get RAID 1.\n\n394\n00:18:54.500 --> 00:18:56.852\nIt will not change my performance at all.\n\n395\n00:18:56.852 --> 00:18:57.450\nMy performance,\n\n396\n00:18:57.450 --> 00:19:00.590\nmy system will be the same, assuming\nI have a hardware RAID controller.\n\n397\n00:19:00.590 --> 00:19:01.930\nIf you have a software RAID,\n\n398\n00:19:01.930 --> 00:19:04.900\nif you're just doing software\nRAID instead of hardware, don't.\n\n399\n00:19:04.900 --> 00:19:08.670\nIt sounds funny when we say that,\nbut software RAID is designed for\n\n400\n00:19:08.670 --> 00:19:09.620\nworkstations.\n\n401\n00:19:09.620 --> 00:19:12.750\nOn a server,\nsoftware RAID kills your throughput.\n\n402\n00:19:12.750 --> 00:19:15.600\nWhen you're writing to the disk,\nthe CPU has to get involved.\n\n403\n00:19:15.600 --> 00:19:17.830\nSo now you're moving\nstorage through your CPU.\n\n404\n00:19:17.830 --> 00:19:19.050\nIt's terrible for performance.\n\n405\n00:19:19.050 --> 00:19:20.020\nDon't do it on a server.\n\n406\n00:19:20.020 --> 00:19:21.500\nSoftware RAID is a bad idea.\n\n407\n00:19:21.500 --> 00:19:24.350\nBut hardware RAID,\nyou don't even notice it.\n\n408\n00:19:24.350 --> 00:19:25.580\nIt all happens in hardware.\n\n409\n00:19:25.580 --> 00:19:28.630\nIt moves right through the disk,\ngreat solution.\n\n410\n00:19:28.630 --> 00:19:29.240\nAll right.\nSo,\n\n411\n00:19:29.240 --> 00:19:32.610\nRAID 1 doesn't necessary seem\nlike the greatest thing, right?\n\n412\n00:19:32.610 --> 00:19:34.920\nWell, there are sometimes\nwhere it's useful.\n\n413\n00:19:34.920 --> 00:19:39.040\nIt's useful when you only\nhave one person writing.\n\n414\n00:19:39.040 --> 00:19:41.680\nSo, when are times that we\nonly have one person writing?\n\n415\n00:19:41.680 --> 00:19:43.640\nWell, there's things like our page file.\n\n416\n00:19:43.640 --> 00:19:44.960\nWho writes the page file?\n\n417\n00:19:44.960 --> 00:19:46.610\nYour operating system.\n\n418\n00:19:46.610 --> 00:19:49.080\nNo software is allowed to\ndirectly touch the page file.\n\n419\n00:19:49.080 --> 00:19:51.110\nIt all has to go through\nthe operating system, and\n\n420\n00:19:51.110 --> 00:19:53.800\nthen the OS writes to the page file.\n\n421\n00:19:53.800 --> 00:19:56.940\nSo is the OS ever trying to write to more\nthan one place in the page file at a time?\n\n422\n00:19:56.940 --> 00:19:57.670\nNo.\n\n423\n00:19:57.670 --> 00:19:59.510\nIt does it all in serial.\n\n424\n00:19:59.510 --> 00:20:03.830\nSo, when you have something like that,\nRAID 1 is really handy.\n\n425\n00:20:03.830 --> 00:20:08.640\nSo I'll oftentimes use RAID 1 for the\ndrives where I store my operating system,\n\n426\n00:20:08.640 --> 00:20:11.850\nand the drives where I store my page file,\nand a lot of times I'll use it for\n\n427\n00:20:11.850 --> 00:20:14.670\nthe files where I store my\ntransactions logs also.\n\n428\n00:20:14.670 --> 00:20:19.170\nTransaction logs can be write-heavy,\nbut it's just one\n\n429\n00:20:19.170 --> 00:20:22.610\nservice that's writing to it, so you don't\nget a lot of write contention for it.\n\n430\n00:20:22.610 --> 00:20:24.060\nAnd so it works great for those.\n\n431\n00:20:24.060 --> 00:20:26.800\nSo, for your OS, for\nyour transaction logs, for\n\n432\n00:20:26.800 --> 00:20:28.350\nyour page file, RAID 1 can really work.\n\n433\n00:20:29.430 --> 00:20:32.300\nBut there's times where you\nwant better performance.\n\n434\n00:20:32.300 --> 00:20:36.340\nMaybe you've got so\nmuch incoming email that your transaction\n\n435\n00:20:36.340 --> 00:20:39.520\nlogs aren't writing fast enough on RAID 1,\nso you want something better.\n\n436\n00:20:39.520 --> 00:20:42.900\nBut you still want redundancy, and\nthat's where RAID 5 comes along.\n\n437\n00:20:42.900 --> 00:20:47.250\nRAID 5 tries to give us\na bit of a compromise.\n\n438\n00:20:47.250 --> 00:20:51.910\nA compromise between performance and\nredundancy, right?\n\n439\n00:20:51.910 --> 00:20:54.732\nWith this one, your data gets striped.\n\n440\n00:20:54.732 --> 00:20:58.400\nAnd [LAUGH] my slide is slightly\nincorrect here, let me correct this.\n\n441\n00:20:58.400 --> 00:21:01.390\nSo when we write our data,\nyour data gets divided into blocks.\n\n442\n00:21:01.390 --> 00:21:04.008\nSo let's say I've got six\nblocks of data that I write.\n\n443\n00:21:04.008 --> 00:21:06.870\nSo block 1 gets written to\nthe first drive, block 2\n\n444\n00:21:06.870 --> 00:21:10.830\ngets written to the second drive, and then\nparity gets written to the third drive.\n\n445\n00:21:10.830 --> 00:21:14.490\nAnd then my other blocks\nare just being divided up and\n\n446\n00:21:14.490 --> 00:21:17.800\nwritten across the drive in stripes,\nso block 1, block 2,\n\n447\n00:21:17.800 --> 00:21:22.310\nblock 3, block 4, block 5, block 6,\nall spread across the drives.\n\n448\n00:21:23.670 --> 00:21:26.870\nThen, across the drives,\n\n449\n00:21:26.870 --> 00:21:31.550\nthere's what are called parity blocks, and\nthe parity blocks are just a simple little\n\n450\n00:21:31.550 --> 00:21:36.380\nXOR operation that happens that allows\nus to rebuild data if we lose it.\n\n451\n00:21:36.380 --> 00:21:38.520\nAnd I don't wanna go too\ncrazy into the details.\n\n452\n00:21:38.520 --> 00:21:39.850\nMost of you guys probably\nalready know this, but\n\n453\n00:21:39.850 --> 00:21:44.490\njust that, at a high level,\nif I write a 1 to this drive, and\n\n454\n00:21:44.490 --> 00:21:48.160\nI write a 0 to this drive,\nI can add those together.\n\n455\n00:21:48.160 --> 00:21:49.420\n1 plus 0 is 1.\n\n456\n00:21:49.420 --> 00:21:52.350\n1 is an odd number.\n\n457\n00:21:52.350 --> 00:21:55.480\nAnd so we can make a note here\nin the parody block that says,\n\n458\n00:21:55.480 --> 00:21:57.770\nthe parity calculation is odd.\n\n459\n00:21:57.770 --> 00:22:00.940\nOr if it's 1 and 1, those add up to 2,\nthat's an even number.\n\n460\n00:22:00.940 --> 00:22:04.080\nSo I can put a note here that says\nthe parity calculation is even.\n\n461\n00:22:04.080 --> 00:22:08.781\nAnd then, if I lose one drive, so if one\nhard drive completely fails, I can look at\n\n462\n00:22:08.781 --> 00:22:13.160\nthe data I have, and I can look at parity\nand I can say should it be even or odd?\n\n463\n00:22:13.160 --> 00:22:16.730\nAnd I can use that to figure out whether\nit should've been a 1 or a 0 here.\n\n464\n00:22:16.730 --> 00:22:21.120\nI rebuild the data and\nI survive failure, right?\n\n465\n00:22:21.120 --> 00:22:24.850\nRAID 5 allows us to stripe,\nwhich gets more than\n\n466\n00:22:24.850 --> 00:22:28.260\none hard drive writing a reading,\nthat gives us a boost in performance.\n\n467\n00:22:28.260 --> 00:22:31.290\nAnd it allows us to recover\nfrom a single drive of failure.\n\n468\n00:22:31.290 --> 00:22:32.170\nAll right.\n\n469\n00:22:32.170 --> 00:22:34.290\nBut there's two problems with RAID 5.\n\n470\n00:22:34.290 --> 00:22:38.716\nThe first problem is whenever you write,\nyou write to the drive and\n\n471\n00:22:38.716 --> 00:22:41.500\nyou've gotta calculate parity.\n\n472\n00:22:41.500 --> 00:22:45.440\nNow there's a mathematical operation\nbeing tacked onto every write operation.\n\n473\n00:22:45.440 --> 00:22:47.860\nIf you have a hardware RAID controller\nit'll take care of that, but\n\n474\n00:22:47.860 --> 00:22:49.920\nif you're doing software\nyou're CPU's doing it.\n\n475\n00:22:49.920 --> 00:22:51.640\nIt's terrible for performance.\n\n476\n00:22:51.640 --> 00:22:54.570\nSo writing to RAID 5 can\nbe a little more sluggish\n\n477\n00:22:54.570 --> 00:22:57.530\nbecause you're having to do\nthis mathematical operation.\n\n478\n00:22:57.530 --> 00:22:58.730\nReads aren't affected by that.\n\n479\n00:22:58.730 --> 00:23:02.000\nWhen you do a read you don't have to read\nthe parity bit unless there's a failure so\n\n480\n00:23:02.000 --> 00:23:03.630\nyou're just reading the regular data.\n\n481\n00:23:03.630 --> 00:23:07.080\nBut notice how each stripe\nhas one parity block.\n\n482\n00:23:07.080 --> 00:23:10.300\nSo each stripe is one block\nshorter than it normally would be.\n\n483\n00:23:10.300 --> 00:23:13.227\nAnd in my example where I have\nthree drives, I can never read for\n\n484\n00:23:13.227 --> 00:23:15.090\nmore than two at a time.\n\n485\n00:23:15.090 --> 00:23:18.820\nAnd so I don't get as big of\na performance boost as I did with RAID 0.\n\n486\n00:23:18.820 --> 00:23:21.380\nRAID 0 gets us great performance.\n\n487\n00:23:21.380 --> 00:23:23.950\nRAID 5 sacrifices some of this.\n\n488\n00:23:23.950 --> 00:23:27.710\nThat being said, this can be really\nsuitable for a mailbox database.\n\n489\n00:23:27.710 --> 00:23:31.290\nIf you got a mailbox database, and you're\nnot really concerned about huge write\n\n490\n00:23:31.290 --> 00:23:34.620\nperformance, cuz just your transaction\nlogs are getting written to it,\n\n491\n00:23:34.620 --> 00:23:38.312\nthen here you can get reboosts,\nbut still have redundancy.\n\n492\n00:23:38.312 --> 00:23:40.540\nSo it's a great solution for\nyour mailbox database.\n\n493\n00:23:41.700 --> 00:23:43.120\nI don't like to use it though.\n\n494\n00:23:43.120 --> 00:23:45.790\nAnd the main reason is\nwhen you have a failure,\n\n495\n00:23:45.790 --> 00:23:48.070\nyou can still read from the disk\nwithout having to calculate parity.\n\n496\n00:23:48.070 --> 00:23:50.720\nAnd that means your reads\nare all gonna be slower.\n\n497\n00:23:50.720 --> 00:23:53.330\nSo during a failure, reads are slow.\n\n498\n00:23:53.330 --> 00:23:55.012\nAnd then when you put a new disk in,\n\n499\n00:23:55.012 --> 00:23:57.861\nit's gotta rebuild everything\nthat used be on that disk.\n\n500\n00:23:57.861 --> 00:23:59.201\nAnd that takes time.\n\n501\n00:23:59.201 --> 00:24:03.241\nDuring that time you could have another\ndisk fail and now you lose all your data.\n\n502\n00:24:03.241 --> 00:24:10.053\nAnd so RAID 5 has sluggish reads during\nfailure and you're at risk during failure.\n\n503\n00:24:10.053 --> 00:24:11.260\nYou can only lose one drive.\n\n504\n00:24:11.260 --> 00:24:13.986\nIf you lose second drive\nall you're data's gone, so\n\n505\n00:24:13.986 --> 00:24:16.600\nas a result I tend not to use\nRAID 5 if I can avoid it.\n\n506\n00:24:17.600 --> 00:24:20.380\nInstead, RAID 10.\n\n507\n00:24:20.380 --> 00:24:25.050\nRAID 10 is probably the best solution for\na mailbox database.\n\n508\n00:24:25.050 --> 00:24:27.510\nIf you've got a mailbox database,\nand you want great performance and\n\n509\n00:24:27.510 --> 00:24:29.770\ngreat redundancy,\nRAID 10's a great solution.\n\n510\n00:24:30.930 --> 00:24:36.060\nWhat RAID 10 does is it combines RAID 1,\nwhich is all about performance and RAID 0,\n\n511\n00:24:36.060 --> 00:24:40.840\nwhich is all about redundancy, and puts\nthe two together to create a super team.\n\n512\n00:24:40.840 --> 00:24:42.740\nAnd this super team's pretty amazing.\n\n513\n00:24:42.740 --> 00:24:46.440\nThe way it works is it\nbasically stripes your data.\n\n514\n00:24:46.440 --> 00:24:51.120\nSo here I've got block 1 written to this\ndrive, block 2 written to this drive,\n\n515\n00:24:51.120 --> 00:24:54.050\nblock 3 written back to the first drive,\nblock 4 to the second drive,\n\n516\n00:24:54.050 --> 00:24:56.960\nblock 5 to the first drive,\nblock 6 to the second drive.\n\n517\n00:24:56.960 --> 00:24:58.679\nSo it's striping across these disks.\n\n518\n00:24:59.730 --> 00:25:02.780\nBut then it mirrors the disks.\n\n519\n00:25:02.780 --> 00:25:05.050\nSo I've got block 1 here and block 1 here.\n\n520\n00:25:05.050 --> 00:25:06.580\nBlock 3 here, block 3 here.\n\n521\n00:25:06.580 --> 00:25:09.560\nI've got these duplicates of the data.\n\n522\n00:25:09.560 --> 00:25:14.010\nSo when we look at this,\nI've got great performance.\n\n523\n00:25:14.010 --> 00:25:17.770\nWhen I wanna read from this,\nI can read from multiple disks.\n\n524\n00:25:17.770 --> 00:25:19.700\nAnd when I write I can\nwrite to multiple disks.\n\n525\n00:25:19.700 --> 00:25:22.350\nAnd if I have a failure I don't\nhave to calculate parity,\n\n526\n00:25:22.350 --> 00:25:23.830\nI've just got another\ndisk I can read from.\n\n527\n00:25:23.830 --> 00:25:25.110\nThe data's already there.\n\n528\n00:25:25.110 --> 00:25:28.830\nSo now we get great performance\neven during a failure, and\n\n529\n00:25:28.830 --> 00:25:32.160\nwhen it comes time to rebuild\na disk if I have to replace one\n\n530\n00:25:32.160 --> 00:25:33.920\nI don't have to do\na mathematical operation.\n\n531\n00:25:33.920 --> 00:25:35.610\nI just copy the data from here.\n\n532\n00:25:35.610 --> 00:25:38.810\nSo it rebuilds way\nfaster than RAID 5 does.\n\n533\n00:25:38.810 --> 00:25:40.430\nRAID 10 is great.\n\n534\n00:25:40.430 --> 00:25:42.420\nNow, it does have its negatives, though.\n\n535\n00:25:42.420 --> 00:25:43.710\nIt's expensive.\n\n536\n00:25:43.710 --> 00:25:46.490\nI'm wasting 50% of my disks.\n\n537\n00:25:46.490 --> 00:25:48.800\nHalf my disks are dedicated to the mirror.\n\n538\n00:25:48.800 --> 00:25:49.910\nSo I have to buy drives.\n\n539\n00:25:49.910 --> 00:25:51.620\nNow that used to be a big problem.\n\n540\n00:25:51.620 --> 00:25:53.200\nToday hard drives are cheap, right?\n\n541\n00:25:53.200 --> 00:25:54.290\nIt's not expensive.\n\n542\n00:25:54.290 --> 00:25:58.600\nThe only expensive part is making sure\nyou have enough drive ports these days.\n\n543\n00:25:58.600 --> 00:26:03.110\nSo we can stack 14, 30,\n100 hard drives, and get\n\n544\n00:26:03.110 --> 00:26:06.320\nreally amazing RAID 10 arrays built out\nof that, and get some great performance.\n\n545\n00:26:07.460 --> 00:26:10.190\nSo when we start to divide our server up,\nwhen we say,\n\n546\n00:26:10.190 --> 00:26:14.210\nall right I've got my operating system\ndrive, I've got my page file drive,\n\n547\n00:26:14.210 --> 00:26:18.100\nI've got my transaction logs,\nand I got my mailbox database.\n\n548\n00:26:18.100 --> 00:26:19.850\nHow do I wanna divide that up?\n\n549\n00:26:19.850 --> 00:26:24.670\nA lot of times I'll do RAID 1 mirroring\nfor the operating system, and\n\n550\n00:26:24.670 --> 00:26:28.120\nRAID 1 mirroring for the page file.\n\n551\n00:26:28.120 --> 00:26:31.360\nAnd then if it's a small or\nmedium environment, I'll do RAID 1 for\n\n552\n00:26:31.360 --> 00:26:34.920\nthe transaction logs, and\nRAID 5 for the mailbox database.\n\n553\n00:26:34.920 --> 00:26:36.560\nIf it's a large environment, or\n\n554\n00:26:36.560 --> 00:26:39.570\njust an environment that really cares\nabout performance and has a ton of money,\n\n555\n00:26:39.570 --> 00:26:43.670\nthen I'll do RAID 10 for the transaction\nlogs and RAID 10 for the mailbox database.\n\n556\n00:26:43.670 --> 00:26:45.540\nIt all comes down to\nperformance at that point.\n\n557\n00:26:45.540 --> 00:26:47.400\nBut these are things\nthat we have to chose.\n\n558\n00:26:47.400 --> 00:26:51.850\nSo in my example where I started moving\nmy mailbox database around to other\n\n559\n00:26:51.850 --> 00:26:56.640\nhard drives, these hard drives,\nsome of them might be RAID 5,\n\n560\n00:26:56.640 --> 00:26:59.110\nthey might be RAID 10,\nthey might be RAID 1.\n\n561\n00:26:59.110 --> 00:27:00.570\nThat's gonna impact performance.\n\n562\n00:27:00.570 --> 00:27:04.610\nAnd we need to understand that so\nwe put our data where it really belongs,\n\n563\n00:27:04.610 --> 00:27:06.810\nwhere it's really gonna get\nus the best performance.\n\n564\n00:27:06.810 --> 00:27:10.050\nBecause on your system,\nyour hard drive is the slowest part.\n\n565\n00:27:10.050 --> 00:27:12.010\nSo reading and\nwriting that mailbox database,\n\n566\n00:27:12.010 --> 00:27:14.630\nthat's what's gonna make your\nExchange server fast or slow.\n\n567\n00:27:14.630 --> 00:27:16.900\nAnd it's all about disk\ntuning to provide that.\n\n568\n00:27:16.900 --> 00:27:20.442\nSo definitely important stuff that you\nwanna make sure that you're aware of.\n\n569\n00:27:20.442 --> 00:27:23.290\n>> All right, we're gonna talk about\nredundancy in another episode too.\n\n570\n00:27:23.290 --> 00:27:26.490\nWe might maintain more than one copy\nof our database which can help in\n\n571\n00:27:26.490 --> 00:27:28.900\nsome scenarios as far as performance too.\n\n572\n00:27:28.900 --> 00:27:31.260\nBut what you do on the disk,\nthat's what's really important.\n\n573\n00:27:32.722 --> 00:27:34.960\nAll right, well that's about it for\nthis episode.\n\n574\n00:27:34.960 --> 00:27:37.670\nSo in this segment we got a chance\nto see how to tune our disks and\n\n575\n00:27:37.670 --> 00:27:40.880\nsome of the different options there for\nrearranging where our mailbox database and\n\n576\n00:27:40.880 --> 00:27:42.310\ntransaction log files go.\n\n577\n00:27:42.310 --> 00:27:45.620\nTo really create that optimal performance\ninside of Microsoft Exchange.\n\n578\n00:27:45.620 --> 00:27:47.980\nSo we'll go ahead and\nwrap this one up right there.\n\n579\n00:27:47.980 --> 00:27:53.595\nSo signing off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n580\n00:27:53.595 --> 00:27:58.780\n[NOISE]\n\n",
          "vimeoId": "135992746"
        },
        {
          "description": "In this episode, Don introduces the viewers to the Exchange 2013 public folder functionality. He discusses how to create and configure public folders. He wraps up the episode by demonstrating how to set permissions and load data into a public folder.",
          "length": "1311",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-2-public_folders-081115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-2-public_folders-081115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-2-public_folders-081115-1-sm.jpg",
          "title": "Public Folders",
          "transcript": "WEBVTT\n\n1\n00:00:00.461 --> 00:00:10.641\n[MUSIC]\n\n2\n00:00:10.641 --> 00:00:13.281\nAll right, good morning,\ngood afternoon and good evening,\n\n3\n00:00:13.281 --> 00:00:15.381\nand welcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.381 --> 00:00:16.368\nI'm your host,\n\n5\n00:00:16.368 --> 00:00:21.050\nDon Pezet, back again with another\nepisode of Microsoft Exchange 2013.\n\n6\n00:00:21.050 --> 00:00:23.580\nAnd this is a fun one because\nwe're going to be talking about\n\n7\n00:00:23.580 --> 00:00:25.320\npublic folders in this episode.\n\n8\n00:00:25.320 --> 00:00:28.710\nAnd let me tell you,\nI've worked with Exchange a long time and\n\n9\n00:00:28.710 --> 00:00:33.870\nI remember when I was teaching\na Microsoft Exchange 2000 course.\n\n10\n00:00:33.870 --> 00:00:35.990\nThis was 15 years ago.\n\n11\n00:00:35.990 --> 00:00:38.430\nAnd I had to tell all my students, hey,\n\n12\n00:00:38.430 --> 00:00:41.730\nif you guys are using public folders,\nyou need to move away from them.\n\n13\n00:00:41.730 --> 00:00:43.400\nMicrosoft is ending support for them.\n\n14\n00:00:43.400 --> 00:00:45.560\nYou need to get away from public folders.\n\n15\n00:00:45.560 --> 00:00:49.630\nBut there was this huge public outcry,\nand so when Exchange 2003 came out,\n\n16\n00:00:49.630 --> 00:00:52.090\nMicrosoft said, well,\nwe're going to keep public folders for\n\n17\n00:00:52.090 --> 00:00:55.060\nnow, but\neverybody needs to get away from them.\n\n18\n00:00:55.060 --> 00:00:57.540\nAnd then Exchange 2007, well,\nwe'll keep those public folders, but\n\n19\n00:00:57.540 --> 00:00:59.550\neveryone needs to get away from them.\n\n20\n00:00:59.550 --> 00:01:03.140\nAnd then Exchange 2010 and now Exchange\n2013 and we still have public folders.\n\n21\n00:01:03.140 --> 00:01:05.610\nLet me tell you guys,\nthey're not going anywhere.\n\n22\n00:01:05.610 --> 00:01:08.930\nIt's been the thing that Microsoft has\nsaid all this time, they're going away,\n\n23\n00:01:08.930 --> 00:01:10.120\nthey're going away.\n\n24\n00:01:10.120 --> 00:01:11.500\nNah, they're still here.\n\n25\n00:01:11.500 --> 00:01:13.260\nAnd let me tell you what's going on.\n\n26\n00:01:13.260 --> 00:01:17.528\nBack in the older versions of Exchange,\nreally all the way up through Exchange\n\n27\n00:01:17.528 --> 00:01:21.660\n2010, public folders were\na special type of database.\n\n28\n00:01:21.660 --> 00:01:23.300\nIf you've never worked\nwith public folders,\n\n29\n00:01:23.300 --> 00:01:27.040\nbasically what it was was like\na file system inside of Exchange.\n\n30\n00:01:27.040 --> 00:01:29.130\nNormally Microsoft Exchange\nis an email program.\n\n31\n00:01:29.130 --> 00:01:31.170\nWe send emails back and\nforward to people and\n\n32\n00:01:31.170 --> 00:01:33.520\nit stores them as emails\nin the email database.\n\n33\n00:01:33.520 --> 00:01:35.210\nEven when you create calendar items and\n\n34\n00:01:35.210 --> 00:01:38.730\ntasks, in the background they're\nreally being stored as emails.\n\n35\n00:01:38.730 --> 00:01:40.600\nIt's all just kinda emails in a mailbox.\n\n36\n00:01:40.600 --> 00:01:42.750\nWell, public folders weren't like that.\n\n37\n00:01:42.750 --> 00:01:46.480\nThere was a special database, and\nwhen you created a public folder and\n\n38\n00:01:46.480 --> 00:01:50.610\nyou threw files in there, well,\nit was going into this special database.\n\n39\n00:01:50.610 --> 00:01:53.190\nAnd Microsoft has other products\nthat do a better job of that.\n\n40\n00:01:53.190 --> 00:01:55.240\nExchange is not a very good file server.\n\n41\n00:01:56.400 --> 00:01:58.980\nThis was a feature that was\nadded 20 years ago that\n\n42\n00:01:58.980 --> 00:02:02.250\nwas really just designed as a temporary\nthing to compete with Novell Groupware,\n\n43\n00:02:02.250 --> 00:02:05.700\nand now that's not\nreally an issue anymore.\n\n44\n00:02:06.850 --> 00:02:09.170\nSo why do we even still have it?\n\n45\n00:02:09.170 --> 00:02:12.150\nWell, Microsoft says you should\nbe moving over to SharePoint.\n\n46\n00:02:12.150 --> 00:02:14.810\nMicrosoft SharePoint's a better\nplace to put your files and\n\n47\n00:02:14.810 --> 00:02:16.020\nyou can get at your data that way.\n\n48\n00:02:16.020 --> 00:02:17.600\nDon't put it in Exchange, right?\n\n49\n00:02:17.600 --> 00:02:18.510\nGreat.\n\n50\n00:02:18.510 --> 00:02:20.560\nBut a lot of people still\nuse public folders.\n\n51\n00:02:20.560 --> 00:02:21.620\nThey want that access.\n\n52\n00:02:21.620 --> 00:02:24.510\nThey want their end users to be able\nto launch Microsoft Outlook and be\n\n53\n00:02:24.510 --> 00:02:27.580\nable to browse into their inbox, and then\nbe able to browse into a public folder and\n\n54\n00:02:27.580 --> 00:02:30.480\naccess reports and\nother things all in one place.\n\n55\n00:02:30.480 --> 00:02:33.050\nSo what Microsoft did is in Exchange 2013,\nthey said, all right,\n\n56\n00:02:33.050 --> 00:02:34.680\nhere's what we're gonna do.\n\n57\n00:02:34.680 --> 00:02:36.190\nInstead of trying to get\nrid of public folders,\n\n58\n00:02:36.190 --> 00:02:38.960\nthat's never gonna happen,\nlet's just change them.\n\n59\n00:02:38.960 --> 00:02:42.800\nLet's make it where public folders\nare stored like emails, and\n\n60\n00:02:42.800 --> 00:02:46.660\nthen we don't have this separate special\nmagical database we have to deal with.\n\n61\n00:02:46.660 --> 00:02:50.350\nIt's just a regular old mailbox that's\nstored just like everything else.\n\n62\n00:02:50.350 --> 00:02:53.420\nAnd that way our database availability\ngroups work, our replications, our\n\n63\n00:02:53.420 --> 00:02:56.940\nbackups, our restores, all that works like\nnormal and it's not a special database.\n\n64\n00:02:56.940 --> 00:03:00.130\nAnd that's really what Microsoft\nwas trying to get away from anyway.\n\n65\n00:03:00.130 --> 00:03:02.550\nSo in 2013 they fixed that.\n\n66\n00:03:02.550 --> 00:03:03.510\nSo Exchange 2013,\n\n67\n00:03:03.510 --> 00:03:06.880\nour public folders are really just\nstored in a mailbox in the back-end, and\n\n68\n00:03:06.880 --> 00:03:11.150\nit's right along as a regular mailbox\ndatabase would be, and it's no big deal.\n\n69\n00:03:11.150 --> 00:03:13.310\nSo they're actually kind\nof pleasant to work with.\n\n70\n00:03:13.310 --> 00:03:15.180\nLet's take a look at how it works out.\n\n71\n00:03:15.180 --> 00:03:17.420\nSo here I am in my Exchange admin center.\n\n72\n00:03:17.420 --> 00:03:21.600\nAnd I know if I go down here to my\nservers, I can go over to databases and\n\n73\n00:03:21.600 --> 00:03:23.390\nI can see my mailbox databases.\n\n74\n00:03:23.390 --> 00:03:26.950\nAnd in previous versions of Exchange you\nalso had your public folder databases.\n\n75\n00:03:26.950 --> 00:03:28.320\nBut I don't have that.\n\n76\n00:03:28.320 --> 00:03:31.050\nI do have my public\nfolders link over here and\n\n77\n00:03:31.050 --> 00:03:35.660\nnotice instead of public folder databases\nI have public folder mailboxes.\n\n78\n00:03:35.660 --> 00:03:38.140\nNow to the end user they're not\ngonna notice the difference.\n\n79\n00:03:38.140 --> 00:03:39.960\nDoesn't mean a single thing to them.\n\n80\n00:03:39.960 --> 00:03:42.460\nBut to us as the admins, it is.\n\n81\n00:03:42.460 --> 00:03:44.900\nIt's a mail box, it's not a database.\n\n82\n00:03:44.900 --> 00:03:46.830\nSo two big benefits of that.\n\n83\n00:03:46.830 --> 00:03:49.540\nOne, we're not having to support\na completely separate database.\n\n84\n00:03:49.540 --> 00:03:54.400\nAnd two, any redundancy that we've\nset up for our mailbox databases now\n\n85\n00:03:54.400 --> 00:03:58.600\napplies to the public folders too, so we\ndon't have to have a separate replication.\n\n86\n00:03:58.600 --> 00:04:03.370\nIt makes our job so much easier but\nit is different, so I want to show you\n\n87\n00:04:03.370 --> 00:04:07.480\nguys how this works and how it kinda gets\nset up, so you get a chance to see this.\n\n88\n00:04:07.480 --> 00:04:09.850\nIt is important to make sure that\nyou understand the differences.\n\n89\n00:04:11.080 --> 00:04:14.430\nYou might be tempted when you get in here\nto just start creating folders right here.\n\n90\n00:04:14.430 --> 00:04:17.250\nIt's got it where you can hit\nthe plus sign and start to create it.\n\n91\n00:04:17.250 --> 00:04:19.100\nBut you'll notice there's\na little warning here, and\n\n92\n00:04:19.100 --> 00:04:22.270\nit says,\nbefore you create a public folder,\n\n93\n00:04:22.270 --> 00:04:26.270\nplease make sure that you created\nat least one public folder mailbox.\n\n94\n00:04:26.270 --> 00:04:28.260\nYou have to have a mailbox\nto store this stuff in.\n\n95\n00:04:29.260 --> 00:04:31.210\nOtherwise you can't create the folders.\n\n96\n00:04:31.210 --> 00:04:34.610\nAnd that's why I've got this other option\nhere, the public folder mailboxes.\n\n97\n00:04:34.610 --> 00:04:38.950\nNow for most companies you're\nonly gonna need one mailbox.\n\n98\n00:04:38.950 --> 00:04:42.630\nThe first mailbox you create is what's\ncalled the primary public folder mailbox\n\n99\n00:04:42.630 --> 00:04:45.860\nand it's a read-write copy of your data.\n\n100\n00:04:45.860 --> 00:04:51.530\nIf you create any more mailboxes, they're\nsecondary mailboxes and they're read only.\n\n101\n00:04:51.530 --> 00:04:52.561\nYou can't write to them.\n\n102\n00:04:52.561 --> 00:04:54.130\nNow why would I want that?\n\n103\n00:04:54.130 --> 00:04:55.400\nWhy would I want read-only\ncopies of the data?\n\n104\n00:04:55.400 --> 00:04:57.080\nThat's kinda pointless, isn't it?\n\n105\n00:04:57.080 --> 00:04:59.800\nWell, it's not, for redundancy.\n\n106\n00:04:59.800 --> 00:05:03.680\nIf I want to store a copy of my public\nfolders on a server here in Gainesville,\n\n107\n00:05:03.680 --> 00:05:08.940\nFlorida, and I want to store another\ncopy in London, England, well,\n\n108\n00:05:08.940 --> 00:05:13.280\nit's kind of difficult to have a writable\ncopy of a mailbox in two different places.\n\n109\n00:05:13.280 --> 00:05:17.800\nBut I could have a writable copy here and\nput a readable copy in London.\n\n110\n00:05:17.800 --> 00:05:21.080\nAnd that way, any of my users over there\nin England could access it locally over\n\n111\n00:05:21.080 --> 00:05:22.920\nthere, access and read the data.\n\n112\n00:05:22.920 --> 00:05:26.690\nAnd only when they change data would\nit need to come to the server here.\n\n113\n00:05:26.690 --> 00:05:30.880\nSo that gives us a lot better performance\ncuz most people are just reading data.\n\n114\n00:05:30.880 --> 00:05:33.910\nWrites are far less frequent\ninside of a public folder.\n\n115\n00:05:33.910 --> 00:05:36.730\nSo we can create multiple mailboxes for\nredundancy.\n\n116\n00:05:36.730 --> 00:05:38.470\nBut for most of us we just need the one.\n\n117\n00:05:38.470 --> 00:05:41.070\nWe create it and then we'll be\nable to use that to set things up.\n\n118\n00:05:41.070 --> 00:05:42.530\nSo let's see that here in action.\n\n119\n00:05:42.530 --> 00:05:45.710\nSo I'm going to start by creating\nmy first public folder mailbox.\n\n120\n00:05:45.710 --> 00:05:46.971\nAnd so I need to give it a name.\n\n121\n00:05:46.971 --> 00:05:50.943\nI'm just going to call mine my Public\nFolder Mailbox because I'm not terribly\n\n122\n00:05:50.943 --> 00:05:51.880\ncreative.\n\n123\n00:05:51.880 --> 00:05:54.020\nBut if I was going to be putting\nthis in a different country,\n\n124\n00:05:54.020 --> 00:05:57.380\nI might call this one my public\nfolder replica London or\n\n125\n00:05:57.380 --> 00:06:00.510\npublic folder replica Paris, and\nthat way I'd just know where it's tied to.\n\n126\n00:06:01.550 --> 00:06:03.870\nAnd then right here you can specify\nthe organizational unit and\n\n127\n00:06:03.870 --> 00:06:08.150\nthe AD that this mailbox will be a part\nof, and then the mailbox database.\n\n128\n00:06:08.150 --> 00:06:10.810\nHere's how we pick where it's gonna be.\n\n129\n00:06:10.810 --> 00:06:13.410\nI can pick a mailbox database\nright here in Florida, or\n\n130\n00:06:13.410 --> 00:06:16.210\nI can pick a mailbox database\nthat's on a server in London.\n\n131\n00:06:16.210 --> 00:06:18.150\nI'm picking which database\nit's gonna reside in.\n\n132\n00:06:18.150 --> 00:06:19.520\nAnd I can always move it later on.\n\n133\n00:06:19.520 --> 00:06:22.030\nYou can move mailboxes\nfrom database to database.\n\n134\n00:06:22.030 --> 00:06:24.797\nSo we can change our mind\npretty easily after the fact.\n\n135\n00:06:24.797 --> 00:06:28.085\nSo I'm gonna go ahead and\nhit Browse in the mailbox database and\n\n136\n00:06:28.085 --> 00:06:30.080\njust choose one of my databases here.\n\n137\n00:06:30.080 --> 00:06:31.948\nI'll go with my default\ndatabase on this one.\n\n138\n00:06:31.948 --> 00:06:33.490\nI'm not gonna pick an OU.\n\n139\n00:06:33.490 --> 00:06:35.340\nThat just means it'll\ngo to the default OU.\n\n140\n00:06:35.340 --> 00:06:37.310\nYou could browse and\npick one if you wanted.\n\n141\n00:06:37.310 --> 00:06:38.960\nIf you leave them empty it\njust goes to the defaults.\n\n142\n00:06:40.470 --> 00:06:43.650\nAll right, so that's gonna get my\npublic folder mailbox created.\n\n143\n00:06:43.650 --> 00:06:47.810\nThis is what's replacing the old way\nwhere I go and create a database.\n\n144\n00:06:47.810 --> 00:06:51.380\nNow it's just using the existing mailbox\ndatabase and parking this mailbox in it.\n\n145\n00:06:52.980 --> 00:06:57.430\nOnce I've got that,\nnow I can go to my public folders and\n\n146\n00:06:57.430 --> 00:06:59.250\nI can start to work with this.\n\n147\n00:06:59.250 --> 00:07:01.700\nNow you actually do have\none folder by default.\n\n148\n00:07:01.700 --> 00:07:02.290\nIt's the root.\n\n149\n00:07:02.290 --> 00:07:04.010\nSee this little slash right here?\n\n150\n00:07:04.010 --> 00:07:07.390\nThat's letting me know that I'm\nin the root of my public folder.\n\n151\n00:07:07.390 --> 00:07:12.530\nAnd I can start to create subfolders\nunderneath it to store data.\n\n152\n00:07:12.530 --> 00:07:14.600\nAnd the way you see this\nused most commonly is we\n\n153\n00:07:14.600 --> 00:07:16.370\ncreate departmental folders.\n\n154\n00:07:16.370 --> 00:07:19.830\nSo I might come in here and create\na folder called Sales for my salespeople.\n\n155\n00:07:21.430 --> 00:07:25.160\nAnd then under Sales I might\ncreate Marketing or other ones.\n\n156\n00:07:25.160 --> 00:07:27.149\nYou just start to kinda\nbranch these things out.\n\n157\n00:07:29.130 --> 00:07:32.210\nSo I got Sales, I've got Marketing,\nand I start creating folders for\n\n158\n00:07:32.210 --> 00:07:34.480\neach of these different organizations.\n\n159\n00:07:34.480 --> 00:07:37.400\nYou can create subfolders\nunderneath them too.\n\n160\n00:07:37.400 --> 00:07:41.030\nSo maybe you like to have your public\nfolders broken down by region, and\n\n161\n00:07:41.030 --> 00:07:43.930\nthen inside of a region you have sales and\nmarketing, or whatever.\n\n162\n00:07:43.930 --> 00:07:48.740\nOr maybe inside of sales, I wanna break\nthat up by region or state, however it is.\n\n163\n00:07:48.740 --> 00:07:50.860\nSo under Sales I might\ncreate a new folder.\n\n164\n00:07:50.860 --> 00:07:53.300\nAnd I'm just going to click on Sales and\nsee how my path has changed?\n\n165\n00:07:53.300 --> 00:07:54.921\nI'm now inside of that Sales folder.\n\n166\n00:07:54.921 --> 00:07:56.101\nAnd I can hit plus.\n\n167\n00:07:56.101 --> 00:08:01.821\nI'm going to add in,\nmaybe I'll do US sales.\n\n168\n00:08:01.821 --> 00:08:05.908\nAnd I'll add another folder for maybe\nlike U.K. sales or Canada, whoever you\n\n169\n00:08:05.908 --> 00:08:10.130\nknow start adding your various countries\nwho've got the folders that are there.\n\n170\n00:08:11.220 --> 00:08:13.608\nWhen I've got those,\nif I go back up to my root, right?\n\n171\n00:08:13.608 --> 00:08:16.820\nAnd you can just hit this little\narrow to jump back to your root.\n\n172\n00:08:16.820 --> 00:08:21.050\nSee I've got Marketing and Sales and\nunder Sales it says has sub-folders yes.\n\n173\n00:08:21.050 --> 00:08:22.735\nI can tell that it does have sub-folders.\n\n174\n00:08:22.735 --> 00:08:25.000\nAnd if I browse in I'll see those.\n\n175\n00:08:25.000 --> 00:08:27.930\nAll right,\nnow why bother creating sales folders?\n\n176\n00:08:27.930 --> 00:08:29.500\nI mean subfolders.\n\n177\n00:08:29.500 --> 00:08:32.350\nThe only reason to create\nsubfolders is for permissions.\n\n178\n00:08:32.350 --> 00:08:35.800\nI can set different permissions on these\nfolders to dictate who's allowed to\n\n179\n00:08:35.800 --> 00:08:40.220\nread data, who's allowed to write data,\nyou know, who's allowed to use this stuff.\n\n180\n00:08:40.220 --> 00:08:45.310\nSo for example, my U.S., I might want to\nlimit that just to my users who are in\n\n181\n00:08:45.310 --> 00:08:50.160\nthe U.S., or limit the U.K. to users who\nare just in the U.K. So, I might go up\n\n182\n00:08:50.160 --> 00:08:55.450\nhere to my recipients, and go to groups\nand start creating some groups, right?\n\n183\n00:08:55.450 --> 00:09:00.670\nI might create a security\ngroup called Sales,\n\n184\n00:09:00.670 --> 00:09:04.940\nwhich will be like all of my\nsales departments, right?\n\n185\n00:09:04.940 --> 00:09:07.260\nSo I can go in and\ncreate one of those, and\n\n186\n00:09:07.260 --> 00:09:13.010\nthen I might create other groups like U.K.\nSales.\n\n187\n00:09:13.010 --> 00:09:18.860\nAnd I'll give it an alias, and\n\n188\n00:09:18.860 --> 00:09:22.250\nthen I can create U.S.\nSales and so on, right?\n\n189\n00:09:22.250 --> 00:09:27.280\nAnd when I start to create this hierarchy,\nI can use for\n\n190\n00:09:27.280 --> 00:09:30.290\nassigning permissions and really get\nsome neat effects out of this, right?\n\n191\n00:09:30.290 --> 00:09:35.250\nI'm gonna take this sales group,\njust my overall sales,\n\n192\n00:09:35.250 --> 00:09:39.290\nright, and I can go down and\nI can take the members and\n\n193\n00:09:39.290 --> 00:09:42.740\nI can add in each of those\nother groups that I just made.\n\n194\n00:09:42.740 --> 00:09:44.210\nU.K. Sales, U.S. Sales.\n\n195\n00:09:44.210 --> 00:09:45.750\nI'm gonna add these in here.\n\n196\n00:09:45.750 --> 00:09:48.000\nSo now when I hire an employee,\nif I put him in the U.K.\n\n197\n00:09:48.000 --> 00:09:52.470\nSales group they'll also be in the Sales\ngroup, he'll be in both, right?\n\n198\n00:09:52.470 --> 00:09:56.030\nSo I'm starting kind of to build\nthat hierarchy for my permissions.\n\n199\n00:09:56.030 --> 00:09:57.960\nAnd now if I jump back\ndown to my public folders,\n\n200\n00:09:57.960 --> 00:09:59.640\nI can start to set permissions that way.\n\n201\n00:09:59.640 --> 00:10:03.170\nSo under public folders,\nI can go back up to my root.\n\n202\n00:10:04.430 --> 00:10:06.930\nAnd I can take Sales, right here, and\n\n203\n00:10:06.930 --> 00:10:10.210\non the right side you'll see this link\nwhere it says folder permissions.\n\n204\n00:10:10.210 --> 00:10:11.760\nIt's kinda tiny,\nit's easy to miss that one.\n\n205\n00:10:11.760 --> 00:10:13.770\nBut it's folder permissions,\nand I can hit manage, and\n\n206\n00:10:13.770 --> 00:10:16.510\nnow I can dictate who's\nallowed to use this.\n\n207\n00:10:16.510 --> 00:10:17.360\nSo I might say, all right, for\n\n208\n00:10:17.360 --> 00:10:19.980\nthe Sales folder,\nI only want sales people getting in there.\n\n209\n00:10:19.980 --> 00:10:24.960\nSo I'm gonna hit add, and I'm going to\nbrowse, and I'm going to find my Sales.\n\n210\n00:10:24.960 --> 00:10:27.524\nThis is going to be all of sales,\nnot just U.K.,\n\n211\n00:10:27.524 --> 00:10:31.630\nnot just U.S., all of sales is going to\nbe able to get into this sales folder.\n\n212\n00:10:31.630 --> 00:10:33.340\nAnd then I pick the permissions.\n\n213\n00:10:33.340 --> 00:10:36.180\nNow the permissions here\nare a lot different than the file\n\n214\n00:10:36.180 --> 00:10:38.050\npermissions that you find in Windows.\n\n215\n00:10:38.050 --> 00:10:40.985\nThese are based more on like rolls, right?\n\n216\n00:10:40.985 --> 00:10:42.700\nThey're roles that people perform.\n\n217\n00:10:42.700 --> 00:10:44.660\nAnd so they've got these levels.\n\n218\n00:10:44.660 --> 00:10:45.760\nReviewer.\n\n219\n00:10:45.760 --> 00:10:48.560\nA reviewer is somebody\nwho would just read data.\n\n220\n00:10:48.560 --> 00:10:49.760\nA contributor.\n\n221\n00:10:49.760 --> 00:10:51.610\nThat's somebody who would add data, right?\n\n222\n00:10:51.610 --> 00:10:53.120\nContributing information.\n\n223\n00:10:53.120 --> 00:10:55.590\nA non-editing author.\n\n224\n00:10:55.590 --> 00:10:58.340\nThat would be somebody who can\ncreate their own data, but\n\n225\n00:10:58.340 --> 00:11:01.020\nnot edit somebody else's data.\n\n226\n00:11:01.020 --> 00:11:04.170\nYou've got author, just somebody\nwho can create their own data.\n\n227\n00:11:04.170 --> 00:11:06.170\nAnd editor,\nsomebody who can edit anybody's data.\n\n228\n00:11:06.170 --> 00:11:07.350\nA publishing author.\n\n229\n00:11:07.350 --> 00:11:09.120\nAnd you'll see each of\nthese different ones.\n\n230\n00:11:09.120 --> 00:11:12.000\nAnd if you're not familiar with these\nterms, they don't mean a whole lot to you,\n\n231\n00:11:12.000 --> 00:11:14.670\nso they also give you the option of just\ncoming in here and check what you want.\n\n232\n00:11:14.670 --> 00:11:15.760\nCan they create items?\n\n233\n00:11:15.760 --> 00:11:16.570\nCan they read?\n\n234\n00:11:16.570 --> 00:11:18.280\nCan they create subfolders?\n\n235\n00:11:18.280 --> 00:11:20.620\nWhat exactly can they do?\n\n236\n00:11:20.620 --> 00:11:26.350\nAnd so I might wanna say the sales\ngroup is really just able to read and\n\n237\n00:11:26.350 --> 00:11:28.510\nview the folder and that's it, right?\n\n238\n00:11:28.510 --> 00:11:29.810\nThey can see it.\n\n239\n00:11:29.810 --> 00:11:30.480\nAnd that's the end of it.\n\n240\n00:11:30.480 --> 00:11:33.960\nThey can't create items,\nthey can't create sub-folders or whatever.\n\n241\n00:11:33.960 --> 00:11:35.910\nSo I can specify that and put it in here.\n\n242\n00:11:35.910 --> 00:11:37.600\nOr maybe I want them to have everything.\n\n243\n00:11:37.600 --> 00:11:40.400\nSo I want them to be able to\njust do everything in here, so\n\n244\n00:11:40.400 --> 00:11:41.330\nI might flag them as owner.\n\n245\n00:11:41.330 --> 00:11:43.030\nThat gives them everything.\n\n246\n00:11:43.030 --> 00:11:44.210\nBut there's probably limits,\n\n247\n00:11:44.210 --> 00:11:46.550\nI probably don't want them to\nbe able to delete everything.\n\n248\n00:11:46.550 --> 00:11:51.590\nI probably don't want them to be able to\nmaybe, like delete other people's stuff.\n\n249\n00:11:51.590 --> 00:11:53.380\nSo we probably want limits there.\n\n250\n00:11:53.380 --> 00:11:55.912\nBut we'll just kind of tweak\nthat based on our needs.\n\n251\n00:11:55.912 --> 00:11:58.880\nAll right, so now I've set these\npermissions to the parent.\n\n252\n00:11:58.880 --> 00:12:02.020\nAnd see how it's got the option where I\ncan trickle those down to the children,\n\n253\n00:12:02.020 --> 00:12:03.470\nthe sub-folders.\n\n254\n00:12:03.470 --> 00:12:04.770\nI could do that, but I don't want to.\n\n255\n00:12:04.770 --> 00:12:07.620\nIn my case, I'm gonna save this.\n\n256\n00:12:07.620 --> 00:12:09.620\nSo it's only gonna apply\nto the Sales folder.\n\n257\n00:12:10.650 --> 00:12:15.040\nAnd then I'm gonna go into the Sales\nfolder, and I can tweak these.\n\n258\n00:12:15.040 --> 00:12:19.540\nI can take the U.K.\nfolder, and I'll manage that one.\n\n259\n00:12:19.540 --> 00:12:23.860\nAnd I can add here the U.K. Sales, right?\n\n260\n00:12:23.860 --> 00:12:27.720\nAnd I might want the U.K. salespeople to\ndo whatever they want in here, right?\n\n261\n00:12:27.720 --> 00:12:30.190\nThey can be straight up owners.\n\n262\n00:12:30.190 --> 00:12:31.080\nAll right.\n\n263\n00:12:31.080 --> 00:12:35.400\nBut then I can add the U.S. Sales and\nmake it where they can only read.\n\n264\n00:12:35.400 --> 00:12:38.050\nRight, I don't want them\nmessing with the U.K. stuff.\n\n265\n00:12:38.050 --> 00:12:40.300\nThey might want to see it\nin good competition, but\n\n266\n00:12:40.300 --> 00:12:41.620\nnot necessarily be able to change things.\n\n267\n00:12:41.620 --> 00:12:44.740\nSo I might set them as\na straight up reviewer, right?\n\n268\n00:12:44.740 --> 00:12:48.320\nSo now I can really get granular with\nthe permissions on that right from here.\n\n269\n00:12:48.320 --> 00:12:51.220\nAnd if you're wondering why Microsoft went\ndifferent with the names of permissions\n\n270\n00:12:51.220 --> 00:12:53.890\nhere, It's because the end users.\n\n271\n00:12:53.890 --> 00:12:56.200\nIf they're the owner of a folder,\nthey can change the permissions and\n\n272\n00:12:56.200 --> 00:12:57.570\nthey've changed it in Outlook.\n\n273\n00:12:57.570 --> 00:12:59.640\nSo Microsoft tried to make it easy for\nthem.\n\n274\n00:12:59.640 --> 00:13:01.850\nRight?\nSimple ways to be able to manipulate this.\n\n275\n00:13:03.390 --> 00:13:06.010\nOn that note,\nI've said Outlook a few times.\n\n276\n00:13:06.010 --> 00:13:08.574\nPublic folders are really designed\nto work with the full version of\n\n277\n00:13:08.574 --> 00:13:09.409\nMicrosoft Outlook.\n\n278\n00:13:09.409 --> 00:13:11.666\nRight?\nSo if you're running Outlook 2013, or\n\n279\n00:13:11.666 --> 00:13:13.310\neven some of the earlier ones.\n\n280\n00:13:13.310 --> 00:13:16.555\nYou can connect up, and you can gain\naccess to these public folders and\n\n281\n00:13:16.555 --> 00:13:19.310\nwork with them, and\nit's got it all right there in the GUI.\n\n282\n00:13:19.310 --> 00:13:22.011\nOutlook web app?\n\n283\n00:13:22.011 --> 00:13:26.780\nWhen Exchange 2013 first came out, Outlook\nweb app couldn't access public folders.\n\n284\n00:13:26.780 --> 00:13:30.770\nBut in cumulative update two, or\nservice pack one, if you deploy that.\n\n285\n00:13:30.770 --> 00:13:33.390\nIt adds that support,\nto add in public folders to OWA,\n\n286\n00:13:33.390 --> 00:13:36.520\nso if you want to you can actually get\nto your public folders via OWA also.\n\n287\n00:13:37.892 --> 00:13:41.410\nAll right, so in my case I've got my\nfolders, I've got my permissions set.\n\n288\n00:13:41.410 --> 00:13:43.120\nIt's not ready for\nmy end users to jump in.\n\n289\n00:13:43.120 --> 00:13:46.700\nSo they should be able to jump in,\nsee this data, and start to work with it.\n\n290\n00:13:46.700 --> 00:13:50.700\nIf I want a replica of this data, I could\nalways jump over to my public folder\n\n291\n00:13:50.700 --> 00:13:52.420\nmailboxes and create more mailboxes.\n\n292\n00:13:52.420 --> 00:13:55.400\nPut them on different servers and\nnow I'll have replica's.\n\n293\n00:13:55.400 --> 00:13:59.600\nAll right, there's one other thing that I\ncan tweak in here, if I go back up here.\n\n294\n00:13:59.600 --> 00:14:03.140\nI've got this Sales folder that I made,\n\n295\n00:14:03.140 --> 00:14:04.890\nor you know,some of the other\nones that I created.\n\n296\n00:14:04.890 --> 00:14:06.590\nWhat are they like, U.K.\nsales, some stuff.\n\n297\n00:14:06.590 --> 00:14:08.840\nThese folders,\nwe can choose to mail enable them.\n\n298\n00:14:08.840 --> 00:14:09.780\nAll right?\n\n299\n00:14:09.780 --> 00:14:11.350\nIf you mail enable them,\n\n300\n00:14:11.350 --> 00:14:14.740\nby default people have to use\nOutlook to copy files in there.\n\n301\n00:14:14.740 --> 00:14:17.890\nBut if you mail enable them\nthey'll get an email address, and\n\n302\n00:14:17.890 --> 00:14:21.030\nyou can send an email to\nthe public folder and\n\n303\n00:14:21.030 --> 00:14:23.520\nwhatever attachments are in your email\nwill come into the public folder.\n\n304\n00:14:23.520 --> 00:14:25.670\nThey will become a part of that, right?\n\n305\n00:14:25.670 --> 00:14:29.840\nSo I might want to take like marketing and\nI want to allow people to email things\n\n306\n00:14:29.840 --> 00:14:32.510\ninto marketing, so\nI can come in here and enable that.\n\n307\n00:14:32.510 --> 00:14:34.430\nI'm gonna mail enable it.\n\n308\n00:14:34.430 --> 00:14:37.890\nAnd now it's gonna have an email\naddress that I can just send to, and\n\n309\n00:14:37.890 --> 00:14:41.400\npeople will be able to send that right\nover and be able to get access to it.\n\n310\n00:14:41.400 --> 00:14:43.490\nSo, we'll have that ability.\n\n311\n00:14:43.490 --> 00:14:44.430\nAnd now it's ready.\n\n312\n00:14:44.430 --> 00:14:47.930\nI can see it's empty right now,\nso there's nothing too fancy, but\n\n313\n00:14:47.930 --> 00:14:52.000\nif I go down to email address, I can see\nthe email address that was assigned to it.\n\n314\n00:14:52.000 --> 00:14:54.570\nIt's important to check that,\ncuz you might have a conflict.\n\n315\n00:14:54.570 --> 00:14:59.570\nYou might have a folder like well,\nfor example, I've got a folder\n\n316\n00:14:59.570 --> 00:15:04.000\ncalled Sales, and\nI've got a group called Sales.\n\n317\n00:15:04.000 --> 00:15:07.230\nSo, who has sales@lab.itv.pro.tv?\n\n318\n00:15:07.230 --> 00:15:08.380\nI don't know which one.\n\n319\n00:15:08.380 --> 00:15:10.299\nSo it's important to take\na look at those settings.\n\n320\n00:15:11.760 --> 00:15:13.832\nAnd then jump here under\nthe e-mail addresses,\n\n321\n00:15:13.832 --> 00:15:16.270\nsee, oh, I haven't enabled that one so\nit doesn't have it.\n\n322\n00:15:16.270 --> 00:15:20.050\nBut you can just pull one up and go into\nits settings and you'll see it right under\n\n323\n00:15:20.050 --> 00:15:23.220\nthat email address and you can change\nit or add more than one address.\n\n324\n00:15:23.220 --> 00:15:26.110\nBut I can send something to\nmarketing@lab.itv.pro.tv and\n\n325\n00:15:26.110 --> 00:15:27.860\nit'll get added to this public folder.\n\n326\n00:15:27.860 --> 00:15:29.220\nThere's other things\nyou can tweak in here,\n\n327\n00:15:29.220 --> 00:15:33.170\nlike you can set limits to restrict\nhow much data people can put in there.\n\n328\n00:15:33.170 --> 00:15:36.080\nYou don't necessarily want them to\ngo crazy and store a ton of data.\n\n329\n00:15:36.080 --> 00:15:38.970\nYou can tweak who remembers,\nwho's able to access it.\n\n330\n00:15:38.970 --> 00:15:42.270\nYou can also view the statistics,\nhow much data's in there right now.\n\n331\n00:15:42.270 --> 00:15:45.250\nIt's all done right here,\nthrough some pretty easy settings.\n\n332\n00:15:45.250 --> 00:15:47.380\nSo the end user's gonna fire\nup Microsoft Outlook and\n\n333\n00:15:47.380 --> 00:15:49.950\nthat's how they're gonna access these\npublic folders, so let me do that.\n\n334\n00:15:49.950 --> 00:15:51.900\nI'm just gonna fire it up on this machine.\n\n335\n00:15:51.900 --> 00:15:54.723\nI got a Windows 7 machine and\nit's already set up for my mail account.\n\n336\n00:15:54.723 --> 00:15:57.703\nNow, when you fire up Outlook,\nit defaults to email, right?\n\n337\n00:15:57.703 --> 00:15:59.384\nIt's kind of what it's designed for.\n\n338\n00:15:59.384 --> 00:16:00.862\nSo I see my email.\n\n339\n00:16:00.862 --> 00:16:02.683\nAnd I don't see anything\nabout public folders.\n\n340\n00:16:02.683 --> 00:16:03.323\nRight?\n\n341\n00:16:03.323 --> 00:16:06.520\nI see Inbox, Drafts, Sent Items,\nJunk Mail, stuff like that.\n\n342\n00:16:06.520 --> 00:16:08.040\nAnd I see my test email right here.\n\n343\n00:16:08.040 --> 00:16:09.400\nTerribly exciting.\n\n344\n00:16:09.400 --> 00:16:10.250\nBut that's about it.\n\n345\n00:16:10.250 --> 00:16:12.990\nI really don't see anything\nrelated to public folders, and\n\n346\n00:16:12.990 --> 00:16:14.240\nthat's because it's kind of hidden away.\n\n347\n00:16:14.240 --> 00:16:17.810\nNot everybody uses it, so\nMicrosoft kind of gave it lower priority.\n\n348\n00:16:17.810 --> 00:16:21.870\nDown at the bottom of my screen I've got\nMail, Calendar, People, Tasks, but if I\n\n349\n00:16:21.870 --> 00:16:26.440\nhit the ellipsis button, I'll see some\nother options and one of them is Folders.\n\n350\n00:16:26.440 --> 00:16:27.680\nWhen you go into Folder View,\n\n351\n00:16:27.680 --> 00:16:31.720\nnow you're seeing the raw\nExchange view inside of Outlook.\n\n352\n00:16:31.720 --> 00:16:34.870\nAnd so you see your inbox, and\nyou'll notice how Calendar and Contacts,\n\n353\n00:16:34.870 --> 00:16:37.390\nsee how it's all grouped\ntogether in folders?\n\n354\n00:16:37.390 --> 00:16:40.380\nI said earlier in the episode all this\nstuff is being stored on the server\n\n355\n00:16:40.380 --> 00:16:41.200\nas emails, right?\n\n356\n00:16:41.200 --> 00:16:42.380\nIt treats it all as email.\n\n357\n00:16:42.380 --> 00:16:44.350\nSo this is showing me the raw folders.\n\n358\n00:16:44.350 --> 00:16:45.570\nAnd I see it that way.\n\n359\n00:16:45.570 --> 00:16:49.000\nNow if I click on Calendar, I'll\nactually see my calendar, that's great.\n\n360\n00:16:49.000 --> 00:16:53.860\nBut, if I look at my folders, I can\nbrowse and pick which one I wanna see.\n\n361\n00:16:53.860 --> 00:16:57.110\nAnd you'll notice at the very bottom,\nthere's Public Folders.\n\n362\n00:16:57.110 --> 00:17:02.050\nAnd if I expand out Public Folders, I'll\nsee all public folders and my favorites.\n\n363\n00:17:02.050 --> 00:17:03.940\nWhich, I don't have any\nfavorites right now.\n\n364\n00:17:03.940 --> 00:17:06.450\nBut if I keep browsing down,\nthere's Marketing,\n\n365\n00:17:06.450 --> 00:17:08.840\nand then there's Sales, all right?\n\n366\n00:17:08.840 --> 00:17:10.690\nAnd under Sales I got UK and\n\n367\n00:17:10.690 --> 00:17:14.340\nUS, and I can start to browse in those and\nend users can start to put data in there.\n\n368\n00:17:14.340 --> 00:17:15.030\nAll right?\n\n369\n00:17:15.030 --> 00:17:16.910\nNow, how can users put data in there?\n\n370\n00:17:16.910 --> 00:17:19.410\nThere's a couple of different ways, right?\n\n371\n00:17:19.410 --> 00:17:22.450\nSo let's say I'm in the marketing\ndepartment and I wanna send some data in.\n\n372\n00:17:22.450 --> 00:17:24.030\nWell, I guess first I need some data.\n\n373\n00:17:24.030 --> 00:17:25.520\nDo I have any data laying around?\n\n374\n00:17:25.520 --> 00:17:28.080\nHere, I'll take one of\nthese sales reports and\n\n375\n00:17:28.080 --> 00:17:31.740\nmaybe we'll just call this,\nthis'll be my Marketing Copy.\n\n376\n00:17:33.030 --> 00:17:36.230\nSo it'll be some kind of marketing\nthing that I've been working on.\n\n377\n00:17:36.230 --> 00:17:38.610\nSo I could just drag it and drop it.\n\n378\n00:17:38.610 --> 00:17:40.510\nThat's one way to get the data in there,\nright?\n\n379\n00:17:40.510 --> 00:17:43.730\nSo if I want this Marketing Copy\nto be in my Marketing folder,\n\n380\n00:17:43.730 --> 00:17:46.680\nI can just drag it and drop it, and\nit's gonna throw it right in there.\n\n381\n00:17:46.680 --> 00:17:50.450\nAnd there's that Marketing Copy.rtf\nright there, all right?\n\n382\n00:17:50.450 --> 00:17:52.230\nBut if I have something else,\n\n383\n00:17:52.230 --> 00:17:56.500\nlike some kind of banner that I wanna\nsend in I could just fire up an email.\n\n384\n00:17:56.500 --> 00:17:59.520\nMaybe I'm on my cell phone, and I wanna\nadd something to that public folder and\n\n385\n00:17:59.520 --> 00:18:00.650\nI don't have Outlook.\n\n386\n00:18:00.650 --> 00:18:03.430\nSo I can just do a new email.\n\n387\n00:18:03.430 --> 00:18:06.080\nAnd see how it's got Post To Marketing?\n\n388\n00:18:06.080 --> 00:18:07.460\nWell, I don't even have to do it this way.\n\n389\n00:18:07.460 --> 00:18:12.840\nI could just jump right back out\nto my email and craft a new email.\n\n390\n00:18:12.840 --> 00:18:15.630\nAnd for that destination, oh,\nnow it's gonna remember me.\n\n391\n00:18:17.310 --> 00:18:18.180\nHere we go.\n\n392\n00:18:18.180 --> 00:18:22.192\nSo I can come in here and craft a new\nemail and for the destination, I could put\n\n393\n00:18:22.192 --> 00:18:26.860\nthe email address for that public folder\nwhich for me was marketing@lab.itpro.tv.\n\n394\n00:18:26.860 --> 00:18:31.587\nAnd I could say this is a banner\nad I've been working on and\n\n395\n00:18:31.587 --> 00:18:33.565\nI can attach that file.\n\n396\n00:18:33.565 --> 00:18:36.600\nWe'll insert that and\nI'll send it via e-mail.\n\n397\n00:18:36.600 --> 00:18:37.560\nAll right.\n\n398\n00:18:37.560 --> 00:18:40.310\nIt's gonna go to the server and the\nserver's gonna see that it's attached to\n\n399\n00:18:40.310 --> 00:18:43.300\nthat public folder, and\nit's gonna put it in the public folder.\n\n400\n00:18:43.300 --> 00:18:48.360\nAnd so now if I go back to my folder view,\nwhen I jump back over here,\n\n401\n00:18:48.360 --> 00:18:51.030\ngo down to my folders,\ngo down to Marketing.\n\n402\n00:18:51.030 --> 00:18:53.910\nIt may take it a moment cuz it's\ngotta process through the server and\n\n403\n00:18:53.910 --> 00:18:55.590\nthe hub transport rules and all that.\n\n404\n00:18:55.590 --> 00:18:58.040\nBut eventually that banner\nad will show up right here.\n\n405\n00:18:58.040 --> 00:18:58.910\nThere it is.\n\n406\n00:18:58.910 --> 00:19:00.900\nAnd now it's an attachment, right.\n\n407\n00:19:00.900 --> 00:19:04.400\nIf I drag and drop it, or if I email\nit in, either way, it's right there.\n\n408\n00:19:04.400 --> 00:19:07.210\nAnd anybody who has access to this\npublic folder can now get to that\n\n409\n00:19:07.210 --> 00:19:08.300\nbanner ad and see it.\n\n410\n00:19:08.300 --> 00:19:11.130\nIt's kind of like a low-feature\nversion of SharePoint.\n\n411\n00:19:11.130 --> 00:19:12.790\nWe can share our files there.\n\n412\n00:19:12.790 --> 00:19:17.760\nYou can't edit them in place, but you\ncan download the attachment, modify it,\n\n413\n00:19:17.760 --> 00:19:19.380\nupload it as a new attachment, right?\n\n414\n00:19:19.380 --> 00:19:20.770\nAnd so\nyou can kinda get that functionality.\n\n415\n00:19:20.770 --> 00:19:25.000\nAll right, other things we can do.\n\n416\n00:19:25.000 --> 00:19:27.380\nBased on your permissions,\nyou can drag and drop things in there.\n\n417\n00:19:27.380 --> 00:19:31.090\nThat's really the easiest way to get data\nin these Is to just come in here and\n\n418\n00:19:31.090 --> 00:19:31.730\ntake your stuff.\n\n419\n00:19:31.730 --> 00:19:34.980\nSo like I've got these quarterly sales\nreports and we can just drag and\n\n420\n00:19:34.980 --> 00:19:37.470\ndrop those and that's gonna throw them in.\n\n421\n00:19:37.470 --> 00:19:40.800\nAnd your Outlook is basically reaching out\nto the servers, uploading these files,\n\n422\n00:19:40.800 --> 00:19:42.080\nand they're being stored here.\n\n423\n00:19:42.080 --> 00:19:47.240\nNow I know they're files but\nExchange treats them like emails.\n\n424\n00:19:47.240 --> 00:19:49.690\nThat's why they have a name,\nthey have a subject.\n\n425\n00:19:49.690 --> 00:19:53.260\nThe file itself is actually an attachment,\nkinda stuck to it.\n\n426\n00:19:53.260 --> 00:19:55.230\nAnd I'm even getting a live preview.\n\n427\n00:19:55.230 --> 00:20:00.260\nThese are RTF files, Rich Text, and so\nit's rendering that Rich Text right there.\n\n428\n00:20:00.260 --> 00:20:02.070\nIf I had thrown a picture or something.\n\n429\n00:20:02.070 --> 00:20:03.270\nLet's see if I can.\n\n430\n00:20:03.270 --> 00:20:05.120\nWe'll steal a picture from the internet.\n\n431\n00:20:05.120 --> 00:20:08.950\nThis is where things get challenging,\n\n432\n00:20:08.950 --> 00:20:11.810\nis finding a picture\nsometimes that's not crazy.\n\n433\n00:20:11.810 --> 00:20:15.230\nActually I guess we could just take\none of these banner ads and [LAUGH].\n\n434\n00:20:15.230 --> 00:20:17.790\nBut if we find a picture and save it,\nwe could throw a picture in there and\n\n435\n00:20:17.790 --> 00:20:19.390\nyou get live previews of these things.\n\n436\n00:20:19.390 --> 00:20:23.720\nIt's kind of neat to be able to work\nwith those and manipulate them.\n\n437\n00:20:23.720 --> 00:20:25.658\nI'm gonna save this Microsoft logo.\n\n438\n00:20:25.658 --> 00:20:29.930\nAnd we'll just save that into my images.\n\n439\n00:20:29.930 --> 00:20:31.550\nAnd we'll take that and throw it in there.\n\n440\n00:20:31.550 --> 00:20:34.520\nAnd so it basically turns\nExchange into a file server.\n\n441\n00:20:34.520 --> 00:20:36.110\nAnd I know I said at\nthe beginning of the episode,\n\n442\n00:20:36.110 --> 00:20:38.810\nExchange doesn't make the greatest\nfile server in the world.\n\n443\n00:20:38.810 --> 00:20:42.020\nAnd I'm gonna stand by that one because\nit's not really what it's designed for.\n\n444\n00:20:42.020 --> 00:20:44.990\nBut you could use SharePoint,\nit does a better job or\n\n445\n00:20:44.990 --> 00:20:46.290\nyou could just use a file server.\n\n446\n00:20:46.290 --> 00:20:47.990\nThat's why we have those things.\n\n447\n00:20:47.990 --> 00:20:51.620\nBut here we go I can see it,\nI can see the file render right here.\n\n448\n00:20:51.620 --> 00:20:54.420\nAnd now I can share it with anybody\nelse that's in my department\n\n449\n00:20:54.420 --> 00:20:56.340\nall right inside that public folder.\n\n450\n00:20:56.340 --> 00:21:00.170\nSo if you've heard the news that\npublic folders are going away.\n\n451\n00:21:00.170 --> 00:21:01.690\nWell, they really aren't anymore.\n\n452\n00:21:01.690 --> 00:21:05.190\nThey've survived 15 years now of\nMicrosoft saying they're going away and\n\n453\n00:21:05.190 --> 00:21:07.180\nin exchange 2013, they're here to stay.\n\n454\n00:21:07.180 --> 00:21:09.020\nThey've been converted to mailboxes.\n\n455\n00:21:09.020 --> 00:21:11.300\nThey're right there in\nthe mailbox database store.\n\n456\n00:21:11.300 --> 00:21:13.334\nAnd that makes them\nreally low maintenance,\n\n457\n00:21:13.334 --> 00:21:16.330\nreal easy to handle and you get\nthe database availability group and\n\n458\n00:21:16.330 --> 00:21:19.700\nother redundancy features you\nhave with the mailbox database.\n\n459\n00:21:19.700 --> 00:21:20.580\nAll wrapped into one.\n\n460\n00:21:20.580 --> 00:21:23.090\nSo it's a great solution,\ndefinitely something to take advantage of.\n\n461\n00:21:24.312 --> 00:21:27.200\nAll right, well in this show we got\na chance to see what the public folders\n\n462\n00:21:27.200 --> 00:21:28.600\nare and how to implement them.\n\n463\n00:21:28.600 --> 00:21:32.740\nHow to get the pubic folder mailboxes\ncreated and then create the public folders\n\n464\n00:21:32.740 --> 00:21:37.330\nthemselves inside of the mailbox and get\nthat up and operational for our end users.\n\n465\n00:21:37.330 --> 00:21:39.830\nSo, that's a great place for\nus to wrap this one up.\n\n466\n00:21:39.830 --> 00:21:41.170\nI hope you guys enjoyed it.\n\n467\n00:21:41.170 --> 00:21:44.957\nSigning off for ITProTV,\nI'm Don Pizet and I'll see you next time.\n\n468\n00:21:44.957 --> 00:21:49.956\n[MUSIC]\n\n",
          "vimeoId": "135992747"
        },
        {
          "description": "In this episode, Don demonstrates how Microsoft Exchange assembles a Global Address List. He also shows how to create custom address lists suitable for creating filtered address books for the end users. He ends the show describing the offline address book process.",
          "length": "1524",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-3-address_books-081215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-3-address_books-081215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-3-address_books-081215-1-sm.jpg",
          "title": "Address Books",
          "transcript": "WEBVTT\n\n1\n00:00:00.510 --> 00:00:11.300\n[MUSIC]\n\n2\n00:00:11.300 --> 00:00:14.289\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:14.289 --> 00:00:16.290\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:16.290 --> 00:00:17.840\nI'm your host Don Pezet.\n\n5\n00:00:17.840 --> 00:00:21.370\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:21.370 --> 00:00:22.631\nAnd in today's episode,\n\n7\n00:00:22.631 --> 00:00:26.540\nwe're gonna take a look at something\nthat is pretty important, address lists.\n\n8\n00:00:26.540 --> 00:00:30.035\nNow, address lists are something we can\neasily ignore inside of Exchange because\n\n9\n00:00:30.035 --> 00:00:31.970\nthere is a default address\nlist put in place.\n\n10\n00:00:31.970 --> 00:00:34.010\nAnd most people use it, and\nthey're happy with that.\n\n11\n00:00:34.010 --> 00:00:35.260\nAnd that's kinda the end of it.\n\n12\n00:00:35.260 --> 00:00:39.180\nBut there's a lot of power in the back end\nwhere we can customize those address lists\n\n13\n00:00:39.180 --> 00:00:40.300\nthat people overlook.\n\n14\n00:00:40.300 --> 00:00:43.580\nAnd it can really be a neat thing\nthat you can use to your advantage.\n\n15\n00:00:43.580 --> 00:00:46.060\nSo, let me show you\nwhat I'm talking about.\n\n16\n00:00:46.060 --> 00:00:46.802\nIf I'm an end user,\n\n17\n00:00:46.802 --> 00:00:49.130\nI'm gonna use something like\nMicrosoft Outlook as my client.\n\n18\n00:00:49.130 --> 00:00:51.163\nAnd when I go to create a new email,\n\n19\n00:00:51.163 --> 00:00:54.630\nI have to pick who that\nemail's being sent to, right?\n\n20\n00:00:54.630 --> 00:00:57.280\nSo you got your To field,\nit's terribly exciting.\n\n21\n00:00:57.280 --> 00:00:59.470\nNow, we've got our own contacts, right?\n\n22\n00:00:59.470 --> 00:01:02.360\nEach end user has their own\ncontacts they keep track of, right?\n\n23\n00:01:02.360 --> 00:01:04.230\nSo I can jump down here to People.\n\n24\n00:01:04.230 --> 00:01:06.580\nAnd I'll start to see any\ncontacts that I have.\n\n25\n00:01:06.580 --> 00:01:08.180\nThose are just for me.\n\n26\n00:01:08.180 --> 00:01:13.210\nBut if I'm an employee in\na company with 10,000 employees,\n\n27\n00:01:13.210 --> 00:01:15.450\nshouldn't I see the other\n10,000 employees?\n\n28\n00:01:15.450 --> 00:01:16.025\nWell, you can.\n\n29\n00:01:16.025 --> 00:01:17.720\nThey're not in your contacts by default.\n\n30\n00:01:17.720 --> 00:01:22.142\nThis is just for your account, but,\nwe have what's called the global address\n\n31\n00:01:22.142 --> 00:01:25.490\nlist, or the GAL, G-A-L,\nglobal address list.\n\n32\n00:01:25.490 --> 00:01:28.920\nThat contains all of the recipients for\nour organization.\n\n33\n00:01:28.920 --> 00:01:33.427\nAnd when I say recipients, that means\nmailboxes, contacts, groups, distribution\n\n34\n00:01:33.427 --> 00:01:37.670\nlists, all that kind of stuff, it will\nall be in that global address list.\n\n35\n00:01:37.670 --> 00:01:41.300\nNow, an end user can see it even\nwhen they're crafting a new email.\n\n36\n00:01:41.300 --> 00:01:43.880\nIf I fire up a new email,\nand I come in here,\n\n37\n00:01:43.880 --> 00:01:47.200\nyou've got this Address Book\nbutton up here in the email.\n\n38\n00:01:47.200 --> 00:01:52.310\nAnd if I choose that, I start to see\nmy global address list right there.\n\n39\n00:01:52.310 --> 00:01:53.920\nI can drop that down and choose Contacts.\n\n40\n00:01:53.920 --> 00:01:57.133\nNow I just see the contacts on my account,\nbut I can also drop it down and\n\n41\n00:01:57.133 --> 00:01:58.510\nchoose Global Address List.\n\n42\n00:01:58.510 --> 00:02:03.970\nAnd I see everybody, users, groups,\nall that stuff, it shows up right here.\n\n43\n00:02:03.970 --> 00:02:05.620\nI can see it, it's available to me.\n\n44\n00:02:05.620 --> 00:02:10.890\nNow, the advantage of this is, is that\na new employee on day one, already has\n\n45\n00:02:10.890 --> 00:02:14.010\na complete listing of all the employees\nin the company that he can email to.\n\n46\n00:02:14.010 --> 00:02:18.430\nBut if you've got 50,000 people in\nyour organization, that's a lot, and\n\n47\n00:02:18.430 --> 00:02:20.420\nwe probably want to filter that down.\n\n48\n00:02:20.420 --> 00:02:24.470\nAnd that's where we want to customize\nthis global address list a bit, right.\n\n49\n00:02:24.470 --> 00:02:28.523\nAnd there's a few filters already in\nplace, right, we've got All Contacts,\n\n50\n00:02:28.523 --> 00:02:30.070\nAll Groups, Rooms, Users.\n\n51\n00:02:30.070 --> 00:02:31.960\nThese are ways we can filter down a bit.\n\n52\n00:02:31.960 --> 00:02:36.630\nBut what if I want to filter down to say,\njust people in the sales department?\n\n53\n00:02:36.630 --> 00:02:38.672\nWell, it doesn't give me\na good way to do that, and\n\n54\n00:02:38.672 --> 00:02:40.300\nin a massive organization we want that.\n\n55\n00:02:40.300 --> 00:02:44.480\nSo, what we'll want to do is on our\nserver, create additional address list\n\n56\n00:02:44.480 --> 00:02:46.930\nthat are filtered based on\ncriteria we provide, all right?\n\n57\n00:02:46.930 --> 00:02:49.130\nLet me show you how that works.\n\n58\n00:02:49.130 --> 00:02:50.570\nIt's really not that hard.\n\n59\n00:02:50.570 --> 00:02:55.160\nIf we jump back here to our\nExchange administration center,\n\n60\n00:02:55.160 --> 00:02:58.130\nright, so I'm gonna jump into my EAC.\n\n61\n00:02:58.130 --> 00:03:01.267\nAnd once I'm in here, you'll see all\nthe different things on the left side,\n\n62\n00:03:01.267 --> 00:03:03.930\nand in each of these are different\nkind of aspects of our company.\n\n63\n00:03:03.930 --> 00:03:07.010\nAnd the one I'm looking for\nis organization.\n\n64\n00:03:07.010 --> 00:03:10.690\nAnd under organization,\nyou'll see address lists, right.\n\n65\n00:03:10.690 --> 00:03:11.730\nThese are the address lists for\n\n66\n00:03:11.730 --> 00:03:16.590\nyour company, and you have the Default\nGlobal Address List right there.\n\n67\n00:03:16.590 --> 00:03:20.590\nThat's that primary one that all of\nyour users are gonna have access to, and\n\n68\n00:03:20.590 --> 00:03:24.630\nit contains every single person\nthroughout your organization, all right?\n\n69\n00:03:24.630 --> 00:03:27.954\nNow, the other ones that are created here,\nAll Contacts, All Groups,\n\n70\n00:03:27.954 --> 00:03:29.862\nAll Rooms, All Users, Public Folders,\n\n71\n00:03:29.862 --> 00:03:33.330\nthose other ones that are designed\nto be those simple filters.\n\n72\n00:03:33.330 --> 00:03:36.755\nMicrosoft encourages you to leave these\nalone, leave the default ones be.\n\n73\n00:03:36.755 --> 00:03:39.240\nThen if you want to create custom ones,\njust create your own.\n\n74\n00:03:39.240 --> 00:03:43.020\nAnd so we can add those in,\nI mentioned sales people, right?\n\n75\n00:03:43.020 --> 00:03:47.292\nSo, if I take a look,\nlet me go into my Active Directory,\n\n76\n00:03:47.292 --> 00:03:50.590\nwhich I have parked around here somewhere.\n\n77\n00:03:50.590 --> 00:03:53.829\nAll right, I'm gonna go into my\nActive Directory Users and Computers, and\n\n78\n00:03:53.829 --> 00:03:55.890\nlet's take a look at my OU structure.\n\n79\n00:03:55.890 --> 00:03:59.510\nSo I've got this OU called ITProTV,\nand inside of ITProTV,\n\n80\n00:03:59.510 --> 00:04:03.920\nI've got Accounting, IT,\nMarketing, Sales, right.\n\n81\n00:04:03.920 --> 00:04:07.070\nAnd say I'm in sales,\nI've got Jane Smith and John Doe.\n\n82\n00:04:07.070 --> 00:04:11.970\nI've got the UK Sales and US Sales,\nthese groups that are present.\n\n83\n00:04:11.970 --> 00:04:15.910\nBut me, I'm over here in IT,\nso I'm separate.\n\n84\n00:04:15.910 --> 00:04:21.830\nWell, if I jump back to my client, so if\nI jump back over to, whoops, there we go.\n\n85\n00:04:21.830 --> 00:04:22.920\nJump back over to my client.\n\n86\n00:04:22.920 --> 00:04:26.645\nWhen I went into Outlook,\nin Outlook, that new email,\n\n87\n00:04:26.645 --> 00:04:28.995\nmy Global Address List,\nit contained everybody, right?\n\n88\n00:04:28.995 --> 00:04:33.373\nSo I saw me, Don Pezet, who's in\nthe IT department, and I saw Sales,\n\n89\n00:04:33.373 --> 00:04:36.875\nUK Sales, and US Sales,\nwhich were in the sales group.\n\n90\n00:04:36.875 --> 00:04:39.215\nAnd I saw Marketing,\nwhich was in the Marketing OU.\n\n91\n00:04:39.215 --> 00:04:40.950\nIt's really the whole thing.\n\n92\n00:04:40.950 --> 00:04:44.640\nI wanna create a filter based\njust on the Sales OU, all right?\n\n93\n00:04:44.640 --> 00:04:50.800\nSo, what we do is we jump back to our EAC,\nand we create a new address list.\n\n94\n00:04:50.800 --> 00:04:53.898\nI'm just gonna hit the plus sign\nthere to create a new one, and\n\n95\n00:04:53.898 --> 00:04:56.170\nI'm gonna call this\nthe Sales Address List.\n\n96\n00:04:56.170 --> 00:04:57.310\nOr, I'll just call it Sales.\n\n97\n00:04:58.420 --> 00:05:01.430\nFrom there, we start to pick what\nwe want to show up, all right.\n\n98\n00:05:01.430 --> 00:05:06.200\nDo I want it to show all recipient\ntypes or just user mailboxes,\n\n99\n00:05:06.200 --> 00:05:08.880\njust contacts or a mixture of them, right?\n\n100\n00:05:08.880 --> 00:05:11.320\nI might not want to show\ndistribution groups.\n\n101\n00:05:11.320 --> 00:05:15.300\nI might just want to show users with\nExchange mailboxes or a mixture.\n\n102\n00:05:15.300 --> 00:05:18.220\nSo you can go through and\nkinda pick what you wanna see, or\n\n103\n00:05:18.220 --> 00:05:20.220\nwhat you wanna be a part of that, right?\n\n104\n00:05:20.220 --> 00:05:23.050\nSo, for example, I might wanna\nleave out resource mailboxes.\n\n105\n00:05:23.050 --> 00:05:25.380\nI don't wanna include things\nlike rooms and projectors.\n\n106\n00:05:25.380 --> 00:05:26.750\nI just want it to be people.\n\n107\n00:05:26.750 --> 00:05:29.080\nSo I'll say, yeah,\ngo ahead and show me users.\n\n108\n00:05:29.080 --> 00:05:31.090\nShow me contacts, show me groups.\n\n109\n00:05:31.090 --> 00:05:32.620\nBut I'll leave out those\nresource mailboxes.\n\n110\n00:05:33.790 --> 00:05:37.860\nAnd then the real important part is this\nguy right here, the add a rule, all right.\n\n111\n00:05:37.860 --> 00:05:41.550\nAdding a rule is where we dictate where\nit's gonna find this information from.\n\n112\n00:05:41.550 --> 00:05:43.290\nAnd I'll hit add a rule, and\n\n113\n00:05:43.290 --> 00:05:46.200\nyou can pick from a number of\ndifferent things to filter on, right.\n\n114\n00:05:46.200 --> 00:05:49.920\nYou've got things like the State or\nprovince, Company, Department, and\n\n115\n00:05:49.920 --> 00:05:52.280\nall these Custom attributes, all right.\n\n116\n00:05:52.280 --> 00:05:55.040\nThese are all coming from\nthe Active Directory.\n\n117\n00:05:55.040 --> 00:05:58.530\nIf I jump back over to my\ndomain controller, and\n\n118\n00:05:58.530 --> 00:06:02.210\nwe take somebody like me\nin the Active Directory.\n\n119\n00:06:02.210 --> 00:06:06.288\nIf I pull up my account, I've got\nthings like that Description, Office,\n\n120\n00:06:06.288 --> 00:06:07.860\nTelephone number.\n\n121\n00:06:07.860 --> 00:06:11.760\nAnd as we browse through here, you'll find\nother things that identify that person,\n\n122\n00:06:11.760 --> 00:06:13.630\ntheir City, their State.\n\n123\n00:06:13.630 --> 00:06:15.080\nThose are the things\nthat we could filter on.\n\n124\n00:06:15.080 --> 00:06:18.970\nSo, just show me the employees\nthat are working out of Florida.\n\n125\n00:06:18.970 --> 00:06:21.940\nOr just show me the employees\nthat are in England, right.\n\n126\n00:06:21.940 --> 00:06:23.540\nAnd so we can filter on that.\n\n127\n00:06:23.540 --> 00:06:27.240\nBut I find the most useful\nis filtering based on OU.\n\n128\n00:06:27.240 --> 00:06:33.490\nRight, and back on that list, that was the\none that showed up as Recipient container.\n\n129\n00:06:33.490 --> 00:06:35.670\nSo, if I want to filter\nby recipient container,\n\n130\n00:06:35.670 --> 00:06:40.130\nit lets me browse the Active Directory and\npick the OU that has the users I want.\n\n131\n00:06:40.130 --> 00:06:43.670\nSo, I can browse in here,\nand I can say, just Sales.\n\n132\n00:06:43.670 --> 00:06:44.936\nAnd I'll pick that, and\n\n133\n00:06:44.936 --> 00:06:49.170\nnow it's only gonna show me recipients\nthat aren't resource mailboxes, right.\n\n134\n00:06:49.170 --> 00:06:53.611\nI left that one off that are in\nthe sales OU, and when I save that,\n\n135\n00:06:53.611 --> 00:06:56.340\nit's gonna create that address list.\n\n136\n00:06:56.340 --> 00:07:00.000\nAnd now I've got this list that kinda\nbreaks that down for me, all right.\n\n137\n00:07:00.000 --> 00:07:03.090\nNow, notice there's\nthis Address list path.\n\n138\n00:07:03.090 --> 00:07:07.140\nBy default, every address list\nis like a parent address list.\n\n139\n00:07:07.140 --> 00:07:09.720\nAnd when we start to create more,\n\n140\n00:07:09.720 --> 00:07:13.240\nyou can choose to nest address\nlists underneath the other ones.\n\n141\n00:07:13.240 --> 00:07:17.592\nSo for example, back in Outlook when I was\nwriting that new email, when I was in my\n\n142\n00:07:17.592 --> 00:07:21.760\nAddress Book, if I drop that down,\nsee how I've got this All Address Lists?\n\n143\n00:07:21.760 --> 00:07:24.510\nAnd these other ones are kinda\nnested underneath it.\n\n144\n00:07:24.510 --> 00:07:25.440\nWe can set that up.\n\n145\n00:07:25.440 --> 00:07:27.520\nWe can have a parent, and\nthen children underneath it.\n\n146\n00:07:27.520 --> 00:07:31.360\nSo, I might have a Sales list,\nand then underneath it,\n\n147\n00:07:31.360 --> 00:07:34.174\nI might have US, UK, and so on.\n\n148\n00:07:34.174 --> 00:07:37.370\nSo kinda breaking it down that way, you\ncan nest the address lists to create that.\n\n149\n00:07:39.860 --> 00:07:41.640\nAll right,\nnow when I created the address list,\n\n150\n00:07:41.640 --> 00:07:43.340\nI did get a little warning that popped up.\n\n151\n00:07:43.340 --> 00:07:46.650\nAnd it's just warning me about\nhow these things get updated.\n\n152\n00:07:46.650 --> 00:07:48.519\nIt's telling me that I've made a change.\n\n153\n00:07:48.519 --> 00:07:50.539\nBut the address list isn't\ngonna update on its own.\n\n154\n00:07:50.539 --> 00:07:52.091\nAnd that's important to remember,\n\n155\n00:07:52.091 --> 00:07:54.800\nbecause these address lists get\nupdated on a certain interval.\n\n156\n00:07:54.800 --> 00:07:57.561\nAnd by default it usually doesn't\nhappen until midnight, so\n\n157\n00:07:57.561 --> 00:08:01.008\nif I want these changes to take effect\nright away I need to go ahead and push it,\n\n158\n00:08:01.008 --> 00:08:02.810\nso that's what that warning is.\n\n159\n00:08:02.810 --> 00:08:04.250\nI'll just say OK to that.\n\n160\n00:08:04.250 --> 00:08:06.370\nAnd I can see my Sales\naddress list right here, and\n\n161\n00:08:06.370 --> 00:08:08.730\nnotice in the Up to Date column,\nit says No.\n\n162\n00:08:10.300 --> 00:08:12.370\nIt's not unusual to see No there.\n\n163\n00:08:12.370 --> 00:08:15.780\nIf any changes have happened\nin your Active Directory and\n\n164\n00:08:15.780 --> 00:08:18.640\nthe address list hasn't been updated yet,\nit's gonna say that it's not up to date.\n\n165\n00:08:18.640 --> 00:08:22.160\nAnd then it brings it up to date every\nnight during your maintenance interval,\n\n166\n00:08:22.160 --> 00:08:23.220\nduring that window.\n\n167\n00:08:23.220 --> 00:08:25.220\nI think the default is midnight to 3 AM,\nso\n\n168\n00:08:25.220 --> 00:08:27.830\nsomewhere in that time\nit's gonna do that update.\n\n169\n00:08:27.830 --> 00:08:29.960\nBut we can bring it up to date on our own.\n\n170\n00:08:29.960 --> 00:08:31.170\nIf you highlight any of these lists,\n\n171\n00:08:31.170 --> 00:08:33.690\nyou'll see the link over\nhere that says Update and\n\n172\n00:08:33.690 --> 00:08:35.350\nwe can tell it to update it right now.\n\n173\n00:08:35.350 --> 00:08:39.210\nIt's just warning us that if your\naddress list is big, it can actually\n\n174\n00:08:39.210 --> 00:08:42.730\nkind of degrade performance on the server\nwhile it rebuilds that address list.\n\n175\n00:08:42.730 --> 00:08:46.370\nSo it's just saying here if it's\nmore than 3,000 recipients,\n\n176\n00:08:46.370 --> 00:08:48.770\nyou should consider\ndoing this after hours.\n\n177\n00:08:48.770 --> 00:08:52.260\nAnd they give you the PowerShell command\nright there, Update-AddressList.\n\n178\n00:08:52.260 --> 00:08:56.344\nTo be able to do that, to schedule\nit to happen at 2 AM or 5 AM or\n\n179\n00:08:56.344 --> 00:08:58.150\nsome non-peak time.\n\n180\n00:08:58.150 --> 00:09:00.430\nBut my address list is really small,\nso I'll go ahead and say Yes and\n\n181\n00:09:00.430 --> 00:09:02.860\nlet it build right now, and it's done.\n\n182\n00:09:02.860 --> 00:09:04.210\nAnd now I can see that it's up to date.\n\n183\n00:09:05.675 --> 00:09:07.575\nNow when you create\naddress lists like this,\n\n184\n00:09:07.575 --> 00:09:11.505\nthe end users don't necessarily see them\nright away, and that's because Outlook is\n\n185\n00:09:11.505 --> 00:09:15.365\nactually downloading these address lists\nand displaying them to them locally.\n\n186\n00:09:15.365 --> 00:09:17.835\nIf they're in Outlook web access it\nwill normally turn up right away, but\n\n187\n00:09:17.835 --> 00:09:20.372\nif they're in that Outlook\nclient it might not be there.\n\n188\n00:09:20.372 --> 00:09:23.072\nSo for example,\nif I go into my address book now and\n\n189\n00:09:23.072 --> 00:09:26.632\ndrop that down, I don't see my Sales list.\n\n190\n00:09:26.632 --> 00:09:31.292\nSo I'm gonna go ahead and exit out of\nOutlook and so we'll just close it down.\n\n191\n00:09:31.292 --> 00:09:34.162\nAnd I'm gonna give it a second.\n\n192\n00:09:34.162 --> 00:09:35.992\nOutlook doesn't always close cleanly.\n\n193\n00:09:35.992 --> 00:09:39.462\nSometimes it's still running in the\nbackground as it finishes up little tasks,\n\n194\n00:09:39.462 --> 00:09:42.810\nso I'm just gonna check my Task Manager,\nmake sure it's actually gone, and\n\n195\n00:09:42.810 --> 00:09:43.540\nthen I'll go back in.\n\n196\n00:09:43.540 --> 00:09:45.840\nSo when I go back in, it'll contact\nthe server and it should say, oh,\n\n197\n00:09:45.840 --> 00:09:47.610\nlook, I got a new address list.\n\n198\n00:09:47.610 --> 00:09:50.190\nAnd it should just have our sales people.\n\n199\n00:09:50.190 --> 00:09:53.680\nNow I'm using my IT technical term of\nshould which gives me a little bit of\n\n200\n00:09:53.680 --> 00:09:57.830\na backout if this doesn't work, but\nit should show up pretty shortly.\n\n201\n00:09:57.830 --> 00:09:59.370\nSo when I go into my address list now and\n\n202\n00:09:59.370 --> 00:10:02.475\nI take a look,\nI should see my Sales address list.\n\n203\n00:10:02.475 --> 00:10:03.800\nAnd I still don't, and\n\n204\n00:10:03.800 --> 00:10:06.180\nthat just means that Outlook hasn't\nactually downloaded that yet.\n\n205\n00:10:06.180 --> 00:10:07.770\nSo we have to give it\na moment to download.\n\n206\n00:10:07.770 --> 00:10:10.980\nSo while we're waiting on that,\nlet's take a look at something else and\n\n207\n00:10:10.980 --> 00:10:12.440\nthat'll pull up shortly.\n\n208\n00:10:12.440 --> 00:10:15.500\nI guess I could switch over to OWA and\nwe'd see it there.\n\n209\n00:10:15.500 --> 00:10:19.260\nI'm logged into OWA here and\nif I just craft a new email.\n\n210\n00:10:19.260 --> 00:10:21.350\nAnd I go into my To field for\n\n211\n00:10:21.350 --> 00:10:25.010\nwho I want to email,\nby default it's showing me my contacts.\n\n212\n00:10:25.010 --> 00:10:28.640\nBut if I hit the little arrows over here\nI can see everything, and sure enough,\n\n213\n00:10:28.640 --> 00:10:31.710\nright there at the bottom\nthere's that Sales address list.\n\n214\n00:10:31.710 --> 00:10:36.340\nAnd when I choose it, now it's just gonna\nshow me things that are in the Sales OU.\n\n215\n00:10:36.340 --> 00:10:40.310\nI'm not seeing me, right,\nDon Pezet, I'm in the IT department.\n\n216\n00:10:40.310 --> 00:10:42.980\nI'm not in the sales department and\nso it doesn't show it.\n\n217\n00:10:42.980 --> 00:10:47.000\nIt's now filtered and I can pick from\nthose groups that were in there and\n\n218\n00:10:47.000 --> 00:10:47.680\nwe can go from there.\n\n219\n00:10:47.680 --> 00:10:51.370\nNow I had a couple of users in there,\nJohn Doe and Jane Smith.\n\n220\n00:10:51.370 --> 00:10:54.750\nThey must not be mail enabled so\nthey're not showing up here in my list.\n\n221\n00:10:54.750 --> 00:10:57.420\nI can actually verify that real quick\nif I take a look at my recipients.\n\n222\n00:10:57.420 --> 00:11:00.610\nYeah, sure enough, they don't have\nmailboxes, but if I were to whip them up\n\n223\n00:11:00.610 --> 00:11:03.930\nsome mailboxes real quick, then they would\nhave that and they'd show in the list.\n\n224\n00:11:03.930 --> 00:11:07.680\nBut what we've done right here is to\ncreate that custom address list, and\n\n225\n00:11:07.680 --> 00:11:10.090\nyou can really create as\nmany of these as you need.\n\n226\n00:11:10.090 --> 00:11:11.910\nOrganizations might create a ton.\n\n227\n00:11:11.910 --> 00:11:15.530\nI know I've worked for companies that\ndid business in multiple states or\n\n228\n00:11:15.530 --> 00:11:16.740\nmultiple countries, and\n\n229\n00:11:16.740 --> 00:11:19.540\nyou might want to create address\nlists that are a little more focused.\n\n230\n00:11:19.540 --> 00:11:21.420\nIf you have 50,000 employees,\n\n231\n00:11:21.420 --> 00:11:23.850\nwhat are the odds of you having\nmultiple employees with the same name?\n\n232\n00:11:24.980 --> 00:11:26.140\nIt happens all the time.\n\n233\n00:11:26.140 --> 00:11:28.300\nYou might have five different John Smiths.\n\n234\n00:11:28.300 --> 00:11:31.890\nBut if you work in Florida and you know\nthe John Smith you want is in Florida\n\n235\n00:11:31.890 --> 00:11:35.080\nalso, wouldn't it be nice to filter\ndown to just people in Florida?\n\n236\n00:11:35.080 --> 00:11:37.380\nThat's what these custom\naddress lists let us do.\n\n237\n00:11:37.380 --> 00:11:40.830\nSo we can whip those up, throw them in\nplace and really have that functionality.\n\n238\n00:11:40.830 --> 00:11:43.920\nNow the end users can't do this.\n\n239\n00:11:43.920 --> 00:11:45.280\nAdministrators have to do it, and\n\n240\n00:11:45.280 --> 00:11:48.110\nthat's because it's done through\nthe Exchange Administration Center.\n\n241\n00:11:48.110 --> 00:11:50.860\nThat we have to go in here\nto our organization and\n\n242\n00:11:50.860 --> 00:11:54.740\nthen go into our address list to\ncustomize that and build them.\n\n243\n00:11:54.740 --> 00:11:57.030\nNow once you've built an address list,\nyou can change it.\n\n244\n00:11:57.030 --> 00:12:00.100\nIf I choose it, I can always come in\nhere and edit it, and we can go in and\n\n245\n00:12:00.100 --> 00:12:01.640\nstart to modify the address list.\n\n246\n00:12:01.640 --> 00:12:04.570\nSo if I choose to add those\nresource mailboxes back in,\n\n247\n00:12:04.570 --> 00:12:06.510\nit's easy to change this after the fact.\n\n248\n00:12:06.510 --> 00:12:10.410\nJust remember to do an update of\nthe address list after you make a change.\n\n249\n00:12:10.410 --> 00:12:12.560\nAnd if you're not sure if\nyour filter's working,\n\n250\n00:12:12.560 --> 00:12:15.600\nyou've got this nice little\nPreview recipients link.\n\n251\n00:12:15.600 --> 00:12:18.470\nAnd you can hit that, and it'll give you\na preview of what this list is going to\n\n252\n00:12:18.470 --> 00:12:21.030\nlook like so\nyou can then customize it some more\n\n253\n00:12:21.030 --> 00:12:23.682\nto really meet the needs of what it\nis that you're trying to achieve.\n\n254\n00:12:25.930 --> 00:12:29.190\nAll right,\nanother thing we need to be aware of is,\n\n255\n00:12:29.190 --> 00:12:32.220\nwell it kinda ties back to what I was\ntalking about a moment ago with Outlook.\n\n256\n00:12:32.220 --> 00:12:37.840\nWith Outlook, it's gonna download a copy\nof these address lists to store locally.\n\n257\n00:12:37.840 --> 00:12:40.990\nAnd it's checking in with the server from\ntime to time to get those updates, and\n\n258\n00:12:40.990 --> 00:12:43.040\nso it can be a little bit behind.\n\n259\n00:12:43.040 --> 00:12:47.700\nWhat it's doing is it's creating what's\ncalled an offline address book or and OAB.\n\n260\n00:12:47.700 --> 00:12:50.750\nAnd the OAB, it's stored on all\nof your Client Access servers.\n\n261\n00:12:50.750 --> 00:12:53.200\nSo your Client Access servers\nmaintain a copy of the OAB and\n\n262\n00:12:53.200 --> 00:12:55.920\nwhen Outlook goes to connect,\nit downloads a copy of it.\n\n263\n00:12:55.920 --> 00:12:59.420\nSo that offline address book,\nit has to be updated and refreshed and\n\n264\n00:12:59.420 --> 00:13:01.470\nit has to be distributed\nout to your clients.\n\n265\n00:13:01.470 --> 00:13:04.170\nSo it's done automatically for\nthe most part,\n\n266\n00:13:04.170 --> 00:13:07.340\nwe don't really have to worry about it,\nbut we can tweak it.\n\n267\n00:13:07.340 --> 00:13:11.590\nIf your organization is huge, if you\nhave hundreds of thousands of employees,\n\n268\n00:13:11.590 --> 00:13:14.050\nthat offline address\nbook can be kinda big.\n\n269\n00:13:14.050 --> 00:13:17.730\nSo you might want to create\nsmaller offline address books that\n\n270\n00:13:17.730 --> 00:13:19.670\nonly contain certain\naspects of your company.\n\n271\n00:13:19.670 --> 00:13:22.520\nSo maybe I have employees in Florida.\n\n272\n00:13:22.520 --> 00:13:26.250\nAnd so I only want the offline address\nbook to contain employees in Florida,\n\n273\n00:13:26.250 --> 00:13:27.650\nnot the rest of the world.\n\n274\n00:13:27.650 --> 00:13:30.440\nSo I could create custom offline\naddress books for that and\n\n275\n00:13:30.440 --> 00:13:32.200\ndictate where that goes.\n\n276\n00:13:32.200 --> 00:13:36.260\nSo that's something that we can\ncertainly do and customize that and\n\n277\n00:13:36.260 --> 00:13:39.870\nit definitely helps cuz it can take\nOutlook a while to get some of this stuff.\n\n278\n00:13:39.870 --> 00:13:42.410\nNow the offline address books,\nthey're being built automatically.\n\n279\n00:13:42.410 --> 00:13:44.304\nI believe the default is at 5 AM.\n\n280\n00:13:44.304 --> 00:13:46.930\nAt 5 AM every day it builds\nthese offline address books and\n\n281\n00:13:46.930 --> 00:13:49.700\nit stores them on the hard drive\non your Client Access server.\n\n282\n00:13:49.700 --> 00:13:52.590\nSo it's just inside of the Exchange\ndirectory where they're stored.\n\n283\n00:13:52.590 --> 00:13:56.200\nAnd we can actually kinda browse and\nfind some of them.\n\n284\n00:13:56.200 --> 00:14:02.605\nHere, let me take my Client Access server\nhere and, actually, you know what?\n\n285\n00:14:02.605 --> 00:14:04.765\nI think we can find it on\nour Mailbox server too,\n\n286\n00:14:04.765 --> 00:14:06.835\nlet's see if we can find\none of these real quick.\n\n287\n00:14:06.835 --> 00:14:08.795\nSo here I am on my Mailbox server.\n\n288\n00:14:08.795 --> 00:14:11.695\nThe Mailbox server's what actually builds\nit, it's where the mailboxes reside,\n\n289\n00:14:11.695 --> 00:14:14.705\nand then it gets stored on\nthe Client Access server too.\n\n290\n00:14:14.705 --> 00:14:22.228\nSo if I browse into C: > Program Files\n> Microsoft > Exchange Server > V15.\n\n291\n00:14:22.228 --> 00:14:27.660\nAnd then ClientAccess because it's\npart of that client access role, and\n\n292\n00:14:27.660 --> 00:14:29.030\nthen we'll get in there.\n\n293\n00:14:29.030 --> 00:14:31.650\nWhat you'll find is in that folder there\nwill be another folder called OAB, and\n\n294\n00:14:31.650 --> 00:14:34.170\nthat's where the offline\naddress book is stored.\n\n295\n00:14:34.170 --> 00:14:38.126\nAnd apparently mine is going to\ntake it's time to browse in there.\n\n296\n00:14:38.126 --> 00:14:40.990\nLet me do this on the Client Access\nserver while we wait.\n\n297\n00:14:40.990 --> 00:14:44.270\nSo this is another one of those\nexamples where the roles work together.\n\n298\n00:14:44.270 --> 00:14:46.140\nThe Mailbox server's\nwhat's building it and\n\n299\n00:14:46.140 --> 00:14:48.040\nthe Client Access server\nis what's serving it up.\n\n300\n00:14:48.040 --> 00:14:50.240\nSo we should be able to\nfind that in both places.\n\n301\n00:14:50.240 --> 00:14:54.346\nSo if I get too impatient on one I\nshould be able to find it on the other.\n\n302\n00:14:56.913 --> 00:14:59.580\nAnd let's see, not seeing it there.\n\n303\n00:14:59.580 --> 00:15:00.260\nHere we go.\n\n304\n00:15:00.260 --> 00:15:04.550\nSo back in my mail server it's got\nthat OAB, and if I browse into that\n\n305\n00:15:04.550 --> 00:15:06.890\nwe'll see the offline address book,\nif it's been created.\n\n306\n00:15:06.890 --> 00:15:10.130\nOn a clean install, your offline address\nbook might not have been created yet\n\n307\n00:15:10.130 --> 00:15:11.792\nif you just finished your install.\n\n308\n00:15:11.792 --> 00:15:12.980\nBut mine's been running for\n\n309\n00:15:12.980 --> 00:15:16.260\na little while and so\nI can see I've got a web.config, Temp.\n\n310\n00:15:16.260 --> 00:15:18.630\nI've got a U ID folder.\n\n311\n00:15:18.630 --> 00:15:20.370\nAnd this is the offline address book.\n\n312\n00:15:20.370 --> 00:15:21.770\nIt's not terribly large for mine.\n\n313\n00:15:21.770 --> 00:15:25.259\nMine's pretty small because I\ndon't have a lot of contacts, so\n\n314\n00:15:25.259 --> 00:15:29.190\nthere's not really a whole heck of\na lot for me to see in this one.\n\n315\n00:15:29.190 --> 00:15:33.290\nBut as your organization grows, what\nyou'll see is these things start to grow\n\n316\n00:15:33.290 --> 00:15:36.680\nalso, and\nyou end up with a large amount of data.\n\n317\n00:15:36.680 --> 00:15:39.750\nHere's my actual offline address\nbook right here, oab.xml.\n\n318\n00:15:39.750 --> 00:15:44.360\nIt's just an XML document, and\nmine's 21K, but as I add employees,\n\n319\n00:15:44.360 --> 00:15:46.310\nthat can grow, and\nit can become several megabytes.\n\n320\n00:15:46.310 --> 00:15:47.870\nNow that's not a big deal, but\n\n321\n00:15:47.870 --> 00:15:51.420\nif you have a massive organization\nit can grow to be 100 megs.\n\n322\n00:15:51.420 --> 00:15:52.421\nIt can grow to be even bigger.\n\n323\n00:15:52.421 --> 00:15:57.226\nAnd that can be a problem if you have\nusers on low bandwidth connections, so\n\n324\n00:15:57.226 --> 00:16:00.061\nthat's where we might\nneed to dice this up.\n\n325\n00:16:00.061 --> 00:16:00.781\nAll right.\n\n326\n00:16:00.781 --> 00:16:06.243\nNow, when we go to push this out, if we\nwanna create custom offline address lists,\n\n327\n00:16:06.243 --> 00:16:09.300\nthey don't give you a way\nto do that in the GUI.\n\n328\n00:16:09.300 --> 00:16:12.356\nSo, I can't do it from the Exchange\nadministration center,\n\n329\n00:16:12.356 --> 00:16:14.136\nI have to do it from the PowerShell.\n\n330\n00:16:14.136 --> 00:16:16.553\nAnd in the PowerShell,\nwe can build these custom address list,\n\n331\n00:16:16.553 --> 00:16:18.980\nthese offline address lists,\nand push them out.\n\n332\n00:16:18.980 --> 00:16:22.500\nAnd then as far as assigning the offline\naddress list, what you do is you create\n\n333\n00:16:22.500 --> 00:16:26.790\nthese offline address list policies and\nthat dictates who it applies to.\n\n334\n00:16:26.790 --> 00:16:30.650\nBut one of the easiest ways to do it is\nto do it based on your mailbox database.\n\n335\n00:16:30.650 --> 00:16:34.700\nIf I go down here to my servers, and\n\n336\n00:16:34.700 --> 00:16:37.770\nI go to my databases,\nI'll see my mailbox databases.\n\n337\n00:16:37.770 --> 00:16:40.254\nAnd see how I've created\na Sales mailbox database?\n\n338\n00:16:40.254 --> 00:16:42.425\nThat's where my Sales\nemployees are going to be.\n\n339\n00:16:42.425 --> 00:16:46.612\nIf I edit that mailbox database,\nyou've actually got the option in\n\n340\n00:16:46.612 --> 00:16:50.080\nhere to dictate what offline\naddress book they use.\n\n341\n00:16:50.080 --> 00:16:52.620\nSo I can go here to client settings and\nI can browse and choose.\n\n342\n00:16:52.620 --> 00:16:56.766\nAnd then anybody who's mailbox I stick\nin this mailbox database will use that\n\n343\n00:16:56.766 --> 00:16:59.300\nparticular offline address book, alright.\n\n344\n00:16:59.300 --> 00:17:00.420\nBut I need to build it first.\n\n345\n00:17:00.420 --> 00:17:03.700\nI've only got one offline address book\nright now and that's the default.\n\n346\n00:17:03.700 --> 00:17:06.780\nI need to create another one just for\nSales, alright.\n\n347\n00:17:06.780 --> 00:17:10.860\nSo I'm gonna jump over to my\nclient access server here, and\n\n348\n00:17:10.860 --> 00:17:14.230\nI'm gonna whip up the Exchange Shell.\n\n349\n00:17:18.191 --> 00:17:22.050\n[LAUGH] I'm gonna try and\nlaunch the Exchange Management Shell.\n\n350\n00:17:22.050 --> 00:17:22.870\nThere we go.\n\n351\n00:17:22.870 --> 00:17:24.630\nAnd let me bump my font size up on this\n\n352\n00:17:24.630 --> 00:17:25.980\nbecause I know it'll\nbe kinda hard to read.\n\n353\n00:17:25.980 --> 00:17:29.399\nAnd what I'm gonna do is I'm\njust gonna whip up a real quick\n\n354\n00:17:31.690 --> 00:17:35.550\ncustom offline address book,\nsoon as that one loads.\n\n355\n00:17:35.550 --> 00:17:37.680\nSo, I do have to do it from\nthe PowerShell, which kind of stinks,\n\n356\n00:17:37.680 --> 00:17:39.710\nbut you don't have to do\nit all that often, right,\n\n357\n00:17:39.710 --> 00:17:42.230\nhow often are you really\ncreating offline address books?\n\n358\n00:17:42.230 --> 00:17:45.630\nIt's not something you do everyday, so\nwe'll just jump in here and knock it out.\n\n359\n00:17:45.630 --> 00:17:50.120\nNow the command is incredibly long so\nthis one is gonna wrap around.\n\n360\n00:17:50.120 --> 00:17:57.570\nLet me change my screen width here a bit\nto make this all fit on the screen.\n\n361\n00:18:00.060 --> 00:18:00.790\nThere.\n\n362\n00:18:00.790 --> 00:18:04.540\nAlright, and I'm just doing that cuz I\nknow this command is going to wrap around.\n\n363\n00:18:04.540 --> 00:18:06.893\nAlright, so what I'm going to do is,\n\n364\n00:18:06.893 --> 00:18:11.540\nI'm going to say New-GlobalAddressList,\nand I'm gonna give it a name.\n\n365\n00:18:11.540 --> 00:18:14.690\nSo I might create like a SalesGAL.\n\n366\n00:18:14.690 --> 00:18:19.300\nAnd I can define a RecipientFilter.\n\n367\n00:18:19.300 --> 00:18:22.560\nAnd that's what you guys saw me do earlier\nin the UI, is I came in and I said,\n\n368\n00:18:22.560 --> 00:18:25.740\nI only wanna show people\nthat are in a particular OU.\n\n369\n00:18:25.740 --> 00:18:28.270\nOr maybe I wanna do it based\non the department field for\n\n370\n00:18:28.270 --> 00:18:29.620\nthe user account itself.\n\n371\n00:18:29.620 --> 00:18:37.439\nSo I could come in and\nI could say Department -eq \"Sales\".\n\n372\n00:18:37.439 --> 00:18:41.120\nAlright, so that's my filter for\nthis global address list.\n\n373\n00:18:42.630 --> 00:18:46.370\nAnd so that's gonna create that and\nbuild that new address list up.\n\n374\n00:18:46.370 --> 00:18:50.310\nAnd then I can update it to make sure\nthat it's got its information in there\n\n375\n00:18:50.310 --> 00:18:52.249\nby using update dash address list.\n\n376\n00:18:54.050 --> 00:18:55.240\nAs soon as it's done, there we go.\n\n377\n00:18:56.550 --> 00:19:02.080\nSo I'm gonna say, Update-AddressList and\nit's the SalesGAL that I wanna update.\n\n378\n00:19:02.080 --> 00:19:05.230\nAnd that's gonna make sure that\nit's up to date if I type it right.\n\n379\n00:19:06.490 --> 00:19:07.200\nLet's see.\n\n380\n00:19:07.200 --> 00:19:08.240\nUpdate.\n\n381\n00:19:08.240 --> 00:19:13.810\nOh, it should be\nUpdate-GlobalAddressList SalesGAL.\n\n382\n00:19:13.810 --> 00:19:14.640\nThere we go.\n\n383\n00:19:14.640 --> 00:19:16.570\nSo if I get my syntax right,\nit'll work better.\n\n384\n00:19:16.570 --> 00:19:19.220\nSo now I've got that address list created,\nit's updated,\n\n385\n00:19:19.220 --> 00:19:20.400\nit's got it's filter in place.\n\n386\n00:19:20.400 --> 00:19:21.550\nThings are good there.\n\n387\n00:19:21.550 --> 00:19:26.350\nNow I can say New-OfflineAddressBook, and\nthis is what's gonna create that OAB.\n\n388\n00:19:26.350 --> 00:19:29.710\nThe things I just did,\nI could have done through the GUI, right.\n\n389\n00:19:29.710 --> 00:19:33.660\nThrough the administration center but\nthis I have to do from the PowerShell.\n\n390\n00:19:33.660 --> 00:19:36.290\nSo I'll say new offline address book,\nand then I'll come in and\n\n391\n00:19:36.290 --> 00:19:38.130\nspecify a name for it.\n\n392\n00:19:38.130 --> 00:19:42.280\nI'm just gonna call mine my SalesOAB for\noffline address book.\n\n393\n00:19:43.440 --> 00:19:47.310\nAnd I need to tell it what\naddresses to contain, so\n\n394\n00:19:47.310 --> 00:19:49.740\nyou tell it address list\nto put inside of it.\n\n395\n00:19:49.740 --> 00:19:52.160\nThat's why I wanted to create\nthat address list a moment ago.\n\n396\n00:19:52.160 --> 00:19:55.841\nSo I'm going to put the SalesGAL\nin my SalesOAB, right,\n\n397\n00:19:55.841 --> 00:19:59.520\nso it's going to basically\nput that information.\n\n398\n00:19:59.520 --> 00:20:03.710\nSo, this offline address book is not going\nto contain the full global address list,\n\n399\n00:20:03.710 --> 00:20:05.485\njust this limited one that I need.\n\n400\n00:20:05.485 --> 00:20:10.510\nAlright, that's gonna create\nthe offline address book.\n\n401\n00:20:10.510 --> 00:20:15.080\nAnd I could stop right there,\ntake this offline address book, and\n\n402\n00:20:15.080 --> 00:20:16.610\nattach it to a mailbox database.\n\n403\n00:20:16.610 --> 00:20:19.860\nSo if I have a Sales database, I attach\nthis offline address book to it, and\n\n404\n00:20:19.860 --> 00:20:23.510\nthen anybody I put in that Sales database\nwill use this offline address book.\n\n405\n00:20:23.510 --> 00:20:24.300\nI'm done.\n\n406\n00:20:24.300 --> 00:20:25.150\nOkay.\n\n407\n00:20:25.150 --> 00:20:27.990\nBut I can go a step further,\nand I can create\n\n408\n00:20:27.990 --> 00:20:32.030\npolicies built around this that kind of\ndictate how this is going to function.\n\n409\n00:20:32.030 --> 00:20:35.380\nSo, for example, I might want to\nfilter this a little bit more.\n\n410\n00:20:35.380 --> 00:20:40.100\nTo limit what's inside of it, or to even\nadd additional addresses inside of it.\n\n411\n00:20:40.100 --> 00:20:45.710\nSo as an example, I might say,\nwe'll do New-AddressBookPolicy,\n\n412\n00:20:45.710 --> 00:20:49.390\nand I'll give this one a name of SalesABP.\n\n413\n00:20:49.390 --> 00:20:51.870\nSo this'll be an address book policy.\n\n414\n00:20:51.870 --> 00:20:56.080\nAnd I'm going to pick address\nlists to go inside of it.\n\n415\n00:20:56.080 --> 00:21:00.740\nAnd so, I'm going to say \\Sales,\nright, setting that path, right,\n\n416\n00:21:00.740 --> 00:21:03.230\ncuz we can nest address\nlists inside of each other.\n\n417\n00:21:03.230 --> 00:21:05.540\nSo I'll just say I'm going\nto include the Sales.\n\n418\n00:21:05.540 --> 00:21:09.410\nI'm going to specify the offline\naddress book that I want to use,\n\n419\n00:21:09.410 --> 00:21:14.840\nwhich is the one I just created, SalesOAB.\n\n420\n00:21:14.840 --> 00:21:18.750\nAnd then I can tell it the global address\nlist that I want these users to use.\n\n421\n00:21:18.750 --> 00:21:21.350\nNow, the default global\naddress list is the default.\n\n422\n00:21:21.350 --> 00:21:24.470\nIt's everything, the whole organization.\n\n423\n00:21:24.470 --> 00:21:28.080\nI want these people's default global\naddress list to be the sales one so\n\n424\n00:21:28.080 --> 00:21:31.850\nI'm going to tie that down to SalesGAL.\n\n425\n00:21:31.850 --> 00:21:37.670\nAnd then, we haven't talked about rooms,\nyet, or resource records.\n\n426\n00:21:37.670 --> 00:21:39.580\nWe're going to talk about\nthose in another episode.\n\n427\n00:21:39.580 --> 00:21:41.040\nBut when I create a policy like this,\n\n428\n00:21:41.040 --> 00:21:44.070\nyou have to dictate whether\nit loads rooms or not.\n\n429\n00:21:44.070 --> 00:21:49.730\nSo I'm going to -RoomList, and I'm just\ngoing to tell it to include all rooms.\n\n430\n00:21:49.730 --> 00:21:54.545\nThose are for using things like if we want\nto do scheduling conference rooms and\n\n431\n00:21:54.545 --> 00:21:57.190\nthings, you can define those and\nmake them a part of the address list too.\n\n432\n00:21:58.470 --> 00:22:02.970\nAlright, now once I've done that,\nthat was a pretty long command and\n\n433\n00:22:02.970 --> 00:22:04.100\nI didn't really have to do that.\n\n434\n00:22:04.100 --> 00:22:05.550\nI could have taken\nthe offline address book and\n\n435\n00:22:05.550 --> 00:22:07.350\nattached it to the mailbox database.\n\n436\n00:22:07.350 --> 00:22:11.370\nThe problem is, what if I have users\nin more than one mailbox database?\n\n437\n00:22:11.370 --> 00:22:16.290\nOr if I have Sales people and marketing\npeople in the same mailbox database, and\n\n438\n00:22:16.290 --> 00:22:18.130\nI want to do separate\nglobal address list there.\n\n439\n00:22:18.130 --> 00:22:20.590\nI can't do it by assigning\nit to the mailbox database.\n\n440\n00:22:20.590 --> 00:22:23.980\nSo by creating a policy like this,\nI can take the policy and\n\n441\n00:22:23.980 --> 00:22:26.850\napply it to whoever I want, right?\n\n442\n00:22:26.850 --> 00:22:30.190\nI can come in and say, look for people\nwhose department is set to Sales and\n\n443\n00:22:30.190 --> 00:22:33.840\napply this policy to them, and\nnow it's really, really granular.\n\n444\n00:22:33.840 --> 00:22:36.500\nAnd we do that by doing\nsomething like this.\n\n445\n00:22:36.500 --> 00:22:43.585\nI'll say Get-Mailbox\n-OrganizationalUnit Sales.\n\n446\n00:22:43.585 --> 00:22:47.966\nRight, give me a list of all\nthe mailboxes that are in this SalesOU.\n\n447\n00:22:47.966 --> 00:22:48.630\nAlright.\n\n448\n00:22:48.630 --> 00:22:53.270\nAnd so that you know, that's just gonna\ngive me those people, if I spell it right.\n\n449\n00:22:53.270 --> 00:22:54.880\nOrganizational unit.\n\n450\n00:22:54.880 --> 00:22:56.470\nThere we go.\nAnd apparently I don't have\n\n451\n00:22:56.470 --> 00:22:57.040\nanybody in there.\n\n452\n00:22:57.040 --> 00:22:58.400\nLet me take like IT.\n\n453\n00:22:59.960 --> 00:23:01.990\nThere we go.\nSo you can see, I'm in IT.\n\n454\n00:23:01.990 --> 00:23:04.880\nSo, you can pull up a list\nof everybody in that OU, or\n\n455\n00:23:04.880 --> 00:23:07.750\neverybody whose department is Sales,\nor whatever.\n\n456\n00:23:07.750 --> 00:23:13.310\nAnd we can pipe that into\na command to assign the policy.\n\n457\n00:23:13.310 --> 00:23:19.425\nSo if I wanted to take everybody in Sales,\nand assign that policy to them,\n\n458\n00:23:19.425 --> 00:23:24.261\nI could just say Set-Mailbox\n-AddressBookPolicy, and\n\n459\n00:23:24.261 --> 00:23:27.450\nthen assign SalesABP to them.\n\n460\n00:23:27.450 --> 00:23:28.150\nAnd by doing,\n\n461\n00:23:28.150 --> 00:23:32.750\nthat it doesn't matter if I have a mixture\nof employees in the same database.\n\n462\n00:23:32.750 --> 00:23:34.120\nIt doesn't matter what\ndatabase they're in.\n\n463\n00:23:34.120 --> 00:23:38.270\nI'm just saying take everybody that's in\nthat OU, and assign this policy to them,\n\n464\n00:23:38.270 --> 00:23:41.580\nso that they'll get the offline\naddress book that we created.\n\n465\n00:23:41.580 --> 00:23:44.550\nAnd now when they go into Outlook and\nOutlook is offline, or\n\n466\n00:23:44.550 --> 00:23:48.310\nOutlook is downloaded and running cache\nmode, they'll see the address list.\n\n467\n00:23:48.310 --> 00:23:50.440\nAnd it'll be filtered down\nto just the Sales people,\n\n468\n00:23:50.440 --> 00:23:52.700\nor just the people in Florida,\njust the people in London.\n\n469\n00:23:52.700 --> 00:23:54.890\nWhatever it is that we wanna create,\nright?\n\n470\n00:23:54.890 --> 00:23:59.200\nNow, that was kind of a pain, running\nthrough those commands to do it, but\n\n471\n00:23:59.200 --> 00:24:01.440\nit's not something you have\nto do very often, right?\n\n472\n00:24:01.440 --> 00:24:02.790\nYou create it, you put it in place.\n\n473\n00:24:02.790 --> 00:24:05.590\nNow this policy that I applied,\n\n474\n00:24:05.590 --> 00:24:07.730\nwhat happens if I create\na new employee in that OU?\n\n475\n00:24:08.770 --> 00:24:10.730\nThis policy wasn't applied to them, right?\n\n476\n00:24:10.730 --> 00:24:13.520\nIt was applied to the people that\nwere in there at the time I ran it.\n\n477\n00:24:13.520 --> 00:24:15.580\nSo if we want this to be\na long standing thing,\n\n478\n00:24:15.580 --> 00:24:17.700\nwe probably need to schedule\nthis to run every night.\n\n479\n00:24:17.700 --> 00:24:21.800\nJust every night, or whenever, reach out\nand look if there's new employees and\n\n480\n00:24:21.800 --> 00:24:23.510\nassign this address book policy to them.\n\n481\n00:24:23.510 --> 00:24:25.250\nOtherwise they're not gonna have it.\n\n482\n00:24:25.250 --> 00:24:29.920\nOr when I create new users, if I clone an\nexisting user, right, instead of creating\n\n483\n00:24:29.920 --> 00:24:32.950\na new user from scratch, if I clone one,\nthen it'll carry over their properties,\n\n484\n00:24:32.950 --> 00:24:35.750\nwhich includes which offline\naddress book they're gonna use.\n\n485\n00:24:35.750 --> 00:24:37.900\nSo that'll help to ensure\nthat doesn't happen too.\n\n486\n00:24:37.900 --> 00:24:39.595\nSo those are just little things\nthat we need to be aware of.\n\n487\n00:24:39.595 --> 00:24:46.210\nAlright, so at first glance, address books\nseem pretty simple inside of Exchange,\n\n488\n00:24:46.210 --> 00:24:48.810\nbut there's a lot more that we\ncan do with them, isn't there?\n\n489\n00:24:48.810 --> 00:24:51.560\nAs far as customizing this,\nchanging that behavior, and\n\n490\n00:24:51.560 --> 00:24:55.280\nreally getting the address list to\nreflect what we want within our company.\n\n491\n00:24:55.280 --> 00:24:56.680\nIt can really make things handy.\n\n492\n00:24:56.680 --> 00:24:58.810\nMake it a lot easier to find employees,\n\n493\n00:24:58.810 --> 00:25:00.409\nespecially when you have\npeople with duplicate names.\n\n494\n00:25:01.440 --> 00:25:04.070\nAll right, well that's a pretty good\nspot for us to wrap this one up.\n\n495\n00:25:04.070 --> 00:25:06.520\nAll those PowerShell commands,\nI'll put those in the show notes so\n\n496\n00:25:06.520 --> 00:25:08.450\nyou guys have them and\nyou can use them for reference.\n\n497\n00:25:08.450 --> 00:25:10.670\nThey'll definitely be available.\n\n498\n00:25:10.670 --> 00:25:12.910\nBut otherwise, for this episode,\nI think that wraps it up.\n\n499\n00:25:12.910 --> 00:25:14.920\nSo I hope you guys enjoyed it.\n\n500\n00:25:14.920 --> 00:25:17.690\nSigning off for ITProTV, I'm Don Pezet.\n\n501\n00:25:17.690 --> 00:25:18.884\nAnd I'll see you next time.\n\n502\n00:25:18.884 --> 00:25:24.390\n[MUSIC]\n\n",
          "vimeoId": "136202927"
        },
        {
          "description": "In this episode, Don demonstrates the various recipient types found in Exchange. He walks the viewers through creating standard user mailboxes, and then moves on to more specialized recipients like resource mailboxes and shared mailboxes.",
          "length": "1508",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients-081215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients-081215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients-081215-1-sm.jpg",
          "title": "Recipients",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.593\n[MUSIC]\n\n2\n00:00:10.593 --> 00:00:13.714\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:13.714 --> 00:00:15.816\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.816 --> 00:00:17.260\nI'm your host, Don Pezet,\n\n5\n00:00:17.260 --> 00:00:20.639\nback again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.639 --> 00:00:24.899\nAnd in this episode, we're gonna take a\nlook at something that's kind of overdue,\n\n7\n00:00:24.899 --> 00:00:26.410\nrecipients, right?\n\n8\n00:00:26.410 --> 00:00:30.136\nRecipients in Exchange, most of\nthe people or things that we e-mail,\n\n9\n00:00:30.136 --> 00:00:33.612\nwhen you send an e-mail to somebody,\nthe person in your to field,\n\n10\n00:00:33.612 --> 00:00:37.611\nright, the person you are sending\nyour e-mail to, they're a recipient.\n\n11\n00:00:37.611 --> 00:00:40.160\nThey're gonna receive\ninformation from you.\n\n12\n00:00:40.160 --> 00:00:42.121\nSo in Exchange, if we expect it to work,\n\n13\n00:00:42.121 --> 00:00:45.110\nwe're gonna need to set up\nat least one recipient.\n\n14\n00:00:45.110 --> 00:00:49.380\nAt least one person who can receive\ninformation and deal with it, right?\n\n15\n00:00:49.380 --> 00:00:51.280\nSo that's a pretty important thing.\n\n16\n00:00:51.280 --> 00:00:55.429\nAnd the most common type of\nrecipient is a user mailbox.\n\n17\n00:00:55.429 --> 00:00:57.807\nWe have user accounts\ninside of Active Directory,\n\n18\n00:00:57.807 --> 00:01:01.030\nwe want them to have a mailbox so\nthat they can send and receive email.\n\n19\n00:01:01.030 --> 00:01:03.600\nThat's our most common type of recipient.\n\n20\n00:01:03.600 --> 00:01:05.211\nBut under the hood in Exchange,\n\n21\n00:01:05.211 --> 00:01:08.321\nthere's actually like 12\ndifferent types of recipients.\n\n22\n00:01:08.321 --> 00:01:10.050\nThere's a ton of different ones.\n\n23\n00:01:10.050 --> 00:01:13.600\nSo in this episode, I wanna tackle\nsome of the more important ones.\n\n24\n00:01:13.600 --> 00:01:17.310\nI'm gonna save a few for another episode\nthough, and those are groups and\n\n25\n00:01:17.310 --> 00:01:19.050\ndistribution lists.\n\n26\n00:01:19.050 --> 00:01:22.660\nDistribution lists are really\njust a collection of recipients.\n\n27\n00:01:22.660 --> 00:01:25.340\nSo I wanna make sure we tackle\nthe individual recipients first and\n\n28\n00:01:25.340 --> 00:01:26.859\nthen we'll talk about\ncollecting them together.\n\n29\n00:01:27.960 --> 00:01:30.460\nWell, let's start with\nthe most basic of recipient,\n\n30\n00:01:30.460 --> 00:01:32.120\nthe most important one, the mailbox.\n\n31\n00:01:33.220 --> 00:01:37.932\nInside of Microsoft Exchange 2013,\nusers do not get mail boxes by default,\n\n32\n00:01:37.932 --> 00:01:38.634\nall right?\n\n33\n00:01:38.634 --> 00:01:41.436\nWhen you go and\ncreate a user in the Active Directory,\n\n34\n00:01:41.436 --> 00:01:43.560\nthey don't necessarily get a mailbox.\n\n35\n00:01:43.560 --> 00:01:47.220\nAnd so that's something that we're\ngoing to have to kinda sort out\n\n36\n00:01:47.220 --> 00:01:51.020\nto make sure that we get everything right\nand in place when we create somebody.\n\n37\n00:01:51.020 --> 00:01:58.100\nSo if I take a look at my Active\nDirectory, I've got an ITProTV OU created.\n\n38\n00:01:58.100 --> 00:02:02.440\nI've got a Sales OU created, and inside of\nsales, I've got Jane Smith and John Doe.\n\n39\n00:02:02.440 --> 00:02:04.380\nThese are a couple of\nusers that I whipped up.\n\n40\n00:02:04.380 --> 00:02:08.320\nOr if I wanna whip up another user here,\nI can just come in and do New User and\n\n41\n00:02:08.320 --> 00:02:12.050\nwe'll create,\nwe'll do Bob Denver, all right?\n\n42\n00:02:12.050 --> 00:02:14.820\nBob Denver, he needs email.\n\n43\n00:02:14.820 --> 00:02:15.400\nSo here we go.\n\n44\n00:02:15.400 --> 00:02:21.300\nWe'll just get his account whipped up and\nwe'll give him a super\n\n45\n00:02:21.300 --> 00:02:26.610\nsecure password, which we'll set\nnot to expire cuz that's awesome.\n\n46\n00:02:26.610 --> 00:02:27.910\nAll right.\nSo I just whipped up a user.\n\n47\n00:02:27.910 --> 00:02:32.960\nNow as I created this user,\ndid it ever ask me about an email address?\n\n48\n00:02:32.960 --> 00:02:33.750\nIt didn't.\n\n49\n00:02:33.750 --> 00:02:37.253\nIt's got the login name, which kind of\nlooks like an email address, right?\n\n50\n00:02:37.253 --> 00:02:40.460\nA user at a fully qualified domain name.\n\n51\n00:02:40.460 --> 00:02:44.400\nBut it's not actually creating\na mailbox for that user.\n\n52\n00:02:44.400 --> 00:02:47.030\nNow, how do I know it's\nnot creating a mailbox?\n\n53\n00:02:47.030 --> 00:02:48.580\nWell, I can go and look.\n\n54\n00:02:48.580 --> 00:02:51.850\nIf I jump back over to my\nExchange Administration Center,\n\n55\n00:02:52.900 --> 00:02:55.570\nwe can jump in here, well,\nI can try and jump in here.\n\n56\n00:02:55.570 --> 00:02:56.580\nThere we go.\n\n57\n00:02:56.580 --> 00:02:59.610\nAnd in the Exchange Administration Center,\nit actually defaults to the recipient\n\n58\n00:02:59.610 --> 00:03:02.220\nview, and right here,\nI can see all of my mailboxes.\n\n59\n00:03:02.220 --> 00:03:03.040\nAnd I see Don Pezet.\n\n60\n00:03:03.040 --> 00:03:06.270\nI've got a mailbox, but\nI don't see John Doe.\n\n61\n00:03:06.270 --> 00:03:09.662\nI don't see Jane Smith, and I definitely\ndon't see Bob Denver, who I just created.\n\n62\n00:03:09.662 --> 00:03:13.480\nI'm gonna hit refresh to just to make\nsure I've got the latest information.\n\n63\n00:03:13.480 --> 00:03:14.520\nIt's not created.\n\n64\n00:03:14.520 --> 00:03:15.310\nAll right.\n\n65\n00:03:15.310 --> 00:03:19.410\nUser accounts in Active Directory\ncan become recipients, but\n\n66\n00:03:19.410 --> 00:03:21.830\nthey aren't recipients by default.\n\n67\n00:03:21.830 --> 00:03:23.866\nSo if I wanna make them have a mailbox,\n\n68\n00:03:23.866 --> 00:03:28.016\nwhat I need to do is I need to make them\nwhat are called mail-enabled objects.\n\n69\n00:03:28.016 --> 00:03:29.909\nMail-enabled just means\nthat they have a mailbox,\n\n70\n00:03:29.909 --> 00:03:32.100\nthat you can actually send email to them.\n\n71\n00:03:32.100 --> 00:03:35.630\nSo when I come into recipients and\nmailboxes, and\n\n72\n00:03:35.630 --> 00:03:40.270\nI hit this plus sign, you'll see that\nI can create a user mailbox, and\n\n73\n00:03:40.270 --> 00:03:43.320\nthat's what's gonna mail enable that\nobject inside of the Active Directory.\n\n74\n00:03:43.320 --> 00:03:46.860\nNow there's two types of mailboxes they\nreference here, a user mailbox and\n\n75\n00:03:46.860 --> 00:03:48.350\na linked mailbox.\n\n76\n00:03:48.350 --> 00:03:49.550\nWhat's that all about?\n\n77\n00:03:49.550 --> 00:03:55.200\nWell, a user mailbox is where you've got\na user account in your Active Directory.\n\n78\n00:03:55.200 --> 00:03:56.570\nAnd you're gonna create a mailbox for\nthem.\n\n79\n00:03:57.580 --> 00:04:02.120\nA linked mailbox is where you've\ngot a user account in somebody\n\n80\n00:04:02.120 --> 00:04:06.110\nelse's Active Directory and you're\ngonna create a mailbox for them, right?\n\n81\n00:04:06.110 --> 00:04:08.369\nSo you might have\nan Active Directory federation and\n\n82\n00:04:08.369 --> 00:04:11.512\nyou've got a completely separate\nforest that you're federated with.\n\n83\n00:04:11.512 --> 00:04:14.361\nYou might have other domains\ninside of your environment, and\n\n84\n00:04:14.361 --> 00:04:17.920\nthe users over there in that domain\nare over in some other forest.\n\n85\n00:04:17.920 --> 00:04:19.788\nAnd you want the mailbox to be right here.\n\n86\n00:04:19.788 --> 00:04:23.320\nYou see that a lot with organizations\nwhere you've got a parent company and\n\n87\n00:04:23.320 --> 00:04:25.310\nchild companies underneath it.\n\n88\n00:04:25.310 --> 00:04:28.249\nThe parent company might wanna\nhost all the mailboxes, but\n\n89\n00:04:28.249 --> 00:04:30.497\nthe child companies\nhave their own domains.\n\n90\n00:04:30.497 --> 00:04:32.580\nSo here we would do a linked mailbox.\n\n91\n00:04:32.580 --> 00:04:35.070\nWell, in my case,\nI'm just gonna do a user mailbox.\n\n92\n00:04:35.070 --> 00:04:37.060\nAnd when I choose to do a user mailbox,\n\n93\n00:04:37.060 --> 00:04:41.960\nI've got the opportunity to\ncreate an all new user account.\n\n94\n00:04:41.960 --> 00:04:44.420\nThat means it'll create\nan Active Directory user and\n\n95\n00:04:44.420 --> 00:04:49.840\na mailbox at the same time, or\nI can build one around an existing user.\n\n96\n00:04:49.840 --> 00:04:51.170\nSo I can come in and I can say,\n\n97\n00:04:51.170 --> 00:04:54.510\nI'm gonna say Bob Denver,\nI'm just gonna give him an alias.\n\n98\n00:04:54.510 --> 00:04:55.820\nYou have to give them an alias,\n\n99\n00:04:55.820 --> 00:04:59.710\nthis is like a shortcut name that people\ncould type to quickly email the person.\n\n100\n00:04:59.710 --> 00:05:02.700\nAnd then I can browse and\nI can pick an existing user.\n\n101\n00:05:02.700 --> 00:05:04.640\nAnd so I can come in and\nI can find Bob Denver.\n\n102\n00:05:04.640 --> 00:05:07.330\nNow, notice how I'm not in this list,\nDon Pezet.\n\n103\n00:05:07.330 --> 00:05:08.450\nI don't show up.\n\n104\n00:05:08.450 --> 00:05:10.270\nThat's because I already have a mailbox,\nright?\n\n105\n00:05:10.270 --> 00:05:11.080\nSo I'm not gonna show up.\n\n106\n00:05:11.080 --> 00:05:14.110\nThis is filtered to users\nthat don't have mailboxes.\n\n107\n00:05:14.110 --> 00:05:16.720\nAnd so I'll take ol' Bob Denver and\npick him.\n\n108\n00:05:16.720 --> 00:05:19.430\nAnd I don't need to provide any of\nthis other information cuz it's\n\n109\n00:05:19.430 --> 00:05:22.230\nalready defined on the user\naccount in the Active Directory.\n\n110\n00:05:22.230 --> 00:05:27.150\nI can go and hit Save and it's gonna\nwhip up that mailbox for Bob Denver.\n\n111\n00:05:27.150 --> 00:05:31.120\nNow, when it makes his mailbox, it's gonna\nput it in my default mailbox database.\n\n112\n00:05:31.120 --> 00:05:33.090\nIf I have more than one\nmailbox database though,\n\n113\n00:05:33.090 --> 00:05:35.440\nI might want him to reside somewhere else.\n\n114\n00:05:35.440 --> 00:05:39.650\nSo when you bring that user in, you can\nchoose to create that user mailbox.\n\n115\n00:05:39.650 --> 00:05:43.542\nYou can browse and pick the user,\nI'll take Jane Smith this time.\n\n116\n00:05:43.542 --> 00:05:47.270\nAnd I'll pick her and\nI'll give her an alias.\n\n117\n00:05:47.270 --> 00:05:50.510\nAnd then down here at the bottom,\nyou've got more options.\n\n118\n00:05:50.510 --> 00:05:54.670\nAnd under more options, you can pick what\nmailbox database they're gonna go into.\n\n119\n00:05:54.670 --> 00:05:56.700\nThat's what'll let you\nmove that somewhere else.\n\n120\n00:05:56.700 --> 00:06:00.370\nOr you can assign a address book\npolicy if you've got one created.\n\n121\n00:06:00.370 --> 00:06:03.530\nIn a previous episode, I showed you guys\nhow to make address book policies, and\n\n122\n00:06:03.530 --> 00:06:07.580\nso I can go in and choose that sales\none for Jane, and I can browse and\n\n123\n00:06:07.580 --> 00:06:10.720\npick to put her in the sales\nmailbox database, right?\n\n124\n00:06:10.720 --> 00:06:14.230\nHer active directory user\naccount is already created.\n\n125\n00:06:14.230 --> 00:06:17.780\nThis is just a mailbox that I'm\ndictating where it's gonna reside and\n\n126\n00:06:17.780 --> 00:06:19.480\nwhat policies she's gonna have.\n\n127\n00:06:19.480 --> 00:06:23.270\nAnd so now I've got her account,\nshe's created, and she's in there.\n\n128\n00:06:23.270 --> 00:06:25.900\nBut I could create new users\nfrom scratch if I wanted.\n\n129\n00:06:25.900 --> 00:06:32.790\nIf I go to new user mailbox and\nI create, let's do Christopher Walken.\n\n130\n00:06:32.790 --> 00:06:37.410\nSo I'm gonna create a new user\ncalled Christopher Walken.\n\n131\n00:06:37.410 --> 00:06:40.050\nAnd we're gonna give him a mailbox, right?\n\n132\n00:06:40.050 --> 00:06:42.990\nSo there's just some basic\ninformation we need to provide.\n\n133\n00:06:42.990 --> 00:06:43.750\nUser name.\n\n134\n00:06:43.750 --> 00:06:44.760\nFull name.\n\n135\n00:06:44.760 --> 00:06:46.460\nUser login name here.\n\n136\n00:06:46.460 --> 00:06:49.810\nSo we'll make him Christopher Walken.\n\n137\n00:06:49.810 --> 00:06:51.500\nI probably need to come up with\na better naming convention,\n\n138\n00:06:51.500 --> 00:06:53.710\ncuz that's a long user name,\nbut it'll work.\n\n139\n00:06:53.710 --> 00:06:54.774\nAnd we'll get that punched in.\n\n140\n00:06:58.452 --> 00:06:59.550\nAll right.\n\n141\n00:06:59.550 --> 00:07:02.010\nAnd then I can go in and set more options,\nif I want, on this user.\n\n142\n00:07:02.010 --> 00:07:05.100\nSo it's all set the way that I want\nit to be from the very beginning.\n\n143\n00:07:05.100 --> 00:07:06.580\nRight?\nThat's kinda the neat part.\n\n144\n00:07:06.580 --> 00:07:10.160\nBy creating it here, I get the user and\nthe mailbox created at the same time.\n\n145\n00:07:10.160 --> 00:07:13.200\nNow while this sounds like a great idea,\nin practice,\n\n146\n00:07:13.200 --> 00:07:14.870\nyou're not gonna use this very much.\n\n147\n00:07:14.870 --> 00:07:15.870\nAnd the reason is,\n\n148\n00:07:15.870 --> 00:07:19.760\nwhen we create Active Directory users,\nwe normally clone an existing user, right,\n\n149\n00:07:19.760 --> 00:07:23.404\nwe duplicate somebody so that we get the\nsame group memberships and permissions.\n\n150\n00:07:23.404 --> 00:07:27.280\nIf Christopher Walken's my new sales\nperson, I wanna go copy a sales person so\n\n151\n00:07:27.280 --> 00:07:28.830\nthey have the same memberships.\n\n152\n00:07:28.830 --> 00:07:31.550\nBy doing it this way,\nit's not copying anybody.\n\n153\n00:07:31.550 --> 00:07:34.960\nSo yeah, I get a mailbox at the same time,\nwhich is nice, but now I've gotta go and\n\n154\n00:07:34.960 --> 00:07:38.150\nset all those permissions, and\nthat's harder than creating a mailbox.\n\n155\n00:07:38.150 --> 00:07:39.630\nSo normally we don't do it this way.\n\n156\n00:07:39.630 --> 00:07:41.100\nWe duplicate the user in the AD, and\n\n157\n00:07:41.100 --> 00:07:44.000\nthen we just come in here\nin mail enable that user.\n\n158\n00:07:44.000 --> 00:07:45.980\nThat makes life a lot easier.\n\n159\n00:07:45.980 --> 00:07:47.593\nAnd you can do this from\nthe PowerShell too.\n\n160\n00:07:47.593 --> 00:07:50.411\nThe nice part about the PowerShell\nis I can mail enable tons of users.\n\n161\n00:07:50.411 --> 00:07:54.672\nI could say, find every user in the entire\nActive Directory, just do like a get-user,\n\n162\n00:07:54.672 --> 00:07:56.413\nthen that's gonna get everybody.\n\n163\n00:07:56.413 --> 00:07:58.155\nOr get dash AD user.\n\n164\n00:07:58.155 --> 00:08:02.149\nThat'll get everybody, and then pipe that\ninto the new dash mail box commune and\n\n165\n00:08:02.149 --> 00:08:04.900\nit'll whip them up and\nyou'll have it in no time.\n\n166\n00:08:04.900 --> 00:08:07.170\nSo that'll knock things out really fast.\n\n167\n00:08:07.170 --> 00:08:09.520\nBut now, I've got recipients.\n\n168\n00:08:09.520 --> 00:08:12.310\nI've got these users\nthat are being created.\n\n169\n00:08:12.310 --> 00:08:13.940\nNow I can start to email these people.\n\n170\n00:08:13.940 --> 00:08:15.180\nNow they can receive email.\n\n171\n00:08:15.180 --> 00:08:18.430\nBut there's a little more that I\nneed to worry about here, right?\n\n172\n00:08:18.430 --> 00:08:21.530\nWhen I define these recipients,\nwhat's their email address?\n\n173\n00:08:21.530 --> 00:08:23.170\nWell, I see it right over here.\n\n174\n00:08:23.170 --> 00:08:25.210\nSome of them might not\nlike that email address.\n\n175\n00:08:25.210 --> 00:08:27.000\nLike here, Christopher Walken.\n\n176\n00:08:27.000 --> 00:08:27.560\nOh, you know what?\n\n177\n00:08:27.560 --> 00:08:29.110\nI spelled his name wrong, didn't I?\n\n178\n00:08:29.110 --> 00:08:31.860\nIf you look at the name,\nit's Christopher Waken.\n\n179\n00:08:31.860 --> 00:08:33.210\nI didn't spell his name right.\n\n180\n00:08:33.210 --> 00:08:35.490\nSo now I need to go in and fix that.\n\n181\n00:08:35.490 --> 00:08:38.080\nWell there's a lot of options\nthat they didn't show us\n\n182\n00:08:38.080 --> 00:08:40.180\nwhen we initially create the user.\n\n183\n00:08:40.180 --> 00:08:41.870\nSo if you take one of these mailboxes and\n\n184\n00:08:41.870 --> 00:08:46.740\nyou edit it, you'll see a lot more\noptions that weren't there a moment ago.\n\n185\n00:08:46.740 --> 00:08:50.629\nAnd so I'll see things like my general\nscreen here where I can find my typo,\n\n186\n00:08:50.629 --> 00:08:52.496\nwhich was in the alias right there.\n\n187\n00:08:52.496 --> 00:08:55.069\nNotice how it built the email\naddress off of the alias and\n\n188\n00:08:55.069 --> 00:08:58.652\nnot off of the user account, and that's\nwhy that alias is kind of important.\n\n189\n00:08:58.652 --> 00:09:00.630\nAll right, so I can fix that.\n\n190\n00:09:00.630 --> 00:09:04.290\nBut that's not actually\ngonna fix my other problem.\n\n191\n00:09:04.290 --> 00:09:05.690\nMy problem is the email address.\n\n192\n00:09:05.690 --> 00:09:08.280\nAnd as I look down the left side,\nyou'll see all sorts of stuff here,\n\n193\n00:09:08.280 --> 00:09:10.440\nincluding email address.\n\n194\n00:09:10.440 --> 00:09:13.050\nAnd I can come in here, and\nI can edit that address, or\n\n195\n00:09:13.050 --> 00:09:14.027\nI can even add more, right?\n\n196\n00:09:15.150 --> 00:09:18.190\nMaybe Christopher's been using that\nemail address for weeks now and\n\n197\n00:09:18.190 --> 00:09:19.470\njust didn't say anything.\n\n198\n00:09:19.470 --> 00:09:22.880\nAnd then he comes to me and is like,\nit's wrong, can you change it?\n\n199\n00:09:22.880 --> 00:09:27.530\nBut I'm receiving email at that old\naddress so can I keep the old address?\n\n200\n00:09:27.530 --> 00:09:31.400\nOr maybe you have somebody who got married\nand they wanna change their last name.\n\n201\n00:09:31.400 --> 00:09:33.920\nWell you want them to have the old\naddress so they still get that email, but\n\n202\n00:09:33.920 --> 00:09:35.540\nyou want them to have a new address, too.\n\n203\n00:09:35.540 --> 00:09:38.579\nSo we might want to add more addresses\nto them and you can certainly do that.\n\n204\n00:09:39.730 --> 00:09:43.700\nIn the background, there's this\nrecipient update service that runs,\n\n205\n00:09:43.700 --> 00:09:48.550\nthe RUS, and it looks at any new recipient\nand it applies a default template\n\n206\n00:09:48.550 --> 00:09:51.660\nof email addresses to the user,\nso that's happening.\n\n207\n00:09:51.660 --> 00:09:55.220\nYou can add more addresses in\naddition to the default and\n\n208\n00:09:55.220 --> 00:09:58.300\nthat's no big deal, or,\nif you look here at the bottom, it's got\n\n209\n00:09:58.300 --> 00:10:01.820\nautomatically update email addresses\nbased on the email address policy.\n\n210\n00:10:01.820 --> 00:10:04.840\nWe can turn that off and\nthen you can remove addresses and\n\n211\n00:10:04.840 --> 00:10:07.282\nchange what's the default and so on.\n\n212\n00:10:07.282 --> 00:10:12.290\nI'm gonna add the correct address here,\nand so I'm gonna add an SMTP address.\n\n213\n00:10:12.290 --> 00:10:14.230\nYou'll see there's other\ntypes of addresses supported,\n\n214\n00:10:14.230 --> 00:10:17.928\nbut SMTP's kind of the world\nstandard right now.\n\n215\n00:10:17.928 --> 00:10:23.280\nAnd I'm gonna punch in\nthe properly spelled address,\n\n216\n00:10:23.280 --> 00:10:24.910\nand I'll go ahead and attach that.\n\n217\n00:10:24.910 --> 00:10:29.230\nNow, notice how the address\nthat I added says smtp and\n\n218\n00:10:29.230 --> 00:10:32.290\nit's lowercase, and the other one\nsays SMTP and it's uppercase.\n\n219\n00:10:32.290 --> 00:10:33.470\nWhat's that all about?\n\n220\n00:10:33.470 --> 00:10:37.460\nWell, the one that's uppercase,\nthat's the default.\n\n221\n00:10:37.460 --> 00:10:41.085\nAnd so this guy right here has been\nflagged as the default address for him.\n\n222\n00:10:41.085 --> 00:10:44.272\nSo if he hits reply to an email,\nit's gonna reply with that default and\n\n223\n00:10:44.272 --> 00:10:45.798\nthat's gonna be spelled wrong.\n\n224\n00:10:45.798 --> 00:10:47.380\nSo, I may not want that.\n\n225\n00:10:47.380 --> 00:10:51.390\nI might wanna change that and\nthat's something that we can do.\n\n226\n00:10:51.390 --> 00:10:53.750\nWhen you edit the address,\n\n227\n00:10:53.750 --> 00:10:56.370\nsee how I don't really have an option\nto change the default here?\n\n228\n00:10:56.370 --> 00:10:57.680\nThe default's already set.\n\n229\n00:10:57.680 --> 00:11:01.790\nIt's because of this automatic update,\nit's pulling from that policy.\n\n230\n00:11:01.790 --> 00:11:05.890\nAnd if I turn that off and\nsave and then come back in and\n\n231\n00:11:05.890 --> 00:11:10.640\nedit his user account again, now Ill\nbe able to come in and manipulate that.\n\n232\n00:11:10.640 --> 00:11:14.174\nAnd so when we take a look at these\naddresses, we can edit them and\n\n233\n00:11:14.174 --> 00:11:18.755\nnow Ive got make this reply address that\ndidnt show up before because the policy\n\n234\n00:11:18.755 --> 00:11:20.380\nwas defining that.\n\n235\n00:11:20.380 --> 00:11:23.030\nAnd so Ill make this one the default,\nthe one thats spelled right.\n\n236\n00:11:23.030 --> 00:11:25.411\nHes still got the old one\nthats spelled wrong, but\n\n237\n00:11:25.411 --> 00:11:27.033\nnow hes got the correct one, too.\n\n238\n00:11:27.033 --> 00:11:28.880\nAll right, so you can have more addresses.\n\n239\n00:11:28.880 --> 00:11:29.740\nI usually add a bunch.\n\n240\n00:11:29.740 --> 00:11:33.960\nFor me Ill do D Pizzette,\nDon Pizzette, Don dot Pizzette,\n\n241\n00:11:33.960 --> 00:11:37.310\nyou know all the different combinations\nof names I think people might type,\n\n242\n00:11:37.310 --> 00:11:40.220\nI'll add them all in there, and\nthat way I'll get all those emails.\n\n243\n00:11:40.220 --> 00:11:43.080\nBut then that default is\njust Don at whatever.\n\n244\n00:11:43.080 --> 00:11:44.800\nSo you can pick that one that you want.\n\n245\n00:11:44.800 --> 00:11:46.590\nYou can really customize that stuff.\n\n246\n00:11:46.590 --> 00:11:48.590\nThere's other things that\nwe can tweak in here.\n\n247\n00:11:48.590 --> 00:11:52.540\nThings like our general information,\nname and so on.\n\n248\n00:11:52.540 --> 00:11:54.480\nThis is all being stored\nin the Active Directory, so\n\n249\n00:11:54.480 --> 00:11:56.940\nthis updates your Active Directory\nrecord at the same time.\n\n250\n00:11:56.940 --> 00:12:01.240\nYou can go into mailbox usage and you'll\nget an example of the last time they\n\n251\n00:12:01.240 --> 00:12:04.790\nlogged in, this user has never logged in,\nand how much data they're using,\n\n252\n00:12:04.790 --> 00:12:05.800\nhow big their mailbox is.\n\n253\n00:12:05.800 --> 00:12:06.480\nThat's pretty useful.\n\n254\n00:12:07.570 --> 00:12:09.010\nYou can view contact information.\n\n255\n00:12:09.010 --> 00:12:11.370\nThis, again, it's straight out\nof the Active Directory, so\n\n256\n00:12:11.370 --> 00:12:13.970\nif it's already populated there,\nit's gonna be populated here.\n\n257\n00:12:13.970 --> 00:12:17.580\nOr if we type it here, it'll turn around\nand populate it in the Active Directory.\n\n258\n00:12:17.580 --> 00:12:23.640\nSo if I give Christopher a city and\na state, right, we can come in and punch\n\n259\n00:12:23.640 --> 00:12:27.750\nin some of this data, well now it's gonna\nbe writing that to the Active Directory.\n\n260\n00:12:27.750 --> 00:12:31.050\nWhen you set organizational values,\ndepartments, right?\n\n261\n00:12:31.050 --> 00:12:34.060\nIf we're doing things like filtering\nbased on department we wanna make sure\n\n262\n00:12:34.060 --> 00:12:35.100\nthose are set.\n\n263\n00:12:35.100 --> 00:12:36.410\nSo we can punch those in.\n\n264\n00:12:36.410 --> 00:12:39.990\nYou've also got some other features,\nlike whether we're sharing the mailbox,\n\n265\n00:12:39.990 --> 00:12:41.070\nor sharing other resources.\n\n266\n00:12:41.070 --> 00:12:42.580\nI'll talk about those more in a minute.\n\n267\n00:12:44.920 --> 00:12:45.910\nThose are some of the main things.\n\n268\n00:12:45.910 --> 00:12:47.510\nI do wanna talk about mailbox delegation.\n\n269\n00:12:47.510 --> 00:12:49.410\nI'll probably save that for\nanother episode though,\n\n270\n00:12:49.410 --> 00:12:51.270\nwhere we can share mailboxes that way.\n\n271\n00:12:51.270 --> 00:12:55.220\nBut basically, once this is done,\nI've got that user account there created.\n\n272\n00:12:55.220 --> 00:12:56.650\nSo, there's Christopher Walken.\n\n273\n00:12:56.650 --> 00:13:00.559\nHe's got a properly spelled email\naddress now and he's ready to rock.\n\n274\n00:13:00.559 --> 00:13:04.949\nAnd if I jump over to\nthe Active Directory user for him, so\n\n275\n00:13:04.949 --> 00:13:07.243\nif I come in here and find him.\n\n276\n00:13:07.243 --> 00:13:10.170\nWell, actually finding him's gonna\nbe a little bit of a challenge.\n\n277\n00:13:10.170 --> 00:13:11.170\nHe's not here in the sales OU,\n\n278\n00:13:11.170 --> 00:13:15.750\nand that's because when I created the\naccount I created it through Exchange and\n\n279\n00:13:15.750 --> 00:13:21.680\nit didn't ask me for an OU, so he'll just\nend up in the regular old users container,\n\n280\n00:13:21.680 --> 00:13:23.740\nand there he is right there,\nand I can just move him.\n\n281\n00:13:23.740 --> 00:13:25.685\nI'll move him into sales.\n\n282\n00:13:25.685 --> 00:13:29.087\nSo we'll throw him over there, and\nnow I've got him right here in sales.\n\n283\n00:13:29.087 --> 00:13:31.640\nAnd if I edit his account and\nI go to address,\n\n284\n00:13:31.640 --> 00:13:34.400\nsee how it's got city, state, ZIP code?\n\n285\n00:13:34.400 --> 00:13:35.560\nIt's all tied together, right?\n\n286\n00:13:35.560 --> 00:13:38.149\nExchange is storing all this\ninformation in the Active Directory.\n\n287\n00:13:40.608 --> 00:13:43.136\nAll right, now that I've got that user,\nhe can go and log in.\n\n288\n00:13:43.136 --> 00:13:44.884\nHe can log in to Outlook Web Access or\n\n289\n00:13:44.884 --> 00:13:48.751\nfire up the Microsoft Outlook Client\nConnect and access his mailbox, right.\n\n290\n00:13:48.751 --> 00:13:52.945\nNow there are a few other types of email\nrecipients that we might have that\n\n291\n00:13:52.945 --> 00:13:55.160\nare kinda based around users.\n\n292\n00:13:55.160 --> 00:13:59.030\nIn this example, the user account is\nright here in my own Active Directory.\n\n293\n00:13:59.030 --> 00:14:00.800\nBut that's not always the case.\n\n294\n00:14:00.800 --> 00:14:02.610\nWhat if you have a contractor, right?\n\n295\n00:14:02.610 --> 00:14:04.060\nSomebody that you work with a lot.\n\n296\n00:14:04.060 --> 00:14:07.690\nThey've already got their own\nemail account set up in their own\n\n297\n00:14:07.690 --> 00:14:09.710\nenvironment somewhere else.\n\n298\n00:14:09.710 --> 00:14:11.520\nWe don't wanna create a mailbox for\nthem here.\n\n299\n00:14:11.520 --> 00:14:13.060\nThey've already got their own.\n\n300\n00:14:13.060 --> 00:14:16.600\nBut, I want my employees to see that\ncontractor in the address list.\n\n301\n00:14:16.600 --> 00:14:17.746\nI want them to show up.\n\n302\n00:14:17.746 --> 00:14:22.874\nWell for that, we can create what's called\na contact, and a contact is not a mailbox,\n\n303\n00:14:22.874 --> 00:14:26.260\nnot a user, but\na reference to an external user, right?\n\n304\n00:14:26.260 --> 00:14:29.960\nAn external user with an external mailbox,\nthat's a contact.\n\n305\n00:14:29.960 --> 00:14:34.160\nAnd so, if we jump back over\nto the Exchange admin center,\n\n306\n00:14:34.160 --> 00:14:35.930\nI was under mail boxes.\n\n307\n00:14:35.930 --> 00:14:38.540\nYou'll see over here where I\ncan jump over to contacts.\n\n308\n00:14:38.540 --> 00:14:41.850\nAnd under contacts, I can start\nto create these external users.\n\n309\n00:14:41.850 --> 00:14:46.220\nSo maybe I wanna add somebody, so\nI'll go over here to mail contact,\n\n310\n00:14:47.870 --> 00:14:50.330\nand I'll punch in somebody who's external,\nright?\n\n311\n00:14:50.330 --> 00:14:53.170\nMaybe I'll want to be able to email\nBill Gates at a moment's notice, so\n\n312\n00:14:53.170 --> 00:14:55.250\nI'm gonna add in Bill Gates.\n\n313\n00:14:55.250 --> 00:14:56.540\nIt's got his name.\n\n314\n00:14:56.540 --> 00:15:02.610\nI can punch in an alias for him, and then\nI can punch in his external email address,\n\n315\n00:15:02.610 --> 00:15:05.450\nwhich I think is bill@microsoft.com or\nsomething like that.\n\n316\n00:15:05.450 --> 00:15:07.320\nSo I'm just gonna punch that in, right?\n\n317\n00:15:07.320 --> 00:15:10.220\nAnd I can pick an OU right here or\nwhere I wanna put this contact, but\n\n318\n00:15:10.220 --> 00:15:11.780\nI'll just leave it at the default.\n\n319\n00:15:11.780 --> 00:15:16.450\nWhen this gets created, I'll now\nhave a contact in my address list.\n\n320\n00:15:16.450 --> 00:15:19.620\nWhen somebody pulls up the global address\nlist they'll see my Active Directory users\n\n321\n00:15:19.620 --> 00:15:21.380\nand they'll see Bill Gates.\n\n322\n00:15:21.380 --> 00:15:24.800\nAnd if they send an email to Bill Gates,\nit just sends it to bill@microsoft.com.\n\n323\n00:15:24.800 --> 00:15:26.420\nIt's an external user.\n\n324\n00:15:26.420 --> 00:15:27.840\nThat's a recipient too, right?\n\n325\n00:15:27.840 --> 00:15:31.160\nIt's a recipient that we can email to,\nit's just the mailbox isn't right here.\n\n326\n00:15:32.240 --> 00:15:35.450\nNow when I created this contact,\nthere was another option.\n\n327\n00:15:35.450 --> 00:15:37.210\nWhat I just did was a mail contact.\n\n328\n00:15:37.210 --> 00:15:40.740\nThat's an external account,\nexternal mailbox, everything's outside.\n\n329\n00:15:40.740 --> 00:15:44.070\nThis is just a reference to\nsomebody outside our organization.\n\n330\n00:15:44.070 --> 00:15:46.895\nA mail user's a little bit different,\nall right?\n\n331\n00:15:46.895 --> 00:15:48.995\nLet's go back to that contractor example.\n\n332\n00:15:48.995 --> 00:15:51.954\nWhat if I want that contractor to\ncome into my building and do work?\n\n333\n00:15:51.954 --> 00:15:54.193\nI want them to sit down and\nlog in on a computer.\n\n334\n00:15:54.193 --> 00:15:55.830\nWell, they've got their own mailbox.\n\n335\n00:15:55.830 --> 00:15:58.768\nThey've got their own user account\nback at their own company.\n\n336\n00:15:58.768 --> 00:16:00.927\nBut is that gonna let them\nlog in on a computer?\n\n337\n00:16:00.927 --> 00:16:06.700\nNo, so\na mail user is a special kind of contact.\n\n338\n00:16:06.700 --> 00:16:08.940\nIt's actually\nan Active Directory user account.\n\n339\n00:16:08.940 --> 00:16:12.340\nIt's a user account that you can use to\nlog into computers, but instead of having\n\n340\n00:16:12.340 --> 00:16:17.460\na mailbox here, you have an external\nmailbox, a mailbox stored somewhere else.\n\n341\n00:16:17.460 --> 00:16:19.570\nSo I might come in and create a mail user.\n\n342\n00:16:20.780 --> 00:16:25.320\nAnd come in and define this one, so\nwe'll do, let's see, we did Bill Gates,\n\n343\n00:16:25.320 --> 00:16:26.770\nlet's do Steve Jobs this time.\n\n344\n00:16:26.770 --> 00:16:30.310\nSo I might want to say Steve Jobs,\ncuz he would love to log in and\n\n345\n00:16:30.310 --> 00:16:35.260\nadminister my Windows system, and\nI'll punch in that he's steve@apple.com.\n\n346\n00:16:35.260 --> 00:16:37.860\nThat's his external email address.\n\n347\n00:16:37.860 --> 00:16:42.340\nBut then I can attach this to\nan existing Active Directory user or\n\n348\n00:16:42.340 --> 00:16:45.280\nmake an all new Active Directory user.\n\n349\n00:16:45.280 --> 00:16:48.360\nSo this one is going to\nhave a user account.\n\n350\n00:16:48.360 --> 00:16:50.130\nHe'll be able to log in to computers.\n\n351\n00:16:50.130 --> 00:16:54.760\nHe'll be able to use my system,\nbut his email will be external.\n\n352\n00:16:54.760 --> 00:16:58.430\nAnd that's a big deal cuz you don't\nwant your contractors to have to have\n\n353\n00:16:58.430 --> 00:17:01.690\nmultiple mailboxes just because\nthey're doing work with you, right?\n\n354\n00:17:01.690 --> 00:17:05.240\nWe wanna try and\nkeep all this as simple as possible.\n\n355\n00:17:05.240 --> 00:17:06.970\nSo I'll get that created, and\n\n356\n00:17:06.970 --> 00:17:11.440\nnow they show up as a contact, even\nthough they have an actual user account.\n\n357\n00:17:11.440 --> 00:17:14.679\nIf I jump back to mailboxes,\nSteve Jobs doesn't show up there.\n\n358\n00:17:14.679 --> 00:17:18.990\nHe has an actual user account,\nbut I'm not hosting his mailbox.\n\n359\n00:17:18.990 --> 00:17:20.420\nThat's what's called a mail user.\n\n360\n00:17:20.420 --> 00:17:24.070\nThe two different types of contacts there,\nMail contact and Mail user.\n\n361\n00:17:24.070 --> 00:17:26.230\nMail contact is fully external.\n\n362\n00:17:26.230 --> 00:17:29.070\nMail user is external email but\na local account.\n\n363\n00:17:32.150 --> 00:17:34.750\nAnother type of recipient\nthat we can have.\n\n364\n00:17:34.750 --> 00:17:38.320\nThere's a few different\nones that we can do here.\n\n365\n00:17:38.320 --> 00:17:40.200\nActually, I think I'm gonna\nhold off on resources.\n\n366\n00:17:40.200 --> 00:17:41.469\nLet's talk about shared mailboxes.\n\n367\n00:17:42.620 --> 00:17:45.820\nEach example that I've given you guys so\nfar has been tied around one person.\n\n368\n00:17:45.820 --> 00:17:49.460\nI've got a contact for Bill Gates,\nor a contact for Steve Jobs.\n\n369\n00:17:49.460 --> 00:17:52.060\nI've got a mailbox for Christopher Walken.\n\n370\n00:17:52.060 --> 00:17:53.950\nThese are individual people.\n\n371\n00:17:53.950 --> 00:17:56.240\nWhat if I have somebody generic though?\n\n372\n00:17:56.240 --> 00:18:01.110\nWhat if I wanna set up a generic\nmailbox for information?\n\n373\n00:18:01.110 --> 00:18:04.630\nA lot of websites, you go to the website\nand at the bottom it says If you have any\n\n374\n00:18:04.630 --> 00:18:10.040\nquestions, email info@microsoft.com or\ninfor@apple.com or whatever.\n\n375\n00:18:10.040 --> 00:18:11.000\nThat's a generic mailbox.\n\n376\n00:18:11.000 --> 00:18:12.180\nWho does that go to?\n\n377\n00:18:12.180 --> 00:18:14.910\nWell, it probably goes\nto a generic mailbox\n\n378\n00:18:14.910 --> 00:18:17.390\nthat multiple people can log into and\ncheck.\n\n379\n00:18:17.390 --> 00:18:20.000\nSo it's a special kind of recipient, and\n\n380\n00:18:20.000 --> 00:18:22.650\nin Exchange that's\ncalled a shared mailbox.\n\n381\n00:18:22.650 --> 00:18:25.770\nIt's a special recipient because it's\nnot really tied to a single user,\n\n382\n00:18:25.770 --> 00:18:27.320\nit's multiple users.\n\n383\n00:18:27.320 --> 00:18:29.750\nAnd normally a recipient\nis a one-to-one thing.\n\n384\n00:18:29.750 --> 00:18:32.010\nThe mailbox is tied to one user.\n\n385\n00:18:32.010 --> 00:18:34.100\nA shared mailbox breaks that rule.\n\n386\n00:18:34.100 --> 00:18:35.900\nSo let's take a look at that.\n\n387\n00:18:35.900 --> 00:18:39.380\nHere inside of my admin center,\nif I jump over here to shared,\n\n388\n00:18:39.380 --> 00:18:43.200\nthen we can come in and we can start\nto create these shared mailboxes.\n\n389\n00:18:43.200 --> 00:18:46.127\nAnd what it's gonna do is it's\ngonna create a mailbox, and\n\n390\n00:18:46.127 --> 00:18:48.830\nit's gonna create\nan Active Directory user.\n\n391\n00:18:48.830 --> 00:18:50.650\nIt's just gonna disable the user.\n\n392\n00:18:50.650 --> 00:18:52.830\nSo the user will be disabled by default.\n\n393\n00:18:52.830 --> 00:19:00.105\nSo I might come in here and create a new\none which I'll call something like info.\n\n394\n00:19:00.105 --> 00:19:05.270\nSo this is gonna be my information\nmailbox, and the alias will just be info.\n\n395\n00:19:05.270 --> 00:19:08.700\nAnd for the organizational unit,\nmaybe I'll stick that in my Sales OU.\n\n396\n00:19:10.880 --> 00:19:16.320\nSo I'm creating this info@lab.itpro.tv,\nthis generic mailbox.\n\n397\n00:19:16.320 --> 00:19:18.503\nOkay, in the chat room they give\nyou the example of a help desk.\n\n398\n00:19:18.503 --> 00:19:22.895\nYou might have helpdesk@lab.itpro.tv and\nyou'd want all the help desk technicians\n\n399\n00:19:22.895 --> 00:19:25.360\nto be able to log into\nthis single mailbox.\n\n400\n00:19:25.360 --> 00:19:28.430\nNow I could set up a distribution list for\nthis, right?\n\n401\n00:19:28.430 --> 00:19:31.750\nAn email comes in and\nit gets distributed to multiple people.\n\n402\n00:19:31.750 --> 00:19:33.610\nBut here's the problem with\nthe distribution list,\n\n403\n00:19:33.610 --> 00:19:35.231\nespecially with the help desk example.\n\n404\n00:19:36.240 --> 00:19:39.020\nHow do I know if somebody else has\ndealt with that ticket or not?\n\n405\n00:19:39.020 --> 00:19:39.740\nI don't.\n\n406\n00:19:39.740 --> 00:19:42.514\nIf that distribution list forwards\nthe ticket to five different techs,\n\n407\n00:19:42.514 --> 00:19:45.670\nthe five techs don't know if one\nof the others have dealt with it.\n\n408\n00:19:45.670 --> 00:19:47.370\nWith a shared mailbox, you do.\n\n409\n00:19:47.370 --> 00:19:50.270\nIf you log into the shared mailbox and\nit's already marked as read or\n\n410\n00:19:50.270 --> 00:19:52.150\nit's already been deleted, then it's gone.\n\n411\n00:19:52.150 --> 00:19:56.100\nSo a shared mailbox makes sure that\neverybody is on the same page.\n\n412\n00:19:56.100 --> 00:19:59.610\nAll right, then down at the bottom\nwe've got Send As permissions.\n\n413\n00:19:59.610 --> 00:20:02.720\nNormally when you create a shared mailbox,\nyou want people to be able to read\n\n414\n00:20:02.720 --> 00:20:06.840\nthe email in it but not necessarily\nsend email as that mailbox.\n\n415\n00:20:06.840 --> 00:20:11.560\nBut if I want them to be able to send\nemail as info@lab.itpro.tv or helpdesk or\n\n416\n00:20:11.560 --> 00:20:13.800\nwhatever, I would add\nthose people to this list.\n\n417\n00:20:15.190 --> 00:20:17.880\nBut otherwise it's got the information\nthat I need created here.\n\n418\n00:20:17.880 --> 00:20:20.610\nI'm gonna go ahead and\njust say OK to that.\n\n419\n00:20:20.610 --> 00:20:22.950\nAnd it's gonna create it,\nit's gonna build it up.\n\n420\n00:20:22.950 --> 00:20:25.870\nAnd what it's doing is it's\ncreating an Active Directory user,\n\n421\n00:20:25.870 --> 00:20:29.240\nit's mail enabling the user and\nthen it is disabling the account.\n\n422\n00:20:30.390 --> 00:20:32.430\nSo it did all that in the background.\n\n423\n00:20:32.430 --> 00:20:34.770\nOr in theory it did it,\nI guess we can go and verify.\n\n424\n00:20:34.770 --> 00:20:40.350\nIf I jump over to my domain controller and\nI'll just refresh this screen,\n\n425\n00:20:40.350 --> 00:20:42.560\nthere's the info account and\nit's probably hard to see.\n\n426\n00:20:42.560 --> 00:20:46.350\nThere's a little, tiny black arrow on\nthat user, or if I go into their account\n\n427\n00:20:46.350 --> 00:20:49.980\ninformation, I should be able to see\nin here that the account is disabled.\n\n428\n00:20:49.980 --> 00:20:50.500\nYeah, right there.\n\n429\n00:20:50.500 --> 00:20:54.330\nSo the account's been disabled,\nbut it has been created and\n\n430\n00:20:54.330 --> 00:20:58.590\nit's got that email address\nof info@lab.itpro.tv.\n\n431\n00:20:58.590 --> 00:21:04.140\nSo now what I need to do is I need to give\npeople permission to open that mailbox.\n\n432\n00:21:04.140 --> 00:21:06.065\nAnd the way you do it is\nyou edit the mailbox.\n\n433\n00:21:07.315 --> 00:21:10.765\nAnd then in here you'll have all these\ndifferent options on the left side.\n\n434\n00:21:10.765 --> 00:21:14.005\nAnd what we wanna do is we wanna give\npeople full access to the mailbox so\n\n435\n00:21:14.005 --> 00:21:16.795\nthey'll be able to open this up and\nget into it.\n\n436\n00:21:16.795 --> 00:21:19.787\nSo on the left side here\nyou'll see mailbox delegation,\n\n437\n00:21:19.787 --> 00:21:22.617\nand then you've got Full Access.\n\n438\n00:21:22.617 --> 00:21:27.127\nI want to give users full access to this\nmailbox, so they'll be able to open it up.\n\n439\n00:21:27.127 --> 00:21:30.135\nAnd I would just come through and pick,\nand I can do this based on a group.\n\n440\n00:21:30.135 --> 00:21:33.777\nSo I could say Sales, anybody in\nthe Sales department can open this up.\n\n441\n00:21:33.777 --> 00:21:36.497\nOr I can do individual people,\nlike I'll just do myself here.\n\n442\n00:21:36.497 --> 00:21:41.230\nI'm going to add in Don Pezet, so I'm\nallowed to open up this shared mailbox.\n\n443\n00:21:41.230 --> 00:21:43.540\nAll right, and\nwe'll go ahead and save that.\n\n444\n00:21:43.540 --> 00:21:46.740\nSo now I've got permission\nto open up the mailbox.\n\n445\n00:21:46.740 --> 00:21:48.090\nHow do I get into it?\n\n446\n00:21:48.090 --> 00:21:53.180\nWell, back in Outlook, or you can do it\nin OWA too, it works either way, but here\n\n447\n00:21:53.180 --> 00:21:56.960\nin Outlook, when you fire up Outlook by\ndefault it's opening up just your mailbox.\n\n448\n00:21:56.960 --> 00:21:58.810\nYou open up one mailbox.\n\n449\n00:21:58.810 --> 00:22:00.990\nBut you can open up other mailboxes.\n\n450\n00:22:00.990 --> 00:22:06.000\nIf you go up here to File and\nthen Open & Export,\n\n451\n00:22:06.000 --> 00:22:09.610\nin here you'll see you've got\nthe option to open Other User's Folder.\n\n452\n00:22:09.610 --> 00:22:13.990\nAnd we can choose that, and I'm gonna just\npunch in Info, or you could browse and\n\n453\n00:22:13.990 --> 00:22:16.450\nfind it from the name list,\nit'll be in there somewhere.\n\n454\n00:22:16.450 --> 00:22:18.500\nMy address list is not updated yet.\n\n455\n00:22:18.500 --> 00:22:20.400\nSo I'm just gonna type it in\nbecause I don't want to wait for\n\n456\n00:22:20.400 --> 00:22:21.410\nthe address list to refresh.\n\n457\n00:22:21.410 --> 00:22:23.240\nAnd I'll go ahead and say OK to that.\n\n458\n00:22:23.240 --> 00:22:27.020\nIt's gonna try and find that user\nwhich it didn't find for me.\n\n459\n00:22:27.020 --> 00:22:30.625\nLet me make sure I can\ntype the whole name.\n\n460\n00:22:33.469 --> 00:22:37.920\nWell, shoot, I might have to get\nthat address list to refresh.\n\n461\n00:22:37.920 --> 00:22:40.630\nWhen you create a new user, they don't\nshow up in the address list right away and\n\n462\n00:22:40.630 --> 00:22:42.710\nso it's making it where\nOutlook is not gonna pick it.\n\n463\n00:22:42.710 --> 00:22:44.490\nI'll just do it through\nthe Outlook web app.\n\n464\n00:22:44.490 --> 00:22:46.140\nThat's another way we can go about it.\n\n465\n00:22:46.140 --> 00:22:48.650\nWhen you're looking at your mailbox\nhere in the Outlook web app,\n\n466\n00:22:48.650 --> 00:22:50.070\nyou can go up to your name.\n\n467\n00:22:50.070 --> 00:22:53.450\nAnd if you click on that, you'll see\nOpen another mailbox right there.\n\n468\n00:22:53.450 --> 00:22:58.230\nAnd the nice part is this one is\npulling straight from the server and so\n\n469\n00:22:58.230 --> 00:22:59.730\nit should have that information already.\n\n470\n00:22:59.730 --> 00:23:01.353\nIf it doesn't,\nI'll just have to force my address list.\n\n471\n00:23:01.353 --> 00:23:03.280\nThere it goes, yep, so it found it.\n\n472\n00:23:03.280 --> 00:23:06.570\nAnd I can choose Open, and now it's\ngonna open that other mailbox, and\n\n473\n00:23:06.570 --> 00:23:08.480\nI can see info.\n\n474\n00:23:08.480 --> 00:23:11.350\nSo when email comes in, this is the first\ntime I've logged in, so I've gotta pick\n\n475\n00:23:11.350 --> 00:23:18.120\na time zone, we'll go with US Eastern, and\nnow I'll be in that generic info mailbox.\n\n476\n00:23:18.120 --> 00:23:20.460\nAnd I can add this\npermission to other users.\n\n477\n00:23:20.460 --> 00:23:23.490\nThe problem with OWA is it opens\nit in a separate window, so\n\n478\n00:23:23.490 --> 00:23:26.930\nI've got my mail here and\nI've got Info over here.\n\n479\n00:23:26.930 --> 00:23:30.570\nIf you open it in Outlook,\nthe actual client,\n\n480\n00:23:30.570 --> 00:23:33.690\nit can have both mailboxes open at the\nsame time and that's kind of convenient.\n\n481\n00:23:33.690 --> 00:23:34.280\nI just have to wait for\n\n482\n00:23:34.280 --> 00:23:37.860\nmy address list to update, or go and\nforce the address list to update.\n\n483\n00:23:37.860 --> 00:23:40.830\nBut otherwise I've now\ngot this shared mailbox.\n\n484\n00:23:40.830 --> 00:23:44.840\nPeople can email info@lab.itpro.tv and\nit will go right here, and\n\n485\n00:23:44.840 --> 00:23:48.580\nI might have five or ten, however many\nservice reps that are all monitoring that.\n\n486\n00:23:48.580 --> 00:23:51.510\nAnd when one person handles an email,\nthey can just archive it or\n\n487\n00:23:51.510 --> 00:23:55.020\ndelete it when they're done, and now\nother people know that it's been handled.\n\n488\n00:23:55.020 --> 00:23:59.270\nSo kind of a nice way to have that central\ngathering place for that information.\n\n489\n00:24:01.570 --> 00:24:04.854\nThere's another type of recipient\nthat I wanna talk about which is kind\n\n490\n00:24:04.854 --> 00:24:07.540\nof important,\nwhich is the resource recipient.\n\n491\n00:24:07.540 --> 00:24:11.550\nBut I've talked a little too much and I'm\ngetting kind of short on time on this one.\n\n492\n00:24:11.550 --> 00:24:14.620\nSo this is probably a good spot for\nus to wrap this one up.\n\n493\n00:24:14.620 --> 00:24:17.680\nIn this episode, we got a chance\nto see quite a bit of stuff.\n\n494\n00:24:17.680 --> 00:24:19.670\nWe got to see mailbox users.\n\n495\n00:24:19.670 --> 00:24:22.770\nThat's the primary recipient\ntype inside of Exchange.\n\n496\n00:24:22.770 --> 00:24:26.680\nWe got to see mail contacts\nas well as mail users.\n\n497\n00:24:26.680 --> 00:24:29.850\nRemember that mail contacts\nwere just external users,\n\n498\n00:24:29.850 --> 00:24:33.150\nexternal email, all external,\nwe just do a reference to it.\n\n499\n00:24:33.150 --> 00:24:38.010\nMail user, that was where we have a local\nuser account but an external mailbox.\n\n500\n00:24:38.010 --> 00:24:40.580\nAnd then we got a chance to take\na look at shared mailboxes,\n\n501\n00:24:40.580 --> 00:24:42.400\nanother type of recipient.\n\n502\n00:24:42.400 --> 00:24:44.190\nStay tuned, though,\ncuz we're gonna do a part two and\n\n503\n00:24:44.190 --> 00:24:46.370\nI wanna tackle resource recipients.\n\n504\n00:24:46.370 --> 00:24:50.610\nAnd these are things like rooms and\nprojectors, equipment, stuff like that\n\n505\n00:24:50.610 --> 00:24:53.320\nthat we wanna make available and\nkeep track of inside of Exchange.\n\n506\n00:24:53.320 --> 00:24:56.750\nIt's some really cool functionality, so\nwe'll check that out in the next episode.\n\n507\n00:24:56.750 --> 00:24:58.820\nBut for now, we'll go ahead and\nwrap this one up.\n\n508\n00:24:58.820 --> 00:25:02.994\nSo signing off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n509\n00:25:02.994 --> 00:25:08.440\n[MUSIC]\n\n",
          "vimeoId": "136202925"
        },
        {
          "description": "This episode is the exciting conclusion to Exchange recipients. In this episode, Don moves on to more specialized recipients like resource mailboxes and shared mailboxes.",
          "length": "891",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients_pt2-081215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients_pt2-081215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-4-recipients_pt2-081215-1-sm.jpg",
          "title": "Recipients Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.141 --> 00:00:03.181\n[SOUND]\n\n2\n00:00:03.181 --> 00:00:10.402\n[MUSIC]\n\n3\n00:00:10.402 --> 00:00:10.942\nAll right.\n\n4\n00:00:10.942 --> 00:00:12.682\nGood morning, good afternoon and\ngood evening.\n\n5\n00:00:12.682 --> 00:00:15.142\nWelcome back to another\nepisode of ITProTV.\n\n6\n00:00:15.142 --> 00:00:16.665\nI'm your host Don Pezet,\n\n7\n00:00:16.665 --> 00:00:20.580\nback again with another episode\nof Microsoft Exchange 2013.\n\n8\n00:00:20.580 --> 00:00:24.740\nAnd because I can't seem to keep myself\nquiet, we're actually jumping into part\n\n9\n00:00:24.740 --> 00:00:28.570\ntwo of the last episode, which was\ncovering recipients inside of Exchange.\n\n10\n00:00:28.570 --> 00:00:30.250\nI rambled on a little too long and\n\n11\n00:00:30.250 --> 00:00:33.600\nI didn't have a chance to get\nto the resource mailboxes.\n\n12\n00:00:33.600 --> 00:00:36.450\nAnd so we need to take a look at those\ntoday, because they are important,\n\n13\n00:00:36.450 --> 00:00:37.311\nthey are on the exam.\n\n14\n00:00:37.311 --> 00:00:40.401\nIt is something that as administrator's\nwe'll typically have to set up for\n\n15\n00:00:40.401 --> 00:00:43.411\nour users, and then they can start to\nuse them and take advantage of them.\n\n16\n00:00:43.411 --> 00:00:47.391\nSo, I guess, before I get ahead of myself,\nwhat the heck is a resource mailbox?\n\n17\n00:00:47.391 --> 00:00:52.391\nWell, Exchange, deep down inside,\nis really just an email server, right?\n\n18\n00:00:52.391 --> 00:00:55.931\nIt does email, it receives email, it sends\nemail, it sorts it into email boxes and\n\n19\n00:00:55.931 --> 00:00:57.360\nthat's that.\n\n20\n00:00:57.360 --> 00:01:02.380\nBut, Microsoft over the years has added\non, improved it to create a full-on\n\n21\n00:01:02.380 --> 00:01:05.360\ncollaboration suite that\ncan do all sorts of things.\n\n22\n00:01:05.360 --> 00:01:08.940\nWell, one of the things that it does\nreally well, is it's a calendar server.\n\n23\n00:01:08.940 --> 00:01:10.800\nEvery user has their own calendar.\n\n24\n00:01:10.800 --> 00:01:14.090\nAnd you can have group calendars for\nyour company, your departments, so\n\n25\n00:01:14.090 --> 00:01:17.300\nthat everybody can see what's\ngoing on in the organization.\n\n26\n00:01:17.300 --> 00:01:20.580\nWell, one of the things that we typically\nput on calendars, are meetings.\n\n27\n00:01:20.580 --> 00:01:21.570\nTons of meetings, right?\n\n28\n00:01:21.570 --> 00:01:24.510\nI can't even begin to tell you guys how\nmany meetings I go to in a given week.\n\n29\n00:01:24.510 --> 00:01:26.550\nSo, we start scheduling meetings.\n\n30\n00:01:26.550 --> 00:01:28.200\nWell, where do you have your meeting?\n\n31\n00:01:28.200 --> 00:01:30.740\nYou probably have a conference room or\ntwo.\n\n32\n00:01:30.740 --> 00:01:32.850\nAnd other people wanna schedule meetings.\n\n33\n00:01:32.850 --> 00:01:34.120\nYou wanna schedule meetings.\n\n34\n00:01:34.120 --> 00:01:35.590\nAnd now we have conflicts.\n\n35\n00:01:35.590 --> 00:01:40.110\nSo we need a way to track things like\nconference rooms, projectors, laptops,\n\n36\n00:01:40.110 --> 00:01:43.230\nother equipment that we\nhave in limited supply.\n\n37\n00:01:43.230 --> 00:01:45.300\nThat we wanna make sure that\nwe don't over allocate.\n\n38\n00:01:45.300 --> 00:01:46.840\nWe have two people wanting\nthe same equipment or\n\n39\n00:01:46.840 --> 00:01:50.750\nthe same room at the same time, and\nresource mailboxes let us do that.\n\n40\n00:01:50.750 --> 00:01:54.720\nWhen you create a resource mailbox,\nwhat you're doing is you're creating\n\n41\n00:01:54.720 --> 00:01:57.870\nbasically like an email user\nthat represents that item.\n\n42\n00:01:57.870 --> 00:02:01.240\nAnd then we can book it into\nmeetings into our calendar\n\n43\n00:02:01.240 --> 00:02:03.450\nto show that it's reserved\nat certain times.\n\n44\n00:02:03.450 --> 00:02:05.240\nAnd Exchange does a great job of that.\n\n45\n00:02:05.240 --> 00:02:09.360\nAnd it's one of the extra recipients\nthat we have in Exchange, and\n\n46\n00:02:09.360 --> 00:02:11.500\nthat's why we're kind of\ncovering it here in this section.\n\n47\n00:02:11.500 --> 00:02:12.661\nSo, let me show you how they work.\n\n48\n00:02:12.661 --> 00:02:15.973\nI'm logged into my\nExchange Administration Center here, and\n\n49\n00:02:15.973 --> 00:02:19.981\nunder Recipients, you'll see a recipient\ntype in here called Resources.\n\n50\n00:02:19.981 --> 00:02:23.630\nAnd when you jump into Resources, if you\nhaven't used this, it will be empty.\n\n51\n00:02:23.630 --> 00:02:26.850\nBut you can come in and\nyou can create your resources as needed.\n\n52\n00:02:26.850 --> 00:02:29.550\nNow, the resources you make are up to you.\n\n53\n00:02:29.550 --> 00:02:33.660\nMicrosoft really just divides them into\ntwo categories, rooms and equipment.\n\n54\n00:02:33.660 --> 00:02:37.020\nSo when I hit the plus sign here,\nI pick, is this gonna be a room or\n\n55\n00:02:37.020 --> 00:02:37.840\nan equipment mailbox?\n\n56\n00:02:37.840 --> 00:02:41.580\nNow in reality, there's not much\ndifference between the two,\n\n57\n00:02:41.580 --> 00:02:43.790\non the backend in Exchange,\nthere's not much different.\n\n58\n00:02:43.790 --> 00:02:46.920\nThe icon is different when you\nsee the contact in the list.\n\n59\n00:02:46.920 --> 00:02:49.110\nAnd rooms have a capacity,\n\n60\n00:02:49.110 --> 00:02:51.950\na certain amount of people that\ncan be in them, equipment doesn't.\n\n61\n00:02:51.950 --> 00:02:54.440\nThat's really the only\ndifference between the two, but\n\n62\n00:02:54.440 --> 00:02:58.350\nit is a visual differentiator and\nthat kind of helps our end users.\n\n63\n00:02:58.350 --> 00:03:01.230\nSo, you'd come through and\ndefine your rooms first, and\n\n64\n00:03:01.230 --> 00:03:03.770\nthen define your equipment and\nget those kind of set in.\n\n65\n00:03:03.770 --> 00:03:05.849\nFor rooms,\nyou're just gonna give it a name.\n\n66\n00:03:07.070 --> 00:03:09.880\nSo I might have conference room a,\nb and c.\n\n67\n00:03:09.880 --> 00:03:11.700\nSo I might create Conference Room.\n\n68\n00:03:11.700 --> 00:03:14.135\nWow, my spelling is amazing today.\n\n69\n00:03:14.135 --> 00:03:17.840\n[LAUGH] It's just gonna get\nworse from here, isn't it?\n\n70\n00:03:17.840 --> 00:03:20.350\nSo I might have Conference Room C,\nConference Room A,\n\n71\n00:03:20.350 --> 00:03:21.670\nConference Room B, whatever.\n\n72\n00:03:21.670 --> 00:03:23.850\nI create those, and I give them a name.\n\n73\n00:03:23.850 --> 00:03:25.600\nYou can give them an alias.\n\n74\n00:03:25.600 --> 00:03:28.800\nSo I might just call this one\nlike confc or something, and\n\n75\n00:03:28.800 --> 00:03:30.970\nthen you can pick an OU\nwhere they're gonna reside.\n\n76\n00:03:30.970 --> 00:03:33.730\nThere is actually a user\naccount tied to these and so\n\n77\n00:03:33.730 --> 00:03:36.990\nyou might want to put that into\na particular organizational unit.\n\n78\n00:03:36.990 --> 00:03:39.020\nThere needs to be a user account attached,\n\n79\n00:03:39.020 --> 00:03:41.160\nbecause this is kind of\nlike a shared mailbox.\n\n80\n00:03:41.160 --> 00:03:42.330\nYou might need to change something.\n\n81\n00:03:42.330 --> 00:03:45.500\nYou might need to cancel somebody's\nreservation of a room, and somebody will\n\n82\n00:03:45.500 --> 00:03:48.040\nhave to be able to open that conference\nroom up to be able to change it.\n\n83\n00:03:48.040 --> 00:03:50.335\nSo that's why there's a user account.\n\n84\n00:03:50.335 --> 00:03:51.550\nYou can specify a location.\n\n85\n00:03:51.550 --> 00:03:56.980\nSo this one might be at\nthe ITProTV Studios, or somewhere else.\n\n86\n00:03:56.980 --> 00:04:00.390\nYou can give it a phone number,\nand you can give it a capacity.\n\n87\n00:04:00.390 --> 00:04:02.330\nThat's important because in Outlook,\n\n88\n00:04:02.330 --> 00:04:05.800\nwe have what's called\nthe Meeting Assistant utility.\n\n89\n00:04:05.800 --> 00:04:10.590\nAnd when we go to schedule a meeting,\nif you have 50 people being invited, and\n\n90\n00:04:10.590 --> 00:04:11.870\nyou go to pick a meeting room,\n\n91\n00:04:11.870 --> 00:04:15.060\nit'll actually filter it based on\nwhether the room is big enough.\n\n92\n00:04:15.060 --> 00:04:18.660\nSo if I have 50 people, and\nI say this room has a capacity of 20,\n\n93\n00:04:18.660 --> 00:04:20.390\nit'll hide this one from the list.\n\n94\n00:04:20.390 --> 00:04:21.500\nPretty cool, right?\n\n95\n00:04:21.500 --> 00:04:24.430\nIf I leave the capacity empty, though,\nit'll just always show up, and\n\n96\n00:04:24.430 --> 00:04:25.330\nthen you can pick it.\n\n97\n00:04:25.330 --> 00:04:27.779\nBut it is a good idea to put the\ncapacities there to help with selecting.\n\n98\n00:04:29.040 --> 00:04:31.640\nThen it's got booking requests.\n\n99\n00:04:31.640 --> 00:04:32.970\nWho's allowed to book this?\n\n100\n00:04:32.970 --> 00:04:37.175\nBy default, anybody can book the room,\nand as long as it's available,\n\n101\n00:04:37.175 --> 00:04:39.850\nit'll automatically accept it and\nput the reservation in there.\n\n102\n00:04:39.850 --> 00:04:41.580\nBut you might not want that, right?\n\n103\n00:04:41.580 --> 00:04:44.490\nYou might want to have certain employees\nwho are responsible for booking the rooms,\n\n104\n00:04:44.490 --> 00:04:46.880\nmaybe you have a Facilities Manager or\nsomething.\n\n105\n00:04:46.880 --> 00:04:51.180\nAnd so you can come in and you can select\nwho's allowed to accept or decline those.\n\n106\n00:04:51.180 --> 00:04:54.460\nAnd then what's gonna happen is that\nperson will just need to periodically open\n\n107\n00:04:54.460 --> 00:04:57.330\nthis mailbox, look at the requests and\ngo through and\n\n108\n00:04:57.330 --> 00:04:59.150\napprove or deny those requests.\n\n109\n00:04:59.150 --> 00:05:01.310\nBut I'm gonna leave mine to automatic.\n\n110\n00:05:01.310 --> 00:05:03.640\nI don't care who uses the room just\nas long as they don't double book it.\n\n111\n00:05:05.640 --> 00:05:08.612\nThere are a few more options you can go if\nyou really wanna customize like the email\n\n112\n00:05:08.612 --> 00:05:10.490\naddress that's attached to it or whatever.\n\n113\n00:05:10.490 --> 00:05:13.110\nBut for most people,\nthose are the options that we need, and so\n\n114\n00:05:13.110 --> 00:05:17.500\nwe can get those set, and just hit Save,\nand now I'll have a conference room.\n\n115\n00:05:18.700 --> 00:05:20.700\nEquipment is very similar.\n\n116\n00:05:20.700 --> 00:05:23.070\nThe only difference with equipment\nis we don't really have a capacity.\n\n117\n00:05:23.070 --> 00:05:26.790\nSo if I go up here and hit that plus\nsign and do equipment, I can add in,\n\n118\n00:05:26.790 --> 00:05:30.940\nmaybe I've got a shared laptop,\na projector, some kind of cart.\n\n119\n00:05:30.940 --> 00:05:33.040\nWho knows what we have?\n\n120\n00:05:33.040 --> 00:05:36.930\nSo, I'll just say I've got some kind\nof laptop I want to be available.\n\n121\n00:05:36.930 --> 00:05:39.900\nAnd, we can specify whether it or\nnot it automatically accepts.\n\n122\n00:05:39.900 --> 00:05:43.242\nNotice I don't put a location for\nthis, and I don't put a capacity,\n\n123\n00:05:43.242 --> 00:05:45.580\ncuz it's not a room, it's just a piece\nof equipment that can move around.\n\n124\n00:05:45.580 --> 00:05:47.990\nAnd you can designate delegates\nwho are responsible for\n\n125\n00:05:47.990 --> 00:05:51.000\nmanaging the equipment, all right.\n\n126\n00:05:51.000 --> 00:05:52.410\nSo, I'll go ahead and save that one.\n\n127\n00:05:52.410 --> 00:05:55.980\nAnd so now I've got some of\nthese resource contacts created.\n\n128\n00:05:55.980 --> 00:05:57.650\nWhat do I need to do from here?\n\n129\n00:05:57.650 --> 00:05:58.600\nNot much.\n\n130\n00:05:58.600 --> 00:06:00.500\nFrom here, it really manages itself.\n\n131\n00:06:00.500 --> 00:06:02.330\nIt's kind of neat how the system works.\n\n132\n00:06:02.330 --> 00:06:04.780\nFor an end user, they go into Outlook, and\n\n133\n00:06:04.780 --> 00:06:08.060\nI'll use the Outlook web app\nhere to do this on mine.\n\n134\n00:06:08.060 --> 00:06:12.490\nAnd when they go into their system,\nthey can switch to the counter view, and\n\n135\n00:06:12.490 --> 00:06:14.570\nthey can start to create meetings.\n\n136\n00:06:14.570 --> 00:06:18.080\nIn the full Outlook client,\nyou've got the full Meeting Wizard.\n\n137\n00:06:18.080 --> 00:06:21.090\nIt's really impressive cuz you can see\neverybody's schedules and all of that.\n\n138\n00:06:21.090 --> 00:06:23.590\nBut here inside of OWA,\nit's a little more limited.\n\n139\n00:06:23.590 --> 00:06:26.260\nIf I create a new event,\nI can start to schedule this.\n\n140\n00:06:26.260 --> 00:06:30.610\nSo I'll say this is some kind\nof kick off meeting, and\n\n141\n00:06:30.610 --> 00:06:32.640\nI can specify where I want that to be.\n\n142\n00:06:32.640 --> 00:06:35.270\nAnd for the location,\nI can type in a name, or\n\n143\n00:06:35.270 --> 00:06:37.510\nI've got this add room button over here.\n\n144\n00:06:37.510 --> 00:06:42.420\nAnd I can just hit add room, and what\nit's doing is it's looking at the time\n\n145\n00:06:42.420 --> 00:06:47.020\nthat I've selected, and it's looking\nat the amount of attendees that I have.\n\n146\n00:06:47.020 --> 00:06:52.230\nAnd it's listing for me rooms that\nare big enough, and rooms that are free.\n\n147\n00:06:52.230 --> 00:06:54.920\nSee how all of these say free beside them?\n\n148\n00:06:54.920 --> 00:06:58.400\nA room might already be booked\nduring a certain time, right?\n\n149\n00:06:58.400 --> 00:07:00.690\nSo if I create a meeting,\nI'm gonna create this kick off meeting.\n\n150\n00:07:00.690 --> 00:07:02.711\nI'm gonna put it in Conference Room A.\n\n151\n00:07:02.711 --> 00:07:04.489\nAnd see how it just filled that in and\n\n152\n00:07:04.489 --> 00:07:06.931\nConference Room A becomes an attendee,\nright?\n\n153\n00:07:06.931 --> 00:07:09.391\nThey're listed as somebody\nwho's gonna be attending.\n\n154\n00:07:09.391 --> 00:07:11.671\nAnd then I can start to\ninvite other people.\n\n155\n00:07:11.671 --> 00:07:15.471\nSo I can use the plus sign here and\ngo through and pick other people.\n\n156\n00:07:15.471 --> 00:07:22.191\nI wanna go to my Address List,\nand we'll just take all.\n\n157\n00:07:22.191 --> 00:07:24.550\nOops, I went to all groups,\nI wanted all contacts.\n\n158\n00:07:26.530 --> 00:07:28.050\nWe can invite Bill Gates.\n\n159\n00:07:28.050 --> 00:07:32.080\nHe's a good person to have coming to\nour meeting, we'll invite Bob Denver.\n\n160\n00:07:32.080 --> 00:07:33.460\nThis will be a celebrity meeting, right?\n\n161\n00:07:33.460 --> 00:07:35.315\nI'm just gonna start\ninviting these people, and\n\n162\n00:07:35.315 --> 00:07:38.870\nyou'll see as I look down here,\nhere's laptop, here's projector, right?\n\n163\n00:07:38.870 --> 00:07:40.680\nSo I can start to reserve equipment too.\n\n164\n00:07:40.680 --> 00:07:43.490\nI'm adding all of these\npeople as attendees.\n\n165\n00:07:43.490 --> 00:07:46.270\nNow what's gonna happen is this is\ngonna send out a meeting invite\n\n166\n00:07:46.270 --> 00:07:47.560\nto all these people.\n\n167\n00:07:47.560 --> 00:07:51.550\nWell, Christopher Walken, Bill Gates,\nBob Denver, they're gonna get the invite.\n\n168\n00:07:51.550 --> 00:07:55.110\nAnd they can accept it, or\ndecline it, or say maybe.\n\n169\n00:07:55.110 --> 00:07:58.090\nBut, laptop is gonna\nreceive the invite and\n\n170\n00:07:58.090 --> 00:07:59.940\nConference Room A is gonna\nreceive the invite, and\n\n171\n00:07:59.940 --> 00:08:03.550\nthey're gonna automatically accept it,\nunless they're booked.\n\n172\n00:08:03.550 --> 00:08:05.280\nIf they're booked already,\nthey'll decline it.\n\n173\n00:08:05.280 --> 00:08:08.420\nAnd I'll get a message saying they\ndeclined, and that'll be my hint to go and\n\n174\n00:08:08.420 --> 00:08:10.640\nbook a different room, or\nfind a different computer.\n\n175\n00:08:10.640 --> 00:08:13.470\nSo, that's that kind of way\nthat we keep track of that.\n\n176\n00:08:14.740 --> 00:08:17.780\nAnd then we can specify other information\nhere and then we can save our meeting.\n\n177\n00:08:17.780 --> 00:08:20.060\nSo this one is good,\nI'll go ahead and send it.\n\n178\n00:08:20.060 --> 00:08:23.330\nBut, even before I send it,\nI can go into Scheduling Assistant, and\n\n179\n00:08:23.330 --> 00:08:24.620\nin the Scheduling Assistant,\n\n180\n00:08:24.620 --> 00:08:29.260\nit's gonna help look at those attendees\nand try and find times that they're free.\n\n181\n00:08:29.260 --> 00:08:33.260\nSo, like, if that laptop is booked during\nthis time, I can come in here and look and\n\n182\n00:08:33.260 --> 00:08:35.090\nsay, all right, maybe it's booked here.\n\n183\n00:08:35.090 --> 00:08:36.412\nWhen is it available?\n\n184\n00:08:36.412 --> 00:08:40.700\nAnd it'll show me rooms and equipment,\nthen I can look for time slots when they\n\n185\n00:08:40.700 --> 00:08:44.940\nare available, and start to pick\nthat best opportunity for me.\n\n186\n00:08:44.940 --> 00:08:48.850\nSo I'm gonna leave this one booked, and\nI'll go ahead and send those invites out.\n\n187\n00:08:48.850 --> 00:08:53.026\nNow, the invites go out, the users are\ngonna be pending, but the equipment and\n\n188\n00:08:53.026 --> 00:08:55.471\nthe rooms, they'll automatically accept.\n\n189\n00:08:55.471 --> 00:09:00.249\nSo that should happen pretty quickly,\nand when I, whoops, when I pull that\n\n190\n00:09:00.249 --> 00:09:04.971\nmeeting back up, I can see it's scheduled,\nright, I did, what did I do?\n\n191\n00:09:04.971 --> 00:09:08.610\n11:00 AM to 11:30, so\nit's just a really short meeting.\n\n192\n00:09:08.610 --> 00:09:11.111\nIt's up and it's going so\nwe should be in business there,\n\n193\n00:09:11.111 --> 00:09:12.870\nI've got my kick-off meeting.\n\n194\n00:09:12.870 --> 00:09:14.270\nTerribly exciting, right?\n\n195\n00:09:14.270 --> 00:09:16.520\nBut if I go and\ntry to create another meeting.\n\n196\n00:09:16.520 --> 00:09:17.980\nSo I'll create another one.\n\n197\n00:09:17.980 --> 00:09:22.700\nAnd if I try and book it and\noverlap that time, right?\n\n198\n00:09:22.700 --> 00:09:27.150\nWhen I go to add a room, see how\nConference Room A doesn't show up anymore?\n\n199\n00:09:27.150 --> 00:09:28.380\nIt's gone, right?\n\n200\n00:09:28.380 --> 00:09:31.620\nIt's gone because it's already booked\nduring that time, I can't pick it,\n\n201\n00:09:31.620 --> 00:09:32.330\nit's not free.\n\n202\n00:09:32.330 --> 00:09:37.210\nAnd if I go to my attendees and\nI start to add in people, right?\n\n203\n00:09:37.210 --> 00:09:42.480\nSo I can come in here to my attendees,\nand I'll find that laptop.\n\n204\n00:09:42.480 --> 00:09:46.840\nNow I will see the laptop, and\nwhen I add the laptop in as an attendee,\n\n205\n00:09:46.840 --> 00:09:48.080\nit's gonna let me do it, right?\n\n206\n00:09:48.080 --> 00:09:50.950\nSo there it is, but\nthat attendee is actually busy.\n\n207\n00:09:50.950 --> 00:09:52.460\nNow, I don't know it here.\n\n208\n00:09:52.460 --> 00:09:55.610\nIf I hit Send, it's gonna send to that\nperson and it's gonna bounce back and\n\n209\n00:09:55.610 --> 00:09:57.860\nsay nope, they decline, they're busy, and\n\n210\n00:09:57.860 --> 00:09:59.960\nthat's where that\nScheduling Assistant comes in.\n\n211\n00:09:59.960 --> 00:10:03.170\nIf I go to my Scheduling Assistant,\nI can see that laptop, and\n\n212\n00:10:03.170 --> 00:10:06.570\nI can see that there's a kickoff\nmeeting at that same time.\n\n213\n00:10:06.570 --> 00:10:09.710\nWhen I take a look,\nlaptop is showing as busy.\n\n214\n00:10:09.710 --> 00:10:12.450\nAnd so I can look at laptop's calendar.\n\n215\n00:10:12.450 --> 00:10:14.080\nWhen are they not busy?\n\n216\n00:10:14.080 --> 00:10:15.870\nOh well, it's available at 12, so\n\n217\n00:10:15.870 --> 00:10:19.730\nmaybe I'll just move my\nmeeting forward to 12, right?\n\n218\n00:10:19.730 --> 00:10:22.890\nWhen that person is available, and\nthat'll take care of that for me.\n\n219\n00:10:22.890 --> 00:10:25.771\nAnd I can say, okay, and now I know that,\n\n220\n00:10:25.771 --> 00:10:28.990\nthat laptop will be available and\nnot busy in the other meeting.\n\n221\n00:10:28.990 --> 00:10:31.550\nSo we can send that along and\noff it goes, right?\n\n222\n00:10:31.550 --> 00:10:35.950\nSo, that's how resource mailboxes\nare used, the end users,\n\n223\n00:10:35.950 --> 00:10:36.790\nit's easy for them, right?\n\n224\n00:10:36.790 --> 00:10:38.290\nThey just use it right\nhere inside of Outlook.\n\n225\n00:10:38.290 --> 00:10:40.350\nIt's all in the GUI, it's no big deal.\n\n226\n00:10:40.350 --> 00:10:44.250\nFor Administrators, there's two things\nwe need to be worried about, right?\n\n227\n00:10:44.250 --> 00:10:45.450\nOne is creating them, right?\n\n228\n00:10:45.450 --> 00:10:46.802\nSo we saw, that's easy enough, right?\n\n229\n00:10:46.802 --> 00:10:48.642\nWe go into Resources and we add them in.\n\n230\n00:10:48.642 --> 00:10:53.094\nAnd then two, is dictating whether or\nnot they automatically accept invites or\n\n231\n00:10:53.094 --> 00:10:57.420\nwhether they're managed, and so you\nmight have to come in and change these.\n\n232\n00:10:57.420 --> 00:10:58.870\nLike, if I see a lot of contention for\n\n233\n00:10:58.870 --> 00:11:02.120\nthe laptop,\nI might need to edit that resource.\n\n234\n00:11:02.120 --> 00:11:03.490\nAnd when you jump in there.\n\n235\n00:11:03.490 --> 00:11:06.630\nit's really like a user mailbox,\nthere's only so many options, but\n\n236\n00:11:06.630 --> 00:11:09.260\nyou can set who the booking delegates are,\nright?\n\n237\n00:11:09.260 --> 00:11:13.770\nAnd this is who's allowed to deal with\nthis, by default and accepting everything,\n\n238\n00:11:13.770 --> 00:11:16.330\nI can change that and\nspecify the users who manage it.\n\n239\n00:11:16.330 --> 00:11:21.210\nYou can also set booking options, and\nsee how it says allow repeated meetings?\n\n240\n00:11:21.210 --> 00:11:24.030\nI might not want to allow somebody\nto do a recurring meeting\n\n241\n00:11:24.030 --> 00:11:25.620\nthat books this room over,\nand over, and over again.\n\n242\n00:11:25.620 --> 00:11:27.810\nI can turn that off or leave it on.\n\n243\n00:11:27.810 --> 00:11:31.650\nWe can restrict it to only allowing\nscheduling during business hours, right?\n\n244\n00:11:31.650 --> 00:11:33.560\nI don't want people booking\nthis room at midnight.\n\n245\n00:11:33.560 --> 00:11:35.170\nJust have it during the business hours.\n\n246\n00:11:35.170 --> 00:11:39.360\nWe can always decline if the end\ndate is beyond this limit, right?\n\n247\n00:11:39.360 --> 00:11:41.700\nIf I say, right here, the booking times.\n\n248\n00:11:41.700 --> 00:11:44.550\nIf I say, I don't want them to be\nable to book nine months in advance,\n\n249\n00:11:44.550 --> 00:11:45.530\nwe want it to be limited.\n\n250\n00:11:45.530 --> 00:11:50.470\nSo, here it's got a limit of 180 days, or\nwhat does that work out to, six months.\n\n251\n00:11:50.470 --> 00:11:53.550\nSo, if they try and book something beyond\nsix months, we can automatically decline.\n\n252\n00:11:54.680 --> 00:11:56.171\nAnd then you got a maximum duration.\n\n253\n00:11:56.171 --> 00:12:00.191\nWhat's the longest meeting, or the longest\ntime you want somebody to book a laptop?\n\n254\n00:12:00.191 --> 00:12:03.490\nDo I want somebody to be able to book\nthat laptop for two weeks in a row?\n\n255\n00:12:03.490 --> 00:12:05.460\nNo, you probably want to keep\nthat a little more limited.\n\n256\n00:12:05.460 --> 00:12:08.750\nSo we could limit to a 4 hours,\nor 24 hours, or whatever.\n\n257\n00:12:08.750 --> 00:12:10.850\nAll done right here.\n\n258\n00:12:10.850 --> 00:12:14.231\nYou can also tweak things like the email\naddress, the contact information,\n\n259\n00:12:14.231 --> 00:12:15.490\nlike location and all that.\n\n260\n00:12:15.490 --> 00:12:17.500\nI didn't see that in the wizard\nwhen I added the box.\n\n261\n00:12:17.500 --> 00:12:18.629\nNow I can do it right here.\n\n262\n00:12:19.830 --> 00:12:23.440\nAnd then other delegations as far as\npeople who might be able to send on behalf\n\n263\n00:12:23.440 --> 00:12:24.000\nof that mailbox.\n\n264\n00:12:24.000 --> 00:12:27.890\nSo all these things can be tweaked to\ncustomize that resource record, and\n\n265\n00:12:27.890 --> 00:12:29.510\nget it to work the way we want, right?\n\n266\n00:12:29.510 --> 00:12:31.721\nBut as an administrator, it really\njust comes down to creating these.\n\n267\n00:12:31.721 --> 00:12:33.681\nYou get them put in place,\nand you get them there.\n\n268\n00:12:33.681 --> 00:12:36.360\nNow in real life land,\nlet me tell you what's gonna happen.\n\n269\n00:12:36.360 --> 00:12:37.532\nYou're gonna set all this up.\n\n270\n00:12:37.532 --> 00:12:41.050\nYou're gonna set it up to be automatic and\nit's gonna work great.\n\n271\n00:12:41.050 --> 00:12:46.720\nAnd then one day, an end user\nis gonna book a conference room.\n\n272\n00:12:46.720 --> 00:12:50.890\nAnd then afterwards, your CEO is gonna try\nand book that same conference room, and\n\n273\n00:12:50.890 --> 00:12:53.957\nthey're gonna say well, it's busy,\nI'll want to kick them out.\n\n274\n00:12:53.957 --> 00:12:57.830\nAll right, well if we have it\nset to auto accept like this.\n\n275\n00:12:57.830 --> 00:12:59.212\nIt's not gonna kick them out, it's booked,\n\n276\n00:12:59.212 --> 00:13:01.300\nthe CEO's gonna have to\npick a different time.\n\n277\n00:13:01.300 --> 00:13:05.940\nBut in real life, we know, CEO gets\npriority, we want them to have that room.\n\n278\n00:13:05.940 --> 00:13:07.900\nSo, we're gonna have to get in and\ncancel that.\n\n279\n00:13:07.900 --> 00:13:11.850\nWell, by default, we have to do it,\nthe administrators, so as an admin,\n\n280\n00:13:11.850 --> 00:13:13.590\nyou've got to go in and do that.\n\n281\n00:13:13.590 --> 00:13:16.200\nBut if you don't want to get\ninvolved with all of that,\n\n282\n00:13:16.200 --> 00:13:18.410\nit's a good idea to have\na facilities person or\n\n283\n00:13:18.410 --> 00:13:21.830\nsome other kind of like an office manager,\nand have them be responsible for it.\n\n284\n00:13:21.830 --> 00:13:25.130\nSo we want to make sure we add them\nas delegates to the mailboxes.\n\n285\n00:13:25.130 --> 00:13:29.240\nSo then they can say, all right, I'll just\ngo into OWA, and I'll go to open another\n\n286\n00:13:29.240 --> 00:13:33.430\nuser's folder, and I'll open up that\nprojector, or laptop, or conference room.\n\n287\n00:13:33.430 --> 00:13:37.330\nAnd then I'll just go decline\nthe meeting that's already there, and\n\n288\n00:13:37.330 --> 00:13:39.110\nthen tell the CEO to come back in and\nbook it.\n\n289\n00:13:39.110 --> 00:13:41.120\nThey'll book it and\nit'll be in business, right?\n\n290\n00:13:41.120 --> 00:13:43.160\nSo, that happens a lot.\n\n291\n00:13:43.160 --> 00:13:46.960\nSo just expect to add a delegate,\notherwise your gonna be getting\n\n292\n00:13:46.960 --> 00:13:50.260\nhelp desk support tickets and you'll have\nto become the scheduling coordinator.\n\n293\n00:13:50.260 --> 00:13:52.970\nWhich is not something an IT\nperson really wants to mess with.\n\n294\n00:13:52.970 --> 00:13:54.810\nI don't know.\nMaybe you do like that.\n\n295\n00:13:54.810 --> 00:13:57.582\nI don't, so [LAUGH] definitely something\nthat we're gonna have to put in place.\n\n296\n00:13:57.582 --> 00:14:02.220\nAll right, well,\nthose are resource mailboxes and\n\n297\n00:14:02.220 --> 00:14:04.660\nthere's not really much\nelse to cover on them.\n\n298\n00:14:04.660 --> 00:14:07.530\nYou can get really creative and\nset them up to work however you want.\n\n299\n00:14:07.530 --> 00:14:09.260\nI use examples of laptops and projectors.\n\n300\n00:14:09.260 --> 00:14:11.540\nIt might be things like moving vans,\nor trucks.\n\n301\n00:14:11.540 --> 00:14:14.550\nIt could be all sorts of crazy things\nthat you want to book in there,\n\n302\n00:14:14.550 --> 00:14:15.410\nyou just set it up.\n\n303\n00:14:15.410 --> 00:14:17.100\nExchange treats them all equally.\n\n304\n00:14:18.312 --> 00:14:20.980\nAll right, well, that's about all\nI've got for resource mailboxes,\n\n305\n00:14:20.980 --> 00:14:22.000\nso we'll wrap things up here.\n\n306\n00:14:22.000 --> 00:14:25.210\nIn this segment, we got a chance to\nsee setting up conference rooms,\n\n307\n00:14:25.210 --> 00:14:28.620\nas well as setting up equipment, and\nhow we can have that shared calendar.\n\n308\n00:14:28.620 --> 00:14:30.980\nHow the Meeting Minder can\ntake advantage of that and\n\n309\n00:14:30.980 --> 00:14:34.090\nhelp to find the best place for\nthat meeting and get things scheduled.\n\n310\n00:14:34.090 --> 00:14:35.650\nIt's really cool functionality.\n\n311\n00:14:35.650 --> 00:14:37.170\nOnly takes a few minutes to get it set up,\n\n312\n00:14:37.170 --> 00:14:39.610\nso definitely something you'll\nwant to take advantage of.\n\n313\n00:14:39.610 --> 00:14:41.032\nAll right,\nwell I hope you guys enjoyed the show.\n\n314\n00:14:41.032 --> 00:14:44.391\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n315\n00:14:44.391 --> 00:14:45.717\n[MUSIC]\n\n",
          "vimeoId": "136202924"
        },
        {
          "description": "In this episode, Don describes the various types of distribution groups found in Exchange 2013. He demonstrates how to create and manage the groups, as well as when one group type would be preferred over another based on a client's needs.",
          "length": "1569",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-5-distribution_groups-082515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-5-distribution_groups-082515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-5-distribution_groups-082515-1-sm.jpg",
          "title": "Distribution Groups",
          "transcript": "WEBVTT\n\n1\n00:00:00.353 --> 00:00:10.753\n[MUSIC]\n\n2\n00:00:10.753 --> 00:00:13.380\nAll right, good morning,\ngood afternoon and good evening.\n\n3\n00:00:13.380 --> 00:00:15.510\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.510 --> 00:00:17.520\nI'm your host, Don Pizet.\n\n5\n00:00:17.520 --> 00:00:20.460\nBack again with another episode\nof Microsoft Exchange 2013 and\n\n6\n00:00:20.460 --> 00:00:24.340\nin this episode we're gonna be taking\na look at distribution groups,\n\n7\n00:00:24.340 --> 00:00:27.140\nwhich are kind of an important\npart of exchange.\n\n8\n00:00:27.140 --> 00:00:30.210\nBecause often times we find ourselves\nsending an email not just to one person\n\n9\n00:00:30.210 --> 00:00:33.840\nbut to a group of people and\nif you want to sit there and\n\n10\n00:00:33.840 --> 00:00:36.740\nadd people in your two field over,\nover and over again, you can do that.\n\n11\n00:00:36.740 --> 00:00:40.100\nBut if we create a distribution group, we\ncan quickly and easily send one email and\n\n12\n00:00:40.100 --> 00:00:41.810\nhave it go to multiple recipients.\n\n13\n00:00:41.810 --> 00:00:45.050\nIt's a lot easier than setting up things\nlike shared mailboxes and all that.\n\n14\n00:00:45.050 --> 00:00:47.830\nYou just fire off an email and\nit hits all the people involved.\n\n15\n00:00:47.830 --> 00:00:50.720\nAnd the cool part is, with the\ndistribution group, you can move people\n\n16\n00:00:50.720 --> 00:00:54.520\ninto it, and you can take people out of it\nto determine who's getting those emails.\n\n17\n00:00:54.520 --> 00:00:59.440\nSo it really does simplify things like\nsharing incoming email across users.\n\n18\n00:00:59.440 --> 00:01:01.280\nSo there's a ton of different uses for it.\n\n19\n00:01:01.280 --> 00:01:03.520\nMost of you guys are familiar with\ndistribution groups at this point so\n\n20\n00:01:03.520 --> 00:01:05.040\nI'm not gonna harp on that.\n\n21\n00:01:05.040 --> 00:01:08.870\nBut, there are actually three different\ntypes of distribution group or\n\n22\n00:01:08.870 --> 00:01:10.670\nmailing list that we can\nuse inside of Exchange and\n\n23\n00:01:10.670 --> 00:01:13.800\nI wanna show you guys those groups and\nshow you how they can be used and\n\n24\n00:01:13.800 --> 00:01:17.320\nwhat their differences are, all right So,\nI'm gonna start right here in my\n\n25\n00:01:17.320 --> 00:01:20.320\nExchange administration center and\nbasically I'm logged in.\n\n26\n00:01:20.320 --> 00:01:22.360\nI've got a couple of recipients\nthat are sitting here.\n\n27\n00:01:22.360 --> 00:01:24.730\nThere's me, Jane Smith, John Doe, right?\n\n28\n00:01:24.730 --> 00:01:26.895\nHowever recipients that you guys have.\n\n29\n00:01:26.895 --> 00:01:30.690\nAnd if I find that I'm constantly\nemailing some of the same people over and\n\n30\n00:01:30.690 --> 00:01:33.360\nover again, I might choose to\ncreate a distribution group.\n\n31\n00:01:33.360 --> 00:01:35.385\nNow end users can do this.\n\n32\n00:01:35.385 --> 00:01:39.870\nEnd users can fire up Microsoft Outlook\nand they can add users to a group.\n\n33\n00:01:39.870 --> 00:01:41.910\nAnd they can do that\nuntil the cows come home.\n\n34\n00:01:41.910 --> 00:01:44.520\nRight, but that's being stored\nin their local contacts.\n\n35\n00:01:44.520 --> 00:01:46.170\nAnd the contacts that\nare part of their mail box,\n\n36\n00:01:46.170 --> 00:01:48.380\nit's not shared across the entire company.\n\n37\n00:01:48.380 --> 00:01:50.566\nSo if I want something\nthat everybody can use,\n\n38\n00:01:50.566 --> 00:01:54.040\nI need to create it here in\nthe Exchange administration center.\n\n39\n00:01:54.040 --> 00:01:57.020\nUnder recipients,\nyou'll see groups right up top.\n\n40\n00:01:57.020 --> 00:01:57.820\nWe can go under groups and\n\n41\n00:01:57.820 --> 00:02:00.485\nright here is where we can add\nin the different group types.\n\n42\n00:02:00.485 --> 00:02:02.553\nAnd when we go to hit this\nlittle plus sign over here,\n\n43\n00:02:02.553 --> 00:02:06.415\nthat's where we'll see our three choices\nand three different types of groups.\n\n44\n00:02:06.415 --> 00:02:08.285\nWell, let's start with\nthe standard one first.\n\n45\n00:02:08.285 --> 00:02:10.305\nThis guy right here, a distribution group.\n\n46\n00:02:10.305 --> 00:02:13.585\nA distribution group is designed\nto be used for email purposes.\n\n47\n00:02:13.585 --> 00:02:16.115\nI want to be able to send\nan email to one address and\n\n48\n00:02:16.115 --> 00:02:18.025\nhave it go to more than one person, right?\n\n49\n00:02:18.025 --> 00:02:19.375\nWell, what would be an example of this?\n\n50\n00:02:19.375 --> 00:02:20.419\nI might have something like.\n\n51\n00:02:22.080 --> 00:02:25.960\nAn executives group, right?\n\n52\n00:02:25.960 --> 00:02:29.410\nSo all of my executive\nemployees go in here,\n\n53\n00:02:29.410 --> 00:02:34.220\nand this is the one email list that I\ncan send to and hit all the executives.\n\n54\n00:02:34.220 --> 00:02:36.850\nSo I can give it an alias.\n\n55\n00:02:36.850 --> 00:02:40.120\nAnd then I can specify\nwho's gonna be in it.\n\n56\n00:02:40.120 --> 00:02:41.890\nNow, when I look at some\nof my other options here,\n\n57\n00:02:41.890 --> 00:02:44.340\nI've got the organizational unit\nwhere this group is gonna be stored.\n\n58\n00:02:44.340 --> 00:02:47.040\nIt is a group in the Active Directory.\n\n59\n00:02:47.040 --> 00:02:49.780\nAnd so I might wanna browse and\nchoose where I want that to reside.\n\n60\n00:02:49.780 --> 00:02:54.850\nI'll put mine in the ITProTV OU since\nthat's where my company's residing.\n\n61\n00:02:54.850 --> 00:02:56.330\nAnd then I can specify who owns it.\n\n62\n00:02:56.330 --> 00:03:00.550\nNow, ownership is gonna default to you,\nwhoever's creating it.\n\n63\n00:03:00.550 --> 00:03:02.710\nWhoever creates the group,\nthey're the owner.\n\n64\n00:03:02.710 --> 00:03:05.950\nAnd as the owner, that means you have\nthe permission to put people in,\n\n65\n00:03:05.950 --> 00:03:09.270\ntake people out,\nto disable the group if you want.\n\n66\n00:03:09.270 --> 00:03:10.710\nYou control that group.\n\n67\n00:03:10.710 --> 00:03:14.610\nYou can have more than one owner,\nand the owner can be a person or\n\n68\n00:03:14.610 --> 00:03:16.450\nthe owner can be another group.\n\n69\n00:03:16.450 --> 00:03:19.490\nWe can have one group in charge of\nanother group if you really wanted to.\n\n70\n00:03:19.490 --> 00:03:23.210\nBut, the owner is just important to\ndetermine who is able to manage ownership,\n\n71\n00:03:23.210 --> 00:03:24.900\nat least in the beginning.\n\n72\n00:03:24.900 --> 00:03:27.090\nAfter that, we have who the members are.\n\n73\n00:03:27.090 --> 00:03:30.250\nNow the default members\nare nobody except the owner.\n\n74\n00:03:30.250 --> 00:03:32.550\nSee how it says add\ngroup owners as members.\n\n75\n00:03:32.550 --> 00:03:36.360\nWell, I might be the network\nadministrator, but I'm not an executive so\n\n76\n00:03:36.360 --> 00:03:37.910\nI don't want to be a member of the group.\n\n77\n00:03:37.910 --> 00:03:39.540\nI don't want to get the executive emails.\n\n78\n00:03:39.540 --> 00:03:41.068\nSo I'm gonna uncheck that.\n\n79\n00:03:41.068 --> 00:03:43.890\nAnd now I would come through an add\nwho ever the executives were.\n\n80\n00:03:43.890 --> 00:03:46.780\nSo maybe Jane Smith is our CIO.\n\n81\n00:03:46.780 --> 00:03:50.940\nSo, I'm gonna come in here and hit plus,\nand I'll add in Jane Smith and\n\n82\n00:03:50.940 --> 00:03:54.310\nany other users that I want, and\nnow they're gonna be in that group.\n\n83\n00:03:54.310 --> 00:03:57.850\nSo if I send an email to this\nexecutives distribution group,\n\n84\n00:03:57.850 --> 00:03:59.301\nshe's gonna get a copy of it.\n\n85\n00:03:59.301 --> 00:04:04.580\nAnd maybe old John Doe is our CTO,\nor some other title.\n\n86\n00:04:04.580 --> 00:04:07.630\nI can add him in and\nnow both of them will get the emails.\n\n87\n00:04:07.630 --> 00:04:10.430\nNow, they are getting\nseparate copies of the email.\n\n88\n00:04:10.430 --> 00:04:13.640\nSo, if one of them marks it as read,\nit's still unread for the other, and\n\n89\n00:04:13.640 --> 00:04:16.070\nif one of them deletes it,\nit's still present for the others.\n\n90\n00:04:16.070 --> 00:04:19.437\nIt's actually stored more than\nonce in the mailbox database.\n\n91\n00:04:19.437 --> 00:04:23.157\nSo it's still separate but\nI have one address to be able to reach and\n\n92\n00:04:23.157 --> 00:04:25.710\ncontact these people, all right.\n\n93\n00:04:25.710 --> 00:04:29.140\nNow the neat thing about this\ndistribution groups is, by default,\n\n94\n00:04:29.140 --> 00:04:30.990\nthe owner controls who's in it.\n\n95\n00:04:30.990 --> 00:04:34.170\nSo if I make a regular user,\nif I make Jane, the owner.\n\n96\n00:04:34.170 --> 00:04:36.800\nJane can go and add and\nremove people from the group on her own.\n\n97\n00:04:36.800 --> 00:04:39.520\nShe can do it right from inside\nof Outlook or Outlook web app.\n\n98\n00:04:39.520 --> 00:04:41.695\nAnd it really does make\nlife a little easier there,\n\n99\n00:04:41.695 --> 00:04:43.810\ncuz we don't have to administer it.\n\n100\n00:04:43.810 --> 00:04:48.260\nBut you can actually set up cool things,\nlike self service groups,\n\n101\n00:04:48.260 --> 00:04:50.980\nwhere people can opt in and\nopt out of the group at their leisure.\n\n102\n00:04:50.980 --> 00:04:53.150\nI'm going to save that for\na little bit later, but\n\n103\n00:04:53.150 --> 00:04:55.960\nyou'll see those options right\ndown here where it's asking,\n\n104\n00:04:55.960 --> 00:05:00.390\nshould anybody be able to join, or\nshould anybody be able to leave?\n\n105\n00:05:00.390 --> 00:05:04.320\nAnd the default is, well you've gotta\nbe approved by the group owner.\n\n106\n00:05:04.320 --> 00:05:06.050\nThe group owner controls that.\n\n107\n00:05:06.050 --> 00:05:08.730\nBut you can actually set it to be\nautomatic where people can kind of move\n\n108\n00:05:08.730 --> 00:05:10.060\nin and out.\n\n109\n00:05:10.060 --> 00:05:13.510\nAnd, you know actually, I said the default\nhad to be approved, but you'll see\n\n110\n00:05:13.510 --> 00:05:16.980\nhere it's actually defaulting to not\nbeing approved so I can switch that.\n\n111\n00:05:16.980 --> 00:05:20.380\nAnd I'm gonna make it where the owner\nis the person who has to do it.\n\n112\n00:05:20.380 --> 00:05:22.610\nSo we can kinda tweak these settings.\n\n113\n00:05:22.610 --> 00:05:25.210\nI'll revisit these in a few minutes and\nwe'll get to see it in action.\n\n114\n00:05:26.320 --> 00:05:30.350\nBut once it's done, I can hit Save, and\nI've now got a distribution group, and\n\n115\n00:05:30.350 --> 00:05:32.910\nif I go back into the properties\nof the distribution group,\n\n116\n00:05:32.910 --> 00:05:35.030\nI can see what its email address is.\n\n117\n00:05:35.030 --> 00:05:39.370\nIt's gonna show up in my global address\nbook, so anybody who goes into Outlook or\n\n118\n00:05:39.370 --> 00:05:42.220\nOWA and pulls up the global address list,\nthey'll be able to find\n\n119\n00:05:42.220 --> 00:05:47.590\nthis executives group in there and email\nit, and then it'll hit all the executives.\n\n120\n00:05:47.590 --> 00:05:51.410\nIf we edit that, we can go back in here\nand look at our email addresses and\n\n121\n00:05:51.410 --> 00:05:53.470\nit should have,\nassuming it's not already taken,\n\n122\n00:05:53.470 --> 00:05:56.850\nit should've assigned it\nexecutives@itprotv.net.\n\n123\n00:05:56.850 --> 00:06:00.330\nIt uses the alias that I put in to\ndetermine what that email address\n\n124\n00:06:00.330 --> 00:06:01.790\nis going to be.\n\n125\n00:06:01.790 --> 00:06:04.150\nSo there's that alias I\nput in when I created it.\n\n126\n00:06:04.150 --> 00:06:08.170\nAnd over here,\nif I go to my email options,\n\n127\n00:06:08.170 --> 00:06:10.700\nwe can see it got executives@itprotv.net.\n\n128\n00:06:10.700 --> 00:06:11.770\nI can change that.\n\n129\n00:06:11.770 --> 00:06:12.740\nI'm gonna have more than one.\n\n130\n00:06:12.740 --> 00:06:16.030\nI might want to put in some other\naliases on my own just in case.\n\n131\n00:06:16.030 --> 00:06:20.900\nYou know,\nmaybe somebody emails exec@itprotv.net,\n\n132\n00:06:20.900 --> 00:06:24.280\nor maybe I've got more than one domain and\nI want to punch those in.\n\n133\n00:06:24.280 --> 00:06:28.050\nSo I can fill all that stuff out and\nit'll get put in there, right?\n\n134\n00:06:28.050 --> 00:06:31.250\nThere are a few other interesting\nthings you can tailor in here.\n\n135\n00:06:31.250 --> 00:06:33.200\nFor example, delivery management.\n\n136\n00:06:33.200 --> 00:06:35.910\nNotice the default setting for this group.\n\n137\n00:06:35.910 --> 00:06:38.720\nOnly senders inside my\norganization can use it.\n\n138\n00:06:39.780 --> 00:06:42.280\nWhat if I'm trying to create\na distribution group that I want\n\n139\n00:06:42.280 --> 00:06:44.540\na lot of people to be able to use,\nlike the internet?\n\n140\n00:06:44.540 --> 00:06:49.290\nMaybe in my company, I decide that I\nwant to have an email address called\n\n141\n00:06:49.290 --> 00:06:52.320\ninformation or sales,\nmaybe I have a sales team.\n\n142\n00:06:52.320 --> 00:06:55.720\nAnd so\nI want to create a sales@itprotv.net.\n\n143\n00:06:55.720 --> 00:06:58.160\nAnd I want anybody on the internet\nto be able to email it.\n\n144\n00:06:58.160 --> 00:07:01.160\nWell that's gonna be a problem\nbecause the default setting there,\n\n145\n00:07:01.160 --> 00:07:04.200\nis that only people in my\norganization can do this.\n\n146\n00:07:04.200 --> 00:07:08.280\nWe might need to change that setting to\nallow the internet to be able to use it.\n\n147\n00:07:08.280 --> 00:07:09.860\nLet's run with the sales example.\n\n148\n00:07:09.860 --> 00:07:11.730\nSo I have a sales department, and\n\n149\n00:07:11.730 --> 00:07:15.370\nin my sales department I have users that\nare in there and so I want to be able to\n\n150\n00:07:15.370 --> 00:07:19.880\nsend an email to sales@itprotv.net and\nhave it go to all those people.\n\n151\n00:07:19.880 --> 00:07:22.280\nAnd I also want it to be\navailable from the internet, so\n\n152\n00:07:22.280 --> 00:07:25.450\nI know I can whip up\na distribution group and do that.\n\n153\n00:07:25.450 --> 00:07:29.640\nBut the odds are, if you've got a sales\ndepartment, you probably already have some\n\n154\n00:07:29.640 --> 00:07:31.940\nActive Directory groups that\nare in place that you're using for\n\n155\n00:07:31.940 --> 00:07:36.920\npermissions that would be nice if\nyou could use as email groups also.\n\n156\n00:07:36.920 --> 00:07:42.180\nWell, a distribution group, by default,\ncan only be used for email, and that's it.\n\n157\n00:07:42.180 --> 00:07:43.750\nIt can't be used for permissions.\n\n158\n00:07:43.750 --> 00:07:46.670\nSo it's got one purpose, and\nthat one purpose is email.\n\n159\n00:07:46.670 --> 00:07:50.538\nBut if I have a group that I want\nto do both email and permissions,\n\n160\n00:07:50.538 --> 00:07:55.640\nthen instead of creating a distributions\ngroup, I should create a security group.\n\n161\n00:07:55.640 --> 00:07:57.800\nA security group can be used for\nboth, right?\n\n162\n00:07:57.800 --> 00:07:59.090\nNot just email.\n\n163\n00:07:59.090 --> 00:08:01.000\nSo it's done right here form\nthe same screen, though.\n\n164\n00:08:01.000 --> 00:08:03.210\nIf I come back in here and I hit add.\n\n165\n00:08:03.210 --> 00:08:07.245\nI can choose to add a security group,\nand when I add a security group,\n\n166\n00:08:07.245 --> 00:08:11.440\nnow it's gonna create an active\ndirectory group on the back end.\n\n167\n00:08:11.440 --> 00:08:16.490\nAnd so I might create a group\ncalled Sales Department, and\n\n168\n00:08:16.490 --> 00:08:18.580\nI might give it an alias of just Sales.\n\n169\n00:08:18.580 --> 00:08:19.220\nAll right.\n\n170\n00:08:19.220 --> 00:08:21.030\nAnd then I can give it that description.\n\n171\n00:08:21.030 --> 00:08:23.120\nThis is just like the other screen we saw,\nright.\n\n172\n00:08:23.120 --> 00:08:25.210\nWe have our owner, we have our members.\n\n173\n00:08:25.210 --> 00:08:27.360\nI'll add John Doe to this list.\n\n174\n00:08:27.360 --> 00:08:29.160\nAnd we get these people put in,\n\n175\n00:08:29.160 --> 00:08:32.750\nand then when I save it it's\ngonna create that group.\n\n176\n00:08:32.750 --> 00:08:37.150\nNow, when I created it I didn't\npoint to it there, I should have.\n\n177\n00:08:37.150 --> 00:08:40.000\nIt didn't have that\nautomatic membership stuff.\n\n178\n00:08:40.000 --> 00:08:43.900\nUsers can't automatically join or\nunjoin a security group.\n\n179\n00:08:43.900 --> 00:08:45.220\nYou're either in it or you're not, and\n\n180\n00:08:45.220 --> 00:08:48.000\nwhoever's the owner of that\ngroup is what tailors that, so\n\n181\n00:08:48.000 --> 00:08:51.620\nwe don't have that self-service\nportal type kind of configuration.\n\n182\n00:08:51.620 --> 00:08:55.200\nBut now I've got this sales group,\nand this sales group is\n\n183\n00:08:55.200 --> 00:08:59.480\nan actual active directory security group\nthat I can use to assign permissions.\n\n184\n00:08:59.480 --> 00:09:02.760\nI can say, anybody who's in the sales\ngroup can print to this printer, or\n\n185\n00:09:02.760 --> 00:09:04.590\ncan write to these files.\n\n186\n00:09:04.590 --> 00:09:08.070\nBut I can also shoot an email\nto sales@itprotv.net,\n\n187\n00:09:08.070 --> 00:09:09.760\nand it's gonna go to all these people,\nright.\n\n188\n00:09:09.760 --> 00:09:13.505\nSo it's kind of a multi-purpose group,\nI can use it for more than one thing.\n\n189\n00:09:13.505 --> 00:09:17.595\nBut even for this one, I'm gonna\nneed to edit that, and then go into\n\n190\n00:09:17.595 --> 00:09:21.575\nits delivery options to set it so that the\noutside world will be able to email to it.\n\n191\n00:09:21.575 --> 00:09:25.925\nSo when I go to delivery management,\nI can say, senders inside and\n\n192\n00:09:25.925 --> 00:09:27.857\noutside of the organization\nwill be able to send to it.\n\n193\n00:09:27.857 --> 00:09:30.145\nThat's an important part\nto be able to have that.\n\n194\n00:09:31.650 --> 00:09:32.760\nAll right.\n\n195\n00:09:32.760 --> 00:09:36.630\nSo once we've got that in place,\nnow you've got that distribution group.\n\n196\n00:09:36.630 --> 00:09:40.240\nPeople can receive email,\nit comes to that main email and\n\n197\n00:09:40.240 --> 00:09:42.900\nthen it gets distributed out to all\nthe individual mailboxes behind it.\n\n198\n00:09:42.900 --> 00:09:46.850\nNow if they reply to that email,\nwho are they replying as?\n\n199\n00:09:46.850 --> 00:09:48.760\nWell, they're gonna reply as themselves.\n\n200\n00:09:48.760 --> 00:09:51.830\nSo the email might have gone\nto sales@itprotv.net, but\n\n201\n00:09:51.830 --> 00:09:56.070\nwhen John replies to it,\nhe's gonna reply as John@itprotv.net.\n\n202\n00:09:56.070 --> 00:09:57.740\nAnd that may be what I want, or\n\n203\n00:09:57.740 --> 00:10:00.670\nI might want people to be able\nto send on behalf of the group.\n\n204\n00:10:00.670 --> 00:10:03.730\nNow, the group doesn't actually have\na mailbox, so it's a little bit different.\n\n205\n00:10:03.730 --> 00:10:05.669\nBut you'll notice when\nwe go into the settings,\n\n206\n00:10:06.930 --> 00:10:09.540\nthat you've actually got that option\nwhere you can set delegation.\n\n207\n00:10:09.540 --> 00:10:12.660\nSo you can allow somebody to use\nthat address when they send.\n\n208\n00:10:12.660 --> 00:10:16.970\nSo if we kinda look down the list here,\nyou'll see group delegation, and\n\n209\n00:10:16.970 --> 00:10:22.150\nwe can delegate out whether they have\nsend as or send on behalf of that group.\n\n210\n00:10:22.150 --> 00:10:26.040\nSo even though it doesn't have a dedicated\nmailbox, we can still send as it, right.\n\n211\n00:10:26.040 --> 00:10:27.400\nSo it's kind of a neat thing.\n\n212\n00:10:27.400 --> 00:10:29.040\nI say it doesn't have a dedicated mailbox.\n\n213\n00:10:29.040 --> 00:10:31.160\nIt actually kind of does on the back end.\n\n214\n00:10:31.160 --> 00:10:32.690\nIt doesn't save the email,\nbut it does exist.\n\n215\n00:10:35.150 --> 00:10:38.860\nAlright, so those are our first two\ntypes of groups, distribution groups and\n\n216\n00:10:38.860 --> 00:10:39.550\nsecurity groups.\n\n217\n00:10:39.550 --> 00:10:41.710\nRemember the key difference there\nis security groups can be used for\n\n218\n00:10:41.710 --> 00:10:45.540\npermissions and email, distribution\ngroups can just be used for email.\n\n219\n00:10:45.540 --> 00:10:49.590\nNow it is important that you pick\nthe right group type from the beginning\n\n220\n00:10:49.590 --> 00:10:51.240\ncuz you can't change your mind later.\n\n221\n00:10:51.240 --> 00:10:56.180\nThere's no way to convert a distribution\ngroup to a security group or\n\n222\n00:10:56.180 --> 00:10:56.690\nthe other way around.\n\n223\n00:10:56.690 --> 00:10:58.410\nYou can't convert a security\ngroup to a distribution group.\n\n224\n00:10:58.410 --> 00:11:00.740\nSo if you have to change it later on,\n\n225\n00:11:00.740 --> 00:11:03.740\nYou actually have to create an all new\ngroup set it with the same membership and\n\n226\n00:11:03.740 --> 00:11:05.940\nthen delete the other one so\nit's kind of a hassle.\n\n227\n00:11:05.940 --> 00:11:07.760\nMake sure you choose\ncorrectly in the beginning.\n\n228\n00:11:09.170 --> 00:11:13.360\nAll right the other thing, the other group\nis what's called a dynamic group and\n\n229\n00:11:13.360 --> 00:11:15.930\ndynamic groups are the most flexible.\n\n230\n00:11:15.930 --> 00:11:18.830\nOne of the problems with these like I\njust set up the sales department group.\n\n231\n00:11:18.830 --> 00:11:19.430\nRight.\n\n232\n00:11:19.430 --> 00:11:24.010\nSo any time I hire a new salesperson, I've\ngotta add them to this group, don't I?\n\n233\n00:11:24.010 --> 00:11:25.560\nRight, and that's a bit of a pain.\n\n234\n00:11:25.560 --> 00:11:29.590\nIf I'm using templates, then I can\ngo in and I can copy the user and\n\n235\n00:11:29.590 --> 00:11:32.860\nI can add them, copying the user\nthat's already in this group and\n\n236\n00:11:32.860 --> 00:11:35.050\nit'll automatically add them to the group,\nright.\n\n237\n00:11:35.050 --> 00:11:40.810\nBut if I'm using Exchange, right here, for\nexample, let's say I had an IT department\n\n238\n00:11:40.810 --> 00:11:47.320\ngroup, and I went into my active\ndirectory, which is here.\n\n239\n00:11:47.320 --> 00:11:52.510\nI'll go into my Active Directory, and\nI'll go into my IT organizational unit.\n\n240\n00:11:52.510 --> 00:11:56.720\nAnd when I go in there, I'll see that\nI'm in IT, and so is Jane Smith.\n\n241\n00:11:56.720 --> 00:12:01.520\nAnd so I create this IT group,\nand I put us in it.\n\n242\n00:12:01.520 --> 00:12:02.050\nRight?\n\n243\n00:12:02.050 --> 00:12:03.950\nNow people can email the IT department.\n\n244\n00:12:03.950 --> 00:12:07.500\nBut when I hire a new employee, I have to\nremember to put them in that group and\n\n245\n00:12:07.500 --> 00:12:11.410\nif I'm creating them from the GUI\nthat's not gonna happen, right?\n\n246\n00:12:11.410 --> 00:12:12.460\nLet me show you.\n\n247\n00:12:12.460 --> 00:12:17.039\nSo if I go back here, I'm gonna\ncreate a new group that I'll call IT.\n\n248\n00:12:17.039 --> 00:12:20.410\nSo I'm just gonna do a distribution\ngroup and I'll call it IT.\n\n249\n00:12:20.410 --> 00:12:23.430\nAnd, you know, we'll give an alias.\n\n250\n00:12:24.740 --> 00:12:26.310\nAnd I'm gonna browse through\norganizational unit.\n\n251\n00:12:26.310 --> 00:12:29.730\nI'm gonna put it in the IT\ndepartment there, all right?\n\n252\n00:12:29.730 --> 00:12:35.078\nAnd then for the members I'll come in\nhere and I'll add Jane and myself.\n\n253\n00:12:37.092 --> 00:12:38.980\nSo let's just get added in there.\n\n254\n00:12:38.980 --> 00:12:41.930\nThere we go.\nAnd so Jane and I are now in the group.\n\n255\n00:12:41.930 --> 00:12:42.630\nAnd things are great.\n\n256\n00:12:42.630 --> 00:12:44.390\nRight?\nPeople can email the IT department and\n\n257\n00:12:44.390 --> 00:12:45.560\nwe're gonna get it.\n\n258\n00:12:45.560 --> 00:12:49.370\nBut then I hire a new employee and\nso I go over here to mailboxes, and\n\n259\n00:12:49.370 --> 00:12:50.680\nI add a new recipient.\n\n260\n00:12:50.680 --> 00:12:52.500\nRight, so I'm gonna add a user mailbox.\n\n261\n00:12:52.500 --> 00:12:56.230\nAnd this is gonna be, oh I don't know,\n\n262\n00:12:56.230 --> 00:13:01.670\nwe'll just do Tom Jones,\nall right, so So tjones.\n\n263\n00:13:01.670 --> 00:13:06.710\nAnd so we'll give him a first name here\nof Tom and last name of Jones, right?\n\n264\n00:13:06.710 --> 00:13:09.475\nAnd for the organizational unit,\nI'm going to browse and put them in IT,\n\n265\n00:13:09.475 --> 00:13:11.605\nbecause Tom's going to be in\nthe IT department with us.\n\n266\n00:13:11.605 --> 00:13:14.980\nAnd then I can give him his login name and\n\n267\n00:13:14.980 --> 00:13:20.780\nhis password, all right,\nand we'll save that.\n\n268\n00:13:20.780 --> 00:13:27.040\nNow, Tom's in the IT OU, and the IT\nDistribution Group is in that OU also.\n\n269\n00:13:27.040 --> 00:13:31.210\nBut, there's nothing that says,\nhey put Tom into that group.\n\n270\n00:13:31.210 --> 00:13:32.620\nSo when I go back to my groups, and\n\n271\n00:13:32.620 --> 00:13:36.200\nI take a look at my IT department,\nhe's not going to be in it, right.\n\n272\n00:13:36.200 --> 00:13:38.140\nSo I have to remember to come back and\nchange this.\n\n273\n00:13:38.140 --> 00:13:41.450\nThe more distribution groups that people\nare a part of, the harder this becomes.\n\n274\n00:13:41.450 --> 00:13:43.225\nIt becomes a real hassle.\n\n275\n00:13:43.225 --> 00:13:47.900\nSo It'd be nice if we could have\ngroups that maintain themselves,\n\n276\n00:13:47.900 --> 00:13:51.220\nwhere I didn't have to come in and\nadd every new employee.\n\n277\n00:13:51.220 --> 00:13:53.920\nEvery time I hire somebody, I don't\nwant to have to come in and add them in.\n\n278\n00:13:53.920 --> 00:13:57.018\nI just want them to already be there.\n\n279\n00:13:57.018 --> 00:13:59.050\nSo in my scenario,\nI don't have that right now.\n\n280\n00:13:59.050 --> 00:14:02.440\nA dynamic distribution\ngroup will help me do that.\n\n281\n00:14:02.440 --> 00:14:06.750\nThe way a dynamic distribution group works\nis it doesn't have a hard-set membership.\n\n282\n00:14:06.750 --> 00:14:09.090\nWe don't say,\nhere's the members of this group.\n\n283\n00:14:09.090 --> 00:14:13.820\nInstead, we give it an active directory\nquery, a query that it can run that says,\n\n284\n00:14:13.820 --> 00:14:17.210\nhere's how you can figure\nout who your membership is.\n\n285\n00:14:17.210 --> 00:14:19.910\nAnd every time somebody sends\nan email to that group,\n\n286\n00:14:19.910 --> 00:14:21.750\nit does a query to figure\nout who the members are.\n\n287\n00:14:21.750 --> 00:14:24.490\nSo it's always up to date and\nwe don't have to remember to do it.\n\n288\n00:14:24.490 --> 00:14:26.210\nSo that's pretty cool.\n\n289\n00:14:26.210 --> 00:14:28.150\nIf we add new users,\nthey're automatically added.\n\n290\n00:14:28.150 --> 00:14:31.050\nIf we fire people, disable accounts,\nthey're automatically removed.\n\n291\n00:14:31.050 --> 00:14:32.760\nNo maintenance required, all right?\n\n292\n00:14:32.760 --> 00:14:34.730\nBut it does require setting\nup a little bit of a query,\n\n293\n00:14:34.730 --> 00:14:36.450\nwe have to kind of sort that out.\n\n294\n00:14:36.450 --> 00:14:40.340\nIn the GUI there's some nice really\neasy drop down boxes we can use, but\n\n295\n00:14:40.340 --> 00:14:42.540\nyou can go to the PowerShell\nan you can get really specific.\n\n296\n00:14:42.540 --> 00:14:46.420\nYou can say give me just people in the IT\ndepartment whose last name starts with\n\n297\n00:14:46.420 --> 00:14:48.490\nS and who also work in Florida.\n\n298\n00:14:48.490 --> 00:14:49.940\nYou can do that right?\n\n299\n00:14:49.940 --> 00:14:51.970\nFrom the GUI it's a little\nmore simplified but\n\n300\n00:14:51.970 --> 00:14:54.270\nthe GUI actually gives us\nthe key one that we need.\n\n301\n00:14:54.270 --> 00:14:57.190\nMost of the times dynamic\ndistribution groups are based on\n\n302\n00:14:57.190 --> 00:14:59.180\norganizational unit membership.\n\n303\n00:14:59.180 --> 00:15:03.400\nI can say, I want an IT\ndistribution group that's based on\n\n304\n00:15:03.400 --> 00:15:07.220\nall the people in the IT department who\nare all gonna be in the IT OU and so\n\n305\n00:15:07.220 --> 00:15:10.820\nI can just build it right around that and\nit's automatically gonna update.\n\n306\n00:15:10.820 --> 00:15:11.990\nNow, be careful.\n\n307\n00:15:11.990 --> 00:15:14.240\nThe more of these groups you create,\n\n308\n00:15:14.240 --> 00:15:17.060\nthe more active directory queries\nthat are happening, right?\n\n309\n00:15:17.060 --> 00:15:18.690\nBecause every time\nsomebody sends an email,\n\n310\n00:15:18.690 --> 00:15:20.780\nit's gotta do that query\nto look up the membership.\n\n311\n00:15:20.780 --> 00:15:25.040\nSo if this is a really high traffic\naddress, if it's receiving millions of\n\n312\n00:15:25.040 --> 00:15:28.770\nemails a day, that can be a little bit\nburdensome on the domain controllers so\n\n313\n00:15:28.770 --> 00:15:30.480\nyou might have to improve\nyour domain controllers.\n\n314\n00:15:30.480 --> 00:15:31.860\nJust monitor performance.\n\n315\n00:15:31.860 --> 00:15:34.000\nMost people aren't receiving\nemail at that volume and\n\n316\n00:15:34.000 --> 00:15:38.160\nso it's not a big deal and it'll be\na negligible impact on your server.\n\n317\n00:15:38.160 --> 00:15:39.630\nSo lets create one of these dynamic ones.\n\n318\n00:15:39.630 --> 00:15:43.070\nI'm gonna delete this IT group that I just\ncreated cuz it does not meet my needs,\n\n319\n00:15:43.070 --> 00:15:44.350\nright, or wait we'll create a new one.\n\n320\n00:15:44.350 --> 00:15:45.550\nWe'll do a help desk.\n\n321\n00:15:45.550 --> 00:15:48.710\nI want a help desk email that\ngoes to all my IT people, right?\n\n322\n00:15:48.710 --> 00:15:52.470\nSo I'm gonna go to add and this time I'm\ngonna choose dynamic distribution group.\n\n323\n00:15:52.470 --> 00:15:54.800\nNow notice there's no\ndynamic security group.\n\n324\n00:15:54.800 --> 00:15:57.800\nIt doesn't support that because It\nwould be an exponential increase,\n\n325\n00:15:57.800 --> 00:15:59.500\nthe amount of lookups you'd have to do.\n\n326\n00:15:59.500 --> 00:16:00.878\nEvery time you accessed a file or\na folder,\n\n327\n00:16:00.878 --> 00:16:02.448\nit would have to look up\nthat group membership and\n\n328\n00:16:02.448 --> 00:16:03.500\nthat would just be a nightmare.\n\n329\n00:16:03.500 --> 00:16:04.640\nSo you can't do that.\n\n330\n00:16:04.640 --> 00:16:08.050\nBut I can do a dynamic distribution group,\nand it's very similar to the other one.\n\n331\n00:16:08.050 --> 00:16:09.210\nWe give it a name.\n\n332\n00:16:09.210 --> 00:16:10.510\nI'll call this one Help Desk.\n\n333\n00:16:10.510 --> 00:16:12.090\nI'll give it an alias.\n\n334\n00:16:12.090 --> 00:16:13.858\nI'll just call it helpdesk, or\n\n335\n00:16:13.858 --> 00:16:18.710\nthis could be support if we want it to\nbe our tech support, whatever it is.\n\n336\n00:16:18.710 --> 00:16:20.940\nWe can specify the organizational\nunit it resides in,\n\n337\n00:16:20.940 --> 00:16:22.569\nI'll pop this into the IT department.\n\n338\n00:16:24.380 --> 00:16:27.550\nWho the owner is, and if I leave it blank,\nit's just gonna make me the owner, so,\n\n339\n00:16:27.550 --> 00:16:28.890\nI don't have to worry there.\n\n340\n00:16:28.890 --> 00:16:31.060\nBut then after that is where\nthe screen gets different.\n\n341\n00:16:31.060 --> 00:16:34.138\nHere's where we can start\nto specify our query, okay.\n\n342\n00:16:34.138 --> 00:16:36.170\nAnd the query's made up of two parts.\n\n343\n00:16:36.170 --> 00:16:38.924\nThe first part is what type of\nrecipients I wanna get, all right.\n\n344\n00:16:38.924 --> 00:16:44.120\nNow, if I pointed at the IT OU and\nthis group is in the IT OU it kind\n\n345\n00:16:44.120 --> 00:16:46.980\nof creates a bit of a loop, and I might\nnot want to get other groups and stuff.\n\n346\n00:16:46.980 --> 00:16:51.420\nSo I'm really just looking for people\nthat have Exchange mailboxes, right?\n\n347\n00:16:51.420 --> 00:16:54.560\nI might not want contacts or resource\nmailboxes or other things like that so\n\n348\n00:16:54.560 --> 00:16:55.770\nI can filter those out.\n\n349\n00:16:55.770 --> 00:16:57.800\nUsually we just want people\nwith mailboxes, all right?\n\n350\n00:16:57.800 --> 00:16:58.820\nWe don't want anything else.\n\n351\n00:16:59.890 --> 00:17:01.570\nThen, we add our rules.\n\n352\n00:17:01.570 --> 00:17:05.360\nAnd your rule is basically what's\nspecifying the people to find.\n\n353\n00:17:05.360 --> 00:17:07.550\nSo if I want people who\nare in a particular OU,\n\n354\n00:17:07.550 --> 00:17:10.970\nwho work in a particular state,\nI can add these rules in.\n\n355\n00:17:10.970 --> 00:17:12.550\nYou can add multiple ones.\n\n356\n00:17:12.550 --> 00:17:15.902\nNow, in the GUI we only\nhave these canned rules.\n\n357\n00:17:15.902 --> 00:17:19.002\nBut from PowerShell, you can actually\nwrite really complex ones and\n\n358\n00:17:19.002 --> 00:17:22.380\ndo whatever you want, but these are some\nof the key ones that we might want.\n\n359\n00:17:22.380 --> 00:17:23.330\nFor example,\n\n360\n00:17:23.330 --> 00:17:28.358\nRecipient container, I just want users\nthat have mailboxes that are in the IT OU.\n\n361\n00:17:28.358 --> 00:17:30.582\nAnd so I'm gonna pick that role.\n\n362\n00:17:30.582 --> 00:17:35.930\nThat's the one I want, people in\nthe IT department organizational unit.\n\n363\n00:17:35.930 --> 00:17:38.458\nAnd now when I save that,\nthis distribution group,\n\n364\n00:17:38.458 --> 00:17:40.540\nI don't have to tell it the membership.\n\n365\n00:17:40.540 --> 00:17:44.230\nIt just goes and queries the AD, looks\nin that OU and gets those users back.\n\n366\n00:17:44.230 --> 00:17:46.930\nAnd it should be doing that already, okay?\n\n367\n00:17:46.930 --> 00:17:50.950\nSo if I edit that, there's not a whole\nheck of a lot that I can change on them.\n\n368\n00:17:50.950 --> 00:17:53.310\nI'm not gonna see all the membership\nstuff because that's all static.\n\n369\n00:17:53.310 --> 00:17:54.440\nWell, I mean it's dynamic.\n\n370\n00:17:54.440 --> 00:17:55.840\nIt's querying it in the background.\n\n371\n00:17:55.840 --> 00:17:59.570\nBut I can see membership and\nmodify the query.\n\n372\n00:17:59.570 --> 00:18:03.420\nSo I can tweak that query if I need to,\nto get it set just right, and then we can\n\n373\n00:18:03.420 --> 00:18:06.050\nadjust our delivery management,\njust like any other distribution group.\n\n374\n00:18:06.050 --> 00:18:09.160\nI'd probably want to make this one,\npublic, all right.\n\n375\n00:18:09.160 --> 00:18:12.048\nBut where this gets really cool is\nif I come in and add a new mailbox,\n\n376\n00:18:12.048 --> 00:18:15.059\nit's automatically going to get\nadded to this distribution group.\n\n377\n00:18:15.059 --> 00:18:19.980\nAnd when you take a look at these,\nthat makes life a lot easier.\n\n378\n00:18:19.980 --> 00:18:24.800\nSo now, if I were to fire off\nan email to helpdesk@itprotv.net,\n\n379\n00:18:24.800 --> 00:18:26.780\nit does a query in the background.\n\n380\n00:18:26.780 --> 00:18:31.231\nIt looks for everybody in that IT OU,\nand that's who the email goes to.\n\n381\n00:18:31.231 --> 00:18:33.480\nAnd if I disable a user,\nit doesn't go to them anymore.\n\n382\n00:18:33.480 --> 00:18:35.803\nIf I move them out of the OU,\nit doesn't go to them anymore.\n\n383\n00:18:35.803 --> 00:18:39.340\nAnd if I had new users, they're\nautomatically added in, so pretty cool.\n\n384\n00:18:39.340 --> 00:18:40.511\nWe have to maintain that query.\n\n385\n00:18:40.511 --> 00:18:43.140\nThat's a little bit of extra work,\nall right?\n\n386\n00:18:43.140 --> 00:18:46.610\nSo, dynamic distribution groups are a\ngreat way to take the load off of us as\n\n387\n00:18:46.610 --> 00:18:47.130\nadministrators.\n\n388\n00:18:47.130 --> 00:18:48.690\nThey automatically update.\n\n389\n00:18:48.690 --> 00:18:52.130\nBut another solution is just to push\nthat load off to our end users and say,\n\n390\n00:18:52.130 --> 00:18:54.150\nlet's let them deal with it, right?\n\n391\n00:18:54.150 --> 00:18:58.530\nWe can create distribution groups that\nhave self-service membership, right?\n\n392\n00:18:58.530 --> 00:19:00.615\nAnd that's kinda what I\nhighlighted earlier, but\n\n393\n00:19:00.615 --> 00:19:03.096\nlet me show you the kinda details,\nhow we can get this set up.\n\n394\n00:19:03.096 --> 00:19:07.260\nAnd let the end users do the work for us,\ncuz that kinda is nice when it happens.\n\n395\n00:19:07.260 --> 00:19:11.880\nSo, let's say, for example,\nthat we've got a distribution group for\n\n396\n00:19:11.880 --> 00:19:13.320\nsome leadership training we're doing.\n\n397\n00:19:13.320 --> 00:19:14.970\nRight, so there's gonna be\nsome leadership training, and\n\n398\n00:19:14.970 --> 00:19:16.390\nthey want a leadership email address.\n\n399\n00:19:16.390 --> 00:19:22.450\nSo we create a distribution group and\nwe call it Leadership Training, all right?\n\n400\n00:19:22.450 --> 00:19:24.740\nAnd the Leadership Training is optional.\n\n401\n00:19:24.740 --> 00:19:27.440\nUsers can choose to be a part of\nthe training or they can choose not to.\n\n402\n00:19:27.440 --> 00:19:28.860\nRight, if they're a leader,\nthey wanna be a part of it.\n\n403\n00:19:28.860 --> 00:19:30.675\nIf they're not, then they don't.\n\n404\n00:19:30.675 --> 00:19:33.745\nSo what we don't wanna do, though, is we\ndon't want to have to constantly add or\n\n405\n00:19:33.745 --> 00:19:35.355\nremove people from the list.\n\n406\n00:19:35.355 --> 00:19:37.948\nSo we want to set this up so\nthat users can opt in, right.\n\n407\n00:19:37.948 --> 00:19:40.778\nThey can join the list, or they can\nleave it at their own advance, right,\n\n408\n00:19:40.778 --> 00:19:42.445\njust whatever they want.\n\n409\n00:19:42.445 --> 00:19:46.320\nSo I'm gonna create this,\nand I'll pop it into our OU.\n\n410\n00:19:46.320 --> 00:19:48.160\nI'll leave the administrator\nhere as the owner.\n\n411\n00:19:48.160 --> 00:19:51.180\nWe would add in whoever was in charge of\nthe leadership group, we would add them.\n\n412\n00:19:51.180 --> 00:19:54.855\nSo maybe it's Jane Smith, so\nI'll add her as an owner also.\n\n413\n00:19:54.855 --> 00:19:57.809\nAnd you can stay an owner as\nadministrator if you want.\n\n414\n00:19:57.809 --> 00:20:03.690\nYou don't have to, but it's kind of up\nto how you plan on administering this.\n\n415\n00:20:03.690 --> 00:20:05.920\nAnd then down here we can add\nthe group owners as members.\n\n416\n00:20:05.920 --> 00:20:08.760\nNow, I don't wanna be a member,\nbut we'll make Jane a member.\n\n417\n00:20:08.760 --> 00:20:10.888\nAnd so I'm gonna have to manually add her.\n\n418\n00:20:10.888 --> 00:20:14.140\nAnd you could add anybody else that wanted\ntoo, but I'll just add Jane for now.\n\n419\n00:20:14.140 --> 00:20:15.600\nOkay, so there's Jane.\n\n420\n00:20:15.600 --> 00:20:19.220\nAnd then down below I can pick\nhow the membership is controlled.\n\n421\n00:20:19.220 --> 00:20:21.010\nNow, there's three ways to do it.\n\n422\n00:20:21.010 --> 00:20:22.400\nOne, we can close it off.\n\n423\n00:20:22.400 --> 00:20:25.464\nAll right, if you close it off,\nJane would have to manually go and\n\n424\n00:20:25.464 --> 00:20:27.210\nadd people to the group or remove it.\n\n425\n00:20:27.210 --> 00:20:27.710\nShe's an owner.\n\n426\n00:20:27.710 --> 00:20:29.210\nShe can do it, all right?\n\n427\n00:20:29.210 --> 00:20:31.200\nBut she'd have to do it manually.\n\n428\n00:20:31.200 --> 00:20:33.696\nBut if we choose one of the other two,\nopen and closed.\n\n429\n00:20:33.696 --> 00:20:35.730\nThese are a little bit different, okay?\n\n430\n00:20:35.730 --> 00:20:41.070\nWith closed, users can see the group,\nand they can request to join.\n\n431\n00:20:41.070 --> 00:20:44.820\nBut if they request to join, they'll\nbe rejected automatically, all right.\n\n432\n00:20:44.820 --> 00:20:46.492\nNow Jane'll see that rejection.\n\n433\n00:20:46.492 --> 00:20:48.607\nAnd she could go and\noverride that if you wanted, but\n\n434\n00:20:48.607 --> 00:20:50.900\nit'll just be rejected automatically.\n\n435\n00:20:50.900 --> 00:20:55.820\nBut open, anybody can see the group,\nand they can join it, right?\n\n436\n00:20:55.820 --> 00:20:59.340\nIt says here, they can join this group\nwithout being approved by the group owner.\n\n437\n00:20:59.340 --> 00:21:01.859\nThey don't have to get approval,\nthey can just opt-in.\n\n438\n00:21:01.859 --> 00:21:05.020\nAnd then if they want out,\nright down here, they can opt-out.\n\n439\n00:21:05.020 --> 00:21:08.680\nOpen means anyone can come in and\nleave when they want, all right?\n\n440\n00:21:08.680 --> 00:21:12.840\nClosed means they can't come and go,\nJane will have to manually add them.\n\n441\n00:21:12.840 --> 00:21:17.300\nOwner approval means they\ncan submit a request, and\n\n442\n00:21:17.300 --> 00:21:20.340\nJane will have to approve or\ndecline it based on her decision.\n\n443\n00:21:20.340 --> 00:21:23.700\nShe'll get an email with a little check or\nan x, and she'll pick and\n\n444\n00:21:23.700 --> 00:21:25.660\nchoose whether she wants to let them in.\n\n445\n00:21:25.660 --> 00:21:27.997\nBut if I make this one open,\nI'm just gonna make it open,\n\n446\n00:21:27.997 --> 00:21:30.345\nany employee can join\nthe leadership group if they want.\n\n447\n00:21:30.345 --> 00:21:34.705\nI'll save that, and\nnow users can opt-in on their own, okay.\n\n448\n00:21:34.705 --> 00:21:37.345\nNow this is gonna require\na little bit of user education.\n\n449\n00:21:37.345 --> 00:21:40.093\nSo now that we've got that set up,\nwe go and we tell Jane, hey Jane,\n\n450\n00:21:40.093 --> 00:21:41.815\nwe set up that mailing list you needed.\n\n451\n00:21:41.815 --> 00:21:44.965\nYou've got your leadership group,\nhere's what you need to tell people.\n\n452\n00:21:44.965 --> 00:21:47.799\nSend out an email to the users,\nor whatever, and just say,\n\n453\n00:21:47.799 --> 00:21:51.159\nhey If you'd like to be a part of my\ngroup, here's what you need to do.\n\n454\n00:21:51.159 --> 00:21:54.890\nLog into OWA, go into your settings,\nand join the group.\n\n455\n00:21:54.890 --> 00:21:55.860\nHere's the steps, right?\n\n456\n00:21:55.860 --> 00:21:57.230\nLet me show you guys how it works.\n\n457\n00:21:57.230 --> 00:22:01.782\nI'll do an incognito window or\nInPrivate browsing.\n\n458\n00:22:01.782 --> 00:22:05.747\nShows which browser I normally use,\nbut I'll [LAUGH] go ahead and\n\n459\n00:22:05.747 --> 00:22:07.817\nget logged into OWA, all right?\n\n460\n00:22:07.817 --> 00:22:09.996\nAnd when I login,\nI'm gonna login as myself.\n\n461\n00:22:09.996 --> 00:22:17.450\nSo, I'll be dpezet@itvpro.net and\nI'll sign in.\n\n462\n00:22:17.450 --> 00:22:19.800\nAll right, so\nI'm gonna get logged in here now.\n\n463\n00:22:19.800 --> 00:22:23.540\nJane, I made her a member of the group,\nbut nobody else was a member of the group.\n\n464\n00:22:23.540 --> 00:22:24.830\nIt's just Jane.\n\n465\n00:22:24.830 --> 00:22:26.980\nSo when I get logged in, I'm not a member.\n\n466\n00:22:26.980 --> 00:22:28.740\nBut I can opt-in to it.\n\n467\n00:22:28.740 --> 00:22:30.380\nI'll go into my settings.\n\n468\n00:22:30.380 --> 00:22:31.731\nI'll go into the groups area, and\n\n469\n00:22:31.731 --> 00:22:33.839\nyou'll be able to see\nthe groups that are available.\n\n470\n00:22:33.839 --> 00:22:39.737\nAnd you can pick and choose to join\nthe group, so let me just save that.\n\n471\n00:22:39.737 --> 00:22:40.358\nAnd we'll get in there.\n\n472\n00:22:40.358 --> 00:22:43.871\nNow, where it's not intuitive, the reason\nyou have to tell the end users is most end\n\n473\n00:22:43.871 --> 00:22:47.660\nusers, they're gonna see these\ngroups in their global address list.\n\n474\n00:22:47.660 --> 00:22:50.363\nAnd they're gonna think,\nwell how do I join it?\n\n475\n00:22:50.363 --> 00:22:51.576\nAnd they're in the global address list.\n\n476\n00:22:51.576 --> 00:22:54.741\nAnd so, it's not intuitive for them to\nthink, I've gotta go into my options, but\n\n477\n00:22:54.741 --> 00:22:55.930\nthat's exactly how it works.\n\n478\n00:22:55.930 --> 00:23:00.640\nSo, I gotta go up here to my gear, and\nin here we can go into our Options.\n\n479\n00:23:00.640 --> 00:23:05.330\nAnd in your Options, inside of OWA\non the left side, you've got groups.\n\n480\n00:23:05.330 --> 00:23:08.725\nAnd when you go to groups, that's what's\ngonna pull up the groups that you're\n\n481\n00:23:08.725 --> 00:23:12.330\nalready a member of as well as showing\nones that you could potentially join.\n\n482\n00:23:12.330 --> 00:23:13.450\nSo we'll give that\na second while it updates.\n\n483\n00:23:13.450 --> 00:23:15.670\nThis is the first time\nI've logged in I guess.\n\n484\n00:23:15.670 --> 00:23:17.437\nSee how it shows distribution\ngroups I belong to?\n\n485\n00:23:17.437 --> 00:23:19.115\nI already belong to IT, right?\n\n486\n00:23:19.115 --> 00:23:22.420\nAnd groups that I own,\nthese are ones that I'm the manager of.\n\n487\n00:23:23.500 --> 00:23:25.920\nAnd so if you were Jane and\nyou wanted to add or remove people,\n\n488\n00:23:25.920 --> 00:23:28.310\nyou'd go right in here to groups\nthat I own, and edit the group.\n\n489\n00:23:28.310 --> 00:23:30.510\nAnd you could then edit its membership,\nright?\n\n490\n00:23:30.510 --> 00:23:33.100\nBut if I want to join a group,\nright up here,\n\n491\n00:23:33.100 --> 00:23:37.665\nyou'll see the little people with a plus\nsign, and that lets us join a group.\n\n492\n00:23:37.665 --> 00:23:40.770\nOr the people with a minus\nsign lets us leave a group.\n\n493\n00:23:40.770 --> 00:23:44.540\nAnd if we've got it set to open,\nwe can hit the people with a plus.\n\n494\n00:23:44.540 --> 00:23:47.510\nWe can go to join, and\nhere's all the groups that are open.\n\n495\n00:23:47.510 --> 00:23:50.270\nI've got sales department, IT,\napparently I left those open.\n\n496\n00:23:50.270 --> 00:23:52.920\nBut I can choose Leadership Training, and\n\n497\n00:23:52.920 --> 00:23:58.730\nif it's set to truly be open,\nthen I'm gonna be able to join it.\n\n498\n00:23:58.730 --> 00:24:02.850\nIf it's set to owner approval,\nthis will kick off an email to Jane.\n\n499\n00:24:02.850 --> 00:24:05.730\nJane'll get an email, and she'll be able\nto approve or decline it, just like any\n\n500\n00:24:05.730 --> 00:24:08.428\nkind of calendar invite you approve or\ndecline, that's what she'll get.\n\n501\n00:24:08.428 --> 00:24:11.180\nAnd if she approves it, I'm in, and\nif she declines it, I'm not, right?\n\n502\n00:24:11.180 --> 00:24:15.240\nBut in this case I can select the group I\nwant and I can hit the join button, and\n\n503\n00:24:15.240 --> 00:24:16.830\nit's gonna update.\n\n504\n00:24:16.830 --> 00:24:17.960\nI should be joining that group.\n\n505\n00:24:17.960 --> 00:24:20.740\nThere we go, I've successfully joined\nthe group Leadership Training.\n\n506\n00:24:20.740 --> 00:24:23.799\nOr it would say, an email has been\nsent to the group administrator for\n\n507\n00:24:23.799 --> 00:24:24.712\napproval, right.\n\n508\n00:24:24.712 --> 00:24:26.940\nSo it's kind of letting me\nknow what that status is.\n\n509\n00:24:26.940 --> 00:24:30.680\nAnd when I close out, now I can see\nI'm in the Leadership Training, right.\n\n510\n00:24:30.680 --> 00:24:32.962\nI'm a member of that group,\nI opted in, and\n\n511\n00:24:32.962 --> 00:24:35.325\nI didn't have to get\nthe help desk involved.\n\n512\n00:24:35.325 --> 00:24:38.215\nAnd then if I decide I'm kinda\ndone with the leadership group.\n\n513\n00:24:38.215 --> 00:24:39.472\nI've learned all I'm gonna learn.\n\n514\n00:24:39.472 --> 00:24:42.888\nI can come right back into here,\nchoose Leadership Training, and\n\n515\n00:24:42.888 --> 00:24:44.500\nchoose to unjoin it.\n\n516\n00:24:44.500 --> 00:24:47.650\nAnd here it'll say it's going to unjoin\nme, and now I'm out of the group.\n\n517\n00:24:47.650 --> 00:24:50.720\nThe owner of the group didn't have to\ndo anything, and the IT department,\n\n518\n00:24:50.720 --> 00:24:52.400\nthe administrators,\ndidn't have to do anything.\n\n519\n00:24:52.400 --> 00:24:54.810\nThat's really the perfect\nworld right there, right?\n\n520\n00:24:54.810 --> 00:24:59.040\nSo, dynamic access groups,\nthey can query that AD and\n\n521\n00:24:59.040 --> 00:25:01.300\nautomatically build up the membership.\n\n522\n00:25:01.300 --> 00:25:04.593\nThese guys, though, self service groups,\nthe end users can control it themselves,\n\n523\n00:25:04.593 --> 00:25:05.550\nso that's pretty cool.\n\n524\n00:25:05.550 --> 00:25:07.930\nIt's a neat way to do it.\n\n525\n00:25:07.930 --> 00:25:10.130\nAll right, that's about all I've\ngot on distribution groups.\n\n526\n00:25:10.130 --> 00:25:12.730\nDo remember that if you want to get some\nreally complex queries written in there,\n\n527\n00:25:12.730 --> 00:25:14.800\nyou can drop to PowerShell and\nyou can write some amazing ones.\n\n528\n00:25:14.800 --> 00:25:18.010\nCheck out Microsoft's Technet website,\nthey've got some great examples on there.\n\n529\n00:25:18.010 --> 00:25:21.088\nBut the GUI part, thats really all\nthey want you to know for the exam.\n\n530\n00:25:21.088 --> 00:25:23.740\nAnd in real life, [LAUGH] its\nwhat most of us are going to use,\n\n531\n00:25:23.740 --> 00:25:27.097\ncuz organizational units really lend\nthemselves to filtering pretty well.\n\n532\n00:25:27.097 --> 00:25:30.570\nAll right, well, in this episode, we got\na chance to see some new recipient types,\n\n533\n00:25:30.570 --> 00:25:32.380\nright, the distribution groups.\n\n534\n00:25:32.380 --> 00:25:36.170\nAnd we saw standard distribution groups,\nwhich are just used for email, and\n\n535\n00:25:36.170 --> 00:25:38.670\nwe saw the self-service\nfunctionality on those.\n\n536\n00:25:38.670 --> 00:25:42.813\nWe got to see security groups,\nwhich are used for email and permissions.\n\n537\n00:25:42.813 --> 00:25:45.763\nAnd then lastly we got to see\ndynamic distribution groups,\n\n538\n00:25:45.763 --> 00:25:49.800\nwhich can do an LDAP query to populate\nautomatically and stay up to date.\n\n539\n00:25:49.800 --> 00:25:51.180\nThree different types of groups,\n\n540\n00:25:51.180 --> 00:25:54.120\nthree different use case scenarios,\nall useful, right?\n\n541\n00:25:54.120 --> 00:25:56.790\nAnd definitely something you'll\nend up using in the real world.\n\n542\n00:25:56.790 --> 00:25:58.580\nSo, hope you guys enjoyed it.\n\n543\n00:25:58.580 --> 00:26:02.680\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n544\n00:26:02.680 --> 00:26:08.228\n[MUSIC]\n\n",
          "vimeoId": "137284153"
        },
        {
          "description": "In this episode, Don demonstrates the various methods for users to delegate access to their Exchange email. He covers Send As, Send on Behalf of, and Full Access delegations as well as which should be used in what scenarios.",
          "length": "1217",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-6-mailbox_delegation-081315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-6-mailbox_delegation-081315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-6-mailbox_delegation-081315-1-sm.jpg",
          "title": "Mailbox Delegation",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.559\n[MUSIC]\n\n2\n00:00:10.559 --> 00:00:13.452\nGood morning, good afternoon and\ngood evening and\n\n3\n00:00:13.452 --> 00:00:16.018\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:16.018 --> 00:00:18.737\nI'm your host Don Pezet\nback again with another\n\n5\n00:00:18.737 --> 00:00:21.210\nepisode of Microsoft Exchange 2013.\n\n6\n00:00:21.210 --> 00:00:24.836\nIn this episode, we're gonna be taking\na look at delegating permissions on\n\n7\n00:00:24.836 --> 00:00:28.253\na mailbox or as I like to call it,\npushing our work off on somebody else.\n\n8\n00:00:28.253 --> 00:00:31.501\nBecause why bother sending your own email\nwhen somebody else can do it for you?\n\n9\n00:00:31.501 --> 00:00:34.007\n[LAUGH] So\nthis is actually a pretty common setup,\n\n10\n00:00:34.007 --> 00:00:35.543\nwhere you get a lot of people.\n\n11\n00:00:35.543 --> 00:00:39.666\nPeople who are executives, like a CEO\nwhere they get a high volume of email and\n\n12\n00:00:39.666 --> 00:00:44.360\nthey can't possibly deal with all the\nemail themselves, so they have assistants.\n\n13\n00:00:44.360 --> 00:00:47.312\nOr it might be like a celebrity,\nwho has a celebrity mailbox and\n\n14\n00:00:47.312 --> 00:00:49.947\nthey have an agent or\na PR firm that handles the replies.\n\n15\n00:00:49.947 --> 00:00:54.511\nSo there's plenty of times where we need\nother people not necessarily to be able\n\n16\n00:00:54.511 --> 00:00:57.914\nto have full access to our mailbox,\nbut to be able to reply or\n\n17\n00:00:57.914 --> 00:01:02.360\nsend emails on our behalf and that's\na feature that's built in to Exchange.\n\n18\n00:01:02.360 --> 00:01:04.952\nAnd it's one of the more interesting ones,\nbecause there's so\n\n19\n00:01:04.952 --> 00:01:07.050\nmany different ways to configure it.\n\n20\n00:01:07.050 --> 00:01:09.070\nSending on behalf of somebody or\n\n21\n00:01:09.070 --> 00:01:12.980\ndelegating permissions to send as you,\nit's something we can set up as\n\n22\n00:01:12.980 --> 00:01:16.020\nadministrators right inside of\nthe Exchange Admin Center or\n\n23\n00:01:16.020 --> 00:01:20.110\nit's something the end users can set up\nthemselves without getting us involved.\n\n24\n00:01:20.110 --> 00:01:22.495\nSo from that perspective,\nthe setting it up in Outlook,\n\n25\n00:01:22.495 --> 00:01:23.899\nwe can just let them deal with it.\n\n26\n00:01:23.899 --> 00:01:25.267\nThat's not our problem.\n\n27\n00:01:25.267 --> 00:01:28.470\nBut we can set it up inside of Exchange,\nso we need to know it.\n\n28\n00:01:28.470 --> 00:01:30.821\nIt is on the exam and it's something\nwe just want to be aware of.\n\n29\n00:01:30.821 --> 00:01:34.180\nSo let's take a look at that and\nI'll give you guys an example.\n\n30\n00:01:34.180 --> 00:01:38.088\nSo here inside my Exchange environment,\nI've got a couple recipients set up and\n\n31\n00:01:38.088 --> 00:01:39.709\nI've got Bob Denver right here.\n\n32\n00:01:39.709 --> 00:01:43.483\nAnd so Bob, he might be really busy a nd\nhe needs somebody to be able to send email\n\n33\n00:01:43.483 --> 00:01:44.600\non his behalf.\n\n34\n00:01:44.600 --> 00:01:48.413\nSo maybe he has an assistant and we'll say\nthat Jane Smith here is his assistant.\n\n35\n00:01:48.413 --> 00:01:53.330\nAnd we want Jane to be able to\nsend emails on Bob's behalf.\n\n36\n00:01:53.330 --> 00:01:57.078\nSo if we go and take Bob's account here,\nwe can edit his account.\n\n37\n00:01:57.078 --> 00:01:59.244\nAnd in tthe settings for his mailbox,\n\n38\n00:01:59.244 --> 00:02:02.707\nyou'll see down here where\nwe've got mailbox delegation.\n\n39\n00:02:02.707 --> 00:02:06.520\nNow there's actually three\ndifferent ways to do delegation.\n\n40\n00:02:06.520 --> 00:02:08.300\nThe first one is Send As.\n\n41\n00:02:08.300 --> 00:02:10.055\nWell, Send As is kind of\nwhat I'm talking about.\n\n42\n00:02:10.055 --> 00:02:15.840\nI want Jane to be able to Send As Bob and\nright beneath it, I've got Send on Behalf.\n\n43\n00:02:15.840 --> 00:02:18.520\nI want Jane to Send on Behalf of Bob also.\n\n44\n00:02:18.520 --> 00:02:20.120\nWhat's the difference?\n\n45\n00:02:20.120 --> 00:02:22.080\nWell, the difference is how this shows up.\n\n46\n00:02:22.080 --> 00:02:28.530\nIf I give Jane Send As permissions, she\ncan now send an email as if she were Bob.\n\n47\n00:02:28.530 --> 00:02:31.444\nAnd whoever receives the email\nwill have no way to know,\n\n48\n00:02:31.444 --> 00:02:33.492\nwhether it was Bob that sent it or Jane.\n\n49\n00:02:33.492 --> 00:02:36.213\nIt's very obvious that it was\njust sent by Bob and that's it.\n\n50\n00:02:36.213 --> 00:02:39.120\nThey have no idea about who else\nmight have been behind the scenes.\n\n51\n00:02:39.120 --> 00:02:44.080\nSo when we choose Send As,\nwe're obscuring who the actual sender is.\n\n52\n00:02:44.080 --> 00:02:48.302\nWhen we do Send on Behalf though,\nthey'll receive an email and\n\n53\n00:02:48.302 --> 00:02:52.844\nthe recipient who receives that\nemail will see this email comes from\n\n54\n00:02:52.844 --> 00:02:55.246\nJane Smith on behalf of Bob Denver.\n\n55\n00:02:55.246 --> 00:02:59.387\nSo it's actually indicated right there\nin the from field that it was sent by\n\n56\n00:02:59.387 --> 00:03:00.504\nsomebody else, but\n\n57\n00:03:00.504 --> 00:03:04.390\nsomebody with the authority to\nemail on that person's behalf.\n\n58\n00:03:04.390 --> 00:03:08.905\nSo the choice we're really making here is\ndo we want to be apparent that somebody's\n\n59\n00:03:08.905 --> 00:03:10.399\nimpersonating somebody?\n\n60\n00:03:10.399 --> 00:03:11.901\nOr do we want it to be seamless and\n\n61\n00:03:11.901 --> 00:03:14.980\ninvisible that somebody's\nimpersonating somebody?\n\n62\n00:03:14.980 --> 00:03:17.534\nSend As,\nthat's the seamless invisible one.\n\n63\n00:03:17.534 --> 00:03:19.930\nSend on Behalf, that's the visible one.\n\n64\n00:03:19.930 --> 00:03:22.004\nThe one you can tell what's going on.\n\n65\n00:03:22.004 --> 00:03:23.710\nThere is a third way to do it.\n\n66\n00:03:23.710 --> 00:03:27.647\nIf you scroll down to the very\nbottom here, you've got Full Access.\n\n67\n00:03:27.647 --> 00:03:30.735\nWe could give Jane Full Access\nto Bob's mailbox,\n\n68\n00:03:30.735 --> 00:03:34.340\nthat's a lot different\nthan the send permissions.\n\n69\n00:03:34.340 --> 00:03:37.120\nSend permissions,\nJane can send emails Bob, but\n\n70\n00:03:37.120 --> 00:03:41.030\nshe couldn't necessarily go in and\ndelete emails out of his mailbox.\n\n71\n00:03:42.140 --> 00:03:45.130\nShe doesn't have that, she has\nthe permission to send not to go in and\n\n72\n00:03:45.130 --> 00:03:46.210\ndelete things.\n\n73\n00:03:46.210 --> 00:03:49.325\nIf I give her full access though,\nshe can do whatever she wants.\n\n74\n00:03:49.325 --> 00:03:50.830\nNow sometimes we want that.\n\n75\n00:03:50.830 --> 00:03:53.950\nWe want her to be able to create\ncalendar items or approve or\n\n76\n00:03:53.950 --> 00:03:55.680\ndecline meeting invitations.\n\n77\n00:03:55.680 --> 00:03:59.580\nWe might want her to be able to\ndelete emails to clean up an inbox.\n\n78\n00:03:59.580 --> 00:04:03.014\nSo if it's that tight of a partnership\nbetween the people, then yeah,\n\n79\n00:04:03.014 --> 00:04:06.695\nyou'll probably do full access and\ngive them all the access that they need.\n\n80\n00:04:06.695 --> 00:04:09.870\nBut let's start here with just the Send\non Behalf of, cuz that's the one that's\n\n81\n00:04:09.870 --> 00:04:12.730\nthe easiest to see and\nwe'll get a chance to see how that works.\n\n82\n00:04:12.730 --> 00:04:15.836\nSo if I want Jane to be able to send\non Bob's behalf, I can come in and\n\n83\n00:04:15.836 --> 00:04:17.453\njust add her to the list of people.\n\n84\n00:04:17.453 --> 00:04:21.760\nSo I'm gonna hit the plus sign and\nI'll pick Jane and we'll get her added in.\n\n85\n00:04:21.760 --> 00:04:23.177\nAnd you can add more than one person,\n\n86\n00:04:23.177 --> 00:04:25.987\nyou might have a whole team of people\nthat handles this person's email.\n\n87\n00:04:25.987 --> 00:04:29.170\nYou just punch each one of them in and\nthen you'll be in business.\n\n88\n00:04:29.170 --> 00:04:32.735\nSo I'm gonna get that set and I'll save\nit right there and now, it's got it.\n\n89\n00:04:32.735 --> 00:04:36.890\nNow, what if I want Jane to be able\nto send on several people's behalf?\n\n90\n00:04:36.890 --> 00:04:40.090\nWell, I can go through and\nedit each of their mailboxes one by one or\n\n91\n00:04:40.090 --> 00:04:41.819\nwe could do it from the PowerShell.\n\n92\n00:04:41.819 --> 00:04:44.745\nAnd from the PowerShell,\nit's a little more convenient,\n\n93\n00:04:44.745 --> 00:04:48.194\ncuz you can do like a Get-Mailbox to\npull all the mailboxes you want and\n\n94\n00:04:48.194 --> 00:04:51.570\nthen feed that into the command\nto assign her permissions.\n\n95\n00:04:51.570 --> 00:04:54.601\nJust to show an example,\nif I wanna give her permissions over Bob's\n\n96\n00:04:54.601 --> 00:04:57.803\nmailbox from the PowerShell,\nthe command looks something like this.\n\n97\n00:04:57.803 --> 00:05:02.945\nI would say Set-Mailbox,\ncuz I'm changing some mailbox settings and\n\n98\n00:05:02.945 --> 00:05:06.380\nI'm changing Bob Denver's mailbox.\n\n99\n00:05:06.380 --> 00:05:09.423\nAnd if you're not sure if the name of\nthe mailbox, I'm using the alias here.\n\n100\n00:05:09.423 --> 00:05:12.990\nBut if you're not sure,\nyou can always experiment around I'll do\n\n101\n00:05:12.990 --> 00:05:17.080\na Get-Mailbox bobdenver so yeah,\nI can see that is the mailbox that I want.\n\n102\n00:05:18.310 --> 00:05:21.702\nAnd so I'm gonna say,\nSet-Mailbox bobdenver.\n\n103\n00:05:21.702 --> 00:05:29.100\nAnd then I'm gonna say,\nGrantSendOnBehalfTo.\n\n104\n00:05:29.100 --> 00:05:34.411\nThat's the permission that I wanna give\nand I wanna grant that to janesmith.\n\n105\n00:05:34.411 --> 00:05:36.820\nOops, if I put a space in there,\nthis will actually work.\n\n106\n00:05:36.820 --> 00:05:37.382\nThere we go.\n\n107\n00:05:37.382 --> 00:05:40.525\nAnd so now, I'm granting that same\npermission via the PowerShell.\n\n108\n00:05:40.525 --> 00:05:42.929\nNow, why did I show this?\n\n109\n00:05:42.929 --> 00:05:47.621\nWell, we might want to do the Get-Mailbox\ncommand to get more than one mailbox and\n\n110\n00:05:47.621 --> 00:05:52.300\npipe that into the Set-Mailbox command and\nthen that would take care of it.\n\n111\n00:05:52.300 --> 00:05:54.304\nSo we can do many mailboxes\nall at the same time.\n\n112\n00:05:54.304 --> 00:05:55.990\nOtherwise, this is the same as the GUI.\n\n113\n00:05:55.990 --> 00:05:59.664\nIt's easier than the GUI that's\nhow we normally would do it.\n\n114\n00:05:59.664 --> 00:06:02.640\nNow the other permissions\nkind of come into play too.\n\n115\n00:06:02.640 --> 00:06:06.504\nIf I wanted to give her Send As or\nif I wanted to give her full access,\n\n116\n00:06:06.504 --> 00:06:08.026\nI could just modify this.\n\n117\n00:06:08.026 --> 00:06:13.380\nFor the access rights,\nhere I'm saying, -GrantSendOnBehalfTo.\n\n118\n00:06:13.380 --> 00:06:18.019\nWe could also say, oh,\nguess the other ones are extended rights.\n\n119\n00:06:18.019 --> 00:06:19.580\nThe command's a little bit different.\n\n120\n00:06:19.580 --> 00:06:25.036\nLike if I wanted to give her Send As,\nthere's a difference.\n\n121\n00:06:25.036 --> 00:06:27.458\n[LAUGH] This is gonna get a little\nconfusing, so let me try and\n\n122\n00:06:27.458 --> 00:06:29.440\nthink of the best way to phrase this.\n\n123\n00:06:29.440 --> 00:06:33.500\nWhen we look at Bob's account and\nwe go under mailbox delegation,\n\n124\n00:06:33.500 --> 00:06:37.430\nsee how they're Send As, there's Send\non Behalf and there's Full Access.\n\n125\n00:06:38.630 --> 00:06:43.290\nSend on Behalf is the only one the end\nusers can configure themselves.\n\n126\n00:06:43.290 --> 00:06:46.506\nAnd so,\nit's like a very high-level permission.\n\n127\n00:06:46.506 --> 00:06:49.780\nThe end user can do it,\nthe admins can do it, it's very flexible.\n\n128\n00:06:49.780 --> 00:06:53.329\nAnd so when I do it in PowerShell,\nI've actually got a tag for\n\n129\n00:06:53.329 --> 00:06:55.358\nthat, -GrandSendOnBehalfTo.\n\n130\n00:06:55.358 --> 00:06:57.620\nSo nice and easy to do that one.\n\n131\n00:06:57.620 --> 00:07:02.350\nBut the other two, Send As, where\nyou're actually impersonating somebody.\n\n132\n00:07:02.350 --> 00:07:05.287\nOr Full Access, where you have\ntotal access to the mailbox,\n\n133\n00:07:05.287 --> 00:07:08.291\nthose are a big deal and\nend users can't do those on their own.\n\n134\n00:07:08.291 --> 00:07:10.670\nThey can't set those\npermissions on their own.\n\n135\n00:07:10.670 --> 00:07:13.027\nWe have to set those for them.\n\n136\n00:07:13.027 --> 00:07:17.179\nAnd so as a result, I don't have this nice\nlittle easy tag that I can use if I wanted\n\n137\n00:07:17.179 --> 00:07:20.800\nto give Jane that access, instead it\nhas to be a little bit different.\n\n138\n00:07:20.800 --> 00:07:25.136\nWe have to say, ExtendedRights Send-As and\n\n139\n00:07:25.136 --> 00:07:30.395\nthen we have to specify who\nthat user's is going to be.\n\n140\n00:07:30.395 --> 00:07:32.595\nThe user in this case is janesmith.\n\n141\n00:07:32.595 --> 00:07:33.290\nAnd actually, you know what?\n\n142\n00:07:33.290 --> 00:07:36.383\nI'm doing sent mailbox,\nlet me restart this one.\n\n143\n00:07:36.383 --> 00:07:38.947\nIt's an ExtendedRight on\nthe Active Directory object, so\n\n144\n00:07:38.947 --> 00:07:41.677\nthe command's gonna look a little\nbit different for this one.\n\n145\n00:07:41.677 --> 00:07:46.295\nIt's gonna be Add-ADPermission,\nthere we go.\n\n146\n00:07:46.295 --> 00:07:51.149\nAnd I'm gonna be adding it\nto bobdenver's account and\n\n147\n00:07:51.149 --> 00:07:56.108\nthen I'll say,\n-ExtendedRights Send-As -user and\n\n148\n00:07:56.108 --> 00:07:59.496\nthen that's where it's janesmith.\n\n149\n00:07:59.496 --> 00:08:01.063\nIt's a different command.\n\n150\n00:08:01.063 --> 00:08:02.922\nAnd so, why is it so different?\n\n151\n00:08:02.922 --> 00:08:05.590\nWell, it's because it's actually\na permission on the account.\n\n152\n00:08:05.590 --> 00:08:07.740\nAdministrators have to set it,\nthe end users can't do it.\n\n153\n00:08:07.740 --> 00:08:11.770\nSo it's not tied to the mailbox as much as\nit is tied to the active directory user\n\n154\n00:08:11.770 --> 00:08:12.990\naccount itself.\n\n155\n00:08:12.990 --> 00:08:15.420\nAnd so this would give her\nthe full send as permissions.\n\n156\n00:08:15.420 --> 00:08:16.660\nNow, I don't want to do that just yet.\n\n157\n00:08:16.660 --> 00:08:19.880\nI want to hold off, cuz I want to show you\nguys that send on behalf of first, and\n\n158\n00:08:19.880 --> 00:08:22.858\nthen we'll come back, and\nwe'll get a chance to see true send as.\n\n159\n00:08:22.858 --> 00:08:28.120\nAll right now I've assigned her send\non behalf and I did it via the AEC and\n\n160\n00:08:28.120 --> 00:08:32.260\nI did it via the PowerShell right here so\nwe've had a chance to see that.\n\n161\n00:08:32.260 --> 00:08:34.550\nHow's an end user do it themselves right?\n\n162\n00:08:34.550 --> 00:08:37.950\nIf Bob just wanted to set these\npermissions himself he could do it\n\n163\n00:08:37.950 --> 00:08:39.170\njust for send on behalf.\n\n164\n00:08:39.170 --> 00:08:40.250\nLet me show you that.\n\n165\n00:08:40.250 --> 00:08:43.020\nI'm gonna switch over and login as Bob.\n\n166\n00:08:44.350 --> 00:08:48.700\nSo if I jump over to Bob's account, Bob\ncan do it right from inside of the Outlook\n\n167\n00:08:48.700 --> 00:08:51.490\nclient or in Outlook Web Access,\neither one.\n\n168\n00:08:51.490 --> 00:08:56.310\nSo here he is inside of good old Outlook,\nand\n\n169\n00:08:56.310 --> 00:09:00.860\ninside of Outlook,\nhe can just go up here to File > Info,\n\n170\n00:09:01.920 --> 00:09:07.300\nand then under Account Settings,\nhe'll have delegate access.\n\n171\n00:09:07.300 --> 00:09:08.260\nHe can set a delegate.\n\n172\n00:09:08.260 --> 00:09:10.570\nThis is a person who will\nhave access to his mailbox.\n\n173\n00:09:10.570 --> 00:09:13.050\nAnd when you choose that,\nhere's where you start to add people.\n\n174\n00:09:13.050 --> 00:09:14.895\nAnd see how Jane Smith\nis already in the list.\n\n175\n00:09:14.895 --> 00:09:17.440\nThat's cuz I added Jane on the server.\n\n176\n00:09:17.440 --> 00:09:22.250\nSo you can add somebody in right here,\nand then specify what they have,\n\n177\n00:09:22.250 --> 00:09:23.560\nwhat type of access they have.\n\n178\n00:09:23.560 --> 00:09:27.270\nIf we choose permissions,\nhe can define what they can do.\n\n179\n00:09:27.270 --> 00:09:32.030\nAnd see how she has on the inbox,\nauthor can read and create items.\n\n180\n00:09:32.030 --> 00:09:36.080\nSo she can read his mailbox,\nbut she can't delete emails.\n\n181\n00:09:36.080 --> 00:09:37.380\nAnd she can create items.\n\n182\n00:09:37.380 --> 00:09:39.360\nShe can send new emails.\n\n183\n00:09:39.360 --> 00:09:41.810\nBut she can't delete existing ones.\n\n184\n00:09:41.810 --> 00:09:44.710\nSo that's the permission that we're\ndoing when we do send on behalf of.\n\n185\n00:09:44.710 --> 00:09:47.870\nAnd he can always manipulate this\nto give other permissions, too, but\n\n186\n00:09:47.870 --> 00:09:51.380\nthese are the base ones that we need for\nher to be able to send those emails.\n\n187\n00:09:51.380 --> 00:09:54.570\nSo I'm just gonna leave\nthat be like it is, and\n\n188\n00:09:54.570 --> 00:09:59.150\nnow, he can send emails, or\nsomebody else can send them on his behalf.\n\n189\n00:09:59.150 --> 00:10:00.230\nJane.\n\n190\n00:10:00.230 --> 00:10:01.450\nSo let me jump over to Jane's account and\n\n191\n00:10:01.450 --> 00:10:02.680\nI'll show you what it\nlooks like on her end.\n\n192\n00:10:02.680 --> 00:10:05.490\nAnd then we'll see what it looks\nlike to be the recipient of it.\n\n193\n00:10:05.490 --> 00:10:10.520\nSo I'm going to switch over to Jane, and\n\n194\n00:10:10.520 --> 00:10:13.180\nif I log in as Jane,\nnow when Jane logs in,\n\n195\n00:10:13.180 --> 00:10:17.730\nshe's going to log into her own\nmailbox and she's gonna see her email.\n\n196\n00:10:17.730 --> 00:10:21.730\nAnd so if she starts drafting email, it's\njust gonna be her stuff and that's it.\n\n197\n00:10:21.730 --> 00:10:23.790\nNothing too terribly exciting there.\n\n198\n00:10:23.790 --> 00:10:29.000\nBut, because she's a delegate on Bob's\nmailbox, she can open Bob's mailbox now.\n\n199\n00:10:29.000 --> 00:10:30.460\nRemember we saw the permissions executor.\n\n200\n00:10:30.460 --> 00:10:32.670\nShe has read permissions on that mailbox.\n\n201\n00:10:32.670 --> 00:10:36.920\nSo if she were to go up here\nto File > Open & Export and\n\n202\n00:10:36.920 --> 00:10:41.550\nthen choose Other User's Folder, she could\ncome in here and punch in Bob Denver,\n\n203\n00:10:41.550 --> 00:10:43.540\nor pick him out of the name list.\n\n204\n00:10:43.540 --> 00:10:46.570\nAnd when she opens his mailbox,\nshe'll see his email.\n\n205\n00:10:46.570 --> 00:10:47.110\nSee?\nHere,\n\n206\n00:10:47.110 --> 00:10:49.550\nshe's seeing that kickoff meeting\nthat came from Don Pezet and\n\n207\n00:10:49.550 --> 00:10:50.590\nwent to Bob Denver.\n\n208\n00:10:50.590 --> 00:10:52.510\nJane is not a recipient on this list.\n\n209\n00:10:52.510 --> 00:10:54.110\nShe's looking at Bob's mailbox.\n\n210\n00:10:55.350 --> 00:10:57.716\nBut she's still logged in as herself,\nwe can see it over here.\n\n211\n00:10:57.716 --> 00:11:00.374\nSee how it says janesmith@lab.itpro.tv.\n\n212\n00:11:00.374 --> 00:11:02.620\nShe's still logged in as herself.\n\n213\n00:11:02.620 --> 00:11:06.760\nBut it's kind of neat, because whenever\nshe writes an email, see how the email.\n\n214\n00:11:06.760 --> 00:11:08.410\nNo actually I'm displaying the From field.\n\n215\n00:11:08.410 --> 00:11:10.120\nLet me show you what it\nlooks like by default.\n\n216\n00:11:10.120 --> 00:11:13.580\nThis is what it looks like by\ndefault when she fires off an email.\n\n217\n00:11:13.580 --> 00:11:14.660\nShe fires it up.\n\n218\n00:11:14.660 --> 00:11:16.840\nAnd you have a To: and a CC field.\n\n219\n00:11:16.840 --> 00:11:18.672\nTo, that's who you're emailing to.\n\n220\n00:11:18.672 --> 00:11:21.365\nAnd then CC is other people\nyou want to copy in on it.\n\n221\n00:11:21.365 --> 00:11:23.370\nWell maybe she wants to\nsend an email to me.\n\n222\n00:11:23.370 --> 00:11:26.220\nSo she's going to email Don Pezet.\n\n223\n00:11:26.220 --> 00:11:30.190\nAnd this would be some kind of status\nupdate, telling me to get to work.\n\n224\n00:11:31.880 --> 00:11:34.020\nBut Jane's not my boss.\n\n225\n00:11:34.020 --> 00:11:35.630\nShe can't tell me what to do.\n\n226\n00:11:35.630 --> 00:11:37.230\nBob Denver is my boss.\n\n227\n00:11:37.230 --> 00:11:40.590\nWell, she is a duly appointed\nrepresentative of Bob Denver.\n\n228\n00:11:40.590 --> 00:11:41.450\nSo she can say you know what.\n\n229\n00:11:41.450 --> 00:11:43.420\nI'm gonna send this on behalf of Bob.\n\n230\n00:11:43.420 --> 00:11:44.206\nSo it's not Jane saying it.\n\n231\n00:11:44.206 --> 00:11:45.310\nIt's Bob saying it.\n\n232\n00:11:45.310 --> 00:11:47.530\nJane just happens to be\nthe person who wrote the email.\n\n233\n00:11:47.530 --> 00:11:49.770\nSo to do that,\nshe can o up here to Options, and\n\n234\n00:11:49.770 --> 00:11:52.060\nhit From to display the From field.\n\n235\n00:11:52.060 --> 00:11:53.990\nIf you're in Outlook Web Access\nit's a little bit different.\n\n236\n00:11:53.990 --> 00:11:56.660\nYou hit the ellipsis button,\nthe little three dots up at the top, and\n\n237\n00:11:56.660 --> 00:11:59.620\nyou'll have the ability to\ndisplay From there too.\n\n238\n00:11:59.620 --> 00:12:01.690\nBut once you've got\nthe From field displayed,\n\n239\n00:12:01.690 --> 00:12:05.580\nsee how she can drop that down and\nBob Denver's right there on the list.\n\n240\n00:12:05.580 --> 00:12:08.580\nHe's in the list because she's\nbeen delegated that access, so\n\n241\n00:12:08.580 --> 00:12:13.950\nshe can choose to send as Bob Denver\nto me and she can fire that email off.\n\n242\n00:12:13.950 --> 00:12:14.580\nOkay.\n\n243\n00:12:14.580 --> 00:12:18.860\nNow, if the permissions are set correctly,\nthat email will go to my mailbox, and\n\n244\n00:12:18.860 --> 00:12:23.400\nI'll have an email from Bob but\nactually from Jane on Bob's behalf.\n\n245\n00:12:23.400 --> 00:12:25.340\nIf the permissions are set incorrectly,\n\n246\n00:12:25.340 --> 00:12:27.570\nshe'll get a bounceback\nmessage right here.\n\n247\n00:12:27.570 --> 00:12:30.320\nAnybody can attempt to send\nan email as somebody else.\n\n248\n00:12:30.320 --> 00:12:31.630\nThey just might not have the permission.\n\n249\n00:12:31.630 --> 00:12:33.870\nIf she tries to craft a new email, and\n\n250\n00:12:33.870 --> 00:12:37.170\ngoes up here to the from field,\nand enters in say,\n\n251\n00:12:37.170 --> 00:12:41.860\nmy address right, so she's going to try to\nsend an email as me, it'll let her try.\n\n252\n00:12:43.390 --> 00:12:49.213\nSo we'll send an email maybe\nto BobDenver@lab.itpro.tv.\n\n253\n00:12:49.213 --> 00:12:52.680\nAnd we'll just say, Don is a loser.\n\n254\n00:12:53.730 --> 00:12:55.670\nMy mistake, all right, so we're going to,\n\n255\n00:12:55.670 --> 00:13:00.930\nkind of, send a scathing email as\nDon Pezet, and we'll send that.\n\n256\n00:13:00.930 --> 00:13:03.830\nShe doesn't have send of behalf\nof permissions for my mailbox, so\n\n257\n00:13:03.830 --> 00:13:06.330\nwhen she goes to send that,\nit's going to bounce.\n\n258\n00:13:06.330 --> 00:13:08.794\nNow notice I'm not seeing\nthat bounce message,\n\n259\n00:13:08.794 --> 00:13:11.691\nthat's because I'm actually\nviewing Bob's mailbox.\n\n260\n00:13:11.691 --> 00:13:15.209\nSo she needs to switch back to her own\nmailbox and back in her own mailbox,\n\n261\n00:13:15.209 --> 00:13:17.748\nhere's a system administrator\nundeliverable, so\n\n262\n00:13:17.748 --> 00:13:19.090\nshe got that Don is a loser.\n\n263\n00:13:19.090 --> 00:13:19.900\nThat one didn't go.\n\n264\n00:13:19.900 --> 00:13:21.080\nGot blocked.\n\n265\n00:13:21.080 --> 00:13:23.350\nBut the other email that she sent as Bob,\nit's gone.\n\n266\n00:13:23.350 --> 00:13:26.490\nThat's because it was allowed,\nor at least it should have been.\n\n267\n00:13:26.490 --> 00:13:27.070\nWe'll find out.\n\n268\n00:13:27.070 --> 00:13:28.500\nIf I switch back to my account.\n\n269\n00:13:29.600 --> 00:13:31.630\nSo I'll jump back over to me.\n\n270\n00:13:31.630 --> 00:13:34.690\nI should have an email that was\nsent from her on Bob's behalf.\n\n271\n00:13:36.410 --> 00:13:42.204\nSo let's jump back over here,\nand I'll get into my email.\n\n272\n00:13:42.204 --> 00:13:43.090\nI'll just use OWA.\n\n273\n00:13:43.090 --> 00:13:48.780\nNow when I get logged in, what I expect to\nsee is an email from Jane on Bob's behalf,\n\n274\n00:13:48.780 --> 00:13:50.850\nit should be in my inbox\nif I can ever get into it.\n\n275\n00:13:50.850 --> 00:13:54.540\nMaybe it would be faster to go Outlook,\nthere we go.\n\n276\n00:13:54.540 --> 00:13:55.970\nSo here's this email from Bob Denver.\n\n277\n00:13:55.970 --> 00:13:59.270\nSee how it says it's from Bob Denver,\nStatus Update, Get to work.\n\n278\n00:13:59.270 --> 00:14:04.010\nBut over here in the message\ndetails see how it says Jane Smith\n\n279\n00:14:04.010 --> 00:14:05.880\non behalf of Bob Denver.\n\n280\n00:14:05.880 --> 00:14:09.580\nSo now I know, the email came from Bob but\nhe didn't actually write it.\n\n281\n00:14:09.580 --> 00:14:10.610\nJane wrote it.\n\n282\n00:14:10.610 --> 00:14:11.500\nJane wrote it on his behalf.\n\n283\n00:14:11.500 --> 00:14:14.160\nSo maybe Bob told her to write that.\n\n284\n00:14:14.160 --> 00:14:16.290\nOr maybe she's just acting\nunder Bob's authority.\n\n285\n00:14:16.290 --> 00:14:17.920\nEither way, that's how it worked.\n\n286\n00:14:17.920 --> 00:14:19.465\nAnd I can see that it happened.\n\n287\n00:14:19.465 --> 00:14:24.560\nNow, we can change that to give\nher send as permissions, and\n\n288\n00:14:24.560 --> 00:14:25.800\nnow it's gonna be different.\n\n289\n00:14:25.800 --> 00:14:28.730\nAnd that's what I was kinda showing\nyou here in the PowerShell was,\n\n290\n00:14:28.730 --> 00:14:32.050\nif I give her send as permissions\n\n291\n00:14:32.050 --> 00:14:37.430\nnow she can actually act as that person\nand I won't even know that it happened.\n\n292\n00:14:37.430 --> 00:14:41.960\nSo we can do that, we can jump into our\nExchange settings, we can edit Bob and\n\n293\n00:14:41.960 --> 00:14:46.560\nwe can go in here and\ntake her out of the send on behalf, and\n\n294\n00:14:46.560 --> 00:14:49.250\nadd her in to the send as.\n\n295\n00:14:49.250 --> 00:14:51.756\nYou don't want somebody to be in both,\ncuz it kind of creates a conflict.\n\n296\n00:14:51.756 --> 00:14:54.300\nIt will actually let you do it,\nbut it does create a conflict.\n\n297\n00:14:54.300 --> 00:14:57.580\nSo you usually want somebody to either\nhave send as or send on behalf of,\n\n298\n00:14:57.580 --> 00:14:58.080\nnot both.\n\n299\n00:14:59.560 --> 00:15:02.270\nBut now,\nwhen she has that send as permission,\n\n300\n00:15:02.270 --> 00:15:03.940\nit's not on behalf of Bob anymore.\n\n301\n00:15:03.940 --> 00:15:06.560\nIt's actually as Bob.\n\n302\n00:15:06.560 --> 00:15:09.930\nAnd so when people receive those emails,\nthey won't see that it's from Jane Smith.\n\n303\n00:15:09.930 --> 00:15:11.360\nThey'll just see that it's from Bob.\n\n304\n00:15:12.540 --> 00:15:15.590\nNow, making changes like this\ncan take time to kick in.\n\n305\n00:15:15.590 --> 00:15:20.210\nSo I just made the change, but it could be\nan hour before it actually takes effect,\n\n306\n00:15:20.210 --> 00:15:22.960\nso don't expect this one to happen\nimmediately when you make the change.\n\n307\n00:15:22.960 --> 00:15:25.940\nAnd that's because the permissions\nhave to propagate out and\n\n308\n00:15:25.940 --> 00:15:28.460\nOutlook caches a lot\nof this stuff offline.\n\n309\n00:15:28.460 --> 00:15:30.350\nSo it's actually kind of\ncached her permissions.\n\n310\n00:15:30.350 --> 00:15:32.470\nAnd so it can take a little while for\nOutlook to recognize that.\n\n311\n00:15:32.470 --> 00:15:37.020\nNow the other permission that was in\nthere was the full mailbox access.\n\n312\n00:15:37.020 --> 00:15:40.970\nThe send as ones,\nthose she can send email as the person,\n\n313\n00:15:40.970 --> 00:15:43.670\nshe can read the email cuz\nyou might want to reply.\n\n314\n00:15:43.670 --> 00:15:44.950\nBut she can't delete anything.\n\n315\n00:15:44.950 --> 00:15:47.485\nIf we do the send, I mean,\ndo the full access,\n\n316\n00:15:47.485 --> 00:15:49.435\nthen she can do whatever she wants.\n\n317\n00:15:49.435 --> 00:15:51.593\nShe can delete emails and\ngo crazy with it.\n\n318\n00:15:51.593 --> 00:15:54.253\nSo we do have to be careful with that one.\n\n319\n00:15:54.253 --> 00:15:58.838\nIf we want to give somebody Full\naccess via the GUI is the easiest.\n\n320\n00:15:58.838 --> 00:16:01.647\nYou can do it from the PowerShell too,\nthough.\n\n321\n00:16:01.647 --> 00:16:07.032\nAnd from the PowerShell the command\nis a little bit different.\n\n322\n00:16:07.032 --> 00:16:08.350\nWhat did I do here?\n\n323\n00:16:08.350 --> 00:16:10.130\nI left that command up from before.\n\n324\n00:16:10.130 --> 00:16:13.782\nSo [COUGH] if we wanna set it from\nhere in the command line, we can say,\n\n325\n00:16:13.782 --> 00:16:18.680\nAdd-MailboxPermission -Identity.\n\n326\n00:16:18.680 --> 00:16:23.350\nAnd we can specify who we're assigning\npermissions to, so I might say bobdenver.\n\n327\n00:16:23.350 --> 00:16:25.430\nI want to assign permissions.\n\n328\n00:16:25.430 --> 00:16:29.025\nAnd then I want to assign\npermissions to janesmith.\n\n329\n00:16:29.025 --> 00:16:31.645\nThat's the person I'm\ngiving permissions to, and\n\n330\n00:16:31.645 --> 00:16:39.425\nI wanna give her -AccessRights FullAccess.\n\n331\n00:16:39.425 --> 00:16:42.065\nAnd then we can say, and\nthis is kind of an important part.\n\n332\n00:16:42.065 --> 00:16:45.285\nBy default it applies to\nthe root of the mailbox and\n\n333\n00:16:45.285 --> 00:16:47.015\nnot necessarily the subfolders.\n\n334\n00:16:47.015 --> 00:16:47.935\nAnd so I need to come in and\n\n335\n00:16:47.935 --> 00:16:53.056\nsay -InheritanceType All, to make sure\nthat it trickles down to cover everything,\n\n336\n00:16:53.056 --> 00:16:56.810\ncalendars, tasks, all the other\ndifferent items that make up Outlook.\n\n337\n00:16:56.810 --> 00:16:57.950\nI want to make sure I cover all of that.\n\n338\n00:16:57.950 --> 00:17:02.500\nAnd when we set this, now she'll\nhave full access to the mailbox.\n\n339\n00:17:02.500 --> 00:17:06.030\nShe can send emails, she can delete items,\nshe can manipulate things, and\n\n340\n00:17:06.030 --> 00:17:08.250\nhave that full access to\nthe system that she needs.\n\n341\n00:17:08.250 --> 00:17:11.670\nSo just depends on whether or\nnot that's what we're trying to go for.\n\n342\n00:17:11.670 --> 00:17:15.110\nIt's another one where it's certainly\neasier to do via the GUI, but\n\n343\n00:17:15.110 --> 00:17:17.810\nif you're just trying to grant somebody\nfull access to all the mailbox,\n\n344\n00:17:17.810 --> 00:17:18.920\nmaybe it's an attorney and\n\n345\n00:17:18.920 --> 00:17:23.850\nthey need to do some kind of e-discovery,\nwe can do it here using a bulk command.\n\n346\n00:17:23.850 --> 00:17:25.520\nThere's other ways to do e-discovery too.\n\n347\n00:17:25.520 --> 00:17:26.470\nYou don't have to do it this way.\n\n348\n00:17:27.830 --> 00:17:30.040\nAll right, so\nonce those permissions are assigned,\n\n349\n00:17:30.040 --> 00:17:31.600\nnow Jane can start to do anything.\n\n350\n00:17:31.600 --> 00:17:35.210\nAnd I guess we can test it out and\nsee if it takes effect fast enough.\n\n351\n00:17:35.210 --> 00:17:37.630\nLet me switch over to Jane.\n\n352\n00:17:38.940 --> 00:17:39.720\nIt does take a while, so\n\n353\n00:17:39.720 --> 00:17:42.150\nI won't be surprised if this\none doesn't work right now, but\n\n354\n00:17:42.150 --> 00:17:43.340\nwe'll give it a shot here.\n\n355\n00:17:43.340 --> 00:17:45.341\nSo I'm gonna pull up Jane.\n\n356\n00:17:45.341 --> 00:17:48.309\nAnd the first thing I'm gonna do\nis I'm gonna close Outlook and\n\n357\n00:17:48.309 --> 00:17:52.005\ncome back into it, because Outlook does\ncache a lot of this stuff offline, and\n\n358\n00:17:52.005 --> 00:17:54.140\nI want to make sure that it is clean.\n\n359\n00:17:54.140 --> 00:17:58.141\nSo I'm just going to close Outlook and\nmake sure that it actually closes,\n\n360\n00:17:58.141 --> 00:17:58.923\nwhich it did.\n\n361\n00:17:58.923 --> 00:18:00.245\nAnd then we'll fire it back up again.\n\n362\n00:18:02.165 --> 00:18:05.156\nAll right, so when Outlook fires up it's\nsupposed to reach out to the server and\n\n363\n00:18:05.156 --> 00:18:06.390\nget the new permissions.\n\n364\n00:18:06.390 --> 00:18:09.100\nThe server might not have updated\nthings yet, but it should've happened.\n\n365\n00:18:09.100 --> 00:18:11.870\nAnd once that does occur,\nnow she can come in here and\n\n366\n00:18:11.870 --> 00:18:14.410\nstart to craft email as other people.\n\n367\n00:18:14.410 --> 00:18:20.500\nSo she can craft an email as Bob Denver,\nand then she can send an email to me.\n\n368\n00:18:20.500 --> 00:18:25.342\nAnd for the subject line we'll we'll\n\n369\n00:18:25.342 --> 00:18:30.036\njust say this is a test using send as.\n\n370\n00:18:30.036 --> 00:18:31.855\nAll right, and so\nshe's going to send it along.\n\n371\n00:18:31.855 --> 00:18:36.640\nNow to her, she doesn't see the difference\nbetween send as and send on behalf.\n\n372\n00:18:36.640 --> 00:18:37.770\nIt doesn't tell her that.\n\n373\n00:18:37.770 --> 00:18:40.000\nIt's up to what we've set to dictate that.\n\n374\n00:18:41.120 --> 00:18:43.540\nAnd we'll send that along and off it goes.\n\n375\n00:18:43.540 --> 00:18:48.110\nIt's gonna think about it, so [LAUGH]\nit's gonna send that email any time now.\n\n376\n00:18:48.110 --> 00:18:51.500\nOh, you know what, I rushed through\nOutlook, it hadn't fully connected to\n\n377\n00:18:51.500 --> 00:18:55.070\nthe server yet, so there might be\na certificate warning somewhere.\n\n378\n00:18:55.070 --> 00:18:55.780\nDoesn't look like it.\n\n379\n00:18:55.780 --> 00:18:56.980\nAll right, so I just have to be patient.\n\n380\n00:18:56.980 --> 00:18:58.310\nBut that one we'll send along and\n\n381\n00:18:58.310 --> 00:19:01.500\nthe big difference is when I receive it\nI won't see that on behalf of anymore.\n\n382\n00:19:01.500 --> 00:19:03.385\nI'll just see that it's\nactually from Bob Denver.\n\n383\n00:19:04.600 --> 00:19:07.330\nAll right, so\nas far as mailbox delegation is concerned,\n\n384\n00:19:07.330 --> 00:19:10.523\nthose are a couple of different ways\nthat we can go about doing that.\n\n385\n00:19:10.523 --> 00:19:13.400\nYeah, apparently it is just\ngonna sit there and stall on me.\n\n386\n00:19:13.400 --> 00:19:14.970\nSo let me switch back to my account.\n\n387\n00:19:14.970 --> 00:19:16.820\nBut those are kind of the key things.\n\n388\n00:19:16.820 --> 00:19:18.295\nJust remember the difference\nbetween the three.\n\n389\n00:19:18.295 --> 00:19:19.865\nOn the exam it can be really confusing and\n\n390\n00:19:19.865 --> 00:19:22.955\nin real life it can be confusing\nbecause all three are very similar.\n\n391\n00:19:24.105 --> 00:19:26.565\nAll right, well let's go ahead and\nwrap this one up here.\n\n392\n00:19:26.565 --> 00:19:30.005\nSo in this episode we got a chance to\nsee sending the delegations out or\n\n393\n00:19:30.005 --> 00:19:32.075\nsetting delegations for our users.\n\n394\n00:19:32.075 --> 00:19:34.155\nRemember the difference between the three.\n\n395\n00:19:34.155 --> 00:19:37.145\nSend As,\nyou're truly impersonating the user and\n\n396\n00:19:37.145 --> 00:19:40.865\nwhoever receives the email won't know\nwhether it came from that user or you.\n\n397\n00:19:40.865 --> 00:19:43.580\nSend on Behalf,\nyou're impersonating the user but\n\n398\n00:19:43.580 --> 00:19:46.790\nit shows that you're doing that, so\nwhoever receives the email will know\n\n399\n00:19:46.790 --> 00:19:49.460\nthat it was sent actually\nwritten by somebody else.\n\n400\n00:19:49.460 --> 00:19:53.520\nAnd then Full Access, that gives you\ntotal access to the mailbox to be\n\n401\n00:19:53.520 --> 00:19:56.250\nable to do whatever you want,\nincluding sending as and\n\n402\n00:19:56.250 --> 00:19:59.860\nthat would be the highest level of trust\nthat we'd give somebody on a mailbox.\n\n403\n00:19:59.860 --> 00:20:01.640\nIt's effectively creating\na shared mailbox at that point.\n\n404\n00:20:02.720 --> 00:20:06.120\nAll right, well, that's about all I've\ngot on delegating mailbox permissions.\n\n405\n00:20:06.120 --> 00:20:07.800\nI hope you guys enjoyed the episode.\n\n406\n00:20:07.800 --> 00:20:11.400\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n407\n00:20:11.400 --> 00:20:17.330\n[SOUND]\n\n",
          "vimeoId": "136518221"
        },
        {
          "description": "In this episode, Don demonstrates how to configured \"accepted domains\" in Exchange 2013. This is a critical piece to ensure mail flows properly in a new Exchange install. He ends the episode by configuring Address Policies to apply the new domain suffix to new and existing user accounts.",
          "length": "1256",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-7-email_address_policies-081315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-7-email_address_policies-081315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-2-7-email_address_policies-081315-1-sm.jpg",
          "title": "Email Address Policies",
          "transcript": "WEBVTT\n\n1\n00:00:00.045 --> 00:00:10.045\n[MUSIC]\n\n2\n00:00:11.050 --> 00:00:11.805\nAll right.\n\n3\n00:00:11.805 --> 00:00:13.187\nGood morning, good afternoon,\nand good evening.\n\n4\n00:00:13.187 --> 00:00:15.788\nAnd welcome back to another\nepisode of ITProTV.\n\n5\n00:00:15.788 --> 00:00:17.316\nI'm your host Don Pezet,\n\n6\n00:00:17.316 --> 00:00:21.209\nback again with another episode\nof Microsoft Exchange 2013.\n\n7\n00:00:21.209 --> 00:00:25.174\nIn this episode, we're gonna be taking\na look at the email policies that\n\n8\n00:00:25.174 --> 00:00:27.001\nare defined inside of Exchange.\n\n9\n00:00:27.001 --> 00:00:28.475\nAnd when I say email policies,\n\n10\n00:00:28.475 --> 00:00:31.263\nthere's actually several\ndifferent kinds of policies.\n\n11\n00:00:31.263 --> 00:00:34.494\nSo, the one that I'm talking\nabout today is what's really,\n\n12\n00:00:34.494 --> 00:00:37.242\nwhat used to be called\nthe Recipient Update Policy.\n\n13\n00:00:37.242 --> 00:00:41.217\nWhenever you create a mailbox inside\nof Exchange, it gets an email address,\n\n14\n00:00:41.217 --> 00:00:43.130\nit's a default email address.\n\n15\n00:00:43.130 --> 00:00:46.219\nAnd if you've ever wondered how does\nExchange pick what your default email\n\n16\n00:00:46.219 --> 00:00:48.632\naddress is, well,\nthere's a policy that defines that.\n\n17\n00:00:48.632 --> 00:00:49.404\nAnd we can go and\n\n18\n00:00:49.404 --> 00:00:53.277\nmanipulate that policy to change what\nour default email addresses end up as.\n\n19\n00:00:53.277 --> 00:00:55.247\nSo, that's a pretty neat\nthing to be able to do,\n\n20\n00:00:55.247 --> 00:00:57.630\nand it's actually not very hard at all.\n\n21\n00:00:57.630 --> 00:00:58.983\nThere's other things we can do with it,\ntoo.\n\n22\n00:00:58.983 --> 00:01:04.040\nFor example, you might want your users to\nget more than one email address, right?\n\n23\n00:01:04.040 --> 00:01:06.948\nAnd so, we can define that in our\npolicy to say when we create new users,\n\n24\n00:01:06.948 --> 00:01:09.241\ngive them these five different\naddresses or whatever.\n\n25\n00:01:09.241 --> 00:01:11.144\nAnd in that way,\nit's able to cover all that and\n\n26\n00:01:11.144 --> 00:01:14.012\nprovide it without somebody going\nin manually entering in addresses.\n\n27\n00:01:14.012 --> 00:01:14.813\nIt's pretty neat stuff.\n\n28\n00:01:14.813 --> 00:01:18.530\nAnd it's something that we need\nto do on Exchange servers.\n\n29\n00:01:18.530 --> 00:01:19.993\nUsually early on in the set up,\n\n30\n00:01:19.993 --> 00:01:22.651\nyou might make changes too\nlater on down the road, too.\n\n31\n00:01:22.651 --> 00:01:24.390\nAll right.\nWell, lets take a look at this, and\n\n32\n00:01:24.390 --> 00:01:26.190\nI'll show you what I mean.\n\n33\n00:01:26.190 --> 00:01:28.752\nI'm in an Exchange system here and\nI got my recipient list.\n\n34\n00:01:28.752 --> 00:01:32.676\nAnd if I were to create a new mailbox,\nright, I'm just going to come in here and\n\n35\n00:01:32.676 --> 00:01:36.854\nwhip up a new mailbox real quick, maybe\nwe'll create one for, oh, I don't know.\n\n36\n00:01:36.854 --> 00:01:37.934\nWho do I want to give a mailbox to?\n\n37\n00:01:37.934 --> 00:01:40.292\nWe'll give one to,\nwe'll do John Travolta, all right.\n\n38\n00:01:40.292 --> 00:01:41.495\nHe needs a mailbox.\n\n39\n00:01:41.495 --> 00:01:43.392\nSo, I'm gonna create one.\n\n40\n00:01:43.392 --> 00:01:45.088\nIt's sad these are the people\nthat popped into my mind.\n\n41\n00:01:45.088 --> 00:01:47.404\n[LAUGH] So we'll create one for\nold John Travolta,\n\n42\n00:01:47.404 --> 00:01:50.450\nwho it occurs to me I don't really\nknow how to spell his last name.\n\n43\n00:01:50.450 --> 00:01:51.646\nSo, we'll just figure that out there.\n\n44\n00:01:51.646 --> 00:01:53.527\nSo I'm going to and create this.\n\n45\n00:01:53.527 --> 00:01:55.864\nAnd if someone asks me for\na user login name,\n\n46\n00:01:55.864 --> 00:01:59.420\nthe user login name looks\nlike an email address, right?\n\n47\n00:01:59.420 --> 00:02:01.510\nBut, it's not their actual email address.\n\n48\n00:02:01.510 --> 00:02:04.518\nSo, when you punch something in here,\nlike I might punch in John,\n\n49\n00:02:04.518 --> 00:02:06.364\nI want him to be john@lab.itpro.tv.\n\n50\n00:02:06.364 --> 00:02:07.083\nOkay?\n\n51\n00:02:07.083 --> 00:02:10.425\nIs that the email address\nhe's going to end up with?\n\n52\n00:02:10.425 --> 00:02:10.938\nIt doesn't know.\n\n53\n00:02:10.938 --> 00:02:12.319\nIt doesn't know from here.\n\n54\n00:02:12.319 --> 00:02:15.999\nIt looks at a policy to find out what\nthe address is actually going to be.\n\n55\n00:02:15.999 --> 00:02:20.526\nAnd so, I can assign him a password,\nand it's gonna create that account and\n\n56\n00:02:20.526 --> 00:02:25.078\nwe'll see what that email address actually\nends up as here in just a moment.\n\n57\n00:02:25.078 --> 00:02:27.307\nSo it's gonna go and look for that policy.\n\n58\n00:02:27.307 --> 00:02:28.583\nIt's gonna create the email address.\n\n59\n00:02:28.583 --> 00:02:30.265\nIt's gonna attach it to the user.\n\n60\n00:02:30.265 --> 00:02:32.130\nAll done in the background.\n\n61\n00:02:32.130 --> 00:02:35.561\nAnd I can see over here his email\naddress is johntravolta@lab.itpro.tv.\n\n62\n00:02:35.561 --> 00:02:36.513\nAll right?\n\n63\n00:02:36.513 --> 00:02:38.022\nWell, that's not what I typed.\n\n64\n00:02:38.022 --> 00:02:40.112\nThat's not what I typed for\nthe login name.\n\n65\n00:02:40.112 --> 00:02:42.621\nRight?\nEmail address is different.\n\n66\n00:02:42.621 --> 00:02:45.029\nAll right.\nNow, if I edit John, I can go in, and\n\n67\n00:02:45.029 --> 00:02:47.095\nI can find his email addresses.\n\n68\n00:02:47.095 --> 00:02:48.416\nRight?\nSo right here under the mailbox,\n\n69\n00:02:48.416 --> 00:02:49.277\nI can go to email addresses.\n\n70\n00:02:49.277 --> 00:02:51.298\nThere it is, and I can change it.\n\n71\n00:02:51.298 --> 00:02:53.600\nWell, can I change it?\n\n72\n00:02:53.600 --> 00:02:57.040\nIf I take this email address right\nhere and I go to edit it, right?\n\n73\n00:02:57.040 --> 00:02:57.817\nHere it is.\nI can go in.\n\n74\n00:02:57.817 --> 00:02:59.339\nI can start to modify, and\nI'm going to change it.\n\n75\n00:02:59.339 --> 00:03:02.880\nI want him to be john@lab.itpro.tv,\nand I set it.\n\n76\n00:03:02.880 --> 00:03:03.552\nOkay.\n\n77\n00:03:03.552 --> 00:03:07.535\nIt's going to try and\nset that, and it fails.\n\n78\n00:03:07.535 --> 00:03:09.235\nNow, why did it fail?\n\n79\n00:03:09.235 --> 00:03:12.466\nIt failed because that email\naddress was set by a policy,\n\n80\n00:03:12.466 --> 00:03:15.034\nand the policy is\noverriding what I typed in.\n\n81\n00:03:15.034 --> 00:03:16.252\nIt's not letting me change it.\n\n82\n00:03:16.252 --> 00:03:17.145\nAll right?\n\n83\n00:03:17.145 --> 00:03:19.130\nSo if I say okay to that and\nI go and edit the user and\n\n84\n00:03:19.130 --> 00:03:22.007\ngo back into his email addresses,-\nit's back to the way that it was.\n\n85\n00:03:22.007 --> 00:03:22.890\nIt didn't change.\n\n86\n00:03:22.890 --> 00:03:23.574\nRight?\n\n87\n00:03:23.574 --> 00:03:27.069\nInstead, it added a second address.\n\n88\n00:03:27.069 --> 00:03:31.447\nYou can add to the policy, but\nyou can't override the policy by default.\n\n89\n00:03:31.447 --> 00:03:35.130\nIf you want to override it,\nyou've got to undo this check mark here.\n\n90\n00:03:35.130 --> 00:03:36.890\nIf I undo this check mark,\n\n91\n00:03:36.890 --> 00:03:40.180\nnow I can modify his addresses\nbecause the policy doesn't apply.\n\n92\n00:03:41.180 --> 00:03:42.650\nOn a positive side,\nthat gives me some control.\n\n93\n00:03:42.650 --> 00:03:46.621\nOn a negative side, what if I want to\nmake a bulk change down the road, right?\n\n94\n00:03:46.621 --> 00:03:47.909\nMaybe I add some new domain.\n\n95\n00:03:47.909 --> 00:03:54.300\nI add ITprotv.net, so I want everybody\nto have an ITproTV.net address.\n\n96\n00:03:54.300 --> 00:03:59.660\nWell, if I modify my policy, any user the\npolicy applies will get that new address,\n\n97\n00:03:59.660 --> 00:04:02.110\nexcept for\njohn because I disabled the policy.\n\n98\n00:04:02.110 --> 00:04:05.523\nSo it's not necessarily not the greatest\nthing to go in and disable that policy.\n\n99\n00:04:05.523 --> 00:04:08.661\nInstead, if we wanna change\nthe way users addresses work,\n\n100\n00:04:08.661 --> 00:04:11.240\nwe should go and modify the policy itself.\n\n101\n00:04:11.240 --> 00:04:12.579\nSo, let's take a look at that.\n\n102\n00:04:12.579 --> 00:04:15.273\nSo the email address policy is\nactually defined right back here.\n\n103\n00:04:15.273 --> 00:04:18.450\nIf I go into my Exchange admin center,\non my left side,\n\n104\n00:04:18.450 --> 00:04:20.740\nyou will see all the different things.\n\n105\n00:04:20.740 --> 00:04:23.562\nAnd what we're looking for\nis a section on mail flow.\n\n106\n00:04:23.562 --> 00:04:25.292\nIt's not the most intuitive, I guess.\n\n107\n00:04:25.292 --> 00:04:26.692\nBut if you think about mail flow,\n\n108\n00:04:26.692 --> 00:04:29.692\nthis is dictating how email moves\nthrough our Exchange organization.\n\n109\n00:04:29.692 --> 00:04:35.032\nAnd inside of mail flow, you'll find\nyour email address policies, all right.\n\n110\n00:04:35.032 --> 00:04:38.562\nThe email address policies, those\nare what dictates what addresses we get,\n\n111\n00:04:38.562 --> 00:04:41.452\nhow our users are getting an email\naddress generated for them.\n\n112\n00:04:41.452 --> 00:04:45.204\nAnd if you take it, you'll have at least\none, right, you have to have one, and\n\n113\n00:04:45.204 --> 00:04:46.617\nthat's the default policy.\n\n114\n00:04:46.617 --> 00:04:48.727\nNow you can have more than one policy, and\n\n115\n00:04:48.727 --> 00:04:53.200\nthat's pretty neat because you might have\ndifferent employees with different needs.\n\n116\n00:04:53.200 --> 00:04:56.417\nMaybe you have multiple\ncompanies under one umbrella.\n\n117\n00:04:56.417 --> 00:04:59.052\nAnd so, you want people in\nCompany A to get one email address and\n\n118\n00:04:59.052 --> 00:05:01.316\npeople in Company B to get\na different email address.\n\n119\n00:05:01.316 --> 00:05:03.300\nYou can define policies that do that.\n\n120\n00:05:03.300 --> 00:05:06.408\nSo, they have a priority, and\nthey're applied in order.\n\n121\n00:05:06.408 --> 00:05:09.366\nOnly one policy applies to a user,\nso, the first one that matches for\n\n122\n00:05:09.366 --> 00:05:12.747\nthem is what applies, and so the order\nthese are in is kind of important for us.\n\n123\n00:05:12.747 --> 00:05:13.570\nAll right.\n\n124\n00:05:13.570 --> 00:05:15.382\nI'm gonna take this default policy and\nI'm gonna edit it.\n\n125\n00:05:15.382 --> 00:05:17.637\nAnd when you going into\nthe settings of the policy,\n\n126\n00:05:17.637 --> 00:05:19.584\nthere's not a whole heck\nof a lot to change.\n\n127\n00:05:19.584 --> 00:05:23.045\nRight here we've got the name,\nwhich you can change on other policies,\n\n128\n00:05:23.045 --> 00:05:24.020\nnot on the default.\n\n129\n00:05:25.290 --> 00:05:27.680\nAnd then,\nwe've got our email address format.\n\n130\n00:05:27.680 --> 00:05:28.935\nThis is the important one.\n\n131\n00:05:28.935 --> 00:05:34.379\nSee how it's got an email address format\ndefined as something @lab.itpro.tv?\n\n132\n00:05:34.379 --> 00:05:37.480\nThere's that domain that they're\ngetting that address for.\n\n133\n00:05:37.480 --> 00:05:41.040\nAnd if I edit that,\nI can go in and I can change it.\n\n134\n00:05:41.040 --> 00:05:45.887\nAnd if you look at it, you'll see here\nthis accepted domain is lab.itpro.tv, and\n\n135\n00:05:45.887 --> 00:05:50.478\nthen how it's generating the email\naddress, alias@contoso.com, right?\n\n136\n00:05:50.478 --> 00:05:52.858\nAnd then,\nyou'll see these other examples down here.\n\n137\n00:05:52.858 --> 00:05:58.593\nJohn.Smith, JSmith, JohnS, Smith.John, all\nthese other formats that I can pick from.\n\n138\n00:05:58.593 --> 00:06:03.039\nOr ,we can do a complete custom address\nand enter in a different format here.\n\n139\n00:06:03.039 --> 00:06:06.685\nAnd it's got this Learn More link which is\nkind of important because if you're gong\n\n140\n00:06:06.685 --> 00:06:09.356\nto build your own address,\nyou have to use their variables.\n\n141\n00:06:09.356 --> 00:06:12.597\nAnd so, here's the variables\nthat they've got, like %G for\n\n142\n00:06:12.597 --> 00:06:15.056\nthe first name, %S for\nthe last name and so on.\n\n143\n00:06:15.056 --> 00:06:19.733\nAnd you can use these to build your own\ncustom format if you want, all right.\n\n144\n00:06:19.733 --> 00:06:24.270\nNow, you've probably noticed one problem\nthat I'm gonna bump into which is all\n\n145\n00:06:24.270 --> 00:06:26.617\nof these options are grayed out, right.\n\n146\n00:06:26.617 --> 00:06:28.054\nIt's not letting me change these and\n\n147\n00:06:28.054 --> 00:06:30.612\nthat's because it's already\nflagged as a custom address type.\n\n148\n00:06:30.612 --> 00:06:33.839\nAnd if we uncheck that, they light up,\nand now we can start to manipulate that.\n\n149\n00:06:33.839 --> 00:06:37.040\nWe can change it and set it to what\nit is that we want, all right.\n\n150\n00:06:37.040 --> 00:06:42.201\nSo if I want by default,\npeople to have first name @ lab.itpro.tv,\n\n151\n00:06:42.201 --> 00:06:45.443\nI could come in here and\nI could choose that.\n\n152\n00:06:45.443 --> 00:06:49.445\nNow, it's not one of the default options,\nand it's not a default option because\n\n153\n00:06:49.445 --> 00:06:53.130\nwell, you're probably gonna have\ntwo employees named John, right?\n\n154\n00:06:53.130 --> 00:06:55.469\nSo now you've got a conflict,\nand you'll have John.\n\n155\n00:06:55.469 --> 00:06:58.810\nBut then, the second one will be\njohn1@lab.itpro.tv or john2, or\n\n156\n00:06:58.810 --> 00:07:00.906\nwhatever, and that's not very intuitive.\n\n157\n00:07:00.906 --> 00:07:02.509\nSo, they don't want you to deal with that.\n\n158\n00:07:02.509 --> 00:07:05.562\nSo, they picked something that's\na little bit more specific.\n\n159\n00:07:05.562 --> 00:07:09.425\nSo if we pick something like this\none here, john.smith@contoso.com,\n\n160\n00:07:09.425 --> 00:07:12.306\nnow, somebody would have to\nhave the same first name and\n\n161\n00:07:12.306 --> 00:07:14.292\nlast name to get a duplicate address.\n\n162\n00:07:14.292 --> 00:07:18.140\nBut maybe you don't like that dot,\nmaybe you just want it to be written out.\n\n163\n00:07:18.140 --> 00:07:19.044\nAnd if you look,\n\n164\n00:07:19.044 --> 00:07:23.317\nI don't have one in here that's John Smith\nwritten out without a dot, right?\n\n165\n00:07:23.317 --> 00:07:25.441\nThere's dot on that one,\nthere's a dot on that one.\n\n166\n00:07:25.441 --> 00:07:29.538\nAnd so for that, I might have to\ncreate a custom address, right?\n\n167\n00:07:29.538 --> 00:07:33.421\nAnd so, I can come in and I can specify\nthat custom address right in here in my\n\n168\n00:07:33.421 --> 00:07:36.274\nemail parameters and\ndictate how that's going to be.\n\n169\n00:07:36.274 --> 00:07:40.817\nSo if I wanted to be first name\nfollowed by last name without\n\n170\n00:07:40.817 --> 00:07:44.539\na period in between it,\nI could hit Learn More.\n\n171\n00:07:44.539 --> 00:07:50.989\nI can find the variables for that, so %G\nand %S, those are my first and last names.\n\n172\n00:07:50.989 --> 00:07:57.187\nAnd then, I can go back here and\nI can just modify this line to say, %G %S.\n\n173\n00:07:57.187 --> 00:07:59.126\n@lab.itpro.tv.\n\n174\n00:07:59.126 --> 00:08:04.400\nNow, when I create a user account, they'll\nget first name and last name at whatever.\n\n175\n00:08:05.450 --> 00:08:08.590\nBut you don't have to create your own,\nyou could just stick with one of these.\n\n176\n00:08:08.590 --> 00:08:10.300\nSo if I wanna do it with a dot,\nI could go with that.\n\n177\n00:08:10.300 --> 00:08:14.900\ni think the default is to use the alias\nand I typed John Travolta for\n\n178\n00:08:14.900 --> 00:08:16.950\nthe alias, so\nI wouldn't necessarily see that work.\n\n179\n00:08:16.950 --> 00:08:19.054\nLet's go first initial last name.\n\n180\n00:08:19.054 --> 00:08:22.572\nSo we'll say like JSmith@contoso.com.\n\n181\n00:08:22.572 --> 00:08:26.511\nAll right I'll go ahead and save that so\nthere's my new policy right there\n\n182\n00:08:26.511 --> 00:08:30.910\nshowing me that example of what it's gonna\ngenerate and I can go ahead and save it.\n\n183\n00:08:30.910 --> 00:08:33.410\nNow you do have this\napplied to field also and\n\n184\n00:08:33.410 --> 00:08:35.210\nthis determines who\nit's going to apply to.\n\n185\n00:08:35.210 --> 00:08:39.240\nOn the default policy we can't\nchange that on our own policies,\n\n186\n00:08:39.240 --> 00:08:42.460\nyou can say this only applies to\npeople with mailboxes, not contacts,\n\n187\n00:08:42.460 --> 00:08:46.260\nor this only applies to groups,\nnot mailboxes, or any mixture of them.\n\n188\n00:08:46.260 --> 00:08:47.660\nYou can pick and choose.\n\n189\n00:08:47.660 --> 00:08:51.060\nSo I'll go ahead and save that.\n\n190\n00:08:51.060 --> 00:08:53.760\nNotice how it says here if we save it,\n\n191\n00:08:53.760 --> 00:08:57.640\nit's not applied until\nwe actually apply it.\n\n192\n00:08:57.640 --> 00:08:59.100\nSo it doesn't take effect right away.\n\n193\n00:08:59.100 --> 00:09:01.880\nIf we say, okay to that,\nnow I've got the policy, and\n\n194\n00:09:01.880 --> 00:09:04.880\nI have to hit Apply over here for\nit to take effect.\n\n195\n00:09:04.880 --> 00:09:06.770\nNow we do have to be careful with this.\n\n196\n00:09:06.770 --> 00:09:08.480\nI've got a bunch of user accounts, and\n\n197\n00:09:08.480 --> 00:09:11.540\nthe user accounts already\nhave email addresses.\n\n198\n00:09:11.540 --> 00:09:14.480\nSo if I go up to recipients,\nand let's take like my account.\n\n199\n00:09:14.480 --> 00:09:18.490\nI've got donpezet@lab.itpro.tv.\n\n200\n00:09:18.490 --> 00:09:23.273\nWhen this policy applies,\nI should get dpezet@lab.itpro.tv,\n\n201\n00:09:23.273 --> 00:09:27.800\nbut what happens to my e-mails that\nare being sent to my old address?\n\n202\n00:09:27.800 --> 00:09:29.470\nI don't want those to bounce do I?\n\n203\n00:09:29.470 --> 00:09:30.720\nWell watch what happens.\n\n204\n00:09:30.720 --> 00:09:33.702\nWe'll go here into mail flow and\nour email address policy.\n\n205\n00:09:33.702 --> 00:09:35.970\nI'm gonna take this policy we\njust modified and I'll apply it.\n\n206\n00:09:35.970 --> 00:09:38.270\nSo, I'll go ahead and say yes to that.\n\n207\n00:09:38.270 --> 00:09:40.340\nIt's gonna reach out and it's applying it.\n\n208\n00:09:40.340 --> 00:09:43.300\nNow, the bigger your organization is the\nlonger it will take because it's got to\n\n209\n00:09:43.300 --> 00:09:46.630\nscrape across all the user accounts,\nall the mailboxes and apply.\n\n210\n00:09:46.630 --> 00:09:51.340\nBut, I can see that's applied now,\nand if I go back to my recipients and\n\n211\n00:09:51.340 --> 00:09:54.460\nI take a look, I'm just gonna hit refresh\nand make sure I've got the latest data.\n\n212\n00:09:54.460 --> 00:09:57.720\nDon Pezet,\nI now show as DPezet@lab.itpro.tv,\n\n213\n00:09:57.720 --> 00:10:00.390\nI got that address in\nthe format that I wanted.\n\n214\n00:10:00.390 --> 00:10:03.910\nAnd if I edit that,\nI can take a look in here and\n\n215\n00:10:03.910 --> 00:10:08.230\nsee my email addresses and\nsee how it kept my old address?\n\n216\n00:10:08.230 --> 00:10:12.180\nIt's smart enough to know, we don't wanna\nditch the old email address because\n\n217\n00:10:12.180 --> 00:10:14.030\nyou probably are receiving email there.\n\n218\n00:10:14.030 --> 00:10:15.685\nSo it just adds to the second one.\n\n219\n00:10:15.685 --> 00:10:18.600\nIt's not part of the policy though so\nyou could come in and\n\n220\n00:10:18.600 --> 00:10:22.303\nremove this if you wanted if I wanted to\nget rid of it I could delete that and\n\n221\n00:10:22.303 --> 00:10:26.192\nnow its gone and it'll let me do that\nwithout overwriting the policy because\n\n222\n00:10:26.192 --> 00:10:29.715\nthat address is not part of the policy\nanymore right but this one is and\n\n223\n00:10:29.715 --> 00:10:33.456\nits stuck in there by default right\nnow lets talk about custom policies.\n\n224\n00:10:33.456 --> 00:10:38.141\nIn my company maybe I want to add a new\ndomain and so I decide I wanna add,\n\n225\n00:10:38.141 --> 00:10:39.260\nITProTV.net.\n\n226\n00:10:39.260 --> 00:10:42.253\nI want people to have that address,\nnot lab.itpro.tv,\n\n227\n00:10:42.253 --> 00:10:44.500\nso I want to add another one to it.\n\n228\n00:10:44.500 --> 00:10:47.840\nWhile I could go through to each\nuser individually if I wanted to,\n\n229\n00:10:47.840 --> 00:10:50.790\nor I could modify my recipient policy.\n\n230\n00:10:50.790 --> 00:10:55.730\nAnd when I modify that policy we can add\nmultiple addresses if we want, all right?\n\n231\n00:10:55.730 --> 00:10:58.030\nAnd you can even do filters\nto limit who it applies to,\n\n232\n00:10:58.030 --> 00:10:59.140\nyou can do all sorts of crazy stuff.\n\n233\n00:10:59.140 --> 00:11:02.390\nSo I'm gonna add in a new policy,\nand when I create this new policy,\n\n234\n00:11:02.390 --> 00:11:06.040\nI'm gonna call it ITProTV Employees.\n\n235\n00:11:06.040 --> 00:11:09.800\nI'm just giving it a name, and\nthen I'm gonna specify my address format.\n\n236\n00:11:09.800 --> 00:11:12.500\nSo I want everybody to have an address and\n\n237\n00:11:12.500 --> 00:11:14.320\nI want that address to\nfollow a certain format.\n\n238\n00:11:14.320 --> 00:11:18.840\nWell, I want it to have\nmy name@itprotv.net.\n\n239\n00:11:18.840 --> 00:11:24.590\nWell right here we've got select accepted\ndomain, and I only have lab.itpro.tv.\n\n240\n00:11:24.590 --> 00:11:28.720\nWhen you install Exchange, it asks you\nwhat your email address domain is.\n\n241\n00:11:28.720 --> 00:11:31.035\nAnd this is what I punched\nin when I installed it.\n\n242\n00:11:31.035 --> 00:11:34.160\nIt doesn't know about any\nother domains I might own.\n\n243\n00:11:34.160 --> 00:11:37.510\nSo if any other emails come into\nmy server that's destined for,\n\n244\n00:11:37.510 --> 00:11:42.280\nsay, ITProTV.net, I own that domain, but\nExchange doesn't know about it, and so\n\n245\n00:11:42.280 --> 00:11:44.250\nit's gonna throw those emails away.\n\n246\n00:11:44.250 --> 00:11:48.200\nSo, I have to tell the Exchange Server\nthat it's okay to get email on those\n\n247\n00:11:48.200 --> 00:11:49.900\nnetworks and allow them to come in.\n\n248\n00:11:49.900 --> 00:11:52.268\nSo I'm gonna make sure that\nI've provided that information.\n\n249\n00:11:52.268 --> 00:11:55.020\nSo, I'm gonna cancel\nout of this policy and\n\n250\n00:11:55.020 --> 00:11:58.040\nyou'll see right up here,\naccepted domains.\n\n251\n00:11:58.040 --> 00:12:00.800\nHere's where we dictate what\ndomains are considered local.\n\n252\n00:12:00.800 --> 00:12:02.550\nIn other words, mailboxes for\n\n253\n00:12:02.550 --> 00:12:05.040\nthese domains should exist right here,\nall right?\n\n254\n00:12:05.040 --> 00:12:08.930\nThese are not gonna be, you know,\nHotmail or Gmail or anything like that.\n\n255\n00:12:08.930 --> 00:12:13.460\nThose mailboxes reside somewhere else but\nlab.itprotv, that's us.\n\n256\n00:12:13.460 --> 00:12:19.690\nI can add in ITProTV.NET or\nany other domains that I might have,\n\n257\n00:12:19.690 --> 00:12:23.210\nI can come in and\npunch them in right here, all right.\n\n258\n00:12:23.210 --> 00:12:25.300\nAnd then you dictate what\nkind of domain it is.\n\n259\n00:12:25.300 --> 00:12:29.010\nThe default is an authoritative domain\nthat means the mail box is right here.\n\n260\n00:12:29.010 --> 00:12:31.880\nLet the e-mail come in,\nif we don't have the mail box,\n\n261\n00:12:31.880 --> 00:12:33.440\nthen the e-mail just doesn't exist.\n\n262\n00:12:33.440 --> 00:12:34.990\nThrow it out at bat, right?\n\n263\n00:12:34.990 --> 00:12:38.170\nBut if we have the mailbox,\nput the email in the mailbox.\n\n264\n00:12:38.170 --> 00:12:40.320\nYou could say internal relay.\n\n265\n00:12:40.320 --> 00:12:44.380\nIf you got really old Exchange Servers,\nor Lotus Domino, some other kind of\n\n266\n00:12:44.380 --> 00:12:48.630\nemail system, you might receive an email,\nand look to see if you have the mailbox.\n\n267\n00:12:48.630 --> 00:12:52.891\nAnd if you don't have the mailbox, then\nyou forward the email to another server in\n\n268\n00:12:52.891 --> 00:12:55.486\nyour organization that\nmight have that mailbox so\n\n269\n00:12:55.486 --> 00:12:58.480\nthis is a way that we link to\nthird-party email systems.\n\n270\n00:12:58.480 --> 00:13:00.380\nLastly, you've got external relay.\n\n271\n00:13:00.380 --> 00:13:03.644\nThat says, we don't have the mailbox,\nbut if that email comes in,\n\n272\n00:13:03.644 --> 00:13:05.664\nwe'll relay it to another destination.\n\n273\n00:13:05.664 --> 00:13:11.085\nBe careful with this, any kind of relay\nis something that can be abused for spam.\n\n274\n00:13:11.085 --> 00:13:15.280\nPeople could start relaying email through\nyour server to send spam to whatever\n\n275\n00:13:15.280 --> 00:13:17.040\ndomains you provide here.\n\n276\n00:13:17.040 --> 00:13:19.260\nSo this would really need to\nbe a domain that you owned.\n\n277\n00:13:19.260 --> 00:13:20.390\nSo I've got a second domain.\n\n278\n00:13:20.390 --> 00:13:21.890\nIt's on a separate mail system.\n\n279\n00:13:21.890 --> 00:13:25.120\nIf I receive email for it, don't throw it\nout, just forward it over to that server.\n\n280\n00:13:26.260 --> 00:13:28.550\nBut in my case,\nif my mail box is right here so\n\n281\n00:13:28.550 --> 00:13:31.770\nI'm going to stick with authoritative and\nI'll just go ahead and hit Save.\n\n282\n00:13:31.770 --> 00:13:34.450\nNow you can give it a name,\nthe name could be what ever you want.\n\n283\n00:13:34.450 --> 00:13:37.470\nI almost always type in the domain names,\nthat's what I did and so\n\n284\n00:13:37.470 --> 00:13:41.192\nI've got itpt.net is\nnow an accepted domain.\n\n285\n00:13:41.192 --> 00:13:43.700\nAll right,\nnow I do need to go a step further and\n\n286\n00:13:43.700 --> 00:13:46.810\nsay well if somebody is going\nto send an email to ITProTV.net\n\n287\n00:13:46.810 --> 00:13:49.760\nhow does it even know to come to\nthis server in the first place?\n\n288\n00:13:49.760 --> 00:13:50.280\nRight?\n\n289\n00:13:50.280 --> 00:13:53.150\nWell for that I'd have to go and\nmodify the MX records in DNS and\n\n290\n00:13:53.150 --> 00:13:55.500\nthat's going to tell it to let\nthat email come over here.\n\n291\n00:13:55.500 --> 00:13:57.586\nBut we'll deal with that\nin another episode.\n\n292\n00:13:57.586 --> 00:14:02.096\nBut for right now I've got that added as\nan accepted domain so I can jump back\n\n293\n00:14:02.096 --> 00:14:06.908\nto my email address policies, and I can\nadd in my new ITProTV employees policy.\n\n294\n00:14:09.229 --> 00:14:11.610\nAnd then I can punch in my address format.\n\n295\n00:14:11.610 --> 00:14:14.950\nAnd now,\nI'll be able to pick that other domain.\n\n296\n00:14:14.950 --> 00:14:19.270\nI want these employees to have\nan ITProTV .NET address, and\n\n297\n00:14:19.270 --> 00:14:23.770\nI want it to be first initial,\nlast name @ ITProTV.net.\n\n298\n00:14:23.770 --> 00:14:26.330\nSo I'm gonna go ahead and\nchoose that and I'll save it.\n\n299\n00:14:26.330 --> 00:14:28.690\nSo there's their default address.\n\n300\n00:14:28.690 --> 00:14:32.480\nBut I also want them to have the lab one\njust in case somebody's using that, right?\n\n301\n00:14:32.480 --> 00:14:34.308\nSo I might come in and\nadd that one in too.\n\n302\n00:14:34.308 --> 00:14:36.600\nI'll add lab.ITProTV and\n\n303\n00:14:36.600 --> 00:14:40.230\non this one I'll stick with the alias\nbecause that's how the old way was set up.\n\n304\n00:14:40.230 --> 00:14:42.760\nI want compatibility with the old way,\nright?\n\n305\n00:14:42.760 --> 00:14:45.090\nAnd I could make this the default,\nbut I don't want it to be,\n\n306\n00:14:45.090 --> 00:14:47.230\nI just want it to be a secondary address.\n\n307\n00:14:47.230 --> 00:14:49.830\nSo now people in ITProTV\nwill get both addresses.\n\n308\n00:14:49.830 --> 00:14:54.565\nAnd I could even add more, you know maybe\nI wanted to add first name dot last name\n\n309\n00:14:54.565 --> 00:14:58.420\n@ITPROTV.net, I could add that in.\n\n310\n00:14:58.420 --> 00:15:00.800\nJust in case somebody tries\nto email in that format,\n\n311\n00:15:00.800 --> 00:15:02.520\nyou can add as many addresses as you want.\n\n312\n00:15:02.520 --> 00:15:06.250\nSo I'm just gonna punch these in and then\nright here we get a sequence number for\n\n313\n00:15:06.250 --> 00:15:07.470\nthe policies.\n\n314\n00:15:07.470 --> 00:15:11.420\nRemember I said only one\npolicy can apply to a user.\n\n315\n00:15:11.420 --> 00:15:13.220\nIf we match more than\none how does it pick a?\n\n316\n00:15:13.220 --> 00:15:15.910\nIt's this policy sequence number, right?\n\n317\n00:15:15.910 --> 00:15:19.170\nSo I'm creating sequence number one and\nanybody that matches this,\n\n318\n00:15:19.170 --> 00:15:20.510\nthis is what's going to apply.\n\n319\n00:15:20.510 --> 00:15:25.666\nAnd so I can filter it right down\nhere to change who it's applying to.\n\n320\n00:15:25.666 --> 00:15:28.819\nSo for example,\nI might want to have more than one OU, and\n\n321\n00:15:28.819 --> 00:15:31.528\nthis only applies to people\nwho need ITProTV OU.\n\n322\n00:15:31.528 --> 00:15:32.140\nSo, I'm gonna do that.\n\n323\n00:15:32.140 --> 00:15:35.670\nI'm gonna limit this to users\nwith exchange mailboxes and\n\n324\n00:15:35.670 --> 00:15:37.600\nI'm gonna add a rule.\n\n325\n00:15:37.600 --> 00:15:41.121\nAnd the rule is I'm gonna limit\nit to a recipient container and\n\n326\n00:15:41.121 --> 00:15:44.113\nI'm gonna limit it just to\npeople in the ITProTV OU.\n\n327\n00:15:44.113 --> 00:15:47.452\nIf you're outside the ITProTV OU, and\nthis policy doesn't apply to you,\n\n328\n00:15:47.452 --> 00:15:48.675\nyou move on to the next one.\n\n329\n00:15:48.675 --> 00:15:50.173\nRight, I'm limiting that.\n\n330\n00:15:50.173 --> 00:15:53.891\nSo If I'm supporting more than one\ncompany, I can create an OU for\n\n331\n00:15:53.891 --> 00:15:58.354\neach company and do a separate email\naddress policy for each OU, and now people\n\n332\n00:15:58.354 --> 00:16:03.340\nare getting the default address of their\ncompany, and that's really important.\n\n333\n00:16:03.340 --> 00:16:05.670\nIt gives everyone their identity,\nit kind of keeps everyone separate.\n\n334\n00:16:06.870 --> 00:16:08.470\nSo I'll go ahead and save that.\n\n335\n00:16:08.470 --> 00:16:12.040\nAnd now I have that new policy in place\nand I get that warning about it not being\n\n336\n00:16:12.040 --> 00:16:16.140\nactive yet, so\nI gotta make sure that I activate it.\n\n337\n00:16:16.140 --> 00:16:20.400\nSo my default policy is applied,\nI'm gonna go to ITProTV employees and\n\n338\n00:16:20.400 --> 00:16:21.824\nI'm gonna apply that one.\n\n339\n00:16:21.824 --> 00:16:26.490\nAnd its gonna look for anybody in\nthe ITProTV OU that has a mailbox and\n\n340\n00:16:26.490 --> 00:16:29.820\nits going to apply that policy to it,\nall right.\n\n341\n00:16:29.820 --> 00:16:31.180\nAnd you'll see that priority number.\n\n342\n00:16:31.180 --> 00:16:34.140\nAnd you got a couple arrows here, so\nyou can move policies up and down,\n\n343\n00:16:34.140 --> 00:16:35.170\nbased on what it is that you need.\n\n344\n00:16:35.170 --> 00:16:36.870\nYou can kinda set that\norder after the fact.\n\n345\n00:16:36.870 --> 00:16:39.640\nAll right,\nlet's see what that did to my users.\n\n346\n00:16:39.640 --> 00:16:42.180\nIf I jump over to recipients,\nI can look down and\n\n347\n00:16:42.180 --> 00:16:44.540\nI'm not seeing a big change here,\ncuz I need to hit refresh.\n\n348\n00:16:44.540 --> 00:16:45.480\nThere we go.\n\n349\n00:16:45.480 --> 00:16:50.803\nAnd looking down the list, notice how\nBob Denver is now BDenver@itprotv.net.\n\n350\n00:16:50.803 --> 00:16:54.240\nI'm DPaset@itprotv.net, so\nI know that it took effect, but\n\n351\n00:16:54.240 --> 00:16:59.063\nif I look at John Travolta,\nhe's still JTravolta@lab.itpro.tv.\n\n352\n00:16:59.063 --> 00:17:00.140\nWhy is that?\n\n353\n00:17:00.140 --> 00:17:03.690\nHe's not in the ITProTV OU.\n\n354\n00:17:03.690 --> 00:17:06.019\nHe's not in the OU, so\nthe policy's not applying to him.\n\n355\n00:17:07.040 --> 00:17:11.120\nNow, if I move him into that OU,\nnow the policy does apply, and\n\n356\n00:17:11.120 --> 00:17:13.550\nat the next maintenance interval\nit will update his address.\n\n357\n00:17:13.550 --> 00:17:16.420\nIt will update people automatically,\nwhich is kinda nice.\n\n358\n00:17:16.420 --> 00:17:20.990\nBut as I add new employees,\nthey're gonna get the proper address.\n\n359\n00:17:20.990 --> 00:17:24.130\nSo if I'll come in here, and\nI'll add a new user mailbox.\n\n360\n00:17:24.130 --> 00:17:27.630\nAnd so I'll create one,\nlet's do, Clint Eastwood.\n\n361\n00:17:29.310 --> 00:17:33.770\nSo I'm gonna create an e-mail,\nmailbox for Clint Eastwood.\n\n362\n00:17:33.770 --> 00:17:37.130\nAll right, so there's his display name.\n\n363\n00:17:37.130 --> 00:17:43.280\nFor his organizational unit,\nI'm gonna put him in to ITProTV,\n\n364\n00:17:43.280 --> 00:17:50.470\nand we'll just give him a quick password,\nthere we go.\n\n365\n00:17:50.470 --> 00:17:53.730\nAnd I'll go ahead and save that,\nso it's gonna create his account.\n\n366\n00:17:53.730 --> 00:17:55.740\nAnd it's gonna see the policy\nthat applies to him and\n\n367\n00:17:55.740 --> 00:17:57.010\ngive him the appropriate addresses.\n\n368\n00:17:57.010 --> 00:17:59.950\nIt's gonna hit that\nITProTV employees policy.\n\n369\n00:17:59.950 --> 00:18:03.190\nBut then if I create another user and\nI put them somewhere other than ITProTV,\n\n370\n00:18:03.190 --> 00:18:06.310\nthen the default policy will apply and\nthey'll get a different address.\n\n371\n00:18:06.310 --> 00:18:09.920\nOr at least eventually when\nthe system decides to create it.\n\n372\n00:18:09.920 --> 00:18:13.870\nSo [LAUGH] that'll happen eventually, but\nyou guys get an idea here of how to set\n\n373\n00:18:13.870 --> 00:18:16.610\nthese email address policies up,\ngetting them in place and\n\n374\n00:18:16.610 --> 00:18:20.050\ngetting people the information they\nneed to be able to communicate.\n\n375\n00:18:20.050 --> 00:18:23.990\nKey things to remember here, definitely\nmake sure you set that accepted domain.\n\n376\n00:18:23.990 --> 00:18:28.320\nIf I add email addresses to somebody and\nits a domain that I'm not accepting,\n\n377\n00:18:28.320 --> 00:18:31.250\nthen it's gonna get blocked,\nthe email's just gonna get dropped.\n\n378\n00:18:31.250 --> 00:18:33.480\nSo we're gonna make sure we add\nit to an accepted domain first,\n\n379\n00:18:33.480 --> 00:18:34.600\nand then add it to our policy.\n\n380\n00:18:34.600 --> 00:18:35.980\nOh there, it just finished.\n\n381\n00:18:35.980 --> 00:18:39.930\nAll right, so I can see that Clint\nEastwood did get CEastwood@itprotv.net,\n\n382\n00:18:39.930 --> 00:18:41.470\nhe's got the right address.\n\n383\n00:18:41.470 --> 00:18:44.450\nAnd if I edit him,\nhe should have three addresses, right?\n\n384\n00:18:44.450 --> 00:18:46.560\nSo, if I look, sure enough,\nhe's got all three.\n\n385\n00:18:46.560 --> 00:18:51.290\nHe's also has Clint.Eastwood@ITProTV.net,\nand ClintEastwood@Lab.ITProTV.\n\n386\n00:18:51.290 --> 00:18:53.590\nHe's getting all the addresses\nfrom that policy.\n\n387\n00:18:54.750 --> 00:18:59.270\nAnd if I create another user,\nand maybe we'll do,\n\n388\n00:18:59.270 --> 00:19:03.999\nI don't know, let's do Telly Savalas.\n\n389\n00:19:05.100 --> 00:19:07.070\nI'm really digging deep here for actors.\n\n390\n00:19:07.070 --> 00:19:10.870\nSo [LAUGH] we'll punch in Telly Savalas.\n\n391\n00:19:10.870 --> 00:19:12.410\nWe're gonna give him an account.\n\n392\n00:19:12.410 --> 00:19:16.000\nAnd for his OU, I\"m just gonna\nput him in the regular users OU.\n\n393\n00:19:16.000 --> 00:19:22.770\nHe's not gonna be in ITProTV,\nand we'll punch in a password.\n\n394\n00:19:24.850 --> 00:19:25.950\nThere we go.\n\n395\n00:19:25.950 --> 00:19:26.920\nAnd so it's gonna create his account.\n\n396\n00:19:26.920 --> 00:19:29.580\nHe's not an ITProTV,\nthe default policy will apply to him.\n\n397\n00:19:29.580 --> 00:19:31.720\nHe'll get a different set of addresses.\n\n398\n00:19:31.720 --> 00:19:34.120\nSo, really cool to have\nthat flexibility and\n\n399\n00:19:34.120 --> 00:19:36.930\nthe fact that we can modify\nthis policy after the fact and\n\n400\n00:19:36.930 --> 00:19:40.250\nit updates all of our users, makes\nmanaging email addresses really easy.\n\n401\n00:19:40.250 --> 00:19:44.130\nJust be aware,\nthat if you disable the policy on a user,\n\n402\n00:19:44.130 --> 00:19:49.060\nif you override it, then from now on, from\nnow until eternity, you'll have to go and\n\n403\n00:19:49.060 --> 00:19:51.260\nmanually edit that user\nto add new addresses.\n\n404\n00:19:51.260 --> 00:19:53.460\nAnd so that makes things\na little more burdensome.\n\n405\n00:19:53.460 --> 00:19:57.310\nSo yeah, sure enough, Telly has been\ncreated and he doesn't have ITProTV.net.\n\n406\n00:19:57.310 --> 00:20:02.180\nHe just has lab.ITPro.TV and if I edit\nhis account and take a look at his\n\n407\n00:20:02.180 --> 00:20:05.900\nemail addresses, he didn't end up with\nthe three addresses, he just got the one.\n\n408\n00:20:05.900 --> 00:20:07.665\nDifferent policy, for the different user.\n\n409\n00:20:09.585 --> 00:20:11.025\nAll right, well in this episode,\n\n410\n00:20:11.025 --> 00:20:14.335\nwe got a chance to see our email\naddress policies and how they work.\n\n411\n00:20:14.335 --> 00:20:16.685\nWe got to see how to assign\nthose to different OU's, so\n\n412\n00:20:16.685 --> 00:20:19.905\nthat different users got different\naddresses based on their needs.\n\n413\n00:20:19.905 --> 00:20:23.145\nAnd we got a chance to see the accepted\ndomain screen which we haven't messed with\n\n414\n00:20:23.145 --> 00:20:27.275\nyet, where we can add more domains to\nour system to be able to receive those.\n\n415\n00:20:27.275 --> 00:20:28.680\nSo pretty neat stuff.\n\n416\n00:20:28.680 --> 00:20:31.720\nAll said and done, definitely something\nthat you're gonna have to configure in\n\n417\n00:20:31.720 --> 00:20:35.470\nyour environment if you have more than one\nemail domain, or if you just want people\n\n418\n00:20:35.470 --> 00:20:38.960\nto have more than one address to\ncatch typos or things like that.\n\n419\n00:20:38.960 --> 00:20:41.080\nYou'll want to mess around with\nthe policies and the addresses.\n\n420\n00:20:41.080 --> 00:20:43.210\nSo pretty cool stuff, definitely useful.\n\n421\n00:20:43.210 --> 00:20:45.020\nAll right,\nwell I hope you guys enjoyed it.\n\n422\n00:20:45.020 --> 00:20:48.631\nThat's all for our show, so signing\noff for ITProTV, I'm Don Pezet, and\n\n423\n00:20:48.631 --> 00:20:49.848\nI'll see you next time.\n\n424\n00:20:49.848 --> 00:20:54.682\n[SOUND]\n\n",
          "vimeoId": "136518259"
        }
      ],
      "title": "Mailbox Server"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don explains the various methods that a client can use to connect to Exchange 2013. He demonstrates MAPI, Outlook Anywhere, ActiveSync, POP3, IMAP4 and SMTP. He also gives some pointers as to when one connectivity method is preferred over another.",
          "length": "1676",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-1-client_connectivity-081815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-1-client_connectivity-081815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-1-client_connectivity-081815-1-sm.jpg",
          "title": "Client Connectivity",
          "transcript": "WEBVTT\n\n1\n00:00:00.103 --> 00:00:10.750\n[MUSIC].\n\n2\n00:00:10.750 --> 00:00:13.771\nAll right, good morning,\ngood afternoon and good evening and\n\n3\n00:00:13.771 --> 00:00:15.940\nwelcome back to another\nepisode of IT Pro TV.\n\n4\n00:00:15.940 --> 00:00:20.960\nI'm your host Don Pezet, back again with\nanother episode of Microsoft Exchange\n\n5\n00:00:20.960 --> 00:00:25.080\n2013, and in this episode we're gonna be\ntaking a look at client connectivity.\n\n6\n00:00:25.080 --> 00:00:28.510\nNow we've talked about client access\nservers before and how they serve as that\n\n7\n00:00:28.510 --> 00:00:32.310\ngateway for people to get inside of\ntheir network, and access their email.\n\n8\n00:00:32.310 --> 00:00:36.220\nBut what we haven't talked about are all\nthe different ways that somebody can\n\n9\n00:00:36.220 --> 00:00:38.850\nconnect, and there's actually quite a few.\n\n10\n00:00:38.850 --> 00:00:41.500\nOn the exam, they really want you\nto know the four big ones, so\n\n11\n00:00:41.500 --> 00:00:45.050\nwe're gonna take a look at those and kind\nof look at how that connectivity works.\n\n12\n00:00:45.050 --> 00:00:48.230\nAnd if you're somebody who's been\nworking with Microsoft exchange for\n\n13\n00:00:48.230 --> 00:00:51.480\na long time,\nwell things have changed a little bit, so\n\n14\n00:00:51.480 --> 00:00:54.210\nwe need to be aware of some of\nthe changes that have happened, and\n\n15\n00:00:54.210 --> 00:00:57.600\nsee how people get into our system\nin the first place, all right.\n\n16\n00:00:57.600 --> 00:01:00.320\nWell let me just run down\nthe big four real quick,\n\n17\n00:01:00.320 --> 00:01:02.370\nwhen somebody connects\nto Microsoft Exchange,\n\n18\n00:01:02.370 --> 00:01:06.020\nthere's really four primary methods\nthey can use to connect, right.\n\n19\n00:01:06.020 --> 00:01:10.550\nThe original method that Microsoft\ndeveloped for Exchange, this is way back.\n\n20\n00:01:10.550 --> 00:01:13.710\nJust to give you an example, the first\nversion of Exchange that I worked with was\n\n21\n00:01:13.710 --> 00:01:19.420\nMicrosoft Exchange 5.0, and it was back\nin 1999 or 2000, right around in there.\n\n22\n00:01:19.420 --> 00:01:20.960\nSo a very long time ago.\n\n23\n00:01:20.960 --> 00:01:25.080\nAnd their primary connectivity\nmethod was a protocol called MAPI.\n\n24\n00:01:25.080 --> 00:01:28.430\nAnd MAPI stood for the Messaging\nApplication Programming Interface.\n\n25\n00:01:28.430 --> 00:01:33.930\nAnd it was designed for Microsoft Outlook,\nso Microsoft Outlook used a proprietary\n\n26\n00:01:33.930 --> 00:01:38.860\nprotocol to connect directly to Exchange,\nand the reason Microsoft did that was\n\n27\n00:01:38.860 --> 00:01:44.140\nbecause it allowed Outlook to connect\ndirectly to the mailbox database.\n\n28\n00:01:44.140 --> 00:01:47.060\nOutlook could actually take email and\nstick it right in the database, and\n\n29\n00:01:47.060 --> 00:01:49.390\nit could grab email\nright from the database.\n\n30\n00:01:49.390 --> 00:01:51.790\nAnd back then,\nyou just had one Exchange server.\n\n31\n00:01:51.790 --> 00:01:54.800\nYou didn't have all these\nseparate roles like we do now.\n\n32\n00:01:54.800 --> 00:01:59.700\nBut over time, as Microsoft started\nbreaking things into separate roles,\n\n33\n00:01:59.700 --> 00:02:01.770\nwe ended up with some problems, right.\n\n34\n00:02:01.770 --> 00:02:04.650\nFor example,\nyou might have hub transport rules,\n\n35\n00:02:04.650 --> 00:02:09.670\nrules that do something like apply a legal\ndisclaimer to the bottom of an email.\n\n36\n00:02:09.670 --> 00:02:11.920\nSo if you're attaching a legal\ndisclaimer to an email,\n\n37\n00:02:11.920 --> 00:02:15.930\nas it passes through your system,\nwell you need to be able to catch it,\n\n38\n00:02:15.930 --> 00:02:18.580\nintercept the email while it\npasses through to add that.\n\n39\n00:02:18.580 --> 00:02:22.400\nBut with the old MAPI protocol if\nsomebody was sending an email and\n\n40\n00:02:22.400 --> 00:02:26.060\nthey were an internal user and\nthey were emailing another internal user,\n\n41\n00:02:26.060 --> 00:02:28.150\nit would go right into the database.\n\n42\n00:02:28.150 --> 00:02:31.770\nBut we had no way to apply those rules,\nand so that was a problem.\n\n43\n00:02:31.770 --> 00:02:34.270\nAnd so starting back in Exchange 2007,\n\n44\n00:02:34.270 --> 00:02:36.210\nMicrosoft started to swap that around and\nthey said,\n\n45\n00:02:36.210 --> 00:02:40.890\nfrom now on all e-mail has to go through\na hub transport server regardless of\n\n46\n00:02:40.890 --> 00:02:45.470\nwhether it's MAPI or not, it's got to\ngo through that hub transport server.\n\n47\n00:02:45.470 --> 00:02:48.500\nAnd when that happened It really, kind of,\n\n48\n00:02:48.500 --> 00:02:53.250\nstarted to spell the end of MAPI,\nthat MAPI wasn't as useful anymore.\n\n49\n00:02:53.250 --> 00:02:55.740\nYou used to get better performance,\nbecause you went right to the database,\n\n50\n00:02:55.740 --> 00:02:58.310\nbut you don't anymore, and\nso now you've lost that.\n\n51\n00:02:58.310 --> 00:03:01.220\nAnd, so instead,\nwe start moving out into some\n\n52\n00:03:01.220 --> 00:03:03.890\nother protocols that\nare gonna be more common, so.\n\n53\n00:03:03.890 --> 00:03:08.490\nIf I were doing this show ten years ago,\nMAPI would be like the primary method for\n\n54\n00:03:08.490 --> 00:03:09.540\nconnecting.\n\n55\n00:03:09.540 --> 00:03:11.830\nToday, it's very rarely used, right?\n\n56\n00:03:11.830 --> 00:03:13.600\nSo it's not really common at all.\n\n57\n00:03:13.600 --> 00:03:17.060\nSo instead, we're gonna see one\nof the three other connections.\n\n58\n00:03:17.060 --> 00:03:20.510\nThe other connection, the one that\nMicrosoft considers the primary one now,\n\n59\n00:03:20.510 --> 00:03:22.470\nis what's called Outlook Anywhere.\n\n60\n00:03:22.470 --> 00:03:26.530\nOutlook Anywhere is where we\ntake that MAPI type traffic, and\n\n61\n00:03:26.530 --> 00:03:28.050\nwe send it over HTTP.\n\n62\n00:03:28.050 --> 00:03:32.750\nNow they don't call it MAPI anymore,\nbecause we've lost that messaging API, and\n\n63\n00:03:32.750 --> 00:03:39.310\nso instead it's now called RPC over HTTP,\nor the remote procedure call over HTTP.\n\n64\n00:03:39.310 --> 00:03:43.450\nNow, the neat thing about that is it's\ngoing to take your email traffic,\n\n65\n00:03:43.450 --> 00:03:47.180\nthis direct software access\nthat comes out of Outlook, and\n\n66\n00:03:47.180 --> 00:03:48.610\nit's gonna send it over to the HTTP.\n\n67\n00:03:48.610 --> 00:03:50.390\nOr really the HTTPs, right?\n\n68\n00:03:50.390 --> 00:03:53.975\nSo tccp port 443,\nwhich is allowed on almost every network.\n\n69\n00:03:53.975 --> 00:03:56.140\nMAPI might be blocked on a firewall.\n\n70\n00:03:56.140 --> 00:03:59.440\nBut HTTPs,\nalmost everybody lets that's through.\n\n71\n00:03:59.440 --> 00:04:02.680\nAnd so outlook could be running\ninside your environment, outside.\n\n72\n00:04:02.680 --> 00:04:05.610\nYou can be anywhere in the world,\nand you can connect back to\n\n73\n00:04:05.610 --> 00:04:08.280\nyour exchange server and\nestablish that connection to your mailbox.\n\n74\n00:04:08.280 --> 00:04:09.980\nThat's outlook anywhere, and\n\n75\n00:04:09.980 --> 00:04:13.070\nthat's the primary connectivity\nmethod that Microsoft has.\n\n76\n00:04:13.070 --> 00:04:16.560\nWhen you fire up Microsoft Outlook,\nas an internal or external users or\n\n77\n00:04:16.560 --> 00:04:20.715\nwhatever, it's outlook anywhere\nthat you're using to connect with.\n\n78\n00:04:20.715 --> 00:04:23.335\nThere are two more for\nour backwards compatibility.\n\n79\n00:04:23.335 --> 00:04:28.225\nThere's POP3 and IMAP4, and\nthose two have been around a long time.\n\n80\n00:04:28.225 --> 00:04:31.085\nThose are the original email protocols,\nnot created by Microsoft.\n\n81\n00:04:31.085 --> 00:04:33.945\nMicrosoft made MAPI,\nMicrosoft made Outlook Anywhere.\n\n82\n00:04:33.945 --> 00:04:37.075\nBut POP3 and IMAP4,\nthose were created back in the Unix days,\n\n83\n00:04:37.075 --> 00:04:41.410\nreally in the late 70s,\nearly 80s, a long time ago.\n\n84\n00:04:41.410 --> 00:04:42.750\nAnd they're very prevalent.\n\n85\n00:04:42.750 --> 00:04:46.910\nPOP3 not so much anymore but\nIMAP4 is still very prevalent out there.\n\n86\n00:04:46.910 --> 00:04:52.430\nAny device can connect to an exchange\nserver using IMAP4, if it's a Blackberry,\n\n87\n00:04:52.430 --> 00:04:57.580\nan Iphone, Android tablet,\na Linux box, a Mac, a Windows Pc.\n\n88\n00:04:57.580 --> 00:04:59.950\nPretty much everybody supports POP3 and\nIMAP4.\n\n89\n00:05:01.050 --> 00:05:03.090\nBut there's some features we lose out on.\n\n90\n00:05:03.090 --> 00:05:04.850\nAnd that's where we'd rather\nhave Outlook Anywhere.\n\n91\n00:05:04.850 --> 00:05:07.080\nWe'd rather run Microsoft Outlook.\n\n92\n00:05:07.080 --> 00:05:08.930\nAnd be able to connect that way.\n\n93\n00:05:08.930 --> 00:05:11.310\nSo those are the four\nprimary connection methods.\n\n94\n00:05:11.310 --> 00:05:15.490\nThere's one or two more that I should\nprobably mention here that might pop up,\n\n95\n00:05:15.490 --> 00:05:19.390\nwhich are things like\nExchange ActiveSync an Outlook Web App.\n\n96\n00:05:19.390 --> 00:05:19.980\nAll right?\n\n97\n00:05:19.980 --> 00:05:23.820\nThose are not the common connectivity\nmethods, cuz it's not really a client\n\n98\n00:05:23.820 --> 00:05:28.170\nconnecting anymore, but it's you using\na client that runs directly on the server.\n\n99\n00:05:28.170 --> 00:05:29.260\nSo, Outlook Web App.\n\n100\n00:05:29.260 --> 00:05:30.690\nOutlook Web App,\nyou're pulling up a webpage.\n\n101\n00:05:30.690 --> 00:05:32.428\nAnd the webpage has all your email.\n\n102\n00:05:32.428 --> 00:05:34.970\nWell that web page is being\nrendered by the server itself, so\n\n103\n00:05:34.970 --> 00:05:37.990\nyou're not running a client,\nyou run a web browser to do it that way.\n\n104\n00:05:37.990 --> 00:05:39.960\nSo it's not like a client\nconnectivity method, but\n\n105\n00:05:39.960 --> 00:05:43.090\nit is a way to get into your email, so\nOutlook Web App is pretty important, and\n\n106\n00:05:43.090 --> 00:05:45.880\nActiveSync is the same thing,\nbut for mobile devices.\n\n107\n00:05:45.880 --> 00:05:51.130\nSo if you have an iOS phone or an Android\nphone, Windows Mobile, they can only\n\n108\n00:05:51.130 --> 00:05:55.412\nuse Exchange ActiveSync to connect right\ninto that mailbox and get your access.\n\n109\n00:05:55.412 --> 00:05:58.750\nAnd ActiveSync is doing the bulk of the\ndata rendering on its side on the server\n\n110\n00:05:58.750 --> 00:06:02.930\nside, and you phone is just rendering on\nthe screen in typically a web browser or\n\n111\n00:06:02.930 --> 00:06:04.710\nsome other kind of mail\nclient that's been defined.\n\n112\n00:06:04.710 --> 00:06:06.570\nSo, those are a little bit different.\n\n113\n00:06:06.570 --> 00:06:09.950\nBut these are all different\nmechanisms somebody can connect with.\n\n114\n00:06:09.950 --> 00:06:13.980\nThe key thing to remember,\nis that they're not always turned on.\n\n115\n00:06:13.980 --> 00:06:16.980\nThat you can turn these on and\noff based on your own needs.\n\n116\n00:06:16.980 --> 00:06:19.530\nYou may want some of them,\nyou may not want others.\n\n117\n00:06:19.530 --> 00:06:22.250\nSome are turned on by default,\nsome are turned off by default.\n\n118\n00:06:22.250 --> 00:06:25.700\nSo in this episode, I want to go through\neach one, and just kind of examine them,\n\n119\n00:06:25.700 --> 00:06:28.450\nsee how they work, and\nsee how we can turn them on and off.\n\n120\n00:06:28.450 --> 00:06:29.320\nAll right.\n\n121\n00:06:29.320 --> 00:06:30.660\nThe first thing I wanna show you,\n\n122\n00:06:30.660 --> 00:06:34.000\nis kinda how these show up inside\nof the exchange admin center.\n\n123\n00:06:34.000 --> 00:06:38.570\nSo I'm gonna pull up my server here, and\nI've got a client access server pulled up\n\n124\n00:06:38.570 --> 00:06:43.820\nhere, and I can basically get\ninto my exchange admin centers.\n\n125\n00:06:43.820 --> 00:06:45.820\nJust let me log into that real quick.\n\n126\n00:06:45.820 --> 00:06:49.090\nAnd when I get logged in to\nthe exchange admin center,\n\n127\n00:06:49.090 --> 00:06:50.980\nI'm gonna see my recipients, right?\n\n128\n00:06:50.980 --> 00:06:53.330\nThat's the default screen,\nwhen you pullout the admin center.\n\n129\n00:06:53.330 --> 00:06:57.820\nI'll see my recipients here, and for\neach recipient, I can turn on and\n\n130\n00:06:57.820 --> 00:07:00.940\noff the connectivity methods individually,\nright?\n\n131\n00:07:00.940 --> 00:07:03.900\nWhen I start to choose a user,\nso like if I choose James Smith.\n\n132\n00:07:04.940 --> 00:07:05.690\nHere's James Smith.\n\n133\n00:07:05.690 --> 00:07:08.080\nAnd over on the right side\nI can see some options.\n\n134\n00:07:08.080 --> 00:07:12.740\nNot all the options that I want, but I can\nsee here disable exchange active scene,\n\n135\n00:07:12.740 --> 00:07:14.710\ndisable OWA for devices.\n\n136\n00:07:14.710 --> 00:07:16.580\nSo, there's a few little things there.\n\n137\n00:07:16.580 --> 00:07:21.140\nBut I don't see anything for Pop3 or\nIMap4, or that kind of stuff.\n\n138\n00:07:21.140 --> 00:07:23.300\nSo, for\nthat I've really got the edit the users.\n\n139\n00:07:23.300 --> 00:07:26.050\nSo if I come in here and edit James, and\n\n140\n00:07:26.050 --> 00:07:28.490\nI go in here, you'll start to\nsee some different options.\n\n141\n00:07:28.490 --> 00:07:31.070\nThe one I'm looking for\nis mailbox features.\n\n142\n00:07:31.070 --> 00:07:34.130\nAnd right here in mailbox features,\nI'll see some of the same stuff.\n\n143\n00:07:34.130 --> 00:07:36.260\nHere's disable exchange active scene.\n\n144\n00:07:36.260 --> 00:07:38.060\nDisable OWA for devices.\n\n145\n00:07:38.060 --> 00:07:38.620\nRight?\n\n146\n00:07:38.620 --> 00:07:41.670\nBut I'll also see Outlook Web App.\n\n147\n00:07:41.670 --> 00:07:43.490\nI can disable that or enable it.\n\n148\n00:07:43.490 --> 00:07:46.307\nIf you see disable,\nthat means it's already enabled and so\n\n149\n00:07:46.307 --> 00:07:47.385\nthis one is turned on.\n\n150\n00:07:47.385 --> 00:07:51.760\nI can see IMap, Pop3 and MAPI,\nand how all of them are enabled,\n\n151\n00:07:51.760 --> 00:07:57.616\nthat means that by default, this user can\nconnect with any of these methods, right?\n\n152\n00:07:57.616 --> 00:07:59.363\nWell, that's not entirely true.\n\n153\n00:07:59.363 --> 00:08:04.640\nBecause, for example, the IMAP and\nPOP3 services are disabled by default.\n\n154\n00:08:04.640 --> 00:08:06.529\nSo she's allowed to connect,\nbut if she tries,\n\n155\n00:08:06.529 --> 00:08:09.073\nit's going to fail,\ncuz the server is not configured properly.\n\n156\n00:08:09.073 --> 00:08:11.590\nSo there's really two pieces\nof the configuration.\n\n157\n00:08:11.590 --> 00:08:15.611\nThere's the server side and\nthen there's the user, the recipient side.\n\n158\n00:08:15.611 --> 00:08:18.132\nWe have to have the services\nenabled on the server and\n\n159\n00:08:18.132 --> 00:08:21.430\nthen we have to have the services\nallowed for the recipient.\n\n160\n00:08:21.430 --> 00:08:23.432\nAnd here,\nwe can see they're all allowed for her.\n\n161\n00:08:23.432 --> 00:08:26.935\nBut maybe I don't want her to use POP3,\nso I could come in here and\n\n162\n00:08:26.935 --> 00:08:29.690\nI could hit Disable and\nit's gonna disable POP3.\n\n163\n00:08:30.880 --> 00:08:33.338\nAnd so now it says, POP3 Disabled and\nI can turn it back on, if I want.\n\n164\n00:08:33.338 --> 00:08:35.806\nBut otherwise,\nshe can't connect via POP3 anymore,\n\n165\n00:08:35.806 --> 00:08:37.970\nbut her other protocols\nare still turned on.\n\n166\n00:08:37.970 --> 00:08:40.921\nSo here's where we can see all those\ndifferent connectivity methods and\n\n167\n00:08:40.921 --> 00:08:42.476\nwe can kinda tweak and work with that.\n\n168\n00:08:42.476 --> 00:08:46.500\nNow notice how Outlook Anywhere\ndoesn't show up in here.\n\n169\n00:08:46.500 --> 00:08:48.900\nAnd that's because Outlook Anywhere or\n\n170\n00:08:48.900 --> 00:08:53.310\nRPC over HTTP,\nthat's wrapped up here under MAPI.\n\n171\n00:08:53.310 --> 00:08:56.488\nBy the time it gets to the server,\nit just looks like MAPI traffic.\n\n172\n00:08:56.488 --> 00:09:01.690\nIt's been tunneled over HTTP to get to the\nserver, so it's kind of wrapped together.\n\n173\n00:09:01.690 --> 00:09:02.550\nThose used to be separate.\n\n174\n00:09:02.550 --> 00:09:05.718\nIn earlier versions of Exchange\nthey were separate, but\n\n175\n00:09:05.718 --> 00:09:09.230\nnow all the connectivity is\nshown as Outlook Anywhere.\n\n176\n00:09:09.230 --> 00:09:11.940\nLet me show you,\ncuz this can get a little confusing.\n\n177\n00:09:11.940 --> 00:09:13.030\nI wanna show you an example.\n\n178\n00:09:13.030 --> 00:09:15.935\nSo let me jump back to an actual client.\n\n179\n00:09:15.935 --> 00:09:18.450\nSo here, I am on a Windows 7 machine.\n\n180\n00:09:18.450 --> 00:09:21.952\nAnd if I fire up Outlook,\nI've got Outlook on this system and\n\n181\n00:09:21.952 --> 00:09:26.830\nI just used autodiscover, so\nit automatically configured itself.\n\n182\n00:09:26.830 --> 00:09:29.940\nIn previous versions of Exchange when it\nauto-configured, it would use MAPI and\n\n183\n00:09:29.940 --> 00:09:32.280\nit would connect directly to that server.\n\n184\n00:09:32.280 --> 00:09:34.904\nBut in newer versions,\nit uses Outlook Anywhere.\n\n185\n00:09:34.904 --> 00:09:38.690\nBut just looking at the client, we don't\nreally have a way of knowing that.\n\n186\n00:09:38.690 --> 00:09:41.360\nWhen I look at this down here at\nthe bottom, I can see connected to\n\n187\n00:09:41.360 --> 00:09:44.680\nMicrosoft Exchange, but it really\ndoesn't tell me about how I'm connected.\n\n188\n00:09:44.680 --> 00:09:48.450\nIt just says that I am connected,\nthat's terribly exciting.\n\n189\n00:09:48.450 --> 00:09:50.757\nSo [LAUGH] I don't really\nget to see how I connected.\n\n190\n00:09:50.757 --> 00:09:53.560\nIf I want to see that though,\nthere's a neat little hidden option.\n\n191\n00:09:53.560 --> 00:09:57.820\nDown by my system clock,\nI can see the Outlook icon right there.\n\n192\n00:09:57.820 --> 00:10:00.605\nAnd if you right-click on that icon,\nyou see some options here.\n\n193\n00:10:00.605 --> 00:10:03.697\nShow New Mail, most of this has\nto do with notifications, but\n\n194\n00:10:03.697 --> 00:10:05.230\nthere's a hidden option.\n\n195\n00:10:05.230 --> 00:10:11.340\nIf you hold Ctrl on your keyboard,\nif you hold Ctrl while you right-click.\n\n196\n00:10:11.340 --> 00:10:15.350\nSo if I hold Ctrl and right-click,\nI get some new options.\n\n197\n00:10:15.350 --> 00:10:16.717\nTest Email AutoConfiguration.\n\n198\n00:10:16.717 --> 00:10:18.690\nWe used that in the autodiscover episode.\n\n199\n00:10:18.690 --> 00:10:21.879\nIf you haven't seen that one, we used\nthat one to do some troubleshooting and\n\n200\n00:10:21.879 --> 00:10:24.055\ntesting, but\nright above it is Connection Status.\n\n201\n00:10:24.055 --> 00:10:25.851\nConnection Status is really useful,\n\n202\n00:10:25.851 --> 00:10:28.910\ncuz it shows you how you're\nconnected to the server.\n\n203\n00:10:28.910 --> 00:10:32.354\nAnd so I can look right in here and\nI can find out am I using POP3?\n\n204\n00:10:32.354 --> 00:10:33.395\nAm I using IMAP4?\n\n205\n00:10:33.395 --> 00:10:35.276\nAm I using Outlook Anywhere?\n\n206\n00:10:35.276 --> 00:10:36.436\nWhich one am I using?\n\n207\n00:10:36.436 --> 00:10:39.933\nAnd so I can see, I've got three\nconnections to the server and\n\n208\n00:10:39.933 --> 00:10:42.498\neach of mine are connected to lab-cas01.\n\n209\n00:10:42.498 --> 00:10:43.501\nIt's also really useful,\n\n210\n00:10:43.501 --> 00:10:45.910\ncuz you can see which client\naccess server you're connected to.\n\n211\n00:10:45.910 --> 00:10:47.736\nYou might have more than\none client access server.\n\n212\n00:10:47.736 --> 00:10:50.690\nHere, we'll figure out which\none we're connected to.\n\n213\n00:10:50.690 --> 00:10:53.470\nAnd see how it says, proxy server?\n\n214\n00:10:53.470 --> 00:10:55.635\nAnd then an actual server name here,\nwhat's that all about?\n\n215\n00:10:55.635 --> 00:10:58.940\nWell, the proxy server is\nyour client access server.\n\n216\n00:10:58.940 --> 00:11:02.212\nThe actual server is the mailbox\nserver on the back-end.\n\n217\n00:11:02.212 --> 00:11:05.990\nClient access servers are really just\nproxying your connection to the mailbox.\n\n218\n00:11:05.990 --> 00:11:09.511\nNobody is allowed to directly connect\nto the mailbox server anymore,\n\n219\n00:11:09.511 --> 00:11:10.597\nthose days are gone.\n\n220\n00:11:10.597 --> 00:11:12.410\nWe used to have that and now that's gone.\n\n221\n00:11:12.410 --> 00:11:15.388\nNow everybody connects to a client\naccess server, but at the end of the day\n\n222\n00:11:15.388 --> 00:11:18.859\nthe client access server is turning around\nand accessing the mailbox server for you.\n\n223\n00:11:18.859 --> 00:11:22.200\nThat way, you don't have to know what\nmailbox server your mailbox is on.\n\n224\n00:11:22.200 --> 00:11:23.645\nThe client access server\nwill figure that out.\n\n225\n00:11:23.645 --> 00:11:26.490\nYou just connect to any of the client\naccess servers in your network,\n\n226\n00:11:26.490 --> 00:11:29.310\nin your organization and\nyou'll get connected.\n\n227\n00:11:29.310 --> 00:11:34.562\nBut if I scroll over, I'll see a lot\nmore in protocol is what I'm looking for\n\n228\n00:11:34.562 --> 00:11:39.587\nright here and I can see the protocol\nlisted for my account is RPC/HTTP.\n\n229\n00:11:39.587 --> 00:11:41.738\nThat means I'm taking my MAPI traffic,\n\n230\n00:11:41.738 --> 00:11:45.240\nwhich is remote procedure\ncalled traffic or RPC traffic.\n\n231\n00:11:45.240 --> 00:11:49.840\nI'm encapsulating that in HTTP and\nits really doing SSL, so it'll be\n\n232\n00:11:49.840 --> 00:11:54.400\nTCP port 443 and sending it across\nthe network to the client access server.\n\n233\n00:11:54.400 --> 00:11:57.605\nThe client access server receives it,\ndecrypts the data,\n\n234\n00:11:57.605 --> 00:11:59.411\ncuz it's encrypted in transit.\n\n235\n00:11:59.411 --> 00:12:01.858\nDecrypts the data and\nthen figures out what it is,\n\n236\n00:12:01.858 --> 00:12:05.881\nreaches out to the mailbox server and gets\nthe appropriate data and the connection\n\n237\n00:12:05.881 --> 00:12:09.970\nbetween the client access server and\nthe mailbox server is encrypted also.\n\n238\n00:12:09.970 --> 00:12:13.120\nSo we have end-to-end encryption\neven on the local area network and\n\n239\n00:12:13.120 --> 00:12:16.500\nthat's really a nice feature to have,\nbut I can see that I'm connected.\n\n240\n00:12:16.500 --> 00:12:19.599\nI can see my RPC port is 6001.\n\n241\n00:12:19.599 --> 00:12:24.033\nBut I'm actually going over HTTP, so\nit's truly going over port 443, but\n\n242\n00:12:24.033 --> 00:12:26.183\nthe encapsulated port is 6001 and\n\n243\n00:12:26.183 --> 00:12:29.680\nI'm connected to an exchange\nserver on the other end.\n\n244\n00:12:29.680 --> 00:12:32.686\nNow, I have three connections open and\nI can see why right here.\n\n245\n00:12:32.686 --> 00:12:35.200\nOne connection is to\nthe Exchange directory.\n\n246\n00:12:35.200 --> 00:12:39.645\nThat's just to be able to look up\ncontacts, to be able to find distribution\n\n247\n00:12:39.645 --> 00:12:44.163\ngroups, to figure out what's in a\ndistribution group as well as to actually\n\n248\n00:12:44.163 --> 00:12:48.559\naccess my email and I usually have\na listening and a speaking connection.\n\n249\n00:12:48.559 --> 00:12:52.773\nSo, one of these is for listening for\nnew email coming from the server and\n\n250\n00:12:52.773 --> 00:12:54.070\nretrieving it.\n\n251\n00:12:54.070 --> 00:12:57.060\nThe other one is for sending email and\ncommunicating up to the server, so\n\n252\n00:12:57.060 --> 00:12:57.948\nI've got those two.\n\n253\n00:12:57.948 --> 00:13:00.110\nAnd if you scroll over here,\nyou can see this session type.\n\n254\n00:13:00.110 --> 00:13:02.383\nWe've got a background,\na foreground and a cache.\n\n255\n00:13:02.383 --> 00:13:05.839\nThese guys are all just kind of\nrunning and doing their activities, so\n\n256\n00:13:05.839 --> 00:13:08.030\nyou can see that health status.\n\n257\n00:13:08.030 --> 00:13:11.713\nA little over further, I can see the\nactual connection type here of HTTP and\n\n258\n00:13:11.713 --> 00:13:14.299\nthat I've got my connections\nthat are up and going.\n\n259\n00:13:14.299 --> 00:13:18.500\nSo really neat information here,\nall kinda hidden away in this tool.\n\n260\n00:13:18.500 --> 00:13:21.640\nThis is handy, because sometimes\nyou might fire up Outlook and\n\n261\n00:13:21.640 --> 00:13:25.032\nnot know is somebody running,\nare they running Outlook Anywhere?\n\n262\n00:13:25.032 --> 00:13:28.440\nAre they running POP3 or IMAP4,\nwhich one are they running?\n\n263\n00:13:28.440 --> 00:13:29.276\nHere we can find out.\n\n264\n00:13:29.276 --> 00:13:32.762\nYou just have to remember\nto hit Ctrl while you right\n\n265\n00:13:32.762 --> 00:13:38.160\nclick on the Outlook icon in the taskbar\nand you'll be able to see that.\n\n266\n00:13:38.160 --> 00:13:41.440\nSo those are some of the different things\nwe need to be aware of as far as client\n\n267\n00:13:41.440 --> 00:13:42.172\nconnectivity.\n\n268\n00:13:42.172 --> 00:13:46.060\nLet's take a look at some of the other\nthings that we might need to customize.\n\n269\n00:13:46.060 --> 00:13:47.618\nI mentioned, Outlook Anywhere.\n\n270\n00:13:47.618 --> 00:13:51.120\nNow, Outlook Anywhere is enabled by\ndefault when you install Exchange.\n\n271\n00:13:51.120 --> 00:13:52.731\nWe don't have to turn that on and\n\n272\n00:13:52.731 --> 00:13:56.679\nour Outlook clients will autodiscover\nthe server and configure themselves.\n\n273\n00:13:56.679 --> 00:13:59.180\nWell, for internal servers, they will.\n\n274\n00:13:59.180 --> 00:14:02.420\nIf they're outside the network,\nthey might not find it.\n\n275\n00:14:02.420 --> 00:14:04.814\nAnd so for outside users,\nthey've gotta use autodiscover and\n\n276\n00:14:04.814 --> 00:14:05.818\nwe've gotta tweak that.\n\n277\n00:14:05.818 --> 00:14:07.694\nSo if you haven't launched it,\n\n278\n00:14:07.694 --> 00:14:10.970\nwe did a two part episode on\nconfiguring autodiscover.\n\n279\n00:14:10.970 --> 00:14:11.926\nDefinitely jump back and\n\n280\n00:14:11.926 --> 00:14:14.255\ncheck that episode out,\ncuz we show how to take care of that.\n\n281\n00:14:14.255 --> 00:14:17.000\nBut otherwise, for our intro people,\nit's automatically configured.\n\n282\n00:14:17.000 --> 00:14:20.557\nAnd it's really nice, because you might\nhave 10,000 computers on your network.\n\n283\n00:14:20.557 --> 00:14:24.034\nAnd those 10,000 employees can sit down,\nthey can launch Outlook and\n\n284\n00:14:24.034 --> 00:14:26.857\nit will look to the Active Directory,\nfind their settings and\n\n285\n00:14:26.857 --> 00:14:28.500\ntake them right to their mailbox.\n\n286\n00:14:28.500 --> 00:14:30.338\nThey don't have to know\nthe name of the server.\n\n287\n00:14:30.338 --> 00:14:32.420\nThey don't have to know anything\nabout your infrastructure.\n\n288\n00:14:32.420 --> 00:14:34.632\nThey don't have to know IP addresses or\nport numbers.\n\n289\n00:14:34.632 --> 00:14:37.310\nThey just launch Outlook and\nit automatically configures.\n\n290\n00:14:37.310 --> 00:14:40.211\nIt's really awesome stuff,\no that's kind of cool.\n\n291\n00:14:40.211 --> 00:14:42.866\nThere's not much we need to\ntweak about Outlook Anywhere,\n\n292\n00:14:42.866 --> 00:14:45.480\nthere are a few little things\nthat we need tweaked though.\n\n293\n00:14:45.480 --> 00:14:48.470\nLet me show you, if I get back\ninto my Exchange Admin Center.\n\n294\n00:14:48.470 --> 00:14:51.320\nHere in the Exchange Admin Center,\nif I go down to servers.\n\n295\n00:14:52.450 --> 00:14:55.980\nUnder servers, I can see the list\nof servers that I have and\n\n296\n00:14:55.980 --> 00:15:00.100\nany client access server is\nan Outlook Anywhere connection point.\n\n297\n00:15:00.100 --> 00:15:05.900\nThey cal it an SCP or a service connection\npoint and any cast will work for that.\n\n298\n00:15:07.030 --> 00:15:09.232\nWell, if I go to virtual directories,\n\n299\n00:15:09.232 --> 00:15:12.972\nhere's where I can actually see\nthe Outlook Web App connection and\n\n300\n00:15:12.972 --> 00:15:17.681\nthe autodiscover connection and how people\nare getting connected to that system.\n\n301\n00:15:17.681 --> 00:15:20.695\nAnd these virtual directories\nare all dictating, basically,\n\n302\n00:15:20.695 --> 00:15:23.810\nthe names of these folders and\nhow people can connect.\n\n303\n00:15:23.810 --> 00:15:26.940\nWe don't normally need to tweak these,\nbut you can change the directory names.\n\n304\n00:15:26.940 --> 00:15:30.652\nIf you want people to connect to OWA\nunder a different folder or whatever, but\n\n305\n00:15:30.652 --> 00:15:34.750\nthese are being pulled in when people\nconnect via those other protocols.\n\n306\n00:15:34.750 --> 00:15:38.689\nNow the reason I bring this up is\nthat with Outlook Anywhere and\n\n307\n00:15:38.689 --> 00:15:43.639\nwith these virtual directories, SSL\ncertificates can be a bit of a problem.\n\n308\n00:15:43.639 --> 00:15:47.360\nWhen you install your server,\nit's automatically configured.\n\n309\n00:15:47.360 --> 00:15:51.277\nOutlook Anywhere is already running,\nbut it's running with a self-signed\n\n310\n00:15:51.277 --> 00:15:54.363\ncertificate and so\nare all these virtual directories here.\n\n311\n00:15:54.363 --> 00:15:56.732\nThey're all using a self\nsigned certificate and\n\n312\n00:15:56.732 --> 00:15:59.457\nthat means that your clients\nprobably won't trust it.\n\n313\n00:15:59.457 --> 00:16:02.845\nAnd if your clients don't trust it\nThen they're gonna fail to connect.\n\n314\n00:16:02.845 --> 00:16:06.953\nSo one of the things that we'll need to do\nis to jump over to our certificates and\n\n315\n00:16:06.953 --> 00:16:09.270\nget a certificate that they do trust.\n\n316\n00:16:09.270 --> 00:16:12.400\nThis certificate right here,\nthe one labelled Microsoft Exchange,\n\n317\n00:16:12.400 --> 00:16:17.600\nsee down here it's listed for IMAP, POP,\nIIS, SMTP, it's listed for all of them.\n\n318\n00:16:17.600 --> 00:16:19.050\nAnd so in order for this to work for\n\n319\n00:16:19.050 --> 00:16:22.010\npeople to connect, they're gonna\nhave to use this certificate.\n\n320\n00:16:22.010 --> 00:16:23.530\nIf they don't trust it, it's gonna fail.\n\n321\n00:16:23.530 --> 00:16:25.480\nThat means Outlook anywhere is gonna fail.\n\n322\n00:16:25.480 --> 00:16:27.640\nIt means the Outlook web app is\ngonna throw an error, in fact,\n\n323\n00:16:27.640 --> 00:16:29.030\nI should see that error right now.\n\n324\n00:16:29.030 --> 00:16:33.585\nIf I go to a client, and\nI try to log into the Outlook web app.\n\n325\n00:16:33.585 --> 00:16:36.355\nOh shoot, no,\nI must have trusted the certificate, so\n\n326\n00:16:36.355 --> 00:16:37.355\nI'm not getting that error.\n\n327\n00:16:37.355 --> 00:16:40.655\nBut if they to were use the full name of\nthe server they should get the error.\n\n328\n00:16:40.655 --> 00:16:46.403\nSo, if I do lab-caso1.itprotv.net/owa.\n\n329\n00:16:46.403 --> 00:16:49.717\nNope, I've already trusted that name too.\n\n330\n00:16:49.717 --> 00:16:52.665\nSo [LAUGH] if you haven't trusted the name\nthough, you're gonna get an error.\n\n331\n00:16:52.665 --> 00:16:55.060\nIt's gonna show the certificate\nis not trusted.\n\n332\n00:16:55.060 --> 00:16:56.640\nSo when it comes to Outlook anywhere,\n\n333\n00:16:56.640 --> 00:16:59.930\none of the only things that we ever really\nneed to configure is that certificate.\n\n334\n00:16:59.930 --> 00:17:03.470\nAnd it's just a matter of coming here\ninto certificates and issuing a new one.\n\n335\n00:17:03.470 --> 00:17:05.950\nIf you have your own public\nkey infrastructure, and\n\n336\n00:17:05.950 --> 00:17:09.800\nyour clients all trust it, then you\ncan just issue your own certificate.\n\n337\n00:17:09.800 --> 00:17:12.870\nBut if you don't have a public key\ninfrastructure, then you need to generate\n\n338\n00:17:12.870 --> 00:17:16.820\na certificate request and\ntake that to a trusted provider.\n\n339\n00:17:16.820 --> 00:17:19.160\nSomebody like VeriSign, Thought, DigiCert.\n\n340\n00:17:19.160 --> 00:17:21.510\nI like DigiCert, but\nyou can go to whatever one.\n\n341\n00:17:21.510 --> 00:17:24.230\nSubmit your certificate,\nand pay them some money.\n\n342\n00:17:24.230 --> 00:17:27.703\n[LAUGH] They'll issue you a certificate,\nand the nice part is that all your clients\n\n343\n00:17:27.703 --> 00:17:30.336\nwill trust that certificate,\nand now that system will work.\n\n344\n00:17:30.336 --> 00:17:33.157\nSo that's really one of the only\nthings that we needed tweak about\n\n345\n00:17:33.157 --> 00:17:34.250\nOutlook anywhere.\n\n346\n00:17:34.250 --> 00:17:37.020\nAnd that basic RPC over HTTP.\n\n347\n00:17:37.020 --> 00:17:39.360\nSome of the other protocols\nare a little more involved though.\n\n348\n00:17:40.500 --> 00:17:41.790\nOWA's automatically configured.\n\n349\n00:17:41.790 --> 00:17:43.790\nWe saw it right here in\nthe virtual directories.\n\n350\n00:17:43.790 --> 00:17:46.070\nI can find that OWA directory right there,\n\n351\n00:17:46.070 --> 00:17:49.750\nand it's attached to labcas01,\ncuz that's my client access server.\n\n352\n00:17:49.750 --> 00:17:50.960\nIf you have five cas, or\n\n353\n00:17:50.960 --> 00:17:53.470\nfive client access servers,\nyou'll see them all right here.\n\n354\n00:17:53.470 --> 00:17:55.060\nAnd you can filter it down if you want.\n\n355\n00:17:55.060 --> 00:17:58.940\nI can say like,\njust show me The OWA virtual directories.\n\n356\n00:17:58.940 --> 00:18:02.340\nAnd I would just see OWA for\nthose different client access servers.\n\n357\n00:18:02.340 --> 00:18:03.500\nAnd we can go in and configure them.\n\n358\n00:18:03.500 --> 00:18:07.160\nAnd by configure them,\nthere's really not much we can do.\n\n359\n00:18:07.160 --> 00:18:10.290\nIf you edit it, you can change that URL.\n\n360\n00:18:10.290 --> 00:18:12.370\nBut it's not really the greatest\nidea to change that,\n\n361\n00:18:12.370 --> 00:18:15.320\nbecause clients expect it\nto be in a certain place.\n\n362\n00:18:15.320 --> 00:18:17.670\nBut you can also add an external URL,\nand that is handy.\n\n363\n00:18:17.670 --> 00:18:22.060\nYou might have one URL for internal users,\nand another URL for external users.\n\n364\n00:18:22.060 --> 00:18:24.140\nAnd so, we can set that right here.\n\n365\n00:18:24.140 --> 00:18:26.260\nYou can also tweak their authentication.\n\n366\n00:18:26.260 --> 00:18:29.920\nNow for OWA,\nit's doing forms based authentication.\n\n367\n00:18:29.920 --> 00:18:32.330\nWhen you go to the webpage you see that\n\n368\n00:18:32.330 --> 00:18:34.530\nspot where it asks user name and\na password.\n\n369\n00:18:34.530 --> 00:18:36.690\nBut you might want to\nautomate that process, right.\n\n370\n00:18:36.690 --> 00:18:39.950\nAutomate the login process and\ndo Windows on occasion.\n\n371\n00:18:39.950 --> 00:18:41.400\nAnd so,\nyou'll see those options are in here.\n\n372\n00:18:41.400 --> 00:18:44.530\nYou can turn on integrated Windows\nauthentication or other ones.\n\n373\n00:18:44.530 --> 00:18:46.660\nThat form is the default.\n\n374\n00:18:46.660 --> 00:18:47.250\nAll right?\n\n375\n00:18:47.250 --> 00:18:49.830\nAnd notice the form,\nhow it's asking for domain/user name.\n\n376\n00:18:49.830 --> 00:18:50.700\nYou can tweak that.\n\n377\n00:18:50.700 --> 00:18:54.960\nLike, I can say, just take a user name,\nAnd then specify the domain by default.\n\n378\n00:18:54.960 --> 00:18:57.420\nSo if you only have one domain,\nyou might as well do this.\n\n379\n00:18:57.420 --> 00:19:01.320\nYou can set the domain, and now users can\nlog in just by putting in their username\n\n380\n00:19:01.320 --> 00:19:04.160\ninstead of having to do\ndomain slash username.\n\n381\n00:19:04.160 --> 00:19:05.840\nIt's a little more intuitive.\n\n382\n00:19:05.840 --> 00:19:07.850\nOr you can do user principal name.\n\n383\n00:19:07.850 --> 00:19:11.110\nAnd that's cool because if your user\nprincipal name is your e-mail address,\n\n384\n00:19:11.110 --> 00:19:12.720\npeople log in with their e-mail address.\n\n385\n00:19:12.720 --> 00:19:19.493\nSo my UPN is Itprotv.net,\nthen I can log in as DPizet@itprotv.net.\n\n386\n00:19:19.493 --> 00:19:20.990\nAll right, so\n\n387\n00:19:20.990 --> 00:19:24.530\nthose are a couple of different options\nthat we can tweak on Outlook Web Access.\n\n388\n00:19:24.530 --> 00:19:26.650\nNow we've also got support for\nPOP3 and IMAP4,\n\n389\n00:19:26.650 --> 00:19:30.470\nand ideally we're not going to\nuse those cuz they're, well,\n\n390\n00:19:30.470 --> 00:19:34.480\nnone of it's feature rich as doing\nthe Outlook anywhere connectivity.\n\n391\n00:19:34.480 --> 00:19:36.200\nBut, there's a reason for\nhaving them, right?\n\n392\n00:19:36.200 --> 00:19:37.515\nCompatibility.\n\n393\n00:19:37.515 --> 00:19:40.850\nPOP3 is pretty much compatible\nwith everything out there, but\n\n394\n00:19:40.850 --> 00:19:41.970\nit's got it's limitations.\n\n395\n00:19:41.970 --> 00:19:45.430\nYou know, it downloads emails and\nremoves them from the server by default.\n\n396\n00:19:45.430 --> 00:19:47.500\nThat means that if your client\nhas a failed hard drive or\n\n397\n00:19:47.500 --> 00:19:48.410\nwhatever, they could lose data.\n\n398\n00:19:48.410 --> 00:19:49.590\nThat's kind of bad.\n\n399\n00:19:49.590 --> 00:19:52.500\nAlso, POP3 doesn't play nice if\nyou have more than one machine.\n\n400\n00:19:52.500 --> 00:19:55.140\nIf you check an email and\nmark it as read on one machine,\n\n401\n00:19:55.140 --> 00:19:58.810\nthe other machine doesn't see that, so\nthat's kind of a problem with POP3.\n\n402\n00:19:58.810 --> 00:20:01.930\nAnd finally, it doesn't support folders,\nand I know for me, that's a showstopper.\n\n403\n00:20:01.930 --> 00:20:03.730\nI gotta have folders in my mailbox.\n\n404\n00:20:03.730 --> 00:20:08.560\nIMAP4, on the other hand, supports folders\nso you can do nice organizations, and\n\n405\n00:20:08.560 --> 00:20:10.040\nit leaves the emails on the server.\n\n406\n00:20:10.040 --> 00:20:12.010\nYou download the headers\nuntil you read them.\n\n407\n00:20:12.010 --> 00:20:15.680\nAnd if you mark an email as read on one\nmachine, your other machines will see it.\n\n408\n00:20:15.680 --> 00:20:18.840\nAnd IMAP4's still widely used today,\nbecause there's a lot of\n\n409\n00:20:18.840 --> 00:20:23.490\nclients out there that don't necessarily\nsupport Exchange, Active Sync or whatever.\n\n410\n00:20:23.490 --> 00:20:26.210\nIMAP4 is supported by\ndarn near everything.\n\n411\n00:20:26.210 --> 00:20:28.270\nWell, in Microsoft exchange\nwe have IMAP4 support,\n\n412\n00:20:28.270 --> 00:20:31.780\nand we have POP3 support,\nit's just turned off by default.\n\n413\n00:20:31.780 --> 00:20:33.900\nSo if we want to use it,\nwe need to jump in there and make and\n\n414\n00:20:33.900 --> 00:20:36.220\nmake a couple little\nconfiguration changes.\n\n415\n00:20:36.220 --> 00:20:38.510\nFirst off, we need to jump in\nto make sure that POP3 and\n\n416\n00:20:38.510 --> 00:20:39.920\nIMAP4 are enabled for our users.\n\n417\n00:20:39.920 --> 00:20:41.400\nAnd we saw at the beginning\nof the episode.\n\n418\n00:20:41.400 --> 00:20:43.670\nIt's enabled by default, so\nwe don't have to mess with that.\n\n419\n00:20:43.670 --> 00:20:48.619\nBut the IMAP4 and POP3 services\nare actually stopped on the server, so\n\n420\n00:20:48.619 --> 00:20:50.010\nwe need to fix that.\n\n421\n00:20:50.010 --> 00:20:52.830\nSo let's take a look at my server here and\nwe'll get that squared away.\n\n422\n00:20:52.830 --> 00:20:56.050\nSo what I need to do is, I need to\njump over to my client access server.\n\n423\n00:20:56.050 --> 00:20:57.690\nHere's my client access server.\n\n424\n00:20:57.690 --> 00:21:02.380\nAnd I'm just gonna go into my server\nmanager and go to tools and services.\n\n425\n00:21:02.380 --> 00:21:06.160\nAnd I'm gonna hunt down\nthe Microsoft Exchange POP3 and\n\n426\n00:21:06.160 --> 00:21:10.030\nIMAP4 services, so they're right down here\nin the exchange block, and here they are.\n\n427\n00:21:10.030 --> 00:21:12.380\nAnd see how they're set to manually start?\n\n428\n00:21:12.380 --> 00:21:15.132\nSo they're not started automatically,\nso I need to change that.\n\n429\n00:21:15.132 --> 00:21:17.900\nI'm gonna come in here and\njust set that to automatic, so\n\n430\n00:21:17.900 --> 00:21:22.820\nthey will start up when my system starts,\nand then I'll start the services myself.\n\n431\n00:21:22.820 --> 00:21:26.200\nNow, in previous versions of Exchange,\nthat's all we had to do.\n\n432\n00:21:26.200 --> 00:21:28.730\nWe just had to start these\ntwo services and that was it.\n\n433\n00:21:28.730 --> 00:21:33.560\nBut in Exchange 2013, POP3 and IMAP4 have\nnow been broken into a front end and\n\n434\n00:21:33.560 --> 00:21:34.960\na back end service.\n\n435\n00:21:34.960 --> 00:21:39.620\nAnd what I'm turning on here is actually\njust a front end, or a proxy, for POP3 and\n\n436\n00:21:39.620 --> 00:21:40.220\nIMAP4.\n\n437\n00:21:40.220 --> 00:21:42.270\nSo you connect to the front end server,\nand\n\n438\n00:21:42.270 --> 00:21:44.410\nthen it proxies you to\nthe back end server.\n\n439\n00:21:44.410 --> 00:21:47.760\nAnd that means I need to\njump to my mailbox servers.\n\n440\n00:21:47.760 --> 00:21:52.190\nAny mailbox server where I have mailboxes\nthat I need POP3 or IMAP4 support for,\n\n441\n00:21:52.190 --> 00:21:56.170\nI need to jump to that mailbox server,\nand turn on those services there too.\n\n442\n00:21:56.170 --> 00:22:00.510\nSo here I am on my mailbox server, and\nI'll just go to tools and services.\n\n443\n00:22:00.510 --> 00:22:04.480\nAnd I'm gonna hunt down not the exact\nsame service, but pretty close.\n\n444\n00:22:04.480 --> 00:22:05.300\nIf we browse down and\n\n445\n00:22:05.300 --> 00:22:08.790\nfind it, you'll notice that\nthe name is a little bit different.\n\n446\n00:22:08.790 --> 00:22:14.760\nSee how it's\nMicrosoft Exchange IMAP4 Backend, right?\n\n447\n00:22:14.760 --> 00:22:19.470\nThat's that backend service for IMAP4,\nand then the POP3 one right there too.\n\n448\n00:22:19.470 --> 00:22:20.370\nIt's a different service.\n\n449\n00:22:20.370 --> 00:22:22.540\nThis is the backend, but\nyou've gotta enable this too, or\n\n450\n00:22:22.540 --> 00:22:24.000\nit's not going to work.\n\n451\n00:22:24.000 --> 00:22:26.050\nSo I'm gonna get in here\nthat one to automatic.\n\n452\n00:22:27.640 --> 00:22:28.990\nAnd I'll start it up.\n\n453\n00:22:28.990 --> 00:22:29.690\nThat's POP3.\n\n454\n00:22:29.690 --> 00:22:31.150\nThen I'll do the same thing for IMAP4.\n\n455\n00:22:31.150 --> 00:22:32.440\nI'm doing them both together.\n\n456\n00:22:32.440 --> 00:22:33.430\nYou don't have to.\n\n457\n00:22:33.430 --> 00:22:35.330\nMaybe I don't need POP3,\nI just want IMAP4,\n\n458\n00:22:35.330 --> 00:22:38.250\nthen you can just turn that one on and\nleave POP3 off.\n\n459\n00:22:38.250 --> 00:22:40.900\nBy all means,\nleave services off if you don't need them,\n\n460\n00:22:40.900 --> 00:22:42.460\nIt just increase your tack surface.\n\n461\n00:22:43.770 --> 00:22:46.780\nAll right, the other thing is when\nI open these, I'm opening them,\n\n462\n00:22:46.780 --> 00:22:47.890\nI'm starting the services.\n\n463\n00:22:47.890 --> 00:22:53.770\nBut I might need to adjust my\nfirewall to allow port 110 or 143 for\n\n464\n00:22:53.770 --> 00:22:59.250\nPOP3 and IMAP4 unsecure, or 993 and\n995 first are the secure versions.\n\n465\n00:22:59.250 --> 00:23:01.190\nI might need to allow those\nthrough my firewall too.\n\n466\n00:23:01.190 --> 00:23:03.030\nAll right,\nthey're already clear on my firewalls, so\n\n467\n00:23:03.030 --> 00:23:04.350\nI don't have to worry about that.\n\n468\n00:23:04.350 --> 00:23:07.050\nBut at this stage, I should be good to go.\n\n469\n00:23:07.050 --> 00:23:09.600\nPOP3 and IMAP4 are enabled for my users.\n\n470\n00:23:09.600 --> 00:23:11.740\nI've now started the services.\n\n471\n00:23:11.740 --> 00:23:13.690\nThere's some basic\nconfiguration you can do.\n\n472\n00:23:13.690 --> 00:23:14.630\nYou don't have to, right.\n\n473\n00:23:14.630 --> 00:23:17.840\nI can jump down here to my servers and\ntake LabCastle1.\n\n474\n00:23:17.840 --> 00:23:19.840\nThere's my client access server.\n\n475\n00:23:19.840 --> 00:23:24.980\nAnd if I edit that I've got some POP3 and\nIMAP4 settings in here that I can tweak.\n\n476\n00:23:24.980 --> 00:23:28.430\nI can adjust the settings, but\nthere's not much to adjust.\n\n477\n00:23:28.430 --> 00:23:31.590\nThe port number it's running on,\nwhat type of encryption you're using.\n\n478\n00:23:31.590 --> 00:23:34.370\nYou'll see mine's defaulting to TLS and\nports that we're bound to.\n\n479\n00:23:34.370 --> 00:23:36.430\nThose are the things that we can tweak.\n\n480\n00:23:36.430 --> 00:23:37.980\nThere's not a whole lot\nof reason to tweak those.\n\n481\n00:23:37.980 --> 00:23:40.420\nAnd if we go into more options,\nit's mostly time out values.\n\n482\n00:23:40.420 --> 00:23:41.500\nSo all this different time out and\n\n483\n00:23:41.500 --> 00:23:44.670\nmaximum connections settings,\nthings we don't normally need to adjust.\n\n484\n00:23:44.670 --> 00:23:47.290\nSo usually starting the services\nis enough to get it going.\n\n485\n00:23:47.290 --> 00:23:48.590\nAnd we're in business.\n\n486\n00:23:48.590 --> 00:23:49.830\nSo let's test it out.\n\n487\n00:23:49.830 --> 00:23:52.230\nI'm gonna jump over to my client.\n\n488\n00:23:52.230 --> 00:23:53.270\nWell, I'm on my client.\n\n489\n00:23:53.270 --> 00:23:55.520\nAnd I wanna get connected\nwith a third party client.\n\n490\n00:23:55.520 --> 00:23:57.820\nI'm gonna connect with\na program called Postbox.\n\n491\n00:23:57.820 --> 00:23:59.731\nThis is what I like to use.\n\n492\n00:23:59.731 --> 00:24:02.807\nAnd in Postbox,\nI can add in that Exchange account.\n\n493\n00:24:02.807 --> 00:24:05.889\nSo I'm just gonna go up here to Tools and\noptions.\n\n494\n00:24:05.889 --> 00:24:09.820\nAnd over to my accounts,\nI'm gonna add in a new mail account.\n\n495\n00:24:09.820 --> 00:24:12.960\nAnd when I add it, I'll punch in account,\nI'll log in as Jane Smith.\n\n496\n00:24:13.980 --> 00:24:15.860\nSo I'm gonna punch hers in.\n\n497\n00:24:15.860 --> 00:24:20.480\nNow, I know that auto discover\nis not gonna work for this.\n\n498\n00:24:20.480 --> 00:24:23.553\nAuto discover is always gonna try and\nset you up for Outlook anywhere, right?\n\n499\n00:24:23.553 --> 00:24:25.350\nAnd I need to login with POP3 or IMAP4.\n\n500\n00:24:25.350 --> 00:24:30.770\nSo, I'm gonna have to go into my\nmanual setup option and specify that.\n\n501\n00:24:30.770 --> 00:24:31.750\nBut fortunately, it's pretty easy.\n\n502\n00:24:31.750 --> 00:24:35.726\nI can say here, username is jsmith,\nit's actually jsmith@itprotv.net, but\n\n503\n00:24:35.726 --> 00:24:36.830\nI can leave it jsmith.\n\n504\n00:24:36.830 --> 00:24:37.490\nIt'll be fine.\n\n505\n00:24:37.490 --> 00:24:40.140\nIf you have more than one domain,\nyou might need to specify a domain there.\n\n506\n00:24:40.140 --> 00:24:42.110\nI've only got one domain so\nI can leave it off.\n\n507\n00:24:42.110 --> 00:24:48.450\nMy server is lab-cas01.itprotv.net,\nand then the protocol.\n\n508\n00:24:48.450 --> 00:24:51.702\nI wanna use IMAP, and\nthen you'll see that port is 143.\n\n509\n00:24:51.702 --> 00:24:54.534\nNow 143 is nonsecure by default.\n\n510\n00:24:54.534 --> 00:24:57.762\nIf you're using SSL,\nyou wanna use 993, but\n\n511\n00:24:57.762 --> 00:25:02.515\neven when you connect on 143,\nyou can tell it to use TLS, all right?\n\n512\n00:25:02.515 --> 00:25:06.635\nAnd if we tell it to use TLS, it's gonna\nconnect on 143, that's immediately gonna\n\n513\n00:25:06.635 --> 00:25:10.335\nsay hey I wanna switch to transport layer\nsecurity, give me your certificate.\n\n514\n00:25:10.335 --> 00:25:13.225\nAnd then you'll do a key exchange and\nyou'll switch to encrypted and so\n\n515\n00:25:13.225 --> 00:25:14.345\nthat's what I'm gonna do.\n\n516\n00:25:14.345 --> 00:25:17.915\nAnd on the exchange side,\nit's set that way too, if I\n\n517\n00:25:17.915 --> 00:25:23.420\ngo back to my server settings around here\nsomewhere, and I find my IMAP4 settings.\n\n518\n00:25:23.420 --> 00:25:26.360\nSee how it's set for\nlog on method secure TLS?\n\n519\n00:25:26.360 --> 00:25:30.240\nAnd for that 143 it says TLS or\nunencrypted.\n\n520\n00:25:30.240 --> 00:25:32.830\nIf somebody connects unencrypted,\nit's not gonna let them log in,\n\n521\n00:25:32.830 --> 00:25:35.600\nbecause we're requiring TLS for log in.\n\n522\n00:25:35.600 --> 00:25:36.160\nAll right?\nSo\n\n523\n00:25:36.160 --> 00:25:37.610\nthat's gonna give me a secure connection.\n\n524\n00:25:38.880 --> 00:25:42.360\nThen my outgoing server, I can punch\nthat in, and I'm using the same for\n\n525\n00:25:42.360 --> 00:25:43.030\nmy outgoing server.\n\n526\n00:25:43.030 --> 00:25:43.890\nYou might have a different one.\n\n527\n00:25:43.890 --> 00:25:47.664\nAnd then we can specify SMTP,\nand it's much the same way.\n\n528\n00:25:47.664 --> 00:25:52.569\nWe've got port 25 for unencrypted,\nport 587 for encrypted, and with port 25,\n\n529\n00:25:52.569 --> 00:25:54.160\nyou could switch to SSL, but\n\n530\n00:25:54.160 --> 00:25:58.560\nmost of the time we're gonna use start\nTLS, which requires us to be on 587.\n\n531\n00:25:58.560 --> 00:26:02.710\nSo, I'm setting that up to be able\nto connect, and I'll go ahead and\n\n532\n00:26:02.710 --> 00:26:03.870\nfinish that up.\n\n533\n00:26:03.870 --> 00:26:06.534\nNow, assuming it works,\nI should be able to hit, get mail,\n\n534\n00:26:06.534 --> 00:26:09.253\nit's gonna reach out to the server,\nand get my email, if I put\n\n535\n00:26:09.253 --> 00:26:12.780\nthe wrong password in, that'll kinda\nslow things down a bit, but we'll see.\n\n536\n00:26:12.780 --> 00:26:15.890\nThere we go, I connected,\nand I can read my email.\n\n537\n00:26:15.890 --> 00:26:19.760\nSo, now I'm connected via IMAP4,\nso Outlook anywhere.\n\n538\n00:26:19.760 --> 00:26:20.830\nMAPI, right?\n\n539\n00:26:20.830 --> 00:26:23.690\nThe Messaging Application Programming\nInterface, those connectivities,\n\n540\n00:26:23.690 --> 00:26:25.650\nthose are the ones that\nMicrosoft wants you to use.\n\n541\n00:26:25.650 --> 00:26:26.610\nThose are fully featured.\n\n542\n00:26:26.610 --> 00:26:30.188\nThey give you your calendar,\nyour tasks, your contacts,\n\n543\n00:26:30.188 --> 00:26:32.633\nall that other stuff and email, right?\n\n544\n00:26:32.633 --> 00:26:36.113\nBut if you're using third party clients,\nif you're using mobile phones, or\n\n545\n00:26:36.113 --> 00:26:39.740\nwhatever, that don't have full exchange\nfunctionality, you can use IMAP4.\n\n546\n00:26:39.740 --> 00:26:43.650\nYou'll get all your email,\nyour folders, you can organize things.\n\n547\n00:26:43.650 --> 00:26:45.321\nYou lose your contacts, right?\n\n548\n00:26:45.321 --> 00:26:49.347\nYou lose your task list or your calendar,\nbut you can get those other ways.\n\n549\n00:26:49.347 --> 00:26:51.447\nRight?\nThere's other ways like Web DAV for\n\n550\n00:26:51.447 --> 00:26:56.380\npulling down contacts and stuff you can\ndo, or LDAP for pulling down contacts.\n\n551\n00:26:56.380 --> 00:26:57.720\nBut IMAP4 won't do it.\n\n552\n00:26:57.720 --> 00:27:01.930\nSo, if we just need email connectivity,\nIMAP4 works out pretty well.\n\n553\n00:27:01.930 --> 00:27:05.600\nPOP3 is there also which is far less\npopular, we just need to turn it on.\n\n554\n00:27:06.720 --> 00:27:10.976\nAll right, so in this episode we've got a\nchance to see quite a few different email\n\n555\n00:27:10.976 --> 00:27:12.283\nconnectivity methods.\n\n556\n00:27:12.283 --> 00:27:17.020\nWe started with talking about OWA and\nOutlook anywhere, and MAPI, right?\n\n557\n00:27:17.020 --> 00:27:19.470\nThose are the ones that\nMicrosoft wants us to use.\n\n558\n00:27:19.470 --> 00:27:23.690\nThen we talked about POP3 and IMAP4 which\nare also out there which are available for\n\n559\n00:27:23.690 --> 00:27:25.380\ncompatibility, so we've got those.\n\n560\n00:27:25.380 --> 00:27:28.350\nAnd at the end of the day, it's up to you\nto pick the ones that you want, the ones\n\n561\n00:27:28.350 --> 00:27:31.020\nthat you need or the ones that you even\nchoose to support for your clients.\n\n562\n00:27:31.020 --> 00:27:33.290\nCuz you might not wanna\nsupport all of those right?\n\n563\n00:27:33.290 --> 00:27:34.940\nSo you just kinda pick and choose.\n\n564\n00:27:34.940 --> 00:27:36.930\nGet the ones you need and\nget them in place.\n\n565\n00:27:37.992 --> 00:27:39.760\nAll right, so that's about it for\nthis episode.\n\n566\n00:27:39.760 --> 00:27:42.230\nThat's Client Connectivity,\nI hope you guys enjoyed it.\n\n567\n00:27:42.230 --> 00:27:44.940\nWe've got more exchange\ncontent coming down the road.\n\n568\n00:27:44.940 --> 00:27:48.340\nBut for now, signing off for\nIT Pro Tv, I'm Don Pizette and\n\n569\n00:27:48.340 --> 00:27:49.773\nI'll see you next time.\n\n570\n00:27:49.773 --> 00:27:55.990\n[SOUND]\n\n",
          "vimeoId": "136729107"
        },
        {
          "description": "In this episode, Don explains the Autodiscover service in Exchange 2013. He demonstrates how Microsoft Outlook clients can automatically configure themselves to access an Exchange server. He also explains the steps needed to support clients outside of your local network.",
          "length": "1865",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autodiscover-081715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autodiscover-081715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autodiscover-081715-1-sm.jpg",
          "title": "Autodiscover",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.414\n[MUSIC].\n\n2\n00:00:10.414 --> 00:00:12.589\nAll right, good morning, good afternoon,\n\n3\n00:00:12.589 --> 00:00:15.751\nand good evening and welcome back\nto another episode of ITProTV.\n\n4\n00:00:15.751 --> 00:00:17.840\nI'm your host Don Pezet,\n\n5\n00:00:17.840 --> 00:00:21.230\nback again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:21.230 --> 00:00:24.540\nAnd in this episode we're gonna be\ntaking a look at the mysterious\n\n7\n00:00:24.540 --> 00:00:25.910\nAutodiscover service.\n\n8\n00:00:25.910 --> 00:00:30.050\nNow Autodiscover is a really neat\nfunction that's built into Exchange.\n\n9\n00:00:30.050 --> 00:00:32.200\nIt was actually introduced\nseveral versions ago, but\n\n10\n00:00:32.200 --> 00:00:35.470\nit's gotten a little better with each\nversion of Exchange that's come out, and\n\n11\n00:00:35.470 --> 00:00:39.130\nwhat Autodiscover does is\nit allows your clients\n\n12\n00:00:39.130 --> 00:00:43.800\nto be able to launch Microsoft Outlook and\nhave it automatically configure itself to\n\n13\n00:00:43.800 --> 00:00:45.890\nconnect to your server without\nyou having to do anything.\n\n14\n00:00:45.890 --> 00:00:49.450\nNow back in the day when you fired\nup somebody's new computer for\n\n15\n00:00:49.450 --> 00:00:51.060\nthe first time you'd have\nto fire up Outlook and\n\n16\n00:00:51.060 --> 00:00:55.100\nyou'd have to put in the server name,\nthe username, the password.\n\n17\n00:00:55.100 --> 00:00:57.270\nYou'd have to know the ports\nto connect on the server.\n\n18\n00:00:57.270 --> 00:01:00.710\nYou'd have to know a lot of information\nthat an average end user doesn't know.\n\n19\n00:01:00.710 --> 00:01:04.810\nSo just getting connected to e-mail in the\nfirst place usually required the help of,\n\n20\n00:01:04.810 --> 00:01:06.620\nwell, the support team, right?\n\n21\n00:01:06.620 --> 00:01:09.020\nYour desktop engineers,\nyour help desk techs, or\n\n22\n00:01:09.020 --> 00:01:13.060\nwhoever to get people connected, but with\nAutodiscover you don't need that anymore.\n\n23\n00:01:13.060 --> 00:01:17.460\nNow people just launch Outlook and\nit magically finds your server, finds your\n\n24\n00:01:17.460 --> 00:01:20.980\nsettings, gets everything configured in\nyour email, and you didn't have to have\n\n25\n00:01:20.980 --> 00:01:24.600\nany intimate knowledge of the background\ninfrastructure or anything like that.\n\n26\n00:01:24.600 --> 00:01:26.260\nAnd that's really, really useful.\n\n27\n00:01:26.260 --> 00:01:30.890\nAll right, now the reason I say\nAutodiscover is mysterious is that for\n\n28\n00:01:30.890 --> 00:01:32.510\nmost of us we don't have to configure it.\n\n29\n00:01:32.510 --> 00:01:33.570\nIt just works.\n\n30\n00:01:33.570 --> 00:01:38.345\nYou install Exchange, and\nall of a sudden your system auto detects.\n\n31\n00:01:38.345 --> 00:01:41.280\nAnd that's true for\nyour local area network.\n\n32\n00:01:41.280 --> 00:01:42.905\nFor machines on your own network,\n\n33\n00:01:42.905 --> 00:01:44.300\nAutodiscover will work\nright out of the box.\n\n34\n00:01:44.300 --> 00:01:46.430\nYou really don't have to tweak anything.\n\n35\n00:01:46.430 --> 00:01:50.520\nBut if you've got users that are\nconnecting from home, from outside of your\n\n36\n00:01:50.520 --> 00:01:53.850\nnetwork, if they're out their on the WAM\non the Internet somewhere, that's not so\n\n37\n00:01:53.850 --> 00:01:54.615\nautomatic anymore.\n\n38\n00:01:54.615 --> 00:01:55.820\nIt's not so magic.\n\n39\n00:01:55.820 --> 00:01:57.820\nNow we have to get a bit involved.\n\n40\n00:01:57.820 --> 00:02:00.740\nAnd so in this episode we're gonna\ntake a look at how AutoDiscover works.\n\n41\n00:02:00.740 --> 00:02:03.020\nHow the nice,\neasy automatic stuff works, and\n\n42\n00:02:03.020 --> 00:02:07.040\nthen the tweaks that we need to do to get\nit working for our external users also so\n\n43\n00:02:07.040 --> 00:02:10.590\nwe can have full Autodiscover\nfunctionality everywhere out there.\n\n44\n00:02:10.590 --> 00:02:13.220\nSo that's basically what we're\ngonna be taking a look at.\n\n45\n00:02:13.220 --> 00:02:14.710\nLet's dive in and see this.\n\n46\n00:02:14.710 --> 00:02:18.750\nWell first off I want to give you guys\nan example of Autodiscover working\n\n47\n00:02:18.750 --> 00:02:19.970\njust out of the box, right?\n\n48\n00:02:19.970 --> 00:02:22.770\nSo here on my computer I've got my\nexchange environment pulled up and\n\n49\n00:02:22.770 --> 00:02:24.410\nthis is a pretty basic environment.\n\n50\n00:02:24.410 --> 00:02:25.870\nI've got two servers.\n\n51\n00:02:25.870 --> 00:02:28.832\nI've got one client access server and\none mailbox server.\n\n52\n00:02:28.832 --> 00:02:33.140\nNow Autodiscover, as a function,\nruns from your client access servers.\n\n53\n00:02:33.140 --> 00:02:36.310\nSo every client access\nserver that you build up\n\n54\n00:02:36.310 --> 00:02:38.840\nis technically an Autodiscover server,\nright?\n\n55\n00:02:38.840 --> 00:02:43.340\nWhat they do is they create what's called\nan SCP, or a service control point, and\n\n56\n00:02:43.340 --> 00:02:46.540\nthat service control, oh sorry,\nservice connection point, there we go.\n\n57\n00:02:46.540 --> 00:02:49.890\nThat service connection point,\nthat's where your computers boot up,\n\n58\n00:02:49.890 --> 00:02:52.040\nthey look for a service and\nwhere they can connect to it, and\n\n59\n00:02:52.040 --> 00:02:54.080\nthe service connection point is that.\n\n60\n00:02:54.080 --> 00:02:58.520\nEvery client access server you have\nis a valid SCP for Autodiscover.\n\n61\n00:02:58.520 --> 00:03:00.060\nWe might just have to tweak that a bit.\n\n62\n00:03:00.060 --> 00:03:04.170\nThat doesn't mean you use all of your\nclient access servers for this, especially\n\n63\n00:03:04.170 --> 00:03:07.210\nif it's external users that means this\nis a server that might be exposed to\n\n64\n00:03:07.210 --> 00:03:10.490\nthe internet, and you typically don't\nwant to do that with too many servers.\n\n65\n00:03:10.490 --> 00:03:14.270\nSo you may only have one or two client\naccess servers that you use as an SCP,\n\n66\n00:03:14.270 --> 00:03:16.622\nand the other ones just sit there and\nidle.\n\n67\n00:03:16.622 --> 00:03:17.530\nAll right?\n\n68\n00:03:17.530 --> 00:03:20.125\nBut basically this client access\nserver right here is already\n\n69\n00:03:20.125 --> 00:03:24.545\nacting as an Autodiscover and\nI know that because if I take a user and\n\n70\n00:03:24.545 --> 00:03:26.395\nlog into a machine for the first time.\n\n71\n00:03:26.395 --> 00:03:29.405\nHere, I'll take this machine and\nlet me switch users.\n\n72\n00:03:29.405 --> 00:03:31.725\nI'm gonna log in as a user I\nhaven't logged in as before.\n\n73\n00:03:31.725 --> 00:03:34.855\nI'm gonna log in as John Doe, and so\n\n74\n00:03:34.855 --> 00:03:39.650\nI've got this Jdoe account and\nI'll get logged in as him.\n\n75\n00:03:39.650 --> 00:03:42.520\nAnd he's never logged in\non this computer before, so\n\n76\n00:03:42.520 --> 00:03:44.390\nWindows is gonna create\nan all new profile.\n\n77\n00:03:44.390 --> 00:03:46.480\nSo see how it says preparing\nyour desktop right there?\n\n78\n00:03:46.480 --> 00:03:48.210\nHe's getting an all new profile.\n\n79\n00:03:48.210 --> 00:03:52.450\nSo when I launch Outlook, it'll be the\nfirst time this user has launched Outlook,\n\n80\n00:03:52.450 --> 00:03:55.000\nand it's gonna create a new\nprofile in Outlook and\n\n81\n00:03:55.000 --> 00:03:57.920\nthen it's gonna ask to find his server.\n\n82\n00:03:57.920 --> 00:04:00.840\nNow in the old day, he'd need to break\nout his notes that says all right,\n\n83\n00:04:00.840 --> 00:04:04.300\nhere's the server name, here's the port,\nhere's this, here's that, but\n\n84\n00:04:04.300 --> 00:04:08.360\nwith Autodiscover,\nthat system happens much more easily.\n\n85\n00:04:08.360 --> 00:04:12.080\nSo I'm going to fire up outlook, and its\ngoing to ask some really simple questions.\n\n86\n00:04:12.080 --> 00:04:16.200\nIts going to ask what's your name and\nwhat's your e-mail address, all right?\n\n87\n00:04:16.200 --> 00:04:17.672\nSo as I move forward on my wizard here,\n\n88\n00:04:17.672 --> 00:04:19.940\nit's gonna ask if I want to\nset up an e-mail account, and\n\n89\n00:04:19.940 --> 00:04:22.540\nthen it's gonna ask for\nmy name and my e-mail address.\n\n90\n00:04:22.540 --> 00:04:23.980\nAnd do you see what it just did?\n\n91\n00:04:23.980 --> 00:04:26.400\nSee how it auto filled that in?\n\n92\n00:04:26.400 --> 00:04:30.030\nOn you local area network, your computer's\njoined to the Active Directory.\n\n93\n00:04:30.030 --> 00:04:32.330\nRight?\nThis computer is joined to my domain.\n\n94\n00:04:32.330 --> 00:04:35.210\nWell, where's all my exchange\nconfiguration stored?\n\n95\n00:04:35.210 --> 00:04:37.000\nIt's stored in the Active Directory also.\n\n96\n00:04:37.000 --> 00:04:39.320\nSo, your computer can look right\nat the active directory and\n\n97\n00:04:39.320 --> 00:04:42.480\nsee that you have a mailbox to\nsee what your e-mail address is.\n\n98\n00:04:42.480 --> 00:04:47.350\nSo, John doesn't even have to type that\ndata in, it fills it in for him, and\n\n99\n00:04:47.350 --> 00:04:50.640\nthen when he hits next, it's gonna reach\nout to the server and there it goes\n\n100\n00:04:50.640 --> 00:04:55.720\nestablishing a network connection,\nsearching for jdoe@itprotv.net settings.\n\n101\n00:04:55.720 --> 00:04:57.150\nNow it's doing Autodiscover.\n\n102\n00:04:57.150 --> 00:04:59.910\nIt's trying to find those settings and\n\n103\n00:04:59.910 --> 00:05:03.990\nonce it finds them, then it'll log in and\nit'll be in his email.\n\n104\n00:05:03.990 --> 00:05:06.780\nNow normally, it finishes already.\n\n105\n00:05:06.780 --> 00:05:09.880\nIt'd be done and\nwe'd be into Outlook already.\n\n106\n00:05:09.880 --> 00:05:13.440\nBut there's a little problem that you're\ngoing to have with a default install of\n\n107\n00:05:13.440 --> 00:05:16.900\nexchanges going on right now, and\nit has to do with certificates.\n\n108\n00:05:16.900 --> 00:05:19.820\nIn order for\nAutodiscover to properly work,\n\n109\n00:05:19.820 --> 00:05:23.150\nwe have to have a valid\ncertificate on our server.\n\n110\n00:05:23.150 --> 00:05:25.620\nNow when you install exchange, when\nyou install that client access server,\n\n111\n00:05:25.620 --> 00:05:27.710\nit creates its own self sign certificate.\n\n112\n00:05:27.710 --> 00:05:30.360\nNow do I trust that certificate?\n\n113\n00:05:30.360 --> 00:05:31.410\nNot by default.\n\n114\n00:05:31.410 --> 00:05:34.240\nSo the reason this is stalling\nright here is that I'm waiting for\n\n115\n00:05:34.240 --> 00:05:36.270\nthat certificate and\neventually I'll get a little pop-up and\n\n116\n00:05:36.270 --> 00:05:39.930\nit'll say do you wanna trust this and\nI'll have that choice, right?\n\n117\n00:05:39.930 --> 00:05:43.630\nBut what I can do to kinda usher\nthat a long is one of two things.\n\n118\n00:05:43.630 --> 00:05:48.921\nOne, I can go out and buy a legitimate\ncertificate from Digiserv,\n\n119\n00:05:48.921 --> 00:05:51.170\nVerisign, Thought,\nsomebody like that, right.\n\n120\n00:05:51.170 --> 00:05:54.290\nYou go out and you buy a certificate\nfrom one of those big public vendors.\n\n121\n00:05:54.290 --> 00:05:57.940\nYou put that on your server and now your\nclients automatically trust it, right.\n\n122\n00:05:57.940 --> 00:06:01.110\nThat works for small businesses,\neven some medium businesses.\n\n123\n00:06:01.110 --> 00:06:02.230\nBut for large organizations,\n\n124\n00:06:02.230 --> 00:06:04.220\nyou probably don't wanna be\nbuying tons of certificates.\n\n125\n00:06:04.220 --> 00:06:08.190\nSo, you might choose to build your\nown certificate infrastructure.\n\n126\n00:06:08.190 --> 00:06:11.070\nIf you set up your own PKI,\nyour own public key infrastructure,\n\n127\n00:06:11.070 --> 00:06:13.410\nyou can generate as many certs as you\nneed and you don't have to pay for them.\n\n128\n00:06:13.410 --> 00:06:14.420\nThey're your own, and\n\n129\n00:06:14.420 --> 00:06:17.710\nmachines that are joined to your\ndomain will automatically trust those.\n\n130\n00:06:17.710 --> 00:06:22.550\nBut mine's not going to trust it\nbecause I'm joined to a domain,\n\n131\n00:06:22.550 --> 00:06:23.990\nbut I don't have a true\npublic key infrastructure.\n\n132\n00:06:23.990 --> 00:06:26.620\nI'm using Exchange's built in cert.\n\n133\n00:06:26.620 --> 00:06:28.160\nSo I'm gonna cancel this.\n\n134\n00:06:28.160 --> 00:06:30.400\nSo we'll just cancel right\nout of that wizard, and\n\n135\n00:06:30.400 --> 00:06:33.770\nI want to trust the certificate\nof my client access server.\n\n136\n00:06:33.770 --> 00:06:38.910\nSo, to do that quickly and easily, you can\njust fire it up and just browse to OWA.\n\n137\n00:06:38.910 --> 00:06:44.400\nAnd when I browse to the server I'm gonna\nsee that it is a secure connection,\n\n138\n00:06:44.400 --> 00:06:49.870\nright, so when I browse to\nlab-cas01/owa it's a secure connection,\n\n139\n00:06:49.870 --> 00:06:51.630\nbut see the warning that I get?\n\n140\n00:06:51.630 --> 00:06:54.710\nIt's telling me that certificate's not\ntrusted, and so I can go ahead and\n\n141\n00:06:54.710 --> 00:06:58.570\ncontinue, but now I'm continuing\nwith an untrusted certificate.\n\n142\n00:06:58.570 --> 00:06:59.940\nAnd I want to trust it.\n\n143\n00:06:59.940 --> 00:07:02.410\nSo, if I want to trust it,\nI can just click on that, and\n\n144\n00:07:02.410 --> 00:07:05.380\nI can choose view certificates,\nand here's the certificate.\n\n145\n00:07:05.380 --> 00:07:08.890\nAnd what I want to do, is I basically\nwant to add this to my trusted route.\n\n146\n00:07:08.890 --> 00:07:10.930\nAnd I am doing this because\nI trust this server,\n\n147\n00:07:10.930 --> 00:07:14.220\nI know it, but, in a real production\nenvironment, I'd probably go out and\n\n148\n00:07:14.220 --> 00:07:17.170\nbuy a certificate and replace this, and\nI'll show you how to do that in a moment.\n\n149\n00:07:17.170 --> 00:07:19.980\nBut, for right now, I'm gonna go ahead and\ninstall the certificate.\n\n150\n00:07:19.980 --> 00:07:23.460\nAnd I'm going to place that\ninto my trusted routes.\n\n151\n00:07:23.460 --> 00:07:24.750\nSo I'm just going to throw\nit right in there so\n\n152\n00:07:24.750 --> 00:07:28.230\nthat I'll trust that certificate,\nand I'll have it.\n\n153\n00:07:28.230 --> 00:07:30.410\nThere's my confirmation that it's loaded.\n\n154\n00:07:30.410 --> 00:07:31.270\nAll right.\n\n155\n00:07:31.270 --> 00:07:37.070\nAnd now if I close that window down,\nlet me just take this,\n\n156\n00:07:37.070 --> 00:07:40.510\nand we'll close out of it, and\nI'm gonna browse to it again.\n\n157\n00:07:40.510 --> 00:07:43.160\nAnd this time when I browse\nto it what we should see\n\n158\n00:07:45.470 --> 00:07:48.030\nis that I didn't get a certificate prompt,\nright?\n\n159\n00:07:48.030 --> 00:07:50.200\nIt's trusting the certificate this time.\n\n160\n00:07:50.200 --> 00:07:51.663\nAnd if I fire up my Outlook,\n\n161\n00:07:51.663 --> 00:07:56.073\nnow when it goes to autoconfigure it's\ngonna work a lot better for me, all right?\n\n162\n00:07:56.073 --> 00:07:58.945\nSo one of the key steps to getting\nAutodiscover to work properly is having\n\n163\n00:07:58.945 --> 00:08:02.160\nyour certificates squared away, so we're\ngonna have to get that taken care of.\n\n164\n00:08:02.160 --> 00:08:05.366\nBut now it's gonna find his settings,\nand it's gonna reach out, and\n\n165\n00:08:05.366 --> 00:08:08.170\nit's gonna try and\ndiscover that from the server.\n\n166\n00:08:08.170 --> 00:08:11.190\nNow the discovery process,\nit actually goes through a couple of\n\n167\n00:08:11.190 --> 00:08:13.780\ndifferent steps to try and\nfind the server.\n\n168\n00:08:13.780 --> 00:08:17.220\nStep one, well it looks to\nthe active directory, right?\n\n169\n00:08:17.220 --> 00:08:19.670\nAnd so mine just did that look to\nthe active directory, found my settings,\n\n170\n00:08:19.670 --> 00:08:22.050\nthat's what's gonna happen\non your local area network.\n\n171\n00:08:22.050 --> 00:08:26.670\nBut if you're not on a local area network,\nstep two, it looks to DNS.\n\n172\n00:08:26.670 --> 00:08:29.440\nIt looks to DNS to find\nan auto discover record to\n\n173\n00:08:29.440 --> 00:08:31.590\ntell it where to find the server.\n\n174\n00:08:31.590 --> 00:08:33.650\nNow mine didn't do that cuz\nI'm on a local network, but\n\n175\n00:08:33.650 --> 00:08:36.530\nif I'm on an external server\nit's going to have to do that.\n\n176\n00:08:36.530 --> 00:08:39.340\nSo here I see it,\nit just moved through this and it's fine.\n\n177\n00:08:39.340 --> 00:08:40.730\nThere is a step three.\n\n178\n00:08:40.730 --> 00:08:43.600\nSo, first it does look\nto the active directory.\n\n179\n00:08:43.600 --> 00:08:45.570\nSecond, it looks to DNS.\n\n180\n00:08:45.570 --> 00:08:49.650\nThird, it looks for\na special SRV record in DNS.\n\n181\n00:08:49.650 --> 00:08:53.660\nNow that's separate from step two because\nnot every server has SRV records,\n\n182\n00:08:53.660 --> 00:08:56.770\nthey're not all supported, so\nthat's kind of like a last ditch effort\n\n183\n00:08:56.770 --> 00:08:59.570\nbefore it finally gives up and\nauto discover fails.\n\n184\n00:08:59.570 --> 00:09:02.910\nIf auto discover fails, then users get\ntheir entry field where they can punch in\n\n185\n00:09:02.910 --> 00:09:05.770\nthe server name, their username,\nthey can punch in all that data and\n\n186\n00:09:05.770 --> 00:09:09.460\ndo it manually, but\nthey'd have to know that data.\n\n187\n00:09:09.460 --> 00:09:10.840\nSo here, it's automatically configured.\n\n188\n00:09:10.840 --> 00:09:13.410\nIf I finish that,\nnow Outlook is gonna launch.\n\n189\n00:09:13.410 --> 00:09:17.659\nAnd if I'm John Doe and I just sat down\nhere, I didn't have to give it a username.\n\n190\n00:09:17.659 --> 00:09:19.750\nI didn't have to give it an email address,\nit filled that in.\n\n191\n00:09:19.750 --> 00:09:21.793\nI didn't have to tell the server,\nit found that.\n\n192\n00:09:21.793 --> 00:09:26.140\nAnd my email is configured and here I am.\n\n193\n00:09:26.140 --> 00:09:27.870\nI'm in it, and I'm working, right?\n\n194\n00:09:27.870 --> 00:09:31.530\nThe end-user didn't have to\nknow any information at all.\n\n195\n00:09:31.530 --> 00:09:35.130\nAll they had to know was\nto launch Outlook, right?\n\n196\n00:09:35.130 --> 00:09:36.430\nThat's what auto discover does.\n\n197\n00:09:36.430 --> 00:09:38.560\nThat's the real power of it, all right?\n\n198\n00:09:38.560 --> 00:09:41.110\nBut as you saw with the certificate,\nthere is a little bit of work\n\n199\n00:09:41.110 --> 00:09:44.130\nwe as administrators have to do\nto get this working properly and\n\n200\n00:09:44.130 --> 00:09:45.480\nto get it running smoothly.\n\n201\n00:09:45.480 --> 00:09:48.390\nSo here, I'm in my mailbox and\nthat's great, all right?\n\n202\n00:09:48.390 --> 00:09:52.920\nWell, let's take a look at a few\nthings we can do to kind of get this\n\n203\n00:09:52.920 --> 00:09:54.730\nrunning a little more smoothly, all right?\n\n204\n00:09:54.730 --> 00:09:56.020\nI mentioned certificates.\n\n205\n00:09:56.020 --> 00:09:59.890\nCertificates are probably the big part,\nbecause when you have somebody connecting\n\n206\n00:09:59.890 --> 00:10:05.200\ninternally, they're likely connecting with\nan internal name like lab-cas01, right?\n\n207\n00:10:05.200 --> 00:10:07.060\nThat's the internal server name.\n\n208\n00:10:07.060 --> 00:10:10.601\nBut if they're external, they're\nconnecting with a different name, right?\n\n209\n00:10:10.601 --> 00:10:12.469\nAnd so now you're gonna have\nyour certificate fail because\n\n210\n00:10:12.469 --> 00:10:13.224\nof the different name.\n\n211\n00:10:13.224 --> 00:10:14.663\nSo that's something we're\ngonna have to deal with.\n\n212\n00:10:14.663 --> 00:10:17.123\nAnd then just where the certificate\nis issued from in the first place.\n\n213\n00:10:17.123 --> 00:10:21.141\nSo, at a minimum,\nwe're gonna need to fix our certificate.\n\n214\n00:10:21.141 --> 00:10:24.103\nAt a maximum though, we're gonna need to\ndo some DNS work to kind of get things\n\n215\n00:10:24.103 --> 00:10:26.121\nsquared away and\nget everything working properly.\n\n216\n00:10:26.121 --> 00:10:29.117\nSo let's kind of jump through the hoops\nthere and see that in action.\n\n217\n00:10:29.117 --> 00:10:33.704\nAll right, I'm gonna jump back\nover to my admin account and\n\n218\n00:10:33.704 --> 00:10:38.790\nI'm gonna go into my Exchange\nadministration center.\n\n219\n00:10:38.790 --> 00:10:41.675\nAnd in there we'll be able\nto tweak our certificates\n\n220\n00:10:41.675 --> 00:10:44.085\nto get everything set the way\nthat we need it, all right?\n\n221\n00:10:44.085 --> 00:10:46.925\nWhen you go into the EAC,\nif you look down the left side,\n\n222\n00:10:46.925 --> 00:10:49.305\nyou'll see a bunch of stuff,\nlike our servers.\n\n223\n00:10:49.305 --> 00:10:53.220\nAnd then in the server section,\nyou'll see certificates, all right?\n\n224\n00:10:53.220 --> 00:10:55.870\nHere's where it keeps your certificates,\nand when we view it this way we can\n\n225\n00:10:55.870 --> 00:10:58.970\nactually see the certificates for\nall of our Exchange servers.\n\n226\n00:10:58.970 --> 00:11:01.300\nAnd every Exchange server's important, but\n\n227\n00:11:01.300 --> 00:11:03.790\nthe client access server's\nthe one I'm worried about.\n\n228\n00:11:03.790 --> 00:11:06.760\nSo what you'll wanna do is hit this\ndrop-down box and make sure you choose\n\n229\n00:11:06.760 --> 00:11:09.570\nthe client access server that you want\nyour clients to be connecting to,\n\n230\n00:11:09.570 --> 00:11:11.150\nall right?\n\n231\n00:11:11.150 --> 00:11:13.732\nFrom here, you can see all\nthe certificates that are attached, and\n\n232\n00:11:13.732 --> 00:11:15.461\nyou're gonna see more than one, all right?\n\n233\n00:11:15.461 --> 00:11:16.337\nFor example,\n\n234\n00:11:16.337 --> 00:11:20.644\nwe got this Microsoft Exchange\nServer Authentication Certificate,\n\n235\n00:11:20.644 --> 00:11:22.765\nMicrosoft Exchange, and WMSVC.\n\n236\n00:11:22.765 --> 00:11:23.843\nAll right, what are these?\n\n237\n00:11:23.843 --> 00:11:27.048\nWell the first one, that's used for\nExchange server authentication.\n\n238\n00:11:27.048 --> 00:11:29.377\nWhen two Exchange servers\ntalk to each other,\n\n239\n00:11:29.377 --> 00:11:33.746\nlike when they're doing internal send and\nreceive connectors, they authenticate.\n\n240\n00:11:33.746 --> 00:11:35.523\nAnd they authenticate\nusing these certificates.\n\n241\n00:11:35.523 --> 00:11:38.366\nAnd so that's what that one is for and\nwe typically don't mess with that one,\n\n242\n00:11:38.366 --> 00:11:39.482\nyou normally leave it alone.\n\n243\n00:11:39.482 --> 00:11:41.797\nThe second one, Microsoft Exchange,\n\n244\n00:11:41.797 --> 00:11:46.846\nthat's the one that Outlook WebApp is\nusing, that's the one that POP3 and IMAP4,\n\n245\n00:11:46.846 --> 00:11:51.641\nthat's the one all of our other services\nare using, that's the important one.\n\n246\n00:11:51.641 --> 00:11:54.571\nAnd then, the last one is\nthe Windows ManagementSservice, so\n\n247\n00:11:54.571 --> 00:11:57.834\nwhen you're opening a remote\nPowerShell session it encrypts that and\n\n248\n00:11:57.834 --> 00:12:00.450\nuses a certificate,\nthat's the one it uses.\n\n249\n00:12:00.450 --> 00:12:03.750\nNow, if you can't remember which is which,\nthey make it kind of easy for you,\n\n250\n00:12:03.750 --> 00:12:08.580\ncuz you'll see here on the right side\nwhere it's got assigned to services.\n\n251\n00:12:08.580 --> 00:12:11.180\nIt's telling you what services that\ncertificate is being used for, and\n\n252\n00:12:11.180 --> 00:12:13.420\nI can see this one's not being used for\nanything, right?\n\n253\n00:12:13.420 --> 00:12:14.170\nThat's not true.\n\n254\n00:12:14.170 --> 00:12:17.790\nIt's not being used for anything in\nExchange, it's being used in PowerShell.\n\n255\n00:12:17.790 --> 00:12:21.470\nSo we don't see PowerShell settings here,\nwe just see Exchange settings here.\n\n256\n00:12:21.470 --> 00:12:25.759\nAnd if go up to Server Authentication,\nI can see assigned to services SMTP,\n\n257\n00:12:25.759 --> 00:12:29.578\nbecause the send and\nreceive connectors in-between each server,\n\n258\n00:12:29.578 --> 00:12:33.074\nwhat the HUB transport rolls are doing,\nis all done via SMTP.\n\n259\n00:12:33.074 --> 00:12:37.968\nBut if I look at Microsoft Exchange,\nthis one says, IMAP, POP, IIS,\n\n260\n00:12:37.968 --> 00:12:40.758\nand SMTP, it says everything, right?\n\n261\n00:12:40.758 --> 00:12:42.152\nThis is the important certificate.\n\n262\n00:12:42.152 --> 00:12:44.620\nSo it's real easy to spot\nthe one that's truly important.\n\n263\n00:12:44.620 --> 00:12:47.450\nAnd IIS,\nthat's the Internet information server.\n\n264\n00:12:47.450 --> 00:12:51.160\nThat's the web server built into Windows\nServer 2012, so that's the one that's\n\n265\n00:12:51.160 --> 00:12:56.260\ndoing Outlook WebApp, and auto discover\nis using the web service also.\n\n266\n00:12:56.260 --> 00:12:57.720\nSo this is the important certificate.\n\n267\n00:12:57.720 --> 00:12:59.880\nThis is the one that I care about.\n\n268\n00:12:59.880 --> 00:13:03.770\nAnd if you look at it you'll see this\nis a self-signed certificate, and\n\n269\n00:13:03.770 --> 00:13:07.530\nthe issuer is my server, lab-cass01.\n\n270\n00:13:07.530 --> 00:13:10.045\nWhen you install your client access\nserver, you'll see the same thing, right?\n\n271\n00:13:10.045 --> 00:13:12.330\nWell, it'll be your server name,\nthat'll be different, but\n\n272\n00:13:12.330 --> 00:13:14.110\nyou'll have that self-signed certificate.\n\n273\n00:13:14.110 --> 00:13:16.380\nAnd so the certificate error\nthat I saw a moment ago?\n\n274\n00:13:16.380 --> 00:13:19.350\nWell, it wasn't so much an error,\njust the things took too long.\n\n275\n00:13:19.350 --> 00:13:23.120\nThat error, that's caused by\nthe self-signed certificate.\n\n276\n00:13:23.120 --> 00:13:24.950\nSo, you got two choices.\n\n277\n00:13:24.950 --> 00:13:27.470\nOne, trust the self-signed certificate.\n\n278\n00:13:27.470 --> 00:13:29.030\nThat's what I did a second ago.\n\n279\n00:13:29.030 --> 00:13:33.610\nOr two, issue a new certificate and\nuse it instead, right?\n\n280\n00:13:33.610 --> 00:13:36.250\nAnd you can see we've got a nice little\nplus sign up here you can hit to issue\n\n281\n00:13:36.250 --> 00:13:37.540\na new certificate.\n\n282\n00:13:37.540 --> 00:13:40.895\nNow I could create a new\nself signed certificate, but\n\n283\n00:13:40.895 --> 00:13:42.650\nthere's not really a whole\nlot of point in that.\n\n284\n00:13:42.650 --> 00:13:45.410\nMaybe you just don't trust\nthe certificate that Microsoft issued so\n\n285\n00:13:45.410 --> 00:13:46.740\nyou wanna issue your own.\n\n286\n00:13:46.740 --> 00:13:49.710\nMaybe the one that was there got\ncompromised and so you wanna do a new one.\n\n287\n00:13:49.710 --> 00:13:53.507\nThose would be reasons you might do\na self-signed cert, but otherwise you're\n\n288\n00:13:53.507 --> 00:13:57.092\ngonna create a request for a certificate\nfrom a certification authority.\n\n289\n00:13:57.092 --> 00:14:01.053\nNow that CA,\nit might be a public one, right?\n\n290\n00:14:01.053 --> 00:14:03.094\nI mentioned like DigiCert or\nVerisign, those guys.\n\n291\n00:14:03.094 --> 00:14:05.870\nYou can go and buy a certificate\nfrom them, it works great and\n\n292\n00:14:05.870 --> 00:14:09.465\nit has the added benefit of knowing that\nall of your clients are gonna trust it,\n\n293\n00:14:09.465 --> 00:14:11.939\nwhether they're joined your domain or\nnot, right?\n\n294\n00:14:11.939 --> 00:14:15.133\nOr, this CA could be one of your own,\nright?\n\n295\n00:14:15.133 --> 00:14:19.229\nYou could take any domain controller and\nadd the active directory certificates\n\n296\n00:14:19.229 --> 00:14:22.296\nservices to it and\nturn it into a certification authority.\n\n297\n00:14:22.296 --> 00:14:24.540\nYou could start issuing your own certs.\n\n298\n00:14:24.540 --> 00:14:27.310\nOn a positive side you could issue\ncerts without paying for them, right?\n\n299\n00:14:27.310 --> 00:14:28.450\nIt's your own.\n\n300\n00:14:28.450 --> 00:14:33.170\nOn a negative side, only computers\njoined to your domain will trust it.\n\n301\n00:14:33.170 --> 00:14:36.410\nComputers that are not joined to your\ndomain aren't going to trust it and\n\n302\n00:14:36.410 --> 00:14:41.550\nso you'll have to go to them and manually\nmake them trust your route authority.\n\n303\n00:14:41.550 --> 00:14:44.118\nAnd so, there's a little bit\nof extra work to do there.\n\n304\n00:14:44.118 --> 00:14:45.478\nBut normally, we're gonna buy one.\n\n305\n00:14:45.478 --> 00:14:47.793\nAnd the reason I say we're\ngonna buy one is because,\n\n306\n00:14:47.793 --> 00:14:49.483\nwhose gonna connect to your Outlook?\n\n307\n00:14:49.483 --> 00:14:52.141\nWell, you might have people\non mobile phones, right?\n\n308\n00:14:52.141 --> 00:14:53.998\nThis is the age of bring your own device,\nright?\n\n309\n00:14:53.998 --> 00:14:56.900\nSo you might have people on mobile phones,\niPads.\n\n310\n00:14:56.900 --> 00:15:00.875\nThey might have their own tablets,\nthere own desktops, there own laptops that\n\n311\n00:15:00.875 --> 00:15:05.815\nare not computers that you control and\nthey just wanna be able to login to OWA.\n\n312\n00:15:05.815 --> 00:15:09.225\nOr they just wanna be able to fire up\ntheir Outlook client and connect securely.\n\n313\n00:15:09.225 --> 00:15:12.355\nAnd since we don't have control of that\ndevice, we can't make it trust our\n\n314\n00:15:12.355 --> 00:15:16.935\ncertificate, and as a result it's better\noff for us to just go and buy one, right?\n\n315\n00:15:16.935 --> 00:15:18.255\nNow be careful,\n\n316\n00:15:18.255 --> 00:15:23.470\nwhen you buy a certificate because your\nserver has more than one name, right?\n\n317\n00:15:23.470 --> 00:15:24.331\nLet me show you what I mean.\n\n318\n00:15:24.331 --> 00:15:28.453\nIf I go to create this request, and I hit\nNext, it's gonna ask for a friendly name.\n\n319\n00:15:28.453 --> 00:15:29.928\nAnd the friendly name is\nwhatever you want, right?\n\n320\n00:15:29.928 --> 00:15:33.459\nYou could call the certificate\nBob if you wanted to, but\n\n321\n00:15:33.459 --> 00:15:36.480\nI'll call this one my\nPublic ISS Certificate.\n\n322\n00:15:36.480 --> 00:15:40.240\nOr some kind of name that let's us\nremember what its purpose is, right,\n\n323\n00:15:40.240 --> 00:15:42.320\nwhy we got that certificate.\n\n324\n00:15:42.320 --> 00:15:46.460\nAnd then, it's gonna ask if I want\nto do a wild card certificate.\n\n325\n00:15:46.460 --> 00:15:49.060\nNow, wild card certificates are when\nwe do when we don't have a true server\n\n326\n00:15:49.060 --> 00:15:49.609\nname in there.\n\n327\n00:15:49.609 --> 00:15:54.572\nSo, instead of having\nlab/casso1.itprotv.net I might\n\n328\n00:15:54.572 --> 00:15:56.914\nhave star.itprotv.net.\n\n329\n00:15:56.914 --> 00:15:59.982\nNow, wild cards certificates\nare nice cuz you can use them for\n\n330\n00:15:59.982 --> 00:16:02.873\nmore than one name But\nif the certificate is compromised,\n\n331\n00:16:02.873 --> 00:16:05.823\nit's now been compromised\nacross more than one system, so\n\n332\n00:16:05.823 --> 00:16:09.350\nwhile we have that possibility\nwe don't normally do it, right.\n\n333\n00:16:09.350 --> 00:16:13.290\nSo on our next page we'll see where we\ncan start to pick other options and\n\n334\n00:16:13.290 --> 00:16:14.990\nget a little more specific.\n\n335\n00:16:14.990 --> 00:16:17.460\nIt's asking where I want to\nstore my certificate request.\n\n336\n00:16:17.460 --> 00:16:21.610\nWe'll normally just put that on our\nclient access server or on our desktop,\n\n337\n00:16:21.610 --> 00:16:23.940\nsomewhere like that so\nwe can save that request.\n\n338\n00:16:23.940 --> 00:16:25.450\nI'll store it on the cast server.\n\n339\n00:16:26.700 --> 00:16:28.790\nAnd then it's gonna ask for\nsome additional information, right?\n\n340\n00:16:28.790 --> 00:16:30.090\nWhat am I gonna use it for?\n\n341\n00:16:30.090 --> 00:16:31.810\nAnd when you look at this screen,\n\n342\n00:16:31.810 --> 00:16:35.500\nhere's where we start to see the multiple\nnames our server might have, right?\n\n343\n00:16:35.500 --> 00:16:39.300\nLooking at this, on the left side\nI've got a list of services.\n\n344\n00:16:39.300 --> 00:16:42.000\nAnd on the right side I've got\nthe domain name attached to them.\n\n345\n00:16:42.000 --> 00:16:45.980\nAnd you'll see like Outlook Web App\nis listed twice, right?\n\n346\n00:16:45.980 --> 00:16:46.580\nWhy twice?\n\n347\n00:16:46.580 --> 00:16:51.760\nWell, one is when accessed from\nthe Intranet, my LAN clients.\n\n348\n00:16:51.760 --> 00:16:54.530\nAnd the other is when accessed\nfrom the Internet, right?\n\n349\n00:16:54.530 --> 00:16:56.620\nFrom the WAN clients.\n\n350\n00:16:56.620 --> 00:17:00.700\nAnd when people connect they might\nconnect with different names and\n\n351\n00:17:00.700 --> 00:17:03.060\nso here is where we have\nto square that away.\n\n352\n00:17:03.060 --> 00:17:08.560\nFor example, I might want my LAN clients\nto connect to a server called lab-cas01,\n\n353\n00:17:08.560 --> 00:17:11.590\njust a single name.\n\n354\n00:17:11.590 --> 00:17:12.400\nRight?\n\n355\n00:17:12.400 --> 00:17:17.140\nOr maybe it is lab dash cas01-itprotv.net.\n\n356\n00:17:17.140 --> 00:17:20.930\nAll right, but then on the WAN,\non the internet side,\n\n357\n00:17:20.930 --> 00:17:22.640\nI want that server to be\ncalled something different.\n\n358\n00:17:22.640 --> 00:17:27.020\nI want it to be called\nmail at itprotv.net.\n\n359\n00:17:27.020 --> 00:17:28.205\nDifferent names.\n\n360\n00:17:28.205 --> 00:17:30.215\nAnd that's very common to have that.\n\n361\n00:17:30.215 --> 00:17:31.465\nOne set of names internally.\n\n362\n00:17:31.465 --> 00:17:33.115\nA different set of names externally.\n\n363\n00:17:33.115 --> 00:17:34.775\nOr some kind of shared name,\n\n364\n00:17:34.775 --> 00:17:37.555\nif we're doing like load-balancing\nservices or whatever.\n\n365\n00:17:37.555 --> 00:17:40.605\nThere might be a shared name that we're\nusing instead of this particular server.\n\n366\n00:17:40.605 --> 00:17:45.215\nSo, we can go through and edit these to\nspecify what we want that name to be for\n\n367\n00:17:45.215 --> 00:17:46.540\nour clients to connect.\n\n368\n00:17:46.540 --> 00:17:47.100\nAll right.\n\n369\n00:17:47.100 --> 00:17:49.350\nNow you can use the same name for\neverything.\n\n370\n00:17:49.350 --> 00:17:53.380\nI could just take this one name and copy\nand paste it across all these guys, and\n\n371\n00:17:53.380 --> 00:17:56.370\nthen it's gonna be the same\neverywhere across the board, right?\n\n372\n00:17:56.370 --> 00:17:59.020\nAnd the advantage of doing\nit that way is internal or\n\n373\n00:17:59.020 --> 00:18:01.520\nexternal clients are always\nset the same way.\n\n374\n00:18:01.520 --> 00:18:04.610\nWe just have to make sure that name can\nresolve internally and externally, right?\n\n375\n00:18:04.610 --> 00:18:08.710\nI need to be able to do this DNS look up\nfrom my internal network as well as my\n\n376\n00:18:08.710 --> 00:18:09.550\nexternal network.\n\n377\n00:18:09.550 --> 00:18:12.150\nAnd I'm manually putting them in here.\n\n378\n00:18:12.150 --> 00:18:13.170\nThis is a habit of mine.\n\n379\n00:18:13.170 --> 00:18:14.560\nI always do this manually.\n\n380\n00:18:14.560 --> 00:18:19.100\nIn reality if you leave the WAN one\nempty then it just uses the WAN one, so\n\n381\n00:18:19.100 --> 00:18:22.560\nit was actually already using this\nsetting, but I like to hard set it\n\n382\n00:18:22.560 --> 00:18:25.840\nanyway just so that I'm certain because\nthere can be some confusion and\n\n383\n00:18:25.840 --> 00:18:27.870\nit helps with troubleshooting later on.\n\n384\n00:18:27.870 --> 00:18:32.320\nBut also, you'll notice some differences\nlike this right here, Autodiscover.\n\n385\n00:18:32.320 --> 00:18:35.720\nWhen somebody does Autodiscover\nfrom the Internet,\n\n386\n00:18:35.720 --> 00:18:39.300\nthey're looking up\nAutoDiscover.itprotv.net, right?\n\n387\n00:18:39.300 --> 00:18:42.670\nA completely different name\nthan all the others, and\n\n388\n00:18:42.670 --> 00:18:44.600\nwe need to leave that be, right?\n\n389\n00:18:44.600 --> 00:18:47.710\nAutodiscover first off it\nlooks to the active directory.\n\n390\n00:18:47.710 --> 00:18:50.490\nIf it can't find the active directory,\nthen it looks for DNS.\n\n391\n00:18:50.490 --> 00:18:52.740\nAnd what it's looking for\nin DNS is a record.\n\n392\n00:18:52.740 --> 00:18:57.790\nAuto discover dot followed by\nwhatever your email domain name is.\n\n393\n00:18:57.790 --> 00:19:02.505\nSo if I say that my email is\njdoe@itprotv.net, it's gonna look for\n\n394\n00:19:02.505 --> 00:19:06.410\nautodiscover.itprotv.net that's why\nI've gotta have that entry in there.\n\n395\n00:19:06.410 --> 00:19:08.000\nSo I'm gonna leave that one be.\n\n396\n00:19:08.000 --> 00:19:10.960\nBut notice POP and\nIMAP it gave them internal names,\n\n397\n00:19:10.960 --> 00:19:12.260\nthat's not terribly useful.\n\n398\n00:19:12.260 --> 00:19:14.520\nSo I'm gonna go ahead and change those so\n\n399\n00:19:14.520 --> 00:19:17.029\nthat they're mapped to that\npublicly resolvable name.\n\n400\n00:19:19.050 --> 00:19:21.530\nSo now we'll get that nice and\nsquared down the list.\n\n401\n00:19:21.530 --> 00:19:23.030\nAnd I'll do the same\nwith Outlook anywhere.\n\n402\n00:19:24.650 --> 00:19:27.960\nAnd now we've got that same consistent\nname being used across the board.\n\n403\n00:19:29.660 --> 00:19:34.070\nOn my next screen, now it's gonna\nshow me about my certificate.\n\n404\n00:19:34.070 --> 00:19:37.720\nNotice how the certificate\nhas more than one name.\n\n405\n00:19:37.720 --> 00:19:40.730\nIn the old days when you\nbought an SSL certificate,\n\n406\n00:19:40.730 --> 00:19:45.090\nit just had one name www.itprotv.net or\nsomething like that.\n\n407\n00:19:45.090 --> 00:19:48.890\nBut this server has more than one name.\n\n408\n00:19:48.890 --> 00:19:53.170\nIt has lab-cas01.itprotv.net and\nit's got autodiscover.itprotv.net.\n\n409\n00:19:53.170 --> 00:19:55.760\nAnd, technically, it's not showing\nup here, but I'm gonna add it.\n\n410\n00:19:55.760 --> 00:19:58.790\nIt's got lab-cas01 by\nitself with no domain.\n\n411\n00:19:58.790 --> 00:19:59.370\nRight?\nSo\n\n412\n00:19:59.370 --> 00:20:02.470\nthese are all different\nnames this one server has.\n\n413\n00:20:02.470 --> 00:20:07.010\nWell, if I buy a certificate with\none domain and somebody connects on\n\n414\n00:20:07.010 --> 00:20:10.280\na different domain, they're going to get a\ncertificate error, and we don't want that.\n\n415\n00:20:10.280 --> 00:20:12.750\nAuto discover does not\nlike certificate errors.\n\n416\n00:20:12.750 --> 00:20:15.130\nWe've got to make sure our\ncertificates are on the up and up.\n\n417\n00:20:15.130 --> 00:20:18.390\nFortunately, almost every\ncertification vendor our there\n\n418\n00:20:18.390 --> 00:20:22.550\nsupports what are called subject\nalternative names, sans.\n\n419\n00:20:22.550 --> 00:20:23.680\nSo when you buy a certificate,\n\n420\n00:20:23.680 --> 00:20:27.300\nit has one primary name,\nthat's the first one on the list.\n\n421\n00:20:27.300 --> 00:20:29.950\nAnd then all the others\nare alternative names.\n\n422\n00:20:29.950 --> 00:20:32.140\nOther names somebody might\nuse when they connect.\n\n423\n00:20:32.140 --> 00:20:36.780\nIt's important that your certificate has\nall of the names of your server listed\n\n424\n00:20:36.780 --> 00:20:40.130\nin order to avoid certificate errors,\nso I'm gonna add those in.\n\n425\n00:20:40.130 --> 00:20:44.200\nNow there is one more here itprotv.net,\nand that's because when\n\n426\n00:20:44.200 --> 00:20:49.390\nautodiscover does the lookup against the\nDNS, the first thing it actually looks for\n\n427\n00:20:49.390 --> 00:20:52.710\nis your domain,\nforward slash auto discover, right?\n\n428\n00:20:52.710 --> 00:20:55.440\nAnd that's assuming that you\nhave your root domain pointed at\n\n429\n00:20:55.440 --> 00:20:58.290\na client access server\nwhich almost nobody does.\n\n430\n00:20:58.290 --> 00:21:00.020\nSo, that really doesn't get hit.\n\n431\n00:21:00.020 --> 00:21:03.770\nAnd then it moves on to the next one\nwhich is autodiscover.itprotv,net and\n\n432\n00:21:03.770 --> 00:21:05.649\nthat's why it's got both\nof those entries in there.\n\n433\n00:21:07.200 --> 00:21:09.300\nAll right.\nSo I'm gonna leave that be and\n\n434\n00:21:09.300 --> 00:21:12.760\nI'll move forward on that and now we can\nstart to punch in the information for\n\n435\n00:21:12.760 --> 00:21:14.470\nour certificate to request it.\n\n436\n00:21:14.470 --> 00:21:19.670\nNow, when this is done, it's gonna\nbe doing the request against, well,\n\n437\n00:21:19.670 --> 00:21:20.630\na public server somewhere.\n\n438\n00:21:20.630 --> 00:21:26.110\nIt's gonna generate a CSR, a Certificate\nof Request and we can take that CSR and\n\n439\n00:21:26.110 --> 00:21:28.570\nsend it up to whoever it is we're\nbuying a certificate from and\n\n440\n00:21:28.570 --> 00:21:31.300\nthey'll sell you the certificate, and then\nyou come back here and you load it in.\n\n441\n00:21:32.360 --> 00:21:35.580\nThat's the process, and if you've watched\nour server episodes where we show\n\n442\n00:21:35.580 --> 00:21:38.390\nsetting up a public key infrastructure,\nyou guys have seen that before,\n\n443\n00:21:38.390 --> 00:21:41.810\nbut that's the basic process of\ngetting that certificate in.\n\n444\n00:21:41.810 --> 00:21:44.790\nSo here we just finish filling this\nout and then we go and pay some money.\n\n445\n00:21:45.910 --> 00:21:50.370\nIf I'm using the self-signed certificate,\nthough, how do I edit this stuff?\n\n446\n00:21:50.370 --> 00:21:52.970\nWell, if we're doing\nthe self-sign certificate,\n\n447\n00:21:52.970 --> 00:21:56.650\nyou can actually modify that right up\nhere under our virtual directories.\n\n448\n00:21:56.650 --> 00:21:58.650\nIf you choose virtual directories,\n\n449\n00:21:58.650 --> 00:22:01.690\nyou'll see the web addresses that\nare being used for everything.\n\n450\n00:22:01.690 --> 00:22:03.040\nFor Outlook web app, for\n\n451\n00:22:03.040 --> 00:22:06.520\nthe Exchange control panel,\nnow the exchange administration center.\n\n452\n00:22:06.520 --> 00:22:08.700\nYou'll see ActiveSync,\nthe offline address book,\n\n453\n00:22:08.700 --> 00:22:10.980\nall these different things right here.\n\n454\n00:22:10.980 --> 00:22:13.600\nAnd if you click\nthe little wrench up here,\n\n455\n00:22:13.600 --> 00:22:18.130\nthis will let you configure those\nexternal client access domain names.\n\n456\n00:22:18.130 --> 00:22:18.780\nAnd so we can say,\n\n457\n00:22:18.780 --> 00:22:22.580\nwhen somebody connects, here's the address\nthey're gonna be connecting to.\n\n458\n00:22:22.580 --> 00:22:23.630\nAnd it says right here,\n\n459\n00:22:23.630 --> 00:22:27.030\nselect the client access servers\nthat people will be connecting to.\n\n460\n00:22:27.030 --> 00:22:29.040\nAnd what the external domain is.\n\n461\n00:22:29.040 --> 00:22:31.470\nSo this is kinda the counterpart\nto the certificate.\n\n462\n00:22:31.470 --> 00:22:35.360\nWe've gotta fill this out too so\nthat our servers know to listen.\n\n463\n00:22:35.360 --> 00:22:38.120\nI might have ten different\nclient access servers.\n\n464\n00:22:38.120 --> 00:22:41.340\nBut I only want two of them to\nbe connected to the Internet.\n\n465\n00:22:41.340 --> 00:22:45.090\nAnd so I would come in here and hit the +\nsign and just add the two that I wanted.\n\n466\n00:22:45.090 --> 00:22:47.160\nNow I've only got one so I'll add that in.\n\n467\n00:22:47.160 --> 00:22:49.670\nBut, if I had ten, I would just\npick the two that I wanted, and\n\n468\n00:22:49.670 --> 00:22:53.160\nadd them to that list, and then here\nI would give them the public name.\n\n469\n00:22:53.160 --> 00:22:56.890\nNow, if I have two client access servers,\nI might be load balancing across them, so\n\n470\n00:22:56.890 --> 00:22:58.780\nI'll have one shared name between them.\n\n471\n00:22:58.780 --> 00:23:00.360\nI've only got one, though, so\n\n472\n00:23:00.360 --> 00:23:05.450\nI can put in the individual name of\nthat server, and there we've got it set.\n\n473\n00:23:06.580 --> 00:23:11.040\nAnd now it's gonna tie that in, and now my\nsystem will now when somebody connects,\n\n474\n00:23:11.040 --> 00:23:12.390\nthis is the name they're connecting to.\n\n475\n00:23:12.390 --> 00:23:16.280\nMy certificate should match that,\nit should have that name attached to it.\n\n476\n00:23:16.280 --> 00:23:19.080\nAnd if it doesn't,\nwell we'll need to go and correct that.\n\n477\n00:23:19.080 --> 00:23:21.240\nSo I'm gonna give that a moment\nwhile it updates that.\n\n478\n00:23:21.240 --> 00:23:23.490\nNow, what's it doing in the background.\n\n479\n00:23:23.490 --> 00:23:26.540\nIn the background, it's reaching\nout to the Client Access Server and\n\n480\n00:23:26.540 --> 00:23:28.110\nit's reaching out to the Active Directory.\n\n481\n00:23:28.110 --> 00:23:30.960\nAnd it's populating the fields\nwith that domain name to say\n\n482\n00:23:30.960 --> 00:23:34.570\nhere's the new name that we're gonna\nuse when people connect externally.\n\n483\n00:23:34.570 --> 00:23:36.530\nAnd now when Auto Discover runs,\n\n484\n00:23:36.530 --> 00:23:38.930\nthat's the name that they're gonna\nlearn when they try and connect.\n\n485\n00:23:38.930 --> 00:23:41.770\nSo we'll give that a moment\nwhile it turns alarm.\n\n486\n00:23:41.770 --> 00:23:44.920\nNow after that's done,\nif I used a self signed cert,\n\n487\n00:23:44.920 --> 00:23:46.950\nI'll need to make sure it's\ngot the right names in it.\n\n488\n00:23:46.950 --> 00:23:48.030\nIt should.\n\n489\n00:23:48.030 --> 00:23:51.270\nWe can actually cheat a little bit\ndouble check this while that's running.\n\n490\n00:23:51.270 --> 00:23:53.900\nIf I come back here and take a look\nat the certificate that I've got, oh,\n\n491\n00:23:53.900 --> 00:23:54.490\nit just finished.\n\n492\n00:23:54.490 --> 00:23:55.420\nSo I'll close that out.\n\n493\n00:23:56.450 --> 00:23:58.555\nthere we go.\nWe can take a look at the certificate I\n\n494\n00:23:58.555 --> 00:24:02.839\nhad issued before and if we edit that one,\nthis is the self-signed certificate it\n\n495\n00:24:02.839 --> 00:24:06.707\nhad installed and I can see that it\ndoes have lab/casso.itprotv.net.\n\n496\n00:24:06.707 --> 00:24:10.250\nBut, shoot, I thought I was going to\nbe able to use this certificate, but\n\n497\n00:24:10.250 --> 00:24:12.320\nI'm missing something aren't I?\n\n498\n00:24:12.320 --> 00:24:14.970\nI'm missing autodiscover that itprotv.net.\n\n499\n00:24:14.970 --> 00:24:17.160\nSo, I actually can't use my\nself-assigned certificate,\n\n500\n00:24:17.160 --> 00:24:19.030\nso I'm going to have some problems there.\n\n501\n00:24:19.030 --> 00:24:22.800\nSo, what I need to do is issue a new\nself-assigned certificate to fix that\n\n502\n00:24:22.800 --> 00:24:23.460\non my server.\n\n503\n00:24:23.460 --> 00:24:25.688\nSo, I'll do a new self-assigned cert,\n\n504\n00:24:25.688 --> 00:24:29.610\nwhich is really just about the same\nas issuing a true certificate.\n\n505\n00:24:29.610 --> 00:24:33.260\nThe only difference is that part where\nwe upload our request to a provider and\n\n506\n00:24:33.260 --> 00:24:34.560\npay for it, we don't do that.\n\n507\n00:24:34.560 --> 00:24:36.970\nInstead, our server just\nissues the certificate.\n\n508\n00:24:36.970 --> 00:24:40.230\nSo, I'll call this my,\nyou know, new self-signed cert.\n\n509\n00:24:41.570 --> 00:24:42.680\nAnd I'm gonna add in\n\n510\n00:24:44.200 --> 00:24:47.910\nthe server I'm attaching this\nto which is just LabCass 01.\n\n511\n00:24:47.910 --> 00:24:50.550\nAnd then I'm gonna have\nto update my names.\n\n512\n00:24:50.550 --> 00:24:52.700\nAnd see it remembered all the names\nfrom where I filled them out earlier.\n\n513\n00:24:52.700 --> 00:24:54.490\nSo it's got all that information in there.\n\n514\n00:24:54.490 --> 00:24:56.150\nActually, it didn't\nremember these last two.\n\n515\n00:24:56.150 --> 00:24:57.850\nSo let me update those.\n\n516\n00:24:57.850 --> 00:25:00.970\nI'm not using POP or IMAP anyway,\nso I'm not too worried about it.\n\n517\n00:25:00.970 --> 00:25:04.310\nBut still, it's best to have it correct\nbecause otherwise you'll have a problem\n\n518\n00:25:04.310 --> 00:25:06.430\ndown the road and\nyou won't remember where this was.\n\n519\n00:25:06.430 --> 00:25:08.450\nSo, we'll just go in and update that.\n\n520\n00:25:09.720 --> 00:25:11.320\nAnd then we'll be in good shape.\n\n521\n00:25:13.120 --> 00:25:17.140\nAll right, so once I've got that, it's\ngot the names, there's the server name.\n\n522\n00:25:17.140 --> 00:25:19.790\nAutodiscover is in there,\nthe domain name is in there.\n\n523\n00:25:19.790 --> 00:25:22.790\nI might go ahead and choose to add in the\nsingle name, just to be on the safe side.\n\n524\n00:25:22.790 --> 00:25:23.980\nEven though nobody should be using that.\n\n525\n00:25:23.980 --> 00:25:26.900\nI'll punch it in and\nthen I'll finish that up.\n\n526\n00:25:26.900 --> 00:25:31.080\nNow, if I were doing the other stiffy\nrequest, this would generate a request\n\n527\n00:25:31.080 --> 00:25:34.540\nthat I would upload, pay and\nthen download the response.\n\n528\n00:25:34.540 --> 00:25:38.470\nHere, since it's self signed, it just\nautomatically approves it and there it is.\n\n529\n00:25:38.470 --> 00:25:40.930\nThere's my new self signed cert.\n\n530\n00:25:40.930 --> 00:25:42.490\nBut if I look at the services down here,\n\n531\n00:25:42.490 --> 00:25:44.630\nsee how it's only attached to IMAP and\nPOP?\n\n532\n00:25:44.630 --> 00:25:46.950\nSo it's not attached everywhere yet.\n\n533\n00:25:46.950 --> 00:25:48.900\nSo I need to edit that.\n\n534\n00:25:48.900 --> 00:25:52.180\nAnd when I go into this I'll\nsee services on the left and\n\n535\n00:25:52.180 --> 00:25:53.910\nhere's where I can attach\nto everything else.\n\n536\n00:25:53.910 --> 00:25:58.800\nAnd I'm gonna attach it to to SMTP,\nIMAP, POP and ISS I'm not using unified\n\n537\n00:25:58.800 --> 00:26:01.850\nmessaging, but it wouldn't hurt to\ngo ahead and attach it to that also.\n\n538\n00:26:01.850 --> 00:26:05.130\nAnd now that's the certificate I'm\nusing across the board for this server.\n\n539\n00:26:05.130 --> 00:26:05.940\nAll right?\n\n540\n00:26:05.940 --> 00:26:07.260\nAnd let's see.\n\n541\n00:26:07.260 --> 00:26:09.690\nOh, it's warning me about unified\nmessaging cuz I'm not actually using it,\n\n542\n00:26:09.690 --> 00:26:10.475\nso I'll turn that off.\n\n543\n00:26:10.475 --> 00:26:11.460\n[LAUGH] There we go.\n\n544\n00:26:11.460 --> 00:26:14.080\nThat's what I get for\ntrying to be complete.\n\n545\n00:26:14.080 --> 00:26:16.700\nAll right, so\nit's asking me if I'm sure that I wanna\n\n546\n00:26:16.700 --> 00:26:19.010\noverride the existing certificate,\nand I am.\n\n547\n00:26:19.010 --> 00:26:19.660\nI'll override it.\n\n548\n00:26:21.530 --> 00:26:22.660\nAnd then we should be in business.\n\n549\n00:26:24.120 --> 00:26:28.770\nSo once that's done, there we go, now\nI've got the new certificate in place and\n\n550\n00:26:28.770 --> 00:26:29.710\nI should be ready to rock.\n\n551\n00:26:29.710 --> 00:26:34.010\nNow when somebody fires up Outlook and\ngoes to connect, Autodiscover's gonna run,\n\n552\n00:26:34.010 --> 00:26:37.590\nit's gonna see that cert and\nthat name and it's gonna move from there.\n\n553\n00:26:37.590 --> 00:26:40.350\nNow we already saw that, whoops,\n\n554\n00:26:40.350 --> 00:26:43.120\nwe already saw that with our user JDoe,\nright?\n\n555\n00:26:43.120 --> 00:26:44.920\nIf I switch back over to JDoe, or\n\n556\n00:26:44.920 --> 00:26:50.300\nJohn Doe,\nhe was the one who auto configured, right?\n\n557\n00:26:50.300 --> 00:26:52.540\nHe did auto discovery,\nhe found the server and he connected.\n\n558\n00:26:52.540 --> 00:26:55.690\nNow how do I actually know that worked?\n\n559\n00:26:55.690 --> 00:26:56.300\nIt's all hidden.\n\n560\n00:26:56.300 --> 00:26:57.530\nIt's all in the background, right?\n\n561\n00:26:57.530 --> 00:26:58.870\nSo how do we know what happened?\n\n562\n00:26:58.870 --> 00:27:01.920\nWell, there's actually a neat\nlittle feature that we can use\n\n563\n00:27:01.920 --> 00:27:02.870\nthat's a hidden feature.\n\n564\n00:27:02.870 --> 00:27:04.480\nSo, I wanna show you guys this one.\n\n565\n00:27:04.480 --> 00:27:05.860\nMy head's covering it up though.\n\n566\n00:27:05.860 --> 00:27:09.070\nCan we get my computer full screen for\na second?\n\n567\n00:27:09.070 --> 00:27:13.550\nSo down in the bottom right corner in\nour taskbar, we've got our clock and\n\n568\n00:27:13.550 --> 00:27:14.629\nour other little items.\n\n569\n00:27:15.680 --> 00:27:19.480\nAnd what you'll see down here is that\nOutlook actually has its own little system\n\n570\n00:27:19.480 --> 00:27:20.670\ntray icon.\n\n571\n00:27:20.670 --> 00:27:22.060\nAnd in that system tray,\n\n572\n00:27:22.060 --> 00:27:24.100\nif you right-click on it,\nyou've got some options, right?\n\n573\n00:27:24.100 --> 00:27:26.480\nAnd there's nothing too fancy in here.\n\n574\n00:27:26.480 --> 00:27:30.620\nBut if you hold down\ncontrol on your keyboard,\n\n575\n00:27:30.620 --> 00:27:33.560\nwhen you right-click you'll\nactually see some hidden options.\n\n576\n00:27:33.560 --> 00:27:37.360\nSo I'm gonna hold Control and\nright-click on that Outlook icon.\n\n577\n00:27:37.360 --> 00:27:43.910\nAnd notice how I've got connection status,\nand test email auto configuration.\n\n578\n00:27:43.910 --> 00:27:47.260\nThat is what's gonna let\nus see the auto discover.\n\n579\n00:27:47.260 --> 00:27:50.740\nSo when we click on that, it's gonna\nlaunch this window and here I can type in\n\n580\n00:27:50.740 --> 00:27:54.930\nanybody's email address, and we'll be\nable to see what's going on there.\n\n581\n00:27:54.930 --> 00:27:58.850\nSo, when I come in and I type in J Doe and\nI punch in his password,\n\n582\n00:27:58.850 --> 00:28:02.240\ncuz it's actually gonna try and connect,\nI could do my account and try mine.\n\n583\n00:28:02.240 --> 00:28:06.830\nWe can hit task and it's gonna test out\nauto discover and see if it's working.\n\n584\n00:28:06.830 --> 00:28:11.730\nAnd it's gonna give us detailed feedback,\nso that people can see what's going on and\n\n585\n00:28:11.730 --> 00:28:12.490\nget that information.\n\n586\n00:28:12.490 --> 00:28:13.920\nThis is normally hidden.\n\n587\n00:28:13.920 --> 00:28:14.800\nIt's all in the background.\n\n588\n00:28:14.800 --> 00:28:15.740\nWe don't see it.\n\n589\n00:28:15.740 --> 00:28:18.440\nThis is gonna test it out and\ngive us that information.\n\n590\n00:28:18.440 --> 00:28:21.080\nSo, if we give it just a second\nit's running through that process.\n\n591\n00:28:21.080 --> 00:28:23.160\nIt should be seeing our new certificate.\n\n592\n00:28:23.160 --> 00:28:25.340\nAnd it'll let us know if it's working or\nnot.\n\n593\n00:28:25.340 --> 00:28:28.310\nIf it fails, we know we need to\ntroubleshoot it and fortunately,\n\n594\n00:28:28.310 --> 00:28:31.490\nit'll give us information\nas to what to troubleshoot.\n\n595\n00:28:31.490 --> 00:28:35.130\nNow it's doing a lot more that\njust basic auto discover.\n\n596\n00:28:35.130 --> 00:28:38.000\nWhat it's doing is it's running\nthrough all of the different types of\n\n597\n00:28:38.000 --> 00:28:38.650\nauto discover.\n\n598\n00:28:38.650 --> 00:28:41.890\nIt's testing port connectivity seeing\nif it can reach out to the server.\n\n599\n00:28:41.890 --> 00:28:43.550\nIt's checking all of that.\n\n600\n00:28:43.550 --> 00:28:46.180\nSo that's why it's saying it may\ntake up to a minute we just have to\n\n601\n00:28:46.180 --> 00:28:46.790\ngive it some time.\n\n602\n00:28:46.790 --> 00:28:50.640\nAnd then when it's done we'll be\nable to see the log file output.\n\n603\n00:28:50.640 --> 00:28:52.250\nAnd you can actually look\nat some of it right now.\n\n604\n00:28:52.250 --> 00:28:53.770\nSee how it's reaching out?\n\n605\n00:28:53.770 --> 00:28:58.710\nAnd it's reaching out in my case to\nmail.itprotv.net for IMAP for some reason.\n\n606\n00:28:58.710 --> 00:29:01.270\nAnd then we'll see pop.itprotv.net,\n\n607\n00:29:01.270 --> 00:29:05.680\nand a few others as it's reaching out\ntrying to find these different servers.\n\n608\n00:29:05.680 --> 00:29:09.900\nAnd at the end of the day, this is\nthe one I'm looking for right here.\n\n609\n00:29:09.900 --> 00:29:11.150\nAttempting URL.\n\n610\n00:29:11.150 --> 00:29:13.000\nIt's looking for auto discover, and\n\n611\n00:29:13.000 --> 00:29:17.970\nsee how it looks for\nlab-caso1.itprotv.net/autodiscover.\n\n612\n00:29:17.970 --> 00:29:23.040\nIt's looking for that folder on my client\naccess server and it's connected to it and\n\n613\n00:29:23.040 --> 00:29:26.000\nthen it's gonna start\nresponding back with answers.\n\n614\n00:29:26.000 --> 00:29:29.030\nHere it's trying to connect via POP and\nIMAP, and these are all failing.\n\n615\n00:29:29.030 --> 00:29:31.320\nSee how these are all failed,\nfailed, failed failed failed?\n\n616\n00:29:31.320 --> 00:29:35.670\nWell, POP and\nIMAP are disabled in Exchange by default.\n\n617\n00:29:35.670 --> 00:29:39.760\nWhen we connect we need to either\nconnect via MAPI, the old way, or\n\n618\n00:29:39.760 --> 00:29:42.070\nby RCP over HTTP which is that new way.\n\n619\n00:29:42.070 --> 00:29:46.840\nAnd so I do expect to see failures, but\nI also expect to see some successes.\n\n620\n00:29:46.840 --> 00:29:48.700\nSMTP is succeeding.\n\n621\n00:29:48.700 --> 00:29:50.680\nWe are able to connect with SMTP.\n\n622\n00:29:50.680 --> 00:29:53.630\nAnd then we should be\nconnected to our mailbox also.\n\n623\n00:29:53.630 --> 00:29:56.990\nSo all this is kinda going on, where we\ncan see that information right here and\n\n624\n00:29:56.990 --> 00:29:57.890\nuse it for troubleshooting.\n\n625\n00:30:00.210 --> 00:30:04.265\nWell, what we've seen right here is\nthe basic functions of AutoDiscover.\n\n626\n00:30:04.265 --> 00:30:08.585\nDiscover and how it works out of\nthe box but there's a lot more to it.\n\n627\n00:30:08.585 --> 00:30:11.085\nWe still need to see how it\nlooks from the Internet, but\n\n628\n00:30:11.085 --> 00:30:13.505\nI'm kind of running a little\nshort on time on this episode.\n\n629\n00:30:13.505 --> 00:30:16.385\nSo we're gonna have to do a part two on\nthis to take a look at the Internet side\n\n630\n00:30:16.385 --> 00:30:18.895\nof getting connected to\nan auto discover server.\n\n631\n00:30:18.895 --> 00:30:21.545\nSo, in this episode,\nwe got a chance to see auto discover.\n\n632\n00:30:21.545 --> 00:30:23.735\nWe saw what it does, we say how it works.\n\n633\n00:30:23.735 --> 00:30:26.535\nWe talked about a little bit about\nthe certificate, and the issues we can run\n\n634\n00:30:26.535 --> 00:30:29.730\ninto there and how we might have to\ngenerate some of our own certificates.\n\n635\n00:30:29.730 --> 00:30:34.570\nAnd we got to see how to troubleshoot it\nusing the little hidden away test for\n\n636\n00:30:34.570 --> 00:30:36.700\nautodiscover inside of Microsoft Outlook.\n\n637\n00:30:36.700 --> 00:30:39.450\nBut stay tuned because in episode two\nwe're going to look at getting our\n\n638\n00:30:39.450 --> 00:30:40.520\ninternet users connecting.\n\n639\n00:30:40.520 --> 00:30:43.220\nHere this was a local area user,\nsomebody joined to the domain and\n\n640\n00:30:43.220 --> 00:30:44.470\nthat was the easy one.\n\n641\n00:30:44.470 --> 00:30:46.680\nIt's the ones that are outside,\nthe ones that are external.\n\n642\n00:30:46.680 --> 00:30:47.830\nThey're the hard ones.\n\n643\n00:30:47.830 --> 00:30:50.500\nAnd so we're gonna get a chance to see\nthat when somebody connects in and\n\n644\n00:30:50.500 --> 00:30:52.570\nsome of the stuff we have to\ndo to get that squared away.\n\n645\n00:30:52.570 --> 00:30:53.500\nSo stay tuned for that.\n\n646\n00:30:53.500 --> 00:30:56.490\nBut for this episode,\nsigning off for ITProTV.\n\n647\n00:30:56.490 --> 00:30:58.999\nI'm Don Pezet, and I'll see you next time.\n\n648\n00:30:58.999 --> 00:31:03.143\n[MUSIC]\n\n",
          "vimeoId": "136729109"
        },
        {
          "description": "This episode is the exciting conclusion to the Autodiscover episode. In the last episode, Don demonstrated LAN connectivity. In this episode, he demonstrates configuring Autodiscover for external clients. He ends the episode demonstrating the MailTips feature in Exchange 2013.",
          "length": "1172",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autosdicover_pt2-081715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autosdicover_pt2-081715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-2-autosdicover_pt2-081715-1-sm.jpg",
          "title": "Autodiscover Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.037 --> 00:00:10.712\n[MUSIC]\n\n2\n00:00:10.712 --> 00:00:11.536\nAll right.\n\n3\n00:00:11.536 --> 00:00:12.220\nGood morning.\n\n4\n00:00:12.220 --> 00:00:13.591\nGood afternoon, and good evening.\n\n5\n00:00:13.591 --> 00:00:16.070\nAnd welcome back to another\nepisode of ITProTV.\n\n6\n00:00:16.070 --> 00:00:17.980\nI'm your host Don Pezet.\n\n7\n00:00:17.980 --> 00:00:21.820\nBack again with another episode\nof Microsoft Exchange 2013.\n\n8\n00:00:21.820 --> 00:00:24.430\nAnd in fact,\nback again with more Auto Discover.\n\n9\n00:00:24.430 --> 00:00:27.920\nThis is part two of our Microsoft\nexchange Auto Discover episodes and\n\n10\n00:00:27.920 --> 00:00:32.430\nwe're gonna be taking a look at the latter\nhalf of the Auto Discover service.\n\n11\n00:00:32.430 --> 00:00:35.840\nIn our first episode we got a chance to\nsee Auto Discover from the perspective of\n\n12\n00:00:35.840 --> 00:00:36.840\ninternal clients,\n\n13\n00:00:36.840 --> 00:00:41.350\nfrom our land clients, our machines that\nare joined to our Active Directory domain.\n\n14\n00:00:41.350 --> 00:00:44.210\nBut what about clients that\naren't a part of our domain?\n\n15\n00:00:44.210 --> 00:00:47.060\nWhat if somebody's on their own\npersonal computer at home or\n\n16\n00:00:47.060 --> 00:00:51.150\nthey're on their Android, or IOS, or\nWindows Mobile phone, and it's not\n\n17\n00:00:51.150 --> 00:00:55.000\nconnected to our systems at all, and they\nwant Auto Discover to work there, also.\n\n18\n00:00:55.000 --> 00:00:57.550\nAll right, well, there's a few\nthings that we're gonna have to do.\n\n19\n00:00:57.550 --> 00:01:01.480\nFirst off, when Auto Discover runs,\nthe first thing it does is look for\n\n20\n00:01:01.480 --> 00:01:03.110\nis your Active Directory information.\n\n21\n00:01:03.110 --> 00:01:04.270\nAnd for these types of clients.\n\n22\n00:01:04.270 --> 00:01:06.350\nFor external clients that doesn't exist.\n\n23\n00:01:06.350 --> 00:01:09.800\nSo step two, they look to DNS.\n\n24\n00:01:09.800 --> 00:01:11.940\nThey look to DNS and they're looking for\n\n25\n00:01:11.940 --> 00:01:15.710\none of two records that tell them\nwhere to find Auto Discover.\n\n26\n00:01:15.710 --> 00:01:18.970\nAnd it doesn't matter which of the two\nbecause neither of them exist by default.\n\n27\n00:01:18.970 --> 00:01:21.030\nWe've got to create them\nif we want that to work.\n\n28\n00:01:21.030 --> 00:01:21.710\nAll right.\n\n29\n00:01:21.710 --> 00:01:25.540\nSo what you need to do is, you need to\nthink about your user's e-mail addresses.\n\n30\n00:01:25.540 --> 00:01:30.050\nNow in the first part I showed you guys\nlogging in with the domain user and\n\n31\n00:01:30.050 --> 00:01:31.810\nI fired up Outlook.\n\n32\n00:01:31.810 --> 00:01:36.270\nAnd you probably saw there where Outlook,\nit figured out the person's name,\n\n33\n00:01:36.270 --> 00:01:37.650\nit figured out their e-mail address,\n\n34\n00:01:37.650 --> 00:01:40.620\nall we had to do was click next\na few times and we were configured.\n\n35\n00:01:40.620 --> 00:01:41.220\nAll right?\n\n36\n00:01:41.220 --> 00:01:44.240\nLet's watch that same process here for\nan external use.r So\n\n37\n00:01:44.240 --> 00:01:48.722\nhere I am on a workstation that\nhas a crazy background, but\n\n38\n00:01:48.722 --> 00:01:51.570\n[LAUGH] here I'm on a workstation for\nJane Doe.\n\n39\n00:01:51.570 --> 00:01:53.002\nAnd apparently Jane really likes fish.\n\n40\n00:01:53.002 --> 00:01:55.900\nSo [LAUGH] got all sorts\nof aquatic stuff here.\n\n41\n00:01:55.900 --> 00:02:00.910\nBut if I take a look at her computer,\nwe can see that it's a LAB client,\n\n42\n00:02:00.910 --> 00:02:02.320\nbut it's in WORKGROUP.\n\n43\n00:02:02.320 --> 00:02:02.860\nWork group.\n\n44\n00:02:02.860 --> 00:02:04.390\nShe's not joined to the domain.\n\n45\n00:02:04.390 --> 00:02:07.570\nSo she's an external user,\nshe's at home, she fires up Outlook,\n\n46\n00:02:07.570 --> 00:02:08.640\nshe's not joined to a domain.\n\n47\n00:02:08.640 --> 00:02:09.960\nWhat's she gonna get?\n\n48\n00:02:09.960 --> 00:02:12.110\nWell Outlook is gonna fire up.\n\n49\n00:02:12.110 --> 00:02:13.450\nAnd if this is the first time,\n\n50\n00:02:13.450 --> 00:02:16.280\nit's gonna offer to set her\nup with a new profile, right?\n\n51\n00:02:16.280 --> 00:02:18.640\nAnd it's gonna say, do you want\nto connect to an e-mail account?\n\n52\n00:02:18.640 --> 00:02:22.410\nAnd when she hits Next,\nif we were joined in the Active Directory,\n\n53\n00:02:22.410 --> 00:02:25.750\nthis would auto populate with\nyour name and e-mail address and\n\n54\n00:02:25.750 --> 00:02:28.440\nyou'd click Next, but\nnow it's just sitting here.\n\n55\n00:02:28.440 --> 00:02:31.770\nAll right, it's sitting here because as\nan external user it has no way of knowing.\n\n56\n00:02:31.770 --> 00:02:33.505\nIt doesn't know what your\ne-mail address is and\n\n57\n00:02:33.505 --> 00:02:35.848\nit can't look in the Active Directory for\nit so we have to tell it.\n\n58\n00:02:35.848 --> 00:02:40.321\nSo she's gonna come in here and\nput her information, and so,\n\n59\n00:02:40.321 --> 00:02:44.449\nyou know, if her email account\nis set up for Jane Smith and\n\n60\n00:02:44.449 --> 00:02:48.418\nher email address is jsmith@itprotv.net,\nright?\n\n61\n00:02:48.418 --> 00:02:51.670\nAnd you're going to punch that in and what\nour password is, you'll punch that in.\n\n62\n00:02:51.670 --> 00:02:55.800\nAll right, now it is asking for\ninformation, the user has to provide\n\n63\n00:02:55.800 --> 00:02:59.100\ninformation but, this is all\ninformation that your user should have.\n\n64\n00:02:59.100 --> 00:03:02.120\nThey know their name, hopefully,\nthey know their e-mail address, and\n\n65\n00:03:02.120 --> 00:03:03.330\nthey know their password.\n\n66\n00:03:03.330 --> 00:03:07.910\nSo it's not like we're asking them for\na server URL or port numbers or\n\n67\n00:03:07.910 --> 00:03:11.530\nany of the crazy stuff the users don't\nknow, this is information they do know.\n\n68\n00:03:11.530 --> 00:03:15.612\nAnd when we hit Next, what's going to\nhappen is Outlook is going to say,\n\n69\n00:03:15.612 --> 00:03:18.050\nall right I'm not joining the Active\nDirectory, so I have to skip step one and\n\n70\n00:03:18.050 --> 00:03:19.660\nI'm going to go to step two.\n\n71\n00:03:19.660 --> 00:03:21.460\nStep two is look to DNS.\n\n72\n00:03:21.460 --> 00:03:23.130\nAnd it's going to take your domain name.\n\n73\n00:03:23.130 --> 00:03:24.720\nMy domain name here is itprotv.net.\n\n74\n00:03:24.720 --> 00:03:27.210\nIt's going to take that domain name,\nand it's going to look for\n\n75\n00:03:27.210 --> 00:03:31.770\na server at itprotv.net, and on that\nserver it's going to look for a folder.\n\n76\n00:03:31.770 --> 00:03:37.340\nIt's basically going to do a secure web\nconnection, https on tcp port 443 and\n\n77\n00:03:37.340 --> 00:03:41.420\nit's gonna look for\nITProTV.net/autodiscover all right?\n\n78\n00:03:41.420 --> 00:03:45.210\nAnd then inside of there\n/autodiscover.xml it's gonna look for\n\n79\n00:03:45.210 --> 00:03:47.320\nthat file to get configuration, all right.\n\n80\n00:03:47.320 --> 00:03:52.045\nNow very few people actually have a\nnon-web server sitting at this address and\n\n81\n00:03:52.045 --> 00:03:55.095\nyou definitely don't have exchange servers\nsitting there on a normal environment.\n\n82\n00:03:55.095 --> 00:03:57.495\nSo, that's not always gonna work for us.\n\n83\n00:03:57.495 --> 00:04:01.425\nMaybe if our e-mail domain is\nspecifically for e-mail, but\n\n84\n00:04:01.425 --> 00:04:02.925\nmost people don't have that.\n\n85\n00:04:02.925 --> 00:04:06.305\nSo, after that one fails it's\ngonna go to the second effort.\n\n86\n00:04:06.305 --> 00:04:12.020\nAnd the second effort is to look for\nautodiscover.itprotv.net.\n\n87\n00:04:12.020 --> 00:04:14.652\nSo I need to make sure that for\nmy users out there on the Internet,\n\n88\n00:04:14.652 --> 00:04:19.560\nauto discover.itprotv.net has to resolve\nto one my client access servers.\n\n89\n00:04:19.560 --> 00:04:21.080\nAnd there's a really easy way to do that.\n\n90\n00:04:21.080 --> 00:04:22.320\nLet me show you.\n\n91\n00:04:22.320 --> 00:04:24.060\nI'm gonna jump over to one\nof my domain controllers.\n\n92\n00:04:24.060 --> 00:04:25.330\nAnd this is where I'm running DNS.\n\n93\n00:04:25.330 --> 00:04:28.200\nNow, you might be running\nDNS on your own servers.\n\n94\n00:04:28.200 --> 00:04:31.902\nYou might be running it on\nan external service like GoDaddy or\n\n95\n00:04:31.902 --> 00:04:37.266\nRegister.com, Hover.com,\none of those guys, it doesn't matter.\n\n96\n00:04:37.266 --> 00:04:40.440\nWhoever it is that's hosting your DNS,\nyou go to that server and\n\n97\n00:04:40.440 --> 00:04:43.330\nyou find your forward lookup zone for\nyour network.\n\n98\n00:04:43.330 --> 00:04:48.202\nSo mine was itprotv.net and\nwhat we need to do is add in a record for\n\n99\n00:04:48.202 --> 00:04:49.730\nAuto Discover.\n\n100\n00:04:49.730 --> 00:04:53.230\nNow you could add an A-record in there,\nbut I typically don't.\n\n101\n00:04:53.230 --> 00:04:57.610\nThe reason is we normally already have\na record for our client access server and\n\n102\n00:04:57.610 --> 00:04:59.310\nthere's no reason you can't reuse that.\n\n103\n00:04:59.310 --> 00:05:04.070\nWe can just do an alias that\nsays autodiscover.itprotv.net\n\n104\n00:05:04.070 --> 00:05:05.990\npoints to this already existing server.\n\n105\n00:05:05.990 --> 00:05:06.900\nAll right?\n\n106\n00:05:06.900 --> 00:05:10.520\nAnd the way you do that in DNS is\nwith a CNAME or a canonical name.\n\n107\n00:05:10.520 --> 00:05:12.470\nSo I'm gonna right click\nhere on itprotv.net,\n\n108\n00:05:12.470 --> 00:05:16.600\nand I'll do a new alias which is a CNAME.\n\n109\n00:05:16.600 --> 00:05:19.450\nAnd my alias is just\ngonna be autodiscover.\n\n110\n00:05:19.450 --> 00:05:20.655\nAnd see what it's filling in for me?\n\n111\n00:05:20.655 --> 00:05:23.760\nAutodiscover.itprotv.net, right?\n\n112\n00:05:23.760 --> 00:05:26.500\nThat's what these clients\nare gonna be looking for.\n\n113\n00:05:26.500 --> 00:05:30.820\nAnd all I have to do is point that at\nany one of my client access servers.\n\n114\n00:05:30.820 --> 00:05:31.960\nWell, I shouldn't say it that way.\n\n115\n00:05:31.960 --> 00:05:33.520\nNot any client access server.\n\n116\n00:05:33.520 --> 00:05:36.810\nIt's gotta be a client access server\nthat's accessible from the Internet.\n\n117\n00:05:36.810 --> 00:05:39.030\nYou might have ten client access servers.\n\n118\n00:05:39.030 --> 00:05:41.150\nBut only two are accessible\nfrom the Internet.\n\n119\n00:05:41.150 --> 00:05:44.670\nSo I need this to point to one of those\nguys that's exposed to the Internet.\n\n120\n00:05:44.670 --> 00:05:47.360\nAnd if I'm doing load balancing on it,\nthen I would want to point to the load\n\n121\n00:05:47.360 --> 00:05:50.410\nbalancing virtual name,\nnot the physical names of the servers.\n\n122\n00:05:50.410 --> 00:05:53.250\nSo there's different places\nyou might point this.\n\n123\n00:05:53.250 --> 00:05:57.760\nBut at a minimum, you need to point it\nto one of your Client Access Servers.\n\n124\n00:05:57.760 --> 00:06:00.960\nSo I'm gonna find my lab-caso1.\n\n125\n00:06:00.960 --> 00:06:02.980\nAnd I'll say okay to that.\n\n126\n00:06:02.980 --> 00:06:03.550\nAll right.\n\n127\n00:06:03.550 --> 00:06:10.045\nSo now autodiscover.itprotv.net is\npointing to lab-cas01.itprotv.net.\n\n128\n00:06:10.045 --> 00:06:14.410\nNow the advantage of doing CNAME is if\nI ever want to change that server's IP,\n\n129\n00:06:14.410 --> 00:06:17.630\nI can just go and\nchange lab-cas01's IP, and\n\n130\n00:06:17.630 --> 00:06:19.930\nthe alias points in the new IP,\nyou're done.\n\n131\n00:06:19.930 --> 00:06:23.970\nIf I had done an A-record instead,\nanytime I change the cast IP I would\n\n132\n00:06:23.970 --> 00:06:27.180\nhave to go and change the A-record for\nthe Auto Discover's IP also.\n\n133\n00:06:27.180 --> 00:06:29.110\nI'd have to change it in two places and\n\n134\n00:06:29.110 --> 00:06:31.600\nthe odds are we'll forget,\nthings break and you got problems.\n\n135\n00:06:31.600 --> 00:06:33.450\nSo it's always better\nto do a CNAME if can.\n\n136\n00:06:34.460 --> 00:06:38.740\nBut now if there's an external client\nthat's trying to resolve this,\n\n137\n00:06:38.740 --> 00:06:41.800\nthey'll actually be able to find it and\nthey'll get the client access server.\n\n138\n00:06:41.800 --> 00:06:45.639\nAnd we can test that out right from our\nclient if we fire up a command prompt.\n\n139\n00:06:46.650 --> 00:06:49.680\nAnd let me just boost up that font\nsize a little bit so we can see it.\n\n140\n00:06:52.000 --> 00:06:57.630\nAnd they can just do a quick NS lookup\nof autodiscover.itprotv.net and\n\n141\n00:06:57.630 --> 00:07:02.170\nsee if it resolves.\n\n142\n00:07:02.170 --> 00:07:05.690\nAnd I can see that it's an alias\nthat's pointing to lab-cas01\n\n143\n00:07:05.690 --> 00:07:08.840\nthat resolves to 192.168.0.12.\n\n144\n00:07:08.840 --> 00:07:11.560\nAnd, so there is no server at\nauto discover.itvpro.net, but\n\n145\n00:07:11.560 --> 00:07:13.240\nthis points us to it.\n\n146\n00:07:13.240 --> 00:07:16.950\nAnd, so now we can get there, and\nwe should be able to resolve that,\n\n147\n00:07:16.950 --> 00:07:19.920\nassuming the client accessor\nis exposed to the Internet.\n\n148\n00:07:19.920 --> 00:07:22.510\nNow, when I say exposed to the Internet,\nwhat do we mean?\n\n149\n00:07:22.510 --> 00:07:25.590\nAt a minimum, just for\nAuto Discover to work.\n\n150\n00:07:25.590 --> 00:07:28.140\nWe need TCP port 443, right?\n\n151\n00:07:28.140 --> 00:07:29.570\nSecure HTTP traffic.\n\n152\n00:07:29.570 --> 00:07:30.130\nThat's what we need.\n\n153\n00:07:30.130 --> 00:07:30.650\nWe need that open.\n\n154\n00:07:30.650 --> 00:07:32.130\nRight?\nYou're gonna need that for\n\n155\n00:07:32.130 --> 00:07:34.430\nOutlook web access or Outlook web app.\n\n156\n00:07:34.430 --> 00:07:36.300\nYou're gonna need it for\nthe offline address book.\n\n157\n00:07:36.300 --> 00:07:38.180\nYou're gonna need it for\nthe exchange control panel.\n\n158\n00:07:38.180 --> 00:07:40.070\nSo, you're gonna need\nthat port open anyway.\n\n159\n00:07:40.070 --> 00:07:43.150\nSo, on a client access\nserver at a minimum.\n\n160\n00:07:43.150 --> 00:07:46.560\nWe need that 443 open, TCP port 443 for\npeople to be able to connect.\n\n161\n00:07:46.560 --> 00:07:50.010\nAnd that's going to make Auto Discover,\nOutlook Web Ap, all those other ones,\n\n162\n00:07:50.010 --> 00:07:52.140\nit's going to make them all work,\nall right.\n\n163\n00:07:52.140 --> 00:07:54.160\nBut there's a few other services\nwe need to be aware of.\n\n164\n00:07:54.160 --> 00:07:57.720\nWhen you're configuring that client access\nserver to be exposed to the iInternet\n\n165\n00:07:57.720 --> 00:07:59.050\nyou may wanna configure a few more.\n\n166\n00:07:59.050 --> 00:08:00.960\nAnd I'll post all these\nwith the show notes.\n\n167\n00:08:00.960 --> 00:08:02.590\nBut let me just show you right here.\n\n168\n00:08:02.590 --> 00:08:06.360\nThese are the ports that we want to\nmake available from the Internet for\n\n169\n00:08:06.360 --> 00:08:07.930\ndifferent services.\n\n170\n00:08:07.930 --> 00:08:09.710\nSo for example, SMTP.\n\n171\n00:08:09.710 --> 00:08:13.830\nYou're incoming and\noutgoing email uses S/SMTP.\n\n172\n00:08:13.830 --> 00:08:17.310\nSo if this client access server's going\nto be that point of entry, we're going\n\n173\n00:08:17.310 --> 00:08:22.490\nto need to have port 25 open for\nnon-secure and port 587 open for secure.\n\n174\n00:08:22.490 --> 00:08:25.820\nYour clients, right like Outlook,\nthey'll use that 587,\n\n175\n00:08:25.820 --> 00:08:29.675\nthey'll use that secure connection,\nbut servers when they're moving\n\n176\n00:08:29.675 --> 00:08:31.933\ne-mail back and forth will use this\nnon-secure port 25, all right.\n\n177\n00:08:33.730 --> 00:08:35.800\nIf you choose to use pop 3.\n\n178\n00:08:35.800 --> 00:08:40.730\nYou'll need port 110 for\nnon-secure and 995 for secure.\n\n179\n00:08:40.730 --> 00:08:44.440\nAnd if you choose to support IMAP4,\nyou'll need 143 for\n\n180\n00:08:44.440 --> 00:08:48.060\nIMAP nonsecure and\nthen 993 for secure IMAP.\n\n181\n00:08:48.060 --> 00:08:50.220\nAnd you don't have to turn them all on.\n\n182\n00:08:50.220 --> 00:08:51.860\nMaybe I just want the secure ones.\n\n183\n00:08:51.860 --> 00:08:53.920\nSo I might not turn on 110 and 143.\n\n184\n00:08:53.920 --> 00:08:55.680\nI might just turn on 995 and 993.\n\n185\n00:08:55.680 --> 00:08:57.930\nNow, what do I mean by turned on?\n\n186\n00:08:57.930 --> 00:08:58.980\nWell, I mean.\n\n187\n00:08:58.980 --> 00:09:02.060\nGo to your firewall and\nopen up those ports on the firewall.\n\n188\n00:09:02.060 --> 00:09:06.700\nYour firewall will be blocking these by\ndefault for your client access server.\n\n189\n00:09:06.700 --> 00:09:09.430\nBut at a minimum we need this guy and\n\n190\n00:09:09.430 --> 00:09:12.350\nanother neat little thing here it\ndoesn't have to be direct connectivity.\n\n191\n00:09:12.350 --> 00:09:15.670\nWe don't have to allow our clients\nto connect directly to this.\n\n192\n00:09:15.670 --> 00:09:17.490\nYou might have a reverse proxy.\n\n193\n00:09:17.490 --> 00:09:19.954\nRight, there's plenty of companies\nout there that make reverse proxies,\n\n194\n00:09:19.954 --> 00:09:20.860\neven Microsoft.\n\n195\n00:09:20.860 --> 00:09:24.640\nMicrosoft has their threat-management\ngateway which used to be the ISA,\n\n196\n00:09:24.640 --> 00:09:26.390\nthe Internet Security and\nAcceleration server.\n\n197\n00:09:26.390 --> 00:09:28.508\nNow it's there,\nthe threat-management gateway.\n\n198\n00:09:28.508 --> 00:09:33.440\nAnd it can sit in-between your cache, your\nclient access servers, and the Internet.\n\n199\n00:09:33.440 --> 00:09:35.030\nAnd it can inspect traffic.\n\n200\n00:09:35.030 --> 00:09:37.800\nAnd block attacks before they\neven get to your system.\n\n201\n00:09:37.800 --> 00:09:41.340\nIt could be things like\na Cisco Intrusion Detection Service.\n\n202\n00:09:41.340 --> 00:09:47.195\nIf could be a say, F5, they have\nthe firepass boxes that do the same thing.\n\n203\n00:09:47.195 --> 00:09:50.075\nThere's a number of different vendors out\nthere that make these reverse proxies that\n\n204\n00:09:50.075 --> 00:09:51.725\ncan sit in between your system and\nthe Internet.\n\n205\n00:09:51.725 --> 00:09:56.277\nSo if that's the case,\nyou need 443 open to the reverse proxy.\n\n206\n00:09:56.277 --> 00:09:58.395\nAnd then the proxy would need to\nbe able to talk to your server.\n\n207\n00:09:58.395 --> 00:10:00.835\nSo just keep that in mind,\nyour security configuration might vary.\n\n208\n00:10:02.420 --> 00:10:05.246\nAll right, but assuming all of that's\nopen, we should be able to connect and\n\n209\n00:10:05.246 --> 00:10:06.940\nAuto Discover should work.\n\n210\n00:10:06.940 --> 00:10:10.370\nNow I'm throwing my IT department\nshould in there to give me some\n\n211\n00:10:10.370 --> 00:10:11.620\ncoverage if it doesn't work.\n\n212\n00:10:11.620 --> 00:10:16.310\nBut I'm gonna punch in my name, my e-mail\naddress, and when I hit Next it's gonna\n\n213\n00:10:16.310 --> 00:10:20.780\nlook first for itprotv.net/autodiscover,\nwhich it's not going to find.\n\n214\n00:10:20.780 --> 00:10:24.830\nThen it's gonna fail over to\nAuto Discover to itprotv.net,\n\n215\n00:10:24.830 --> 00:10:27.150\nwhich we just created and it will find.\n\n216\n00:10:27.150 --> 00:10:28.690\nAnd so\nit's gonna reach out to that system.\n\n217\n00:10:28.690 --> 00:10:33.710\nIt's searching for the settings and it\nshould find those settings and configure.\n\n218\n00:10:33.710 --> 00:10:37.900\nNow Auto Discover over the wham\nalmost always takes longer.\n\n219\n00:10:37.900 --> 00:10:41.080\nIt's gotta reach along the Internet and\nconnect to the stuff.\n\n220\n00:10:41.080 --> 00:10:44.220\nAnd, so it may take a little bit longer,\nbut when its done, it'll connect.\n\n221\n00:10:44.220 --> 00:10:49.520\nNow, the most common point of failure here\nif this doesn't work, are certificates.\n\n222\n00:10:49.520 --> 00:10:52.460\nIf there are certificates on\nthe server and we don't trust them,\n\n223\n00:10:52.460 --> 00:10:55.260\nthen Auto Discover is going to fail,\nand its not going to work right?\n\n224\n00:10:55.260 --> 00:10:56.870\nSo certificates are that\nnumber one problem,\n\n225\n00:10:56.870 --> 00:11:00.090\nthat we might have to go and re-issue\ncertificates, or get updated ones.\n\n226\n00:11:00.090 --> 00:11:03.930\nAn easy way to test that while we wait is\nto just fire up a web browser and try and\n\n227\n00:11:03.930 --> 00:11:05.390\nlog in to OWA.\n\n228\n00:11:05.390 --> 00:11:13.430\nSo if I browse to my client\naccess server-OWA, right?\n\n229\n00:11:13.430 --> 00:11:16.110\nIf I go to the OWA page and\nit goes secure,\n\n230\n00:11:16.110 --> 00:11:18.050\nI see the little lock up here there,\nright?\n\n231\n00:11:18.050 --> 00:11:20.830\nIf I get the red bar,\nI know I've got a certificate problem and\n\n232\n00:11:20.830 --> 00:11:22.980\nthat's going to make\nAuto Discover not work.\n\n233\n00:11:22.980 --> 00:11:25.410\nAnd you can test even further.\n\n234\n00:11:25.410 --> 00:11:32.280\nI went to, the sever that I went\nto was lab-cas01.itprotv.net.\n\n235\n00:11:32.280 --> 00:11:37.210\nBut that's not what my clients\nare going to, are they?\n\n236\n00:11:37.210 --> 00:11:40.880\nThey're going to autodiscover.itprotv.net.\n\n237\n00:11:40.880 --> 00:11:44.390\nAnd so I can punch that in as if\nI was gonna login to OWA there.\n\n238\n00:11:44.390 --> 00:11:51.800\nAnd so I'm saying, I'm trying to say,\nhttps://autodiscover.itprotv.net/owa and\n\n239\n00:11:51.800 --> 00:11:55.500\nwhen I browse to that,\nit's gonna hit the CNAME.\n\n240\n00:11:55.500 --> 00:11:58.700\nSo I still see Auto Discover up there,\nand my lock is still good.\n\n241\n00:11:58.700 --> 00:12:00.760\nSo in my case, my certificates are good.\n\n242\n00:12:00.760 --> 00:12:02.360\nI shouldn't have any problems there.\n\n243\n00:12:02.360 --> 00:12:03.730\nLet's go see what Outlook is doing.\n\n244\n00:12:03.730 --> 00:12:06.720\nOh, and Outlook is finished\nwhile I gabbed on and on.\n\n245\n00:12:06.720 --> 00:12:09.580\nNow, it downloaded the settings\nfrom Auto Discover, so\n\n246\n00:12:09.580 --> 00:12:11.320\nnow it knows the server to connect to.\n\n247\n00:12:11.320 --> 00:12:12.980\nIt knows the ports to use.\n\n248\n00:12:12.980 --> 00:12:14.540\nIt knows all that information.\n\n249\n00:12:14.540 --> 00:12:16.760\nWe gave it our username and password.\n\n250\n00:12:16.760 --> 00:12:18.550\nWe're now configured.\n\n251\n00:12:18.550 --> 00:12:21.040\nYou could actually go in and\nchange the settings if you wanted,\n\n252\n00:12:21.040 --> 00:12:22.280\nmanually go in and mess with it.\n\n253\n00:12:22.280 --> 00:12:26.180\nBut for the most part, it's done,\nand now Outlook is gonna fire up and\n\n254\n00:12:26.180 --> 00:12:27.690\nI'm connected.\n\n255\n00:12:27.690 --> 00:12:32.300\nI had to create that DNSS record to\nget this to work and have it in place.\n\n256\n00:12:32.300 --> 00:12:33.670\nNow, the cool part is,\n\n257\n00:12:33.670 --> 00:12:38.210\nonce this is set up,\nIt's not just set up for basic Outlook.\n\n258\n00:12:38.210 --> 00:12:42.700\nIt's also set up for other advanced\nfeatures like the offline address book and\n\n259\n00:12:42.700 --> 00:12:43.920\nMail Tips for example.\n\n260\n00:12:43.920 --> 00:12:45.200\nLet me show you Mail Tips.\n\n261\n00:12:45.200 --> 00:12:47.070\nMail Tips are a neat feature.\n\n262\n00:12:47.070 --> 00:12:50.660\nIt's a feature that's kind of\ntacked on to the Outlook Web app.\n\n263\n00:12:50.660 --> 00:12:53.930\nAnd Auto Discover connects it, but\na lot of people don't even know it exists.\n\n264\n00:12:53.930 --> 00:12:56.000\nAnd so you never see Mail Tips very much.\n\n265\n00:12:56.000 --> 00:13:00.820\nWhat Microsoft did is they said, look,\na lot of times, people draft e-mails, and\n\n266\n00:13:00.820 --> 00:13:01.570\nthey get blocked.\n\n267\n00:13:01.570 --> 00:13:04.270\nYou get an NDR, a nondelivery report.\n\n268\n00:13:04.270 --> 00:13:06.090\nThat NDR doesn't always come right away.\n\n269\n00:13:06.090 --> 00:13:07.450\nYou guys have probably had this before.\n\n270\n00:13:07.450 --> 00:13:09.640\nHave you ever sent an email, and\n\n271\n00:13:09.640 --> 00:13:14.650\nthen a day later you get a message\nsaying this email has been delayed?\n\n272\n00:13:14.650 --> 00:13:16.440\nOr this email failed to deliver?\n\n273\n00:13:16.440 --> 00:13:18.980\nWhat you're getting is\na nondelivery report, and NDR.\n\n274\n00:13:18.980 --> 00:13:20.790\nAnd, that's telling you\nthere was a problem but\n\n275\n00:13:20.790 --> 00:13:21.650\nyou didn't know that right away.\n\n276\n00:13:21.650 --> 00:13:23.360\nIt took a while for that to happen.\n\n277\n00:13:23.360 --> 00:13:28.330\nWell, there are times where we\nalready know something is gonna fail.\n\n278\n00:13:28.330 --> 00:13:30.970\nAnd so the server can actually\ntell people ahead of time, or\n\n279\n00:13:30.970 --> 00:13:31.930\nit can just tell them anything.\n\n280\n00:13:31.930 --> 00:13:34.390\nYou can actually give it\nany message you want, and\n\n281\n00:13:34.390 --> 00:13:35.880\nthat will generate what's\ncalled a Mail Tip.\n\n282\n00:13:35.880 --> 00:13:39.960\nA little on screen prompt that\nlet you know there's a problem.\n\n283\n00:13:39.960 --> 00:13:44.070\nAnd I like to use Mail Tips as a great\nway to test connectivity beyond just your\n\n284\n00:13:44.070 --> 00:13:45.800\nbasic email connectivity.\n\n285\n00:13:45.800 --> 00:13:46.990\nSo let me show you how Mail Tips work.\n\n286\n00:13:48.090 --> 00:13:52.920\nLet's say that I'm a user,\nI'm Jane here, I'm logged in.\n\n287\n00:13:52.920 --> 00:13:55.850\nAnd I'm about to fire off an e-mail to me,\nto Don Pezet.\n\n288\n00:13:57.760 --> 00:13:59.300\nI'm not in the office, right?\n\n289\n00:13:59.300 --> 00:14:01.300\nOr maybe I've been fired.\n\n290\n00:14:01.300 --> 00:14:02.240\nSo I've been fired, but\n\n291\n00:14:02.240 --> 00:14:05.400\nmy e-mail account is still active\nbecause we're collecting e-mails on it.\n\n292\n00:14:05.400 --> 00:14:07.070\nBut I've been fired.\n\n293\n00:14:07.070 --> 00:14:10.310\nWell, I might want a way to\ntell Jane that that's happened.\n\n294\n00:14:10.310 --> 00:14:12.500\nI haven't disabled the account\ncuz I'm still collecting e-mails.\n\n295\n00:14:12.500 --> 00:14:14.080\nSo she doesn't necessarily know that.\n\n296\n00:14:14.080 --> 00:14:16.820\nIf she goes in to craft a new e-mail.\n\n297\n00:14:16.820 --> 00:14:21.050\nShe could fire off an e-mail to Don Pezet.\n\n298\n00:14:21.050 --> 00:14:25.120\nAnd it'll find me in the list\ncuz my account's not disabled.\n\n299\n00:14:25.120 --> 00:14:32.160\nAnd I need a quick favor, and\ncan you update this document for me?\n\n300\n00:14:32.160 --> 00:14:33.380\nOr something like that.\n\n301\n00:14:33.380 --> 00:14:34.200\nAll right?\n\n302\n00:14:34.200 --> 00:14:35.890\nSo she fires off this e-mail.\n\n303\n00:14:35.890 --> 00:14:39.510\nShe doesn't know that my account is no\nlonger active, that I've been terminated.\n\n304\n00:14:39.510 --> 00:14:41.260\nIt's all invisible to her, right?\n\n305\n00:14:41.260 --> 00:14:43.530\nAnd then, maybe later on down the road,\n\n306\n00:14:43.530 --> 00:14:47.990\nwe disable that account and now she\ntries to e-mail and she gets an NDR.\n\n307\n00:14:47.990 --> 00:14:50.283\nWouldn't it have been nice if we could\nhave given her some kind of confirmation\n\n308\n00:14:50.283 --> 00:14:51.370\nahead of time for that?\n\n309\n00:14:51.370 --> 00:14:52.670\nAnd, a Mail Tip will do it.\n\n310\n00:14:52.670 --> 00:14:56.920\nSo, all we have to do is as an\nadministrator, if we log into our exchange\n\n311\n00:14:56.920 --> 00:15:00.960\nadmin center, you can go to recipients and\nyou can pick somebody's mail box.\n\n312\n00:15:00.960 --> 00:15:01.820\nSo, I'll take my mailbox.\n\n313\n00:15:03.050 --> 00:15:05.980\nAnd when you edit the mailbox, you'll see\ndifferent settings down the left side,\n\n314\n00:15:05.980 --> 00:15:08.400\nand one of them is a Mail Tip, right?\n\n315\n00:15:08.400 --> 00:15:12.070\nAnd here,\nyou can type in any message you want.\n\n316\n00:15:12.070 --> 00:15:14.875\nYou can type up to 175 characters,\nkinda like a tweet.\n\n317\n00:15:14.875 --> 00:15:17.170\n[LAUGH] You can type\nwhatever you want in there.\n\n318\n00:15:17.170 --> 00:15:19.830\nAnd when a user goes\nto e-mail this person,\n\n319\n00:15:19.830 --> 00:15:24.970\nthey'll see this message on screen letting\nthem now before they even hit send.\n\n320\n00:15:24.970 --> 00:15:27.840\nWe can avoid those NDR's\nbefore they even happen.\n\n321\n00:15:27.840 --> 00:15:32.960\nSo we can say something like,\nthis employee has been terminated.\n\n322\n00:15:34.880 --> 00:15:40.700\nPlease forward requests to John Doe or\nsomebody else.\n\n323\n00:15:40.700 --> 00:15:42.740\nJust giving them that\nmessage to let them know.\n\n324\n00:15:42.740 --> 00:15:44.070\nSo that's the Mail Tip that I'm defining.\n\n325\n00:15:45.650 --> 00:15:50.260\nMail tips are delivered by a secure\nweb connection between Outlook and\n\n326\n00:15:50.260 --> 00:15:52.600\nthe mail server, the client access server.\n\n327\n00:15:52.600 --> 00:15:55.300\nWe're checking in to get those\nalongside of our e-mail.\n\n328\n00:15:55.300 --> 00:15:57.400\nIt's like a secondary connection.\n\n329\n00:15:57.400 --> 00:16:01.450\nSo, when I go back to Jane,\nhere she is in Outlook, and\n\n330\n00:16:01.450 --> 00:16:07.500\nif we go to craft a new e-mail,\nand we go to e-mail me, right?\n\n331\n00:16:07.500 --> 00:16:09.780\nWhen we do that, in the background,\n\n332\n00:16:09.780 --> 00:16:13.700\nit's gonna do a lookup to see if\nthere's any Mail Tips available.\n\n333\n00:16:13.700 --> 00:16:15.950\nAnd, it's gonna populate them and\ndisplay them right here.\n\n334\n00:16:15.950 --> 00:16:18.850\nNow, Mail Tips take a little\nbit to actually get in there,\n\n335\n00:16:18.850 --> 00:16:20.090\nbecause a lot of this gets cached.\n\n336\n00:16:20.090 --> 00:16:23.740\nRemember, Outlook runs in\ncache mode by default, so\n\n337\n00:16:23.740 --> 00:16:27.005\nthis information is getting kind of\ncached down, and then run locally.\n\n338\n00:16:27.005 --> 00:16:29.050\nYour Mail Tips actually get cached too.\n\n339\n00:16:29.050 --> 00:16:32.476\nIf there's e-mail that you, or people that\nyou e-mail frequently, you'll cache their\n\n340\n00:16:32.476 --> 00:16:35.860\nMail Tips, so you'll see them even when\nyou're offline, which is pretty neat.\n\n341\n00:16:35.860 --> 00:16:37.890\nBut, it means I'm not going\nto see this one right away.\n\n342\n00:16:37.890 --> 00:16:41.220\nBut we'll see it, there's actually\na couple of ways we can generate this one,\n\n343\n00:16:41.220 --> 00:16:43.310\nlet me log in to OWA and\nwe'll see it here.\n\n344\n00:16:44.460 --> 00:16:49.240\nSo if I log in as, let's see,\nwho is she, janesmith@itprotv.net,\n\n345\n00:16:49.240 --> 00:16:53.800\nwhich I think I've misspelled\nevery single time this episode.\n\n346\n00:16:53.800 --> 00:16:55.480\nSo I'm gonna get logged in as her,\n\n347\n00:16:55.480 --> 00:17:00.180\napparently this is the first\ntime she's logged in, all right.\n\n348\n00:17:00.180 --> 00:17:02.830\nAnd OWA is nice because it's not cached,\nright?\n\n349\n00:17:02.830 --> 00:17:05.060\nWe're seeing information\nright from the server.\n\n350\n00:17:05.060 --> 00:17:10.995\nSo when she drafts an e-mail here, and\nshe goes to e-mail Don Pezet, right?\n\n351\n00:17:10.995 --> 00:17:14.005\nIt's searching for\nthat user and it finds me, and\n\n352\n00:17:14.005 --> 00:17:17.035\nthen look at the message that just\nappeared right there, Don Pezet.\n\n353\n00:17:17.035 --> 00:17:18.255\nThis employee has been terminated.\n\n354\n00:17:18.255 --> 00:17:19.835\nPlease forward requests to John Doe.\n\n355\n00:17:19.835 --> 00:17:22.245\nShe sees an on-screen prompt\nthat lets her know that.\n\n356\n00:17:22.245 --> 00:17:23.395\nThat's a Mail Tip.\n\n357\n00:17:23.395 --> 00:17:23.945\nOkay?\n\n358\n00:17:23.945 --> 00:17:26.595\nAnd that's one of the other things\nthat Auto Discover is configuring.\n\n359\n00:17:26.595 --> 00:17:31.205\nIt configures a lot of things,\nyour e-mail, your contacts, your calendar,\n\n360\n00:17:31.205 --> 00:17:34.070\nyour tasks, right,\ngetting all that set up with the server.\n\n361\n00:17:34.070 --> 00:17:35.520\nIt sets up a lot.\n\n362\n00:17:35.520 --> 00:17:36.870\nIt's really pretty interesting.\n\n363\n00:17:36.870 --> 00:17:39.710\nPretty neat stuff,\nall done with automatic discovery.\n\n364\n00:17:41.552 --> 00:17:44.200\nAll right,\nI feel like I'm leaving something out but\n\n365\n00:17:44.200 --> 00:17:46.110\nI think that's the bulk of it.\n\n366\n00:17:46.110 --> 00:17:50.640\nLet my just scan my notes real quick,\noh it looks like that's about it.\n\n367\n00:17:50.640 --> 00:17:53.440\nSo key things to remember here,\nlet's wrap this one up.\n\n368\n00:17:53.440 --> 00:17:56.380\nSo key things to remember when it\ncomes to setting up Auto Discover,\n\n369\n00:17:56.380 --> 00:17:57.978\nit really is two separate entities.\n\n370\n00:17:57.978 --> 00:18:01.640\nThere's Auto Discover for LAN clients,\nclients that are joined to your domain.\n\n371\n00:18:01.640 --> 00:18:05.560\nAnd then there's Auto Discover for\nexternal clients, people that are outside.\n\n372\n00:18:05.560 --> 00:18:09.600\nOn the inside we need to make sure\nthat we've got valid certificates.\n\n373\n00:18:09.600 --> 00:18:12.990\nThat's important, although the self-signed\ncertificate might work fine for us.\n\n374\n00:18:12.990 --> 00:18:15.556\nWe also need to make sure that our clients\nare joining the Active Directory and\n\n375\n00:18:15.556 --> 00:18:17.210\nAuto Discover will work.\n\n376\n00:18:17.210 --> 00:18:20.810\nFor clients on the outside,\nwe need valid certificates, same thing.\n\n377\n00:18:20.810 --> 00:18:24.490\nBut we also need to make\nsure that we've got\n\n378\n00:18:24.490 --> 00:18:28.270\nour firewall open to allow connectivity,\nand that we've got a DNS record.\n\n379\n00:18:28.270 --> 00:18:31.530\nBecause the Active Directory lookups\nwon't work for those external users.\n\n380\n00:18:31.530 --> 00:18:33.778\nSo that's an important one to make\nsure that we've got that too.\n\n381\n00:18:33.778 --> 00:18:38.220\nAll right, but\nafter that Auto Discover just works.\n\n382\n00:18:38.220 --> 00:18:41.080\nYou get it configured and you put it outta\nyour mind, and you forget all about it and\n\n383\n00:18:41.080 --> 00:18:44.040\nyears go by everybody is already\nconfiguring and it really works out well,\n\n384\n00:18:44.040 --> 00:18:45.030\nso that's basically it.\n\n385\n00:18:46.040 --> 00:18:48.940\nAll right well, in this episode we got\na chance to see the second part of\n\n386\n00:18:48.940 --> 00:18:49.600\nAuto Discover.\n\n387\n00:18:49.600 --> 00:18:51.180\nWe created a DNS entry.\n\n388\n00:18:51.180 --> 00:18:52.900\nRemember I did a CNAME on that one.\n\n389\n00:18:52.900 --> 00:18:56.060\nCNAME or aliases are always better than\na records cuz it makes maintenance\n\n390\n00:18:56.060 --> 00:18:57.080\na little bit easier.\n\n391\n00:18:57.080 --> 00:18:58.960\nWe saw that external client connect.\n\n392\n00:18:58.960 --> 00:19:01.890\nWe also saw how we could test that\nconnectivity, actually we saw that in part\n\n393\n00:19:01.890 --> 00:19:04.980\none, to make sure that Auto Discover\nis working for our users.\n\n394\n00:19:04.980 --> 00:19:08.130\nAnd then at the end of the episode I\ncovered Mail Tips, a little bit off topic,\n\n395\n00:19:08.130 --> 00:19:11.015\nbut it's something that is set up\nas part of Auto Discover also.\n\n396\n00:19:11.015 --> 00:19:12.955\nSo definitely something\nyou want to be aware of.\n\n397\n00:19:12.955 --> 00:19:15.575\nAnd easy to use, a neat little\nfeature that's baked in there,\n\n398\n00:19:15.575 --> 00:19:17.377\na lot of people don't know about it.\n\n399\n00:19:17.377 --> 00:19:19.875\nAll right well that's all I've got for\nAuto Discover, so\n\n400\n00:19:19.875 --> 00:19:21.365\nwe'll wrap this two part series up.\n\n401\n00:19:21.365 --> 00:19:22.675\nI hope you guys enjoyed it.\n\n402\n00:19:22.675 --> 00:19:26.515\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n403\n00:19:26.515 --> 00:19:27.272\n[SOUND]\n\n",
          "vimeoId": "136729105"
        },
        {
          "description": "In this episode, Don takes the viewers into the world of bring your own device (BYOD) clients. He demonstrates the mobile device management features found in Exchange 2013. He ends the episode by applying a mobile security policy to an Android device.",
          "length": "1433",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-3-mobile_access-081715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-3-mobile_access-081715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-3-3-mobile_access-081715-1-sm.jpg",
          "title": "Mobile Access",
          "transcript": "WEBVTT\n\n1\n00:00:00.227 --> 00:00:10.750\n[MUSIC]\n\n2\n00:00:10.750 --> 00:00:11.597\nAll right.\n\n3\n00:00:11.597 --> 00:00:13.470\nGood morning, good afternoon,\nand good evening.\n\n4\n00:00:13.470 --> 00:00:16.080\nWelcome back to another\nepisode of ITProTV.\n\n5\n00:00:16.080 --> 00:00:17.411\nI'm your host Don Pezet,\n\n6\n00:00:17.411 --> 00:00:20.807\nback again with another episode\nof Microsoft Exchange 2013.\n\n7\n00:00:20.807 --> 00:00:21.877\nAnd in this episode,\n\n8\n00:00:21.877 --> 00:00:25.450\nwe're going to be taking a look at\nthe exciting world of mobile access.\n\n9\n00:00:25.450 --> 00:00:28.970\nAnd by mobile access I mean, well,\nthe whole bring your own device movement.\n\n10\n00:00:28.970 --> 00:00:31.130\nYou got a lot people bringing cell phones,\nand tablets,\n\n11\n00:00:31.130 --> 00:00:33.330\nand all sorts of other\ngear into your network.\n\n12\n00:00:33.330 --> 00:00:36.730\nAnd it does create a little\nbit of a management issue and\n\n13\n00:00:36.730 --> 00:00:39.860\nit creates a bit of a security risk,\nby having this data out there.\n\n14\n00:00:39.860 --> 00:00:44.830\nWell fortunately Microsoft Exchange\n2013 has an amazing set of mobile device\n\n15\n00:00:44.830 --> 00:00:49.010\nmanagement or MDM features built right\ninto it, so we don't need third party\n\n16\n00:00:49.010 --> 00:00:52.830\nsoftware like a Blackberry Enterprise\nServer or Good Server, or whatever.\n\n17\n00:00:52.830 --> 00:00:56.059\nWe can use the MDM built right\ninto Exchange to manage and\n\n18\n00:00:56.059 --> 00:01:00.180\nsecure our remote devices and\neven to remote wipe them if they get lost,\n\n19\n00:01:00.180 --> 00:01:04.716\nall while letting users maintain control\nof their own device through the whole\n\n20\n00:01:04.716 --> 00:01:06.660\nbring your own device movement.\n\n21\n00:01:06.660 --> 00:01:10.332\nSo it's pretty neat, and\nthis works with Windows mobile phone,\n\n22\n00:01:10.332 --> 00:01:14.820\nwith Android, with iOS, Microsoft\ndoesn't really care which phone you use.\n\n23\n00:01:14.820 --> 00:01:19.770\nNow they do have limited features on some\nthings like on BlackBerries, but on IOS,\n\n24\n00:01:19.770 --> 00:01:22.870\nAndroid, and Windows Mobile, the big\nthree those, well I say the big three,\n\n25\n00:01:22.870 --> 00:01:24.300\nWindows Mobile is like small three.\n\n26\n00:01:24.300 --> 00:01:28.570\nBut, [LAUGH], we've got that functionality\nand features to secure and manage them,\n\n27\n00:01:28.570 --> 00:01:31.200\nso let's take a look at how that works.\n\n28\n00:01:31.200 --> 00:01:34.580\nFirst off, whenever you set\nup a user inside of Exchange,\n\n29\n00:01:34.580 --> 00:01:38.070\nthe whole mobile functionality\nis kind of enabled by default.\n\n30\n00:01:38.070 --> 00:01:41.120\nThey get that functionality\non their account.\n\n31\n00:01:41.120 --> 00:01:44.470\nIf I take a look at a user, like here\nI am in my Exchange admin center.\n\n32\n00:01:44.470 --> 00:01:48.090\nIf I go under recipients and I take any\none of these, I'll just take mine for\n\n33\n00:01:48.090 --> 00:01:49.420\nexample.\n\n34\n00:01:49.420 --> 00:01:52.330\nIf I go and edit the user,\nwhen we go and look in the user,\n\n35\n00:01:52.330 --> 00:01:55.760\nyou'll see different things, and\nwe're looking for mailbox features.\n\n36\n00:01:55.760 --> 00:01:57.250\nAnd here you'll see things\nthat are turned on.\n\n37\n00:01:57.250 --> 00:02:00.110\nAnd right down here,\nI've got mobile devices.\n\n38\n00:02:00.110 --> 00:02:05.200\nAnd you'll see Exchange ActiveSync and\nOWA for Devices.\n\n39\n00:02:05.200 --> 00:02:09.000\nThose are two different connectivity\nmethods that devices can use to establish\n\n40\n00:02:09.000 --> 00:02:10.440\na connection to your mailbox.\n\n41\n00:02:10.440 --> 00:02:12.970\nAnd it's not just as simple\nas checking your email.\n\n42\n00:02:12.970 --> 00:02:15.670\nIf it would just checking your email,\nyou'd use POP3 or\n\n43\n00:02:15.670 --> 00:02:16.990\nIMAP4 and then you'd be done.\n\n44\n00:02:18.130 --> 00:02:21.990\nBut what these two methods\nbring us is a lot more.\n\n45\n00:02:21.990 --> 00:02:23.196\nLet's talk about ActiveSync.\n\n46\n00:02:23.196 --> 00:02:25.830\nActiveSync is the primary\nconnection method.\n\n47\n00:02:25.830 --> 00:02:26.850\nAnd that's the one we wanted.\n\n48\n00:02:26.850 --> 00:02:28.030\nThis is a little confusing here.\n\n49\n00:02:28.030 --> 00:02:30.970\nSo see how it says\nDisable Exchange Active Synch?\n\n50\n00:02:30.970 --> 00:02:33.770\nThat's how I know ActiveSync\nis turned on for me right now.\n\n51\n00:02:33.770 --> 00:02:37.160\nAnd so by default it's turned on, and\nit's giving me the option to turn it off.\n\n52\n00:02:37.160 --> 00:02:40.020\nIf I turn it off, it'll change to\nsay Enable Exchange ActiveSync and\n\n53\n00:02:40.020 --> 00:02:41.568\nI can turn that on.\n\n54\n00:02:41.568 --> 00:02:46.580\nThe way ActiveSync works is it uses\nautodiscover, which if you watch our\n\n55\n00:02:46.580 --> 00:02:51.890\nautodiscover episode, you're familiar\nwith, a client like an Android phone, can\n\n56\n00:02:51.890 --> 00:02:56.680\nlook at your email address, reach out to\nthe internet, and find your mail server.\n\n57\n00:02:56.680 --> 00:03:00.380\nAnd when it finds your mail server\nit can look for the ActiveSync\n\n58\n00:03:00.380 --> 00:03:03.950\nconfiguration file that'll tell it how\na phone should connect to the server.\n\n59\n00:03:03.950 --> 00:03:06.450\nAnd when it connects,\nit provides your username and password and\n\n60\n00:03:06.450 --> 00:03:10.820\nnow it has access to your email,\nyour tasks, your calendar, your contacts,\n\n61\n00:03:10.820 --> 00:03:13.940\nall that information right\nthere from your phone.\n\n62\n00:03:13.940 --> 00:03:17.880\nBut at the same time,\nit enables two really cool things.\n\n63\n00:03:17.880 --> 00:03:21.020\nThe first is a security policy.\n\n64\n00:03:21.020 --> 00:03:24.530\nIn exchange we have a mobile\nsecurity policy where we can dictate\n\n65\n00:03:24.530 --> 00:03:27.290\nhey your phone has to have a screen lock\nafter a certain amount of minutes and\n\n66\n00:03:27.290 --> 00:03:30.610\nit's got to be a pin number of\ngreater than these amount of numbers.\n\n67\n00:03:30.610 --> 00:03:32.660\nOr we need to be able to\nremote wipe your machine.\n\n68\n00:03:32.660 --> 00:03:35.040\nOr we need to limit the apps\nyou're allowed to run.\n\n69\n00:03:35.040 --> 00:03:38.880\nThat's part of the security policy, and\nwhen you connect the Exchange ActiveSync,\n\n70\n00:03:38.880 --> 00:03:40.830\nthat's what enables that policy.\n\n71\n00:03:40.830 --> 00:03:41.600\nRight?\n\n72\n00:03:41.600 --> 00:03:47.010\nThe other thing that enables is what's\ncalled Direct Push Notification.\n\n73\n00:03:47.010 --> 00:03:51.380\nOn older mobile systems, the way they\nworked is you'd connect through a POP3 or\n\n74\n00:03:51.380 --> 00:03:55.030\nIMAP4 and then 15 minutes or every 10\nminutes your phone would reach out and\n\n75\n00:03:55.030 --> 00:03:56.650\ncheck your mailbox for new mail.\n\n76\n00:03:56.650 --> 00:03:57.190\nRight.\n\n77\n00:03:57.190 --> 00:03:59.020\nWell, you might not get a lot of email.\n\n78\n00:03:59.020 --> 00:04:03.330\nAnd if you don't get a lot of email it's\nchecking all throughout the day keeping\n\n79\n00:04:03.330 --> 00:04:05.650\nyour phone awake, and\nburning up your battery.\n\n80\n00:04:05.650 --> 00:04:08.860\nAnd so a lot of systems that did that,\nthese are called pull notifications where\n\n81\n00:04:08.860 --> 00:04:10.580\nyou reach out to the server and\npull them down.\n\n82\n00:04:11.770 --> 00:04:14.840\nThose pull notifications drain\nyour battery and that stinks.\n\n83\n00:04:14.840 --> 00:04:16.480\nAnd people wanna know\nabout email right away,\n\n84\n00:04:16.480 --> 00:04:18.270\nthey don't wanna wait 10 or 15 minutes.\n\n85\n00:04:18.270 --> 00:04:21.920\nSo if you lowered it down to one minute\nyou definitely saw a hit on your battery.\n\n86\n00:04:21.920 --> 00:04:24.660\nWell, the way direct\npush notifications work\n\n87\n00:04:24.660 --> 00:04:28.220\nis instead of your client reaching out to\nthe server every so often to check for\n\n88\n00:04:28.220 --> 00:04:32.830\nmail, the server tells you\nwhen new email comes in.\n\n89\n00:04:32.830 --> 00:04:36.590\nSo if an hour goes by and no emails come\nin, the server just doesn't bother you.\n\n90\n00:04:36.590 --> 00:04:39.300\nBut if an email does come in,\nthe server immediately tells you.\n\n91\n00:04:39.300 --> 00:04:44.150\nSo you get a battery savings, and you get\nimmediate notification of new email and\n\n92\n00:04:44.150 --> 00:04:45.710\nthat's really cool, all right?\n\n93\n00:04:45.710 --> 00:04:48.310\nLet me talk a little bit about\ndirect push before I move into\n\n94\n00:04:48.310 --> 00:04:49.690\nthe configuration stuff.\n\n95\n00:04:49.690 --> 00:04:55.480\nSo the way direct push works is by\nmanipulating the way TCP works.\n\n96\n00:04:55.480 --> 00:04:57.590\nTCP, the transmission control protocol,\n\n97\n00:04:57.590 --> 00:05:01.360\nis used for the majority of our\ncommunications on the internet.\n\n98\n00:05:01.360 --> 00:05:03.890\nWhen you reach out to a website,\nfor example,\n\n99\n00:05:03.890 --> 00:05:09.010\nyou open up a TCP session to a server and\nyou say, give me a copy of your webpage.\n\n100\n00:05:09.010 --> 00:05:13.740\nAnd the server responds by transmitting\nthe webpage over that session.\n\n101\n00:05:13.740 --> 00:05:15.580\nWell the session has a timeout, and\n\n102\n00:05:15.580 --> 00:05:18.548\nit says hey, give me a copy of\nthe webpage and you got 30 seconds.\n\n103\n00:05:18.548 --> 00:05:22.080\nAnd if the 30 seconds run out\nthen the session times out and\n\n104\n00:05:22.080 --> 00:05:25.610\nyou get an error message on your screen,\nand you can try again, right?\n\n105\n00:05:25.610 --> 00:05:29.250\nWell with direct push, what happens is\nyour phone reaches out to Exchange,\n\n106\n00:05:29.250 --> 00:05:32.740\nand it says hey,\ngive me any new email I get.\n\n107\n00:05:32.740 --> 00:05:38.180\nAnd then it sets the time out to\na really big number, all right?\n\n108\n00:05:38.180 --> 00:05:39.700\nI think it's 30 minutes.\n\n109\n00:05:39.700 --> 00:05:41.240\nIt might be a full hour.\n\n110\n00:05:41.240 --> 00:05:42.260\nI think it's 30 minutes.\n\n111\n00:05:42.260 --> 00:05:43.910\nSo, it sets if for like 30 minutes.\n\n112\n00:05:43.910 --> 00:05:45.960\nAnd it says, hey,\nif I get a new email, send it to me.\n\n113\n00:05:45.960 --> 00:05:48.864\nAnd the server says, okay, I'm gonna wait.\n\n114\n00:05:48.864 --> 00:05:49.887\nAnd it just start to wait.\n\n115\n00:05:49.887 --> 00:05:51.630\nIt just sits there,and it waits.\n\n116\n00:05:51.630 --> 00:05:55.190\nAnd if a new email comes in,\nit can immediately send it to us.\n\n117\n00:05:55.190 --> 00:05:57.300\nBut if nothing comes in,\nit waits the full 30 minutes, and\n\n118\n00:05:57.300 --> 00:06:00.200\nright at the end of the 30 minutes,\nit says, oop, you didn't get an email,\n\n119\n00:06:00.200 --> 00:06:03.880\nand then the session closes, and\nyour phone opens a new session.\n\n120\n00:06:03.880 --> 00:06:07.030\nAnd so now your phone's only opening\na session once every half hour, that's no\n\n121\n00:06:07.030 --> 00:06:10.410\nbig deal, and then it just sits there and\nwaits for the server to respond back.\n\n122\n00:06:10.410 --> 00:06:14.420\nIt's very efficient, it's very quick,\nand it works really well, all right.\n\n123\n00:06:14.420 --> 00:06:15.950\nNow there are some little\nquirks that can happen.\n\n124\n00:06:15.950 --> 00:06:18.212\nYou might have a firewall for\nexample, that's monitoring for\n\n125\n00:06:18.212 --> 00:06:21.214\nextended sessions and blocking them so you\nmight have to tweak your firewall a bit.\n\n126\n00:06:21.214 --> 00:06:23.496\nBut pretty much every\nsystem does this today so\n\n127\n00:06:23.496 --> 00:06:27.000\nmost firewalls are already aware of it and\nit's not a big deal.\n\n128\n00:06:27.000 --> 00:06:31.010\nBut that's another function of\nExchange ActiveSync, all right.\n\n129\n00:06:31.010 --> 00:06:34.400\nNow not every device supports\nExchange ActiveSync.\n\n130\n00:06:34.400 --> 00:06:37.530\nIf, let's say, you decided you're\ngonna open up your own company and\n\n131\n00:06:37.530 --> 00:06:39.750\nyou're gonna make your own Android phone.\n\n132\n00:06:39.750 --> 00:06:41.256\nSo, you start manufacturing\nyour own Android phone.\n\n133\n00:06:41.256 --> 00:06:44.619\nIf you want to support ActiveSync,\nyou have to call Microsoft up, and\n\n134\n00:06:44.619 --> 00:06:46.048\nsign a licensing agreement.\n\n135\n00:06:46.048 --> 00:06:48.928\nYou have to pay them money, you have to\npay a certain amount of money per phone\n\n136\n00:06:48.928 --> 00:06:51.673\nthat you sell, and so some companies say,\nyou know what, forget that,\n\n137\n00:06:51.673 --> 00:06:54.530\nwe're not gonna support ActiveSync,\nwe wanna save the money.\n\n138\n00:06:54.530 --> 00:06:55.870\nAnd so they don't do it.\n\n139\n00:06:55.870 --> 00:06:59.260\nAnd for\nthose devices they have option number two.\n\n140\n00:06:59.260 --> 00:07:03.200\nOption number two is OWA for devices and\nthat's this one right here at the bottom.\n\n141\n00:07:03.200 --> 00:07:07.550\nAnd what it is, is Outlook Web App, it's\nthe web interface but it's designed where\n\n142\n00:07:07.550 --> 00:07:11.310\ninstead of giving us a nice GUI that's all\npretty, it just gives you a bunch of XML.\n\n143\n00:07:11.310 --> 00:07:13.680\nA bunch of raw XML data.\n\n144\n00:07:13.680 --> 00:07:17.430\nAnd you can have a client on your phone\nthat interprets that XML data and\n\n145\n00:07:17.430 --> 00:07:19.110\nrenders it in its own client.\n\n146\n00:07:19.110 --> 00:07:23.080\nAnd so you still have access to\nyour contacts, your calendar,\n\n147\n00:07:23.080 --> 00:07:24.590\nyour inbox, your to-do list.\n\n148\n00:07:24.590 --> 00:07:28.160\nYou still have access to all that, it's\njust done without that ActiveSync license.\n\n149\n00:07:28.160 --> 00:07:32.220\nAnd it's done without direct push, and\nit's done without the security policies.\n\n150\n00:07:32.220 --> 00:07:34.270\nYou loose a lot of functionality\nby doing it that way.\n\n151\n00:07:34.270 --> 00:07:35.580\nBut those are the two.\n\n152\n00:07:35.580 --> 00:07:38.830\nIf I'm in a high security environment and\nI want to ensure that my policies\n\n153\n00:07:38.830 --> 00:07:42.040\nare taking effect,\nI'd probably disable OWA for devices.\n\n154\n00:07:42.040 --> 00:07:45.990\nBut if I'm just wanting anybody to be\nable to connect whatever way works,\n\n155\n00:07:45.990 --> 00:07:46.830\nthis is secure.\n\n156\n00:07:46.830 --> 00:07:50.470\nIt does use SSL, but I don't get\nthe benefit of policies and so on.\n\n157\n00:07:50.470 --> 00:07:53.708\nSo those are kind of the two different\nconnectivity methods that we have.\n\n158\n00:07:53.708 --> 00:07:56.177\nNow I mentioned these security policies.\n\n159\n00:07:56.177 --> 00:08:00.864\nWhen people connect up, there's a security\npolicy that's created, and it's applied.\n\n160\n00:08:00.864 --> 00:08:04.365\nOn the left side of my EAC,\nyou'll see mobile.\n\n161\n00:08:04.365 --> 00:08:07.017\nAnd under mobile,\nhere we've got mobile device access and so\n\n162\n00:08:07.017 --> 00:08:09.830\nit's got information about\nwho's allowed to connect.\n\n163\n00:08:09.830 --> 00:08:14.440\nBut right beside it,\nis the mobile device mailbox policies.\n\n164\n00:08:14.440 --> 00:08:17.310\nAnd here's where I can define\nhow my devices are handled.\n\n165\n00:08:17.310 --> 00:08:20.890\nYou can have just one big\npolicy that covers everybody or\n\n166\n00:08:20.890 --> 00:08:23.680\nyou can create different policies for\ndifferent users.\n\n167\n00:08:23.680 --> 00:08:26.300\nMaybe my sales people\nhave one set of policies.\n\n168\n00:08:26.300 --> 00:08:28.030\nMy executives have another policy.\n\n169\n00:08:28.030 --> 00:08:31.180\nMy mailbox [INAUDIBLE] my marketing\npeople have a third policy.\n\n170\n00:08:31.180 --> 00:08:34.470\nYou can define each one different because\nsome people might have sensitive data,\n\n171\n00:08:34.470 --> 00:08:35.920\nsome people might not.\n\n172\n00:08:35.920 --> 00:08:37.760\nBut usually we stick with the default,\nright?\n\n173\n00:08:37.760 --> 00:08:39.240\nAll employees are treated the same way.\n\n174\n00:08:39.240 --> 00:08:41.510\nWe have a standard level of security.\n\n175\n00:08:41.510 --> 00:08:45.980\nAnd you can edit that and here's where you\ncan define all sorts of really neat stuff.\n\n176\n00:08:45.980 --> 00:08:49.080\nWell, not so much on this screen, but if\nI go to security, here's the neat stuff.\n\n177\n00:08:49.080 --> 00:08:49.920\nAll right?\n\n178\n00:08:49.920 --> 00:08:53.960\nI might want to require that, hey if\nyou're connecting your company mailbox\n\n179\n00:08:53.960 --> 00:08:56.170\nonto your phone,\nwe need to secure that data.\n\n180\n00:08:56.170 --> 00:08:58.470\nSo, you need to have\na password on your phone.\n\n181\n00:08:58.470 --> 00:09:00.530\nWe're gonna require you\nto have a password.\n\n182\n00:09:00.530 --> 00:09:02.540\nAnd maybe we don't want a simple password.\n\n183\n00:09:02.540 --> 00:09:04.510\nMaybe we wanna require\nit to be alpha-numeric.\n\n184\n00:09:04.510 --> 00:09:07.110\nMaybe we want it to be letters and\nnumbers and all that stuff.\n\n185\n00:09:07.110 --> 00:09:08.560\nBut normally you would\nwant it to be a pin.\n\n186\n00:09:08.560 --> 00:09:10.080\nThat would be a simple password.\n\n187\n00:09:10.080 --> 00:09:12.610\nAnd so they're showing those here,\nsimple password sequences.\n\n188\n00:09:12.610 --> 00:09:15.890\nYou can set it so it includes\na certain amount of characters.\n\n189\n00:09:15.890 --> 00:09:19.120\nYou can require encryption on the device.\n\n190\n00:09:19.120 --> 00:09:23.510\niOS and Android both support\nencrypting the device.\n\n191\n00:09:23.510 --> 00:09:26.830\niOS I believe does it by default,\nAndroid doesn't do it by default.\n\n192\n00:09:26.830 --> 00:09:28.470\nBlackberry does do it by default.\n\n193\n00:09:28.470 --> 00:09:30.440\nSo different ones have different\nrequirements there, but\n\n194\n00:09:30.440 --> 00:09:32.870\nyou can choose to require\nthe device be encrypted.\n\n195\n00:09:32.870 --> 00:09:34.750\nYou can set that minimum password link,\n\n196\n00:09:34.750 --> 00:09:36.550\nmaybe I want it to be at\nleast four characters.\n\n197\n00:09:37.620 --> 00:09:41.230\nNumber of sign on failures\nbefore a device is wiped.\n\n198\n00:09:41.230 --> 00:09:44.660\nYou can make it where if somebody's\ntrying to brute force the password and\n\n199\n00:09:44.660 --> 00:09:46.900\nthey get it wrong too many times,\nit erases the phone.\n\n200\n00:09:46.900 --> 00:09:47.850\nThat's kinda neat, right?\n\n201\n00:09:47.850 --> 00:09:50.010\nA great way to secure that data.\n\n202\n00:09:50.010 --> 00:09:53.340\nWe've also got required sign in\nafter the device has been active.\n\n203\n00:09:53.340 --> 00:09:56.790\nSo if somebody walks away from their\ntablet, and they didn't lock it,\n\n204\n00:09:56.790 --> 00:10:00.380\nright, how long do we want it to\ngo before requiring that sign in?\n\n205\n00:10:00.380 --> 00:10:02.910\nSo I might set that to something lower,\nlike five minutes.\n\n206\n00:10:02.910 --> 00:10:03.880\nOkay.\n\n207\n00:10:03.880 --> 00:10:06.040\nHere we got enforce a password lifetime.\n\n208\n00:10:06.040 --> 00:10:08.480\nA lot of people set a PIN on their\nphone and then they never change it.\n\n209\n00:10:08.480 --> 00:10:12.030\nSo maybe I want to set a maximum time for\nthem to be able to use that password\n\n210\n00:10:12.030 --> 00:10:15.710\nbefore they have to change it again and\na password recycle count.\n\n211\n00:10:15.710 --> 00:10:19.145\nI don't want them reusing the same\npassword over and over again, so\n\n212\n00:10:19.145 --> 00:10:21.557\nI might say remember\nthe last five passwords and\n\n213\n00:10:21.557 --> 00:10:25.793\ndon't let them use the same one until it's\nbeen five times since they've done it.\n\n214\n00:10:25.793 --> 00:10:29.378\nSo these are examples of some of\nthe different things we can set, so\n\n215\n00:10:29.378 --> 00:10:31.435\nthat when people bring their device.\n\n216\n00:10:31.435 --> 00:10:35.852\nWe can at least apply some basic security\nprinciples to it and active sync,\n\n217\n00:10:35.852 --> 00:10:40.618\nin addition to connecting them to their\nmail will also enforce this policy yo make\n\n218\n00:10:40.618 --> 00:10:42.670\nsure they meet our requirements.\n\n219\n00:10:45.402 --> 00:10:46.770\nAll right,\nnow if I want somebody to connect,\n\n220\n00:10:46.770 --> 00:10:50.110\nit's pretty straight forward\nbecause it uses auto-discover.\n\n221\n00:10:50.110 --> 00:10:52.900\nSo I've got an Android tablet right here.\n\n222\n00:10:52.900 --> 00:10:56.230\nAnd so if I want to connect this Android\ntablet up to my Exchange environment I can\n\n223\n00:10:56.230 --> 00:11:00.130\njust go into my settings, and\nI can go down here to my accounts.\n\n224\n00:11:00.130 --> 00:11:03.110\nSo I'm gonna add an account and\nI'm gonna choose corporate.\n\n225\n00:11:03.110 --> 00:11:04.670\nNow some of them will\nactually say exchange,\n\n226\n00:11:04.670 --> 00:11:06.860\nsome say corporate,\nthere's different names there.\n\n227\n00:11:06.860 --> 00:11:10.400\nBut if I click on that you'll see here\nwe can set up an Exchange account.\n\n228\n00:11:10.400 --> 00:11:12.520\nAnd so I'm gonna connect this one to Jane.\n\n229\n00:11:12.520 --> 00:11:20.180\nSo, Jane is jsmith@itprotv.net,, and\nthen I can punch in her password.\n\n230\n00:11:20.180 --> 00:11:24.060\nNow, on an Outlook client if you\njoin to the active directory,\n\n231\n00:11:24.060 --> 00:11:25.720\nit can populate this information for us.\n\n232\n00:11:25.720 --> 00:11:28.200\nBut most phones aren't joined\nto our Active Directory.\n\n233\n00:11:28.200 --> 00:11:30.230\nSo, you're gonna have to type\nin a name and a password.\n\n234\n00:11:30.230 --> 00:11:34.040\nBut it's gonna use this name,\nthe domain name, to go out and\n\n235\n00:11:34.040 --> 00:11:37.150\ndo a DNS lookup to find\nthe servers to get connected.\n\n236\n00:11:37.150 --> 00:11:41.490\nAnd when it gets connected, it's gonna\ndownload that security policy first and\n\n237\n00:11:41.490 --> 00:11:45.130\napply the policy and\nthen it's gonna set up my email account.\n\n238\n00:11:45.130 --> 00:11:47.980\nSo when I hit next,\nit's reaching out to that server, and\n\n239\n00:11:47.980 --> 00:11:50.370\nit's trying to connect and so\nhere it's gathering that information.\n\n240\n00:11:50.370 --> 00:11:54.870\nNow, on mine it got it a little bit wrong,\nso I'm gonna have to correct some of this.\n\n241\n00:11:54.870 --> 00:12:00.690\nMy username is jsmith@itprotv.net.\n\n242\n00:12:00.690 --> 00:12:02.900\nMy password, my server name.\n\n243\n00:12:02.900 --> 00:12:06.170\nIt got that wrong for some reason,\nso I'll just have to punch that in.\n\n244\n00:12:06.170 --> 00:12:08.190\nI may not have configured\nall to discover here.\n\n245\n00:12:08.190 --> 00:12:10.162\nWe've got a secure SSL connection.\n\n246\n00:12:10.162 --> 00:12:15.300\nFor ActiveSync to work, we have to trust\nthe certificate on the other side.\n\n247\n00:12:15.300 --> 00:12:18.472\nIf we're using a self sign certificate or\na certificate\n\n248\n00:12:18.472 --> 00:12:22.460\nissued by a CA that our phones don't\ntrust, that can cause a problem.\n\n249\n00:12:22.460 --> 00:12:24.973\nSome phones are locked down by\nthe cell phone providers and\n\n250\n00:12:24.973 --> 00:12:27.743\nthey don't allow you to modify\nthe trusted root authorities and\n\n251\n00:12:27.743 --> 00:12:30.015\nthat means you can't trust\nyour own certificates.\n\n252\n00:12:30.015 --> 00:12:34.001\nSo fortunately, this one has an option\nthat says accept all SSL certificates and\n\n253\n00:12:34.001 --> 00:12:35.354\nthat'll let me use my own.\n\n254\n00:12:35.354 --> 00:12:38.232\nAll right, so\nwe can punch that information in and\n\n255\n00:12:38.232 --> 00:12:41.041\nthen next it's gonna reach\nout to that server and\n\n256\n00:12:41.041 --> 00:12:45.170\ntry and get us connected and\ncouldn't open connection to the servers.\n\n257\n00:12:45.170 --> 00:12:46.750\nSo, did I type it wrong?\n\n258\n00:12:46.750 --> 00:12:48.610\nLab dash cas01 dot itprotv dot net.\n\n259\n00:12:48.610 --> 00:12:49.430\nYou know what?\n\n260\n00:12:49.430 --> 00:12:52.480\nI'll just punch in the IP to\nsave me a little time here.\n\n261\n00:12:52.480 --> 00:12:54.570\nAnd we'll definitely\nget connected that way.\n\n262\n00:12:54.570 --> 00:12:57.350\nI'm not sure what DNS server this is\nusing, so it might not be looking me up.\n\n263\n00:12:57.350 --> 00:13:01.470\nThat might be, there we go,\nthat's why my auto discover didn't work.\n\n264\n00:13:01.470 --> 00:13:03.490\nI'm probably using the wrong DNS servers.\n\n265\n00:13:03.490 --> 00:13:05.270\nAll right, so\nhere I can see that I'm connected.\n\n266\n00:13:05.270 --> 00:13:09.290\nIt says it requires that I allow it\nto remotely control some features,\n\n267\n00:13:09.290 --> 00:13:10.640\nwhat does that mean?\n\n268\n00:13:10.640 --> 00:13:15.030\nWell, this is the security policy from\nActiveSync downloading to this device.\n\n269\n00:13:15.030 --> 00:13:20.030\nIf I say cancel, that refuses\nthe policy and I can't set up my email.\n\n270\n00:13:20.030 --> 00:13:21.750\nBut if I say okay.\n\n271\n00:13:21.750 --> 00:13:24.050\nI'm now accepting ActiveSync and\n\n272\n00:13:24.050 --> 00:13:26.770\nthat security policy is\ngoing to apply to my device.\n\n273\n00:13:26.770 --> 00:13:29.605\nI can see my inbox checking\nis set to push, right?\n\n274\n00:13:29.605 --> 00:13:32.800\nActiveSync gives me that\ndirect push technology and\n\n275\n00:13:32.800 --> 00:13:34.620\nit's gonna sync up a certain\namount of days, and\n\n276\n00:13:34.620 --> 00:13:38.562\nthen we can specify all the other settings\nthat I might wanna tweak for my mailbox.\n\n277\n00:13:38.562 --> 00:13:40.350\nAll right.\n\n278\n00:13:40.350 --> 00:13:42.660\nAfter that's done, here it is,\nthat's my account, and\n\n279\n00:13:42.660 --> 00:13:44.840\nI can see I've already got\nsome new email coming in.\n\n280\n00:13:44.840 --> 00:13:47.918\nI'm getting a warning here that I'm\nactivating the device administrator.\n\n281\n00:13:47.918 --> 00:13:52.510\nI'm giving ActiveSync permission to\nerase all data, set password rules,\n\n282\n00:13:52.510 --> 00:13:54.320\nlock the screen, and so on.\n\n283\n00:13:54.320 --> 00:13:56.820\nThis is that security policy applying,\nright?\n\n284\n00:13:56.820 --> 00:14:00.580\nWhen that's done,\nhere I'm taking my security screen,\n\n285\n00:14:00.580 --> 00:14:03.680\nthe security policy is\nrequiring me to set a PIN.\n\n286\n00:14:03.680 --> 00:14:07.870\nSo I need to go in and set a PIN,\nwhich I'll set right here.\n\n287\n00:14:07.870 --> 00:14:11.150\nI'm going super secure and\nsetting it to one, two, three, four, and\n\n288\n00:14:11.150 --> 00:14:12.400\nnow I've got a PIN.\n\n289\n00:14:12.400 --> 00:14:14.570\nSo when I lock my screen,\nin order to unlock it,\n\n290\n00:14:14.570 --> 00:14:15.760\nI'll have to punch in that PIN number.\n\n291\n00:14:15.760 --> 00:14:18.340\nRight?\nThere's that level security being enforced\n\n292\n00:14:18.340 --> 00:14:20.560\nby the exchange security policy.\n\n293\n00:14:20.560 --> 00:14:25.270\nAnd now when I go into my email\nclient I can go into email and\n\n294\n00:14:25.270 --> 00:14:26.070\nhere's my work email.\n\n295\n00:14:26.070 --> 00:14:29.210\nHere's that email that came in from\nthe administrator, and now I'm good to go.\n\n296\n00:14:29.210 --> 00:14:31.100\nI'm connected to my calendar and\nall those other things.\n\n297\n00:14:32.210 --> 00:14:35.980\nSo that's the first taste we get\nof mobile device management.\n\n298\n00:14:35.980 --> 00:14:40.610\nAt a minimum, we can use the mobile\ndevice security policies to manage\n\n299\n00:14:40.610 --> 00:14:44.290\nhow secure our systems are and to keep\nthem locked down so that if somebody is\n\n300\n00:14:44.290 --> 00:14:48.120\ngonna maintain a copy of our corporate\ne-mail it's at least under basic security.\n\n301\n00:14:48.120 --> 00:14:51.470\nIf they leave their phone\non a taxi cab somewhere,\n\n302\n00:14:51.470 --> 00:14:54.032\nwell I know it's at least got a PIN\nnumber and the screen is locked.\n\n303\n00:14:54.032 --> 00:14:59.220\nRight, so at a minimum we've got that but\nthere's a lot more we can do too.\n\n304\n00:14:59.220 --> 00:15:01.350\nFor example,\nnow that this is connected to ActiveSync,\n\n305\n00:15:01.350 --> 00:15:03.800\nwhat happens if this\nperson loses their phone?\n\n306\n00:15:03.800 --> 00:15:07.510\nIf they lose their phone,\nwe might wanna remote wipe it.\n\n307\n00:15:07.510 --> 00:15:09.410\nThere's two ways to remote wipe a phone.\n\n308\n00:15:09.410 --> 00:15:10.730\nThe administrators, we can do it.\n\n309\n00:15:10.730 --> 00:15:13.800\nWe can remote wipe any phone\nconnected to exchange.\n\n310\n00:15:13.800 --> 00:15:15.590\nThe end user can do it also though.\n\n311\n00:15:15.590 --> 00:15:16.920\nThey can wipe their own phone.\n\n312\n00:15:16.920 --> 00:15:19.600\nThey can actually do it\nthrough Outlook Web App.\n\n313\n00:15:19.600 --> 00:15:21.860\nIf they go to Outlook Web App and\ngo into their settings,\n\n314\n00:15:21.860 --> 00:15:24.650\nthey'll see their phones right there,\nand they can wipe their own phone or\n\n315\n00:15:24.650 --> 00:15:28.030\ntheir own tablet, this is a tablet here,\nthey can wipe their own device.\n\n316\n00:15:28.030 --> 00:15:30.200\nNow for remote wipe to work\nthe device has to be on, right?\n\n317\n00:15:30.200 --> 00:15:33.230\nWe've got to be able to send\nthe signal to it, but assuming it's on,\n\n318\n00:15:33.230 --> 00:15:35.210\nwe can get a signal to it and wipe it.\n\n319\n00:15:35.210 --> 00:15:38.010\nAs an administrator,\nit's actually pretty easy for us to do it.\n\n320\n00:15:38.010 --> 00:15:39.280\nI wanna see that.\n\n321\n00:15:39.280 --> 00:15:40.980\nWe can do a remote wipe on this one.\n\n322\n00:15:42.510 --> 00:15:46.798\nIf I go back to my Exchange administration\nsettings, or my Exchange admin center,\n\n323\n00:15:46.798 --> 00:15:50.553\nwe can jump in here, and if I go to my\nrecipients I can find the recipient.\n\n324\n00:15:50.553 --> 00:15:55.161\nSo Jane calls me, and she says, Don,\nI left my tablet on a taxicab and\n\n325\n00:15:55.161 --> 00:15:57.635\nI've got all sorts of data on there.\n\n326\n00:15:57.635 --> 00:15:59.648\nI don't know if I can get it back,\ncan we just wipe it?\n\n327\n00:15:59.648 --> 00:16:01.884\nAnd I say oh yeah give\nme just a minute Jane.\n\n328\n00:16:01.884 --> 00:16:05.190\nI can log into the EAC,\nI can find her account.\n\n329\n00:16:06.520 --> 00:16:11.005\nAnd if we edit here account you'll see\nsome different options here across\n\n330\n00:16:11.005 --> 00:16:14.419\nthe left, and if we look we can find our,\noh wait sorry.\n\n331\n00:16:14.419 --> 00:16:15.534\nI'm in the wrong spot.\n\n332\n00:16:15.534 --> 00:16:20.620\nIf we highlight Jane Smith over here\non the right side, if you scroll down.\n\n333\n00:16:20.620 --> 00:16:21.840\nIt's kinda buried away.\n\n334\n00:16:21.840 --> 00:16:25.530\nWe've got mobile devices, and\nthen you got view details right there.\n\n335\n00:16:25.530 --> 00:16:28.160\nThat's where we need to go to\nactually see her mobile devices.\n\n336\n00:16:28.160 --> 00:16:29.360\nI know it's kinda counter-intuitive.\n\n337\n00:16:29.360 --> 00:16:31.260\nI always want to pull up\nthe properties of her account.\n\n338\n00:16:31.260 --> 00:16:33.070\nBut the devices are nested over here.\n\n339\n00:16:33.070 --> 00:16:36.010\nSo if I go to view details,\nit's gonna pull it up and\n\n340\n00:16:36.010 --> 00:16:38.240\nthere I can see her Android device, right?\n\n341\n00:16:38.240 --> 00:16:39.820\nThere's here Android tablet.\n\n342\n00:16:39.820 --> 00:16:42.040\nI can see that it's been\ngranted access to the system.\n\n343\n00:16:42.040 --> 00:16:45.530\nIt's active right now but she lost it and\nif she had more than one device,\n\n344\n00:16:45.530 --> 00:16:47.320\nI'd see them all right here in the list.\n\n345\n00:16:47.320 --> 00:16:49.280\nThis is also where I could\nchange her security policy.\n\n346\n00:16:49.280 --> 00:16:52.090\nIf I wanted her to have a different policy\nthan the default, I could browse and\n\n347\n00:16:52.090 --> 00:16:53.930\nchange it right here too.\n\n348\n00:16:53.930 --> 00:16:55.720\nBut in this case she lost her device.\n\n349\n00:16:55.720 --> 00:16:58.410\nAnd if you look up here at the options\nyou'll see where we can do things like\n\n350\n00:16:58.410 --> 00:16:59.650\nblock the device.\n\n351\n00:16:59.650 --> 00:17:00.980\nMaybe I don't want to wipe it.\n\n352\n00:17:00.980 --> 00:17:04.080\nI just want to stop it from accessing\nour system until she finds it.\n\n353\n00:17:04.080 --> 00:17:06.270\nAnd then when she finds it\nI can re enable it again.\n\n354\n00:17:06.270 --> 00:17:07.790\nSo you can hit block.\n\n355\n00:17:07.790 --> 00:17:08.700\nand she finds the device and\n\n356\n00:17:08.700 --> 00:17:11.440\nI come and re-enable, well that's\nwhat you want to do at the minimum.\n\n357\n00:17:11.440 --> 00:17:15.750\nBut as we look you can see wipe data, and\nthat's what we want to do if the phone is\n\n358\n00:17:15.750 --> 00:17:17.910\nlost, and\nwe don't think we're going to get it back.\n\n359\n00:17:17.910 --> 00:17:21.440\nOr, if it's got sensitive data, and I just\nwant to erase it before the battery dies.\n\n360\n00:17:21.440 --> 00:17:23.210\nBecause the battery will die eventually,\n\n361\n00:17:23.210 --> 00:17:25.030\neven if it's just sitting\nthere on a park bench.\n\n362\n00:17:25.030 --> 00:17:28.150\nSo, I'm going to hit that button, and\nit's going to tell me we are going to\n\n363\n00:17:28.150 --> 00:17:32.240\nwipe that device, just going to reach\nout and knock that out and clear it.\n\n364\n00:17:32.240 --> 00:17:33.980\nSo I'll go ahead and say OK to that, and\n\n365\n00:17:33.980 --> 00:17:36.760\nit's now sending a wipe\nping to that system.\n\n366\n00:17:36.760 --> 00:17:39.200\nSo see how it says wipe pending?\n\n367\n00:17:39.200 --> 00:17:41.450\nIt sent the ping to the other system and\nit's saying hey,\n\n368\n00:17:41.450 --> 00:17:42.860\nyou need to erase yourself.\n\n369\n00:17:42.860 --> 00:17:44.890\nNow if the other system is off.\n\n370\n00:17:44.890 --> 00:17:47.570\nMaybe whoever's got the phone\nturned off the wireless,\n\n371\n00:17:47.570 --> 00:17:49.090\nthe signal is not gonna get there.\n\n372\n00:17:49.090 --> 00:17:51.920\nSo it's gonna keep trying,\nit's gonna keep trying over and over and\n\n373\n00:17:51.920 --> 00:17:53.240\nover again forever.\n\n374\n00:17:53.240 --> 00:17:55.510\nIt's just gonna keep\ntrying until we stop it.\n\n375\n00:17:55.510 --> 00:17:59.688\nThat way if the device ever does come back\nonline, it'll receive that message, and\n\n376\n00:17:59.688 --> 00:18:01.180\nit'll wipe.\n\n377\n00:18:01.180 --> 00:18:04.580\nMeanwhile, if I go back to the device,\nthings just look like normal.\n\n378\n00:18:04.580 --> 00:18:07.970\nAnd what's gonna happen is this\ndevice is gonna receive that ping.\n\n379\n00:18:07.970 --> 00:18:11.690\nAnd as soon as that happens it's\ngonna reboot and erase itself.\n\n380\n00:18:11.690 --> 00:18:14.800\nIt's gonna wipe itself,\nclear the data and then we're safe.\n\n381\n00:18:14.800 --> 00:18:17.520\nSo as an admin we can do\nit right here centrally.\n\n382\n00:18:17.520 --> 00:18:20.820\nAs a user they can do it\nthrough Outlook web app.\n\n383\n00:18:20.820 --> 00:18:23.890\nJust log into OWA and go into their\nsettings and they can knock it out there.\n\n384\n00:18:24.890 --> 00:18:25.840\nAll right.\n\n385\n00:18:25.840 --> 00:18:30.460\nA couple other things that we need to\nthink about with mobile devices like this.\n\n386\n00:18:30.460 --> 00:18:31.770\nWhen I went under my EAC and\n\n387\n00:18:31.770 --> 00:18:34.890\nI went to mobile, you'll notice\nthere was this mobile device access.\n\n388\n00:18:34.890 --> 00:18:36.280\nWhat's that all about?\n\n389\n00:18:36.280 --> 00:18:39.600\nWell, by default,\nif you enable Exchange Active Sync for\n\n390\n00:18:39.600 --> 00:18:43.310\na user, they can connect any\nmobile device they want.\n\n391\n00:18:43.310 --> 00:18:44.880\nIt's turned on for them,\nthey can connect whenever.\n\n392\n00:18:44.880 --> 00:18:49.430\nSo, they might have iPhones and iPads,\nthey might have Windows mobile phones,\n\n393\n00:18:49.430 --> 00:18:53.000\nthey might have Android Phones, tablets,\nwhatever they're connecting it all.\n\n394\n00:18:53.000 --> 00:18:55.850\nThey can go crazy, but\nwe know that some devices\n\n395\n00:18:55.850 --> 00:18:59.680\nthat some devices might be more secure\nthan others and in our IT department,\n\n396\n00:18:59.680 --> 00:19:02.100\nwe might only want to\nsupport certain devices.\n\n397\n00:19:02.100 --> 00:19:07.980\nMaybe you tell your employees, alright,\nwe're gonna support any Nokia Lumia Phone.\n\n398\n00:19:07.980 --> 00:19:10.840\nAnd we'll support any iPhone but\n\n399\n00:19:10.840 --> 00:19:14.120\nwe'll only support Samsung Android\nphones and that's it.\n\n400\n00:19:15.170 --> 00:19:17.200\nWell, what if somebody goes and\nthey get a Nexus, or\n\n401\n00:19:17.200 --> 00:19:19.310\nthey get some other kind of phone and\nthey want to hook it up.\n\n402\n00:19:19.310 --> 00:19:20.360\nWell, by default, they can.\n\n403\n00:19:20.360 --> 00:19:21.810\nThere's nothing stopping them.\n\n404\n00:19:21.810 --> 00:19:24.930\nBut, we can create access settings.\n\n405\n00:19:24.930 --> 00:19:27.900\nAccess settings that let us pick and\nchoose which phones and\n\n406\n00:19:27.900 --> 00:19:29.420\ndevices get approved.\n\n407\n00:19:29.420 --> 00:19:31.620\nSo you'll see the two\ndifferent options we've got.\n\n408\n00:19:31.620 --> 00:19:33.640\nOption one is to set up a quarantine.\n\n409\n00:19:33.640 --> 00:19:37.740\nA quarantine is, we say anyone can\nconnect a phone, but it's gonna go into\n\n410\n00:19:37.740 --> 00:19:43.020\nthe quarantine until I decide\nwhether to approve it or decline it.\n\n411\n00:19:43.020 --> 00:19:46.180\nSo this will pool up, and as an admin\nyou'll have to go in once a day or\n\n412\n00:19:46.180 --> 00:19:48.410\nhowever often, and\nchoose to approve phones.\n\n413\n00:19:48.410 --> 00:19:50.840\nAnd now,\nit's you controlling what devices get in.\n\n414\n00:19:52.300 --> 00:19:56.530\nOption two is you can define access rules\nthat specifically state types of hardware,\n\n415\n00:19:56.530 --> 00:19:58.040\ntypes of devices that you want to allow.\n\n416\n00:19:58.040 --> 00:20:00.630\nI'll add a rule here, so\nyou can see an example.\n\n417\n00:20:00.630 --> 00:20:04.180\nWhen I create device access,\nyou can specify a device family.\n\n418\n00:20:04.180 --> 00:20:06.150\nAnd so I can browse and pick that family.\n\n419\n00:20:06.150 --> 00:20:08.780\nNow all families is kind of the default.\n\n420\n00:20:08.780 --> 00:20:12.320\nAs we create our own families\nin here we'll start to see more.\n\n421\n00:20:12.320 --> 00:20:13.800\nRight now I've just got\nthat one set to all.\n\n422\n00:20:13.800 --> 00:20:17.100\nSo I'll say all families, and\nthen you can specify particular models.\n\n423\n00:20:17.100 --> 00:20:20.860\nNow I don't have any models defined\nin my system so that's blank for me.\n\n424\n00:20:20.860 --> 00:20:24.590\nSo this one is basically\ngoing to be everything.\n\n425\n00:20:24.590 --> 00:20:29.410\nAnd here's where we can say allow access,\nblock access, or quarantine access.\n\n426\n00:20:29.410 --> 00:20:30.770\nAnd if we want to quarantine,\n\n427\n00:20:30.770 --> 00:20:34.550\nthat means they can connect, it'll go into\nquarantine, and then we have to go in and\n\n428\n00:20:34.550 --> 00:20:36.230\nactually approve that\nto be able to connect.\n\n429\n00:20:36.230 --> 00:20:37.730\nThey'll just end up right there.\n\n430\n00:20:37.730 --> 00:20:40.690\nOtherwise, we can specify\nparticular models.\n\n431\n00:20:40.690 --> 00:20:43.810\nAnd once that's done, we can say,\nall right, if it's an iPhone or\n\n432\n00:20:43.810 --> 00:20:45.330\niOS, we allow it.\n\n433\n00:20:45.330 --> 00:20:47.740\nOr if it's a Nokia Lumina, we allow it.\n\n434\n00:20:47.740 --> 00:20:50.790\nOr I can say Nokia Luminas,\nand then specific models,\n\n435\n00:20:50.790 --> 00:20:54.230\nmaybe I just want the 520 and\n920 and that's it.\n\n436\n00:20:54.230 --> 00:20:58.920\nSo we can punch those in and it'll\napprove those, or I just want Android,\n\n437\n00:20:58.920 --> 00:21:01.150\nNexus, and Samsung Galaxy's.\n\n438\n00:21:01.150 --> 00:21:02.180\nYou punch those in.\n\n439\n00:21:02.180 --> 00:21:06.450\nSo you can be really specific to\ndictate which devices are supported\n\n440\n00:21:06.450 --> 00:21:07.990\nin your environment.\n\n441\n00:21:07.990 --> 00:21:10.350\nNow, this list is empty by default.\n\n442\n00:21:10.350 --> 00:21:12.920\nSo I don't really have any\ndevice families or models.\n\n443\n00:21:12.920 --> 00:21:16.470\nAnd if you click the learn more link,\nit'll take you to Microsoft site.\n\n444\n00:21:16.470 --> 00:21:19.350\nAnd they explain how to add more in.\n\n445\n00:21:19.350 --> 00:21:22.450\nAnd when it comes to adding these in,\nthe reason they don't put them in there\n\n446\n00:21:22.450 --> 00:21:24.330\nautomatically is that\nthey change all the time.\n\n447\n00:21:24.330 --> 00:21:26.600\nThere's new devices being\nreleased all the time.\n\n448\n00:21:26.600 --> 00:21:29.540\nAnd so you gotta put them in based\non their hardware identifiers so\n\n449\n00:21:29.540 --> 00:21:30.390\nthat you can recognize it.\n\n450\n00:21:30.390 --> 00:21:32.990\nSo they kind of walk you through\nthat process of getting them added.\n\n451\n00:21:32.990 --> 00:21:35.890\nBut it is a neat function of\nExchange Active Sync to be able to limit\n\n452\n00:21:35.890 --> 00:21:37.649\nthe types of devices that can connect.\n\n453\n00:21:39.820 --> 00:21:42.740\nAnd then like I said on the mobile device\npolicies we can always create more than\n\n454\n00:21:42.740 --> 00:21:43.460\none policy.\n\n455\n00:21:43.460 --> 00:21:47.930\nAs you add more policies in, you dictate\nwhat that policy is going to be.\n\n456\n00:21:47.930 --> 00:21:49.930\nAnd then you can attach\nthat to different people.\n\n457\n00:21:49.930 --> 00:21:53.160\nYou can use the PowerShell\nto apply to entire OU's.\n\n458\n00:21:53.160 --> 00:21:54.760\nSo different departments\nhave different settings.\n\n459\n00:21:54.760 --> 00:21:57.080\nThere's a lot of flexibility there.\n\n460\n00:21:57.080 --> 00:22:00.750\nSo this is a fully featured mobile\ndevice management MDM suite.\n\n461\n00:22:00.750 --> 00:22:05.520\nThe only thing that it doesn't do is it\ndoesn't give us the ability to install\n\n462\n00:22:05.520 --> 00:22:08.920\napps on people's phones, or\nuninstall apps on people's phones.\n\n463\n00:22:08.920 --> 00:22:10.240\nWe didn't see that.\n\n464\n00:22:10.240 --> 00:22:12.540\nFor that we need a full MDM suite, and\n\n465\n00:22:12.540 --> 00:22:15.180\nthere's plenty of third party\nproviders out there for that.\n\n466\n00:22:15.180 --> 00:22:17.400\nBut most people don't need\nthat level of functionality.\n\n467\n00:22:17.400 --> 00:22:19.000\nOn a bring your own device,\n\n468\n00:22:19.000 --> 00:22:22.090\nwe typically want end users to still be\nable to run their own applications right.\n\n469\n00:22:22.090 --> 00:22:23.520\nIt's their device, they paid for it.\n\n470\n00:22:23.520 --> 00:22:26.770\nThey might still wanna install their\nown apps, so we leave that be.\n\n471\n00:22:26.770 --> 00:22:29.470\nWe just wanna make sure that the device\nis at least secured with a PIN and\n\n472\n00:22:29.470 --> 00:22:31.630\npassword to be able to secure the system.\n\n473\n00:22:31.630 --> 00:22:34.690\nSo that's basically the key components\nthere of that mobile device.\n\n474\n00:22:37.181 --> 00:22:41.090\nNow, other than that, that's basically\nit for mobile device management.\n\n475\n00:22:41.090 --> 00:22:43.200\nJust be aware that it\ndoes use auto-discover.\n\n476\n00:22:43.200 --> 00:22:44.920\nSo we gotta make sure that\nauto-discover is configured.\n\n477\n00:22:44.920 --> 00:22:48.970\nIf you haven't already, check out our,\ntwo part auto-discover episode that we did\n\n478\n00:22:48.970 --> 00:22:51.270\nthat kind of covered how\nto get that configured.\n\n479\n00:22:51.270 --> 00:22:54.050\nAll mobile devices\nare treated as external,\n\n480\n00:22:54.050 --> 00:22:55.380\nbecause they're not joined to your domain.\n\n481\n00:22:55.380 --> 00:22:58.320\nSo their gonna look for DNS, And\nfind your servers that way, so\n\n482\n00:22:58.320 --> 00:22:59.650\nmake sure that you've got that.\n\n483\n00:22:59.650 --> 00:23:02.550\nAlso be aware of the problem\nthat I ran into where\n\n484\n00:23:02.550 --> 00:23:05.010\nI didn't know what DNS my phone was using.\n\n485\n00:23:05.010 --> 00:23:07.840\nIt was on a different network, so\nI had to punch in my server by IP.\n\n486\n00:23:07.840 --> 00:23:09.470\nThat's not ideal, right?\n\n487\n00:23:09.470 --> 00:23:13.540\nWe wanna make sure that our DNS\nnames are able to be looked up from\n\n488\n00:23:13.540 --> 00:23:14.780\noutside of the network.\n\n489\n00:23:14.780 --> 00:23:17.075\nSo you gotta make sure your\nDNS structure is proper.\n\n490\n00:23:17.075 --> 00:23:20.330\nBut other than that you've got an MDM\nin place and you're ready to rock.\n\n491\n00:23:21.412 --> 00:23:24.630\nAll right well in this episode we got a\nchance to see the mobile device management\n\n492\n00:23:24.630 --> 00:23:25.520\ninside of Exchange.\n\n493\n00:23:25.520 --> 00:23:27.120\nWe saw how to add a mobile device.\n\n494\n00:23:27.120 --> 00:23:30.640\nWe saw how to create a security policy and\nhow to remote wipe a device.\n\n495\n00:23:30.640 --> 00:23:34.160\nSo we got a chance to see some of those\ndifferent settings and how they function.\n\n496\n00:23:34.160 --> 00:23:36.100\nAnd all in all not too painful.\n\n497\n00:23:36.100 --> 00:23:37.570\nSo definitely a cool feature.\n\n498\n00:23:37.570 --> 00:23:40.040\nOne you'll want to make use of\nout there in the real world.\n\n499\n00:23:40.040 --> 00:23:42.870\nAll right well I hope you\nguys enjoyed the episode.\n\n500\n00:23:42.870 --> 00:23:46.481\nsigning off for ITProTV I'm Don Pizette\nand I'll see you next time.\n\n501\n00:23:46.481 --> 00:23:52.620\n[MUSIC]\n\n",
          "vimeoId": "136729108"
        },
        {
          "description": "In this episode, Don demonstrates how to configure high availability for Client Access Servers in Exchange 2013. He walks the viewers through the process of installing and configuring the Network Load Balancing feature found in Windows 2012.",
          "length": "1626",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft_exchange70341-3-4-work_load_balancing-081415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft_exchange70341-3-4-work_load_balancing-081415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft_exchange70341-3-4-work_load_balancing-081415-1-sm.jpg",
          "title": "Network Load Balancing",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.138\n[MUSIC]\n\n2\n00:00:10.138 --> 00:00:12.973\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:12.973 --> 00:00:14.876\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:14.876 --> 00:00:15.877\nI'm your host,\n\n5\n00:00:15.877 --> 00:00:20.490\nDon Pezet back again with another\nepisode of Microsoft Exchange 2013.\n\n6\n00:00:20.490 --> 00:00:20.990\nIn this episode,\n\n7\n00:00:20.990 --> 00:00:25.610\nwe're gonna be taking a look at how to\nmake client access servers redundant.\n\n8\n00:00:25.610 --> 00:00:27.180\nNow that's really important to us,\n\n9\n00:00:27.180 --> 00:00:31.980\nbecause client access servers are kinda\nthe front face, what our end users see.\n\n10\n00:00:31.980 --> 00:00:35.000\nWhen they fire up Microsoft Outlook,\nwhen they go to Outlook Web App,\n\n11\n00:00:35.000 --> 00:00:39.280\nwhen they want to access their email,\nthey talk to a client access server.\n\n12\n00:00:39.280 --> 00:00:42.470\nNow the client access server's turning\naround and talking to a mailbox server.\n\n13\n00:00:42.470 --> 00:00:44.870\nAnd the mailbox servers\nneed to be redundant too.\n\n14\n00:00:44.870 --> 00:00:47.450\nBut the way we make them redundant\nis through what's called a database\n\n15\n00:00:47.450 --> 00:00:48.370\navailability group.\n\n16\n00:00:48.370 --> 00:00:50.520\nWe'll have a separate\nepisode that covers that.\n\n17\n00:00:50.520 --> 00:00:53.230\nBut for this episode,\nwe wanna cover Client Access Servers.\n\n18\n00:00:53.230 --> 00:00:57.239\nNow Client Access Servers are kind of\nunique because they don't really have\n\n19\n00:00:57.239 --> 00:00:58.220\nany data.\n\n20\n00:00:58.220 --> 00:01:01.600\nWhen a user connects, they connect\nto the Client Access Server, and\n\n21\n00:01:01.600 --> 00:01:06.310\nit proxies them back to the right mailbox\nserver, to where the real data is.\n\n22\n00:01:06.310 --> 00:01:08.440\nSo at the end of the day,\n\n23\n00:01:08.440 --> 00:01:12.800\na client doesn't really care which\nClient Access Server they connect to.\n\n24\n00:01:12.800 --> 00:01:14.820\nThey do care about which mailbox server.\n\n25\n00:01:14.820 --> 00:01:17.739\nBecause if they connect to a mailbox\nserver that doesn't have their mailbox,\n\n26\n00:01:17.739 --> 00:01:19.028\nthey're not gonna see any email.\n\n27\n00:01:19.028 --> 00:01:21.770\nBut they can connect to any\nClient Access Server and\n\n28\n00:01:21.770 --> 00:01:24.269\nit will send them to\nthe right mailbox server.\n\n29\n00:01:24.269 --> 00:01:27.561\nSo on a Client Access Server the easiest\nway to make them redundant is to have\n\n30\n00:01:27.561 --> 00:01:28.390\nmore than one.\n\n31\n00:01:28.390 --> 00:01:31.138\nYou just bring up more than one\nClient Access Server now you've redundant.\n\n32\n00:01:31.138 --> 00:01:35.635\nThe only problem with that is it's not\nlike an automatic failover, right?\n\n33\n00:01:35.635 --> 00:01:37.225\nTake my example here.\n\n34\n00:01:37.225 --> 00:01:40.325\nIn my system,\nI've got two exchange servers, right?\n\n35\n00:01:40.325 --> 00:01:43.105\nI've got Exchange Server 01 and\nExchange Server 02.\n\n36\n00:01:43.105 --> 00:01:47.132\nIf I go to my server list here they're\nboth client axis servers, right?\n\n37\n00:01:47.132 --> 00:01:49.782\nSo I know that I could\nfire up a web browser and\n\n38\n00:01:49.782 --> 00:01:54.862\nI could point to lab-EXCHSERV01 and\nget into OWA.\n\n39\n00:01:54.862 --> 00:01:57.472\nAnd in fact,\nI'm logged into with OWA right here.\n\n40\n00:01:57.472 --> 00:02:04.050\nBut just the same, I could point to\nlab-EXCHSERV02 and log into OWA.\n\n41\n00:02:04.050 --> 00:02:07.220\nHere, I'm logged in as Jane Smith\non this one but same thing, right?\n\n42\n00:02:07.220 --> 00:02:10.290\nIt doesn't really matter which\nClient Axis Server I connect to.\n\n43\n00:02:10.290 --> 00:02:11.670\nSo rule number one for\n\n44\n00:02:11.670 --> 00:02:14.450\nredundancy with a Client Axis Server\nis just to have more that one, right?\n\n45\n00:02:14.450 --> 00:02:16.710\nYou should always have two or\nmore for that redundancy.\n\n46\n00:02:17.770 --> 00:02:21.650\nBut if Server 1 were to fail,\nif it goes offline,\n\n47\n00:02:21.650 --> 00:02:25.900\nas an end user I would browse to it and\nI would get a failed connect.\n\n48\n00:02:25.900 --> 00:02:28.440\nThen I would have to know\nto switch to Server 2.\n\n49\n00:02:28.440 --> 00:02:31.135\nWell, what if I would want\nto make that automatic?\n\n50\n00:02:31.135 --> 00:02:32.629\nWe can do that.\nWe can do that and\n\n51\n00:02:32.629 --> 00:02:34.420\nactually done really easy.\n\n52\n00:02:34.420 --> 00:02:36.500\nIt's not like we have to set\nup some crazy cluster or\n\n53\n00:02:36.500 --> 00:02:38.030\nhave shared storage or anything.\n\n54\n00:02:38.030 --> 00:02:42.740\nWe can set up what's called\nWindows Load Balancing Services, WLBS, or\n\n55\n00:02:42.740 --> 00:02:45.105\nNetwork Load Balancing, NLB.\n\n56\n00:02:45.105 --> 00:02:46.290\nThere's two different names for it.\n\n57\n00:02:46.290 --> 00:02:48.820\nYou'll see it written different\nways on Microsoft's website.\n\n58\n00:02:48.820 --> 00:02:52.170\nOn the exam they'll call it\nNetwork Load Balancing or NLB.\n\n59\n00:02:52.170 --> 00:02:56.140\nWith Network Load Balancing, we create\na virtual server, like a fake server.\n\n60\n00:02:56.140 --> 00:02:57.960\nThe clients go to the fake server and\n\n61\n00:02:57.960 --> 00:03:00.670\nit then directs them to\nthe real servers behind it.\n\n62\n00:03:00.670 --> 00:03:02.300\nSo now I can have a fake server and\n\n63\n00:03:02.300 --> 00:03:04.920\npeople don't have to remember that they're\nconnecting to server number two or\n\n64\n00:03:04.920 --> 00:03:08.410\nserver number one,\nthey connect to the fake server.\n\n65\n00:03:08.410 --> 00:03:11.150\nLet me show you how it works,\nit's really not that hard.\n\n66\n00:03:11.150 --> 00:03:13.300\nWe're gonna start here\non one of our servers.\n\n67\n00:03:13.300 --> 00:03:15.670\nAnd so here I am on Lab-Exchserv01.\n\n68\n00:03:15.670 --> 00:03:17.409\nDoesn't really matter\nwhich one I start on,\n\n69\n00:03:17.409 --> 00:03:20.350\nbecause at the end of the day they're\nall gonna get balanced, right?\n\n70\n00:03:20.350 --> 00:03:23.910\nBut I'm gonna start on Server 01, and\nI'm gonna go up here to Manage, and\n\n71\n00:03:23.910 --> 00:03:26.460\nI'm gonna do Add Roles and Features.\n\n72\n00:03:26.460 --> 00:03:30.880\nAnd what we're gonna do is just add\nthe Network Load Balancing feature.\n\n73\n00:03:30.880 --> 00:03:32.870\nWhen you move through the setup here,\n\n74\n00:03:32.870 --> 00:03:35.870\nit's gonna offer to install\nvarious roles on our server.\n\n75\n00:03:35.870 --> 00:03:37.650\nAnd we'll have the option\ninstall features and\n\n76\n00:03:37.650 --> 00:03:40.490\nwhen you look at the rolls the low\nbalancing is not in there.\n\n77\n00:03:40.490 --> 00:03:44.180\nBut when you get into the features\nyou can skim down the list and\n\n78\n00:03:44.180 --> 00:03:47.180\nin here you'll find\nNetwork Load Balancing.\n\n79\n00:03:47.180 --> 00:03:49.680\nNow we're going to use it for\nExchange Client Access.\n\n80\n00:03:49.680 --> 00:03:50.970\nBut you could use it for anything.\n\n81\n00:03:50.970 --> 00:03:54.670\nIt works with IIS, Remote Desktop like\nif you're setting up terminal servers.\n\n82\n00:03:54.670 --> 00:03:58.110\nYou can load balance any traffic\nwith Network Load Balancing.\n\n83\n00:03:58.110 --> 00:03:59.810\nWe just want to use it for\nour Client Access Servers.\n\n84\n00:03:59.810 --> 00:04:02.100\nSo I'm going to choose that\nNetwork Load Balancing and\n\n85\n00:04:02.100 --> 00:04:03.480\nI'm going to add that feature.\n\n86\n00:04:04.790 --> 00:04:09.400\nNow, once its installed we'll\nhave the ability to set up a load\n\n87\n00:04:09.400 --> 00:04:13.660\nbalancing cluster, which is a very simple\nform of cluster that just directs traffic\n\n88\n00:04:13.660 --> 00:04:14.540\nbetween these nodes.\n\n89\n00:04:14.540 --> 00:04:16.180\nSo I'm gonna go ahead and\nget these installed.\n\n90\n00:04:16.180 --> 00:04:20.820\nNow, technically, I don't have to install,\nand it'll be on the second node.\n\n91\n00:04:20.820 --> 00:04:23.990\nWhen I go to set it up,\nit'll push the settings over to it.\n\n92\n00:04:23.990 --> 00:04:26.420\nBut it does make things go\na little bit faster to do it.\n\n93\n00:04:26.420 --> 00:04:29.950\nSo I'm gonna jump over to my second\nnode and do the same thing over here.\n\n94\n00:04:29.950 --> 00:04:32.413\nI'm just gonna go to add roles and\nfeatures and\n\n95\n00:04:32.413 --> 00:04:34.316\nI'm gonna add in that NLB feature.\n\n96\n00:04:34.316 --> 00:04:37.870\nBut like I said, I don't technically\nhave to do this, it would do it for me.\n\n97\n00:04:37.870 --> 00:04:41.750\nI just want to speed things up a little\nbit, so I'm gonna add that feature and\n\n98\n00:04:41.750 --> 00:04:43.490\nget that installed here.\n\n99\n00:04:43.490 --> 00:04:47.390\nNow as part of that feature it's\ninstalling the management tools for\n\n100\n00:04:47.390 --> 00:04:48.730\nNLB and that's what I really need.\n\n101\n00:04:48.730 --> 00:04:54.160\nI can go into the management tools and\nI can define a new load balancing cluster.\n\n102\n00:04:54.160 --> 00:04:56.440\nAnd when I define that new cluster\nI point to the servers and\n\n103\n00:04:56.440 --> 00:04:59.540\nif they don't have NLB installed it\nwill install it there for me, right.\n\n104\n00:04:59.540 --> 00:05:00.870\nIt just takes time.\n\n105\n00:05:00.870 --> 00:05:03.685\nAnd then it sets up the various\nother settings to make it balanced.\n\n106\n00:05:03.685 --> 00:05:06.290\nSo that's what I'm doing right\nhere is getting that installed.\n\n107\n00:05:06.290 --> 00:05:07.605\nSo there we go, we got it.\n\n108\n00:05:07.605 --> 00:05:11.958\nOnce you've got it installed in your\nserver manager, you can go to tools and\n\n109\n00:05:11.958 --> 00:05:17.320\nunder tools you'll have the Network\nLoad Balancing Manager, or NLB manager.\n\n110\n00:05:17.320 --> 00:05:18.380\nAnd we can fire that up, and\n\n111\n00:05:18.380 --> 00:05:21.800\nthat's where we go to configure\nNLB clusters, all right?\n\n112\n00:05:21.800 --> 00:05:26.150\nI'm gonna call it a cluster, and\nI know people get a little paranoid or\n\n113\n00:05:26.150 --> 00:05:29.440\npanicky on that one, cuz clusters\nare notoriously difficult to set up.\n\n114\n00:05:29.440 --> 00:05:31.919\nYou'll see that this type of cluster\nis actually really easy to set up.\n\n115\n00:05:33.260 --> 00:05:35.770\nSo the first thing I'll notice is that\nunder Network Load Balancing clusters,\n\n116\n00:05:35.770 --> 00:05:36.320\nI don't have any.\n\n117\n00:05:36.320 --> 00:05:38.980\nIt's just kinda empty, so\nI need to create a new one.\n\n118\n00:05:38.980 --> 00:05:42.100\nAnd I'm just gonna right-click on that and\nchoose New Cluster.\n\n119\n00:05:42.100 --> 00:05:44.100\nAnd now we can define a host.\n\n120\n00:05:44.100 --> 00:05:45.780\nWe need to connect to one host and\n\n121\n00:05:45.780 --> 00:05:48.200\nit's gonna be the person\nwho starts the cluster.\n\n122\n00:05:48.200 --> 00:05:49.740\nAnd it doesn't really matter who I pick.\n\n123\n00:05:49.740 --> 00:05:51.950\nI could pick node 1, node 2, whatever.\n\n124\n00:05:51.950 --> 00:05:54.610\n'Cause at the end of the day I'm going to\nadd the other nodes and it all balances,\n\n125\n00:05:54.610 --> 00:05:59.382\nbut I'm going to start with\nmy lab-exchserve01, and\n\n126\n00:05:59.382 --> 00:06:02.680\nI'll hit connect, and\nit's going to connect up to that server.\n\n127\n00:06:02.680 --> 00:06:04.907\nAnd see what it's pulling here,\nthe IP address of that server.\n\n128\n00:06:04.907 --> 00:06:08.290\nThat server is 192.168.0.911.\n\n129\n00:06:08.290 --> 00:06:10.020\nThat IP address is important.\n\n130\n00:06:10.020 --> 00:06:12.420\nNow, when we do Network Load Balancing,\n\n131\n00:06:12.420 --> 00:06:15.070\nit's a good idea to have\nmultiple network adapters.\n\n132\n00:06:15.070 --> 00:06:18.120\nNow, I've only got one network adapter\nin mine, so that's all it's showing.\n\n133\n00:06:18.120 --> 00:06:20.470\nIf I had more than one network adapter,\nthey would show up here.\n\n134\n00:06:20.470 --> 00:06:23.530\nNow, why is it important to have\nmore than one network adapter?\n\n135\n00:06:23.530 --> 00:06:27.142\nWell, if I wanna remotely manage\none node in this cluster,\n\n136\n00:06:27.142 --> 00:06:30.914\nI don't wanna connect to node 2,\nI wanna connect to node 1.\n\n137\n00:06:30.914 --> 00:06:33.161\nWell if they've all got\na shared connection,\n\n138\n00:06:33.161 --> 00:06:35.360\nhow do I know which one\nI'm gonna connect to?\n\n139\n00:06:35.360 --> 00:06:37.430\nI'm gonna get balanced,\nI might connect to different ones.\n\n140\n00:06:37.430 --> 00:06:40.200\nSo by having a dedicated adapter for\nmanagement purposes,\n\n141\n00:06:40.200 --> 00:06:42.270\nit makes it really easy to manage that.\n\n142\n00:06:42.270 --> 00:06:45.680\nI don't have to have the second adapter,\nbut it is generally a good idea.\n\n143\n00:06:45.680 --> 00:06:48.470\nBut I'm gonna stick with this one and\nI'll go ahead and move forward.\n\n144\n00:06:48.470 --> 00:06:50.980\nIf I had more than one, I'd be picking\nthe one that was gonna be used for\n\n145\n00:06:50.980 --> 00:06:51.620\nconfiguration.\n\n146\n00:06:52.990 --> 00:06:53.840\nAll right.\n\n147\n00:06:53.840 --> 00:06:59.100\nThen it's listing the cluster information,\nI have to set a priority.\n\n148\n00:06:59.100 --> 00:07:00.860\nIn a cluster, you always have a master.\n\n149\n00:07:00.860 --> 00:07:05.840\nSomebody is the main node in that cluster,\nand it picks that based on a priority.\n\n150\n00:07:05.840 --> 00:07:07.450\nThe first node you add is priority one,\n\n151\n00:07:07.450 --> 00:07:09.550\nthe second node is priority two,\nand so on.\n\n152\n00:07:09.550 --> 00:07:12.780\nBut you might have one server that's maybe\nbetter hardware than the others, and\n\n153\n00:07:12.780 --> 00:07:14.000\nyou want that to be the primary.\n\n154\n00:07:14.000 --> 00:07:18.600\nSo you could set it's priority to one, and\nyou'll see that it goes from one to 32.\n\n155\n00:07:18.600 --> 00:07:22.070\nAnd that's our first indicator that\nwhen we build a Load Balancing Cluster,\n\n156\n00:07:22.070 --> 00:07:24.400\nwe have a maximum of 32 nodes, right?\n\n157\n00:07:24.400 --> 00:07:27.649\nSo you can have up to 32 client access\nservers that you're balancing across.\n\n158\n00:07:29.100 --> 00:07:31.620\nThen it's got the dedicated IP address for\n\n159\n00:07:31.620 --> 00:07:33.920\nthis system, 192.68.0.11,\nI'm fine with that.\n\n160\n00:07:33.920 --> 00:07:36.860\nAnd my initial host state is started.\n\n161\n00:07:36.860 --> 00:07:40.340\nWhen this system comes up, it's gonna\nstart up, it's not gonna go into standby.\n\n162\n00:07:40.340 --> 00:07:44.940\nNow this dedicated IP address, that's\nthe dedicated IP address of this node.\n\n163\n00:07:44.940 --> 00:07:47.480\nI'm gonna have a shared\nIP address in a minute.\n\n164\n00:07:47.480 --> 00:07:48.620\nThat'll be the virtual one,\n\n165\n00:07:48.620 --> 00:07:51.370\nthe one that's shared across all the nodes\nthat my clients are gonna connect to.\n\n166\n00:07:53.330 --> 00:07:56.600\nAnd here on this next screen is\nwhere I pick that shared IP.\n\n167\n00:07:56.600 --> 00:07:59.191\nIt's gonna create basically like\na fake server on the network.\n\n168\n00:07:59.191 --> 00:08:01.611\nAnd our clients are gonna\nconnect to that fake server.\n\n169\n00:08:01.611 --> 00:08:04.691\nSo this is the shared IP that's\ngonna bounce between my nodes.\n\n170\n00:08:04.691 --> 00:08:05.951\nI'm gonna go and hit add.\n\n171\n00:08:05.951 --> 00:08:07.611\nAnd I'll punch in an IP address.\n\n172\n00:08:07.611 --> 00:08:11.517\nNow it needs to be an IP that's\nin the same range as my nodes, so\n\n173\n00:08:11.517 --> 00:08:12.920\nthey can see it.\n\n174\n00:08:12.920 --> 00:08:16.316\nSo, I'm gonna give mine 192.168.0.222.\n\n175\n00:08:16.316 --> 00:08:21.380\nMy individual node was 192.168.0.11,\nso it'll be able to see this.\n\n176\n00:08:21.380 --> 00:08:25.583\nAnd it's subnet mask, I could do\na IPv6 balancerm if I wanted to.\n\n177\n00:08:25.583 --> 00:08:27.630\nBut in my case, I'm gonna do IPv4.\n\n178\n00:08:31.213 --> 00:08:35.085\nAnd we had a question in the chat room\nabout if you had a single interface,\n\n179\n00:08:35.085 --> 00:08:36.496\ncould you add a second IP?\n\n180\n00:08:36.496 --> 00:08:38.980\nWell, you could, but\nyou actually don't have to.\n\n181\n00:08:38.980 --> 00:08:42.834\nMy node is gonna keep\nthe 192.168.0.11 address.\n\n182\n00:08:42.834 --> 00:08:45.314\nSo in the future,\nif I wanna manage this one node,\n\n183\n00:08:45.314 --> 00:08:49.290\nI could always connect in on that\n.11 address, it will still have it.\n\n184\n00:08:49.290 --> 00:08:51.163\nIf I connect to .222, I'll get balance.\n\n185\n00:08:51.163 --> 00:08:54.480\nI don't know where I'm gonna go, but\n.11 will always send me to this one node.\n\n186\n00:08:54.480 --> 00:08:58.017\nI just have to remember the IP and you\ncould create DNS entries to take care of\n\n187\n00:08:58.017 --> 00:09:00.668\nthat, there's a number of\nways to get around that too.\n\n188\n00:09:00.668 --> 00:09:03.400\nSo .222, that's gonna be my shared one.\n\n189\n00:09:04.670 --> 00:09:08.483\nAnd I'll move forward and here,\nit's got that configuration for me and\n\n190\n00:09:08.483 --> 00:09:10.495\nI need to give it a Full Internet name.\n\n191\n00:09:10.495 --> 00:09:11.868\nIt's gonna be a fake server.\n\n192\n00:09:11.868 --> 00:09:14.510\nSo it's gonna have to have a DNS entry,\nso people can find it and\n\n193\n00:09:14.510 --> 00:09:15.930\nI need to give it a full name.\n\n194\n00:09:15.930 --> 00:09:23.050\nWell, my servers are called lab-exchserv\nand then a number to identify the node.\n\n195\n00:09:23.050 --> 00:09:25.079\nThis is gonna be the core\nof my cluster though, so\n\n196\n00:09:25.079 --> 00:09:26.669\nI'm just gonna leave the number off.\n\n197\n00:09:26.669 --> 00:09:32.258\nThis'll be lab-exchserv, but\nnotice it wants a full name,\n\n198\n00:09:32.258 --> 00:09:35.490\nso I need to add .lab.itpro.tv.\n\n199\n00:09:35.490 --> 00:09:39.653\nI need to add that, so it knows its full\ndomain name and I'm gonna have to go and\n\n200\n00:09:39.653 --> 00:09:42.270\ncreate a DNS entry for\nthis here in a minute.\n\n201\n00:09:42.270 --> 00:09:46.543\nThat points to 192.168.0.222.\n\n202\n00:09:46.543 --> 00:09:50.089\nNow when you set up load balancing,\nthere's three different modes that it can\n\n203\n00:09:50.089 --> 00:09:53.085\noperate in and\nthey each kinda have their pros and cons.\n\n204\n00:09:53.085 --> 00:09:55.191\nUnicast mode is really the preferred one,\nbut\n\n205\n00:09:55.191 --> 00:09:57.520\nit generates a little more\ntraffic on the network.\n\n206\n00:09:57.520 --> 00:10:01.154\nBasically, when somebody\nconnects to 192.168.222,\n\n207\n00:10:01.154 --> 00:10:03.449\nthe load balancer's gonna look at that and\n\n208\n00:10:03.449 --> 00:10:08.010\nit's gonna evenly distribute the user\nacross all the servers in the cluster.\n\n209\n00:10:08.010 --> 00:10:10.080\nSo if there's two servers in the cluster,\n\n210\n00:10:10.080 --> 00:10:13.630\nit'll send 50% of the traffic\nto 1 node and 50% to the other.\n\n211\n00:10:14.630 --> 00:10:19.505\nIt doesn't wanna have to load balance\nevery single packet from that client,\n\n212\n00:10:19.505 --> 00:10:24.380\nso what it does in unicast mode is it\nactually tells that client the MAC address\n\n213\n00:10:24.380 --> 00:10:26.713\nof a particular node in the cluster.\n\n214\n00:10:26.713 --> 00:10:29.433\nSo from now on,\nthey'll just go straight to that node.\n\n215\n00:10:29.433 --> 00:10:31.360\nThat's normally what we want.\n\n216\n00:10:31.360 --> 00:10:34.080\nBut if a node fails, we\n\n217\n00:10:34.080 --> 00:10:37.860\nmight have cached MAC addresses that take\na little while to flip over to the other.\n\n218\n00:10:37.860 --> 00:10:40.140\nSo unicast is very reliable, but\n\n219\n00:10:40.140 --> 00:10:43.330\nit doesn't necessarily failover\nas fast as some of the others.\n\n220\n00:10:43.330 --> 00:10:48.587\nMulticast and IGMP Multicast,\nthese two, they failover instantly.\n\n221\n00:10:48.587 --> 00:10:51.654\nYou have this one multicast\naddress you go to and\n\n222\n00:10:51.654 --> 00:10:55.411\nthen the nodes can pick up that\ntraffic and receive it, but\n\n223\n00:10:55.411 --> 00:11:00.670\nnot every switch and not every router\nallows us to do IGMP traffic across it.\n\n224\n00:11:00.670 --> 00:11:03.643\nSo if IGMP is not supported on your\nnetwork, you'll need to do unicast.\n\n225\n00:11:03.643 --> 00:11:07.048\nUnicast always works, but\nthe failover time might be five,\n\n226\n00:11:07.048 --> 00:11:10.380\nten seconds and\nI know that doesn't sound like a lot.\n\n227\n00:11:10.380 --> 00:11:14.045\nBut if you have really critical\nsoftware and that's too much time,\n\n228\n00:11:14.045 --> 00:11:16.049\nthen you don't wanna go that route.\n\n229\n00:11:16.049 --> 00:11:19.973\nWell, for a client access server,\nwe're talking about Outlook Web App,\n\n230\n00:11:19.973 --> 00:11:21.860\nwhich is just HTTP traffic.\n\n231\n00:11:21.860 --> 00:11:26.252\nWe might be talking about POP3 or\nIMAP4 and all of those can handle a 10 or\n\n232\n00:11:26.252 --> 00:11:29.334\n15 second outage,\nthat's not a big deal to them.\n\n233\n00:11:29.334 --> 00:11:32.550\nSo I'm gonna stick to unicast,\nbecause it's the most reliable.\n\n234\n00:11:35.329 --> 00:11:37.310\nNow, the big decision.\n\n235\n00:11:38.840 --> 00:11:42.680\nIf I have two network adapters,\none for management and one for\n\n236\n00:11:42.680 --> 00:11:45.210\nthe cluster,\nI can leave it at the default.\n\n237\n00:11:45.210 --> 00:11:48.950\nThe default is,\nit's gonna load balance all traffic.\n\n238\n00:11:48.950 --> 00:11:53.960\nAnything that I send to 192.168.0.222\nwill get balanced across these nodes and\n\n239\n00:11:53.960 --> 00:11:55.280\noff we go.\n\n240\n00:11:55.280 --> 00:11:58.010\nAnd it's an easy config,\nI just leave it at the default.\n\n241\n00:11:58.010 --> 00:12:00.557\nBut if I've only got one network adapter,\n\n242\n00:12:00.557 --> 00:12:03.688\nI need to be careful about\nwhat I'm load balancing.\n\n243\n00:12:03.688 --> 00:12:05.860\nI don't necessarily want\nto load balance everything.\n\n244\n00:12:05.860 --> 00:12:11.110\nAnd so we can take this rule and delete it\nand add new ones or change it and specify\n\n245\n00:12:11.110 --> 00:12:14.510\nexactly what we want to load balance and\nthen leave everything else off.\n\n246\n00:12:15.540 --> 00:12:18.363\nSo what I'm gonna do is I'm\ngonna add a new rule and\n\n247\n00:12:18.363 --> 00:12:20.729\nI'm gonna specify what I'm balancing.\n\n248\n00:12:20.729 --> 00:12:22.769\nNow, it's asking for what IP address.\n\n249\n00:12:22.769 --> 00:12:25.620\nIf your cluster has more than one IP,\nyou can pick from those here.\n\n250\n00:12:25.620 --> 00:12:27.044\nBut in my case, I've only got one IP.\n\n251\n00:12:27.044 --> 00:12:30.050\nSo, I'm not gonna worry about that and\nthen I specify the port ranges.\n\n252\n00:12:31.140 --> 00:12:33.444\nNow, we need to think about\nwhat we're balancing.\n\n253\n00:12:33.444 --> 00:12:36.608\nOn a client access server,\nwhat do you have?\n\n254\n00:12:36.608 --> 00:12:38.460\nWell, you have Outlook Web App.\n\n255\n00:12:38.460 --> 00:12:41.638\nAnd maybe the Exchange Control Panel or\nthe Exchange Admin Center,\n\n256\n00:12:41.638 --> 00:12:43.208\na couple other things like that.\n\n257\n00:12:43.208 --> 00:12:46.225\nThey all run on port 80 and port 443.\n\n258\n00:12:46.225 --> 00:12:50.958\n80 is unsecure and Exchange will\nactually do a redirect over to secure.\n\n259\n00:12:50.958 --> 00:12:55.875\nSo I'm gonna add a rule that says,\nI load balance port 80 and it's just TCP.\n\n260\n00:12:55.875 --> 00:12:58.779\nYou could say, if it was TCP and\nUDP or if it was both,\n\n261\n00:12:58.779 --> 00:13:03.270\nyou can specify that there and\nthen you can specify a filtering mode.\n\n262\n00:13:03.270 --> 00:13:08.250\nNow the default filtering mode is\nthat we have multiple hosts, but\n\n263\n00:13:08.250 --> 00:13:11.110\nwe're gonna try and\nconnect somebody to a single host.\n\n264\n00:13:11.110 --> 00:13:14.120\nAnd when they reconnect,\nthey're gonna stay on that host.\n\n265\n00:13:14.120 --> 00:13:16.087\nYou don't want every time\nsomebody clicks on a page for\n\n266\n00:13:16.087 --> 00:13:18.366\nthem to jump over to another host,\ntheir session would reset.\n\n267\n00:13:18.366 --> 00:13:20.590\nThey'd have to re log in,\nwe don't want that.\n\n268\n00:13:20.590 --> 00:13:24.019\nSo instead, we want them always to go back\nto the same node unless that node fails.\n\n269\n00:13:24.019 --> 00:13:25.850\nSo we've got single affinity.\n\n270\n00:13:25.850 --> 00:13:29.015\nWhen you connect, you hit that node and\nyou stay on that node for\n\n271\n00:13:29.015 --> 00:13:31.488\nthe rest of your session,\nbut you can change it.\n\n272\n00:13:31.488 --> 00:13:34.640\nYou can balance it based on network,\nyou can set a timeout.\n\n273\n00:13:34.640 --> 00:13:37.610\nWe can manipulate how that\nfunctions if we want, but\n\n274\n00:13:37.610 --> 00:13:39.913\nthe default here is to go multiple host.\n\n275\n00:13:39.913 --> 00:13:42.810\nNow you can do single host,\nyou can disable the port range.\n\n276\n00:13:42.810 --> 00:13:46.159\nThere's a couple other mechanisms there,\nbut the default is typically what we want.\n\n277\n00:13:46.159 --> 00:13:48.680\nSo, I'm just doing port 80 and\nthen I'm gonna come back in and\n\n278\n00:13:48.680 --> 00:13:49.620\nadd a few other things.\n\n279\n00:13:49.620 --> 00:13:52.679\nNow it's gonna warn me, it's overlapping\nwith that role that we've already got.\n\n280\n00:13:52.679 --> 00:13:54.080\nSo, I need to get rid of that role role.\n\n281\n00:13:54.080 --> 00:13:55.510\nI can just edit that role and change it.\n\n282\n00:13:55.510 --> 00:14:01.018\nI can just change this one to be port 80\nand then add in my other roles as needed.\n\n283\n00:14:01.018 --> 00:14:07.155\nSo there's 80 and then I'll need to do\nthe same thing for 443 and punch that in.\n\n284\n00:14:07.155 --> 00:14:11.433\nSo that's gonna take care of OWA and the\nExchange Admin Center and all those guys,\n\n285\n00:14:11.433 --> 00:14:13.357\nI need to think about my other ports.\n\n286\n00:14:13.357 --> 00:14:18.596\nIf I'm doing POP3 or IMAP4,\nit might be port 110 or\n\n287\n00:14:18.596 --> 00:14:22.731\n143, port 597, port 25 for SMTP.\n\n288\n00:14:22.731 --> 00:14:24.599\nAll those other ports that we use,\n\n289\n00:14:24.599 --> 00:14:28.100\nI would wanna add in the ones\nthat I'm load balancing.\n\n290\n00:14:28.100 --> 00:14:31.195\nAnything that's not in this list If\nsomebody goes to my shared IP on a port\n\n291\n00:14:31.195 --> 00:14:34.109\nless non-list, the traffic just\ngets thrown away and that's it.\n\n292\n00:14:34.109 --> 00:14:37.080\nSo, it's almost like\na mini firewall in a way.\n\n293\n00:14:38.590 --> 00:14:40.521\nSo, I'm just gonna add in\nmy web traffic for now.\n\n294\n00:14:40.521 --> 00:14:43.568\nYou guys know,\nyou can add in other ports as you need it.\n\n295\n00:14:43.568 --> 00:14:46.120\nThat's gonna create my cluster.\n\n296\n00:14:46.120 --> 00:14:49.956\nNow I've got a one node cluster, which\nis pretty much completely useless, but\n\n297\n00:14:49.956 --> 00:14:53.409\nit is gonna create that and get it put\nin place and I've got that server.\n\n298\n00:14:53.409 --> 00:14:55.750\nThere's the virtual IP\nthat's attached to it.\n\n299\n00:14:55.750 --> 00:14:59.524\nNow, I'm gonna wait for that to turn\ngreen and then I'll add a second node and\n\n300\n00:14:59.524 --> 00:15:02.040\nthat's when this cluster\nbecomes really useful.\n\n301\n00:15:02.040 --> 00:15:07.200\nThen I'll have two nodes and the traffic\nis gonna get balanced across them evenly,\n\n302\n00:15:07.200 --> 00:15:09.750\n50% to 1, 50% to the other.\n\n303\n00:15:09.750 --> 00:15:14.350\nIf I bring in a third node, now it's\ngonna do 33% on each 1 of them and\n\n304\n00:15:14.350 --> 00:15:16.511\ndistribute across them evenly.\n\n305\n00:15:16.511 --> 00:15:20.190\nNow, what if you have one server\nthat's maybe better than the others?\n\n306\n00:15:20.190 --> 00:15:22.274\nMaybe it's got more memory or so on.\n\n307\n00:15:22.274 --> 00:15:25.590\nYou can actually go in and\ntweak the balancing on these.\n\n308\n00:15:25.590 --> 00:15:28.671\nSo when you take a look at them,\nyou've got your host priority and\n\n309\n00:15:28.671 --> 00:15:29.688\nother information.\n\n310\n00:15:29.688 --> 00:15:34.416\nIf we start to edit some of these nodes,\nyou can start to specify that priority\n\n311\n00:15:34.416 --> 00:15:37.909\nvalue to manipulate which one\nis gonna get more traffic or\n\n312\n00:15:37.909 --> 00:15:43.630\nless traffic, so that's definitely\nsomething we can do as the system runs.\n\n313\n00:15:43.630 --> 00:15:47.261\nI just got my little green square on\nmy nodes, so I'm gonna come in here and\n\n314\n00:15:47.261 --> 00:15:48.328\nadd in another host.\n\n315\n00:15:48.328 --> 00:15:54.041\nI'm just going to right-click on the\ncluster and choose Add Host To Cluster and\n\n316\n00:15:54.041 --> 00:15:58.227\nI'm gonna put in lab-exchserve02,\nmy other server.\n\n317\n00:15:58.227 --> 00:16:00.996\nSo, it's gonna connect up to it and\nfind its IP address.\n\n318\n00:16:00.996 --> 00:16:04.430\nThere it is, it's 192.168.0.12.\n\n319\n00:16:04.430 --> 00:16:07.670\nNow its gonna connect up and most of\nthe settings that I had to provide for\n\n320\n00:16:07.670 --> 00:16:09.950\nthe other server,\nI don't have to provide here.\n\n321\n00:16:09.950 --> 00:16:12.590\nBecause it's just gonna learn\nthem from the existing config.\n\n322\n00:16:12.590 --> 00:16:14.391\nSo it's just showing me my IP.\n\n323\n00:16:14.391 --> 00:16:17.840\nI can set a priority, and\nthen I can set its status.\n\n324\n00:16:17.840 --> 00:16:21.049\nBut when I move forward,\nsee how it didn't ask me for a virtual IP?\n\n325\n00:16:21.049 --> 00:16:23.208\nIt already knows the virtual IP.\n\n326\n00:16:23.208 --> 00:16:27.180\nAnd it already knows the ports to forward\nbecause that was what was on other one, so\n\n327\n00:16:27.180 --> 00:16:29.110\nit's already got that information.\n\n328\n00:16:29.110 --> 00:16:31.720\nBut I could come in and edit these,\nand kinda tweak some things.\n\n329\n00:16:31.720 --> 00:16:34.600\nNotice down here I've got that\nhandling priority I could change\n\n330\n00:16:34.600 --> 00:16:36.380\nif we wanted to manipulate these values.\n\n331\n00:16:36.380 --> 00:16:39.860\nBut otherwise right now,\nit's doing an equal load.\n\n332\n00:16:39.860 --> 00:16:42.549\nIt's that load that lets me\ninfluence how much traffic it gets.\n\n333\n00:16:42.549 --> 00:16:45.882\nIf I edit that and I go down here\nto this load and uncheck it.\n\n334\n00:16:45.882 --> 00:16:48.000\nSee how it's 50% right now?\n\n335\n00:16:48.000 --> 00:16:51.750\nMaybe I only want this server to get\n30% and the other server gets 70%.\n\n336\n00:16:51.750 --> 00:16:52.870\nSo I can manipulate that and\n\n337\n00:16:52.870 --> 00:16:56.950\nthat's what's gonna change\nthe distribution across these servers.\n\n338\n00:16:56.950 --> 00:17:01.005\nI'm gonna leave mine equal, though,\ncuz my servers are actually identical, so\n\n339\n00:17:01.005 --> 00:17:02.966\nI don't really care which one we go to.\n\n340\n00:17:02.966 --> 00:17:07.186\nNow if the network load balancing feature\nwas not installed on the other server,\n\n341\n00:17:07.186 --> 00:17:10.535\nit's gonna reach out and install it,\nand then once it's done,\n\n342\n00:17:10.535 --> 00:17:12.650\nit'll bring it into the cluster.\n\n343\n00:17:12.650 --> 00:17:16.270\nBut in my case it is already installed,\nso it's just gonna reach out and\n\n344\n00:17:16.270 --> 00:17:19.130\nit says Pending, it's getting it\nconfigured on the other side, and\n\n345\n00:17:19.130 --> 00:17:21.020\nit's gonna put it in place.\n\n346\n00:17:21.020 --> 00:17:23.520\nSo that's reaching out and it's doing it.\n\n347\n00:17:23.520 --> 00:17:26.730\nWhile we're waiting on that,\nI need to create a DNS entry for\n\n348\n00:17:26.730 --> 00:17:28.450\nthis new fake server.\n\n349\n00:17:28.450 --> 00:17:33.591\nSo I'm gonna jump over to my domain\ncontroller where I'm running DNS.\n\n350\n00:17:33.591 --> 00:17:39.030\nAnd I'm just gonna jump into my DNS screen\nhere, and I'll browse into my domain.\n\n351\n00:17:39.030 --> 00:17:43.210\nAnd in my DNS records here,\nI'll see LAB-EXCHSERV01, LAB-EXCHSERV02,\n\n352\n00:17:43.210 --> 00:17:45.090\nthat's how people are connecting\nto them directly.\n\n353\n00:17:45.090 --> 00:17:49.070\nI'm gonna create a new A record in here,\nand\n\n354\n00:17:49.070 --> 00:17:54.960\nremember I called my cluster LAB-EXCHSERV\nand I just didn't put a number on it.\n\n355\n00:17:54.960 --> 00:17:57.070\nThat was gonna be that virtual node.\n\n356\n00:17:57.070 --> 00:18:02.756\nAnd I'll put in the IP address\nof that node, 192.168.0.222.\n\n357\n00:18:02.756 --> 00:18:06.921\nSo I'm just gonna punch that in,\nI can create a reverse record for\n\n358\n00:18:06.921 --> 00:18:10.060\nit if I want to, and\nwe'll get that put in place.\n\n359\n00:18:10.060 --> 00:18:13.140\nSo now I've got this server\nthat's not a real server.\n\n360\n00:18:13.140 --> 00:18:17.203\nIf somebody browses to\nlab-exchserv.lab.itpro.tv,\n\n361\n00:18:17.203 --> 00:18:20.707\nthey'll resolve 192.168.0.222.\n\n362\n00:18:20.707 --> 00:18:24.330\nWhen they go to that IP,\nthey hit the load balance cluster.\n\n363\n00:18:24.330 --> 00:18:27.008\nThey hit one of the nodes on that cluster.\n\n364\n00:18:27.008 --> 00:18:31.791\nAnd then that node evaluates where traffic\nis laid across the other nodes and\n\n365\n00:18:31.791 --> 00:18:34.860\nsends us to usually the least busy node.\n\n366\n00:18:34.860 --> 00:18:37.285\nAnd we get nice load balancing\nacross our hardware.\n\n367\n00:18:37.285 --> 00:18:42.160\nSo it's pretty cool that we could just\nstart adding more Client Access servers\n\n368\n00:18:42.160 --> 00:18:44.360\nand our end users still\ngo to the same address.\n\n369\n00:18:44.360 --> 00:18:47.545\nSo if we notice our Client Access servers\nare getting too busy, we just add another\n\n370\n00:18:47.545 --> 00:18:50.780\none and we add another one and add another\none and add more as you need them.\n\n371\n00:18:50.780 --> 00:18:52.590\nAnd now your clients are taken care of.\n\n372\n00:18:52.590 --> 00:18:56.830\nOr if you need to take one out for\nmaintenance, you can shut one down and\n\n373\n00:18:56.830 --> 00:18:58.900\nthe clients will just get\nsent to other servers.\n\n374\n00:18:58.900 --> 00:19:00.960\nAnd now you can do your Windows updates or\n\n375\n00:19:00.960 --> 00:19:03.965\nwhatever it is you're doing on that\nsystem and bring it back online.\n\n376\n00:19:03.965 --> 00:19:06.905\nSo it's all hidden to the users\nbecause they connect to\n\n377\n00:19:06.905 --> 00:19:08.685\nthis virtual server right here.\n\n378\n00:19:09.995 --> 00:19:13.645\nAll right,\nlet's take a look at our status, oh, wait,\n\n379\n00:19:13.645 --> 00:19:15.045\nthis one's still sitting here.\n\n380\n00:19:15.045 --> 00:19:16.727\nLet's take a look at our status here.\n\n381\n00:19:16.727 --> 00:19:19.912\nI can see that LAB-EXCHSERV02\nis now in the cluster, and\n\n382\n00:19:19.912 --> 00:19:22.582\nif I look at their status,\nthe status is Converged.\n\n383\n00:19:22.582 --> 00:19:24.224\nConverged is what you wanna see.\n\n384\n00:19:24.224 --> 00:19:28.312\nThat means the cluster nodes\nare all talking to each other,\n\n385\n00:19:28.312 --> 00:19:31.822\nthey've got the same configuration and\nthey're all happy.\n\n386\n00:19:31.822 --> 00:19:36.510\nAnd since their load is set to 50-50,\nhalf the traffic's getting sent to one and\n\n387\n00:19:36.510 --> 00:19:39.010\nhalf the traffic's getting\nsent to the other.\n\n388\n00:19:39.010 --> 00:19:40.380\nLet's see if this is working.\n\n389\n00:19:40.380 --> 00:19:43.540\nI'm gonna go to a client,\nlet's see, here's my client.\n\n390\n00:19:43.540 --> 00:19:45.990\nAnd let me just close these\nInternet Explorer windows.\n\n391\n00:19:45.990 --> 00:19:47.790\nI wanna start from scratch.\n\n392\n00:19:47.790 --> 00:19:51.660\nI'm gonna fire up an Internet Explorer\nwindow, and I'm gonna browse\n\n393\n00:19:53.590 --> 00:20:00.630\nto https://lab-exchserv.lab.itpro.tv.\n\n394\n00:20:00.630 --> 00:20:05.063\nI'm browsing to that virtual\nname that I just defined in DNS,\n\n395\n00:20:05.063 --> 00:20:09.258\nthat's gonna resolve to 192.168.0.222.\n\n396\n00:20:09.258 --> 00:20:12.282\nAnd I'm gonna hit the network\nload balancer, and\n\n397\n00:20:12.282 --> 00:20:16.700\nthe load balancer is gonna direct me\nto one of the nodes on the back-end.\n\n398\n00:20:16.700 --> 00:20:20.132\nAnd actually, I forgot something,\nthat's not gonna work.\n\n399\n00:20:20.132 --> 00:20:22.132\nWhoops, let me try that again.\n\n400\n00:20:22.132 --> 00:20:28.639\nAll right, so\nif I browse to https://lab.exchserv,\n\n401\n00:20:28.639 --> 00:20:31.174\nI need to add in /owa.\n\n402\n00:20:31.174 --> 00:20:32.690\nThere's actually nothing\non that parent page.\n\n403\n00:20:32.690 --> 00:20:34.330\nI need to get into Outlook web app.\n\n404\n00:20:34.330 --> 00:20:36.127\nSo it's gonna reach into that cluster and\n\n405\n00:20:36.127 --> 00:20:38.870\nit's gonna get directed\nto one of the nodes.\n\n406\n00:20:38.870 --> 00:20:40.500\nSo that takes care of the servers.\n\n407\n00:20:40.500 --> 00:20:42.550\nLet's jump over to a client and\nsee if this works.\n\n408\n00:20:42.550 --> 00:20:45.080\nSo I'm gonna jump over to a machine and\nremember,\n\n409\n00:20:45.080 --> 00:20:47.820\nwe created a virtual server,\na fake server.\n\n410\n00:20:47.820 --> 00:20:52.505\nI should be able to fire open a command\nprompt and do something crazy like ping\n\n411\n00:20:52.505 --> 00:20:57.890\n192.168.0.222, that's that virtual IP,\nand I'm getting ping responses.\n\n412\n00:20:57.890 --> 00:21:02.870\nThere's no actual server at 222, it's the\nload balancing cluster that I'm hitting.\n\n413\n00:21:02.870 --> 00:21:05.310\nAnd so if I fire up a web browser and\n\n414\n00:21:05.310 --> 00:21:08.330\nI point to that cluster,\nI'll get load balanced.\n\n415\n00:21:08.330 --> 00:21:12.339\nIf I go to https://lab.exchserv,\n\n416\n00:21:12.339 --> 00:21:19.633\nthat's that load balance cluster\nwe just made, and I'll go to /owa.\n\n417\n00:21:19.633 --> 00:21:21.520\nWell, I'm getting a certificate warning.\n\n418\n00:21:21.520 --> 00:21:23.170\nNow why am I getting\na certificate warning?\n\n419\n00:21:23.170 --> 00:21:25.870\nWell, each server had\na self-signed certificate.\n\n420\n00:21:25.870 --> 00:21:30.440\nSo LAB-EXCHSERV01, LAB-EXCHSERV02,\nthey had self-signed certificates.\n\n421\n00:21:30.440 --> 00:21:34.110\nNow I'm accessing it with a different\ndomain name and it doesn't match.\n\n422\n00:21:34.110 --> 00:21:40.100\nSo I'll need to generate an SSL\ncertificate that matches LAB-EXCHSERV and\n\n423\n00:21:40.100 --> 00:21:43.460\nattach that to all of my Client Access\nservers that are in this load balancing\n\n424\n00:21:43.460 --> 00:21:45.230\ncluster so the certificate matches.\n\n425\n00:21:45.230 --> 00:21:48.380\nBut aside from that,\nI am actually in here.\n\n426\n00:21:48.380 --> 00:21:51.420\nAnd if I go and try and\nlog in, I can get in there.\n\n427\n00:21:51.420 --> 00:21:55.430\nNow looking at this, do I know if I'm\nconnected to Exchange Server 1 or\n\n428\n00:21:55.430 --> 00:21:56.850\nExchange Server 2?\n\n429\n00:21:56.850 --> 00:21:57.540\nI don't.\n\n430\n00:21:57.540 --> 00:22:00.020\nThe end user doesn't know whether\nthey're on one or the other.\n\n431\n00:22:00.020 --> 00:22:00.960\nIt's seamless to them.\n\n432\n00:22:00.960 --> 00:22:04.870\nThey just see this general server\nname that's part of the cluster\n\n433\n00:22:04.870 --> 00:22:06.320\nthat we defined.\n\n434\n00:22:06.320 --> 00:22:09.200\nBut if I go and take a look at\nthe certificate attached to this thing,\n\n435\n00:22:09.200 --> 00:22:10.740\nI can find out who it is.\n\n436\n00:22:10.740 --> 00:22:12.240\nI'm attached to server number 2.\n\n437\n00:22:13.600 --> 00:22:16.850\nI connected to a generic name but I ended\nup on server number 2 because that's where\n\n438\n00:22:16.850 --> 00:22:19.370\nthe load balancing cluster\nfelt I should have ended up.\n\n439\n00:22:19.370 --> 00:22:21.400\nSo half the traffic being\nsent to one server,\n\n440\n00:22:21.400 --> 00:22:23.370\nhalf the traffic being sent to the other.\n\n441\n00:22:23.370 --> 00:22:26.320\nNow the really cool stuff here\nis that if we see our servers\n\n442\n00:22:26.320 --> 00:22:29.400\nstart to get really busy,\nwe can start to add more servers in.\n\n443\n00:22:29.400 --> 00:22:30.850\nAnd they don't have to be identical.\n\n444\n00:22:30.850 --> 00:22:33.610\nI can add in servers with more memory or\nbetter processors, or\n\n445\n00:22:33.610 --> 00:22:35.745\nthey can be weaker memory and\njust add a bunch more of them.\n\n446\n00:22:35.745 --> 00:22:38.590\nWhatever it is that I need,\nI can add them in there.\n\n447\n00:22:38.590 --> 00:22:41.420\nAnd if I need to do maintenance\nI can take a server out.\n\n448\n00:22:41.420 --> 00:22:44.290\nNow it probably won't be on the Exchange\nexam but I do want to show you guys how to\n\n449\n00:22:44.290 --> 00:22:47.510\ntake a server out for maintenance and\ncreate the least impact.\n\n450\n00:22:47.510 --> 00:22:51.352\nBecause when a user's logged in on one\nserver and they get moved to another node,\n\n451\n00:22:51.352 --> 00:22:55.460\nit resets their session and they have to\nlogin again, and that annoys the users.\n\n452\n00:22:55.460 --> 00:22:57.770\nSo we want to try and\nkeep that to a minimum if we can.\n\n453\n00:22:57.770 --> 00:23:00.230\nYou don't want people\nconstantly relogging in.\n\n454\n00:23:00.230 --> 00:23:03.880\nSo in network load balancing,\nwe have a feature called drain stop.\n\n455\n00:23:03.880 --> 00:23:07.470\nWhat drain stop does is it says,\ntake a server and\n\n456\n00:23:07.470 --> 00:23:10.440\ndon't send any more connections to it,\nbut let\n\n457\n00:23:10.440 --> 00:23:15.230\nthe existing connections continue to work\nuntil those users log out on their own.\n\n458\n00:23:15.230 --> 00:23:17.840\nAnd that way, over a period of\ntime the users trickle out, and\n\n459\n00:23:17.840 --> 00:23:19.810\nnow the server becomes available.\n\n460\n00:23:19.810 --> 00:23:21.540\nSo let me show you how that works.\n\n461\n00:23:21.540 --> 00:23:24.350\nSo let's say that I need to do some\nmaintenance on node number two.\n\n462\n00:23:24.350 --> 00:23:26.130\nRight, this LAB-EXCHSERV02.\n\n463\n00:23:26.130 --> 00:23:28.540\nI want to take it out and\ndo some Windows updates.\n\n464\n00:23:28.540 --> 00:23:34.200\nSo I can right-click on that, and\nI can go to Control Host > Drainstop.\n\n465\n00:23:34.200 --> 00:23:37.290\nI could just choose Stop and that would\ntake it out of commission right now.\n\n466\n00:23:37.290 --> 00:23:42.010\nBut if I choose Drainstop, it's gonna say,\ndon't send any new people to that server\n\n467\n00:23:43.040 --> 00:23:45.900\nbut let the existing connections finish.\n\n468\n00:23:45.900 --> 00:23:50.160\nSo if I've got a session open, like this\nOWA session here, it'll let me finish.\n\n469\n00:23:50.160 --> 00:23:52.490\nAnd then when I'm done, I sign out,\n\n470\n00:23:52.490 --> 00:23:57.740\nmy session's over, we kinda close,\nand then that's the end of it.\n\n471\n00:23:57.740 --> 00:24:02.698\nWell, back here, it's watching that,\nand when the last session is done,\n\n472\n00:24:02.698 --> 00:24:04.952\nthen this server will go offline.\n\n473\n00:24:04.952 --> 00:24:07.091\nAnd when it's offline,\nthen I can go and do maintenance.\n\n474\n00:24:07.091 --> 00:24:09.151\nNow that might take 5 minutes,\nit might take 20 minutes.\n\n475\n00:24:09.151 --> 00:24:11.611\nI think 20 minutes is the default.\n\n476\n00:24:11.611 --> 00:24:16.971\nThere is a setting that defines\nthe maximum time it'll wait.\n\n477\n00:24:16.971 --> 00:24:18.508\nLet's see if I can remember\nwhere that setting is,\n\n478\n00:24:18.508 --> 00:24:20.650\nit's been a long time since\nI've messed with that one.\n\n479\n00:24:20.650 --> 00:24:24.620\nBut somewhere is a limit on how long it\nwill wait, I want to say it's 20 minutes\n\n480\n00:24:24.620 --> 00:24:27.470\nand after 20 minutes if there's still\nsomebody in there it just kicks them out.\n\n481\n00:24:27.470 --> 00:24:32.100\nBut for me, I'm logged out,\nif I go and create a new sessions, so\n\n482\n00:24:32.100 --> 00:24:38.840\nif I fire up a web browser and, and\ntry and browse back to that system, right.\n\n483\n00:24:38.840 --> 00:24:42.990\nI'm gonna go and\nget connected in, here we go, and\n\n484\n00:24:42.990 --> 00:24:46.920\nnow if I look at the certificate on this\none I can see I'm connected to Serve 01,\n\n485\n00:24:46.920 --> 00:24:49.180\nsee how it just flipped\nme over to the other one.\n\n486\n00:24:49.180 --> 00:24:53.300\nAnybody new is gonna get connected to\nServe 01, Serve 02 empties out, and\n\n487\n00:24:53.300 --> 00:24:56.450\nwhen it's actually empty, this will\nchange to let me know the node is down.\n\n488\n00:24:56.450 --> 00:24:59.010\nRight now It says that it's converging,\n\n489\n00:24:59.010 --> 00:25:00.910\nit's still kind of going\nthrough that process.\n\n490\n00:25:00.910 --> 00:25:03.850\nSometimes this screen doesn't refresh very\nwell, so I'm just going to right-click and\n\n491\n00:25:03.850 --> 00:25:05.830\nrefresh, and it's probably down already.\n\n492\n00:25:05.830 --> 00:25:07.210\nAnd yep there it is, yep.\n\n493\n00:25:07.210 --> 00:25:08.620\nI can see that it's stopped,\n\n494\n00:25:08.620 --> 00:25:11.090\nI'm now free to do whatever\nmaintenance on that system I need.\n\n495\n00:25:11.090 --> 00:25:13.600\nI can reboot it, do updates, whatever.\n\n496\n00:25:13.600 --> 00:25:16.375\nAnd when I'm done I just\nbring it back into the pool.\n\n497\n00:25:16.375 --> 00:25:20.250\nYou can right-click on it,\ngo to control host and go to Start, and\n\n498\n00:25:20.250 --> 00:25:24.630\nthat's gonna bring it back into the pool,\nand be ready for action, right.\n\n499\n00:25:24.630 --> 00:25:27.610\nSo, really neat that we get that\nfunctionality, this works for\n\n500\n00:25:27.610 --> 00:25:30.250\nall the client access server functions.\n\n501\n00:25:30.250 --> 00:25:35.010\nOWA, Outlook Anywhere, POP3,\nIMAP 4, it works great for\n\n502\n00:25:35.010 --> 00:25:40.030\nall those, you can get it set up It does\nnot work for mailbox databases, all right?\n\n503\n00:25:40.030 --> 00:25:43.710\nYou cannot load balance user\nacross mailbox databases.\n\n504\n00:25:43.710 --> 00:25:48.300\nTheir mailbox exists actively on\none server and one server only.\n\n505\n00:25:48.300 --> 00:25:50.250\nEven if you have database\navailability groups and\n\n506\n00:25:50.250 --> 00:25:54.330\nthe email is stored in more than one\nplace, there's only one active copy, and\n\n507\n00:25:54.330 --> 00:25:55.940\nthat's what users need to connect to.\n\n508\n00:25:55.940 --> 00:25:59.272\nSo don't do NLB on a mailbox\ndatabase server, or if you do,\n\n509\n00:25:59.272 --> 00:26:00.820\ncuz technically I'm doing here.\n\n510\n00:26:00.820 --> 00:26:05.440\nIf you do, don't try and balance the ports\nthat it uses for the mailbox database,\n\n511\n00:26:05.440 --> 00:26:08.680\nright, that are RPC and MapE ports,\ndon't try and load balance those.\n\n512\n00:26:08.680 --> 00:26:14.590\nBe really specific and only load balance\nthe client access ports like I did here,\n\n513\n00:26:14.590 --> 00:26:17.040\nso that's how we kind\nof keep that in line.\n\n514\n00:26:17.040 --> 00:26:19.530\nBut using Windows Load Balancing Service\nit's not very hard,\n\n515\n00:26:19.530 --> 00:26:23.360\nit's pretty easy to get set up, it's\na part of Windows Server Standard Edition,\n\n516\n00:26:23.360 --> 00:26:26.010\nyou don't have to pay extra for it,\nyou don't need clustered hardware.\n\n517\n00:26:26.010 --> 00:26:28.910\nIt's a quick and\neasy way to get load balancing in place,\n\n518\n00:26:28.910 --> 00:26:31.730\nto get redundancy in place,\nand to get seamless,\n\n519\n00:26:31.730 --> 00:26:36.490\ninvisible maintenance in place, to keep\nthe servers up and keep your users happy.\n\n520\n00:26:36.490 --> 00:26:39.570\nSo it's a really great system, and\nit's all built right in there.\n\n521\n00:26:40.610 --> 00:26:44.050\nAll right, so in this episode we got\na chance to see the Windows load balancing\n\n522\n00:26:44.050 --> 00:26:47.820\nsystem and how we can use that to\ncreate redundant client access servers.\n\n523\n00:26:47.820 --> 00:26:51.350\nReal important to keep the visibility\nof our network up and healthy.\n\n524\n00:26:51.350 --> 00:26:52.160\nPretty easy to implement,\n\n525\n00:26:52.160 --> 00:26:54.980\ndefinitely something you'll want to\nuse out there in the production world.\n\n526\n00:26:54.980 --> 00:26:58.481\nAll right, well, I hope you guys enjoyed\nthe episode, signing off for ITProTV,\n\n527\n00:26:58.481 --> 00:27:00.432\nI'm Don Pezet, and I'll see you next time.\n\n528\n00:27:00.432 --> 00:27:05.810\n[MUSIC]\n\n",
          "vimeoId": "136336213"
        }
      ],
      "title": "Client Access Server"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don explains the default send and receive connectors present in Exchange 2013. He then demonstrates how to create custom connectors, and some of the various scenarios where that would be necessary.",
          "length": "1627",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-1-sendrecieve_connectors-081315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-1-sendrecieve_connectors-081315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-1-sendrecieve_connectors-081315-1-sm.jpg",
          "title": "Send/Receive Connectors",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.037 --> 00:00:13.768\nAll right good morning,\ngood afternoon and and good evening, and\n\n3\n00:00:13.768 --> 00:00:15.641\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.641 --> 00:00:19.850\nI'm your host, Don Pezet, back again\nwith another episode of Exchange 2013.\n\n5\n00:00:19.850 --> 00:00:24.090\nIn this episode we're gonna be taking\na look at Send and Receive Connectors.\n\n6\n00:00:24.090 --> 00:00:27.470\nAnd if you haven't heard of these guys,\nthey're kind of important.\n\n7\n00:00:27.470 --> 00:00:31.590\nAny email coming in or out of your\norganization passes through a Send or\n\n8\n00:00:31.590 --> 00:00:33.060\na Receive Connector.\n\n9\n00:00:33.060 --> 00:00:35.840\nIt sends for the outgoing,\nreceives are for the incoming.\n\n10\n00:00:35.840 --> 00:00:40.090\nAnd they dictate whether or not that\nemail is even allowed to pass through.\n\n11\n00:00:40.090 --> 00:00:42.890\nAnd if you've set up a brand\nnew install of Exchange 2013,\n\n12\n00:00:42.890 --> 00:00:45.730\nyou might have noticed a little problem.\n\n13\n00:00:45.730 --> 00:00:47.790\nThat your unable to send to the internet.\n\n14\n00:00:47.790 --> 00:00:50.280\nAnd that's because the default\nconfiguration of Center Receive\n\n15\n00:00:50.280 --> 00:00:53.140\nConnectors, isn't configured\nproperly right out to the internet.\n\n16\n00:00:53.140 --> 00:00:54.750\nSo it gives you a little bit of a problem.\n\n17\n00:00:54.750 --> 00:00:56.760\nWe got to make sure we go in and\nwe tweak these.\n\n18\n00:00:56.760 --> 00:00:59.070\nAll right, now, you might ask yourself,\n\n19\n00:00:59.070 --> 00:01:02.330\nwhy doesn't Microsoft configure this stuff\nfor me, so it works right out of the box?\n\n20\n00:01:02.330 --> 00:01:05.930\nThe answer is, there's a lot of\nroom to make mistakes here, and\n\n21\n00:01:05.930 --> 00:01:11.040\nif you make a mistake your server can\npotentially be open to relay spam.\n\n22\n00:01:11.040 --> 00:01:14.330\nSo Microsoft says, we're going\nto set it up for internal email.\n\n23\n00:01:14.330 --> 00:01:17.600\nAnd if you want external, if you want\nemail to the Internet, you can set it up\n\n24\n00:01:17.600 --> 00:01:21.340\nyourself and make sure that it is set up\nproperly so you're not relaying spam.\n\n25\n00:01:21.340 --> 00:01:24.320\nWe definitely don't wanna get on one of\nthose email blacklists that's out there,\n\n26\n00:01:24.320 --> 00:01:26.900\nthen you gotta go through\nthe headache of getting delisted and\n\n27\n00:01:26.900 --> 00:01:28.100\nit's just a nightmare.\n\n28\n00:01:28.100 --> 00:01:31.430\nFortunately, it's not that hard to set up,\nwe just need to know to do it.\n\n29\n00:01:31.430 --> 00:01:32.000\nAll right.\n\n30\n00:01:32.000 --> 00:01:33.560\nLet me show you what I mean.\n\n31\n00:01:33.560 --> 00:01:35.900\nFirst off, we need to kind of\nunderstand where these send and\n\n32\n00:01:35.900 --> 00:01:39.570\nreceive connectors come in, and\nit all has to do with mail flow.\n\n33\n00:01:39.570 --> 00:01:41.880\nIn some of the other episodes,\nwe've talked about mail flow,\n\n34\n00:01:41.880 --> 00:01:45.630\nwhich is talking really about how that\nemail moves from server to server through\n\n35\n00:01:45.630 --> 00:01:46.900\nyour organization.\n\n36\n00:01:46.900 --> 00:01:50.882\nAnd inside of mail flow,\nyou'll see things like accepted domains.\n\n37\n00:01:50.882 --> 00:01:54.980\nThese are domains that we're\nallowed to receive email for, but\n\n38\n00:01:54.980 --> 00:01:57.380\nas far as sending, we can send as anybody.\n\n39\n00:01:57.380 --> 00:02:00.630\nBut you'll see right here, you've got your\nreceive and your send connectors where\n\n40\n00:02:00.630 --> 00:02:04.050\nwe can define how that email,\nwhat are the entry points for the email,\n\n41\n00:02:04.050 --> 00:02:07.590\nwhat are the exits point for the email,\nand how we want that to flow.\n\n42\n00:02:07.590 --> 00:02:11.400\nNow, before we do that, I wanna show\nyou guys something real quick about my\n\n43\n00:02:11.400 --> 00:02:14.350\ntopology, and\nthen we'll look at the default settings.\n\n44\n00:02:14.350 --> 00:02:18.280\nSo, I'm gonna jump all the way down here\nto servers and pull up my list of servers.\n\n45\n00:02:18.280 --> 00:02:21.270\nIn my exchange topology,\nI have three exchange servers.\n\n46\n00:02:21.270 --> 00:02:25.250\nI have Lab Exchanger Server 1,\nit's just a mailbox server.\n\n47\n00:02:25.250 --> 00:02:28.260\nNumber two is a client access server,\nnumber three is a mailbox and\n\n48\n00:02:28.260 --> 00:02:29.580\na client access server.\n\n49\n00:02:29.580 --> 00:02:32.800\nAnd the reason I did this is I wanna\nshow you guys the different connectors\n\n50\n00:02:32.800 --> 00:02:34.890\nthat are set up by default for each one.\n\n51\n00:02:34.890 --> 00:02:37.840\nI have not modified my\nconnectors one single bit, so\n\n52\n00:02:37.840 --> 00:02:39.770\nthese are the default ones that we've got.\n\n53\n00:02:39.770 --> 00:02:42.540\nIt'll have some created for\neach of these, all right.\n\n54\n00:02:42.540 --> 00:02:46.910\nNow, when we go and start to define\nthese settings, what you'll notice\n\n55\n00:02:46.910 --> 00:02:51.510\nis that each server maintains its\nown receive connectors, right?\n\n56\n00:02:51.510 --> 00:02:55.590\nThe receive connectors for incoming email,\nthat's dictated on each individual server.\n\n57\n00:02:55.590 --> 00:02:58.160\nBut the send connectors for\ngoing out to the internet,\n\n58\n00:02:58.160 --> 00:03:00.920\nthose are actually shared, so\nit's a little bit of a different behavior\n\n59\n00:03:00.920 --> 00:03:03.430\nbetween the different connector types and\nwe'll see that in the configuration.\n\n60\n00:03:04.640 --> 00:03:09.710\nAlright, now when I jump back to mail flow\nand I go up here to my receive connectors\n\n61\n00:03:09.710 --> 00:03:13.670\nremember how I said receive connectors are\nmanaged per server So the first thing I\n\n62\n00:03:13.670 --> 00:03:18.230\nsee is this drop-down box, where I\ncan pick what server I'm looking at.\n\n63\n00:03:18.230 --> 00:03:22.880\nIf I jump over to send connectors, see how\nI don't have that server drop-down box?\n\n64\n00:03:22.880 --> 00:03:25.640\nAnd that's because these are shared\nacross all the servers, right, so\n\n65\n00:03:25.640 --> 00:03:26.810\nthat's a little bit different.\n\n66\n00:03:26.810 --> 00:03:28.820\nAnd also notice I don't have any.\n\n67\n00:03:28.820 --> 00:03:30.480\nThere's no send connectors.\n\n68\n00:03:30.480 --> 00:03:31.380\nWhy not?\n\n69\n00:03:31.380 --> 00:03:33.260\nWell, that means I can't send email.\n\n70\n00:03:33.260 --> 00:03:35.040\nIt doesn't mean you can't send any email.\n\n71\n00:03:35.040 --> 00:03:36.880\nYou can send internal email.\n\n72\n00:03:36.880 --> 00:03:41.220\nInternal email is any email destined for\none of these accepted domains.\n\n73\n00:03:41.220 --> 00:03:45.310\nSo I have lab.itpro.tv and itprotv.net.\n\n74\n00:03:45.310 --> 00:03:48.770\nIf I send an email to either of those\ndomains, I handle it internally,\n\n75\n00:03:48.770 --> 00:03:49.910\nthat works fine.\n\n76\n00:03:49.910 --> 00:03:51.340\nI've got internal email.\n\n77\n00:03:51.340 --> 00:03:54.500\nBut if I try and email somebody on\nthe Internet, it's gonna bounce.\n\n78\n00:03:54.500 --> 00:03:55.040\nIt's gonna fail.\n\n79\n00:03:55.040 --> 00:03:57.670\nIt's not gonna be able to\nget out to the Internet.\n\n80\n00:03:57.670 --> 00:04:00.150\nI can receive email from the Internet, but\n\n81\n00:04:00.150 --> 00:04:02.980\nI can't send to it myself,\nbecause I have no Send connectors.\n\n82\n00:04:02.980 --> 00:04:06.240\nSo that's absolutely something we're gonna\nhave to correct if we want our system\n\n83\n00:04:06.240 --> 00:04:07.930\nto function properly.\n\n84\n00:04:07.930 --> 00:04:09.430\nNow, on the Receive side,\n\n85\n00:04:09.430 --> 00:04:12.260\nMicrosoft has already set up\nsome received connectors for me.\n\n86\n00:04:12.260 --> 00:04:16.660\nAnd the connectors they set up vary based\non what type of server it is, right.\n\n87\n00:04:16.660 --> 00:04:19.620\nRemember when you install Exchange,\nyou pick from some server roles.\n\n88\n00:04:19.620 --> 00:04:22.080\nYou pick whether you want it\nto be a Mailbox server or\n\n89\n00:04:22.080 --> 00:04:24.510\nwhether it's a Client Access server.\n\n90\n00:04:24.510 --> 00:04:27.970\nAnd those servers have some\nother functions they perform.\n\n91\n00:04:27.970 --> 00:04:31.920\nFor example there's\nthe Front End Transport service.\n\n92\n00:04:31.920 --> 00:04:35.790\nAnd the hub transport service, and\nthen the mailbox transport service.\n\n93\n00:04:35.790 --> 00:04:40.080\nThose three are what used to be\ncalled the Hub Transport Server.\n\n94\n00:04:40.080 --> 00:04:42.820\nMicrosoft broke those up\ninto three services, and\n\n95\n00:04:42.820 --> 00:04:44.760\nspread them across our\nservers in different ways.\n\n96\n00:04:44.760 --> 00:04:47.350\nAnd that changes these receive connectors.\n\n97\n00:04:47.350 --> 00:04:48.370\nAll right?\n\n98\n00:04:48.370 --> 00:04:50.230\nIf you're a mailbox server.\n\n99\n00:04:50.230 --> 00:04:53.460\nA mailbox server's gonna run\nthe hub transport service and\n\n100\n00:04:53.460 --> 00:04:55.190\nthe mailbox transport service.\n\n101\n00:04:55.190 --> 00:04:59.610\nIt's the one that's responsible for\napplying our transport rules and\n\n102\n00:04:59.610 --> 00:05:01.520\nputting email in the mailboxes.\n\n103\n00:05:01.520 --> 00:05:03.660\nThis is what's actually gonna to\nbe putting email in the mailbox.\n\n104\n00:05:03.660 --> 00:05:04.950\nThat's kind of important.\n\n105\n00:05:04.950 --> 00:05:09.160\nAnd so when I pick a server that's\na mailbox server like my server number one\n\n106\n00:05:09.160 --> 00:05:11.530\nor my server number three,\nthey're both mailbox servers.\n\n107\n00:05:11.530 --> 00:05:14.460\nThey're gonna have two received\nconnectors by default.\n\n108\n00:05:14.460 --> 00:05:18.100\nAnd if you look at them,\none is a Client Proxy, and\n\n109\n00:05:18.100 --> 00:05:20.560\none is just called default, all right.\n\n110\n00:05:20.560 --> 00:05:22.000\nThe default is the most common one.\n\n111\n00:05:22.000 --> 00:05:26.320\nIf I edit the default and\ntake a look at it, what we'll see in here\n\n112\n00:05:26.320 --> 00:05:30.040\nis that it's basically a receive\nconnector, it's set up to receive email,\n\n113\n00:05:30.040 --> 00:05:34.440\nit has a limit on it holding\nemails to below 35 megabytes.\n\n114\n00:05:34.440 --> 00:05:38.290\nSo if I get an email that's bigger than 35\nmegabytes, I reject it, email's too big.\n\n115\n00:05:38.290 --> 00:05:40.030\nYou might want to make that bigger for\nyour environment or\n\n116\n00:05:40.030 --> 00:05:41.500\nsmaller for your environment, right?\n\n117\n00:05:41.500 --> 00:05:42.400\nI hate email attachments.\n\n118\n00:05:42.400 --> 00:05:43.810\nSo you might wanna make it smaller.\n\n119\n00:05:43.810 --> 00:05:47.100\nThough we can define right here\nthat it's allowed to receive email.\n\n120\n00:05:47.100 --> 00:05:51.140\nAnd under security, we say who\nare allowed to receive email from.\n\n121\n00:05:51.140 --> 00:05:53.270\nAnd if you look at who\nyou're receiving it from,\n\n122\n00:05:53.270 --> 00:05:55.430\nyou're receiving only\nencrypted connections.\n\n123\n00:05:55.430 --> 00:05:56.790\nIf I look at this list, right?\n\n124\n00:05:56.790 --> 00:06:01.780\nTLS, basic authentication users using TLS\nand Exchange Server Authentication, right?\n\n125\n00:06:01.780 --> 00:06:04.040\nSo it's only authenticated users.\n\n126\n00:06:04.040 --> 00:06:08.320\nAnd then down here it's limited to\nExchange servers, Legacy Exchange servers,\n\n127\n00:06:08.320 --> 00:06:12.200\nthose would be like Exchange 2000 and\nearlier, and Exchange users.\n\n128\n00:06:12.200 --> 00:06:14.580\nSee how Anonymous users are not checked.\n\n129\n00:06:14.580 --> 00:06:17.950\nIf I receive an email from the internet,\nare they gonna authenticate against me?\n\n130\n00:06:17.950 --> 00:06:19.330\nNot normally, right?\n\n131\n00:06:19.330 --> 00:06:24.030\nSo, a mailbox server will not\naccept unauthenticated connections.\n\n132\n00:06:24.030 --> 00:06:25.890\nIt's protected,\nyou can't send an email to it.\n\n133\n00:06:25.890 --> 00:06:28.260\nAnd that's because your not suppose to.\n\n134\n00:06:28.260 --> 00:06:31.150\nIncoming email from the internet is\nsuppose to go to a client access server,\n\n135\n00:06:31.150 --> 00:06:32.500\nnot a mailbox server.\n\n136\n00:06:32.500 --> 00:06:34.330\nAnd that's why that\npermission is not enabled.\n\n137\n00:06:34.330 --> 00:06:37.520\nAnd then if I go down to Scoping,\nI'll see it's tied to\n\n138\n00:06:37.520 --> 00:06:41.320\nall the email addresses on this server and\nit's tied to Port 25.\n\n139\n00:06:41.320 --> 00:06:43.760\nThat's the SMTP port, right?\n\n140\n00:06:43.760 --> 00:06:46.260\nSMTP is not encrypted by default, but\n\n141\n00:06:46.260 --> 00:06:49.370\nunder security,\nI'm requiring authentication and\n\n142\n00:06:49.370 --> 00:06:54.480\nencryption, so it'll have to be encrypted\nSMTP to connect to the mailbox.\n\n143\n00:06:54.480 --> 00:06:56.560\nInternet users are not gonna\nbe able to connect to that.\n\n144\n00:06:56.560 --> 00:06:59.820\nThis is suitable only for\ninternal connections, right?\n\n145\n00:06:59.820 --> 00:07:06.350\nSo the take-away from this screen is that\nany mailbox server will have secure,\n\n146\n00:07:06.350 --> 00:07:11.000\nencrypted receive connectors, so\nonly internal servers can talk to it.\n\n147\n00:07:11.000 --> 00:07:13.500\nInternet email can not\ngo to a mailbox server.\n\n148\n00:07:13.500 --> 00:07:16.260\nNow that's one of the connectors,\nthe one on port 25,\n\n149\n00:07:16.260 --> 00:07:18.620\nthere's this other one client proxy.\n\n150\n00:07:18.620 --> 00:07:19.770\nWhat's that all about?\n\n151\n00:07:19.770 --> 00:07:22.900\nWell, if I take a look at the client proxy\nit's actually going to be set up the same\n\n152\n00:07:22.900 --> 00:07:23.970\nas the other one.\n\n153\n00:07:23.970 --> 00:07:26.390\nThe big difference is the scoping.\n\n154\n00:07:26.390 --> 00:07:28.920\nWhen we look at the scoping\nit's tied to port 465.\n\n155\n00:07:28.920 --> 00:07:33.250\nAnd when we go under security, notice how\nLegacy Exchange Server is turned off.\n\n156\n00:07:33.250 --> 00:07:35.520\nAnd it's got Exchange servers and\nExchange users.\n\n157\n00:07:35.520 --> 00:07:38.140\nThis is the connector that Outlook uses.\n\n158\n00:07:38.140 --> 00:07:40.250\nIf you're running Microsoft Outlook,\nit's gonna try and\n\n159\n00:07:40.250 --> 00:07:44.450\nconnect your exchange servers on\nTCP465 and establish a session there.\n\n160\n00:07:44.450 --> 00:07:46.420\nSo, this is a connection proxy for\n\n161\n00:07:46.420 --> 00:07:48.840\nOutlook to be able to connect to\nthe mailbox server, all right.\n\n162\n00:07:48.840 --> 00:07:51.337\nIf you're not using Outlook,\nthen you're not using this connector.\n\n163\n00:07:51.337 --> 00:07:54.147\nThe server's will use it io talk\nto each other, but otherwise,\n\n164\n00:07:54.147 --> 00:07:55.823\nit won't get used for anything else.\n\n165\n00:07:55.823 --> 00:07:59.414\nSo, that's what this one is for,\nthe client proxy is really for Outlook,\n\n166\n00:07:59.414 --> 00:07:59.994\nall right.\n\n167\n00:07:59.994 --> 00:08:02.385\nSo looking at this configuration here for\n\n168\n00:08:02.385 --> 00:08:06.140\na mailbox server it's just\ninternal connections.\n\n169\n00:08:06.140 --> 00:08:10.188\nIf I switch to a client access server\nthat's where things get different.\n\n170\n00:08:10.188 --> 00:08:14.375\nIt has a a client front end,\n\n171\n00:08:14.375 --> 00:08:17.325\na default front end, and\nan outbound proxy front end.\n\n172\n00:08:17.325 --> 00:08:19.915\nNow it's got three different connectors.\n\n173\n00:08:19.915 --> 00:08:23.865\nAnd the reason here is that it's\nallowing clients to connect, right?\n\n174\n00:08:23.865 --> 00:08:27.905\nPeople that are running Outlook or\nother third party email clients,\n\n175\n00:08:27.905 --> 00:08:29.700\npeople that are using SMTP but\n\n176\n00:08:29.700 --> 00:08:34.170\nit's also allowing unauthenticated\ninternet connections to come in.\n\n177\n00:08:34.170 --> 00:08:37.180\nCuz if we wanna receive email from the\ninternet, it has to be unauthenticated.\n\n178\n00:08:37.180 --> 00:08:39.220\nPeople won't have a user\nend password on our system.\n\n179\n00:08:39.220 --> 00:08:41.620\nThey need to be able to connect and\ndeposit email.\n\n180\n00:08:41.620 --> 00:08:43.970\nNow that doesn't mean we want people to\njust be able to send whatever the heck\n\n181\n00:08:43.970 --> 00:08:44.540\nthey want, right?\n\n182\n00:08:44.540 --> 00:08:46.000\nWe wanna limit it just to us.\n\n183\n00:08:46.000 --> 00:08:51.430\nAnd so, by default, we will only\nreceive email from accepted domains.\n\n184\n00:08:51.430 --> 00:08:55.830\nIf it's email that's going to somebody\nat itprotv.net or email going to\n\n185\n00:08:55.830 --> 00:09:00.340\nsomebody at lab.itpro.tv, I'll allow\nit to come in my receive connector.\n\n186\n00:09:00.340 --> 00:09:01.250\nBut if it's destined for\n\n187\n00:09:01.250 --> 00:09:06.190\nsomebody at gmail.com or at microsoft.com,\nthat's not mine, I'm gonna throw it away.\n\n188\n00:09:06.190 --> 00:09:07.060\nThat would be a relay.\n\n189\n00:09:07.060 --> 00:09:08.930\nI don't want a relay by default.\n\n190\n00:09:08.930 --> 00:09:11.220\nAnd so that's how these\nconnectors are configured.\n\n191\n00:09:11.220 --> 00:09:13.680\nIf I go to my receive connectors and\nI look at this default.\n\n192\n00:09:13.680 --> 00:09:16.505\nI'm gonna edit the default front end one.\n\n193\n00:09:16.505 --> 00:09:18.540\nAnd when you look at it, it's set up here.\n\n194\n00:09:18.540 --> 00:09:20.790\nIt's got that maximum mail size set.\n\n195\n00:09:20.790 --> 00:09:24.200\nUnder security,\nI've got security is available but\n\n196\n00:09:24.200 --> 00:09:26.930\nI also have anonymous enabled.\n\n197\n00:09:26.930 --> 00:09:27.670\nRight?\n\n198\n00:09:27.670 --> 00:09:30.130\nAnybody can connect to this\nwithout authenticating.\n\n199\n00:09:30.130 --> 00:09:32.550\nThey can just connect and\nstart sending email.\n\n200\n00:09:32.550 --> 00:09:36.270\nAll right, now under scoping,\nI can see that this is tied to port 25, so\n\n201\n00:09:36.270 --> 00:09:39.560\nthese are my SMTP connections,\nwhat we receive email from.\n\n202\n00:09:39.560 --> 00:09:41.720\nAnd it's not requiring authentication.\n\n203\n00:09:41.720 --> 00:09:43.060\nThat sounds risky.\n\n204\n00:09:43.060 --> 00:09:45.590\nBut it's limited to the accepted domain,\nso\n\n205\n00:09:45.590 --> 00:09:48.450\nthat's what stops this\nfrom being a true relay.\n\n206\n00:09:48.450 --> 00:09:49.080\nAll right?\n\n207\n00:09:49.080 --> 00:09:52.060\nSo we've got this one set up, and that's\nwhat's allowing internet email to come in.\n\n208\n00:09:52.060 --> 00:09:57.200\nSo If I want internet email to come\ndirectly into my mail organization,\n\n209\n00:09:57.200 --> 00:10:02.580\nI can go and change the MX records in\nDNS to point right to this server,\n\n210\n00:10:02.580 --> 00:10:04.980\nand internet email will\nnow flow to this server,\n\n211\n00:10:04.980 --> 00:10:08.240\nit'll receive it on this default connector\nand, as long as it's destined for\n\n212\n00:10:08.240 --> 00:10:10.870\nan accepted domain,\nit'll flow into the mailboxes.\n\n213\n00:10:10.870 --> 00:10:13.960\nWill reach out using one\nof the private connectors\n\n214\n00:10:13.960 --> 00:10:18.440\nto talk to the mailbox server and get the\nemail deposited in the mailbox, all right.\n\n215\n00:10:18.440 --> 00:10:19.490\nNow, what are these other two?\n\n216\n00:10:19.490 --> 00:10:22.840\nWell, we've got this client front end here\nand if you take a look at the client front\n\n217\n00:10:22.840 --> 00:10:25.660\nend, this is like the client\non the back end, right.\n\n218\n00:10:25.660 --> 00:10:28.590\nWe'll see similar settings across these,\nwe've got security.\n\n219\n00:10:28.590 --> 00:10:32.570\nAnonymous is disabled and\nit's set up for exchange users, right?\n\n220\n00:10:32.570 --> 00:10:35.520\nAnd if I look at the scoping,\nthis one is tied to port 587.\n\n221\n00:10:35.520 --> 00:10:38.960\nThis is an encrypted SMTP connection,\nright.\n\n222\n00:10:38.960 --> 00:10:45.760\nSecure SMTP uses 587 so Outlook can\nuse this or POP 3 and IMAP 4 users.\n\n223\n00:10:45.760 --> 00:10:48.290\nThey have to specify\nan SMTP server to send.\n\n224\n00:10:48.290 --> 00:10:51.120\nNow on this one,\nwe require authentication,\n\n225\n00:10:51.120 --> 00:10:52.900\nbecause when they authenticate,\n\n226\n00:10:52.900 --> 00:10:57.460\nthey might be sending email to somebody at\ngmail.com or somebody at microsoft.com.\n\n227\n00:10:57.460 --> 00:11:00.020\nAnd we want a relay for\nauthenticated users.\n\n228\n00:11:00.020 --> 00:11:03.870\nSo this connector is different\nfrom the default one,\n\n229\n00:11:03.870 --> 00:11:06.840\nin that we allow relays here on this one,\nright?\n\n230\n00:11:06.840 --> 00:11:08.640\nNow that's like a check\nmark we can turn on.\n\n231\n00:11:08.640 --> 00:11:11.780\nYou can go into PowerShell and manipulate\nit, but right from here the default,\n\n232\n00:11:11.780 --> 00:11:14.060\nthe way that it is setup,\nis that this one will allow that relay.\n\n233\n00:11:15.770 --> 00:11:18.056\nAnd then lastly we have\nthis outbound proxy, and\n\n234\n00:11:18.056 --> 00:11:22.040\nthe outbound proxy that's what we're using\nwhen we connect back to other servers.\n\n235\n00:11:22.040 --> 00:11:25.380\nSo if I look at my settings,\nsee how it's limited to Exchange servers?\n\n236\n00:11:25.380 --> 00:11:27.770\nAnd if I go down to\nthe scoping it's on port 717.\n\n237\n00:11:27.770 --> 00:11:31.700\nThat's not a standard email\nport that we're used to seeing.\n\n238\n00:11:31.700 --> 00:11:34.220\nIt's one that Exchange servers\nare using to be able to communicate\n\n239\n00:11:34.220 --> 00:11:35.300\nbetween each other.\n\n240\n00:11:35.300 --> 00:11:38.630\nAnd we'll see that if you setup like\nan edge transport server it can be used to\n\n241\n00:11:38.630 --> 00:11:41.555\ntalk to that too although\nit doesn't have to be.\n\n242\n00:11:41.555 --> 00:11:45.070\nAlright, so those are some of the\nconnectors that are defined by default.\n\n243\n00:11:45.070 --> 00:11:49.600\nWe might choose to define some\ncustom connectors if we want, right?\n\n244\n00:11:49.600 --> 00:11:52.230\nIf we have special needs that\ngo beyond what the defaults are,\n\n245\n00:11:52.230 --> 00:11:55.420\nwe can create our own connectors, or\nwe can even modify these if we want to.\n\n246\n00:11:55.420 --> 00:11:58.270\nAlright, I want to show you one more\nexample before I start modifying this\n\n247\n00:11:58.270 --> 00:11:59.230\nstuff, though.\n\n248\n00:11:59.230 --> 00:12:03.180\nWhat if you're a mailbox server and\na client access server?\n\n249\n00:12:03.180 --> 00:12:06.340\nSo, lab, my server number three here\nis both mailbox and client accss.\n\n250\n00:12:07.410 --> 00:12:11.080\nWhen we look at that, see how it ends\nup with five different connectors?\n\n251\n00:12:11.080 --> 00:12:16.310\nIt's a mixture and if I sort by role,\nI can see these three are my front end.\n\n252\n00:12:16.310 --> 00:12:19.070\nThose are the ones that I'm getting\nfrom the client access role.\n\n253\n00:12:19.070 --> 00:12:20.490\nAnd these bottom two are hub transport.\n\n254\n00:12:20.490 --> 00:12:22.290\nThose are the ones I'm getting\nfrom the mailbox role.\n\n255\n00:12:22.290 --> 00:12:26.320\nSo even though I'm one server, I'm acting\nlike two completely separate servers.\n\n256\n00:12:26.320 --> 00:12:29.750\nAnd I'm actually going to be\nrelaying email between myself\n\n257\n00:12:29.750 --> 00:12:32.310\nas I move things from the client\naccess role to the mailbox role.\n\n258\n00:12:32.310 --> 00:12:35.870\nSo even though you're running both of\nthe same server, it's still technically\n\n259\n00:12:35.870 --> 00:12:39.240\ntwo separate entities,\ntwo separate roles running on that server,\n\n260\n00:12:39.240 --> 00:12:41.975\nand they've gotta communicate between\neach other, so it will show up like this.\n\n261\n00:12:41.975 --> 00:12:46.320\nAlright now, let's say I've got some\nkind of business partner out there.\n\n262\n00:12:46.320 --> 00:12:51.050\nSomebody who is gonna be sending email to\nme, and they need to send email to me.\n\n263\n00:12:51.050 --> 00:12:55.600\nI wanna relay for them, but they can't\nauthenticate, or something of that nature.\n\n264\n00:12:55.600 --> 00:12:57.630\nI've got something that\nI need to customize.\n\n265\n00:12:57.630 --> 00:13:00.740\nOr you can create custom receive\nconnectors that are tailored to\n\n266\n00:13:00.740 --> 00:13:01.940\nthat particular partner.\n\n267\n00:13:01.940 --> 00:13:04.340\nThere's all sorts of different\nthings we can do there.\n\n268\n00:13:04.340 --> 00:13:07.380\nSo for example,\nI can jump back to my front end server and\n\n269\n00:13:07.380 --> 00:13:10.690\nI can add in a new receive connector and\nwhen I add that\n\n270\n00:13:10.690 --> 00:13:14.730\nnew receive connector I can give it a name\nand I can specify what it's intent is for.\n\n271\n00:13:14.730 --> 00:13:18.410\nIs this a custom one that I\nwant to tailor everything and\n\n272\n00:13:18.410 --> 00:13:20.320\nallow an application to relay.\n\n273\n00:13:20.320 --> 00:13:24.050\nIs this internal use only for receiving\nemail, is it a partner connection,\n\n274\n00:13:24.050 --> 00:13:27.450\nI'm receiving trusted connections\nfrom another partner or\n\n275\n00:13:27.450 --> 00:13:30.520\nis this some kind of client like\na non Outlook client connecting.\n\n276\n00:13:30.520 --> 00:13:32.700\nYou can dictate that right here.\n\n277\n00:13:32.700 --> 00:13:36.750\nAn example of how I might use this\nis let's say that you got a big\n\n278\n00:13:36.750 --> 00:13:39.970\noffice printer and you want that\nprinter to be able to send email.\n\n279\n00:13:39.970 --> 00:13:42.460\nYou want it to be able to send email\nto anybody in the world, right?\n\n280\n00:13:42.460 --> 00:13:45.020\nMaybe it's got one of those\nscan to email functions.\n\n281\n00:13:45.020 --> 00:13:49.000\nAnd so, I want it to be able to send\nthe email through my mail server.\n\n282\n00:13:49.000 --> 00:13:51.620\nBut it can't authenticate it, doesn't\nsupport providing username and password.\n\n283\n00:13:51.620 --> 00:13:56.570\nI could create a custom receive\nconnector just for that printer and\n\n284\n00:13:56.570 --> 00:14:00.970\nthen open it up to allow it to relay now\nto be able to send through my mail system\n\n285\n00:14:00.970 --> 00:14:03.440\nand I won't have to worry about\nthe authentication side, alright?\n\n286\n00:14:03.440 --> 00:14:06.930\nSo I'll call this my office printer,\nright, so\n\n287\n00:14:06.930 --> 00:14:08.790\nthat's the name that\nI'm gonna assign to it.\n\n288\n00:14:08.790 --> 00:14:10.590\nI'm going to tell her\nthat this one's custom,\n\n289\n00:14:10.590 --> 00:14:12.350\nright I'm going to allow\nan application to relay.\n\n290\n00:14:13.460 --> 00:14:15.340\nAnd then we can specify our bindings.\n\n291\n00:14:15.340 --> 00:14:20.010\nNow the binding is if I have more than one\nnetwork adaptor on my Exchange server,\n\n292\n00:14:20.010 --> 00:14:22.200\nwhich network adaptor is it listening on,\nand\n\n293\n00:14:22.200 --> 00:14:27.290\nthis is important because you only\nhave one port 25 on each IP address,\n\n294\n00:14:27.290 --> 00:14:31.400\nso if you have more than one IP address,\nyou could split this up.\n\n295\n00:14:31.400 --> 00:14:34.210\nThe default is to say all\navailable IP addresses, so\n\n296\n00:14:34.210 --> 00:14:38.040\nif I have more than one address, all of\nthem are gonna be listening on port 25.\n\n297\n00:14:38.040 --> 00:14:41.770\nWell, I've already got\na connector listening on port 25.\n\n298\n00:14:41.770 --> 00:14:44.880\nSo I'm going to edit this and\nI'm going to change it.\n\n299\n00:14:44.880 --> 00:14:49.020\nAnd I can save a specific IP\naddress on my, system IPv4 or IPv6,\n\n300\n00:14:49.020 --> 00:14:51.370\nor I could say all of them.\n\n301\n00:14:51.370 --> 00:14:54.150\nIf I do all of them, I'm going to\nneed to pick a different port number.\n\n302\n00:14:54.150 --> 00:14:56.670\nSo I'm going to say, 60,025.\n\n303\n00:14:56.670 --> 00:15:00.920\nOn my printer, when I set it up,\nI'm going to point to the server and\n\n304\n00:15:00.920 --> 00:15:04.830\ntell it to use port 60025 so\nit will know the port to use to connect.\n\n305\n00:15:06.130 --> 00:15:06.690\nAlright.\n\n306\n00:15:06.690 --> 00:15:09.780\nSo that's gonna be the scope for\nthis thing and I'll hit next.\n\n307\n00:15:09.780 --> 00:15:12.020\nAnd now the remote network.\n\n308\n00:15:12.020 --> 00:15:15.110\nI wanna limit this just to that printer.\n\n309\n00:15:15.110 --> 00:15:17.710\nI don't want anybody to connect\nbecause I'm gonna be turning off\n\n310\n00:15:17.710 --> 00:15:19.160\nauthentication, right.\n\n311\n00:15:19.160 --> 00:15:22.630\nSo I need them to be able\nto be limited and secure.\n\n312\n00:15:22.630 --> 00:15:27.200\nAnd so the best way to do that is to kind\nof come in here and edit this IP address.\n\n313\n00:15:27.200 --> 00:15:30.980\nI just removed that catch all and\nput in a specific address.\n\n314\n00:15:30.980 --> 00:15:37.350\nSo maybe that printer is 192.168.0.223,\nI'll put in exactly that address.\n\n315\n00:15:38.540 --> 00:15:39.750\nAnd you can decide your notation.\n\n316\n00:15:39.750 --> 00:15:41.270\nSo if you wanna do a whole\nyou subnet you can.\n\n317\n00:15:41.270 --> 00:15:45.112\nMaybe I won't allow unauthenticated\nemail from my whole internal subnet,\n\n318\n00:15:45.112 --> 00:15:47.993\nanybody on my internal network\ncan send email great, but\n\n319\n00:15:47.993 --> 00:15:51.833\nwe usually don't wanna go that far I'm\ngonna do just this printer right, so\n\n320\n00:15:51.833 --> 00:15:55.281\nI'm adding that one IP specifically,\nso now when I receive email.\n\n321\n00:15:55.281 --> 00:15:59.701\nFrom 192.168.0.223 on port 60025,\n\n322\n00:15:59.701 --> 00:16:04.033\nthis received connector is\nwhat's gonna take effect.\n\n323\n00:16:04.033 --> 00:16:05.137\nAll right?\n\n324\n00:16:05.137 --> 00:16:09.055\nSo I'll finish that up and now I've\ngot the receive connector created.\n\n325\n00:16:09.055 --> 00:16:12.575\nFrom there I can edit it, and\nin its settings I can go in and\n\n326\n00:16:12.575 --> 00:16:16.075\nmanipulate security, and\nI'm gonna set this one to Allow anonymous.\n\n327\n00:16:16.075 --> 00:16:19.255\nI want anonymous connections to be able to\ncome into this one, because the printer,\n\n328\n00:16:19.255 --> 00:16:22.965\nfor whatever reason, doesn't support\nauthentication, so I can customize that.\n\n329\n00:16:22.965 --> 00:16:24.375\nBut I'm not putting myself at risk.\n\n330\n00:16:24.375 --> 00:16:28.001\nNormally I'd cringe at this, like [SOUND],\nI don't want just anybody to be able to\n\n331\n00:16:28.001 --> 00:16:30.962\nconnect, here it's okay because\nI've limited it to that one IP.\n\n332\n00:16:30.962 --> 00:16:33.469\nNow, in theory,\nsomebody could spoof that IP,\n\n333\n00:16:33.469 --> 00:16:36.540\nso this isn't foolproof but\nit is limiting it to internal.\n\n334\n00:16:36.540 --> 00:16:39.260\nI don't have to worry about\nInternet users connecting to that.\n\n335\n00:16:39.260 --> 00:16:42.530\nAnd I can always modify my scoping if I\nwanna change that port number or whatever,\n\n336\n00:16:42.530 --> 00:16:44.290\nI can come in and change that too.\n\n337\n00:16:44.290 --> 00:16:48.220\nSo now I've got a custom receive\nconnector just for that office printer so\n\n338\n00:16:48.220 --> 00:16:49.170\nthat it can connect.\n\n339\n00:16:49.170 --> 00:16:52.320\nIt can be anonymous, and\nit can start to relay email, and\n\n340\n00:16:52.320 --> 00:16:53.590\nit'll have it right there, right?\n\n341\n00:16:54.740 --> 00:16:59.080\nSo just remember that receive connectors,\nthis is the way for email to come in\n\n342\n00:16:59.080 --> 00:17:03.130\nyour organization, and the default\nconfiguration is probably fine for\n\n343\n00:17:03.130 --> 00:17:06.130\nmost people, but there are times\nwhen you might wanna configure that.\n\n344\n00:17:06.130 --> 00:17:07.010\nYou might wanna modify it.\n\n345\n00:17:08.110 --> 00:17:12.979\nThe one area where we absolutely\nhave to modify are send connectors.\n\n346\n00:17:12.979 --> 00:17:14.454\nThe send connector's the way out.\n\n347\n00:17:14.454 --> 00:17:16.636\nHow do we get out of our organization?\n\n348\n00:17:16.636 --> 00:17:19.330\nAnd when you go out,\nyou use a send connector.\n\n349\n00:17:19.330 --> 00:17:22.520\nThe problem is by default,\nwe don't have any.\n\n350\n00:17:22.520 --> 00:17:26.190\nSo by default you can only send email to\npeople that are in your organization and\n\n351\n00:17:26.190 --> 00:17:27.132\nthat's that.\n\n352\n00:17:27.132 --> 00:17:29.410\nIf wanna send people outside\nof our organization,\n\n353\n00:17:29.410 --> 00:17:31.110\nwe've gotta create a send connector.\n\n354\n00:17:31.110 --> 00:17:34.500\nAnd for most people, we wanna be\nable to send to the Internet, so\n\n355\n00:17:34.500 --> 00:17:36.070\nthat's usually where we start.\n\n356\n00:17:36.070 --> 00:17:40.090\nWhen you create a send connector, the send\nconnectors are built upon a domain name.\n\n357\n00:17:40.090 --> 00:17:44.590\nSo you say when I'm sending email to\nthis domain, here's how you get there.\n\n358\n00:17:44.590 --> 00:17:48.629\nSo we may set up an Internet one\nthat's gonna catch all domains.\n\n359\n00:17:48.629 --> 00:17:50.684\nAnd you say all domains by\nusing an asterisk, right?\n\n360\n00:17:50.684 --> 00:17:51.566\nA wild card.\n\n361\n00:17:51.566 --> 00:17:55.073\nSo a wild card sim connector is\nusually the first thing that we make.\n\n362\n00:17:55.073 --> 00:17:56.326\nI'm gonna come in here and create one.\n\n363\n00:17:56.326 --> 00:17:57.626\nI'll just hit the plus sign.\n\n364\n00:17:57.626 --> 00:17:58.984\nAnd it's going to ask\nme what I'm creating.\n\n365\n00:17:58.984 --> 00:18:02.351\nI'm gonna call this my Internet Connector,\nright?\n\n366\n00:18:02.351 --> 00:18:04.906\nThis is what's gonna actually give\nme that Internet functionality.\n\n367\n00:18:04.906 --> 00:18:07.043\nAnd down here you can specify\nwhat it is your trying to do.\n\n368\n00:18:07.043 --> 00:18:09.584\nAnd they've actually got one made for\nus already, Internet.\n\n369\n00:18:09.584 --> 00:18:11.630\nWe wanna send Internet email.\n\n370\n00:18:11.630 --> 00:18:13.700\nI could choose custom and\njust put a star for\n\n371\n00:18:13.700 --> 00:18:16.199\nthe domain, by choosing Internet\nthat's what it's gonna do for me.\n\n372\n00:18:17.520 --> 00:18:21.470\nAll right, then I can hit Next, and\nit's gonna ask how I wanna send it.\n\n373\n00:18:21.470 --> 00:18:24.150\nNow when it comes to email,\nthere's two ways to send email.\n\n374\n00:18:25.190 --> 00:18:28.800\nOne way,\nis that I'm sending an email to gmail.com.\n\n375\n00:18:28.800 --> 00:18:32.890\nI can go to DNS,\nI can find the gmail.com domain, and\n\n376\n00:18:32.890 --> 00:18:36.120\nI can look for the mx records,\nlook for the mail exchanges, and\n\n377\n00:18:36.120 --> 00:18:39.010\nwhen I find the mail exchanges now I know\nthe server to communicate with, right?\n\n378\n00:18:39.010 --> 00:18:40.564\nThis happens all the time\nin the background.\n\n379\n00:18:40.564 --> 00:18:42.665\nHere let me just show you real quick.\n\n380\n00:18:42.665 --> 00:18:44.765\nMost of you guys probably\nalready know this but for\n\n381\n00:18:44.765 --> 00:18:48.880\nthose of you that don't let me just show\nyou a quick example of how this works.\n\n382\n00:18:48.880 --> 00:18:54.940\nSo, if I'm gonna send an email\nto somebody like Gmail, right?\n\n383\n00:18:54.940 --> 00:18:57.895\nSo if I have some kind of Gmail\naccount that's out there and\n\n384\n00:18:57.895 --> 00:18:59.356\nI want to send an email to it.\n\n385\n00:18:59.356 --> 00:19:03.845\nWell, what happens is, it turns around and\nlooks at the DNS and it says okay, so\n\n386\n00:19:03.845 --> 00:19:06.937\nI've got an email for\ngmail.com, where do I send it?\n\n387\n00:19:06.937 --> 00:19:10.096\nAnd in DNS it has all these MX records.\n\n388\n00:19:10.096 --> 00:19:16.180\nThese MX records, these guys right here,\nthat's what tells us who to send it too.\n\n389\n00:19:16.180 --> 00:19:17.934\nAnd so\nnow our server can send email there and\n\n390\n00:19:17.934 --> 00:19:19.890\nit'll get to the mail\nbox where it's destined.\n\n391\n00:19:21.070 --> 00:19:22.770\nThe problem is,\n\n392\n00:19:22.770 --> 00:19:27.140\nwe don't always want our server to\nbe reaching out there specifically.\n\n393\n00:19:27.140 --> 00:19:30.780\nMaybe we pay for\nemail filtering service like Postini,\n\n394\n00:19:30.780 --> 00:19:34.878\nmaybe we have an Internet service provider\nthat provides mail flow for us, right?\n\n395\n00:19:34.878 --> 00:19:37.250\nSo we wanna take the load off of our\nservers and move it somewhere else.\n\n396\n00:19:37.250 --> 00:19:39.799\nHere we use a Barracuda spam and\nvirus firewall, so\n\n397\n00:19:39.799 --> 00:19:42.778\nwe want all our outgoing email\nto go through that firewall.\n\n398\n00:19:42.778 --> 00:19:46.297\nDon't go directly to Gmail,\ngo to our firewall first, right?\n\n399\n00:19:46.297 --> 00:19:50.269\nAnd so for that, we can override the\ndefault behavior of using MX records and\n\n400\n00:19:50.269 --> 00:19:52.440\ntell it to use a smart host, all right?\n\n401\n00:19:52.440 --> 00:19:54.230\nAnd that's this option\nthat's right below here.\n\n402\n00:19:54.230 --> 00:19:55.825\nSo, I've got my MX record.\n\n403\n00:19:55.825 --> 00:19:59.019\nAnd then I've got route mail through\nsmart hosts, and that just says,\n\n404\n00:19:59.019 --> 00:20:01.265\ndon't go direct,\ngo through this other person.\n\n405\n00:20:01.265 --> 00:20:07.105\nAnd so you could add in the firewall or\nthird party filtering service or your ISP.\n\n406\n00:20:07.105 --> 00:20:10.880\nYou punch in their IP address here, and\nthen any outgoing email you have will just\n\n407\n00:20:10.880 --> 00:20:13.495\ngo to that third party provider,\nall right?\n\n408\n00:20:13.495 --> 00:20:16.191\nWell, I'm not gonna set that, I'm gonna\nstick with MX records for right now, so\n\n409\n00:20:16.191 --> 00:20:17.600\nwe'll set that up.\n\n410\n00:20:17.600 --> 00:20:19.350\nAnd then we can hit Next.\n\n411\n00:20:19.350 --> 00:20:22.033\nAnd then it's gonna say\nwhat the address space is.\n\n412\n00:20:22.033 --> 00:20:25.722\nNow this is gonna be an Internet\nconnector, so the address space for\n\n413\n00:20:25.722 --> 00:20:27.871\nthe Internet connector is everybody.\n\n414\n00:20:27.871 --> 00:20:31.999\nEvery domain that's out there on\nthe Internet, it's going to match this, so\n\n415\n00:20:31.999 --> 00:20:35.123\nwhen I hit Add I'm not just\ngonna punch in a regular domain,\n\n416\n00:20:35.123 --> 00:20:37.331\nI'm gonna punch in a star, an asterisk.\n\n417\n00:20:37.331 --> 00:20:39.769\nAn asterisks means every domain all right?\n\n418\n00:20:39.769 --> 00:20:43.109\nEverybody that's out there on the\nInternet, anybody that's not internal to\n\n419\n00:20:43.109 --> 00:20:46.600\nme, and internal would be like\nlab.itpro.tv in my example.\n\n420\n00:20:46.600 --> 00:20:49.550\nNow notice there's a cost, what if I have\n\n421\n00:20:49.550 --> 00:20:54.190\nmore than one send connector that matches\nan email, how does it pick a winner?\n\n422\n00:20:54.190 --> 00:20:56.330\nWell, it picks based on this cost.\n\n423\n00:20:56.330 --> 00:21:01.530\nAnd so I can define the cost of this line,\nand the lowest cost wins.\n\n424\n00:21:01.530 --> 00:21:04.980\nSo, I might have a connector\nthat runs through my span and\n\n425\n00:21:04.980 --> 00:21:06.790\nvirus firewall with a cost of one,\n\n426\n00:21:06.790 --> 00:21:11.080\nand I might have a connector that\nbypasses firewall with a cost of then.\n\n427\n00:21:11.080 --> 00:21:13.910\nAnd that way it always goes to\nthe firewall unless the firewall fails and\n\n428\n00:21:13.910 --> 00:21:15.320\nthen it moves onto the next one and\n\n429\n00:21:15.320 --> 00:21:17.330\nit goes through that one with\nthe higher cost and bypasses it.\n\n430\n00:21:17.330 --> 00:21:21.700\nSo, you can set up kinda redundancies that\nway, by manipulating these costs, right?\n\n431\n00:21:21.700 --> 00:21:24.330\nI'm just gonna leave mine at a cost of 1,\nand I'll save it.\n\n432\n00:21:25.500 --> 00:21:26.270\nAll right.\n\n433\n00:21:26.270 --> 00:21:29.890\nSo then, we do have the option\nto scope the send connector.\n\n434\n00:21:29.890 --> 00:21:33.800\nBy default, any of my email servers\nare gonna be able to use this, but\n\n435\n00:21:33.800 --> 00:21:35.910\nif I scope it I can limit the server.\n\n436\n00:21:35.910 --> 00:21:37.500\nNow, why would I wanna do that?\n\n437\n00:21:37.500 --> 00:21:40.560\nMaybe I want all of my outgoing email\n\n438\n00:21:40.560 --> 00:21:44.030\nto go through one particular\nclient access server.\n\n439\n00:21:44.030 --> 00:21:48.740\nSo I can set that, I can limit it\nby scoping that send connector.\n\n440\n00:21:48.740 --> 00:21:51.410\nBut if I just want all these\nservers to send out on their own,\n\n441\n00:21:51.410 --> 00:21:53.560\nI can leave that unchecked and\nthey'll do all of them.\n\n442\n00:21:53.560 --> 00:21:56.659\nBut that's just what's gonna dictate that\nso we can tie it to a particular system.\n\n443\n00:21:57.840 --> 00:22:00.460\nAll right, and on the next screen is\nwhere we pick that system, right?\n\n444\n00:22:00.460 --> 00:22:02.400\nWho's my source server?\n\n445\n00:22:02.400 --> 00:22:04.710\nAnd I can add in all of\nthose servers if I want.\n\n446\n00:22:04.710 --> 00:22:07.270\nSee, I've got all my client\naccess servers here.\n\n447\n00:22:07.270 --> 00:22:08.660\nOr I could add in just one,\n\n448\n00:22:08.660 --> 00:22:13.100\nand it's all gonna get flown right\nthrough that one system, all right?\n\n449\n00:22:13.100 --> 00:22:16.460\nSo in my case I'll put them both,\nhere's my two client access servers.\n\n450\n00:22:16.460 --> 00:22:19.140\nNow, if one server's down we can just\ngo through the other one, right?\n\n451\n00:22:19.140 --> 00:22:20.880\nIt can use either one,\nwe get that redundancy.\n\n452\n00:22:23.000 --> 00:22:23.610\nAll right.\n\n453\n00:22:23.610 --> 00:22:26.480\nOnce that's done,\nI've now created my first send connector,\n\n454\n00:22:26.480 --> 00:22:27.950\nmy Internet connector.\n\n455\n00:22:27.950 --> 00:22:30.010\nAnd now I can send email to the Internet,\nright?\n\n456\n00:22:30.010 --> 00:22:32.960\nNow outgoing email can actually go out.\n\n457\n00:22:32.960 --> 00:22:37.200\nEmail to internal domains can go and\nemail to external domains can go, right?\n\n458\n00:22:37.200 --> 00:22:38.970\nFor most people,\nyou're gonna stop right there.\n\n459\n00:22:38.970 --> 00:22:40.498\nYou just need one send connector.\n\n460\n00:22:40.498 --> 00:22:41.033\nYou're done.\n\n461\n00:22:41.033 --> 00:22:42.531\nNow you've got connectivity\nto the Internet.\n\n462\n00:22:42.531 --> 00:22:46.090\nBut, let's say you start doing\nbusiness with a business partner, and\n\n463\n00:22:46.090 --> 00:22:48.937\nyou are communicating back and\nforth with them a lot, and\n\n464\n00:22:48.937 --> 00:22:52.966\nyou want to set up a VPN tunnel, or maybe\nyou've already set up the VPN tunnel, so\n\n465\n00:22:52.966 --> 00:22:56.440\nthat you can securely\ncommunicate with their network.\n\n466\n00:22:56.440 --> 00:22:59.630\nWell, maybe you wan email\nto that vendor to go across\n\n467\n00:22:59.630 --> 00:23:02.200\nthe VPN tunnel instead of\ngoing out to the Internet.\n\n468\n00:23:02.200 --> 00:23:05.120\nSo I want to change the mail flow for\nthat.\n\n469\n00:23:05.120 --> 00:23:06.070\nI want the mail flow for\n\n470\n00:23:06.070 --> 00:23:10.010\nemail going to my business partner to go\nover this VPN tunnel instead, all right?\n\n471\n00:23:10.010 --> 00:23:14.980\nWell, for that, I can create a dedicated\nsend connector that overrides this one,\n\n472\n00:23:14.980 --> 00:23:15.920\nall right?\n\n473\n00:23:15.920 --> 00:23:16.480\nSo I'm gonna do that.\n\n474\n00:23:16.480 --> 00:23:20.801\nI'm gonna add in another send connector,\nand when I start to create this one,\n\n475\n00:23:20.801 --> 00:23:22.186\nI can put in what this is.\n\n476\n00:23:22.186 --> 00:23:24.902\nThis'll be my business partner, right?\n\n477\n00:23:24.902 --> 00:23:28.977\nAnd I'm gonna say that is going to be, you\ncould say custom, I'm gonna say partner,\n\n478\n00:23:28.977 --> 00:23:32.230\nso we want to route email to\na trusted third-party server, right?\n\n479\n00:23:32.230 --> 00:23:35.460\nNow, I can say custom and just specify\nthe destination, same thing, but\n\n480\n00:23:35.460 --> 00:23:37.598\nI'll go with partner, all right?\n\n481\n00:23:37.598 --> 00:23:40.150\nHere it's gonna ask to send it, all right?\n\n482\n00:23:40.150 --> 00:23:43.985\nNow it's defaulting to doing an MX record\nassociated with the recipient domain.\n\n483\n00:23:43.985 --> 00:23:47.796\nAnd notice it's not letting me pick\nthat route through a smart host, okay?\n\n484\n00:23:47.796 --> 00:23:50.759\nAnd the reason is, it's assuming if\nI've got a trusted business partner,\n\n485\n00:23:50.759 --> 00:23:53.180\nthat I've modified the MX records\nto be able to reflect that.\n\n486\n00:23:53.180 --> 00:23:55.310\nNow in my case, I haven't.\n\n487\n00:23:55.310 --> 00:23:57.522\nSo, I'm gonna back up.\n\n488\n00:23:57.522 --> 00:23:58.916\nAnd this time I'll choose Custom so\n\n489\n00:23:58.916 --> 00:24:02.380\nthat it let's me do it, cuz I don't want\nto go and modify DNS if I don't have to.\n\n490\n00:24:02.380 --> 00:24:05.200\nAll right, so on this one I'm gonna say,\nhey I wanna route this email through\n\n491\n00:24:05.200 --> 00:24:07.790\na smart host and\nI'm gonna add in who that host is.\n\n492\n00:24:07.790 --> 00:24:09.660\nAnd so I'll call them and I'll say,\n\n493\n00:24:09.660 --> 00:24:11.820\nhey on your network what's the IP\naddress of your mail server.\n\n494\n00:24:11.820 --> 00:24:15.020\nSo I can just send directly to it and\ncross that VPN tunnel.\n\n495\n00:24:15.020 --> 00:24:16.940\nAnd so they'll give you an internal IP, so\n\n496\n00:24:16.940 --> 00:24:21.360\nmaybe something like 172.16.0.100,\nor whatever it is.\n\n497\n00:24:21.360 --> 00:24:23.420\nMaybe you have a fully\nqualified domain name.\n\n498\n00:24:23.420 --> 00:24:25.350\nWhatever it is on their network\nthat you want to reach out to,\n\n499\n00:24:25.350 --> 00:24:26.610\nto that other system.\n\n500\n00:24:29.420 --> 00:24:31.602\nAll right, email flowing through here,\n\n501\n00:24:31.602 --> 00:24:34.605\nfor my partner's domain,\nI'm gonna send to this host.\n\n502\n00:24:34.605 --> 00:24:37.910\nAll right, then we specify\nwhether we want to authenticate.\n\n503\n00:24:37.910 --> 00:24:40.750\nI'm not gonna do authentication, it's\ngonna be encrypted over the VPN tunnel,\n\n504\n00:24:40.750 --> 00:24:42.320\nso we'll just send it along.\n\n505\n00:24:42.320 --> 00:24:44.940\nBut you might have authentication,\nthey give you a user and password and\n\n506\n00:24:44.940 --> 00:24:47.050\nnow you can send it along,\nyou'd specify it right here.\n\n507\n00:24:48.660 --> 00:24:50.660\nThen the address space, this is important.\n\n508\n00:24:50.660 --> 00:24:54.490\nI did a star when I created that Internet\none, right, every domain on the Internet.\n\n509\n00:24:54.490 --> 00:24:59.790\nBut here it's just the business partner,\nso I would add their domain name in here.\n\n510\n00:24:59.790 --> 00:25:05.070\nSo for this one it's businesspartner.net,\nor whatever their address happens to be.\n\n511\n00:25:05.070 --> 00:25:07.730\nSo I'm just gonna punch in that domain.\n\n512\n00:25:07.730 --> 00:25:11.770\nAny email that's going to\na user@businesspartner.net it's\n\n513\n00:25:11.770 --> 00:25:12.830\ngonna use this connector.\n\n514\n00:25:14.560 --> 00:25:17.070\nAll right, then I could add in more\nthan one if I needed to right there.\n\n515\n00:25:19.040 --> 00:25:21.940\nAll right then we specify what servers\nare allowed to do the connection,\n\n516\n00:25:21.940 --> 00:25:23.630\nand we'll probably pick all of ours.\n\n517\n00:25:23.630 --> 00:25:25.300\nBut you might wanna limit\nit to one in particular.\n\n518\n00:25:25.300 --> 00:25:26.070\nYou can do that.\n\n519\n00:25:26.070 --> 00:25:28.804\nMaybe not all these servers had\naccess to the VPN tunnel, so\n\n520\n00:25:28.804 --> 00:25:30.566\nI would just pick the servers that do.\n\n521\n00:25:32.749 --> 00:25:35.670\nAnd then we can finish that up, and\nyou'll see I've got a new connector.\n\n522\n00:25:35.670 --> 00:25:37.158\nHere's my BusinessPartner connector.\n\n523\n00:25:37.158 --> 00:25:41.120\nAny email that's going to that domain is\ngoing to get sent over to this connector.\n\n524\n00:25:41.120 --> 00:25:44.230\nAnd then everything else is going\nto hit my internet connector.\n\n525\n00:25:44.230 --> 00:25:47.250\nNow I've got outbound email\nfunctioning on my system and\n\n526\n00:25:47.250 --> 00:25:49.540\nthat business partner is\nbeing handled separately.\n\n527\n00:25:49.540 --> 00:25:50.750\nSo when it comes to send and\n\n528\n00:25:50.750 --> 00:25:54.980\nreceive connectors, they're a great\nway to manipulate mail flow.\n\n529\n00:25:54.980 --> 00:25:57.600\nHow mail comes in and how mail goes out.\n\n530\n00:25:57.600 --> 00:26:00.420\nAnd fortunately they're one of those\nthings where we usually set them up and\n\n531\n00:26:00.420 --> 00:26:01.790\nthen we never have to touch them again.\n\n532\n00:26:01.790 --> 00:26:03.340\nYou just ignore them and that's it.\n\n533\n00:26:03.340 --> 00:26:06.390\nBut, if you ever need to change\nmail flows, that's where you do it.\n\n534\n00:26:07.440 --> 00:26:09.480\nAll right, well in this episode we\ngot a chance to see our send and\n\n535\n00:26:09.480 --> 00:26:10.220\nreceive connectors.\n\n536\n00:26:10.220 --> 00:26:14.000\nRemember the send connectors,\nthose were how our outbound email flows.\n\n537\n00:26:14.000 --> 00:26:16.860\nAnd we might need to customize that if\nwe're trying to redirect business partner\n\n538\n00:26:16.860 --> 00:26:20.100\nstuff, or redirect all our mail to flow\nthrough a firewall or virus scan or\n\n539\n00:26:20.100 --> 00:26:21.300\nsomething like that.\n\n540\n00:26:21.300 --> 00:26:23.620\nOur receive connectors is\nhow our email comes in.\n\n541\n00:26:23.620 --> 00:26:26.550\nAnd we might need to modify those if\nwe're trying to change permissions,\n\n542\n00:26:26.550 --> 00:26:27.240\nauthentication.\n\n543\n00:26:27.240 --> 00:26:30.390\nOr if we're trying to set up exceptions,\nlike for on office printer or\n\n544\n00:26:30.390 --> 00:26:33.510\nother device, we may need to\nmanipulate those receive connectors.\n\n545\n00:26:33.510 --> 00:26:36.090\nThe other time we modify them Is\n\n546\n00:26:36.090 --> 00:26:39.160\nwhen we're just trying to change which\nservers are responsible for what.\n\n547\n00:26:39.160 --> 00:26:41.788\nBut they're very important, and\nat a minimum you're gonna need to\n\n548\n00:26:41.788 --> 00:26:44.292\ncreate one send connector to be\nable to connect to the internet.\n\n549\n00:26:44.292 --> 00:26:47.240\nOtherwise your exchange server\nis gonna be internal only.\n\n550\n00:26:47.240 --> 00:26:48.870\nSo definitely be aware of that.\n\n551\n00:26:48.870 --> 00:26:52.320\nBut that's a pretty good run down on\nthe two connectors, and how we use them.\n\n552\n00:26:52.320 --> 00:26:54.180\nSo that's all I got for this episode.\n\n553\n00:26:54.180 --> 00:26:55.510\nI hope you guys enjoyed it.\n\n554\n00:26:55.510 --> 00:26:59.488\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n555\n00:26:59.488 --> 00:27:03.992\n[SOUND]\n\n",
          "vimeoId": "136518355"
        },
        {
          "description": "In this episode, Don explains how Transport Rules function in Exchange 2013. He then demonstrates how to configure Transport Rules to achieve common scenarios like appending a legal disclaimer to all emails.",
          "length": "1776",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-2-transport_rules-081815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-2-transport_rules-081815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-2-transport_rules-081815-1-sm.jpg",
          "title": "Transport Rules",
          "transcript": "WEBVTT\n\n1\n00:00:00.183 --> 00:00:10.513\n[MUSIC]\n\n2\n00:00:10.513 --> 00:00:13.552\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:13.552 --> 00:00:15.593\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.593 --> 00:00:17.393\nI'm your host, Don Pezet.\n\n5\n00:00:17.393 --> 00:00:20.263\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.263 --> 00:00:23.973\nIn this episode we're gonna be taking\na look at Hub Transport Rules.\n\n7\n00:00:23.973 --> 00:00:26.182\nNow, hub transport rules are, I'm sorry,\n\n8\n00:00:26.182 --> 00:00:29.683\nI should actually call them by their\nnew name which is Transport Rules.\n\n9\n00:00:29.683 --> 00:00:31.553\nWe kinda got rid of that hub.\n\n10\n00:00:31.553 --> 00:00:36.198\nSo transport rules are a really neat\nservice inside of Exchange that allows us\n\n11\n00:00:36.198 --> 00:00:39.423\nto do stuff to emails that\npasses through our system.\n\n12\n00:00:39.423 --> 00:00:40.933\nAnd that's kinda neat.\n\n13\n00:00:40.933 --> 00:00:43.103\nLet's back this up a little bit.\n\n14\n00:00:43.103 --> 00:00:46.399\nAt the very beginning of the episode I\ncalled these hub transport rules and\n\n15\n00:00:46.399 --> 00:00:49.698\nthat's because in previous versions\nof Exchange you have what was called\n\n16\n00:00:49.698 --> 00:00:51.110\na Hub Transport Server.\n\n17\n00:00:51.110 --> 00:00:54.300\nAnd that server was responsible for\napplying hub transport rules.\n\n18\n00:00:54.300 --> 00:01:00.460\nWell, in new Exchange 2013 at least, you\ndon't have a hub transport server anymore.\n\n19\n00:01:00.460 --> 00:01:02.312\nNow you have a hub transport service, so\n\n20\n00:01:02.312 --> 00:01:06.018\nits not a dedicated server its a service\nthat runs right on your mailbox servers,\n\n21\n00:01:06.018 --> 00:01:09.778\nand so that's why Microsoft said you know\nwhat we're gonna take the hub transport\n\n22\n00:01:09.778 --> 00:01:13.470\nrole over we're just gonna drop the hub\noff and we'll call it a transport rule.\n\n23\n00:01:13.470 --> 00:01:16.660\nWhen email is being transported\nthrough your system,\n\n24\n00:01:16.660 --> 00:01:18.890\nyou can define rules that apply to it.\n\n25\n00:01:18.890 --> 00:01:22.948\nNow a lot of us use rules like these all\nthe time anyway you have Outlook rules,\n\n26\n00:01:22.948 --> 00:01:23.720\nInbox rules.\n\n27\n00:01:23.720 --> 00:01:26.960\nI might have rules that say if\nI get an email from Ronnie,\n\n28\n00:01:26.960 --> 00:01:28.520\nsend it to my recycle bin.\n\n29\n00:01:28.520 --> 00:01:31.390\nOr if I get an email from somebody else,\nI might forward it along, or\n\n30\n00:01:31.390 --> 00:01:33.230\ndo think you'll put it\nin a particular folder.\n\n31\n00:01:33.230 --> 00:01:37.020\nThese are rules that we can dictate\nthat say what happens to email.\n\n32\n00:01:37.020 --> 00:01:41.550\nWell, a transport rule is the same thing,\nexcept it's done at the server level.\n\n33\n00:01:41.550 --> 00:01:44.730\nSo it can be applied to all email\npassing through your organization, and\n\n34\n00:01:44.730 --> 00:01:46.130\nthat's pretty important, right?\n\n35\n00:01:46.130 --> 00:01:48.740\nThat means we can do a lot of\nreally cool stuff with it.\n\n36\n00:01:48.740 --> 00:01:53.160\nNow, one of the neat things we have\nwith the Exchanges Design, is that\n\n37\n00:01:53.160 --> 00:01:58.810\nevery single email, 100% of your email,\npasses through the hub transport service.\n\n38\n00:01:58.810 --> 00:01:59.760\nIt has to.\n\n39\n00:01:59.760 --> 00:02:05.320\nAnd every mailbox server in Exchange\n2013 is a hub transport service system.\n\n40\n00:02:05.320 --> 00:02:07.910\nIt's all running a copy\nof the transport service.\n\n41\n00:02:07.910 --> 00:02:12.400\nSo if it's an inside email going out,\nif it's an outside email coming in,\n\n42\n00:02:12.400 --> 00:02:16.720\nif it's two internal users emailing each\nother, now it doesn't go outside at all.\n\n43\n00:02:16.720 --> 00:02:21.640\nIt still goes through the hub transport\nservice on a mailbox server somewhere.\n\n44\n00:02:21.640 --> 00:02:24.910\nAnd the odds are it's gonna pass through\nthe hub transport service on more than one\n\n45\n00:02:24.910 --> 00:02:28.390\nserver as it moves around to get to\nthe destination where it needs to be.\n\n46\n00:02:28.390 --> 00:02:33.260\nSo the hub transport service is in\na unique position, it's the only service\n\n47\n00:02:33.260 --> 00:02:38.140\nof all the services in exchange that\nactually sees 100% of the email.\n\n48\n00:02:38.140 --> 00:02:39.850\nIt sees it all.\n\n49\n00:02:39.850 --> 00:02:42.900\nSo that's what gives it that unique\nability to create these rules.\n\n50\n00:02:42.900 --> 00:02:45.830\nBack in the old days, you used to\nhave where Microsoft Outlook could\n\n51\n00:02:45.830 --> 00:02:47.560\ndirectly contact the mailbox database.\n\n52\n00:02:47.560 --> 00:02:50.220\nAnd that meant there was no way to\napply rules to it at the server and\n\n53\n00:02:50.220 --> 00:02:52.020\nthat created a lot of issues.\n\n54\n00:02:52.020 --> 00:02:53.810\nOr if we did we had to create rules and\n\n55\n00:02:53.810 --> 00:02:56.390\nsynchronize them across all\nthe servers and it was a nightmare.\n\n56\n00:02:56.390 --> 00:02:57.860\nWell now we don't have that problem,\n\n57\n00:02:57.860 --> 00:03:02.090\nbecause all email without exception\ngoes thru the hub transport rule, or\n\n58\n00:03:02.090 --> 00:03:05.710\nhub transport service, and\nthat's where we can apply these rules.\n\n59\n00:03:05.710 --> 00:03:07.370\nWell, let me show you\nwhere these rules are and\n\n60\n00:03:07.370 --> 00:03:09.670\nthen we'll talk about some the different\nthings we can do with them.\n\n61\n00:03:09.670 --> 00:03:13.638\nSo here I'm logged into my Exchange\nAdministration Center, and in the EAC if\n\n62\n00:03:13.638 --> 00:03:19.370\nyou login and you go down to mail flow,\ninside of mail flow you'll see rules.\n\n63\n00:03:19.370 --> 00:03:20.240\nIt's the first tab, and\n\n64\n00:03:20.240 --> 00:03:22.790\nit's usually chosen by default\nthat I've clicked off of it here.\n\n65\n00:03:22.790 --> 00:03:25.100\nBut you can go into rules, and\nyou can see rules that you have.\n\n66\n00:03:25.100 --> 00:03:26.730\nNow by default, there's no rules.\n\n67\n00:03:27.770 --> 00:03:31.190\nAny email is allowed to come in,\nany email is allowed to go out, and\n\n68\n00:03:31.190 --> 00:03:32.770\nit does so unmodified.\n\n69\n00:03:32.770 --> 00:03:35.660\nWe don't touch them at all,\nthey just flow through.\n\n70\n00:03:35.660 --> 00:03:36.990\nThat's the default.\n\n71\n00:03:36.990 --> 00:03:41.720\nThen it's up to us to come through and\nconfigure what we want to have happen.\n\n72\n00:03:41.720 --> 00:03:43.840\nWhat are some examples of what\nwe might want to have happen?\n\n73\n00:03:43.840 --> 00:03:47.320\nWell, a great example is that we might\nwant to apply a legal disclaimer to\n\n74\n00:03:47.320 --> 00:03:48.120\nour email.\n\n75\n00:03:48.120 --> 00:03:49.730\nI'm sure you guys have\nreceived one of those before.\n\n76\n00:03:49.730 --> 00:03:53.130\nYou get an email and you read it and then\nright below the person's signature is this\n\n77\n00:03:53.130 --> 00:03:57.730\nbig disclaimer, and it says this email\nis intended for the recipient only.\n\n78\n00:03:57.730 --> 00:03:59.870\nIf you've received this email in error,\nplease delete it.\n\n79\n00:03:59.870 --> 00:04:00.830\nSomething like that.\n\n80\n00:04:00.830 --> 00:04:05.310\nIt's just junk, legal stuff, and if you've\never wondered why people even bother with\n\n81\n00:04:05.310 --> 00:04:07.240\nthat, it's called due diligence.\n\n82\n00:04:07.240 --> 00:04:10.750\nIf they ever take somebody to court for\nhaving information they shouldn't have and\n\n83\n00:04:10.750 --> 00:04:13.340\nthat person says, well,\nyou accidentally sent me this email.\n\n84\n00:04:13.340 --> 00:04:16.290\nThey can say, well we put a disclaimer\nright at the bottom that says you're\n\n85\n00:04:16.290 --> 00:04:17.400\nnot supposed to have that.\n\n86\n00:04:17.400 --> 00:04:21.070\nSo we did our due diligence and\nnow they can take you to court.\n\n87\n00:04:21.070 --> 00:04:23.390\nIf they didn't do that then\nthey couldn't go to cour.\n\n88\n00:04:23.390 --> 00:04:25.250\nSo it's really just for\nlitigation purposes.\n\n89\n00:04:25.250 --> 00:04:26.860\nMost of the time we don't\nreally care about it.\n\n90\n00:04:26.860 --> 00:04:28.760\nBut it is an important thing to have.\n\n91\n00:04:28.760 --> 00:04:32.610\nWell, how will we make sure that all of\nour users are putting the legal disclaimer\n\n92\n00:04:32.610 --> 00:04:33.730\non their email?\n\n93\n00:04:33.730 --> 00:04:34.880\nThe short answer is you can't.\n\n94\n00:04:34.880 --> 00:04:37.980\nYou can't trust your users\nto do it all the time, so\n\n95\n00:04:37.980 --> 00:04:42.800\ninstead, we can use a transport rule\nto do it, that says anytime an email\n\n96\n00:04:42.800 --> 00:04:45.770\npasses through our system,\nstick this disclaimer on the bottom.\n\n97\n00:04:45.770 --> 00:04:46.910\nIt's a really simple process.\n\n98\n00:04:46.910 --> 00:04:48.070\nLet me show you how it works.\n\n99\n00:04:48.070 --> 00:04:49.920\nWe can go in here and\nwe can create a rule.\n\n100\n00:04:49.920 --> 00:04:53.810\nAnd when you create a rule, the very\nfirst option is create a new rule.\n\n101\n00:04:53.810 --> 00:04:57.060\nAnd that's the one that gives\nyou full capability to pick and\n\n102\n00:04:57.060 --> 00:04:59.320\nchoose exactly what you\nwant this rule to do.\n\n103\n00:05:00.400 --> 00:05:03.070\nAll the other ones are templates.\n\n104\n00:05:03.070 --> 00:05:07.090\nMicrosoft includes about ten templates\nhere that are common things that you might\n\n105\n00:05:07.090 --> 00:05:08.220\nwant to do.\n\n106\n00:05:08.220 --> 00:05:10.920\nSo I mentioned attaching\na legal disclaimer.\n\n107\n00:05:10.920 --> 00:05:14.280\nWell, that's actually option number\nthree here, apply disclaimers.\n\n108\n00:05:14.280 --> 00:05:16.330\nNow I could choose create new rule.\n\n109\n00:05:16.330 --> 00:05:18.080\nAnd create this myself by hand.\n\n110\n00:05:18.080 --> 00:05:21.270\nBut because they've given me a template,\nI can just use that.\n\n111\n00:05:21.270 --> 00:05:24.323\nNow, when I click on the template,\nit's really no different than if\n\n112\n00:05:24.323 --> 00:05:27.970\nI created the rule myself, except it's\nalready got some values filled in for me.\n\n113\n00:05:27.970 --> 00:05:29.470\nNow what is it filling in?\n\n114\n00:05:29.470 --> 00:05:33.140\nWhen you make a rule,\nthe rule is made up of three parts.\n\n115\n00:05:33.140 --> 00:05:37.080\nThe first part is a condition, and you'll\nhear Microsoft refer to it as a predicate\n\n116\n00:05:37.080 --> 00:05:39.400\nsometimes on the exam you\nmight see that word predicate.\n\n117\n00:05:39.400 --> 00:05:40.210\nIt's just conditions.\n\n118\n00:05:41.220 --> 00:05:44.080\nWhat emails will this policy apply to?\n\n119\n00:05:44.080 --> 00:05:48.050\nWe don't normally want a rule\nto apply to a 100% of our email.\n\n120\n00:05:48.050 --> 00:05:50.630\nSo for example,\nif I'm attaching a legal disclaimer,\n\n121\n00:05:50.630 --> 00:05:54.590\na legal disclaimer needs to be attached\nto emails that I'm sending out.\n\n122\n00:05:54.590 --> 00:05:59.840\nIf it's an internal user sending it to an\noutside user, I want the disclaimer there.\n\n123\n00:05:59.840 --> 00:06:02.960\nBut what if it's an internal user\nsending to another internal user?\n\n124\n00:06:02.960 --> 00:06:04.600\nDo I need the disclaimer there?\n\n125\n00:06:04.600 --> 00:06:06.050\nMaybe.\n\n126\n00:06:06.050 --> 00:06:07.700\nBut it's up to me,\nit's up to my environment.\n\n127\n00:06:07.700 --> 00:06:08.700\nIt's kinda situational.\n\n128\n00:06:08.700 --> 00:06:11.020\nI have to pick whether or not I want that.\n\n129\n00:06:11.020 --> 00:06:13.580\nOr what if it's an outside\nemail coming in?\n\n130\n00:06:13.580 --> 00:06:15.740\nIt's an email somebody\nelse sent coming in to me.\n\n131\n00:06:15.740 --> 00:06:17.956\nDo I wanna attach a disclaimer there?\n\n132\n00:06:17.956 --> 00:06:19.115\nProbably not.\n\n133\n00:06:19.115 --> 00:06:23.885\nSo we define conditions,\nlet's say what emails they apply to.\n\n134\n00:06:23.885 --> 00:06:26.365\nThen we define actions.\n\n135\n00:06:26.365 --> 00:06:28.025\nAnd actions are what we're gonna do to it.\n\n136\n00:06:28.025 --> 00:06:29.825\nIn this case we're gonna pin some text and\nemail.\n\n137\n00:06:30.935 --> 00:06:35.315\nAnd then lastly there's an optional\nthird part which are exceptions.\n\n138\n00:06:35.315 --> 00:06:37.785\nYour conditions may grab a lot of email,\nand\n\n139\n00:06:37.785 --> 00:06:41.390\nthen you do exceptions to exclude\ncertain traffic from that rule.\n\n140\n00:06:41.390 --> 00:06:43.120\nSo you can specify all that.\n\n141\n00:06:43.120 --> 00:06:44.350\nIt's all in three parts.\n\n142\n00:06:44.350 --> 00:06:47.820\nConditions, actions, exceptions.\n\n143\n00:06:47.820 --> 00:06:51.210\nNow on the screen, when we look at it\nby default, you only see conditions and\n\n144\n00:06:51.210 --> 00:06:52.020\nactions.\n\n145\n00:06:52.020 --> 00:06:55.300\nThe exceptions are hidden away\nunder this more options button.\n\n146\n00:06:55.300 --> 00:06:57.060\nAnd I'll be honest with you guys.\n\n147\n00:06:57.060 --> 00:06:59.230\nJust get used to hitting\nthat more options button,\n\n148\n00:06:59.230 --> 00:07:02.490\nbecause when you look at things\nlike the do the following.\n\n149\n00:07:02.490 --> 00:07:05.790\nDo the following, that's the action\nthat we take, if I drop that down,\n\n150\n00:07:05.790 --> 00:07:09.900\nsee how I only see like six actions,\nthat's not very exciting.\n\n151\n00:07:09.900 --> 00:07:12.330\nI can forward the message for approval,\n\n152\n00:07:12.330 --> 00:07:15.740\nI can redirect the message,\nI can reject the message,\n\n153\n00:07:15.740 --> 00:07:20.140\ndelete the message, blind copy the message\nor append a disclaimer and that's it.\n\n154\n00:07:20.140 --> 00:07:21.120\nJust six things.\n\n155\n00:07:21.120 --> 00:07:22.460\nThat's not exciting.\n\n156\n00:07:22.460 --> 00:07:29.100\nBut if you click on more options, now\nthat do the following has a lot of stuff.\n\n157\n00:07:29.100 --> 00:07:30.890\nAnd a lot of these have arrows that\nbranch out into even more things.\n\n158\n00:07:30.890 --> 00:07:35.140\nYou'll see there's a ton of options\nin here and a ton of power.\n\n159\n00:07:35.140 --> 00:07:36.520\nSo just get used to hitting more options.\n\n160\n00:07:36.520 --> 00:07:38.820\nYou're pretty much gonna\nneed that all the time.\n\n161\n00:07:38.820 --> 00:07:40.220\nBut, when you go in here and\n\n162\n00:07:40.220 --> 00:07:43.310\nstart to define this rule,\nyou're telling it what you want it to do.\n\n163\n00:07:43.310 --> 00:07:47.328\nLet me go back to this simple screen,\nwhere I'm just applying a disclaimer.\n\n164\n00:07:47.328 --> 00:07:50.227\nThe first part is, well,\nI do need to give it a name, so\n\n165\n00:07:50.227 --> 00:07:52.766\nI'm just gonna call this\nmy legal disclaimer.\n\n166\n00:07:52.766 --> 00:07:56.717\nAnd then apply this rule if,\nthese are my conditions.\n\n167\n00:07:56.717 --> 00:07:58.359\nWho does this apply to?\n\n168\n00:07:58.359 --> 00:08:01.740\nAnd if I'm doing a legal disclaimer,\nI might wanna just come in here and say,\n\n169\n00:08:01.740 --> 00:08:03.140\napply to all messages.\n\n170\n00:08:03.140 --> 00:08:06.173\nI want this to apply to\n100% of the messages.\n\n171\n00:08:06.173 --> 00:08:08.120\nBut there's a little problem there.\n\n172\n00:08:08.120 --> 00:08:13.150\nMy problem is I don't necessarily want\nit to apply to outside emails coming in.\n\n173\n00:08:13.150 --> 00:08:14.870\nSo now, I need to make a choice.\n\n174\n00:08:14.870 --> 00:08:16.760\nThe choice is kind of a difficult one.\n\n175\n00:08:16.760 --> 00:08:20.140\nSometimes I can get my\nemail selected right here\n\n176\n00:08:20.140 --> 00:08:22.640\nwithout having to do exceptions.\n\n177\n00:08:22.640 --> 00:08:25.340\nOther times, I have to use an exception.\n\n178\n00:08:25.340 --> 00:08:27.960\nSo we kind of have to fiddle with this a\nbit to find out which one's gonna work in\n\n179\n00:08:27.960 --> 00:08:30.500\nour scenario and\neverybody's scenario is different.\n\n180\n00:08:30.500 --> 00:08:32.320\nSo it's not a one size fits all.\n\n181\n00:08:32.320 --> 00:08:35.050\nYou've really got to tune\nthis to your own environment.\n\n182\n00:08:35.050 --> 00:08:39.400\nSo if I want this to apply to every email,\nbe it internal or\n\n183\n00:08:39.400 --> 00:08:43.480\ninside going out, I just don't want it\nto apply to outside people coming in.\n\n184\n00:08:43.480 --> 00:08:46.940\nI could drop this down and\npick from the different lists.\n\n185\n00:08:46.940 --> 00:08:51.154\nAnd you'll see things like if\nthe sender is dot dot dot.\n\n186\n00:08:51.154 --> 00:08:52.528\nWhen you see the ellipses,\n\n187\n00:08:52.528 --> 00:08:56.270\nthe three dots, that's your hint\nthat there's more to this one.\n\n188\n00:08:56.270 --> 00:09:00.680\nSo I can say apply this\nrule if the sender is, and\n\n189\n00:09:00.680 --> 00:09:03.820\nI could pick a particular person or\na group.\n\n190\n00:09:03.820 --> 00:09:06.090\nAnd so now, it's just going to\napply to that individual person.\n\n191\n00:09:06.090 --> 00:09:07.792\nWell I wanna grab all of\nmy internal users and\n\n192\n00:09:07.792 --> 00:09:09.361\nI don't have a good way of doing it here.\n\n193\n00:09:09.361 --> 00:09:10.731\nSo I'm gonna cancel that.\n\n194\n00:09:10.731 --> 00:09:13.339\nAnd then I'll look and\nsee if the sender is located,\n\n195\n00:09:13.339 --> 00:09:16.190\nthat would be if they're\nin a particular place.\n\n196\n00:09:16.190 --> 00:09:20.870\nIf the sender is a member of some group\nbut I don't have a good group for that.\n\n197\n00:09:20.870 --> 00:09:23.330\nIf the sender address includes well,\nall right.\n\n198\n00:09:23.330 --> 00:09:25.700\nSo maybe I could do my domains but\nif I have a bunch of domains,\n\n199\n00:09:25.700 --> 00:09:26.730\nthat's kind of a hassle.\n\n200\n00:09:26.730 --> 00:09:31.950\nSo none of these really help me for\ngetting just internal employees.\n\n201\n00:09:31.950 --> 00:09:34.420\nSo I'm gonna choose Apply to all Messages.\n\n202\n00:09:34.420 --> 00:09:36.533\nAnd then I'll create an exception for\n\n203\n00:09:36.533 --> 00:09:39.644\nwhen the sender is outside\nwhen the sender is external.\n\n204\n00:09:39.644 --> 00:09:42.344\nSometimes you have to use an exception\nsometimes you can get away\n\n205\n00:09:42.344 --> 00:09:44.100\nwithout using one.\n\n206\n00:09:44.100 --> 00:09:45.150\nAnd then I'm gonna do the following.\n\n207\n00:09:45.150 --> 00:09:47.220\nI'm going to append a disclaimer.\n\n208\n00:09:47.220 --> 00:09:49.760\nNow, when you choose append a disclaimer\n\n209\n00:09:49.760 --> 00:09:53.200\nover here it's got\nan option to enter in text.\n\n210\n00:09:53.200 --> 00:09:54.740\nSo that what I need to do.\n\n211\n00:09:54.740 --> 00:09:59.180\nSo I'm going to hit Enter text and\nI'm gonna specify that disclaimer text.\n\n212\n00:09:59.180 --> 00:10:04.910\nSo I'll just say something like,\nwe can be really detailed here,\n\n213\n00:10:04.910 --> 00:10:07.360\nwe can say whatever it is.\n\n214\n00:10:07.360 --> 00:10:11.190\nI'll just say do not read this email.\n\n215\n00:10:11.190 --> 00:10:13.040\nThat's the easy way to be safe.\n\n216\n00:10:13.040 --> 00:10:14.720\nWe told you not to read it,\nand you read it.\n\n217\n00:10:14.720 --> 00:10:15.550\nSo there we go.\n\n218\n00:10:15.550 --> 00:10:18.620\nSo you can define your disclaimer with\nwhatever syntax your legal department\n\n219\n00:10:18.620 --> 00:10:19.480\ngives you, you punch it in there.\n\n220\n00:10:20.750 --> 00:10:23.970\nSo, that's what we're gonna be doing\nright there, appending that disclaimer.\n\n221\n00:10:23.970 --> 00:10:27.520\nNow, I need to do an exception, and\nexceptions don't show up by default.\n\n222\n00:10:27.520 --> 00:10:28.710\nSo I'm gonna have to go to more options.\n\n223\n00:10:28.710 --> 00:10:29.470\nBut before I do that,\n\n224\n00:10:29.470 --> 00:10:31.540\nlet me talk about some of these\nother things that we've got here.\n\n225\n00:10:31.540 --> 00:10:33.150\nWe've got audit this rule.\n\n226\n00:10:34.310 --> 00:10:36.600\nDo we want to do logging for this rule?\n\n227\n00:10:36.600 --> 00:10:37.761\nAnd you might.\n\n228\n00:10:37.761 --> 00:10:40.410\nIf this is some kind of security\nconcern then we might need to log it or\n\n229\n00:10:40.410 --> 00:10:42.830\nif we're just doing testing,\nyou might want to log it today.\n\n230\n00:10:42.830 --> 00:10:45.570\nBut you'll see on here we've\ngot options for testing too.\n\n231\n00:10:45.570 --> 00:10:49.680\nYou got enforce, that means the rule\nis active and applying to the system.\n\n232\n00:10:49.680 --> 00:10:51.030\nAnd you've got testing.\n\n233\n00:10:51.030 --> 00:10:54.020\nTesting doesn't actually apply the rule.\n\n234\n00:10:54.020 --> 00:10:57.870\nThe rule is sort of in effect,\nyou won't be attaching legal disclaimers.\n\n235\n00:10:57.870 --> 00:11:04.280\nIf you choose test with policy tips,\nthen when you draft an email, you'll see\n\n236\n00:11:04.280 --> 00:11:09.270\na mail tip appear that will tell you what\nwould happen if this policy was enforced.\n\n237\n00:11:09.270 --> 00:11:10.420\nSo that's one way to do it.\n\n238\n00:11:10.420 --> 00:11:14.200\nIf you choose test without policy tips,\nevery time this policy would apply,\n\n239\n00:11:14.200 --> 00:11:15.980\nit will send you an email\nletting you know.\n\n240\n00:11:15.980 --> 00:11:17.780\nIt's a good way to test.\n\n241\n00:11:17.780 --> 00:11:21.310\nBoth of those require connecting\nup with Office 365 though.\n\n242\n00:11:21.310 --> 00:11:23.320\nAnd so if you're running in\na standalone environment,\n\n243\n00:11:23.320 --> 00:11:25.450\nthese two tests are not really useful.\n\n244\n00:11:25.450 --> 00:11:27.570\nSo if you're trying to test the rule and\n\n245\n00:11:27.570 --> 00:11:31.590\nyou want to really throttle it down,\nyou should set up a apply this rule and\n\n246\n00:11:31.590 --> 00:11:35.580\nlimit it just to your account or just to a\ntest account and test the rule with that.\n\n247\n00:11:35.580 --> 00:11:38.420\nAnd then switch it to apply to all\nmessages and then you're taken care of.\n\n248\n00:11:40.280 --> 00:11:43.180\nSo I'm gonna hit more options though,\ncuz I need to set an exception.\n\n249\n00:11:43.180 --> 00:11:48.230\nAnd now, you'll see apply this rule if,\nthat's my condition, do the following,\n\n250\n00:11:48.230 --> 00:11:52.190\nthat's my action, and except if,\nthere's my exceptions.\n\n251\n00:11:52.190 --> 00:11:56.009\nAnd I'm gonna add an exception, and\nI'm gonna say, if the sender and\n\n252\n00:11:56.009 --> 00:11:59.765\nthen notice I've got some nice little\noptions in here like this one,\n\n253\n00:11:59.765 --> 00:12:01.939\nif the sender is external or internal.\n\n254\n00:12:01.939 --> 00:12:03.570\nI'm gonna choose that.\n\n255\n00:12:03.570 --> 00:12:06.055\nAnd I'm gonna choose if\nthe sender is outside.\n\n256\n00:12:06.055 --> 00:12:10.460\nIf this isn't email being sent from\nsomebody outside my organization.\n\n257\n00:12:10.460 --> 00:12:13.050\nI don't want to attach a legal\ndisclaimer to their stuff.\n\n258\n00:12:13.050 --> 00:12:15.360\nI want it attached to mine.\n\n259\n00:12:15.360 --> 00:12:18.210\nSo now,\ninternal users will have this apply.\n\n260\n00:12:18.210 --> 00:12:22.010\nSo inside email going out or\ninside email going to inside people.\n\n261\n00:12:22.010 --> 00:12:25.637\nBut outside email coming in,\nthis rule won't apply.\n\n262\n00:12:25.637 --> 00:12:29.102\nAnd I'll go ahead and\nsave my rule and now it's saying,\n\n263\n00:12:29.102 --> 00:12:31.920\ndo I wanna apply this\nto all future messages?\n\n264\n00:12:31.920 --> 00:12:34.480\nAnd I'll say yes, and\nlooks like I got a problem.\n\n265\n00:12:34.480 --> 00:12:35.710\nIt says I got an error here.\n\n266\n00:12:35.710 --> 00:12:38.520\nPlease fix the highlighted fields and\ntry saving again.\n\n267\n00:12:38.520 --> 00:12:40.610\nOh, my fallback option.\n\n268\n00:12:40.610 --> 00:12:44.090\nUp here I've got this legal disclaimer,\nand I didn't set a fallback option.\n\n269\n00:12:44.090 --> 00:12:45.600\nSee how it lit up in red?\n\n270\n00:12:45.600 --> 00:12:50.050\nSo what do you do if it fails\nto attach the legal disclaimer?\n\n271\n00:12:50.050 --> 00:12:51.460\nSomething could happen.\n\n272\n00:12:51.460 --> 00:12:54.750\nIf the email is encrypted,\ncan we attach a legal disclaimer?\n\n273\n00:12:54.750 --> 00:12:56.330\nKind of hard to do that.\n\n274\n00:12:56.330 --> 00:12:58.250\nSo there's situations where it might fail.\n\n275\n00:12:58.250 --> 00:13:00.710\nSo what do we do if it fails?\n\n276\n00:13:00.710 --> 00:13:03.670\nWell you can hit select one and\nyou can pick an option.\n\n277\n00:13:03.670 --> 00:13:07.750\nAnd we can say rapid,\nwhich means just stick the disclaimer on\n\n278\n00:13:07.750 --> 00:13:10.450\nafter the encrypted stuff,\nyou can do that.\n\n279\n00:13:10.450 --> 00:13:11.950\nOr we can say ignore it.\n\n280\n00:13:11.950 --> 00:13:16.690\nJust let the email go through without\na legal disclaimer or we can reject it.\n\n281\n00:13:16.690 --> 00:13:18.830\nAnd if that legal disclaimer is there,\n\n282\n00:13:18.830 --> 00:13:21.470\nif your legal department has asked you\nto do that, it's pretty important.\n\n283\n00:13:21.470 --> 00:13:23.360\nWe probably wanna reject the email.\n\n284\n00:13:23.360 --> 00:13:27.210\nIf we can't attach the disclaimer,\nwe need to reject it.\n\n285\n00:13:27.210 --> 00:13:31.190\nSo these are the options that we have to\npick and now that I've got that said I\n\n286\n00:13:31.190 --> 00:13:35.588\nshould be able to save my rule and\nWill have this rule.\n\n287\n00:13:35.588 --> 00:13:40.530\nSo now, 100% of the emails that\nare moving through my organization\n\n288\n00:13:40.530 --> 00:13:44.610\nget this rule applied to them and if the\nsender is outside it doesn't do anything.\n\n289\n00:13:44.610 --> 00:13:47.690\nBut if the sender is internal,\nthis rule applies and\n\n290\n00:13:47.690 --> 00:13:49.310\nit will append that disclaimer.\n\n291\n00:13:49.310 --> 00:13:53.020\nNow as you create rules, you're going to\nnotice this priority filed over here and\n\n292\n00:13:53.020 --> 00:13:54.150\nthis one got a priority of zero.\n\n293\n00:13:55.410 --> 00:14:00.180\nAs you create the rules, the priority\ndetermines the order they're applied in.\n\n294\n00:14:00.180 --> 00:14:02.530\nAnd so as they go through,\nit starts at the top and it goes down.\n\n295\n00:14:02.530 --> 00:14:05.560\nYou wanna have more than one rule\nthat applies to the same email.\n\n296\n00:14:05.560 --> 00:14:07.688\nIt's very common.\n\n297\n00:14:07.688 --> 00:14:09.240\nSo keep that in mind.\n\n298\n00:14:09.240 --> 00:14:13.840\nNow, if you've got a rule that\nrejects email for some reason.\n\n299\n00:14:13.840 --> 00:14:16.840\nThen you might wanna choose to\nstop processing rules and say,\n\n300\n00:14:16.840 --> 00:14:19.820\ndon't process any more rules cuz you're\njust wasting resources at that point.\n\n301\n00:14:19.820 --> 00:14:21.410\nYou're already gonna reject the email.\n\n302\n00:14:21.410 --> 00:14:24.510\nAnd so that option was in there when\nwe were in the advanced settings.\n\n303\n00:14:24.510 --> 00:14:27.890\nIt's buried in there that you can tell\nit to stop processing after this rule.\n\n304\n00:14:27.890 --> 00:14:29.210\nIf I scroll down here it is.\n\n305\n00:14:29.210 --> 00:14:30.880\nStop processing more rules.\n\n306\n00:14:30.880 --> 00:14:34.970\nSo if this rule results in an email\nbeing rejected then I don't wanna\n\n307\n00:14:34.970 --> 00:14:37.141\nprocess anything else after that.\n\n308\n00:14:37.141 --> 00:14:38.270\nIt's just wasting time.\n\n309\n00:14:38.270 --> 00:14:39.270\nI can turn that on.\n\n310\n00:14:39.270 --> 00:14:40.560\nBut most of the time we want that off.\n\n311\n00:14:40.560 --> 00:14:44.330\nWe want all of our rules to apply\ncuz it might not be this rule that\n\n312\n00:14:44.330 --> 00:14:45.060\nrejects the email.\n\n313\n00:14:45.060 --> 00:14:46.370\nIt might be another rule that does so\n\n314\n00:14:46.370 --> 00:14:48.830\nwe gotta give it a chance to\nget through all those rules.\n\n315\n00:14:48.830 --> 00:14:52.010\nBut it means the order of\nthese rules is important.\n\n316\n00:14:52.010 --> 00:14:53.060\nAnd so you'll see my up and\n\n317\n00:14:53.060 --> 00:14:55.430\ndown arrows where we can change\nthe order they're applied in.\n\n318\n00:14:55.430 --> 00:14:57.960\nSo just be aware that it's\napplied from top to bottom.\n\n319\n00:14:57.960 --> 00:14:59.740\nIn this order.\n\n320\n00:14:59.740 --> 00:15:02.781\nSo now, emails passing through my\norganization are gonna get a legal\n\n321\n00:15:02.781 --> 00:15:04.580\ndisclaimer attached to them.\n\n322\n00:15:04.580 --> 00:15:08.010\nThat's one example of something\nI can do with a transport rule.\n\n323\n00:15:08.010 --> 00:15:08.960\nWhat are some other examples?\n\n324\n00:15:08.960 --> 00:15:12.130\nWell actually here,\nlet's see if this one even works first.\n\n325\n00:15:12.130 --> 00:15:15.929\nSo if I go in and draft a new email,\nso I'm gonna create a new email here.\n\n326\n00:15:15.929 --> 00:15:21.510\nAnd I'm gonna email Jane Smith, and I'll\njust call this my legal disclaimer test.\n\n327\n00:15:22.900 --> 00:15:25.650\nThis is testing my legal disclaimer.\n\n328\n00:15:27.630 --> 00:15:29.620\nSo this email is going to\npass through my server.\n\n329\n00:15:29.620 --> 00:15:32.870\nIt's going to pass through my hub\ntransport service, and the transport\n\n330\n00:15:32.870 --> 00:15:36.770\nrule is going to apply, legal disclaimer\nshould get attached beneath it.\n\n331\n00:15:36.770 --> 00:15:39.650\nSo I might have my own email signature or\nwhatever.\n\n332\n00:15:39.650 --> 00:15:43.571\nAnd then I send that along, and\nwe'll see what happens after that.\n\n333\n00:15:43.571 --> 00:15:46.542\nWhile we're waiting on that,\nwe can go into our other rules, and\n\n334\n00:15:46.542 --> 00:15:47.957\nwe can create some other ones.\n\n335\n00:15:47.957 --> 00:15:49.280\nAnother example of something we might do.\n\n336\n00:15:49.280 --> 00:15:50.932\nDisclaimers are popular.\n\n337\n00:15:50.932 --> 00:15:52.859\nBlocking attachments.\n\n338\n00:15:52.859 --> 00:15:57.241\nMaybe I'm worried about people\nopening Visual Basic scripts or\n\n339\n00:15:57.241 --> 00:15:59.600\nexecutables, things like that.\n\n340\n00:15:59.600 --> 00:16:03.130\nWell, Microsoft Outlook actually has\nits own attachment screen in place,\n\n341\n00:16:03.130 --> 00:16:05.350\nso we don't normally\nhave to worry about that.\n\n342\n00:16:05.350 --> 00:16:08.550\nBut we can create our own\nrules that are very specific.\n\n343\n00:16:08.550 --> 00:16:10.365\nThings like limiting based on size.\n\n344\n00:16:10.365 --> 00:16:13.813\nI might want to set it where some users\ncan receive emails that are a 100MB in\n\n345\n00:16:13.813 --> 00:16:16.960\nsize, others only 50MB and\nI can use transport rules to do that too.\n\n346\n00:16:16.960 --> 00:16:18.740\nLet me show you.\n\n347\n00:16:18.740 --> 00:16:21.020\nSo if I add a new rule here,\nI don't have a rule.\n\n348\n00:16:21.020 --> 00:16:22.960\nWell, I guess I have\nfilter by message size.\n\n349\n00:16:22.960 --> 00:16:24.320\nI could maybe do that one.\n\n350\n00:16:24.320 --> 00:16:27.890\nBut I'm not so concerned about the message\nitself as I am the attachments.\n\n351\n00:16:27.890 --> 00:16:30.230\nSo this one doesn't specifically\nsingle out attachments.\n\n352\n00:16:30.230 --> 00:16:34.230\nSo I'm gonna go to create new rule and\ncreate my own from scratch.\n\n353\n00:16:34.230 --> 00:16:41.440\nAnd I'll call this one, maybe we'll say\nblock VBS attachments right I just don't\n\n354\n00:16:41.440 --> 00:16:45.917\nwant people sending in VBS or whatever\nattachment it is that we want to block.\n\n355\n00:16:47.230 --> 00:16:49.650\nApply this rule if,\nI'm going to apply this to all messages.\n\n356\n00:16:49.650 --> 00:16:52.400\nI wanna filter every message for\nthis attachment type.\n\n357\n00:16:52.400 --> 00:16:55.589\nAnd then do the following, we'll see\nthe list here of what we want to do.\n\n358\n00:16:56.950 --> 00:16:58.320\nActually, I need to change that.\n\n359\n00:16:58.320 --> 00:16:59.760\nI don't want this to apply to every email.\n\n360\n00:16:59.760 --> 00:17:02.210\nI want it to apply to emails\nthat have a VBS attachment.\n\n361\n00:17:02.210 --> 00:17:05.400\nThat's kind of important,\nso I need to change that.\n\n362\n00:17:05.400 --> 00:17:09.610\nAnd as I look here I've got Any\nattachment content includes.\n\n363\n00:17:09.610 --> 00:17:12.490\nWell, I'm not worried about\nthe content of the attachment,\n\n364\n00:17:12.490 --> 00:17:15.150\nI'm worried about the file extension,\nand that's not gonna do.\n\n365\n00:17:15.150 --> 00:17:20.060\nSo I'm gonna need to go into my More\noptions and under more options I can say\n\n366\n00:17:20.060 --> 00:17:23.810\nIf any attachment, and\nnow I see a lot more options.\n\n367\n00:17:23.810 --> 00:17:26.390\nIf the content includes certain words or\npatterns.\n\n368\n00:17:26.390 --> 00:17:28.440\nIf the file name matches a pattern.\n\n369\n00:17:28.440 --> 00:17:32.430\nIf the file extension includes\nthese words that's what I want.\n\n370\n00:17:32.430 --> 00:17:34.700\nAnd now we can add in whatever we want.\n\n371\n00:17:34.700 --> 00:17:40.490\nI'll add in VBS, BAT, CMD, EXE,\nanything that I want to filter out.\n\n372\n00:17:40.490 --> 00:17:43.020\nNow I do know Outlook's\nalready doing this, but\n\n373\n00:17:43.020 --> 00:17:44.820\nwhat if I'm not connecting with Outlook?\n\n374\n00:17:44.820 --> 00:17:47.530\nWhat if I'm connecting with some\nthird-party mail client that doesn't have\n\n375\n00:17:47.530 --> 00:17:48.850\nthat kind of filter in place?\n\n376\n00:17:48.850 --> 00:17:50.760\nWell, here we can do it\nas a transport rule and\n\n377\n00:17:50.760 --> 00:17:53.160\nwe'll knock it out before it\neven gets to their mailbox.\n\n378\n00:17:53.160 --> 00:17:55.340\nSo it never even makes it to\nthe mailbox doing it this way.\n\n379\n00:17:57.050 --> 00:18:00.560\nSo now I can say if the attachment\nincludes one of those things\n\n380\n00:18:00.560 --> 00:18:03.930\nwe're gonna block it, and now I need\nto specify that here for the action.\n\n381\n00:18:03.930 --> 00:18:05.400\nNow when you block it you\nneed to make a choice.\n\n382\n00:18:05.400 --> 00:18:07.030\nThere's two ways to block an email.\n\n383\n00:18:07.030 --> 00:18:08.540\nYou can silently block it.\n\n384\n00:18:08.540 --> 00:18:11.030\nYou just delete it and\nthrow it away and nobody knows.\n\n385\n00:18:11.030 --> 00:18:15.460\nOr you can block it and send a message to\nthe sender so they know what happened.\n\n386\n00:18:15.460 --> 00:18:18.360\nAnd you can say hey, sorry,\nthat attachment type's not allowed.\n\n387\n00:18:18.360 --> 00:18:19.480\nSo we can let them know, and so\n\n388\n00:18:19.480 --> 00:18:24.360\nwhen you look at blocked messages\nyou'll see reject and delete.\n\n389\n00:18:24.360 --> 00:18:25.840\nDelete is that silent block.\n\n390\n00:18:25.840 --> 00:18:28.000\nIt will silently delete it and\nthat's the end of it.\n\n391\n00:18:28.000 --> 00:18:31.140\nReject, we can send it back\nwith the enhanced status code.\n\n392\n00:18:31.140 --> 00:18:34.000\nAnd boy, that's a pleasure to read,\nit means nothing to the users.\n\n393\n00:18:34.000 --> 00:18:37.510\nOr we can say reject the message and\ninclude an explanation.\n\n394\n00:18:37.510 --> 00:18:40.500\nAnd we can specify the file type\n\n395\n00:18:41.530 --> 00:18:46.280\nattached to the message is not allowed.\n\n396\n00:18:46.280 --> 00:18:47.870\nSo we can specify that.\n\n397\n00:18:47.870 --> 00:18:49.100\nYou don't have to reject it though.\n\n398\n00:18:49.100 --> 00:18:52.350\nThere's actually an option in here\nsomewhere, we'll have to hunt for it,\n\n399\n00:18:52.350 --> 00:18:53.700\nwhere you can strip the attachment.\n\n400\n00:18:53.700 --> 00:18:56.740\nWhere you can say send it along\njust without an attachment on it.\n\n401\n00:18:56.740 --> 00:18:58.290\nIt's buried in here somewhere.\n\n402\n00:18:58.290 --> 00:19:01.830\nBut we'll just leave it right here,\nsend that message and let people know.\n\n403\n00:19:01.830 --> 00:19:04.320\nAnd I can put in exceptions if I wanted,\nbut I don't need to.\n\n404\n00:19:05.460 --> 00:19:10.340\nOh, in the chat room, Guido mentioned\nJAR files, those Java archives.\n\n405\n00:19:10.340 --> 00:19:11.570\nThose might be another\none that we want to add.\n\n406\n00:19:11.570 --> 00:19:13.090\nThere's a ton of different\nones we might want to add.\n\n407\n00:19:14.540 --> 00:19:16.570\nSo we can punch that in,\nI'm gonna block those attachments.\n\n408\n00:19:16.570 --> 00:19:19.490\nAnd now if somebody tries to send one\nof those, it's going to get blocked and\n\n409\n00:19:19.490 --> 00:19:21.490\nthey'll get a message\nsaying why it was blocked.\n\n410\n00:19:21.490 --> 00:19:26.390\nSince I didn't filter any exceptions,\nit's gonna apply to everybody.\n\n411\n00:19:26.390 --> 00:19:29.620\nOutside users emailing in,\ninside users mailing out and so on.\n\n412\n00:19:29.620 --> 00:19:30.200\nIt's gonna do that.\n\n413\n00:19:32.040 --> 00:19:34.730\nNow if I'm blocking those attachments and\nrejecting the message,\n\n414\n00:19:34.730 --> 00:19:39.710\nI might wanna move this one up to the top\nso it applies before the legal disclaimer.\n\n415\n00:19:39.710 --> 00:19:40.870\nNow why would I do that?\n\n416\n00:19:40.870 --> 00:19:44.010\nWell, I don't wanna attach to a disclaimer\nto an email that I'm just gonna reject.\n\n417\n00:19:45.010 --> 00:19:46.920\nWhy go through the trouble\nof attaching that?\n\n418\n00:19:46.920 --> 00:19:48.130\nIt's a waste of time.\n\n419\n00:19:48.130 --> 00:19:50.635\nAnd if I'm gonna reject the email anyway,\n\n420\n00:19:50.635 --> 00:19:53.995\nI might wanna stop processing\nrules after that if it matches.\n\n421\n00:19:53.995 --> 00:19:57.585\nSo there's a couple of different things\nyou can do here to optimize your system.\n\n422\n00:19:57.585 --> 00:20:00.465\nAgain, you'll have to tweak it a bit for\nyour environment to get the best mix.\n\n423\n00:20:01.805 --> 00:20:03.665\nAll right,\nwhat else can we do with this thing?\n\n424\n00:20:03.665 --> 00:20:07.095\nOh, email whitelist and blacklists.\n\n425\n00:20:07.095 --> 00:20:11.540\nIn Exchange, in Microsoft Outlook,\nyou have an SCL, a spam confidence level.\n\n426\n00:20:11.540 --> 00:20:13.100\nSo it looks at an email and\n\n427\n00:20:13.100 --> 00:20:16.300\nbased on the contents of the email it\nassigns a spam confidence level and\n\n428\n00:20:16.300 --> 00:20:19.460\nif the spam level is high enough\nit'll get sent to your junk mail.\n\n429\n00:20:20.610 --> 00:20:23.680\nWell, I might have emails that\nI want to go to junk mail or\n\n430\n00:20:23.680 --> 00:20:25.950\nI might have emails that I\ndon't want to go to junk mail.\n\n431\n00:20:25.950 --> 00:20:29.172\nSo we can intercept those messages and\nwe can adjust their SCL.\n\n432\n00:20:29.172 --> 00:20:31.060\nLet me show you how it works.\n\n433\n00:20:31.060 --> 00:20:32.520\nAnd let's say it's a whitelist.\n\n434\n00:20:32.520 --> 00:20:36.340\nI want to say any email coming from\nme doesn't get flagged as spam.\n\n435\n00:20:36.340 --> 00:20:40.090\nSo I can create a new rule, and\nthere's actually a template for this one.\n\n436\n00:20:40.090 --> 00:20:43.990\nNotice there's Bypass spam filtering,\nso you can choose that one and\n\n437\n00:20:43.990 --> 00:20:45.060\nit'll do the same thing.\n\n438\n00:20:45.060 --> 00:20:50.780\nBut basically you create a rule, and\nI'll call this my Email Whitelist,\n\n439\n00:20:52.030 --> 00:20:56.890\nand I can apply the rule if, and here's\nwhere I can specify a particular sender,\n\n440\n00:20:56.890 --> 00:21:01.230\nand I can say the sender is this person,\nand I could add in myself.\n\n441\n00:21:01.230 --> 00:21:04.130\nSo if the sender's me,\nI want this rule to apply.\n\n442\n00:21:05.580 --> 00:21:07.250\nAnd you can add more conditions.\n\n443\n00:21:07.250 --> 00:21:10.260\nI could add other conditions\nin here to say, and\n\n444\n00:21:10.260 --> 00:21:12.320\nthe sender's in this group or whatever.\n\n445\n00:21:12.320 --> 00:21:13.629\nYou can get really\nspecific with this stuff.\n\n446\n00:21:13.629 --> 00:21:17.775\nBut I'm gonna say if the sender is me,\nand you could add more here too,\n\n447\n00:21:17.775 --> 00:21:22.690\nsaying like Don Pezet or Ronnie Wong or\nwhoever, add each one in there.\n\n448\n00:21:22.690 --> 00:21:23.656\nAnd then do the following.\n\n449\n00:21:23.656 --> 00:21:28.690\nAnd see how it's saying, set the spam\nconfidence level to Bypass spam filtering.\n\n450\n00:21:28.690 --> 00:21:31.150\nIf you look at it you\ncan set it from Bypass,\n\n451\n00:21:31.150 --> 00:21:34.650\nwhich is always gonna get through,\nor 0 through 9.\n\n452\n00:21:34.650 --> 00:21:37.130\nIf you set it to 9,\nyou're creating a blacklist.\n\n453\n00:21:37.130 --> 00:21:38.740\nThis email will go to spam.\n\n454\n00:21:38.740 --> 00:21:41.070\nOr you could really just reject\nit at that point if you want, but\n\n455\n00:21:41.070 --> 00:21:42.570\ngoing to spam is usually a little better.\n\n456\n00:21:42.570 --> 00:21:45.140\nCuz the end users can still get\nto the email if they need it.\n\n457\n00:21:45.140 --> 00:21:47.150\nSo if I'm doing a blacklist\nI'd choose that.\n\n458\n00:21:47.150 --> 00:21:50.250\nBut a whitelist I'd wanna set to 0 or\nbypass.\n\n459\n00:21:50.250 --> 00:21:52.010\nBypass just means send it\nright to their mailbox,\n\n460\n00:21:52.010 --> 00:21:54.330\ndon't put it in junk mail, and let it go.\n\n461\n00:21:54.330 --> 00:21:57.450\nSo couple of different ways that we can\ngo about that one, but I'll leave it as\n\n462\n00:21:57.450 --> 00:22:01.310\nbypass and then I could put in exceptions\nif I want to, but I'm not going to.\n\n463\n00:22:01.310 --> 00:22:05.550\nI'll save that and\nnow emails from me will automatically\n\n464\n00:22:05.550 --> 00:22:08.320\nbypass the spam confidence level and\ngo into people's mailboxes.\n\n465\n00:22:10.232 --> 00:22:13.720\nAll right, let's see,\na couple other things that we can do.\n\n466\n00:22:13.720 --> 00:22:16.520\nWe did have a question\nin the chat room about\n\n467\n00:22:16.520 --> 00:22:19.020\nfile attachments if they\nchange the extension.\n\n468\n00:22:19.020 --> 00:22:21.370\nThat rule that I made a minute ago\nwas looking at the file extension.\n\n469\n00:22:22.490 --> 00:22:24.060\nWhat if a user changes the file extension?\n\n470\n00:22:24.060 --> 00:22:25.040\nWell, that kind of defeats this.\n\n471\n00:22:25.040 --> 00:22:26.460\nThis is fairly simplistic.\n\n472\n00:22:26.460 --> 00:22:28.300\nIt's really just looking\nat that extension.\n\n473\n00:22:28.300 --> 00:22:30.110\nAnd that's where we need\nmalware protection.\n\n474\n00:22:30.110 --> 00:22:32.860\nWe'll talk about the malware protection\nin another episode, where it can actually\n\n475\n00:22:32.860 --> 00:22:37.060\nscan those attachments to see what they\nare, regardless of what the extension is.\n\n476\n00:22:37.060 --> 00:22:39.830\nBut yeah,\nthese are somewhat simplistic on that.\n\n477\n00:22:41.170 --> 00:22:43.730\nAll right, tagging bulk mail.\n\n478\n00:22:43.730 --> 00:22:45.320\nIf I'm receiving mailing lists.\n\n479\n00:22:45.320 --> 00:22:46.790\nNo, this is kind of a fun one.\n\n480\n00:22:46.790 --> 00:22:53.340\nIf I get a lot of email spam,\nnot email spam, but just bulk mailings,\n\n481\n00:22:53.340 --> 00:22:56.660\nwe could go ahead and tag those to make\nit easier for users to recognize that.\n\n482\n00:22:56.660 --> 00:22:58.600\nThere's certain keywords you can look for.\n\n483\n00:22:58.600 --> 00:23:00.680\nA great example is unsubscribe.\n\n484\n00:23:00.680 --> 00:23:05.550\nIf you see the word unsubscribe in\nthe email, the odds are it's bulk mail.\n\n485\n00:23:05.550 --> 00:23:08.510\nIf I send you an email personally,\nam I gonna have unsubscribe in that?\n\n486\n00:23:08.510 --> 00:23:11.890\nNo, you're not gonna unsubscribe from\nme sending you a personal email.\n\n487\n00:23:11.890 --> 00:23:15.150\nBut if I'm a bulk mailer, if I'm sending\nyou an advertisement I'm required by law\n\n488\n00:23:15.150 --> 00:23:16.910\nto have the word unsubscribe there.\n\n489\n00:23:16.910 --> 00:23:20.130\nAnd even the malicious guys will put\nthe word unsubscribe in there and\n\n490\n00:23:20.130 --> 00:23:21.790\nthey'll link to their own spam site or\nwhatever.\n\n491\n00:23:21.790 --> 00:23:26.330\nBut you could key off of that word and\nsay if the email message body contains\n\n492\n00:23:26.330 --> 00:23:29.685\nthe word unsubscribe,\nset the spam confidence level to seven.\n\n493\n00:23:29.685 --> 00:23:31.660\nThere's a good chance that this is spam.\n\n494\n00:23:31.660 --> 00:23:35.130\nOr one of my favorites is you can\nappend something to the subject line.\n\n495\n00:23:35.130 --> 00:23:36.586\nLet me show you what I mean.\n\n496\n00:23:36.586 --> 00:23:41.539\nSo I'm going to create a rule here,\nand I'll call this Bulk Mailings,\n\n497\n00:23:41.539 --> 00:23:45.685\nand I can apply the rule if I'm\ngoing to look for something.\n\n498\n00:23:45.685 --> 00:23:48.932\nI might say if the subject or\nbody includes And\n\n499\n00:23:48.932 --> 00:23:51.762\nyou can start to put in things, right?\n\n500\n00:23:51.762 --> 00:23:56.220\nWhat are some of the things that\nyou normally see in a bulk mailing?\n\n501\n00:23:56.220 --> 00:23:57.690\nThe word unsubscribe.\n\n502\n00:23:59.430 --> 00:24:00.210\nRight?\n\n503\n00:24:00.210 --> 00:24:02.180\nAnd you can do regular expressions here.\n\n504\n00:24:02.180 --> 00:24:05.400\nSo if you wanna like search for\na different case and all that stuff,\n\n505\n00:24:05.400 --> 00:24:06.980\nit'll accept regular expressions.\n\n506\n00:24:06.980 --> 00:24:09.380\nBut I'm just gonna put in like,\nunsubscribe.\n\n507\n00:24:09.380 --> 00:24:16.510\nOther things like if you are having\ntrouble viewing this email, right?\n\n508\n00:24:17.730 --> 00:24:20.960\nBulk mailings always have that link, if\nthere's an HTML email and it's not right,\n\n509\n00:24:20.960 --> 00:24:23.170\nyou can click on the link and\nit will take you to their site.\n\n510\n00:24:23.170 --> 00:24:25.610\nIf I send you a personal\nemail am I gonna write that?\n\n511\n00:24:25.610 --> 00:24:26.907\nNo.\nI mean these are things that you\n\n512\n00:24:26.907 --> 00:24:27.470\ncan look for.\n\n513\n00:24:27.470 --> 00:24:31.496\nSo I'm just looking for those key words\nand then I can say what I'm gonna do, so\n\n514\n00:24:31.496 --> 00:24:35.768\nI'm gonna do the following and if you look\nat the options we've got a pen disclaimer\n\n515\n00:24:35.768 --> 00:24:38.350\nforward the message well\nthe one I wants not here.\n\n516\n00:24:38.350 --> 00:24:42.672\nI gotta hit more options and in more\noptions I can look in here and we can find\n\n517\n00:24:42.672 --> 00:24:47.275\nthat we can start to mess with the email\nwe can modify the message properties and\n\n518\n00:24:47.275 --> 00:24:50.270\nyou'll see things like\nremoving the header.\n\n519\n00:24:50.270 --> 00:24:53.780\nSetting the spam confidence level,\nthat's not even what I want.\n\n520\n00:24:53.780 --> 00:24:54.460\nLet's see, here.\n\n521\n00:24:54.460 --> 00:24:59.370\nPrepend the subject of the message\nwith something and that's what I want.\n\n522\n00:24:59.370 --> 00:25:02.090\nAnd I'm just gonna add the word bulk\n\n523\n00:25:02.090 --> 00:25:04.550\nin brackets at the beginning\nof that subject line.\n\n524\n00:25:04.550 --> 00:25:07.870\nSo now, when the email comes in right\nat the beginning of the subject line,\n\n525\n00:25:07.870 --> 00:25:09.820\nit will have the word\nbulk in square brackets.\n\n526\n00:25:09.820 --> 00:25:12.980\nThe users will see that and they'll\nrecognize it; they'll spot that and\n\n527\n00:25:12.980 --> 00:25:15.110\nthey'll say,\noh okay this is probably a bulk mailer.\n\n528\n00:25:15.110 --> 00:25:17.010\nAnd it helps them to quickly\ndisseminate whether or\n\n529\n00:25:17.010 --> 00:25:20.120\nnot that's email that's intended for them.\n\n530\n00:25:20.120 --> 00:25:21.900\nSo I can append that.\n\n531\n00:25:21.900 --> 00:25:24.570\nYou might have, a rating system.\n\n532\n00:25:24.570 --> 00:25:28.320\nYou have top secret, secret,\nclassified, unclassified.\n\n533\n00:25:28.320 --> 00:25:31.090\nAnd so you might look for\ncertain key words and\n\n534\n00:25:31.090 --> 00:25:32.990\nthen stick in the subject\nline this is classified or\n\n535\n00:25:32.990 --> 00:25:36.130\nunclassified so people can recognize\nwhat the classification level could be.\n\n536\n00:25:36.130 --> 00:25:38.060\nThere's all sorts of different\nthings that you can do in here.\n\n537\n00:25:38.060 --> 00:25:40.510\nAll right.\n\n538\n00:25:40.510 --> 00:25:42.390\nSo, I'll punch that in, and\nI'll go ahead and save it.\n\n539\n00:25:42.390 --> 00:25:45.670\nAnd so now if somebody has those things\nin their email that transport will\n\n540\n00:25:45.670 --> 00:25:46.310\nget flagged.\n\n541\n00:25:46.310 --> 00:25:47.930\nRight?\nAnd I could go and, whoops.\n\n542\n00:25:47.930 --> 00:25:50.010\nWhere's my here.\n\n543\n00:25:50.010 --> 00:25:52.079\nI could go and craft a new email to Jane.\n\n544\n00:25:54.150 --> 00:25:56.040\nAnd my email,\n\n545\n00:25:56.040 --> 00:25:58.850\nI know it's not gonna get flagged to\nspam because I've got a white list.\n\n546\n00:25:58.850 --> 00:26:03.470\nBut maybe I'm gonna use some of those\nkeywords that get it triggered as spam.\n\n547\n00:26:03.470 --> 00:26:08.070\nSo like this is a sample bulk message\n\n548\n00:26:10.080 --> 00:26:14.050\nand I can say,\nbuy my product, it's awesome!\n\n549\n00:26:15.120 --> 00:26:21.580\nAnd then something like the whole\nunsubscribe here, or what was it?\n\n550\n00:26:21.580 --> 00:26:25.640\nIf you are having trouble viewing\nthis email, whatever it is,\n\n551\n00:26:25.640 --> 00:26:32.480\nyou specify those phrases in here so\nthat people can spot it.\n\n552\n00:26:32.480 --> 00:26:34.140\nRight?\nAnd it's gonna look for that content and\n\n553\n00:26:34.140 --> 00:26:37.780\nrecognize that this is bulk mail and\nthen it's gonna take action on it.\n\n554\n00:26:37.780 --> 00:26:39.080\nAll right.\nIt'll take that action and\n\n555\n00:26:39.080 --> 00:26:40.930\nhopefully add that word\nbulk to the beginning.\n\n556\n00:26:42.710 --> 00:26:44.840\nAll right.\nSo those are a couple of examples.\n\n557\n00:26:44.840 --> 00:26:47.020\nLet's see,\nI got a little bit of time left.\n\n558\n00:26:47.020 --> 00:26:50.440\nThere's really just two more I wanna\npoint out that might turn up on the exam.\n\n559\n00:26:50.440 --> 00:26:55.700\nOne option is, what if we get email and\nit's for a user that we manage.\n\n560\n00:26:55.700 --> 00:26:57.830\nIt's our own employee,\nwe wanna kinda meter their email.\n\n561\n00:26:57.830 --> 00:27:00.790\nYou gotta couple of neat things\nthat you can do in these rules.\n\n562\n00:27:00.790 --> 00:27:04.900\nWhen you look at the actions\nthere's two that I wanna point out.\n\n563\n00:27:04.900 --> 00:27:08.790\nUnder Actions,\nwe've got to redirect the message, okay?\n\n564\n00:27:08.790 --> 00:27:12.260\nYou can actually take a message\nthat's destined for one person and\n\n565\n00:27:12.260 --> 00:27:13.830\nredirect it somewhere else.\n\n566\n00:27:13.830 --> 00:27:16.640\nSo if you've terminated an employee,\nand you've disabled their account,\n\n567\n00:27:16.640 --> 00:27:20.180\nyou can redirect their email to another\nemployee to take care of that, right?\n\n568\n00:27:20.180 --> 00:27:21.800\nSo that's one thing that you could do.\n\n569\n00:27:21.800 --> 00:27:25.590\nYou can also redirect it to make\nsure that it gets moderated.\n\n570\n00:27:25.590 --> 00:27:27.980\nSee this forward the message for approval?\n\n571\n00:27:27.980 --> 00:27:31.628\nYou can forward the message to\na particular person or a manager, and\n\n572\n00:27:31.628 --> 00:27:35.470\nin Outlook or in OWA, they'll have\na message, allow the email or not?\n\n573\n00:27:35.470 --> 00:27:38.854\nAnd if they allow it, then it'll go to\nthe recipient, if they don't allow it,\n\n574\n00:27:38.854 --> 00:27:39.990\nit gets rejected.\n\n575\n00:27:39.990 --> 00:27:42.680\nSo now you can moderate somebody's email.\n\n576\n00:27:42.680 --> 00:27:45.750\nYou might have employees that you don't\nwant, or maybe you have a child right,\n\n577\n00:27:45.750 --> 00:27:48.470\nand they're not of the legal age and\nso you don't want them\n\n578\n00:27:48.470 --> 00:27:51.270\ngetting external emails that\nhaven't been filtered and approved.\n\n579\n00:27:51.270 --> 00:27:52.230\nYou can do it right here.\n\n580\n00:27:52.230 --> 00:27:56.950\nSo those are some other actions that\nare kinda neat that take action and\n\n581\n00:27:56.950 --> 00:28:00.000\njust allow you to do\na lot of different stuff.\n\n582\n00:28:00.000 --> 00:28:02.448\nAll right, well I fired off\na couple of emails this episode,\n\n583\n00:28:02.448 --> 00:28:05.430\nlet's jump over to Jane's mailbox and\nsee what they look like on her end.\n\n584\n00:28:07.300 --> 00:28:10.376\nNow I've got Jane's mailbox pulled\nup back here in the background and\n\n585\n00:28:10.376 --> 00:28:13.260\nright off the bat I can see here's\nthat message about my product.\n\n586\n00:28:13.260 --> 00:28:15.420\nI said buy my product,\nunsubscribe here and\n\n587\n00:28:15.420 --> 00:28:18.550\nyou can see that subject line has\nthe word bulk appended to it right there.\n\n588\n00:28:18.550 --> 00:28:20.680\nI could've also bumped\nthe spam confidence level too.\n\n589\n00:28:20.680 --> 00:28:22.170\nYou can take more than one action,\n\n590\n00:28:22.170 --> 00:28:24.400\nand that would have really\ncranked that one up.\n\n591\n00:28:24.400 --> 00:28:26.340\nHere's my legal disclaimer test,\nand sure enough,\n\n592\n00:28:26.340 --> 00:28:31.390\nthat legal disclaimer is right there at\nthe end, tacked on at the end to let her\n\n593\n00:28:32.860 --> 00:28:36.510\nknow that this is a private email\nthat shouldn't be read or whatever.\n\n594\n00:28:36.510 --> 00:28:37.030\nAll right.\n\n595\n00:28:37.030 --> 00:28:38.800\nThat's what these\ntransport rules are doing.\n\n596\n00:28:38.800 --> 00:28:40.350\nAnd it's all applying on the server.\n\n597\n00:28:40.350 --> 00:28:44.040\nSo it doesn't matter whether\nyou connect with Outlook or\n\n598\n00:28:44.040 --> 00:28:49.020\nsome email client on Android, iOS web,\nWindows Mobile, whatever, doesn't matter.\n\n599\n00:28:49.020 --> 00:28:50.540\nIt's the server that's doing this.\n\n600\n00:28:50.540 --> 00:28:53.160\nAnd all the email is passing\nthrough the server and so\n\n601\n00:28:53.160 --> 00:28:55.340\nall the emails have these rules applied.\n\n602\n00:28:55.340 --> 00:28:59.370\nSo transport rules, are a real\npowerful function found inside of\n\n603\n00:28:59.370 --> 00:29:02.120\nMicrosoft Exchange and it's definitely\none of the neater things to work with.\n\n604\n00:29:03.240 --> 00:29:05.530\nAll right, well, that's about all\nI've got on Transport Rules, so\n\n605\n00:29:05.530 --> 00:29:09.200\nthis is a pretty good spot for us to wrap\nthis one up In this episode we gotta\n\n606\n00:29:09.200 --> 00:29:12.610\nchoose to see what transport rules were\nand what they were made up of right?\n\n607\n00:29:12.610 --> 00:29:16.550\nRemember we've got the condition,\nthe action and the exceptions right?\n\n608\n00:29:16.550 --> 00:29:19.680\nSo we saw how to build those and we saw\nsome of the examples of the ways we can\n\n609\n00:29:19.680 --> 00:29:21.970\nuse Transport Rules in our organization.\n\n610\n00:29:21.970 --> 00:29:24.820\nDefinitely fun stuff you'll\nwant to take advantage of it.\n\n611\n00:29:24.820 --> 00:29:26.800\nAll right,\nwell I hope you guys enjoyed the episode.\n\n612\n00:29:26.800 --> 00:29:28.190\nSigning off for ITProTV.\n\n613\n00:29:28.190 --> 00:29:30.180\nI'm Don Pezet, and I'll see you next time.\n\n614\n00:29:30.180 --> 00:29:35.890\n[SOUND]\n\n",
          "vimeoId": "136729103"
        },
        {
          "description": "In this episode, Don explores the message queues maintained by the Hub Transport Service found on Exchange Mailbox servers. He demonstrates how the queues work as well as troubleshooting and monitoring techniques.",
          "length": "1417",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-3-message_queues-081815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-3-message_queues-081815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-4-3-message_queues-081815-1-sm.jpg",
          "title": "Message Queues",
          "transcript": "WEBVTT\n\n1\n00:00:00.020 --> 00:00:10.020\n[MUSIC]\n\n2\n00:00:11.058 --> 00:00:12.811\nGood morning, good afternoon,\nand good evening.\n\n3\n00:00:12.811 --> 00:00:15.597\nWelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.597 --> 00:00:17.118\nI'm your host Don Pezet.\n\n5\n00:00:17.118 --> 00:00:20.937\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.937 --> 00:00:24.570\nIn this episode, we're gonna be\ntaking a look at message ques.\n\n7\n00:00:24.570 --> 00:00:26.110\nNow message ques, by and large,\n\n8\n00:00:26.110 --> 00:00:29.050\nare something that just runs in the\nbackground that we don't even think about.\n\n9\n00:00:29.050 --> 00:00:34.800\nWhen email comes in to our\norganization it makes its way over to,\n\n10\n00:00:34.800 --> 00:00:36.760\nwell usually, to our client access server.\n\n11\n00:00:36.760 --> 00:00:40.111\nThat's our receive connector\nwhere SMTP is running and\n\n12\n00:00:40.111 --> 00:00:43.331\nwhere our front-end transport\nservice is running.\n\n13\n00:00:43.331 --> 00:00:45.605\nBut think about front-end\ntransport services,\n\n14\n00:00:45.605 --> 00:00:48.904\nit doesn't handle mail very long,\nit receives it and moves it along, so\n\n15\n00:00:48.904 --> 00:00:52.223\nthe front-end transport service\ndoesn't actually have a true queue.\n\n16\n00:00:52.223 --> 00:00:53.816\nThe email goes in the memory and\n\n17\n00:00:53.816 --> 00:00:57.622\nthen moves right on out the server\nagain it doesn't stay there very long.\n\n18\n00:00:57.622 --> 00:01:02.515\nThen it sends it to a mailbox server and\non the mailbox server that's where you\n\n19\n00:01:02.515 --> 00:01:08.181\nhave the hub transport service, which then\nconnects to the mailbox transport service.\n\n20\n00:01:08.181 --> 00:01:11.410\nThe hub transport service\ndoes have queues.\n\n21\n00:01:11.410 --> 00:01:14.290\nIt receives emails, and\nit writes them to the hard drive.\n\n22\n00:01:14.290 --> 00:01:17.460\nIt actually maintains queue folders\nright there on the hard drive, and\n\n23\n00:01:17.460 --> 00:01:19.980\nit puts the emails there\nwhile it sorts them out.\n\n24\n00:01:19.980 --> 00:01:21.700\nThe hub transport server\ndoes a lot of things.\n\n25\n00:01:21.700 --> 00:01:23.870\nIt has to figure out where\nthe email needs to go.\n\n26\n00:01:23.870 --> 00:01:26.260\nIt needs to apply any transport\nrules if its got any.\n\n27\n00:01:26.260 --> 00:01:27.430\nIt's gotta do malware scanning.\n\n28\n00:01:27.430 --> 00:01:31.310\nAll the various things that happen\nin the hub transport service.\n\n29\n00:01:31.310 --> 00:01:33.500\nThen when it knows where it's going,\n\n30\n00:01:33.500 --> 00:01:36.920\nit sends that email either to\nanother hub transport service\n\n31\n00:01:36.920 --> 00:01:40.610\non a server somewhere else if its gotta\ndifferent destination, or it sends it\n\n32\n00:01:40.610 --> 00:01:44.890\nto the mailbox transport service where the\nemail's finally deposited in the mailbox.\n\n33\n00:01:44.890 --> 00:01:47.960\nThe mailbox transport service\nalso doesn't have queues.\n\n34\n00:01:47.960 --> 00:01:52.140\nIt receives an email, stores it in memory,\nwrites it to the mailbox database, and\n\n35\n00:01:52.140 --> 00:01:53.300\nthen it's gone.\n\n36\n00:01:53.300 --> 00:01:59.600\nSo the only place we actually have\nqueues are in the hub transfer service.\n\n37\n00:01:59.600 --> 00:02:02.510\nAnd the hub transfer service runs on\nall of our mailbox servers, and so\n\n38\n00:02:02.510 --> 00:02:03.710\nthey've got message queues there.\n\n39\n00:02:03.710 --> 00:02:05.740\nNow, we don't normally care about them.\n\n40\n00:02:05.740 --> 00:02:09.280\nAnd the reason is emails come in,\nthey then get processed,\n\n41\n00:02:09.280 --> 00:02:11.970\nthen they get written to the mailbox\ndatabase, and then they're gone.\n\n42\n00:02:11.970 --> 00:02:14.060\nThe emails remain in the database, and\n\n43\n00:02:14.060 --> 00:02:17.550\nthey remain in our transaction log files\nfor the database, so they stay there.\n\n44\n00:02:17.550 --> 00:02:19.720\nSo we never really need the queues.\n\n45\n00:02:19.720 --> 00:02:23.500\nSo if we don't really need them,\nwhy do I bring them up?\n\n46\n00:02:23.500 --> 00:02:27.180\nWell, you don't need queues\nwhen things are running right.\n\n47\n00:02:27.180 --> 00:02:30.300\nWhen things are running the way they're\nsupposed to be you don't need queues.\n\n48\n00:02:30.300 --> 00:02:33.870\nEmail flows right through the system and\nyour queues stay empty.\n\n49\n00:02:33.870 --> 00:02:38.590\nBut if something is wrong, if something\nis wrong your ques start to grow.\n\n50\n00:02:38.590 --> 00:02:42.790\nEmail just starts backing up and your\nques get bigger and bigger and bigger.\n\n51\n00:02:42.790 --> 00:02:46.580\nSo ques are something you wanna keep an\neye on because as they get bigger that's\n\n52\n00:02:46.580 --> 00:02:48.160\ngonna indicate a problem.\n\n53\n00:02:48.160 --> 00:02:51.797\nAnd the problem could be your problem,\nit could be somebody elses problem, but\n\n54\n00:02:51.797 --> 00:02:54.038\nit's the ques that'll\nhelp you identify that.\n\n55\n00:02:54.038 --> 00:02:56.779\nWell, first off, how do we see the queues?\n\n56\n00:02:56.779 --> 00:03:00.170\nWell, if you're in the exchange admin\ncenter, the short answer is you can't.\n\n57\n00:03:00.170 --> 00:03:04.390\nThere's no really good way to view\nthe queues in the admin center.\n\n58\n00:03:04.390 --> 00:03:06.050\nI know the queues are there.\n\n59\n00:03:06.050 --> 00:03:10.990\nWhen I go to my servers, I know my\nmailbox servers do have these queues.\n\n60\n00:03:10.990 --> 00:03:13.150\nI know they're there,\nbut I can't see them.\n\n61\n00:03:13.150 --> 00:03:14.820\nThey don't give me a tool\nto be able to do that.\n\n62\n00:03:15.980 --> 00:03:18.790\nThe only way to view the queues,\nwell, I guess there's two ways.\n\n63\n00:03:18.790 --> 00:03:20.040\nYou could drop and PowerShell.\n\n64\n00:03:20.040 --> 00:03:22.596\nIn the PowerShell,\nyou've got the Get-Queue command.\n\n65\n00:03:22.596 --> 00:03:24.560\nOr Get-Queue, that cmdlet and\n\n66\n00:03:24.560 --> 00:03:27.160\nyou can run that and you can pull\nyour queues and see what's in them.\n\n67\n00:03:27.160 --> 00:03:29.030\nBut there is a graphical utility for\n\n68\n00:03:29.030 --> 00:03:31.980\nit, it's just not in\nthe exchange admin center.\n\n69\n00:03:31.980 --> 00:03:35.690\nSo if you're on your own client there's\nnot a really good way to see it.\n\n70\n00:03:35.690 --> 00:03:39.270\nBut if you jump over to any\nof your exchange servers\n\n71\n00:03:39.270 --> 00:03:44.030\non your exchange server you'll have\na tool called the exchange tool box.\n\n72\n00:03:44.030 --> 00:03:46.670\nAnd the exchange tool box, it's\ninstalled automatically with exchange.\n\n73\n00:03:46.670 --> 00:03:48.700\nI didn't have to choose to install that.\n\n74\n00:03:48.700 --> 00:03:53.800\nAnd when you run it, it gives you access\nto a few really interesting things.\n\n75\n00:03:53.800 --> 00:03:57.200\nSo when it get's connected, you'll see\nthat you have the ability to view your\n\n76\n00:03:57.200 --> 00:04:00.700\nqueues, as well as to do some\nother troubleshooting things.\n\n77\n00:04:00.700 --> 00:04:02.120\nSo, it's pretty neat.\n\n78\n00:04:02.120 --> 00:04:04.190\nThe queues are what I'm concerned\nabout though and so if I look,\n\n79\n00:04:04.190 --> 00:04:06.410\nI've got my Queue Viewer right here.\n\n80\n00:04:06.410 --> 00:04:08.520\nAnd if I run that,\nit's gonna open up those queues.\n\n81\n00:04:08.520 --> 00:04:12.350\nNow, on a busy server,\nit can take a moment for this to load and\n\n82\n00:04:12.350 --> 00:04:15.770\nit's asking for me to pick a hub transport\nserver and so I'll browse and pick one.\n\n83\n00:04:16.780 --> 00:04:19.680\nAnd, well,\neventually it'll let me pick one.\n\n84\n00:04:19.680 --> 00:04:22.200\nSo [LAUGH] I ran this on\nmy client access server, so\n\n85\n00:04:22.200 --> 00:04:24.260\nit's making me connect\nto my mailbox server.\n\n86\n00:04:24.260 --> 00:04:26.620\nIf I'd connected on a mailbox server,\nit would have been faster.\n\n87\n00:04:26.620 --> 00:04:30.620\nRemember the hub transport service,\nand the mailbox transport service,\n\n88\n00:04:30.620 --> 00:04:35.150\nthey run on the mailbox servers,\nonly the front-end transport service\n\n89\n00:04:35.150 --> 00:04:37.220\nruns on the client access box, so\nthat's why I had to pick that.\n\n90\n00:04:38.230 --> 00:04:40.260\nI'll set that as my default, so\nI don't have to do it again, but\n\n91\n00:04:40.260 --> 00:04:43.300\nit's gonna connect and it's gonna\nshow me the queues on that system.\n\n92\n00:04:43.300 --> 00:04:46.610\nNow, I expect to see two queues.\n\n93\n00:04:46.610 --> 00:04:49.420\nNow, there could be three,\nthere could be 100.\n\n94\n00:04:49.420 --> 00:04:53.040\nBut I always expect to see,\nusually, two or three.\n\n95\n00:04:53.040 --> 00:04:56.330\nAnd when we look in here, I'll see I've\nactually got those two or three right now.\n\n96\n00:04:56.330 --> 00:04:58.310\nSo the submission queue.\n\n97\n00:04:58.310 --> 00:05:00.330\nYou're always going to\nhave the submission queue.\n\n98\n00:05:00.330 --> 00:05:04.020\nNo matter what, that's the one\nthat you're always going to see.\n\n99\n00:05:04.020 --> 00:05:08.740\nIf I'm submitting an email, if an email\nis coming in, or an email is going out.\n\n100\n00:05:08.740 --> 00:05:10.460\nThe hub transport service receives it and\n\n101\n00:05:10.460 --> 00:05:12.520\nimmediately sticks it in\nthe submission queue.\n\n102\n00:05:12.520 --> 00:05:15.230\nSubmission means it hasn't\nbeen processed yet.\n\n103\n00:05:15.230 --> 00:05:17.680\nIt hasn't had the transport rules applied.\n\n104\n00:05:17.680 --> 00:05:19.200\nIt hasn't found its destination.\n\n105\n00:05:19.200 --> 00:05:20.550\nIt doesn't know where it's going yet.\n\n106\n00:05:20.550 --> 00:05:21.730\nSo it goes there.\n\n107\n00:05:22.730 --> 00:05:26.895\nThen, the server's gonna look at it and\nfigure out what to do with it.\n\n108\n00:05:26.895 --> 00:05:32.245\nIf it's an internal email, you're gonna\nget an SMTP delivery to mailbox queue.\n\n109\n00:05:32.245 --> 00:05:33.375\nLike this.\n\n110\n00:05:33.375 --> 00:05:35.435\nSo you'll see these mailbox queues appear.\n\n111\n00:05:35.435 --> 00:05:36.943\nAnd that's another one\nthat I expect to see.\n\n112\n00:05:36.943 --> 00:05:40.095\nYou're usually gonna have emails moving\nthrough your system at a pretty regular\n\n113\n00:05:40.095 --> 00:05:42.515\nrate, so you can expect to\nsee that mailbox queue there.\n\n114\n00:05:43.550 --> 00:05:46.590\nAnd then you might have a third\none which is your error queue.\n\n115\n00:05:46.590 --> 00:05:48.320\nIf there's emails that\ncome through corrupted,\n\n116\n00:05:48.320 --> 00:05:50.810\nthat are damaged,\nthey'll go into this error queue.\n\n117\n00:05:50.810 --> 00:05:51.370\nI don't have it.\n\n118\n00:05:51.370 --> 00:05:54.180\nThat means I don't have any corrupted\nemail but you might see that one appear.\n\n119\n00:05:55.400 --> 00:05:58.300\nThose are three queues\nthat can be long standing.\n\n120\n00:05:58.300 --> 00:06:00.910\nThey can stay there and be there for\ndays, weeks, months, years, whatever.\n\n121\n00:06:00.910 --> 00:06:01.480\nThey'll be there.\n\n122\n00:06:03.058 --> 00:06:06.440\nBut there's hundred,\nliterally hundreds, maybe thousands of\n\n123\n00:06:06.440 --> 00:06:09.490\nother queues that might appear that\nare transient, they come and go.\n\n124\n00:06:10.550 --> 00:06:15.590\nWhen I get an email, and it's an outbound\nemail, I'm sending it out, I need to send\n\n125\n00:06:15.590 --> 00:06:20.820\nemail to somebody at gmail.com, somebody\nat yahoo.com, somebody at microsoft.com.\n\n126\n00:06:20.820 --> 00:06:24.270\nWell, we create a queue for\neach of those domains.\n\n127\n00:06:24.270 --> 00:06:26.754\nYour mail server does an MX record lookup.\n\n128\n00:06:26.754 --> 00:06:29.560\nIt looks DNS from the mail\nexchanger records.\n\n129\n00:06:29.560 --> 00:06:32.320\nAnd that mail exchanger tells\nit where to send the email to.\n\n130\n00:06:32.320 --> 00:06:36.318\nEmails going to somebody at microsoft.com,\ngo to one set of mail servers.\n\n131\n00:06:36.318 --> 00:06:40.660\nAnd somebody at google.com,\nsomebody at Gmail, somebody at Yahoo!\n\n132\n00:06:40.660 --> 00:06:42.100\nThose all go to different servers.\n\n133\n00:06:42.100 --> 00:06:44.660\nAnd it'll create a queue for each one.\n\n134\n00:06:44.660 --> 00:06:49.430\nIf the remote server is down then\nmy queue for Gmail, my queue for\n\n135\n00:06:49.430 --> 00:06:52.450\nMicrosoft or whatever,\nwill sit there and build up.\n\n136\n00:06:52.450 --> 00:06:54.480\nAnd email will sit in the queue.\n\n137\n00:06:54.480 --> 00:06:55.630\nNow the queue's retry.\n\n138\n00:06:55.630 --> 00:06:57.450\nThey retry the transmit periodically.\n\n139\n00:06:57.450 --> 00:06:59.460\nThen it actually works\non a weird interval.\n\n140\n00:06:59.460 --> 00:07:03.110\nSo it'll try 3 times, 30 seconds apart.\n\n141\n00:07:03.110 --> 00:07:06.240\nSo in the first minute and\na half it'll try three times.\n\n142\n00:07:06.240 --> 00:07:09.810\nIf that fails then it stretches\nit out to a bigger window and\n\n143\n00:07:09.810 --> 00:07:12.010\nit tries three times every six hours.\n\n144\n00:07:12.010 --> 00:07:14.090\nSo now it's spread out more further.\n\n145\n00:07:15.230 --> 00:07:19.050\nThen it tries at a bigger\nwindow over a 72 hour period,\n\n146\n00:07:19.050 --> 00:07:22.390\nwell actually, I tried it for\n3 days to send an email.\n\n147\n00:07:22.390 --> 00:07:25.280\nNow by the time it gets there\nit sends the user a warning\n\n148\n00:07:25.280 --> 00:07:27.810\nsaying this email has been delayed,\nso you know it's been delayed, but\n\n149\n00:07:27.810 --> 00:07:31.250\nit will retry because connectivity to the\nremote server might just be intermittent.\n\n150\n00:07:31.250 --> 00:07:34.520\nIt might just temporarily failed and\nso it'll queued that message.\n\n151\n00:07:34.520 --> 00:07:36.570\nNow it's rare do we\nhave to wait that long.\n\n152\n00:07:36.570 --> 00:07:39.160\nBecause every time somebody\nsends an email to that domain,\n\n153\n00:07:39.160 --> 00:07:40.620\nit's gonna retry the queue.\n\n154\n00:07:40.620 --> 00:07:42.830\nSo while I say it might be 30 seconds or\n\n155\n00:07:42.830 --> 00:07:46.900\nthen 6 hours, it usually happens\nfar more in advance of that.\n\n156\n00:07:46.900 --> 00:07:50.072\nBut if you see a queue for an external\ndomain and it's sitting there getting\n\n157\n00:07:50.072 --> 00:07:53.509\nbigger, well, it just usually means that,\nthat remote site is not connected.\n\n158\n00:07:53.509 --> 00:07:56.773\nBut if you see all of your queues\ngetting bigger and bigger and\n\n159\n00:07:56.773 --> 00:07:59.918\nbigger That's an indication\nthat you've got a problem.\n\n160\n00:07:59.918 --> 00:08:03.190\nMaybe your internet connection has failed.\n\n161\n00:08:03.190 --> 00:08:05.918\nMaybe your system has been\nadded to an email blacklist,\n\n162\n00:08:05.918 --> 00:08:09.240\none of those spam blacklists and\nso everybody is rejecting you now.\n\n163\n00:08:09.240 --> 00:08:12.074\nThose are all cases where your queue\nis going to get bigger and bigger.\n\n164\n00:08:12.074 --> 00:08:14.476\nSo that does happen all the time.\n\n165\n00:08:14.476 --> 00:08:17.810\nAll right, let me show you\nan example of how the queues work.\n\n166\n00:08:17.810 --> 00:08:20.560\nI want to get an email stuck in my queues.\n\n167\n00:08:20.560 --> 00:08:23.320\nBut the problem is, it's kind of hard\nto get an email stuck in the queue.\n\n168\n00:08:23.320 --> 00:08:25.130\nThey move through pretty quickly.\n\n169\n00:08:25.130 --> 00:08:28.338\nSo, what I'm gonna do is,\nI'm gonna simulate a database failure.\n\n170\n00:08:28.338 --> 00:08:33.510\nSo, I'm gonna jump back into my EAC, and\nI'll go to my servers, and my databases.\n\n171\n00:08:33.510 --> 00:08:36.925\nAnd I'm gonna take my mailbox database,\nand I'm just going to dismount it.\n\n172\n00:08:36.925 --> 00:08:40.050\nSo, your database is mounted\npretty much all the time.\n\n173\n00:08:40.050 --> 00:08:42.770\nIf you dismount it, it takes it offline.\n\n174\n00:08:42.770 --> 00:08:45.230\nWhen your database is offline,\nyou don't lose email.\n\n175\n00:08:45.230 --> 00:08:48.660\nNew email can come in,\nit just gets stuck in the queue.\n\n176\n00:08:48.660 --> 00:08:52.050\nIt stays in the queue until\nthe database becomes available again.\n\n177\n00:08:52.050 --> 00:08:56.630\nSo I just dismounted that and now I'm\ngonna send an email into the system.\n\n178\n00:08:56.630 --> 00:09:00.680\nNow if I were to fire up Outlook or\nOutlook web app or whatever\n\n179\n00:09:00.680 --> 00:09:05.070\nthey're not gonna be able to get into\nmy mailbox to be able to send an email.\n\n180\n00:09:05.070 --> 00:09:07.890\nSo I just can't even get connected\nif my mailbox isn't available.\n\n181\n00:09:07.890 --> 00:09:10.460\nSo, there's a neat way that\nwe can generate email that's\n\n182\n00:09:10.460 --> 00:09:11.930\nreally useful for testing.\n\n183\n00:09:11.930 --> 00:09:16.060\nIf you're troubleshooting a mail server,\nit's really a neat thing that you can do\n\n184\n00:09:16.060 --> 00:09:20.910\nwhere you can use TelNet to connect\ndirectly to an SMTP server and\n\n185\n00:09:20.910 --> 00:09:22.145\ninject email into it.\n\n186\n00:09:22.145 --> 00:09:25.030\nAnd it's useful, because you can\nsimulate different scenarios,\n\n187\n00:09:25.030 --> 00:09:28.030\nemails destined for\ndifferent places and things like that.\n\n188\n00:09:28.030 --> 00:09:30.390\nSo that's what I'm gonna do,\nI'm gonna open up a command prompt.\n\n189\n00:09:31.535 --> 00:09:36.110\nAnd Telnet is actually not installed\nby default in Windows, so if\n\n190\n00:09:36.110 --> 00:09:39.300\nyou're gonna use it you need to make sure\nyou add it, and it's easy enough to add.\n\n191\n00:09:39.300 --> 00:09:42.050\nYou just go into your Server Manager, and\n\n192\n00:09:42.050 --> 00:09:45.990\nin Server Manager you can go up to Manage,\nand Add Roles and Features.\n\n193\n00:09:45.990 --> 00:09:49.540\nAnd the Telnet client is just\na feature you add that feature in.\n\n194\n00:09:49.540 --> 00:09:51.770\nSo I've already got\nthat here on my system.\n\n195\n00:09:51.770 --> 00:09:55.070\nAnd what I'm gonna do is I'm gonna\nuse Telnet to connect in and\n\n196\n00:09:55.070 --> 00:09:57.780\ngenerate an email to a user in my system.\n\n197\n00:09:57.780 --> 00:09:58.680\nNow if you want to do that,\n\n198\n00:09:58.680 --> 00:10:02.340\nthe first thing you need to do is you\nneed to say Telnet and then your server.\n\n199\n00:10:02.340 --> 00:10:05.000\nWell, I'm on my client access server, so\n\n200\n00:10:05.000 --> 00:10:08.440\nI'm just gonna connect to 127.0.0.1,\nmy sever.\n\n201\n00:10:08.440 --> 00:10:11.120\nBut if I was on a workstation,\nI would specify the server name.\n\n202\n00:10:11.120 --> 00:10:16.160\nSo Lab-CAS01.itprotv.net, or\nwhatever the name of your server is.\n\n203\n00:10:16.160 --> 00:10:20.530\nAnd then if I stop right there,\nit's gonna telnet on port 23.\n\n204\n00:10:20.530 --> 00:10:23.560\nI need to add a 25 to the end so\nit knows that I wanna telnet on port 25,\n\n205\n00:10:23.560 --> 00:10:26.180\nI wanna simulate SMTP traffic.\n\n206\n00:10:27.420 --> 00:10:30.870\nSo I'm gonna run that and\nI've now connected to the mail server.\n\n207\n00:10:30.870 --> 00:10:34.830\nNow I can talk to the mail server but\nI have to talk to it using it's language.\n\n208\n00:10:34.830 --> 00:10:37.860\nAnd that's a little bit weird but\nit's what I need to do.\n\n209\n00:10:37.860 --> 00:10:42.740\nSo you start off by saying helo,\nwhich is H-E-L-O, only one L.\n\n210\n00:10:42.740 --> 00:10:44.510\nAnd specify the name of you workstation.\n\n211\n00:10:44.510 --> 00:10:48.730\nSo maybe I'm on like dplaptop.itprotv.net\nor something like that.\n\n212\n00:10:48.730 --> 00:10:51.920\nSo you say who you are.\n\n213\n00:10:51.920 --> 00:10:55.110\nThen, you say who\nthe email is coming from.\n\n214\n00:10:55.110 --> 00:10:57.810\nSo I'm gonna say mail from and\nthen who it's from.\n\n215\n00:10:57.810 --> 00:10:59.950\nAnd I'm gonna say this one is from me,\n\n216\n00:10:59.950 --> 00:11:04.300\nso Don Pezet and then I'll put\nmy actual email here at the end.\n\n217\n00:11:04.300 --> 00:11:08.820\nSo maybe I'm dpezet@itprotv.net,\nor something like that, right?\n\n218\n00:11:08.820 --> 00:11:11.950\nSo this is an internal email coming in.\n\n219\n00:11:11.950 --> 00:11:17.050\nThen, I have to say who it's to,\nand I'm gonna say RCPT TO.\n\n220\n00:11:17.050 --> 00:11:20.690\nWe're indicating the recipient\nthat this is destined for.\n\n221\n00:11:20.690 --> 00:11:24.110\nOh actually, it's warning me there\nabout my invalid address cuz I provided\n\n222\n00:11:24.110 --> 00:11:25.640\nan internal address.\n\n223\n00:11:25.640 --> 00:11:26.560\nAnd so I need to correct that.\n\n224\n00:11:26.560 --> 00:11:28.040\nNow here's where things\nget a little challenging.\n\n225\n00:11:29.120 --> 00:11:32.800\nNormally it's a server\nconnecting this way, not us.\n\n226\n00:11:32.800 --> 00:11:34.350\nDoes a server make mistakes?\n\n227\n00:11:34.350 --> 00:11:34.870\nNo.\n\n228\n00:11:34.870 --> 00:11:36.150\nSo a server always gets it right.\n\n229\n00:11:36.150 --> 00:11:39.240\nIf you make a typo or you type an address\nthat's not valid or something like that\n\n230\n00:11:39.240 --> 00:11:43.430\nand you get a warning, well, then you\nkinda have to start all over again.\n\n231\n00:11:43.430 --> 00:11:48.560\nYou have to exit out of the session and\nkinda get back in there a second time.\n\n232\n00:11:48.560 --> 00:11:50.560\nAnd it can be a little\nchallenging to get out.\n\n233\n00:11:50.560 --> 00:11:54.280\nLike quit is technically the key word to\nget out and eventually it'll exit, but\n\n234\n00:11:54.280 --> 00:11:57.476\na lot of times it's just easier to [LAUGH]\nclose the window and start over again.\n\n235\n00:11:57.476 --> 00:12:00.847\nSo that's what I'll do and this time\nI'll just use like an external address.\n\n236\n00:12:02.210 --> 00:12:05.920\nAll right, so I'm gonna connect\nto that internal host on port 25.\n\n237\n00:12:05.920 --> 00:12:08.090\nI'll say, helo.\n\n238\n00:12:08.090 --> 00:12:10.990\nAnd if you leave your workstation name\noff, some servers will allow you to do\n\n239\n00:12:10.990 --> 00:12:12.610\nthat, and just see how it\njust kinda resolved the name?\n\n240\n00:12:12.610 --> 00:12:13.330\nSo I'll do that.\n\n241\n00:12:13.330 --> 00:12:18.610\nAnd then I'm gonna say mail from and\nthis time I'll just specify my external\n\n242\n00:12:18.610 --> 00:12:24.280\naddress, so I'll say this mail\nis coming from don@ITPro.tv.\n\n243\n00:12:24.280 --> 00:12:25.540\nAnd then I'll say who it's to.\n\n244\n00:12:25.540 --> 00:12:29.070\nAnd I'm going to do an email to,\nI'll do Jane Smith here, so\n\n245\n00:12:29.070 --> 00:12:33.220\nI'll say JSmith@itprotv.net.\n\n246\n00:12:33.220 --> 00:12:35.420\nSo she's a user here, so\nI get recipient and sender okay.\n\n247\n00:12:36.480 --> 00:12:41.290\nThen I need to give it the data for\nthe email, so I'll say data and the very\n\n248\n00:12:41.290 --> 00:12:45.580\nfirst line I need to say subject colon\nfollowed by what I want the subject to be.\n\n249\n00:12:45.580 --> 00:12:50.580\nSo I'll say this is a test\nemail from outside.\n\n250\n00:12:50.580 --> 00:12:51.790\nOops, which I spelled wrong.\n\n251\n00:12:51.790 --> 00:12:53.730\nI spelled it wrong, and\nunfortunately I can't use backspace.\n\n252\n00:12:53.730 --> 00:12:55.860\nThose keys have already\nbeen sent to the server, so\n\n253\n00:12:55.860 --> 00:12:58.280\nI'll just have to accept\nthat I can't spell.\n\n254\n00:12:58.280 --> 00:13:01.100\nThen after that we start to provide\nour actual email message and so\n\n255\n00:13:01.100 --> 00:13:02.920\nI'll just say this is a test email.\n\n256\n00:13:04.160 --> 00:13:05.020\nI hope you get it.\n\n257\n00:13:06.840 --> 00:13:09.090\nI put a lot of effort into it.\n\n258\n00:13:10.950 --> 00:13:12.530\nSo you just type your email.\n\n259\n00:13:12.530 --> 00:13:15.830\nAnd then when you're done with the email,\nnotice this little message here.\n\n260\n00:13:15.830 --> 00:13:18.600\nPress enter, a period, and enter.\n\n261\n00:13:18.600 --> 00:13:20.860\nSo I'll press enter, a period and enter.\n\n262\n00:13:20.860 --> 00:13:24.760\nAnd that's how it knows the email is done,\nand so it's been flagged, and\n\n263\n00:13:24.760 --> 00:13:27.710\nit'll take it a second, but it's actually\ngenerating the email, there we go.\n\n264\n00:13:27.710 --> 00:13:30.062\nAnd see how it says queued mail for\ndelivery.\n\n265\n00:13:30.062 --> 00:13:32.384\nIt's queued it and it's ready to go.\n\n266\n00:13:32.384 --> 00:13:35.506\nAnd from here I can quit, some servers\nwill automatically kick you out,\n\n267\n00:13:35.506 --> 00:13:39.000\nI'm gonna quit by typing quit and now I've\ngot an email that went into the queue.\n\n268\n00:13:40.110 --> 00:13:41.850\nI know the email went into the queue and\n\n269\n00:13:41.850 --> 00:13:45.170\nby doing it this way, I just took\nmy mail client out of the equation.\n\n270\n00:13:45.170 --> 00:13:49.430\nSo if you're troubleshooting Outlook or\nThunderbird, or some other mail client.\n\n271\n00:13:49.430 --> 00:13:51.860\nDoing it this way says,\nwhat if I don't use the client?\n\n272\n00:13:51.860 --> 00:13:53.490\nWhat if I just do it by hand?\n\n273\n00:13:53.490 --> 00:13:55.680\nDo I get to that SMTP server?\n\n274\n00:13:55.680 --> 00:13:58.180\nMaybe I can't even connect to\nthe SMTP server in the first place.\n\n275\n00:13:58.180 --> 00:13:59.060\nAnd you'd see that right here.\n\n276\n00:14:00.160 --> 00:14:00.860\nBut it's connected.\n\n277\n00:14:00.860 --> 00:14:03.180\nNow, that's going to go into the queue.\n\n278\n00:14:03.180 --> 00:14:07.040\nIt went into the front end\ntransport service first, right?\n\n279\n00:14:07.040 --> 00:14:09.343\nCuz I connected to my\nclient access server.\n\n280\n00:14:09.343 --> 00:14:12.907\nIt then sends it to the transport\nservice back on the mailbox server.\n\n281\n00:14:12.907 --> 00:14:16.623\nNow it went to the mailbox server\nthat hosted Jane Smith's email, so\n\n282\n00:14:16.623 --> 00:14:17.527\nit went to hers.\n\n283\n00:14:17.527 --> 00:14:21.070\nAnd it went into that queue and that queue\nsays okay well I know where it needs to\n\n284\n00:14:21.070 --> 00:14:23.741\ngo, it needs to go to a mailbox\ndatabase on the inside and so\n\n285\n00:14:23.741 --> 00:14:25.121\nit moved it to mailbox queue.\n\n286\n00:14:25.121 --> 00:14:28.881\nAnd then It tries to go to the mailbox\ndatabase, but it's offline.\n\n287\n00:14:28.881 --> 00:14:31.400\nSo that email should now\nbe stuck in a queue.\n\n288\n00:14:31.400 --> 00:14:36.570\nAnd if I jump back to my\nqueue viewer right here,\n\n289\n00:14:36.570 --> 00:14:41.940\nI do see that I've got a mailbox database\nqueue and it's got two emails stuck in it.\n\n290\n00:14:41.940 --> 00:14:44.460\nNow I only drafted one email,\nwhat's this other one?\n\n291\n00:14:44.460 --> 00:14:47.971\nWell, there's a lot of status messages and\nother emails that are getting generated in\n\n292\n00:14:47.971 --> 00:14:50.728\nthe background that go to system accounts,\nand we never see those.\n\n293\n00:14:50.728 --> 00:14:52.720\nSo some of these might be that, but\n\n294\n00:14:52.720 --> 00:14:55.824\none of them is probably\nthe email that I just drafted.\n\n295\n00:14:55.824 --> 00:15:00.145\nAnd so I can take that queue, and with\nany of these queues, if you kinda look at\n\n296\n00:15:00.145 --> 00:15:04.271\nthem, they usually have like\na pseudo-random number attached to them so\n\n297\n00:15:04.271 --> 00:15:07.288\nwe don't get duplicate\nqueue names across servers.\n\n298\n00:15:07.288 --> 00:15:11.450\nBut I can see this is SMTP delivery to\na mailbox and it's in a retry state.\n\n299\n00:15:12.460 --> 00:15:14.310\nIt's already tried to\ndeliver the mail once and\n\n300\n00:15:14.310 --> 00:15:16.940\nit failed,\nnow it's waiting to retry again.\n\n301\n00:15:16.940 --> 00:15:19.260\nAnd it will try every 30 seconds for\nthree times and\n\n302\n00:15:19.260 --> 00:15:21.250\nthen it will go to\na bigger window of time.\n\n303\n00:15:21.250 --> 00:15:24.890\nAnd if you don't wanna wait you\ncan come in and force it to retry.\n\n304\n00:15:24.890 --> 00:15:26.890\nWhen you right click,\nsee how you've got retry?\n\n305\n00:15:26.890 --> 00:15:28.448\nSo I can tell her go ahead and\nretry again.\n\n306\n00:15:28.448 --> 00:15:32.779\nOr if that server's just not coming\nback up I can say go ahead and\n\n307\n00:15:32.779 --> 00:15:35.089\nremove the messages with an NDR.\n\n308\n00:15:35.089 --> 00:15:38.382\nIn other words, cancel the messages and\nsend a non-delivery report\n\n309\n00:15:38.382 --> 00:15:41.580\nback to whoever it was who sent\nus the email in the first place.\n\n310\n00:15:41.580 --> 00:15:42.460\nSo it can do that.\n\n311\n00:15:42.460 --> 00:15:46.175\nOr we can remove the messages\nwithout sending an NDR.\n\n312\n00:15:46.175 --> 00:15:49.716\nJust delete them and that's it, now nobody\nknows what happened in the email right?\n\n313\n00:15:49.716 --> 00:15:51.074\nBut normally you wanna try and retry.\n\n314\n00:15:51.074 --> 00:15:56.098\nNow if we know there's a problem you can\nsuspend the queue and now the queue goes\n\n315\n00:15:56.098 --> 00:16:01.676\ninto suspension state It's not retrying,\nbut it is continuing to accumulate email.\n\n316\n00:16:01.676 --> 00:16:03.382\nSo even though the database is offline,\n\n317\n00:16:03.382 --> 00:16:06.670\nI'm not losing email it's\njust pooling up right here.\n\n318\n00:16:06.670 --> 00:16:09.920\nNow I said that one of these\nemails is probably my email.\n\n319\n00:16:09.920 --> 00:16:12.250\nWouldn't it be nice if we could\ntell whether it was or not?\n\n320\n00:16:12.250 --> 00:16:13.280\nWell you can.\n\n321\n00:16:13.280 --> 00:16:17.250\nIf you double click on the queue\nit'll show you what's inside it.\n\n322\n00:16:17.250 --> 00:16:20.990\nAnd so I can see here's\nan email from don@itpro.tv.\n\n323\n00:16:20.990 --> 00:16:22.380\nRight?\nThat's that email that I\n\n324\n00:16:22.380 --> 00:16:23.750\ndrafted a moment ago.\n\n325\n00:16:23.750 --> 00:16:27.910\nAnd I can see there's another email\nfrom health mailbox blah blah blah.\n\n326\n00:16:27.910 --> 00:16:29.590\nThat's one of those system accounts.\n\n327\n00:16:29.590 --> 00:16:31.480\nRight?\nAnd it's doing just a health check.\n\n328\n00:16:31.480 --> 00:16:33.970\nIt's actually monitoring whether\nthe databases are up itself, and\n\n329\n00:16:33.970 --> 00:16:36.030\nthis is how it knows\nthe database is offline.\n\n330\n00:16:36.030 --> 00:16:38.204\nSo it sends these every couple of seconds.\n\n331\n00:16:38.204 --> 00:16:41.783\nBut as I look over I can see some\ninformation about where it came from,\n\n332\n00:16:41.783 --> 00:16:42.967\nwhere it's going to.\n\n333\n00:16:42.967 --> 00:16:47.331\nAnd I can even see the subject line here,\nThis is a test email from outside.\n\n334\n00:16:47.331 --> 00:16:50.690\nAnd if there was an error,\nI can see the error message.\n\n335\n00:16:50.690 --> 00:16:53.336\nSo looking at this other one,\nit's been in the queue longer, so\n\n336\n00:16:53.336 --> 00:16:56.976\nit's got a nice big message that's telling\nme here, the mailbox database is offline.\n\n337\n00:16:56.976 --> 00:16:58.520\nI can see what the problem is.\n\n338\n00:16:58.520 --> 00:17:02.160\nThat's the really cool part about\nthese queues is you can see the error.\n\n339\n00:17:02.160 --> 00:17:05.050\nIf I'm getting rejected on the other\nside because I'm blacklisted,\n\n340\n00:17:05.050 --> 00:17:06.640\nthe error will say that.\n\n341\n00:17:06.640 --> 00:17:07.980\nIf I can't reach the other side,\n\n342\n00:17:07.980 --> 00:17:10.810\nif the DNS lookup fails,\nthe error message will say that.\n\n343\n00:17:10.810 --> 00:17:14.350\nI can see why it's failing,\nand that's pretty neat.\n\n344\n00:17:14.350 --> 00:17:15.350\nAnd if you double click on it,\n\n345\n00:17:15.350 --> 00:17:19.120\nyou can actually get the header of\nthat message, and we can see it now.\n\n346\n00:17:19.120 --> 00:17:21.410\nNotice how it doesn't\nshow the messages body?\n\n347\n00:17:21.410 --> 00:17:24.470\nThe Queue Viewer is designed for\nadministrators to troubleshoot,\n\n348\n00:17:24.470 --> 00:17:28.150\nit's not designed for\nus to eavesdrop on people's email.\n\n349\n00:17:28.150 --> 00:17:30.770\nSo, it doesn't give you the ability\nto see the message body.\n\n350\n00:17:30.770 --> 00:17:34.450\nBut, you do see the subject line, and\nthen you can see the header of it.\n\n351\n00:17:34.450 --> 00:17:37.860\nAnd that header is useful cuz we can use\nthis for troubleshooting things, right?\n\n352\n00:17:37.860 --> 00:17:40.580\nThe header contains a lot\nof good information.\n\n353\n00:17:40.580 --> 00:17:41.580\nNow the problem with the header,\n\n354\n00:17:41.580 --> 00:17:44.900\nthough, is that it can sometimes\nbe really complex, right?\n\n355\n00:17:44.900 --> 00:17:47.160\nThere is a lot of stuff in here, and\nthis is actually a small header.\n\n356\n00:17:47.160 --> 00:17:50.180\nLet me show you,\nI copied a header before the show.\n\n357\n00:17:50.180 --> 00:17:52.520\nHere's a header from an email\nthat I received yesterday.\n\n358\n00:17:52.520 --> 00:17:55.660\nSo when we look at this,\nthere's a lot of stuff.\n\n359\n00:17:55.660 --> 00:17:59.010\nWe've got more than one\nReceived From message.\n\n360\n00:17:59.010 --> 00:18:01.710\nHow did I receive an email\nfrom three different servers?\n\n361\n00:18:01.710 --> 00:18:04.790\nWell it means it passed through three\ndifferent servers before getting to me.\n\n362\n00:18:04.790 --> 00:18:07.810\nAnd I can see who it's from, and\nwho it's to, and all this other data.\n\n363\n00:18:07.810 --> 00:18:10.190\nWhat is all this stuff?\n\n364\n00:18:10.190 --> 00:18:13.020\nWell, if you memorize it,\nyou learn each of these, then you know and\n\n365\n00:18:13.020 --> 00:18:14.220\nyou can read these headers pretty easy.\n\n366\n00:18:14.220 --> 00:18:18.085\nBut if you can't what you can do\nis you can just copy this, and\n\n367\n00:18:18.085 --> 00:18:21.990\nif I go back to my Exchange Toolbox,\nhere's where I went to the Queue Viewer,\n\n368\n00:18:21.990 --> 00:18:25.780\nright above it is\nthe Remote Connectivity Analyzer.\n\n369\n00:18:25.780 --> 00:18:29.490\nNow the Remote Connectivity Analyzer is\nnot a tool that runs right here on our\n\n370\n00:18:29.490 --> 00:18:31.140\nmachine, it's just a web page.\n\n371\n00:18:31.140 --> 00:18:34.430\nAnd so you can bypass this entirely and\ngo to the web page.\n\n372\n00:18:34.430 --> 00:18:39.360\nBut if you fire it up, it's Microsoft's\nweb site testconnectivity.microsoft.com.\n\n373\n00:18:39.360 --> 00:18:40.240\nSo easy to remember.\n\n374\n00:18:40.240 --> 00:18:44.028\nSo on any workstation you go to\ntestconnectivity.microsoft.com, and\n\n375\n00:18:44.028 --> 00:18:46.880\nyou get all sorts of email\ntests that you can run.\n\n376\n00:18:46.880 --> 00:18:50.320\nIt'll test whether Exchange ActiveSync\nis working on your server,\n\n377\n00:18:50.320 --> 00:18:54.020\nwhether Exchange Web Services are working,\nwhether Outlook can connect.\n\n378\n00:18:54.020 --> 00:18:55.850\nIt's gonna test each one of these.\n\n379\n00:18:55.850 --> 00:18:58.550\nYou can test your SMTP server, right?\n\n380\n00:18:58.550 --> 00:19:03.600\nI can do an inbound SMTP email test,\nthen way down here at the bottom,\n\n381\n00:19:03.600 --> 00:19:06.720\nit's kind of off my screen,\nlet me resize this window, here we go.\n\n382\n00:19:06.720 --> 00:19:08.950\nWay down here at the bottom,\nI got a nice little Next button, and\n\n383\n00:19:08.950 --> 00:19:11.770\nwe can start to move through that and then\nyou specify who you're trying to email,\n\n384\n00:19:11.770 --> 00:19:14.250\nand it will generate\nan email from Microsoft and\n\n385\n00:19:14.250 --> 00:19:16.850\nsend it to your SMTP server and\nyou can see if you got it.\n\n386\n00:19:16.850 --> 00:19:17.820\nDid you get that email?\n\n387\n00:19:17.820 --> 00:19:21.720\nSo kind of cool that you can run\nthese tests right from their site.\n\n388\n00:19:21.720 --> 00:19:24.440\nYou can do POP and IMAP tests also.\n\n389\n00:19:24.440 --> 00:19:27.240\nWith those, on the next screen,\nit actually asks you for\n\n390\n00:19:27.240 --> 00:19:28.420\nsome user account information.\n\n391\n00:19:28.420 --> 00:19:29.860\nSo you need a sample user.\n\n392\n00:19:29.860 --> 00:19:32.130\nAnd it'll login as your user,\ngenerate an e-mail, and\n\n393\n00:19:32.130 --> 00:19:35.030\nthen it'll tell you right here on\nthe page whether or not it succeeded.\n\n394\n00:19:35.030 --> 00:19:36.400\nBut one of the more useful tools,\n\n395\n00:19:36.400 --> 00:19:41.880\nif I go back,\nis right over here the Message Analyzer.\n\n396\n00:19:41.880 --> 00:19:46.220\nAnd you can take that Message Analyzer,\nand you can paste your header right here.\n\n397\n00:19:46.220 --> 00:19:48.720\nSo I'm taking the header from here.\n\n398\n00:19:48.720 --> 00:19:51.170\nI just copied that, and\nI'm pasting it right in here.\n\n399\n00:19:51.170 --> 00:19:55.320\nAnd when you hit Analyze Header,\nit's gonna take that header and\n\n400\n00:19:55.320 --> 00:19:59.380\nturn it into a nice little table\nthat's a heck of a lot easier to read.\n\n401\n00:19:59.380 --> 00:20:01.520\nSo, remember how I had\nthose three received froms?\n\n402\n00:20:01.520 --> 00:20:03.640\nAnd I was like,\nhow do you get an email from all three?\n\n403\n00:20:03.640 --> 00:20:07.670\nWell, right here it shows Hop 1,\nHop 2, Hop 3.\n\n404\n00:20:07.670 --> 00:20:10.330\nI had three hops in the path\nof getting the email.\n\n405\n00:20:10.330 --> 00:20:12.930\nHere's the servers I went through,\nname and IP.\n\n406\n00:20:12.930 --> 00:20:17.240\nHere's the delay each server introduced,\nso I can see each of those.\n\n407\n00:20:17.240 --> 00:20:18.560\nAnd then the message type.\n\n408\n00:20:18.560 --> 00:20:22.280\nI can see that it went over TLS,\nit was submitted via MAPI, apparently,\n\n409\n00:20:22.280 --> 00:20:24.000\nI can see how that kind\nof processed through.\n\n410\n00:20:25.000 --> 00:20:26.700\nAnd then after that I get\nmy other headers, and\n\n411\n00:20:26.700 --> 00:20:30.130\nit breaks them down showing the name\nof the header and what they are.\n\n412\n00:20:30.130 --> 00:20:33.550\nAnd if I don't know what it is, if I\nlook at one of these and I'm like okay,\n\n413\n00:20:33.550 --> 00:20:36.920\nwhat is XMS has attach.\n\n414\n00:20:36.920 --> 00:20:39.010\nWell you can click on it, and\nit'll take you to a page and\n\n415\n00:20:39.010 --> 00:20:40.850\nit'll tell you what that is so\nyou can interpret it.\n\n416\n00:20:40.850 --> 00:20:42.320\nSo really kinda handy.\n\n417\n00:20:42.320 --> 00:20:46.230\nA neat little tool to have to be\nable to decipher this information.\n\n418\n00:20:46.230 --> 00:20:50.180\nSo that's just\ntestconnectivity.microsoft.com.\n\n419\n00:20:50.180 --> 00:20:52.860\nIt's a website they set up a while back,\nit's been available.\n\n420\n00:20:52.860 --> 00:20:57.680\nIt has all sort of Office365 tests,\nbut they work on regular Exchange\n\n421\n00:20:57.680 --> 00:21:02.040\ntoo because on premises Exchange\nis the same as Office365 Exchange.\n\n422\n00:21:02.040 --> 00:21:04.640\nThe difference is just what\nservers it's running on.\n\n423\n00:21:04.640 --> 00:21:06.770\nMicrosoft servers versus yours.\n\n424\n00:21:06.770 --> 00:21:09.240\nSo you can take advantage of\na lot of these different things.\n\n425\n00:21:09.240 --> 00:21:11.680\nEven on the client side,\nit's got troubleshooting tools here for\n\n426\n00:21:11.680 --> 00:21:15.630\nthe end users, so they can run\nthe client connectivity analyzer.\n\n427\n00:21:15.630 --> 00:21:18.610\nAnd it'll tell you like, hey you got\na firewall here blocking connectivity or\n\n428\n00:21:18.610 --> 00:21:20.440\nwhatever, and\nit'll help you identify that.\n\n429\n00:21:20.440 --> 00:21:22.580\nReally neat stuff,\na great way to troubleshoot.\n\n430\n00:21:24.680 --> 00:21:28.080\nAll right, and so as I watch here my\nqueues are starting to build up, right.\n\n431\n00:21:28.080 --> 00:21:29.980\nI've got some more things appearing.\n\n432\n00:21:29.980 --> 00:21:32.500\nSo some additional messages\npopping up in that queue.\n\n433\n00:21:32.500 --> 00:21:35.860\nAnd that's a great way to identify\nthat you've got a problem, right?\n\n434\n00:21:35.860 --> 00:21:39.010\nIf your queues are growing,\nyou know there's an issue.\n\n435\n00:21:39.010 --> 00:21:41.180\nThey shouldn't be getting bigger,\nthey should shrink.\n\n436\n00:21:41.180 --> 00:21:44.960\nNow, the more traffic your server moves,\nthe bigger these queues might be.\n\n437\n00:21:44.960 --> 00:21:47.640\nIf you're pushing thousands\nof emails per minute,\n\n438\n00:21:47.640 --> 00:21:50.620\nthen you should expect to see\n1,000 emails in your queue, right?\n\n439\n00:21:50.620 --> 00:21:54.090\nBut if you push 50 emails a minute, and\n\n440\n00:21:54.090 --> 00:21:56.550\nyou got 1,000 emails in your queue,\nthen you got a problem.\n\n441\n00:21:56.550 --> 00:21:59.690\nYou got an issue and you've got to\nmake sure that you jump in there and\n\n442\n00:21:59.690 --> 00:22:00.980\nfind out where that hangup is.\n\n443\n00:22:00.980 --> 00:22:03.750\nAnd looking at this error\nis a great way to see it.\n\n444\n00:22:03.750 --> 00:22:07.310\nSo message queues in Exchange,\nfor the most part we ignore them.\n\n445\n00:22:07.310 --> 00:22:10.080\nWe don't even think about it,\nit's all automatic in the background.\n\n446\n00:22:10.080 --> 00:22:12.920\nThe front end transport service and\nthe mailbox transport service don't\n\n447\n00:22:12.920 --> 00:22:16.140\neven use queues,\nthe hub transport service does though.\n\n448\n00:22:16.140 --> 00:22:19.550\nAnd we wanna watch it just as\nan indicator of a problem,\n\n449\n00:22:19.550 --> 00:22:22.370\nit's a great test to be able to\nsee whether you got any issues.\n\n450\n00:22:22.370 --> 00:22:25.840\nAnd remember from the PowerShell you can\ndo the Get-Queue command, and so you can\n\n451\n00:22:25.840 --> 00:22:28.870\nview it from PowerShell too if you want to\nautomate it or create your own reports.\n\n452\n00:22:28.870 --> 00:22:29.970\nYou can do all sorts of neat stuff.\n\n453\n00:22:29.970 --> 00:22:33.055\nAnd there's plenty of third party products\nout there that monitor your queue\n\n454\n00:22:33.055 --> 00:22:34.380\nlinks also, and so\n\n455\n00:22:34.380 --> 00:22:37.641\nthey can report back and you get just\na wealth of information from there.\n\n456\n00:22:37.641 --> 00:22:39.930\nAll right.\n\n457\n00:22:39.930 --> 00:22:43.335\nI think that's about all\nI've got on the queues,\n\n458\n00:22:43.335 --> 00:22:46.990\njust be aware that there's a number of\ndifferent errors that can appear there and\n\n459\n00:22:46.990 --> 00:22:48.350\nwe just need to keep an eye on it.\n\n460\n00:22:48.350 --> 00:22:50.430\nIt's a great troubleshooting utility.\n\n461\n00:22:50.430 --> 00:22:52.010\nAll right, well this is a great\nplace to wrap this one up.\n\n462\n00:22:52.010 --> 00:22:52.810\nSo in this episode,\n\n463\n00:22:52.810 --> 00:22:56.490\nwe got a chance to see the email\nqueues inside of Microsoft Exchange.\n\n464\n00:22:56.490 --> 00:22:59.960\nWe saw how to use the Exchange\ntoolbox to access the queue viewer and\n\n465\n00:22:59.960 --> 00:23:01.740\nsee those message queues.\n\n466\n00:23:01.740 --> 00:23:05.160\nAnd we got to take a look at\nMicrosoft's test connectivity website,\n\n467\n00:23:05.160 --> 00:23:08.570\nwhere we can evaluate our system, our\nconnectivity, whether things are working.\n\n468\n00:23:08.570 --> 00:23:12.200\nAnd we can see it from Microsoft's\nperspective, which is useful for testing\n\n469\n00:23:12.200 --> 00:23:17.780\nas well as deciphering those email message\nheaders to see information about them,\n\n470\n00:23:17.780 --> 00:23:20.380\nwhere they come from, where they're\ngoing to and all that other information.\n\n471\n00:23:20.380 --> 00:23:23.520\nSo, just some great resources\nright there available for you.\n\n472\n00:23:23.520 --> 00:23:26.830\nSo, that's about it for this episode,\nI hope you guys enjoyed it.\n\n473\n00:23:26.830 --> 00:23:30.692\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n474\n00:23:30.692 --> 00:23:36.860\n[MUSIC].\n\n",
          "vimeoId": "136729104"
        }
      ],
      "title": "Mail Flow"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don explains Microsoft Exchange Edge Transport Servers and their purpose. He then walks the viewers through the prerequisites and installation process.",
          "length": "1394",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server-082115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server-082115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server-082115-1-sm.jpg",
          "title": "Installing Edge Servers",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.227\n[MUSIC]\n\n2\n00:00:10.227 --> 00:00:13.310\nAll right good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:13.310 --> 00:00:15.451\nwelcome back to another\nepisode of ITProTv.\n\n4\n00:00:15.451 --> 00:00:19.815\nI'm your host Don Pezet back again with\nanother episode of Microsoft Exchange\n\n5\n00:00:19.815 --> 00:00:21.090\n2013.\n\n6\n00:00:21.090 --> 00:00:25.980\nIn this episode, we're going to be\ntaking a look at Edge Transport Servers.\n\n7\n00:00:25.980 --> 00:00:29.770\nWhen Exchange 2013 first came out,\nthere were only two roles.\n\n8\n00:00:29.770 --> 00:00:33.275\nThere was the mailbox server role and\nthe client access server role.\n\n9\n00:00:33.275 --> 00:00:38.020\nAnd then when Service Pack One came out,\nthey reintroduced one of the older roles\n\n10\n00:00:38.020 --> 00:00:42.230\nfrom Exchange, kind of brought it back\ncalled the Edge Transport role, all right?\n\n11\n00:00:42.230 --> 00:00:45.550\nAnd the reason they didn't roll it out\nin the very beginning was that you could\n\n12\n00:00:45.550 --> 00:00:48.700\nactually use Exchange 2012 Edge Transport\nServers just fine with Exchange 2013.\n\n13\n00:00:48.700 --> 00:00:53.460\nAnd part of the reason for\nthat was how these servers work.\n\n14\n00:00:53.460 --> 00:00:56.880\nSo let's talk a little bit about how an\nedge transport server works to see why it\n\n15\n00:00:56.880 --> 00:01:00.910\ndidn't really matter if we ran 2010 or\n2013, and to this day it still doesn't\n\n16\n00:01:00.910 --> 00:01:04.630\nreally matter, but you do want to\nrun the latest software if you can.\n\n17\n00:01:04.630 --> 00:01:07.690\nBut let's take a look at a topology and\nI'll show you what I mean.\n\n18\n00:01:07.690 --> 00:01:12.330\nSo here's an example of an exchange\nenvironment where we've got our\n\n19\n00:01:12.330 --> 00:01:16.490\ninternal mail servers, right, our client\naccess server and our mailbox server.\n\n20\n00:01:16.490 --> 00:01:21.100\nNow, when email is coming into our\norganization, it's generally gonna pass\n\n21\n00:01:21.100 --> 00:01:24.550\nto the front-end transport service\non the client access server, and\n\n22\n00:01:24.550 --> 00:01:27.920\nthen go to the hub transport service back\nhere on the mailbox server, all right?\n\n23\n00:01:27.920 --> 00:01:30.860\nAnd then the mailbox server has\nthe mailbox transport service,\n\n24\n00:01:30.860 --> 00:01:33.660\nwhere it actually delivers\nthat content into a mailbox.\n\n25\n00:01:33.660 --> 00:01:36.130\nWell, if it's Internet email,\n\n26\n00:01:36.130 --> 00:01:39.380\nIt can actually go straight to the hub\ntransport server on the mailbox server.\n\n27\n00:01:39.380 --> 00:01:41.790\nWe normally do proxy it through\nthe client access server for\n\n28\n00:01:41.790 --> 00:01:46.110\nsecurity purposes, but security purposes,\nwhat do I mean by that?\n\n29\n00:01:46.110 --> 00:01:48.730\nWell I mean you don't want people directly\n\n30\n00:01:48.730 --> 00:01:52.340\nasking your mailbox server cuz if\nthey could compromise that server\n\n31\n00:01:52.340 --> 00:01:54.760\nin theory they could access\nother people's mailboxes.\n\n32\n00:01:54.760 --> 00:01:57.340\nYou definitely don't want the Internet\nbeing able to access those\n\n33\n00:01:57.340 --> 00:01:58.470\nmailbox servers.\n\n34\n00:01:58.470 --> 00:02:01.290\nSo passing through the client access\nserver gives you an extra layer of\n\n35\n00:02:01.290 --> 00:02:06.040\ndefense, but it's not much of an extra\nlayer, because that client access server,\n\n36\n00:02:06.040 --> 00:02:08.520\nif you think about it,\nit's joined to your domain, right?\n\n37\n00:02:08.520 --> 00:02:11.820\nIt's gotta be joined to the domain,\nbecause Exchange stores its configuration\n\n38\n00:02:11.820 --> 00:02:16.850\nin the Active Directory, and so,\nit's a member of your local area network.\n\n39\n00:02:16.850 --> 00:02:19.680\nIf somebody compromises\nthe client access server,\n\n40\n00:02:19.680 --> 00:02:23.900\nthey could begin to access resources\ninside your network and that would be bad.\n\n41\n00:02:23.900 --> 00:02:29.200\nSo, what an edge transport server does,\nis it sits in between.\n\n42\n00:02:29.200 --> 00:02:33.050\nIt sits in between your secure, internal\nservers, that we don't want the outside\n\n43\n00:02:33.050 --> 00:02:36.730\nworld to get to, and the Internet,\nwhere the bad people are.\n\n44\n00:02:36.730 --> 00:02:39.650\nBad people like all of us\nwatching this show right now.\n\n45\n00:02:39.650 --> 00:02:44.850\nSo the Edge Transport Server is designed\nto sit in your DMZ and to be isolated\n\n46\n00:02:44.850 --> 00:02:49.330\nfrom the network except for the barest\nminimum of communications necessary.\n\n47\n00:02:49.330 --> 00:02:52.982\nNow the Edge Transport Server really\ndoes take security to a high level.\n\n48\n00:02:52.982 --> 00:02:55.616\nFor example,\nit's not even joined to the domain, right?\n\n49\n00:02:55.616 --> 00:02:59.496\nIf somebody compromises the Edge Transport\nServer, it's not joined to the domain.\n\n50\n00:02:59.496 --> 00:03:02.337\nIt can't authenticate against\nany server on the inside.\n\n51\n00:03:02.337 --> 00:03:03.840\nIt's not able to communicate.\n\n52\n00:03:03.840 --> 00:03:05.480\nIt's a dead end.\n\n53\n00:03:05.480 --> 00:03:09.670\nThe Edge Transport server also only\nmaintains very minimal email queues.\n\n54\n00:03:09.670 --> 00:03:12.710\nAn email comes in, it can scan and\n\n55\n00:03:12.710 --> 00:03:17.130\nfilter email right there, and\nthen send it on into the internal network.\n\n56\n00:03:17.130 --> 00:03:20.940\nSo if somebody were to compromise this\nsystem the only email they would have\n\n57\n00:03:20.940 --> 00:03:24.440\naccess to is email that was being\nscanned at that moment as it was being\n\n58\n00:03:24.440 --> 00:03:25.970\ntransmitted through.\n\n59\n00:03:25.970 --> 00:03:28.660\nSo fairly secure from that respect too.\n\n60\n00:03:28.660 --> 00:03:31.910\nAlso, it doesn't even have\na list of user accounts.\n\n61\n00:03:31.910 --> 00:03:34.290\nNow, that might sound kinda weird, right?\n\n62\n00:03:34.290 --> 00:03:36.580\nThis thing is gonna receive email for us.\n\n63\n00:03:36.580 --> 00:03:38.990\nHow does it know who's a good account and\nwho's a bad account?\n\n64\n00:03:38.990 --> 00:03:42.380\nAnd it actually does it\nthrough a really slick system.\n\n65\n00:03:42.380 --> 00:03:47.050\nWhat happens is the Edge Transport Server,\nit's not joined to our domain.\n\n66\n00:03:47.050 --> 00:03:49.120\nSo it doesn't have a view\nof Active Directory.\n\n67\n00:03:49.120 --> 00:03:50.600\nIt doesn't know what\nuser accounts we have.\n\n68\n00:03:50.600 --> 00:03:52.870\nIt doesn't even know\nthe exchange configuration, but\n\n69\n00:03:52.870 --> 00:03:56.510\nit's got to know something, otherwise\nit's not going to be able to do its job.\n\n70\n00:03:56.510 --> 00:04:01.830\nSo it leverages what's called the Active\nDirectory Lightweight Directory Services.\n\n71\n00:04:01.830 --> 00:04:07.390\nWhat the ADLDS does,\nis it lets you run a very\n\n72\n00:04:07.390 --> 00:04:11.680\nsmall selection of data from\nthe active directory, all right?\n\n73\n00:04:11.680 --> 00:04:14.320\nThe example I gave is like a phone book,\nright?\n\n74\n00:04:14.320 --> 00:04:17.230\nIf you get a phone book,\nyou come here to Gainesville, Florida and\n\n75\n00:04:17.230 --> 00:04:19.900\ngrab the Gainesville phonebook,\nif you remember phonebook's,\n\n76\n00:04:19.900 --> 00:04:21.980\nthe big paper things that\nhave phone numbers in them.\n\n77\n00:04:21.980 --> 00:04:23.170\nSome of you might not.\n\n78\n00:04:23.170 --> 00:04:25.720\nBut if you crack open a phonebook\nwhat do you have in there?\n\n79\n00:04:25.720 --> 00:04:27.880\nYou have a person's name,\nyou have their address, and\n\n80\n00:04:27.880 --> 00:04:30.560\nyou have their phone number,\nand that's it, right?\n\n81\n00:04:30.560 --> 00:04:34.980\nYou just have enough information to be\nable to find that person and talk to them.\n\n82\n00:04:34.980 --> 00:04:37.080\nBut you don't know what\ntheir hair color is.\n\n83\n00:04:37.080 --> 00:04:38.260\nYou don't know how old they are.\n\n84\n00:04:38.260 --> 00:04:40.200\nYou don't know what\nkind of car they drive.\n\n85\n00:04:40.200 --> 00:04:41.250\nThat stuff isn't in there.\n\n86\n00:04:41.250 --> 00:04:43.530\nThe phone book is a very,\nvery simplified version.\n\n87\n00:04:43.530 --> 00:04:45.980\nWell, that's what\nthe Edge Transport Servers do.\n\n88\n00:04:45.980 --> 00:04:50.490\nThey have a very, very simplified\nversion of the active directory.\n\n89\n00:04:50.490 --> 00:04:53.780\nIn fact it's so simplified that it\nreally just contains a couple of things.\n\n90\n00:04:53.780 --> 00:04:57.980\nIt contains what mailbox servers\nit needs to talk to, right?\n\n91\n00:04:57.980 --> 00:05:01.100\nWhen email comes in,\nit needs to know who to send the email to.\n\n92\n00:05:01.100 --> 00:05:04.360\nSo it has a list of mailbox servers\nthat it can talk to, right, and\n\n93\n00:05:04.360 --> 00:05:06.340\nit uses the GUID's of the servers.\n\n94\n00:05:06.340 --> 00:05:08.490\nSo it doesn't even really\nknow the name of the server.\n\n95\n00:05:08.490 --> 00:05:10.470\nIt doesn't know that it\nLab dash mailbox 01.\n\n96\n00:05:10.470 --> 00:05:13.300\nIt just sees the GUID for that server.\n\n97\n00:05:13.300 --> 00:05:17.280\nSo, if somebody were to compromise\nthe system, they would just see GUID's.\n\n98\n00:05:17.280 --> 00:05:22.170\nAnd then as far as email addresses, it\ndoesn't have them, which is kind of cool.\n\n99\n00:05:22.170 --> 00:05:23.990\nIf somebody hacks into\nan edge transport server,\n\n100\n00:05:23.990 --> 00:05:26.030\nthey can't figure out\nyour email address list.\n\n101\n00:05:26.030 --> 00:05:31.000\nWhat it does is your mailbox\nserver on the back end takes all\n\n102\n00:05:31.000 --> 00:05:36.140\nthe email addresses from Active Directory\nand Exchange, and it hashes them.\n\n103\n00:05:36.140 --> 00:05:40.430\nIt does a SHA-256 one way hash,\nand it takes those hash values and\n\n104\n00:05:40.430 --> 00:05:42.680\nit sends them to\nthe Edge Transport Server.\n\n105\n00:05:42.680 --> 00:05:46.380\nAnd so when an edge transport server\nreceives and email and it's to deposit or\n\n106\n00:05:46.380 --> 00:05:48.530\nto Don@itpro.tv, right?\n\n107\n00:05:48.530 --> 00:05:51.980\nIt takes take that name, Don@itpro.tv,\nand it does a SHA-256 hash.\n\n108\n00:05:51.980 --> 00:05:58.340\nAnd then it looks at the hash list from\nthe servers inside, and looks for a match.\n\n109\n00:05:58.340 --> 00:06:02.290\nIf it finds a match, that mailbox exists\non the inside and we need to process it.\n\n110\n00:06:02.290 --> 00:06:04.940\nIf it doesn't find a match,\nit throws the email away.\n\n111\n00:06:04.940 --> 00:06:05.982\nSorry, recipient not found.\n\n112\n00:06:05.982 --> 00:06:09.690\nBut the Edge Transport Server doesn't\nactually know what my email address is.\n\n113\n00:06:09.690 --> 00:06:14.150\nIt doesn't know that I'm don@itpro.tv,\nit just sees that SHA-256 hash.\n\n114\n00:06:14.150 --> 00:06:18.150\nSo, another way to have that security,\nif this server gets compromised, somebody\n\n115\n00:06:18.150 --> 00:06:21.720\ncan't lift our usernames out of it, they\ncan't lift out e-mail addresses out of it.\n\n116\n00:06:21.720 --> 00:06:23.310\nThey just see a big hash table.\n\n117\n00:06:23.310 --> 00:06:24.740\nRight, and that's that.\n\n118\n00:06:24.740 --> 00:06:26.320\nSo, pretty cool, right?\n\n119\n00:06:26.320 --> 00:06:28.940\nThey really wanted to\nmake this thing as risk\n\n120\n00:06:28.940 --> 00:06:32.460\nfree as possible to stick in between us\nand the network, and the internet, right?\n\n121\n00:06:32.460 --> 00:06:36.350\nNow, you don't have to use an Edge\ntransport server, plenty of people don't.\n\n122\n00:06:36.350 --> 00:06:37.640\nInstead of using an Edge transport server,\n\n123\n00:06:37.640 --> 00:06:42.290\nyou might use a third party product,\nlike a Barracuda spam and virus firewall.\n\n124\n00:06:42.290 --> 00:06:44.270\nIt kinda serves the same purpose, right?\n\n125\n00:06:44.270 --> 00:06:48.250\nIt sits in your DMZ, in between the\nInternet and your internal network, and\n\n126\n00:06:48.250 --> 00:06:51.640\nit does filtering before content even\nmakes it inside of your network so\n\n127\n00:06:51.640 --> 00:06:53.220\nthat's kinda cool.\n\n128\n00:06:53.220 --> 00:06:58.170\nBut by doing edge transport servers we've\ngot Microsoft Edge transport servers.\n\n129\n00:06:58.170 --> 00:07:01.080\nWe have Microsoft exchange servers and\nit's all running on top of Windows.\n\n130\n00:07:01.080 --> 00:07:02.630\nWe have a common environment, right?\n\n131\n00:07:02.630 --> 00:07:03.370\nWe have a common,\n\n132\n00:07:03.370 --> 00:07:06.680\nconsistent environment with one company\nthat we need to reach out to for support\n\n133\n00:07:06.680 --> 00:07:10.380\nand that's one of the big benefits of\ndoing an Edge transport server like this.\n\n134\n00:07:10.380 --> 00:07:11.260\nAll right.\n\n135\n00:07:11.260 --> 00:07:12.460\nBut it is a weird beast, right?\n\n136\n00:07:12.460 --> 00:07:15.420\nIt's a lot different than the other\nservers, so getting an Edge transport\n\n137\n00:07:15.420 --> 00:07:19.350\nserver installed is a pretty\ninteresting process, all right?\n\n138\n00:07:19.350 --> 00:07:21.550\nThere's a few things we need to do, okay?\n\n139\n00:07:21.550 --> 00:07:24.050\nStep one, we need to get a server, right?\n\n140\n00:07:24.050 --> 00:07:26.990\nSo you get a physical server and\nyou provision it in your DMZ, so\n\n141\n00:07:26.990 --> 00:07:30.990\nwe're gonna deploy that server here in our\nDMZ, so not on our local area network.\n\n142\n00:07:30.990 --> 00:07:34.670\nIt's gonna start in this separate network\nwhere we expose it to the Internet.\n\n143\n00:07:34.670 --> 00:07:37.610\nThen we need to configure\nsome firewall rules.\n\n144\n00:07:37.610 --> 00:07:38.250\nOkay.\n\n145\n00:07:38.250 --> 00:07:39.560\nNotice how I've got two firewalls.\n\n146\n00:07:39.560 --> 00:07:41.920\nYou might have two firewalls,\nyou might have one firewall, but\n\n147\n00:07:41.920 --> 00:07:44.570\nhopefully you have at least\na firewall in your environment.\n\n148\n00:07:44.570 --> 00:07:48.400\nWe need to allow SMTP port 25 in and\n\n149\n00:07:48.400 --> 00:07:50.940\nout, between the Internet and\nthe Edge Transport server.\n\n150\n00:07:50.940 --> 00:07:51.480\nRight?\n\n151\n00:07:51.480 --> 00:07:53.832\nWe're gonna change our mail\nexchanger records to point to\n\n152\n00:07:53.832 --> 00:07:56.765\nthe Edge Transport Server instead of\npointing to some internal server.\n\n153\n00:07:56.765 --> 00:07:58.660\nSo, the outside world, the Internet,\n\n154\n00:07:58.660 --> 00:08:01.351\nneeds to be able to connect\nto the Edge Transport Server.\n\n155\n00:08:01.351 --> 00:08:04.230\nSo SMTP port 25, or TCB port 25 in and\n\n156\n00:08:04.230 --> 00:08:08.810\nout on our public firewall,\non our WAN connection.\n\n157\n00:08:08.810 --> 00:08:12.470\nOn the LAN side we need the DMZ,\nwe need this Edge Transport Server\n\n158\n00:08:12.470 --> 00:08:17.070\nto be able to communicate with SMTP\nport 25 to our mailbox servers.\n\n159\n00:08:17.070 --> 00:08:20.274\nOkay, not to the client access servers,\nI've kind of got that drawn here cuz I was\n\n160\n00:08:20.274 --> 00:08:23.140\nusing it for another example but,\nif do it that way, there.\n\n161\n00:08:23.140 --> 00:08:25.440\nIt actually connects directly\nto the mailbox server.\n\n162\n00:08:25.440 --> 00:08:28.540\nWe don't need the front end transport\nservice because our Edge Transport Server\n\n163\n00:08:28.540 --> 00:08:30.260\nis the front end transport service.\n\n164\n00:08:30.260 --> 00:08:32.800\nWe need to connect to the hub\ntransport service which is back in our\n\n165\n00:08:32.800 --> 00:08:33.880\nmailbox server.\n\n166\n00:08:33.880 --> 00:08:39.920\nSo we need SMTP TCP port 25 to be\nopen inbound and outbound, okay?\n\n167\n00:08:39.920 --> 00:08:44.380\nInbound, we need the DMZ server to be\nable to send email to the mailbox server.\n\n168\n00:08:44.380 --> 00:08:47.210\nAnd outbound, we need the mailbox\nserver to be able to relay\n\n169\n00:08:47.210 --> 00:08:49.620\nthrough the Edge Transport Server\non the way out.\n\n170\n00:08:49.620 --> 00:08:51.520\nYou don't have to do that,\nbut it's good practice.\n\n171\n00:08:51.520 --> 00:08:54.790\nIt's a good practice to be sending your\nin and out through this one place,\n\n172\n00:08:54.790 --> 00:08:58.190\nthat way we can set up filtering\nrules one place, right.\n\n173\n00:08:59.510 --> 00:09:03.492\nThe other thing is there's one extra\nspecial port that we have to approve,\n\n174\n00:09:03.492 --> 00:09:04.390\nall right?\n\n175\n00:09:04.390 --> 00:09:06.770\nSMTP, we know we need that,\ncuz that's how email comes in, and\n\n176\n00:09:06.770 --> 00:09:08.870\nthat's how email goes out,\nso we gotta have those.\n\n177\n00:09:08.870 --> 00:09:14.750\nBut, the Edge Transport Server,\nit can't see the Active Directory, right?\n\n178\n00:09:14.750 --> 00:09:16.880\nIt's using\nthe Lightweight Directory Service, and\n\n179\n00:09:16.880 --> 00:09:20.920\nit's gonna populate that with data,\nlike those hashes for user accounts.\n\n180\n00:09:20.920 --> 00:09:22.800\nSo anytime I add a new mailbox back here,\n\n181\n00:09:22.800 --> 00:09:25.700\nthe Edge Transport Server has\nto find out about it, okay?\n\n182\n00:09:25.700 --> 00:09:29.510\nBut we don't want\nthe Edge Transport Server to reach\n\n183\n00:09:29.510 --> 00:09:31.280\ninto our network to get that data.\n\n184\n00:09:31.280 --> 00:09:33.600\nWe don't want that, cuz then if\nsomebody compromised the server,\n\n185\n00:09:33.600 --> 00:09:35.550\nthey could reach in and get the data.\n\n186\n00:09:35.550 --> 00:09:42.270\nSo what we need to do is approve for the\nmailboxes to push the changes to the DMZ.\n\n187\n00:09:42.270 --> 00:09:47.610\nIn other words, an internal server can\nsend data to the Edge Transport Server,\n\n188\n00:09:47.610 --> 00:09:49.710\nthe Edge Transport Server can't talk back.\n\n189\n00:09:49.710 --> 00:09:52.483\nAnd that means that if the Edge Transport\nServer gets compromised, they can't send\n\n190\n00:09:52.483 --> 00:09:55.233\ndata back to change the configuration,\nthey can't manipulate things like that.\n\n191\n00:09:55.233 --> 00:09:59.120\nThey can just damage the Edge Server,\nthey can't do anything else, right?\n\n192\n00:09:59.120 --> 00:10:04.940\nBut we can make changes all we want on the\ninside and they'll push to the DMZ server.\n\n193\n00:10:04.940 --> 00:10:10.409\nNow all of that's done on TCP port 50636.\n\n194\n00:10:10.409 --> 00:10:15.714\nSo 50,636, it's a port that Microsoft\npicked, it's not a registered port.\n\n195\n00:10:15.714 --> 00:10:20.120\nIt's just one of the freely available\nones that they use, so 50636.\n\n196\n00:10:20.120 --> 00:10:26.090\nYou want it outbound, the mailbox server\nto the Edge Transport Server, right?\n\n197\n00:10:26.090 --> 00:10:28.950\nNot the other way around, don't do\nEdge Transport Server back in, all right?\n\n198\n00:10:28.950 --> 00:10:31.600\nAnd if you have more\nthan one mailbox server,\n\n199\n00:10:31.600 --> 00:10:35.030\nthey all need to be able to connect\nto the Edge Transport Server.\n\n200\n00:10:35.030 --> 00:10:37.880\nBecause if one fails, another server's\ngotta push those changes, right?\n\n201\n00:10:37.880 --> 00:10:40.590\nSo we need to approve that for\neach one, all right?\n\n202\n00:10:40.590 --> 00:10:44.280\nNow, if you've got\nActive Directory sites configured,\n\n203\n00:10:44.280 --> 00:10:47.140\nthen you've got mailbox servers in\ndifferent sites and you'll likely\n\n204\n00:10:47.140 --> 00:10:49.800\nhave different Edge Transport Servers\nin those different sites.\n\n205\n00:10:49.800 --> 00:10:52.940\nSo when I approve this for the firewall,\nit's all within the same site, right?\n\n206\n00:10:52.940 --> 00:10:56.960\nSo mailbox servers in this site need to be\nable to talk to the Edge Transport Server.\n\n207\n00:10:56.960 --> 00:11:00.210\nIf I have other sites, they don't need to\nbe able to talk to it because their email\n\n208\n00:11:00.210 --> 00:11:04.120\nis gonna come to this site first and\nthen go out to the DMZ.\n\n209\n00:11:04.120 --> 00:11:06.800\nSo think in terms of\nActive Directory sites.\n\n210\n00:11:06.800 --> 00:11:09.830\nSo on the network side, that's one\nof the things that I need to do.\n\n211\n00:11:09.830 --> 00:11:12.310\nSecond, I need to build up my server.\n\n212\n00:11:12.310 --> 00:11:17.369\nNow the server needs to be Windows Server\n2008 R2 or Windows Server 2012.\n\n213\n00:11:17.369 --> 00:11:21.480\nAnd then we can install the Exchange\n2013 system on here and\n\n214\n00:11:21.480 --> 00:11:23.440\nchoose the Edge Transport role.\n\n215\n00:11:23.440 --> 00:11:26.070\nNow you can do it from the command\nline using the setup command, or\n\n216\n00:11:26.070 --> 00:11:27.640\nyou can use the GUI to do it.\n\n217\n00:11:27.640 --> 00:11:30.520\nBut either way there is\none prerequisite we need.\n\n218\n00:11:30.520 --> 00:11:33.330\nRemember we installed Exchange\n2013 in our other episodes,\n\n219\n00:11:33.330 --> 00:11:35.470\nthere were a ton of prerequisites,\nI had to do a lot.\n\n220\n00:11:35.470 --> 00:11:38.287\nWe had to do\nthe Unified Communications Framework,\n\n221\n00:11:38.287 --> 00:11:43.223\nwe had to do .NET Framework 4.5, we had to\ndo the Windows Management Framework 4.0.\n\n222\n00:11:43.223 --> 00:11:46.550\nWe had to do a ton of roles and features.\n\n223\n00:11:46.550 --> 00:11:48.260\nI had a little script\nthat I ran that did that,\n\n224\n00:11:48.260 --> 00:11:50.950\nif you've seen the episode,\nit's a lot of stuff.\n\n225\n00:11:50.950 --> 00:11:53.520\nOn an Edge Transport Server\nthere's only one prerequisite, and\n\n226\n00:11:53.520 --> 00:11:56.040\nthat's the Active Directory\nLightweight Directory Service.\n\n227\n00:11:56.040 --> 00:11:59.160\nSo we need to get that installed\nbefore we can install Exchange.\n\n228\n00:11:59.160 --> 00:12:00.870\nSo let's take a look at that.\n\n229\n00:12:00.870 --> 00:12:04.630\nSo here I am on an Edge Transport Server,\nI just called it LAB-EDGE01.\n\n230\n00:12:04.630 --> 00:12:07.660\nAnd if I look at the server,\nit's just in a work group.\n\n231\n00:12:07.660 --> 00:12:11.000\nI didn't join it to my domain,\nthis is gonna be going in my DMZ so\n\n232\n00:12:11.000 --> 00:12:15.900\ndon't bother joining it to the domain,\nit's just a stand alone server, okay.\n\n233\n00:12:15.900 --> 00:12:19.710\nIt is a good idea to have the server\nwith a static IP address.\n\n234\n00:12:19.710 --> 00:12:23.410\nAnd we actually do need to\nconfigure a little bit of DNS.\n\n235\n00:12:23.410 --> 00:12:26.590\nBasically the Edge Transport Server,\nremember how I said we need TCP\n\n236\n00:12:26.590 --> 00:12:31.840\nport 25 to be able to send SMTP traffic\nto the mailbox servers on the inside?\n\n237\n00:12:31.840 --> 00:12:36.640\nOur Edge Transport Server needs to\nbe able to resolve the DNS name\n\n238\n00:12:36.640 --> 00:12:39.550\nof our mailbox servers, and\nthe reverse needs to be true also.\n\n239\n00:12:39.550 --> 00:12:43.940\nThe mailbox servers need to be\nable to resolve the DNS entry for\n\n240\n00:12:43.940 --> 00:12:45.200\nour Edge Transport Server.\n\n241\n00:12:45.200 --> 00:12:49.400\nSo we probably need to have a static IP so\nwe can do DNS entries for that.\n\n242\n00:12:49.400 --> 00:12:52.450\nNow on mine, this is a default install so\nI'm in a work group and\n\n243\n00:12:52.450 --> 00:12:53.690\nI have a DHCP address.\n\n244\n00:12:53.690 --> 00:12:58.080\nSo I'm gonna change that, I'm gonna come\nin here and modify my IP address and\n\n245\n00:12:58.080 --> 00:13:00.300\nI'm gonna statically assign it.\n\n246\n00:13:00.300 --> 00:13:02.750\nSo I'll just punch that in here and\n\n247\n00:13:02.750 --> 00:13:07.260\nI'll make this one, we'll do .14 and\nI'll punch in its gateway.\n\n248\n00:13:07.260 --> 00:13:10.840\nNow, your DMZ network probably has a\ndifferent address, so you'll have to punch\n\n249\n00:13:10.840 --> 00:13:15.010\nin IP address that's appropriate for\nyours, and a DNS server you can use.\n\n250\n00:13:15.010 --> 00:13:17.850\nAnd that DNS server needs to be able to\nresolve those internal server names, so\n\n251\n00:13:17.850 --> 00:13:20.220\nyou might need to set up\na dedicated DNS server for this.\n\n252\n00:13:20.220 --> 00:13:23.870\nI'm just gonna use an internal one,\nall right.\n\n253\n00:13:23.870 --> 00:13:28.510\nNow, on the DNS side, I need a DNS entry,\nand I need to have a name and\n\n254\n00:13:28.510 --> 00:13:31.280\na domain, a fully qualified domain name.\n\n255\n00:13:31.280 --> 00:13:34.428\nNow, normally we get that domain name from\nbeing joined to the Active Directory.\n\n256\n00:13:34.428 --> 00:13:38.870\nI'm not joined to the Active Directory so\nI'm gonna need to set that on the server.\n\n257\n00:13:38.870 --> 00:13:42.630\nSo, I'm gonna go in here and\ntake my server name.\n\n258\n00:13:42.630 --> 00:13:43.840\nI've got this computer name up here and\n\n259\n00:13:43.840 --> 00:13:46.810\nI'll click on that and\nI'm gonna go into Change.\n\n260\n00:13:46.810 --> 00:13:48.300\nAnd I'm not gonna change\nthe computer name but\n\n261\n00:13:48.300 --> 00:13:52.350\nif I hit More,\nI can set my primary DNS suffix.\n\n262\n00:13:52.350 --> 00:13:56.940\nAnd I've been using the ITProTV.net\ndomain so I'll do ITProTV.net.\n\n263\n00:13:56.940 --> 00:14:01.544\nAnd that way my server knows, yeah,\nyou're not joined at the domain, but\n\n264\n00:14:01.544 --> 00:14:05.872\nyour fully qualified name is\nLAB-EDGE01.itprotv.net, okay.\n\n265\n00:14:05.872 --> 00:14:08.937\nSo I'll go ahead and save that.\n\n266\n00:14:08.937 --> 00:14:10.850\nAnd now I've got it set, all right?\n\n267\n00:14:10.850 --> 00:14:13.440\nNow I do need to restart for\nthat to take effect, so I'll go ahead and\n\n268\n00:14:13.440 --> 00:14:14.310\nlet it restart.\n\n269\n00:14:14.310 --> 00:14:16.320\nWell, actually I could do one more thing.\n\n270\n00:14:16.320 --> 00:14:18.920\nI'm gonna do restart later, because\n\n271\n00:14:18.920 --> 00:14:21.890\nI need to install the Active Directory\nLightweight Directory Services role.\n\n272\n00:14:21.890 --> 00:14:23.580\nAnd so I can do that real quick and\nthen reboot,\n\n273\n00:14:23.580 --> 00:14:25.520\nand kinda kill two birds with one stone.\n\n274\n00:14:25.520 --> 00:14:27.740\nSo I'll go up here to Manage\nin Add Roles and Features.\n\n275\n00:14:29.260 --> 00:14:33.530\nAnd in my Role list, if I can ever get it,\nhere we go, you can look down and\n\n276\n00:14:33.530 --> 00:14:36.240\nthere's the Active Directory\nLightweight Directory Services.\n\n277\n00:14:36.240 --> 00:14:40.310\nI'm just gonna check that one off and\nwe'll add that feature and\n\n278\n00:14:40.310 --> 00:14:41.020\nwe'll let it get installed.\n\n279\n00:14:41.020 --> 00:14:42.862\nI'm not checking anything else,\njust kinda letting it go.\n\n280\n00:14:42.862 --> 00:14:46.565\nThat's the only prerequisite that I had so\nI'll get that installed and\n\n281\n00:14:46.565 --> 00:14:48.799\nthen we can reboot the server, all right?\n\n282\n00:14:48.799 --> 00:14:54.499\nThe install's pretty quick cuz LDS is\npretty lightweight, thus the name.\n\n283\n00:14:54.499 --> 00:14:57.599\nSo there's not much for\nit to install and get going.\n\n284\n00:14:57.599 --> 00:15:01.671\nBut while we're waiting on that I can\njump over to my domain controller,\n\n285\n00:15:01.671 --> 00:15:03.780\nwhich is parked over here.\n\n286\n00:15:03.780 --> 00:15:07.020\nAnd I can go into DNS and\nI can start to set up my DNS entries.\n\n287\n00:15:07.020 --> 00:15:10.696\nNow, I could have set up dynamic DNS\nregistration, but we're not normally\n\n288\n00:15:10.696 --> 00:15:14.384\ngonna open that on the firewall for\nour Edge Transport Server to get inside.\n\n289\n00:15:14.384 --> 00:15:16.555\nSo you're normally gonna have\nto manually create these.\n\n290\n00:15:16.555 --> 00:15:20.595\nAnd so if I go in my forward lookup zone,\nI can see my internal servers.\n\n291\n00:15:20.595 --> 00:15:25.018\nAnd I'm just gonna add a new\nentry in here, a new A record,\n\n292\n00:15:25.018 --> 00:15:29.175\nwhich I'll call LAB-EDGE01.ITProTV.net,\nand\n\n293\n00:15:29.175 --> 00:15:34.260\nI'll punch in its IP address\nthat we assign to it, all right.\n\n294\n00:15:34.260 --> 00:15:37.150\nAnd what that's gonna do is it's gonna\nmake it where my internal servers,\n\n295\n00:15:37.150 --> 00:15:41.120\nmy mailbox servers, will be able to\nresolve the Edge Transport Server by name.\n\n296\n00:15:41.120 --> 00:15:44.020\nAnd my Edge Server pointing here\nwill be able to resolve my internal\n\n297\n00:15:44.020 --> 00:15:45.010\nservers by name.\n\n298\n00:15:45.010 --> 00:15:47.390\nSo now we've got name resolution,\nthat's really important,\n\n299\n00:15:47.390 --> 00:15:48.522\notherwise this whole thing doesn't work.\n\n300\n00:15:48.522 --> 00:15:53.030\nAll right, so back here, this one's\nfinished installing, we can go ahead and\n\n301\n00:15:53.030 --> 00:15:54.119\nrestart this guy.\n\n302\n00:15:54.119 --> 00:15:59.678\nAnd once it restarts, it's got its\nIP address, it's got its DNS name.\n\n303\n00:15:59.678 --> 00:16:02.729\nThen we're ready to install Exchange,\nokay?\n\n304\n00:16:02.729 --> 00:16:06.760\nNow when we install Exchange,\nthere is something we need to remember.\n\n305\n00:16:06.760 --> 00:16:10.730\nWe've got three roles in Exchange,\nClient Access server, Mailbox server, and\n\n306\n00:16:10.730 --> 00:16:12.120\nEdge Transport server.\n\n307\n00:16:12.120 --> 00:16:15.640\nAnd in other episodes, I mentioned how\nyou could have a server be a dedicated\n\n308\n00:16:15.640 --> 00:16:18.650\nClient Access Server, or a dedicated\nMailbox Server, or it could be both.\n\n309\n00:16:18.650 --> 00:16:21.310\nIt could be the Client Access and\nMailbox server.\n\n310\n00:16:21.310 --> 00:16:25.290\nBut Edge Transport,\nalways has to be alone, all right.\n\n311\n00:16:25.290 --> 00:16:28.035\nIf you install\nthe Edge Transport Service on a server,\n\n312\n00:16:28.035 --> 00:16:30.670\nit cannot be a Client Access or\nMailbox server also.\n\n313\n00:16:30.670 --> 00:16:33.338\nIt can only be Edge Transport and\nthat's because it's supposed to be\n\n314\n00:16:33.338 --> 00:16:35.730\nstuck out in the DMZ, and\nit's supposed to be secure.\n\n315\n00:16:35.730 --> 00:16:37.836\nIf you install these other\nroles we start to lose that.\n\n316\n00:16:37.836 --> 00:16:40.910\nThey have to be joined to the Active\nDirectory, Edge Transport doesn't.\n\n317\n00:16:40.910 --> 00:16:45.572\nNow, you can join your Edge Transport\nserver to the Active Directory if you\n\n318\n00:16:45.572 --> 00:16:46.170\nwant to.\n\n319\n00:16:46.170 --> 00:16:48.460\nIt's not really recommended.\n\n320\n00:16:48.460 --> 00:16:51.460\nWe're going for security here,\nbut you can, it'll do that.\n\n321\n00:16:51.460 --> 00:16:53.092\nBut it does have to be by itself.\n\n322\n00:16:53.092 --> 00:16:57.317\nAll right, so that server is rebooted,\nand when I get logged back into it,\n\n323\n00:16:57.317 --> 00:16:59.412\nnow I'm ready to install Exchange.\n\n324\n00:16:59.412 --> 00:17:03.625\nAll right, so from here I can launch\nmy Exchange installation disc, and\n\n325\n00:17:03.625 --> 00:17:05.292\nI'll do it through the GUI.\n\n326\n00:17:05.292 --> 00:17:07.359\nFrom the command line\nif you just setup.exe,\n\n327\n00:17:07.359 --> 00:17:09.162\nit's got some command line modifiers.\n\n328\n00:17:09.162 --> 00:17:12.996\nSo you can say /r: and\nthat's gonna tell it to install a role and\n\n329\n00:17:12.996 --> 00:17:17.912\nthen you just et for Edge Transport and\nthat'll install the Edge Transport role.\n\n330\n00:17:17.912 --> 00:17:21.872\nBut here I'm just gonna do it through the\nGUI where it's a nice little check box.\n\n331\n00:17:21.872 --> 00:17:26.363\nNow if I pick Client Access or\nif I pick the Mailbox role,\n\n332\n00:17:26.363 --> 00:17:29.622\nit's not gonna me pick Edge Transport.\n\n333\n00:17:29.622 --> 00:17:33.263\nBut once I'm picking Edge Transport it\nwon't let me Client Access or Mailbox, so\n\n334\n00:17:33.263 --> 00:17:36.712\nit kinda saves you from making that\nmistake, but it's not that big of a deal.\n\n335\n00:17:36.712 --> 00:17:40.582\nHere it's just copying over some files and\ngetting those cached and ready.\n\n336\n00:17:40.582 --> 00:17:45.082\nAnd then as soon as it's done it's gonna\nask about some default settings as far as\n\n337\n00:17:45.082 --> 00:17:47.082\nthe customer experience program.\n\n338\n00:17:47.082 --> 00:17:50.980\nAnd then I'll be able to pick my roles and\nmove from there.\n\n339\n00:17:50.980 --> 00:17:55.050\nIf you haven't installed LDS, we'll\nget a red flag telling us it's missing\n\n340\n00:17:55.050 --> 00:17:57.990\nthe requirement and we can go and\ncorrect it and get it done.\n\n341\n00:17:57.990 --> 00:18:02.120\nSo if you forget it it'll keep you honest.\n\n342\n00:18:02.120 --> 00:18:05.250\nAll right, so here it's just getting\nthings ready to launch that install and\n\n343\n00:18:05.250 --> 00:18:05.970\nthen we'll get installed.\n\n344\n00:18:05.970 --> 00:18:09.350\nNow when you install the Edge Transport\nserver it can't see the AD.\n\n345\n00:18:09.350 --> 00:18:10.420\nIt's not joined at the domain.\n\n346\n00:18:10.420 --> 00:18:14.460\nSo it's up, it's running but\nit's completely useless.\n\n347\n00:18:14.460 --> 00:18:17.000\nSo once the install's actually\ndone we're gonna have to\n\n348\n00:18:17.000 --> 00:18:18.340\nconnect it to our internal environment.\n\n349\n00:18:18.340 --> 00:18:20.960\nSo there's a lot more work than\njust doing the basic install.\n\n350\n00:18:20.960 --> 00:18:24.760\nAll right, I'm gonna agree to my licensing\nagreement and I'll use recommended\n\n351\n00:18:24.760 --> 00:18:28.830\nsettings for the experience program and\nthen here's where I get to pick my roles.\n\n352\n00:18:28.830 --> 00:18:32.470\nNow, if I choose Mailbox or\nClient Access, Edge Transport grayed out.\n\n353\n00:18:32.470 --> 00:18:34.610\nIf I choose Edge Transport\nit grays the other ones out.\n\n354\n00:18:34.610 --> 00:18:38.207\nSo I can just be an Edge Transport\nserver and that's what I want, so\n\n355\n00:18:38.207 --> 00:18:39.950\nwe'll go ahead and install it.\n\n356\n00:18:39.950 --> 00:18:43.887\nAnd this is one of that fastest installs\nthat Exchange does because it doesn't need\n\n357\n00:18:43.887 --> 00:18:47.656\nmailbox databases, it doesn't need\nthe special services in the background,\n\n358\n00:18:47.656 --> 00:18:50.830\nit doesn't need unified communication,\nit doesn't need IaaS.\n\n359\n00:18:50.830 --> 00:18:55.184\nIt just needs LDS, some mail queues and\nthe SMTP service, so it's gonna get\n\n360\n00:18:55.184 --> 00:19:00.250\ninstalled, and then I'll be up and\nrunning as an Edge Transport server.\n\n361\n00:19:00.250 --> 00:19:02.120\nIt's also gonna install\nthe Exchange Management Tools,\n\n362\n00:19:02.120 --> 00:19:04.270\nwhich is kinda nice because\nI'm gonna need those.\n\n363\n00:19:04.270 --> 00:19:05.200\nBecause when this is done,\n\n364\n00:19:05.200 --> 00:19:09.740\nwhat we have to do is generate\nwhat's called an Edge Subscription.\n\n365\n00:19:09.740 --> 00:19:11.420\nWhat's an Edge Subscription?\n\n366\n00:19:11.420 --> 00:19:15.030\nWell if we go back to my diagram here,\nI mentioned how the Mailbox Servers\n\n367\n00:19:15.030 --> 00:19:18.650\nare gonna be allowed to push changes\nto the Edge Transport server.\n\n368\n00:19:18.650 --> 00:19:19.290\nOkay?\n\n369\n00:19:19.290 --> 00:19:22.030\nWell, that's what called\nan Edge Subscription.\n\n370\n00:19:22.030 --> 00:19:25.860\nThe Edge Server will subscribe\nto receiving those changes.\n\n371\n00:19:25.860 --> 00:19:30.000\nIt basically creates a key,\nlike a private key,\n\n372\n00:19:30.000 --> 00:19:35.600\nto be able to authenticate and\nwe put that key on our Mailbox servers.\n\n373\n00:19:35.600 --> 00:19:38.890\nAnd the Mailbox servers can then send\nchanges to the Edge Transport server and\n\n374\n00:19:38.890 --> 00:19:41.220\nit looks at the key and\ndetermines whether valid or not.\n\n375\n00:19:41.220 --> 00:19:44.810\nAnd if it's valid, it applies the changes\nand if it's not valid it rejects them, so\n\n376\n00:19:44.810 --> 00:19:46.830\nit has a basic degree of security.\n\n377\n00:19:46.830 --> 00:19:48.600\nBut we've got to set that up.\n\n378\n00:19:48.600 --> 00:19:51.290\nAnd then once we've got\nthe Edge Subscription in place,\n\n379\n00:19:51.290 --> 00:19:53.906\nwe can start up what's called EdgeSync.\n\n380\n00:19:53.906 --> 00:19:58.800\nAnd with EdgeSync, the Mailbox servers\nwill start to synchronize changes out\n\n381\n00:19:58.800 --> 00:20:00.010\nto the Edge Transport server.\n\n382\n00:20:00.010 --> 00:20:02.180\nAll right, now how does that work?\n\n383\n00:20:02.180 --> 00:20:05.510\nWell there's actually two different things\nthat we're replicating when we send out to\n\n384\n00:20:05.510 --> 00:20:06.810\nthe Edge Transport server.\n\n385\n00:20:06.810 --> 00:20:10.254\nThe first part is our basic\nserver configuration and\n\n386\n00:20:10.254 --> 00:20:14.330\ninformation there,\nthings like what are accepted domains.\n\n387\n00:20:14.330 --> 00:20:16.794\nIf you've got five different\ndomains in Exchange,\n\n388\n00:20:16.794 --> 00:20:19.340\nthe Edge Transport server\nneeds to know that.\n\n389\n00:20:19.340 --> 00:20:22.940\nCuz any other domain it's gonna\nreject as an unauthorized relay.\n\n390\n00:20:22.940 --> 00:20:25.800\nSo that data is being\nsynchronized once every hour, so\n\n391\n00:20:25.800 --> 00:20:29.428\nevery one hour the Mailbox server\nis sending that data up, okay.\n\n392\n00:20:29.428 --> 00:20:35.480\nBut then there's the recipient data,\nall the mailboxes that we have.\n\n393\n00:20:35.480 --> 00:20:37.810\nWhen you create a mailbox,\nthat has to get hashed and\n\n394\n00:20:37.810 --> 00:20:40.310\nhas to get sent up to\nthe Edge Transport server, all right.\n\n395\n00:20:40.310 --> 00:20:43.200\nThat happen every four hours, all right.\n\n396\n00:20:43.200 --> 00:20:45.550\nEvery four hours,\nthat's kind of a long time.\n\n397\n00:20:45.550 --> 00:20:48.920\nThat means it's only happening,\nwhat is that, six times a day.\n\n398\n00:20:48.920 --> 00:20:52.320\nSo, if you just added a new user\nmailbox and you need it to be active,\n\n399\n00:20:52.320 --> 00:20:55.050\nright now you're gonna have to wait.\n\n400\n00:20:55.050 --> 00:20:57.230\nIt depends on where\nyou're at in that time.\n\n401\n00:20:57.230 --> 00:21:00.400\nIt might be another four hours before it\nreplicates, it might be another two hours,\n\n402\n00:21:00.400 --> 00:21:02.230\nyou don't know where\nyou are in that window.\n\n403\n00:21:02.230 --> 00:21:06.450\nSo we can always force that subscription\nto happen, force that sync to happen.\n\n404\n00:21:06.450 --> 00:21:08.570\nBut you've got the Edge Subscription.\n\n405\n00:21:08.570 --> 00:21:11.420\nThat's the authenticated connection that\nwe build between the Mailbox servers and\n\n406\n00:21:11.420 --> 00:21:12.580\nthe Edge Transport server.\n\n407\n00:21:12.580 --> 00:21:16.520\nAnd then you've got EdgeSync, which is\nactually synchronizing that stuff along.\n\n408\n00:21:16.520 --> 00:21:18.880\nSo we'll get a chance to see that.\n\n409\n00:21:18.880 --> 00:21:22.270\nNow in the chat room we got the question,\ndoes it need to be set up on both servers?\n\n410\n00:21:22.270 --> 00:21:23.060\nDo they need to be running?\n\n411\n00:21:24.110 --> 00:21:28.340\nWhat you do is you generate\nthe subscription on your Edge server and\n\n412\n00:21:28.340 --> 00:21:29.340\nthen it creates a file.\n\n413\n00:21:29.340 --> 00:21:32.090\nAnd you take that file to\nyour internal Mailbox server.\n\n414\n00:21:32.090 --> 00:21:35.510\nAnd you can pick any Mailbox\nserver you want in your site, and\n\n415\n00:21:35.510 --> 00:21:37.800\nyou import it there, and\nthat's what creates the subscription.\n\n416\n00:21:37.800 --> 00:21:42.027\nNow, when you do that it'll create\nthe subscription on all the mailbox\n\n417\n00:21:42.027 --> 00:21:43.374\nservers in that site.\n\n418\n00:21:43.374 --> 00:21:47.928\nAll right, but if you add another mailbox\nserver in the future in that site you'll\n\n419\n00:21:47.928 --> 00:21:52.614\nneed to rerun it you'll need to re-import\nthat file again because it won't add it to\n\n420\n00:21:52.614 --> 00:21:53.874\nnew Mailbox servers.\n\n421\n00:21:53.874 --> 00:21:56.829\nNow you might not care about that\nif you've already got five servers,\n\n422\n00:21:56.829 --> 00:22:00.235\nsending out to the Edge Transport Server\nthat's more then enough you don't need\n\n423\n00:22:00.235 --> 00:22:01.254\nthat sixth one to do it.\n\n424\n00:22:01.254 --> 00:22:04.886\nBut if you only had one before and now\nyou're adding a second Mailbox server for\n\n425\n00:22:04.886 --> 00:22:08.370\nredundancy, well, you'll want that\none to have the edge subscription.\n\n426\n00:22:08.370 --> 00:22:09.550\nSo you'll just need to re-import the file.\n\n427\n00:22:09.550 --> 00:22:12.750\nYou don't have to regenerate the file, you\ncan just re-import the same file again and\n\n428\n00:22:12.750 --> 00:22:13.560\nit'll set those up.\n\n429\n00:22:14.580 --> 00:22:16.000\nSo at this point\nthe install's gonna run and\n\n430\n00:22:16.000 --> 00:22:18.630\nwe're gonna watch this little\nblue bar creep across the screen.\n\n431\n00:22:18.630 --> 00:22:21.340\nAnd when it's done we'll need\nto get our subscription set up.\n\n432\n00:22:21.340 --> 00:22:23.345\nNow, I don't wanna bore\nyou guys with this and\n\n433\n00:22:23.345 --> 00:22:26.080\nthey're actually kinda running a little\nshort on time in this episode anyway.\n\n434\n00:22:26.080 --> 00:22:27.020\nSo why don't we do this?\n\n435\n00:22:27.020 --> 00:22:30.750\nWhy don't we wrap up this episode here,\nand we'll do a part two.\n\n436\n00:22:30.750 --> 00:22:34.020\nAnd in part two we'll verify\nthe installation completed, and\n\n437\n00:22:34.020 --> 00:22:35.720\nwe'll go ahead and\nset up that subscription and\n\n438\n00:22:35.720 --> 00:22:38.180\nget it communicating with our\nservers inside of the network.\n\n439\n00:22:38.180 --> 00:22:41.040\nWe'll get a chance to see that process and\nget it all done in action.\n\n440\n00:22:41.040 --> 00:22:46.280\nSo definitely stay tuned for the sequel,\nthe exciting conclusion to this episode.\n\n441\n00:22:46.280 --> 00:22:49.120\nBut for this episode,\nwe'll go ahead and wrap here.\n\n442\n00:22:49.120 --> 00:22:52.250\nWhat we got a chance to see today were\nwhat an Edge Transport server was,\n\n443\n00:22:52.250 --> 00:22:53.840\nwhere it falls in your network, and\n\n444\n00:22:53.840 --> 00:22:57.880\nhow to get the prerequisites taken\ncare of to do that initial install.\n\n445\n00:22:57.880 --> 00:23:00.450\nWe got it all knocked out here so\nwe're ready to move on but\n\n446\n00:23:00.450 --> 00:23:01.960\nwe'll do that in part two.\n\n447\n00:23:01.960 --> 00:23:03.500\nSo I hope you guys enjoyed the episode.\n\n448\n00:23:03.500 --> 00:23:07.250\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n449\n00:23:07.250 --> 00:23:13.730\n[MUSIC]\n\n",
          "vimeoId": "136955390"
        },
        {
          "description": "This episode is the exciting conclusion to the Installing Edge Servers episode. Now that the server is installed, Don demonstrates how to connect the server to the internal network and verify replication between the systems.",
          "length": "1246",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server_pt2-082115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server_pt2-082115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-1-installing_edge_server_pt2-082115-1-sm.jpg",
          "title": "Installing Edge Servers Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.655\n[MUSIC]\n\n2\n00:00:10.655 --> 00:00:13.947\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:13.947 --> 00:00:16.158\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:16.158 --> 00:00:20.342\nI'm your host, Don Pezet, back again with\nanother episode of Microsoft Exchange\n\n5\n00:00:20.342 --> 00:00:22.871\n2013, and not just any old episode, right?\n\n6\n00:00:22.871 --> 00:00:26.764\nThis is the exciting conclusion to\nour two part series on installing\n\n7\n00:00:26.764 --> 00:00:29.649\nthe Edge Transport\nserver in Exchange 2013.\n\n8\n00:00:29.649 --> 00:00:33.817\nIn our last episode, we left off with,\nwell, with the role installing, right?\n\n9\n00:00:33.817 --> 00:00:36.526\nAnd so we had a little blue bar\nkinda creeping across our screen and\n\n10\n00:00:36.526 --> 00:00:37.074\nthat was it.\n\n11\n00:00:37.074 --> 00:00:40.667\nWell, in that episode we talked about\nwhat the Edge Transport server was,\n\n12\n00:00:40.667 --> 00:00:44.160\nand how to get that install going,\nnow we need to make it active.\n\n13\n00:00:44.160 --> 00:00:47.610\nSo once the install finishes,\nyou reboot your server, and\n\n14\n00:00:47.610 --> 00:00:51.040\nnow we've gotta connect it\nto our internal systems.\n\n15\n00:00:51.040 --> 00:00:54.210\nBut remember, the Edge Transport\nserver's supposed to sit in the DMZ, and\n\n16\n00:00:54.210 --> 00:00:57.910\nit's not allowed to reach in and\nmake changes in the inside network.\n\n17\n00:00:57.910 --> 00:01:01.616\nSo what we have to do,\nis we have to generate the subscription\n\n18\n00:01:01.616 --> 00:01:05.904\non our Edge Transport server,\ntake that subscription inside to one of\n\n19\n00:01:05.904 --> 00:01:10.569\nour mailbox servers, and actually\ncreate the subscription on the inside.\n\n20\n00:01:10.569 --> 00:01:13.635\nAnd then that sort of will push the\nchanges back out to the Edge server, so\n\n21\n00:01:13.635 --> 00:01:15.596\nit's kind of a circle, right?\n\n22\n00:01:15.596 --> 00:01:18.782\nWell, when we generate an Edge\nsubscription, what you're really doing,\n\n23\n00:01:18.782 --> 00:01:21.093\nis generating authentication credentials,\nright?\n\n24\n00:01:21.093 --> 00:01:23.284\nThe Edge Transport server is\nnot joined to your domain.\n\n25\n00:01:23.284 --> 00:01:26.487\nIt doesn't have some user account\nthat we can use to connect to it, so\n\n26\n00:01:26.487 --> 00:01:28.080\nwe need something else.\n\n27\n00:01:28.080 --> 00:01:31.225\nAnd the Edge subscription basically\ncontains a security key, so\n\n28\n00:01:31.225 --> 00:01:34.607\nthis is like generating a private key,\npublic key pair kind of thing.\n\n29\n00:01:34.607 --> 00:01:37.788\nWe're generating this private key\nthat we'll take to the inside, and\n\n30\n00:01:37.788 --> 00:01:39.430\nwe need to do that securely.\n\n31\n00:01:39.430 --> 00:01:42.305\nSo let me show you the process of\nactually getting that connected, and\n\n32\n00:01:42.305 --> 00:01:43.192\ngetting it in place.\n\n33\n00:01:43.192 --> 00:01:46.398\nSo here I've got the server from the last\nepisode, it finished installing, and\n\n34\n00:01:46.398 --> 00:01:48.630\nit rebooted,\nyou do have to reboot after the install.\n\n35\n00:01:48.630 --> 00:01:52.545\nAnd now that it's up, I'm in\nEdge Transport server, it's very exciting,\n\n36\n00:01:52.545 --> 00:01:54.847\nexcept the server's not\ndoing a darn thing.\n\n37\n00:01:54.847 --> 00:01:57.150\nIf it doesn't have a subscription,\nit's not gonna work,\n\n38\n00:01:57.150 --> 00:01:59.690\nso it's just sitting here doing nothing,\nall right?\n\n39\n00:01:59.690 --> 00:02:02.120\nSo now, I need to go in and\ncreate a subscription, and\n\n40\n00:02:02.120 --> 00:02:04.173\nwe do it from\nthe Exchange Management Shell.\n\n41\n00:02:04.173 --> 00:02:08.757\nSo I'm gonna get into my Exchange\nManagement Shell, and once I'm in there,\n\n42\n00:02:08.757 --> 00:02:11.719\nI'll be able to generate\nthat subscription, and\n\n43\n00:02:11.719 --> 00:02:14.130\nit's just an XML file that we generate.\n\n44\n00:02:14.130 --> 00:02:17.633\nSo I'm gonna use\nthe New-EdgeSubscription commandlet, and\n\n45\n00:02:17.633 --> 00:02:19.624\nit'll create this XML file for me.\n\n46\n00:02:19.624 --> 00:02:24.532\nOnce I've got the XML file, I need to copy\nit to like a USB key, or burn it to CD, or\n\n47\n00:02:24.532 --> 00:02:28.540\nsomething like that, and\ntake it inside my network, all right?\n\n48\n00:02:28.540 --> 00:02:30.751\nThe idea here is that\nyour server's in the DMZ.\n\n49\n00:02:30.751 --> 00:02:33.837\nIf you're setting the server up on your\nLAN first and then you're going to move\n\n50\n00:02:33.837 --> 00:02:36.500\nit to the DMZ, then you can actually\ncopy it across the network, but\n\n51\n00:02:36.500 --> 00:02:38.820\nnormally we would use like a USB key.\n\n52\n00:02:38.820 --> 00:02:43.779\nSo I'm going to come in here and\nsay New-EdgeSubscription, and then,\n\n53\n00:02:43.779 --> 00:02:48.250\n-FileName, and the name of the XML\nfile I wanna generate, and so\n\n54\n00:02:48.250 --> 00:02:51.850\nI'll just create C:\\EdgeSub.xml,\nall right?\n\n55\n00:02:51.850 --> 00:02:54.052\nAnd so that's gonna generate,\nand here it is,\n\n56\n00:02:54.052 --> 00:02:56.197\njust giving me a little\nbit of notice about it,\n\n57\n00:02:56.197 --> 00:02:59.775\nthat I'm generating this to set up\nEdgeSync replication, and that this file\n\n58\n00:02:59.775 --> 00:03:04.130\ndoes contain some information in it that's\nsecure, and so I need to handle it safely.\n\n59\n00:03:04.130 --> 00:03:08.972\nAnd then its warning me right here, I need\nto complete the subscription in the next\n\n60\n00:03:08.972 --> 00:03:12.358\n1440 minutes, in other words,\nthis file expires.\n\n61\n00:03:12.358 --> 00:03:14.953\nSo if somebody else gets a hold\nof my subscription down the road,\n\n62\n00:03:14.953 --> 00:03:16.680\nits not gonna be any good to them, right?\n\n63\n00:03:16.680 --> 00:03:20.775\nThis file is only good for 1440 minutes.\n\n64\n00:03:20.775 --> 00:03:23.179\nSo I'll go ahead and\nsay Yes to generate it, and\n\n65\n00:03:23.179 --> 00:03:25.118\nits gonna build a subscription file.\n\n66\n00:03:25.118 --> 00:03:27.793\nAll right, now what's in that file?\n\n67\n00:03:27.793 --> 00:03:31.160\nIf I browse on my hard drive,\nto my C drive, this is where I put it.\n\n68\n00:03:31.160 --> 00:03:37.350\nRight there is EdgeSub, and if I open\nit up, it is just an XML file, right?\n\n69\n00:03:37.350 --> 00:03:39.427\nAnd so if we look in here at it,\nwhat does it have?\n\n70\n00:03:39.427 --> 00:03:43.383\nWell, we start off with some basic\ninformation, here's my server, LAB-EDGE01,\n\n71\n00:03:43.383 --> 00:03:46.431\nIt's got the name of the server,\nLAB-EDGE01.itprotv.net,\n\n72\n00:03:46.431 --> 00:03:48.440\nthat's that fully qualified name.\n\n73\n00:03:48.440 --> 00:03:51.670\nRemember in the first episode I\nsaid we had to have valid DNS name\n\n74\n00:03:51.670 --> 00:03:53.420\nresolution between the systems?\n\n75\n00:03:53.420 --> 00:03:54.981\nHere's where it gets that name.\n\n76\n00:03:54.981 --> 00:03:58.480\nAnd then right here, EdgeCertificateBlob.\n\n77\n00:03:58.480 --> 00:04:02.180\nThere's that private key, that\nauthentication that it's gonna be using\n\n78\n00:04:02.180 --> 00:04:04.360\nand that is a long, long line, right?\n\n79\n00:04:04.360 --> 00:04:08.430\nThat's the whole giant value\nthat represents that key,\n\n80\n00:04:08.430 --> 00:04:10.610\nthat's what we have to keep safe,\nall right?\n\n81\n00:04:10.610 --> 00:04:11.840\nBecause for the next 1440 minutes,\n\n82\n00:04:11.840 --> 00:04:15.850\nif somebody gets a hold of that,\nthey could create a false subscription,\n\n83\n00:04:15.850 --> 00:04:19.580\nand they could start pushing changes onto\nyour Edge server and they could turn it\n\n84\n00:04:19.580 --> 00:04:22.900\ninto a spam relay if they wanted, so\nwe have to make sure to keep this secure.\n\n85\n00:04:22.900 --> 00:04:25.436\nThink of it as like your\nadministrator password, all right?\n\n86\n00:04:25.436 --> 00:04:28.348\nAnd then you got the effective date and\nthe duration,\n\n87\n00:04:28.348 --> 00:04:31.914\nthat's where it's getting\nthat 1440 minutes, all right?\n\n88\n00:04:31.914 --> 00:04:34.583\nSo I've got all that right there,\nnow I just need to take this and\n\n89\n00:04:34.583 --> 00:04:35.880\nbring it in on my other server.\n\n90\n00:04:35.880 --> 00:04:37.927\nNow, notice right here, this server type.\n\n91\n00:04:37.927 --> 00:04:42.679\nThe server type is some really\ncrazy characters here, okay?\n\n92\n00:04:42.679 --> 00:04:47.153\nThere's actually some binary data right in\nthere, and that's gonna cause a little bit\n\n93\n00:04:47.153 --> 00:04:51.084\nof a problem when we do the import on\nthis, and so we'll see the import command\n\n94\n00:04:51.084 --> 00:04:54.918\nis a little bit weird because of that,\nbut just be aware that that is there.\n\n95\n00:04:54.918 --> 00:04:59.780\nAll right, so my next step is to take this\nfile and copy it to my internal server.\n\n96\n00:04:59.780 --> 00:05:02.605\nNow normally I'd send this to a USB key,\nbut because I'm in a lab,\n\n97\n00:05:02.605 --> 00:05:04.180\nI can actually do it over my network.\n\n98\n00:05:04.180 --> 00:05:08.769\nWe wouldn't normally want to do that,\nbut I'll send it across.\n\n99\n00:05:08.769 --> 00:05:12.101\nSo I'm gonna browse over to my mailbox\nserver, and just paste it over there, so\n\n100\n00:05:12.101 --> 00:05:14.140\nit's on the mailbox server, all right?\n\n101\n00:05:14.140 --> 00:05:16.914\nBy doing it with a USB key,\nI can have them on separate networks and\n\n102\n00:05:16.914 --> 00:05:17.928\nmaintain my security.\n\n103\n00:05:17.928 --> 00:05:21.099\nAll right,\nnow I can jump over to my mailbox server.\n\n104\n00:05:21.099 --> 00:05:24.812\nAnd so here I am on LAB-MAILBOX01, and you\ncan pick any of the mailbox servers that\n\n105\n00:05:24.812 --> 00:05:28.002\nare in the same active directory site\nto create this Edge subscription,\n\n106\n00:05:28.002 --> 00:05:28.837\ncuz when you do it,\n\n107\n00:05:28.837 --> 00:05:32.110\nit creates the subscription across\nall the mailbox servers in that site.\n\n108\n00:05:33.340 --> 00:05:36.650\nSo here I'm gonna get into my\nExchange Management Shell also, and\n\n109\n00:05:36.650 --> 00:05:39.380\nI'm going to import that subscription.\n\n110\n00:05:39.380 --> 00:05:42.376\nNow the command for\ndoing it's actually not that bad.\n\n111\n00:05:42.376 --> 00:05:47.276\nThe command itself would be\nNew-EdgeSubscription, and\n\n112\n00:05:47.276 --> 00:05:50.976\nthen file name and\nyou specify the file, but\n\n113\n00:05:50.976 --> 00:05:54.310\nI'm gonna have a bit of a problem here.\n\n114\n00:05:54.310 --> 00:05:57.128\nThe binary data in that file is\ngonna cause an issue, and so\n\n115\n00:05:57.128 --> 00:05:59.557\njust pointing it to a file\nname isn't gonna work.\n\n116\n00:05:59.557 --> 00:06:01.303\nIn fact, if I finish this command,\n\n117\n00:06:01.303 --> 00:06:05.290\nit'll give me a nice little error\ntelling me that I can't use file name.\n\n118\n00:06:05.290 --> 00:06:09.090\nAnd so what I actually have to do,\nis bring the data in as byte data and\n\n119\n00:06:09.090 --> 00:06:11.303\nthat makes the syntax really bizarre.\n\n120\n00:06:11.303 --> 00:06:14.060\nI don't know why Microsoft did\nthis exactly, but they did and so\n\n121\n00:06:14.060 --> 00:06:18.110\nwe have to work around it, fortunately\nthis isn't something you do very often.\n\n122\n00:06:18.110 --> 00:06:20.603\nSo instead of using file name,\nI'm gonna use file data.\n\n123\n00:06:20.603 --> 00:06:25.041\nWhich is basically saying, open the file\nand read the data into this command byte\n\n124\n00:06:25.041 --> 00:06:28.390\nby byte, so that it gets it,\nand it's correct, all right?\n\n125\n00:06:28.390 --> 00:06:32.827\nSo I'll say file data, and I'm gonna\ntell it that I'm bringing in byte data,\n\n126\n00:06:32.827 --> 00:06:35.264\nI know this just gets awesome doesn't it?\n\n127\n00:06:35.264 --> 00:06:40.640\nAnd I'm gonna use $Get-Content to\nopen the contents of the file,\n\n128\n00:06:40.640 --> 00:06:47.170\nand the path to that file, and so for\nme it's C:/EdgeSub.xml is where I put it.\n\n129\n00:06:48.960 --> 00:06:53.501\nAnd then from there,\nI need to kinda close this off so\n\n130\n00:06:53.501 --> 00:06:57.950\nit understands that the encoding is byte,\nright?\n\n131\n00:06:57.950 --> 00:07:01.454\nI'm pulling in byte data and\nI only need to read it once, so\n\n132\n00:07:01.454 --> 00:07:03.410\nI'm gonna do a ReadCount of 0.\n\n133\n00:07:03.410 --> 00:07:07.331\nComputer's starting memory was 0, so that\nlike a ReadCount of 1 would be the true\n\n134\n00:07:07.331 --> 00:07:10.031\nthing there, and\nthen I'll close that off, all right?\n\n135\n00:07:10.031 --> 00:07:13.920\nAnd so that's gonna read that\nsubscription into my server okay?\n\n136\n00:07:13.920 --> 00:07:17.274\nThat's gonna go in there, create that\nsubscription, and get that in place, but\n\n137\n00:07:17.274 --> 00:07:20.109\nthere's a few other things that we\nneed to do at the same time, okay?\n\n138\n00:07:20.109 --> 00:07:25.480\nI want outside email to be able\nto come into my mailbox server.\n\n139\n00:07:25.480 --> 00:07:29.850\nSo I need to create a receive connector\nto be able to handle that, all right?\n\n140\n00:07:29.850 --> 00:07:32.234\nSo, I need to put in a tag\nhere to create that.\n\n141\n00:07:32.234 --> 00:07:34.300\nIf I don't, I'm gonna have to\nmanually create it later on, and\n\n142\n00:07:34.300 --> 00:07:35.695\nit's better to have it created right now.\n\n143\n00:07:35.695 --> 00:07:38.655\nSame thing for send,\nif I want my outbound email\n\n144\n00:07:38.655 --> 00:07:42.165\nto go through the Edge Transport server, I\nneed to create a send connector for that.\n\n145\n00:07:42.165 --> 00:07:44.305\nAnd so I can put that right here\nin my PowerShell command, and\n\n146\n00:07:44.305 --> 00:07:46.217\nit can create all that for me at once.\n\n147\n00:07:46.217 --> 00:07:49.568\nIt'll set up the receive and the send\nconnectors, and get them in place.\n\n148\n00:07:49.568 --> 00:07:52.232\nIt's definitely easier than doing it\nby hand, so I'm gonna do it right here.\n\n149\n00:07:52.232 --> 00:08:00.853\nSo I'm gonna say\n-CreateInternet There we go.\n\n150\n00:08:00.853 --> 00:08:02.500\nCreate Internet send connector.\n\n151\n00:08:03.620 --> 00:08:05.530\nAnd I'll set that value to true.\n\n152\n00:08:06.760 --> 00:08:12.340\nAnd then I'll do create\ninbound send connector,\n\n153\n00:08:12.340 --> 00:08:14.820\nand I'll set that one to true also.\n\n154\n00:08:14.820 --> 00:08:15.340\nOkay.\n\n155\n00:08:15.340 --> 00:08:19.710\nSo Internet for my email is going out, and\nmy inbound for email that's coming in.\n\n156\n00:08:19.710 --> 00:08:21.680\nNow, why is it called a send connector?\n\n157\n00:08:21.680 --> 00:08:25.230\nWell, that send connector's actually being\ncreated on the edge transport server\n\n158\n00:08:25.230 --> 00:08:28.120\nto send into us,\nthat's why it's a send connector.\n\n159\n00:08:28.120 --> 00:08:30.260\nSo, I just have to tell it\nthat I want to create that.\n\n160\n00:08:30.260 --> 00:08:33.030\nAnd then I need to tell it\nthe site that it's attached to.\n\n161\n00:08:33.030 --> 00:08:36.390\nNow, the site is\nthe Active Directory site, right?\n\n162\n00:08:36.390 --> 00:08:39.620\nIf you haven't looked at this,\nlet me jump over to my domain controller.\n\n163\n00:08:39.620 --> 00:08:43.630\nOn my domain controller if I go into\nTools and Active Directory sites and\n\n164\n00:08:43.630 --> 00:08:48.540\nservices, you can arrange your active\ndirectory based on geographic locations.\n\n165\n00:08:48.540 --> 00:08:50.070\nIf you haven't done it,\n\n166\n00:08:50.070 --> 00:08:53.720\nthen you only have one site called\nDefault First Site Name and that's it.\n\n167\n00:08:53.720 --> 00:08:56.950\nBut if you have done it then you'll see\nall your different geographical locations.\n\n168\n00:08:56.950 --> 00:09:00.810\nAnd if you expand that out,\nnotice my edge sync service right there.\n\n169\n00:09:00.810 --> 00:09:03.840\nYour edge transport\nservers are tied to sites.\n\n170\n00:09:03.840 --> 00:09:06.490\nSo when you have mailbox\nservers in a particular site\n\n171\n00:09:06.490 --> 00:09:09.650\nthey can have different edge\ntransport servers than other ones.\n\n172\n00:09:09.650 --> 00:09:12.460\nSo I can see it right here\ntied to this site and\n\n173\n00:09:12.460 --> 00:09:14.370\nthat's the one that I need\nto be loading this into.\n\n174\n00:09:14.370 --> 00:09:18.130\nSo back on my mailbox server.\n\n175\n00:09:18.130 --> 00:09:23.945\nI just need to say, dash site, and\nmine is just that default first site name.\n\n176\n00:09:23.945 --> 00:09:29.700\nAll right, so, that's basically what I\nneed, and, let me just do a quick syntax\n\n177\n00:09:29.700 --> 00:09:32.310\ncheck because there's a lot of places you\ncan make a mistake in a command like this.\n\n178\n00:09:32.310 --> 00:09:35.370\nSo, I'm just kind of counting my\nopen brackets and closed brackets.\n\n179\n00:09:35.370 --> 00:09:37.370\nAnd, actually, you know what,\nI do have a mistake don't I?\n\n180\n00:09:37.370 --> 00:09:42.860\nBecause I opened up byte with a square way\nback there at the beginning of the line,\n\n181\n00:09:42.860 --> 00:09:44.010\nand I didn't close that off.\n\n182\n00:09:44.010 --> 00:09:48.450\nSo just doing a quick scan for typos is\nalways a good idea to make sure that you\n\n183\n00:09:48.450 --> 00:09:50.910\ndon't get anything too crazy in there.\n\n184\n00:09:50.910 --> 00:09:55.170\nAnd my read count closes that out,\nso that should be good.\n\n185\n00:09:56.930 --> 00:09:58.780\nAll right.\nEasiest way to test is to run it.\n\n186\n00:09:58.780 --> 00:10:03.450\nSo this should import that subscription,\ncreate those connectors and communicate\n\n187\n00:10:03.450 --> 00:10:06.370\nwith the various mailbox servers that I\nmight have about this new subscription.\n\n188\n00:10:06.370 --> 00:10:11.150\nSo we'll run that and it looks like\nI did get an error on this one.\n\n189\n00:10:11.150 --> 00:10:12.850\nSo I must have a typo in here.\n\n190\n00:10:12.850 --> 00:10:16.260\nLet me just double check for a typo\nreal quick and see where my mistake is.\n\n191\n00:10:16.260 --> 00:10:19.220\nSo let me clean this up a bit and\nI'm going to take that file name and\n\n192\n00:10:19.220 --> 00:10:20.610\nthe path and put that in quotes.\n\n193\n00:10:20.610 --> 00:10:21.710\nA lot of times it does want that.\n\n194\n00:10:21.710 --> 00:10:24.210\nEven though I don't have any spaces\nin the file name, I'll add those.\n\n195\n00:10:24.210 --> 00:10:30.300\nYou know what, it looks like I am\nmissing a open parentheses right here.\n\n196\n00:10:30.300 --> 00:10:32.570\nGet contents, let me just correct that.\n\n197\n00:10:32.570 --> 00:10:34.400\nAnd that should work out\na little bit better for me.\n\n198\n00:10:34.400 --> 00:10:37.000\nThere we go.\nA lot of room to make a mistake on\n\n199\n00:10:37.000 --> 00:10:37.720\na command like that.\n\n200\n00:10:37.720 --> 00:10:42.770\nSo when I run that now it imports and\nthen I can see that I've got lab/edge01.\n\n201\n00:10:42.770 --> 00:10:46.810\nAnd it's pulling it into my site for\nthe itprotv.net.\n\n202\n00:10:46.810 --> 00:10:49.950\nIt's creating that edge subscription.\n\n203\n00:10:49.950 --> 00:10:54.000\nNow, my mail box servers have\nthe authentication key to be able to\n\n204\n00:10:54.000 --> 00:10:56.550\nreach out to that edge transport\nserver and push changes to it.\n\n205\n00:10:56.550 --> 00:10:59.620\nRight?\nWe can push hashed values of all of our\n\n206\n00:10:59.620 --> 00:11:02.580\nuser accounts up to it so\nit can know what email addresses we have,\n\n207\n00:11:02.580 --> 00:11:03.400\nand things like that.\n\n208\n00:11:03.400 --> 00:11:06.930\nWe can push all of the settings up\nto it and that's pretty important.\n\n209\n00:11:06.930 --> 00:11:07.620\nAlright?\n\n210\n00:11:07.620 --> 00:11:10.700\nNow that we've got that done, we wait.\n\n211\n00:11:10.700 --> 00:11:13.300\nRight?\nThe user sync alone can take up to four\n\n212\n00:11:13.300 --> 00:11:15.000\nhours if you let it go on its own.\n\n213\n00:11:15.000 --> 00:11:17.630\nWell I'm an impatient person so I'm gonna\nkind of kick this one in the butt and\n\n214\n00:11:17.630 --> 00:11:19.260\ntell it to replicate right now.\n\n215\n00:11:19.260 --> 00:11:21.530\nIf you wanna force it to replicate\n\n216\n00:11:21.530 --> 00:11:26.315\nyou can just run a real simple command\nhere which is start/edgesynchronization.\n\n217\n00:11:26.315 --> 00:11:29.070\nAll right that's gonna force\nit to replicate right now,\n\n218\n00:11:29.070 --> 00:11:33.060\nits gonna replicate the edge sync\nconfig as well as the user list.\n\n219\n00:11:33.060 --> 00:11:36.150\nAnd it's gonna push all\nthat along right now.\n\n220\n00:11:36.150 --> 00:11:38.690\nSo we can come in here and\nstart to see whether we've got any issues,\n\n221\n00:11:38.690 --> 00:11:40.960\nwhether we're communicating,\nand whether it's running.\n\n222\n00:11:40.960 --> 00:11:42.150\nI've got a message here.\n\n223\n00:11:42.150 --> 00:11:46.650\nI got a response that says could not\nconnect for the configuration replication.\n\n224\n00:11:46.650 --> 00:11:52.600\nSo I tried to reach out to lab edge 01 and\nit got LDAP server is unavailable so\n\n225\n00:11:52.600 --> 00:11:55.330\nI wasn't able to communicate out and\nget to that system.\n\n226\n00:11:55.330 --> 00:11:58.900\nAnd if I look right after that,\nhere's where it did the recipients,\n\n227\n00:11:58.900 --> 00:12:00.360\nthe other thing it replicates.\n\n228\n00:12:00.360 --> 00:12:03.150\nThe first one it replicates once every\nhour, the second one it replicates\n\n229\n00:12:03.150 --> 00:12:07.330\nonce every four hours, but I can see right\nhere, our LDAP server's unavailable.\n\n230\n00:12:07.330 --> 00:12:08.670\nAll right what does that mean?\n\n231\n00:12:08.670 --> 00:12:10.000\nWell, it means one of two things.\n\n232\n00:12:10.000 --> 00:12:12.840\nEither one, I couldn't do DNS resolution.\n\n233\n00:12:12.840 --> 00:12:14.920\nOr two, there's a firewall blocking me.\n\n234\n00:12:14.920 --> 00:12:16.530\nRight?\nWell let's see which one it is.\n\n235\n00:12:16.530 --> 00:12:21.980\nSo if I do a ping to\nlab-edge01.itprotv.net,\n\n236\n00:12:21.980 --> 00:12:25.750\nright, that's the fully\nqualified name of that server.\n\n237\n00:12:25.750 --> 00:12:29.640\nI can see I did resolve the IP so\nI don't have a DNS problem.\n\n238\n00:12:29.640 --> 00:12:31.840\nAnd I can ping it.\n\n239\n00:12:31.840 --> 00:12:32.990\nBut what does that mean?\n\n240\n00:12:32.990 --> 00:12:34.500\nWell, it means I can ping it.\n\n241\n00:12:34.500 --> 00:12:35.790\nThe other ports might be closed.\n\n242\n00:12:35.790 --> 00:12:38.330\nSo I need to check my firewall\non the Edge Transfer server.\n\n243\n00:12:38.330 --> 00:12:41.810\nNow when I installed the Edge Transfer\nServer, it's running the Windows firewall,\n\n244\n00:12:41.810 --> 00:12:43.940\nand so\nI'm probably just blocking the port and\n\n245\n00:12:43.940 --> 00:12:48.400\nif you remember the port that edge sync\nuses, is that five zero six three six, and\n\n246\n00:12:48.400 --> 00:12:50.760\nthen we've got the other ports for,\nlike, SMTP and stuff.\n\n247\n00:12:50.760 --> 00:12:51.970\nWe need to clear those away.\n\n248\n00:12:51.970 --> 00:12:54.480\nWe talked about those in the last episode.\n\n249\n00:12:54.480 --> 00:12:56.940\nSo if I jump over to my edge server,\nlet's just take a look and\n\n250\n00:12:56.940 --> 00:12:58.840\nsee if my firewall is even on.\n\n251\n00:12:58.840 --> 00:13:01.790\nNow, I'll be honest with you guys,\nnormally on an edge transport server\n\n252\n00:13:01.790 --> 00:13:04.610\nlike this, I'd turn the firewall off,\nand I have.\n\n253\n00:13:04.610 --> 00:13:07.450\nAnd the reason I turn it off,\nif you remember my diagram,\n\n254\n00:13:07.450 --> 00:13:08.850\nlet me bring that diagram back up.\n\n255\n00:13:08.850 --> 00:13:09.670\nWhere did I put that thing?\n\n256\n00:13:10.900 --> 00:13:12.550\nSee these physical firewalls?\n\n257\n00:13:12.550 --> 00:13:15.970\nAn edge transport server is almost always\nsitting in between physical firewalls\n\n258\n00:13:15.970 --> 00:13:16.530\nlike this and so\n\n259\n00:13:16.530 --> 00:13:19.640\nif we're relying on those we don't\nnecessarily need the Windows firewall.\n\n260\n00:13:19.640 --> 00:13:24.840\nUnless we're concerned about other servers\nin the DMZ getting compromised and\n\n261\n00:13:24.840 --> 00:13:25.930\npeople hopping over to it.\n\n262\n00:13:25.930 --> 00:13:28.150\nIn which case that Windows\nfirewall is pretty handy.\n\n263\n00:13:28.150 --> 00:13:31.210\nBut in my case I've got\nthe Windows firewall turned off.\n\n264\n00:13:31.210 --> 00:13:34.280\nSo, I'm having some kinda LDAP\nconnectivity problem here\n\n265\n00:13:34.280 --> 00:13:35.980\nbeyond what I would normally expect.\n\n266\n00:13:35.980 --> 00:13:40.270\nSo let me just double check my services\nand make sure the services are running.\n\n267\n00:13:40.270 --> 00:13:44.330\nAnd I'll jump in here and double check\nthat and we, you know in theory,\n\n268\n00:13:44.330 --> 00:13:45.390\nshould be good there.\n\n269\n00:13:45.390 --> 00:13:49.920\nYou can sort by start-up type to automatic\nand just kind of skim down the list.\n\n270\n00:13:49.920 --> 00:13:54.850\nNow the Active Directory\nLightweight Directory service is\n\n271\n00:13:54.850 --> 00:13:56.325\na few different things we need to look at.\n\n272\n00:13:56.325 --> 00:13:57.460\nThe key one is this guy right here.\n\n273\n00:13:57.460 --> 00:13:59.885\nThe Microsoft Exchange ADAM.\n\n274\n00:13:59.885 --> 00:14:02.480\nThat's Active Directory Application Mode.\n\n275\n00:14:02.480 --> 00:14:05.490\nWhen Active Directory Lightweight\nDirectory Services first came out,\n\n276\n00:14:05.490 --> 00:14:08.180\nit was actually called ADAM instead and so\n\n277\n00:14:08.180 --> 00:14:10.220\nwhen we find it here it's\nstill using the old name.\n\n278\n00:14:10.220 --> 00:14:15.560\nAnd I can see mines up and running and\nit looks to be healthy if nothing else,\n\n279\n00:14:15.560 --> 00:14:18.200\nand so\nwe don't seem to have any issues there.\n\n280\n00:14:18.200 --> 00:14:20.850\nAnd I'm just looking for\nany other services that might be stopped.\n\n281\n00:14:20.850 --> 00:14:23.170\nRemote registry is stopped,\nbut that's okay in this case.\n\n282\n00:14:23.170 --> 00:14:24.620\nI don't need that one.\n\n283\n00:14:24.620 --> 00:14:27.600\nAnd everything else\nappears to be fine too.\n\n284\n00:14:27.600 --> 00:14:30.870\nSo I'm not seeing any\nservices jumping out at me.\n\n285\n00:14:30.870 --> 00:14:33.060\nThe next place to check are event logs,\nright.\n\n286\n00:14:33.060 --> 00:14:36.129\nThe event logs will usually give\nus some information there and\n\n287\n00:14:36.129 --> 00:14:40.319\neven back in the Server Manager, we might\nsee some information right down here lower\n\n288\n00:14:40.319 --> 00:14:42.402\nin our Server Manager as we start to look.\n\n289\n00:14:42.402 --> 00:14:45.721\nAll right, so in our Server Manager,\nwe can look here to see some of the errors\n\n290\n00:14:45.721 --> 00:14:47.855\nthat might be being\ngenerated by our event logs.\n\n291\n00:14:47.855 --> 00:14:49.381\nA kind of quick way to\nspot some of this stuff.\n\n292\n00:14:49.381 --> 00:14:52.095\nI see I've got an MS Exchange\ntransport warning here,\n\n293\n00:14:52.095 --> 00:14:54.820\nwhich is not usually\nenough to stop things.\n\n294\n00:14:54.820 --> 00:14:57.560\nYeah its telling me anti spam\ncan't run because it doesn't have\n\n295\n00:14:57.560 --> 00:15:00.750\nSMTB connectors to find yet\nwhich is because sync is failing.\n\n296\n00:15:00.750 --> 00:15:01.820\nSo not anything to worry about there.\n\n297\n00:15:01.820 --> 00:15:06.940\nI'm gonna jump down to the LDS service or\nthe role and look at what I've got there.\n\n298\n00:15:06.940 --> 00:15:08.410\nYeah here I'm I'm starting\nto see some errors.\n\n299\n00:15:08.410 --> 00:15:10.540\nSo I've got an Active Directory\nlightweight error,\n\n300\n00:15:10.540 --> 00:15:15.350\nhere can't build an address book hierarchy\ntable, and then the MS exchange LDAP.\n\n301\n00:15:15.350 --> 00:15:18.530\nLet's see it needs to be,\nwants me to increase security for SASL,\n\n302\n00:15:18.530 --> 00:15:21.660\nit looks like the LDS didn't quite update.\n\n303\n00:15:21.660 --> 00:15:22.850\nSo let's do this.\n\n304\n00:15:22.850 --> 00:15:26.700\nI'm just gonna restart that service so\nif I go back into my services panel,\n\n305\n00:15:26.700 --> 00:15:30.450\nI'm gonna find that Microsoft Exchange\nADAM that I pointed out a few moments ago.\n\n306\n00:15:30.450 --> 00:15:32.490\nI'm just gonna restart that turkey.\n\n307\n00:15:32.490 --> 00:15:35.490\nSometimes when you do the install things\ncome up and they aren't quite configured\n\n308\n00:15:35.490 --> 00:15:37.870\nright, so we'll give it a little\nkick in the pants here.\n\n309\n00:15:37.870 --> 00:15:40.630\nAnd see how when I restart the ADM\nit's gonna restart all of these\n\n310\n00:15:40.630 --> 00:15:44.980\nother Exchange services and so\nthis is like doing a faster reboot.\n\n311\n00:15:44.980 --> 00:15:47.040\nIt's just gonna reboot\nthe Exchange system.\n\n312\n00:15:47.040 --> 00:15:49.990\nAnd then we'll try and\nsync that subscription again.\n\n313\n00:15:49.990 --> 00:15:54.154\nSo as soon as that's done, let's see,\noh, it wasn't able to stop that one.\n\n314\n00:15:54.154 --> 00:15:58.534\nI'm gonna have to, sometimes some services\ntake a little longer to stop than others,\n\n315\n00:15:58.534 --> 00:16:01.894\nand so it failed to actually get to\nwhere it could restart the ADAM.\n\n316\n00:16:01.894 --> 00:16:03.869\nI'm gonna stop it.\n\n317\n00:16:03.869 --> 00:16:04.889\nLike that.\n\n318\n00:16:04.889 --> 00:16:07.792\nAnd that will stop it outright, and\nthis time it's just 68 and stop.\n\n319\n00:16:07.792 --> 00:16:08.530\nThere we go.\n\n320\n00:16:08.530 --> 00:16:10.550\nAnd then what you can do,\nis you can go back through and\n\n321\n00:16:10.550 --> 00:16:12.160\nyou can kind of restart them.\n\n322\n00:16:12.160 --> 00:16:15.710\nAnd sorting by the automatic start up type\nis really convenient here because you can\n\n323\n00:16:15.710 --> 00:16:18.600\nquickly spot the ones that\nneed to be started back up.\n\n324\n00:16:18.600 --> 00:16:19.280\nSo.\n\n325\n00:16:19.280 --> 00:16:22.610\nFor the Exchange services,\nI can quickly see the six that stopped and\n\n326\n00:16:22.610 --> 00:16:23.820\nwe can get those restarted.\n\n327\n00:16:23.820 --> 00:16:24.760\nAlthough at this stage,\n\n328\n00:16:24.760 --> 00:16:26.840\nit probably would have been\nfaster just to reboot the server.\n\n329\n00:16:26.840 --> 00:16:29.330\nBut we'll do it this way for thoroughness.\n\n330\n00:16:29.330 --> 00:16:31.200\nI'm gonna restart each of these services.\n\n331\n00:16:31.200 --> 00:16:34.550\nAnd once that's done, we'll jump over and\ntry that subscription again.\n\n332\n00:16:34.550 --> 00:16:37.770\nSo we'll just get these put back and\nthen we'll be in business.\n\n333\n00:16:37.770 --> 00:16:40.530\nI did see a couple other services that\nwere running, I'm pretty sure those were\n\n334\n00:16:40.530 --> 00:16:43.050\nnot related to Exchange, so\nI'm not too worried about them.\n\n335\n00:16:43.050 --> 00:16:45.830\nThings like Windows remote registry,\nyou expect that one to be disabled,\n\n336\n00:16:45.830 --> 00:16:48.160\nWindows Update, yeah, software protection.\n\n337\n00:16:48.160 --> 00:16:51.150\nThese are the ones that fire in when it's\nscanning, when it's doing things, so\n\n338\n00:16:51.150 --> 00:16:51.920\nI'm not worried about those.\n\n339\n00:16:51.920 --> 00:16:55.830\nAll right, but now that we got\nthe restart, let's jump back over here and\n\n340\n00:16:55.830 --> 00:16:57.520\nI'm just gonna retry that subscription.\n\n341\n00:16:57.520 --> 00:17:01.030\nSo I'm gonna do Start-Edge Synchronization\nand I'll run that.\n\n342\n00:17:01.030 --> 00:17:02.910\nAnd, oh, there we go, there we go.\n\n343\n00:17:02.910 --> 00:17:05.910\nAll right, so, this time I got\nResult Success, Type Configuration.\n\n344\n00:17:05.910 --> 00:17:09.700\nAnd up here, I should have the same thing\nfor the recipients, Yeah, there we go.\n\n345\n00:17:09.700 --> 00:17:10.520\nNow we're moving.\n\n346\n00:17:10.520 --> 00:17:13.870\nSo, sometimes you just have to give\nit a little kick in the pants there.\n\n347\n00:17:13.870 --> 00:17:15.900\nBut you guys kinda saw\nthe troubleshooting process there.\n\n348\n00:17:15.900 --> 00:17:18.290\nStart with DNS,\ncuz that's almost always the problem.\n\n349\n00:17:18.290 --> 00:17:20.200\nThen firewalls to make\nsure we have connectivity.\n\n350\n00:17:20.200 --> 00:17:23.450\nAnd then after that,\nstart looking through your event logs.\n\n351\n00:17:23.450 --> 00:17:25.150\nYou'll usually find something.\n\n352\n00:17:25.150 --> 00:17:27.780\nI restarted that ADAM and\nthat seemed to take care of it.\n\n353\n00:17:27.780 --> 00:17:28.830\nThere is another command.\n\n354\n00:17:28.830 --> 00:17:33.310\nI don't find it incredibly useful,\nbut what you can do is,\n\n355\n00:17:33.310 --> 00:17:35.715\nI'll show you anyway cuz it's there and\nit might show up on the exam.\n\n356\n00:17:35.715 --> 00:17:38.320\nTest-EdgeSynchronization.\n\n357\n00:17:38.320 --> 00:17:40.540\nIt's another command that\nwe can run that'll go and\n\n358\n00:17:40.540 --> 00:17:42.660\ngive you some basic\ninformation about the system.\n\n359\n00:17:42.660 --> 00:17:45.160\nNow the reason I say it's not\nterribly useful here is so\n\n360\n00:17:45.160 --> 00:17:46.770\nmy server's not set up yet.\n\n361\n00:17:46.770 --> 00:17:49.640\nSo, what testing the edge\nsubscription does, is it, or\n\n362\n00:17:49.640 --> 00:17:53.560\nedge synchronization, is it looks to see\nif we can see the server, and then it\n\n363\n00:17:53.560 --> 00:17:56.745\ngives you information about the status of\nall the things we've configured on it.\n\n364\n00:17:56.745 --> 00:17:58.240\nBut we haven't configured anything yet.\n\n365\n00:17:58.240 --> 00:18:00.010\nSo that's why I didn't go to that command.\n\n366\n00:18:00.010 --> 00:18:03.190\nThis is more useful down the road, like\nlater one when we've configured things we\n\n367\n00:18:03.190 --> 00:18:05.370\ncan check the status of all\nthe services and so on.\n\n368\n00:18:05.370 --> 00:18:07.320\nBefore right now I don't\nusually use that one.\n\n369\n00:18:07.320 --> 00:18:11.300\nBut just be aware that is a test dash\nedge synchronization command you can run.\n\n370\n00:18:11.300 --> 00:18:12.790\nAll right, well,\n\n371\n00:18:12.790 --> 00:18:16.160\nthis point, my subscription has been\nbrought into my internal server.\n\n372\n00:18:16.160 --> 00:18:19.440\nI'm talking to the external server so\nI'm pushing changes to it.\n\n373\n00:18:19.440 --> 00:18:20.810\nI should be ready to rock.\n\n374\n00:18:20.810 --> 00:18:23.030\nLet's verify one more thing though.\n\n375\n00:18:23.030 --> 00:18:28.120\nI'm gonna jump over to my Exchange admin\ncenter, and in my Exchange admin center.\n\n376\n00:18:28.120 --> 00:18:31.120\nI should see some new receive\nconnectors that are set up.\n\n377\n00:18:31.120 --> 00:18:33.320\nSo if I go down here to mail flow and\n\n378\n00:18:33.320 --> 00:18:38.160\nI take a look at my receive connectors,\nwhen I look at the receive connectors\n\n379\n00:18:38.160 --> 00:18:40.370\nI've got my basic settings\nin place like normal, right?\n\n380\n00:18:40.370 --> 00:18:41.980\nNothing too special there, but\n\n381\n00:18:41.980 --> 00:18:46.010\non the send connector side, now I see\nthose EdgeSync connections, right?\n\n382\n00:18:46.010 --> 00:18:47.450\nHere's the EdgeSync.\n\n383\n00:18:47.450 --> 00:18:48.950\nDefault first site name to internet.\n\n384\n00:18:48.950 --> 00:18:50.970\nRight, so this is our outgoing stuff.\n\n385\n00:18:50.970 --> 00:18:53.910\nAnd then we got inbound to\ndefault first site name.\n\n386\n00:18:53.910 --> 00:18:57.750\nThese are the send connectors that were\ncreated that actually connect our site\n\n387\n00:18:57.750 --> 00:18:59.020\nto the edge transport service.\n\n388\n00:18:59.020 --> 00:19:02.700\nSo those are in place, and they're up\nin running, they're doing their job.\n\n389\n00:19:02.700 --> 00:19:05.470\nWe can always come in and edit them and\ntweak their settings, change things if you\n\n390\n00:19:05.470 --> 00:19:09.300\nwant to but for the most part it's\nset the way that we need them.\n\n391\n00:19:09.300 --> 00:19:13.190\nAt this stage, we've got an edge\ntransport server and we're now up and\n\n392\n00:19:13.190 --> 00:19:16.250\nrunning and\nit's doing what it needs to do.\n\n393\n00:19:16.250 --> 00:19:17.420\nNow what is it doing?\n\n394\n00:19:17.420 --> 00:19:18.136\nNot really much.\n\n395\n00:19:18.136 --> 00:19:21.070\n[LAUGH] Right now it's\njust relaying email.\n\n396\n00:19:21.070 --> 00:19:24.990\nSo right now it's giving you security just\nthrough obscuring your email address list\n\n397\n00:19:24.990 --> 00:19:26.410\nand that's it, right.\n\n398\n00:19:26.410 --> 00:19:28.840\nBut where the real power of the Edge\nTransport server comes in is when we go\n\n399\n00:19:28.840 --> 00:19:30.830\nand configure the advanced things.\n\n400\n00:19:30.830 --> 00:19:33.800\nOn the Edge Transport server,\nwe can filter out spam,\n\n401\n00:19:33.800 --> 00:19:35.170\nwe can filter out viruses.\n\n402\n00:19:35.170 --> 00:19:38.060\nYou can put policies in place that\nwhite-list and blacklist IPs.\n\n403\n00:19:38.060 --> 00:19:41.750\nYou can do all sorts of security\nmeasures like that, and\n\n404\n00:19:41.750 --> 00:19:46.410\nit will filter email before it\neven gets into your organization.\n\n405\n00:19:46.410 --> 00:19:48.380\nAnd that's where the real power is.\n\n406\n00:19:48.380 --> 00:19:53.330\nSo what we need to do next is to actually\nget in there and set up those rules.\n\n407\n00:19:53.330 --> 00:19:56.750\nBut that would be something\ngreat to cover in part three,\n\n408\n00:19:56.750 --> 00:19:59.560\nright, in our next episode when we\nstart to get into actually configuring\n\n409\n00:19:59.560 --> 00:20:03.620\nall the rules and filtering for\nthe Exchange Edge Transport server.\n\n410\n00:20:03.620 --> 00:20:07.320\nSo definitely stay tuned for\nthat one but for this episode,\n\n411\n00:20:07.320 --> 00:20:10.930\nour Edge Transport server's up,\nit's running, it's happy.\n\n412\n00:20:10.930 --> 00:20:13.160\nThings are running the way\nthey're supposed to run,\n\n413\n00:20:13.160 --> 00:20:14.090\nnow we just need to configure it.\n\n414\n00:20:14.090 --> 00:20:15.950\nSo we'll definitely want\nto tune back in for that.\n\n415\n00:20:15.950 --> 00:20:19.320\nBut in this episode we got a chance to\nsee setting up that Edge subscription,\n\n416\n00:20:19.320 --> 00:20:22.530\ndoing the Edge synchronization, and\ntesting it and troubleshooting it\n\n417\n00:20:22.530 --> 00:20:26.270\nto actually make sure it's up and running\nand doing what it's supposed to do.\n\n418\n00:20:26.270 --> 00:20:28.210\nAll right,\nwell I hope you guys enjoyed the episode!\n\n419\n00:20:28.210 --> 00:20:31.610\nDefinitely tune back in for configuring\nthe rules and filtering on this server,\n\n420\n00:20:31.610 --> 00:20:32.990\ncuz that's where it really becomes useful.\n\n421\n00:20:32.990 --> 00:20:34.880\nAnd it'll definitely be\na good one to watch.\n\n422\n00:20:34.880 --> 00:20:35.920\nI hope to see you then.\n\n423\n00:20:35.920 --> 00:20:40.345\nBut for now, signing off for ITProTV,\nI'm Don Pezet, and I'll see you next time.\n\n424\n00:20:40.345 --> 00:20:46.210\n[SOUND]\n\n",
          "vimeoId": "136955389"
        },
        {
          "description": "In this episode, Don walks the viewers through the available transport agents found on an Edge Transport server. He demonstrates several scenarios where transport rules can be applied to improve email security. He ends the episode by showing how to replicate the rules between Edge servers.",
          "length": "1729",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-2-configuring_rules-082415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-2-configuring_rules-082415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-5-2-configuring_rules-082415-1-sm.jpg",
          "title": "Configuring Rules",
          "transcript": "WEBVTT\n\n1\n00:00:00.093 --> 00:00:10.303\n[MUSIC]\n\n2\n00:00:10.303 --> 00:00:13.173\nAll right, good morning,\ngood afternoon and good evening and\n\n3\n00:00:13.173 --> 00:00:15.240\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.240 --> 00:00:17.190\nI'm your host Don Pezet.\n\n5\n00:00:17.190 --> 00:00:19.570\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:19.570 --> 00:00:24.690\nAnd in this episode we're gonna\ncontinue our Edge server adventure,\n\n7\n00:00:24.690 --> 00:00:27.870\nas we jump in and\nactually get some rules configured.\n\n8\n00:00:27.870 --> 00:00:29.490\nIf you've been watching\nour previous episodes,\n\n9\n00:00:29.490 --> 00:00:34.315\nwe saw how to install an Edge transport\nserver, we saw how to set up Edge sync and\n\n10\n00:00:34.315 --> 00:00:36.990\nan Edge subscription, and\nwe've got all that in place.\n\n11\n00:00:36.990 --> 00:00:41.610\nAnd we have an Edge Transport server up,\nbut we didn't really make it do anything.\n\n12\n00:00:41.610 --> 00:00:44.720\nAnything other than just receiving and\nsending email which is fine,\n\n13\n00:00:44.720 --> 00:00:48.400\nbut there's so much more we can\ndo with an Edge Transport server.\n\n14\n00:00:48.400 --> 00:00:51.850\nAn Edge Transport server is designed\nto provide like the ultimate\n\n15\n00:00:51.850 --> 00:00:54.490\nplace to implement security\non your email network.\n\n16\n00:00:54.490 --> 00:00:58.290\nSo if you're scanning for viruses,\nif you're scanning for spam and\n\n17\n00:00:58.290 --> 00:01:01.660\nthings like that, by catching\nit on the edge transport server,\n\n18\n00:01:01.660 --> 00:01:05.430\nyou stop it from ever getting\ninside your private network.\n\n19\n00:01:05.430 --> 00:01:07.310\nAnd that gives you a great\nlevel of security and\n\n20\n00:01:07.310 --> 00:01:11.470\nprotection and really is kind of the whole\npoint of the edge transport server.\n\n21\n00:01:11.470 --> 00:01:14.400\nIf you're just using it\nas like an SMTP relay,\n\n22\n00:01:14.400 --> 00:01:16.230\nan Edge transport server\nis kind of overkill.\n\n23\n00:01:16.230 --> 00:01:18.890\nYou can probably use your ISP\nto provide that service, and\n\n24\n00:01:18.890 --> 00:01:20.920\nnow it's one less system to maintain.\n\n25\n00:01:20.920 --> 00:01:24.820\nBut if you really want the power, that's\nwhere an Edge transport server comes in.\n\n26\n00:01:24.820 --> 00:01:27.850\nAnd the way we get that power is\nby configuring what are called\n\n27\n00:01:27.850 --> 00:01:28.610\ntransport rules.\n\n28\n00:01:28.610 --> 00:01:33.200\nNow, we've seen transport rules in\nother episodes where we set up,\n\n29\n00:01:33.200 --> 00:01:35.950\non a mailbox server we created some\ntransport rules to add things like\n\n30\n00:01:35.950 --> 00:01:37.350\na legal disclaimer or whatever.\n\n31\n00:01:37.350 --> 00:01:38.560\nAnd you can do that.\n\n32\n00:01:38.560 --> 00:01:40.320\nBut on an edge transport server,\n\n33\n00:01:40.320 --> 00:01:43.440\nthe transport rules are really\nfocused on security.\n\n34\n00:01:43.440 --> 00:01:47.270\nAnd so to do that, there's these transport\nagents that run in the background and\n\n35\n00:01:47.270 --> 00:01:49.100\nthey let us perform all\nsorts of crazy actions.\n\n36\n00:01:49.100 --> 00:01:51.880\nLet me show you how they work\non an edge transport server.\n\n37\n00:01:51.880 --> 00:01:53.470\nSo here I am on my edge\ntransport server and\n\n38\n00:01:53.470 --> 00:01:56.790\nI'm just gonna jump into my\nexchange management shelf.\n\n39\n00:01:56.790 --> 00:02:01.680\nAnd there's a neat little command you can\nrun, which is just Get-TransportAgent,\n\n40\n00:02:01.680 --> 00:02:03.535\nwhich I'll get to eventually, there we go.\n\n41\n00:02:03.535 --> 00:02:08.170\nGet-TransportAgent, and it'll show you all\nthe different agents that are installed\n\n42\n00:02:08.170 --> 00:02:10.830\nand enabled on an Edge Transport server.\n\n43\n00:02:10.830 --> 00:02:14.600\nOn a mailbox server, some of these\nare enabled, a lot of them are disabled.\n\n44\n00:02:14.600 --> 00:02:17.060\nOn an Edge Transport server,\nthey're all turned on, and\n\n45\n00:02:17.060 --> 00:02:19.920\nthat's because Microsoft assumes\nyou're going to be doing these things.\n\n46\n00:02:19.920 --> 00:02:21.570\nAnd if you look at what's available,\n\n47\n00:02:21.570 --> 00:02:24.840\nyou've got things like\nconnection filtering agent.\n\n48\n00:02:24.840 --> 00:02:28.400\nYou might not want to allow certain\nemail servers to connect at all.\n\n49\n00:02:28.400 --> 00:02:30.360\nRight?\nThere might be a email server out there\n\n50\n00:02:30.360 --> 00:02:33.500\nthat you know is a spam relay and\nyou just wanna block that server outright.\n\n51\n00:02:33.500 --> 00:02:34.760\nSo you can create a connection filter,\n\n52\n00:02:34.760 --> 00:02:37.980\nthat says, don't even, don't even ask\nthat server for a username and password.\n\n53\n00:02:37.980 --> 00:02:40.800\nDon't, don't ask it anything,\njust don't even let that IP connect.\n\n54\n00:02:41.830 --> 00:02:44.270\nYou might wanna do address rewriting,\nright?\n\n55\n00:02:44.270 --> 00:02:47.520\nThe address rewriting inbound agent and\naddress rewriting outbound agent.\n\n56\n00:02:47.520 --> 00:02:51.960\nYou can take an email and you can take\nthe sender or recipient address and\n\n57\n00:02:51.960 --> 00:02:54.070\nchange it to something else.\n\n58\n00:02:54.070 --> 00:02:54.680\nRight?\nFor\n\n59\n00:02:54.680 --> 00:02:58.145\nexample, I might have a distribution\nlist inside of my network that's called\n\n60\n00:02:58.145 --> 00:03:01.580\nsalespeople@itprotv.net.\n\n61\n00:03:01.580 --> 00:03:06.060\nBut on the outside,\nI want it to be info at ITPro.TV.\n\n62\n00:03:06.060 --> 00:03:10.200\nWell, I can take email coming in for\ninfo at ITPro.TV and\n\n63\n00:03:10.200 --> 00:03:14.440\nrewrite that destination to sales\nat whatever and send it internally.\n\n64\n00:03:14.440 --> 00:03:16.390\nSo you can do rewrites as\nthe emails pass through,\n\n65\n00:03:16.390 --> 00:03:18.029\nit's a great way to obscure addresses.\n\n66\n00:03:19.210 --> 00:03:21.480\nThen we see things like\nour edge rule agent.\n\n67\n00:03:21.480 --> 00:03:24.010\nThat's going to be what makes all these\nrules apply and what's going to be\n\n68\n00:03:24.010 --> 00:03:28.280\npulling the rules from inside if we're\npushing these from an internal server.\n\n69\n00:03:28.280 --> 00:03:29.700\nThen we'll see our content filter.\n\n70\n00:03:29.700 --> 00:03:33.970\nThe content filter agent is kind of fun,\nwell as fun as these things get.\n\n71\n00:03:33.970 --> 00:03:38.670\nIt lets you look for key words and\nphrases inside emails and take actions.\n\n72\n00:03:38.670 --> 00:03:40.180\nAnd that action could be to block it, but\n\n73\n00:03:40.180 --> 00:03:45.520\nit's normally to apply a [COUGH]\nspam confidence level, an SCL.\n\n74\n00:03:45.520 --> 00:03:47.900\nSo you can assign an SCL based\non content in the email.\n\n75\n00:03:47.900 --> 00:03:50.420\nYou can look for\nwords like Rolex or Viagra.\n\n76\n00:03:50.420 --> 00:03:54.140\nYou can look for\nwords like Unsubscribe or phrases.\n\n77\n00:03:54.140 --> 00:03:56.120\nIf you're having trouble\nreading this email.\n\n78\n00:03:56.120 --> 00:03:59.780\nThat's not stuff a normal person would use\nso you could look for those phrases and\n\n79\n00:03:59.780 --> 00:04:02.480\nadjust the SCL appropriately\nusing the content filter.\n\n80\n00:04:03.640 --> 00:04:06.180\nThe sender ID agent, all right.\n\n81\n00:04:06.180 --> 00:04:09.340\nWhen somebody sends an email, they say\nwhat their email address is, right?\n\n82\n00:04:09.340 --> 00:04:10.300\nThe from field.\n\n83\n00:04:10.300 --> 00:04:14.320\nSo you might get an email from me and\nit's says it's from Don@itpro.tv.\n\n84\n00:04:14.320 --> 00:04:18.180\nWell, your server can go and\ndo a lookup and say, all right,\n\n85\n00:04:18.180 --> 00:04:22.920\nI'm gonna go find the itpro.tv domain, and\nI'm gonna look for an SPF record, right.\n\n86\n00:04:22.920 --> 00:04:25.470\nThat's the sender policy framework and\nit's gonna look to see\n\n87\n00:04:25.470 --> 00:04:29.240\nwhat email servers are allowed to\nsend email for ITPro.TV, right.\n\n88\n00:04:29.240 --> 00:04:33.466\nAnd if you're getting my email from one\nof those servers then it's probably good.\n\n89\n00:04:33.466 --> 00:04:35.460\nBut if you're getting that\nemail from a different server,\n\n90\n00:04:35.460 --> 00:04:38.150\na server that's not on the list,\nI probably wanna block that.\n\n91\n00:04:38.150 --> 00:04:39.040\nIt's probably spam.\n\n92\n00:04:39.040 --> 00:04:44.270\nAnd that's what sender ID filtering is and\nthe sender ID agent is what checks that.\n\n93\n00:04:44.270 --> 00:04:46.180\nNow with it, it's on by default.\n\n94\n00:04:46.180 --> 00:04:48.940\nWe might wanna turn it off, but otherwise\nwe'd usually just leave that one alone.\n\n95\n00:04:48.940 --> 00:04:51.210\nThere's not a whole heck\nof a lot to do on that one.\n\n96\n00:04:51.210 --> 00:04:55.780\nAll right then we've got these sender\nfilter and the recipient filter agent.\n\n97\n00:04:55.780 --> 00:04:59.250\nYou might want to whitelist or\nblacklist individual users.\n\n98\n00:04:59.250 --> 00:05:02.400\nYou might have an e-mail that's\nconstantly sending you spam and\n\n99\n00:05:02.400 --> 00:05:04.170\nyou can't unsubscribe from it, so\n\n100\n00:05:04.170 --> 00:05:07.190\nyou could block that right at the edge of\ntransport server, and it never comes in.\n\n101\n00:05:08.810 --> 00:05:10.250\nThe protocol analysis agent.\n\n102\n00:05:10.250 --> 00:05:15.120\nWe can look into the protocol itself and\nsee if, if it's like SMTP\n\n103\n00:05:15.120 --> 00:05:19.230\nemails that are coming in with certain\nheader types that aren't allowed or\n\n104\n00:05:19.230 --> 00:05:20.650\ncertain header types that are malformed.\n\n105\n00:05:20.650 --> 00:05:23.190\nAnd then you've got\nthe attachment filtering.\n\n106\n00:05:23.190 --> 00:05:25.250\nAttachment filtering's where, well,\nyou look at the attachment and\n\n107\n00:05:25.250 --> 00:05:28.980\nyou can filter based on the extension,\nbased on the size.\n\n108\n00:05:28.980 --> 00:05:32.870\nThere's all sorts of different things that\nyou can filter on to allow or denying it.\n\n109\n00:05:32.870 --> 00:05:36.750\nSo, a lot of different stuff there that\nyou can pull and actually deal with.\n\n110\n00:05:36.750 --> 00:05:40.040\nSo, these are all the agents that\nare running in the background.\n\n111\n00:05:40.040 --> 00:05:42.040\nSome of them we'll work with,\nsome of them we won't.\n\n112\n00:05:42.040 --> 00:05:44.260\nYou kinda pick and\nchoose based on your environment.\n\n113\n00:05:44.260 --> 00:05:47.470\nBut in this episode I wanted to show you\nguys a couple of real world examples of\n\n114\n00:05:47.470 --> 00:05:49.830\nhow you might use these rules, all right.\n\n115\n00:05:49.830 --> 00:05:53.410\nNow, each agent has a different\ncommand that we use to go in and\n\n116\n00:05:53.410 --> 00:05:54.090\nkind of set things.\n\n117\n00:05:54.090 --> 00:05:56.680\nWe have some PowerShell\ncommandlets that we have to use.\n\n118\n00:05:56.680 --> 00:05:58.460\nUnfortunately there's no GUI for this.\n\n119\n00:05:58.460 --> 00:06:01.740\nWe can't use the GUI to manage our Edge\nTransport Server so we've got to do it\n\n120\n00:06:01.740 --> 00:06:04.960\nfrom our management shell and\njust dive in there and start to set these.\n\n121\n00:06:04.960 --> 00:06:07.010\nSo let me show you some examples.\n\n122\n00:06:07.010 --> 00:06:11.430\nAll right, first off, let's say that you\nuse one of those real time block lists,\n\n123\n00:06:11.430 --> 00:06:12.440\nright, an RBL.\n\n124\n00:06:12.440 --> 00:06:16.550\nThere's a lot of companies out there like\nSpamhaus that maintain email blocklists\n\n125\n00:06:16.550 --> 00:06:20.270\nwhere they list all the servers out there\nthat have been identified as sending spam.\n\n126\n00:06:20.270 --> 00:06:23.350\nSo you can set your server to\nreject connections from them,\n\n127\n00:06:23.350 --> 00:06:24.730\nI might wanna turn that on.\n\n128\n00:06:24.730 --> 00:06:29.364\nSo, using Spamhaus as an example,\nif I wanna set that up,\n\n129\n00:06:29.364 --> 00:06:34.012\nthe command to do it would\nbe Add-IPBlockListProvider.\n\n130\n00:06:36.262 --> 00:06:39.829\nAll right, so this is the command that's\ngonna be reaching into the connection\n\n131\n00:06:39.829 --> 00:06:41.040\nfiltering agent.\n\n132\n00:06:41.040 --> 00:06:43.690\nAnd I'm gonna be adding\nsome new block list.\n\n133\n00:06:43.690 --> 00:06:44.820\nI need to give it a name.\n\n134\n00:06:44.820 --> 00:06:48.120\nAnd I'll just call mine Spamhaus,\nall right.\n\n135\n00:06:48.120 --> 00:06:51.180\nAnd then I need to give\nit a look up domain.\n\n136\n00:06:51.180 --> 00:06:56.920\nThe way that spam block list work is when\nyou get an email from a particular domain,\n\n137\n00:06:56.920 --> 00:07:00.430\nyou can take that domain and\nsend it to a DNS server that's out there.\n\n138\n00:07:00.430 --> 00:07:03.550\nAnd the way we find that DNS server\nis by specifying the lookup domain.\n\n139\n00:07:03.550 --> 00:07:08.188\nAnd the one that Spamhaus\nuses is zen.spamhaus.org and\n\n140\n00:07:08.188 --> 00:07:12.250\nthen we can specify what\nto do about these things.\n\n141\n00:07:12.250 --> 00:07:15.190\nSo I'll say, any match, dollar sign, true.\n\n142\n00:07:15.190 --> 00:07:17.600\nThe way it works is if you do\na DNS lookup for a domain and\n\n143\n00:07:17.600 --> 00:07:21.130\nit doesn't get an answer back,\nthen it's not on the blacklist, it's okay.\n\n144\n00:07:21.130 --> 00:07:25.410\nBut if you get any kind of response back\nthen that means it's on the block list and\n\n145\n00:07:25.410 --> 00:07:26.070\nwe can take action.\n\n146\n00:07:26.070 --> 00:07:29.700\nSo I'm saying if I get any match and\nI'll try and spell it right.\n\n147\n00:07:29.700 --> 00:07:33.190\nIf any match happens,\nthen I want to treat it as a spam relay,\n\n148\n00:07:33.190 --> 00:07:35.900\nsomebody I don't want\nto receive email from.\n\n149\n00:07:35.900 --> 00:07:39.980\nAnd then we can just say\nthat this is enabled.\n\n150\n00:07:39.980 --> 00:07:42.820\nSo, I'll set enabled to true cuz\nyou can disable this temporarily if\n\n151\n00:07:42.820 --> 00:07:44.650\nyou're trying to troubleshoot.\n\n152\n00:07:44.650 --> 00:07:46.420\nAnd then we do other\nrejection options here.\n\n153\n00:07:46.420 --> 00:07:50.500\nSo, I'll say reject response so\nthat I can send a custom error message.\n\n154\n00:07:50.500 --> 00:07:54.630\nOtherwise you're just gonna get one of\nthose five point one messages that's not\n\n155\n00:07:54.630 --> 00:07:57.423\nreally informative So\nI'm gonna give him a message and\n\n156\n00:07:57.423 --> 00:08:01.580\nI'll just say something like server\nrejected by email blacklist.\n\n157\n00:08:01.580 --> 00:08:04.620\nAnd that way, if somebody on the other end\nis trying to send me email they're getting\n\n158\n00:08:04.620 --> 00:08:05.970\nrejected, they can see why.\n\n159\n00:08:05.970 --> 00:08:09.220\nLike oh, apparently I got on a blacklist,\nI need to take care of that.\n\n160\n00:08:09.220 --> 00:08:13.440\nAnd when we run that, assuming I\ndon't have typos, looks like I do.\n\n161\n00:08:13.440 --> 00:08:14.220\nLet's see, add,\n\n162\n00:08:14.220 --> 00:08:17.880\na parameter cannot be found that\nmatches parameter name reject response.\n\n163\n00:08:17.880 --> 00:08:18.980\nSo, let me see.\n\n164\n00:08:18.980 --> 00:08:21.330\nOh, it's not reject,\nit's rejection response.\n\n165\n00:08:21.330 --> 00:08:26.670\nSo let me just update that and\nthere we go.\n\n166\n00:08:26.670 --> 00:08:28.390\nNow I have a real time block list.\n\n167\n00:08:28.390 --> 00:08:30.800\nAnd you'll see it's got a priority of one,\nI can go in and\n\n168\n00:08:30.800 --> 00:08:33.770\nstart adding more if I have\nother block lists I wanna add\n\n169\n00:08:33.770 --> 00:08:36.330\nyou can go crazy with it,\nyou don't want to go too crazy.\n\n170\n00:08:36.330 --> 00:08:40.900\nBut now any time a server connects, I'm\ngonna run them against the blacklist, and\n\n171\n00:08:40.900 --> 00:08:43.030\nif they're in the blacklist,\nI'll just reject their email, right?\n\n172\n00:08:43.030 --> 00:08:48.030\nSo pretty easy to jump that one right\nin there and get that taken care of.\n\n173\n00:08:48.030 --> 00:08:51.040\nAnother example is I might wanna\nsetup a spam quarantine, right?\n\n174\n00:08:51.040 --> 00:08:54.520\nWhat happens to email when the spam\ncompetence level is too high?\n\n175\n00:08:54.520 --> 00:08:57.290\nWell by default it goes in\nyour end user's junk mail.\n\n176\n00:08:57.290 --> 00:08:58.680\nWhat if you wanna intercept\nthat ahead of time and\n\n177\n00:08:58.680 --> 00:09:00.050\nsay don't put it in their junk mail?\n\n178\n00:09:00.050 --> 00:09:04.220\nLet's create a quarantine and set it\naside so the end users don't even see it.\n\n179\n00:09:04.220 --> 00:09:05.530\nAnd then if they wanna look for\n\n180\n00:09:05.530 --> 00:09:07.630\nsomething in spam they can just\nreach out to the help desk.\n\n181\n00:09:07.630 --> 00:09:09.500\nWell we can create a spam\nquarantine that does that.\n\n182\n00:09:09.500 --> 00:09:12.140\nAnd the Edge Transport Server\nis where we want to apply that.\n\n183\n00:09:12.140 --> 00:09:15.150\nSo the way we do that is with\nour content filtering agent.\n\n184\n00:09:15.150 --> 00:09:23.326\nSo I'm gonna say Set-ContentFilterConfig,\n-, and I'm gonna set a QuarantineMailbox.\n\n185\n00:09:23.326 --> 00:09:26.160\nNow, the quarantine mailbox,\nI need to give it an email address for\n\n186\n00:09:26.160 --> 00:09:27.710\na mailbox inside of my system, so\n\n187\n00:09:27.710 --> 00:09:32.120\nI might create something like\nspam@itprotv.net or something like that.\n\n188\n00:09:32.120 --> 00:09:35.340\nThis is gonna be the mailbox I'm\ngonna redirect these emails to.\n\n189\n00:09:35.340 --> 00:09:36.270\nAll right?\n\n190\n00:09:36.270 --> 00:09:43.480\nThen I can say the SCL quarantine enabled,\nthere.\n\n191\n00:09:43.480 --> 00:09:44.865\nSo I'm actually gonna\nturn the quarantine on.\n\n192\n00:09:44.865 --> 00:09:46.520\nCuz quarantine's off by default.\n\n193\n00:09:46.520 --> 00:09:48.700\nIt does actually make it to the end-users.\n\n194\n00:09:48.700 --> 00:09:51.675\nSo I'll do a $ true on that one.\n\n195\n00:09:51.675 --> 00:09:55.765\nAnd then I need to set\nthe SCL quarantine threshold.\n\n196\n00:09:55.765 --> 00:09:59.795\nAnd the threshold is the lowest\nSCL value that I actually used to\n\n197\n00:09:59.795 --> 00:10:00.615\nmove things to a quarantine.\n\n198\n00:10:00.615 --> 00:10:03.205\nI'm gonna set mine to six,\nwhich is probably a little aggressive.\n\n199\n00:10:03.205 --> 00:10:05.000\nYou might wanna choose something higher.\n\n200\n00:10:05.000 --> 00:10:06.320\nBut I'll choose six.\n\n201\n00:10:06.320 --> 00:10:08.270\nAnything that gets an SCL of six or\n\n202\n00:10:08.270 --> 00:10:11.790\nhigher, send to the quarantine\ninstead of the intended user.\n\n203\n00:10:11.790 --> 00:10:14.013\nSo, that's going to run and\nit's going to put in place.\n\n204\n00:10:14.013 --> 00:10:16.420\nAnd here it shows me no\nsettings have been modified.\n\n205\n00:10:16.420 --> 00:10:20.220\nSo apparently, I've already set it or\nit must already be at six.\n\n206\n00:10:20.220 --> 00:10:22.760\nBut if you were at something lower or\nhigher, then it's going to adjust it down.\n\n207\n00:10:25.320 --> 00:10:27.420\nLet's see, what other things might we do?\n\n208\n00:10:27.420 --> 00:10:29.290\nWell, that content filter.\n\n209\n00:10:29.290 --> 00:10:33.320\nMaybe there's certain keywords that\nI want to filter on like unsubscribe.\n\n210\n00:10:33.320 --> 00:10:34.750\nWell I could add a keyword filter.\n\n211\n00:10:34.750 --> 00:10:39.394\nI could say Add-ContentFilterPhrase.\n\n212\n00:10:39.394 --> 00:10:42.820\nAnd then I can specify the phrase\nthat I want to filter on.\n\n213\n00:10:42.820 --> 00:10:45.110\nAnd this is where you can\ndo all sorts of things.\n\n214\n00:10:45.110 --> 00:10:47.660\nI'll say look for unsubscribe.\n\n215\n00:10:47.660 --> 00:10:49.550\nBut you could be looking for other things,\n\n216\n00:10:49.550 --> 00:10:52.060\nwhoops, which if I spell\nit right will work better.\n\n217\n00:10:52.060 --> 00:10:53.700\nBut you could do phrases.\n\n218\n00:10:53.700 --> 00:10:56.000\nIf you're having trouble reading this\nemail, that's one of my favorites.\n\n219\n00:10:56.000 --> 00:10:58.750\nThose are different things\nthat you can key off of.\n\n220\n00:10:58.750 --> 00:11:03.310\nAnd then from there, we basically specify\nwhat we need to do with it, right?\n\n221\n00:11:03.310 --> 00:11:08.330\nAnd a lot of times what we wanna do\nwith it is simply Influence the SCL.\n\n222\n00:11:08.330 --> 00:11:11.966\nAnd the way we influence the SCL is by\nsaying whether this is a good word or\n\n223\n00:11:11.966 --> 00:11:14.950\na bad word, so\nthere's only two influences that we have.\n\n224\n00:11:14.950 --> 00:11:19.054\nYou can say good word if this is something\nthat should improve your SCL and\n\n225\n00:11:19.054 --> 00:11:20.000\nmake it better.\n\n226\n00:11:20.000 --> 00:11:24.329\nOr you can say if it's a bad word\nwhich is something that will\n\n227\n00:11:24.329 --> 00:11:27.800\nincrease your SCL number\nwhich makes it worse.\n\n228\n00:11:27.800 --> 00:11:30.970\nSo, an SCL of zero is great.\n\n229\n00:11:30.970 --> 00:11:32.470\nIt's not spam, it's gonna get through.\n\n230\n00:11:32.470 --> 00:11:34.240\nAn SCL of nine is really bad.\n\n231\n00:11:34.240 --> 00:11:35.500\nIt is spam, right.\n\n232\n00:11:35.500 --> 00:11:38.450\nSo by saying bad word,\nwe make that number a little bit higher.\n\n233\n00:11:38.450 --> 00:11:41.640\nAnd for each bad word that it hits,\nit's making it worse and worse and\n\n234\n00:11:41.640 --> 00:11:43.680\nworse until it finally gets\nthat SCL rating of nine.\n\n235\n00:11:45.500 --> 00:11:48.290\nAll right, so we'll set that,\nand I just set that influence for\n\n236\n00:11:48.290 --> 00:11:50.130\nthe phrase unsubscribe.\n\n237\n00:11:50.130 --> 00:11:52.740\nAnd you can continue to add\nmore phrases as you want.\n\n238\n00:11:52.740 --> 00:11:56.430\nAnd you can do just a get dash content\nfolder phrase to see the whole list of\n\n239\n00:11:56.430 --> 00:11:59.730\nwhat you filtered.\n\n240\n00:11:59.730 --> 00:12:00.810\nWe might also have,\n\n241\n00:12:00.810 --> 00:12:03.070\nlet's say there's a business partner\nout there that we deal with.\n\n242\n00:12:03.070 --> 00:12:04.720\nWe don't want to spam filter them at all.\n\n243\n00:12:04.720 --> 00:12:06.870\nWe want to get all the email from them,\nor the opposite.\n\n244\n00:12:06.870 --> 00:12:08.763\nWe have a server that we\nabsolutely want to block and\n\n245\n00:12:08.763 --> 00:12:10.180\nwe don't want to get email from them.\n\n246\n00:12:10.180 --> 00:12:13.590\nYou can set IP white list and black list.\n\n247\n00:12:13.590 --> 00:12:15.220\nIt's pretty straightforward.\n\n248\n00:12:15.220 --> 00:12:23.240\nThe way we do that is by saying\nAdd-IPAllowListEntry-IPAddress\n\n249\n00:12:23.240 --> 00:12:25.290\nfollowed by the address of\nthe server we're gonna allow.\n\n250\n00:12:25.290 --> 00:12:27.740\nSo let's say that there's\na server at 1.1.1,\n\n251\n00:12:27.740 --> 00:12:32.740\nI can add that and now any email that I\nget from that server is gonna be allowed.\n\n252\n00:12:32.740 --> 00:12:34.730\nIt's gonna bypass the spam filter.\n\n253\n00:12:34.730 --> 00:12:36.380\nWe won't apply an SCL or\nanything like that and\n\n254\n00:12:36.380 --> 00:12:37.800\nit's gonna come in through the system.\n\n255\n00:12:37.800 --> 00:12:39.085\nI just white listed that server.\n\n256\n00:12:39.085 --> 00:12:42.719\nAnd you can block list it the same\nway instead of doing an IPAllowList,\n\n257\n00:12:42.719 --> 00:12:46.240\nwe could come in and say,\nmaybe there's a server 2.2.2.2.\n\n258\n00:12:46.240 --> 00:12:49.370\nAnd I don't want to allow that one.\n\n259\n00:12:49.370 --> 00:12:50.350\nI want to block it.\n\n260\n00:12:50.350 --> 00:12:53.580\nSo I just change that\nword from allow to block.\n\n261\n00:12:53.580 --> 00:12:55.520\nNow, 2.2.2.2 is on my block list.\n\n262\n00:12:56.580 --> 00:13:00.130\nAnytime the server at 2.2.2 tries\nto connect, I don't ask it for\n\n263\n00:13:00.130 --> 00:13:01.010\na username and password.\n\n264\n00:13:01.010 --> 00:13:01.820\nI don't ask it for anything.\n\n265\n00:13:01.820 --> 00:13:03.790\nI just immediately disconnect it and\nthat's it.\n\n266\n00:13:03.790 --> 00:13:06.220\nI won't allow them to\nconnect to my SMTP server.\n\n267\n00:13:08.070 --> 00:13:12.020\nAll right, so\nthere's a couple of entries there.\n\n268\n00:13:12.020 --> 00:13:14.370\nLet's see, what else do we have?\n\n269\n00:13:14.370 --> 00:13:18.620\nOh, so here I was whitelisting and\nblacklisting entire servers.\n\n270\n00:13:18.620 --> 00:13:20.140\nMaybe it's not an entire\nserver that I want.\n\n271\n00:13:20.140 --> 00:13:22.600\nMaybe it's an individual user or a domain.\n\n272\n00:13:22.600 --> 00:13:25.560\nI wanna whitelist this domain or\nI wanna whitelist this user.\n\n273\n00:13:25.560 --> 00:13:27.970\nSo there's a few ways we can do that.\n\n274\n00:13:27.970 --> 00:13:32.414\nYou can say Set-ContentFilterConfig and\n\n275\n00:13:32.414 --> 00:13:38.586\nwe can say -BypassSenders and\nwhat this is gonna do is allow\n\n276\n00:13:38.586 --> 00:13:43.780\nus to add email addresses\nto the spam bypass list.\n\n277\n00:13:43.780 --> 00:13:48.750\nSo I might say,\nboy I always want to get email from\n\n278\n00:13:48.750 --> 00:13:54.340\nDon@itpro.tv if I can\nremember my on email address.\n\n279\n00:13:54.340 --> 00:13:59.017\nAnd if I have more than one, you just\nstick quote marks around it and then add\n\n280\n00:13:59.017 --> 00:14:03.810\ncommas between each one, so you can add\nmore than one address if you wanted.\n\n281\n00:14:03.810 --> 00:14:08.280\nSo I'm gonna add Don@itpro.tv and\nwhat did you get upset about here?\n\n282\n00:14:08.280 --> 00:14:11.420\nDoesn't match bypass senders.\n\n283\n00:14:11.420 --> 00:14:13.420\nOh, it's bypassed.\n\n284\n00:14:14.430 --> 00:14:15.110\nI have to add it.\n\n285\n00:14:15.110 --> 00:14:16.180\nIt's kinda past tense there.\n\n286\n00:14:16.180 --> 00:14:17.980\nSo bypassed senders.\n\n287\n00:14:17.980 --> 00:14:18.880\nThere we go.\n\n288\n00:14:18.880 --> 00:14:20.180\nAnd now I can add that to the list.\n\n289\n00:14:20.180 --> 00:14:22.380\nSo, now, any time an email comes in and\n\n290\n00:14:22.380 --> 00:14:27.610\nit shows as being sent by Don@itpro.tv,\nit's gonna bypass the spam list.\n\n291\n00:14:27.610 --> 00:14:32.090\nI can do the same thing for\nBypassedSenderDomains.\n\n292\n00:14:35.480 --> 00:14:39.014\nAnd then I could add in itpro.tv.\n\n293\n00:14:40.240 --> 00:14:43.380\nAnd then anytime I get an email that\nsays its from somebody at itpro.tv,\n\n294\n00:14:43.380 --> 00:14:45.620\nit'll bypass the spam list and\nthat'll get through.\n\n295\n00:14:45.620 --> 00:14:49.820\nSo that's another great way to\nbe able to kind of bypass that.\n\n296\n00:14:49.820 --> 00:14:51.530\nA couple of questions in the chat room.\n\n297\n00:14:51.530 --> 00:14:54.919\nOne was, can we do the same thing on\nthe mail server, and the answer is yes.\n\n298\n00:14:55.920 --> 00:14:58.460\nOn the mailbox server,\nthese aren't turned on by default.\n\n299\n00:14:58.460 --> 00:14:59.080\nWell not all of them.\n\n300\n00:14:59.080 --> 00:15:02.090\nSome of them are, but most of them aren't\nturned on by default because Microsoft\n\n301\n00:15:02.090 --> 00:15:03.960\nassumes you're doing that at your Edge.\n\n302\n00:15:03.960 --> 00:15:05.935\nThey assume you've got\nan Edge transport server or\n\n303\n00:15:05.935 --> 00:15:10.410\nthat you've got some third party system\nlike a Barracuda virus and spam firewall.\n\n304\n00:15:10.410 --> 00:15:11.760\nIf you've got one of those,\n\n305\n00:15:11.760 --> 00:15:14.470\nyou don't need to do the filtering\nhere on a mailbox server.\n\n306\n00:15:14.470 --> 00:15:17.170\nBut you can jump over to mailbox server,\ndo these same commands.\n\n307\n00:15:17.170 --> 00:15:20.590\nAnything that runs the transport service,\nwhich are mailbox servers and\n\n308\n00:15:20.590 --> 00:15:23.280\nEdge transport servers,\nthey can all do that.\n\n309\n00:15:23.280 --> 00:15:25.340\nSo you can configure it there.\n\n310\n00:15:25.340 --> 00:15:28.386\nThe other question in the chat room was\nare these Exchange Powershell commands,\n\n311\n00:15:28.386 --> 00:15:29.070\nand that's yes.\n\n312\n00:15:29.070 --> 00:15:31.360\nIf you just run the regular Powershell\nyou're not going to have this.\n\n313\n00:15:31.360 --> 00:15:33.860\nYou have to have\nthe Exchange Powershell modules loaded.\n\n314\n00:15:33.860 --> 00:15:36.550\nSo when you install Exchange,\n\n315\n00:15:37.550 --> 00:15:39.860\nit actually adds that\nExchange Management Shell right there.\n\n316\n00:15:39.860 --> 00:15:40.960\nSo we need that to be able\nto see these commands.\n\n317\n00:15:43.787 --> 00:15:47.958\nAll right so, that was white listing\na server, white listing a user,\n\n318\n00:15:47.958 --> 00:15:49.950\nwhite listing a domain, right?\n\n319\n00:15:49.950 --> 00:15:53.710\nCouple of different ways to set\nthat up as bypassed senders, okay?\n\n320\n00:15:53.710 --> 00:15:56.380\nYou can do bypassed recipients also,\nit's really the same command.\n\n321\n00:15:56.380 --> 00:15:58.261\nYou just say bypassed recipients, and\n\n322\n00:15:58.261 --> 00:16:00.830\nnow it is based on who is\nreceiving the email, right?\n\n323\n00:16:00.830 --> 00:16:06.113\nThis is the from field,\nrecipients will be the to field.\n\n324\n00:16:06.113 --> 00:16:06.776\nAll right, but\n\n325\n00:16:06.776 --> 00:16:09.736\notherwise those are the same basic\nsyntax there to white list those.\n\n326\n00:16:09.736 --> 00:16:13.364\nNow when you specify all these settings,\nyou can get them put in place,\n\n327\n00:16:13.364 --> 00:16:17.659\nyou get them loaded up, and now your Edge\ntransport server is filtering this content\n\n328\n00:16:17.659 --> 00:16:20.410\nbefore it ever makes it\ninside your network.\n\n329\n00:16:20.410 --> 00:16:22.020\nIt's really kinda that perfect solution.\n\n330\n00:16:23.020 --> 00:16:25.800\nSo this is what we really need\nto do to get the server working\n\n331\n00:16:25.800 --> 00:16:26.580\nthe way that we want.\n\n332\n00:16:26.580 --> 00:16:27.820\nSo just be familiar with these.\n\n333\n00:16:27.820 --> 00:16:28.950\nThere's a lot of different commands, and\n\n334\n00:16:28.950 --> 00:16:31.410\nI'll put all the commands in the show\nnotes so you guys can have them.\n\n335\n00:16:31.410 --> 00:16:33.940\nBut there's a lot of different\ncommands that are out there.\n\n336\n00:16:33.940 --> 00:16:36.930\nYou kinda have to pick and choose what's\nright for your environment to get it set\n\n337\n00:16:36.930 --> 00:16:40.150\nup the way that you want and\nget it configured properly.\n\n338\n00:16:40.150 --> 00:16:43.070\nNow, let's talk about something\nthat I haven't mentioned so far.\n\n339\n00:16:43.070 --> 00:16:47.330\nWhen you have an Edge transport server,\nit's suppose to be the entry point to get\n\n340\n00:16:47.330 --> 00:16:50.640\ninto your network and it can be the exit\npoint also if you want it to be.\n\n341\n00:16:50.640 --> 00:16:53.440\nBut it's the one that's\nexposed to the internet.\n\n342\n00:16:53.440 --> 00:16:56.710\nSo, when somebodies sending an email\nin your organization it passes through\n\n343\n00:16:56.710 --> 00:16:58.690\nthe Edge transport server first and\nthen it goes inside.\n\n344\n00:16:58.690 --> 00:17:02.190\nAnd that's why the Edge transport server\nis suck a great place to put these rules.\n\n345\n00:17:02.190 --> 00:17:06.522\nCuz you might have 50 mailbox servers, but\nyou've got this one Edge transport server,\n\n346\n00:17:06.522 --> 00:17:09.668\nthis one point of entry,\nwhere you can filter people's access.\n\n347\n00:17:09.668 --> 00:17:14.530\nSo that really works out well,\nunless the Edge transport server fails.\n\n348\n00:17:14.530 --> 00:17:16.600\nWhat happens if the Edge\ntransport server fails?\n\n349\n00:17:16.600 --> 00:17:19.710\nNow email can't get in or\nout of your organization right?\n\n350\n00:17:19.710 --> 00:17:22.930\nSo we need high availability for\nEdge transport servers.\n\n351\n00:17:22.930 --> 00:17:26.700\nWell fortunately, Edge transport\nservers don't really store any data.\n\n352\n00:17:26.700 --> 00:17:30.230\nSo there's not much to back up or\nreplicate or whatever.\n\n353\n00:17:30.230 --> 00:17:34.136\nIf we want more Edge transport servers, we\njust install more Edge transport servers.\n\n354\n00:17:34.136 --> 00:17:36.249\nYou install a second or\na third or a fourth and\n\n355\n00:17:36.249 --> 00:17:39.117\nyou set up Edge subscriptions for\neach one of them, right?\n\n356\n00:17:39.117 --> 00:17:42.658\nYou do Egge subscriptions, they do their\nown Edge sync and they're up and running.\n\n357\n00:17:42.658 --> 00:17:43.780\nAll right so that's no big deal.\n\n358\n00:17:43.780 --> 00:17:46.670\nRedundancy on Edge transport\nserver is super easy.\n\n359\n00:17:46.670 --> 00:17:49.950\nAll we have to do to make it redundant for\nthe internet, is to go in and\n\n360\n00:17:49.950 --> 00:17:53.580\nmodify our MX records,\nour mail exchange records in DNS.\n\n361\n00:17:53.580 --> 00:17:56.250\nOur MX records should point to all\nof our Edge transport servers.\n\n362\n00:17:56.250 --> 00:17:59.560\nAnd you can set priorities to change\nwhich one gets used by default, but\n\n363\n00:17:59.560 --> 00:18:01.600\nif one fails,\npeople just move on to the next one.\n\n364\n00:18:01.600 --> 00:18:03.750\nSuper easy to do redundancy there.\n\n365\n00:18:03.750 --> 00:18:07.130\nWhere the challenge is comes\nin these rules, right.\n\n366\n00:18:07.130 --> 00:18:11.390\nThe configuration for the most part is\nbeing pushed from the mailbox server\n\n367\n00:18:11.390 --> 00:18:14.360\nto the Edge Transport server\nas part of Edge subscriptions.\n\n368\n00:18:14.360 --> 00:18:16.550\nBut these rules aren't.\n\n369\n00:18:16.550 --> 00:18:19.520\nI'm configuring these rules right\nhere on my Edge Transport server.\n\n370\n00:18:19.520 --> 00:18:23.711\nSo if I have five Edge transport servers,\nI just configured one of them.\n\n371\n00:18:23.711 --> 00:18:27.332\nI've now got to go and do the same thing\nover again on each of the other four edge\n\n372\n00:18:27.332 --> 00:18:30.040\ntransport servers and\nthat's kind of a pain.\n\n373\n00:18:30.040 --> 00:18:32.330\nFirst off,\nit's a pain just that I have to do it.\n\n374\n00:18:32.330 --> 00:18:35.810\nSecondly, it's a pain because, you guys\nsaw it I made some typos doing this.\n\n375\n00:18:35.810 --> 00:18:37.780\nWell, imagine if I had to\ndo it four more times.\n\n376\n00:18:37.780 --> 00:18:40.130\nI'm gonna get really frustrated\ncuz I suck at typing, right?\n\n377\n00:18:40.130 --> 00:18:44.320\nSo we don't want that, well fortunately\nMicrosoft made it pretty easy\n\n378\n00:18:44.320 --> 00:18:48.870\nto clone the configuration of one\nEdge transport server on your others.\n\n379\n00:18:48.870 --> 00:18:52.840\nWe can actually export this configuration\nwhich will include the rules.\n\n380\n00:18:52.840 --> 00:18:55.974\nAnd we can import that on our\nother Edge transport servers and\n\n381\n00:18:55.974 --> 00:18:58.310\nthey'll have the same rules.\n\n382\n00:18:58.310 --> 00:19:02.446\nIt's just cloning the config of an Edge\ntransport server and it's super easy.\n\n383\n00:19:02.446 --> 00:19:03.464\nI say it's super easy.\n\n384\n00:19:03.464 --> 00:19:05.002\nIt's super easy if you\nremember the commands,\n\n385\n00:19:05.002 --> 00:19:06.655\nwe gotta type of a few commands out here.\n\n386\n00:19:06.655 --> 00:19:10.160\nMicrosoft's actually created a few\nscripts for us that help us to do this.\n\n387\n00:19:10.160 --> 00:19:12.110\nLet me show you how it works.\n\n388\n00:19:12.110 --> 00:19:14.340\nI'm going to start here on my Edge\ntransport server that we just setup.\n\n389\n00:19:14.340 --> 00:19:16.390\nSo let's say this one is now setup,\nit's It's perfect,\n\n390\n00:19:16.390 --> 00:19:18.640\nit's got everything the way I want it.\n\n391\n00:19:18.640 --> 00:19:21.660\nSo I want to export its configuration.\n\n392\n00:19:21.660 --> 00:19:25.060\nWell,there's a script buried away\nin the Exchange install directory.\n\n393\n00:19:25.060 --> 00:19:28.590\nSo I need to get into the Exchange\ninstall directory which is\n\n394\n00:19:28.590 --> 00:19:38.100\nc:/programfiles/microsoft/exchangeserver/-\nversion15/scripts.\n\n395\n00:19:38.100 --> 00:19:41.310\nThat nice long path there rolls,\nright off the tongue.\n\n396\n00:19:41.310 --> 00:19:44.553\nThere's a ton of scripts in here,\nif you pull up the directory,\n\n397\n00:19:44.553 --> 00:19:46.543\nthat do all sorts of different things.\n\n398\n00:19:46.543 --> 00:19:50.084\nLook at all these PS1 files\nthat are rolling by, or PSD1s.\n\n399\n00:19:50.084 --> 00:19:52.560\nThere's a ton of stuff that\ncan do all sorts of things.\n\n400\n00:19:52.560 --> 00:19:56.990\nAll right, well what I want is I wanna\nbe able to export my configuration.\n\n401\n00:19:56.990 --> 00:19:59.990\nAnd so\nthere is a export edge config script.\n\n402\n00:19:59.990 --> 00:20:04.547\nIf I were to scroll around in here\nit would turn up somewhere in here.\n\n403\n00:20:04.547 --> 00:20:07.703\nExport, there it is, ExportEdgeConfig.ps1.\n\n404\n00:20:07.703 --> 00:20:08.850\nThat's the script I want.\n\n405\n00:20:08.850 --> 00:20:11.620\nIt's gonna let me export this config so\nI can then turn around and\n\n406\n00:20:11.620 --> 00:20:13.059\nimport it on other servers.\n\n407\n00:20:14.190 --> 00:20:15.950\nSo I'm gonna run that script.\n\n408\n00:20:17.100 --> 00:20:21.520\nI'm gonna call it, by saying .\\ because\nyou have to reference the folder name,\n\n409\n00:20:21.520 --> 00:20:22.970\ncuz this folder is not in the path.\n\n410\n00:20:22.970 --> 00:20:25.182\nPowerShell's really particular about that.\n\n411\n00:20:25.182 --> 00:20:30.308\nAnd I'm gonna call\nExportEdgeConfig.ps1 and\n\n412\n00:20:30.308 --> 00:20:35.062\nthen I'm gonna tell it to CloneConfigData.\n\n413\n00:20:35.062 --> 00:20:36.780\nAnd then I need to tell\nit where to clone it to.\n\n414\n00:20:36.780 --> 00:20:41.482\nAnd I'll just put it in c:\\EdgeConfig.xml.\n\n415\n00:20:41.482 --> 00:20:42.760\nIt is an xml file.\n\n416\n00:20:42.760 --> 00:20:44.346\nYou can give it whatever\nextension you want,\n\n417\n00:20:44.346 --> 00:20:46.620\nbut at the end of the day it is\nan xml file that it's gonna create.\n\n418\n00:20:46.620 --> 00:20:51.411\nAnd so this is gonna dump that\nconfiguration into C:\\EdgeConfig.xml.\n\n419\n00:20:51.411 --> 00:20:53.360\nOkay, so I'm gonna run that.\n\n420\n00:20:53.360 --> 00:20:56.440\nAnd it's now dumping that configuration,\nincluding all the rules and\n\n421\n00:20:56.440 --> 00:20:57.880\nother things into that file.\n\n422\n00:20:57.880 --> 00:20:59.560\nAll right, so there we go.\n\n423\n00:20:59.560 --> 00:21:01.620\nIt told me it's done.\n\n424\n00:21:01.620 --> 00:21:03.780\nAnd if I use Notepad,\nI can actually look at it.\n\n425\n00:21:05.130 --> 00:21:05.910\nAnd I can fire it up.\n\n426\n00:21:05.910 --> 00:21:08.989\nAnd here it is.\nWe can kinda browse in here, and\n\n427\n00:21:08.989 --> 00:21:11.267\nsee what that looks like.\n\n428\n00:21:11.267 --> 00:21:13.947\nLet me make this font a little bit\nbigger so we can kinda read it,\n\n429\n00:21:13.947 --> 00:21:16.985\nNotepad is not necessarily the greatest\nfor increasing font size, but\n\n430\n00:21:16.985 --> 00:21:19.390\nwe'll give it a shot, there we go.\n\n431\n00:21:19.390 --> 00:21:22.120\nAlright so looking at a lot of this\nis just information about like\n\n432\n00:21:22.120 --> 00:21:25.770\ndirectory sizes you know quotas and\nthings that are set on stuff.\n\n433\n00:21:25.770 --> 00:21:28.620\nBut there's some important\nthings in here as we look down\n\n434\n00:21:28.620 --> 00:21:31.200\nas far as our basic\nconfiguration is concerned.\n\n435\n00:21:31.200 --> 00:21:34.940\nAnd so as you scroll eventually in here,\nwe'll start to find things like\n\n436\n00:21:34.940 --> 00:21:38.420\nwhat our whitelists are,\nwhat our content filters are, and so on.\n\n437\n00:21:38.420 --> 00:21:40.760\nAnd this is a pretty big file.\n\n438\n00:21:40.760 --> 00:21:41.850\nIf I scroll through here,\n\n439\n00:21:41.850 --> 00:21:45.070\nyou'll see there is a lot of\ninformation tucked away in here.\n\n440\n00:21:45.070 --> 00:21:48.070\nAnd this is the full configuration\nof our Edge transport server.\n\n441\n00:21:48.070 --> 00:21:50.010\nThere's a lot in here.\n\n442\n00:21:50.010 --> 00:21:53.260\nHere I'm in some of, like,\nattachment filter entries, right?\n\n443\n00:21:53.260 --> 00:21:54.460\nAnd so we can see some of the filters.\n\n444\n00:21:54.460 --> 00:21:58.150\nLike here it's filtering out basic\nfiles and batch files and so on.\n\n445\n00:21:58.150 --> 00:22:01.470\nI think we added those in another show,\nso that's why they're turning up here.\n\n446\n00:22:01.470 --> 00:22:04.629\nBut each of the configs will\nbe located in here somewhere.\n\n447\n00:22:05.960 --> 00:22:09.290\nSo, I can take this and import it on\nanother system and I'll be in business.\n\n448\n00:22:09.290 --> 00:22:11.432\nExcept there's a little gotcha.\n\n449\n00:22:11.432 --> 00:22:16.500\nWhen it exports to config,\nit's the true config for this server.\n\n450\n00:22:16.500 --> 00:22:19.350\nAnd so there's information\nin here that is not unique.\n\n451\n00:22:19.350 --> 00:22:20.960\nFor example, right here.\n\n452\n00:22:20.960 --> 00:22:26.240\nThe distinguish name of\nthe server is LAB-EDGE01.\n\n453\n00:22:26.240 --> 00:22:28.580\nIf I'm gonna import this\nconfig on another server,\n\n454\n00:22:28.580 --> 00:22:30.645\nis that server gonna be called LAB-EDGE01?\n\n455\n00:22:30.645 --> 00:22:32.850\nNo, it's gonna have a different name.\n\n456\n00:22:32.850 --> 00:22:37.890\nSo, before I can use this file,\nI need to make it a little more generic.\n\n457\n00:22:37.890 --> 00:22:40.560\nI need to strip out the private stuff.\n\n458\n00:22:40.560 --> 00:22:44.220\nAnd the way we do that is not by\nactually stripping it out, but\n\n459\n00:22:44.220 --> 00:22:46.720\nby creating an answer file.\n\n460\n00:22:46.720 --> 00:22:51.760\nAn answer file takes this file,\nlocates the stuff\n\n461\n00:22:51.760 --> 00:22:56.450\nthat should be unique and it creates an\nanswer file that overrides those values.\n\n462\n00:22:56.450 --> 00:22:59.180\nWe need to override that distinguish name.\n\n463\n00:22:59.180 --> 00:23:03.455\nWe need to override any entry in here that\nrefers to the IP address of this server.\n\n464\n00:23:03.455 --> 00:23:05.900\nAnd fortunately we've got\na script that can do that too.\n\n465\n00:23:07.070 --> 00:23:09.660\nSo what we would do from here\nis we would take this file,\n\n466\n00:23:09.660 --> 00:23:13.210\nthis EdgeConfig.xml that we've just made.\n\n467\n00:23:13.210 --> 00:23:16.790\nWe would copy that to a USB key or\nwhatever and take it to our other Edge\n\n468\n00:23:16.790 --> 00:23:21.920\nservers, and on the other Edge servers,\nstep one you'll generate an answer file.\n\n469\n00:23:21.920 --> 00:23:23.350\nCuz the answer file is\ngonna be different for\n\n470\n00:23:23.350 --> 00:23:26.230\neach Edge server it's gonna be\na different name, different IP address.\n\n471\n00:23:26.230 --> 00:23:31.380\nAnd then two, we import the config\nwith our newly created answer file.\n\n472\n00:23:31.380 --> 00:23:32.760\nSo let me show you how to\ncreate an answer file.\n\n473\n00:23:32.760 --> 00:23:34.550\nI'm just gonna do it\nhere in the same server,\n\n474\n00:23:34.550 --> 00:23:37.361\nbut it doesn't matter it will be the same\non any server that we ran it on.\n\n475\n00:23:38.540 --> 00:23:40.880\nSo it's a script, I'll need to get\nin the script directory first,\n\n476\n00:23:40.880 --> 00:23:42.690\nwhich is this where I already am.\n\n477\n00:23:42.690 --> 00:23:47.050\nAnd then from here I'm gonna call\nthe script ImportEdgeConfig.\n\n478\n00:23:47.050 --> 00:23:50.920\nSo I did ExportEdgeConfig to get it out,\nimport is what's gonna bring it in.\n\n479\n00:23:50.920 --> 00:23:53.210\nNow I'm not actually importing here.\n\n480\n00:23:53.210 --> 00:23:54.630\nI'm creating an answer file.\n\n481\n00:23:54.630 --> 00:23:57.250\nSo I'm gonna tell it in a minute\nthat this is not a true import.\n\n482\n00:23:57.250 --> 00:23:59.340\nSo I'm gonna start just by\ncalling this script though.\n\n483\n00:23:59.340 --> 00:24:02.890\nImportEdgeConfig.ps1.\n\n484\n00:24:02.890 --> 00:24:07.212\nI'm gonna tell it where\nI'm getting my data from.\n\n485\n00:24:07.212 --> 00:24:13.560\nSo -CloneConfigData: and\nthen I'll point to where I put the file.\n\n486\n00:24:14.990 --> 00:24:16.950\nSo, so far it's kinda the same\nas the other command.\n\n487\n00:24:16.950 --> 00:24:17.580\nRight?\n\n488\n00:24:17.580 --> 00:24:19.190\nBut here's where things\nget a little different.\n\n489\n00:24:19.190 --> 00:24:23.757\nI need to add -IsImport $false.\n\n490\n00:24:23.757 --> 00:24:25.220\nAll right.\n\n491\n00:24:25.220 --> 00:24:28.530\nThat's what's gonna let the script know,\ndon't import this config yet.\n\n492\n00:24:28.530 --> 00:24:29.870\nRun in your other mode.\n\n493\n00:24:29.870 --> 00:24:32.230\nThe only other mode is to\ngenerate an answer file.\n\n494\n00:24:32.230 --> 00:24:36.761\nSo by doing IsImport $false,\ntells it to create an answer file.\n\n495\n00:24:38.220 --> 00:24:43.630\nAnd then I can say CloneConfigAnswer: and\n\n496\n00:24:43.630 --> 00:24:45.380\ntell it where I want\nthe answer file to be.\n\n497\n00:24:45.380 --> 00:24:48.884\nAnd I'll just make this one C:/answer.xml.\n\n498\n00:24:48.884 --> 00:24:50.130\nAll right.\n\n499\n00:24:50.130 --> 00:24:52.390\nSo now it's gonna run.\n\n500\n00:24:52.390 --> 00:24:55.420\nIt's not going to import the config,\n\n501\n00:24:55.420 --> 00:25:00.785\nit's gonna locate any unique values, and\ncreate an answer file overriding them.\n\n502\n00:25:00.785 --> 00:25:03.110\nOverriding anywhere\nthe computer name is used,\n\n503\n00:25:03.110 --> 00:25:07.050\nanywhere the IP address is used,\nanywhere the private encryption key.\n\n504\n00:25:07.050 --> 00:25:08.150\nSee how it's got this here,\n\n505\n00:25:08.150 --> 00:25:11.610\npasswords will be encrypted with the\ndefault script encryption key and so on?\n\n506\n00:25:11.610 --> 00:25:14.730\nBasically, we have an Edge subscription\nhere that's different from the Edge\n\n507\n00:25:14.730 --> 00:25:17.380\nsubscription from the other server,\nand so we've got different keys,\n\n508\n00:25:17.380 --> 00:25:21.980\nwe've got different information, and so\nit's basically overriding that, okay.\n\n509\n00:25:21.980 --> 00:25:23.110\nAnd then once that's done,\n\n510\n00:25:23.110 --> 00:25:25.840\nit creates an answer file that\nhas everything that's different.\n\n511\n00:25:25.840 --> 00:25:29.220\nNow, my answer file is gonna be the least\nentertaining of any answer file.\n\n512\n00:25:29.220 --> 00:25:30.925\nCuz I ran it on the same server, right?\n\n513\n00:25:30.925 --> 00:25:32.980\nSo what's not gonna match?\n\n514\n00:25:32.980 --> 00:25:36.430\nNothing, everything's gonna match here,\nso it doesn't have to override anything.\n\n515\n00:25:36.430 --> 00:25:40.190\nBut on a different server it has to\noverride name, IP, security key,\n\n516\n00:25:40.190 --> 00:25:41.660\nit has to override a lot of stuff.\n\n517\n00:25:41.660 --> 00:25:45.645\nSo when you look at the answer\nfile that created, so for me,\n\n518\n00:25:45.645 --> 00:25:50.950\nC:/answer.xml, it'll have this\nmachine specific settings.\n\n519\n00:25:50.950 --> 00:25:55.400\nAnd in between these two tags,\nit'll have all the overridden values.\n\n520\n00:25:55.400 --> 00:25:57.820\nEverything that should be\nunique will be overridden,\n\n521\n00:25:57.820 --> 00:26:01.120\nand it'll update it to reflect\nthe server that you're on.\n\n522\n00:26:01.120 --> 00:26:04.010\nSo it populates it out\nexactly as you need it.\n\n523\n00:26:04.010 --> 00:26:09.210\nAnd at that stage, now you can just import\nit and it'll have everything you need.\n\n524\n00:26:09.210 --> 00:26:13.082\nYou can just hit your up arrow\nto bring that command back and\n\n525\n00:26:13.082 --> 00:26:18.640\nwhere you've got IsImport $false,\nyou change that to IsImport $true, right?\n\n526\n00:26:18.640 --> 00:26:21.360\nNow it knows that you wanna do the import,\nand\n\n527\n00:26:21.360 --> 00:26:25.200\nthis is the answer file that it's\ngoing to read instead of writing.\n\n528\n00:26:25.200 --> 00:26:27.070\nAnd now it's gonna import the config and\n\n529\n00:26:27.070 --> 00:26:31.620\nget us all set up the way that we want\nit to be, and we'll be in business.\n\n530\n00:26:31.620 --> 00:26:35.940\nSo if I get all the rules set\nup perfectly on one server,\n\n531\n00:26:35.940 --> 00:26:39.070\nI run the ExportEdgeConfig\nscript to dump its config.\n\n532\n00:26:39.070 --> 00:26:41.630\nI copy the config to all my other servers.\n\n533\n00:26:41.630 --> 00:26:45.100\nI do the import as a false to\ngenerate the answer file and\n\n534\n00:26:45.100 --> 00:26:46.705\nthen I do the import as a true.\n\n535\n00:26:46.705 --> 00:26:48.810\nAnd I've even seen people where,\n\n536\n00:26:48.810 --> 00:26:51.990\nif you make a lot of changes to your\nservers, where they automate this.\n\n537\n00:26:51.990 --> 00:26:55.590\nWhere they say, every night at midnight,\ndump the configs\n\n538\n00:26:55.590 --> 00:26:57.720\ncopy into the other servers and\nhave the other servers import them.\n\n539\n00:26:57.720 --> 00:26:59.540\nYou can automate them through\nPowerShell scripts and\n\n540\n00:26:59.540 --> 00:27:01.760\nthe task scheduler, if you want.\n\n541\n00:27:01.760 --> 00:27:03.770\nBut even running it\nmanually is not a big deal,\n\n542\n00:27:03.770 --> 00:27:06.150\nif you don't make a lot of\nchanges on your Edge servers.\n\n543\n00:27:06.150 --> 00:27:10.270\nSo, here we run through that process,\nwe get loaded up, and you're in business.\n\n544\n00:27:10.270 --> 00:27:13.790\nSo this is the real power of the Edge\nservers, is that we can configure\n\n545\n00:27:13.790 --> 00:27:17.910\nvery specific rules that dictate what\nemail's allowed through and what isn't.\n\n546\n00:27:17.910 --> 00:27:21.460\nWe can do whitelist, blacklist,\ncontent filters, all that crazy stuff, and\n\n547\n00:27:21.460 --> 00:27:25.508\nit happens before the email gets\ninside of our organization.\n\n548\n00:27:25.508 --> 00:27:29.810\nAnd then second, we can easily clone\nit across more than one Edge server,\n\n549\n00:27:29.810 --> 00:27:32.730\nwhich makes redundancy and\nbackups super easy.\n\n550\n00:27:32.730 --> 00:27:33.680\nWe don't need clusters.\n\n551\n00:27:33.680 --> 00:27:35.140\nWe don't need shared storage.\n\n552\n00:27:35.140 --> 00:27:38.549\nWe just clone this simple config cross\nthe systems and you're in business.\n\n553\n00:27:38.549 --> 00:27:41.050\nAnd even in terms of doing\nbackups of the server,\n\n554\n00:27:41.050 --> 00:27:44.291\nwe don't really need to backup\nan Edge Transport server do we?\n\n555\n00:27:44.291 --> 00:27:47.580\nIf we have that Edge config file,\nthat config export,\n\n556\n00:27:47.580 --> 00:27:52.081\nbecause we can build up an all new server\nand just import that config file and\n\n557\n00:27:52.081 --> 00:27:53.880\nnow it's back the way it was.\n\n558\n00:27:53.880 --> 00:27:57.200\nYou'll have to setup the Edge subscription\nagain, you've always gotta do that but\n\n559\n00:27:57.200 --> 00:27:59.200\notherwise we can import that file and\nyou're back in business.\n\n560\n00:27:59.200 --> 00:28:02.660\nSo instead of backing up the server you\njust copy that XML file to a USB key\n\n561\n00:28:02.660 --> 00:28:03.880\nand you're done.\n\n562\n00:28:03.880 --> 00:28:06.200\nAnd if you don't change it for six months,\nyou don't need to back it up for\n\n563\n00:28:06.200 --> 00:28:08.775\nsix months cuz the key has\neverything that you need.\n\n564\n00:28:08.775 --> 00:28:12.550\nEdge Transport servers don't really hold\nany sensitive data other than the rule\n\n565\n00:28:12.550 --> 00:28:13.395\nconfiguration.\n\n566\n00:28:13.395 --> 00:28:14.520\nSo pretty easy to get that.\n\n567\n00:28:15.940 --> 00:28:18.828\nAll right, well that's about all\nI've got on Edge Transport servers.\n\n568\n00:28:18.828 --> 00:28:20.940\nSo this is a pretty good\nspot to wrap this one up.\n\n569\n00:28:20.940 --> 00:28:24.900\nIn this episode we got a chance to see\nconfiguring various rule types and\n\n570\n00:28:24.900 --> 00:28:26.240\na few real world examples there.\n\n571\n00:28:26.240 --> 00:28:28.980\nAnd then we wrapped up talking\nabout how to export those rules and\n\n572\n00:28:28.980 --> 00:28:32.500\nimport them on our other Edge\ntransport servers for redundancy.\n\n573\n00:28:32.500 --> 00:28:36.600\nAnd, on that note, that's about all I've\ngot to say on Edge transport servers, so\n\n574\n00:28:36.600 --> 00:28:37.440\nwe're gonna wrap it up here.\n\n575\n00:28:37.440 --> 00:28:41.529\nI hope you guys enjoyed it,\nsigning off for ITProTV, I'm Don Pezet.\n\n576\n00:28:41.529 --> 00:28:42.877\nAnd I'll see you next time.\n\n577\n00:28:42.877 --> 00:28:49.260\n[MUSIC]\n\n",
          "vimeoId": "137178876"
        }
      ],
      "title": "Edge Transport Server"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don discusses some of the different methods available for monitoring replication health in Exchange 2013. He begins by demonstrating how to use the PowerShell to query Database Copy status and Database Availability Group health. He then demonstrates using several counters in the Windows Performance Monitor to record performance trends over longer periods of time.",
          "length": "1652",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance-092115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance-092115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance-092115-1-sm.jpg",
          "title": "Monitoring and Maintenance",
          "transcript": "WEBVTT\n\n1\n00:00:00.226 --> 00:00:10.548\n[MUSIC]\n\n2\n00:00:10.548 --> 00:00:11.320\nAll right.\n\n3\n00:00:11.320 --> 00:00:13.100\nGood morning, good afternoon,\nand good evening.\n\n4\n00:00:13.100 --> 00:00:15.457\nAnd welcome back to another\nepisode of ITProTV.\n\n5\n00:00:15.457 --> 00:00:19.820\nI'm your host, Don Pezet, back again with\nanother episode of Microsoft Exchange.\n\n6\n00:00:19.820 --> 00:00:22.880\nAnd in this episode, we're gonna be\nlooking at some pretty important stuff.\n\n7\n00:00:22.880 --> 00:00:27.610\nBecause it's all about monitoring and\nmaintaining our exchange environment.\n\n8\n00:00:27.610 --> 00:00:31.190\nNow when we get Exchange all configured,\nand put into place, and everything's\n\n9\n00:00:31.190 --> 00:00:35.170\nworking the way we want, that's great,\nbut things rarely stay that way.\n\n10\n00:00:35.170 --> 00:00:38.550\nYou guys know as well as I do\nthat the longer a server runs,\n\n11\n00:00:38.550 --> 00:00:40.840\nthe more likely issues are going to arise.\n\n12\n00:00:40.840 --> 00:00:45.150\nAnd we need to know how to be able\nto spot that problems are there and\n\n13\n00:00:45.150 --> 00:00:48.130\nthen to try and isolate the areas where\nthe problems are originating from.\n\n14\n00:00:48.130 --> 00:00:51.100\nSo we can kind of keep our service up and\nrunning and healthy.\n\n15\n00:00:51.100 --> 00:00:52.550\nSo that's what we wanna\ntackle in this episode,\n\n16\n00:00:52.550 --> 00:00:55.320\nsome of the different things to look out\nfor, some of the different tools that\n\n17\n00:00:55.320 --> 00:00:59.630\nare available for us and which tools are\nappropriate for which needs, all right.\n\n18\n00:00:59.630 --> 00:01:02.760\nNow, obviously monitoring our exchange\nenvironment is a pretty big topic.\n\n19\n00:01:02.760 --> 00:01:04.690\nThere's a lot of different\nthings to monitor.\n\n20\n00:01:04.690 --> 00:01:08.590\nAnd I've kind of shown you some of those\nthroughout this series as we've gone along\n\n21\n00:01:08.590 --> 00:01:13.150\nbut, just in general, let's say this\nis your first day at a brand new job.\n\n22\n00:01:13.150 --> 00:01:16.570\nYou've got this exchange environment\nyou've never touched before and\n\n23\n00:01:16.570 --> 00:01:20.000\nyou just wanna look at it and get\nan idea of whether it's healthy or not.\n\n24\n00:01:20.000 --> 00:01:21.150\nAll right.\nWell,\n\n25\n00:01:21.150 --> 00:01:23.810\nlet me walk you through some of the\ndifferent things that I like to look at\n\n26\n00:01:23.810 --> 00:01:27.120\njust for my own self when I go work\non these types of environments.\n\n27\n00:01:27.120 --> 00:01:30.380\nOne of the first places I\nlike to start is replication.\n\n28\n00:01:30.380 --> 00:01:30.900\nAll right.\n\n29\n00:01:30.900 --> 00:01:33.910\nMost people who deploy\nexchange in this day in age\n\n30\n00:01:33.910 --> 00:01:35.140\nare gonna worry about redundancy.\n\n31\n00:01:35.140 --> 00:01:36.950\nThey're gonna worry about availability.\n\n32\n00:01:36.950 --> 00:01:40.256\nIf you're really worried about problems on\nyour network, you need to have a plan B.\n\n33\n00:01:40.256 --> 00:01:41.115\nRight?\n\n34\n00:01:41.115 --> 00:01:45.920\nAnd there's no better plan B than\nreplicated server stored somewhere else.\n\n35\n00:01:45.920 --> 00:01:49.500\nNow for client access servers we don't\nreally have to worry about it so much,\n\n36\n00:01:49.500 --> 00:01:50.840\nright, because on a client access server,\n\n37\n00:01:50.840 --> 00:01:53.730\nif I want redundancy I just bring\nup another client access server.\n\n38\n00:01:53.730 --> 00:01:55.560\nThere's no real data stored in them.\n\n39\n00:01:55.560 --> 00:01:56.290\nThat's easy, right.\n\n40\n00:01:56.290 --> 00:01:58.680\nThere's nothing really to deal with there.\n\n41\n00:01:58.680 --> 00:02:01.740\nBut on the mailbox side it's\na lot more challenging.\n\n42\n00:02:01.740 --> 00:02:04.690\nAnd we saw that back in the database\navailability groups episodes,\n\n43\n00:02:04.690 --> 00:02:08.160\nif you haven't see those yet,\njust definitely jump over and watch those.\n\n44\n00:02:08.160 --> 00:02:10.960\nBut with a database availability group,\n\n45\n00:02:10.960 --> 00:02:13.810\nexchange is basically\nsetting up a cluster,\n\n46\n00:02:13.810 --> 00:02:19.110\na cluster without shared storage which\nmeans that whole mailbox database\n\n47\n00:02:19.110 --> 00:02:23.320\nhas to be replicated across the network\nto whoever else is in that cluster.\n\n48\n00:02:23.320 --> 00:02:26.820\nAnd when you set that up initially,\nthings might go great.\n\n49\n00:02:26.820 --> 00:02:29.850\nBut then over time,\nnetwork conditions might change or\n\n50\n00:02:29.850 --> 00:02:33.840\nserver conditions might change, and that\nreplication might not be working properly.\n\n51\n00:02:33.840 --> 00:02:35.110\nAnd if that's the case,\n\n52\n00:02:35.110 --> 00:02:38.910\nyou might have a fully redundant\nenvironment that's way out of date.\n\n53\n00:02:38.910 --> 00:02:42.660\nAnd the data that you're replicating is\njust not making it to the other side, and\n\n54\n00:02:42.660 --> 00:02:46.520\nnow when a failure occurs, that\nredundant copy doesn't help you, right?\n\n55\n00:02:46.520 --> 00:02:50.440\nOr even worse,\nmaybe the redundant copy is down, and\n\n56\n00:02:50.440 --> 00:02:53.290\nyou don't know it,\nbecause the main copy is up and running.\n\n57\n00:02:53.290 --> 00:02:56.225\nIf the main database is up and running,\nyour end users are in their email,\n\n58\n00:02:56.225 --> 00:03:00.610\neverything's happy, mail is flowing,\nyou might not realize that meanwhile,\n\n59\n00:03:00.610 --> 00:03:04.460\non the back end, a secondary copy of\nthat database is actually off line.\n\n60\n00:03:04.460 --> 00:03:06.950\nSo it's important that we monitor that and\nwe keep an eye on it, and\n\n61\n00:03:06.950 --> 00:03:09.230\nthere's a few different ways to do that.\n\n62\n00:03:09.230 --> 00:03:11.700\nNow I know we can go through\nthe exchange administration center.\n\n63\n00:03:11.700 --> 00:03:12.660\nThe webpage.\n\n64\n00:03:12.660 --> 00:03:13.630\nWe can browse in there.\n\n65\n00:03:13.630 --> 00:03:15.900\nWe get some basic status information.\n\n66\n00:03:15.900 --> 00:03:18.945\nBut the really good data\nis found in the PowerShell.\n\n67\n00:03:18.945 --> 00:03:22.685\nThere's a ton of PowerShell commandlets\nthat we can use to look at performance on\n\n68\n00:03:22.685 --> 00:03:27.035\nour server, as well as just\ndoing various health tests, and\n\n69\n00:03:27.035 --> 00:03:29.855\nthere's the good old trusty\nperformance monitor.\n\n70\n00:03:29.855 --> 00:03:34.545\nThe performance monitor gives us a ton of\ndata about all the aspects of our system\n\n71\n00:03:34.545 --> 00:03:35.685\nand so we can use those too.\n\n72\n00:03:37.170 --> 00:03:39.810\nSo let's say this is me sitting down\non a server for the first time and\n\n73\n00:03:39.810 --> 00:03:42.780\nI wanna make sure that\nreplication is running smooth.\n\n74\n00:03:42.780 --> 00:03:44.410\nLet's walk through the paces.\n\n75\n00:03:44.410 --> 00:03:45.990\nLet me start here with the GUI.\n\n76\n00:03:45.990 --> 00:03:49.810\nIn the GUI, we can quickly just\njump right down to servers.\n\n77\n00:03:49.810 --> 00:03:53.630\nAnd then under servers, you can take\na look at a few different places.\n\n78\n00:03:53.630 --> 00:03:55.730\nWe've got our servers right here,\nthey kind of show up,\n\n79\n00:03:55.730 --> 00:03:57.500\nobviously your server\nshould be in the list.\n\n80\n00:03:57.500 --> 00:04:01.377\nIf we go to databases you should be able\nto find your database like I've got this\n\n81\n00:04:01.377 --> 00:04:04.807\none here, sales DB and it shows us\nhaving multiples copies, right.\n\n82\n00:04:04.807 --> 00:04:09.260\nSo this database is present on two\ndifferent servers lab mailbox 01 and\n\n83\n00:04:09.260 --> 00:04:12.109\nlab castle 1, so\nit should be in both places.\n\n84\n00:04:12.109 --> 00:04:16.958\nAnd over here on the right side if I\nscroll down I'll see some basic health\n\n85\n00:04:16.958 --> 00:04:18.380\ninformation.\n\n86\n00:04:18.380 --> 00:04:21.030\nNow the health information isn't\nreally all that great, right.\n\n87\n00:04:21.030 --> 00:04:24.840\nI mean it's showing me that it's active\nand mounted here, it's passive and\n\n88\n00:04:24.840 --> 00:04:26.560\nhealthy down here, right?\n\n89\n00:04:26.560 --> 00:04:27.780\nSo those are good.\n\n90\n00:04:27.780 --> 00:04:30.530\nWhat I really need to look for\nis this guy right here.\n\n91\n00:04:30.530 --> 00:04:31.910\nCopy queue length.\n\n92\n00:04:31.910 --> 00:04:32.510\nOkay?\n\n93\n00:04:32.510 --> 00:04:34.300\nNow what is the copy queue length?\n\n94\n00:04:34.300 --> 00:04:36.320\nWell, when a change happens, right,\n\n95\n00:04:36.320 --> 00:04:39.630\nwhen email comes in it's writing\nto whoever's active and mounted.\n\n96\n00:04:39.630 --> 00:04:42.160\nSo in my case it's writing to mailbox01.\n\n97\n00:04:42.160 --> 00:04:44.490\nAnd then once that's done,\n\n98\n00:04:44.490 --> 00:04:48.410\nthe transaction log that contains that\nrite is shipped over to the other server.\n\n99\n00:04:48.410 --> 00:04:50.110\nWell, that's the copy queue.\n\n100\n00:04:50.110 --> 00:04:53.560\nAnd the more transaction\nlogs in the copy queue,\n\n101\n00:04:53.560 --> 00:04:57.040\nthe further behind I am,\nthe busier your server is.\n\n102\n00:04:57.040 --> 00:05:00.960\nA single transaction log file might\nonly have a few seconds worth of email.\n\n103\n00:05:00.960 --> 00:05:05.230\nIf you have a really slow email flow,\nright, if you don't get a ton of email,\n\n104\n00:05:05.230 --> 00:05:07.820\none transaction log file might\nhave an hour's worth of emails, so\n\n105\n00:05:07.820 --> 00:05:11.620\nit kind of varies how much is actually\nin that transaction log file.\n\n106\n00:05:11.620 --> 00:05:13.380\nBut down here, this copy queue link.\n\n107\n00:05:13.380 --> 00:05:18.150\nIf you see it greater than zero for long\nperiods of time, it could mean that you\n\n108\n00:05:18.150 --> 00:05:21.650\ndon't have enough bandwidth between\nyour two servers to properly replicate.\n\n109\n00:05:21.650 --> 00:05:24.960\nOr at a minimum it means you\nneed to be acceptant of the fact\n\n110\n00:05:24.960 --> 00:05:27.130\nthat if you have a failure,\nyou might lose some data.\n\n111\n00:05:27.130 --> 00:05:29.850\nThere might be some data that just hadn't\nhad time to copy to the other side.\n\n112\n00:05:30.920 --> 00:05:34.920\nNow I do have a little\ncomplaint about this screen.\n\n113\n00:05:34.920 --> 00:05:38.640\nAnd the complaint I have is when\nI see copy queue length here,\n\n114\n00:05:38.640 --> 00:05:40.960\nthis is a really generic thing.\n\n115\n00:05:40.960 --> 00:05:44.490\nIt's telling me I've have some\nchanges on the active server,\n\n116\n00:05:44.490 --> 00:05:46.380\nthey're waiting to be\nsent to the other side.\n\n117\n00:05:46.380 --> 00:05:47.260\nOkay.\n\n118\n00:05:47.260 --> 00:05:50.760\nBut they could actually already\nbe sent to the other side.\n\n119\n00:05:50.760 --> 00:05:52.410\nThey could already be\non the other side and\n\n120\n00:05:52.410 --> 00:05:56.230\nthe other side just hasn't had time to\napply it to it's copy of the database.\n\n121\n00:05:56.230 --> 00:05:59.390\nThere might be some kind of problem\non the server on the other end.\n\n122\n00:05:59.390 --> 00:06:00.970\nAnd this isn't gonna tell me that.\n\n123\n00:06:00.970 --> 00:06:02.970\nIf I see this number getting bigger and\nbigger and\n\n124\n00:06:02.970 --> 00:06:06.830\nbigger, I know there's a problem, but\nI don't really know what the problem is.\n\n125\n00:06:06.830 --> 00:06:08.280\nIt could be network connectivity.\n\n126\n00:06:08.280 --> 00:06:10.280\nI can't even get to the other side.\n\n127\n00:06:10.280 --> 00:06:14.480\nOr the server on the other side might\nbe under powered and it's just getting\n\n128\n00:06:14.480 --> 00:06:17.475\noverwhelmed and it cannot keep up and\nit is getting further and further behind.\n\n129\n00:06:17.475 --> 00:06:21.130\nThat's not a network issue at all,\nthat's CPU, disk IO.\n\n130\n00:06:21.130 --> 00:06:23.349\nRight?\nThings like that on that other server.\n\n131\n00:06:23.349 --> 00:06:26.718\nSo I do not get a whole heck of a lot of\ndata here and I will show you a way to get\n\n132\n00:06:26.718 --> 00:06:29.943\nsomething more specific out of\nthe performance monitor in a moment.\n\n133\n00:06:29.943 --> 00:06:31.770\nNow what you are seeing here.\n\n134\n00:06:31.770 --> 00:06:34.810\nThis is part of the diagnostic\nhealth service and exchange.\n\n135\n00:06:34.810 --> 00:06:35.770\nIt's running in the background.\n\n136\n00:06:35.770 --> 00:06:38.410\nIt has a series of what iare\ncalled probes that run and\n\n137\n00:06:38.410 --> 00:06:41.210\nmonitor all sorts of aspects\nof your Exchange environment.\n\n138\n00:06:41.210 --> 00:06:45.270\nAnd so it's actively monitoring this\ninformation and displaying it here.\n\n139\n00:06:45.270 --> 00:06:47.640\nAnd that's why we have\nthings like view details.\n\n140\n00:06:47.640 --> 00:06:51.583\nBecause we can jump into that to see\nadditional information that's being\n\n141\n00:06:51.583 --> 00:06:53.090\nmonitored on the back end.\n\n142\n00:06:53.090 --> 00:06:55.940\nAnd right here,\nI can see the copy queue length and\n\n143\n00:06:55.940 --> 00:06:59.300\nthe replay queue length, all right,\nthe replay queue length.\n\n144\n00:06:59.300 --> 00:07:03.250\nThat says, this is data that has already\nbeen copied to the other side, but\n\n145\n00:07:03.250 --> 00:07:06.590\nit hasn't been applied yet,\nit's waiting to be replayed.\n\n146\n00:07:06.590 --> 00:07:08.420\nAnd if we see those at zero like I've got,\n\n147\n00:07:08.420 --> 00:07:11.120\nthat means my two servers\nare completely in sync.\n\n148\n00:07:11.120 --> 00:07:13.770\nBut if I see the number consistently\ngetting larger, and larger, and\n\n149\n00:07:13.770 --> 00:07:17.270\nlarger that means the other\nserver is getting behind.\n\n150\n00:07:17.270 --> 00:07:20.440\nAnd you can see a lot of other information\nin here on the health of your system.\n\n151\n00:07:21.440 --> 00:07:24.160\nNow if you have access to the GUI,\nthis is great.\n\n152\n00:07:24.160 --> 00:07:28.800\nIf you don't have access to the GUI well,\nthere's a few other ways we can get at it.\n\n153\n00:07:28.800 --> 00:07:31.562\nAnd I like to use the PowerShell on this\nbecause there's actually a really simple\n\n154\n00:07:31.562 --> 00:07:35.100\nPowerShell command we can run that\nwill scan the health of the system.\n\n155\n00:07:36.190 --> 00:07:37.670\nIf we jump over to here,\n\n156\n00:07:37.670 --> 00:07:39.720\nmy other server that's got\nthe PowerShell already fired up.\n\n157\n00:07:39.720 --> 00:07:43.960\nNow this is the Exchange Management Shell,\nnot just the normal PowerShell.\n\n158\n00:07:43.960 --> 00:07:49.340\nThere's a command, or a command lit,\ncalled test Replication health.\n\n159\n00:07:49.340 --> 00:07:49.910\nAll right.\n\n160\n00:07:49.910 --> 00:07:53.851\nThe test replication health command that\nlets you scan across all the replications\n\n161\n00:07:53.851 --> 00:07:56.728\non your system and\nshow you whether they're healthy or not.\n\n162\n00:07:56.728 --> 00:08:00.250\nAnd it's pretty straightforward to run,\nyou just point it at a server.\n\n163\n00:08:00.250 --> 00:08:02.805\nSo I'll specify an identity and\nI'll point this out loud.\n\n164\n00:08:02.805 --> 00:08:03.752\nCastle one.\n\n165\n00:08:03.752 --> 00:08:04.930\nHere, I'll do mailbox.\n\n166\n00:08:04.930 --> 00:08:06.510\nMailbox 01.\n\n167\n00:08:06.510 --> 00:08:07.180\nAll right.\n\n168\n00:08:07.180 --> 00:08:09.130\nSo it's going to check that server and\n\n169\n00:08:09.130 --> 00:08:10.690\ngive me information\nabout replication on it.\n\n170\n00:08:10.690 --> 00:08:12.490\nAnd it's gonna lay it out right here.\n\n171\n00:08:12.490 --> 00:08:15.850\nNotice how it's checking a lot more\nthan just the current que lane.\n\n172\n00:08:15.850 --> 00:08:18.960\nWell those probes that are running in\nthe background are checking all this\n\n173\n00:08:18.960 --> 00:08:20.020\nstuff already.\n\n174\n00:08:20.020 --> 00:08:24.330\nIt's just the GUI for\nthe Exchange Administration Center.\n\n175\n00:08:24.330 --> 00:08:26.080\nIt doesn't display all this.\n\n176\n00:08:26.080 --> 00:08:28.040\nSo from the commandlet here,\nfrom the PowerShell,\n\n177\n00:08:28.040 --> 00:08:31.310\nwe can see it, the cluster service,\nthe replay service.\n\n178\n00:08:31.310 --> 00:08:35.240\nSo all these different services\nthat are a part of this database\n\n179\n00:08:35.240 --> 00:08:38.470\navailability group structure,\nthey're all passing, they're all healthy.\n\n180\n00:08:38.470 --> 00:08:41.350\nIf one of them isn't, I'll have\nan error here, and it'll tell me why.\n\n181\n00:08:41.350 --> 00:08:43.960\nMaybe the service isn't started,\nmaybe there's access denied,\n\n182\n00:08:43.960 --> 00:08:45.680\nmaybe it's network unreachable.\n\n183\n00:08:45.680 --> 00:08:47.960\nIt'll tell me what that reason is.\n\n184\n00:08:47.960 --> 00:08:51.420\nNow I do have some failures,\nfailures in some pretty important ones.\n\n185\n00:08:51.420 --> 00:08:54.180\nDatabase redundancy,\ndatabase availability, they both failed.\n\n186\n00:08:55.220 --> 00:08:56.340\nWhat's that all about?\n\n187\n00:08:56.340 --> 00:08:59.220\nWell unfortunately, the way this\nis laid out, I can't really tell,\n\n188\n00:08:59.220 --> 00:09:01.330\nso I'm gonna re-run the command.\n\n189\n00:09:01.330 --> 00:09:05.960\nAnd I'm just gonna drop that into\na Format List, or some other\n\n190\n00:09:05.960 --> 00:09:09.210\nformatting if you want to change it\nto be able to see what the deal is.\n\n191\n00:09:09.210 --> 00:09:11.530\nAnd when this runs,\nit's just gonna take this output,\n\n192\n00:09:11.530 --> 00:09:14.130\nand there's more on the screen, it's not\nshowing up here, and it's just gonna lay\n\n193\n00:09:14.130 --> 00:09:17.290\nit out in a list format, so\nI can actually read what's going on.\n\n194\n00:09:17.290 --> 00:09:22.180\nAnd if I run that, I'm gonna see all\nthose passes are gonna come across like\n\n195\n00:09:22.180 --> 00:09:24.640\nyou'll see here,\nas we look down this list.\n\n196\n00:09:24.640 --> 00:09:26.040\nLike here's where it checked for\n\n197\n00:09:27.080 --> 00:09:30.420\nwhether the database availability\ngroup members are up.\n\n198\n00:09:30.420 --> 00:09:33.330\nIt checks whether there were\nserver locator services running.\n\n199\n00:09:33.330 --> 00:09:34.580\nThese all passed.\n\n200\n00:09:34.580 --> 00:09:38.500\nBut of I get down to the ones that failed,\nso I'm just looking for that fail keyword.\n\n201\n00:09:38.500 --> 00:09:39.790\nHere we go.\n\n202\n00:09:39.790 --> 00:09:42.190\nI can see here that on\nserver lab-mailbox 01,\n\n203\n00:09:42.190 --> 00:09:45.260\nI have database redundancy\nshows as failed.\n\n204\n00:09:45.260 --> 00:09:47.580\nAnd it tells me here what this check did.\n\n205\n00:09:47.580 --> 00:09:51.180\nThis check verified that databases\nhave sufficient redundancy.\n\n206\n00:09:51.180 --> 00:09:54.360\nIf the check fails, it means some\ndatabases are at risk of losing data.\n\n207\n00:09:54.360 --> 00:09:56.980\nIn other words,\nyou've only got one copy of the database.\n\n208\n00:09:56.980 --> 00:10:00.720\nOr at a minimum, you have one less\ncopy than you thought you did.\n\n209\n00:10:00.720 --> 00:10:01.790\nThen it tells me why.\n\n210\n00:10:01.790 --> 00:10:04.950\nIt just tells me, hey there's certain\ndatabases here that don't have redundancy.\n\n211\n00:10:04.950 --> 00:10:08.000\nIt's telling me mailbox database 009,\nblah, blah,\n\n212\n00:10:08.000 --> 00:10:10.040\nblah doesn't have a redundancy.\n\n213\n00:10:10.040 --> 00:10:14.600\nAll right, well I never configured a\nredundancy for it, so I kinda expect that.\n\n214\n00:10:14.600 --> 00:10:18.523\nI can figure redundancy for\nthe sales database, for sales db.\n\n215\n00:10:18.523 --> 00:10:21.720\nI never did it for\nthis mailbox database, or the other one.\n\n216\n00:10:21.720 --> 00:10:23.050\nAnd so\nthat's the one that's showing up next.\n\n217\n00:10:23.050 --> 00:10:26.710\nThis other mailbox database\nis not showing as redundant.\n\n218\n00:10:26.710 --> 00:10:28.890\nIn the GUI, you can sort of see that.\n\n219\n00:10:28.890 --> 00:10:30.380\nJust right here on the database list.\n\n220\n00:10:30.380 --> 00:10:34.280\nSee how when I look at sales db\nit's got two servers listed?\n\n221\n00:10:34.280 --> 00:10:35.290\nThe other guys don't.\n\n222\n00:10:35.290 --> 00:10:37.100\nThe other guys just\nhave one server listed.\n\n223\n00:10:37.100 --> 00:10:38.630\nThey are not redundant.\n\n224\n00:10:38.630 --> 00:10:41.962\nEven if I add that database to\nthe database availability group,\n\n225\n00:10:41.962 --> 00:10:43.390\nit still only has one copy.\n\n226\n00:10:43.390 --> 00:10:46.036\nIt is not until I add a second copy\nthat it becomes redundant and so\n\n227\n00:10:46.036 --> 00:10:48.290\nit is going to generate that failure.\n\n228\n00:10:48.290 --> 00:10:52.500\nSo be aware when you run\nthe test-replication health commandlet,\n\n229\n00:10:52.500 --> 00:10:56.220\nsometimes you get fail messages back and\nit is not a bad thing it is just\n\n230\n00:10:56.220 --> 00:10:58.960\nsome databases are redundant,\nyou haven't made them that way.\n\n231\n00:10:58.960 --> 00:11:01.150\nYou should go in and\nconfigure them if you need that,\n\n232\n00:11:01.150 --> 00:11:02.500\nif that's what you're trying to achieve.\n\n233\n00:11:04.110 --> 00:11:06.530\nSo that's one command\nload that we can use, and\n\n234\n00:11:06.530 --> 00:11:08.650\nthere's a few other ones\nthat we can do too.\n\n235\n00:11:08.650 --> 00:11:13.820\nFor example, what I did here,\nthis test replication health command.\n\n236\n00:11:13.820 --> 00:11:16.740\nThat checked all the databases, but\n\n237\n00:11:16.740 --> 00:11:19.290\nI might wanna look at\none particular database.\n\n238\n00:11:19.290 --> 00:11:22.020\nI might wanna kinda dial in\non one that I'm targeting.\n\n239\n00:11:22.020 --> 00:11:28.240\nAnd so for that, I can use this\nGet-MailboxDatabaseCopy Status.\n\n240\n00:11:28.240 --> 00:11:30.375\nThis has got to be one\nof the longer commands.\n\n241\n00:11:30.375 --> 00:11:36.610\nSo I'm gonna do\nGet-MailboxDatabase Copy status.\n\n242\n00:11:36.610 --> 00:11:37.250\nAll right?\n\n243\n00:11:37.250 --> 00:11:39.810\nI want to look at one of\nmy mailbox databases, and\n\n244\n00:11:39.810 --> 00:11:42.310\njust see what the current\nstatus of its replication is.\n\n245\n00:11:42.310 --> 00:11:44.200\nWhat's it look like right now?\n\n246\n00:11:44.200 --> 00:11:47.740\nAnd so, just like the other one,\nI need to specify an identity.\n\n247\n00:11:47.740 --> 00:11:49.230\nAnd then a name of the database.\n\n248\n00:11:49.230 --> 00:11:51.700\nSo mine is sales db.\n\n249\n00:11:51.700 --> 00:11:52.570\nAnd I'll run that, and\n\n250\n00:11:52.570 --> 00:11:55.350\nit's just going to give me something\ndialed in on that one database.\n\n251\n00:11:55.350 --> 00:11:57.310\nI can see I've got two copies.\n\n252\n00:11:57.310 --> 00:11:59.407\nThe main copy is here in our lab mailbox,\n\n253\n00:11:59.407 --> 00:12:02.005\nI know it's the main copy\nbecause it's mounted.\n\n254\n00:12:02.005 --> 00:12:06.710\nIt's active right now and then\nthe other one lab class 01 is healthy.\n\n255\n00:12:06.710 --> 00:12:10.680\nIt's not mounted, but it's healthy, it's\nready to take over at a moments notice if\n\n256\n00:12:10.680 --> 00:12:13.220\nneed be, and\nI can see the copy que length and\n\n257\n00:12:13.220 --> 00:12:17.079\nthe replay que length right there it's got\nthe information I need and it's healthy.\n\n258\n00:12:19.240 --> 00:12:22.800\nSome things you might notice in here\neven on a healthy database, if you\n\n259\n00:12:22.800 --> 00:12:26.640\njust re-booted one of these servers or if\nyou just built the database availability\n\n260\n00:12:26.640 --> 00:12:32.050\ngroup, expect to see the context\nindex state as failed or unhealthy.\n\n261\n00:12:32.050 --> 00:12:34.250\nI don't remember exactly\nwhich error state it shows.\n\n262\n00:12:34.250 --> 00:12:36.550\nBut basically when new\nservers are created or\n\n263\n00:12:36.550 --> 00:12:40.480\nare added to a dag or when a server is\nrebooted, is has to rebuild it's index.\n\n264\n00:12:40.480 --> 00:12:44.590\nAnd the index takes time to reboot, so it\ncould take a good five or ten minutes, or\n\n265\n00:12:44.590 --> 00:12:48.690\neven longer if it's a large database,\nto correct that information and\n\n266\n00:12:48.690 --> 00:12:49.400\nget it up to date.\n\n267\n00:12:49.400 --> 00:12:50.890\nBut you can see mine's\nbeen running long enough,\n\n268\n00:12:50.890 --> 00:12:53.360\nit's all healthy, and it's good to go.\n\n269\n00:12:53.360 --> 00:12:55.365\nSo quick and easy way to monitor\nthat from the PowerShell.\n\n270\n00:12:56.450 --> 00:13:00.820\nNow everything that I'm looking at so\nfar Is real time data.\n\n271\n00:13:00.820 --> 00:13:03.410\nI'm seeing the system as it is right now.\n\n272\n00:13:03.410 --> 00:13:07.040\nSo when I ran that command a moment ago,\nmy Copy Que Length was 0 and\n\n273\n00:13:07.040 --> 00:13:08.330\nmy Replay Que Length was 0.\n\n274\n00:13:08.330 --> 00:13:11.846\nBut what about now?\n\n275\n00:13:11.846 --> 00:13:12.860\nWhat about now?\nWhat about now, right?\n\n276\n00:13:12.860 --> 00:13:15.010\nWe might want to know\nover a period of time.\n\n277\n00:13:15.010 --> 00:13:16.690\nSure, it might be caught up right now, but\n\n278\n00:13:16.690 --> 00:13:19.620\nit might be lagging behind\nat certain point in the day.\n\n279\n00:13:19.620 --> 00:13:23.640\nSo what we can do is we can use a script\nthat comes with Microsoft Exchange\n\n280\n00:13:23.640 --> 00:13:27.710\nthat allows us to monitor that replication\ntraffic over a certain period of time.\n\n281\n00:13:27.710 --> 00:13:28.990\nAnd you can dictate it.\n\n282\n00:13:28.990 --> 00:13:31.750\nWhen we run this script\nthe default is 30 seconds.\n\n283\n00:13:31.750 --> 00:13:35.600\nBut you can specify a start time and\nan end time and so you can have it run for\n\n284\n00:13:35.600 --> 00:13:36.340\nan hour, 24 hours.\n\n285\n00:13:36.340 --> 00:13:39.140\nYou can run it for\na whole week if you want to go crazy.\n\n286\n00:13:39.140 --> 00:13:42.500\nIt's a lot of data, but\nit can gather that data for us and\n\n287\n00:13:42.500 --> 00:13:44.700\nthen put it out in a nice little report.\n\n288\n00:13:44.700 --> 00:13:46.580\nLet me show you the command.\n\n289\n00:13:46.580 --> 00:13:48.390\nFirst off we have to give it\nto our scripts directory,\n\n290\n00:13:48.390 --> 00:13:50.635\nwhich if you guys remember\nis really buried in there.\n\n291\n00:13:50.635 --> 00:13:55.740\nOn any exchange server you\ncan jump into C:/program\n\n292\n00:13:55.740 --> 00:14:04.660\nfiles/Microsoft/exchangeserver/V15/Scri-\npts.\n\n293\n00:14:04.660 --> 00:14:07.870\nThat's the full path to\nthat script directory.\n\n294\n00:14:07.870 --> 00:14:10.510\nAnd in there, there's a bunch\nof scripts that are in there.\n\n295\n00:14:10.510 --> 00:14:18.350\nBut the one that I'm looking for\nis actually called Collectovermetrics.ps1.\n\n296\n00:14:18.350 --> 00:14:21.682\nThat guy right there,\nCollectovermetrics.ps.1.\n\n297\n00:14:21.682 --> 00:14:26.990\nAnd that's gonna basically gather this\nreplication data over a period of time,\n\n298\n00:14:26.990 --> 00:14:30.640\nand then it aggregates it into\na report that I can view.\n\n299\n00:14:30.640 --> 00:14:34.430\nSo if I want to run that,\nthe way the script works is\n\n300\n00:14:34.430 --> 00:14:37.180\nyou really just call the script and\nyou point it at a server.\n\n301\n00:14:37.180 --> 00:14:38.720\nThe start time and end time are optional.\n\n302\n00:14:38.720 --> 00:14:41.650\nIf you don't specify it'll just run for\n30 seconds, and that's what I want,\n\n303\n00:14:41.650 --> 00:14:43.260\nI'm just gonna run it for 30 seconds.\n\n304\n00:14:43.260 --> 00:14:45.164\nSo, I'm gonna execute this script.\n\n305\n00:14:47.173 --> 00:14:51.573\nAnd I'm gonna tell it which database\navailability group that I want to query,\n\n306\n00:14:51.573 --> 00:14:56.107\nright, and so I'm gonna be reaching out\nto the only database availability group\n\n307\n00:14:56.107 --> 00:15:00.129\nI have, but if you have more than one\nyou need to specify the right name.\n\n308\n00:15:00.129 --> 00:15:00.970\nMine's dag01.\n\n309\n00:15:02.010 --> 00:15:05.030\nAnd then I need to tell\nit a database to monitor.\n\n310\n00:15:05.030 --> 00:15:07.010\nThis is gonna monitor\na particular database.\n\n311\n00:15:07.010 --> 00:15:13.150\nI'm gonna monitor the sales db and\nthen after that, if I just run it,\n\n312\n00:15:13.150 --> 00:15:18.150\nI'm going to get this text data back,\nand I want to get a nice, fancy report.\n\n313\n00:15:18.150 --> 00:15:20.560\nSo I'm going to say generate HTML report.\n\n314\n00:15:22.210 --> 00:15:25.110\nIf I just leave it there,\nit's going to generate the HTML report and\n\n315\n00:15:25.110 --> 00:15:28.790\nit's going to save it to a file or\nas you can expect a file name, but\n\n316\n00:15:28.790 --> 00:15:33.520\nyou can add if this is like a one time\nthing, you can add show HTML report, and\n\n317\n00:15:33.520 --> 00:15:37.030\nwhen it's done it will just launch it for\nus in browser so that we can see it.\n\n318\n00:15:37.030 --> 00:15:42.470\nSo the full command here is\ncollectovermetrics,PS1-databaseavailabili-\n\n319\n00:15:42.470 --> 00:15:43.360\ntygroup and\n\n320\n00:15:43.360 --> 00:15:48.420\nthe name of the group, then -database: and\nwhatever the database name is.\n\n321\n00:15:48.420 --> 00:15:48.932\nAnd be aware,\n\n322\n00:15:48.932 --> 00:15:51.857\nif you have any spaces in your database\nname you'll need to put quotes around it.\n\n323\n00:15:51.857 --> 00:15:55.844\nIn fact, it's not a bad idea to just\nalways put quotes around it to kinda\n\n324\n00:15:55.844 --> 00:15:57.250\nget in the habit of that.\n\n325\n00:15:57.250 --> 00:16:00.456\nAnd then I'm generating an HTML\nreport as opposed to plain text.\n\n326\n00:16:00.456 --> 00:16:02.507\nAnd I wanna see that report.\n\n327\n00:16:02.507 --> 00:16:05.049\nAnd when we run it,\nit's gonna run for 30 seconds,\n\n328\n00:16:05.049 --> 00:16:07.255\nit's collecting that replication data and,\n\n329\n00:16:07.255 --> 00:16:10.720\nI don't know, maybe I can generate\nsome replication data of some sort.\n\n330\n00:16:10.720 --> 00:16:14.220\nI don't know if I'll be fast enough\nhere to grab somebody's mailbox and\n\n331\n00:16:14.220 --> 00:16:17.920\nmaybe move them to\na different mailbox server.\n\n332\n00:16:17.920 --> 00:16:21.381\nThat's way down here, and\nmy timer is ticking, isn't it?\n\n333\n00:16:21.381 --> 00:16:24.700\n[LAUGH] So we'll see, of course,\n\n334\n00:16:24.700 --> 00:16:28.370\nit's gonna make me type things and\ntry and get this guy moved in.\n\n335\n00:16:28.370 --> 00:16:32.110\nI think my 30 seconds might already be up,\nbut let's see if I can get it in there.\n\n336\n00:16:32.110 --> 00:16:33.115\nDo it, go, run!\n\n337\n00:16:33.115 --> 00:16:35.530\n[LAUGH] There we go, okay.\n\n338\n00:16:35.530 --> 00:16:41.060\nSo now I'm moving a mailbox from\nanother database into the Sales DB.\n\n339\n00:16:41.060 --> 00:16:44.811\nSo when that mailbox moves,\nit's gonna move into, well,\n\n340\n00:16:44.811 --> 00:16:46.773\nSales DB on the active member.\n\n341\n00:16:46.773 --> 00:16:48.903\nAnd the active member's\ngonna start replicating that\n\n342\n00:16:48.903 --> 00:16:50.020\nover to the standby member.\n\n343\n00:16:50.020 --> 00:16:52.472\nSo, I moved it,\nit's gonna go to mailbox01.\n\n344\n00:16:52.472 --> 00:16:56.750\nAnd then mailbox01 is gonna do\ntransaction log shipping over to cas01 so\n\n345\n00:16:56.750 --> 00:17:00.290\nthat cas01 can receive it and\nreplay those logs and\n\n346\n00:17:00.290 --> 00:17:02.780\nhave that mailbox be present\nin that database too.\n\n347\n00:17:02.780 --> 00:17:06.360\nSo that's all happening in the background,\nI can see that's syncing right now.\n\n348\n00:17:06.360 --> 00:17:09.302\nSyncing means it's copying\nthe database between the two, and\n\n349\n00:17:09.302 --> 00:17:11.532\nthat's gonna kick off\nthat replication data.\n\n350\n00:17:11.532 --> 00:17:14.730\nAll right, so all that's happening\nkind of in the background there.\n\n351\n00:17:14.730 --> 00:17:17.083\nAnd if I jump over here,\nmy report already generated,\n\n352\n00:17:17.083 --> 00:17:20.000\nso I might have a bunch of zeroes,\nwe'll see what happens.\n\n353\n00:17:20.000 --> 00:17:23.320\nBut I can see in the background that\nI've got my web browser fired up.\n\n354\n00:17:23.320 --> 00:17:27.230\nAnd right here I can see my\ndatabase over summary statistics.\n\n355\n00:17:27.230 --> 00:17:32.020\nAnd here it's just gonna lay things out so\nI can see the total databases that I have,\n\n356\n00:17:32.020 --> 00:17:32.921\nI've got two.\n\n357\n00:17:32.921 --> 00:17:36.447\nThe ones that are mounted and\nstarted up, one that's mounted but\n\n358\n00:17:36.447 --> 00:17:37.740\nnot actually running.\n\n359\n00:17:37.740 --> 00:17:41.401\nAnd you can see other statistical\ninformation on them, right.\n\n360\n00:17:41.401 --> 00:17:44.225\nDid we have any failures during\nthe time we were monitoring?\n\n361\n00:17:44.225 --> 00:17:47.673\nHow many responses back were under\n30 seconds or over 30 seconds?\n\n362\n00:17:47.673 --> 00:17:51.381\nWhat's my lossy amount,\ndid I lose any data during that time?\n\n363\n00:17:51.381 --> 00:17:54.771\nAnd you can see mine,\nno failed operations found in the data.\n\n364\n00:17:54.771 --> 00:17:56.917\nNow, other data we see in here,\n\n365\n00:17:56.917 --> 00:18:02.258\nif I had things that took more than 30\nseconds it tries to lay out what that was.\n\n366\n00:18:02.258 --> 00:18:05.782\nAnd you can see down here\njust basic information, and\n\n367\n00:18:05.782 --> 00:18:07.514\nit lays out a lot of stuff.\n\n368\n00:18:07.514 --> 00:18:10.470\nKind of what happened during that time,\nand actually, mine was terrible,\n\n369\n00:18:10.470 --> 00:18:10.986\nwasn't it?\n\n370\n00:18:10.986 --> 00:18:14.716\n0 replayed logs, so that means [LAUGH]\nduring the 30 seconds I monitored,\n\n371\n00:18:14.716 --> 00:18:19.031\nthere actually wasn't even enough activity\nto generate 1 transaction log moving, so\n\n372\n00:18:19.031 --> 00:18:21.444\nof course I'm gonna see\nreally good stuff here.\n\n373\n00:18:21.444 --> 00:18:26.294\nBut it's just a nice graphical\nrepresentation that lets you spot whether\n\n374\n00:18:26.294 --> 00:18:28.430\nthings are healthy or not.\n\n375\n00:18:28.430 --> 00:18:32.490\nAnd kind of isolating if there's\nissues you need to deal with.\n\n376\n00:18:32.490 --> 00:18:35.250\nSo neat little command,\nit's a script that's a part of Exchange,\n\n377\n00:18:35.250 --> 00:18:36.820\nyou don't have to write it or\ndownload it or anything,\n\n378\n00:18:36.820 --> 00:18:40.105\nit's a part of your\ndefault Exchange install.\n\n379\n00:18:40.105 --> 00:18:43.870\nAll right, now these are all fine and\ngood, but all of these center\n\n380\n00:18:43.870 --> 00:18:48.260\naround command line utilities and\nme being present to run them.\n\n381\n00:18:48.260 --> 00:18:50.210\nWell, a lot of times I'm\nnot present to run them,\n\n382\n00:18:50.210 --> 00:18:53.580\nso I need something that can\nkinda go on in the background.\n\n383\n00:18:53.580 --> 00:18:57.320\nAnd one of the nice tools that's a part\nof Windows that lets us do this,\n\n384\n00:18:57.320 --> 00:18:58.760\nis the Performance Monitor.\n\n385\n00:18:58.760 --> 00:19:00.360\nWe can fire up the Performance Monitor and\n\n386\n00:19:00.360 --> 00:19:05.280\nthere's a number of performance counters\nthat specifically relate to replication.\n\n387\n00:19:05.280 --> 00:19:09.580\nAnd you can set that up and\ncouple it with performance alerts, and\n\n388\n00:19:09.580 --> 00:19:13.040\nnow you can have it where the server\nalerts you when there's a problem.\n\n389\n00:19:13.040 --> 00:19:14.360\nSo we don't have to go looking for\n\n390\n00:19:14.360 --> 00:19:18.200\na problem if we think it's occurring,\nwe get notified right away, all right?\n\n391\n00:19:18.200 --> 00:19:18.770\nLet me show you that.\n\n392\n00:19:19.980 --> 00:19:23.730\nSo, let's see, what server do I\nwant to use, I'll use this one.\n\n393\n00:19:23.730 --> 00:19:26.110\nSo I'm gonna go ahead and\nfire up my Performance Monitor.\n\n394\n00:19:27.780 --> 00:19:29.920\nThere we go, and\nremember the Performance Monitor,\n\n395\n00:19:29.920 --> 00:19:32.800\nit's a part of every Windows installation.\n\n396\n00:19:32.800 --> 00:19:38.130\nBut when you install Microsoft Exchange\non a server, it adds a lot more to it.\n\n397\n00:19:38.130 --> 00:19:40.990\nSo if you fired up the Performance Monitor\non your work station,\n\n398\n00:19:40.990 --> 00:19:44.170\nit's really just got Windows\nmonitoring in it, not Exchange.\n\n399\n00:19:44.170 --> 00:19:47.670\nBut when you fire up Performance Monitor\non an Exchange Server,\n\n400\n00:19:47.670 --> 00:19:49.430\nthere is a lot more.\n\n401\n00:19:49.430 --> 00:19:50.470\nSo if I go in here and\n\n402\n00:19:50.470 --> 00:19:55.300\nI go down to Performance Monitor,\nyou see it's monitoring %Processor Time,\n\n403\n00:19:55.300 --> 00:19:58.180\nwhich is a great thing to monitor,\nright, what's my CPU load?\n\n404\n00:19:58.180 --> 00:20:03.740\nBut we can hit this green + arrow, and\nstart to add more counters to it, right?\n\n405\n00:20:03.740 --> 00:20:07.040\nAnd when you look at the counters, most of\nthis is stuff that's related to Windows,\n\n406\n00:20:07.040 --> 00:20:10.030\nprocessor, memory,\ndisk I/O, things like that.\n\n407\n00:20:10.030 --> 00:20:11.320\nBut if you scroll around,\n\n408\n00:20:11.320 --> 00:20:16.740\nyou'll find in here MSExchange,\nand look how many are in there.\n\n409\n00:20:16.740 --> 00:20:21.670\nIt's added over 200 counters\nspecifically related\n\n410\n00:20:21.670 --> 00:20:25.840\njust to Exchange, and\nthere is a lot in there.\n\n411\n00:20:25.840 --> 00:20:28.400\nYou can monitor every single\naspect of Exchange right\n\n412\n00:20:28.400 --> 00:20:30.590\nfrom inside the the Performance Monitor.\n\n413\n00:20:30.590 --> 00:20:31.870\nNow, why is that important?\n\n414\n00:20:31.870 --> 00:20:37.713\nWell, I can create several counters\nthat are monitoring for criteria.\n\n415\n00:20:37.713 --> 00:20:39.543\nAnd then in the Performance Monitor,\n\n416\n00:20:39.543 --> 00:20:41.955\nwe can set up what are called\nData Collector Sets.\n\n417\n00:20:41.955 --> 00:20:44.220\nA Data Collector Set\nruns in the background.\n\n418\n00:20:44.220 --> 00:20:46.805\nIt runs and it collects data,\nthat's the name, right, so\n\n419\n00:20:46.805 --> 00:20:48.525\nit can gather data about replication.\n\n420\n00:20:48.525 --> 00:20:53.663\nBut what's even better is that when\nyou define a Data Collector Set,\n\n421\n00:20:53.663 --> 00:20:58.070\nyou can also define alerts\nthat occur as a result of it.\n\n422\n00:20:58.070 --> 00:21:02.240\nAnd so you can say, hey, if this threshold\nexceeds a certain value, send me an alert.\n\n423\n00:21:02.240 --> 00:21:07.310\nSend me an email or generate an event\nlog message, or do some kind of action.\n\n424\n00:21:07.310 --> 00:21:09.990\nSo now we can really get some\ninteractive monitoring out of this,\n\n425\n00:21:09.990 --> 00:21:11.560\nit just takes setting it up.\n\n426\n00:21:11.560 --> 00:21:14.310\nNow for replication, let me show\nyou the counters to watch out for.\n\n427\n00:21:14.310 --> 00:21:17.940\nI'm gonna go under Performance Monitor,\nand I'll hit that green + sign.\n\n428\n00:21:17.940 --> 00:21:23.110\nAnd I'm gonna look for the section\ncalled MS Exchange Replication.\n\n429\n00:21:23.110 --> 00:21:25.165\nSo it's in here somewhere.\n\n430\n00:21:27.266 --> 00:21:30.296\nIt gets a little confusing cuz\nsome of them are MSExchange,\n\n431\n00:21:30.296 --> 00:21:33.640\nsee how this one is MSExchangeRepl and\nit's all one word?\n\n432\n00:21:33.640 --> 00:21:37.516\nThe one I'm looking for is MSExchange,\nand then a space, and then Replication.\n\n433\n00:21:37.516 --> 00:21:41.560\nSo I've gotta find where that starts,\nit's up here.\n\n434\n00:21:41.560 --> 00:21:45.330\nIt does make things confusing,\nbut we'll spot it.\n\n435\n00:21:45.330 --> 00:21:47.450\nThere it is, MSExchange Replication.\n\n436\n00:21:47.450 --> 00:21:50.770\nAnd if I expand that,\nunderneath you'll see a bunch of counters,\n\n437\n00:21:50.770 --> 00:21:52.720\nthere's a ton of stuff here.\n\n438\n00:21:52.720 --> 00:21:54.950\nAnd some of it's important,\nsome of it's not,\n\n439\n00:21:54.950 --> 00:21:58.110\nsome of it is used in really\nspecial case scenarios.\n\n440\n00:21:58.110 --> 00:22:00.910\nBut some of the things that\nwe might want to monitor for?\n\n441\n00:22:00.910 --> 00:22:05.812\nWell, you've got information in here\nlike average network reads per second.\n\n442\n00:22:05.812 --> 00:22:09.150\nAll right, or\nother bandwidth type related issues,\n\n443\n00:22:09.150 --> 00:22:11.860\nhow much bandwidth is my\nreplication consuming?\n\n444\n00:22:11.860 --> 00:22:14.570\nWell, we don't normally worry\nabout that too much cuz you've got\n\n445\n00:22:14.570 --> 00:22:17.580\na certain amount of bandwidth available\nand email usually isn't that high.\n\n446\n00:22:17.580 --> 00:22:19.100\nBut in a high volume environment that\n\n447\n00:22:19.100 --> 00:22:20.860\nmight be something that\nyou want to monitor.\n\n448\n00:22:20.860 --> 00:22:24.000\nYou could also monitor your network\ninterfaces to see if they were over.\n\n449\n00:22:24.000 --> 00:22:27.990\nBut the ones I'm concerned about, well,\nthe first one is copy queue length, right?\n\n450\n00:22:27.990 --> 00:22:31.431\nCopy queue length, we saw that in the GUI,\nthat was a pretty important one.\n\n451\n00:22:31.431 --> 00:22:35.570\nI need to know how many transaction\nlogs are waiting to be processed.\n\n452\n00:22:35.570 --> 00:22:40.510\nAnd down here I can pick if it's all\ntogether or one particular database.\n\n453\n00:22:40.510 --> 00:22:44.960\nLike I might just want to monitor\nthe Sales DB and that's it.\n\n454\n00:22:44.960 --> 00:22:48.090\nAnd then I can do copy queue\nlength excluding inspection.\n\n455\n00:22:48.090 --> 00:22:49.610\nWhat does that mean?\n\n456\n00:22:49.610 --> 00:22:52.380\nWell, these are logs that have been\ncopied to the other servers but\n\n457\n00:22:52.380 --> 00:22:53.630\nnot applied yet, right?\n\n458\n00:22:53.630 --> 00:22:55.360\nIt's part of that replay queue.\n\n459\n00:22:55.360 --> 00:22:58.730\nAnd so I can take that and\nadd that for Sales DB.\n\n460\n00:22:58.730 --> 00:23:01.350\nSo those are two good ones\nto keep an eye out for.\n\n461\n00:23:01.350 --> 00:23:07.000\nAnother one, one you'll want to alert on,\nis failed, right here, failed.\n\n462\n00:23:07.000 --> 00:23:09.920\nThat's one of those counters you\nwant to always show 0, right.\n\n463\n00:23:09.920 --> 00:23:13.150\nIf it ever shows 1 or higher, that means\nyou've got failed transaction logs and\n\n464\n00:23:13.150 --> 00:23:14.620\nyou need to find out why.\n\n465\n00:23:14.620 --> 00:23:18.530\nAnd so I might wanna add that one,\nall right now I've got a record of that.\n\n466\n00:23:18.530 --> 00:23:21.941\nSome of the other ones, there's some neat\nones here where Microsoft's really thought\n\n467\n00:23:21.941 --> 00:23:23.108\nof what we're going to need.\n\n468\n00:23:23.108 --> 00:23:26.496\nLike log replay is not keeping up.\n\n469\n00:23:26.496 --> 00:23:31.720\nOkay, any time the log replay on\nthe other side is getting behind,\n\n470\n00:23:31.720 --> 00:23:33.690\nthis will turn into a 1.\n\n471\n00:23:33.690 --> 00:23:34.670\nOtherwise, it will be a 0.\n\n472\n00:23:34.670 --> 00:23:36.910\nWhen it's a 0, you're healthy,\nwhen it's a 1, you've got a problem.\n\n473\n00:23:36.910 --> 00:23:39.890\nSo, easy counter to monitor, all right?\n\n474\n00:23:40.890 --> 00:23:45.060\nAlong the same lines, we've got log\ncopying is not keeping up, okay?\n\n475\n00:23:45.060 --> 00:23:48.422\nIf it's log copying,\nit's usually a network issue.\n\n476\n00:23:48.422 --> 00:23:52.184\nIf it's log replay,\nit's normally a server issue.\n\n477\n00:23:52.184 --> 00:23:55.766\nThis helps us to kinda dial down where to\ntroubleshoot to find out why replication\n\n478\n00:23:55.766 --> 00:23:56.780\nis behind.\n\n479\n00:23:56.780 --> 00:23:58.341\nOn the other side, all right?\n\n480\n00:23:58.341 --> 00:24:02.000\nAnd then, one more I'd like\nto add that's not in the GUI.\n\n481\n00:24:02.000 --> 00:24:03.660\nWe've got this copy queue length.\n\n482\n00:24:03.660 --> 00:24:06.120\nThere's a replay queue length also.\n\n483\n00:24:06.120 --> 00:24:09.720\nAnd we can spot that in here and\nadd that one in.\n\n484\n00:24:09.720 --> 00:24:14.240\nThese are all great counters\nto monitor for replication.\n\n485\n00:24:14.240 --> 00:24:16.430\nAnd with the exception of\nthe copy queue length,\n\n486\n00:24:16.430 --> 00:24:18.910\nI really do expect most of\nthese to be zero, right?\n\n487\n00:24:18.910 --> 00:24:22.070\nWe shouldn't have any giant delays,\nbut if it gets to one or\n\n488\n00:24:22.070 --> 00:24:24.220\ntwo, that might be okay for some of them.\n\n489\n00:24:24.220 --> 00:24:28.650\nIf the copy queue length, or\nthe replay queue length gets to two,\n\n490\n00:24:28.650 --> 00:24:31.720\nI'm okay with that, that's just two\nmegabytes of data that hasn't been rolled\n\n491\n00:24:31.720 --> 00:24:34.590\ninto the database yet,\nit's not that giant of a deal.\n\n492\n00:24:34.590 --> 00:24:38.310\nBut, if I see something like\nfailed go to 1, that's a big deal,\n\n493\n00:24:38.310 --> 00:24:40.200\nthat means I've got an actual failure.\n\n494\n00:24:40.200 --> 00:24:45.100\nOr log copying is not keeping up to date,\nif that gets to a 1, that's too much.\n\n495\n00:24:45.100 --> 00:24:48.860\nSo we need to understand the values\nof each, and if you ever forget\n\n496\n00:24:48.860 --> 00:24:52.550\nyou can highlight these things, and right\ndown here you can hit show description and\n\n497\n00:24:52.550 --> 00:24:54.280\nit'll explain what it's monitoring.\n\n498\n00:24:54.280 --> 00:24:57.370\nIt'll tell you a little bit about it and\nwhat to look for.\n\n499\n00:24:57.370 --> 00:24:59.460\nAnd when I say okay,\nit's gonna add all that together, and\n\n500\n00:24:59.460 --> 00:25:01.808\nnow I've got some great\ncounters here that are running.\n\n501\n00:25:01.808 --> 00:25:06.310\nAnd I could fire this up when I need\nit just on my own and monitor these, or\n\n502\n00:25:06.310 --> 00:25:10.400\nI could create a data collector set that\nhad these, and I could set it to run.\n\n503\n00:25:10.400 --> 00:25:11.860\nFor an hour during peak time.\n\n504\n00:25:11.860 --> 00:25:13.100\nI could set it run all the time.\n\n505\n00:25:13.100 --> 00:25:13.660\nIt's kind of up to me.\n\n506\n00:25:13.660 --> 00:25:17.660\nI could set it up to run whenever I\nneeded it and just let it do it's job and\n\n507\n00:25:17.660 --> 00:25:18.700\nthat's that, right?\n\n508\n00:25:18.700 --> 00:25:21.640\nSo great counters are available for\nus to get there.\n\n509\n00:25:21.640 --> 00:25:23.850\nNow, I do want to mention one thing.\n\n510\n00:25:23.850 --> 00:25:28.140\nIf you've got Microsoft Systems\nCenter Operations Manager, SCOM.\n\n511\n00:25:28.140 --> 00:25:31.190\nSCOM has an Exchange 2013 Management Pack.\n\n512\n00:25:31.190 --> 00:25:32.910\nAnd it knows about all this stuff too.\n\n513\n00:25:32.910 --> 00:25:34.760\nIt knows about it automatically.\n\n514\n00:25:34.760 --> 00:25:37.790\nNow, we can configure this ourselves\nright here in performance monitor.\n\n515\n00:25:37.790 --> 00:25:39.200\nIt doesn't cost us a dime.\n\n516\n00:25:39.200 --> 00:25:40.600\nSCOM costs money.\n\n517\n00:25:40.600 --> 00:25:42.900\nSo why would I want to go the SCOM route?\n\n518\n00:25:42.900 --> 00:25:45.110\nWell, SCOM already has\nthe stuff to find it.\n\n519\n00:25:45.110 --> 00:25:48.050\nAlready knows what's good and what's bad,\nso it knows when to throw an alert and\n\n520\n00:25:48.050 --> 00:25:49.050\nwhen not to.\n\n521\n00:25:49.050 --> 00:25:52.310\nAnd it can also monitor multiple servers.\n\n522\n00:25:52.310 --> 00:25:54.640\nThis, I'm just setting\nthis up on one server.\n\n523\n00:25:54.640 --> 00:25:56.520\nWell, I've got three\nexchange servers here.\n\n524\n00:25:56.520 --> 00:25:59.900\nSo I'll need to go to each exchange server\nthat I'm running replication on, and\n\n525\n00:25:59.900 --> 00:26:02.120\nconfigure these same counters and\nset up alerts.\n\n526\n00:26:02.120 --> 00:26:04.940\nThere's no way to centrally\nmanage the performance monitor.\n\n527\n00:26:04.940 --> 00:26:08.360\nSo instead, we can use SCOM and\nit makes our life a lot easier.\n\n528\n00:26:08.360 --> 00:26:10.950\nFor large environments,\nyou'll probably want SCOM.\n\n529\n00:26:10.950 --> 00:26:12.030\nFor a small environment,\n\n530\n00:26:12.030 --> 00:26:14.270\na couple of exchange servers where\nyou don't mind doing it by hand?\n\n531\n00:26:14.270 --> 00:26:15.970\nWell, you can use the performance monitor.\n\n532\n00:26:15.970 --> 00:26:18.110\nIt's right there,\nyou just have to know what to look for.\n\n533\n00:26:19.300 --> 00:26:23.380\nAll right, well those are the key\nthings to watch out for on replication.\n\n534\n00:26:23.380 --> 00:26:27.520\nWe're just keeping an eye on that copy\nqueue length and the replay queue length.\n\n535\n00:26:27.520 --> 00:26:29.010\nAnd if they start to get bigger,\n\n536\n00:26:29.010 --> 00:26:30.930\nthen we've got some issues\nwe need to troubleshoot.\n\n537\n00:26:30.930 --> 00:26:32.400\nKind of isolate where that problem is.\n\n538\n00:26:32.400 --> 00:26:37.013\nUsually boils down to network connectivity\nand Disk I/O on the destination side, or\n\n539\n00:26:37.013 --> 00:26:38.790\nmaybe CPU on the other side.\n\n540\n00:26:38.790 --> 00:26:41.210\nJust not being able to keep up\nwith the work that it's doing.\n\n541\n00:26:41.210 --> 00:26:42.195\nSo those are where we wanna target.\n\n542\n00:26:43.310 --> 00:26:47.060\nWell, replication is really only one\naspect of our exchange environment.\n\n543\n00:26:47.060 --> 00:26:49.990\nYou've also got your mailbox servers and\nyour client access servers.\n\n544\n00:26:49.990 --> 00:26:52.190\nWe need to monitor performance on those.\n\n545\n00:26:52.190 --> 00:26:55.400\nBut I'm a little short on time on this\nsegment, so what we're gonna do is do\n\n546\n00:26:55.400 --> 00:26:59.660\na Part Two, where we'll start to take a\nlook at just our general servers are, our\n\n547\n00:26:59.660 --> 00:27:03.770\nmailbox databases and our client access\nservers, what we need to watch for them,\n\n548\n00:27:03.770 --> 00:27:07.690\nhow we kinda monitor and maintain them and\nkeep their performance up to snuff.\n\n549\n00:27:07.690 --> 00:27:12.160\nSo definitely stay tuned for Part Two but\nin this episode, we got a chance to look\n\n550\n00:27:12.160 --> 00:27:17.000\nat monitoring replication, how to spot\nwhen there's a problem, and different ways\n\n551\n00:27:17.000 --> 00:27:20.110\nthat we can look to find that information\nand make sure that our server was healthy.\n\n552\n00:27:20.110 --> 00:27:22.550\nAll right,\nwell I hope you guys enjoyed the episode.\n\n553\n00:27:22.550 --> 00:27:27.285\nSigning off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n554\n00:27:27.285 --> 00:27:32.260\n[SOUND]\n\n",
          "vimeoId": "140111799"
        },
        {
          "description": "In this episode, Don discusses some of the various methods for monitoring the performance and health of Exchange 2013 Mailbox servers and Client Access Servers. He discusses several Performance Monitor counters and highlights how each can be used to monitor different aspects of Exchange performance. He wraps up the show by discussing the Exchange Best Practices Analyzer (BPA).",
          "length": "1679",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt2-092115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt2-092115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt2-092115-1-sm.jpg",
          "title": "Monitoring and Maintenance Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.837\n[MUSIC]\n\n2\n00:00:10.837 --> 00:00:13.819\nAll right, good morning,\ngood afternoon and good evening and\n\n3\n00:00:13.819 --> 00:00:15.966\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.966 --> 00:00:20.501\nI'm your host Don Pezet, back again with\nanother episode of Microsoft Exchange.\n\n5\n00:00:20.501 --> 00:00:23.660\nIn fact,\nthis is Part 2 to the Monitoring and\n\n6\n00:00:23.660 --> 00:00:25.950\nMaintenance episode that\nwe started filming earlier.\n\n7\n00:00:25.950 --> 00:00:29.300\nIn our last episode we had a chance\nto look at how to monitor replication\n\n8\n00:00:29.300 --> 00:00:32.080\non our system, and make sure that\nour servers were communicating and\n\n9\n00:00:32.080 --> 00:00:35.920\nthat our database availability groups\nare working the way their suppose to.\n\n10\n00:00:35.920 --> 00:00:37.840\nNow I wanna switch gears, and\n\n11\n00:00:37.840 --> 00:00:41.010\nwe're gonna just take a look at\nregular old Exchange Servers, right?\n\n12\n00:00:41.010 --> 00:00:44.220\nRegardless of whether we're doing\nreplication or not, there's certain\n\n13\n00:00:44.220 --> 00:00:47.230\nthings that we need to monitor on our\nservers to make sure that they're healthy.\n\n14\n00:00:47.230 --> 00:00:50.330\nAll right, now the first thing that I\nwanna mention before we even get into\n\n15\n00:00:50.330 --> 00:00:55.980\nmonitoring anything, is how important\nit is to have what's called a baseline.\n\n16\n00:00:55.980 --> 00:00:59.150\nAll right,\na baseline is a collection of data, right,\n\n17\n00:00:59.150 --> 00:01:03.610\ndata about your servers when\neverything's running fine.\n\n18\n00:01:03.610 --> 00:01:06.780\nSo you need to be sitting at your office\none day when all the exchange servers\n\n19\n00:01:06.780 --> 00:01:07.400\nare working great.\n\n20\n00:01:07.400 --> 00:01:10.530\nYou're not getting any support tickets,\nthings are running fine.\n\n21\n00:01:10.530 --> 00:01:13.890\nAnd take a snapshot of your servers,\na performance snapshot,\n\n22\n00:01:13.890 --> 00:01:15.230\nnot like a disk snapshot.\n\n23\n00:01:15.230 --> 00:01:17.616\nWe [LAUGH] need a performance snapshot so\n\n24\n00:01:17.616 --> 00:01:20.736\nwe know what things look\nlike when things are good.\n\n25\n00:01:20.736 --> 00:01:23.744\nHave you ever gotten the call\nfrom somebody, and they say, man,\n\n26\n00:01:23.744 --> 00:01:26.890\nmy email is really slow,\nwhat's going on over there?\n\n27\n00:01:26.890 --> 00:01:29.780\nAnd you look at it, and\nyou're like, well it's fine for me,\n\n28\n00:01:29.780 --> 00:01:32.060\nI don't see any problems, right?\n\n29\n00:01:32.060 --> 00:01:33.420\nWhat is slow?\n\n30\n00:01:33.420 --> 00:01:35.880\nDifferent people interpret\nslow in different ways.\n\n31\n00:01:35.880 --> 00:01:39.240\nAnd it could be their laptop, or\ntheir desktop is what's slow.\n\n32\n00:01:39.240 --> 00:01:41.010\nIt could be the servers that are slow.\n\n33\n00:01:41.010 --> 00:01:45.180\nIt could be that things are running like\nnormal, and they just feel like it's slow.\n\n34\n00:01:45.180 --> 00:01:47.087\nMaybe they're in a hurry,\nright, that's how I get.\n\n35\n00:01:47.087 --> 00:01:50.410\nIf I want to print the document,\nit prints at a certain speed, right?\n\n36\n00:01:50.410 --> 00:01:52.190\nBut if I'm in a hurry,\nif I need to get out the door,\n\n37\n00:01:52.190 --> 00:01:54.380\nthat print job takes forever.\n\n38\n00:01:54.380 --> 00:01:56.330\nIt really takes the same time,\nit's our own perception.\n\n39\n00:01:57.530 --> 00:01:59.970\nWe need something to\nbe able to compare to.\n\n40\n00:01:59.970 --> 00:02:04.640\nSo down the road when somebody calls and\nsays, man, email is really slow,\n\n41\n00:02:04.640 --> 00:02:09.070\nwe can gather our performance data for\nright now, compare it to our performance\n\n42\n00:02:09.070 --> 00:02:12.500\ndata from before, when things were good,\nand see if they're different.\n\n43\n00:02:12.500 --> 00:02:15.780\nIf they're the same, we can tell the\nperson, hey, I'm sorry, I don't know your\n\n44\n00:02:15.780 --> 00:02:19.730\nissue is, but the servers are running\nat their normal operating parameters.\n\n45\n00:02:20.860 --> 00:02:24.350\nOr we look at it and we see things are\ndifferent, we go wow, you're right, and\n\n46\n00:02:24.350 --> 00:02:25.530\nit looks like a server issue.\n\n47\n00:02:25.530 --> 00:02:28.450\nIt's not your laptop or your desktop,\nthere's something going on on our end.\n\n48\n00:02:28.450 --> 00:02:30.390\nLet me get in there and find it out.\n\n49\n00:02:30.390 --> 00:02:31.960\nThat's the advantage of having a baseline,\n\n50\n00:02:31.960 --> 00:02:34.060\nwe need to know what things\nare supposed to look like.\n\n51\n00:02:34.060 --> 00:02:37.880\nNow, you might ask yourself,\nshouldn't Microsoft give us a baseline,\n\n52\n00:02:37.880 --> 00:02:40.180\nlike here's what an exchange\nserver should run like?\n\n53\n00:02:40.180 --> 00:02:43.470\nUnfortunately everybody's implementation\nis a little bit different, right?\n\n54\n00:02:43.470 --> 00:02:46.300\nYou might have different hard\ndrives than somebody else.\n\n55\n00:02:46.300 --> 00:02:47.710\nSome hard drives are faster than others.\n\n56\n00:02:47.710 --> 00:02:51.380\nSome people might have SCSI drives,\nsome people might have iSCSI or\n\n57\n00:02:51.380 --> 00:02:52.840\nFiber Channel drives.\n\n58\n00:02:52.840 --> 00:02:55.110\nAnd there's different\nperformance characteristics.\n\n59\n00:02:55.110 --> 00:02:58.350\nSo you might have different RAID levels,\nright?\n\n60\n00:02:58.350 --> 00:03:00.580\nRAID 1 versus RAID 5, or whatever,\n\n61\n00:03:00.580 --> 00:03:03.290\neach of those has different\nread/write performance levels.\n\n62\n00:03:03.290 --> 00:03:08.349\nDifferent CPUs, different quantity of\nCPUs, these are all things that impact it.\n\n63\n00:03:08.349 --> 00:03:12.400\nBut one of the biggest things that impacts\nit are the size of your mailboxes and\n\n64\n00:03:12.400 --> 00:03:14.190\nhow many mailboxes you have.\n\n65\n00:03:14.190 --> 00:03:17.013\nThat can really impact\nperformance on your system.\n\n66\n00:03:17.013 --> 00:03:19.913\nAnd Microsoft doesn't know how many\nmailboxes you're gonna have so\n\n67\n00:03:19.913 --> 00:03:21.670\nthey can't give you just a fixed number.\n\n68\n00:03:21.670 --> 00:03:24.885\nThat's why it's important that\nyou take your own baseline.\n\n69\n00:03:24.885 --> 00:03:28.595\nWhat I'm gonna do this episode is I'm\ngonna go through a number of performance\n\n70\n00:03:28.595 --> 00:03:31.100\ncounters that we need\nto watch in our server.\n\n71\n00:03:31.100 --> 00:03:33.530\nSo that we have an idea\nof what to look for.\n\n72\n00:03:33.530 --> 00:03:37.573\nAnd then what you guys should do is take\nthis information and in real life land,\n\n73\n00:03:37.573 --> 00:03:41.190\nbuild up a Performance Monitor that\ncollects all this data when things\n\n74\n00:03:41.190 --> 00:03:41.760\nare good.\n\n75\n00:03:41.760 --> 00:03:45.087\nAnd then just save it, stick it somewhere\non your hard drive and save it.\n\n76\n00:03:45.087 --> 00:03:47.557\nAnd then down the road\nwhen problems happen,\n\n77\n00:03:47.557 --> 00:03:50.850\nyou can rerun these same counters and\ncompare the two.\n\n78\n00:03:50.850 --> 00:03:54.190\nAnd now you'll know if it's a server\nproblem, or a client problem, or\n\n79\n00:03:54.190 --> 00:03:55.550\nif there's no problem at all, right?\n\n80\n00:03:55.550 --> 00:03:57.360\nThat's what we get from this.\n\n81\n00:03:57.360 --> 00:04:00.970\nNow, there is a tool from Microsoft\nthat makes this a lot easier.\n\n82\n00:04:00.970 --> 00:04:04.915\nThere's a tool called the System\nCenter Operations Manager, SCOM.\n\n83\n00:04:04.915 --> 00:04:08.780\nSCOM has a Microsoft Exchange\n2013 management pack that\n\n84\n00:04:08.780 --> 00:04:10.010\nyou can install in it.\n\n85\n00:04:10.010 --> 00:04:13.150\nAnd that lets it know all\nthe characteristics of Exchange.\n\n86\n00:04:13.150 --> 00:04:17.240\nIt can start monitoring your servers and\nit'll see how many mailboxes you have and\n\n87\n00:04:17.240 --> 00:04:19.510\nit'll know what the average\nsize of those mailboxes are and\n\n88\n00:04:19.510 --> 00:04:22.610\nit'll know what your\nperformance should be.\n\n89\n00:04:22.610 --> 00:04:24.210\nAnd then it can alert you.\n\n90\n00:04:24.210 --> 00:04:28.160\nAnd so if you're running SCOM, it kinda\ntakes care of the baselines for you.\n\n91\n00:04:28.160 --> 00:04:31.050\nAnd it takes care of watching for\nerrors, it takes care of all that.\n\n92\n00:04:31.050 --> 00:04:34.280\nIt's really a great product,\nbut it's kind of expensive.\n\n93\n00:04:34.280 --> 00:04:36.450\nAnd you don't have to have SCOM.\n\n94\n00:04:36.450 --> 00:04:39.110\nSCOM's not really doing anything\nthat you couldn't do yourself with\n\n95\n00:04:39.110 --> 00:04:40.300\na Performance Monitor.\n\n96\n00:04:40.300 --> 00:04:42.990\nIt's just it takes a lot\nof work to do it yourself.\n\n97\n00:04:42.990 --> 00:04:45.470\nYou've gotta know exactly\nwhich counters to use, right?\n\n98\n00:04:45.470 --> 00:04:47.280\nSo the first part is knowledge.\n\n99\n00:04:47.280 --> 00:04:50.230\nThen you've gotta go and\nconfigure it all on your servers, and\n\n100\n00:04:50.230 --> 00:04:52.460\nthe more servers you have,\nthe more it's gonna take.\n\n101\n00:04:52.460 --> 00:04:55.240\nSo, the other thing SCOM gives\nus is centralized management.\n\n102\n00:04:55.240 --> 00:04:59.190\nAnd then lastly, you gotta set it up to be\nable to alert you when a problem happens\n\n103\n00:04:59.190 --> 00:05:00.790\nso you need to know what those alerts are.\n\n104\n00:05:00.790 --> 00:05:04.370\nSo the alerting threshold, that's kind\nof the third piece that SCOM gives you.\n\n105\n00:05:04.370 --> 00:05:08.400\nSo if you already have SCOM, or\nif it's in your budget to get it,\n\n106\n00:05:08.400 --> 00:05:10.450\nit's a great utility for\nmonitoring Exchange.\n\n107\n00:05:11.650 --> 00:05:13.370\nLike I said,\nwe don't actually have to have it,\n\n108\n00:05:13.370 --> 00:05:16.190\nyou can do the monitoring right\nin the Performance Monitor.\n\n109\n00:05:16.190 --> 00:05:18.760\nSo, let's walk through that process.\n\n110\n00:05:18.760 --> 00:05:22.190\nFirst off I'm gonna start with some kinda\ngeneral things, because you'll have\n\n111\n00:05:22.190 --> 00:05:25.530\ndifferent things you wanna monitor based\non whether it's a mailbox server or\n\n112\n00:05:25.530 --> 00:05:27.130\na client access server, right?\n\n113\n00:05:27.130 --> 00:05:28.570\nLet's kinda start there.\n\n114\n00:05:28.570 --> 00:05:33.610\nWhen we jump into our Performance Monitor,\nwe can go and set up Data Collector Sets.\n\n115\n00:05:33.610 --> 00:05:36.720\nAnd Data Collector Sets can\ncollect all sorts of information.\n\n116\n00:05:36.720 --> 00:05:40.930\nAnd when you install Exchange, it actually\ncreates a couple of these for you.\n\n117\n00:05:40.930 --> 00:05:45.020\nSo you'll see Exchange Diagnostics\nDaily Performance Log,\n\n118\n00:05:45.020 --> 00:05:47.350\nand Exchange Diagnostics Performance Log.\n\n119\n00:05:47.350 --> 00:05:50.250\nIt's actually doing its own\ndiagnostics in the background, and\n\n120\n00:05:50.250 --> 00:05:52.098\nit'll alert you to various things.\n\n121\n00:05:52.098 --> 00:05:55.620\nIt's not all-encompassing though, so\nyou don't want to rely on just that.\n\n122\n00:05:55.620 --> 00:05:59.300\nBut you can create your own\nuser-defined Data Collector Set, and\n\n123\n00:05:59.300 --> 00:06:02.020\ndefine all the things I'm gonna\ntalk about in this episode.\n\n124\n00:06:02.020 --> 00:06:06.600\nAnd then use those as a test to\nbe able to see how your server's\n\n125\n00:06:06.600 --> 00:06:08.590\ndoing at any given point, right?\n\n126\n00:06:08.590 --> 00:06:12.765\nNow the server we monitor is gonna\nmake a difference, for example,\n\n127\n00:06:12.765 --> 00:06:14.825\nif it's a client access server.\n\n128\n00:06:14.825 --> 00:06:17.340\nWe have to think what a client\naccess server does, right.\n\n129\n00:06:17.340 --> 00:06:23.320\nEnd users browse to its web pages, or\nthey use POP3 and IMAP4 to go through it,\n\n130\n00:06:23.320 --> 00:06:27.320\nor SMTP email is moved through\nthe queues on a client access server.\n\n131\n00:06:27.320 --> 00:06:30.780\nBut a client access server has\nno mailboxes, zero mailboxes.\n\n132\n00:06:30.780 --> 00:06:35.110\nIt has no queues to speak of, so\nemail is not getting queued there.\n\n133\n00:06:35.110 --> 00:06:38.700\nSo disk I/O on a client access\nserver is almost nonexistent,\n\n134\n00:06:38.700 --> 00:06:41.080\nit really doesn't do a lot of disk I/O.\n\n135\n00:06:41.080 --> 00:06:43.470\nAnd it really doesn't\nconsume a lot of RAM either,\n\n136\n00:06:43.470 --> 00:06:45.650\nstuff is just passing right through it.\n\n137\n00:06:45.650 --> 00:06:51.330\nIt's mostly CPU, and maybe some network,\nbut mostly CPU on a client access server.\n\n138\n00:06:51.330 --> 00:06:54.980\nA mailbox server is very different though,\na mailbox server has a huge database.\n\n139\n00:06:54.980 --> 00:06:57.990\nAnd the database is stored on the hard\ndrive and it's constantly reading and\n\n140\n00:06:57.990 --> 00:06:59.150\nwriting from that database.\n\n141\n00:06:59.150 --> 00:07:03.060\nAnd it's got transaction logs and\nother things, it's got email queues.\n\n142\n00:07:03.060 --> 00:07:06.590\nAll of that is gonna generate disk I/O.\n\n143\n00:07:06.590 --> 00:07:09.280\nAnd so we have something\ndifferent we want to focus on.\n\n144\n00:07:09.280 --> 00:07:13.960\nAnd to try and alleviate the disk I/O, a\nlot of the database gets cached into RAM,\n\n145\n00:07:13.960 --> 00:07:16.780\nand so\nmailbox servers consume a lot of RAM too.\n\n146\n00:07:16.780 --> 00:07:19.580\nThey do use some CPU, but\nnot like client access server.\n\n147\n00:07:19.580 --> 00:07:22.780\nSo, the performance profiles\nof your different servers\n\n148\n00:07:22.780 --> 00:07:25.090\nare actually gonna be\ndifferent based on their role.\n\n149\n00:07:25.090 --> 00:07:28.120\nSo keep that in mind,\nI'll mention as we go through.\n\n150\n00:07:28.120 --> 00:07:30.290\nBut let's start with one that we need\nto monitor pretty much everywhere,\n\n151\n00:07:30.290 --> 00:07:31.630\nand that's processor.\n\n152\n00:07:31.630 --> 00:07:35.980\nWhen you launch the Performance Monitor\nit has one performance counter added by\n\n153\n00:07:35.980 --> 00:07:40.770\ndefault which is CPU, and\nit's percent processor time right?\n\n154\n00:07:40.770 --> 00:07:42.720\nNow what percent processor time is,\n\n155\n00:07:42.720 --> 00:07:47.250\nis the amount of time the CPU\nspends actually doing something.\n\n156\n00:07:47.250 --> 00:07:49.610\nA lot of times your CPU is idle, right?\n\n157\n00:07:49.610 --> 00:07:53.348\nAnd even when it's busy it's\nnot 100% busy, it's 70% busy.\n\n158\n00:07:53.348 --> 00:07:57.130\nWell, if it's 70% busy,\nthat means it's 30% idle.\n\n159\n00:07:57.130 --> 00:07:59.230\nI've got available resources, right?\n\n160\n00:07:59.230 --> 00:08:02.146\nSo that's what percent\nprocessor time measures,\n\n161\n00:08:02.146 --> 00:08:06.160\nis how much time the processor is\nactually occupied doing something.\n\n162\n00:08:06.160 --> 00:08:10.788\nAnd if it's pegged out all of the time,\nour server might be running slower than it\n\n163\n00:08:10.788 --> 00:08:14.000\nshould be because we've\nexceeded what that CPU can do.\n\n164\n00:08:14.000 --> 00:08:17.860\nAnd you might need to go to multiple\nCPUs or higher cores or faster CPUs,\n\n165\n00:08:17.860 --> 00:08:18.680\nor whatever.\n\n166\n00:08:18.680 --> 00:08:21.790\nBut at a minimum,\nyou know that there is an issue.\n\n167\n00:08:21.790 --> 00:08:25.950\nNow, we need to monitor the CPU on both\nmailbox and client access servers, right?\n\n168\n00:08:25.950 --> 00:08:27.400\nIt's important on both sides.\n\n169\n00:08:27.400 --> 00:08:29.480\nBut on a client access server especially.\n\n170\n00:08:29.480 --> 00:08:32.420\nThat is where a lot of your\nprocessor intensive work happens.\n\n171\n00:08:32.420 --> 00:08:35.520\nSo that's one that we definitely\nwant to keep track of.\n\n172\n00:08:35.520 --> 00:08:37.852\nA few other things in addition to that.\n\n173\n00:08:37.852 --> 00:08:42.989\nThere's another counter called\nthe processor queue length.\n\n174\n00:08:42.989 --> 00:08:44.897\nAnd the processor queue length,\n\n175\n00:08:44.897 --> 00:08:49.640\nthat is basically how many programs\nare waiting in line to get to your CPU.\n\n176\n00:08:49.640 --> 00:08:51.890\nNow modern CPUs are fast.\n\n177\n00:08:51.890 --> 00:08:53.930\nThey do millions of operations per second.\n\n178\n00:08:53.930 --> 00:08:56.720\nThey are really impressively fast.\n\n179\n00:08:56.720 --> 00:08:59.190\nBut they get busy and\nsometimes you have to wait.\n\n180\n00:08:59.190 --> 00:09:01.210\nAnd so, if I add in this other category.\n\n181\n00:09:01.210 --> 00:09:06.390\nI'm just gonna go in to Add Counters and\nI'm gonna find the Processor section.\n\n182\n00:09:07.460 --> 00:09:10.540\nSo I'm looking for\nnot Process but Processor.\n\n183\n00:09:10.540 --> 00:09:11.528\nThere we go.\n\n184\n00:09:11.528 --> 00:09:17.270\nAnd inside a Processor we can find in\nhere the Processor Queue Length and\n\n185\n00:09:17.270 --> 00:09:19.820\noh sorry,\nthis one's actually not under processor.\n\n186\n00:09:19.820 --> 00:09:21.138\nIt's one of that they kind of moved off.\n\n187\n00:09:21.138 --> 00:09:22.690\nI was wondering why it wasn't there.\n\n188\n00:09:22.690 --> 00:09:25.040\nIf we go and find system.\n\n189\n00:09:25.040 --> 00:09:25.870\nThere we go.\n\n190\n00:09:25.870 --> 00:09:29.110\nIf you're in the processor queue it means\nyou haven't gotten to the processor yet.\n\n191\n00:09:29.110 --> 00:09:31.482\nSo that's why it's not under\nthe processor section, and\n\n192\n00:09:31.482 --> 00:09:33.140\nso we have to find it under system.\n\n193\n00:09:33.140 --> 00:09:37.140\nIt's not necessarily intuitive,\nbut it does make some sense.\n\n194\n00:09:37.140 --> 00:09:42.600\nAnd if we go under system, we'll find that\nprocessor queue length and there it is.\n\n195\n00:09:42.600 --> 00:09:43.730\nProcessor queue length.\n\n196\n00:09:43.730 --> 00:09:47.010\nSo this is how many programs are waiting\nin line to get to the processor.\n\n197\n00:09:47.010 --> 00:09:51.520\nNow remember, when I went to [LAUGH]\npercent processor time, when we went\n\n198\n00:09:51.520 --> 00:09:56.980\nthere, it actually let me pick\nindividual cores if I wanted to, right?\n\n199\n00:09:56.980 --> 00:10:00.350\nBut here I can't and the reason is\nthese haven't made it to the CPU.\n\n200\n00:10:00.350 --> 00:10:02.040\nThey don't care what core they go to,\nthey're just waiting for\n\n201\n00:10:02.040 --> 00:10:04.980\nsome core to open up somewhere, right?\n\n202\n00:10:04.980 --> 00:10:07.030\nAnd that's this processor queue length.\n\n203\n00:10:07.030 --> 00:10:11.530\nAs a rule of thumb, Microsoft says\nthis number should not be above 10 for\n\n204\n00:10:11.530 --> 00:10:12.570\nany length of time.\n\n205\n00:10:12.570 --> 00:10:13.470\nAll right?\n\n206\n00:10:13.470 --> 00:10:15.010\nExpect to see some pop in here.\n\n207\n00:10:15.010 --> 00:10:18.200\nThere's always gonna be programs waiting\nfor that chance to get to the CPU.\n\n208\n00:10:18.200 --> 00:10:21.700\nBut if it's over ten for\na consistent period of time\n\n209\n00:10:21.700 --> 00:10:24.380\nthat usually indicates that\nyour processor is saturated.\n\n210\n00:10:24.380 --> 00:10:28.470\nThat you need more cores, or\nyou need more physical CPUs, or\n\n211\n00:10:28.470 --> 00:10:30.550\nyou need to just add more\nclient access servers and\n\n212\n00:10:30.550 --> 00:10:34.650\nstart distributing your load and take\nsome of the pressure off of this server.\n\n213\n00:10:34.650 --> 00:10:35.190\nAll right.\n\n214\n00:10:35.190 --> 00:10:37.940\nOn a client access server,\nthis is a really important one to watch.\n\n215\n00:10:37.940 --> 00:10:40.060\nOn a mailbox server, it's still important.\n\n216\n00:10:40.060 --> 00:10:41.350\nRight, it's not unimportant.\n\n217\n00:10:41.350 --> 00:10:44.510\nBut it's less likely that you'll see\nthis thing pegged out, all right.\n\n218\n00:10:44.510 --> 00:10:46.200\nSo that's kind of the CPU side.\n\n219\n00:10:46.200 --> 00:10:49.720\nAnd I'm working this from the angle of,\nwhen you monitor a server,\n\n220\n00:10:49.720 --> 00:10:51.220\nthere's the big four, right.\n\n221\n00:10:51.220 --> 00:10:53.980\nCPU, memory, disk, network, right.\n\n222\n00:10:53.980 --> 00:10:58.080\nSo on the CPU side, those are the two\ncounters that are really handy.\n\n223\n00:10:58.080 --> 00:11:00.190\nOn the memory side,\n\n224\n00:11:00.190 --> 00:11:03.290\nwe actually have quite a few different\ncounters that we can look for.\n\n225\n00:11:03.290 --> 00:11:05.740\nOn the memory side, I'm not really worried\n\n226\n00:11:05.740 --> 00:11:09.290\nif my Exchange Server is running\nat 100% memory consumption.\n\n227\n00:11:09.290 --> 00:11:11.000\nA lot of people freak out about that,\nright?\n\n228\n00:11:11.000 --> 00:11:17.360\nIf you have 32 gigs of RAM in your mailbox\nserver, and it's using 31 gigs of RAM.\n\n229\n00:11:17.360 --> 00:11:19.100\nIs that freak out time?\n\n230\n00:11:19.100 --> 00:11:19.710\nMaybe.\n\n231\n00:11:19.710 --> 00:11:21.690\nFor some people it is,\nfor some people it isn't.\n\n232\n00:11:21.690 --> 00:11:25.560\nFor me, I look at it and I say, wow,\nthat server's using its resources wisely.\n\n233\n00:11:25.560 --> 00:11:26.100\nRight?\n\n234\n00:11:26.100 --> 00:11:29.380\nCaches much data into RAM as you can so\nyou never have to go to the hard drive.\n\n235\n00:11:29.380 --> 00:11:30.140\nI love it.\n\n236\n00:11:30.140 --> 00:11:30.880\nAll right.\n\n237\n00:11:30.880 --> 00:11:34.660\nSo the only time you really have\na problem is when you're using\n\n238\n00:11:34.660 --> 00:11:36.610\nmore memory than you have.\n\n239\n00:11:36.610 --> 00:11:39.130\nI know I've got 32 gigs\nof physical memory, and\n\n240\n00:11:39.130 --> 00:11:41.860\nI'm using 36 gigs of memory, okay?\n\n241\n00:11:41.860 --> 00:11:45.070\nHow did it magically\ncreate those four gigs?\n\n242\n00:11:45.070 --> 00:11:48.080\nWell, it's not magic,\nit's using your hard drive, right?\n\n243\n00:11:48.080 --> 00:11:51.220\nIt's swapping to a page\nfile on the hard drive.\n\n244\n00:11:51.220 --> 00:11:55.440\nUnfortunately when you measure the speed\nof memory you measure it in nanoseconds.\n\n245\n00:11:55.440 --> 00:11:58.210\nWhen you measure the speed of hard\ndrives you measure it in milliseconds.\n\n246\n00:11:58.210 --> 00:12:01.200\nHard drives are significantly\nslower than memory.\n\n247\n00:12:01.200 --> 00:12:02.780\nAnd so that's a problem.\n\n248\n00:12:02.780 --> 00:12:06.770\nThat means when we're using the hard\ndrive as memory, we're using slow memory.\n\n249\n00:12:06.770 --> 00:12:09.870\nSo I don't necessarily care\nhow much memory I am using.\n\n250\n00:12:09.870 --> 00:12:12.440\nWhat I care about is whether I'm paging or\nnot.\n\n251\n00:12:12.440 --> 00:12:15.800\nI want to know if I am hitting a page\nfile, if I'm hitting the hard drive.\n\n252\n00:12:15.800 --> 00:12:17.840\nIf I'm hitting the hard\ndrive that's a problem.\n\n253\n00:12:17.840 --> 00:12:19.738\nI need to add more memory, all right.\n\n254\n00:12:19.738 --> 00:12:23.910\nBut if I'm not using the hard drive and\nI'm running it 95% memory utilization,\n\n255\n00:12:23.910 --> 00:12:27.890\nI'm actually okay with that as long\nas I'm not using the hard drive.\n\n256\n00:12:27.890 --> 00:12:30.070\nNow if I'm anticipating\nspikes down the road,\n\n257\n00:12:30.070 --> 00:12:32.040\nI might want to go ahead\nan upgrade anyway.\n\n258\n00:12:32.040 --> 00:12:35.660\nBut it's not like urgent red light,\nlet's get some memory right now.\n\n259\n00:12:35.660 --> 00:12:37.210\nI can take my time.\n\n260\n00:12:37.210 --> 00:12:39.460\nBut we just want to make sure\nwe're not paging the hard drive.\n\n261\n00:12:39.460 --> 00:12:41.060\nSo that's really what\nwe want to watch for.\n\n262\n00:12:41.060 --> 00:12:44.320\nAnd an easy way to spot that is\na neat little counter we can pull.\n\n263\n00:12:44.320 --> 00:12:45.490\nIt's under the memory section.\n\n264\n00:12:45.490 --> 00:12:48.490\nLet me go here and find memory.\n\n265\n00:12:49.900 --> 00:12:50.680\nAnd notice these.\n\n266\n00:12:50.680 --> 00:12:53.430\nI'm not looking for\nthese under the exchange section.\n\n267\n00:12:53.430 --> 00:12:56.910\nThese are pretty standard across\nany server implementation, right?\n\n268\n00:12:56.910 --> 00:12:58.400\nSo if you've got a file server,\n\n269\n00:12:58.400 --> 00:13:01.030\na domain controller, whatever,\na lot of these can be monitored too.\n\n270\n00:13:01.030 --> 00:13:06.310\nThe counter I'm looking for is page reads\nand we'll find it in here somewhere.\n\n271\n00:13:06.310 --> 00:13:10.090\nWhich is, let's see Page.\n\n272\n00:13:12.220 --> 00:13:13.750\nI will find it.\n\n273\n00:13:13.750 --> 00:13:15.750\nThere it is.\nPage reads per second.\n\n274\n00:13:15.750 --> 00:13:18.060\nWhat is a page read?\n\n275\n00:13:18.060 --> 00:13:21.660\nA page read is when I look to RAM for\nsomething and it wasn't there and\n\n276\n00:13:21.660 --> 00:13:24.310\nI had to go to the hard drive for it.\n\n277\n00:13:24.310 --> 00:13:26.560\nHaving a page file is not a bad thing.\n\n278\n00:13:26.560 --> 00:13:29.090\nEvery server has a page file unless\nyou've turned it off yourself.\n\n279\n00:13:29.090 --> 00:13:30.400\nWhich is somewhat dangerous.\n\n280\n00:13:30.400 --> 00:13:32.170\nEverybody's got a page file.\n\n281\n00:13:32.170 --> 00:13:33.940\nBut, it doesn't you're using it.\n\n282\n00:13:33.940 --> 00:13:37.850\nBut if you get reads on the page file,\nthat means you're using it,\n\n283\n00:13:37.850 --> 00:13:39.120\nyou're actually using it.\n\n284\n00:13:39.120 --> 00:13:42.230\nThis is a great way to see whether\nyou're paging the disk and\n\n285\n00:13:42.230 --> 00:13:45.900\nif you see this counter registering\na high quantity of numbers for\n\n286\n00:13:45.900 --> 00:13:49.250\nany period of time, that means you were\nreading from a high drive that whole time\n\n287\n00:13:49.250 --> 00:13:51.900\nand your server was running\nslower than it should.\n\n288\n00:13:51.900 --> 00:13:53.770\nSo that's a great one to monitor.\n\n289\n00:13:53.770 --> 00:13:56.250\nDefinitely monitor this\none on a mailbox server.\n\n290\n00:13:56.250 --> 00:13:58.390\nOn a client access server,\nit's not so important.\n\n291\n00:13:58.390 --> 00:14:00.590\nClient access servers they\nuse a lot of CPU ram.\n\n292\n00:14:00.590 --> 00:14:03.290\nThey don't do too crazy on, but they can.\n\n293\n00:14:03.290 --> 00:14:04.900\nRight?\nThey run IAS.\n\n294\n00:14:04.900 --> 00:14:06.980\nAnd IAS creates these workerflows, for\n\n295\n00:14:06.980 --> 00:14:09.790\neverybody that opens up sessions\nthrough the client access server.\n\n296\n00:14:09.790 --> 00:14:17.370\nSo if the server gets overwhelmed, it can\ncreate too many of these worker processes.\n\n297\n00:14:17.370 --> 00:14:21.160\nAnd it ends up eating up the RAM, and\nstarting to write to hard drive and\n\n298\n00:14:21.160 --> 00:14:22.140\ngetting slow there too.\n\n299\n00:14:22.140 --> 00:14:24.930\nAnd so you can add more client\naccess servers to alleviate that.\n\n300\n00:14:24.930 --> 00:14:26.960\nBut it's definitely important\non a mailbox server.\n\n301\n00:14:28.880 --> 00:14:30.300\nAll right, now I could stop there.\n\n302\n00:14:30.300 --> 00:14:31.560\nThat's usually the one that I look for.\n\n303\n00:14:31.560 --> 00:14:33.640\nBut we could jump for a few other things.\n\n304\n00:14:33.640 --> 00:14:37.740\nFor example, right here under\nmemory there's pages output.\n\n305\n00:14:37.740 --> 00:14:42.040\nAnd pages output per second,\nlet's see if we can find that one.\n\n306\n00:14:42.040 --> 00:14:44.650\nPages output per second, there we go.\n\n307\n00:14:44.650 --> 00:14:49.790\nThat is when your system takes data from\nRAM and writes it to the hard drive.\n\n308\n00:14:49.790 --> 00:14:52.590\nSo I've got some data in RAM\nthat hasn't been used for\n\n309\n00:14:52.590 --> 00:14:56.270\na few moments, but it's been used recent\nenough that I still want it ready.\n\n310\n00:14:56.270 --> 00:14:57.822\nSo we write it to the page file.\n\n311\n00:14:57.822 --> 00:15:00.180\nAll right, this is when we put\nthings into the page file.\n\n312\n00:15:00.180 --> 00:15:04.230\nNow, I'm not so worried about\nputting things into the page file,\n\n313\n00:15:04.230 --> 00:15:07.130\nbecause it's the system writing it,\nthe end users don't see that.\n\n314\n00:15:07.130 --> 00:15:09.930\nI'm really worried about when I\nretrieve data from the page file,\n\n315\n00:15:09.930 --> 00:15:11.430\nthat's when we see slowness.\n\n316\n00:15:11.430 --> 00:15:14.380\nSo, you don't necessarily need to monitor\nboth, but just remember this one's there.\n\n317\n00:15:14.380 --> 00:15:17.908\nIf you wanna catch when you're server\nwrites something to that page file,\n\n318\n00:15:17.908 --> 00:15:19.766\nPage outputs per second's a good one.\n\n319\n00:15:19.766 --> 00:15:22.052\nAll right.\n\n320\n00:15:22.052 --> 00:15:24.340\nDisk I/O.\n\n321\n00:15:24.340 --> 00:15:28.600\nOn a mailbox server, disk I/O is nine\ntimes out of ten your bottleneck.\n\n322\n00:15:28.600 --> 00:15:31.020\nRight?\nIf you look at a server, processor,\n\n323\n00:15:31.020 --> 00:15:32.960\nmemory, network, hard drive.\n\n324\n00:15:32.960 --> 00:15:36.590\nHard drive is typically the slowest\ncomponent in your system.\n\n325\n00:15:36.590 --> 00:15:39.640\nSSDs are changing that, but\nif you're on traditional spinning media,\n\n326\n00:15:39.640 --> 00:15:42.630\nyour hard drives are usually\nthe slowest device in your system.\n\n327\n00:15:42.630 --> 00:15:45.760\nSo when our exchange server\nsees me running slow,\n\n328\n00:15:45.760 --> 00:15:47.690\nit's not normally\nthe client access server.\n\n329\n00:15:47.690 --> 00:15:50.480\nIt could if the CPU is pegged\ndown on the client access server.\n\n330\n00:15:50.480 --> 00:15:53.079\nBut more often than not, the client\naccess server is just turning around and\n\n331\n00:15:53.079 --> 00:15:54.102\naccessing a mailbox server.\n\n332\n00:15:54.102 --> 00:15:57.049\nAnd if the mailbox server has\nover saturated its' disks,\n\n333\n00:15:57.049 --> 00:16:00.961\nif it's reaching across a scuzzy\ncontroller or fiber channel controller and\n\n334\n00:16:00.961 --> 00:16:04.992\nit's just used all of the available\nbandwidth Then, it's gonna wait and now,\n\n335\n00:16:04.992 --> 00:16:06.884\nit's taking time to get to the disk.\n\n336\n00:16:06.884 --> 00:16:09.330\nAnd so, we've got a couple\nof good counters for this.\n\n337\n00:16:09.330 --> 00:16:11.800\nOn a mailbox server,\nthese are really a must.\n\n338\n00:16:11.800 --> 00:16:15.020\nThe number one counter\nthat we need to watch for\n\n339\n00:16:15.020 --> 00:16:16.980\nis what's called the disk queue length.\n\n340\n00:16:16.980 --> 00:16:19.810\nI talk about the process of queue length\nfor programs that are waiting in line to\n\n341\n00:16:19.810 --> 00:16:22.460\nget to the CPU,\ndisk queue length is the same thing.\n\n342\n00:16:22.460 --> 00:16:24.870\nThe number of programs waiting\nin line to get to the disk.\n\n343\n00:16:24.870 --> 00:16:26.500\nBut this one is a little bit trickier,\nright?\n\n344\n00:16:26.500 --> 00:16:29.160\nI'm gonna go to the physical disk section.\n\n345\n00:16:29.160 --> 00:16:33.620\nLet me just find that in\nhere probably in the ps.\n\n346\n00:16:33.620 --> 00:16:36.060\nSo I'll find physical disk.\n\n347\n00:16:36.060 --> 00:16:37.130\nAnd under physical disk,\n\n348\n00:16:37.130 --> 00:16:40.700\nI'll find that disk queue length\ncounter in it here somewhere.\n\n349\n00:16:42.840 --> 00:16:46.860\nAnd it is, let's see,\nit's average, disk queue length.\n\n350\n00:16:46.860 --> 00:16:48.850\nAverage disk queue length.\n\n351\n00:16:48.850 --> 00:16:53.620\nIf you just choose it and add it in, the\nnumber it gives you is not very useful and\n\n352\n00:16:53.620 --> 00:16:56.150\nthat's because it's rolling\nall your disks together.\n\n353\n00:16:56.150 --> 00:16:58.960\nYou really need to monitor\nyour disks individually,\n\n354\n00:16:58.960 --> 00:17:03.430\nbecause you'll probably have an operating\nsystem disk, a page file disk,\n\n355\n00:17:03.430 --> 00:17:06.560\na transaction log disk and\na mailbox database disk.\n\n356\n00:17:06.560 --> 00:17:08.670\nRight?\nYou'll likely have four separate disks.\n\n357\n00:17:08.670 --> 00:17:12.070\nAnd those disks might\nactually be RAID arrays.\n\n358\n00:17:12.070 --> 00:17:14.860\nSo your operating system,\nyour page file and your transaction logs,\n\n359\n00:17:14.860 --> 00:17:17.300\nthose might all be RAID 1 mirrors.\n\n360\n00:17:17.300 --> 00:17:18.100\nRight?\n\n361\n00:17:18.100 --> 00:17:23.180\nBut then your mailbox database might be\nRAID 5 or RAID 10, different type of RAID.\n\n362\n00:17:23.180 --> 00:17:26.650\nIt just depends on how well you wanted\nto tune the performance on the system.\n\n363\n00:17:26.650 --> 00:17:29.310\nSo when we monitor these,\nthe disk queue length is affected by that.\n\n364\n00:17:30.360 --> 00:17:32.960\nThe disk queue length is based on\n\n365\n00:17:32.960 --> 00:17:36.120\nhow many programs are waiting\nto get to the hard drive, right?\n\n366\n00:17:36.120 --> 00:17:38.690\nTo write or read from the hard drive.\n\n367\n00:17:38.690 --> 00:17:43.380\nA traditional spinning media has a little\nmechanical arm that moves around on it.\n\n368\n00:17:43.380 --> 00:17:45.320\nAnd the arm can only be\nin one place at a time.\n\n369\n00:17:45.320 --> 00:17:47.130\nSo it can only do one thing at a time.\n\n370\n00:17:47.130 --> 00:17:51.680\nIf I've got a single drive, and it's doing\none operation, everybody else has to wait.\n\n371\n00:17:52.770 --> 00:17:55.570\nBut what if I have a RAID 5 array?\n\n372\n00:17:55.570 --> 00:17:58.190\nAnd my RAID 5 array has 6 drives in it.\n\n373\n00:17:58.190 --> 00:18:00.690\nWell, we'll chalk one of\nthose drives up to parody.\n\n374\n00:18:00.690 --> 00:18:03.390\nAnd in the other five drives, technically,\n\n375\n00:18:03.390 --> 00:18:06.440\nI have five heads that can all\nbe reading at the same time.\n\n376\n00:18:06.440 --> 00:18:08.660\nI can be doing five things at once.\n\n377\n00:18:08.660 --> 00:18:10.100\nIt doesn't really work at that way.\n\n378\n00:18:10.100 --> 00:18:12.770\nBecause you take one operation,\nand you spread it across all five.\n\n379\n00:18:12.770 --> 00:18:14.940\nBut it means they get\ndone five times faster.\n\n380\n00:18:14.940 --> 00:18:19.340\nSo, Microsoft's rule of thumb on this one,\nwhen you're monitoring your disk queuing,\n\n381\n00:18:19.340 --> 00:18:23.700\nmonitor your disks individually, so\nyou might have a C, D, E, and F drive.\n\n382\n00:18:23.700 --> 00:18:25.740\nMonitor them individually and\n\n383\n00:18:25.740 --> 00:18:29.620\nthen what you're looking for is the number\nshould really never be above 2.\n\n384\n00:18:29.620 --> 00:18:35.080\nYou never wanna see more than two programs\nwaiting in line, for a single disk.\n\n385\n00:18:35.080 --> 00:18:40.050\nThat means if it's a RAID five array with\nsix discs, take one out for parody right\n\n386\n00:18:40.050 --> 00:18:43.860\nand so you've got five disks left,\nyou need to multiply five by two so ten.\n\n387\n00:18:43.860 --> 00:18:46.600\nAnd the way Microsoft always phrases it is\n\n388\n00:18:46.600 --> 00:18:50.320\ntwo times the number of\nspindles in the disc.\n\n389\n00:18:50.320 --> 00:18:53.240\nAnd this really applies to SSD\nalso although SSD can do some\n\n390\n00:18:53.240 --> 00:18:55.700\ncool things where it can write to\nmore than one place at the same time.\n\n391\n00:18:55.700 --> 00:18:59.450\nIf you have dual channel stuff\nit can really get kind of crazy.\n\n392\n00:18:59.450 --> 00:19:04.490\nBut, the basic rule of thumb, you don't\nwant to see this queue get above two for\n\n393\n00:19:04.490 --> 00:19:07.250\neach individual physical\ndisc that you've got.\n\n394\n00:19:07.250 --> 00:19:11.200\nSo keep that in mind, this number is gonna\nbe a little bit different based on your\n\n395\n00:19:11.200 --> 00:19:12.839\nphysical architecture behind the scenes.\n\n396\n00:19:15.130 --> 00:19:17.460\nNow that's the one I normally watch for.\n\n397\n00:19:17.460 --> 00:19:19.950\nI'm not normally concerned\nabout how fast or\n\n398\n00:19:19.950 --> 00:19:23.120\nhow slow the disk is,\nas long as I don't have rights piling up.\n\n399\n00:19:23.120 --> 00:19:25.470\nAnd the disk queue length shows\nyou when things are piling up,\n\n400\n00:19:25.470 --> 00:19:27.310\nthat's when you know you've got a problem.\n\n401\n00:19:27.310 --> 00:19:29.710\nBut we might be concerned about speed,\nright?\n\n402\n00:19:29.710 --> 00:19:32.020\nI might want to know how\nfast my reads are happening,\n\n403\n00:19:32.020 --> 00:19:33.200\nhow fast my writes are happening.\n\n404\n00:19:33.200 --> 00:19:36.150\nAnd so we can spot that too, there's\nperformance counters buried in here.\n\n405\n00:19:36.150 --> 00:19:40.210\nI'm gonna add this queue length and then\nI'm gonna look for two other ones here.\n\n406\n00:19:40.210 --> 00:19:45.350\nYou'll find the average disk read and\naverage disk writes per second.\n\n407\n00:19:45.350 --> 00:19:47.280\nThey're up toward the top of this one.\n\n408\n00:19:48.510 --> 00:19:53.390\nAverage disk reads per second and\nwrites per second.\n\n409\n00:19:53.390 --> 00:19:54.600\nThese two guys right here.\n\n410\n00:19:54.600 --> 00:19:58.370\nSo if I want to see how much\nactivity is happening on the system.\n\n411\n00:19:58.370 --> 00:20:00.010\nHow many reads am I doing per second?\n\n412\n00:20:00.010 --> 00:20:01.730\nHow many writes am I doing per second?\n\n413\n00:20:01.730 --> 00:20:05.610\nNow I can monitor how active those drives\nare, and I can get a chance to see that.\n\n414\n00:20:05.610 --> 00:20:07.690\nAnd you can monitor\nthe write queue length and\n\n415\n00:20:07.690 --> 00:20:10.540\nthe read queue length separately\nif you wanna address it that way.\n\n416\n00:20:10.540 --> 00:20:12.430\nI don't normally worry about that,\nbut you can.\n\n417\n00:20:12.430 --> 00:20:16.050\nSo you can really get into the nitty\ngritty details of that system.\n\n418\n00:20:16.050 --> 00:20:17.400\nOn a client access server,\n\n419\n00:20:17.400 --> 00:20:19.910\nyou might choose to ignore\nthis performance altogether.\n\n420\n00:20:19.910 --> 00:20:23.320\nBut on a mailbox server, you really gotta\nmonitor this one, it's really important.\n\n421\n00:20:25.430 --> 00:20:29.550\nAll right, now if you see a high\nqueue length, what does it mean?\n\n422\n00:20:29.550 --> 00:20:32.100\nI mentioned when you have the CPU,\nthe processor queue length,\n\n423\n00:20:32.100 --> 00:20:34.210\nwhen it's really high,\nyou need more processors.\n\n424\n00:20:34.210 --> 00:20:36.770\nEither more cores or more CPUs.\n\n425\n00:20:36.770 --> 00:20:40.290\nOr you can roll out more servers and\nspread your clients out.\n\n426\n00:20:40.290 --> 00:20:41.960\nWith a client access server, that's easy.\n\n427\n00:20:41.960 --> 00:20:43.570\nAdd more client access servers.\n\n428\n00:20:43.570 --> 00:20:45.310\nOn a mailbox server, it's a little harder.\n\n429\n00:20:45.310 --> 00:20:49.750\nYou need to add more mailbox databases and\nspread your mailboxes out.\n\n430\n00:20:49.750 --> 00:20:51.330\nWhat about disk queue length?\n\n431\n00:20:51.330 --> 00:20:55.330\nWell, disk queue length, if it starts\nto add up, it's gonna be one of.\n\n432\n00:20:55.330 --> 00:20:58.700\nWell, it's a number of causes but\nthere's really only two solutions.\n\n433\n00:20:58.700 --> 00:21:01.300\nSolution one is to add more discs.\n\n434\n00:21:01.300 --> 00:21:05.520\nIf it's a RAID five array with six discs,\nI'll put up to ten discs.\n\n435\n00:21:05.520 --> 00:21:06.700\nYou're adding more spindles.\n\n436\n00:21:06.700 --> 00:21:09.280\nMore spindles means it can\ndo more operations at once.\n\n437\n00:21:09.280 --> 00:21:10.980\nIt can get more work done.\n\n438\n00:21:10.980 --> 00:21:12.900\nThe more discs in your array the better.\n\n439\n00:21:12.900 --> 00:21:17.470\nA lot of people don't realize that, that\nif you have a RAID five array with three,\n\n440\n00:21:17.470 --> 00:21:22.320\nthree terabyte drives versus a RAID\nfive well, three terabytes job, right?\n\n441\n00:21:22.320 --> 00:21:24.060\nThat's be what, nine terabytes.\n\n442\n00:21:24.060 --> 00:21:27.070\nOr if I had five two terabyte drives.\n\n443\n00:21:27.070 --> 00:21:29.000\nThat would be ten terabytes.\n\n444\n00:21:29.000 --> 00:21:32.990\nWell the five two terabyte drives will\nactually perform better than the three\n\n445\n00:21:32.990 --> 00:21:36.360\nthree terabyte drives cuz I've got\nfive spindles as opposed to three.\n\n446\n00:21:36.360 --> 00:21:37.170\nBetter performance.\n\n447\n00:21:37.170 --> 00:21:37.930\nRight?\nThese are things that we\n\n448\n00:21:37.930 --> 00:21:39.240\ncan kinda look for.\n\n449\n00:21:39.240 --> 00:21:40.460\nSo that's solution one.\n\n450\n00:21:40.460 --> 00:21:43.500\nYou throw more disks at it.\n\n451\n00:21:43.500 --> 00:21:47.480\nSolution two is to either\nupgrade our storage,\n\n452\n00:21:47.480 --> 00:21:53.490\ngo from scuzzy to fiber channel,\nor to 10k drives to 15k drives.\n\n453\n00:21:53.490 --> 00:21:56.840\nWhatever it is to get faster architecture.\n\n454\n00:21:56.840 --> 00:21:58.440\nYou'll see this with IScuzzy a lot.\n\n455\n00:21:58.440 --> 00:22:00.430\nPeople think IScuzzy is great.\n\n456\n00:22:00.430 --> 00:22:02.990\nWell, at the end of the day\nIScuzzy really sucks, and\n\n457\n00:22:02.990 --> 00:22:05.430\nit just doesn't give you good performance.\n\n458\n00:22:05.430 --> 00:22:09.105\nSo, IScuzzy is fine for\nnon critical things, but for\n\n459\n00:22:09.105 --> 00:22:12.330\na mailbox server IScuzzy\nis throttling you.\n\n460\n00:22:12.330 --> 00:22:13.670\nYou end up with this bottleneck.\n\n461\n00:22:13.670 --> 00:22:14.340\nIt's really bad.\n\n462\n00:22:14.340 --> 00:22:19.240\nAnd you'll see the queue length start\nto go up for it because of just nature.\n\n463\n00:22:19.240 --> 00:22:23.290\nBut if you move to fiber channel,\nyou move to direct attached SCSI,\n\n464\n00:22:23.290 --> 00:22:26.580\nyou're gonna get a huge\nperformance increase over that.\n\n465\n00:22:26.580 --> 00:22:29.900\nThe other option would be to add more\nthan one mailbox database server,\n\n466\n00:22:29.900 --> 00:22:33.530\ncreate more than one mailbox database,\nand spread your mailboxes over it.\n\n467\n00:22:33.530 --> 00:22:36.580\nOr you could even just have one server and\njust add more storage that was separate.\n\n468\n00:22:36.580 --> 00:22:39.420\nSo you've got database one\non one set of drives and\n\n469\n00:22:39.420 --> 00:22:42.870\ndatabase two on a second set of\nhard drives and spread your users.\n\n470\n00:22:42.870 --> 00:22:46.150\nBe careful if you do that though,\nbecause if you're using a shared storage\n\n471\n00:22:46.150 --> 00:22:48.580\ncontroller you might\nstill have contention.\n\n472\n00:22:48.580 --> 00:22:51.853\nSo ideally you'd have two separate storage\ncontrollers tied to these separate banks\n\n473\n00:22:51.853 --> 00:22:53.671\nof drives, and\nthat starts to get expensive and\n\n474\n00:22:53.671 --> 00:22:55.635\nyou might as well add\nanother server at that point.\n\n475\n00:22:55.635 --> 00:22:57.180\nIt's kind of a tough decision.\n\n476\n00:22:58.780 --> 00:23:04.300\nAll right, let's see that was I gotta\nkeep track of this, CPU Memory Network.\n\n477\n00:23:04.300 --> 00:23:07.690\nWell no, I left off network,\nshoot, CPU Memory Disk,\n\n478\n00:23:07.690 --> 00:23:08.770\nthat's what we talked about so far.\n\n479\n00:23:08.770 --> 00:23:09.870\nLet's talk about Network now right?\n\n480\n00:23:09.870 --> 00:23:14.210\nNetwork's important, on the Network side\nwe usually just care about bandwidth it's\n\n481\n00:23:14.210 --> 00:23:17.140\nreally easy, you got a network adaptor in\nyour system you monitor it's bandwidth and\n\n482\n00:23:17.140 --> 00:23:18.160\nyou're done right?\n\n483\n00:23:18.160 --> 00:23:22.620\nIf I've got a gigabit card, and I see I'm\nrunning at 100% utilization all the time,\n\n484\n00:23:22.620 --> 00:23:23.310\nI've got a problem.\n\n485\n00:23:23.310 --> 00:23:27.340\nI need to add more bandwidth, I could add\nanother gig card and bond them together or\n\n486\n00:23:27.340 --> 00:23:31.250\nbump up to a ten gig card, go crazy,\nall sorts of options that are out there.\n\n487\n00:23:31.250 --> 00:23:34.380\nBut we need to have a handle\non whether that's occurring.\n\n488\n00:23:34.380 --> 00:23:39.030\nSo you can jump to the network section,\nso let me just find network in here\n\n489\n00:23:40.130 --> 00:23:45.310\nAnd we can jump into our network adapter,\nour network interface.\n\n490\n00:23:45.310 --> 00:23:47.930\nNow, why two separate values, right?\n\n491\n00:23:47.930 --> 00:23:52.120\nWell, usually a network adapter just\nhas one interface on it, right?\n\n492\n00:23:52.120 --> 00:23:54.770\nBut in most servers today\nyou get those dual mix,\n\n493\n00:23:54.770 --> 00:23:57.210\nwhere you have two interfaces\non the same adapter.\n\n494\n00:23:57.210 --> 00:23:58.851\nAnd so that's why we have\nthese separate entities.\n\n495\n00:23:58.851 --> 00:24:02.010\nOne's the adaptor itself,\nwhere you've got like a PCI bus and\n\n496\n00:24:02.010 --> 00:24:04.511\na TCP offload engine that\nyou have to deal with.\n\n497\n00:24:04.511 --> 00:24:07.661\nAnd then the other ones,\nthe actual interface itself.\n\n498\n00:24:07.661 --> 00:24:10.816\nNow which one should we monitor,\ncuz they have the same counters?\n\n499\n00:24:10.816 --> 00:24:12.858\nIt depends.\n\n500\n00:24:12.858 --> 00:24:15.220\nIf it's an expensive card,\nwhich in a server,\n\n501\n00:24:15.220 --> 00:24:17.653\nyou are usually going to\nuse the expensive ones.\n\n502\n00:24:17.653 --> 00:24:19.197\nYou might have two interfaces and\n\n503\n00:24:19.197 --> 00:24:22.296\nthey have two completely separate\ncontrollers on that one board.\n\n504\n00:24:22.296 --> 00:24:26.708\nAnd so in that scenario,\nyou'd really wanna monitor the interface.\n\n505\n00:24:26.708 --> 00:24:30.350\nBut if it's a cheap dual interface card,\nthere's some companies that make them and\n\n506\n00:24:30.350 --> 00:24:31.388\nthey cost like $50.\n\n507\n00:24:31.388 --> 00:24:35.375\nIf you've got one of those,\nthere's probably only one controller for\n\n508\n00:24:35.375 --> 00:24:36.577\nthe two interfaces.\n\n509\n00:24:36.577 --> 00:24:38.919\nAnd so\nat that point if you monitor an interface,\n\n510\n00:24:38.919 --> 00:24:42.591\nyou're not getting real data,\nyou need to monitor the controller itself.\n\n511\n00:24:42.591 --> 00:24:44.351\nSo that's why we've got\nthose two entities and\n\n512\n00:24:44.351 --> 00:24:46.074\nyou need to make sure you\nchoose the right one.\n\n513\n00:24:46.074 --> 00:24:49.499\nBut if you've got like Intel mix or\nBroadcom, they do a great job\n\n514\n00:24:49.499 --> 00:24:53.686\nof providing optimized controllers for\neach interface and so you'll wanna go\n\n515\n00:24:53.686 --> 00:24:57.949\nwith network interface and you can just\nmonitor bytes received and bytes sent.\n\n516\n00:24:57.949 --> 00:24:59.889\nThose are really the two we wanna monitor.\n\n517\n00:24:59.889 --> 00:25:04.173\nI know a lot of people monitor bytes\ntotal, but if you've got a gig card,\n\n518\n00:25:04.173 --> 00:25:05.728\na gig card is full duplex.\n\n519\n00:25:05.728 --> 00:25:10.187\nSo you've got 1 gig in and\n1 gig out simultaneous.\n\n520\n00:25:10.187 --> 00:25:12.009\nSo if you're monitoring bytes total,\n\n521\n00:25:12.009 --> 00:25:14.989\nyou might see that you're running\nat a gigabyte of bandwidth and\n\n522\n00:25:14.989 --> 00:25:19.630\nthink that you're out of bandwidth when\nin actuality you're only halfway there.\n\n523\n00:25:19.630 --> 00:25:23.631\nSo it's a better idea to monitor\nthem separately, received and sent.\n\n524\n00:25:23.631 --> 00:25:26.296\nIf you've got a gigabyte\ncard that's full duplex,\n\n525\n00:25:26.296 --> 00:25:29.627\nyou can receive a gig of data while\nyou're sending a gig of data and\n\n526\n00:25:29.627 --> 00:25:32.674\nyou'll be fine that gives you\na more clear understanding.\n\n527\n00:25:32.674 --> 00:25:34.636\nIt also helps you with\nthe troubleshooting.\n\n528\n00:25:34.636 --> 00:25:37.273\nAm I receiving a gig of data?\n\n529\n00:25:37.273 --> 00:25:41.612\nThat's pretty difficult to do with email\nto have a gigabyte of email coming in\n\n530\n00:25:41.612 --> 00:25:43.693\nper second, that's pretty tough.\n\n531\n00:25:43.693 --> 00:25:49.172\nI'm sorry, a gigabit let me use my right\nterm or no, actually, this is bytes shoot.\n\n532\n00:25:49.172 --> 00:25:51.332\nSo it is gigabytes, there we go.\n\n533\n00:25:51.332 --> 00:25:54.837\nTo have a gigabyte of data going\nout though, that's not uncommon.\n\n534\n00:25:54.837 --> 00:25:57.660\nIf I have a bunch of clients connected and\nthey're all checking their email,\n\n535\n00:25:57.660 --> 00:26:00.757\nthey're all downloading attachments,\nI could be pushing out all that bandwidth.\n\n536\n00:26:00.757 --> 00:26:02.847\nSo we wanna make sure we monitor those.\n\n537\n00:26:02.847 --> 00:26:06.092\nDefinitely a good one to kinda keep an eye\non and then down here at the bottom,\n\n538\n00:26:06.092 --> 00:26:08.189\nyou can choose the adapter\nyou're monitoring.\n\n539\n00:26:08.189 --> 00:26:14.456\nSo I'll monitor my Intel NIC And I'll add\nthose in, so I'm monitoring those too.\n\n540\n00:26:14.456 --> 00:26:17.485\nNow everything that I've talked about so\n\n541\n00:26:17.485 --> 00:26:21.214\nfar, really could apply\nto any Microsoft server.\n\n542\n00:26:21.214 --> 00:26:23.930\nIt could apply to a domain controller,\na file server, whatever.\n\n543\n00:26:23.930 --> 00:26:28.873\nThese are the big four, the things that we\nneed to monitor, but there's another set\n\n544\n00:26:28.873 --> 00:26:33.346\nof counters that I like to monitor that\nI call my client experience monitor.\n\n545\n00:26:33.346 --> 00:26:35.110\nClient experience, what is that?\n\n546\n00:26:35.110 --> 00:26:38.806\nIf I fire up Outlook and I wanna open up\nmy email, it's gotta connect to a client\n\n547\n00:26:38.806 --> 00:26:42.502\naccess server, the client access server\nhas to connect to a mailbox server and\n\n548\n00:26:42.502 --> 00:26:45.000\nthen render my email and get it to me.\n\n549\n00:26:45.000 --> 00:26:46.253\nHow long does that take?\n\n550\n00:26:46.253 --> 00:26:47.776\nThat's client experience.\n\n551\n00:26:47.776 --> 00:26:50.038\nAnd client experience,\nin this case is a little bit unique.\n\n552\n00:26:50.038 --> 00:26:54.907\nIt's different than a file server or\na web server, an Active Directory domain\n\n553\n00:26:54.907 --> 00:26:59.554\ncontroller, it's different than those\nguys and so we have a special set of\n\n554\n00:26:59.554 --> 00:27:04.016\ncounters that are really useful to\nmonitor for just Exchange servers.\n\n555\n00:27:04.016 --> 00:27:07.497\nBut as far as everything else,\nthese guys right here.\n\n556\n00:27:07.497 --> 00:27:13.512\nThis is kind of our big four,\nCPU, memory, disk, network.\n\n557\n00:27:13.512 --> 00:27:18.307\nYou wanna make sure you're monitoring\nthose and know what your good days are, so\n\n558\n00:27:18.307 --> 00:27:21.988\nyou can then compare those to\na bad day and see the difference.\n\n559\n00:27:21.988 --> 00:27:24.807\nWell, I wanna tackle those\nExchange specific ones, but\n\n560\n00:27:24.807 --> 00:27:26.991\nI'm a little short on\ntime on this segment.\n\n561\n00:27:26.991 --> 00:27:28.336\nSo why don't we do this?\n\n562\n00:27:28.336 --> 00:27:31.819\nWe're gonna to go for an unprecedented\npart three for this episode and\n\n563\n00:27:31.819 --> 00:27:34.073\nwe'll jump back into Exchange monitoring.\n\n564\n00:27:34.073 --> 00:27:37.713\nWe'll get a chance to see those\nspecific counters and how they work and\n\n565\n00:27:37.713 --> 00:27:41.600\nget us to that point where we can start\nto take that baseline of our system and\n\n566\n00:27:41.600 --> 00:27:44.707\nknow that things are running\nthe way they're supposed to.\n\n567\n00:27:44.707 --> 00:27:48.851\nSo stay tuned, we've got part three\ncoming up as for this one though,\n\n568\n00:27:48.851 --> 00:27:50.407\nsigning off for ITProTV.\n\n569\n00:27:50.407 --> 00:27:52.915\nI'm Don Pezet and I'll see you next time.\n\n570\n00:27:52.915 --> 00:27:58.920\n[MUSIC]\n\n",
          "vimeoId": "140111798"
        },
        {
          "description": "In this episode, Don wraps up demonstrating how to monitor Microsoft Exchange 2013 Client Access and Mailbox servers. He shifts from the standard performance counters covered in part 2, to customer experience counters that better reflect the end-user experience when sending and receiving email. He discusses ways to detect resource limitations in OWA, Outlook and SMTP.",
          "length": "1872",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt3-092115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt3-092115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-6-1-monitoring_and_maintenance_pt3-092115-1-sm.jpg",
          "title": "Monitoring and MaintenancePart3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.600\n[MUSIC]\n\n2\n00:00:10.600 --> 00:00:13.068\nAll right, good morning,\ngood afternoon and good evening.\n\n3\n00:00:13.068 --> 00:00:15.131\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.131 --> 00:00:19.590\nI'm your host, Don Pezet, back again\nwith another episode Microsoft Exchange.\n\n5\n00:00:19.590 --> 00:00:24.100\nAnd in this episode we're continuing\non with our, well it was a two part\n\n6\n00:00:24.100 --> 00:00:28.150\nseries now three part series on monitoring\nand maintaining exchange servers.\n\n7\n00:00:28.150 --> 00:00:30.700\nNow if you haven't watched the other\nepisodes I definitely encourage you\n\n8\n00:00:30.700 --> 00:00:34.490\nto do that, but in this episode we\nare kind of taking a different angle\n\n9\n00:00:34.490 --> 00:00:38.570\nin our last episode we saw some of the\nperformance counters we want to monitor.\n\n10\n00:00:38.570 --> 00:00:40.090\nFor really any Microsoft server.\n\n11\n00:00:40.090 --> 00:00:43.430\nRight?\nProcessor, memory, disk, and network.\n\n12\n00:00:43.430 --> 00:00:45.460\nRight?\nThe utilization for each of those and\n\n13\n00:00:45.460 --> 00:00:47.250\nwhat we expect them to look like.\n\n14\n00:00:47.250 --> 00:00:49.670\nWhat we need to watch out for\non those guys.\n\n15\n00:00:49.670 --> 00:00:55.670\nBut in this episode, I wanna look\nat the exchange specific counters.\n\n16\n00:00:55.670 --> 00:00:57.810\nThings that are really important\nto monitor on an exchange server.\n\n17\n00:00:57.810 --> 00:01:00.610\nAnd I call this the client experience.\n\n18\n00:01:00.610 --> 00:01:03.130\nSo when an end user\nconnects to your server,\n\n19\n00:01:03.130 --> 00:01:06.930\ntheir experiences are controlled by\na number of factors on the back end.\n\n20\n00:01:06.930 --> 00:01:10.907\nAny one of which can cause their\nexperience to completely fail or\n\n21\n00:01:10.907 --> 00:01:15.707\nbe really slow, so when a user calls in\nand says, hey my email is really slow.\n\n22\n00:01:15.707 --> 00:01:16.730\nWe need to know where to look.\n\n23\n00:01:16.730 --> 00:01:19.720\nWe need to know where our\npotential problems could be.\n\n24\n00:01:19.720 --> 00:01:21.470\nAnd those are the counters\nwe're gonna look at here.\n\n25\n00:01:22.540 --> 00:01:24.090\nWell, if you didn't\nwatch the last episode,\n\n26\n00:01:24.090 --> 00:01:26.020\nlet me just kind of get\nyou back up to speed.\n\n27\n00:01:26.020 --> 00:01:27.500\nThese are the counters that\nwe were talking about.\n\n28\n00:01:27.500 --> 00:01:28.610\nWe talked about some others too.\n\n29\n00:01:28.610 --> 00:01:32.860\nBut, you'll see where I've got some\nmemory, network, physical disc and\n\n30\n00:01:32.860 --> 00:01:36.400\nCPU counters that are kind of added\nin here in my performance monitor.\n\n31\n00:01:36.400 --> 00:01:39.520\nAnd those are great just for\nmonitoring, really, any old server.\n\n32\n00:01:40.560 --> 00:01:43.770\nBut when it comes to\nthe client experience we have\n\n33\n00:01:43.770 --> 00:01:46.880\nsome counters that are appropriate for\na mailbox database, and\n\n34\n00:01:46.880 --> 00:01:50.590\nsome counters that are appropriate for\na client access server.\n\n35\n00:01:50.590 --> 00:01:52.290\nLet's start with the mailbox database.\n\n36\n00:01:52.290 --> 00:01:53.770\nBecause odds are in your network,\n\n37\n00:01:53.770 --> 00:01:56.460\nif there's a bottleneck anywhere,\nit's the mailbox database.\n\n38\n00:01:56.460 --> 00:01:57.690\nDatabases are big.\n\n39\n00:01:57.690 --> 00:01:59.940\nThey're complex, and\nthey're stored on disk.\n\n40\n00:01:59.940 --> 00:02:04.000\nAnd disk is slow and as a result that's\nusually where our bottleneck is.\n\n41\n00:02:04.000 --> 00:02:05.110\nBut it would be nice to know that for\n\n42\n00:02:05.110 --> 00:02:09.550\na fact before we just go and\nassume and turn out to be wrong.\n\n43\n00:02:09.550 --> 00:02:13.300\nSo let's start with counters that we\nwant to monitor on a mailbox database.\n\n44\n00:02:13.300 --> 00:02:15.590\nI'm gonna go into my performance monitor.\n\n45\n00:02:15.590 --> 00:02:18.350\nAnd I'm just gonna hit my little green\nplus here to add some more counters in,\n\n46\n00:02:18.350 --> 00:02:20.450\nand we're gonna look for\nsome of these special counters.\n\n47\n00:02:20.450 --> 00:02:25.370\nNow in the last episode, I stayed with\njust standard Microsoft Windows ones.\n\n48\n00:02:25.370 --> 00:02:28.350\nThis time,\nwe're gonna do Microsoft Exchange ones.\n\n49\n00:02:28.350 --> 00:02:31.660\nSo, as you scroll around in the counters\nhere in the list you'll notice\n\n50\n00:02:31.660 --> 00:02:35.390\na huge section where every\ncounter starts with MSExchange.\n\n51\n00:02:35.390 --> 00:02:37.690\nThese are the Exchange specific ones,\nand that's where I wanna go.\n\n52\n00:02:37.690 --> 00:02:40.000\nOne of the key ones to look for\n\n53\n00:02:40.000 --> 00:02:44.990\non a database server are the counters\nlocated as part of the information store.\n\n54\n00:02:44.990 --> 00:02:47.410\nSo, if you scroll around in here and\nlook for\n\n55\n00:02:47.410 --> 00:02:51.930\nthe counter that's called\nMS Exchange IS Store.\n\n56\n00:02:51.930 --> 00:02:53.480\nAnd I will find it right there.\n\n57\n00:02:53.480 --> 00:02:54.480\nThere we go.\n\n58\n00:02:54.480 --> 00:02:56.720\nThat's the information store service.\n\n59\n00:02:56.720 --> 00:02:59.790\nAnd that's what's controlling your\ndatabase, your mailbox databases.\n\n60\n00:02:59.790 --> 00:03:05.360\nSo, if the performance here is bad,\nperformance on my databases are bad.\n\n61\n00:03:05.360 --> 00:03:08.530\nAnd when you look, you can monitor\nall sorts of crazy things, but\n\n62\n00:03:08.530 --> 00:03:13.820\nthere's one counter in here that I really\nlike, and it's called RPC Average Latency.\n\n63\n00:03:13.820 --> 00:03:17.900\nSo if I scroll down, I'll find it\nprobably down in the Rs somewhere.\n\n64\n00:03:17.900 --> 00:03:19.930\nIt is very near, right there.\n\n65\n00:03:19.930 --> 00:03:21.930\nRPC average latency, okay.\n\n66\n00:03:21.930 --> 00:03:22.920\nWhat is that?\n\n67\n00:03:22.920 --> 00:03:27.810\nWell RPC is remote procedure call, when\nsomebody connects via Outlook, Outlook is\n\n68\n00:03:27.810 --> 00:03:31.420\nconnecting to the server via RPC over\nhttp, it's doing a remote procedure call.\n\n69\n00:03:31.420 --> 00:03:34.370\nAnd when somebody logs\ninto Outlook web access,\n\n70\n00:03:34.370 --> 00:03:39.170\nthey hit the client access server via OWA\nand the client access server proxies that\n\n71\n00:03:39.170 --> 00:03:42.310\nto the back end as an RPC\ncall to the mailbox server.\n\n72\n00:03:42.310 --> 00:03:46.690\nSo our clients are typically\nusing RCP when they connect.\n\n73\n00:03:46.690 --> 00:03:52.270\nAnd if RPC is experiencing latency that's\ngonna result in a slow experience for\n\n74\n00:03:52.270 --> 00:03:53.570\nthe end-user, right.\n\n75\n00:03:53.570 --> 00:03:56.820\nThis is a great way to monitor whether\nend-users are having slow connectivity,\n\n76\n00:03:56.820 --> 00:03:59.170\nbecause they might not notice themselves,\nright.\n\n77\n00:03:59.170 --> 00:04:00.030\nA great example's if\n\n78\n00:04:00.030 --> 00:04:02.180\nthey're running Outlook they might\nbe running Outlook cache mode.\n\n79\n00:04:02.180 --> 00:04:03.400\nIt's the default.\n\n80\n00:04:03.400 --> 00:04:06.790\nSo they're accessing their mailbox\nright there on their hard drive.\n\n81\n00:04:06.790 --> 00:04:08.720\nWhen a new email comes in,\n\n82\n00:04:08.720 --> 00:04:10.935\nthey don't notice that\nthe server hasn't told them yet.\n\n83\n00:04:10.935 --> 00:04:12.210\nCuz they don't know the email exists yet.\n\n84\n00:04:12.210 --> 00:04:14.280\nAnd then, all of a sudden,\nthey see the email come in.\n\n85\n00:04:14.280 --> 00:04:16.420\nThey have no idea a delay happened.\n\n86\n00:04:16.420 --> 00:04:18.560\nSo they might not even realize it.\n\n87\n00:04:18.560 --> 00:04:19.220\nYour OWA users.\n\n88\n00:04:19.220 --> 00:04:21.120\nThey're the ones who will\nusually notice first.\n\n89\n00:04:21.120 --> 00:04:23.860\nWhen they go to log into OWN, it takes\nforever for their mailbox to load.\n\n90\n00:04:23.860 --> 00:04:25.960\nOr it fails to load, and\nthey get a server error, right?\n\n91\n00:04:25.960 --> 00:04:30.330\nLike a 500 error or some other message,\nthey'll know that there's a problem.\n\n92\n00:04:30.330 --> 00:04:33.990\nBut we can spot it early if we're\nwatching the RPC average latency.\n\n93\n00:04:35.240 --> 00:04:39.450\nNow, if you go out and about on\nthe internet, Microsoft's tech net site,\n\n94\n00:04:39.450 --> 00:04:44.395\nthere's a number of different kind of\nsides of what this value should be.\n\n95\n00:04:44.395 --> 00:04:48.555\nI've seen some people say oh it should\nalways be under 30 milliseconds.\n\n96\n00:04:48.555 --> 00:04:51.495\nSo if I monitor the sales database\nhere I want the sales database\n\n97\n00:04:51.495 --> 00:04:53.665\nto always respond within 30 milliseconds.\n\n98\n00:04:53.665 --> 00:04:56.075\nThere's other people that\nsay 50 milliseconds but\n\n99\n00:04:56.075 --> 00:04:58.605\nthe reality is it could\nbe significantly longer.\n\n100\n00:04:58.605 --> 00:05:01.860\nIt could be five or ten seconds and\nyour engineer probably won't notice.\n\n101\n00:05:01.860 --> 00:05:05.560\nBut if it gets really big then you're\ngonna start having time outs on\n\n102\n00:05:05.560 --> 00:05:07.480\nthe servers and\nthat's when you get errors.\n\n103\n00:05:07.480 --> 00:05:11.510\nOr if it's just a little bit big,\nthe end users see a slow session and\n\n104\n00:05:11.510 --> 00:05:12.380\nthen they whine.\n\n105\n00:05:12.380 --> 00:05:14.750\nI'm sorry,\nthey lodge a technical support ticket.\n\n106\n00:05:14.750 --> 00:05:18.770\nSo, either way it's something that we\ncould be watching ahead of time and\n\n107\n00:05:18.770 --> 00:05:22.470\nif you see this number growing and growing\nand growing it means one of two things.\n\n108\n00:05:22.470 --> 00:05:25.090\nNumber one there's a problem\nsomewhere on your server.\n\n109\n00:05:25.090 --> 00:05:28.530\nMaybe you have a database\nstored on a RAID 5 array and\n\n110\n00:05:28.530 --> 00:05:33.230\none drive has failed and now it's having\nto recalculate the database from parody\n\n111\n00:05:33.230 --> 00:05:35.870\nwhich slows down disk IO\nan it slows down your server.\n\n112\n00:05:35.870 --> 00:05:37.820\nRight?\nMaybe that's it.\n\n113\n00:05:37.820 --> 00:05:40.170\nOr maybe the server's running just fine.\n\n114\n00:05:40.170 --> 00:05:43.800\nBut when you specced out\nthe server you had 1,000 users.\n\n115\n00:05:43.800 --> 00:05:44.850\nNow, you have 1,700 users.\n\n116\n00:05:44.850 --> 00:05:47.870\nYou've just grown your employees.\n\n117\n00:05:47.870 --> 00:05:49.020\nOr grown your database.\n\n118\n00:05:49.020 --> 00:05:49.660\nThat happens, right?\n\n119\n00:05:49.660 --> 00:05:50.400\nDatabases grow.\n\n120\n00:05:50.400 --> 00:05:51.640\nIt's what works.\n\n121\n00:05:51.640 --> 00:05:54.550\nIf your company is successful,\nyour company is growing.\n\n122\n00:05:54.550 --> 00:05:57.170\nSo, you expect to see\nperformance degrade over time.\n\n123\n00:05:57.170 --> 00:05:59.990\nAnd you need to expand your capacities for\nthat, right?\n\n124\n00:05:59.990 --> 00:06:03.940\nSo, this isn't necessarily\nan indication of an unexpected failure.\n\n125\n00:06:03.940 --> 00:06:05.290\nIt might be an expected one, right?\n\n126\n00:06:05.290 --> 00:06:07.710\nWe just expected that to grow and\nbecome more.\n\n127\n00:06:07.710 --> 00:06:10.080\nSo we wanna monitor that for two reasons.\n\n128\n00:06:10.080 --> 00:06:11.650\nOne so we know when there's a problem.\n\n129\n00:06:11.650 --> 00:06:14.120\nAnd two, so\nwe can create trends over time.\n\n130\n00:06:14.120 --> 00:06:16.390\nAnd we can say, each month,\nwe're adding employees.\n\n131\n00:06:16.390 --> 00:06:18.740\nIt's making this latency go up.\n\n132\n00:06:18.740 --> 00:06:21.600\nBy five milliseconds a month, and\n\n133\n00:06:21.600 --> 00:06:26.010\nso by this time next month it will be 50\nmilliseconds slower than it is today.\n\n134\n00:06:26.010 --> 00:06:27.250\nIs that a problem?\n\n135\n00:06:27.250 --> 00:06:32.310\nIt probably is and you need to plan for\nyour capacity to account for that.\n\n136\n00:06:32.310 --> 00:06:35.470\nSo that's a great one to monitor there's\na few others in here that you can find\n\n137\n00:06:35.470 --> 00:06:39.120\nin here, theres a really weird\nsection In the performance counters.\n\n138\n00:06:39.120 --> 00:06:40.520\nLet me show you guys this one.\n\n139\n00:06:40.520 --> 00:06:42.620\nIt's just called MS Exchange database.\n\n140\n00:06:42.620 --> 00:06:45.310\nNow here it was MS Exchange IS store.\n\n141\n00:06:45.310 --> 00:06:47.090\nThat was the information store.\n\n142\n00:06:47.090 --> 00:06:50.260\nBut the one I'm looking for\nis MS Exchange database.\n\n143\n00:06:50.260 --> 00:06:53.500\nSo this one pertains to\na database specifically.\n\n144\n00:06:53.500 --> 00:06:55.080\nIf I can find it.\n\n145\n00:06:55.080 --> 00:06:58.820\nSo, let's see, MS Exchange database.\n\n146\n00:06:58.820 --> 00:07:00.810\nWhich you would think would be right here.\n\n147\n00:07:00.810 --> 00:07:03.340\nThere might be a space on this one,\nlet's see.\n\n148\n00:07:03.340 --> 00:07:06.920\nSometimes there's a space after\nMS Exchange, sometimes there isn't and\n\n149\n00:07:06.920 --> 00:07:09.880\nso you have to kind of program,\nthere's a space on this one.\n\n150\n00:07:09.880 --> 00:07:15.580\nSo, MS exchange database equal equal\ngreater than instances, alright.\n\n151\n00:07:15.580 --> 00:07:19.070\nThis let's you dial in on particular\ninstances on the database.\n\n152\n00:07:19.070 --> 00:07:19.930\nNow why is this important?\n\n153\n00:07:20.940 --> 00:07:23.880\nIf you have a database availability group\n\n154\n00:07:23.880 --> 00:07:28.260\nthen you might have more than one\ninstance of the same database.\n\n155\n00:07:28.260 --> 00:07:31.630\nWhen I monitor that information store\ncounterage looking at one server,\n\n156\n00:07:31.630 --> 00:07:34.160\nwhich means that one\ncopy of that database.\n\n157\n00:07:34.160 --> 00:07:37.030\nBut if I want to monitor more than one\ncopy of the same database I need to\n\n158\n00:07:37.030 --> 00:07:40.480\ncome here to instances to find it and\nlocate that database,\n\n159\n00:07:40.480 --> 00:07:43.680\nand you'll see counters in here\nthat are similar to the other one.\n\n160\n00:07:43.680 --> 00:07:47.940\nBut the one that I like to watch\nis this log threads waiting.\n\n161\n00:07:47.940 --> 00:07:52.180\nSo if you look around underneath it\nhere you'll find log threads waiting.\n\n162\n00:07:52.180 --> 00:07:56.317\nLog threads waiting that's talking\nabout writing to the transactions logs.\n\n163\n00:07:56.317 --> 00:07:58.835\nAll right, when your sending\ndata into the transactions\n\n164\n00:07:58.835 --> 00:08:01.363\nlogs You have to write to them,\nyou have to write to disk.\n\n165\n00:08:01.363 --> 00:08:05.740\nAnd if you have log threads waiting and\nthat number is growing,\n\n166\n00:08:05.740 --> 00:08:07.483\nideally it should be 0.\n\n167\n00:08:07.483 --> 00:08:10.010\nMaybe a 1 or 2, it shouldn't be many.\n\n168\n00:08:10.010 --> 00:08:12.890\nBut if this number is growing, that\nmeans your system is trying to write to\n\n169\n00:08:12.890 --> 00:08:15.690\nthe transaction logs and\nfor some reason it can't.\n\n170\n00:08:15.690 --> 00:08:17.440\nIt's having to wait too long.\n\n171\n00:08:17.440 --> 00:08:20.740\nSo maybe there's heavy disk I/O,\nmaybe there's disk contention.\n\n172\n00:08:20.740 --> 00:08:23.033\nYour transaction logs might be\nstored on the same hard drives as\n\n173\n00:08:23.033 --> 00:08:24.410\nyour Mailbox Database.\n\n174\n00:08:24.410 --> 00:08:26.820\nThis is a great warning sign to say,\nmove them off.\n\n175\n00:08:26.820 --> 00:08:29.160\nMove your transaction logs\nto dedicated hard drives.\n\n176\n00:08:29.160 --> 00:08:33.090\nCuz you need rights to occur as fast\nas possible for those transaction logs.\n\n177\n00:08:33.090 --> 00:08:36.370\nSo this log threads waiting,\nreally a great one to monitor.\n\n178\n00:08:36.370 --> 00:08:39.450\nAnd then down here you'll see\nwhere I can pick the individual\n\n179\n00:08:39.450 --> 00:08:43.750\ninstances of the databases, so\nI see SalesDB and Mailbox Database.\n\n180\n00:08:43.750 --> 00:08:47.680\nEach of those guys listed down here,\nand you can pick the one that you want.\n\n181\n00:08:47.680 --> 00:08:52.657\nAnd notice how I've got Information\nStore SalesDB, and right down here,\n\n182\n00:08:52.657 --> 00:08:57.087\nI've got MS Exchange Replication SalesDB\npassive in block mode.\n\n183\n00:08:57.087 --> 00:09:00.880\nSo it's showing each of\nthese different instances.\n\n184\n00:09:00.880 --> 00:09:03.629\nBut you might even just wanna\ngo all instances if you just\n\n185\n00:09:03.629 --> 00:09:05.744\nhave like one big database, or whatever.\n\n186\n00:09:05.744 --> 00:09:09.660\nBut we're trying to keep an eye on whether\nour transaction logs are backing up.\n\n187\n00:09:09.660 --> 00:09:11.930\nThis is a great counter to monitor for\nthat.\n\n188\n00:09:11.930 --> 00:09:16.115\nI'll just monitor my SalesDB and\nthrow that one in there.\n\n189\n00:09:16.115 --> 00:09:20.440\nAll right, while I'm in here, that's\nusually the one I keep an eye out for, but\n\n190\n00:09:20.440 --> 00:09:24.829\nthere's another one, which is the, or\nanother two I guess, the I/O database,\n\n191\n00:09:24.829 --> 00:09:27.329\nwhich is the input and\noutput on our database.\n\n192\n00:09:27.329 --> 00:09:29.400\nWe want to see how busy the databases are.\n\n193\n00:09:29.400 --> 00:09:34.230\nAnd so you can find it in here where\nyou've got I/O Database Reads Average\n\n194\n00:09:34.230 --> 00:09:39.070\nLatency and\nI/O Database Writes Average Latency.\n\n195\n00:09:39.070 --> 00:09:44.350\nAnd so you can keep track of how\nlong it's taking to read and write.\n\n196\n00:09:44.350 --> 00:09:49.190\nWhen you buy a hard drive, it might say,\noh, this is a 15,000 RPM drive with\n\n197\n00:09:49.190 --> 00:09:53.207\none millisecond seek time on it or\nsomething ridiculous like that.\n\n198\n00:09:53.207 --> 00:09:54.329\nWell, that sounds great.\n\n199\n00:09:54.329 --> 00:09:57.358\nIt's got a one millisecond seek time,\nso can I send data to it or\n\n200\n00:09:57.358 --> 00:09:59.200\nget data out of it in one millisecond?\n\n201\n00:09:59.200 --> 00:10:00.380\nWell, no.\n\n202\n00:10:00.380 --> 00:10:03.230\nThe seek time is how long it takes\nthe hard drive head to get into position.\n\n203\n00:10:03.230 --> 00:10:06.500\nYou still have to send data\nacross your controller.\n\n204\n00:10:06.500 --> 00:10:08.408\nDoes it work on the hard drive?\n\n205\n00:10:08.408 --> 00:10:11.110\nYou get data back on the controller and\nthen send it to the operating system.\n\n206\n00:10:11.110 --> 00:10:13.350\nThere's many components\nthat are in the mix.\n\n207\n00:10:13.350 --> 00:10:15.230\nThis measures the whole path.\n\n208\n00:10:15.230 --> 00:10:16.336\nHow long does it take me?\n\n209\n00:10:16.336 --> 00:10:20.019\nIf I wanna read something from the disk,\nhow long does it take me to go through\n\n210\n00:10:20.019 --> 00:10:24.223\nthe controller, get to the drive, retrieve\nthe data, put it back to the controller,\n\n211\n00:10:24.223 --> 00:10:26.090\nsend it into RAM, and then access it.\n\n212\n00:10:26.090 --> 00:10:31.170\nAnd the longer that takes, the slower\nthe user experience is gonna be.\n\n213\n00:10:31.170 --> 00:10:34.550\nAnd so this might mean I need to upgrade\nmy controllers, move to different storage,\n\n214\n00:10:34.550 --> 00:10:38.234\nadd, well, more drives aren't normally the\nsolution on this one, more controllers is.\n\n215\n00:10:38.234 --> 00:10:40.510\nSo a couple of different solutions there.\n\n216\n00:10:40.510 --> 00:10:42.352\nBut this is a good set\nof counters to watch.\n\n217\n00:10:42.352 --> 00:10:46.887\nThe Log Threads Waiting is a great one\nto watch, but I/O on the database,\n\n218\n00:10:46.887 --> 00:10:48.650\nthat's another one.\n\n219\n00:10:48.650 --> 00:10:51.650\nLog threads is the transaction logs,\nI/O on the database,\n\n220\n00:10:51.650 --> 00:10:55.915\nthat's the database itself, right, and\nwhere the email's actually being stored.\n\n221\n00:10:55.915 --> 00:10:56.565\nOkay?\n\n222\n00:10:56.565 --> 00:10:59.485\nSo those are a couple of ones that we\ndefinitely want to monitor there, and\n\n223\n00:10:59.485 --> 00:11:03.745\non a mailbox server, those will give\nyou a pretty good indication, right?\n\n224\n00:11:03.745 --> 00:11:08.430\nThose in combination with the counters we\ntalked about in part two of this episode,\n\n225\n00:11:08.430 --> 00:11:11.940\nthose will really give you a great\nview of a mailbox server and\n\n226\n00:11:11.940 --> 00:11:13.480\nwhat your end user's experience is like.\n\n227\n00:11:14.500 --> 00:11:17.110\nA client access server is\na little bit different.\n\n228\n00:11:17.110 --> 00:11:19.035\nA client access server, if you remember,\n\n229\n00:11:19.035 --> 00:11:22.570\nit's really a web server that's running\nlike a POP3 proxy and an IMAP proxy.\n\n230\n00:11:22.570 --> 00:11:25.461\nAnd it just pushes people through\nto the mailbox server and\n\n231\n00:11:25.461 --> 00:11:27.150\nit renders some webpages.\n\n232\n00:11:27.150 --> 00:11:30.392\nSo not a lot of disk I/O\non a client access server.\n\n233\n00:11:30.392 --> 00:11:34.240\nAnd it's really just kinda CPU and\npushing people through.\n\n234\n00:11:34.240 --> 00:11:38.260\nSo on a client access server,\nwe wanna monitor CPU, memory,\n\n235\n00:11:38.260 --> 00:11:40.310\ndisk, network, just like normal.\n\n236\n00:11:40.310 --> 00:11:44.450\nBut there's a few other kind of experience\ncounters that we wanna watch out for.\n\n237\n00:11:44.450 --> 00:11:45.605\nLet me show you those.\n\n238\n00:11:45.605 --> 00:11:49.060\nSo the key things we wanna look for,\nI know I've said multiple\n\n239\n00:11:49.060 --> 00:11:53.786\ntimes throughout the show that a client\naccess server doesn't really have queues.\n\n240\n00:11:53.786 --> 00:11:56.660\nIt's not really storing\nanything on the hard drive.\n\n241\n00:11:56.660 --> 00:11:58.860\nWell, it's not that it\ndoesn't have queues.\n\n242\n00:11:58.860 --> 00:12:01.160\nIt has queues, they're just in RAM.\n\n243\n00:12:01.160 --> 00:12:03.600\nSo data moves through them very,\nvery quickly and it doesn't stay.\n\n244\n00:12:03.600 --> 00:12:05.380\nThey're transient queues.\n\n245\n00:12:05.380 --> 00:12:09.450\nIt doesn't have queues on the hard drive\nwhere data gets written and saved,\n\n246\n00:12:09.450 --> 00:12:12.201\nlike the transport role on\na mailbox server would.\n\n247\n00:12:12.201 --> 00:12:16.121\nSo, with a client access server,\ndisk I/O is not in the picture, so\n\n248\n00:12:16.121 --> 00:12:19.840\nI don't necessarily need to monitor that,\nbut the queue in RAM,\n\n249\n00:12:19.840 --> 00:12:22.230\nI might want to monitor that.\n\n250\n00:12:22.230 --> 00:12:24.330\nIf the queue in RAM starts to back up,\n\n251\n00:12:24.330 --> 00:12:26.800\nit usually means your\nmailbox servers are offline.\n\n252\n00:12:26.800 --> 00:12:29.390\nIt could mean a network issue, but it\ntypically means that the mailbox servers\n\n253\n00:12:29.390 --> 00:12:31.870\nare offline, or\nthe mailbox databases are offline.\n\n254\n00:12:31.870 --> 00:12:34.460\nBut usually if it's mailbox\ndatabase that's offline\n\n255\n00:12:34.460 --> 00:12:36.799\nthe queues on the mailbox\nserver are still up, so\n\n256\n00:12:36.799 --> 00:12:40.650\nthe email moves right through the client\naccess server over the mailbox server and\n\n257\n00:12:40.650 --> 00:12:43.280\nit's gone as far as the client\naccess server is concerned.\n\n258\n00:12:43.280 --> 00:12:46.290\nBut it doesn't hurt to monitor\nthose queues if you want to.\n\n259\n00:12:46.290 --> 00:12:53.800\nSo on a client access server you can go\nin here to MSExchangeTransport Queues.\n\n260\n00:12:53.800 --> 00:12:59.170\nAnd so if we find that in our list,\nMSExchangeTransport Queues, right there.\n\n261\n00:12:59.170 --> 00:13:02.780\nYou'll see a number of different queues\nthat you can monitor different aspects\n\n262\n00:13:02.780 --> 00:13:03.890\nabout the queues.\n\n263\n00:13:03.890 --> 00:13:08.510\nAnd the one that I like to look for\nis Messages Queued For Delivery.\n\n264\n00:13:08.510 --> 00:13:12.620\nAnd so if we hunt down and find that one,\nMessages Queued For Delivery.\n\n265\n00:13:12.620 --> 00:13:13.900\nRight there, okay.\n\n266\n00:13:13.900 --> 00:13:17.750\nAnd you can monitor the messages, you\ncan monitor total across all the queues.\n\n267\n00:13:17.750 --> 00:13:21.770\nSee how if I pick for\ndelivery you can pick based on priority.\n\n268\n00:13:21.770 --> 00:13:25.160\nBut if you go down here to delivery\ntotal it's the same thing,\n\n269\n00:13:25.160 --> 00:13:26.890\nwell what's the difference there?\n\n270\n00:13:26.890 --> 00:13:30.490\nWell you have two different types\nof queues that are in here.\n\n271\n00:13:30.490 --> 00:13:34.780\nThere's queues for email that's coming\nin or going to the outside world.\n\n272\n00:13:34.780 --> 00:13:37.690\nAnd then you have cues\nthat are emails going\n\n273\n00:13:37.690 --> 00:13:41.400\nto a particular mailbox in your\norganization, internal delivery type.\n\n274\n00:13:41.400 --> 00:13:46.360\nAnd so, there's queues tied to a domain,\nversus queues tied to a mailbox database,\n\n275\n00:13:46.360 --> 00:13:48.430\nand so\nthat's why they kind of divide these up.\n\n276\n00:13:48.430 --> 00:13:51.927\nBut you can come through and\npick what it is that you monitor here.\n\n277\n00:13:51.927 --> 00:13:54.950\nI usually just do Messages Queued For\nDelivery, and that's the one I wanna see.\n\n278\n00:13:54.950 --> 00:13:56.537\nAnd I grab it in total.\n\n279\n00:13:56.537 --> 00:13:58.100\nYou watch this.\n\n280\n00:13:58.100 --> 00:14:00.970\nAnd you might have a big number all\nthe time, if you got a busy server,\n\n281\n00:14:00.970 --> 00:14:02.480\nthis number's gonna be big.\n\n282\n00:14:02.480 --> 00:14:06.320\nBut if you see it consistently growing,\nthat means your queue is stuck.\n\n283\n00:14:06.320 --> 00:14:10.290\nThat means email is piling up in\nthe queue, and you've got a problem.\n\n284\n00:14:10.290 --> 00:14:15.060\nCould be a network issue,\ncould be your mailbox database is offline,\n\n285\n00:14:15.060 --> 00:14:17.140\ncould be no domain controllers available,\nso\n\n286\n00:14:17.140 --> 00:14:19.710\nthe client access server can't figure\nout where the mailbox server is.\n\n287\n00:14:19.710 --> 00:14:24.120\nIt's usually connectivity related, so we\ncan look for that and start to isolate it.\n\n288\n00:14:24.120 --> 00:14:25.898\nThat message queue.\n\n289\n00:14:25.898 --> 00:14:27.770\nAll right, other things.\n\n290\n00:14:27.770 --> 00:14:33.040\nIf we wanna see how busy our server is,\nhow much email is coming in and\n\n291\n00:14:33.040 --> 00:14:36.810\nout of my system, well that's part\nof the FrontEnd Transport roll.\n\n292\n00:14:36.810 --> 00:14:40.000\nThe FrontEnd Transport queue,\nit's what's in RAM, and\n\n293\n00:14:40.000 --> 00:14:42.200\nyou can monitor the amount\nof email flowing through it.\n\n294\n00:14:42.200 --> 00:14:44.370\nIt's not right here,\ncuz that would make too much sense.\n\n295\n00:14:44.370 --> 00:14:47.320\nIt's actually in a different place,\ninside of our counters.\n\n296\n00:14:47.320 --> 00:14:49.633\nI need to look for\nMS Exchange FrontEnd Transport.\n\n297\n00:14:49.633 --> 00:14:53.397\nSo I'm gonna kind of scroll and\ntry and find that.\n\n298\n00:14:53.397 --> 00:14:58.771\nAnd you'll see there's a lot that you\ncan monitor on the FrontEnd Transport,\n\n299\n00:14:58.771 --> 00:15:04.030\nand the one I'm looking for is Smtp,\nhere we go, SmtpReceive and Send.\n\n300\n00:15:04.030 --> 00:15:05.180\nThese two guys.\n\n301\n00:15:05.180 --> 00:15:09.220\nFor email coming in and out of my\norganization it's going to be Smtp, right.\n\n302\n00:15:09.220 --> 00:15:11.200\nSimple message transport protocol, and\n\n303\n00:15:11.200 --> 00:15:14.810\nwhen you look in here you'll see\naverage bytes per connection and so on.\n\n304\n00:15:14.810 --> 00:15:16.780\nYou can monitor all sorts of aspects.\n\n305\n00:15:16.780 --> 00:15:20.250\nThe two that I like, Inbound Messages.\n\n306\n00:15:20.250 --> 00:15:24.560\nYou've got Inbound Message Bytes or you've\nactually got Inbound Messages themselves\n\n307\n00:15:24.560 --> 00:15:30.490\nand so you can spot that in here right\nhere, Inbound Messages Received/sec.\n\n308\n00:15:30.490 --> 00:15:34.190\nSo, how many emails are coming\ninto my organization per second?\n\n309\n00:15:34.190 --> 00:15:36.870\nThat's a great one to monitor or\nyou can limit it based on\n\n310\n00:15:36.870 --> 00:15:40.110\na particular client access server,\nright here, if you just wanna watch.\n\n311\n00:15:40.110 --> 00:15:40.980\nI'm gonna say, in total.\n\n312\n00:15:40.980 --> 00:15:43.220\nI wanted them for my whole organization.\n\n313\n00:15:43.220 --> 00:15:43.940\nAnd we can add that in.\n\n314\n00:15:43.940 --> 00:15:46.410\nAnd then you can do the same thing for\noutbound.\n\n315\n00:15:46.410 --> 00:15:47.730\nSo if I go to, whoops.\n\n316\n00:15:47.730 --> 00:15:49.700\nI get a little crazy here and\nscroll too far.\n\n317\n00:15:49.700 --> 00:15:57.107\nIf I go to my FrontEndTransport SmtpSend,\nI can look for the total going out, right?\n\n318\n00:15:57.107 --> 00:16:01.860\nSo I gotta find my Messages\nsent per second right here, and\n\n319\n00:16:01.860 --> 00:16:03.610\nI can add that one in.\n\n320\n00:16:03.610 --> 00:16:06.930\nAnd I can do this one based on which\noutbound connector it's using, or\n\n321\n00:16:06.930 --> 00:16:08.350\nI can just go total.\n\n322\n00:16:08.350 --> 00:16:12.320\nAnd so now I have an idea of how much\nemail is flowing through my organization.\n\n323\n00:16:12.320 --> 00:16:14.555\nNow, this is SMTP.\n\n324\n00:16:14.555 --> 00:16:18.780\nSMTP does include internal email too,\nwhen it moves between servers, so\n\n325\n00:16:18.780 --> 00:16:21.500\nwe can capture that and\nget that same information alongside it.\n\n326\n00:16:23.010 --> 00:16:23.640\nAll right.\n\n327\n00:16:23.640 --> 00:16:25.110\nWhat else do we wanna watch for?\n\n328\n00:16:25.110 --> 00:16:29.630\nWell, as far as SMTP is concerned,\nas far as the mail queues go,\n\n329\n00:16:29.630 --> 00:16:31.160\nthose are some good counters.\n\n330\n00:16:31.160 --> 00:16:33.250\nWhat about Outlook web access?\n\n331\n00:16:33.250 --> 00:16:37.550\nIn the past, Outlook web access has\nbeen notoriously difficult to monitor.\n\n332\n00:16:37.550 --> 00:16:39.930\nFortunately, we get some new counterS,\nso it'd really help with that.\n\n333\n00:16:39.930 --> 00:16:43.405\nThere's a great counter buried away\nin here, and this one is buried away.\n\n334\n00:16:43.405 --> 00:16:45.410\n[LAUGH] We've gotta dig for it.\n\n335\n00:16:45.410 --> 00:16:50.290\nIt's under MS Exchange OWA, so\nlet me just find that in my list here.\n\n336\n00:16:50.290 --> 00:16:51.320\nMS Exchange.\n\n337\n00:16:51.320 --> 00:16:56.740\nIt is, But\nthe hardest part is finding these things.\n\n338\n00:16:56.740 --> 00:16:59.290\nYou actually have a little search\nfield you can use down here.\n\n339\n00:16:59.290 --> 00:17:01.730\nBut normally we can scroll and\nfind it pretty quick.\n\n340\n00:17:03.620 --> 00:17:05.660\nMS Exchange OWA.\n\n341\n00:17:05.660 --> 00:17:07.580\nI should be close.\n\n342\n00:17:08.690 --> 00:17:10.410\nThere it went.\n\n343\n00:17:10.410 --> 00:17:11.040\nPerfect.\n\n344\n00:17:11.040 --> 00:17:12.520\nMS Exchange OWA.\n\n345\n00:17:12.520 --> 00:17:14.050\nInside of MS Exchange OWA,\n\n346\n00:17:14.050 --> 00:17:17.620\nthe counter that I'm looking for\nis called Average Response Time.\n\n347\n00:17:17.620 --> 00:17:20.130\nWith a web server, the main component,\n\n348\n00:17:20.130 --> 00:17:22.270\nthe main thing I need to watch\nis average response time.\n\n349\n00:17:22.270 --> 00:17:24.740\nHow long does it take OWA\nto respond to a request?\n\n350\n00:17:24.740 --> 00:17:26.770\nOkay.\nIf I send a search to OWA,\n\n351\n00:17:26.770 --> 00:17:31.410\nhow long does it take it to reach out\nto a mailbox server, get the data,\n\n352\n00:17:31.410 --> 00:17:34.280\nbring it back,\nprovide it to the end user, right.\n\n353\n00:17:34.280 --> 00:17:36.090\nThat's the end user experience.\n\n354\n00:17:36.090 --> 00:17:38.120\nSo I'm looking for\nthat average response time.\n\n355\n00:17:39.490 --> 00:17:41.610\nAnd it's buried down in here, right here.\n\n356\n00:17:41.610 --> 00:17:43.600\nAnd you actually have average\nsearch times separately.\n\n357\n00:17:43.600 --> 00:17:46.340\nI know I mentioned search a second ago,\nbut average response time for\n\n358\n00:17:46.340 --> 00:17:48.590\nrendering anything else\nproviding that data.\n\n359\n00:17:48.590 --> 00:17:51.990\nAnd now we can get an idea of\nwhat our end users are seeing.\n\n360\n00:17:51.990 --> 00:17:54.300\nThis is really the face\nthat your end users see.\n\n361\n00:17:54.300 --> 00:17:56.210\nThey don't know about disk IO,\nthey don't know about network,\n\n362\n00:17:56.210 --> 00:17:57.310\nthey don't care about it.\n\n363\n00:17:57.310 --> 00:18:00.120\nThey just wanna know when they fire up\nthat web browser, why is it taking so\n\n364\n00:18:00.120 --> 00:18:01.920\nlong to open this email, right?\n\n365\n00:18:01.920 --> 00:18:05.560\nAnd this is a great way for\nus to monitor that ahead of time.\n\n366\n00:18:05.560 --> 00:18:09.090\nOr, to say if somebody calls complaining\nhey, it's taking forever for\n\n367\n00:18:09.090 --> 00:18:11.340\nOWA to load,\nwe can look at this counter and say,\n\n368\n00:18:11.340 --> 00:18:14.850\nwell no it's actually taking just\nas long as it ever has, right.\n\n369\n00:18:14.850 --> 00:18:16.740\nIt's just you're in a hurry, or\n\n370\n00:18:16.740 --> 00:18:20.170\nyou're experiencing this more differently\nthis time for whatever reason.\n\n371\n00:18:20.170 --> 00:18:21.495\nPsychological disorder, who knows.\n\n372\n00:18:21.495 --> 00:18:25.150\n[LAUGH] So these are the kind of things\nthat we need to be able to monitor so\n\n373\n00:18:25.150 --> 00:18:29.360\nthat we have tangible numbers\nthat we can provide to people.\n\n374\n00:18:29.360 --> 00:18:34.460\nOne last one I wanna throw in here,\nif you're doing OWA.\n\n375\n00:18:34.460 --> 00:18:39.160\nThere's a special type of interface\nwith OWA for the free busy data, for\n\n376\n00:18:39.160 --> 00:18:40.280\nthe calendar data.\n\n377\n00:18:40.280 --> 00:18:40.900\nAll right?\n\n378\n00:18:40.900 --> 00:18:43.760\nWhen you go an run like the meeting\nminder, it's gotta reach out\n\n379\n00:18:43.760 --> 00:18:47.130\nto Exchange and query other people's\nfree busy data and present that.\n\n380\n00:18:47.130 --> 00:18:49.750\nThat's actually not tracked\nin the average response time.\n\n381\n00:18:49.750 --> 00:18:54.610\nSo if you want that one, that's actually,\nyou got another completely separate area.\n\n382\n00:18:54.610 --> 00:18:57.950\nIt's the MS exchange\navailability services.\n\n383\n00:18:57.950 --> 00:19:01.260\nAnd I know when I see availability\nservices I always think of redundancy.\n\n384\n00:19:01.260 --> 00:19:05.030\nBut it's availability as in\npeople's scheduled availability.\n\n385\n00:19:05.030 --> 00:19:07.280\nAnd so if we find that in here,\nI just passed it.\n\n386\n00:19:07.280 --> 00:19:08.660\nThere it is.\n\n387\n00:19:08.660 --> 00:19:11.310\nUnder availability service, you'll\nactually see the same kind of thing.\n\n388\n00:19:11.310 --> 00:19:14.340\nThere's the average time to process.\n\n389\n00:19:14.340 --> 00:19:15.260\nHere we go.\n\n390\n00:19:15.260 --> 00:19:18.080\nAnd the one we really care\nabout is this guy right here.\n\n391\n00:19:18.080 --> 00:19:21.190\nAverage Time to Process\na Free Busy Request.\n\n392\n00:19:21.190 --> 00:19:24.770\nSo when somebody hits that OWA\nserver with a Free Busy Request or\n\n393\n00:19:24.770 --> 00:19:26.520\njust a client accessor in general.\n\n394\n00:19:26.520 --> 00:19:29.520\nHow long does it take us to query that\ndata and provide it back to the user?\n\n395\n00:19:29.520 --> 00:19:31.840\nThis is another area where it'll\nbe the end-user experience,\n\n396\n00:19:31.840 --> 00:19:34.840\nkinda what they feel\nwhen they use the server.\n\n397\n00:19:34.840 --> 00:19:35.570\nRight?\n\n398\n00:19:35.570 --> 00:19:38.530\nIf we monitor those,\nwe're in pretty good shape.\n\n399\n00:19:38.530 --> 00:19:44.620\nNow we've got a handle on our servers, and\nwe take these, we take all of these and\n\n400\n00:19:44.620 --> 00:19:48.700\nbuild them into a data collector set, and\nwe can collect that data whenever we want.\n\n401\n00:19:48.700 --> 00:19:53.750\nSo we collect it for an hour, a day, or\na week when our servers are running fine.\n\n402\n00:19:53.750 --> 00:19:56.160\nAnd then when somebody complains,\nwe run these again and\n\n403\n00:19:56.160 --> 00:19:58.240\nwe collect it during the complaint time.\n\n404\n00:19:58.240 --> 00:19:59.660\nAnd compare the numbers, right.\n\n405\n00:19:59.660 --> 00:20:00.890\nComparing the numbers is pretty easy.\n\n406\n00:20:00.890 --> 00:20:03.680\nWhen you look at these charts,\nyou can choose any of 'em, and\n\n407\n00:20:03.680 --> 00:20:07.710\nyou get the average, the minimum,\nthe maximum, they're laid out right there.\n\n408\n00:20:07.710 --> 00:20:09.440\nAnd I'm looking at this as a histogram,\nbut\n\n409\n00:20:09.440 --> 00:20:12.950\nwe can actually change that to a report.\n\n410\n00:20:12.950 --> 00:20:16.250\nThere, and\nit just lays it out as flat numbers.\n\n411\n00:20:16.250 --> 00:20:19.870\nAnd we can see it right here,\nwhat are the average numbers?\n\n412\n00:20:19.870 --> 00:20:23.780\nAnd now I can compare that to\nwhat we took in the past and\n\n413\n00:20:23.780 --> 00:20:25.220\njust see where we are comparatively.\n\n414\n00:20:25.220 --> 00:20:29.070\nIf they're the same, then there actually\nisn't a problem, it's a perceived problem.\n\n415\n00:20:29.070 --> 00:20:32.840\nBut if they're different, I've got\nan issue, and it might be a growth issue,\n\n416\n00:20:32.840 --> 00:20:33.560\na good issue.\n\n417\n00:20:33.560 --> 00:20:36.940\nWe just need to expand our capacity, or\nit might be indicative of a real problem.\n\n418\n00:20:38.080 --> 00:20:39.320\nAll right.\n\n419\n00:20:39.320 --> 00:20:41.890\nI do want to mention one\nother set of counters.\n\n420\n00:20:41.890 --> 00:20:43.550\nActive directory counters.\n\n421\n00:20:43.550 --> 00:20:46.480\nRemember that Microsoft Exchange\nstores its entire configuration in\n\n422\n00:20:46.480 --> 00:20:47.790\nthe Active Directory.\n\n423\n00:20:47.790 --> 00:20:51.270\nSo your exchange servers\nare constantly querying the AD.\n\n424\n00:20:51.270 --> 00:20:53.970\nIf the AD is slow,\n\n425\n00:20:53.970 --> 00:20:56.860\nthen your exchange servers are gonna\nbe slow because they rely on it.\n\n426\n00:20:56.860 --> 00:20:59.400\nSo it's not a bad idea\nto add a few counters to\n\n427\n00:20:59.400 --> 00:21:02.330\nkeep track of how your Active Directory\ndomain controls are performing.\n\n428\n00:21:03.350 --> 00:21:08.600\nThere's two counters in particular\nthat I like to watch, which, really,\n\n429\n00:21:08.600 --> 00:21:13.180\none is just my own information, which is\nthe average time that an LDAP query takes.\n\n430\n00:21:13.180 --> 00:21:14.650\nLet me show you that one.\n\n431\n00:21:14.650 --> 00:21:18.280\nSo if I go back here, and\nlet me switch back to a histogram.\n\n432\n00:21:18.280 --> 00:21:19.990\nNope, not that one,\nyeah line, there we go.\n\n433\n00:21:19.990 --> 00:21:22.460\nI'm gonna go ahead and\nadd in another counter.\n\n434\n00:21:22.460 --> 00:21:28.720\nAnd the one I'm looking for\nis MS Exchange AD access.\n\n435\n00:21:28.720 --> 00:21:33.990\nMS Exchange AD access,\nway up here at the beginning, here we go.\n\n436\n00:21:33.990 --> 00:21:37.440\nMS Exchange AD access domain controllers.\n\n437\n00:21:37.440 --> 00:21:40.120\nAnd this is going to help us\nmeasure the response time\n\n438\n00:21:40.120 --> 00:21:42.940\nexchange servers are getting when they\nreach out to domain controllers, and\n\n439\n00:21:42.940 --> 00:21:46.070\nthe counter that I like to look for\nis the LDAP Search time.\n\n440\n00:21:48.000 --> 00:21:51.530\nThat's going to let you monitor\nhow much time it takes for\n\n441\n00:21:51.530 --> 00:21:53.310\nyour system to run an LDAP query.\n\n442\n00:21:53.310 --> 00:21:56.210\nSo if you've got a dynamic\ndistribution group and\n\n443\n00:21:56.210 --> 00:21:59.030\nit includes everybody in a certain OU.\n\n444\n00:21:59.030 --> 00:22:01.800\nWhenever an email comes in for that\ndistribution group, we've got do a query.\n\n445\n00:22:01.800 --> 00:22:03.150\nWho's in that OU?\n\n446\n00:22:03.150 --> 00:22:05.220\nHow long does it take\nthe AD server to tell us?\n\n447\n00:22:05.220 --> 00:22:06.590\nThis counter will let us know.\n\n448\n00:22:06.590 --> 00:22:09.430\nAnd you can monitor one domain\ncontroller in particular, or\n\n449\n00:22:09.430 --> 00:22:10.590\nyou can monitor all of them.\n\n450\n00:22:10.590 --> 00:22:11.960\nI've only got one here.\n\n451\n00:22:11.960 --> 00:22:13.820\nSo I'll put that one in and\nI can monitor it.\n\n452\n00:22:13.820 --> 00:22:16.730\nAnd now it's gonna let me know the type\nof response time I'm getting off that DC,\n\n453\n00:22:16.730 --> 00:22:17.910\nall right?\n\n454\n00:22:17.910 --> 00:22:20.750\nThis is one that we watch and\nwe have our own acceptable time.\n\n455\n00:22:20.750 --> 00:22:24.080\nNow there is a timeout that\noccurs if a query takes too long,\n\n456\n00:22:24.080 --> 00:22:25.700\neventually is a problem.\n\n457\n00:22:25.700 --> 00:22:28.440\nMicrosoft really considers anything\nover 30 seconds to be a problem, but\n\n458\n00:22:28.440 --> 00:22:30.470\n30 seconds is a really long time.\n\n459\n00:22:30.470 --> 00:22:33.220\nSo, what we think is a problem\nmight be much shorter.\n\n460\n00:22:33.220 --> 00:22:36.410\nSo, we need to come up with\nwhat's our acceptable time and\n\n461\n00:22:36.410 --> 00:22:38.120\nmonitor this to make sure we don't see it.\n\n462\n00:22:39.540 --> 00:22:44.090\nBut if we hit Microsoft's threshold,\na failure will be generated.\n\n463\n00:22:44.090 --> 00:22:45.850\nAnd that's another counter we can monitor.\n\n464\n00:22:45.850 --> 00:22:51.150\nYou'll see LDAP searches\ntime out per minute.\n\n465\n00:22:51.150 --> 00:22:53.160\nOr time limit exceeded per minute.\n\n466\n00:22:53.160 --> 00:22:54.850\nHow many took too long?\n\n467\n00:22:54.850 --> 00:22:56.590\nHow many exceeded the time limit, or\n\n468\n00:22:56.590 --> 00:22:58.820\nhow many actually exceeded\nthe time limit and failed?\n\n469\n00:22:58.820 --> 00:22:59.770\nThat's even more.\n\n470\n00:22:59.770 --> 00:23:03.030\nIf this counter is one or\nhigher, any number,\n\n471\n00:23:03.030 --> 00:23:05.610\nit's a problem,\nsomething we need to address.\n\n472\n00:23:05.610 --> 00:23:09.700\nYou either need more domain controllers,\nor maybe your exchange server is in\n\n473\n00:23:09.700 --> 00:23:11.710\none site, and\nyour domain controller is in another site.\n\n474\n00:23:11.710 --> 00:23:14.130\nSo we need a DC that is local\nto the exchange server.\n\n475\n00:23:14.130 --> 00:23:17.980\nWe need to do something to alleviate\nthe pressure on the domain controllers.\n\n476\n00:23:19.440 --> 00:23:22.120\nAll right, now, that's a lot to take in.\n\n477\n00:23:22.120 --> 00:23:23.810\nThat's a lot of counters\nthat we can monitor,\n\n478\n00:23:23.810 --> 00:23:26.290\na lot of information that we can gather.\n\n479\n00:23:26.290 --> 00:23:28.470\nIf you have systems center operations\nmanagement handle those for\n\n480\n00:23:28.470 --> 00:23:31.010\nyou, problem solved, right?\n\n481\n00:23:31.010 --> 00:23:33.390\nBut, let's say we're\ndoing all this by hand,\n\n482\n00:23:33.390 --> 00:23:37.210\nwe get everything configured and\nthings are running great.\n\n483\n00:23:37.210 --> 00:23:39.900\nNow, we just monitor it and\nwe're done, right?\n\n484\n00:23:39.900 --> 00:23:42.150\nWell, there's one more\nthing we want to remember.\n\n485\n00:23:42.150 --> 00:23:44.950\nIn addition to these performance counters,\nMicrosoft has what they call,\n\n486\n00:23:44.950 --> 00:23:46.970\ntheir best practices.\n\n487\n00:23:46.970 --> 00:23:50.010\nThe best practices for\nhow you should configure Exchange.\n\n488\n00:23:50.010 --> 00:23:53.847\nAnd oftentimes performance issues\nin Exchange are caused because we\n\n489\n00:23:53.847 --> 00:23:55.443\nmisconfigured something.\n\n490\n00:23:55.443 --> 00:23:59.403\nWe configured something different than\nthe way that Microsoft wanted us to.\n\n491\n00:23:59.403 --> 00:24:01.940\nSo Microsoft has a really cool utility,\n\n492\n00:24:01.940 --> 00:24:05.680\ncalled the Exchange Best\nPractices Analyzer, the BPA.\n\n493\n00:24:05.680 --> 00:24:08.220\nThat can scan our exchange environment and\n\n494\n00:24:08.220 --> 00:24:11.750\nlet us know whether we're configured\nto Microsoft standards or not.\n\n495\n00:24:11.750 --> 00:24:12.410\nAll right.\n\n496\n00:24:12.410 --> 00:24:15.150\nNow there was a period of time when\nExchange 2013 first came out when the tool\n\n497\n00:24:15.150 --> 00:24:16.180\nwasn't available.\n\n498\n00:24:16.180 --> 00:24:17.800\nBut the tool is available now.\n\n499\n00:24:17.800 --> 00:24:21.310\nIf you search on the Internet, you'll find\na lot of people saying it's not available.\n\n500\n00:24:21.310 --> 00:24:23.360\nBut it is.\nLet me show you how you get at it.\n\n501\n00:24:23.360 --> 00:24:27.696\nSo if you're in your Exchange environment\nall you have to do is jump into your\n\n502\n00:24:27.696 --> 00:24:29.749\nExchange administration center.\n\n503\n00:24:29.749 --> 00:24:34.779\nAnd if you go all the way down here to\nTools if your running Exchange Server\n\n504\n00:24:34.779 --> 00:24:40.130\n2013 Service pack 1 or higher,\nyou'll see this guy right here.\n\n505\n00:24:40.130 --> 00:24:45.760\nCheck your on premise Exchange server with\nthe Office 365 best practices analyzer.\n\n506\n00:24:45.760 --> 00:24:50.340\nNow that Office 365 part, that's the\nreason why it wasn't available originally.\n\n507\n00:24:50.340 --> 00:24:55.347\nMicrosoft said our new best practice\nis for you to use Office 365.\n\n508\n00:24:55.347 --> 00:24:58.710\nAnd so in the beginning the BPA was\nonly available for Office 365 and\n\n509\n00:24:58.710 --> 00:25:01.310\na lot of people weren't\ntoo happy about that.\n\n510\n00:25:01.310 --> 00:25:03.540\nAnd so Microsoft said after fact,\nokay, okay,\n\n511\n00:25:03.540 --> 00:25:06.820\nit's okay if you just have all\nyour mail servers on premises.\n\n512\n00:25:06.820 --> 00:25:08.900\nAnd so\nnow they made the tool available here, and\n\n513\n00:25:08.900 --> 00:25:10.580\nyou can run it on your on-premises server.\n\n514\n00:25:10.580 --> 00:25:13.240\nNow when you click on that link,\nit just goes to Microsoft's web page,\n\n515\n00:25:13.240 --> 00:25:14.850\nwhere you can download the tool.\n\n516\n00:25:14.850 --> 00:25:17.620\nSo you actually don't have to go to\nyour administration center to do it.\n\n517\n00:25:17.620 --> 00:25:19.090\nYou can go to their website, and\n\n518\n00:25:19.090 --> 00:25:22.260\nyou can download it, and it's gonna\npull it down so you can install it.\n\n519\n00:25:22.260 --> 00:25:23.000\nAll right?\nYou\n\n520\n00:25:23.000 --> 00:25:24.970\ncan also just do a Google search,\nit'll turn up.\n\n521\n00:25:24.970 --> 00:25:28.480\nJust make sure you get the one for\nExchange 2013, cuz there's a different one\n\n522\n00:25:28.480 --> 00:25:32.330\nfor exchange 2010 and a different one for\n2007 they released multiple versions.\n\n523\n00:25:33.850 --> 00:25:36.010\nNow I've already got in\ninstalled on this server here.\n\n524\n00:25:36.010 --> 00:25:40.100\nLet me get out of my performance\nmonitor and I will fire it up.\n\n525\n00:25:40.100 --> 00:25:43.480\nAnd when your running it looks like this,\nit's a simple wizard that we pass through\n\n526\n00:25:43.480 --> 00:25:46.970\nand as we complete the wizard\nit'll scan our environment and\n\n527\n00:25:46.970 --> 00:25:47.960\nlet us know how things look.\n\n528\n00:25:47.960 --> 00:25:51.070\nNow it does still expect\nyou to have Office 365 but\n\n529\n00:25:51.070 --> 00:25:53.440\nit doesn't require you to have it.\n\n530\n00:25:53.440 --> 00:25:56.790\nSo, as I move forward,\nI'm going to ignore some of that stuff.\n\n531\n00:25:56.790 --> 00:25:59.260\nI'm going to choose to start my scan, and\n\n532\n00:25:59.260 --> 00:26:03.770\nas it starts to scan, it's prompting\nme for Office 365 credentials.\n\n533\n00:26:03.770 --> 00:26:05.780\nIf you've got them, put them in there,\n\n534\n00:26:05.780 --> 00:26:10.280\nand then it will be able to scan your\nAzure systems and your systems right here.\n\n535\n00:26:10.280 --> 00:26:12.530\nIt will scan them both and\nlet you know what's what.\n\n536\n00:26:12.530 --> 00:26:14.350\nBut if you don't, just hit Cancel.\n\n537\n00:26:14.350 --> 00:26:17.460\nIf you just cancel that, it'll go\nthrough and run the rest of your scans.\n\n538\n00:26:17.460 --> 00:26:18.060\nAll right.\n\n539\n00:26:18.060 --> 00:26:20.760\nAnd at the end, when we get on our report,\nwell, actually,\n\n540\n00:26:20.760 --> 00:26:23.220\nI have a little warning that'll say,\nOffice 365 wasn't tested.\n\n541\n00:26:23.220 --> 00:26:24.690\nYou just ignore that warning.\n\n542\n00:26:24.690 --> 00:26:29.690\nAll the other stuff is still very accurate\nand a great view of your system and\n\n543\n00:26:29.690 --> 00:26:31.490\nwhether or\nnot you're conforming to standards.\n\n544\n00:26:31.490 --> 00:26:34.440\nNow, in my lab environment\nI broke many rules.\n\n545\n00:26:34.440 --> 00:26:37.150\nSo, you'll see that I've got a bunch.\n\n546\n00:26:37.150 --> 00:26:37.980\nI've got 19 failed checks.\n\n547\n00:26:37.980 --> 00:26:40.090\nThat's pretty bad, all right?\n\n548\n00:26:40.090 --> 00:26:44.400\nI've got 22 warning checks,\na bunch of informational and 136 passed.\n\n549\n00:26:44.400 --> 00:26:47.190\nWell, it's telling me\nit found some problems.\n\n550\n00:26:47.190 --> 00:26:49.370\nThose 19 failed checks,\nI need to deal with those.\n\n551\n00:26:49.370 --> 00:26:53.810\nThose are 19 things I need to get squared\naway if I'm gonna put this in production.\n\n552\n00:26:53.810 --> 00:26:56.680\nThe 22 warnings,\nthose are ones I need to be aware of.\n\n553\n00:26:56.680 --> 00:27:01.990\nI might need to correct them, or I might\nhave a reason why I didn't follow them.\n\n554\n00:27:01.990 --> 00:27:05.120\nAnd if I have a reason,\nit's okay to ignore the warning.\n\n555\n00:27:05.120 --> 00:27:07.780\nBut if I don't have a reason,\nthen I need to correct them.\n\n556\n00:27:07.780 --> 00:27:09.670\nSo, those are a little more subjective.\n\n557\n00:27:09.670 --> 00:27:11.520\nInformational and passed,\nI can ignore those.\n\n558\n00:27:11.520 --> 00:27:12.290\nThose are good.\n\n559\n00:27:12.290 --> 00:27:13.870\nI'm in good shape on those.\n\n560\n00:27:13.870 --> 00:27:16.070\nIf I take a look at failed checks,\n\n561\n00:27:16.070 --> 00:27:18.260\nit's going to start telling me\nsome prompts, like this one.\n\n562\n00:27:18.260 --> 00:27:19.310\nActive directory.\n\n563\n00:27:19.310 --> 00:27:22.480\nCheck if more than one global\ncatalog servers are configured.\n\n564\n00:27:22.480 --> 00:27:25.360\nWell, I only have one domain controller,\nso I've only got one global\n\n565\n00:27:25.360 --> 00:27:28.890\ncatalog server, so it's complaining\nthat I don't have a second one.\n\n566\n00:27:28.890 --> 00:27:29.680\nValid point.\n\n567\n00:27:29.680 --> 00:27:30.890\nI need a second domain controller.\n\n568\n00:27:30.890 --> 00:27:31.750\nSo I need to correct that.\n\n569\n00:27:32.830 --> 00:27:35.610\nCheck whether your mailbox\ndatabases are being backed up.\n\n570\n00:27:35.610 --> 00:27:39.200\nWell, I kind of haven't run a backup on\nthese servers because it's just a lab.\n\n571\n00:27:39.200 --> 00:27:39.900\nThat's a problem.\n\n572\n00:27:39.900 --> 00:27:41.280\nI need to start taking backups.\n\n573\n00:27:41.280 --> 00:27:43.560\nSo these are the things that it tells us.\n\n574\n00:27:43.560 --> 00:27:45.410\nSome of them are really obvious.\n\n575\n00:27:45.410 --> 00:27:47.580\nSome of them are a little more vague.\n\n576\n00:27:47.580 --> 00:27:53.130\nSome of them, if you look in here,\nhow about this guy, the OWACTP monitor.\n\n577\n00:27:53.130 --> 00:27:55.350\nAll right, what is that?\n\n578\n00:27:56.885 --> 00:27:58.785\nWell, it doesn't say.\n\n579\n00:27:58.785 --> 00:28:01.515\nAnd if I double-click on it,\nI don't get any information there.\n\n580\n00:28:01.515 --> 00:28:04.385\nYou can save the results and\nit gives you a little bit more.\n\n581\n00:28:04.385 --> 00:28:06.945\nIf I view the details on this,\nand I look for\n\n582\n00:28:06.945 --> 00:28:11.475\nthat CTP monitor in the results come out,\nwe can find it in here.\n\n583\n00:28:11.475 --> 00:28:15.020\nAnd you get just a hair\nmore information on it.\n\n584\n00:28:15.020 --> 00:28:18.960\nSo here it's telling me that the OWACTP\nmonitor on Exchange Server lab\n\n585\n00:28:18.960 --> 00:28:20.820\ncastle one is unhealthy.\n\n586\n00:28:20.820 --> 00:28:22.740\nThat may cause a special unhealthy state,\n\n587\n00:28:22.740 --> 00:28:26.630\nand then it's telling me how to check\nit to use the get-serverhealth.\n\n588\n00:28:26.630 --> 00:28:30.320\nSo I get more information there and\nI can start to look and try and\n\n589\n00:28:30.320 --> 00:28:31.040\nfind that problem.\n\n590\n00:28:31.040 --> 00:28:34.510\nAnd if I know what to look for,\nthat helps.\n\n591\n00:28:34.510 --> 00:28:41.810\nSo I go fire up my PowerShell and\nI can run Get-ServerHealth and\n\n592\n00:28:41.810 --> 00:28:43.370\npull that information up and\nsee what's up.\n\n593\n00:28:43.370 --> 00:28:46.470\nOh, I forgot to provide a server name,\nit kinda needs that one, so\n\n594\n00:28:46.470 --> 00:28:47.980\nmaybe I'll check this guy.\n\n595\n00:28:47.980 --> 00:28:50.790\nAnd it's gonna return all this\ninformation back on the system,\n\n596\n00:28:50.790 --> 00:28:52.640\nletting me know what's healthy and\nwhat's not.\n\n597\n00:28:52.640 --> 00:28:56.500\nSo we can start to try and find that\nproblem and isolate where the issue is.\n\n598\n00:28:56.500 --> 00:28:59.930\nThis is a great way to\nkinda find the information.\n\n599\n00:28:59.930 --> 00:29:01.330\nThe best practice is analyzer.\n\n600\n00:29:02.370 --> 00:29:03.420\nIt's not forced.\n\n601\n00:29:03.420 --> 00:29:05.910\nYou can have 19 failed checks on there and\n\n602\n00:29:05.910 --> 00:29:11.410\nbe okay; but, it means you've gone\nagainst Microsoft's best practices.\n\n603\n00:29:11.410 --> 00:29:14.160\nSo you better have a reason for it,\nand you better know what you're doing,\n\n604\n00:29:14.160 --> 00:29:17.510\nbecause the guys at Microsoft, they wrote\nthis stuff, they kind of know what they're\n\n605\n00:29:17.510 --> 00:29:20.990\ndoing, so they have a very specific\nreason for wanting it a certain way.\n\n606\n00:29:20.990 --> 00:29:24.620\nYou've gotta have a very specific\nreason for not wanting it that way.\n\n607\n00:29:24.620 --> 00:29:29.030\nAnd if you deviate too far, you can make\nit where Microsoft won't support you.\n\n608\n00:29:29.030 --> 00:29:30.590\nWhere you call them on the phone,\nand they're like look,\n\n609\n00:29:30.590 --> 00:29:34.160\nwe can't help you because you've done xyz,\nand that's just not right.\n\n610\n00:29:34.160 --> 00:29:37.970\nThat's not the way this is intended to\nbe used, and you end up with no support.\n\n611\n00:29:37.970 --> 00:29:39.560\nSo we need to keep an eye on that.\n\n612\n00:29:39.560 --> 00:29:42.900\nBut using the best practices analyzer\nis not something we just do once.\n\n613\n00:29:42.900 --> 00:29:46.380\nYou want to do it routinely, because you\nmight have set up the server perfect,\n\n614\n00:29:46.380 --> 00:29:48.990\njust the right way or\nyour whole server farm.\n\n615\n00:29:48.990 --> 00:29:52.240\nBut over time, more servers get added,\nother people work on it, and\n\n616\n00:29:52.240 --> 00:29:54.730\nmaybe you start to deviate\naway from the best practices.\n\n617\n00:29:54.730 --> 00:29:57.580\nAnd so we need to tweak that,\nwe need to change it and adjust it and\n\n618\n00:29:57.580 --> 00:29:58.800\nget it to where things are squared away.\n\n619\n00:29:58.800 --> 00:30:00.530\nSo definitely make use of that utility.\n\n620\n00:30:00.530 --> 00:30:01.450\nIt's a great one.\n\n621\n00:30:01.450 --> 00:30:05.910\nIt's baked right in to the exchange,\n\n622\n00:30:05.910 --> 00:30:08.650\nwell the link is at least,\nthen we download it and install it.\n\n623\n00:30:08.650 --> 00:30:10.630\nThen we can run that scan and\nit checks our systems.\n\n624\n00:30:10.630 --> 00:30:13.890\nIt gives you a great bit of information\nand it doesn't cost you a dime, right?\n\n625\n00:30:13.890 --> 00:30:17.210\nThat's analyzer it's available for free.\n\n626\n00:30:17.210 --> 00:30:20.930\nAll right, well what was supposed to be\na two part series ended up being a three\n\n627\n00:30:20.930 --> 00:30:24.770\npart, but I can say, as of right now, you\nguys have seen the typical monitoring and\n\n628\n00:30:24.770 --> 00:30:27.060\nmaintenance techniques we've got for\nexchange.\n\n629\n00:30:27.060 --> 00:30:30.550\nObviously, the big takeaway here,\nwatch your servers, watch it.\n\n630\n00:30:30.550 --> 00:30:33.180\nWatch them when they're good,\nrecord those values.\n\n631\n00:30:33.180 --> 00:30:35.670\nWatch them when they're bad and\ncompare the values, and\n\n632\n00:30:35.670 --> 00:30:38.860\nnow you'll know a better idea of\nwhere that problem is coming from,\n\n633\n00:30:38.860 --> 00:30:41.200\nwhere it originates, and\nwhere to start your troubleshooting.\n\n634\n00:30:41.200 --> 00:30:45.870\nThere's a lot of stuff out there so it is\ndifficult sometimes to keep that straight\n\n635\n00:30:45.870 --> 00:30:47.520\nand make sure that we\nare working in the environment.\n\n636\n00:30:47.520 --> 00:30:50.110\nThat we are working where\nthe actual problem is and\n\n637\n00:30:50.110 --> 00:30:51.500\nnot just where some kind of symptom is.\n\n638\n00:30:51.500 --> 00:30:53.200\nAll right.\n\n639\n00:30:53.200 --> 00:30:57.480\nBut otherwise I think that is about it\nfrom me for monitoring and maintenance.\n\n640\n00:30:57.480 --> 00:30:58.960\nI hope you guys enjoyed it.\n\n641\n00:30:58.960 --> 00:31:02.233\nStay tuned we got more exchange\ncontent coming down the road but for\n\n642\n00:31:02.233 --> 00:31:04.869\nright now, signing off for\nITProTV, I am Don Pezet.\n\n643\n00:31:04.869 --> 00:31:06.129\nAnd I'll see you next time.\n\n644\n00:31:06.129 --> 00:31:11.393\n[MUSIC]\n\n",
          "vimeoId": "140111800"
        }
      ],
      "title": "Monitoring and Maintenance"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don demonstrates how to configure Database Availability Groups in Exchange 2013. He discusses the prerequisites and walks the viewers through the setup process.",
          "length": "1309",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups-081415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups-081415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups-081415-1-sm.jpg",
          "title": "Database Availability Groups",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.005 --> 00:00:13.755\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:13.755 --> 00:00:16.297\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:16.297 --> 00:00:17.940\nI'm your host Don Pezet.\n\n5\n00:00:17.940 --> 00:00:21.296\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:21.296 --> 00:00:24.520\nAnd in this episode, we're gonna be\ntaking a look at a pretty neat topic.\n\n7\n00:00:24.520 --> 00:00:26.910\nWe're gonna look at database\navailability groups.\n\n8\n00:00:26.910 --> 00:00:30.070\nNow, inside of Exchange we have a role,\nthe mailbox server role, and\n\n9\n00:00:30.070 --> 00:00:33.960\nthat's where all of our email gets stored,\nand it's all stored in a big fat database.\n\n10\n00:00:33.960 --> 00:00:37.020\nWell, what happens if that\ndatabase goes offline?\n\n11\n00:00:37.020 --> 00:00:38.680\nOur users can't get to their email, right?\n\n12\n00:00:38.680 --> 00:00:39.890\nThat's pretty bad.\n\n13\n00:00:39.890 --> 00:00:40.610\nIn the past,\n\n14\n00:00:40.610 --> 00:00:45.310\nin earlier versions of Exchange, the\nsolution to this was to set up a cluster.\n\n15\n00:00:45.310 --> 00:00:47.754\nWell, the problem with\na cluster is it's complex.\n\n16\n00:00:47.754 --> 00:00:48.990\nYou have to have shared storage.\n\n17\n00:00:48.990 --> 00:00:51.087\nYou have to have expensive hardware.\n\n18\n00:00:51.087 --> 00:00:55.925\nIdeally, you'll have a fiber attached SAN,\nand that kind of stuff,\n\n19\n00:00:55.925 --> 00:00:58.796\nit really is just complex and expensive.\n\n20\n00:00:58.796 --> 00:01:01.590\nIn Exchange 2013 and\neven in Exchange 2010,\n\n21\n00:01:01.590 --> 00:01:05.950\nwe got database availability groups\nthat make things a heck of a lot easier.\n\n22\n00:01:05.950 --> 00:01:09.170\nIt uses some of the same\nsoftware as the regular failover\n\n23\n00:01:09.170 --> 00:01:10.970\ncluster services in Windows.\n\n24\n00:01:10.970 --> 00:01:13.560\nBut it doesn't need all\nthe fancy hardware.\n\n25\n00:01:13.560 --> 00:01:16.513\nWhat a database availability\ngroup allows us to do,\n\n26\n00:01:16.513 --> 00:01:19.545\nis to store an email database\non more than one server.\n\n27\n00:01:19.545 --> 00:01:22.280\nIn fact, you can store it on\nup to 16 servers if you want.\n\n28\n00:01:22.280 --> 00:01:25.560\nNow only one of those\nservers is gonna be active.\n\n29\n00:01:25.560 --> 00:01:27.840\nAll the others are gonna be standby.\n\n30\n00:01:27.840 --> 00:01:32.504\nAnd when one fails, the other\nservers can automatically take over.\n\n31\n00:01:32.504 --> 00:01:34.786\nIt's automatic,\nwe don't have to do anything, and\n\n32\n00:01:34.786 --> 00:01:36.470\nwe don't have to have shared storage.\n\n33\n00:01:36.470 --> 00:01:38.504\nNow, there's pros and cons to that, right?\n\n34\n00:01:38.504 --> 00:01:40.490\nOn the positive side,\nwe don't have to have shared storage.\n\n35\n00:01:40.490 --> 00:01:43.840\nThat means all the hardware and\ncomplexity is kind of out of this.\n\n36\n00:01:43.840 --> 00:01:48.587\nOn a negative side, it means we're\nstoring multiple copies of the database.\n\n37\n00:01:48.587 --> 00:01:52.942\nSo if our email database is 1 TB in size,\nI'm gonna need a TB of storage on each of\n\n38\n00:01:52.942 --> 00:01:56.010\nthe nodes inside of that\ndatabase availability group.\n\n39\n00:01:56.010 --> 00:01:57.916\nNow, if you're just trying\nto set up two nodes,\n\n40\n00:01:57.916 --> 00:01:59.462\nthat's not that big of a deal, right?\n\n41\n00:01:59.462 --> 00:02:00.540\nYou have that storage.\n\n42\n00:02:00.540 --> 00:02:04.340\nBut if you wanna set up more, it does\nstart to require extra storage there, so\n\n43\n00:02:04.340 --> 00:02:05.730\nwe have to be aware of that.\n\n44\n00:02:05.730 --> 00:02:09.770\nThe other thing is when email comes in,\nthat email has to be\n\n45\n00:02:09.770 --> 00:02:13.470\nreplicated to the other copy of\nthe database to keep them in lockstep.\n\n46\n00:02:13.470 --> 00:02:17.100\nSo there's gonna be replication\noccurring between the database servers.\n\n47\n00:02:17.100 --> 00:02:20.310\nFortunately, email is\nreally easy to replicate.\n\n48\n00:02:20.310 --> 00:02:22.890\nYou might remember from some of\nthe earlier episodes where I talked about\n\n49\n00:02:22.890 --> 00:02:25.650\nthe mailbox database and\nthe files that build it up, and\n\n50\n00:02:25.650 --> 00:02:27.520\nhow we have transaction logs.\n\n51\n00:02:27.520 --> 00:02:31.320\nAnd the transaction logs\nare all 1 MB in size.\n\n52\n00:02:31.320 --> 00:02:35.390\nSo when I talk about replicating,\nit's really just copying these 1 MB files\n\n53\n00:02:35.390 --> 00:02:38.505\nacross to this other server to\nmaintain that database copy.\n\n54\n00:02:38.505 --> 00:02:39.980\nIt's not that big of a deal.\n\n55\n00:02:39.980 --> 00:02:44.830\nAnd as a result, database availability\ngroups have a real low barrier of entry.\n\n56\n00:02:44.830 --> 00:02:47.600\nEven small businesses can afford to\nimplement these cuz they're not that\n\n57\n00:02:47.600 --> 00:02:50.812\ncomplex, and\nyou don't need special hardware.\n\n58\n00:02:50.812 --> 00:02:53.110\nAll right, well,\nlet me show you how this works.\n\n59\n00:02:53.110 --> 00:02:55.850\nSo here I am, logged into my\nExchange Administration Center.\n\n60\n00:02:55.850 --> 00:02:59.550\nAnd I've only got a couple of mailboxes,\nright, nothing too special here.\n\n61\n00:02:59.550 --> 00:03:03.086\nAnd if I dive down to Servers, you'll\nsee I've got two servers that are in my\n\n62\n00:03:03.086 --> 00:03:07.010\nenvironment, LAB-EXCHANGE server 1 and\nLAB-EXCHANGE server 2.\n\n63\n00:03:07.010 --> 00:03:10.460\nAnd both of those servers are mailbox and\nclient access servers.\n\n64\n00:03:10.460 --> 00:03:15.750\nNow, database availability groups only\nmake an email database redundant.\n\n65\n00:03:15.750 --> 00:03:18.280\nThey don't do anything for\nthe client access servers.\n\n66\n00:03:18.280 --> 00:03:21.740\nSo when I talk about a database\navailability group, that's redundancy for\n\n67\n00:03:21.740 --> 00:03:23.680\nthe mailbox server role.\n\n68\n00:03:23.680 --> 00:03:26.730\nIf I have a client access server,\nI need something else for that, and\n\n69\n00:03:26.730 --> 00:03:30.240\nwe usually do network load balancing or\nWindows load balancing services.\n\n70\n00:03:30.240 --> 00:03:32.520\nThat will make a client\naccess server redundant.\n\n71\n00:03:32.520 --> 00:03:34.150\nWe'll cover that in another episode.\n\n72\n00:03:34.150 --> 00:03:36.720\nBut right now we're gonna\nfocus on the mailbox database.\n\n73\n00:03:36.720 --> 00:03:40.504\nIf you want to do a database availability\ngroup, you're gonna have to have at least\n\n74\n00:03:40.504 --> 00:03:43.004\ntwo servers that are running\nthe mailbox server role.\n\n75\n00:03:43.004 --> 00:03:46.690\nSo I've already got those two servers,\nI'm ready to rock, all right.\n\n76\n00:03:46.690 --> 00:03:49.550\nI'm also going to need\na database to replicate.\n\n77\n00:03:49.550 --> 00:03:53.080\nNow you can replicate as many databases\nas you want, and when you created these\n\n78\n00:03:53.080 --> 00:03:58.760\nmailbox servers, well, they likely already\nhave a mailbox database created on them.\n\n79\n00:03:58.760 --> 00:04:02.110\nSo if I go under my databases, I'll\nsee I've got those two kind of generic\n\n80\n00:04:02.110 --> 00:04:05.060\nmailbox databases that were\nmade during the install, which\n\n81\n00:04:05.060 --> 00:04:08.830\nare just called Mailbox Database and then\nsome kind of random set of numbers, right.\n\n82\n00:04:08.830 --> 00:04:12.090\nBut you can make your own\nmailbox databases redundant too.\n\n83\n00:04:12.090 --> 00:04:16.470\nOne key thing we have to remember is\nwhatever the file path is on the first\n\n84\n00:04:16.470 --> 00:04:19.720\nserver has to exist on the second server.\n\n85\n00:04:19.720 --> 00:04:23.967\nSo for example, if I chose to put my\ngame database on my E drive, right, so\n\n86\n00:04:23.967 --> 00:04:25.004\nE:/ whatever.\n\n87\n00:04:25.004 --> 00:04:26.755\nMaybe I'll get some extra RAID array.\n\n88\n00:04:26.755 --> 00:04:29.795\nI would need to create an E\ndrive on the other system.\n\n89\n00:04:29.795 --> 00:04:31.762\nIt doesn't have to be the same\nRAID array technology,\n\n90\n00:04:31.762 --> 00:04:33.921\nit doesn't have to be on the same SAN or\nanything like that.\n\n91\n00:04:33.921 --> 00:04:35.600\nIt just, there has to be an E drive.\n\n92\n00:04:35.600 --> 00:04:37.068\nBecause it's gonna replicate, and\n\n93\n00:04:37.068 --> 00:04:39.970\nit's gonna expect those\nfile paths to be the same.\n\n94\n00:04:39.970 --> 00:04:42.421\nSo I'm gonna add in a quick database here.\n\n95\n00:04:42.421 --> 00:04:44.756\nI'm just going to call this\nmy Sales mailbox database.\n\n96\n00:04:44.756 --> 00:04:47.970\nSo all my salespeople, they're\ngonna have mailboxes right in here.\n\n97\n00:04:47.970 --> 00:04:50.410\nAnd for the server I can just pick\nwhich server I want it to reside on.\n\n98\n00:04:50.410 --> 00:04:53.547\nI'll leave it here on EXCHANGESERV01.\n\n99\n00:04:53.547 --> 00:04:58.390\nAnd the default path is to put it on the C\ndrive inside of the Exchange install.\n\n100\n00:04:58.390 --> 00:05:02.610\nAnd I'm gonna leave it that way because\nI know that path exists on both servers.\n\n101\n00:05:02.610 --> 00:05:04.130\nBut if I wanted to move it somewhere else,\n\n102\n00:05:04.130 --> 00:05:07.740\nI would just need to make sure the path\nexisted in both places, all right?\n\n103\n00:05:07.740 --> 00:05:11.390\nI'll go ahead and save that, and\nnow I've got a database created.\n\n104\n00:05:11.390 --> 00:05:16.546\nNow that database is only stored on\nLAB-EXCHANGESERV01, and that's it, right?\n\n105\n00:05:16.546 --> 00:05:18.250\nThat's where I chose to create it.\n\n106\n00:05:18.250 --> 00:05:20.430\nAnd if I start moving mailboxes into it,\n\n107\n00:05:20.430 --> 00:05:24.340\nthey're just gonna be right there\non that server in that one place.\n\n108\n00:05:24.340 --> 00:05:26.120\nAnd if that database goes offline?\n\n109\n00:05:26.120 --> 00:05:27.338\nThey don't have access to the mailbox.\n\n110\n00:05:27.338 --> 00:05:31.991\nNow, just because the database is offline\ndoesn't mean that we lose access to that\n\n111\n00:05:31.991 --> 00:05:33.150\nresource, right.\n\n112\n00:05:33.150 --> 00:05:34.830\nWe're not losing email.\n\n113\n00:05:34.830 --> 00:05:38.440\nEmail comes in, it just stays in the queue\nuntil the mailbox database comes online.\n\n114\n00:05:38.440 --> 00:05:40.360\nBut the user can't get to their mailbox,\nand so\n\n115\n00:05:40.360 --> 00:05:42.470\nthat's just as bad as losing email, right.\n\n116\n00:05:42.470 --> 00:05:44.240\nThey think they've lost everything.\n\n117\n00:05:44.240 --> 00:05:46.090\nSo we definitely wanna\nmake that redundant.\n\n118\n00:05:46.090 --> 00:05:48.720\nBut when you create one,\nyou'll see here SERVERS WITH COPIES.\n\n119\n00:05:48.720 --> 00:05:50.650\nI've only got one server, that's it.\n\n120\n00:05:50.650 --> 00:05:53.360\nSo there's no redundancy\nintroduced by this\n\n121\n00:05:53.360 --> 00:05:54.840\noutside of what your\nhardware might provide.\n\n122\n00:05:56.270 --> 00:05:59.580\nSo my next step is gonna be to set\nup the database availability group.\n\n123\n00:05:59.580 --> 00:06:03.088\nNow, there's a couple of things that we\nneed to do before we just dive right in.\n\n124\n00:06:03.088 --> 00:06:05.716\nCuz you could just jump right over\nto database availability groups,\n\n125\n00:06:05.716 --> 00:06:07.850\nhit that plus sign, and get to work.\n\n126\n00:06:07.850 --> 00:06:08.650\nBut it's not gonna work.\n\n127\n00:06:08.650 --> 00:06:10.028\nYou're gonna have some problems.\n\n128\n00:06:10.028 --> 00:06:11.350\nSo I wanna go through and\n\n129\n00:06:11.350 --> 00:06:14.450\ndo a couple of extra things to\nmake sure that I'm set in place.\n\n130\n00:06:14.450 --> 00:06:18.820\nFirst off, I need to make sure that\nI have permission to do this, right?\n\n131\n00:06:18.820 --> 00:06:22.450\nI need to have access to create\ndatabase availability groups.\n\n132\n00:06:22.450 --> 00:06:25.970\nAnd so the way we do that is we use one of\nthe roles that's built here into Exchange.\n\n133\n00:06:25.970 --> 00:06:29.940\nThere's a role called organization\nmanagement, and we need to have that role.\n\n134\n00:06:29.940 --> 00:06:35.504\nSo over here in my admin center,\nI'm just gonna browse down to permissions.\n\n135\n00:06:35.504 --> 00:06:37.879\nAnd inside of permissions,\nI've got my admin roles.\n\n136\n00:06:37.879 --> 00:06:41.060\nAnd you can find organization\nmanagement right there, and\n\n137\n00:06:41.060 --> 00:06:44.610\nthis is gonna be a kind of a roll\nup of various other roles.\n\n138\n00:06:44.610 --> 00:06:48.640\nAnd I just need to make sure that\nI have that permission, right.\n\n139\n00:06:48.640 --> 00:06:51.370\nSo, in the active directory there's\nactually an Exchange organization\n\n140\n00:06:51.370 --> 00:06:53.650\nadministrators group, and\nwe can put ourselves in that group and\n\n141\n00:06:53.650 --> 00:06:55.070\nhave that permission.\n\n142\n00:06:55.070 --> 00:06:58.800\nIf I edit that organization management,\nI can look in here and\n\n143\n00:06:58.800 --> 00:07:02.560\nI can see not only what that role is,\nbut the roles that it possesses.\n\n144\n00:07:02.560 --> 00:07:06.810\nAnd that's really the key piece is there's\ntwo true roles that I really need.\n\n145\n00:07:06.810 --> 00:07:09.000\nIf you look in here,\nyou can find them pretty easy.\n\n146\n00:07:09.000 --> 00:07:13.580\nThere's database availability groups and\ndatabase copies.\n\n147\n00:07:13.580 --> 00:07:14.740\nDatabase availability groups,\n\n148\n00:07:14.740 --> 00:07:17.030\nthat's what gives you\nthe permission to create the DAG.\n\n149\n00:07:17.030 --> 00:07:19.270\nAnd then database copies,\n\n150\n00:07:19.270 --> 00:07:22.760\nthat's what gives you the permission to\nclone the database and put that in place.\n\n151\n00:07:22.760 --> 00:07:27.506\nSo if I wanted to create a custom role\nthat allowed somebody to set up these DAGs\n\n152\n00:07:27.506 --> 00:07:31.463\nwell, I would need to add these\ntwo roles to the role that I made.\n\n153\n00:07:31.463 --> 00:07:33.692\nAnd then right down here,\nI can see the members, and\n\n154\n00:07:33.692 --> 00:07:35.220\nI can see that I am already a member.\n\n155\n00:07:35.220 --> 00:07:36.660\nSo Don Pezet, I'm in there.\n\n156\n00:07:36.660 --> 00:07:39.730\nIf I was doing this as a different user,\nI'd need to add that to this list so\n\n157\n00:07:39.730 --> 00:07:40.760\nthat I could set up the DAGs.\n\n158\n00:07:42.280 --> 00:07:43.910\nAll right, so I'm good there.\n\n159\n00:07:43.910 --> 00:07:47.510\nThe other thing is I need to think\nabout my domain controllers, all right?\n\n160\n00:07:47.510 --> 00:07:53.231\nIf you're running Exchange on top of\nWindows Server 2012, you're fine.\n\n161\n00:07:53.231 --> 00:07:55.170\nYou can go and create the DAGs right now.\n\n162\n00:07:55.170 --> 00:07:58.305\nBut if you're running Exchange on\ntop of Windows Server 2008, Or\n\n163\n00:07:58.305 --> 00:08:02.292\nif it's on top of Windows Server 2012 and\nyou're domain controllers are 2008,\n\n164\n00:08:02.292 --> 00:08:05.236\nthen there's a little\nextra work we have to do.\n\n165\n00:08:05.236 --> 00:08:06.990\nWhen you create a DAG,\n\n166\n00:08:06.990 --> 00:08:11.980\nit's actually creating a type of failover\ncluster in the background, all right?\n\n167\n00:08:11.980 --> 00:08:16.160\nSo I've gotta make sure that\nit is has a server object\n\n168\n00:08:16.160 --> 00:08:17.630\ncreated in the active directory for that.\n\n169\n00:08:17.630 --> 00:08:20.470\nAnd in 2012 it would've created\nautomatically, it's no big deal.\n\n170\n00:08:20.470 --> 00:08:22.430\nBut in 2008 it doesn't\ncreate it automatically, so\n\n171\n00:08:22.430 --> 00:08:24.470\nwe're gonna have to create it, all right?\n\n172\n00:08:24.470 --> 00:08:27.320\nNow when I say it's gonna\ncreate a cluster server object,\n\n173\n00:08:27.320 --> 00:08:31.810\nwhen you have a cluster, you have two or\nmore machines in a cluster and\n\n174\n00:08:31.810 --> 00:08:34.610\nthey create virtual server,\na fake server, right?\n\n175\n00:08:34.610 --> 00:08:36.660\nA server that doesn't really exist, but\n\n176\n00:08:36.660 --> 00:08:39.700\nit's the server that you're\ngonna point all your clients to.\n\n177\n00:08:39.700 --> 00:08:43.290\nAnd if one node fails that virtual\nserver kinda hops over to another node.\n\n178\n00:08:43.290 --> 00:08:44.910\nAnd if it fails it hops\nover to another node.\n\n179\n00:08:44.910 --> 00:08:46.910\nAnd it can do that across up to 16 nodes.\n\n180\n00:08:46.910 --> 00:08:47.690\nSo you can have many,\n\n181\n00:08:47.690 --> 00:08:51.440\nmany servers that are all able\nto handle this virtual entity.\n\n182\n00:08:51.440 --> 00:08:53.790\nSo if I'm in 2012,\ndon't worry about that, right?\n\n183\n00:08:53.790 --> 00:08:55.270\nJust put it out of your mind.\n\n184\n00:08:55.270 --> 00:08:59.430\nBut if I'm in 2008 I need to create\nthat virtual entity first, all right?\n\n185\n00:08:59.430 --> 00:09:02.750\nAnd the easiest way to do that is to\njump over to a domain controller.\n\n186\n00:09:02.750 --> 00:09:05.310\nSo I'm gonna jump to my domain\ncontroller and I'm on 2012, but\n\n187\n00:09:05.310 --> 00:09:07.860\nI'm gonna go ahead and create this anyway.\n\n188\n00:09:07.860 --> 00:09:10.830\nAnd so I'm gonna jump in here and I'm\ngonna go into Active Directory Users and\n\n189\n00:09:10.830 --> 00:09:11.730\nComputers.\n\n190\n00:09:11.730 --> 00:09:16.062\nAnd what I need to do is I need to\ncreate a computer object that is gonna\n\n191\n00:09:16.062 --> 00:09:18.197\nrepresent this virtual server.\n\n192\n00:09:18.197 --> 00:09:21.218\nAnd I need to assign some permissions\nto that computer object so\n\n193\n00:09:21.218 --> 00:09:24.760\nthat Exchange will be allowed to work\nwith it and then I need to disable it.\n\n194\n00:09:24.760 --> 00:09:27.730\nIts gotta be disabled so\nthe cluster can take it over.\n\n195\n00:09:27.730 --> 00:09:30.060\nSo, you can really go\ninto any OU you want.\n\n196\n00:09:30.060 --> 00:09:32.808\nI'm gonna stick with my\ndefault computer's container.\n\n197\n00:09:32.808 --> 00:09:36.930\nAnd I'm gonna create a new computer,\nand you want to give it a name.\n\n198\n00:09:36.930 --> 00:09:40.230\nNow this is going to be the servers\nthat your end users see.\n\n199\n00:09:40.230 --> 00:09:42.480\nThe end users aren't going to see\nthe individual servers anymore,\n\n200\n00:09:42.480 --> 00:09:44.240\nthey're going to see this one entity.\n\n201\n00:09:44.240 --> 00:09:46.100\nSo think of a nice generic name.\n\n202\n00:09:46.100 --> 00:09:53.865\nAll of my servers, I've been naming\nthem LAB-EXCHSERV01 or 02 or 03.\n\n203\n00:09:53.865 --> 00:09:56.400\nBut users don't care about\nhow many servers I've got.\n\n204\n00:09:56.400 --> 00:09:58.040\nThey just wanna connect to Exchange.\n\n205\n00:09:58.040 --> 00:10:01.057\nSo I might call this LAB-EXCHANGE.\n\n206\n00:10:01.057 --> 00:10:03.020\nAnd so now they know,\nhey that's the Exchange server.\n\n207\n00:10:03.020 --> 00:10:06.330\nThat's what I need to point out for\nmy mailbox database or whatever, right.\n\n208\n00:10:06.330 --> 00:10:09.400\nSo you can give it a name,\nwhatever you want.\n\n209\n00:10:09.400 --> 00:10:11.362\nI'll call mine LAB-MAILBOX.\n\n210\n00:10:11.362 --> 00:10:15.270\nAll right, so this is gonna be my\nmailbox database cluster entity.\n\n211\n00:10:16.960 --> 00:10:18.100\nAll right, I'll go ahead and\n\n212\n00:10:18.100 --> 00:10:22.670\nsay OK to get that created, then I\nneed to adjust some permissions on it.\n\n213\n00:10:22.670 --> 00:10:24.570\nNow, when you go into\nActive Directory Users and\n\n214\n00:10:24.570 --> 00:10:28.810\nComputers, the default view doesn't\nactually show every thing that we need.\n\n215\n00:10:28.810 --> 00:10:31.670\nSo you need to make sure you go up\nhere to View and Advanced Features and\n\n216\n00:10:31.670 --> 00:10:32.290\nturn that on.\n\n217\n00:10:32.290 --> 00:10:36.630\nAnd when that's turned on, you can pull\nup the properties for an object and\n\n218\n00:10:36.630 --> 00:10:39.240\nyou'll have your Security tab up here.\n\n219\n00:10:39.240 --> 00:10:41.910\nAnd in Security, I need to add\n\n220\n00:10:41.910 --> 00:10:45.900\na special Exchange group to this to give\nExchange Server permission to manage this.\n\n221\n00:10:45.900 --> 00:10:52.329\nSo, I'm gonna hit Add, and I'm gonna\nadd in the Exchange Trusted Subsystem.\n\n222\n00:10:52.329 --> 00:10:54.825\nI'll just do a Check Name to make\nsure I typed it right there.\n\n223\n00:10:54.825 --> 00:10:55.775\nYou can browse and find it too.\n\n224\n00:10:55.775 --> 00:10:58.115\nBut it's called\nExchange Trusted Subsystem.\n\n225\n00:10:58.115 --> 00:11:01.043\nAnd that's what's gonna give Exchange\nthe rights to manage this object.\n\n226\n00:11:01.043 --> 00:11:03.072\nAnd I'll go go ahead and say OK to that.\n\n227\n00:11:04.172 --> 00:11:07.902\nAnd so now I've got that computer,\nthat virtual server created,\n\n228\n00:11:07.902 --> 00:11:11.372\nI've given Exchange permissions,\nand now I need to disable it.\n\n229\n00:11:11.372 --> 00:11:13.072\nI forget this step all the time,\n\n230\n00:11:13.072 --> 00:11:15.916\nwell I guess I remember it now because\nI've forgotten gotten it so many times.\n\n231\n00:11:15.916 --> 00:11:17.706\nThe wizard will fail if it's enabled,\n\n232\n00:11:17.706 --> 00:11:20.166\nbecause it assumes there's\na real computer attached to it.\n\n233\n00:11:20.166 --> 00:11:22.976\nBut if it's disabled, it knows that\nit's available to be taken over.\n\n234\n00:11:22.976 --> 00:11:26.276\nSo, I'm just gonna right click on that and\nchoose to disable it.\n\n235\n00:11:26.276 --> 00:11:27.846\nWe'll disable that account.\n\n236\n00:11:27.846 --> 00:11:29.726\nAnd so now I've got lab-mailbox and\n\n237\n00:11:29.726 --> 00:11:31.916\nit's got a little down arrow on it,\nit's disabled.\n\n238\n00:11:33.540 --> 00:11:37.420\nNow, remember, if you're in\n2012 you don't have to do this.\n\n239\n00:11:37.420 --> 00:11:40.850\nBut if you're on Windows Server 2008,\nthat's where you have to do this.\n\n240\n00:11:40.850 --> 00:11:45.053\nIf your domain controllers\nare Windows Server 2008 you've\n\n241\n00:11:45.053 --> 00:11:48.280\ngot to pre-stage the cluster object.\n\n242\n00:11:48.280 --> 00:11:50.370\nSo now that I'm pre-staged,\nI'm ready to go.\n\n243\n00:11:50.370 --> 00:11:54.060\nNow I can actually go in and\ncreate that database availability group.\n\n244\n00:11:54.060 --> 00:11:58.050\nSo here on my Exchange server,\nI'm just going to go down to Servers, and\n\n245\n00:11:58.050 --> 00:12:01.360\nDatabase Availability Groups,\nand I'm going to create one.\n\n246\n00:12:01.360 --> 00:12:04.260\nSo I'll hit the plus sign\nhere to create the group.\n\n247\n00:12:04.260 --> 00:12:06.360\nAnd when I create it,\nI need to give it a name and\n\n248\n00:12:06.360 --> 00:12:09.740\nthe name is what's going to become\nthat virtual server object.\n\n249\n00:12:09.740 --> 00:12:13.286\nSo if I haven't created that object yet,\nI can type whatever I want here.\n\n250\n00:12:13.286 --> 00:12:18.199\nBut if I've already pre-staged it, I've\ngotta make sure I type in the same name,\n\n251\n00:12:18.199 --> 00:12:20.270\nso I'm gonna type LAB-MAILBOX.\n\n252\n00:12:20.270 --> 00:12:21.880\nAnd it's gonna look to\nthe active directory for\n\n253\n00:12:21.880 --> 00:12:25.550\nthat object to try and find it, and\nif it's disabled, it'll use it.\n\n254\n00:12:25.550 --> 00:12:28.710\nIf it doesn't exist, it'll try and\ncreate it, which will work in 2012, but\n\n255\n00:12:28.710 --> 00:12:31.790\nwill fail in 2008.\n\n256\n00:12:31.790 --> 00:12:33.580\nAll right,\nthen we need to specify a witness server.\n\n257\n00:12:33.580 --> 00:12:35.770\nNow, what is a witness server?\n\n258\n00:12:35.770 --> 00:12:41.390\nWell when you have a cluster, what happens\nis you'll have one node that's active and\n\n259\n00:12:41.390 --> 00:12:43.470\nall the other nodes are in standby.\n\n260\n00:12:43.470 --> 00:12:46.510\nAnd the other nodes are sitting there and\nthey're waiting and they're saying hm.\n\n261\n00:12:46.510 --> 00:12:49.690\nLet me wait and see if the active\nguy fails, and then I'll take over.\n\n262\n00:12:49.690 --> 00:12:52.220\nWell, how do they know\nif the active guy fails?\n\n263\n00:12:52.220 --> 00:12:53.750\nThey can't see him anymore, right?\n\n264\n00:12:53.750 --> 00:12:55.590\nThey're sending these\nlittle heart beat messages.\n\n265\n00:12:55.590 --> 00:12:56.830\nThey're kinda like pings.\n\n266\n00:12:56.830 --> 00:12:59.890\nThese little communicas that go back and\nforth between the active server and\n\n267\n00:12:59.890 --> 00:13:01.310\nall the standbys.\n\n268\n00:13:01.310 --> 00:13:03.700\nAnd if those communicas\nstop communicating,\n\n269\n00:13:03.700 --> 00:13:07.130\nif it stops receiving them,\nwe assume the main server failed.\n\n270\n00:13:07.130 --> 00:13:09.520\nAnd then it's time to take over.\n\n271\n00:13:09.520 --> 00:13:13.440\nBut what is a reason why we might not\nbe able to see that other server?\n\n272\n00:13:13.440 --> 00:13:14.690\nIt could be the server failed, right?\n\n273\n00:13:14.690 --> 00:13:17.200\nIt could be that it actually failed,\nand yes, we need to take over.\n\n274\n00:13:17.200 --> 00:13:19.390\nBut it could be my problem.\n\n275\n00:13:19.390 --> 00:13:22.970\nIt could be, if I'm the standby node,\nright, so there's an active node and\n\n276\n00:13:22.970 --> 00:13:26.510\nI'm the standby node,\nit could be that my network card failed.\n\n277\n00:13:26.510 --> 00:13:30.540\nAnd I can't see the network and that's\nwhy I can't talk to the active one, so\n\n278\n00:13:30.540 --> 00:13:33.680\nI shouldn't go active because\nI'm the one with the problem.\n\n279\n00:13:33.680 --> 00:13:37.770\nSo we need some way to get a consistent\n\n280\n00:13:37.770 --> 00:13:40.570\nopinion of whether\nthe network is actually down.\n\n281\n00:13:40.570 --> 00:13:45.310\nIf you have an odd number of servers,\nso like if I have three servers, and\n\n282\n00:13:45.310 --> 00:13:48.930\nI think the main one went down,\nI can ask the third server.\n\n283\n00:13:48.930 --> 00:13:51.880\nI can say, hey,\ndoes the main one look down for you too?\n\n284\n00:13:51.880 --> 00:13:54.990\nAnd if the other one says oh yeah,\nhe's down, then you're both in agreement.\n\n285\n00:13:54.990 --> 00:13:56.570\nYou have what's called a quorum.\n\n286\n00:13:56.570 --> 00:13:58.470\nA quorum is when you\nbasically take a vote and\n\n287\n00:13:58.470 --> 00:14:01.400\nyou guys agree that yes\nthe main server is down.\n\n288\n00:14:01.400 --> 00:14:04.150\nAnd so, we can go ahead and\ntake action on that.\n\n289\n00:14:04.150 --> 00:14:05.810\nBut, if we reach out to\nthat other server and\n\n290\n00:14:05.810 --> 00:14:07.600\nsay hey is the main server down for\nyou to?\n\n291\n00:14:07.600 --> 00:14:11.180\nAnd the other server says no it's up,\nthen I know it's my problem and\n\n292\n00:14:11.180 --> 00:14:12.620\nI shouldn't go active.\n\n293\n00:14:12.620 --> 00:14:16.100\nWith an odd number of servers,\nthat works really well.\n\n294\n00:14:16.100 --> 00:14:18.860\nBut what if you have\nan even number of servers?\n\n295\n00:14:18.860 --> 00:14:20.570\nIf you only have two servers, and\n\n296\n00:14:20.570 --> 00:14:23.980\nthe main one looks like it failed,\nthere's nobody else for me to talk to.\n\n297\n00:14:23.980 --> 00:14:25.970\nI can't find out whether or\nnot that server is up.\n\n298\n00:14:25.970 --> 00:14:29.710\nAll right, if I have four servers,\nor six servers, or\n\n299\n00:14:29.710 --> 00:14:32.850\neight servers,\nthere's the possibility I could get a tie.\n\n300\n00:14:32.850 --> 00:14:34.920\nWith an odd number of servers\nthere's never a tie, right?\n\n301\n00:14:34.920 --> 00:14:37.020\nBut with an even number of\nservers you can have a tie.\n\n302\n00:14:37.020 --> 00:14:38.910\nSo we need something else.\n\n303\n00:14:38.910 --> 00:14:42.360\nSomething that can serve as that tie\nbreaker, or that I can vote against,\n\n304\n00:14:42.360 --> 00:14:45.320\neven if I don't have another Exchange\nserver out there to talk to.\n\n305\n00:14:45.320 --> 00:14:46.840\nAnd that's what a witness is.\n\n306\n00:14:46.840 --> 00:14:49.120\nSo a witness is that server\nthat'll act as a tie breaker.\n\n307\n00:14:49.120 --> 00:14:51.876\nNow It can be any server.\n\n308\n00:14:51.876 --> 00:14:54.134\nIt can actually be a workstation,\nbut you really shouldn't do that.\n\n309\n00:14:54.134 --> 00:14:56.934\n[LAUGH] It can be any server in\nyour environment that can share\n\n310\n00:14:56.934 --> 00:14:58.170\na folder, right?\n\n311\n00:14:58.170 --> 00:15:00.640\nAll the witness does is\nit holds a shared folder.\n\n312\n00:15:00.640 --> 00:15:02.710\nAnd those heartbeats that I mentioned,\n\n313\n00:15:02.710 --> 00:15:05.280\nthey're just these little timestamp files\nthat it rights to that heartbeat folder,\n\n314\n00:15:05.280 --> 00:15:07.425\nto the folder that's going\non this witness server.\n\n315\n00:15:07.425 --> 00:15:09.500\nAnd that witness serves as the tiebreaker.\n\n316\n00:15:09.500 --> 00:15:12.220\nNow, if you have an odd number of servers,\nthe witness gets ignored,\n\n317\n00:15:12.220 --> 00:15:13.960\nand it doesn't matter, right?\n\n318\n00:15:13.960 --> 00:15:17.100\nBut if you have an even number of servers,\nthat witness is really important, so\n\n319\n00:15:17.100 --> 00:15:19.260\nMicrosoft makes us put one in here,\nall right?\n\n320\n00:15:19.260 --> 00:15:21.850\nSo I need to specify who that\nwitness server is gonna be.\n\n321\n00:15:21.850 --> 00:15:26.050\nNow, it's really important that\nit not be a mailbox server, okay?\n\n322\n00:15:26.050 --> 00:15:29.380\nDo not specify another mailbox server\nthat might participate in the DAG.\n\n323\n00:15:29.380 --> 00:15:32.210\nIt's gotta be somebody outside of the DAG,\nall right?\n\n324\n00:15:32.210 --> 00:15:34.580\nSo it should be,\nit could be a client access server.\n\n325\n00:15:34.580 --> 00:15:37.200\nThat's usually what I do is just pick\na client access server and use it.\n\n326\n00:15:37.200 --> 00:15:38.870\nOr it could be a domain controller.\n\n327\n00:15:38.870 --> 00:15:40.700\nIt could be another\nserver on your network.\n\n328\n00:15:40.700 --> 00:15:42.470\nSo you can kinda pick whatever you want.\n\n329\n00:15:42.470 --> 00:15:48.147\nI've got another server sitting off here\nto the sidelines which is LAB-EXCHSERV03,\n\n330\n00:15:48.147 --> 00:15:49.670\nand I'll use that one.\n\n331\n00:15:49.670 --> 00:15:51.049\nThat's where I'm gonna put my witness.\n\n332\n00:15:51.049 --> 00:15:54.311\nAll right, now the witness really\nis just a shared folder, so\n\n333\n00:15:54.311 --> 00:15:56.709\nit gives me the option\nto type in a directory.\n\n334\n00:15:56.709 --> 00:15:57.489\nI'm not gonna do that.\n\n335\n00:15:57.489 --> 00:16:00.789\nI'm gonna leave it blank And if you\nleave it blank it just uses the default.\n\n336\n00:16:00.789 --> 00:16:04.700\nOn the C drive it'll create a folder,\nit's called, I always forget the name.\n\n337\n00:16:04.700 --> 00:16:06.730\nIt's like D-A-G something.\n\n338\n00:16:06.730 --> 00:16:08.470\nWell, we'll see it when it gets created.\n\n339\n00:16:08.470 --> 00:16:12.400\nIt's like D-A-G failover witness share or\nsomething like that.\n\n340\n00:16:12.400 --> 00:16:15.500\nBut it's a folder and\nit'll start writing timestamps to that.\n\n341\n00:16:15.500 --> 00:16:16.810\nAnd I'm cool with the default.\n\n342\n00:16:16.810 --> 00:16:18.290\nIt's not like high disk IO or\n\n343\n00:16:18.290 --> 00:16:20.790\nanything like that so we don't really\nhave to worry about it too much.\n\n344\n00:16:20.790 --> 00:16:23.950\nAll right, so I'm gonna have a virtual\nserver called Lab Dash Mailbox.\n\n345\n00:16:23.950 --> 00:16:27.300\nThe next thing they're gonna ask for\nis an IP address for that server.\n\n346\n00:16:27.300 --> 00:16:30.070\nIf people wanna see the virtual server,\nthey have to have an IP to connect to it,\n\n347\n00:16:30.070 --> 00:16:32.390\nso I need to give it an IP\naddress that's on my network.\n\n348\n00:16:32.390 --> 00:16:35.990\nNow, you can really pick\njust about any address, but\n\n349\n00:16:35.990 --> 00:16:40.930\nit needs to be an address that's\nreachable by every node in the cluster.\n\n350\n00:16:40.930 --> 00:16:45.770\nSo I'm gonna be adding Lab Exchange Server\n1 and Lab Exchange Server 2\n\n351\n00:16:45.770 --> 00:16:50.612\ninto this cluster,\nthey both have 192.168.0 addresses, so\n\n352\n00:16:50.612 --> 00:16:54.725\nI need to make sure that this\nshared IP is in that range, and so\n\n353\n00:16:54.725 --> 00:16:57.730\nI'll set this one to be, we'll do 222.\n\n354\n00:16:57.730 --> 00:17:01.614\nThis is what I forget, too, if you just\nhit Save, it'll actually blank out the IP,\n\n355\n00:17:01.614 --> 00:17:03.500\nand you won't end up with an IP address.\n\n356\n00:17:03.500 --> 00:17:06.130\nYou gotta make sure you actually hit\nthe plus sign to add it to this list,\n\n357\n00:17:06.130 --> 00:17:08.170\ncuz you could add more\nthan one IP if you wanted.\n\n358\n00:17:08.170 --> 00:17:11.300\nAll right I'm gonna go ahead and\nsave that, and\n\n359\n00:17:11.300 --> 00:17:13.490\nthat's gonna create the database\navailability group.\n\n360\n00:17:13.490 --> 00:17:15.580\nNow I hit an error on mine, right?\n\n361\n00:17:15.580 --> 00:17:17.360\nSo I get it was unable to create it,\n\n362\n00:17:17.360 --> 00:17:22.139\nunable to create the default witness\ndirectory on LAB-EXCHSERV03.\n\n363\n00:17:22.139 --> 00:17:23.950\nAll right, now why is that?\n\n364\n00:17:23.950 --> 00:17:28.350\nWell, the reason it failed, is that I\nforgot a step, it's kind of important.\n\n365\n00:17:28.350 --> 00:17:32.010\nI mentioned that LabExchangeServ03\nthat it has sitting on the sidelines,\n\n366\n00:17:32.010 --> 00:17:35.350\nif it was an Exchange Server,\nthis would have worked just fine.\n\n367\n00:17:35.350 --> 00:17:38.300\nBut I haven't installed Exchange\non it yet, you might have noticed\n\n368\n00:17:38.300 --> 00:17:41.330\nwhen I was back in my server list that\nI had Lab Exchange Server zero one and\n\n369\n00:17:41.330 --> 00:17:42.552\nzero two I didn't have zero three.\n\n370\n00:17:42.552 --> 00:17:45.600\nAll right and that's because\n03 I have an install exchange.\n\n371\n00:17:45.600 --> 00:17:48.740\nIt's just a regular server\nsitting right here.\n\n372\n00:17:48.740 --> 00:17:51.880\nSo here's that server,\nwhoops, which I just locked.\n\n373\n00:17:51.880 --> 00:17:55.040\nSo here's that server it's just sitting\nhere and it's not an Exchange Server.\n\n374\n00:17:55.040 --> 00:17:59.770\nAnd as a result Exchange doesn't have\npermission to set up the file share on it.\n\n375\n00:17:59.770 --> 00:18:01.690\nSo I need to make a quick\nchange to this server.\n\n376\n00:18:01.690 --> 00:18:05.270\nI'm gonna go up here into Tools and\nComputer Management.\n\n377\n00:18:05.270 --> 00:18:08.440\nI'm in the Server Manager, so\nI'll go to Tools and Computer Management.\n\n378\n00:18:08.440 --> 00:18:12.000\nI'll go to Local Users and\nGroups and Groups, and\n\n379\n00:18:12.000 --> 00:18:15.800\nI'm gonna take the local administrator's\ngroup on that server and\n\n380\n00:18:15.800 --> 00:18:19.930\nI'm gonna add in the Exchange\ntrusted subsystem.\n\n381\n00:18:19.930 --> 00:18:21.600\nYou guys might remember that one.\n\n382\n00:18:21.600 --> 00:18:23.210\nWhen you install Exchange,\n\n383\n00:18:23.210 --> 00:18:27.000\nit automatically adds this to the local\nadministrators' group of that server,\n\n384\n00:18:27.000 --> 00:18:28.930\nif I'd installed Exchange here,\nthat would have happened.\n\n385\n00:18:28.930 --> 00:18:31.870\nBut because this is just a member\nserver joined to the domain, and\n\n386\n00:18:31.870 --> 00:18:35.470\nit's not running Exchange, I need to\ngive Exchange permission to manage it.\n\n387\n00:18:35.470 --> 00:18:37.530\nSo I'm gonna go ahead and do that.\n\n388\n00:18:37.530 --> 00:18:39.650\nSo I'll go ahead and set that value.\n\n389\n00:18:39.650 --> 00:18:42.810\nSo now Exchange has permission\nto manage the server and\n\n390\n00:18:42.810 --> 00:18:47.230\nif I go back to my wizard here,\nI can try this again and I'll hit Save.\n\n391\n00:18:47.230 --> 00:18:49.910\nAnd this time it should be able\nto reach out to that server and\n\n392\n00:18:49.910 --> 00:18:51.030\ncreate that witness folder.\n\n393\n00:18:51.030 --> 00:18:52.930\nAnd there we go, I can see that it did.\n\n394\n00:18:52.930 --> 00:18:53.930\nI can go verify, right?\n\n395\n00:18:53.930 --> 00:18:56.010\nIf I jump over to that server and\n\n396\n00:18:56.010 --> 00:19:00.490\nI browse to it's C: Drive,\nthere it is, DAG file share witness.\n\n397\n00:19:00.490 --> 00:19:01.810\nThat's the folder that it just made.\n\n398\n00:19:01.810 --> 00:19:03.200\nAnd it's probably empty.\n\n399\n00:19:03.200 --> 00:19:04.630\nYeah it's empty right now, and\n\n400\n00:19:04.630 --> 00:19:07.940\nthat's because I haven't added\nany servers to the DAG yet.\n\n401\n00:19:07.940 --> 00:19:11.070\nThe DAG has no member servers.\n\n402\n00:19:11.070 --> 00:19:13.750\nSo now I just need to add\nthe servers to it, okay.\n\n403\n00:19:13.750 --> 00:19:16.900\nSo you can choose the DAG, and you've got\na button up here with a little gear on it,\n\n404\n00:19:16.900 --> 00:19:19.860\nand that's what's gonna let\nus manage the DAG membership.\n\n405\n00:19:19.860 --> 00:19:23.300\nHere's where you can add servers\nto the availability group.\n\n406\n00:19:23.300 --> 00:19:25.930\nSo I'm gonna choose that, and\nI'm just gonna add in my servers.\n\n407\n00:19:25.930 --> 00:19:30.930\nNow, In real life land, I'd pick all\nmy servers at once and add them in, but\n\n408\n00:19:30.930 --> 00:19:34.960\nI'm in some virtual machines here, and\nthis process can be a little intensive, so\n\n409\n00:19:34.960 --> 00:19:35.880\nI'm going to do them one at a time.\n\n410\n00:19:35.880 --> 00:19:39.380\nAnd the reason it's intensive,\nis when I add this server, so\n\n411\n00:19:39.380 --> 00:19:44.360\nI'm adding Lab Exchange Server 01, when I\nadd that server, it's going to reach out\n\n412\n00:19:44.360 --> 00:19:49.800\nto the server and it's going to install\nthe failover cluster feature, right?\n\n413\n00:19:49.800 --> 00:19:51.510\nSo it's got to install that\nfeature on the server,\n\n414\n00:19:51.510 --> 00:19:54.410\nit's got to do a little bit of work\nthere to get that in place, and\n\n415\n00:19:54.410 --> 00:19:57.610\nonce it's done,\nthat system will join the cluster.\n\n416\n00:19:57.610 --> 00:19:59.500\nAlright so I got an error here,\nand if I take a look at it,\n\n417\n00:19:59.500 --> 00:20:00.480\nlet's see what it's telling me.\n\n418\n00:20:00.480 --> 00:20:04.250\nIt's on the create cluster errors may\nresult from incorrectly configured static\n\n419\n00:20:04.250 --> 00:20:07.590\naddresses And then it says\nthe computer account, lab-mailbox,\n\n420\n00:20:07.590 --> 00:20:10.250\ncould not be validated, access was denied.\n\n421\n00:20:10.250 --> 00:20:14.800\nNow, that's an odd error to get, because\nwe added the Exchange trusted subsystem to\n\n422\n00:20:14.800 --> 00:20:17.265\nthat account, but you know what,\nI forgot something.\n\n423\n00:20:17.265 --> 00:20:20.260\nWe We added the account, but didn't\nactually grant it any permissions, and\n\n424\n00:20:20.260 --> 00:20:21.650\nthat means that it got read-only.\n\n425\n00:20:21.650 --> 00:20:24.050\nSo I need to go and\nfix the Active Directory permissions and\n\n426\n00:20:24.050 --> 00:20:25.080\nthat'll take care of this error.\n\n427\n00:20:25.080 --> 00:20:27.480\nSo let me just jump back over to my AD and\n\n428\n00:20:27.480 --> 00:20:30.180\nI'm gonna take that lab dash mailbox\nvirtual server that we made.\n\n429\n00:20:30.180 --> 00:20:31.880\nI'll pull up its properties.\n\n430\n00:20:31.880 --> 00:20:32.980\nWe'll go under security.\n\n431\n00:20:32.980 --> 00:20:36.080\nAnd we'll find that exchange\ntrusted sub-system.\n\n432\n00:20:36.080 --> 00:20:37.260\nIt'll be in here.\n\n433\n00:20:37.260 --> 00:20:38.400\nThere it is.\n\n434\n00:20:38.400 --> 00:20:41.280\nAnd notice under Exchange trusted\nsubsystem I granted access, but\n\n435\n00:20:41.280 --> 00:20:42.960\nit's only got read only.\n\n436\n00:20:42.960 --> 00:20:45.070\nI need to give it full\ncontrol of this object.\n\n437\n00:20:45.070 --> 00:20:47.250\nIt has to be able to take\ncontrol of this object and\n\n438\n00:20:47.250 --> 00:20:50.280\nchange things like its password, so\nI'm gonna grant that permission,\n\n439\n00:20:50.280 --> 00:20:52.930\nand that should take care\nof our error right there.\n\n440\n00:20:52.930 --> 00:20:56.030\nAll right, so while that's running, and\ninstead of sitting here waiting and\n\n441\n00:20:56.030 --> 00:20:57.400\nwatching the little menu bars here.\n\n442\n00:20:57.400 --> 00:21:00.620\nWe'll let that churn along, and\nI'll add that second server into the DAG.\n\n443\n00:21:00.620 --> 00:21:03.540\nWe still have more work to do,\nwe gotta add the databases in there, and\n\n444\n00:21:03.540 --> 00:21:04.750\nbuild that redundancy.\n\n445\n00:21:04.750 --> 00:21:07.890\nBut I am short on time on this episode so\nwhat we'll do is we'll go ahead and\n\n446\n00:21:07.890 --> 00:21:10.850\nwrap it up here and\nthen stay tuned for part two.\n\n447\n00:21:10.850 --> 00:21:14.770\nWith part two both our servers will be\nin that DAG and now we just need to\n\n448\n00:21:14.770 --> 00:21:19.370\nmove our database in there, verify\nreplication and test some failovers.\n\n449\n00:21:19.370 --> 00:21:23.440\nThere's still a lot more to go, but\nin this episode, at least we got a chance\n\n450\n00:21:23.440 --> 00:21:28.290\nto see how to do our pre-staging and some\nof the pre-work to get ready for the DAG.\n\n451\n00:21:28.290 --> 00:21:31.950\nWe saw how to build the DAG and get it\nin place and start to add servers to it,\n\n452\n00:21:31.950 --> 00:21:35.780\nall the initial steps of setting up\nthat database availability group.\n\n453\n00:21:35.780 --> 00:21:37.690\nAll right,\nwell I hope you guys enjoyed the episode.\n\n454\n00:21:37.690 --> 00:21:39.370\nStay tuned for part two.\n\n455\n00:21:39.370 --> 00:21:43.900\nBut for right now signing off for ITProTV,\nI'm Don Pezet, and I'll see you next time.\n\n456\n00:21:43.900 --> 00:21:49.300\n[MUSIC]\n\n",
          "vimeoId": "136336181"
        },
        {
          "description": "This episode is the exciting conclusion to Database Availability Groups. Now that the servers are configured, Don continues on with the configuration to create multiple database copies. He ends the episode by demonstrating how the database can failover during a failure.",
          "length": "1589",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups_pt2-081415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups_pt2-081415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-1-database_availability_groups_pt2-081415-1-sm.jpg",
          "title": "Database Availability Groups Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.139\n[MUSIC]\n\n2\n00:00:10.139 --> 00:00:13.001\nAll right, good morning,\ngood afternoon, good evening, and\n\n3\n00:00:13.001 --> 00:00:15.021\nwelcome back to another\nepisode of ITproTV.\n\n4\n00:00:15.021 --> 00:00:16.890\nI'm your host, Don Pezet.\n\n5\n00:00:16.890 --> 00:00:19.852\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:19.852 --> 00:00:24.420\nNow this is the exciting conclusion\nto our two part series on database\n\n7\n00:00:24.420 --> 00:00:25.530\navailability groups.\n\n8\n00:00:25.530 --> 00:00:28.160\nIf you haven't watched the other episode,\nyou definitely wanna start there,\n\n9\n00:00:28.160 --> 00:00:31.990\nbecause in that episode, we saw how to\ncreate a database availability group, and\n\n10\n00:00:31.990 --> 00:00:34.270\nsome of the prerequisites\nwe had to take care of.\n\n11\n00:00:34.270 --> 00:00:37.430\nAnd then we took two servers and\nwe joined them into that group.\n\n12\n00:00:37.430 --> 00:00:41.550\nNow, when we did that, it kicked off\na process where it was enabling those\n\n13\n00:00:41.550 --> 00:00:45.970\nservers in the DAG, which is basically\ninstalling the fail over cluster roll and\n\n14\n00:00:45.970 --> 00:00:48.370\nsetting them up,\nattaching them to the file share witness.\n\n15\n00:00:48.370 --> 00:00:49.800\nBut graphically,\n\n16\n00:00:49.800 --> 00:00:52.550\nit's just watching a little blue\nbar crawling across the screen.\n\n17\n00:00:52.550 --> 00:00:54.210\nSo we wrap that episode up.\n\n18\n00:00:54.210 --> 00:00:56.400\nAnd we're picking right\nback up where we left off.\n\n19\n00:00:56.400 --> 00:00:58.270\nSo in the interim, those little blue bars?\n\n20\n00:00:58.270 --> 00:01:00.410\nThey made it to the other\nside of the screen and so\n\n21\n00:01:00.410 --> 00:01:01.880\nthat's where we're at right now.\n\n22\n00:01:01.880 --> 00:01:05.030\nOur two servers should now be\nsuccessfully in our DAG, but\n\n23\n00:01:05.030 --> 00:01:08.050\nlet's verify that just to make\nsure it did complete successfully.\n\n24\n00:01:08.050 --> 00:01:11.330\nSo, let's take a look at my computer here\nand if I go in my exchange admin center\n\n25\n00:01:11.330 --> 00:01:15.470\nand I jump down to servers and I see my\nservers there, they're all happy, and\n\n26\n00:01:15.470 --> 00:01:19.200\nthen if I jump over to my database\navailability groups, what I'm hoping to\n\n27\n00:01:19.200 --> 00:01:24.390\nsee is when I look at my DAG,\nI should now have the two servers listed.\n\n28\n00:01:24.390 --> 00:01:27.290\nOr if you just added one and\nyou're kinda waiting on the other one,\n\n29\n00:01:27.290 --> 00:01:30.260\nthen you'll just see the one, but\nI can see I've got Exchange Server 1 and\n\n30\n00:01:30.260 --> 00:01:32.320\nExchange Server 2 listed right there.\n\n31\n00:01:32.320 --> 00:01:34.300\nSo I've got them, they're in place.\n\n32\n00:01:34.300 --> 00:01:37.810\nI can see the witness server is listed\nalso there's Lab Exchange Server 03.\n\n33\n00:01:37.810 --> 00:01:42.600\nI've got a database available group,\nso we're ready to rock right?\n\n34\n00:01:42.600 --> 00:01:46.640\nNow I have a DAG, but\nthe DAG is currently empty.\n\n35\n00:01:46.640 --> 00:01:49.430\nIf I click on it, you'll see some\ninformation over here that shows\n\n36\n00:01:49.430 --> 00:01:54.160\nthe member servers, the witness server,\ninformation about the DAG network.\n\n37\n00:01:54.160 --> 00:01:57.960\nIt's there, I've got a DAG,\nbut nobody's using it.\n\n38\n00:01:57.960 --> 00:02:01.886\nThe next step is to actually take\na database and attach it to the DAG.\n\n39\n00:02:01.886 --> 00:02:07.070\nNow, technically [LAUGH] technically,\nany mailbox database that resides\n\n40\n00:02:07.070 --> 00:02:11.770\non one of these two servers is technically\npart of the DAG, but it's not redundant.\n\n41\n00:02:11.770 --> 00:02:14.290\nIt's only on that one server,\nand let me show you what I mean.\n\n42\n00:02:14.290 --> 00:02:18.110\nIf I go to databases,\nI've got my sales database, and\n\n43\n00:02:18.110 --> 00:02:23.150\nsales database resides on\nthe Lab Exchange Server 01.\n\n44\n00:02:23.150 --> 00:02:25.800\nAnd Lab Exchange Server 01\none is part of the DAG, so\n\n45\n00:02:25.800 --> 00:02:28.820\ntechnically this database\nis part of the DAG.\n\n46\n00:02:28.820 --> 00:02:33.070\nBut if I look at this servers with copy,\nthere's only server.\n\n47\n00:02:33.070 --> 00:02:35.500\nThere's only a copy of it\non Lab Exchange Server 01.\n\n48\n00:02:35.500 --> 00:02:38.760\nSo, just having the database\non the server in a DAG,\n\n49\n00:02:38.760 --> 00:02:42.780\nI've got to add a copy before\nits actually redundant.\n\n50\n00:02:42.780 --> 00:02:46.090\nAnd that's my next step, is I'm going\nto take a database like this one and\n\n51\n00:02:46.090 --> 00:02:49.930\nI'll just highlight it,\nI'll hit the ellipsis button up here and\n\n52\n00:02:49.930 --> 00:02:52.430\nyou'll have an add database copy option.\n\n53\n00:02:52.430 --> 00:02:52.970\nAll right?\n\n54\n00:02:52.970 --> 00:02:57.010\nNow add database copy doesn't\nwork until you have a DAG, right?\n\n55\n00:02:57.010 --> 00:03:00.160\nSo you gotta create the DAG first\nlike we did in the last episode,\n\n56\n00:03:00.160 --> 00:03:03.030\nnow we add the database to\nit now the cool part here\n\n57\n00:03:03.030 --> 00:03:05.700\nis we can do this while our\nusers are in the system.\n\n58\n00:03:05.700 --> 00:03:09.350\nIt doesn't effect them,\nit's making a clone of the database.\n\n59\n00:03:09.350 --> 00:03:12.050\nSo what it actually does is in the\nbackground it's gonna run volume shadow\n\n60\n00:03:12.050 --> 00:03:15.560\ncopy, it's gonna take a snapshot of\nthe database as it is right now and\n\n61\n00:03:15.560 --> 00:03:17.560\nit's gonna send that\nover to the other node.\n\n62\n00:03:17.560 --> 00:03:20.640\nNow if that database\nis a terabyte in size,\n\n63\n00:03:20.640 --> 00:03:25.290\nit's gonna copy a terabyte of data across\nthe network, it's gonna take a while.\n\n64\n00:03:25.290 --> 00:03:27.440\nIf it's 50 megs in size,\nit's gonna happen really fast, so\n\n65\n00:03:27.440 --> 00:03:30.790\nbe aware that building up this\ndatabase while take a while.\n\n66\n00:03:30.790 --> 00:03:32.740\nOnce it sends that snap chat over,\n\n67\n00:03:32.740 --> 00:03:36.870\nfrom then on,\nit's just copying transaction log files.\n\n68\n00:03:36.870 --> 00:03:38.850\nRemember that when we look\nat the database, actually,\n\n69\n00:03:38.850 --> 00:03:42.250\nlet me get this one copying first before\nI go off on transaction log files.\n\n70\n00:03:42.250 --> 00:03:45.630\nSo I'm gonna take that Sales Database and\nI'll hit that three dots and I'll hit\n\n71\n00:03:45.630 --> 00:03:50.630\nAdd Database Copy And it's gonna come up,\nand I can see here's my sales database.\n\n72\n00:03:50.630 --> 00:03:56.050\nIt currently has a copy on Exchange Server\n01, and now I can specify another server.\n\n73\n00:03:56.050 --> 00:04:00.240\nAnd if I browse,\nI'll see the other servers in that DAG.\n\n74\n00:04:01.270 --> 00:04:04.750\nAnd I can see the DAG name over here,\nLAB-MAILBOX, right?\n\n75\n00:04:04.750 --> 00:04:07.790\nCuz you might have more than one DAG,\nthat is possible.\n\n76\n00:04:07.790 --> 00:04:09.890\nSo I'll go ahead and\nchoose this one and hit OK.\n\n77\n00:04:09.890 --> 00:04:13.260\nAnd there is another value we need to\nspecify here which is the Activation\n\n78\n00:04:13.260 --> 00:04:14.890\npreference number.\n\n79\n00:04:14.890 --> 00:04:16.700\nIf we have a two-node cluster,\n\n80\n00:04:17.740 --> 00:04:21.550\nI probably have one node that I\nwant to hold the database normally.\n\n81\n00:04:21.550 --> 00:04:23.690\nAnd another node that acts as the backup.\n\n82\n00:04:23.690 --> 00:04:26.830\nMaybe I have better hardware on one and\nweaker hardware on the other, or\n\n83\n00:04:26.830 --> 00:04:29.270\nmaybe they're identical and I just have\na preference of one server, right?\n\n84\n00:04:29.270 --> 00:04:31.620\nI always want it to go to\nserver one if I can, right?\n\n85\n00:04:31.620 --> 00:04:33.670\nBecause then I know it's there and\nserver two's the backup.\n\n86\n00:04:33.670 --> 00:04:35.280\nI just wanna remember that.\n\n87\n00:04:35.280 --> 00:04:38.140\nI've worked in cluster environments\nwhere we didn't have preferences and\n\n88\n00:04:38.140 --> 00:04:40.960\nit was kinda, [LAUGH] it was neat but\nfrustrating at the same time.\n\n89\n00:04:40.960 --> 00:04:43.900\nSo I'll give you guys\na real world example.\n\n90\n00:04:43.900 --> 00:04:47.870\nI worked on a 16 node cluster for\nExchange.\n\n91\n00:04:47.870 --> 00:04:51.320\nAnd it was frustrating because\nnobody set preferences and so\n\n92\n00:04:51.320 --> 00:04:54.380\nwhen you came in in the morning if\nyou wanted to work on a server.\n\n93\n00:04:54.380 --> 00:04:58.040\nYou could connect right to that server on\nthe network if it was no big deal, but\n\n94\n00:04:58.040 --> 00:05:02.280\nif you wanted to find out where the actual\ninstance was running at that moment,\n\n95\n00:05:02.280 --> 00:05:04.670\nit could have been any of\nthe 16 cluster nodes, so\n\n96\n00:05:04.670 --> 00:05:06.780\nyou had to go into the cluster manager,\nand you had to look and\n\n97\n00:05:06.780 --> 00:05:08.940\nsee where that resource was attached,\nand you had to find it.\n\n98\n00:05:08.940 --> 00:05:11.360\nIt was like playing find\nthe server every morning.\n\n99\n00:05:11.360 --> 00:05:14.330\nSo if you set a preference\nlike this you know\n\n100\n00:05:14.330 --> 00:05:16.750\nwhat physical server\nit's gonna be running on.\n\n101\n00:05:16.750 --> 00:05:19.700\nThe first server you make automatically\ngets a preference of one.\n\n102\n00:05:19.700 --> 00:05:22.890\nAnd then your additional servers\nyou can go through and change them.\n\n103\n00:05:22.890 --> 00:05:26.740\nIf I pick one for this new server then\nthe other server will become two and\n\n104\n00:05:26.740 --> 00:05:29.640\nyou'll only see numbers for\nthe amount of nodes you have.\n\n105\n00:05:29.640 --> 00:05:31.870\nI only have two nodes so\nI see one and two.\n\n106\n00:05:31.870 --> 00:05:35.130\nIf you have 16 nodes,\nyou'll see 1 through 16, you can't have\n\n107\n00:05:35.130 --> 00:05:38.300\ntwo servers with the same preference and\nso you basically pick a number.\n\n108\n00:05:38.300 --> 00:05:40.800\nI'm gonna make this guy number two,\nhe'll be the backup.\n\n109\n00:05:42.030 --> 00:05:46.620\nIf I choose number one, it's gonna\ndo all the replication first, and\n\n110\n00:05:46.620 --> 00:05:49.710\nonly when the replication is done will\nit then fail over to number two and\n\n111\n00:05:49.710 --> 00:05:51.739\nthat one will become active\nas part of this process.\n\n112\n00:05:53.430 --> 00:05:56.240\nAnd there's a few other neat\noptions we can specify in here.\n\n113\n00:05:56.240 --> 00:06:00.710\nIf you go to more options down at the\nbottom see how I can set replay lag time?\n\n114\n00:06:00.710 --> 00:06:06.570\nRight, this we can use to set up a delay\nbetween our main database and the backup.\n\n115\n00:06:06.570 --> 00:06:08.440\nNow why would I want that?\n\n116\n00:06:08.440 --> 00:06:09.510\nNormally we don't want a delay.\n\n117\n00:06:09.510 --> 00:06:12.180\nIf I have a failure, I want to be\nable to jump over that unload to have\n\n118\n00:06:12.180 --> 00:06:15.140\nall of my data right up to\nthe point of failure, okay?\n\n119\n00:06:15.140 --> 00:06:17.140\nWell that's true, we normally want that.\n\n120\n00:06:17.140 --> 00:06:19.680\nBut there's times when we don't want that,\n\n121\n00:06:19.680 --> 00:06:22.440\nwe want to be able to go back\nin time a little bit, all right?\n\n122\n00:06:22.440 --> 00:06:24.280\nNow I can give you\na great example of this.\n\n123\n00:06:24.280 --> 00:06:26.710\nBack in, it was probably in 2000,\nit was 15 years ago.\n\n124\n00:06:26.710 --> 00:06:30.300\nThere was the Anna Kournikova virus,\n\n125\n00:06:30.300 --> 00:06:35.270\nI think it was actually called Code Red,\nthat propagated out through email.\n\n126\n00:06:35.270 --> 00:06:38.040\nAnd let's say that your system\ngot hit by that, and for\n\n127\n00:06:38.040 --> 00:06:41.190\nwhatever reason, your malware or\nvirus protection didn't catch it and so\n\n128\n00:06:41.190 --> 00:06:45.250\nnow the mailboxes on your server\nare just riddled with viruses, okay?\n\n129\n00:06:45.250 --> 00:06:48.910\nWell, you could go and restore\na backup from the night before, and\n\n130\n00:06:48.910 --> 00:06:54.260\nyou might lose some email, or\nif you had a lagged copy of your database,\n\n131\n00:06:54.260 --> 00:06:57.810\nif you had a live backup that was just\nan hour behind, or four hours behind,\n\n132\n00:06:57.810 --> 00:07:01.860\nyou could just flip over to it, and\nnow all those virus emails are gone.\n\n133\n00:07:01.860 --> 00:07:03.820\nYou flip over to the new one\nthat doesn't have them and\n\n134\n00:07:03.820 --> 00:07:06.290\nobviously you take precautions to\nmake sure you don't get it again.\n\n135\n00:07:06.290 --> 00:07:10.070\nSo there are times where you\nmight wanna delay on that copy.\n\n136\n00:07:10.070 --> 00:07:15.280\nWell, if I could have a three-node\ncluster, where nodes one and\n\n137\n00:07:15.280 --> 00:07:19.800\ntwo are all in real time and node three\nhas a delay, when I pick this delay,\n\n138\n00:07:19.800 --> 00:07:23.370\nthis is just the delay for the server that\nI'm adding right now, so you can actually\n\n139\n00:07:23.370 --> 00:07:26.080\nmix and match this a little bit,\ncreate some interesting things.\n\n140\n00:07:26.080 --> 00:07:29.640\nBecause each server is maintaining\ntheir own copy of the data base,\n\n141\n00:07:29.640 --> 00:07:31.900\nwe can customize that setting,\nits pretty neat.\n\n142\n00:07:31.900 --> 00:07:33.640\nNow, I'm not gonna do a lag time on mine.\n\n143\n00:07:33.640 --> 00:07:36.630\nI want mine to be real time if one fails,\nI'll jump to the other.\n\n144\n00:07:36.630 --> 00:07:40.150\nIf I get blown out with a virus here,\nI'll go to my back up tapes and\n\n145\n00:07:40.150 --> 00:07:40.810\nrestore from there.\n\n146\n00:07:40.810 --> 00:07:42.590\nI'll sort it out.\n\n147\n00:07:42.590 --> 00:07:46.220\nAnd we'll see in the restore episodes\nwhere you can actually start to play\n\n148\n00:07:46.220 --> 00:07:49.840\nforward your transaction logs and stop\nat a certain point in time if you want.\n\n149\n00:07:49.840 --> 00:07:53.140\nSo you can get that same effect even\nwithout doing a lag copy of your database.\n\n150\n00:07:53.140 --> 00:07:56.800\nAll right, so\nI'm going to go ahead and save that.\n\n151\n00:07:56.800 --> 00:07:59.889\nAnd what it's gonna do, it's gonna start\na sync operation in the background and\n\n152\n00:07:59.889 --> 00:08:01.078\nthat's gonna start running.\n\n153\n00:08:01.078 --> 00:08:04.846\nBut while it's doing its thing I\nwanna show you guys real quick how\n\n154\n00:08:04.846 --> 00:08:06.090\nthe lag copies work.\n\n155\n00:08:06.090 --> 00:08:07.653\nIf I browse to my database, so\n\n156\n00:08:07.653 --> 00:08:11.290\nI'm just gonna browse on the hard\ndrive where my database is stored.\n\n157\n00:08:12.770 --> 00:08:17.780\nEach database has a main database file,\nsomething.edb.\n\n158\n00:08:17.780 --> 00:08:21.940\nSo if I go into Sales,\nI'll find sales.edb right here,\n\n159\n00:08:21.940 --> 00:08:25.580\nbut as we write data to the databases,\nwe start to make changes.\n\n160\n00:08:25.580 --> 00:08:29.740\nThe changes are all being written\nto these transaction logs,\n\n161\n00:08:29.740 --> 00:08:32.990\nthese guys right here, this\nE0100000000001, all the way through 9, and\n\n162\n00:08:32.990 --> 00:08:35.070\nthat's gonna keep going up, so\nI probably have some more up here.\n\n163\n00:08:35.070 --> 00:08:35.790\nYeah.\n\n164\n00:08:35.790 --> 00:08:37.010\nNo, those are my reserves.\n\n165\n00:08:37.010 --> 00:08:40.010\nEventually, we'll get more,\nand it'll start to climb up.\n\n166\n00:08:40.010 --> 00:08:42.080\nBut those are where the changes are going.\n\n167\n00:08:42.080 --> 00:08:44.930\nSo once the initial database\nreplication is done,\n\n168\n00:08:44.930 --> 00:08:47.040\nthis is what it's copying\nbetween the servers.\n\n169\n00:08:47.040 --> 00:08:49.970\nSo when new email comes\nin on the first server,\n\n170\n00:08:49.970 --> 00:08:52.460\nit then just takes that transaction log,\nsends it to the other server.\n\n171\n00:08:52.460 --> 00:08:54.510\nAnd now the other server\nhas those transactions,\n\n172\n00:08:54.510 --> 00:08:56.740\nit writes it to its own database,\nand now it's up to date.\n\n173\n00:08:56.740 --> 00:09:00.430\nAnd that's an ongoing thing that's\ngonna keep happening in the background\n\n174\n00:09:00.430 --> 00:09:01.580\nas our system runs.\n\n175\n00:09:01.580 --> 00:09:03.590\nSo that's what it's setting up.\n\n176\n00:09:03.590 --> 00:09:07.577\nBut the initial database copy, this,\nit's doing a volume shadow copy of\n\n177\n00:09:07.577 --> 00:09:10.470\nthe database,\nthen cloning it to the other side and so\n\n178\n00:09:10.470 --> 00:09:13.131\nthis is the file that's\ngonna take the longest.\n\n179\n00:09:13.131 --> 00:09:14.790\nMine's only 250 megs.\n\n180\n00:09:14.790 --> 00:09:16.180\nNot gonna take long at all.\n\n181\n00:09:16.180 --> 00:09:19.730\nBut if yours is a terabyte,\nit might take a day, who knows,\n\n182\n00:09:19.730 --> 00:09:23.170\ndepending on how slow your network\nis to copy to the other side.\n\n183\n00:09:23.170 --> 00:09:25.374\nThen the transaction log files copy and\nit rolls them forward.\n\n184\n00:09:27.672 --> 00:09:29.770\nAll right, it looks like it's\ncompleted my operation there.\n\n185\n00:09:29.770 --> 00:09:31.255\nI'm gonna go ahead and close that.\n\n186\n00:09:31.255 --> 00:09:33.538\nAnd now when I take\na look at my databases,\n\n187\n00:09:33.538 --> 00:09:37.326\nsee how the sales database shows up and\nit says servers with copies and\n\n188\n00:09:37.326 --> 00:09:39.890\nnow there's more than\none server in the list.\n\n189\n00:09:39.890 --> 00:09:43.140\nIt's kinda hard to see because of\nthe way these columns are lined up.\n\n190\n00:09:43.140 --> 00:09:45.340\nBut if we expand this out,\nyou can see them.\n\n191\n00:09:45.340 --> 00:09:48.130\nOr you can see them over\nhere in my details pane\n\n192\n00:09:48.130 --> 00:09:51.070\nthat it's got two servers in place.\n\n193\n00:09:51.070 --> 00:09:54.220\nNow when we start to look at these guys,\nmost of our databases,\n\n194\n00:09:54.220 --> 00:09:55.890\nwe've only got one copy of.\n\n195\n00:09:55.890 --> 00:10:01.320\nBut this one I can see LAB-EXCHSERV01,\nLAB-EXCHSERV02 right there.\n\n196\n00:10:01.320 --> 00:10:03.370\nSo the two servers have the copies and\n\n197\n00:10:03.370 --> 00:10:06.230\nI can see down here that it is active and\nmounted.\n\n198\n00:10:06.230 --> 00:10:08.090\nAnd this is the one we really\nwant to pay attention to.\n\n199\n00:10:08.090 --> 00:10:10.550\nThis right here, copy queue length.\n\n200\n00:10:10.550 --> 00:10:15.560\nThe copy queue, those are changes that are\nwaiting to be applied on the other server.\n\n201\n00:10:15.560 --> 00:10:19.460\nAll right, if you see a big number there\nin your copy queue, that's a problem.\n\n202\n00:10:19.460 --> 00:10:22.770\nThat means the other side is\nnot up to date, all right?\n\n203\n00:10:22.770 --> 00:10:26.960\nYou should always see zero or\na really low number, one, five, ten,\n\n204\n00:10:26.960 --> 00:10:27.990\nsomething like that right?\n\n205\n00:10:27.990 --> 00:10:30.490\nWhen your server gets really busy,\nthere's always gonna be a queue, but\n\n206\n00:10:30.490 --> 00:10:32.280\nit shouldn't be very large, right?\n\n207\n00:10:32.280 --> 00:10:33.380\nIn my case, it's a zero.\n\n208\n00:10:33.380 --> 00:10:34.855\nThat's exactly what we want.\n\n209\n00:10:34.855 --> 00:10:38.735\nContent index state is healthy,\nwe're good, right?\n\n210\n00:10:38.735 --> 00:10:42.198\nAnd this is LAB-EXCHSERV01,\nif I keep scrolling down,\n\n211\n00:10:42.198 --> 00:10:44.839\nI'll see LAB-EXCHSERV02, same thing.\n\n212\n00:10:44.839 --> 00:10:49.393\nAnd on this one, the copy queue length,\nof zero, it's the passive server and\n\n213\n00:10:49.393 --> 00:10:53.684\nit's currently healthy, and\nI've got a content index state of failed.\n\n214\n00:10:53.684 --> 00:10:54.745\nNow, what does that mean?\n\n215\n00:10:54.745 --> 00:10:58.510\nWell, it just got this database,\nand so in the background,\n\n216\n00:10:58.510 --> 00:11:01.100\nthe index service is\nhaving to run to index it.\n\n217\n00:11:01.100 --> 00:11:04.620\nWe've got an index here on our server,\nit's building its own over there.\n\n218\n00:11:04.620 --> 00:11:07.620\nAnd you might ask yourself,\nwhy not just copy the index over?\n\n219\n00:11:07.620 --> 00:11:11.250\nAnd the index, it actually has pointers\nthat reference where data is stored on\n\n220\n00:11:11.250 --> 00:11:13.980\nthe hard drive, and so\nit's different for every server.\n\n221\n00:11:13.980 --> 00:11:17.110\nWe can't just copy the index, so\nit has to rebuilt on the other side.\n\n222\n00:11:17.110 --> 00:11:20.340\nI expect it to be failed for\nawhile, right.\n\n223\n00:11:20.340 --> 00:11:23.180\nThe larger your database is, the longer\nit'll take to rebuild that index.\n\n224\n00:11:23.180 --> 00:11:26.030\nAnd I'm not worried about that\nbecause it's passive right now.\n\n225\n00:11:26.030 --> 00:11:29.510\nRight, it's not the active server,\nso nobody is using that index.\n\n226\n00:11:29.510 --> 00:11:30.600\nI've got time.\n\n227\n00:11:30.600 --> 00:11:34.340\nAnd then once the index is rebuilt,\nevery time it applies transaction logs,\n\n228\n00:11:34.340 --> 00:11:36.250\nit's going to be updating that index.\n\n229\n00:11:36.250 --> 00:11:38.470\nAnd so it'll stay nice and healthy, and\n\n230\n00:11:38.470 --> 00:11:40.730\nwe've got a good database\ncopy right there.\n\n231\n00:11:40.730 --> 00:11:45.673\nAll right, now notice when we look\nat EXCHSERV01 that it shows it's up,\n\n232\n00:11:45.673 --> 00:11:49.920\nthat it's active,\nthat it's mounted, and that's it.\n\n233\n00:11:49.920 --> 00:11:52.510\nBut on EXCHSERV02,\nI have a few extra options, right?\n\n234\n00:11:52.510 --> 00:11:56.650\nIf we look down here,\nlet's see I can make that bigger or,\n\n235\n00:11:56.650 --> 00:11:57.800\noop, I'm making it smaller.\n\n236\n00:11:57.800 --> 00:11:59.695\nThat's exactly what I didn't want to do.\n\n237\n00:11:59.695 --> 00:12:04.250\n[LAUGH] I was attempting to make it\na little bit larger so we could see.\n\n238\n00:12:05.300 --> 00:12:09.129\nWell now that's going to be an all\nnew record for largeness, so\n\n239\n00:12:09.129 --> 00:12:12.741\nyou can see down there that we\ngot a couple of extra options,\n\n240\n00:12:12.741 --> 00:12:16.440\nif I can stop messing with my zoom,\nthere we go.\n\n241\n00:12:16.440 --> 00:12:21.410\nYou can suspend, activate, or\nremove that other node, okay?\n\n242\n00:12:21.410 --> 00:12:24.790\nNobody's using that other node right now\nbecause I just brought it up, right?\n\n243\n00:12:24.790 --> 00:12:26.124\nAnd we're not under failure, so\n\n244\n00:12:26.124 --> 00:12:29.390\nI could remove it if I decided I didn't\nwant that part of the DAG anymore.\n\n245\n00:12:29.390 --> 00:12:30.020\nAll right?\n\n246\n00:12:30.020 --> 00:12:33.760\nI could also activate it,\nthat's how we test failover, right?\n\n247\n00:12:33.760 --> 00:12:35.780\nHow do I know that other\nserver is working?\n\n248\n00:12:35.780 --> 00:12:40.310\nWell, I could put somebody's mailbox\nright here in Sales and access it.\n\n249\n00:12:40.310 --> 00:12:41.510\nAnd then, I can come over here and\n\n250\n00:12:41.510 --> 00:12:46.400\nactivate, the other server will go active,\nand that person will flip right over.\n\n251\n00:12:46.400 --> 00:12:48.750\nNow your end users,\nthey don't even notice that happen, right?\n\n252\n00:12:48.750 --> 00:12:52.180\nMicrosoft Outlook, Outlook Web Access,\nthey all just automatically jump to\n\n253\n00:12:52.180 --> 00:12:55.340\nthe other server, cuz they're not actually\ntalking to the other server, are they?\n\n254\n00:12:55.340 --> 00:12:57.100\nThey're talking to a client access server.\n\n255\n00:12:57.100 --> 00:13:00.980\nAnd the client access server is then\ntalking to the mailbox server for them.\n\n256\n00:13:00.980 --> 00:13:04.170\nSo when we fail this over, it's the client\naccess server that says all right,\n\n257\n00:13:04.170 --> 00:13:05.620\nlet me jump over to the other system.\n\n258\n00:13:05.620 --> 00:13:09.910\nSo even if we've got a POP3 or\nan IMAP4 client, they failover, and\n\n259\n00:13:09.910 --> 00:13:11.000\nit's seamless to them.\n\n260\n00:13:11.000 --> 00:13:11.950\nThey don't even see it happen.\n\n261\n00:13:11.950 --> 00:13:13.990\nThat's the best part about the DAG.\n\n262\n00:13:13.990 --> 00:13:16.810\nI didn't need shared storage and\ncrazy cluster hardware.\n\n263\n00:13:16.810 --> 00:13:19.280\nI can just have two servers,\nseamless failover.\n\n264\n00:13:19.280 --> 00:13:20.790\nIt really does work well.\n\n265\n00:13:20.790 --> 00:13:22.960\nAnd this is if I manually wanna test it.\n\n266\n00:13:22.960 --> 00:13:24.980\nI can hit Activate and\nit will manually flip over.\n\n267\n00:13:24.980 --> 00:13:26.290\nIt'll do that automatically too.\n\n268\n00:13:26.290 --> 00:13:29.001\nIf I were to cut the power to EXCHSERV01,\n\n269\n00:13:29.001 --> 00:13:33.340\nEXCHSERV02 will say hm,\nI think server one is dead.\n\n270\n00:13:33.340 --> 00:13:36.680\nLet me check the file share witness,\nis it dead on the file share witness too?\n\n271\n00:13:36.680 --> 00:13:37.820\nOh, it's dead there too.\n\n272\n00:13:37.820 --> 00:13:39.840\nAll right, I need to go ahead and\ngo active.\n\n273\n00:13:39.840 --> 00:13:42.890\nAnd it'll go active, and your users\nwill connect, and off you go, right?\n\n274\n00:13:42.890 --> 00:13:44.790\nSo that's gonna be\nhappening automatically.\n\n275\n00:13:44.790 --> 00:13:47.015\nYou can also suspend the server.\n\n276\n00:13:47.015 --> 00:13:48.725\nThat just means, hey, let's take a break.\n\n277\n00:13:48.725 --> 00:13:52.125\nLet's pause that server and\nstop updating it.\n\n278\n00:13:52.125 --> 00:13:54.895\nIt still has the database, it still has\nthe indexes, it still has all that, but\n\n279\n00:13:54.895 --> 00:13:56.945\nwe're gonna stop sending\ntransaction logs to it.\n\n280\n00:13:56.945 --> 00:13:59.955\nNow, there's not a whole lot\nof reason why we'd do that.\n\n281\n00:13:59.955 --> 00:14:01.545\nI can think of a couple examples.\n\n282\n00:14:01.545 --> 00:14:03.795\nMaybe I'm about to do some\nmaintenance on that server, and so\n\n283\n00:14:03.795 --> 00:14:06.085\nI know I'm gonna do some reboots and\nother things, so\n\n284\n00:14:06.085 --> 00:14:09.230\nI might wanna suspend replication,\nso that I don't get a bunch of\n\n285\n00:14:09.230 --> 00:14:12.300\nerrors in my event log because\nExchange is trying to replicate to it.\n\n286\n00:14:12.300 --> 00:14:13.710\nThat's one example.\n\n287\n00:14:13.710 --> 00:14:18.026\nAnother example might be, I'm about to\ndo an upgrade on Exchange server 01, and\n\n288\n00:14:18.026 --> 00:14:19.877\njust in case something goes wrong,\n\n289\n00:14:19.877 --> 00:14:22.854\nI want to have Exchange server\n02 kinda frozen in time.\n\n290\n00:14:22.854 --> 00:14:26.285\nSo I could suspend it and start to\ndo my work on Exchange server 01 and\n\n291\n00:14:26.285 --> 00:14:30.011\nif things go south, if things just\nbreak I can just say forget server 01,\n\n292\n00:14:30.011 --> 00:14:31.690\nlet's flip over to server 02.\n\n293\n00:14:31.690 --> 00:14:33.940\nAnd you can flip over to that one and\nnow you're in business.\n\n294\n00:14:33.940 --> 00:14:37.800\nSo, that would be an example of when\nwe might choose to suspend that.\n\n295\n00:14:37.800 --> 00:14:40.000\nBut if I want to activate it,\nI just can just hit Activate and\n\n296\n00:14:40.000 --> 00:14:42.460\nit's gonna tell it to\nbring that server active.\n\n297\n00:14:42.460 --> 00:14:45.506\nRight now, if somebody wants\nto connect to that sales DB,\n\n298\n00:14:45.506 --> 00:14:47.819\nthey're gonna go to Exchange server 01.\n\n299\n00:14:47.819 --> 00:14:50.670\nWhen I choose the other one to be active,\nthey'll go to server 02.\n\n300\n00:14:50.670 --> 00:14:53.860\nNow remember,\nthey don't see server 01 and server 02.\n\n301\n00:14:53.860 --> 00:14:56.610\nThey see Lab-Mailbox.\n\n302\n00:14:56.610 --> 00:15:00.713\nRemember when I created the DAG,\nI named it Lab-Mailbox and\n\n303\n00:15:00.713 --> 00:15:05.070\nI gave it a virtual IP\naddress of 192.168.0.222.\n\n304\n00:15:05.070 --> 00:15:08.010\nSo they see a server called Lab-Mailbox.\n\n305\n00:15:08.010 --> 00:15:09.880\nThey don't see the stuff behind it.\n\n306\n00:15:09.880 --> 00:15:12.585\nThey don't realize they're being sent\nto one physical server or another.\n\n307\n00:15:12.585 --> 00:15:15.988\nThat's part of what makes this all so\nseamless and easy.\n\n308\n00:15:15.988 --> 00:15:18.090\nSo I'm gonna take that sales database and\nI'm gonna go ahead and\n\n309\n00:15:18.090 --> 00:15:21.312\nactivate the other node, and\nwe'll go ahead and tell it to activate.\n\n310\n00:15:21.312 --> 00:15:24.410\nIt's gonna reach out and it's gonna\ntell that other system to go active.\n\n311\n00:15:24.410 --> 00:15:26.080\nNow, I've got a little error here.\n\n312\n00:15:26.080 --> 00:15:26.780\nLet's see what we've got.\n\n313\n00:15:26.780 --> 00:15:29.016\nAll right, so I'm gonna go ahead and\ntake that second node and\n\n314\n00:15:29.016 --> 00:15:29.920\nI'm gonna activate it.\n\n315\n00:15:29.920 --> 00:15:34.229\nNow when I activate it, it's gonna tell\nit to bring that other node active and\n\n316\n00:15:34.229 --> 00:15:36.627\nstart sending people over to server 02.\n\n317\n00:15:36.627 --> 00:15:39.870\nNow, well, I got an error, so\nthat didn't work out so well.\n\n318\n00:15:39.870 --> 00:15:42.370\nWell, if we take a look at the error,\nlet's see what's going on.\n\n319\n00:15:42.370 --> 00:15:46.740\nSo if we kinda break this down, we see\nDatabase copy Sales on Exchange Server 02\n\n320\n00:15:46.740 --> 00:15:51.010\nhas content index catalog files\nin the following state, Failed.\n\n321\n00:15:51.010 --> 00:15:52.550\nMy index isn't active, all right?\n\n322\n00:15:52.550 --> 00:15:57.050\nI can't fail over to that other node yet,\nbecause it's not fully active.\n\n323\n00:15:57.050 --> 00:15:59.420\nI've gotta wait for\nit to finish building its index.\n\n324\n00:15:59.420 --> 00:16:03.465\nWhen the index state goes to healthy Then\nwe'll be able to fail over to that node,\n\n325\n00:16:03.465 --> 00:16:06.690\nand that's not uncommon for\na new cluster that we just built up.\n\n326\n00:16:06.690 --> 00:16:10.660\nIt takes time for it to build that index,\nand so I can't fail over to it just yet.\n\n327\n00:16:10.660 --> 00:16:14.380\nNow, we can monitor that replication\nstatus a few different ways.\n\n328\n00:16:14.380 --> 00:16:18.060\nRight here in the GUI, we don't\nreally get a whole lot of feedback,\n\n329\n00:16:18.060 --> 00:16:20.400\nas far as how far it's replicated.\n\n330\n00:16:20.400 --> 00:16:22.236\nIf you choose a node and hit View Details,\n\n331\n00:16:22.236 --> 00:16:24.923\nit will actually break down some\nof the information for you.\n\n332\n00:16:24.923 --> 00:16:29.139\nAnd you can see, right here where I'm\nseeing that Content index status Failed,\n\n333\n00:16:29.139 --> 00:16:30.202\nstatus is Healthy.\n\n334\n00:16:30.202 --> 00:16:32.461\nAnd I can see my Copy queue length.\n\n335\n00:16:32.461 --> 00:16:34.880\nYou can start to see\nsome of that information.\n\n336\n00:16:34.880 --> 00:16:38.038\nThere's a Replay queue length, let me\nexplain the difference between those.\n\n337\n00:16:38.038 --> 00:16:41.710\nThe Copy queue length is just me copying\nthe changes to the other server.\n\n338\n00:16:41.710 --> 00:16:45.190\nThe Replay queue length is once\nthe server receives those changes,\n\n339\n00:16:45.190 --> 00:16:46.680\nit has to apply them.\n\n340\n00:16:46.680 --> 00:16:48.870\nSo ideally, I see a zero on both of these.\n\n341\n00:16:48.870 --> 00:16:50.443\nI've copied everything\nto the other server, and\n\n342\n00:16:50.443 --> 00:16:51.651\nthe server's already applied them.\n\n343\n00:16:51.651 --> 00:16:56.070\nBut if I see one has a really high number,\nthen there's some kind of problem.\n\n344\n00:16:56.070 --> 00:16:57.602\nI might need to address that, right.\n\n345\n00:16:57.602 --> 00:17:01.070\nNow the other thing I can watch out for\nis this field right here, Error messages.\n\n346\n00:17:01.070 --> 00:17:03.735\nIf there was actually a true\nproblem here for me to deal with,\n\n347\n00:17:03.735 --> 00:17:05.001\nI'd have an error message.\n\n348\n00:17:05.001 --> 00:17:07.800\nAnd I'd be able to look at that and\ntry to find out what the problem is.\n\n349\n00:17:07.800 --> 00:17:11.070\nMine's empty, and that's because\nI don't have a real problem.\n\n350\n00:17:11.070 --> 00:17:14.117\nIt tells me my index failed, but it's\nactually building that in the background,\n\n351\n00:17:14.117 --> 00:17:14.966\nso I just need to wait.\n\n352\n00:17:14.966 --> 00:17:16.206\nBut you can see other information.\n\n353\n00:17:16.206 --> 00:17:19.799\nHere's where you can manipulate that\npreference number and lag time, too,\n\n354\n00:17:19.799 --> 00:17:23.520\nif you wanna change that after the fact,\nyou can go in and kinda work with those.\n\n355\n00:17:23.520 --> 00:17:24.280\nSo we should be good there.\n\n356\n00:17:24.280 --> 00:17:26.281\nYou can also monitor a lot\nof this from the PowerShell.\n\n357\n00:17:26.281 --> 00:17:29.931\nRight, so if I were to fire up\nmy PowerShell on this system,\n\n358\n00:17:29.931 --> 00:17:32.780\nlet me get into my\nExchange Management Shell.\n\n359\n00:17:34.480 --> 00:17:36.651\nWe got a few different commands\nthat we can throw at it here.\n\n360\n00:17:36.651 --> 00:17:39.711\nI'm just gonna bump up my font size so\nyou guys would be able to see this\n\n361\n00:17:43.711 --> 00:17:47.980\nAll right, and some of the commands\nthat we can run to see what's going on.\n\n362\n00:17:47.980 --> 00:17:52.050\nWe've got, for example,\nGet-DatabaseAvailabilityGroup.\n\n363\n00:17:52.050 --> 00:17:54.541\nThat'll show us information about\nour database availability group.\n\n364\n00:17:54.541 --> 00:17:58.148\nAnd then we can do\nGet-MailboxDatabaseCopyStatus, and so\n\n365\n00:17:58.148 --> 00:18:01.410\nthat will show us information\nabout where our copy is.\n\n366\n00:18:01.410 --> 00:18:06.384\nSo, I'm gonna do\na Get-DatabaseAvailabilityGroup,\n\n367\n00:18:06.384 --> 00:18:10.641\nand that's just gonna list\nthe DAGs that I have.\n\n368\n00:18:10.641 --> 00:18:18.020\nAnd then I can specify a particular one,\nI can say Identity LAB-MAILBOX.\n\n369\n00:18:18.020 --> 00:18:20.890\nAnd that'll give me the details\non that particular system,\n\n370\n00:18:20.890 --> 00:18:22.980\nwhich is really not different\nthan what it gave me there.\n\n371\n00:18:22.980 --> 00:18:26.080\nBut I'm gonna add one more command\nto that, which is -Status.\n\n372\n00:18:26.080 --> 00:18:29.770\nAnd that's what's gonna let me see what\nthe current health of that information is,\n\n373\n00:18:29.770 --> 00:18:33.470\nand the way it lists it here\nis not terribly informative.\n\n374\n00:18:33.470 --> 00:18:36.248\nI need to throw that into a format list so\n\n375\n00:18:36.248 --> 00:18:39.470\nthat I can actually see\nthe true status information.\n\n376\n00:18:39.470 --> 00:18:40.872\nAnd now you can look in here and\n\n377\n00:18:40.872 --> 00:18:43.691\nkinda see where things are at\nas far as its communications.\n\n378\n00:18:43.691 --> 00:18:47.156\nSo, this is one way that we can view\nsettings, a little easier through the GUI,\n\n379\n00:18:47.156 --> 00:18:48.870\nbut you can view it here too.\n\n380\n00:18:48.870 --> 00:18:51.820\nSo, you can see things\nlike the ReplicationPort.\n\n381\n00:18:51.820 --> 00:18:55.290\nIf you find that replication is failing,\nyou can have Windows Firewall blocking it,\n\n382\n00:18:55.290 --> 00:18:57.600\nand so that would be something\nthat we would need to open.\n\n383\n00:18:57.600 --> 00:19:00.520\nBut otherwise you can see some\nbasic information in here.\n\n384\n00:19:00.520 --> 00:19:07.300\nAnd then there's\nthe Get-MailboxDatabaseCopyStatus.\n\n385\n00:19:07.300 --> 00:19:09.830\nAnd for this one,\nyou can specify a particular mailbox.\n\n386\n00:19:09.830 --> 00:19:12.770\nSo I wanna look at that\nsales mailbox database, and\n\n387\n00:19:12.770 --> 00:19:14.790\ngive me information about\nits current status.\n\n388\n00:19:14.790 --> 00:19:15.771\nAnd so it's gonna give me that list.\n\n389\n00:19:15.771 --> 00:19:17.891\nAnd you'll see how it's\nMounted on EXCHSERV01.\n\n390\n00:19:17.891 --> 00:19:19.871\nIt's Healthy on SERV02.\n\n391\n00:19:19.871 --> 00:19:24.790\nThere's my queue length that are showing\nup, and we can also see our index status.\n\n392\n00:19:24.790 --> 00:19:26.200\nAnd actually looking here,\n\n393\n00:19:26.200 --> 00:19:29.240\nit looks like my index state just\nwent Healthy on the other system.\n\n394\n00:19:29.240 --> 00:19:31.500\nIf you wait long enough,\nthen things do happen.\n\n395\n00:19:31.500 --> 00:19:34.218\nThere's more information in\nthere if you do a format list.\n\n396\n00:19:34.218 --> 00:19:37.420\nYou'll see there's actually quite a bit\ntucked away inside of this one as\n\n397\n00:19:37.420 --> 00:19:38.670\nfar as status.\n\n398\n00:19:38.670 --> 00:19:41.691\nBut that initial output had\nexactly what I needed to see.\n\n399\n00:19:41.691 --> 00:19:45.139\nI'm gonna go back here to my GUI, and\nI'm just gonna refresh this screen,\n\n400\n00:19:45.139 --> 00:19:47.490\nmake sure I've got the latest data.\n\n401\n00:19:47.490 --> 00:19:51.960\nAnd now when I go in and\ndouble-check my system, my LAB-EXCHSERV02,\n\n402\n00:19:51.960 --> 00:19:55.792\nit's got Passive, Healthy,\nContent index status Healthy.\n\n403\n00:19:55.792 --> 00:19:57.500\nLooks like everything's healthy now.\n\n404\n00:19:57.500 --> 00:19:59.520\nI should be to test that fail over.\n\n405\n00:19:59.520 --> 00:20:00.900\nSo we'll go ahead and test it.\n\n406\n00:20:00.900 --> 00:20:05.081\nI'm gonna go come under here under\nLAB-EXCHSERV02, and I'm gonna activate it.\n\n407\n00:20:05.081 --> 00:20:06.661\nAnd we'll see what happens.\n\n408\n00:20:09.121 --> 00:20:10.020\nAll right, so there it goes.\n\n409\n00:20:10.020 --> 00:20:10.904\nIt's reaching out to the server node.\n\n410\n00:20:10.904 --> 00:20:13.830\nThe server's already got the database,\nso it doesn't have to copy anything.\n\n411\n00:20:13.830 --> 00:20:18.060\nIt just has to say, take the main\ndatabase off, bring the other one active,\n\n412\n00:20:18.060 --> 00:20:20.580\nclients will automatically jump over\nto the other system when it's done.\n\n413\n00:20:20.580 --> 00:20:22.710\nThere we go,\nyou've completed the operation.\n\n414\n00:20:22.710 --> 00:20:26.210\nWhen I hit close,\nI still see my Sales database is up.\n\n415\n00:20:26.210 --> 00:20:28.320\nNow look at my data over here.\n\n416\n00:20:28.320 --> 00:20:32.534\nI can see that EXCHSERV01 is now Passive,\nHealthy, and\n\n417\n00:20:32.534 --> 00:20:37.430\nEXCHSERV02 is Active, Mounted,\nand look at the index.\n\n418\n00:20:37.430 --> 00:20:40.680\nThe index state is Failed\non both of them right now.\n\n419\n00:20:40.680 --> 00:20:42.660\nThey're re-correcting their index.\n\n420\n00:20:42.660 --> 00:20:45.180\nNow people are in there,\npeople are working with their email.\n\n421\n00:20:45.180 --> 00:20:47.729\nBut if they start doing\nsearches of the mailbox,\n\n422\n00:20:47.729 --> 00:20:51.161\nthe reason it says failed here is\nthe index is probably outdated.\n\n423\n00:20:51.161 --> 00:20:53.661\nWe're kind of replaying transaction\nlogs in the background.\n\n424\n00:20:53.661 --> 00:20:57.270\nSo the search will still work, but their\nlatest and greatest emails that have come\n\n425\n00:20:57.270 --> 00:21:01.001\nin, anything that was in the queue during\nthe fail over, hasn't been indexed yet.\n\n426\n00:21:01.001 --> 00:21:03.242\nAnd it usually doesn't take very long.\n\n427\n00:21:03.242 --> 00:21:06.410\nYou'd have to have an incredibly\nbusy server for it to take a while.\n\n428\n00:21:06.410 --> 00:21:07.380\nSo I'm just gonna refresh, and\n\n429\n00:21:07.380 --> 00:21:10.960\nsure enough, I can see my index state\nis now Healthy on both of them.\n\n430\n00:21:10.960 --> 00:21:15.060\nSo I'm healthy, I'm up, and\nthe second server is now the active node.\n\n431\n00:21:15.060 --> 00:21:17.311\nOkay, now the second server\nhad a preference of two.\n\n432\n00:21:17.311 --> 00:21:19.520\nThe first server had a preference of one.\n\n433\n00:21:19.520 --> 00:21:23.110\nThe first server is healthy,\naren't we gonna fail back?\n\n434\n00:21:23.110 --> 00:21:26.705\nWell, no,\nbecause we made manually failed over\n\n435\n00:21:26.705 --> 00:21:31.545\nit's not gonna do another fail over unless\nan actual problem occurs, all right.\n\n436\n00:21:31.545 --> 00:21:34.875\nYou have in the cluster world,\nyou have what's call preemptive fail over.\n\n437\n00:21:34.875 --> 00:21:38.398\nPreemptive fail over is when you fail\nover even though there's not a problem.\n\n438\n00:21:38.398 --> 00:21:39.802\nSo whoever's preference one,\n\n439\n00:21:39.802 --> 00:21:42.610\nthey're gonna take over even\nif there's not problem, right?\n\n440\n00:21:42.610 --> 00:21:44.210\nThat's preemptive fail over.\n\n441\n00:21:44.210 --> 00:21:47.850\nExchange database availability\ngroups are non-preemptive.\n\n442\n00:21:47.850 --> 00:21:50.520\nIn other words,\nthey only fail over if there's a problem.\n\n443\n00:21:50.520 --> 00:21:55.160\nSo if I leave it like this,\nEXCHSERV02 has a preference of two.\n\n444\n00:21:55.160 --> 00:21:57.072\nEXCHSERV01 has a preference of one.\n\n445\n00:21:57.072 --> 00:22:01.060\nBut EXCHSERV02 is gonna stay active\nforever, until a problem happens.\n\n446\n00:22:01.060 --> 00:22:04.426\nIf I restart EXCHSERV02, if EXCHSERV02\ngoes offline or if I manually hit\n\n447\n00:22:04.426 --> 00:22:07.811\nthe deactivate server button on SERV01,\nthat'll trigger a fail-over.\n\n448\n00:22:07.811 --> 00:22:09.350\nAnd It'll go back to SERV01.\n\n449\n00:22:09.350 --> 00:22:13.044\nBut if I don't do anything,\nthen SERV02 is gonna stay active,\n\n450\n00:22:13.044 --> 00:22:15.630\nand that's gonna be the end of that,\nright.\n\n451\n00:22:15.630 --> 00:22:21.120\nSo, for example, I could, let's say I\nwanted to do a, just a simulation here.\n\n452\n00:22:21.120 --> 00:22:23.461\nWe could take SERV02 and\nshut it down, right.\n\n453\n00:22:23.461 --> 00:22:30.761\nSo I could do something like this.\n\n454\n00:22:30.761 --> 00:22:35.130\nI'm gonna basically force\nEXCHSERV02 to shut down.\n\n455\n00:22:36.340 --> 00:22:42.540\nAnd when it shuts down, it's gonna go\noffline, and SERV01 is gonna look at that.\n\n456\n00:22:42.540 --> 00:22:45.200\nAnd it's gonna say,\nwow, is SERV02 offline?\n\n457\n00:22:45.200 --> 00:22:46.330\nI think it's offline.\n\n458\n00:22:46.330 --> 00:22:48.611\nLet me go check with the file witness and\nsee if they agree.\n\n459\n00:22:48.611 --> 00:22:50.244\nAnd it'll look at the file witness,\n\n460\n00:22:50.244 --> 00:22:53.940\nand it'll see that SERV02 is not writing\nfiles into that witness share anymore.\n\n461\n00:22:53.940 --> 00:22:57.000\nAnd when it's not writing files there,\nthat means the witness thinks it's down.\n\n462\n00:22:57.000 --> 00:22:59.770\nWe think it's down,\nwe need to go active, okay?\n\n463\n00:22:59.770 --> 00:23:00.990\nAnd that usually happens pretty quick.\n\n464\n00:23:00.990 --> 00:23:03.911\nSo I can see I can't ping SERV02 anymore.\n\n465\n00:23:03.911 --> 00:23:05.681\nSo SERV02 is offline.\n\n466\n00:23:05.681 --> 00:23:09.605\nAnd if I come in here and refresh this,\nI can watch the Sales database, and\n\n467\n00:23:09.605 --> 00:23:10.820\nit does take a moment.\n\n468\n00:23:10.820 --> 00:23:14.283\nBecause it always assumes that, yeah,\nmaybe we're just dropping some packets,\n\n469\n00:23:14.283 --> 00:23:16.260\nlet's give it a moment and make sure.\n\n470\n00:23:16.260 --> 00:23:19.320\nBut when I come in here and refresh,\nsee how it's taking a while to load there?\n\n471\n00:23:19.320 --> 00:23:20.577\nIt's trying to figure out what's going on.\n\n472\n00:23:20.577 --> 00:23:22.043\nAnd on the side here,\n\n473\n00:23:22.043 --> 00:23:27.150\nI can see that LAB-EXCHSERV01\none is still Passive, Healthy.\n\n474\n00:23:27.150 --> 00:23:30.780\nAnd SERV02 is Passive, ServiceDown.\n\n475\n00:23:30.780 --> 00:23:35.270\nWe see that SERV02 is down, what do I do?\n\n476\n00:23:35.270 --> 00:23:38.840\nWell, it's making sure that it's really\ndown, that this isn't just a quick blip.\n\n477\n00:23:38.840 --> 00:23:41.690\nAnd so in the next couple of seconds,\nit's gonna recognize that this isn't\n\n478\n00:23:41.690 --> 00:23:45.040\njust a quick blip, and\nit's gonna go ahead and bring us active.\n\n479\n00:23:45.040 --> 00:23:46.560\nAnd so we can give that a moment.\n\n480\n00:23:46.560 --> 00:23:49.216\nIf it doesn't happen in a reasonable time,\nyou could force it, but\n\n481\n00:23:49.216 --> 00:23:50.252\nit will happen on its own.\n\n482\n00:23:50.252 --> 00:23:51.638\nThat's kind of the whole point of\nthis is that we shouldn't have to\n\n483\n00:23:51.638 --> 00:23:52.175\nworry about it, right?\n\n484\n00:23:52.175 --> 00:23:55.855\nYou set it and forget it, and\nit will take things over as needed.\n\n485\n00:23:55.855 --> 00:24:00.780\nSo, looking at my Sales database here,\nit still says Active on SERV02,\n\n486\n00:24:00.780 --> 00:24:04.075\nbut it's status over here\nis flagged as Unknown.\n\n487\n00:24:04.075 --> 00:24:07.761\nAnd looking at the health information\nover here, I can see that it is\n\n488\n00:24:07.761 --> 00:24:12.435\nPassive Disconnected and Healthy for\nSERV01, Passive ServiceDown on SERV02.\n\n489\n00:24:12.435 --> 00:24:15.998\nSo we can just keep refreshing, and\neventually it'll recognize that and\n\n490\n00:24:15.998 --> 00:24:17.370\nflip it over.\n\n491\n00:24:17.370 --> 00:24:19.330\nIf I remember right,\nit's a minute and a half is how long,\n\n492\n00:24:19.330 --> 00:24:21.190\nit's like three 30-second intervals.\n\n493\n00:24:21.190 --> 00:24:23.960\nSo we'll just give it a second while\nit kinda sorts through that and\n\n494\n00:24:23.960 --> 00:24:25.370\neventually goes active.\n\n495\n00:24:27.434 --> 00:24:30.460\nAll right, if you're in a giant hurry,\nyou could always come in here and\n\n496\n00:24:30.460 --> 00:24:34.220\ntake SERV01 and hit Activate, and\nthat'll bring it active right now.\n\n497\n00:24:34.220 --> 00:24:37.860\nIn my case, it is taking a while\nto actually do that flip over.\n\n498\n00:24:39.480 --> 00:24:40.721\nWe're at risk of me becoming bored.\n\n499\n00:24:40.721 --> 00:24:43.581\nThat's always bad, and then I start\ndoing things and break the server.\n\n500\n00:24:43.581 --> 00:24:45.101\nSo, but we'll give it just a second here.\n\n501\n00:24:45.101 --> 00:24:46.746\nIf it doesn't become active,\nI'll hit the Active button, and\n\n502\n00:24:46.746 --> 00:24:47.850\nthat'll take care of it.\n\n503\n00:24:47.850 --> 00:24:48.831\nBut it is automatic.\n\n504\n00:24:48.831 --> 00:24:51.672\nIt does kick that over, and\nthen it brings the server back up.\n\n505\n00:24:51.672 --> 00:24:53.391\nHopefully your end users don't know it.\n\n506\n00:24:53.391 --> 00:24:58.271\nReally Outlook and Exchange,\nthey try and run in a cache mode anyway.\n\n507\n00:24:58.271 --> 00:25:00.280\nSo Outlook downloads their mailbox.\n\n508\n00:25:00.280 --> 00:25:05.080\nA lot of users what they'll notice,\nis they'll go to send an email, and\n\n509\n00:25:05.080 --> 00:25:08.380\nthe email will sit there in their\noutbox instead of going to sent items.\n\n510\n00:25:08.380 --> 00:25:11.970\nIt'll just sit there kind of waiting,\nand that's it, right?\n\n511\n00:25:11.970 --> 00:25:14.830\nIt's just kinda sitting and waiting for\nthose emails to move across.\n\n512\n00:25:14.830 --> 00:25:17.420\nAnd then when the new server comes up,\nthe emails flow.\n\n513\n00:25:17.420 --> 00:25:23.060\nSo the end user, all they see is\njust the email in the outbox, right?\n\n514\n00:25:23.060 --> 00:25:25.740\nBut then once the server is up,\nit flows normal, and you're in business.\n\n515\n00:25:25.740 --> 00:25:27.990\nI'm gonna go ahead and\nforce it to flip over, so here it is.\n\n516\n00:25:27.990 --> 00:25:30.940\nNow it's gonna have to flush some\nof the transaction logs out because\n\n517\n00:25:30.940 --> 00:25:34.068\nof the unclean shut down on the other\nsystem, but that shouldn't be a big deal.\n\n518\n00:25:34.068 --> 00:25:36.790\nThe new node will come active, and\nour users will be back in business.\n\n519\n00:25:36.790 --> 00:25:40.510\nSo, database availability groups, there's\na couple of hoops we had to jump through\n\n520\n00:25:40.510 --> 00:25:41.470\nto get them set up in the beginning.\n\n521\n00:25:41.470 --> 00:25:44.460\nBut once they're in place,\nthey're really easy to administer,\n\n522\n00:25:44.460 --> 00:25:46.630\nand that's pretty much the end of it.\n\n523\n00:25:46.630 --> 00:25:51.400\nSo in this episode we got a chance to\nsee database availability groups in\n\n524\n00:25:51.400 --> 00:25:52.010\naction, right?\n\n525\n00:25:52.010 --> 00:25:53.540\nWe created them in the last episode, but\n\n526\n00:25:53.540 --> 00:25:56.670\nin this episode we moved\na database into the DAG.\n\n527\n00:25:56.670 --> 00:26:00.210\nThen we got see failing it over to\nanother node and failing it back again,\n\n528\n00:26:00.210 --> 00:26:01.970\nas well as how to monitor\nit via PowerShell.\n\n529\n00:26:01.970 --> 00:26:04.581\nSo couple of different things\nthere that are all pretty useful.\n\n530\n00:26:04.581 --> 00:26:07.936\nIt's a great system, and it really does\ntake a lot of burden off of system\n\n531\n00:26:07.936 --> 00:26:11.980\nadministrators too if we're not having\nto set up true hardware based clusters.\n\n532\n00:26:11.980 --> 00:26:14.652\nHere it's just done right inside of\nour systems, really works excellent.\n\n533\n00:26:14.652 --> 00:26:17.141\nAll right, well that's a great spot for\nus to wrap this one up.\n\n534\n00:26:17.141 --> 00:26:19.461\nSo I hope you guys enjoyed the episode.\n\n535\n00:26:19.461 --> 00:26:22.661\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n536\n00:26:22.661 --> 00:26:28.920\n[MUSIC]\n\n",
          "vimeoId": "136336179"
        },
        {
          "description": "In this episode, Don demonstrates how to properly backup and restore an Exchange mailbox database. He explains various backup strategies as well as some third party software that may be more appropriate in some situations.",
          "length": "1891",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-2-mailbox_database_restore-081915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-2-mailbox_database_restore-081915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-2-mailbox_database_restore-081915-1-sm.jpg",
          "title": "Mailbox Database Restore",
          "transcript": "WEBVTT\n\n1\n00:00:00.603 --> 00:00:10.528\n[MUSIC]\n\n2\n00:00:10.528 --> 00:00:12.989\nAll right, good morning,\ngood afternoon, and good evening!\n\n3\n00:00:12.989 --> 00:00:15.740\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.740 --> 00:00:17.270\nI'm your host, Don Pezet,\n\n5\n00:00:17.270 --> 00:00:20.950\nback again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.950 --> 00:00:24.380\nAnd in this episode we're gonna be\ntaking a look at backing up and\n\n7\n00:00:24.380 --> 00:00:25.610\nrestoring Microsoft Exchange.\n\n8\n00:00:25.610 --> 00:00:28.870\nNow, I know in all the episodes I\nstart off when I say things like, man,\n\n9\n00:00:28.870 --> 00:00:30.000\nthis is a really great feature.\n\n10\n00:00:30.000 --> 00:00:31.330\nWe're gonna talk about something exciting.\n\n11\n00:00:31.330 --> 00:00:35.216\nBut today we're going to be talking about\nsomething that's just really really\n\n12\n00:00:35.216 --> 00:00:35.857\nimportant.\n\n13\n00:00:35.857 --> 00:00:40.015\nAs an Exchange administrator, having\na reliable backup of your system and\n\n14\n00:00:40.015 --> 00:00:42.857\nknowing how to restore it\nis extremely essential.\n\n15\n00:00:42.857 --> 00:00:44.099\nBecause when a failure happens,\n\n16\n00:00:44.099 --> 00:00:46.370\nyou don't wanna be scrambling\ntrying to figure things out.\n\n17\n00:00:46.370 --> 00:00:48.303\nYou wanna know exactly what to do and\n\n18\n00:00:48.303 --> 00:00:51.082\nget that database back\nonline as fast as possible.\n\n19\n00:00:51.082 --> 00:00:55.177\nSo, this episode is actually gonna be\none of a series of episodes cuz there's\n\n20\n00:00:55.177 --> 00:00:58.337\nseveral different ways to\nbackup Exchange and to restore.\n\n21\n00:00:58.337 --> 00:01:00.258\nReally there's only a few\nways to back it up but\n\n22\n00:01:00.258 --> 00:01:03.730\nthere's several ways to restore it based\non what it is that we're trying achieve.\n\n23\n00:01:03.730 --> 00:01:07.270\nAnd in this episode we're gonna be\ntackling restoring the entire mailbox\n\n24\n00:01:07.270 --> 00:01:10.865\nexchange or exchange mailbox database\nin the event that we have a hard drive\n\n25\n00:01:10.865 --> 00:01:13.620\nfailure, server failures or\nsomething of that nature.\n\n26\n00:01:13.620 --> 00:01:15.638\nIf you haven't watched it already,\n\n27\n00:01:15.638 --> 00:01:18.902\nwe did an episode on database\navailability groups or DAGs.\n\n28\n00:01:18.902 --> 00:01:23.854\nAnd with those, we can stop a failure from\nbeing visible to the end user at all,\n\n29\n00:01:23.854 --> 00:01:24.600\nright?\n\n30\n00:01:24.600 --> 00:01:25.540\nAnd that's pretty cool.\n\n31\n00:01:25.540 --> 00:01:28.510\nWhen one server fails,\nanother server already takes over.\n\n32\n00:01:28.510 --> 00:01:33.150\nBut we don't all have resources available\nto do database availability groups.\n\n33\n00:01:33.150 --> 00:01:34.550\nSo for the next couple episodes,\n\n34\n00:01:34.550 --> 00:01:38.790\nI want to focus on technologies we can use\nto back-up and restore individual servers.\n\n35\n00:01:38.790 --> 00:01:41.550\nIf they're not in a DAG, all right.\n\n36\n00:01:41.550 --> 00:01:44.910\nSo we're just gonna start off\nwith a plain old run of the mill\n\n37\n00:01:44.910 --> 00:01:49.370\nhow to I back up my mailbox database\nrestore or my mailbox database so\n\n38\n00:01:49.370 --> 00:01:52.310\nthat I can restore it in\nthe event of a failure, all right.\n\n39\n00:01:52.310 --> 00:01:54.670\nNow when it comes to\nplanning your backups and\n\n40\n00:01:54.670 --> 00:01:57.460\nrecovery, there's a few things\nwe need to think about and\n\n41\n00:01:57.460 --> 00:02:02.040\nthe two big ones that you hear about\nare the RPO and RTO, all right.\n\n42\n00:02:02.040 --> 00:02:05.680\nRecovery time objective and\nrecovery point objective.\n\n43\n00:02:05.680 --> 00:02:10.380\nThe recovery time objective is,\nhow long can you be down for.\n\n44\n00:02:10.380 --> 00:02:13.890\nIf I have a failure, and\nmy server goes off-line, how much\n\n45\n00:02:13.890 --> 00:02:17.890\ntime do I have before I can restore\nwithout my users feeling pain right?\n\n46\n00:02:17.890 --> 00:02:19.830\nBefore my company losing money?\n\n47\n00:02:19.830 --> 00:02:22.910\nIf I lose access to my mailbox for\nan hour, that's not a big deal to me,\n\n48\n00:02:22.910 --> 00:02:23.860\nI'm okay with that.\n\n49\n00:02:23.860 --> 00:02:24.540\nIt's just an hour.\n\n50\n00:02:24.540 --> 00:02:26.060\nI'll check my email later.\n\n51\n00:02:26.060 --> 00:02:29.300\nBut if I'm without email for\nthree days, that's a problem for me.\n\n52\n00:02:29.300 --> 00:02:33.110\nI can't go days without email,\nright, well that's me.\n\n53\n00:02:33.110 --> 00:02:35.837\nIn your environment,\nemail might be mission critical.\n\n54\n00:02:35.837 --> 00:02:38.690\nYou might not be able to go\nan hour without email, right?\n\n55\n00:02:38.690 --> 00:02:40.810\nThat could be a big deal for you.\n\n56\n00:02:40.810 --> 00:02:42.680\nSo, different companies\nhave different needs and\n\n57\n00:02:42.680 --> 00:02:45.250\nyou'll need to structure\nyour backup around that.\n\n58\n00:02:45.250 --> 00:02:48.980\nSome solutions just will not work in\nthe amount of time that you have, and\n\n59\n00:02:48.980 --> 00:02:50.720\nthat's where database\navailability groups are so\n\n60\n00:02:50.720 --> 00:02:54.760\nnice because they do instantaneous\nrecovery and that really works out well.\n\n61\n00:02:56.030 --> 00:02:58.512\nThe other part was recovery\npoint objective, RPO.\n\n62\n00:02:58.512 --> 00:03:02.110\nAnd what RPO is stating is basically\nhow much data can I afford to lose?\n\n63\n00:03:02.110 --> 00:03:05.290\nLet's say I do a backup\nevery night at midnight, but\n\n64\n00:03:05.290 --> 00:03:08.400\nthen I have a failure at 6 AM.\n\n65\n00:03:08.400 --> 00:03:11.000\nWell, if I go and\nrestore my backup from midnight,\n\n66\n00:03:11.000 --> 00:03:14.140\nwhat happened to all my\nemail from midnight to 6 AM?\n\n67\n00:03:14.140 --> 00:03:15.140\nIt's gone.\nI lost it.\n\n68\n00:03:15.140 --> 00:03:16.110\nAll right.\n\n69\n00:03:16.110 --> 00:03:18.110\nI lost six hours of email.\n\n70\n00:03:18.110 --> 00:03:19.480\nIs that a big deal?\n\n71\n00:03:19.480 --> 00:03:20.940\nIn your company that\nmight not be a big deal.\n\n72\n00:03:20.940 --> 00:03:23.240\nYou might just say whatever,\nit's six hour, who cares?\n\n73\n00:03:23.240 --> 00:03:24.680\nRight, at least I got\neverything else back.\n\n74\n00:03:24.680 --> 00:03:26.660\nAnd that may be fine.\n\n75\n00:03:26.660 --> 00:03:29.810\nBut you might have a mission critical\nenvironment where you can't afford to lose\n\n76\n00:03:29.810 --> 00:03:31.970\neven one single email and\n\n77\n00:03:31.970 --> 00:03:36.120\nin that environment using just a nightly\nbackup is not gonna do, right?\n\n78\n00:03:36.120 --> 00:03:37.604\nYour recovery point\nobjective is much shorter.\n\n79\n00:03:37.604 --> 00:03:39.518\nYou don't wanna lose any e-mail, and\n\n80\n00:03:39.518 --> 00:03:42.600\ndatabase availability groups\nare that solution, all right.\n\n81\n00:03:42.600 --> 00:03:46.350\nSo DAGs, that's really the number one\nway to go to protect your server.\n\n82\n00:03:46.350 --> 00:03:49.030\nYou have a mailbox database\nstored in more than one place.\n\n83\n00:03:49.030 --> 00:03:53.150\nYou have a database copies, right,\nand that gives you that insulation.\n\n84\n00:03:53.150 --> 00:03:58.120\nBut one thing that DAGs don't give\nus is long term retention, right?\n\n85\n00:03:58.120 --> 00:04:01.370\nWhat if a mailbox was\ndeleted three months ago?\n\n86\n00:04:01.370 --> 00:04:03.540\nWell, if I delete a mailbox and\n\n87\n00:04:03.540 --> 00:04:08.010\nit actually gets removed it gets removed\nfrom the copies also, from the DAG copies.\n\n88\n00:04:08.010 --> 00:04:12.780\nSo, DAGs are not a replacement for\nbackups, they're a supplement.\n\n89\n00:04:12.780 --> 00:04:17.408\nDAGs are designed to shrink your RPO and\nRTO to get you online as fast as you can.\n\n90\n00:04:17.408 --> 00:04:22.212\nBut for long term data recovery,\nwe need traditional backups, all right.\n\n91\n00:04:22.212 --> 00:04:25.166\nSo you're normally gonna combine\nthese technologies together,\n\n92\n00:04:25.166 --> 00:04:26.650\nnot just go with one or the other.\n\n93\n00:04:26.650 --> 00:04:28.480\nYou're gonna combine them, all right.\n\n94\n00:04:28.480 --> 00:04:29.930\nSo watch each of these episodes.\n\n95\n00:04:29.930 --> 00:04:31.390\nSee each of the different ways.\n\n96\n00:04:31.390 --> 00:04:33.850\nAnd then figure out how to implement them\nin your environment to meet the needs\n\n97\n00:04:33.850 --> 00:04:35.190\nof your company.\n\n98\n00:04:35.190 --> 00:04:38.280\nBut a traditional backup you'll\nfind is actually pretty easy.\n\n99\n00:04:38.280 --> 00:04:42.010\nOne of the decisions we have to make\nearly on is do we want to use Microsoft's\n\n100\n00:04:42.010 --> 00:04:44.740\nsoftware or\ndo we want to use a third party, right.\n\n101\n00:04:44.740 --> 00:04:47.660\nThere's tons of companies out there that\nmake software that can backup Microsoft\n\n102\n00:04:47.660 --> 00:04:50.670\nexchange and we just need to make\na decision as to which one we want, and\n\n103\n00:04:50.670 --> 00:04:52.840\nthere's pros and cons to each right?\n\n104\n00:04:52.840 --> 00:04:55.940\nOn the Microsoft side we\nhave Windows Server Backup.\n\n105\n00:04:55.940 --> 00:04:58.990\nWindows Server Backup is built right\ninto Windows so it's free, right?\n\n106\n00:04:58.990 --> 00:04:59.580\nWell, that's always nice.\n\n107\n00:04:59.580 --> 00:05:00.940\nThe price is right.\n\n108\n00:05:00.940 --> 00:05:03.489\nWell, it's free because you've\nalready paid for the server so\n\n109\n00:05:03.489 --> 00:05:05.130\nit's not completely free.\n\n110\n00:05:05.130 --> 00:05:09.320\nBut with that you can backup\nyour database and restore it.\n\n111\n00:05:09.320 --> 00:05:11.540\nOn a positive side, it does backups.\n\n112\n00:05:11.540 --> 00:05:14.740\nOn a negative side,\nthere's no centralized management for it.\n\n113\n00:05:14.740 --> 00:05:19.210\nSo if I have 50 servers, I'm having to set\nup backups 50 times and if I'm monitoring\n\n114\n00:05:19.210 --> 00:05:21.820\nthose backups, I have to go to each of\nthe those 50 servers to monitor it.\n\n115\n00:05:21.820 --> 00:05:23.680\nSo you don't get centralized management.\n\n116\n00:05:23.680 --> 00:05:24.610\nBut it's cheap.\n\n117\n00:05:24.610 --> 00:05:27.020\nSo for small businesses,\neven for some medium businesses,\n\n118\n00:05:27.020 --> 00:05:28.280\nthat works out really well.\n\n119\n00:05:28.280 --> 00:05:30.790\nAll right,\nthe other thing is Windows Server Backup\n\n120\n00:05:30.790 --> 00:05:33.420\ndoesn't do a great job of\nmaintaining multiple copies.\n\n121\n00:05:33.420 --> 00:05:37.360\nSo, if you're gonna have several backups,\nspanning months or\n\n122\n00:05:37.360 --> 00:05:40.710\nyears even, Windows Server Backup\ngets a little clunky.\n\n123\n00:05:40.710 --> 00:05:44.150\nSo Microsoft has another product called\nthe System Center Data Protection Manager,\n\n124\n00:05:44.150 --> 00:05:45.700\nSCDPM.\n\n125\n00:05:45.700 --> 00:05:48.460\nSCDPM has centralized management and\n\n126\n00:05:48.460 --> 00:05:50.580\nit can maintain copies\nover the span of years.\n\n127\n00:05:50.580 --> 00:05:53.020\nAnd it does data deduplication and\nall that other stuff.\n\n128\n00:05:53.020 --> 00:05:57.130\nIt really does some impressive things and\nthat's all a part of SCDPM.\n\n129\n00:05:57.130 --> 00:05:58.430\nWhich is not free, right,\n\n130\n00:05:58.430 --> 00:06:02.100\nit's basically a purchase product,\npart of the system center suite.\n\n131\n00:06:02.100 --> 00:06:05.110\nAnd you can back up your systems,\nnot just Exchange, but really any server.\n\n132\n00:06:05.110 --> 00:06:06.820\nSo that's a great solution.\n\n133\n00:06:06.820 --> 00:06:12.120\nA big advantage of the SCDPM is that if\nyou have a problem you call Microsoft.\n\n134\n00:06:12.120 --> 00:06:13.580\nMicrosoft wrote the SCDPM.\n\n135\n00:06:13.580 --> 00:06:14.580\nThey wrote your operating system.\n\n136\n00:06:14.580 --> 00:06:15.750\nThey wrote Exchange.\n\n137\n00:06:15.750 --> 00:06:17.340\nIt's one person responsible for\n\n138\n00:06:17.340 --> 00:06:19.380\nall those different entities\nthat make support easier.\n\n139\n00:06:20.420 --> 00:06:23.409\nBut it's not as feature rich as some\nof the third party applications\n\n140\n00:06:23.409 --> 00:06:24.307\nthat are out there.\n\n141\n00:06:24.307 --> 00:06:28.909\nApplications like Symantec Backup Exec,\nArc Serve, Com Vault,\n\n142\n00:06:28.909 --> 00:06:32.702\nAcronis Advanced Backup for\nExchange, all of those.\n\n143\n00:06:32.702 --> 00:06:35.792\nThere's third party products that\ncan backup Exchange, and for\n\n144\n00:06:35.792 --> 00:06:39.880\nthe most part they're expensive,\nyou've got to buy them, right?\n\n145\n00:06:39.880 --> 00:06:44.240\nThey don't necessarily offer things\nbeyond with what you'd get with SCDPM or\n\n146\n00:06:44.240 --> 00:06:45.810\neven Windows Server Backup.\n\n147\n00:06:45.810 --> 00:06:49.450\nBut the big claim to fame that a lot\nof those third party softwares have,\n\n148\n00:06:49.450 --> 00:06:54.770\nis that they're very easy to use, and they\noffer single item recovery, all right.\n\n149\n00:06:54.770 --> 00:06:58.560\nIn Exchange, if we use Windows Server\nBackup or if we use the SCDPM,\n\n150\n00:06:58.560 --> 00:07:03.780\nyou can restore an entire mailbox\ndatabase, or you can restore\n\n151\n00:07:03.780 --> 00:07:09.580\nan individual mailbox, but\nyou can't restore an individual email.\n\n152\n00:07:09.580 --> 00:07:12.450\nRight.\nIf I just wanna get one email back,\n\n153\n00:07:12.450 --> 00:07:14.100\nI've gotta restore the whole mailbox.\n\n154\n00:07:14.100 --> 00:07:16.260\nOr I gotta restore\nthe whole mailbox database.\n\n155\n00:07:16.260 --> 00:07:18.232\nI can't just restore that one email.\n\n156\n00:07:18.232 --> 00:07:21.038\nSo if I'm looking for individual item\nrestore, I probably wanna look at\n\n157\n00:07:21.038 --> 00:07:23.990\nthe third parties, if that something\nthat's important to me, all right.\n\n158\n00:07:23.990 --> 00:07:27.197\nBut other than that, if I just want\nto be able to restore mailboxes or\n\n159\n00:07:27.197 --> 00:07:30.510\ndatabases we can use the software\nbuilt right into windows.\n\n160\n00:07:30.510 --> 00:07:32.435\nAnd let me show you, it's pretty easy.\n\n161\n00:07:32.435 --> 00:07:35.600\nSo the first thing we need\nto do is to recognize\n\n162\n00:07:35.600 --> 00:07:38.232\nthat the backup software's not\nactually installed by default.\n\n163\n00:07:38.232 --> 00:07:41.160\nSo we're going to have to get that\ninstalled and it's a little bit quirky.\n\n164\n00:07:42.270 --> 00:07:46.100\nFor example, well here let's start off\nright here, I am going to take my mailbox.\n\n165\n00:07:46.100 --> 00:07:48.580\nSo I'm logged into this server,\nthis is my mailbox.\n\n166\n00:07:48.580 --> 00:07:50.780\nAnd I'm just gonna send myself an email.\n\n167\n00:07:50.780 --> 00:07:54.965\nSo I'm gonna be a little\nschizophrenic today and email myself.\n\n168\n00:07:54.965 --> 00:08:00.816\nAnd I'll just say email\nsent prior to backup.\n\n169\n00:08:00.816 --> 00:08:01.930\nAll right.\n\n170\n00:08:01.930 --> 00:08:06.640\nAnd I'll just say,\nI sent this email prior to backing up.\n\n171\n00:08:08.390 --> 00:08:10.490\nAll right.\nThis way I'll have an email in my mailbox\n\n172\n00:08:10.490 --> 00:08:13.860\nthat I know was sent before\nI did any kind of backup.\n\n173\n00:08:13.860 --> 00:08:15.450\nAnd it'll take a second and it'll show up.\n\n174\n00:08:15.450 --> 00:08:16.520\nSo I'll have that.\n\n175\n00:08:16.520 --> 00:08:18.930\nNext I need to set up\nWindows Server Backup.\n\n176\n00:08:18.930 --> 00:08:21.680\nNow, Windows Server Backup, you can\nget to it through the Server Manager.\n\n177\n00:08:21.680 --> 00:08:22.790\nIf you go to the Server Manager and\n\n178\n00:08:22.790 --> 00:08:26.990\ngo up here to Tools, you'll see down here\nat the bottom Windows Server Backup.\n\n179\n00:08:26.990 --> 00:08:27.550\nAll right.\n\n180\n00:08:27.550 --> 00:08:31.070\nNow, on most servers like we'll\ntake this client access server.\n\n181\n00:08:31.070 --> 00:08:35.470\nIf I go to Tools and Windows Server\nBackup, it's right here in my Tool menu\n\n182\n00:08:35.470 --> 00:08:38.550\nbut when I launch it,\nit does this really annoying thing.\n\n183\n00:08:38.550 --> 00:08:42.440\nThe user interface,\nthe Admin Tools installed, but\n\n184\n00:08:42.440 --> 00:08:45.220\nthe actual backup software is not.\n\n185\n00:08:45.220 --> 00:08:46.650\nSo see how it's telling me here,\n\n186\n00:08:46.650 --> 00:08:50.870\nI can't actually do my own Local Backup\nbecause the software isn't installed.\n\n187\n00:08:50.870 --> 00:08:52.210\nSo I need to install it.\n\n188\n00:08:52.210 --> 00:08:55.080\nAnd the way we do that is by going\nback into our Server Manager.\n\n189\n00:08:55.080 --> 00:08:57.830\nAnd going to Manage and\nAdd Remove Roles and Features.\n\n190\n00:08:57.830 --> 00:09:01.440\nAnd the Windows Server Backup is\na feature, we just need to add that in.\n\n191\n00:09:01.440 --> 00:09:05.290\nSo if I move to the Wizard, I'll skip past\nthe Roles cuz I'm not messing with those.\n\n192\n00:09:05.290 --> 00:09:09.130\nBut here inside the Features,\nI can find Windows Server Backup.\n\n193\n00:09:09.130 --> 00:09:11.270\nI can check it and\nI can move forward, all right.\n\n194\n00:09:11.270 --> 00:09:14.810\nAnd that's gonna install\nthe actual backup software.\n\n195\n00:09:14.810 --> 00:09:17.680\nAnd I've already done that\nhere on my mailbox server.\n\n196\n00:09:17.680 --> 00:09:21.500\nSo this is my mailbox server,\nthis other one is my client access server.\n\n197\n00:09:21.500 --> 00:09:25.550\nBut here in my mailbox, if I go to\nTools and Windows Server Backup.\n\n198\n00:09:26.610 --> 00:09:27.500\nWhen I launch that and\n\n199\n00:09:27.500 --> 00:09:30.910\nI go to my Local Backup,\ninstead of telling me I can't do a backup,\n\n200\n00:09:30.910 --> 00:09:34.630\nit shows me what backups I already have\nand gives me the ability to schedule it.\n\n201\n00:09:34.630 --> 00:09:38.370\nSo, first off, we just need to\nget that installed, all right?\n\n202\n00:09:38.370 --> 00:09:41.050\nOnce that's done,\nwe're ready to start taking backups.\n\n203\n00:09:41.050 --> 00:09:45.170\nNow, Windows Server Backup can backup\nto a couple of different places.\n\n204\n00:09:45.170 --> 00:09:46.950\nIt can backup to a network share.\n\n205\n00:09:46.950 --> 00:09:47.860\nAnd that's kinda nice.\n\n206\n00:09:47.860 --> 00:09:50.170\nYou can create a centralized network\nshare somewhere that you send all\n\n207\n00:09:50.170 --> 00:09:50.780\nyour backups to.\n\n208\n00:09:50.780 --> 00:09:56.250\nBut the problem with the backups to\na network, is it only supports one backup.\n\n209\n00:09:56.250 --> 00:09:59.420\nSo every night or every hour,\nhowever often you run your backup,\n\n210\n00:09:59.420 --> 00:10:02.120\nyou're gonna be overwriting\nthe previous backup.\n\n211\n00:10:02.120 --> 00:10:04.960\nSo if you wanna maintain\nlike a backup history,\n\n212\n00:10:04.960 --> 00:10:07.160\nyou can't do that with a network share.\n\n213\n00:10:07.160 --> 00:10:09.280\nSo instead you could backup\nto some kind of local media.\n\n214\n00:10:09.280 --> 00:10:12.350\nLike I've added an extra hard drive to\nthis server, so I'll backup to that.\n\n215\n00:10:12.350 --> 00:10:15.660\nAnd that will let you\nbackup multiple backups.\n\n216\n00:10:15.660 --> 00:10:19.230\nOr you could back up to DVD or\ntape if you've got removable media.\n\n217\n00:10:19.230 --> 00:10:20.880\nThose are nice cuz you\ncould take them off-site.\n\n218\n00:10:20.880 --> 00:10:24.510\nThe hard drive I'm gonna back up to I\ncan't take off-site, it's in the server.\n\n219\n00:10:24.510 --> 00:10:27.540\nBut if you want removable media,\nit certainly supports that too.\n\n220\n00:10:27.540 --> 00:10:30.050\nYou just have to remember to go and\nchange the media out each day.\n\n221\n00:10:31.070 --> 00:10:32.620\nAll right, so\nI'm gonna take a backup of this server.\n\n222\n00:10:32.620 --> 00:10:36.500\nNow, I could set up a Backup Schedule and\nrun backups every night,\n\n223\n00:10:36.500 --> 00:10:39.040\nor however often it is I\nneeded to protect my data.\n\n224\n00:10:39.040 --> 00:10:40.580\nThink about your RPO, right.\n\n225\n00:10:40.580 --> 00:10:42.240\nYour Recovery Point Objective.\n\n226\n00:10:42.240 --> 00:10:46.340\nHow much data can you lose and\nit still be okay?\n\n227\n00:10:46.340 --> 00:10:48.390\nIf your company has a six-hour RPO,\n\n228\n00:10:48.390 --> 00:10:51.800\nthen I'm probably need to run\na backup every six hours.\n\n229\n00:10:51.800 --> 00:10:52.860\nSo that when there's a failure,\n\n230\n00:10:52.860 --> 00:10:56.950\nI know I have a backup within the last six\nhours and I can hit my RPO, all right.\n\n231\n00:10:56.950 --> 00:10:59.965\nBut what happens if a backup fails?\n\n232\n00:10:59.965 --> 00:11:01.735\nIf a backup fails and\nI'm running every 6 hours,\n\n233\n00:11:01.735 --> 00:11:04.005\nI could go 12 hours without a backup now.\n\n234\n00:11:04.005 --> 00:11:06.705\nAnd that would be a problem,\nI'd break my RPO.\n\n235\n00:11:06.705 --> 00:11:09.341\nSo you might even wanna go\nshorter than what your RPO is.\n\n236\n00:11:09.341 --> 00:11:13.165\nIf my RPO is every 6 hours, I might\nset the backups to run every 3 hours.\n\n237\n00:11:13.165 --> 00:11:15.315\nSo if one fails, I can correct it.\n\n238\n00:11:15.315 --> 00:11:17.735\nThe next one runs and\nI haven't gone beyond 6 hours, right?\n\n239\n00:11:17.735 --> 00:11:21.145\nSo, just be aware of little decisions like\nthat, that affect when our backups run.\n\n240\n00:11:22.190 --> 00:11:23.675\nI'm gonna go and do a one-time back up,\n\n241\n00:11:23.675 --> 00:11:26.050\ninstead of a schedule cuz\nit's just a lab server here.\n\n242\n00:11:26.050 --> 00:11:29.805\nThe first time you run it, it doesn't\nhave any previously scheduled options.\n\n243\n00:11:29.805 --> 00:11:32.190\nSo we have to define the options\nof what we wanna back up and so\n\n244\n00:11:32.190 --> 00:11:34.690\nI'll just choose Different Options and\ntell what to backup.\n\n245\n00:11:34.690 --> 00:11:36.970\nNow, when you do a backup,\n\n246\n00:11:36.970 --> 00:11:41.610\nyou can do a Custom backup and\njust backup exchange if you want.\n\n247\n00:11:41.610 --> 00:11:42.840\nBut it's not recommended.\n\n248\n00:11:42.840 --> 00:11:45.260\nMicrosoft recommends doing\na full server backup.\n\n249\n00:11:45.260 --> 00:11:48.280\nAnd the reason is,\nit gives you the most flexibility.\n\n250\n00:11:48.280 --> 00:11:53.440\nWith the full server backup,\nif your entire server gets destroyed.\n\n251\n00:11:53.440 --> 00:11:56.930\nWell, you can restore the backup and\nit will install Windows.\n\n252\n00:11:56.930 --> 00:11:58.172\nIt'll put Exchange back on it.\n\n253\n00:11:58.172 --> 00:12:01.698\nIt will put your mailbox database\nto get you a bare metal recovery.\n\n254\n00:12:01.698 --> 00:12:04.642\nYou could bind an entirely new server and\nhave it backup and\n\n255\n00:12:04.642 --> 00:12:08.028\nrunning in short order with a full backup,\nright?\n\n256\n00:12:08.028 --> 00:12:10.140\nAlso with the full backup,\nmaybe my server's fine,\n\n257\n00:12:10.140 --> 00:12:11.570\nit's just the database that's corrupt.\n\n258\n00:12:11.570 --> 00:12:15.170\nI can restore just the database,\nso I have that flexibility.\n\n259\n00:12:15.170 --> 00:12:19.830\nIf I go Custom, I start losing\nthe ability to restore certain things.\n\n260\n00:12:19.830 --> 00:12:22.370\nSo, we typically wanna\ndo a Full server backup.\n\n261\n00:12:24.320 --> 00:12:25.960\nThen it's gonna ask where\nI wanna back it up to.\n\n262\n00:12:25.960 --> 00:12:28.030\nAnd I can back up to\na Remote shared folder.\n\n263\n00:12:28.030 --> 00:12:31.610\nIf I have a DVD drive or if I have\na tape drive, I can back up to those.\n\n264\n00:12:31.610 --> 00:12:34.910\nBut I'm gonna back up to an extra\nhard drive that I've got and\n\n265\n00:12:34.910 --> 00:12:36.370\nI'll just pick that hard drive right here.\n\n266\n00:12:36.370 --> 00:12:37.780\nIt's my E drive.\n\n267\n00:12:37.780 --> 00:12:41.290\nNow, when you choose a full back up, by\ndefault it's gonna backup all your drives.\n\n268\n00:12:41.290 --> 00:12:44.890\nWhich would include my E-drive, so it's\ngonna ask me if I want to exclude that.\n\n269\n00:12:44.890 --> 00:12:49.120\nHere we go and I'll go and say yes to\nexclude it, don't back up the E drive.\n\n270\n00:12:49.120 --> 00:12:51.750\nAnd so now I can see it's gonna\ndo a Bare metal recovery,\n\n271\n00:12:51.750 --> 00:12:53.400\nbacking up the whole server.\n\n272\n00:12:53.400 --> 00:12:57.160\nIt's gonna get the entire C drive and\nit's gonna get my System state.\n\n273\n00:12:57.160 --> 00:12:59.780\nThe System state includes my registry,\n\n274\n00:12:59.780 --> 00:13:02.280\nas well as some of\nthe Exchange configuration.\n\n275\n00:13:02.280 --> 00:13:05.270\nThe bulk of my Exchange configuration\nis in the Active Directory though, so\n\n276\n00:13:05.270 --> 00:13:06.570\nI don't actually have to back that up.\n\n277\n00:13:06.570 --> 00:13:08.570\nIt'll be replicated with the AD.\n\n278\n00:13:08.570 --> 00:13:11.490\nIt's the databases on the C\ndrive that I really care about.\n\n279\n00:13:12.660 --> 00:13:15.400\nNow I'll go and hit Backup and\nnow it's gonna back my server up.\n\n280\n00:13:15.400 --> 00:13:18.650\nNow, depending on the size of your server,\nthis can take a while, right?\n\n281\n00:13:18.650 --> 00:13:22.637\nMy server, I think is probably\naround 23 or 24 gigs of data, so\n\n282\n00:13:22.637 --> 00:13:24.430\nit's gonna run that backup.\n\n283\n00:13:24.430 --> 00:13:27.700\nAnd it'll take it just a little while\nto get that copied over and in-place.\n\n284\n00:13:27.700 --> 00:13:30.750\nNow while that's running, let me talk\nabout what's happening in the background.\n\n285\n00:13:30.750 --> 00:13:33.280\nIn the background, the Volume\nShadow Copy Service is kicking in.\n\n286\n00:13:33.280 --> 00:13:37.350\nAnd it's taking a snapshot of\nmy server as it is right now.\n\n287\n00:13:37.350 --> 00:13:39.750\nSo it's already done that, okay.\n\n288\n00:13:39.750 --> 00:13:44.120\nThen when it starts to back up, it's\nbacking up that Volume Shadow Copy image.\n\n289\n00:13:44.120 --> 00:13:47.280\nSo if new email comes in right now, well,\n\n290\n00:13:47.280 --> 00:13:49.740\nthe Volume Shadow Copy\nsnapshot was already taken.\n\n291\n00:13:49.740 --> 00:13:54.440\nSo, if my backup's set to start at 6 PM,\nit takes the snapshot at 6 PM and\n\n292\n00:13:54.440 --> 00:13:56.570\nit backs up my server\nexactly as it is at 6 PM.\n\n293\n00:13:56.570 --> 00:14:01.150\nIf the backup takes 30 minutes,\nnew email comes in between 6 pm and 6:30.\n\n294\n00:14:01.150 --> 00:14:05.950\nBut it's not a part of the backup, because\nwe're backing up that snapshot, all right?\n\n295\n00:14:05.950 --> 00:14:07.240\nSo that's all happening in the background.\n\n296\n00:14:07.240 --> 00:14:08.540\nAnd we don't have to\nget involved with that.\n\n297\n00:14:08.540 --> 00:14:13.240\nThat's all automatic and that's just\nkind of occurring without us, all right.\n\n298\n00:14:13.240 --> 00:14:15.865\nIn the meantime,\nit's writing this backup to the drive.\n\n299\n00:14:15.865 --> 00:14:20.090\nAnd when it writes it to the drive, if I\nbrowse to it here, we can kinda see it.\n\n300\n00:14:20.090 --> 00:14:23.940\nIt's creating this WindowsImageBackup\nfolder and it's giving the server name.\n\n301\n00:14:23.940 --> 00:14:27.330\nCuz you could actually store backups from\nmore than one server in the same location.\n\n302\n00:14:27.330 --> 00:14:28.770\nSo here's my LAB-MAILBOX01,\n\n303\n00:14:28.770 --> 00:14:33.240\nand as I browse into that, we can\nsee the actual backup being created.\n\n304\n00:14:33.240 --> 00:14:36.070\nNow, we can't really look at\nthe backup files cuz they're VHDs,\n\n305\n00:14:36.070 --> 00:14:38.640\nthey're virtual hard drives and\nthat's pretty awesome.\n\n306\n00:14:38.640 --> 00:14:40.680\nBecause it means when\nI restore this server,\n\n307\n00:14:40.680 --> 00:14:43.920\nI could restore it to a physical server or\na virtual server.\n\n308\n00:14:43.920 --> 00:14:47.130\nYou could restore this right into Hyper-V\nto get back up and running pretty quickly.\n\n309\n00:14:47.130 --> 00:14:48.190\nIt's neat.\nThey support that.\n\n310\n00:14:49.540 --> 00:14:51.290\nNow, other things we need to think about.\n\n311\n00:14:51.290 --> 00:14:53.200\nI'm backing up a mailbox server, right?\n\n312\n00:14:53.200 --> 00:14:55.280\nA mailbox server has\na mailbox database on it.\n\n313\n00:14:55.280 --> 00:14:57.280\nIt's got our email and\nwe know that's important.\n\n314\n00:14:57.280 --> 00:14:58.940\nWe know we need to back that up.\n\n315\n00:14:58.940 --> 00:15:00.340\nSo on a mailbox server,\n\n316\n00:15:00.340 --> 00:15:03.680\nthe key thing that I need to back\nup is that mailbox database.\n\n317\n00:15:03.680 --> 00:15:07.270\nBut there's some other stuff on the\nmailbox server that's important, right.\n\n318\n00:15:07.270 --> 00:15:08.940\nThings that we kind of forget about.\n\n319\n00:15:08.940 --> 00:15:13.870\nFor example, on your mailbox server, you\nmight have your transport rules defined.\n\n320\n00:15:13.870 --> 00:15:16.470\nWell the transport rules get partly\nstored in the Active Directory, but\n\n321\n00:15:16.470 --> 00:15:18.430\nthen they get applied\non the server itself.\n\n322\n00:15:18.430 --> 00:15:21.370\nAnd so, those are getting backed\nup as a part of this too.\n\n323\n00:15:21.370 --> 00:15:25.060\nAlso, if we're using\nthe Unified Communications Management,\n\n324\n00:15:25.060 --> 00:15:27.278\nwe might have custom audio prompts.\n\n325\n00:15:27.278 --> 00:15:31.270\nThere's these default ones that come with\nMicrosoft's Unified Communication Solution\n\n326\n00:15:31.270 --> 00:15:32.260\nwith Lync.\n\n327\n00:15:32.260 --> 00:15:35.950\nBut if you record custom ones,\nyour own voice, your company's name.\n\n328\n00:15:35.950 --> 00:15:38.330\nThose actually get stored on\nyour mailbox server where\n\n329\n00:15:38.330 --> 00:15:40.400\nthe Unified Communication Service\nis running.\n\n330\n00:15:40.400 --> 00:15:42.490\nAnd so when we run this backup,\nwe're backing those up too.\n\n331\n00:15:42.490 --> 00:15:43.330\nAnd that's pretty important.\n\n332\n00:15:43.330 --> 00:15:44.660\nWe wanna make sure that we get those.\n\n333\n00:15:45.740 --> 00:15:49.442\n[COUGH] Some of the other things,\nif you've got message tracking turned on.\n\n334\n00:15:49.442 --> 00:15:51.496\nThose log files are getting\nstored on your servers, so\n\n335\n00:15:51.496 --> 00:15:52.981\nwe're backing up those logs, right?\n\n336\n00:15:52.981 --> 00:15:54.606\nThose are all different things.\n\n337\n00:15:54.606 --> 00:15:56.633\nBut if you're not using\nUnified Communications,\n\n338\n00:15:56.633 --> 00:15:58.528\nif you don't have message\ntracking turned on.\n\n339\n00:15:58.528 --> 00:16:01.139\nThen it's the mailbox data,\nthis is what you really care about, and\n\n340\n00:16:01.139 --> 00:16:02.683\nthese are getting backed up right here.\n\n341\n00:16:02.683 --> 00:16:05.881\nNow, the other server type that we\nhave is the client access server,\n\n342\n00:16:05.881 --> 00:16:07.994\nwe probably need to back that up too,\nright?\n\n343\n00:16:07.994 --> 00:16:10.280\nWell, not really.\n\n344\n00:16:10.280 --> 00:16:12.210\nWhat's on your client access server?\n\n345\n00:16:12.210 --> 00:16:15.490\nAt the end of the day, your client\naccess server doesn't have mail queues.\n\n346\n00:16:15.490 --> 00:16:16.560\nRight?\nCuz it runs the front end\n\n347\n00:16:16.560 --> 00:16:17.300\ntransport service.\n\n348\n00:16:17.300 --> 00:16:19.690\nIt doesn't run the hub\ntransport service anymore.\n\n349\n00:16:19.690 --> 00:16:21.210\nSo it doesn't have mail queues,\n\n350\n00:16:21.210 --> 00:16:25.530\nit doesn't have mailboxes,\nit just has the Outlook WebApp webpages.\n\n351\n00:16:25.530 --> 00:16:29.010\nIt's got the Exchange control panel,\nthe Exchange administration center.\n\n352\n00:16:29.010 --> 00:16:32.950\nThose things, but those, you can get those\nright off the install disk of Exchange.\n\n353\n00:16:32.950 --> 00:16:34.830\nWe don't need to back those up, do we?\n\n354\n00:16:34.830 --> 00:16:38.960\nSo really the only thing on a client\naccess server that's important to us\n\n355\n00:16:38.960 --> 00:16:40.400\nis the certificate.\n\n356\n00:16:40.400 --> 00:16:44.350\nIf you've purchased a certificate from\nan outside vendor, an SSL certificate, and\n\n357\n00:16:44.350 --> 00:16:46.140\nyou've got it attached to OWA and\n\n358\n00:16:46.140 --> 00:16:48.420\nthe other services that are there,\nthat's kind of important.\n\n359\n00:16:48.420 --> 00:16:49.950\nWe want that, right?\n\n360\n00:16:49.950 --> 00:16:53.160\nBut everything else in the client\naccess server is really not a big deal.\n\n361\n00:16:53.160 --> 00:16:54.920\nYou can easily just reinstall Exchange and\n\n362\n00:16:54.920 --> 00:16:58.190\nhave that back, attach your\ncertificate and you're in business.\n\n363\n00:16:58.190 --> 00:17:01.170\nSo your client access servers,\nyou might not even back those up.\n\n364\n00:17:01.170 --> 00:17:02.440\nI know plenty of people don't.\n\n365\n00:17:02.440 --> 00:17:03.460\nPlenty of people do.\n\n366\n00:17:03.460 --> 00:17:05.630\nYou can do a full metal backup\nof your client access server and\n\n367\n00:17:05.630 --> 00:17:10.120\nquickly recover from it, but\nif your backup is a week, a month,\n\n368\n00:17:10.120 --> 00:17:12.560\neven a year or old and\na client access server,\n\n369\n00:17:12.560 --> 00:17:15.750\nthe only thing you're gonna miss out\non are your Windows updates, right.\n\n370\n00:17:15.750 --> 00:17:17.910\nAnd if you've issued a new certificate so\n\n371\n00:17:17.910 --> 00:17:20.540\nyour client access servers\nare a lot less sensitive.\n\n372\n00:17:20.540 --> 00:17:23.430\nThat you don't have to back them up as\noften as you do your mailbox server.\n\n373\n00:17:24.480 --> 00:17:27.380\nAll right, so my mailbox backup\njust finished right there.\n\n374\n00:17:27.380 --> 00:17:30.835\nSo I go and hit close, so\nI got a good backup taken off my database.\n\n375\n00:17:30.835 --> 00:17:34.700\nNow what I can do is I can\njump back to my mailbox.\n\n376\n00:17:34.700 --> 00:17:37.540\nAnd in my mailbox,\nI'm gonna send myself another email.\n\n377\n00:17:37.540 --> 00:17:41.230\nSo I'll just fire off another email to me,\nemailing myself today.\n\n378\n00:17:41.230 --> 00:17:45.460\nAnd this one will be email\nsent after the backup.\n\n379\n00:17:46.870 --> 00:17:47.700\nAll right?\n\n380\n00:17:47.700 --> 00:17:53.140\nSo, now I've got content in my\nmailbox that was sent prior to and\n\n381\n00:17:53.140 --> 00:17:53.990\nafter the backup.\n\n382\n00:17:55.010 --> 00:17:57.950\nAnd I can see that prior to email right\nthere and there's the one sent after.\n\n383\n00:17:57.950 --> 00:18:02.140\nAll right, so I'm in my mailbox,\nthings are running great.\n\n384\n00:18:02.140 --> 00:18:03.660\nAnd then something happens.\n\n385\n00:18:03.660 --> 00:18:07.300\nSomething happens and it could be a little\nproblem, it could be a big problem.\n\n386\n00:18:07.300 --> 00:18:09.371\nIt could be my entire server is destroyed.\n\n387\n00:18:09.371 --> 00:18:13.011\nIf my entire server is destroyed,\nI go in and buy a new server and\n\n388\n00:18:13.011 --> 00:18:15.141\nI take this full back-up that I did,\n\n389\n00:18:15.141 --> 00:18:19.979\nI boot off a Windows Server 2012 disc and\nI tell it I want to do a restore, right?\n\n390\n00:18:19.979 --> 00:18:23.813\nIt's in the menu options of the installer\nin Windows Server 2012 and you point it\n\n391\n00:18:23.813 --> 00:18:27.320\nto this full back-up and it restores\nmy server and we're back in business.\n\n392\n00:18:27.320 --> 00:18:28.880\nThat's easy, we've seen that.\n\n393\n00:18:28.880 --> 00:18:32.510\nIf you've watched our Windows Server 2012\nshows, we've shown that process before.\n\n394\n00:18:33.590 --> 00:18:35.910\nBut what if my server's okay?\n\n395\n00:18:35.910 --> 00:18:39.480\nWhat if it's not the server that's failed,\nbut it's the database itself?\n\n396\n00:18:39.480 --> 00:18:42.730\nMaybe the rate array the database\nwas sitting on got corrupted.\n\n397\n00:18:42.730 --> 00:18:47.080\nMaybe an antivirus software quarantined\nsome of my transaction log files and\n\n398\n00:18:47.080 --> 00:18:48.710\nreally hosed things up that way.\n\n399\n00:18:48.710 --> 00:18:51.570\nMaybe the database just got\ncorrupted somehow right?\n\n400\n00:18:51.570 --> 00:18:53.910\nMaybe some virus has\nspread throughout it and\n\n401\n00:18:53.910 --> 00:18:57.520\nI just want to restore the database,\nnot the whole server right?\n\n402\n00:18:57.520 --> 00:19:00.240\nJust the database, well we can do that.\n\n403\n00:19:00.240 --> 00:19:04.650\nFirst off let me simulate a problem, I'm\ngonna take our database and so I'll just\n\n404\n00:19:04.650 --> 00:19:09.360\ngo down here to servers and databases,\nand I'm gonna dismount my database.\n\n405\n00:19:11.810 --> 00:19:13.310\nAnd that's going to take it offline.\n\n406\n00:19:13.310 --> 00:19:15.110\nSo as soon as that database is offline,\n\n407\n00:19:15.110 --> 00:19:18.070\nnow users can't get to their\nemail anymore, all right?\n\n408\n00:19:18.070 --> 00:19:21.210\nAnd then I'm gonna go and rename\nthe database file so that its missing.\n\n409\n00:19:21.210 --> 00:19:22.580\nSo that's dismounting in the background.\n\n410\n00:19:22.580 --> 00:19:26.840\nAnd I'm going to browse in my hard\ndrive to where that database is.\n\n411\n00:19:26.840 --> 00:19:30.220\nBuried 20 directories deep,\nwhich I will get to eventually.\n\n412\n00:19:31.310 --> 00:19:33.220\nAnd I'll find that mailbox database.\n\n413\n00:19:33.220 --> 00:19:33.920\nThere it is.\n\n414\n00:19:33.920 --> 00:19:36.990\nSo there's the mailbox database, and let\nme just make sure it actually dismounted.\n\n415\n00:19:36.990 --> 00:19:40.030\nIt did.\nAnd I'm just going to rename that file.\n\n416\n00:19:40.030 --> 00:19:43.090\nRight?\nSo, I'll just stick like .old on the end.\n\n417\n00:19:43.090 --> 00:19:46.740\nAnd that database is now gone as\nfar as the system is concerned.\n\n418\n00:19:46.740 --> 00:19:50.140\nAnd gone, corrupted, failed,\nwhatever it doesn't matter.\n\n419\n00:19:50.140 --> 00:19:54.100\nIf the raid array failed, I need to go and\nreplace the hard drives and this\n\n420\n00:19:54.100 --> 00:19:57.310\nwas stored on, let's say it was stored\non my D drive or F drive or whatever.\n\n421\n00:19:57.310 --> 00:19:59.900\nI would just need to make sure I\nhad a D or an F drive back again.\n\n422\n00:19:59.900 --> 00:20:01.760\nRight?\nYou want to recreate that same path\n\n423\n00:20:01.760 --> 00:20:03.250\nthat you had before.\n\n424\n00:20:03.250 --> 00:20:05.210\nAnd now we can run a restore.\n\n425\n00:20:05.210 --> 00:20:09.190\nAnd when you run your restore you're\njust gonna restore the database\n\n426\n00:20:09.190 --> 00:20:10.530\nright back on to the server.\n\n427\n00:20:10.530 --> 00:20:11.210\nOkay?\n\n428\n00:20:11.210 --> 00:20:14.190\nSo fortunately we don't\nhave to do a full restore.\n\n429\n00:20:14.190 --> 00:20:17.080\nMy backup was 21 gigs in size.\n\n430\n00:20:17.080 --> 00:20:20.070\nBut that mailbox database,\nit's only 250 megs.\n\n431\n00:20:20.070 --> 00:20:24.830\nSo I don't want to restore 21 gigs of\ndata when I only need 10% of that.\n\n432\n00:20:24.830 --> 00:20:31.270\nI need a much smaller sized amount of\ndata or not 10%, just 1% of that data.\n\n433\n00:20:31.270 --> 00:20:34.630\n[LAUGH] Any how let me go in here and\nI'm gonna restore just that database.\n\n434\n00:20:34.630 --> 00:20:39.080\nSo what we do is we jump back into\nour Windows Server backup and,\n\n435\n00:20:39.080 --> 00:20:40.650\nover on the right side\nyou can choose recover,\n\n436\n00:20:40.650 --> 00:20:44.310\nand when you go to recover, it's asking\nyou what server you wanna recover.\n\n437\n00:20:44.310 --> 00:20:45.060\nI'm recovering this one.\n\n438\n00:20:45.060 --> 00:20:47.700\nAnd then it asks you to pick a date.\n\n439\n00:20:47.700 --> 00:20:49.480\nIf you've got more than one backup,\n\n440\n00:20:49.480 --> 00:20:51.900\nyou can choose what date\nyou wanna roll back to.\n\n441\n00:20:51.900 --> 00:20:54.660\nNormally we want the newest\nbackup available and\n\n442\n00:20:54.660 --> 00:20:55.970\nthat's what it's gonna choose by default.\n\n443\n00:20:55.970 --> 00:20:59.120\nSo it's showing my newest\nbackup is today at 10:04 AM.\n\n444\n00:20:59.120 --> 00:21:00.580\nThat's the one that I'm gonna restore.\n\n445\n00:21:00.580 --> 00:21:01.170\nAll right.\n\n446\n00:21:01.170 --> 00:21:04.440\nBut I could go back in time if\nthat's what I was looking to do.\n\n447\n00:21:04.440 --> 00:21:07.450\nAnd it'll have any date that has\nthe back up will be written in bold.\n\n448\n00:21:07.450 --> 00:21:10.680\nSee how that 19 is kinda bold but\nthe other numbers aren't?\n\n449\n00:21:10.680 --> 00:21:12.180\nAnd that's letting me know\nthere's a backup on that date.\n\n450\n00:21:12.180 --> 00:21:16.030\nAll right, now's where things\nget a little bit tricky.\n\n451\n00:21:16.030 --> 00:21:19.190\nWhen you go to do the restore you\ncan restore entire hard drives,\n\n452\n00:21:19.190 --> 00:21:20.770\nyou can restore files and folders.\n\n453\n00:21:20.770 --> 00:21:23.810\nWhat we want to restore is an application.\n\n454\n00:21:23.810 --> 00:21:26.890\nYou might be tempted to choose files and\nfolders, and\n\n455\n00:21:26.890 --> 00:21:29.880\nif you do that you could go and you could\nchoose that EDB file and restore it.\n\n456\n00:21:29.880 --> 00:21:32.430\nThe problem is,\nwhat about your transaction logs?\n\n457\n00:21:32.430 --> 00:21:36.200\nWhat about the other things that\nare associated with that database?\n\n458\n00:21:36.200 --> 00:21:38.210\nWell those might be messed up too and so\n\n459\n00:21:38.210 --> 00:21:40.810\nwe might need to bring in\nthat whole database itself.\n\n460\n00:21:40.810 --> 00:21:43.350\nSo it's better to choose applications.\n\n461\n00:21:43.350 --> 00:21:45.930\nWhen you choose applications\nyou can move forward and\n\n462\n00:21:45.930 --> 00:21:47.880\nMicrosoft Exchange will be\nright there in the list.\n\n463\n00:21:47.880 --> 00:21:50.480\nThat was part of the system\nstate that was backed up.\n\n464\n00:21:50.480 --> 00:21:52.340\nAnd so I've got that Exchange backup and\n\n465\n00:21:52.340 --> 00:21:57.040\nif I view its details I can see\nright here that it's got that\n\n466\n00:21:57.040 --> 00:22:00.680\nmailbox backup right there and\nthat's got my Exchange databases in there.\n\n467\n00:22:00.680 --> 00:22:02.180\nSo that's the one that I want.\n\n468\n00:22:02.180 --> 00:22:04.500\nNow I do have to make a decision.\n\n469\n00:22:04.500 --> 00:22:08.720\nIf I do full backups every night,\nI'm gonna restore a full backup and\n\n470\n00:22:08.720 --> 00:22:11.200\nmy database will be back online and\nthat'll be great.\n\n471\n00:22:11.200 --> 00:22:12.110\nAll right?\n\n472\n00:22:12.110 --> 00:22:15.110\nBut what if I run a full\nbackup at midnight and\n\n473\n00:22:15.110 --> 00:22:19.220\nthen I run incremental backups\nevery day at, or every hour.\n\n474\n00:22:19.220 --> 00:22:21.700\nWe'll say every hour,\nI run an incremental backup.\n\n475\n00:22:21.700 --> 00:22:25.830\nWell, I would need to recover my full\nbackup, and then follow that up by doing\n\n476\n00:22:25.830 --> 00:22:28.640\nall my incremental's to get\nback to current, all right.\n\n477\n00:22:28.640 --> 00:22:32.590\nNow if we're doing the back ups right\nhere in the Windows server back up and\n\n478\n00:22:32.590 --> 00:22:34.490\nwe're doing the back ups on disk or\n\n479\n00:22:34.490 --> 00:22:39.370\nnetwork share, well I don't have to worry\nabout that, it'll figure that out for me.\n\n480\n00:22:39.370 --> 00:22:41.100\nBut if I'm doing the back ups to tape or\n\n481\n00:22:41.100 --> 00:22:44.570\nDVD, I\"m gonna have to\nrestore the full one first.\n\n482\n00:22:44.570 --> 00:22:48.680\nAnd then restore each of the incrementals\nall the way back to the latest one to get\n\n483\n00:22:48.680 --> 00:22:49.520\nback in business.\n\n484\n00:22:49.520 --> 00:22:52.532\nSo if I'm gonna have to do more than one\nrestore it's really important that I check\n\n485\n00:22:52.532 --> 00:22:53.570\nthis option here.\n\n486\n00:22:53.570 --> 00:22:56.930\nDo not perform a roll four recovery\nof the application database.\n\n487\n00:22:56.930 --> 00:22:58.070\nAll right.\n\n488\n00:22:58.070 --> 00:23:02.380\nWhat happens is on your very last restore,\nso let's say you have to do five,\n\n489\n00:23:02.380 --> 00:23:04.760\nyou have a full and\nthen four incrementals.\n\n490\n00:23:04.760 --> 00:23:08.680\nOn the very last one, you uncheck this,\nand it'll restore the database and\n\n491\n00:23:08.680 --> 00:23:10.000\nbring it live.\n\n492\n00:23:10.000 --> 00:23:12.770\nBut if you've got more backups to restore,\nyou check this, and\n\n493\n00:23:12.770 --> 00:23:16.770\nthat says, go ahead and restore the data,\nbut don't bring the database live yet.\n\n494\n00:23:16.770 --> 00:23:20.300\nHold it down so\nwe can continue doing more restores.\n\n495\n00:23:20.300 --> 00:23:24.040\nAnd on the last one you'll uncheck that,\nand then we'll be done.\n\n496\n00:23:24.040 --> 00:23:26.540\nI just have one full back up,\nso this is my last one.\n\n497\n00:23:26.540 --> 00:23:28.870\nI'll leave that unchecked and\nI'll move forward.\n\n498\n00:23:28.870 --> 00:23:30.820\nAnd it's gonna restore.\n\n499\n00:23:30.820 --> 00:23:33.820\nNow, if my database was corrupted,\n\n500\n00:23:33.820 --> 00:23:37.000\nI just want to restore right\nback to the original location.\n\n501\n00:23:37.000 --> 00:23:40.430\nBut that's gonna restore\nthe whole mailbox database.\n\n502\n00:23:40.430 --> 00:23:44.825\nIf I just want one person's mailbox,\nI can recover to another location and\n\n503\n00:23:44.825 --> 00:23:46.091\nlift it out of there.\n\n504\n00:23:46.091 --> 00:23:49.641\nOr, if I'm trying to recover this,\nand the hard drive isn't available and\n\n505\n00:23:49.641 --> 00:23:53.356\nI have a different drive letter, I can\nchoose to recover to another location and\n\n506\n00:23:53.356 --> 00:23:54.648\nsend it to that other spot.\n\n507\n00:23:54.648 --> 00:23:56.365\nSo I got a couple of\ndifferent choices here.\n\n508\n00:23:56.365 --> 00:24:00.442\nBut typically we're just gonna recover to\nthe original location to get this database\n\n509\n00:24:00.442 --> 00:24:01.810\nback online.\n\n510\n00:24:01.810 --> 00:24:04.250\nAnd so when I move forward it's\ngot all the information it needs,\n\n511\n00:24:04.250 --> 00:24:07.610\nit's gonna restore, and this will run\nmuch faster than the backup because I'm\n\n512\n00:24:07.610 --> 00:24:11.150\njust restoring my Exchange\ndata not the whole server.\n\n513\n00:24:11.150 --> 00:24:15.230\nSo it should be, I don't know,\nsomewhere in the 300 meg range.\n\n514\n00:24:15.230 --> 00:24:17.610\nThe database itself was 250 megs.\n\n515\n00:24:17.610 --> 00:24:20.300\nBut then you've got some other Exchange\nfiles that it's gonna replace and\n\n516\n00:24:20.300 --> 00:24:21.490\nput back, too.\n\n517\n00:24:21.490 --> 00:24:23.330\nSo that restore's gonna run.\n\n518\n00:24:23.330 --> 00:24:27.930\nWhen it's done, my database will be\nback because I unchecked the option in\n\n519\n00:24:27.930 --> 00:24:30.710\nthe menu there, it's gonna automatically\nbring the database alive and\n\n520\n00:24:30.710 --> 00:24:33.930\nmy users should be able to get\nback into their email again.\n\n521\n00:24:33.930 --> 00:24:34.610\nOkay?\n\n522\n00:24:34.610 --> 00:24:36.160\nSo that's happening right now.\n\n523\n00:24:36.160 --> 00:24:38.100\nSee how it says preparing to recover?\n\n524\n00:24:38.100 --> 00:24:41.420\nWhat it's doing is it's going through and\nadjusting a few little settings for us.\n\n525\n00:24:41.420 --> 00:24:43.190\nSome of the settings are ones\nthat we can't even adjust for\n\n526\n00:24:43.190 --> 00:24:45.850\nourselves, just getting\nthat database ready.\n\n527\n00:24:45.850 --> 00:24:49.410\nIf the database records are already\nthere and the database is mounted,\n\n528\n00:24:49.410 --> 00:24:52.440\nit's gotta dismount the database to\nbe able to do this restore, and so\n\n529\n00:24:52.440 --> 00:24:54.300\nit'll do that process in the background.\n\n530\n00:24:54.300 --> 00:24:57.540\nSo, there it goes actually running,\n270 megs of data,\n\n531\n00:24:57.540 --> 00:24:59.870\nso just under that 300 megs that I said.\n\n532\n00:24:59.870 --> 00:25:04.520\nAnd see how it says it's done 100%\nrecovered, but it's still working?\n\n533\n00:25:04.520 --> 00:25:07.850\nIt's gotta roll forward the transaction\nlogs on the database, and\n\n534\n00:25:07.850 --> 00:25:08.950\nthen it's gotta bring it live.\n\n535\n00:25:08.950 --> 00:25:09.990\nSo it's doing that.\n\n536\n00:25:09.990 --> 00:25:12.730\nAnd it's not until the database is\nactually live that it'll say that it's\n\n537\n00:25:12.730 --> 00:25:14.270\nfinished, so we'll give it a moment.\n\n538\n00:25:14.270 --> 00:25:17.250\nBut if we look on the hard drive,\nwe can see what it's doing.\n\n539\n00:25:17.250 --> 00:25:19.360\nSee how it restored that EDB file?\n\n540\n00:25:19.360 --> 00:25:20.710\nSo it brought that back from the backup.\n\n541\n00:25:20.710 --> 00:25:22.940\nThere's the one that I renamed,\nstill sitting there.\n\n542\n00:25:22.940 --> 00:25:26.770\nBut that's the one that it just\nrestored and brought back online.\n\n543\n00:25:26.770 --> 00:25:28.710\nAll right.\n\n544\n00:25:28.710 --> 00:25:29.840\nSo now that it says that it's done,\n\n545\n00:25:29.840 --> 00:25:34.710\nI should be able to log back into my\nmailbox and let's see what we get, right?\n\n546\n00:25:34.710 --> 00:25:40.410\nI'm gonna open up a new OWA window,\nand we'll get connected into that.\n\n547\n00:25:41.470 --> 00:25:44.390\nNow, if I try to log in while my database\nwas offline, I would have gotten\n\n548\n00:25:44.390 --> 00:25:48.850\nan error message, saying that it couldn't\ncontact it, but I log in and here I am.\n\n549\n00:25:48.850 --> 00:25:51.300\nI got logged in, I'm in my mailbox, and\n\n550\n00:25:51.300 --> 00:25:55.936\nnotice something,\nhere's my email sent prior to the backup,\n\n551\n00:25:55.936 --> 00:25:57.980\nhere's my email sent after the backup,\nhow do they get that?\n\n552\n00:25:57.980 --> 00:26:00.107\nHow do they get an email\nsent after the backup?\n\n553\n00:26:00.107 --> 00:26:02.428\nI renamed the database, right?\n\n554\n00:26:02.428 --> 00:26:04.912\nSo the database was completely deleted and\n\n555\n00:26:04.912 --> 00:26:08.987\nsomehow I magically got an email\nthat wasn't included in the backup.\n\n556\n00:26:08.987 --> 00:26:10.210\nAll right?\n\n557\n00:26:10.210 --> 00:26:13.610\nHow that worked is with transaction logs,\nright?\n\n558\n00:26:13.610 --> 00:26:16.910\nWhen you send a change\nto an Exchange database,\n\n559\n00:26:16.910 --> 00:26:18.950\nthe change doesn't go\ndirectly to the database.\n\n560\n00:26:18.950 --> 00:26:21.970\nIt goes to the transaction logs first.\n\n561\n00:26:21.970 --> 00:26:26.770\nOnce it's in the transaction logs,\nthen, it gets written to the database.\n\n562\n00:26:26.770 --> 00:26:29.340\nWell, the change stays\nin the transaction logs.\n\n563\n00:26:29.340 --> 00:26:31.660\nIt stays there until\nyou run another backup.\n\n564\n00:26:31.660 --> 00:26:33.100\nI haven't run another backup.\n\n565\n00:26:33.100 --> 00:26:37.320\nSo, that new email was in\nthose transaction logs, and\n\n566\n00:26:37.320 --> 00:26:40.220\nso exchange saw that and said hey,\nI'm gonna put the database back but\n\n567\n00:26:40.220 --> 00:26:42.400\noh look, you've got some transaction logs.\n\n568\n00:26:42.400 --> 00:26:44.170\nLet me roll those forward too, and\n\n569\n00:26:44.170 --> 00:26:47.830\nthat means I was able to recover\nright to the point of failure.\n\n570\n00:26:47.830 --> 00:26:50.470\nAnd I didn't loose one single email,\n\n571\n00:26:50.470 --> 00:26:53.550\nmy RPO here was zero,\nmy recovery point was zero.\n\n572\n00:26:53.550 --> 00:26:56.494\nI didn't lose any data, that's perfect.\n\n573\n00:26:56.494 --> 00:27:00.471\nIf you can recover your transaction logs,\nyou can get right to the point of failure,\n\n574\n00:27:00.471 --> 00:27:01.450\nall right?\n\n575\n00:27:01.450 --> 00:27:05.500\nInstead if I had lost all of my data,\nso if I go back here and\n\n576\n00:27:05.500 --> 00:27:10.190\nI'll dismount that database, see,\nI was mounted again, so I'll dismount it.\n\n577\n00:27:10.190 --> 00:27:12.643\nAnd if I had been\na little more aggressive,\n\n578\n00:27:12.643 --> 00:27:15.234\ninstead of just deleting\nthe database file,\n\n579\n00:27:15.234 --> 00:27:20.225\nif I had deleted the transaction logs too,\nthen I would have lost everything, right?\n\n580\n00:27:20.225 --> 00:27:22.050\nEverything after the backup.\n\n581\n00:27:22.050 --> 00:27:26.270\nSo, now if I go in here, so I dismounted\nthe database, if I go into this folder and\n\n582\n00:27:26.270 --> 00:27:28.880\nI take all this data, and\nI'm just gonna delete it all, right?\n\n583\n00:27:28.880 --> 00:27:30.626\nLook who's go crazy?\n\n584\n00:27:30.626 --> 00:27:33.302\nLet's see.\n\n585\n00:27:33.302 --> 00:27:34.270\nFolder's open somewhere.\n\n586\n00:27:34.270 --> 00:27:35.170\nBut I'll delete everything else.\n\n587\n00:27:35.170 --> 00:27:36.230\nThere we go.\nAll right, so\n\n588\n00:27:36.230 --> 00:27:37.780\nI just deleted my transaction logs too.\n\n589\n00:27:37.780 --> 00:27:39.550\nLet's say I lost it all.\n\n590\n00:27:39.550 --> 00:27:41.660\nIf you lose it all when\nyou do the restore,\n\n591\n00:27:41.660 --> 00:27:44.070\nthere's no transaction\nlogs to play forward.\n\n592\n00:27:44.070 --> 00:27:46.630\nAnd so now,\njust gonna recover what's in the backup.\n\n593\n00:27:46.630 --> 00:27:50.480\nSo, if I go back and redo that recovery,\nI'll come back here and\n\n594\n00:27:50.480 --> 00:27:53.070\nrestore it, restoring that same back up.\n\n595\n00:27:53.070 --> 00:27:54.790\nI'll choose applications.\n\n596\n00:27:54.790 --> 00:27:58.080\nThe only difference this time,\nis there's no transaction logs for\n\n597\n00:27:58.080 --> 00:27:59.380\nit to play forward.\n\n598\n00:27:59.380 --> 00:28:00.850\nSince it can't play those forward,\n\n599\n00:28:00.850 --> 00:28:03.600\nI'll lose that email that\ncame in after my back up.\n\n600\n00:28:03.600 --> 00:28:05.980\nSo, that's where it's important, right?\n\n601\n00:28:05.980 --> 00:28:08.990\nIf we had lost our entire server,\nthis is a question from the chat room,\n\n602\n00:28:08.990 --> 00:28:13.110\nif we lost the whole server, then we\nlost the transaction logs too, right?\n\n603\n00:28:13.110 --> 00:28:14.700\nSo when we went and did the restore,\n\n604\n00:28:14.700 --> 00:28:18.160\nwe would just have what was in the back\nup, and so we wouldn't get that stuff.\n\n605\n00:28:18.160 --> 00:28:21.600\nBut, remember way back in\nthe beginning of this series where\n\n606\n00:28:21.600 --> 00:28:23.370\nI talked about planning storage?\n\n607\n00:28:23.370 --> 00:28:26.010\nIf your transaction logs are on\none set of hard drives, and\n\n608\n00:28:26.010 --> 00:28:29.520\nyour database is on another set of hard\ndrives, and it's the hard drive your\n\n609\n00:28:29.520 --> 00:28:32.900\ndatabase is on that failed,\nyour transaction logs are still intact.\n\n610\n00:28:32.900 --> 00:28:37.120\nAnd so you can restore just your\ndatabase and now you're back up and\n\n611\n00:28:37.120 --> 00:28:40.150\nhappy again and it rolls forward\nthose transaction logs, right?\n\n612\n00:28:40.150 --> 00:28:42.210\nThat's how we make sure\nwe don't lose any data.\n\n613\n00:28:42.210 --> 00:28:46.330\nAnd that's another reason why you\nwanna store your transaction logs on\n\n614\n00:28:46.330 --> 00:28:50.550\na separate hard drive from your database,\nfor recovery purposes, right?\n\n615\n00:28:50.550 --> 00:28:51.739\nSo this is gonna run the restore.\n\n616\n00:28:51.739 --> 00:28:54.283\nIt's gonna notice that I don't\nhave any transaction logs and so\n\n617\n00:28:54.283 --> 00:28:57.263\nit's gonna create empty ones and\nbring that database back up and running.\n\n618\n00:28:57.263 --> 00:29:00.008\nSo, all right.\n\n619\n00:29:00.008 --> 00:29:03.985\nSo once this is in place, we'll be back\nin business and we should see that other\n\n620\n00:29:03.985 --> 00:29:07.605\nemail unless it found some other\nmagical way to get that missing email,\n\n621\n00:29:07.605 --> 00:29:08.470\nit'll be gone.\n\n622\n00:29:08.470 --> 00:29:10.290\nNow when I say other magical ways,\n\n623\n00:29:10.290 --> 00:29:12.600\nthere are actually some\nmagical ways that can do that.\n\n624\n00:29:12.600 --> 00:29:14.700\nWhat if you have\na Database Availability Group?\n\n625\n00:29:14.700 --> 00:29:18.130\nIf you have a DAG, your database is\nbeing copied to another server so\n\n626\n00:29:18.130 --> 00:29:20.940\nwhen you reach toward this one,\nthe other servers got newer data,\n\n627\n00:29:20.940 --> 00:29:22.200\nit will actually pull that back.\n\n628\n00:29:22.200 --> 00:29:23.460\nAnd so we might get it from there.\n\n629\n00:29:23.460 --> 00:29:24.560\nRight?\nThere are other places\n\n630\n00:29:24.560 --> 00:29:25.610\nthe email can come from.\n\n631\n00:29:25.610 --> 00:29:29.060\nExchange will automatically try to\nget you to the newest, latest and\n\n632\n00:29:29.060 --> 00:29:32.672\ngreatest copy of your data through\nwhatever means that it can.\n\n633\n00:29:32.672 --> 00:29:35.600\nAll right my restore just finished,\nI can see that it's completed.\n\n634\n00:29:35.600 --> 00:29:38.700\nSo if I jump back here and\nlet me get back into my mailbox.\n\n635\n00:29:38.700 --> 00:29:42.553\nI'll just open up a new OWA window,\nno sense trying to reuse one, and\n\n636\n00:29:42.553 --> 00:29:45.018\nwhen I get logged in this time,\nthere we go.\n\n637\n00:29:45.018 --> 00:29:48.774\nI'm back in my mailbox, I've got\nthe email sent prior to the backup, but\n\n638\n00:29:48.774 --> 00:29:51.089\nI lost the one sent after the backup,\nright?\n\n639\n00:29:51.089 --> 00:29:54.249\nSo, that's an example right there\nof how important it is to try and\n\n640\n00:29:54.249 --> 00:29:56.680\nrecover our transaction\nlog files if we can.\n\n641\n00:29:56.680 --> 00:30:00.720\nIf we can save those transaction logs we\ncan get right to the point of failure and\n\n642\n00:30:00.720 --> 00:30:02.240\nlose no email.\n\n643\n00:30:02.240 --> 00:30:03.370\nThat's the perfect solution.\n\n644\n00:30:03.370 --> 00:30:05.520\nThat's really when you know\nyou've done a great job.\n\n645\n00:30:06.800 --> 00:30:10.450\nAll right, well,\nwhat we just saw in this episode,\n\n646\n00:30:10.450 --> 00:30:12.750\ncuz that's really about all I've got for\nstandard back ups.\n\n647\n00:30:12.750 --> 00:30:15.970\nSo what we saw in this episode was\nhow to do a standard back up of\n\n648\n00:30:15.970 --> 00:30:19.390\nan Exchange Server,\nhow to restore that and get us back up and\n\n649\n00:30:19.390 --> 00:30:22.130\nrunning, and save the day, right?\n\n650\n00:30:22.130 --> 00:30:24.090\nYou saw that backup,\nit did not take long to restore.\n\n651\n00:30:24.090 --> 00:30:25.960\nNow my mailbox database is pretty small.\n\n652\n00:30:25.960 --> 00:30:29.980\nIf you've got a terabyte backup, it's\ngonna take a while to restore that, right?\n\n653\n00:30:29.980 --> 00:30:32.540\nAnd so that's recovery time objective,\nwe've gotta be aware of it.\n\n654\n00:30:32.540 --> 00:30:35.830\nBut being able to quickly and\neasily get that data right back in there,\n\n655\n00:30:35.830 --> 00:30:37.310\nget it back in business?\n\n656\n00:30:37.310 --> 00:30:38.870\nWell, it wasn't that hard.\n\n657\n00:30:38.870 --> 00:30:42.480\nAnd we did it with software included\nright here in Windows Server.\n\n658\n00:30:42.480 --> 00:30:45.160\nThere's third party options you\nalways wanna consider, right?\n\n659\n00:30:45.160 --> 00:30:47.430\nThose have their pros and cons.\n\n660\n00:30:47.430 --> 00:30:50.680\nBut as far as simple, straightforward\nbackups, this one works really well and\n\n661\n00:30:50.680 --> 00:30:51.790\nit's right there.\n\n662\n00:30:51.790 --> 00:30:55.530\nNow, that's not the last that\nI have to say on recovery.\n\n663\n00:30:55.530 --> 00:31:00.630\nWhat I just gave you is a very typical\nrestore for a full server failure, right?\n\n664\n00:31:00.630 --> 00:31:03.800\nBut there's other types of recovery\nthat you might need to do.\n\n665\n00:31:03.800 --> 00:31:08.310\nAnd if you have a gigantic database and\nRPO is a problem, there's something\n\n666\n00:31:08.310 --> 00:31:12.220\ncalled a dial tone recovery we can use to\nshrink that RPO really, really small and\n\n667\n00:31:12.220 --> 00:31:12.810\nreally help out.\n\n668\n00:31:12.810 --> 00:31:17.030\nSo stay tuned for those episodes where\nI show some alternative methods for\n\n669\n00:31:17.030 --> 00:31:18.890\nbacking up and recover.\n\n670\n00:31:18.890 --> 00:31:20.760\nBut for\nthis episode we'll wrap it up here.\n\n671\n00:31:20.760 --> 00:31:26.090\nSo, signing off for ITProTV,\nI'm Don Pezet and I'll see you next time.\n\n672\n00:31:26.090 --> 00:31:30.940\n[SOUND]\n\n",
          "vimeoId": "136822912"
        },
        {
          "description": "In this episode, Don demonstrates creating a Dial Tone database in Exchange. This is the quickest way to get a failed Mailbox Server online after a failure, but requires proper planning and execution.",
          "length": "1975",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-3-dial_tone_restore-081915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-3-dial_tone_restore-081915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-3-dial_tone_restore-081915-1-sm.jpg",
          "title": "Dial Tone Restore",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.489\n[MUSIC]\n\n2\n00:00:10.489 --> 00:00:11.395\nAll right.\n\n3\n00:00:11.395 --> 00:00:13.602\nGood morning, good afternoon and\ngood evening, and\n\n4\n00:00:13.602 --> 00:00:15.478\nwelcome back to another\nepisode of ITProTV.\n\n5\n00:00:15.478 --> 00:00:16.896\nI'm your host Don Pezet,\n\n6\n00:00:16.896 --> 00:00:20.513\nback to you with another episode\nof Microsoft Exchange 2013.\n\n7\n00:00:20.513 --> 00:00:24.610\nAnd in this episode, we're gonna be taking\na look at how to do a dial tone recovery\n\n8\n00:00:24.610 --> 00:00:26.381\nof an exchange mailbox database.\n\n9\n00:00:26.381 --> 00:00:28.494\nNow, what is dial tone recovery?\n\n10\n00:00:28.494 --> 00:00:32.013\nWell, in our previous episodes,\nwe talked about how to back-up and\n\n11\n00:00:32.013 --> 00:00:34.988\nrestore an exchange database,\nand during that process,\n\n12\n00:00:34.988 --> 00:00:38.226\nyou assume that your database\nhas failed and has gone offline.\n\n13\n00:00:38.226 --> 00:00:40.102\nAnd now we need to do the restore.\n\n14\n00:00:40.102 --> 00:00:43.408\nAnd, while you're restoring\nyou're in what's called your RTO,\n\n15\n00:00:43.408 --> 00:00:44.974\nyour recovery time objective.\n\n16\n00:00:44.974 --> 00:00:48.440\nIt's the amount of time it takes you\nto get the database back online.\n\n17\n00:00:48.440 --> 00:00:53.092\nThe bigger your database gets,\nthe longer it takes to get back online.\n\n18\n00:00:53.092 --> 00:00:57.223\nSo, if your database is a terabyte and\nit's spread across five backup tapes,\n\n19\n00:00:57.223 --> 00:01:00.355\nmaybe you've got a full backup and\nseveral incrementals,\n\n20\n00:01:00.355 --> 00:01:02.374\nit can take a while to do that restore.\n\n21\n00:01:02.374 --> 00:01:05.131\nSo, if it takes you two\nhours to do that restore,\n\n22\n00:01:05.131 --> 00:01:09.320\nthat's two hours that your fellow\nemployees can't access their email.\n\n23\n00:01:09.320 --> 00:01:12.829\nNow, new emails coming in, and it's\ngetting put into the mail queues on your\n\n24\n00:01:12.829 --> 00:01:16.292\nclient access server, or on your\nmailbox server, if they're available.\n\n25\n00:01:16.292 --> 00:01:20.682\nIf they're not available,\nthen the mail's getting bounced, right?\n\n26\n00:01:20.682 --> 00:01:23.500\nPeople are trying to do retries,\nand if they're doing retries,\n\n27\n00:01:23.500 --> 00:01:26.842\nyou've only got 72 hours, before most\nmail servers give up on that email.\n\n28\n00:01:26.842 --> 00:01:29.257\nSo, you have this kind of time limit.\n\n29\n00:01:29.257 --> 00:01:32.541\nYou need to get your mailbox database\nback up as quickly as you can, but\n\n30\n00:01:32.541 --> 00:01:34.163\nyou wanna restore your user data.\n\n31\n00:01:34.163 --> 00:01:38.374\nAnd the larger your mailbox database is,\nthe harder that becomes.\n\n32\n00:01:38.374 --> 00:01:42.222\nSo, a dial tone recovery\nseeks to help us fix that.\n\n33\n00:01:42.222 --> 00:01:47.124\nA dial tone recovery makes our recovery\ntime objective, our RTO, it makes it zero.\n\n34\n00:01:47.124 --> 00:01:50.639\nIt allows us to get a database back up and\nrunning instantly.\n\n35\n00:01:50.639 --> 00:01:53.430\nNow, there's pros and\ncons to doing it this way, but\n\n36\n00:01:53.430 --> 00:01:56.861\nthe way that it works is it basically\nbrings up an empty database.\n\n37\n00:01:56.861 --> 00:01:58.692\nIt says okay, your database is lost.\n\n38\n00:01:58.692 --> 00:01:59.841\nThat really stinks.\n\n39\n00:01:59.841 --> 00:02:02.483\nWe don't want that but\nwe know you need to get around it.\n\n40\n00:02:02.483 --> 00:02:07.390\nBut for right now, let's bring up\nan empty database and let users get in.\n\n41\n00:02:07.390 --> 00:02:11.249\nUsers will be able to get into\nthe mailbox, and it will be empty.\n\n42\n00:02:11.249 --> 00:02:16.444\nBut, they can send email and new email\ncoming in will come into their mailbox.\n\n43\n00:02:16.444 --> 00:02:18.531\nSo, they're able to work.\n\n44\n00:02:18.531 --> 00:02:20.714\nThey can get in, they can send email,\nthey can receive email.\n\n45\n00:02:20.714 --> 00:02:23.626\nYou're back and\nonline in a matter of moments.\n\n46\n00:02:23.626 --> 00:02:24.427\nAll right.\n\n47\n00:02:24.427 --> 00:02:26.342\nBut what about all your old email?\n\n48\n00:02:26.342 --> 00:02:27.682\nWell, now that the server's online,\n\n49\n00:02:27.682 --> 00:02:29.518\nyou don't have to worry\nabout losing email anymore.\n\n50\n00:02:29.518 --> 00:02:32.906\nRight, you can, [SOUND],\ndisaster averted, the system's up,\n\n51\n00:02:32.906 --> 00:02:35.439\npeople are able to get\ninto their email and work.\n\n52\n00:02:35.439 --> 00:02:39.989\nBut now, you can go back and restore all\nthe historical data and bring it back\n\n53\n00:02:39.989 --> 00:02:44.276\ninto the mailbox and so people are able\nto get in there and start to work.\n\n54\n00:02:44.276 --> 00:02:47.257\nSo, that's really the whole\npoint of a dial tone recovery,\n\n55\n00:02:47.257 --> 00:02:49.601\nis just to get people in\nthere as fast as you can.\n\n56\n00:02:49.601 --> 00:02:53.230\nIf email's a critical service for you,\nand you're worried about losing email,\n\n57\n00:02:53.230 --> 00:02:56.225\nwe need to get a mailbox database up and\ngoing, even an empty one, so\n\n58\n00:02:56.225 --> 00:02:59.486\nthat at least people can get in there and\nstart working with new stuff, and\n\n59\n00:02:59.486 --> 00:03:00.873\nthen we restore the old stuff.\n\n60\n00:03:00.873 --> 00:03:01.592\nAll right.\n\n61\n00:03:01.592 --> 00:03:03.921\nThe process, it's actually not that hard.\n\n62\n00:03:03.921 --> 00:03:06.108\nIt's a pretty easy process to go through.\n\n63\n00:03:06.108 --> 00:03:09.453\nBut there's some little confusing steps\nin there that I wanna highlight and\n\n64\n00:03:09.453 --> 00:03:11.924\nmake sure you guys understand\nwhy we do it a certain way.\n\n65\n00:03:11.924 --> 00:03:14.925\nBut the first part,\njust getting a dial-tone database up and\n\n66\n00:03:14.925 --> 00:03:16.032\ngoing is really easy.\n\n67\n00:03:16.032 --> 00:03:17.246\nLet me show you.\n\n68\n00:03:17.246 --> 00:03:20.792\nSo, here, I'm logged into my mailbox and\nI've taken a backup of my server.\n\n69\n00:03:20.792 --> 00:03:22.580\nI took the backup prior to the show.\n\n70\n00:03:22.580 --> 00:03:24.055\nAnd I sent a few emails.\n\n71\n00:03:24.055 --> 00:03:26.831\nI got an email that I sent\nmyself prior to the backup and\n\n72\n00:03:26.831 --> 00:03:29.313\nan email that I sent to\nmyself after the backup.\n\n73\n00:03:29.313 --> 00:03:30.961\nNow, why did I do that?\n\n74\n00:03:30.961 --> 00:03:35.369\nI did that because emails prior to the\nbackup are gonna be part of the backup.\n\n75\n00:03:35.369 --> 00:03:39.506\nEmails that were sent after the backup\nare gonna be in the transaction log, and\n\n76\n00:03:39.506 --> 00:03:43.095\nthey'll be in the database itself but\nthey won't be in the backup.\n\n77\n00:03:43.095 --> 00:03:46.226\nAnd so, when I restore, there's\na possibility I might be able to recover\n\n78\n00:03:46.226 --> 00:03:49.562\nthose transaction log files if it's\njust my database that's been damaged and\n\n79\n00:03:49.562 --> 00:03:50.741\nnot the transaction logs.\n\n80\n00:03:50.741 --> 00:03:51.683\nThere's a chance.\n\n81\n00:03:51.683 --> 00:03:53.703\nWith a dial tone recovery,\nit doesn't normally happen though.\n\n82\n00:03:53.703 --> 00:03:56.983\nSo, normally, what we'll end up losing\nthose emails that were afterwards\n\n83\n00:03:56.983 --> 00:03:58.790\nbecause they're not part of the backup.\n\n84\n00:03:58.790 --> 00:04:00.925\nWell, let's see how this works.\n\n85\n00:04:00.925 --> 00:04:03.426\nI'm going to go into my\nexchange admin center and\n\n86\n00:04:03.426 --> 00:04:07.712\nI'm just going to go down to servers and\ndatabases, and find my mailbox database.\n\n87\n00:04:07.712 --> 00:04:10.290\nAnd I'm gonna dismount it, now,\nmine actually says dismounted.\n\n88\n00:04:10.290 --> 00:04:11.602\nThere we go, now it's mounted.\n\n89\n00:04:11.602 --> 00:04:14.212\n[LAUGH] So, I'm gonna go ahead and\ndismount mine and take it offline.\n\n90\n00:04:14.212 --> 00:04:17.459\nAnd what I'm gonna do is, I'm just\ngonna go and rename that database file.\n\n91\n00:04:17.459 --> 00:04:21.313\nI'm gonna make it look like that database\nfile is gone, or we can just delete it.\n\n92\n00:04:21.313 --> 00:04:24.139\nI'll browse on the hard drive\nto where that database is.\n\n93\n00:04:24.139 --> 00:04:28.780\nSo, I'll just browse in here, and hunt\ndown where that database is stored, and\n\n94\n00:04:28.780 --> 00:04:32.356\nI'm gonna simulate a failure\nby deleting the database file.\n\n95\n00:04:32.356 --> 00:04:35.607\nOkay, so, here's that mailbox\ndatabase file right here.\n\n96\n00:04:35.607 --> 00:04:36.656\nI'm just gonna delete it.\n\n97\n00:04:36.656 --> 00:04:38.947\nNow, you can't delete it while\nthe database is mounted,\n\n98\n00:04:38.947 --> 00:04:40.133\nthat's why I dismounted it.\n\n99\n00:04:40.133 --> 00:04:40.992\nBut now it's gone.\n\n100\n00:04:40.992 --> 00:04:41.955\nOkay.\n\n101\n00:04:41.955 --> 00:04:44.883\nSo, now that the database is gone,\nI've got a failure.\n\n102\n00:04:44.883 --> 00:04:48.381\nIf a user tries to log in right now,\nwhat are they going to get?\n\n103\n00:04:48.381 --> 00:04:51.050\nWell, let me refresh this screen and\nwe'll see.\n\n104\n00:04:51.050 --> 00:04:54.242\nI'm trying to log into my mailbox and\nI get, something went wrong,\n\n105\n00:04:54.242 --> 00:04:56.260\nwe can't get that information right now.\n\n106\n00:04:56.260 --> 00:04:57.942\nExchange isn't able to access my mailbox.\n\n107\n00:04:57.942 --> 00:05:00.076\nThe database is offline.\n\n108\n00:05:00.076 --> 00:05:03.806\nAll right, if I go back to my\ndatabase screen, and I refresh it,\n\n109\n00:05:03.806 --> 00:05:06.793\nhere's my database,\nit shows it's dismounted.\n\n110\n00:05:06.793 --> 00:05:08.901\nIt doesn't know there's a problem yet.\n\n111\n00:05:08.901 --> 00:05:10.876\nIt knows the database is dismounted, but\n\n112\n00:05:10.876 --> 00:05:13.201\nit doesn't know the database\nis actually gone.\n\n113\n00:05:13.201 --> 00:05:17.564\nIt's not until I remount it that it's\ngonna notice there's a true problem.\n\n114\n00:05:17.564 --> 00:05:21.174\nAnd when I go to mount it, it's gonna say,\noh, sure, I'll say yes, and\n\n115\n00:05:21.174 --> 00:05:25.282\nnow it's gonna go to mount it, and it's\ngonna realize the database isn't there.\n\n116\n00:05:25.282 --> 00:05:26.084\nIt's missing.\n\n117\n00:05:26.084 --> 00:05:28.929\nThe EDB file is gone, okay?\n\n118\n00:05:28.929 --> 00:05:33.253\nAnd when it's gone,\nit now gives me two choices, right?\n\n119\n00:05:33.253 --> 00:05:36.014\nChoice number one,\ndon't do anything, just give up.\n\n120\n00:05:36.014 --> 00:05:40.261\nI can hit cancel here and it'll leave\nthe database off, and I can go and\n\n121\n00:05:40.261 --> 00:05:42.071\ndo a restore, or I can hit OK.\n\n122\n00:05:42.071 --> 00:05:45.926\nIf I hit OK,\nit's gonna create an empty database.\n\n123\n00:05:45.926 --> 00:05:47.563\nIt's gonna create a dial tone database.\n\n124\n00:05:47.563 --> 00:05:51.984\nIt'll recreate that EDB file for\nme, and get a database in there.\n\n125\n00:05:51.984 --> 00:05:55.858\nAnd once that happens, users will be able\nto get back into their mailbox, right?\n\n126\n00:05:55.858 --> 00:05:57.848\nSo, if I say okay to that,\nthat's what it's gonna do.\n\n127\n00:05:57.848 --> 00:05:59.162\nIt's gonna go and try and create one.\n\n128\n00:05:59.162 --> 00:06:02.153\nNow, when it tried to create one,\nit looked, and\n\n129\n00:06:02.153 --> 00:06:05.096\nit saw those transaction log files,\nall right?\n\n130\n00:06:05.096 --> 00:06:08.437\nIt hit those transaction log files and\nthat caused a problem.\n\n131\n00:06:08.437 --> 00:06:10.058\nSo, when we do a dial tone,\n\n132\n00:06:10.058 --> 00:06:14.365\nit's typically not going to roll\nforward those transaction log files.\n\n133\n00:06:14.365 --> 00:06:17.304\nSo, if I'm gonna get this in place,\nI'm gonna need to go in there and\n\n134\n00:06:17.304 --> 00:06:19.293\nclear those out to be able\nto get it put back in.\n\n135\n00:06:19.293 --> 00:06:21.853\nSo, here, it's just warning me\nthat it's not able to do that.\n\n136\n00:06:21.853 --> 00:06:25.717\nAnd I can just jump back to my files, and\nif I want to try some other way to recover\n\n137\n00:06:25.717 --> 00:06:29.936\nthese or whatever, I can always take them,\nand just move them off to another folder,\n\n138\n00:06:29.936 --> 00:06:33.014\nbut the odds are, I'm not gonna\nbe able to recover this data.\n\n139\n00:06:33.014 --> 00:06:36.058\nBut I'm gonna go ahead and\ntake these anyway, and\n\n140\n00:06:36.058 --> 00:06:38.099\nI'll move them off to my C drive.\n\n141\n00:06:38.099 --> 00:06:42.589\nAnd I'll just put them in like some kind\nof temp folder just so I've got them, and\n\n142\n00:06:42.589 --> 00:06:45.912\nmaybe I can attempt some kind\nof recovery of those later on.\n\n143\n00:06:45.912 --> 00:06:48.181\nBut for right now,\nI'm gonna have to rely on my own backups.\n\n144\n00:06:48.181 --> 00:06:50.552\nSo, now that those files\nare out of the way,\n\n145\n00:06:50.552 --> 00:06:54.464\nif I go back to my database directory,\nif I browse all the way into there,\n\n146\n00:06:54.464 --> 00:06:56.930\nI should have saved the path,\nbut I didn't.\n\n147\n00:06:56.930 --> 00:07:00.693\nSo, we'll browse the long journey here\nback into where that database is.\n\n148\n00:07:00.693 --> 00:07:02.572\nI'll see if that folder\nis basically empty.\n\n149\n00:07:02.572 --> 00:07:05.531\nThere's a little GUID file here,\nit uses for some journaling.\n\n150\n00:07:05.531 --> 00:07:08.199\nIt, actually, won't let me remove that,\nso I'll leave that be.\n\n151\n00:07:08.199 --> 00:07:12.212\nNow, when I go through and try and\nremount it ,it's gonna try and mount.\n\n152\n00:07:12.212 --> 00:07:13.954\nIt's gonna see the database is missing.\n\n153\n00:07:13.954 --> 00:07:17.074\nIt's gonna offer to create the dial\ntone database and when it does,\n\n154\n00:07:17.074 --> 00:07:20.703\nit'll have an empty database with nice,\nnew, empty transaction log files.\n\n155\n00:07:20.703 --> 00:07:21.944\nSo, there we go.\n\n156\n00:07:21.944 --> 00:07:23.686\nLet it do that and then it'll be up.\n\n157\n00:07:23.686 --> 00:07:25.579\nNow, when it's up, when users log in,\n\n158\n00:07:25.579 --> 00:07:28.698\nyour client access server looks\nat the active directory and says,\n\n159\n00:07:28.698 --> 00:07:32.841\nhey, where's this person's mailbox, and\nit'll point them to this mailbox server.\n\n160\n00:07:32.841 --> 00:07:35.552\nAnd it'll come to the mailbox and\nit'll see that it's empty.\n\n161\n00:07:35.552 --> 00:07:38.512\nAnd it'll just assume it's a new user,\nlike hey, this is somebody new.\n\n162\n00:07:38.512 --> 00:07:41.863\nAnd so, it'll be like somebody\nlogging in for the first time.\n\n163\n00:07:41.863 --> 00:07:45.152\nBut they've got all their email addresses,\nall their mailbox rules.\n\n164\n00:07:45.152 --> 00:07:47.185\nAll the stuff that they\nhad before is still there.\n\n165\n00:07:47.185 --> 00:07:48.661\nIt's just the email that are missing.\n\n166\n00:07:48.661 --> 00:07:51.238\nAnd if they have a folder hierarchy,\nthose will be missing too.\n\n167\n00:07:51.238 --> 00:07:54.245\nSo, that stuff is part of\nthe mailbox database itself.\n\n168\n00:07:54.245 --> 00:07:57.830\nBut the fact that the mailbox exists is\nactually stored in the active directory\n\n169\n00:07:57.830 --> 00:08:00.670\nand so that's staying,\ntheir configuration.\n\n170\n00:08:00.670 --> 00:08:05.180\nSo now that database is mounted and\nif I browse back to that database path,\n\n171\n00:08:05.180 --> 00:08:07.604\nwhich I really should have saved that.\n\n172\n00:08:07.604 --> 00:08:10.207\n[LAUGH] But\nif we browse back to the database path,\n\n173\n00:08:10.207 --> 00:08:14.589\nwe'll see where it's created a nice new\nempty database in new transaction logs,\n\n174\n00:08:14.589 --> 00:08:17.653\nright, so it's all right there and\nit's new and shiny.\n\n175\n00:08:17.653 --> 00:08:21.044\nAnd as a user,\nif I go to login now, right,\n\n176\n00:08:21.044 --> 00:08:25.286\nso I'll come in here and\ntry and get logged in to OWA and\n\n177\n00:08:25.286 --> 00:08:30.430\nwhen we get in now,\nit's not gonna give me an error this time.\n\n178\n00:08:30.430 --> 00:08:34.330\nThis time it succeeds and\nhere I am but my mailbox is empty.\n\n179\n00:08:34.330 --> 00:08:35.630\nI'm missing data.\n\n180\n00:08:35.630 --> 00:08:38.340\nBut that's not the point,\nthe point is that my mailbox is working.\n\n181\n00:08:38.340 --> 00:08:42.210\nAnd if I get any new emails, so\nsomebody writes an email to me and\n\n182\n00:08:44.750 --> 00:08:48.120\nthat doesn't seem to be happy with\nmy name, let's try that again.\n\n183\n00:08:50.400 --> 00:08:51.670\nLet's see if it finds me.\n\n184\n00:08:51.670 --> 00:08:53.610\nSo, it's gonna let me draft that email.\n\n185\n00:08:53.610 --> 00:08:56.520\nI can do a test email, this is a test.\n\n186\n00:08:56.520 --> 00:09:00.356\nWe'll fire that off and this is all\nhappening in this new empty database.\n\n187\n00:09:00.356 --> 00:09:03.731\nSo now my users are at least able\nto send and receive email and\n\n188\n00:09:03.731 --> 00:09:05.359\nthey're in there, right.\n\n189\n00:09:05.359 --> 00:09:08.791\nSo now I can tell people, hey, it's safe\nto get back into your mailboxes, but\n\n190\n00:09:08.791 --> 00:09:12.015\nyou're gonna be missing all your old\nemail, we'll get that back to you,\n\n191\n00:09:12.015 --> 00:09:12.535\nall right.\n\n192\n00:09:12.535 --> 00:09:15.570\nSo now we're back up and\nonline as fast as we can.\n\n193\n00:09:15.570 --> 00:09:18.600\nNow technically,\nthe dial tone part of this is done.\n\n194\n00:09:18.600 --> 00:09:22.110\nWe've got the dial tone database up,\nwe're in there and we're running.\n\n195\n00:09:22.110 --> 00:09:23.720\nBut now comes our work.\n\n196\n00:09:23.720 --> 00:09:27.640\nAs an admin, we've gotta get in and\nrestore the old data.\n\n197\n00:09:27.640 --> 00:09:31.370\nNow, here's the challenge, we've actually\ngot two databases at this point.\n\n198\n00:09:31.370 --> 00:09:34.480\nBecause we were in a hurry,\nwe brought this one up and\n\n199\n00:09:34.480 --> 00:09:36.830\nthis is now accumulating new email.\n\n200\n00:09:36.830 --> 00:09:39.620\nMeanwhile, I've got my database back up.\n\n201\n00:09:39.620 --> 00:09:42.860\nIf I just restore it on top of this,\nI'm gonna lose all my new email.\n\n202\n00:09:42.860 --> 00:09:46.430\nSo what I've gotta do is restore\nto what's called a recovery group.\n\n203\n00:09:46.430 --> 00:09:49.620\nA recovery group is like\na special database that\n\n204\n00:09:49.620 --> 00:09:51.271\nis allowed to have duplicate mailboxes,\n\n205\n00:09:51.271 --> 00:09:55.260\nmailboxes that already exist in another\ndatabase, but not bring them online.\n\n206\n00:09:55.260 --> 00:09:59.970\nSo you use a recovery group to restore\nyour data to it and then pull it off and\n\n207\n00:09:59.970 --> 00:10:01.520\nmove it into another database.\n\n208\n00:10:01.520 --> 00:10:02.780\nSo that's what we're\ngonna have to do here,\n\n209\n00:10:02.780 --> 00:10:06.000\nwe're gonna have to restore all of\nour old data to a recovery group and\n\n210\n00:10:06.000 --> 00:10:09.640\nthen from there, move it back\ninto the dial tone, all right?\n\n211\n00:10:09.640 --> 00:10:13.340\nSo that's gonna be my next step and\nI still haven't received my email,\n\n212\n00:10:13.340 --> 00:10:14.960\nsometimes it can take a little while for\n\n213\n00:10:14.960 --> 00:10:19.010\nthe transport services to get updated\nto be able to reflect the new database.\n\n214\n00:10:19.010 --> 00:10:23.550\nBut my new email will show up here\nshortly, I'm not gonna wait for it though.\n\n215\n00:10:23.550 --> 00:10:25.700\nIn the meantime,\nI need to get this other restore going, so\n\n216\n00:10:25.700 --> 00:10:26.650\nI'm gonna jump in and do that.\n\n217\n00:10:26.650 --> 00:10:30.620\nNow, unfortunately there is not\na great way to do this from the GUI.\n\n218\n00:10:30.620 --> 00:10:34.870\nSo, I'm gonna have to jump down\nto my PowerShell to get in and\n\n219\n00:10:34.870 --> 00:10:38.630\nactually do this restore and\nget everything kind of put back in place.\n\n220\n00:10:38.630 --> 00:10:43.440\nNow, the biggest negative of doing\nthis is we have to have the path for\n\n221\n00:10:43.440 --> 00:10:47.710\nwhere the backup resides to be able\nto reach in and recover that data and\n\n222\n00:10:47.710 --> 00:10:50.260\nstuff and\nthe path can get really kind of messy.\n\n223\n00:10:50.260 --> 00:10:51.820\nLet me show you what I mean.\n\n224\n00:10:51.820 --> 00:10:53.360\nFirst off, I need to restore the database,\n\n225\n00:10:53.360 --> 00:10:55.300\nso I'm gonna jump into my\nWindows Server Backup,\n\n226\n00:10:56.400 --> 00:11:01.540\nwhich you can go into your Server Manager\n> Tools > Windows Server Backup, right?\n\n227\n00:11:01.540 --> 00:11:04.490\nThat's what I did my backup in, if you\nused third party software, you'd recover\n\n228\n00:11:04.490 --> 00:11:09.230\nwith it, but I used Windows Server Backup\nand I'm gonna go and do a recover.\n\n229\n00:11:09.230 --> 00:11:12.720\nAnd when I recover, normally you wanna\nrecover right on top of the server to\n\n230\n00:11:12.720 --> 00:11:17.460\nbring it back online, but in my case,\nI wanna recover to an alternate location.\n\n231\n00:11:17.460 --> 00:11:20.120\nSo as we go to start restoring this,\nI'm gonna move forward,\n\n232\n00:11:20.120 --> 00:11:22.870\nI'll say that I'm restoring\nan application and\n\n233\n00:11:22.870 --> 00:11:25.009\nmy application is gonna\nbe Microsoft Exchange.\n\n234\n00:11:26.020 --> 00:11:29.840\nAnd then, I'm gonna recover to\na different location, right?\n\n235\n00:11:29.840 --> 00:11:34.070\nSo I'm just gonna make a new\nfolder on my hard drive and\n\n236\n00:11:34.070 --> 00:11:36.820\nthat way I can recover to that.\n\n237\n00:11:36.820 --> 00:11:41.113\nSo I'll just create a folder\nhere called RecoveryDB.\n\n238\n00:11:41.113 --> 00:11:45.370\nAll right, so that's where I'm gonna place\nmy back up and we'll let that recover.\n\n239\n00:11:45.370 --> 00:11:48.560\nSo I'm leaving the dial tone database\nalone cuz it's getting new email,\n\n240\n00:11:48.560 --> 00:11:51.840\nI don't wanna lose that and I'm restoring\nto another location, all right?\n\n241\n00:11:51.840 --> 00:11:55.262\nThat recovery should happen pretty quick,\nit's already done, right.\n\n242\n00:11:55.262 --> 00:11:58.722\nIt happens quick for me cuz my\ndatabase is very small, it's 270 megs.\n\n243\n00:11:58.722 --> 00:12:00.545\nYour database might be a terabyte in size.\n\n244\n00:12:00.545 --> 00:12:02.262\nThis recovery could take a while, right?\n\n245\n00:12:02.262 --> 00:12:03.763\nIf it was really short,\nif it was that short,\n\n246\n00:12:03.763 --> 00:12:05.950\nI wouldn't have created a dial\ntone database in the first place.\n\n247\n00:12:05.950 --> 00:12:08.120\nI would have just recovered\nstraight to it, right?\n\n248\n00:12:08.120 --> 00:12:11.290\nIf your database is small enough,\njust skip the dial tone.\n\n249\n00:12:11.290 --> 00:12:13.660\nJust tell your users, hey,\nI need an hour to recover the database,\n\n250\n00:12:13.660 --> 00:12:15.210\nyou restore it and you're done.\n\n251\n00:12:15.210 --> 00:12:19.787\nBut if you're database is so large, it's\ngonna take 6 hours, 12, 24 hours, right?\n\n252\n00:12:19.787 --> 00:12:22.490\nYou don't want your users to have to wait\nfor that, you bring up the dial tone.\n\n253\n00:12:22.490 --> 00:12:25.110\nSo don't use a dial tone\nif you don't have to.\n\n254\n00:12:25.110 --> 00:12:26.320\nIt's only if you're in a hurry,\n\n255\n00:12:26.320 --> 00:12:29.430\nif you need that database up\nas fast as you can, right?\n\n256\n00:12:29.430 --> 00:12:33.087\nSo here, I've restored mine and\nif I browse to the hard drive,\n\n257\n00:12:33.087 --> 00:12:34.677\nI can go to C > RecoveryDB.\n\n258\n00:12:34.677 --> 00:12:38.740\nAnd then here's where it gets a little\nquirky because when it recovers it,\n\n259\n00:12:38.740 --> 00:12:42.543\nit's got a GUID that's tied to\nthe system and that's first folder and\n\n260\n00:12:42.543 --> 00:12:44.496\nthen it mimics the file hierarchy.\n\n261\n00:12:44.496 --> 00:12:48.536\nAnd so I have C_ cuz you can't\nhave a colon in a file name.\n\n262\n00:12:48.536 --> 00:12:53.107\nAnd then, we've got Program Files >\nMicrosoft > Exchange Server > V15 >\n\n263\n00:12:53.107 --> 00:12:55.330\nMailbox > Mailbox Database.\n\n264\n00:12:55.330 --> 00:12:57.750\nAnd then here's the mailbox database\nrecovered to this alternate\n\n265\n00:12:57.750 --> 00:12:59.440\nlocation, okay.\n\n266\n00:12:59.440 --> 00:13:01.350\nSo, that's a nice long path.\n\n267\n00:13:01.350 --> 00:13:03.700\nAnd the reason I browsed to it in\nthe GUI is cuz I can come in here and\n\n268\n00:13:03.700 --> 00:13:06.430\njust copy that and that'll save\nme a little bit of time later.\n\n269\n00:13:06.430 --> 00:13:09.720\nSo, I've got that path now to\nbe able to use in my commands.\n\n270\n00:13:09.720 --> 00:13:13.170\nOkay, so if you stored our recovery\ndata to a different folder and\n\n271\n00:13:13.170 --> 00:13:16.390\nnow we need to get that recovery\ndata into people's mailboxes.\n\n272\n00:13:16.390 --> 00:13:18.720\nThis is were things get a little weird,\nall right.\n\n273\n00:13:18.720 --> 00:13:21.900\nWe could mount that recovery database.\n\n274\n00:13:21.900 --> 00:13:26.770\nYou can bring it online and then we could\ndo mailbox restore requests to restore\n\n275\n00:13:26.770 --> 00:13:30.850\nthat data into our dial tone database and\nthen we're back up and running.\n\n276\n00:13:30.850 --> 00:13:35.460\nHere's the problem though, your dial tone\ndatabase is probably very, very small and\n\n277\n00:13:35.460 --> 00:13:38.110\nyour recovery database is\nprobably very large, right?\n\n278\n00:13:38.110 --> 00:13:43.970\nYour dial tone database only has email in\nit, that's what's happened since the dial\n\n279\n00:13:43.970 --> 00:13:47.600\ntone database came live, right, which\nhopefully is a very short period of time.\n\n280\n00:13:47.600 --> 00:13:50.980\nYour recovery database has\nemail way back in history,\n\n281\n00:13:50.980 --> 00:13:53.380\nright, it's got a ton of\ninformation in there.\n\n282\n00:13:53.380 --> 00:13:58.260\nSo doing the mailbox move requests\ncan take a long time, right.\n\n283\n00:13:58.260 --> 00:14:00.741\nIf you do that, if you do\na mailbox move request and move or\n\n284\n00:14:00.741 --> 00:14:03.979\nmerge the mailboxes from the recovery\ngroup into the dial tone database.\n\n285\n00:14:03.979 --> 00:14:07.582\nUsers can stay in the database and they\njust start to magically see their email\n\n286\n00:14:07.582 --> 00:14:12.320\nreappearing, it's kind of neat, it's\nneat to watch, but it takes a long time.\n\n287\n00:14:12.320 --> 00:14:17.100\nSo, a better option is to schedule\na down time with your users.\n\n288\n00:14:17.100 --> 00:14:20.410\nYour users are in their email now,\nthey're able to send and receive email, so\n\n289\n00:14:20.410 --> 00:14:24.800\nyou say, okay guys, tonight at 1 AM, we're\ngonna be taking the mail server offline.\n\n290\n00:14:24.800 --> 00:14:27.040\nOkay and it's only gonna be offline for\na few moments.\n\n291\n00:14:27.040 --> 00:14:29.540\nYou don't have to it at 1 AM,\nyou could do it at 1PM, whenever.\n\n292\n00:14:29.540 --> 00:14:33.580\nYou just say look, I need to take the\nmailbox server offline for a few minutes.\n\n293\n00:14:33.580 --> 00:14:38.560\nAnd while it's offline,\nyou can swap the recovery database and\n\n294\n00:14:38.560 --> 00:14:40.120\nthe dial tone database.\n\n295\n00:14:40.120 --> 00:14:44.240\nAnd when you swap it, you can bring it\nback online and now users can get in and\n\n296\n00:14:44.240 --> 00:14:48.000\nthey'll have all their historical email,\nbut they won't have the stuff from\n\n297\n00:14:48.000 --> 00:14:50.400\nthe dial tone,\nthey'll be missing the new stuff, right?\n\n298\n00:14:50.400 --> 00:14:54.440\nBut the new stuff is very small and so\nnow we can do a mailbox merger quest and\n\n299\n00:14:54.440 --> 00:14:58.740\nit's only copying a little bit of data and\nit happens much faster.\n\n300\n00:14:58.740 --> 00:15:03.500\nSo, if speed is of the essence,\nwe need to do a database swap.\n\n301\n00:15:03.500 --> 00:15:06.780\nIf speed is not of the essence, we've got\nall the time in the world, then you can\n\n302\n00:15:06.780 --> 00:15:10.410\njust mount that recovery database and\nthen merge the data right over.\n\n303\n00:15:10.410 --> 00:15:13.350\nAll right, so you'll skip the swap step.\n\n304\n00:15:13.350 --> 00:15:16.470\nBut for me, I'm concerned about speed,\nso I'm gonna do the swap.\n\n305\n00:15:16.470 --> 00:15:17.990\nSo I reach out to my users and\nI say, look,\n\n306\n00:15:17.990 --> 00:15:21.330\nI know it's been a rough day, I know that\nyou guys have been out of your email and\n\n307\n00:15:21.330 --> 00:15:24.660\nI feel bad about that but\nI need to take it offline.\n\n308\n00:15:24.660 --> 00:15:28.760\nGive me five minutes, I'll take it\noffline and then we'll bring it back and\n\n309\n00:15:28.760 --> 00:15:32.310\nwhen it comes back online,\nthen we'll be able to get in it and\n\n310\n00:15:32.310 --> 00:15:33.480\nstart to take care of things.\n\n311\n00:15:33.480 --> 00:15:36.050\nSo that's kind of where\nwe're at right here.\n\n312\n00:15:36.050 --> 00:15:38.836\nSo I'm gonna take this and\ndo a database swap.\n\n313\n00:15:38.836 --> 00:15:42.990\nSo what I'm gonna do is I'm gonna jump\nback to my Exchange Admin Center and\n\n314\n00:15:42.990 --> 00:15:47.750\nI'm gonna take this database, this dial\ntone database and I'm gonna dismount it.\n\n315\n00:15:47.750 --> 00:15:52.290\nOkay, so I'm gonna dismount that database.\n\n316\n00:15:52.290 --> 00:15:57.562\nThen, once it's dismounted,\nI'm gonna go to my C drive here,\n\n317\n00:15:57.562 --> 00:16:01.410\nand I need to make\na copy of that database.\n\n318\n00:16:01.410 --> 00:16:04.940\nI'm gonna browse on my C drive\ninto the actual live database,\n\n319\n00:16:04.940 --> 00:16:06.210\nwhat's really the dial tone.\n\n320\n00:16:07.390 --> 00:16:12.610\nWhen I browse in here and find it, here it\nis, I'm just gonna copy all these files.\n\n321\n00:16:14.110 --> 00:16:16.620\nI'm gonna make a safe\nplace on my hard drive.\n\n322\n00:16:16.620 --> 00:16:20.500\nI'm just gonna browse here to my C\ndrive and create a new folder and\n\n323\n00:16:20.500 --> 00:16:24.372\nI'll call this one DialTone and\nI'm gonna paste that data in here.\n\n324\n00:16:24.372 --> 00:16:29.230\nThis is all the user's email\nthat's come in since I brought\n\n325\n00:16:29.230 --> 00:16:32.500\nthe dial tone database online, it's all\nstored right here in this database.\n\n326\n00:16:36.740 --> 00:16:39.610\nThis is where it starts to get\na little scary, I'm gonna go in and\n\n327\n00:16:39.610 --> 00:16:41.980\ndelete the dial tone database.\n\n328\n00:16:41.980 --> 00:16:45.070\nThis is the live folder now and\nI'm gonna go in and\n\n329\n00:16:45.070 --> 00:16:47.840\njust delete that out of there and\nwhen I delete it,\n\n330\n00:16:50.510 --> 00:16:54.900\nnow the database is gone and\nI can jump back to what I restored.\n\n331\n00:16:54.900 --> 00:16:57.050\nThis is what I've restored\nfrom that backup,\n\n332\n00:16:57.050 --> 00:16:58.830\nthis is where all my historical data is.\n\n333\n00:16:58.830 --> 00:17:00.820\nThis is the big database.\n\n334\n00:17:00.820 --> 00:17:05.930\nI can take this and I can just copy it and\nput it right back in here.\n\n335\n00:17:07.140 --> 00:17:09.480\nExchange databases are actually portable.\n\n336\n00:17:09.480 --> 00:17:13.060\nIn other words, if you have the EDB and\nall its associated transaction logs,\n\n337\n00:17:13.060 --> 00:17:15.950\nyou can copy it to any exchange server and\nmount it and bring it online.\n\n338\n00:17:15.950 --> 00:17:18.920\nThey don't truly care\nwhat server they run on,\n\n339\n00:17:18.920 --> 00:17:21.420\nthey just need to run on\na valid exchange server.\n\n340\n00:17:21.420 --> 00:17:24.000\nYou can just copy that\ndatabase right over.\n\n341\n00:17:24.000 --> 00:17:25.340\nI've got the database and\n\n342\n00:17:25.340 --> 00:17:30.080\nits transaction log files, and\nnow if I mount that database and\n\n343\n00:17:30.080 --> 00:17:35.260\nbring it back online, it's got all\nthe historical data up to that backup.\n\n344\n00:17:35.260 --> 00:17:39.480\nI can jump back here and\nI can mount this database\n\n345\n00:17:41.150 --> 00:17:45.610\nand now it'll be online with\nall the historical data.\n\n346\n00:17:45.610 --> 00:17:49.870\nNow, I just have that dial tone database\nthat has the smaller subset of data that\n\n347\n00:17:49.870 --> 00:17:53.640\ncame in since I brought it back online and\nI need to merge that.\n\n348\n00:17:53.640 --> 00:17:57.360\nIf I'm not worried about time, I can\nskip this step, skip the swapping and\n\n349\n00:17:57.360 --> 00:17:59.960\nthen just go straight into to\nmerging the recovery database.\n\n350\n00:17:59.960 --> 00:18:02.370\nBut in my case, I'm worried about time,\nI want this to be fast.\n\n351\n00:18:03.590 --> 00:18:06.148\nNow it's mounted and if a user logs in,\n\n352\n00:18:06.148 --> 00:18:11.080\nwe'll take me, see how I did that\ntest email that came through earlier?\n\n353\n00:18:11.080 --> 00:18:13.240\nThat was in my dial tone database but\n\n354\n00:18:13.240 --> 00:18:17.440\nif I refresh my mailbox now,\nI've got my historical data.\n\n355\n00:18:17.440 --> 00:18:20.140\nEmail sent prior to backup,\nit's there but that\n\n356\n00:18:20.140 --> 00:18:24.700\ntest email I sent during the dial tone is\ngone because I moved that database off.\n\n357\n00:18:25.800 --> 00:18:27.880\nNow I just need to merge that in and\nwe're done but\n\n358\n00:18:27.880 --> 00:18:29.480\nI can reach out to my users right now and\nsay hey,\n\n359\n00:18:29.480 --> 00:18:32.550\nguys you can get back into your mailbox\nand you can send and receive email now.\n\n360\n00:18:32.550 --> 00:18:35.670\nYou've got all your historical data but\nyour dial tone stuff is missing,\n\n361\n00:18:35.670 --> 00:18:36.725\nI'm restoring that right now.\n\n362\n00:18:36.725 --> 00:18:41.380\nA real short down time and it's down on\nour schedule instead of somebody else's.\n\n363\n00:18:42.415 --> 00:18:46.470\nNow I just need to jump in\nto restore that dial tone.\n\n364\n00:18:46.470 --> 00:18:48.782\nThis is where things do get\na little bit difficult,\n\n365\n00:18:48.782 --> 00:18:50.900\nI've got to do it from the PowerShell.\n\n366\n00:18:50.900 --> 00:18:54.980\nI'm gonna jump into my Exchange Management\nShell, and I'm gonna get this set up.\n\n367\n00:18:54.980 --> 00:18:59.170\nIn the Exchange Management Shell,\nI need to mount the recovery database, and\n\n368\n00:18:59.170 --> 00:19:02.810\nthen I need to merge the emails in, and so\n\n369\n00:19:02.810 --> 00:19:08.454\nthat process is a little bit\ntough in a way, I guess.\n\n370\n00:19:08.454 --> 00:19:12.300\n[LAUGH] What I need to do is just run\nthrough and get all these people merged.\n\n371\n00:19:12.300 --> 00:19:14.070\nThe steps basically go like this.\n\n372\n00:19:14.070 --> 00:19:17.120\nFirst off, I need to mount that recovery\ndatabase, so I'm going to go ahead and\n\n373\n00:19:17.120 --> 00:19:20.180\ndo that and get that one tied in.\n\n374\n00:19:20.180 --> 00:19:24.270\nI copied that dial tone database off\nthe c:/dialtone, what I need to do now\n\n375\n00:19:24.270 --> 00:19:28.560\nis create a recovery database and\npoint it at that data to bring it online.\n\n376\n00:19:28.560 --> 00:19:32.320\nThe way we do that is with the new\ndash mailbox database command.\n\n377\n00:19:32.320 --> 00:19:36.650\nNow that'll normally create a live mailbox\ndatabase but I'm gonna duplicate email\n\n378\n00:19:36.650 --> 00:19:40.410\nmailboxes in the live one and this\nrecovery one, so I need to make sure say\n\n379\n00:19:40.410 --> 00:19:44.640\ndash recovery, so it knows that it's\nnot a true live mailbox database.\n\n380\n00:19:44.640 --> 00:19:49.070\nNo users will be allowed to access this\nand no new email is going to go into it.\n\n381\n00:19:49.070 --> 00:19:50.535\nThat dash recovery is kind of important.\n\n382\n00:19:50.535 --> 00:19:53.650\nWe give it a name and\nI'll just call mine recovery db,\n\n383\n00:19:53.650 --> 00:19:56.880\nyou can call it whatever you want just so\nyou can remember the name of it.\n\n384\n00:19:56.880 --> 00:19:59.982\nWe're only going to have this temporarily,\nwe'll delete this when we're done.\n\n385\n00:19:59.982 --> 00:20:05.070\nJust gonna whip that up, then we need\nto tell it where to find its files.\n\n386\n00:20:05.070 --> 00:20:10.990\nThere's the EDB file path which I'm\ngonna point to c:\\DialTone\\ there,\n\n387\n00:20:10.990 --> 00:20:13.450\nthe mailbox database file name.\n\n388\n00:20:13.450 --> 00:20:18.990\nLastly, the log file path which for me is\nc:\\DialTone, that's where I copied that.\n\n389\n00:20:20.180 --> 00:20:23.490\nLast, I need to tell it what server\nI want to restore to and in my case,\n\n390\n00:20:23.490 --> 00:20:24.890\nI'm just gonna restore to this server,\n\n391\n00:20:24.890 --> 00:20:29.950\nwhich is lab-mailbox01 and\nthat's going to go and define that.\n\n392\n00:20:29.950 --> 00:20:32.290\nIt's gonna create that\nnew recovery database and\n\n393\n00:20:32.290 --> 00:20:33.890\nit's gonna be ready to go live.\n\n394\n00:20:33.890 --> 00:20:35.360\nNow, it's not actually gonna go live.\n\n395\n00:20:35.360 --> 00:20:36.780\nSee all these warnings I'm getting?\n\n396\n00:20:36.780 --> 00:20:40.080\nIt's warning me that hey,\nthere's existing data there.\n\n397\n00:20:40.080 --> 00:20:42.270\nIt might not have been cleanly shut down.\n\n398\n00:20:42.270 --> 00:20:43.940\nNow, I know I cleanly shut it down.\n\n399\n00:20:43.940 --> 00:20:45.470\nI dismounted that database, and\n\n400\n00:20:45.470 --> 00:20:48.500\nthen I copied it but\nthe system doesn't know that.\n\n401\n00:20:48.500 --> 00:20:51.020\nIt doesn't know that I\ndid it the right way.\n\n402\n00:20:51.020 --> 00:20:53.960\nWe need to make sure that it understands\nthat and it's very easy to do.\n\n403\n00:20:53.960 --> 00:20:56.550\nYou'd do this anyway if it\nwasn't cleanly shut down,\n\n404\n00:20:56.550 --> 00:20:58.670\nif you had a potentially damaged database,\n\n405\n00:20:58.670 --> 00:21:01.740\nwe just need to do a little maintenance\non it to cleanly shut it down.\n\n406\n00:21:01.740 --> 00:21:03.500\nI'll show you how that works.\n\n407\n00:21:03.500 --> 00:21:07.890\nIf I get into the folder where\nI backed up that data, so\n\n408\n00:21:07.890 --> 00:21:10.630\nhere's where that database is residing,\nright here.\n\n409\n00:21:10.630 --> 00:21:15.100\nI can use the ESEutil,\nthat's the exchange engine, and\n\n410\n00:21:15.100 --> 00:21:19.470\nwe can use this utility to parse through\nexchange databases and clean them up.\n\n411\n00:21:19.470 --> 00:21:25.730\nI'm gonna use that ESEutil and I'm gonna\ntell it to replay transaction logs,\n\n412\n00:21:25.730 --> 00:21:29.710\nthe E00 and\nthis is based on the database name.\n\n413\n00:21:29.710 --> 00:21:30.660\nSee my files up here?\n\n414\n00:21:30.660 --> 00:21:31.510\nThey start with E00.\n\n415\n00:21:31.510 --> 00:21:35.228\nIf this was the second, or third, or\nfourth database, they'd be E01, or\n\n416\n00:21:35.228 --> 00:21:35.812\nwhatever.\n\n417\n00:21:35.812 --> 00:21:38.100\nIt's looking at\nthe transaction log files for\n\n418\n00:21:38.100 --> 00:21:42.480\nany transaction that was 100% complete,\nand it's going to apply them.\n\n419\n00:21:42.480 --> 00:21:45.028\nAny transaction that wasn't 100% complete,\n\n420\n00:21:45.028 --> 00:21:48.652\nit's gonna roll back and that'll\nmake sure I've got a clean database.\n\n421\n00:21:48.652 --> 00:21:53.715\nI'm telling it those transaction log\nfiles, the prefix of each file and\n\n422\n00:21:53.715 --> 00:21:58.446\nthen lastly, I just need to tell it\nthat I need to rebuild indexes and\n\n423\n00:21:58.446 --> 00:22:02.430\ndefragment and it's gonna go through and\nclean that up.\n\n424\n00:22:02.430 --> 00:22:07.062\nNow it should happen pretty quickly in\nmine, it's just performing that soft\n\n425\n00:22:07.062 --> 00:22:11.349\nrecovery, and because I did a clean\nshutdown, it's almost instant.\n\n426\n00:22:11.349 --> 00:22:14.015\nIf it wasn't a clean shut down,\na little status bar appears and\n\n427\n00:22:14.015 --> 00:22:16.697\nit churns through and\ngets that database cleaned up and ready.\n\n428\n00:22:16.697 --> 00:22:19.564\nIf you're dial tone database is\nreally small, it's only new email, so\n\n429\n00:22:19.564 --> 00:22:21.262\nthis should happen really, really fast.\n\n430\n00:22:21.262 --> 00:22:24.535\nIf you're doing this on a full database,\nit can take ten minutes sometimes while it\n\n431\n00:22:24.535 --> 00:22:26.756\nchurns through the database and\ncleans everything up.\n\n432\n00:22:26.756 --> 00:22:30.576\nEspecially, if a backup hasn't been run\nin a while because you have a lot of\n\n433\n00:22:30.576 --> 00:22:31.860\ntransaction log files.\n\n434\n00:22:33.650 --> 00:22:36.500\nI've got that one set, it's ready,\nit's clean, it's happy.\n\n435\n00:22:36.500 --> 00:22:40.170\nI should be able to bring it online\nwith mount dash database and\n\n436\n00:22:40.170 --> 00:22:44.350\nthen specify the name of that database,\nand we'll see if it comes online.\n\n437\n00:22:44.350 --> 00:22:47.060\nIf I get an error here, then my database\nis corrupt and that shouldn't happen.\n\n438\n00:22:48.320 --> 00:22:51.560\nOnce this is done,\nI've got my live database.\n\n439\n00:22:51.560 --> 00:22:53.030\nMy live database,\nthe users are in it right now.\n\n440\n00:22:53.030 --> 00:22:54.655\nIt's got all the historical data and\n\n441\n00:22:54.655 --> 00:22:58.240\nit's got new stuff now but\nit's missing in the dial tone stuff.\n\n442\n00:22:58.240 --> 00:23:00.930\nThe dial tone stuff is in\nthe now in the recovery db.\n\n443\n00:23:00.930 --> 00:23:04.850\nThe last thing that I need to do is to\nget the user email out of the recovery\n\n444\n00:23:04.850 --> 00:23:05.740\ndatabase and\n\n445\n00:23:05.740 --> 00:23:10.470\nmerge it into their live mailbox and\nthat's done with some PowerShell commands.\n\n446\n00:23:10.470 --> 00:23:14.540\nThe reason we do it with PowerShell, is\nwe could do it one by one in the EAC but\n\n447\n00:23:14.540 --> 00:23:16.935\nif you've got 10,000 users,\nyou don't wanna do that.\n\n448\n00:23:16.935 --> 00:23:18.170\nPowerShell can knock it out real fast.\n\n449\n00:23:18.170 --> 00:23:18.860\nLet me show you how.\n\n450\n00:23:20.100 --> 00:23:23.365\nWe know we can use get dash mailbox to\npull up a list of all the mailboxes that\n\n451\n00:23:23.365 --> 00:23:26.577\nwe have on the server and we can point\nit at the recovery database to get all\n\n452\n00:23:26.577 --> 00:23:29.227\nthe mailboxes in the recovery database,\ntoo, if we want.\n\n453\n00:23:29.227 --> 00:23:33.267\nBut, what we can do is we can just get\ndash mailbox to give us a list of users\n\n454\n00:23:33.267 --> 00:23:37.379\nand we can pipe that into the mailbox\nmerge request to restore that data and\n\n455\n00:23:37.379 --> 00:23:38.960\nget us back online.\n\n456\n00:23:38.960 --> 00:23:41.171\nWe can do it with just\na couple of quick commands.\n\n457\n00:23:41.171 --> 00:23:46.377\nFirst off, I'm gonna create\na variable called mailboxes and\n\n458\n00:23:46.377 --> 00:23:49.890\nI'm gonna set it equal to get-mailbox.\n\n459\n00:23:49.890 --> 00:23:51.897\nI only have one database, so\nI don't have to worry about it.\n\n460\n00:23:51.897 --> 00:23:53.797\nBut if you have more than one database,\n\n461\n00:23:53.797 --> 00:23:56.043\nyou'll want to make\nsure you say -Database,\n\n462\n00:23:56.043 --> 00:23:59.861\nand then whatever the name of the database\nis, and this is your live database.\n\n463\n00:23:59.861 --> 00:24:03.241\nNow my live database has that obnoxious\nname that I copied earlier, so\n\n464\n00:24:03.241 --> 00:24:05.950\nI'm just going to paste that one in.\n\n465\n00:24:05.950 --> 00:24:06.990\nThere we go.\n\n466\n00:24:06.990 --> 00:24:10.460\nAnd so I'm basically getting a list of\nall the mailboxes in that database.\n\n467\n00:24:10.460 --> 00:24:13.220\nAnd storing them in a variable,\nall right, so that runs.\n\n468\n00:24:13.220 --> 00:24:16.290\nIf I were to echo that variable,\nyou can see what's in there,\n\n469\n00:24:16.290 --> 00:24:18.160\nit's just the list of mailboxes.\n\n470\n00:24:18.160 --> 00:24:18.970\nOkay?\n\n471\n00:24:18.970 --> 00:24:23.830\nThen, I can use that variable in my next\ncommand, to go through and do a merge for\n\n472\n00:24:23.830 --> 00:24:27.960\nevery person whose mailbox is in there,\nand the command goes like this.\n\n473\n00:24:27.960 --> 00:24:33.330\nBasically, we, we run $mailboxes\nto generate that list and\n\n474\n00:24:33.330 --> 00:24:38.530\nthen we pipe that into the new\nmailbox restore request.\n\n475\n00:24:38.530 --> 00:24:42.170\nThe problem is, cuz you might ask\nwhy don't I just run get-mailbox and\n\n476\n00:24:42.170 --> 00:24:43.230\npipe that in,\n\n477\n00:24:43.230 --> 00:24:48.650\nthe problem is treated as one big entity\nwhen you run get-mailbox and pipe it.\n\n478\n00:24:48.650 --> 00:24:51.870\nI need it to run this command once for\nevery single user.\n\n479\n00:24:51.870 --> 00:24:54.080\nSo I need to take action for\neach individual step.\n\n480\n00:24:54.080 --> 00:24:57.230\nIn the Linux world we have the XR\ncommand that would knock this out.\n\n481\n00:24:57.230 --> 00:25:01.570\nIn Powershell we have to do it through\nsome creative bracketing which we'll\n\n482\n00:25:01.570 --> 00:25:02.220\nsee right here.\n\n483\n00:25:02.220 --> 00:25:07.130\nSo instead of just piping this right\nin to the new mailbox restore request\n\n484\n00:25:07.130 --> 00:25:12.060\nI'm gonna do ${ and\nthat's letting it know that I'm gonna be\n\n485\n00:25:12.060 --> 00:25:15.110\nrunning this entity basically like\nonce over and over and over again.\n\n486\n00:25:16.140 --> 00:25:19.460\nAnd then in there I'll do\nthe new-mailboxRestoreRequest, not repair,\n\n487\n00:25:19.460 --> 00:25:26.014\nrestore request and\nI'll tell it the -sourcestoremailbox,\n\n488\n00:25:26.014 --> 00:25:30.288\nso where I'm getting my data from and\nthe source database, right.\n\n489\n00:25:30.288 --> 00:25:35.090\nSo the sourcestoremailbox, I can get that\nright from my other command output and so\n\n490\n00:25:35.090 --> 00:25:39.980\nwe can just use $_, that means, look\nto the output from this first command,\n\n491\n00:25:39.980 --> 00:25:42.820\nand I'm gonna look for\na particular entity inside of there.\n\n492\n00:25:42.820 --> 00:25:50.410\nI'm looking for ExchangeGuid and\nthen I can specify the source database.\n\n493\n00:25:52.970 --> 00:25:55.860\nAnd the source database is\ngonna be the RecoveryDB.\n\n494\n00:25:55.860 --> 00:25:59.540\nThat's where we're actually gonna get\nthis data from, the recovery database.\n\n495\n00:25:59.540 --> 00:26:03.154\nAnd from there we can tell\nit the -targetMailbox.\n\n496\n00:26:05.430 --> 00:26:07.650\nWhich it's gonna get right\nfrom the other command.\n\n497\n00:26:07.650 --> 00:26:12.889\nAnd then lastly, we can tell it,\nthis last little bit.\n\n498\n00:26:12.889 --> 00:26:14.927\nNow this last little bit,\nyou'll see it all over the internet,\n\n499\n00:26:14.927 --> 00:26:15.921\nnot a lot of people explain it.\n\n500\n00:26:15.921 --> 00:26:20.748\nThey'll tell you that you\nneed to do a -skipMerging for\n\n501\n00:26:20.748 --> 00:26:24.557\nthe StorageProviderForSource like that.\n\n502\n00:26:24.557 --> 00:26:27.280\nNow, that's a weird command.\n\n503\n00:26:27.280 --> 00:26:28.330\nWhat's that all about?\n\n504\n00:26:28.330 --> 00:26:32.667\nWell there's actually a bug in Exchange\n2013, so if you're watching this show\n\n505\n00:26:32.667 --> 00:26:35.860\nright now, you've got a live\ninstall of Exchange 2013.\n\n506\n00:26:35.860 --> 00:26:37.056\nYou have this bug.\n\n507\n00:26:37.056 --> 00:26:40.830\nWhere the merge request'll fail when\nit tries to restore the mailbox\n\n508\n00:26:40.830 --> 00:26:43.090\nbecause the storage provider,\nit stores some data for\n\n509\n00:26:43.090 --> 00:26:46.960\nthat, that isn't the same if you\njust rebuilt your server, right?\n\n510\n00:26:46.960 --> 00:26:49.259\nSo we have to tell it to\nskip that set of values for\n\n511\n00:26:49.259 --> 00:26:52.080\nthe storage provider in order for\nthe restore to proceed.\n\n512\n00:26:52.080 --> 00:26:54.690\nIf I leave that off my restore will fail,\nright?\n\n513\n00:26:54.690 --> 00:26:56.532\nSo this is gonna make sure that happens.\n\n514\n00:26:56.532 --> 00:26:58.800\nNow that'll probably go away, so\n\n515\n00:26:58.800 --> 00:27:01.910\nif you're watching this show six\nmonths from now or whatever,\n\n516\n00:27:01.910 --> 00:27:05.210\nMicrosoft will probably have fixed that,\nbut it doesn't hurt to leave this in.\n\n517\n00:27:05.210 --> 00:27:06.937\nIt's just telling it,\nhey, when you restore,\n\n518\n00:27:06.937 --> 00:27:09.353\nthe storage provider might have\na slightly different identifier.\n\n519\n00:27:09.353 --> 00:27:12.920\nIf it has the same identifier,\nit runs just fine if you skip it.\n\n520\n00:27:12.920 --> 00:27:16.430\nSo it's pretty safe to leave that in\nthere, and that'll take care of it.\n\n521\n00:27:16.430 --> 00:27:20.570\nWe're taking that output from get-mailbox,\nand we're feeding it in\n\n522\n00:27:20.570 --> 00:27:25.650\na new-mailboxRestoreRequest, so it's\nrunning a restore for each of these users.\n\n523\n00:27:25.650 --> 00:27:29.530\nNow, when it does it this way,\nit's a merge, not a replace.\n\n524\n00:27:29.530 --> 00:27:33.680\nSo their live mailbox has all\ntheir historical data in it and\n\n525\n00:27:33.680 --> 00:27:37.860\nnow I'm just moving the dial tone stuff\nin to get them back up and running.\n\n526\n00:27:39.830 --> 00:27:41.890\nSo, when I run that assuming\nI don't have any typos which,\n\n527\n00:27:41.890 --> 00:27:44.490\nthat's a long command I could\nprobably have a typo in there.\n\n528\n00:27:44.490 --> 00:27:45.050\nIt's gonna run.\n\n529\n00:27:45.050 --> 00:27:47.010\nIt's gonna try and run for\neach individual user.\n\n530\n00:27:47.010 --> 00:27:50.240\nAll right now,\nI got some errors on mine and\n\n531\n00:27:50.240 --> 00:27:52.821\nat first I thought I had some typos but\nthese are some normal errors.\n\n532\n00:27:52.821 --> 00:27:55.210\n[LAUGH] I know, normal errors,\nthese are what we expect.\n\n533\n00:27:55.210 --> 00:27:55.990\nBut if you look at it,\n\n534\n00:27:55.990 --> 00:27:58.870\nit's basically telling me that some\nof the mailboxes don't exist, right?\n\n535\n00:27:58.870 --> 00:28:02.310\nSo it's telling me that this mailbox\nwith a GUID doesn't exist, and\n\n536\n00:28:02.310 --> 00:28:03.920\nthis other mailbox doesn't exist.\n\n537\n00:28:03.920 --> 00:28:04.750\nWhat's that all about?\n\n538\n00:28:04.750 --> 00:28:09.480\nWell each mailbox, each mailbox database\nhas certain mailboxes like these,\n\n539\n00:28:09.480 --> 00:28:13.650\nthe discovery search mailbox or\nit's got the health mailbox.\n\n540\n00:28:13.650 --> 00:28:18.220\nThose mailboxes are ones that\nreside on the system that\n\n541\n00:28:18.220 --> 00:28:20.130\nhave a different GUID on new installs.\n\n542\n00:28:20.130 --> 00:28:23.330\nSo when I created a new database their\nGUID changes so those weren't found.\n\n543\n00:28:23.330 --> 00:28:25.520\nFortunately, we don't care\nabout those mailboxes.\n\n544\n00:28:25.520 --> 00:28:27.540\nThe ones we care about are the ones\nthe users are tied to.\n\n545\n00:28:27.540 --> 00:28:31.399\nSo I see like, Don Pezet and\nJane Smith and if I scroll down here,\n\n546\n00:28:31.399 --> 00:28:33.273\nI can see those were queued up.\n\n547\n00:28:33.273 --> 00:28:34.000\nThere's Don Pezet.\n\n548\n00:28:34.000 --> 00:28:34.940\nThere's Jane Smith.\n\n549\n00:28:34.940 --> 00:28:38.050\nSo it is actually queuing those up and\ngetting them in place.\n\n550\n00:28:38.050 --> 00:28:38.600\nRight?\n\n551\n00:28:38.600 --> 00:28:40.760\nNow, you do wanna keep and\neye on these, though.\n\n552\n00:28:40.760 --> 00:28:43.590\nAnd when it does the mailbox merges, in\nthe background it's creating those merge\n\n553\n00:28:43.590 --> 00:28:46.680\nrequests, and we can go back and look\nat the merge requests that are running.\n\n554\n00:28:46.680 --> 00:28:48.555\nThis doesn't actually do the merge.\n\n555\n00:28:48.555 --> 00:28:50.308\nIt does the merge request, and so\n\n556\n00:28:50.308 --> 00:28:53.700\nin the background it's now added\nto a queue and it's gonna run.\n\n557\n00:28:53.700 --> 00:28:58.496\nAnd I can do a quick\nGet-mailboxRestoreRequest to see a list\n\n558\n00:28:58.496 --> 00:29:01.040\nany restores that are running.\n\n559\n00:29:01.040 --> 00:29:04.340\nI can see Jane Smith and\nDon Pezet are running right now.\n\n560\n00:29:04.340 --> 00:29:05.290\nActually they're not running.\n\n561\n00:29:05.290 --> 00:29:05.900\nThey're completed.\n\n562\n00:29:05.900 --> 00:29:07.490\nI can see they're already done.\n\n563\n00:29:07.490 --> 00:29:08.630\nRight?\nWe need to watch this,\n\n564\n00:29:08.630 --> 00:29:11.880\ncuz if you're restoring 10,000 users,\nyou'll want to watch and\n\n565\n00:29:11.880 --> 00:29:14.160\nmake sure everybody gets\nflagged as completed.\n\n566\n00:29:14.160 --> 00:29:16.550\nAnd you can do a filter\nto filter out completed,\n\n567\n00:29:16.550 --> 00:29:20.330\nthey'll say queued if they're waiting,\nand then completed when they're done.\n\n568\n00:29:20.330 --> 00:29:22.930\nSo I can see that this is done,\nand my mailbox, Jane's mailbox,\n\n569\n00:29:22.930 --> 00:29:25.970\nwe should be restored, and\nwe should be back in business, all right?\n\n570\n00:29:25.970 --> 00:29:27.562\nNow how can we tell?\n\n571\n00:29:27.562 --> 00:29:30.274\nWell, the end users can really tell,\nthey can log in and\n\n572\n00:29:30.274 --> 00:29:32.084\nat this point they should have both.\n\n573\n00:29:32.084 --> 00:29:36.413\nAll their historical mail and the mail\nthat was in the dial tone recovery should\n\n574\n00:29:36.413 --> 00:29:39.310\nall be present and\nthey should have that available.\n\n575\n00:29:39.310 --> 00:29:44.580\nSo if I go in here and\naccess OWA I'm gonna refresh my mailbox.\n\n576\n00:29:45.850 --> 00:29:49.510\nAnd when I refresh it here's\nmy email prior to the back up.\n\n577\n00:29:49.510 --> 00:29:52.250\nAnd here's my email from\nthe dial tone database.\n\n578\n00:29:52.250 --> 00:29:54.070\nAnd now it's all in one place.\n\n579\n00:29:54.070 --> 00:29:56.750\nAs a user, my mailbox is now whole again.\n\n580\n00:29:56.750 --> 00:29:59.570\nRight?\nSo I have all my mail back again.\n\n581\n00:29:59.570 --> 00:30:03.680\nNow this was a much more involved\nprocess than doing the standard restore\n\n582\n00:30:03.680 --> 00:30:05.300\nlike we did in the other episode.\n\n583\n00:30:05.300 --> 00:30:09.420\nAnd that's because here, we're subjecting\nourself to something that's more difficult\n\n584\n00:30:09.420 --> 00:30:12.340\nbecause we want our database\nto be back online faster.\n\n585\n00:30:12.340 --> 00:30:15.219\nSo if speed is of the essence,\nyou do it this way.\n\n586\n00:30:15.219 --> 00:30:18.184\nBut if you wanna do it thoroughly,\nnot make mistakes,\n\n587\n00:30:18.184 --> 00:30:20.126\nthe other way is certainly easier.\n\n588\n00:30:20.126 --> 00:30:21.883\nYou just have a longer\ndowntime the other way,\n\n589\n00:30:21.883 --> 00:30:25.350\ncuz you have to wait for the database to\nfully restore before you bring it online.\n\n590\n00:30:25.350 --> 00:30:27.230\nHere, we can bring the database\nonline right away,\n\n591\n00:30:27.230 --> 00:30:29.680\nand not have to wait for that to restore.\n\n592\n00:30:29.680 --> 00:30:32.700\nThere is one more thing that we\nneed to do, if we're actually done,\n\n593\n00:30:32.700 --> 00:30:35.790\nwhen all of our mailbox\nrestore requests are done,\n\n594\n00:30:35.790 --> 00:30:38.910\nwe can dismount the recovery database,\nand delete it.\n\n595\n00:30:38.910 --> 00:30:44.400\nSo, once it's done, you basically come\nin do a Dismount-Database RecoveryDB.\n\n596\n00:30:44.400 --> 00:30:45.600\nThat's what I called mine.\n\n597\n00:30:45.600 --> 00:30:48.850\nSo, I'm going to dismount it, take it\noffline, and then you can remove it.\n\n598\n00:30:48.850 --> 00:30:54.675\nAnd to remove it,\nwe can just do a Remove-mailboxDatabase\n\n599\n00:30:54.675 --> 00:31:00.290\n-Identity RecoveryDB and\nthat'll remove it.\n\n600\n00:31:00.290 --> 00:31:02.330\nIt'll remove it but\nit'll leave the files on the hard drive.\n\n601\n00:31:02.330 --> 00:31:03.930\nAnd that's what it's\nwarning me about there.\n\n602\n00:31:03.930 --> 00:31:05.090\nBut I'm done.\n\n603\n00:31:05.090 --> 00:31:07.170\nSo now I can go in and\nI can remove those files and\n\n604\n00:31:07.170 --> 00:31:09.620\nget rid of them and\nnow I'm back to being live.\n\n605\n00:31:09.620 --> 00:31:10.720\nAll right?\n\n606\n00:31:10.720 --> 00:31:13.530\nSo a lot of stuff involved\nthere to go through.\n\n607\n00:31:13.530 --> 00:31:16.110\nA lot of things that we have\nto be aware of and get set.\n\n608\n00:31:16.110 --> 00:31:20.350\nWe had a comment in the chatroom that\nwe saw the mailbox for Don Pezet.\n\n609\n00:31:20.350 --> 00:31:22.160\nWe saw the mailbox for Jane Smith.\n\n610\n00:31:22.160 --> 00:31:24.260\nWe didn't see administrator, right?\n\n611\n00:31:24.260 --> 00:31:25.820\nWhy didn't we see administrator?\n\n612\n00:31:25.820 --> 00:31:29.860\nWell, to be honest with you,\nI've never logged in as administrator.\n\n613\n00:31:29.860 --> 00:31:34.110\nIf you've never logged in as a user, their\nmailbox doesn't actually get created,\n\n614\n00:31:34.110 --> 00:31:36.720\ntheir mailbox gets created\nthe first time they login.\n\n615\n00:31:36.720 --> 00:31:39.564\nSo if they've never logged in,\nthey have an e-mail address,\n\n616\n00:31:39.564 --> 00:31:42.472\nthey have a configuration, but\nthey don't have a mailbox yet.\n\n617\n00:31:42.472 --> 00:31:46.846\nSo when I went to do the restore,\nit didn't find that mailbox and\n\n618\n00:31:46.846 --> 00:31:49.040\nit didn't offer to restore it.\n\n619\n00:31:49.040 --> 00:31:51.710\nOkay, I think there was another user,\nwas there another user in there?\n\n620\n00:31:51.710 --> 00:31:54.530\nI don't think administrator\nwas the only one.\n\n621\n00:31:54.530 --> 00:31:56.700\nLet's see if we had any other,\noh yeah, John Doe.\n\n622\n00:31:56.700 --> 00:31:59.820\nSo here's John Doe and I've never\nlogged in as John Doe either, and\n\n623\n00:31:59.820 --> 00:32:02.300\nso when I looked down here,\nit got me and Jane.\n\n624\n00:32:02.300 --> 00:32:05.390\nIt didn't get John Doe because\nJohn doesn't have a mailbox.\n\n625\n00:32:05.390 --> 00:32:06.990\nThere's nothing to restore.\n\n626\n00:32:06.990 --> 00:32:09.150\nSo sometimes these errors\nare indicating just that.\n\n627\n00:32:09.150 --> 00:32:10.240\nThe mailbox is empty.\n\n628\n00:32:10.240 --> 00:32:12.540\nSo you'll have to double check those and\nmake sure.\n\n629\n00:32:12.540 --> 00:32:14.920\nBut otherwise it's there.\n\n630\n00:32:14.920 --> 00:32:17.850\nYou could actually get even more\ncomplex with that recover command to\n\n631\n00:32:17.850 --> 00:32:20.340\nfilter out mailboxes that\nhave never logged in.\n\n632\n00:32:20.340 --> 00:32:21.940\nSo there's ways to do that.\n\n633\n00:32:21.940 --> 00:32:24.499\nBut otherwise it does the recovery and\nyou're back in business.\n\n634\n00:32:25.630 --> 00:32:29.790\nAll right well, in this episode we got\na chance to see a dial tone restore.\n\n635\n00:32:29.790 --> 00:32:32.750\nIt was a lot more involved than\njust a regular restore, but\n\n636\n00:32:32.750 --> 00:32:33.670\nit serves its purpose.\n\n637\n00:32:33.670 --> 00:32:35.620\nIt gets our database back\nonline as fast as we can,\n\n638\n00:32:35.620 --> 00:32:38.790\nand gets people back in their\nemail as quick as possible so\n\n639\n00:32:38.790 --> 00:32:42.280\ndefinitely a great solution that's out\nthere and one that's available to you.\n\n640\n00:32:42.280 --> 00:32:44.259\nAll right well I hope you guys enjoyed it.\n\n641\n00:32:44.259 --> 00:32:48.539\nThat's all I've got for this episode, so\nsigning off for ITProTV, I'm Don Pezet.\n\n642\n00:32:48.539 --> 00:32:49.566\nAnd I'll see you next time.\n\n643\n00:32:49.566 --> 00:32:55.280\n[MUSIC]\n\n",
          "vimeoId": "136822911"
        },
        {
          "description": "In this episode, Don explains how to restore a Public Folder environment in Exchange 2013. He describes how to restore the entire Public Folder mailbox, as well as how to restore individual folders. Finally, he demonstrates the process.",
          "length": "1571",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-4-public_folder_restore-082115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-4-public_folder_restore-082115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-4-public_folder_restore-082115-1-sm.jpg",
          "title": "Public Folder Restore",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:06.589\n[MUSIC]\n\n2\n00:00:06.589 --> 00:00:14.021\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:14.021 --> 00:00:16.310\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:16.310 --> 00:00:17.201\nI'm your host,\n\n5\n00:00:17.201 --> 00:00:20.690\nDon Pezet, back again with another\nepisode of Microsoft Exchange 2013.\n\n6\n00:00:20.690 --> 00:00:24.360\nNow, in this episode,\nwe're gonna take a look at backing up and\n\n7\n00:00:24.360 --> 00:00:27.930\nrestoring public folders and\npublic folder data in Exchange 2013.\n\n8\n00:00:27.930 --> 00:00:31.780\nAnd I have to throw that little caveat\non the end there, it's in Exchange 2013,\n\n9\n00:00:31.780 --> 00:00:34.950\nbecause every previous\nversion of Exchange did it\n\n10\n00:00:34.950 --> 00:00:36.940\ndifferently than the way\nwe're about to do it now.\n\n11\n00:00:38.250 --> 00:00:38.880\nWhy is that?\n\n12\n00:00:38.880 --> 00:00:42.000\nWell remember in earlier\nversions of Exchange,\n\n13\n00:00:42.000 --> 00:00:44.430\npublic folders had their own database.\n\n14\n00:00:44.430 --> 00:00:46.670\nYou had a dedicated\npublic folder database.\n\n15\n00:00:46.670 --> 00:00:49.320\nAnd so\nit was different than a mailbox database.\n\n16\n00:00:49.320 --> 00:00:52.150\nAnd that meant the way that you backed it\nup and the way that you restored it was\n\n17\n00:00:52.150 --> 00:00:55.020\ndifferent, because it wasn't\na normal mailbox database.\n\n18\n00:00:55.020 --> 00:00:56.220\nBut starting in Exchange 2013,\n\n19\n00:00:56.220 --> 00:00:59.770\nyour public folders are no longer\nstored in a separate database.\n\n20\n00:00:59.770 --> 00:01:02.810\nIn fact, they're no longer stored\nin a database all together,\n\n21\n00:01:02.810 --> 00:01:04.750\nthey're stored in a mailbox.\n\n22\n00:01:04.750 --> 00:01:07.880\nYour public folders are just another\nmailbox right there on your server on\n\n23\n00:01:07.880 --> 00:01:08.940\nthe back end.\n\n24\n00:01:08.940 --> 00:01:12.710\nSo when we talk about backing up and\nrestoring public folders,\n\n25\n00:01:12.710 --> 00:01:17.970\nit's really the same as backing up and\nrestoring an individual mailbox.\n\n26\n00:01:17.970 --> 00:01:20.690\nSo, that makes life a lot\neasier on us as administrators.\n\n27\n00:01:20.690 --> 00:01:24.490\nBecause now we have one process to\nremember instead of two separate things.\n\n28\n00:01:24.490 --> 00:01:27.590\nBut, I do want to be thorough, so we're\ngoing to spend this episode taking a look\n\n29\n00:01:27.590 --> 00:01:31.280\nat this process and seeing how to\nget those backed up and restored.\n\n30\n00:01:31.280 --> 00:01:34.050\nBut if you've watched the episode\non single mailbox recovery,\n\n31\n00:01:34.050 --> 00:01:37.220\nyou'll see there's a lot of\ncommon elements here, all right?\n\n32\n00:01:37.220 --> 00:01:40.470\nLet's just start off with a basic public\nfolder hierarchy, kinda see what we have\n\n33\n00:01:40.470 --> 00:01:43.842\nthen we'll take a backup, and then we'll\nget a chance to see how the restores work.\n\n34\n00:01:43.842 --> 00:01:46.290\nAll right, so\nI'm logged into my server here and\n\n35\n00:01:46.290 --> 00:01:49.580\nI mentioned how public folders\nare now stored in a mailbox, right?\n\n36\n00:01:49.580 --> 00:01:50.640\nWhere do we see that?\n\n37\n00:01:50.640 --> 00:01:55.240\nWell, here in my Exchange Admin Center,\nI can go down to my Public Folders.\n\n38\n00:01:55.240 --> 00:01:59.260\nAnd inside of Public Folders,\nI can go to Public Folder Mailboxes.\n\n39\n00:01:59.260 --> 00:02:02.460\nNow if you're using public folders,\nyou're gonna have at least one mailbox.\n\n40\n00:02:02.460 --> 00:02:05.320\nThe first mailbox you create is\nthe one that has the readable and\n\n41\n00:02:05.320 --> 00:02:07.389\nwriteable copy of your public folders.\n\n42\n00:02:08.650 --> 00:02:13.910\nIf you add more than one mailbox you can\ncreate read-only clones of the mailbox.\n\n43\n00:02:13.910 --> 00:02:16.160\nAnd that's nice because you can\nhave them in different areas.\n\n44\n00:02:16.160 --> 00:02:17.990\nSo if your server fails,\n\n45\n00:02:17.990 --> 00:02:20.370\nwell your public folders are stored\non another server somewhere else.\n\n46\n00:02:20.370 --> 00:02:23.610\nYou just make that one writable and\noff you go, right?\n\n47\n00:02:23.610 --> 00:02:25.810\nOr clone the data from that\nmailbox back into your primary and\n\n48\n00:02:25.810 --> 00:02:27.130\nyou're back in business too.\n\n49\n00:02:27.130 --> 00:02:31.090\nSo if you've got clones, you might not\nneed to go to your backup at all, right?\n\n50\n00:02:31.090 --> 00:02:32.940\nSo when do we need to go to our backup?\n\n51\n00:02:32.940 --> 00:02:36.650\nWell, one, if we don't have clones, if we\ndon't have any other copies of our public\n\n52\n00:02:36.650 --> 00:02:40.690\nfolder database, or two,\nif our public folders are online,\n\n53\n00:02:40.690 --> 00:02:43.980\nwe're just trying to recover\nsomething old that was deleted.\n\n54\n00:02:43.980 --> 00:02:45.395\nMaybe I get a call from a user and\n\n55\n00:02:45.395 --> 00:02:48.827\nthey're like man I deleted something\ntwo months ago and now I realize I need\n\n56\n00:02:48.827 --> 00:02:52.611\nit it's really important I've got the\nlegal department asking me for it, okay?\n\n57\n00:02:52.611 --> 00:02:56.363\nWell if you've got clones they're\ndeleted on the clones too, right, so\n\n58\n00:02:56.363 --> 00:02:58.680\nthat doesn't really help us much.\n\n59\n00:02:58.680 --> 00:03:02.120\nBut if we've got backup tapes,\nright, or backup DVDs, or\n\n60\n00:03:02.120 --> 00:03:04.150\nwhatever it is that we backup to,\nthat's a different story.\n\n61\n00:03:04.150 --> 00:03:05.800\nWe might have backups from a year ago.\n\n62\n00:03:05.800 --> 00:03:08.070\nAnd so you can go and\nget one of the older backups and\n\n63\n00:03:08.070 --> 00:03:09.240\nrestore that data and bring it back.\n\n64\n00:03:09.240 --> 00:03:10.820\nAnd that's when it's really important.\n\n65\n00:03:10.820 --> 00:03:13.310\nSo I need to look here under\nPublic Folder Mailboxes,\n\n66\n00:03:13.310 --> 00:03:15.900\nbecause this is what's gonna\ntell me two things, right?\n\n67\n00:03:15.900 --> 00:03:17.700\nOne is gonna tell me\nwhether I have any copies.\n\n68\n00:03:17.700 --> 00:03:20.780\nSo I have copies, I can probably\ngo there for most of my needs.\n\n69\n00:03:20.780 --> 00:03:23.260\nAnd then two, it's gonna give\nme the name of the mailbox.\n\n70\n00:03:23.260 --> 00:03:24.330\nI need that name of the mailbox.\n\n71\n00:03:24.330 --> 00:03:25.480\nThat's gonna be important.\n\n72\n00:03:25.480 --> 00:03:27.963\nIt's not important for\nthe backup, but for the restore.\n\n73\n00:03:27.963 --> 00:03:31.470\nBecause when I do a restore,\nI just wanna restore that one mailbox.\n\n74\n00:03:31.470 --> 00:03:33.920\nI don't wanna restore\nthe whole mailbox database\n\n75\n00:03:33.920 --> 00:03:36.490\nbecause that's stored in a mailbox\ndatabase with other users too.\n\n76\n00:03:36.490 --> 00:03:37.730\nOr at least in mine it is.\n\n77\n00:03:37.730 --> 00:03:38.350\nIt doesn't have to be.\n\n78\n00:03:38.350 --> 00:03:41.400\nYou could have it in its own dedicated\nmailbox database if you wanted.\n\n79\n00:03:41.400 --> 00:03:44.970\nSome people do that because public\nfolders are very read intensive.\n\n80\n00:03:44.970 --> 00:03:46.350\nPeople read from them a lot.\n\n81\n00:03:46.350 --> 00:03:48.480\nAnd they're not terribly\nwrite intensive but\n\n82\n00:03:48.480 --> 00:03:50.780\nwhen people do write they're\nwriting files in there.\n\n83\n00:03:50.780 --> 00:03:52.040\nAnd those files can be big.\n\n84\n00:03:52.040 --> 00:03:55.246\nSo you might choose to push those off\nonto their own mailbox database just for\n\n85\n00:03:55.246 --> 00:03:55.906\nperformance.\n\n86\n00:03:55.906 --> 00:03:57.640\nBut either way, I just need his name.\n\n87\n00:03:57.640 --> 00:03:58.950\nPublic Folders is what I called mine.\n\n88\n00:03:58.950 --> 00:04:00.290\nYou could have called yours Bob,\n\n89\n00:04:00.290 --> 00:04:02.340\nor whatever it is that\nyou wanted to call yours.\n\n90\n00:04:02.340 --> 00:04:04.890\nI called mine Public Folders\ncuz it's easy to remember, but\n\n91\n00:04:04.890 --> 00:04:06.980\nI'm gonna need to know that for\nthe restore.\n\n92\n00:04:06.980 --> 00:04:10.650\nAnd you can see on my Public Folders I've\ngot IT, Marketing, Sales.\n\n93\n00:04:10.650 --> 00:04:11.880\nI've got a few different things.\n\n94\n00:04:11.880 --> 00:04:13.590\nAnd if I were to fire\nup Microsoft Outlook,\n\n95\n00:04:13.590 --> 00:04:15.900\nI could connect right to those\npublic folders and get to it.\n\n96\n00:04:15.900 --> 00:04:18.800\nNow, I'm on my server, and\nI don't have Outlook installed, but\n\n97\n00:04:18.800 --> 00:04:20.480\nyou can get to it through OWA.\n\n98\n00:04:20.480 --> 00:04:25.320\nIf I fire up Outlook Web Access, you can\nget to your public folders right here.\n\n99\n00:04:25.320 --> 00:04:29.530\nIt's kind of a hidden feature, Microsoft\ndoesn't go right out to call it out.\n\n100\n00:04:29.530 --> 00:04:32.190\nIf you wanna connect to a public\nfolder from OWA, all you\n\n101\n00:04:32.190 --> 00:04:35.770\nhave to do is right-click on favorites and\nyou'll see Add a public folder.\n\n102\n00:04:35.770 --> 00:04:37.370\nAnd you can add public\nfolders to your favorites.\n\n103\n00:04:37.370 --> 00:04:39.570\nThat's the way that it's done in OWA and\nExchange 2013.\n\n104\n00:04:39.570 --> 00:04:44.470\nSo like I've got IT, but I could come in\nhere and add my other ones like Marketing,\n\n105\n00:04:44.470 --> 00:04:45.840\nand Sales, and\n\n106\n00:04:45.840 --> 00:04:51.230\nnow I'll have access to all of my public\nfolders, right here inside of OWA.\n\n107\n00:04:51.230 --> 00:04:54.600\nBut looking at the IT public folder,\nI can see I've got a report, right.\n\n108\n00:04:54.600 --> 00:04:58.150\nSo there's a sample report that's sitting\nthere, it's a rich text document and\n\n109\n00:04:58.150 --> 00:05:00.670\nif I go to open that up, there it is.\n\n110\n00:05:00.670 --> 00:05:03.760\nHere's this document that I've\nstored in a public folder, alright.\n\n111\n00:05:03.760 --> 00:05:05.910\nSo it's there and I know it's there but\n\n112\n00:05:05.910 --> 00:05:07.520\nit's not safe because I\nhaven't backed it up yet.\n\n113\n00:05:07.520 --> 00:05:09.570\nSo first off I need to take a backup.\n\n114\n00:05:09.570 --> 00:05:12.920\nFortunately, since the public folders are\njust in a mailbox database like everything\n\n115\n00:05:12.920 --> 00:05:16.020\nelse we run the same backup we would for\nanything else.\n\n116\n00:05:16.020 --> 00:05:20.520\nSo, I'm gonna jump back here to my\nServer Manager and I'm gonna run Tools and\n\n117\n00:05:20.520 --> 00:05:24.770\nWindows Server Backup and\nwe'll take a backup of that.\n\n118\n00:05:24.770 --> 00:05:28.350\nNow, actually you know what,\nI'm gonna have a slight problem here.\n\n119\n00:05:28.350 --> 00:05:30.030\nI'm on my client access server right.\n\n120\n00:05:30.030 --> 00:05:34.530\nSo this is LAB-CAS01 but mailbox database\nisn't on my client access server.\n\n121\n00:05:34.530 --> 00:05:37.900\nSo I need to backup a database\non a different server.\n\n122\n00:05:37.900 --> 00:05:39.220\nI need to go to my mailbox server.\n\n123\n00:05:39.220 --> 00:05:41.140\nSo I'm gonna jump over\nto my mailbox server.\n\n124\n00:05:41.140 --> 00:05:43.000\nWhoops, if I can remember where it is.\n\n125\n00:05:43.000 --> 00:05:44.060\nHere it is.\n\n126\n00:05:44.060 --> 00:05:45.580\nAnd I'm gonna do the backup here.\n\n127\n00:05:45.580 --> 00:05:48.500\nNow remember, Windows Server Backup\nis not installed by default so\n\n128\n00:05:48.500 --> 00:05:49.380\nI need to get it installed.\n\n129\n00:05:49.380 --> 00:05:54.080\nI'll just go over here to add,\nremove roles and we'll find it.\n\n130\n00:05:54.080 --> 00:05:56.940\nIt's not a role,\nI'm gonna skip past the role screen, but\n\n131\n00:05:56.940 --> 00:06:00.210\non this next screen where we get all of\nour features, that's what I'm looking for.\n\n132\n00:06:00.210 --> 00:06:04.260\nAnd if we scroll down we can find our\nWindows Server Backup right there and\n\n133\n00:06:04.260 --> 00:06:05.460\nI need to get it installed.\n\n134\n00:06:05.460 --> 00:06:09.090\nIt's kind of a tricky one because the icon\nfor the application is there by default.\n\n135\n00:06:09.090 --> 00:06:13.230\nIf I go down to Tools, you'll see\nWindows Server Backup already shows up.\n\n136\n00:06:13.230 --> 00:06:15.600\nAnd that's the client from\nWindows Server Backup.\n\n137\n00:06:15.600 --> 00:06:17.940\nI could use that to connect to\nother servers that are running\n\n138\n00:06:17.940 --> 00:06:21.290\nWindows Server Backup but\nI couldn't run a backup itself, all right?\n\n139\n00:06:21.290 --> 00:06:23.310\nSo what what I'm installing\nhere is the back end,\n\n140\n00:06:23.310 --> 00:06:25.750\nto actually get that backup\nfunctionally running.\n\n141\n00:06:25.750 --> 00:06:27.350\nNow I'm gonna take a backup.\n\n142\n00:06:27.350 --> 00:06:29.002\nAnd once I've got\nthe backup I'm gonna go and\n\n143\n00:06:29.002 --> 00:06:30.580\ndelete that email out of my public folder.\n\n144\n00:06:30.580 --> 00:06:32.020\nI'm just gonna remove it and\n\n145\n00:06:32.020 --> 00:06:34.970\nwe'll empty our recycle bin or\nwhatever try and get that completely gone.\n\n146\n00:06:34.970 --> 00:06:38.049\nWe have to purge it cuz otherwise\nyou have deleted item retention.\n\n147\n00:06:38.049 --> 00:06:41.529\nAnd deleted item retention last for\n30 days so, well,\n\n148\n00:06:41.529 --> 00:06:45.240\nit's 14 days on some systems by default,\n30 on others.\n\n149\n00:06:45.240 --> 00:06:48.310\nDepends on what service pack\nyou had when you installed.\n\n150\n00:06:48.310 --> 00:06:49.550\nIt's all customizable.\n\n151\n00:06:49.550 --> 00:06:52.250\nSo users might be able to recover\nright out of the recycle bin.\n\n152\n00:06:52.250 --> 00:06:55.310\nBut if it's really old,\nif it's three months, six months,\n\n153\n00:06:55.310 --> 00:06:59.040\na year old, we're gonna have\nto go to those backup tapes.\n\n154\n00:06:59.040 --> 00:07:01.970\nSo now that it finished installing I can\ngo and launch my Windows Server Backup and\n\n155\n00:07:01.970 --> 00:07:04.510\nI can take my first backup.\n\n156\n00:07:04.510 --> 00:07:07.970\nNow, when I do a backup, remember,\nI need to back up to a network location or\n\n157\n00:07:07.970 --> 00:07:10.460\nI can do a backup to a local hard drive,\n\n158\n00:07:10.460 --> 00:07:13.150\nif it's separate from the hard\ndrive where my data is, right?\n\n159\n00:07:13.150 --> 00:07:15.610\nSo I can attach a USB hard drive or\nsomething.\n\n160\n00:07:15.610 --> 00:07:19.190\nYou can also backup to DVDs, we got\na couple of different options there.\n\n161\n00:07:19.190 --> 00:07:22.170\nSo in Windows Server Backup,\nI'm just gonna go up here to Local Backup.\n\n162\n00:07:22.170 --> 00:07:24.240\nAnd this is the first time\nI'm running a backup, so\n\n163\n00:07:24.240 --> 00:07:25.880\nI'm gonna have to set a few options here.\n\n164\n00:07:25.880 --> 00:07:28.708\nIt's looking to see if I have\nany previous settings to load or\n\n165\n00:07:28.708 --> 00:07:30.047\na backup schedule in place.\n\n166\n00:07:30.047 --> 00:07:33.945\nAnd of course I don't, so it's not gonna\nfind anything, and so it's gonna offer for\n\n167\n00:07:33.945 --> 00:07:36.620\nme to set up my initial backup,\nand I can set up a schedule.\n\n168\n00:07:36.620 --> 00:07:39.970\nI'm just gonna do a one time backup here,\nso I'll set this backup up.\n\n169\n00:07:39.970 --> 00:07:42.270\nI'm gonna tell it to do\na full backup of my server.\n\n170\n00:07:42.270 --> 00:07:44.886\nNow you can back up individual\npieces of the server, but\n\n171\n00:07:44.886 --> 00:07:47.736\nMicrosoft's recommendation is\nalways to do a full backup.\n\n172\n00:07:47.736 --> 00:07:50.957\nAnd the reason is,\nif you have that full complete backup,\n\n173\n00:07:50.957 --> 00:07:52.876\nit includes bare metal recovery.\n\n174\n00:07:52.876 --> 00:07:55.441\nAnd even if I lose the whole server,\nI'll be able to recover that.\n\n175\n00:07:55.441 --> 00:07:57.279\nSo that's kind of a nice feature to have.\n\n176\n00:07:57.279 --> 00:07:58.650\nSo I'm gonna choose full server,\n\n177\n00:07:58.650 --> 00:08:01.550\nand you'll see my backup's still\ngonna be pretty small on this system.\n\n178\n00:08:01.550 --> 00:08:04.850\nAll right, so now it's asking\nwhere I wanna back it up to.\n\n179\n00:08:04.850 --> 00:08:07.890\nI'm gonna choose local drives, and I've\ngot an extra hard drive attached here,\n\n180\n00:08:07.890 --> 00:08:08.880\nmy E drive.\n\n181\n00:08:08.880 --> 00:08:10.840\nNow, technically that's\npart of the full backup, so\n\n182\n00:08:10.840 --> 00:08:13.370\nI'm gonna get a warning here\nabout it wanting to exclude that.\n\n183\n00:08:13.370 --> 00:08:14.750\nI'm okay with that, so I'll say okay.\n\n184\n00:08:14.750 --> 00:08:17.730\nAnd now I can see bare metal recovery.\n\n185\n00:08:17.730 --> 00:08:20.450\nIt's backing up the C drive,\nand the system state, and\n\n186\n00:08:20.450 --> 00:08:24.790\nthat's including the Exchange services and\nthe mailbox databases attached to it.\n\n187\n00:08:24.790 --> 00:08:27.760\nSo that's exactly what I want,\nI'm going to start that back up.\n\n188\n00:08:27.760 --> 00:08:31.130\nNow, the key take away here is\nthat when we do a backup for\n\n189\n00:08:31.130 --> 00:08:33.850\npublic folders, it's no different\nthan a backup for mailboxes.\n\n190\n00:08:33.850 --> 00:08:35.840\nSo its all one backup strategy.\n\n191\n00:08:35.840 --> 00:08:38.110\nWe don't need separate backup\nstrategies for different things,\n\n192\n00:08:38.110 --> 00:08:39.270\nits all done one way.\n\n193\n00:08:39.270 --> 00:08:41.780\nAnd when we go to restore,\nit's kind of the same thing.\n\n194\n00:08:41.780 --> 00:08:45.730\nIf I wanna restore the whole mailbox\ndatabase, it'll include user mailboxes and\n\n195\n00:08:45.730 --> 00:08:47.280\npublic folder mailboxes.\n\n196\n00:08:47.280 --> 00:08:50.920\nIf I wanna restore just a user or\njust a public folder, I can do that.\n\n197\n00:08:50.920 --> 00:08:51.770\nIt's done the same way.\n\n198\n00:08:51.770 --> 00:08:55.160\nRight, everything is much more\nsimple under Exchange 2013.\n\n199\n00:08:55.160 --> 00:08:56.120\nNow I say it's simple.\n\n200\n00:08:56.120 --> 00:08:59.090\nWe are still gonna have to jump to\nthe PowerShell as part of our restore, so\n\n201\n00:08:59.090 --> 00:09:02.810\nit's not completely easy, but at least\nit's easier than what it used to be.\n\n202\n00:09:02.810 --> 00:09:03.430\nRight.\n\n203\n00:09:03.430 --> 00:09:05.830\nSo I'm gonna let that run and\nthe backup's kind of churning along there.\n\n204\n00:09:05.830 --> 00:09:07.120\nIt'll move fairly quick.\n\n205\n00:09:07.120 --> 00:09:10.290\nThe larger your mailbox database is, the\nlonger this backup will take to run, and\n\n206\n00:09:10.290 --> 00:09:13.070\nif you're backing up over\na network it'll take even longer.\n\n207\n00:09:13.070 --> 00:09:15.120\nAll right, but\nonce it's done we'll be able to pick and\n\n208\n00:09:15.120 --> 00:09:17.720\nchoose the data out of it to\nget recorded and get in place.\n\n209\n00:09:17.720 --> 00:09:20.860\nAlso keep in mind there are third party\nsoftware solutions out there that can\n\n210\n00:09:20.860 --> 00:09:22.170\ndo this too.\n\n211\n00:09:22.170 --> 00:09:24.780\nThings like Semantic Back Up Exec,\nor Arcserve,\n\n212\n00:09:24.780 --> 00:09:30.120\nComvault, Acronis True Image, oh no,\nAcronis Advanced Back Up for Exchange.\n\n213\n00:09:30.120 --> 00:09:32.580\nThere's a number of products\nout there that'll do it.\n\n214\n00:09:32.580 --> 00:09:36.200\nMost of them don't really offer you\nanything you don't have right here in\n\n215\n00:09:36.200 --> 00:09:39.710\nWindows Server Backup, but there's two\nfeatures that people really pay for.\n\n216\n00:09:39.710 --> 00:09:41.540\nThe first feature is\ncentralized management.\n\n217\n00:09:41.540 --> 00:09:43.380\nIf you're backing up more than one server,\n\n218\n00:09:43.380 --> 00:09:45.460\nWindows Server Backup's\nnot really good for that.\n\n219\n00:09:45.460 --> 00:09:47.750\nMicrosoft has\nthe System Center Data Protection Manager.\n\n220\n00:09:47.750 --> 00:09:48.608\nThere's that one.\n\n221\n00:09:48.608 --> 00:09:51.640\nThe third party solutions can sometimes\nintegrate with other software better, so\n\n222\n00:09:51.640 --> 00:09:53.100\nyou might choose to go that route.\n\n223\n00:09:53.100 --> 00:09:56.130\nThe other feature,\nsingle item recovery, right?\n\n224\n00:09:56.130 --> 00:09:57.855\nIf a user calls me and says, hey Don,\n\n225\n00:09:57.855 --> 00:10:01.900\nI deleted this one document out of\na public folder, can you restore it?\n\n226\n00:10:01.900 --> 00:10:05.390\nI'll say yes, but the real answer is no,\nI can't restore that one document,\n\n227\n00:10:05.390 --> 00:10:07.620\nI have to restore that\nwhole public folder.\n\n228\n00:10:07.620 --> 00:10:12.340\nSo if I restore a backup from six months\nago, anything that's been deleted\n\n229\n00:10:12.340 --> 00:10:14.720\nfrom that period six months\nago is gonna be back again.\n\n230\n00:10:14.720 --> 00:10:16.890\nSo I can't restore just one document.\n\n231\n00:10:16.890 --> 00:10:19.410\nIf you want that granular\nlevel of restore,\n\n232\n00:10:19.410 --> 00:10:21.620\nthird party solutions are gonna\nbe the way that you want to go.\n\n233\n00:10:21.620 --> 00:10:24.930\nAll right,\nnow this backup is churning along, and\n\n234\n00:10:24.930 --> 00:10:26.670\nit's already done a snapshot of my server.\n\n235\n00:10:26.670 --> 00:10:29.840\nSo if I start making changes now, things\naren't gonna become part of the backup,\n\n236\n00:10:29.840 --> 00:10:32.670\nthey'll actually be separate, because\nof the way volume shadow copy works.\n\n237\n00:10:32.670 --> 00:10:36.820\nRight, the volume shadow copy snapshot\nright when the backup started, and\n\n238\n00:10:36.820 --> 00:10:39.210\nnow it's backing up that snapshot.\n\n239\n00:10:39.210 --> 00:10:41.180\nSo my database could be changing and\nupdating and\n\n240\n00:10:41.180 --> 00:10:42.740\nthat's not gonna get rolled back in here.\n\n241\n00:10:42.740 --> 00:10:46.730\nThat's a little bit of a difference too,\nfrom older versions like Exchange 2003.\n\n242\n00:10:46.730 --> 00:10:49.480\nWhere it would do a backup and\nthen it would turn around and\n\n243\n00:10:49.480 --> 00:10:53.420\ndo a second backup if anything new that\ncame in while the backup was running.\n\n244\n00:10:53.420 --> 00:10:54.710\nExchange 2013 doesn't have to do that.\n\n245\n00:10:54.710 --> 00:10:56.660\nIt's a true point in time back up.\n\n246\n00:10:56.660 --> 00:10:57.840\nSo when this is done,\n\n247\n00:10:57.840 --> 00:11:02.080\nI will have exactly what my server\nlooked like when this backup started.\n\n248\n00:11:02.080 --> 00:11:02.710\nAll right.\n\n249\n00:11:02.710 --> 00:11:05.110\nNow for my users,\nthey can still be in the system, right?\n\n250\n00:11:05.110 --> 00:11:06.480\nThat's doesn't really impact them.\n\n251\n00:11:06.480 --> 00:11:09.280\nSo they can be browsing\naround in their mailbox.\n\n252\n00:11:09.280 --> 00:11:11.350\nAccess might be a little\nslower during a backup.\n\n253\n00:11:11.350 --> 00:11:14.530\nWe always have discontention issues,\nbut otherwise they can get in and work.\n\n254\n00:11:14.530 --> 00:11:15.990\nWe could be adding new things, right?\n\n255\n00:11:15.990 --> 00:11:19.870\nSo if I fire up a new email,\nall right, everyone, a new post here.\n\n256\n00:11:19.870 --> 00:11:22.590\nI could call this, like, my to do list.\n\n257\n00:11:23.690 --> 00:11:26.480\nAnd I could say like, get stuff done.\n\n258\n00:11:27.740 --> 00:11:29.012\nAnd then go from there.\n\n259\n00:11:29.012 --> 00:11:30.300\nOops.\n\n260\n00:11:30.300 --> 00:11:33.560\nApparently I deleted my email by accident\nso we'll try that again [CHUCKLE].\n\n261\n00:11:33.560 --> 00:11:35.640\nSo we're going to get stuff done.\n\n262\n00:11:35.640 --> 00:11:37.180\nI wonder how I did that.\n\n263\n00:11:37.180 --> 00:11:37.880\nThat's amazing.\n\n264\n00:11:37.880 --> 00:11:40.030\nI'll have to go back and\nwatch the footage on that one.\n\n265\n00:11:40.030 --> 00:11:43.730\nSo I'm just going to create this,\nthis list.\n\n266\n00:11:43.730 --> 00:11:45.960\nAnd I'll post it, and so\nthat's getting added in.\n\n267\n00:11:45.960 --> 00:11:48.610\nSee I'm working with it even though the\nbackup is running and that's fine, right.\n\n268\n00:11:48.610 --> 00:11:49.690\nSo we can keep manipulating that.\n\n269\n00:11:49.690 --> 00:11:52.490\nIt will take a second for\nthat document to actually show up here.\n\n270\n00:11:52.490 --> 00:11:55.270\nAlso that public folder\nmight be email enabled.\n\n271\n00:11:55.270 --> 00:11:58.570\nSo people could be emailing documents\nin and they'd be appearing right here.\n\n272\n00:11:58.570 --> 00:12:00.920\nThat's all just part of working\nwith the public folders.\n\n273\n00:12:01.970 --> 00:12:05.850\nBut if I take something like that sample\nreport, and I delete it, right, well,\n\n274\n00:12:05.850 --> 00:12:08.170\nlet's make sure that backup\nis actually finished.\n\n275\n00:12:08.170 --> 00:12:09.090\nIt's almost there.\n\n276\n00:12:09.090 --> 00:12:10.940\nI wanna make sure it's actually finished,\nso\n\n277\n00:12:10.940 --> 00:12:14.350\nwe can see that I'm truly deleting\nthis after the backup is done.\n\n278\n00:12:14.350 --> 00:12:17.450\nAnd once we delete it out,\nwhere does that go?\n\n279\n00:12:17.450 --> 00:12:20.610\nWell, it can go in your recycle bin,\nit goes in the deleted item repository in\n\n280\n00:12:20.610 --> 00:12:22.680\nthe background,\nit kind of gets hidden, all right.\n\n281\n00:12:22.680 --> 00:12:24.310\nNow, we could recover from there.\n\n282\n00:12:24.310 --> 00:12:27.690\nBut if it's completely gone, a restore\nis gonna bring it back for us, and so\n\n283\n00:12:27.690 --> 00:12:28.990\nthat's the route that we'll take.\n\n284\n00:12:28.990 --> 00:12:30.720\nAll right.\nThis one is just on the cusp of\n\n285\n00:12:30.720 --> 00:12:31.300\nbeing finished.\n\n286\n00:12:31.300 --> 00:12:32.060\nThere we go.\n\n287\n00:12:32.060 --> 00:12:33.240\n100% of backup is done.\n\n288\n00:12:33.240 --> 00:12:34.890\nIt's writing it, and it's finished.\n\n289\n00:12:34.890 --> 00:12:38.450\nSo now I'm gonna jump back\nover here to OWA, and\n\n290\n00:12:38.450 --> 00:12:41.290\nI'm gonna take this sample report,\nand I'm just gonna delete it.\n\n291\n00:12:41.290 --> 00:12:42.800\nWe'll just delete that one out of there.\n\n292\n00:12:42.800 --> 00:12:46.390\nNotice how it's saying do you want to\npermanently delete the selected items?\n\n293\n00:12:46.390 --> 00:12:50.360\nNow, That's a little bit of a misnomer\nwhen it says permanently delete, okay?\n\n294\n00:12:50.360 --> 00:12:53.380\nAs far as you're concerned,\nit's permanently deleted.\n\n295\n00:12:53.380 --> 00:12:57.850\nAnd the reason is on a public folder,\nit has it's own recycle bin.\n\n296\n00:12:57.850 --> 00:12:59.200\nIt's not your recycle bin.\n\n297\n00:12:59.200 --> 00:13:02.720\nSo if I go down here to my deleted items,\nI don't see that.\n\n298\n00:13:02.720 --> 00:13:05.960\nAnd that's because these\nare deleted items from my mailbox.\n\n299\n00:13:05.960 --> 00:13:09.620\nBut up here,\nI deleted it from a public folder.\n\n300\n00:13:09.620 --> 00:13:11.410\nAnd so now it's gone, right?\n\n301\n00:13:11.410 --> 00:13:15.450\nIt's gone and I can't see that deleted\nitems folder, that recycle bin,\n\n302\n00:13:15.450 --> 00:13:17.090\nI don't have permissions to get to it.\n\n303\n00:13:17.090 --> 00:13:23.090\nAll right, now as an administrator It's\npart of the retained items, right?\n\n304\n00:13:23.090 --> 00:13:25.500\nThe recently deleted items, and\nwe can recover it that way.\n\n305\n00:13:25.500 --> 00:13:28.530\nOr if you have an in place hold\nconfigured, it will hold it forever,\n\n306\n00:13:28.530 --> 00:13:30.750\nif you want, so\nit can be held a long time.\n\n307\n00:13:30.750 --> 00:13:32.840\nBut as far as the end user is concerned,\nit's gone.\n\n308\n00:13:32.840 --> 00:13:36.980\nSo they call us the admins and they say,\nhey, I lost this item, all right?\n\n309\n00:13:36.980 --> 00:13:41.100\nWell, you can go back and recover it, so\nthat's going to be our next step here.\n\n310\n00:13:41.100 --> 00:13:44.340\nNow the first step to recovering a public\nfolder is to restore a backup, but\n\n311\n00:13:44.340 --> 00:13:47.940\nwe don't want to recover over\nthe live database, right?\n\n312\n00:13:47.940 --> 00:13:51.385\nIf we recover over the live mailbox\ndatabase we'll loose everything that has\n\n313\n00:13:51.385 --> 00:13:54.550\nhappened since it was initially or\nsince this backup was run.\n\n314\n00:13:54.550 --> 00:13:58.180\nSo I wanna do a restore, but\nI wanna restore to a different location.\n\n315\n00:13:58.180 --> 00:13:59.770\nSo I'm gonna go over here and\nchoose recover.\n\n316\n00:14:00.780 --> 00:14:03.160\nAnd I'm recovering my mailbox server.\n\n317\n00:14:03.160 --> 00:14:04.010\nI'll pick the date.\n\n318\n00:14:04.010 --> 00:14:07.190\nNow, I'll probably have to go\nback a few weeks, a few months,\n\n319\n00:14:07.190 --> 00:14:10.710\nhowever far back it is to get to\nthe backup that has what the user needs.\n\n320\n00:14:11.860 --> 00:14:12.660\nFrom there,\n\n321\n00:14:12.660 --> 00:14:16.765\nI can pick what I'm restoring now on this\none, what we wanna choose is applications.\n\n322\n00:14:16.765 --> 00:14:17.315\nRight?\n\n323\n00:14:17.315 --> 00:14:21.095\nThe Microsoft Exchange service is a little\nmore involved than just some basic files\n\n324\n00:14:21.095 --> 00:14:21.855\nand folders.\n\n325\n00:14:21.855 --> 00:14:24.695\nSo we need to make sure we choose\napplications, and in the list,\n\n326\n00:14:24.695 --> 00:14:26.105\nyou'll see Exchange right there.\n\n327\n00:14:26.105 --> 00:14:28.125\nSo I'm recovering Exchange.\n\n328\n00:14:28.125 --> 00:14:29.605\nAnd then it's gonna ask where\nit's going to restore to.\n\n329\n00:14:29.605 --> 00:14:32.475\nNow I don't want to restore\nit to the original location,\n\n330\n00:14:32.475 --> 00:14:34.575\nbecause I just want to\nget this one mailbox.\n\n331\n00:14:34.575 --> 00:14:36.830\nSo I'm going to recover\nto another location.\n\n332\n00:14:36.830 --> 00:14:38.570\nAnd if we browse the hard drive,\nyou can pick where.\n\n333\n00:14:38.570 --> 00:14:43.360\nI usually create a folder, so\nI'll make a folder here on my C drive.\n\n334\n00:14:43.360 --> 00:14:46.930\nAnd I'll just call this one RecoveryDB,\nright?\n\n335\n00:14:46.930 --> 00:14:50.620\nBecause what we're gonna do is we're gonna\ncreate a recovery database, a secondary\n\n336\n00:14:50.620 --> 00:14:53.460\ndatabase that's running in addition to\nour production, our live one, right?\n\n337\n00:14:53.460 --> 00:14:55.850\nSo this one will kinda\nbe running on the side.\n\n338\n00:14:55.850 --> 00:14:59.520\nSo I'm gonna create a folder\ncalled recovery DB and\n\n339\n00:14:59.520 --> 00:15:01.480\nwe'll go ahead and restore to that, right.\n\n340\n00:15:01.480 --> 00:15:04.670\nSo there showing it there's the mailbox\ndatabase that its bringing back and\n\n341\n00:15:04.670 --> 00:15:05.880\nwe'll hit recover, right.\n\n342\n00:15:05.880 --> 00:15:08.860\nIf you have more then one mailbox database\nit's gonna recover all of them, we'll have\n\n343\n00:15:08.860 --> 00:15:12.049\nto kind of pick and choose, but I've only\ngot one so I know exactly what I want.\n\n344\n00:15:13.930 --> 00:15:16.650\nAll right, now if I browse through my hard\ndrive, one of the things that it does,\n\n345\n00:15:16.650 --> 00:15:22.090\nis it recreates the folder path for\nwhere that mailbox database was stored,\n\n346\n00:15:22.090 --> 00:15:24.140\nand that's gonna make some of\nmy commands really long so\n\n347\n00:15:24.140 --> 00:15:25.230\nI like to shorten this up a bit.\n\n348\n00:15:25.230 --> 00:15:29.180\nI'm gonna browse on my hard drive and\nbrowse into that recovery DB folder,\n\n349\n00:15:29.180 --> 00:15:31.850\nlook at these folders right\nwe've got the GUID right there,\n\n350\n00:15:31.850 --> 00:15:36.530\nC program files Microsoft Exchange Server\nversion 15 mailbox,\n\n351\n00:15:36.530 --> 00:15:39.925\nmailbox database, and\nthen here's the actual data that I want.\n\n352\n00:15:39.925 --> 00:15:42.065\nI mean, it is buried deep.\n\n353\n00:15:42.065 --> 00:15:45.953\nAnd so what I'm gonna do is I'm\njust gonna cut all those files and\n\n354\n00:15:45.953 --> 00:15:49.697\nI'm gonna move all the way back\nup to that recovery DB folder,\n\n355\n00:15:49.697 --> 00:15:52.306\nand I'm just gonna paste them right here.\n\n356\n00:15:52.306 --> 00:15:55.206\nThe files, they don't have to\nmaintain that file path, and so\n\n357\n00:15:55.206 --> 00:15:57.903\nthis is just gonna make my\ncommands a lot shorter, right?\n\n358\n00:15:57.903 --> 00:16:02.080\nBut I can see that mailbox database right\nthere, and now it's in C:/ recovery DB.\n\n359\n00:16:02.080 --> 00:16:03.683\nOr I can deal with it.\n\n360\n00:16:03.683 --> 00:16:04.633\nAll right.\n\n361\n00:16:04.633 --> 00:16:06.923\nNow from here,\nI need to mount this database.\n\n362\n00:16:06.923 --> 00:16:10.530\nI need to bring it online, but I don't\nwant to mess with the production database,\n\n363\n00:16:10.530 --> 00:16:13.062\nso this has to be in addition\nto the production database.\n\n364\n00:16:13.062 --> 00:16:17.259\nSo I'm gonna go and\nfire up my Exchange Management Shell, and\n\n365\n00:16:17.259 --> 00:16:22.584\nin my Exchange Management Shell, if I\nspell it right, I'll be able to go in and\n\n366\n00:16:22.584 --> 00:16:26.550\nmount this and\nbring it online as a recovery database.\n\n367\n00:16:26.550 --> 00:16:27.160\nSo, oops.\n\n368\n00:16:27.160 --> 00:16:30.630\nIf I launch the right utility,\nI'll be able to do that.\n\n369\n00:16:30.630 --> 00:16:34.510\nSo let me get into my Exchange Management\nShell, and we'll get a chance to see that.\n\n370\n00:16:34.510 --> 00:16:38.210\nAnd once I'm in the shell, I'll be able to\nmount that database and bring it online\n\n371\n00:16:38.210 --> 00:16:42.010\nand have it in addition to my production\ndatabase, which is what I really need.\n\n372\n00:16:42.010 --> 00:16:43.990\nSo let me just get in there.\n\n373\n00:16:43.990 --> 00:16:46.670\nAnd the command that we're gonna run is\n\n374\n00:16:46.670 --> 00:16:50.620\nfortunately gonna be a lot shorter because\nwe moved where that database is residing.\n\n375\n00:16:50.620 --> 00:16:54.140\nSo what we're gonna do is we're\ngonna say New mailbox database.\n\n376\n00:16:54.140 --> 00:16:56.780\nAnd normally that would create\na true mailbox database, but\n\n377\n00:16:56.780 --> 00:17:01.290\nI'm gonna say -recovery so\nit that it knows it's not a real database.\n\n378\n00:17:01.290 --> 00:17:03.670\nIt's a backup not to let users in it,\nright?\n\n379\n00:17:03.670 --> 00:17:07.390\nThis will bring it online and let admins\nget into it but not regular users.\n\n380\n00:17:07.390 --> 00:17:08.950\nThen we give it a name.\n\n381\n00:17:08.950 --> 00:17:12.480\nI'll just call mine recovery db,\nso I can remember what it is.\n\n382\n00:17:12.480 --> 00:17:14.490\nAnd then we tell it where\nto find everything.\n\n383\n00:17:14.490 --> 00:17:16.670\nI need to give it the edb file path,\n\n384\n00:17:16.670 --> 00:17:21.300\nwhich is thankfully much shorter\nnow that I moved those files.\n\n385\n00:17:21.300 --> 00:17:24.080\nRight?\nSo c:/recoverydb/ and\n\n386\n00:17:24.080 --> 00:17:28.510\nthen I point to the edb file and\nthen I have to say the Log Folder Path,\n\n387\n00:17:28.510 --> 00:17:31.950\nwhich also is gonna be a lot shorter for\nme.\n\n388\n00:17:31.950 --> 00:17:34.370\nC:/recoveryDB, all right?\n\n389\n00:17:34.370 --> 00:17:36.320\nSo now it knows where to\nlook to find those files and\n\n390\n00:17:36.320 --> 00:17:38.250\nfolders and we're in business there.\n\n391\n00:17:38.250 --> 00:17:41.590\nThe only other thing I need to do is tell\nit the server that I'm restoring this to,\n\n392\n00:17:41.590 --> 00:17:45.080\nwhich for me is lab-mailbox01.\n\n393\n00:17:45.080 --> 00:17:48.320\nThat's gonna take that database,\nmount it, and bring it online.\n\n394\n00:17:48.320 --> 00:17:52.290\nNow, it's warning me here that it\nmight not have had a clean shutdown.\n\n395\n00:17:52.290 --> 00:17:54.970\nWhen a backup happens,\nit's a snapshot backup, and so\n\n396\n00:17:54.970 --> 00:17:58.760\ntechnically the database is running\nat that time, so it's not clean.\n\n397\n00:17:58.760 --> 00:17:59.940\nSo it didn't mount it for me.\n\n398\n00:17:59.940 --> 00:18:02.010\nI'm gonna need to clean it first.\n\n399\n00:18:02.010 --> 00:18:04.020\nWell, cleaning is not very hard.\n\n400\n00:18:04.020 --> 00:18:07.375\nIf we just get into our C:\\Recovery.\n\n401\n00:18:07.375 --> 00:18:09.690\nNot Recovery, RecoveryDB.\n\n402\n00:18:09.690 --> 00:18:11.220\nThat's where I need to be.\n\n403\n00:18:11.220 --> 00:18:12.220\nThere we go.\n\n404\n00:18:12.220 --> 00:18:14.160\nWe have the eseutil.\n\n405\n00:18:14.160 --> 00:18:18.760\nThe eseutil, it's a utility that comes\nalong with Microsoft Exchange 2013.\n\n406\n00:18:18.760 --> 00:18:20.510\nSo it's installed by default, and\n\n407\n00:18:20.510 --> 00:18:24.150\nit lets us perform database\nmaintenance on the files themselves.\n\n408\n00:18:24.150 --> 00:18:26.680\nThen so what we have to do is\nbasically is give it a clean shutdown.\n\n409\n00:18:26.680 --> 00:18:31.520\nWe have to rollback any incomplete changes\nand then we just have to index and\n\n410\n00:18:31.520 --> 00:18:32.540\ndefragment the database.\n\n411\n00:18:32.540 --> 00:18:38.370\nSo we do that with eseutil and the command\nthat we need to run is not that bad.\n\n412\n00:18:38.370 --> 00:18:40.470\nWe do need to know what\nour file prefix is.\n\n413\n00:18:40.470 --> 00:18:43.270\nSee how these files,\nthey all start with E00, right?\n\n414\n00:18:43.270 --> 00:18:46.530\nIf I have three databases,\nthen I'll have E00, E01 and\n\n415\n00:18:46.530 --> 00:18:50.110\nE02 for each of the three databases.\n\n416\n00:18:50.110 --> 00:18:56.680\nI just have one, so I have E00, so\nI'm gonna say, eseutil and then /r E00.\n\n417\n00:18:56.680 --> 00:18:59.740\nSo now it knows the prefix for\nthe files to look for.\n\n418\n00:18:59.740 --> 00:19:02.500\nAnd then I'm gonna tell it\nto clean up that database.\n\n419\n00:19:02.500 --> 00:19:04.670\nAnd that's gonna do\na clean shutdown on it.\n\n420\n00:19:04.670 --> 00:19:07.240\nThe larger the database,\nthe longer that'll take.\n\n421\n00:19:07.240 --> 00:19:09.000\nShouldn't take too terribly long.\n\n422\n00:19:09.000 --> 00:19:11.710\nBut now I should be able to mount\nthis thing, so let me go and\n\n423\n00:19:11.710 --> 00:19:15.970\nmount the database, RecoveryDB And\nthat should bring it online.\n\n424\n00:19:15.970 --> 00:19:19.750\nOnce it's online, as an admin, I can now\nreach into that database and pick and\n\n425\n00:19:19.750 --> 00:19:20.990\nchoose what I want.\n\n426\n00:19:20.990 --> 00:19:23.460\nI can restore the whole thing,\nif we wanna go crazy.\n\n427\n00:19:23.460 --> 00:19:26.780\nOr I can restore individual mailboxes.\n\n428\n00:19:26.780 --> 00:19:27.550\nAnd that's what I want.\n\n429\n00:19:27.550 --> 00:19:31.830\nI wanna restore the public folder\nmailbox to get that deleted data back.\n\n430\n00:19:32.970 --> 00:19:37.040\nSo I'm gonna do that by doing\na new mailbox restore request.\n\n431\n00:19:37.040 --> 00:19:40.080\nBut before I do that, I need to know\nthe name of the public folder mailbox.\n\n432\n00:19:40.080 --> 00:19:41.080\nAnd if you don't know it,\n\n433\n00:19:41.080 --> 00:19:47.090\nyou can do like a get-mailboxstatistics\nwhich would have been faster for\n\n434\n00:19:47.090 --> 00:19:50.355\nme to type than to do auto complete but\neventually we'll get to it there.\n\n435\n00:19:50.355 --> 00:19:54.550\nGet-mailboxstatistics and\nspecify the database name, so\n\n436\n00:19:54.550 --> 00:19:56.780\nthe database name would be the recoveryDB.\n\n437\n00:19:56.780 --> 00:19:59.480\nThat's useful if the public\nfolder's been deleted.\n\n438\n00:19:59.480 --> 00:20:01.480\nIn my case,\nthe public folder hasn't been deleted.\n\n439\n00:20:01.480 --> 00:20:04.500\nI can just go back into the Exchange\ncontrol panel or the Exchange admin center\n\n440\n00:20:04.500 --> 00:20:07.880\nand find it there, but if I didn't\nknow it I could pull it here and\n\n441\n00:20:07.880 --> 00:20:10.270\nwe can find, right there, public folders.\n\n442\n00:20:10.270 --> 00:20:12.510\nThat's the mailbox that I want to recover.\n\n443\n00:20:12.510 --> 00:20:13.290\nAll right.\n\n444\n00:20:13.290 --> 00:20:18.840\nAnd then from here,\nI can do a New-MailboxRestoreRequest.\n\n445\n00:20:18.840 --> 00:20:23.900\nAnd when we go to restore it, we basically\ntell it to get data from the backup file,\n\n446\n00:20:23.900 --> 00:20:26.740\nfrom the recovery DB, and\nput it in the live database.\n\n447\n00:20:26.740 --> 00:20:29.800\nAnd then we just have to\nmap it to a mailbox, so\n\n448\n00:20:29.800 --> 00:20:33.990\nI'll tell it that the source\ndatabase is the recovery DB, right?\n\n449\n00:20:33.990 --> 00:20:36.360\nThat is where my data is coming from.\n\n450\n00:20:36.360 --> 00:20:40.720\nAnd then I tell it my source\nstore mailbox, right?\n\n451\n00:20:40.720 --> 00:20:43.210\nSo the mailbox in the backup,\nwhat is it called?\n\n452\n00:20:43.210 --> 00:20:45.930\nWell, its called public folders, right?\n\n453\n00:20:45.930 --> 00:20:47.320\nThat's what I called it.\n\n454\n00:20:47.320 --> 00:20:52.840\nAnd then we tell it the target mailbox,\nwhoops, sorry, mailbox.\n\n455\n00:20:52.840 --> 00:20:53.600\nThere we go.\n\n456\n00:20:53.600 --> 00:20:56.340\nAnd my target mailbox is also called\nPublic Folders because it hasn't\n\n457\n00:20:56.340 --> 00:20:57.590\nbeen renamed.\n\n458\n00:20:57.590 --> 00:21:00.840\nBut maybe I don't,\nmaybe I want single item recovery, right?\n\n459\n00:21:00.840 --> 00:21:02.810\nI don't want to restore the whole thing,\nI just want a single item but\n\n460\n00:21:02.810 --> 00:21:04.570\nI don't have third party software.\n\n461\n00:21:04.570 --> 00:21:08.190\nI could create another mailbox, and\nrestore this to that alternate mailbox.\n\n462\n00:21:08.190 --> 00:21:10.450\nAnd then as an admin,\nI could open that other mailbox and\n\n463\n00:21:10.450 --> 00:21:12.250\ngrab that single item out of it if I want,\nall right?\n\n464\n00:21:12.250 --> 00:21:14.850\nThat's how we can kind of cheat and\ndo single item recovery.\n\n465\n00:21:14.850 --> 00:21:15.710\nBut in my case,\n\n466\n00:21:15.710 --> 00:21:18.570\nit's just gonna be restored right\nback to the same mailbox name.\n\n467\n00:21:18.570 --> 00:21:19.750\nSo I need to punch that in.\n\n468\n00:21:19.750 --> 00:21:22.890\nNow, technically this is all I need and\nI should be able to press enter,\n\n469\n00:21:22.890 --> 00:21:27.140\nbut there's a little bug in Exchange 2013\nright now that hasn't been fixed yet, so\n\n470\n00:21:27.140 --> 00:21:30.460\nI need to tell it to skip over\nthe storage provider configuration.\n\n471\n00:21:30.460 --> 00:21:34.750\nNow, by the time you watch this, the bug\nmight be fixed, and if it is, you can\n\n472\n00:21:34.750 --> 00:21:38.610\nleave this off, or leave this command in,\nit'll be fine, it doesn't hurt anything,\n\n473\n00:21:38.610 --> 00:21:41.395\nthe storage configuration doesn't really\nhave a whole lot of bearing here.\n\n474\n00:21:41.395 --> 00:21:44.587\nSo I'm just gonna tell it to\nskip a little bit of data here.\n\n475\n00:21:44.587 --> 00:21:46.845\nAll right, at this point there is one\nlittle thing that we might need to add to\n\n476\n00:21:46.845 --> 00:21:50.495\nour command line and that's because\npublic folders are very old technology,\n\n477\n00:21:50.495 --> 00:21:53.805\nthey've been around and so there might\nbe a value called a legacy DN or\n\n478\n00:21:53.805 --> 00:21:57.655\ndistinguished name attached to it, and I\nhave to allow for that DN to be present or\n\n479\n00:21:57.655 --> 00:22:01.185\nnot present because on the new server it\nprobably isn't present, so I'm gonna say,\n\n480\n00:22:01.185 --> 00:22:06.620\n-Allowlegacydnmismatch.\n\n481\n00:22:06.620 --> 00:22:07.220\nOkay.\n\n482\n00:22:07.220 --> 00:22:10.760\nAnd what that says is if on this\nnew server, if it is a new server,\n\n483\n00:22:10.760 --> 00:22:13.730\nif the DN is missing, the legacy DN,\ndon't worry about it.\n\n484\n00:22:13.730 --> 00:22:15.730\nIf the legacy DN doesn't match,\ndon't worry about it,\n\n485\n00:22:15.730 --> 00:22:17.600\nlet's just get this restored.\n\n486\n00:22:17.600 --> 00:22:20.280\nYou don't really know because it\nall comes down to history, right.\n\n487\n00:22:20.280 --> 00:22:21.700\nHow old is this public folder,\n\n488\n00:22:21.700 --> 00:22:23.970\nwas it migrated from previous\nversions of Exchange.\n\n489\n00:22:23.970 --> 00:22:27.600\nThis is just gonna make sure that it goes\nnice and smooth to get that connected.\n\n490\n00:22:27.600 --> 00:22:33.410\nAnd then the very last thing,\nI need to say include Folders.\n\n491\n00:22:33.410 --> 00:22:34.820\nOops, I forgot my dash there.\n\n492\n00:22:34.820 --> 00:22:38.060\nI need to say -IncludeFolders.\n\n493\n00:22:38.060 --> 00:22:42.450\nAnd here's where I can specify\nthe individual folders inside that I\n\n494\n00:22:42.450 --> 00:22:43.430\nwanna restore.\n\n495\n00:22:43.430 --> 00:22:46.340\nIf I leave this off,\nit's gonna restore the whole thing.\n\n496\n00:22:46.340 --> 00:22:48.680\nWell I've got marketing and sales.\n\n497\n00:22:48.680 --> 00:22:49.870\nThey're not having a problem.\n\n498\n00:22:49.870 --> 00:22:51.500\nIt's the IT people.\n\n499\n00:22:51.500 --> 00:22:55.090\nThey're the ones calling and\ntelling me hey, you need to restore IT.\n\n500\n00:22:55.090 --> 00:23:00.840\nAnd so I need to give it the path for\nthat folder, which would be slash IT.\n\n501\n00:23:00.840 --> 00:23:03.470\nSo that's what I want to restore back and\nget in place.\n\n502\n00:23:03.470 --> 00:23:06.820\nSo the new mailbox restore request,\nit's getting the data from the recovery\n\n503\n00:23:06.820 --> 00:23:11.390\ndatabase, from the public folders mailbox,\nit's restoring it to the public folder's\n\n504\n00:23:11.390 --> 00:23:15.980\nmailbox on the production database, and\nit's getting that IT folder, right?\n\n505\n00:23:15.980 --> 00:23:18.020\nThat's what it's gonna grab and\nit's gonna restore.\n\n506\n00:23:18.020 --> 00:23:20.790\nAll right, well it looks like I\ngot an error and if we look at it.\n\n507\n00:23:20.790 --> 00:23:21.930\nOh, I see what's going on here.\n\n508\n00:23:21.930 --> 00:23:26.540\nWe've got folder path \\ IT contains\nan invalid escaped character.\n\n509\n00:23:26.540 --> 00:23:30.440\nI put the \\ in because that's\nthe path to the folder.\n\n510\n00:23:30.440 --> 00:23:31.720\nBut I don't need the backslash.\n\n511\n00:23:31.720 --> 00:23:33.300\nHere it's treating it\nas an escape character.\n\n512\n00:23:33.300 --> 00:23:35.930\nSo if I just rerun that command and\nleave that slash off,\n\n513\n00:23:35.930 --> 00:23:40.580\nI'm including the folder IT and I can use\ncommas to add other folders in there, and\n\n514\n00:23:40.580 --> 00:23:44.530\nso if I run that, there we go, it's gonna\ncreate that mailbox restore request.\n\n515\n00:23:44.530 --> 00:23:46.820\nAnd I can see that it's cued and\n\n516\n00:23:46.820 --> 00:23:52.000\nif I start to monitor to that I\ncan run get-mailboxrestorerequest.\n\n517\n00:23:52.000 --> 00:23:54.020\nAnd we can run that and\nwatch to see when it finishes.\n\n518\n00:23:54.020 --> 00:23:57.730\nThe larger the public folder is, the\nlonger it's gonna take to do that restore.\n\n519\n00:23:57.730 --> 00:24:02.040\nHere I see this one has run several,\nrun pretty quick, and completed already.\n\n520\n00:24:02.040 --> 00:24:05.570\nBut we might have to run this several\ntimes to actually see whether or\n\n521\n00:24:05.570 --> 00:24:07.700\nnot it has finished, all right?\n\n522\n00:24:07.700 --> 00:24:10.230\nBut once it's finished, that deleted mail?\n\n523\n00:24:10.230 --> 00:24:11.830\nNo, that should be back.\n\n524\n00:24:11.830 --> 00:24:15.260\nNow, in my own experience, I've seen where\npublic folders can take a little while\n\n525\n00:24:15.260 --> 00:24:18.150\nto show up though for the end user,\nespecially if you have copies.\n\n526\n00:24:18.150 --> 00:24:21.840\nBecause we just restored it to\nthe writable public folder.\n\n527\n00:24:21.840 --> 00:24:24.770\nBut if you've got copies of it,\nit's now gonna replicate and\n\n528\n00:24:24.770 --> 00:24:27.000\nit uses active directory application for\nthat.\n\n529\n00:24:27.000 --> 00:24:29.170\nAnd so\nit could happen in the next 15 minutes or\n\n530\n00:24:29.170 --> 00:24:32.060\nit could take up to 90 minutes to\nactually make it to the other side.\n\n531\n00:24:32.060 --> 00:24:33.980\nSo it can take a little while.\n\n532\n00:24:33.980 --> 00:24:35.600\nIn my case,\nI've only got one server though, so\n\n533\n00:24:35.600 --> 00:24:37.160\nit should show up pretty quickly.\n\n534\n00:24:37.160 --> 00:24:40.700\nLet me jump back over here and see if I,\n\n535\n00:24:40.700 --> 00:24:44.190\ndo like a forced refresh on this,\nif I can get it.\n\n536\n00:24:44.190 --> 00:24:47.190\nOutlook Web App also takes a little\nwhile to pick these things up.\n\n537\n00:24:47.190 --> 00:24:48.880\nBut if we take a look,\nthere it is, sure enough.\n\n538\n00:24:48.880 --> 00:24:52.010\nThere's my sample report back again,\nrestored from the backup, and\n\n539\n00:24:52.010 --> 00:24:52.810\nthe new stuff, right?\n\n540\n00:24:52.810 --> 00:24:56.490\nThis get stuff done,\nI did that one after I took the backup.\n\n541\n00:24:56.490 --> 00:24:57.800\nIt doesn't wipe out new stuff.\n\n542\n00:24:57.800 --> 00:25:01.505\nIt just brings back the old stuff, and\nnow I've got my public folder back and\n\n543\n00:25:01.505 --> 00:25:03.155\nI'm in business, okay.\n\n544\n00:25:03.155 --> 00:25:05.975\nSo the process is really, really,\n\n545\n00:25:05.975 --> 00:25:09.675\nreally similar to restoring a single user\nmailbox, just a little bit different.\n\n546\n00:25:09.675 --> 00:25:12.395\nWe had the legacy DN stuff\nwe had to worry about, and\n\n547\n00:25:12.395 --> 00:25:15.770\nwe had to specify the individual\nfolders we wanted to restore.\n\n548\n00:25:15.770 --> 00:25:17.620\nInstead of restoring the entire mailbox,\n\n549\n00:25:17.620 --> 00:25:19.060\nalthough we could've\ndone the whole mailbox.\n\n550\n00:25:20.310 --> 00:25:23.460\nAll right, well that pretty much\nwraps it up for this episode.\n\n551\n00:25:23.460 --> 00:25:27.350\nSo, in this episode we got a chance to see\nhow to back-up our public folder mailbox,\n\n552\n00:25:27.350 --> 00:25:28.710\nwhich really wasn't a big deal.\n\n553\n00:25:28.710 --> 00:25:30.790\nWe saw how to restore the mailbox,\n\n554\n00:25:30.790 --> 00:25:34.690\nget it mounted as a recovery database,\npick the data our of there and\n\n555\n00:25:34.690 --> 00:25:38.660\nmove it into our production database, and\nget it back and available for our users.\n\n556\n00:25:38.660 --> 00:25:42.780\nAnd the best part is this whole process\nfrom backup to restore was done,\n\n557\n00:25:42.780 --> 00:25:44.220\nwhile users can be in the database.\n\n558\n00:25:44.220 --> 00:25:46.990\nWe never actually had to kick\npeople out of the public folder.\n\n559\n00:25:46.990 --> 00:25:49.650\nThey could be in there working while\nwe were doing the whole process, so\n\n560\n00:25:49.650 --> 00:25:50.712\nit's really not that bad.\n\n561\n00:25:50.712 --> 00:25:53.838\nThe PowerShell command's a little lengthy,\nyet, that's kind of the tough one to\n\n562\n00:25:53.838 --> 00:25:55.998\nremember but\nthe rest of it's pretty straight forward.\n\n563\n00:25:55.998 --> 00:25:59.506\nSo, all right, well that's a good spot for\nus to wrap this one up, so\n\n564\n00:25:59.506 --> 00:26:03.498\nI hope you guys enjoyed the episode,\nsigning off for ITProTV I'm Don Pizet and\n\n565\n00:26:03.498 --> 00:26:04.787\nI'll see you next time.\n\n566\n00:26:04.787 --> 00:26:11.090\n[NOISE]\n\n",
          "vimeoId": "136955391"
        },
        {
          "description": "In this episode, Don demonstrates how to use Microsoft Exchange Recovery Databases to restore a single user's mailbox. While complex, the process is preferable to a full restore as it does not disturb other user's mailboxes.",
          "length": "1069",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-5-single_mailbox_recovery-081915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-5-single_mailbox_recovery-081915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/microsoft-exchange70341/microsoft-exchange70341-7-5-single_mailbox_recovery-081915-1-sm.jpg",
          "title": "Single Mailbox Recovery",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.086 --> 00:00:13.570\nAll right good morning,\ngood afternoon, and good evening.\n\n3\n00:00:13.570 --> 00:00:15.800\nAnd welcome back to another\nepisode of ITProTV.\n\n4\n00:00:15.800 --> 00:00:17.600\nI'm your host Don Pezet.\n\n5\n00:00:17.600 --> 00:00:20.490\nBack again with another episode\nof Microsoft Exchange 2013.\n\n6\n00:00:20.490 --> 00:00:26.110\nIn this episode, we're gonna take a look\nat restoring a single user's mailbox.\n\n7\n00:00:26.110 --> 00:00:30.500\nNow in other episodes we've talked about\nrecovering our entire database server, but\n\n8\n00:00:30.500 --> 00:00:32.630\nsometimes you just need one mailbox,\nright?\n\n9\n00:00:32.630 --> 00:00:35.880\nFor example, a user might have\ndeleted a bunch of their stuff and\n\n10\n00:00:35.880 --> 00:00:36.870\nthey want it back.\n\n11\n00:00:36.870 --> 00:00:39.580\nWell, you know, if they delete something,\nit goes to the recycle bin.\n\n12\n00:00:39.580 --> 00:00:41.310\nMaybe they emptied the recycle bin.\n\n13\n00:00:41.310 --> 00:00:45.370\nWell, there's deleted item retention\nthat holds it for 30 more days, but\n\n14\n00:00:45.370 --> 00:00:48.640\nmaybe they need something from two months\nago or three months, or maybe a year ago,\n\n15\n00:00:48.640 --> 00:00:50.620\nand it's been gone a long time.\n\n16\n00:00:50.620 --> 00:00:52.950\nWell, it's beyond their\nability to restore it.\n\n17\n00:00:52.950 --> 00:00:54.000\nAnd now it's up to us.\n\n18\n00:00:54.000 --> 00:00:58.120\nWe can go to our old back up tapes and\nwe can restore that user's mailbox.\n\n19\n00:00:58.120 --> 00:01:00.080\nJust that one user.\n\n20\n00:01:00.080 --> 00:01:03.590\nNow we can't restore individual email\nitems, not without third party software.\n\n21\n00:01:03.590 --> 00:01:05.110\nBut we can restore their mailbox.\n\n22\n00:01:05.110 --> 00:01:08.190\nIn other words, we could take\ntheir mailbox from a year ago,\n\n23\n00:01:08.190 --> 00:01:12.750\nmerge it into their Live mailbox and now\nthey'll have the missing data back again.\n\n24\n00:01:12.750 --> 00:01:15.730\nThey'll also have anything else they\ndeleted from a year ago back again too, so\n\n25\n00:01:15.730 --> 00:01:18.580\nit's gonna be a little bit of work on\ntheir part, but that's their own problem,\n\n26\n00:01:18.580 --> 00:01:20.670\nbecause they should have deleted\nstuff in the first place.\n\n27\n00:01:20.670 --> 00:01:21.880\nBut fortunately we can get to it, right?\n\n28\n00:01:21.880 --> 00:01:24.440\nAnother, let me give you\na more realistic example.\n\n29\n00:01:24.440 --> 00:01:26.290\nMaybe you terminated an employee.\n\n30\n00:01:26.290 --> 00:01:30.390\nThey got fired and she deleted their\naccount, deleted their mailbox.\n\n31\n00:01:30.390 --> 00:01:34.330\nWell, three months, six months later,\nyour legal department comes and says, ooh,\n\n32\n00:01:34.330 --> 00:01:35.210\nwe're under litigation.\n\n33\n00:01:35.210 --> 00:01:36.890\nWe need that user's mailbox, right.\n\n34\n00:01:36.890 --> 00:01:37.900\nWe need to recover the mailbox.\n\n35\n00:01:37.900 --> 00:01:39.920\nWell, it's gone from the server.\n\n36\n00:01:39.920 --> 00:01:43.060\nThe mailbox recovery,\nthe default period for it's 30 days,\n\n37\n00:01:43.060 --> 00:01:45.140\nunless you have like\nan in place hold on it.\n\n38\n00:01:45.140 --> 00:01:47.590\nThat data's gone, but\nyou go to your back up tapes.\n\n39\n00:01:47.590 --> 00:01:50.100\nYou can go and you can get it and\nyou can restore that data.\n\n40\n00:01:50.100 --> 00:01:53.540\nSo we can always get it bring it back and\nrestore that users mailbox.\n\n41\n00:01:53.540 --> 00:01:55.561\nBut we don't want to mess\nwith everybody on our server,\n\n42\n00:01:55.561 --> 00:01:58.020\nwe don't want to restore\nthe whole mailbox database.\n\n43\n00:01:58.020 --> 00:02:00.680\nWe just want that one mailbox, all right.\n\n44\n00:02:00.680 --> 00:02:03.850\nFortunately it's not that hard and\nif you've watched our dial tone recovery\n\n45\n00:02:03.850 --> 00:02:07.760\nepisode it's kind of similar to the dial\ntone recovery, except a little bit easier.\n\n46\n00:02:07.760 --> 00:02:11.070\nSo let's take a look at the process,\nand we'll see how to restore a user.\n\n47\n00:02:11.070 --> 00:02:15.345\nAll right, I'm gonna take a user like,\nI've got Jane Smith here.\n\n48\n00:02:15.345 --> 00:02:19.220\nJane Smith; she's an email user in\nmy system, and she's got a mailbox,\n\n49\n00:02:19.220 --> 00:02:20.610\nI'm actually logged into her OWA here.\n\n50\n00:02:20.610 --> 00:02:24.240\nShe's got one email here from the\nadministrator, it was sent back on Sunday.\n\n51\n00:02:24.240 --> 00:02:26.540\nAnd so she's got an email, very exciting.\n\n52\n00:02:26.540 --> 00:02:27.260\nRight?\n\n53\n00:02:27.260 --> 00:02:30.740\nWell maybe she's been terminated and\nI removed her mailbox, or\n\n54\n00:02:30.740 --> 00:02:32.890\nmaybe she just deleted some stuff.\n\n55\n00:02:32.890 --> 00:02:36.200\nIf I removed her mailbox, step one,\nI need to recreate her mailbox.\n\n56\n00:02:36.200 --> 00:02:40.170\nI can create a new active directory\nuser account and add a mailbox to it.\n\n57\n00:02:40.170 --> 00:02:42.370\nThe important part is that the mailbox\nneeds to have the same name,\n\n58\n00:02:42.370 --> 00:02:44.730\nand the same email\naddress as it had before.\n\n59\n00:02:44.730 --> 00:02:49.010\nSo, if she was Jane Smith, and\nher email was jsmith@itvprotv.net,\n\n60\n00:02:49.010 --> 00:02:52.650\nI need to create a new account called\nJane Smith and jsmith@itprotv.net.\n\n61\n00:02:52.650 --> 00:02:56.290\nAnd as long as the name is the same,\nI can restore her data to it.\n\n62\n00:02:56.290 --> 00:02:57.140\nEven if the name's different,\n\n63\n00:02:57.140 --> 00:03:00.740\nyou can actually get around that, but\nby default it wants those to be the same.\n\n64\n00:03:00.740 --> 00:03:02.070\nSo I'm gonna stick with that.\n\n65\n00:03:02.070 --> 00:03:05.420\nNow if they just had some deleted items,\nthe mailbox already exists.\n\n66\n00:03:05.420 --> 00:03:08.650\nI'm just gonna be merging into it,\nso there's no big deal there, right?\n\n67\n00:03:08.650 --> 00:03:13.340\nSo maybe she comes in and she deletes an\nemail, like I'll delete this admin email.\n\n68\n00:03:13.340 --> 00:03:16.350\nAnd I can go to her deleted items and\nthere it still is, right.\n\n69\n00:03:16.350 --> 00:03:17.850\nShe can recover that.\n\n70\n00:03:17.850 --> 00:03:21.516\nAnd then if she goes in here and\nempties that out, now it's gone, right,\n\n71\n00:03:21.516 --> 00:03:23.220\nit's gone forever.\n\n72\n00:03:23.220 --> 00:03:24.220\nWell not really.\n\n73\n00:03:24.220 --> 00:03:25.750\nExchange is gonna keep it.\n\n74\n00:03:25.750 --> 00:03:29.790\nAnd assuming I'm at like a default install\nof Exchange, it's gonna hold that for\n\n75\n00:03:29.790 --> 00:03:30.560\n30 days.\n\n76\n00:03:30.560 --> 00:03:33.970\nSo even 30 days from now she'll\nbe able to recover that.\n\n77\n00:03:33.970 --> 00:03:38.050\nAnd if you right click on a mailbox,\nsee how I can go to recover deleted items?\n\n78\n00:03:38.050 --> 00:03:40.207\nAnd when we do that, oop,\nit wants to do a pop up so\n\n79\n00:03:40.207 --> 00:03:42.320\nI gotta approve the pop up real quick.\n\n80\n00:03:42.320 --> 00:03:45.910\nBut you can go to deleted items, you can\nright click and do recover deleted items\n\n81\n00:03:45.910 --> 00:03:49.450\nand in here, should be able to see,\nthere's the email still there.\n\n82\n00:03:49.450 --> 00:03:51.280\nRight, so\nyou really do have a big window of time.\n\n83\n00:03:51.280 --> 00:03:53.670\nThis is not something we're\ngonna be doing right away.\n\n84\n00:03:53.670 --> 00:03:57.250\nBut, I do have a nice little purge\noption down here at the bottom, and\n\n85\n00:03:57.250 --> 00:03:58.490\nI'm gonna purge this out.\n\n86\n00:03:58.490 --> 00:04:03.370\nNow if I purge it in the default\nconfiguration of Exchange,\n\n87\n00:04:03.370 --> 00:04:04.480\nthat's gone now, it's gone.\n\n88\n00:04:04.480 --> 00:04:07.690\nIf I have an in place hold or something\nlike that configured it's actually\n\n89\n00:04:07.690 --> 00:04:10.880\nbeing retained on the back end as\npart of our records management, but\n\n90\n00:04:10.880 --> 00:04:13.460\nshe wouldn't know that, she would\nthink that it's purged, all right.\n\n91\n00:04:13.460 --> 00:04:16.590\nBut that email's gone, and\nit's gone, and she can't get to it.\n\n92\n00:04:16.590 --> 00:04:19.120\nAnd then if she says, oh no,\nI really needed that email!\n\n93\n00:04:19.120 --> 00:04:20.800\nLet me call the help desk.\n\n94\n00:04:20.800 --> 00:04:23.430\nAll right she calls the help desk and\nthey send a ticket up to you as the email\n\n95\n00:04:23.430 --> 00:04:27.650\nadmin, and you now need to recover her\nmailbox to bring that back, all right.\n\n96\n00:04:27.650 --> 00:04:29.920\nNow we can't pick and\nchoose one email, so we just ask her,\n\n97\n00:04:29.920 --> 00:04:31.760\nhey, when did you delete it?\n\n98\n00:04:31.760 --> 00:04:34.220\nAnd she says, well,\nI deleted it last June.\n\n99\n00:04:34.220 --> 00:04:37.930\nSo we need to go and find a backup\nfrom last June, from right before,\n\n100\n00:04:37.930 --> 00:04:40.780\nas close as we can get to where\nshe deleted it, all right?\n\n101\n00:04:40.780 --> 00:04:44.150\nAnd then we can restore the backup,\nand merge that in.\n\n102\n00:04:44.150 --> 00:04:45.660\nNow to restore the backup,\n\n103\n00:04:45.660 --> 00:04:49.410\nI need to make sure that I don't\nmess with my current users, right.\n\n104\n00:04:49.410 --> 00:04:51.360\nI don't want to mess with\nanybody else's database, so\n\n105\n00:04:51.360 --> 00:04:54.050\nwe're gonna have to be a little sensitive\nto that as we go through and restore it.\n\n106\n00:04:54.050 --> 00:04:55.430\nLet me show you the process.\n\n107\n00:04:55.430 --> 00:04:57.630\nFirst off I'm gonna fire up\nmy Windows Server backup and\n\n108\n00:04:57.630 --> 00:04:59.510\nI'm gonna restore a backup that I've got.\n\n109\n00:04:59.510 --> 00:05:03.100\nSo I'll go into my server manager, I'll\ngo to tools, and Windows Server backup.\n\n110\n00:05:03.100 --> 00:05:05.150\nIf you use third party software,\nyou'd go to it.\n\n111\n00:05:05.150 --> 00:05:07.060\nI'm using Windows Server Backup.\n\n112\n00:05:07.060 --> 00:05:09.449\nAnd I need to find a backup,\nso I'll do recover.\n\n113\n00:05:10.850 --> 00:05:14.160\nAnd when I go to restore,\nit's gonna ask me when I want to restore.\n\n114\n00:05:14.160 --> 00:05:16.200\nAnd so I'll go back and\npick as close to the date,\n\n115\n00:05:16.200 --> 00:05:18.750\nbut prior to her deleting her content.\n\n116\n00:05:18.750 --> 00:05:21.090\nOr prior to us deleting that mailbox,\nright.\n\n117\n00:05:21.090 --> 00:05:22.680\nI just need to go back\nto that point in time.\n\n118\n00:05:24.260 --> 00:05:27.560\nThen, I'm gonna choose to\nrestore an application, and\n\n119\n00:05:27.560 --> 00:05:31.290\nI'm gonna be restoring Exchange, and\nthis is where it gets important.\n\n120\n00:05:31.290 --> 00:05:31.850\nAlright?\n\n121\n00:05:31.850 --> 00:05:35.220\nIf I choose to recover to the original\nlocation, it's going to restore\n\n122\n00:05:35.220 --> 00:05:37.960\neverybody's mailbox and\nI'm going to have a lot of angry users.\n\n123\n00:05:37.960 --> 00:05:38.910\nI don't want that.\n\n124\n00:05:38.910 --> 00:05:39.610\nOkay?\n\n125\n00:05:39.610 --> 00:05:41.600\nI want to restore to another location.\n\n126\n00:05:42.800 --> 00:05:46.220\nAnd so I'll browse and I'm going to\ncreate a new folder for this, so\n\n127\n00:05:46.220 --> 00:05:51.030\nI'll browse to my C drive, and\nI'll create a folder called Jane Stinks,\n\n128\n00:05:51.030 --> 00:05:54.270\ncause she's making me\nhave to do this work.\n\n129\n00:05:54.270 --> 00:05:57.840\nAlright, so I'm going to restore there,\nand so its going to restore that database,\n\n130\n00:05:57.840 --> 00:05:59.400\nand its going to drop it\nright in that folder.\n\n131\n00:05:59.400 --> 00:06:01.080\nSo we'll let it run, and\nits going to bring me back, and\n\n132\n00:06:01.080 --> 00:06:01.900\nthis will happen pretty quick.\n\n133\n00:06:01.900 --> 00:06:04.660\nNow the larger your database is,\nthe larger this restore will take.\n\n134\n00:06:04.660 --> 00:06:08.000\nUnfortunately you have\nrestore the whole database,\n\n135\n00:06:08.000 --> 00:06:10.240\neven though I just need Jane's mailbox.\n\n136\n00:06:10.240 --> 00:06:13.940\nI need the whole database so\nI can then pick the data out of it.\n\n137\n00:06:13.940 --> 00:06:18.210\nSo if your database is a terabyte in size,\nI'm gonna need another terabyte to be able\n\n138\n00:06:18.210 --> 00:06:20.580\nto restore this too, because now\nI've got two copies of the database,\n\n139\n00:06:20.580 --> 00:06:23.310\nthe live one and this recovery one.\n\n140\n00:06:23.310 --> 00:06:25.510\nFortunately, performance is not a concern,\nso\n\n141\n00:06:25.510 --> 00:06:29.080\nyou can stick a USB hard drive on your\nserver and use that as temporary storage.\n\n142\n00:06:29.080 --> 00:06:31.921\nCuz this is just temporary,\nwhile we get Jane's mailbox out of it.\n\n143\n00:06:31.921 --> 00:06:34.340\nOkay.\n\n144\n00:06:34.340 --> 00:06:37.720\nAnd I can browse on my hard drive and\nfind that folder.\n\n145\n00:06:37.720 --> 00:06:41.290\nSo I'm gonna browse into my JaneStinks\nfolder, and you'll see the GUID and\n\n146\n00:06:41.290 --> 00:06:42.980\nthis all this other folder stuff.\n\n147\n00:06:42.980 --> 00:06:47.500\nNow when it restores it, it restores\nit with the full database path and\n\n148\n00:06:47.500 --> 00:06:50.010\nit's really, really long, that path.\n\n149\n00:06:50.010 --> 00:06:52.630\nAnd so it's gonna make our commands\nthat we're about to run in PowerShell\n\n150\n00:06:52.630 --> 00:06:53.570\nreally long.\n\n151\n00:06:53.570 --> 00:06:54.700\nAnd I hate that.\n\n152\n00:06:54.700 --> 00:06:59.120\nSo one of the things I usually do is take\nthese files and just do a quick cut and\n\n153\n00:06:59.120 --> 00:07:03.000\npaste to move them into a path that's\na little bit easier for me to cope with.\n\n154\n00:07:03.000 --> 00:07:05.807\nAnd so I'm just gonna put them\nright into the JaneStink's folder.\n\n155\n00:07:07.120 --> 00:07:08.960\nSo it'll be easier for\nme to get at, all right.\n\n156\n00:07:08.960 --> 00:07:11.890\nThis is not an online database yet, so\nI can move these files wherever I want.\n\n157\n00:07:11.890 --> 00:07:15.150\nAnd remember I said you can put them\non a USB stick or something like that.\n\n158\n00:07:15.150 --> 00:07:17.010\nIf you know the database will fit on that.\n\n159\n00:07:17.010 --> 00:07:19.080\nSo I can see that it fits right here.\n\n160\n00:07:19.080 --> 00:07:22.280\nAnd I've got that database\nsitting ready for me, all right.\n\n161\n00:07:22.280 --> 00:07:25.930\nNow I need to jump to my PowerShell so\nI can start to do a little work.\n\n162\n00:07:25.930 --> 00:07:27.140\nAnd not just the regular PowerShell,\n\n163\n00:07:27.140 --> 00:07:29.450\nI need the Exchange Management shell,\nthis guy.\n\n164\n00:07:29.450 --> 00:07:32.270\nBecause that's the one that's gonna\nhave the Exchange commandlets attached\n\n165\n00:07:32.270 --> 00:07:33.090\nto it that I'm gonna need.\n\n166\n00:07:34.530 --> 00:07:35.690\nAll right.\n\n167\n00:07:35.690 --> 00:07:38.780\nFrom here,\nI need to create a recovery database.\n\n168\n00:07:38.780 --> 00:07:41.280\nI don't wanna bring that database\nonline and replace my existing one.\n\n169\n00:07:41.280 --> 00:07:42.930\nI need it to run in addition to it.\n\n170\n00:07:42.930 --> 00:07:45.640\nSo that's called creating a recovery\ndatabase, so I'll come in and\n\n171\n00:07:45.640 --> 00:07:51.210\njust say new-mailboxdatabase-recovery so\n\n172\n00:07:51.210 --> 00:07:54.640\nit knows that it's not a live database,\nit's a recovery one.\n\n173\n00:07:54.640 --> 00:07:56.810\nAnd then I needed to tell it\nwhere to find that database, and\n\n174\n00:07:56.810 --> 00:07:59.130\nhere's where the paths\ncan get really messy.\n\n175\n00:07:59.130 --> 00:08:03.230\nThe edb file path for me, fortunately is\njust gonna be in that JaneStinks folder,\n\n176\n00:08:04.430 --> 00:08:07.890\nand so I can point right to it instead\nof having to do that huge long path.\n\n177\n00:08:07.890 --> 00:08:10.790\nSame thing for the log folder path.\n\n178\n00:08:10.790 --> 00:08:12.530\nWhich is now much easier for me.\n\n179\n00:08:12.530 --> 00:08:13.240\nAll right.\n\n180\n00:08:13.240 --> 00:08:17.184\nAnd then last I need to tell it\nwhat server I'm attaching this to,\n\n181\n00:08:17.184 --> 00:08:21.010\nand I'm attaching it to\nmy lab-mailbox01 server.\n\n182\n00:08:21.010 --> 00:08:21.680\nAll right.\n\n183\n00:08:21.680 --> 00:08:22.730\nSo that's gonna take that and\n\n184\n00:08:22.730 --> 00:08:27.450\nbring it online as a recovery database and\noop I must have left something out.\n\n185\n00:08:27.450 --> 00:08:28.900\nI didn't give it a name.\n\n186\n00:08:28.900 --> 00:08:31.120\nSo I told it I was creating\na recovery database, but\n\n187\n00:08:31.120 --> 00:08:33.330\nI forgot to give it a name so\nI need to do that real quick.\n\n188\n00:08:33.330 --> 00:08:37.460\nSo I'm just gonna get back here and\nadd in dash name, and I'll give it a name,\n\n189\n00:08:37.460 --> 00:08:39.700\nyou can call it whatever you want,\nI'll call my recovery db.\n\n190\n00:08:42.260 --> 00:08:43.330\nJust cuz that's what I'm use to and\n\n191\n00:08:43.330 --> 00:08:45.680\nI can remember that it's\na recovery database, right?\n\n192\n00:08:45.680 --> 00:08:49.690\nNow it's gonna recover it and bring it\nonline, I know my database is clean, but\n\n193\n00:08:49.690 --> 00:08:53.292\nit's warning me that when we do a restore\nlike this the databases aren't clean,\n\n194\n00:08:53.292 --> 00:08:55.130\nbecause of the way volume\nshadow copy works.\n\n195\n00:08:55.130 --> 00:08:58.060\nSo we might need to do a little database\nmaintenance on it before we're ready to\n\n196\n00:08:58.060 --> 00:09:01.030\nrock, and I don't mind doing that\neven if the database is fine.\n\n197\n00:09:01.030 --> 00:09:03.900\nThis doesn't normally take long,\nso I'll knock that out real quick.\n\n198\n00:09:03.900 --> 00:09:07.234\nSo I'm gonna get into the folder\nwhere I've got that database,\n\n199\n00:09:07.234 --> 00:09:10.170\nand I'm just gonna run\na couple of quick commands.\n\n200\n00:09:10.170 --> 00:09:12.770\nReally just one command,\nis an important one.\n\n201\n00:09:12.770 --> 00:09:15.750\nI'm gonna do the ESEUTIL, and\n\n202\n00:09:15.750 --> 00:09:18.680\nthis is gonna let me do some quick\noffline database maintenance.\n\n203\n00:09:18.680 --> 00:09:23.170\nThis is the Exchange engine, it's utility\nthat lets us maintain those databases.\n\n204\n00:09:23.170 --> 00:09:24.780\nSo I'll say eseutil /r, and\n\n205\n00:09:24.780 --> 00:09:28.420\nthen I need the the three\ncharacter prefix of the database.\n\n206\n00:09:28.420 --> 00:09:28.940\nMine is E00.\n\n207\n00:09:28.940 --> 00:09:33.670\nIf this is your second database or\nthird database, it might be E01 or E02.\n\n208\n00:09:33.670 --> 00:09:35.770\nI need E00.\n\n209\n00:09:35.770 --> 00:09:38.610\nAnd then I need to tell it\nwhat I'm gonna do which is\n\n210\n00:09:38.610 --> 00:09:41.340\nperform some basic maintenance on it.\n\n211\n00:09:41.340 --> 00:09:44.470\nIndex maintenance and defragmantation and\nall of that good stuff, and\n\n212\n00:09:44.470 --> 00:09:45.920\nit's gonna process that.\n\n213\n00:09:45.920 --> 00:09:48.260\nThe larger your database\nis the longer this'll take.\n\n214\n00:09:48.260 --> 00:09:49.810\nIt could take ten or 15 minutes.\n\n215\n00:09:49.810 --> 00:09:52.469\nMy database is really small, so\nit happened almost instantly.\n\n216\n00:09:53.830 --> 00:09:54.510\nAll right.\n\n217\n00:09:54.510 --> 00:09:58.060\nOnce that's done,\nnow I can bring that database online.\n\n218\n00:09:58.060 --> 00:10:00.650\nSo I'm gonna mount database RecoveryDB,\n\n219\n00:10:00.650 --> 00:10:03.270\nand that's gonna bring\nthe database online.\n\n220\n00:10:03.270 --> 00:10:07.520\nNow, it's not replacing the Live database,\nthis is in addition to the Live database.\n\n221\n00:10:07.520 --> 00:10:09.740\nAnd once it's online, I can now pick and\n\n222\n00:10:09.740 --> 00:10:13.460\nchoose data out of it to\nmove into my Live one.\n\n223\n00:10:13.460 --> 00:10:15.520\nAnd so that's exactly what I want to do.\n\n224\n00:10:15.520 --> 00:10:18.610\nI want to get Jane's mailbox out\nof the recovery database, and\n\n225\n00:10:18.610 --> 00:10:21.200\nthen put it into the Live database,\nall right.\n\n226\n00:10:21.200 --> 00:10:23.880\nNow there is some naming that\nI've gotta worry about and\n\n227\n00:10:23.880 --> 00:10:25.300\nkind of figure that stuff out.\n\n228\n00:10:25.300 --> 00:10:28.600\nSo we might need to do a couple of\nother commands just to make sure things\n\n229\n00:10:28.600 --> 00:10:29.760\nare the way we want.\n\n230\n00:10:29.760 --> 00:10:35.396\nFor example, you can do\na GetMailboxDatabaseStatistics or\n\n231\n00:10:35.396 --> 00:10:39.650\nwait, [LAUGH] Get -MailboxStatistics,\n\n232\n00:10:39.650 --> 00:10:44.570\nthere we go, not Database and we can put\nthat at the recovery database to see\n\n233\n00:10:44.570 --> 00:10:47.530\nhow many mailboxes are in there and\nwhether it is actually healthy, and\n\n234\n00:10:47.530 --> 00:10:52.300\nthat's what I wanna do so\nI'm gonna point that at the recovery DB.\n\n235\n00:10:52.300 --> 00:10:55.540\nAnd when I run that,\nit gives me a list of the mailboxes,\n\n236\n00:10:55.540 --> 00:10:57.250\nand I can see Jane right there.\n\n237\n00:10:57.250 --> 00:10:59.020\nNow, why is that important?\n\n238\n00:10:59.020 --> 00:11:00.960\nYou might have forgotten\nthe employees name.\n\n239\n00:11:00.960 --> 00:11:02.750\nOr maybe the employee's name has changed.\n\n240\n00:11:02.750 --> 00:11:04.050\nOr maybe it was spelled differently.\n\n241\n00:11:04.050 --> 00:11:07.490\nWe need to know the name to be able to do\nthis restore, and so I can see that name,\n\n242\n00:11:07.490 --> 00:11:10.720\nas well as all the other mailboxes\nthat happen to be in this backup.\n\n243\n00:11:10.720 --> 00:11:13.590\nAnd you can run the same thing against\nyour production database to see what\n\n244\n00:11:13.590 --> 00:11:14.900\nthe name of the new account is.\n\n245\n00:11:14.900 --> 00:11:17.350\nSo that we've got those\nidentities that we can reference.\n\n246\n00:11:17.350 --> 00:11:17.872\nRight.\n\n247\n00:11:17.872 --> 00:11:20.970\nThe only problem with this is some\nstuff appears off the screen so\n\n248\n00:11:20.970 --> 00:11:24.130\nyou might wanna filter or do a format list\nor whatever to get this cleaned up and\n\n249\n00:11:24.130 --> 00:11:25.810\nsee all the actual data.\n\n250\n00:11:25.810 --> 00:11:29.380\nBut, I know that the account was\nJane Smith before, it's Jane Smith now.\n\n251\n00:11:29.380 --> 00:11:30.700\nThe email hasn't changed.\n\n252\n00:11:30.700 --> 00:11:32.809\nSo I can just jump right\nto doing the merge.\n\n253\n00:11:34.130 --> 00:11:35.050\nAll right.\n\n254\n00:11:35.050 --> 00:11:36.570\nSo to do the merge,\n\n255\n00:11:36.570 --> 00:11:41.920\nwhat we have to do is what's called a new\nmailbox restore request, all right?\n\n256\n00:11:41.920 --> 00:11:45.190\nYou do a restore request and then in the\nbackground it'll actually do the restore.\n\n257\n00:11:45.190 --> 00:11:50.710\nAnd I need to tell it to take Jane's\nmailbox, and go to the recovery database\n\n258\n00:11:50.710 --> 00:11:54.260\nand get any data from the recovery\ndatabase that matches her mailbox.\n\n259\n00:11:54.260 --> 00:11:56.170\nAnd merge it back into the live one,\n\n260\n00:11:56.170 --> 00:11:59.610\nthat's what's gonna restore\nthe missing email for her.\n\n261\n00:11:59.610 --> 00:12:04.840\nSo we'll just come through and specify\nthat source database is my recovery DB.\n\n262\n00:12:06.940 --> 00:12:13.680\nAnd the source store\nmailbox is her username.\n\n263\n00:12:13.680 --> 00:12:16.120\nSo whatever her username\nhappens to be in the system.\n\n264\n00:12:16.120 --> 00:12:19.820\nAnd you could do her email address, her\nprimary name, whatever it is that we want.\n\n265\n00:12:19.820 --> 00:12:21.860\nI'll just use her primary\nname there of JSmith, right.\n\n266\n00:12:21.860 --> 00:12:23.039\nThat's her alias.\n\n267\n00:12:24.490 --> 00:12:28.180\nAnd then after that,\nwe can just specify the destination,\n\n268\n00:12:28.180 --> 00:12:30.000\nright, where our information\nis going to be going to.\n\n269\n00:12:30.000 --> 00:12:36.042\nSo I'll say, -target mailbox, there we go,\nand I'm gonna point it to our Live one.\n\n270\n00:12:36.042 --> 00:12:39.150\nAnd here's where if you had a different\nname on the new mailbox, you could specify\n\n271\n00:12:39.150 --> 00:12:43.360\nthe different name, but if you keep it\nthe same, life is a lot easier on you.\n\n272\n00:12:43.360 --> 00:12:46.630\nAnd for the target mailbox, you generally\nwanna specify the email address.\n\n273\n00:12:46.630 --> 00:12:48.370\nNow why is that?\n\n274\n00:12:48.370 --> 00:12:52.260\nWell maybe I've taken Jane's email\naddress and attached it to my account.\n\n275\n00:12:52.260 --> 00:12:54.150\nAnd so\nI want to merge her mail into my account.\n\n276\n00:12:54.150 --> 00:12:56.760\nSo I could specify my email\naddress here and it would find me.\n\n277\n00:12:56.760 --> 00:12:58.430\nOr I can do it by email alias or whatever.\n\n278\n00:12:58.430 --> 00:12:59.760\nSo I'll just do her email address.\n\n279\n00:13:01.030 --> 00:13:03.470\nAll right, then that's really all we need.\n\n280\n00:13:03.470 --> 00:13:07.680\nBut there is a little bug in the current\nversion of Exchange, where if your storage\n\n281\n00:13:07.680 --> 00:13:10.970\nisn't exactly identical between\nwhen the backup was taken and\n\n282\n00:13:10.970 --> 00:13:12.950\nwhen it is now, it's gonna fail.\n\n283\n00:13:12.950 --> 00:13:16.870\nAnd so I need to just tell it\nto skip part of the merge.\n\n284\n00:13:16.870 --> 00:13:20.581\nAnd so I'm gonna say skip merging and\n\n285\n00:13:20.581 --> 00:13:25.320\nthen StorageProviderForSource, okay.\n\n286\n00:13:25.320 --> 00:13:28.360\nNow, if you're running this right now,\nyou need that command.\n\n287\n00:13:28.360 --> 00:13:29.540\nYou need it,\n\n288\n00:13:29.540 --> 00:13:32.550\nat the time of this filming the bug\nis in the latest version of exchange.\n\n289\n00:13:32.550 --> 00:13:33.730\nYou're going to need that.\n\n290\n00:13:33.730 --> 00:13:35.120\nBut if you're watching\nthis six months from now,\n\n291\n00:13:35.120 --> 00:13:37.380\nthat bug might be fixed,\nthen you might be able to leave that off.\n\n292\n00:13:37.380 --> 00:13:39.020\nNow it doesn't really matter.\n\n293\n00:13:39.020 --> 00:13:40.790\nYou can go ahead and\nleave it in there if you want.\n\n294\n00:13:40.790 --> 00:13:43.590\nBecause if your storage is identical, it's\njust gonna repopulate and so it's fine.\n\n295\n00:13:43.590 --> 00:13:46.850\nIf your storage is different,\nthis takes care of you, and you're fine.\n\n296\n00:13:46.850 --> 00:13:49.320\nSo it really makes no difference,\nbut we can leave that off and\n\n297\n00:13:49.320 --> 00:13:51.700\nthat'll make sure the restore\nhappens properly.\n\n298\n00:13:51.700 --> 00:13:54.250\nSo when this runs,\nit's gonna look to the recovery database.\n\n299\n00:13:54.250 --> 00:13:58.360\nIt's gonna get Jane's old email and\nmerge it into her Live one.\n\n300\n00:13:58.360 --> 00:14:00.470\nAssuming that I don't mess it up.\n\n301\n00:14:00.470 --> 00:14:04.510\nNow I'm getting mailbox JSmith\ndoesn't exist on database recovery DB,\n\n302\n00:14:04.510 --> 00:14:06.800\nso, they looked in the recovery\ndatabase and it didn't find it.\n\n303\n00:14:06.800 --> 00:14:08.760\nNow, I thought her alias was JSmith.\n\n304\n00:14:08.760 --> 00:14:11.560\nI'm gonna guess that it apparently isn't,\nso\n\n305\n00:14:11.560 --> 00:14:13.930\nif it isn't,\nI need to get that name right.\n\n306\n00:14:13.930 --> 00:14:16.600\nSo let me go back and\nI'll just use her email address instead.\n\n307\n00:14:16.600 --> 00:14:19.470\nAll right, well,\nit looks like I got an error on that, and\n\n308\n00:14:19.470 --> 00:14:21.740\nI thought her alias was JSmith and\nmaybe it isn't.\n\n309\n00:14:21.740 --> 00:14:24.420\nIt's tell me mailbox JSmith\ndoesn't exist on the database.\n\n310\n00:14:24.420 --> 00:14:25.070\nThat's fine.\n\n311\n00:14:25.070 --> 00:14:30.420\nI'll just change it, and instead of using\nher alias I'll use her full mailbox name.\n\n312\n00:14:30.420 --> 00:14:32.220\nAny mailbox name that's\njust your display name.\n\n313\n00:14:32.220 --> 00:14:35.690\nWe saw that with the Get-Mailbox\nstatistics earlier.\n\n314\n00:14:35.690 --> 00:14:39.920\nSo instead of saying source mailbox\nJSmith, I'll change that to\n\n315\n00:14:39.920 --> 00:14:44.600\nJane Smith written just like in the output\nfrom that Get-Mailbox statistics.\n\n316\n00:14:44.600 --> 00:14:47.300\nI saw that one on the screen so\nI know that'll work.\n\n317\n00:14:47.300 --> 00:14:48.760\nThe other one apparently not so.\n\n318\n00:14:48.760 --> 00:14:50.590\nWe'll run that and there it goes.\n\n319\n00:14:50.590 --> 00:14:56.190\nSo now it's queued up Jane's mailbox\nrequest and I can do a quick get\n\n320\n00:14:56.190 --> 00:15:00.880\nmailbox restore request, and\nit will show the status of that.\n\n321\n00:15:00.880 --> 00:15:02.504\nAnd she'll show as queued initially and\n\n322\n00:15:02.504 --> 00:15:04.990\nthen when it's done restoring\nit should show as completed.\n\n323\n00:15:04.990 --> 00:15:08.120\nSo now her mailbox has been restored and\nshe's back in business.\n\n324\n00:15:08.120 --> 00:15:10.230\nNow it's not a true restore it's a merge.\n\n325\n00:15:10.230 --> 00:15:11.860\nSo here mailbox is already live.\n\n326\n00:15:11.860 --> 00:15:13.980\nShe could already get into it and\nhave her data.\n\n327\n00:15:13.980 --> 00:15:16.840\nIt's just the things she deleted\nwill now be back again, or\n\n328\n00:15:16.840 --> 00:15:18.980\nif the mailbox was empty\nnow it'll be populated.\n\n329\n00:15:18.980 --> 00:15:22.240\nAnd the important part is I didn't\nmess with anybody else's mailbox,\n\n330\n00:15:22.240 --> 00:15:25.630\nI just messed with Jane's mailbox and\ngot her data back.\n\n331\n00:15:25.630 --> 00:15:28.080\nNow I say that,\nlet's go see if it actually happened.\n\n332\n00:15:28.080 --> 00:15:29.880\nSo now if we log into Jane's mailbox,\n\n333\n00:15:29.880 --> 00:15:33.980\nlet me just refresh this screen,\nwhat we should see, there it is.\n\n334\n00:15:33.980 --> 00:15:37.160\nThere's the email that she deleted,\nemptied the recycle bin, and\n\n335\n00:15:37.160 --> 00:15:39.090\nthen purged the recycle bin.\n\n336\n00:15:39.090 --> 00:15:40.800\nThat email's back again now.\n\n337\n00:15:40.800 --> 00:15:42.530\nRight, it came back as part of that merge.\n\n338\n00:15:42.530 --> 00:15:45.130\nIf she'd gotten new email that\nwould still be there too, right?\n\n339\n00:15:45.130 --> 00:15:46.540\nWe didn't delete anything.\n\n340\n00:15:46.540 --> 00:15:48.820\nWe just added back what was missing.\n\n341\n00:15:48.820 --> 00:15:51.460\nMissing folders, other content,\nand brought it back.\n\n342\n00:15:51.460 --> 00:15:53.610\nSo now that I've verified\nthat we're safe there,\n\n343\n00:15:53.610 --> 00:15:56.270\nthe last thing I need to do is\nget rid of my recovery database.\n\n344\n00:15:56.270 --> 00:15:59.690\nSo we can remove the recovery database,\nand just get it out of the system.\n\n345\n00:15:59.690 --> 00:16:02.090\nSo I'm gonna do a quick Dismount-Database.\n\n346\n00:16:02.090 --> 00:16:07.100\nAnd I'll dismount the RecoveryDB.\n\n347\n00:16:07.100 --> 00:16:09.000\nThat's gonna take it offline.\n\n348\n00:16:09.000 --> 00:16:10.810\nAll right, and then we can remove it.\n\n349\n00:16:10.810 --> 00:16:14.760\nNow when we remove it, it is actually\nnot going to delete the files.\n\n350\n00:16:14.760 --> 00:16:17.820\nIt will leave the files behind, but\nit will remove it from Exchange and\n\n351\n00:16:17.820 --> 00:16:20.370\nthen we can go back and\ndelete the files ourselves.\n\n352\n00:16:20.370 --> 00:16:25.910\nSo, I'll say Remove--Mailbox Database and\nthen the Recovery DB\n\n353\n00:16:25.910 --> 00:16:30.350\nis what I wanna get rid of and that's\ngonna knock that one out, and there we go.\n\n354\n00:16:30.350 --> 00:16:33.100\nAnd so last but not least,\nto clean everything up\n\n355\n00:16:33.100 --> 00:16:37.880\nwe can get rid of that JamesStinks folder\nand then we'll be back in business, okay?\n\n356\n00:16:37.880 --> 00:16:39.810\nSo the cool part here\nis that we can jump in,\n\n357\n00:16:39.810 --> 00:16:44.290\nwe can restore an individual user's\nmailbox and we didn't affect anybody else.\n\n358\n00:16:44.290 --> 00:16:44.860\nThat's pretty neat.\n\n359\n00:16:46.040 --> 00:16:49.000\nAll right, well, in this episode we\ngot a chance to see how to restore\n\n360\n00:16:49.000 --> 00:16:53.220\nan individual user's mailbox, instead\nof impacting everybody on the system.\n\n361\n00:16:53.220 --> 00:16:57.950\nWe started by restoring the recovery\ndatabase, then we went through and\n\n362\n00:16:57.950 --> 00:17:02.310\ncreated a restore request to merge that\nuser's data from the recovery database\n\n363\n00:17:02.310 --> 00:17:03.670\nback into production.\n\n364\n00:17:03.670 --> 00:17:06.350\nAnd then we cleaned up by removing\nthat recovery database out of there.\n\n365\n00:17:06.350 --> 00:17:07.700\nSo pretty straight forward.\n\n366\n00:17:07.700 --> 00:17:10.470\nAnd if you watched the dial tone episode,\nthat was very similar.\n\n367\n00:17:10.470 --> 00:17:13.430\nThe only difference is we didn't have\nto do that database swap in the middle.\n\n368\n00:17:13.430 --> 00:17:16.890\nSo if you think about it, this is a way\nyou could do a dial tone database.\n\n369\n00:17:16.890 --> 00:17:18.160\nAnd it's much simpler.\n\n370\n00:17:18.160 --> 00:17:18.850\nRight?\n\n371\n00:17:18.850 --> 00:17:20.970\nBut the challenge here is just\nthe amount of time it takes.\n\n372\n00:17:20.970 --> 00:17:22.840\nRestoring one mailbox is not a big deal.\n\n373\n00:17:22.840 --> 00:17:26.780\nBut if you're restoring thousands of\nmailboxes, this can take a lot longer than\n\n374\n00:17:26.780 --> 00:17:30.060\nwe necessarily want, so the other recovery\nmethods are a little better for that.\n\n375\n00:17:30.060 --> 00:17:34.420\nBut for individual mailboxes, that's the\nprocess, and she's back in business, and\n\n376\n00:17:34.420 --> 00:17:35.850\ninto her mailbox.\n\n377\n00:17:35.850 --> 00:17:37.950\nAll right well, that's all I've got for\nthis episode, so\n\n378\n00:17:37.950 --> 00:17:39.040\nI hope you guys enjoyed it.\n\n379\n00:17:39.040 --> 00:17:42.575\nSigning off for ITProTV, I'm Don Pezet,\nand I'll see you next time.\n\n380\n00:17:42.575 --> 00:17:48.879\n[MUSIC]\n\n",
          "vimeoId": "136822913"
        }
      ],
      "title": "Backup and Restore"
    }
  ],
  "url": "microsoft-exchange-2013",
  "vLab": false
}
